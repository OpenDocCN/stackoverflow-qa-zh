# StackOverflow 问答 000066000-000066999

# javascript - 客户端 XSL 处理中的 JavaScript？

> ID：66006
> 
> 赞同：2
> 
> 时间：2008-09-15T19:33:39.693
> 
> 标签：javascript, xslt, browser

是否可以执行嵌入 XML 的 JavaScript 来协助客户端（基于浏览器）的 XSL 转换？它是如何完成的，它是如何官方的？

Microsoft 的 XML DOM 对象在服务器端（即在 ASP/ASP.NET 中）允许这样做。

**澄清：**我不是指在文档转换*之后*执行的 HTML DOM 脚本，也不是指由浏览器中的 JavaScript*启动*的 XSL 转换（例如 W3Schools 页面显示的内容）。我指的是转换期间位于 XSL 中的实际脚本块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T17:31:36.607

要嵌入 JavaScript 以帮助转换，您可以使用 <xsl:script>，但[它仅限](http://www.topxml.com/xsl/tutorials/intro/xsl10.asp)于 Microsoft 的 XML 对象实现。这是一个[例子](https://oxampleski.googlecode.com/svn/trunk/XSL)：

**脚本化的.xml**：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="scripted.xsl"?>
<data a="v">
    ding dong
</data> 
```

**脚本化的.xsl**：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<html xmlns:xsl="http://www.w3.org/TR/WD-xsl">
<xsl:script implements-prefix="local" language="JScript"><![CDATA[

    function Title()
    {
        return "Scripted";
    }

    function Body(text)
    {
        return "/" + text + "/";
    }

]]></xsl:script>
<head>
    <title><xsl:eval>Title()</xsl:eval></title>
</head>
<body>
    <xsl:for-each select="/data"><xsl:eval>Body(nodeTypedValue)</xsl:eval></xsl:for-each>
</body>
</html> 
```

Internet Explorer（或者如果您只使用 COM/.NET 中的 MSXML）中的结果是：

```
<html>
<head>
    <title>Scripted</titlte>
</head>
<body>
    /ding dong/
</body>
</html> 
```

它似乎不支持通常的 XSL 模板结构，并且添加根节点会导致 MSXML 进入某种无法正常工作的标准模式。

我不确定标准 XSL 中是否有任何等效功能，但我可以梦想。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:28:06.770

我不认为您可以执行嵌入在 XML 文档中的 JavaScript 代码。就像 helios 提到的，您可以使用 JavaScript 执行转换。

JavaScript 在大多数情况下作为 CDATA 嵌入，通常**在**XSL 转换发生后使用。如果我理解正确，您希望在您的 XML 中有一个可执行的 <script> 标记。

如果您需要对转换进行更多控制，则可以使用 XSL 参数和模板。您可以在 XSLT 中设置这些值，然后将它们传递给 exec()。Mozilla 支持在 XSL 中[设置参数](http://developer.mozilla.org/en/The_XSLT%2f%2fJavaScript_Interface_in_Gecko/Setting_Parameters)，但我不确定其他浏览器。

此外，跨浏览器的 JavaScript/XSLT 也令人头疼。[Mozilla 的 JavaScript/XSLT 接口与](http://developer.mozilla.org/en/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations)[IE 的](http://www.learn-ajax-tutorial.com/Xslt.php)接口非常不同，因此您可能希望依赖于独立于浏览器的库，例如[jQuery 的 XSLT](http://www.jongma.org/webtools/jquery/xslt/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T19:38:15.143

是的。它取决于浏览器，但您可以使用 Javascript。w3schools.com 上有一个小而实用的教程。它是 XSLT 教程的一部分。

这页纸：

[http://www.w3schools.com/xsl/xsl_client.asp](http://www.w3schools.com/xsl/xsl_client.asp)

XSLT 教程：

[http://www.w3schools.com/xsl/default.asp](http://www.w3schools.com/xsl/default.asp)

该网站将比我自己更有帮助。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T20:29:44.177

如果“官方”意味着“基于标准”，我怀疑你会找到你要找的东西。您描述的是在样式表解析期间要解析和执行的用户代理脚本语言。如果您的目标是通过在 Javascript 中完成繁琐的工作来简化 XSLT，那么您最好尝试在 javascript 中生成 XSLT，然后使用类包装器通过浏览器自己的 XSLT 解析器解析结果。

这当然比您可能签署的工作要多得多，但是如果您确信自己想要这样做，我会看看[John Resig 的 Javascript Micro-Templates](http://ejohn.org/blog/javascript-micro-templating/)以在您的 javascript 中动态存储模板友好的 XSLT。

# c# - 企业环境中的自动更新 (C#)

> ID：66007
> 
> 赞同：4
> 
> 时间：2008-09-15T19:33:42.517
> 
> 标签：c#, .net, auto-update

我有一个安装在企业环境中的三层应用程序。随着每次服务器版本更新，所有客户端也必须更新。目前，我提供了一个通过 Active Directory 自动部署的 MSI 包，但是我的客户（每个用户大多有 20-300 个用户）似乎讨厌 MSI 解决方案，因为它是

*   运行起来很复杂（很少有 Active Directory 知识）；
*   当检测到新版本时，服务器无法触发更新过程；
*   客户不能同时安装多个版本的客户端（如2.3和2.4）与不同的服务器对话；
*   更新过程本身并不总是按预期工作（有时非常奇怪的行为会在几个小时后自行恢复）

我现在已经用 ClickOnce 做了一些实验，但是这种方式对我来说不够灵活，而且很难集成到我的自动构建过程中。此外，它会产生神秘的错误消息，这肯定会让我的客户感到困惑。

我自己编写更新逻辑没有问题，但问题是运行自我更新应用程序的用户执行更新的权限太有限。我发现他们能够写入本地应用程序数据目录，但我认为这不是安装应用程序文件的典型位置。

您知道“正常工作”的更新方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T20:04:50.757

您可以在某种程度上复制 ClickOnce 的功能，只需根据您的需要进行调整。

1.  创建一个轻量级可执行文件，检查网络/Web 位置是否有更新。
2.  如果有更新，它将在本地复制它们并替换“真实”应用程序文件。
3.  它运行“真正的”应用程序。

应用程序文件的位置应由权限和操作系统确定。如果用户只有有限的一组文件夹的写入权限，那么您别无选择，只能使用其中一个文件夹。另一种选择是提供一个初始安装包，用于安装轻量级可执行文件并授予对特定文件夹（例如“C:\Program Files\MyApp”）的读/写权限。这种方法通常需要 IT 部门的支持。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T06:47:43.380

很难为您提供准确的答案，因为有关客户端安装程序的关键信息并不明确。您是否将客户端文件安装到 Program Files 中？那么当用户受到限制时，您可能会遇到问题。

您不认为 Local Application Data 是部署应用程序的文件夹，但 Google 确实如此。它的 Chrome 浏览器在 Windows 上以这种方式安装，它的自动更新过程甚至是不引人注意的（这可能听起来很可怕）。那么为什么不将您的应用程序部署到此文件夹中以供受限用户使用呢？您可以在此处找到有关 Chrome 安装程序的更多信息，

[http://robmensching.com/blog/archive/2008/09/04/Dissecting-the-Google-Chrome-setup.aspx](http://robmensching.com/blog/archive/2008/09/04/Dissecting-the-Google-Chrome-setup.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-24T22:40:30.593

这是我为解决我们对 WinForms 和 WPF 应用程序的特定需求而编写的一个开源解决方案。总体思路是以尽可能低的开销获得最大的灵活性。它应该为您所描述的所有内容提供所需的所有灵活性。

因此，**集成**非常简单，该库几乎可以为您完成所有工作，包括同步操作。它也**非常灵活**，可以让您确定要执行哪些任务以及在什么条件下执行 - 您制定规则（或使用一些已经存在的规则）。最后一点是对**任何更新源**（网络、BitTorrent 等）和任何**提要格式**的支持——任何未实现的内容您都可以自己编写。

还支持冷更新（需要重新启动应用程序），并且会自动完成，除非为任务指定“热交换”。

这归结为一个 DLL，大小不到 70kb。

更多详情请访问[http://www.code972.com/blog/2010/08/nappupdate-application-auto-update-framework-for-dotnet/](http://www.code972.com/blog/2010/08/nappupdate-application-auto-update-framework-for-dotnet/)

代码位于[http://github.com/synhershko/NAppUpdate](http://github.com/synhershko/NAppUpdate)（在 Apache 2.0 许可下获得许可）

当我有更多时间时，我计划进一步扩展它，但老实说，你应该能够自己快速增强它，以应对它目前不支持的任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-25T19:57:46.237

如果你不想给你的用户太多的权限，可以写一个 Windows 服务，它会在每台计算机上运行在具有适当权限的帐户下，并且可以在新版本可用时更新你的应用程序.

# asp.net-mvc - 您将如何在 asp.net mvc 中实现面包屑助手？

> ID：66009
> 
> 赞同：24
> 
> 时间：2008-09-15T19:33:50.630
> 
> 标签：asp.net-mvc, navigation

我知道你可以很容易地根据数据制作一个助手。因此，如果可能，请仅提交包含获取数据的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T22:32:19.060

我们为此使用了一个动作过滤器。

...

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var controller = (Controller) filterContext.Controller;
        Breadcrumb[] breadcrumbs = _breadcrumbManager.PushBreadcrumb(_breadcrumbLinkText);
        controller.ViewData.Add(breadcrumbs);
    } 
```

在您提及之前，我也对过滤器属性中的服务位置感到厌恶 - 但我们几乎没有选择。IBreadcrumbManager 看起来像这样：

```
public interface IBreadcrumbManager
{
    Breadcrumb[] PushBreadcrumb(string linkText);
} 
```

该实现将面包屑对象放入会话中。网址是`HttpContext.Current.Request.RawUrl`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T04:56:12.877

@Chris：是这样的：

```
 <% 
        foreach (var item in ViewData.Get<Breadcrumb[]>())
            {
        %>
                <a href="<%= Server.HtmlEncode(item.Url) %>"><%= item.LinkText %></a> &raquo;
        <% 
            } 
        %> 
```

# c# - 如何最好地将整个应用程序本地化为多种不同的语言？

> ID：66012
> 
> 赞同：6
> 
> 时间：2008-09-15T19:34:08.523
> 
> 标签：c#, .net, localization

我正在使用 Visual Studio（2005 及更高版本）。我正在尝试制作一个应用程序，用户可以在其中更改所有菜单、输入格式等的语言。我将如何继续这样做，因为我认为 .Net 中有一些完整的功能可以帮助我解决这个问题？

我需要考虑以下几点（如果我错过了一些明显的东西，请填写我）

*   字符串（菜单、文本）
*   输入数据（解析浮点数、日期等）
*   应该很容易添加对另一种语言的支持

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T19:44:20.777

无论如何，我都不是 .NET 方面的专家，但本地化绝不像“交换字符串值”或“更改日期格式”那么简单。还有更多需要考虑的因素，例如布局、正确的文本放置。

以中文为例。您阅读的方式是从上到下而不是从左到右。如果正确本地化，应用程序应该考虑到这一点。

[http://msdn.microsoft.com/en-us/library/y99d1cd3(VS.80).aspx](http://msdn.microsoft.com/en-us/library/y99d1cd3(VS.80).aspx)似乎是一个好的开始，但如果您正在处理 Windows 窗体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T19:44:33.363

经典的秘诀是：设计没有母语但有本地化功能的应用程序，并将初始化开发成一种语言（例如，英语）。因此，您每天晚上构建应用程序并将其本地化为英语；如果没有本地化步骤，它将无法使用。做得好，初始样本本地化的资源可以替换为任何其他语言的资源。从一开始就考虑非罗马文字。拥有一个始终需要本地化的无语言应用程序，而不是需要减去其母语并添加替代语言的特定语言应用程序要干净得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T19:40:54.277

对于字符串，您应该将字符串与代码分开（使用 XML/DLL 将字符串 ID 转换为真实字符串是一种方法）。但是，您确实需要确保您支持某些语言的双字节字符（如果您使用 C/C++，这是相关的）。

对于输入数据，您想要的是具有不同的语言环境。在 Java 中，这相对容易，如果您使用 C#，它可能也很容易。在 C/C++ 中我真的不知道。基本思想是输入解析器应该根据当时选择的语言环境而有所不同。因此，每个字段（文本字段、文本框等）都必须有一个抽象解析器，然后根据区域设置（从右到左、双字节等）由不同的类实现。

检查 Java 实现以获取有关他们如何做到这一点的详细信息。它非常实用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T20:02:37.410

您**肯定**需要使用 .NET ResourceManager 和 resx 文件 xml 格式，但是有很多方法可以使用它。

这实际上取决于您想要实现的目标。对我来说，我想要一个任何人都可以修改的单个 xml 资源文件（针对每种支持的语言）。我创建了一个帮助类，将全局资源文件加载到 ResourceManager（仅一次）中，并且我有一个帮助函数，它为我提供了给定名称所需的资源。这种方法的唯一缺点是我无法利用资源与属性的动态绑定。

我发现这比每个表单的多个或嵌入式资源文件更好、更容易管理。此外，完全相同的方法可以在 ASP.NET 应用程序中使用。我还发现这种方法意味着将资源翻译和向客户提供语言包的外包更易于管理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T22:24:26.477

Microsoft 推荐的方法是使用附属程序集，如[打包和部署资源](http://msdn.microsoft.com/en-us/library/sb6a8618.aspx)中所述。如果您使用 ResourceManager 加载资源，.NET 将为 CurrentUICulture 加载正确的资源。这默认为用户在 Windows 中的当前 UI 语言设置。

可以通过 Visual Studio 或外部工具 WinRes.exe 本地化 Windows 窗体。[本文](http://msdn.microsoft.com/en-us/library/8bxdx003.aspx)介绍 WinRes 以及如何使用 Visual Studio 对表单进行本地化。

# language-agnostic - 异常机制的最佳实现是什么？

> ID：66016
> 
> 赞同：2
> 
> 时间：2008-09-15T19:34:21.220
> 
> 标签：language-agnostic, exception

大多数程序语言都有某种异常处理。一些语言有返回码，另一些有 try/catch 或rescue/retry 等，每种语言在大型团体开发工作中的可读性、健壮性和实际有效性方面都有自己的特点。哪一个是最好的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T19:44:18.107

我会说这取决于你的问题的性质。不同的问题域可能需要几乎任意的错误消息，而其他琐碎的任务只能在错误时返回 NULL 或 -1。

*错误返回代码的问题在于您正在污染/掩盖错误，因为它可以被忽略（有时 API 客户端不知道他们应该检查错误代码）。它从手头的方法中提供（合理）有效的输出。*

想象一下，您有一个 API，您在其中请求某个地图的索引键，将其存储在列表中，然后继续运行。API 稍后会发送一个回调，然后该方法可能会使用在本示例中可能为 -1 的键（错误代码）遍历表。BOOM，当您在某个数组中索引到 -1 时，应用程序会崩溃，而这些问题可能很难确定。这仍然是一个简单的例子，但它说明了错误代码的问题。

另一方面，错误代码比抛出异常更快，您可能希望将它们用于频繁访问的方法调用 - 如果返回这样的错误代码是合适的。我会说尝试将这些类型的错误代码封装在私有程序集中是完全可以的，因为您不会将这些错误代码暴露给 API 的客户端。永远记住要严格记录这些方法，因为这些应用程序的核弹可以在应用程序中逗留很长时间，因为它们在它关闭之前就被触发了。

就个人而言，我在某种程度上更喜欢两者的混合。我只是为此使用异常-异常-当程序运行到意外状态并且需要通知某些事情超出计划时。我不喜欢在我的代码中编写 try/catch 块，但这完全取决于个人喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T19:45:19.120

最适合什么？语言设计总是关于权衡。返回码的优点是除了常规的函数调用之外，它们不需要任何运行时支持；缺点是 1) 你总是必须检查它们 2) 返回类型必须有一个不是函数调用的有效结果的失败值。

自动异常处理的优点是代码中的错误条件不会消失。

各种语言（以及 Lisp 的条件系统、E 的弹出器等）中的异常处理语义之间的差异主要表现在程序应该继续执行时如何处理堆栈展开。

不过，总而言之：当您需要编写可读、健壮的软件时，自动异常处理非常有价值，尤其是在大型团队中。让计算机为您跟踪错误情况可以让您在阅读代码时少考虑一件事情，并且它消除了出错的机会。我唯一使用返回码来指示错误的情况是，如果我在没有异常处理的语言中实现一种语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T19:39:34.657

try/catch/finally 出色地完成了这项工作。

它允许程序员优雅地处理特定条件以及一般故障。

总而言之，我确信每个都和其他任何一个一样好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T19:43:20.327

我必须使用 try/catch 的概念。我觉得就可读性而言，这为代码维护者提供了最多。只要异常输入正确并且相关的消息包含足够详细的数据（我个人不喜欢包括堆栈跟踪，但我知道很多人这样做，这将使这变得更简单）就应该相当直接地找到函数调用链更可追溯。）返回代码实现需要逐个程序的外部代码定义表。从个人经验来看，这既难以维护，又难以参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T19:45:37.277

有关异常处理的不寻常观点，请参阅 Haskell 的[`Control.Exception`monad](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Exception.html)

# java - getChildNodes() 返回的 DOM NodeList 的顺序

> ID：66032
> 
> 赞同：8
> 
> 时间：2008-09-15T19:36:44.770
> 
> 标签：java, xml, dom

DOM 方法`getChildNodes()`返回`NodeList`当前`Node`. 在订购a`NodeList`时，列表是否保证按文档顺序排列？

例如， given保证返回一个with ，`<a><b/><c/><d/></a>`并且*按那个顺序*?`a.getChildNodes()``NodeList``b``c``d`

 *[javadoc](http://java.sun.com/javase/6/docs/api/org/w3c/dom/Node.html#getChildNodes())对此并不清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T19:43:42.057

以我的经验，是的。[DOM 规范](http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1451460987)并不清晰。如果你是偏执狂，试试类似

```
current = node.firstChild;
while(null != current) {
    ...
    current = current.nextSibling;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T19:43:07.893

文档排序的节点列表是 DOM 的其他实现中的行为，例如 Javascript 或 Python。随机排序的节点列表将完全没用。我认为依赖按文档顺序返回的节点是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T19:45:50.163

我的经验是，每次我费心去看它时，它都是按文档顺序排列的。但是，我相信我在某处读到它不能保证按文档顺序排列。我现在找不到我在哪里读到的，所以把它当作传闻。我认为如果您**必须**按文档顺序排列它们，最好的选择是使用 FirstChild 然后 NextSibling 直到没有更多的同胞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T19:46:48.943

我很想告诉你，这是有保证的（我相信它是这样的），但在这种情况下，[文档对象模型规范](http://www.w3.org/DOM/)本身似乎是模棱两可的。不过，我很确定它始终是文档顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T19:46:51.767

在您的示例中，如所示。我相信是这样。但是，我体验过空间被解释为节点的真实体验，因此：

```
 <a><b/><c/><d/></a> 
```

不同于

```
 <a><b/> <c/><d/></a> 
```

如果您正在查看索引 [1]，firefox 和 IE 可能会呈现不同的结果。我建议不要根据您的需要依赖订单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-11-28T00:18:49.860

是的，它们是有序的，因为它返回一个 nodeList，您必须说 getNamedChildNodes 才能获得一个不像在 namedNodeList 中那样有序的列表。

# replication - 应用级复制技术

> ID：66040
> 
> 赞同：4
> 
> 时间：2008-09-15T19:37:17.203
> 
> 标签：replication, soa

我正在构建一个解决方案，该解决方案将部署在全球多个地区的多个数据中心，每个数据中心都有一个在每个地区主动更新的数据副本。我将在每个数据中心拥有多个数据库和文件系统的组合，其状态必须保持一致（在数据中心内）。这些多个存储库将以 SOA 服务层为前端。

我可以容忍复制中的一些延迟，并且需要允许区域离线，然后再赶上。

鉴于数据的多个后端存储库，我不能轻易地依赖每个独立的复制解决方案来保持一致的状态。因此，我导致在应用层实现复制——通过以某种方式复制 SOA 请求。我需要确保不会发生复制循环，并且最后一个写入器条件已正确排序。

根据您的经验，解决此问题的最佳模式是什么，是否有值得研究的好产品（免费或其他）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T11:28:13.207

Lotus/Domino 是您的答案。我已经使用它十年了，它正是您所需要的。它可能并不时尚（我会挑战这种看法），但它功能强大、适应性强且非常安全，最新版本的 R8 是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T03:58:14.347

您绝对应该考虑 IBM Lotus Domino。Lotus Notes 数据库可以按照预定义的计划在站点之间进行复制。Notes/Domino 中的复制绝对是一个非常强大的功能，可以在站点之间完全复制数据。即使服务器在下次连接时不可用，它也会简单地复制并恢复同步。

就 SOA 服务层而言，您可以使用 Domino Designer 编写 Web 服务。自 Notes/Domino 7.5.x（我相信）以来，Domino 已经能够提供和使用 Web 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-19T06:10:48.800

正如其他人建议的那样，我也会推荐 Lotus Notes/Domino。8.5真的是非常强大的应用开发平台

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T05:52:47.113

我认为您的答案必须基于发布/订阅架构。我假设您的数据中心之间有可靠的消息传递，以便您可以依赖最终收到的已发布更新。如果您对数据存储库的所有访问都是通过服务进行的，您可以将事件通知添加到每个更新服务的编排中，以通知所有感兴趣的数据中心该事件。理想情况下，主数据库是唯一发送这些更新的数据库。如果主数据库是唯一发送更新的数据库，您可以排除将通知路由到首先生成它们的节点，从而避免更新循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T19:57:32.973

您没有提供足够的细节来确定您的需求，但我认为您应该查看 SQL Server 合并复制。它允许异步复制多个数据库并完全解决冲突。您将需要指定一个全局主数据库，并且所有其他数据库都将复制到该数据库，但所有数据库实例都是功能齐全的（读/写），因此您可以在适合您的任何时间间隔安排复制。如果任何区域离线，他们可以稍后赶上没有问题 - 如果主服务器离线，每个人都将独立工作，直到复制可以恢复。

我很想知道这种灵活的其他解决方案（当然除了 Lotus Notes/Domino，这些天不是很流行）。

# lucene - 如何按 Lucene.Net 字段排序并忽略“a”和“the”等常见停用词？

> ID：66041
> 
> 赞同：1
> 
> 时间：2008-09-15T19:37:20.153
> 
> 标签：lucene, lucene.net

我发现了如何按 Lucene.Net 索引中的给定字段而不是按分数对查询结果进行排序；所需要的只是一个已编入索引但未标记化的字段。但是，我无法弄清楚的是如何在忽略“a”和“the”等停用词的情况下对该字段进行排序，以便例如以下书名按升序排序：

1.  帽子里的猫
2.  霍顿听到谁

这样的事情是否可能，如果是，如何？

我正在使用 Lucene.Net 2.3.1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T20:42:07.890

我将 Lucene 返回的结果包装到我自己的自定义对象集合中。然后我可以用额外的信息/上下文信息填充它（并使用诸如荧光笔类之类的东西来提取匹配的片段），并添加分页。如果您采用类似的路线，您可以创建一个“结果”类/对象，添加类似 SortBy 属性的内容并获取您想要排序的任何字段，删除所有停用词，然后将其保存在此属性中。现在只需根据该属性对集合进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T19:40:24.403

创建索引时，创建一个仅包含您希望排序的单词的字段，然后在检索时对该字段进行排序但显示完整标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T19:41:17.617

自从我使用 Lucene 以来已经有一段时间了，但我的猜测是添加一个额外的字段来排序和存储其中的值，并且已经去除了停用词。您可能可以使用相同的分析器来生成此值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:02:00.810

似乎有一个 catch-22，您必须使用分析器对字段进行标记以去除标点符号和停用词，但您不能对标记化的字段进行排序。那么如何在不进行标记的情况下去除停用词呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-29T13:57:35.673

对于搜索，我发现[搜索 lucene .net 索引和排序选项](http://www.logiclabz.com/c/search-lucene-index-in-net-c-with-sorting-options.aspx)链接很有趣，可以解决你的问题

# java - 在 Java 中实现常量的最佳方法是什么？

> ID：66066
> 
> 赞同：370
> 
> 时间：2008-09-15T19:39:15.937
> 
> 标签：java, constants

我见过这样的例子：

```
public class MaxSeconds {
   public static final int MAX_SECONDS = 25;
} 
```

并假设我可以有一个常量类来包装常量，将它们声明为静态最终的。我几乎不知道 Java，我想知道这是否是创建常量的最佳方式。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2008-09-15T19:39:48.023

这是完全可以接受的，甚至可能是标准。

```
(public/private) static final TYPE NAME = VALUE; 
```

其中`TYPE`是类型，`NAME`是全大写的名称，下划线表示空格，并且`VALUE`是常量值；

我强烈建议不要将常量放在它们自己的类或接口中。

附带说明：声明为 final 且可变的变量仍然可以更改；但是，变量永远不能指向不同的对象。

例如：

```
public static final Point ORIGIN = new Point(0,0);

public static void main(String[] args){

    ORIGIN.x = 3;

} 
```

这是合法的，`ORIGIN`然后将是 (3, 0) 处的一个点。

* * *

## 回答 #2

> 赞同：234
> 
> 时间：2008-09-15T19:51:44.597

我强烈建议不要使用单个常量类。这在当时似乎是个好主意，但是当开发人员拒绝记录常量并且类增长到包含超过 500 个彼此根本不相关的常量（与应用程序的完全不同方面相关）时，这通常会变成完全不可读的常量文件。反而：

*   如果您可以访问 Java 5+，请使用枚举来定义应用程序区域的特定常量。对于这些常量，应用程序领域的所有部分都应该引用枚举，而不是常量值。您可以声明一个类似于声明类的枚举。枚举可能是 Java 5+ 中最有用的（并且可以说是唯一的）有用的特性。
*   如果您有仅对特定类或其子类之一有效的常量，请将它们声明为受保护或公共，并将它们放在层次结构的顶级类中。这样，子类可以访问这些常量值（如果其他类通过公共访问它们，则常量不仅对特定类有效……这意味着使用该常量的外部类可能与包含常量的类）
*   如果您有一个定义了行为的接口，但返回的值或参数值应该是特定的，那么在该接口上定义常量以便其他实现者可以访问它们是完全可以接受的。然而，避免仅仅为了保存常量而创建一个接口：它可能变得和仅仅为了保存常量而创建一个类一样糟糕。

* * *

## 回答 #3

> 赞同：120
> 
> 时间：2008-09-15T19:58:22.223

仅使用接口来保存常量是一种**不好的做法（Josh Bloch 将其命名为***常量接口模式*）。以下是乔希的建议：

> 如果常量与现有的类或接口紧密相关，则应将它们添加到类或接口中。例如，所有装箱的数值基元类（如 Integer 和 Double）都导出 MIN_VALUE 和 MAX_VALUE 常量。如果最好将常量视为枚举类型的成员，则应使用**枚举** 类型导出它们。否则，您应该使用不可实例化的实用程序类导出常量。

例子：

```
// Constant utility class
package com.effectivejava.science;
public class PhysicalConstants {
    private PhysicalConstants() { }  // Prevents instantiation

    public static final double AVOGADROS_NUMBER   = 6.02214199e23;
    public static final double BOLTZMANN_CONSTANT = 1.3806503e-23;
    public static final double ELECTRON_MASS      = 9.10938188e-31;
} 
```

关于命名约定：

> 按照惯例，此类字段的名称由大写字母组成，单词之间用下划线分隔。这些字段包含原始值或对不可变对象的引用至关重要。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2008-09-15T20:00:12.267

在 Effective Java（第 2 版）中，建议您使用枚举而不是静态整数作为常量。

这里有一篇关于 Java 枚举的好文章：http: [//java.sun.com/j2se/1.5.0/docs/guide/language/enums.html](http://java.sun.com/j2se/1.5.0/docs/guide/language/enums.html)

请注意，在那篇文章的末尾提出的问题是：

> 那么什么时候应该使用枚举呢？

答案是：

> 任何时候你需要一组固定的常数

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2008-09-15T19:45:33.800

只是避免使用接口：

```
public interface MyConstants {
    String CONSTANT_ONE = "foo";
}

public class NeddsConstant implements MyConstants {

} 
```

这很诱人，但违反了封装并模糊了类定义的区别。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2012-01-10T19:47:29.160

我使用以下方法：

```
public final class Constants {
  public final class File {
    public static final int MIN_ROWS = 1;
    public static final int MAX_ROWS = 1000;

    private File() {}
  }

  public final class DB {
    public static final String name = "oups";

    public final class Connection {
      public static final String URL = "jdbc:tra-ta-ta";
      public static final String USER = "testUser";
      public static final String PASSWORD = "testPassword";

      private Connection() {}
    }

    private DB() {}
  }

  private Constants() {}
} 
```

比，例如，我`Constants.DB.Connection.URL`用来保持不变。对我来说，它看起来更“面向对象”。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2008-09-16T03:36:05.180

在单独的类中创建静态最终常量可能会给您带来麻烦。Java 编译器实际上会对此进行优化，并将常量的实际值放入引用它的任何类中。

如果您稍后更改“常量”类并且不对引用该类的其他类进行硬重新编译，那么您最终会使用新旧值的组合。

与其将这些视为常量，不如将它们视为配置参数并创建一个类来管理它们。让这些值不是最终的，甚至考虑使用 getter。将来，当您确定其中一些参数实际上应该由用户或管理员配置时，它会更容易做到。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2008-09-15T20:26:15.183

您可能犯的第一个错误是创建一个全局可访问的类，该类使用通用名称调用，例如常量。这只是被垃圾堆满了，你失去了弄清楚系统的哪个部分使用这些常量的能力。

相反，常量应该进入“拥有”它们的类。你有一个叫做 TIMEOUT 的常量吗？它可能应该进入您的 Communications() 或 Connection() 类。MAX_BAD_LOGINS_PER_HOUR？进入用户（）。等等等等。

另一个可能的用途是 Java .properties 文件，当“常量”可以在运行时定义，但用户不容易更改时。您可以将它们打包到您的 .jar 中，并使用 Class resourceLoader 引用它们。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-15T19:44:16.487

这是正确的方法。

通常常量*不会*保存在单独的“常量”类中，因为它们是不可发现的。如果常量与当前类相关，将它们保留在那里有助于下一个开发人员。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-15T19:50:34.690

枚举呢？

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-09-15T20:00:43.543

我同意使用界面不是要走的路。[避免这种模式甚至在 Bloch 的Effective Java](http://java.sun.com/docs/books/effective/)中有自己的项目（#18）。

Bloch 反对常量接口模式的一个论点是常量的使用是一个实现细节，但是实现一个接口来使用它们会在导出的 API 中公开该实现细节。

`public|private static final TYPE NAME = VALUE;`模式是声明常量的好方法。就个人而言，我认为最好避免创建一个单独的类来容纳所有常量，但除了个人喜好和风格之外，我从未见过不这样做的理由。

如果您的常量可以很好地建模为枚举，请考虑1.5 或更高版本中可用的[枚举结构。](http://java.sun.com/j2se/1.5.0/docs/guide/language/enums.html)

如果您使用的是 1.5 之前的版本，您仍然可以通过使用普通的 Java 类来实现类型安全的枚举。（有关更多信息，请参阅[此站点](http://www.javapractices.com/topic/TopicAction.do?Id=1#Legacy)）。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2008-09-16T01:30:29.540

我更喜欢使用 getter 而不是常量。那些 getter 可能会返回常量值，例如`public int getMaxConnections() {return 10;}`，但任何需要常量的东西都将通过 getter。

一个好处是，如果你的程序超出了常量——你发现它需要是可配置的——你可以改变 getter 如何返回常量。

另一个好处是，为了修改常量，您不必重新编译使用它的所有内容。当您引用静态最终字段时，该常量的值将编译为引用它的任何字节码。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2011-06-26T21:16:48.933

根据上面的评论，我认为这是一种将老式全局常量类（具有公共静态最终变量）更改为类似枚举的等价物的好方法，如下所示：

```
public class Constants {

    private Constants() {
        throw new AssertionError();
    }

    public interface ConstantType {}

    public enum StringConstant implements ConstantType {
        DB_HOST("localhost");
        // other String constants come here

        private String value;
        private StringConstant(String value) {
            this.value = value;
        }
        public String value() {
            return value;
        }
    }

    public enum IntConstant implements ConstantType {
        DB_PORT(3128), 
        MAX_PAGE_SIZE(100);
        // other int constants come here

        private int value;
        private IntConstant(int value) {
            this.value = value;
        }
        public int value() {
            return value;
        }
    }

    public enum SimpleConstant implements ConstantType {
        STATE_INIT,
        STATE_START,
        STATE_END;
    }

} 
```

那么我可以推荐他们喜欢：

```
Constants.StringConstant.DB_HOST 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-15T23:58:26.797

一个好的面向对象设计不应该需要很多公开可用的常量。大多数常量应该封装在需要它们完成工作的类中。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-01-07T20:24:48.977

有一定的意见可以回答这个问题。首先，Java 中的常量通常被声明为 public、static 和 final。以下是原因：

```
public, so that they are accessible from everywhere
static, so that they can be accessed without any instance. Since they are constants it
  makes little sense to duplicate them for every object.
final, since they should not be allowed to change 
```

我永远不会仅仅因为通常期望实现接口而将接口用于 CONSTANTS 访问器/对象。这看起来是不是很有趣：

```
String myConstant = IMyInterface.CONSTANTX; 
```

相反，我会在一些不同的方式之间进行选择，基于一些小的权衡，所以这取决于你需要什么：

```
1\.  Use a regular enum with a default/private constructor. Most people would define 
     constants this way, IMHO.
  - drawback: cannot effectively Javadoc each constant member
  - advantage: var members are implicitly public, static, and final
  - advantage: type-safe
  - provides "a limited constructor" in a special way that only takes args which match
     predefined 'public static final' keys, thus limiting what you can pass to the
     constructor

2\.  Use a altered enum WITHOUT a constructor, having all variables defined with 
     prefixed 'public static final' .
  - looks funny just having a floating semi-colon in the code
  - advantage: you can JavaDoc each variable with an explanation
  - drawback: you still have to put explicit 'public static final' before each variable
  - drawback: not type-safe
  - no 'limited constructor'

3\.  Use a Class with a private constructor:
  - advantage: you can JavaDoc each variable with an explanation
  - drawback: you have to put explicit 'public static final' before each variable
  - you have the option of having a constructor to create an instance
     of the class if you want to provide additional functions related
     to your constants 
     (or just keep the constructor private)
  - drawback: not type-safe

4\. Using interface:
  - advantage: you can JavaDoc each variable with an explanation
  - advantage: var members are implicitly 'public static final'
  - you are able to define default interface methods if you want to provide additional
     functions related to your constants (only if you implement the interface)
  - drawback: not type-safe 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-06-09T08:18:31.663

> 在 Java 中实现常量的最佳方法是什么？

**我们应该真正避免的一种方法**：使用接口来定义常量。

专门创建一个接口来声明常量确实是最糟糕的事情：它违背了设计接口的原因：定义方法契约。

即使已经存在满足特定需求的接口，在其中声明常量也没有任何意义，因为常量不应成为 API 和提供给客户端类的合同的一部分。

* * *

**为简化起见，我们大致有 4 种有效方法**。

带`static final String/Integer`字段：

*   1）使用一个在内部但不仅仅是声明常量的类。
*   1 个变体）创建一个专用于仅声明常量的类。

与`Java 5 enum`：

*   2）在相关目的类（如嵌套类）中声明枚举。
*   2 变体）将枚举创建为独立类（在其自己的类文件中定义）。

* * *

**TLDR：哪个是最好的方法，在哪里定位常量？**

**在大多数情况下，枚举方式可能比`static final String/Integer`方式**更好，我个人认为`static final String/Integer`只有当我们有充分的理由不使用枚举时才应该使用这种方式。
关于我们应该在哪里声明常量值，我们**的想法是搜索是否存在一个现有的类，该类具有与常量值的特定且强大的功能内聚。如果我们找到这样一个类，我们应该将它用作常量持有者**。否则，该常量不应与任何特定类相关联。

* * *

**`static final String`/`static final Integer`对`enum`**

枚举的使用确实是一种强烈考虑的方式。枚举比常量字段
有很大的优势。 他们设置了更强的编译约束。如果定义一个以枚举为参数的方法，则只能传递枚举类中定义的枚举值（或 null）。 使用 String 和 Integer，您可以将它们替换为兼容类型的任何值，并且即使该值不是/字段中定义的常量，编译也会很好。`String``Integer`

`static final String``static final Integer`

例如，在一个类中定义为`static final String`fields 的以下两个常量：

```
public class MyClass{

   public static final String ONE_CONSTANT = "value";
   public static final String ANOTHER_CONSTANT = "other value";
   . . .
} 
```

这是一个期望将这些常量之一作为参数的方法：

```
public void process(String constantExpected){
    ...    
} 
```

您可以通过这种方式调用它：

```
process(MyClass.ONE_CONSTANT); 
```

或者

```
process(MyClass.ANOTHER_CONSTANT); 
```

但是没有编译约束阻止您以这种方式调用它：

```
process("a not defined constant value"); 
```

只有在运行时并且仅当您一次检查传输的值时才会出现错误。

使用枚举，不需要检查，因为客户端只能在枚举参数中传递枚举值。

例如，这里在枚举类中定义了两个值（开箱即用的常量）：

```
public enum MyEnum {

    ONE_CONSTANT("value"), ANOTHER_CONSTANT(" another value");

    private String value;

    MyEnum(String value) {
       this.value = value;
    }
         ...
} 
```

这是一个期望将这些枚举值之一作为参数的方法：

```
public void process(MyEnum myEnum){
    ...    
} 
```

您可以通过这种方式调用它：

```
process(MyEnum.ONE_CONSTANT); 
```

或者

```
process(MyEnum.ANOTHER_CONSTANT); 
```

但是编译永远不会允许您以这种方式调用它：

```
process("a not defined constant value"); 
```

* * *

**我们应该在哪里声明常量？**

如果您的应用程序包含一个现有类，该类与常量值具有特定且强大的功能内聚，则 1) 和 2) 看起来更直观。
一般来说，如果在操作它们的主类中声明了这些常量，或者有一个很自然的名字可以猜测我们会在里面找到它，那么它会简化常量的使用。

例如，在 JDK 库中，指数和 pi 常量值在一个不仅声明常量声明 ( `java.lang.Math`) 的类中声明。

```
 public final class Math {
          ...
       public static final double E = 2.7182818284590452354;
       public static final double PI = 3.14159265358979323846;
         ...
   } 
```

使用数学函数的客户通常依赖于`Math`类。因此，他们可以很容易地找到常量，并且还可以以非常自然的方式记住在哪里定义`E`和定义。`PI`

如果您的应用程序不包含与常量值具有非常具体和强大功能内聚的现有类，则 1 变体）和 2 变体）方式显得更直观。
通常，如果在一个操纵它们的类中声明这些常量，而我们还有 3 或 4 个其他类来操纵它们，并且这些类中没有一个似乎比其他类更自然主机常量值。
在这里，定义一个只保存常量值的自定义类是有意义的。
例如，在 JDK 库中，`java.util.concurrent.TimeUnit`枚举没有在特定类中声明，因为实际上并没有一个而且只有一个 JDK 特定类看起来最直观地保存它：

```
public enum TimeUnit {
    NANOSECONDS {
      .....
    },
    MICROSECONDS {
      .....
    },
    MILLISECONDS {
      .....
    },
    SECONDS {
      .....
    },
      .....
} 
```

许多在`java.util.concurrent`使用它们时声明的类 : `BlockingQueue`, `ArrayBlockingQueue<E>`, `CompletableFuture`, `ExecutorService`, ... 实际上没有一个类似乎更适合保存枚举。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-15T21:17:31.130

可以通过在类中创建不可变属性（即带有`final`修饰符的成员变量）来声明任何类型的常量。通常还提供`static`and 修饰符。`public`

```
public class OfficePrinter {
    public static final String STATE = "Ready";  
} 
```

在许多应用中，常量的值表示从 n 元组（例如*enumeration*）中进行的选择。在我们的示例中，我们可以选择定义一个 Enumerated Type 来限制可能的分配值（即改进*的类型安全*）：

```
public class OfficePrinter {
    public enum PrinterState { Ready, PCLoadLetter, OutOfToner, Offline };
    public static final PrinterState STATE = PrinterState.Ready;
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-15T22:17:12.950

一个单一的、通用的常量类是个坏主意。常量应该与它们在逻辑上最相关的类组合在一起。

我建议您使用方法，而不是使用任何类型的变量（尤其是枚举）。创建一个与变量同名的方法，并让它返回您分配给变量的值。现在删除该变量并将所有对它的引用替换为对您刚刚创建的方法的调用。如果你觉得这个常量足够通用以至于你不应该仅仅为了使用它而创建一个类的实例，那么让这个常量方法成为一个类方法。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-16T01:33:07.753

FWIW，以秒为单位的超时值可能应该是配置设置（从属性文件中读取或像在 Spring 中一样通过注入），而不是常量。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-12-09T21:11:54.430

有什么不同

1.

```
public interface MyGlobalConstants {
    public static final int TIMEOUT_IN_SECS = 25;
} 
```

2.

```
public class MyGlobalConstants {
    private MyGlobalConstants () {} // Prevents instantiation
    public static final int TIMEOUT_IN_SECS = 25;
} 
```

并 `MyGlobalConstants.TIMEOUT_IN_SECS`在我们需要这个常量的地方使用。我认为两者都是一样的。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-15T19:41:23.963

我不会将类称为与常量相同的类（除了大小写）......我至少会拥有一类“设置”、“值”或“常量”，所有常量都将在其中存在。如果我有大量它们，我会将它们分组到逻辑常量类（UserSettings、AppSettings 等）中

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-15T19:45:34.407

更进一步，您可以将全局使用的常量放在接口中，以便它们可以在系统范围内使用。例如

```
public interface MyGlobalConstants {
    public static final int TIMEOUT_IN_SECS = 25;
} 
```

但不要实施它。只需通过完全限定的类名在代码中直接引用它们。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-15T20:45:52.593

对于常量，枚举是一个更好的选择恕我直言。这是一个例子

公共类 myClass {

```
public enum myEnum {
    Option1("String1", 2), 
    Option2("String2", 2) 
    ;
    String str;
            int i;

            myEnum(String str1, int i1) { this.str = str1 ; this.i1 = i }

} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-15T21:44:56.913

我这样做的一种方法是使用常量值创建一个“全局”类，并在需要访问常量的类中进行静态导入。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2012-08-31T01:49:03.907

`static final`是我的偏好，我只会`enum`在项目确实是可枚举的情况下使用。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-05-15T12:45:24.017

我`static final`用来声明常量并使用 ALL_CAPS 命名符号。我见过很多现实生活中的实例，其中所有常量都聚集在一个接口中。一些帖子正确地称这是一种不好的做法，主要是因为这不是接口的用途。接口应该强制执行契约，而不应该是放置不相关常量的地方。如果常量语义不属于特定类，则将其放在无法实例化的类中（通过私有构造函数）也可以（埃斯）。我总是在与其最相关的类中放置一个常量，因为这很有意义并且易于维护。

枚举是表示一系列值的好选择，但如果您要存储独立的常量并强调绝对值（例如 TIMEOUT = 100 ms），您可以采用这种`static final`方法。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-07-28T14:40:19.247

我同意大多数人的说法，在处理常量集合时最好使用枚举。但是，如果您在 Android 中编程，则有一个更好的解决方案：[IntDef Annotation](https://developer.android.com/reference/android/support/annotation/IntDef.html)。

```
@Retention(SOURCE)
@IntDef({NAVIGATION_MODE_STANDARD, NAVIGATION_MODE_LIST,NAVIGATION_MODE_TABS})
public @interface NavigationMode {}
public static final int NAVIGATION_MODE_STANDARD = 0;
public static final int NAVIGATION_MODE_LIST = 1;
public static final int NAVIGATION_MODE_TABS = 2;
...
public abstract void setNavigationMode(@NavigationMode int mode);
@NavigationMode
public abstract int getNavigationMode(); 
```

IntDef 注释以一种简单的方式优于枚举，它占用的空间显着减少，因为它只是一个编译时标记。它不是一个类，也没有自动字符串转换属性。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-01-10T11:41:53.957

在不了解基本零基础原教旨主义的情况下引用约书亚·布洛赫的话是一个**坏习惯，也是非常令人讨厌的做法。**

我没有读过任何东西 Joshua Bloch，所以要么

*   他是个糟糕的程序员
*   或者到目前为止，我发现引用他的人（我认为约书亚是一个男孩的名字）只是将他的材料用作宗教脚本来证明他们的软件宗教放纵是正当的。

就像在圣经原教旨主义中一样，所有的圣经律法都可以概括为

*   全心全意地爱基本身份
*   爱你的邻居如同爱自己

类似地，软件工程原教旨主义可以总结为

*   用你所有的编程能力和头脑专注于零基础
*   并像为自己一样致力于卓越的程序员伙伴。

此外，在圣经原教旨主义圈子中，得出了一个强有力且合理的推论

*   先爱自己。因为如果你不太爱自己，那么“爱邻如己”的概念就没有多大分量，因为“你有多爱自己”是你爱他人的基准线。

同样，如果您不尊重自己作为程序员的身份，并且只是接受一些编程大师的声明和预言而不质疑基本原理，那么您对 ​​Joshua Bloch（等）的引用和依赖是毫无意义的。因此，您实际上不会尊重您的程序员同事。

软件编程的基本规律

*   懒惰是优秀程序员的美德
*   你要让你的编程生活尽可能简单、懒惰并尽可能有效
*   你要让你的编程的后果和内脏变得简单、懒惰，因此对与你一起工作并收集你的编程内脏的邻居程序员尽可能有效。

### 接口模式常量是一个坏习惯？？？

这条宗教法令属于什么基本有效和负责任的编程法则？

只需阅读关于接口模式常量的维基百科文章（[https://en.wikipedia.org/wiki/Constant_interface](https://en.wikipedia.org/wiki/Constant_interface)），以及它针对接口模式常量声明的愚蠢借口。

*   Whatif - 没有 IDE？作为软件程序员，谁不会使用 IDE？我们大多数人都是程序员，他们不希望通过避免使用 IDE 来证明自己有男子气概的求生主义。

    *   另外 - 等待微功能编程的第二个支持者作为不需要 IDE 的手段。等你读完我对数据模型规范化的解释。
*   使用当前范围内未使用的变量污染命名空间？可能是这种观点的支持者

    *   不知道也不需要数据模型规范化
*   使用接口强制常量是对接口的滥用。这样的支持者有一个坏习惯

    *   没有看到“常量”必须被视为合同。接口用于强制或预测合同的合规性。
*   将来将接口转换为已实现的类是很困难的，如果不是不可能的话。哈……嗯……？？？

    *   你为什么要从事这样的编程模式作为你的持续生计？IOW，为什么要养成这种矛盾和不良的编程习惯？

无论借口是什么，当涉及从根本上有效的软件工程来取消合法性或通常不鼓励使用接口常量时，都没有任何有效的借口。

制定美国宪法的开国元勋的初衷和精神状态是什么并不重要。我们可以辩论开国元勋的初衷，但我只关心美国宪法的书面声明。每个美国公民都有责任利用美国宪法的书面文学原教旨主义，而不是不成文的建国意图。

同样，我不在乎 Java 平台和编程语言的创始人对接口的“原始”意图是什么。我关心的是 Java 规范提供的有效特性，我打算充分利用这些特性来帮助我实现负责任的软件编程的基本法则。我不在乎我是否被认为“违反了接口的意图”。我不在乎 Gosling 或 Bloch 对“使用 Java 的正确方法”说了什么，除非他们说的不违反我对有效实现基本原理的需要。

### 基础是数据模型规范化

您的数据模型如何托管或传输并不重要。如果您不了解数据模型规范化的需求和过程，无论您使用接口还是枚举或其他任何东西，关系或非 SQL。

我们必须首先定义和规范化一组流程的数据模型。当我们拥有一个连贯的数据模型时，只有这样我们才能使用其组件的流程来定义功能行为和流程块应用程序的领域或领域。只有这样我们才能定义每个功能流程的API。

即使是 EF Codd 提出的数据规范化方面现在也面临着严峻的挑战和严峻的挑战。例如，他关于 1NF 的陈述被批评为模棱两可、错位和过度简化，他的其他陈述也是如此，特别是在现代数据服务、回购技术和传输的出现方面。IMO，应该完全抛弃 EF Codd 语句，并设计一组新的数学上更合理的语句。

EF Codd 的一个明显缺陷及其与有效人类理解不一致的原因是他相信人类可感知的多维、可变维数据可以通过一组零碎的二维映射有效地感知。

### 数据规范化的基础

EF Codd 未能表达的内容。

在每个连贯的数据模型中，这些都是要实现的数据模型连贯性的顺序分级顺序。

1.  数据实例的统一性和身份。
    *   设计每个数据组件的粒度，使其粒度处于可以唯一标识和检索组件的每个实例的级别。
    *   没有实例别名。即，不存在使标识产生多个组件实例的方法。
2.  没有实例串扰。不存在使用组件的一个或多个其他实例来帮助识别组件实例的必要性。
3.  数据组件/维度的统一性和同一性。
    *   存在组件去锯齿。必须存在一个定义，从而可以唯一地标识组件/维度。这是组件的主要定义；
    *   其中主要定义不会导致暴露不属于预期组件的子维度或成员组件；
4.  独特的组件去锯齿方法。一个组件必须存在一个，并且只有一个，这样的组件去锯齿定义。
5.  存在一个，并且只有一个定义接口或契约来标识组件的层次关系中的父组件。
6.  没有组件串扰。没有必要使用另一个组件的成员来对组件的最终识别做出贡献。
    *   在这样的父子关系中，父子的标识定义不能依赖于子组件的部分成员组件。父母身份的成员组成部分必须是完整的孩子身份，而不诉诸于引用孩子的任何或所有孩子。
7.  抢占数据模型的双模式或多模式外观。
    *   当一个组件存在两个候选定义时，这是一个明显的迹象，表明存在两个不同的数据模型混合为一个。这意味着在数据模型级别或字段级别存在不连贯性。
    *   一个应用领域必须一致地使用一个且只有一个数据模型。
8.  检测和识别组件突变。除非您已经对大量数据进行了统计成分分析，否则您可能看不到或认为需要处理成分突变。
    *   数据模型的某些组件可能会周期性地或逐渐地发生变异。
    *   该模式可以是成员旋转或换位旋转。
    *   成员轮换突变可能是组件之间子组件的不同交换。或者必须定义全新的组件。
    *   换位突变将表现为维度成员突变为属性，反之亦然。
    *   每个突变周期都必须被识别为不同的数据模式。
9.  版本化每个突变。这样您就可以在可能需要处理数据模型的 8 年前突变时提取数据模型的先前版本。

在服务间组件应用程序的领域或网格中，必须有一个且只有一个连贯的数据模型，或者存在一种数据模型/版本标识自身的方法。

### 我们还在问是否可以使用接口常量吗？真的吗 ？

存在比这个平凡问题更重要的数据规范化问题。如果您不解决这些问题，那么您认为接口常量引起的混乱相对来说没什么。齐尔奇。

从数据模型规范化中，您可以将组件确定为变量、属性、合同接口常量。

然后你确定哪些进入值注入、属性配置占位、接口、最终字符串等。

如果你不得不以需要找到一个更容易控制接口常量的组件为借口，这意味着你养成了不练习数据模型规范化的坏习惯。

也许您希望将数据模型编译成 vcs 版本。您可以提取数据模型的明显可识别版本。

接口中定义的值完全保证是不可变的。并且可以分享。当您只需要一组常量时，为什么要将一组最终字符串从另一个类加载到您的类中？

那么为什么不发布数据模型合约呢？我的意思是，如果你能连贯地管理和规范它，为什么不呢？...

```
public interface CustomerService {
  public interface Label{
    char AssignmentCharacter = ':';
    public interface Address{
      String Street = "Street";
      String Unit= "Unit/Suite";
      String Municipal = "City";
      String County = "County";
      String Provincial = "State";
      String PostalCode = "Zip"
    }

    public interface Person {
      public interface NameParts{
        String Given = "First/Given name"
        String Auxiliary = "Middle initial"
        String Family = "Last name"
      }
    }
  }
} 
```

现在我可以通过以下方式引用我的应用程序的合同标签

```
CustomerService.Label.Address.Street
CustomerService.Label.Person.NameParts.Family 
```

这混淆了jar文件的内容？作为一名 Java 程序员，我并不关心 jar 的结构。

这给 osgi 驱动的运行时交换带来了复杂性？Osgi 是一种非常有效的手段，可以让程序员继续他们的坏习惯。有比 osgi 更好的选择。

或者为什么不这样做？私有常量不会泄漏到已发布的合约中。所有私有常量都应该分组到一个名为“Constants”的私有接口中，因为我不想搜索常量，也懒得重复输入“private final String”。

```
public class PurchaseRequest {
  private interface Constants{
    String INTERESTINGName = "Interesting Name";
    String OFFICIALLanguage = "Official Language"
    int MAXNames = 9;
  }
} 
```

甚至可能是这样：

```
public interface PurchaseOrderConstants {
  public interface Properties{
    default String InterestingName(){
       return something();
    }
    String OFFICIALLanguage = "Official Language"
    int MAXNames = 9;
  }
} 
```

接口常量唯一值得考虑的问题是接口何时实现。

这不就是接口的“初衷”吗？就像我会关心开国元勋制定美国宪法的“初衷”，而不是最高法院将如何解释美国宪法的书面文字？？？

毕竟，我生活在自由、狂野和勇敢者的家园。勇敢、自由、狂野——使用界面。如果我的同事拒绝使用高效和懒惰的编程方式，我是否有义务降低我的编程效率以与他们保持一致？也许我应该，但这不是一个理想的情况。

# linq - .NET 3.5 Linq 数据源和连接

> ID：66094
> 
> 赞同：3
> 
> 时间：2008-09-15T19:41:18.053
> 
> 标签：linq, linq-to-sql, .net-3.5, dynamic-data

一直在试用 .NET 3.5 附带的新动态数据站点创建工具。该工具使用 LINQ 数据源从数据库中获取数据，并使用 .dmbl 上下文文件作为参考。我对自定义数据网格很感兴趣，但我需要显示来自多个表的数据。有谁知道如何使用 LINQ 数据源对象来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T19:56:43.477

*（编辑误解了这个问题，修改了我对以下内容的回答）*

您的 LinqDataSource 可以指向一个视图，这使您可以克服无法在实际元素中表达 Join 的问题。从[“如何：创建映射到表和视图的 LINQ to SQL 类（O/R 设计器）”](http://msdn.microsoft.com/en-us/library/bb384396.aspx)：

> O/R Designer 是一个简单的对象关系映射器，因为它仅支持 1:1 映射关系。也就是说，一个实体类与数据库表或视图只能有1:1的映射关系。不支持复杂的映射，例如将一个实体类映射到多个表。但是，您可以将实体类映射到连接多个相关表的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T14:58:15.610

如果表通过外键连接，您可以轻松引用这两个表，因为它们将由 linq 自动连接（如果您查看 dbml 并且有一个连接表的箭头，您可以轻松看到） - 如果没有，请查看是否你可以加一个。

为此，您可以使用以下内容：

```
<%# Bind("unit1.unit_name") %> 
```

在表中，'unit' 有一个引用另一个表的外键，你拉取了 'unit_name' 的'unit'属性

我希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T19:44:03.863

您不能在一个数据网格上放置多个对象/数据源。您将必须构建一个组合了部件实体的公开属性的概念对象。尝试使用 DB -> L2S 实体 -> ConceptObject。如果 DB 模型与 ConceptObject 字段匹配，您一定非常做作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T11:51:27.660

当您想要执行更复杂的 Linq 并将您的 Grid 绑定到 ObjectDataSource 时，您最好使用 ObjectDataSource。但是，您确实需要注意可能会给您带来麻烦的匿名类型，但任何事情都是可能的......

# java - 为什么 Tomcat 5.5（带有 Java 1.4，在 32 位 Windows XP 上运行）突然挂起？

> ID：66104
> 
> 赞同：0
> 
> 时间：2008-09-15T19:42:36.457
> 
> 标签：java, windows, tomcat

我已经用 Java 1.4 运行 Tomcat 5.5 有一段时间了，现在有一个巨大的 web 应用程序。大多数情况下它运行良好，但有时它会挂起，不会产生异常，除了重新启动 Tomcat 之外，没有明显的方法让它再次运行。tomcat 实例允许在堆上使用千兆字节的内存，但很少超过 300 MB。有没有其他人遇到过这个问题，是否有解决方案？

澄清一下：我通过任务管理器和 Eclipse 确定了它使用了多少内存（我也尝试在 Eclipse 之外运行它，但最终会遇到同样的问题，尽管它需要更长的时间）。在 Eclipse 中，我查看了通过它的小（可选）内存窗格分配的内存以及通过任务管理器分配给 javaw.exe 的数量。我用的是sysdeo？用于 Eclipse 的 tomcat 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T19:47:31.830

对于任何 jvm 进程，强制执行线程转储。在 Windows 中，我相信这可以在控制台窗口中使用 CTRL-BREAK 来完成。

在 *nix 中，它几乎总是“kill -3 jvm-pid”。

这可能会显示您是否有线程在数据库连接池/线程池等上等待。

要检查的另一件事是您当前与 JVM 有多少连接 - 使用 NETSTAT 或 SysInternals 实用程序，例如 tcpconn/tcpview (google it)。

此外，尝试使用 verbose:gc JVM 标志运行。对于 Sun 的 JVM，像“java -verbose:gc”一样运行。这将显示您的垃圾收集。如果它收集了很多（特别是 FULL COLLECTIONS），那么您可能有内存泄漏。完整的集合是昂贵的，尤其是在这样的大堆上。

您如何确定仅使用了 300mb？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T19:47:02.390

听起来你正在陷入僵局。

如果您可以在开发环境中重现它，那么在它发生后尝试附加调试器。看看你的线程，看看你是否有任何死锁。

正如 Dustin 指出的那样，如果您无法附加调试器，您应该能够生成线程转储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T19:47:53.387

尝试增加 Tomcat 应用程序服务器的日志记录敏感度。 [http://tomcat.apache.org/tomcat-5.5-doc/logging.html](http://tomcat.apache.org/tomcat-5.5-doc/logging.html)

您可以在几天内提高大多数人对 FINEST 或 ALL 的敏感度，看看这是否有助于您捕捉到任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T19:55:13.760

我同意创建多个线程转储并通过以下方式查看它们：[Thread Dump Analyzer](http://today.java.net/pub/n/TDA1.1)

# c - 如何识别C中整数输入的特定数字？

> ID：66107
> 
> 赞同：0
> 
> 时间：2008-09-15T19:42:59.390
> 
> 标签：c, string, function

我需要获取包含数字 1 的位数。我知道在 java 中我可以将输入作为 a`String`并使用`charAt`，但我知道 C 中没有隐式 String 函数。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-15T19:44:15.860

除法和模数是你的朋友。

```
#include "stdio.h"

int main(){
    int digits[] = {0,0,0,0,0,0,0,0,0,0};
    int i = 11031;

    while(i > 0){
        digits[i % 10]++;
        i = i / 10;
    }

    printf("There are %d ones.\n", digits[1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T19:45:23.113

家庭作业？

您可以`char*`使用该`fread()`函数将其读入 a ，然后将读取的字节数存储在单独的变量中。然后使用`for`循环遍历缓冲区并计算每个字节的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T19:46:22.347

如果你只有这个号码，那么你可以这样做：

```
 int val; //Input
 ...
 int ones = 0;
 while(val != 0) {
   ones += ((val % 10) == 1) ? 1 : 0;
   val /= 10;
 } 
```

如果你有一个字符串 (char*)，你会做这样的事情：

```
while(*str != '\0') {
  if(*str++ == '1') {
    ones++;
  }
} 
```

还值得注意的是，c 确实有一个 charAt 函数，在某种程度上：

```
"java".charAt(i) == "c the language"[i]; 
```

通过对char*进行索引，可以得到你想要的值，但是需要小心，因为没有indexOutOfBounds异常。如果你越过字符串的末尾，程序就会崩溃，或者更糟的是它可能会继续运行，但内部状态会混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T19:47:39.440

尝试类似...

```
int digit = 0;
int value = 11031;

while(value > 0)
{
    digit = value % 10;
    /* Do something with digit... */
    value = value / 10;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T05:59:44.227

我认为这是一个基本的理解问题，每个人都不可避免地会从一种语言切换到另一种语言。

当您开始熟悉 java 时，了解 string 在 C 中如何工作的一个很好的参考是查看 string.h 的工作原理。在 java 中，字符串是一个内置的对象，而 C 中的字符串只是整数数组。

那里有很多教程，在我年初开始时帮助我的是[http://www.physics.drexel.edu/students/courses/Comp_Phys/General/C_basics/](http://www.physics.drexel.edu/students/courses/Comp_Phys/General/C_basics/)查看字符串部分。

有时提出问题比连续数小时翻阅教科书更快地加快学习速度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T21:44:44.980

对于那些将这个问题称为作业问题的人：我不得不说，你们中的大多数人都提供了作业答案。

您不使用除法/模数来获取生产代码中的数字，首先是因为它不是最理想的（您的 CPU 是为二进制算术而不是十进制设计的），其次是因为它不直观。即使它最初不是字符串，最好将其转换为一个然后计算字符数（std::count 是 C++ 中的方式）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T21:30:31.410

这会做到的。:-)

```
int count_digits(int n, int d) {
  int count = 0;
  while(n*10/=10) if (n%10==d) count++
  return count;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T19:46:27.807

类似于以下内容：

```
int val=11031;
int count=0;
int i=0;
char buf[100];
sprint(buf, "%d", val);
for(i=0; (i < sizeof(buf)) && (buf[i]); i++) {
  if(buf[i] == '1')
    count++;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T19:47:55.290

```
int count_digit(int nr, int digit) {
    int count=0;
    while(nr>0) {
      if(nr%10==digit)
        count++;
      nr=nr/10;
    }
    return count;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T19:50:44.050

这对我来说听起来像是一个家庭作业问题。哦，好吧，这是你的生活。

您未能指定包含“输入整数”的变量的类型。如果输入整数是整数类型（例如“int”），请尝试以下操作：

```
int countOnes(int input)
{
    int result = 0;
    while(input) {
        result += ((input%10)==1);
        result /= 10;
    }
    return result;
} 
```

如果“输入整数”在字符串中，试试这个：

```
int countOnes(char *input)
{
    int result = 0;
    while(input && *input) {
        result += (*input++ == '1');
    }
    return result;
} 
```

希望这可以帮助。下一次，做你自己的功课。离开我的草坪！孩子们，这些天，...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T19:53:19.943

```
int countDigit(int Number, int Digit)
{
   int counter = 0;

   do
   {
      if( (Number%10) == Digit)
      {
         counter++;
      }
   }while(Digit>0)

   return counter;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T20:00:54.840

类似这样的东西：

```
#include <stdio.h>

main() {
        char buf[100];
        char *p = buf;
        int n = 0;
        scanf("%s", buf);
        while (*p) {
                if (*p == '1') {
                        n++;
                }
                p++;
        }
        printf ("'%s' contains %i ones\n", buf, n);
} 
```

# x11 - XWindow 忽略在同一秒内发送的多个 ClentMessage

> ID：66111
> 
> 赞同：0
> 
> 时间：2008-09-15T19:43:07.173
> 
> 标签：x11

在为我们的旧版 XWindows 应用程序进行开发时，我遇到了一个有趣的问题。

由于无法解释的原因，我将 ClientMessage 从命令行实用程序发送到 GUI 应用程序。大多数消息最终具有相同的内容，因为消息的目的是触发一些侧管道上的同步通信过程. 我注意到有时我会发送两条消息，但只有一条被发送。我已经追踪到这两个消息具有相同的内容并且是在同一秒内发送的事实（IOW，发送时的日志时间戳是相同的数字）。一旦我在消息中添加了一些虚拟内容以使它们都不同，问题就消失了。

这发生在两个不同的 X 服务器上：vncserver 和 Exceed。我是否遇到了一些我不知道的 XWindows 功能 - 某种消息限制/压缩？有没有人遇到过这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-16T00:43:56.593

X 服务器不应该压缩我知道的客户端消息，但也许某些 X 工具包（Motif、Xaw 等）会压缩它们。这是我要寻找的第一件事——也许接收消息的 GUI 应用程序在应用程序代码看到它之前正在压缩工具包内的某个地方。

再说一次，vncserver 和超过可能比其他 X 服务器更关注远程使用，并且它们可能包含一些不明智的压缩黑客，可以想象。我已经阅读了很多 X 规范并编写了很多 X 代码，但从未听说过这种行为。

一个随机的不太可能的想法，请确保在命令行应用程序退出之前在其末尾有一个 XFlush() 或 XSync()，以确保在关闭之前将这些消息写入套接字。但我不知道如果这是问题，为什么消息内容会很重要。

# c# - ASP.NET - 常见问题

> ID：66117
> 
> 赞同：14
> 
> 时间：2008-09-15T19:43:55.720
> 
> 标签：c#, asp.net, vb.net

当我使用 ASP.NET 时，我发现总是会遇到一些意料之外的事情，这需要很长时间才能调试。我认为拥有这些综合列表对于那些“奇怪的错误”情况非常有用，并且可以扩展我们对平台中奇怪的知识。

所以：用你的“Gotcha”之一回答！

我将开始：在 ASP.NET (VB) 下，在 try/catch 块内执行 Response.Redirect 不会停止当前 Response 的执行，这会导致两个并发 Response 针对同一个 Session 执行。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-15T19:56:54.443

不要在页面初始化事件之后动态添加控件，因为它会破坏视图状态树。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-15T19:58:40.320

**Viewstate** ...如果您正在使用它...如果您不注意它，可能会失控。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-15T21:11:06.543

整个生命周期的东西。

并不是说我认为它有任何问题，只是你会惊讶于在理解它*之前*就开始从事大型 ASP.Net 项目的人数，而不是相反。因此，它成为一个陷阱。

请注意，我说的是*大型*项目：我认为与生命周期达成协议的最好方法是先自己处理一些较小的项目，如果你把它们搞砸也没关系。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-15T19:56:06.190

自定义控件的生命周期与同名的页面生命周期事件不完全匹配。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-07T16:40:51.427

Page_Load 在控制处理程序之前运行。因此，您不能在事件处理程序中进行更改，然后在页面加载中使用这些更改。当您在母版页中有控件（例如登录控件）时，这会成为一个问题。你可以通过重定向来解决这个问题，但这绝对是一个问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-15T20:05:44.220

必须跳过障碍才能将 .ClientID 属性转换为 javascript。

如果生命周期的渲染阶段创建了一个脚本，该脚本为每个服务器控件设置了一个与自动初始化为 clientID 值的控件同名的 var，那就太好了。或者也许有一些方法可以轻松触发此操作。

嗯...我敢打赌，我可以通过反射自己设置一个方法。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-07T16:27:11.280

我今天才知道这一点：与 GridViews 和 ListViews 一起使用的 Bind() 方法不存在。它实际上隐藏了一些反射器魔术，将其变成 Eval() 和某种变量赋值。

这样做的结果是这样的调用：

```
<%# FormatNameHelper(Bind("Name")) %> 
```

看起来完全有效的将失败。有关更多详细信息，请参阅[此博客文章](http://weblogs.asp.net/leftslipper/archive/2007/06/29/how-asp-net-databinding-deals-with-eval-and-bind-statements.aspx)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-15T19:58:30.180

如果您有重音字符，请不要使用记事本编辑您的 web.config，它会将其替换为编码错误的字符。不过看起来会一样。只是您的应用程序不会运行。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-01-27T12:09:47.957

调试是 ASP.Net 的一个非常酷的功能，但是一旦您更改 app_code 文件夹中的一些代码，就会触发重新构建应用程序，从而导致所有会话丢失。

这在调试网站时会变得非常烦人，但您可以使用“ **StateServer 模式**”轻松防止这种情况发生：它只是启动服务和更改 web.config 中的一行：请参阅 msdn：[http://msdn。 microsoft.com/en-us/library/ms178586.aspx](http://msdn.microsoft.com/en-us/library/ms178586.aspx)

1.  **InProc 模式**，它将会话状态存储在 Web 服务器的内存中。*这是默认设置*。
2.  **StateServer 模式**，它将会话状态存储在称为 ASP.NET 状态**服务**的单独进程中。这可确保在重新启动 Web 应用程序时**保留会话状态**，并使会话状态可用于 Web 场中的多个 Web 服务器。
3.  SQL服务器...
4.  风俗 ...
5.  离开！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-09-10T12:55:35.907

如果您在与 ASP.Net 应用程序相同的虚拟目录中运行 Classic ASP 应用程序，则应用程序的第一次命中必须在 ASP.Net 页面上。这将确保使用正确的上下文配置构建 AppPool。如果要命中的第一个页面是经典 ASP 页面，则结果可能因应用程序而异。一般来说，AppPool 被配置为使用最新的框架。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-11-30T16:48:29.380

制作类似中继器的控件，但不知道`INamingContainer`.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-02-24T20:54:43.567

*   您必须担心用户可能需要很长时间的应用程序的[会话超时。](http://justgeeks.blogspot.com/2008/07/aspnet-session-timeouts.html)

*   您还必须担心大型应用程序的[上传超时](http://aspnetresources.com/articles/dark_side_of_file_uploads)

*   验证者可能并不总是将您的页面滚动到数据输入错误的场景（因此用户可能永远看不到它，只会想知道为什么提交按钮不起作用）

*   如果用户输入了 HTML 符号，例如`<`, `>`（例如`P > 3.14`），或者无意中`<br>`在另一个页面上复制粘贴，[ASP.NET 将拒绝该页面](http://www.geekpedia.com/KB99_A-potentially-dangerous-Request.Form-value-was-detected-from-the-client.html)并显示错误。

*   `null.ToString()`产生一个很大的错误。仔细检查。

*   [跨多个应用程序共享会话池](http://www.dotnetmonster.com/Uwe/Forum.aspx/asp-net/11527/ASP-and-ASP-NET-session-pool)是一场等待发生的灾难

*   在具有不同环境的机器上移动应用程序是一种偏头痛，涉及到`web.config`许多潜在的谷歌时间

*   如果使用存储过程，ASP.NET 和 MySQL 容易出现缓存问题

*   AJAX 也会造成混乱：

    *   在某些情况下，客户端可以绕过页面验证（尤其是通过按 ENTER 而不是按提交按钮）。您可以通过调用来修复它`if(! Page.IsValid) { return ; }`
    *   ASP 按钮通常不能在 UpdatePanels 中正常工作
    *   UpdatePanel 中的内容越多，异步传输的数据就越多，因此加载时间越长
    *   如果您的 AJAX 面板出现某种问题或错误，它会“锁定”并且不再响应其中的事件

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T14:02:07.297

当使用没有数据源控件的gridview（即直接将数据集绑定到控件）时，您需要手动实现排序和分页事件，如下所示：

[http://ryanolshan.com/technology/gridview-without-datasourcecontrol-datasource/](http://ryanolshan.com/technology/gridview-without-datasourcecontrol-datasource/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-15T20:04:38.933

**只有在构建控件或**构建使用该控件的页面时，设计器才支持自定义控件，但不能同时支持这两者。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-09-10T08:15:29.680

Linq：如果您使用的是 Linq-To-SQL，`SubmitChanges()`则调用数据上下文并引发异常（例如重复键或其他约束违规），在调试时，有问题的对象值仍保留在您的内存中，并将重新提交每次您随后调用`SubmitChanges()`.

现在这是**真正的问题：****即使您在 IDE 中按下“停止”按钮并重新启动**，错误的值仍会保留在内存中！ 我不明白为什么有人认为这是一个好主意——但是系统托盘中弹出的那个小小的 ASP.NET 图标一直在运行，它似乎可以保存你的对象缓存。如果你想刷新你的内存空间，你必须右键单击该图标并强行关闭它！明白了！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-15T20:01:27.707

您根本无法引用应用程序根文件夹上方的任何内容。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-15T20:02:01.730

我必须维护的所有代码看起来仍然像是用 vb6 编写的，完全不了解新样式。

我说的是 CreateObject()、过多的 <% %> 块、And/Or 而不是 AndAlso/OrElse、Len() 而不是 .Length()、s/o 匈牙利前缀疣、没有类型的 Dim MyVariable、函数没有返回类型...我可以继续。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2011-07-07T19:25:37.923

不是纯 ASP.NET 的东西，但是...

我试图使用 a) 嵌套的 SELECT 或 b) WITH 子句，但无法让它工作，但显然更有知识的人（包括我一起工作的人）告诉我语法很好。结果...

无法使用 OLEDB 中的任何一个。

[对 SQL Server 的 OLEDB 查询失败](https://stackoverflow.com/questions/6552035/oledb-query-to-sql-server-fails)

（另外，我在 try ... catch 'feature' 中被 OP 中提到的 response.redirect() 咬住了！很棒的线程！）

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-12-18T05:48:45.067

不知道框架中存在大量现有的和可扩展的功能。经常重做的事情是成员资格、角色、授权、站点地图。然后是可以自定义的控件和相关标签，以缓解客户端 ID 等问题。还有一些简单的事情，比如不知道如何正确使用 .config 文件将命名空间自动导入模板，并且能够以目录为基础做到这一点。诸如标签表达式之类的鲜为人知的东西有时也很有价值。当然，与所有框架一样，有一个学习曲线，并且总是有一些不足之处，但通常情况下，定制和扩展现有框架而不是滚动你自己的框架更好。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-01-02T13:00:37.833

INamingContainer 控件内的数据绑定控件不得放置在模板化控件（如 FormView）内。有关示例，请参阅[此错误报告。](http://ajaxcontroltoolkit.codeplex.com/workitem/8049)由于 INamingContainer 控件为其包含的控件创建自己的命名空间，因此使用 Bind() 的双向数据绑定将无法正常工作。但是，当加载值时，一切看起来都很好（因为它是使用 Eval() 完成的），在您尝试回发这些值之前，它们似乎不会神秘地出现在数据库中。

这个问题很好地说明了这个问题：[AJAX Tabcontainer inside formview not inserting values](https://stackoverflow.com/questions/969784/ajax-tabcontainer-inside-formview-not-inserting-values)

* * *

## 回答 #21

> 赞同：-5
> 
> 时间：2008-09-15T20:06:14.887

(VB.NET) 如果您通过 Property 的 Get 访问器将 Object 发送到带有 ByRef 关键字的函数中，它实际上会尝试使用 Property 的 Set 访问器更新对象。

前任：

`UpdateName(ByRef aName as String)`

`UpdateName(Employee.Name)`将尝试使用 Employee 的 Name 属性上的 Set 来更新名称。

# xml - 那里有用户友好的 XML 编辑器吗？找不到好东西，最好是开源的

> ID：66148
> 
> 赞同：7
> 
> 时间：2008-09-15T19:46:01.473
> 
> 标签：xml, editor

采用 XML 模式并允许您添加/编辑数据但不更改 XML 结构的东西，最好安装在服务器上。基本上是一个将 xml 文档编辑为 Web 应用程序的 UI。有人必须已经这样做了，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-16T08:35:01.007

[Xopus](http://xopus.com)是专为非技术人员设计的商业 XML 编辑器。Xopus 是基于浏览器的，可以安装在任何网络服务器上。Xopus 使用 XML Schema 始终保持 XML 文档 100% 有效，并使用 XSLT 提供所见即所得的视图。

您可以使用[DOM API](http://xopus.com/documentation/developer-guide/reference/xopus-api.html)对其进行配置，以便只能更改文本，而不是结构。

直接[链接](http://xopus.com/files/demo/xopus/xopus.html#/files/demo/examples/Recipe/start.html)到演示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T19:49:17.097

[Liquid XML](http://www.liquid-technologies.com/)有一个不错的免费版本

更新：（截至2010年3月10日）编辑器似乎不再免费

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T06:55:00.647

[XML Copy Editor](http://xml-copy-editor.sourceforge.net/)是免费的和 GPL

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T22:13:18.453

恕我直言[BXE - Wysiwyg XML 编辑器](http://bitfluxeditor.org/home/)可以做到这一点 - 即基于现有的 XML 模式在浏览器中创建/编辑 XML 文档。我不确定，但您可能必须将它包含在您自己的页面中，它只是编辑器组件，而不是完整的 Web 应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T06:05:43.963

这取决于您所说的“用户友好”是什么意思，以及您想要从文本编辑器中得到什么。我个人使用 emacs 来编辑 xml，但我愿意忍受编辑器的学习曲线，因为它给了我强大的功能 - 现在编辑 XML 对我来说相当容易和轻松，但我花了一点时间才得到它到那个地步。

[oXygen](http://www.oxygenxml.com/)看起来可能适合您的需求，但它不是免费的。

[此页面](http://ahds.ac.uk/creating/information-papers/xml-editors/)对 xml 编辑器和功能进行了很好的比较，似乎是一个很好的起点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-12-21T13:15:40.517

如果您只想要一个带有代码折叠功能的 XML 编辑器和一个节点浏览器（Visual Studio 缺少的东西） ， [Netbeans](http://www.netbeans.org)两者都有，而且是免费和开源的

![Netbeans XML 编辑器](https://i.stack.imgur.com/xNE2L.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T19:54:08.553

查看 microsoft 以获取[XML Notepad 2007](http://www.microsoft.com/downloads/details.aspx?familyid=72d6aa49-787d-4118-ba5f-4f30fe913628&displaylang=en)。我不喜欢它，因为它确实将 xml 视为一棵树而不是纯文本，但这就是您想要的，对吧？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T19:57:52.177

我个人喜欢带有 XMLTools 插件的 Notepad++。不幸的是，它允许您编辑结构。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T05:57:53.577

我不认为有一个网络应用程序允许您根据上传的模式编写实例文档（到目前为止......我应该写一个吗？:)）。

[Altova XMLSpy](http://www.altova.com/products/xmlspy/xml_editor.html)几乎是我用过的最好的编辑器，但非常昂贵。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T06:07:32.120

用合适的插件试试 vim ( [http://www.vim.org/scripts/script.php?script_id=301](http://www.vim.org/scripts/script.php?script_id=301) )。

/艾伦

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-16T09:11:22.913

带有[Oxygen插件的](http://www.oxygenxml.com/eclipse_plugin.html)[Eclipse](http://www.eclipse.org/)怎么样，这将是我的建议，免费开源并且使用非常广泛。Altova XML Spy 是一个很棒的工具，但价格昂贵，他们曾经做过免费的非商业用途版本，但现在没有出现在他们的网站上，所以他们可能已经停止了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-16T09:12:22.693

[XML 编辑器](http://www.xmlmind.com/xmleditor/)是免费的（而各种 FO 转换器不是），您可以将它与[FOP](http://xmlgraphics.apache.org/fop/)（来自 Apache 项目）一起使用。带有 psgml 模块的 Emacs 可以与 vim 一起完成，但两者都可能更低级）。Eclipse 也可以，但 iut 是相当重量级的。

# sql - 如何编写 SQL 查询以找出在 Sql Server 2005 中哪些登录已被授予哪些权限？

> ID：66164
> 
> 赞同：2
> 
> 时间：2008-09-15T19:47:17.990
> 
> 标签：sql, database

我负责一些测试数据库服务器。从历史上看，有太多其他人可以接触到它们。他们继续运行`SQL Server 2005`。

我一直在编写查询并将它们包装在脚本中，这样我就可以对权限进行定期审核。找出哪些用户在服务器本身上拥有管理员权限是很好的，就像找出谁`sysadmin`在他们的登录中拥有该角色一样 - 这是后者的单行查询。

但是如何找出哪些登录具有到特定（或任何）数据库的用户映射？

我可以找到`sys.database_principals`和`sys.server_principals`表。我已经找到了`sys.databases table`. 我还没有弄清楚如何找出哪些用户对数据库有权限，如果有，是什么。

每次 Google 搜索都会使用登录对话框的用户映射窗格手动显示人员，而不是使用查询来执行此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T20:17:19.480

查看有关[Has_Perms_By_Name](http://msdn.microsoft.com/en-us/library/ms189802.aspx)的这篇 msdn 参考文章。我认为您对示例 D、F 和 G 非常感兴趣

* * *

另一个想法...我启动了 SQL 分析器并单击了 ObjectExplorer->Security->Users。这导致（大约）发出以下查询。

```
SELECT *
FROM
  sys.database_principals AS u
  LEFT OUTER JOIN sys.database_permissions AS dp
  ON dp.grantee_principal_id = u.principal_id and dp.type = N'CO'
WHERE (u.type in ('U', 'S', 'G', 'C', 'K'))
ORDER BY [Name] ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:00:55.993

```
 select * from Master.dbo.syslogins l inner join sys.sysusers u on l.sid = u.sid 
```

这将让您在单个数据库中将哪些用户映射到哪些登录名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T15:51:58.470

这是如何做到这一点的。我最终在 MSDN 文档中找到了对 sproc 的引用。我从存储过程中提取了它，并将其包装在实例已知的所有数据库的循环中。

```
select DbRole = g.name, MemberName = u.name
  from @NAME.sys.database_principals u, @NAME.sys.database_principals g, @NAME.sys.database_role_members m
  where   g.principal_id = m.role_principal_id
    and u.principal_id = m.member_principal_id
    and g.name in (''db_ddladmin'', ''db_owner'', ''db_securityadmin'') 
    and u.name not in (''dbo'')
  order by 1, 2 
```

This then reports the users that have DBO who perhaps shouldn't. I've already revoked some admin access from some users that they didn't need. Thanks everyone!

# perl - Perl 6 发生了什么？

> ID：66165
> 
> 赞同：12
> 
> 时间：2008-09-15T19:47:22.920
> 
> 标签：perl

有什么明显的进展吗？现在只是学术练习吗？您是否相信 Perl 会在有或没有 Perl 6 的情况下继续发展，还是很快就会被遗忘？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-15T20:07:18.800

冒着听起来像 Perl 狂热分子的风险，我仍然对 Perl 6 感到兴奋，并且觉得最终结果将在它发布时具有相关性。过去九个月在 Parrot Front () 方面取得了一些不错的成就，甚至还带来了一些[可观的捐款](http://news.perlfoundation.org/2008/05/tpf_receives_large_donation_in.html)，以帮助资助增加的发展。

从[最近的博客文章](http://www.rakudo.org/2008/09/final-report-for-mozilla-found.html)：

> Rakudo 目前支持数组、散列、类、对象、继承、角色、枚举类型、子集类型、角色组合、多方法调度、类型检查、基本 I/O、命名正则表达式、语法、可选参数、命名参数、slurpy 参数、 Perl 6 期望的闭包、智能匹配、连接和许多其他特性。

请密切关注[Rakudo.org](http://rakudo.org/)（Rakudo 是基于 Parrot 构建的 Perl 6 实现的名称），以获取有关 Perl 6 正在进行的开发过程的新闻。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-16T10:22:13.317

您不应该忘记 Perl 5 正在并行开发。[5.10](http://perlbuzz.com/2007/12/perl-510-now-available.html)不久前推出了新功能和语言添加。

Perl 6 的进展缓慢但稳定，PUGS（Perl 6 over Haskell）已经停滞了一段时间，但 Audrey 可能很快就会恢复工作。与此同时，Rakudo（Perl 6 over parrot）进展顺利。这是一篇详细介绍[各种实施进度的帖子](http://perlgeek.de/blog-en/perl-5-to-6/22-state.writeback)

实际上，我不会为此屏住呼吸，但无论多晚，我认为当它出来时它仍然是相关的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-16T22:12:18.120

Perl 6 正在缓慢而稳定地发展。Larry Wall 编写了一个解析器，它可以解析我们所知道的所有 Perl 6（基本上是测试套件加上一些其他代码）。Rakudo 是 Parrot 上的 Perl 6，性能也很好。[您可以使用rakudo.de](http://rakudo.de/)上的图表在测试套件中跟踪其进度

请注意，它是一种全新的语言，实现起来并不简单。我预计明年之前不会有可用的版本，即便如此，任何实现都需要相当长的时间才能像今天的 Perl 5 一样成熟（它已经有 20 年的时间来开发稳定的代码库）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-09-22T23:48:56.673

有很多可见的进步。chromatic 每周将 Parrot/Perl 6 电话会议的会议记录发布到[Use.perl](http://use.perl.org)和[rakudo.org](http://rakudo.org/)，您可以阅读[Jonathan Worthington 的日志](http://use.perl.org/~JonathanWorthington/journal/)，或[Patrick Michaud 的日志](http://use.perl.org/~pmichaud/journal)，或各种 Perl 6 邮件列表。正如 Mortiz 指出的，您可以看到 [测试套件的日常状态](http://rakudo.de/)。

最近的发展包括 Larry Wall 完成了指定完整语法的工作，Rakudo 开发人员添加了预编译模块支持，以及 Jonathan 的多级调度工作。

跟踪进度当然很容易，但是您可能已经知道可以轻松地使用 Google 来查找（“perl6 进度”会带来很好的资源）。也许您还有另一个问题，或者只是想踢马蜂窝？

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-28T17:52:29.527

请参阅官方 Perl 6 Wiki 以查找最新信息：

[http://www.perlfoundation.org/perl6/index.cgi?perl_6](http://www.perlfoundation.org/perl6/index.cgi?perl_6)

来自 2 个主要 Perl 6 博客的最新标题显示在官方 Perl 6 wiki 主页的底部。

那里还有很多其他有用的信息和链接。

例如，最近的 Perl 6 文章和演示文稿：

[http://www.perlfoundation.org/perl6/index.cgi?perl_6_articles_and_presentations](http://www.perlfoundation.org/perl6/index.cgi?perl_6_articles_and_presentations)

Parrot VM 用于动态语言（由 Rakudo/Perl 6 使用）也有一个官方 wiki：

[http://www.perlfoundation.org/parrot/index.cgi?parrot](http://www.perlfoundation.org/parrot/index.cgi?parrot)

Parrot 是多语言的，因此 Perl 6 将能够调用用其他 Parrot 语言编写的模块，而其他 Parrot 语言将能够调用编译成 Parrot 的 Perl 6 模块。

与由其参考实现定义的 Perl 5 不同，Perl 6 由其测试套件定义。所以最终会有其他版本的 Perl 6 不能在 Parrot VM 上运行。

Perl 5 仍在不断发展。Perl 5.10 是最近的一个主要版本，它（在许多其他改进中）还具有一些与 Perl 6 相关的特性。Perl 5.12 正在积极开发中（如 Perl 5.11）。

Perl 5.12 将支持调用（以及被调用）Perl 6。Perl 6 应该能够编译绝大多数 Perl 5 代码——这是一个主要优先事项。

请参阅官方 Perl 5 Wiki 以查找最新信息：

[http://www.perlfoundation.org/perl5/index.cgi?perl_5_wiki](http://www.perlfoundation.org/perl5/index.cgi?perl_5_wiki)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-15T20:15:19.763

Perl 6 进展顺利。Perl 6 与以前的 Perl 有点不同，因为 Perl 6 实际上是一种语言规范，而不是它的实现。Parrot 之上的参考实现是 Perl 6 项目的主要推动力，已重命名为 Rakudo，并且进展顺利。我找到的关于它的新闻最好的地方是[http://planetsix.perl.org/](http://planetsix.perl.org/)。目前，据我了解，该语言的大部分重要功能都已实现，并且正在充实其余部分并编写测试。你可以下载它并测试一下。最简单的方法似乎是 cygwin 版本，它已捆绑并制成 cygwin 包。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-12-11T05:08:31.313

现在至少有一个[鹦鹉路线图。](https://trac.parrot.org/parrot/roadmap)

还有一个网站[跟踪](http://rakudo.de/)[Rakudo](http://rakudo.org/)实现通过的测试数量。

[![http://rakudo.de/progress.png](https://i.stack.imgur.com/tHKAn.png)](https://i.stack.imgur.com/tHKAn.png)
[（来源：[rakudo.de](http://rakudo.de/progress.png)）]

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-22T22:26:04.860

将其他语言定位到 parrot vm 的能力将使使用您熟悉的任何语言制作产品变得微不足道。

最近有活动的语言列表，或者至少用最新的鹦鹉测试过（截至 2008 年 9 月 22 日）：

*取自[语言/LANGUAGES_STATUS.pod](http://svn.perl.org/parrot/trunk/languages/LANGUAGES_STATUS.pod)*

*   APL
*   男朋友
*   红衣主教（红宝石）
*   闲聊（Smalltalk）
*   [可乐](http://en.wikipedia.org/wiki/Cola_programming_language) （爪哇）
*   通用 Lisp
*   折衷主义（方案）
*   ECMAScript
*   [总部9+](http://www.cliff.biffle.org/esoterica/hq9plus.html)
*   [Jako](http://en.wikipedia.org/wiki/Jako_(programming)) (C/Perl)
*   JSON
*   [懒惰-k](http://homepages.cwi.nl/~tromp/cl/lazy-k.html)
*   [大声笑代码](http://lolcode.com/specs/1.2)
*   [卢阿](http://www.parrotcode.org/talks/LuaOnParrot.pdf)
*   鹦鹉 m4
*   [降价](http://daringfireball.net/projects/markdown)
*   NQP（不是 Perl）
*   [乐堂](http://rakudo.org)
*   Pheme（受 Scheme 启发的 Lisp-2 编译器）
*   Pipp（Pipp 是 Parrot 的 PHP）
*   [PJS](http://users.fulladsl.be/spb1622/pjs/) ([维基](http://www.perlfoundation.org/parrot/index.cgi?javascript))
*   普尼 (Perl1)
*   正则表达式
*   吱吱声（吱吱声不是吱吱声）
*   零件 (TCL)
*   [非拉姆达](http://www.madore.org/~david/programs/unlambda/)
*   WMLScript 翻译器

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-03-13T19:21:25.093

对于它直到 2005 年才开始的评论......我想这取决于你是否将 Parrot 视为 Perl6。最初的团队做到了，但多年来我们没有得到“Perl6 语言”的支持。

我们在 2000-2004 年间对 Parrot 进行了实际工作，并且大部分 VM 基础工作都在那里。到 2002 年，我们有了延续、协同例程、JIT、中间编译器和除 Perl6 之外的十几种语言，包括用 Parrot 的 PIR 编写的 BASIC 解释器。到那时，我们可以编译和运行世界上几乎任何类型的语言，没有高度并发的语言，而且我们的能力远远超出了 Perl6 对实现平台的需求。

VM 本身已经具备多年的能力。Perl6 作为一门语言是另一回事，因为它是一个非常难以解析的野兽。这对 Parrot 没有任何影响。这只是对 Perl 文化的一种反思，这就是为什么其他脚本语言的兴起加速而 Perl5 正在衰落，曾经选择 Perl5 进行新系统实现的人们转向 Ruby、Python 和 Groovy，以及 Java 和C# 进化的框架，大量使用反射进行运行时调度。

尽管我非常喜欢 Perl，但如果一种语言很难实现，以至于无法在不到十年的时间内编写出生产质量的编译器，那就大错特错了！C++ 更易于解析，并且在 Per6 的一小部分时间内实现。这应该告诉我们一些事情。Derek Jones 在他的博客“代码的形状”中写道，C++ 可能已经“太大而不能失败”（[http://shape-of-code.coding-guidelines.com/2008/12/c-goes-for-太大而不能倒/](http://shape-of-code.coding-guidelines.com/2008/12/c-goes-for-too-big-to-fail/)）。C++ 有能力做到这一点，因为它在发展壮大之前首先取得了成功。Perl6 可能是“太大而无法成功”，因为范围如此宏大以至于项目很难留住贡献者，因为典型贡献者的注意力可能是 2-3 年，而不是 10 年。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-24T13:10:45.457

即使 Perl 5 永远无法实现，Perl 5 也将继续出色且可用。六重振奋了 Perl 5，Perl 5 继续体验了许多奇妙的新事物，例如 Moose。

我认为 Perl 6 总有一天会完成并且会很好，但是现在，我是一个 Fiver，我很高兴这样。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-15T19:55:36.707

我觉得 Perl 6 可能会带来一些好东西（例如 parrot），但我不指望用这种语言做任何事情。

在我工作的生物信息学开发小组中，我们鼓励使用 Python 进行新的开发，而过去 Perl 是首选语言。Python 似乎为我们提供了一条更好的前进道路。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-15T20:17:41.723

慢而迟。它有一个第二系统疾病的终末病例。当我还是一名 Perl 黑客时（当时），他们已经在 Perl 6 上工作了两年。那是6年前的事了。你可以在那个时候建立一个完整的操作系统。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-09-15T19:56:39.233

圣诞节前就出来了。;-) 我在播客上听说今年圣诞节前会有某种阿尔法。他们对此很明确，但我已经有一段时间没有听到了。

# c++ - C++ 网络服务框架

> ID：66166
> 
> 赞同：3
> 
> 时间：2008-09-15T19:47:25.963
> 
> 标签：c++, xml, web-services, frameworks, xsd

我们正在寻找支持 RPC 的 C++ Soap Web 服务框架，最好是开源的。有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-15T19:52:22.847

WSO2 Web Services Framework for C++ (WSO2 WSF/C++)，WSO2 WSF/C 到 C++ 的绑定是一个 C++ 扩展，用于在 C++ 中使用 Web 服务。

[http://wso2.org/projects/wsf/cpp](http://wso2.org/projects/wsf/cpp)

Apache Axis 是一个开源的、基于 XML 的 Web 服务框架。它由 SOAP 服务器的 Java 和 C++ 实现，以及用于生成和部署 Web 服务应用程序的各种实用程序和 API 组成。

[http://ws.apache.org/axis/](http://ws.apache.org/axis/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-07T09:26:35.490

[http://code.google.com/p/staff/](http://code.google.com/p/staff/)

Staff 是基于 Apache Axis2/C 的 C++（服务/组件和客户端）/JavaScript（客户端）的 Web 服务框架。

开源，随 Apache License V2.0 一起发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-28T06:49:01.383

试试**[ffead-cpp](http://code.google.com/p/ffead-cpp/)**框架，它提供了内置的 web-service 支持、rest、json 和许多其他有用的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-27T08:58:51.140

我们正在使用 EasySoap ( [http://easysoap.sourceforge.net/](http://easysoap.sourceforge.net/) )

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-27T09:40:46.963

虽然不是 FOSS，但另一个库是Microsoft 的[ATL Server](http://msdn.microsoft.com/en-us/library/exb5b09w%28VS.80%29.aspx)库。它是基于 C++ 模板，具有 Microsoft 的一些专有属性。即不是标准的C++

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-07T14:24:44.230

您可以查看 xmlbeansxx。与完整的框架相比，这是一种轻量级的低级解决方案。这在某些情况下具有优势。

[使用 xmlbeansxx 调用 SOAP WebServices 文章](http://top.touk.pl/confluence/display/xmlbeansxxdoc/Invoking+SOAP+WebServices+using+xmlbeansxx)

代码示例在这里： [WsClient.cpp](http://top.touk.pl/git?p=xmlbeansxx;a=blob;f=examples/geoip/src/WsClient.cpp;h=c96c2e24f8e562feb274e8be8b1d76f87d35e9b0;hb=HEAD)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T19:49:37.360

你可以试试[gSOAP](http://www.cs.fsu.edu/~engelen/soap.html)。在 GPL 和商业许可下可用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T21:00:21.140

我使用[SWIG](http://www.swig.org/)制作了从 C++ 到 Java 或 Python 的界面，然后使用了对这些语言的典型 Web 界面支持。

由于 Java 和 Python 具有反射功能，因此为它们而存在的 Web 服务框架可以更轻松地传递数据。

如果您的 C++ 代码是线程安全的，则线程明智，您可以让 Java 服务器管理并发请求等线程的创建，并使用 JNI 调用您的 C++ 代码。

作为奖励，您可以使用这些相同的 SWIG 接口从 Python 测试您的 C++ 代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T21:03:24.563

我认为要走的路是用 C++ 编写你的服务（我假设你做了所有的功课，你有充分的理由想用 C++ 编写），然后使用 RPC 服务器在它前面。使用 Thrift 或 Protobufs 之类的东西来实现快速的 RPC。

现在用你选择的语言编写你的 web 前端——python 是我的——并进行 RPC 调用来完成所有繁重的工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T21:18:51.937

[POCO Remoting](http://www.appinf.com/en/products/remoting.html)为您提供了一种在 C++ 中创建 Web 服务的非常简单的方法，只需使用特殊注释注释 C++ 类定义并在其上运行代码生成器。它是商业的，但提供了完整的源代码。提供免费的评估版本。在 Windows、Linux、Mac OS X 等上运行。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T14:04:39.123

我同意 imjorge 的回答，并补充说有一个 C/C++ 版本的 Axis2 框架（更灵活、可扩展的 Axis），它通过 RPC 和各种东西（包括一堆 WS-* 规范）执行 SOAP。

[http://ws.apache.org/axis2/c/](http://ws.apache.org/axis2/c/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-26T16:30:36.567

Apache axis-c：易于使用，但似乎已被废弃.. 甚至下载页面都无法运行几个月

WSOF WSFCPP：基于 Apache AxisC 的快速快速入门开发，无论是绑定的还是非绑定的实现，目前 Apache Axis 的大多数开发人员似乎都来自 WSOF 公司。除了巨大的潜力，我还发现了内存泄漏。

我目前正在使用 Gsoap，它的性能非常好。旧的 c 风格和 C++ 的一些（坏的？）实践之间的 Gsoap“混合表示法”让我有些困扰..但这只是代码家具。

POCO：是一个功能齐全的现代（java？）类库。它是开源软件，在 Boost Software License 1.0 下获得许可。你必须从头开始写一些东西，但是有很好的支持、实用程序类和等等很棒的库。来自 c++11+ 的创新以及所有的提升计划 + POCO + 一个新的构建/依赖系统更“类似于 gradle”将无疑将 c++ 带入了新的开发领域。

# winforms - 氪星控制人吗？

> ID：66172
> 
> 赞同：5
> 
> 时间：2008-09-15T19:47:43.870
> 
> 标签：winforms, visual-studio-2008, visual-studio-2005

我在这个网站上发现了 Krypton 控件的广告（[这是另一个！](https://github.com/ComponentFactory/Krypton)），我想知道你们中是否有人使用 vs.net 05 或 08 正在使用它们以及效果如何。如果您正在回答，请说明您正在使用哪些部分（免费、功能区、选项卡）以及您使用的 vs.net、您使用的语言以及优缺点。我知道您可能会喜欢更好的套件，但这个问题专门针对氪星控制。我们会将它与 vb.net、.net 3.5、08 一起使用，所以我特别想听听您在这些领域的经验。（我看过所有的截屏视频）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-15T20:02:44.710

我已经在**.NET 2.0、3.0、3.5 和 3.5 SP1**中使用 Krypton Controls ToolKit和**Visual Studio 2005 和 2008****超过 3 年**。我**只使用了免费的 ToolKit**，而不是 Ribbon 或 Tab 控件。我**只在 C** # 中使用过它。

 ********优点：**

1.  自由
2.  易于使用 - 它将所有组件添加到工具箱中，因此非常易于实现。
3.  与默认的 windows 窗体控件相比，字体渲染很棒。
4.  允许您完全覆盖应用程序外观的“chrome”非常好。
5.  定义主方案的能力使得在一个中心位置更改类似控件的外观变得很容易。
6.  通过在 Component Factory 论坛上提交问题，即使在免费 Toolkit 上的支持也很棒。
7.  它包括其他控件，这些控件应该是窗口窗体控件的一部分，包括标题组。

**缺点：**

1.  其他组件不是免费的；）
2.  在旧版本中，ToolKit 中不存在某些控件，因此您必须使用不完全适合应用程序外观的 winform 控件。然而，最新版本将大多数（如果不是全部）控件实现为氪控件。

这是我们使用 Krypton Chrome的“ [MuvEnum 地址栏](http://www.muvenum.com/products/freeware/)”选项对话框的快速示例。它非常容易创建。注意字体的平滑度。

![替代文字](https://www.muvenum.com/images/freeware/mab-options-ss-full.png)

我不能足够推荐 Krypton Controls。

约翰·雷内迈尔

[MuvEnum](http://www.muvenum.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T19:55:11.950

几年来，我一直在各种小型内部项目中使用免费控件。我开始关注他的博客，就像他从 MicroISV 开始一样，从 MicroISV 博客上的提及开始。所以我经历了他所做的许多改进。他制作的控件非常可靠（至少在我对它们的使用中），并且他真正倾听用户对功能和其他控件的需求。

我强烈推荐控件！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T00:36:35.103

在过去的一年半里，我一直在使用全套套件。我对结果非常满意。它们易于使用，而且我没有遇到任何我自己无法解决的问题（我购买了源代码版本）。

绝对推荐。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T21:02:18.973

我正在使用它。没关系。

# java - 用于 Java 的轻量级 REST 库

> ID：66288
> 
> 赞同：15
> 
> 时间：2008-09-15T19:56:29.903
> 
> 标签：java, rest

我正在为我正在开发的 Java Web 应用程序寻找一个轻量级的 REST 版本。

我查看了 RESTlet (www.restlet.org) 和 Struts 2 的 REST 插件，但我还没有下定决心。我倾向于 RESTlet，因为它似乎更轻。

有没有人在没有任何框架或框架的情况下实现了 RESTful 层？

由于新的 Web 层，您遇到过任何性能问题吗？

REST 的引入是否给您的项目增加了难以管理或不合理的复杂性？（一些复杂性是可以理解的，但我的意思只是为了添加 REST 而过度杀伤您的设计）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-17T11:26:03.483

我是 JAX-RS 的忠实粉丝——我认为他们在该规范方面做得很好。我在许多项目中使用它，与它一起工作很愉快。

JAX-RS 允许您使用 POJO 创建 REST 资源，其中包含处理 URI 映射、HTTP 方法和内容协商的简单注释，所有这些都与依赖注入很好地集成。无需学习复杂的 API；只需要核心 REST 概念（URI、标头/响应代码和内容协商）。从控制器的角度来看，FWIW JAX-RS 非常类似于 Rails

那里有许多 JAX-RS 实现 - 请参阅[此线程以进行讨论](https://stackoverflow.com/questions/80799/jax-rs-frameworks)。

我个人的建议是使用[Jersey](http://jersey.java.net/)，因为它拥有最大、最活跃的社区，在撰写本文时拥有最好的功能（WADL 支持、隐式视图、spring 集成、漂亮的 REST 客户端 API）；但如果您使用 JBoss/SEAM，您可能会发现 RESTeasy 集成得更好一些。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-18T20:03:02.843

我是 Restlet 的忠实粉丝，但我通常使用它来实现主要角色是**成为**RESTful Web 服务的应用程序。听起来您希望将 RESTful API 添加到现有应用程序。如果是这种情况，JAX-RS（或 Enunciate）的基于注释的方法可能更适合您的项目。

As for Restlet, I can tell you that I've been very impressed with the developers and the community; they're very active, engaged, responsive, and committed to a stable, efficient, reliable, and effective framework. My single favorite aspect of the framework is that it is a ground-up implementation of the REST paradigm; therefore there is no impedance-mismatch between a Restlet app's external API and internal implementation. I also really like how flexible it is - it can run inside a Java application container/server such as JBoss, Tomcat, Jetty, etc, or standalone, with an embedded HTTP server library.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T19:59:51.923

好吧，我已经使用了很多 Enunciate。它使用简单的注释来提供 REST 和/或 SOAP 端点。

[http://enunciate.codehaus.org](http://enunciate.codehaus.org)

此外，Ryan Heaton 也一直为事物提供一流的支持。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T18:25:49.457

您知道还有一个用于访问 RESTful 服务的新 JCP API：

JAX-RS JCP311 [https://jsr311.dev.java.net/](https://jsr311.dev.java.net/)

开源版本称为 Project Jersey

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T20:02:06.817

我正在为[gliffy.com](http://www.gliffy.com)开发一个 REST API ，我们最终推出了自己的 API。我们不想引入 Struts 2、Spring 或任何其他框架。我查看了 RESTLet，发现它非常混乱且过于复杂。

Apache 有一个 JAX-RS 规范的实现，但它还没有最终确定，并且还有一些奇怪之处。我们暂时计划开源我们的解决方案，但这不是几个月。

不过，自己动手很容易。Servlet 规范为您提供所需的一切，并且您可以通过 Hibernate 轻松连接到数据库（请参阅[http://www.naildrivin5.com/daveblog5000/?p=39](http://www.naildrivin5.com/daveblog5000/?p=39)，了解如何在不使用 EJB3 的情况下设置 JPA）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T20:41:00.187

我发现 restlet 是一个非常优雅的架构。我在.net 世界中工作，所以这不是我的选择，但我能够按照restlet 的相同基本原则构建自己的框架。我发现将基于 WCF 合同的 SOA 应用程序转换为基于 REST 的应用程序显着简化了应用程序，

# windows - Visual Studio 应用程序中的图像未对齐

> ID：66293
> 
> 赞同：0
> 
> 时间：2008-09-15T19:56:44.507
> 
> 标签：windows, winforms, visual-studio-2005

我有一个 Visual Studio 应用程序，它的初始屏幕图像被切割成“切片”。这些位置在表单设计器中指定，因此它们在屏幕上正确排列。但是，当应用程序在中文版的 Windows XP 上运行时，图像不合适。看起来好像图像切片被“爆炸”分开了。

这里发生了什么？国际版本的Windows对图片的“左上”坐标有不同的含义吗？如何强制图像精确显示在我想要的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T17:25:14.923

我们找到了解决方案！显然，图片框在中文 XP PC 上伸展开来，但它们包含的图像却没有。解决方法是添加如下代码：

```
Me.PictureBoxIcon.Width = Me.PictureBoxIcon.Image.Width
Me.PictureBoxIcon.Height = Me.PictureBoxIcon.Image.Height

Dim loc As New Point
loc.X = Me.PictureBoxIcon.Location.X
loc.Y = Me.PictureBoxIcon.Location.Y + Me.PictureBoxIcon.Height
Me.PictureBoxAbout.Location = loc
Me.PictureBoxAbout.Width = Me.PictureBoxAbout.Image.Width
Me.PictureBoxAbout.Height = Me.PictureBoxAbout.Image.Height 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T21:10:35.420

在表单的 OnLoad 事件中，您始终可以显式设置每个部分的位置。如果从第一个左上角开始，并假设一个包含图像的数组按顺序排列：

```
images[0].Location = new Point(0,0);
for (int i = 1; i < images.Length; i++)
{
  images[i].Location = new Point(images[i - 1].Location.X + images[i - 1].Width, 0);
} 
```

这会将第一张图像设置为左上角，并将所有后续图像设置在最后一张图像之后。

# perl - Perl 辅助回归测试

> ID：66330
> 
> 赞同：6
> 
> 时间：2008-09-15T19:59:31.317
> 
> 标签：perl, testing, regression

是否有一个 Perl 模块可以让我查看程序（或函数）的实际输出和参考输出之间的差异？如果存在差异，则测试失败。

此外，如果存在差异但输出正常（因为功能已更改），我希望能够将实际输出提交为将来的参考输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T20:26:45.727

Perl 具有出色的测试工具。最常用的模块可能是 Test::More，它提供了编写回归测试可能需要的所有基础设施。证明实用程序为运行测试套件和总结结果提供了一个简单的界面。Test::Differences 模块（可与 Test::More 一起使用）也可能对您有用。它将差异格式化为并排比较。至于将实际输出提交为新的参考资料，这将取决于您的被测代码如何提供输出以及您如何捕获它。如果您写入文件然后比较它们应该很容易。如果是这种情况，您可能希望在测试套件中使用 Text::Diff 模块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T06:27:21.010

如前所述，Test::Differences 是完成此任务的标准方法之一，但我需要提及 PerlUnit：请不要使用它。它是“废弃软件”，不与标准 Perl 测试工具集成。因此，对于所有出现的新测试模块，如果您想使用它们，就必须移植它们的功能。（如果有人负责这个废弃模块的维护，请给我留言。我需要与他们交谈，因为我维护核心测试工具，我想帮助与 PerlUnit 集成）。

免责声明：虽然 Id 没有写它，但我目前维护 Test::Differences，所以我可能有偏见。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T20:16:46.127

我倾向于使用更多的 Test::Simple 和 Test::More 功能。我查看了 PerlUnit，它似乎提供了许多已经内置在标准库中的功能，包括 Test::Simple 和 Test::More 库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T11:03:38.867

我质疑那些推荐使用 PerlUnit 的人。它已经3年没有发布了。如果你真的想要 xUnit 风格的测试，请看一下[Test::Class](http://search.cpan.org/perldoc?Test::Class)，它做同样的工作，但以更 Perlish 的方式。它仍然被维护并定期发布的事实也没有受到伤害。

只要确保它对您的项目有意义。也许你所需要的只是旧的[Test::More](http://search.cpan.org/perldoc?Test::More)（它通常适合我）。我建议阅读文档中的“*为什么你应该 [不] 使用 Test::Class* ”部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T01:59:29.640

For testing the output of a program, there is [Test::Command](http://search.cpan.org/dist/Test-Command/). It allows to easily verify the stdout and stderr (and the exit value) of programs. E.g.:

```
use Test::Command tests => 3;

my $echo_test = Test::Command->new( cmd => 'echo out' );

$echo_test->exit_is_num(0, 'exit normally');
$echo_test->stdout_is_eq("out\n", 'echoes out');
$echo_test->stderr_unlike( qr/something went (wrong|bad)/, 'nothing went bad' ) 
```

The module also has a functional interface too, if it's more to your liking.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T05:56:09.573

社区标准的主力是 Test::Simple（用于开始测试）和 Test::More（一旦你想要的不仅仅是 Test::Simple 可以为你做的）。两者都是围绕预期输出与实际输出的概念构建的，并且两者都会在它们发生时向您显示差异。这些模块的 perldoc 将助您一臂之力。

您可能还想查看[Perl QA wiki](http://perl-qa.hexten.net/wiki/index.php/Main_Page)，如果您真的对 perl 测试感兴趣，perl-qa 邮件列表可能值得研究——尽管它通常更多是关于为 Perl 创建测试系统而不是使用那些语言中的系统。

最后，使用 module-starter 工具（来自 Module::Starter）将为您提供一个非常好的“CPAN 标准”布局，用于新工作 - 或将现有代码放入 - 包括现成的测试工具设置。

# sql - 在棕地应用程序中实施单元测试的首要任务是什么？

> ID：66361
> 
> 赞同：4
> 
> 时间：2008-09-15T20:02:08.907
> 
> 标签：sql, language-agnostic, programming-languages, testing-strategies

你会先重构你的 SQL 吗？你的架构？还是你的代码库？你改变语言吗？您是否将所有东西都扔掉并从头开始？[不重构]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T20:45:35.543

我正在向大型遗留意大利面条代码库添加单元测试。

我的方法是，当被要求解决问题时，我尝试围绕与我当前任务相关的代码库部分创建一个新的包装器。这个新的包装器是使用 TTD 开发的（首先编写测试）。有时会调用*未经*单元测试的遗留代码。在其他时候，我制作一个现有模块的新副本并开始对其进行严重的暴力。有时我会从头开始重写功能。

但是由于我对其进行了很好的测试，因此我感觉很好。

我发现这个代码库是用太多的复制和粘贴来开发的，一旦我理解了一个特定的部分，并从中提取一些函数（这些函数是先测试完成的）......这些函数通常可以在许多其他地方使用，因此用我自己的、单元测试的库替换遗留代码的速度增加了。

我没有（也无权）尝试重写或添加测试到我当前问题未触及的部分代码（通常是我正在尝试修复的错误），但我确实有一个相当积极主动的立场在任何被触及的和可能相关的东西上。

更新：Penguinix 问道：“你用什么语言工作？你推荐一个特定的测试工具吗？”

现在我在……呃……腮腺炎！但同样的原则在任何地方都适用。

MinUnit 改变了我对 UT 的理解：http: [//www.jera.com/techinfo/jtns/jtn002.html](http://www.jera.com/techinfo/jtns/jtn002.html)

当我看到 MinUnit 时，那对我来说是一种“禅”的启蒙时刻。它消除了我对单元测试是需要复杂的 OO 框架等复杂的东西的误解。我明白 UT 只是要编写一堆测试。您可以在大约 3 分钟内用您喜欢的任何语言编写自己的“线束”。继续做吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:05:19.180

这真的取决于代码库的状态......是否有大量的类？一类有超级方法？这些类是紧密耦合的吗？配置是负担吗？

考虑到这一点，我建议阅读[有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)，找出你的问题，并应用这些建议。

# c# - 在 C# 中通过远程处理获取外部 IP 地址

> ID：66363
> 
> 赞同：21
> 
> 时间：2008-09-15T20:02:29.170
> 
> 标签：c#, .net, remoting

我需要找出运行 C# 应用程序的计算机的**外部**IP。

在应用程序中，我有一个到服务器的连接（通过 .NET 远程处理）。有没有好办法在服务器端获取客户端的地址？

*（我已经编辑了这个问题，以便更清楚一点。我向所有尽力回答这个问题的好心人道歉，当时我可能有点太含糊了）*

**解决方案：**
我找到了一种对我很有效的方法。通过在我可以访问 CommonTransportKeys.IPAddress 的地方实现自定义 IServerChannelSinkProvider 和 IServerChannelSink，很容易在 CallContext 上添加客户端 IP。

```
public ServerProcessing ProcessMessage(IServerChannelSinkStack sinkStack, 
    IMessage requestmessage, ITransportHeaders requestHeaders, 
    System.IO.Stream requestStream, out IMessage responseMessage, 
    out ITransportHeaders responseHeaders, out System.IO.Stream responseStream)
{
    try
    {
        // Get the IP address and add it to the call context.
        IPAddress ipAddr = (IPAddress)requestHeaders[CommonTransportKeys.IPAddress];
        CallContext.SetData("ClientIP", ipAddr);
    }
    catch (Exception)
    {
    }

    sinkStack.Push(this, null);
    ServerProcessing srvProc = _NextSink.ProcessMessage(sinkStack, requestmessage, requestHeaders,
        requestStream, out responseMessage, out responseHeaders, out responseStream);

    return srvProc;
} 
```

然后稍后（当我收到来自客户端的请求时）只需像这样从 CallContext 获取 IP。

```
public string GetClientIP()
{
    // Get the client IP from the call context.
    object data = CallContext.GetData("ClientIP");

    // If the data is null or not a string, then return an empty string.
    if (data == null || !(data is IPAddress))
        return string.Empty;

    // Return the data as a string.
    return ((IPAddress)data).ToString();
} 
```

我现在可以将 IP 发送回客户端。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-15T20:20:21.343

这是您必须深入研究并可能重新考虑原始问题的问题之一；在这种情况下，“为什么需要外部 IP 地址？”

问题是计算机可能没有外部 IP 地址。例如，我的笔记本电脑有一个由路由器分配的内部 IP 地址 (192.168.xy)。路由器本身有一个内部 IP 地址，但它的“外部”IP 地址也是内部的。它仅用于与 DSL 调制解调器通信，后者实际上具有外部的、面向 Internet 的 IP 地址。

所以真正的问题变成了，“我如何获得 2 跳以外的设备的面向 Internet 的 IP 地址？” 答案通常是，你不知道；至少在不使用诸如 whatismyip.com 之类的服务的情况下，您已经解雇了，或者进行了非常大规模的黑客攻击，涉及将 DSL 调制解调器密码硬编码到您的应用程序中，并查询 DSL 调制解调器和屏幕抓取管理页面（上帝帮助你如果调制解调器被更换）。

编辑：现在将此应用于重构的问题，“如何从服务器 .NET 组件获取客户端的 IP 地址？” 与 whatismyip.com 一样，服务器所能做的最好的事情就是为您提供面向 Internet 的设备的 IP 地址，这不太可能是运行该应用程序的计算机的实际 IP 地址。回到我的笔记本电脑，如果我面向 Internet 的 IP 是 75.75.75.75 并且 LAN IP 是 192.168.0.112，那么服务器将只能看到 75.75.75.75 IP 地址。这样就可以达到我的 DSL 调制解调器。如果您的服务器想与我的笔记本电脑建立单独的连接，我首先需要配置 DSL 调制解调器以及它与我的笔记本电脑之间的任何路由器，以识别来自您的服务器的传入连接并适当地路由它们。有几种方法可以做到这一点，但它'

如果您实际上是在尝试建立从服务器到客户端的连接，请重新考虑您的设计，因为您正在钻研 WTF 领域（或者至少，使您的应用程序更难部署）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-15T20:06:38.007

Dns.GetHostEntry(Dns.GetHostName()); 将返回一个 IP 地址数组。第一个应该是外部IP，其余的将是NAT后面的。

所以：

```
IPHostEntry IPHost = Dns.GetHostEntry(Dns.GetHostName());
string externalIP = IPHost.AddressList[0].ToString(); 
```

编辑：

有报道称这对某些人不起作用。它对我有用，但可能取决于您的网络配置，它可能不起作用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-08-23T20:53:17.653

我找到了一种对我很有效的方法。通过在我可以访问 CommonTransportKeys.IPAddress 的地方实现自定义 IServerChannelSinkProvider 和 IServerChannelSink，很容易在 CallContext 上添加客户端 IP。

```
public ServerProcessing ProcessMessage(IServerChannelSinkStack sinkStack, 
    IMessage requestmessage, ITransportHeaders requestHeaders, 
    System.IO.Stream requestStream, out IMessage responseMessage, 
    out ITransportHeaders responseHeaders, out System.IO.Stream responseStream)
{
    try
    {
        // Get the IP address and add it to the call context.
        IPAddress ipAddr = (IPAddress)requestHeaders[CommonTransportKeys.IPAddress];
        CallContext.SetData("ClientIP", ipAddr);
    }
    catch (Exception)
    {
    }

    sinkStack.Push(this, null);
    ServerProcessing srvProc = _NextSink.ProcessMessage(sinkStack, requestmessage, requestHeaders,
        requestStream, out responseMessage, out responseHeaders, out responseStream);

    return srvProc;
} 
```

然后稍后（当我收到来自客户端的请求时）只需像这样从 CallContext 获取 IP。

```
public string GetClientIP()
{
    // Get the client IP from the call context.
    object data = CallContext.GetData("ClientIP");

    // If the data is null or not a string, then return an empty string.
    if (data == null || !(data is IPAddress))
        return string.Empty;

    // Return the data as a string.
    return ((IPAddress)data).ToString();
} 
```

我现在可以将 IP 发送回客户端。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-15T20:06:33.560

最好只使用[http://www.whatismyip.com/automation/n09230945.asp](http://www.whatismyip.com/automation/n09230945.asp)它只输出 IP 仅用于自动查找。

如果你想要一些不依赖别人的东西把你自己的页面[http://www.unkwndesign.com/ip.php](http://www.unkwndesign.com/ip.php)只是一个快速脚本：

```
<?php
echo 'Your Public IP is: ' . $_SERVER['REMOTE_ADDR'];
?> 
```

这里唯一的缺点是它只会检索用于创建请求的接口的外部 IP。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-15T20:13:42.997

Jonathan Holland 的回答基本上是正确的，但值得补充的是，Dns.GetHostByName 背后的 API 调用相当耗时，缓存结果是个好主意，这样代码只需调用一次。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-15T20:22:44.850

主要问题是公共 IP 地址不一定与运行应用程序的本地计算机相关。它是通过防火墙从内部网络翻译过来的。真正不询问本地网络而获得公网IP，就是向一个网页请求并返回结果。如果您不想使用公开可用的 WhatIsMyIP.com 类型的站点，您可以轻松地创建一个并自己托管它 - 最好作为 Web 服务，这样您就可以从应用程序中对其进行简单的肥皂兼容调用。您不一定会像幕后帖子那样进行屏幕截图并阅读响应。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-15T20:10:31.960

如果您只想要绑定到适配器的 IP，则可以使用 WMI 和 Win32_NetworkAdapterConfiguration 类。

[http://msdn.microsoft.com/en-us/library/aa394217(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa394217(VS.85).aspx)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-29T20:53:47.010

Patrik 的解决方案对我有用！

我做了**一个**重要的改变。在处理消息中，我`CallContext`使用以下代码设置：

```
// try to set the call context
LogicalCallContext lcc = (LogicalCallContext)requestMessage.Properties["__CallContext"];
if (lcc != null)
{
    lcc.SetData("ClientIP", ipAddr);
} 
```

这会将 IP 地址放置在正确的 CallContext 中，以便以后可以使用 `GetClientIP()`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-15T22:34:57.590

好吧，假设您已`System.Net.Sockets.TcpClient`连接到客户端，则可以（在服务器上）使用`client.Client.RemoteEndPoint`. 这将为您提供`System.Net.EndPoint`指向客户的信息；它*应该*包含`System.Net.IPEndPoint`子类的一个实例，尽管我不确定它的条件。投射到那个之后，您可以检查它的`Address`属性以获取客户的地址。

简而言之，我们有

```
using (System.Net.Sockets.TcpClient client = whatever) {
    System.Net.EndPoint ep = client.Client.RemoteEndPoint;
    System.Net.IPEndPoint ip = (System.Net.IPEndPoint)ep;
    DoSomethingWith(ip.Address);
} 
```

祝你好运。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T20:18:23.907

我相信从理论上讲，如果不使用外部“帮助”，您将无法在路由器后面（例如使用无效的 IP 范围）做这样的事情。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-09-15T20:05:32.597

您基本上可以通过执行[http://whatismyipaddress.com的 WebRequest 来解析返回的页面](http://whatismyipaddress.com)

[http://www.dreamincode.net/forums/showtopic24692.htm](http://www.dreamincode.net/forums/showtopic24692.htm)

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2008-09-15T20:07:01.687

最可靠的方法是检查[http://checkip.dyndns.org/](http://checkip.dyndns.org/)之类的站点或类似站点，因为在您真正进入网络外部之前，您无法找到您的外部 IP。但是，硬编码这样的 URL 要求最终失败。您可能希望仅在当前 IP 看起来像[RFC1918](http://www.faqs.org/rfcs/rfc1918.html)私有地址时才执行此检查（`192.168.x.x`这是其中最熟悉的。

如果做不到这一点，您可以在防火墙外部实施您自己的类似服务，这样您至少会知道它是否已损坏。

# c# - 是否可以缓存在 lambda 表达式中评估的值？

> ID：66382
> 
> 赞同：4
> 
> 时间：2008-09-15T20:04:37.717
> 
> 标签：c#, linq, lambda, predicate

在以下代码的 ContainsIngredients 方法中，是否可以缓存*p.Ingredients*值而不是多次显式引用它？这是一个相当简单的例子，我只是为了说明目的而编写的，但我正在处理的代码引用了*p*内部的值，例如。*p.InnerObject.ExpensiveMethod().Value*

编辑：我正在使用来自[http://www.albahari.com/nutshell/predicatebuilder.html的 PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.html)

```
public class IngredientBag
{
    private readonly Dictionary<string, string> _ingredients = new Dictionary<string, string>();

    public void Add(string type, string name)
    {
        _ingredients.Add(type, name);
    }

    public string Get(string type)
    {
        return _ingredients[type];
    }

    public bool Contains(string type)
    {
        return _ingredients.ContainsKey(type);
    }
}

public class Potion
{
    public IngredientBag Ingredients { get; private set;}
    public string Name {get; private set;}        

    public Potion(string name) : this(name, null)
    {

    }

    public Potion(string name, IngredientBag ingredients)
    {
        Name = name;
        Ingredients = ingredients;
    }

    public static Expression<Func<Potion, bool>> 
        ContainsIngredients(string ingredientType, params string[] ingredients)
    {
        var predicate = PredicateBuilder.False<Potion>();
        // Here, I'm accessing p.Ingredients several times in one 
        // expression.  Is there any way to cache this value and
        // reference the cached value in the expression?
        foreach (var ingredient in ingredients)
        {
            var temp = ingredient;
            predicate = predicate.Or (
                p => p.Ingredients != null &&
                p.Ingredients.Contains(ingredientType) &&
                p.Ingredients.Get(ingredientType).Contains(temp));
        }

        return predicate;
    }

}

[STAThread]
static void Main()
{
    var potions = new List<Potion>
    {
        new Potion("Invisibility", new IngredientBag()),
        new Potion("Bonus"),
        new Potion("Speed", new IngredientBag()),
        new Potion("Strength", new IngredientBag()),
        new Potion("Dummy Potion")
    };

    potions[0].Ingredients.Add("solid", "Eye of Newt");
    potions[0].Ingredients.Add("liquid", "Gall of Peacock");
    potions[0].Ingredients.Add("gas", "Breath of Spider");

    potions[2].Ingredients.Add("solid", "Hair of Toad");
    potions[2].Ingredients.Add("gas", "Peacock's anguish");

    potions[3].Ingredients.Add("liquid", "Peacock Sweat");
    potions[3].Ingredients.Add("gas", "Newt's aura");

    var predicate = Potion.ContainsIngredients("solid", "Newt", "Toad")
        .Or(Potion.ContainsIngredients("gas", "Spider", "Scorpion"));

    foreach (var result in 
                from p in potions
                where(predicate).Compile()(p)
                select p)
    {
        Console.WriteLine(result.Name);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-15T22:28:10.070

你考虑[过记忆](http://en.wikipedia.org/wiki/Memoization)吗？

基本思想是这样的；如果你有一个昂贵的函数调用，有一个函数将在第一次调用时计算昂贵的值，但之后返回一个缓存版本。函数如下所示；

```
static Func<T> Remember<T>(Func<T> GetExpensiveValue)
{
    bool isCached= false;
    T cachedResult = default(T);

    return () =>
    {
        if (!isCached)
        {
            cachedResult = GetExpensiveValue();
            isCached = true;
        }
        return cachedResult;

    };
} 
```

这意味着你可以写这个；

```
 // here's something that takes ages to calculate
    Func<string> MyExpensiveMethod = () => 
    { 
        System.Threading.Thread.Sleep(5000); 
        return "that took ages!"; 
    };

    // and heres a function call that only calculates it the once.
    Func<string> CachedMethod = Remember(() => MyExpensiveMethod());

    // only the first line takes five seconds; 
    // the second and third calls are instant.
    Console.WriteLine(CachedMethod());
    Console.WriteLine(CachedMethod());
    Console.WriteLine(CachedMethod()); 
```

作为一般策略，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:39:08.770

你不能简单地将你的布尔表达式写在你从你的 lambda 调用的单独的静态函数中 - 将 p.Ingredients 作为参数传递......

```
private static bool IsIngredientPresent(IngredientBag i, string ingredientType, string ingredient)
{
    return i != null && i.Contains(ingredientType) && i.Get(ingredientType).Contains(ingredient);
}

public static Expression<Func<Potion, bool>>
                ContainsIngredients(string ingredientType, params string[] ingredients)
{
    var predicate = PredicateBuilder.False<Potion>();
    // Here, I'm accessing p.Ingredients several times in one 
    // expression.  Is there any way to cache this value and
    // reference the cached value in the expression?
    foreach (var ingredient in ingredients)
    {
        var temp = ingredient;
        predicate = predicate.Or(
            p => IsIngredientPresent(p.Ingredients, ingredientType, temp));
    }

    return predicate;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T06:02:17.857

好吧，在这种情况下，如果你不能使用 Memoization，你会受到很大的限制，因为你实际上只能将堆栈用作缓存：你无法在你需要的范围内声明一个新变量。我能想到的（我并不是说它会很漂亮）会做你想做的，但保留你需要的可组合性就像......

```
private static bool TestWith<T>(T cached, Func<T, bool> predicate)
{
    return predicate(cached);
}

public static Expression<Func<Potion, bool>>
                ContainsIngredients(string ingredientType, params string[] ingredients)
{
    var predicate = PredicateBuilder.False<Potion>();
    // Here, I'm accessing p.Ingredients several times in one 
    // expression.  Is there any way to cache this value and
    // reference the cached value in the expression?
    foreach (var ingredient in ingredients)
    {
        var temp = ingredient;
        predicate = predicate.Or (
            p => TestWith(p.Ingredients,
                i => i != null &&
                     i.Contains(ingredientType) &&
                     i.Get(ingredientType).Contains(temp));
    }

    return predicate;
} 
```

您可以在需要时将多个 TestWith 调用的结果组合成一个更复杂的布尔表达式 - 在每次调用时缓存适当的昂贵值 - 或者您可以将它们嵌套在作为第二个参数传递的 lambda 中，以处理复杂的深层层次结构。

但是，阅读代码会非常困难，并且由于您可能会在所有 TestWith 调用中引入更多堆栈转换，因此它是否会提高性能将取决于您的 ExpensiveCall() 的成本。

请注意，原始示例中不会有任何内联，正如另一个答案所建议的那样，因为据我所知，表达式编译器没有进行那种级别的优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:43:50.447

在这种情况下，我会说不。我假设编译器可以计算出它使用`p.Ingredients`变量 3 次，并将变量保持在堆栈或寄存器或它使用的任何东西上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T21:44:55.650

湍流智力有完全正确的答案。

我只是想建议您可以从您正在使用的类型中去除一些空值和异常，以便更友好地使用它们。

```
 public class IngredientBag
    {
      private Dictionary<string, string> _ingredients = 
new Dictionary<string, string>();
      public void Add(string type, string name)
      {
        _ingredients[type] = name;
      }
      public string Get(string type)
      {
        return _ingredients.ContainsKey(type) ? _ingredients[type] : null;
      }
      public bool Has(string type, string name)
      {
        return name == null ? false : this.Get(type) == name;
      }
    }

    public Potion(string name) : this(name, new IngredientBag())    {    } 
```

然后，如果您在此结构中有查询参数...

```
Dictionary<string, List<string>> ingredients; 
```

您可以像这样编写查询。

```
from p in Potions
where ingredients.Any(i => i.Value.Any(v => p.IngredientBag.Has(i.Key, v))
select p; 
```

PS，为什么是只读的？

# sql - 动态数据库模式

> ID：66385
> 
> 赞同：69
> 
> 时间：2008-09-15T20:04:52.787
> 
> 标签：sql, database-design, architecture, dynamic-data

为动态逻辑数据库模式提供存储的推荐架构是什么？

澄清一下：如果系统需要为其模式在生产中可能由其用户扩展或更改的模型提供存储，有哪些好的技术、数据库模型或存储引擎可以实现这一点？

几个可能性来说明：

*   通过动态生成的 DML 创建/更改数据库对象
*   创建具有大量稀疏物理列的表并仅使用“覆盖”逻辑模式所需的表
*   创建一个“长而窄”的表，将动态列值存储为行，然后需要对其进行透视以创建一个包含特定实体的所有值的“短而宽”行集
*   使用 BigTable/SimpleDB PropertyBag 类型系统

任何基于现实世界经验的答案将不胜感激

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-09-16T00:11:10.353

你的提议并不新鲜。很多人都尝试过……大多数人都发现他们追求“无限”的灵活性，结果却远比这要少得多。它是数据库设计的“蟑螂汽车旅馆”——数据进入，但几乎不可能将其取出。尝试并概念化为任何类型的约束编写代码，您就会明白我的意思。

最终结果通常是一个更难调试、维护和充满数据一致性问题的系统。情况并非*总是*如此，但通常情况下，事情就是这样结束的。主要是因为程序员没有看到火车残骸的到来，也没有针对它进行防御性编码。此外，通常会得出这样一种情况，即“无限”的灵活性确实没有那么必要。当开发团队收到一份规格说明“天哪，我不知道他们要放什么类型的数据，所以让他们放什么”时，这是一种非常糟糕的“气味”......最终用户很好具有他们可以使用的预定义属性类型（编写通用电话#，

如果你有一个非常优秀的开发团队，并且**非常清楚**在这个设计中你必须克服的问题，你就可以成功地编写出一个设计良好、漏洞不严重的系统。大多数时候。

但是，为什么要从对您不利的赔率开始呢？

不相信我？谷歌“一个真正的查找表”或“单表设计”。一些好的结果： [http ://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:10678084117056](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:10678084117056)

[http://thedailywtf.com/Comments/Tom_Kyte_on_The_Ultimate_Extensibility.aspx?pg=3](http://thedailywtf.com/Comments/Tom_Kyte_on_The_Ultimate_Extensibility.aspx?pg=3)

[http://www.dbazine.com/ofinterest/oi-articles/celko22](http://www.dbazine.com/ofinterest/oi-articles/celko22)

[http://thedailywtf.com/Comments/The_Inner-Platform_Effect.aspx?pg=2](http://thedailywtf.com/Comments/The_Inner-Platform_Effect.aspx?pg=2)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-15T20:05:56.463

MSSQL 中的强类型 xml 字段对我们有用。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-11-19T17:12:58.737

就像其他人所说的那样，除非您别无选择，否则不要这样做。需要这样做的一种情况是，如果您销售的现成产品必须允许用户记录自定义数据。我公司的产品属于这一类。

如果您确实需要允许您的客户这样做，这里有一些提示：
- 创建一个**强大**的管理工具来执行架构更改，并且不允许以任何其他方式进行这些更改。
- 使其成为管理功能；不允许普通用户访问。
- 记录有关每个架构更改的每个细节。这将帮助您调试问题，并且如果客户做了一些愚蠢的事情，它还会为您提供 CYA 数据。

如果你能成功地做这些事情（尤其是第一个），那么你提到的任何架构都可以工作。我的偏好是动态更改数据库对象，因为这允许您在访问存储在自定义字段中的数据时利用 DBMS 的查询功能。其他三个选项需要您加载大量数据，然后在代码中进行大部分数据处理。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-09-26T18:33:43.090

我有类似的要求，并决定使用无模式[MongoDB](http://en.wikipedia.org/wiki/MongoDB)。

> MongoDB（来自“humongous”）是一个开源、可扩展、高性能、无模式、面向文档的数据库，用 C++ 编程语言编写。（维基百科）

强调：

*   具有丰富的查询功能（可能最接近 SQL DB）
*   生产就绪（foursquare，sourceforge 使用它）

Lowdarks（您需要了解的东西，以便您可以正确使用 mongo）：

*   没有交易（实际上它有交易，但只在原子操作上）
*   这个东西在这里：[http ://ehangunderson.com/blog/two-reasons-to-not-use-mongodb/](http://ethangunderson.com/blog/two-reasons-to-not-use-mongodb/)
*   耐用性..主要是酸相关的东西

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-15T21:30:12.237

我在一个真实的项目中做到了：

该数据库由一个表组成，其中一个字段是 50 个数组。它上面设置了一个“单词”索引。所有数据都是无类型的，因此“单词索引”按预期工作。数字字段表示为字符，实际排序已在客户端完成。（如果需要，每个数据类型仍然可以有多个数组字段）。

逻辑表的逻辑数据模式保存在具有不同表行“类型”（第一个数组元素）的同一数据库中。它还支持使用相同“类型”字段的写时复制样式的简单版本控制。

优点：

1.  您可以动态重新排列和添加/删除列，无需转储/重新加载数据库。任何新的列数据都可以在零时间内（实际上）设置为初始值。
2.  碎片最少，因为所有记录和表的大小都相同，有时它会提供更好的性能。
3.  所有表模式都是虚拟的。任何逻辑模式结构都是可能的（甚至是递归的或面向对象的）。
4.  它适用于“一次写入、主要读取、不删除/标记为已删除”的数据（大多数 Web 应用程序实际上都是这样）。

缺点：

1.  仅按全词索引，无缩写，
2.  复杂的查询是可能的，但性能会略有下降。
3.  取决于您首选的数据库系统是否支持数组和单词索引（它已在 PROGRESS RDBMS 中实现）。
4.  关系模型只存在于程序员的脑海中（即只存在于运行时）。

现在我想下一步可​​能是——在文件系统级别实现这样的数据库。这可能相对容易。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-15T20:09:12.650

拥有关系数据库的全部意义在于保持您的数据安全和一致。在您允许用户更改架构的那一刻，您的数据完整性就...

~~如果您需要存储异构数据，例如 CMS 场景，我建议将通过 XSD 验证的 XML 存储在一行中。当然，您会失去性能和轻松的搜索功能，但恕我直言，这是一个很好的权衡。~~

由于是 2016 年，忘记 XML！使用 JSON 存储非关系数据包，并使用适当类型的列作为后端。您通常不需要*在 bag*中按值进行查询，即使许多当代 SQL 数据库本机理解 JSON，这也会很慢。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T15:25:59.343

## 创建 2 个数据库

*   DB1 包含静态表，并代表数据的“真实”状态。
*   DB2 对用户来说是免费的——他们（或您）将不得不编写代码来从 DB1 填充他们奇形怪状的表。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-15T20:11:07.920

在我看来，您真正想要的是某种“元模式”，一种能够描述用于存储实际数据的灵活模式的数据库模式。动态模式更改是敏感的，不是您想要搞砸的，尤其是在允许用户进行更改的情况下。

您不会找到比其他任何数据库都更适合此任务的数据库，因此您最好的选择就是根据其他标准选择一个。例如，您使用什么平台来托管数据库？应用程序是用什么语言编写的？ETC

为了澄清我所说的“元模式”的意思：

```
CREATE TABLE data (
    id INTEGER NOT NULL AUTO_INCREMENT,
    key VARCHAR(255),
    data TEXT,

    PRIMARY KEY (id)
); 
```

这是一个非常简单的示例，您可能会有更具体的需求（并且希望更容易使用），但它确实可以说明我的观点。您应该认为数据库模式本身在应用程序级别是不可变的；任何结构更改都应反映在数据中（即，该模式的实例化）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-15T20:14:06.587

我知道问题中指出的模型已在整个生产系统中使用。我工作的一所大型大学/教学机构正在使用相当大的一个。他们专门使用长窄表方法来映射由许多不同的数据采集系统收集的数据。

此外，谷歌最近通过他们的代码站点发布了他们的内部数据共享协议协议缓冲区，作为开源。以这种方法为模型的数据库系统将非常有趣。

检查以下内容：

[实体-属性-价值模型](http://en.wikipedia.org/wiki/Entity-Attribute-Value_model)

[谷歌协议缓冲区](http://code.google.com/p/protobuf/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-05T19:53:23.437

我知道这是一个古老的话题，但我想它永远不会失去现实。我现在正在开发类似的东西。这是我的方法。我使用 MySQL、Apache、PHP 和 Zend Framework 2 作为应用程序框架的服务器设置，但它应该与任何其他设置一样工作。

这是一个简单的实现指南，您可以从这里进一步发展它。

您需要实现自己的查询语言解释器，因为有效的 SQL 太复杂了。

例子：

```
select id, password from user where email_address = "xyz@xyz.com" 
```

物理数据库布局：

表“规格”：（应缓存在您的数据访问层中）

*   编号：整数
*   parent_id：整数
*   名称：varchar(255)

表“项目”：

*   编号：整数
*   parent_id：整数
*   spec_id：整数
*   数据：varchar(20000)

表“规格”的内容：

*   1, 0, '用户'
*   2, 1, 'email_address'
*   3, 1, '密码'

表“项目”的内容：

*   1, 0, 1, ''
*   2, 1, 2, 'xyz@xyz.com'
*   3, 1, 3, '我的密码'

用我们自己的查询语言翻译的例子：

```
select id, password from user where email_address = "xyz@xyz.com" 
```

标准 SQL 看起来像这样：

```
select 
    parent_id, -- user id
    data -- password
from 
    items 
where 
    spec_id = 3 -- make sure this is a 'password' item
    and 
    parent_id in 
    ( -- get the 'user' item to which this 'password' item belongs
        select 
            id 
        from 
            items 
        where 
            spec_id = 1 -- make sure this is a 'user' item
            and 
            id in 
            ( -- fetch all item id's with the desired 'email_address' child item
                select 
                    parent_id -- id of the parent item of the 'email_address' item
                from 
                    items 
                where 
                    spec_id = 2 -- make sure this is a 'email_address' item
                    and
                    data = "xyz@xyz.com" -- with the desired data value
            )
    ) 
```

您需要将规格表缓存在关联数组或哈希表或类似的东西中，以便从规格名称中获取 spec_id。否则，您将需要插入更多的 SQL 开销来从名称中获取 spec_id，就像在这个片段中一样：

不好的例子，不要使用这个，避免这个，而是缓存规格表！

```
select 
    parent_id, 
    data 
from 
    items 
where 
    spec_id = (select id from specs where name = "password") 
    and 
    parent_id in (
        select 
            id 
        from 
            items 
        where 
            spec_id = (select id from specs where name = "user") 
            and 
            id in (
                select 
                    parent_id 
                from 
                    items 
                where 
                    spec_id = (select id from specs where name = "email_address") 
                    and 
                    data = "xyz@xyz.com"
            )
    ) 
```

我希望您能理解并自己确定该方法对您是否可行。

享受！:-)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-09-16T13:55:48.933

我认为 EAV 方法是最好的方法，但成本很高

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-13T16:39:54.660

在 c2.com wiki 上，探索了[“动态关系”](https://wiki.c2.com/?DynamicRelational)的概念。您不需要 DBA：列和表是 Create-On-Write，除非您开始添加约束以使其更像传统的 RDBMS：随着项目的成熟，您可以逐步“锁定”。

从概念上讲，您可以将每一行视为一个 XML 语句。例如，员工记录可以表示为：

```
<employee lastname="Li" firstname="Joe" salary="120000" id="318"/> 
```

这并不*意味着*它必须被实现为 XML，它只是一个方便的概念化。如果您要求一个不存在的列，例如“SELECT madeUpColumn ...”，它将被视为空白或 null（除非添加的约束禁止这样做）。并且可以使用**SQL**，尽管由于隐含的类型模型而必须小心比较。但除了类型处理之外，动态关系系统的用户会感到宾至如归，因为他们可以利用大部分现有的 RDBMS 知识。现在，如果有人愿意建造它...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T20:12:29.333

在过去，我选择了选项 C——*创建一个“长而窄”的表，将动态列值存储为行，然后需要对其进行透视以创建一个包含特定实体的所有值的“短而宽”行集。*. 但是，我使用的是 ORM，这真的让事情变得很痛苦。我想不出你会如何在 LinqToSql 中做到这一点。我想我必须创建一个哈希表来引用这些字段。

@Skliwz：我猜他对允许用户创建用户定义的字段更感兴趣。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-07-01T20:45:45.667

弹性搜索。如果您正在处理可以按日期分区的数据集，您应该考虑它，您可以将 JSON 用于您的数据，并且不固定使用 SQL 来检索数据。

ES 为您发送的任何新 JSON 字段推断您的架构，无论是自动、带有提示，还是手动您可以通过一个 HTTP 命令（“映射”）定义/更改。虽然它不支持 SQL，但它有一些很棒的查找功能甚至聚合。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-02T17:23:01.517

我知道这是一篇非常古老的帖子，在过去的 11 年中发生了很大变化，但我想我会添加这个，因为它可能对未来的读者有所帮助。我和我的联合创始人创建 HarperDB 的原因之一是在提供完整索引功能的同时，在单个、不重复的数据集中本地完成动态模式。您可以在此处阅读更多信息：
[https ://harperdb.io/blog/dynamic-schema-the-harperdb-way/](https://harperdb.io/blog/dynamic-schema-the-harperdb-way/)

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2008-09-15T20:16:13.100

sql 已经提供了一种更改架构的方法：ALTER 命令。

只需有一个表格，列出不允许用户更改的字段，并为 ALTER 编写一个漂亮的界面。

# java - 通过 JNI 更快的 Math.exp()？

> ID：66402
> 
> 赞同：10
> 
> 时间：2008-09-15T20:06:16.293
> 
> 标签：java, c, optimization, java-native-interface

我需要`Math.exp()`经常从 java 计算，是否有可能让本机版本比**java**`Math.exp()`运行得更快？

我只尝试了 jni + C，但它比普通的**java**慢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-08T16:43:31.520

这已被多次请求（参见例如[此处](https://stackoverflow.com/questions/412019/code-optimizations#412988)）。[这是从这篇博](http://martin.ankerl.com/2007/02/11/optimized-exponential-functions-for-java/)文复制而来的 Math.exp() 的近似值：

```
public static double exp(double val) {
    final long tmp = (long) (1512775 * val + (1072693248 - 60801));
    return Double.longBitsToDouble(tmp << 32);
} 
```

它与具有 2048 个条目和条目之间的线性插值的查找表基本相同，但所有这些都使用 IEEE 浮点技巧。它比我机器上的 Math.exp() 快 5 倍，但如果使用 -server 编译，这可能会有很大差异。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-15T20:22:54.770

+1 编写自己的 exp() 实现。也就是说，如果这*确实*是您的应用程序中的瓶颈。如果您可以处理一些不准确的问题，那么有许多非常有效的指数估计算法，其中一些可以追溯到几个世纪以前。据我了解，Java 的 exp() 实现相当慢，即使对于必须返回“精确”结果的算法也是如此。

哦，不要害怕用纯 Java 编写 exp() 实现。JNI 有很多开销，而且 JVM 能够在运行时优化字节码，有时甚至超出了 C/C++ 能够实现的程度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-15T20:07:01.877

使用 Java 的。

此外，缓存 exp 的结果，然后您可以比再次计算更快地查找答案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-15T20:08:58.877

您还想`Math.exp()`在 C 中包装任何循环调用。否则，Java 和 C 之间的编组开销将压倒任何性能优势。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T20:17:36.310

如果您分批执行它们，您也许可以让它运行得更快。进行 JNI 调用会增加开销，因此您不想为需要计算的每个 exp() 都这样做。我会尝试传递一个包含 100 个值的数组并获取结果以查看它是否有助于提高性能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-15T20:11:44.483

真正的问题是，这是否已成为您的瓶颈？您是否分析过您的应用程序并发现这是导致速度变慢的主要原因？

如果没有，我建议使用 Java 的版本。尽量不要预先优化，因为这只会导致开发速度变慢。您可能会在一个可能不是问题的问题上花费大量时间。

话虽这么说，我认为你的测试给了你答案。如果 jni + C 速度较慢，请使用 java 的版本。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-30T21:21:15.473

[Commons Math3](http://commons.apache.org/proper/commons-math/)附带一个优化版本：`FastMath.exp(double x)`. 它确实显着加快了我的代码速度。

[Fabien](http://chasethedevil.blogspot.ch/2013/04/a-fast-exponential-function-in-java.html)进行了一些测试，发现它的速度几乎是以下速度的两倍`Math.exp()`：

```
 0.75s for Math.exp     sum=1.7182816693332244E7
 0.40s for FastMath.exp sum=1.7182816693332244E7 
```

这是javadoc：

计算 exp(x)，函数结果接近四舍五入。对于 99.9% 的输入值，它将正确四舍五入为理论值，否则会出现 1 个 UPL 错误。

方法：

```
 Lookup intVal = exp(int(x))
    Lookup fracVal = exp(int(x-int(x) / 1024.0) * 1024.0 );
    Compute z as the exponential of the remaining bits by a polynomial minus one
    exp(x) = intVal * fracVal * (1 + z) 
```

准确度：计算以 63 位精度完成，因此结果应正确舍入 99.9% 的输入值，否则 ULP 误差小于 1。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T20:09:52.400

由于 Java 代码将使用即时 (JIT) 编译器编译为本机代码，因此没有理由使用 JNI 调用本机代码。

此外，您不应缓存输入参数为浮点实数的方法的结果。在时间上获得的收益将在使用的空间量上损失很多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T20:10:27.607

使用 JNI 的问题是调用 JNI 所涉及的开销。Java 虚拟机现在已经非常优化，对内置 Math.exp() 的调用会自动优化为直接调用 C exp() 函数，甚至可以优化为直接的 x87 浮点程序集指示。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T20:13:27.880

使用 JNI 会产生一些开销，另请参阅：http: [//java.sun.com/docs/books/performance/1st_edition/html/JPNativeCode.fm.html](http://java.sun.com/docs/books/performance/1st_edition/html/JPNativeCode.fm.html)

因此，正如其他人建议的那样，尝试整理涉及使用 JNI 的操作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T20:18:24.360

编写您自己的，根据您的需求量身定制。

例如，如果所有指数都是 2 的幂，则可以使用位移。如果您使用有限范围或一组值，则可以使用查找表。如果您不需要精确的精度，您可以使用不精确但速度更快的算法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T20:20:06.197

跨 JNI 边界调用会产生成本。

如果您也可以将调用 exp() 的循环移动到本机代码中，以便只有一个本机调用，那么您可能会得到更好的结果，但我怀疑它会比纯 Java 解决方案快得多。

我不知道您的应用程序的详细信息，但如果您有一组相当有限的调用可能参数，您可以使用预先计算的查找表来使您的 Java 代码更快。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T20:21:14.663

exp 有更快的算法，具体取决于您要完成的工作。问题空间是否限制在一定范围内，是否只需要一定的分辨率、精度或准确度等。

如果你很好地定义了你的问题，你可能会发现你可以使用一个带有插值的表格，例如，这将使几乎任何其他算法都被淘汰。

您可以对 exp 应用哪些约束来获得性能权衡？

-亚当

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-15T21:45:07.320

> 我运行了一个拟合算法，拟合结果的最小误差远大于 Math.exp() 的精度。

超越函数总是比加法或乘法慢得多，这是众所周知的瓶颈。如果您知道您的值在一个狭窄的范围内，您可以简单地构建一个查找表（两个排序数组；一个输入，一个输出）。使用 Arrays.binarySearch 查找正确的索引并使用 [index] 和 [index+1] 处的元素插入值。

另一种方法是拆分号码。让我们取例如 3.81 并将其拆分为 3+0.81。现在将 e = 2.718 乘以 3 次，得到 20.08。

现在到 0.81。0 到 1 之间的所有值都与众所周知的指数级数快速收敛

1+x+x^2/2+x^3/6+x^4/24....等

尽可能多地使用精确度；不幸的是，如果 x 接近 1，它会变慢。假设你去 x^4，那么你得到 2.2445 而不是正确的 2.2448

然后将结果 2.781^3 = 20.08 与 2.781^0.81 = 2.2445 相乘，得到结果 45.07，误差为两千分之一（正确：45.15）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-01T10:44:39.730

它可能不再相关，但您知道，在最新版本的 OpenJDK（请参见[此处](http://hg.openjdk.java.net/jdk7u/jdk7u/hotspot/rev/6759698e3140)）中，应该将 Math.exp 设为内部（如果您不知道那是什么，请查看[此处](http://bad-concurrency.blogspot.co.uk/2012/08/arithmetic-overflow-and-intrinsics.html)）。

这将使大多数架构上的性能无与伦比，因为这意味着 Hotspot VM 将在运行时用特定于处理器的 exp 实现替换对 Math.exp 的调用。您永远无法击败这些调用，因为它们针对架构进行了优化......

# javascript - 如何在 Google Chrome 中启动 JavaScript 调试器？

> ID：66420
> 
> 赞同：431
> 
> 时间：2008-09-15T20:07:21.330
> 
> 标签：javascript, google-chrome, debugging, google-chrome-devtools

使用 Google Chrome 时，我想调试一些 JavaScript 代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：409
> 
> 时间：2008-09-15T20:08:09.547

尝试将此添加到您的源：

```
debugger; 
```

它适用于大多数（如果不是所有）浏览器。只需将它放在代码中的某个位置，它就会像断点一样。

* * *

## 回答 #2

> 赞同：320
> 
> 时间：2008-09-15T20:08:22.120

窗户：`CTRL`- `SHIFT`-`J`或 F12

苹果电脑：`⌥</kbd>-`⌘</kbd>-`J```

也可通过扳手菜单（工具 > JavaScript 控制台）获得：

![JavaScript 控制台菜单](https://i.stack.imgur.com/Ktv4E.png)

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2011-02-24T12:12:31.180

Windows 和 Linux：

`Ctrl`++`Shift`键`I`打开开发者工具

`Ctrl`++`Shift`打开`J`开发者工具并将焦点转移到控制台。

`Ctrl`++`Shift`切换`C`检查元素模式。

苹果电脑：

`⌥</kbd> + `⌘</kbd> + `I` keys to open Developer Tools``

`⌥</kbd> + `⌘</kbd> + `J` to open Developer Tools and bring focus to the Console.``

`⌥</kbd> + `⌘</kbd> + `C` to toggle Inspect Element mode.``

[来源](https://developer.chrome.com/devtools)

[其他快捷方式](https://developer.chrome.com/devtools/docs/shortcuts)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-04-05T07:28:36.410

在 Chrome 浏览器中按`F12`功能键以启动 JavaScript 调试器，然后单击“脚本”。

选择顶部的 JavaScript 文件并将断点放置到 JavaScript 代码的调试器。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2010-02-27T10:16:44.243

`Ctrl`++`Shift`打开`J`开发者工具。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-12-03T00:22:41.017

在 Mac 上的 Chrome 8.0.552 中，您可以在菜单*View* / *Developer* / *JavaScript Console* ...下找到它，或者您可以使用`Alt`++ 。`CMD``J`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-04-24T03:47:11.497

在这里，您可以找到访问开发者工具的快捷方式。

[https://developer.chrome.com/devtools/docs/shortcuts](https://developer.chrome.com/devtools/docs/shortcuts)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-11-15T12:16:56.653

`Shift`++`Control`打开`I`开发工具窗口。从左下角的第二张图片（如下所示）将为您打开/隐藏控制台：

[![显示控制台](https://i.stack.imgur.com/ZQ4AG.png)](https://i.stack.imgur.com/ZQ4AG.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-10-27T11:09:45.113

要打开专用的“控制台”面板，请执行以下任一操作：

*   使用键盘快捷键
    *   在 Windows 和 Linux 上：`Ctrl`++`Shift``J`
    *   在 Mac 上：`Cmd`+ `Option`+`J`
*   选择 Chrome 菜单图标，menu -> *More Tools* -> *JavaScript Console*。或者，如果 Chrome 开发者工具已经打开，`press`“控制台”标签。

请参考[这里](https://developer.chrome.com/devtools)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-01-28T23:01:25.163

对于 Mac 用户，请转到 Google Chrome --> menu *View* --> *Developer* --> *JavaScript Console*。

![截屏](https://i.stack.imgur.com/6pidj.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-01-26T11:35:39.403

现在谷歌浏览器已经引入了新功能。通过使用此功能，您可以在 chrome 浏览器中编辑您的代码。（代码位置永久更改）

为此，请按 F12 --> 源选项卡 --（右侧） --> 文件系统 - 请选择您的代码位置。然后 chrome 浏览器会询问你的权限，之后代码会变成绿色。并且您可以修改您的代码，它也会反映您的代码位置（这意味着它将永久更改）

谢谢

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-21T14:27:26.780

我发现访问 javascript 调试器的最有效方法是运行以下命令：

`chrome://inspect`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-20T21:23:46.480

**F12** 打开开发者面板

**CTRL + SHIFT + C** 将打开悬停检查工具，在您悬停时突出显示元素，您可以单击以在元素选项卡中显示它。

**CTRL + SHIFT + I** 打开带有控制台选项卡的开发者面板

**右键单击 > 检查** 右键单击​​任何元素，然后单击“检查”以在开发人员面板的元素选项卡中选择它。

**ESC** 如果您右键单击并检查元素或类似元素并最终在“元素”选项卡中查看 DOM，您可以按**ESC**上下切换控制台，这可能是同时使用两者的好方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-17T00:54:24.963

这些是你看到的工具

请按`F12`

[![开发者工具](https://i.stack.imgur.com/g4ZKf.png)](https://i.stack.imgur.com/g4ZKf.png)

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2013-04-16T13:19:42.773

在 Chrome 的控制台中，您可以执行`console.log(data_to_be_displayed)`.

# c# - 蓝牙信号强度

> ID：66421
> 
> 赞同：6
> 
> 时间：2008-09-15T20:07:24.807
> 
> 标签：c#, wmi, bluetooth

有谁知道如何在 C# 中最好地跟踪蓝牙连接的信号强度？

我正在考虑使用 WMI 查询，但无法追踪封装连接的 WMI 类。

这个想法是，当我将手机放在口袋里时，蓝牙信号会减弱，我的机器会锁定，而我不会受到干扰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T20:53:23.667

蓝牙设备中运行的链路管理器协议 (LMP) 负责链路设置和配置。这一切都是由两个设备交换协议数据单元 (PDU) 完成的。RSSI 的硬件和软件功能在 LMP 级别提供，允许您管理 RSSI 数据。它允许您读取 RSSI 级别并控制 TX RF 输出功率（LMP 功率命令）LMP 进行控制并获取状态信息。

因此，在使用 MS 蓝牙堆栈时，您实际要查找的内容在 LMP 中定义。MS Bluetooth Stack HCI 接口已经支持以下功能，即

HCI_READHCIPARAMETERS
HCI_STARTHARDWARE
HCI_STOPHARDWARE
HCI_SETCALLBACK
HCI_OPENCONNECTION
HCI_READPACKET
HCI_WRITEPACKET
HCI_CLOSECONNECTION

我想微软本可以实现一个名为 HCI_Read_RSSI 的函数，但他们没有。

要获取 RSSI 数据，您必须使用 LMP 来获取您需要的信息。

## 读取 RSSI 数据的示例伪代码

```
// Read HCI Parameters

#include <windows.h>
#include <windev.h>
#include <bt_buffer.h>
#include <bt_hcip.h>
#include <bt_os.h>
#include <bt_debug.h>
#include <svsutil.hxx>
#include <bt_tdbg.h>

unsigned short hci_subversion, lmp_subversion, manufacturer;
unsigned char hci_version, lmp_version, lmp_features[8];

if (BthReadLocalVersion (&hci_version, &hci_subversion, &lmp_version, &lmp_subversion, &manufacturer, lmp_features) != ERROR_SUCCESS) {
            SetUnloadedState ();
            return 0;
      }
WCHAR szLine[MAX_PATH]
unsigned char *pf = lmp_features;

if ((*pf) & 0x02) {
wsprintf (szLine, L"   RSSI");
} 
```

这仅适用于 Microsoft 蓝牙堆栈。这也是 C++ 代码。我从页面底部的专家交流帖子（我知道）中得到了这个。 [http://www.experts-exchange.com/Programming/Wireless_Programming/Bluetooth/Q_21267430.html](http://www.experts-exchange.com/Programming/Wireless_Programming/Bluetooth/Q_21267430.html)

没有特定的功能可以为您完成。

还有这个库可以帮助你，我没有完整地查看文档，但我听说过它的好消息。 [http://inthehand.com/content/32feet.aspx](http://inthehand.com/content/32feet.aspx)

祝你好运！

# php - 如何在每天午夜 12 点旋转图像？

> ID：66422
> 
> 赞同：1
> 
> 时间：2008-09-15T20:07:32.140
> 
> 标签：php, javascript, jquery

我需要在每天午夜 12 点从一组 5-10 张图像中旋转一张图像。我怎样才能使用 JavaScript 或 jQuery 甚至 PHP 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T20:15:36.830

在基本级别上，您要做的是定义一个图像名称数组，然后从给定时间点取天数，然后以图像数量取模（除法后的余数）并访问数组中的索引并设置图片，例如（未经测试的代码）

```
var images = new Array("image1.gif", "image2.jpg", "sky.jpg", "city.png");
var dateDiff = new Date() - new Date(2008,01,01);
var imageIndex = Math.Round(dateDiff/1000/60/60/24) % images.length;
document.GetElementById('imageId').setAttribute('src', images[imageIndex]); 
```

请记住，任何客户端解决方案都将使用客户端的日期和时间，因此如果您对午夜的定义意味着您的时区，那么您需要在 PHP 中的服务器上执行类似的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:22:11.887

它甚至不必在 cron 中：

```
<?php
// starting date for rotation
$startDate = '2008-09-15';
// array of image filenames
$images = array('file1.jpg','file2.jpg',...);

$stamp = strtotime($startDate);
$days = (time() - $stamp) / (60*60*24);
$imageFilename = $images[$days % count($images)]
?>

<img src="<?php echo $imageFilename; ?>"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:22:19.403

*编辑：我完全把这个问题误读为“**不**使用 javascript/PHP”。所以无视这个回应。我不会删除它，以防万一有人疯狂到想要使用这种方法。*

在没有 Javascript、PHP 或任何其他形式的脚本语言的情况下执行此操作可能会很困难。好吧，实际上，它只是非常做作，因为即使是最基本的 JS/PHP 也是微不足道的。

无论如何，要真正回答您的问题，我能想到的使用 vanilla HTML 的唯一方法是设置一个在午夜运行的 shell 脚本。该脚本只会重命名您的文件。使用 cron（在 linux 上）或 Windows 任务计划程序执行此操作，脚本有点像这样：（后面是*狡猾的伪代码，转换为您喜欢的任何内容）*。

```
let number_of_files = 5

rename current.jpg to number_of_files.jpg

for (x = 2 to number_of_files)
    rename x.jpg to (x-1).jpg

rename 1.jpg to current.jpg 
```

在您的 HTML 中，只需执行以下操作：

```
<img src="path/to/current.jpg" /> 
```

每天，current.jpg 都应该变成新的东西。如果您使用任何类型的缓存控制，请确保对其进行更改，使其缓存时间不会超过几个小时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T20:10:52.910

也许我不明白这个问题。
如果您只想更改图像，请编写一个批处理文件/cron 作业并让它每天运行。
如果您想在星期一显示某个图像，而在星期二显示另一个图像，请执行以下操作：

```
<?php
switch(date('w'))
 {
  case '1':
   //Monday
   break;
  case '2':
   //Tuesday:
   break;
...
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T20:10:52.990

我会在午夜后第一次访问时这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T20:16:23.490

这取决于你如何旋转它们——顺序、随机还是什么？

有多种选择。您可以在 PHP 中确定您想要的图像，并动态更改您的`<img>`元素以指向正确的位置。如果您已经动态生成页面，这是最好的。

您始终可以指向单个 URL，该 URL 是一个 PHP 文件，用于确定要显示的图像，然后执行 302 重定向。如果您有不想产生动态生成开销的静态页面，这会更好。

不要让图像 URL 本身提供不同的图像。您将无缘无故地提高缓存命中率，并在应该是静态资源的情况下产生不必要的开销。

Martin，在这种情况下，“旋转”的意思是“定期改变”，而不是“绕轴转动”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T20:20:35.867

这取决于（TM）您想要达到的目标。只想显示“随机”图像？也许这个 javascript 片段会让你开始：

```
var date = new Date();
var day = date.getDate(); // thats the day of month, use getDays() for day of week

document.getElementById('someImage').src = '/images/foo/bar_' + (day % 10) + '.gif'; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T20:24:01.133

我假设“旋转图像”是指“更改使用中的图像”而不是“围绕轴的旋转变换”——一种简单的方法是使用一个哈希表，将日期模 X 映射到图像名称。

```
$imgs = array("kitten.jpg", "puppy.gif","Bob_Dole.png");    
$day_index = 365 * date("Y") + date("Z")

...

<img src="<? $imgs[$day_index % count($imgs)] ?>" /> 
```

（对不起，如果我的语法错误，我真的不知道 PHP））

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T20:41:08.033

设置图像目录。选择七个图像并将它们命名为 0.jpg、1.jpg、2.jpg、3.jpg、4.jpg、5.jpg、6.jpg，使用带有 id 为“rotatingimage”的 HTML 中的图像标签的 mootools Javascript 框架：

```
var d=new Date();
var utc = d.getTime() + (d.getTimezoneOffset() * 60000);
var offset = -10;  // set this to your locale's UTC offset
var desiredTime = utc + (3600000*offset);
new dd = new Date(desiredTime); 
$('rotatingimage').setProperty('src', dd.getDay() + '.jpg'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T00:39:46.493

这是一个每天从目录中选择随机图像的解决方案，这可能比此处发布的其他一些解决方案更容易，因为您只需上传它，而不是编辑数组或名称文件以任意方式。

```
function getImageOfTheDay() {
    $myDir = "path/to/images/";

    // get a unique value for the day/year.
    // 15th Jan 2008 -> 10152008\. 3 Feb -> 10342008, 31 Dec -> 13662008
    $day = sprintf("1%03d%d", date('z'), date('Y'));

    // you could of course get gifs/pngs as well.
    // i'm just doing this for simplicity
    $jpgs = glob($myDir . "*.jpg");
    mt_srand($day);
    return $jpgs[mt_rand(0, count($jpgs) - 1)];
} 
```

唯一的问题是有可能连续两天看到相同的图像，因为这是随机选择的。如果您想按字母顺序依次获取它们，也许可以使用它。*（只更改了最后两行）*

```
function getImageOfTheDay() {
    $myDir = "path/to/images/";
    $day = sprintf("1%03d%d", date('z'), date('Y'));
    $jpgs = glob($myDir . "*.jpg");
    return $jpgs[$day % count($jpgs)];
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T00:55:33.540

已经以多种方式描述了如何旋转图像。如何检测***何时***触发轮换取决于您在做什么（请澄清，人们可以提供更好的答案）。

选项包括：

1.  在“午夜后首次访问”时触发轮换。假设某种启动事件（例如用户访问）
2.  使用操作系统调度功能触发轮换（*nix 上的 cron，Windows 上的 at/task 调度程序）
3.  编写代码来检查时间和旋转

选项 3 存在编码不佳的解决方案可能会过度占用资源的风险。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T20:09:53.430

如果您正在运行 linux 系统，则可以设置[Cron 作业](http://www.sitepoint.com/article/introducing-cron/)，或者如果您在 windows 上，则可以使用 windows 任务调度程序

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T20:16:10.170

你有两个选择。

1.  在 JavaScript 中，如果您有超过 7 张图像，您基本上可以让它根据一周中的某天或一个月中的某天选择一张图像。以图像数组的长度为模的月份中的某天应该可以让您选择正确的数组元素。

2.  您需要一些更有状态的东西来跟踪正在发生的事情......使用 SQL 您可以跟踪何时使用图像并从旋转列表中选择。您还可以使用 PHP 维护的文本文件来跟踪有序列表。

老派的方法是让一个 cron 工作轮换图像，但这些天我会避免这样做。

# java - servlet 是否可以确定发布的数据是否为多部分/表单数据？

> ID：66423
> 
> 赞同：10
> 
> 时间：2008-09-15T20:07:32.700
> 
> 标签：java, servlets, multipartform-data, front-controller

我有一个用于许多不同操作的 servlet，用于[Front Controller 模式](http://java.sun.com/blueprints/patterns/FrontController.html)。有谁知道是否可以判断发回给它的数据是否是 enctype="multipart/form-data"？在我决定之前我无法读取请求参数，因此我无法将请求分派给正确的控制器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-23T21:47:22.557

如果您要尝试使用上面介绍的 request.getContentType() 方法，请注意：

1.  request.getContentType() 可能返回 null。
2.  request.getContentType() 可能不*等于*“multipart/form-data”，但可能只是从它开始。

考虑到这一点，您应该运行的检查是：

```
if (request.getContentType() != null && request.getContentType().toLowerCase().indexOf("multipart/form-data") > -1 ) {
// Multipart logic here
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-09-15T20:13:58.147

是的，`Content-type`用户代理请求中的标头应该包括`multipart/form-data`（至少）HTML4规范中描述的：

[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-15T20:17:15.500

您可以调用方法来获取内容类型。

[http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletRequest.html#getContentType()](http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletRequest.html#getContentType())

根据[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)，内容类型将为“multipart/form-data”。

不要忘记：

1.  request.getContentType() 可能返回 null。

2.  request.getContentType() 可能不等于“multipart/form-data”，但可能只是从它开始。

所以，考虑到这一切：

```
if (request.getContentType() != null && 
    request.getContentType().toLowerCase().indexOf("multipart/form-data") > -1 ) 
{
    << code block >>
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-08-10T12:54:31.567

ServletFileUpload 实现 isMultipartContent()。也许您可以根据您的需要解除此实现（而不是通过开销来创建 ServletFileUpload）。

[http://www.docjar.com/html/api/org/apache/commons/fileupload/servlet/ServletFileUpload.java.html](http://www.docjar.com/html/api/org/apache/commons/fileupload/servlet/ServletFileUpload.java.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T20:19:39.037

至少在*某种程度上*，您必须阅读请求参数才能确定这一点。ServletRequest 类有一个您想要查看的 getContentType 方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-05T12:40:27.753

要扩展[awm129 的答案](https://stackoverflow.com/a/7011086/1529709)- Apache commons 的实现对应于：

```
if (request != null 
        && request.getContentType() != null 
        && request.getContentType().toLowerCase(Locale.ENGLISH).startsWith("multipart/")) {
    ...
} 
```

您可以使用 Apache commons' 将其写得更短`org.apache.commons.lang3.StringUtils`：

```
if (StringUtils.startsWithIgnoreCase(request.getContentType(), "multipart/")) { 
    ... 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-11T06:24:40.390

[https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts()](https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts())

java.util.Collection getParts()

抛出：ServletException - 如果此请求不是 multipart/form-data 类型

# java-me - 在画布之间切换时j2me屏幕闪烁

> ID：66438
> 
> 赞同：2
> 
> 时间：2008-09-15T20:08:47.987
> 
> 标签：java-me, midp, lcdui

我正在使用 j2me 编写手机游戏。在这个游戏中，我使用了多个 Canvas 对象。例如，游戏菜单是一个 Canvas 对象，而实际游戏也是一个 Canvas 对象。我注意到，在某些设备上，当我从一个画布切换到另一个画布时，例如从主菜单切换到游戏，屏幕会瞬间“闪烁”。我正在使用我自己的双缓冲画布。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T02:21:15.657

我想说，使用多个画布通常是不好的设计。在某些手机上，它甚至会崩溃。最好的方法是使用一个跟踪应用程序状态的画布。然后在绘画方法中，您将拥有

```
protected void paint(final Graphics g) {
  if(menu) {
    paintMenu(g);
  } else if (game) {
    paintGame(g);
  }
} 
```

有更好的方法来处理屏幕对象的应用程序状态，这会使设计更简洁，但我认为你明白了 :)

/亚努斯西姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T20:43:14.283

你使用双缓冲吗？如果设备本身不支持双缓冲，您应该定义一个屏幕外缓冲区（图像）并首先对其进行绘制，然后将最终结果绘制到真实屏幕。为您的每个画布执行此操作。这是一个例子：

```
public class MyScreen extends Canvas {
   private Image osb;
   private Graphics osg;
   //...

   public MyScreen()
   {
         // if device is not double buffered
         // use image as a offscreen buffer
         if (!isDoubleBuffered())
         {
            osb = Image.createImage(screenWidth, screenHeight);
            osg = osb.getGraphics();
            osg.setFont(defaultFont);
         }
   }

   protected void paint(Graphics graphics)
   {
      if (!isDoubleBuffered())
      {
         // do your painting on off screen buffer first
         renderWorld(osg);

         // once done paint it at image on the real screen
         graphics.drawImage(osb, 0, 0, Tools.GRAPHICS_TOP_LEFT);
      }
      else
      {
         osg = graphics;
         renderWorld(graphics);
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T17:10:27.603

Hypothetically, using 1 canvas with a sate machine code for your application is a good idea. However the only device I have to test applications on (MOTO v3) crashes at resources loading time just because there's too much code/to be loaded in 1 GameCanvas ( haven't tried with Canvas ). It's as painful as it is real and atm I haven't found a solution to the problem. If you're lucky to have a good number of devices to test on, it is worth having both approaches implemented and pretty much make versions of your game for each device.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T18:28:29.070

如果您正在编写游戏，使用 GameCanvas 类可能是个好主意。对于这样的目的，它要好得多，如果使用得当，它应该可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T22:28:43.173

一种可能的解决方法是使用 Display.callSerially() 同步开关。闪烁可能是由于应用程序在 Canvas 的切换仍在进行时尝试绘制到屏幕造成的。callSerially() 应该等待重绘完成，然后再尝试再次调用 run()。

但这一切都完全取决于手机，因为许多设备没有实现 callSerially()，更不用说遵循官方文档中列出的实现了。我所知道的与 callSerially() 一起正常工作的唯一设备是西门子手机。

另一种可能的尝试是放置一个像 1000 毫秒这样巨大的 Thread.sleep()，确保您事先调用了 setCurrent() 方法。这样，设备可能会在可视组件尝试绘制之前进行更改。

最可能的问题是它是一个设备问题，并且保证对闪烁的修复很简单 - 使用一个 Canvas。可能不是你想听到的。:)

# java - 什么是最好的 OpenGL java 绑定？

> ID：66446
> 
> 赞同：17
> 
> 时间：2008-09-15T20:09:44.693
> 
> 标签：java, user-interface, opengl, performance, swt

我正在尝试为我的 Java SWT 应用程序实现更好的性能，我刚刚发现可以在 SWT 中使用 OpenGL。似乎有不止一种用于 OpenGL 的 Java 绑定。你更倾向哪个？

请注意，我以前从未使用过 OpenGL，并且该应用程序需要在 Windows、Linux 和 Mac OS X 上运行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-15T20:32:06.713

我建议查看[LWJGL](http://lwjgl.org/)，即 LightWeight Java 游戏库。它有 OpenGL 绑定，但它也有 OpenAL 绑定和一些很棒的教程来帮助你入门。

请记住，Swing/SWT 和 OpenGL 通常用于完全不同的事情。您可能最终想要使用两者的组合。试试 LWJGL，看看它与你正在做的事情的契合程度。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-15T20:24:14.580

[JOGL](http://www.opengl.org/resources/bindings/ "opengl.org")

我的理由可以从之前链接的网站引用：

> JOGL 提供对 OpenGL 2.0 规范中的 API 以及几乎所有供应商扩展的完全访问，并与 AWT 和 Swing 小部件集集成。

此外，如果您想获得一些有趣的学习和探索，[Processing](http://processing.org/ "加工")是一个很好的开始方式（Processing 也使用 JOGL 顺便说一句......）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T01:00:30.127

JOGL 可能是唯一值得考虑的选择。请注意，至少有两个选项可以将其集成到 SWT 应用程序中。有一个属于 SWT 的 GLCanvas 和一个属于 AWT 的 GLCanvas。SWT 中的那个不是功能完整的，也没有真正维护。在 SWT_AWT 容器中使用 AWT GLCanvas 要好得多。最近一个项目的一些代码：

```
import org.eclipse.swt.*;
import org.eclipse.swt.layout.*;
import org.eclipse.swt.widgets.*;

import javax.media.opengl.*;
import javax.media.opengl.glu.*;

import org.eclipse.swt.awt.SWT_AWT;
import org.eclipse.swt.events.*;

public class Main implements GLEventListener
{
    public static void main(String[] args) 
    {
        Display display = new Display();
    Main main = new Main();
    main.runMain(display);
    display.dispose();
}

void runMain(Display display)
{
    final Shell shell = new Shell(display);
    shell.setText("Q*bert 3D - OpenGL Exercise");
    GridLayout gridLayout = new GridLayout();
    gridLayout.marginHeight = 0;
    gridLayout.marginWidth = 0;

    shell.setLayout(gridLayout);

    // this allows us to set particular properties for the GLCanvas
    GLCapabilities glCapabilities = new GLCapabilities();

    glCapabilities.setDoubleBuffered(true);
    glCapabilities.setHardwareAccelerated(true);

    // instantiate the canvas
    final GLCanvas canvas = new GLCanvas(glCapabilities);

    // we can't use the default Composite because using the AWT bridge
    // requires that it have the property of SWT.EMBEDDED
    Composite composite = new Composite(shell, SWT.EMBEDDED);
    GridData ld = new GridData(GridData.FILL_BOTH);
    composite.setLayoutData(ld);

    // set the internal layout so our canvas fills the whole control
    FillLayout clayout = new FillLayout();
    composite.setLayout(clayout);

    // create the special frame bridge to AWT
    java.awt.Frame glFrame = SWT_AWT.new_Frame(composite);
    // we need the listener so we get the GL events
    canvas.addGLEventListener(this);

    // finally, add our canvas as a child of the frame
    glFrame.add(canvas);

    // show it all
    shell.open();
    // the event loop.
    while (!shell.isDisposed ()) {
        if (!display.readAndDispatch ()) display.sleep ();
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-05T22:09:49.163

JOGL 将为您提供最佳性能和便携性。但要注意，学习 JOGL 与学习 OpenGL 本质上是一样的，并不容易。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-15T20:19:54.560

就个人而言，我什至不知道除[JOGL](https://jogl.dev.java.net/)之外的 OpenGL 的 Java 绑定——我认为 JOGL 几乎是 Java OpenGL 的标准。

它适用于 Windows、Linux 和 OS X，但您可能需要阅读官方文档以了解有关每个平台中特定问题的一些说明。

请记住，OpenGL 范式与 Swing/AWT 或 Java 2D API 完全不同；OpenGL 不是 Swing 的直接替代品。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-16T23:37:13.787

我们在使用 JOGL 的工作中获得了很多运气。新的 2.0 版本位于[http://jogamp.org/](http://jogamp.org/)（最后一个“旧”版本位于[http://download.java.net/media/jogl/builds/archive/jsr-231-1.1.1a/](http://download.java.net/media/jogl/builds/archive/jsr-231-1.1.1a/)） .

对于带有 SWT 的 JOGL 2，我有一系列教程从[http://wadeawalker.wordpress.com/2010/10/09/tutorial-a-cross-platform-workbench-program-using-java-opengl开始-and-eclipse/](http://wadeawalker.wordpress.com/2010/10/09/tutorial-a-cross-platform-workbench-program-using-java-opengl-and-eclipse/)准确地演示了如何制作跨平台的 JOGL SWT 应用程序，并带有可安装的本机二进制文件。

或者，如果您不想使用 Eclipse RCP，这里有一个更简单的示例，它只使用 JOGL 2 和 SWT 绘制一个三角形。要构建它，请将其放入带有 swt.jar（来自[http://www.eclipse.org/swt/](http://www.eclipse.org/swt/)）和最新的 JOGL autobuild .jar 和 .dll 文件（来自[http://jogamp.org/](http://jogamp.org/)）的项目中. 这个简单示例的唯一问题是，如果没有一些额外的帮助，它就不会是跨平台的——您需要 Eclipse RCP 提供的将多组平台库捆绑到一个项目中的能力。

```
package name.wadewalker.onetriangle;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.opengl.GLCanvas;
import org.eclipse.swt.opengl.GLData;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;

import javax.media.opengl.GL;
import javax.media.opengl.GLProfile;
import javax.media.opengl.GL2;
import javax.media.opengl.GLContext;
import javax.media.opengl.GLDrawableFactory;
import javax.media.opengl.glu.GLU;

public class OneTriangle {

    public static void main(String [] args) {
        GLProfile.initSingleton( true );

        GLProfile glprofile = GLProfile.get( GLProfile.GL2 );

        Display display = new Display();
        Shell shell = new Shell( display );
        shell.setLayout( new FillLayout() );
        Composite composite = new Composite( shell, SWT.NONE );
        composite.setLayout( new FillLayout() );

        GLData gldata = new GLData();
        gldata.doubleBuffer = true;
        // need SWT.NO_BACKGROUND to prevent SWT from clearing the window
        // at the wrong times (we use glClear for this instead)
        final GLCanvas glcanvas = new GLCanvas( composite, SWT.NO_BACKGROUND, gldata );
        glcanvas.setCurrent();
        final GLContext glcontext = GLDrawableFactory.getFactory( glprofile ).createExternalGLContext();

        // fix the viewport when the user resizes the window
        glcanvas.addListener( SWT.Resize, new Listener() {
            public void handleEvent(Event event) {
                setup( glcanvas, glcontext );
            }
        });

        // draw the triangle when the OS tells us that any part of the window needs drawing
        glcanvas.addPaintListener( new PaintListener() {
            public void paintControl( PaintEvent paintevent ) {
                render( glcanvas, glcontext );
            }
        });

        shell.setText( "OneTriangle" );
        shell.setSize( 640, 480 );
        shell.open();

        while( !shell.isDisposed() ) {
            if( !display.readAndDispatch() )
                display.sleep();
        }

        glcanvas.dispose();
        display.dispose();
    }

    private static void setup( GLCanvas glcanvas, GLContext glcontext ) {
        Rectangle rectangle = glcanvas.getClientArea();

        glcanvas.setCurrent();
        glcontext.makeCurrent();

        GL2 gl = glcontext.getGL().getGL2();
        gl.glMatrixMode( GL2.GL_PROJECTION );
        gl.glLoadIdentity();

        // coordinate system origin at lower left with width and height same as the window
        GLU glu = new GLU();
        glu.gluOrtho2D( 0.0f, rectangle.width, 0.0f, rectangle.height );

        gl.glMatrixMode( GL2.GL_MODELVIEW );
        gl.glLoadIdentity();

        gl.glViewport( 0, 0, rectangle.width, rectangle.height );
        glcontext.release();        
    }

    private static void render( GLCanvas glcanvas, GLContext glcontext ) {
        Rectangle rectangle = glcanvas.getClientArea();

        glcanvas.setCurrent();
        glcontext.makeCurrent();

        GL2 gl = glcontext.getGL().getGL2();
        gl.glClear( GL.GL_COLOR_BUFFER_BIT );

        // draw a triangle filling the window
        gl.glLoadIdentity();
        gl.glBegin( GL.GL_TRIANGLES );
        gl.glColor3f( 1, 0, 0 );
        gl.glVertex2f( 0, 0 );
        gl.glColor3f( 0, 1, 0 );
        gl.glVertex2f( rectangle.width, 0 );
        gl.glColor3f( 0, 0, 1 );
        gl.glVertex2f( rectangle.width / 2, rectangle.height );
        gl.glEnd();

        glcanvas.swapBuffers();
        glcontext.release();        
    }
} 
```

# java - 有没有一种简单的方法可以改变 Java/Swing 控件在获得焦点时的行为？

> ID：66455
> 
> 赞同：7
> 
> 时间：2008-09-15T20:10:56.873
> 
> 标签：java, user-interface, swing

对于我使用过的大多数 GUI，当包含文本的控件获得焦点时，控件的全部内容都会被选中。这意味着如果您刚开始输入，您将完全替换以前的内容。

示例：您有使用零值初始化的自旋控制。您选择它并键入“1”控件中的值现在是 1。

使用 Swing，这不会发生。控件中的文本未被选中，并且克拉出现在现有文本的一端或另一端。继续上面的例子：

使用 Swing JSpinner，当您切换到旋转控件时，克拉位于左侧。您键入“1”，控件中的值现在是 10。

这让我（和我的用户）陷入困境，我想改变它。更重要的是，我想全局更改它，以便新行为适用于 JTextField、JPasswordField、JFormattedTextField、JTextArea、JComboBox、JSpinner 等。我发现这样做的唯一方法是将 FocusAdapter 添加到每个控件并覆盖 focusGained() 方法来做正确的事情[tm]。

必须有一种更简单、更不脆弱的方法。请？

编辑：此特定案例的另一条信息。我正在使用的表单是使用 Idea 的表单设计器生成的。这意味着我通常不会真正编写代码来创建组件。可以告诉 Idea 您想自己创建它们，但这是我想避免的麻烦。

座右铭：所有优秀的程序员基本上都是懒惰的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T20:32:04.607

当我过去需要这个时，我已经创建了我想添加“自动清除”功能的组件的子类。例如：

```
public class AutoClearingTextField extends JTextField {
   final FocusListener AUTO_CLEARING_LISTENER = new FocusListener(){
      @Override
      public void focusLost(FocusEvent e) {
         //onFocusLost(e);
      }

      @Override
      public void focusGained(FocusEvent e) {
         selectAll();
      }
   };

   public AutoClearingTextField(String string) {
      super(string);
      addListener();
   }

   private void addListener() {
      addFocusListener(AUTO_CLEARING_LISTENER);      
   }
} 
```

最大的问题是我还没有找到一种“好”的方法来获取所有标准构造函数而不编写覆盖。添加它们并强制调用 addListener 是我发现的最通用的方法。

另一种选择是使用 ContainerListeer 监视顶级容器上的 ContainerEvents 以检测新小部件的存在，并根据已添加的小部件添加相应的焦点侦听器。（例如：如果容器事件是由添加TextField引起的，那么添加一个焦点监听器，它知道如何选择TextField中的所有文本，等等。）如果添加了Container，那么就需要递归添加ContainerListener到那个新的子容器。

无论哪种方式，您都不需要在实际的 UI 代码中处理焦点侦听器——这一切都将在更高级别上得到处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T21:53:12.743

我自己还没有尝试过（不久前才涉足它），但您可能可以通过使用以下方法获取当前的焦点组件：KeyboardFocusManager（有一个静态方法 getCurrentKeyboardFocusManager()）并向其添加 PropertyChangeListener。从那里，您可以确定该组件是否为 JTextComponent 并选择所有文本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T18:09:17.437

可以编写一个将 FocusListener 附加到所需文本字段的单独类。焦点侦听器所做的就是在文本小部件获得焦点时调用 selectAll()。

```
public class SelectAllListener implements FocusListener {
  private static INSTANCE = new SelectAllListener();

  public void focusLost(FocusEvent e) { }

  public void focusGained(FocusEvent e) {
    if (e.getSource() instanceof JTextComponent) {  
      ((JTextComponent)e.getSource()).selectAll();
    }
  };

  public static void addSelectAllListener(JTextComponent tc) {
    tc.addFocusListener(INSTANCE);
  }

  public static void removeSelectAllListener(JTextComponent tc) {
    tc.removeFocusListener(INSTANCE);
  }
} 
```

通过接受 JTextComponent 作为参数，可以将此行为直接添加到 JTextArea、JPasswordField 和所有其他文本编辑组件。这也允许该类将全选添加到可编辑的组合框和 JSpinners，您对文本编辑器组件的控制可能会受到更多限制。可以添加方便的方法：

```
public static void addSelectAllListener(JSpinner spin) {
  if (spin.getEditor() instanceof JTextComponent) {
    addSelectAllListener((JTextComponent)spin.getEditor());
  }
}

public static void addSelectAllListener(JComboBox combo) {
  JComponent editor = combo.getEditor().getEditorComponent();
  if (editor instanceof JTextComponent) {
    addSelectAllListener((JTextComponent)editor);
  }
} 
```

此外，可能不需要删除侦听器方法，因为侦听器不包含对任何其他实例的外部引用，但可以添加它们以使代码审查更顺畅。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T18:30:40.780

在阅读了到目前为止的回复（谢谢！）之后，我将最外面的 JPanel 传递给了以下方法：

```
void addTextFocusSelect(JComponent component){
    if(component instanceof JTextComponent){
        component.addFocusListener(new FocusAdapter() {
                @Override
                public void focusGained(FocusEvent event) {
                    super.focusGained(event);
                    JTextComponent component = (JTextComponent)event.getComponent();
                    // a trick I found on JavaRanch.com
                    // Without this, some components don't honor selectAll
                    component.setText(component.getText());
                    component.selectAll();
                }
            });

    }
    else
    {
        for(Component child: component.getComponents()){
            if(child instanceof JComponent){
                addTextFocusSelect((JComponent) child);
            }
        }
    }
} 
```

有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T20:23:27.123

我知道的唯一方法是创建一个 FocusListener 并将其附加到您的组件。如果您希望此 FocusListener 对应用程序中的所有组件都是全局的，您可以考虑使用面向方面的编程 (AOP)。使用 AOP 可以编写一次代码并将焦点侦听器应用于应用程序中实例化的所有组件，而无需在整个应用程序中复制和粘贴*component.addFocusListener(listener)*代码。

您的切面必须拦截 JComponent 的创建（或您想要添加此行为的子类）并将焦点侦听器添加到新创建的实例。AOP 方法比将 FocusListener 复制并粘贴到整个代码中要好，因为您将其全部保存在一段代码中，并且一旦您决定更改全局行为（例如删除侦听器），就不会造成维护噩梦JSpinners。

有许多 AOP 框架可供选择。我喜欢[JBossAOP](http://www.jboss.org/jbossaop/)，因为它是 100% 纯 Java，但您可能想看看[AspectJ](http://www.eclipse.org/aspectj/)。

# c - 如何在 Win32 C 中将 GMT 转换为 LocalTime？

> ID：66457
> 
> 赞同：2
> 
> 时间：2008-09-15T20:11:02.973
> 
> 标签：c, winapi, timezone

我想将历史上的各种位置/日期/时间从 GMT 转换为当地时间。似乎`SystemTimeToTzSpecificLocalTime`比`FileTimeToLocalFileTime`. 当日期/时间对还包括不同的位置时，转换会变得很棘手。我在[ftp://ftp.iana.org/tz/releases](ftp://ftp.iana.org/tz/releases)找到了一个数据集— 是[ftp://elsie.nci.nih.gov/pub/](ftp://elsie.nci.nih.gov/pub/) — 从历史和空间来看，这似乎很完整，但是它似乎被设计为针对一个时区而不是所有时区进行编译。

`GetDynamicTimeZoneInformation`和`GetTimeZoneInformationForYear`功能仅在 Vista / Server 2008 开始可用，我的机器回到 NT 4.0。我可能会尝试有条件地在较新的系统上使用它们。

是否有一个不错的 C 包可以为我解决 Windows XP 和 NT 4.0 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T20:36:38.607

SystemTimeToTzSpecificLocalTime 是正确的函数，但您需要一种方法来填充 TIMEZONE_INFO 结构的完整数据库。

有关如何从注册表本身构建一组 TIMEZONE_INFO 结构的详细信息，请参阅 egghead cafe 上的此线程：
[http ://www.eggheadcafe.com/software/aspnet/31656478/get-current-time-in-diffe .aspx](http://www.eggheadcafe.com/software/aspnet/31656478/get-current-time-in-diffe.aspx)

为了在立法变更中真正正确，您需要 GetDynamicTimeZoneInformation 和 GetTimeZoneInformationForYear。请参阅[http://msdn.microsoft.com/en-us/library/ms724421(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms724421(VS.85).aspx)。

# c# - 如何在 C# 的 TextBox 中获取光标的列号？

> ID：66475
> 
> 赞同：7
> 
> 时间：2008-09-15T20:12:57.900
> 
> 标签：c#, windows, user-interface

我有一个多行文本框，我想在表单上有一个标签，显示当前行和列的位置，就像 Visual Studio 所做的那样。

我知道我可以使用 GetLineFromCharIndex 获得第 # 行，但我怎样才能在该行上获得第 # 列？

（我真的想要那条线上的光标位置，而不是“列”本身）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T20:26:27.430

```
int line = textbox.GetLineFromCharIndex(textbox.SelectionStart);
int column = textbox.SelectionStart - textbox.GetFirstCharIndexFromLine(line); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:22:22.430

```
textBox.SelectionStart -
textBox.GetFirstCharIndexFromLine(textBox.GetLineFromCharIndex(textBox.SelectionStart)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T20:16:18.250

在我的脑海中，我认为您想要 SelectionStart 属性。

# c# - 通过 System.Xml.XmlWriter 取消转义尖括号

> ID：66479
> 
> 赞同：4
> 
> 时间：2008-09-15T20:13:40.830
> 
> 标签：c#, .net, xml

我正在通过 System.Xml.XmlWriter 编写一个包含一些 XML 的字符串。我被困在使用 WriteString() 和文档中：

> WriteString 执行以下操作：字符 &、< 和 > 分别替换为 &、< 和 >。

我希望这停止，但我似乎找不到任何 XmlWriterSettings 属性来控制这种行为。有哪些解决方法？谢谢！

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T21:10:22.380

尝试在 CDATA 标记之间包装您的真实内容：

<![CDATA[ **这是我的内容**]]>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T21:53:36.423

WriteString 将您的内容写为文字，并且 &、< 和 > 在 XML 文本中是非法的，因此它们被转义。

如果另一端没有逃脱它们，那就是问题所在。

如果要编写未转义的 XML，请使用 WriteRaw。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:15:59.280

> 我坚持使用 WriteString()，

我认为这是你问题的根源。你能解释一下你坚持使用 WriteString 的原因吗？我的直觉是你使用错误的方法来做你想做的事

# wpf - 在使用 Expression Blend 和 Visual Studio 时，如何为设计人员存根数据？

> ID：66486
> 
> 赞同：4
> 
> 时间：2008-09-15T20:14:39.347
> 
> 标签：wpf, visual-studio-2008, xaml, expression-blend

我们正在一个新项目中试用 Visual Studio 2008 和 Expression Blend。目标是将开发人员和设计人员的角色明确定义为独立的，但从开发人员能够直接使用设计人员生成的 XAML 中获益。

在大多数情况下，这很有效，我真的很喜欢这些可能性。我们遇到的一个困难是针对 DataBindings 进行设计。在许多情况下，除非运行应用程序并进行数据库调用，否则 GUI 不会填充行或其他数据结构。因此，设计者无法访问 GUI 的可视化布局。

我想做的是以某种方式创建一些简单的存根或模拟数据，设计人员可以使用这些数据进行设计。最大的目标是让这些存根数据显示在 Expression Blend 中，然后在运行时应用于实际集合。

有没有人找到这样做的可靠方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T21:16:10.960

我建议阅读[这个博客](http://www.galasoft.ch/mydotnet/articles/article-2007091401.html)。最后一种方法似乎效果很好，您的测试数据很好地显示在 Blend 中。请记住，您必须在 DLL 显示数据之前对其进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T17:55:13.850

我会考虑创建 XML 数据岛，以模拟您最终将 UI 绑定到的对象的结构。这样，您的设计人员可以将页面的根元素（或用户控件等）绑定到您的假 XML 数据岛的顶层，并且当您将该数据岛换成真实的 DataContext 时，所有相对路径将保持不变捆绑。

当您准备好时，将进行一定程度的重构以附加到真实对象，但这就是为什么您的开发人员至少应该了解足够的 XAML 以了解如何正确修改绑定。

看起来我上面的评论者有一个指向这个例子的链接。

# javascript - 从 iPhone 网络应用程序检查在线状态

> ID：66492
> 
> 赞同：5
> 
> 时间：2008-09-15T20:15:13.337
> 
> 标签：javascript, iphone, mobile-safari

有没有办法通过网络应用程序检查 iPhone 是否在线。也就是说，在移动 Safari 中，我是否可以检查设备的在线状态以查看是否应该尝试 AJAX 调用。

在 Firefox/常规 WebKit 中，这将是：

```
if(navigator.onLine) 
{
    onlineCode() 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T01:01:54.870

img src="http://aonlinesite.com/a-really-little-image.png" onload="互联网！" onerror="没有互联网！"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T12:13:50.357

对 iPhone 的快速测试表明它可以从 iPhone OS 2.2 使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T20:18:20.007

截至 2008 年 5 月 16 日，相同的代码应该可以在 WebKit 夜间构建中运行。我想这意味着您需要希望 2.1 更新包含一个新的 safari 构建。

[https://bugs.webkit.org/show_bug.cgi?id=19105](https://bugs.webkit.org/show_bug.cgi?id=19105)

# java - Java VNC 库

> ID：66504
> 
> 赞同：5
> 
> 时间：2008-09-15T20:16:35.410
> 
> 标签：java, vnc

是否有 Java 的 VNC 库，我需要构建一个基于 JSP/Servlet 的 VNC 服务器，以允许用户与帮助台共享他们的桌面。我见过 jVNC，但我想自己构建它，用于大学项目。

特别是，我正在寻找可以在另一个基于 servlet 的应用程序中使用的 Java 库。不幸的是，VNC 的源代码在 C 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T20:23:20.057

你看过tightVNC源码吗？它相当简洁 [http://www.tightvnc.com/download.html](http://www.tightvnc.com/download.html)

# c# - 如何处理因实现类而异的静态字段

> ID：66505
> 
> 赞同：5
> 
> 时间：2008-09-15T20:16:44.020
> 
> 标签：c#, java

我一直遇到这个问题。假设我正在制作一个命令行界面（Java 或 C#，我认为问题是一样的，我将在这里展示 C#）。

1.  我定义了一个接口 ICommand
2.  我创建了一个实现 ICommand 的抽象基类 CommandBase，以包含通用代码。
3.  我创建了几个实现类，每个类都扩展了基类（并扩展了接口）。

现在 - 假设接口指定所有命令都实现 Name 属性和 Execute 方法...

对于 Name，我的每个实例类都必须返回一个字符串，该字符串是该命令的名称。该字符串（“HELP”、“PRINT”等）对于相关类是静态的。我希望能够做的是定义：

公共抽象静态常量字符串名称；

但是（遗憾的是）您不能在接口中定义静态成员。

多年来，我一直在为这个问题苦苦挣扎（几乎在我有类似班级的任何地方），因此将在下面发布我自己的 3 个可能的解决方案供您投票。但是，由于它们都不是理想的，我希望有人会发布一个更优雅的解决方案。

* * *

更新：

1.  我无法让代码格式正常工作（Safari/Mac？）。道歉。
2.  我使用的例子是微不足道的。在现实生活中，有时会有几十个实现类和这种半静态类型的几个字段（即实现类的静态）。

3.  我忘了提 - 理想情况下，我希望能够静态查询这些信息：

    字符串名称 = CommandHelp.Name；

我提出的 3 个解决方案中有 2 个要求先实例化该类，然后才能找出丑陋的静态信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T20:22:02.307

您可以考虑使用属性而不是字段。

```
[Command("HELP")]
class HelpCommand : ICommand
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T20:35:32.180

正如您所提到的，没有办法从接口级别强制执行此操作。但是，由于您使用的是抽象类，您*可以*做的是在基类中将属性声明为抽象，这将强制继承类覆盖它。在 C# 中，它看起来像这样：

```
public abstract class MyBaseClass
{
  public abstract string Name { get; protected set; }
}

public class MyClass : MyBaseClass
{
  public override string Name
  {
    get { return "CommandName"; }
    protected set { }
  }
} 
```

（请注意，*受保护的集合*可防止外部代码更改名称。）

这可能不是您正在寻找的东西，但它与我认为您可以得到的一样接近。根据定义，静态字段*不变*；对于给定的类，您根本不能拥有既静态又可覆盖的成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:27:24.527

```
public interface ICommand {
      String getName();
}

public class RealCommand implements ICommand {
     public String getName() {
           return "name";
     }
} 
```

就那么简单。为什么要打扰静态字段？

* * *

观察：不要在抽象类中使用应该在子类中启动的字段（如[David B](https://stackoverflow.com/questions/66505/how-to-handle-static-fields-that-vary-by-implementing-class#66681)建议）。如果有人扩展了抽象类而忘记启动该领域怎么办？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:20:49.190

[建议的解决方案 #1 / 3]

1.  在接口中定义一个抽象属性Name，强制所有实现类实现name属性。
2.  （在 c# 中）将此属性作为抽象添加到基类中。
3.  在实现中像这样实现：

    ```
    public string Name 
    {
      get {return COMMAND_NAME;}
    } 
    ```

    其中 name 是该类中定义的常量。

    优点：

    *   名称本身定义为常量。
    *   接口要求创建属性。

    缺点：

    *   重复（我讨厌）。完全相同的属性访问器代码粘贴到我的每个实现中。为什么不能在基类中避免混乱？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T20:26:29.440

只需将 name 属性添加到基类并将其传递给基类的构造函数，并让派生类的构造函数传入它的命令名称

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T20:33:30.830

[建议的答案 #3 / 3]

我还没有尝试过，它在 Java 中不会那么好（我认为？）但我可以用 Attributes 标记我的类：

[CammandAttribute(Name="HELP")]

然后我可以使用反射来获取静态信息。需要一些简单的辅助方法来使类的客户可以轻松获得信息，但这可以放在基类中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:45:33.610

从设计的角度来看，我认为要求静态实现成员是错误的......静态和非示例字符串之间的性能和内存使用之间的相对差异是最小的。除此之外，我知道在实施过程中，有问题的对象可能会有更大的足迹......

基本问题是，通过尝试设置模型以支持在 C# 的基础或接口级别可用的静态实现成员，我们的选项是有限的……只有属性和方法在接口级别可用。

下一个设计挑战是代码是特定于基础的还是特定于实现的。通过实现，您的模型将在编译时获得一些验证，因为代码必须在所有实现中包含类似的逻辑。有了基础，您的验证将在运行时进行，但逻辑将集中在一个地方。不幸的是，给定的示例是实现特定代码的完美展示案例，因为没有与数据关联的逻辑。

因此，为了这个例子，让我们假设有一些与数据相关的实际逻辑，并且它是广泛的/或复杂的，足以为基类提供展示。撇开基类逻辑是否使用任何实现细节不谈，我们有确保实现静态初始化的问题。我建议在基类中使用受保护的抽象来强制所有实现创建所需的静态数据，这些数据将在编译时进行验证。我使用的所有 IDE 都让这变得非常容易。对于 Visual Studio，只需单击几下鼠标，然后从本质上更改返回值。

回到问题的非常具体的性质并忽略许多其他设计问题......如果你真的必须保持这整个静态数据的性质，并且仍然通过问题的性质限制来强制它......肯定去使用属性的方法，因为有许多副作用可以使用属性。在基类上使用静态成员并在实现上使用静态构造函数来设置名称。现在请记住，您必须在运行时而不是编译时验证名称。基本上，基类上的 GetName 方法需要处理实现未设置其名称时发生的情况。它可能会抛出一个异常，从而非常明显地表明某些东西是由测试/质量保证而不是用户造成的。

就此而言，您始终可以通过反射从类名中生成名称......虽然从长远来看，这可能是一场噩梦......但是它会减少实现所需的代码量，这似乎更重要比任何其他担忧。您也可以在此处使用属性，但是随后您将代码添加到与静态构造函数在时间/精力上等效的实现中，并且当实现不包含该信息时仍然存在待办事项的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T20:28:26.973

我通常做什么（伪）：

```
abstract class:

private const string nameConstant = "ABSTRACT";

public string Name
{
   get {return this.GetName();}
}

protected virtual string GetName()
{
   return MyAbstractClass.nameConstant;
}

----

class ChildClass : MyAbstractClass
{
   private const string nameConstant = "ChildClass";

   protected override string GetName()
   {
      return ChildClass.nameConstant;
   }
} 
```

当然，如果这是其他开发人员将使用的库，那么如果您在属性中添加一些反射以验证当前实例是否确实实现了覆盖或抛出异常“未实现”，那也没有什么坏处。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T20:29:20.637

[建议的解决方案 #2 / 3]

*   创建一个私有成员变量名。
*   在接口中定义一个抽象属性 Name。
*   像这样在基类中实现属性：

    ```
    public string Name
    { 
      get {return Name;}
    } 
    ```

*   在调用抽象基类构造函数时，强制所有实现将名称作为构造函数参数传递：

    ```
    public abstract class CommandBase(string commandName) : ICommand
    {
      name = commandName;
    } 
    ```

*   现在我的所有实现都在构造函数中设置了名称：

    ```
    public class CommandHelp : CommandBase(COMMAND_NAME) {} 
    ```

优点：

*   我的访问器代码集中在基类中。
*   名称被定义为常量

缺点

*   Name 现在是一个实例变量——我的 Command 类的每个实例都会创建一个新引用，而不是共享一个静态变量。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T20:30:28.497

我的回答将与 Java 有关，因为这是我所知道的。接口描述行为，而不是实现。此外，静态字段与类相关，而不是实例。如果您声明了以下内容：

```
interface A { abstract static NAME }
class B { NAME = "HELP" }
class C { NAME = "PRINT" } 
```

那么这段代码怎么知道要链接到哪个NAME：

```
void test(A a) {
    a.NAME;
} 
```

我建议如何实现这一点，是以下方法之一：

*   类名约定，基类从类名派生名称。如果你想偏离这个，直接覆盖接口。
*   基类有一个构造函数，其名称为
*   使用注释并通过基类强制它们的存在。

然而，一个更好的解决方案可能是使用枚举：

```
public enum Command {
    HELP { execute() }, PRINT { execute() };
    abstract void execute();
} 
```

这更简洁，并且允许您使用 switch 语句，并且 NAME 将很容易派生。但是，您无法扩展选项运行时的数量，而是根据您可能甚至不需要的场景描述。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-22T21:17:45.840

像这样的东西怎么样：

```
abstract class Command {
   abstract CommandInfo getInfo();
}

class CommandInfo {
  string Name;
  string Description;
  Foo Bar;
}

class RunCommand {
  static CommandInfo Info = new CommandInfo() { Name = "Run", Foo = new Foo(42)  };

  override commandInfo getInfo() { return Info; }
} 
```

现在您可以静态访问信息：

```
RunCommand.Info.Name; 
```

从你的基类：

```
getInfo().Name; 
```

# php - 水平翻转图像

> ID：66518
> 
> 赞同：1
> 
> 时间：2008-09-15T20:17:52.160
> 
> 标签：php

我需要翻转图像，使角色朝向正确的方向。正如他们所说，这需要“即时”完成。

我遇到的问题是，对于 Gif 图像，我似乎失去了透明度。（背景变白）

下面是代码：（或者有人可以给我一个很好的例子）

```
$img = imagecreatefromgif("./unit.gif");

$size_x = imagesx($img);
$size_y = imagesy($img);

$temp = imagecreatetruecolor($size_x, $size_y);

imagecolortransparent($img, imagecolorallocate($img, 0, 0, 0));
imagealphablending($img, false);
imagesavealpha($img, true);

$x = imagecopyresampled($temp, $img, 0, 0, ($size_x-1), 0, $size_x, $size_y, 0-$size_x, $size_y);

if ($x) {
    $img = $temp;
}
else {
    die("Unable to flip image");
}

header("Content-type: image/gif");
imagegif($img);
imagedestroy($img); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T20:25:24.170

这不应该：

```
imagecolortransparent($img, imagecolorallocate($img, 0, 0, 0));
imagealphablending($img, false);
imagesavealpha($img, true); 
```

...是这样的：

```
imagecolortransparent($temp, imagecolorallocate($img, 0, 0, 0));
imagealphablending($temp, false);
imagesavealpha($temp, true); 
```

请注意，您应该为您创建的 $temp 图像调用这些函数，而不是源图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:45:40.223

最终结果：

```
$size_x = imagesx($img);
$size_y = imagesy($img);

$temp = imagecreatetruecolor($size_x, $size_y);

imagecolortransparent($temp, imagecolorallocate($temp, 0, 0, 0));
imagealphablending($temp, false);
imagesavealpha($temp, true);
$x = imagecopyresampled($temp, $img, 0, 0, ($size_x-1), 0, $size_x, $size_y, 0-$size_x, $size_y);
if ($x) {
    $img = $temp;
}
else {
    die("Unable to flip image");
}

header("Content-type: image/gif");
imagegif($img);
imagedestroy($img); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:23:44.800

如果你能保证 ImageMagick 的存在，你可以使用他们的`mogrify -flop`命令。它保留了透明度。

# antlr - 有人知道如何正确安装 ANTLR 以使用 .Net 吗？

> ID：66525
> 
> 赞同：1
> 
> 时间：2008-09-15T20:18:31.410
> 
> 标签：antlr

ANTLR 可以使用 StringTemplate 或任何我希望它喜欢 Yacc/Bison 的文本输出 C#，还是只输出到 java？从我看过的例子来看，它似乎是一个非常以 java 为中心的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T07:44:08.320

我刚刚开始了一篇关于如何在 .NET 环境中准确安装和使用 ANTLR 的小系列文章，因为关于这个问题的大多数文档都有些过时了。请参阅[C# 的 ANTLR，第 1 部分](http://geekswithblogs.net/bitsnpieces/archive/2008/12/02/antlr-for-c-part-1-installation.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T17:47:35.237

ANTLR IDE 有一个选项，您可以通过它在 Java 和 C# 代码生成之间切换。

更好的是，请参阅这篇文章（指定代码生成部分）：

[http://www.antlr2.org/doc/csharp-runtime.html](http://www.antlr2.org/doc/csharp-runtime.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-09T00:38:30.813

现在有一个 NuGet 包可以为您完成所有工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:37:04.393

[您可以从这里](http://antlr.org/download/antlr-3.0.1.tar.gz)下载最新的源代码作为 tar 文件。C# 运行时（二进制）也可以直接[在此处](http://antlr.org/download/DOT-NET-runtime.zip)获得。

您在寻找哪种解决方案？

# java - Java EE SqlResultSetMapping 语法

> ID：66528
> 
> 赞同：3
> 
> 时间：2008-09-15T20:18:56.450
> 
> 标签：java, syntax, jpa, jakarta-ee

我有以下 Java 6 代码：

```
 Query q = em.createNativeQuery( 
        "select T.* " +
        "from Trip T join Itinerary I on (T.itinerary_id=I.id) " +
        "where I.launchDate between :start and :end " +
        "or ADDDATE(I.launchDate, I.equipmentPullDayOfTrip) between :start and :end",
        "TripResults" );

    q.setParameter( "start", range.getStart(), TemporalType.DATE );
    q.setParameter( "end", range.getEnd(), TemporalType.DATE );

    @SqlResultSetMapping( name="TripResults",
        entities={
            @EntityResult( entityClass=TripEntity.class ),
            @EntityResult( entityClass=CommercialTripEntity.class )
        }
    ) 
```

我在最后一个右括号上收到语法错误。Eclipse 给出：“插入 EnumBody 以完成块语句”和“插入枚举标识符以完成 EnumHeaderName”。来自 javac 的类似语法错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T20:37:09.337

Hibernate 注释文档 ( [http://www.hibernate.org/hib_docs/annotations/reference/en/html_single/](http://www.hibernate.org/hib_docs/annotations/reference/en/html_single/) ) 建议这应该是一个类级别的注释，而不是在您的代码中内联。事实上，当我将该代码粘贴到我的 IDE 中并移动它时，当注释是内联时会出现编译错误，但当我将它放在类声明上方时就会消失：

```
@SqlResultSetMapping( name="TripResults",
        entities={
            @EntityResult( entityClass=TripEntity.class ),
            @EntityResult( entityClass=CommercialTripEntity.class )
        }
    )
public class Foo {
   public void bogus() {
      Query q = em.createNativeQuery( 
        "select T.* " +
        "from Trip T join Itinerary I on (T.itinerary_id=I.id) " +
        "where I.launchDate between :start and :end " +
        "or ADDDATE(I.launchDate, I.equipmentPullDayOfTrip) between :start and :end",
        "TripResults" );

      q.setParameter( "start", range.getStart(), TemporalType.DATE );
      q.setParameter( "end", range.getEnd(), TemporalType.DATE );
   }
} 
```

...显然我没有证据表明上面的代码真的可以工作。我只验证它不会导致编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T20:51:21.270

您的示例直接来自 API 文档，不幸的是，这些文档的介绍很糟糕。

您的注释应该放在某个类上，可能是您将在其中创建查询以使用结果集映射的类。然而，这个注解的放置位置实际上并不重要。您的 JPA 提供者实际上将维护所有这些映射的全局列表，因此无论您在哪里定义它，您都可以在任何地方使用它。

这是注释方法的一个缺点（与在 XML 中指定事物相反）。JPA 中的许多其他事物（即命名查询）都是以相同的方式定义的。它看起来好像在被定义的事物和它被注释的类之间存在某种联系，而实际上并非如此。

# java - System.gc() 什么时候做某事？

> ID：66540
> 
> 赞同：129
> 
> 时间：2008-09-15T20:20:17.287
> 
> 标签：java, garbage-collection

我知道垃圾收集在 Java 中是自动化的。但我明白，如果你调用`System.gc()`你的代码，JVM 可能会或可能不会决定在那个时候执行垃圾收集。这如何精确地工作？JVM 在看到 GC 时究竟决定执行（或不执行）GC 的依据/参数是什么`System.gc()`？

是否有任何示例在这种情况下将其放入您的代码中是个好主意？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-09-15T20:23:41.663

在实践中，它*通常*决定进行垃圾回收。答案因许多因素而异，例如您正在运行的 JVM、它所处的模式以及它使用的垃圾收集算法。

我不会在您的代码中依赖它。如果 JVM 即将抛出 OutOfMemoryError，调用 System.gc() 不会阻止它，因为垃圾收集器会在它达到那个极端之前尝试尽可能多地释放它。我唯一一次看到它在实践中使用是在 IDE 中，它附加到用户可以单击的按钮上，但即使在那里它也不是非常有用。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-09-15T20:36:59.993

我能想到调用 System.gc() 的唯一示例是在分析应用程序以搜索可能的内存泄漏时。我相信分析器会在拍摄内存快照之前调用此方法。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2008-09-15T20:27:20.720

您无法控制 Java 中的 GC——VM 决定。我从来没有遇到过*需要*`System.gc()`的情况。由于调用只是简单地暗示 VM 进行垃圾收集并且它还进行了完整的垃圾收集（多代堆中的旧代和新代），因此它实际上可能导致消耗**更多**的 cpu 周期而不是必要的。*`System.gc()`*

 ***在某些情况下，向 VM 建议它现在进行完整收集可能是有意义的，因为您可能知道应用程序将在接下来的几分钟内处于空闲状态，然后才会发生繁重的工作。例如，在应用程序启动期间初始化大量临时对象之后（即，我刚刚缓存了大量信息，我知道一分钟左右我不会获得太多活动）。想想像eclipse这样的IDE启动——它做了很多初始化，所以也许在初始化之后立即进行一次完整的gc是有意义的。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-05-11T10:36:33.910

Java 语言规范不保证 JVM 会在您调用`System.gc()`. 这就是“可能会或可能不会决定在那个时候进行 GC”的原因。

现在，如果您查看作为 Oracle JVM 主干的[OpenJDK 源代码](http://openjdk.java.net/)，您会看到对 的调用`System.gc()`确实会启动 GC 循环。如果您使用其他 JVM，例如 J9，您必须查看他们的文档以找出答案。例如，Azul 的 JVM 有一个持续运行的垃圾收集器，因此调用`System.gc()`不会做任何事情

其他一些答案提到在 JConsole 或 VisualVM 中启动 GC。基本上，这些工具远程调用`System.gc()`.

通常，您不想从代码中启动垃圾回收周期，因为它会混淆应用程序的语义。您的应用程序执行一些业务操作，JVM 负责内存管理。你应该把这些问题分开（不要让你的应用程序做一些内存管理，专注于业务）。

但是，在少数情况下调用 to`System.gc()`是可以理解的。例如，考虑微基准。没有人希望在微基准测试中发生 GC 循环。因此，您可以在每次测量之间触发 GC 循环，以确保每次测量都以空堆开始。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-09-15T20:36:49.200

如果你打电话，你需要非常小心`System.gc()`。调用它会给您的应用程序添加不必要的性能问题，并且不能保证实际执行收集。实际上可以`System.gc()`通过 java 参数禁用显式`-XX:+DisableExplicitGC`。

我强烈建议您阅读[Java HotSpot Garbage Collection](http://java.sun.com/javase/technologies/hotspot/index.jsp)中提供的文档，以获取有关垃圾收集的更多详细信息。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-09-15T20:25:10.117

`System.gc()`由虚拟机实现，它的作用是特定于实现的。例如，实施者可以简单地返回并且什么都不做。

至于何时发出手动收集，您可能想要这样做的唯一时间是当您放弃包含大量较小收集的大型收集时 - `Map<String,<LinkedList>>` 例如 - 您想尝试并获得性能命中然后在那里，但在大多数情况下，你不应该担心它。GC 比你更了解——可悲的是——大多数时候。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-02-10T20:25:53.137

如果您使用直接内存缓冲区，即使您的直接内存不足，JVM 也不会为您运行 GC。

如果你调用`ByteBuffer.allocateDirect()`并且你得到一个 OutOfMemoryError ，你会发现这个调用在手动触发 GC 后很好。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-16T18:36:52.597

大多数 JVM 会启动 GC（取决于 -XX:DiableExplicitGC 和 -XX:+ExplicitGCInvokesConcurrent 开关）。但是该规范的定义不太好，以便以后更好地实现。

规范需要澄清：[Bug #6668279: (spec) System.gc() 应该表明我们不推荐使用并且不保证行为](http://bugs.sun.com/view_bug.do?bug_id=6668279)

RMI 和 NIO 在内部使用 gc 方法，它们需要同步执行，目前正在讨论中：

[错误 #5025281：允许 System.gc() 触发并发（不是 stop-the-world）完整收集](http://bugs.sun.com/view_bug.do?bug_id=5025281)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-04-27T12:05:48.767

`Garbage Collection`很好`Java`，如果我们在桌面/笔记本电脑/服务器中执行用 java 编码的软件。您可以致电`System.gc()`或`Runtime.getRuntime().gc()`在`Java`.

请注意，这些调用都不能保证做任何事情。它们只是 jvm 运行垃圾收集器的建议。是否运行 GC 取决于 JVM。所以，简短的回答：我们不知道它什么时候运行。更长的答案：如果有时间，JVM 会运行 gc。

我相信，这同样适用于 Android。但是，这可能会降低您的系统速度。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-10-31T03:53:53.283

我们永远不能强制垃圾收集。System.gc 只是建议使用 vm 进行垃圾收集，但是，该机制到底什么时候运行，没人知道，这是 JSR 规范中规定的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-02-10T13:20:10.290

通常，VM 会在抛出 OutOfMemoryException 之前自动进行垃圾收集，因此添加显式调用应该无济于事，除非它可能会将性能影响移到更早的时刻。

但是，我想我遇到了一个可能相关的案例。不过我不确定，因为我还没有测试它是否有任何效果：

当您对文件进行内存映射时，我相信当足够大的内存块不可用时，map() 调用会引发 IOException。我认为，map() 文件之前的垃圾收集可能有助于防止这种情况发生。你怎么看？

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-07-25T12:01:22.337

如果您想知道您`System.gc()`是否被调用，您可以使用新的 Java 7 update 4 在 JVM 执行垃圾收集时获得通知。

我不是 100% 确定[GarbageCollectorMXBean](http://docs.oracle.com/javase/7/docs/api/java/lang/management/GarbageCollectorMXBean.html)类是在 Java 7 更新 4 中引入的，因为我在发行说明中找不到它，但我在[javaperformancetuning](http://www.javaperformancetuning.com/news/newtips138.shtml) .com 站点中找到了信息

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-03-07T09:00:13.667

花时间测试各种垃圾收集设置有很多话要说，但正如上面提到的，这样做通常没有用处。

我目前正在从事一个涉及内存有限环境和相对大量数据的项目——有一些大数据将我的环境推到了极限，即使我能够降低内存使用量理论上它应该可以正常工作，但我仍然会收到堆空间错误——详细的 GC 选项向我显示它正在尝试垃圾收集，但无济于事。在调试器中，我可以执行 System.gc() 并且果然会有“大量”可用内存......不是很多额外的，但足够了。

因此，我的应用程序调用 System.gc() 的唯一时间是当它即将进入将分配处理数据所需的大缓冲区的代码段时，并且对可用空闲内存的测试表明我不是保证拥有它。特别是，我正在查看一个 1gb 环境，其中至少 300mb 被静态数据占用，大部分非静态数据与执行相关，除非正在处理的数据恰好是至少 100-200 MB来源。这都是自动数据转换过程的一部分，因此从长远来看，数据都存在相对较短的时间。

不幸的是，虽然有关调整垃圾收集器的各种选项的信息是可用的，但它似乎主要是一个实验过程，并且不容易获得了解如何处理这些特定情况所需的较低级别的细节。

尽管如此，即使我使用 System.gc()，我仍然继续使用命令行参数进行调整，并设法将我的应用程序的整体处理时间提高了相对显着的数量，尽管无法克服处理更大的数据块造成的绊脚石。话虽如此，System.gc() 是一个工具....一个非常不可靠的工具，如果您不小心使用它，您会希望它不会经常工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-15T20:32:20.427

当运行显式 GC 很好时，我想不出一个具体的例子。

一般来说，运行显式 GC 实际上弊大于利，因为显式 gc 会触发完整的收集，因为它遍历每个对象需要更长的时间。如果这个显式 gc 最终被重复调用，它很容易导致应用程序运行缓慢，因为需要花费大量时间来运行完整的 GC。

或者，如果使用堆分析器检查堆并且您怀疑库组件正在调用显式 GC，则可以将其关闭，并将：gc=-XX:+DisableExplicitGC 添加到 JVM 参数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-09-21T04:44:57.090

根据 Bruce Eckel 在 Java 中的思考，显式**System.gc()**调用的一个用例是当您想要强制完成时，即调用**finalize**方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-07-06T09:57:38.280

当 system.gc 工作时，它将停止世界：所有响应都停止，因此垃圾收集器可以扫描每个对象以检查是否需要删除它。如果应用程序是一个 Web 项目，所有请求都会停止，直到 gc 完成，这将导致您的 Web 项目暂时无法工作。

# oracle - 如何从 Lisp 运行 Oracle plsql 过程？

> ID：66542
> 
> 赞同：4
> 
> 时间：2008-09-15T20:20:18.800
> 
> 标签：oracle, stored-procedures, plsql, lisp, clojure

我该如何开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-06T04:37:41.407

我找到了使用 Clojure 实现这一目标的最简单方法。这是示例代码：

```
 (ns example
  (:require [clojure.contrib.sql :as sql])
  (:import  [java.sql Types]))

(def devdb {:classname "oracle.jdbc.driver.OracleDriver"
            :subprotocol "oracle"
            :subname "thin:username/password@localhost:1509:devdb"
            :create true})

(defn exec-ora-stored-proc [input-param db callback]
  (sql/with-connection db
    (with-open [stmt (.prepareCall (sql/connection) "{call some_schema.some_package.test_proc(?, ?, ?)}")]
      (doto stmt
        (.setInt               1 input-param)
        (.registerOutParameter 2 Types/INTEGER)
        (.registerOutParameter 3 oracle.jdbc.driver.OracleTypes/CURSOR)
        (.execute))
      (callback (. stmt getInt 2) (. stmt getObject 3)))))

(exec-ora-stored-proc
 123 ;;input param value
 devdb
 (fn [err-code res-cursor]
   (println (str "ret_code: " err-code))
   ;; prints returned refcursor rows
   (let [resultset (resultset-seq res-cursor)]
     (doseq [rec resultset]
       (println rec))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:35:16.380

您需要一个到 Oracle SQL 数据库的接口。正如 Bob 所指出的，Allegro CL 有这样一个界面。

[GNU CLISP 显然也带有一个数据库接口。](http://clisp.cons.org/impnotes/oracle.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T07:26:28.950

从 Common Lisp 程序中执行 Oracle 的最直接的方法是使用[CLSQL](http://clsql.b9.com/)。还有很多其他的包可以用来处理来自 Common Lisp 的数据库。看看[Cliki 的数据库页面](http://www.cliki.net/database)

# c - 以跨平台方式查找 ac 二进制文件的函数名称的最简单方法是什么？

> ID：66544
> 
> 赞同：1
> 
> 时间：2008-09-15T20:20:27.943
> 
> 标签：c, symbols

我想编写一个小实用程序来调用 C 共享库中的任意函数。用户应该能够列出所有导出的函数，类似于 objdump 或 nm 所做的。我检查了这些实用程序的来源，但它们令人生畏。如果 dl 库也具有此功能，则无法在 google 上找到足够的信息。

（澄清编辑：我不想只调用一个事先知道的函数。我会欣赏你回答中的示例片段。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T20:33:38.287

好吧，我将稍微谈谈 Windows。从 DLL 导出的 C 函数不包含有关类型、名称或参数数量的信息——我也不相信您可以确定给定函数的调用约定。

为了比较，看看 National Instrument 的 LabVIEW 编程环境。您可以从 DLL 导入函数，但在使用给定函数之前，您必须手动输入参数的类型和名称。如果此限制可以，请编辑您的问题以反映这一点。

我不知道 *nix 环境有什么可能。

编辑：关于你的澄清。如果您不提前知道该函数是什么，那么您在 Windows 上就会被搞砸，因为通常您将无法确定函数采用的参数的数量和类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:28:40.513

这可能接近您正在寻找的内容：http: [//python.net/crew/theller/ctypes/](http://python.net/crew/theller/ctypes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:34:07.800

你可以试试 ParaDyn 的 SymtabAPI。它使您可以获取共享库（或可执行文件）中的所有符号并查看它们的类型、偏移量等。它都包含在一个相当不错的 C++ 接口中，并且可以在许多平台上运行。它还提供对二进制重写的支持，您可以在运行时使用它来执行您正在谈论的事情。

网页在这里：

[http://www.paradyn.org/html/symtab2.1-features.html](http://www.paradyn.org/html/symtab2.1-features.html)

文档在这里：

[http://ftp.cs.wisc.edu/paradyn/releases/release5.2/doc/symtabProgGuide.21.pdf](http://ftp.cs.wisc.edu/paradyn/releases/release5.2/doc/symtabProgGuide.21.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T20:53:39.360

一个标准的 API 是 dlopen/dlsym API；AFAIK 它是由 Linux 上的 GNU libc 和 Mac OS X 的标准 C 库 (libSystem) 实现的，它可能由 MinGW 或其他兼容包在 Windows 上实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T14:19:07.390

只有明智的解决方案（无需重新发明轮子）似乎使用 libbfd。缺点是它的文档很少，而且对于我的目的来说有点臃肿。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T21:13:29.203

nm 和 objdump 的源代码可用。如果您想从规范开始，那么 ELF 就是您要研究的内容。

/艾伦

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T00:34:04.730

我在 Perl 中写过类似的东西。在 Win32 上运行 dumpbin /exports，在 POSIX 上运行 nm -gP。然后，由于它是 Perl，因此使用正则表达式解释结果： / _(\S+)@\d+/ 用于 Win32（stdcall 函数）和 /^(\S+) T/ 用于 POSIX。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-15T23:45:36.467

哎呀！您已经触及了非常依赖于平台的编程主题之一。在 windows 上，你有 DLL，在 linux 上，你有`ld.so`,`ld-linux.so`和 mac os x's `dyld`。

# installation - 安装演示项目 - 最佳实践

> ID：66594
> 
> 赞同：1
> 
> 时间：2008-09-15T20:26:26.010
> 
> 标签：installation, windows-installer

使用 Windows Installer（针对 XP 和 Vista），是否有在您的应用程序中安装演示项目和文件的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T00:39:26.963

根据在 Vista/XP 上安装的经验，我建议...

1、将源代码/项目/解决方案文件安装到 Vista 的“用户”目录中。这样，当用户打开演示并编译时，他们就有了生成输出文件的写入权限。如果您将文件放入 Vista 下的“Program Files”目录中，则您没有写入权限，因此编译将失败。

2，将解决方案的快捷方式添加到桌面或开始菜单，以便用户无需知道确切位置即可访问它。在 Vista/XP 下，当您安装到“用户”/“文档和设置”目录时，很难找到已安装的文件，因为它们被放置在一个不显示的目录中，除非您在文件资源管理器中选择“显示隐藏文件” .

3，我建议您使用发布者证书对安装程序进行签名，以便当用户在 Vista 上获得 UAC 对话框时，他们可以看到发布者的名称并更有可能继续该过程。

4，目前 Visual Studio 2005/2008 之间的差距约为 50%/50%，因此请确保您提供项目/解决方案文件的两个版本。或者，只需提供 VS2005 文件并让用户使用 VS2008 中的向导进行升级。

# linux - 什么包包括 AB Ubuntu 中的 Apache 服务器基准测试工具

> ID：66606
> 
> 赞同：84
> 
> 时间：2008-09-15T20:27:54.757
> 
> 标签：linux, apache, ubuntu

我正在尝试找到[ab - 用于 Ubuntu 的 Apache HTTP 服务器基准测试工具](http://httpd.apache.org/docs/2.0/programs/ab.html)，我希望有一个可以为它安装的包。我决定我需要对我的应用程序进行一些简单的负载测试。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2008-09-15T20:29:06.533

```
% sudo apt-get install apache2-utils
```

Ubuntu 中的 command-not-found 软件包提供了一些巧妙的功能，如果您键入无法解析为可执行文件（或 bash 函数或其他任何内容）的命令，它将查询您的 apt 源并找到包含二进制文件的软件包试图执行。所以，在这种情况下，我`ab`在命令提示符下输入：

```
 % ab
The program 'ab' is currently not installed.  You can install it by typing:
sudo apt-get install apache2-utils
bash: ab: command not found 

```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-07-29T12:17:48.733

另一种搜索丢失文件的方法，例如，如果您使用 zsh，想要禁用 command-not-found（当您错过命令名时会减慢速度），或者正在寻找不是可执行文件的文件：

```
$ sudo aptitude install apt-file
$ sudo apt-file update
$ apt-file search bin/ab 
```

# php - 如何在 php 中创建站点并让它生成静态版本？

> ID：66610
> 
> 赞同：20
> 
> 时间：2008-09-15T20:28:08.080
> 
> 标签：php, html, wget

对于我拥有的特定项目，不允许使用服务器端代码。如何在 php 中创建网站（带有包含、条件等），然后将其转换为可以提供给客户的静态 html 网站？

更新：感谢所有建议 wget 的人。这就是我用的。我应该指定我在 PC 上，所以我从这里获取了 Windows 版本：http: [//gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-15T20:34:31.433

如果您有可用的 Linux 系统，请使用[wget](http://www.gnu.org/software/wget/)：

```
wget -k -K  -E -r -l 10 -p -N -F -nH http://website.com/ 
```

选项

*   -k ：将链接转换为相对链接
*   -K ：保留文件的原始版本，没有 wget 进行的转换
*   -E ：将 html 文件重命名为 .html（如果它们还没有 htm(l) 扩展名）
*   -r : recursive……当然我们想要做一个递归副本
*   -l 10 ：递归的最大级别。如果你有一个非常大的网站，你可能需要放一个更高的数字，但 10 级应该足够了。
*   -p ：为每个页面下载所有必要的文件（css、js、图像）
*   -N ：打开时间戳。
*   -F ：从文件中读取输入时，强制将其视为 HTML 文件。
*   -nH ：默认情况下，wget 将文件放在以站点主机名命名的目录中。这将禁止创建这些主机名目录并将所有内容放在当前目录中。

资料来源：[Jean-Pascal Houde 的博客](http://blog.jphoude.qc.ca/2007/10/16/creating-static-copy-of-a-dynamic-website/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T20:29:58.340

构建您的站点，然后使用[wget](http://www.gnu.org/software/wget/)或[lwp-mirror 之](http://search.cpan.org/dist/libwww-perl/bin/lwp-mirror)类的镜像工具获取静态副本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T20:39:22.407

我过去通过添加：

```
ob_start(); 
```

在页面顶部，然后在页脚中：

```
$page_html = ob_get_contents();
ob_end_clean();
file_put_contents($path_where_to_save_files . $_SERVER['PHP_SELF'], $page_html); 
```

在将 HTML 烘焙到文件中之前，您可能希望将 .php 扩展名转换为 .html。如果您需要使用变量生成多个页面，一个非常简单的选择是在文件名中附加所有 GET 变量的 md5sum，您只需在 HTML 中更改它们。所以你可以转换：

```
somepage.php?var1=hello&var2=hullo 
```

到

```
somepage_e7537aacdbba8ad3ff309b3de1da69e1.html 
```

丑陋但有效。

有时您可以使用 PHP 生成 javascript 来模拟某些功能，但这不能很容易地自动化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T20:29:55.313

正常创建站点，然后使用爬虫软件生成 HTML 副本。

[HTTrack](http://www.httrack.com/)是我以前用过的软件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T20:31:25.390

一种方法是像往常一样在 PHP 中创建站点，并让脚本实际抓取网页（通过 HTTP - 您可以使用 wget 或编写另一个仅使用带有 URL 的 file() 的 php 脚本）并将它们保存到“完成”后的公共网站位置。然后，当您决定再次更改页面时，您可以再次运行脚本。当您有一个缓慢变化的数据库和大量流量时，此方法非常有用，因为您可以消除实时站点上的所有 SQL 查询。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T20:42:19.373

如果你使用 modx 它有一个内置的函数来导出静态文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T20:48:45.970

如果您有许多页面，包含各种请求变量等等，那么其他评论者提到的爬虫工具之一（wget、lwp-mirror 等）可能是最简单、最强大的解决方案。

但是，如果您需要获取的页面数量很少，或者至少是*可管理*的，那么您有一些不需要任何第三方工具的选项（并不是因为它们是第三方就应该打折它们）。

1.  您可以在命令行上使用 php 将其直接输出到文件中。

    `php myFile.php > myFile.html`

    使用这种方法可能会很痛苦（尽管您可以将其全部放入 shell 脚本中），并且它不允许您以相同的方式传递变量（例如：`php myFile.php?abc=1`不会工作）。

2.  您可以使用另一个 PHP 文件作为“构建”脚本，其中包含您想要的所有 URL 的列表，然后通过`file_get_contents()`or抓取它们并将它们`file()`写入本地文件。使用这种方法，您还可以使用它来检查文件是否已更改（`md5_file()`应该适用），因此您将知道应该给客户什么，如果他们只想要更新。

3.  继 #2 之后，在将输出写入文件之前，扫描它以查找本地 url，然后将它们添加到要下载的文件列表中。当您在那里时，更改这些 url 以链接到您最终将命名您的输出的内容，以便您最终拥有一个正常运行的网络。请注意 - 如果这听起来不错，您可能可以使用已经存在的工具之一并为您执行此操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-15T22:52:04.647

或者，您可以使用 (Win|Web)HTTrack ( [Website](http://www.httrack.com/) ) 来获取静态页面。HTTrack 甚至更正文件和文档的链接以匹配静态输出。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T20:32:28.867

我在我自己的网站上为某些保证不会更改的页面执行此操作——我只是运行一个可以被煮沸的 shell 脚本（警告：bash 伪代码）：

```
find site_folder -name \*.static.php -print -exec Staticize {} \; 
```

静态化为：

```
# This replaces .static.php with .html
TARGET_NAME="`dirname "$1"`/"`basename "$1" .static.php`".html
php "$1" > "$TARGET_NAME" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T21:01:51.697

wget 可能是最完整的方法。如果您无法访问它，并且您有一个基于模板的布局，您可能想要考虑使用 Savant 3。我强烈推荐 Savant 3，而不是 Smarty 等其他模板系统。

Savant 的重量很轻，使用 PHP 作为模板语言，而不是一些专有的子语言。您要查找的命令是 fetch()，它将“编译”您的模板并将其放置在您可以输出的变量中。

[http://www.phpsavant.com/](http://www.phpsavant.com/)

# c# - 线程安全的 foreach 枚举列表

> ID：66622
> 
> 赞同：11
> 
> 时间：2008-09-15T20:29:54.770
> 
> 标签：c#, multithreading

我需要枚举对象的通用 IList<>。列表的内容可能会发生变化，例如被其他线程添加或删除，这将终止我的枚举，并显示“集合已修改；枚举操作可能无法执行”。

在 IList<> 上执行线程安全 foreach 的好方法是什么？最好不要克隆整个列表。无法克隆列表引用的实际对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T20:33:15.137

克隆列表是最简单和最好的方法，因为它可以确保您的列表不会从您下面更改。如果列表太大而无法克隆，请考虑在其周围放置一个锁，在读取/写入它之前必须对其进行锁定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T20:32:46.540

没有这样的操作。你能做的最好的就是

```
 lock(collection){
    foreach (object o in collection){
       ...
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T20:35:32.760

您的问题是枚举不允许 IList 更改。这意味着您在浏览列表时必须避免这种情况。

想到了几种可能性：

*   克隆列表。现在每个枚举器都有自己的副本可以处理。
*   序列化对列表的访问。使用锁确保在枚举时没有其他线程可以修改它。

或者，您可以编写自己的 IList 和 IEnumerator 实现，以实现所需的并行访问。不过，恐怕这并不简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T20:36:22.927

```
ICollection MyCollection;
// Instantiate and populate the collection
lock(MyCollection.SyncRoot) {
  // Some operation on the collection, which is now thread safe.
} 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.collections.icollection.syncroot.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-15T20:45:10.537

你会发现这是一个非常有趣的话题。

最好的方法依赖于 ReadWriteResourceLock，由于所谓的 Convoy 问题，它曾经有很大的性能问题。

我发现处理该主题的最佳文章是[Jeffrey](http://msdn.microsoft.com/en-us/magazine/cc163599.aspx) Richter 的这篇文章，它公开了自己的高性能解决方案方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T01:47:53.273

所以要求是：您需要在不复制的情况下枚举 IList<> 同时添加和删除元素。

你能澄清一些事情吗？插入和删除是否只发生在列表的开头或结尾？如果可以在列表中的任何位置进行修改，那么当在枚举的当前元素附近或附近删除或添加元素时，枚举应该如何表现？

这当然可以通过创建一个可能具有整数索引的自定义 IEnumerable 对象来实现，但前提是您可以控制对 IList<> 对象的所有访问（用于锁定和维护枚举的状态）。但是在最好的情况下，多线程编程是一项棘手的工作，这是一个复杂的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T20:31:41.987

Forech 取决于集合不会改变的事实。如果您想遍历一个可以更改的集合，请使用正常的 for 构造并准备好非确定性行为。锁定可能是一个更好的主意，具体取决于您在做什么。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-06T20:54:20.457

简单索引数据结构（如链表、b 树或哈希表）的默认行为是按从第一个到最后一个的顺序进行枚举。在迭代器已经超过该点之后在数据结构中插入一个元素或插入一个迭代器到达后将枚举的元素不会导致问题，并且应用程序可以检测到此类事件并在以下情况下进行处理应用程序需要它。为了检测集合中的变化并在枚举过程中抛出错误，我只能想象某人的（坏）想法，即做他们认为程序员想要的事情。事实上，微软已经修复了他们的集合以正常工作。他们在 .NET 4.0 中调用了他们闪亮的新的完整集合 ConcurrentCollections (System.Collections.Concurrent)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T20:33:51.420

将列表包装在锁定对象中以进行读取和写入。如果你有一个合适的锁，你甚至可以一次迭代多个读取器，它允许多个并发读取器但也允许单个写入器（当没有读取器时）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-22T13:41:53.410

我最近花了一些时间对一个大型应用程序进行多线程处理，并且在处理跨线程共享的对象列表时遇到了很多问题。

在许多情况下，您可以使用旧的 for 循环并立即将对象分配给一个副本以在循环内使用。请记住，写入列表对象的所有线程都应该写入对象的不同数据。否则，请按照其他贡献者的建议使用锁或副本。

例子：

```
foreach(var p in Points)
{
    // work with p...
} 
```

可以替换为：

```
for(int i = 0; i < Points.Count; i ++)
{
   Point p = Points[i];
   // work with p...
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-16T18:40:00.730

这是我最近不得不处理的事情，对我而言，这实际上取决于您对列表的处理方式。

If you need to use the list at a point in time (given the number of elements currently in it) AND another thread can only ADD to the end of the list, then maybe you just switch out to a FOR loop with a counter. At the point you grab the counter, you're only seeing X numbers of elements in the list. You can walk through the list (while others are adding to the end of it) . . . should not cause a problem.

Now, if the list needs to have items taken OUT of it by other threads, or CLEARED by other threads, then you'll need to implement one of the locking mechanisms mentioned above. Also, you may want to look at some of the newer "concurrent" collection classes (though I don't believe they implement IList - so you may need refactor for a dictionary).

# svn - 颠覆标签和分支

> ID：66633
> 
> 赞同：2
> 
> 时间：2008-09-15T20:31:20.040
> 
> 标签：svn, branch, tags

有没有人想出比通常推荐的更好的技术来管理颠覆中的标签和分支（称为“标签”和“分支”的并行目录）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T01:50:35.293

我们使用“主干、标签、分支和流”策略。

“主干”是应该放置生产中的最新版本的地方。

“标签”是在流完成时发生“复制到”的地方，我们需要存储流的状态以用于存档目的。它还允许开发从特定点继续。

“分支”是指发生与主流开发完全不同的事情。通常，分支非常罕见。

“流”是我们最常用的。开发流是基于任务的焦点，例如特定修复或开发工作的流（例如，更改请求的完成）。允许流相互合并，但不同的流根据 svn 策略进行排序。例如，我们有一个用于 cr 版本的流，另一个用于推出应用程序支持版本的流。由于 CR 流除了自己的更改之外还必须包含应用程序支持修复，因此它的排名更高。排名较高的流将较低的流（根据需要）合并到其中。最后，流变为生产就绪。它被标记，然后“复制到”主干，然后将其用作（通常，尽管有时使用标签）作为进一步流的基础。

然而，流的最佳用途是用于完成不到两周的短期任务。这些流可以快速合并为多个更高级别的流，然后再合并到任何其他更高级别的流中。例如，由于应用程序支持低于 cr，任何应用程序支持快速修复都可以复制到流中，然后进行处理，合并到应用程序支持，然后再合并到 cr 流中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T20:45:40.940

使用存储库命名空间来传达分支/标签/等信息，本质上是 SVN 模型；如果您想要的是不同的模型，那么您可能真的想要 SVN 以外的东西。

SVN 中缺少像 CVS 样式标签这样的元数据是一个有意的设计决定。无论您在树中选择什么样的分支/标签/项目排列，都将减少为用于每个目的的并行目录集。剩下的就是为你的分支和标签选择正确的命名策略，让你更清楚。

我喜欢的一个约定是完全重量级分支和轻量级“树枝”之间的分离。我工作的小组的惯例是长期开发在一个分支中进行，并且发布工程师必须了解每个分支并对其部分负责，但是任何工程师都可以创建一个短期树枝作为暂存空间对于一个太大而无法放入一次签入但又不足以需要发布工程支持的问题。这里的 Twigs 存在于与分支类似的单独的并行“twigs”目录中，命名约定通常包含创建者的用户 ID 和 twig 打算在其中解决的问题的错误 ID 号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T20:34:56.690

除了在拥有分支时拥有并行目录之外，您唯一可以做的另一件事是，只要您想在其中一个分支上工作，就在两个分支之间进行 SVN 切换。也许你应该澄清你想在这个系统上“更好”什么，人们可以提出建议。

# c# - C# 中的命名空间

> ID：66635
> 
> 赞同：3
> 
> 时间：2008-09-15T20:31:28.230
> 
> 标签：c#

我正在使用一个 ASP.NET MVC 项目，每次我将一个类添加到一个文件夹时，它都会产生非常长的命名空间。

**示例**：

```
Project = Tully.Saps.Data  
Folder = DataAccess/Interfaces  
Namespace = Tully.Saps.Data.DataAccess.Interfaces

Folder = DataAccess/MbNetRepositories  
Namespace = Tully.Saps.Data.DataAccess.MbNetRepositories 
```

**问题**：
最好不要单独使用命名空间并将 using 子句添加到访问它的类中，或者将命名空间更改为 Tully.Saps.Data 以用于此项目中的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T20:35:34.957

不理会它们并添加使用。您在手动更改类似的东西时遇到麻烦（更难调试，与其他项目不一致，等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T20:35:45.003

你想如何处理它真的取决于你。如果您只打算访问一个名称空间的成员一次或两次，那么添加“using”语句对您来说并没有多大用处。

如果您要多次使用它，那么减少命名空间链可能会使事情更容易阅读。

如果您只是想在逻辑上将文件分组在一起，而不创建新的命名空间，您可以随时更改命名空间，这样它就不会添加新的文件夹名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T20:44:18.400

根据 FXCop，我同意：

> **避免使用少数类型的命名空间**
> 
> 一个命名空间通常应该有**五种**以上的类型。

也（这适用于“单一命名空间”的建议——这*几乎*等同于没有命名空间）

> **在命名空间中声明类型**
> 
> 应在命名空间内定义类型以避免重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:54:14.837

*   命名空间

.Namespaces 帮助我们在我们的对象模型或我们的应用程序中定义一组实体的“范围”。这使它们成为软件设计决策而不是文件夹结构决策。例如，在 MVC 应用程序中，拥有 Model/View/Controller 文件夹和相关的命名空间是很有意义的。因此，虽然在某些情况下，文件夹结构可能与我们决定在开发中使用的命名空间模式相匹配，但这不是必需的，也可能不是我们想要的。每个命名空间都应根据具体情况决定

*   使用语句

为命名空间定义 using 语句是一个单独的决定，具体取决于该命名空间中的对象在代码中被引用的频率，并且不应以任何方式影响我们的命名空间创建实践。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T03:52:52.333

别管它。这是您的 IDE 如何决定您的编码风格的一个很好的例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T03:59:41.677

仅仅因为您使用的工具 (Visual Studio) 决定每个文件夹都需要一个新的命名空间并不意味着您需要这样做。
我个人倾向于将我的“数据”项目保留为单个命名空间。如果我有一个名为“Model”的子文件夹，我不希望这些文件在 Something.Data.Model 命名空间中，我希望它们在 Something.Data 中。

# python - 装饰父类方法

> ID：66636
> 
> 赞同：1
> 
> 时间：2008-09-15T20:31:33.750
> 
> 标签：python, oop, inheritance

我想创建一个具有父类方法的子类，其中该方法是子类中的“classmethod”，而**不是**父类中的“classmethod”。

本质上，我正在尝试完成以下任务：

```
class foo(Object):
    def meth1(self, val):
        self.value = val

class bar(foo):
    meth1 = classmethod(foo.meth1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T20:34:53.307

你想达到什么目的？如果我在实时 Python 代码中看到这样的构造，我会考虑击败原来的程序员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T20:53:20.190

我也不完全确定您想要的确切行为是什么，但假设您希望 bar.meth1(42) 等同于 foo.meth1 是 bar 的类方法（其中“self”是类），那么您可以通过以下方式实现：

```
def convert_to_classmethod(method):
    return classmethod(method.im_func)

class bar(foo):
    meth1 = convert_to_classmethod(foo.meth1) 
```

classmethod(foo.meth1) 的问题是 foo.meth1 已经被转换为方法，第一个参数有特殊含义。您需要撤消此操作并查看底层函数对象，重新解释“自我”的含义。

我还提醒说，这是一件很奇怪的事情，因此可能会给阅读您的代码的任何人造成混淆。您可能最好通过不同的解决方案来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T21:02:08.060

所提出的问题对我来说似乎很奇怪：我不明白为什么有人愿意这样做。您可能误解了 Python 中的“类方法”是什么（它与 Java 中的静态方法有点不同）。

一个普通的方法或多或少只是一个函数，它的第一个参数（通常称为“self”）是一个类的实例，并被调用为“.”。

类方法或多或少只是一个函数，它的第一个参数（通常称为“cls”）是一个类，并且可以作为“.”调用。或作为“.”。

考虑到这一点，以及上面显示的代码，如果有人创建了 bar 的实例并在其上调用 meth1，您会期望发生什么？

```
bar1 = bar()
bar1.meth1("xyz") 
```

当调用 meth1 的代码时，会传递两个参数“self”和“val”。我猜你希望“xyz”被传递给“val”，但你认为什么被传递给“self”？它应该是 bar1 实例吗（在这种情况下，不需要覆盖）？还是应该是类栏（那么这段代码会做什么）？

# java - Java中的快速失败最终子句

> ID：66643
> 
> 赞同：5
> 
> 时间：2008-09-15T20:31:53.330
> 
> 标签：java, exception, fault-tolerance

有没有办法从 finally 子句中检测到异常正在被抛出？

请参见下面的示例：

```
 try {
    // code that may or may not throw an exception
} finally {
    SomeCleanupFunctionThatThrows();
    // if currently executing an exception, exit the program,
    // otherwise just let the exception thrown by the function
    // above propagate
} 
```

还是忽略其中一个例外是您唯一能做的？

在 C++ 中，它甚至不允许您忽略其中一个异常，而只是调用 terminate()。大多数其他语言使用与 java 相同的规则。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-15T20:38:26.153

设置一个标志变量，然后在 finally 子句中检查它，如下所示：

```
boolean exceptionThrown = true;
try {
   mightThrowAnException();
   exceptionThrown = false;
} finally {
   if (exceptionThrown) {
      // Whatever you want to do
   }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-15T20:42:55.393

如果您发现自己这样做，那么您的设计可能有问题。“finally”块的想法是，无论方法如何退出，您都希望完成某些事情。在我看来，您根本不需要 finally 块，而应该只使用 try-catch 块：

```
try {
   doSomethingDangerous(); // can throw exception
   onSuccess();
} catch (Exception ex) {
   onFailure();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:34:58.983

如果一个函数抛出并且你想捕获异常，你必须将函数包装在一个 try 块中，这是最安全的方法。所以在你的例子中：

```
try {
    // ...
} finally {
    try {
        SomeCleanupFunctionThatThrows();
    } catch(Throwable t) { //or catch whatever you want here
        // exception handling code, or just ignore it
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:38:46.823

你的意思是你希望 finally 块根据 try 块是否成功完成而采取不同的行动？

如果是这样，您总是可以执行以下操作：

```
boolean exceptionThrown = false;
try {
    // ...
} catch(Throwable t) {
    exceptionThrown = true;
    // ...
} finally {
    try {
        SomeCleanupFunctionThatThrows();
    } catch(Throwable t) { 
        if(exceptionThrown) ...
    }
} 
```

不过，这变得非常复杂……您可能想考虑一种方法来重组您的代码，以使这样做变得不必要。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-15T20:34:05.290

不，我不相信。catch 块将在 finally 块之前运行完成。

```
try {
    // code that may or may not throw an exception
} catch {
// catch block must exist.
finally {
    SomeCleanupFunctionThatThrows();
// this portion is ran after catch block finishes
} 
```

否则，您可以添加异常代码将使用的 synchronize() 对象，您可以检查 finally 块，这将帮助您确定是否在单独的线程中运行异常。

# javascript - 谷歌地图风格滚动任何人？

> ID：66649
> 
> 赞同：19
> 
> 时间：2008-09-15T20:32:19.677
> 
> 标签：javascript, jquery, ajax

我正在寻找一些能够滚动图像的 JavaScript 插件（最好是 jQuery），就像[谷歌地图](http://maps.google.com)的工作方式一样。

我可以使图像可拖动，但即使父 div 是`overflow:hidden`.

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-06-23T06:24:44.860

（我在这个现已死去的派对上迟到了，但是，嘿，我通过搜索找到了这个页面，所以......）

mooware 建议的 Scrollview 插件对我不起作用。

然而**Dragscrollable**做到了：http: [//plugins.jquery.com/project/Dragscrollable](http://plugins.jquery.com/project/Dragscrollable)

[试用演示](http://hitconsultants.com/dragscroll_scrollsync/scrollpane.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T20:38:00.193

查看[谷歌地图图像切割](http://www.casa.ucl.ac.uk/software/googlemapimagecutter.asp)器它可以拍摄任何图像或数码照片并将其切割成显示在谷歌地图上的瓷砖。可能是一种快速的方法来做你需要的......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-08-20T02:06:07.117

我参加聚会可能有点晚了，但我只是在寻找同样的东西。我偶然发现的是[jquery](http://code.google.com/p/jquery-scrollview/)的滚动视图，它运行完美，并且完全可以为溢出的 div 执行类似谷歌地图的拖动到滚动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T20:34:41.480

您可以使用 google maps api...它们允许您将其与自定义图像一起使用。您可以选择控件是否显示。

编辑：找到了一个关于如何做到这一点的不错的教程。 [http://mapki.com/wiki/Add_Your_Own_Custom_Map](http://mapki.com/wiki/Add_Your_Own_Custom_Map)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-15T20:51:39.757

[有关底层技术的良好描述，请查看 Pragmatic Programmers 的书Pragmatic Ajax](http://pragprog.com/titles/ajax/pragmatic-ajax)的第 4 章（如果我没记错的话）。

您将看到图像切片和切块是如何在幕后工作的。和变焦。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T20:40:27.817

这与 javascript 关系不大，而与[CSS 编码](http://www.w3.org/TR/CSS2/visufx.html)关系更大。

尝试仅使用 HTML 和 CSS 进行一些实验以正确剪辑图像，然后添加 javascript 以移动它。

如果您无法使用 HTML 进行剪辑，或者使用 javascript 发布最简单的问题演示，请在此处进行调试。

如果没有代码，我们将在黑暗中拍摄。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T20:35:33.653

谷歌地图使用分割成块的图像，当用户在不同方向平移时动态加载这些图像。谷[歌地图图像切割](http://www.casa.ucl.ac.uk/software/googlemapimagecutter.asp)器保罗迪克森提到的是你想要的工具。

如果您只想平移一张大图像，而不是将图像分割成块的额外复杂性，那么您应该使用[剪辑](http://www.w3.org/TR/CSS21/visufx.html#propdef-clip)属性而不是使用 CSS 溢出属性。如果我没记错的话，所有值得考虑的浏览器都支持这一点，直到 IE4。

需要注意的一点：CSS2.1 规范显示了用逗号分隔的 rect 值的示例。但是，IE6 不支持此功能（也许 IE7 也不支持）。但是，所有其他浏览器都可以理解不带逗号的版本。所以而不是

```
clip: rect(5px, 40px, 45px, 5px); 
```

你应该使用

```
clip: rect(5px 40px 45px 5px); 
```

为了兼容性。

您需要在 <img> 元素周围将容器 <div> 设置为 position:relative，然后将其设置为 position: absolute。

所以基本技术是在用户拖动时更新 top 和 left 值，将它们与定义的视图宽度和高度一起使用到图像上来创建适当的 rect() 字符串，并更新 top、left 和 clip <img> 元素的 style 属性的属性。

不要做我所做的，并在 rect() 字符串中的值之后省略“px”。我花了很长时间才意识到为什么它不起作用:-)

# objective-c - 使用 QTKit 设置电影元数据

> ID：66654
> 
> 赞同：4
> 
> 时间：2008-09-15T20:33:09.300
> 
> 标签：objective-c, macos, quicktime, qtkit

我正在尝试将旧的 QuickTime 框架代码转换为 OS X 上基于 Cocoa 的 64 位 QTKit，这意味着我无法随时直接调用 C 函数。具体来说，我正在尝试找到一种使用 QTKit 编写 QuickTime VR 电影的方法，因为它们需要一些特殊的元数据来设置显示控制器。我怎样才能用 QTKit 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T05:52:49.377

如果您*必须*深入研究 C API，您可以通过将 QuickTime 特定代码移动到单独的 32 位进程中来解决对 32 位构建的限制。我们在 Windows 上执行此操作，并且效果很好...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T01:51:26.557

据我从 QTKit 文档中可以看出，没有办法在直接的 QTKit 可可调用中做到这一点。您需要[使用 Quicktime-C API 来执行此操作](http://www.cocoadev.com/index.pl?QTKitAddMetaData)，这当然不适用于 64 位应用程序。

在尝试将使用 Quicktime 的 32 位应用程序转换为 64 位应用程序时，我多次遇到此类问题。希望 Quicktime X 将拥有功能更全面的 QTKit API 集。

# java - 单元测试中的unicode字符串文字问题

> ID：66668
> 
> 赞同：1
> 
> 时间：2008-09-15T20:34:40.263
> 
> 标签：java, macos, unicode, encoding

我有一个 JUnit 测试，测试将字符串添加到 Dictionary 自定义类型。在 Linux/Windows 机器上，其他所有人都可以正常工作，但是，作为我商店中第一个使用 mac 的开发人员，这个单元测试对我来说失败了。违规行是使用 unicode 字符串文字的地方：

```
 dict.add( "Su字/会意pin", "Su字/会意pin" );
    dict.add( "字/会意", "字/会意" ); 
```

是否有一种独立于平台的方式来指定 unicode 字符串？我尝试将 Eclipse 中的文件编码更改为 UTF-8 而不是默认的 MacRoman，但测试仍然失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T20:40:30.907

在 javac 编译器的标志中，设置 -encoding 标志，因此在您的情况下，您将其标记为

```
javac -encoding UTF-8 
```

# php - 对从 SVN 进行部署的任何建议，并自动将版本号写入我的代码中？

> ID：66671
> 
> 赞同：6
> 
> 时间：2008-09-15T20:34:53.337
> 
> 标签：php, version-control, web-deployment-project

我已经习惯了 SVN，现在我需要一种更轻松地将我的代码部署到登台或实时服务器的方法。我还想要一些将构建信息放在该站点的页脚中以帮助测试的方法。网站是 PHP/MySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T20:40:13.153

首先为您希望拥有修订信息的文件启用关键字替换：

```
svn propset svn:keywords "Rev" file.txt 
```

添加到要存储修订信息的文件中：

```
$Rev$ 
```

进一步阅读：[http ://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T21:29:12.940

属性方法只会为您提供您拥有该属性的文件的最后修订号，而不是整个存储库的头修订号（例如 Stack Overflow 页脚）。如果你想要那个，你需要使用[svnversion](http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.ref.svnversion)。

我最近开始在一个项目中使用 Capistrano，它非常棒，非常灵活和强大。我最终偏离了它的正常用法，但它使一次“点击”部署变得更加容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T20:37:30.757

根据需要进行 svn 更新的脚本。

SVN 支持关键字。您可以将要扩展的关键字添加到关键字属性中，然后SVN将扩展。请参阅 $Id$ 或 $Rev$，或 SVN 书中描述的关键字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T20:42:08.513

如果您想更新项目 AssemblyInfo.cs 中的版本号，您可能会对本文感兴趣：

[CodeProject：在 Visual Studio 项目中使用 Subversion 修订号](http://www.codeproject.com/KB/architecture/svn_visual_studio.aspx)

> 如果您启用 SVN 关键字，那么每次您签入项目时，Subversion 都会扫描您的文件中的某些“关键字”，并用一些信息替换关键字。
> 
> 例如，在我的源文件的顶部，我将创建一个包含以下关键字的标题：
> 
> '$作者:$
> '$Id:$
> '$Rev:$
> 
> 当我将此文件签入 Subversion 时，这些关键字将替换为以下内容：
> 
> '$Author: paulbetteridge $
> '$Id: myfile.vb 145 2008-07-16 15:24:29Z paulbetteridge $
> '$Rev: 145 $

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T20:42:47.203

我喜欢使用 capistrano 进行推送。参考[这里](https://stackoverflow.com/questions/18224/whats-the-best-way-to-securely-publish-a-site-post-build#18231)。

您可以使用[SVN $Rev$ 属性](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.html)将修订号放入您的页脚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T03:18:42.447

在很多情况下，关键字 stuff 会失败——例如，如果您在部署之前修改了源代码，或者如果您从项目中的一个目录签入，那么同一项目中的不同目录将具有不同的修订号。仔细检查文档以确保关键字符合您的想法。

更好的方法是使用[svnversion](http://svnbook.red-bean.com/en/1.1/re57.html)程序在编译或部署时生成有关已检出目录的信息。Svnversion 将显示有关所有目录的版本信息以及标记源是否在本地修改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-26T04:40:57.757

我为我的 php 项目提出的方法，可能不是最好的方法，但经过一段时间的搜索，似乎确实是，进行检查，运行版本检查，清除 .svn 文件夹，然后继续。这是我编写的一部分 shell 脚本：

（首先，您需要检查您的回购的脚本）

```
# get the svn revision number and create a RELEASE file
svnvers=`svnversion .`
echo "version: $svnvers"
echo "<release><development>0</development><revision>$svnvers</revision></release>" > RELEASE

# remove all .svn directories
find . -name .svn -exec rm -rf {} \; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T20:43:02.257

一种非常简单的管理方法是通过以下方式设置您的应用程序：

只需使您的部署应用程序成为您的主干的工作副本（`svn co`该项目到您的 /www 根目录），并在需要更新时`svn up`通过 ssh 控制台 ( ) 运行。`ssh user@host.com svn up /path/to/project`您还可以使用适当的结帐机制进行回滚。这很重要：**如果您这样做，请将 RewriteRules（或等效项）添加到您的 .htaccess（或等效项）以禁止访问 .svn 目录**。如果您不能执行上述操作，请`svn export`改为通过 ssh 运行（因此它不会是“工作副本”），但这自然会比执行`up`.

此外，您可以查看 Ruby on Rails 对 Capistrano 的作用。这是相同的基本概念，但如果更新在中间出错，则支持事务备份，方法是将每个结帐存储在单独的文件夹中，并将“最新”符号链接到您的 /www目录。

# mailing-list - GNU Mailman 的简单/轻量级替代品？

> ID：66677
> 
> 赞同：15
> 
> 时间：2008-09-15T20:35:17.657
> 
> 标签：mailing-list, mailman

我正在寻找一个简单的邮件列表（Unix 友好）。健壮性、细粒度的可配置性、“企业就绪”（无论是什么意思）都不是要求。我只需要为几个朋友建立一个小邮件列表。与其自己破解一些东西，我想知道是否有人知道已经有类似目标的东西？

我现在应该注意，我**不**想要一个外部托管的邮件列表——它需要是我可以在我的服务器上安装和运行的软件。我知道有很多地方可以在（Google/Yahoo 群组）托管邮件列表，但最好将数据保存在本地。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-15T20:47:05.040

Mailman 是我遇到的最简单的邮件列表包之一，所以如果 Mailman 超出您的处理范围，我建议`/etc/aliases`您为您的邮件列表添加一个条目。

当然，你必须手动管理它，但你说它只适用于几个朋友，所以这可能不是问题。只需创建一个条目，`/etc/aliases`例如：

```
mylist: me@somedomain.com, myfriend@somedomain.com, \
  myotherfriend@differentdomain.com 
```

然后运行`newaliases`。没有比这更简单的了。如果您想要存档，您可以在您的邮件服务器上创建一个虚拟帐户并将它们添加到列表中。

它不像 Mailman 那样用户友好，但它很简单，您可以在 5 分钟内启动并运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:46:26.303

如果你不怕 perl，试试[Minimalist 。](http://www.mml.org.ua/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T20:22:06.757

如果您想要一些易于设置的东西，顶部有一个用户界面，那么我建议您查看[WP Mailster](https://wpmailster.com/)（WordPress 插件）或[Mailster](https://www.brandt-oss.com/mailster)（Joomla 插件）。

无论您喜欢这两个 CMS 中的哪一个，您只需要 5 分钟即可安装“裸”WordPress 或 Joomla 和插件。

它真的很好用，而且很容易使用。我已经使用 Mailster 多年了，最近，随着我的网站迁移到 WordPress，我更换了 WP Mailster。

# communication - 任何来自 .NET 的成功的 profibus 通信？

> ID：66687
> 
> 赞同：6
> 
> 时间：2008-09-15T20:35:48.857
> 
> 标签：communication, plc, industrial

有没有人从 .NET 应用程序中成功谈过[profibus ？](http://www.profibus.com/)

如果您这样做了，您使用什么设备/卡来完成此操作，应用程序是什么，您是否使用了任何类型的预先存在或可用的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-02T16:51:34.897

我们没有使用 Profibus，但使用了**DeviceNET**（另一种基于 CAN 的协议）、**Ethernet/IP**和**ControlNet**，它们都有类似的挑战。

自 1990 年代后期以来，我们一直在这样做，因此主要依靠我们自己使用现成硬件生成的代码。我记得在那个时期表现出长寿的公司是：-

*   AnyBus （HMS，[www.anybus.com](http://www.anybus.com)）我们最近开始使用他们的网关产品，因为我们可以将现场总线接口放置在靠近硬件的位置，然后通过普通以太网（通常使用以太网/IP [www.odva.org](http://www.odva.org)）进行通信。这具有仅使用网络电缆将硬件和 PC 分开的优点。以太网/IP .NET 类是我们自己编写的，因为当时市场上没有太多东西。我相信快速谷歌搜索会找到合适的类库
*   SST ( [www.mysst.com](http://www.mysst.com) ) 拥有现场总线接口已有十多年了。我们用于 DeviceNET 的最后一张 SST 卡仍然只有 VB6 示例代码。多种现场总线支持和不同的外形尺寸，例如 PC104、PCI、PMCIA
*   Beckhoff/Wago ( [www.beckhoff.com](http://www.beckhoff.com) , [www.wago.com](http://www.beckhoff.com) ) 我们通常将 Beckhoff 用于 I/O 而不是接口卡，但同样是一家已经存在很长时间的公司。他们还有支持使用 OPC 公开的产品（另一种无需直接与硬件/设备驱动程序通信即可获取 I/O 信息的方式）

我建议不要直接使用硬件的 OPC 接口（使用 PC (.NET)->PLC->Profibus 进行通信是可以的），因为您需要确保控制系统响应您的 .NET 应用程序失去控制。我假设您在这里需要一个 profibus 主站（而不是从站），所以只要您的控制系统本质上是故障安全的，那么通信丢失应该意味着控制系统进入“空闲”状态，因此大多数I/O 将返回故障安全状态。

我们还尝试确保不会将与安全相关的代码放在 .NET 中。我们的大部分 .NET 代码是来自 PLC 的用户界面，但在某些地方，我们确实直接控制现场总线，但确保硬件联锁可以防止不安全的操作，使用安全开关/继电器或仅执行联锁任务的小型 PLC . **最重要的是使系统具有故障安全性！** .NET 代码中的通信丢失应将自动化关闭到故障安全状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T22:30:12.303

我们使用 Steeplechase 将我们的 profibus 连接到我们的自动拣选系统。

[http://www.phoenixcontact.com/automation/32131_31909.htm](http://www.phoenixcontact.com/automation/32131_31909.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-16T00:07:28.330

试试这个： http: [//libnodave.sourceforge.net](http://libnodave.sourceforge.net)

# xml - EDI 转换器工具 850 至 940

> ID：66709
> 
> 赞同：4
> 
> 时间：2008-09-15T20:39:02.250
> 
> 标签：xml, edi, x12

我需要将 x12 850 v4010 转换为 x12 940 v4010。大多数工具从 x12 转换为 xml，然后我需要将 xml 映射到 940。我希望有一种工具可以从一个 edi 文档转换为另一个。

编辑信息：

> [快速背景](http://www.rawlinsecconsulting.com/x12tutorial/index.html)
> 
> 电子数据交换 (EDI) 经典定义为组织之间结构化业务数据的应用程序到应用程序交换。X12 是提供该结构的 ANSI 标准。有很多关于 EDI 的商业利益、实施注意事项和运营方面的好书

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T21:08:44.737

打算试试 Altova MapForce 和 Stylus Studio®。

[http://www.altova.com/downloadtrialmapforce3.html](http://www.altova.com/downloadtrialmapforce3.html)

[http://www.stylusstudio.com/xml_product_index.html](http://www.stylusstudio.com/xml_product_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-22T01:04:22.687

当我为 adra match asa（挪威公司，我认为它位于[http://adramatch.com](http://adramatch.com)）工作时，我是 EdiMatch 的项目经理，它可以读取 EDI 文件，然后你会得到“具体对象”（COM，仅限 Windows但是）返回，您可以稍后将其序列化为您希望的“任何内容”...

我知道当我为他们工作时，他们至少将其授权给了 Agresso（挪威 ERP 供应商）。我认为他们仍然有兴趣将其授权给其他人，但不确定...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-09T19:04:59.800

我在这里看到三个问题。首先，采购订单和仓库发货订单之间的映射。数据不完全匹配，但如果您假设采购订单和运输订单之间存在一对一的关系，则可以克服这一问题。我假设您可以对仓库 ID、危险材料代码等数据进行硬编码。

第二个问题是您是否需要一次性或偶尔手动进行的转换，或者您设置一次并集成到翻译系统中的运行时翻译？

三是基于此，用什么工具？无论哪种方式，我都会好好看看 Stylus Studio。它既有用于本地测试或手动转换的 IDE，也有安装在服务器上的运行时组件。我以前的公司广泛使用它，而且它比几乎任何其他实时翻译器（Mercator、Gentran 等）都便宜。

要使用 Stylus，您将导入源文件 (850) 并创建可用于将文件解析为 XML 的可重用模式。然后，导入输出格式的示例（940）以创建可用于将文档序列化回 X12 的模式。

从那里，您可以使用映射工具让您接近，然后手动编辑 XSLT 以获取可能需要调整的复杂逻辑（例如，循环不能完美处理）。Stylus Studio 甚至允许您创建“管道”，可用于连续链接多个 XSLT 映射，或将来自外部源的数据拉入翻译中间。

然后，您可以打包所有内容并将其导出到您的实时环境。更好的是，如果您手动执行此操作，则可以在获取文件时通过管道运行文件，然后就完成了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T20:43:40.757

*从一个文档映射到另一个文档几乎总是涉及做出许多可能*只是正确的假设，并且在您谈论转移资金时通常可能不够好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-05T19:48:54.457

这是一次性转换还是过程的一部分？

您可以使用一些企业集成工具，例如 BizTalk。

否则，如果您可以获得 BizTalk 2006 R2 EDI 架构，那么您就可以获得两个文档的 XML 表示。然后，您可以读取常见段的节点并复制它们。之前没用过940，但是对810、309及其相关文档、997比较熟悉；但您可能需要自己填写一些数据才能完成940文档。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-24T19:15:34.667

另请查看 Orion 的 Symphonia 软件。它是商业软件，但可以满足您的需求。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-10T12:57:35.777

[Servingxml](http://servingxml.sourceforge.net)库也值得一看，与 Altova 和 Stylus 相比，它是 FOC。

通过将这些步骤链接在一起，它能够将 EDI 解析为 XML 并返回。可以从命令行调用或嵌入（用Java编写）。

有很多[示例](http://servingxml.sourceforge.net/examples)如何将纯文本转换为 XML 并返回。

与 Altova 和 Stylus 相比的缺点可能是缺少开发 GUI，您必须在基于 XML 的配置文件中手动声明映射。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-05T20:01:24.087

如果您愿意使用软件包进行 EDI 到 EDI 的转换，我建议您使用[Softshare Delta](http://www.softshare.com/solutions/datatranslation/)。它实际上是我使用了几年的好产品。它会满足您的翻译需求，但它不是免费的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-24T17:17:52.470

我认为问题可能在于 850 没有正确完成 940 所需的所有信息。我从未使用过 940，但确实使用了很多 856（高级船舶通知），看起来与 940 相似。 850 将包含有关订单的信息（SKU、数量、发货地址等），但不包含有关发货方式的信息（承运人、跟踪 ID、发货日期、重量、包装等）。此信息通常需要在发货时提供，并结合来自 850 的信息创建 940。

有些文件（如 997）可以在没有“外部帮助”的情况下从文件中创建。但如果 940 是其中之一，我会感到惊讶。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-09-14T23:39:02.263

我想尝试使用 ALTOVA 的 mapforce 工具将 EDI 850 X12 转换为 Oracle 应用程序。这是不是一个不错的选择。我听说最受欢迎的是[http://www.sterlingcommerce.com/](http://www.sterlingcommerce.com/)，但它非常昂贵..

请指教沙士

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-03-01T15:59:53.063

在 bots 开源 edi 翻译器中，您可以将 850 v4010 映射到 x12 940 v4010 (http://bots.sourceforge.net)。基本上，输入可以映射到任何输出。

# rdf - 是否有任何工具可以可视化 RDF 图？（请附上截图）

> ID：66720
> 
> 赞同：44
> 
> 时间：2008-09-15T20:40:30.593
> 
> 标签：rdf, semantics, semantic-web, owl, ontology

我正在寻找一种能够以合理有用的图形格式呈现 RDF 图的工具。图形格式的主要目的是包含在 PowerPoint 幻灯片中或在大型绘图仪上打印以供管理审查。

我目前正在使用 TopBraid Composer，它在可视化单个实体方面做得相当好，但似乎没有一种清晰的方式来可视化整个图形（作为一个整体）。

有人知道这个问题的任何好的解决方案吗？

![TopBraid Composer 图表视图截图](https://i.stack.imgur.com/2C2Q6.jpg)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-28T08:34:49.953

已经提到了 Gephi，但我将在此处对屏幕截图和简短描述进行编码。

[Gephi](https://gephi.org/)不仅可以可视化图形，还支持分析、布局和进一步的导入和导出。有一个 Semantic Web Import Extension 允许您直接查询（通过 SPARQL）或导入 RDF 数据。[https://wiki.gephi.org/index.php/SemanticWebImport](https://wiki.gephi.org/index.php/SemanticWebImport)（您可以直接在插件程序中安装它。

![格菲截图](https://i.stack.imgur.com/4p8j7.png)

有一个 JavaScript 图形可视化库对我来说非常好用：http: [//sigmajs.org](http://sigmajs.org/) / 它与 Gephi 配合得很好，因为您可以从那里导出图形并将文件导入 SigmaJS。这样您就可以将图表导出到交互式网站。示例： http: [//fannon.de/p/smw/vis/George_Orwell_Platz_30.html](http://fannon.de/p/smw/vis/George_Orwell_Platz_30.html)

![在此处输入图像描述](https://i.stack.imgur.com/iavvr.png)

一个重要的提及是[D3.js](http://d3js.org/)，它已经有几十个力图示例。但是它不直接支持RDF，所以必须先转换数据。

一个不错的是：[http ://nylen.tv/d3-process-map/graph.php?dataset=les-mis](http://nylen.tv/d3-process-map/graph.php?dataset=les-mis)

![在此处输入图像描述](https://i.stack.imgur.com/PJzwk.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-19T07:46:59.797

[RDF Gravity](http://semweb.salzburgresearch.at/apps/rdf-gravity/index.html)是一个 RDF 可视化工具。

这是截图：（ [来源：][[salzburgresearch.at](http://semweb.salzburgresearch.at/apps/rdf-gravity/html/owl_ontology_1.jpg)][）][![RDF 重力截图](https://i.stack.imgur.com/CBpd0.jpg)](https://i.stack.imgur.com/CBpd0.jpg)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-15T20:49:47.483

门徒。激活工具 > 选项卡 > Jambalaya。

[![替代文字](https://i.stack.imgur.com/IjckW.png)](https://i.stack.imgur.com/IjckW.png)
[（来源：[utexas.edu](https://www.ischool.utexas.edu/~i385t-sw/archive/protege/protege-jambalaya-02.png)）]

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-15T18:50:35.210

我也在找一个，我发现了这个：[https](https://gephi.org/) ://gephi.org/ 很确定它适用于 rdf。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-04T21:47:36.050

-Cytoscape [http://www.cytoscape.org/](http://www.cytoscape.org/)适用于大型图形，您可以创建静态 pdf 或图像。

-我也发现这个很有趣[http://d3js.org/](http://d3js.org/)

它并非特定于 RDF 图，但在示例中似乎有一些很酷的功能，用户可以在其中与数据进行大量交互。然而，它确实需要相当多的 JS 编程知识。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-04-30T14:43:05.630

WebVOWL 是可视化本体的绝佳选择。[http://vowl.visualdataweb.org/webvowl.html](http://vowl.visualdataweb.org/webvowl.html)

[![在此处输入图像描述](https://i.stack.imgur.com/FwVSx.png)](https://i.stack.imgur.com/FwVSx.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-17T07:03:15.477

[同样基于 Graphviz 的RDFShape](http://rdfshape.weso.es)可用于可视化用于演示的小型 RDF 图。它允许 SVG 和 PNG 输出格式。一个示例可视化可以是[这个](http://rdfshape.weso.es/dataInfo?data=%40prefix%20schema%3A%20%3Chttp%3A%2F%2Fschema.org%2F%3E%20.%0A%40prefix%20%3A%20%20%20%20%20%20%3Chttp%3A%2F%2Fexample.org%2F%3E%20.%0A%40prefix%20xsd%3A%20%20%20%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%20.%0A%40prefix%20foaf%3A%20%20%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%20.%0A%0A%3Aalice%20%20schema%3Agender%20%20schema%3AFemale%20%3B%0A%20%20%20%20%20%20%20%20schema%3Aknows%20%20%20%3Abob%20%3B%0A%20%20%20%20%20%20%20%20schema%3Aname%20%20%20%20%22Alice%22%20.%0A%0A%3Abob%20%20%20%20schema%3AbirthDate%20%20%221980-03-10%22%5E%5Exsd%3Adate%20%3B%0A%20%20%20%20%20%20%20%20schema%3Agender%20%20%20%20%20schema%3AMale%20%3B%0A%20%20%20%20%20%20%20%20schema%3Aname%20%20%20%20%20%20%20%22Robert%22%20.%0A%0A%3Acarol%20%20schema%3Agender%20%20schema%3AFemale%20%3B%0A%20%20%20%20%20%20%20%20schema%3Aname%20%20%20%20%22Carol%22%20%3B%0A%20%20%20%20%20%20%20%20foaf%3Aage%20%20%20%20%20%20%2023%20.&dataFormat=TURTLE&inference=NONE)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-11-17T10:51:15.637

Perl 实用程序 rdfdot，基于 Graphviz 和这个库，可能会有所帮助：

[http://metacpan.org/pod/RDF::Trine::Exporter::GraphViz](http://metacpan.org/pod/RDF::Trine::Exporter::GraphViz)

[https://github.com/nichtich/RDF-Trine-Exporter-GraphViz](https://github.com/nichtich/RDF-Trine-Exporter-GraphViz)

Graphviz 能够处理数千个节点，因此可能适合您的问题规模。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-02T10:15:26.197

带有*rapper*和*graphviz*的命令行：

`$ rapper --input ntriples $fname.nt --output dot > $fname.dot $ dot -Tpng $fname.dot > $fname.png`

# php - PHP 中的容错 HTML/XML/SGML 解析

> ID：66727
> 
> 赞同：5
> 
> 时间：2008-09-15T20:41:28.983
> 
> 标签：php, html, xml, parsing

我有一堆类似 HTML 的遗留文档。例如，它们看起来像 HTML，但有额外的组成标签，这些标签不是 HTML 的一部分

```
<strong>This is an example of a <pseud-template>fake tag</pseud-template></strong> 
```

我需要解析这些文件。PHP 是唯一可用的工具。这些文档并不接近于格式良好的 XML。

我最初的想法是在 PHP DOMDocument 上使用 loadHTML 方法。但是，这些方法会阻塞 HTML 标签，并且会拒绝解析字符串/文件。

```
$oDom = new DomDocument();
$oDom->loadHTML("<strong>This is an example of a <pseud-template>fake tag</pseud-template></strong>");
//gives us
DOMDocument::loadHTML() [function.loadHTML]: Tag pseud-template invalid in Entity, line: 1 occured in .... 
```

我能想出的唯一解决方案是使用字符串替换函数对文件进行预处理，该函数将删除无效标签并用有效的 HTML 标签替换它们（可能是带有标签名称 id 的跨度）。

有没有更优雅的解决方案？一种让 DOMDocument 知道其他标签被认为是有效的方法吗？PHP 是否有一个不同的、强大的 HTML 解析类/对象？

（如果不是很明显，我不认为正则表达式是一个有效的解决方案）

**更新**：假标签中的信息是这里目标的一部分，所以像 Tidy 这样的东西不是一个选择。此外，我正在寻找某种程度的（如果不是全部的话）格式良好的清理方法，这就是为什么我首先寻找 DomDocument 的 loadHTML 方法的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-08-31T21:22:45.777

[`libxml_use_internal_errors`](http://www.php.net/manual/en/function.libxml-use-internal-errors.php)您可以在加载文档时使用 , 禁止警告。例如。：

```
libxml_use_internal_errors(true);
$doc = new DomDocument();
$doc->loadHTML("<strong>This is an example of a <pseud-template>fake tag</pseud-template></strong>");
libxml_use_internal_errors(false); 
```

如果出于某种原因，您需要访问警告，请使用[`libxml_get_errors`](http://www.php.net/manual/en/function.libxml-get-errors.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:50:03.753

我想知道通过[HTML Tidy](http://www.w3.org/People/Raggett/tidy/)传递“坏”的 HTML是否有助于作为第一遍？可能值得一看，如果您可以使文档格式正确，也许您可​​以使用 DomDocument 将其作为常规 XML 文件加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T21:23:40.740

@Twan 您不需要 DOMDocument 的 DTD 来解析自定义 XML。只需使用`DOMDocument->load()`，只要 XML 格式正确，就可以读取它。

一旦你得到格式良好的文件，你就可以开始查看 XML 解析器，在此之前你是 SOL Lok Alejo 说的，你可以查看[HTML TIDY](http://www.w3.org/People/Raggett/tidy/)，但它看起来是特定于 HTML 的，我不知道不知道它会如何与您的自定义元素一起使用。

> 我不认为正则表达式是一个有效的解决方案

在你有良好的形成之前，这可能是你唯一的选择。一旦你把文档放到那个阶段，那么你就可以清楚地使用 DOM 函数了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T21:31:16.977

看看 PHP Fit 端口中的 Parser。代码很干净，最初是为加载 Word 保存的脏 HTML 而设计的。它被配置为拉出表格，但很容易适应。

您可以在此处查看源代码：http: [//gerd.exit0.net/pat/PHPFIT/PHPFIT-0.1.0/Parser.phps](http://gerd.exit0.net/pat/PHPFIT/PHPFIT-0.1.0/Parser.phps)

单元测试将向您展示如何使用它： http: [//gerd.exit0.net/pat/PHPFIT/PHPFIT-0.1.0/test/parser.phps](http://gerd.exit0.net/pat/PHPFIT/PHPFIT-0.1.0/test/parser.phps)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T22:41:11.567

我对这个问题的快速而肮脏的解决方案是运行一个循环，将我的自定义标签列表与正则表达式匹配。正则表达式不会捕获其中包含另一个内部自定义标签的标签。

当存在匹配时，将调用处理该标记的函数并返回“已处理的 HTML”。如果该自定义标签在另一个自定义标签中，那么由于实际 HTML 被插入到子标签的位置，父标签就变成了无子标签​​，并且它将被正则表达式匹配并在循环的下一次迭代中处理。

当没有要匹配的无子自定义标签时，循环结束。总的来说，它是迭代的（一个while循环）而不是递归的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T04:28:17.880

@艾伦风暴

您对我其他答案的评论让我想到：

> 当您使用 DOMDocument 加载 HTML 文件时，它似乎会进行某种程度的清理：格式良好，但要求您的所有标签都是合法的 HTML 标签。我正在寻找可以做到前者的东西，但不是后者。（艾伦风暴）

在标签上运行正则表达式（对不起！），当它找到一个不是有效的 HTML 元素时，将其替换为您知道在任何文档中都不存在的有效元素（`blink`想到... )，并给它一个带有非法元素名称的属性值，以便之后可以将其切换回来。例如：

```
$code = str_replace("<pseudo-tag>", "<blink rel=\"pseudo-tag\">", $code);
// and then back again...
$code = preg_replace('<blink rel="(.*?)">', '<\1>', $code); 
```

显然该代码行不通，但您明白了吗？

# svn - 在 Debian Etch 上安装 Svn 1.5.x - 最佳方法？

> ID：66728
> 
> 赞同：1
> 
> 时间：2008-09-15T20:41:33.617
> 
> 标签：svn, version-control, debian

**你如何在 debian etch 上安装 svn 1.5？** 可用于 etch 的 svn 1.5 包是 1.4，我真的需要 svn1.5 中很酷的新合并跟踪功能（根据 CollabNet，它与 ClearCase 一样好......在很多方面都是一个有趣的声明）。那么，最不痛苦的方法是什么？

我的选择是：

*   从源代码构建它
*   创建我自己的 debian 包
*   升级到 Lenny 的测试版
*   找别人的svn 1.5包

你选择了哪一个，或者你认为哪一个痛苦最少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T20:47:58.330

你考虑过[钉住](http://wiki.debian.org/AptPinning)吗？基本上，您可以将您的*一些*系统（即只是 Subversion 及其依赖项）升级到 Lenny，而将其余的保留为 Etch。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T20:45:30.800

这取决于您是否希望将来能够使用 Debian 的软件包管理工具升级 Subversion。从源代码构建它应该很容易，并且可以让您以您想要的方式对其进行配置，但是每次您想要升级时，您都需要再次从源代码构建它，而不是简单的 apt-get。

# python - 如何在 pygtk 中创建新信号

> ID：66730
> 
> 赞同：7
> 
> 时间：2008-09-15T20:41:58.500
> 
> 标签：python, gtk, pygtk, gobject

我创建了一个 python 对象，但我想在它上面发送信号。我让它继承自 gobject.GObject，但似乎没有任何方法可以在我的对象上创建新信号。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-15T22:52:27.343

您还可以在类定义中定义信号：

```
class MyGObjectClass(gobject.GObject):
    __gsignals__ = {
      "some-signal": (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE, (object, )),
    } 
```

元组的内容与 的最后三个参数相同`gobject.signal_new`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T20:57:10.490

方法如下：

```
import gobject

class MyGObjectClass(gobject.GObject):
    ...

gobject.signal_new("signal-name", MyGObjectClass, gobject.SIGNAL_RUN_FIRST,
    None, (str, int)) 
```

其中倒数第二个参数是返回类型，最后一个参数是参数类型的元组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-24T10:14:06.910

如果您使用[此处](http://kiwi.async.com.br/)提供的猕猴桃，您可以这样做：

```
from kiwi.utils import gsignal

class MyObject(gobject.GObject):
    gsignal('signal-name') 
```

# .net - Windows 窗体的未处理异常日志记录

> ID：66731
> 
> 赞同：14
> 
> 时间：2008-09-15T20:42:04.710
> 
> 标签：.net, winforms, exception, logging

Windows 窗体有类似[ELMAH的东西吗？](http://en.wikipedia.org/wiki/ELMAH)

我正在寻找一种标准方法来处理未处理的异常并在打包支持之前获取屏幕截图和其他环境信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-15T20:44:52.423

同一个 Jeff Atwood 编写了一个不错的解决方案（尽管是在 VB.NET 中），我不得不对其进行修改和“修复”，但从那时起我就很乐意使用它。

[你可以在这里](http://www.codeproject.com/KB/exception/ExceptionHandling.aspx)查看他的解决方案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T20:47:33.917

Jeff Atwood 在 2004 年做了一个很好的[用户友好的异常处理](http://www.codeproject.com/KB/exception/ExceptionHandling.aspx)。我将它用于我们的几个内部应用程序并且效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-01T04:48:01.477

有一个名为[{smartassembly}](http://www.smartassembly.com/product/index.aspx)的商业替代品可以进行错误报告。

# .net - .NET 的 IMAP4 服务器

> ID：66743
> 
> 赞同：0
> 
> 时间：2008-09-15T20:43:25.017
> 
> 标签：.net, imap, mail-server

是否有提供 IMAP4 服务器端功能的 .NET 的免费（非 GPL）库？

例如，处理套接字级别和消息握手，以便 IMAP4 客户端（例如 Outlook）可以检索、读取、编辑和/或删除消息。

我不是在尝试连接到 IMAP4 服务器，我希望帮助实施一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T21:25:21.017

我知道我正在回答我自己的问题，但经过更多搜索后，我想我可能找到了符合我需求的东西：

[邮件](http://nmailserver.sourceforge.net/index.php/Main_Page)

特征

*   NMail 是一个 100% 的 .net 应用程序。
*   Windows 安装程序和设置向导。
*   ASP.net 网络邮件。
*   一个 ASP.net 管理站点。

IMAP 服务器功能

*   支持 ACL。
*   NTLM 身份验证（Outlook 和 Outlook Express 下的安全密码身份验证 (SPA)）。
*   支持 SSL/TLS 加密。
*   SASL 普通身份验证支持（使用加密会话时）。

SMTP 服务器功能

*   支持 SSL/TLS 加密。
*   用于过滤和更改消息的灵活 API。例如删除垃圾邮件或重写地址等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T20:52:19.253

我不确定您是否尝试过 Indy（以前是一组 Delphi 组件）——尽管我不确定他们是否使用 IMAP4，因为他们的网页有点空白，他们的 CodePlex 集线器也是如此。去[他们的网站](http://indy-project.org)。除此之外，我不确定——甚至[谷歌](http://google.co.uk/search?q=c#+imap4+server)也只显示客户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-18T19:28:21.633

您可以检查[Lumisoft 邮件服务器](http://www.lumisoft.ee/lswww/ENG/Products/Mail_Server/mail_index_eng.aspx?type=info)。许可证是免费软件。

一般的：

```
* SMTP/POP3/IMAP4/WebMail
* IP access filtering
* User mailbox size limit
* Supports XML or MSSQL databases
* Nice GUI for administation
* Well commented source code included 
```

SMTP：

```
* All basic smtp features
*  Supports multiple domains
*  Supports multiple e-address for one mailbox
*  Supports aliases(Mailing lists). Supports public and private 
   (needs authentication) lists.
*  Supports email routing. eg *ivar* pattern routes all addresses containing 
   ivar to specified mailbox or remote address
*  SMTP AUTH (LOGIN CRAM-MD5) (supported authentication types)
*  SMTP SIZE, PIPELINING, 8BITMIME, CHUNCKING support
*  SMTP custom message filters
*  Relay can be controlled by IP access or authentication 
```

POP3：

```
* All basic pop3 features
* APOP command for secure authentication
* POP3 AUTH (LOGIN CRAM-MD5) (supported authentication types)
* POP3 remote accounts 
```

网络邮件（ASP.NET）：

```
* Standalone webmail, can be used any with IMAP based mailserver
* Supports XML or MSSQL databases
* Multiple UI languages 
```

# java - 如何控制 DateFormat 返回的月份和日期名称的大小写？

> ID：66750
> 
> 赞同：16
> 
> 时间：2008-09-15T20:44:02.300
> 
> 标签：java, date, internationalization

这是一个快速测试程序：

```
 public static void main( String[] args )
{
    Date date = Calendar.getInstance().getTime();

    System.out.println("Months:");
    printDate( "MMMM", "en", date );
    printDate( "MMMM", "es", date );
    printDate( "MMMM", "fr", date );
    printDate( "MMMM", "de", date );

    System.out.println("Days:");
    printDate( "EEEE", "en", date );
    printDate( "EEEE", "es", date );
    printDate( "EEEE", "fr", date );
    printDate( "EEEE", "de", date );

}

public static void printDate( String format, String locale, Date date )
{
    System.out.println( locale + ": " + (new SimpleDateFormat( format, new Locale( locale ) )).format( date ) );
} 
```

输出是：

`Months: en: September es: septiembre fr: septembre de: September Days: en: Monday es: lunes fr: lundi de: Montag`

如何控制名称的大小写。出于某种原因，西班牙语和法语似乎总是返回以小写字母开头的名称。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-15T20:47:23.853

并非所有语言都共享英语大写规则。我想您需要更改 API 使用的数据，但您的非英语客户可能不喜欢它......

[about.com 关于法语大写](http://french.about.com/library/writing/bl-capitalization.htm)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-15T20:48:01.777

不同语言的大小写规则不同。在法语中，月份名称[不应大写](http://french.about.com/library/writing/bl-capitalization.htm)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-15T20:46:16.600

您可能不想更改大小写——不同的文化将不同的单词大写（例如，在德语中，您将每个名词都大写，而不仅仅是专有名词）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-22T00:42:37.677

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T17:16:25.387

我现在遇到一个问题，句子以“dimanche 07 mars”开头，如果它不在句子的开头，那也没关系。我想这不能改变，除非我对字符串的第一个字符进行手动字符串操作。

# .net - 为 .NET Framework 3.5 而不是 2.0 编译有什么优势吗？

> ID：66759
> 
> 赞同：10
> 
> 时间：2008-09-15T20:45:11.720
> 
> 标签：.net, optimization, compiler-construction, frameworks

为 .NET Framework 3.5 而不是 2.0 编译有什么优势吗？

例如更少的内存消耗，更快的启动，更好的性能......

我个人不这么认为，但我可能错过了一些东西。

## 编辑

1.  当然3.5框架还有更多的特性，但这些都不是本题的重点。

2.  好像没什么优势。

3.  是的，我的意思是针对框架。我已经安装了最新的 3.5 SP1 和 VS 2008，那么编译和定位框架有什么区别？我可以在项目选项中定位框架，但如何“编译”特定的框架版本？我不知道有什么不同。

4.  所以现在我们同意没有优势。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T20:50:24.640

编译和定位是有区别的。

使用（例如）C# 3.0 编译器编译代码可能会提高性能（无论如何很少），因为可能已包含对生成的 IL 代码的一些优化。它还允许您使用一些新功能，例如自动属性或 lambda 表达式。

以给定框架为目标将确保您的程序集适用于该框架（和后验框架），并且如果您针对 2.0 并使用 3.5 库，则会失败。除非您将一个框架中的一个类替换为另一个“最快”类，否则不会有任何性能改进与此直接相关。例如，针对 .NET 1.1 将不允许您使用泛型，因此您必须使用比 List 慢得多的 ArrayList（由于装箱和拆箱）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T21:26:55.723

关于 .NET 2.0 和 .NET 3.5，有两点需要记住。

1.  .NET Framework 3.5 只是在 .NET 2.0 之上运行的几个库。
2.  在 Visual Studio 2008 中开发并以 .NET 2.0 为目标时，您仍然可以使用某些 C# 3.0 语言功能，例如扩展方法，因为它们实际上是 C# 3.0（或 .NET 3.5）编译器的功能。请参阅此链接： http: [//www.codethinked.com/post/2008/02/Using-Extension-Methods-in-net-20.aspx](http://www.codethinked.com/post/2008/02/Using-Extension-Methods-in-net-20.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T20:48:16.037

我还没有找到。如果您不需要 3.5 的特定功能，一个明显的*缺点是 3.5 代码库更年轻，因此可能（尽管不太可能）存在一些潜伏的错误。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T21:58:05.307

如果您不使用该框架版本中的任何类，则编译到 3.5 框架没有任何好处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T01:35:45.690

我认为您的编译目标一定是 .NET 3.5 框架？如果是这样，那么正如其他人所说，我不相信你会看到太大的不同。

但是，如果您正在谈论使用更新的编译器，那么在以下链接中描述了 C# 和 VB 的各种更改和中断更改：

*   [C# 3.0 和 SP1 编译器更改](http://msdn.microsoft.com/en-us/library/bb383815.aspx)
*   [Visual Basic 编译器的新增功能](http://msdn.microsoft.com/en-us/library/x9es5c23.aspx)
*   [Visual Basic 2008 重大更改](http://msdn.microsoft.com/en-us/library/cc714070.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T02:08:42.473

我相信每个版本的 Visual Studio 都会附带不同的编译器。例如，对于 C#，Visual Studio 2005 附带的 2.0 编译器和 Visual Studio 2008 附带的 C# 3.0。根据您使用的 Visual Studio 版本，您最终会使用不同的编译器。

以框架为目标具体是指在编译过程中您希望针对哪个版本的框架；定位框架是 Visual Studio 2008 的一个新功能。例如，我可以在 Visual Studio 2008 中打开一个解决方案并以 .Net 的 v2.0 为目标。结果是在编译期间我将没有任何可用的 3.0 或 3.5 .Net 功能，例如 WPF。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T12:27:40.520

如果您的 .NET 程序集以 .NET 3.5 为目标，则生成的应用程序将查找并需要 .NET 3.5 库，仅此而已。这些库带有许多在 .NET 2.0 框架中没有的附加类，因此这将是针对这些库的优势。

但是，如果您使用 Visual Studio 2008 附带的适用于 .NET 3.5 的 C# 3.0 编译器编译 C# 代码，*但*您的程序集目标是 .NET 2.0，您仍然只需要常规的 .NET 2.0 库，尽管实际使用某些 .NET 3.5 编译器功能，因为其中许多功能最终仅使用 .NET 2.0 代码。在此处阅读有关此内容的更多信息：[http://weblogs.asp.net/shahar/archive/2008/01/23/use-c-3-features-from-c-2-and-net-2-0-code。 aspx](http://weblogs.asp.net/shahar/archive/2008/01/23/use-c-3-features-from-c-2-and-net-2-0-code.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T20:47:36.707

3.5 有 2.0 没有的类。例如 Func<...>。如果你的目标是 2.0，你就不能使用它们。

# java - Java Servlet 404 错误

> ID：66767
> 
> 赞同：2
> 
> 时间：2008-09-15T20:45:41.550
> 
> 标签：java, web-applications, servlets, jakarta-ee

`404 resource not found`当 Sun 的 J2EE 自动创建的给定 .WAR 中的页面`deploytool`试图在同一个 .WAR 文件中加载 Servlet 时，最有可能导致错误的罪魁祸首是什么？
例如：

> # HTTP 状态 404 - /MyServlet/MyServlet
> 
> **类型**状态报告
> 
> **消息**/MyServlet/MyServlet
> 
> **描述**请求的资源 (/MyServlet/MyServlet) 不可用。

* * *

相关：其中，您希望有多少是特定于服务器的？例如：*Sun Java Application Server* vs *Tomcat & Catalina*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T20:47:56.067

您的 web.xml 中是否存在有效的“MyServlet”<servlet-mapping>？那是我过去的头号罪魁祸首

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:50:39.913

404 错误表示未找到请求的资源。正如 pkaeding 所暗示的，这可能是由于 web.xml 文件中的 servlet 映射不正确（或不存在）。Servlet 必须在 web.xml 文件中指定，不仅如此，它们还必须映射到特定的路径（“url-mapping”）。如果“MyServlet”servlet 存在，但没有映射到可以基于应用程序上下文根使用“/MyServlet/MyServlet”解析的路径，并且没有其他（即另一个 servlet 等）可以使用此路径解析，则应用程序服务器将抛出 404 说明没有任何内容映射到给定路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-11T17:01:07.283

Servlet 映射是一个常见问题。但是，如果您的 web.xml 中有任何过滤器，那么它们也可能是罪魁祸首。要意识到的一件事是过滤器总是在任何 servlet 开始执行之前执行 doFilter 之前的代码。（技术上，过滤器在 doFilter 之后执行代码）在我们的代码中，我们创建了在某些情况下会返回 404 的过滤器。有时删除部分或全部过滤器映射将有助于发现它是否与过滤器映射有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-13T00:51:23.887

我刚刚花了大约一个小时来解决这个问题。OSX 上的 Tomcat 5.5.27 工作得很好，直到我添加了另一个 servlet 和 servlet-mapping，此时*一切*都返回 404。我没有意识到，但是当我添加了一个新的 servlet/servlet-mapping对我将 servlet-mapping 放在 servlet 条目之前。这是一个容易犯的错误，尽管在不给出任何类似合理错误消息的情况下对整个应用程序进行限制似乎有点极端，但回想起来却是完全合理的。

# ruby-on-rails - 为什么 RSpec 在 Rails 下这么慢？

> ID：66770
> 
> 赞同：45
> 
> 时间：2008-09-15T20:46:06.307
> 
> 标签：ruby-on-rails, ruby, rspec

每当我为我的 Rails 应用程序运行 rspec 测试时，它需要永远和一天的开销才能真正开始运行测试。为什么 rspec 这么慢？有没有办法加快 Rails 的初始加载或挑出我需要的 Rails 应用程序的一部分（例如仅 ActiveRecord 的东西），所以它不会加载所有东西来运行一些测试？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2010-10-27T20:59:38.790

我绝对建议检查一下spork。

[http://spork.rubyforge.org/](http://spork.rubyforge.org/)

railstutorial 专门解决了这个问题，并提供了一种解决方法，以使 spork 在 rails 3.0 中运行良好（到目前为止，spork 还不是 rails 3 开箱即用）。当然，如果您不在 Rails 3.0 上，那么您应该很高兴。

教程的一部分展示了如何让 spork 在 rails 3.0 中运行

[http://railstutorial.org/chapters/static-pages#sec:spork](http://railstutorial.org/chapters/static-pages#sec:spork)

检查 spork 何时准备好 rails 3.0

[http://www.railsplugins.org/plugins/440-spork](http://www.railsplugins.org/plugins/440-spork)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-15T22:38:59.903

您应该能够通过在单独的终端窗口中运行来加快`script/spec`调用速度，然后将附加参数添加到规范调用中。`script/spec_server``-X`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T16:33:48.400

**为什么 rspec 这么慢？**因为它加载了所有的环境，加载了固定装置和所有的爵士乐。

**有没有办法加快 Rails 的初始负载**，您可以尝试使用模拟而不是依赖数据库，这对于单元测试实际上是正确的，并且肯定会加快您的单元测试。另外使用 @Scott Matthewman 提到的规范服务器[可以](https://stackoverflow.com/users/10267/scott-matthewman)提供帮助，与 @ [Marc-Andre Lafortune提到的 zentest 的自动测试相同](https://stackoverflow.com/users/8279/marc-andre-lafortune)

**有没有办法挑选出我需要的 Rails 应用程序的一部分（例如仅 ActiveRecord 的东西），这样它就不会完全加载所有东西来运行一些测试？**那这个呢

```
rake test:recent 
```

我不确定 rspec 任务如何与此集成，但您绝对可以使用 test:recent 任务作为模板来对 rspec 测试执行相同操作。

```
rake test:rspec:recent 
```

还不存在

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-17T01:14:17.197

> 因为它加载了所有的环境，加载了固定装置和所有的爵士乐。

真正的罪魁祸首是，如果你运行它使用`rake spec`，[它运行`db:test:prepare`任务](http://github.com/dchelimsky/rspec-rails/tree/master/generators/rspec/templates/rspec.rake#L11)。

此任务删除您的整个测试数据库并从头开始重新创建它。这对我来说似乎很荒谬，但这就是它的作用（当你跑步时也会发生同样的事情`rake:test:units`等）。

`spec`您可以使用rspec 作为 rspec gem 的一部分安装的应用程序轻松解决此问题。

像这样：

```
cd railsapp
spec spec # run all specs without rebuilding the whole damn database
spec spec/models # run model specs only

cd spec
spec controllers/user* # run specs for controllers that start with user 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-11-12T00:16:41.187

我认为您正在寻找的“禅”体验是在后台运行`spec_server`，`autospec`结果是在您保存文件时近乎即时的测试。

但是，我在让这两个程序进行通信时遇到了问题。

[我在这里](http://www.ruby-forum.com/topic/145820)找到了解释：

> 我注意到自动测试不会向 spec_server 发送命令。相反，它每次执行时都会重新加载整个 Rails 环境和应用程序的插件。这会导致 autotest 的运行速度明显慢于脚本服务器，因为当您运行 script/spec 命令时，specs 会发送到已经启动 Rails 环境并准备就绪的 spec_server。如果您碰巧安装了新插件或类似的东西，那么您将不得不重新启动 spec_server。

但是，我们如何解决这个问题？我猜这将涉及下载 ZenTest 和更改程序的代码`autotest`，但现在没有时间尝试。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-15T20:47:23.260

你是在 Rails 上运行的吗？如果是这样，那么慢的不是 RSpec 的初始化，而是 Rails 的。Rails 必须在运行规范之前初始化整个代码库*和您的代码库。*嗯，它不必，但它确实*。*在我的小型非 Rails 项目下，RSpec 对我来说运行得非常快。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-15T22:58:34.193

运行测试可能真的很慢，因为必须加载整个 Rails 环境（尝试脚本/控制台），然后才能运行所有测试。您应该使用[自动测试](http://www.zenspider.com/ZSS/Products/ZenTest/)来保持环境加载并检查您编辑的文件。当您编辑和保存文件时，只有依赖于这些文件的测试才会自动快速运行。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T01:27:17.860

如果您使用的是 Mac，我建议使用 Rspactor 而不是自动测试，因为它使用比自动测试更少的资源来轮询更改的文件。既有完整的 Cocoa 版本

[RSpactor.app](http://rubyphunk.com/projects/rspactor)

或者我在[Github维护的 gem 版本](http://github.com/pelle/rspactor/tree/master)

```
sudo gem install pelle-rspactor 
```

虽然这些并不能加速单个 rspec 测试，但它们会在您点击保存后的一秒钟内自动运行受影响的规范，因此感觉要快得多。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-02-17T21:54:35.117

从 rspec-rails-1.2.7 开始，不推荐使用 spec_server 以支持 spork gem。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-06-03T17:11:48.600

主要原因是由于某种原因 require 在 Windows 上*永远存在。*

加速提示：我相信 spork 现在可以在 Windows 上运行。

您可以尝试缓存位置的“faster_require”：

[http://github.com/rdp/faster_require](http://github.com/rdp/faster_require)

总帐。-rp

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T09:05:58.320

如果您在 Windows 环境中，那么您可能无能为力，因为 Rails 在 Windows 下似乎启动非常缓慢。我在 Windows 上也有同样的经历，我不得不将我的设置转移到 Linux 虚拟机上，以使它变得非常流畅（我也在使用自动测试）。

# html - 在 HTML 文本区域中添加换行符

> ID：66773
> 
> 赞同：34
> 
> 时间：2008-09-15T20:46:23.527
> 
> 标签：html

如何在 html 页面的文本区域中添加换行符？我使用 VB.net 进行服务器端编码。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2010-06-30T12:50:51.123

如果不是 vb，您可以使用`&#013;&#010;`（cr、lf 的 ascii 代码）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-15T20:50:23.660

在输出中添加换行符（“\n”）：

```
<textarea>Hello

Bybye</textarea> 
```

里面会有换行符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T20:51:32.907

您可以使用`\r\n`, 或`System.Environment.NewLine`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T07:38:46.533

如果您从数据库或类似的数据库中插入文本（通常会这样做），请将所有“ `<br />`”转换为 &vbCrLf。对我很有用:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T20:52:44.230

在文本区域中，就像在表单输入中一样，只需正常的换行符即可：

```
<textarea>
This is a text area
line breaks are automatic
</textarea> 
```

如果您在讨论页面上的普通文本，则 <br />（或者如果使用纯 'ole HTML4，则只是 <br>）是换行符。

但是，我会说您通常实际上并不想要换行符。通常，您的文本分为几个段落：

```
<p>
  This is some text
</p>
<p>
  This is some more
</p> 
```

哪个更好，因为它提供了有关您的文本如何被机器阅读的线索。阅读它的机器包括用于部分视力或盲人的屏幕阅读器，将文本分成段落使其有机会正确呈现给这些用户。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T20:51:34.203

我相信这会奏效：

```
TextArea.Text = "Line 1" & vbCrLf & "Line 2" 
```

System.Environment.NewLine 可以用来代替 vbCrLf 如果你想少一点 VB6 的话。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-14T07:14:05.257

像“\n”这样的转义序列可以正常工作！即使有文本区域！我将一个带有“\n”的java字符串传递给了一个html textarea，它运行良好，因为它适用于java的控制台！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-02T14:07:12.067

这是我用纯 PHP 和 CSS 制作的方法：

```
/** PHP code    */
<?php
    $string = "the string with linebreaks";
    $string = strtr($string,array("."=>".\r\r",":"=>" : \r","-"=>"\r - "));
?> 
```

和 CSS ：

```
.your_textarea_class {
style='white-space:pre-wrap';
} 
```

You can do the same with regex (I'm learning how to build regex with pregreplace using an associative array, seems to be better for adding the \n\r which makes the breaks display).

# automation - 在 .NET 中创建一个通过 OPC 进行通信的应用程序从哪里开始？

> ID：66776
> 
> 赞同：5
> 
> 时间：2008-09-15T20:46:31.063
> 
> 标签：automation, communication, plc, opc, industrial

[在 .NET 中创建一个通过OPC](http://www.opcfoundation.org/Default.aspx/01_about/01_whatis.asp)进行通信的应用程序是从哪里开始的好地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-15T20:47:02.450

你可以在这里找到一篇好文章和一个库：http: [//www.codeproject.com/KB/COM/opcdotnet.aspx](http://www.codeproject.com/KB/COM/opcdotnet.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-22T22:17:06.110

Code Project 文章来自 .NET 的早期，可能不是今天的最佳选择。

替代方案包括 OPC Foundation 自己的[.NET API](http://www.opcfoundation.org/Downloads.aspx?CI=281)（需要 OPC Foundation 会员资格）或几个商业产品。 [OPCconnect.com](http://opcconnect.com/dotnet.php)列出了其中的一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T04:29:59.043

当心。我还没有使用适当地符合任何类型的调用约定的 OPC API，特别是在释放内存（COM，如文档中所述，或其他）领域。预计一个月的内存泄漏调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-11T21:03:41.137

SoftwareToolbox 的 OPCData.NET ( [http://www.opcdata.net/](http://www.opcdata.net/) ) 声称是 OPC 客户端的 100% 托管代码解决方案。SoftwareToolbox 还有一些其他的 OPC 库来帮助将 OPC 数据绑定到表单和 Web 界面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-18T20:56:49.647

如果购买商业工具包是一种选择，我使用了 Northern Dynamics[服务器工具包](http://www.nordyn.com/Main/Products/Main.htm)，它运行良好。工具包将消除其他问题中提到的许多问题（或者至少在出现问题时您应该获得支持）。

他们很好地包装了 OPC 协议，使其易于使用。在此处查看我的一个问题，了解我为帮助解决此问题而编写的[类型安全的 Variant 包装器。](https://stackoverflow.com/questions/1649264/how-to-make-a-type-safe-wrapper-around-variant-values)

# asp.net - 试图了解 Web 服务的性能

> ID：66777
> 
> 赞同：0
> 
> 时间：2008-09-15T20:46:32.980
> 
> 标签：asp.net, performance, web-services

大约一年前，我购买了一个 ASP.NET 脚本来检索 FedEx 的运费值。它构建一个使用 HttpWebRequest 传递给 FedEx 服务器的 XML 字符串，然后解析原始 XML。脚本的平均响应时间约为 900 毫秒。

所以前几天我在 FedEx 开发人员中心四处闲逛，发现他们提供了一些 C# 代码示例来使用他们的 Web 服务。我使用他们的代码和 WSDL 文件构建了一个小项目，惊讶地发现平均响应时间约为 2.5 秒。

有人可以帮我理解速度的差异吗？有没有办法让它更快？我使用 Web 服务的经验为零。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T20:52:47.210

由于验证和所谓的“SOAP 信封”，Web 服务在 XML over HTTP 调用方面有一些开销，这增加了一些额外的冗长。

也就是说，我不认为更大的响应时间是由于这个原因。您今天是否尝试运行 XML over HTTP 版本以获得合理的比较点？也许该网站只是忙。

另一种解释可能是编码错误。你永远不会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:54:23.680

好吧，ASP.NET 脚本可能会做一些不同于 C# 代码的事情。尝试捕获每个原始 HTTP 请求并回放它们。他们的表现一样吗？如果是这样，那么很可能是客户端代码存在差异。我的猜测是，一个是直接的 HTTP get/post 请求，另一个是 SOAP over HTTP(s)。

其他需要注意的事项： 1) 你是在为 ASP.NET 生产和为 C# 测试系统，还是它们都是生产的？2）假设两者都通过HTTPS。

基于 SOAP 的 Web 服务通常更“重”——尤其是如果您的请求最终执行 WS-*、签名等。您是否必须通过提供密钥/x.509 或其他凭据来签署您的 C# 请求?

根据对上述一些基础知识的回答，这个讨论可以有很多方法。

# build-automation - 有希望的替代方案？

> ID：66800
> 
> 赞同：91
> 
> 时间：2008-09-15T20:49:05.550
> 
> 标签：build-automation, makefile

多年来，我一直在使用 make 和 makefile，虽然这个概念是合理的，但实现仍有一些不足之处。

有没有人找到任何好的替代方案来使问题不会过度复杂化？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-15T20:51:09.727

查看[SCons](http://www.scons.org/)。例如 Doom 3 和 Blender 就使用了它。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-09-15T20:58:47.633

我有很多朋友对 CMake 发誓跨平台开发：

[http://www.cmake.org/](http://www.cmake.org/)

它是用于[VTK](http://www.vtk.org/)（除其他外）的构建系统，它是一个具有跨平台 Python、Tcl 和 Java 绑定的 C++ 库。我认为这可能是拥有这么多功能的最简单的东西。

你总是可以尝试标准的[autotools](http://en.wikipedia.org/wiki/GNU_build_system)。如果您只在 Unix 上运行并且坚持使用 C/C++，则 Automake 文件很容易组合在一起。集成更加复杂，而 autotools 远非最简单的系统。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-03-30T03:51:48.720

[doit](http://pydoit.org)是一个 Python 工具。它基于构建工具的概念，但更通用。

*   您可以定义任务/规则如何保持最新（不只是检查时间戳，不需要目标文件）
*   依赖关系可以由其他任务动态计算
*   任务的动作可以是 python 函数或 shell 命令

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-09-15T20:54:29.640

我建议使用[Rake](https://github.com/ruby/rake)。这是我找到的最简单的工具。

不过，如果 Ruby 不是你的菜，我用过的其他好工具是：

*   [AAP](http://www.a-a-p.org/) (Python)
*   [SCons](http://www.scons.org/) (Python)
*   [Ant](http://ant.apache.org/)（Java，XML 配置，相当复杂）

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2008-09-15T20:59:03.887

一些 GNOME 项目已经迁移到[waf](http://code.google.com/p/waf/)。

它是基于 Python 的，就像 Scons 一样，但也是独立的——所以不需要其他开发人员安装您最喜欢的构建工具，您只需将独立的构建脚本复制到您的项目中即可。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-03-21T14:47:21.407

请注意受和[`ninja`](https://ninja-build.org/)影响的构建工具（v1.8.2 2017 年 9 月）。[`tup`](http://gittup.org/tup/)[`redo`](https://github.com/apenwarr/redo)

自版本 2.8.8（2012 年 4 月）以来，构建文件生成器[`cmake`](http://cmake.org)（例如，用于 Unix Makefiles、Visual Studio、XCode、Eclipse CDT 等）也可以生成`ninja`构建文件，而且，afaik`ninja`现在甚至是`cmake`.

它应该优于该`make`工具（更好的依赖跟踪并且也是并行化的）。

`cmake`是一个已经很成熟的工具。您始终可以稍后选择构建工具，而无需修改配置文件。因此，如果将来开发出更好的构建，`cmake`您可以方便地切换到它。

请注意，对于 c/c++，改进编译时间有时会受到限制，因为预处理器中包含的头文件（特别是在使用仅包含头文件的库时，例如[boost](http://www.boost.org)和[eigen](http://eigen.tuxfamily.org)）希望将被[模块](https://stackoverflow.com/questions/3596147/modules-in-c11)的提议所取代（在技术审查中c++11 或最终在 c++1y 中）。查看此[演示文稿](http://isocpp.org/blog/2012/11/modules-update-on-work-in-progress-doug-gregor)以了解有关此问题的详细信息。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-01-08T19:13:21.117

我编写了一个名为[sake](http://tonyfischetti.github.io/sake/)的工具，它试图让编写类似makefile 的东西变得非常容易读写。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-15T20:56:10.523

这有点取决于你想要做什么。如果*你*想要的只是 make 风格的目标依赖和命令调用，那么 Make 实际上是完成任务的更好工具之一。:-) Rake 非常好，但对于一些简单的情况可能会很笨拙。Ant 当然是冗长的城市，但它更好地支持构建类 Java 语言（包括 Scala 和 Groovy）。此外，Ant*随处*可用。这是我使用它的主要原因。因为它在 Windows 上始终如一地工作，所以它实际上比 Make 更具跨平台性。

如果你想对类 Java 库进行依赖管理，Maven 是典型的选择，但我个人更喜欢 Buildr。它更快更容易定制（它基于 Rake）。不幸的是，它还没有像 Maven 那样无处不在。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-15T21:25:53.603

在考虑了一堆替代品之后，我仍然更喜欢 make 。当您通过编译器或 fastdep 之类的工具自动生成依赖项时，就没有什么可做的了。特别是，我不希望我的构建脚本与实现语言绑定，并且当有更多可读的替代方案可用时，我不喜欢用 XML 编写东西。公开通用语言的工具虽然有优点，但另一种解释语言没有（afaik）。 [Make有什么问题？](http://freecode.com/articles/what-is-wrong-with-make)可能会吸引您关于远离 make 的观点。

/艾伦

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-15T20:50:52.223

Ruby 的 make 系统称为 rake：[http ://rake.rubyforge.org/](http://rake.rubyforge.org/)

看起来很有希望。

总是有 Ant：[http](http://ant.apache.org) ://ant.apache.org ，我个人觉得这很可怕。然而，它是 Java 开发的事实上的标准。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-29T23:05:08.190

RTDA 的 FlowTracer 是另一个不错的选择，我在大型环境（数以万计的工作）中看到商业用途：[http ://www.rtda.com/flowtracer-design-flow-infrastructure-software](http://www.rtda.com/flowtracer-design-flow-infrastructure-software)

它有一个 GUI，它显示了依赖关系图，其中包含用于作业的颜色编码框和用于文件的椭圆形。当作业和文件的数量变多时，FlowTracer 等基于 GUI 的工具非常重要。

初始设置成本高于 Make。使用它设置您的第一个流程有一个学习曲线。之后，它变得更快。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T21:02:42.397

我不确定你在这里问的问题是否正确。

你追求简化的制作吗？在这种情况下，您需要让非常熟悉 make 的人创建一系列 (M|m)akefile 来简化您的问题。

或者你想看看底层技术？我们是否要强制执行内置于代码设计中并强制执行的按合同设计类型的架构？或者可能是语言本身，例如 Ada 及其规范（接口）和主体（实现）的概念？

你所追求的方向肯定会影响这样一个问题的潜在结果？

基本上，仅从那些真正改变的组件构建系统的新方法与采用具有设计内置此类机制的新技术的采用。

对不起，这不是一个直接的答案。只是想试着让你评估你想走哪条路。

干杯，

抢

# qt - 使用 Qt 自定义样式

> ID：66810
> 
> 赞同：5
> 
> 时间：2008-09-15T20:49:59.807
> 
> 标签：qt, widget

有没有人在 Qt 中构建自定义样式的经验？我的想法是一种影响所有类型小部件的全新样式。我在网上看到了一些自定义组合框的示例。但我不知道构建一个“完整”的新自定义样式需要多少时间和代码......也许有人可以给我一个提示。

我们考虑使用 Qt 4.3（甚至更高版本）...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T03:05:56.550

查看 Qt 4 中的[Stylesheets](http://doc.qt.io/qt-4.8/stylesheet.html)工具。虽然它仍然很麻烦，但它比做一个完整的自定义样式要容易得多。您可以一次只调整一个视觉方面并尝试一下。

它注重继承。因此，如果您在 QWidget 中设置字体样式，那么每个可视小部件也将使用该字体。等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-25T01:17:10.640

我开发了一种“新”样式，它改变了大部分应用程序的外观。这确实需要一些时间，并且进行了相当多的实验。我还从通用的 windows 样式中导出了我的样式，以允许它处理一些我不想弄乱的东西。总而言之，我想我花了一周的时间才得到了我想要的大部分东西，而且之前几乎没有接触过这些款式。

为了实际开发一个，我会进入他们的[样式示例](http://doc.qt.digia.com/4.4/widgets-styles.html)的源代码，它具有“木头”样式。我用我自己的样式代替了示例样式，并在使用示例程序检查它的外观时开始进行更改。根据您的开发方式，您可能需要一个配置文件，以便您可以轻松更改某些值而无需重新编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T21:41:59.417

我们过去曾做过（在 Qt 3 中），而且非常耗时。我们遇到了很多闪烁问题，重绘没有按照我们预期的方式工作，行为缓慢，Qt 实现中的错误。它不像看起来那么简单，而且几乎没有支持或用户体验。除非您需要一些非常特别的东西（就像我们所做的那样），否则我会说这不值得麻烦。

其他框架应该使它更容易（一些基于 Java 的？），但我没有第一手经验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T22:28:48.793

您可能想查看现有样式。[您可以在 kde-look.org 的Styles / 4.0 部分](http://kde-look.org/index.php?xcontentmode=9)找到其中不少。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-01T00:43:51.647

如果您不需要从根本上更改小部件样式，您可能想尝试使用小部件样式表：

```
 http://doc.qt.digia.com/4.4/stylesheet.html 
```

# c# - 在 C# 中表示参数化枚举的最佳方法？

> ID：66819
> 
> 赞同：1
> 
> 时间：2008-09-15T20:50:38.260
> 
> 标签：c#, enums, ocaml, haxe

是否有任何好的解决方案来表示参数化枚举`C# 3.0`？我正在寻找像[OCaml](http://www.ocaml.org)或[Haxe](http://www.haxe.org)这样的东西。我现在只能想到具有简单枚举字段以便于切换的类层次结构，也许有更好的想法？

请参阅下面其中一个回复中的 Ocaml 示例，以下是 Haxe 代码：

```
enum Tree {
   Node(left: Tree, right: Tree);
   Leaf(val: Int);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T21:46:23.337

不熟悉 OCaml 或 Haxe，也不够聪明，无法理解其他解释，我去查阅了[Haxe 枚举文档](https://haxe.org/manual/types-enum-instance.html)——底部的“枚举类型参数”位似乎是相关部分。

基于此，我的理解如下：

“正常”枚举基本上是一个值，仅限于您在枚举定义中定义的内容。C# 示例：

```
enum Color{ Red, Green, Yellow, Blue };
Color c = Color.Red; 
```

`c`可以是`Red`, `Green`, `Yellow`, 或`Blue`, 但没有别的。

在 Haxe 中，您可以将复杂类型添加到枚举，从他们的页面中设计的示例：

```
enum Cell<T>{ 
  empty; 
  cons( item : T, next : Cell<T> )
}

Cell<int> c = <I don't know>; 
```

这*似乎*意味着它`c`被限制为文字值`empty`（如我们老式的 C# 枚举），或者它也可以是复杂类型`cons(item, next)`，其中`item`是 a`T`和`next`是 a `Cell<T>`。

从未使用过它，它看起来可能会生成一些匿名类型（就像 C# 编译器在你这样做时所做的那样`new { Name='Joe'}`。
每当你“访问”枚举值时，你必须声明`item`并且`next`当你这样做时，看起来他们绑定到临时局部变量。

Haxe 示例 - 您可以看到 'next' 被用作临时局部变量以从匿名 cons 结构中提取数据：

```
switch( c ) {
  case empty : 0;
  case cons(item,next): 1 + cell_length(next);
} 
```

老实说，当我“点击”它似乎在做什么时，这让我大吃一惊。它看起来非常强大，我明白您为什么要在 C# 中寻找类似的功能。

C# 枚举与最初复制它们的 C/++ 枚举几乎相同。这基本上是一种很好的说法`#define Red 1`，因此当您传递`Color`对象时，编译器可以使用整数而不是字符串进行比较和存储。

我在 C# 中这样做的目的是使用泛型和接口。像这样的东西：

```
public interface ICell<T> {
   T Item{ get; set; }
   ICell<T>{ get; set; }
}

class Cons<T> : ICell<T> {
  public T Item{ get; set; } /* C#3 auto-backed property */
  public Cell<T> Next{ get; set; }
}

class EmptyCell<T> : ICell<T>{
  public T Item{ get{ return default(T); set{ /* do nothing */ }; }
  public ICell<T> Next{ get{ return null }; set{ /* do nothing */; }
} 
```

然后你可以有一个`List<ICell<T>>`包含项目和下一个单元格的，你可以`EmptyCell`在最后插入（或者只是将`Next`引用显式设置为空）。优点是因为`EmptyCell`不包含成员变量，所以它不需要任何存储空间（如`empty`Haxe 中的），而`Cons`单元格则需要。
编译器还可以内联/优化其中的方法，`EmptyCell`因为它们什么都不做，因此与仅将`Cons`其成员数据设置为 null 相比，速度可能会有所提高。

我真的不知道。我欢迎任何其他可能的解决方案，因为我对我的解决方案并不特别自豪:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T02:38:56.910

使用具有静态属性的**类**来表示枚举值。您可以选择使用私有构造函数来强制对类的所有引用都通过静态属性。

看看`System.Drawing.Color`课堂。它使用这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T20:58:26.137

C#（据我所知，一般是 .NET 框架）不像 Java 那样支持参数化枚举。话虽如此，您可能想查看属性。Java 枚举能够实现的一些功能在某种程度上可以通过属性实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T21:15:34.970

仅仅为此使用一个类有什么问题？它很丑陋，但在 Java 人员获得语言集成 Enum 支持之前，他们就是这样做的！

# javascript - 脚本标记中何时需要 CDATA 部分？

> ID：66837
> 
> 赞同：951
> 
> 时间：2008-09-15T20:52:14.700
> 
> 标签：javascript, html, xhtml, cdata

脚本标记中是否需要**CDATA**标记，如果需要，何时需要？

换句话说，这是何时何地：

```
<script type="text/javascript">
//<![CDATA[
...code...
//]]>
</script> 
```

比这更可取：

```
<script type="text/javascript">
...code...
</script> 
```

* * *

## 回答 #1

> 赞同：600
> 
> 时间：2008-09-15T20:54:44.943

如果您需要将文档解析为 XML（例如，当 XHTML 页面被解释为 XML 时）*并且您希望能够编写文字`i<10`and`a && b`而不是`i&lt;10`and`a &amp;&amp; b`* ，则需要 CDATA 部分，因为 XHTML 会将 JavaScript 代码解析为已解析的字符数据与默认的字符数据相反。这对于存储在外部源文件中的脚本来说不是问题，但是对于 XHTML 中的任何内联 JavaScript，您*可能*需要使用 CDATA 部分。

请注意，许多 XHTML 页面从未打算被解析为 XML，在这种情况下这不会成为问题。

有关该主题的精彩文章，请参阅[https://web.archive.org/web/20140304083226/http://javascript.about.com/library/blxhtml.htm](https://web.archive.org/web/20140304083226/http://javascript.about.com/library/blxhtml.htm)

* * *

## 回答 #2

> 赞同：236
> 
> 时间：2008-09-15T20:58:56.617

当浏览器将标记视为 XML 时：

```
<script>
<![CDATA[
    ...code...
]]>
</script> 
```

当浏览器将标记视为 HTML 时：

```
<script>
    ...code...
</script> 
```

当浏览器将标记视为 HTML 并且您希望 XHTML 1.0 标记（例如）进行验证时。

```
<script>
//<![CDATA[
    ...code...
//]]>
</script> 
```

* * *

## 回答 #3

> 赞同：135
> 
> 时间：2009-09-20T09:05:20.590

## HTML

HTML 解析器会将脚本之间的所有内容`<script>`视为`</script>`脚本的一部分。~~有些实现甚至不需要正确的结束标签；他们在“”处停止脚本解释，`</`根据[规范](http://www.w3.org/TR/html401/appendix/notes.html#notes-specifying-data)~~这是正确的。

> **更新**在 HTML5 和当前的浏览器中，情况不再如此。

因此，在 HTML 中，这是*不可能*的：

```
<script>
var x = '</script>';
alert(x)
</script> 
```

一`CDATA`节根本**没有效果**。这就是为什么你需要写

```
var x = '<' + '/script>'; // or
var x = '<\/script>'; 
```

或类似的。

这也适用于作为`text/html`. （因为 IE 不支持 XML 内容类型，所以大部分情况都是如此。）

## XML

在 XML 中，适用不同的规则。请注意，（非 IE）浏览器仅在 XHMTL 文档以 XML 内容类型提供时才使用 XML 解析器。

对于 XML 解析器，一个`script`标签并不比任何其他标签好。特别地，脚本节点可能包含非文本子节点，由“ `<`”触发；“ `&`”符号表示字符实体。

因此，在 XHTML 中，这是*不可能*的：

```
<script>
if (a<b && c<d) {
    alert('Hooray');
}
</script> 
```

要解决此问题，您可以将整个脚本包装在一个`CDATA`部分中。这告诉解析器：“在本节中，**不要将“ `<`”和“ `&`”视为控制字符**。为了防止 JavaScript 引擎解释 " `<![CDATA[`" 和 " `]]>`" 标记，您可以将它们包装在注释中。

如果您的脚本不包含任何“ `<`”或“ `&`”，则无论如何您都不需要`CDATA`节。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2010-03-01T19:26:26.147

基本上它是允许编写一个既是 XHTML 又是 HTML 的文档。问题是在 XHTML 中，XML 解析器会解释*脚本*标签中的 &,<,> 字符并导致 XML 解析错误。因此，您可以使用实体编写 JavaScript，例如：

```
if (a &gt; b) alert('hello world'); 
```

但这是不切实际的。更大的问题是，如果您以 HTML 格式阅读页面，则标记*脚本*“默认”被视为 CDATA，这样的 JavaScript 将不会运行。因此，如果您希望同一个页面既可以使用 XHTML 也可以使用 HTML 解析器，您需要将*脚本*标记包含在 XHTML 中的 CDATA 元素中，而不是将其包含在 HTML 中。

这个技巧将 CDATA 元素的开始标记为 JavaScript 注释；在 HTML 中，JavaScript 解析器会忽略 CDATA 标记（它是注释）。在 XHTML 中，XML 解析器（在 JavaScript 之前运行）检测到它并将直到 CDATA 结束的其余部分视为 CDATA。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2010-03-01T19:19:36.257

这是一个 X(HT)ML 的东西。当您在 JavaScript 中使用`<`和之类的符号时`>`，例如比较两个整数时，必须像 XML 一样对其进行解析，因此它们将标记为标签的开始或结束。

CDATA 表示以下几行（所有内容`]]>`都不是 XML，因此不应以这种方式解析。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2008-09-15T20:56:21.117

不要在 HTML4 中使用 CDATA，但您*应该**在*XHTML 中使用 CDATA，并且如果您有像 < 和 > 这样的非转义符号，则*必须在 XML 中使用 CDATA。*

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2010-03-01T19:20:35.020

**当您在页面中嵌入 JavaScript 而不是外部引用时，它可以确保 XHTML 验证正常工作。**

XHTML 要求您的页面严格符合 XML 标记要求。由于 JavaScript 可能包含具有特殊含义的字符，因此您必须将其包装在 CDATA 中以确保验证不会将其标记为格式错误。

> > 对于 Web 上的 HTML 页面，您只需在 和 标记之间包含所需的 JavaScript。当您验证网页上的 HTML 时，JavaScript 内容被认为是 CDATA（字符数据），因此被验证器忽略。如果您在设置网页时遵循更新的 XHTML 标准，则情况并非如此。对于 XHTML，脚本标签之间的代码被认为是 PCDATA（已解析的字符数据），因此由验证器处理。
> > 
> > 因此，您不能只在页面上的脚本标记之间包含 JavaScript 而不会“破坏”您的网页（至少就验证器而言）。

您可以在此处了解[有关 CDATA](http://en.wikipedia.org/wiki/CDATA)的更多信息，并在此处[了解有关 XHTML 的更多信息](http://en.wikipedia.org/wiki/XHTML)。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2010-03-01T19:19:43.650

CDATA 表示其中的内容不是 XML。

这是[维基百科上的解释](http://en.wikipedia.org/wiki/CDATA)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-09-15T20:54:38.267

当您要严格遵守 XHTML 时，您需要 CDATA 小于，并且不会将 & 标记为无效字符。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2010-03-01T19:19:12.170

以避免在 xhtml 验证期间出现 xml 错误。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2010-03-01T19:19:19.267

CDATA 告诉浏览器按原样显示文本，而不是将其呈现为 HTML。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2012-08-27T20:37:56.907

CDATA 在任何 XML 方言中都是必需的，因为 XML 节点中的文本在被评估为 JavaScript 之前被视为子元素。这也是[JSLint 抱怨](https://stackoverflow.com/questions/8019216/1113772/9881897#9881897)正则表达式中的`<`字符的原因。

**参考**

*   [创建声明性 XML UI 语言](http://www.ibm.com/developerworks/java/library/x-decxmlui/)
*   [Web 的未来：富客户端、富浏览器、富门户](http://xul.sourceforge.net/talk/mtd-may-2004/slides.html)

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2012-08-29T22:50:32.787

CDATA 表示其中的内容不是 XML。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-15T20:53:21.997

[当您希望它验证时](http://javascript.about.com/library/blxhtml.htm)（在 XML/XHTML 中 - 谢谢[Loren Segal](https://stackoverflow.com/users/6436/loren-segal)）。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2010-03-01T19:19:14.677

这样旧的浏览器就不会解析 Javascript 代码并且页面不会中断。

向后兼容。一定会喜欢的。

# java - JavaScript 和 JMS 的集成

> ID：66840
> 
> 赞同：3
> 
> 时间：2008-09-15T20:52:23.200
> 
> 标签：java, javascript, jms, ejb, activemq

在哪里可以找到集成 JavaScript 和 JMS（Java 消息服务）的指南？

我想要一种最佳实践或成熟的技术，使我能够直接或间接地接收来自某个主题的消息并根据该消息更新站点。我正在考虑创建两个组件，一个用于 Web 模块的 servlet，一个用于 EJB 模块的 MDB（消息驱动 Bean）。Web 客户端将接收来自 JMS 主题的消息，而 MDB 将处理 onMessage。

这听起来正确吗？你见过任何例子吗？

编辑：我将 ActiveMQ 用于 JMS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T02:42:43.827

我想[这](http://activemq.apache.org/ajax.html)就是你的答案。看起来它已融入 ActiveMQ。我尝试了这些示例，它们似乎有效。

[http://activemq.apache.org/ajax.html](http://activemq.apache.org/ajax.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T21:02:58.823

我会尝试使用[DWR](http://directwebremoting.org/)将 JavaScript 与您的 Java 应用程序集成。它使 Java 到 JavaScript 的通信变得透明，并且只需要一个 servlet + 配置要公开的内容。我没有用 JMS 做这个，但它应该是一样的。三种技术共同解决了我所有的集成问题，[Spring](http://springframework.org)、[Mule](http://mulesource.org)和 DWR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T21:16:03.097

您可以在此处找到对 Dojo/Bayeux 方法的一些引用
[http://www.pathf.com/blogs/2006/08/bayeux_a_json_p/](http://www.pathf.com/blogs/2006/08/bayeux_a_json_p/)

如果您使用的是 WebSphere 6.0 或更高版本，那么 Web 2.0 Feature Pack 包含一个实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T12:40:01.813

[Seam 框架](http://www.seamframework.org/)支持从基于 JavaScript的客户端订阅 JMS 主题：

[http://docs.jboss.com/seam/2.0.2.GA/reference/en-US/html/remoting.html#d0e14169](http://docs.jboss.com/seam/2.0.2.GA/reference/en-US/html/remoting.html#d0e14169)

# c - 如何以无人身份运行程序？

> ID：66870
> 
> 赞同：13
> 
> 时间：2008-09-15T20:55:36.143
> 
> 标签：c, linux, security, ubuntu

我想要一个用户特权（不是 root）进程以 user 身份启动新进程`nobody`。我已经尝试直接调用`setuid`失败，并且 -1 `EPERM`on `Ubuntu 8.04`：

```
#include <sys/types.h>
#include <unistd.h>

int main() { 
       setuid(65534);
       while (1);
       return 0;
} 
```

我应该怎么做呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-15T21:02:26.190

您*将*需要系统管理员的帮助和信任。普通用户不能代表其他用户运行他们选择的可执行文件。

她可能会将您的应用程序添加到`/etc/sudoers`适当的设置中，您就可以像使用`sudo -u nobody`. 这适用于脚本和二进制可执行文件。

另一种选择是她将在您`chown nobody`的`chmod +s`二进制可执行文件上执行，您将能够直接执行它。每次可执行文件更改时都必须重复此任务。

如果您将创建一个简单的帮助程序可执行文件，这也适用于脚本`exec("/home/you/bin/your-application")`。可以将此可执行文件设置为 suid-nobody（见上文），您可以自由修改`your-application`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:57:34.313

据我所知，除非您是 root 或设置了 sudo 以允许您切换用户，否则您不能。或者，您可以让您的可执行文件在其上设置 suid 位，并让任何人拥有它。但这也需要root访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T21:15:52.740

[`calife`](http://www.keltia.net/programs/calife/)是 的替代品`sudo`。

> Calife 是一个小程序，它使 UNIX 系统管理员能够在他/她的机器上成为 root（或其他用户），而无需提供他/她自己的 root 密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T21:21:08.780

“nobody”用户仍然是用户。我不确定您让程序以无人身份运行的理由是什么，它不会增加任何额外的安全性。你更有可能对其他问题敞开心扉。

我会按照小队的建议使用帮助应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T01:38:34.717

我今天在阅读 LWN 时遇到了[setuid-sandbox](http://code.google.com/p/setuid-sandbox/)项目，它可以满足我正在寻找的正确方法。

# java - Java小程序永久缓存，不下载新版本？

> ID：66875
> 
> 赞同：6
> 
> 时间：2008-09-15T20:56:06.017
> 
> 标签：java, caching, applet

我们有一个案例，客户端似乎永远在缓存小程序的版本。我们在标签中`<param name="cache_version">`正确地使用了`<object>`标签，或者我们认为。我们从一个版本字符串`7.1.0.40`转到`7.1.0.42`，这仅触发了大约一半客户的下载。

客户端运行的 JRE 版本似乎并不重要。我们已经看到人们在 1.4、1.5 和 1.6 上遇到了这个问题。

有没有人有显式缓存版本的经验？它是否更可靠地工作（忽略速度）而不是依赖于`cache_archive`“最后修改”和/或“内容长度”值（根据[Sun 的站点](http://java.sun.com/j2se/1.4.2/docs/guide/plugin/developer_guide/applet_caching.html)）？

仅供参考，对象块如下所示：

```
<object>
  <param name="ARCHIVE" value="foo.jar">
  <param name="CODE" value="com.foo.class">
  <param name="CODEBASE" value=".">
  <param name="cache_archive" value="foo.jar">
  <param name="cache_version" value="7.1.0.40">
  <param name="NAME" value="FooApplet">
  <param name="type" value="application/x-java-applet;jpi-version=1.4.2_13">
  <param name="scriptable" value="true">
  <param name="progressbar" value="true"/>
  <param name="boxmessage" value="Loading Web Worksheet Applet..."/>
</object> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-15T21:02:57.577

不幸的是，不同版本的 Java 插件具有不同的缓存行为。设置 Cache-Control 和 Last-Modified HTTP 标头是理想的解决方案，但它仅适用于[最新版本](http://java.sun.com/javase/6/docs/technotes/guides/deployment/enhancements.html)的 JRE。

保证工作的唯一解决方案是在版本更改时重命名您的应用程序 jar（我们在尝试其他技巧时看到奇怪的缓存行为，例如基于文件日期添加查询字符串）。如果您有一个适当的自动化部署系统，这并不难做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:34:37.157

您可以使用`Java Control Panel`.
例如，在 Win XP 上

```
Start -> Control Panel -> Java -> Temporary Internet Files[View] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-06T10:55:38.163

根据[此链接](http://docs.oracle.com/javase/1.3/docs/guide/misc/appletcaching.html) ，不应在“archive”和“cache_archive”参数中列出相同的 jar 文件。在这种情况下，JAR 文件使用本机浏览器缓存进行缓存。

# testing - 如何测试信用卡交互？

> ID：66880
> 
> 赞同：12
> 
> 时间：2008-09-15T20:56:32.520
> 
> 标签：testing, credit-card

阅读[此答案](https://stackoverflow.com/questions/63668/confessions-of-your-worst-wtf-moment-what-not-to-do#63730)后，我想知道是否有办法获得“测试”信用卡号。您可以尝试但实际上不收取任何费用的一种。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-15T21:08:49.183

```
MasterCard: 5431111111111111
Amex: 341111111111111
Discover: 6011601160116611
American Express (15 digits)  378282246310005
American Express (15 digits)  371449635398431
American Express Corporate (15 digits)  378734493671000
Diners Club (14 digits)  30569309025904
Diners Club (14 digits) 38520000023237
Discover (16 digits)  6011111111111117
Discover (16 digits)  6011000990139424
JCB (16 digits) 3530111333300000
JCB (16 digits)  3566002020360505
MasterCard (16 digits)  5555555555554444
MasterCard (16 digits)  5105105105105100
Visa (16 digits)  4111111111111111
Visa (16 digits)  4012888888881881
Visa (13 digits)  4222222222222 
```

**信用卡前缀号码：**

```
Visa: 13 or 16 numbers starting with 4
MasterCard: 16 numbers starting with 5
Discover: 16 numbers starting with 6011
AMEX: 15 numbers starting with 34 or 37 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:58:01.487

大多数支付网关提供此类数字来测试其服务，但它们通常仅适用于这些网关的暂存/测试版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T21:00:12.637

根据您的支付网关，有两种方法可以测试交易。

例如，使用 authorize.net，如果你发送“X_TEST_TRANSACTION=true”（或类似的东西，已经很久了），你的 POST，它会在测试模式下运行它。

他们还提供了一个测试 VISA 和测试万事达卡号码，如果处于测试模式，该号码将始终以批准的方式返回，而在生产模式下则拒绝。

查看您的网关 API 文档，那里将清楚地详细说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:59:08.723

大多数支付处理器要么提供一个测试号码（PayPal 提供），要么提供进入测试模式的能力（实际上没有交易被处理）。查阅文档。

# integer - 检查两个整数是否具有相同符号的最简单方法？

> ID：66882
> 
> 赞同：71
> 
> 时间：2008-09-15T20:57:04.390
> 
> 标签：integer, bit-manipulation, sign

检查两个整数是否具有相同符号的最简单方法是什么？是否有任何简短的按位技巧来做到这一点？

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2008-09-15T22:06:19.607

有什么问题

```
return ((x<0) == (y<0)); 
```

?

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2008-09-15T21:12:14.310

这是一个在 C/C++ 中工作的版本，它不依赖于整数大小或存在溢出问题（即 x*y>=0 不起作用）

```
bool SameSign(int x, int y)
{
    return (x >= 0) ^ (y < 0);
} 
```

当然，你可以geek out和template：

```
template <typename valueType>
bool SameSign(typename valueType x, typename valueType y)
{
    return (x >= 0) ^ (y < 0);
} 
```

注意：由于我们使用异或，当符号相同时，我们希望 LHS 和 RHS 不同，因此对零进行不同的检查。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2008-09-15T21:06:18.160

```
(a ^ b) >= 0 
```

如果符号相同，将评估为 1，否则评估为 0。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-09-15T21:06:48.673

我会警惕任何确定整数符号的按位技巧，因为你必须假设这些数字在内部是如何表示的。

几乎 100% 的情况下，整数将作为二进制补码存储[，](http://en.wikipedia.org/wiki/Twos_Compliment)但除非您使用保证特定存储格式的数据类型，否则对系统内部进行假设并不是一个好习惯。

在二进制的恭维中，您可以检查整数中的最后（最左边）位以确定它是否为负，因此您可以只比较这两个位。这意味着 0 将与正数具有相同的符号，这与大多数语言中实现的符号函数不一致。

就个人而言，我只会使用您选择的语言的符号功能。这样的计算不太可能出现任何性能问题。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-15T21:01:24.273

假设 32 位整数：

```
bool same = ((x ^ y) >> 31) != 1; 
```

稍微简洁一点：

```
bool same = !((x ^ y) >> 31); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-15T21:01:46.470

(整数 1 * 整数 2) > 0

因为当两个整数共用一个符号时，相乘的结果总是正的。

如果您无论如何都想将 0 视为相同的符号，也可以使其 >= 0。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-15T21:25:30.563

我不确定我是否会认为“按位技巧”和“最简单”是同义词。我看到很多假设有符号 32 位整数的答案（尽管要求无符号整数*会很愚蠢）；*我不确定它们是否适用于浮点值。

似乎“最简单”的检查是比较两个值与 0 的比较；假设可以比较类型，这是非常通用的：

```
bool compare(T left, T right)
{
    return (left < 0) == (right < 0);
} 
```

如果符号相反，你就错了。如果符号相同，则为真。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-15T22:45:33.757

假设二进制补码算术（[http://en.wikipedia.org/wiki/Two_complement](http://en.wikipedia.org/wiki/Two_complement)）：

```
inline bool same_sign(int x, int y) {
    return (x^y) >= 0;
} 
```

在经过优化的现代处理器上，这只需两条指令和不到 1ns 的时间。

不假设二进制补码算术：

```
inline bool same_sign(int x, int y) {
    return (x<0) == (y<0);
} 
```

这可能需要一两个额外的指令，并且需要更长的时间。

使用乘法是个坏主意，因为它容易溢出。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-15T20:58:17.320

如果 (x * y) > 0...

假设非零等。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-15T21:04:56.680

作为技术说明，即使在现代架构上，位复杂的解决方案也将比乘法更有效。您只节省了大约 3 个周期，但您知道他们所说的“节省一分钱”...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-15T20:59:37.223

就在我的头顶...

```
int mask = 1 << 31;
(a & mask) ^ (b & mask) < 0; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-15T21:00:12.420

if (a*b < 0) 符号不同，否则符号相同（或 a 或 b 为零）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-15T21:15:32.740

对于具有二进制补码算术的任何大小的 int：

```
#define SIGNBIT (~((unsigned int)-1 >> 1))
if ((x & SIGNBIT) == (y & SIGNBIT))
    // signs are the same 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-15T21:18:07.930

假设 32 位

`if(((x^y) & 0x80000000) == 0)`

`if(x*y>0)`...由于溢出，答案很糟糕

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2011-06-02T14:18:52.097

无分支 C 版本：

```
int sameSign(int a, int b) {
    return ~(a^b) & (1<<(sizeof(int)*8-1));
} 
```

整数类型的 C++ 模板：

```
template <typename T> T sameSign(T a, T b) {
    return ~(a^b) & (1<<(sizeof(T)*8-1));
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-15T21:01:27.203

回想我的大学时代，在大多数机器表示中，整数的最左边不是数字为负数时为 1，为正数时为 0 吗？

不过，我想这是相当依赖机器的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-15T21:04:14.593

int same_sign = !( (x >> 31) ^ (y >> 31) );

if (same_sign) ... 否则 ...

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-12-01T22:16:58.890

使用[std::signbit](http://en.cppreference.com/w/cpp/numeric/math/signbit)的更好方法如下：

```
std::signbit(firstNumber) == std::signbit(secondNumber); 
```

它还支持其他基本类型（`double`,`float`等`char`）。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-05-22T13:20:21.853

```
#include<stdio.h>

int checksign(int a, int b)
{
 return (a ^ b); 
}

void  main()
{
    int a=-1, b = 0;

    if(checksign(a,b)<0)
    {
        printf("Integers have the opposite sign");
    }
    else
    {
        printf("Integers have the same sign");
    }
} 
```

# ruby-on-rails - Ruby on Rails 应用程序的 OpenID 支持

> ID：66885
> 
> 赞同：22
> 
> 时间：2008-09-15T20:57:18.400
> 
> 标签：ruby-on-rails, openid

在 Ruby on Rails 应用程序中启用 OpenID 登录的最新技术是什么？这是一个社区 wiki，提供此问题的最新答案。

## 授权逻辑

最先进的身份验证解决方案似乎是[Authlogic](http://github.com/binarylogic/authlogic)。它支持带有[Authlogic OpenID 插件](http://github.com/binarylogic/authlogic_openid)的 OpenID 。它支持 Rails 4 和 3。Rails 2 在 rails2 分支中得到支持。

您可能想观看[“带有 Authlogic 的 OpenID”railscast](http://railscasts.com/episodes/170-openid-with-authlogic)（和[“Authlogic” railscast](http://railscasts.com/episodes/160-authlogic)）。

有一个名为[Authlogic OpenID Selector Example](http://github.com/shripadk/authlogic_openid_selector_example)的示例应用程序。

## 设计

Devise 是 Rails 的灵活身份验证框架。它支持 OpenID 和[`devise_openid_authenticatable`](https://github.com/nbudin/devise_openid_authenticatable).

## restful_authentication

另一个选择的身份验证库是[`restful_authentication`](http://github.com/technoweenie/restful-authentication)Rails 插件。好像你还需要安装[`open_id_authentication`](http://github.com/rails/open_id_authentication)插件。

您可能想观看（旧的，大约 2007 年）[“OpenID Authentication” railscast](http://railscasts.com/episodes/68-openid-authentication)。

## Ruby OpenID

OpenID 协议的原始支持由[Ruby OpenID](http://github.com/openid/ruby-openid)库处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-23T10:36:22.577

最终的资源*应该是*rails [wiki](http://wiki.rubyonrails.org/rails/pages/openid)，尽管我使用*应该*是明智的，因为在 OpenID 支持方面情况发生了相当大的变化。

Ryan Bates 在 Openid 上的[Railscast](http://railscasts.com/episodes/68-openid-authentication)是我发现的最好的东西。尽管它是使用 Rails 1.2.3 录制的，但我已经能够成功地使用 Rails 2.1.0 完成教程。唯一需要注意的是：

```
gem install ruby-openid 
```

我安装了 2.1.2，而不是 railscast 中使用的 1.1.4。

使用的 OpenID 插件是 open_id_authentication，我结合 git://github.com/technoweenie/restful-authentication.git 的 restful_authentication 对其进行了测试

注意：我随后在一篇[博文中写了这篇文章](http://tardate.blogspot.com/2008/10/restfulauthentication-and-openid-with.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T21:07:28.877

查看[OpenId 上的 Railscast 以](http://railscasts.com/episodes/68-openid-authentication)了解更多信息。我不确定它是否/如何与 restful_authentication 一起工作，但可能是一个很好的资源。（我还没看）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T21:10:28.633

我所做的是使用 restful-authentication，然后将 open_id_authentication 插件混合到您的应用程序中。在测试应用程序上设置 open_id_authentication 插件也可能会有所帮助，因此您可以确定需要对 users 表进行的更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-26T21:52:37.080

除了 restful_authentication 之外，[Bort现在还包含 OpenID。](http://jimneath.org/2008/09/26/bort-now-with-openid.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-24T02:00:42.313

奇怪的是，自 2007 年以来，这个主题似乎并没有受到 Rails 社区的太多关注。

Bort 的最新主干似乎不适用于 Rails 2.3.x，所以我将它分叉并让它工作。

我还添加了一些我个人使用的东西——比如 yui reset/base、jquery 等。

fork 仍在进行中，但我希望为 restful auth、google auth、facebook connect、twitter 等提供广泛的、经过测试的身份验证支持。

[http://github.com/lukebayes/bort](http://github.com/lukebayes/bort)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-08-20T13:14:48.737

我发现使用 BinaryLogic 的 Authlogic gem 非常简单易用。请参阅[Authlogic](http://github.com/binarylogic/authlogic/tree/master "认证逻辑")及其[OpenID 插件](http://github.com/binarylogic/authlogic_openid/tree/master "OpenID 插件")。

您可以下载[示例应用程序](http://github.com/binarylogic/authlogic_example/tree/master)或[尝试一下](http://authlogicexample.binarylogic.com/)！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-04T20:20:27.583

我所知道的支持 OpenID Connect（最新版本）的唯一 gem 是：

[https://github.com/nov/openid_connect](https://github.com/nov/openid_connect)

但是，它绝对没有文档。:(

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-15T21:11:36.417

密切关注[博尔特](http://jimneath.org/2008/09/09/bort-base-rails-application/)。它是一个基本的 rails 应用程序，其中已经设置了 restful_authentication 。这样做的人正计划添加 OpenID。

# c# - C#中的树数据结构

> ID：66893
> 
> 赞同：275
> 
> 时间：2008-09-15T20:58:20.037
> 
> 标签：c#, data-structures

我一直在寻找 C# 中的树或图形数据结构，但我想没有提供。[使用 C# 2.0 对数据结构进行广泛检查，](http://msdn.microsoft.com/en-us/library/ms379574.aspx)了解原因。是否有一个方便的库通常用于提供此功能？或许可以通过一种[策略模式](https://en.wikipedia.org/wiki/Strategy_pattern)来解决文章中提出的问题。

我觉得实现自己的树有点傻，就像我实现自己的 ArrayList 一样。

我只想要一个可以不平衡的通用树。想想目录树。 [C5](https://itu.dk/research/c5/)看起来很漂亮，但它们的树结构似乎被实现为平衡的红黑树，比表示节点层次结构更适合搜索。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2008-09-15T21:04:39.600

我最好的建议是没有标准的树数据结构，因为有很多方法可以实现它，不可能用一种解决方案覆盖所有基础。解决方案越具体，它就越不可能适用于任何给定的问题。我什至对 LinkedList 感到恼火——如果我想要一个循环链表怎么办？

您需要实现的基本结构将是节点的集合，这里有一些选项可以帮助您入门。让我们假设类 Node 是整个解决方案的基类。

如果您只需要向下导航树，那么 Node 类需要一个子列表。

如果您需要向上导航树，那么 Node 类需要一个指向其父节点的链接。

构建一个 AddChild 方法来处理这两点的所有细节以及必须实现的任何其他业务逻辑（子限制、对子排序等）

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2010-01-06T12:29:12.200

```
delegate void TreeVisitor<T>(T nodeData);

class NTree<T>
{
    private T data;
    private LinkedList<NTree<T>> children;

    public NTree(T data)
    {
         this.data = data;
        children = new LinkedList<NTree<T>>();
    }

    public void AddChild(T data)
    {
        children.AddFirst(new NTree<T>(data));
    }

    public NTree<T> GetChild(int i)
    {
        foreach (NTree<T> n in children)
            if (--i == 0)
                return n;
        return null;
    }

    public void Traverse(NTree<T> node, TreeVisitor<T> visitor)
    {
        visitor(node.data);
        foreach (NTree<T> kid in node.children)
            Traverse(kid, visitor);
    }
} 
```

简单的递归实现...< 40 行代码...您只需要在类之外保留对树根的引用，或者将其包装在另一个类中，也许重命名为 TreeNode？

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2012-05-04T03:18:33.587

在我看来，这是我的，与[Aaron Gage 的](https://stackoverflow.com/a/2012855/64334)非常相似，只是更传统一点。就我的目的而言，我没有遇到任何性能问题`List<T>`。如果需要，切换到 LinkedList 很容易。

* * *

```
namespace Overby.Collections
{
    public class TreeNode<T>
    {
        private readonly T _value;
        private readonly List<TreeNode<T>> _children = new List<TreeNode<T>>();

        public TreeNode(T value)
        {
            _value = value;
        }

        public TreeNode<T> this[int i]
        {
            get { return _children[i]; }
        }

        public TreeNode<T> Parent { get; private set; }

        public T Value { get { return _value; } }

        public ReadOnlyCollection<TreeNode<T>> Children
        {
            get { return _children.AsReadOnly(); }
        }

        public TreeNode<T> AddChild(T value)
        {
            var node = new TreeNode<T>(value) {Parent = this};
            _children.Add(node);
            return node;
        }

        public TreeNode<T>[] AddChildren(params T[] values)
        {
            return values.Select(AddChild).ToArray();
        }

        public bool RemoveChild(TreeNode<T> node)
        {
            return _children.Remove(node);
        }

        public void Traverse(Action<T> action)
        {
            action(Value);
            foreach (var child in _children)
                child.Traverse(action);
        }

        public IEnumerable<T> Flatten()
        {
            return new[] {Value}.Concat(_children.SelectMany(x => x.Flatten()));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2013-09-12T20:58:44.383

另一个树结构：

```
public class TreeNode<T> : IEnumerable<TreeNode<T>>
{

    public T Data { get; set; }
    public TreeNode<T> Parent { get; set; }
    public ICollection<TreeNode<T>> Children { get; set; }

    public TreeNode(T data)
    {
        this.Data = data;
        this.Children = new LinkedList<TreeNode<T>>();
    }

    public TreeNode<T> AddChild(T child)
    {
        TreeNode<T> childNode = new TreeNode<T>(child) { Parent = this };
        this.Children.Add(childNode);
        return childNode;
    }

    ... // for iterator details see below link
} 
```

示例用法：

```
TreeNode<string> root = new TreeNode<string>("root");
{
    TreeNode<string> node0 = root.AddChild("node0");
    TreeNode<string> node1 = root.AddChild("node1");
    TreeNode<string> node2 = root.AddChild("node2");
    {
        TreeNode<string> node20 = node2.AddChild(null);
        TreeNode<string> node21 = node2.AddChild("node21");
        {
            TreeNode<string> node210 = node21.AddChild("node210");
            TreeNode<string> node211 = node21.AddChild("node211");
        }
    }
    TreeNode<string> node3 = root.AddChild("node3");
    {
        TreeNode<string> node30 = node3.AddChild("node30");
    }
} 
```

**奖金**
查看成熟的树：

*   迭代器
*   搜索
*   Java/C#

[https://github.com/gt4dev/yet-another-tree-structure](https://github.com/gt4dev/yet-another-tree-structure)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2008-09-15T21:01:58.717

一般优秀的[C5 Generic Collection Library](http://www.itu.dk/research/c5/)有几种不同的基于树的数据结构，包括集合、包和字典。如果您想研究它们的实现细节，可以使用源代码。（我在生产代码中使用了 C5 集合并取得了很好的效果，尽管我没有专门使用任何树结构。）

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2010-01-25T15:34:10.020

见[https://github.com/YaccConstructor/QuickGraph](https://github.com/YaccConstructor/QuickGraph)（以前[是 http://quickgraph.codeplex.com/](http://quickgraph.codeplex.com/)）

QuickGraph 为 .NET 2.0 及更高版本提供通用的有向/无向图数据结构和算法。QuickGraph 自带[深度优先搜索](https://en.wikipedia.org/wiki/Depth-first_search)、[广度优先搜索](https://en.wikipedia.org/wiki/Breadth-first_search)、A* 搜索、最短路径、k-最短路径、最大流量、最小生成树、最小共同祖先等算法... QuickGraph 支持[MSAGL](https://en.wikipedia.org/wiki/Microsoft_Automatic_Graph_Layout)、[GLEE](https://en.wikipedia.org/wiki/Microsoft_Automatic_Graph_Layout)和[Graphviz](https://en.wikipedia.org/wiki/Graphviz)渲染图形，序列化到[GraphML](https://en.wikipedia.org/wiki/GraphML)等。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-08-25T06:46:08.670

这是我自己的：

```
class Program
{
    static void Main(string[] args)
    {
        var tree = new Tree<string>()
            .Begin("Fastfood")
                .Begin("Pizza")
                    .Add("Margherita")
                    .Add("Marinara")
                .End()
                .Begin("Burger")
                    .Add("Cheese burger")
                    .Add("Chili burger")
                    .Add("Rice burger")
                .End()
            .End();

        tree.Nodes.ForEach(p => PrintNode(p, 0));
        Console.ReadKey();
    }

    static void PrintNode<T>(TreeNode<T> node, int level)
    {
        Console.WriteLine("{0}{1}", new string(' ', level * 3), node.Value);
        level++;
        node.Children.ForEach(p => PrintNode(p, level));
    }
}

public class Tree<T>
{
    private Stack<TreeNode<T>> m_Stack = new Stack<TreeNode<T>>();

    public List<TreeNode<T>> Nodes { get; } = new List<TreeNode<T>>();

    public Tree<T> Begin(T val)
    {
        if (m_Stack.Count == 0)
        {
            var node = new TreeNode<T>(val, null);
            Nodes.Add(node);
            m_Stack.Push(node);
        }
        else
        {
            var node = m_Stack.Peek().Add(val);
            m_Stack.Push(node);
        }

        return this;
    }

    public Tree<T> Add(T val)
    {
        m_Stack.Peek().Add(val);
        return this;
    }

    public Tree<T> End()
    {
        m_Stack.Pop();
        return this;
    }
}

public class TreeNode<T>
{
    public T Value { get; }
    public TreeNode<T> Parent { get; }
    public List<TreeNode<T>> Children { get; }

    public TreeNode(T val, TreeNode<T> parent)
    {
        Value = val;
        Parent = parent;
        Children = new List<TreeNode<T>>();
    }

    public TreeNode<T> Add(T val)
    {
        var node = new TreeNode<T>(val, this);
        Children.Add(node);
        return node;
    }
} 
```

输出：

```
Fastfood
   Pizza
      Margherita
      Marinara
   Burger
      Cheese burger
      Chili burger
      Rice burger 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-11-17T12:24:16.730

我对解决方案有一点扩展。

使用递归泛型声明和派生子类，您可以更好地专注于您的实际目标。

请注意，它与非通用实现不同，您不需要将“node”转换为“NodeWorker”。

这是我的例子：

```
public class GenericTree<T> where T : GenericTree<T> // recursive constraint
{
  // no specific data declaration

  protected List<T> children;

  public GenericTree()
  {
    this.children = new List<T>();
  }

  public virtual void AddChild(T newChild)
  {
    this.children.Add(newChild);
  }

  public void Traverse(Action<int, T> visitor)
  {
    this.traverse(0, visitor);
  }

  protected virtual void traverse(int depth, Action<int, T> visitor)
  {
    visitor(depth, (T)this);
    foreach (T child in this.children)
      child.traverse(depth + 1, visitor);
  }
}

public class GenericTreeNext : GenericTree<GenericTreeNext> // concrete derivation
{
  public string Name {get; set;} // user-data example

  public GenericTreeNext(string name)
  {
    this.Name = name;
  }
}

static void Main(string[] args)
{
  GenericTreeNext tree = new GenericTreeNext("Main-Harry");
  tree.AddChild(new GenericTreeNext("Main-Sub-Willy"));
  GenericTreeNext inter = new GenericTreeNext("Main-Inter-Willy");
  inter.AddChild(new GenericTreeNext("Inter-Sub-Tom"));
  inter.AddChild(new GenericTreeNext("Inter-Sub-Magda"));
  tree.AddChild(inter);
  tree.AddChild(new GenericTreeNext("Main-Sub-Chantal"));
  tree.Traverse(NodeWorker);
}

static void NodeWorker(int depth, GenericTreeNext node)
{                                // a little one-line string-concatenation (n-times)
  Console.WriteLine("{0}{1}: {2}", String.Join("   ", new string[depth + 1]), depth, node.Name);
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-02-27T00:10:53.200

试试这个简单的示例。

```
public class TreeNode<TValue>
{
    #region Properties
    public TValue Value { get; set; }
    public List<TreeNode<TValue>> Children { get; private set; }
    public bool HasChild { get { return Children.Any(); } }
    #endregion
    #region Constructor
    public TreeNode()
    {
        this.Children = new List<TreeNode<TValue>>();
    }
    public TreeNode(TValue value)
        : this()
    {
        this.Value = value;
    }
    #endregion
    #region Methods
    public void AddChild(TreeNode<TValue> treeNode)
    {
        Children.Add(treeNode);
    }
    public void AddChild(TValue value)
    {
        var treeNode = new TreeNode<TValue>(value);
        AddChild(treeNode);
    }
    #endregion
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-08-01T13:21:53.967

我创建了一个可能对其他人有帮助的[Node<T> 类。](http://www.siepman.nl/blog/post/2013/07/30/tree-node-nodes-descendants-ancestors.aspx)该类具有以下属性：

*   孩子们
*   祖先
*   后人
*   兄弟姐妹
*   节点级别
*   家长
*   根
*   等等。

还可以将具有 Id 和 ParentId 的项目的平面列表转换为树。节点包含对子节点和父节点的引用，因此迭代节点非常快。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-01-27T09:51:56.197

有现在发布的 .NET 代码库：特别是`SortedSet`实现[红黑树](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)的代码：*[sortedset.cs](https://github.com/Microsoft/referencesource/blob/master/System/compmod/system/collections/generic/sortedset.cs)*

然而，这是一个平衡的树结构。所以我的回答更多地是对我认为是 .NET 核心库中唯一的本机树结构的参考。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-07-24T18:46:50.913

我已经完成了[Berezh 分享](https://stackoverflow.com/questions/66893/tree-data-structure-in-c-sharp/15101910#15101910)的代码。

```
public class TreeNode<T> : IEnumerable<TreeNode<T>>
{
    public T Data { get; set; }
    public TreeNode<T> Parent { get; set; }
    public ICollection<TreeNode<T>> Children { get; set; }

    public TreeNode(T data)
    {
        this.Data = data;
        this.Children = new LinkedList<TreeNode<T>>();
    }

    public TreeNode<T> AddChild(T child)
    {
        TreeNode<T> childNode = new TreeNode<T>(child) { Parent = this };
        this.Children.Add(childNode);
        return childNode;
    }

    public IEnumerator<TreeNode<T>> GetEnumerator()
    {
        throw new NotImplementedException();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return (IEnumerator)GetEnumerator();
    }
}

public class TreeNodeEnum<T> : IEnumerator<TreeNode<T>>
{

    int position = -1;
    public List<TreeNode<T>> Nodes { get; set; }

    public TreeNode<T> Current
    {
        get
        {
            try
            {
                return Nodes[position];
            }
            catch (IndexOutOfRangeException)
            {
                throw new InvalidOperationException();
            }
        }
    }

    object IEnumerator.Current
    {
        get
        {
            return Current;
        }
    }

    public TreeNodeEnum(List<TreeNode<T>> nodes)
    {
        Nodes = nodes;
    }

    public void Dispose()
    {

    }

    public bool MoveNext()
    {
        position++;
        return (position < Nodes.Count);
    }

    public void Reset()
    {
        position = -1;
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-04-11T11:00:14.833

大多数树是由您正在处理的数据形成的。

> 假设您有一个`person`包含某人详细信息的类， `parents`您希望将树结构作为“域类”的一部分，还是使用包含指向您的人员对象的链接的单独树类？考虑一个简单的操作，比如获取所有`grandchildren`a `person`，这段代码应该在`person` 类中，还是类的用户`person`必须知道一个单独的树类？

另一个例子是编译器中 的[解析树……</p>](https://en.wikipedia.org/wiki/Abstract_syntax_tree#Application_in_compilers)

这两个示例都表明，树的概念是数据**域**的一部分，使用单独的通用树至少会使创建的对象数量增加一倍，并使 API 更难再次编程。

我们想要一种重用标准树操作的方法，而不必为所有树重新实现它们，同时不必使用标准树类。[Boost](https://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29)已尝试为 C++ 解决此类问题，但我还没有看到 .NET 对其进行调整的任何效果。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-04-13T05:09:47.147

我使用上面的 NTree 类添加了一个完整的解决方案和示例。我还添加了“AddChild”方法......

```
 public class NTree<T>
    {
        public T data;
        public LinkedList<NTree<T>> children;

        public NTree(T data)
        {
            this.data = data;
            children = new LinkedList<NTree<T>>();
        }

        public void AddChild(T data)
        {
            var node = new NTree<T>(data) { Parent = this };
            children.AddFirst(node);
        }

        public NTree<T> Parent { get; private set; }

        public NTree<T> GetChild(int i)
        {
            foreach (NTree<T> n in children)
                if (--i == 0)
                    return n;
            return null;
        }

        public void Traverse(NTree<T> node, TreeVisitor<T> visitor, string t, ref NTree<T> r)
        {
            visitor(node.data, node, t, ref r);
            foreach (NTree<T> kid in node.children)
                Traverse(kid, visitor, t, ref r);
        }
    }

    public static void DelegateMethod(KeyValuePair<string, string> data, NTree<KeyValuePair<string, string>> node, string t, ref NTree<KeyValuePair<string, string>> r)
    {
        string a = string.Empty;
        if (node.data.Key == t)
        {
            r = node;
            return;
        }
    } 
```

### 使用它

```
 NTree<KeyValuePair<string, string>> ret = null;
 tree.Traverse(tree, DelegateMethod, node["categoryId"].InnerText, ref ret); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-10-28T17:14:29.757

也可以将 XML 与[LINQ](https://en.wikipedia.org/wiki/Language_Integrated_Query)一起使用：

*[在 C# 中创建 XML 树（LINQ to XML）](https://docs.microsoft.com/en-us/dotnet/standard/linq/create-xml-trees)*

在使用树时，XML 是最成熟、最灵活的解决方案，而 LINQ 为您提供了所需的所有工具。树的配置也变得更加简洁和用户友好，因为您可以简单地使用 XML 文件进行初始化。

如果需要处理对象，可以使用 XML 序列化：

*[XML 序列化](https://docs.microsoft.com/en-us/dotnet/standard/serialization/introducing-xml-serialization)*

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-04-18T08:05:43.543

这是我的[BST](https://en.wikipedia.org/wiki/Binary_search_tree)实现：

```
class BST
{
    public class Node
    {
        public Node Left { get; set; }
        public object Data { get; set; }
        public Node Right { get; set; }

        public Node()
        {
            Data = null;
        }

        public Node(int Data)
        {
            this.Data = (object)Data;
        }

        public void Insert(int Data)
        {
            if (this.Data == null)
            {
                this.Data = (object)Data;
                return;
            }
            if (Data > (int)this.Data)
            {
                if (this.Right == null)
                {
                    this.Right = new Node(Data);
                }
                else
                {
                    this.Right.Insert(Data);
                }
            }
            if (Data <= (int)this.Data)
            {
                if (this.Left == null)
                {
                    this.Left = new Node(Data);
                }
                else
                {
                    this.Left.Insert(Data);
                }
            }
        }

        public void TraverseInOrder()
        {
            if(this.Left != null)
                this.Left.TraverseInOrder();
            Console.Write("{0} ", this.Data);
            if (this.Right != null)
                this.Right.TraverseInOrder();
        }
    }

    public Node Root { get; set; }
    public BST()
    {
        Root = new Node();
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-02-04T18:18:56.360

如果要在 GUI 上显示此树，可以使用[TreeView](https://msdn.microsoft.com/en-us/library/system.windows.forms.treeview(v=vs.100).aspx)和[TreeNode](https://msdn.microsoft.com/en-us/library/system.windows.forms.treenode(v=vs.100).aspx)。（我想从技术上讲，您可以创建一个 TreeNode 而无需将其放在 GUI 上，但它确实比简单的本土 TreeNode 实现具有更多开销。）

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-11-22T22:28:52.163

具有通用数据的树

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

public class Tree<T>
{
    public T Data { get; set; }
    public LinkedList<Tree<T>> Children { get; set; } = new LinkedList<Tree<T>>();
    public Task Traverse(Func<T, Task> actionOnNode, int maxDegreeOfParallelism = 1) => Traverse(actionOnNode, new SemaphoreSlim(maxDegreeOfParallelism, maxDegreeOfParallelism));
    private async Task Traverse(Func<T, Task> actionOnNode, SemaphoreSlim semaphore)
    {
        await actionOnNode(Data);
        SafeRelease(semaphore);
        IEnumerable<Task> tasks = Children.Select(async input =>
        {
            await semaphore.WaitAsync().ConfigureAwait(false);
            try
            {
                await input.Traverse(actionOnNode, semaphore).ConfigureAwait(false);
            }
            finally
            {
                SafeRelease(semaphore);
            }
        });
        await Task.WhenAll(tasks);
    }
    private void SafeRelease(SemaphoreSlim semaphore)
    {
        try
        {
            semaphore.Release();
        }
        catch (Exception ex)
        {
            if (ex.Message.ToLower() != "Adding the specified count to the semaphore would cause it to exceed its maximum count.".ToLower())
            {
                throw;
            }
        }
    }

    public async Task<IEnumerable<T>> ToList()
    {
        ConcurrentBag<T> lst = new ConcurrentBag<T>();
        await Traverse(async (data) => lst.Add(data));
        return lst;
    }
    public async Task<int> Count() => (await ToList()).Count();
} 
```

单元测试

```
using System.Threading.Tasks;
using Xunit;

public class Tree_Tests
{
    [Fact]
    public async Task Tree_ToList_Count()
    {
        Tree<int> head = new Tree<int>();

        Assert.NotEmpty(await head.ToList());
        Assert.True(await head.Count() == 1);

        // child
        var child = new Tree<int>();
        head.Children.AddFirst(child);
        Assert.True(await head.Count() == 2);
        Assert.NotEmpty(await head.ToList());

        // grandson
        child.Children.AddFirst(new Tree<int>());
        child.Children.AddFirst(new Tree<int>());
        Assert.True(await head.Count() == 4);
        Assert.NotEmpty(await head.ToList());
    }

    [Fact]
    public async Task Tree_Traverse()
    {
        Tree<int> head = new Tree<int>() { Data = 1 };

        // child
        var child = new Tree<int>() { Data = 2 };
        head.Children.AddFirst(child);

        // grandson
        child.Children.AddFirst(new Tree<int>() { Data = 3 });
        child.Children.AddLast(new Tree<int>() { Data = 4 });

        int counter = 0;
        await head.Traverse(async (data) => counter += data);
        Assert.True(counter == 10);

        counter = 0;
        await child.Traverse(async (data) => counter += data);
        Assert.True(counter == 9);

        counter = 0;
        await child.Children.First!.Value.Traverse(async (data) => counter += data);
        Assert.True(counter == 3);

        counter = 0;
        await child.Children.Last!.Value.Traverse(async (data) => counter += data);
        Assert.True(counter == 4);
    }
} 
```

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2012-05-15T03:18:30.290

如果您需要使用较少内存的有根树数据结构实现，您可以按如下方式编写 Node 类（C++ 实现）：

```
class Node {
       Node* parent;
       int item; // depending on your needs

       Node* firstChild; //pointer to left most child of node
       Node* nextSibling; //pointer to the sibling to the right
} 
```

# .net - 虚拟化树列表视图？

> ID：66904
> 
> 赞同：2
> 
> 时间：2008-09-15T20:59:09.253
> 
> 标签：.net, wpf, winforms

有谁知道用列显示分层数据的好方法？

它必须是虚拟化的，因为它必须能够处理数百万条记录。

它也应该是多选的，大多数树视图控件都不是。

首选 Winforms，但如有必要，将使用 ElementHost WPF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T22:39:43.380

我不太清楚你对带有列的分层数据的意思，你能澄清一下吗？一种可能性是新的 WPF DataGrid。根据您正在寻找的功能，它*可能*是您正在寻找的。

数据网格的位可在 codeplex 上找到：http: [//www.codeplex.com/wpf/Release/ProjectReleases.aspx? ReleaseId=14963](http://www.codeplex.com/wpf/Release/ProjectReleases.aspx?ReleaseId=14963)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-29T01:19:47.277

看看 Infragistics UltraWinGrid，这是一个演示一些功能的视频：http: [//www.infragistics.com/howto/wingrid.aspx](http://www.infragistics.com/howto/wingrid.aspx)

# jsf - 这 使用时无法正常显示 里面

> ID：66912
> 
> 赞同：1
> 
> 时间：2008-09-15T20:59:45.493
> 
> 标签：jsf

在一个 JSP 页面中，我用一些元素创建`<h:form enctype="multipart/form-data">`了一个：.`<t:inputText>``<t:inputDate>``<t:message for="someElement">``<t:inputFileUpload>`

* * *

当我尝试将表单放入 a `<t:panelTabbedPane serverSideTabSwitch="false">`（因此当然是放入 a `<t:panelTab>`） 时，头痛就来了

[我从Tomahawk 的示例](http://www.irian.at/myfacesexamples/tabbedPane.jsf)中复制了 TabbedPane 示例的源代码中显示的结构，方法是使用`<f:subview>`标签并将 panelTab 标签放在新的 jsp 页面中（使用`<jsp:include page="somePage.jsp">`指令）

首先，`<t:inputFileUpload>`无法以托管 Bean UploadedFile 属性中分配的值加载文件`#{myBean.upFile}`

然后，[谷歌搜索线索](http://markmail.org/message/b4nht4f6xb74noxp "当我阅读它时没有答案")，我知道它会`<t:panelTabbedPane>`生成一个名为“autoform”的表单，所以我得到了嵌套表单。`<h:form>`好的，我修复了创建`<t:panelTabbedPane>`和尤里卡的问题！文件输入再次起作用！（自动表单不生成）

但是，哦，惊喜！哦，可怕的墨菲定律！我的一切`<h:message>`开始失败。Eclipse 控制台的输出显示所有人`<t:message>`都在寻找不存在的元素 ID（他们的 ID 部分等于他们正在寻找的，但在 ID 的末尾，他们的名字发生了变化）

在这一点上，我放了一个`<t:mesagges>`标签（注意末尾的“s”）在面板的开头一次显示所有验证错误，它工作正常。因此，存在验证错误，它们在面板的开头正确显示。

此页面中生成的所有验证错误消息都是 JSF 内置的验证消息。此时的支持 bean 没有定义任何验证器。

### ¿我怎样才能`<t:message for="xyz">`正常工作？

* * *

我在以 Geronimo 作为应用程序服务器的 eclipse Ganymede 项目中使用 Tomahawk-1.1.6 和 myFaces-impl-1.2.3（Geronimo 给了我 myFaces jar 实现，而我将 tomahawk jar 放在应用）

* * *

## “已解决”：此问题是向 myFaces 论坛报告的问题。

感谢 Kyle Renfro 的快速响应和信息。（干得好，凯尔！） [查看问题](https://issues.apache.org/jira/browse/MYFACES-1807?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12567158#action_12567158)

* * *

**编辑 1**

1.- 感谢 Kyle Renfro 的快速回复。输入元素内使用的 forceID 属性第一次不起作用，但做一些非常棘手的调整可以使`<t:message for="xyz">`标签工作。

我所做的是：
1\. 让我的标签`<inputText id="name" forceId="true" required="true">`The`<t:message>`不起作用。
2\. 然后，在 Eclipse 控制台上查看错误消息后，我将我的“id”属性重命名为：<inputText id=" **namej_id_1** " forceId="true" required="true">
3\. 然后成功了`<t:message>`！但在第二次按下表单的“提交”按钮后。¡第二次！（我怀疑 JSF 生命周期中发生了一些事情）
4\. 这意味着用户必须按两次提交按钮才能在页面上获取错误消息。
5\. 在 ID 末尾使用“j_id_1”短语很奇怪。

* * *

**编辑 2**

好的，代码来了，希望它不会烦人。

1.- **mainPage.jsp**（这里是`<t:panelTabbedPane>`和`<f:subview>`标签）

```
<%@ taglib prefix="f" uri="http://java.sun.com/jsf/core"%>  
<%@ taglib prefix="h" uri="http://java.sun.com/jsf/html"%>  
<%@ taglib prefix="t" uri="http://myfaces.apache.org/tomahawk"%>  
<html>  
<body>  
<f:view>  
<h:form enctype="multipart/form-data">  
<t:panelTabbedPane serverSideTabSwitch="false" >  

            <f:subview id="subview_tab_detail">  
                <jsp:include page="detail.jsp"/>  
            </f:subview>  

        </t:panelTabbedPane>  
    </h:form>  

</f:view>  
</body>  
</html> 
```

2.- **detail.jsp**（这里是`<t:panelTab>`标签）

```
<%@ taglib prefix="f" uri="http://java.sun.com/jsf/core"%>  
<%@ taglib prefix="h" uri="http://java.sun.com/jsf/html"%>  
<%@ taglib prefix="t" uri="http://myfaces.apache.org/tomahawk"%>  

<t:panelTab label="TAB_1">  
        <t:panelGrid columns="3">  
            <f:facet name="header">  
                <h:outputText value="CREATING A TICKET" />  
            </f:facet>  

            <t:outputLabel for="ticket_id" value="TICKET ID" />  
            <t:inputText id="ticket_id" value="#{myBean.ticketId}" required="true" />  
            <t:message for="ticket_id" />  

            <t:outputLabel for="description" value="DESCRIPTION" />  
            <t:inputText id="description" value="#{myBean.ticketDescription}" required="true" />
            <t:message for="description" />  

            <t:outputLabel for="attachment" value="ATTACHMENTS" />  
            <t:panelGroup>  
                <!-- This is for listing multiple file uploads -->  
                <!-- The panelGrid binding make attachment list grow as the user inputs several files (one at a time) -->  
                <t:panelGrid columns="3" binding="#{myBean.panelUpload}" />  
                <t:inputFileUpload id="attachment"  value="#{myBean.upFile}" storage="file" />  
                <t:commandButton value="ADD FILE" action="#{myBean.upload}" />  
            </t:panelGroup>  
            <t:message for="attachment" />  

            <t:commandButton action="#{myBean.create}" value="CREATE TICKET" />  
        </t:panelGrid>  
</t:panelTab> 
```

* * *

**编辑 3**

回应 Kyle Renfro 的后续行动：

> 凯尔 说：
> 
> > “在页面的第一个视图中，如果您在任何 inputTexts 中都没有任何内容且没有上传文件的情况下按下“CREATE TICKET”按钮，那么消息标签是否适用于 inputTexts？（即，必需 = true）我只是好奇 inputTexts 的消息是否正常工作，但 inputFileUpload 的消息不正常。”

这是发现的行为：
1.- 根本没有显示验证错误消息（消息标签不起作用）即使我尝试只测试一个验证错误消息（例如，测试第一个输入文本的消息) 他们都没有出现。
2.- Eclipse 控制台向我显示了这些内部错误：

```
ERROR [HtmlMessageRendererBase] Could not render Message. Unable to find component 'ticket_id' (calling findComponent on component 'j_id_jsp_1383779881_1:subview_tab_detail:j_id_jsp_1716158401_0j_id_1:j_id_jsp_1716158401_5j_id_1'). If the provided id was correct, wrap the message and its component into an h:panelGroup or h:panelGrid.  
ERROR [HtmlMessageRendererBase] Could not render Message. Unable to find component 'description' (calling findComponent on component 'j_id_jsp_1383779881_1:subview_tab_detail:j_id_jsp_1716158401_0j_id_1:j_id_jsp_1716158401_8j_id_1'). If the provided id was correct, wrap the message and its component into an h:panelGroup or h:panelGrid.  
ERROR [HtmlMessageRendererBase] Could not render Message. Unable to find component 'attachment' (calling findComponent on component 'j_id_jsp_1383779881_1:subview_tab_detail:j_id_jsp_1716158401_0j_id_1:j_id_jsp_1716158401_14j_id_1'). If the provided id was correct, wrap the message and its component into an h:panelGroup or h:panelGrid. 
```

这是我`"j_id_1"`在生成的 ID 上看到这个词的时候，例如，对于 id “ticket_id”：

```
j_id_jsp_1383779881_1:subview_tab_detail:j_id_jsp_1716158401_0j_id_1:j_id_jsp_1716158401_5j_id_1 
```

而且，查看生成的 HTML 生成页面，我看到 ID 名称是这样的（使用“ForceId”属性）：

```
<input id="j_id_jsp_1383779881_1:subview_tab_detail:j_id_jsp_1716158401_0j_id_1:ticket_idj_id_1" name="j_id_jsp_1383779881_1:subview_tab_detail:j_id_jsp_1716158401_0j_id_1:ticket_idj_id_1"> 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T13:36:35.533

战斧组件的*forceId*属性应该可以解决这个问题。

就像是：

```
&lt;t:outputText id="xyz" forceId="true" value="#{mybean.stuff}"/&gt; 
```

在页面的第一个视图中，如果您在任何 inputTexts 中都没有任何内容且没有上传文件的情况下按下“CREATE TICKET”按钮，那么消息标签是否适用于 inputTexts？（即 required = true）我只是好奇 inputTexts 的消息是否正常，但 inputFileUpload 的消息是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T14:33:34.340

看起来它可能与 myfaces 中的错误有关。您可以尝试更新版本的 myfaces 和 tomahawk。我将删除子视图功能作为快速测试 - 将 detail.jsp 页面复制回主页。

[https://issues.apache.org/jira/browse/MYFACES-1807?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12567158#action_12567158](https://issues.apache.org/jira/browse/MYFACES-1807?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12567158#action_12567158)

# vim - 如何在windows下增加vim（CTRL-A不起作用......）

> ID：66919
> 
> 赞同：23
> 
> 时间：2008-09-15T21:00:30.297
> 
> 标签：vim

虽然`Ctrl``X`在 windows 下的 vim 中工作正常，但`Ctrl``A`选择所有（duh）。

有没有办法在windows下通过按键来增加一个数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-17T14:50:29.543

您可以`Ctrl``A`通过打开 vim 目录中的“mswin.vim”文件并找到如下所示的部分来增加 Windows：

```
" CTRL-A is Select all
noremap <C-A> gggH<C-O>G
inoremap <C-A> <C-O>gg<C-O>gH<C-O>G
cnoremap <C-A> <C-C>gggH<C-O>G
onoremap <C-A> <C-C>gggH<C-O>G
snoremap <C-A> <C-C>gggH<C-O>G
xnoremap <C-A> <C-C>ggVG 
```

注释掉所有这些行，如下所示：

```
" CTRL-A is Select all
"noremap <C-A> gggH<C-O>G
"inoremap <C-A> <C-O>gg<C-O>gH<C-O>G
"cnoremap <C-A> <C-C>gggH<C-O>G
"onoremap <C-A> <C-C>gggH<C-O>G
"snoremap <C-A> <C-C>gggH<C-O>G
"xnoremap <C-A> <C-C>ggVG 
```

并且`Ctrl``A`击键将增加。

当您的键盘没有实数键盘时，这是一个不错的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T21:02:46.983

试试 Ctrl-NumPad + ?

（[从这里](https://web.archive.org/web/20080912200928/http://www.vim.org/tips/tip.php?tip_id=305)）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-12-23T20:49:30.240

我意识到这是一个老问题，但我今天根据以下问题遇到了另一个选择。让 gvim 像在 linux 上一样运行将允许 CTRL-A 像你期望的那样工作：

[如何使 Windows 上的 gvim 的行为与 linux 控制台 vim 完全一样？](https://stackoverflow.com/questions/2093578/how-to-make-gvim-on-windows-behave-exacly-like-linux-console-vim)

_vimrc 的一部分包含以下项目。这些导致许多控制字符的行为与在 Windows 上的行为相同。

```
set nocompatible
source $VIMRUNTIME/vimrc_example.vim
source $VIMRUNTIME/mswin.vim
behave mswin 
```

我注释掉了（用`"`）mswin 行和`set nocompatible`行。从那里，我添加了`set compatible`. 这会导致 gvim 像在 linux 上一样运行。因此，我的看起来像：

```
set compatible
source $VIMRUNTIME/vimrc_example.vim
"set nocompatible
"source $VIMRUNTIME/mswin.vim
"behave mswin 
```

我今天刚学会这个技巧，所以如果我的信息不完全正确，请告诉我。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-10-11T22:20:36.420

我修改了 TMealy 的解决方案，以便`Ctrl``A`仍然选择所有（我觉得这很有用），而`Ctrl``I`增量（也很有用）。

```
noremap <C-I> <C-A>

" CTRL-A is Select all
noremap <C-A> gggH<C-O>G
inoremap <C-A> <C-O>gg<C-O>gH<C-O>G
cnoremap <C-A> <C-C>gggH<C-O>G
onoremap <C-A> <C-C>gggH<C-O>G
snoremap <C-A> <C-C>gggH<C-O>G
xnoremap <C-A> <C-C>ggVG 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-13T15:49:52.653

在 GNU/Linux 下使用 Vim 和[`mswin.vim`](http://vimdoc.sourceforge.net/htmldoc/gui_w32.html#gui-clipboard). 在唤起之前将+重新映射到`Alt`+解决了我的问题。`X``Ctrl``A``mswin.vim`

```
execute "set <A-x>=\ex"
noremap <A-x> <C-A>
source $VIMRUNTIME/mswin.vim
behave mswin 
```

现在，`Alt`+`X`和`Ctrl`+`X`分别增加和减少 Vim 中的数字。

在 Vim 中映射到`Alt`组合键通常不明显；[在此处](https://vi.stackexchange.com/a/2363/3168)阅读有关此内容的更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-15T03:48:12.123

我正在使用 cygwin 终端 + 屏幕，所以 <ca> 被终端多路复用器捕获。我使用了这个映射：

:noremap <ci> <ca>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-09T15:48:31.997

似乎 `Ctrl``A`在启动的某个地方被映射了。如前所述，使用：

取消映射 <cx>

我会使用 unmap，而不是 nunmap。

# c# - 加载表单而不显示它

> ID：66921
> 
> 赞同：11
> 
> 时间：2008-09-15T21:00:49.577
> 
> 标签：c#, winforms

简短版本：我想触发 Form_Load() 事件而不使表单可见。这不起作用，因为 Show() 忽略了 Visible 属性的当前值：

```
tasksForm.Visible = false;
tasksForm.Show(); 
```

长版：我有一个 WinForms 应用程序，它有两种形式：主要形式和任务形式。主窗体始终显示。用户既可以点击按钮打开任务表单，也可以点击一些按钮直接运行任务而不打开任务表单。

当用户要求直接运行任务时，我只想在任务表单上调用一些公共方法而不显示它。不幸的是，任务逻辑取决于 Form_Load() 事件中发生的事情。我能找到触发 Form_Load() 的唯一方法是调用 Show()。我能做的最好的就是以最小化状态显示表单：

```
tasksForm.WindowState = FormWindowState.Minimized;
tasksForm.Show(); 
```

我想最干净的解决方案是将任务逻辑从任务表单中拉出并放入控制器类中。然后我可以从主表单和任务表单中使用该类，并且仅在我需要它对用户可见时才加载任务表单。但是，如果加载表单而不显示它是一件容易的事情，那将是一个较小的变化。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2010-12-10T17:18:24.687

也许这里应该注意，您**可以**在不显示表单的情况下创建表单的窗口。我认为可能存在想要这样做的合理情况。

无论如何，无论设计是否好，您都可以这样做：

```
MyForm f = new MyForm();
IntPtr dummy = f.Handle; // forces the form Control to be created 
```

我认为这不会导致 Form_Load() 被调用，但此时您将能够调用 f.Invoke() （当我偶然发现这个 SO 问题时，我正在尝试这样做）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-15T21:03:10.197

在我看来，您需要坐下来重新考虑您的方法。如果您不打算展示它，我无法想象您的公共方法需要采用某种形式的单一原因。只做一个新的类。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-15T21:11:47.553

我完全同意 Rich B 的观点，您需要查看将应用程序逻辑放置在何处，而不是试图混淆 WinForms 机制。您的任务表单公开的所有这些操作和数据实际上应该在一个单独的类中，例如某种应用程序控制器或主表单持有的东西，然后由您的任务表单在需要时用于读取和显示数据，但不需要需要一个被实例化的表单才能存在。

重做它可能看起来很痛苦，但是您将改进应用程序的结构并使其更易于维护等。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-15T22:23:06.773

来自 MSDN：

> **Form.Load**
> 在第一次显示表单之前发生。

这意味着唯一会导致表单加载的是它的显示时间。
`Form.Show();`并且`Form.Visible = true;`是完全相同的东西。基本上，在幕后，Show 检查各种条件，然后将 Visible 设置为 true。很明显，在显示表单之前将 visible 设置为 false （它已经是）是没有意义的。

但是，让我们忘记技术细节。我完全同意 Rich B 和 Shaun Austin 的观点——反正逻辑不应该是那种形式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T11:47:31.627

有时这会很有用，而不是糟糕的设计。有时它可能是从本地迁移到托管的开始。

例如，如果您将 c++ 应用程序迁移到 .NET，您可以简单地将整个应用程序设为 .NET 表单或面板的子窗口，然后通过摆脱 c++ 应用程序菜单、状态栏、工具栏并使用平台调用等将 .NET 映射到您的应用程序...

您的 C++ 应用程序可能需要一段时间才能加载，但 .NET 表单不会......您可能希望在其中隐藏 .NEt 表单，直到您的 C++ 应用程序自行初始化。

我会在调用 show 后将 opacity=0 和 visible=false 设置为 false，然后当你的 c++ 应用程序加载时，然后反转。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T21:06:56.660

如果您将方法公开，那么您可以直接访问它......但是，当您调用它时可能会出现一些意想不到的副作用。但是将其公开并直接调用它不会绘制屏幕或打开表单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T21:09:28.840

将表单类的强制初始化代码从`Load`事件处理程序移到构造函数中。对于 Form 类，实例的实例化（通过构造函数）、表单加载和表单可见性是三件不同的事情，不需要同时发生（尽管它们显然需要按此顺序发生）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-22T13:07:30.507

没有一个答案解决了原始问题，因此，添加以下内容，调用 .Show() 以加载表单而不显示它，然后调用 .ShowForm() 以允许它在之后显示：

```
private volatile bool _formVisible;
protected override void SetVisibleCore(bool value)
{
    base.SetVisibleCore(_formVisible);
}
public void ShowForm()
{
    _formVisible = true;
    if (InvokeRequired)
    {
        Invoke((Action) Show);
    }
    else
    {
        Show();
    }
} 
```

# search - 有哪些搜索服务器？

> ID：66922
> 
> 赞同：21
> 
> 时间：2008-09-15T21:01:02.323
> 
> 标签：search, full-text-search, search-engine, solr

我正在寻找Apache Software Foundation 的[Solr替代品。](http://lucene.apache.org/solr/)

对于那些不知道的人，Solr 是一个企业搜索服务器。客户端应用程序使用类似 Web 服务的界面来提交文档以进行索引并执行搜索查询。Solr 具有其他内置功能，例如缓存和复制。我相信它最初是由 CNet 发起，然后开源的。

我正在寻找其他可能被视为竞争的搜索服务器。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-09-16T21:03:56.410

我写了一篇关于我在下面列出的所有引擎的经验和功能的长篇文章，但我放弃了它，因为格式化是一个皮塔饼。但是很简单，如果您不想花钱，Solr/Lucene 或 Fast（现在的 MSSE）确实是您能做的最好的事情。

排除，因为我没有这个产品的经验：Seamark，

### 价格从高到低

*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多，
*   谷歌迷你，
*   微软搜索服务器，
*   自治，
*   微软搜索服务器快递，
*   Solr/Lucene

### 速度快到慢

*   谷歌迷你/Endeca，
*   弗雷德霍珀，
*   自治，
*   Solr/MSS/MSSE

### 特点从高到低

*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多，
*   索尔，
*   自治，
*   卢森，
*   多发性硬化症/多发性硬化症，
*   谷歌迷你

### 可扩展性从高到低

*   Solr/Lucene,
*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多，
*   自治，
*   多发性硬化症/多发性硬化症，
*   谷歌迷你

### Java API

*   恩德卡，
*   弗雷德霍珀，
*   自治，
*   Solr/Lucene

### .NET API

*   恩德卡，
*   Solr/Lucene,
*   多发性硬化症/多发性硬化症，
*   自治

### XML API

*   弗雷德霍珀，
*   梅尔卡多，
*   Solr/Lucene,
*   自治，
*   谷歌迷你（有限）

### 分面搜索

*   恩德卡，
*   弗雷德霍珀，
*   海标，
*   索尔

### 自然语言搜索

*   恩德卡，
*   弗雷德·霍珀，
*   索尔，
*   梅尔卡多，
*   多发性硬化症/多发性硬化症，
*   自治，
*   谷歌迷你

### 文档爬行

*   恩德卡，
*   梅尔卡多，
*   多发性硬化症/多发性硬化症，
*   自治，
*   谷歌迷你

### 国际交易日志

*   恩德卡，
*   弗雷德霍珀

### 商品化/内容聚焦

*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多

### 分布式搜索

*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多，
*   Solr/Lucene,
*   自治，
*   谷歌迷你

### 分析

*   恩德卡

### 平台 x86 Windows

*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多，
*   多发性硬化症/多发性硬化症，
*   Solr/Lucene,
*   自治

### 平台 x64 Windows

*   恩德卡，
*   弗雷德霍珀，
*   Solr/Lucene

### 平台 x86 Unix 变体

*   恩德卡，
*   弗雷德霍珀，
*   梅尔卡多，
*   Solr/Lucene,
*   自治

### 平台 x64 Unix 变体

*   恩德卡，
*   Solr/Lucene

### 其他

*   谷歌迷你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-05-14T17:55:57.230

我与 Endeca 进行了外围合作，它看起来像是一个功能丰富的快速引擎。

它们似乎特别适合电子商务网站驱动，具有用于定制追加销售和交叉销售内容的特殊工具。我还认为他们将尝试进入 BI 领域，因此如果他们无缝地实现这两种功能，这应该是一个有趣的组合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-08-19T14:45:06.733

我曾经在 Endeca 工作过，所以就拿它来说吧。我不会评论竞争对手，但我确实相信它是比其他任何产品都要好得多的产品。

Solr 提供基本的分面搜索，对于许多应用程序来说“足够好”。在很多方面，它都是低端的 Endeca。

Endeca 会通过 Solr 为您提供的一些东西：

*   更好的语言分析（词干等）
*   连接和进行多对多过滤的能力
*   支持通过 XQuery 进行查询
*   更好地支持管理维度/方面
*   更好的性能（查询和推送数据）
*   爬虫和数据集成工具
*   更好的管理工具

而且，显然，服务和支持。

也就是说，它并不便宜，所以如果你没有预算，Solr 不是一个糟糕的选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T19:10:17.370

+1 为 Lucene 和 FAST。如果您有兴趣扩展 Lucene，它也已移植到 .NET。

[http://incubator.apache.org/lucene.net/](http://incubator.apache.org/lucene.net/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-31T02:10:13.320

这里有一些更开源的搜索引擎

*   [狮身人面像](http://www.sphinxsearch.com/)
*   [夏必安](http://xapian.org/)
*   [Zend_Search_Lucene](http://framework.zend.com/manual/en/zend.search.lucene.html)

这里有一些搜索相关的工具

*   [Forage](http://code.google.com/p/forage/) Forage PHP5 库是一个易于使用的多个后端搜索库的界面。它提供了一个通用接口，同时通过允许后端支持或不支持特定功能来支持每个库中的独特功能。

*   [Marjory](http://code.google.com/p/marjory/) Marjory 是一种利用全文搜索引擎对文档进行索引和搜索的网络服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T21:10:21.550

微软于 2008 年 1 月购买的[Fast ESP](http://www.fast.no/l3a.aspx?m=1031&amid=12396)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-08T16:59:02.717

我们今天使用 Fast。它有很多很棒的功能，但我们不使用它们。它的价格昂贵。我们也在寻找替代解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-05T12:32:19.387

FACT-Finder 呢？例如 www.eddiebauer.de 正在使用搜索和导航解决方案以及 500 多家其他欧洲网上商店。高度容错...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T21:09:39.680

[IBM Omnifind Yahoo Edition](http://omnifind.ibm.yahoo.net/)是一个使用[Apache Lucene](http://lucene.apache.org/)进行索引的企业搜索服务器。它简单、易于安装和管理。它还具有内置的 Open Search API。它具有多平台支持及其免费！

该产品由 IBM 推出，旨在与[Google Mini](http://www.google.com/enterprise/mini/)在企业搜索市场竞争。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T20:08:41.193

除了人们已经提到的，微软还有“ [Microsoft Search Server](http://www.microsoft.com/enterprisesearch/serverproducts/searchserver/default.aspx) ”和“ [Microsoft Search Server Express](http://www.microsoft.com/enterprisesearch/serverproducts/searchserverexpress/default.aspx) ”。后者是免费的，前者支持更大的语料库。

# java - 如何判断字符串是 IP 还是主机名

> ID：66923
> 
> 赞同：4
> 
> 时间：2008-09-15T21:01:02.480
> 
> 标签：java, ip-address, hostname

所以你有一个从管理 Web UI 中检索到的字符串（所以它肯定是一个字符串）。在 Java 中，如何确定该字符串是 IP 地址还是主机名？

更新：我想我没有说清楚，我更多的是问Java SDK中是否有任何东西可以用来区分IP和主机名？很抱歉造成混乱，并感谢所有花时间/将花时间回答这个问题的人。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-15T21:03:07.967

您可以使用具有此模式的正则表达式：

```
\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

这将告诉您它是否是 IPv4 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T21:03:14.160

可以查看字符串是否匹配 number.number.number.number 格式，例如：

```
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b 
```

将匹配任何来自`0 - 999`.

您可以将其默认为主机名的任何其他内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T21:03:23.830

我们是否可以假设它*是*一个或另一个，而不是完全不同的东西？如果是这样，我可能会使用正则表达式来查看它是否匹配“点四边形”格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T21:09:12.180

```
URI validator = new URI(yourString); 
```

该代码将验证 IP 地址或主机名。（如果字符串无效，它会抛出格式错误的 URI 异常）

如果您想区分这两者..那么我想念您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T21:27:08.000

您可以在呼叫中使用安全管理器`InetAddress.getByName(addr)`。

如果 addr 不是点分四边形，`getByName`将尝试执行连接以进行名称查找，安全管理器可以将其捕获为`checkConnect(addr, -1)`调用，从而导致您可以捕获的抛出的 SecurityException。

如果您运行完全特权，则可以在调用`System.setSecurityManager()`之前插入自定义安全管理器。`getByName`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-19T15:14:18.840

它并不像看起来那么简单，连字符、下划线和方括号“-”、“_”、“[]”等字符周围存在一些歧义。

Java SDK 在这方面有一些限制。使用 InetAddress.getByName 时，它​​会到网络上进行 DNS 名称解析并解析地址，如果您只想检测主机与地址，这是昂贵且不必要的。此外，如果地址以稍微不同但有效的格式（在 IPv6 中很常见）写入，则对 InetAddress.getByName 的结果进行字符串比较将不起作用。

[IPAddress Java 库](https://seancfoley.github.io/IPAddress/)将执行此操作。链接中提供了 javadoc。免责声明：我是项目经理。

```
static void check(HostName host) {
    try {
        host.validate();
        if(host.isAddress()) {
            System.out.println("address: " + host.asAddress());
        } else {
            System.out.println("host name: " + host);
        }
    } catch(HostNameException e) {
        System.out.println(e.getMessage());
    }
}

public static void main(String[] args) {
    HostName host = new HostName("1.2.3.4");
    check(host);
    host = new HostName("1.2.a.4");
    check(host);
    host = new HostName("::1");
    check(host);
    host = new HostName("[::1]");
    check(host);
    host = new HostName("1.2.?.4");
    check(host);  
} 
```

输出：

```
address: 1.2.3.4
host name: 1.2.a.4
address: ::1
address: ::1
1.2.?.4 Host error: invalid character at index 4 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T21:03:52.300

你不能只对它进行正则表达式匹配吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-22T15:03:11.527

使用[InetAddress#getAllByName(String hostOrIp)](https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#getAllByName-java.lang.String-) - 如果`hostOrIp`是 IP 地址，则结果是具有单个 InetAddress 的数组，它`.getHostAddress()`返回与`hostOrIp`.

```
import java.net.InetAddress;
import java.net.UnknownHostException;
import java.util.Arrays;

public class IPvsHostTest {
    private static final org.slf4j.Logger LOG = org.slf4j.LoggerFactory.getLogger(IPvsHostTest.class);

    @org.junit.Test
    public void checkHostValidity() {
        Arrays.asList("10.10.10.10", "google.com").forEach( hostname -> isHost(hostname));
    }
    private void isHost(String ip){
        try {
            InetAddress[] ips = InetAddress.getAllByName(ip);
            LOG.info("IP-addresses for {}", ip);
            Arrays.asList(ips).forEach( ia -> {
                LOG.info(ia.getHostAddress());
            });
        } catch (UnknownHostException e) {
            LOG.error("Invalid hostname", e);
        }
    }
} 
```

输出：

```
IP-addresses for 10.10.10.10
10.10.10.10
IP-addresses for google.com
64.233.164.100
64.233.164.138
64.233.164.139
64.233.164.113
64.233.164.102
64.233.164.101 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-04T20:23:18.297

如果指定了主机名，此代码仍会执行 DNS 查找，但至少它会跳过可能使用其他方法执行的反向查找：

```
 ...
   isDottedQuad("1.2.3.4");
   isDottedQuad("google.com");
   ...

boolean isDottedQuad(String hostOrIP) throws UnknownHostException {
   InetAddress inet = InetAddress.getByName(hostOrIP);
   boolean b = inet.toString().startsWith("/");
   System.out.println("Is " + hostOrIP + " dotted quad? " + b + " (" + inet.toString() + ")");
   return b;
} 
```

它生成以下输出：

```
Is 1.2.3.4 dotted quad? true (/1.2.3.4)
Is google.com dotted quad? false (google.com/172.217.12.238) 
```

你认为我们可以期待 toString() 行为很快改变吗？

# excel - 自动化 Excel 时如何将文本框对象放在特定单元格上？

> ID：66934
> 
> 赞同：4
> 
> 时间：2008-09-15T21:01:59.793
> 
> 标签：excel, automation

我们正在使用 VB.Net 自动化 Excel，并尝试在 Excel 工作表上放置多行文本，我们可以将其设置为不打印。在这些之间，我们将有可打印的报告。如果我们添加文本框对象，我们可以做到这一点，并将打印对象设置设置为 false。（如果你有其他方法，请指导我）

添加文本框的代码是：

```
ActiveSheet.Shapes.AddTextbox(msoTextOrientationHorizontal, 145.5, 227.25, 304.5, 21#) 
```

但定位是点。我们需要一种方法将其放置在特定单元格上，并根据单元格调整大小。当我们只知道把它放在哪个单元格上时，我们怎么能找到把它放在哪里呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-15T22:51:51.417

如果您有单元格名称或位置，您可以执行以下操作：

```
With ActiveSheet
  .Shapes.AddTextbox msoTextOrientationHorizontal, .Cells(3,2).Left, .Cells(3,2).Top, .Cells(3,2).Width, .Cells(3,2).Height
End With 
```

这将在单元格 B3 上添加一个文本框。当 B3 调整大小时，文本框也是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T19:58:23.323

当您复制和粘贴文本框时，Excel 会将新文本框放置在当前选定的任何单元格上。因此，您只需使用 VBA 复制和粘贴命令即可轻松实现此目的。如果您要使用许多非常相似的文本框，这将特别有用，因为您正在有效地创建文本框模板。

# php - 测试/调试/修复 PHP 并发问题的工具？

> ID：66952
> 
> 赞同：2
> 
> 时间：2008-09-15T21:03:59.197
> 
> 标签：php, concurrency, memcached

我发现自己在 PHP 中使用 memcached 做了一些相对高级的工作。考虑和解决由缓存的无锁特性引起的竞争条件和并发问题正在成为一种精神斗争。

PHP 在并发方面的工具似乎很差（线程，有人吗？），所以我想知道是否有任何解决方案可以正确测试/调试它。

我不想等到两个用户请求两个脚本，它们将同时作为并行进程运行并导致并发问题，这会让我摸不着头脑，或者直到它滚雪球进入 clusterfsck 时我才注意到。

我应该知道的任何神奇的 PHP 并发魔杖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T21:16:51.740

PHP 不是为多线程设计的语言，我认为它永远不会。

如果您需要互斥锁功能，PHP 有一个可以编译的[信号量函数。](http://us.php.net/sem)

Memcache 没有互斥功能，但可以使用[Memcache::add()](http://us.php.net/manual/en/function.memcache-add.php)方法进行模拟。

如果您使用的是 MySQL 数据库，并试图防止某种竞争条件损坏，您可以使用[lock tables](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)语句，或使用[transactions](https://web.archive.org/web/20081219053301/http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T21:17:33.983

您可以尝试使用可以同时发出多个请求的负载测试工具来冲击您的代码。[Jmeter浮现](http://jakarta.apache.org/jmeter/)在脑海中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T21:10:40.990

不是专门针对这个问题，而是：[FirePHP](http://www.firephp.org/)？

# html - 如何在 HTML 中创建指向脚注的链接？

> ID：66964
> 
> 赞同：31
> 
> 时间：2008-09-15T21:05:49.363
> 
> 标签：html, syntax

例如：

> 这是我内容的主体。我有此行的脚注链接 [1]。然后，我有更多的内容。其中一些很有趣，也有一些脚注[2]。
> 
> [1] 这是我的第一个脚注。
> 
> [2] 另一个脚注。

因此，如果我单击“[1]”链接，它会将网页定向到第一个脚注引用，依此类推。我究竟如何在 HTML 中完成此任务？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-09-15T21:08:32.337

给一个容器一个 id，然后用`#`来引用那个 Id。

例如

```
<p>This is main body of my content. I have a footnote link for this line <a href="#footnote-1">[1]</a>. Then, I have some more content. Some of it is interesting and it has some footnotes as well <a href="#footnote-2">[2]</a>.</p>

<p id="footnote-1">[1] Here is my first footnote.</p>
<p id="footnote-2">[2] Another footnote.</p>
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-09-16T00:00:00.503

最好提供从脚注返回到引用位置的链接（假设存在 1:1 关系）。这很有用，因为后退按钮会将用户带回到他们之前的滚动位置，让读者在文本中找到他们的位置。单击返回到文本中引用脚注的链接的链接将该文本放在窗口的顶部，使读者可以很容易地从他们离开的地方继续。

Quirksmode 在网络上有一个[脚注](http://www.quirksmode.org/blog/archives/2005/07/footnotes_on_th.html)页面（尽管它建议您使用[边](http://andreas.web-graphics.com/footnotes/)注而不是脚注，但我认为脚注更**易于访问**，带有指向脚注和脚注的链接，然后是返回文本的链接，我怀疑它们会更容易跟随**屏幕阅读器**）。

quirksmode 页面中的一个链接建议在脚注的文本后面有一个箭头↩，并使用实体 ↩ 为了这。

例如：

```
This is main body of my content.
I have a footnote link for this line
<a id="footnote-1-ref" href="#footnote-1">[1]</a>.
Then, I have some more content.
Some of it is interesting and it has some footnotes as well
<a id="footnote-2-ref" href="#footnote-2">[2]</a>.

<p id="footnote-1">
   1\. Here is my first footnote. <a href="#footnote-1-ref">&#8617;</a> 
</p>
<p id="footnote-2">
   2\. Another footnote. <a href="#footnote-2-ref">&#8617;</a>
</p> 
```

我不确定屏幕阅读器将如何处理该实体。与 Grubber 帖子的评论相关联的是[Bob Eastern 的关于脚注可访问性的帖子，](http://www.clagnut.com/blog/1528/)这表明它没有被阅读，尽管那是几年前的事了，我希望现在屏幕阅读器会有所改进。对于可访问性，可能值得使用文本锚点，例如“返回文本”，或者将其放在链接的标题属性中。尽管我不知道屏幕阅读器会如何处理它，但在原始脚注上放一个可能也是值得的。

```
This is main body of my content.
I have a footnote link for this line
<a id="footnote-1-ref" href="#footnote-1" title="link to footnote">[1]</a>.
Then, I have some more content.
Some of it is interesting and it has some footnotes as well
<a id="footnote-2-ref" href="#footnote-2" title="link to footnote">[2]</a>.

<p id="footnote-1">
   1\. Here is my first footnote.
      <a href="#footnote-1-ref" title="return to text">&#8617;</a> 
</p>
<p id="footnote-2">
   2\. Another footnote.
      <a href="#footnote-2-ref" title="return to text">&#8617;</a>
</p> 
```

（我只是在这里猜测可访问性问题，但由于我提到的任何文章中都没有提到它，所以我认为值得提出。如果有人可以就这个问题发表更多权威意见，我会感兴趣听到。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T21:11:26.230

首先，您进入并在每个脚注前面放置一个带有名称属性的锚标记。

```
 <a name="footnote1">Footnote 1</a>
 <div>blah blah about stuff</div> 
```

此锚标记将不是链接。它只是页面的一个命名部分。然后，您将脚注标记作为引用该命名部分的标记。要引用页面的指定部分，请使用 # 符号。

```
 <p>So you can see that the candidate lied 
 <a href="#footnote1">[1]</a> 
 in his opening address</p> 
```

如果您想从另一个页面链接到该部分，您也可以这样做。只需链接页面并将部分名称添加到其上。

```
 <p>For more on that, see 
 <a href="mypaper.html#footnote1">footnote 1 from my paper</a>
 , and you will be amazed.</p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T21:14:23.460

您需要为所有脚注设置锚标记。用这样的前缀它们应该可以做到：
<a name="FOOTNOTE-1">[1]</a>

然后在页面正文中，像这样链接到脚注：
<a href="#FOOTNOTE-1">[1]</a>
（注意使用**名称**与**href**属性）

本质上，只要您设置了 A 标签的名称，您就可以通过链接到 #NAME-USED-IN-TAG 来访问它。

[http://www.w3schools.com/HTML/html_links.asp](http://www.w3schools.com/HTML/html_links.asp)有更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T03:18:03.120

对于您的情况，您最好分别在链接和页脚中使用 a-href 标签和 a-name 标签。

在滚动到 DOM 元素的一般情况下，有一个[jQuery 插件](http://demos.flesler.com/jquery/scrollTo/)。但如果性能是一个问题，我建议手动进行。这包括两个步骤：

1.  查找您正在滚动到的元素的位置。
2.  滚动到那个位置。

[quirksmode](http://www.quirksmode.org/js/findpos.html)很好地解释了前者背后的机制。这是我的首选解决方案：

```
function absoluteOffset(elem) {
    return elem.offsetParent && elem.offsetTop + absoluteOffset(elem.offsetParent);
} 
```

它使用从 null 到 0 的强制转换，这在某些圈子中是不恰当的礼仪，但我喜欢它:) 第二部分使用`window.scroll`. 所以剩下的解决方案是：

```
function scrollToElement(elem) {
    window.scroll(absoluteOffset(elem));
} 
```

瞧！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-10T20:12:27.080

Peter Boughton 的回答很好，但如果不是将脚注声明为“p”（段落），而是在“ol”（有序列表）中声明为“li”（列表项），它可能会更好：

```
This is main body of my content. I have a footnote link for this line <a href="#footnote-1">[1]</a>. Then, I have some more content. Some of it is interesting and it has some footnotes as well <a href="#footnote-2">[2]</a>.

<h2>References</h2>
<ol>
    <li id="footnote-1">Here is my first footnote.</li>
    <li id="footnote-2">Another footnote.</li>
</ol> 
```

这样，就不需要在上面和下面写数字了……只要参考文献按正确的顺序在下面列出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T21:07:21.513

使用命名锚的锚标签

[http://www.w3schools.com/HTML/html_links.asp](http://www.w3schools.com/HTML/html_links.asp)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T21:09:16.780

在锚标签中使用书签...

```
 This is main body of my content. I have a footnote link for this 
line <a href="#foot1">[1]</a>. Then, I have some more content. 
Some of it is interesting and it has some footnotes as well 
<a href="#foot2">[2]</a>.

<div>
<a name="foot1">[1]</a> Here is my first footnote.
</div>

<div>
<a name="foot2">[2]</a> Another footnote.
</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T21:09:33.800

这是我内容的主体。我有此行的脚注链接 [1]。然后，我有更多的内容。其中一些很有趣，也有一些脚注[2]。

[1] 这是我的第一个脚注。

[2] 另一个脚注。

* * *

做<a href=#tag>文字</a>

然后在脚注处：<a name="tag"> text</a>

全部没有空格。参考：[http ://www.w3schools.com/HTML/html_links.asp](http://www.w3schools.com/HTML/html_links.asp)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T21:09:52.987

<a name="1">脚注</a>

呜呜呜

<a href="#1">转到</a>到脚注。

# eclipse - 是否有 Eclipse 命令用括号括住当前选择？

> ID：66986
> 
> 赞同：25
> 
> 时间：2008-09-15T21:08:44.287
> 
> 标签：eclipse, keyboard-shortcuts

是否有 Eclipse 命令用括号括住当前选择？

创建模板是一个不错的解决方法；它不适用于“Surround With”功能，因为我想用括号括起一个表达式，而不是整行，这需要`${word_selection}`而不是`${line_selection}`.

有没有办法可以将键盘快捷键绑定到这个特定的模板？`Ctrl`- `space` `Ctrl`-`space`箭头箭头箭头并不像我希望的那样光滑。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-09-15T21:22:29.917

也许不是正确的答案，但至少是一种解决方法：

1.  定义一个名为“parenthesis”（或“pa”）的 Java 模板，其内容如下：

    (${word_selection})${光标}

2.  选择单词后，`ctrl`- `space`+ `p`+ 使用箭头键选择模板

我在 JDK 1.4.2 中使用这种技术对主要类型进行装箱，它节省了大量的输入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T21:13:24.697

简单，Window->Prefs，然后选择 Java->Editor->Templates

使用 : (${line_selection}${cursor}) 创建一个新模板

“line_selection”意味着您必须选择多行。

您也可以尝试使用“word_selection”创建另一个。

然后，选择文本，右键单击，环绕...并选择您的新模板。**********