# StackOverflow 问答 11707000-11707999

# objective-c - 为什么我在rotae之后使用“pan”会使视图相反？

> ID：11707001
> 
> 赞同：1
> 
> 时间：2012-07-29T05:44:32.780
> 
> 标签：objective-c, rotation, gesture, pan

为什么旋转后使用“平移”会使视图相反？

看来这两个手势是使用不同的坐标系？旋转用的是旋转的，平移用的是普通的？

如果视图在 0' 或 360' 附近旋转，则平移将是正常的，如果视图旋转得更接近 180'，“平移”将使视图更多地向相反方向旋转。

谢谢。

![在此处输入图像描述](../Images/3d5eddbed76583b5764a946b67b0b070.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:24:35.333

关键是在您的`handRotate`方法中，您正在为视图分配旋转变换。这需要对视图在其父视图中的显示方式进行永久性更改（直到您再次修改转换），并且旋转转换将始终“添加”到您对视图的几何属性所做的任何其他更改中。

解释您所看到的行为的是视图位置与其*锚点*之间的相互作用，如[图层几何和变换](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082)中所述。换句话说，`center`您在平移时修改的属性是应用您为视图定义的所有变换的结果。另一方面，您在平移时尝试执行的操作将需要在应用转换*之前*修改视图的位置。

解决此问题的一种方法是通过使用 layers( `CALayer`) 并修改 layer`position`属性而不是 view来重新构建您的代码`center`。像：

```
recognizer.view.layer.position = ... 
```

我认为这应该解决它。

（您需要导入 QuartzCore 才能编译）。

希望这可以帮助。

# scala - 模棱两可的隐式转换错误

> ID：11707005
> 
> 赞同：3
> 
> 时间：2012-07-29T05:47:08.397
> 
> 标签：scala, implicit-conversion

这是一个代码片段，它试图重现我在实现内部 DSL 时遇到的问题：

```
object testObj {
    implicit def foo1[T <% Function1[Int, Int]](fun: T): String = "foo1"
    implicit def foo2[T <% Function2[Int, Int, Int]](fun: T): String = "foo2"

    def test(arg: String): Unit = {}

    test((x:Int) => 5) //Ambiguous implicit conversion error
    test((x:Int, y:Int) => 5) //Ambiguous implicit conversion error
} 
```

我在显示的位置收到模棱两可的隐式转换错误：

```
<console>:21: error: type mismatch;
 found   : Int => Int
 required: String
Note that implicit conversions are not applicable because they are ambiguous:
 both method foo1 in object testObj of type [T](fun: T)(implicit evidence$1: T => (Int => Int))String
 and method foo2 in object testObj of type [T](fun: T)(implicit evidence$2: T => ((Int, Int) => Int))String
 are possible conversion functions from Int => Int to String
           test((x:Int) => 5) //Ambiguous implicit conversion error
                        ^ 
```

然而，评论其中一个隐含并不能解决问题。我正在使用视图边界，因为最后我想链接隐式。请注意，上面给出的代码片段不涉及隐式链接。

我期望`foo1`隐式转换适用于第一个`test`应用程序，而`foo2`隐式转换适用于第二个`test`应用程序。我不明白这两个隐式如何适用于两个`test`功能应用程序。为什么会发生这种情况以及如何使其发挥作用？

**编辑**：如果我不使用视图边界，它可以正常工作，如下所示。但是我想使用视图边界，因为我想按照帖子中解释的方式 [链接隐式如何在 Scala 中链接隐式？](https://stackoverflow.com/questions/5332801/how-can-i-chain-implicits-in-scala).

```
implicit def foo1(fun: Function1[Int, Int]): String = "foo1"
implicit def foo2(fun: Function2[Int, Int, Int]): String = "foo2"

def test(arg: String): Unit = {}
test((x:Int) => 5) //No error
test((x:Int, y:Int) => 5) //No error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:51:04.707

恐怕这行不通。解决隐式时不考虑视图边界，因此您不能链接隐式。这就是设计，因为这样的链接可能会创建一些非常不可读的代码。我看到的唯一选择是为每个可能的转换链创建一个新的隐式转换。

# ruby-on-rails - rails 3.1 - 如何使用关联进行简单查询（用户的所有订单，通过帐户）

> ID：11707010
> 
> 赞同：0
> 
> 时间：2012-07-29T05:48:27.490
> 
> 标签：ruby-on-rails, activerecord

```
Users has_many Accounts
Accounts belongs_to Users

Accounts has_many Orders
Orders belongs_to Account 
```

我正在尝试获取用户“u”的所有订单列表

正如预期的那样，u.accounts 给出了该用户所有帐户的列表

u.accounts.joins(:orders) 不正确，因为它列出了商店，而不是订单（似乎列出了每个订单的商店，而不是每个订单的订单）

是一个用户有3个账户，每个账户有4个订单，我应该有12行。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:00:01.880

在 user.rb 中：

```
has_many :orders, :through => :accounts 
```

然后你应该可以做 u.orders。

# ruby-on-rails - 在另一个网站中嵌入用 Ruby on Rails 编码的网页？

> ID：11707013
> 
> 赞同：7
> 
> 时间：2012-07-29T05:49:14.133
> 
> 标签：ruby-on-rails, embed

我想让我用 Ruby on Rails 编码的网页作为后端可嵌入，以便用户能够通过复制和粘贴一些嵌入代码来轻松共享它。（很像 YouTube 嵌入代码，但对于网页）有人可以指点我一个教程或一般方向如何去做吗？我打算在 Joomla CMS 中嵌入我的网页。

非常感谢。

码头。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T18:57:04.550

假设您要为移动应用商店创建一个小部件。该小部件将允许在任何网页中嵌入某个应用程序的信息。

如果我们使用`script`标签，可嵌入代码可能如下所示：

```
<script src="http://my_appstore.com/apps/1234.js" type="text/javascript"></script> 
```

其中 1234 将是我们要嵌入的特定应用程序的 id。

如果我们使用该`iframe`标签，则放入其他网页的代码可能如下所示：

```
<iframe src="http://my_appstore.com/apps/1234" width="500" height="200" frameborder="0"></iframe> 
```

我们必须决定的第一件事是使用什么样的标签。使用 and`iframe`标记更直接，但我们仅限于使用 iframe。使用 iframe 不是一个糟糕的选择，但如果您将其分发到第三方网页，之后您将无法更改它。相反，最好使用`script`将插入 iframe 的标记。如果您以后选择这样做，此标签还允许您切换到将您的内容直接嵌入到页面中。

插入 iframe 意味着您的内容比例必须固定，并且不能更改以适应父窗口中不同的窗口大小。直接嵌入您的内容没有这个问题，但您必须非常小心 CSS 并向您的所有元素添加样式，否则它们将继承主机页面样式。除非您使用 JSONP，否则直接嵌入您的内容然后进行 AJAX 调用可能会产生跨浏览器请求问题。

**让我们首先使用Sinatra**创建一个简单的网页，我们将使用它来嵌入我们的**Rails** Widget：

```
mkdir host_page
cd host_page 
```

使用您的文本编辑器在文件夹`host.rb`内创建文件`host_page`：

```
# host.rb
require 'sinatra'
get '/' do
  erb :index
end 
```

创建`index.erb`并启动 host_page：

```
mkdir views
cat '<script src="http://localhost:3000/apps/1234.js" type="text/javascript"></script>' > views/index.erb
ruby host.rb 
```

现在，如果我们访问`http://localhost:4567/`，我们什么也看不到，但很快就会有一个小部件。

现在让我们创建将嵌入的 rails 应用程序。从您的项目的新文件夹开始，然后执行以下操作：

```
rails new widget
cd widget/
rails g controller apps
rm app/assets/javascripts/apps.js.coffee 
```

添加所需的路线：

```
# config/routes.rb
MyApp::Application.routes.draw do
  resources :apps
end 
```

编辑您的应用控制器：

```
# app/controllers/apps_controller.rb
class AppsController < ApplicationController
  def show
    @mobile_app = {
      :title => "Piano Tutorial",
      :descr => "Learn to play piano with this interactive app",
      :rating => "*****"
    }
  end
end 
```

在那个控制器中，我们总是返回同一个应用程序。在实际情况中，我们将有一个模型和控制器，它们将从 params 中找到的模型 id 中检索适当的应用程序数据。

创建您的 javascript 视图并启动服务器：

```
echo 'document.write("<h3><%=@mobile_app[:title]%></h3><p><%=@mobile_app[:descr]%></p><p><em><%=@mobile_app[:rating]%></em><p>");' > app/views/apps/show.js.erb
rails server 
```

就是这样。去`http://localhost:4567/`看看你的小部件。

如果您想使用**iframe**，请将`show.js.erb`文件的内容替换为：

```
document.write("<%=escape_javascript(content_tag(:iframe, '', :src => app_url(params['id'])).html_safe)%>"); 
```

这里我们使用的是 a `content_tag`，但也可以通过`<iframe>`像以前一样使用标签以类似于前一个的方式完成。

显然，如果我们使用 iframe，我们会执行两个调用，一个用于渲染 iframe，另一个用于加载该 iframe 的内容。对于第二次调用，我们仍然缺少一个 html 视图。只需创建这样的视图：

```
# app/views/apps/show.html.erb
<h3><%=@mobile_app[:title]%></h3>
<p><%=@mobile_app[:descr]%></p>
<p><em><%=@mobile_app[:rating]%></em><p> 
```

现在您可以再次指向并在**iframe**`http://localhost:4567/`中查看您的小部件。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-23T21:25:31.110

如果有人现在遇到这个，差不多9年后......

如果您使用 JavaScript 方法，则必须允许跨域请求，例如上面评论中提到的@abessive。我可以通过将它添加到我的控制器类的顶部来做到这一点：

```
protect_from_forgery except: :method 
```

`:method`为嵌入请求调用的方法在哪里。

这是我的控制器：

```
class PagesController < ApplicationController
  protect_from_forgery except: :home

  def home
    render 'index.js'
  end
end 
```

以及 routes.rb 中的相关路由：

```
get "index.js", to: "pages#home" 
```

我有views/pages/index.js.erb 和一些呈现小部件的JS 代码。

（我使用的是 Rails 6.1.4）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-21T14:39:00.723

有点晚了，但我在自己寻找解决方案时偶然发现了这个问题。我找到了一个完全符合描述的宝石。它将使您的 Rails 应用程序像 YouTube 视频或来自其他网页（如 Google 地图、Instagram、Twitter）的内容一样可嵌入......它被称为 EmbedMe

要使用，您只需更改要定义的路径，哪些路径需要是可嵌入的

```
get 'private', to: 'application#private'
embeddable do
  get 'embeddable', to: 'application#embeddable'
end 
```

[Github](https://github.com/tobiasbhn/embed-me)上的 Gem或[文档](https://www.rubydoc.info/gems/embed_me/)**

# iphone - Xcode 4 错误：“未设置视图出口”

> ID：11707014
> 
> 赞同：0
> 
> 时间：2012-07-29T05:49:32.310
> 
> 标签：iphone, view, xcode4, outlet

我开始使用 Xcode/iOS 进行编程
我一直在阅读一些书籍和教程......对于我的第一个应用程序，我尝试做一个“Hello World”我以正确的方式按照每一步完成了程序，但是当我运行应用程序时，程序崩溃......我阅读了一些帖子以找到解决方案，但即使我检查或执行帖子建议的步骤，我仍然有同样的错误。我试图做另一个项目，但结果总是一样的。这是我的屏幕截图

![在此处输入图像描述](../Images/c92277aab774e24bab2d25600280b462.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:14:52.123

尝试通过将链接从“视图”拖动到 nib 中的“文件所有者”来设置“查看文件所有者的参考出口”。我认为这就是您遇到崩溃的原因：

![在此处输入图像描述](../Images/491c81f18352b3f628a8686ece4cea01.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:29:19.593

将文件所有者的类更改为您的 ViewController，然后再次设置 View Outlet..！！

如果它不起作用，请删除视图并从库中拖动一个新视图。再次设置文件所有者和查看出口。

# jquery - 从类中查找和运行变量？

> ID：11707018
> 
> 赞同：0
> 
> 时间：2012-07-29T05:50:13.577
> 
> 标签：jquery, variables

我在我的网站上使用 jquery，我有一个变量列表，一旦按下按钮就需要调用这些变量。基本上，我需要从类名中确定变量！:(

例如：http: [//jsfiddle.net/shannonhochkins/f6dLQ/](http://jsfiddle.net/shannonhochkins/f6dLQ/)

所以它返回“网站”的类名，这也是变量“网站”，但我需要以某种方式确定使其等于变量而不是字符串“网站”？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:10:43.227

如果你在全局范围内声明变量，即不在任何函数中，它将是窗口对象的属性，并且可以轻松检索

```
$(document).ready(function(){
    $('body a').click(function() {
        var name = $(this).attr('class');
        alert(window[name]);
    });
});    

var website = "http://journal.shannonhochkins.com/"; 
```

[http://jsfiddle.net/f6dLQ/3/](http://jsfiddle.net/f6dLQ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:19:46.287

虽然 Musa 的解决方案可行，但这似乎是糟糕的设计。我建议您制作一个将类名映射到数据的表：

```
var class_table = {
  website: "http://journal.shannonhochkins.com/",
  ...
} 
```

然后使用`alert(class_table[name])`

# php - ImageMagick PDF 错误

> ID：11707019
> 
> 赞同：1
> 
> 时间：2012-07-29T05:50:26.770
> 
> 标签：php, pdf, imagemagick

我正在使用 ImageMagick-6.2.8，我只想加载 PDF：

```
<?php
  $imagick = new imagick('aleister-crowley.pdf');
?> 
```

但我收到错误（Firefox）：“连接已重置”

我已经测试了其他支持的文件扩展名，但是 PDF ......

请帮忙。

# c# - C# 随机分配字符串而不重复

> ID：11707020
> 
> 赞同：-4
> 
> 时间：2012-07-29T05:50:26.933
> 
> 标签：c#, .net, random, shuffle

大家好，我需要一些帮助，我想在 6 个按钮中随机分配 6 个字符串作为文本，而不需要任何重复。那就是我想做某种改组并分发它，但是每个按钮都不会重复，每个按钮都会包含一个唯一的字符串。如果有人可以发布代码，那就太好了:)谢谢

```
class Card_Deck
{
    public Random r;
    public string ReceiveCards()
    {
        List<string> cards = new List<string>();
        cards.Add("♣ King");
        cards.Add("♦ King");
        cards.Add("♥ King");
        cards.Add("♠ King");
        cards.Add("♣ Jack");
        cards.Add("♦ Jack");

        int index = r.Next(cards.Count);
        var card = cards[index];
        cards.RemoveAt(index);
        return card;

    }
} 
```

}

这是主要形式

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        Card_Deck cd = new Card_Deck() { r = new Random(DateTime.Now.Millisecond) };

        button1.Text = cd.ReceiveCards();
        button2.Text = cd.ReceiveCards();
        button3.Text = cd.ReceiveCards();
        button4.Text = cd.ReceiveCards();
        button5.Text = cd.ReceiveCards();
        button6.Text = cd.ReceiveCards();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:23:24.877

最简单的方法是在类内部实现一个随机播放算法 `CardDeck`。像费雪-耶茨这样的东西。

您遇到的问题是您每次都在重新制作数组，然后抓取一个随机元素。这将导致重复。您的选择是要么返回整个洗牌数组（更好的一个 imo ），要么使用私有变量使卡片组有状态。

```
public class CardDeck {

    private List<String> cards;

    public CardDeck () { 
        cards = { "♣ King", "♦ King", "♥ King",
                  "♠ King", "♣ Jack", "♦ Jack" }.toList<String>();
    }

    public List<String> Shuffle () {
        // shuffle cards here

        var rand = new System.Random();
        return cards.OrderBy( x => rand.Next() ).toList<String>();
    }
}

public partial class Form1 : Form 
{
    public Form1()
    {
        InitializeComponent();

        var deck = new CardDeck();
        var shuffledDeck = deck.Shuffle();

        buttom1.Text = shuffledDeck.pop();
        buttom2.Text = shuffledDeck.pop();
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:29:31.557

> 公共部分类 Form1 : Form { public Form1() { InitializeComponent(); }
> 
> ```
>  private void button1_Click(object sender, EventArgs e)
>     {
>         label1.Text = Card_Deck.ReceiveCards();
>     }
> 
>     private void button2_Click(object sender, EventArgs e)
>     {
>         label2.Text = Card_Deck.ReceiveCards();
>     }
> 
>     private void button3_Click(object sender, EventArgs e)
>     {
>         label3.Text = Card_Deck.ReceiveCards();
>     }
>     private void button4_Click(object sender, EventArgs e)
>     {
>         label4.Text = Card_Deck.ReceiveCards();
>     }
>     private void button5_Click(object sender, EventArgs e)
>     {
>         label5.Text = Card_Deck.ReceiveCards();
>     }
>     private void button6_Click(object sender, EventArgs e)
>     {
>         label6.Text = Card_Deck.ReceiveCards();
>     }
>     class Card_Deck
>     {
>         public static Random r = new Random();
>         private static List<string> cards = new List<string>() { "♣ King 1",
>             "♦ King 2", 
>             "♥ King 3",
>             "♠ King 4", 
>             "♣ Jack 5", 
>             "♦ Jack 6" };
> 
>         public static string ReceiveCards()
>         {
>             if (cards.Count > 0)
>             {
>                 int index = r.Next(cards.Count);
>                 var card = cards[index];
>                 cards.RemoveAt(index);
>                 return card;
>             }
>             else
>             {
>                 return "";
>             }
> 
>         }
>     } 
> 
> } 
> ```

# c# - 为什么使用 + 运算符的字符串连接适用于 C# 中的动态类型？

> ID：11707022
> 
> 赞同：4
> 
> 时间：2012-07-29T05:51:09.550
> 
> 标签：c#, string, dynamic, expression-trees, dynamic-language-runtime

我最近看到了一个示例，其中演示了以下内容：

```
T Add<T>(dynamic a, dynamic b)
{
    return a + b;
}

Add<string>("hello", "world");  // Returns "helloworld" 
```

但是，如果我尝试使用表达式来创建“通用”添加函数：

```
ParameterExpression left = Expression.Parameter(typeof(T), "left");
ParameterExpression right = Expression.Parameter(typeof(T), "right");
var add = Expression.Lambda<Func<T, T, T>>(Expression.Add(left, right), left, right).Compile();  // Fails with System.InvalidOperationException : The binary operator Add is not defined for the types 'System.String' and 'System.String' when T == String. 
```

然后将此函数与字符串一起使用，它失败了，因为 String 类型实际上并没有实现 + 运算符，而只是 String.Concat() 的语法糖。

那么，动态如何允许它工作？我认为在运行时它已经过了使用 String.Concat() 重写 + 的点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T07:11:32.693

`dynamic`使用复制 C# 编译器规则的运行时辅助函数。即使框架未定义任何运算符`+`，这些规则之一也允许对象。`string`标准数字类型（例如，`int`也没有自定义运算符重载）也是由编译器完成的，并且需要在运行时在使用`dynamic`. 这就是您需要引用 Microsoft.CSharp.dll 的原因：`dynamic`如果没有这些帮助函数，就无法工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T06:22:39.390

根据文档，也许`Expression.Add(left, right)`您可​​以说static 的在`Expression.Add(left, right, method)`哪里而不是。`method``MethodInfo``String.Concat(String, String)`

```
var method = typeof(string).GetMethod("Concat", new[] { typeof(string), typeof(string), }); 
```

**编辑：**嗯，我的回答有点没抓住重点。有趣的问题是：运行时在尝试解析`+`编译器在没有类型检查的情况下允许通过的 a 时会考虑哪些操作？数字类型的内置添加？字符串连接？委托串联？用户定义的运算符重载？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:08:42.903

在您的第一个示例中， a 和 be 仍然是字符串（试试这个）：

```
// Define other methods and classes here
T Add<T>(dynamic a, dynamic b)
{
    Console.WriteLine(a.GetType());
    Console.WriteLine(b.GetType());
    return a + b;
} 
```

也许这更有意义？

```
void Main()
{
var x = Add<string>(new { val = "hello"},new { val = "world"});  // Returns "hello world"  
Console.WriteLine(x);
}

// Define other methods and classes here
T Add<T>(dynamic a, dynamic b)
{
    return a.val + b.val;
} 
```

# api - 如何获得喜欢的来源指标？

> ID：11707026
> 
> 赞同：3
> 
> 时间：2012-07-29T05:52:36.123
> 
> 标签：api, facebook-graph-api, facebook-fql

我正在尝试获取这些指标的信息[https://developers.facebook.com/docs/reference/fql/insights/#like_sources](https://developers.facebook.com/docs/reference/fql/insights/#like_sources)。

但似乎这些指标都不起作用。我试过这个：

```
graph.facebook.com/fql?q=SELECT metric, value FROM insights WHERE object_id = 256781961002361 AND metric = 'timeline' 
```

并且：

```
graph.facebook.com/256781961002361/insights/timeline 
```

但我不断得到这个：

```
{
  "error": {
    "message": "(#604) Invalid metric name: timeline",
    "type": "OAuthException",
    "code": 604
  }
} 
```

有任何想法吗？

# php - 在 php 类中使用 html 是不是很糟糕？

> ID：11707030
> 
> 赞同：7
> 
> 时间：2012-07-29T05:53:45.383
> 
> 标签：php, wordpress

在类函数中使用 html 有什么问题吗？我在 DOM 中调用它，所以我不需要返回字符串。

```
public function the_contact_table(){
    ?>
    <div>
        some html here
    </div>
    <?php
} 
```

另外，当我确实需要字符串时，我会使用这种方法吗？有没有更好的方法或者这是相对标准的？

```
public function get_single(){
    ob_start();?>
        <div class='staff-member single'>
            <div class='col left'>
                <div class='thumbnail'>
                    thumbnail
                </div>
                <?php $this->the_contact_table(); ?>
            </div>
            <div class='col right'>

            </div>
        </div>      
    <?php
    $content = ob_get_contents();
    ob_end_clean();
    return $content;
} 
```

**更新**

我应该解释我为什么要这样做。我正在制作一个 Wordpress 插件并想控制一个帖子类型的输出。所以我使用如下过滤器

```
public function filter_single($content){
     global $post;
     if ($post->post_type == 'staff-member') {

         $sm = new JM_Staff_Member($post);
         $content = $sm->get_single();
     }
     return $content;
} 
```

如您所见，我*必须*向 wordpress 核心返回一个字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T06:02:21.127

如果要将长字符串存储到变量中，则应该使用[HEREDOC而不是输出缓冲。](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)它看起来像这样：

```
$content = <<<EOD
content here
EOD; 
```

`EOD`可以是任何东西，但请注意两件重要的事情：

1.  它前面不能有任何空格，并且必须在它自己的行上
2.  它不应该是可以在您的内容中找到的字符串

如果您使用的是 PHP >= 5.3，那么您应该使用 NOWDOC，它不会解析文档中的变量（除非您需要它）。与 NOWDOC 语法的唯一不同是标记用引号括起来：

```
$content = <<<'EOD'
content here
EOD; 
```

我偏离输出缓冲的原因是它可以防止服务器将发送到客户端的数据分块。这意味着请求看起来会更慢，因为不是将内容逐步发送到客户端并显示，而是强制一次发送所有内容。输出缓冲是一种技巧，适用于粗心`echo`地处理数据而不是返回数据的情况，或者是特定应用程序的工具。我还想，如果您使用输出缓冲（因为它涉及函数调用）而不是使用 HEREDOC 将字符串转换为变量或包含视图，那么执行时间会受到影响。

现在要回答它是否合适的问题，我想说在 MVC 应用程序中，所有 HTML 和其他内容都应该包含在它自己的视图中。然后控制器可以调用视图来显示自己，而不必担心知道显示视图所涉及的代码。您仍然可以将信息（如标题、作者、标签数组等）传递给视图，但这里的目标是将内容与逻辑分开。

也就是说，Wordpress 模板和代码一开始看起来很草率，如果根本没有实现 MVC，那么如果要为此创建视图工作量太大，我会说这种草率符合 WP 的风格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T06:06:17.280

通过在 PHP 类文件中放置实际上是“视图”的内容来疏远前端开发人员，这不是一个好的做法。这是我第一次开始使用 PHP 时遇到的最大问题之一，我想在类中动态创建内容。这是一个好主意，但您希望以一种允许团队中的许多成员尽可能顺利地一起工作的方式来实现它；]。

您可能应该将内容放在一个名为“staff-member-single.php”的单独文件中，然后在函数中调用该文件

```
public function get_single(){
    ob_start();
    require_once('views/staff-member-single.php');
    $content = ob_get_contents();
    ob_end_clean();
    return $content;
} 
```

您通常会将其重构为可重用的方法，因此它看起来有点像..

```
public function get_single()
{
    $string = $this->render_view_as_string('satff-member-single');
    return $string;
}

public function render_view($view)
{
    require('views/'.$view.'.php');
}

public function render_view_as_string($view)
{
    ob_start();
    $this->render_view($view);
    $content = ob_get_contents();
    ob_end_clean();
    return $content;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T06:01:52.873

我认为仅将 PHP 用于应用程序逻辑并将一些数据传输到视图层（模板引擎）是一种很好的做法。根据这一点，有一些像MVC这样的模式。

# android - 未终止的实体引用错误

> ID：11707031
> 
> 赞同：6
> 
> 时间：2012-07-29T05:53:47.210
> 
> 标签：android

我正在为我自己的 android 应用程序使用谷歌地图路线。2 天前它运行良好，但之后当应用程序运行时它通过 logcat 给我错误。任何人都可以告诉我这个问题的原因和解决方案。

```
org.xml.sax.SAXParseException: unterminated entity ref (position:ENTITY_REF &@1:799 in java.io.InputStreamReader@406cdeb0) 
```

* * *

```
private String[] getDirectionData(String sourceLat, String sourceLong, String destinationLat, String destinationLong) {

 String urlString = "http://maps.google.com/maps?f=d&hl=en&" +"saddr="+sourceLat+","+sourceLong+"&daddr="+destinationLat+","+destinationLong + "&ie=UTF8&0&om=0&output=kml";
 Log.d("URL", urlString);
 Document doc = null;
 HttpURLConnection urlConnection = null;
 URL url = null;
 String pathConent = "";

 try {

  url = new URL(urlString.toString());
  urlConnection = (HttpURLConnection) url.openConnection();
  urlConnection.setRequestMethod("GET");
  urlConnection.setDoOutput(true);
  urlConnection.setDoInput(true);
  urlConnection.connect();
  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
  DocumentBuilder db = dbf.newDocumentBuilder();
  doc = db.parse(urlConnection.getInputStream());

 } catch (Exception e) {

     Log.w("Error in google map",e);
 }

 NodeList nl = doc.getElementsByTagName("LineString");
 for (int s = 0; s < nl.getLength(); s++) {
  Node rootNode = nl.item(s);
  NodeList configItems = rootNode.getChildNodes();
  for (int x = 0; x < configItems.getLength(); x++) {
   Node lineStringNode = configItems.item(x);
   NodeList path = lineStringNode.getChildNodes();
   pathConent = path.item(0).getNodeValue();
  }
 }
 String[] tempContent = pathConent.split(" ");
 return tempContent;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T03:29:41.793

在我的情况下，这个问题出现在 /res/drawable 文件夹中的 .png 文件上。这是一个错误，并在[此处](http://code.google.com/p/android/issues/detail?id=39213)报告。因此，为了将来参考，如果您在可绘制对象上面对它，请检查一下。总而言之，至少将您的 ADT 更新到 21.0.1 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T06:29:46.417

我遇到了同样的问题。调试后发现是'&'字符引起的。它应该被逃脱

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:17:07.653

我不确定，但我认为是因为 output=kml 不再可用，很多用户都遇到了麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T06:12:36.993

错误消息非常具有暗示性：`ref`标签未终止，例如`<ref>`没有封闭`</ref>`对。[使用这样](http://www.w3schools.com/xml/xml_validator.asp)的工具验证您的 XML 输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T13:51:15.287

我自己也面临同样的问题。之所以会出现此异常，是因为谷歌最近已弃用了一些重要的 KML 元素。例如，请参阅[GeometryCollection](https://developers.google.com/kml/documentation/kmlelementsinmaps)。如果您的代码尝试在接收到的文档中查找任何此类元素，它可能会抛出 SAXParseException: unterminated entity ref 。

他们为地图引入了新的 API。它可以[在这里找到](https://developers.google.com/maps/documentation/webservices/)。

我自己下载了 kml 文件，并将其存储在设备中。当我使用编辑器查看它时，我没有找到我的代码正在寻找的元素。但是，如果您使用 kml 文件在最新的 Chrome 版本中查找路由，则它可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-25T13:20:11.100

我遇到了同样的问题。它位于 .png 图像文件中。我编辑文件后出现问题。我搜索了解决方案，但之后我使用“项目”选项卡下的“清理..”选项清理了我的项目。所以最后我摆脱了那个“

# vba - 关闭录制的 VBA 宏的 R1C1 参考样式

> ID：11707033
> 
> 赞同：2
> 
> 时间：2012-07-29T05:54:32.453
> 
> 标签：vba, excel

在录制的 VBA 宏中，它们的公式似乎使用`R1C1 reference style`. 例如，`B4`填写`B2+1`：

```
Range("B4").Select
ActiveCell.FormulaR1C1 = "=R[-2]C+1" 
```

有谁知道这个模式可以关闭吗？例如，让录制的宏看起来像：

```
Range("B4").Select
ActiveCell.Formula = "=B2+1" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T12:20:04.280

我相信你不能那样做。宏将始终以 R1C1 样式记录。

您可以随时切换样式，但它只会应用于工作表，如果您录制宏，它仍将显示 R1C1 参考样式。

R1C1风格很容易理解

在 R1C1 参考风格中，范围是指单元格与您正在调用的单元格的距离。例如，如果您有从 R1C1 到 R5C1 的 5 个值，并且从 R7C2 调用范围，则范围将为 R[-6]C[-1]:R[-2]C[-1]。这里，范围中的第一个单元格在单元格 R7C2 之前 6 行，在单元格 R7C2 之前 1 列，对于范围中的最后一个单元格也是如此。

如果我以您的示例为例，则`"=R[-2]C+1"`表示该公式指的是向上两行 (-2) 且在同一列 (0) 中的行。你的公式是一样的`"=R[-2]C[0]+1"`

**编辑**

这是我编写的一个小函数，可以帮助您将 R1C1 转换为 A1 字符串

```
Sub Sample()
    '~~> This will give you $B$2
    Debug.Print R1C12A1("B4", "R[-2]C")

    '~~> This will give you E227
    Debug.Print R1C12A1("O9", "R[218]C[-10]", True)

    '~~> This will give you $Y$217
    Debug.Print R1C12A1("O9", "R[208]C[10]")
End Sub

Function R1C12A1(baseCell As String, sRC As String, Optional RemDollar As Boolean = False) As String
    Dim MyArray() As String
    Dim r As Long, c As Long

    sRC = Replace(sRC, "R", "")     

    If Left(sRC, 1) = "C" Then
        r = 0
    Else
        r = Replace(Replace(Split(sRC, "C")(0), "[", ""), "]", "")
    End If

    If Right(sRC, 1) = "C" Then
        c = 0
    Else
        c = Replace(Replace(Split(sRC, "C")(1), "[", ""), "]", "")
    End If

    If RemDollar = False Then
        R1C12A1 = Range(baseCell).Offset(r, c).Address
    Else
        R1C12A1 = Replace(Range(baseCell).Offset(r, c).Address, "$", "")
    End If
End Function 
```

**注意**：我在这里没有做任何错误处理。如果需要，我相信您可以将其合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:51:11.090

在录制宏时，曾经有一个工具可以切换相对参考。

当您开始录制时，在宏工具栏中 - 在停止按钮附近 - 有一个按钮可以切换相对参考；这与切换 R1C1 不同吗？或者这不再可用了？

我从不费心自己切换它，就像 Siddharth 说的那样，R1C1 并不太难理解，而且不管你做什么，VBA 都需要一些编辑，所以同时如果你想使用其他语法，很容易改变.

我刚刚玩过以下内容，但似乎没有帮助，所以也许我将这个按钮的使用与 R1C1 混淆了......

![在此处输入图像描述](../Images/272a86b07284a868d8caa2bb22db5998.png)

# php - 共享主机有哪些第三方搜索引擎软件/库

> ID：11707041
> 
> 赞同：2
> 
> 时间：2012-07-29T05:56:52.080
> 
> 标签：php, mysql, html, search-engine

我一直在寻找一些可用于共享主机的开源搜索引擎软件/库，我确信 Lucene、Lucene.Net、Sphinx 或 Xapian 等服务不能用于共享主机，因为它们需要一些安装或重启。

查看维基百科文章（[见这里](http://en.wikipedia.org/wiki/Full_text_search)）我发现了这些开源搜索引擎解决方案。

```
Apache Solr
BaseX
Clusterpoint Server (freeware licence for a single-server)
DataparkSearch
ElasticSearch  (Apache License, Version 2.0)
Ferret
ht://Dig
Hyper Estraier
KinoSearch
Lemur/Indri
Lucene
mnoGoSearch
Sphinx
Swish-e
Xapian 
```

正如我搜索的那样，它们都不能用于共享主机。我想当我在共享主机上时，我必须坚持使用 MySQL 全文搜索。

因此，对于共享托管的搜索引擎替代方案的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:05:41.627

[http://www.google.com/enterprise/search/products_gss.html](http://www.google.com/enterprise/search/products_gss.html)

[http://www.bing.com/community/site_blogs/b/developer/archive/2010/03/22/add-a-bing-search-box-to-your-site-in-3-easy-steps。 aspx](http://www.bing.com/community/site_blogs/b/developer/archive/2010/03/22/add-a-bing-search-box-to-your-site-in-3-easy-steps.aspx)

[http://developer.yahoo.com/search/boss/boss_api_guide/v2_univer_api_args.html#v2_univer_api_query](http://developer.yahoo.com/search/boss/boss_api_guide/v2_univer_api_args.html#v2_univer_api_query)

你试过看这些吗？它们适用于已被搜索引擎正确索引的公共网站。

另一种选择是编写自己的搜索引擎，尽管这可能不如共享托管计划中的三大引擎之一处理的那么快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T02:14:59.040

只要您的主机支持 PHP 5+，您就可以使用 Zend Framework 的 Lucene 实现。它支持 Lucene 索引格式版本 1.4 - 2.3。由于索引直接写入文件系统，它应该支持任何允许您访问文件系统的主机（大多数都这样做）。

文档： http: [//framework.zend.com/manual/en/zend.search.lucene.html](http://framework.zend.com/manual/en/zend.search.lucene.html)

话虽如此，您也可以简单地使用 MySQL 全文搜索。它并非没有限制，也不是最具可扩展性的解决方案，但是您所谈论的共享主机通常不是最具可扩展性的环境，因此鉴于此，我不会太担心。

PostgreSQL 也是一个选项，如果您使用 Heroku 等托管服务提供商（您可以在 Heroku 上使用 PHP），建议您使用 PostgreSQL。

此外，根据您的搜索需求，您可以简单地阅读倒排索引并推出您自己的简单实现。

最后，我想提一下，您实际上并没有列出您感兴趣的搜索功能。

*   术语突出显示
*   词条提升
*   布尔查询
*   自定义分析器/标记器
*   分面浏览
*   ETC...

如果不列出您想要的功能，人们总是很难做出准确（且公正）的推荐。话虽如此，您可能会对基础知识感到满意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T10:51:21.853

ClusterPoint 最近在[http://cloud.clusterpoint.com/](http://cloud.clusterpoint.com/)上推出了托管“云”服务。当您要使用共享主机时，您也可以使用托管数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:04:06.643

另一种选择是 Findberry ( [http://www.findberry.com](http://www.findberry.com) )。您也可以控制自动索引的频率并手动调用索引。我不知道它是否适合您的情况，但可能值得一试。

# android - 在android的拨号器上显示图片

> ID：11707045
> 
> 赞同：1
> 
> 时间：2012-07-29T05:58:55.570
> 
> 标签：android, image, phone-state-listener

我希望我的应用程序在来电时显示图片。

到目前为止，我所做的是`catch`对`phone state`.

我的问题是我现在如何将图像放在拨号器的前景上？

这是我的片段：

```
public class reviever extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    Log.d("TAG", "phone is ringing");

    new Thread() {
        public void run() {
            try {
                sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }.start();

    Intent toPop = new Intent(context, PicPop.class);
    toPop.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(toPop);
}} 
```

显现：

```
<activity
        android:name=".PicPop"
        android:theme="@android:style/Theme.Translucent">

    </activity> 
```

我现在的问题是一切看起来都不错，我在股票拨号器顶部有一张小图片，背景是半透明的，但我无法接听电话。我该如何更改它以使图片保持在拨号器的顶部但与拨号器进行交互以便接听电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:17:49.587

我找到了一个方法。您只需要使活动的背景透明 `android:theme="@android:style/Theme.Translucent.NoTitleBar" 并声明活动不可触摸并在锁定时显示：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE); 
```

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:09:20.130

是的，您可以启动一个带有 Picture/ImageView 的活动（来自电话状态接收器），但请确保您的自定义屏幕上有应答/拒绝按钮，否则它不会让用户接听/拒绝呼叫。

PS :- 这个东西的行为在不同的设备上是不同的，即使在同一个设备上它有时也不能覆盖 Incall 屏幕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T07:04:40.537

对不起，你不能。出于安全原因，您可以自定义很多东西，包括拨号器，但不能自定义呼入/呼出/通话中的屏幕。

[http://kschang.hubpages.com/hub/Full-Android-Customization-Guide-How-to-Change-Almost-Anything-In-Your-Android-Device](http://kschang.hubpages.com/hub/Full-Android-Customization-Guide-How-to-Change-Almost-Anything-In-Your-Android-Device)

# python - 百分号的python使用 - 似乎不是模数或字符串格式

> ID：11707046
> 
> 赞同：4
> 
> 时间：2012-07-29T05:59:14.700
> 
> 标签：python

`%`当符号不是模数或字符串格式化程序时，符号在 python 中意味着什么？我在`timeit`模块中这个令人费解的代码块中遇到了它：

```
# Don't change the indentation of the template; the reindent() calls
# in Timer.__init__() depend on setup being indented 4 spaces and stmt
# being indented 8 spaces.
template = """
def inner(_it, _timer):
    %(setup)s
    _t0 = _timer()
    for _i in _it:
        %(stmt)s
    _t1 = _timer()
    return _t1 - _t0
"""

def reindent(src, indent):
    """Helper to reindent a multi-line statement."""
    return src.replace("\n", "\n" + " "*indent) 
```

我已经在 Google 和 SO 上搜索了这个运算符是什么，但没有运气。我正在使用 python 2.6.1 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T06:01:56.853

这也是字符串格式。当您传递格式替换器的字典时使用该`%(var)`语法，并且每个都被名称替换：

```
>>> "%(foo)s is replaced" % {'foo': 'THIS'}
'THIS is replaced' 
```

[这是文档](http://docs.python.org/library/stdtypes.html#string-formatting-operations)中描述的“映射键”用法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T06:02:34.153

这是它作为格式说明符的用途。

```
>>> print '%(b)s %(a)s' % { 'a': "world", 'b': "hello" }
hello world 
```

# java - 多线程socket连接中如何实现读写方法

> ID：11707048
> 
> 赞同：1
> 
> 时间：2012-07-29T05:59:58.727
> 
> 标签：java

我有一个从 LIS 机器读取和写入数据的程序。我正在从特定端口读取数据并将数据写入数据库表。当我从表中读取数据并将它们添加到 Arraylist 中时，它正在添加重复记录。我找不到解决方案。

代码如下：

```
public class PacsMultiThread extends Thread{

    private static Logger logger = Logger.getLogger(PacsMultiThread.class);

    // instance for Server socket and Socket class
    private ServerSocket serverSocket = null;
    private Socket socket = null;  
    ServerParams params = Configuration.getConfig().getServerParams();

    PacsMultiThread() {

        super("PacsMultiThread");

        try {
            // listen on local port
            serverSocket = new ServerSocket(Configuration.getConfig().getHostParams().getPort());

        } catch (IOException e) {
            logger.error("Could not listen on port: " + Configuration.getConfig().getServerParams().getPort() + ", " + e);
            System.exit(1);
        }
    }

    /*
     * thread run method call
     * @see java.lang.Thread#run()
     * Mohammod Hossain
     */
     public void run() {

         logger.info("run method is calling... ");

            if (serverSocket == null)
                return;

            while (true) {              
                try {
                    socket = serverSocket.accept();
                     logger.info("connection status: "+ socket.isConnected());
                } catch (IOException e) {
                    logger.error("Accept failed: " + Configuration.getConfig().getServerParams().getPort() + ", " + e);
                    System.exit(1);
                }           

                    try {
                        // readData();
                        //calling new Thread for reading data from port
                        ReadHandler readThread = new ReadHandler(socket);
                        readThread.start();

                       // writeData(socket);

                        //calling new Thread for writing  data into port
                        WriteHandler writeThread = new WriteHandler(socket);
                        writeThread.start();

                      } catch (Exception e) {
                          logger.error(e.getMessage());
                        }         
            }
        }

    public class WriteHandler extends Thread {
         private static Logger logger = Logger.getLogger(WriteHandler.class);
        private Socket socket;

    ServerParams params = Configuration.getConfig().getServerParams();
    OutputStream out = null;

    public WriteHandler(Socket socketConnection){
        super();
        this.socket = socketConnection;
    }

    @Override
    public void run() {

        writeData(socket);
    }

    private void writeData(Socket socket){

         /*
          * calling  writeData method for data write to port
          * @param Socket socket
          */

         logger.info("writeData method is called :: ");      

          try{ 
              //calling client socket method for connect to server port
             // logger.info(" client socket "+socket.getRemoteSocketAddress());  
              // check data exist in table in HL7001;

                List<HL7001> orderList = new ArrayList<HL7001>();
                PacsDao pacsDao = new PacsDao();
                orderList = pacsDao.getAllOrder();              

                //PrintWriter pw = new PrintWriter(theOutput, false);   
                int msgCount = 0;

                if(orderList.size() > 0){   

                    for(int i = 0;i<orderList.size();i++){

                    logger.info("orderList.size(): " + orderList.size());

                    HL7001 model = orderList.get(i);

                    logger.info("message from HL7001 Table :: " +"Msg Order No: "+
                            model.getOrderNo() +"\n"+" msg no:"+ model.getHl7MsgNo()+"\n"+" message: "+model.getHl7Msg());

                    //for(HL7001 model:orderList){                  
                    String tableMessage = model.getHl7Msg();

                    // read ADT Message from Table HL7001;

                    //readADTMsg(tableMessage);

                    // logging TABLE MESSAGE  data into file

                        StringBuffer transmitMsg =  new StringBuffer();
                        transmitMsg
                        .append(START_OF_BLOCK)
                        .append(tableMessage)
                        .append(END_OF_BLOCK)
                        .append(CARRAIGE_RETURN);

                        // write data to port

                         socket = new Socket(Configuration.getConfig().getServerParams().getUrl(), Configuration.getConfig().getServerParams().getPort());

                         if(socket.isConnected()){ 
                             logger.info(socket.getRemoteSocketAddress()+" port is connected ");
                             HL7007 hl7007 = new HL7007();
                             hl7007.setMsgNo(model.getHl7MsgNo());
                             hl7007.setPortAdress(socket.getRemoteSocketAddress().toString() );
                             opeonSocketLog(hl7007);
                         }else{
                             logger.error("Server socket is not conneted");
                         }
                        out = socket.getOutputStream();
                        //InputStream in =  socket.getInputStream();
                        out.write(transmitMsg.toString().getBytes());

                        // save file into directory             

                        // logging TABLE MESSAGE  data into file
                        if (params.isOutputOnFile()) {
                            //comment this line for performance issue

                            FileLogger.log2(transmitMsg.toString());
                        }

                      /** Write across the socket connection and flush the buffer */

                        out.flush();                                            
                        out.close();                        
                        // insert into record from Table HL7001 to  Table HL7003;

                        insertOrderModel(model);                        

                        msgCount++; 

                        logger.info("msgCount "+ msgCount);                     

                        if (Configuration.getConfig().getServerParams().getWaitingOption().equals("1")) {
                            try{
                                 Thread.sleep(1000);                            

                             }catch (InterruptedException e) {
                                logger.error("Wait for writing message into "+ e.getMessage());
                            }
                        }           
                }               

                    }           

          }catch (Exception e) {
                logger.error(e.getMessage());
                e.printStackTrace();
            }finally{
                try {
                    logger.info("finally block is executed in write method ");
                    socket.close();
                } catch (Exception e) {
                    logger.error(e.getMessage());
                    e.printStackTrace();
                }
            }
     } 
```

在上面的写类中，我首先从表中读取记录，然后添加到列表中。如果记录存在，我打开一个套接字连接，然后将数据写入端口并删除以下记录。但有时我会收到更多重复记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:55:43.967

这一切都发生了两次。您正在为自己打开一个套接字（为什么？），因此创建了另一对读取器和写入器，所以......您不应该通过 TCP/IP 与自己通信：此时您的设计存在严重错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T10:07:14.350

您不需要每个条目的套接字。

使用您接受的一个套接字，将所有内容发送到该套接字，并仅在完成后关闭它。

# html - inline-block div 以 width=50% 和一些文本换行

> ID：11707049
> 
> 赞同：0
> 
> 时间：2012-07-29T06:00:01.043
> 
> 标签：html, css

请看这个**[小提琴](http://jsfiddle.net/PPatf/5/)**。

对于以下两个课程，我有不同的行为。

```
.class2 {
    width: 49.5%;
    display: inline-block;
}

.class3 {
    width: 50%;    /* Wraps to next line */
    display: inline-block;
} 
```

*   我想要做的是将宽度平均划分为 b/w 两个 div，然后开始用自己的内容填充每个 div *。
*   但是宽度为 50%，如果我在 div 中放一些文本，第二个 div 会换行到下一行
*   宽度为 49.x%，它不会换行。

为什么要包装？我正在一个特定的 div 中工作。

我怎样才能让它不换行并保持宽度 = 50%。

除了 50%，我不知道如何得出正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:06:03.140

尝试像这样浮动您的 div：

```
.class1 {
    background-color: red;
    width: 100%;    
}
.class2 {
    width: 50%;
    display: inline-block;
    background-color: blue;
    color: white;
    float:left;    
}
.class3 {
    width: 50%;
    display: inline-block;
    background-color: blue;
    color: white;
    float:right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:54:24.717

你不需要诉诸于`float`. 这是一个相对难看的解决方法，它引入了自己的问题（必须清除浮动和/或`overflow:hidden`在包含元素上设置）。

你没有提供你的 HTML 标记，但我猜你在元素之间有空格，就像 Alien 先生的回答一样。

请参阅[两个内联块，宽度为 50% 的元素换行到第二行](https://stackoverflow.com/questions/6871996/css-two-inline-block-width-50-elements-dont-stack)以获得更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:04:43.980

使用在左边`float: left;`浮动你的第一个，你也可以在右边浮动你的第二个，而不是使用来清除你的浮动元素：`<div>``<div>``float: right;``<div style="clear: both;"></div>`

**CSS**：

```
.class1 {
    background-color: red;
    width: 100%;
}
.class2 {
    width: 50%;
    background-color: blue;
    color: white;
    float: left;
}

.class3 {
background-color: green;
    width: 50%;
    float: right;
} 
```

**HTML**：

```
<div class="class1">
  <div class="class2">
      This is demo
  </div>
      <div class="class3">
          This is demo          
    </div>
  <div style="clear: both;">
</div> 
```

[**我的小提琴**](http://jsfiddle.net/PPatf/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:31:22.343

它们堆叠而不是彼此相邻的原因是 display: inline-block 识别空白。如果您在第一个 div 之后有返回，那么它将拾取它并使其堆叠。解决方法将类似于...

```
<div class="col1">

Column one content.

</div><div class="col2">

Column two content.

</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T18:06:22.497

不要使用花车，它们会引起各种头痛。只需将其添加到您的 CSS 中：

```
body,html{ white-space:nowrap; }
a,pre,p,span,strong,h1,h2,h3,h4,h5,h6{ white-space:normal; } 
```

...然后确保您网站上的所有文本都包含在“p”或“span”中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-23T18:29:45.813

我经常使用**display:inline-block;** .

但是，**display:inline-block**有一些问题。

我推荐[Grids - Pure](http://purecss.io/grids/)模式并写了一个像 Pure 这样的示例代码。

```
.class1 {
    letter-spacing: -0.31em;
    *letter-spacing: normal;
    *word-spacing: -0.43em;
    text-rendering: optimizespeed;
    font-family: Georgia, Times, "Times New Roman", serif;
}

.class2, .class3 {
    display: inline-block;
    zoom: 1;
    letter-spacing: normal;
    word-spacing: normal;
    vertical-align: top;
    text-rendering: auto;
    font-family: "Hiragino Kaku Gothic ProN",Meiryo,Verdana,sans-serif;
    width: 50%;
} 
```

[我的小提琴](http://jsfiddle.net/2NkQV/3/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-29T06:07:45.633

放一个：

```
margin:-2px; 
```

进入你的班级3。这不会破坏您的 div 而是解决您的问题。不知道为什么

# google-app-engine - 有没有办法只将静态内容部署/更新到 GAE？

> ID：11707050
> 
> 赞同：5
> 
> 时间：2012-07-29T06:00:12.407
> 
> 标签：google-app-engine

在很多情况下，我们需要只更新生产 GAE 应用程序的静态内容。

例子：

1.  CSS 更改和其他相关资源，例如图像
2.  新的 HTML 页面，应用程序的 API 保持不变（RESTful Web 服务）
3.  客户端流程更改（仅限 JS）

上述每个更改都需要完整部署。

我阅读了文档（Java）并搜索了这个论坛（和其他论坛），我很确定不存在这样的方法。

可以在 GAE 中对应用程序进行部分更新，例如更新索引、更新 cron 作业、后端管理（部署、启动、停止等），但不能更新静态内容。

1.  有谁知道仅部署/更新 GAE 应用程序的静态部分的方法？
2.  这是使用 GAE 的人需要/使用的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T23:31:09.630

做不到。提交功能请求！

# c# - SyntaxRewriter.Visit* 不会访问 * 类型的所有节点

> ID：11707051
> 
> 赞同：4
> 
> 时间：2012-07-29T06:00:26.980
> 
> 标签：c#, roslyn

**已解决：** mike z 是对的，我没有正确调用基础来继续递归。谢谢，迈克

我正在使用 Roslyn 进行一些代码重写，通过实现一个`SyntaxRewriter`.

我遇到的奇怪的事情是，当覆盖时`SyntaxNode.VisitInvocationExpression(InvocationExpressionSyntax)`，它不会访问`InvocationExpressionSyntax`树中的所有节点。（我认为所有`SyntaxNode`类型都相同）

例如，给定这个调用表达式：

```
 controller.Add(5, 6).ToString(); 
```

它只访问整个表达式的节点，即使那里有 2 次调用。

虽然我当然可以编写递归函数或类似函数来解析子/嵌套 InvocationExpression 节点，但这似乎不一致且不方便。
为什么不访问整个树中所有 * 类型的节点？

这是我的覆盖：

```
 public override SyntaxNode VisitInvocationExpression(InvocationExpressionSyntax node)
    {
        IdentifierNameSyntax ident = node.ChildNodes().OfType<IdentifierNameSyntax>().FirstOrDefault();
        if (ident == null)
            return node;//In my test case, the example above returns here when it's node is encountered.  Shouldn't this then allow the walker to continue deeper into the node,
                        // finding the deeper nested Invocations?

        string name = ident.PlainName;
        if (!TempStore.ConstructedInvocations.ContainsKey(name))//not replacing this then
            return node;

        InvocationExpressionSyntax newInvocation = ((InvocationExpressionSyntax)TempStore.ConstructedInvocations[name]).WithArgumentList(node.ArgumentList);
        return newInvocation;
    } 
```

在调试中单步执行该代码确认`InvocationExpressionNode`for`controller.Add(5, 6).ToString();`确实有子`InvocationExpressionNodes`嵌套在里面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T19:27:49.167

我正在使用 Roslyn API 并且遇到了类似的问题。在 Visit* 方法的基类实现中递归调用 Visit 方法。一旦您覆盖其中之一，您将负责访问所有子节点。您可以通过在要重写的节点上调用 base.Visit* 方法或在每个子节点上调用 Visit 来执行此操作。

这是一些示例代码，我通过交换它们来重写逻辑运算符 && 和 ||。我用不同的运算符构造了一个新节点，然后调用 base.VisitBinaryExpression 以确保访问所有子节点。否则，我们只会重写表达式的一部分，例如`var1 && (var2 || var3)`. 另一种可能的实现是在 node.Left 和 node.Right 上调用 Visit，然后根据这些结果构造新节点。

```
public class LogicalOperatorRewriter : SyntaxRewriter
{
    public override SyntaxNode VisitBinaryExpression(BinaryExpressionSyntax node)
    {
        SyntaxKind newExpressionKind = GetNewKind(node.Kind);
        BinaryExpressionSyntax newNode = (BinaryExpressionSyntax)Syntax.BinaryExpression(newExpressionKind, left: node.Left, right: node.Right).Format().GetFormattedRoot();
        return base.VisitBinaryExpression(newNode);
    }

    private SyntaxKind GetNewKind(SyntaxKind kind)
    {
        switch (kind)
        {
            case SyntaxKind.LogicalAndExpression:
                return SyntaxKind.LogicalOrExpression;
            case SyntaxKind.LogicalOrExpression:
                return SyntaxKind.LogicalAndExpression;
            default: return kind;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T14:33:17.523

我不知道 Roslyn API，但使用表达式树 ( `ExpressionVisitor`)，您需要调用基本方法才能继续访问树。

这是因为您的方法可能希望*停止*访问树。如果你想停止，你可以不调用基本方法。

这个[示例代码](http://social.msdn.microsoft.com/Forums/da-DK/roslyn/thread/10f140b1-81ae-4520-b08c-8741f450e0aa)似乎支持这个理论。

# wordpress - 只显示几张面孔的 Facebook 赞框

> ID：11707052
> 
> 赞同：0
> 
> 时间：2012-07-29T06:00:31.550
> 
> 标签：wordpress, facebook-likebox

它在 Safari 上完美运行，但在每个浏览器中它只显示 3 页。我已经更改了页面标题，包括更改了 url，所以可能就是这样。我不知道有什么办法。我粘贴的代码是

我尝试使用它的网站是[http://reviews.realtvchat.com/](http://reviews.realtvchat.com/)

# java - java.library.path 中没有 sqljdbc_auth

> ID：11707056
> 
> 赞同：38
> 
> 时间：2012-07-29T06:01:02.950
> 
> 标签：java, sql-server, sql-server-2008, jakarta-ee

我有一个连接到 SQL Server 2008 实例的 Java EE Web 应用程序。除了其中一个之外，我在连接和检索所有表时都没有任何问题。Tomcat日志中的错误是：

> 警告：无法加载 sqljdbc_auth.dll 原因：- java.library.path 中没有 sqljdbc_auth

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2016-04-13T11:22:43.777

1)在[此处下载](https://www.microsoft.com/en-us/download/details.aspx?id=11774)**JDBC 驱动程序** 。

2) 解压文件并转到**sqljdbc_version\fra\auth\x86**或**\x64 3) 将** **sqljdbc_auth.dll**
复制到**C:\Program Files\Java\jre_Version\bin** 4) 最后重启 eclipse

 ***** * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-14T10:55:05.950

如果您想从 Eclipse 执行此操作，请执行以下步骤：

1) 在你的 C: 驱动器中创建一个文件夹'sqlauth'，并将 dll 文件***sqljdbc_auth.dll***复制到该文件夹​​中

1）转到**运行>运行配置**

2)为您的班级选择“**参数”选项卡**

**3）在VM参数**中添加以下代码：

```
-Djava.library.path="C:\\sqlauth" 
```

4）点击“应用”并点击“运行”

随意尝试其他[方法](http://javarevisited.blogspot.com/2013/04/what-is-javalibrarypath-how-to-set-in-Eclipse.html)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-27T00:00:53.197

为了便于修复，请按照下列步骤操作：

1.  转到：[https ://docs.microsoft.com/en-us/sql/connect/jdbc/building-the-connection-url#Connectingintegrated](https://docs.microsoft.com/en-us/sql/connect/jdbc/building-the-connection-url#Connectingintegrated)
2.  下载 JDBC 文件并解压到您的首选位置
3.  打开与您的操作系统 x64 或 x86 匹配的 auth 文件夹
4.  复制 sqljdbc_auth.dll 文件
5.  粘贴到：C:\Program Files\Java\jdk_version\bin
6.  重新启动 eclipse 或 netbeans

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-29T06:27:29.710

错误很明显，不是吗？

您尚未添加存在 sqljdbc_auth.dll 的路径。在系统中找出 DLL 所在的位置并将其添加到您的类路径中。

如果这也不起作用，请将存在 DLL 的文件夹（我假设 \Microsoft SQL Server JDBC Driver 3.0\sqljdbc_3.0\enu\auth\x86）添加到您的 PATH 变量中。

同样，如果您要通过 ant 或 cmd，则必须使用 -Djava.library.path=[path to MS_SQL_AUTH_DLL] 明确提及路径

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-07T13:25:18.470

我刚刚遇到了同样的问题，但在我自己的应用程序中。我不喜欢复制 dll 的解决方案，因为它不是很方便，所以我做了一些研究并提出了以下编程解决方案。

基本上，在与 SQL 服务器进行任何连接之前，您必须添加`sqljdbc_auth.dll`到路径.. 这很容易说：

`PathHelper.appendToPath("C:\\sqljdbc_6.2\\enu\\auth\\x64");`

一旦你知道怎么做：

```
import java.lang.reflect.Field;

public class PathHelper {
    public static void appendToPath(String dir){

        String path = System.getProperty("java.library.path");
        path = dir + ";" + path;
        System.setProperty("java.library.path", path);

        try {

            final Field sysPathsField = ClassLoader.class.getDeclaredField("sys_paths");
            sysPathsField.setAccessible(true);
            sysPathsField.set(null, null);

        }
        catch (Exception ex){
            throw new RuntimeException(ex);
        }

    }

} 
```

现在集成身份验证就像一个魅力:)。

感谢[https://stackoverflow.com/a/21730111/1734640](https://stackoverflow.com/a/21730111/1734640)让我弄清楚这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-15T10:21:51.030

为了解决我做了以下事情：

1.  复制`sqljdbc_auth.dll`到目录：`C:\Windows\System32`
2.  重新启动我的应用程序

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-13T14:22:39.857

我通过以下方式解决了这个问题：

1.  将 com.microsoft.sqlserver 从 6.1.0.jre8 升级到 10.1.0.jre8-preview：

    ```
    <dependency>
         <groupId>com.microsoft.sqlserver</groupId>
         <artifactId>mssql-jdbc</artifactId>
         <version>10.1.0.jre8-preview</version>
    </dependency> 
    ```

2.  添加缺少的依赖项：

    ```
     <dependency>
         <groupId>net.sourceforge.jtds</groupId>
         <artifactId>jtds</artifactId>
         <version>1.3.1</version>
     </dependency> 
    ```

3.  使用以下 jdbc 连接：

> jdbc:sqlserver://;authenticationScheme=NTLM;integratedSecurity=true;domain=;databasename=;encrypt=true;trustServerCertificate=true;user=;password=****

# javascript - 阻止哈希锚滚动

> ID：11707057
> 
> 赞同：0
> 
> 时间：2012-07-29T06:01:06.790
> 
> 标签：javascript, jquery, html

```
 <li> <a href="#calculate">Calculate</a></li>
 <li> <a href="#calculate1">Calculate1</a></li>
 <li> <a href="#calculate2">Calculate2</a></li> 
```

这是我拥有的代码，当我单击链接时，页面向下滚动到#calculate 所在的位置，这是可以理解的。但是我需要它不滚动我可以删除href的值，无论如何在不删除值#calculate并且不更改id名称的情况下阻止它滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:06:33.970

```
$('li > a[href*=calculate]').on('click', function(e) {
  e.preventDefault(); // this will prevent the page scroll

  // continue other code

}); 
```

阅读**[.preventDefault()](http://api.jquery.com/event.preventDefault)**

在这里，`'li > a[href*=calculate]'`将选择那些是直接（第一级）子级并在其属性`li`中包含`calculate`单词的锚标记。`href`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T06:07:24.633

**[现场演示](http://jsfiddle.net/ebvbn/)**

在现代 jQuery 版本中：

```
$('a').on('click', function(e) {
  e.preventDefault();
}); 
```

其他 jQuery 版本：

```
$('a').click(function() {
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T06:04:42.200

您可以将函数绑定到 click 事件并让它返回 false。

```
$("a").click(function() { return false; }); 
```

[演示](http://jsbin.com/atasix/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T06:06:22.013

只是阻止链接的默认操作

```
$('li > a[href^=#calculate]').on('click', function(e){
    e.preventDefault();
    return false;
}); 
```

`'li > a[href^=#calculate]'`选择一个`a`元素的 href 属性以`#calculate`该元素的子`li`元素开头

[**更多信息**](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)

# php - PHP验证十进制数字并转换为美国货币格式

> ID：11707058
> 
> 赞同：2
> 
> 时间：2012-07-29T06:01:44.083
> 
> 标签：php

我目前正在使用 PHP 验证十进制值。该函数在从字母中确定小数/整数方面效果很好，但我的目标是将小数/整数值格式化为适当的货币值，例如`$0.00`.

如何将输入值格式化为带有美元符号的货币格式，例如`$0.00`？

[例子](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

```
<?
if (isset($_POST['price'])){
    $price = $_POST['price'];
    $priceString = empty($price['price'])?null:trim($price['price']);
            if(!empty($priceString)) { 
         if  (preg_match('/^[+\-]?\d+(\.\d+)?$/', $price)){
             echo ('<div id="price_input"><span id="resultval">'.$price.'</span></div>');
                }
             else {
             echo ('<div id="price_input"><span id="resultval">Please input a valid decimal number.</span></div>');
                  }
    }
    else {
        echo '';
         }              
}
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T06:05:45.303

使用[money_format](http://php.net/manual/en/function.money-format.php)函数：

```
money_format('$%i', 5.2); 
```

产出：5.2 美元

编辑：

```
if  (preg_match('/^[+\-]?\d+(\.\d+)?$/', $price)){
    echo ('<div id="price_input"><span id="resultval">'
          .money_format('$%i', $price);
          .'</span></div>');
} 
```

# ruby - 使用 rvm 在没有 pthread 的情况下安装 ruby

> ID：11707061
> 
> 赞同：0
> 
> 时间：2012-07-29T06:02:03.903
> 
> 标签：ruby, ubuntu, pthreads, rvm

我想使用 rvm 但没有 tk/tcl/pthreads 在我的 ubuntu 64 位机器上安装 ruby​​：

```
$ rvm install ruby-1.9.3-p194 --default --reconfigure   -C --with-out-ext=tcl --with-out-ext=tk  --disable-pthread
...
$ rvm use ruby-1.9.3-p194
$ ruby -r rbconfig -e 'puts RbConfig::CONFIG["configure_args"]'
 '--prefix=/home/yuvilio/.rvm/rubies/ruby-1.9.3-p194' '--enable-shared' '--disable-install-doc' '--without-ext=tcl' '--without-ext=tk' '--disable-pthread' '--with-libyaml' '--with-opt-dir=/home/yuvilio/.rvm/usr' 
```

但是当我检查 THREAD_MODEL 时，它*仍然*在那里列出 pthread：

```
$ ruby -r rbconfig -e 'puts RbConfig::CONFIG["THREAD_MODEL"]'
pthread
$ 
```

这是否意味着仍在使用 pthread？如果是这样，为什么它仍然存在？

这是不可避免的，因为我的编译器使用 Posix 线程吗？

```
$ gcc -v
Using built-in specs.
COLLECT_GCC=/usr/bin/gcc-4.6.real
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ub\
untu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languag\
es=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shar\
ed --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-\
included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++\
/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --ena\
ble-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --en\
able-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=g\
eneric --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-g\
nu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)
$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T22:22:13.927

运行`./configure --help`ruby​​ 时，您可以看到：

```
--enable-pthread        obsolete, and ignored 
```

我猜这也意味着这`--disable-pthread`行不通，

我努力了：

```
rvm reinstall 1.9.3-posix --enable-threads=posix 
```

但它也没有工作，看起来这个选项被删除了。

# ruby-on-rails - 访问 rails assets 的相对路径

> ID：11707062
> 
> 赞同：6
> 
> 时间：2012-07-29T06:02:06.010
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, relative-path, sprockets

我被困住了！xD 我一直在从事 Rails 项目，但无法使用相对路径访问我的资产。我的一个朋友在处理控制器和模型时正在处理 html/css 方面的工作。我的朋友最近给了我一批文件，其结构如下：

```
app/assets/images/*.jpg
app/assets/stylesheets/*.css
app/assets/javascripts/*.js
app/assets/fonts/*.* (+some more css files in here) 
```

在我的 app/views/layouts 目录中，我有一个名为 final.html.erb 的布局，用于我的整个 webapp。我还有 1 个页面（html 正文内容），我正在尝试使用名为 final_page.html.erb 的 app/views/pages 中的此布局进行渲染……页面加载所需的路由已到位；但是，它只加载 final_page.html.erb 的上下文（没有图像、样式或字体）。当我进入控制台并输入“rails server”并访问 localhost:3000 时，页面会显示出来......裸体大声笑。控制台输出以下内容：

* * *

```
Started GET "/" for 127.0.0.1 at 2012-07-28 21:15:02 -0700
Connecting to database specified by database.yml
Processing by PagesController#final_page as HTML
  Rendered pages/final_page.html.erb within layouts/final (8.4ms)
Completed 200 OK in 82ms (Views: 81.0ms | ActiveRecord: 0.0ms)

Started GET "/assets/stylesheets/style.css" for 127.0.0.1 at 2012-07-28 21:15:04 -0700

ActionController::RoutingError (No route matches [GET] "/assets/stylesheets/style.css"):
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.6) lib/rails/engine.rb:479:in `call'
  railties (3.2.6) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /var/lib/gems/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (2.0ms) 
```

* * *

我认为问题在于我正在尝试使用相对路径访问文件。我的布局文件如下所示：

```
<!doctype html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="viewport" content="width=device-width">
<title>:: Final ::</title>
<link rel="stylesheet" type="text/css" href="../../assets/stylesheets/style.css">
<link href="../../assets/stylesheets/desktop.css" rel="stylesheet" type="text/css" media="only screen and (min-width:769px) and (max-width:1000px)">
<script src="../../assets/javascripts/modernizr.js" type="text/javascript"></script>
</head>
<body>
  <%= yield %>
</body>
</html> 
```

此外，在我的 final_page.html.erb 文件的正文中，我也尝试使用相对路径访问图像......就像这样：

```
<img src="../../assets/images/mainImg.jpg" alt="img"> 
```

我的朋友写了这个 html 的大部分内容，他在使用 rails 方面的经验为 0。我决定像这样更改对资产的请求：

从：

```
<link rel="stylesheet" type="text/css" href="../../assets/stylesheets/style.css"> 
```

至：

```
<%= stylesheet_link_tag "application.css" %> 
```

从：

```
<script src="../../assets/javascripts/modernizr.js" type="text/javascript"></script> 
```

至：

```
<%= javascript_include_tag "application.js" %> 
```

从：

```
<img src="../../assets/images/mainImg.jpg" alt="img"> 
```

至：

```
<%= image_tag "mainImg.jpg"  %> 
```

这有点帮助，因为图像加载，并且很少有样式通过；然而，它与它应该看起来的样子相去甚远。我在想这是因为我的朋友自己在 css 文件中进行了相对调用：

```
body {
    background-image: url(../images/bg.jpg);
    background-repeat: repeat;
} 
```

我试过用 url(<%= asset_path 'bg.jpg' %>) 等替换这些......但它没有效果。我已经尝试了很多东西，并且阅读了很多帖子。我想知道 Rails 是否允许我使用相对路径。我试过了：

```
config.assets.enabled = false 
```

但这无济于事......拜托......我做错了什么？我认为我的朋友不会想停止在他的工作中使用相对路径，因为这是他做事的方式。该站点在 Rails 之外很好地启动，但我需要它与 Rails 一起用于我的 web 应用程序。任何建议将不胜感激。感谢您耐心阅读所有这些内容。

PS 我正在使用 Ruby 1.9.3 和 Rails 3.2.6

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T06:09:00.917

尝试使用`/assets/style.css`不等`/assets/stylesheets/style.css`。

如果有这样的结构：

```
app
  assets
    stylesheets
    javascripts 
```

然后要访问文件 in`app/assets`或 in`app/assets/any_folder`你应该使用 path `/assets/file`。

**更新**

在这里尝试：

```
body {
    background-image: url(bg.jpg);
    background-repeat: repeat;
} 
```

或者：

```
body {
    background-image: url(/assets/bg.jpg);
    background-repeat: repeat;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T06:40:16.227

Rails 3.1 引入了新的资产管道。我建议您阅读以下内容：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

**在你的 app/views/layouts/application.html.erb 文件中，确保你有这个：**

```
<%= stylesheet_link_tag "application", :media => "all" %> 
```

**在你的 app/assets/stylesheets/application.css 文件中，确保你有这一行：**

```
*= require_tree . 
```

*（这将确保您在 app/assets/stylesheets 目录中的任何 css 文件都可用于您的应用程序）*

**在您的 css 文件中，您可以这样做以引用 app/assets/images 目录中的图像：**

```
background-image: url(bg.jpg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T02:26:01.640

如果您想在配置中使用本地资源`initializers`并且您具有以下文件夹结构：

`app assets stylesheets javascripts`

您所要做的就是：（在此示例中，我使用 Spree 基本配置/初始化程序）

`Spree.config do |config| config.admin_interface_logo = '/assets/logo/custom_admin.png' config.logo = '/assets/logo/custom_store.jpg' end`

所以使用`/assets/your_file_or_path`它会起作用：D

# java - Java线程中的定时器

> ID：11707066
> 
> 赞同：23
> 
> 时间：2012-07-29T06:02:41.063
> 
> 标签：java, multithreading, timer

我有一个负责执行某些进程的线程。我想让这些处理每 3 秒完成一次。我已经使用了下面的代码，但是当线程启动时，什么也没有发生。我假设当我为我的计时器定义一个任务时，它会`ScheduledTask`在时间间隔内自动执行，但它根本不做任何事情。我错过了什么？

```
class temperatureUp extends Thread 
{
    @Override
    public void run()
    {
    TimerTask increaseTemperature = new TimerTask(){

        public void run() {
        try {
            //do the processing 
        } catch (InterruptedException ex) {}
        }
    };

    Timer increaserTimer = new Timer("MyTimer");
    increaserTimer.schedule(increaseTemperature, 3000);

    }
}; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-29T09:03:48.480

您的代码段中有一些错误：

*   您扩展了`Thread`课程，这不是很好的做法
*   你有一个`Timer`内一个`Thread`？这没有意义，因为 a`Timer`自己运行`Thread`。

您应该（在必要时/在必要时）[在此处](http://www.go4expert.com/forums/showthread.php?t=4202)`Runnable`实现一个简短的示例，但是我看不到您提供的代码段中需要 a和a 。`Thread``Timer`

请参阅下面的工作示例，`Timer`每次调用它时（每 3 秒）只会将计数器加一：

```
import java.util.Timer;
import java.util.TimerTask;

public class Test {

    static int counter = 0;

    public static void main(String[] args) {

        TimerTask timerTask = new TimerTask() {

            @Override
            public void run() {
                System.out.println("TimerTask executing counter is: " + counter);
                counter++;//increments the counter
            }
        };

        Timer timer = new Timer("MyTimer");//create a new Timer

        timer.scheduleAtFixedRate(timerTask, 30, 3000);//this line starts the timer at the same time its executed
    }
} 
```

**附录：**

我做了一个将 a`Thread`加入到混合中的简短示例。因此，现在`TimerTask`将仅`counter`每 3 秒增加 1，并且每次检查计数器时`Thread`将显示`counter`s 值休眠 1 秒（它将自行终止，并且计时器在 之后`counter==3`）：

```
import java.util.Timer;
import java.util.TimerTask;

public class Test {

    static int counter = 0;
    static Timer timer;

    public static void main(String[] args) {

        //create timer task to increment counter
        TimerTask timerTask = new TimerTask() {

            @Override
            public void run() {
                // System.out.println("TimerTask executing counter is: " + counter);
                counter++;
            }
        };

        //create thread to print counter value
        Thread t = new Thread(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    try {
                        System.out.println("Thread reading counter is: " + counter);
                        if (counter == 3) {
                            System.out.println("Counter has reached 3 now will terminate");
                            timer.cancel();//end the timer
                            break;//end this loop
                        }
                        Thread.sleep(1000);
                    } catch (InterruptedException ex) {
                        ex.printStackTrace();
                    }
                }
            }
        });

        timer = new Timer("MyTimer");//create a new timer
        timer.scheduleAtFixedRate(timerTask, 30, 3000);//start timer in 30ms to increment  counter

        t.start();//start thread to display counter
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-20T12:52:19.303

```
import java.util.Timer;
import java.util.TimerTask;

public class ThreadTimer extends TimerTask{
    static int counter = 0;

    public static void main(String [] args) {
        Timer timer = new Timer("MyTimer");
        timer.scheduleAtFixedRate(new ThreadTimer(), 30, 3000);
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        System.out.println("TimerTask executing counter is: " + counter);
        counter++;
   }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T07:20:15.360

为了每三秒做一次你应该使用 scheduleAtFixedRate （见[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20long,%20long%29)）。

但是，您的代码实际上什么也没做，因为您创建了一个线程，在该线程中您在线程运行停止之前启动了一个计时器（没有更多事情要做）。当定时器（单拍）触发时，没有线程可以中断（之前运行完成）。

```
class temperatureUp extends Thread 
{
    @Override
    public void run()
    {
    TimerTask increaseTemperature = new TimerTask(){

        public void run() {
        try {
            //do the processing 
        } catch (InterruptedException ex) {}
        }
    };

    Timer increaserTimer = new Timer("MyTimer");
    //start a 3 seconds timer 10ms later
    increaserTimer.scheduleAtFixedRate(increaseTemperature, 3000, 10);

    while(true) {
         //give it some time to see timer triggering
         doSomethingMeaningful();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T06:13:15.533

我认为您使用的方法具有签名`schedule(TimerTask task, long delay)`。所以实际上你只是延迟了唯一执行的开始时间。

要安排它每 3 秒运行一次，您需要使用此方法`schedule(TimerTask task, long delay, long period)`，其中**第三个**参数用于给出周期间隔。

您可以在此处参考 Timer 类定义以获得进一步帮助

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-03T08:11:46.563

# `Timer`&`TimerTask`是遗产

[`Timer`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Timer.html)&`TimerTask`类现在是[legacy](https://en.wikipedia.org/wiki/Legacy_system)。要在特定时间运行代码，或重复运行代码，请使用[计划的执行器服务](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html)。

引用`Timer`Javadoc 类：

> Java 5.0 引入了 java.util.concurrent 包，其中的并发实用程序之一是 ScheduledThreadPoolExecutor，它是一个线程池，用于以给定的速率或延迟重复执行任务。它实际上是 Timer/TimerTask 组合的更通用替代品，因为它允许多个服务线程，接受各种时间单位，并且不需要子类化 TimerTask（只需实现 Runnable）。使用一个线程配置 ScheduledThreadPoolExecutor 使其等效于 Timer。

# 执行器框架

在现代 Java 中，我们使用[Executors 框架](https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)而不是直接寻址[`Thread`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html)类。

将您的任务定义为[`Runnable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html)或[`Callable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Callable.html)。您可以使用如下所示的紧凑 lambda 语法。或者，您可以使用常规语法来定义实现`Runnable`（或`Callable`）接口的类。

每隔一段时间让一个`ScheduledExecutorService`对象执行你的`Runnable`对象的代码。

```
ScheduledExecutorService scheduledExecutorService = Executors.newSingleThreadScheduledExecutor() ;

Runnable task = () -> { 
    System.out.println( "Doing my thing at: " + Instant.now() );
};

long initialDelay = 0L ; 
long period = 3L ;
TimeUnit timeUnit = TimeUnit.SECONDS ;
scheduledExecutorService.submit( task , initialDelay, period , timeUnit ) ;

…
scheduledExecutorService.shutdown() ;  // Stops any more tasks from being scheduled.
scheduledExecutorService.awaitTermination() ;  // Waits until all currently running tasks are done/failed/canceled. 
```

请注意，我们没有直接管理`Thread`上面代码中的任何对象。管理线程是执行器服务的工作。

提示：

*   当不再需要时，或者当你的应用程序退出时，总是优雅地关闭你的执行器服务。否则后备线程池可能会像僵尸一样无限期地继续下去 ‍♂️。
*   考虑将任务的工作代码包装在 try-catch 中。任何到达预定执行器服务的未捕获异常或错误都会导致静默停止进一步安排任何运行。

# javascript - 如何检测多点触控手指何时移动到子元素上？

> ID：11707067
> 
> 赞同：0
> 
> 时间：2012-07-29T06:02:44.623
> 
> 标签：javascript, html, touch, mobile-safari, multi-touch

我的实现非常适用于鼠标，我可以使用委托的 jQuery`on("mousemove","*")`处理程序来检测用户何时将鼠标悬停在某物上并触发操作。

我想对多点触控做同样的事情，如果用户将他们的手指拖过一个子元素，我希望委托`touchmove`处理程序来拾取它。然而，当手指在该容器上（及其子元素上方）拖动时，似乎只有容器元素的回调被调用。

有没有什么方法可以在不使用 JS 编写直点测试的情况下实现这一点？

[在这里拉小提琴](http://jsfiddle.net/mKMJ9/4/)。

请注意，当您在 PC 上单击并拖动时，`B DIV`它会正确变为红色。

在 iOS 设备（启用调试控制台）上，您只能让它显示为蓝色（通过在“B”div 内点击）。我希望能够拖过一些东西并“把它捡起来”。

在带有（移动）Chrome 的 Nexus 7 Android 4.1.1 平板电脑上的行为也是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T18:35:16.943

[之前的讨论](https://stackoverflow.com/questions/3918842/how-to-find-out-the-actual-event-target-of-touchmove-javascript-event)似乎为我的问题提供了一个不令人满意但可行的解决方案：

# asp.net - 在代码中使用矩形坐标之前，是否有任何工具可以测试它们？

> ID：11707068
> 
> 赞同：0
> 
> 时间：2012-07-29T06:02:46.557
> 
> 标签：asp.net, coordinates, imagemap

我正在使用 ASP.NET Rectangle 来指定图像中的热点。我正在努力确定坐标。**那么有什么工具可以帮助我绘制坐标吗？**

例如，我不知道这些坐标的位置在哪里 = 0,0,82,126

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:10:53.427

您可以使用图像地图编辑器来查找坐标。看看[这里](http://commons.wikimedia.org/wiki/Commons%3aImage_map_resources#Image_Map_Editors)。

您可以使用在线图像地图编辑器。我发现[在线图像地图编辑器](http://www.maschek.hu/imagemap/imgmap)是一种简单而有用的工具。

# java - 如何为我的 android 应用程序托管 java udp 程序？

> ID：11707071
> 
> 赞同：0
> 
> 时间：2012-07-29T06:03:11.607
> 
> 标签：java, hosting

我正在开发一个 android 应用程序，其中服务器端执行是使用一个简单的 java udp 程序完成的。我想知道如何托管这个应用程序，因为我需要一个静态 ip 服务器来运行 java 程序。我可以运行我的 java 程序吗在服务器中。如果可以，有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:09:58.900

您必须用某种语言（PHP、Java 等）编写一个监听器。至于静态ip地址，也可以看看no-ip之类的动态ip重定向服务；

[http://www.no-ip.com/services/managed_dns/free_dynamic_dns.html](http://www.no-ip.com/services/managed_dns/free_dynamic_dns.html)

您可以使用始终在线的个人计算机，也可以尝试使用允许您打开侦听端口的共享托管计划。Web 服务可能比使用一些自定义 UDP/TCP 连接更容易使用。

# cassandra - 如何有效管理 cassandra 初始令牌？

> ID：11707073
> 
> 赞同：5
> 
> 时间：2012-07-29T06:03:24.357
> 
> 标签：cassandra

我是新的 cassandra 用户。我知道有初始令牌配置以及如何生成它。问题是，如果我有一个包含 x 个节点的现有集群，并且我想添加额外的节点（一个或多个），我应该将所有节点重新配置为新令牌（根据新生成的值）吗？

还是有更有效的方法来管理这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T06:41:15.633

如果您正在寻找处理此类任务的最佳实践，请查看 Cassandra 1.0 文档中专门介绍[令牌策略](http://www.datastax.com/docs/1.0/operations/cluster_management#calculating-tokens-for-the-new-nodes)的这一部分。

您的选项的缩短版本，来自文档：

> *   **通过将集群大小增加一倍来增加容量**—— *[..]*节点可以保留其现有的令牌分配，并且为新节点分配将现有令牌范围一分为二（或三等分）的令牌。
> *   **重新计算所有节点的新令牌并移动节点**- *[..]*您将不得不重新计算整个集群的令牌。现有节点必须使用 nodetool move 分配其新令牌。
> *   **一次添加一个节点并将 initial_token 保留为空**—— *[..]*拆分最重负载节点的令牌范围，并将新节点放入该位置的环中。*[..]*不会产生完美平衡的环，但会缓解热点。关联

如果您正在寻找管理解决方案[Priam（来自 Netflix）](https://github.com/netflix/priam)可能值得一看。它是开源和 Apache 许可的，但需要一些配置，并且可能只值得为更大的集群投入 [时间]。

# java - java.util.LinkedList 可以有循环吗？

> ID：11707088
> 
> 赞同：3
> 
> 时间：2012-07-29T06:07:11.063
> 
> 标签：java, data-structures, collections

假设我使用的是单线程应用程序，java.util.LinkedList 可以有一个循环吗？我在[源码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java)中看到Entry是一个私有的内部类，所以没有办法篡改。只是想知道，在链接中找到一个循环是一个非常受欢迎的面试问题。没有人问如何设计一个列表来避免首先出现循环。或者我在这里误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:16:15.830

您可以通过提供不公开特定列表实现的接口来避免链表中的循环。这就是Java中发生的事情。`java.util.List`是一个接口，`java.util.LinkedList`它只是在主 List 接口之外并没有暴露太多的实现之一。

面试或计算机科学课程最感兴趣的是链表的理论实现，您可以在其中以任何您喜欢的方式链接节点。

所以回答你的问题：不，你不能在`java.util.LinkedList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:13:24.773

你是对的，因为 juLinkedList 没有公开用于创建 lops 的 api，因此不支持它。也许通过一些反思暴力，它可能会发生。

我认为这个问题来自一代 c 程序员，他们拥有一个没有链表的标准库，他们经常自己动手。此外，由于 C 中没有私有修饰符，因此如果您愿意，始终可以在 C 链表中创建循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:41:17.503

可能存在某种误解。有人问面试问题的原因有很多。此类面试问题旨在了解您的能力：

1.  了解链表的概念
2.  能够考虑编程实践中的错误
3.  讨论相同的Java实现

第三点在我看来并不重要，因为如果您需要了解 Java 代码是如何实现的，显然可以访问它。

# php - php中的简单聊天应用程序

> ID：11707089
> 
> 赞同：-1
> 
> 时间：2012-07-29T06:07:13.283
> 
> 标签：php, javascript, ajax

我有一个 textArea 将显示来自所有用户的对话。当用户键入消息并单击发送按钮时，我希望它显示在所有登录用户的 textArea 中，而不使用数据库/文件。我希望它只使用 AJAX 和 PHP 来完成。

```
 function send1()
            {
                req.open("GET", "process.php?q="+document.getElementById("msg").value, true);
                req.send();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:18:42.377

您需要使用套接字来订阅消息通道。Ryan Bates 为 Ruby on Rails 提供了一个很棒的 gem，它负责启动通道服务器和 PhpMyCoder 提出的安全问题。

查看[私人酒吧截屏视频](http://railscasts.com/episodes/316-private-pub)以获取设置指南。

如果您不担心在数据库中存储任何内容，您可以使用 node.js。[这是一些示例 node.js 代码](http://dhotson.tumblr.com/post/271733389/a-simple-chat-server-in-node-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:21:05.377

使用 WebSockets 会更简单，但是如果你使用 AJAX，将发送的消息保存在数据库或文件中，并组织客户端例如每 30 秒读取一次此内容，你也应该在你的 db / 文件中只维护最后 50 条消息，如果添加了新消息，则删除第一条消息。试着了解服务器端和客户端是如何工作的，然后在纸上思考你的应用程序的模型。

# css - 当 URL 较长时，CSS 背景图像加载失败

> ID：11707090
> 
> 赞同：3
> 
> 时间：2012-07-29T06:07:18.463
> 
> 标签：css, url, load, image

我很感激在这方面的任何帮助。我有一个 div，`background: url("../images/description_bkgrnd.jpg") repeat; display: none;` 后来这个 div 用 jQuery 可见。当 url 看起来`http://localhost/product-name-p35/`一切正常时，但是当它看起来像`http://localhost/product-name-p35/RU/`浏览器时无法加载图像。在萤火虫中，我看到它正在尝试加载`http://localhost/product-name-p35/images/description_bkgrnd.jpg`，而不是`http://localhost/images/description_bkgrnd.jpg/` 责备什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:10:26.953

.. 表示您要上一层楼，所以当您在 RU 文件夹时，它将转到 /product-name-p35 文件夹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:13:39.793

```
url("../images/description_bkgrnd.jpg") 
```

这是一个相对路径。当您在目录中`http://localhost/product-name-p35/RU/`时，它正在从`http://localhost/product-name-p35/`（因为`..`）加载图像

解决此问题的一种可能方法是使用绝对路径引用您的图像：

```
url("http://localhost/images/description_bkgrnd.jpg") 
```

另一种可能的方法是使用

```
url("/images/description_bkgrnd.jpg") 
```

`/`开头使浏览器将请求发送到网站的根目录。但请确保图像文件夹位于网站根目录中，或相应地修改 URL。

参考：[http ://www.ibdhost.com/help/path/](http://www.ibdhost.com/help/path/)

# java - Java：如何将一个 JDateChooser 的值设置为另一个 JDateChooser？

> ID：11707092
> 
> 赞同：0
> 
> 时间：2012-07-29T06:07:40.257
> 
> 标签：java, netbeans-7, jdatechooser

我有两个 JDateChoosers，一个带有“开始日期”标签，另一个带有“结束日期”标签。我有两个单选按钮“单日”和“多日”。如果我选​​择“单日”，我想将相同的日期显示为“在“开始日期”中选择的“结束日期”。而且我还想在 CLEAR_BUTTON_CLICK 上清除这些 JDateChooser 文件。我该怎么写？我第一次使用这个控件..

LZ，帮帮我..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:15:31.710

我假设您正在谈论来自 JCalendar 的 JDateChooser。我对么？JDateChooser 在其日期更改时触发 PropertyChangeEvent。因此，要设置另一个 JDateChooser 的日期，您需要在“源”组件中添加一个事件处理程序来处理更改事件。当它被触发时，您使用 getDate() 方法获取组件的日期，并使用 setDate() 方法将其设置为目标组件。由于您使用的是我没有在此处安装的组件套件，因此很难为您实施正确的解决方案。

查看文档：[http ://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html](http://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html)

我认为阅读本文后，您将能够做自己想做的事。

**编辑：**这是一些代码。尝试使用它。我真的不确定它是否会起作用，因为我没有测试它。

```
// sourceDateChooser and targetDateChooser MUST be final, 
// since they will be accessed inside a anonymous inner class

sourceDateChooser.addPropertyChangeListener( new PropertyChangeListener(){
    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        // the docs of JDateChooser says that when the date is modified, a "date" property change is fired
        if ( evt.getPropertyName().equals( "date" ) ) {
            targetDateChooser.setDate( sourceDateChooser.getDate() );
        }
    }
}); 
```

# php - 将值传递给灯箱的安全方法

> ID：11707095
> 
> 赞同：-1
> 
> 时间：2012-07-29T06:08:10.203
> 
> 标签：php, session

在我正在处理的项目中，需要将值传递给灯箱，我知道如何通过 GET 和 $_SESSION 传递变量，但我想知道是否有更安全的方法可以这样做。

$_GET 显示当我们使用 firebug 或任何开发人员工具时传递的值。但 $_SESSION 没有。如果我使用 $_SESSION 那么使用它有什么缺点吗？或者有一种我不知道的更安全的方法。我尝试了这两种方法，并且都可以正常工作，但是任何人都可以让我明白使用 $_SESSION 是否更好。

例如

```
www.example.com/quick_message/quick_msg.php?id=23 
```

我正在努力保护价值 23

如果我使用 $_SESSION 这个剂量出现在链接上

```
www.example.com/quick_message/quick_msg.php 
```

我也可以将它传递给颜色框并使用 $id=$_SESSION['id]; 获取颜色框内的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:17:17.830

您可以使用`POST`安全通过的方法`$_POST`或`$_REQUEST`

# c++ - stdafx.h 和 MySQL

> ID：11707097
> 
> 赞同：1
> 
> 时间：2012-07-29T06:08:34.683
> 
> 标签：c++, sql

好吧，我的问题很简单，我得到了以下内容：

```
#include "stdafx.h"
#include "my_global.h"
#include "mysql.h"
#include "ServerManager.h"
#include "GamePlay.h"

#pragma comment(lib, "libmysql.lib") 
```

我得到了警告（这很烦人）：

```
1>c:\program files\mysql\connector c 6.0.2\include\config-win.h(24): warning C4005: '_WIN32_WINNT' : macro redefinition
1>          c:\program files\windows kits\8.0\include\shared\sdkddkver.h(195) : see previous definition of '_WIN32_WINNT' 
```

所以我检查 stdafx 包括 targetver.h ，其中定义了**_WIN32_WINNT**，而 my_global.h 还包括**_WIN32_WINNT**，我该怎么办？

这正是 my_global.h 文件的冲突部分，它是 MySQL C 库的一部分：

```
/* Copyright 2000-2008 MySQL AB, 2008 Sun Microsystems, Inc.

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; version 2 of the License.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */

/* Defines for Win32 to make it compatible for MySQL */

#define BIG_TABLES

/* 
  Minimal version of Windows we should be able to run on.
  Currently Windows 2000
*/
#define _WIN32_WINNT     0x0500 
```

对于包括问题在内的问题，我有点陌生，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:56:13.577

我建议对 my_global.h 进行以下修改，替换

```
/* 
  Minimal version of Windows we should be able to run on.
  Currently Windows 2000
*/
#define _WIN32_WINNT     0x0500 
```

和

```
/* 
  Minimal version of Windows we should be able to run on.
  Currently Windows 2000
*/
#if defined(_WIN32_WINNT) && _WIN32_WINNT < 0x0500
#error "MySQL requires Windows 2000 or later"
#elif !defined(_WIN32_WINNT)
#define _WIN32_WINNT     0x0500
#endif 
```

也许我错过了一些东西，但我认为 MySQL 真的很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:18:10.247

在更好地理解问题之后，似乎`my_global.h`设置了您的 Windows 环境以与 MySQL 一起使用。既然是这种情况，我将停止使用`targetver.h`. 我假设您正在使用预编译的标头，因为这是唯一`stdafx.h`生成的时间。我建议制作一个没有预编译头文件或删除`targetver.h`. 有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/2976035/purpose-of-stdafx-h)。

# python - Scrapy RetryMiddleWare 向蜘蛛发送信号

> ID：11707104
> 
> 赞同：1
> 
> 时间：2012-07-29T06:09:48.177
> 
> 标签：python, scrapy

我需要在发出超过 1 次的重试请求时向我的蜘蛛发送一条消息。

我正在考虑使用信号并修补scrapy中的内置RetryMiddleWare，以便在满足条件时发送此类信号。

它会起作用吗？

如何在 Scrapy 中触发信号？

我在网上没有找到任何线索。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:32:52.017

`RetryMiddleware`源代码在这里 - 查看它并将其子类化以放置所需的功能：

```
scrapy.contrib.downloadermiddleware.retry.RetryMiddleware 
```

然后禁用原始并启用修改后的：

```
DOWNLOADER_MIDDLEWARES = {
    'scrapy.contrib.downloadermiddleware.retry.RetryMiddleware': None,
    'middlewares.MyRetryMiddleware': 500,
} 
```

在您自定义的中间件中，您可以调用蜘蛛的方法来执行操作，或使用调度程序发出自定义信号（我会选择第一种方法）。

# asp.net - ASP.net MVC4 WebAPI JSON 中等信任

> ID：11707108
> 
> 赞同：3
> 
> 时间：2012-07-29T06:10:09.767
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

所以，过去几天我一直在使用 ASP.net MVC4 和新的 WebAPI。启动新应用程序时，我总是做的第一件事就是将`<trust level="Medium" />`其放入我的 Web.config 中，这样我就可以确定我的应用程序将在大多数主机上运行。

通常，如果我使用微软的股票，一切都没有问题。但是今晚我在关注 Brad Wilson 的[Webstack of Love 演示](http://bradwilson.typepad.com/blog/2012/07/webstack-of-love.html)时遇到了问题。我所有的 AJAX 调用都返回了 Server 500 错误。但是，当我直接在浏览器中点击 WebAPI 时，它会以 XML 格式返回所有内容。

所以我假设使用 WebAPI 控制器对 JSON 进行序列化是导致问题的原因。**我的问题是如何解决这个问题？**

让我感到困扰的是，微软教导共享主机要安全，并将事情锁定到中等信任，然后创建在中等信任中不起作用的新 Web 技术。当它是最终版本并且二进制文件安装在 GAC 中时，也许一切都会好起来的？共享主机可能需要几个月的时间才能升级到最新最好的版本。

似乎最大的问题通常是反射--90%+ 我尝试过的东西不能在中等信任上运行是由于这个原因（例如，我喜欢使用 AutoMapper 而不是手动编码 ViewModel => 实体映射）。有没有办法将反射限制在应用程序内的程序集中，以便它可以成为中等信任功能集的一部分并使这个问题成为过去？

* * *

当我发现我的 Global.asax 中甚至没有触发 Application_Error 事件时，我在 IIS 上设置了失败的请求跟踪。这是抛出的异常。不知道如何获得更多细节。

```
Warning -MODULE_SET_RESPONSE_ERROR_STATUS 
ModuleName ManagedPipelineHandler 
Notification 128 
HttpStatus 500 
HttpReason Internal Server Error 
HttpSubStatus 0 
ErrorCode 0 
ConfigExceptionInfo
Notification EXECUTE_REQUEST_HANDLER
ErrorCode The operation completed successfully. (0x0) 
```

* * *

链接到[显示问题的示例项目](http://dl.dropbox.com/u/13110874/20120730-MvcWebApiTest.zip)。基本“测试”目录中还包含我的提琴手测试的屏幕截图：XML-fiddle.png 和 JSON-fiddle.png。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:14:29.487

Web API 在中等信任下工作得很好。此外，自 RC 版本以来，它不再部署到 GAC。您可以将 Web API dll 复制到服务器上并引用它们（或者只是从 VS 发布您的项目，或者如果您的主机支持它，则只需 git 发布它，如 Azure）。

你提到网络堆栈的爱。嗯，是 SignalR 在中等信任模式下不起作用。见这里 - 根据大卫福尔沃的说法，它不会很快[https://github.com/SignalR/SignalR/issues/364](https://github.com/SignalR/SignalR/issues/364)

最后，如果您收到错误 500，请始终将其添加到 Global.asax

```
 GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always; 
```

接收详细错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:53:23.360

我的问题与具有循环关系的实体的序列化有关（在这种情况下，国家 => 国家，国家 => 国家）。JSON 序列化程序无法处理此问题，导致在请求 JSON 时出现 500 错误。

我经常直接使用实体来模拟事物并获得原型。无论如何，我总是计划使用不同的视图模型，但我想了解发生了什么以及为什么会失败。

Kiran Challa 在我的[ASP.net 论坛问题](http://forums.asp.net/t/1828829.aspx/2/10?WebAPI%20via%20JSON%20in%20Medium%20Trust)中的回答帮助我解决了正在发生的错误：**“RelationshipManager 对象无法序列化。当 RelationshipManager 属于不实现 IEntityWithRelationships 的实体对象时，这种类型的对象无法序列化。”**

然后我在johnnycode.com 上[使用 JSON.Net 和实体框架序列化循环引用](https://stackoverflow.com/questions/11707108/asp-net-mvc4-webapi-json-medium-trust/11707767#comment15559667_11707767)。

# java - 如何通过 Maven 添加 hadoop 依赖项？我已经安装了 hadoop 并出现在我的 IDE 项目库中

> ID：11707115
> 
> 赞同：2
> 
> 时间：2012-07-29T06:12:54.210
> 
> 标签：java, maven, hadoop, intellij-idea

*   我的系统上安装了 hadoop（我使用的是 Mac 10.7）
*   我使用 Intellij IDEA 作为 IDE，我的 hadoop 项目已将 hadoop*.jar 列为依赖项
*   当我这样做时`mvn install`，它会失败并出现以下错误

> ```
> (master) $ mvn clean install
> [INFO] Scanning for projects...
> [ERROR] The build could not read 1 project -> [Help 1]
> [ERROR]   
> [ERROR]   The project groupId:hadoop:master-SNAPSHOT (/Users/me/code/p/java/hadoop-programs/hadoop-programs/pom.xml) 
> ```
> 
> 有 1 个错误 [ERROR] 'dependencies.dependency.systemPath' for org.apache.hadoop:hadoop-core:jar 必须省略。只能为具有系统范围的依赖项指定此字段。@ 第 18 行，第 25 列 [错误] [错误] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。[ERROR] [ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException](http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException)

我改变了我`pom.xml`的身份

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>groupId</groupId>
    <artifactId>hadoop</artifactId>
    <version>master-SNAPSHOT</version>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>1.0.3</version>
            <type>jar</type>
            <systemPath>/usr/local/Cellar/hadoop/1.0.3/libexec/hadoop-core-1.0.3.jar</systemPath>
        </dependency>
    </dependencies>
</project> 
```

但仍然是同样的错误，如何在 Maven 中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T06:22:40.417

用这个 ：

```
<dependency>
    <groupId>org.apache.hadoop</groupId>
    <artifactId>hadoop-core</artifactId>
    <version>0.20.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T08:55:38.893

hadoop-core 中的很多东西在新版本中已经转移到 hadoop-client，使用 -

```
 <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-hdfs</artifactId>
        <version>2.4.1</version>
    </dependency> 
```

# javascript - 计算两个碰撞物体的重叠？

> ID：11707121
> 
> 赞同：1
> 
> 时间：2012-07-29T06:15:04.333
> 
> 标签：javascript, html, canvas

**更新：**我发现[这篇](http://www.playmycode.com/blog/2011/08/javascript-per-pixel-html5-canvas-image-collision-detection/)解释画布每像素碰撞检测的非常有用的文章。

我正在为使用 HTML5 画布的 javascript 游戏开发碰撞系统。每个对象都有一个图像作为精灵，当任何一个对象的不透明像素与另一个对象重叠时，就会触发碰撞代码。但在其他任何事情之前，需要移动对象，以便它们只是相互接触并且不再触发碰撞。我需要帮助计算任何两个对象在 x 和 y 方面的重叠，以便相应地移动一个。以下是我们所知道的：

*   碰撞点相对于每个物体的坐标
*   对象的位置（以及它们之间的距离）
*   对象的宽度和高度
*   物体在 x 和 y 方向上的速度（向量）

另外注意：这些物体的图像是不均匀的形状，没有完美的圆形，但可以计算从中心到碰撞点的半径。

**编辑：**我没有看到很多回应，所以我会更具体。在下图中，两个物体正在碰撞。重叠区域为红色。你将如何找到绿线的长度？ ![在此处输入图像描述](../Images/eabafd7eb4499f18f78fc676baed59ac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:23:52.507

老实说，我对 HTML 5 以及如何用纯 HTML 5 制作游戏一无所知。但你还需要知道速度（IE，它们的方向。这样你可以从它们来的地方向后发送它们）

如果它使用标准编程语言，一种方法是使用 while 循环（将精灵向后移动直到发生冲突 == false）。另一种方法是更复杂地计算交点的距离并减去单个 x 和 y 值，这样它们就不会发生碰撞。

编辑：然后最简单的方法就像我说的那样，将移动的对象放在一个while循环中，在每个轴上向后移动1个像素，直到它的碰撞测试为假。例子：

```
 int x1 = 500; //x location on screen
    int y2 = 500; //y location

    public boolean fixOffSetX(Sprite s) {
         int x2 = s.getX();
         int y2 = s.getY();

         //not writing the whole thing
         //enter a while loop until its not colliding anymore

         while(collision is still true) {
            x--;  or x++; 

            //depending on direction 
            //(which is why you need to know velocity/direction of your sprites)
            //do the same for the Y axis. 
        }
    }

    //This method will return if the 2 sprites collided, you do this one
    public boolean collisionTest(Sprite s1, Sprite s2) {} 
```

您应该考虑进行非常基本的碰撞，因为它是编程中非常复杂的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T13:38:52.033

如果这仍然是一个问题，我在一本名为 Foundation Game Design with HTML5 en Javascript 的电子书中找到了有关该主题的信息。这里：[链接到相关页面](http://books.google.nl/books?id=QiHJr-TWmfMC&pg=PA476&lpg=PA476&dq=html5%20javascript%20overlapping%20figures&source=bl&ots=wlzAX1vMqP&sig=Th3X0WTWWnncPXk_ykE2TR9Rjhk&hl=nl&sa=X&ei=VHjyUeW1Eobbsgb1nICoAQ&ved=0CIMBEOgBMAg)。希望这对将来的任何人都有帮助。

# c# - 将类创建为扩展是一个不错的选择吗？

> ID：11707122
> 
> 赞同：1
> 
> 时间：2012-07-29T06:15:05.710
> 
> 标签：c#, random, abstract-class, wrapper

这是我为随机类使用包装器扩展的代码。

```
public static class RandomHelper
{
    private static int currentSeed;
    private static Random rd = new Random();

    public static double Next()
    {
        return rd.NextDouble();
    }

    public static double Next(double min, double max)
    {
        return (rd.NextDouble() * (max - min)) + min;
    }

    public static double NextOnStep(double min, double max, double step)
    {
        int range = (int)Math.Floor((max - min) / step);
        int stepCount = rd.Next(0, range);
        return min + (step * stepCount);
    }

    public static double NextOnDecimalCount(double min, double max, int decimals)
    {
        double step = Math.Pow(10, decimals);
        return Math.Truncate(((rd.NextDouble() * (max - min)) + min) * step) / step;
    } 
```

想象一下这种情况，我有一个包含三个数字范围的类

```
public class ArithmeticProblemGenerator()
{
    Range Number1Range {get;set;}
    Range Number2Range {get;set;}
    ...
    Range Number5Range {get;set;}
}

public class Range
{
    public Range()
    {
    }

    public Range(double min, double max)
    {
        this.Min = min;
        this.Max = max;
    }

    public double Min { get; set; }
    public double Max { get; set; }
} 
```

当我想产生问题时，我在我的 RandomHelper 中添加另一个方法作为扩展。

```
 #region RandomHelper extensions

    public static double Next(Range range)
    {
        return Next(range.Min, range.Max);
    }

    public static double NextOnStep(Range range, double step)
    {
        return NextOnStep(range.Min, range.Max, step);
    }

    public static double NextOnDecimalCount(Range range, int decimals)
    {
        return NextOnDecimalCount(range.Min, range.Max, decimals);
    }

    #endregion 
```

但后来我添加了我的 ArithmeticProblemGenerator 的一个新功能，我想要具有不同小数位的数字，或者有时数字跟随一个步骤。

所以，我想，创建另外两个类来添加以下功能会很好。

```
public class RangeOnStep : Range
{
    public RangeOnStep()
    {
    }

    public RangeOnStep(double min, double max, double step)
        : base(min, max)
    {
        this.Step = step;
    }

    public double Step { get; set; }
}

public class RangeOnDecimalPlace : Range
{
    public RangeOnDecimalPlace()
    {
    }

    public RangeOnDecimalPlace(double min, double max, double decimalPlaces)
        : base(min, max)
    {
        this.DecimalPlaces = decimalPlaces;
    }

    public double DecimalPlaces { get; set; }
} 
```

并使用这些新类添加另一个方法扩展。你认为我的工作做得很好还是设计一团糟？

我想听听建议或意见。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:59:51.217

方法扩展在这里没有用，为什么不使用基类范围并定义覆盖的方法，例如：

公共静态类 RandomHelper { 私有静态 int currentSeed; 私有静态随机 rd = new Random();

```
public static double Next() 
{ 
    return rd.NextDouble(); 
} 

public static double Next(double min, double max) 
{ 
    return (rd.NextDouble() * (max - min)) + min; 
} 

public static double Next(RangeOnStep r) 
{ 
    int range = (int)Math.Floor((r.max - r.min) / r.step); 
    int stepCount = rd.Next(0, range); 
    return r.min + (step * stepCount); 
} 

public static double Next(RangeOnDecimalPlace r)) 
{ 
    double step = Math.Pow(10, r.decimals); 
    return Math.Truncate(((rd.NextDouble() * (r.max - r.min)) + r.min) * step) / step; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:25:34.143

我在使用静态辅助类（无论是否扩展方法）时发现的一个问题是，当涉及到依赖于这些静态的单元测试代码时，它们很难模拟。这也适用于您的案例，因为您无疑希望测试随机数生成器返回特定范围内的值的案例。

我通常尝试用带接口的实例类替换静态助手，然后使用 IoC 将“助手”的单例注入到我的依赖类中（即仅耦合到接口上）——这样可以模拟助手并您的课程经过全面测试。

# java - 使用 JavaFX 的场景或自定义控件中的场景

> ID：11707123
> 
> 赞同：1
> 
> 时间：2012-07-29T06:15:07.660
> 
> 标签：java, javafx, javafx-2

在过去 3 年使用 Swing 用于 School 等之后，我决定尝试 JavaFX 并尝试使用它。使用新的 Scene Builder 和 NetBeans 7.2，到目前为止它是一个爆炸。

我想做的下一步是将我的一个小项目转换为 JavaFX。然而，问题之一是该项目使用 MVC 架构。基本上我有 a `JFrame`，`Toolbar`a `JMenuBar`，加上一个 empty `JPanel`。

`JPanel`用于显示使用 NetBeans 的 GUI Builder 构建的视图`JPanel`。这使我可以导航到不同的视图，每个视图都是一个独立的组件。

我的问题如下：有什么方法可以显示 a `Scene`inside a`Scene`吗？或在用户控件中实现与`JPanel`内部`JPanel`或用户控件类似的结果（对于.Net 人）

基本上，我想在图片的灰色区域显示另一个场景。

![我要使用的当前 UI](../Images/d8eee8ac974ce817a01798674fb1a803.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:51:02.333

我进来的时候也有同样的反应：你想要一个 Node（乍一看感觉不对）。Node 基本上是可以包含自身的根组件（很像 JPanel），尽管如果您正在寻找“根组件”，您可以更改舞台上的场景，但它会扩展 Node 以获得 MVC 基础知识。

[http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)

我相信你可以在你的舞台上获得幻想并更换场景（这是完全可行的），但从我的 Swing 背景来看，Node 表现得更自然。Caviat：我发现我写了更多的框架和抽象来使它对我有用（用 Groups 包装的类等......）但它确实可以解决问题。

我希望找到更好的方法，对于我最初使用场景的基于“模块”的项目，但发现它完全限制了它。节点允许更多动态内容。

祝你好运。

*编辑：回答后阅读文档我真的应该说“父母”，但节点的直接子类都可用作容器）*

# java - 构建 Java 编译/执行 Web 应用程序

> ID：11707124
> 
> 赞同：0
> 
> 时间：2012-07-29T06:15:29.983
> 
> 标签：java, ruby-on-rails, node.js, web-applications, compiler-construction

因此，我在网上四处寻找允许在 Web 浏览器中编译和运行代码的 API，但还没有真正找到我喜欢的任何东西。（我见过 ideone、programr、codepad 等）它们似乎要么是专有的，要么有点过时且速度慢。作为一个项目，我正在考虑构建一个开源强大的 API 来编译和执行代码。目前仅限于 Java，但在我启动并运行某些东西后，我们会看到有关扩展的信息。我对编译器有所了解，但我真的很想看看 stackoverflow 上是否有人对健壮和渐进的实现提出建议，以及在我加入之前是否有一些事情我可能会考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:36:08.163

我将使用 java Servlet 实现 java 编译器。只要您的 Servlet 容器从具有该访问级别的用户帐户运行，您就可以从系统调用中调用 javac。然后 Servlet 可以使用类加载器执行编译后的代码。如果您希望功能包含多个文件和项目，也许您可​​以查看 netbeans 的源代码并了解如何将它们的构建功能移动到您的 Web 应用程序中。

实际上，从 groovy 开始可能更容易，因为编译和执行是一个命令，您只需要弄清楚如何将输出重定向到浏览器。

# javascript - 为什么我看不到对象的属性

> ID：11707128
> 
> 赞同：0
> 
> 时间：2012-07-29T06:15:35.633
> 
> 标签：javascript, jquery

我被难住了，很想知道我在想什么。

我只是在重新编写一些代码并清理一些东西。我有一个执行 ajax 调用并返回 json 字符串的方法。因为我在几个地方使用了这个方法，所以我在一个命名空间中抽象了这个方法。

这是返回的 json 对象

```
{"charge_ID":"4","price":"37","description":"corporate rate"} 
```

这是抽象的方法。

```
wwdb.getChargeRate = function( chargeID ){
    var rate = {}, prop;    
    $.post(baseUrl + 'dashboard_job/jx_get_charge_rate',
    {
        'charge_ID': chargeID
    },      
    function( data ){           
        for( prop in data) {
            rate[prop] = data[prop];            
        }       
    }, 
    'json'
    );
    return rate;
}; 
```

我以为我只能将数据分配给速率，但必须迭代才能使其正常工作。事实上，我认为我可以直接从 $.post() 方法的 function() 部分返回数据，但这不起作用。所以问题 1\. 为什么我不能只返回数据？

但更基本和令人沮丧的是，在下面的代码中我无法访问对象属性。问题2.是为什么？

```
$('#charge_rate_slt').change(function(){

    var t = $(this), v = $(t).val(), rate;

    console.log(wwdb.getChargeRate( v )); //returns object ok

    rate = wwdb.getChargeRate( v ); //assigns object ok

    console.log(rate); //displays in firebug as object with properties

    console.log(rate.price) //undefined

    for(p in rate)
       console.log( p ); //undefined?
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:22:50.937

请记住，这是异步的——当您查看该函数时，该函数尚未被调用。当函数返回 rate 时，调用尚未完成。如果您稍后查看速率变量，它将具有数据。我没有看代码的第二部分，但我希望是一个类似的问题。

* * *

要了解此问题，请进行以下更改：

```
wwdb.getChargeRate = function( chargeID ){
    var rate = {}, prop;    
    $.post(baseUrl + 'dashboard_job/jx_get_charge_rate',
    {
        'charge_ID': chargeID
    },      
    function( data ){           
        for( prop in data) {
            rate[prop] = data[prop];            
        }       
    }, 
    'json'
    );
    return { "price" : "I am not undefined" };
}; 
```

现在你的调用函数将有一些东西要打印。

# php - 使用 PHP 5.3 升级当前的 XAMPP 1.6.8

> ID：11707129
> 
> 赞同：0
> 
> 时间：2012-07-29T06:15:56.950
> 
> 标签：php, xampp

我在 Windows 7 Ultimate 上运行 XAMPP 1.6.8，我想知道如何在不更改整个 XAMPP 的情况下使用 PHP 5.3.x 升级我当前的安装。

我可以从 php.net 下载 PHP 5.3 并替换 XAMPP 中的 PHP 文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:24:18.497

你不能。php_mod 是 XAMPP 使用的，除非您可以让 XAMPP 使用 ISAPI 或 CGI。ISAPI 应该在 apache 内部调用，CGI 应该根据请求运行，FastCGI 应该比两者都好。

但是假设您使用 XAMPP，您只想使用最适合 Windows 7 的版本。更可能的是纯 PHP CGI 将最频繁地更新，因为它是来自 PHP 的通用库，不依赖于您使用的 Web 服务器软件。

# c# - 在 Wizard ASP.NET 中的“步骤”之间保存值

> ID：11707136
> 
> 赞同：-1
> 
> 时间：2012-07-29T06:17:54.027
> 
> 标签：c#, asp.net

当我尝试使用上一步的 TextBox 控件的值时，我在 ASP.NET 向导中收到此错误。

错误：

```
 The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Contact_Emp". 
The conflict occurred in database "KKSTech", table "dbo.Emp", column 'EmpID'. 
```

访问不同步骤的控制值是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:07:12.173

这是插入 dbo.Emp 表的第一个类

```
 public void InsertInfo()
        {
            String KKStech = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
            SqlConnection conn = new SqlConnection(KKStech);
            String insertstring = @"insert into Emp (EmpID, FirstName, LastName, MiddleName, Mob1, Mob2, Phone, Email1, Email2, EmpDesc)
                            values (@EmpID,  @FirstName, @LastName, @MiddleName, @Mob1, @Mob2)";
            SqlCommand cmd = new SqlCommand(insertstring, conn);
            cmd.CommandText = insertstring;
            cmd.CommandType = CommandType.Text;

            try
            {
                conn.Open();
                cmd.Parameters.AddWithValue("@EmpID", TextBox1.Text);
                cmd.Parameters.AddWithValue("@FirstName", TextBox2.Text);
                cmd.Parameters.AddWithValue("@LastName", TextBox3.Text);
                cmd.Parameters.AddWithValue("@MiddleName", TextBox4.Text);
                cmd.Parameters.AddWithValue("@Mob1", TextBox5.Text);
                cmd.Parameters.AddWithValue("@Mob2", TextBox6.Text);
                cmd.ExecuteNonQuery();
            }

            finally
            {
                conn.Close();
            }
        } 
```

这是我要插入到 EmpID 是 FK 的表中的那个

```
public void Insertaddress()
{
    String KKStech = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
    SqlConnection conn = new SqlConnection(KKStech);
    String str = @"insert into Contact (Addressline1, Addressline2, CityID, EmpID)
                                values(@Addressline1, @Addressline2, @CityID, @EmpID)";
    SqlCommand cmd = new SqlCommand(str, conn);
    cmd.CommandText = str;
    cmd.CommandType = CommandType.Text;

    try
    {
        conn.Open();
        cmd.Parameters.AddWithValue("@Addressline1", TextBox15.Text);
        cmd.Parameters.AddWithValue("@Addressline2", TextBox17.Text);
        cmd.Parameters.AddWithValue("@CityID", DropDownList2.SelectedValue);
        cmd.Parameters.AddWithValue("@EmpID", TextBox1.Text);
        cmd.ExecuteNonQuery();
    }
    catch (System.Data.SqlClient.SqlException ex)
    {
        string msg = "Insert Error:";
        msg += ex.Message;
        throw new Exception(msg);
    }

    finally
    {
        conn.Close();
    }

} 
```

那是我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:29:52.490

外键确保它不能在该列中具有不在引用表的主键列中的值。

在您的情况下，您将插入`EmpID`到ie表`contact`的引用表中不存在的表中。`EmpID``Emp`

# c# - 将参数传递给 Castle Windsor Typed Factory

> ID：11707141
> 
> 赞同：3
> 
> 时间：2012-07-29T06:18:32.170
> 
> 标签：c#, .net, dependency-injection, castle-windsor

我正在按照[本文档](http://stw.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)使用类型化工厂并将参数传递给构造函数。当我尝试传递 2 个参数（1，“fo”）时，类型化工厂给了我这个错误，如代码所示。

![在此处输入图像描述](../Images/4d2343eae80782c6f4d90c2608addfe9.png)

```
public class SomeClass {
    public ITypedFactory2 F2 { get; set; } 
    public void SomeFunction() {
        var req = F2.Create<IGetFooRequest>(1, "fo"); // ERROR HERE
    }
}
public class GetFooRequest : IGetFooRequest {
    public int Bar { get; private set; }
    public string Ton { get; private set; }
    public GetFooRequest(int bar, string ton ) {
        Bar = bar;
        Ton = ton;
    }
}
public interface IGetFooRequest{
    int Bar { get; }
    string Ton { get; }
}    
public interface ITypedFactory2 {
    T Create<T>(int param1, string param2);
    void Release(object t);
} 
```

这是温莎安装程序部分...

```
container.AddFacility<TypedFactoryFacility>();
container.Register(Component.For<ITypedFactory2>().AsFactory());
container.Register(AllTypes
            .FromAssemblyContaining<IGetFooRequest>()
            .Where(type => type.Name.EndsWith("Request"))
            .WithService.AllInterfaces().LifestyleTransient()); 
```

为什么它说无法解决非可选依赖...？我通过了 (1,"fo"); 我真的不明白为什么会这样......请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-24T21:51:39.370

我有同样的问题，只是想出了答案。工厂方法的参数名称和类构造函数的参数名称必须匹配，不区分大小写。

所以将您的工厂界面更改为

```
public interface ITypedFactory2 {
    T Create<T>(int **bar**, string **ton**);
    void Release(object t);
} 
```

或你的班级

```
public class GetFooRequest : IGetFooRequest {
    public int Bar { get; private set; }
    public string Ton { get; private set; }
    public GetFooRequest(int **param1**, string **param2**) {
        Bar = bar;
        Ton = ton;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T07:01:45.520

我查看了自己的代码并说，(int param1, string param2) 看起来不太好。让我使用 (int bar, string ton) ... 这个命名解决了这个问题。LoL 难以置信，我没有看到那个文件提到命名的重要性。

幸运的是，我确实记得[这里的介绍](http://stw.castleproject.org/Windsor.How-Dependencies-Are-Resolved.ashx)说依赖项首先按名称解析，然后按类型解析。这就是按名称部分工作，按类型部分进入水中。无论如何，我很高兴我知道如何使用它，所以我在这里与需要它的人分享我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-10T15:30:27.413

如果您想通过类型而不是参数名称来解析，您可以创建自己的`ComponentSelector`：

```
public class ComponentSelector : DefaultTypedFactoryComponentSelector
{
    protected override Arguments GetArguments(MethodInfo method, object[] arguments)
    {
        if (arguments == null)
            return null;

        Arguments argumentMap = new Arguments();
        ParameterInfo[] parameters = method.GetParameters();

        List<Type> types = parameters.Select(p => p.ParameterType).ToList();
        List<Type> duplicateTypes = types.Where(t => types.Count(type => type == t) > 1).ToList();

        for (int i = 0; i < parameters.Length; i++)
        {
            if (duplicateTypes.Contains(parameters[i].ParameterType))
                argumentMap.Add(parameters[i].Name, arguments[i]);
            else
                argumentMap.Add(parameters[i].ParameterType, arguments[i]);
        }

        return argumentMap;
    }
} 
```

正如您在我的实现中看到的那样，您需要处理构造函数具有多个具有相同类型的参数的情况。
在这种情况下，您必须按参数名称解​​析，因为`Castle.Windsor`将为具有相同类型的每个参数使用类型的第一个参数。

要使用您自己的`ComponentSelector`，您还必须在您的网站上注册`IWindsorContainer`：

```
container.Register(Component.For<ComponentSelector, ITypedFactoryComponentSelector>()); 
```

最后你必须告诉你的工厂使用你自己的`ComponentSelector`作为它的组件选择器：

```
container.Register(Component.For<ITypedFactory2>().AsFactory(f => f.SelectedWith<ComponentSelector>())); 
```

有关更多信息，请查看有关如何使用自定义组件选择器的[官方文档。](https://github.com/castleproject/Windsor/blob/master/docs/typed-factory-facility-interface-based.md#custom-itypedfactorycomponentselectors)

# perl - 如何使用perl在目录中搜索文件夹

> ID：11707144
> 
> 赞同：-4
> 
> 时间：2012-07-29T06:19:21.990
> 
> 标签：perl

我是 perl 脚本的新手。我想在目录“pqr”中搜索一个名为“abc”的每个文件夹，并将每个“abc”文件夹的路径写入一个单独的文件（n.txt，其中 n 是一个整数），格式为 filename = pathOfABC。谁能给我一些提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T06:34:03.690

由于任务涉及递归，您可以使用类似[`File::Find`](https://metacpan.org/module/File%3a%3aFind).

```
#!/usr/bin/env perl

use strict;
use warnings;

use File::Find;

my @files;

sub wanted {
    if ( -d && $_ eq 'abc' ) {
        push @files, $File::Find::name;
    }
}

find \&wanted, 'pqr';

my $ctr = 1;
for (@files) {
    open my $fh, '>', "$ctr.txt" or die "Error opening file";
    print $fh $_;
    $ctr++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:11:35.243

该[`Path::Class::Rule`](https://metacpan.org/module/Path%3a%3aClass%3a%3aRule)模块使这样的搜索非常简洁。

代码看起来像这样。

```
use strict;
use warnings;

use Path::Class::Rule;

my $rule = Path::Class::Rule->new->dir->name('abc');

print "$_\n" foreach $rule->all('pqr'); 
```

# css - css 从右到左的滑动门

> ID：11707147
> 
> 赞同：0
> 
> 时间：2012-07-29T06:20:05.960
> 
> 标签：css, sliding-doors

我正在尝试使用滑动门技术做导航菜单。我的网站是从右到左对齐的。

有人知道如何使它工作，从右到左对齐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:23:21.467

试试这些。 [CSS推拉门按钮居中对齐](https://stackoverflow.com/questions/2471802/css-sliding-door-buttons-center-alignment)

[http://www.meekostuff.net/blog/CSS-Sliding-Doors/](http://www.meekostuff.net/blog/CSS-Sliding-Doors/)

希望能帮助到你，

# python - 在python中打印不带括号的列表列表

> ID：11707150
> 
> 赞同：2
> 
> 时间：2012-07-29T06:20:48.120
> 
> 标签：python, list

我有一个要显示为字符串的列表列表。这份清单：

```
my_list = [[7, 'd'], [3, 's']] 
```

我想显示没有括号和逗号，如下所示：

```
7d 3s 
```

如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T06:22:46.373

```
>>> my_list = [[7, 'd'], [3, 's']]
>>> ' '.join('{0}{1}'.format(x, y) for x, y in my_list)
7d 3s 
```

上述解决方案最适合任何两个元素的特定情况，但这里有一个更通用的解决方案，适用于子列表中的任意数量的元素：

```
>>> ' '.join(''.join(map(str, sublist)) for sublist in my_list)
7d 3s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T06:52:27.137

我会得出这个简短的答案：

```
' '.join(str(a)+b for a,b in my_list) 
```

# python - 使全局条件中断

> ID：11707151
> 
> 赞同：1
> 
> 时间：2012-07-29T06:20:56.000
> 
> 标签：python, variables, conditional, break, conditional-statements

请允许我先说一下我自己学习 Python 作为我自己好奇心的一部分，并且我被推荐了一个免费的在线计算机科学课程，该课程是公开的，所以如果我使用的术语不正确，我深表歉意。

我之前在这里看到过关于这个特定问题的问题 - 但我有一个单独的问题，不想劫持这些线程。问题：

“一个子字符串是另一个字符串中的任何连续字符序列。相同的子字符串可能在同一个字符串中出现多次：例如“assesses”有子字符串“sses”2次，而“trans-Panamanianbanana”有子字符串“ “6 次。编写一个接受两行输入的程序，我们称第一个针和第二个干草堆。打印该针作为干草堆的子字符串出现的次数。”

我的解决方案（有效）是：

```
first = str(input())
second = str(input())

count = 0
location = 0
while location < len(second):
   if location == 0:
      location = str.find(second,first,0)
      if location < 0:
         break
      count = count + 1                          
   location = str.find(second,first,location +1)   
   if location < 0:
      break
   count = count + 1
print(count) 
```

如果你注意到，我在两个不同的场合做了 if 语句，如果位置小于 0，则中断。有没有办法让它成为“全局”条件，所以我没有重复的代码？我想随着程序复杂性的提高，效率变得至关重要，所以我现在正在努力发展良好的做法。

python 大师将如何优化这段代码，还是我太挑剔了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T06:55:50.633

我认为 Matthew 和 darshan 有最好的解决方案。我将发布一个基于您的解决方案的变体：

```
first = str(input())
second = str(input())  

def count_needle(first, second):

        location = str.find(second,first)
        if location == -1:
                return 0 # none whatsoever
        else:
                count = 1
                while location < len(second):
                   location = str.find(second,first,location +1)   
                   if location < 0:
                      break
                   count = count + 1
        return count

print(count_needle(first, second)) 
```

主意：

*   在适当的时候使用函数来构造代码
*   在进入 while 循环之前初始化变量`location`使您免于多次检查 location < 0

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T06:24:44.490

查看正则表达式，python 的`re`模块 (http://docs.python.org/library/re.html)。例如，

```
import re
first = str(input())
second = str(input())
regex = first[:-1] + '(?=' + first[-1] + ')'
print(len(re.findall(regex, second))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:43:56.677

正如 Matthew Adams 所提到的，最好的方法是使用 python'd re module [Python re module](http://docs.python.org/library/re.html)。

对于您的情况，解决方案将如下所示：

```
import re

def find_needle_in_heystack(needle, heystack):
  return len(re.findall(needle, heystack)) 
```

由于您正在学习 python，最好的方法是使用“DRY”[不要重复自己]的口头禅。有很多 python 实用程序可用于许多类似的情况。

要快速了解一些非常重要的 python 模块，您可以通过这个类：

[谷歌 Python 类](http://code.google.com/edu/languages/google-python-class/)

这应该只需要你一天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T22:14:24.380

```
needle = "ss"
haystack = "ssi lass 2 vecess estan ss."

print 'needle occurs %d times in haystack.' % haystack.count(needle) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T06:51:49.100

甚至你的方法也可以简化（它使用了这样一个事实，即 find 返回-1，而你要求它从不存在的偏移量中搜索）：

```
>>> x = 'xoxoxo'
>>> start = x.find('o')
>>> indexes = []
>>> while start > -1:
...     indexes.append(start)
...     start = x.find('o',start+1)
>>> indexes
[1, 3, 5] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T03:21:53.263

**回答**

```
needle=input()
haystack=input()
counter=0
for i in range(0,len(haystack)):
  if(haystack[i:len(needle)+i]!=needle):
     continue
  counter=counter+1
print(counter) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T10:04:10.233

干得好 ：

```
first = str(input())
second = str(input())
x=len(first)
counter=0
for i in range(0,len(second)):
   if first==second[i:(x+i)]:
      counter=counter+1
print(counter) 
```

# php - 如何在 PHP 中更新 URL？

> ID：11707159
> 
> 赞同：0
> 
> 时间：2012-07-29T06:22:26.377
> 
> 标签：php

我的当前网址为： [http ://example.com/abcdef](http://example.com/abcdef)

当一个事件发生时（点击提交按钮等），当前的 url 需要用一个不同于“abcdef”的值来更新。例如， [http ://example.com/xaxaxa](http://example.com/xaxaxa)

“xaxaxa”存储在 PHP 中的一个变量中（基本上来自 mySQL）。

我知道如何“获取”（使用 $_SERVER['SCRIPT_NAME']）php 中的当前 url，但谁能告诉我如何“设置”一个。我不想实际重定向到另一个页面（例如使用位置：..）。我只需要更新网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T06:24:12.330

无法使用在服务器端运行的 PHP 来完成。为此使用 JavaScript/HTML5。见**[location.hash](http://www.ezineasp.net/post/Javascript-Location-Hash-with-Example.aspx)**和**[history.pushState](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:28:01.293

您可以尝试使用 HTML5 历史 API。

[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:27:44.443

可以通过HTAccess来正确路由页面，示例代码；

`RewriteEngine on`

`#Force redirect for 404 errors to /index.php`

`RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f`

`RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d`

`RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-l`

`RewriteRule ^/(.*)$ /index.php [L,QSA]`

对于另一个问题，您需要更新链接以在 URL 中包含新位置。

# php - 删除开头带有特定图案的线条

> ID：11707162
> 
> 赞同：4
> 
> 时间：2012-07-29T06:22:40.667
> 
> 标签：php, text

我有一个大约 25,000 行的文本文件。大约 525kb。

有些行的开头有随机文本。有些有很长的分号字符串。

其他一些只有三个分号，然后在同一行上有一个空格和可选的更多文本。这些是我要删除的行。

这是一个示例....

```
 ;;; Updated Time 20120706122706
   ;;; Generic DEveloper Output

   ;;; Some Random Comments
   ;;; I got some more...
   ;;; Yet another uneeded line
   ;;; Thanks for using StackOverflow <http://stackoverflow.com>, or...
   ;;; Not.

   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; Banana Production

   [Data_Release_Version]
   Version=12586
   Released=20120706122706

   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; Baseline Properties

   [BaseLineProperties]
   Comment=BaselineProperties 
```

- - - 等等。

一旦到达 4 或更多的第一行；在线上，我需要文件的其余部分，因为没有“;;;”行。

试图快速找到一些东西，而不是读取所有行并在它不匹配时将其写回 ";;; "。

文件是 ASCII（可能是 UTF-8）文本类型文件。

有任何想法吗？

感谢您的时间、帮助和知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:22:02.353

我建议使用`file_get_contents()`并将文件的内容作为字符串保存在一个变量中，然后`explode()`在每个换行符处使用该字符串，然后在`foreach`循环中，用于`preg_match()`检查该行是否以 3 个分号和一个空格开头，如果它没有，把它放在另一个名为`$output`. 在 foreach 之后，`implode()` `$output`添加一个换行符并用于`file_put_contents()`在另一个文件中打印它。希望这可以帮助 ：-）

代码：

```
<?php
$string = file_get_contents($filename);
$array = explode("\n",$string);
foreach($array as $arr) {
    if(!(preg_match("^;;;\s",$arr))) {
        $output[] = $arr;
    }
}

$out = implode("\n",$output);
file_put_contents($path,$out);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:53:14.730

取决于..我会尝试加载到一个字符串中，然后用换行符做一个explode()，所以它在数组中，然后在没有strpos == 0 -AND- strpos !== false 的任何地方运行一个带有跳过的foreach ，如果不匹配，您可以输入继续跳到下一行。

另一种选择是解析和跳过，甚至使用 fseek 等。取决于很多不同的因素来确定什么是最快的。

您可以稍后内爆，并重新添加换行符，然后推出文件，和/或使用换行符。取决于输出应该去哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:52:08.420

我想你自己给出了答案：

制作一个在循环（while）中逐行读取输入文件的脚本。如果满足两个条件，它将每一行写入输出文件：1\. 标志（“done”）为 FALSE 和 2\. 该行不以“;;;”（不是空白）开头。这将删除那些以三个分号开头的行。一旦出现包含更多分号的行，您将标志设置为 TRUE，因此剩余的行将被复制而不被检查。

# javascript - 如何将 v8 值转换为数组

> ID：11707167
> 
> 赞同：15
> 
> 时间：2012-07-29T06:23:24.587
> 
> 标签：javascript, c++, v8

我正在为 v8 编写一个 c++ 扩展，并希望将一个 Array 对象传递给它。我看到传入的参数可以通过 IsArray() 进行测试，但没有 ToArray()。

你如何访问它的长度，并通过数字索引请求元素？

```
Handle<Value> MyExtension(const Arguments& args)
{
    Handle<Value> v = args[0];
    if(v->IsArray())
    {
        // convert to array, find its length, and access its members by index... ?
    }
...
} 
```

必须在这里遗漏一些明显的东西。Object 可以返回它的所有属性，但这并不是我所希望的。有没有办法把它作为一个数组？

谢谢阅读。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T08:14:16.597

您应该使用`Cast`句柄的方法将其转换为不同的类型：

```
v8::Handle<v8::Array> array = v8::Handle<v8::Array>::Cast(v); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-29T20:03:44.417

我无法找到转换或转换为 Array 的方法。也许有办法。但我发现通过`object->IsArray()`,`object->get("length")->Uint32Value()`和`object->get(int)`, 我可以遍历数组。

```
v8::Handle<v8::Object> obj;
// ... init obj from arguments or wherever ...

int length = 0;
if(obj->IsArray())
{
    length = obj->Get(v8::String::New("length"))->ToObject()->Uint32Value();
}

for(int i = 0; i < length; i++)
{
    v8::Local<v8::Value> element = obj->Get(i);
    // do something with element
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-30T23:51:49.930

我能够让事情像这样工作，它只是 Vyacheslav Egorov 给出的答案的变体

```
Local<Array> arr= Local<Array>::Cast(args[0]);
printf("size %d\n",arr->Length());
Local<Value> item = arr->Get(0); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-15T02:11:17.180

The below is my succeeded code

```
v8::Handle<v8::Value> obj(args[0]);

 if(obj->IsArray()){

     v8::Local<v8::Array> arr= v8::Local<v8::Array>::Cast(args[0]);
     v8::String::Utf8Value key(arr->Get(0));
     v8::String::Utf8Value value(arr->Get(1));

 } 
```

# android - Android光标不会循环，应用程序冻结

> ID：11707168
> 
> 赞同：-2
> 
> 时间：2012-07-29T06:23:29.213
> 
> 标签：android

所以在这里，我让这个应用程序从数据库中检索记录，我从我的数据库中有 5 个条目，并使用此代码检索它；

```
Cursor c = dbconnection.rawQuery("SELECT * from Patients", null); 
```

之后，我循环它以检索数据库中的数据行；

```
c.moveToFirst();
while(!c.isAfterLast())
{
 //Some code to put records per column in to a Patient Object 
 c.moveToNext();
} 
```

所以我的问题是，当它进入循环时，我的模拟器冻结了，当我试图将每条记录显示到日志中时，我不会因为它自己已经冻结的模拟器。

有人可以启发我解决这个问题吗，这个问题对我来说真的很新

## 编辑

是的，已经尝试过 baya 和 ofir 的建议。他们解决了，但是我在使用这个循环代码的迭代过程中遇到了这个空错误

```
Cursor c = dbHelper.retrieveAllData();

                c.moveToFirst();

                while(c.moveToNext())
                {
                    Log.d("dbcheck",Integer.toString(c.getPosition()));
                    //Log.d("dbcheck",c.getString(c.getColumnIndex("firstname")));
                    //Log.d("dbcheck",c.getString(c.getColumnIndex("lastname")));
                    **p.setFname(c.getString(c.getColumnIndex("firstname")));**
                    p.setMi(c.getString(c.getColumnIndex("middleinitial")));
                    p.setLname(c.getString(c.getColumnIndex("lastname")));
                    p.setAddr(c.getString(c.getColumnIndex("address")));
                    p.setAge(c.getInt(c.getColumnIndex("age")));
                    p.setMed_history(c.getString(c.getColumnIndex("med_history")));
                    p.setPat_status(c.getString(c.getColumnIndex("status")));
                    patientList.add(p);

                } 
```

我在 p.setFname() 行上有一个空异常错误。我不知道它是如何变成空的，实际上我已经使用被注释掉的代码用 Log 显示了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T06:35:58.597

你试一试，

```
 Cursor c = dbconnection.rawQuery("SELECT * from Patients", null);
    if (c.getCount() > 0) {

        Patient p;

        while(c.moveToNext) {

            //initialize ur object to store new patient info.
            p = new Patient();
            p.setFname(c.getString(c.getColumnIndex("firstname")));

            //add newly created patient to ur list
            patientList.add(p);

        }
    }
c.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:36:32.573

尝试这样做：

```
 // return all columns
    Cursor cursor = mDb.query(Patients, null, null, null, null, null, null);

    if ((cursor != null) && (cursor.getCount() > 0)) {
       while(cursor.moveToNext()){

    //Some code to put records per column in to a Patient Object 

    }
                    cursor.close();
   } 
```

# haskell - Haskell 子类型类需要 UndecidableInstances？

> ID：11707171
> 
> 赞同：9
> 
> 时间：2012-07-29T06:24:10.477
> 
> 标签：haskell, typeclass

考虑以下代码示例：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE UndecidableInstances #-} -- Is there a way to avoid this?

-- A generic class with a generic function.
class Foo a where
  foo :: a -> a

-- A specific class with specific functions.
class Bar a where
  bar :: a -> a
  baz :: a -> a

-- Given the specific class functions, we can implement the generic class function.
instance Bar a => Foo a where
  foo = bar . baz

-- So if a type belongs to the specific class...
instance Bar String where
  bar = id
  baz = id

-- We can invoke the generic function on it.
main :: IO ()
main =
  putStrLn (foo "bar") 
```

（我的实际代码要复杂得多；这是演示该模式的最小简化案例。）

我不清楚`UndecidableInstances`这里为什么需要 - type 参数`a`在 的两侧出现一次`Bar a => Foo a`，所以我希望事情“正常工作”。我显然在这里遗漏了一些东西。但无论如何，有没有办法在不使用的情况下做到这一点`UndecidableInstances`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T09:12:52.797

您可以采取几种方法；我认为您没有提供足够的上下文来确定哪个是最合适的。如果您使用 GHC-7.4，您可能想尝试`DefaultSignatures`扩展。

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE DefaultSignatures #-}

-- A generic class with a generic function.
class Foo a where
  foo :: a -> a
  default foo :: Bar a => a -> a
  foo = bar . baz

-- A specific class with specific functions.
class Bar a where
  bar :: a -> a
  baz :: a -> a

instance Bar String where
  bar = id
  baz = id

instance Foo String

main :: IO ()
main =
  putStrLn (foo "bar") 
```

您仍然需要声明一个类型是 的实例`Foo`，但您不需要重复方法声明，因为将使用默认实现。

另一种相当轻量级的方法是使用新类型。如果您有需要`Foo`实例的函数，则可以将实例包装`Bar`在新类型中。

```
newtype FooBar a = FooBar { unFooBar :: a }

instance Bar a => Foo (FooBar a) where
    foo = FooBar . bar . baz . unFooBar

-- imported from a library or something...
needsFoo :: Foo a => a -> b

myFunc = needsFoo (FooBar someBar) 
```

或者，您可以通过替换为普通函数或为实例`foo`制作专门版本来解决问题：`Bar`

```
-- if every `Foo` is also a `Bar`, you can just do this.  No need for `Foo` at all!
foo :: Bar a => a -> a
foo = bar . baz

-- if most `Foo`s aren't `Bar`s, you may be able to use this function when you have a `Bar`
fooBar :: Bar a => a -> a
foo = bar . baz 
```

如果它们适合您的情况，这些可能是最好的解决方案。

另一种选择是`Foo`手动声明每个实例。尽管可能有很多不同的可以想象的实例，但代码库只有少数实际使用的实例是相当普遍的。如果这里是真的，那么只写出您需要的 3 或 4 个实例而不是尝试实施更通用的解决方案可能会减少工作量。

作为最后的手段，您可以使用类似于原始代码的东西，但您还需要`OverlappingInstances`使其工作（如果您不需要`OverlappingInstances`，那么您不需要`Foo`类）。这是允许 GHC 在有多个可用匹配项时选择“最具体的实例”的扩展。这或多或少会起作用，尽管您可能无法得到您期望的结果。

```
class Foo a where
  foo :: a -> a

class Bar a where
  bar :: a -> a
  baz :: a -> a

instance Bar String where
  bar = id
  baz = id

instance Bar a => Foo a where
  foo = bar . baz

instance Foo [a] where
  foo _ = []

main :: IO ()
main =
  print (foo "foo") 
```

现在`main`打印一个空字符串。有两个`Foo`实例， for`a`和`[a]`。后者更具体，因此选择它是`foo "foo"`因为字符串具有 type `[Char]`，尽管您可能想要前者。所以现在你还需要写

```
instance Foo String where
  foo = bar . baz 
```

在这一点上，您不妨完全忽略该`Bar a => Foo a`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T18:26:31.770

除了上面的回答。`Data.Traversable`图书馆模块中使用的政治`base`很有吸引力。简而言之，在库中提供通用实例会迫使最终用户接受您的决定，而这并不总是最好的做法。`Data.Traversable`包含类似 的函数`foldMapDefault`，提供默认实现，但具体实现的决定仍由用户决定。

# algorithm - 检查线性和为零的算法

> ID：11707179
> 
> 赞同：2
> 
> 时间：2012-07-29T06:25:35.283
> 
> 标签：algorithm, subset-sum

给定一个`N`非负整数列表，提出一种算法来检查`X`列表中数字的总和是否等于剩余的`N-X`。

换句话说，涉及整个集合的[子集和问题的更简单情况。](http://en.wikipedia.org/wiki/Subset_sum_problem)

**尝试的解决方案**

按降序对列表的元素进行排序。将变量初始化`SUM`为第一个元素。删除第一个元素（最大，`a(1)`）。让`a(n)`表示`n-th`当前列表中的元素。

虽然 list 有多个元素，

1.  使`SUM`等于`SUM + a(1)`或`SUM - a(1)`，以最接近的为准`a(2)`。（其中最接近的均值`|a(2) - SUM_POSSIBLE|`是最小值）。

2.  删除`a(1)`.

如果`SUM`等于`-a(1)`或`a(1)`，则存在线性和。

**问题**

我似乎无法解决上述算法，如果它是正确的，我想要一个证明。如果它是错误的（更有可能），有没有办法在线性时间内完成？

PS：如果我做错了什么，请原谅：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:40:53.040

请注意，您希望数字的总和`x`等于其他`N-x`数字的总和。
您可以通过说您想查看是否存在一个子集来简化这一点，该子集的总和`S/2`是`S`整个集合的总和。

因此，您可以通过一次迭代 ( **O(n)** ) 计算出所需的总和。

然后只需使用像**[背包](http://en.wikipedia.org/wiki/Knapsack_problem)**这样的已知算法来找到满足您总和的子集。

另一个更“数学”的解释：**[Dynamic Programming – 3 : Subset Sum](https://tkramesh.wordpress.com/tag/subset-sum/)**

编辑：

作为对您其他问题的回答，您的算法是错误的。考虑这个数字列表：

{3,3,4,4}

总和为 14，因此您正在寻找总和为 7 的子集。显然它将是 3+4。

检查 2 个 3 后，您的算法将返回 false

# location - Milo.com 的“定位我”功能使用什么技术？

> ID：11707180
> 
> 赞同：1
> 
> 时间：2012-07-29T06:26:03.953
> 
> 标签：location

这是如何运作的？请提供有关如何从头开始构建此功能的详细答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:34:58.490

查看 HTML5 地理位置。看到这个： http: [//merged.ca/iphone/html5-geolocation/](http://merged.ca/iphone/html5-geolocation/)

根据该代码，您想使用 navigator.geolocation 来检索适当的位置：

```
if (navigator.geolocation) 
{
    navigator.geolocation.getCurrentPosition( 

        function (position) {  

        // Did we get the position correctly?
        // alert (position.coords.latitude);

        // To see everything available in the position.coords array:
        // for (key in position.coords) {alert(key)}

        mapServiceProvider(position.coords.latitude,position.coords.longitude);

        }, 
        // next function is the error callback
        function (error)
        {
            switch(error.code) 
            {
                case error.TIMEOUT:
                    alert ('Timeout');
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert ('Position unavailable');
                    break;
                case error.PERMISSION_DENIED:
                    alert ('Permission denied');
                    break;
                case error.UNKNOWN_ERROR:
                    alert ('Unknown error');
                    break;
            }
        }
        );
    }
}
else // finish the error checking if the client is not compliant with the spec 
```

# c# - 如何从单独的控制器中生成控制器/视图的 URL？

> ID：11707193
> 
> 赞同：0
> 
> 时间：2012-07-29T06:29:57.940
> 
> 标签：c#, asp.net-mvc, model-view-controller

我正在生成一个大型数据表，并希望有一个链接来更新表的某些部分。有没有一种方法可以生成从我正在使用的控制器中重定向到另一个控制器/视图的 URL？

我有这个代码：

```
HTMLTable.AppendLine("        <td class=\"team\"> " + tournament.TournamentRoundMatches[col][effective_match_id].competitorId1 + "<a href=\"<% =Html.BuildUrlFromExpression<CompetitionController>(c => c.Details(83)) %>\">" + "  update" + "</a>" + "</td>"); 
```

但这不能正确呈现 - 我尝试了其他几种方法，包括在 html 之前创建一个临时字符串：

```
string temp = Url.Action("Details", "Competition", new { id = 83 }, Request.Url.Scheme); 
```

这也不起作用 - 我收到一个错误，即使用“Url”需要对象引用

有人可以对此有所了解吗？如何从该控制器中为单独的控制器生成 URL？我所在的控制器称为“TournamentController”，当用户单击“更新”时，我想将用户重定向到“CompetitionController”的“详细信息”视图 - 这可能吗？

# java - 定义一个数组，它的元素是java中的对象

> ID：11707195
> 
> 赞同：0
> 
> 时间：2012-07-29T06:30:40.060
> 
> 标签：java, arrays

我想定义一个数组，它的元素是java中的对象，我可以使用这个方法： `public void add(Object elem);`

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:33:04.320

文字对象数组被定义为任何其他数组。

```
Object[] objects = new Object[10]; 
```

虽然，更有可能的是，您正在寻找类似的东西`ArrayList`

```
List<Object> object = new ArrayList<Object>(); 
```

这将为您提供`.add`功能，因为它是一个`List`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:33:53.133

```
Objecttype objects= new Objecttype [initial size] 
```

为什么要使用数组。选择 ArrayList ，您无需在其中定义初始大小，它还提供了自己的 add 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:43:25.613

定义对象数组就像定义任何其他数组一样

```
Object[] objectList = new Object[MAX_LIMIT];
for(int i=0;i<objectList.length;i++){
   objectList[i] = new ANY_DATA_TYPE();
} 
```

# ruby - Xapian、MongoDB 等的现代 Capistrano Deprec 食谱

> ID：11707196
> 
> 赞同：0
> 
> 时间：2012-07-29T06:30:44.063
> 
> 标签：ruby, mongodb, capistrano, xapian

我正在寻找一些现代 Capistrano 2.x / Deprec 配方来设置工具，例如 MongoDB、Xapian 和 Xapian-fu，以及其他工具（Redis、Memcache/d 等）

任何人都知道 Deprec 是否仍然足够活跃，可以为其中一些现代工具提供一些食谱

谢谢

查尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:31:11.963

我建议考虑使用[Chef](http://www.opscode.com/chef/)或[Puppet](http://puppetlabs.com/)来管理工具/系统配置，并继续使用 Capistrano 进行应用程序部署。

有一些模块可以将 Capistrano 与 Chef 或 Puppet 集成，例如：

*   [厨师长](https://github.com/cramerdev/capistrano-chef)
*   [钢琴木偶](https://github.com/garethr/capistrano-puppet)

Chef 社区发展迅速，但 Puppet 的存在时间更长。社区贡献的 Puppet 食谱往往有更广泛的 O/S 支持，但 Chef 正在迎头赶上。

两者都可能是一个不错的选择，但讨论每个问题的优点会导致广泛的辩论:)。

几个观点：

*   [傀儡大战厨师 - 战斗！](http://devopsanywhere.blogspot.com.au/2011/10/puppet-vs-chef-fight.html)
*   [为什么我们选择厨师](http://www.nathenharvey.com/blog/2011/11/21/why-we-chose-chef-over-puppet-at-customink)

[deprec.org](http://deprec.org/)和deprec [-users 讨论组](http://deprec.org/)目前似乎都处于休眠状态。

# asp.net-mvc-3 - 如何在 MVC3 中过滤网格视图？

> ID：11707197
> 
> 赞同：1
> 
> 时间：2012-07-29T06:32:23.587
> 
> 标签：asp.net-mvc-3, c#-4.0

每当我选择 Resourcename only 过滤该名称时，我都会在 Data 和 dropdownlist 数据中有 gridview ....... 如何在控制器中编写代码？

我的控制器代码

* * *

```
public List<BugTracker_DataHelper> GeGridView()
         {
             var modelList = new List<BugTracker_DataHelper>();
             using (SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=MvcBugTracker;Data Source=SSDEV6\SQLEXPRESS"))
             {
                 conn.Open();
                 SqlCommand dCmd = new SqlCommand("Select * from Resources", conn);
                 SqlDataAdapter da = new SqlDataAdapter(dCmd);
                 DataSet ds = new DataSet();
                 da.Fill(ds);
                 conn.Close();
                 for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                 {
                     var model = new BugTracker_DataHelper();
                     model.ResourceID = Convert.ToInt16(ds.Tables[0].Rows[i]["ResourceID"]);
                     model.ResourceName = ds.Tables[0].Rows[i]["ResourceName"].ToString();
                     model.EmployeEmailID = ds.Tables[0].Rows[i]["EmailID"].ToString();
                     //model.status = ds.Tables[0].Rows[i]["Status"].ToString();
                     modelList.Add(model);
                 }
             }
             return modelList;
         }
         [AcceptVerbs(HttpVerbs.Post)]
         public ActionResult Grids(FormCollection collection,string ResourceName,int ResourceId)
         {
             return View();

         } 
```

我的模型代码

* * *

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>>" %>

<!DOCTYPE html>
<html>
<head runat="server">
    <link href="../../Content/GridStyle.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <title>Grids</title>
</head>
<body>
    <div>  
            <%: Html.DropDownList("ResourceID", (SelectList)ViewBag.ResourceID, "--Select Project--")%>
            <%: Html.ValidationMessage("ResourceID")%>  

            <%: Html.DropDownList("ResourceName", (SelectList)ViewBag.ResourceName, "--Select Project--")%>
            <%: Html.ValidationMessage("ResourceName")%>                        

                 <%       
                         var grid = new WebGrid(source: Model, defaultSort: "ResourceName", rowsPerPage: 3);
                         using (Html.BeginForm())
                         { %>                            
                            <div id="grid">
                            <%:grid.GetHtml(
                             tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",                            
                             columns:grid.Columns(                             
                            grid.Column("ResourceID"),
                            grid.Column("ResourceName"),
                            grid.Column("EmployeEmailID"),
                            grid.Column(
                            header: "",
                            style: "text-align-center",
                            format: (item) => Html.ActionLink("Edit", "Edit", new { ResourceID = item.ResourceID }))
                            ))%>
                            </div>
                            <%} %>         
    </div>
</body>
</html> 
```

* * *

如何编写控制器代码..请任何人帮助我

# php - “数组”出现在 JSON 输出之前

> ID：11707198
> 
> 赞同：-1
> 
> 时间：2012-07-29T06:32:29.873
> 
> 标签：php

我是 PHP 新手，我不明白为什么 JSON 字符串前面有一个额外的单词 ARRAY。

下面是 JSON 字符串的输出：

```
Array{"Users":[{"UserID":"1","FirstName":"lalawee","Email":"12345","Password":null},{"UserID":"2","FirstName":"shadowblade721","Email":"12345","Password":null},{"UserID":"3","FirstName":"dingdang","Email":"12345","Password":null},{"UserID":"4","FirstName":"solidsnake0328","Email":"12345","Password":null}],"success":1} 
```

这是 PHP 文件：

```
<?php
/*
* Following code will list all the Users
*/
// array for JSON response
$response = array();
// include db connect class
require_once __DIR__ . '/db_connect.php';
// connecting to db
$db = new DB_CONNECT();
// get all Users from Users table
$result = mysql_query("SELECT * FROM Users") or die(mysql_error());
// check for empty result
if (mysql_num_rows($result) > 0) {
// looping through all results
// Users node
$response["Users"] = array();

while ($row = mysql_fetch_array($result)) {
    // temp user array
    $user[] = array();
    $user["UserID"] = $row["UserID"];
    $user["FirstName"] = $row["FirstName"];
    $user["Email"] = $row["Email"];
    $user["Password"] = $row["Password"];

    // push single User into final response array
    array_push($response["Users"], $user);
}
// success
$response["success"] = 1;
echo $response;

// echoing JSON response
echo json_encode($response);
}
else {
// no Users found
$response["success"] = 0;
$response["message"] = "No Users found";

// echo no users JSON
echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T06:33:41.323

消除

```
echo $response; 
```

正在打印单词 Array。如果您尝试回显数组，它将显示单词“数组”而不是打印数组本身的内容。使用 print_r() 函数显示数组的内容。

```
print_r($response); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T06:46:54.073

使用`__to_string`魔术方法的类除外，`echo`并且`print`只会输出对变量值的字符串解释。数字类型（整数和浮点数）、字符串和（我认为）布尔值具有简单的字符串表示。任何其他变量（数组、对象、资源）要么不输出任何内容、它们的变量类型，要么抛出致命错误。

对于数组和对象，`print_r()`将遍历每个成员/属性并尝试将其转换为字符串（print_r 是 print_recursive 的简写）。所以`print_r($response)`会给你完整的数组。

请记住，通常完整的数组仅对输出调试有用。将数组的 php 字符串版本传递给 javascript 可能没有用。

# c# - 在 ASP.NET/C# 中流畅地在线流式传输静态/实时媒体

> ID：11707204
> 
> 赞同：0
> 
> 时间：2012-07-29T06:33:06.233
> 
> 标签：c#, asp.net, real-time, live-streaming

我目前正在开展一个需要实时视频流的项目，该项目 **可能**来自文件或网络摄像头，就像视频聊天或 ustream.tv 一样。我不知道它是如何工作的，以及它如何根据查看器的带宽和设备类型动态地改变比特率。例如：如果我使用的是 2mbps 连接，那么视频将以高比特率流式传输给我，否则对于带宽支持较低的移动设备。我已经浏览了示例并搜索了 Microsoft 的 SmoothSTreaming 等软件，但我希望它完全是定制的。

如果您使用了 VLC 媒体播放器中的流媒体选项，则支持在线视频流和实时流媒体。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:33:11.733

查看[Microsoft 媒体平台：播放器框架](http://smf.codeplex.com/)。

# javascript - 无法删除行为

> ID：11707205
> 
> 赞同：1
> 
> 时间：2012-07-29T06:33:08.913
> 
> 标签：javascript, node.js

我在一些应该很明显的事情上遇到了麻烦。我似乎无法在节点中删除我的对象的属性。这是在咖啡脚本中，但我认为这无关紧要。

```
console.log doc
delete doc.password
console.log doc 
```

回报：

```
{ firstname: 'Andrew',
  lastname: 'Plummer',
  email: 'andrew@stackoverflow...',
  password: 'blahblah',
  _id: 5014c0a6af36bdaf03000001,
  comments: [],
  posts: [] }

{ firstname: 'Andrew',
  lastname: 'Plummer',
  email: 'andrew@stackoverflow...',
  password: 'blahblah',
  _id: 5014c0a6af36bdaf03000001,
  comments: [],
  posts: [] } 
```

对于如此看似显而易见的事情，我实际上已经在 stackoverflow 周围搜索并搜索了大约半小时。对不起，如果我仍然错过了重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:14:44.737

Frédéric 在评论中给出的答案（所以我不能将其标记为真）是我的对象需要显式转换为一个新对象，因为它的删除被禁用。节点中的猫鼬 ODM 模型就是这种情况。

# c# - 在页面中的任何回发之前找到一个 radGrid 或 Div 的客户端事件

> ID：11707212
> 
> 赞同：0
> 
> 时间：2012-07-29T06:34:07.440
> 
> 标签：c#, javascript, asp.net, telerik

我的页面中有一个自定义的 radgrid，一些脚本已为 ongriddestroyed 事件设置。我的脚本在页面中获取所有控件及其值，并使用 Ajax 将它们发送到服务器端。考虑页面上的按钮也会导致回发，但我希望我的 javascript 代码在任何回发页面之前触发。我尝试了 window.onbeforeunload ，它工作正常，直到我使用 radajaxpanel 或页面上的更新面板...在我可以为我的 radGrid 或其作为 div 元素的父级设置的任何回发之前触发任何 javascript 事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:05:58.930

Telerik 控制套件的 ASP.Net Ajax`RadAjaxManager`组件提供了一个客户端事件处理程序，称为`OnRequestStart`. `OnRequestStart`当一个 ajax 请求被启动时被调用

1.  在 RadAjaxManager 中配置的控件
2.  RadAjaxPanel 中的控件
3.  客户端 ajaxRequest() 调用

因此，`OnRequestStart`处理程序是在执行 AJAX 请求之前执行客户端脚本的好地方（例如，由 内的控件触发`RadAjaxPanel`）。

您还可以在`OnRequestStart`处理程序中取消 AJAX 请求。

有关详细信息，请参阅有关此主题的[telerik 在线帮助。](http://www.telerik.com/help/aspnet-ajax/ajax-onrequeststart.html)您还将在那里找到一个示例。

# email - 如何使用pop3解码雅虎邮件utf内容

> ID：11707214
> 
> 赞同：1
> 
> 时间：2012-07-29T06:35:26.757
> 
> 标签：email, yahoo, decode, pop3

我收到带有 pop3 的电子邮件内容，但是对于 utf（波斯语）内容编码！

如何解码？

```
<div style=3D"color:#000; background-color:#fff; font-family:ti= mes new roman, new york, times, serif;font-size:12pt"><div>=D8=A8=D8=A7 =D8= =B3=D9=84=D8=A7=D9=85<br>=0A=D8=AF=D8=A7=D9=85=D9=86=D9=87 =D9=88=D8=A8=D8= =B3=D8=A7=DB=8C=D8=AA =D9=85=D9=86 aspek.ir =D9=87=D8=B3=D8=AA=D8=B4 =D9=88= aspek.info =D8=B1=D9=88 =D8=B1=D9=88=D8=B4 =D9=BE=D8=A7=D8=B1=DA=A9 =DA= =A9=D8=B1=D8=AF=D9=85<br>=0A=D8=A7=D9=85=D8=A7 =D8=A7=D9=85=D8=B1=D9=88=D8= =B2 =D8=AF=DB=8C=D8=AF=D9=85 =DB=8C=DA=A9 =D8=B4=D8=B1=DA=A9=D8=AA=DB=8C = =D8=B2=DB=8C=D8=B1 =D8=B4=D8=A7=D8=AE=D9=87 =D9=87=D8=A7=DB=8C =D9=88=D8=A8= =D8=B3=D8=A7=DB=8C=D8=AA =D9=85=D9=86 =D8=B1=D9=88 =D9=85=D8=AB=D9=84=D8=A7= =D9=8B =D8=A8=D8=B5=D9=88=D8=B1=D8=AA:<br>=0A<br>=0Aaspek.info/contact.html= <br>=0A=D8=AB=D8=A8=D8=AA =DA=A9=D8=B1=D8=AF=D9=87<br>=0A=D9=85=DB=8C=D8=AE= =D9=88=D8=A7=D8=B3=D8=AA=D9=85 =D8=A8=D8=A8=DB=8C=D9=86=D9=85 =DA=86=D8=B7= =D9=88=D8=B1=DB=8C =DA=86=D9=86=DB=8C=D9=86 =DA=86=DB=8C=D8=B2=DB=8C =D9=85= =D9=85=DA=A9=D9=86=D9=87=D8=9F<br>=0A=D8=A8=D8=A7 =D8=AA=D8=B4=DA=A9=D8=B1= =0A=09=09=09=09=09=0A=09=09=09=09=09</div></div> 
```

# jboss7.x - JBoss 7.1 starting slow

> ID：11707215
> 
> 赞同：0
> 
> 时间：2012-07-29T06:35:55.473
> 
> 标签：jboss7.x

I'm using JBoss 7.1 with Eclipse. For my application I need to change `localhost` in properties of JBoss to `0.0.0.0`. After I changed that my server starting about 5-6 min, but in `localhost` mode it takes a few seconds. What did I do wrong?

![enter image description here](../Images/e5f4070cff3cac3899a48675a8308a17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:13:06.110

Don't change the host name to an IP address. JBoss AS 7 will try to resolve that in the domain name system. The resulting failures/timeouts will be causing the issues you're seeing - and others too.

If your intention was to allow connections from computers other than the one you are on, you should instead check the "Listen on all interfaces to allow remote web connections" box - you can see it there on your screenshot. See also [this JBoss Community post](https://community.jboss.org/message/614897).

If you genuinely need to change the host name, define a valid hostname with a valid IP address in the domain name system or in `/etc/host` (if you're on a *nix operating system) then use that name in the JBoss configuration. Do not use an IP address, an IP address is not a host name.

# xquery - 向后迭代 XQuery 序列

> ID：11707216
> 
> 赞同：1
> 
> 时间：2012-07-29T06:35:57.103
> 
> 标签：xquery

为什么

```
 for $i in (0 to 3)
      return element color {"red"} 
```

返回

```
<color>red</color>
<color>red</color>
<color>red</color>
<color>red</color> 
```

但颠倒迭代顺序

```
 for $i in (3 to 0)
      return element color {"red"} 
```

什么都不返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:04:15.310

(0 到 3) 返回 xs 的序列：整数 0 到 3

...但是 (3 to 0) 返回空序列！（所以它在你的第二个例子中迭代零次）

ps xquery 人们说“数组”的“序列”：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:00:44.560

根据**[XPath 2.0 W3C 规范](http://www.w3.org/TR/xpath20/#doc-xpath-RangeExpr)**：

> "*范围表达式可用于构造连续整数序列。to 运算符的每个操作数都被转换为好像是具有预期参数类型 xs:integer? 的函数的参数。如果任一操作数为空序列，或者如果从第一个操作数派生的整数大于从第二个操作数派生的整数，则范围表达式的结果是空序列*"

**你可以简单地使用这样的东西**：

```
for $i in (0 to 3)
 return color[4 - $i] 
```

# php - 在 php 和 jquery 中添加行时出错？

> ID：11707220
> 
> 赞同：1
> 
> 时间：2012-07-29T06:36:18.813
> 
> 标签：php, jquery

```
<a class="checkModelButton" href="addrow.php">ADD ROW</a>
<table>
   <thead>
       <th>Name</th> 
   </thead>
   <tboby id="model_row">
       <tr>Nokia N70</tr>
   </tbody>
</table> 
```

和 jQuery：

```
jQuery('.checkModelButton').click(function(){
   var url = jQuery(this).attr('href');
   jQuery.ajax({
      type:'get',
      cache: false,
      url: url,
      success: function(html){
         jQuery('#model_row').html(html);
      }  
   });
}); 
```

在文件 addrow.php

```
<tr>Nokia N71</tr> 
```

当我点击一个标签时，结果是：

```
 <table>
       <thead>
           <th>Name</th> 
       </thead>
       <tboby id="model_row">
           <tr>Nokia N71</tr>
       </tbody>
    </table> 
```

如何修复它的结果是：

```
 <table>
       <thead>
           <th>Name</th> 
       </thead>
       <tboby id="model_row">
           <tr>Nokia N70</tr>
           <tr>Nokia N71</tr>
       </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T06:39:59.033

使用`.append()`OR`.appendTo()`代替`.html()`

像

```
success: function(html){
         jQuery('#model_row').append(html);
      } 
```

或者

```
 success: function(html){
             jQuery(html).appendTo('#model_row');
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:37:56.177

使用`.html()`将覆盖内容。

您需要附加它。

```
$('#model_row').append(html); 
```

# c# - 非管理员用户的远程注册表访问被拒绝

> ID：11707243
> 
> 赞同：1
> 
> 时间：2012-07-29T06:40:22.903
> 
> 标签：c#, windows, registry, registrykey

我正在尝试使用已获得远程计算机上注册表项访问权限的非管理员用户打开远程注册表项。

```
remoteKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, hostname); 
```

我正进入（状态

> 不允许请求的注册表访问。在 System.ThrowHelper.ThrowSecurityException(ExceptionResource 资源) 在 Microsoft.Win32.RegistryKey.OpenSubKey(String name, Boolean writable) 在 Microsoft.Win32.RegistryKey.OpenSubKey(String name) 在 RemoteRegistry.Program.Main(String[] args)

非管理员用户是否可以从任何其他机器远程访问 HKLM 配置单元？另一方面，对于管理员用户，它工作正常。

所有其他蜂巢都可以访问，上述行不会导致任何异常。

任何指针可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:44:30.913

默认情况下，只有管理员可以远程访问注册表的大部分内容。[您可以通过更改winreg 注册表项](http://technet.microsoft.com/en-us/library/cc959389.aspx)的权限来授予其他用户访问权限。

还有一个组策略设置（在计算机配置 - Windows 设置 - 安全设置 - 本地策略 - 安全选项 - 网络访问下）允许远程访问所有经过身份验证的用户的特定注册表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:46:48.180

检查这些级别：

1.  默认域安全设置适用于域中的所有系统/用户，除非正在使用阻止继承等

2.  默认域控制安全设置 - 仅适用于 DC

3.  本地计算机策略 - 是本地计算机上的设置

# ruby - 从复杂的方法链中获取父实例化对象？

> ID：11707245
> 
> 赞同：1
> 
> 时间：2012-07-29T06:40:41.577
> 
> 标签：ruby, class, object

原谅人为的例子，如果我有......

```
class Condiment
  def ketchup(quantity)
    puts "adding #{quantity} of ketchup!"
  end
end

class OverpricedStadiumSnack
  def add
    Condiment.new
  end
end

hotdog = OverpricedStadiumSnack.new 
```

...调用时是否可以从内部访问`hotdog`实例化对象？`Condiment#ketchup``hotdog.add.ketchup('tons!')`

* * *

到目前为止，我发现的唯一解决方案是`hotdog`显式传递，如下所示：

```
class Condiment
  def ketchup(quantity, snack)
    puts "adding #{quantity} of ketchup to your #{snack.type}!"
  end
end

class OverpricedStadiumSnack
  attr_accessor :type

  def add
    Condiment.new
  end
end

hotdog = OverpricedStadiumSnack.new
hotdog.type = 'hotdog'

# call with
hotdog.add.ketchup('tons!', hotdog) 
```

...但我希望能够在不`hotdog`明确传递的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:52:47.980

或许：

```
class Condiment
  def initialize(snack)
    @snack = snack
  end

  def ketchup(quantity)
    puts "adding #{quantity} of ketchup! to your #{@snack.type}"
  end
end

class OverpricedStadiumSnack
  attr_accessor :type

  def add
    Condiment.new(self)
  end
end

hotdog = OverpricedStadiumSnack.new
hotdog.type = 'hotdog'
hotdog.add.ketchup(1) 
```

# c++ - 获取从根到叶节点的所有路径

> ID：11707248
> 
> 赞同：1
> 
> 时间：2012-07-29T06:41:17.107
> 
> 标签：c++, data-structures, tree, binary-tree

```
 a
        /    \ 
       a       a
      / \     /  \
     a   c    a   f 
    / \      / \ 
   b   d    e   g 
```

我有一棵看起来像上面的树，由链接结构表示：

```
 class Node
    {
       Node* leftChild; 
       Node* rightChild; 
       char data;
    }

class Tree
{
   Node* root;
} 
```

我的目标是找到从根到叶节点的所有路径。

我的树遍历算法如下所示：

```
 void inorder()
  {
    in(root);
  }

  void in(CharNode* currentNode)
  {
    if(currentNode)
      {   
        in(currentNode->leftChild);
        cout << currentNode->data << endl;
        in(currentNode->rightChild);
      }   
  } 
```

当我运行它时，我很肯定树正在构建，如图所示。我已经测试过了。但是，我无法弄清楚为什么我的树遍历分段错误。

我得到的输出是：

```
b

Segmentation fault. 
```

我已经在高度较小的树上对其进行了测试，并且可以正常工作。但是由于某种原因，它不适用于高度大于 2 的树。我认为这棵树出了问题，我已经检查并打印了每个父母，左孩子和右孩子，他们打印出来如图所示. 所以肯定是遍历算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T06:45:48.500

在构建树时，请务必在节点上将 leftChild 和 rightChild 初始化为 NULL (0)。这对于叶节点和缺少 leftChild 或 rightChild 的节点至关重要。

```
class Node
      : leftChild(0)
      , rightChild(0)
      , data(0)
{
   Node* leftChild; 
   Node* rightChild; 
   char data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T06:48:01.743

```
/* 
** Binary Tree Problems 
** Printing all Root to Leaf paths in a Binary Tree
*/

# include <stdio.h>
# include <stdlib.h>

# define SIZE 20
# define MAX(A,B) A>B?A:B;

typedef struct BinaryTree
{
    int data;
    struct BinaryTree *left;
    struct BinaryTree *right;
}BST;

int A[SIZE]={10,12,15,17,8,18,9,3,11,14,2,1,16,10};
int no_of_nodes=14;

BST* newNode(int data)
{
    BST *node;

    node=(BST *)malloc(sizeof(BST));
    if(!node)
      return NULL;

    node->data = data;
    node->left=NULL;
    node->right=NULL;

    return node;
}

BST *Insert(BST *root,int d,int l)
{
    if(root==NULL)
      return(newNode(d));

    else
    {
        if(d < root->data)
           root->left=Insert(root->left,d,++l);
        else
           root->right=Insert(root->right,d,++l);

        return(root);
    }   
}

BST* CreateTree(BST *root1)
{
    int i=0;

    for(i=0;i<no_of_nodes;i++)
    {
      root1=Insert(root1,A[i],1);
    }

    return(root1);
}

void Inorder(BST *root1)
{
    if(root1==NULL)
        return;

    Inorder(root1->left);
    printf(" %3d ", root1->data);
    Inorder(root1->right);
}

void Preorder(BST *root1)
{
    if(root1==NULL)
        return;

    printf(" %3d ", root1->data);
    Preorder(root1->left);
    Preorder(root1->right);
}

void PrintArr(int *arr,int len)
{
    static int pathNo=0;
    int i;

    printf("\nPath %d ->",++pathNo);

    for(i=0;i<len;i++)
        printf(" %d ",arr[i]);

    return;
}

void PrintR2LPaths(BST *root,int pathArr[],int pathLen)
{
    if(root==NULL)
      return;

    pathArr[pathLen]=root->data;
    pathLen++;

    if(root->left==NULL && root->right==NULL)
    {
        PrintArr(pathArr,pathLen);
        return;
    }
    else
    {
        PrintR2LPaths(root->left,pathArr,pathLen);
        PrintR2LPaths(root->right,pathArr,pathLen);
    }
}

int main()
{
    int result=0;
    BST *root1=NULL;
    int pathArr[SIZE];

    root1=CreateTree(root1);

    printf("\n\n---------------------------------------------------\n");

    printf("\n\nPreorder Traversal of Tree : ");
    Preorder(root1);

    printf("\n\nInorder Traversal of Tree  : ");
    Inorder(root1);

    printf("\n\n---------------------------------------------------\n");

    printf("\nPrinting Paths\n\n");
    PrintR2LPaths(root1,pathArr,0);

    printf("\n\n---------------------------------------------------\n");
    getchar();

    return(0);
} 
```

# ios - 检测 UIView 中的对角滑动手势

> ID：11707257
> 
> 赞同：4
> 
> 时间：2012-07-29T06:43:39.857
> 
> 标签：ios, swipe

我想检测从屏幕右下角开始到中间的两指对角线滑动。我尝试添加 UISwipeGestureRecognizer ，其方向设置为“UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionLeft”，但由于处理程序被调用，即使我从屏幕中间开始滑动到左上角也没有任何效果。

我需要子类 UIGestureRecognizer 还是可以使用 touchesBegan 和 touchesMoved 处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:00:33.457

原因的touches方法可以做每一个Gesture，从ios3.2开始支持Gesture。我可以给你一个简单的代码，你可以自己修改。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    isTwoFingersBegin = NO;
    isTwoFingersEnd = NO;
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
    if ([touches count] == 2)
    {
        isTwoFingersBegin = YES;
    }

    touchStartPoint = [touch locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    isSwip = YES;
}
#define TOUCH_MOVE_EFFECT_DIST 30
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{   
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
    touchEndPoint = [touch locationInView:self.view];
    if ([touches count] == 2)
    {
        isTwoFingersEnd = YES;
    }
    CGPoint deltaVector = CGPointMake(touchEndPoint.x - touchStartPoint.x, touchEndPoint.y - touchStartPoint.y);

    if (fabsf(deltaVector.x) > TOUCH_MOVE_EFFECT_DIST
                &&fabsf(deltaVector.y) > TOUCH_MOVE_EFFECT_DIST
                && isSwip &&isTwoFingersBegin&&isTwoFingersEnd) {
                theSwipGesture=RightUpGesture;
            }
    else if (fabsf(deltaVector.x) <- TOUCH_MOVE_EFFECT_DIST
                && fabsf(deltaVector.y) <- TOUCH_MOVE_EFFECT_DIST
                && isSwip&&isTwoFingersBegin&&isTwoFingersEnd) {
                theSwipGesture=LeftDownGesture;
            }

    isSwip = NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:01:42.360

无论如何`touchesBegan`，您需要将其子类化才能使用。`touchesMoved`我会按照`UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionLeft`你说的做，然后设置两个`CGRect`s，一个用于可接受的起点，一个用于可接受的终点。然后使用该`UIGestureRecognizerDelegate`方法`gestureRecognizer:shouldReceiveTouch:`，使用 . 检查触摸点是否在可接受的起始矩形内`CGRectContainsPoint()`。然后（我认为）在您的`UISwipeGestureRecognizer`子类中覆盖`touchesEnded:withEvent:`，并检查最终触摸是否在可接受的矩形中。如果不是，请将状态设置为`UIGestureRecognizerStateCancelled`（或者您应该取消手势）。还要确保它附加到的视图具有其`multipleTouchEnabled`属性集。我实际上还没有尝试过，但是应该这样做。祝你好运！

**编辑**

实际上，如果您不想担心可接受的起点/终点的特定 rect 值，并使其与设备无关，您可以这样做：

```
//swap in whatever percentage of the screen's width/height you want in place of ".75f"

//set the origin for acceptable start points
CGFloat startRect_x = self.view.frame.size.width * .75f;
CGFloat startRect_y = self.view.frame.size.height * .75f;

//set the size
CGFloat rectWidth = self.view.frame.size.width - startRect_x;
CGFloat rectHeight = self.view.frame.size.height - startRect_y;

//make the acceptable start point rect
CGRect startRect = CGRectMake(startRect_x, startRect_y, rectWidth, rectHeight);

//set the origin for the accepable end points
CGFloat endRect_x = self.view.center.x - rectWidth/2;
CGFloat endRect_y = self.view.center.y - rectHeight/2;

//make the acceptable end point rect
CGRect endRect = CGRectMake(endRect_x, endRect_y, rectWidth, rectHeight); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T15:03:17.213

你可以使用一个`UIPanGestureRecognizer`

```
- (void)viewPanned:(UIPanGestureRecognizer *)panGR
{
    CGPoint translation = [panGR translationInView:self];

    CGFloat threshold = self.bounds.size.width/2;

    // Detect
    Direction direction = DirectionUnknown;

    if (translation.x > threshold) {
        if (translation.y > threshold) {
            direction = DirectionBottomRight;
        } else if (translation.y < -threshold) {
            direction = DirectionTopRight;
        } else {
            direction = DirectionRight;
        }
    } else if (translation.x < -threshold) {
        if (translation.y > threshold) {
            direction = DirectionBottomLeft;
        } else if (translation.y < -threshold) {
            direction = DirectionTopLeft;
        } else {
            direction = DirectionLeft;
        }
    } else {
        if (translation.y > threshold) {
            direction = DirectionBottom;
        } else if (translation.y < -threshold) {
            direction = DirectionTop;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T06:58:25.410

一种可能的解决方案是在 iPhone 屏幕上绘制一组可能开始滑动的坐标，以及另一个可能结束滑动的坐标。然后在`touchesBegan:`and`touchesMoved:`方法中，您可以比较滑动的起点和终点，并确定它是否符合对角线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T07:13:00.327

多谢你们！

我最终在 touchesBegan、touchesMoved 和 touchesEnded 中编写了自定义代码，而其他工作就像魅力一样。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    if ([touches count] == 2) {
        CGPoint nowPoint = [[touches anyObject] locationInView:self];
        if( nowPoint.x >= ALLOWED_X)
            swipeUp = YES;
    }

    [super touchesBegan:touches withEvent:event];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];

    if ([touches count] == 2 && swipeUp) {

        CGPoint nowPoint = [[touches anyObject] locationInView:self];
        CGPoint prevPoint = [[touches anyObject] previousLocationInView:self];

        if( nowPoint.x <= prevPoint.x && nowPoint.y <= prevPoint.y){
        }
        else {
            swipeUp = NO;
        }
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];
    CGPoint nowPoint = [[touches anyObject] locationInView:self];

    if ([touches count] == 2 && swipeUp && nowPoint.x <= DELTA_X && nowPoint.y <= DELTA_Y) {
        NSLog(@"Invoke Method");
    }
    swipeUp = NO;
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];
    swipeUp = NO;
} 
```

# wpf - 如何为 Wpf DataGrid 使用模板？

> ID：11707265
> 
> 赞同：0
> 
> 时间：2012-07-29T06:45:16.680
> 
> 标签：wpf, templates, wpfdatagrid, contentpresenter

我有一个这样的数据网格模板：

```
<ControlTemplate TargetType="{x:Type DataGrid}" x:Key="zoomableControl">
    <ScrollViewer x:Name="scrollViewer" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <Grid  
            <ContentPresenter>
            </ContentPresenter>
            <Slider  Name="zoomSlider" Minimum="1" Maximum="100" Visibility="Hidden"/>
            <Grid.LayoutTransform>
                <ScaleTransform  ScaleX="{Binding Path=Value,ElementName=zoomSlider}" ScaleY="{Binding Path=Value,ElementName=zoomSlider}"/>
            </Grid.LayoutTransform>
        </Grid>
    </ScrollViewer>
</ControlTemplate> 
```

并像这样使用它：

```
 <DataGrid  Template="{StaticResource zoomableControl}"  ...> 
```

我想在模板内的 ScrollViewer 中显示数据网格，但它没有显示任何内容。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:28:55.537

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
        <ContentPresenter >
        </ContentPresenter>
        <Slider  Name="zoomSlider" Minimum="1" Maximum="100" Visibility="Hidden" Grid.Row="1"/>
        <Grid.LayoutTransform>
            <ScaleTransform  ScaleX="{Binding Path=Value,ElementName=zoomSlider}" ScaleY="{Binding Path=Value,ElementName=zoomSlider}"/>
        </Grid.LayoutTransform>
    </Grid> 
```

您的 ContentPresenter 和 Slider 在 Grid 的同一行中，因此 ContentPresenter 不会显示为 Slider 覆盖它。我希望这会有所帮助。

# javascript - 带有计时器的图像幻灯片放映，无需使用任何插件

> ID：11707268
> 
> 赞同：0
> 
> 时间：2012-07-29T06:45:50.703
> 
> 标签：javascript, jquery, html

我正在尝试在不使用任何插件的情况下创建一个 silde 表演。我需要一个定时器，它可以降低它的高度，并随着图像和定时器的变化而变化，也有一个点击事件。[https://store.sap.com/sap/cpa/repository/store/sapstore/US/default.html](https://store.sap.com/sap/cpa/repository/store/sapstore/US/default.html)。这是我正在尝试的。

**HTML**

```
<div id="panel">
  <img id="imageSlide" alt="" src="" width="250px" />
</div>

<div id="timer">
<a href="">
<span class="reduce_height">1</span> 
</a>

<a href="">
<span class="reduce_height">2</span> 
</a>

<a href="">
<span class="reduce_height">3</span> 
</a>

<a href="">
<span class="reduce_height">4</span> 
</a>

</div> 
```

**jQuery**

```
$(function() {

    var imgs = ['http://www.academy-florists.com/images/shop/thumbnails%5CValentines_Day_flowers.jpg', 'http://www.everythingbuttheprincess.com/assets/images/babies-in-bloom-fuchsia-flower_thumbnail.jpg', 'http://www.behok.ru/i/a/cat/gerbera.jpg', 'http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg', 'http://gameinfestedent.com/gallery_photo/medium_image/image1322820610_MainPurpleOrchids3_1a.jpg'];

    var maximages = imgs.length; //No of Images
    $(function() {
        setInterval(Slider, 3000);
    });
    var prevIndex = 0;

    function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
            var shuffleIndex = Math.floor(Math.random() * maximages);
            if (prevIndex == shuffleIndex) {
                while (prevIndex != shuffleIndex) {
                    shuffleIndex = Math.floor(Math.random() * maximages);
                }
            }
            $("#panel").fadeIn("slow").css('background', '#000');

            $(this).attr('src', imgs[shuffleIndex]).fadeIn("slow");
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:42:46.583

```
$(function() {

    var imgs = ['http://www.academy-florists.com/images/shop/thumbnails%5CValentines_Day_flowers.jpg', 'http://www.everythingbuttheprincess.com/assets/images/babies-in-bloom-fuchsia-flower_thumbnail.jpg', 'http://www.behok.ru/i/a/cat/gerbera.jpg', 'http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg', 'http://gameinfestedent.com/gallery_photo/medium_image/image1322820610_MainPurpleOrchids3_1a.jpg'];

   var maximages = imgs.length; //No of Images
   Slider();
   setInterval(Slider, 3000);
   var prevIndex = 0, prevPrevIndex = 0;

   function Slider() {
       $('#imageSlide').fadeOut("slow", function() {
           do {
               shuffleIndex = Math.floor(Math.random() * maximages);
           } while(prevIndex == shuffleIndex || prevPrevIndex == shuffleIndex)

           prevPrevIndex = prevIndex;
           prevIndex = shuffleIndex;

           $("#panel").fadeIn("slow").css('background', '#000');

           $(this).attr('src', imgs[shuffleIndex]).fadeIn("slow");
       });
   }

}); 
```

我放了`prevPrevIndex`这样图像重复次数减少））你可以删除它

# java - 通过 toString 将用户定义的对象转换为字符串未显示正确的输出

> ID：11707271
> 
> 赞同：0
> 
> 时间：2012-07-29T06:46:21.987
> 
> 标签：java, string, tostring, object-to-string

我创建了一个`CurrentDate`以特定格式显示系统日期的类（例如 29-JUN-12）。该类看起来像：

```
package getset;

import java.util.*;
import getset.Getset;
public class CurrentDate{
    public static void main(String[] args){
        Calendar cal = new GregorianCalendar();
        int month = cal.get(Calendar.MONTH);
        int year = cal.get(Calendar.YEAR);
        int day = cal.get(Calendar.DAY_OF_MONTH);

        String toyear=String.valueOf(year);
        String newyear=toyear.substring(2,4);
        String newmonth=monthvalidation(month);
        System.out.println("Current date : " + day + "-" + (newmonth) + "-" + newyear);
    }

    private static String monthvalidation(int initmonth) {
        // TODO Auto-generated method stub
        //int initmonth=i;
        String finalmonth="";
        if(initmonth==1)
        {
            finalmonth="JAN";
        }
        if(initmonth==2)
        {
            finalmonth="FEB";
        }
        if(initmonth==3)
        {
            finalmonth="MAR";
        }
        if(initmonth==4)
        {
            finalmonth="APR";
        }
        if(initmonth==5)
        {
            finalmonth="MAY";
        }
        if(initmonth==6)
        {
            finalmonth="JUN";
        }
        if(initmonth==7)
        {
            finalmonth="JUL";
        }
        if(initmonth==8)
        {
            finalmonth="AUG";
        }
        if(initmonth==9)
        {
            finalmonth="SEP";
        }
        if(initmonth==10)
        {
            finalmonth="OCT";
        }
        if(initmonth==11)
        {
            finalmonth="NOV";
        }
        if(initmonth==12)
        {
            finalmonth="DEC";
        }    
        return finalmonth;
    }
} 
```

现在，当我尝试使用它进行转换时，`toString()`它并没有显示出预期的结果。我试过：

```
CurrentDate date=new CurrentDate();
String sysdate=date.toString();
System.out.println(""+sysdate); 
```

它显示类似：`getset.CurrentDate@18a178a`这不是人类可读的预期格式。我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:50:57.423

在你的类中覆盖`toString`方法。添加如下方法。

```
@Override
public String toString() {

    return day + "-" + newmonth + "-" + newyear;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:51:37.267

您需要覆盖该[`toString`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)方法。

在你的`CurrentDate`课堂上，添加一些像

```
@Override
public String toString() {
    String toyear=String.valueOf(year);
    String newyear=toyear.substring(2,4);
    String newmonth=monthvalidation(month);
    return day + "-" + newmonth + "-" + newyear;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:51:46.363

您没有覆盖要测试您的方法的`Object`实现`toString()` ，您可以快速将您开发的逻辑放入`public String toString()`方法中。然后在您的`main`方法中，创建一个`CurrentDate`并打印`toString`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T07:34:15.537

我在您的代码中看到了问题。首先，您没有想要`toString()`表示的字段。我认为您需要声明以下字段：

```
int month;
int year ;
int day;
 @Override
public String toString() {
    return "CurrentDate [month=" + month + ", year=" + year + ", day="
            + day + "]";
} 
```

如果您使用的是 Eclipse IDE，只需生成`toString()`方法，这将是您问题的简单解决方案。现在，`toString()`为您的`toString()`. 事实上，正如乔什·布洛赫所说，

> 每个类都应该覆盖 toString() 以获得人类可读的格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T08:11:26.683

```
CurrentDate date=new CurrentDate();
String sysdate=date.toString();
System.out.println(""+sysdate);

In your above code you are using date object but not assigning  any value , only CurrentDate  class reference. so your are getting 'getset.CurrentDate@18a178a' when use toString() method.

If you want to format date to string you have to use 

public static final String DATE_FORMAT_NOW = "dd-MMM-yy";

SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT_NOW); 
```

# image - 使用 node.js 通过 http 发送图像

> ID：11707276
> 
> 赞同：0
> 
> 时间：2012-07-29T06:46:47.080
> 
> 标签：image, node.js, mime-types

我正在尝试使用 node.js 通过 HTTP 发送图像。

我可以发送 HTML、文本，但不能发送图像。

这是我正在尝试做的一个示例：

```
request(options, function(error, response, body) {
    http.createServer(function(req, res) {
        res.statusCode = response.statusCode;
        res.writeHead(res.statusCode, { 'Content-Type': response.headers['content-type'] });
        res.write(body);
        res.end();
    }
}); 
```

我得到的是： ![找不到图片](../Images/ce8fa5809f333af46e0e68b50361bf79.png)

当我尝试一个图标时也会发生同样的情况......

如果我`wget`得到正确的内容，我猜我的图像，但它也不会出现在图像查看器中......我不知道如何解决这个问题。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:02:29.343

确保`body`它是一个缓冲区，而不是图像的编码表示（除非它的编码方式使得普通浏览器可以在您发送适当的`Content-Encoding`标头时对其进行解码，在这种情况下，您应该（您猜对了！）发送适当的标题。

特别是，不要尝试使用`fs.*`您要求响应为 UTF-8 的方法读取图像，然后尝试将其“原始”发送。

# google-maps - JSON 格式的美国边界

> ID：11707281
> 
> 赞同：1
> 
> 时间：2012-07-29T06:47:28.363
> 
> 标签：google-maps, maps

你知道我如何以 json 格式找到州/县/城市的美国边界吗？

# android - 如何在自定义适配器内动态设置 ListView 高度 onClick？

> ID：11707284
> 
> 赞同：1
> 
> 时间：2012-07-29T06:48:06.633
> 
> 标签：android, listview, height

情况就是这样；我有一个带有自定义适配器的 ListView。每个列表项包括一个按钮和一个隐藏的 TextView(Visibility=GONE)。当我们单击按钮时，它会显示隐藏的文本视图。到目前为止，它可以完美运行。

问题是，当显示 TextView 时，ListView 的高度应该相应增加。我试着调整高度像..

```
list=(ListView)activity.findViewById(R.id.listView);
ViewGroup.LayoutParams l= lst.getLayoutParams();
l.height=l.height+150; //assuming the height of the TextView is 150
list.setLayoutParams(l); 
```

但它并不完美。我的意思是，高度增加了，但它与前面的部分混淆了。IE; 现在，当我单击按钮时，它不会显示相应的 TextView。它在其他一些 ListItem 中显示 TextView。

请帮我找到解决方案；谢谢。

![在此处输入图像描述](../Images/de6543e2c1c1ca75b0b1b8f7fa565190.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:35:28.570

与使用 View.Gone 不同，将可见性设置为 View.INVISIBLE。点击后，textview 应该设置为 View.VISIBLE。Gone 意味着 TextView 不应该保持布局。让我们看看[视图定义](http://developer.android.com/reference/android/view/View.html)

你能发送listview，xml文件吗？

# c# - C#中类型信息的存储

> ID：11707287
> 
> 赞同：0
> 
> 时间：2012-07-29T06:49:24.247
> 
> 标签：c#

我听说 C# 存储变量的类型信息，包括变量的值。

我的问题是，如果我使用`List<>`or`Dictionary<>`对象，其中包含的每个对象的类型信息存储，还是只存储一次？

我想在 的情况下`Generics`，它只有一次，而在 的情况下`ArrayList`，它适用于每个项目。不过，我想问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:55:15.920

如果从逻辑上考虑，运行时是否真的会为每个变量存储类型信息的副本以及变量本身？这将是非常浪费的！大多数应用程序可能有几百个类型（即类），但有数千个类型实例。

运行时当然知道每个变量的类型，但这并不意味着每个变量都带有自己的所需类型信息的副本。考虑到这一点，不需要特殊的字典或集合类，它们只是引用的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:47:14.420

根据 MSDN [List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)表示对象的强类型列表

使用`List<T>`构造函数时，它会创建一个`list of T`具有默认容量的

# c - 如何在C中定义结构数组？

> ID：11707289
> 
> 赞同：-2
> 
> 时间：2012-07-29T06:49:37.787
> 
> 标签：c, arrays, pointers, struct

我有这个结构：

```
typedef struct xmlelem{
Char         *Element_name;
Char         *Element_Text;  
pAttr_Element    attr_arr[M];
Xml_Element     *parent;
Xml_Element     *children[N];
Int         depth;
Int         num_of_children;
Int         num_of_attr;
}Xml_Element,*pXml_Element 
```

我想知道`children`和`attr_arr`。对于- 它是指向每个单元格来自 type还是来自 type`attr_arr`的数组的指针？如何确定单元格是指针还是结构本身？我如何定义它们？我有点迷路了。。`pAttr_Element``attr_Element`

抱歉 - 这是 pAttr_Element：

```
 typedef struct {
   char *name;
   char *value;
 }Attr_Element,*pAttr_Element 
```

另一个编辑，试图更清楚

感谢这里的人，我明白这是一个数组，其中每个单元格都是 pAttr_Element 类型的指针。

我现在也明白声明： Attr_Element[10] 是一个数组，其中每个单元格都是我的结构的类型

唯一缺少的是我如何定义一个指向数组的指针，其中每个单元格都来自 Attr_Element 类型？而不是指针

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:58:07.510

在这里，我假设`attr_Element`是结构，并且`pAttr_Element`是指向该结构的指针类型的 typedef。

`typdef atr_Element* pAttr_Element;`

在这种情况下，`pAttr_Element attr_arr[M];`attr_arr 的每个元素都是指向 的指针变量`attr_Element`。这意味着`attr_arr`是一个类型的指针数组`attr_Element`

如果要定义类型的元素数组，请`attr_Element`直接使用该类型，如下所示

```
#define SIZE_OF_ELEM 20

struct attr_Element attr_arr[SIZE_OF_ELEM]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:00:47.043

如果 pAttr_Element 是指向 Attr_Element 的指针，则 attr_arr 是指向 Attr_Element 的 M 个指针的数组。

换句话说，attr_arr[0] 是 pAttr_Element 类型，attr_arr[0]->name 是 char*，attr_arr[0]->name[0] 是 char。

# php - 使用 php 更新 mongodb 中的嵌入文档

> ID：11707290
> 
> 赞同：0
> 
> 时间：2012-07-29T06:50:25.503
> 
> 标签：php, mongodb

我正在制作一个博客网站，所以我使用 MongoDB 作为我的数据库。在我的集合“文章”中，我有 1 个名为帖子的嵌入式文档，我想再插入 1 个嵌入式文档。对其发表评论。

D B：

```
 {
    "_id": ObjectId("4f41a5c7c32810e404000000"),
    "username":"abc",
    "posts": [
    {
        "_id": 1,
        "content": "dskcnkdcnksldcnskcd",
        "title" : "test1"
    },
    {"_id": 2,
        "content": "dskcsdsl;d,cl;sdcl;sdmcnkdcnksldcnskcd",
        "title" : "test2"
    },
   ]
} 
```

我想在帖子中插入评论。

```
 {
    "_id": ObjectId("4f41a5c7c32810e404000000"),
    "username":"abc",
    "posts": [
    {
        "_id": 1,
        "content": "dskcnkdcnksldcnskcd",
        "title" : "test1",
     "comments":[
    {
      "content": "usdhcjsdcjskd",
      "by" : "abc"
    }
    ]
    },
    {"_id": 2,
        "content": "dskcsdsl;d,cl;sdcl;sdmcnkdcnksldcnskcd",
        "title" : "test2"
    }
   ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:54:33.907

评论实际上是您文档中帖子的嵌入式文档，因此您需要将查询稍微更改为：

```
$collection->update(array('_id' => new MongoId($bid),'posts.id'=> $pid),array('$push' => array('posts.$.comments' => $comment))); 
```

试试看。

请注意我是如何使用位置运算符的？您可以在这里阅读更多信息：[http ://www.mongodb.org/display/DOCS/Updating/#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating/#Updating-The%24positionaloperator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T13:47:21.187

你需要注意的是你第一次插入的结构。例如，您有一些用户有一些列表，您想让他拥有最多 5 个列表。这是您可以使用 PHP 执行此操作的方法：

1.  如果本地服务器上的 PHP 环境中没有 mongodb 扩展，则需要安装它

2.  您需要安装 mongodb 并运行它。

完成所有这些之后，您可以像这样轻松地做到这一点：

```
$m = new Mongo("mongodb://localhost");
$db = $m->statistic->list;

// statistic is my database and list are collection.

$list =
        array(
            '_id' => 18,
            'lists' =>
            array(
                array(
                    'name' => 'Magento and PHP developer',
                    'recipients' =>
                    array(
                        'name' => 'Kristijan Glibo',
                        'email' => 'glibo.kristijan@gmail.com'
                    ),
                    'count' => 12345),
        )); 
```

你可以在这里看到我使用了一些 (int)18 作为我的 _id。如果你不指定它，Mongo 会生成它。我这样使用它只是为了测试目的。请注意，**列表**是**数组**，其中的每个**列表**也是带有自己数据的**数组！**我的名单**Magento 和 PHP 开发人员**有关于收件人和计数的数据。收件人也有一些独特的数据。

让我们先插入到我们的 Mongodb 中：

```
$document = $db->insert($list); 
```

如果我们现在转储集合以检查我们在其中保存的内容，我们将得到：

注意：要获取您的收藏和其中的所有内容，您可以使用以下代码：

```
$documents = $db->find();
echo '<pre>';
foreach ($documents as $doc) {
    var_dump($doc);
}die(); 
```

**************************这是转储的数据**************************

```
["_id"]=>
  int(18)
  ["lists"]=>
  array(3) {
    [0]=>
    array(3) {
      ["name"]=>
      string(10) "Magento and PHP developer"
      ["recipients"]=>
      array(2) {
        ["name"]=>
        string(4) "Kristijan Glibo"
        ["email"]=>
        string(25) "glibo.kristijan@gmail.com"
      }
      ["count"]=>
      int(12345)
    } 
```

现在让我们更新我们的用户并为他添加更多列表：

```
$updatelist = array('name' => 'updatelist', 'recipients' => array(),'count'=>2876);
$documentupdate = $db->
update(
array('_id'=>18),
array('$addToSet' => array('lists'=> $updatelist))); 
```

您通过 selectin _id => 18 告诉他要更新哪个对象以及如何更新。我对此进行测试，如果该列表不存在，它将添加新列表。如果存在，它将跳过它。

希望这可以帮助！

# jquery - jQuery：将变量传递给动态创建的 DOM 元素的点击处理程序

> ID：11707293
> 
> 赞同：2
> 
> 时间：2012-07-29T06:51:25.227
> 
> 标签：jquery, variables, click, selector, dynamically-generated

我正在尝试通过以下方式将事件处理程序附加到动态创建的 DOM 元素：

```
var createdElement = $('<a>', {
    click: function (data) {
        alert("click");
    }
}); 
```

这按预期工作，但现在我想将一个变量传递给 click 函数。谁能建议如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:34:00.897

代码悖论的答案在一般情况下有效，但总是将相同的值传递给`click`处理程序，而不管它`<a>`被触发的元素是什么。

如果您希望该值取决于单击的元素，则可以在元素本身上调用[on() ：](http://api.jquery.com/on)

```
var createdElement = $("<a>").on("click", {
    yourData: "something"
}, function(event) {
    alert("Data is " + event.data.yourData);
}).appendTo("body"); 
```

但是，上面的代码使用的语法与您问题中的语法不同。如果您想继续`click`在属性/事件映射中定义处理程序，您可以使用[data()](http://api.jquery.com/data/)将值与元素一劳永逸地关联起来：

```
var createdElement = $("<a>", {
    click: function() {
        alert("Data is " + $(this).data("yourData"));
    }
}).data("yourData", "something").appendTo("body"); 
```

（请注意，我添加了对 的调用，`appendTo("body")`因此新元素成为 DOM 的一部分，并且`click`事件有机会被触发。如果您稍后在代码中将元素添加到 DOM，请随意忽略这一点。）

# mysql - 更快地导入大型数据库

> ID：11707298
> 
> 赞同：0
> 
> 时间：2012-07-29T06:51:53.603
> 
> 标签：mysql, import, processlist, dbimport

我目前正在导入一个大型数据库：8GB，最大的表有 4000 万行。

导入需要几个小时。

我正在使用以下命令导入：`mysql -u root -p db < db.qsl`

当我这样做时：`SHOW PROCESSLIST;`只有在查询中。

有什么方法可以提高效率并同时进行更多插入吗？

（我在 16GB 内存服务器上运行，现在我知道我应该提供什么）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:00:17.773

你最好使用[SQLyog](http://www.webyog.com/en/)。这是一个非常有效的导入数据的软件 - 大小不是问题。

# apache - 您可以更改特定目录的 DirectoryIndex 吗？

> ID：11707303
> 
> 赞同：1
> 
> 时间：2012-07-29T06:52:42.043
> 
> 标签：apache, .htaccess, directoryindex

我知道您可以`DirectoryIndex example.html`在 .htaccess 中使用，但我需要更改特定目录的索引，如下所示：

```
DirectoryIndex /ex/index_file.html 
```

或者

```
DirectoryIndex /ex2/index_file2.html 
```

有没有办法可以做到这一点？我不想将我正在尝试执行此操作的文件重命名为 index.html，因为它不是这样的。您需要先登录，如果不是，它将重定向您；但我认为这看起来很草率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:05:25.683

您可以在每个需要不同目录索引的目录中创建一个 .htaccess。目录中的 .htaccess`ex`应包含：

```
DirectoryIndex index_file.html 
```

但是 on in`ex2`应该包含：

```
DirectoryIndex index_file2.html 
```

[`<Directory>`](http://httpd.apache.org/docs/current/mod/core.html#directory)只要您被允许覆盖它，您也可以在您的 Web 根目录中的 .htaccess 中使用：

```
<Directory ex>
   DirectoryIndex index_file.html
</Directory>

<Directory ex2>
    DirectoryIndex index_file2.html
</Directory> 
```

# xml - 在记事本++中将指定文本添加到其他行

> ID：11707305
> 
> 赞同：0
> 
> 时间：2012-07-29T06:53:05.373
> 
> 标签：xml

您好，我在 xml 中有这些行，因为有很多行我将只显示几个项目。

```
 <client_title>
    <id>1</id>
    <name>light_title01</name></client_title>
  <client_title>
    <id>2</id>
    <name>light_title02</name></client_title>
  <client_title>
    <id>3</id>
    <name>light_title03</name></client_title>
  <client_title> 
```

但我希望每个`</client_title>`人都下去，所以有类似的东西

```
 <client_title>
    <id>1</id>
    <name>light_title01</name>
  </client_title>
  <client_title>
    <id>2</id>
    <name>light_title02</name>
  </client_title>
  <client_title>
    <id>3</id>
    <name>light_title03</name>
  </client_title>
  <client_title> 
```

有任何命令或搜索表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:55:26.903

我不确定您的问题是否在正确的位置，但这应该会有所帮助。

选择`ReplaceAll`菜单并`Extended`从底部选择搜索模式。然后替换`</name>`为`</name>\r\n`

# javascript - 使用ajax将选定的选项作为数组传递

> ID：11707309
> 
> 赞同：0
> 
> 时间：2012-07-29T06:53:58.537
> 
> 标签：javascript, ajax

我有一个联系人列表如下：

```
<div class="contacts_list_data_contacts" id="contactlist">
<div class="contacts_checkbox_01"><input name="contact_id[]" id="contact_id" type="checkbox"  value="28383" style="margin-top:0px ; margin-left:-3px;" /></div>
<div class="contacts_firstname_01_contacts">Michael</div>                                 
<div class="ncontacts_mobile_nmbr_01">+44515665544</div>
</div>

<div class="contacts_list_data_contacts" id="contactlist">
<div class="contacts_checkbox_01"><input name="contact_id[]" id="contact_id" type="checkbox"  value="28383" style="margin-top:0px ; margin-left:-3px;" /></div>
<div class="contacts_firstname_01_contacts">Katherine</div>                                 
<div class="ncontacts_mobile_nmbr_01">+30589746621</div>
</div> 
```

它看起来像这样：

```
Firstname     MobileNumber
===========================
Michael       +44515665544
Katherine     +30589746621 
```

我正在使用 ajax 请求删除联系人

```
contact_id=document.getElementById('contact_id_ajax').value;
    xmlHttp.open("POST","?action=ajaxcontact&todo=DeleteContact&contact_id=" +contact_id ,true); 
```

使用以下功能，我可以通过勾选复选框一次只获得一个联系人。当我选择所有联系人并将它们传递给ajax请求时，我不知道如何传递所有联系人。

```
<Script>
var field;
        function get_contact(field)
        {
            for (i = 0; i < field.length; i++)

            if(field[i].checked)
             document.getElementById("contact_id_ajax").value=field[i].value;
        }
</Script> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:23:08.773

第一件事，第一件事。您有很多地方使用相同的元素 ID。这确实是非常糟糕的做法。如果您想要一种方法来识别类似项目的集合，请使用类（您已经拥有 - 只需摆脱 id 或获取唯一的）。

现在，如果您像这样在复选框中添加一个类 -

```
<input name="contact_id[]" class="contact_id" type="checkbox"  value="28383" style="margin-top:0px ; margin-left:-3px;" /> 
```

然后在您的`getContacts`函数中，您可以跳过参数并使用 -

```
function getContacts(){
    var contacts = document.getElementByClassName('contact_id'), ids = [];
    for (var i = 0; i < contacts.length; i += 1){
        if (contacts[i].checked)
             ids.push(contacts[i].value);
    }
    return ids;
} 
```

现在，当您想要联系人列表时 -

```
var contacts = getContacts(); //array of contact ids
//This array can now be used in your ajax request 
```

# linux - 根据第一个字段连接 2 行

> ID：11707313
> 
> 赞同：0
> 
> 时间：2012-07-29T06:54:56.333
> 
> 标签：linux

嗨，我在一个文件中有这样的东西

```
12345   aaaaaaaaaabbbbbbbbbb 
23456   bbcbcbbgyhuhuhhhhhhh 
12345   7ijkunmmnniiiiiiii
23456   bbcbcbbgyhuhsdrfrrhhhv 
```

我想根据第一个将行合并为一行

领域，即，

```
12345   aaaaaaaaaabbbbbbbbbb 12345   7ijkunmmnniiiiiiii
23456 bbcbcbbgyhuhuhhhhhhv 23456   bbcbcbbgyhuhsdrfrrhh 
```

谁能让我知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:06:19.817

```
use strict;

open my $fh, '<your_file'
   or die "cant open file $!";

my %result; # result hash

# read file line by line
while (my $line = <$fh>) {
    chomp $line;

    # check format
    if ( $line =~ m/^(\d+)\s+(.*?)$/x ) {

        # add value to anonymous array in hash
        $result{$1} = [] unless exists $result{$1};
        push @{$result{$1}}, $2;
    }
}

# print result
while (my ($key, $values) = each %result) {

   printf "%s ", $key;
   for my $value (@$values) {

       printf "%s,", $value;
   }
}

close $fh; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:06:54.283

```
while (<DATA>) {
    ($x, $y) = split;
    push @{$lines{$x}}, $y;
}

while (($x, $y) = each %lines) {
    print "$x\t$_\t" for @{$y};
    print "\n";
}

__DATA__
12345   aaaaaaaaaabbbbbbbbbb 
23456   bbcbcbbgyhuhuhhhhhhh 
12345   7ijkunmmnniiiiiiii
23456   bbcbcbbgyhuhsdrfrrhhhv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:47:08.223

另一种`awk`选择：

```
awk '
  { A[$1] = A[$1] $0 " " } 
  END { for (k in A) print A[k] }' infile 
```

将每一行连接到一个关联数组，`$1`作为键。

# c# - 如何让这张图片的地图在邮件功能中运作良好？

> ID：11707324
> 
> 赞同：0
> 
> 时间：2012-07-29T06:56:57.453
> 
> 标签：c#, image, imagemap

我正在努力在将使用 C# Mail 功能发送的 HTML 邮件中获取此嵌入图像的地图。一切正常，系统发送电子邮件，图像显示在该电子邮件中，但没有任何映射。**你能帮我解决这个问题吗？**

***注意：图像上的映射区域应该是固定的，它不应该受到调整窗口大小等的影响。***

C# 邮件功能：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Send();
    }

    protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml, AlternateView av)
    {
        SmtpClient sc = new SmtpClient("Mail Address");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("test@mailAddress.com", "Test Sys.");

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            msg.AlternateViews.Add(av);
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void Send()
    {
        string connString = "Data Source=localhost;Initial Catalog=TestDB;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            string quizid = "";

            // Open DB connection.
            conn.Open();

            string cmdText = "SELECT MIN (QuizID) As mQuizID FROM dbo.QUIZ WHERE IsSent <> 1";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        // There is only 1 column, so just retrieve it using the ordinal position
                        quizid = reader["mQuizID"].ToString();

                    }
                }
                reader.Close();
            }

            string cmdText2 = "SELECT Username FROM dbo.employee";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(",");
                            }
                            // Just use the ordinal position for the user name since there is only 1 column
                            sbEmailAddresses.Append(sName).Append("@mailAddress.com");
                        }
                    }
                }
                reader.Close();
            }

            string cmdText3 = "UPDATE dbo.Quiz SET IsSent = 1 WHERE QuizId = @QuizID";
            using (SqlCommand cmd = new SqlCommand(cmdText3, conn))
            {
                // Add the parameter to the command
                var oParameter = cmd.Parameters.Add("@QuizID", SqlDbType.Int);

                var sEMailAddresses = sbEmailAddresses.ToString();
                string link = "<a href='http://localhost/test.aspx?testid=" + quizid + "'> Click here to participate </a>";
                string body = @"............................";

                body += "<map id =\"clickMap\" name=\"clickMap\"> " +
                     "<area shape =\"rect\" coords =\"752,394,1394,491\" href =" + link + " alt=\"Quiz\" /></map>";

                AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text.Html);
                LinkedResource lr = new LinkedResource(@"WelcomeMessage.png", MediaTypeNames.Image.Jpeg);
                lr.ContentId="image1";
                av.LinkedResources.Add(lr);

                int sendCount = 0;
                List<string> addressList = new List<string>(sEMailAddresses.Split(','));
                StringBuilder addressesToSend = new StringBuilder();

                if (!string.IsNullOrEmpty(quizid))
                {
                    for (int userIndex = 0; userIndex < addressList.Count; userIndex++)
                    {
                        sendCount++;
                        if (addressesToSend.Length > 0)
                            addressesToSend.Append(",");

                        addressesToSend.Append(addressList[userIndex]);
                        if (sendCount == 10 || userIndex == addressList.Count - 1)
                        {
                            SendEmail(addressesToSend.ToString(), "", "Notification", body, true, av);
                            addressesToSend.Clear();
                            sendCount = 0;
                        }
                    }

                    // Update the parameter for the current quiz
                    oParameter.Value = quizid;
                    // And execute the command
                    cmd.ExecuteNonQuery();
                }

            }
            conn.Close();
        }
    } 
```

****更新：* ***

最后，我可以让用户点击该部分。我现在想要的是使其固定位置，而不管窗口的大小。这意味着如果用户在小窗口或大窗口中打开电子邮件，则不会影响点击位置。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:18:55.960

尝试这个：

```
LinkedResource(Server.MapPath(".")  + (@"\images\WelcomeMessage.png", MediaTypeNames.Image.Jpeg); 
```

# triggers - 检测何时在触发器中克隆记录

> ID：11707328
> 
> 赞同：16
> 
> 时间：2012-07-29T06:57:45.423
> 
> 标签：triggers, salesforce, apex-code

有没有办法检测插入的记录是触发器中克隆操作的结果？

作为托管包的一部分，我想在克隆 Opportunity 和 OpportunityLineItem 记录时清除一些自定义字段。

或者触发器不是防止某些字段被克隆的正确位置？

我曾考虑创建专用代码来调用 sObject.Clone() 并排除不需要的字段。这似乎不是受管软件包的理想解决方案，因为它还会排除 Opportunity 上的任何其他自定义字段。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-09-13T15:22:28.810

在[Winter '16 版本](https://releasenotes.docs.salesforce.com/en-us/winter16/release-notes/rn_apex_new_classes_methods.htm)中，Apex 有两种新方法，可让您检测是否正在克隆记录以及来自哪个源记录 ID。您可以在触发器中使用它。

*   `isClone()`- 如果实体是从某物克隆的，则返回 true，即使该实体尚未保存。
*   `getCloneSourceId()`- 返回从中克隆对象的实体的 ID。

[https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_methods_system_sobject.htm#apex_System_SObject_getCloneSourceId](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_methods_system_sobject.htm#apex_System_SObject_getCloneSourceId)

[https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_methods_system_sobject.htm#apex_System_SObject_getCloneSourceId](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_methods_system_sobject.htm#apex_System_SObject_getCloneSourceId)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T22:10:46.157

一种方法（尽管有点笨拙）是创建一个新字段，例如 original_id__c，当记录的销售人员 ID 为空白时，该字段由工作流（或触发器，取决于您对[执行顺序的偏好）填充。](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#CSHID=apex_triggers_order_of_execution.htm%7CStartTopic=Content/apex_triggers_order_of_execution.htm%7CSkinName=webhelp)对于新记录，此字段将匹配标准 salesforce id，而对于克隆记录则不会。关于何时、如何以及用什么填充该字段有许多变化，但关键是给自己一个钩子来区分新记录和克隆记录。

如果您只想控制最终用户的体验（而不是扩展您的托管软件包的开发人员），您可以使用自定义页面覆盖标准克隆按钮，该页面使用[url hacking](http://www.interactiveties.com/b_button_override.php)清除字段子集的值。有一些注意事项，即对于单击克隆按钮的用户，该字段是可编辑的并且在页面布局上可见。在撰写本文时，我不相信您可以打包标准按钮覆盖，但列出了随着版本发布可能发生的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T09:08:46.180

您无法检测到触发器内的克隆操作。它被视为“插入”操作。

您仍然可以使用专用代码来调用 sObject.Clone() 并排除不需要的字段。您可以通过使用 sObject 描述信息来确保包含所有字段，以获取该对象的所有字段，然后排除不需要的字段。

希望这是有道理的！

阿努普

# iphone - （多线程？）结合 Pushing View Controller

> ID：11707329
> 
> 赞同：0
> 
> 时间：2012-07-29T06:57:56.867
> 
> 标签：iphone, objective-c, ios, multithreading

我正在为具有几百个级别的 iphone 创建一个游戏。当用户按下开始按钮时，这些都被加载到滚动视图中，以便他们可以选择一个级别。但是，我需要进行大量计算，从键控编码器加载每个级别的数据，并`UIImageView`在滚动视图上绘制一个，然后才能向用户显示屏幕。就像现在一样，这一切都是由我调用的方法完成的`viewDidLoad`，所以这一切都发生在视图控制器被推入堆栈之前。因此，当用户按下此按钮时，会有明显的延迟。

我希望立即推送视图控制器，然后在呈现视图控制器后让关卡自行布置，希望能提供更好的用户体验。我想这可以通过调用方法来实现，`ViewDidAppear`但我宁愿立即开始计算，以使事情尽可能快。

有没有办法做到这一点？可能使用大中央调度或将工作分配给另一个线程？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:03:08.977

如果您希望在开始复杂计算之前首先加载 UI 内容（但不一定显示），请将代码保留在`-viewDidLoad`方法中，但在`[super viewDidLoad]`调用之后插入。如果计算不涉及必须仅在主线程（即 UI）上操作的对象，请使用 Grand Central Dispatch 为要在使用中执行的计算设置异步队列`dispatch_async()`。

编辑：我现在了解到您正在使用 a`UINavigationController`将此视图推送到堆栈上，并且计算都对 UI 有直接影响，这意味着它们必须在主线程上进行。因此，我建议将代码放在`-viewWillAppear:`方法中。这样，系统应该在调用计算之前推送视图。

或者，在该`viewDidLoad:`方法中，您可以调用另一个仅执行计算并将结果存储在异步线程上的变量中的方法。然后，该应用程序可以读取这些计算结果`viewDidLoad:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:11:00.300

委托中没有可使用的神奇方法。您在问一个非常普遍的问题：如何在 iOS 中进行线程处理。

# c# - C# 控制台应用程序 % 数学总是返回 0

> ID：11707331
> 
> 赞同：1
> 
> 时间：2012-07-29T06:58:24.690
> 
> 标签：c#

大家好，我的控制台应用程序有一个小问题我有一个文本文件有 19862 行

```
String[] lines= File.ReadAllLines("C:\\Users\\ThElitEyeS\\Desktop\\PHP\\name\\names.txt");
int c = lines.Length;
int i = 1;
foreach (String line in lines) {
    long f = ((i++ / c) * 100);
    Console.WriteLine(f + "%");
} 
```

该值始终返回 0%，除了最后一个返回 100%，这是我的问题，我希望快速找到问题 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:01:28.773

你正在做一个整数除法，这将被四舍五入。

例子：

```
i = 1 and c= 100
result is 0.01  -> rounded to 0
0 * 100 = 0 
```

而是尝试

```
long f = ((i++ / (double) c) * 100); 
```

强制浮点除法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:30:27.543

`double`您已经有了一个可行的答案，但是当整数除法（不四舍五入，但截断）就足够了时，我不会在这里使用：

```
long f = i++ * 100 / c; 
```

# java - 如果所有类都扩展对象，为什么它们不能都调用克隆

> ID：11707338
> 
> 赞同：5
> 
> 时间：2012-07-29T06:59:13.193
> 
> 标签：java

```
class Main {

    public static void main(String[] args) {
        new Cloned().clone();
    }
}

class Cloned implements Cloneable {
} 
```

这给出了一个错误，说它是受保护的。object 的任何子类都不能调用该方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T07:02:08.073

因为`clone()`是 Object 类中的受保护方法

如果您想`clone()`公开访问，您需要在您的课程中覆盖该方法。

```
@override
public Object clone()
{
    return super.clone();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T07:03:10.543

这里的问题是`Main`不扩展`Cloned`。就目前而言，`Main`可以调用`Main.clone`，但不能调用`Cloned.clone`。

`clone`声明方法的事实在`Object`这里并不重要。除了公共方法，一个类只能调用**自己继承的方法**。这包括来自其超类的受保护方法，但不包括其他（超）类的受保护方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:23:36.537

```
class Main implements Cloneable {

    public static void main(String[] args) {

    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        //TODO Auto-generated method stub
        return super.clone();
    }
} 
```

# emacs - 如何让 aquamacs 显示稳定且闪烁的光标？

> ID：11707343
> 
> 赞同：5
> 
> 时间：2012-07-29T07:00:01.550
> 
> 标签：emacs, aquamacs

如何让 aquamacs 显示稳定且闪烁的光标？ [http://aquamacs.org/](http://aquamacs.org/)

经过大量工作，我们设法让它显示出一个空心且闪烁的框，而不仅仅是一条闪烁的垂直线，但这通常很难看到。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T09:17:50.757

这适用于 NT Emacs：

```
(blink-cursor-mode) 
```

也应该与 Aquamacs 一起使用。

如果光标不是实心框（此处默认为实心框），添加

```
(setq-default cursor-type 'box) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T14:54:04.873

您可能想要备份要添加 setq-default 的未识别文件，在我的情况下，我编辑的 ~/.emacs* 文件被完全替换为不包括我的 setq 添加并消除了其他一些非全局的东西部分（在我的光标更改之前我有两个非全局部分，现在我有一个）。

¿ 也许要编辑的 Aquamacs emacs 配置包含在其他地方？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T04:48:31.193

在 Aquamacs 中，全局设置填充框光标的便捷方法是使用以下命令：

MX 定制

然后在自定义缓冲区的搜索框中，输入“光标类型”并按搜索按钮。请求的光标称为“框”。

# profiling - OpenCL 中“clEnqueueNDRangeKernel”的一个奇怪的 Timinig 问题

> ID：11707357
> 
> 赞同：1
> 
> 时间：2012-07-29T07:02:27.213
> 
> 标签：profiling, opencl

我是opencl的新手，我遇到了一个奇怪的问题！我有一个还原内核，我重复了几次！问题是，当我分析内核的执行时，经过的时间（排队->结束）几乎相同并且有点增加，但是当我在“C++”代码中测量经过的时间时，执行“clEnqueueNDRangeKernel”行的时间会增加速度很快！！我已经附上了分析的代码和输出！：震惊：

```
// execute the kernel
globalWorkSize[0] = this->reduction_NumBlocks * this->reduction_NumThreads;
localWorkSize[0] = this->reduction_NumThreads;

//Start Time
ttt.start();

clErrNum = clEnqueueNDRangeKernel(clCommandQueue, kernelReduction, 1, 0,
globalWorkSize, localWorkSize, 0, NULL, &timing_event);
// check if kernel execution generated an error
oclCheckError(clErrNum, CL_SUCCESS);

clFinish(clCommandQueue);
ttt.stop();

//Check Elapsed Time
clGetEventProfilingInfo(timing_event, CL_PROFILING_COMMAND_QUEUED,
sizeof(time_start), &time_start, NULL);
clGetEventProfilingInfo(timing_event, CL_PROFILING_COMMAND_END,
sizeof(time_end), &time_end, NULL);
cout<<"ElapseTime(Execute):"<<(time_end - time_start)/1000<<"us\tTTT:"    <<ttt.getElapsedTimeInMicroSec()<<endl; 
```

这是输出：

```
 GeForce GTX 550 Ti
    Device Timer Resolution:1000ns
    GpuExecutionTime:160us   C++ElapsedTime:177
    GpuExecutionTime:156us   C++ElapsedTime:167
    GpuExecutionTime:156us   C++ElapsedTime:166
    GpuExecutionTime:189us   C++ElapsedTime:242
    GpuExecutionTime:158us   C++ElapsedTime:215
    ...
    GpuExecutionTime:156us   C++ElapsedTime:253
    GpuExecutionTime:162us   C++ElapsedTime:261
    GpuExecutionTime:157us   C++ElapsedTime:262
    GpuExecutionTime:156us   C++ElapsedTime:254
    GpuExecutionTime:157us   C++ElapsedTime:254
    GpuExecutionTime:160us   C++ElapsedTime:261
    GpuExecutionTime:167us   C++ElapsedTime:279
    GpuExecutionTime:157us   C++ElapsedTime:264
    ...
    GpuExecutionTime:159us   C++ElapsedTime:263
    GpuExecutionTime:157us   C++ElapsedTime:261
    GpuExecutionTime:157us   C++ElapsedTime:260
    GpuExecutionTime:157us   C++ElapsedTime:263
    GpuExecutionTime:264us   C++ElapsedTime:384
    ...
    GpuExecutionTime:156us   C++ElapsedTime:304
    GpuExecutionTime:161us   C++ElapsedTime:314
    GpuExecutionTime:157us   C++ElapsedTime:308
    GpuExecutionTime:160us   C++ElapsedTime:305
    GpuExecutionTime:158us   C++ElapsedTime:311
    GpuExecutionTime:156us   C++ElapsedTime:308
    GpuExecutionTime:157us   C++ElapsedTime:312
    ...
    GpuExecutionTime:157us   C++ElapsedTime:326
    GpuExecutionTime:158us   C++ElapsedTime:326
    GpuExecutionTime:159us   C++ElapsedTime:330
    GpuExecutionTime:158us   C++ElapsedTime:328
    GpuExecutionTime:158us   C++ElapsedTime:335 
```

任何形式的帮助表示赞赏。

PS输入和其他相关变量的大小是固定的！

# java - 无法使用 java netbeans 编译器在网格布局中创建按钮

> ID：11707361
> 
> 赞同：1
> 
> 时间：2012-07-29T07:03:38.727
> 
> 标签：java, swing

我正在使用 netbeans 编译器 7.11 版。我正在尝试创建一个 GridLayout，但它在我编写代码以创建布局按钮的行中显示错误。

它给出了以下[错误](http://i.stack.imgur.com/K8qg9.jpg)

```
no suitable constructor found for JButton(Java.lang.String.java.lang.String)
Constructor javax.swing.JButton.JButton(java.lang.String,javax.swing.Icon)is not applicable
(actual argument Java.lang.String cannot be converted to javax.swing.Icon by method
 invocation conversion)
Constructor javax.swing.JButton.JButton(javax.swing.Action)is not applicable
(actual and formal argument lists differ in length)
Constructor javax.swing.JButton.JButton(java.lang.String)is not applicable
(actual and formal argument lists differ in length)
Constructor javax.swing.JButton.JButton(javax.swing.Icon)is not applicable
(actual and formal argument lists differ in length)
Constructor javax.swing.JButton.JButton()is not applicable
(actual and formal argument lists differ in length) 
```

它从第 7 行到第 11 行显示了这些错误。下面是我输入 Java Netbeans 编译器的代码。

```
import java.awt.*;
import javax.swing.*;
public class Griddemo extends JFrame{
public Griddemo()
{
  setLayout(new GridLayout(3,2));
  add(new JButton("Row-1","Col-1")); ---- line7
  add(new JButton("Row-1","Col-2")); ---- line8
  add(new JButton("Row-2","Col-1")); ---- line9
  add(new JButton("Row-2","Col-2")); ---- line10
  add(new JButton("Row-3","Col-1")); ---- line11
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  pack();
  setVisible(true);
}
public static void main(String args[])
 {
   new Griddemo();
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:14:26.970

您似乎面临的问题是您正在传递`JButton`2 `String`s，并且没有具有该签名的构造函数。试试这个

```
add(new JButton("Row-1, Col-1")); ---- line7
add(new JButton("Row-1, Col-2")); ---- line8
add(new JButton("Row-2, Col-1")); ---- line9
add(new JButton("Row-2, Col-2")); ---- line10
add(new JButton("Row-3, Col-1")); ---- line11 
```

使每个按钮标签都具有描述性，但只有一个`String`.

# sockets - 枚举 Node.js net.Server 连接

> ID：11707363
> 
> 赞同：2
> 
> 时间：2012-07-29T07:04:21.680
> 
> 标签：sockets, node.js

[是否可以遍历与 Node.js 中的net.Server](http://nodejs.org/api/net.html#net_class_net_server)实例建立的连接对应的所有套接字对象？

最终，我需要关闭所有连接。似乎这样做的唯一方法是在创建时保留这些套接字对象的数组。请让我知道是否有内置的方法可以做到这一点可能更清洁。

# c# - 实体框架存储库模式继承

> ID：11707364
> 
> 赞同：2
> 
> 时间：2012-07-29T07:04:33.630
> 
> 标签：c#, linq, design-patterns, ef-code-first, repository-pattern

```
class A 
{
public int id {get; set;}
}

class B : A
{
}

class C : A
{    
} 
```

现在为 B 和 C 设置一个单独的存储库是否有意义，或者我应该将类型信息传递给 A 的存储库中的方法并从那里返回内容。

```
class ARepository : RepositoryBase<Context>,IARepository
{
A GetById (int id )
{
//some linq query here
}

//should this be here or in a separate repository
A GetBByID (int id)
{
}

} 
```

我会去另一个存储库的原因是如果我想要

```
class D : A
or Class E : C 
```

这可能会开始变得混乱和棘手。

那么解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:16:43.870

我更喜欢每个 EntityFramework Context 拥有一个大型存储库，它简化了维护。

# ubuntu - 在 Ubuntu 上将 fop 作为 www-data 运行

> ID：11707366
> 
> 赞同：3
> 
> 时间：2012-07-29T07:05:19.597
> 
> 标签：ubuntu, apache-fop

我正在尝试运行 FOP（通过 php exec() 命令），当我在命令行（作为我的用户）上运行 FOP 时，它工作得非常好，但是 PHP 命令正在作为 apache 的 www-data 用户运行它和它是说没有找到 FOP。

如果我在命令行上使用 sudo -uwww-data fop 运行它，那么它也会说找不到命令。

我已经将我的 fop 路径信息与 /etc/profile 一起放入 /etc/environment 并且我已经完成了源 /etc/environment 和源 /etc/profile 但它仍然说它没有找到。

如何让 FOP 在 www-data 用户下运行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:16:01.900

将以下代码放入名为 like 的文件`/etc/profile.d/*.sh`中是实现目标的一种可怕方式，但它甚至可能有效：

```
#/bin/sh
if [ "`id -u`" -eq "`id -u www-data`" ]; then
   PATH="/opt/fop/latest:$PATH" ;
fi 
```

我们测试当前用户 id 是否是`www-data`-user 的 id。`PATH`如果是这样，我们在变量前面加上`/opt/fop/latest`目录。每当初始化一个新的 shell 时，它应该自动运行。

这些命令将安装新脚本：

```
$ echo -e '#!/bin/sh\nif [ "`id -u`" -eq "`id -u www-data`" ]; then PATH="/opt/fpb/latest:$PATH"; fi' | sudo cat >/etc/profile.d/fop4www-data.sh
$ sudo chown www-data:www-data /etc/profile.d/fop4www-data.sh
$ sudo -u www-data chmod +x /etc/profile.d/fop4www-data.sh 
```

如果命令

```
$ echo 'whoami; echo PATH=$PATH' | sudo -u www-data sh 
```

从正常的 shell 运行反映了变化，你应该能够`fop`从你的 php 脚本中调用。

*免责声明*：我不喜欢 shell 编程。我几乎不知道我在做什么。请使用常识并改进代码。

# ios - 转至 TabBar 控制器

> ID：11707368
> 
> 赞同：0
> 
> 时间：2012-07-29T07:05:53.077
> 
> 标签：ios, uitabbarcontroller, uistoryboardsegue

我正在使用以下代码对另一个视图控制器执行 segue：

```
[self performSegueWithIdentifier:@"BackSegue" sender:self]; 
```

当名为 segue 的“BackSegue”的目的地是另一个视图控制器（实际上是其中一个选项卡）时，这可以正常工作，但我需要在底部显示选项卡，因此直接转换到该视图控制器将无法正常工作，因为没有标签。是否允许/可能转到标签栏控制器？这个特定代码有什么问题还是我正在做的其他事情？

**编辑 1**

TabBar 控制器没有 .m/.h 文件，并且从未以编程方式声明，但据我所知，我很确定在情节提要中正确设置了 segue（与之前直接设置到其他视图控制器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:16:15.080

您可以直接转到`UITabBarController`. 只需更改情节提要中的转场即可。当 segue 发生时，它应该加载标签栏控制器，然后加载屏幕底部的标签栏和与标签栏控制器关联的第一个视图控制器的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T16:17:04.893

为了segue到标签栏控制器中的特定标签：您需要添加 selectedIndex=1

为 segue 添加这些代码行：

```
UITabBarController *loadTabBar = [self.storyboard instantiateViewControllerWithIdentifier:@"TasksAppsTabs"];
        loadTabBar.selectedIndex=1;
        [self presentViewController:loadTabBar animated:YES completion:nil]; 
```

# xquery - 控制序列中的选择顺序

> ID：11707369
> 
> 赞同：2
> 
> 时间：2012-07-29T07:06:19.240
> 
> 标签：xquery

如何控制从 a 中选择的顺序`for $x in (...)`？在下面 XQuery 的最后一行中，我希望结果按 , 顺序排列`$retmax`，`$retmin`但它以相反的顺序出现。

```
<result>
{
    let $max := max(doc("countries.xml")//country/(@population div @area))
    let $min := min(doc("countries.xml")//country/(@population div @area))
    for $country in doc("countries.xml")//country
    let $density := $country/(@population div @area)
    let $ret_min := if ($density = $min)
                    then <lowest density="{$density}">{data($country/@name)}</lowest>
                    else ()
    let $ret_max := if ($density = $max) 
                    then <highest density="{$density}">{data($country/@name)}</highest>
                    else ()
    for $r in ($ret_max, $ret_min) return $r
}   
</result> 
```

产生：

```
 <result>
    <lowest density="0.026752619966905682">Greenland</lowest>
    <highest density="31052.3125">Macau</highest>
  </result> 
```

但我想要：

```
 <result>
    <highest density="31052.3125">Macau</highest>
    <lowest density="0.026752619966905682">Greenland</lowest>
  </result> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:00:08.927

以下是我的写法...

```
let $ordered_countries := for $country in doc("countries.xml")//country
                          let $density := $country/(@population div @area)
                          order by $density 
                          return $country
let $low  := $ordered_countries[1]
let $high := $ordered_countries[fn:last()]
return (
    <lowest density="{$low/(@population div @area)}">{data($low/@name)}</lowest>,
    <highest density="{$high/(@population div @area)}">{data($high/@name)}</highest>
) 
```

# c++ - 如何跨线程同步变量？C++

> ID：11707372
> 
> 赞同：0
> 
> 时间：2012-07-29T07:06:20.720
> 
> 标签：c++, multithreading

假设我有 A) 全局变量 B) 局部变量，但另一个线程有一个 ptr

可以说我有这个代码

```
thread2(&localVar);//now thread2 can modify it
localVar=0;
globalVar=0;
while(1){
    mutex.lock();
    cout << (globalVar && localVar ? "Both true" : "fail");
    mutex.unlock();
    Sleep(1000)
} 
```

这是正确和安全的吗？我不记得了。如果是我的问题是 C++ 如何知道 localVar 和 globalVar 可能已被修改？如果你说它是因为互斥锁/解锁，那么我的问题是为什么？在调用任何函数时，C++ 是否认为变量可能已被修改并需要重新加载到寄存器中？

如果这不安全，那么是什么使它不安全？（我怀疑如果不是，那么只有 localVar 是不安全的），我该如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:14:38.050

你让事情变得复杂得多。您的责任是确保**不会发生对变量的冲突访问**。

定义：对给定内存位置的两次访问**冲突，** *如果*它们可以同时发生并且**至少一次是写访问**。

所以：

*   两次写入同一内​​存位置 = 错误
*   对同一内存位置的读取和写入 = 错误

为确保这种情况永远不会发生，您可以使用`mutex`，或者您设计您的程序，以便线程之间共享的变量只能被读取。还有许多其他可能的策略。

如果我正确理解您的不完整代码：`localVar`在两个线程中同时修改。**行为未定义。任何事情都有可能发生。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:18:30.417

> 这是正确和安全的吗？

不。

修复：在创建第二个线程之前初始化 localVar 和 globalVar。

您将 localVar （在本地堆栈上？local var 建议在范围内的堆栈上）暴露给另一个线程很麻烦。如果这个 localVar 在堆栈上，那么请确保不要让它超出范围。

您是否在另一个线程上使用相同的互斥锁来保护读/写访问？如果是，那么这是朝着安全的方向发展。

这不是“C++ 是否知道 localVar 和 globalVar 可能已被修改？”的问题：C++ 不知道。对于这种情况，如前所述，一切都是关于使用互斥锁来正确保护对所有共享值的所有访问。如果两个线程都使用互斥锁，则一次只允许一个线程通过它，进入受保护的代码。任何其他试图锁定互斥锁的线程都将“停止并等待”，直到锁被释放。

因此，通过互斥锁包围您对这对值的读取，您走在了正确的轨道上。

> 在调用任何函数时，C++ 是否认为变量可能已被修改并需要重新加载到寄存器中？

作为一般规则，是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T09:36:46.593

我认为第一次获取局部变量的地址时，它会变得易失，所有读写都在内存中执行。

# ruby-on-rails - 在文本区域“值”中使用换行符

> ID：11707373
> 
> 赞同：3
> 
> 时间：2012-07-29T07:06:23.870
> 
> 标签：ruby-on-rails, html, simple-form

我正在开发一个简单的私人消息传递应用程序，并且在回复消息时，我想在文本区域的几个空格处​​显示原始消息。这是我要说的：

```
<%= f.input :content, :as=>:text, :label => "Reply", :input_html => { :value=> "<br /><br />Original Message: #{@message.content}".html_safe } %> 
```

和..这是我所看到的：

![在此处输入图像描述](../Images/ad9ce30989ff8fa960533b9d60ddb64b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:09:41.327

尝试使用`\n`而不是`<br/>`，并且`html_safe`仅适用于`@message.content`，而不适用于整个字符串：

```
<%= f.input :content, :as=>:text, :label => "Reply", :input_html => { :value=> "\n\nOriginal Message: " + @message.content.html_safe } %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T07:13:45.237

问题是[HTML 标准](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html#the-textarea-element)不允许`textarea`元素有任何嵌套元素，只允许纯文本。

要解决此问题，您必须通过`\n`. （[请参阅这个现有的 SO 问题](https://stackoverflow.com/questions/66773/add-a-linebreak-in-an-html-text-area)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T07:11:27.103

试试这个：

```
<%= f.input :content, :as=>:text, :label => "Reply", :input_html => { :value=> ("<br /><br />" +"Original Message: #{@message.content}".html_safe) } %> 
```

# php - 计算时间并将其与 PHP 中的 mysql 时间进行比较

> ID：11707374
> 
> 赞同：1
> 
> 时间：2012-07-29T07:06:35.853
> 
> 标签：php, mysql, codeigniter, datetime, unix-timestamp

PHP：

```
$current = time();
$time_ago = $current - 45*60; // get the time 45 mts ago. 
```

MySQL：

我有一个表状态，其中有一个日期时间列“已修改”；

我正在尝试查询表以获取修改时间低于`$time_ago;`

我的 PHP 代码：

```
$this->db->select("(SELECT UNIX_TIMESTAMP(status.modified) FROM status WHERE status_id = 0) AS modified_timestamp" , FALSE);
        $this->db->from('status');
        $this->db->where('status_id', 0);
        $this->db->where('modified_timestamp <', $time_ago);
        $this->db->limit(25);
        $q = $this->db->get(); 
```

得到一个数据库错误：

> “where 子句”中的未知列“modified_timestamp”

```
SELECT 
    (SELECT UNIX_TIMESTAMP(status.modified) FROM status WHERE status_id = 0) AS modified_timestamp 
    FROM (status) WHERE `status_id` = 0 AND `modified_timestamp` < 1343542758 LIMIT 25 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:15:01.860

```
$this->db->from('status');
$this->db->where('status_id', 0);
$this->db->where('UNIX_TIMESTAMP(modified) <', $time_ago);
$this->db->limit(25); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:22:27.937

您意识到您可以在 where 子句中使用 UNIX_TIMESTAMP()，对吧？

```
$this->db->select("UNIX_TIMESTAMP(modified)" , FALSE);
$this->db->from('status');
$this->db->where('status_id', 0);
$this->db->where('UNIX_TIMESTAMP(modified) <', $time_ago);
$this->db->limit(25);
$q = $this->db->get(); 
```

注意：可能无法按原样工作，我没有使用过这个特定的 DB API，但你明白了。

# geometry - 找到多面体中的整数点

> ID：11707377
> 
> 赞同：1
> 
> 时间：2012-07-29T07:07:19.950
> 
> 标签：geometry, linear-programming, enumerate, feasibility

您好，我们有一个多面体，其边界在 n 维中具有线性不等式。

1.  如何找到这个多面体中的整数点数（精确或近似）。
2.  如何在这个多面体中找到整数点的坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:46:19.890

给你一些搜索词：你描述的是一个*整数程序*的*可行解的**枚举。*

 **上次我需要这样的东西时，我找不到现成的解决方案，所以我编写了自己的实现，名为“<a href="http://martin.von-gagern.net/projects/idp/ “ rel="nofollow">乐队”。它基于分支算法，使用[COIN-OR](http://www.coin-or.org/)的线性规划引擎来决定相应的线性（非整数）程序是否有任何可行的解决方案。随意使用它适合您的需要。

至于简单地确定格点的*数量*：我相信有一些公式可以计算出来，但我不记得任何细节。据我记得，该公式在实际列举解决方案时没有用。

查看[最近的出版物](http://dx.doi.org/10.1016/j.jsc.2003.04.003)表明您可能想看看[LattE](http://www.math.ucdavis.edu/~latte/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:48:07.557

能够计算给定多面体（在凸包中）的整数点的软件是[porta](http://typo.zib.de/opt-long_projects/Software/Porta/%20Porta)。

但是，所有涉及此问题的软件都基于枚举，因此对于较大的模型它会失败。

最好的祝福**

# jquery - 使用 jquery 将 div 转换为 span

> ID：11707379
> 
> 赞同：12
> 
> 时间：2012-07-29T07:07:45.073
> 
> 标签：jquery, html

我正在尝试更改我无法控制的小部件的 HTML 输出。基本上问题是小部件输出的 HTML 在 ap 中使用了无效的 div。

```
<div class="widget_output">
    <ul>
        <li>
            <p>
                <div>This is a random item</div>
                <div>This is a random item</div>
                <div>This is a random item</div>
                <div>This is a random item</div>
            </p>
       </li>
       <li>
            <p>
                <div>This is a random item</div>
                <div>This is a random item</div>
                <div>This is a random item</div>
                <div>This is a random item</div>
            </p>
        </li>
</div> 
```

我的想法是将 div 更改为作为内联元素的 span，然后 HTML 应该是有效的。我一直在查看 jquery 以尝试选择类，然后将这些 div 转换为 span。谁能指出我正确的方向或某人实现类似目标的教程？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-29T07:10:09.760

只是将一个 JSFiddle 粘在一起：

[http://jsfiddle.net/dayL4/3/](http://jsfiddle.net/daYL4/3/)

```
$(".widget_output div").replaceWith(function() { 
    return "<span>" + this.innerHTML + "</span>"; 
}); 
```

似乎比我原来的建议工作得更好。但是看看这个相关问题的答案，因为它们涵盖了一些优点：

[使用 jQuery 更改 HTML 标签？](https://stackoverflow.com/questions/918792/use-jquery-to-change-an-html-tag)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T07:59:54.703

您不需要 jQuery，您可以简单地使用正则表达式将`<div>`标签替换为`<span>`标签。试试这个：

```
var widgetHTML = $('div.widget_output').html();
    widgetHTML = widgetHTML
       .replace(/<div>/g, '<span>')
       .replace(/<\/div>/g, '</span>');
$('div.widget_output').html(widgetHTML); 
```

演示：http: [//jsfiddle.net/codef0rmer/daYL4/3/](http://jsfiddle.net/codef0rmer/daYL4/3/)

# php - Twitter OAuth 库 - 登录两次？

> ID：11707383
> 
> 赞同：1
> 
> 时间：2012-07-29T07:08:37.613
> 
> 标签：php, twitter, oauth

我开始使用 Abraham Williams 提供的 OAuth 库（非常感谢 Abraham），但我遇到了一个奇怪的情况：

1.  我转到 index.php 页面，单击“使用 Twitter 登录”按钮

2.  重定向到 callback.php

3.  回调检测请求的 OAuth 令牌和会话 OAuth 令牌之间的不匹配

4.  重定向回连接

5.  通过推特再次登录

6.  最后用 OAuth Token 和 OAuth Token Secret 访问 index.php

这是否正常，必须使用 Twitter OAuth 登录 Twitter 两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T04:25:52.150

This is because of you are trying to access using non www url and you might be mentioned in www callback url in twitter application settings or vice versa.

I had faced the same issue and I finally realized that I was trying to login using non-www url.

I have resolved the issue by using htaccess.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:28:40.460

检查重定向以连接。确保这重定向到处理连接的脚本，而不仅仅是登录页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T02:14:57.107

Twitter 在 OAuth 身份验证过程中（在 request_tokens 之后）为您提供临时令牌。您必须在 access_tokens 之后摆脱它们。我认为您的令牌不匹配可能在这里，因为当您第二次（或更多）授权应用程序时，Twitter 会给您他第一次给您的令牌。

# emacs - Emacs Org-Mode：我可以在加载文件时打开列视图吗？

> ID：11707384
> 
> 赞同：5
> 
> 时间：2012-07-29T07:08:42.200
> 
> 标签：emacs, org-mode

我想在打开某个 .org 文件时自动打开列视图（关于第一个主题）。有没有可能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:56:24.647

切换到`column-veiw`第一个标题。

**测试网**

```
# Local Variables:
# eval: (goto-char (point-min))
# eval: (outline-next-heading)
# eval: (org-columns)
# End:

* test A
* test B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:32:25.790

是的。一种方法是为该 org 文件添加文件局部变量。

```
 # Local Variables:
    # eval: (org-columns)
    # End: 
```

# html - .Slidetoggle 激活后按下 Divs

> ID：11707388
> 
> 赞同：1
> 
> 时间：2012-07-29T07:09:02.957
> 
> 标签：html, push, slidetoggle

在 .slidetoggle 面板被激活后，我试图按下这些框。但发生的情况是它要么超过或低于（取决于 z 位置）定位的盒子。我想要它，以便在激活滑动切换面板时，它会按下所有框。

**这是 JSFIDDLE：http:** [//jsfiddle.net/iqab/8QHdB/3/](http://jsfiddle.net/iqab/8QHdB/3/)

这是我正在谈论的功能类型的一个示例：http: [//www.michaelnagy.at/](http://www.michaelnagy.at/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:57:00.363

用这个替换 CSS。修改后的行被注释掉。
应用了其他修复（参见 CSS 中的注释）。

```
.wrapper{
    width:800px;
    /*height:800px;*/ /*let wrapper auto resize itself based on contents height*/
    border:solid thin #000;
    position:relative;
    margin:auto;
}

.wrapper .Boxes{
    display:inline-block; /*fix for box overlap out of wrapper. replacement for "float:left" below*/
    width:200px;
    height:200px;
    /*float:left;*/ /*fix for box overlap out of wrapper. replaced with "display:inline-block" above*/
    border:solid thin #000;
    margin:33px;            
}

.wrapper .hbox{
    width:734px;
    height:400px;
    border:solid thin #100;
    /*position:absolute;*/ /*fix for panel overlap over boxes*/
    top:33px;
    margin:33px;
    display:none;
    background-color: #000;
} 
```

# flash - Chrome 扩展程序 + 网络摄像头

> ID：11707389
> 
> 赞同：0
> 
> 时间：2012-07-29T07:09:17.920
> 
> 标签：flash, google-chrome, google-chrome-extension

我是扩展程序的新手，我想为 Chrome 创建一个扩展程序，它可以从网络摄像头（我猜是 Flash 播放器）捕获视频，并在摄像头捕获一些移动或输入时运行一些事件（这不是重点）。例如，我想更改浏览器中的当前 URL。

我的问题是创建这种“守护程序”以在浏览器上“在后台”运行的最佳方法是什么？

我希望我的扭曲问题很清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:11:56.697

Chrome 21 稳定版刚刚推出。它包括 getUserMedia API，它可以让您的 javascript 和 HTML 访问网络摄像头，而无需使用 Flash 或任何插件。

getUserMEdia 如何： [http ://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

Chromium 介绍 getUserMedia： http: [//blog.chromium.org/2012/07/introducing-getusermedia-and-javascript.html](http://blog.chromium.org/2012/07/introducing-getusermedia-and-javascript.html)

如果您的 Chrome 尚未升级到 v21，您可以下载并安装它以强制更新。

# grails - grails & 骨干.js

> ID：11707395
> 
> 赞同：5
> 
> 时间：2012-07-29T07:10:11.700
> 
> 标签：grails, backbone.js

我目前正在开发一个 Java EE 项目，在我的前端使用常规的 Web 服务和主干.js。（因为我喜欢将内容加载/添加到页面，而无需刷新页面（异步，主干））。

我想知道是否有人使用过 grails 和骨干网以及他们的经验是什么？

Grails 将用于服务器端的东西，以及用于处理前端的主干。

或者 grails 可以自己做到这一点。IE，用grails，你可以动态地将东西加载到页面上而不刷新。例如，待办事项列表。

向grails添加主干很难吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T14:49:43.470

我在两个项目中使用过 Backbone + Grails。并且绝对没有发现任何问题。

Backbone 是仅限客户端的框架，非常灵活，其开发理念是它应该与几乎所有服务器端的东西兼容。它只是期待 RESTful/RESTful-like 服务器端 API。而且，您始终可以使用自己的服务器-客户端传输实现，请参阅`Backbone.sync`（但我敢肯定，标准 Grails 应用程序不需要它）

另一方面，Grails 它非常灵活的服务器端框架（主要是服务器端）。通过使用 Grails，您可以制作没有任何问题的 RESTful api。基本上你只需要[响应 JSON](http://grails.org/doc/latest/guide/theWebLayer.html#xmlAndJSON)就足够了。

PS 你也可以为 ajax 使用 Grails 标签，比如[remoteLink](http://grails.org/doc/latest/ref/Tags/remoteLink.html)和纯 jQuery，但是 Backbone 更强大（并且易于学习）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T07:50:32.197

没那么复杂。您可以尝试按照本[教程](http://lauripiispanen.github.com/blog/2012/01/31/building-a-backend-for-backbone-dot-js-todos-example-with-grails-and-mongodb/)进行操作。这是一个使用资源插件的 Grails 2.x & BackboneJS 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T12:14:09.393

@chanwit 提供的教程链接不起作用，但您可以使用同一项目的[github 链接](https://github.com/lauripiispanen/grails-backbone-mongodb-example)。

# javascript - 如何捕获从 iframe 内部抛出的异常？

> ID：11707400
> 
> 赞同：2
> 
> 时间：2012-07-29T07:10:39.127
> 
> 标签：javascript, asp.net, iframe, frameset-iframe

如何捕获 iframe 中引发的异常？

这是我的代码：

家长：

```
 iframe = document.createElement("iframe");
        iframe.src = "../a.aspx";
        iframe.style.display = "none";
        document.body.appendChild(iframe); 
```

和a.aspx里面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
            GenerateKey();
            //This function throws an exception, and I want to catch it in the parent window (javascript)
    } 
```

我想在打开 iframe 的页面中捕获异常并显示警告框。我尝试了 iframe.contentWindow.onerror，但没有成功。

谢谢您的帮助，

英巴尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:51:27.707

跨域可能不允许您控制 iframe。在您的 iframe 页面中，您可以捕获它的异常并调用父函数来显示它。

```
try{
//something
}catch(e){
   window.top.some_public_function(e);
   //window.parent.some_public_function(e) is also work
} 
```

# url - 带有获取参数的 CakePHP 身份验证 URL

> ID：11707401
> 
> 赞同：0
> 
> 时间：2012-07-29T07:11:11.443
> 
> 标签：url, cakephp, authentication

我正在使用 CakePHP，我想使用 URL 中的密钥对我的用户进行身份验证，例如`/blog/users/login/key => /blog/users/login/FGHDFgFDg`

我知道这并不安全，但为了我的需要，它确实是这样做的。

你有什么想法我能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:07:14.737

在`UsersController.php`：

```
class UsersController extends AppController {
    function login($key = null) {
        $user = $this->User->find('first', array(
            'conditions' => array(
                'key' => $key // replace 'key' with your column that stores the key
            )
        ));

        if ($user != null) {
            $this->Auth->login($user);
            $this->redirect('/users/home');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:59:09.050

看看我的 Qlogins： http: [//www.dereuromark.de/2012/02/08/qlogin-quicklogins-fur-cakephp/](http://www.dereuromark.de/2012/02/08/qlogin-quicklogins-fur-cakephp/)

他们提供你想要的。只要电子邮件不能被截获并且您使用 https，它就可以被认为是安全的。令牌也应该只有效一次。不过，默认值是“随心所欲”。请记住这一点。

我用它来发送电子邮件（到登录后面的特定内容）以快速跳转到。如果用户总是必须登录，大多数人都不会去那里。你的用例是什么，我不知道。

# ios - 要在 ARC 下清除自定义 UIView 的 dealloc 中的网点？

> ID：11707402
> 
> 赞同：2
> 
> 时间：2012-07-29T07:11:23.377
> 
> 标签：ios, uiview, automatic-ref-counting, dealloc

通常在 UIViewController 子类中，我将 viewDidUnload 中的所有出口清零。但是在我的自定义 UIView 中，我是否应该在 dealloc 中取消那些出口（在我的自定义 UIView 中定义）？ARC 是否自动执行这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:13:13.233

不，仍然在 viewDidUnload 中执行它以尽可能快地将它们从内存中取出。

ARC 意味着您*无需*在任何地方执行此操作，但如果您这样做，它仍然会更有效率。

尽管在任何类中使用 arc 时，您都不需要在死锁中清零属性。

# javascript - 单击喜欢按钮时显示消息？

> ID：11707407
> 
> 赞同：0
> 
> 时间：2012-07-29T07:12:50.587
> 
> 标签：javascript, jquery

我正在使用以下代码在用户单击 facebook like 按钮时提醒用户。它仅在 Opera 浏览器上提醒用户。如何解决此问题并使其适用于所有浏览器？

```
<script>
FB.Event.subscribe('edge.create',
    function(response) {
        alert("You liked the URL");
    }
);
</script> 
```

我也可以使用 Jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:16:54.320

你把这段代码放在哪里了？

对我来说，你必须像这样把它放在 init 中：

```
window.fbAsyncInit = function() {
    FB.init({
      appId  : APP_ID,
      status : true, 
      cookie : true, 
      xfbml  : true 
    });

    FB.Event.subscribe('edge.create',
        function(response) {
            alert("You liked the URL");
        }
    );    
}; 
```

如果你已经调用了 FB.init，你必须使用这样的技巧：

```
<script type="text/javascript">
    function hasFBLoad(){
        if(FB != 'undefined'){
            FB.Event.subscribe('edge.create',
                function(response) {
                    alert("You liked the URL");
                }
            );
        }else{
            setTimeout('hasFBLoad()', 200);
        }
    }
    hasFBLoad();
</script> 
```

# visual-studio-2010 - VS 2010 智能感知 WebAPI 网络表单

> ID：11707411
> 
> 赞同：1
> 
> 时间：2012-07-29T07:13:43.287
> 
> 标签：visual-studio-2010, asp.net-web-api

我已将 WebApi nuget 包和一些 api 控制器添加到现有的 Webforms 项目中，但是智能感知不适用于任何控制器，我无法使用 F12 进行定义。

CodeRush 工作正常，我已经运行 Devenv /resetuserdata 以防它是 VS 的东西，但我怀疑它与 WebAPI 代码有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:53:00.650

Intellisense 和 Go to Definition 在这里都可以与 Web API RC 和 ReSharper 完美配合。尝试通过 NuGet 将包添加到一个空的 Web 项目中，看看它是否可以这样工作。如果不是，则说明您的安装（或 CodeRush）存在问题。

# iphone - 更改 CGRectMake 以在动画周围画一个圆圈

> ID：11707422
> 
> 赞同：0
> 
> 时间：2012-07-29T07:15:25.790
> 
> 标签：iphone, objective-c

我正在使用该代码放置带有触摸功能的圆形动画，但结果是我的动画是一个圆形，并且它被带有黑色边框的黑色矩形“封闭”。

```
Anim1 *anim1 = [[Anim1 alloc] initWithFrame:CGRectMake(15,45, 282, 282)]; 
```

我怎样才能改变它，使它按照动画大小成一个圆圈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:57:37.747

好吧，我找到了答案……它是：

```
 [anim1.layer setBorderColor: [[UIColor brownColor] CGColor]];
 [anim1 setOpaque:NO]; 
```

`[anim1 setOpaque:NO]`; _ 在没有它的情况下完成所有工作，您只会得到彩色背景。

# android - android - getIntent().getStringExtra() 返回 null

> ID：11707425
> 
> 赞同：4
> 
> 时间：2012-07-29T07:15:55.783
> 
> 标签：android, android-intent, android-activity

我在我的应用程序中实现`onPause()`了`onResume()`如下方法：

```
protected void onPause() {
        super.onPause();

        String receiver = phoneNoField.getText().toString();
        String message = messageBody.getText().toString();
        getIntent().putExtra(MESSAGE_RECEIVER, receiver);
        getIntent().putExtra(MESSAGE_BODY, message);

        Log.d(TAG, receiver + " " + message);       
    }

protected void onResume() {
        super.onResume();

        String receiver = getIntent().getStringExtra(MESSAGE_RECEIVER);
        String message = getIntent().getStringExtra(MESSAGE_BODY);
        if(receiver != null)
            phoneNoField.setText(receiver);
        if(message != null)
            messageBody.setText(message);

        Log.d(TAG, receiver + " " + message);       
    } 
```

调用方法时`onPause()`，我看到值已设置。但在我的`onResume()`方法中`getStringExtra()`总是返回`null`。我的方法有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T07:30:07.140

`getIntent()`返回`Intent`已启动活动的 。当你去另一个活动然后回来时，`getIntent()`返回的和你在`onPause`方法中得到的不同

您的选择之一是将值放入`Intent`用于启动活动的 中`B`，然后在您`A`再次开始活动时将值放入`Intent`. 我更喜欢的另一个选项是使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来完成这项工作。

# android - java.lang.RuntimeException：无法在 xml 布局中启动活动 ComponentInfo

> ID：11707426
> 
> 赞同：1
> 
> 时间：2012-07-29T07:16:11.623
> 
> 标签：android, android-layout

我在 Google Play 上有一个应用程序。我已经集成了 BugSense。一切都正常工作突然我在下面的 xml 中**的第一行第一个控件上遇到了 3 个错误。**我不知道为什么会发生这种情况，在其他 android 设备上它工作正常。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/black_text"
    >

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/black_text"
        android:layout_above="@+id/relativeView_fav_shows"
        >
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_centerVertical="true"
            android:scaleType="centerCrop"
            android:src="@drawable/background_channel"
            />

        <GridView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/gridview_channelView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:numColumns="2"
            android:verticalSpacing="5dp"
            android:horizontalSpacing="5dp"
            android:stretchMode="columnWidth"
            android:listSelector="@null"
            android:layout_marginTop="6dp"
            android:gravity="center"
            >

        </GridView>

    </RelativeLayout>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/black_text"
            android:layout_below="@+id/gridview_channelView"
            android:layout_alignParentBottom="true"
            android:id="@+id/relativeView_fav_shows"
            >
            <ImageView
                android:id="@+id/imageView_favShows"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@drawable/fav_shows_normal"
                />
    </RelativeLayout>
</RelativeLayout> 
```

**Logcat 输出。**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.microeyes.hindiserials/com.microeyes.hindiserials.ChannelMainActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class
1   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
2   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
3   at android.app.ActivityThread.access$1500(ActivityThread.java:121)
4   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
5   at android.os.Handler.dispatchMessage(Handler.java:99) 
```

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:19:26.050

这个下面的标签应该只在顶级父布局中可用，从所有其他的Laoyts/Views中删除它。

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

这可能是错误的原因，请也发布 logcat 输出。

# android - 解析的 JSON 数据未在 android 上显示

> ID：11707432
> 
> 赞同：1
> 
> 时间：2012-07-29T07:16:57.797
> 
> 标签：android, json, parsing

我有一个由 php 文件生成的 JSON 字符串。问题是JSON字符串没有出现在android的textview上。谁能解释为什么？

```
public class AllUsersActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> usersList;

// url to get all users list
private static String url_all_users = "http://10.0.2.2/android_connect/get_all_users.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_USERS = "users";
private static final String TAG_UID = "UserID";
private static final String TAG_FIRSTNAME = "FirstName";

// users JSONArray
JSONArray users = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_users);

    // Hashmap for ListView
    usersList = new ArrayList<HashMap<String, String>>();

    // Loading users in Background Thread
    new LoadAllusers().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String uid = ((TextView) view.findViewById(R.id.uid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    UserDetailsActivity.class);
            // sending uid to next activity
            in.putExtra(TAG_UID, uid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllusers extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllUsersActivity.this);
        pDialog.setMessage("Loading users. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All users from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_users, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All users: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // users found
                // Getting Array of users
                users = json.getJSONArray(TAG_USERS);

                // looping through All users
                for (int i = 0; i < users.length(); i++) {
                    JSONObject c = users.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_UID);
                    String name = c.getString(TAG_FIRSTNAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_UID, id);
                    map.put(TAG_FIRSTNAME, name);

                    // adding HashList to ArrayList
                    usersList.add(map);
                }
            } 
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all users
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllUsersActivity.this, usersList,
                        R.layout.list_item, new String[] { TAG_UID,
                                TAG_FIRSTNAME},
                        new int[] { R.id.uid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

}
} 
```

这是 PHP 文件中的 JSON 字符串

```
{"Users":[{"0":[],"UserID":"1","FirstName":"lalawee","Email":"12345","Password":null},{"0":[],"UserID":"2","FirstName":"shadowblade721","Email":"12345","Password":null,"1":[]},{"0":[],"UserID":"3","FirstName":"dingdang","Email":"12345","Password":null,"1":[],"2":[]},{"0":[],"UserID":"4","FirstName":"solidsnake0328","Email":"12345","Password":null,"1":[],"2":[],"3":[]}],"success":1} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:49:00.887

我发现了错误。

它是由区分大小写引起的。

用户 --> 用户

我的错误。对不起。

感谢您尝试帮助我！

# c# - DataGrid 列未正确调整大小

> ID：11707433
> 
> 赞同：1
> 
> 时间：2012-07-29T07:17:04.727
> 
> 标签：c#, wpf, xaml, datagrid

我`DataGrid`在我的 WPF 应用程序中使用 a 来显示一些数据。在应用程序加载时，有时 Grid 的列会变得很奇怪，左侧的“全选”按钮会消失，导致列分隔符不在列所在的位置。只有当用户尝试调整列的大小时，网格的布局才会正常。

我的 DataGrid 定义是： `<DataGrid Name="myList" AutoGenerateColumns="False" ItemsSource ="{Binding SortedView}" VirtualizingStackPanel.IsVirtualizing="False" ColumnWidth="Auto">`

这是问题的屏幕截图以供说明：

![我的 DataGrid 布局不好](../Images/24252b822a6fdf6700a159fd500441c6.png)

这是 DataGrid 的完整 XAML 代码：

```
<DataGrid Name="myList" AutoGenerateColumns="False" ItemsSource ="{Binding SortedView}" VirtualizingStackPanel.IsVirtualizing="False" ColumnWidth="Auto">
        <Interactivity:Interaction.Triggers>
            <Interactivity:EventTrigger EventName="Sorting" >
                <WPFCommon:InvokeDelegateCommandAction 
                            Command="{Binding SortCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=InvokeParameter}" />
            </Interactivity:EventTrigger>
        </Interactivity:Interaction.Triggers>
        <DataGrid.RowStyle>
            <Style TargetType="DataGridRow">
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}"/>
            </Style>
        </DataGrid.RowStyle>
        <DataGrid.Columns>
            <DataGridTextColumn Header="{x:Static p:Resources.Sensor}" Binding="{Binding SensorName, Mode=OneWay}" Width="Auto" />
            <DataGridTextColumn Header="{x:Static p:Resources.Status}" CanUserSort="True" Binding="{Binding Classification, Mode=OneWay}" Width="Auto" />
            <DataGridTextColumn Header="{x:Static p:Resources.Created}" Binding="{Binding CreatedDate, Mode=OneWay}" CanUserSort="True" Width="Auto" IsReadOnly="True" />
            <DataGridTextColumn Header="{x:Static p:Resources.Last_Updated}" Binding="{Binding LastUpdated, Mode=OneWay}" CanUserSort="True" Width="*" IsReadOnly="True" />
        </DataGrid.Columns >
    </DataGrid> 
```

如果有人知道如何`DataGrid`在加载/更改时自动调整大小或刷新，那就太好了。

谢谢！

# php - 正则表达式：匹配所有行中的子字符串，除非子字符串在注释部分内

> ID：11707434
> 
> 赞同：4
> 
> 时间：2012-07-29T07:17:08.153
> 
> 标签：php, regex, regex-negation

我来啦：

我正在编写一个 PHP 应用程序，并且我有一个新的官方域，现在所有常见问题解答都位于该域中。我脚本中的一些文件包含指向旧常见问题解答域的帮助链接，因此我想使用新域替换它们。但是，我只想保留链接到旧域的 URL，前提是它们位于评论或评论块下（我仍然使用旧域进行自我参考和其他文档）。

所以，基本上，我想要实现的是一个正则表达式，它可以在以下条件下工作：

1.  匹配所有行中出现的`example.com`所有 *。
2.  不要匹配整行，只匹配`example.com`字符串。
3.  *   如果该行以`//`、`/*`或“ *”开头，则与该单行中的任何实例都不匹配`example.com`（尽管，如果注释块在打开它的同一行中关闭，这可能是一个问题）。

我通常这样写我的块评论：

```
/* text
 * blah 
 * blah
*/ 
```

这就是为什么我不想匹配位于 、 或“ *”之后的“example.com `//`” `/*`。

我想它会是这样的：

```
^(?:(?!//|/\*|\s\*).?).*example\.com 
```

但这有一个问题：它匹配整行，而不仅仅是“example.com”（这主要是当两个或多个“example.com”字符串在一行中匹配时会导致问题）。

有人可以帮我修复我的正则表达式吗？**请注意：它不必是 PHP 正则表达式，因为我总是可以使用像 grepWin 这样的工具来一次在本地编辑所有文件。**

哦，*如果有办法以某种方式概括块评论，请告诉我，比如：一旦找到，在找到之前`/*`不匹配。那将非常有用。`example.com``*/`*是否可以在一般（非语言相关）正则表达式中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:29:44.197

我会使用某种标记器来区分评论和其他语言标记。

在处理 PHP 文件时，您应该使用[PHP 自己的标记器函数`token_get_all`](http://php.net/token_get_all)：

```
$tokens = token_get_all($source); 
```

然后您可以枚举标记并按类型分隔[标记](http://php.net/tokens)：

```
foreach ($tokens as &$token) {
    if (in_array($token[0], array(T_COMMENT, T_DOC_COMMENT, T_ML_COMMENT))) {
        // comment
    } else {
        // not a comment
        $token[1] = str_replace('example.com', 'example.net', $token[1]);
    }
} 
```

最后，将所有内容与`implode`.

对于您手头没有合适的分词器的其他语言，您可以编写自己的小分词器：

```
preg_match_all('~/\*.*?\*/|//(?s).*|(example\.com)|.~', $code, $tokens, PREG_SET_ORDER);
foreach ($tokens as &$token) {
    if (strlen($token[1])) {
        $token = str_replace('example.com', 'example.net', $token[1]);
    } else {
        $token = $token[0];
    }
}
$code = implode('', $tokens); 
```

请注意，这不考虑任何其他标记，如字符串。`example.com`因此，如果它出现在字符串中但也出现在“注释”中，则这将不匹配，例如：

```
'foo /* not a comment example.com */ bar' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:08:20.317

仅当它不在注释部分内时才匹配的正则表达式`example.com`（但不关心行注释，因此您必须单独执行此操作）：

```
$result = preg_replace(
    '%example\.com # Match example.com
    (?!            # only if it\'s not possible to match
     (?:           # the following:
      (?!/\*)      #  (unless an opening comment starts first)
      .            #  any character
     )*            # any number of times
     \*/           # followed by a closing comment.
    )              # End of lookahead
    %sx', 
    'newdomain.com', $subject); 
```

# ruby-on-rails - Ruby on Rails - 访问活动记录列的最佳实践是什么

> ID：11707436
> 
> 赞同：0
> 
> 时间：2012-07-29T07:17:28.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对rails真的很陌生，但我想知道。

在进行查询时访问 Rails 中的模型列名称的最佳做法是什么？

就像我想按 DESCENDING 顺序按名为“title”的列进行排序。我该怎么做（最佳实践）？

```
MyModel.order(:title.to_s.concat " DESC").all 

MyModel.order("title DESC").all 
```

或者是其他东西？

根据我使用硬编码字符串的经验，在诸如此类的问题上总是证明是错误的方法，主要是因为代码变得无法重构。

在我的 IDE（我正在使用 RubyMine）中，它为列符号显示了一个很好的代码完成，所以我猜这样跟踪使用会更容易吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:23:22.680

在我看来`MyModel.order("title DESC").all`，这里是更好的选择。另一种选择的可读性和复杂性很差。尽管性能可能不是考虑因素，但其他选择在本节中的得分也很差。

除此之外，你永远不应该通过你的 IDE 智能感知能力来编写代码——你的代码应该在所有 IDE 中都是可导航和可读的。我使用 Vim，它完成字符串和完成符号一样好，所以这里没有区别。

编辑：

如果您的订单是 ASC，那么您可以使用`MyModel.order(:title).all`绝对比`MyModel.order("title").all`

# android - Android：在电子邮件正文中显示超链接和图像

> ID：11707440
> 
> 赞同：0
> 
> 时间：2012-07-29T07:18:08.407
> 
> 标签：android, android-intent, android-activity

我正在尝试打开电子邮件活动并在电子邮件正文中显示以下内容：

1.  显示指向网站的超链接。
2.  显示（不附加）图像徽标（.png 文件）。

我尝试使用 html/text/image mime 类型，但两者都不起作用。我什至尝试将 png 文件复制到 sdcard 并从 sdcard 路径显示它，而不是使用可能仅限于应用程序的“资产”位置，但它也没有帮助！谁能给我一个适用于这两件事的代码？

期待各位大神帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:53:27.567

你有没有尝试过 ：

```
Linkify.addLinks(yourEmailString,  Linkify.WEB_URLS);
    yourTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

它将使消息中的所有链接都可点击，但不确定这是否是您正在搜索的内容:)？

# asp.net-mvc - ASP.NET MVC3 比较验证无法正常工作

> ID：11707442
> 
> 赞同：0
> 
> 时间：2012-07-29T07:18:29.760
> 
> 标签：asp.net-mvc, asp.net-mvc-3, client-side-validation

假设这个模型：

```
 public class ChangePasswordModel {
    [Required(ErrorMessage = CustomRegex.RequiredErMsg)]
    [DataType(DataType.Password)]
    [Display(Name = "Current password")]
    public string OldPassword { get; set; }

    [Required(ErrorMessage = CustomRegex.RequiredErMsg)]
    [RegularExpression(CustomRegex.PasswordRX, ErrorMessage = CustomRegex.PasswordErMsg)]
    [DataType(DataType.Password)]
    [Display(Name = "New password")]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm new password")]
    [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

好的，每件事都与此视图完美配合：

```
@model ChangePasswordModel
@{
ViewBag.Title = "Profile";
}

@using (Html.BeginForm()) {
            @Html.ValidationSummary(true)
            <fieldset>
                <legend>Change Password</legend>
                <dl>
                    <dt>@Html.LabelFor(model => model.OldPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.OldPassword)
                        @Html.ValidationMessageFor(model => model.OldPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                    <dt>@Html.LabelFor(model => model.NewPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.NewPassword)
                        @Html.ValidationMessageFor(model => model.NewPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                    <dt>@Html.LabelFor(model => model.ConfirmPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.ConfirmPassword)
                        @Html.ValidationMessageFor(model => model.ConfirmPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                </dl>
                <input type="submit" value="Save" class="button red inframebutton" />
            </fieldset>
} 
```

所以我需要使用一些通用模型：

```
 public class ViewModel<T> {

    public T MainModel { get; set; }
    public ViewPart ViewPart { get; set; }
    } 
```

然后我通过查看这个通用视图并将视图更改为：

```
@model ViewModel<ChangePasswordModel>
@using (Html.BeginForm()) {
            @Html.ValidationSummary(true)
            <fieldset>
                <legend>Change Password</legend>
                <dl>
                    <dt>@Html.LabelFor(model => model.MainModel.OldPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.MainModel.OldPassword)
                        @Html.ValidationMessageFor(model => model.MainModel.OldPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                    <dt>@Html.LabelFor(model => model.MainModel.NewPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.MainModel.NewPassword)
                        @Html.ValidationMessageFor(model => model.MainModel.NewPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                    <dt>@Html.LabelFor(model => model.MainModel.ConfirmPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.MainModel.ConfirmPassword)
                        @Html.ValidationMessageFor(model => model.MainModel.ConfirmPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                </dl>
                    <input type="submit" value="Save" class="button red inframebutton" />
            </fieldset>
} 
```

然后我遇到了`compare`验证问题，正如您在模型比较验证必须比较中看到的那样 `ConfirmPassword`， `NewPassword`但是有了这个新的变化，`ConfirmPassword`与`OldPassword`它的比较就非常紧密了。我认为这可能是因为元素的名称或 ID 发生了变化，所以我尝试

```
[Compare("MainModel.NewPassword", ErrorMessage = "The new password and confirmation password do not match.")] 
```

和

```
[Compare("MainModel_NewPassword", ErrorMessage = "The new password and confirmation password do not match.")] 
```

但他们都没有工作，有什么问题？以及如何使用此新模型进行比较验证？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:38:18.453

你没有参考脚本，下面我修改了编码

**模型 ：**

```
 //[Required(ErrorMessage = "CustomRegex.RequiredErMsg")]
       [Required(ErrorMessage = "Current password is Required")]
    [DataType(DataType.Password)]
    [Display(Name = "Current password")]
    public string OldPassword { get; set; }

      [Required(ErrorMessage = "New password is Required")]
    [DataType(DataType.Password)]
    [Display(Name = "New password")]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm new password")]
    [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
    } 
```

**看法 ：**

```
@model test.Models.password

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@using (Html.BeginForm()) 

{

            <fieldset>
                <legend>Change Password</legend>
                <dl>
                    <dt>@Html.LabelFor(model => model.OldPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.OldPassword)
                        @Html.ValidationMessageFor(model => model.OldPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                    <dt>@Html.LabelFor(model => model.NewPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.NewPassword)
                        @Html.ValidationMessageFor(model => model.NewPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                    <dt>@Html.LabelFor(model => model.ConfirmPassword)</dt>
                    <dd>
                        @Html.EditorFor(model => model.ConfirmPassword)
                        @Html.ValidationMessageFor(model => model.ConfirmPassword, null, new { @class = "invalid-side-note" })
                    </dd>
                </dl>
                    <input type="submit" value="Save" class="button red inframebutton" />
            </fieldset> 
```

# r - 将具有 1 个变量的数据帧转换为向量

> ID：11707445
> 
> 赞同：0
> 
> 时间：2012-07-29T07:18:56.303
> 
> 标签：r, vector, subset

以下代码对数据框进行子集化，但在子集中包含行名：

```
mpg = subset(mtcars, cyl=='6', select=mpg) 
```

如何将生成的 mpg 对象转换为仅包含值的向量？换句话说，我需要从生成的 mpg 对象中删除行名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:24:57.107

你有很多选择。

首先，由于您使用的是`subset`，您可以指定参数`drop=TRUE`，但请参阅此答案后面的警告）：

```
subset(mtcars, cyl=='6', select=mpg, drop=TRUE)
[1] 21.0 21.0 21.4 18.1 19.2 17.8 19.7 
```

但从长远来看，您应该熟悉 R 子集运算符`[`、`[[`和`$`：

```
mtcars[mtcars$cyl==6, "mpg"]
[1] 21.0 21.0 21.4 18.1 19.2 17.8 19.7 
```

* * *

您可以使用该函数简化最后一行代码`with`（但是，请再次查看警告）：

```
with(mtcars, mtcars[cyl==6, "mpg"])
[1] 21.0 21.0 21.4 18.1 19.2 17.8 19.7 
```

* * *

**警告：**某些方面`subset`和`with`可能被认为是有害的。首先在数据框的上下文中评估所有对象。因此，如果您碰巧使用了与数据框中的列同名的变量，您的表达式将计算为列名，而不是您的变量：

```
with(mtcars,mtcars[cyl==6,"mpg"])
[1] 21.0 21.0 21.4 18.1 19.2 17.8 19.7

gear <- 6
with(mtcars,mtcars[cyl==gear,"mpg"])
[1] 22.8 24.4 22.8 32.4 30.4 33.9 27.3 21.4

subset(mtcars, cyl==gear, select=mpg, drop=TRUE)
[1] 22.8 24.4 22.8 32.4 30.4 33.9 27.3 21.4 
```

`with`and`subset`调用来自数据框，而`gear`不是来自您将其设置为 6 的位置。

# node.js - 无法在 openshif 上加载 node.js 脚本

> ID：11707451
> 
> 赞同：1
> 
> 时间：2012-07-29T07:19:44.673
> 
> 标签：node.js, openshift

我在应用程序的 routes 文件夹下有一个名为 countries.js 的简单脚本。它无法启动，因为 index.js 中的这一行

```
 var countries = require('./countries'); 
```

本地一切正常。如何在 openshift 中加载我自己的脚本？文件结构：

```
-app-directory
|
\ public
|
\ views
|
\ routes
   |
   \ index.js
   |
   \ countries.js
|
\ package.json
|
\ server.js 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:51:15.287

我不能说我曾经使用过openshift。您可以尝试`.js`在 require 语句中添加扩展名。如果这不起作用并且我面临着您的困境，我会尝试以下方法，它应该适用于任何平台，尽管它有点明确。

```
var path      = require('path'),
    countries = require(path.resolve(path.join('.','countries.js'))); 
```

如果这仍然不起作用，我建议您开始询问您的托管服务提供商问题。

# c# - 通用将 CSV 转换为列表

> ID：11707452
> 
> 赞同：0
> 
> 时间：2012-07-29T07:20:00.187
> 
> 标签：c#, csv, casting

我编写了这个方法来将逗号分隔的字符串转换为它的类型列表：

```
public List<T> GetListFromString<T>(string commaSplited)
{
  return commaSplited.Split(',').Cast<T>().ToList();
} 
```

但它会抛出一个异常，说“指定的演员表无效。”
我已经用长输入对其进行了测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T07:24:48.433

*如果T*是*字符串*（我测试过），您的代码当然可以工作。

如果*T*是*别的东西*，比如说*int*，你会得到这个异常。

**这个作品**

```
List<string> result = GetListFromString<string>("abc, 123, hij"); 
```

**这失败了**

```
List<int> resultInt = GetListFromString<int>("23, 123, 2"); 
```

那是因为无法将*string*强制转换或转换为*int*，例如以下内容也会失败：

```
int three = (int)"3"; 
```

**修复**

```
public List<T> GetListFromString<T>(string commaSplited)
    {
        return (from e in commaSplited.Split(',') 
                select (T)Convert.ChangeType(e, typeof(T))).ToList();
    } 
```

*但是*，所有给定的字符串都必须可以转换为*T*，例如以下仍然会失败：

```
List<int> resultIntFail = GetListFromString<int>("23, abc, 2"); 
```

因为 "abc" 不能转换为*int*类型。

此外，*T*必须是[System.Convert()](http://msdn.microsoft.com/en-us/library/system.convert.aspx)知道如何从*string*转换为的某种类型。

# c++ - 在函数返回值/参数和类请求的数据传输过程中是否复制了指向内存的指针？

> ID：11707453
> 
> 赞同：2
> 
> 时间：2012-07-29T07:20:04.923
> 
> 标签：c++, pointers, memory-management, pass-by-reference, shared-ptr

假设我有以下功能（类成员在哪里，`mVertexShader`只是持有其他 D3D 东西的 POD）：`std::shared_ptr< ID3D11VertexShader >``mRenderData`

```
void VertexShader::CreateShader( void )
{
    GVertexShader* raw_VertexShader = mVertexShader.get();

    mRenderData->Device->CreateVertexShader(
        mCompiledShader->GetBufferPointer(),
        mCompiledShader->GetBufferSize(),
        NULL,
        &raw_VertexShader
    );

    delete raw_VertexShader;
    raw_VertexShader = NULL;
} 
```

由于`mVertexShader.get()`返回原始指针，删除是否会`raw_VertexShader`影响*内部* `mVertexShader.get()`指针，或者，虽然指向的内存相同，但指针本身完全不同？

我猜是后者，因此为什么首先存在指针引用，但我想确定我的想法是正确的。

**注意：**我目前正在使用 MSVC++，但很高兴听到 MSVC++ 和 MinGW/GCC 实现这一点的方式是否有任何显着差异。

**注2：**如果我不清楚，我很抱歉——我在这里根本不是指 D3D 的语义，而是 C++ 语言本身在内存管理、数据传输和动态内存分配方面的语义。从这个意义上说，我试图准确理解从函数返回原始指针时会发生什么。

即，假设`mVertexShader`正在存储一个指向任意 VertexShader 的简单原始指针，当我调用它的`get()`方法时，它是否返回一个*复制*的指针，该指针指向与位于容器内的内存地址相同的内存地址`shared_ptr`，或者它是一个*全新的*完全被复制并返回的指针，内存被指向*不同*的地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T07:40:30.917

这实际上完全是关于`std::shared_ptr`. 该语言非常乐意支持返回指向对象的指针、复制对象并返回指向该对象的指针或增加对象的引用计数并返回指向它的指针的方法。如果你愿意，你可以做所有这些事情。

共享指针上的`get`方法只返回指向对象的原始指针。没有复制。您*永远不* `delete`应该使用此指针，原因有两个：

1.  另一个对象可能有一个指向同一个对象的共享指针，您将从它下面删除该对象。（这就是共享指针的意义所在。）

2.  当最后一个共享指针消失时，该对象将被删除。删除一个对象两次是 UB，可能会导致您的代码崩溃。（这也是共享指针的意义所在。）

让共享指针完成它们的工作。

请注意，如果您调用`get`共享指针，则应确保保留该共享指针，只要您可能使用所获得的原始指针。否则，该对象可能不复存在。共享指针的逻辑是，只要在引用对象的周围至少保留一个共享指针，它就不会被删除，当最后一个这样的共享指针消失时，对象会自动删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T16:43:13.597

这个问题是关于 Direct3D 的。

（免责声明：我一生中从未做过任何 D3D，我只是在阅读文档的基础上尽我所能，但我想我就在这里！）

您正在调用一个名为`CreateVertexShader`. 别管`shared_ptr`那些东西。你应该像这样开始你的方法：

```
GVertexShader* raw_VertexShader = NULL;  // don't initialize
                                         // with get() or anything like that.
mRenderData->Device->CreateVertexShader(
    mCompiledShader->GetBufferPointer(),
    mCompiledShader->GetBufferSize(),
    NULL,
    &raw_VertexShader
);
// The raw_VertexShader will *not* be NULL any more.  It will have the address
// of the shader that was created by CreateVertexShader. 
```

该方法（我假设）将创建一个 VertexShader。它会在内存中任何它想要的地方创建它，也许是通过`new VertexShaderImplementation(...)`什么。然后，它必须将指向该对象的指针返回给您。它不是通过返回值返回它，而是需要您传入一个指向 ID3D11VertexShader 的指针。它的意思是*“我创建了一个新对象。我有它的地址，即指向 ID3D11VertexShader 的指针。但是为了让我给你地址，我需要你告诉我在哪里写下来。给我指向 ID3D11VertexShader 的指针的地址，我会写在那里。即给我一个指向 ID3D11VertexShader 的指针的指针。”*

`CreateVertexShader`这解释了以 a`**ID3D11VertexShader`作为参数的事实。注意两个`*`s。

**那么，shared_ptr 和这个有什么关系呢？**

（简单的回答：什么都没有！你可以忘记 shared_ptr，但这不是现代 C++。）

当 CreateVertexShader 返回时，指针不被任何共享指针“拥有”。您必须先获取指针（即 run `CreateVertexShader`），然后才能将该对象的所有权授予 shared_ptr。

您*要做*的是安排 D3D 直接将指针“填充”到您的`shared_ptr`. 但这行不通。你需要先让`CreateVertexShader`'返回'它的答案，*然后*你可以把它放到 shared_ptr

```
mVertexShader.reset(raw_VertexShader); // To be called *after* CreateVertexShader 
```

`mVertexShader`现在拥有指针，它是唯一`shared_ptr`这样做的。如果那里已经有任何其他着色器对象，那么它现在*可能会*被删除（取决于它是否是最后一个`shared_ptr`）。

* * *

（.. 待续 ..）

我将尝试直接回答可能造成混淆的原因。我对这句话很感兴趣（我的重点）：

> ...它是否返回一个*复制的指针*，该指针指向与位于 shared_ptr 容器内的内存地址相同的内存地址，或者它是一个完全被复制并返回的*全新指针？*

你在这里误用了“指针”这个词。这个片段不清楚：“完全*复制的**全新指针*”。

 *指针只是一个地址。如果您复制地址，则您只有另一个地址副本。底层的 VertexShader 没有改变。你有一个 VertexShader。您可以拥有任意数量的地址（即指针）副本，它不会改变任何东西。

因此，也许您的意思是问“get() 是否只返回 shared_ptr 拥有的对象的地址？ *或者*，它是否创建了*Shader 对象*的副本（然后具有不同的地址），然后返回复制对象？答案是前者，它只是返回地址。我想你可能已经怀疑了。它返回地址，但你必须将它存储在某个地方，而这种存储必然涉及复制指针。

现在，再次查看新代码：

```
GVertexShader* raw_VertexShader = NULL;
mRenderData->Device->CreateVertexShader(
    mCompiledShader->GetBufferPointer(),
    mCompiledShader->GetBufferSize(),
    NULL,
    &raw_VertexShader
);
mVertexShader.reset(raw_VertexShader); 
```

执行此操作后，仍然只有一个`VertexShader`. 它有一个地址。*但该地址已在两个*地方“写下” 。有*两*件事知道着色器在哪里。`raw_VertexShader`变量仍然有地址。该地址的另一个副本内置于`mVertexShader`.

考虑这两个位置。您不能安排 D3D 将其新创建对象的地址直接写入`mVertexShared`. 你可以把它写进去，`raw_VertexShader`然后复制进去。

请记住，我们只是在这里复制一个地址。地址就像一张纸，考虑一下你住的建筑物的地址。我们可以让 D3D 将它写在一张纸上，然后我们可以将它复制到“特殊”的 shared_ptr 纸上。仅仅因为我们复制了地址，并不意味着建筑物被复制了！

* * *

在调用 CreateVertexShared 之后，在 rest() 之前，您确实知道顶点的地址。您还知道该地址的存储位置。您已将其存储在`raw_VertexShader`. 这意味着你知道地址`raw_VertexShader`——你知道一张纸的地址，上面写着着色器的地址。最后一个地址，一块块的地址，是传递给 CreateVector 的地址。你说*“有一张纸，我要你创建一个顶点着色器，然后在上面写上它的地址。你问是哪张纸？我给你这张纸的地址。”* 我们找不到 shared_ptr 中的那张纸的地址。我们确实知道*写的是什么*在那张纸上（它有 VertexShader 的地址），但我们不知道那张纸的确切位置。

* * *

**删除**

> 删除 raw_VertexShader 是否会影响 mVertexShader.get() 中的指针，或者，虽然指向的内存相同，但指针本身却完全不同？

在 C/C++ 中，您并没有真正“删除”指针。您只需删除指针指向的对象。想象一张纸，上面写着房子的地址。想象一下，您有另一张具有相同地址的纸。现在，如果你打电话`delete pointer1`，你只会拆除其中一所房子。房子将被摧毁，土地将提供给其他可能想在未来某个时候在那里开店的人。但这两张纸都不会改变。他们仍然会在那里拥有地址，并且他们将拥有相同的地址。但这只是一个无效的地址。shared_ptr 将无效，您的程序最终将崩溃（或更糟！）。

如果需要，您可以使用 关闭该功能`raw_VertexShader=NULL;`。这只会从那张纸上删除地址。这可能就是你想要的。您想对自己说“shared_ptr 拥有该对象，它应该是我用来访问着色器的唯一机制。因此，我会整理并删除我拥有的地址的任何备用副本。”

但是应该注意的是，`raw_VertexShader=NULL;`它*什么*也没做。这是对的。我只是将它用作教育工具。它不会*影响*shared_ptr 内的那张纸。

（对不起，回答太长了，我没有时间做一个简短的回答。）*

# php - 如何在我的第一个 php 项目中使用 recaptcha

> ID：11707456
> 
> 赞同：-3
> 
> 时间：2012-07-29T07:20:17.510
> 
> 标签：php, mysql, recaptcha

因为，我是 php 新手。我只想问如何为我的第一个项目实施 ReCaptcha [http://www.textlinkgravity.com](http://www.textlinkgravity.com)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:24:20.910

要使用 re-captcha，您“只需”按照[re-captca 网站](https://developers.google.com/recaptcha/docs/php)上的说明进行操作。这是一步一步的“如何”。如果您遵循所有步骤，您应该能够使其工作

# ruby-on-rails - Rails 3：查询问题

> ID：11707457
> 
> 赞同：0
> 
> 时间：2012-07-29T07:20:46.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在学习 Rails 3 中的“位置”，我想知道为什么我的代码给了我一个 NoMethod 错误。

```
 def create
    #get form values from 'new' page
    @post = Post.new(params[:post])

    #search for the inventory item with the sku code the user typed in the form
    @item = Inventory.where(:sku_code => @post.sku_code)

    #set post variable to a variable from the row with the sku code
    @post.detail = @item.detail

    @post.save
  end 
```

通过搜索 SKU，我想检索相同 id 中的其他变量并将它们设置为我的 @post 变量。谁能帮我一把？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:32:01.337

假设 SKU 代码是唯一的，你必须这样做

```
@post = Post.new(params[:post])

@post.detail = Inventory.where(:sku_code => @post.sku_code).first.try(:detail) 
```

`first`将从数据库中获取第一条（可能是唯一的）记录。如果返回不为零，`try`将尝试获取。`detail``Inventory`

查看[此博客文章](http://everydayrails.com/2011/04/28/rails-try-method.html)以了解有关`try`方法的更多信息。

# google-app-engine - 如何使用 GAE 设置自定义域？

> ID：11707459
> 
> 赞同：0
> 
> 时间：2012-07-29T07:21:22.117
> 
> 标签：google-app-engine, dns

我已按照说明进行操作，现在我可以使用 访问我的 GAE 应用程序`http://www.mydomain.com`，但`http://mydomain.com`无法访问 - google (!) 返回错误 404。我在设置中错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:24:22.520

[Google App Engine 不支持裸域](http://code.google.com/p/googleappengine/issues/detail?id=777&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)，[您需要将请求从](http://support.google.com/a/bin/answer.py?hl=en&answer=2518373) [http://mydomain.com](http://mydomain.com)转发到[http://www.mydomain.com](http://www.mydomain.com)。

# java - 将时间间隔添加到给定的时间字符串

> ID：11707461
> 
> 赞同：2
> 
> 时间：2012-07-29T07:21:25.113
> 
> 标签：java

我需要一个将间隔添加到给定时间字符串的函数。

例子：

字符串时间 =“18:00:00”如果我添加 2 小时，我将得到“20:00:00”。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:25:41.960

您可以使用 a[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)和 a [`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

```
SimpleDateFormat time = new SimpleDateFormat("HH:mm:ss");
Calendar c = Calendar.getInstance();
c.setTime(time.parse("18:00:00"));
c.add(Calendar.HOUR,2);
System.out.println("New time: "+time.format(c.getTime())); 
```

输出将是：

```
New time: 20:00:00 
```

# php - 与 php/javascript 函数调用混淆

> ID：11707462
> 
> 赞同：0
> 
> 时间：2012-07-29T07:21:33.583
> 
> 标签：php, javascript, html

我有一个函数可以在一定范围内生成 13 个没有重复的随机整数。

我不确定下一部分是否正确，但我有一个按钮，在 $_POST 上将发送到我的 php 脚本，该脚本一次从数据库生成*1 个*图像。我需要它从我的 generate_numbers 函数中发送随机数，*全部 13 个。*，因为最后我想通过 1 次单击按钮显示 13 个不同的图像。我该如何解决这个问题？我需要排队吗？

```
**Button to submit to PHP form named display.php**
<input type="submit" name"display" value=generate_numbers()> 
```

* * *

```
 var generate_numbers = function()
     {

        var i, j;
        var array=[];
        for(i=0; i < 13; i++)
        {
            array[i] = Math.floor(Math.random()*14)+16);
                for(j=0;j<i;j++)
                {
                    while(array[i]==array[j])
                    {
                        array[i]= Math.floor(Math.random()*14)+16);
                    }

                }

        return array[i]; 
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:50:15.257

带有表单的页面

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">

        var rndNums = new Array(16,17,18,19,20,21,22,23,24,25,26,27,28);
        var generate_numbers = function()
        {
            for(var i=0; i < 13; i++)
            {
                var idx = Math.floor(Math.random()*rndNums.length);
                var rndNum = rndNums[idx];
                rndNums[idx] = rndNums[rndNums.length - 1];
                rndNums.pop();
                document.getElementsByName("nums[]").item(i).value=rndNum;
            }
        }

    </script>
</head>
<body>
    <form id="numberForm" action="display.php" method="POST">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">
    </form>
    <button onclick="generate_numbers();document.getElementById('numberForm').submit()">submit</button>
</body>
</html> 
```

在 php 端，“display.php”：

```
<?php
    $nums = $_POST['nums']; // array
    foreach($nums as $key => $val)
        echo 'nums['.$key.']='.$val."<br>\n";
    // ...
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:28:53.203

您可以使用 php foreach 循环遍历每个数字。在你的 PHP 文件中是这样的：

```
$images = array();

foreach ($POST['display'] as $num) {
  $img_from_number = get_image_from_number($num);
  $images[] = $img_from_number;
}

// code to display images on page
// or for JSON return $images

function get_image_from_number($num)
  // code here
} 
```

如果你正在做一个 AJAX 表单，你可以通过返回的数组循环来在页面上创建图像元素。

# ruby-on-rails-3 - 是否可以在 Rails 模型中使用关联别名？

> ID：11707463
> 
> 赞同：-1
> 
> 时间：2012-07-29T07:21:40.403
> 
> 标签：ruby-on-rails-3

我有一个具有两个 has_many 关联的模型，它们服务于一个逻辑目的，我想根据某些条件在两者之间交替。我可以有一个方便的方法，但是我不能在 has_many 中使用它：通过关联。

有什么好的出路吗？

**UPD：**型号代码：

```
# encoding: UTF-8

class User < ActiveRecord::Base
  set_table_name 'clients'

  devise(:database_authenticatable,
         #:registerable,
         :recoverable,
         :rememberable,
         :trackable,
         :validatable,
         #:token_authenticatable,
         #:confirmable,
         #:lockable
         #:timeoutable,
         #:omniauthable
  )

  def email_required?
    false
  end

  # Setup accessible (or protected) attributes for your model
  attr_accessible(:email, :login, :password, :password_confirmation, :remember_me, # used by devise
                  :address, :phone, :description)

  attr_accessible :name, :address, :phone, :description
  validates :name, :presence => true

  has_many :slaves, :class_name => 'User', :foreign_key => 'master_id',
           :inverse_of => :master, :dependent => :destroy

  belongs_to :master, :class_name => 'User', :foreign_key => 'master_id',
             :inverse_of => :slaves

  def slave?
    master.present?
  end

  def master?
    not slave?
  end

  validate :slaves_cannot_have_slaves

  has_many :master_facilities, :class_name => 'Facility', :foreign_key => 'client_id'
  has_many :analytics_profiles, :class_name => 'AnalyticsProfile', :foreign_key => 'owner_id',
                                :inverse_of => :owner, :dependent => :destroy

  has_many :facility_permissions
  has_many :slave_facilities, through: :facility_permissions, source: :facility, autosave: true

  has_many :units, :through => :facilities, :foreign_key => 'facility_id'

  # masters and slaves have different ways of accessing their facilities
  # BUT! It's not a true association so a lot of code (e.g. draper) will fail
  def facilities
    if master?
      master_facilities
    else
      slave_facilities
    end
  end

  def dead_units
    self.units.keep_if(&:dead?)
  end

  private

  def slaves_cannot_have_slaves
    unless master? or slaves.empty?
      errors.add :slaves, 'Slaves cannot have slaves'
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:06:41.420

如果我理解正确的问题并且问题是设施关联，它是通过 master_facilities 或 slave_facilities 关联实现的 - 为什么不将基本行为带到模块/类中并将其包含/继承到将实现设施方法的具体类中不同。

# functional-programming - 如何在 Octave 中使用带有自定义功能的地图？

> ID：11707464
> 
> 赞同：10
> 
> 时间：2012-07-29T07:21:46.267
> 
> 标签：functional-programming, octave

假设我有一个集合*A*：

```
A = [0:6:100] 
```

我有一个函数*fib(n)*：

```
function retval=fib(n)
   g1=(1+5^.5)/2
   g2=(1-5^.5)/2
   retval=(1/5^.5)*(g1^n - g2^n)
endfunction 
```

我打算能够在*A上应用**fib(n)*，并将其存储在一个集合中，比如 B ，其中*B[i,j]*是*(i,fib(i))*，所以我可以绘制*i* vs *fib(i)*并在图表上查看结果。

 ***请告知我如何使用*map*来获得所需的集合*B*。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T08:36:36.683

你可以这样做：

```
map(@fib, A) 
```

`@`使之`fib`成为函数句柄。请注意，它`map`已被弃用，您应该`arrayfun`改用：

```
arrayfun(@fib, A) 
```***

# java - 文本文件验证

> ID：11707480
> 
> 赞同：0
> 
> 时间：2012-07-29T07:24:43.397
> 
> 标签：java

我正在尝试验证一些文本文件。在前端我使用 JTextarea，每次用户输入“Enter”键时都会调用以下方法。如果文件太大，比如 5000 行，如果用户多次输入“Enter”键，我会得到意想不到的结果，即使该行有效，它也会显示为无效。

睡眠有什么关系，我应该增加睡眠时间还是必须做其他事情？任何想法都会有所帮助

```
private TreeSet validate(int curLine, TreeSet errorSet) {
    int increment = 0;
    int nextLine = 0;

    if (curLine == lines.length || errorSet.size() != 0) {
        return errorSet;
    } else {
        String line = lines[curLine];

        //validation starts.  After validation, line is incremented as per the requirements

         increment = 1 //As per requirement. Depends on validation results of the line

        if (increment > 0) {
            try{
                 Thread.currentThread().sleep(100);  
               }catch(Exception ex){
                 System.out.println(ex); 
               }
            nextLine = (curLine + increment);
            validate(nextLine, errorSet);
        }
    }
    return errorSet;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:31:27.747

我不会考虑让睡眠时间更长/更短。相反，我会考虑在编组触发器以进行验证方面做得更好。是否有任何理由允许在验证请求进行时输入验证请求？如果没有，我会考虑在当前进程仍未完成时阻止验证调用。

如果您认为应该能够同时进行多个验证，那么我会考虑为这些操作创建一个线程池。测试我确定有多少线程可以同时运行，从而确定你的线程池的大小。此时，系统内存可能也很重要，因此您可能还想在测试时查看这些统计信息。

# android - 安卓屏幕太宽？

> ID：11707486
> 
> 赞同：1
> 
> 时间：2012-07-29T07:25:17.253
> 
> 标签：android, css

我正在尝试为我的 android 设备创建一个小型 Web 应用程序，我正在对其进行测试，并且无论我设置什么正文宽度，我的屏幕（水平）上都有一个滚动条，我得到了滚动条。我注意到 m.facebook.com 没有它。我只是简单地隐藏滚动条吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:56:30.087

尝试 ：

```
webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

^_^，请检查您的 AndroidManifest.xml

```
<uses-sdk android:minSdkVersion="4" /><supports-screens 
          android:largeScreens="true"  
          android:normalScreens="true" 
          android:smallScreens="true" 
          android:anyDensity="true"  
    /> 
```

你必须设置 android:anyDensity="true"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:08:56.217

尝试设置`webView.setHorizontalScrollbarEnabled(false);`为您的`WebView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:04:20.890

尝试`webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);`它会在 WebView 的右边缘上方添加滚动条，而不是制作主题色线。

# android - 仅在android中接收某种类型的消息

> ID：11707489
> 
> 赞同：0
> 
> 时间：2012-07-29T07:25:51.867
> 
> 标签：android, sms, messaging, prefix

我想知道如何为我正在创建的 SMS 应用程序设置前缀（如果是这样的话）以接收某些类型的消息。例子：

我希望我的应用程序仅接收`++`在消息正文开头带有（2 加号）的 SMS。没有 ++ 的普通消息将转到内置的消息传递应用程序。

a) 有可能吗？

b）如果是，那么我应该如何以及在哪里设置它？

c) 我想要更多关于 SMS 应用程序的教程。
请指导我完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:46:38.907

有几个在安卓应用上接收短信的例子。[这是](http://www.anddev.org/recognize-react_on_incoming_sms-t295.html)一个简单的。

仅识别您的消息非常容易。我不知道您是否可以在不让用户看到的情况下删除 SMS 消息。似乎是一个非常大的安全整体，如果在非 root 手机上禁止这样做，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:01:51.650

是的，你可以这么做。

> > 阅读传入的消息。检查消息正文是否有 ++ 符号，如果它的开头有 ++ 符号，则将其保存到您的应用程序数据库并删除该消息

# actionscript-3 - Retina 支持的 AIR 项目尺寸

> ID：11707490
> 
> 赞同：3
> 
> 时间：2012-07-29T07:26:08.860
> 
> 标签：actionscript-3, air, flashdevelop, retina-display, starling-framework

我有点困惑我在 Flash Develop 中设置的**项目尺寸**将如何影响我的 AIR 应用程序在 Retina 和非 Retina iPad 显示器上的外观，以及如何在这些情况下使用位图。

当我在 PC 上运行 Flash Player 进行调试时，2048x1536 不在我的显示器上，它太大了。我听说舞台会随着屏幕的大小而缩放，并且只是一个参考坐标系，但我不明白位图在这些条件下如何工作......位图是否也会自动缩放？我是否将项目尺寸设置为**2048x1546**是否重要？

我开始犹豫的是，我将通过 Starling 使用一些精灵表，我对如何在这些情况下处理它们的尺寸感到困惑。

如果你有知识和一分钟，请让我直截了当。赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:51:27.673

您不必使用 2048x1536。您可以只使用 1024x768 作为您的项目尺寸。确保这`stage.scaleMode = StageScaleMode.SHOW_ALL;`是默认设置，如果我没记错的话。

Retina iPad 只会显示两倍，所以一切都放大到 2048x1536。这意味着您的位图不会看起来那么清晰，但是矢量图确实看起来很清晰，因为 Flash 在视网膜屏幕上使用了额外的分辨率。

如果您在视网膜显示器上，您可以编写一些代码来使用更高分辨率的位图，但除了检查屏幕尺寸之外，我实际上并不知道检测视网膜分辨率的好方法。或者您可以使用将在非视网膜屏幕上按比例缩小的高分辨率位图（确保允许平滑）。

此外，我本人没有使用 Starling 的经验，因此其行为可能会有所不同。无论如何，希望这会有所帮助。

# iphone - 我如何动态创建 UIimageView (XCODE)

> ID：11707492
> 
> 赞同：0
> 
> 时间：2012-07-29T07:26:20.117
> 
> 标签：iphone, xcode, arrays, dynamic, uiimageview

大家好，我正在制作一个 Xcode 应用程序，但现在卡住了 2 天

在我的应用程序中，我必须按照用户声明的数量创建一些图像（哪些球）。

例如，如果用户说让 10 10 个球应出现在同一屏幕上的随机位置，我知道随机位置但不知道该怎么做......我如何连接到界面生成器？

试过这个 1.h UIImageView *c[100];

1米

```
for (int i = 0; i < "users value" ; i++) {
    float x = (float)(67 + ((95 + 22) * i));
    UIImageView *c[i] = [[UIImageView alloc] 
                          initWithFrame:CGRectMake(x, 20.0f, 95.0f, 149.0f)];

    [ballsView[i]setImage:[UIImage imageNamed:@"1.png"]];
    ballsView[i].opaque = YES;        
    ballsView[i].hidden = NO; /* change to YES for distribution */        
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T07:47:58.860

用这个。希望有帮助

```
for (int i = 0; i < "users value" ; i++) 
{
    float x = (float)(67 + ((95 + 22) * i));
    UIImageView *c[i] = [[UIImageView alloc] 
                      initWithFrame:CGRectMake(x, 20.0f, 95.0f, 149.0f)];
    c[i].image=[UIImage imageNamed:@"1.png"]];
    [ballsView[i] addSubView:c[i]];
    ballsView[i].opaque = YES;        
    ballsView[i].hidden = NO; /* change to YES for distribution */        
} 
```

# iphone - Objective C - 隐藏 iVar

> ID：11707495
> 
> 赞同：2
> 
> 时间：2012-07-29T07:27:00.447
> 
> 标签：iphone, objective-c, ios, ios5

这是我的问题。

假设我有一个名为 WebServiceBase.h 的类。我需要在名为 NSString *requestData 的类中添加一个 iVar。但我不需要将该 iVar 添加到头文件中并使其对外部人员可见。（如果我将其作为类库分发）

我还需要能够在从 WebServiceBase.h 扩展的其他类中访问这个 requestData iVar。（这些扩展类是我写的。不是来自外部的人）

我尝试在类扩展中声明 requestData iVar。但是它对扩展类不可见。

有什么解决办法吗？我需要保护我的数据并使其对外部世界隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:52:01.137

您可以通过关键字将您的 ivars 定义为受保护`@protected`，这意味着您的类和所有子类都可以毫无问题地访问它，但编译器不允许其他不从您的基类继承的类：

```
@interface Foo : NSObject
{
@protected
    NSObject *a;
} 
```

它就这么简单，并且已经为您提供了从 Objective-C 可以获得的所有安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:31:41.880

您可以在 @implementation 块中有一个 ivar 定义块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T07:39:45.123

有2种方式，你可以选择你喜欢的一种。

```
 1).h file
    @interface YourClass
    {
    }

    .m file
    @interface YourClass ()
    @property (nonatomic, retain) NSString *title;
    @end

    @implementation YourClass

    @synthesize title;

    //your method

    2) .h flie 
    @interface YourClass
    {
    }

    .m file
    @implementation YourClass  
    {  
        NSString *title;   
    }  

//your method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T08:58:07.227

声明一个在另一个 .h 文件中定义 ivar 的类扩展。称它为`myclass-private.h`. 然后在您的主类和子类中导入该标题。

# c - c malloc 通过将此数组传递给函数来获取二维字符数组

> ID：11707497
> 
> 赞同：2
> 
> 时间：2012-07-29T07:27:24.500
> 
> 标签：c, arrays, char, malloc

我的**char ** array2 有什么问题；**大批？

当 malloc 在 main 函数中时，下面的代码可以正常工作。但是当 malloc 在外部函数中时……这不起作用。

```
void function(int *var1 ,int array1[][3], char** array2);

main(){
 int var1 = 0
 int array1[10][3];
 char ** array2;

 function(&var1 , array1, array2); //Something wrong in here???

 printf("Value of var1: %d\n", var1 );                 /*Display 5 - OK*/
 printf("Value of array1[0][0]: %d\n", array1[0][0] ); /*Display 6 - OK */
 printf("Value of array2[0]: %s\n", array2[0]);        /*Error - Function stops here */
return;
}

void function(int *var1 ,int array1[][3], char** array2)
{
  int i = 0;
  array2= malloc(10 * sizeof(char *));
  for(i = 0; i<10; i++)
  {
    array2[i] =  malloc(10 * sizeof(char *));
    strcpy(array2[i], "SomeText");
  }

  *var1 = 5;

  array1[0][0] = 6; 

  printf("Value of var1: %d\n", var1 );                 /*Display 5 - OK*/
  printf("Value of array1[0][0]: %d\n", array1[0][0] ); /*Display 6 - OK */
  printf("Value of array2[0]: %s\n", array2[0]);        /*Display "SomeText - OK*/

 return;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:35:24.197

看看这个[链接](http://c-faq.com/ptrs/passptrinit.html)。您需要了解函数变量如何在 C**中传递。变量在 C 中按值传递**。

试试这个代码：

```
void function(int *var1 ,int array1[][3], char*** array2);

int main(int argc, char*argv[]){
     int var1 = 0;
     int array1[10][3];
     char **array2;

     function(&var1 , array1, &array2); //Something wrong in here???

     printf("Value of var1: %d\n", var1 );                 /*Display 5 - OK*/
     printf("Value of array1[0][0]: %d\n", array1[0][0] ); /*Display 6 - OK */
     printf("Value of array2[0]: %s\n", array2[0]);        /*Error - Function stops here */
    return;
}

void function(int *var1 ,int array1[][3], char*** array2)
{
  int i = 0;
  (*array2)= malloc(10 * sizeof(char *));
  for(i = 0; i<10; i++)
  {
    (*array2)[i] =  malloc(10 * sizeof(char *));
    strcpy((*array2)[i], "SomeText");
  }

  *var1 = 5;

  array1[0][0] = 6;

  printf("Value of var1: %d\n", *var1 );                 /*Display 5 - OK*/
  printf("Value of array1[0][0]: %d\n", array1[0][0] ); /*Display 6 - OK */
  printf("Value of array2[0]: %s\n", (*array2)[0]);        /*Display "SomeText - OK*/

 return;

} 
```

**通过值传递：（在 C 中）**从此[链接](http://wiki.answers.com/Q/What_is_the_difference_between_pass_by_value_and_pass_by_reference_in_c#ixzz21zkhnZLj)。

*   在此方法中传递变量的值。对形式的更改不会影响实际参数。
*   将为这两个变量创建不同的内存位置。
*   这里将在函数堆栈中创建临时变量，它不会影响原始变量。

这就解释了为什么你的变量`array2`在你的函数中没有改变。C 中的变量——不管它是否是指针——总是按值传递。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:42:32.537

改变

```
char ** array2; 
```

和

```
char * array2; 
```

改变

```
function(&var1 , array1, array2); //Something wrong in here??? 
```

和

```
function(&var1 , array1, &array2); 
```

你会没事的。

您的问题是您将array2（尽管是指针）作为函数中的值传递。
这意味着您对它所做的任何更改在函数结束后都不会“看到”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T09:01:58.037

在调用你的函数之前，你有这些：

```
(gdb) p/x &array1
$7 = 0x7fffffffe080
(gdb) p/x &array2
$8 = 0x7fffffffe108
(gdb) p/x array2
$9 = 0x0 
```

所以你`array1`和`array2`两者都驻留在堆栈中。**array2**没有价值。它没有指向任何东西。

现在让我们调用该函数，

函数有它的调用状态，比如

```
function (var1=0x7fffffffe104, array1=0x7fffffffe080, array2=0x0) 
```

它是预期的，因为您`array2`没有初始化。

但是在函数里面看看位于哪里`array2`，

```
(gdb) p/x &array2
$10 = 0x7fffffffe038
(gdb) p/x &array1
$11 = 0x7fffffffe040 
```

将此值与之前的值进行比较`&array2`。你看到`array2`的是位于不同内存区域的两种情况。此图将帮助您了解会发生什么：

```
main()'s stack : 
+---------------+
|0x7fffffffe080 |
+---------------+                  
array1
+---------------+
|0x7fffffffe108 |
+---------------+
array2

function's stack

+---------------+
|0x7fffffffe040 |
+---------------+                  
array1
+---------------+
|0x7fffffffe038 |
+---------------+ 
array2 
```

所以我想你已经明白了，当你将任何东西传递给一个函数时，它会得到位于它自己堆栈中的原始副本。

你不能用未初始化的指针做任何事情。如果您真的想更改位于调用者堆栈中的指针，则需要将指针传递给原始指针。

可以说，

```
int * p; /* now it means */ 

p:
+---------------+------------+
| 0xABCD        |  0x00      |
+---------------+------------+ 
```

如果我在堆栈中调用类似`foo(&p)`then的函数：`foo`

```
+---------------+------------+
| 0xEFGH        |  0xABCD    |
+---------------+------------+ 
```

现在我们有了一个指向原始存储的指针。所以我们可以用它做任何事情。

了解像普通变量指针一样也遵循类似的规则非常重要。

您可以通过指向它的指针传递“普通”变量的引用。但是，如果您想传递对指针本身的引用，则必须进行另一层间接。

如果你返回一个指针，你可以达到类似的效果。您可以在本地初始化一个指针并将其返回给调用者。

# mysql - 更新前触发器生成哈希的语法

> ID：11707511
> 
> 赞同：2
> 
> 时间：2012-07-29T07:30:16.217
> 
> 标签：mysql, sql, syntax, triggers, mysql-workbench

如何获取更新后生成的哈希？

```
thufir@dur:~$ 
thufir@dur:~$ mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 138
Server version: 5.1.58-1ubuntu1 (Ubuntu)

Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL v2 license

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use nntp;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+---------------------+
| Tables_in_nntp      |
+---------------------+
| articles            |
| newsgroups          |
| newsgroups_articles |
+---------------------+
3 rows in set (0.00 sec)

mysql> describe newsgroups;
+-----------+----------+------+-----+---------+----------------+
| Field     | Type     | Null | Key | Default | Extra          |
+-----------+----------+------+-----+---------+----------------+
| id        | int(11)  | NO   | PRI | NULL    | auto_increment |
| newsgroup | longtext | NO   |     | NULL    |                |
| hash      | char(32) | NO   |     | NULL    |                |
+-----------+----------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> show triggers;
+-----------+--------+------------+-----------------------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
| Trigger   | Event  | Table      | Statement                                           | Timing | Created | sql_mode | Definer        | character_set_client | collation_connection | Database Collation |
+-----------+--------+------------+-----------------------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
| make_hash | INSERT | newsgroups | BEGIN
    set new.hash = md5(new.newsgroup);
  END | BEFORE | NULL    |          | root@localhost | utf8                 | utf8_general_ci      | latin1_swedish_ci  |
+-----------+--------+------------+-----------------------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
1 row in set (0.00 sec)

mysql> 
mysql> 
mysql> DELIMITER $$
mysql> 
mysql> USE `nntp`$$
Database changed
mysql> CREATE
    -> TRIGGER `nntp`.`make_hash_update`
    -> AFTER UPDATE ON `nntp`.`newsgroups`
    -> FOR EACH ROW
    -> BEGIN
    -> set old.hash = md5(new.newsgroup);
    -> END$$
ERROR 1362 (HY000): Updating of OLD row is not allowed in trigger
mysql> 
mysql> quit;
    -> exit
    -> ^CCtrl-C -- exit!
Aborted
thufir@dur:~$ 
```

另外，在工作台上，我看到了旧触发器：

![在此处输入图像描述](../Images/27c74a82e28969cb60e74c0dc5bf5179.png)

但看不到如何添加额外的触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:44:54.650

不是更新后，是更新前，新的。不太了解语法，但这至少不会产生语法错误。想要使用工作台：

```
thufir@dur:~$ 
thufir@dur:~$ mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 144
Server version: 5.1.58-1ubuntu1 (Ubuntu)

Copyright (c) 2000, 2010, Oracle and/or its affiliates. All rights reserved.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL v2 license

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use nntp;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show triggers;
+-----------+--------+------------+-----------------------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
| Trigger   | Event  | Table      | Statement                                           | Timing | Created | sql_mode | Definer        | character_set_client | collation_connection | Database Collation |
+-----------+--------+------------+-----------------------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
| make_hash | INSERT | newsgroups | BEGIN
    set new.hash = md5(new.newsgroup);
  END | BEFORE | NULL    |          | root@localhost | utf8                 | utf8_general_ci      | latin1_swedish_ci  |
+-----------+--------+------------+-----------------------------------------------------+--------+---------+----------+----------------+----------------------+----------------------+--------------------+
1 row in set (0.00 sec)

mysql> show create trigger make_hash;
+-----------+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Trigger   | sql_mode | SQL Original Statement                                                                                                                                             | character_set_client | collation_connection | Database Collation |
+-----------+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| make_hash |          | CREATE DEFINER=`root`@`localhost` TRIGGER `nntp`.`make_hash`
BEFORE INSERT ON `nntp`.`newsgroups`
FOR EACH ROW
BEGIN
    set new.hash = md5(new.newsgroup);
  END | utf8                 | utf8_general_ci      | latin1_swedish_ci  |
+-----------+----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.00 sec)

mysql> 
mysql> DELIMITER $$
mysql> 
mysql> USE `nntp`$$
Database changed
mysql> CREATE
    -> TRIGGER `nntp`.`make_hash_update`
    -> BEFORE UPDATE ON `nntp`.`newsgroups`
    -> FOR EACH ROW
    -> BEGIN
    -> set new.hash = md5(new.newsgroup);
    -> END$$
Query OK, 0 rows affected (0.19 sec)

mysql> 
mysql> show triggers;
    -> ^CCtrl-C -- exit!
Aborted
thufir@dur:~$ 
```

# html - 显示数据列表的响应式设计

> ID：11707515
> 
> 赞同：1
> 
> 时间：2012-07-29T07:31:21.583
> 
> 标签：html, css, responsive-design, html-table

我正在尝试使用表格在桌面版网站的表格中显示数据列表。我想为移动网络压缩同样的内容。我应该使用单独的 html 块还是可以将当前表格转换为移动视图。

[http://play.mink7.com/h/startupsradar/pending.html](http://play.mink7.com/h/startupsradar/pending.html)

我喜欢移动设备上的以下列表视图

![在此处输入图像描述](../Images/f5bde5ad374baf521ed1dc5415b0b0c9.png)

**更新** 我根据答案修改了代码。知道如何使整个列表像一个块一样可点击吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:39:11.320

您可以使用手持设备特定的样式表属性转换相同的块，`media="screen and (max-device-width: /* whatever */)"`如下所示：

```
<link rel="stylesheet" href="whatever.css" type="text/css" media="screen and (max-device-width: /* whatever */)"> 
```

或者您可以`@media`在样式表中使用

```
@media only screen and (max-device-width: /* whatever */) {
    /* Styles goes here */
} 
```

[**媒体信息**](http://www.w3.org/TR/css3-mediaqueries/)

> PS我刚刚看到[nike.com](http://www.nike.com/in/en_gb/)的来源，他们正在使用ipad.css样式表的样式表属性，看看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T08:02:39.027

您可以将 HTML`table`转换为不同的渲染，例如设置

```
table { display: block; }
tr { display: table; }
th, td { display: table-row; } 
```

这将导致完全垂直的呈现。

当然，细节取决于标记和所需的渲染。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:00:23.763

如果 CSS3 可以接受，您可以使用[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)为不同的尺寸和设备创建不同的样式。您可以通过这种方式创建令人难以置信的动态网站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T08:18:54.883

通常，表格数据可以将表格行拉伸到不希望的长度，超出表格行的范围。在处理移动设备时，您的 px 将受到限制。您可以创建现有 CSS 样式表的副本并稍微编辑它，为您的网站切换到移动设备时的表格设置最小/最大宽度。

```
max-width: __px;  
min-width: __px; 
etc. 
```

或者，您可以在切换到移动站点附加 CSS 时调用 JS 函数

```
$('#tableName').css('max-width', '150px');
$('#tableName').append(div).css('max-width', '150px'); 
```

JS 版本可能有点棘手，我认为你应该对 CSS 设置限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T07:49:33.463

我可以建议的媒体查询是响应式设计的最佳解决方案。

让我给你一个基于页面宽度的简单响应代码。

在代码中，我使用媒体查询根据浏览器宽度更改 para 颜色。您可以改为使用 style=display:none 隐藏或根据浏览器宽度更改内容的大小。

```
<html>
<head>
<style>
@media (max-width: 600px) {
   #p1{
   color:red;
   }
}
@media (max-width: 400px) {
   #p1{
   color:blue;
   }
}
</style>

</head>
<body>
<p id="p1" media="(max-width: 800px)">Hi , This text colour change according to browser size.</p>

</body>
</html> 
```

你可以[在这里找到更多教程](http://css-tricks.com/css-media-queries/)

# php - php中contentPlaceHolder的等价

> ID：11707518
> 
> 赞同：2
> 
> 时间：2012-07-29T07:31:57.573
> 
> 标签：php, codeigniter

我正在使用 PHP 和 CodeIgniter。在每个视图文件中，我都包含`header.php`，如下所示：

```
<head>
  <link rel="...">
  <script type="text/javascript">...</script>
</head> 
```

请注意，此文件中的 head 标记已关闭。现在我想`<script>`在另一个文件中添加一个标签而不修改`header.php`. C# 具有`ContentPlaceHolder`可用于指示可以在 head 标记中添加标记的位置。php中是否有任何等价物？如果没有，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:50:19.957

您可以通过在控制器中添加单个变量来轻松地在标题中添加其他脚本，如下所示：

控制器：

```
$data['myScript'] = '<link rel="..."><script type="text/javascript">...</script>';
$this->load->view('myView',$data); 
```

然后在你的 header.php 中添加：

```
<head>
  <link rel="...">
  <script type="text/javascript">...</script>
  <?php if (isset($myScript)) echo $myScript; ?>
</head> 
```

这为每个视图创建了一个非常可定制的模板，因为您只能在需要它们的视图中添加脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:52:34.037

这是我通常对任何 CodeIgniter 项目所做的事情......

我扩展了 HTML 帮助程序 ( `application/helpers/MY_html_helper.php`) 以包含一个`js()`函数：

```
function js($js)
{
    $js_base_path = '';

    // If you have multiple JS files, pass an array
    if(is_array($js))
    {
        foreach($js as $script_src)
        {
            if(strpos($script_src, 'http://') === false && strpos($script_src, 'https://') === false)
            {
                $js_base_path = base_url() . 'js/';
            }
            echo '<script src="' . $js_base_path . $script_src . '"></script>';
        }
    }

    // Otherwise, a string will do
    else
    {
        if(strpos($js, 'http://') === false && strpos($js, 'https://') === false)
        {
            $js_base_path = base_url() . 'js/';
        }
        echo '<script src="' . $js_base_path . $js . '"></script>';
    }
} 
```

在我的控制器中，我将在[页脚](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)（在您的情况下为页眉）包含一个`js`参数：

```
$this->load->view('_footer', array('js'=>'jquery.cycle.lite.js')); 
```

我的`_footer`视图运行这样的`js()`功能：

```
<?php
if(isset($js))
{
    $this->load->helper('html');
    js($js);
}
?> 
```

* * *

这对我来说非常有用，请随时根据您的需要对其进行自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T19:30:34.070

Phil Sturgeon 的模板库为此提供了一些方便的功能：http: [//philsturgeon.co.uk/demos/codeigniter-template/user_guide/library.html#prepend_metadata](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/library.html#prepend_metadata)

# sql - 如何更新小时和分钟

> ID：11707523
> 
> 赞同：-1
> 
> 时间：2012-07-29T07:32:50.950
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

桌子

```
time (varchar)

2
1.5
3
5
2
2.5

... 
```

我想以日期时间格式转换时间，例如 02:00 (HH:MM)，2.5 或 1.5 应该是 02:30 小时，01:30 小时

预期产出

```
time (varchar)

02:00
01:30
03:00
05:00
02:00
02:30

... 
```

如何在 sql 中执行此操作

需要sql查询帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:40:36.400

实际上，这可能要容易得多（您`CAST`可以`time`或`datetime`）

```
CAST(DATEADD(SECOND, n * 60, 0.0) as time) 
```

但是如果你想要一个`varchar`实现

```
LTRIM(CAST(n as int)) 
+ RIGHT('0' + LTRIM(CAST((n % 1) * 60) as int), 2) 
```

`n`你的号码在哪里。

`LTRIM`用作将数字转换为`varchar`. 我们`CAST` `n`要`int`获取小时部分，然后我们从`n`获取剩余部分以获取一小时的剩余部分并使用 转换为分钟`* 60`。然后我们`CAST`用分钟来`int`截断小数位，使用`RIGHT`并在左边填充一个零，以确保它正好是两个字符宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:30:02.563

试试这个

```
create table t(tim varchar(10))

insert into t
VALUES('2'),('1.5'),('3'),('5'),('2'),('2.5')

select LEN(LEFT(tim,CHARINDEX('.',tim,1))),tim,CASE WHEN CHARINDEX('.',tim,1)>0 then 
CASE WHEN LEN(LEFT(tim,CHARINDEX('.',tim,1)-1))=1 then '0'+LEFT(tim,CHARINDEX('.',tim,1)) else LEFT(tim,CHARINDEX('.',tim,1)) end +':'+cast(cast((cast(right(tim,len(tim)-CHARINDEX('.',tim,1)) as int)*60.0)/10 as int) as varchar) 
else '0'+tim+':00' end from t 
```

# windows-runtime - Windows 8 Metro C# 相机

> ID：11707524
> 
> 赞同：0
> 
> 时间：2012-07-29T07:32:52.940
> 
> 标签：windows-runtime, webcam, winrt-xaml, windows-store-apps

我在 Win8 Metro 中遇到网络摄像头问题。我想制作一个应用程序，该应用程序将利用来自网络摄像头的 photo.source 视频。不幸的是，我只发现了这个[如何在 Windows 8 Metro 风格应用程序中获取相机信息？](https://stackoverflow.com/questions/9469011/how-to-get-camera-feeds-in-windows-8-metro-style-app)并且应用程序仅打开捕获，我只需要显示网络摄像头。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:50:58.207

您可以使用[CaptureElement](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.captureelement.aspx)将相机源集成到您的应用程序中。在 XAML 中：

```
<CaptureElement x:Name="capElement" Width="400"></CaptureElement> 
```

在代码隐藏中，您需要激活源：

```
MediaCapture captureMgr = new MediaCapture();
await captureMgr.InitializeAsync();

capElement.Source = captureMgr;

await captureMgr.StartPreviewAsync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:42:10.477

你的意思是这样的？[windowsapps/CameraCaptureUI](http://code.msdn.microsoft.com/windowsapps/CameraCaptureUI-Sample-845a53ac/sourcecode?fileId=43599&pathId=1382670463)

# apache - Apache mod_rewrite RewriteCond -U 标志误报

> ID：11707526
> 
> 赞同：0
> 
> 时间：2012-07-29T07:33:17.427
> 
> 标签：apache, mod-rewrite

这就是我想要做的：任何无法在一台机器上解析的 URI 都会通过反向代理撞到另一台机器上。配置如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !-U
RewriteRule ^/(.*)$ http://other.site/$1 [P,NS] 
```

现在，应该说的是“如果我无法通过运行子请求在本地找到任何东西，请将其发送到代理。”

唯一的问题是，它不这样做。随着 RewriteLogLevel 被顶起，我得到了这个：

```
31.3.3.7 - - [29/Jul/2012:00:26:18 --0700] [internet.srs.bznz/sid#7fc6099fa228][rid#7fc609bf2bf0/initial] (5) RewriteCond URI (-U) check: path=/ -> status=200
31.3.3.7 - - [29/Jul/2012:00:26:18 --0700] [internet.srs.bznz/sid#7fc6099fa228][rid#7fc609bf2bf0/initial] (4) RewriteCond: input='/' pattern='!-U' => not-matched 
```

那台机器上/上什么都没有。它应该返回 403。所以我的问题是：200 OK 到底是从哪里来的？这是一个全新的 Debian VPS，所以配置中没有任何污染。我在其他地方（Ubuntu 12.04）也尝试过同样的事情。

如何找出导致错误成功代码的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:30:10.057

同样的问题。此外，我通过添加增强配置

> `RewriteCond %{IS_SUBREQ} =false`

作为第一个测试条件。我认为否则它将是永无止境的递归。

但我的经验是，任何现有或不存在的 URI 都被评估为 OK (200)。我不知道为什么，但它可能只测试该 URI 的服务器配置 - 路径是被允许还是被`Deny from all`拒绝`RewriteRule [F]`

# c++ - gcc中class(*)()的含义

> ID：11707533
> 
> 赞同：2
> 
> 时间：2012-07-29T07:34:29.163
> 
> 标签：c++, templates, gcc, most-vexing-parse

我无法理解这个编译器错误。我在帖子标题中写了 class(*)() 因为我正在实例化的类称为“不透明”，但该名称不提供信息或相关。它是一个模板化的循环缓冲区和一些测试。我正在使用 opaque 类来测试具有完整类/结构类型的数据结构。我也在使用原语（目前是 int）进行测试，并且该测试函数不会给我这个编译器错误。还有比这更多的代码，但我提供了我认为相关的部分。如果您有兴趣，完整的代码在[这里。](https://gist.github.com/3196485)

gcc 错误：

```
tests.cpp: In function ‘bool opaque_fill_test(int)’:
tests.cpp:97:23: error: no matching function for call to ‘CircBuf<opaque>::remove(opaque (*)())’ 
```

测试.cpp：

```
struct opaque {
  int id;
  opaque(int n): id(n) {} 
  opaque operator=(const opaque &o) { this->id = o.id; }
};

opaque rcv();
CircBuf<opaque> c(size);
for (int i=0; i<size; i++) {
    if ( c.remove(&rcv)) {
        if (rcv.id != i ) {
            cout << "wrong value: " << rcv << " "
            << "should be: " << i << endl;
            return false;
        }
    } else {
        cout << "remove fail at i=" << rcv << endl;
        return false;
    }
} 
```

CircBuf.h：

```
template<typename T> class CircBuf {
    ...
    template<typename T> bool CircBuf<T>::remove(T *t) {
       ...
       *t = data[front];
       ... 
```

如果我声明一个 opaque* 并将其传递给删除：

```
opaque rcv();
opaque* p = &rcv;
for (int i=0; i<size; i++) {
  if ( c.remove(p)) {
    ...
    ... 
```

我得到一个类似的错误：

```
tests.cpp: In function ‘bool opaque_fill_test(int)’:
tests.cpp:96:16: error: cannot convert ‘opaque (*)()’ to ‘opaque*’ in initialization 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:42:54.627

如果您有声明`foo x();`，则表达式`&x`实际上是一个函数指针，可分配给类似`foo *(y)()`. 您上一个示例中的`p`变量不是这样的函数指针，而只是指向结构的指针`opaque`。因此，您不能将函数指针分配给该变量。

[编辑] 刚刚记住：也许您打算声明一个`opaque`变量并使用默认构造函数对其进行初始化。然后省略括号。这是 C 语言中遗留下来的语法。如果您实际上将值放在两者之间以调用不同的构造函数，则只能在其中使用括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:48:14.767

你在做什么：

```
opaque rcv(); 
```

是您正在“声明一个函数”，其名称`rcv`具有返回类型`opaque`，并且不带任何参数。[检查此链接](http://en.wikipedia.org/wiki/Most_vexing_parse)

去掉括号：

```
opaque rcv; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T07:56:07.530

你遇到了[最令人头疼的 parse](http://en.wikipedia.org/wiki/Most_vexing_parse)。

> 如果我声明一个 opaque* 并将其传递给删除：
> 
> ```
> opaque rcv(); 
> ```

这声明了一个返回的函数`opaque`，而不是默认初始化的`opaque`。而是使用`opaque rcv;`or `opaque rcv = {};`。

至于错误信息，`opaque (*)()`是指向返回函数的指针的类型`opaque`。“函数”的名称在用于调用以外的其他内容时被隐式转换为指针。

# python - Python：使用大字符串时出现内存错误

> ID：11707540
> 
> 赞同：-1
> 
> 时间：2012-07-29T07:36:08.913
> 
> 标签：python, string, memory

基本上，我在设计一个网络搜索引擎，所以我设计了一个爬虫来获取网页。

读入时，网页是html格式的，所以所有的标签都在那里。我需要从正文和标题中提取关键字，所以我试图删除所有标签（'<' 和 '>' 之间的任何标签）

下面的代码适用于小型 html 页面，但是当我尝试大规模使用它时（即从[http://www.google.com](http://www.google.com)开始），我的内存不足。

```
0 def remove_tags(self, s):
1     while '<' in s:
2         start = s.index('<')
3         end = s.index('>')
4         s = s[:start] + " " + s[end+1:]
5     return s.split() 
```

内存错误发生在第 4 行。如何修复我的代码，以便获取 s 的子字符串不会消耗过多的内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T07:45:38.113

你的一般方法是错误的。首先，使用真正的 XML/HTML 解析器。像 BeautifulSoup 这样的东西，当涉及到糟糕的 HTML 时，它是宽容的。`<`你的观察方法`>`不会持续很长时间。

其次，你已经将整件事读入记忆中，并在那里玩弄它。这会消耗内存，并且您正在执行的某些操作可能会创建副本，这也不是一件好事。相反，迭代输入流并在看到数据时对其进行处理。将`remove_tags`其视为输入的过滤器，而不是文本处理功能。

# ruby-on-rails - ruby on rails db 设置格式/活动记录检索

> ID：11707542
> 
> 赞同：0
> 
> 时间：2012-07-29T07:36:27.023
> 
> 标签：ruby-on-rails, database, activerecord, many-to-many

我的应用具有*user*、*photo*和*state*模型，设置如下：

> 一个*州*有很多用户。
> 
> 一个*用户*有很多照片。

我将照片视图设置为主页（application.root）。我正在尝试设置一个*选择*标签来过滤所选状态的照片。

在视图中：

```
<%= form_tag photos_path, :method => 'get' do%>
    <%= select("state", "name", State.all.collect(&:name)) %>
    <%= submit_tag "State" %>
<% end %> 
```

在控制器中：

```
if params[:state]
    statesmen = State.find_by_name(params[:state][:name]).users
    statesmen.each do |person|
        @photos = @photos <<  Photo.where(:user_id => person.id)
    end
end 
```

# 问题：

*   有没有更好的方法来收集照片？
*   目前，*照片*表只有一`user_id`列。我也应该创建一个`state_id`列吗？
*   目前的方法有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:43:13.263

因此，您的关联设置如下：

状态.rb

```
has_many :users 
```

用户.rb

```
belongs_to :state
has_many :photos 
```

照片.rb

```
belongs_to :user 
```

只需添加到 state.rb

```
has_many :photos, :through => :users 
```

然后你可以这样做：

```
@photos = State.find_by_name(params[:state][:name]).photos 
```

# .net - GDI+ 异常中出现一般错误

> ID：11707543
> 
> 赞同：0
> 
> 时间：2012-07-29T07:36:27.957
> 
> 标签：.net, vb.net, bitmap

我有几行 VB.NET 代码：

```
 Dim dest As String = "C:\Users\Yonapms1\Desktop\Sample Pictures2"
   Dim img As Bitmap = New Bitmap("C:\Users\Yonapms1\Desktop\Sample Pictures\Tulips.jpg")

    img.Save(dest) 
```

在 **img.Save(dest)** 行中，我得到了这个异常：

知道为什么我得到这个例外吗？

**GDI+ 中出现一般错误。**

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:50:12.377

看起来您可能正试图将图像从名为“Sample Pictures”的文件夹移动到另一个名为“Sample Pictures2”的文件夹。如果是这样，您最好执行以下操作：

```
File.Move("C:\Users\Yonapms1\Desktop\Sample Pictures\Tulips.jpg", "C:\Users\Yonapms1\Desktop\Sample Pictures2\Tulips.jpg") 
```

# drupal - 创建 drupal 视图字段处理程序的正确方法

> ID：11707544
> 
> 赞同：1
> 
> 时间：2012-07-29T07:36:58.220
> 
> 标签：drupal, drupal-7, views

我的意思是在视图中有自定义日期处理程序，根据视图文档，我应该实现 hook_views_api 和 hook_views_data。

我的伪

```
 function mymodule_views_api() {
  return array(
 'api' => views_api_version(),
 );
 } 
```

在 hook_views_data()

```
function mymodule_views_data() {
  $data = array();
  $data['node']['created'] = array(
 'group' => t('Mul2'),
'title' => t('Post date'), // The item it appears as on the UI,
'help' => t('The date the content was posted.'), // The help that appears on the UI,
'field' => array(
  'handler' => 'views_handler_field_date',
  'click sortable' => TRUE,
),
'sort' => array(
  'handler' => 'views_handler_sort_date',
),
'filter' => array(
  'handler' => 'views_handler_filter_date',
),
);
return $data; 
```

}

没关系，创建一个视图字段组（Mul2）， ![在此处输入图像描述](../Images/7a24853e502f89cd6e2885003a306a28.png) 我将它设置为用于测试的处理日期处理程序，但它不能正常工作，只显示***Mul2: Array***和配置中的损坏/丢失处理程序。

我尝试使用视图数据成功获取自定义表的数据。在处理之前为字段设置处理程序是否正确（如在节点中创建）？任何解决方案？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:29:34.993

Impelementation 的方法是正确的，我的错误是使用了一个在为其设置处理程序之前的字段 `$data['node']['created']`。如果您想更改已使用的已处理字段的默认处理程序，`hook_views_data_alter(&$data)`而不是尝试再次为其设置处理程序！！！（Mul2：数组，因为您尝试为已处理字段设置处理程序）。

# php - 在连接表 Mysql 上插入

> ID：11707548
> 
> 赞同：1
> 
> 时间：2012-07-29T07:38:07.283
> 
> 标签：php, mysql, sql, database, join

我已经看到了几个关于此的问题和答案，但没有一个与我的问题非常相似，所以现在我要问了。

这是情况

我有一张名为`users`,`roles`和`user_role`

**表**： `users`

**字段**：`user_id`，，，`username`_`password`

**表**：角色

**字段**：`role_id`，`role_name`

**表**：用户角色

**字段**：`user_id`，`role_id`

**`user_role.user_id`is的**外键**`user.user_id`**

 ****`user_role.role_id`is的**外键**`role.role_id`**

 **我的问题是当我创建用户时，我还想将他们的角色设置为默认值或我在 element.xml 中选择的选定值`<select>`。

我尝试了几件事，例如：

```
INSERT INTO users as t1 (t1.username, t1.password, t2.role)
JOIN user_role as t2 ON t1.user_id = t2.user_id
VALUES (:username, :password, :role) 
```

我做错了吗？

编辑因为下面的答案

我觉得还是有问题，它给了我一个空白屏幕

```
$this->db->beginTransaction();
$string = "INSERT INTO users (username, password)
VALUES (:user,:pass,:first,:middle,:last,:course)";
$sth = $this->db->prepare($string);
$sth->execute(array(
':user'=> $data['user'],
':pass'=> $data['pass']
));

$sth = $this->db->prepare("INSERT INTO user_roles (user_id, role_id)
VALUES (' . $this->db->lastInsertId(user_id) . ', :role)");
$sth->execute(array(
':role' => 3
));

$this->db->commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:51:03.597

由于您似乎正在使用 PHP 和 PDO，因此这个简化的代码将处理您的插入：

```
$pdo->beginTransaction();
$stmt = $conn->prepare('INSERT INTO users (username, password) VALUES (?, ?)');
$stmt->execute(array($username, $password));

$stmt = $conn->prepare('INSERT INTO user_roles (user_id, role_id) VALUES (' . $pdo->lastInsertId() . ', ?)');
$stmt->execute(array($role));
$pdo->commit(); 
```

将用户插入`users`表后，返回的值`$pdo->lastInsertId()`是`id`刚刚插入`users`表中的值。

阅读有关[lastInsertId()](http://php.net/manual/en/pdo.lastinsertid.php)的更多信息。

将这两个插入语句包含在事务中，您就可以开始了。****

# php - PHP：如何在每次使用包含 eval() 的函数之前重置全局变量

> ID：11707549
> 
> 赞同：2
> 
> 时间：2012-07-29T07:38:20.657
> 
> 标签：php, function, global-variables, eval, global

我在网站上有以下代码。

```
$magic_number_output = 'The magic number is: $magic_number';

function show_magic_number($magic_number) {
  global $magic_number_output;

  eval("\$magic_number_output = \"$magic_number_output\";");

  echo '
  ' . $magic_number_output;

} 
```

该变量`$magic_number_output`在一个单独的 PHP 文件中设置，然后在函数内使用 global 引用，因为对于不同的语言会有不同版本的该变量。`$magic_number`被传递给函数，并在变量中使用`eval()`. 但是，当函数被多次调用时，`$magic_number`发送给函数的第一个值不会改变。例如，如果这样调用：

```
show_magic_number(5);
show_magic_number(2000); 
```

...输出是这样的：

```
幻数是：5
幻数是：5
```

...当我希望它是这样的时候：

```
幻数是：5
神奇的数字是：2000
```

显然，我误解了如何`global`和`eval()`工作，并尝试寻找答案和实验，但我实在是太菜鸟了，无法找出解决方案。我认为可能有某种方法可以每次都重置全局变量，这样它就不会继续引用第一次发送给函数的`$magic_number`(ie )。`5`

任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:48:43.977

尝试这个。它至少会摆脱`eval()`

```
$magic_number_output = 'The magic number is: $magic_number';

function show_magic_number($magic_number) {
  global $magic_number_output;

  $output=$magic_number_output;
  echo str_replace('$magic_number',$magic_number,$output);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:52:00.173

不使用`eval`，看一下[sprintf](http://www.php.net/manual/en/function.sprintf.php)函数：

```
$magic_number_output = 'The magic number is: %d';

function show_magic_number($magic_number) {
  global $magic_number_output;
  echo sprintf($magic_number_output, $magic_number);
} 
```

# c - unix 读写功能

> ID：11707554
> 
> 赞同：2
> 
> 时间：2012-07-29T07:40:21.797
> 
> 标签：c, unix, kr-c

```
/*
Low Level I/O - Read and Write
Chapter 8 - The C Programming Language - K&R
Header file in the original code is "syscalls.h"
Also BUFSIZ is supposed to be defined in the same header file   
*/

#include <sys/types.h>
#include <sys/uio.h>
#include <unistd.h>

#define BUFSIZ 1

int main()  /* copy input to output */
{
    char buf[BUFSIZ];
    int n;

    while ((n = read(0, buf, BUFSIZ)) > 0)
        write(1, buf, n);

    return 0;
} 
```

当我输入“∂∑∑®†¥¥¥˚πΔ～~∫∫√ç tu 886661~EOF”作为输入时，它会被复制。有多少非 ASCII 字符同时存储？

BUFSIZ 是要传输的字节数。如果对于任何值，任何内容都可以从输入复制到输出，BUFSIZ 如何限制字节传输？

char buf[BUFSIZ] 如何存储非 ASCII 字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:44:19.393

您阅读小块直到EOF：

```
while ((n = read(0, buf, BUFSIZ)) > 0) 
```

这就是为什么。从字面上看，您逐字节地将输入复制到输出。如何将其转换回 unicode 是控制台的问题，而不是您的问题。我猜，它不会输出任何东西，直到它可以将数据识别为符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:26:20.543

当您从标准输入调用 read 时，您正在从管道读取，该管道绑定到终端或另一个程序。当然，编写器（终端或其他程序）和您的程序之间有一个缓冲区。当此缓冲区下溢时，读取器（您的程序）会阻塞读取。当缓冲区溢出而不是写入器（终端等）阻塞写入时，反之亦然。

当您写入标准输出时，您将写入管道，该管道绑定到终端或另一个程序。

因此，如果您的程序由终端的 shell 运行，那么您的程序输入和输出将绑定到（伪）终端。（伪）终端是可以将用户的按键转换为字符并将一些编码字符串（ISO8859-1、UTF-8 等）转换为屏幕上的符号的程序。

1.  在您按下 EOL 的 EOF 之前，字符会存储在终端程序中。这是终端的规范模式。按下输入后，字节将写入绑定到您的程序的管道。
2.  BUFSIZ 是您尝试从每次操作的输入中读取的字节数。`n`返回值是操作完成时实际读取的字节数。所以 BUFSIZ 是程序可以从管道中读取的最大字节数。
3.  char buf[BUFSIZ] 是字节数组（不是某些字符集的字符），因此它可以处理任何值（包括不可打印甚至为零）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T07:48:46.730

由于您在循环中调用 read 直到遇到错误时到达“文件结尾”，因此每次调用 read 后您将在 buf 中准确获得 1 个字符。之后，通过 write 系统调用打印该字符。保证 read 系统调用将读取的内容不会超过最后一个参数中指定的内容。例如，如果您通过 10，则 read 将继续并尝试将读取的数据复制到数组边界之外。

至于您输入的字符 - 这些似乎是扩展的 ASCII 字符（代码 128-255），所以这里没问题。

# facebook - 从 Facebook 发布到 Wordpress

> ID：11707564
> 
> 赞同：-1
> 
> 时间：2012-07-29T07:42:01.210
> 
> 标签：facebook, wordpress, cross-posting

我有一个客户，他对 facebook 接口更加熟悉和自信，并且希望将她在 Facebook 业务页面上的帖子自动发布到她的 Wordpress 博客上。

关于如何实现这一点的任何提示。

我了解让她使用 Worpress 的好处，但在这个阶段，WordPress 应用程序中缺乏所见即所得的功能让她望而却步。

任何将 Facebook 帖子带到 Wordpress 的插件建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:21:18.387

Facebook 尚未为页面上的帖子提供[实时更新](https://developers.facebook.com/docs/reference/api/realtime/)`stream`，因此您需要执行以下操作：

设置一个 cron 作业以按计划调用脚本（可能每小时或每天一次）：

1.  对她的页面进行 API 调用，`feed`以查看自上次投票以来是否发布了任何新帖子。

2.  如果返回数据，则遍历结果并为每个 FB 帖子创建一个新的 WP 帖子。

只要确保 WP 上没有安装任何自动发布到 FB 的插件。

我以前从未见过这样的插件。有一些插件可以使编辑 Wordpress 更加用户友好，例如[Front End Editor](http://wordpress.org/extend/plugins/front-end-editor/)。这可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:16:57.533

获取您的 fb 页面的 rss feed url 并将其放入 feedwordpress 插件

# php - 使用文本和另一个图像创建图像

> ID：11707565
> 
> 赞同：-1
> 
> 时间：2012-07-29T07:42:01.833
> 
> 标签：php, curl, imagecreatefrompng

所以我有一个脚本，它使用 imagecreatefrompng 函数和更多函数将文本打印到图像上，但这不是重点。如何在创建的图像上打印图像？我可以打印文本，但不能打印图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:59:55.360

我不知道你在做什么，但做这个客户端而不是 PHP 可能会更好。

有用于 PHP 的 ImageMagick，您可以在此处查看[http://www.imagemagick.org](http://www.imagemagick.org)

PHP 的本机函数并没有提供太多这样的功能——但是如果你没有用 alpha 创建多个层，请查看[http://us.php.net/manual/en/function.imagecopymerge.php](http://us.php.net/manual/en/function.imagecopymerge.php) PS中的频道，然后让php选择它们，或者只是客户端JS之类的。

# iphone - 斯坦福 iphone 开发计算器示例在选择操作时崩溃

> ID：11707567
> 
> 赞同：0
> 
> 时间：2012-07-29T07:42:12.933
> 
> 标签：iphone, objective-c

我对objective-c完全陌生，所以我不知道为什么会这样。我仍在努力思考这些概念，但我不知道我在寻找什么，所以我希望你们中的一个好人，聪明的人可以帮助我。我确定这是我没有意识到的愚蠢的问题。

视图控制器.h：

```
#import <UIKit/UIKit.h>
#import "CalculatorBrain.h"

@interface ViewController : UIViewController {
    IBOutlet UILabel *display;
    CalculatorBrain *brain;
    BOOL userIsInTheMiddleOfTypingANumber;
}

- (IBAction)digitPressed:(UIButton *)sender;
- (IBAction)operationPressed:(UIButton *)sender;

@end 
```

ViewController.m：（在“NSString *operation = [[sender titleLabel] text];”接近尾声时发生崩溃）

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (CalculatorBrain *)brain
{
    if (brain) {
        brain = [[CalculatorBrain alloc] init];
    }
    return brain;
}

- (IBAction)digitPressed:(UIButton *)sender
{
    NSString *digit = [[sender titleLabel] text];
    if (userIsInTheMiddleOfTypingANumber) {
        [display setText:[[display text] stringByAppendingString:digit]];
    } else {
        [display setText:digit];
        userIsInTheMiddleOfTypingANumber = YES;
    }
}

- (IBAction)operationPressed:(UIButton *)sender
{
    if (userIsInTheMiddleOfTypingANumber) {
        [[self brain] setOperand:[[display text] doubleValue]];
        userIsInTheMiddleOfTypingANumber = NO;
    }
    NSString *operation = [[sender titleLabel] text];
    double result = [[self brain] performOperation:operation];
    [display setText:[NSString stringWithFormat:@"%g", result]];
}

@end 
```

计算器大脑.h：

```
#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject {
    double operand;
    NSString *waitingOperation;
    double waitingOperand;
}

- (void)setOperand:(double)anOperand;
- (double)performOperation:(NSString *)operation;

@end 
```

计算器大脑.m：

```
#import "CalculatorBrain.h"

@implementation CalculatorBrain

- (void)setOperand:(double)anOperand
{
    operand = anOperand;
}

- (void)performWaitingOperation
{
    if ([@"+" isEqual:waitingOperation]) {
        operand = waitingOperand + operand;
    } else if ([@"-" isEqual:waitingOperation]) {
        operand = waitingOperand - operand;
    } else if ([@"*" isEqual:waitingOperation]) {
        operand = waitingOperand * operand;
    } else if ([@"/" isEqual:waitingOperation]) {
        if (operand) {
        operand = waitingOperand / operand;
        }
    }
}

- (double)performOperation:(NSString *)operation
{
    if ([operation isEqual:@"sqrt"]) {
        operand = sqrt(operand);
    } else {
        [self performWaitingOperation];
        waitingOperation = operation;
        waitingOperand = operand;
    }
    return operand;
}

@end 
```

提前感谢任何帮助或提示......我不知道我在做什么:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:24:44.663

```
- (CalculatorBrain *)brain {
 if (brain) {
     brain = [[CalculatorBrain alloc] init];
 }     
 return brain; 
 } 
```

尽管代码可能还有其他问题，但这个代码立即出现了。你错过了！操作员。

```
- (CalculatorBrain *)brain {
 if (!brain) {
     brain = [[CalculatorBrain alloc] init];
 }     
 return brain; 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:08:20.993

您应该可以在 XCode 的调试控制台中找出崩溃的原因。

作为旁注，你为什么不使用`[sender currentTitle]`而不是`[[titleLabel] text]`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:33:30.787

我知道这很旧，但我遇到了和这个提问者完全相同的问题，我发现我不小心在同一行添加了一个断点。希望这可以帮助其他人解决这个问题。

# vim - 在 vim 搜索和替换中，换行符呈现为 "^@"

> ID：11707568
> 
> 赞同：19
> 
> 时间：2012-07-29T07:42:20.737
> 
> 标签：vim, utf-8, character-encoding

我将一个长谷歌电子表格的粘贴单元格复制到一个 txt 文件中，该文件是一个用逗号分隔的电子邮件地址列表。还有许多“空白”单元格，即用逗号包围的空白区域。所以我可以有以下列表：

`bob@aol.com, ,john@aol.com, , , , email@email.com`

在 vim 中，当我尝试使用以下命令通过新行添加单独的每个地址时：

```
:%s/, /,\n/g 
```

我没有在命令后添加新行，而是得到“^@”。

我知道这与字符集有关，但我不知道如何解决。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-29T07:46:07.497

在`:s`的替换字段中，您需要使用`\r`not`\n`换行符。

^@ 是 ASCII 空字符。Vim 在内部使用 \r 表示换行符（即 ^M），使用 \n 表示 ASCII 空字符，因此在替换中，如果使用 \n，您将得到那些空字符而不是换行符。另见：h sub-replace-special

# java - Major Garbage Collection 是否从两代收集对象？

> ID：11707574
> 
> 赞同：4
> 
> 时间：2012-07-29T07:43:14.213
> 
> 标签：java, garbage-collection

正如我们所知，当对象被创建时，它存储在新生代的伊甸园空间中，然后移动到幸存者空间（如果还活着），然后移动到老年代。

我的问题是——主要的垃圾回收是只清理老一代的对象，还是同时清理新老一代？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T08:09:18.743

HotSpot 中有 3 种类型的集合，用于并行和并发标记扫描。有一个次要集合，它只是伊甸园或伊甸园和幸存者空间。一个完整的集合就是一切，一个并发集合只是老一代。没有这样的主要收藏。完整集合一词更常用，其含义也更清晰。

G1收集器有老少两代，但只有一种收集类型，收集相对连续。它可能只清理 1 MB 或可能清理所有内存。

Azul JVM 在所有代中都是纯并发的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T22:24:03.610

对于热点 JVM：

*   Mark Sweep 紧凑型收集器（串行、并行清除、并行旧）在旧收集期间收集年轻人和老年人。如果旧空间大小不足，这些收集器可以切换到非分代模式（实际上只进行完整收集）。

*   Concurrent Mark Sweep old collection 只收集旧空间。但如果并发收集失败，它会退回到 Stop-The-World Mark Sweep Compact Full 收集并收集两个空间。

*   G1 有年轻集合和老集合。年轻的集合只收集年轻的空间。旧收集通常收集旧空间的一部分（G1 是增量的）。如果增量模式失败，它会退回到 Full GC 收集所有空间。

查看[GC 开关备忘](http://blog.ragozin.info/2011/09/hotspot-jvm-garbage-collection-options.html)单以了解 JVM 配置选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:08:11.347

> 当年轻代填满时，只执行该代的年轻代收集（有时称为次要收集）。当老代或永久代填满时，通常会完成所谓的完整收集（有时称为主要收集）。也就是说，收集所有代。

*   [Java HotSpotTM 虚拟机中的内存管理 Sun Microsystems 2006 年 4 月](http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf)

# java - 了解 Java IO

> ID：11707575
> 
> 赞同：1
> 
> 时间：2012-07-29T07:43:30.423
> 
> 标签：java

我仍然是一个新手java程序员。我正在学习 Java IO 并注意到在书中以及在线教程中他们没有谈论扫描仪类。他们总是提到，创建输入/输出流读取器对象并使用它们来读取或写入。

我对扫描仪类非常熟悉，阅读后我开始认为扫描仪可能不是在 java 中读取控制台输入/文件的正确方法。

请澄清我的疑问，如果您能给我指出一个易于理解的教程，那就太好了。我已经查阅了 oracle 文档和其他流行的网站。阅读 Herbert schildt 的书和可怕的第一部 Java 书 (barf..barf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:59:05.830

你要明白 a) 很多关于 Java 的材料是几年前写的，而 Scanner 是相对较新的。b）在某些情况下扫描正确的工具，但您可以在所有情况下使用二进制文件的原始流或文本的阅读器。

您怀疑 Scanner 是简单文本文档的正确选择。

您已经评估了您正在阅读的材料并为其提供上下文（例如它的年龄）没有任何教程可以帮助您。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:03:54.720

扫描器类是一种特殊的文件阅读器，它针对阅读文本文件进行了优化。如果您想读取其他文件类型，则扫描仪类不是最佳选择。可以在这里找到一个很好的概述[java i/o](http://docs.oracle.com/javase/tutorial/essential/io/index.html)。那里的摘要表格：

> java.io 包包含许多您的程序可用于读取和写入数据的类。大多数类都实现了顺序访问流。顺序访问流可以分为两组：读取和写入字节的流和读取和写入 Unicode 字符的流。每个顺序访问流都有其特殊性，例如读取或写入文件、在读取或写入时过滤数据或序列化对象。

阅读完本文后，您应该研究一下[Apache Commons I/O](http://commons.apache.org/io/)，它为您提供了一些方便的 i/o 实用程序类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T21:36:47.423

Java io 包支持*字节*级和*字符*级操作。两者都可以以*流式*或*缓冲*方式完成。可以在[此处](https://github.com/amjadmajid/java)找到有关这些 IO 类型的示例。

Scanner 对象可用于将格式化的输入分解为标记并根据其数据类型翻译各个标记。[扫描仪](https://docs.oracle.com/javase/tutorial/essential/io/scanning.html)示例

# ajax - 跨域 ajax 不适用于移动 Safari 中的重定向

> ID：11707576
> 
> 赞同：5
> 
> 时间：2012-07-29T07:43:33.623
> 
> 标签：ajax, redirect, safari, cross-domain, mobile-safari

我遇到了这个 WebKit 错误中提到的问题： [https ://bugs.webkit.org/show_bug.cgi?id=57600](https://bugs.webkit.org/show_bug.cgi?id=57600)

问题在于移动 Safari，它适用于 Google Chrome 和 Firefox。我重定向跨域 ajax 请求的相同代码适用于 Google Chrome 和 Firefox，但不适用于移动 Safari。

据我了解，该错误已在 WebKit 版本 525 中提交： [https ://bugs.webkit.org/show_bug.cgi?id=57600](https://bugs.webkit.org/show_bug.cgi?id=57600)

并在 WebKit 版本 528 中解决（我认为这是因为在同一问题上打开了不同的回归错误）： [https ://lists.webkit.org/pipermail/webkit-unassigned/2012-April/429252.html](https://lists.webkit.org/pipermail/webkit-unassigned/2012-April/429252.html)

但是在 iPhone 设备上使用我的移动 Safari 时，重定向被拒绝，即使我有带有 WebKit 版本 534（更高版本）的移动 Safari。

有没有人经历过这种行为，有没有解决办法？

注意：我确实定义了跨域 (CORS) 标头（因为它在 Google Chrome 和 Firefox 中工作）。

编辑：Windows 版 Safari 也有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:01:12.747

我在几个移动浏览器（`Safari`, `Chrome`/ `Dolphi`n on `Android`）上遇到了同样的问题。

我没有解决方案`302`，但我找到了解决方法：

*   我们使用的 Java 框架可以重定向或转发`POST`响应，因此我们将其更改为`forwards`mode。

使用 forwards 会导致 a `200`，因此`AJAX`成功处理程序（我们使用`jQuery`）可以正确检索数据。

希望这可以帮助。

# jasper-reports - 隐藏碧玉报告中的字段

> ID：11707580
> 
> 赞同：2
> 
> 时间：2012-07-29T07:43:51.873
> 
> 标签：jasper-reports

我正在使用 jasper report-4.5.0。我想根据标志值在 jasper 中隐藏一个字段。下面是我在 columnHeader 带中使用的代码。

```
<staticText>
  <reportElement x="365" y="0" width="100" height="20"/>
  <box>
    <topPen lineWidth="0.25"/>
    <leftPen lineWidth="0.25"/>
    <bottomPen lineWidth="0.25"/>
    <rightPen lineWidth="0.25"/>
  </box>
  <textElement textAlignment="Center" verticalAlignment="Middle">
    <font isBold="true"/>
  </textElement>
  <text><![CDATA[TotalCharge]]></text>
</staticText> 
```

下面的代码我正在详细使用乐队。

```
<textField>
  <reportElement x="365" y="0" width="100" height="20">
  <printWhenExpression><![CDATA[!$P{dataType}]]></printWhenExpression>

  </reportElement>
  <box>
    <leftPen lineWidth="0.25"/>
    <bottomPen lineWidth="0.25"/>
    <rightPen lineWidth="0.25"/>
  </box>
  <textElement textAlignment="Right" verticalAlignment="Middle">
    <font size="8"/>
  </textElement>
  <textFieldExpression><![CDATA[$F{chargeTotal}]]></textFieldExpression>
</textField> 
```

我将 jrxml 中的参数声明为

```
<parameter name="dataType" class="java.lang.Boolean"/> 
```

这个参数的值来自java类。如果它是假值，我不想显示这个chargeTotal列。我在我的代码中做错了什么。我没有得到。任何人都可以指出我做错了什么对我来说很紧急。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:18:33.380

您为文本字段提供的代码片段看起来是正确的，但如果您想隐藏列标题，还需要`printWhenExpression`为它添加一个。

```
<staticText>
  <reportElement x="365" y="0" width="100" height="20">
      <printWhenExpression><![CDATA[$P{dataType}]]></printWhenExpression>
  </reportElement>
  <box>
    <topPen lineWidth="0.25"/>
    <leftPen lineWidth="0.25"/>
    <bottomPen lineWidth="0.25"/>
    <rightPen lineWidth="0.25"/>
  </box>
  <textElement textAlignment="Center" verticalAlignment="Middle">
    <font isBold="true"/>
  </textElement>
  <text><![CDATA[TotalCharge]]></text>
</staticText> 
```

编辑：实际上，你有条件值倒退。如果您想在`dataType`为真时显示该列，您`printWhenExpression`需要如下所示：

```
<printWhenExpression><![CDATA[$P{dataType}]]></printWhenExpression> 
```

# python - 如何扩展输出显示以查看 Pandas DataFrame 的更多列？

> ID：11707586
> 
> 赞同：850
> 
> 时间：2012-07-29T07:44:51.610
> 
> 标签：python, pandas, printing, column-width

有没有办法在交互式或脚本执行模式下扩大输出显示？

具体来说，我`describe()`在 Pandas 上使用该函数`DataFrame`。当`DataFrame`是五列（标签）宽时，我得到了我想要的描述性统计信息。但是，如果`DataFrame`有更多列，则统计信息将被抑制并返回如下内容：

```
>> Index: 8 entries, count to max
>> Data columns:
>> x1          8  non-null values
>> x2          8  non-null values
>> x3          8  non-null values
>> x4          8  non-null values
>> x5          8  non-null values
>> x6          8  non-null values
>> x7          8  non-null values 
```

无论是 6 列还是 7 列，都会给出“8”值。“8”指的是什么？

我已经尝试将[IDLE](https://en.wikipedia.org/wiki/IDLE)窗口拖得更大，以及增加“配置 IDLE”宽度选项，但无济于事。

我使用 Pandas 的目的`describe()`是避免使用像 Stata 这样的第二个程序来进行基本的数据操作和调查。

* * *

## 回答 #1

> 赞同：1223
> 
> 时间：2012-07-29T18:02:02.687

**更新：熊猫 0.23.4 起**

这不是必需的。如果你设置了，Pandas 会自动检测终端窗口的大小`pd.options.display.width = 0`。（对于旧版本，请参阅底部。）

`pandas.set_printoptions(...)`已弃用。相反，使用`pandas.set_option(optname, val)`，或等效地使用`pd.options.<opt.hierarchical.name> = val`。像：

```
import pandas as pd
pd.set_option('display.max_rows', 500)
pd.set_option('display.max_columns', 500)
pd.set_option('display.width', 1000) 
```

这里是[帮助`set_option`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.set_option.html)：

```
set_option(pat,value) - 设置指定选项的值

可用选项：
display.[chop_threshold, colheader_justify, column_space, date_dayfirst,
         date_yearfirst，编码，expand_frame_repr，float_format，高度，
         line_width, max_columns, max_colwidth, max_info_columns, max_info_rows,
         max_rows，max_seq_items，mpl_style，multi_sparse，notebook_repr_html，
         pprint_nest_depth，精度，宽度]
模式。[sim_interactive，use_inf_as_null]

参数
----------
pat - str/regexp 应该匹配一个选项。

注意：为方便起见，支持部分匹配，但除非您使用
完整的选项名称（例如，*xyzoption_name*），您的代码将来可能会中断
如果引入了具有相似名称的新选项的版本。

value - 期权的新价值。

退货
--------
没有任何

加注
------
KeyError 如果不存在这样的选项

display.chop_threshold：[默认：无] [当前：无]
：浮动或无
        如果设置为浮点值，则所有浮点值都小于给定阈值
        repr 和朋友将显示为 0。
display.colheader_justify：[默认：正确] [当前：正确]
： '左右'
        控制列标题的对齐方式。由 DataFrameFormatter 使用。
display.column_space：[默认：12] [当前：12]没有可用的描述。

display.date_dayfirst：[默认：False] [当前：False]
: 布尔值
        如果为 True，则打印并解析日期，例如 20/01/2005
display.date_yearfirst：[默认：False] [当前：False]
: 布尔值
        如果为 True，则打印和解析日期，首先是年份，例如 2005/01/20
display.encoding：[默认：UTF-8] [当前：UTF-8]
: str/unicode
        默认为检测到的控制台编码。
        指定用于 to_string 返回的字符串的编码，
        这些通常是要在控制台上显示的字符串。
display.expand_frame_repr：[默认：真] [当前：真]
: 布尔值
        是否为宽 DataFrame 打印出完整的 DataFrame repr
        跨越多行，`max_columns` 仍然受到尊重，但输出将
        如果宽度超过 `display.width`，则环绕多个“页面”。
display.float_format：[默认：无] [当前：无]
: 可调用
        可调用对象应该接受一个浮点数并返回
        具有所需数字格式的字符串。这是使用
        在像 SeriesFormatter 这样的地方。
        有关示例，请参见 core.format.EngFormatter。
display.height：[默认：60] [当前：1000]
: 整数
        已弃用。
        （已弃用，请改用 `display.height`。）

display.line_width：[默认：80] [当前：1000]
: 整数
        已弃用。
        （已弃用，请改用`display.width`。）

display.max_columns：[默认：20] [当前：500]
: 整数
        max_rows 和 max_columns 用于 __repr__() 方法来决定是否
        to_string() 或 info() 用于将对象呈现为字符串。如果
        python/IPython 在终端中运行，可以设置为 0 和 Pandas
        将正确地自动检测终端的宽度并换成更小的
        格式以防所有列垂直不适合。IPython 笔记本，
        IPython qtconsole 或 IDLE 不在终端中运行，因此它不是
        可以进行正确的自动检测。
        “无”值意味着无限。
display.max_colwidth：[默认：50] [当前：50]
: 整数
        repr 中列的最大字符宽度
        熊猫数据结构。当列溢出时，一个“...”
        占位符嵌入在输出中。
display.max_info_columns：[默认：100] [当前：100]
: 整数
        在 DataFrame.info 方法中使用 max_info_columns 来决定是否
        将打印每列信息。
display.max_info_rows：[默认：1690785] [当前：1690785]
: 整数或无
        max_info_rows 是一个帧的最大行数
        repr'ing 到控制台时对其列执行空检查。
        默认值为 1,000,000 行。所以，如果一个 DataFrame 有更多
        1,000,000 行不会对
        列，因此表示将花费更少的时间
        在交互式会话中显示。None 的值意味着总是
        repr'ing 时执行空检查。
display.max_rows：[默认：60] [当前：500]
: 整数
        这设置打印时 Pandas 应该输出的最大行数
        出各种输出。例如，这个值决定了 repr()
        对于数据框，可以完全打印出来，也可以只打印出摘要 repr。
        “无”值意味着无限。
display.max_seq_items：[默认：无] [当前：无]
: 整数或无

        当漂亮地打印一个长序列时，不超过 `max_seq_items`
        将被打印。如果项目被省略，它们将由加号表示
        的“...”到结果字符串。

        如果设置为无，则要打印的项目数不受限制。
display.mpl_style：[默认：无] [当前：无]
: 布尔

        将此设置为“默认”将修改 matplotlib 使用的 rcParams
        默认情况下为绘图提供更令人愉悦的视觉风格。
        将此设置为 None/False 会将值恢复为其初始值。
display.multi_sparse：[默认：True] [当前：True]
: 布尔值
        "sparsify" MultiIndex 显示（不重复显示
        组内外部级别的元素）
display.notebook_repr_html：[默认：真] [当前：真]
: 布尔值
        当 True 时，IPython notebook 将使用 html 表示
        Pandas 对象（如果可用）。
display.pprint_nest_depth：[默认：3] [当前：3]
: 整数
        控制漂亮打印时要处理的嵌套级别数
display.precision：[默认值：7] [当前：7]
: 整数
        浮点输出精度（有效位数）。这是
        只是一个建议
display.width：[默认：80] [当前：1000]
: 整数
        显示的宽度（以字符为单位）。如果 python/IPython 正在运行
        可以将其设置为 None 的终端，Pandas 将正确地自动检测
        宽度。
        请注意，IPython notebook、IPython qtconsole 或 IDLE 不在
        终端，因此无法正确检测宽度。
mode.sim_interactive：[默认：False] [当前：False]
: 布尔值
        是否为了测试目的模拟交互模式
mode.use_inf_as_null：[默认：False] [当前：False]
: 布尔值
        True 表示将 None、NaN、INF、-INF 视为 null（旧方式），
        False 表示 None 和 NaN 为空，但 INF、-INF 不为空
        （新方法）。
调用 def: pd.set_option(self, *args, **kwds)

```

* * *

旧版本信息。其中大部分已被弃用。

正如@bmu[提到](https://stackoverflow.com/a/11708664/623735)的，Pandas 自动检测（默认情况下）显示区域的大小，当对象 repr 不适合显示时，将使用摘要视图。您提到了调整 IDLE 窗口的大小，但没有效果。如果你这样做`print df.describe().to_string()`，它是否适合空闲窗口？

终端大小由`pandas.util.terminal.get_terminal_size()`（已弃用和删除）确定，这将返回一个包含`(width, height)`显示的元组。输出是否与 IDLE 窗口的大小匹配？可能存在问题（之前在 Emacs 中运行终端时存在问题）。

请注意，可以绕过自动检测，`pandas.set_printoptions(max_rows=200, max_columns=10)`如果行数、列数不超过给定限制，则永远不会切换到摘要视图。

* * *

'max_colwidth' 选项有助于查看每列的未截断形式。

[![截断列显示](../Images/88f5cfb2aeab1cdc11236e36121b3761.png)](https://i.stack.imgur.com/J412l.png)

* * *

## 回答 #2

> 赞同：251
> 
> 时间：2014-08-20T22:19:24.467

试试这个：

```
pd.set_option('display.expand_frame_repr', False) 
```

从文档中：

> display.expand_frame_repr : 布尔值
> 
> 是否为跨多行的宽 DataFrame 打印完整的 DataFrame repr，仍然尊重 max_columns，但如果其宽度超过 display.width，则输出将跨越多个“页面”。[默认：真] [当前：真]

请参阅：*[pandas.set_option](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.set_option.html)*。

* * *

## 回答 #3

> 赞同：177
> 
> 时间：2015-10-27T18:04:34.610

如果要临时设置选项以显示一个大的 DataFrame，可以使用[option_context](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.option_context.html)：

```
with pd.option_context('display.max_rows', None, 'display.max_columns', None):
    print (df) 
```

`with`退出块时会自动恢复选项值。

* * *

## 回答 #4

> 赞同：135
> 
> 时间：2018-07-26T14:10:51.573

只有使用这三行对我有用：

```
pd.set_option('display.max_columns', None)
pd.set_option('display.expand_frame_repr', False)
pd.set_option('max_colwidth', -1) 
```

它适用于[Anaconda](https://en.wikipedia.org/wiki/Anaconda_(Python_distribution))、Python 3.6.5、Pandas 0.23.0 和 Visual Studio Code 1.26。

* * *

## 回答 #5

> 赞同：66
> 
> 时间：2015-11-19T08:43:35.197

使用以下方法设置列最大宽度：

```
pd.set_option('max_colwidth', 800) 
```

此特定语句将最大宽度设置为每列 800 像素。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2012-07-29T08:03:35.063

您可以使用`print df.describe().to_string()`它来强制它显示整个表格。（你可以`to_string()`像这样对任何 DataFrame 使用。结果`describe`只是一个 DataFrame 本身。）

8 是 DataFrame 中包含“描述”的行数（因为`describe`计算 8 个统计数据，最小值、最大值、平均值等）。

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2012-07-29T10:56:01.317

您可以使用 调整 Pandas 打印选项`set_printoptions`。

```
In [3]: df.describe()
Out[3]:
<class 'pandas.core.frame.DataFrame'>
Index: 8 entries, count to max
Data columns:
x1    8  non-null values
x2    8  non-null values
x3    8  non-null values
x4    8  non-null values
x5    8  non-null values
x6    8  non-null values
x7    8  non-null values
dtypes: float64(7)

In [4]: pd.set_printoptions(precision=2)

In [5]: df.describe()
Out[5]:
            x1       x2       x3       x4       x5       x6       x7
count      8.0      8.0      8.0      8.0      8.0      8.0      8.0
mean   69024.5  69025.5  69026.5  69027.5  69028.5  69029.5  69030.5
std       17.1     17.1     17.1     17.1     17.1     17.1     17.1
min    69000.0  69001.0  69002.0  69003.0  69004.0  69005.0  69006.0
25%    69012.2  69013.2  69014.2  69015.2  69016.2  69017.2  69018.2
50%    69024.5  69025.5  69026.5  69027.5  69028.5  69029.5  69030.5
75%    69036.8  69037.8  69038.8  69039.8  69040.8  69041.8  69042.8
max    69049.0  69050.0  69051.0  69052.0  69053.0  69054.0  69055.0 
```

`to_string`但是，这并非在所有情况下都有效，因为 Pandas 会检测您的控制台宽度，并且仅当输出适合控制台时才会使用（请参阅 的文档字符串`set_printoptions`）。在这种情况下，您可以显式调用[BrenBarn](https://stackoverflow.com/a/11707706/1301710)`to_string`的回答。

**更新**

在 0.10 版中，宽数据帧的打印方式[发生了变化](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#wide-dataframe-print)：

```
In [3]: df.describe()
Out[3]:
                 x1            x2            x3            x4            x5  \
count      8.000000      8.000000      8.000000      8.000000      8.000000
mean   59832.361578  27356.711336  49317.281222  51214.837838  51254.839690
std    22600.723536  26867.192716  28071.737509  21012.422793  33831.515761
min    31906.695474   1648.359160     56.378115  16278.322271     43.745574
25%    45264.625201  12799.540572  41429.628749  40374.273582  29789.643875
50%    56340.214856  18666.456293  51995.661512  54894.562656  47667.684422
75%    75587.003417  31375.610322  61069.190523  67811.893435  76014.884048
max    98136.474782  84544.484627  91743.983895  75154.587156  99012.695717

                 x6            x7
count      8.000000      8.000000
mean   41863.000717  33950.235126
std    38709.468281  29075.745673
min     3590.990740   1833.464154
25%    15145.759625   6879.523949
50%    22139.243042  33706.029946
75%    72038.983496  51449.893980
max    98601.190488  83309.051963 
```

此外，设置 Pandas 选项的 API 发生了变化：

```
In [4]: pd.set_option('display.precision', 2)

In [5]: df.describe()
Out[5]:
            x1       x2       x3       x4       x5       x6       x7
count      8.0      8.0      8.0      8.0      8.0      8.0      8.0
mean   59832.4  27356.7  49317.3  51214.8  51254.8  41863.0  33950.2
std    22600.7  26867.2  28071.7  21012.4  33831.5  38709.5  29075.7
min    31906.7   1648.4     56.4  16278.3     43.7   3591.0   1833.5
25%    45264.6  12799.5  41429.6  40374.3  29789.6  15145.8   6879.5
50%    56340.2  18666.5  51995.7  54894.6  47667.7  22139.2  33706.0
75%    75587.0  31375.6  61069.2  67811.9  76014.9  72039.0  51449.9
max    98136.5  84544.5  91744.0  75154.6  99012.7  98601.2  83309.1 
```

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2015-03-16T10:04:56.283

您可以设置输出显示以匹配您当前的终端宽度：

```
pd.set_option('display.width', pd.util.terminal.get_terminal_size()[0]) 
```

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2018-08-27T14:14:20.987

当数据规模很大时，我使用了这些设置。

```
# Environment settings: 
pd.set_option('display.max_column', None)
pd.set_option('display.max_rows', None)
pd.set_option('display.max_seq_items', None)
pd.set_option('display.max_colwidth', 500)
pd.set_option('expand_frame_repr', True) 
```

你可以参考[这里](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.set_option.html)的文档。

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2019-11-05T06:31:11.957

下面的行足以显示数据框中的所有列。

```
pd.set_option('display.max_columns', None) 
```

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2016-04-02T13:26:39.270

根据[v0.18.0 的文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.set_option.html)，如果您在终端中运行（即，不是[IPython](https://en.wikipedia.org/wiki/IPython)笔记本、qtconsole 或[IDLE](https://en.wikipedia.org/wiki/IDLE)），让 Pandas 自动检测您的屏幕宽度并动态调整多少列是一个两行表明：

```
pd.set_option('display.large_repr', 'truncate')
pd.set_option('display.max_columns', 0) 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-03-23T16:52:02.203

似乎所有先前的答案都解决了这个问题。还有一点：您可以使用 (auto-complete-able) 代替`pd.set_option('option_name')`:

```
pd.options.display.width = None 
```

请参阅[Pandas 文档：*选项和设置*](https://pandas.pydata.org/pandas-docs/stable/options.html)：

> 选项具有完整的“点式”、不区分大小写的名称（例如 `display.max_rows`）。您可以直接获取/设置选项作为顶级属性的`options`属性：
> 
> ```
> In [1]: import pandas as pd
> 
> In [2]: pd.options.display.max_rows
> Out[2]: 15
> 
> In [3]: pd.options.display.max_rows = 999
> 
> In [4]: pd.options.display.max_rows
> Out[4]: 999 
> ```

[...]

对于`max_...`参数：

> `max_rows`并`max_columns`在`__repr__()`方法中使用来决定是否`to_string()`或`info()`用于将对象呈现为字符串。如果 Python/ [IPython](https://en.wikipedia.org/wiki/IPython)在终端中运行，则可以将其设置为 0，pandas 将正确地自动检测终端的宽度并交换为更小的格式，以防所有列垂直不适合。IPython notebook、IPython qtconsole 或 IDLE 不在终端中运行，因此无法进行正确的自动检测。**'<code>None' 值表示无限制。**【重点不在原文】

对于`width`参数：

> 显示的宽度（以字符为单位）。如果 Python/IPython 在终端中运行，可以将其设置为`None`，pandas 将正确地自动检测宽度。请注意，IPython notebook、IPython qtconsole 或[IDLE](https://en.wikipedia.org/wiki/IDLE)不在终端中运行，因此无法正确检测宽度。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2018-11-23T10:11:59.217

```
import pandas as pd
pd.set_option('display.max_columns', 100)
pd.set_option('display.width', 1000)

SentenceA = "William likes Piano and Piano likes William"
SentenceB = "Sara likes Guitar"
SentenceC = "Mamoosh likes Piano"
SentenceD = "William is a CS Student"
SentenceE = "Sara is kind"
SentenceF = "Mamoosh is kind"

bowA = SentenceA.split(" ")
bowB = SentenceB.split(" ")
bowC = SentenceC.split(" ")
bowD = SentenceD.split(" ")
bowE = SentenceE.split(" ")
bowF = SentenceF.split(" ")

# Creating a set consisting of all words

wordSet = set(bowA).union(set(bowB)).union(set(bowC)).union(set(bowD)).union(set(bowE)).union(set(bowF))
print("Set of all words is: ", wordSet)

# Initiating dictionary with 0 value for all BOWs

wordDictA = dict.fromkeys(wordSet, 0)
wordDictB = dict.fromkeys(wordSet, 0)
wordDictC = dict.fromkeys(wordSet, 0)
wordDictD = dict.fromkeys(wordSet, 0)
wordDictE = dict.fromkeys(wordSet, 0)
wordDictF = dict.fromkeys(wordSet, 0)

for word in bowA:
    wordDictA[word] += 1
for word in bowB:
    wordDictB[word] += 1
for word in bowC:
    wordDictC[word] += 1
for word in bowD:
    wordDictD[word] += 1
for word in bowE:
    wordDictE[word] += 1
for word in bowF:
    wordDictF[word] += 1

# Printing term frequency

print("SentenceA TF: ", wordDictA)
print("SentenceB TF: ", wordDictB)
print("SentenceC TF: ", wordDictC)
print("SentenceD TF: ", wordDictD)
print("SentenceE TF: ", wordDictE)
print("SentenceF TF: ", wordDictF)

print(pd.DataFrame([wordDictA, wordDictB, wordDictB, wordDictC, wordDictD, wordDictE, wordDictF])) 
```

输出：

```
 CS  Guitar  Mamoosh  Piano  Sara  Student  William  a  and  is  kind  likes
0   0       0        0      2     0        0        2  0    1   0     0      2
1   0       1        0      0     1        0        0  0    0   0     0      1
2   0       1        0      0     1        0        0  0    0   0     0      1
3   0       0        1      1     0        0        0  0    0   0     0      1
4   1       0        0      0     0        1        1  1    0   1     0      0
5   0       0        0      0     1        0        0  0    0   1     1      0
6   0       0        1      0     0        0        0  0    0   1     1      0 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2019-11-28T10:44:10.730

**您可以简单地执行以下步骤，**

*   您可以更改 Pandas *max_columns*功能的选项，如下所示：

    ```
    import pandas as pd
    pd.options.display.max_columns = 10 
    ```

    （这允许显示 10 列，您可以根据需要进行更改。）

*   像这样，您可以更改需要显示的行数，如下所示（如果您还需要更改最大行数）：

    ```
    pd.options.display.max_rows = 999 
    ```

    （这允许一次打印 999 行。）

请参阅[文档](https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html)以更改 Pandas 的不同选项/设置。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2020-07-17T08:21:32.443

您可以使用此自定义函数来显示 Pandas 的内容`Dataframe`。

```
def display_all(df):     # For any Dataframe df
   with pd.option_context('display.max_rows',1000): # Change number of rows accordingly
      with pd.option_context('display.max_columns',1000): # Change number of columns accordingly
          display(df) 
```

`display_all(df.head()) # Pass this function to your dataframe and voilà!`

您不必`pd.set_option`将整个笔记本用于单个单元格。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-02-28T22:21:03.463

如果您不想弄乱您的显示选项并且只想查看这个特定的列列表而不展开您查看的每个数据框，您可以尝试：

```
df.columns.values 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-05-21T16:23:00.493

您也可以循环尝试：

```
for col in df.columns: 
    print(col) 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-07-01T11:10:16.840

```
pd.options.display.max_columns = 100 
```

您可以根据您的要求在 max_columns 中指定列数。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-03-25T08:34:41.377

下面将在打印 NumPy 数组时增加宽度。

[它在Jupyter Notebook](https://en.wikipedia.org/wiki/IPython#Project_Jupyte)中给出了很好的结果。

```
import numpy as np
np.set_printoptions(linewidth=160) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-09-16T07:20:57.603

这些答案都不适合我。其中一些确实会打印所有列，但看起来很草率。与所有信息一样，但格式不正确。我在[Neovim](https://en.wikipedia.org/wiki/Vim_(text_editor)#Neovim)内部使用终端，所以我怀疑这就是原因。

这个迷你函数完全符合我的需要，只需`df_data`在两个地方更改它的数据框名称（`col_range`设置为 pandas 自然显示的内容，对我来说是 5，但对你来说可能更大或更小）。

```
import math
col_range = 5
for _ in range(int(math.ceil(len(df_data.columns)/col_range))):
    idx1 = _*col_range
    idx2 = idx1+col_range
    print(df_data.iloc[:, idx1:idx2].describe()) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-28T19:00:41.710

严格来说，这不是答案，但让我们记住我们可以`df.describe().transpose()`或什`df.head(n).transpose()`至，或`df.tail(n).transpose()`。

我还发现在结构化标题时更容易将标题作为一列阅读：

header1_xxx,

header2_xxx,

header3_xxx,

我认为终端和应用程序更自然地处理垂直滚动，如果在转置后这是必要的。

标题通常大于它们的值，将它们全部放在一列（索引）中可以最大限度地减少它们对总表宽度的影响。

最后也可以合并其他 df 描述，这是一个可能的想法：

```
def df_overview(df: pd.DataFrame, max_colwidth=25, head=3, tail=3):
    return(
        df.describe([0.5]).transpose()
        .merge(df.dtypes.rename('dtypes'), left_index=True, right_index=True)
        .merge(df.head(head).transpose(), left_index=True, right_index=True)
        .merge(df.tail(tail).transpose(), left_index=True, right_index=True)
        .to_string(max_colwidth=max_colwidth, float_format=lambda x: "{:.4G}".format(x))
    ) 
```

# android - IntentService 有什么问题

> ID：11707588
> 
> 赞同：0
> 
> 时间：2012-07-29T07:44:54.003
> 
> 标签：android, android-intent, broadcastreceiver, intentservice

我已经成功使用了几次IntentService，但是在当前的应用程序中，我无法启动BroadcastReceiver的onReceive()。我在 Intent 的 IntentService 操作和 IntentFilter 中有确切的字符串，它与 BroadcastReceiver 一起在 onResume 中注册。

```
 filter = new IntentFilter("com.currencyconverter2.intent.action.MESSAGE");
    Log.d("CC2", "intent filter created");
    filter.addCategory(Intent.CATEGORY_DEFAULT);
    Log.d("CC2", "filter category added");
    receiver = new MessageReceiver();
    Log.d("CC2", "receiver instantiated");
}

public void onResume(){
    super.onResume();
    registerReceiver(receiver, filter);
    Log.d("CC2", "receiver registered");
}

public void onPause(){
    super.onPause();
    unregisterReceiver(receiver);
    Log.d("CC2", "receiver unregistered");
}

public class MessageReceiver extends BroadcastReceiver{
    public void onReceive(Context context, Intent intent){
        Log.d(Tag, "entered onReceive...");
        String html = intent.getStringExtra("OUTPUT");
        webView.setBackgroundColor(Color.parseColor("#f4f36f"));
        webView.loadDataWithBaseURL(null, html, "text/html", "utf-8", null);
    }
} 
```

我还在 Manifest.xml 中指定了服务。

```
<service android:name=".IntentServiceTest"></service> 
```

我的日志告诉我，intentBroadcast 是从 IntentService 广播的，并且应用程序停在那里。BroadcastReceiver 似乎没有收到它。有什么问题？谢谢！

编辑：

我的意图服务

```
 Intent broadcastIntent = new Intent();
        Log.d(Tag, "setting intent action");
        broadcastIntent.setAction("com.currencyconverter2.intent.action.MESSAGE");
        Log.d(Tag, "adding intent category");
        broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
        Log.d(Tag, "putting intent extra");
        broadcastIntent.putExtra("OUTPUT", data.text());
        Log.d(Tag, "sending broadcast");
        sendBroadcast(intent);

    }catch(Exception e){
        e.printStackTrace();
        //System.out.println("f");
    }
}

} 
```

编辑2：

发现了错误。

```
 Intent broadcastIntent = new Intent();
        Log.d(Tag, "setting intent action");
        broadcastIntent.setAction("com.currencyconverter2.intent.action.MESSAGE");
        Log.d(Tag, "adding intent category");
        broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
        Log.d(Tag, "putting intent extra");
        broadcastIntent.putExtra("OUTPUT", data.text());
        Log.d(Tag, "sending broadcast");
        sendBroadcast(intent); 
```

我应该有 sendBroadcast(broadcastIntent); 反而。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:03:01.927

[IntentService](http://developer.android.com/reference/android/app/IntentService.html)用于执行任务并将其关闭，但与您的代码一样，您似乎正在使用较长的运行时间，请使用[Service](http://developer.android.com/reference/android/app/Service.html)而不是[IntentService](http://developer.android.com/reference/android/app/IntentService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:34:45.527

检查您的 AndroidManifest.xml：

```
<receiver android:name=".MessageReceiver">
<intent-filter>
<action android:name="com.currencyconverter2.intent.action.MESSAGE" />
<category android:name="android.intent.category.Default" />
</intent-filter>
</receiver> 
```

^-^

# powershell - PowerShell - 在特定范围内执行脚本块

> ID：11707590
> 
> 赞同：9
> 
> 时间：2012-07-29T07:45:02.870
> 
> 标签：powershell, scope

我正在尝试在 Powershell 中实现类似 BDD 框架的 RSpec/Jasmine（或者至少研究制作一个的潜在问题）。

目前，我在实现简单的之前/之后功能时遇到问题。给定

```
$ErrorActionPreference = "Stop"

function describe()
    {
    $aaaa = 0;
    before { $aaaa = 2; };
    after { $aaaa; }
    }

function before( [scriptblock]$sb )
    {
    & $sb
    }

function after( $sb )
    {
    & $sb
    }

describe 
```

输出为0，但我希望它为2。有没有办法在Powershell中实现它（没有使$aaaa全局化，遍历脚本块中的父范围直到找到$aaaa，使$aaaa成为“对象”和其他肮脏的黑客:) )

我理想情况下想要的是一种在其他范围内调用脚本块的方法，但我不知道这是否可能。[我在https://connect.microsoft.com/PowerShell/feedback/details/560504/scriptblock-gets-incorrect-parent-scope-in​​-module](https://connect.microsoft.com/PowerShell/feedback/details/560504/scriptblock-gets-incorrect-parent-scope-in-module)找到了一个有趣的示例（请参阅解决方法），但不确定它是如何工作的如果它对我有任何帮助。

TIA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T14:26:17.847

调用运算符 (&) 始终使用新范围。相反，请使用点源 (.) 运算符：

```
$ErrorActionPreference = "Stop"

function describe()
    {
    $aaaa = 0;
    . before { $aaaa = 2; };
    . after { $aaaa; }
    }

function before( [scriptblock]$sb )
    {
    . $sb
    }

function after( $sb )
    {
    . $sb
    }

describe 
```

请注意使用`. function`来调用与定义 `$aaaa 的范围相同的函数。

# c++ - strcmp() 函数中的分段错误

> ID：11707596
> 
> 赞同：-2
> 
> 时间：2012-07-29T07:46:06.320
> 
> 标签：c++, segmentation-fault, strcmp

以下代码是在创建链表后对其进行排序。使用的排序算法是冒泡排序。不知何故，代码在 strcmp() 函数中引发了分段错误。

PS：我还写了另一个版本，不是计算节点的数量，而是使用指针来运行循环进行排序。也出现了分段错误。这次在循环的“条件检查”中

```
#include<iostream>
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<conio.h>

using namespace std;

struct link_list  
{    
       char value[20];  
       struct link_list *next;  
};  

int main()  
{  
    struct link_list *head=NULL;  
    int i,j,count=0;  
    char input[20];  
    char ch;  
    struct link_list *temp=NULL,*temp2=NULL,*temp3=NULL,*temp4=NULL;  
    do  /* Creating a link list*/  
    {  
        cout<<"Enter the string you want to insert";  
        cin>>input;
        count++;  
        cout<<"Do you want to continue entering?";  
        cin>>ch;

       if  (head==NULL)
       {
           head=new link_list;
           strcpy(head->value,input);
           head->next=NULL;
           continue;
       }
       for (temp=head;temp->next!=NULL;temp=temp->next);
       temp2=new link_list;
       temp->next=temp2;
       strcpy(temp2->value,input);
       temp2->next=NULL;
    }while(ch=='y' || ch=='Y');

   /*Printing the link list*/

   for (temp=head;temp->next!=NULL;temp=temp->next)
   {
       cout<<temp->value<<"\n";
   }
   cout<<temp->value<<"\n";
   temp=head;
   temp2=head;

/*Using Bubble Sort to sort the list in ascending order*/

   for (i=1;i<count-1;i++)
   {
       if  (i==1)
           temp=head;
       else
           temp=temp->next;
       for (j=0;j<count-i;j++)
       {
           if  (j==0)
               temp4=head;
           else
               temp4=temp4->next;
           temp2=temp4;
           /*Comparing two subsequent nodes and swapping pointers if necessary*/
           if  (strcmp(temp2->value,temp2->next->value)>0)/*<----ERROR in some cases*/
           {
               /*Case where head node needs to adjusted, 2 nodes present in the list*/
               if  (temp2==head && temp2->next->next==NULL)
               {
                   cout<<"Special1\n";
                   head=temp->next;
                   temp2->next->next=temp;
                   temp2->next=NULL;
               }
               /*Case where head node needs to be adjusted*/
               else if (temp2==head)
               {
                    cout<<"Special2\n";
                    head=temp2->next;
                    temp2->next=head->next;
                    head->next=temp2;
               }
               /*Rest of the cases*/
               else
               {
                   cout<<"Normal1\n";
                   temp3->next=temp2->next;
                   temp2->next=temp3->next->next;
                   temp3->next->next=temp2;
                   cout<<"Normal2\n";
               }
           }
           temp3=temp4;
       }
    }

    for (temp=head;temp->next!=NULL;temp=temp->next)
    {
       cout<<temp->value<<"\n";
    }
    cout<<temp->value;
    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:49:47.040

只有两种可能：

*   `temp2`无效（或 NULL）
*   `temp2->next`无效（或 NULL）

我的猜测是第二颗子弹。

# c# - '] 对象属性不使用 c# 序列化为属性

> ID：11707608
> 
> 赞同：1
> 
> 时间：2012-07-29T07:48:37.557
> 
> 标签：c#, serialization, xml-attribute

一个带有嵌套子类的简单 pesron 类。所有属性都归属于私有字段。

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.450")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[XmlRoot("person")]
public  class Person
{
    [XmlIgnore]
    int _id;
    [XmlIgnore]
    string _firstName;
    [XmlIgnore]
    string _lastName;
    [XmlIgnore]
    Person[] _children;
    public Person(){}
    public Person(int id, string firstName, string lastName)
    {
        this._id = id;
        this._firstName = firstName;
        this._lastName = lastName;
    }
    [XmlAttribute]
    public int Id { get { return _id; } }
    [XmlAttribute]
    public string FirstName { get { return _firstName; } }
    [XmlAttribute]
    public string LastName { get { return _lastName; } }
    [XmlElement("children")]
    public Person[] Children
    {
        get { return _children; }
        set { _children = value; }
    }
} 
```

当上述类型被序列化时，只会创建 xml 结构并忽略属性。输出是

```
 <?xml version="1.0" encoding="utf-16" ?> 
<person xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <children>
    <children>
      <children /> 
      <children /> 
     </children>
     <children>
      <children /> 
     </children>
   </children>
   <children /> 
  </person> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:58:41.697

您需要将设置器添加到您的可序列化属性中。否则它们将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:16:09.280

你需要二传手，还需要一组人作为孩子

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.450")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [XmlRoot("person")]
    public class Person
    {
        public Person() { }
        public Person(int id, string firstName, string lastName)
        {
            Id = id;
            FirstName = firstName;
            LastName = lastName;
        }
        [XmlAttribute]
        public int Id { get; set; }

        [XmlAttribute]
        public string FirstName { get; set; }

        [XmlAttribute]
        public string LastName { get; set; }

        [XmlArray("children")]
        [XmlArrayItem("person")]
        public Person[] Children { get; set; }
    } 
```

# java - jboss 无法处理超过 3000 个请求

> ID：11707609
> 
> 赞同：3
> 
> 时间：2012-07-29T07:48:42.993
> 
> 标签：java, performance, web-services, jmeter, jboss5.x

我创建了客户端和服务器的 Web 服务。我想到了做性能测试。我尝试使用带有示例测试计划的 jmeter 来执行它。多达 3000 个请求 jboss 处理了请求，但是当请求超过 3000 个时，一些请求没有被处理（在无法打开连接的意义上：连接被拒绝）。我必须进行更改以同时处理超过 10000 个请求。是 jboss 问题还是系统吞吐量？

jmeter 配置：300 个线程，1 秒加速和 10 次循环。

系统（服务器配置）：Windows 7，4G RAM

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T08:26:52.573

> 我必须进行更改以同时处理超过 10000 个请求

**Tomcat 中的10000 个**并发请求（我相信它在 JBoss 中使用）是相当多的。在典型设置（使用阻塞 IO 连接器）中，每个 HTTP 连接需要一个线程。这对于普通的 JVM 来说太过分了。在 64 位服务器机器上，一个线程需要 1 MiB（签出`-Xss`参数）。而你只有 4 GiB。

此外，[上下文切换的数量](http://blog.tsunanet.net/2010/11/how-long-does-it-take-to-make-context.html)会影响您的性能。您需要数百个内核才能有效地处理所有这些连接。如果您的请求是 I/O 或数据库绑定的 - 您会在其他地方看到瓶颈。

话虽如此，您需要一种不同的方法。尝试非阻塞 I/O 或异步 servlet（自 3.0 起）或...向外扩展。默认情况下，Tomcat 可以处理 100-200 个并发连接（合理的默认值），并且排队的连接数量相似。以上所有内容都被拒绝，您可能正在经历这种情况。

# 也可以看看

*   [高级 IO 和 Tomcat](http://tomcat.apache.org/tomcat-6.0-doc/aio.html)
*   [Servlet 3.0 中的异步支持](https://blogs.oracle.com/enterprisetechtips/entry/asynchronous_support_in_servlet_3)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T08:56:34.973

我想到了两个常见的问题。

首先，如果您以普通用户身份在 Linux 上运行 JBoss，如果您没有编辑 limits.conf 文件，您可能会遇到“打开的文件过多”。请参阅[https://community.jboss.org/thread/155699](https://community.jboss.org/thread/155699)。对于 Linux，每个打开的套接字都算作一个“打开文件”，因此操作系统可能会因此阻止您的连接。

其次，传入连接的最大线程池大小默认为 200。这限制了**并发请求**的数量，即同时进行的请求。如果你让 jmeter 做 300 个线程，那么 jboss 连接器线程池应该更大。您可以在 jboss-web.sar/server.xml 中的 jboss6 中找到它。在元素中查找“maxThreads”：http: [//docs.jboss.org/jbossweb/latest/config/http.html](http://docs.jboss.org/jbossweb/latest/config/http.html)。

200 是单核 CPU 的建议最大值。除此之外，上下文切换开始产生过多的开销，就像 Tomasz 所说的那样。因此，对于生产用途，双核上仅增加到 400，四核上增加到 800，等等。

# php - 添加行时出现PHP错误

> ID：11707612
> 
> 赞同：1
> 
> 时间：2012-07-29T07:48:55.223
> 
> 标签：php, mysql, add

我想在所有行中添加金额。这是代码。请帮助我。

```
$tot1=mysql_query("select SUM(Amount) from wp_product_details"); 
while($row1 = mysql_fetch_array($tot1))
{
echo $row1['Amount'];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:52:39.143

稍微更改您的查询以使用数量`$row1[]`

```
$tot1=mysql_query("select SUM(Amount) as Amount from wp_product_details"); 
```

或者改变你的`$row1[]`语法

```
while($row1 = mysql_fetch_array($tot1))
{
echo $row1['SUM(Amount)'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:58:13.350

试试这个代码

```
 $tot1=mysql_query("select SUM(Amount) as amount from wp_product_details"); 
    while($row1 = mysql_fetch_array($tot1))
    {
    echo $row1['amount'];
    } 
```

# php - codeigniter base_url 仅适用于 Firefox

> ID：11707614
> 
> 赞同：2
> 
> 时间：2012-07-29T07:49:53.020
> 
> 标签：php, codeigniter, firefox, base-url

当我将我的 base_url 设置为 时`http://example.com/`，Ajax 在所有浏览器中都可以正常工作，除了 Firefox。

当我将它设置为`http://www.example.com/` 它只**在**Firefox 中有效，并且在其他浏览器中停止工作。
它会导致 Access-Control-Allow-Origin 错误（这会阻止对不同域的 ajax 调用。它认为域是不同的，`www`因为

有人遇到过这个问题吗？在此先感谢您的时间！

```
$config['base_url'] = "http://example.com/";  // this works in all browsers, not in Firefox
$config['index_page'] = 'index.php';

$config['base_url'] = "http://www.example.com/";  // this works in only in Firefox, but not in other browsers
$config['index_page'] = 'index.php'; 
```

错误是“XMLHttpRequest 无法加载[http://www.example.com/index.php/controller/function。Access-Control-Allow-Origin](http://www.example.com/index.php/controller/function)不允许来源[http://example.com 。”](http://example.com)

这两个链接仅在“www”中有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-03T20:16:06.417

实际上，您正在做的是将您的网站从 Firfox 获取为“www.example.com”，从其他浏览器获取“example.com”

只有在没有违反 CORS（跨源请求共享）的情况下，Ajax 才能正常工作。这意味着如果您在 www.example.com 上，则无法向 example.com 发起 ajax 请求实际上，就浏览器和搜索引擎而言，**www.example.com**和**example.com是完全不同的域。**您实际上可以在每个域上托管两个完全不同的网站。您应该在这两个域之一之间进行选择，并将所有请求重定向到另一个域。从 www 重定向到非 www

```
if (substr($_SERVER['HTTP_HOST'], 0, 4) === 'www.') {
  header('Location: http'.(isset($_SERVER['HTTPS']) && $_SERVER['HTTPS']=='on' ? 's':'').'://' . substr($_SERVER['HTTP_HOST'], 4).$_SERVER['REQUEST_URI']);
exit;
} 
```

反之，只需在上面的 if 条件中将 === 更改为 !=。

但是，如果出于任何原因，您必须保留这两个域，那么您应该在当前域中调用您的 ajax 脚本。

然后，您的 base_url() 函数应该返回当前域。例如：

```
function base_url(){
return 'http'.
 (isset($_SERVER['HTTPS'])?'s':'').'://'.$_SERVER['SERVER_NAME'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:31:34.173

当我在 Windows 主机文件上使用自定义主机时遇到了此类问题。我添加了以下行：

```
127.0.0.1 example.com 
```

但是忘记添加www。因此，为了避免这些类型的问题，我总是在带有`www`.

```
127.0.0.1 example.com www.example.com 
```

问题是某些浏览器会在每个 url 上自动添加 www，而其他浏览器则不会。

不要忘记在 apache 的 vhosts 配置文件中添加主机。（假设您使用的是 apache）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T13:06:58.640

通过将 base_url 留空来修复它。现在 CI 只是自动猜测它

```
$config['base_url'] = "";  
$config['index_page'] = 'index.php'; 
```

# search - 可以为没有任何结果的搜索发送 404 状态吗？

> ID：11707616
> 
> 赞同：2
> 
> 时间：2012-07-29T07:50:04.583
> 
> 标签：search, search-engine

我想为 CMS 编写一个搜索插件。我的搜索网址是这样的：**domain.com/serach.php?q=blah**。现在我想在没有任何结果的搜索查询上发送**404 状态。**搜索引擎可以吗？我不希望搜索引擎也向用户发送没有任何结果的搜索脚本。例如，如果“**某物**”搜索查询在我的网站中没有任何结果，搜索引擎会得到它并且不会在其结果中显示**domain.com/search.php?q=something 。**我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:01:33.113

我同意 Juhana 的观点，机器人如何登陆一个一开始就没有结果的页面？

此外，请注意，并非总是考虑或考虑所有查询参数导致不同的页面=它们可能被视为相同的规范页面。例如，特别是如果您实际上有多个 (" `q`") 参数，那么您对给定查询回复 404 的事实可能会导致脚本上的其他查询`search.php`被视为 404。

因此，我不会推荐您的建议。改用`<meta name="robots" content="noindex">`标签。

# java - Java - 在网站上查找某个数字

> ID：11707618
> 
> 赞同：0
> 
> 时间：2012-07-29T07:50:20.163
> 
> 标签：java, url, bufferedreader

在文本字符串之后查找数字的方法是什么

示例将是某事的最新版本。

所以基本上它会打开一个 URL，使用 BufferedReader 并搜索一个文本字符串。数字（int / double）将在字符串之后找到，程序会将最新版本与当前版本进行比较。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:59:12.350

使用@qrtt 建议的 HTML 解析器是个好主意。但您也可以执行以下操作。从页面中获取整个响应，并使用正则表达式查找您的字符串

正则表达式将类似于`/string_of_text=[0-9]*/g` That 将返回文本字符串及其后面的数字，您可以使用它，并进行一些字符串操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:46:10.167

您需要像[Jsoup](http://jsoup.org)这样的解析器来将您的内容解析为令牌。然后使用正则表达式运行搜索。我对正则表达式不太好，所以也许你可以为此使用[txt2re.com](http://txt2re.com)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:53:56.487

我找到了一个解决方案，我使用子字符串来查找“version = X”的位置，然后解析为双精度

# node.js - 如果我在不提供任何标头或数据的情况下调用 response.end()，NodeJS 会发生什么？

> ID：11707624
> 
> 赞同：1
> 
> 时间：2012-07-29T07:51:12.187
> 
> 标签：node.js

如果我在收到请求而不提供任何数据、调用 response.write() 或调用 response.writeHead() 时立即调用 response.end()，NodeJS 会发生什么？我很好奇从两个角度来回答：

1）服务器角度 - 这是否实质上从nodeJS中的后端堆栈或堆中取出一些东西来释放一些资源？还是发生了完全不同的事情？

2) 从客户端的角度来看——如果这是来自一个不期望收到任何数据响应的 ajax 请求，会出现任何问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T08:02:04.597

在这里要做的显而易见的事情就是尝试一下。Node.js 代码：

```
var http = require('http');
http.createServer(function (req, res) {
  res.end();
}).listen(1337, '127.0.0.1'); 
```

从服务器的角度来看，在其中添加数据/自定义标头没有什么不同。

从客户端的角度来看，给了我空的响应体，带有标题：

```
Connection:keep-alive
Date:Sun, 29 Jul 2012 07:58:51 GMT
Transfer-Encoding:chunked 
```

[与hello world 示例](http://nodejs.org#column1)的不同之处在于`Content-Type`缺少标头并且响应正文为空，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:01:46.577

1) 与请求和响应相关的所有资源都被放弃（可用于垃圾收集）

2) 节点发出带有默认标头和空正文的响应。这完全取决于客户如何处理。在大多数情况下，客户端会将默认标头视为不完整，但在没有响应正文的情况下，别无选择。

# extjs4 - 清除商店中的所有记录

> ID：11707632
> 
> 赞同：6
> 
> 时间：2012-07-29T07:52:51.993
> 
> 标签：extjs4, extjs4.1

我有一家商店，我正在成功地从中加载记录。现在我需要清除其中的所有记录。我怎样才能做到这一点 ？

```
myStore.remove(); // DID NOT WORK
myStore.clear(); // ENDED UP WITH AN ERROR TypeError: myStore.clear is not a function 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T11:50:03.827

Remove 将删除您传入的记录。您希望 removeAll 为`myStore.removeAll();`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-29T18:01:37.897

我发现，至少在 ExtJS 4.2.3 上，removeAll 在加载后第一次发出时会出错。我通过这样做解决了它：

```
store.clearData();
store.removeAll(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-29T07:57:55.560

`myStore.loadData([],false);`是解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-01T18:02:45.513

我使用的是 2.0.12 版本，上述解决方案均无效。我阅读了他们的 readme.md 并找到了`store.clearAll();`. 那是我的解决方案。

# php - 从关联模型中删除

> ID：11707634
> 
> 赞同：3
> 
> 时间：2012-07-29T07:53:28.917
> 
> 标签：php, cakephp

我有 2 个模型：**Photo**和**Score**。每个`Photo`都有一个`Score`。 通过`Photo`连接。`Score``$hasOne = array('Score')`

我想删除照片分数，当照片被删除时。

如何在蛋糕中做到这一点？

（注：我`deleteAll`用于删除照片）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:24:21.247

您应该将关联设置为依赖。见[http://book.cakephp.org/view/1043/hasMany](http://book.cakephp.org/view/1043/hasMany)。

# ruby-on-rails-3 - rails 3没有在生产中保存会话

> ID：11707638
> 
> 赞同：1
> 
> 时间：2012-07-29T07:54:03.730
> 
> 标签：ruby-on-rails-3

我刚刚切换到我的生产服务器，我看到会话表是空的。也根本没有设置cookies。

这是我的初始化程序的设置方式：

```
Webapp::Application.config.session_store :active_record_store, {
    :secure => Rails.env.production?
} 
```

在开发中工作正常。不知道。

# ruby-on-rails - 从引擎模型创建与来自主应用程序的模型的 belongs_to 关系

> ID：11707639
> 
> 赞同：0
> 
> 时间：2012-07-29T07:54:59.730
> 
> 标签：ruby-on-rails, rails-engines

我已经为自己构建了一个 Rails 引擎，它要求主应用程序有一个用户表。我需要能够在我的引擎中的一个模型和主应用程序中的用户表之间创建关系。这比说简单`belongs_to :user`吗？我收到一个错误，指出该`User`对象为零，但是当我使用控制台时，它会返回正确的用户。我的假设是 Rails 假设我的`belongs_to :user`调用是指与引擎在同一命名空间中的用户类，即 MyEngine::User。有没有办法让我明确指定 User 类位于主应用程序的命名空间而不是引擎的命名空间中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T08:14:11.553

在您的关联中明确设置类名，包括命名空间：

```
belongs_to :user, :class_name => "MyEngine::User" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T07:59:13.893

我对引擎不太了解，但是您使用`::`引用根名称空间，所以您可以使用`::User`我猜

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:55:26.550

原来引擎默认情况下通过说belongs_to :user 来识别MainApp 的用户类。我做错了其他事情：/。

# php - 以 PHP 代码返回

> ID：11707646
> 
> 赞同：1
> 
> 时间：2012-07-29T07:56:24.297
> 
> 标签：php

当我们`return`在全局范围内的 PHP 中使用后`return`，执行会停止吗？或处理将继续？

```
<?php

if(defined("A")) return;
define("A", true);

echo "Hello";

if(defined("A")) return;
define("A", true);

echo "Hello";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:58:03.410

如果你想停止一个脚本，你最好使用`exit`，因为 return 应该只用在函数中！

[http://php.net/manual/en/function.return.php](http://php.net/manual/en/function.return.php)
[http://php.net/manual/en/function.exit.php](http://php.net/manual/en/function.exit.php)

在您的情况下，脚本将按照文档所述结束：`return will also end the execution of an eval() statement or script file`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:02:35.250

您的脚本将在第一次之后停止`return`

正如[文档](http://php.net/return)所说：

> 如果从主脚本文件中调用 return，则脚本执行结束

# java - MethodHandle - 必须被捕获或声明为被抛出。为什么会出现这个错误？

> ID：11707656
> 
> 赞同：2
> 
> 时间：2012-07-29T07:57:51.567
> 
> 标签：java, exception

我有一个 Java 7 代码，我正在使用[MethodHanlde](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html)。代码是：

```
import java.lang.invoke.MethodHandle;
import java.lang.invoke.MethodHandles;
import java.lang.invoke.MethodType;
class HelloWorldApp {
    public static  void main(String[] args) {
    MyMethodHandle obj = new MyMethodHandle();
    obj.getToStringMH();
    }
}

class MyMethodHandle {
    public String getToStringMH() {
        MethodHandle mh;
        String s ;
            MethodType mt = MethodType.methodType(String.class, char.class, char.class);
            MethodHandles.Lookup lk = MethodHandles.lookup();
        try {
            mh = lk.findVirtual(String.class, "replace", mt);
        } catch (NoSuchMethodException | IllegalAccessException mhx) {
            throw (AssertionError)new AssertionError().initCause(mhx);
        }
        try {
            s = (String) mh.invokeExact("daddy",'d','n');
        }
        catch(Exception e) {
            throw (AssertionError)new AssertionError().initCause(e);
        }
        System.out.println(s);
        return "works";
    }
} 
```

当我编译这个：

```
javac HelloWorldApp.java 
```

我收到这样的错误：

```
HelloWorldApp.java:23: error: unreported exception Throwable; must be caught or declared to be thrown
            s = (String) mh.invokeExact("daddy",'d','n');
                                       ^
1 error 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T08:02:11.990

正如[MethodHandle.invokeExact](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html#invokeExact%28java.lang.Object...%29)的 Javadoc所说

```
public final Object invoke(Object... args) throws Throwable 
```

这意味着你必须抓住或“扔”一个`Throwable`

顺便说一句，因为这会引发一个通用异常，因此可以替代

```
 try {
        s = (String) mh.invokeExact("daddy",'d','n');
    } catch(Throwable t) {
        throw new AssertionError(t);
    } 
```

是重新抛出 Throwable

```
 try {
        s = (String) mh.invokeExact("daddy",'d','n');
    } catch(Throwable t) {
        Thread.currentThread().stop(t); // avoids wrapping the true exception
    } 
```

如果您停止另一个线程，则使用 Thread.stop(t) 可能无法预测。如果你把它扔给当前线程是可以预测的。

注意：您需要确保您的方法为您正在调用的方法“抛出”适当的检查异常，因为编译器无法确保是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:59:49.180

`invokeExact`被宣布`throws Throwable`。因此，您需要 catch`Throwable`而不是`Exception`. （An`Exception`只是 的一种`Throwable`。）

```
try {
    s = (String) mh.invokeExact("daddy",'d','n');
}
catch(Throwable t) {
    throw new AssertionError(t);
} 
```

# java - 如何解决 clearcase 中的签入冲突问题

> ID：11707659
> 
> 赞同：1
> 
> 时间：2012-07-29T07:58:02.410
> 
> 标签：java, exception, clearcase, checkin

当我签入文件时，这与其他最新版本的文件冲突。我们如何解决这个问题？有时我无法在明文中签入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:23:48.227

这意味着有人已经签入了新版本，这意味着您自己的签出文件是[未保留的](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/topic/com.ibm.rational.clearcase.ccrc.help.doc/topics/c_checkout.htm)。

见[`cleartool checkin`](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.ccrc.help.doc/topics/u_checkin.htm)：

> 如果签入所选资源的更新版本，您必须先解决您的版本与该版本之间的任何冲突，然后才能继续签入。
> 这通常仅在您签入未保留签出的资源时才会发生。
> 如果差异不冲突，ClearCase 可以为您合并它们。如果存在冲突更改，您必须使用 ClearCase 合并工具执行手动合并。

更新视图可以工作，但您也可以直接在该文件上触发合并。

*   显示版本树
*   右键单击最新版本（不是您的，已签入）
*   选择“合并到”
*   单击您自己的未保留签出版本

这会将 LATEST 合并到您的版本中，而无需等待（可能相当长的）视图更新。
您将能够检查您的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:11:57.540

您必须先更新您的工作副本。当您更新您的源代码控制时，将尝试将您的本地更改与其他开发人员所做的更改合并。如果不能，它将标记冲突点。然后您必须手动解决这些冲突并将其标记为已解决。之后，您可以签入您的代码。

祝你好运。

# javascript - 有什么方法可以从 javascript 进行跨域请求并访问它可能生成的错误响应类型（401、404 等）

> ID：11707660
> 
> 赞同：2
> 
> 时间：2012-07-29T07:58:10.553
> 
> 标签：javascript, cross-domain

我尝试使用 jquery.ajax，但只要有错误响应，它就会静默失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:30:05.313

不，如果没有任何解决方法，这是不可能的。

发出跨域 (JSONP) 请求时，jQuery 不会触发错误事件，[请参阅 SO 上的此答案](https://stackoverflow.com/questions/309953/how-do-i-catch-jquery-getjson-or-ajax-with-datatype-set-to-jsonp-error-w/310084#310084)。

如果足以让您知道存在错误（没有获得其他信息），您可以尝试[类似 this](https://stackoverflow.com/questions/538745/how-to-tell-if-a-script-tag-failed-to-load/6948101#6948101)，并结合[this](https://stackoverflow.com/a/6132828/1350193)。

如果你真的需要HTTP状态码，你将不得不在服务器端工作，即使用你自己的服务器作为代理来获取跨域资源。然后您可以使用 JSONP 回调向 JS 发送附加信息；[在 SO 上查看此解决方案](https://stackoverflow.com/questions/5334413/parsing-jsonp-response-in-javascript-when-4xx-or-5xx-http-error-code-is-present/5666506#5666506)。

很抱歉发布这么多链接，但我想这比引用更好......;）

# php - 如何将 PayPal PDT 交易链接到特定订单？

> ID：11707662
> 
> 赞同：0
> 
> 时间：2012-07-29T07:58:13.160
> 
> 标签：php, paypal

我看到了许多关于如何使用 PDT 向用户显示交易信息的示例。我找不到将 Paypal 付款与指定 ID 相关联的方法，以便在交易完成后，我可以将数据库中的 ID 更新为已付款。

我应该如何从 Paypal 获取我指定的 ID，以便我知道付款的用途？我不能使用电子邮件地址或姓名或其他任何内容。它必须是我指定的 ID。

我看到有些人使用 item_number，但我使用的是 Paypal 加密按钮，因此当用户单击立即付款按钮时，我无法添加表单变量以发布到 Paypal。

我一直在网站上看到这一点，所以我知道一定有办法做到这一点。我只是在任何地方都找不到...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:05:56.217

大多数情况下，人们会加密自己的按钮并使用发送给您的自定义字段或项目编号字段。研究如何使用 PHP 加密您自己的按钮。

PayPal 在他们的 SDK 中提供了一个示例，可以在[这里](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#paypalpaymentsstandard)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:16:43.133

我偶然发现了这篇优秀的作品，它简洁地展示了如何制作动态加密的贝宝按钮。这正是我所需要的。感谢您为我指明正确的方向！

[http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php](http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php)

# sql-server - 日期格式为 dd/MM/yyyy hh:mm:ss

> ID：11707665
> 
> 赞同：14
> 
> 时间：2012-07-29T07:58:54.537
> 
> 标签：sql-server, sql-server-2008

我需要将 datetime 从转换`2012-07-29 10:53:33.010`为 `29/07/2012 10:53:33`.

我尝试使用

```
select CONVERT(varchar(20), GETDATE(), 131) 
```

但根据回历显示日期

```
11/09/1433 10:53:33: 
```

请帮忙？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-29T09:07:45.773

这可以按如下方式完成：

```
select CONVERT(VARCHAR(10), GETDATE(), 103) + ' '  + convert(VARCHAR(8), GETDATE(), 14) 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-02-05T14:58:15.273

```
SELECT FORMAT(your_column_name,'dd/MM/yyyy hh:mm:ss') FROM your_table_name 
```

例子-

```
SELECT FORMAT(GETDATE(),'dd/MM/yyyy hh:mm:ss') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T08:07:44.647

您可以结合两种格式：

```
3   dd/mm/yy   (British/French)
8   hh:mm:ss 
```

根据[`CONVERT()`function](http://www.w3schools.com/sql/func_convert.asp)和 using`+`运算符：

```
SELECT CONVERT(varchar(10),GETDATE(),3) + ' ' + CONVERT(varchar(10),GETDATE(),8) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T11:08:40.440

```
SELECT CONVERT(CHAR(10),GETDATE(),103) + ' ' + RIGHT(CONVERT(CHAR(26),GETDATE(),109),14) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-12T05:52:38.427

[MSDN Books Online 上关于CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)的章节，你错过了一行正确的答案......你可以使用样式 no。121 ( *ODBC canonical (with毫秒)* ) 得到你正在寻找的结果：

```
SELECT CONVERT(VARCHAR(30), GETDATE(), 121) 
```

这给了我以下输出：

```
2012-04-14 21:44:03.793 
```

**更新：**根据您更新的问题-当然这不起作用-您正在将字符串（这：`'4/14/2012 2:44:01 PM'`只是**一个字符串**-它**不是**日期时间！）转换为字符串......

您需要**首先**将您拥有的字符串转换为 a`DATETIME`然后将**其**转换回字符串！

试试这个：

```
SELECT CONVERT(VARCHAR(30), CAST('4/14/2012 2:44:01 PM' AS DATETIME), 121) 
```

现在你应该得到：

```
2012-04-14 14:44:01.000 
```

显然，所有毫秒都为零，因为您的原始值不包括任何 ....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-09T06:24:53.057

```
CREATE FUNCTION DBO.ConvertDateToVarchar
(
@DATE DATETIME
)

RETURNS VARCHAR(24) 
BEGIN
RETURN (SELECT CONVERT(VARCHAR(19),@DATE, 121))
END 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-29T08:07:26.857

这将是`varchar`但应该根据需要进行格式化。

```
RIGHT('0' + LTRIM(DAY(d)), 2) + '/'
+ RIGHT('0' + LTRIM(MONTH(d)), 2) + '/'
+ LTRIM(YEAR(d)) + ' '
+ RIGHT('0' + LTRIM(DATEPART(HOUR, d)), 2) + ':'
+ RIGHT('0' + LTRIM(DATEPART(MINUTE, d)), 2) + ':'
+ RIGHT('0' + LTRIM(DATEPART(SECOND, d)), 2) 
```

`d`您的`datetime`字段或变量在哪里。

# php - 在子类别页面中获取父类别 ID - Magento

> ID：11707667
> 
> 赞同：4
> 
> 时间：2012-07-29T07:59:02.143
> 
> 标签：php, magento

我需要一小行代码。我有一个类别

*   1类
    *   亚类 1
    *   亚类 2
*   2 类
    *   亚类 3
    *   亚类 4

在 Sub-Cats 页面中，我需要获取 Root 类别的 ID。就像在“Sub-Cat-1”中一样，我需要获得“Cat-1”的 ID。您可以在子类别页面中说，我需要父类别的 ID。我正在使用短 URL，例如“abc.com/Sub-Cat-1”，既不是 index.php，也不是 URL 中的根目录。我正在使用 Magento-1.4.1。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T18:42:02.413

我得到了解决方案。

```
echo $cat_idd = $this->getCurrentCategory()->getParentCategory()->getId(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T08:12:52.763

尝试用作：

```
echo $subCategory->getParentId(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T13:04:13.933

```
// to get the category ID by product id

$productObj = Mage::getModel('catalog/product')->load($product_id);
$categoryIds =  $productObj->getCategoryIds(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T12:35:48.883

```
//Display all categories.

function get_categories(){

    $category = Mage::getModel('catalog/category'); 
    $tree = $category->getTreeModel(); 
    $tree->load();
    $ids = $tree->getCollection()->getAllIds(); 
    $arr = array();
        if ($ids){ 
            foreach ($ids as $id){ 
                $cat = Mage::getModel('catalog/category'); 
                $cat->load($id);
                $arr[$id] = $cat->getName();
        } 
}

return $arr;

}

 $arr =  get_categories();
 $arr = array_flip($arr);

//print the array 
```

希望它会帮助某人。

# php - PHP GD 库和使用 AJAX 或 jQuery 处理图像

> ID：11707675
> 
> 赞同：0
> 
> 时间：2012-07-29T07:59:24.783
> 
> 标签：php, ajax, gd

我有一个使用 PHP GD 库编写的成功工作界面，用户可以在其中输入多行文本，当用户单击“提交”时，它会将他们键入的文本覆盖到 png 背景上。

是否可以做同样的事情，但在此过程中使用 AJAX？我想以某种方式让每个填写的输入字段自动进行 onblur，并触发 AJAX 脚本。这样他们就可以看到输入到字段中的数据动态地改变图像。

通常在使用 AJAX 时，它会向输入字段、警报发送成功回调，或将其设置为 DIV。我是否会将整个 GD 库代码放入 PHP POST 页面并在那里进行处理，然后以某种方式将编译后的 PNG 图像发送到 AJAX 成功回调？

我只需要一个关于它是否可能的一般想法，以及关于我将如何解决这个问题的基本大纲。谢谢！

编辑：这是覆盖文本后用于显示图像的最后一段代码。

```
imagepng( $my_img, "./images/$form_token.png");
imagedestroy( $my_img ); 
```

此代码最终会出现在 AJAX 发布到的 PHP 处理页面上吗？或者我是否使用 GD 库函数处理图像，然后以某种方式将此图像作为 img src 传递。我会将它保存到我的服务器，然后显示保存为 AJAX 成功回调的 img src 吗？我很困惑，因为我认为 AJAX 会立即加载内容而无需刷新页面，但是如果将文件保存到服务器，然后将其显示在图像占位符中，这种情况仍然会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:14:06.047

是的你可以。

您可以使用**[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)**来执行此操作。

1.  `POST`创建一个 php 文件以使用 jQuery或`GET`方法来响应来自网页的 Ajax 数据。

2.  使 php 文件在成功处理数据时返回成功消息，您可以在 JavaScript 中编写一些程序来显示成功消息。

你可以在这里阅读教程[www.w3schools.com/jquery/jquery_ref_ajax.asp](http://www.w3schools.com/jquery/jquery_ref_ajax.asp)

希望这可以帮助..

# javascript - 如何用 Js 分割这个字符串？

> ID：11707678
> 
> 赞同：0
> 
> 时间：2012-07-29T07:59:53.373
> 
> 标签：javascript, split

我已经阅读了几个小时试图完成这项工作，但我没有太多的知识来做这件事。

我有这个js代码：

```
var username=$(this).attr("username"); 
```

它提取用户列表 fe (admin, test1, test2, test3)

我需要将它拆分为另一个变量，如下所示：

```
var members = [
    ['admin'],
    ['test1'],
    ['test2'],
    ['test3'],
]; 
```

我尝试了很多代码，但我无法使其工作，提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T08:01:09.393

要获取用户名数组：

```
var username = $(this).attr("username");
var members = username.split(','); 
```

要准确获得您建议的内容（数组数组？-我认为这实际上不是您想要的）：

```
var username = $(this).attr("username");
var membersArr = username.split(',');
var members = new Array();

for (var i = 0; i < membersArr.length; i++)
{
    members[i] = [ membersArr[i] ];
} 
```

要获得“[test1]”、“[test2]”等：

```
var username = $(this).attr("username");
var members = username.split(',');

for (var i = 0; i < members.length; i++)
{
    members[i] = '[' + members[i] + ']';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:08:24.583

**更新**
要获取数组的数组，

```
var username=$(this).attr("username");
var membersArray= username.split(' ').map(function(username){
    return [username];
})
//[["admin"],["test"],["test1"],["test2"]] 
```

我在[这里添加了一个小提琴](http://jsfiddle.net/NVENA/)

# jquery - jQuery $.get 返回 [Object XML Document] 仅此而已

> ID：11707688
> 
> 赞同：-1
> 
> 时间：2012-07-29T08:01:30.463
> 
> 标签：jquery

它第一次使用 jQuery $.get()。也是 jQuery 的新手。我的代码非常简单。我只想通过 .php 文件返回一些东西。代码如下

```
<html>
<head>
    <meta charset="UTF-8">
    <script src="jquery.js" type="text/javascript"></script> 
    <style>
    </style>
 <script type="text/javascript">
$('document').ready(function() {
    $('#mybutton').click(function() {
        var str = $('#mytext').val();
        console.log(str);
        $.get('abc.php', {
            input: str
        }, function(da) {
            $('#mydiv').text(da.toString());
            $('#mytext').attr('value', da);
            console.log(da.toString());
            console.dirxml(da);
        });
    });
});
 </script>
</head>
<body>
<input id="mytext" type="text" /><br/>
<input id="mybutton" type="button" value="Ajax Get"/>
<div id="mydiv">...</div>

</body> 
```

php 文件是一个简单的回显...我已经尝试了很多东西，但没有任何效果。问题是 .get 不会在 URL 中返回任何内容，即 url 保持不变..如您所见，我也尝试解析Fire Bug 中的 XML 文件，但我认为这也是空的。请帮助..谢谢..

我尝试过的

我试图将 $.get 更改为 jQuery.get

我试过 $.post 而不是 $.get

没有 301 重定向，因为我已将文件复制到新文件夹并尝试简单地运行此 1 文件。

我没有使用codeigniter ..事实上我只是将此文件移动到单独的目录。

厌倦了将返回输入转换为字符串（如您在代码中所见）

我还阅读了有关stackoverflow的所有问题...

从 W3C 网站和其他网站复制并尝试了示例代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:47:29.553

我会尝试将您`.get`换成`.ajax`.

```
$.ajax({

    type: "POST", //Personally i prefer using post, you can swap this to get if you want.
    url: "abc.php",
    dataType: "html", //Note the dataType has been changed from default here.
    error: function() {
      //You can do a fallback here
    },
    success: function(data) { //Note the data variable here. This is your returned data
        //I also swapped .attr to .val below
        $("#mytext").val(data);
    }

}); 
```

如果这不起作用，我认为您的问题可能出在服务器端。你确定要退货吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-29T12:37:28.053

好的，我的朋友在这里我找到了它....

我的项目部署在 Codeigniter 目录中，为了防止 codeigniter 摆弄我的 Ajax 请求，它把它从 WAMP 的 www 目录中取出。这导致只有 text/html 调用得到应答，而 php 调用（需要服务器端处理）无法应答，因为文件不在 WWW 目录中......

对我来说总是小事..谢谢大家

# html - 使用一对 P erl 正则表达式匹配的无限循环

> ID：11707691
> 
> 赞同：6
> 
> 时间：2012-07-29T08:01:54.767
> 
> 标签：html, regex, string, perl, pattern-matching

我用正则表达式编写了一个小的 Perl 脚本来获取网站的 HTML 组件。

我知道这不是做这种工作的好方法，但我试图测试我的正则表达式技能。

当在 while 循环中使用两种正则表达式模式之一运行时，它会完美运行并显示正确的输出。但是当我尝试在 while 循环中检查两种模式时，第二个模式每次都匹配并且循环无限运行。

我的脚本：

```
#!/usr/bin/perl -w
use strict;

while (<STDIN>) {

    while ( (m/<span class=\"itempp\">([^<]+)+?<\/span>/g) ||
            (m/<font size=\"-1\">([^<]+)+?<\/font>/g) ) {
        print "$1\n";
    }
} 
```

我正在使用示例输入测试上述脚本：

```
<a href="http://linkTest">Link title</a>
<span class="itempp">$150</span>
<font size="-1"> (Location)</font> 
```

期望的输出：

```
$150
(Location) 
```

谢谢！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T08:40:06.867

每当全局正则表达式无法匹配时，它都会重置下一个全局正则表达式开始搜索的位置。因此，当您的两个模式中的第一个失败时，它会迫使第二个再次从字符串的开头查找。

可以通过添加`/c`修饰符禁用此行为，如果正则表达式匹配失败，该修饰符会保持位置不变。

此外，您可以通过删除转义字符（`"`不需要转义，`/`如果您选择不同的分隔符也不需要转义）和`+?`捕获后多余的字符来改进您的模式。

也`use warnings`比`-w`命令行好得多。

这是您的代码的工作版本。

```
use strict;
use warnings;

while (<STDIN>) {

    while( m|<span class="itempp">([^<]+)</span>|gc
            or m|<font size="-1">([^<]+)</font>|gc ) {
        print "$1\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T08:21:12.680

```
while (<DATA>) {
    if (m{<(?:span class="itempp"|font size="-1")>\s*([^<]+)}i) {
        print "$1\n";
    }
}

__DATA__
<a href="http://linkTest">Link title</a>
<span class="itempp">$150</span>
<font size="-1"> (Location)</font> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-29T08:07:55.113

您在匹配之后或期间没有更改`$_`，因此它将始终匹配并进入无限循环。

要修复它，您可以添加`$_=$';`after `print`，以在字符串的其余部分再次运行 match。

# sql - SQL 层次结构查询

> ID：11707693
> 
> 赞同：1
> 
> 时间：2012-07-29T08:01:55.620
> 
> 标签：sql, database, oracle11g

```
SELECT ppse.SUBORDINATE_POSITION_ID child_position_id
               ,ppse.PARENT_POSITION_ID manger_position_id
               ,b.person_id
FROM per_pos_structure_elements_v ppse
      ,APPS.xxkpc_hr_personnel_v2_mv  b
WHERE b.position_id(+) = ppse.SUBORDINATE_POSITION_ID

AND ppse.POS_STRUCTURE_VERSION_ID =64
AND ppse.PARENT_POSITION_ID=12493 
```

此查询的输出：

```
12604   12493   400 
12605   12493   108 
13644   12493   37897   
12752   12493   18  
13643   12493       
13642   12493       
13641   12493       

SELECT ppse.SUBORDINATE_POSITION_ID child_position_id
               ,ppse.PARENT_POSITION_ID manger_position_id
               ,b.person_id
FROM per_pos_structure_elements_v ppse
              ,APPS.xxkpc_hr_personnel_v2_mv  b
WHERE b.position_id(+) = ppse.SUBORDINATE_POSITION_ID

AND ppse.POS_STRUCTURE_VERSION_ID =64
AND ppse.PARENT_POSITION_ID=12504

12514   12504   449
12483   12504   450
12487   12504   456
12497   12504   156
12889   12504   168
12493   12504 
```

12493 在第一个查询中是父项，在第二个查询中是子项，因此我需要删除所有具有 null person_id（第三列）且不是子项的父项的行，因为在第二个查询中我无法删除最后一行，因为他是第一个子项的父项查询，但要删除第一个查询中的最后 3 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:21:49.847

尝试这样的事情......

```
SELECT ppse.SUBORDINATE_POSITION_ID child_position_id
           ,ppse.PARENT_POSITION_ID manger_position_id
           ,b.person_id
FROM per_pos_structure_elements_v ppse
  ,APPS.xxkpc_hr_personnel_v2_mv  b
WHERE b.position_id(+) = ppse.SUBORDINATE_POSITION_ID
AND b.type(+) = 'KPC Employee'
AND ppse.POS_STRUCTURE_VERSION_ID =64
AND ppse.PARENT_POSITION_ID=12493
AND 
(b.person_id!=null OR 
 ppse.SUBORDINATE_POSITION_ID in
             (SELECT SUBORDINATE_POSITION_ID from per_pos_structure_elements_v)) 
```

# javascript - 如何知道我的 NODEJS 中的哪个 javascript 版本？

> ID：11707698
> 
> 赞同：40
> 
> 时间：2012-07-29T08:02:35.667
> 
> 标签：javascript, node.js, version, v8

我想知道我的 NodeJS 支持哪个 javascript 版本？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-29T08:11:04.480

使用[process.versions](http://nodejs.org/api/process.html#process_process_versions)。从文档中的该页面：

```
console.log(process.versions); 
```

**输出**

```
{ node: '0.4.12',
  v8: '3.1.8.26',
  ares: '1.7.4',
  ev: '4.4',
  openssl: '1.0.0e-fips' } 
```

**编辑**：V8 使用**ECMA-262, 5th edition 中指定的 ECMAScript**。

参考：[http ://code.google.com/p/v8/](http://code.google.com/p/v8/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-11-20T20:36:52.190

运行此脚本：

```
try {
  var k = new Map();
  console.log("ES6 supported!!")
} catch(err) {
  console.log("ES6 not supported :(")
}

try {
  var k = new HashMap();
  console.log("ES100 supported!!")
} catch(err) {
  console.log("ES100 not supported :(")
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-11T20:55:39.320

根据其[文档](https://nodejs.org/en/docs/es6/#how-do-i-find-which-version-of-v8-ships-with-a-particular-version-of-node-js)，可以使用此命令；

```
node -p process.versions.v8 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-02-20T20:57:40.997

最好和最详细的英特尔版本位于[https://node.green](https://node.green)。它按 JavaScript 版本显示 NodeJS 版本的矩阵。JavaScript 项目包括标准名称和每个 js 功能。节点版本包括 V8 版本（将鼠标悬停在节点列标题上）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-11T04:24:16.043

不是想在这里发布 necropost —— 然而，这似乎是实现这一点的方法……然而，这有点令人费解。

我所做的是 - 按照此处概述的方法，然后添加一些我自己的...

**节点-p process.versions**

```
{ http_parser: '2.8.0',
  node: '11.2.0',
  **v8: '7.0.276.38-node.11'**,
  uv: '1.23.2',
  zlib: '1.2.11',
  ares: '1.15.0',
  modules: '67',
  nghttp2: '1.34.0',
  napi: '3',
  openssl: '1.1.0i',
  icu: '63.1',
  unicode: '11.0',
  cldr: '34.0',
  tz: '2018e' } 
```

然后，这取决于您的平台——我在 Windows 10 上运行节点，所以...

**节点--v8-options | 找到“进行中”**

对于 Linux 使用...

**节点--v8-options | grep“进行中”**

```
 --harmony-do-expressions (enable "harmony do-expressions" (in progress))
  --harmony-class-fields (enable "harmony fields in class literals" (in progress))
  --harmony-static-fields (enable "harmony static fields in class literals" (in progress))
  --harmony-await-optimization (enable "harmony await taking 1 tick" (in progress))
  --harmony-locale (enable "Intl.Locale" (in progress))
  --harmony-intl-list-format (enable "Intl.ListFormat" (in progress))
  --harmony-intl-relative-time-format (enable "Intl.RelativeTimeFormat" (in progress)) 
```

V8 实现了 ECMA-262 中定义的 ECMAScript——但是，我不知道有什么方法可以将它与任何其他“版本”相关联——它会告诉你哪些功能仍在开发中。

如果你省略了 grep/find 的管道，你会得到一长串所有可用的 v8 选项。

最后，我实际上并没有在我的 Windows 10 机器上开发 Node 应用程序——我正在为 Raspberry Pi 开发 Node 应用程序并使用 Visual Studio Code 进行 ssh，所以——在我的终端提示符下，我 ssh 进入 RPi并使用上面的Linux版本...

**节点-p process.versions**

```
{ http_parser: '2.8.0',
  node: '8.11.3',
  v8: '6.2.414.54',
  uv: '1.19.1',
  zlib: '1.2.11',
  ares: '1.10.1-DEV',
  modules: '57',
  nghttp2: '1.32.0',
  napi: '3',
  openssl: '1.0.2o',
  icu: '60.1',
  unicode: '10.0',
  cldr: '32.0',
  tz: '2017c' } 
```

**节点--v8-options | grep“进行中”**

```
--harmony_array_prototype_values (enable "harmony Array.prototype.values" (in progress))
--harmony_function_sent (enable "harmony function.sent" (in progress))
--harmony_do_expressions (enable "harmony do-expressions" (in progress))
--harmony_class_fields (enable "harmony public fields in class literals" (in progress))
--harmony_promise_finally (enable "harmony Promise.prototype.finally" (in progress))
--harmony_number_format_to_parts (enable "Intl.NumberFormat.prototype.formatToParts" (in progress))
--harmony_plural_rules (enable "Intl.PluralRules" (in progress)) 
```

# c# - 使用 DataContext 绑定为标签分配另一个类中公共自动属性的值

> ID：11707700
> 
> 赞同：0
> 
> 时间：2012-07-29T08:02:48.400
> 
> 标签：c#, .net, wpf, visual-studio-2010, data-binding

简而言之，我想使用 DataContext 绑定为标签分配另一个类中公共自动属性的值。

所以我有一个包含公共自动属性的类，如下所示：

```
public class MyData
{
    public string DogName { get; set; }
} 
```

我的 WPF 表单如下所示：

![WPF](../Images/91a4bbeff049d8dc734e39ebe828c14e.png)

我的 WPF 表单的 CodeBehind 如下所示：

```
public partial class MainWindow : Window
{
    private MyData myData;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        myData = new MyData();
        myData.DogName = "Lulu";

        label1.DataContext = myData.DogName;
    }
} 
```

然而，这并不是将 label1 的值更改为“Lulu”，它只是停留在“Label”。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:13:19.557

这并不是使用 DataContexts 的常见方式（正如您所展示的，`MyData`作为一个类根本没有任何用途）。试试这个：

```
//C#
label1.DataContext = new MyData{ DogName = "Lulu" };

//xaml
<Label Content="{Binding Path=DogName}"/> 
```

现在，您还可以使用 MyData 来包含标签的宽度左右。

另一种（可能是最常用的）方法是设置父级的 DataContext，并使各个元素使用它的属性：

```
//C#
class MyData
{
  public strig DogName{ get; set; }
  public strig CatName{ get; set; }
}

this.DataContext = new MyData{ DogName = "Lulu", CatName = "Fifi" };

//xaml
<Label Content="{Binding Path=DogName}"/>
<Label Content="{Binding Path=CatName}"/> 
```

# r - 月日格式的日期对象

> ID：11707703
> 
> 赞同：3
> 
> 时间：2012-07-29T08:03:08.993
> 
> 标签：r, datetime

我想知道 R 是否有办法将此格式转换为任何日期对象。格式为“月[空格]日”。例如：`Jan 1`或`Jul 29`或`Jul 30`。我只想将这些示例作为日期对象读取，以便我可以操作它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T08:07:53.720

是的，使用`as.Date`，但您还必须指定年份：

```
x <- c("Jan 1", "Jul 29", "Jul 30")

as.Date(paste("2012", x), format="%Y %b %d")
[1] "2012-01-01" "2012-07-29" "2012-07-30" 
```

* * *

有关对象`?as.Date`的更多帮助`Date`，以及`?strptime`有关格式代码的帮助，请参阅。

# c#-3.0 - 使用 c# 无法获得正确的互联网 IP

> ID：11707707
> 
> 赞同：0
> 
> 时间：2012-07-29T08:03:48.097
> 
> 标签：c#-3.0

我确实尝试使用 GetIp 方法（如下）获取互联网 IP，但它只获得一个 IP，即**123.22.114.5**，我多次重新启动调制解调器但它仍然是**123.22.114.5**，请帮助我。（我在 Windows 7 64 位中使用 Visual Studio 2010）

（对不起我的英语不好）

```
private string GetIp()
    {
        string extenalIp = "";
        string whatIsMyIp = "http://automation.whatismyip.com/n09230945.asp";
        string getIpRegex = @"\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b";
        WebClient wc = new WebClient();
        UTF8Encoding utf8 = new UTF8Encoding();
        string requestHtml = "";
        try
        {
            requestHtml = utf8.GetString(wc.DownloadData(whatIsMyIp));
        }
        catch (Exception e)
        {
            // do some thing with exception
            Console.WriteLine(e.Message);
        }
        Regex r = new Regex(getIpRegex);
        Match m = r.Match(requestHtml);
        if (m.Success)
        {
            extenalIp = m.Value.ToString();
        }
        wc.Dispose();
        return extenalIp;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:05:51.283

当您请求诸如**whatismyip**之类的外部网站时，您只会获得一个 IP，即您的 ISP 的**外部**IP 地址。

 **所有 ISP 都有有限的静态 IP 地址和面向互联网的主机。该 WAN IP 地址通常在许多用户之间共享。

您看到的 IP 与您的本地 IP 地址完全**不同**，因此，重新启动调制解调器不会改变它。**

# python - scrape the about page of websites with Python

> ID：11707709
> 
> 赞同：-3
> 
> 时间：2012-07-29T08:03:54.407
> 
> 标签：python

I am looking to scrape some content from some websites for research and I was hoping that using python and web scraping might speed up my process. I have used python and beautiful soup before for one small project to convert an xml from one format to another.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T08:13:59.347

Depending on how redundant is the structure of the data you want to extract, you could use several tools.

*   If you're looking for extracting data always stored in the same DOM structure, [Scrapy](http://scrapy.org) could do the job.
*   If the data is sparse and is stored in various places, maybe [BeautfulSoup4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/) or [lxml](http://lxml.de/index.html#documentation) could help you.
*   If the data is generated by some JS code, have a look at [Selenium](https://selenium.googlecode.com/svn/trunk/docs/api/py/index.html)

Here are a couple of resources you might find useful:

*   PyCon 2012 Tutorial about web-scraping: [http://pyvideo.org/video/609/web-scraping-reliably-and-efficiently-pull-data/](http://pyvideo.org/video/609/web-scraping-reliably-and-efficiently-pull-data/)
*   [http://isbullsh.it/2012/04/Web-crawling-with-scrapy/](http://isbullsh.it/2012/04/Web-crawling-with-scrapy/) (full disclosure, I wrote that)
*   [http://www.packtpub.com/article/web-scraping-with-python](http://www.packtpub.com/article/web-scraping-with-python)
*   [http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)

# ruby-on-rails-3 - 使用表单验证保留文件字段值

> ID：11707711
> 
> 赞同：1
> 
> 时间：2012-07-29T08:04:31.973
> 
> 标签：ruby-on-rails-3, file-upload

在我的应用程序中，我有一个文件上传（实际上是多个文件上传），并且我设法在不使用 gem/plugin（例如：carrierware）的情况下做到了。

但是当我的表单验证失败时，它会加载带有错误消息的数据，但不会加载 file_fields 中的值。我的客户希望在表单验证失败时保持这些值不变。

我搜索了一下，发现出于安全原因，它不允许为文件字段设置值。那么有人可以向我提出一个可能的解决方法（当表单验证失败时保留选定的文件路径）

请注意，我在这里没有使用 Ajax 表单发布，这是简单的默认 HTTP 发布

我在 ruby​​ 1.9.2 和 rails 3.0.0 上运行

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:13:07.103

不可能与您所要求的有关。由于安全原因，上传字段的值无法设置，甚至无法使用某些浏览器设置样式。

最好的选择：

*   在验证之前上传文件，如果用户取消则丢弃。
*   使用 ajax，或者一种奇特的上传方式。（将路径存储在隐藏字段中，然后使用某种形式的 ajax/flash 上传。）

# multithreading - VB6 Timer 控件是否创建单独的线程？

> ID：11707714
> 
> 赞同：5
> 
> 时间：2012-07-29T08:05:52.237
> 
> 标签：multithreading, vb6, timer

VB6`Timer`控件启动时是否创建单独的处理线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T15:11:39.893

VB6 Timer 控件不是在后台线程上运行的某种忙等待循环。他们根本没有真正“跑”。

据我所知，当您设置 Enabled = True（或更改 Interval，如果它为 0）时，控件会调用 SetTimer()。当您设置 Enabled = False（或将 Interval 设置为 0）时，它会调用 KillTimer()。

普通的 VB6 消息循环（当然在 UI 线程上运行）通过将传入的 WM_TIMER 消息分派给相关的 Timer 的事件处理程序代码来处理它们。因此，事件处理程序中的代码在 UI 线程上运行，阻止进一步的消息处理，直到退出。由于遗留原因（16 位 VB 和 Windows），间隔似乎被截断为无符号的 16 位值？

任何像在程序中编写的忙等待循环（所有代码都在 UI 线程上运行）一样的东西当然会阻塞消息处理，从而产生定时器不会“触发”的错觉。由于 WM_TIMER 是低优先级消息，因此当您绑定 UI 线程时，它们不会在消息队列中堆积得很深：

> WM_TIMER 消息是低优先级消息。仅当线程的消息队列中没有其他更高优先级的消息时，GetMessage 和 PeekMessage 函数才发布此消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T13:29:01.610

不，计时器在与窗口过程相同的线程中运行，因此与 Visual Basic 6 程序相同。这意味着，如果您执行处理器密集型操作，则不能依赖正在处理的 WM_TIMER 消息。

# asp.net - 如何在 Asp.net 中调用 jquery 后绑定 ListView？

> ID：11707717
> 
> 赞同：1
> 
> 时间：2012-07-29T08:06:29.540
> 
> 标签：asp.net, ajax, c#-4.0, data-binding, static

我想将新数据绑定到我的 ListView。但我不能

在服务器端我有：

```
 [WebMethod]
    public static void ChangeConditions(string ConditionIs)
    {
        DataTable dt = new DataTable();
        dt = GetNewData(ConditionIs);

        //can't to do it, because my WebMethod is static.
        //listView.DataSource = dt;
        //listView.DataBind();
    }

    private static DataTable GetNewData(string conditions)
    {
        DataTable NewData = new DataTable();

        //Get new data from DB and want to return DataTable with new data.
        //...
        return NewData;
    } 
```

在客户端我有：

> $('#btnSend').live('点击', function () {
> 
> ```
> $.ajax({
>     type: "POST",
>     url: "default.aspx/ChangeConditions",
>     data: '{"ConditionIs":"' + condition + '"}',
>     contentType: "application/json; charset=utf-8",
>     dataType: "json",
>     success: function (msg) {
> 
>     }
> }); }); 
> ```

如何将数据重新绑定到 ListView？

PS当我写这篇文章时，我研究了我的问题。并找到解决方案：

*   将 UpdatePanel 放在我的 ListView 周围；
*   将 ScriptManager 放在 UpdatePanel 上方；
*   将此行放在 JS 中的成功函数中： __doPostBack('UpdatePanel1', '');

当我将数据从客户端发送到服务器到 [WebMethod] 中时，我可以填充我的静态 DataTable，并将其绑定到 Page_Load。但我想有趣，我可以使用其他解决方案吗？或者也许在我的解决方案中可能有一些错误？

# bash - 期望脚本不会将日期命令的 bash 替换扩展为发送

> ID：11707719
> 
> 赞同：2
> 
> 时间：2012-07-29T08:06:55.143
> 
> 标签：bash, tcl, expect

我有一个期望脚本来备份强化 VDOM 防火墙。

这很好用，除了基于日期输出的动态文件名。

这是脚本：

```
<!-- language: expect -->
#!/usr/bin/expect -f

##!/bin/bash
#DATE=$(date "+%Y.%m.%d")
#echo $DATE

set timeout 60
spawn ssh admin@vdom
expect "password: $"
set send_slow {1 0.05}
send -s "pass\r"
send_user "pass\r"
send -s "config global\n"
send -s "execute backup full-config tftp `date \"+%Y.%m.%d\"` ip.address\n"
send -s "exit\n"
interact 
```

该脚本的结果如下： VDOM1 # execute backup full-config tftp `date "+%Y.%m.%d"`ip.address

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T08:16:22.773

好的，我得到了关于 IRC 问题的答案（归功于 Venks）：

```在 tcl 中并不特别。正确的做法是这样的：

```
send -s "execute backup full-config tftp [clock format [clock seconds] -format %Y.%m.%d] xxx.xxx.xxx.xxx\n" 
```

希望这对将来的某人有所帮助。

# clojure - ClojureScript Repl 安全性

> ID：11707720
> 
> 赞同：3
> 
> 时间：2012-07-29T08:07:15.297
> 
> 标签：clojure, clojurescript

我们有两台机器：

*   服务器
*   客户

服务器正在运行 Clojure + Ring + ... 标准 ClojureScript webstack。

客户端 = 一些运行 Chorme/Firefox/Safari 的机器

现在，假设服务器在端口 9000 上运行 ClojureScriptRepl 连接，客户端可以连接到该连接以设置 ClojureScriptOne Repl。

这允许服务器以某些方式控制客户端行为。

但是，这是否也允许客户端控制服务器？即，运行 ClojureScript repl 的行为是否允许客户端破坏/控制/执行服务器上的任意代码（就像运行 Clojure Repl 那样）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T09:29:12.973

没有。只有字符串移动到服务器，然后服务器将打印为字符串。实际上不存在溢出攻击的可能性，并且不太可能使用 java 虚拟机取得成功，如果可能的话，大量的软件将无法使用。

# java - 如何制作这个声音循环？

> ID：11707730
> 
> 赞同：0
> 
> 时间：2012-07-29T08:08:29.247
> 
> 标签：java, audio, javasound, stack-overflow

我试图在这段代码中循环声音。在主要 try and catch 的 finally 块中，我这样做：

```
 if (loop) {
        auline.flush();
        run();
    } else {
        ended=true;
        auline.drain();
        auline.close();
    } 
```

但它会导致堆栈溢出。如何在不创建新实例的情况下安全地循环播放此声音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T08:24:15.850

您`run`从内部调用`run`，这最终会填满调用堆栈并导致堆栈溢出异常

现在的问题是，你如何克服它？

您需要在 run 方法中循环。我能想到的最好方法是在运行方法中有一个“退出”触发器

```
public void run() {
    while(loop) {
        //...play sound
    }
} 
```

你可以使用`stop`方法来触发`loop`标志

# php - mysql query inserting null value in a field

> ID：11707731
> 
> 赞同：0
> 
> 时间：2012-07-29T08:08:35.550
> 
> 标签：php, mysql

im using php and mysql

php code:

```
foreach($form1 as $value)
{ 

    if($value!='')
    {   
        echo $query="insert into group_mapping('mid','gid','client_id') values('$value','".$_REQUEST['gid']."','".$_REQUEST['userid']."');";
        mysql_query($query);
    }
} 
```

when I run the query manually it inserts right, but using php code value of 'client_id' going (NULL), mid and gid inserting correctly.

no mysql error, i have also tried echoing the query and its fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:24:01.543

Try adding some debug info into your script for example: Also you shouldn't have `echo` in the line: `echo $query="insert....`

```
<?
if($_REQUEST['gid']!=''&&$_REQUEST['userid']!='')
{
    foreach($form1 as $value)
    {
        if($value!=''))
        {
            $query="insert into group_mapping('mid','gid','client_id') values('$value','".$_REQUEST['gid']."','".$_REQUEST['userid']."');";
            if(mysql_query($query))
            {
                echo 'Query OK: '.$query.'<br>';
            }else{
                echo 'Query Problem: '.$query.'<br>';
                echo mysql_error().'<br>';
            }
        }else{
            echo 'Value is blank<br>';
        }
    }
}else{
    echo '$_REQUEST[gid] or $_REQUEST[userid] missing<br>';
}
?> 
```

# php - 用于在浏览器中录制声音并保存到 .wav 文件的 Flash 和 PHP 库？

> ID：11707733
> 
> 赞同：0
> 
> 时间：2012-07-29T08:09:00.957
> 
> 标签：php, flash, audio, audio-recording, recording

这个问题之前已经在 Stack Overflow 上提到过，但答案没有帮助。我也看过[这个链接](https://code.google.com/p/wami-recorder/#The_Server)，但它不允许用户重新录制他们的声音，以防他们出错。

你的建议是什么？

[上一个问题](https://stackoverflow.com/questions/5684428/how-to-record-voice-in-browser-and-save-it-into-wav-file-using-php)

谢谢，
卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:33:06.663

你应该检查这个链接。 [http://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/](http://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/)

您可以将声音的 byte[] 发送到任何动态服务器（例如 php）并制作文件并保存数据。

请注意，缺少一件事。一旦用户单击录制按钮，您将看到 Flash 将要求允许在弹出窗口中录制。因此，如果您的 Flash 窗口尺寸较小，您将不会看到允许的弹出窗口，因此不会进行录制。

另外我发现它只在 wav 中记录而不是 mp3 供个人使用我使用 ffmpeg 在 php 中将 wav 转换为 mp3。

# c# - SQL 分组按月

> ID：11707736
> 
> 赞同：1
> 
> 时间：2012-07-29T08:09:18.507
> 
> 标签：c#, asp.net, sql

这是我的查询：

```
SELECT COUNT(*) AS Expr1, name, appointment_date 
FROM ReportingTable 
GROUP BY name, appointment_date 
```

我想按月对约会日期列进行分组，如下所示：

```
SELECT COUNT(*) AS Expr1, name, appointment_date
FROM ReportingTable
GROUP BY name, MONTH(appointment_date) 
```

但我的查询引发以下错误：

> 列“appointment_date”在所选列表中无效，因为它既不包含在聚合函数也不包含在 groupby 子句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:12:11.790

这会起作用吗：

```
SELECT        COUNT(*) AS Expr1, name, MONTH(appointment_date) AS appointment_month
FROM            ReportingTable
GROUP BY name, appointment_month 
```

# android - 点击按钮时打开评分栏

> ID：11707755
> 
> 赞同：0
> 
> 时间：2012-07-29T08:13:29.067
> 
> 标签：android, onclick, ratingbar

单击按钮时，是否可以制作一个内部带有评级栏的“类似 AlertDialog 的显示”？如果是，我能否获得输入的评分值？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:53:59.733

这是我在应用程序中使用的一些代码，用于显示对话框片段并从中进行选择：

```
public class FeedChooserFragment extends DialogFragment {

    /**
     * Implement this interface if the activity needs to do something 
     * after the dialog has been dismissed.
     */
    public interface FeedChooserListener {
        public void onFeedSelected(NewsFeed feed, Object userData);
    }

    /**
     * Create a new instance of the fragment
     */
    public static FeedChooserFragment newInstance(Serializable userData) {
        FeedChooserFragment f = new FeedChooserFragment();

        Bundle args = new Bundle();
        args.putSerializable(Extra.USER_DATA, userData);
        f.setArguments(args);

        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // This is a list of items, but it could be a custom dialog showing some rating bar
        BaseActivity a = (BaseActivity) getActivity();
        List<NewsFeed> feed = a.getDataCache().getAllNewsFeed();
        adapter = new FeedAdapter(a);
        adapter.addAll(feed);

        // Here you would create a custom dialog, find the rating bar in the inflated view
        // and keep it ready for when the dialog gets dismissed. 
        AlertDialog.Builder builder = new AlertDialog.Builder(a);

        // Here you would set the button listeners instead of the listview listener
        builder.setAdapter(adapter, dialogClickListener);
        return builder.create();
    }

    private OnClickListener dialogClickListener = new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            NewsFeed selectedFeed = adapter.getItem(which);

            // This is where we try to notify the calling activity or fragment
            if (getActivity() instanceof FeedChooserListener) {
                ((FeedChooserListener) getActivity()).onFeedSelected(selectedFeed, userData);
            }

            if (getTargetFragment() instanceof FeedChooserListener) {
                ((FeedChooserListener) getTargetFragment()).onFeedSelected(selectedFeed, userData);
            }

            dialog.dismiss();
        }
    };

    private Object userData;
    private FeedAdapter adapter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:55:30.200

是的，有可能，试试这样的...

```
PopupWindow pw;    
//We need to get the instance of the LayoutInflater, use the context of this activity
LayoutInflater inflater = (LayoutInflater) TouchPaint.this
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
//Inflate the view from a predefined XML layout
View layout = inflater.inflate(R.layout.popup,
        (ViewGroup) findViewById(R.id.popup_element));

//popup : name of the XML file which includes the popup_element(can be a linear layout which includes the rating bar)

pw = new PopupWindow(layout,70, 220, true);
pw.showAtLocation(layout, Gravity.LEFT,100,200);
rb  =(RatingBar)layout. findViewById(R.id.RatingBar);      
rb.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // To Do code
                    pw.dismiss();
    }
}); 
```

# menu - Drupal 7 - 输出带有链接的菜单项

> ID：11707756
> 
> 赞同：0
> 
> 时间：2012-07-29T08:13:29.620
> 
> 标签：menu, drupal-7, icons, themes

我正在使用菜单图标模块并获得以下数组

![在此处输入图像描述](../Images/4bd2ae8e88fdca893799d69caa12f283.png)

我可以使用主题功能来利用它，还是最好迭代并生成我的菜单？

如果有怎么办？

# mysql - 从两列中选择不同的组合

> ID：11707758
> 
> 赞同：16
> 
> 时间：2012-07-29T08:13:54.127
> 
> 标签：mysql, sql

我在表超链接中有两列，源和目标，用于存储超链接的源和目标。

```
source | destination 
-------------------- 
  a    |  b 
  b    |  c 
  c    |  d 
  c    |  b 
```

有两个超链接同时涉及 b 和 c。两个超链接的区别在于超链接的方向。但是，我的目标是检索唯一的超链接，无论哪个方向。所以对于从 b 到 c 和从 c 到 b 等超链接，我只想选择其中一个。任何人都会这样做。

所以我的结果应该是这样的：

```
source | destination 
-------------------- 
  a    |  b 
  b    |  c 
  c    |  d 
```

到目前为止，我能够在 Java 中实现这一点，并在使用 JDBC 执行 SQL 语句之前进行一些处理。但是，当表变得非常大时，这将非常乏味。

我想知道是否无论如何我可以在 SQL 中执行此操作。

我试过`SELECT DISTINCT source,destination FROM Hyperlink`了，但它返回给我独特的排列。我需要独特的组合。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:19:12.627

使用 least() 和 best() 运算符很容易实现这一点，但由于 MySQL 不支持它们，您需要使用 CASE 构造来获得更小/更大的。有两列是可以的，但是一旦涉及更多列，这个解决方案就会变得非常混乱

```
select distinct 
          case 
            when source < destination then source 
            else destination 
          end as source,
          case 
            when source > destination then source 
            else destination 
          end as destination
from hyperlinks 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:39:36.863

尝试以下查询：

```
SELECT DISTINCT source, destination FROM hyperlink
MINUS 
SELECT destination, source FROM hyperlinks WHERE source < destination; 
```

这适用于 Oracle 。如果您使用的是 PostgreSQL、DB2 或 TSQL，请使用 EXCEPT 关键字而不是 MINUS。

编辑：在 MySQL 中没有这些关键字的等价物。您必须通过选择 Jim Riordan 建议的值来解决它。如果有人需要在其他四个主要 DBMS 中的任何一个中执行此操作，我不会删除我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:39:27.460

您可以使用两个单独的连接查询的联合，如下所示：

```
SELECT
lhs.source, lhs.destination
FROM Hyperlink lhs
LEFT OUTER JOIN Hyperlink rhs
ON rhs.source = lhs.destination
WHERE rhs.source IS NULL
UNION
SELECT
lhs.source, lhs.destination
FROM Hyperlink lhs
JOIN Hyperlink rhs
ON rhs.source = lhs.destination
WHERE rhs.destination <> lhs.source
ORDER BY source; 
```

第一个查询获取不以源为目标的链接，第二个查询以源为目标的匹配项，但相反。它可能不是最快的实现，但确保您在源列和目标列上有索引将有助于它，它是否对您来说是高性能取决于超链接表的大小或可能获得的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T08:40:30.707

我试过这个查询，它对我有用

```
SELECT table1.Source, table1.Destination FROM dbo.hyperlinks table1 WHERE NOT EXISTS
(SELECT * FROM hyperlinks table2 WHERE table1.Source = table2.Destination AND table2.Source = table1.Destination)

UNION 

SELECT TOP 1 table1.Source, table1.Destination FROM hyperlinks table1 WHERE 
  (SELECT COUNT(*) FROM hyperlinks table2 WHERE table1.Source = table2.Destination AND  table2.Source = table1.Destination) > 0 
```

# coldfusion - 无法让我的 reCaptcha 在我的 ColdFusion 表单上工作

> ID：11707766
> 
> 赞同：0
> 
> 时间：2012-07-29T08:14:26.970
> 
> 标签：coldfusion, recaptcha

我注册了 reCaptcha，得到了我的私钥/公钥，制作了我的 recaptcha.cfm 并将代码放入我的表单中。当您转到 URL 时，表单会完美呈现，但即使该人没有在验证码中输入任何内容，它也会提交。这是我的 recaptcha.cfm 的代码，我在 recaptcha.cfm 的“示例”下注释掉了表单页面的相关代码。任何帮助将不胜感激。谢谢你。

```
<cfsetting enablecfoutputonly="true">
<!---
    Use the reCAPTCHA API to verify human input.

    reCAPTCHA improves the process of digitizing books by sending words that
    cannot be read by computers to the Web in the form of CAPTCHAs for
    humans to decipher. More specifically, each word that cannot be read
    correctly by OCR is placed on an image and used as a CAPTCHA. This is
    possible because most OCR programs alert you when a word cannot be read
    correctly.

    You will need a key pair from http://recaptcha.net/api/getkey to use this tag.

    Sample
    --------------------------------

        <html>
        <body>

        <cfform>

            <cf_recaptcha
                privateKey="6LepjdQSAAAAAMspsO04gZUXltxddkiI0ZgSF02h"
                publicKey="6LepjdQSAAAAADoLvfvgkwacBAI_GbL-nTy2zvS6">

            <cfinput type="submit" name="submit">

        </cfform>

        <cfif isDefined("form.submit")>
            <cfoutput>recaptcha says #form.recaptcha#</cfoutput>
        </cfif>

        </body>
        </html>

--->

<cfscript>
    CHALLENGE_URL = "http://api.recaptcha.net";
    SSL_CHALLENGE_URL = "https://api-secure.recaptcha.net";
    VERIFY_URL = "http://api-verify.recaptcha.net/verify";
</cfscript>

<cfif not structKeyExists(attributes, "publicKey")>
    <cfthrow type="RECAPTCHA_ATTRIBUTE"
        message="recaptcha: required attribute 'publicKey' is missing">
</cfif>

<cfif not structKeyExists(attributes, "privateKey")>
    <cfthrow type="RECAPTCHA_ATTRIBUTE"
        message="recaptcha: required attribute 'privateKey' is missing">
</cfif>

<cftry>

    <cfparam name="attributes.action" default="render">

    <cfif not listContains("render,check", attributes.action)>
        <cfset sInvalidAttr="action not render|check">
        <cfthrow>
    </cfif>

    <cfset sInvalidAttr="ssl not true|false">
    <cfparam name="attributes.ssl" type="boolean" default="false">

    <cfparam name="attributes.theme" type="regex" pattern="(red|white|blackglass)" default="red">

    <cfif not listContains("red,white,blackglass", attributes.theme)>
        <cfset sInvalidAttr="theme not red|white|blackglass">
        <cfthrow>
    </cfif>

    <cfset sInvalidAttr="tabIndex not numeric">
    <cfparam name="attributes.tabIndex" type="numeric" default="0">

<cfcatch type="any">
    <cfthrow type="RECAPTCHA_ATTRIBUTE"
        message="recaptcha: attribute #sInvalidAttr#">
</cfcatch>
</cftry>

<cfif isDefined("form.recaptcha_challenge_field") and isDefined("form.recaptcha_response_field")>

    <cftry>
        <cfhttp url="#VERIFY_URL#" method="post" timeout="5" throwonerror="true">
            <cfhttpparam type="formfield" name="privatekey" value="#attributes.privateKey#">
            <cfhttpparam type="formfield" name="remoteip" value="#cgi.REMOTE_ADDR#">
            <cfhttpparam type="formfield" name="challenge" value="#form.recaptcha_challenge_field#">
            <cfhttpparam type="formfield" name="response" value="#form.recaptcha_response_field#">
        </cfhttp>
    <cfcatch>
        <cfthrow  type="RECAPTCHA_NO_SERVICE"
            message="recaptcha: unable to contact recaptcha verification service on url '#VERIFY_URL#'">
    </cfcatch>
    </cftry>

    <cfset aResponse = listToArray(cfhttp.fileContent, chr(10))>
    <cfset form.recaptcha = aResponse[1]>
    <cfset structDelete(form, "recaptcha_challenge_field")>
    <cfset structDelete(form, "recaptcha_response_field")>

    <cfif aResponse[1] eq "false" and aResponse[2] neq "incorrect-captcha-sol">
        <cfthrow type="RECAPTCHA_VERIFICATION_FAILURE"
            message="recaptcha: the verification service responded with error '#aResponse[2]#'. See http://recaptcha.net/apidocs/captcha/ for error meanings.">
    </cfif>

<cfelse>

    <cfset form.recaptcha = false>

</cfif>

<cfif attributes.action eq "render">

    <cfif attributes.ssl>
        <cfset challengeURL = SSL_CHALLENGE_URL>
    <cfelse>
        <cfset challengeURL = CHALLENGE_URL>
    </cfif>

    <cfoutput>
    <script type="text/javascript">
    <!--
        var RecaptchaOptions = {
           theme : '#attributes.theme#',
           tabindex : #attributes.tabIndex#
        };
    //-->
    </script>
    <script type="text/javascript"
       src="#challengeURL#/challenge?k=#attributes.publicKey#">
    </script>
    <noscript>
       <iframe src="#challengeURL#/noscript?k=#attributes.publicKey#"
           height="300" width="500" frameborder="0"></iframe><br>
       <textarea name="recaptcha_challenge_field" rows="3" cols="40">
       </textarea>
       <input type="hidden" name="recaptcha_response_field"
           value="manual_challenge">
    </noscript>
    </cfoutput>

</cfif>

<cfsetting enablecfoutputonly="false"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:01:53.960

该自定义标签已严重过时。您需要更新 URL，因为 Google 更改了它们。将它们更改为：

```
CHALLENGE_URL = "http://www.google.com/recaptcha/api";
SSL_CHALLENGE_URL = "https://www.google.com/recaptcha/api";
VERIFY_URL = "http://www.google.com/recaptcha/api/verify"; 
```

我在此处发布了此自定义标签的更新版本作为要点：[https ://gist.github.com/2210356](https://gist.github.com/2210356)

# c++ - 尝试仅更新 Qt 小部件中的一个矩形，但整个小部件的区域都被更新了

> ID：11707768
> 
> 赞同：0
> 
> 时间：2012-07-29T08:14:54.273
> 
> 标签：c++, qt

这发生在 Qt Simulator（用于手机）中。我试图只更新小部件区域的一部分，但整个小部件都被更新了。

为了说明，下面的代码：

```
void Widget::mousePressEvent(QMouseEvent *event)
{
    update(0, 0, 10, 10);
}

void Widget::paintEvent(QPaintEvent *event)
{
    qDebug() << event->rect();
} 
```

当我单击小部件时给出以下调试输出：

> QRect(0,0 458x832)

这是小部件的整个区域。

我在这里做错了什么？

* * *

**编辑**

我在 Linux 上运行了相同的代码，它可以正常工作，调试输出是

> QRect(0,0 10x10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:02:34.170

我对手机上的 Qt 不熟悉。但也许其他东西正在触发整个小部件的更新。Qt在一个事件循环处理期间`paintEvent`为所有调用发送一个。`update()`因此，您的代码可能要求进行部分更新，但窗口系统中的某处可能会以某种方式被触及并要求进行全面更新。

尝试[`repaint()`](http://qt-project.org/doc/qt-4.8/qwidget.html#repaint-7)看看是否将您的paintEvent 发送到正确的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:15:29.647

在我见过的大多数 GUI 框架中，您不能只更新应用程序窗口/小部件的某些部分。即使 API 中有一些函数可以更新某些矩形 - 例如您正在使用的 update(x,y,x,y) - 它只是通知框架它需要**至少**更新给定的矩形，并且框架可以更新一个屏幕的更大部分。

我不确定它在手机 Qt 中是如何工作的，但它在桌面版本中是这样做的，因为在大多数操作系统中，GUI 应用程序不会将其“图像”存储在任何地方，如果你最小化然后显示你的窗口，你需要重新创建整个表面.

所有这一切意味着您不能依赖这样的假设，即您将绘制一些东西，然后在需要时在某个自定义矩形中添加其他绘制操作。您应该实现一些通用的“绘画”功能，它可以从头开始重新绘制所有内容并将绘画优化留给框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T07:57:13.497

事实证明，这个错误只存在于 Qt Simulator 中。在实际手机本身上，更新区域被正确传递。我通过显示`QMessageBox`坐标为 的a 对此进行了测试`event->rect`。

# c# - 具有多个值的资源 (.resx) 文件

> ID：11707770
> 
> 赞同：0
> 
> 时间：2012-07-29T08:15:06.313
> 
> 标签：c#, visual-studio-2010, resource-files

我想知道是否可以创建一些资源文件来代表每个键的多个值。

有什么建议吗？

谢谢你;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:47:48.223

您可以通过添加 Properties.Settings 添加 System.Collections.Specialized.ListDictionary 类型的变量在其中添加 2 项并保存它来实现这一点

设置变量的范围可以在应用程序或用户级别使用

请在此处举例[http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C](http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C)

# c++ - 循环条件下的分段错误

> ID：11707773
> 
> 赞同：0
> 
> 时间：2012-07-29T08:15:59.660
> 
> 标签：c++, segmentation-fault

以下代码是在创建链表后对其进行排序。使用的排序算法有点类似于冒泡排序。我正在检查两个连续的节点并在必要时交换它们。我使用了调试器，它告诉我在对排序时使用的循环进行条件检查时引发了故障。

```
#include<iostream>
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<conio.h>

using namespace std;

struct link_list
{
       char value[20];
       struct link_list *next;
};

int main()
{
    struct link_list *head=NULL;
    int i,j;
    char input[20];
    char ch;
    struct link_list *loop_var,*temp2,*prev_node,*temp4=NULL;
    temp3=NULL;
    do
    {
        cout<<"\nEnter the string you want to insert";
        cin>>input;

        cout<<"\nDo you want to continue entering?";
        cin>>ch;

        if  (head==NULL)
        {
            head=new link_list;
            strcpy(head->value,input);
            head->next=NULL;
            continue;
        }
        for (loop_var=head;loop_var->next!=NULL;loop_var=loop_var->next);
        temp2=new link_list;
        loop_var->next=temp2;
        strcpy(temp2->value,input);
        temp2->next=NULL;
    }while(ch=='y' || ch=='Y');

    for (loop_var=head;loop_var->next!=NULL;loop_var=loop_var->next)
    {
        cout<<loop_var->value<<"\n";
    }
    cout<<loop_var->value<<"\n";

    char arr[20];

    for (loop_var=head;loop_var->next!=NULL;loop_var=loop_var->next)
    {
        cout<<"\nLoop1";
        for (temp4=head;temp4->next!=NULL;temp4=temp4->next)
        {
            cout<<"\nLoop2";
            temp2=temp4;
            if  (strcmp(temp2->value,temp2->next->value)>0)
            {
                cout<<"\nSwap Enter";

                if  (temp2==head && temp2->next->next==NULL)
                {
                    cout<<"\nSpecial1";
                    temp2->next->next=temp;
                    temp2->next=NULL;
                }
                else if (temp2==head)
                {
                     cout<<"\nSpecial2";
                     head=temp2->next;
                     temp2->next=head->next;
                     head->next=temp2;
                }
                else if (temp2->next->next==NULL)
                {
                     cout<<"\nSpecial3";
                     prev_node->next=temp2->next;
                     prev_node->next->next=temp2;
                     temp2->next=NULL;
                }
                else
                {
                    cout<<"\nNormal1";
                    prev_node->next=temp2->next;
                    temp2->next=prev_node->next->next;
                    prev_node->next->next=temp2;
                    cout<<"\nNormal2";
                }
            }
            prev_node=temp4; 
            cout<<"\nLoop2PreExit";
            fflush(stdin);
            cout<<"\nLoop2Exit";
        }
        cout<<"\nLoop1Exit";
    }
    for (loop_var=head;loop_var->next!=NULL;loop_var=loop_var->next)
    {
        cout<<loop_var->value<<"\n";
    }
    cout<<loop_var->value;
    getch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:34:37.390

```
 temp2->next->next=temp; 
```

“temp”没有在任何地方定义......如果你的编译器为你填补了那个洞，那么这就是导致你的循环条件出现段错误的原因。

此外，将所有其他变量命名为“temp#”是出现此类错误的一种简单方法。

# sql - 如何处理错误“定义不明确的列”？

> ID：11707776
> 
> 赞同：-1
> 
> 时间：2012-07-29T08:16:22.577
> 
> 标签：sql, oracle

这是我的 sql 命令：

```
select INCOME_TYPE_ID,
       REGION_CODE,
       FIN_YEAR_CODE,
       PORTION_AMOUNT
  from INCOME.INCOME_TYPE, 
       COMMON.REGION, 
       INCOME.RECEIVE_DOC_PORTION, 
       INCOME.ASSESS_ORDER_ITEM, 
       ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC, 
       ACCOUNTING.VOUCHER_ITEM, 
       ACCOUNTING.VOUCHER, 
       ACCOUNTING.FIN_YEAR
 where INCOME.RECEIVE_DOC_PORTION.ASSESS_ORDER_ITEM_ID = INCOME.ASSESS_ORDER_ITEM.ASSESS_ORDER_ITEM_ID
   and INCOME.ASSESS_ORDER_ITEM.INCOME_TYPE_ID=INCOME.INCOME_TYPE.INCOME_TYPE_ID
   and INCOME.RECEIVE_DOC_PORTION.RECEIVE_DOC_PORTION_ID = ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC.RECEIVE_DOC_PORTION_ID
   and ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC.VOUCHER_ITEM_ID = ACCOUNTING.VOUCHER_ITEM.VOUCHER_ITEM_ID
   and ACCOUNTING.VOUCHER_ITEM.VOUCHER_ID = ACCOUNTING.VOUCHER.VOUCHER_ID
   and ACCOUNTING.VOUCHER.REGION_CODE = COMMON.REGION.REGION_CODE
   and ACCOUNTING.VOUCHER.FIN_YEAR_CODE = ACCOUNTING.FIN_YEAR.FIN_YEAR_CODE 
```

我得到了这个错误：

> 定义不明确的列

我正在使用 SQL Developer 作为 Oracle 客户端。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T08:18:57.700

显然，选择列表中的一个（或多个）列名存在于 FROM 列表的多个表中。

您需要在 SELECT 列表中的每一列前面加上它来自的表（无论它们是否模棱两可，始终这样做也是一个好习惯）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:18:35.333

在选择查询中的每一列之前提及表的名称。不明确的列意味着您在其中一个 SELECT 语句中有多个具有相同名称的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:49:55.640

试试这个，用它们的完全限定名称为所有选定的列添加前缀（就像你在你的其他地方所做的那样`SELECT`）：

```
select INCOME.INCOME_TYPE.INCOME_TYPE_ID,
       COMMON.REGION.REGION_CODE,
       ACCOUNTING.FIN_YEAR.FIN_YEAR_CODE,
       ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC.PORTION_AMOUNT
  from INCOME.INCOME_TYPE, 
       COMMON.REGION, 
       INCOME.RECEIVE_DOC_PORTION, 
       INCOME.ASSESS_ORDER_ITEM, 
       ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC, 
       ACCOUNTING.VOUCHER_ITEM, 
       ACCOUNTING.VOUCHER, 
       ACCOUNTING.FIN_YEAR
 where INCOME.RECEIVE_DOC_PORTION.ASSESS_ORDER_ITEM_ID = INCOME.ASSESS_ORDER_ITEM.ASSESS_ORDER_ITEM_ID
   and INCOME.ASSESS_ORDER_ITEM.INCOME_TYPE_ID = INCOME.INCOME_TYPE.INCOME_TYPE_ID
   and INCOME.RECEIVE_DOC_PORTION.RECEIVE_DOC_PORTION_ID = ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC.RECEIVE_DOC_PORTION_ID
   and ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC.VOUCHER_ITEM_ID = ACCOUNTING.VOUCHER_ITEM.VOUCHER_ITEM_ID
   and ACCOUNTING.VOUCHER_ITEM.VOUCHER_ID = ACCOUNTING.VOUCHER.VOUCHER_ID
   and ACCOUNTING.VOUCHER.REGION_CODE = COMMON.REGION.REGION_CODE
   and ACCOUNTING.VOUCHER.FIN_YEAR_CODE = ACCOUNTING.FIN_YEAR.FIN_YEAR_CODE 
```

我不得不猜测小马的限定名

```
ACCOUNTING.VOUCHER_ITEM_RECEIVE_DOC.PORTION_AMOUNT 
```

有可能

```
INCOME.RECEIVE_DOC_PORTION.PORTION_AMOUNT 
```

但是您应该能够轻松解决该问题。

希望能帮助到你...

# iphone - 从 JSON 创建对象

> ID：11707777
> 
> 赞同：0
> 
> 时间：2012-07-29T08:18:08.547
> 
> 标签：iphone, ios, json, nsarray

我希望能够使用从 Web 服务接收的 JSON 字符串创建 NSArray 或 NSDictionary。我正在使用 json 框架来执行此操作。响应字符串将类似于以下内容：

```
{count:2,
     data:[{"ID":8,
            "Title":"Test Title",
            "Author":"Test Author",
            "Price":"18.00",
            "Edition":"1st",
            "Condition":"Good",
            "UploadDate":"2012-07-28 07:25:56.0"
            },     
          {"ID":9,
           "Title":"Test Title",
           "Author":"Test Author",
           "Price":"18.000000000000",
           "Edition":"1st",
           "Condition":"Good",
           "UploadDate":"2012-07-28 07:27:06.0"
          }
          ]
} 
```

我的问题是，从“数据”数组中获取所有数据并使用它来创建 NSArray 或 NSDictionary 的最有效方法是什么？任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:38:33.500

我使用 RestKit 进行 JSON 解析。它具有从服务器获取 json、将其转换为字典并从那里转换为可以使用的对象所需的一切。这可能比你敢于希望的要多，但它就像一种魅力。查看[https://github.com/RestKit/RestKit](https://github.com/RestKit/RestKit)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:47:22.707

从 iOS5 开始，json 解析器已被集成为 SDK 原生组件，请参见以下链接[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。您将创建一个具有 2 个键“count”和“data”的 NSDictionary，然后您将使用 objectForKey 和“data”键获取 NSArray。

# html - HTML5 即使我使用 .ogg 也不适用于 Firefox

> ID：11707778
> 
> 赞同：4
> 
> 时间：2012-07-29T08:18:25.337
> 
> 标签：html, firefox, audio, ogg

我正在尝试在我的网站上放一些音乐，所以我决定使用 HTML5 应答器，. 我了解到，如果我想让播放器在大多数浏览器上运行，我必须使用 .mp3 + .ogg。所以我做了这个：

```
<audio controls="">
 <source src="http://maxinthebox.fr/files/167d9a8aaf49fbf1bc226045c8f6920e.ogg"/>
 <source src="http://maxinthebox.fr/files/3d4fafe76fbbfd5cba1b5ec181a35b94.mp3"/>
</audio> 
```

它与 Chrome 或 Safari 完美配合，即使我只放了 .ogg 或 .mp3。但是对于 Firefox，没办法！我试图只打开 .ogg，但 Firefox 向我显示了一个视频播放器。我已经搜索了网络，但我没有找到任何有效的解决方案。

所以如果你能帮我解决我的问题，那就太好了！

先感谢您 ！

编辑：问题不是来自 Firefox，不是来自 .ogg 文件，而是来自我！我有一个 .aif 文件，我用 VLC 重新编码以制作一个 .ogg 文件。当它问我是否要转码音频时，我检查了 MP3 而不是 Vorbis ！但是在您的帮助下，我意识到了我的错误！十分感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:24:54.893

尝试指定类型属性：

```
<source src="http://maxinthebox.fr/files/167d9a8aaf49fbf1bc226045c8f6920e.ogg" type="audio/ogg"/> 
```

否则，这是一个 mime 类型的问题，与您的网络主机有关，导致视频播放器打开。看到[这个答案](https://stackoverflow.com/a/9203835/759019)。

**编辑**：ogg 文件本身可能与 firefox 不兼容。[检查此处](http://wiki.xiph.org/TheoraTestsuite)的一些示例，以确定它是服务器问题还是 ogg 文件问题。

[https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)

# php - PHP：关于 MVC 中的视图层？

> ID：11707784
> 
> 赞同：1
> 
> 时间：2012-07-29T08:19:48.397
> 
> 标签：php, html, model-view-controller

关于 MVC 模式，视图层应该是“返回”HTML 数据的函数，还是视图层实际上是 HTML 数据本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T17:43:13.513

受 MVC 启发的 Web 模式中的视图类（在 Web 上实现经典 MVC 非常困难，仅使用 PHP 是不可能的）负责表示逻辑。然后创建对请求的响应并处理多个模板。

信息如何从模型层获取到所选视图的方式很大程度上取决于实现了哪种受 MVC 启发的模式。如果您使用 MVP 或 MVVM，则信息由控制器提供，并且视图是被动的（但视图**不是哑模板**）。如果您使用 Model2 MVC 或 HMVC 模式，则视图处于活动状态，从模型层请求信息。

当该视图获取了信息后，它决定与模板进行组合。或者即使模板是必要的。然后创建响应。

每个视图生成的响应可以是 HTML、JSON、XML 或纯文本。或者，如果需要，只发送一个 HTTP 标头（例如在进行重定向时）。这都是表示逻辑的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T08:30:51.013

模型、控制器和视图的边界可以这样显示：

```
/* model models/post.php */

<?php
  class Post {
    public static all() {
      return Array(...);
    }
  }
?>

/* controller /posts/index.php */

<?php
  require "../../models/post.php"
  $posts = Post.all();
  require "../../views/posts/index.php"
?>

/* view /views/posts/index.php */

<?php foreeach ($posts as $post): ?>
  <p><?php echo $post['name']; ?></p>
<?php endforeach; ?> 
```

*从意识形态上讲，它可能只是功能，但通常的做法是模板引擎中的模板。所以视图层是`html + data insertions`（没有我们如何获得以及为什么的逻辑）。同样在思想上它也是函数，但不是框架的编程语言的函数，例如。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T08:51:50.077

视图是“模板”
模型是“数据”
控制器是“连接器”和算法的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T09:11:52.920

视图层受制于您希望在客户端上作为演示文稿可见的内容。在大多数情况下，它是 HTML、CSS 和 Javascript，您也可以使用 XML 和 JSON。

一般来说，

控制器要求模型提供数据。

控制器可以根据需要对这些数据进行更改。

控制器在模板/html 的帮助下将数据发送到视图以呈现。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-29T08:25:41.323

视图层是返回 HTML 数据的函数

# assembly - 汇编语言 - 堆栈框架中的 3d 数组排列

> ID：11707786
> 
> 赞同：0
> 
> 时间：2012-07-29T08:20:44.353
> 
> 标签：assembly, x86

我有一个 3D 数组，我想处理 say `c[l][i][k]`..的值

*   c在该位置`16(%ebp)`
*   我在`-24(%ebp)`
*   我在`-20(%ebp)`
*   k 在`-12(%ebp)`

数组大小为`[20][20][20]`

这个的汇编代码是

```
movl    -24(%ebp), %eax          #eax <-- l
imull   $1600, %eax, %eax        #eax <--1600*l 
movl    %eax, %ecx               #ecx <--1600*l
addl    16(%ebp), %ecx           #ecx <--1600*l + c 
movl    -20(%ebp), %edx          #edx <-- i
movl    %edx, %eax               #eax <-- i
sall    $2, %eax                
addl    %edx, %eax              
sall    $2, %eax            
addl    -12(%ebp), %eax             
movl    -8(%ebp), %edx              
movl    %edx, (%ecx,%eax,4) 
```

1.  这里每个汇编代码行的意义是什么？
2.  我们如何真正获得价值`c[l][i][k]`？
3.  还有这条线`movl %edx, (%ecx,%eax,4)`在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:44:44.403

该数组表示为连续的`20 * 20 * 20 * (size of one element)`字节序列。这个数组中元素的地址`[l][i][k]`可以计算如下：

```
 l * 20 * 20 * size of one element
 + i * 20 * size of one element
 + k * size of one element 
```

乘法`1600 * l`执行第一步 -`l * 20 * 20 * (size of one element)`字节（这表明大小为 4 个字节）。

您没有评论的行 compute`(((i << 2) + i) << 2) + k`本质上是`20 * i + k`-第二步和第三步相结合，没有乘以元素大小。（`sall`是“左移”，与 C 的按位移位相同。）

这个缺失的乘法由最后一行完成：`movl %edx (%ecx, %eax, 4)`计算`ecx + eax * 4`（我们想要的地址）并将值`edx`放入该地址。

请注意，正如您的问题所暗示的那样，此代码似乎正在*写入*数组，而不是从中读取。要从数组中*读取*该元素，您应该使用带括号的表达式作为`movl`.

# php - 为什么我的阵列会重置密钥编号？

> ID：11707795
> 
> 赞同：-1
> 
> 时间：2012-07-29T08:22:50.293
> 
> 标签：php, arrays, parsing, foreach, find

我正在使用这个 html 解析器，它正在搜索 HTML 元素并在它们出现时将它们打印在屏幕上

有些是ID 有些是H4

现在的问题是在它找到一个 ID 后它会寻找一个 H4

现在当我在最后为每个循环做一个时，只有 H4 会出现，但不是唯一的价格

我想知道为什么会这样

我是新手，喜欢 PHP，但我不明白为什么要重置密钥并忘记 ID 密钥

代码 =>

```
<?php 

ini_set('memory_limit','128M');
set_time_limit(0);
include_once('simple_html_dom.php');
$target_url= "ethicon2.html";
$html = new simple_html_dom();
$html -> load_file($target_url);

$line = 0;                 
$ref = $html-> find('.price');                  
$ref = $html-> find('h4');              
$ref = $html-> find('h4');

foreach ($ref as $value) {
    print "$value<br>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:27:20.343

尝试将它们添加到这样的数组中：

```
$ref[] = $html-> find('.price');                  
$ref[] = $html-> find('h4');              
$ref[] = $html-> find('h4'); 
```

**编辑** 如果你想让这些出现在一个数组中试试这个

```
$ref2 = array();
foreach($ref as $r)
{
    $ref2 = array_merge($ref2,$r);
}
print_r($ref2); 
```

# silverlight-4.0 - 在 silverlight4 中使用 ContentControl 和转换器动态创建控件

> ID：11707799
> 
> 赞同：0
> 
> 时间：2012-07-29T08:23:47.987
> 
> 标签：silverlight-4.0

我在 Silverlight 4 中创建动态控件时遇到问题。

我的要求是：

我在数据库中有问题表，如下所示。

QuestionText、AnswerControl、AnswerDefaultText、IsItmandatory

* * *

Question1 TextBox null 是

QuestionText2，单选按钮，是的，是的

问题3，组合框，空，否

………………………………………………………………………………………………………………………………………………

我需要将这些数据转换为对象并将问题文本转换为 TextBlock，并根据 answercontrol 值，需要动态创建控件。

正如您在帖子中提到的那样，我尝试过，但是数据没有绑定，并且无法将默认值作为参数值发送给转换器。

我的转换器没有被调用。下面的代码有什么问题吗？

我的代码是：

1）我的 Xaml 代码：

```
<UserControl x:Class="SilverlightApplication5.DynamicControls"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:SilverlightApplication5.Converter"
xmlns:question="clr-namespace:SilverlightApplication5"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

   <Grid x:Name="LayoutRoot" Background="White" Width="400" Height="400">
      <Grid.Resources>
<local:UILocatorConverter x:Key="UILocatorConverter" />
<question:Questions x:Key="Questions"/>
</Grid.Resources>
<ListBox ItemsSource="{Binding Questions}" Width="400" Height="400">
<ListBox.ItemTemplate>
<DataTemplate>

<Grid> 
<Grid.ColumnDefinitions>
<ColumnDefinition></ColumnDefinition>
<ColumnDefinition></ColumnDefinition>
</Grid.ColumnDefinitions>

<ContentControl Content="{Binding Converter={StaticResource UILocatorConverter},ConverterParameter={Binding QuestionText},Path=QuestionControl}" Grid.Column="0" />
<ContentControl Content="{Binding Converter={StaticResource UILocatorConverter},ConverterParameter={Binding DefaultValue},Path=AnswerControl}" Grid.Column="1" />

</Grid> 

</DataTemplate>
</ListBox.ItemTemplate>
</ListBox>
</Grid>
</UserControl> 
```

2）文件代码后面的代码是：

```
namespace SilverlightApplication5
{
public partial class DynamicControls : UserControl
{
ObservableCollection<Questions> Question;

public DynamicControls()
{
InitializeComponent();

Question = new ObservableCollection<Questions>();
Question.Add(new Questions { QuestionControl = "TextBlock", QuestionText = "What is your name?", AnswerControl = "TextBox", AnswerValues = "", DefaultValue = "" });
Question.Add(new Questions { QuestionControl = "TextBlock", QuestionText = "What is your surname?", AnswerControl = "TextBox", AnswerValues = "", DefaultValue = "" });
Question.Add(new Questions { QuestionControl = "TextBlock", QuestionText = "Sex:", AnswerControl = "ComboBox", AnswerValues = "Male,Female,Others", DefaultValue = "Select a Value" });
Question.Add(new Questions { QuestionControl = "TextBlock", QuestionText = "Marital Status", AnswerControl = "RadioButton", AnswerValues = "", DefaultValue = "Not Married" });

this.DataContext = Question;

}

}
} 
```

3）我的转换器是：

```
namespace SilverlightApplication5.Converter
{
public class UILocatorConverter : IValueConverter
{

public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
String param="This is control created dynamically";
if (parameter != null)
{
param = System.Convert.ToString(parameter);
}

switch (value.ToString())
{
case "TextBlock":
return new TextBlock() { Text = param, HorizontalAlignment=HorizontalAlignment.Center,TextWrapping=TextWrapping.NoWrap,Width=200 };
case "Button":
return new Button() { Content = param, Width=150 };
case "TextBox":
return new TextBox() { Text = param };
case "RadioButton":
return new TextBox() { };
case "ComboBox":
return new TextBox() { };

}

return null;
}

public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
throw new NotImplementedException();
}

}
} 
```

4）我的问题类是：

```
namespace SilverlightApplication5
{
public class Questions
{

private string _questionControl;
public string QuestionControl {
get
{
return _questionControl; 
}
set 
{
_questionControl = value;

}
}

private string _questionText;
public string QuestionText
{
get
{
return _questionText;
}
set
{
_questionText = value;

}
}

private string _answerControl;
public string AnswerControl
{
get
{
return _answerControl;
}
set
{
_answerControl = value;

}
}

private string _answerValues;
public string AnswerValues
{
get
{
return _answerValues;
}
set
{
_answerValues = value; 
}
}

private string _defaultValue;
public string DefaultValue
{
get
{
return _defaultValue;
}
set
{
_defaultValue = value;
}
}

}

} 
```

我的转换器没有被调用，这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:23:44.337

你需要使用这个：

```
<ListBox ItemsSource="{Binding}" Width="400" Height="400"> 
```

当您想要访问您在 DataContext 中设置的问题集合时。

您所做的是在您的资源中创建一个问题类并告诉 ListBox 使用它。

所以你根本不需要这个：

```
<question:Questions x:Key="Questions"/> 
```

（您可能必须使用 BindsDirectlyToSource ...因为您将 DataContext 直接设置为集合...可能是错误的！）。

或者，您可以在您的控制中执行此操作：

```
public partial class DynamicControls : UserControl
{
    public ObservableCollection<Questions> Question { get; set; }
    ... 
```

以这种方式设置 DataContext：

```
DataContext = this; 
```

然后使用这个绑定：

```
<ListBox ItemsSource="{Binding Question}" Width="400" Height="400"> 
```

我建议您将 Questions 类重命名为 Question，然后将 Property 重命名为 Questions，以避免混淆。

# ipad - -webkit-transform：在 iPad 上翻译块状渲染

> ID：11707802
> 
> 赞同：4
> 
> 时间：2012-07-29T08:24:08.393
> 
> 标签：ipad, css, gpu, webkit-transform, translate3d

所以我知道 translate/translate3d 使用 GPU，但由于某种原因，它会导致大型图形在 iPad 上以块/块的形式呈现。使用翻译时，我很难找到任何说明图像最大宽度/高度的地方。

我希望能够在 transform 属性上使用 css 转换，但由于这个问题不能。即使是“top”属性上的 css 转换，其执行速度也比使用 jQuery.animate() 之类的东西要慢。

对此有何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T06:47:31.027

我遇到了完全相同的问题，并且使用这个小的 CSS gem 取得了很大的成功：

```
-webkit-backface-visibility: hidden; 
```

我发现将它添加到正在动画的任何元素都可以解决“块状”渲染。在某些情况下，我还必须将其添加到子元素中，例如。我有一个大的包装 div 并使用 translateX 来调整 x 位置。我将 CSS 的魔法线添加到包装器 div 以及该 div 的直接子级（这是我的内容区域）。玩一玩，希望你能解决它！

# memory - Scikit 和 Pandas：拟合大数据

> ID：11707805
> 
> 赞同：14
> 
> 时间：2012-07-29T06:11:30.140
> 
> 标签：memory, pandas, machine-learning, scikit-learn, classification

**如何使用 scikit-learn 在大型 csv 数据（~75MB）上训练模型而不会遇到内存问题？**

我使用 IPython notebook 作为编程环境，使用 pandas+sklearn 包来分析来自 kaggle 的数字识别器教程的数据。

数据可在[网页上](http://www.kaggle.com/c/digit-recognizer/data)找到，链接到[我的代码](http://pastie.org/4351884)，这是[错误消息](http://pastie.org/4351918)：

`KNeighborsClassifier`用于预测。

**问题：**

> 使用 read_csv 函数加载大型数据集时发生“MemoryError”。为了暂时绕过这个问题，我必须重新启动内核，然后 read_csv 函数成功加载文件，但是当我再次运行相同的单元格时会出现同样的错误。

当`read_csv`函数成功加载文件时，对 进行更改后`dataframe`，我可以将特征和标签传递给 KNeighborsClassifier 的 fit() 函数。此时会出现类似的内存错误。

**我尝试了以下方法：**

逐块迭代 CSV 文件，并相应地拟合数据，但问题是每次数据块的预测模型都会被覆盖。

**您认为我可以做些什么来成功训练我的模型而不会遇到内存问题？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T10:47:08.103

注意：当您使用 pandas 加载数据时，它会创建一个`DataFrame`对象，其中每列对于所有行都有同质数据类型，但 2 列可以有不同的数据类型（例如整数、日期、字符串）。

当您将`DataFrame`实例传递给 scikit-learn 模型时，它将首先分配一个 dtype 为 np.float32 或 np.float64 的同质 2D numpy 数组（取决于模型的实现）。此时，您将在内存中拥有 2 个数据集副本。

为避免这种情况，您可以编写/重用一个 CSV 解析器，该解析器直接以 scikit-learn 模型预期的内部格式/dtype 分配数据。例如，您可以尝试`numpy.loadtxt`（查看参数的文档字符串）。

此外，如果您的数据非常稀疏（许多零值），最好使用 scipy.sparse 数据结构和可以处理这种输入格式的 scikit-learn 模型（检查文档字符串以了解）。但是 CSV 格式本身不太适合稀疏数据，我不确定是否存在直接的 CSV 到`scipy.sparse`解析器。

**编辑：**供参考 KNearestNeighborsClassifer 分配具有形状的临时距离数组，`(n_samples_predict, n_samples_train)`仅在需要时非常浪费`(n_samples_predict, n_neighbors)`。可以在此处跟踪此问题：

[https://github.com/scikit-learn/scikit-learn/issues/325](https://github.com/scikit-learn/scikit-learn/issues/325)

# c# - DisplayMember 并不总是在 CheckedListBox 中设置

> ID：11707807
> 
> 赞同：1
> 
> 时间：2012-07-29T08:24:55.517
> 
> 标签：c#, visual-studio-2010, checkedlistbox

我有一个 CheckedListBox，我用一个自定义“DBitemtype”对象列表填充，我首先设置 DataSource，然后是 CheckedListBox“clbItemType”的 DisplayMember 和 ValueMember 属性。现在在运行时，用户可以选择更改项目，所以我有一个事件，通过首先将 DataSource 设置为 null，然后将 DataSource 设置为新列表，将 CheckedListBox 与相同“DBitemtype”对象的不同列表重新绑定，然后将 DisplayMember 和 ValueMember 属性再次设置为完全相同的值，如下所示：

```
clbItemType.DataSource = null;
clbItemType.DataSource = _SelectedItemTypes;  // A List<DBitemtype>
clbItemType.DisplayMember = DBitemtype.Columns.ItemName;  // String constant - value "ItemName"
clbItemType.ValueMember = DBitemtype.Columns.ID;          // String constant - value "ID"
clbItemType.Refresh(); 
```

用于 DisplayMember 和 ValueMember 的字符串常量都描述了 DBitemtype 类中的公共字符串属性。

我遇到的问题是，有时 DisplayMember 设置为“ItemName”，有时它没有设置，当我单步执行代码时它只是保持为“”。我似乎无法找到一种模式来解释为什么它只偶尔发生。没有错误或异常被抛出。

我能找到的是“如果无法设置 DisplayMember 的新值，则保留以前的值。” 来自这里的 msdn 文章[CheckedListBox.DisplayMember 属性](http://msdn.microsoft.com/en-us/library/yx9dzztb%28v=vs.100%29.aspx)

所以我想这是一个两部分的问题：

1）其他人有这个问题吗？

2) 哪些条件会导致 DisplayMember 无法设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:34:51.333

我不确定这是否有帮助，但我确实发现 DisplayName 不喜欢公共字段 ( `public int x;`)，只喜欢公共属性 ( `public int x { get; set; };`)。

因此，我会尝试确保`ItemName`或任何其他潜在的 DisplayName 值实际上是`DBitemtype`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:59:09.543

它可能看起来一样，但是：

```
clbItemType.DataSource = _SelectedItemTypes;  // A List<DBitemtype>
clbItemType.DisplayMember = DBitemtype.Columns.ItemName;  // String constant - value "ItemName"
clbItemType.ValueMember = DBitemtype.Columns.ID;          // String constant - value "ID" 
```

不一样：

```
clbItemType.DisplayMember = DBitemtype.Columns.ItemName;  // String constant - value "ItemName"
clbItemType.ValueMember = DBitemtype.Columns.ID;          // String constant - value "ID"
clbItemType.DataSource = _SelectedItemTypes;  // A List<DBitemtype> 
```

首先设置您的成员，然后更改您的数据源。更改 DataSource 将触发事件触发器，然后返回代码块。

# asp.net - 如何在下拉列表中保留选定的值

> ID：11707809
> 
> 赞同：1
> 
> 时间：2012-07-29T08:25:09.267
> 
> 标签：asp.net, ajax, vb.net, html-select

我`DropDownList`在 a 的标头中有 a `GridView`，我将其数据绑定在 中`RowDataBound`并将其放在`UpdatePanel`. 我想在 selection(postback) 之后保留选定的值。如何 ？

在这里我填写下拉列表

Protected Sub gvStaffList_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) 处理 gvStaffList.RowDataBound

```
If e.Row.RowType = DataControlRowType.Header Then

    ' Fill the header dropdownlist from the datatable and displaying only the unique values (NOT from database directly) 

    ' ============================= Supervisor name ======================================================
    Dim ddlSupervisors As DropDownList = DirectCast(e.Row.FindControl("ddlSupervisors"), DropDownList)
    For x As Integer = 0 To data.Rows.Count - 1
        If ddlSupervisors.Items.FindByValue(data.Rows(x).Item("SuperId")) Is Nothing Then
            ddlSupervisors.Items.Add(New ListItem(data.Rows(x).Item("SuperName"), data.Rows(x).Item("SuperId")))
        End If
    Next
    ddlSupervisors.Items.Insert(0, New ListItem("All", "All"))

    ' ============================= Supervisor name ======================================================
    Dim ddlPostTitle As DropDownList = DirectCast(e.Row.FindControl("ddlPostTitle"), DropDownList)
    For x As Integer = 0 To data.Rows.Count - 1

        If ddlPostTitle.Items.FindByValue(data.Rows(x).Item(1)) Is Nothing Then
            ddlPostTitle.Items.Add(New ListItem(data.Rows(x).Item(1), data.Rows(x).Item(1)))
        End If
    Next
    ddlPostTitle.Items.Insert(0, New ListItem("All", "All")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:30:49.930

您可以在 IndexChanged 事件期间将其存储在会话中，然后将其拉回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:32:42.947

你好使用这样的会话：

```
Session["selecteditem"] = "your value"; 
```

在 c# 上；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T08:36:09.297

尝试在回发后再次填充您的下拉列表，然后您可以在再次填充后保留下拉列表的选定值。

尝试一下，如果有任何问题，请告诉我

# cuda - 破坏所有内核的原子操作

> ID：11707812
> 
> 赞同：0
> 
> 时间：2012-07-29T08:26:04.040
> 
> 标签：cuda, atomic

我在 GPU 上运行一些图像处理操作，我需要输出的直方图。我已经编写并测试了处理内核。我还分别测试了输出图片样本的直方图内核。它们都可以正常工作，但是当我将它们全部放在一个循环中时，我什么也得不到。

这是我的直方图内核：

```
__global__ void histogram(int n, uchar* color, uchar* mask, int* bucket, int ch, int W, int bin)
{
    unsigned int X = blockIdx.x*blockDim.x+threadIdx.x;
    unsigned int Y = blockIdx.y*blockDim.y+threadIdx.y;

    int l = (256%bin==0)?256/bin: 256/bin+1;
    int c;

    if (X+Y*W < n && mask[X+Y*W])
    {
        c = color[(X+Y*W)*3]/bin;
        atomicAdd(&bucket[c], 1);

        c = color[(X+Y*W)*3+1]/bin;
        atomicAdd(&bucket[c+l], 1);

        c = color[(X+Y*W)*3+2]/bin;
        atomicAdd(&bucket[c+l*2], 1);
    }
} 
```

它正在更新红色、绿色和蓝色的直方图向量。（“l”是向量的长度）当我注释掉 atomicAdds 时，它再次产生输出，但当然不是直方图。他们为什么不一起工作？

编辑：

这是循环：

```
 cudaMemcpy(frame_in_gpu,frame_in.data, W*H*3*sizeof(uchar),cudaMemcpyHostToDevice);
    cuda_process(frame_in_gpu, frame_out_gpu, W, H, dimGrid,dimBlock);
    cuda_histogram(W*H, frame_in_gpu, mask_gpu, hist, 3, W, bin, dimg_histogram, dimb_histogram); 
```

然后我将输出复制到主机内存并将其写入视频。这些是 c 代码，仅使用作为输入给出的 dimGrid 和 dimBlock 调用其内核。还：

```
dim3 dimBlock(32,32);
dim3 dimGrid(W/32,H/32);
dim3 dimb_Histogram(16,16);
dim3 dimg_Histogram(W/16,H/16); 
```

我将其更改为直方图，因为它更适用于它。有关系吗？

Edit2：我正在使用 -arch=sm_11 选项进行编译。我只是在某个地方读到它。谁能告诉我应该怎么选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T23:46:37.987

也许您应该尝试在没有 -arch=sm_11 标志的情况下进行编译。sm 1.1 是第一个支持全局内存原子操作的架构，而您的 GPU 支持 SM 2.0。因此没有理由为 SM 1.1 编译，除非为了向后兼容。

一个可能的问题是 SM 1.1 不支持对全局内存中 64 位整数的原子操作。所以我建议你重新编译没有 -arch 选项的代码，或者如果你喜欢使用 -arch=sm_20

# ruby-on-rails - 更新属性会导致批量分配异常，即使使用 attr_accessible

> ID：11707815
> 
> 赞同：1
> 
> 时间：2012-07-29T08:26:22.117
> 
> 标签：ruby-on-rails, forms, mass-assignment

即使我在 attr_accessible 中有要更新的字段，我也会收到以下错误

```
Can't mass-assign protected attributes: utf8, _method, authenticity_token, profile, commit, action, controller, id 
```

我猜我不想保存的其他属性正在引发异常，但是我该如何过滤掉它们呢？

这是参数哈希

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"1aabj2DxleZoDu/U0SzGXSZrPcesRKXkIXTRVbk9f0A=",
 "profile"=>{"name"=>"Aaron Dufall",
 "company"=>"Supreme Windows",
 "location"=>"",
 "professional_bio"=>""},
 "commit"=>"Update",
 "id"=>"1"} 
```

profile_controller.rb

```
class ProfilesController < ApplicationController
    respond_to :html

    def edit
      @profile = Profile.find(params[:id])
      respond_with @profile
    end

    def update
        @profile = Profile.find(params[:id])
        if @profile.update_attributes(params)
           flash[:success] = "Profile sucessfully updated"
           redirect_to root_path
        else
           flash[:error] = "Profile failed to update"
           render 'edit'
        end
    end
end 
```

配置文件.rb

```
class Profile < ActiveRecord::Base
  belongs_to :user
  attr_accessible :name, :company, :location, :professional_bio
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:46:30.783

在您的控制器中，您应该使用

```
if @profile.update_attributes(params[:profile]) 
```

这将仅过滤参数上“profile”键下的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T17:53:24.607

您可能需要考虑使用**:without_protection** - 它会跳过批量分配安全性。

IE：

```
User.new({ :first_name => 'Jamie', :is_admin => true }, :without_protection => true) 
```

回复：[http ://apidock.com/rails/ActiveRecord/Base/new/class](http://apidock.com/rails/ActiveRecord/Base/new/class)

# c# - 如何正确地将实体框架绑定到 Datagridview

> ID：11707817
> 
> 赞同：0
> 
> 时间：2012-07-29T08:26:44.973
> 
> 标签：c#, winforms, entity-framework, entity-framework-4, ado.net

我想做以下事情，将 OrderDetail 绑定到 DataGridView。然后所有这些 OrderDetails 将它们添加到单个订单中。我怎样才能做到这一点。不太确定我是否会提供更多细节。 **编辑：**进行新销售时，我必须创建销售并手动添加销售细节，在变量**c**中进行映射，而理论上我可以简单地做 a.Sales = ventaDetallesBindingSource.List

```
using (PuntoDeVentaEntities Entidades = new PuntoDeVentaEntities())
            {
                    Venta a = new Venta()
                    {
                        Fecha = DateTime.Now,
                    };
                    Entidades.AddToVentas(a);
                    Entidades.SaveChanges();
                    VentaDetalle c;

                    foreach (VentaDetalle item in ventaDetallesBindingSource.List)
                    {

                        c = new VentaDetalle()
                        {
                            IdProducto = item.IdProducto,
                            IdVenta = a.Id,
                            PrecioVenta = item.PrecioVenta,
                            Cantidad = item.Cantidad,
                            Producto = null,
                            Venta = null,
                            IdCliente = item.IdCliente,
                            Cliente = null
                        };

                        a.VentaDetalles.Add(c);
                        c = null;

                    }

                    Entidades.SaveChanges(); 
```

}

# text - WEKA LibSVM 文本分类器

> ID：11707823
> 
> 赞同：2
> 
> 时间：2012-07-29T08:29:49.043
> 
> 标签：text, classification, weka, svm

我是 WEKA 的新手。我编写了一个程序来使用 LibSVM 和 WEKA 对文本进行分类。该代码可在[BitBucket Repo](https://bitbucket.org/jaganadhg/wekatextmining/changeset/b1367f7ec8d5d3680adedbf43ffa8b6e0cef396d#chg-src/org/jaggu/ml/weka/WekaSVMTrainer.java)中找到 。

有人可以告诉我我是否走在正确的道路上。

打赌问候

贾古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:48:02.243

您可能想评估您的方法，看看您是否“走在正确的道路上”。使用[交叉验证](http://weka.wikispaces.com/Use+WEKA+in+your+Java+code#Classification-Evaluating)来查看您的方法训练的模型是否产生了您想要的性能。

# asp.net - 让 Sql Server Data Tools 与 Visual Studio 2012 Express 候选版一起使用

> ID：11707824
> 
> 赞同：5
> 
> 时间：2012-07-29T08:29:49.143
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008, visual-studio-2012

我正在努力迁移到 Visual Studio 2012 Express Edition 以处理包含扩展名为 .dbproj 的数据库项目的项目。这个博客[http://visualstudiomagazine.com/blogs/data-driver/2012/06/getting-visual-studio-2012-and-ssdt-to-work-together.aspx](http://visualstudiomagazine.com/blogs/data-driver/2012/06/getting-visual-studio-2012-and-ssdt-to-work-together.aspx)给人的印象是通过一些工作这是基本上都是可以管理的。

首先，您必须在 Visual Studio 2010 中将 .dbproj 转换为 .sqlproj。

我设法安装了 Visual Studio 2010。这让我可以将 .dbproj 转换为 .sqlproj。从那里的想法是安装 Sql Server Data Tools ( [http://msdn.microsoft.com/en-us/data/tools.aspx](http://msdn.microsoft.com/en-us/data/tools.aspx) ) 并在 Visual Studio 2012 中打开 sqlproj 项目，但我无法打开 sqlproj在 Visual Studio 2012 中。

我已经尝试了这里的建议修复[http://blogs.msdn.com/b/ssdt/archive/2012/06/07/upgrade-issue-to-visual-studio-2012-rc.aspx](http://blogs.msdn.com/b/ssdt/archive/2012/06/07/upgrade-issue-to-visual-studio-2012-rc.aspx)以及建议关于在这里修复[http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/c66c2296-c94e-4f21-993e-7d3090a596a5](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/c66c2296-c94e-4f21-993e-7d3090a596a5)，但无论我做什么我都无法创建或打开 sqlproj在 Visual Studio Express 2012 RC for Web 中键入项目。有谁知道如何解决这个问题？

更新：此常见问题解答[http://msdn.microsoft.com/en-us/subscriptions/hh322942.aspx](http://msdn.microsoft.com/en-us/subscriptions/hh322942.aspx)清楚表明您必须在 Visual Studio 2010 Shell 中使用 SQL Server 数据库项目，而不是在 Visual Studio 2010 或 2012 中网络。

我现在的问题是我可以通过手动导入 SQL 脚本并从那里开始创建一个全新的项目，但是当我打开 .sqlproj 文件并尝试使用该 SQL Server 项目时，我从存储过程中得到了很多虚假错误这实际上是完全有效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T04:15:48.660

我在这里得到了微软的明确答复[http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/c66c2296-c94e-4f21-993e-7d3090a596a5](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/c66c2296-c94e-4f21-993e-7d3090a596a5)

Visual Studio Express 2012 for Web 不支持新的 Sql Server 数据工具。要使用数据库项目（从旧的 dbproj 转换或从头开始创建新项目），您必须使用 Visual Studio 2010 Shell。我从存储过程中得到的错误是由于没有正确导入 sql 脚本引起的。旧的 dbproj 在任意文件夹中有 sql 脚本。解决方案是从我刚刚从 dbproj 转换的项目中排除所有 sql 脚本，然后重新导入 sql 脚本。当您这样做时，项目会识别它们并且不会引发错误。

# r - R：按组组合矩阵的行

> ID：11707826
> 
> 赞同：1
> 
> 时间：2012-07-29T08:30:15.953
> 
> 标签：r

我正在尝试重新格式化数据集`my.data`以获得`my.data2`语句下方显示的输出。具体来说，我想将 的最后 4 列`my.data`放在每行上`record.id`，其中的最后四列`my.data`将占据新数据矩阵的第 2-5 列 if`group=1`和第 6-9 列 if `group=2`。

我在下面编写了繁琐的代码，但是双 for 循环导致了我根本无法定位的错误。即使双 for 循环有效，我怀疑有一种更有效的方式来完成同样的事情——（也许`reshape`？）

感谢您帮助纠正双 for 循环或更高效的代码。

```
my.data <-  "record.id group s1 s2 s3 s4
    1  1      2      0      1      3
    1  2      0      0      0     12
    2  1      0      0      0      0
    3  1     10      0      0      0
    4  1      1      0      0      0
    4  2      0      0      0      0
    8  2      0      2      2      0
    9  1      0      0      0      0
    9  2      0      0      0      0"    

my.data2 <- read.table(textConnection(my.data), header=T)

# desired output
#
# 1     2      0      1      3      0      0      0     12
# 2     0      0      0      0      0      0      0      0
# 3    10      0      0      0      0      0      0      0
# 4     1      0      0      0      0      0      0      0
# 8     0      0      0      0      0      2      2      0
# 9     0      0      0      0      0      0      0      0 
```

代码：

```
dat_sorted <- sort(unique(my.data2[,1]))
my.seq <- match(my.data2[,1],dat_sorted)

my.data3 <- cbind(my.seq, my.data2)

group.min <- tapply(my.data3$group, my.data3$my.seq, min)
group.max <- tapply(my.data3$group, my.data3$my.seq, max)

# my.min <- group.min[my.data3[,1]]
# my.max <- group.max[my.data3[,1]]

my.records <- matrix(0, nrow=length(unique(my.data3$record.id)), ncol=9)

x <- 1

for(i in 1:max(my.data3$my.seq)) {

   for(j in group.min[i]:group.max[i]) {

      if(my.data3[x,1] == i) my.records[i,1]   = i

      # the two lines below seem to be causing an error
      if((my.data3[x,1] == i) & (my.data3[x,3] == 1)) (my.records[i,2:5] = my.data3[x,4:7])
      if((my.data3[x,1] == i) & (my.data3[x,3] == 2)) (my.records[i,6:9] = my.data3[x,4:7])

      x <- x + 1

   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:43:40.007

你是对的，`reshape`这里有帮助。

```
library(reshape2)
m <- melt(my.data2, id.var = c("record.id", "group"))
dcast(m, record.id ~ group + variable, fill = 0)
  record.id 1_s1 1_s2 1_s3 1_s4 2_s1 2_s2 2_s3 2_s4
1         1    2    0    1    3    0    0    0   12
2         2    0    0    0    0    0    0    0    0
3         3   10    0    0    0    0    0    0    0
4         4    1    0    0    0    0    0    0    0
5         8    0    0    0    0    0    2    2    0
6         9    0    0    0    0    0    0    0    0 
```

比较：

```
dfTest <- data.frame(record.id = rep(1:10e5, each = 2), group = 1:2, 
s1 = sample(1:10, 10e5 * 2, replace = TRUE), 
s2 = sample(1:10, 10e5 * 2, replace = TRUE), 
s3 = sample(1:10, 10e5 * 2, replace = TRUE), 
s4 = sample(1:10, 10e5 * 2, replace = TRUE))

system.time({
...# Your code
})
Error in my.records[i, 1] = i : incorrect number of subscripts on matrix
Timing stopped at: 41.61 0.36 42.56 

system.time({m <- melt(dfTest, id.var = c("record.id", "group"))
              dcast(m, record.id ~ group + variable, fill = 0)})
   user  system elapsed 
  25.04    2.78   28.72 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:01:13.100

Julius 的回答更好，但为了完整起见，我想我设法让以下 for 循环工作：

```
dat_x <- (unique(my.data2[,1]))
my.seq <- match(my.data2[,1],dat_x)

my.data3 <- as.data.frame(cbind(my.seq, my.data2))

my.records <- matrix(0, nrow=length(unique(my.data3$record.id)), ncol=9)
my.records <- as.data.frame(my.records)

my.records[,1] = unique(my.data3[,2])

for(i in 1:9) {

      if(my.data3[i,3] == 1) (my.records[my.data3[i,1],c(2:5)] = my.data3[i,c(4:7)])
      if(my.data3[i,3] == 2) (my.records[my.data3[i,1],c(6:9)] = my.data3[i,c(4:7)])

} 
```

# c++ - 调用派生方法而不是 Base

> ID：11707828
> 
> 赞同：0
> 
> 时间：2012-07-29T08:30:22.977
> 
> 标签：c++, polymorphism

我忘记了为什么基类方法会调用派生的虚拟方法，而该方法的前缀不是`this->`或`Derived::`类型为对象`Derived*`请参阅 Arc::SetAngles(...) 中的注释行：

抽象的：

```
class Shape {
    public:
    //...
    protected:
    //...
    virtual void CalculateArea()=0;
    virtual void CalculateCenter()=0;
    private:
    //...
}; 
```

根据：

```
void Arc::CalculateArea() {
    _area = 0.5 * _radius * _radius * _theta;
}

void Arc::CalculateCenter() {
    double e = GetEndAngle();
    double s = GetStartAngle();
    double d = e - s;

    double x = 0.0;
    double y = 0.0;
    double offset = 0.0;
    if(d < 0.0) {
        offset = a2de::A2DE_PI;
    }
    x = (GetPosition().GetX() + std::cos(((s + e) / 2.0) + offset) * _radius);
    y = (GetPosition().GetY() + -std::sin(((s + e) / 2.0) + offset) * _radius);
    _center = Vector2D(x, y);
    return;
}
void Arc::SetAngles(double startAngle, double endAngle) {
    if(startAngle < 0.0) {
        startAngle += A2DE_2PI;
    }
    if(endAngle < 0.0) {
        endAngle += A2DE_2PI;
    }
    _startAngle = std::fmod(startAngle, A2DE_2PI);
    _endAngle = std::fmod(endAngle, A2DE_2PI);

    //must call base version explicitly otherwise Sector:: versions are called when object is of type Sector* regardless if prefaced with this-> or nothing.

    Arc::CalculateCenter();
    Arc::CalculateLength();
    Arc::CalculateArea();
} 
```

衍生的：

```
void Sector::CalculateArea() {
    _area = (_radius * _radius * _theta) / 2.0;
}

void Sector::CalculateCenter() {
    double x = (4 * _radius) / (3 * a2de::A2DE_PI);
    x += this->GetX();
    _center = Vector2D(x, GetY());
}
void Sector::SetAngles(double startAngle, double endAngle) {
    Arc::SetAngles(startAngle, endAngle);
    Sector::CalculateArea();
    Sector::CalculateCenter();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:39:37.570

C++ 旨在为您提供以下选择：

1.  使用非虚拟函数 - 基类调用使用基类方法。
2.  使用虚函数——基类调用使用派生类方法。

你的选择，你想要哪种行为？

也就是说，您的代码和继承层次结构有些混乱。

如果一个 Sector IS-A Arc，那么可以说（这里是几何参数，而不是 OO 设计参数）扇区面积和弧面积的计算应该是相同的。查看您的代码，它们是-您可能会删除`Sector::CalculateArea`（相同公式的差异代码）。

但是，要求这`CalculateCenter`两种类型的方法不同，并且基类代码不能利用派生类覆盖（几何参数和 OO 参数），强烈建议扇区不是弧。

您的代码可能是为了继承而继承的，在这种情况下很糟糕。问问自己，正确的继承是否可能来自`Shape`.

回到严格的几何论点，圆弧不是扇形：圆弧位于圆的周长（曲线，如果您愿意的话），扇形是圆的一部分（饼形）。这可以通过完全不同的实现在您的代码中看到。

# c# - 如何从全局热键设置我的表单处于活动状态？

> ID：11707837
> 
> 赞同：3
> 
> 时间：2012-07-29T08:32:58.377
> 
> 标签：c#, window

我有名为 Form1 的表单。我设置热键 Ctrl + G 做：

```
Show();
Active();
TopMost = true;
TopMost = false;
TextBox1.Focus(); 
```

当我在记事本中输入时，按下该热键，我的 Form1 出现了，如下所示： ![在此处输入图像描述](../Images/313127caf36075245359714bdf19610c.png)

Notepad 和 Form1 都有文本光标，但是当继续输入时，Form1.TextBox1 没有输入，但记事本得到。

但是当通过 Visual Studio 和调试 (F5) 打开解决方案时，我的 Form1 得到输入，而记事本没有。

你能帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:37:29.527

尝试从您的 WinForms 进程中调用 ShowWindowAsync 和 SetForegroundWindow，如下所述：

[http://weimenglee.blogspot.com/2007/01/programmatically-switch-to-another.html](http://weimenglee.blogspot.com/2007/01/programmatically-switch-to-another.html)

记事本似乎仍然是活跃的应用程序。

# javascript - Rgd：Javascript 重定向顶部父页面

> ID：11707838
> 
> 赞同：2
> 
> 时间：2012-07-29T08:33:01.070
> 
> 标签：javascript

已编辑的问题

总之：

我有 2 个站点 siteA.com siteB.com

iframe 属于 siteB.com 但我也想允许 siteA.com 到 iframe siteB.com 页面。但是，任何不是 siteA 或 siteB.com 的东西都将被重定向到 siteA.com

使用 javascript，我如何检查，考虑忽略 www 或不带 www（通配符），并且我的网站可能是 siteA.com/pretty-url

我如何使用 javascript 进行检查并添加安全性，任何未经授权的随机站点都将导致 window.top.location.href 被重定向到 siteA.com

感谢所有帮助，这里是新的:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T08:39:20.833

像这样的东西？：

```
if (window.top != window && !window.top.location.href.split('?')[0].split('#')[0].match('mysitedomain.com'))
{
    window.top.location.href = window.location.href;
} 
```

第一项检查是确保仅当您的站点位于框架中时才运行此代码。
第二项检查是查看顶部框架（浏览器窗口）的 url 是否包含您的域。我们需要忽略查询字符串/锚点，因为它看起来像这样： http://notmine.com/path/file.html?subframe= [mysitedomain.com](http://notmine.com/path/file.html?subframe=mysitedomain.com)

这仍然匹配：

> http://not* *mysitedomain.com* */path

在 .match(...) 中，您可以包含 http:// 或 https://。

**更新以回答您的编辑：**

```
var topUrl = window.top.location.href.split('?')[0].split('#')[0];

if (window.top != window && !topUrl.match('siteA.com') && !topUrl.match('siteB.com'))
{
    window.top.location.href = "siteA.com";
} 
```

# haskell - Data.Binary 最佳实践——何时严格以及如何严格

> ID：11707840
> 
> 赞同：2
> 
> 时间：2012-07-29T08:33:18.667
> 
> 标签：haskell, serialization

受[这个 StackOverflow 问题](https://stackoverflow.com/questions/11695373/lazy-decoding-of-a-list-with-data-binary)的启发，我想向社区询问有关`Binary`. 当我注意到我的大型`Hyperedge`s 列表（一个简单的代数数据结构）不会被流式传输而是立即加载时，我编写了使用 10000 个元素块的`myGet`and`myPut`函数。如上述 StackOverflow 问题的答案所述，我的实现不适用于 Binary >= 0.5。（我错过了。）

但是，我还注意到，在将`Hyperedge`s 与`Int`它们`Int32`的类型参数一起加载时，很多`Word32`s 和`Word64`s 被分配只是为了稍后转换。那是一次巨大的空间泄漏。`deepseq`如您所见，我`get`尽可能早地“修复”了它。我本来希望使用更精致的方法，也许使用`Strategy`，但话又说回来，我不能再使用`Binary`类型类了，因为该策略必须是一个附加参数。

总结：现在，一团糟。你能提供“最佳实践”的建议吗？

```
instance (NFData v, NFData l, NFData i, B.Binary v, B.Binary l, B.Binary i, Ord v)
  => B.Binary (Hyperedge v l i) where
  put e = do
    B.put (to e)
    B.put (from e)
    B.put (label e)
    B.put (ident e)
  -- get = mkHyperedge <$> B.get <*> B.get <*> B.get <*> B.get
  get = do
    x1 <- B.get
    x2 <- x1 `deepseq` B.get
    x3 <- x2 `deepseq` B.get
    x4 <- x3 `deepseq` B.get
    x4 `deepseq` return (mkHyperedge x1 x2 x3 x4)

myGet
  :: (NFData v, NFData l, NFData i, B.Binary v, B.Binary l, B.Binary i, Ord v) 
  => B.Get [Hyperedge v l i]
myGet = do
  es1 <- B.get
  if null es1
    then return []
    else
      do
        es2 <- myGet
        return (es1 ++ es2)

myPut
  :: (NFData v, NFData l, NFData i, B.Binary v, B.Binary l, B.Binary i, Ord v) 
  => [Hyperedge v l i] -> B.Put
myPut es@[] = B.put es -- ([] :: [Hyperedge v l i])
myPut es = do
  B.put (take 10000 es)
  myPut (drop 10000 es) 
```

# apache - Apache MINA FTP 服务器，如何？

> ID：11707842
> 
> 赞同：0
> 
> 时间：2012-07-29T08:33:50.360
> 
> 标签：apache, ftp

```
import org.apache.ftpserver.config.*;
import org.apache.ftpserver.filesystem.*;
import org.apache.ftpserver.ftplet.FtpException;
import org.apache.ftpserver.listener.ListenerFactory;
import org.apache.ftpserver.command.*;
import org.apache.ftpserver.config.spring.*;
import org.apache.*;
import org.apache.ftpserver.impl.*;

public class ftpko {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    FtpServerFactory serverFactory = new FtpServerFactory();

    ListenerFactory factory = new ListenerFactory();

    // set the port of the listener
    factory.setPort(2221);

    // replace the default listener
    serverFactory.addListener("default", factory.createListener());

    // start the server
    FtpServer server = serverFactory.createServer(); 
            server.start();

}

} 
```

我正在尝试运行此代码，但出现此错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
Unhandled exception type FtpException 
```

这是堆栈跟踪：

```
log4j:WARN No appenders could be found for logger        (org.apache.ftpserver.impl.DefaultFtpServerContext).
log4j:WARN Please initialize the log4j system properly 
```

这有什么问题？谢谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:08:02.127

对 MINA ftp 一无所知，但编译错误表明您忘记在 main 方法中添加 throws ...

```
public static void main(String[] args) throws FtpException { ... } 
```

# c++ - C++程序产生了很多错误

> ID：11707846
> 
> 赞同：-5
> 
> 时间：2012-07-29T08:34:19.373
> 
> 标签：c++

好的，我是一个完整的 C++ 菜鸟（我昨天才开始学习），我正在尝试编写一个简单的计算器程序。我用记事本写的，但是当我尝试编译它时，cmd产生了很多错误，这很有趣。谁能告诉我我做错了什么？

这是我的代码：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
double num1;
double num2;
string operator;
double num3;

cout<<"Enter your first number"<<endl;
cin<<num1;
cout<<"Enter the operator"<<endl;
cin<<operator;
cout<<"Enter the next number"<<endl;
cin<<num2;

if(operator=="/"&&num2==0)
{
cout<<"You are attempting to divide by 0\. This is impossible and causes the destruction of the universe. However, the answer is infinity"<<endl;
}

if(operator=="+")
{
num3 = num1+num2;
}
else if(operator=="-")
{
num3 = num1-num2;
}
else if(operator=="*"||operator=="x"||operator=="X")
{
num3 = num1*num2;
}
else
{
num3 = num1/num2;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T08:36:40.837

主要错误是这`operator`是 C++ 中的关键字，您不能将其用作变量名。尝试将其重命名为`op`或其他内容。编译器经常会感到困惑，只关注前几个错误，修复它们并重新编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:38:20.427

`operator`是一个关键字 -`op`用于您的变量名。

您想使用`>>`带有 的运算符而`cin`不是`<<`运算符进行输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:36:45.820

很可能是这一行：

```
string operator; 
```

`operator`是 C++ 关键字。尝试将其更改为其他名称，例如`userOp`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T08:37:58.180

要从流中读取，您需要>>，所以它是 cin>>num1;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T08:39:18.007

A. 有什么错误？
B. 作为对新手（如您自称）的建议，当您编写新代码时，请尝试在编写每个部分后对其进行编译，这将帮助您找出导致错误的代码段。

# cuda - 正确计算 CUDA 内核的 gridDim

> ID：11707854
> 
> 赞同：0
> 
> 时间：2012-07-29T08:36:26.827
> 
> 标签：cuda

我希望看到从 0.0 到 999.0 的数字，但对于以下代码的某些索引却得到了一些非常奇怪且长的数字：

```
__global__ void kernel(double *res, int N)
{
  int i = (gridDim.y*blockIdx.y+
           blockIdx.x)*blockDim.x*blockDim.y+
           blockDim.y*threadIdx.y+threadIdx.x;
  if(i<N) res[i] = i;  
}

void callGPU(int N)
{
 dim3 dimBlock(8, 8);
 dim3 dimGrid(2, 8);
 ...
 kernel<<<dimGrid, dimBlock>>>(res, N);
 ...
} 
```

即使我将 dimGrid 更改为 (8,2) 和 (1,16)，但如果我将 gridDim 更改为 (16,1)，那么我将获得正确的索引。plz你能展示如何正确计算这种情况下的gridDim吗？如果可能的话，任意N.非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:45:05.667

您的索引模式是错误的。首先，您应该按维度计算`x`索引`y`。

```
int i_x = blockIdx.x * blockDim.x + threadIdx.x;
int i_y = blockIdx.y * blockDim.y + threadIdx.y; 
```

然后你应该将螺距计算为按`x`维度计算的整个线程数

```
int pitch = gridDim.x * blockDim.x; 
```

最后，您可以从 2D 网格计算您的 1D 索引。

```
int i = i_y * pitch + i_x; 
```

# database - 解决方案而不是 SQL Server 2008 中的存储过程

> ID：11707860
> 
> 赞同：0
> 
> 时间：2012-07-29T08:36:56.980
> 
> 标签：database, sql-server-2008, stored-procedures

我有一个数据库，其中包含许多在第一个月执行的存储过程。他们应该根据某些表中的规则读取并在其他表中插入计算结果。有大量的查询。我可以找到另一个更好的解决方案而不是存储过程吗？SQL Server 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:41:20.013

如果你真的想要，你可以编写一个服务（例如 Windows 服务）来完成这项工作，但我建议存储过程可能是最好的。这当然取决于程序的作用。

# apache - 获取 apache 日志作为 csv 文件

> ID：11707865
> 
> 赞同：4
> 
> 时间：2012-07-29T08:38:02.580
> 
> 标签：apache

有没有办法将所有 apache 日志保存为 CSV 文件？

```
access.log->access_log.csv
error.log->error_log.csv 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T08:40:34.750

您可以定义[自定义日志格式](http://httpd.apache.org/docs/current/mod/mod_log_config.html#formats)以使 Apache 日志直接转换为逗号分隔格式。

您可能不得不摆弄一段时间才能找到正确的方法。例如，您可能希望使用`"`or`'`作为字段分隔符，以防止字段值中的逗号破坏您的 CSV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T19:00:05.843

如果您有问题要查看过去编写的日志文件，或者您无权访问配置文件的 apache 服务器的日志文件，或者由于其他原因不想更改日志文件格式：

我编写了一个[小 linux shell sed 脚本](http://koega.no-ip.org/mediawiki/index.php/Apache_logfiles_to_csv)，将默认的 apache 日志文件转换为 libre office calc 可以读取的格式：

```
#!/bin/bash

#reformat apache's access logs, so that they can be interpreted as csv files, 
# with space as column delimiter and double quotes to bind together things
# that contain spaces but represent single columns.

# 1)  add a doublequote at the begining of the line. first column is the ip adress. 
#     ip-adresses that have 3 digits in every group but the first could be interpreted as numbers 
#     with the dots marking groups of thousands.

# 2a) end the ip-adress with quotes
# 2b) surround the second (to me unknown) column thats always just "-" and the
#     third column which is the username with quotes
# 2c) reformat the date from "[09/Jul/2012:11:17:47" to "09.Jul 2012 11:17:47"

# 3)  remove the string "+0200]" (replace it with doublequotes to end the date column)

# 4)  the string that contains the command (5th column) sometimes contains string representation 
#     of binary rubish. thats no problem as long as this does not contain a doublequote which 
#     will mess up the column zoning. According to my web searches, csv columns should allow to 
#     contain doublequotes if they are escaped with a backslash. Although this is the case with
#     these problematic strings, Libre Office does not accept it that way. therefore we escape every 
#     doublequote with a doubleqoute, which is the other valid option according to csv specifications,
#     and libre office does accept that one. More technical: we replace every doublequote that does
#     neither have a space or another doublequote before it, neither after it, with two doublequotes.

sed \
-e 's/^/"/' \
-e 's/ \([^ ]\{1,\}\) \([^ ]\{1,\}\) \[\([0-9]\{1,2\}\)\/\([a-zA-Z]\{1,3\}\)\/\([0-9]\{1,4\}\):/" "\1" "\2" "\3.\4 \5 /' \
-e 's/ +0200\] /" /' \
-e 's/\([^" ]\)"\([^" ]\)/\1""\2/g' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-25T18:40:23.920

这实际上只是对@kaefert 答案的修改。我确信有一种更清洁的方法可以做到这一点，但这很好用。

```
alias aplogcsv="sed -e 's/^/\"/' \
                -e 's/:\([0-9]\{1,3\}\.\)\([0-9]\{1,3\}\.\)\([0-9]\{1,3\}\.\)\([0-9]\{1,3\}\)/\",\"\1\2\3\4/' \
                -e 's/ \([^ ]\{1,\}\) \([^ ]\{1,\}\) \[\([0-9]\{1,2\}\)\/\([a-zA-Z]\{1,3\}\)\/\([0-9]\{1,4\}\):/\",\"\1\" \"\2\" \"\3 \4 \5\",\" /' \
                -e 's/ \([0-9]\{1,2\}\):\([0-9]\{1,2\}\):\([0-9]\{1,2\}\)/\1:\2:\3/' \
                -e 's/ -0700\] /\",/' \
                -e 's/\"GET /\"GET\",\"/g' \
                -e 's/\"POST /\"POST\",\"/g' \
                -e 's/ HTTP\/1.1\" \([0-9]\{1,3\}\) \([0-9]\{1,4\}\) /\",\"HTTP\/1.1\",\1,\2,/' \
                -e 's/\"-\" //g'" 
```

然后我像这样使用它：

```
aplogcsv access.log > ~/access.log.csv 
```

但它也很容易像这样使用：

```
grep "25/Jan/2019" access.log | aplogcsv > ~/20190125.access.log.csv 
```

# android - 摩托罗拉 Atrix 4g 强制关闭错误

> ID：11707868
> 
> 赞同：0
> 
> 时间：2012-07-29T08:38:42.860
> 
> 标签：android, motorola

抱歉，这不是编程问题。我正在使用摩托罗拉 Atrix 4g。它像老板一样工作了将近 6/7 个月。最近它开始显示强制关闭 com.motorola.service.main 并重新启动手机，然后再次强制关闭并重新启动。重新启动近10次后，它显示了屏幕。然后我恢复出厂设置，认为它会解决问题。

但是重置手机后仍然出现错误“com.motorola.service.main 已意外停止。请重试”然后强制关闭，但它现在没有重新启动。所以我仍然可以使用手机。我住在孟加拉，所以没有维修中心。

有人遇到过这个吗？或者有没有人知道如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T01:39:22.997

在我写这篇文章的时候，已经 8 个小时了，因为我没有看到烦人的 com.motorola.service.main 弹出窗口。

问题：手机正在同步电子邮件或访问电子邮件帐户时出现 com.motorola.service.main 弹出窗口。

修复：就我而言，我使用的是 yahoo 邮件、aol 邮件和 msn 的 hotmail（以及标准的 gmail）。我使用手机的“Google Play”安装了 yahoo 邮件应用程序、aol 邮件应用程序和 hotmail 应用程序。安装邮件应用程序后，我没有出现弹出窗口。当然，这仅适用于具有单独应用程序可用的电子邮件帐户。

# ruby-on-rails - 在一些系统更改后无法让导轨工作 - 可能是符号链接？

> ID：11707873
> 
> 赞同：1
> 
> 时间：2012-07-29T08:39:20.303
> 
> 标签：ruby-on-rails, ruby, rvm

我认为这可能与我设置了一些符号链接有关，这些链接阻止了 Rails 看到正确版本的 Ruby。它一直回到 1.8 版。通常使用 RVM 在不同版本的 ruby​​ 之间移动很容易，但现在不行了。你有什么想法？

```
steve@steve-laptop:~/Ruby/MyRuby$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /usr/local/rvm/gems/ruby-1.9.3-p194)
   global
=> rails3

steve@steve-laptop:~/Ruby/MyRuby$ rvm use 1.9.3-p194@rails3 --default
Using /usr/local/rvm/gems/ruby-1.9.3-p194 with gemset rails3
steve@steve-laptop:~/Ruby/MyRuby$ gem install rails
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 2: /usr/local/rvm/gems/ruby-1.9.3-p194@rails3: syntax error: operand expected (error token is "/usr/local/rvm/gems/ruby-1.9.3-p194@rails3") 
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 3: /usr/local/rvm/gems/ruby-1.9.3-p194@rails3:/usr/local/rvm/gems/ruby-1.9.3-p194@global: syntax error: operand expected (error token is "/usr/local/rvm/gems/ruby-1.9.3-p194@rails3:/usr/local/rvm/gems/ruby-1.9.3-p194@global")
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 4: +: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 12: require: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 13: require: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 14: require: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 16: required_version: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 18: unless: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 19: abort: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 20: end: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 22: args: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 24: begin: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 25: Gem::GemRunner.new.run: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 26: rescue: command not found
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem: line 27: exit: e.exit_code: numeric argument required
steve@steve-laptop:~/Ruby/MyRuby$ sudo gem install rails
[sudo] password for steve: 
Successfully installed rails-3.2.7
1 gem installed
Installing ri documentation for rails-3.2.7...
Installing RDoc documentation for rails-3.2.7...
steve@steve-laptop:~/Ruby/MyRuby$ rails new deploy
/usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [] (Gem::LoadError)
    from /usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:1231:in `gem'
    from /usr/bin/rails:22

steve@steve-laptop:~/Ruby/MyRuby$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]
steve@steve-laptop:~/Ruby/MyRuby$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /usr/local/rvm/gems/ruby-1.9.3-p194)
   global
=> rails3

steve@steve-laptop:~/Ruby/MyRuby$ rails -v
/usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [] (Gem::LoadError)
    from /usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
    from /usr/local/lib/site_ruby/1.8/rubygems.rb:1231:in `gem'
    from /usr/bin/rails:22 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:26:44.440

您永远不需要将 sudo 与 rvm 一起使用，请访问[rvm 站点](https://rvm.io/)了解如何使用 rvm。如有任何问题，请在 irc freenode 服务器上的#rvm 上加入我（mpapis）。

看起来您的 ruby​​ 安装已失败，要点：`/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem`...但很可能重新安装应该可以解决它：

```
rvm get head 
rvm reload
rvm reinstall 1.9.3 
```

# database - 数据库水平和垂直缩放之间的区别

> ID：11707879
> 
> 赞同：798
> 
> 时间：2012-07-29T08:40:08.583
> 
> 标签：database, database-design, nosql, scalability

我遇到过很多 NoSQL 数据库和 SQL 数据库。有不同的参数来衡量这些数据库的优势和劣势，可扩展性就是其中之一。水平和垂直扩展这些数据库有什么区别？

* * *

## 回答 #1

> 赞同：1408
> 
> 时间：2012-07-30T04:57:16.420

**水平扩展意味着您通过**在资源池中添加更多机器来扩展，而**垂直扩展意味着您通过向现有机器添加更多功率（CPU、RAM）来扩展**。

记住这一点的一个简单方法是想象服务器机架上的一台机器，我们在**水平方向添加更多机器并在****垂直**方向向机器添加更多资源。

                  [![水平缩放/垂直缩放可视化](../Images/9c638bfe11af254be50c06a75116e5db.png)](https://i.stack.imgur.com/On3tO.png)

在数据库世界中，水平扩展通常基于数据的分区，即每个节点仅包含部分数据，在垂直扩展中，数据驻留在单个节点上，并且通过多核完成扩展，即分散负载该机器的 CPU 和 RAM 资源之间的关系。

使用水平扩展，通过向现有池中添加更多机器通常更容易动态扩展 - 垂直扩展通常仅限于单台机器的容量，超出该容量的扩展通常会涉及停机时间并具有上限。

水平扩展的好例子是 Cassandra、MongoDB、[Google Cloud Spanner](https://cloud.google.com/spanner) .. 垂直扩展的好例子是 MySQL - Amazon RDS（MySQL 的云版本）。通过从小型机器切换到大型机器，它提供了一种简单的垂直扩展方式。此过程通常涉及停机时间。

[GigaSpaces XAP](http://www.gigaspaces.com/datagrid)、[Coherence](http://www.oracle.com/technetwork/middleware/coherence/overview/index.html)等内存数据网格通常针对水平和垂直缩放进行优化，因为它们没有绑定到磁盘。通过分区进行水平扩展，通过多核支持进行垂直扩展。

您可以在我之前的帖子中阅读更多关于此主题的内容： [横向扩展](http://ht.ly/cAhPe)与纵向扩展以及[NOSQL 替代方案背后的共同原则](http://ht.ly/cAhY6)

* * *

## 回答 #2

> 赞同：269
> 
> 时间：2018-10-25T09:43:28.137

**水平扩展**===> 数以千计的奴才将共同为您完成工作。

**垂直缩放**===> 一个大块头将为您完成所有工作。

[![在此处输入图像描述](../Images/84737a13c219563b84dadd0a8ad06a61.png)](https://i.stack.imgur.com/XJMka.png)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-02-13T07:41:05.627

让我们从增加资源的扩展需求开始，以便您的系统现在可以处理比以前更多的请求。

当您意识到您的系统变慢并且无法处理当前数量的请求时，您需要扩展系统。

这为您提供了两种选择。要么增加当前正在使用的服务器中的资源，即增加 RAM、CPU、GPU 和其他资源的数量。这称为垂直缩放。

垂直缩放通常是昂贵的。它不会使系统容错，即如果您正在扩展使用单个服务器运行的应用程序，如果该服务器出现故障，您的系统将出现故障。此外，线程的数量在垂直缩放中保持不变。垂直缩放可能需要您的系统在处理发生时暂时停机。增加服务器上的资源需要重新启动并关闭系统。

此问题的另一个解决方案是增加系统中存在的服务器数量。该解决方案在科技行业得到了广泛应用。这最终会降低每台服务器的每秒请求率。如果您需要扩展系统，只需添加另一台服务器，即可完成。您不需要重新启动系统。每个系统中的线程数减少导致高吞吐量。要将请求平等地隔离到每个应用程序服务器，您需要添加负载均衡器，该负载均衡器将充当 Web 服务器的反向代理。整个系统可以称为单个集群。您的系统可能包含大量请求，这将需要更多这样的集群。

希望您了解将缩放引入系统的整个概念。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-10T09:52:20.310

还有一个没有提到的额外架构——基于 SQL 的数据库服务，可以实现水平扩展，而无需手动分片的复杂性。这些服务在后台进行分片，因此它们使您能够运行传统的 SQL 数据库并像使用 MongoDB 或 CouchDB 等 NoSQL 引擎一样进行横向扩展。我熟悉的两个服务是[EnterpriseDB](http://www.enterprisedb.com) for PostgreSQL 和[Xeround](http://www.xeround.com) for MySQL。我看到了Xeround 的一篇深入[文章，它解释了为什么在 SQL 数据库上横向扩展很困难，以及它们如何以不同的方式进行扩展——因为它是供应商的文章，所以对此持保留态度。](http://xeround.com/blog/2011/07/scaling-mysql-database-in-the-cloud)还可以查看维基百科的[云数据库条目](http://en.wikipedia.org/wiki/Cloud_database)，有一个很好的解释 SQL 与 NoSQL 和服务与自托管，每个组合的供应商列表和扩展选项。;)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-01T06:34:24.570

是的，水平扩展意味着添加更多机器，但这也意味着机器在集群中是相等的。MySQL 可以通过使用副本在读取数据方面水平扩展，但是一旦达到服务器内存/磁盘的容量，您就必须开始跨服务器分片数据。这变得越来越复杂。通常在副本之间保持数据一致是一个问题，因为复制率通常太慢而无法跟上数据更改率。

Couchbase 也是一个出色的 NoSQL 水平扩展数据库，用于许多商业高可用性应用程序和游戏，并且可以说是该类别中性能最高的。它在集群中自动对数据进行分区，添加节点很简单，并且您可以使用商品硬件、更便宜的虚拟机实例（例如使用大型而不是高内存、AWS 的高磁盘机器）。它基于 Membase (Memcached) 构建，但增加了持久性。此外，在 Couchbase 的情况下，每个节点都可以进行读取和写入，并且在集群中是平等的，只有故障转移复制（而不是像在 mySQL 中那样跨所有服务器的完整数据集复制）。

性能方面，您可以看到出色的 Cisco 基准测试：http: [//blog.couchbase.com/understanding-performance-benchmark-published-cisco-and-solarflare-using-couchbase-server](http://blog.couchbase.com/understanding-performance-benchmark-published-cisco-and-solarflare-using-couchbase-server)

这是一篇关于 Couchbase 架构的精彩博文：http: [//horicky.blogspot.com/2012/07/couchbase-architecture.html](http://horicky.blogspot.com/2012/07/couchbase-architecture.html)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-07-14T12:03:58.697

传统的关系数据库被设计为客户端/服务器数据库系统。它们可以水平缩放，但这样做的过程往往很复杂且容易出错。像 NuoDB 这样的 NewSQL 数据库是以内存为中心的分布式数据库系统，旨在水平扩展，同时保持传统 RDBMS 的 SQL/ACID 属性。

有关 NuoDB 的更多信息，请阅读他们的[技术白皮书](http://go.nuodb.com/rs/nuodb/images/Technical-Whitepaper.pdf)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-01-04T08:14:02.133

Oracle、db2 等 SQL 数据库也支持通过共享磁盘集群进行水平扩展。例如 Oracle RAC、IBM DB2 purescale 或 Sybase ASE Cluster 版本。可以将新节点添加到 Oracle RAC 系统或 DB2 purescale 系统中，以实现水平扩展。

但该方法与 noSQL 数据库（如 mongodb、CouchDB 或 IBM Cloudant）的不同之处在于数据分片不是水平扩展的一部分。在 noSQL 数据库中，数据在水平缩放期间被分片。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-09-15T20:06:08.320

公认的答案是水平与垂直缩放的基本定义。但与通常认为只有 Cassandra、MongoDB 等才能实现数据库水平扩展的普遍看法不同，我想补充一点，任何传统 RDMS 也可以实现水平扩展。这也是不使用任何第三方解决方案。

我知道很多公司，特别是基于 SaaS 的公司。这是使用简单的应用程序逻辑完成的。您基本上采用一组用户并将他们划分到多个数据库服务器上。例如，您通常会有一个“元”数据库/表来存储客户端、数据库服务器/连接字符串等，以及一个存储客户端/服务器映射的表。

然后只需将来自每个客户端的请求定向到它们映射到的数据库服务器。

现在有些人可能会说这类似于水平分区，而不是“真正的”水平缩放，它们在某些方面是正确的。但最终结果是您已经在多个数据库服务器上扩展了您的数据库。

两种水平扩展方法之间的唯一区别是一种方法（MongoDB 等）的扩展是由数据库软件本身完成的。从这个意义上说，您正在“购买”缩放。在另一种方法中（对于 RDBMS 水平缩放），缩放是由应用程序代码/逻辑构建的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-20T11:51:19.063

添加大量负载均衡器会产生额外的开销和延迟，这是在 nosql 数据库中横向扩展的缺点。这就像人们说不推荐使用 RPC 的问题，因为它不健壮。

我认为在实际系统中，我们应该同时使用 sql 和 nosql 数据库来利用当今系统的多核和云计算能力。

另一方面，如果使用 sql 数据库（如 oracle），则复杂的事务查询具有较高的性能。NoSql 可以通过分片用于大数据和水平可扩展性。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-06T13:26:19.603

你有一家公司，只有 1 名工人，但当时你有 1 个新项目，你雇佣了新的候选人——这就是横向扩展。其中新候选人是新机器，项目是对您的 api 的新流量/调用。

作为 1 个项目，由 IIT/NIT 人员处理对您的 api/traffic 的所有请求。如果对您的 api 有更多请求，请解雇他并用高智商 NIT/IIT 人员代替他——这是垂直扩展。

# php - 数组中的多个排序

> ID：11707881
> 
> 赞同：5
> 
> 时间：2012-07-29T08:40:25.293
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
Array
(
[0] => Array
    (
        [note] => test
        [year] => 2011
        [type] => football
    )

[1] => Array
    (
        [note] => test1
        [year] => 2010
        [type] => basket
    )

[2] => Array
    (
        [note] => test2
        [year] => 2012
        [type] => football
    )

[3] => Array
    (
        [note] => test3
        [year] => 2009
        [type] => basket
    )

[4] => Array
    (
        [note] => test4
        [year] => 2010
        [type] => football
    )

) 
```

我想首先按类型根据另一个数组对其进行排序：

例如：`$sort = array('football','basket');`

然后按年。

我怎样才能做到这一点？

谢谢。

期望的输出应该是：

```
Array
(
[2] => Array
    (
        [note] => test2
        [year] => 2012
        [type] => football
    )
[0] => Array
    (
        [note] => test
        [year] => 2011
        [type] => football
    )
[4] => Array
    (
        [note] => test4
        [year] => 2010
        [type] => football
    )

[1] => Array
    (
        [note] => test1
        [year] => 2010
        [type] => basket
    )

[3] => Array
    (
        [note] => test3
        [year] => 2009
        [type] => basket
    )

) 
```

我不介意我们是否重置索引值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T09:04:54.383

需要一个在按原样运行时支持闭包的 PHP 版本

您的辅助数组可以在排序本身之外定义。如果你不能支持闭包，那么这可以直接放入排序例程中。

```
$sortBy = array('football', 'basket'); 
```

排序例程。

如果类型相同，则按年份排序，`$sortBy`否则按数组中的类型排序。

```
usort($a, function($a, $b) use ($sortBy) {
    if ($a['type'] == $b['type']) {
        return ($b['year'] - $a['year']);
    }
    $typeOrder = array_flip($sortBy);
    return $typeOrder[$a['type']] - $typeOrder[$b['type']];
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:54:42.310

使用[`array_multisort`](http://php.net/manual/en/function.array-multisort.php). 假设您的数组是`$arr`：

```
foreach($arr as $key=>$row) {
    $type[$key] = $row['type'];
    $year[$key] = $row['year'];
}
array_multisort($type, SORT_ASC, $year, SORT_ASC, $arr); 
```

要使用指定类型顺序的成瘾数组，您可以执行以下操作：

```
$sortBy = array('football','basket');
foreach($arr as $key=>$row) {
    $type[$key] = array_search($row['type'],$sortBy);
    $year[$key] = $row['year'];
}
array_multisort($type, SORT_ASC, $year, SORT_ASC, $arr); 
```

示例链接：

[http://codepad.org/qhZCpbZE](http://codepad.org/qhZCpbZE)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:49:46.537

使用[排序](http://www.php.net/manual/en/function.usort.php)

```
function byType($a, $b)
{
    if ($a['type'] == $b['type']) {
        return 0;
    }

    foreach(array('football','basket') as $type) {
        if ($a['type']=$type) return -1;
        if ($b['type']=$type) return 1;
    }

    return 0;
}

function byYear($a, $b)
{
    if ($a['year'] == $b['year']) {
        return 0;
    }
    return ($a['year'] < $b['year']) ? -1 : 1;
}

usort($array,"byType");
usort($array,"byYear"); 
```

# .net - 如何创建唯一的文件名？

> ID：11707887
> 
> 赞同：4
> 
> 时间：2012-07-29T08:42:25.310
> 
> 标签：.net, vb.net, winforms

我借助`File.Copy()`方法将图像文件从一个文件夹复制到另一个文件夹。

在将复制的图像文件粘贴到文件夹之前，我需要为其提供唯一的文件名。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T08:54:55.887

Eyossi 的答案应该是公认的解决方案，但另一种选择：-

您可以使用[guid](http://msdn.microsoft.com/en-us/library/system.guid.aspx)创建一个唯一名称*（“这样的标识符被重复的可能性非常低。”）*：

```
Dim filename As String = Guid.NewGuid().ToString + ".png" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T08:48:23.847

您可以使用`Path.GetTempFileName`

更多信息： http: [//msdn.microsoft.com/en-us/library/system.io.path.gettempfilename (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename(v=vs.100).aspx)

链接中的引用：

> “在磁盘上创建一个唯一命名的零字节临时文件并返回该文件的完整路径。”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T16:30:45.047

这是另一种方法

```
fileName = User_Appended_File_Name & "_" & DateTime.Now.ToString("yyyyMMdd_HH_mm_ss") 
```

它将创建一个相当可识别的文件名，并具有知道它何时创建的额外优势，即一个大的时间戳。

编辑：如果文件保存速度快于 1 秒，它将不起作用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-09T22:24:29.467

我建议使用`Path.GetRandomFileName()`.

先前接受的答案是使用`Path.GetTempFileName`which 创建文件。如问题所述，当该文件将成为文件复制操作的目标时，这并不理想。

> 与 GetTempFileName 不同，GetRandomFileName 不创建文件。当文件系统的安全性至关重要时，应使用此方法而不是 GetTempFileName。

**来源：** [https ://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename(v=vs.110).aspx)

**例子：**

```
Imports System.IO

Module Module1

    Sub Main()
        Dim fileName = Path.GetRandomFileName()
        Console.WriteLine("Random file name is " & fileName)
    End Sub

End Module

' This code produces output similar to the following:   
' Random file name is w143kxnu.idj 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T08:45:48.677

您可以使用当前日期时间作为文件名。

# excel - VBA中的求和函数

> ID：11707888
> 
> 赞同：14
> 
> 时间：2012-07-29T08:42:34.437
> 
> 标签：excel, vba, sum, cells

我在 vba 中对单元格求和有问题。我需要使用细胞（a，b）：

```
Range("A1").function="=SUM(Range(Cells(2,1),Cells(3,2)))" 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-29T10:00:11.307

函数不是范围内的属性/方法。

如果要对值求和，请使用以下命令：

```
Range("A1").Value = Application.Sum(Range(Cells(2, 1), Cells(3, 2))) 
```

**编辑：**

如果你想要公式然后使用如下：

```
Range("A1").Formula = "=SUM(" & Range(Cells(2, 1), Cells(3, 2)).Address(False, False) & ")"

'The two false after Adress is to define the address as relative (A2:B3).
'If you omit the parenthesis clause or write True instead, you can set the address
'as absolute ($A$2:$B$3). 
```

如果您总是要使用相同的范围地址，那么您可以像 Rory 所建议的那样使用：

```
Range("A1").Formula ="=Sum(A2:B3)" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-16T21:40:00.727

## **将函数*值*放入单元格中**

根据我的经验，Application.Sum 通常不能很好地工作（或者至少 VBA 开发人员环境不喜欢它，无论出于何种原因）。

最适合我的功能是`Excel.WorksheetFunction.Sum()`

例子：

```
Dim Report As Worksheet 'Set up your new worksheet variable.
Set Report = Excel.ActiveSheet 'Assign the active sheet to the variable.

Report.Cells(11, 1).Value = Excel.WorksheetFunction.Sum(Report.Range("A1:A10")) 'Add the function result. 
```

* * *

## 将函数直接放入单元格中

我认为您正在寻找的另一种方法是将函数直接放入单元格中。这可以通过将函数字符串输入到单元格值中来完成。这是一个提供与上面相同结果的示例，除了单元格值是函数而不是函数的结果：

```
 Dim Report As Worksheet 'Set up your new worksheet variable.
    Set Report = Excel.ActiveSheet 'Assign the active sheet to the variable.

    Report.Cells(11, 1).Value = "=Sum(A1:A10)" 'Add the function. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T04:36:28.517

```
Range("A1").Function="=SUM(Range(Cells(2,1),Cells(3,2)))" 
```

无法工作，因为工作表函数（当实际在工作表上使用时）不理解`Range`或`Cell`

尝试

```
Range("A1").Formula="=SUM(" & Range(Cells(2,1),Cells(3,2)).Address(False,False) & ")" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-26T20:18:39.583

```
Range("A10") = WorksheetFunction.Sum(Worksheets("Sheet1").Range("A1", "A9")) 
```

在哪里

`Range("A10")`是答案单元格

`Range("A1", "A9")`是要计算的范围

# database - 用于地铁应用程序的最佳数据库？

> ID：11707891
> 
> 赞同：1
> 
> 时间：2012-07-29T08:44:00.847
> 
> 标签：database, windows-phone-7, microsoft-metro, local-storage, windows-runtime

我是 Windows 8 Metro 应用程序开发的新手，我需要您的帮助来解决我对 Metro 应用程序的数据库支持的疑问吗？

我正在开发一个应用程序，它需要在其数据库中存储相当大量的数据，它需要许多表和它们之间的关系，借助这个我可以从数据库中获取数据并将其显示给用户，并执行所需的操作。对其进行操作并在有互联网连接时同步数据。

请让我知道哪个是地铁应用程序的最佳数据库，供我在我的应用程序中使用。

据我所知，这些是地铁应用程序数据库支持的现有替代方案（我可能错了，如果我错了，请纠正我）：-

1)IndexedDB 2)SQLite 3)WinRT 基于文件的数据库 4)Siaqodb 5)Devart LinqConnect

提前致谢。

您的回答可能会消除许多像我这样的开发人员对数据库支持的疑问，请随时回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:49:52.590

IMO您忘记了另一种解决方案。该解决方案可能最适合您。使用外部数据库和 webservice/webapi 与之通信。在我的项目中，我使用的是 Azure SQL。我通过在云中发布的 webapi 与我的 Metro 应用程序进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:34:51.830

[http://www.infoq.com/news/2012/07/sqlite-metro-winmobile](http://www.infoq.com/news/2012/07/sqlite-metro-winmobile)

[http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications](http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications)

[http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

WinRT 上的 SQLite 可能是你最好的选择......

乍得

# mysql - MySQL存储过程：我可以直接用游标更新吗？

> ID：11707893
> 
> 赞同：2
> 
> 时间：2012-07-29T08:44:22.803
> 
> 标签：mysql, stored-procedures

这可能是一个非常简单的问题，但我自己找不到答案：

当我有一个光标指向我要更新的行时，有没有比发出 UPDATE 语句更快的方法？

```
DECLARE current_id, current_product_id, current_price, current_position INT DEFAULT 0;
DECLARE new_position INT DEFAULT 0;
DECLARE cursor_offers CURSOR FOR 
    SELECT id, product_id, price, position FROM offers 
    ORDER BY product_id, price ASC;

OPEN cursor_offers;
offers_loop: LOOP
    FETCH cursor_offers INTO current_id, current_product_id, current_price, current_position;
    # Loop control omitted
    # Conditional statements omitted, that calculate new_position

    UPDATE offers SET position = new_position WHERE id = current_id; # <--- This line
END LOOP offers_loop; 
```

我认为由于 MySQL 已经通过游标有一个指向该行的指针，因此在 UPDATE 语句中再次找到它是低效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:03:10.770

阅读[文档](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)。它说游标是只读的，不能用于更新。

所以我想说不可能直接使用游标进行更新。您必须发布更新声明。

# c++ - 解析文本文件以提取字符串

> ID：11707898
> 
> 赞同：1
> 
> 时间：2012-07-29T08:45:18.630
> 
> 标签：c++, winapi, directx-9

我正在解析一个 txt 文件，我在其中放置了模板（GUID）以帮助识别数据块......我在解析文件中的 STRING 变量时遇到了问题。在解析时，我使用了一个 DataPtr 对象，该对象按数据类型的大小进行迭代......问题是我无法正确计算字符串的大小，以便（在读取字符串后）继续下一个数据类型。这是一个要解析的示例文件：

```
xof 0303txt 0032

template Effect {
  <C7D92586-6C57-42d3-8F03-0BDF87EC1848>
  STRING filename;
}

template Light {
  <ADA248C7-97E3-4a42-A4C1-74EE8536FF37>
  DWORD type;
  array float position[3];
  array float direction[3];
  array float ambient[4];
  array float diffuse[4];
  array float specular[4];
  float power;
}

template Object {
  <B6494248-7D84-42d3-A4AA-0747E22E08D3>
  DWORD type;  
  array float position[3];
  array float orientation[4];
  STRING name;
  STRING filename;
}

Effect {
    ".//Data/Scene/TrainingRoom/Effects/effect.fx";
}

Light {
    1;
    -3.0; 1.0; -3.0;
    3.0; -1.0; 3.0;
    1.0; 1.0; 1.0; 1.0;
    1.0; 0.0; 0.0; 0.0;
    1.0; 1.0; 1.0; 1.0;
    0.1;
}

Object {
    1;
    0.0; 0.0; 0.0;
    0.0; 0.0; 0.0; 1.0;
    ".//Data/Scene/TrainingRoom/TrainingRoom.x";
} 
```

这是当前工作的代码示例（不带字符串标签）：

```
if(CompareDataObjectType(pDataObj, TID_D3DRMLightCustom))
    {
        D3DXVECTOR3 *vecPtr = NULL;
        D3DXVECTOR4 *colorPtr = NULL;
        DWORD *DataPtr = (DWORD*)GetObjectData(pDataObj); // Data Pointer points at 1st data location
        m_light.type = *DataPtr++;  
        vecPtr = (D3DXVECTOR3*)DataPtr;
        m_light.position = *vecPtr;
        DataPtr+=3; 
        vecPtr = (D3DXVECTOR3*)DataPtr;
        m_light.direction = *vecPtr;
        DataPtr+=3;
        colorPtr = (D3DXVECTOR4*)DataPtr;
        m_light.ambient = *colorPtr;
        DataPtr+=4;
        colorPtr = (D3DXVECTOR4*)DataPtr;
        m_light.diffuse = *colorPtr;
        DataPtr+=4;
        colorPtr = (D3DXVECTOR4*)DataPtr;
        m_light.specular = *colorPtr;
        DataPtr+=4;
        float *fPtr = (float*)DataPtr;
        m_light.power = *fPtr;
        return true;
    } 
```

这一切都好......以下返回不正确的结果：

```
if(CompareDataObjectType(pDataObj, TID_D3DRMObject))
    {
        D3DXVECTOR3 *vecPtr = NULL;
        D3DXQUATERNION *quatPtr = NULL;
        DWORD *DataPtr = (DWORD*)GetObjectData(pDataObj);       
        m_object.type = *DataPtr++; 
        vecPtr = (D3DXVECTOR3*)DataPtr;
        m_object.position = *vecPtr;
        DataPtr+=3;     
        quatPtr = (D3DXQUATERNION*)DataPtr;
        m_object.orientation = *quatPtr;
        DataPtr+=4;
        m_object.name = (LPCSTR)DataPtr;
        size_t length = strlen(m_object.name);
        DataPtr+=length;
        m_object.filename = (LPCSTR)DataPtr; // filename only contains a portion of the correct string...
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:36:59.810

如果输入数据包含以空字符结尾的字符串，则以下内容：

```
size_t length = strlen(m_object.name);
DataPtr+=length; 
```

应该考虑空字符：

```
size_t length = strlen(m_object.name);
DataPtr += length + 1; 
```

# mono - mono_method_get_unmanaged_thunk - 因 /O2 编译器设置而崩溃

> ID：11707899
> 
> 赞同：2
> 
> 时间：2012-07-29T08:45:19.813
> 
> 标签：mono, crash

我最近一直在将单声道运行时与某些应用程序集成，并且我正在使用`Debug`配置进行大部分测试。最近，我切换到`Release`，我注意到它开始崩溃。（我正在使用 msvs2010 编译器）。

我追踪了它，发现它是在调用通过`mono_method_get_unmanaged_thunk`. 导致它的配置之间的一个区别是`/O2`发布与`/Od`调试中的优化。根据我的观察，崩溃发生在托管方法离开后。关于这些优化是否有一些已知的考虑？

我的情况如下：

在本机代码中，我正在获取函数指针以跳转到托管土地：

```
bool (*Some_Method) (MonoObject*, int, MonoObject*, MonoObject*, MonoObject*, MonoException**); 
```

在托管方面，该方法是非静态方法，因此第一个参数是`this`：

```
bool Managed_Method(int, SomeType a2, SomeType a3, SomeType a4) 
```

在初始化本机端时，我正在获取这样的指针：

```
Some_Method = (bool(*)(MonoObject*, int, MonoObject*, MonoObject*, MonoObject*, MonoException**)) mono_method_get_unmanaged_thunk(method) 
```

我正在使用获得的指针调用托管方法：

```
bool result = Some_Method(v, o1, o2, o3) 
```

其中 o1, o2, o3 要么是空值，要么是有效的托管对象。

该方法的主体实际上什么也没做，在当前情况下，在进行一次布尔检查后，它只是以 false 离开。

单声道运行时：`2.10.8`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:48:29.083

我得到了答案 - 返回的函数指针`mono_method_get_unmanaged_thunk`是`__stdcall`约定的，而我的编译器的默认值是`cdecl`，因此我更改了：

```
bool (*Some_Method) (MonoObject*, int, MonoObject*, MonoObject*, MonoObject*, MonoException**) 
```

进入

```
bool (__stdcall*Some_Method) (MonoObject*, int, MonoObject*, MonoObject*, MonoObject*, MonoException**) 
```

现在调用没有崩溃。

似乎`Debug`设置正在调整堆栈指针或一些寄存器（不知道到底是什么，我对这件事不是很了解），这就是为什么它运行没有问题，因为`stdcall`和`cdecl`非常不同，这种不匹配可能导致崩溃两种配置。

# zend-framework - Zend_Acl 和 Zend_Navigation 不使用模块名称作为资源

> ID：11707900
> 
> 赞同：0
> 
> 时间：2012-07-29T08:45:26.540
> 
> 标签：zend-framework, module, zend-navigation, zend-acl

我已经设置 Zend_Acl 像这样工作：

```
$acl->addRole(new Zend_Acl_Role('admin'));
$acl->addRole(new Zend_Acl_Role('user'));
$acl->add(new Zend_Acl_Resource('frontoffice'));
$acl->add(new Zend_Acl_Resource('backoffice'));
$acl->deny('user');
$acl->allow('user', null, 'frontoffice');
$acl->allow('admin'); 
```

因此，“管理员”角色可以访问所有内容，“用户”只能访问前台。Frontoffice 是模块的名称，backoffice 是模块的名称。Acl 在自定义插件中检查：

```
<?php
class Custom_Controller_Plugin_Auth extends Zend_Controller_Plugin_Abstract
{
public function preDispatch(Zend_Controller_Request_Abstract $request)
{
    $loginController = 'auth';
    $loginAction     = 'index';

    $auth = Zend_Auth::getInstance();

    // If user is not logged in and is not requesting login page
    // - redirect to login page.
    if (!$auth->hasIdentity()
            && $request->getControllerName() != $loginController
            && $request->getActionName()     != $loginAction) {

        $redirector =     Zend_Controller_Action_HelperBroker::getStaticHelper('Redirector');
        $redirector->gotoSimpleAndExit($loginAction, $loginController);
    }

    // User is logged in or on login page.

    if ($auth->hasIdentity()) {
        // Is logged in
        // Let's check the credential;
    $registry = Zend_Registry::getInstance();
        $acl = $registry->get('acl');

        $identity = $auth->getIdentity();
        // role is a column in the user table (database)
        $isAllowed = $acl->isAllowed($identity->role, null,
                                     $request->getModuleName());
        if (!$isAllowed) {
            $redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('Redirector');
            $redirector->gotoUrlAndExit('/');
        }
    }
}
}
?> 
```

现在，我的资源名称是当前模块的名称。如果我将 acl 插入 Zend_Navigation，并将菜单项的资源设置为 frontoffice，则用户和管理员的菜单项都会消失，但他们都应该能够查看它。这是引导程序中的导航代码：

```
protected function _initNavigation()
{
    $this->bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();
    $navigation = new Zend_Navigation($this->getOption('navigation'));
    $auth = Zend_Auth::getInstance();
    $role = $auth->getIdentity()->role;
    $view->navigation($navigation)->setAcl(Zend_Registry::get('acl'))
                      ->setRole($role);
} 
```

有人对如何解决这个问题有建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:07:57.917

据我所知，您不能直接在 ACL 中定义模块。您必须使用以下语法定义每个模块的每个控制器：

```
$this->add(new Zend_Acl_Resource("module_name:controller_name"); 
```

# c++ - 模板类的成员函数不能返回指向成员结构的指针？

> ID：11707901
> 
> 赞同：1
> 
> 时间：2012-07-29T08:45:44.777
> 
> 标签：c++, templates

此代码无法编译（给出错误 C2059、C2065、C2072、C2143、C2146、C2447、C2470、C4430）但如果将 B* 更改为 int 等内置类型，则可以。有任何想法吗？

```
template <typename T>
class A
{
private:
    struct B
    {
        T key;
    };

    B* foobar(T key);

};

template <typename T>
B* A<T>::foobar(T key) 
{
    B* ptr = new B;
    B->key = key;
    return ptr;
}

int main()
{} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T08:50:14.700

您的方法中有一些错误。

1) 返回类型的范围必须正确限定。

2）您必须设置`key`if a`A::<T>::B`实例，而不是`B`.

尝试这个：

```
template <typename T>
typename A<T>::B* A<T>::foobar(T key) // fix error 1)
{
    B* ptr = new B();
    ptr->key = key;  // fix error 2)
    return ptr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:50:32.777

返回类型应该是`typename A<T>::B*`，而不仅仅是`B*`：

```
template<typename T>
typename A<T>::B* A<T>::foobar(T key)
{
   //..
} 
```

还要注意`typename`返回类型中的关键字。

# embedded - 使用 C 而没有 OS（假设 XIP）的小型嵌入式系统中的静态库与共享库

> ID：11707912
> 
> 赞同：3
> 
> 时间：2012-07-29T08:47:18.837
> 
> 标签：embedded, shared-libraries, static-libraries

没有 RTOS/OS 的小型嵌入式系统是否使用动态/共享库。我的理解是，它很难使用，而且不会有成效。

如果我们多次调用静态库中存在的 API。API 代码是否将放置在每个调用位置，例如宏扩展或代码/文本对于所有调用都是通用的。我认为代码/文本会很常见。

如果我为具有多个 API 的 .c 文件创建了一个静态库，并且我将它与主文件静态链接，并且在主文件中只调用了一个 API，所以我的问题是整个库是否包含在最终的 .bin 中或仅包含特定的 API 代码。

从上述问题中，您可以假设我本身缺少基础知识，因此任何人都可以提供相关链接来复习这些内容。

问候
[编辑]

我尝试过以下事情

add.c 模块

```
`int addition(int a,int b)`  
`{`  
`int result;`  
`result = a + b;`  
`return result;`  
`}`

`size addition.o`   
23        0       0      23      17 addition.o 
```

乘法.c 模块

```
`int multiplication(int a, int b)`  
`{`  
`int result;`  
`result = a * b;`  
`return result;`  
`}`
`size multiplication.o`  
21        0       0      21      15 multiplication.o 
```

创建两者的目标文件并放入存档

```
ar cr libarith.a addition.o multiplication.o 
```

然后静态链接到我的主应用程序
example.c 模块

```
`#include "header.h"`  
`#include <stdio.h>`  
`1:int main()`  
`2:{`  
`3:int result;`  
`4:result = addition(1,2);`  
`5:printf("addition result is : %d\n",result);`  
`6:result = multiplication(3,2);`  
`7:printf("multiplication result is :  %d\n",result);`  
`8:return 0;`  
`9:}`

gcc -static example.c -L. -larith -o example  

size of example  
511141     1928    7052  520121   7efb9 example 
```

注释了 example.c 的第 6 行
并再次链接
gcc -static example.c -L。-larith -o example
size of example
511109 1928 7052 520089 7ef99 example
以上两个之间的差异为 32 个字节，
这意味着 add.o 不包括在示例中

将模块 add.c 和 multiplication.c 合并为 addmult.c 如下
`int addition(int a,int b)`
`{`
`int result;`
`result = a + b;`
`return result;`
`}`
`int multiplication(int a, int b)`
`{`
`int result;`
`result = a * b;`
`return result;`
`}`

创建目标文件并在
执行此操作之前放入存档我已删除以前
的存档 ar cr libarith.a addmult.o
现在注释了 example.c
gcc -static example.c -L 的第 6 行。-larith -o 示例
大小示例
511093 1928 7052 520073 7ef89 示例未
注释的第 6 行 example.c
大小示例 511141 1928 7052 520121 7efb9 示例

我的问题是在这两种情况下，如果两个函数都被调用，最终文本大小是相同的，但如果只调用一个函数，则差异为 16，但 multiplication.o 大小为 23，所以肯定不包括在内，但我们将如何证明 16 是合理的。如果我缺少一些基本知识本身？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T10:14:03.003

在运行时动态加载和链接库需要代码来执行加载/链接操作。该功能通常是操作系统的一部分。此外，在没有某种海量存储的系统中，动态链接不会有任何好处，因为在任何情况下动态链接的代码都必须存在于内存中，因此也可能是静态链接的。

要回答您问题的第二部分，静态库只是存档中目标文件的集合。链接器将仅提取和链接解析整个可执行文件中引用的符号所需的目标代码。一些智能链接器可以从目标文件中丢弃未使用的函数，但您不应该依赖它。

因此，通过链接静态库，您不会在库中包含所有未使用的代码。您可以通过将所有库文件的大小与可执行二进制文件的大小进行比较来判断 - 您可能会看到您的可执行文件远小于链接的库大小的总和。此外，您的链接器将可以选择创建一个映射文件，该文件将准确告诉您包含了哪些代码，以及它是否具有交叉引用输出工具、哪些代码引用或被什么引用。

如果您正在构建自己的静态库，甚至是您自己的非库代码，那么在目标文件级别确保良好的粒度是值得的。例如，如果一个目标文件包含两个函数，一个已使用，一个未使用，大多数链接器别无选择，只能同时包含这两个函数，而如果这些函数是在单独的编译单元（源文件）中定义的，那么它们将位于单独的目标文件中（即使整理到库中）并且可以单独链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T09:09:05.277

如果你真的有一个没有任何操作系统的嵌入式系统，那么你的硬件本质上是一个固定的软件，你只能通过物理方式来改变它（例如烙铁，或插上什么东西……）。在这种情况下，该软件在“裸机”上运行，并且以某种方式执行操作系统提供的功能（它管理物理资源并通过适当的机器指令直接与 I/O 端口交互）。

特别是，没有任何操作系统的嵌入式系统不能拥有任何类型的动态库，因为根据定义，这些库需要位于某些文件中（在嵌入式处理器上），并且要拥有文件，您需要操作系统。

^(究竟什么是操作系统的确切定义是有争议和模糊的。我相信提供文件系统是大多数当前操作系统的角色之一)

由于共享库（或静态库）是位于某些文件中的库，因此没有操作系统就无法拥有它们。根据定义，提供文件的东西是操作系统。

也许您正在使用交叉开发链来开发您的嵌入式软件。如果您想获得在裸机上运行的东西，您的链最终必须提供一个二进制映像，您可以将其闪存到 ROM 中，然后焊接或插入该 ROM - 或以某种方式物理传输 - 到您的嵌入式硬件中（一些工具使您能够刷新整个独立处理器）。

我相信你可能会感到困惑，你应该阅读更多关于[操作系统](http://en.wikipedia.org/wiki/Operating_system)、[内核](http://en.wikipedia.org/wiki/Kernel_%28computing%29)、[linux内核](http://en.wikipedia.org/wiki/Linux_kernel)、[文件系统](http://en.wikipedia.org/wiki/File_system)、[系统调用](http://en.wikipedia.org/wiki/Syscall)、[RTOS](http://en.wikipedia.org/wiki/RTOS)、[链接器](http://en.wikipedia.org/wiki/Linker_%28computing%29)和[加载](http://www.iecc.com/linker/)器、[交叉编译器](http://en.wikipedia.org/wiki/Cross_compiler)、[微控制器](http://en.wikipedia.org/wiki/Microcontroller)、[共享库](http://en.wikipedia.org/wiki/Shared_library)、[动态链接器](http://en.wikipedia.org/wiki/Dynamic_linker)......

正如 Clifford 在评论中建议的那样，您可以拥有一个带有一些文件系统和一些动态链接器的嵌入式系统；在我看来，这将是一个胚胎操作系统，但这是一个有争议的定义问题。

请注意，制作动态链接器可能不是一件容易的事（您需要进行[重定位](http://en.wikipedia.org/wiki/Relocation_%28computer_science%29)）；你可以制作一个通用的[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)动态加载器，或者你可以限制动态加载模块的形式，或者使用你的特定[ld 脚本](http://sourceware.org/binutils/docs/ld/Scripts.html)来生成它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T03:06:00.533

您已经具备了所需的所有基础知识。如果没有操作系统、大容量存储（磁盘、文件系统等）和多个/许多不同的程序可以利用共享库，它就没有任何意义。你没有保存任何东西，如果你伪造它足以在固定的裸机环境中使用共享库，它可能会花费你更多。

你提到有codesourcery，你是如何学习这些东西的？你反汇编你的二进制文件，看看编译器做了什么。它是否因为您使用了一个分割而链接了整个 gcc 库？它是否因为您使用了一个函数而链接了整个 C 库（它甚至可以尝试链接 C 库函数，许多系统调用必须解决您必须解决的操作系统）。首先在一个非常简单的函数中使用一个简单的除法（需要是通用的）

```
unsigned int fun ( unsigned int a, unsigned int b )
{
 return(a/b);
} 
```

不要使用固定常量调用该函数，也不要从同一个 .c 文件中调用它，最好的办法是简单地按原样添加该函数，并且不做任何其他事情，让它坐在那里。即使尝试编译它，您也可能会遇到问题，一旦您这样做，反汇编并查看编译器对它做了什么，查看是否添加了整个 gcc 库或仅添加了该函数的代码。

您不能信任任何旧网页或资源，因为它可能与您正在使用的工具不同并且可能已经过时，您现在使用的编译器是最重要的，现在，没有其他。答案就在你面前。

不，他们不使用动态库，所需的功能根据需要链接。优化器可能会选择内联一些代码，但一般来说，每个函数的代码都在一个地方，每次调用都是一次调用，一般来说，它不像宏。再次，优化器可能出于性能原因选择其他方式（足够小的函数不会消耗太多内存，并且足够小以至于与函数本身相比，进行函数调用所需的代码过多。此外，该函数需要进行相同的优化空间，对于 gcc，这是同一个 .c 文件，对于 llvm，这可以是项目中的任何代码。

我有一些例子，cortex-m 和其他的，裸机。 [http://github.com/dwelch67](http://github.com/dwelch67)您可能会发现一些可能有助于回答您的问题，例如检查编译器是否会实现与上述类似的公共函数并在使用时将其内联。如果您将该函数声明为静态，则优化器（如果它内联）不需要在二进制文件中实现该函数。例如，如果您在同一个 .c 文件中调用类似的函数

```
c = fun(10,5); 
```

如果使用优化器，很有可能会将该代码替换为

```
c = 2; 
```

并且根本不执行除法。

# ios - 如何在标签栏上方显示 modalviewcontroller

> ID：11707926
> 
> 赞同：9
> 
> 时间：2012-07-29T08:50:24.103
> 
> 标签：ios, objective-c, uitabbarcontroller, presentmodalviewcontroller

我有标签栏，在视图“A”中，在“A”中我有导航控制器。所以在“A”中我的导航控制器里面我叫

```
[self presentModalViewController:modalView animated:YES] 
```

但 modalView 显示在标签栏下。如何在标签栏上方显示它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-29T09:12:29.423

尝试从以下位置呈现模态视图`UITabBarController`：

```
[self.tabBarController presentModalViewController:modalView animated:YES]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-21T07:04:40.240

我的情况，模态有一个透明的背景，我设置`modalPresentationStyle`是`.overFullScreen`，它显示在标签栏上方，背景清晰。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-06T16:25:43.223

在我的情况下，呈现的视图控制器有`UIModalPresentationStyle.CurrentContext`at `.modalPresentationStyle`，这使得`tab bar`重叠

只需切换回默认值即可解决问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T19:14:12.060

其原因是未正确设置祖先 viewController。例如想象：

```
UIViewController * myController = ... // a view controller without a proper ancestor 
```

现在：

```
myController.tabBarController == nil 
```

所以：

```
[myController presentModalViewController:otherController]; 
```

将失败（通过显示在标签栏下）。解决方法是通过将 myController 添加到其祖先

```
[parentController addChildViewController:myController]; 
```

现在，`parentController`必须以相同的方式添加到另一个控制器，依此类推，直到根是您的 tabController。这仅在 iOS 5+ 中可用。如果为 iOS 4 或更早版本构建，则必须通过确保将所有控制器直接添加到 UINav 或 UITab 控制器来解决此问题。如果这不可能，您将不得不通过全局变量访问 UITabBarController。

# javascript - 在Firefox中缓慢的html5绘图

> ID：11707929
> 
> 赞同：2
> 
> 时间：2012-07-29T08:51:32.997
> 
> 标签：javascript, html

[试试](http://david.wf/downloads/SpeedTest.html)下面的代码，它在 chrome 和 Firefox 中绘制 10000 行。在 Firefox 中它运行得非常慢（3-4 秒），在 chrome 中它运行得更快。我正在编写在帧中绘制数千行动画的应用程序。有谁知道如何加速Firefox？（Firefox 中的硬件加速已开启）。

```
<!DOCTYPE html>
<body>
<html>
<canvas id="myCanvas"></canvas>
</html>
</body>
<script>
  var canvas=document.getElementById("myCanvas");
  var context=canvas.getContext("2d");
  canvas.width=1000;
  canvas.height=600
  context.strokeStyle="black";
  context.lineWidth=0.3;
  context.fillStyle="#8ED6FF";
  context.fillRect(0,0,1000,800);
  var N=10000;
for (var i=0;i<N;i++){
  context.moveTo(500,300);
  context.lineTo(500+200*Math.cos(6.28*i/N),300-200*Math.sin(6.28*i/N));
 }
context.stroke();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:30:29.177

您可以在每次循环迭代开始时使用“beginPath”调用：

```
<!DOCTYPE html>
<html>
<body>
<canvas id="myCanvas"></canvas>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){

  var canvas=document.getElementById("myCanvas");
  var context=canvas.getContext("2d");
  canvas.width=1000;
  canvas.height=600
  context.strokeStyle="black";
  context.lineWidth=0.3;
  context.fillStyle="#8ED6FF";
  context.fillRect(0,0,1000,800);
  var N=10000;
for (var i=0;i<N;i++){
  context.beginPath();
  context.moveTo(500,300);
  context.lineTo(500+200*Math.cos(6.28*i/N),300-200*Math.sin(6.28*i/N));
  context.stroke();
 }

    });
</script>

</body>
</html> 
```

但我认为主要是你暴露了Firefox中的一个错误，因为正如你所说，在其他浏览器中是可以的。

# java - java函数描述如何在eclipse代码建议中工作

> ID：11707932
> 
> 赞同：1
> 
> 时间：2012-07-29T08:52:14.450
> 
> 标签：java, eclipse, annotations, javadoc

当我们使用 eclipse 时，它​​会为我们的 java 代码提供建议并显示描述，即一个小的弹出窗口显示有关函数的描述。假设我正在创建一个 java 库，我需要在我的库中添加这些关于函数的描述，这些描述应该被 eclipse 识别并显示为建议，我应该如何指定描述，即我需要使用哪种类型或格式的注释来显示这些关于功能的描述。任何人都可以为我提供上述解决方案的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T08:54:23.727

您需要提供的只是`javadoc`.

在方法开始之前提到评论，如

```
/**
 ...
*/ 
```

你应该完成了。

这里有几个链接可以帮助您...

[Javadoc 教程](http://www.mcs.csueastbay.edu/~billard/se/cs3340/ex7/javadoctutorial.html)

[如何编写 Javadoc](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

# ios - 如何从标签栏控制器中的视图控制器中关闭父视图？

> ID：11707933
> 
> 赞同：0
> 
> 时间：2012-07-29T08:52:28.017
> 
> 标签：ios, xcode, uitabbarcontroller, dismiss

我的应用程序有一个主屏幕 ( `mainView`)。开`mainView`，我有一个按钮。当用户点击它时，我使用

```
[self presentViewController:libraryView animated:YES completion:nil] 
```

呈现另一种观点 ( `libraryView`)。然后，在 上`libraryView`，我使用

```
[self.view addSubview:tabBarController.view] 
```

添加一个`UITabBarController`有 2 个视图控制器的：`featuredBooks`和`recentBooks`

一切正常。但是当我添加一个按钮来`featureBooks`关闭`libraryView`并返回时`mainView`，以下方法不起作用

```
[self dismissViewControllerAnimated: YES completion:nil]
[self.parentViewController dismissViewControllerAnimated: YES completion:nil]
[self.presentingViewController dismissViewControllerAnimated: YES completion:nil] 
```

我知道原因：`self`指`featureBooks`的是 的观点，而不是`libraryView`。

那么，我如何引用`libraryView`、关闭它并从Tab Bar Controller 内`mainView`的视图控制器（`featureBooks`或）返回？`recentBooks`

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:00:50.013

制作libraryView的mainView委托对象... 然后当你从libraryView调用委托方法时，mainView会在其代码中调用dismissViewcController方法。

所以：

1）创建到libraryView控制器.h代码：

```
@protocol LibraryViewDelegate

      - (void) LibraryViewDelegate_DismissButtonClicked;

@end 
```

2）然后在 mainView .h 文件中创建一个属性：

```
@property(nonatomic, assign) NSObject<LibraryViewDelegate> *delegate; 
```

并将以下内容放入 .m 中

```
@synthesize delegate; 
```

并在 libraryView 对象创建之后以及在您展示它之前将 mainView 分配给此属性

3）将以下代码写入mainview .m文件：

```
-(void)LibraryViewDelegate_DismissButtonClicked{
      //put here the code for dismissing mainView created modalViewController (libraryView)
} 
```

4）然后编写调用的代码：

```
[self.delegate LibraryViewDelegate_DismissButtonClicked]; 
```

按下关闭按钮时进入 libraryView

# c++ - 基本 sdk 的 C++ Mac 预处理器标志

> ID：11707936
> 
> 赞同：4
> 
> 时间：2012-07-29T08:52:53.870
> 
> 标签：c++, macos, osx-lion, osx-snow-leopard, osx-mountain-lion

我有一个包含文件，如果针对 10.7 SDK 或更高版本构建，我需要包含该文件，但不应该包含其他文件（即，对于 10.6 sdk）。在这种情况下我可以使用什么预处理器标志？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T09:03:46.127

看看`Availability.h`标题，`__MAC_10_7`预处理器令牌应该做你想做的事。

```
#include <Availability.h>

#ifdef __MAC_10_7
    // Code that requires the Mac OS X 10.7 SDK or later
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:34:44.073

[https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html)

```
#if __MAC_OS_X_VERSION_MAX_ALLOWED > 1050  // note use of 1050 instead of __MAC_10_5
#   include <security/pam_appl.h>
#else
#   include <pam/pam_appl.h>
#endif 
```

这也应该适用于较旧的 xcode

# c# - 在 C# WinForms 中创建自定义树视图

> ID：11707937
> 
> 赞同：0
> 
> 时间：2012-07-29T08:53:04.260
> 
> 标签：c#, winforms, treeview

是否可以创建这样的[控件](http://imageshack.us/photo/my-images/32/screendn.jpg/)？我已经尝试了很多，但我无法创建一个完全像这样的控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:08:52.147

一旦你在技术上有了相当的基础，在 WPF 中就非常容易做到。您需要了解以下关键概念：

控件创建概述： http: [//msdn.microsoft.com/en-us/library/ms745025.aspx](http://msdn.microsoft.com/en-us/library/ms745025.aspx)我建议您使用 UserControl 来完成这个简单的任务。

数据上下文：http : [//msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

# macos - 通过 Homebrew 安装的 MongoDB 无法正常工作

> ID：11707938
> 
> 赞同：14
> 
> 时间：2012-07-29T08:53:47.177
> 
> 标签：macos, mongodb, homebrew

我通过 Homebrew 安装了 MongoDB（按照[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)），但它不起作用。

在 shell 提示符下输入`mongod`给我：

```
-bash: mongod: command not found 
```

不确定我是否需要为 Homebrew 添加一些东西到我的 PATH 环境变量中？

我可以看到 Mongo 安装在`/usr/local/Cellar/mongodb`- 但假设我不需要将通过自制软件安装的所有内容添加到路径中？另外，假设我可以从任何目录运行 mongod 或者我实际上是在安装目录中？

当我跑步时，`brew doctor`我得到：

```
Warning: You have unlinked kegs in your Cellar 
```

后面是 3 个项目的列表，其中包括 MongoDB——但我不确定我是如何链接它们的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2019-11-13T17:27:12.027

完美运行

1.  `brew update`
2.  `brew tap mongodb/brew`
3.  `brew install mongodb-community@4.2`

有关最新版本，请查看[https://docs.mongodb.com/manual/release-notes/](https://docs.mongodb.com/manual/release-notes/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T17:27:48.593

您收到此错误是因为您的“brew”安装未能在 /usr/local/bin 中创建正确的符号链接。结果，shell 在 $PATH 中找不到 mongo 可执行文件。您可以使用以下步骤解决此问题：

*   检查 /usr/local/bin 的权限并确保您拥有该目录并对其具有写入权限

    `$ ls -ld /usr/local/bin`

*   一旦你解决了这个问题，运行'brew link'来修复符号链接

    `$ brew link mongodb`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-08-05T08:30:49.033

如果你在`mongodb-community@4.0`. 您可以尝试重新安装`brew reinstall mongodb-community@4.0`.

然后我得到以下提示：

```
==> Caveats
mongodb-community@4.0 is keg-only, which means it was not symlinked into /usr/local,
because this is an alternate version of another formula.

If you need to have mongodb-community@4.0 first in your PATH run:
  echo 'export PATH="/usr/local/opt/mongodb-community@4.0/bin:$PATH"' >> ~/.bash_profile 
```

所以你可以复制`echo`命令并重新启动你的shell！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-31T19:54:36.693

从在终端中运行这些命令的不同频道复制更新了安装/配置问题，如 OP 中所述

```
brew tap mongodb/brew
brew install mongodb-community
brew services start mongodb-community 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T14:56:22.307

它在目录中工作，因为 sh 搜索 ENV 路径，然后在 cwd 中搜索名为 mongod 的程序。我一直在环顾四周，似乎 MongoDB 的默认安装（我不是 Mac 用户）没有安装 rc 或 init 脚本，以便 sh 了解它的运行行为，如下所述：

[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/#using-mongodb-from-homebrew-and-macports](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/#using-mongodb-from-homebrew-and-macports)

> 随 Homebrew 和 MacPorts 一起安装的软件包不包含控制脚本或与系统进程管理器的交互。
> 
> 如果您正确配置了 Homebrew 和 MacPorts，包括设置 PATH，则可以从系统 shell 访问 MongoDB 应用程序和实用程序。在终端（用于测试或开发）或使用进程管理工具启动 mongod 进程。

所以你必须实际定义（如你所说）MongoDBs路径，这是一个例子：[https ://snipt.net/sido/installing-mongodb-on-os-x/](https://snipt.net/sido/installing-mongodb-on-os-x/)

编辑：这个例子不是我的。我只是从它的用户那里偷了它：[https ://snipt.net/sido/](https://snipt.net/sido/)

# java - JInternalFrame装饰

> ID：11707945
> 
> 赞同：1
> 
> 时间：2012-07-29T08:55:18.153
> 
> 标签：java, swing, jinternalframe

[内框装饰](http://www.pushing-pixels.org/wp-content/uploads/2008/02/window-usual.png)

我想知道，有没有办法将我的内部框架装饰设置为普通的窗口装饰，而不是看起来像上面链接中的图像？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:23:44.597

我会说不是。内部框架装饰由外观提供，而 JFrame 和 JDialog 则由操作系统提供装饰。

话虽如此，有一些外观和感觉可以自己提供定制装饰（到顶层窗户）。

例如，Metal 具有以下 UI 属性：

```
RootPane.colorChooserDialogBorder = javax.swing.plaf.metal.MetalBorders$QuestionDialogBorder@182d9c06
RootPane.errorDialogBorder = javax.swing.plaf.metal.MetalBorders$ErrorDialogBorder@63b9240e
RootPane.fileChooserDialogBorder = javax.swing.plaf.metal.MetalBorders$QuestionDialogBorder@687b6889
RootPane.informationDialogBorder = javax.swing.plaf.metal.MetalBorders$DialogBorder@7e0c2ff5
RootPane.plainDialogBorder = javax.swing.plaf.metal.MetalBorders$DialogBorder@5a5e5a50
RootPane.questionDialogBorder = javax.swing.plaf.metal.MetalBorders$QuestionDialogBorder@95c083
RootPane.warningDialogBorder = javax.swing.plaf.metal.MetalBorders$WarningDialogBorder@61b383e9 
```

使用这些您应该能够交换内部框架的边框。

但在 Windows 的默认系统外观下，RootPane 仅提供以下属性...

```
RootPane.ancestorInputMap = javax.swing.plaf.InputMapUIResource@4ba33d48
RootPane.defaultButtonWindowKeyBindings = [Ljava.lang.Object;@1cc7b00c
RootPaneUI = com.sun.java.swing.plaf.windows.WindowsRootPaneUI 
```

现在......使用 JNI 可能无法让它工作，但我怀疑因为 Swing 使用轻量级绘制过程，它只会以一团糟而告终。

# javascript - javascript计算单词的总和

> ID：11707949
> 
> 赞同：2
> 
> 时间：2012-07-29T08:56:16.380
> 
> 标签：javascript, html

在一个 html 脚本中，我插入了一个 src java 脚本并创建了带有 id 的表，这些表被标记为 square1...例如，`<td id="square0">apple;</td>.` 我希望 javascript 显示 html 文件中单词中字母的总和。比如如果 a 是 1，b 是 2，c 是 3，d 是 4...z 是 26，那么苹果是 50，胡萝卜是 75，依此类推。我希望输出像苹果 50、胡萝卜 75、黄色 92

我试过的java脚本是

```
var a = 1;
var b = 2;
...
...
var z = 26;
var addWord = new Array(1);
addWord[1] = "apple";
var square01 = 1 + 16 + 16 + 12 + 5;

function() {
    var total = 0;
    for (var i = 0; i < word.length; i++)
    total += alphabet[word[i]];
    document.getElementById(square0).innerHTML;
}
} 
```

非常感谢任何帮助都会做..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:07:31.693

这是你需要的。

```
var word = "Apple"
var sum = 0;
word.toUpperCase().split('').forEach(function(alphabet) {
    sum += alphabet.charCodeAt(0) - 64;
});
console.log(sum); 
```

计算机字符的解释被认为是具有特定值的数字常数，如 65 - "A" ， 66 - "B" ， 97 - "a" ， 98 - "b"。

我们在这里所做的是将单词转换为大写字母后将其拆分为字符。

“苹果”

然后我们通过 charCodeAt(0) 调用找出每个字符的值。然后我们从中减去 64 以便我们根据您的要求得到字符的值

A - > 65- 64 = 1 B - > 66- 64 = 2

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T09:06:43.317

你可以像这样计算一个单词的总和：

```
var word = "apple";
var sum = 0;
for (var i = 0; i < word.length; ++i) {
    sum += word.charAt(i).toLowerCase().charCodeAt(0) - 96;
}
//sum is 50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T09:50:24.527

[Abhishek 的答案](https://stackoverflow.com/a/11708007/711085)更具可读性，但这是如何使用`reduce`; 它稍微短一些，但 javascript 语法使得它`0`的初始值不清楚`sum`：

```
'Apple'.toUpperCase().split('').reduce(
    function(sum,letter){ return sum + letter.charCodeAt(0)-64 },
    0
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T09:06:51.647

用于`.charCodeAt()`获取字符的 ASCII 值。你可以从结果中减去 96 得到 a = 1, b = 2...

例如：

```
var word = "apple";
var sum = 0;

for(var i = 0; i < word.length; i++) {
    sum += (word[i].charCodeAt() - 96);
}
console.log(sum);​ 
```

[**JSFiddle**](http://jsfiddle.net/En2Bh/4/)

如果你也想处理大写字母，你必须做一些检查。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-29T09:11:05.253

这适用于字母“a”..“z”：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        function calcAlpha() {
            var word = document.getElementById("square0").childNodes[0].data;
            var sum = 0;
            for(var i=word.length-1; i>=0; i--) {
                sum += (word.charCodeAt(i) - 96);
            }
            document.getElementById("display").innerHTML=sum;
        }
    </script>
</head>
<body>
    <table><tr><td id="square0">apple</td></tr></table>
    <div id="display"></div>
    <button onclick="calcAlpha()">calculate</button>
</body>
</html> 
```

# php - 在数据库中保存 HTML - htmlentities

> ID：11707950
> 
> 赞同：1
> 
> 时间：2012-07-29T08:56:26.157
> 
> 标签：php, mysql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

在我的网站上，我有一些用户有时必须保存在数据库中的 HTML 内容。这样做的安全方法是什么（我不希望我的数据库处于危险之中，或者以后会看到该代码的用户从数据库中调用）。

所以我读到的是：

使用[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)将数据保存在数据库中，使用[html_entity_decode](http://php.net/html_entity_decode)解码数据库中的数据。这足够安全吗，还是我应该使用其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T09:02:03.450

如果您使用字符串转义和/或准备好的语句，HTML 标记不会对您的数据库造成任何损害。当您将 HTML 标记显示给用户时，危险就来了，就好像有人在您要显示的标记中注入了令人讨厌的 HTML，然后您就受到了 XSS 攻击。

如果您没有转义或使用准备好的语句，那么几乎任何来自外部的数据都可能是危险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:04:11.407

您可能想查看 PHP 函数`mysql_real_escape_string()`……这篇文章中的更多内容：[strip_tags 足以从字符串中删除 HTML？](https://stackoverflow.com/questions/9371486/strip-tags-enough-to-remove-html-from-string/9371514#9371514)

这是一个例子......

```
// scrub string ... call with sanitize($blah,1) to allow HTML
function sanitize( $val, $html=0 ) {
    if (is_array($val)) {
        foreach ($val as $k=>$v) $val[$k] = sanitize($v, $html);
        return $val;
    } else {
        $val = trim( $val );
        if (!$html) {
            $val = strip_tags($val);
            $pat = array("\r\n", "\n\r", "\n", "\r");
            $val = str_replace($pat, '<br>', $val); // newlines to <br>
            $pat = array('/^\s+/', '/\s{2,}/', '/\s+\$/');
            $rep = array('', ' ', '');
            $val = preg_replace($pat, $rep, $val); // remove multiple whitespaces
        }
        return mysql_real_escape_string($val); // escape stuff
    }
} 
```

# iphone - 如何使用单元格填充表格视图？

> ID：11707952
> 
> 赞同：-1
> 
> 时间：2012-07-29T08:56:46.527
> 
> 标签：iphone, ios5, xcode4.3

到了这一点，我有自定义单元格，里面有 2 个标签和 1 个文本字段。标签和文本字段都从用户那里得到输入。我还有其他包含 uitableview 的视图。我的问题是如何在 uitableview 中填充单元格？请帮忙。

这是我在 tableviewcontroller 中的代码。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1; // i want to populate this using 'count' but i dont know how.
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[CustomCell reuseIdentifier]];
    if (cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = _customCell;
        _customCell = nil;
    }       
    cell.titleLabel.text = [NSString stringWithFormat:@"%@",titleTextString];
    cell.timerLabel.text = [NSString stringWithFormat:@"%@",timerString];
    cell.statusLabel.text = [NSString stringWithFormat:@"%@",statusString];

    return cell;    
} 
```

如果在用户完成输入后按下添加按钮，我如何填充我的表格视图？如果你不介意帮我写代码，请。我是初学者，我很难通过使用意见来理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:05:00.497

如果我正确理解了您的问题，那么您为包含 2`UILabel`和 1的单元格做了一个自定义 nib 文件`UITextField`，并且您希望在填充表格时访问这些对象。以下是针对此问题的一些步骤：

首先，您必须为`tag`自定义单元格中的每个对象指定一个数字。您可以在 Interface Builder 的 Attribute Inspector 中找到此属性。假设您给第一个标签标签 1、第二个标签 2 和文本字段 3。

其次你要给一个。此 nib 文件的标识符，例如`MyCustomCellIdentifier`. 此标识符稍后将在包含该表的视图中使用，以便您可以链接到它。

第三，同样在自定义单元格 nib 中，单击表示文件所有者的黄色方块，然后在身份检查器中将类更改为具有将使用此自定义单元格的表的类名。

第四，在您拥有将使用自定义单元格的表的类中，创建一个类型为 的插座`UITableViewCell`。我们将在自定义笔尖单元格中链接它。

第五，转到自定义 nib 单元格，单击单元格窗口，然后在 Connections Inspector 中将 New Referencing Outlet 链接到 File's Owner，您将看到您在此处显示的表类中创建的插座，只需链接到它即可。

现在，由于建立了连接，事情变得更加容易，在`cellForRowAtIndexPath`函数中（在包含表的类中），您必须从 nib 文件中加载自定义单元格，如下所示：

```
static NSString *tableIdentifier = @"MyCustomCellIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:tableIdentifier];
if(cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TheNibClassNameOfYourCustomCell" owner:self options:nil];
    if([nib count] > 0) cell = theNameOfTheOutletYouUsed;
    else NSLog(@"Failed to load from nib file.");
} 
```

好的，您的自定义单元格已加载到变量中`cell`，现在您必须从您创建的标签中访问其中的每个对象：

```
UILabel *label1 = (UILabel *)[cell viewWithTag:1];
UILabel *label2 = (UILabel *)[cell viewWithTag:2];
UITextField *textField1 = (UITextField *)[cell viewWithTag:3]; 
```

现在您可以通过`label1`,`label2`和`textField1`轻松访问所有内容`label1.text = @"Hi";`

我希望这回答了你的问题。

# php - 如何转义 HTML 输入的引号（使用 PHP）？

> ID：11707953
> 
> 赞同：0
> 
> 时间：2012-07-29T08:57:10.477
> 
> 标签：php, regex, security, escaping

> **可能重复：**
> [如何正确转义 PHP 中的 HTML 表单输入默认值？](https://stackoverflow.com/questions/6249151/how-can-i-properly-escape-html-form-input-default-values-in-php)

如果我使用预设的 HTML 输入，例如：

```
$lmao=$_POST['lmao'];

echo <<<EOD
<input value="{$lmao}" name="lmao" type="text">
EOD; 
```

如果**"**字符进入变量，则会导致便便，并且在重新提交时也会丢失数据。

我当然可以：

```
preg_replace('/"/', '', $lmao); 
```

但是，如果我想保留那句话怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:00:20.090

在 HTML 属性中输出的所有用户输入数据都应通过 htmlspecialchars 运行。这对引号和其他字符进行编码：

```
echo '<input value="'.htmlspecialchars($lmao).'" name="lmao" type="text">'; 
```

# ajax - Chrome 不呈现嵌套的 asp.net mvc ajax 表单

> ID：11707954
> 
> 赞同：1
> 
> 时间：2012-07-29T08:57:31.257
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, google-chrome, jquery

需要以另一种 ajax 形式实现嵌套的 ajax 形式。在 IE 中一切正常 - 子窗体出现并且工作良好，在 Firefox 子窗体中工作但替换整页，但在 Chrome 中嵌套窗体无论如何都不会呈现。这个问题有什么解决方法吗？我可以用 jquery.ajax 实现所有逻辑，但更喜欢以“经典”方式找到解决方案。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T12:43:03.120

嵌套表单不是 html 标准，所以你应该避免使用它。浏览器以不同的方式处理嵌套表单，这不是错误。

# java - Java 在 - 和 + 基础上拆分

> ID：11707956
> 
> 赞同：3
> 
> 时间：2012-07-29T08:58:23.587
> 
> 标签：java, split

我有一个字符串列表

0-30 31-60 61-90 91-120 365+

我想要一个**正则表达式**，它可以放入java split 方法中以获得第一个否，即

0 31 61 91 365

目前我正在使用这个逻辑：

```
 if(str.endsWith("+") ){
            str= str.substring(0, str.length()-1);
        }
        String Num = str.split("-")[0]; 
```

有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T09:16:02.233

```
String[] splitArray = subjectString.split("[+-]\\d*\\s*"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:31:40.047

```
 String pattern = "[+-]\\d*\\s*";
     String digits = "0-30 31-60 61-90 91-120 365+";

 Pattern splitter = Pattern.compile(pattern);
 String[] result = splitter.split(digits );

 for (String digit: result ) {
     System.out.println("digits = \"" + digit + "\"");
 } 
```

# c - 链接头文件

> ID：11707957
> 
> 赞同：0
> 
> 时间：2012-07-29T08:58:29.967
> 
> 标签：c, pointers, header-files, compiler-warnings

我建立了一个堆栈数据结构，它有一个`peek`方法。调用main时编译器给了我一个`warning: initialization makes pointer from integer without a cast`警告。`peek`这是我所拥有的：

`stack.h`：

```
struct stack_elem {
    struct stack_elem *next;
};

struct stack {
    struct stack_elem *top;
};

void stack_init(struct stack *stack);
int isEmpty(struct stack *);
struct stack_elem * peak(struct stack *); 
```

及其实现：

```
void stack_init(struct stack *stack) {
    stack->top = NULL;
}

int isEmpty(struct stack *stack) {  
    if (stack->top == NULL) 
        return 1;
    else
        return 0;
}

struct stack_elem * peek(struct stack *stack) { 
    if (isEmpty(stack) == 1)  
        return NULL;
    else
        return stack->top;
} 
```

在我的`main.c`中，我将堆栈定义如下：

```
struct stack stack;
stack_init(&stack); 
```

并调用 peek：

```
struct stack_elem * elem = peek(&stack); 
```

此行引发警告。这里奇怪的是我曾经导入`stack.c`并`main.c`只是用`$ gcc main.c`. 这绝对没有错误。现在我将导入更改为`stack.h`，并且我正在编译`$ gcc main.c stack.c`它会引发警告。运行它也会出现段错误（它事先没有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:11:45.197

看起来 peek() 没有在 .h 中声明，所以编译器假设它是一个 int。main() 将其称为假设它是指针返回类型。

警告是 100% 正确的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T09:11:49.647

在我看来，您的头文件中有错字？

```
struct stack_elem * peak(struct stack *); 
```

“峰值”，您的实现显示为“窥视”。不过，不知道这是否会引起这样的警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T09:11:31.267

改变：

```
struct stack_elem * peak(struct stack *); 
```

至：

```
struct stack_elem * peek(struct stack *); 
```

:)

# javascript - Javascript 对象/命名空间 - 如何访问从嵌套函数添加的属性（包括示例）

> ID：11707966
> 
> 赞同：1
> 
> 时间：2012-07-29T08:59:50.590
> 
> 标签：javascript, javascript-objects, javascript-namespaces

我一直在努力理解 Javascript 对象和命名空间，我对如何使用嵌套函数生成/显示对象感到有些困惑。我不明白如何嵌套函数以基本上创建对象工厂并将它们显示在页面中。下面的例子。

我已经尝试过 RTFG 和该站点上的一些示例，但似乎没有任何适用。任何指向相关问答的链接表示赞赏。但我希望有经验的人可以解释这种行为。

以下三个文件构成一个简单的应用程序，用于加载包含三个汽车条目的 index.html 页面，通过调用 getCar() 函数 3 次并设置自定义属性生成，然后使用本身使用 a 的函数添加引擎（完全错误）计算马力的函数。

我希望能够访问 HTML 中返回的 car1、car2、car3 对象的属性，但是当我在浏览器中从下方加载 index.html 时，我在 Javascript 中看不到任何错误，但我不希望这些结果：

```
1\. undefined        <-- this is defined, I set the name in the call from the updatePage() function
2\. [object Object]  <-- the name is not an object, it's a primitive
3\. {"name":"","engine":"","wheels":"","options":"none"} <-- this has properties set, why not show them? 
```

还了解如果我使用命名空间，一个用于汽车，一个用于引擎，我是否需要在每个文件的顶部都声明它们，如下所示：

```
var car = car || {}
var engine = engine || {} 
```

然后引用来自 carFactory.js 的调用：

```
engine.getEngine(); 
```

就像我说的，感谢任何帮助。我只是想明白，这不是课堂作业。我查看了 JavaScript 第六版中的部分，但看不出这种命名空间/对象设置在实践中是如何工作的。感谢任何帮助。

索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Object example</title>
</head>
<body>
    <div id="input">
        <p id='intro'>Object-Namespace Example</p> 
        <input type='button' onclick='updatePage()' value='New Car'/>
    </div>
    <div id="cars">
            <div id="car1">car1</div>
            <div id="car2">car2</div>
            <div id="car3">car3</div>
    </div>
    <div id="jslib">
        <script type="text/javascript" src="carFactory.js"></script> 
        <script type="text/javascript" src="engineFactory.js"></script>
        <script type="text/javascript">
                function updatePage() {
                    var car1 = getNewCar("Dodge");
                    var oldHTML = document.getElementById('car1').innerHTML;
                    var newHTML = "<span>" + car1["name"] + "</span>";
                    document.getElementById('car1').innerHTML = newHTML;
                    var car2 = getNewCar("Toyota");
                    var oldHTML = document.getElementById('car2').innerHTML;
                    var newHTML = "<span>" + car2 + "</span>";
                    document.getElementById('car2').innerHTML = newHTML;
                    var car3 = getNewCar("Hudson");
                    var oldHTML = document.getElementById('car3').innerHTML;
                    var newHTML = "<span>" + JSON.stringify(car3) + "</span>";
                    document.getElementById('car3').innerHTML = newHTML;
                };
        </script>
    </div>
</body>
</html> 
```

汽车工厂.js

```
function getNewCar(dName) {
    this.retValue="";
    var theCar = new car;
theCar.setProp("name",dName);
theCar.setProp("engine",getEngine());
theCar.setProp("wheels",4);
    return theCar;
};

car = function() {
    this.name="";
    this.engine="";
    this.wheels="";
    this.options="none";
    this.setProp=function(prop,val) {
        this[prop]=val;
    }
}; 
```

engineFactory.js

```
getEngine = function() {
    var theEngine = new engine();
    theEngine.setProp["cylinders"] = 8;
    theEngine.setProp["capacity"]=400;
    theEngine.setProp["fuel"]="injected";
    return theEngine;
};

engine = function() {
    this.capacity="";
    this.fuel="";
    this.cylinder="";
    this.nitrous="no";
    this.horsepower=getHorsepower(this);
    this.setProp=function(prop,val) {
        this[prop]=val;
    }
}

function getHorsepower(engine) {
    this.retValue=0;
    this.retValue=engine.cylinder*engine.capacity;
    return this.retValue;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:06:34.337

1.  您应该将`car`in 语句替换`var car = getNewCar("Dodge");`为`car1`，因为然后您使用`car1`，并且`car`在未定义中，这就是您得到`undefined`.

2.  当您将`var newHTML = "<span>" + car2 + "</span>";`对象`car2`转换为它的字符串表示形式时`'[object Object]'`。

3.  使用`theCar.setProp("name", dName);`而不是`theCar.setProp["name"] = dName;`. `setProp`是一个`function`，所以你应该使用它来称呼它`()`。顺便说一句，any`function`也是一个`object`，所以你可以给它添加字段，这是你在的时候所做`theCar.setProp["name"] = dName;`的，它不是给它添加任何字段`theCar`，它只是改变`theCar.setProp`对象。

*我希望它有帮助！*

# eclipse - 无法为 Juno 的 EGit 安装 Maven SCM 处理程序

> ID：11707971
> 
> 赞同：19
> 
> 时间：2012-07-29T09:00:24.677
> 
> 标签：eclipse, egit, m2e, eclipse-juno

我已通过 Help->Check for updates 菜单将我的 eclipse indigo 更新为 juno。我注意到我对 egit (2.x) 和 jgit (2.x) 的更新与我当前的安装 (1.3.x) 发生冲突，因此我删除了所有 egit 插件（eigt、jgit、egit-mylyn 和 Maven SCM Handler对于 EGit）。然后我尝试安装上述 egit 插件并且能够安装 egit 和 jgit 但无法为 EGit 安装 Maven SCM Handler。
我尝试更新 grvia m2e 市场并收到以下错误：

> 由于依赖项冲突，无法完成安装。
> 正在安装的软件： 用于 EGit 0.14.0.201110251725 (org.sonatype.m2e.egit.feature.feature.group 0.14.0.201110251725) 的 Maven SCM 处理
> 程序当前安装的软件： Eclipse EGit 2.0.0.201206130900-r (org.eclipse.egit.feature. group 2.0.0.201206130900-r)
> 一次只能安装以下之一：
> Git Team Provider Core 2.0.0.201206130900-r (org.eclipse.egit.core 2.0.0.201206130900-r)
> Git Team Provider Core (Incubation) 0.8。 4 (org.eclipse.egit.core 0.8.4)
> Git 团队提供者核心 1.1.0.201109151100-r (org.eclipse.egit.core 1.1.0.201109151100-r)
> Git 团队提供者核心 1.3.0.201202151440-r (org.eclipse. egit.core 1.3.0.201202151440-r)
> Git Team Provider Core（孵化）0.11.1（org.eclipse.egit.core 0.11.1）
> Git Team Provider Core（孵化）0.9.1（org.eclipse.egit.core 0.9.1）
> Git Team Provider Core 1.0。 0.201106090707-r (org.eclipse.egit.core 1.0.0.201106090707-r)
> 无法满足依赖：
> 来自：Eclipse EGit 2.0.0.201206130900-r (org.eclipse.egit.feature.group 2.0.0.201206130900-r)
> 到：org. eclipse.egit.core [2.0.0.201206130900-r]
> 无法满足依赖关系：
> 来自：用于 EGit 0.14.0.201110251725 的 Maven SCM 处理程序（org.sonatype.m2e.egit 0.14.0.201110251725）
> 至：捆绑 org.eclipse.egit.core [1.0 .0,2.0.0)
> 不能满足依赖：
> 来自：用于 EGit 的 Maven SCM 处理程序 0.14.0.201110251725 (org.sonatype.m2e.egit.feature.feature.group 0.14.0.201110251725)
> 至：org.sonatype.m2e.egit [0.14.0.201110251725]

我从错误中猜测市场上的工件尚未更新，因此我尝试从[nexus 存储库](http://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201207041402/)下载最新的 m2e-git，但我真的不知道如何处理它。
我将内容放在插件文件夹的子目录中，但没有看到它出现在“安装的内容”对话框中，所以我假设它不起作用。
有没有人设法让它工作？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-18T19:45:27.593

是的，自 Juno 发布以来，这也是其他 m2e 连接器的问题。我已经在[此处发布了用于解决此问题](http://machineversus.me/2012/08/18/if-youve-upgraded-to-eclipse-juno.html)的步骤。

以下是说明：

1.  单击**帮助**
2.  点击**安装新软件**
3.  取消选中标记为**按类别分组项目的框** *（此步骤很重要，否则您将看不到表中的连接器）*
4.  粘贴到这个 URL [http://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201305250025/](http://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201305250025/)
5.  完成插件安装向导并重新启动工作区

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-06T14:57:47.810

这将适用于 Eclipse 4.3（**开普勒**）：[http ://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201305250025/](http://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201305250025/)

请记住取消选中标有按类别分组项目的框

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-04T10:08:06.350

我从 git 中获取代码并创建了一个与 keppler + m2eclipse 0.14 + egit 3.x 一起使用的构建。

使用此更新 URL：[https ://github.com/micw/m2eclipse-egit-builds/raw/master/0.14.0.201401300919/](https://github.com/micw/m2eclipse-egit-builds/raw/master/0.14.0.201401300919/)

不要忘记取消选中“按类别分组项目”，否则您将不会在 eclipse 的软件管理器中看到该软件包。

2014-01-30 更新：我构建了最新的 git 版本，它允许与任何 EGit 3.x 版本一起使用。请在这篇文章中使用新的更新 URL。我验证它适用于最新的 EGit 3.2.x

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T03:07:52.990

我能够使用以下配置使其工作。

*   日食月神 SR1 日食
*   Egit Team Provider 3.7.0（我已经通过eclipse市场更新了插件）
*   M2E egit 0.14（通过 eclipse 市场安装）。

最初我在安装 m2e-egit 时也遇到了错误，但是一旦我更新了 Egit ecipe 插件，m2e-egit 的安装就完美了。希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-09T07:12:55.167

[从http://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201305250025/](http://repository.tesla.io:8081/nexus/content/sites/m2e.extras/m2eclipse-egit/0.14.0/N/0.14.0.201305250025/)安装处理程序 它适用于 Kepler SR1。

# ruby-on-rails - 来自 has_many 的 find_or_initialize_by 属性

> ID：11707973
> 
> 赞同：0
> 
> 时间：2012-07-29T09:00:39.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

所以，我正在尝试实现批量导入，即一个文本区域，人们可以在其中以“金额卡名”的形式编写他们的卡列表。然后 Rails 获取每一行，找到金额和卡名（该部分有效）并将其添加到数据库中（该部分无效）。

我的数据库：

*   卡片（id，name） - 已经填写，我不想在这里创建任何东西
*   用户（ID，姓名）
*   拥有（id、card_id、user_id、金额）

关系

*   用户 has_many hass
*   卡 has_many haves
*   拥有belongs_to卡和用户

```
> card_bulk.each_line 做 |line|
> card_data = /(^\d.?\s)(.+)/.match(行)
> 结束

```

此代码遍历文本区域内容并正则表达式正确的部分，因此我的金额在 card_data[0] 中，我的卡名在 card_data[2] 中。

现在我想将该卡添加到该用户的财产中。如果它已经存在，我想将金额添加到它已经拥有的金额中。如果它不存在，我想创建它并将它的数量设置为给定的数量。我不太确定我会怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:49:21.190

你可以使用new_record吗？救援帮手

```
card = Card.find_or_create_by_name(card_data[2])
haves = card.haves.find_or_initialize_by_user_id(user)
haves.amount = haves.new_record? ? card_data[0].to_i : haves.amount + card_data[0].to_1
card.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:17:01.890

你可以简单地这样做：

```
card = Card.find_or_create_by_name(card_data[2])
haves = Have.find(:card => card, :user => user)
if haves.empty?
  card.haves.create(:amount => card_data[0].to_i, :user => user)
else
  haves.update_attibutes(:amount => (haves.amount + card_data[0].to_i))
end 
```

# java - Java中的密码学

> ID：11707976
> 
> 赞同：5
> 
> 时间：2012-07-29T09:01:06.183
> 
> 标签：java, cryptography, size, block

我正在制作一个加密一些文件的应用程序。我想使用 gnu 的 cryptix 库。它说它自 2005 年以来不再开发，但我想它拥有我需要的一切......我应该使用其他东西吗？

我有一个关于加密单个文件的问题。现在我用这样的循环来做：

```
for(int i=0; i+block_size < bdata.length; i += block_size)
    cipher.encryptBlock(bdata, i, cdata, i); 
```

所以我的问题是如何加密可能与block_size大小不同的最后一个块。我在想也许应该在最后一个块中添加一些额外的数据，但我不知道如何解密......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T10:36:03.273

我强烈建议使用 AES 加密，它也带有 JAVA SDK。看看：[Using AES with Java Technology](http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html)，它会给你一些很好的例子。要了解有关 AES 的更多信息，请参阅：[高级加密标准 - 维基百科](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。

切勿使用您自己的加密方案或旧形式的加密方案。AES 已经由比我们在该领域有更丰富知识的人进行了尝试和测试，因此您知道它会起作用。与您自己的或旧的加密方案一样，我们可能会错过一个致命的漏洞，这将使我们的数据容易受到攻击。

在此处查看此问题以查看加密方案的区别：[DES、Triple DES、AES、河豚加密数据的比较](https://stackoverflow.com/questions/5554526/comparison-of-des-triple-des-aes-blowfish-encryption-for-data)

**附录：**

Java 中的 AES 可以完美运行 192 位和 256 位密钥，但您必须安装较新的 JCE 策略文件。见[这里](http://publib.boulder.ibm.com/infocenter/lmt/v7r2m2/index.jsp?topic=/com.ibm.license.mgmt.security.doc/lmt_scr_downloading_installing_jce_policyfiles.html)和[这里](http://www.ngs.ac.uk/tools/jcepolicyfiles)。您还应该将文件放在 JDK 中，否则从 IDE 执行时它将无法工作。

注意：确保下载正确的 JCE 策略文件，具体取决于您的 Java 版本，即 1.4、1.5、1.6 或 7。

但是，如果您使用 128 位密钥，则无需安装较新的 JCE 文件。

这是 java 中一些安全 AES 使用的模板，它使用*CBC/AES/PKCS5Padding*和使用`RandomSecure`.

**请注意**，您需要密钥和 IV 来解密：

```
import java.io.UnsupportedEncodingException;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import javax.crypto.*;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

/**
 * This program generates a AES key, retrieves its raw bytes, and then
 * reinstantiates a AES key from the key bytes. The reinstantiated key is used
 * to initialize a AES cipher for encryption and decryption.
 */
public class AES {

    /**
     * Encrypt a sample message using AES in CBC mode with a random IV genrated
     * using SecyreRandom.
     *
     */
    public static void main(String[] args) {
        try {
            String message = "This string contains a secret message.";
            System.out.println("Plaintext: " + message + "\n");

            // generate a key
            KeyGenerator keygen = KeyGenerator.getInstance("AES");
            keygen.init(128);  // To use 256 bit keys, you need the "unlimited strength" encryption policy files from Sun.
            byte[] key = keygen.generateKey().getEncoded();
            SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");

            // build the initialization vector (randomly).
            SecureRandom random = new SecureRandom();
            byte iv[] = new byte[16];//generate random 16 byte IV AES is always 16bytes
            random.nextBytes(iv);
            IvParameterSpec ivspec = new IvParameterSpec(iv);

            // initialize the cipher for encrypt mode
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
            cipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivspec);

            System.out.println("Key: " + new String(key, "utf-8") + " This is important when decrypting");
            System.out.println("IV: " + new String(iv, "utf-8") + " This is important when decrypting");
            System.out.println();

            // encrypt the message
            byte[] encrypted = cipher.doFinal(message.getBytes());
            System.out.println("Ciphertext: " + asHex(encrypted) + "\n");

            // reinitialize the cipher for decryption
            cipher.init(Cipher.DECRYPT_MODE, skeySpec, ivspec);

            // decrypt the message
            byte[] decrypted = cipher.doFinal(encrypted);
            System.out.println("Plaintext: " + new String(decrypted) + "\n");
        } catch (IllegalBlockSizeException | BadPaddingException | UnsupportedEncodingException | InvalidKeyException | InvalidAlgorithmParameterException | NoSuchPaddingException | NoSuchAlgorithmException ex) {
            ex.printStackTrace();
        }
    }

    /**
     * Turns array of bytes into string
     *
     * @param buf   Array of bytes to convert to hex string
     * @return  Generated hex string
     */
    public static String asHex(byte buf[]) {
        StringBuilder strbuf = new StringBuilder(buf.length * 2);
        int i;
        for (i = 0; i < buf.length; i++) {
            if (((int) buf[i] & 0xff) < 0x10) {
                strbuf.append("0");
            }
            strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
        }
        return strbuf.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T09:43:48.830

我总是使用[BouncyCastle](http://www.bouncycastle.org/)

我还使用流框架而不是您描述的 for 循环：它处理提出的问题。大多数情况下我使用它，因为当涉及到密码学（和线程）时，我很少相信我自己的代码，我相信活着的人吃和呼吸它。这是我想要“gash”加密时使用的代码。即我没有特定的威胁模型，只是想要一些“有点安全”的东西。

密钥的十六进制编码使它们更容易操作/存储等等。我使用“makeKey”来......好吧......制作一个密钥，然后我可以在加密和解密方法中使用该密钥。您显然可以返回使用`byte[]`而不是使用十六进制字符串作为键。

```
 private static boolean initialised;
    private static void init() {
      if (initialised)
        return;
      Security.addProvider(new BouncyCastleProvider());
      initialised = true;
    }
    public static String makeKey() {
        init();
        KeyGenerator generator = KeyGenerator.getInstance(algorithm, provider);
        generator.init(keySize);
        Key key = generator.generateKey();
        byte[] encoded = key.getEncoded();
        return Strings.toHex(encoded);
}

public static String aesDecrypt(String hexKey, String hexCoded) {
        init();
        SecretKeySpec key = new SecretKeySpec(Strings.fromHex(hexKey), algorithm);
        Cipher cipher = Cipher.getInstance(algorithm + "/ECB/PKCS5Padding", provider);
        cipher.init(Cipher.DECRYPT_MODE, key);
        byte[] codedBytes = Strings.fromHex(hexCoded);
        CipherInputStream inputStream = new CipherInputStream(new ByteArrayInputStream(codedBytes), cipher);
        byte[] bytes = getBytes(inputStream, 256);
        String result = new String(bytes, "UTF-8");
        return result;
}

public static String aesEncrypt(String hexKey, String input) {
        init();
        SecretKeySpec key = new SecretKeySpec(Strings.fromHex(hexKey), algorithm);

        Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding", "BC");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(input.length());
        CipherOutputStream outputStream = new CipherOutputStream(byteArrayOutputStream, cipher);
        setText(outputStream, input);
        byte[] outputBytes = byteArrayOutputStream.toByteArray();
        String output = new String(Strings.toHex(outputBytes));
        return output;
}
public static void setText(OutputStream outputStream, String text, String encoding) {
    try {
        outputStream.write(text.getBytes(encoding));
        outputStream.flush();
    } finally {
            outputStream.close();
    }
}
public static byte[] getBytes(InputStream inputStream, int bufferSize) {
    try {
        List<ByteArrayAndLength> list = Lists.newList();
        while (true) {
            byte[] buffer = new byte[bufferSize];
            int count = inputStream.read(buffer);
            if (count == -1) {
                byte[] result = new byte[ByteArrayAndLength.length(list)];
                int index = 0;
                for (ByteArrayAndLength byteArrayAndLength : list) {
                    System.arraycopy(byteArrayAndLength.bytes, 0, result, index, byteArrayAndLength.length);
                    index += byteArrayAndLength.length;
                }
                assert index == result.length;
                return result;
            }
            list.add(new ByteArrayAndLength(buffer, count));
        }
    } finally {
            inputStream.close();
    }
}
    static class ByteArrayAndLength {
    byte[] bytes;
    int length;

    public ByteArrayAndLength(byte[] bytes, int length) {
        super();
        this.bytes = bytes;
        this.length = length;
    }

    static int length(List<ByteArrayAndLength> list) {
        int result = 0;
        for (ByteArrayAndLength byteArrayAndLength : list) {
            result += byteArrayAndLength.length;
        }
        return result;
    }
} 
```

我已经删除了一些异常捕获以减少代码的大小，并将`Strings.fromHex`字符串转换回`byte[]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T09:13:00.713

也许你应该考虑使用一个`javax.crypto`包。以下是如何使用密码的示例：

[DES加密](http://www.exampledepot.com/egs/javax.crypto/desstring.html)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T09:17:47.803

在走这条路之前，我会认真三思。该软件的开发已停止，因为存在标准替代品，请查看邮件列表，自 2009 年以来没有任何重大活动。在我的书中，这意味着该软件已被放弃，而被放弃的软件意味着您或多或少靠自己。

看看这里，有几个问题和答案可以帮助你喜欢[这个](https://stackoverflow.com/questions/238404/java-package-for-encryption?rq=1)。[jasypt](http://www.jasypt.org/)乍一看很有趣，它可以为您简化事情（但仍使用标准的 JCE 基础架构）

# mfc - 将控件放在工具栏上 - 卡住

> ID：11707978
> 
> 赞同：0
> 
> 时间：2012-07-29T09:01:36.550
> 
> 标签：mfc, toolbar, walkthrough

我已经盯着这个文档 5 个小时了。我根本无法连接这些步骤。如果各位大神能帮我解惑。

这是网站： http: [//msdn.microsoft.com/EN-US/library/bb983718 (VS.110).aspx](http://msdn.microsoft.com/EN-US/library/bb983718(VS.110).aspx)

所以我的问题如下： - 在第 5 号，它要求我“设置这些参数如下：”，它甚至没有提到任何关于在哪里？在哪里实现构造函数，为什么要使用CMFCToolbarComboBoxButton？当它已经在第 4 步要求我派生一个名为 CFindComboButton 的类时。我不应该为那个做一个构造函数吗？

- 在第 4 号（抱歉问题的无组织编号），我所做的是使用添加类（不是类向导），然后我选择了 MFC 类。然后我输入所谓的 CFindComboButton 和 Base 类作为 CMFCToolBarComboBoxButton。我在这个上做错了吗？我必须为 ID ID_EDIT_FIND_COMBO 做任何事情吗？

-当我在字符串表中注册 ID_EDIT_FIND_COMBO 时，我不完全知道我做了什么。我只是为将来的实施注册了一个 id 吗？或者是别的什么？

- 所以我不能执行第 5 步，我跳到第 6 步。它只要求我在 CFindComboButton 的属性的覆盖部分中查找 CreateCombo 方法。好吧，我只能找到 3 个覆盖。它们都不是 CreateCombo 方法。那么从那里，你可以说我迷路了。

我是 mfc 的菜鸟，所以你可能想考虑一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:54:11.777

Even though your question is a bit jump-led up, let me try and answer so that it works for you.

1.  Create two class - one derived from CComboBox (call it CFindComboBox) and another from CMFCToolBarComboBoxButton (call it CFindComboBoxButton). First class will implement the Combobox that will be shown when you click the drop down button in the toolbar. This drop down button is implemented by CFindComboBoxButton. Hope this is clear.

2.  Now define the constructor for the CFindComboBoxButton as CFindComboBoxButton(UNIT nID, int nImage, DWORD dwStyles) using three parameters as explained below:

    *   Command ID of the button which will be ID_EDIT_FIND_COMBO (or anything you want to define it as). This will get defined in the String Table. Just add a new entry in String Table with ID_EDIT_FIND_COMBO as ID and a placeholder string. Don't omit the string value else the ID will not get defined. The string value can be anything as it wont be used anywhere.
    *   Second parameter will just be a call to CCommandManager::GetCmdImage(ID_EDIT_FIND). This will return the default image used to show the drop down for combobox. In case you want to use your own custom image you can create one and instead pass the ID of that.
    *   Third parameter is the styles you want to use. They are defined at [http://msdn.microsoft.com/EN-US/library/7h63bxbe(v=vs.110).aspx](http://msdn.microsoft.com/EN-US/library/7h63bxbe(v=vs.110).aspx) but you can use the default value (CBS_DROPDOWNLIST) to start with.
3.  Override the CreateCombo method of CMFCToolBarComboBoxButton and add its implementation to CFindComboBoxButton. In this method create and return a pointer to CFindComboBox (CComboBox derived class).

I hope this clears all the confusion and you should be on your way to have a custom Combobox embedded inside a toolbar.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T08:11:57.457

看看 VisualStudioDemo 示例：http: [//msdn.microsoft.com/en-us/library/bb983983%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb983983%28v=vs.90%29.aspx)

你可以在那里找到 CFindComboButton 实现

# php - 迫切需要jquery的所有在一个ajax函数中

> ID：11707980
> 
> 赞同：-2
> 
> 时间：2012-07-29T09:01:52.837
> 
> 标签：php, jquery, ajax

```
<input type="text" user" id="nick" />
<input type="text" user" id="message" />
<a href="#">Send</a> 
```

让我们保持简单。我有两个输入框和一个发送链接。我想将昵称和消息发送到shoutbox.php，我将在数据库中插入这些值，并希望从数据库中获取所有结果并将其显示在前端。

现在我已经实现了数据库部分的保存，但我无法将值从数据库取回到前端。

我迫切需要一个 jquery 函数，我可以在其中发送参数，它会为我完成所有工作。我希望你们自己也有这样的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:08:44.697

使用 jQuery Ajax 方法将数据发送到`shoutbox.php`：

```
$.ajax({
  type: "POST",
  url: "shoutbox.php",
  data: { nick: "val_of_nick", msg: "val_of_msg" },
  success: function(data) {
    alert('Loaded: ' + data);
  }
}); 
```

现在在你的`shoutbox.php`：

```
//read the sended data
$nickname = $_POST['nick'];
$msg = $_POST['msg'];

//to send data back, just use echo/print
echo 'You sended nickname: ' . $nickname . ' and msg: "' . $msg . '"'; 
```

如果您运行此代码，那么您的 js 警报将显示`echo`来自`shoutbox.php`.

希望这可以帮助！

更多关于 jQuery ajax 的信息：[info](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:07:27.480

只是一个例子：

***HTML***

```
<form id="myform">
  <input type="text" user" id="nick" name="nickname" /> <!-- use name ->
  <input type="text" user" id="message" name="message"/> <!-- use name -->
  <a href="#" id="send">Send</a>
</form> 
```

***jQuery***

```
$('#send').on('click', function(e) {
   e.preventDefault(); // prevent page reload on clicking of anchor tag
   $.ajax({
     type: 'POST',
     url: 'url_to_script',
     data: $('#myform').serialize(),
     dataType: 'json', // if you want to return JSON from php
     success: function(response) {
      // you can catch the data send from server within response
    }
   });
}); 
```

现在在您的 PHP 端，您可以通过 ajax 捕获发送值，例如：

```
<?php
  ...
  $nickname = $_POST['nickname'];
  $message = $_POST['message'];
  ......
?> 
```

* * *

相关参考：

*   **[。连载（）](http://api.jquery.com/serialize)**

*   **[.ajax()](http://api.jquery.com/ajax)**

# android - 杀死所有最近在android中的应用程序

> ID：11707984
> 
> 赞同：-1
> 
> 时间：2012-07-29T09:02:20.963
> 
> 标签：android, android-activity, launcher, android-applicationinfo

当我在我的 android 设备中长时间按主页键时。我得到所有最近应用程序的列表。现在我想从我的应用程序中以编程方式杀死我最近的所有应用程序。我能够获取所有最近应用程序的列表，但无法杀死所有应用程序。

我想用 android 版本 4.x 来实现它

谁能指导我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:16:45.090

您可以尝试[Process.killProcess()](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)。但它不会总是有效：

> 杀死具有给定 PID 的进程。请注意，尽管此 API 允许我们根据其 PID 请求终止任何进程，但内核仍会对您实际能够终止的 PID 施加标准限制。通常这意味着仅运行调用者的包/应用程序的进程以及该应用程序创建的任何其他进程；共享一个公共 UID 的包也将能够杀死彼此的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:14:24.840

首先`RunningTaskInfo`使用以下命令获取记录列表：

```
 [public List<ActivityManager.RunningTaskInfo> getRunningTasks (int maxNum)][1] 
```

[**参考**](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)

之后，您可以使用该列表中的进程 ID 来终止相关进程

```
activityManager.killBackgroundProcess(pid);
                    or
android.os.Process.killProcess(pid); 
```

取决于您是否可以终止该进程。杀死这些的方法[在这里](https://stackoverflow.com/a/7560009/759019)详细介绍。

# css - 无法将我的 DIV 彼此相邻对齐

> ID：11707989
> 
> 赞同：4
> 
> 时间：2012-07-29T09:04:42.343
> 
> 标签：css, alignment

出于某种原因，我无法将我的 div 彼此对齐。“右”在“左”下方 我的代码有什么问题？ ![对齐问题](../Images/de2b8692f43710e2a7c86bf63fe6a8fb.png) **HTML**：

```
<div id="activity-container">
    <div id="activity-left">left</div>
    <div id="activity-right">right</div>
</div> 
```

**CSS**：

```
#activity-container
{
    width:90%;
    background-color:#FFFF00;
    Height:400px;
    margin-left: auto;
    margin-right: auto;
}

#activity-left {
    border: 1px solid black; 
    color:#000;
    margin: 0 auto; 
    width: 20%; 
    float: left;
    position: relative; 
}

#activity-right {
    border: 1px solid black; 
    margin: 0 auto; 
    color:#000;
    width: 80%; 
    float: left;
    position: relative; 
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/6we61E6n)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:07:22.153

`div`-s上的边框增加`2px`了它们的宽度。删除它们，它们将彼此相邻 - [**jsFiddle**](http://jsfiddle.net/htxQp/)

如果您*真的*需要边框，请使用`outline`- [**jsFiddle模仿它们**](http://jsfiddle.net/htxQp/1/)

```
#activity-left {
    outline: 1px solid #000;
    color:#000;
    margin: 0 auto; 
    width: 20%; 
    float: left;
    position: relative; 
}

#activity-right {
    outline: 1px solid #000;
    margin: 0 auto; 
    color:#000;
    width: 80%; 
    float: left;
    position: relative; 
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:14:18.260

如果要保留边框，可以尝试更改`width`：

```
#activity-container
{
width:90%;
background-color:#FFFF00;
Height:400px;
margin-left: auto;
margin-right: auto;
}

#activity-left {
border: 1px solid black;
color:#000;
margin: 0 auto;
width: 19%;
float: left;
position: relative;
}

#activity-right {
border: 1px solid black;
margin: 0 auto;
color:#000;
width: 80%;
float: left;
position: relative;
} 
```

检查[Jsfiddle](http://jsfiddle.net/pApW6/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T09:23:14.167

您只需要从 CSS 中删除`float`和`margin`属性

```
#activity-right
{
    border: 1px solid black;           
    color: #000;
    width: 80%;           
    position: relative;
} 
```

它将按照您的期望工作。

# objective-c - 编写 UI 或使用 Interface Builder 更有效吗？

> ID：11707991
> 
> 赞同：1
> 
> 时间：2012-07-29T09:04:59.977
> 
> 标签：objective-c, xcode, interface-builder

因此，在阅读了一些不同的 Big Nerd Ranch 文本之后，以及看到 Tweetbot 成名的 Paul Haddad 或多或少说他不使用 Interface Builder 之后，我得出的结论是，出于某种原因，有些东西错了吗？

我个人发现自己倾向于使用 Interface Builder 仅仅是因为我有 Visual Basic 的背景。它更容易，更快，而且（对我而言）使用起来更愉快。

最后，我的问题是：**开发人员是否因为效率（通过最终应用程序的性能或在开发过程中）而倾向于编程设计的 UI 而不是 Interface Builder 生成的对应物？**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:16:04.307

Interface Builder 有时可能很繁琐，直到最近，在相对于彼此布置 UI 元素方面，您都无法用它做任何复杂的事情。由于您必须深入编写代码才能做到这一点，因此许多人只是在代码中完成所有事情。

然而，随着 AutoLayout 的出现以及它与 Interface Builder 的惊人集成，这种情况可能会改变。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-29T09:12:45.900

我个人觉得你可以通过自己编写 UI 来更好地管理你的代码。界面构建器可用于快速构建 GUI，并允许您进行实验，而无需了解您的 pl 支持的所有 GUI 组件的复杂细节。最好的方法是混合这两种方法，使用界面构建器快速构建，然后随意移动代码。

# php - ZF2 表单中的 IsImage 验证器

> ID：11707992
> 
> 赞同：1
> 
> 时间：2012-07-29T09:05:44.247
> 
> 标签：php, file-upload, validation, zend-framework2

我在 Zend Framework 2-beta5 的 Form 类中实现 IsImage 文件验证器时遇到问题。

一般来说，我在 Zend 框架 2 的 Zend Form 类中使用任何文件验证器时都会遇到问题。

我找不到任何相关文件。

我发现例如位于 Library/Zend/Validator 的 Float 验证器可以与以下代码一起使用：

```
 $this->setInputFilter($inputFactory->createInputFilter(array(
            'alcohol_vol' =>     array(
                    'name' => 'alcohol_vol',
                    'required' => true,
                    'validators' => array(
                            array(
                                    'name' => 'Float',
                            ),
                    ),
            ),
    ))); 
```

IsImage 文件验证器位于 /Library/Zend/Validator/File 并且找不到使用它的方法。任何有关该问题的信息将不胜感激。

谢谢！

克菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T14:52:42.993

尝试在`validators`key 下添加此代码段，如下所示：

```
'validators' => array(
    array(
        'name' => '\Zend\Validator\File\IsImage',
        'options' => array(
            'break_chain_on_failure' => true,
        ),
    ),
), 
```

但有时，取决于服务器配置，IsImage 可能无法正常工作。然后改用扩展验证器：

```
'validators' => array(
    array(
        'name' => '\Zend\Validator\File\Extension',
        'options' => array(
            'extension' => array(
                'png', 'jpeg', 'jpg',
            ),
            'break_chain_on_failure' => true,
        ),
    ),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T02:56:50.970

上传文件验证/过滤器应该使用 Zend\File\Transfer 而不是 Zend\Form

尝试以下方式添加文件验证器

```
$fileTransfer = new Zend\File\Transfer\Transfer();
$fileTransfer->addValidators(array(
    array('IsImage', true)
));
if($fileTransfer->isValid()){
    $fileTransfer->receive();
} 
```