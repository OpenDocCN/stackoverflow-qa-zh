# StackOverflow 问答 10131000-10131999

# java - java日历用户界面

> ID：10131007
> 
> 赞同：1
> 
> 时间：2012-04-12T20:08:12.103
> 
> 标签：java, calendar

我正在尝试创建一个可以嵌入到我的 html 网页中的日历 ui。我希望用户能够添加事件并将它们显示在日历上，并根据事件的类别对它们进行颜色编码。关于我应该开始朝哪个方向前进的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:18:36.590

我推荐[gwt-cal](http://code.google.com/p/gwt-cal/)

将 GWT 小部件嵌入到任何 HTML 页面中都很容易，并且具有您需要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:18:47.213

[http://arshaw.com/fullcalendar/docs/views/](http://arshaw.com/fullcalendar/docs/views/)

这是一个很好的起点

它建立在 JavaScript 之上。但它可以与您的 java web 服务器集成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T03:43:32.580

# Vaadin 日历

对于 Java，请使用[Vaadin](http://www.Vaadin.com/)中的[日历小部件](https://vaadin.com/docs/-/part/framework/components/components-calendar.html)。见[演示](http://demo.vaadin.com/sampler/#ui/data-input/dates/dates-calendar)。

[![在此处输入图像描述](../Images/b44c7af36091d6ae7d7bf117c5691e3f.png)](https://i.stack.imgur.com/uTGEM.png)

[![在此处输入图像描述](../Images/54076c73a9770698bd8e5292c0d05d29.png)](https://i.stack.imgur.com/kn1yd.png)

# Vaadin 日期选择器

顺便说一句，Vaadin 还提供了一个日期选择器小部件。请参阅[此演示](http://demo.vaadin.com/sampler/#ui/data-input/dates/date-picker)。请参阅[教程](https://vaadin.com/docs/-/part/framework/components/components-datefield.html)。

可作为[Vaadin Elements](https://vaadin.com/elements)项目中基于[Polymer](https://en.wikipedia.org/wiki/Polymer_(library))的[Web 组件作为](https://en.wikipedia.org/wiki/Web_Components)[vaadin-date-picker](https://vaadin.com/elements/-/element/vaadin-date-picker)独立使用。

稍后再回来查看 Vaadin Elements 项目。他们计划添加更多组件。也许他们将来会提供完整的日历小部件。

# wcf - Wcf 服务方法设计

> ID：10131008
> 
> 赞同：0
> 
> 时间：2012-04-12T20:08:26.887
> 
> 标签：wcf, wcf-ria-services

我有一个 Wcf 服务，它为两个不同的 ViewModel 提供一系列产品列表。

*   ViewModel 1 调用 WCF 服务获取产品集合
*   ViewModel 2 调用 WCF 服务来获取产品集合

像这样标记我的 WCF 服务方法是不好的做法吗

1.  列出 MyWCFServe.GetProductsForViewModel1()

2.  列出 MyWCFServe.GetProductsForViewModel2()

有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:10:46.797

是的，那将是不好的做法，您会将您的服务与特定的演示实现和技术相结合。

当您想要通过相同服务在 MVC 站点上列出产品列表时会发生什么？

如果两个视图模型都检索到相同的产品集合，那么它们应该调用相同的服务方法。如果每个视图显示不同的产品集合，则应根据集合的不同来命名方法，例如，如果应用了不同的过滤，则方法名称应隐含这一点。

# ruby-on-rails - 铁轨中的模型问题

> ID：10131009
> 
> 赞同：0
> 
> 时间：2012-04-12T20:08:29.697
> 
> 标签：ruby-on-rails, model

我有客户.rb

```
 class Customer < ActiveRecord::Base
    acts_as_authentic
    has_many :credit_cards
    has_many :telephones
    has_many :virtual_pays
end 
```

电话.rb

```
 class Telephone < ActiveRecord::Base
    belongs_to :customers
end 
```

当我使用 Rails 控制台广告写入 Customer.all 时，我将从数据库表客户中获取所有数据，但是当我尝试获取包括客户电话在内的所有数据时，我收到错误我写：customers.telephones.all，然后我尝试客户。 Telephone.all，但如何正确执行此操作？

> NameError: undefined local variable or method `customers' for main:Object from (irb):6 from /home/pp/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.9/lib/rails/commands/console.rb:44:in` start' from /home/pp/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.9/lib/rails/commands/console.rb:8:in `start' from /home/pp/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.9/lib/rails/commands.rb:23:in` '来自脚本/rails:6:in `require' from script/rails:6:in`'

我也纠正了写模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:11:59.513

在您的电话模型中，它应该是 belongs_to :customer （单数）。

# powershell - 使 PowerShell 忽略分号

> ID：10131021
> 
> 赞同：14
> 
> 时间：2012-04-12T20:09:20.480
> 
> 标签：powershell

我想在 PowerShell 上执行一个 cmd，这个命令使用分号。然后 PowerShell 将其解释为多个命令。如何让 PowerShell 忽略分号并执行我的命令如何独特的命令？

例子：

```
Invoke-Expression "msbuild /t:Build;PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Debug;_PackageTempDir=$TargetFolder $WebProject" 
```

另一个例子：

```
Invoke-Expression "test`;test2" 
```

第二个示例响应：

```
The term 'test' is not recognized as the name of a cmdlet, function, script file, or operable program. Check
the spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:6
+ teste <<<< ;teste2
    + CategoryInfo          : ObjectNotFound: (teste:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

The term 'test2' is not recognized as the name of a cmdlet, function, script file, or operable program. Chec
k the spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:13
+ teste;teste2 <<<<
    + CategoryInfo          : ObjectNotFound: (teste2:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-13T04:03:39.117

只需在命令行上转义分号：

```
msbuild /t:Build`;PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Debug`;_PackageTempDir=$TargetFolder $WebProject 
```

我一直使用 tf.exe 实用程序执行此操作：

```
tf.exe status . /r /workspace:WORK`;johndoe 
```

仅供参考，此[问题已在 Connect 上获得大量投票](https://connect.microsoft.com/PowerShell/feedback/details/376207/executing-commands-which-require-quotes-and-variables-is-practically-impossible)。PowerShell v3 使用新的运算符解决了这个问题`--%`：

```
$env:TargetFolder = $TargetFolder
msbuild $WebProject --% /t:Build;PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Debug;_PackageTempDir=%TargetFolder% 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-08T14:44:52.190

忽略分号的最简单方法是什么？只需使用单引号与双引号！

在 PowerShell 中，您使用的引用类型很重要。双引号将让 PowerShell 进行字符串扩展（因此，如果您有一个变量 $something = someprogram.exe，并运行“$something”，PowerShell 将替换为“someprogram.exe”）。

如果您不需要字符串替换/变量扩展，那么只需使用单引号。PowerShell 将完全按照列出的方式执行单引号字符串。

如果要使用字符串扩展，另一种选择是使用 here-string。这里的字符串就像一个普通的字符串，但是它以 @ 符号开始和结束在它自己的单独行上，如下所示：

```
$herestring = @"
Do some stuff here, even use a semicolon ;
"@ 
```

这是一个两全其美的方案，因为您可以使用您喜欢的字符并让它们工作，但仍然可以获得变量扩展，这是单引号无法获得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:47:01.487

尝试使用 Start-Process 运行 MSbuild，然后使用 -Argument 将其余部分作为值传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T05:59:55.023

这是我用来调用带有注释用法和参数的本机 EXE 文件的示例：

```
# Gen-CACert.ps1
clear-host

$scriptBlock = {.\Makecert -n `"CN=PowerShell Authorite de certification`"  <# Sujet du certificat (conforme à la norme X50 #>`
                           -a sha1                                          <# Algorithme utilisé #>`
                           -eku 1.3.6.1.5.5.7.3.3                           <# Option du certificat (signature de code) #>`
                           -r                                               <# Certificat auto signé #>`
                           <# -ss `"$($args[0])`"                              Dossier de stockage du certificat #>`
                           -ss `"root`"                                     <# Dossier de stockage du certificat #>`
                           -sr localMachine                                 <# Magasin de stockage localmachine ou currentuser (defaut) #>`
                           -sv `"$($args[0]).pvk`"                          <# Nom du fichier contenant la clef privée #>`
                           `"$($args[0]).cer`"}                             <# Nom du fichier certificat #>

$PoshCARoot = "PoshCARoot"
Invoke-Command -ScriptBlock $scriptBlock  -ArgumentList $PoshCARoot 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T03:12:29.723

作为 的替代方法`Start-Process`，您可以只调用命令，就像使用调用运算符使用 cmd.exe 调用它一样`&`：

```
& msbuild /t:Build;PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Debug;_PackageTempDir=$TargetFolder $WebProject 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-24T09:35:00.563

您可以使用逗号作为分隔符：

```
msbuild /t:Build,PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Debug,_PackageTempDir=$TargetFolder $WebProject 
```

# android - Android：从活动中刷新操作栏选项卡

> ID：10131030
> 
> 赞同：0
> 
> 时间：2012-04-12T20:09:49.130
> 
> 标签：android, android-fragments, android-actionbar

在活动的操作栏选项菜单中，有一个选项可以刷新视图中的当前数据。在我的场景中，我有一个使用操作栏选项卡和片段显示 3 个选项卡的活动。只有当用户单击刷新时，我才应该再次从服务器获取数据。那么如何告诉活动中选项卡内的片段从活动中刷新呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:24:54.180

在你的片段中找到`FragmentManager`并调用它的方法，告诉它刷新。使用`getSelectedNavigationIndex()`on`ActionBar`了解哪个是选定的选项卡。

# php - 成功解析 SimpleXMLElement 比较到 'false' 返回 'true'

> ID：10131045
> 
> 赞同：3
> 
> 时间：2012-04-12T20:11:00.650
> 
> 标签：php, xml, comparison, simplexml

我在 simplexml 评估中遇到了一个非常尴尬和具体的问题。

编码：

```
$simplexml = simplexml_load_string($xmlstring);
var_dump($simplexml);
var_dump($simplexml == false); //this comparison 
```

var_dump($simplexml) 返回我的 simplexml 的实际结构，但对于这个特定的 simplexml，比较返回“true”，由于我的合同，我无法显示结构。
我确定这是一个非常具体的问题，因为我尝试了其他 XML 字符串并且比较返回 'false'。

```
$simplexml = simplexml_load_string('<a><b>test</b></a>');
var_dump($simplexml); //returns the actual structure
var_dump($simplexml == false); //returns false 
```

我使用 '===' 运算符解决了这个问题，但我不满足于仅仅让它工作。我想了解为什么 '==' 运算符返回 true。
我阅读了有关这两个运算符和 SimpleXMLElement 的信息，并且在我看来它应该为两个运算符返回“false”。在成功解析的 SimpleXMLElement 和布尔值“false”之间进行比较以返回“true”的可能原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:24:09.460

我这是使用布尔转换的更好方法`(bool)`

```
$simplexml = simplexml_load_string('<a><b>test</b></a>');
var_dump($simplexml); //returns the actual structure
var_dump((bool) $simplexml); // Retuns true
var_dump((bool) $simplexml == false); //returns false
var_dump((bool) $simplexml === false); //returns false 
```

演示：[http ://codepad.viper-7.com/xZtuNG](http://codepad.viper-7.com/xZtuNG)

`===`比较值和类型……除了对象， where`===`仅当两个操作数实际上是同一个对象时才为真！对于对象，`==`比较（每个属性的）值和类型，这`===`对其他所有类型都是如此。

**编辑 1**

请参阅有关类似内容的最新错误[https://bugs.php.net/bug.php?id=54547](https://bugs.php.net/bug.php?id=54547)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:51:18.463

```
var_dump($simplexml == false); //returns false 
```

这是预期的行为，它通过“松散”数据类型的数据比较来解释。在 PHP 中，NULL、零和布尔 FALSE 被认为是“假”值；其他一切都被认为是“真实的”。在括号内，PHP 执行表达式的计算。在这种情况下，PHP 计算命名变量 OBJECT 和布尔值 FALSE 的比较。它们不相同，因此比较的返回值为 FALSE，这就是 *var_dump()* 打印的内容。

您可以在 if() 语句中利用这一点。例子：

```
$simplexml = SimpleXML_Load_String('<a><b>test</b></a>');
if ($simplexml) { /* process the object */ }
else { /* process the failure to load the XML */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:18:06.860

看看这里： [http ://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

它说从空标签创建的 SimpleXML 对象评估为假。也许这就是正在发生的事情？

# python - 有没有在 boto 中实现 key.open_write 的解决方法？

> ID：10131046
> 
> 赞同：1
> 
> 时间：2012-04-12T20:11:05.303
> 
> 标签：python, amazon-s3, amazon-web-services, boto

我有一个由 DB 查询（在本例中为 MongoDB 游标）支持的 Python 迭代器。我正在尝试使用 boto 将其内容写为 S3 上的文本文件。

最简单的方法是将所有内容连接成一个字符串并调用 key.set_contents_from_string。但是，这不适用于大量数据（可能超过 1GB）。

```
s = ""
for entry in entries:
  s += entry
k.set_contents_from_string(s) 
```

理想情况下，我会使用 key.open_write() 这样我就可以在迭代时将每个条目写入 S3 ......但该功能尚未由 boto 实现。

```
k.open_write()
for entry in entries:
  k.write(entry) 
```

我该如何解决这个问题？有没有办法将迭代器包装成文件对象，以便我可以使用 key.send_file？

# ruby-on-rails - 如何在 Rails 3.1.3 中安全地更新生产数据库模式？

> ID：10131049
> 
> 赞同：0
> 
> 时间：2012-04-12T20:11:21.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我们需要在生产中为 rails 3.1.3 应用程序不断更新我们的数据库模式。第一个 db 模式是使用以下 rails 命令创建的：

```
$rake RAILS_ENV=production db:schema:load 
```

问题是：我们仍然可以使用上面的命令来更新生产中的数据库模式，同时安全地保留所有当前数据吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:24:27.807

我从未`rake db:schema:load`在生产中使用过，但根据[这个](https://stackoverflow.com/questions/5905287/rake-dbschemaload-vs-migrations)对 SO 上另一个问题的回答，**我认为你不想这样做**。

另一方面，我`RAILS_ENV=production rake db:migrate`在服务器上使用了几次，数据已经在数据库中，从未遇到任何问题。

# arrays - cakePHP 2.1 CakeEmail 发送电子邮件数组时出错

> ID：10131051
> 
> 赞同：0
> 
> 时间：2012-04-12T20:11:34.470
> 
> 标签：arrays, email, cakephp

CakePHP 无法在上一次执行后发送多封电子邮件。这是一个示例：

```
$Email = new CakeEmail('smtp');
                $Email->emailFormat('html')
                        ->template('myTemplate')
                        ->to('someEmail@email.com')
                        ->subject('someSubject')
                        ->send('MyMessage');
                 unset($Email); 
```

重新实例蛋糕电子邮件

```
$arrEmails = array('email1@email.com','email2@email.com','email3@email.com','email4@email.com','email5@email.com');
$Email = new CakeEmail('smtp');
                $Email->emailFormat('html')
                        ->template('mySecondTemplate')
                        ->to($arrEmails)
                        ->subject('OtherSubject')
                        ->send('MyOtherMessage'); 
```

我还尝试创建 2 个不同的 cakeEmail 实例，但同样发生。我尝试过的其他方法是放入一个“for”循环，但没有任何反应。

如果有人知道这里发生了什么，我会非常有帮助，我很感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:12:18.900

看一下`reset()`方法：

[http://api20.cakephp.org/class/cake-email#method-CakeEmailreset](http://api20.cakephp.org/class/cake-email#method-CakeEmailreset)

# javascript - Crockford 的原型继承 - 嵌套对象的问题

> ID：10131052
> 
> 赞同：13
> 
> 时间：2012-04-12T20:11:55.623
> 
> 标签：javascript, prototypal-inheritance

我一直在阅读 Douglas Crockford 的“Javascript: The Good Parts”——虽然它有点极端，但我同意他的很多话。

在第 3 章中，他讨论了对象，并在某一时刻提出了一种模式（也[可以在此处找到](http://javascript.crockford.com/prototypal.html)）来简化和避免使用内置“new”关键字带来的一些混淆/问题。

```
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() {}
        F.prototype = o;
        return new F();
    };
}
newObject = Object.create(oldObject); 
```

因此，我尝试在我正在处理的项目中使用它，并且在尝试从嵌套对象继承时发现了一个问题。如果我覆盖使用此模式继承的嵌套对象的值，它会一直覆盖原型链上的嵌套元素。

Crockford 的示例类似于`flatObj`以下示例中的示例，效果很好。但是，该行为与嵌套对象不一致：

```
var flatObj = {
    firstname: "John",
    lastname: "Doe",
    age: 23
}
var person1 = Object.create(flatObj);

var nestObj = {
    sex: "female",
    info: {
        firstname: "Jane",
        lastname: "Dough",
        age: 32  
    }
}
var person2 = Object.create(nestObj);

var nestObj2 = {
    sex: "male",
    info: {
        firstname: "Arnold",
        lastname: "Schwarzenneger",
        age: 61  
    }
}
var person3 = {
    sex: "male"
}
person3.info = Object.create(nestObj2.info);

// now change the objects:
person1.age = 69;
person2.info.age = 96;
person3.info.age = 0;

// prototypes should not have changed:
flatObj.age // 23
nestObj.info.age // 96 ???
nestObj2.info.age // 61

// now delete properties:
delete person1.age;
delete person2.info.age;
delete person3.info.age;

// prototypes should not have changed:
flatObj.age // 23
nestObj.info.age // undefined ???
nestObj2.info.age // 61 
```

（也在[小提琴](http://jsfiddle.net/tM7R7/)上）

我做错了什么，或者这是这种模式的限制？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T20:25:22.627

没有不一致。只是不要考虑嵌套对象：对象的*直接*属性总是在其原型上或自己的属性上。属性值是基元还是对象都无关紧要。

所以，当你这样做

```
var parent = {
    x: {a:0}
};
var child = Object.create(parent); 
```

`child.x`将引用与该对象相同的`parent.x`对象`{a:0}`。当您更改它的属性时：

```
var prop_val = child.x; // == parent.x
prop_val.a = 1; 
```

两者都会受到影响。要独立更改“嵌套”属性，您首先必须创建一个独立对象：

```
child.x = {a:0};
child.x.a = 1;
parent.x.a; // still 0 
```

你能做的是

```
child.x = Object.create(parent.x);
child.x.a = 1;
delete child.x.a; // (child.x).a == 0, because child.x inherits from parent.x
delete child.x; // (child).x.a == 0, because child inherits from parent 
```

这意味着它们不是绝对独立的——但仍然是两个不同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:27:40.140

我认为正在发生的事情是，当您创建 时`person2`，它的`sex`和`info`属性指的是`nestObj`. 当您引用 时`person2.info`，由于`person2`没有重新定义`info`属性，它会通过原型并在那里修改对象。

看起来“正确”的方法是您构建的方式`person3`，因此对象有自己的`info`对象要修改，并且不会上升到原型。

我也在读这本书（慢慢地），所以我很同情你。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-24T01:08:33.413

我已经更改了示例，以便更好地演示这里发生的事情。[`Demo`](http://jsbin.com/wufugofizo/edit?js,console)

首先我们创建一个具有三个属性的对象；一个数字、一个字符串和一个具有一个具有字符串值的属性的对象。

然后我们使用第一个对象创建第二个对象`Object.create()`；

```
var obj1 = { 
    num : 1,
    str : 'foo',
    obj : { less: 'more' }
};
var obj2 = Object.create( obj1 );

console.log( '[1] obj1:', obj1 );
console.log( '[1] obj2:', obj2 ); 
```

```
"[1] obj1:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "foo"
}
"[1] obj2:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "foo"
} 
```

看起来不错吧？我们有我们的第一个对象和第二个复制的对象。

没那么快；让我们看看当我们改变第一个对象的一些值时会发生什么。

```
obj1.num = 3;
obj1.str = 'bar';
obj1.obj.less = 'less';

console.log( '[2] obj1:', obj1 );
console.log( '[2] obj2:', obj2 ); 
```

```
"[2] obj1:"
[object Object] {
  num: 3,
  obj: [object Object] {
    less: "less"
  },
  str: "bar"
}
"[2] obj2:"
[object Object] {
  num: 3,
  obj: [object Object] {
    less: "less"
  },
  str: "bar"
} 
```

现在我们再次有了我们的第一个对象，带有更改，以及该对象的副本。这里发生了什么事？

让我们检查对象是否有自己的属性。

```
for( var prop in obj1 ) console.log( '[3] obj1.hasOwnProperty( ' + prop + ' ): ' + obj1.hasOwnProperty( prop ) );
for( var prop in obj2 ) console.log( '[3] obj2.hasOwnProperty( ' + prop + ' ): ' + obj2.hasOwnProperty( prop ) ); 
```

```
"[3] obj1.hasOwnProperty( num ): true"
"[3] obj1.hasOwnProperty( str ): true"
"[3] obj1.hasOwnProperty( obj ): true"
"[3] obj2.hasOwnProperty( num ): false"
"[3] obj2.hasOwnProperty( str ): false"
"[3] obj2.hasOwnProperty( obj ): false" 
```

`obj1`有它自己的所有属性，就像我们定义的那样，但`obj2`没有。

当我们改变`obj2`'s 的一些属性时会发生什么？

```
obj2.num = 1;
obj2.str = 'baz';
obj2.obj.less = 'more';

console.log( '[4] obj1:', obj1 );
console.log( '[4] obj2:', obj2 );
for( var prop in obj1 ) console.log( '[4] obj1.hasOwnProperty( ' + prop + ' ): ' + obj1.hasOwnProperty( prop ) );
for( var prop in obj2 ) console.log( '[4] obj2.hasOwnProperty( ' + prop + ' ): ' + obj2.hasOwnProperty( prop ) ); 
```

```
"[4] obj1:"
[object Object] {
  num: 3,
  obj: [object Object] {
    less: "more"
  },
  str: "bar"
}
"[4] obj2:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "baz"
}
"[4] obj1.hasOwnProperty( num ): true"
"[4] obj1.hasOwnProperty( str ): true"
"[4] obj1.hasOwnProperty( obj ): true"
"[4] obj2.hasOwnProperty( num ): true"
"[4] obj2.hasOwnProperty( str ): true"
"[4] obj2.hasOwnProperty( obj ): false" 
```

所以，`num`并且`str`改变了，`obj2`而不是`obj1`像我们想要的那样改变，而是`obj1.obj.less`在不应该改变的时候改变。

从`hasOwnProperty()`检查中我们可以看到，即使我们更改了`obj2.obj.less`，我们也没有`obj2.obj`先设置。这意味着我们仍然指的是`obj1.obj.less`.

让我们创建一个对象`obj1.obj`并将其分配给它`obj2.obj`，看看它是否为我们提供了我们正在寻找的东西。

```
obj2.obj = Object.create( obj1.obj );

console.log( '[5] obj1:', obj1 );
console.log( '[5] obj2:', obj2 );
for( var prop in obj1 ) console.log( '[5] obj1.hasOwnProperty( ' + prop + ' ): ' + obj1.hasOwnProperty( prop ) );
for( var prop in obj2 ) console.log( '[5] obj2.hasOwnProperty( ' + prop + ' ): ' + obj2.hasOwnProperty( prop ) ); 
```

```
"[5] obj1:"
[object Object] {
  num: 3,
  obj: [object Object] {
    less: "more"
  },
  str: "bar"
}
"[5] obj2:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "baz"
}
"[5] obj1.hasOwnProperty( num ): true"
"[5] obj1.hasOwnProperty( str ): true"
"[5] obj1.hasOwnProperty( obj ): true"
"[5] obj2.hasOwnProperty( num ): true"
"[5] obj2.hasOwnProperty( str ): true"
"[5] obj2.hasOwnProperty( obj ): true" 
```

很好，现在`obj2`有自己的`obj`财产了。让我们看看当我们`obj2.obj.less`现在改变时会发生什么。

```
obj2.obj.less = 'less';

console.log( '[6] obj1:', obj1 );
console.log( '[6] obj2:', obj2 ); 
```

```
"[6] obj1:"
[object Object] {
  num: 3,
  obj: [object Object] {
    less: "more"
  },
  str: "bar"
}
"[6] obj2:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "less"
  },
  str: "baz"
} 
```

所以这一切告诉我们的是，如果尚未更改已创建对象的属性，则对已`get`创建对象的该属性的任何请求都将转发到原始对象。

来自前一个代码块的`set`请求`obj2.obj.less = 'more'`首先需要一个对 的`get`请求`obj2.obj`，此时它不存在`obj2`，因此它`obj1.obj`依次转发到 和`obj1.obj.less`。

最后当我们`obj2`再次阅读时，我们仍然没有设置`obj2.obj`，因此`get`请求将被转发`obj1.obj`并返回我们之前更改的设置，导致更改第二个对象对象子对象的属性似乎同时更改了两者，但实际上它实际上只是改变了第一个。

* * *

您可以使用此函数以递归方式返回与原始对象完全分离的新对象。

[`Demo`](http://jsbin.com/pemeridimu/edit?js,console)

```
var obj1 = { 
    num : 1,
    str : 'foo',
    obj : { less: 'more' }
};
var obj2 = separateObject( obj1 );

function separateObject( obj1 ) {

    var obj2 = Object.create( Object.getPrototypeOf( obj1 ) );
    for(var prop in obj1) {
        if( typeof obj1[prop] === "object" )
            obj2[prop] = separateObject( obj1[prop] );
        else
            obj2[prop] = obj1[prop];
    }

    return obj2;
}

console.log( '[1] obj1:', obj1 );
console.log( '[1] obj2:', obj2 );
for( var prop in obj1 ) console.log( '[1] obj1.hasOwnProperty( ' + prop + ' ): ' + obj1.hasOwnProperty( prop ) );
for( var prop in obj2 ) console.log( '[1] obj2.hasOwnProperty( ' + prop + ' ): ' + obj2.hasOwnProperty( prop ) ); 
```

```
"[1] obj1:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "foo"
}
"[1] obj2:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "foo"
}
"[1] obj1.hasOwnProperty( num ): true"
"[1] obj1.hasOwnProperty( str ): true"
"[1] obj1.hasOwnProperty( obj ): true"
"[1] obj2.hasOwnProperty( num ): true"
"[1] obj2.hasOwnProperty( str ): true"
"[1] obj2.hasOwnProperty( obj ): true" 
```

现在让我们看看当我们改变一些变量时会发生什么。

```
obj1.num = 3;
obj1.str = 'bar';
obj1.obj.less = 'less';

console.log( '[2] obj1:', obj1 );
console.log( '[2] obj2:', obj2 ); 
```

```
"[2] obj1:"
[object Object] {
  num: 3,
  obj: [object Object] {
    less: "less"
  },
  str: "bar"
}
"[2] obj2:"
[object Object] {
  num: 1,
  obj: [object Object] {
    less: "more"
  },
  str: "foo"
} 
```

一切都完全按照您的预期进行。

# sql-server - 无法删除字符串 SQL Server 中的第一个逗号

> ID：10131053
> 
> 赞同：0
> 
> 时间：2012-04-12T20:11:56.120
> 
> 标签：sql-server

代码工作正常，除了

```
SELECT DISTINCT isnull(@FEATURE + ', ', ',') + Feature 
    FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] as rf2 where (rf2.roomid =   rf.roomid)
    for xml path('')), 
```

这给我带来了问题。我不知道如何去掉第一个逗号。我已经尝试过子字符串，但它删除了所有逗号（我猜是因为它在 select 语句中）。我什至尝试过 *COALESCE(@FEATURE + ', ', '') + FEATURE*但我最终得到了相同的结果，要么没有逗号，要么在末尾或开头多了一个逗号。

```
DECLARE @FEATURE VARCHAR(500) 
-- INSERT INTO BookableRooms IF NOT EXISTS ROOM NUMBER 
INSERT INTO dbo.BookableRooms_test (FK_Building_code,
                                    Room_num,Other_room_name,
                                    Capacity_from,
                                    Capacity_to,
                                    Accessiblity,AV_book_separate,Flooring_type,Features,
                                    Food_drink_allowed, Alcohol_allowed,Internet,
                                    [Owner],FK_BookingContact_ID,
                                    LCD_projector,Computer,FK_SpaceManager_code,Last_updated_date,Last_updated_by,SpecialFlag)
SELECT DISTINCT CASE
            WHEN rf.[Building Reference] is null or rf.[Building Reference] = '' THEN 'HH'
            ELSE rf.[Building Reference] 
        END,
        [ROOMID],[Description],
       (SELECT MIN(rf2.CAPACITY) FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] AS rf2 WHERE rf2.ROOMID = rf.ROOMID),
       (SELECT MAX(rf2.CAPACITY) FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] AS rf2 WHERE rf2.ROOMID = rf.ROOMID),  
       dbo.iszero([Wheelchair Accessible]), dbo.iszero(rf.[Separate AV]),dbo.isflat(rf.[Flat Floor]),
       (
        SELECT DISTINCT isnull(@FEATURE + ', ', ',') + Feature 
        FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] as rf2 where (rf2.roomid = rf.roomid)
        for xml path('')),
       dbo.iszero(rf.[Food and Drink]),dbo.iszero(rf.[Alcohol]),dbo.iszero(rf.[Room Internet]),
       'HH',5,
       dbo.iszero(rf.[Digital Projector]),dbo.iszero(rf.[Computer]),'HH',GetDate(),'System',dbo.iszero(rf.[Restricted])

 FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] as rf  where NOT EXISTS(
    SELECT 1 FROM dbo.BookableRooms_test b WHERE 
    b.Room_num = rf.ROOMID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:24:59.727

使用 Stuff 但在子查询的外侧：

```
stuff ((SELECT DISTINCT ',' + Feature 
        FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] as rf2 
        WHERE (rf2.roomid = rf.roomid)
        for xml path('')), 1, 1, '') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:22:32.670

使用[STUFF](http://msdn.microsoft.com/en-us/library/ms188043%28v=sql.105%29.aspx)函数删除前导逗号。

```
SELECT DISTINCT STUFF(',' + Feature 
    FROM [128.100.194.219, 1435].[EMSData].[dbo].[vOSLRoomFeatures] as rf2 where (rf2.roomid =   rf.roomid)
    for xml path('')),1,1,''), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:18:16.777

我不确定您要达到的目标。如果我的猜测是错误的，最好告诉我们在哪种情况下您期望得到什么结果。

尝试这个

```
CASE WHEN @FEATURE IS NULL THEN NULL ELSE @FEATURE + ', ' END 
```

# php - 使用 PHP 对 MySQL 数据进行排序

> ID：10131056
> 
> 赞同：0
> 
> 时间：2012-04-12T20:12:13.467
> 
> 标签：php, mysql

我想显示我的用户的图片，按日期分组，就像我附加的图片一样。我需要做什么？

我到目前为止：

```
$connect= //connection info;
$query= "SELECT * FROM posts WHERE user_id= $user_id AND picture= IS NOT NULL ORDER BY date DESC";

$result= ($connect, $query); 

while ($row= mysqli_fetch_array($result)) {
echo '<img src="'.$row['picture']. '"/>' . "<br/>";
}; 
```

我的表结构：

```
| user_id | post_date | story | image |
|-------------------------------------|
| 14      | mar 2012  | BLOB  | a.jpg |
| 14      | apr 2012  | BLOB  | b.jpg |
| 14      | feb 2012  | BLOB  | c.jpg |
| 14      | mar 2012  | BLOB  | d.jpg |
|_____________________________________| 
```

但是此代码仅显示用户收集的所有图像。我如何将它们分组？

![相片](../Images/ce812fc3b10679e576711754fed2317e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:15:31.587

将此添加到查询的末尾（针对您的特定查询进行调整）：

```
ORDER BY date ASC 
```

有关详细信息，请向我们展示您的查询和表描述或示例表行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:22:01.957

在您的 SQL 查询中，从您的日期中提取月份和年份，如下所示：

```
SELECT *, MONTH(date_field) AS month, YEAR(date_field) AS year FROM table 
ORDER BY date_field DESC 
```

然后在您的 php 视图中执行以下操作：

```
<div class="month-wrap">
    <? $i = 0; foreach ($data as $item){ ?>

        <? if ($i > 0 && $last_month != $item['month'] && $last_year != $item['year']){ ?>
            </div><div class="month-wrap">
            <?= $item['month'] ?>, <?= $item['year'] ?>
        <? } ?>

        <? if ($i == 0){ ?>
            <?= $item['month'] ?>, <?= $item['year'] ?>
        <? } ?>

        <img src="<?= $item['image'] ?>" />

        <?
            $last_month = $item['month'];
            $last_year = $item['year'];
        ?>

    <? $i++; } ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:21:45.683

如 dotancohan 建议的那样，将 ORDER BY date DESC（似乎您已经拥有）添加到查询的末尾，并使用您的 for 循环进行时间检查，例如

```
$date = "0";

while ($row= mysqli_fetch_array($result)) {

  if (date('dmY', $date) != date('dmY', $row['date'])) {
     echo "<p> NEW ROW, DATE: $row[date]</p>";
     $date = $row['date'];
  }

  echo '<img src="'.$row['picture']. '"/>' . "<br/>";
} 
```

该代码假定您在 mysql 中的日期是纪元格式（从 1970 年 1 月 1 日开始的秒整数）。似乎您只将月份和年份作为字符串，然后只需在 if 语句中使用**$date != $row['date']**而不用日期函数翻译它。

# java - Java Android：如何仅强制应用程序的一个实例（singleTop 无法正常工作）？

> ID：10131063
> 
> 赞同：0
> 
> 时间：2012-04-12T20:12:48.610
> 
> 标签：java, android, android-intent, android-manifest, instance

我是 Android Java 编程的新手。

我创建了一个简单的聊天应用程序。事情进展顺利，但我遇到了一个小障碍。我在清单的应用程序标签中设置了 launchMode="singleTop"，并覆盖了后退按钮，所以现在当用户按下后退或主页按钮时，聊天应用程序仍然在运行（在后台）。我还创建了一些通知，当出现新聊天时会在该状态栏中弹出（设置了 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP)），当用户单击通知时，它会带来已经运行的聊天应用程序到前面来。一切正常；在我从状态栏通知中调出应用程序后出现问题，然后单击返回或主页，然后选择从应用程序菜单或启动器上的快捷方式打开应用程序，

明白了吗？

如果应用程序没有运行并且我选择从应用程序菜单运行它，它会运行（不显示任何聊天，因为它没有收到任何聊天）。我收到一个聊天并在应用程序的屏幕上看到它，我按下后退按钮，我返回并通过应用程序菜单打开应用程序，它运行并具有以前的聊天消息。好的。现在我按下返回（所以应用程序在后台，但仍在运行），我收到一个聊天，它会弹出一个状态栏通知，我点击它，它会打开应用程序并显示之前的聊天消息。好的。现在我点击返回（所以应用程序在后台运行）。然后我通过应用程序菜单打开应用程序（就像我第一次和第二次一样），但这次它不显示以前的聊天消息，如果我收到聊天，它会发出 2 个通知声音，所以我知道已启动应用程序的新实例。

知道有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:29:19.973

在清单中将活动 launchMode 设置为 singleInstance。

# wpf - 以编程方式在 WPF、MVVM 中显示 Datagrid 行

> ID：10131073
> 
> 赞同：5
> 
> 时间：2012-04-12T20:13:13.443
> 
> 标签：wpf, mvvm, datagrid

我想以编程方式将一行数据网格带入视图。我有超过 100 行。当我创建一行时（我通过将一个项目添加到一个可观察的集合来执行此操作）我希望选择该新行并将其显示在视图中。我能够在我的代码中选择新行，但无法进行滚动。此外，我希望该行的第一个单元格处于编辑模式，以便用户可以输入文本。我正在遵循应用程序的 MVVM 模式，并希望在我的视图中保持零代码。我怎样才能做到这一点？

任何帮助或建议将不胜感激......

**更新：**

这就是我在 XAML 中所做的

```
<telerik:RadGridView ItemsSource="{Binding AllPartClasses}" 
                     SelectedItem="{Binding SelectedPartClassViewModel, Mode=TwoWay}"         
                     SelectionMode="Single" IsSynchronizedWithCurrentItem="True"> 
```

在我的视图模型中，我这样做了

```
void AddNewPartClassExecute()
    {
        PartClass newPartClass = new PartClass();
        PartClassViewModel tempPartClass = new PartClassViewModel(newPartClass);
        tempPartClass.IsInValid = true;
        AllPartClasses.Add(tempPartClass);
        SelectedPartClassViewModel = tempPartClass;
        Global.DbContext.PartClasses.AddObject(newPartClass);

        //OnPropertyChanged("AllPartClasses");
    }
public PartClassViewModel SelectedPartClassViewModel 
    { 
        get
        {  
            return _selectedPartClassViewModel;
        }
        set
        {
            _selectedPartClassViewModel = value;
            OnPropertyChanged("SelectedPartClassViewModel");
        }
    } 
```

它对我不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-29T19:30:23.083

对于常规 WPF `DataGrid`，您可以使用`ScrollIntoView`. 在您的视图中，将 SelectionChanged 事件连接到视图代码隐藏 cs 文件中的以下内容。

```
private void OnSelectionChanged( object sender, SelectionChangedEventArgs e )
{
    Selector selector = sender as Selector;
    DataGrid dataGrid = selector as DataGrid;
    if ( dataGrid != null && selector.SelectedItem != null && dataGrid.SelectedIndex >= 0 )
    {
        dataGrid.ScrollIntoView( selector.SelectedItem );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:16:30.790

遵循 MVVM 模式时，您不应执行特定于 UI 的操作，例如从代码中滚动。

解决方案很简单 - 只需将[DataGrid.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)绑定到 ViewModel 中的属性，当在 items 集合中添加新项目时，只需更新绑定到的属性，`SelectedItem`以便它引用刚刚添加的项目，并且数据网格应自动选择适当的行。

```
<DataGrid 
    ItemsSource="{Binding UnderyingItemsCollection}" 
    SelectedItem="{Binding RecentlyAddedItem, Mode=TwoWay}"
    IsSynchronizedWithCurrentItem="True"> 
```

# javascript - 为什么 RequireJS 不将 jQuery 传递给函数别名？

> ID：10131076
> 
> 赞同：8
> 
> 时间：2012-04-12T20:13:19.030
> 
> 标签：javascript, jquery, requirejs

我下载了最新[**版本**](http://requirejs.org/docs/download.html#latest)的[**示例项目**](http://requirejs.org/docs/download.html#samplejquery)。他们的[**文档暗示**](http://requirejs.org/docs/api.html#jsfiles)任何加载的内容都会传递到相关函数的参数列表中（以相应的顺序）。[](http://requirejs.org/docs/download.html#latest)**[**`RequireJS`**](http://requirejs.org/)[](http://requirejs.org/docs/api.html#jsfiles)**

 ****所以我决定尝试一下……但它似乎不起作用！

*   `Firebug`(net tab) 显示`jQuery`为正在加载：所以`RequireJS`obvioulsy 成功地完成了该部分
*   `Firebug`（控制台选项卡）显示“$ 不是函数”

**我的问题是：**为什么没有填充别名？

**我的代码看起来像：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script src="Scripts/require.js" type="text/javascript"></script>

    <script type="text/javascript">

        require(["scripts/jQuery/Core/jquery-1.7.2.min"], function ($) {

            // jQuery is not passed-into the function, so the alias fails!
            $(function () {
                var stop = "";
            });
        });

    </script>

</head>
<body>
    <form id="form1" runat="server">
    </form>
</body>
</html> 
```

**他们的样本看起来像：**

```
//Inside scripts/main.js
require(["some/module", "a.js", "b.js"], function(someModule) {
    //...
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T15:11:53.150

jQuery 应该通过特殊名称“jquery”加载，否则它不会注册自己（因为 jQuery 使用命名定义）。

```
// create an alias that points to proper file
require.config({
  paths : {
    jquery : "http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min"
  }
});

// require jquery usign the path config
require(["jquery"], function ($) {
    console.log($);
}); 
```

这就是为什么命名定义被认为是反模式的主要原因，并且应该只在需要时使用（当您在同一个文件中有多个模块时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T15:19:18.940

请务必阅读 RequireJS+jQuery 示例项目的“ [README.md](https://github.com/jrburke/require-jquery/blob/master/README.md) ”。使用 jQuery 有许多复杂性，您需要在初始设置期间决定如何最好地为您的项目解决它。但是，一旦您确定了最适合您的方法并实施了它，它就不应该再成为问题了。

许多复杂性还来自 jQuery 不是真正的 AMD 模块这一事实，如果它检测到定义函数可用，他们只是在代码库中进行了定义。例如，这意味着 jQuery 模块名称将始终为“jquery”（注意小写“q”），除非您自己包装它，因此如果您在配置中定义它的路径，则必须具有名为“jquery”的键（再次，使用小写的 'q')，否则会出现不匹配。当我们第一次在我们的项目上设置 RequireJS 时（我们将键命名为“jQuery”），这让我们有点吃惊。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:12:05.477

您的脚本文件夹是“脚本”还是“脚本”？

您正在请求“Scripts/require.js”以及“scripts/jQuery/Core/jquery-1.7.2.min”。看看 Firebug 的 Net 选项卡...我敢打赌你会在那里生成 404。****

# ruby-on-rails - Rails 3.2.1 缺少 AJAX 响应的即时变量；红宝石 1.9.3

> ID：10131080
> 
> 赞同：1
> 
> 时间：2012-04-12T20:13:36.813
> 
> 标签：ruby-on-rails, ajax

我有一个奇怪的问题。每当我执行 AJAX 请求时，我都会收到关于实例变量为“nil”的错误。似乎请求没有从控制器得到任何东西。

这已经在其他 PC 上工作了，我现在正在安装新的 ubuntu。有些设置可能是错误的。

我通过这个js函数。

```
jQuery.fn.mark_todo_done = function (){
  this.live('click', function() { 
    $('.spinning').show();
    var todo_id =  $(this).attr("id");

  $.getScript("/mark_todo_done/" + todo_id)
    })
}; 
```

它去这条路线 routes.rb

```
match "/mark_todo_done/:id" => "private#mark_todo_done", :as => :mark_todo_done 
```

而这种方法在

私人控制器

```
def mark_todo_done
    @firm = current_user.firm
    @todo = Todo.find(params[:id])
    @project = @todo.project
    if @todo.completed == true
      @todo.completed = false
    else
      @todo.completed = true
    end
    @todo.update_attributes(params[:todo])
    @done_todos = @project.todos.where(["completed = ?", true]).includes(:user)
    @not_done_todos = @project.todos.where(["completed = ?", false]).includes(:user) 
    respond_to do |format|
      format.js
    end
  end 
```

我收到此错误消息

```
ActionView::Template::Error (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
    1: 
    2: $("#todo_<%= escape_javascript( @todo.id.to_s) %>").remove();
    3: <% if @todo.completed == true %>
    4: $("#done_tasks").append("<%= escape_javascript(render(:partial => @todo)) %>");
    5: 
  app/views/private/mark_todo_done.js.erb:2:in `_app_views_private_mark_todo_done_js_erb___267824823023937232_51228900' 
```

我在所有 AJAX 请求上都收到类似的错误。有任何想法吗？

我的 application.js 中也有这个

```
jQuery.ajaxSetup({ 
  'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:55:52.847

解决方案

在私人控制器中摆脱对私人的调用

```
#private
def mark_todo_done
    @firm = current_user.firm
    @todo = Todo.find(params[:id])
    @project = @todo.project
    if @todo.completed == true
      @todo.completed = false
    else
      @todo.completed = true
    end
    @todo.update_attributes(params[:todo])
    @done_todos = @project.todos.where(["completed = ?", true]).includes(:user)
    @not_done_todos = @project.todos.where(["completed = ?", false]).includes(:user) 
    respond_to do |format|
      format.js
    end
  end 
```

希望它可以帮助某人...

# c# - 如何不在文本框中显示键

> ID：10131083
> 
> 赞同：0
> 
> 时间：2012-04-12T20:14:00.120
> 
> 标签：c#

我想知道如何解决我的小问题。我用 C# 进行计算并且有问题：

```
if (e.KeyCode == Keys.Add)
        {
            textBox1.Clear();
            IfNumbersExist();
            SelectedOperation = Operation.Add;
            IsSecondNumberBeingEntered = true;
        } 
```

所以问题是当我按下添加键时，文本框数据正在清除，但“+”仍然存在。如何清除整个文本框也不显示“+”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:16:02.343

在黑暗中拍摄的东西，但尝试在你的`if`声明中添加这个：

```
e.Handled = true; 
```

# html - 浏览器调整大小后出现空白

> ID：10131088
> 
> 赞同：3
> 
> 时间：2012-04-12T20:14:10.777
> 
> 标签：html, css

在我当前的项目中，我正在构建网站的平板电脑和移动版本，并在不同大小的浏览器中对其进行测试，尽管在调整浏览器大小时遇到​​了问题。

该网站的当前版本可在以下网址找到： http: [//beta.residencyradio.com](http://beta.residencyradio.com)

基本上，每当我调整浏览器的大小以检查它在平板电脑上的外观时，即使没有超过包含元素的宽度，也会在右侧呈现空白并出现 x 滚动条。

我几乎可以通过添加来解决这个问题，`overflow: hidden`但这会完全禁用 x 滚动，这是我不想要的。

我已经在所有主要浏览器上对此进行了测试，所有响应都相同，所以它一定与 CSS 有关，我不太确定，但它可能是我设法错过的非常简单的东西。

任何帮助将不胜感激！

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:37:27.187

正在创建该空白是因为您的`#second`div 被推到视口边界之外。与其使用 div 推送该 div，不如使用`margin-left`它`position:absolute;`来解决该问题。

现在是这样的：

```
#second .content {
    margin-left: 22.8125em;
} 
```

div的`.content`宽度是`60em`原样。

您可以改用这样的东西，它应该可以正常工作：

```
#second .content {
    left: 170px; /* adjust to your liking */
    position: absolute;
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:26:04.093

我认为....

更改您的 css 文件：

从：

```
html {
font-size: 16px;
overflow-y: scroll;
background: url("../images/bkgMAIN.jpg") repeat-y;
} 
```

至

```
html {
font-size: 16px;
overflow-y: scroll;
background: url("../images/bkgMAIN.jpg") repeat-y;
    background-size:100% 100%;
} 
```

当页面缩小时，看起来该图像（带有凉爽的渐变）没有水平拉伸

是这个吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T20:50:47.647

我通常用

```
 html {
  overflow-x:hidden;  
 } 
```

它应该可以工作并隐藏空白并重新调整站点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T18:39:20.523

我做了以下事情：

```
html, body {
    width: 100%;
    display: table;
} 
```

它消除了奇怪的空白，同时还允许在 x 方向上滚动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-04T02:04:53.410

试过了

```
html {
overflow-x:hidden;
} 
```

没用。但..

```
body {
overflow-x:hidden;
} 
```

做过。

# xslt - Diazo - 有条件地向主题元素添加一个类

> ID：10131092
> 
> 赞同：3
> 
> 时间：2012-04-12T20:14:42.833
> 
> 标签：xslt, diazo

仅当满足某些条件时，我才需要向来自主题的元素添加一个类。我已经尝试过[这个解决方案](https://stackoverflow.com/questions/6599993/adding-an-class-to-body-element-with-xdv)，通过替换为 Diazo 进行了`prepend`调整`before`：

```
<before css:theme=".main" if-content="not(//*[@id='portal-column-two'])"><xsl:attribute name="class"><xsl:value-of select="//*[@class='main']/@class"/> full</xsl:attribute></before> 
```

但我收到以下错误：

```
XSLTApplyError: xsl:attribute: Cannot add attributes to an element if children have been already added to the element. 
```

即使我删除了所有其他规则，只有`<theme>`规则和规则，我也会收到该错误`<before>`。

仅当内容中没有元素时，如何将类添加到主题元素`#portal-column-two`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:36:51.783

重氮替代物`prepend css:theme`是`before css:theme-children`，不是`before css:theme`。您的示例适用于该更改。

# java - Java/C++ - 从相机偏航（航向）和俯仰（无滚动）获取 3d 线

> ID：10131094
> 
> 赞同：2
> 
> 时间：2012-04-12T20:14:52.843
> 
> 标签：java, c++, math, 3d

我知道这样做的四元数方法。但最终这些方法需要我们将所有有问题的对象转换到相机的旋转“空间”中。

但是，看看数学，我确信必须有一种简单的方法来获得仅基于相机的 YAW（航向）和 PITCH 的直线的 XY、YZ 和 XZ 方程。

例如，给定视锥体的法线，例如 (sqrt(2), sqrt(2), 0)，您可以轻松地为 XY 平面构造线 (x+y=0)。但是一旦 Z（在这种情况下，Z 用于深度，而不是 GL 的 Y 坐标加扰）发生变化，计算就会变得更加复杂。

此外，给定应用旋转的顺序：偏航、俯仰、滚动；滚动根本不会影响视锥体的法线。

所以我的问题很简单。如何从 3 坐标视图法线（即归一化，即矢量长度为 1）或偏航（以弧度表示）、俯仰（以弧度表示）对到一组映射方向的三线方程穿越太空的“眼睛”？

笔记：

四元数我在这方面取得了成功，但是对于模拟中的每个实体来说，数学太复杂了，无法进行视觉检查，并且必须检查所有可见对象，即使进行各种检查以减少可见对象的数量也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:12:17.043

使用任何[流行的方法](http://en.wikipedia.org/wiki/Euler_angles#Matrix_orientation)从偏航和俯仰构造矩阵来表示相机旋转。矩阵元素现在包含各种有用的信息。例如（当使用通常的表示时）第三列的前三个元素将指向视图向量（进入或离开相机，取决于您使用的约定）。第二列的前三个元素将相对于相机指向“向上”。等等。

但是，很难自信地回答你的问题，因为你说的很多事情对我来说没有意义。例如，我不知道“一组通过空间映射'眼睛'方向的三线方程”是什么意思。如上所述，眼睛方向由矢量简单地给出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:41:52.333

```
 nx = (float)(-Math.cos(yawpos)*Math.cos(pitchpos));
 ny = (float)(Math.sin(yawpos)*Math.cos(pitchpos));
 nz = (float)(-Math.sin(pitchpos))); 
```

这得到了相机的法线。这假设偏航和俯仰以弧度为单位。

如果你有相机的位置（px，py，pz），你可以得到参数方程：

```
x = px + nx*t
y = py + ny*t
z = pz + nz*t 
```

您还可以构建这条线的 2d 投影：

```
0 = ny(x-px) + nx(y-py)
0 = nz(y-px) + ny(z-pz)
0 = nx(z-pz) + nz(x-px) 
```

我认为这是正确的。如果有人注意到不正确的加号/减号，请告诉我。

# vb.net - 超出聚合查询限制？

> ID：10131097
> 
> 赞同：3
> 
> 时间：2012-04-12T20:15:08.560
> 
> 标签：vb.net, dynamics-crm-2011, crm, fetchxml

我有一个两部分的问题：

**第一个问题**：我知道查询记录时有5000条记录的查询限制，出于性能原因，但是做聚合查询时有限制吗？如果是这样，它是什么？我只需要查询记录数，对于一个实体，我可以获得 39,000 多条记录的结果，但对于另一个实体，我会看到如下错误消息：

`System.ServiceModel.FaultException 1[Microsoft.Xrm.Sdk.OrganizationServiceFault]: AggregateQueryRecordLimit exceeded. Cannot perform this operation. (Fault Detail is equal to Microsoft.Xrm.Sdk.OrganizationServiceFault).`

我一直在网上寻找，但在聚合/计数查询的查询限制上找不到任何东西。

**第二个问题**：有没有一种简单的方法来查询大量记录的 COUNT 而不会影响性能？我不认为做一个计数应该需要太多的开销。如果有限制，我的想法是在循环中实现分页，并检索给定页面的计数，同时每次递增页码，直到返回 0 条记录。但是，当我尝试这样做时，它似乎忽略了初始标签的`page`and属性。`count``<Fetch>`

我想知道是否有更好/更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:27:44.120

对于您的第一个问题，我不能说太多，但看起来[MSDN 上的某个人可能已经找到了解决方法](http://int.social.microsoft.com/Forums/en-US/crmdeployment/thread/bcd50ac2-738b-4ce6-b4fc-a43ef34fe7af "Dynamics CRM 2011 - AggregateQueryRecordLimit 更改的性能影响")。请特别参阅链接的论坛帖子以获取实际解决方案。

对于第二个问题，`COUNT`还是比较容易处理的。有关大量示例，请参阅[有关 FetchXML 聚合的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/gg309565.aspx#count "数数")

```
<fetch distinct='false' mapping='logical' aggregate='true'> 
    <entity name='opportunity'> 
       <attribute name='name' alias='opportunity_count' aggregate='count'/> 
    </entity> 
</fetch> 
```

为该查询生成的 SQL 如下所示：

```
SELECT
    COUNT(*) AS opportunity_count
FROM
    Opportunity 
```

# node.js - 变量在 node.js http 回调函数中增加了两次

> ID：10131112
> 
> 赞同：5
> 
> 时间：2012-04-12T20:15:34.233
> 
> 标签：node.js, callback, increment

我在玩 node.js，当你运行这段代码时会发生一些奇怪的事情：

```
var http = require("http");
var i = 0;

function onRequest(request, response) {  
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("You're number " + i++);
  response.end();
}

http.createServer(onRequest).listen(8888); 
```

我希望它的行为类似于页面浏览量计数器，但是每次刷新浏览器选项卡时，我都会得到似乎`i=i+2`不是简单增量的结果。有人可以向我解释这种行为吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T20:17:30.830

您的浏览器也正在访问您的服务器`favicon.ico`。每个请求递增`i`，请求`favicon.ico`计数。

使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[WireShark](http://www.wireshark.org/)等工具自己查看此行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:17:41.523

我敢打赌，浏览器喜欢一遍又一遍地发送网站图标请求。

# javascript - 谷歌闭包：故障类型检查参数应该是函数

> ID：10131118
> 
> 赞同：3
> 
> 时间：2012-04-12T20:15:56.810
> 
> 标签：javascript, types, google-closure-compiler, typechecking

我正在搞乱谷歌闭包编译器中的类型检查。类型系统似乎很有用，即使不是最复杂的。我对大多数限制感到满意，但这似乎有点奇怪。

我看到为作为参数传递的函数提供类型注释的问题。特别是，如果传递函数的类型本身不固定。因此，例如，我想编写类似这样的代码：

```
/**
 * @param {Array} xs
 * @param {function(*) : boolean} f
 * @return {Array}
 */
var filter = function (xs, f) {
    var i, result = [];
    for (i = 0; i < xs.length; i += 1) {
        if (f(xs[i])) {
            result.push(v);
        }
    }
    return result;
};

filter([1,2,3], function (x) { return x > 1; }); 
```

将“--js_error checkTypes”传递给编译器，我得到这个：

```
test.js:17: ERROR - left side of numeric comparison
found   : *
required: number
    filter([1,2,3], function (x) { return x > 1; });
                                          ^ 
```

那么，怎么了？我可以指定一个参数应该是一个带有一个参数的函数，而不指定该参数的类型吗？我做错了什么，还是这只是类型检查器的限制？

* * *

Chad 建议对传递给 filter 的匿名函数进行注释，以帮助进行类型推断：

```
filter([1,2,3], function (x) { return /** @type {number} */ (x) > 1; }); 
```

这适用于 filter()，但似乎有点不满意（为什么编译器需要那个注解？），并且不适用于更复杂的情况。例如：

```
/**
* @param {Array|string} as
* @param {Array|string} bs
* @param {function(*, *): *} f
* @return {Array}
*/
var crossF = function (as, bs, f) {};

/**
* @param {Array|string} as
* @param {Array|string} bs
* @return {Array}
*/
var cross = function (as, bs) {};

var unitlist = crossF(['AB', 'CD'], ['12', '34'], cross); 
```

似乎这里所有内容的类型对编译器来说应该是显而易见的。事实上它直接抱怨匹配函数参数的类型：

```
test.js:52: ERROR - actual parameter 3 of crossF does not match formal parameter
found   : function ((Array|null|string), (Array|null|string)): (Array|null)
required: function (*, *): *
var unitlist = crossF(['ABC', 'DEF', 'GHI'], ['123', '456', '789'], cross); 
```

下面接受的答案解决了这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T00:53:03.237

将过滤器的声明从“ `*`”（所有）更改为“ `?`”（未知）。编译器只检查已知类型。因此，当编译器试图在调用点推断函数表达式的函数签名时，它会将参数“x”解析为“？” （未知类型）（可以用作任何类型），而不是使用前通常需要限制的“*”（所有可能的类型）：

```
/**
 * @param {Array} xs
 * @param {function(?) : boolean} f
 * @return {Array}
 */
var filter = function (xs, f) {
    var i, result = [];
    for (i = 0; i < xs.length; i += 1) {
        if (f(xs[i])) {
            result.push(v);
        }
    }
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T23:15:50.000

当函数上没有注释时，编译器假定它可以接受任意类型的可变数量的参数并返回任何类型。出于这个原因，许多外部函数的注释如下：

```
/** @return {undefined} */
function MyFunction() {} 
```

这样他们将正确地键入检查。

对于您的情况，最简单的解决方案是将参数类型转换为函数内的数字（注意所需的额外括号）：

```
filter([1,2,3], function (x) { return /** @type {number} */ (x) > 1; }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:34:13.643

一种常见的方法是使用类型注释`{!Function}`，它接受任何函数对象。

ALL 类型 (*) 的问题已在此处报告：[问题 708](http://code.google.com/p/closure-compiler/issues/detail?id=708)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T16:53:03.687

这对我来说似乎是一个错误。你应该在这里归档： [http ://code.google.com/p/closure-compiler/issues/list](http://code.google.com/p/closure-compiler/issues/list)

如果您不指定类型，它应该是“未知”（？）而不是“任何”（*）。编译器不（或不应该）检查未知类型的使用。

# perl - 如何从文件中以特定字符开头和结尾的部分中删除某些停用词

> ID：10131121
> 
> 赞同：0
> 
> 时间：2012-04-12T20:16:03.237
> 
> 标签：perl, word

```
.我 1
.T
爱丽丝漫游仙境
她突然跟着它穿过兔子洞
她走了很长一段路，来到一个奇怪的大厅，里面有许多大小不一的锁着的门。
她发现一把小钥匙打开了一扇小到她无法通过的门。
.B
CACM 狼狗 1958 年 12 月
。一种
玻璃市，AJ
萨梅尔森，K.
.N
CA581203 JB 1978 年 3 月 22 日晚上 8 点 28 分
。X
100 5 1
123 5 1
164 5 1
.I 2
.T
数字计算机的重复减法求根
其中的内容导致她缩小得太小而无法触及钥匙
她留在了桌子上。
一个上面写着“吃我”的蛋糕让她长大。
.B
CACM 1958 年 12 月
。一种
苏盖，I.
.N
CA581202 JB 1978 年 3 月 22 日晚上 8 点 29 分
。X
2 5 2
2 5 2
2 5 2
```

现在上面的文本是2个文件的内容，新文件从.I开始（后跟一个数字）我需要在.T＆.B，.B＆.A，.A＆.N之间的文本中停止， .N &.X 并删除 .X 和新文档开头之间的所有文本。即.I（后跟一个数字）

“输出应该看起来像”

```
.I 1
.T
Alice wonderland
follows rabbit hole suddenly 
falls long way curious hall locked doors sizes 
door small fit through
.B
CACM wolf dog December, 1958
.A
Perlis, A. J.
Samelson,K.
.N
CA581203 JB March 22, 1978  8:28 PM
.X
.I 2
.T
Extraction Roots Repeated Subtractions Digital Computers
contents cause shrink
left table
cake with EAT causes grow
.B
CACM December, 1958
.A
Sugai, I.
.N
CA581202 JB March 22, 1978  8:29 PM
.X 
```

我需要对出现在 .T 和 .B 、 .B 和 .A 、 .A 和 .N 、 .N 和 X 之间的文本进行停词

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:04:54.117

第一步是将每个块放入一个体面的数据结构中。下面的脚本就是这样做的。拥有`%segments`后，您可以根据需要修改和重新组合每个块。

```
#!/usr/bin/env perl

use strict; use warnings;
use Data::Dumper;

my %stops = map { $_ => 1 } qw(a all of in);
run(\*DATA, \%stops);

sub run {
    my $fh = shift;
    my $stops = shift;

    local $/ = '.I';

    my $pat = qr{
        ^[ ] (?<I> [0-9]+) \n
        ^[.] T \n (?<T> .+)
        ^[.] B \n (?<B> .+)
        ^[.] A \n (?<A> .+)
        ^[.] N \n (?<N> .+)
        ^[.] X \n (?<X> .+)
    }xms;

    while (my $chunk = <$fh>) {
        chomp $chunk;
        next unless $chunk;

        if ($chunk =~ $pat) {
            my %segments = %+;
            print Dumper \%segments;
        }
    }
} 
```

# facebook - fb-comments 加载器图像不会消失

> ID：10131122
> 
> 赞同：3
> 
> 时间：2012-04-12T20:16:05.870
> 
> 标签：facebook, image, loader

我有这个简单的 html 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:fb="http://ogp.me/ns/fb#" xmlns:og="http://ogp.me/ns#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1"; 
```

fjs.parentNode.insertBefore(js, fjs); }（文档，'脚本'，'facebook-jssdk'））；

评论列表显示不完整，加载器图像永远不会停止或消失。会发生什么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:10:20.927

我发现向页面添加 OpenGraph 标记可以解决问题。Facebook 似乎使用这些标签来链接回页面上的评论。我还看到该问题出现在本地环境中，但在托管时会自行解决。

# internet-explorer - 控制/指定 KML 到 Google 地球的 URI

> ID：10131129
> 
> 赞同：3
> 
> 时间：2012-04-12T20:16:29.013
> 
> 标签：internet-explorer, firefox, kml, google-earth, data-uri

我有一个生成 Google 地球 KML 文件的 Web 应用程序。我正在尝试使用 URI 生成下载，以避免必须访问服务器。

问题是跨浏览器。它可以在 Chrome 中运行，*几乎*可以在 FireFox 中运行，并且似乎根本无法在 Internet Explorer 中执行。

这是代码：

```
domKML = geItem.getKml(); 

uriContent = "data:application/vnd.google-earth.kml+xml; charset=UTF-8'," + encodeURIComponent(domKML); 

window.open(uriContent, 'ROSE Download' + studyName); 
```

通过“工作”，我的意思是当调用浏览器是 Chrome 时，数据会在 Google 地球中下载和呈现（如果需要就开始。）

“几乎可以工作”是指当浏览器是 FireFox 时，会下载数据但文件扩展名为 .part；它拒绝访问 Google 地球

“似乎没有执行”我的意思是 IE 坐在那里嘲笑我。

有什么想法，哦，interwebz 的巫师？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:08:09.213

据我所知，这在 IE 中不起作用。

*   在 IE7 及更低版本中，不支持 DataURI
*   在 IE8 中，DataURI 长度限制为 32kb，并且仅支持图像、链接和 css 的数据 URI。
*   在 IE9 中，DataURI 长度限制为 4gb，但同样只能用于图像，不能用于导航或 Javascript 生成的文件下载。

此外，在 Firefox 中，无法设置 DataURI 的扩展名，抱歉。

# search - C# 中带有 UTF-8 字符集的 IMAP 搜索命令

> ID：10131131
> 
> 赞同：1
> 
> 时间：2012-04-12T20:16:35.370
> 
> 标签：search, encoding, utf-8, imap, 8-bit

[C# Imap 搜索命令，带有 á,é 等特殊字符](https://stackoverflow.com/questions/7426661/c-sharp-imap-search-command-with-special-characters-like-a-e)

我正在尝试在 C# 中实现上述帖子中提到的逻辑，以在 gmail 中实现基于非 ascii 的搜索。成功登录 imap.gmail.com 后，我与服务器进行了以下交易：

```
(C -> S) Encoding.Default.GetBytes("A4 UID SEARCH CHARSET UTF-8 TEXT {4}\r\n");
(C <- S) "+ go ahead\r\n"
(C -> S) Encoding.Default.GetBytes("αβγδ\r\n");
(C <- S) "* SEARCH 72\r\nA2 OK SEARCH completed (Success)" 
```

但是，服务器响应表示的电子邮件与我提供的搜索词完全无关。这只发生在关键字中使用非 ascii 字符时，我相信我的编码有问题。

我也尝试过使用`Encoding.Ascii`，但后来我得到的搜索结果更加偏离目标。

发送字符串文字的正确方法是什么：`"αβγδ\r\n"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:25:47.037

对于搜索词，您使用的是所谓的*literal*。文字的长度必须以八位字节指定。在您的示例中并非如此。UTF-8 编码的字符串“αβγδ”由四个以上的八位字节组成。

因此，您应该在将长度发送到服务器之前对搜索词进行编码。

我对 C# 了解不多。我用 Python 做一个例子：

```
search_term = 'Grüße'
encoded_search_term = search_term.encode('UTF-8')
length = str(len(encoded_search_term)).encode('ascii')

send(b'. UID SEARCH CHARSET UTF-8 TEXT {' + length + b'}\r\n')
read_until(br'^\+ .*$')

send(encoded_search_term + b'\r\n')
read_until(br'^\. OK .*$') 
```

使用此代码，搜索命令会返回带有文本“Grüße”的电子邮件的 UID：

```
C: b'. UID SEARCH CHARSET UTF-8 TEXT {7}\r\n'
S: b'+ Ready for literal data\r\n'
C: b'Gr\xc3\xbc\xc3\x9fe\r\n'
S: b'* SEARCH 1 3 4\r\n'
S: b'. OK UID SEARCH completed\r\n' 
```

如果我使用字符 ( `len(search_term)`) 中的长度而不是八位字节 ( ) 中的编码长度`len(encoded_search_term)`，IMAP 服务器会报告错误：

```
C: b'. UID SEARCH CHARSET UTF-8 TEXT {5}\r\n'
S: b'+ Ready for literal data\r\n'
C: b'Gr\xc3\xbc\xc3\x9fe\r\n'
S: b'. BAD expected end of data instead of "\\237e"\r\n' 
```

请注意，我没有使用 Gmail 进行测试。

# ios - 与可重复使用的单元格混淆（滚动后影响的单元格不正确）

> ID：10131133
> 
> 赞同：2
> 
> 时间：2012-04-12T20:16:38.780
> 
> 标签：ios, ios4, uitableview

我确信这个问题不是唯一的，但我还没有找到其他资源来解决它。实际上，这些已经引起了更多的混乱。如果可以的话，请照亮。

问题的症结在于我想在带有自定义单元格的 7 节 30ish 行表的一个单元格中滑动（-50）一个 UILabel。滚动后，其他几行正在移动此标签，并且随着滚动的继续，它们继续移动得越来越远。

您会注意到负 50 x 坐标在 2 个位置进行测试。第一个，在单元格 == nil 中，永远不会被调用。为什么？？我认为那是解决这个问题的地方。

即使单元格为零，也不确定如何调用 initWithStyle （不适用于自定义）或 initWithCoder （在情节提要中创建）。??

```
 NSArray *a = [[userDetailData objectAtIndex:[indexPath section]] objectAtIndex:[indexPath row]];

    NSString *key = [[[a objectAtIndex:0] allKeys] objectAtIndex:0];
    NSString *value = [[a objectAtIndex:0] valueForKey:key];

    static NSString *CellIdentifier = @"MasterCell";

    UsersTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // If cell does not exist, create it, otherwise customize existing cell for this row
    if (cell == nil) {
        // Create cell
        cell = [[UsersTableViewCell alloc] initWithCoder:<#(NSCoder *)#>reuseIdentifier:CellIdentifier];

        // Configure cell:
        NSLog(@"Key: %@   %d, %d", key, [indexPath section], [indexPath row]);
        // Prepare the date field to move left for checkmark or ex-mark

        if ([key isEqualToString:@"Date"]) {
            CGRect frame = cell.comboLabel.frame;
            frame.origin.x -= 50;
            cell.comboLabel.frame = frame;
            NSLog(@"In Date...  minus 50");
        }
    }

    // Customize cell:
    CGRect frame = cell.comboLabel.frame;
    if ([key isEqualToString:@"Date"]) {
        frame.origin.x -= 50;
        cell.comboLabel.frame = frame;
        NSLog(@"   %d, %d\n   cell: %@\n", [indexPath section], [indexPath row], cell);
    }
    else {
        frame.origin.x += 0;
        cell.comboLabel.frame = frame;
    }

    // Reset color
    cell.comboLabel.textColor = [UIColor blackColor];

    // Set the Item
    cell.nameLabel.text = [NSString stringWithFormat: @" %@",key];
    // Give the cell an accessory indicator
    ..... continue on with logic. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:34:15.370

cell 不是 nil ，因为您只是在 if 语句之前将其分配给了一个可重用的单元格。

我会考虑制作一个带有“日期单元”之类标识符的辅助原型单元，如果您正在创建的单元具有关键“日期”，则制作第二组可重复使用的单元

这里：

```
NSArray *a = [[userDetailData objectAtIndex:[indexPath section]] objectAtIndex:[indexPath row]];

NSString *key = [[[a objectAtIndex:0] allKeys] objectAtIndex:0];
NSString *value = [[a objectAtIndex:0] valueForKey:key];

static NSString *CellIdentifier = @"MasterCell";
static NSString *DateCellIdentifier = @"Date Cell";

UsersTableViewCell *cell;

//Customize Cell

if ([key isEqualToString:@"Date"]) {

    cell = [tableView dequeueReusableCellWithIdentifier:DateCellIdentifier];
    CGRect frame = cell.comboLabel.frame;

    frame.origin.x -= 50;
    cell.comboLabel.frame = frame;
    NSLog(@"   %d, %d\n   cell: %@\n", [indexPath section], [indexPath row], cell);
}
else {
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    frame.origin.x += 0;
    cell.comboLabel.frame = frame;
}

// Reset color
cell.comboLabel.textColor = [UIColor blackColor];

// Set the Item
cell.nameLabel.text = [NSString stringWithFormat: @" %@",key];
// Give the cell an accessory indicator
..... continue on with logic. 
```

事实上，如果您只是在情节提要上自定义原型单元格，您甚至可能不需要对单元格进行大部分自定义。

# tcl - tcl/informix 获取 db 并以表格形式显示

> ID：10131138
> 
> 赞同：1
> 
> 时间：2012-04-12T20:17:03.740
> 
> 标签：tcl, informix

我必须在 tcl 中编写这段代码，我真的很沮丧，因为这是我第一次使用 tcl。我需要显示如下内容：![在此处输入图像描述](../Images/e37981aa6263ca2d81e56b14a63eda9a.png)

我正在使用 tcl/informix，我正在为如何实现上述目标而苦苦挣扎。这是我写的伪代码

```
 select event_date,attempts_cnt,success_cnt,fail_cnt from cc_web_ppv_counts WHERE 
        event_id='123' 
    {
        get $sd_attempt_cnt
        get $sd_success_cnt
        get $sd_fail_cnt
            get event_date

        select event_date,attempts_cnt,success_cnt,fail_cnt from cc_web_ppv_counts WHERE 
            event_id='125' 
        {
            get $hd_attempt_cnt
            get $hd_success_cnt
            get $hd_fail_cnt

            $total_attempts=$sd_attempt_cnt + $hd_attempt_cnt;
            $total_success=$sd_success_cnt + $hd_success_cnt;
            $total_fail=$total_attempts -$total_success;
            $success_rate=($total_success/$total_attempts)*100;
            $hd_success_rate=($hd_success_cnt/total_success)*100;
            $sd_success_rate=($sd_success_cnt/total_success)*100;
        }
    } 
```

注意对于每个 event_date（例如今天），只有 2 条记录。分别用于 sd 和 hd。因此必须在输出中动态显示日期。

如果有人能指出 tcl 中的一些示例，这些示例可以像上面那样提取数据并显示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:10:02.220

可能具有适当 ODBC 驱动程序的[tclodbc](http://wiki.tcl.tk/2151)是一种方法。

至于问题的第二部分，答案很大程度上取决于您如何定义“显示”。

# selenium - 如何让 Webdriver 2.21 与 Firefox 11 一起工作

> ID：10131139
> 
> 赞同：2
> 
> 时间：2012-04-12T20:17:04.497
> 
> 标签：selenium, webdriver

我正在通过 NuGet 使用 2.21 C# 版本的 Webdriver。根据发行说明，它应该与 Firefox 11 一起使用。（http://selenium.googlecode.com/svn/trunk/java/CHANGELOG）

用于 Webdriver 2.20 和 Firefox 10 的代码现在与 Webdriver 2.21 和 Firefox 11 中断。

解决方法是什么？

简短的错误是：Test 'RMIS_WebFrameworkTestsWebDriver.FrameworkTest_MyClass.MyTest' failed: OpenQA.Selenium.WebDriverException : Failed to start up socket within 45000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:54:25.457

我终于解决了我自己（而且相当愚蠢）的问题。简而言之，我在我的测试项目中使用 NuGet 来更新 WebDriver 代码。我没有注意到的是，我有一个单独引用的 WebDriver DLL 的早期版本（在使用 NuGet 之前）。我没有注意到，尽管 NuGet “成功”安装了 WebDriver，但我的代码仍在引用旧的 dll。

我认为新的 WebDriver 代码不适用于 Firefox 11，但实际上我的代码使用的是旧版本的 WebDriver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:56:04.857

可能[http://code.google.com/p/selenium/](http://code.google.com/p/selenium/)是直接询问 Selenium 开发人员的更好地方。就我个人而言，我也看到 FF11 在最新版本的 Selenium 上存在问题。

# apache-flex - 当视图状态在 Flex 中改变时运行一个函数

> ID：10131143
> 
> 赞同：1
> 
> 时间：2012-04-12T20:17:23.067
> 
> 标签：apache-flex, actionscript, flash-builder, mxml

我正在学习 Flex 并尝试制作一个简单的 RPG 来练习。我正在使用视图状态在屏幕之间切换。现在我有一个 HomeView.mxml 显示我的角色信息，InventoryView.mxml 显示我的库存物品，以及 EquipmentView.mxml 显示装备物品。他们每个人都有各自的视图状态。

在我的主 mxml 文件中，我为角色创建了一个全局变量，并为游戏中的项目创建了一个 ArrayCollection。它在 mxml 中为 Inventory 和 Equipment 创建 2 个标签，当我单击标签时，它会调用一个单击处理程序，该处理程序设置 currentState="EquipmentView" 或 "InventoryView"

这有效并且状态改变并且各自的视图正确显示。

我的问题出在我的 EquipmentView 状态。当我第一次进入状态时，它有一个 creationComplete 函数，它显示我的设备的图像并设置一个点击处理程序。当我单击该项目时，它会“取消装备”它并将其从设备列表中删除并删除图像。这也可以正常工作，但是当我转到我的库存视图并“装备”一个项目并返回到 EquipmentView 时，图像不显示。我有一个标签，它计算我的设备列表变量的长度，当我切换视图时它是准确的，但我无法让图像再次显示。

当视图更改时，有没有办法调用我的 displayEquippedItems() 函数（最初在 creationComplete 上调用）？

这是我的功能：

```
protected function displayEquippedItems():void
        {
            Alert.show("Displaying Items");
            for (var i:int = 0; i<c.equippedItems.length; i++)
            {

                var item:Item = c.equippedItems.getItemAt(i) as Item;
                switch (item.type)
                {                       
                    case 'Weapon':
                        var il:ItemImage = new ItemImage(item);
                        il.source = "../assets/sword.gif";
                        il.scaleX=.25;
                        il.scaleY=.25;
                        il.horizontalCenter=-80;
                        il.verticalCenter=-30;
                        il.addEventListener(MouseEvent.CLICK, equippedItemClicked);
                        equipGroup.addElement(il);                          
                        break;
                    default:
                        Alert.show("Didnt find a weapon");
                        break;
                }
            }
        } 
```

ItemImage 是我定义的一个类，它扩展了 Image 组件，并且只为它显示的 Item 设置了一个变量“item”，这样我就可以获得名称、类型（并最终更改图像源） 此外，equipGroup 只是我在其中定义的一个组用于保存设备项目的 mxml

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:35:05.820

有几种方法可以完成我相信你想要的。

首先是查看[updateComplete 事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#event%3aupdateComplete)。而 creationComplete 只会在组件的创建周期完成后执行一次；每次重绘组件时都会触发 updateComplete 事件。我毫不怀疑，这个活动会如你所愿；但是，您需要小心运行代码太多次。很多事情都可能导致组件重绘，听起来你有一个非常具体的用例。

要看的第二件事是[演出](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#event%3ashow)活动。只要组件可见，就会触发；当状态更改为显示此组件的状态时应该触发。

回答您的具体问题；只要状态更改完成，您就可以使用[stageChangeComplete](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#event%3astateChangeComplete)事件运行代码。在您的情况下，我相信这可能与演出活动类似；但你会在不同的地方听它。stateChangeComplete 事件是您在包含状态的组件中监听的事件。show 事件是您在包含库存的组件中监听的事件；我假设它是控制状态的组件的子组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T03:14:46.173

您还可以使用`enterState`由对象调度的事件`State`...您可以像这样在 MXML 中添加事件侦听器：

```
<s:states>
    <s:State name="myState" enterState="myEventHandler()"/>
</s:states> 
```

与 'updateComplete' 事件相比，更好的是`FlexEvent.UPDATE_COMPLETE`每次组件完成执行完整的“Flex 组件生命周期”时都会调度该事件。因此，根据您正在执行的操作，您可能会注意到该事件被分派（并且您的事件处理程序被触发）的次数超出了您的需要。

通过使用`enterState`事件处理程序，您的代码只会在进入该特定状态时执行:)

# spring - 使用 HibernateTemplate (Spring) 的 HQL 查询

> ID：10131146
> 
> 赞同：0
> 
> 时间：2012-04-12T20:17:33.293
> 
> 标签：spring, hibernate, hql

这是我的第一篇文章，所以请多多包涵。我正在尝试从使用 HibernateTemplate 的方法中执行 HQL 查询。我这样做的原因是因为实际的表有更多的列，但我只对两个感兴趣。查询的结果用于稍后执行 updateOrSave 操作。

所以类结构看起来像：

```
class XYZDAO {
   ...
   ...

   public void createReview(....) {
      ...
      ...
      class Temp {
        private final float rating;
        private final int count;

        @SuppressWarnings("unused")
        public Temp(float rating, int count)
        {
            this.rating = rating;
            this.count = count;
        }
        public float getRating()
        {
            return rating;
        }
        public int getCount()
        {
            return count;
        }          
      }
      List<Temp> avgRatingWrapper = getHibernateTemplate().find("SELECT new Temp(AVG(RATING), COUNT(*)) FROM RATINGS WHERE ADVENTURE_ID = ?", Integer.parseInt(adventureId));
      ...
      ...
   }
} 
```

当我运行代码时发生以下异常：

```
Caused by: org.hibernate.hql.ast.QuerySyntaxException: RATINGS is not mapped [SELECT new Temp(AVG(RATING), COUNT(*)) FROM RATINGS WHERE ADVENTURE_ID = ?] 
```

我已经为 RATINGS 表提供了完整的映射休眠映射：

```
<hibernate-mapping>
    <class name="com.xyz.abc.dao.hibernate.Ratings" table="ADV_ADMN.RATINGS">
        <id name="id" type="int" column="ID">
            <generator class="seqhilo">
                <param name="sequence">ADV_ADMN.RATINGS_ID_SEQ</param>
                <param name="allocationSize">1</param>
            </generator>
        </id>
        <version name="timestamp" type="timestamp">
            <column name="TIMESTAMP" length="19" not-null="true" />
        </version>
        <property name="adventureId" type="int">
            <column name="ADVENTURE_ID" not-null="true" />
        </property>
        <property name="reviewer" type="string">
            <column name="REVIEWER" length="45" not-null="true" />
        </property>
        <property name="rating" type="java.lang.Float">
            <column name="RATING" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

现在我知道我需要在 hibernate.hbm.xml 文件中执行某种映射，或者为 Temp 类提供注释以映射 RATINGS 表。我想知道是否有任何其他方法可以解决这个问题。我想如果你使用 Session.createSqlQuery(....) 那么你可以向它添加可以规避问题的实体。但我不确定在 HibernateTemplate 中有没有办法做到这一点。

非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:35:04.393

代码没有经过测试，但我认为你的意思是这样的。创建 SQLQUery，并将标量定义为字符串，并使用 getHibernateTemplate().execute() 函数。

```
return getHibernateTemplate().execute(new HibernateCallback<List>() {

        public String doInHibernate(Session s)
                throws HibernateException, SQLException {
            SQLQuery sql=s.createSQLQuery("SELECT AVG(RATING) as r, COUNT(*) as c FROM RATINGS WHERE ADVENTURE_ID = ?");
                sql.setParameter(0, adventureId);
            sql.addScalar("r");
            sql.addScalar("c");
            return sql.list();
        }
    }); 
```

如果是 HQL 和 getHibernateTemplate().find 你想用的，然后使用 "select ... from com.xyz.abc.dao.hibernate.Ratings"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:31:48.937

`HibernateTemplate.find()`不采用 SQL 查询，采用 HQL 查询。只要您可以在 HQL 中表达您的查询，这样做会更好。

否则，您需要`Session.createSqlQuery()`在传递给的回调中使用`HibernateTemplate.executeFind()`.

**也可以看看：**

*   [第 16 章 HQL：Hibernate 查询语言](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html)
*   [第 18 章原生 SQL](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querysql.html)

# mysql - mysql哪个值具有最大计数

> ID：10131150
> 
> 赞同：0
> 
> 时间：2012-04-12T20:18:05.120
> 
> 标签：mysql

我正在尝试从表中提取对于不同字段的每个不同值出现最大次数的值。例如，如果数据集是：

```
a   x
a   x
a   y
b   x
b   y
c   x
c   y
c   y 
```

查询将产生

```
a   x   2
b   x   1
c   y   2 
```

我的实验使用以下内容：

```
CREATE TABLE IF NOT EXISTS `maxcount` (
  `what` varchar(1) DEFAULT NULL,
  `loc` varchar(1) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

和

```
INSERT INTO `maxcount` (`what`, `loc`) VALUES
('a', 'x'),
('a', 'x'),
('a', 'y'),
('b', 'x'),
('b', 'y'),
('c', 'x'),
('c', 'y'),
('c', 'y'); 
```

第一部分很简单：

```
select what, loc, count(loc) howmany from maxcount group by what, loc; 
```

我还没有想出的是如何使用它来为每个“what”获取一行，显示具有最大计数和最大值的 loc 的值。

解决方案不是：

```
select what, loc, max(howmany) from (
select what, loc, count(loc) howmany from maxcount group by what, loc)
A group by what; 
```

因为它产生：

```
a x 2
b x 1
c x 2 
```

非常感谢您的指导！

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:20:28.833

检查一下...为了避免引用同一组结果，我创建了一个表...您应该在处理后将其删除，或者将 maxcounttemp 替换为`(SELECT what, loc, count(loc) howmany FROM maxcount GROUP BY what, loc) as tblX`我尝试将其设为 TEMPORARY，但您不能使用如果外部表是同一个，它在子查询中。

```
CREATE TABLE `maxcounttemp` (
  `what` varchar(1) DEFAULT NULL,
  `loc` varchar(1) DEFAULT NULL,
  `howmany` int DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO maxcounttemp (
  SELECT what, loc, count(loc) howmany FROM maxcount GROUP BY what, loc
);

SELECT mct.what, mct.loc, mct.howmany
FROM maxcounttemp mct 
WHERE (mct.what, mct.howmany) IN (
  SELECT mct2.what, MAX(mct2.howmany) 
  FROM maxcounttemp mct2 
  WHERE mct2.what = mct.what 
  GROUP BY mct2.what
) GROUP BY (mct.what); 
```

希望它有所帮助...请记住， bx 或 by 在此查询中同样可能...

# javascript - Rails：确保来自 jQuery 的 $.post 在 Controller 中作为 format.json 接收

> ID：10131153
> 
> 赞同：1
> 
> 时间：2012-04-12T20:18:13.543
> 
> 标签：javascript, ruby-on-rails, ajax, controller, response

我有一个 jQuery 脚本，它试图像这样发布数据：

```
$.post({
    $('div#location_select').data('cities-path'),
    { location_string: $('input#city_name').val() },
}); 
```

这可行，但由于某种原因，服务器将其作为 HTML 请求而不是 JS 请求接收。是什么赋予了？这是我的控制器中的响应块：

```
if @city.save
    respond_to do |format|
        format.html { redirect_to @city }
        format.json { render :json => @city, :status => :ok }
    end
else
    respond_to do |format|
        format.html { render :new }
        format.json { render :json => { :error => "Incorrect location format, please input a city and state or country, separated by a comma." }, :status => :unprocessable_entity }
    end
end 
```

您如何确保 Ajax 请求到达 Controller 并由`format.js`响应者处理？

* * *

**更新：**当我更改`$.post`为`$.ajax`并专门定义了它的工作数据类型时：

```
$.ajax({
  type: 'POST',
  url: $('div#location_select').data('cities-path'),
  data: { location_string: $('input#city_name').val() },
  dataType: 'json'
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:32:49.240

您是否从 routes.rb 中的路线传递格式？

```
"controller/action/(.:format)" 
```

# css - 以下结构的 CSS 选择器帮助

> ID：10131157
> 
> 赞同：0
> 
> 时间：2012-04-12T20:18:27.200
> 
> 标签：css, selenium, css-selectors, spock, geb

我必须找到嵌套在表下的锚“a”，类为`table.ic-table-creditReportProduct table tr`. 我试过但似乎没有用。任何可能存在问题的想法或其他引用它的方式。

**注意**：我不能使用其中包含**j_idt**的 id，因为它们是自动生成的。

![在此处输入图像描述](../Images/98d8d3ad3c31116434d0af78b3c4587e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:21:06.230

```
table.ic-table-creditReportProduct table tr a 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:53:57.770

`.ic-table-creditReportProduct a`应该做得很好。无需指定`table`，`tr`因为它是显而易见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:01:54.647

实际上，这取决于这些链接的其他位置，以及您需要它们样式的位置。

以下将为您网页中的所有锚元素设置样式：

```
a {} 
```

这只会为表格中的锚元素设置样式：

```
table.ic-table-creditReportProduct a {} 
```

这只会为嵌套表中的锚元素设置样式：

```
table.ic-table-creditReportProduct table a {} 
```

# c# - 使用反射时如何忽略属性

> ID：10131162
> 
> 赞同：3
> 
> 时间：2012-04-12T20:19:07.150
> 
> 标签：c#, reflection

我的班级中有一个公共财产，当给出以下标志时，我应该如何标记它（某些属性）以被忽略

```
BindingFlags.DeclaredOnly | 
BindingFlags.Instance | 
BindingFlags.NonPublic | 
BindingFlags.Public 
```

我需要使用带有参数的 dll 方法：对象和绑定标志，所以我需要以某种方式标记我的属性以被此方法忽略

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:23:10.110

我认为您混淆了 BindingFlags 和 CustomAttributes 的角色。BindingFlags 根据它们是否是 、 等来查找`private`事物`static`。

如果您想忽略消费代码中的某个属性，您需要更改该消费代码以忽略具有与其关联的特定自定义属性的属性。

如果您无权访问使用代码，则没有任何方法可以让它看不到那里的属性。不过，根据代码的编写方式，可能会有一些解决方法。例如，如果代码基于特定类型参数进行搜索，您可以创建一个抽象基类来容纳您希望它关心的所有属性，然后为您的实际实现扩展该类，为您的应用添加一些额外的属性方便。

或者，您可以创建一个 DTO 来表示您想要传达给您正在调用的方法的属性，并将适当的属性从您的原始对象复制到该 DTO 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:23:14.140

您的标志不会返回静态属性。

```
class Foo
{
  public static int Bar { get; set; }
} 
```

**编辑**你已经说过你不想改变行为。您的 dll 是否采用对象或类型？如果是一种类型，您可以使用继承来“隐藏”此方法中的属性。

假设你现在有：

```
class Foo
{
  public int X {get;set;}
  public int Y {get;set;}
} 
```

并且您的代码期望`Foo`具有`X`and `Y`。如果您的 dll/实用程序采用类型，那么我们可以制作`Foo`derived `Bar`。假设我们不希望实用程序看到“X”，而只看到“Y”。

```
class Bar
{
  public int Y {get;set;}
}

class Foo : Bar
{
  public int X {get;set;}
} 
```

// 在你的实用程序调用中

```
utility.Baz(foo.GetType().BaseType); // <- Base here is Bar, which does not have X 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:23:50.427

在通话期间忽略它的唯一方法是使用`Type.FindMembers`，但这可能需要更多的工作，而不仅仅是后过滤它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:28:01.657

我认为自定义属性在这里是合适的。使用属性装饰您希望忽略的成员，并将您用于检查属性的代码包装在一个例程中，该例程将清除已装饰的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:37:26.377

您可以使用简单的扩展方法来做到这一点：

```
public static class ExtensionMethods
{
    public static PropertyInfo[] GetNonPublicProperties(this Type t) {
        return t.GetProperties(BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Public).Where(prop => prop.GetAccessors(true).Where(mi => mi.IsPublic == false).Count() != 0).ToArray();
    }
} 
```

然后只需使用即可`Type.GetNonPublicProperties`。

# android - Android - 画布显示/隐藏带有倒计时的图片

> ID：10131163
> 
> 赞同：0
> 
> 时间：2012-04-12T20:19:18.257
> 
> 标签：android, canvas, countdown

我还是 Canvas 的新手。我想要做的是创建一个倒计时，对于每个刻度，都会生成一个随机布尔值。如果为真，show.png 将显示，否则 hide.png 将显示。

基本上，我的游戏是 Whack-A-Mole，我仍在尝试对单个痣进行此操作。到目前为止，这是我的代码，我知道它不会工作，我仍处于“实验”阶段。我将如何改进这一点？如果没有倒计时，画布就会出现，但是当我添加倒计时和“如果出现=真/假”时，它就不起作用了。

```
public class DrawingTheBall extends View{

    Bitmap show;
    Bitmap hide;
    int x;
    int y;

    public DrawingTheBall(Context context) {
        super(context);
        show = BitmapFactory.decodeResource(getResources(), R.drawable.show);
        hide = BitmapFactory.decodeResource(getResources(), R.drawable.hide);
        x = 0;
        y = 0;
    }

    @Override
    protected void onDraw(final Canvas canvas) {
        super.onDraw(canvas);

        final Random aRandom = new Random();

        new CountDownTimer(30000, 1000) {
             public void onTick(long msUntilFinished){

                 boolean appear = aRandom.nextBoolean();
                 if (appear){
                     Paint p = new Paint();
                     canvas.drawBitmap(show, x, y, p);
                 }else{
                     Paint p = new Paint();
                     canvas.drawBitmap(hide, x, y, p);
                 }
             }
             public void onFinish(){

             }
          }.start();

          invalidate();
    }

} 
```

## ------------------

@user387184

我必须再次初始化变量吗？它表示 MyCountDownTimer 类型的方法 myDrawRoutine(boolean) 从未在本地使用。这是我的新 CountDownTimer.java：

```
public class MyCountDownTimer extends CountDownTimer{

    Bitmap show;
    Bitmap hide;
    int x;
    int y;
    Canvas canvas;

    public MyCountDownTimer(int millisInFuture, int countDownInterval) {
        super(millisInFuture, countDownInterval);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub
    }

    @Override
    public void onTick(long millisUntilFinished) {
        // TODO Auto-generated method stub
    }

    private void myDrawRoutine(boolean appear) {
        if (appear){
            Paint p = new Paint();
            canvas.drawBitmap(show, x, y, p);
        }else{
            Paint p = new Paint();
            canvas.drawBitmap(hide, x, y, p);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:43:11.077

试试这样...

在您的主代码中创建并启动倒数计时器：

```
MyCountDownTimer counter = new MyCountDownTimer(30000,1000);

counter.start(); 
```

然后分别创建 CountDownTimer 类：

```
public class MyCountDownTimer extends CountDownTimer{

public MyCountDownTimer(long millisInFuture, long countDownInterval) {
super(millisInFuture, countDownInterval);
}

@Override
public void onFinish() {
...whatever you want to do when finished...
}

@Override
public void onTick(long millisUntilFinished) {
  boolean appear = aRandom.nextBoolean();
  myDrawRoutine(appear);
}
}

private void myDrawRoutine(boolean appear) {
  if (appear){
                 Paint p = new Paint();
                 canvas.drawBitmap(show, x, y, p);
             }else{
                 Paint p = new Paint();
                 canvas.drawBitmap(hide, x, y, p);
             }

} 
```

# sql - 加入聚簇表显示比非聚簇表更大的成本？

> ID：10131169
> 
> 赞同：3
> 
> 时间：2012-04-12T20:19:39.947
> 
> 标签：sql, oracle, oracle10g

我在集群上创建了一个集群和两个`emp`表`sep`。

现在，当我进行简单查询时...

```
explain plan select * from emp_cluster join dep_cluster using (dno) 
```

...成本是 26。

`emp_heap`我在堆（和）上创建了另外两个表，`dep_heap`当我这样做时......

```
explain plan select * from emp_heap join dep_heap using (dno) 
```

...成本只有 15。

这比集群少。我在emp表中插入了33000条记录，在department表中插入了99条记录。我知道在加入集群中表现良好，但在我的情况下它是相反的......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:22:47.937

可能的原因：

*   统计数据过期
*   聚簇表碎片或填充因子低

请张贴两个计划。

# java - 突出显示 JSF 页面中的一行不起作用

> ID：10131173
> 
> 赞同：0
> 
> 时间：2012-04-12T20:20:05.453
> 
> 标签：java, javascript, jquery, html, jsf-2

我想突出显示 JSF 表中的一行。这是代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" var="item">

                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>                  

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

        <script type="text/javascript">
              $("tr").not(':first').hover(
              function () {
                $(this).css("background","#787878");
              }, 
              function () {
                $(this).css("background","");
              }
            );
        </script>

    </h:body>
</html> 
```

问题是当我在第 1、2 和 3 列上移动光标时，突出显示有效

![在此处输入图像描述](../Images/3acac63427b1988c2352a4f8dfba1ba6.png)

但是当我将光标移动到第 4、5 和 6 列时，这些行没有突出显示。

![在此处输入图像描述](../Images/a5282aedaf695f83a9053546eebe4c5b.png)

我不明白为什么行没有突出显示。你能帮我找出错误吗？

最良好的祝愿

**编辑**这是干净的 HTML 代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
            <title>DX-57 History Center</title>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <link rel="shortcut icon" type="image/x-icon" href="resources/css/themes/nvidia.com/images/favicon.ico" />
            <link href="resources/css/helper.css" media="screen" rel="stylesheet" type="text/css" />
            <link href="resources/css/dropdown.css" media="screen" rel="stylesheet" type="text/css" />
            <link href="resources/css/default.advanced.css" media="screen" rel="stylesheet" type="text/css" />

            <!--[if lt IE 7]&gt;
            &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery/jquery.js&quot;&gt;&lt;/script&gt;
            &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery/jquery.dropdown.js&quot;&gt;&lt;/script&gt;
            &lt;![endif]-->
            <!-- / END -->
        <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script></head><body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ul class="dropdown dropdown-horizontal" style="margin: 0 auto">
                <li><a href="/SR_57-1.0-SNAPSHOT/UserNav.jsf" class="dir">Home</a>
                    <ul>
                        <li><a href="Dashboard.jsf">Dashboard</a></li>
                    </ul>       
                </li>
                <li><a href="Sessions.jsf" class="dir">Sessions</a>
                </li>
                <li><a href="Application.jsf" class="dir">Application</a>
                    <ul>                
                        <li><a href="Glassfish.jsf">Glassfish</a></li>
                    </ul>
                </li>
                <li><a href="Linux.jsf" class="dir">Linux</a>                   
                </li>
                <li><a href="Database.jsf" class="dir">Database</a>                    
                </li>                   
            </ul>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"><img src="resources/images/logo_sessions.png" alt="Dashboard" style="position:relative; top:-20px; left:9px;" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">
<form id="form" name="form" method="post" action="/HM_57-1.0-SNAPSHOT/Sessions.jsf" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="form" value="form" />

                        <!-- The sortable data table --><table id="form:dataTable">
<thead>
<tr>
<th scope="col">
<script type="text/javascript" src="/HM_57-1.0-SNAPSHOT/javax.faces.resource/jsf.js.jsf?ln=javax.faces&amp;stage=Development"></script>
<a href="#" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:dataTable:j_idt15':'form:dataTable:j_idt15'},'');return false">Account Session ID</a></th>
<th scope="col"><a href="#" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:dataTable:j_idt18':'form:dataTable:j_idt18'},'');return false">User ID</a></th>
<th scope="col"><a href="#" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:dataTable:j_idt21':'form:dataTable:j_idt21'},'');return false">Activity Start Time</a></th>
<th scope="col"><a href="#" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:dataTable:j_idt24':'form:dataTable:j_idt24'},'');return false">Activity End Time</a></th>
<th scope="col"><a href="#" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:dataTable:j_idt27':'form:dataTable:j_idt27'},'');return false">Activity</a></th>
</tr>
</thead>
<tbody>
<tr>
<td>1313</td>
<td>test</td>
<td>Sun Apr 08 20:21:44 EEST 2012</td>
<td>Sun Apr 08 20:21:46 EEST 2012</td>
<td>test

</td>
</tr>
<tr>
<td>23</td>
<td>werw</td>
<td>Tue Apr 10 15:20:14 EEST 2012</td>
<td>Tue Apr 10 15:20:16 EEST 2012</td>
<td>23</td>
</tr>
<tr>
<td>231257</td>
<td>323r</td>
<td>Tue Apr 10 15:20:51 EEST 2012</td>
<td>Tue Apr 10 15:21:05 EEST 2012</td>
<td>23</td>
</tr>
<tr>
<td>231432</td>
<td>23223r23</td>
<td>Tue Apr 10 15:20:41 EEST 2012</td>
<td>Tue Apr 10 15:20:55 EEST 2012</td>
<td>32r</td>
</tr>
<tr>
<td>232</td>
<td>test</td>
<td>Mon Apr 09 15:13:33 EEST 2012</td>
<td>Mon Apr 09 15:13:37 EEST 2012</td>
<td>test</td>
</tr>
<tr>
<td>2323165</td>
<td>2r23r</td>
<td>Tue Apr 10 15:20:49 EEST 2012</td>
<td>Tue Apr 10 15:21:04 EEST 2012</td>
<td>3r</td>
</tr>
<tr>
<td>232337</td>
<td>3r</td>
<td>Tue Apr 10 15:20:46 EEST 2012</td>
<td>Tue Apr 10 15:21:01 EEST 2012</td>
<td>23</td>
</tr>
<tr>
<td>232388</td>
<td>323r</td>
<td>Tue Apr 10 15:20:44 EEST 2012</td>
<td>Tue Apr 10 15:20:59 EEST 2012</td>
<td>r</td>
</tr>
<tr>
<td>233222</td>
<td>32r23r2</td>
<td>Tue Apr 10 15:20:42 EEST 2012</td>
<td>Tue Apr 10 15:20:57 EEST 2012</td>
<td>32r23</td>
</tr>
<tr>
<td>23329</td>
<td>2323</td>
<td>Tue Apr 10 15:20:47 EEST 2012</td>
<td>Tue Apr 10 15:21:02 EEST 2012</td>
<td>r2</td>
</tr>
</tbody>
</table>

                        <!-- The paging buttons --><input type="submit" name="form:j_idt30" value="first" disabled="disabled" /><input type="submit" name="form:j_idt31" value="prev" disabled="disabled" /><input type="submit" name="form:j_idt32" value="next" /><input type="submit" name="form:j_idt33" value="last" />Page 1 / 2
                        <br />

                        <!-- The paging links -->1<a href="#" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:j_idt36:1:j_idt37':'form:j_idt36:1:j_idt37'},'');return false">2</a>
                        <br />

                        <!-- Set rows per page --><label for="form:rowsPerPage">
Rows per page</label><input id="form:rowsPerPage" type="text" name="form:rowsPerPage" value="10" maxlength="3" size="3" /><input type="submit" name="form:j_idt41" value="Set" /><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="4271939619595356833:-5469736783226522469" autocomplete="off" />
</form>                  

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

        <script type="text/javascript">
              $("tr").hover(
              function () {
                $(this).css("background","#787878");
              }, 
              function () {
                $(this).css("background","");
              }
            );
        </script></body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:59:30.753

您还可以使用这些 js 函数调用：

```
onmouseover="this.style.cursor='default';this.style.backgroundColor='#F1F1F1';" 
onmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:35:10.630

移除第二个DIV层——settingsdiva

# facebook - Facebook 应用画布页面：找不到页面

> ID：10131176
> 
> 赞同：0
> 
> 时间：2012-04-12T20:20:24.607
> 
> 标签：facebook, facebook-apps

我试图用画布页面创建一个 facebook 应用程序。当我尝试使用其网址访问该页面时，它按预期工作：http: [//dyndns.patrikelfstrom.se/johan/fb/fysiosteo](http://dyndns.patrikelfstrom.se/johan/fb/fysiosteo)

但是当我尝试使用 facebook 访问它时：[https ://apps.facebook.com/387677594596809](https://apps.facebook.com/387677594596809)

“此网页无法使用”

这是因为我托管页面的服务器不支持 SSL 吗？还是我错过了其他东西？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:29:40.000

你是对的。

前往：[http](http://apps.facebook.com/387677594596809/) ://apps.facebook.com/387677594596809/ 完美运行。

# python - 访问元组中值的有效方法（python）

> ID：10131180
> 
> 赞同：2
> 
> 时间：2012-04-12T20:20:51.567
> 
> 标签：python, class, tuples

我有一个返回元组的函数

```
x = (1, 2, 3, 4, 5, 6, 7, 8, 9) 
```

我还有一门需要 10 个总 args 的课程（包括 self）

我希望元组能够填充类中的参数，但如果我只是把

```
y = Class(x) 
```

它返回错误

```
> TypeError: __init__() takes exactly 10 arguments (2 given) 
```

我知道可以只使用

```
y = Class(x[0], x[1], ... x[8]) 
```

但这似乎非常冗长。有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T20:22:47.150

使用星号[解压缩参数列表](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)

```
Class(*x) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T20:23:24.937

你需要[解压](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)它：

```
>>> def foo(a, b, c, d, e, f, g, h, i, j):
...     return a
... 
>>> x = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
>>> foo(*x)
1 
```

# wcf - 如何在客户端和自托管 WCF 服务之间创建会话

> ID：10131182
> 
> 赞同：0
> 
> 时间：2012-04-12T20:20:58.383
> 
> 标签：wcf, session, cookies, httpcontext, self-hosting

我的目标是使用 cookie 和他们的会话来跟踪客户。这是必需的，因为我不喜欢 WCF 的内置身份验证过程，它们只是在浏览器中提供通用登录弹出窗口 [ [1](https://stackoverflow.com/questions/6172992/sessions-in-self-hosted-wcf-services) ]。我正在寻找一个登录页面并让用户能够注销。我根本不想使用 IIS 来托管我的服务。HttpContext 是维护会话/cookie 的唯一方法吗？这在自托管 WCF 服务中是否可行？这可能`WebHttpBinding`吗？我能找到的与这篇文章最接近的帖子是：[Sessions in self-hosted WCF services](https://stackoverflow.com/questions/6172992/sessions-in-self-hosted-wcf-services) but it is unsatisfactory.

[1](https://stackoverflow.com/questions/6172992/sessions-in-self-hosted-wcf-services)![身份验证弹出窗口](../Images/4ac439671992339356bc6654915381cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:31:44.877

我在这里回答了我自己的问题：

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/67a1ea91-af62-44f8-9a6b-0982c7d05da8](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/67a1ea91-af62-44f8-9a6b-0982c7d05da8)

# jquery - jquery 触发任何事件

> ID：10131192
> 
> 赞同：3
> 
> 时间：2012-04-12T20:21:33.390
> 
> 标签：jquery

有没有办法在任何事件发生火灾时说

```
 $('#foo').bind('click', function() {
          alert($(this).text());
     }); 
```

我正在尝试为某个事件测试一段代码，而不是进入那里。只是希望它在任何事件之前触发。

```
 $('#foo').bind('ANY', function() {
          alert($(this).text());
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:25:43.190

没有监听所有事件的简写。

您可以开箱即用的最接近的事情是手动指定它们：

```
$('#foo').bind('blur change click dblclick focus focusin focusout hover keydown ...', function() {
    alert($(this).text());
}); 
```

请注意，插件可能会触发自己的事件，可能是命名空间的。您无法在不了解这些事件并手动指定它们的情况下收听这些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:26:39.237

您可以在绑定函数的第一个参数中指定用空格分隔的每个事件。这将绑定到所有事件。要查看 jquery 涵盖的所有事件，请访问文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:36:31.367

我认为这是不可能的，但您可以使用 Firebug 查看绑定到页面元素的所有事件。

打开 Firebug，然后在控制台中写入以下内容：

```
$("#foo").data("events"); 
```

这应该显示绑定到 #foo 元素的任何事件。

# c - 给定获得其中一个数字的概率，如何在一个范围内生成一个随机数

> ID：10131198
> 
> 赞同：1
> 
> 时间：2012-04-12T20:21:50.663
> 
> 标签：c

我试图在 -1 到 6 的范围内生成一个随机数，但是每次我生成一个随机数时，在该范围内获得一个数字的概率都以百分比给出。例如，在百分比列表中，第一个百分比具有生成 6 的概率，第二个百分比具有生成 5 的概率，依此类推。数字必须随机生成。我正在尝试用 C 编写代码。谢谢你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:27:10.210

你可以得到一个介于 0 到 100 之间的随机数，然后检查它落入的百分比范围并为其分配相应的值。

例如：

```
 0 - 5  : -1
    5 - 25 :  0
    25 - 31:  1
    31 - 48:  2
    48 - 50:  3
    50 - 75:  4
    75 - 87:  5
    87 - 100: 6 
```

**编辑：**

要实现这一点，您需要一个或两个数组，一个存储百分比边界（在这种情况下表示 5、25、31、48、50、75、87）和另一个存储输出值的数组（如果输出完全随机的，在这里它们是连续的，你不需要第二个数组）。
然后你会接到电话`rand() * 100.0 / RAND_MAX`以获得 0 到 100 之间的随机浮点数或 0 到 100`rand() % 100 + 1`之间的随机整数。

有了这个，您可以使用二进制搜索方法来查找在 O(log n) 时间内对应的百分比范围。使用索引，您可以找到相应的输出（通过数组或函数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:29:23.843

这是家庭作业吗？为了对人类有信心，我假设不会；）

所以我的意思是，你所有的百分比加起来应该是 100 对吧？您可以生成一个介于 0 和 100 之间的数字，并查看它属于哪个括号。

即如果你的百分比是 [10,20,35,15,10,10]

然后第一个括号是“< 10”，因此生成的任何小于 10 的数字都会产生 6

```
x < 10 --> 6
10 <= x < (10+20) --> 5
(10+20) <= x < (10+20+35) --> 4
(10+20+35) <= x < (10+20+35+15) --> 3 
```

等等。您希望生成一个介于 1 和 100 之间的随机浮点数，以满足例如 11.9 之类的精确百分比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:57:48.710

制作一个包含 100 个元素的数组，用 -1 到 6 填充它，这取决于每个元素需要多少权重。例如，如果您需要 -1 来获得 15% 的命中率，则使用 -1 填充 15 个元素。现在生成一个从 1 到 100 的随机数，然后简单地查找数组，就可以得到加权的实际结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:27:32.230

我确信还有其他可能更好的方法来执行此操作，但我想到的是：根据您的百分比创建一个包含每个数字（-1 到 6）的适当副本的数组。然后随机选择数组中的一个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:29:35.730

我认为最简单的方法是考虑以下类比：

如果你有一条线[0,1]，你可以认为从1到4生成一个数字相当于将线分成4段，S_1 = [0,1/4], S_2 = [1/4,2 /4]，S_3 = [2/4,3/4]，S_4 = [3/4,1]。这样，当你从 [0,1] 生成一个数字时，如果它落在段 S_i 上，则生成的数字是 i。

如果你想为每个数字分配不同的概率，比如 p_i，你只需要根据 p_i 将段划分为不同的大小。

例如，对于 p_1 = 0.1 的 1、p_2 = 0.4 的 2、p_3 = 0.2 的 3 和 p_4 = 0.3 的 4，您可以使用分段 S_1 = [0,p_1]、S_2 = [p_1,p_1+p_2]， S_3 = [p_1+p_2,p_1+p_2+p_3] 和 S_4 = [p_1+p_2+p_3,p_1+p_2+p_3+p_4]

然后你在[0,1]上生成一个统一的随机数，并测试它是否落入S_i。

# xcode - Xcode- 将数据存储在 Core Data 或 SQLite 中？

> ID：10131204
> 
> 赞同：1
> 
> 时间：2012-04-12T20:22:12.420
> 
> 标签：xcode, sqlite, core-data

我正在使用 Xcode 4.3-如果我试图将用户的位置（纬度和经度）存储在数据库中并将他们的位置更新到数据库，假设他们每行驶 30 米，使用核心数据或 SQLite 会更好吗？目前我正在使用核心数据，但我遇到了很多麻烦。我需要决定是否需要进行切换并仅使用 SQLite。有什么建议吗？*注：用户不需要在手机上查看自己的位置数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T02:22:28.497

您对核心数据的“麻烦”表明您对该 API 不是很熟悉。在 iOS 上，默认情况下，核心数据无论如何都使用 sqlite 作为其数据的底层持久存储，因此在您的情况下，这可能不是性能和细节问题，而是理解概念。如果您感觉更自在并且“在家”直接处理 sqlite 或使用第三方 sqlite objecitive-c 包装框架，请坚持下去，完成工作。开箱即用，核心数据免费为您提供的是在处理数据时更高级别的抽象（基本上都是关于对象和谓词，以及一些将数据绑定到视图的助手）和内存管理。不利的一面是，你必须自学所有这些东西，如果你弄错了，它会在你身上崩溃，所以RTFM。核心数据：一旦你拥有了专业知识，那就是天堂，但获得专业知识的途径是一个陡峭的学习曲线。

你想要一个坚持直接使用 sqlite 访问的建议，因为你觉得你可以处理吗？去。

如果你有时间自学 Core Data 是如何工作的，为什么它不是关系数据库等等，去吧，这是值得的，并且会让你的开发人员的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:27:36.590

虽然它们都是您尝试做的合法应用程序，但 SQLite 和 CoreData 之间的重要区别在于 SQLite 可以是关系型的。如果你需要一个关系表，那么我会说一个开关可以合理化，但如果你有一个简单的非规范化数据收集，你应该可以使用 CoreData。如果为您的 iOS 应用程序设置 SQLite 相对简单，值得一试。

更多信息可以在这里找到：[when-to-use-sqlite-instead-of-core-data-on-the-iphone/](http://answers.oreilly.com/topic/1959-when-to-use-sqlite-instead-of-core-data-on-the-iphone/)

# mysql - MySQL 如何只为下表中的每对值选择最高值？

> ID：10131206
> 
> 赞同：1
> 
> 时间：2012-04-12T20:22:19.927
> 
> 标签：mysql, select, max

我有下表：

```
+----+---------+---------+-------+
| ID | FARM_ID | GATE_ID | SCORE |
+----+---------+---------+-------+
|  1 |       1 |       1 |   100 |
|  2 |       2 |       1 |   100 |
|  3 |       5 |       5 |   100 |
|  4 |       4 |       1 |    16 |
|  5 |       4 |       3 |    16 |
|  6 |       4 |       5 |    23 |
|  7 |       5 |       1 |   100 |
|  8 |       4 |       1 |    95 |
|  9 |       4 |       3 |    91 |
| 10 |       4 |       5 |   100 |
| 11 |       5 |       1 |    20 |
| 12 |       4 |       1 |   100 |
| 13 |       4 |       3 |    95 |
| 14 |       4 |       5 |    95 |
| 15 |       4 |       6 |    91 |
| 16 |       5 |       1 |    16 |
| 17 |       4 |       1 |    95 |
| 18 |       4 |       2 |    91 |
| 19 |       4 |       3 |   100 |
| 20 |       4 |       5 |    91 |
| 21 |       4 |       6 |    95 |
| 22 |       4 |       1 |    91 |
| 23 |       4 |       2 |    95 |
| 24 |       4 |       3 |    95 |
| 25 |       4 |       4 |    91 |
| 26 |       4 |       6 |   100 |
| 27 |       4 |       2 |   100 |
| 28 |       4 |       3 |    91 |
| 29 |       4 |       4 |    95 |
| 30 |       4 |       6 |    95 |
| 31 |       4 |       2 |    95 |
| 32 |       4 |       4 |   100 |
| 33 |       4 |       6 |    91 |
| 34 |       5 |       3 |   100 |
| 35 |       5 |       6 |   100 |
| 36 |       5 |       2 |   100 |
| 37 |       5 |       4 |   100 |
| 38 |       3 |       1 |    91 |
| 39 |       3 |       5 |   100 |
| 40 |       3 |       1 |   100 |
| 41 |       3 |       3 |    91 |
| 42 |       3 |       5 |    91 |
| 43 |       3 |       1 |    91 |
| 44 |       3 |       3 |   100 |
| 45 |       3 |       6 |    91 |
| 46 |       3 |       2 |    91 |
| 47 |       3 |       3 |    91 |
| 48 |       3 |       6 |   100 |
| 49 |       3 |       2 |   100 |
| 50 |       3 |       4 |    91 |
| 51 |       3 |       6 |    91 |
| 52 |       3 |       2 |    91 |
| 53 |       3 |       4 |   100 |
| 54 |       8 |       1 |   100 |
| 55 |       7 |       1 |   100 |
| 56 |       6 |       1 |   100 |
+----+---------+---------+-------+ 
```

**期望的结果：**

我希望只显示每`FARM_ID--GATE_ID`对的最高分。（因此上面应该有 23 个唯一的对）。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:24:04.500

```
select farm_id, gate_id, max(score)
from table
group by farm_id, gate_id 
```

?

# javascript - 尝试在 js.erb 文件中使用控制器变量时抛出 NoMethodError

> ID：10131208
> 
> 赞同：0
> 
> 时间：2012-04-12T20:22:27.743
> 
> 标签：javascript, ruby-on-rails, asset-pipeline, ruby-on-rails-3.2

在我的资产中，我有一个名为 的文件`maps.js.erb`，基本上只有以下（调试）内容：

```
alert("<%= @map.width %>"); 
```

这个 JS 文件是通过`show.html.erb`属于地图的视图加载的。

```
<%= javascript_include_tag params[:controller] %>
<h1><%= @map.title %></h1>
… 
```

HTML 文件本身显示地图的标题，例如当浏览到 时`/maps/1/`，因为`@map`在控制器中定义。但是，一旦我包含 JS 文件，我就会收到以下错误：

> ### 地图中的 NoMethodError#show
> 
> 显示`…/app/views/maps/show.html.erb`第 1 行提出的位置：
> 
> nil 的未定义方法“标题”：NilClass（在`…/app/assets/javascripts/maps.js.erb`）

*   为什么`@map`在文件中不可用`js.erb`？
*   我还能如何访问控制器中定义的这个实例变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:30:38.527

Ryan Bates 就该主题做了一个截屏视频——你可能想看看：

[http://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

* * *

在`html.erb`文件中，您可以定义变量：

```
<%= javascript_tag do %>
  window.productsURL = "<%=j products_url %>";
  window.products = <%=raw Product.limit(10).to_json %>;
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:15:12.790

您不能在公共 js 文件中评估 @map.title，因为该文件在稍后调用控制器之前生成并提供一次，然后被缓存。

但是，您可以在 HTML 页面中使用 javascript。可以使用 <%= @map.title %> 提供的常量值生成该 javascript。

将 javascript 放在部分中，并将其呈现在页面中的标记中。

我在他们的网站上看到美国银行这样做。他们在页面上的 javascript 数组中生成所有帐户交易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:32:26.393

不要忘记使用`escape_javascript()`.

# jsf - 将 ap:fileupload 与表单的其余部分一起提交

> ID：10131211
> 
> 赞同：0
> 
> 时间：2012-04-12T20:22:36.833
> 
> 标签：jsf, jsf-2, primefaces

也许我在这里遗漏了一些明显的东西，但我似乎无法弄清楚如何使这项工作。

我有 ap:dialog，其中包含一个文本字段、一个选择一个菜单、一个自动完成、一个编辑器和一个文件上传对象。这个想法是用户将在字段中输入一些信息，可选择将一些文件附加到文件上传，然后按下对话框上的提交按钮，该按钮将调用我的支持 bean，进行一些处理并处理将文件获取到他们需要去的地方. 我想使用高级文件上传器，以便用户可以附加多个文件。当用户按下提交按钮时，所有数据都正确提交，除了文件上传器。上传侦听器永远不会被触发。

我在网上做了一些搜索，发现一些引用可能能够通过调用 wigdetVar.upload() 来触发上传，但这只会引发 javascript 错误，进一步搜索表明该功能可能不再可用。

所以问题是，如何从提交按钮提交文件以及表单的其余部分？对话框的代码如下。

```
<p:dialog widgetVar="newthreaddialog" modal="true" header="New Thread for #{collaborationBacking.patientName}" dynamic="true"
                       resizeable="false">
              <div class="whitebox">
                 <h:form id="newthreadform" enctype="multipart/form-data">
                    <p:panelGrid>
                       <p:row>   
                          <p:column>
                             <p:messages/>
                             <h:outputLabel for="threadtitle" value="Thread Title: "/>
                             <p:inputText id="threadtitle" label="Thread Title" value="#{newCollabThreadBacking.title}" required="true"/>
                          </p:column>
                          <p:column>
                             <h:outputLabel for="threadtype" value="Type: "/>
                             <h:selectOneMenu id="threadtype" label="Thread Type" value="#{newCollabThreadBacking.type}">
                                <f:selectItems value="#{newCollabThreadBacking.typeList}"/>
                             </h:selectOneMenu>
                          </p:column>
                       </p:row>

                       <p:row>
                          <p:column colspan="2">
                             <h:outputLabel for="addressedTo" value="To: "/>
                             <p:autoComplete id="addressedTo" value="#{newCollabThreadBacking.addressedTo}"
                                                   completeMethod="#{newCollabThreadBacking.completeAddress}"
                                                   var="practice"
                                                   itemValue="#{practice}"
                                                   itemLabel="#{practice.name}"
                                                   converter="practiceConverter"
                                                   forceSelection="true"/>
                          </p:column>
                       </p:row>

                       <p:row>
                          <p:column colspan="2">
                             <p:editor value="#{newCollabThreadBacking.content}" label="Message Content" required="true"/>
                          </p:column>
                       </p:row>

                       <p:row>
                          <p:column colspan="2">
                             <p:fileUpload widgetVar="uploader" fileUploadListener="#{newCollabThreadBacking.fileUpload}"/>
                          </p:column>
                       </p:row>

                       <p:row>
                          <p:column colspan="2">
                             <span class="submit">
                                <p:commandButton id="submitthread" value="Submit" action="#{newCollabThreadBacking.saveThread}"
                                                          oncomplete="newThreadResult(xhr, status, args)"
                                                          onclick="uploader.upload();"
                                                          process="@form" update="@form"/>
                             </span>
                          </p:column>
                       </p:row>                              
                    </p:panelGrid>
                 </h:form>
              </div>

              <p:ajax event="close" listener="#{collaborationBacking.reloadThreads}" update="threadtable newthreadform"/>
           </p:dialog> <!-- newthreaddialog --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:20:55.560

您是否添加了文件上传过滤器？您需要在 web.xml 文件中添加一个 fileUpload 过滤器才能将文件上传到服务器。尝试将以下内容添加到您的 web.xml

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

# php - 从数组中的文件名中提取基名

> ID：10131213
> 
> 赞同：3
> 
> 时间：2012-04-12T20:22:38.473
> 
> 标签：php, arrays, extract, explode

我有以下字符串的数组。首先我使用explode“\n”和如下输出。

```
[1]=> string(121) "/Microsoft/Windows/Ravemp2300Handler/DeviceArrival/a.exe" 
[2]=> string(139) "/Microsoft/Windows/EventHandlers/Ravemp2300Arrival/b.exe" 
[3]=> string(89) "/Microsoft/Windows/DeviceHandlers/Rio600Handler/c.exe" 
[4]=> string(103) "/Microsoft/Windows/Rio600Handler/EventHandlers/d.exe" 
```

以下数组将被提取 a.exe、b.exe 等，如下所示。

```
[1]=> string(121) "a.exe" 
[2]=> string(139) "b.exe" 
[3]=> string(89) "c.exe" 
[4]=> string(103) "d.exe" 
```

有人知道如何解决这个问题吗？对此，我真的非常感激。先感谢您。

我得到了解决方案，感谢 Leven 和 Emil Vikström 提供的替代解决方案。

```
$array2 = array_map('basename', $array1); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T20:29:23.420

您正在寻找 basename()：

```
$array2 = array_map('basename', $array1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:25:09.407

```
function lastPart($str) {
  return end(explode('/', $str));
}

$array2 = array_map('lastPart', $array1); 
```

它的作用是将函数应用于`lastPart`数组的每个元素。[array_map](http://php.net/array_map)被称为*[高阶函数](https://en.wikipedia.org/wiki/Higher-order_function)*，因为它接受*另一个函数*作为它的参数，这在所谓的*函数式编程*中是一个非常常见的习语。PHP 不起作用，但我仍然喜欢这种类型的解决方案。

[array_filter](http://php.net/array_filter)和[usort](http://php.net/usort)是另外两个值得一试的高阶函数。

对于更常见的*命令式*解决方案，您可以只运行一个[foreach](http://php.net/foreach)循环：

```
$array2 = array();
foreach($array1 as $value) {
  $array2[] = end(explode('/', $value));
} 
```

# html - 不同浏览器的css兼容性问题

> ID：10131214
> 
> 赞同：0
> 
> 时间：2012-04-12T20:22:45.107
> 
> 标签：html, css, joomla, web, internet-explorer-9

我正在 joomla 2.5 中建立一个网站并取得了一些不错的进展。从某种意义上说，我不是一个出色的编码员，但我知道要查找什么以及在哪里插入大多数代码。不过我需要一些帮助。我制作了一个新模块，在 Firefox 和 Chrome 中看起来很棒。虽然在 IE9 中查看页面并不完全正确。看看：[http](http://southwestarkansasradio.com/joomla/) ://southwestarkansasradio.com/joomla/ 。问题似乎是“空中盒子”，然后是标题的一些间距问题。不知道如何解决这些问题。空中盒子已经有一些兼容性代码，但我想它并不完全正确。任何帮助将不胜感激。非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:28:42.480

“on air”图像具有“float:left”的风格，将其取出并修复它

# c# - 从 ASP 页后面的 ASP 代码访问变量

> ID：10131221
> 
> 赞同：0
> 
> 时间：2012-04-12T20:23:20.427
> 
> 标签：c#, asp.net, web

我有一个 Default.aspx，它有它的代码，Default.cs.aspx。

我在 Default.cs.aspx 中有一个变量

```
public DataSet AllProducts { get; set; } 
```

在 Page_Load 函数中，我让它从表中获取所有这些产品，将其分配给 AllProducts，然后我使用 Page.DataBind(); 显然将变量绑定到页面。

但是在我这样做的页面中：

```
<% foreach(DataRow product in AllProducts) { %> 
```

它不喜欢 AllProducts，在当前上下文中不存在。. . .

现在，我想要两个答案。

首先，如何访问 AllProducts 变量？

第二，在 aspx 页面内进行数据拉取并在 aspx 页面内分配所有变量是否安全，如果可以，如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:20:24.140

要回答我一直遇到的问题是从 aspx 页面中的代码文件访问变量。我没有形成正确的语法。

```
<% # AllProducts %> 
```

这就是我一直在尝试的

```
<%# AllProducts %> 
```

这应该是它的样子，注意空格！

不幸的是，这又提出了另一个问题，我如何将其放入页面的变量中，因为您不能将该行粘贴到 asp:HyperLink 控件中的属性 NavigateUrl 中。

我现在要做的是在另一个页面上查看产品，所以我需要以某种方式将 productID 推送到该页面。

# javascript - Chrome 中的 YUI 2.9.0 富文本编辑器填充，然后删除 editorHTML

> ID：10131223
> 
> 赞同：0
> 
> 时间：2012-04-12T20:23:35.230
> 
> 标签：javascript, google-chrome, yui, rich-text-editor

当双击该行或单击“编辑”按钮并选择一行时，我正在通过数据行中的数据填充 YUI RTE。**IE 和 FF 按预期执行**，但 Chrome 填充了 html 内容（我从 chrome 的检查 el 功能中调试知道这一点），然后几毫秒后，它会删除它。有什么建议么？？

这是我构建 YUI RTE 的方式

```
function CreateRTE() {

    //create the RTE:
    emailEditor = new YAHOO.widget.Editor('txtEmlBody', { width: '468px', height: '200px' });

    //After the Editor renders it, we will hide it so the iframe doesn't bleed through
    emailEditor.on('afterRender', emailEditor.hide);

    //Add the insert token button when the toolbar is loaded
    emailEditor.on('toolbarLoaded', function () {

        //Create the button configuration
        var config = { type: 'menu', label: 'Insert Token', value: 'inserttoken', menu: tokenMenu };

        //Add the button to the toolbar
        emailEditor.toolbar.addButtonToGroup(config, 'insertitem');

        //Add the event handler for a menu item click
        emailEditor.toolbar.on('inserttokenClick', function (ev) { this.execCommand('inserthtml', ev.button.value); }, emailEditor, true);

    });

    //render the editor explicitly into a container within the Dialog's DOM:
    emailEditor.render();

} 
```

这是我在双击一行时填充 RTE 或在选择一行时单击编辑按钮的方式。

```
function EditEmail() {

    //Get the record from the datatable
    var dt = grids.tblEmails.dataTable;
    var tr = dt.getSelectedRows()[0];
    var row = dt.getRecord(tr);

    //Populate the form
    YAHOO.util.Dom.get('hidEmlId').value = row.getData('ID');
    YAHOO.util.Dom.get('hidEmlType').value = row.getData('Type');
    YAHOO.util.Dom.get('txtEmlSubject').value = row.getData('Title');

    emailEditor.setEditorHTML(row.getData('Body'));

    //Show the dialog
    dialogs.dlgEmail.show();

} 
```

我确实阅读[了这篇](https://stackoverflow.com/questions/7016105/yahoo-yui-2-rich-text-editor-cant-get-seteditorhtml-method-to-work-whats)文章，但问题似乎不匹配。正在填充 html 编辑器的上下文，然后将其删除.... sooo ，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:39:04.113

`( row.getData('Body') ),`在设置编辑器的 html 之前，尝试使用 html 更新编辑器的支持文本区域`(emailEditor.setEditorHTML(row.getData('Body'));)`。这应该允许它在 Chrome/Safari 中工作。

# c# - 更新列表框项

> ID：10131224
> 
> 赞同：1
> 
> 时间：2012-04-12T20:23:36.217
> 
> 标签：c#, wpf, xaml

我有一个带有节点的 TreeView，因此当我单击其中一个节点时，我将使用绑定到可观察集合的项目来更新 ListBox，这可以正常工作。接下来，当我单击树视图中的另一个节点时，我将不得不使用不同的数据更新 ListBox（这也是一个 Obsv.Collection）。关于如何进行此操作的任何想法？

```
<Resources>
    <DataTemplate x:Key="clipsource">
        <StackPanel>
            <Image Name="img" Width="125" Height="70" Margin="1,0" Source="{Binding Path=Path, Converter= {x:Static l:UriToThumbnailConverter.Instance}}"/>
            <TextBlock FlowDirection="LeftToRight" FontFamily="Arial" FontSize="12" Text="{Binding Path = DisplayClipName}"/>
        </StackPanel>
    </DataTemplate>
</Resources>
<Grid  Height="Auto" Grid.Column="2" VerticalAlignment="Stretch"  x:Name="RightPane_grid" Margin="2,0,0,0" KeyboardNavigation.DirectionalNavigation="None">
    <Grid.RowDefinitions>
        <RowDefinition Height="21.205"/>
        <RowDefinition  Height="*"/>
    </Grid.RowDefinitions>
    <Rectangle  Fill="#FF232323" Stroke="#FF000000" RadiusX="3" RadiusY="3" Margin="0,0,0,0" x:Name="Right_Pane_bkg" Grid.ColumnSpan="1" Grid.RowSpan="2" KeyboardNavigation.DirectionalNavigation="None"/>
    <ListBox Name="ListBox1" SelectionMode="Extended" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Grid.Row="0" Background="#FF3B3B3B"  Margin="2,25,2,2" ItemsSource="{Binding}" ItemTemplate="{StaticResource clipsource}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemContainerStyle>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox>
</Grid> 
```

代码背后：

```
private void Handle_Click1(object sender, MouseButtonEventArgs e) // tree view Item
{
    ListBox1.DataContext = Clips Items;
    // Clips Items is an Obs v. Collection 
} 
```

我有另一个 Obs v Collection Still Items 我必须将它绑定到列表框以显示另一个视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:44:11.397

您可以尝试以下方法：

```
 <TreeView Name="MyTreeView">
        <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="Header" Value="{Binding Path=Name}"/>
                <Setter Property="ItemsSource" Value="{Binding Path=SomeItems}"/>
            </Style>
        </TreeView.ItemContainerStyle>
    </TreeView>

    <ListBox ItemsSource="{Binding ElementName=MyTreeView, Path=SelectedItem.SomeItems}">
        <ListBox.ItemContainerStyle>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="Content" Value="{Binding Path=Name}"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox> 
```

Binding 将使用 Path 从 TreeView 中的 SelectedItem 检索 ListBox 中显示的项目`SomeItems`。这假设 SelectedItem 是这样的：

```
public class MyTreeViewItem
{

    public string Name { get; private set; }
    public ObservableCollection<MyTreeViewItem> SomeItems { get; private set; }

    public MyTreeViewItem(string name)
    {
        if (name == null)
            throw new ArgumentNullException("name");

        this.SomeItems = new ObservableCollection<MyTreeViewItem>();
        this.Name = name;
    }

} 
```

当您在 TreeView 中选择一个项目时，子项将显示在 ListBox 中。

**编辑：**

要填充 TreeView，请使用以下代码：

```
 MyTreeViewItem a = new MyTreeViewItem("A");
        a.SomeItems.Add(new MyTreeViewItem("A1"));
        a.SomeItems.Add(new MyTreeViewItem("A2"));
        a.SomeItems.Add(new MyTreeViewItem("A3"));

        MyTreeViewItem b = new MyTreeViewItem("B");
        b.SomeItems.Add(new MyTreeViewItem("B1"));
        b.SomeItems.Add(new MyTreeViewItem("B2"));
        b.SomeItems.Add(new MyTreeViewItem("B3"));

        this.MyTreeView.ItemsSource = new MyTreeViewItem[] { a, b }; 
```

# .net - IronPython 基础程序

> ID：10131227
> 
> 赞同：0
> 
> 时间：2012-04-12T20:23:48.973
> 
> 标签：.net, ironpython

在 C# 中得到这个代码：

```
using System;

public class Listener{
   public static void Main(){
      Console.WriteLine("Hello world...");
      Console.ReadLine();
   }
} 
```

试图将其翻译成 IronPython 并通过以下方式编译`ipy pyc.py /main:Listener.py Listener.py /target:exe`：

```
from System import *

class Listener:
    def Main(self):
        Console.WriteLine("Listening")
        Console.ReadLine() 
```

当我尝试通过`ipy`exe 或直接运行它时，没有任何反应。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:36:32.643

Python 没有/不需要 main 方法（按约定入口点）。

如果你想运行它，你只需要在你的 .py 末尾调用 Main 方法。

```
Listener().Main() 
```

另一种方法是检查您是否是要运行的主要/第一个 python 文件。这允许您创建可以使用/导入或独立运行的模块：

```
if __name__ == '__main__':
    Listener().Main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:49:35.400

```
from System import *

class Listener:
  def Main(self):
    Console.WriteLine("Listening")
    Console.ReadLine()

if __name__ == '__main__':
  Listener().Main() 
```

或者，更 Pythonic

```
if __name__ == '__main__':
  raw_input('Listening') 
```

# java - PeerUnavailableException 使用 JAIN SIP API 和 NIST 实现

> ID：10131230
> 
> 赞同：3
> 
> 时间：2012-04-12T20:23:59.610
> 
> 标签：java, exception, sip, jain-sip

我正在尝试使用 JAIN SIP 1.2 和 NIST 实现来构建一个简单的 SIP 应用程序。我使用 JavaSE1.7 和 Eclipse 作为我的 IDE。问题：尝试构造 SipStack 对象时出现 javax.sip.PeerUnavailableException。

我的主要课程：

```
package net.bezeqint.sip.enp;

public class ListenerMain {

    public static void main(String[] args) {

        try {
            System.out.println("Creating ExampleListener...");
            ExampleListener listener = new ExampleListener();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(-1);
        }
    }
} 
```

我有问题的类（我从中构造 SIP Stack 对象的类）：

```
package net.bezeqint.sip.enp;

import javax.sip.*;
import javax.sip.message.*;
import javax.sip.header.*;
import javax.sip.address.*;
import javax.sip.address.URI;

import java.net.*;
import java.util.*;

public class ExampleListener implements SipListener {

    private SipFactory mySipFactory;
    private SipStack mySipStack;
    private ListeningPoint myListeningPoint;
    private SipProvider mySipProvider;
    private MessageFactory myMessageFacory;
    private HeaderFactory myHeaderFactory;
    private AddressFactory myAddressFactory;
    private Properties myProperties;
    private String myIP;
    private int myPort = 5060;

    public ExampleListener() throws Exception {

        mySipFactory = SipFactory.getInstance();
        mySipFactory.setPathName("gov.nist");

        // create factories
        myMessageFacory = mySipFactory.createMessageFactory();
        myHeaderFactory = mySipFactory.createHeaderFactory();
        myAddressFactory = mySipFactory.createAddressFactory();
        // create a Properties object to pass as an argument to the createSipStack() method
        myProperties = new Properties();
        myProperties.setProperty("javax.sip.STACK_NAME","myStack");
        // test
        // myProperties.setProperty("javax.sip.IP_ADDRESS","192.168.1.1");

        System.out.println("Creating SipStack...");
        mySipStack = mySipFactory.createSipStack(myProperties);
        System.out.println("SipStack created!");

        // get our IP address to be used when creating the ListeningPoint
        myIP = InetAddress.getLocalHost().getHostAddress();

        myListeningPoint = mySipStack.createListeningPoint(myIP, myPort, "udp");

        mySipProvider = mySipStack.createSipProvider(myListeningPoint);

        mySipProvider.addSipListener(this);

        // begin building a request
        Address destAddress = myAddressFactory.createAddress("sip:registrar.ocean.com");
        Address addressOfRecord = myAddressFactory.createAddress("sip:peter@ocean.com");
        Address contactAddress = myAddressFactory.createAddress("sip:peter@169.254.153.60");

        // convert address to URI object
        URI myRequestURI = destAddress.getURI();

        // create headers
        ArrayList viaHeaders = new ArrayList();
        ViaHeader myViaHeader = myHeaderFactory.createViaHeader("Peterpc.ocean.com"
                , 5060, "udp", "z9hG4bKnashds7");
        viaHeaders.add(myViaHeader);

        MaxForwardsHeader myMaxForwardsHeader =
                myHeaderFactory.createMaxForwardsHeader(70);

        ToHeader myToHeader = myHeaderFactory.createToHeader(addressOfRecord, null);

        FromHeader myFromHeader = myHeaderFactory.createFromHeader(addressOfRecord, "456248");

        CallIdHeader myCallIDHeader = myHeaderFactory.createCallIdHeader("843817637684230@998sdasdh09");

        CSeqHeader myCseqHeader = myHeaderFactory.createCSeqHeader(1826, "REGISTER");

        // create message
        Request myRequest = myMessageFacory.createRequest(myRequestURI, "REGISTER", myCallIDHeader, myCseqHeader, myFromHeader, myToHeader, viaHeaders, myMaxForwardsHeader);

        // add missing headers
        ContactHeader myContactHeader = myHeaderFactory.createContactHeader(contactAddress);
        myRequest.addHeader(myContactHeader);

        // print the message
        System.out.println(myRequest);

    }

    @Override
    public void processDialogTerminated(DialogTerminatedEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void processIOException(IOExceptionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void processRequest(RequestEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void processResponse(ResponseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void processTimeout(TimeoutEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void processTransactionTerminated(TransactionTerminatedEvent arg0) {
        // TODO Auto-generated method stub

    }
} 
```

控制台输出：

> 创建 ExampleListener... 创建 SipStack... javax.sip.PeerUnavailableException：对等 SIP 堆栈：gov.nist.javax.sip.SipStackImpl 无法实例化。确保已设置路径名称。在 javax.sip.SipFactory.createStack(SipFactory.java:324) 在 javax.sip.SipFactory.createSipStack(SipFactory.java:152) 在 net.bezeqint.sip.enp.ExampleListener.(ExampleListener.java:41) 在 net .bezeqint.sip.enp.ListenerMain.main(ListenerMain.java:9) 引起：java.lang.reflect.InvocationTargetException at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source ) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) 在 java.lang.reflect.Constructor。

我已经仔细检查了使用的路径名，`mySipFactory.createSipStack()`并确保它已正确导入到我的构建路径中。

javax.sip.PeerUnavailableException 有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T12:46:54.753

解决了！我不得不导入`org.apache.log4j`包，这成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T06:35:20.090

当您使用 Maven 构建项目时，请确保您依赖于 jain-sip-api 和 jain-sip-ri。

# python - Argparse：如何区分解析器和子解析器的参数

> ID：10131246
> 
> 赞同：4
> 
> 时间：2012-04-12T20:24:56.917
> 
> 标签：python, argparse

我想将 python-argparse 与参数和位置参数一起使用。假设我在命令行上有我的脚本（这只是一个简单而愚蠢的例子），这是我到目前为止的代码：

```
#!/usr/bin/env python
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--verbose', action='store_true')
subparsers = parser.add_subparsers(help='command', dest='command')
cmd1_parser = subparsers.add_parser('command1')
cmd1_parser.add_argument('--verbose', action='store_true')

args = parser.parse_args()

print args 
```

现在我这样称呼这个脚本：

```
~ $ myscript --verbose command1 --verbose
Namespace(command='command1', verbose=True)

~ $ myscript command1 --verbose
Namespace(command='command1', verbose=True)

~ $ myscript --verbose command1
Namespace(command='command1', verbose=True) 
```

现在你可以看到我总是得到相同的命名空间对象，并且无法区分详细命令是常规参数还是子解析器参数。但我需要它来分别处理这些参数。什么是一种简单的方法（以最少的代码工作）来做到这一点？

**编辑**：

我在 Python stdlib 问题跟踪器中提交了一个问题：http: [//bugs.python.org/issue15327](http://bugs.python.org/issue15327)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:42:58.097

将您的子解析器的 add_argument 调用更改为：

```
cmd1_parser.add_argument('--verbose', action='store_true', dest='cmd1_verbose') 
```

这将导致您的第一个示例返回：

```
~ $ myscript --verbose command1 --verbose
Namespace(cmd1_verbose=True, command='command1', verbose=True) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T22:54:33.113

这是我一起破解的一些小东西。我几乎可以保证它不是没有错误的，但它适用于这个简单的测试。

```
import argparse

class _Action(object):
    def __init__(self,master):
        self.master=master
    def add_parser(self,name,**kwargs):
        self.master.subparsers[name]=subParserEnabler()
        return self.master.subparsers[name]

class subParserEnabler(argparse.ArgumentParser):
    def __init__(self,*args,**kwargs):
        self.subparsers={}
        argparse.ArgumentParser.__init__(self,*args,**kwargs)

    def add_subparsers(self,**kwargs):
        return _Action(self)

    def parse_args(self,args,**kwargs):
        args=list(args)
        for k in self.subparsers.keys():
            if k in args:
                break
        try: 
            i=args.index(k)
            output=argparse.ArgumentParser.parse_args(self,args[:i],**kwargs)
            o1=argparse.Namespace()
            setattr(output,k,o1)
            self.subparsers[k].parse_args(args[i+1:],namespace=o1)
        except:
            output=argparse.ArgumentParser.parse_args(self,args,**kwargs)
        return output

parser = subParserEnabler()
parser.add_argument('--verbose', action='store_true')
subparsers = parser.add_subparsers(help='command',dest='command')
cmd1_parser = subparsers.add_parser('command1')
cmd1_parser.add_argument('--verbose', action='store_false')

args = parser.parse_args("--verbose command1 --verbose".split())
print args 
```

它仍然缺少别名，帮助格式可能是错误的……但至少它提供了我想要的输出。最终，John Gaines Jr 的答案可能比我的要简单得多。

# sql-server-2008-r2 - 在数据库中保存数据时出错

> ID：10131253
> 
> 赞同：0
> 
> 时间：2012-04-12T20:25:16.913
> 
> 标签：sql-server-2008-r2

使用 C# 中的 Windows 窗体应用程序将数据保存在 SQL Server 2008 R2 数据库中时遇到问题。我在保存按钮中的代码是正确的，但是当我单击此按钮时，会出现一个消息框

> 列名“CompanyID”无效...和其他列

但该列确实存在于数据库表中。

我的代码是

```
SqlConnection con = new SqlConnection(GetConnection.ConnectionStr);
string sqltext = "insert into MVConsumingMaker ( [CompanyID] , [MakerID] , [Hour] , [Amount] , [Date] ) values(" + Convert.ToString(CmpCompany.ValueMember) + "," + Convert.ToString(CmpMaker.ValueMember) + "," + CmpHour.Text + "," + TxtAmount.Text + ",'" + MaskDate.Text + "')";
SqlCommand cmd = new SqlCommand(sqltext, con);

con.Open();

cmd.ExecuteNonQuery();
con.Close();

TxtResultSave.Text = "the opiration was completed successfully"; 
```

请告诉我我做错了什么！

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:38:03.850

好吧，您的第一个**主要**问题是您使用字符串连接来构建您的 SQL 语句这一事实 - 这真的很糟糕，因为您将代码开放给**SQL 注入**- 不要这样做 -**永远不要！**. 解决此问题的唯一正确方法是**始终**使用**参数化查询**- 定义您的 SQL 语句，并且无论您想在哪里“插入”一些值，都有一个`@parameter`这样您就可以从代码中正确安全地设置其值。

使用参数还可以让您不必处理棘手的问题，例如在 SQL 语句中使用正确数量的引号和双引号，并且它允许更多的错误控制，因为参数被分配了数据类型，并且如果您的值是尝试设置不匹配，你会得到一个很好的正确错误消息。

另外：您应该尝试将数据访问逻辑与 UI 逻辑分开 - 不要在 UI 事件处理程序的中间编写所有数据库代码。将它们分开 - 更好和更简洁的设计，允许您重用代码并提高代码库的整体可维护性。

所以我会写一个类似的方法：

```
public void SaveData(int companyID, int makerID, int hour, decimal amount, DateTime date)
{
    // define your SQL statement using *parameters*
    string sqltext = "INSERT INTO dbo.MVConsumingMaker([CompanyID], [MakerID], [Hour], [Amount], [Date]) " +
                     "VALUES(@CompanyID, @MakerID, @Hour, @Amount, @Date)";

    // put your disposable ADO.NET objects into "using" blocks to ensure proper disposal
    using (SqlConnection con = new SqlConnection(GetConnection.ConnectionStr))
    using (SqlCommand cmd = new SqlCommand(sqltext, con))
    {
        // define parameters and their values
        cmd.Parameters.Add("@CompanyID", SqlDbType.Int).Value = companyID;
        cmd.Parameters.Add("@MakerID", SqlDbType.Int).Value = makerID;
        cmd.Parameters.Add("@Hour", SqlDbType.Int).Value = hour;
        cmd.Parameters.Add("@Amount", SqlDbType.Decimal).Value = amount;
        cmd.Parameters.Add("@Date", SqlDbType.DateTime).Value = date;

        // open connection, execute INSERT, close connection
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }
} 
```

然后让我的事件处理程序调用该方法：

```
try
{
    // call the "SaveData" method to actually save the data from the UI elements
    SaveData(Convert.ToString(CmpCompany.ValueMember), 
             Convert.ToString(CmpMaker.ValueMember), 
             CmpHour.Text, TxtAmount.Text, MaskDate.Text);

    // set result text here - in the UI event handler
    TxtResultSave.Text = "The data was successfully saved!";
}
catch(Exception exc)
{
   // handle and/or log exception as needed
   TxtResultSave.Text = "The data was *NOT* successfully saved";
} 
```

# css - 使用品牌徽标而不是字体徽标时如何降低 twitter 引导导航栏的高度

> ID：10131254
> 
> 赞同：4
> 
> 时间：2012-04-12T20:25:18.117
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter bootstrap，但导航栏高度有问题 - css。

我想将导航栏的高度降低到 30px，但是当我使用 img 徽标时，导航栏的高度不会降低。我减小了徽标大小，但似乎没有什么不同。

完全被难住和恼怒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:47:12.477

请阅读有关更改导航栏高度的主题：[https ://github.com/twbs/bootstrap/issues/1540](https://github.com/twbs/bootstrap/issues/1540)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:40:26.520

万无一失的方法是直接在html标签内修改样式，例如：

```
<div class="navbar navbar-fixed-top" style="height: 30px">
  // logo here
</div> 
```

# regex - 正则表达式来测试输入是否是模式中的 ok 子字符串

> ID：10131259
> 
> 赞同：0
> 
> 时间：2012-04-12T20:25:32.847
> 
> 标签：regex, substring, alternation

基本上，如果我有一个像

```
/^(foo|bars)$/ 
```

我希望它成功

```
['', 'f', 'fo', 'foo', 'b', 'ba', 'bar', 'bars'] 
```

但后来失败了

```
['j', 'fa', 'foos'...] 
```

我知道一些已经给出的答案，

```
/^(f(oo?)?|b(ar?)?)$/ 
```

或者

```
/^f|fo|foo|b|ba|bar$/ 
```

虽然它们确实有效，但对于这种特定情况，这不是我宁愿采用的方式，如果将其扩展到 20 个长字，它就会变得难以管理。如果可能的话，我希望有一个更优雅的解决方案。

有什么优雅的想法吗？在我使用它的地方，我可以，而不是正则表达式，传递一个字符串列表，然后检查任何字符串的输入索引是否为 0，但我只是想看看是否有一种方法可以用正则表达式来做。

感谢所有答案，但我主要是在寻找尽可能多的“优雅”解决方案，但在浏览完之后，我不确定是否有一个。

基本上，这是一种强制输入预防。我想要的类似于 Dojo 的 ValidationTextBox，[http://dojotoolkit.org/reference-guide/1.7/dijit/form/ValidationTextBox.html](http://dojotoolkit.org/reference-guide/1.7/dijit/form/ValidationTextBox.html)。在那里，它会尽快告诉您输入是否与验证模式不匹配（我......可能最终会这样做），但我*只想*允许正确的输入及其路径.

换句话说，我试图找出是否有任何优雅的方法来查看您是否可以仅针对相同长度的模式检查输入字符串，例如，如果您只输入一个字符，它实际上只针对

```
/^(f|b)$/ 
```

在这种情况下，两个字符，

```
/^(fo|ba)$/ 
```

等等。

虽然我的具体答案是关于正则表达式的交替，但我很想知道一般的正则表达式（从我读过的内容来看，这似乎不太可能）。

我的意思是，如果你有，

```
/^The dog$/ 
```

我想要一种让所有人都能成功测试的方法

```
['', 'T', 'Th',...'The dog'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:29:45.597

这是一个选项：

```
/^(f(oo?)?|b(ar?)?)$/ 
```

我假设您希望整个字符串与这些匹配，而不是其他任何东西，因为如果可以找到部分匹配，那么它等同于仅检查字符串 ( `/[fb]/`) 中任意位置的任一子字符串的第一个字符。

这是一个较长字符串的示例，使用 'hello' 和 'world' 而不是 'foo' 和 'bar'：

```
/^(h(e(l(lo?)?)?)?|w(o(r(ld?)?)?)?)$/ 
```

它需要更多字符，但您可以使用非捕获组来提高效率：

```
/^(?:h(?:e(?:l(?:lo?)?)?)?|w(?:o(?:r(?:ld?)?)?)?)$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:29:10.823

/f|fo|foo|b|ba|bar/

哎呀！您的答案无法提交，因为：

正文必须至少为 30 个字符；你输入了 19

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:36:17.407

你用的是什么技术？

我问是因为“优雅”的技术解决方案可能是编写一个程序，该程序从允许的输入字符串为您生成正则表达式模式，而不是尝试手动构建它。

如果这是在具有单个字符输入的交互式应用程序中，则有类似的策略（编写程序来创建正则表达式），但是为 1 个字符输入生成一个正则表达式模式，一个用于 2 个字符，一个用于 3 个字符等，这将根据输入长度进行选择。

对于固定字符串，我很想做类似的事情：

```
for each string:
    if string has a character match at the nth position:
        retain string
    else:
        remove string from further consideration 
```

这也将支持完成，即向用户发出信号，不需要再键入任何内容，因为只有一个可能的匹配字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T20:36:25.997

你可以这样写你的正则表达式：

[http://fiddle.re/p73n](http://fiddle.re/p73n)（链接到正则表达式）

（fo?o?|ba?r?）。

如果单词列表不经常更改且不大，那可能是一个很好的解决方案。如果单词列表相当动态，您可能需要检查 entry.starstWith(yourInput)。

干杯。

# c# - 第一次使用多线程

> ID：10131260
> 
> 赞同：0
> 
> 时间：2012-04-12T20:25:42.293
> 
> 标签：c#, winforms, multithreading

我第一次尝试使用线程，并想出了这个：

```
Thread myThread  = new Thread(() =>
  {
    test = Class1.getNumbers(param1, param 2);
    MessageBox.Show(test.toString());
  }); 
```

不过，这对我没有任何作用。我做错什么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:29:56.537

你没有启动线程。

```
myThread.Start(); 
```

（您在 MessageBox 调用中也有语法错误......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T20:36:03.427

> 我第一次尝试使用线程

尽量避免直接使用 Thread 类。这是很少需要的。
调查：

*   后台工作者
*   任务并行库
*   线程池

或多或少按这个顺序。

它们都在线程之上提供层来帮助您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T20:44:39.390

从一本非常好的书中阅读这个[免费章节](http://www.albahari.com/threading/)（诚实的插件 - 这里没有激励）：

它很简洁，并以渐进的方式为您提供所需的专业知识，因此您不会太快太高水平。你的问题的答案在前几段......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T20:36:15.157

您需要通过调用来启动线程`Start`。

此外，重要的是要注意`MessageBox.Show`泵送消息。这就是为什么它在没有显式调用该线程的情况下正常工作^(1的原因。)`Application.Run`但是，大多数 UI 表单和控件都不能以这种方式工作。通常不要尝试从工作线程访问或创建任何 UI 元素。

* * *

^(1从技术上讲，) *A`MessageBox`可以从主 UI 线程以外的线程工作，但它可能会导致一些奇怪的问题。例如，此消息框可能会卡在 UI 线程显示的模式对话框后面。正是由于这个原因，不建议从工作线程显示 UI 元素，即使它们是通过像`Form.ShowDialog`or之类的自泵调用来显示的`MessageBox.Show`。*

# jquery - jQuery No Conflict 仍然与其他版本的 jQuery 冲突

> ID：10131268
> 
> 赞同：1
> 
> 时间：2012-04-12T20:26:05.683
> 
> 标签：jquery, conflict

我正在尝试将双滑块插件与 estalge 视图框一起运行。它们都使用 jQuery，并且单独工作，但是当我将它们放在一起时，一个中断。我曾尝试实施 jQuery 无冲突规则，但我认为我可能在某处遗漏了一个小细节。到目前为止，我的编码看起来像：

```
<script src="scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="scripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="scripts/jquery.timers-1.2.js" type="text/javascript"></script>
<script src="scripts/jquery.dualSlider.0.3.js" type="text/javascript"></script>
<!-- START ESTALGE -->
<script src="js/jquery-1.6.2.min.js"></script>
<script src="js/jquery.etalage.min.js"></script>

<script type="text/javascript"> 

  $.noConflict();
  jQuery(document).ready(function($) {
                jQuery('#etalage').etalage();
            });

    $(".carousel").dualSlider({
                auto:true,
                autoDelay: 6000,
                easingCarousel: "swing",
                easingDetails: "easeOutBack",
                durationCarousel: 1000,
                durationDetails: 500

            });

    </script> 
```

任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T20:35:10.213

您使用`noConflict`不正确。

```
<script src="scripts/jquery-1.3.2.min.js" type="text/javascript"></script>

<!-- INCLUDE ANY SCRIPTS HERE THAT RELY ON 1.3.2 -->

<script type="text/javascript"> 
    // HERE WE CAN USE 1.3.2

    // re-assign 1.3.2 to a new variable so we can use it later
    var $jq132 = $.noConflict();
</script>

<script src="js/jquery-1.6.2.min.js"></script>

<script type="text/javascript"> 

    // $ is now 1.6.2 and $jq132 is 1.3.2, both can be used.

</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T20:33:54.457

您可以有多个 jQuery 版本，[`$.noConflict`](http://api.jquery.com/jQuery.noConflict/)将返回您的 jQuery 对象。您需要将其另存为另一个变量。

```
<script src="scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="js/jquery-1.6.2.min.js"></script>
<script>
    $jq = $.noConflict();
    // $jq is jQuery 1.6.2
    // $ is jQuery 1.3.2
</script> 
```

演示：http: [//jsbin.com/uhazan/3/edit#javascript,html,live](http://jsbin.com/uhazan/3/edit#javascript,html,live)

注意：`jQuery`变量将设置为 1.6.2（第二个），如果您希望它为 1.3.2（第一个），请传递`true`给`$.noConflict`.

PS你可能想把你的`$(".carousel").dualSlider`里面`$(document).ready(`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:33:20.057

试着把你的`slider`里面`jQuery(document).ready(function($) {});`

来自所有者[网站](http://ftp.codecanyon.net/item/etalage/faq/180719)

**Etalage 是否支持 jQuery 无冲突模式？**

插件本身没有冲突准备。只需将 替换为`"$"`您`"jQuery"`启动插件的位置，如下所示：

```
jQuery(document).ready(function(){
    jQuery('#etalage').etalage();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:32:14.713

你不需要两个 jQuery Core Lib 包括

试试这个：

```
<script src="scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="scripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="scripts/jquery.timers-1.2.js" type="text/javascript"></script>
<script src="scripts/jquery.dualSlider.0.3.js" type="text/javascript"></script>
<!-- START ESTALGE -->
<script src="js/jquery.etalage.min.js" type="text/javascript"></script>

<script type="text/javascript"> 

 jQuery(document).ready(function($) {

 jQuery('#etalage').etalage();
 jQuery(".carousel").dualSlider({
            auto:true,
            autoDelay: 6000,
            easingCarousel: "swing",
            easingDetails: "easeOutBack",
            durationCarousel: 1000,
            durationDetails: 500

        });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:30:36.030

这`$(".carousel").dualSlider({`条线在`jQuery(document).ready()`函数之外，我很确定这不是你的意图。目前，这将起作用：

```
jQuery.noConflict();
jQuery(document).ready(function($) {
    $('#etalage').etalage();

    $(".carousel").dualSlider({
        auto:true,
        autoDelay: 6000,
        easingCarousel: "swing",
        easingDetails: "easeOutBack",
        durationCarousel: 1000,
        durationDetails: 500
    });
}); 
```

但是，您的代码还有其他问题。您引入了两个版本的 jQuery，其中一个非常旧（1.3.2）。你不会得到好的结果。如果有一些依赖于旧 jQuery 的库，请考虑不使用该库。无论如何，它可能无法在此页面上正常工作，因为该库的任何运行时活动都只能访问 jQuery 1.6。[jQuery .noConflict 文档](http://api.jquery.com/jQuery.noConflict/)提到您可以提供 boolean`true`作为参数来`.noConflict`释放 jQuery 关键字，但是到那时，您加载的插件已经在旧版本附近关闭。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T20:36:54.867

如果您必须使用多个版本的 jquery，请使用

```
<script src="scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script>
    var jq132 = jQuery.noConflict();
</script>
<script src="js/jquery-1.6.2.min.js"></script> 
```

现在调用旧版本的 jquery

```
jq132('element').doSomething(); 
```

和较新版本的 jquery 可能如下

```
$('element').doSomething(); 
```

# django - 将用户权限添加到 Django 用户对象时出现无效的文字错误

> ID：10131271
> 
> 赞同：7
> 
> 时间：2012-04-12T20:26:13.143
> 
> 标签：django, django-permissions

我在我的 Django 应用程序中定义了一个模型`foo`，如下所示：

```
class Bar(models.Model):
    class Meta:
        permissions = (
            ("view_bar", "Can view bars"),
        ) 
```

我已经运行`manage.py syncdb`了这个，果然，它显示在`auth_permissions`表格中：

```
id|name|content_type_id|codename
41|Can view bars|12|view_bar 
```

但是，当我尝试将该权限添加到视图中的用户对象时，如下所示：

```
request.user.user_permissions.add('foo.view_bar') 
```

代码因以下异常而爆炸：

```
invalid literal for int() with base 10: 'foo.view_bar' 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T20:44:41.220

`user_permissions.add`正在添加到多对多管理器。所以你需要添加实际的 Permission 对象本身：

```
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType

content_type = ContentType.objects.get_for_model(Bar)
permission = Permission.objects.get(content_type=content_type, codename='view_bar')

request.user.user_permissions.add(permission) 
```

此外，您在测试时可能会感到奇怪，因为权限也会为每个用户缓存。您可能希望在调用之前删除缓存`has_perm`：

```
if hasattr(user, '_perm_cache'):
    delattr(user, '_perm_cache') 
```

一般来说，您可能想要编写一堆帮助方法来处理所有这些内容，以便您可以通过编程轻松地授予和撤销权限。你如何做到这一点实际上取决于你如何使用权限。

# asp.net - 你能通过 WIF 只返回 nameidentifier 声明吗

> ID：10131272
> 
> 赞同：0
> 
> 时间：2012-04-12T20:26:13.387
> 
> 标签：asp.net, wif, saml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:56:29.190

Personally I've never used the `NameIdentifier` claim. The user name should be passed using the `Name` type (the `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name`).

I confirm your observation - you can't have the NameIdentifier (whatever it is) as a sole claim but you CAN of course have the Name as the sole claim.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:19:36.680

> Is it possible that nameidentifier is a keyword in SAML or WIF

Yes. In SAML token formats, you have a separate subject concept (something that uniquely identifies the entity) and attribute concept (information about the entity).

The WIF model represents all of this stuff as claims. Most claims are mapped to SAML Attributes when you write them to a SAML token, however nameidentifier is special and it gets written as a Subject.

But it looks like you're producing a SAML token with an AttributeStatement that's completely empty. Can you confirm? Are you using any kind of custom token handler?

I'm not certain, but I presume that by default when WIF encounters a ClaimsIdentity with just a nameidentifier claim, it should be writing this claim as a SAML Subject under both the AuthenticationStatement as well as the AttributeStatement, so the error you're getting shouldn't occur.

# java - 实现发送短信的代码？

> ID：10131273
> 
> 赞同：0
> 
> 时间：2012-04-12T20:26:23.533
> 
> 标签：java, android

我编写了旨在发送短信的代码，它可以在模拟器上成功运行，但在真实设备上却失败了！社区可以帮助我识别我的代码或任何相关信息和链接的任何问题以帮助我吗？

```
public class SmsActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
        final Button sendSms = (Button) findViewById (R.id.smsBut);
        sendSms.setOnClickListener(new View.OnClickListener() {         
            public void onClick(View v) {
            // TODO Auto-generated method stub              
            sendSMS("5556", "'hello frinds");
            sendSMS("*********", "'hello frinds");// **= real number
            }
        });

    }// end onCr

    public void sendSMS (String phoneNo, String msg) {      
        PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, SmsActivity.class), 0);                
        SmsManager sms = SmsManager.getDefault();       
        sms.sendTextMessage(phoneNo, null, msg, null, null);
    }    
} 
```

## 这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="sms.ecp.ccc"
        android:versionCode="1"
        android:versionName="1.0">
            <uses-sdk android:minSdkVersion="10" />
            <uses-permission android:name="android.permission.SEND_SMS" />
            <application android:icon="@drawable/ic_launcher"android:
                label="@string/app_name" >
            <activity android:name=".SmsActivity" android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:21:04.917

更改最后一行

```
sms.sendTextMessage(phoneNo, null, msg, pi, null); 
```

# assembly - 组装说明

> ID：10131276
> 
> 赞同：0
> 
> 时间：2012-04-12T20:26:35.483
> 
> 标签：assembly, atmel

有人可以解释一下以下汇编代码片段的作用吗？我不太确定最后一行的真正作用。

```
.def main = r16

.equ O = 5
.equ P = 6

ldi main, 0
ldi r16, (1<<O) | (1<<P) 
```

我特别想知道最后一行的真正作用。它是否在 OR 语句之后将寄存器 16 的值向左移了两个？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:54:52.310

`(1<<O) | (1<<P)`是由汇编器求值的表达式，其结果（在本例中`96`为 ）然后被替换为最终的机器代码。

# sql-server-2008 - DDL 触发器肯定不会触发，为什么？

> ID：10131280
> 
> 赞同：0
> 
> 时间：2012-04-12T20:26:43.997
> 
> 标签：sql-server-2008

我得到了这个示例代码。它适用于所有 T-SQL 代码，但如果我通过鼠标单击将表放在 SSMS 中，则不会跟踪事件 - 问题是为什么？

```
-- create the table to store the events
CREATE TABLE dbo.CREATE_TABLE_LOG (
eventTime datetime
, eventOwner nvarchar(100)
, eventTSQL nvarchar(3000)
)
GO
-- create the DDL trigger
CREATE TRIGGER DDLTrigger_CreateTable ON DATABASE FOR create_table, alter_table, drop_table
AS
DECLARE @data XML
SET @data = EVENTDATA()
INSERT INTO CREATE_TABLE_LOG
VALUES (
GETDATE()
, CURRENT_USER
, @data.value('(/EVENT_INSTANCE/TSQLCommand/CommandText)[1]',
'nvarchar(1000)')
)
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:47:26.987

我已经检查了 SQL Server 2005 和 SQL Server 2008，鉴于提供的日志记录表和 DDL 触发器，它已正确记录了删除，无论我如何在 SSMS 中删除它。

您能否提供您正在使用的确切菜单/上下文菜单命令，并仔细检查您没有删除 1 个数据库中的表，并读取另一个数据库中的日志表（就像您不小心在 master 中创建了一个重复的日志表）。

# vba - VBA ComboBox 项中的换行符

> ID：10131283
> 
> 赞同：0
> 
> 时间：2012-04-12T20:26:57.117
> 
> 标签：vba

如何在 VBA 的 ComboBox 中为项目添加换行符？

```
Private Sub UserForm_Initialize()
  ComboBox1.List = Array("Test1","Test2", "Test3" & Chr(13) & "more text")
End Sub 
```

在上面添加`Chr(13)`实际上添加了一个段落符号而不是换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:06:57.367

您可能需要[可变大小的项目](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775791%28v=vs.85%29.aspx#owner_drawn)。

MSForms 组合框是一个无窗口（轻量级）控件，不支持此功能。

# javascript - Aptana 3 删除包 (jquery)

> ID：10131289
> 
> 赞同：2
> 
> 时间：2012-04-12T20:27:23.597
> 
> 标签：javascript, jquery, aptana

我`jQuery`在 Aptana 3 中添加了包（命令 -> 包开发 -> 安装包），但现在我想删除此功能。从捆绑开发菜单中，我没有看到任何“删除捆绑”或类似命令，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:38:59.780

您应该能够相当容易地从系统中删除它。验证 jQuery 包的安装位置

1.  打开 Aptana
2.  转到窗口-> 显示视图-> 其他
3.  在“Studio”部分中，应该有一个名为“Bundles”的视图
4.  选择捆绑包以打开该视图
5.  展开有问题的捆绑包（很可能是 Javascript jQuery）
6.  第一个条目将显示它的安装位置
7.  记下位置并关闭 Aptana
8.  转到该位置并删除捆绑包（或将其移出该目录）
9.  重新启动 Aptana

这*应该*从 Aptana Studio 3 中删除 jQuery 包。我刚刚在我的本地机器上尝试过它并且它有效。

# asp.net-mvc - dotless 不会在我的 ASP .Net MVC 应用程序中编译 Mixins 函数

> ID：10131296
> 
> 赞同：0
> 
> 时间：2012-04-12T20:28:02.047
> 
> 标签：asp.net-mvc, less, mixins, dotless

我在我的 ASP .Net MVC 应用程序中使用 dotless。它可以很好地编译 .less 文件。但如果我在我的 .less 文件中使用 Mixins 函数，则会错误提示“资源解释为样式表，但使用 MIME 类型文本/纯文本传输”。如果我从 .less 文件中删除 Mixins 函数，一切正常。我有什么错？

我在 Visual Studio 2010、Windows 7 (IIS 7) 上使用 ASP.Net MVC 3。

**编辑：**

.LESS 输入

```
body
{
    padding: 0;
    margin: 0;
}
.border-all-around (@defaultBorder: 1px, @defaultColor: black)
{
  border: @defaultBorder solid @defaultColor;
}

.MyStandardBox
{
  .border-all-around;
}   
a
{
    color: #12aee8;
    text-decoration: none;
} 
```

输出：

```
body
{
    padding: 0;
    margin: 0;
} 
```

Maxins函数截断后的结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:05:48.323

问题解决了。我提到 dotless.Core 它的版本是 1.0.0.3。我用较新的版本（1.3.0.0）替换它，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:44:24.590

“资源解释为样式表，但使用 MIME 类型文本/纯文本传输”

我不确定这是否有任何帮助，但我在使用 Cassini 时多次遇到此错误——它不能很好地处理 mime 类型。

您使用的是与 Windows 捆绑在一起的 IIS 7 还是 cassini 启动？您是否尝试过 IIs Express？

如果这对您没有帮助，请忽略它。

# jquery - jquery - 获取以结尾的输入名称？

> ID：10131297
> 
> 赞同：1
> 
> 时间：2012-04-12T20:28:02.763
> 
> 标签：jquery

我的输入字段是这样命名的：

```
<input name="sec[grp-29][factor][0][i_score]" value="4" id="edit-sec-grp-29-factor-0-i-score" type="checkbox" />
<input name="sec[grp-30][factor][0][i_score]" value="4" id="edit-sec-grp-30-factor-0-i-score" type="checkbox" />
<input name="sec[grp-31][factor][0][i_score]" value="4" id="edit-sec-grp-31-factor-0-i-score" type="checkbox" /> 
```

我正在尝试根据是否选中复选框来执行功能。由于输入字段是动态创建的，我想检查名称以“[i_score]”结尾的输入。我试图这样做使用：

```
$("input[name$=i-score]]")... 
```

但是，它似乎没有“发现”……有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:30:29.227

由于方括号是特殊字符，因此必须对其进行转义或引用。此外，使用下划线代替连字符。

## 演示：http: [//jsfiddle.net/xuXQ5/](http://jsfiddle.net/xuXQ5/)

```
$("input[name$='i_score]']") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:29:41.093

您需要转义右方括号

```
$( "input[name$=i_score\\]]" ) 
```

在纯 css 中将是 \]]，\ 是因为 JS 需要用另一个 \ 转义 \

# android - achartengine 散点图点大小

> ID：10131298
> 
> 赞同：2
> 
> 时间：2012-04-12T20:28:08.367
> 
> 标签：android, achartengine, scatter-plot

我正在尝试更改图形点的大小，但是当我执行 mRenderer.setPointSize(size); 它永远不会改变..

这是我的图表的完整代码：

```
public class ShowGraph extends Activity {

    private XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();
    private XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
    private XYSeries mCurrentSeries;
    private XYSeriesRenderer mCurrentRenderer;
    private GraphicalView mChartView;
    int x,y;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.graph_layout);
        LinearLayout layout = (LinearLayout) findViewById(R.id.chart);

        mRenderer.setPanLimits(new double[] { 00, 600 , 00, 300 });     //xmin,xmax,ymin,ymax  bars/grids limit
        mRenderer.setZoomLimits(new double[]{00, 200, 00, 30});     //xmin,xmax,ymin,ymax  zoom limit
        String seriesTitle = "Series " + (mDataset.getSeriesCount() + 1);
        XYSeries series = new XYSeries(seriesTitle);
        ArrayList<String> accuracy = getIntent().getExtras().getStringArrayList("accuracy");
        ArrayList<String> time = getIntent().getExtras().getStringArrayList("time");
        for (int i = 0; i < time.size(); i++) {
            series.add(Double.parseDouble(time.get(i)), Double.parseDouble(accuracy.get(i)));
        }
        mDataset.addSeries(series);
        mCurrentSeries = series;
        mRenderer.setYLabelsAlign(Paint.Align.RIGHT);
        XYSeriesRenderer renderer = new XYSeriesRenderer();
        mRenderer.addSeriesRenderer(renderer);
        mRenderer.setPointSize(15f);
        mCurrentRenderer = renderer;

        if(mChartView== null){

            //ADD VALUE OF X,Y HERE to the series
            mCurrentSeries.add(x,y);

            if (mChartView != null) {
                mChartView.repaint();
            }
            mChartView = ChartFactory.getScatterChartView(ShowGraph.this, mDataset, mRenderer);
            mChartView.addPanListener(new PanListener() {
                public void panApplied() {
                    System.out.println("New X range=[" + mRenderer.getXAxisMin() + ", " + mRenderer.getXAxisMax()
                        + "], Y range=[" + mRenderer.getYAxisMax() + ", " + mRenderer.getYAxisMax() + "]");
                }
            });
            layout.addView(mChartView, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT));

        }
        Toast.makeText(this, "" + mRenderer.getPointSize(), 3000).show();
    }
} 
```

知道如何使积分变大吗？它们太小了，你几乎看不到它们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T14:43:57.057

在您将 XYSeriesRenderer 的点样式设置为`PointStyle.POINT`. 要获得球式积分，请执行以下操作：

```
XYSeriesRenderer renderer = new XYSeriesRenderer();
renderer.setPointStyle(PointStyle.CIRCLE);
renderer.setFillPoints(true);
mRenderer.addSeriesRenderer(renderer);
mRenderer.setPointSize(2.0f); 
```

# haskell - 带中缀函数的部分应用

> ID：10131300
> 
> 赞同：13
> 
> 时间：2012-04-12T20:28:18.197
> 
> 标签：haskell, functional-programming, currying, partial-application, operator-sections

虽然我对数学意义上的柯里化有点了解，但部分应用中缀函数是一个新概念，这是我在深入阅读《[**Learn You a Haskell for Great Good**](http://learnyouahaskell.com/) 》一书后发现的。

鉴于此功能：

```
applyTwice :: (a -> a) -> a -> a
applyTwice f x = f (f x) 
```

作者以一种有趣的方式使用它：

```
ghci> applyTwice (++ [0]) [1]  
[1,0,0]
ghci> applyTwice ([0] ++) [1]
[0,0,1] 
```

在这里，我可以清楚地看到结果函数传递了不同的参数，考虑到它是一个柯里化函数，这不会以正常方式发生（会吗？）。那么，Haskell 对中缀切片有什么特殊处理吗？它对所有中缀函数都是通用的吗？

* * *

*作为旁注，这是我学习 Haskell 和函数式编程的第一周，我仍在阅读这本书。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T20:37:48.043

是的，您可以通过指定其左操作数或右操作数来部分应用中缀运算符，而将另一个留空（正是在您编写的两个示例中）。

因此，与或`([0] ++)`相同（请记住，您可以通过括号将中缀运算符转换为标准函数），而等于.`(++) [0]``\x -> [0] ++ x``(++ [0])``\x -> x ++ [0]`

了解反引号 ( `` ) 的用法也很有用，它使您能够在中缀运算符中使用两个参数来转换任何标准函数：

```
Prelude> elem 2 [1,2,3]
True
Prelude> 2 `elem` [1,2,3] -- this is the same as before
True
Prelude> let f = (`elem` [1,2,3]) -- partial application, second operand
Prelude> f 1
True
Prelude> f 4
False
Prelude> let g = (1 `elem`) -- partial application, first operand
Prelude> g [1,2]
True
Prelude> g [2,3]
False 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-12T20:38:24.113

是的，这是工作中[的部分语法](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-300003.5)。

部分写为`( op e )`or `( e op )`，其中 op 是二元运算符， e 是表达式。部分是二元运算符部分应用的便捷语法。

以下身份持有：

```
(op e)  =   \ x -> x op e
(e op)  =   \ x -> e op x 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T20:38:16.563

所有中缀运算符都可以在 Haskell 的部分中使用 - 除了`-`由于一元否定的奇怪性。这甚至包括通过使用反引号转换为中缀的非中缀函数。您甚至可以将运算符转换为普通函数的公式视为双面部分：

> `(x + y)`-> `(+ y)`->`(+)`

部分（大多数情况下，有一些罕见的极端情况）被视为简单的 lambda。`(/ 2)`是相同的：

> `\x -> (x / 2)`

和`(2 /)`相同`\x -> (2 / x)`，例如使用非交换运算符。

从理论上讲，这里没有什么非常有趣的事情。它只是部分应用中缀运算符的语法糖。它经常使代码更漂亮一点。（当然也有反例。）

# css - 将四个不同的 div 垂直居中在一个内

> ID：10131301
> 
> 赞同：1
> 
> 时间：2012-04-12T20:28:20.193
> 
> 标签：css, html, alignment

我有四个 div，每个 div 都是包含多行的列表。它们都以相对定位向左浮动，因此都排成一排。我想将它们垂直居中在 div“容器”中。我怎样才能做到这一点？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<style type="text/css">
.titlefont{
font-family:"Lucida Console", Monaco, monospace;    
}

div#saucelistdiv{
float:left;
    width:auto;
    margin:10px;
    vertical-align:middle;
    height:auto;
}
div#meatlistdiv{
    float:left;
    width:auto;
    margin:10px;
    vertical-align:middle;
    height:auto;
}
div#container{
    height:600px;
    border:2px solid red;
    width:auto;
}
#grainlistdiv{
float:left;
    width:auto;
    margin:10px;
    vertical-align:middle;
    height:auto;
}
div#veggielistdiv{
    float:left;
    width:auto;
    margin:10px;
    vertical-align:middle;
    height:auto;
}
#tablelist{
    border:2px solid;
}
</style>
<body>

<center>
<div id="container">
<div id="saucelistdiv"><table id="tablelist">
    <span class="titlefont">SAUCES</span>
    <tr><td><input type="radio" name="rbbase" value="Pizza Sauce" checked="checked" />Pizza Sauce</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Cheese Sauce" />Cheese Sauce</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Barbecue Sauce" />Barbecue Sauce</td></tr>

    <tr><td><input type="radio" name="rbbase" value="Salsa" />Salsa</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Alfredo Sauce" />Alfredo Sauce</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Taco Sauce" />Taco Sauce</td></tr>

    <tr><td><input type="radio" name="rbbase" value="Tzatziki (Cucumber) Sauce" />Tzatziki (Cucumber) Sauce</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Chicken Gravy" />Chicken Gravy</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Beef Gravy" />Beef Gravy</td></tr>

    <tr><td><input type="radio" name="rbbase" value="Ranch Dressing" />Ranch Dressing</td></tr>
    <tr><td><input type="radio" name="rbbase" value="1000 Island Dressing" />1000 Island Dressing</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Parmesan Peppercorn Dressing" />Parmesan Peppercorn Dressing</td></tr>

    <tr><td><input type="radio" name="rbbase" value="Spaghetti Sauce" />Spaghetti Sauce</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Chili" />Chili</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Syrup" />Syrup</td></tr>

    <tr><td><input type="radio" name="rbbase" value="Garlic Butter" />Garlic Butter</td></tr>
    <tr><td><input type="radio" name="rbbase" value="Mayonnaise" />Mayonnaise</td></tr>

    </table>
    </div>

<div id="meatlistdiv">
<span class="titlefont">MEATS</span>
    <table class="center" id="tablelist">

      <tr><td><input type="checkbox" name="cbing" value="Sausage" />Sausage<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Pepperoni" />Pepperoni<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Diced Ham" />Diced Ham<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Beef" />Beef<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Bacon" />Bacon<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Lamb" />Lamb<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Bratwurst" />Bratwurst<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Chicken" />Chicken<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Shrimp" />Shrimp<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Crab" />Crab<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Seasoned Beef" />Seasoned Beef<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Corned Beef" />Corned Beef<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Turkey" />Turkey<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Eggs" />Eggs<br /></td></tr>

    </table>
  </div>

  <div id="grainlistdiv">
  <span class="titlefont">GRAINS</span>
    <table class="center" id="tablelist">
      <tr><td><input type="checkbox" name="cbing" value="Elbow Macaroni" />Elbow Macaroni<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Spaghetti Noodles" />Spaghetti Noodles<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Oyster Crackers" />Oyster Crackers<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Goldfish" />Goldfish<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Mini Pancakes" />Mini Pancakes<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Pretzels" />Pretzels<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Stuffing" />Stuffing<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Taco Chips" />Taco Chips<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Ramen Noodles" />Ramen Noodles<br /></td></tr>
    </table>
  </div>

    <div id="veggielistdiv">
    <span class="titlefont">VEGGIES/OTHER</span>
    <table class="center" id="tablelist">
      <tr><td><input type="checkbox" name="cbing" value="Lettuce" />Lettuce<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Tomatoes" />Tomatoes<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Onions" />Onions<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Green Peppers" />Green Peppers<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Green Olives" />Green Olives<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Black Olives" />Black Olives<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Pineapple" />Pineapple<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Sauerkraut" />Sauerkraut<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Broccoli" />Broccoli<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Cauliflower" />Cauliflower<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Jalapeno Peppers" />Jalapeno Peppers<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Pickles" />Pickles<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Cucumbers" />Cucumbers<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Carrots" />Carrots<br /></td></tr>
      <tr><td><input type="checkbox" name="cbing" value="Mushrooms" />Mushrooms<br /></td></tr>
    </table>
  </div>

     </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:44:32.693

垂直 aling 仅适用于桌子。所以你可以使用 div 作为表格，这样：

```
div#container
{
    height: 600px;
    border: 2px solid red;
    width: auto;
    //add these rows
    display: table-cell; 
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:46:08.540

我相信，如果你改变你的`float:left;`，`display:inline-block;`那么你会得到你正在寻找的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:48:29.080

您也可以使用一些 javascript 来完成此操作（这使用 JQuery）：

```
(document).ready( function () {
    $("#container").children().each( function () {
        var parentHeight = $(this).parent().height();
        var myHeight = $(this).height();
        $(this).css('top', (parentHeight - myHeight) / 2);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:00:07.350

如果你给 div#container 一个宽度大小并将边距设置为自动，它应该可以工作：

```
div#container{
    height:600px;
    border:2px solid red;
    width:700px;
    margin:auto;
} 
```

*编辑 - 好吧，我不确定我是否真的理解了这个问题，但它确实让它看起来不错:-)

# iphone - 当前城市为零；

> ID：10131302
> 
> 赞同：1
> 
> 时间：2012-04-12T20:28:29.757
> 
> 标签：iphone, objective-c, ios, geolocation

我正面临一个奇怪的问题，我试图使用反向地理编码器获取当前的城市、州和国家。州和国家都很好，但城市是“零”。谁能帮帮我。

我正在使用以下代码：

```
- (void)reverseGeocoder:(MKReverseGeocoder*)geocoder didFindPlacemark:(MKPlacemark*)place
{
    NSDictionary *addressDict = place.addressDictionary;
    self.currentCity = [addressDict objectForKey:(NSString*)kABPersonAddressCityKey];
    self.currentState = [addressDict objectForKey:(NSString*)kABPersonAddressStateKey];
    self.currentCountry = place.country;
    self.currentCountryCode = place.countryCode;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:42:54.740

它使用谷歌地图，所以去这里看看如何直接检查

[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

检查您所在位置的纬度/经度：

[http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true)

你有城市吗？如果是这样，我建议尝试捕获您的应用程序和反向地理编码服务器之间的网络流量。一种简单的方法是安装 Wireshark，然后使用模拟器和自定义位置（在最新的模拟器中支持）。

# mysql - 如何导出通过 PHPMyAdmin 中的 Join 查询创建的表？

> ID：10131305
> 
> 赞同：2
> 
> 时间：2012-04-12T20:28:45.213
> 
> 标签：mysql, phpmyadmin

我在 PHPMyAdmin 中输入了一个连接查询并创建了一个表。我如何导出它？

我似乎只能导出现有表，而不是生成的表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:27:19.397

不确定您使用的是哪个版本的 PHPMyAdmin（我的 3.3.9），但运行查询后，您应该会在底部看到一个标有“查询结果操作”的灰色框。在那个框中是“导出”的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-01T17:20:06.977

我正在使用 phpmyadmin 4.8.5 并且导出到 sql 选项仍然没有显示。

两种可能的解决方法：

1.  正如[John_Green](https://stackoverflow.com/questions/10131305/how-do-i-export-a-table-i-created-through-a-join-query-in-phpmyadmin#comment12986600_10131305)建议的那样，使用结果创建一个新表，然后导出该表：

例如：

```
CREATE TABLE foobar AS
SELECT * FROM foo
JOIN bar ON (foo.id = bar.id) 
```

2.  [在MySQL Workbench](https://www.mysql.com/products/workbench/)中运行查询，在 Result Grid 中选择 Export 按钮，然后切换到 .sql 文件。系统将提示您使用要使用的表名。

# c - 如何更改文件权限的格式？

> ID：10131309
> 
> 赞同：0
> 
> 时间：2012-04-12T20:29:17.620
> 
> 标签：c, permissions, formatting, format, ls

好吧，我正在用 C 语言编写 ls 程序，但我遇到了问题。我必须以这种格式显示文件权限：

```
drwxr-xr-x 
```

但是我将权限作为 int 获得，因为这会将这个值作为 int 返回：

```
lstat(file->d_name, &info);
printf("%d \n", info.st_mode); 
```

例如，这显示：`$ 33188`

如何将 int 权限转换为`drwxr-xr-x`？

非常感谢。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:44:39.623

文件的模式是一组权限和文件类型字段。这些标志在[`man stat.h`](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/sys/stat.h.html).

您可以像这样从模式中提取信息：

```
switch(mode & S_IFMT) {
  case S_IFDIR:
    mode_text[0] = 'd';
    break;
  /* add other possibilities here */
  default:
    mode_text[0] = '-';
}
mode_text[1]= (mode & S_IRUSR) ? 'r' : '-';
mode_text[2]= (mode & S_IWUSR) ? 'w' : '-';
/* the third one is special; can indicates setuid as well */
mode_text[3]= (mode & S_IXUSR) ? (mode & S_ISUID) ? 's' : 'x' : '-'; 
```

等为组，其他。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:32:36.647

的文档`chmod`描述了两者之间的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:39:30.553

该`info coreutils ls`文档告诉您如何`ls`决定如何转换`st_mode`文件模式位。但是，对于基本实现，`ls`您可以依次检查每个适当的位并输出适当的字母（如果已设置或未设置`-`）。

# apache - 基于可用压缩库有条件地 gzip 文件

> ID：10131312
> 
> 赞同：0
> 
> 时间：2012-04-12T20:29:24.443
> 
> 标签：apache, .htaccess

我正在尝试在网站上设置 gzip 压缩，但我们不确定它将托管在哪里，我希望能够支持 mod_gzip（如果可用）。

我想做的是这样的：

```
<IfModule mod_gzip.c>
  # mod_gzip rules
<IfOtherModule mod_deflate.c>
  # mod_deflate rules
</IfModule> 
```

apache configs 允许这样做吗？如果 mod_gzip 已经完成了它的工作， mod_deflate 是否足够聪明以至于不能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:24:45.907

```
<IfModule mod_gzip.c>
  # mod_gzip rules
</IfModule>

<IfModule !mod_gzip.c>
  <IfModule mod_deflate.c>
    # mod_deflate rules
  </IfModule>
</IfModule> 
```

虽然我会改变顺序并首先尝试 mod_defate。mod_gzip 不再处于开发阶段，因此您最好使用 mod_deflate（顺便说一下，它也使用 gzip，而不是 deflate，正如其名称所暗示的那样）。

# hibernate - 在 postgresql 数据库上使用休眠插入特定 ID

> ID：10131320
> 
> 赞同：0
> 
> 时间：2012-04-12T20:29:50.810
> 
> 标签：hibernate, postgresql

Java 休眠和 Postgresql

桌子：

```
CREATE TABLE players
(
  id serial NOT NULL,
  ....
) 
```

HBM:

```
<class name="Player" table="players">
        <id name="id" column="id">
            <generator class="identity" />
        </id>
... 
```

我希望能够在某些情况下插入特定 ID，因为我从另一个数据源导入数据并且需要保持 ID 一致性。

使用休眠插入时，即使我设置了对象的 ID，它仍然会插入而不使用我指定的 ID。

是否可以更改设置以支持在插入时指定 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:22:53.840

注意：我意识到 OP 主要是专门询问 Hibernate，我承认，我没有这方面的经验。我只是觉得有必要讨论一下为什么这对我来说似乎不适合任何对象关系模型。

我不确定使用 ORM 直接导入数据是否是个好主意。如果您正在导入数据并且导入的数据的 ID 在尚未生成的范围内，则您最终应该会得到重复项（如果以这种方式设置，则可能会出现主键问题）。Postgresql 创建单独`sequence`的对象来维护不受使用它们的表影响的序列。任何使用 ORM 的解决方案也应该解决这个问题。看起来可以通过 Postgresql 评估来操作`setval`（参见 [http://www.postgresql.org/docs/9.1/static/functions-sequence.html](http://www.postgresql.org/docs/9.1/static/functions-sequence.html)）

如果您仍然需要为此使用 ORM，我会很想创建一些数据“登陆”表，使用您的 ORM 工具为它们生成类，然后编写一些 SQL 函数，用您刚刚的数据修补您的实时表上传。可能还有另一种更好的方法，但我想看看。

# ruby - “无法列出数据包中的数据包项”的可能根本原因是什么？

> ID：10131322
> 
> 赞同：1
> 
> 时间：2012-04-12T20:29:54.433
> 
> 标签：ruby, chef-infra

我不断从 Chef 那里收到此错误，但找不到任何文档或其他拥有该错误的人。

可能的根本原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:53:18.233

当 Chef 找不到数据包“id”时，您通常会收到此错误

假设我想加载以下 data_bag

```
data_bags
    apps
        mywebserver.json

apps
    recipes
        default.rb

[mywebserver.json]
{
     "id": "mywebserver"
}

[default.rb]
data_bag_item("apps", "mywebserver")  # The id specified in the json 
```

我相信厨师不关心 data_bag_item 文件名，而只关心数据包项 json 文件之一中指定的“id”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:31:58.590

更多信息在这里会有所帮助。当您看到此内容时，您打算采用什么工作流程？

我将假设这不是一个刀呼叫。我试图在chef-gem中围绕您的错误来源进行一些调试，并调用数据包列表和数据包显示。似乎都没有碰到 mixin 代码。

以下是您在 mixin/language 下的 chef gem 中的错误来源

```
def data_bag(bag)
  DataBag.validate_name!(bag.to_s)
  rbag = DataBag.load(bag)
  rbag.keys
  rescue Exception
    Log.error("Failed to list data bag items in data bag: #{bag.inspect}")
  raise
end 
```

现在我不知道是什么在访问该 mixin 代码，因为 gem 中对 data_bag() 的所有其他引用都引用了 data_bag_item 对象周围的代码。

这是您创建的自定义代码吗？您是否有可能引用了错误的模块？

# c# - Entity Framework 返回 0 行，当同一个 SQL 命令返回很多行时

> ID：10131325
> 
> 赞同：0
> 
> 时间：2012-04-12T20:30:11.953
> 
> 标签：c#, asp.net-mvc-3, entity-framework, linq-to-entities

我有一个模型（M），其中包含两个表（A 和 B）。当我从 MVC 应用程序运行代码以从 (A) 中获取行时，如下所示：

```
var context =new ClaimsHistorical();
context.CommandTimeout = 120;
IList<ClaimsSLAMonth> list = context.ClaimsSLAMonths.Where(x=>x.timeperiod == "2012-03").ToList();
var final = list.Select(c => new[]{
            c.branch.ToString().Trim(), c.NLPR_SLA.ToString() ?? null, c.NLPR_count.ToString() ?? null, c.NLPR_AvgLocktime.ToString() ?? null, c.NLPR_PIn.ToString() ?? null, c.NLPR_POut.ToString() ?? null,
            c.NLGA_SLA.ToString() ?? null, c.NLGA_count.ToString() ?? null, c.NLGA_AvgLocktime.ToString() ?? null, c.NLGA_PIn.ToString() ?? null, c.NLGA_POut.ToString() ?? null
        }); 
```

当我为 list.Select 设置断点以检查命令时，它为我提供了在 SSMS 中工作的 SQL

它返回 0 行（无错误、警告、消息）。我复制了 EF 正在“执行”的 SQL 查询并将其粘贴到 SQL Server Management Studio，它返回了大约 5 行。

此外，当我运行完全相同的代码时，除了将表名替换为 (B) 之外，我得到了正确的行。我试图重新创建模型，但它仍然没有返回任何内容。我是否遗漏了一些明显的东西，或者有什么严重的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:18:32.480

那么显然重新启动计算机解决了问题？

如果有人对此有任何可能的原因（缓存、设置等），这将有助于防止这种情况再次发生。

# java - Java Racing 游戏：当我重新绘制汽车对象时，JPanel 组件会移动

> ID：10131327
> 
> 赞同：0
> 
> 时间：2012-04-12T20:30:16.043
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

![快照](../Images/dd2a00314d37f03fe74c7292efe404df.png)我使用 CarPanel 创建了 2 个汽车对象。然后我用 keylistener 重新绘制对象，使它看起来像向前移动。但问题是整个面板都在移动，即使我只是增加了到“x”坐标的距离。如果我要调整窗口大小，它有时甚至不会清除组件。

```
public class RacingCars extends JFrame {
    CarPanel car1;
    CarPanel car2;

    //Constructor
    public RacingCars(){
        setLayout(new GridLayout(2,1));
        car1 = new CarPanel('w',Color.RED);
        car2 = new CarPanel('k',Color.blue);

        car1.setBackground(Color.black);
        this.add(car1, BorderLayout.NORTH);
        this.add(car2, BorderLayout.SOUTH);

        this.addKeyListener(new keyListener());
    }

    class keyListener extends KeyAdapter{
        public void keyPressed(KeyEvent e){
            if(e.getKeyChar()=='w'){
                car1.moveCar();
            }
            if(e.getKeyChar()=='k'){
                car2.moveCar();
            }
        }
    }
} 
```

车载面板::

```
public class CarPanel extends JPanel {

    private char forwardKey = 'w';
    private boolean reachedTarget = false;
    private Color color = Color.blue;
    private int x= 10;
    private int y= 10;

    private int panelWidth;
    private int panelHeight;    

    //default Constructor
    public CarPanel(){      
    }

    //overloaded Constructor
    public CarPanel(char key, Color color){
        this.forwardKey=key;
        this.color = color;
    }

    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        panelWidth= getWidth();
        panelHeight= getHeight();

        //draw a Car
        g.setColor(color);

        //polygon points
        int t_x[]= {x+10,x+20,x+30,x+40};
        int t_y[]= {y+10,y,y,y+10};

        g.fillPolygon(t_x,t_y,t_x.length);
        g.fillRect(x, y+10, 50, 10);
        g.fillArc(x+10, y+20, 10, 10, 0, 360);
        g.fillArc(x+30, y+20, 10, 10, 0, 360);
    }

    @Override
    public Dimension getPreferredSize() {
       return new Dimension(750,100);
    }

    public void moveCar(){
        if(this.x < panelWidth){
            this.x+=10;
            repaint();
        }
    }
} 
```

![调整大小后](../Images/57668bc51edf14c205db8dfef9433d42.png)

> 解决方案

因为这段代码，我总是有额外的空间。但不知道它应该如何导致这种奇怪的行为。

```
 /*
public int getX(){
        return this.x;
    }
*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:42:08.750

> 但问题是整个面板移动，..

不，它没有。“绿点”证明了这一点。

![在此处输入图像描述](../Images/0394e6bee9a87da61fb8928db0fb482d.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class RacingCars extends JFrame {
    CarPanel car1;
    CarPanel car2;

    //Constructor
    public RacingCars(){
        setLayout(new GridLayout(2,1));
        car1 = new CarPanel('w',Color.RED);
        car2 = new CarPanel('k',Color.blue);

        car1.setBackground(Color.black);
        this.add(car1, BorderLayout.NORTH);
        this.add(car2, BorderLayout.SOUTH);

        this.addKeyListener(new MyKeyListener());
    }

    class MyKeyListener extends KeyAdapter{
        public void keyPressed(KeyEvent e){
            if(e.getKeyChar()=='w'){
                car1.moveCar();
            }
            if(e.getKeyChar()=='k'){
                car2.moveCar();
            }
        }
    }

    public static void main(String[] args) {
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                RacingCars rc = new RacingCars();
                rc.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                rc.pack();
                rc.setVisible(true);
            }

        });
    }
}

class CarPanel extends JPanel {

    private char forwardKey = 'w';
    private boolean reachedTarget = false;
    private Color color = Color.blue;
    private int x= 10;
    private int y= 10;

    private int panelWidth;
    private int panelHeight;

    //default Constructor
    public CarPanel(){
    }

    //overloaded Constructor
    public CarPanel(char key, Color color){
        this.forwardKey=key;
        this.color = color;
    }

    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        g.setColor(Color.GREEN);
        g.fillOval(0,0,25,25);

        panelWidth= getWidth();
        panelHeight= getHeight();

        //draw a Car
        g.setColor(color);

        //polygon points
        int t_x[]= {x+10,x+20,x+30,x+40};
        int t_y[]= {y+10,y,y,y+10};

        g.fillPolygon(t_x,t_y,t_x.length);
        g.fillRect(x, y+10, 50, 10);
        g.fillArc(x+10, y+20, 10, 10, 0, 360);
        g.fillArc(x+30, y+20, 10, 10, 0, 360);
    }

    @Override
    public Dimension getPreferredSize() {
       return new Dimension(750,100);
    }

    public void moveCar(){
        if(this.x < panelWidth){
            this.x+=10;
            repaint();
        }
    }
} 
```

# java-me - Hello World J2ME 应用程序在移动设备上启动后立即退出 - Karbonn K25

> ID：10131328
> 
> 赞同：1
> 
> 时间：2012-04-12T20:30:16.480
> 
> 标签：java-me, lcdui, midp-2.0

我能够将一个由 jar 和 jad 文件组成的 J2ME 应用程序安装到我的手机中。但是一旦启动它就会终止。我无法查看它是否真的打印 Hello World。

## HelloWorld.java

```
    导入 javax.microedition.lcdui.*；
    导入 javax.microedition.midlet.*；

    公共课 HelloWorld
        扩展 MIDlet
        实现 CommandListener {
      私人表格 mMainForm;

      公共HelloWorld（）{
        mMainForm = new Form("HelloWorld");
        mMainForm.append(new StringItem(null, "Hello, MIDP!"));
        mMainForm.addCommand(new Command("Exit", Command.EXIT, 0));
        mMainForm.setCommandListener(this);
      }

      公共无效startApp（）{
        Display.getDisplay(this).setCurrent(mMainForm);
      }

      公共无效 pauseApp() {}

      public void destroyApp(boolean unconditional) {}

      public void commandAction(Command c, Displayable s) {
        notifyDestroyed();
      }
    }

```

## 清单.mf

```
清单版本：1.0
MIDlet 名称：HelloWorld
MIDlet-1：HelloWorld，，HelloWorld
MIDlet 供应商：Ankit Gupta
MIDlet 版本：1.0.0
MIDlet-描述：硬件
MIDlet 信息 URL：http://google.com
微版配置文件：MIDP-2.0
MicroEdition-配置：CLDC-1.0

HelloWorld.jad
----------------------------
MIDlet-1：HelloWorld，，HelloWorld
MIDlet 名称：HelloWorld
MIDlet 版本：1.0.0
MIDlet 供应商：Ankit Gupta
MIDlet-Jar-URL：HelloWorld.jar
MIDlet 罐子大小：1212
微版配置文件：MIDP-2.0
MicroEdition-配置：CLDC-1.0

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T13:59:12.337

```
public void commandAction(Command c, Displayable s) {
notifyDestroyed();
} 
```

仅对要终止应用程序的命令调用 notifyDestroyed()，将其置于 if 条件中，例如

```
if(c == Command.BACK){
notifyDestroyed();
} 
```

# android - 使用 LazyAdapter 和 getAdapter() 检索值时遇到问题

> ID：10131329
> 
> 赞同：1
> 
> 时间：2012-04-12T20:30:21.770
> 
> 标签：android, listview, onclicklistener, android-lazyadapter

我正在使用 LazyAdapter 来显示列表视图，并且我想在单击项目时将值传递给另一个活动。但是我无法检索该值。请帮帮我。MainActivity.java

```
 list=(ListView)findViewById(R.id.list);
        //transparent so when scrolling listview won't turn black.
        list.setCacheColorHint(Color.TRANSPARENT); 
         // Getting adapter by passing JSON data ArrayList
         adapter=new LazyAdapter(ReviewShowActivity.this, reviewlist);
         list.setAdapter(adapter);

         list.setOnItemClickListener(new OnItemClickListener() {

            @SuppressWarnings("unchecked")
            @Override
             public void onItemClick(AdapterView<?> parent, View view,
                     int position, long id) {

                //Having Trouble with this line, how to retrieve value???
                HashMap<String, String> map2 = (HashMap<String, String>) list.getAdapter().getItem(position);

                Intent in = new Intent(getApplicationContext(), SingleReviewActivity.class);
                in.putExtra(TAG_NAME, map2.get(TAG_NAME));
                in.putExtra(TAG_USERREVIEW, map2.get(TAG_USERREVIEW));
                in.putExtra(TAG_DATE, map2.get(TAG_DATE));
                in.putExtra(TAG_THUMBURL, map2.get(TAG_THUMBURL));
                startActivity(in);
             }
         }); 
```

LazyAdapter.java

```
 public class LazyAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.reviewshow, null);

    TextView username = (TextView)vi.findViewById(R.id.username); // title
    TextView userreview = (TextView)vi.findViewById(R.id.userreview); // artist name
    TextView numlikes = (TextView)vi.findViewById(R.id.numlikes); // duration
    HashMap<String, String> map = new HashMap<String, String>();
    map = data.get(position);

     //Setting all values in listview
     username.setText(map.get(ReviewShowActivity.TAG_NAME));
     userreview.setText(map.get(ReviewShowActivity.TAG_USERREVIEW));
     numlikes.setText(map.get(ReviewShowActivity.TAG_NUMLIKES));
    return vi;
} 
```

日志猫

```
04-13 04:14:36.135: E/AndroidRuntime(23909): FATAL EXCEPTION: main
04-13 04:14:36.135: E/AndroidRuntime(23909): java.lang.ClassCastException:     java.lang.Integer
04-13 04:14:36.135: E/AndroidRuntime(23909):    at org.example.veniew.ReviewShowActivity$ReviewTask$1.onItemClick(ReviewShowActivity.java:221)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at  android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at android.widget.ListView.performItemClick(ListView.java:3561)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at android.os.Handler.handleCallback(Handler.java:587)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at android.os.Looper.loop(Looper.java:143)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at android.app.ActivityThread.main(ActivityThread.java:4277)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at java.lang.reflect.Method.invoke(Method.java:507)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 04:14:36.135: E/AndroidRuntime(23909):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:54:51.533

这是面对类似问题的人的答案。

```
public Object getItem(int position) { 
return data.get(position); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T10:00:02.020

也许此链接可以帮助您获取数据数组列表哈希图，将此代码放在 setonitemclicklistener

[关联](https://stackoverflow.com/a/32268268/2731489)

# c# - 第二个监视器/电视下的主 WPF 窗口的屏幕截图

> ID：10131333
> 
> 赞同：2
> 
> 时间：2012-04-12T20:30:38.673
> 
> 标签：c#, .net, wpf

我在第二台显示器上使用我的应用程序，有时在计算机的主显示器上使用。

如何获得第二台显示器的屏幕截图？

以下代码不适用于第二台显示器...

```
Graphics gfx;
Bitmap bmp = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
gfx = Graphics.FromImage(bmp);
gfx.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);

MemoryStream ms = new MemoryStream();
bmp.Save(ms, ImageFormat.Jpeg);
byte[] bitmapData = ms.ToArray(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:32:56.627

使用`Screen.AllScreens[1].Bounds`而不是`Screen.PrimaryScreen.Bounds`.

或者更可靠地获得第一个非主屏幕。

```
var secondScreen = Screen.AllScreens.Where(screen => !screen.Primary).FirstOrDefault(); 
```

检查`secondScreen == null`以了解您是否有第二个屏幕。

**编辑**：
您可能还对[`Screen.FromControl`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.fromcontrol.aspx)给出应用程序当前正在运行的屏幕感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:35:50.523

该代码不适用于您的第二个屏幕，因为它明确使用`Screen.PrimaryScreen`.

如果您想明确地从第二个显示器中提取（忽略您有 3…n 个显示器的情况），您可以替换`PrimaryScreen`为`AllScreens[1]`.

请记住，如果您断开第二个显示器，这将中断。

听起来您可能想捕获应用程序窗口而不是屏幕，以防应用程序不占用整个屏幕或跨越两个屏幕。WPF 本机具有此功能：[Get System.Drawing.Bitmap of a WPF Area using VisualBrush](https://stackoverflow.com/questions/6676072/get-system-drawing-bitmap-of-a-wpf-area-using-visualbrush)

# php - PHP：如何使变量在 create_function() 中可见？

> ID：10131335
> 
> 赞同：0
> 
> 时间：2012-04-12T20:30:40.183
> 
> 标签：php, preg-replace, global-variables, preg-replace-callback, create-function

这段代码：

```
$t = 100;
$str = preg_replace_callback("/(Name[A-Z]+[0-9]*)/",
                            create_function(
                                  '$matches',
                                  'return $matches[1] + $t;'
                            ), $func); 
```

如何使 $t 从 preg_replace() 函数中的 create_function() 可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:33:34.633

匿名[函数](http://php.net/functions.anonymous)可以工作，同时使用以下`use`语法：

```
$t = 100;
$str = preg_replace_callback("/(Name[A-Z]+[0-9]*)/",
    function($matches) use($t) // $t will now be visible inside of the function
    {
        return $matches[1] + $t;
    }, $func); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:37:08.167

您不能使变量可访问，但在您的情况下，您可以只使用该值：

```
$t = 100;
$str = preg_replace_callback("/(Name[A-Z]+[0-9]*)/",
                            create_function(
                                  '$matches',
                                  'return $matches[1] + ' . $t .';'
                            ), $func); 
```

但是，*强烈*建议您使用`function($matches) use ($t) {}`此处的语法 ( [http://php.net/functions.anonymous](http://php.net/functions.anonymous) )。

并且有 eval 修饰符`preg_replace`：

```
$str = preg_replace("/(Name[A-Z]+[0-9]*)/e", '$1+'.$t, $func); 
```

但我觉得你的函数在这里使用了错误的运算符 - 或者错误的模式/子模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:42:19.193

您可以使用`$GLOBALS`，但不强烈推荐...

```
$str = preg_replace_callback ( "/(Name[A-Z]+[0-9]*)/", create_function ( '$matches', 'return $matches[1] + $GLOBALS["t"];' ), $func ); 
```

更好的解决方案

[http://php.net/functions.anonymous](http://php.net/functions.anonymous)匿名函数 .. 如果您不喜欢使用它，您也可以在之后执行 `array_walk`( [http://php.net/manual/en/function.array-walk.php](http://php.net/manual/en/function.array-walk.php) )您已经以数组格式获得了结果，然后`$t`作为正确的函数参数传递

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T16:18:32.847

在匿名中只需使用关键字**use** 或**global** 在 create_function 中使用**global**

> 函数（）使用（$var1，$var2...等）{代码在这里}

或者

> create_func($args,'global $var1,$var2;代码在这里;');

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:36:25.450

以同样的方式让*任何*函数看到一个全局变量。

```
$str = preg_replace_callback("/(Name[A-Z]+[0-9]*)/",
                            create_function(
                                  '$matches',
                                  'global $t; return $matches[1] + $t;'
                            ), $func); 
```

# scala - 在 SBT 中更改 Scala 源目录

> ID：10131340
> 
> 赞同：18
> 
> 时间：2012-04-12T20:31:25.253
> 
> 标签：scala, sbt

我在指向 SBT 中 Scala 源文件的自定义目录时遇到了很多麻烦。

我希望 sbt 从给定目录而不是常规`src/main/scala`目录编译 scala 文件。

我已经尝试定义 .sbt 和 .scala 项目文件，设置`baseDirectory`, `scalaSource`（和.scala 文件中的`scalaSource` **s**）。我还玩弄了从系统绝对路径到相对路径的所有内容，但似乎没有任何效果。它无法在指定目录下找到任何 .scala 文件。

处理此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-12T21:21:50.090

*在build.sbt*试试这个：

```
scalaSource in Compile <<= (sourceDirectory in Compile)(_ / "foo") 
```

这将为 Scala 源代码生成一个目录*src/main/foo*。如果要使用任意目录，请执行以下操作：

```
scalaSource in Compile := file("/Users/heiko/tmp") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-13T13:40:58.460

更新 SBT 0.13.13 的答案 ->

`sourceDirectory in Compile := (baseDirectory( _ / "foo" )).value`

并为 SBT 0.13.13 添加源目录（而不仅仅是替换它）->

`unmanagedSourceDirectories in Compile += (baseDirectory( _ / "foo" )).value`

# c# - 如何制作正确调用使用泛型的操作的表单？

> ID：10131346
> 
> 赞同：0
> 
> 时间：2012-04-12T20:31:51.280
> 
> 标签：c#, asp.net-mvc-3, generics, razor

在 ASP.NET MVC3 C# 中，我想使用此签名进行操作：

```
public ActionResult Restore<T>(int entityId, string redirect) where T : class 
```

我无法弄清楚如何通过用户操作从视图中正确调用此操作。是否可以从视图中传递这样的类型？

也许类似于：

```
 @using (Html.BeginForm("Restore", "Global", new { T = @m })) 
```

也许签名可以在保留功能的同时改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:36:47.280

不，开箱即用是不可能的。它归结为路由代码不是通用类型感知的。泛型类型在内部存储的方式与它们在代码中表示的方式大不相同，因为此类方法名称的比较方式不同。

如果您编写自己的扩展点，这可能是可能的，但代码可能存在其他不期望出现这种行为的问题。您还必须编写许多自己的辅助方法，而不是使用现有的。

简而言之，在我看来，这不值得尝试。

# ios5 - iOS中的自定义图像“更多”选项卡和更多项目中的图像颜色

> ID：10131351
> 
> 赞同：1
> 
> 时间：2012-04-12T20:32:21.820
> 
> 标签：ios5, uitabbar

有什么方法可以为 iOS 中的“更多”选项卡设置自定义图像？

另一方面，当我单击更多选项卡时出现的项目图像显示为黑色。有没有办法将此图像设置为彩色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:47:25.190

您可以尝试像这样实现自定义 tabBar。

[https://github.com/judges/RXCustomTabBar](https://github.com/judges/RXCustomTabBar)

# javascript - 组织js原型方法

> ID：10131352
> 
> 赞同：1
> 
> 时间：2012-04-12T20:32:32.980
> 
> 标签：javascript, methods, prototype

在尝试了 js 的原型继承之后，我发现我并不热衷于在对象之外声明对象的方法：

```
function obj(){
  this.averyday='i\'m shuffle\'n';
  this.gibmo='dinero';
  this.pullOut='that\'s what she said lol';
}

obj.prototype.alertProp=function(){
    alert(this.averyday);
}
obj.prototype.alertProp2=function(){
    alert(this.gibmo);
} 
```

所以我想出了一种方法来将我的方法组织到一个命名空间中

```
obj.prototype.m={
    //i'm passing in the object instance so the mathods can have access to it's properties
    alertProp:function(that){
          alert(that.theObj.everyday);
    },
    alertProp2:function(that){
          alert(that.myObj.gibmo+' '+that.myObj.someVal); // alerts "dinero some other value to be use "
    }
} 
var myobj = new obj; 
```

然后使用我只需调用方法并传入对象实例（如果方法需要修改对象的属性）

```
myobj.m.alertProp({theObj:myobj,someVal:'some other value to be use'}) //alerts "i'm shuffle'n" 
```

所以这里有一些我注意到的优点：

优点：

1) 将方法组织到一个集中区域。

2) 只访问一次对象的“原型”（实际上使用更少的代码）。

3）似乎更具可读性（至少对我来说）。

缺点：...这是我需要你们帮助的地方，有人认为这样做有什么问题吗？我概述的专业人士有任何性能问题或任何问题等......？

还有人看到我可能没有看到或不明显的任何其他优点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:53:51.123

我觉得它有点复杂，这就是我喜欢这样做的方式：

```
MyObject = function (options) {
   this.init(options);
};

MyObject.prototype = {
  /**
   * Documentation
   */
  variable1: null,

  init: function (options) {
    // do something with options.
  },

  alertVariable: function () {
    alert(this.variable1);
  }
}; 
```

所以你不必担心发送额外的参数，你只需调用它。

- - - - - - - - - - - - - - 编辑 - - - - - - - - - - - ------------

好吧，我不知道我是否做对了，但经过一番阅读，我相信这将是“修复构造函数”的意思。如果我创建这样的对象：

```
Foo = function () {
  // Do something
}; 
```

然后`Foo.prototype.constructor == Foo`，正如人们所期望的那样。我的方法的问题（感谢 Raynos）是当我这样做时：

```
Foo.prototype = {...}; 
```

我正在覆盖 Foo 的所有原型，所以，`Foo.property.constructor != Foo`这不是我们所期望的！取而代之的是，我们有那个`Foo.property.constructor == Object.prototype.constructor`。

那么，我们如何修复它呢？

```
Foo.prototype = {
  constructor: Foo, // <-- FIXED!
  ...
}; 
```

达达！

（这很有帮助：[http](http://beej.us/blog/data/javascript-prototypes-inheritance/) ://beej.us/blog/data/javascript-prototypes-inheritance/ ）

# c# - 如何在 Listbox 上打印下一行

> ID：10131364
> 
> 赞同：0
> 
> 时间：2012-04-12T20:32:57.933
> 
> 标签：c#

我一直在为这个问题而烦恼，我的 ToString 是一个接一个地重复，而不是掉到下一行。

如图所示，第二个事件名称应该在下面的行中。

![问题](../Images/4fb127053771513585b1bb2b8caec4b6.png)

```
//ToString method in Event Class
public override string ToString()
    {
        return "\nEvent name : " + m_evName + "\n Date :" + m_evDate + "\n";
    }

//print method in class
 public String PrintEvents()
    {
        StringBuilder retev = new StringBuilder("");

        foreach (Event e in m_events)
        {
            retev.Append(e.ToString() + "\n");
        }
        return retev.ToString();
    }

//Foreach that displays the text
private void cboListEv_SelectedIndexChanged(object sender, EventArgs e)
    {
        String SelectedVenue = cboListEv.Text;

        List<Venue> found = plan.selectVen(SelectedVenue);

        lstEvents.Items.Clear();

        foreach (Venue v in found)
        {
                lstEvents.Items.Add(v.PrintEvents());
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:34:19.783

无法`ListBox`使用标准为每个项目打印多个文本行`ListBox`。尝试使用 a`TextBox`代替， with`Multiline = true`和只读模式。它将达到类似的效果。

除此之外，您还需要使用支持多行数据的自定义项模板来绘制自己的自定义 ListBox 控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:52:18.790

`ListBox`项目不支持多行字符串。但是，您可以制作`ListBox`'s `DrawMode` `OwnerDrawVariable`，然后将以下内容连接到它的`MeasureItem`和`DrawItem`事件：

```
 internal int CountOccurrences(string haystack, string needle) {
        int n = 0, pos = 0;
        while((pos = haystack.IndexOf(needle, pos)) != -1) {
            n++;
            pos += needle.Length;
        }
        return n;
    }

    void ListBox1MeasureItem(object sender, MeasureItemEventArgs e)
    {
        e.ItemHeight = (int)((CountOccurrences(((ListBox)sender).Items[e.Index].ToString(), "\n") + 1) * ((ListBox)sender).Font.GetHeight() + 2);
    }

    void ListBox1DrawItem(object sender, DrawItemEventArgs e)
    {
        string text = ((ListBox)sender).Items[e.Index].ToString();
        e.DrawBackground();
        using(Brush b = new SolidBrush(e.ForeColor)) e.Graphics.DrawString(text, e.Font, b, new RectangleF(e.Bounds.Left, e.Bounds.Top, e.Bounds.Width, e.Bounds.Height));
        e.DrawFocusRectangle();
    } 
```

-- 最终会是这样的：

![](../Images/4652e10b089d4683f5c136f6ed55b894.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:43:21.210

如果您为该`PrintEvents()`方法提供的项目集合，`ListBox`您可以让它为每个找到的事件添加一个项目。像这样的东西：

```
//print method in class
public String PrintEvents(ObjectCollection items)
{
    foreach (Event e in m_events)
        items.Add(e.ToString());
}

//Foreach that displays the text
private void cboListEv_SelectedIndexChanged(object sender, EventArgs e)
{
    String SelectedVenue = cboListEv.Text;

    List<Venue> found = plan.selectVen(SelectedVenue);

    lstEvents.Items.Clear();

    foreach (Venue v in found)
       v.PrintEvents(lstEvents.Items);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T20:51:33.610

向类中添加一个`Events`属性（`Venue`如果还没有的话）

```
public List<Event> Events
{
    get { return m_events; }
} 
```

然后像这样添加项目

```
foreach (Venue v in found) {
    foreach (Event e in v.Events) {
        lstEvents.Items.Add(e);
    }
} 
```

# windows-phone-7 - 在 WindowsPhone 中创建基于 Canvas 的组件

> ID：10131365
> 
> 赞同：0
> 
> 时间：2012-04-12T20:33:08.823
> 
> 标签：windows-phone-7

我需要使用多个 Canvas 元素创建一个可拖动组件，它将在同一个面板中多次使用。如何在 WindowsPhone 中完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:32:19.127

您可以创建一个包含许多 Canvas 元素的单独用户控件，并在同一个面板中多次使用此自定义控件。

[http://www.microsoft.com/expression/resources/BlendTraining/Day.aspx?day=3#Create](http://www.microsoft.com/expression/resources/BlendTraining/Day.aspx?day=3#Create)

# java - Java工厂方法缓存

> ID：10131367
> 
> 赞同：2
> 
> 时间：2012-04-12T20:33:19.307
> 
> 标签：java, design-patterns, concurrency

我必须开发一些类似生活游戏的东西。为此，我有一个名为`CellPosition`has`x`和`y`fields 的类。为了有效地使用内存，我想使用某种工厂方法。

`CellPosition.at(int x, int y)`这将返回一个`CellPosition`. 我想缓存具有相同`x, y`对的对象。我虽然是 a`List`或 a `HashMap`，但我不知道用什么作为键。`x`将and串联`y`在一个字符串中无疑是一个好主意。

另一方面，每次只创建一个对象并重新定义`equals()`方法来比较对象并丢弃任何缓存是否是个好主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:37:02.880

如果您不介意使用[Guava](http://code.google.com/p/guava-libraries/)，只需：

1.  使`CellPosition`实例不可变，然后
2.  使用[`Interner<CellPosition>`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Interner.html)（从 获得[`Interners`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Interners.html)），然后
3.  继续解决实际问题。

像这样的东西：

```
class CellPosition
{
    private static final Interner<CellPosition> CACHE = Interners.newStrongInterner();
    // or .newWeakInterner(), to allow instances to be garbage collected

    private final int x;
    private final int y;

    private CellPosition(int x, int y)
    {
        this.x = x;
        this.y = x;
    }

    public int x() { return x; }
    public int y() { return y; }

    public static CellPosition at(int x, int y)
    {
        return CACHE.intern(new CellPosition(x, y));
    }

    @Override
    public boolean equals(Object other) {/* TODO */}

    @Override
    public int hashCode() {/* TODO */}
} 
```

您也可以使用 Guava[`Cache`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/Cache.html)而不是`Interner`，但没有什么意义，因为您必须为缓存构造一个 int-pair 密钥——无论如何您都在为内部人员做这件事，而且在更少的 LoC 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:58:52.710

我认为缓存这些对象是没有必要的，特别是如果它们像你暗示的那样非常小。一开始你能做的正是你所描述的，`CellPosition`作为一个*值对象*，它是不可变的；并正确实施`equals`和`hashCode`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T07:38:20.627

您可以使用来自[jcabi-aspects 的](http://www.jcabi.com/jcabi-aspects/)[`@Cacheable`](http://www.jcabi.com/jcabi-aspects/apidocs-0.7.7/com/jcabi/aspects/Cacheable.html)AOP 和注释：

```
class CellPosition {
  @Cacheable(forever = true)
  public static CellPosition at(int x, int y) {
    // instantiate and return
  }
} 
```

# python - Popen 子处理问题

> ID：10131371
> 
> 赞同：3
> 
> 时间：2012-04-12T20:33:36.050
> 
> 标签：python, subprocess, popen

我正在尝试了解子处理模块，因此正在成为 hlds 服务器管理员。

我的目标是能够启动服务器实例并通过 dispatcher.py 发送所有命令来管理多个服务器，例如向子进程标准输入发送命令。

到目前为止，我已经进行了一些初步测试，但已经卡住了：]

```
#dispatcher.py
import subprocess

RUN = '/home/daniel/hlds/hlds_run -game cstrike -map de_dust2 -maxplayers 11'
#RUN = "ls -l" 

hlds = subprocess.Popen(RUN.split(), stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)

print hlds.communicate()[0]

print hlds.communicate()[1]

hlds.communicate('quit') 
```

我没有从 hlds 服务器获得任何标准输出，但如果我不将标准输出设置为 PIPE，它工作正常。而且`hlds.communicate('quit')`似乎也没有发送到 hlds 进程标准输入。ls -l 命令正确返回标准输出，但不返回 hlds。

所有帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:42:03.603

请参阅[`Popen.communicate`文档](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)（强调我的）：

> 与进程交互：将数据发送到标准输入。从 stdout 和 stderr 读取数据，直到到达文件结尾。**等待进程终止**。可选的输入参数应该是要发送到子进程的字符串，或者如果不应该向子进程发送数据，则为 None。

因此，每次运行进程只能调用`communicate` *一次*，因为它会等待进程终止。这就是为什么`ls -l`似乎有效 - 它立即终止，而`hlds`没有。

你需要这样做：

```
out, error = hlds.communicate('quit') 
```

如果您想发送`quit`并获取所有输出，直到它终止。

如果您需要更多交互性，则需要直接使用[`hlds.stdout`、`hlds.stdin`和`hlds.stderr`](http://docs.python.org/library/subprocess.html#subprocess.Popen.stdin)。

# silverlight - 将绑定源更改回 XAML 中容器内的视图模型

> ID：10131372
> 
> 赞同：0
> 
> 时间：2012-04-12T20:33:49.770
> 
> 标签：silverlight, data-binding

我正在使用**Silverlight 4**和**MVVM**模式。

我的视图模型有两个属性：

*   `SomeProperty`和
*   `MyCommand`

`SomeProperty`是一个复杂的类型并且有很多子属性。`MyCommand`是用于处理来自 Button 的命令的属性。

我有一个带有 Grid 的子窗口（视图），`LayoutRoot`它绑定到`SomeProperty`视图模型的属性。

```
<Grid x:Name="LayoutRoot" DataContext="{Binding SomeProperty, Mode=TwoWay}">
    ...
</Grid> 
```

但是，在 Grid 内部，我想将 Button 的`Command`属性绑定到`MyCommand`视图模型的属性：

```
<Button Command={Binding MyCommand} /> 
```

但这不起作用，因为`MyCommand`它是视图模型的属性，而不是视图模型属性的`SomeProperty`属性。（当我单击按钮时，它不会执行命令。）

任何人，有没有办法在 Silverlight 4 中使用数据绑定，这样我可以让容器 UI 元素`DataContext`显式设置其属性，但随后在容器内有一个不同的控件引用一个属性，该属性是 of 的兄弟（或父级或其他`DataContext`）包含控件？

我当前的解决方法是在视图的类中定义绑定，但我宁愿在 XAML 中使用它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:41:37.223

如果你给你的根元素（ChildWindow、UserControl 等等）一个名字，那么你可以使用 ElementName 来访问视图模型。

```
<UserControl x:Name="MyUserControl">
    <Grid x:Name="LayoutRoot" DataContext="{Binding SomeProperty, Mode=TwoWay}">
        <Button Command="{Binding MyCommand}" DataContext="{Binding DataContext, ElementName=MyUserControl}" />
    </Grid>
</UserControl> 
```

Or, here's another way to do the same thing.

```
<UserControl x:Name="MyUserControl">
    <Grid x:Name="LayoutRoot" DataContext="{Binding SomeProperty, Mode=TwoWay}">
        <Button Command="{Binding DataContext.MyCommand, ElementName=MyUserControl}" />
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:45:53.600

您尝试将数据上下文添加到绑定？datacontext 必须指向您的视图模型，因为默认数据上下文是父控件或父数据上下文，在这种情况下是您的布局根。

看到[这个](http://www.silverlight.net/learn/data-networking/binding/data-binding-to-controls-%28silverlight-quickstart%29)

而[这个](https://stackoverflow.com/questions/8340434/datacontext-and-command-in-silverlight-when-used-together-is-not-working)

我希望这会有所帮助。问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T01:41:57.927

I use a version of the BindableProxy described in this post: [http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx](http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx)

Above your Grid (probably within the UserControl.Resources) you would create:

```
<UserControl.Resources>
    <ns:BindableProxy x:Key="BindableProxy" />
<UserControl.Resources> 
```

Then, in the button binding:

```
<Button Command="{Binding DataSource.MyCommand, Source={StaticResource BindableProxy}}" /> 
```

# javascript - 如何在黑色背景下进行显示？

> ID：10131374
> 
> 赞同：1
> 
> 时间：2012-04-12T20:33:58.853
> 
> 标签：javascript, html, graphics

我有一个基于 HTML5 的游戏，我想以某种方式展示玩家的角色。

詹姆斯邦德枪管序列的结尾有点像我在说的：[http](http://www.youtube.com/watch?v=YNajzHjjYXQ) ://www.youtube.com/watch?v= YNajzHjjYXQ 0:17 左右，有一个圆圈显示下一个场景被包围黑色背景。在接下来的几秒钟内，圆圈扩大到覆盖整个屏幕，然后所有的黑色都消失了。我怎样才能在 HTML5 和 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:40:52.947

我可能会用画布来做，然后在填充之前剪一个圆圈。检查小提琴：http: [//jsfiddle.net/NgCVA/](http://jsfiddle.net/NgCVA/)

作为演示，我在页面上放置了一个图像（您的游戏角色），然后在其上方绝对放置了一个画布元素：

```
<img src="http://zef.me/wp-content/uploads/2009/10/funny-dog-costume.jpg"/>
<canvas width="330" height="396"></canvas>​ 
```

然后，您将在动画循环中反复用黑色填充整个画布，同时剪切一个越来越大的圆圈：

```
var canvas = document.getElementsByTagName('canvas')[0],
    ctx = canvas.getContext('2d'),

    cx = canvas.width / 2, 
    cy = canvas.height / 2, 
    r = 10, 

    R_MAX = 400;

ctx.fillstyle = '#000';

function draw() {
    r += 1;

    ctx.clearRect(0, 0, canvas.width, canvas.height);    

    ctx.save();
        // Draw clipping area
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(canvas.width, 0);
        ctx.lineTo(canvas.width, canvas.height);
        ctx.lineTo(0, canvas.height);
        ctx.closePath();
        ctx.moveTo(cx + r, cy);
        ctx.arc(cx, cy, r, 0, Math.PI*2, true);
        ctx.closePath();
        ctx.clip();

        // Fill everything not clipped
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.restore();

    if(r < R_MAX) setTimeout(draw, 10);
}

draw(); 
```

请记住，这是非常简单的动画，您可能想要做一些更优雅的事情（例如您自己的动画循环、缓动等）。重要的部分是在画布上进行剪切和填充的技术。

# security - JBoss - 配置 server.xml 连接器

> ID：10131376
> 
> 赞同：1
> 
> 时间：2012-04-12T20:34:09.957
> 
> 标签：security, ssl, jboss, ssl-certificate, keystore

我在 server.xml 中配置了 HTTP 连接器，添加了一些 ssl 功能。我尝试将我的 keyAlias 设置为某个证书的别名（不是密钥库的私钥）。然后，当我启动 JBoss 时，我得到如下信息：

```
[2012-04-12 17:01:37,236 ERROR [org.apache.coyote.http11.Http11Protocol] Error 
initializing endpoint
java.io.IOException: Alias name <somealias> do not indetify a key entry 
```

我也是 ssl 配置和 Web 安全核心概念的新手。谢谢你的耐心。

编辑：完整的堆栈跟踪如下：

```
at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:412)
at org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:378)
at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:135)
at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:497)
at org.apache.tomcat.util.net.JIoEndpoint.start(JIoEndpoint.java:514)
at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:203)
at org.apache.catalina.connector.Connector.start(Connector.java:1146)
at org.jboss.web.tomcat.service.JBossWeb.startConnectors(JBossWeb.java:601)
at org.jboss.web.tomcat.service.JBossWeb.handleNotification(JBossWeb.java:638)
at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.mx.notification.NotificationListenerProxy.invoke(NotificationListenerProxy.java:153)
at $Proxy46.handleNotification(Unknown Source)
at org.jboss.mx.util.JBossNotificationBroadcasterSupport.handleNotification(JBossNotificationBroadcasterSupport.java:127)
at org.jboss.mx.util.JBossNotificationBroadcasterSupport.sendNotification(JBossNotificationBroadcasterSupport.java:108)
at org.jboss.system.server.ServerImpl.sendNotification(ServerImpl.java:916)
at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:497)
at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
at org.jboss.Main.boot(Main.java:200)
at org.jboss.Main$1.run(Main.java:508)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:51:34.303

看起来您没有导入密钥属性。我建议您根据这两个文件查看您的步骤

```
http://docs.jboss.org/jbossweb/3.0.x/ssl-howto.html 
```

更短的版本在这里

```
http://www.agentbob.info/agentbob/79-AB.html 
```

# java - 套接字将多个客户端编程到一台服务器

> ID：10131377
> 
> 赞同：70
> 
> 时间：2012-04-12T20:34:10.137
> 
> 标签：java, sockets, applet, logging, port

您如何处理多个客户端连接到一台服务器？我有这个 LogServer.java

```
import javax.net.ssl.*;
import javax.net.*;
import java.io.*;
import java.net.*;

public class LogServer {
  private static final int PORT_NUM = 5000;
  public static void main(String args[]) {
    ServerSocketFactory serverSocketFactory =
      ServerSocketFactory.getDefault();
    ServerSocket serverSocket = null;
    try {
      serverSocket =
        serverSocketFactory.createServerSocket(PORT_NUM);
    } catch (IOException ignored) {
      System.err.println("Unable to create server");
      System.exit(-1);
    }
    System.out.printf("LogServer running on port: %s%n", PORT_NUM);
    while (true) {
      Socket socket = null;
      try {
        socket = serverSocket.accept();
        InputStream is = socket.getInputStream();
        BufferedReader br = new BufferedReader(
          new InputStreamReader(is, "US-ASCII"));
        String line = null;
        while ((line = br.readLine()) != null) {
          System.out.println(line);
        }
      } catch (IOException exception) {
        // Just handle next request.
      } finally {
        if (socket != null) {
          try {
            socket.close();
          } catch (IOException ignored) {
          }
        }
      }
    }
  }
} 
```

和一个嵌入式小程序，其中包含部分代码，例如

```
import java.io.*;
import java.util.logging.*;

public class LogTest
{
  private static Logger logger = Logger.getAnonymousLogger();

  public static void main(String argv[]) throws IOException
  {
    Handler handler = new SocketHandler("localhost", 5000);
    logger.addHandler(handler);
    logger.log(Level.SEVERE, "Hello, World");
    logger.log(Level.SEVERE, "Welcome Home");
    logger.log(Level.SEVERE, "Hello, World");
    logger.log(Level.SEVERE, "Welcome Home");
  }
} 
```

现在的问题是，如果我在服务器上运行“java LogServer”，它将打开应用程序并等待输入流，如果我打开我的站点，它将开始流式传输日志。但是，如果我使用其他计算机/网络再打开一个，则第二个站点不会记录流。似乎是因为第一个仍然绑定到端口 5000。

我该如何处理？套接字实际上如何与多个客户端/一台服务器一起工作？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-04-12T20:39:59.433

对于每个客户，您需要启动单独的线程。例子：

```
public class ThreadedEchoServer {

    static final int PORT = 1978;

    public static void main(String args[]) {
        ServerSocket serverSocket = null;
        Socket socket = null;

        try {
            serverSocket = new ServerSocket(PORT);
        } catch (IOException e) {
            e.printStackTrace();

        }
        while (true) {
            try {
                socket = serverSocket.accept();
            } catch (IOException e) {
                System.out.println("I/O error: " + e);
            }
            // new thread for a client
            new EchoThread(socket).start();
        }
    }
} 
```

和

```
public class EchoThread extends Thread {
    protected Socket socket;

    public EchoThread(Socket clientSocket) {
        this.socket = clientSocket;
    }

    public void run() {
        InputStream inp = null;
        BufferedReader brinp = null;
        DataOutputStream out = null;
        try {
            inp = socket.getInputStream();
            brinp = new BufferedReader(new InputStreamReader(inp));
            out = new DataOutputStream(socket.getOutputStream());
        } catch (IOException e) {
            return;
        }
        String line;
        while (true) {
            try {
                line = brinp.readLine();
                if ((line == null) || line.equalsIgnoreCase("QUIT")) {
                    socket.close();
                    return;
                } else {
                    out.writeBytes(line + "\n\r");
                    out.flush();
                }
            } catch (IOException e) {
                e.printStackTrace();
                return;
            }
        }
    }
} 
```

您还可以使用更高级的解决方案，使用 NIO 选择器，因此您不必为每个客户端创建线程，但这有点复杂。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-10-17T16:30:47.073

这是处理多个客户端的回显服务器......使用线程运行良好且良好

```
// echo server
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class Server_X_Client {
public static void main(String args[]){

    Socket s=null;
    ServerSocket ss2=null;
    System.out.println("Server Listening......");
    try{
        ss2 = new ServerSocket(4445); // can also use static final PORT_NUM , when defined

    }
    catch(IOException e){
    e.printStackTrace();
    System.out.println("Server error");

    }

    while(true){
        try{
            s= ss2.accept();
            System.out.println("connection Established");
            ServerThread st=new ServerThread(s);
            st.start();

        }

    catch(Exception e){
        e.printStackTrace();
        System.out.println("Connection Error");

    }
    }

}

}

class ServerThread extends Thread{  

    String line=null;
    BufferedReader  is = null;
    PrintWriter os=null;
    Socket s=null;

    public ServerThread(Socket s){
        this.s=s;
    }

    public void run() {
    try{
        is= new BufferedReader(new InputStreamReader(s.getInputStream()));
        os=new PrintWriter(s.getOutputStream());

    }catch(IOException e){
        System.out.println("IO error in server thread");
    }

    try {
        line=is.readLine();
        while(line.compareTo("QUIT")!=0){

            os.println(line);
            os.flush();
            System.out.println("Response to Client  :  "+line);
            line=is.readLine();
        }   
    } catch (IOException e) {

        line=this.getName(); //reused String line for getting thread name
        System.out.println("IO Error/ Client "+line+" terminated abruptly");
    }
    catch(NullPointerException e){
        line=this.getName(); //reused String line for getting thread name
        System.out.println("Client "+line+" Closed");
    }

    finally{    
    try{
        System.out.println("Connection Closing..");
        if (is!=null){
            is.close(); 
            System.out.println(" Socket Input Stream Closed");
        }

        if(os!=null){
            os.close();
            System.out.println("Socket Out Closed");
        }
        if (s!=null){
        s.close();
        System.out.println("Socket Closed");
        }

        }
    catch(IOException ie){
        System.out.println("Socket Close Error");
    }
    }//end finally
    }
} 
```

这里也是客户端的代码。只要你想创建多个客户端，只要执行这个代码就可以了。

```
// A simple Client Server Protocol .. Client for Echo Server

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

public class NetworkClient {

public static void main(String args[]) throws IOException{

    InetAddress address=InetAddress.getLocalHost();
    Socket s1=null;
    String line=null;
    BufferedReader br=null;
    BufferedReader is=null;
    PrintWriter os=null;

    try {
        s1=new Socket(address, 4445); // You can use static final constant PORT_NUM
        br= new BufferedReader(new InputStreamReader(System.in));
        is=new BufferedReader(new InputStreamReader(s1.getInputStream()));
        os= new PrintWriter(s1.getOutputStream());
    }
    catch (IOException e){
        e.printStackTrace();
        System.err.print("IO Exception");
    }

    System.out.println("Client Address : "+address);
    System.out.println("Enter Data to echo Server ( Enter QUIT to end):");

    String response=null;
    try{
        line=br.readLine(); 
        while(line.compareTo("QUIT")!=0){
                os.println(line);
                os.flush();
                response=is.readLine();
                System.out.println("Server Response : "+response);
                line=br.readLine();

            }

    }
    catch(IOException e){
        e.printStackTrace();
    System.out.println("Socket read Error");
    }
    finally{

        is.close();os.close();br.close();s1.close();
                System.out.println("Connection Closed");

    }

}
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-04-12T20:39:34.173

我想问题是您需要为每个连接启动一个单独的线程并`serverSocket.accept()`循环调用以接受多个连接。

在同一个端口上有多个连接*不是问题。*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-05T04:36:12.953

请参阅 O'Reilly “Java Cookbook”，Ian Darwin - 配方[17.4 处理多个客户端](https://github.com/oreillymedia/java_cookbook_3e/blob/master/javacooksrc/javacooksrc/main/java/network/EchoServerThreaded2.java)。

注意那[`accept()`](https://docs.oracle.com/javase/8/docs/api/java/net/ServerSocket.html#accept--)不是**线程安全**的，所以调用被包裹在`synchronized`.

```
64: synchronized(servSock) {
65:     clientSocket = servSock.accept();
66: } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-24T17:39:18.423

这是多个客户端到一个服务器工作正常的代码..试一试:)

服务器.java：

```
import java.io.DataInputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

class Multi extends Thread{
private Socket s=null;
DataInputStream infromClient;
Multi() throws IOException{

}
Multi(Socket s) throws IOException{
    this.s=s;
    infromClient = new DataInputStream(s.getInputStream());
}
public void run(){  

    String SQL=new String();
    try {
        SQL = infromClient.readUTF();
    } catch (IOException ex) {
        Logger.getLogger(Multi.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println("Query: " + SQL); 
    try {
        System.out.println("Socket Closing");
        s.close();
    } catch (IOException ex) {
        Logger.getLogger(Multi.class.getName()).log(Level.SEVERE, null, ex);
       }
   }  
}
public class Server {

public static void main(String args[]) throws IOException, 
InterruptedException{   

    while(true){
        ServerSocket ss=new ServerSocket(11111);
        System.out.println("Server is Awaiting"); 
        Socket s=ss.accept();
        Multi t=new Multi(s);
        t.start();

        Thread.sleep(2000);
        ss.close();
    }    

    }   
} 
```

Client1.java：

```
 import java.io.DataOutputStream;
 import java.io.ObjectInputStream;
 import java.net.Socket;

public class client1 {
   public static void main(String[] arg) {
  try {

     Socket socketConnection = new Socket("127.0.0.1", 11111);

     //QUERY PASSING
     DataOutputStream outToServer = new DataOutputStream(socketConnection.getOutputStream());

     String SQL="I  am  client 1";
     outToServer.writeUTF(SQL);

  } catch (Exception e) {System.out.println(e); }
   }
} 
```

Client2.java

```
import java.io.DataOutputStream; 
import java.net.Socket;

public class client2 {
    public static void main(String[] arg) {
  try {

     Socket socketConnection = new Socket("127.0.0.1", 11111);

     //QUERY PASSING
     DataOutputStream outToServer = new DataOutputStream(socketConnection.getOutputStream());

     String SQL="I am  Client 2";
     outToServer.writeUTF(SQL);

  } catch (Exception e) {System.out.println(e); }
   }
 } 
```

# matlab - Matlab libsvm - 如何找到 w 系数

> ID：10131385
> 
> 赞同：17
> 
> 时间：2012-04-12T20:34:57.110
> 
> 标签：matlab, svm, libsvm

如何找到向量 w 是什么，即垂直于分离平面？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T22:01:40.307

这就是我在[这里](http://www.mathworks.com/matlabcentral/fileexchange/28302-svm-demo/content/svm_demo/LinearClassifier.m)的做法。如果我没记错的话，这是基于对[偶形式](http://en.wikipedia.org/wiki/Support_vector_machine#Dual_form)的 SVM 优化的结果。

```
model = svmtrain(...);
w = (model.sv_coef' * full(model.SVs)); 
```

偏见是（我真的不记得为什么它是负面的）：

```
bias = -model.rho; 
```

然后进行分类（对于线性 SVM），对于具有 N 个实例和 M 个特征的 N×M 数据集“特征”，

```
predictions = sign(features * w' + bias); 
```

如果内核不是线性的，那么这不会给你正确的答案。

有关更多信息，请参阅[如何生成线性 SVM 的原始变量 w？](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f804)，来自 libsvm 的手册。

# android - 活动不能停止另一个活动，然后自己

> ID：10131387
> 
> 赞同：0
> 
> 时间：2012-04-12T20:35:03.840
> 
> 标签：android

我有 2 个活动，**A**和**B**。

A 使用意图和请求代码调用 B -

```
startActivityForResult(i,123); 
```

...后来我想让 A 停止 B 然后它自己，所以在 AI 中

```
finishActivity(123);
finish();  // finish itself 
```

......但B没有停止！但是，如果我在所有 onStop 和 onDestroy 处设置断点并在调试器中单步执行，则一切正常，两个活动都消失了。（这表明时间或比赛条件）

但是，如果我注释掉 A 的 finish() ...

```
finishActivity(123);
// finish();  // finish itself 
```

B 确实完成了，但 A 没有完成，因为它的完成已被取消。让一项活动完成它创建的另一项活动然后自行完成的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:42:23.460

看看这是否有效：

```
finishActivity(123);
runOnUiThread(new Runnable() {
    public void run() {
        finish();
    }
}); 
```

我建议这样做的原因是，我认为调用 to`finish()`并没有给`finishActivity(123)`它机会做它的事情。通过调用`runOnUiThread`，调用`finish()`将发生在 UI 消息队列的下一个循环中。

# php - Facebook 页面中显示的哪些见解可通过其 API 获得？

> ID：10131393
> 
> 赞同：2
> 
> 时间：2012-04-12T20:35:16.907
> 
> 标签：php, twitter

我想从我的 Facebook 页面获取洞察数据，如[https://www.facebook.com/USERNAME?sk=page_insights](https://www.facebook.com/USERNAME?sk=page_insights)所示。但是，除了“粉丝数量”和“谈论”之外，我不知道哪些可以通过 API 获得。

我已经打印了我页面的见解并将其作为相册发布，以便更好地理解：http: [//imgur.com/a/hrL9z](http://imgur.com/a/hrL9z)

以下是facebook页面上显示的所有见解，所以我会得到一个明确的答案。

谢谢你。

*由于主题类似于twitter api，我如何获得每天从我的状态中获得的转发数量？*（已回答）*

* * *

粉丝总数。
粉丝好友总数。
每周总覆盖面。
人们谈论这个。

**LIKES (https://www.facebook.com/USERNAME?sk=page_insights_likes)**
*人口统计*
性别
年龄
国家
城市
语言

*您喜欢的来源。*
新的喜欢
与
喜欢的来源不同

**REACH (https://www.facebook.com/USERNAME?sk=page_insights_reach)**
*你接触了谁*
类型 + 年龄

*你接触人的方式。* 覆盖率 ->按频率划分的自然用户
、付费用户、病毒用户、唯一用户总数

*访问您的页面*
页面浏览量、
唯一身份访问者
总标签浏览量
外部推荐人

**谈论（https://www.facebook.com/USERNAME?sk=page_insights_talking）**
*谁在谈论您的页面*
类型+年龄

*人们如何谈论您的页面*
谈论这个
病毒搜索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:50:38.970

可以在**[此处](https://developers.facebook.com/docs/reference/api/insights/)**找到有关通过 Facebook Graph API 获得的洞察数据的信息。

> 页面、应用程序和域对象具有这种类型的洞察连接。Post 对象也有这种联系，其中 Post 是由 Page 制作的。
> 
> **可用指标包括应用程序和页面点击、添加、删除和喜欢。**

请注意，您需要该`read_insights`页面的权限。

[这是我刚刚创建的测试页面的示例 API 响应](http://paste.ubuntu.com/937724/)（带有`read_insights`）。您在问题中发布的所有信息都将在那里（除了该页面没有用户，因此不会有任何适当的数据）。

[您可以使用Graph API explorer](https://developers.facebook.com/tools/explorer)使用您自己的页面之一对此进行测试：

*   用作`https://graph.facebook.com/YOUR_PAGE_ID/insights/`URL。

*   `read_insights`选中（在“扩展权限”选项卡上）选中的访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:46:08.063

Twitter 提供了一个 API 来获取所有转发状态的列表：

```
https://dev.twitter.com/docs/api/1/get/statuses/retweets_of_me 
```

如果您每天轮询一次，您应该能够通过一两个 API 调用获得更新，这不会显着影响您的速率限制。

# java - 使用 OpenGL 在 Android 中交叉淡入淡出场景

> ID：10131397
> 
> 赞同：0
> 
> 时间：2012-04-12T20:36:01.423
> 
> 标签：java, android, opengl-es, fade

我正在为 android 制作游戏，并且正在使用 OpenGL 进行渲染。

我想知道是否可以制作交叉淡入淡出效果，以便在菜单之间切换时可以使用它。

我想使其中一个场景中的每个对象逐渐变得更加透明，以便它后面的场景变得可见。但这种方法的问题在于，如果我让场景中的一个对象透明，则同一场景中它后面的所有对象都将可见，即使一旦对象不透明时它们可能不可见。

所以我想知道是否可以渲染整个场景，然后在前一个场景上渲染一个新场景并将透明度分配给新场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:38:48.063

一种选择（也是我可能会采用的一种）是将两个场景都渲染到 FBO，然后在显示为全屏四边形的 FBO 之间淡入淡出。把它想象成截图。

看一下[这个例子](http://blog.shayanjaved.com/2011/05/13/android-opengl-es-2-0-render-to-texture/)，看看一个简单的方法。

# git - git补丁将不适用

> ID：10131399
> 
> 赞同：2
> 
> 时间：2012-04-12T20:36:13.993
> 
> 标签：git, diff, patch

我有两个存储库并从一个创建了一个 .patch 文件。在它里面的路径是这样的：

a/视图/文件名 b/视图/文件名

我通过检查分支并运行`git format-patch -number`我需要的提交来制作补丁文件。这些文件看起来有我需要的差异，并且相对路径看起来正确。

但是，当我尝试`git am --signoff`从相同的相对位置修补我的另一个 repo（具有不同的绝对结构但相同的相对结构）中的补丁时，我收到如下错误：

错误：视图/文件名：索引中不存在

有什么帮助吗？？谢谢！！

# php - 使用 PHP 端阻止 EASY APNS

> ID：10131417
> 
> 赞同：1
> 
> 时间：2012-04-12T20:37:02.350
> 
> 标签：php, mysql, apple-push-notifications

对不起，因为我在 PHP 方面很糟糕

因此，我发现自己非常愚蠢地被阻止了，因为我无法理解，或者我必须将我的信息放在我的数据库文件“class_DbConnect.php”中的连接中

如果文件看起来像这样：

[https://github.com/manifestinteractive/easyapns/blob/master/src/php/classes/class_DbConnect.php](https://github.com/manifestinteractive/easyapns/blob/master/src/php/classes/class_DbConnect.php) ...

所以我试图通过观看“演示”的视频自己解决它，但它已经过时了。从演示中获取的 php 文件不同，至少不同到足以让我烦恼！

我确信这很简单：我有 4 个信息（主机、用户名、密码和数据库名称），但我不知道在文件中的何处设置它们......我知道它在这个文件中但不知道在哪里。

其余的，我们稍后会看到。我已经创建了必要的数据库，我还必须了解证书的方式，如何恢复等等......但是现在，我希望已经完成了 php 部分......

我将在这里发布不同的发现和行动......我很确定它对其他人有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:48:27.893

您不要将信息放入文件中，而是在声明类时添加它们

解释

该类包含

```
/**
* Constructor. Initializes a database connection and selects our database.
* @param string $host       The host to wchich to connect.
* @param string $username   The name of the user used to login to the database.
* @param string $password   The password of the user to login to the database.
* @param string $database   The name of the database to which to connect.
*/
function __construct($host, $username, $password, $database)
{
    $this->DB_HOST     = $host;
    $this->DB_USERNAME = $username;
    $this->DB_PASSWORD = $password;
    $this->DB_DATABASE = $database;
} 
```

你在 PHP 代码中需要的是这样的

```
$db = new DbConnect("localhost","username","password","database"); 
```

这是一个`bad practice`尝试直接在类中硬编码值，如果您需要连接到多个`host`或`database`

**乔·伯内特**

作为一个初学者，当 MySQL 作为出色的 `mysqli' 扩展时，你不需要这样的类，它也是面向对象的并且非常快。

用法与您没有的类似，但不需要任何额外的内容，包括任何类

例子

```
$db = new mysqli("localhost","username","password","database"); 
```

有关更多信息和示例，请参见[http://www.php.net/manual/en/mysqli.construct.php](http://www.php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:42:04.873

我会说那是我见过的最长的 MySQL 连接脚本，但是给你...

```
function __construct($host, $username, $password, $database)
    {
        $this->DB_HOST     = "HostName";
        $this->DB_USERNAME = "username";
        $this->DB_PASSWORD = "password";
        $this->DB_DATABASE = "database";
    } 
```

在您的代码中找到该函数并编辑其内容。把你的信息放在“”里面。

# php - 使用 MySQL 字段标志作为 PHP 模型生成的参数

> ID：10131420
> 
> 赞同：0
> 
> 时间：2012-04-12T20:37:07.093
> 
> 标签：php, mysql, localization, phpmyadmin

我有一个脚本，`PHP`可以根据我的`MySQL`数据库结构动态生成我的模型。我得到表的列表`mysql_list_tables()`，对于每个表，得到字段的列表`mysql_ list_ fields()`，并且根据表结构，我相应地创建我的方法：例如，如果我找到`"order"`定义的整数字段，那么我的`SELECT`语句按该值排序场地。

我想通过使用返回的字段标志来扩展这种方法，以[`mysql_field_flags()`](http://us2.php.net/manual/en/function.mysql-field-flags.php)向模型添加国际化支持。我想要的是添加一个自定义标志类型——除了现有`not_null`的`auto_increment`和其他的——例如我会调用`i18n`的，然后每当一个字段设置了这个标志时，我知道我需要添加方法来获取/添加值从翻译表。`phpMyAdmin`为了让我能够管理数据库（例如，启用或禁用字段翻译），如果数据库管理界面能够自动获取我的自定义标志，那就太好了。

**我可以向 MySQL 表字段添加自定义标志，并让 phpMyAdmin 和 PHP 拾取它们吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:55:24.817

AFAIK 没有办法向字段添加自定义标志，因此。您可以实现这一点的一种方法是向我们提供带有某种序列化数据的 COMMENT 属性 -

```
CREATE TABLE test (
    id INTEGER UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
    color_id SMALLINT UNSIGNED NOT NULL COMMENT 'i18n'
); 
```

我建议不要使用 mysql_list_* 函数来检索表和字段数据。相反，您应该从[INFORMATION_SCHEMA](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)中进行选择。我还建议使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)，如果运气好的话，旧的 mysql 扩展将很快被弃用。

而不是`mysql_list_tables()`你会使用 -

```
SELECT *
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'db_name' 
```

而不是`mysql_list_fields()`你会使用 -

```
SELECT *
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = 'db_name'
AND TABLE_NAME = 'tbl_name' 
```

# c# - 如何修复 400 Bad Request 错误？

> ID：10131423
> 
> 赞同：5
> 
> 时间：2012-04-12T20:37:27.123
> 
> 标签：c#

我收到*远程服务器返回错误：(400)*尝试运行我的代码时出现错误请求。任何帮助，将不胜感激。谢谢。

```
 // Open request and set post data
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("myurl.com/restservice/Login");
    request.Method = "POST";
    request.ContentType = "application/json; charset:utf-8";
    string postData = "{ \"username\": \"testname\" },{ \"password\": \"testpass\" }";

    // Write postData to request url
    using (Stream s = request.GetRequestStream())
    {
        using (StreamWriter sw = new StreamWriter(s))
            sw.Write(postData);
    }

    // Get response and read it
    using (Stream s = request.GetResponse().GetResponseStream()) // error happens here
    {
        using (StreamReader sr = new StreamReader(s))
        {
            var jsonData = sr.ReadToEnd();
        }
    } 
```

**JSON编辑**

变成：

```
{ \"username\": \"jeff\", \"password\": \"welcome\" } 
```

但仍然无法正常工作。

**编辑**

这就是我发现的有效方法：

```
 // Open request and set post data
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("myurl.com/restservice/Login");
    request.Method = "POST";
    request.ContentType = "application/json";
    string postData = "{ \"username\": \"testname\", \"password\": \"testpass\" }";

    // Set postData to byte type and set content length
    byte[] postBytes = System.Text.UTF8Encoding.UTF8.GetBytes(postData);
    request.ContentLength = postBytes.Length;

    // Write postBytes to request stream
    Stream s = request.GetRequestStream();
    s.Write(postBytes, 0, postBytes.Length);
    s.Close();

    // Get the reponse
    WebResponse response = request.GetResponse();

    // Status for debugging
    string ResponseStatus = (((HttpWebResponse)response).StatusDescription);

    // Get the content from server and read it from the stream
    s = response.GetResponseStream();
    StreamReader reader = new StreamReader(s);
    string responseFromServer = reader.ReadToEnd();

    // Clean up and close
    reader.Close();
    s.Close();
    response.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:40:32.073

你能试一下吗`string postData = "[{ \"username\": \"testname\" },{ \"password\": \"testpass\" }]";`

这样你就发送了一个包含 2 个对象的数组

**编辑**：也许你真正想要发送的只是一个具有 2 个属性的对象，那么它就是`string postData = "{ \"username\": \"testname\", \"password\": \"testpass\" }"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:41:04.503

看起来它可能来自您发布的 JSON，因为它是无效的，请参阅下面您发送的内容，但格式有效：

```
{
    "username": "testname",
    "password": "testpass"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:42:47.137

postData 不是有效的 Json 对象

```
{ "username": "testname" },{ "password": "testpass" } 
```

尝试使用 Json 解析器，如[Json.Net](http://json.codeplex.com/)、[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)或[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx) ，而不是手动形成它

# android - 在屏幕上绘图，我需要表面视图吗？

> ID：10131425
> 
> 赞同：0
> 
> 时间：2012-04-12T20:37:31.290
> 
> 标签：android, android-layout

我总是对此感到困惑，我需要一个关于你将如何做的指针。如果创建具有多个图像视图和文本视图的 xml 布局。假设我想在两个图像之间画线并沿着这条线移动一个图像。我怎么画这条线？我知道我可以获得两个图像视图的位置，所以我有 x1,y1 和 x2,y2。我的问题是绘画。

我是否需要表面视图才能在屏幕上沿线进行绘图和加载位图？

如果是，那么我想我应该总是显示视图以填充屏幕和顶部的视图，以防我需要绘制这似乎有点错误？

如果没有（我希望这就是答案），那么我该如何画线，或仅使用 X、Y 值在屏幕上加载位图？

我希望我能解释我的困惑谢谢

编辑：实际上，我想办法更好地解释我的困惑。当您使用 xml 布局创建活动时，您有类似的东西

```
onCreate (){
setContentView(R.id.layout)
} 
```

但是当你有绘图视图的活动时，你会有类似的东西

```
onCreate (){
SurfaceView v = new Surfaceview(this);
setContentView(v)
} 
```

我的问题是我们必须将内容布局设置为 xml 布局或绘图区域。如果我想将它设置为我的 xml 布局，同时我可以在屏幕上的任何位置绘制（在图像视图、空白区域、TextViews ..等上）怎么办？

看到我的问题了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:49:03.617

这取决于您想要的结果是什么以及您需要多大的灵活性。您可以查看这个 android [Animations tutorial](http://www.vogella.de/articles/AndroidAnimation/article.html)（该网站在发布时已关闭，但谷歌已将其缓存）。

如果您不需要灵活性，那么对于您的行，您可以`View`在您的 xml 中创建一个`android:background`填充颜色和大小使其看起来如您所愿的大小。然后，您可以使用`Animation`位图上的an`ImageView`来沿线翻译它，并使用上面的监听`Animation`器`Views`在`Animation`.

如果您需要灵活性，这`SurfaceView`可能是您最好的选择。

# jquery - .hover 和 .click，同一 div 上的不同功能，Jquery

> ID：10131428
> 
> 赞同：0
> 
> 时间：2012-04-12T20:37:51.310
> 
> 标签：jquery, click, hide, toggle

我想在悬停“切换 1”时显示“1”，并在单击“切换 1”时显示“2”。我还想创建一个规则，其中“切换 2”将在悬停时显示“3”，在单击时显示“4”。我将“悬停（切换 1）的关闭 div 放在“前（2）”后面，以便也能够单击 2 进行切换。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<div class="hover">Toggle 1
<div class="front" style="display:none">2</div></div>
<div class="back" style="display:none">1</div>

<div class="hover">Toggle 2
<div class="front" style="display:none">4</div></div>
<div class="back" style="display:none">3</div>

<script>

$("div.hover").click(function () {
$("div.front").toggle( );
});

$("div.hover").hover(
function() { $(this).children("div.back").show(); },
function() { $(this).children("div.back").hide(); }
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:41:12.550

您的关闭 div 位于错误的位置，我认为它搞砸了。

```
<div class="hover">Toggle 1
  <div class="front" style="display:none">2</div>
  <div class="back" style="display:none">1</div>
</div>

<div class="hover">Toggle 2
  <div class="front" style="display:none">4</div>
  <div class="back" style="display:none">3</div>
</div> 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:54:18.777

你的代码没有任何意义。

```
$("div.hover").hover(
function() { $(this).children("div.back").show(); },
function() { $(this).children("div.back").hide(); }
}); 
```

你在尝试什么？同时隐藏和显示？

Greg B. 是对的，但它不能解决问题。

试试这个代码：

```
 <!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<div class="hover">Toggle 1
<div class="front" style="display:none">2</div>
<div class="back" style="display:none">1</div>
</div>
<div class="hover">Toggle 2
<div class="front" style="display:none">4</div>
<div class="back" style="display:none">3</div>
</div>
<script>

hoverdiv = $("div.hover")

hoverdiv.on("hover", function() {
    $(this).children(".front").show()
});
hoverdiv.on("mouseleave", function() {
    $(this).children(".front").hide()
})
hoverdiv.on("click", function() {
    $(this).children(".back").toggle()
})
</script>

</body>
</html> 
```

# html - HTML5 嵌入式字体在浏览器中的呈现方式不同？

> ID：10131429
> 
> 赞同：1
> 
> 时间：2012-04-12T20:37:51.913
> 
> 标签：html, font-face, embedded-fonts

我想让这个页面在所有浏览器中看起来都一样。具体来说，我希望文本的换行点在所有浏览器上都完全相同，这样我就可以创建一个 100% 准确度的 PDF 版本。例如，在 FF 与 Chrome 中查看这一点。

[http://santaspencil.com/desktop/embedded-test/embedded-fonts-test.php](http://santaspencil.com/desktop/embedded-test/embedded-fonts-test.php)

问题： - 可以吗？- 是否有不需要用户下载插件的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:45:45.210

您应该考虑将字体文件嵌入到 CSS 中。但像往常一样，石器时代的 IE 无法做到这一点，因为您需要在服务器上包含 EOT 字体文件。

[http://base64fonts.com](http://base64fonts.com)会将您的字体文件转换为 base64，然后生成一个 css 代码供您复制并粘贴到您的 html 中。这将有助于确保跨浏览器（IE 除外）加载字体。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:38:45.103

这可能为时已晚，但直到今天我才知道。有一种叫做不间断空格的东西，用`&nbsp;`HTML 表示，您可以使用它来防止不需要的换行符或其他类似的东西。Wikipedia 上有一篇很好的文章。

[http://en.wikipedia.org/wiki/Non-breaking_space](http://en.wikipedia.org/wiki/Non-breaking_space)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T20:46:56.490

> ...我希望文本的包装点在所有浏览器上都完全相同...

砰的一声在这里（在砖墙上签名）。Web 技术甚至没有尝试这样做。如果您想出一种方法来提供您自己的字体 - 例如嵌入式网络字体 - 您可以通过 SORTA 使其工作。但如果100%是你的目标，你还不如放弃睡觉。

浏览器的优点之一是它们的“流式布局”功能，例如，在平板电脑上和在桌面上以不同的方式自动呈现页面以填充不同的屏幕尺寸。您为这种无限的可重新渲染性付出的代价之一是无法*准确*地指定外观。此外，边缘情况总是会出现并咬人。例如，如果可用行是 0-73 个单位，而您要放入其中的文本是 74 个单位长，它是否“适合”？（即，零计数吗？并且用完最后一个单元是“适合”还是需要“包装”的指示？）

让浏览器呈现您的*确切*外观的唯一方法是为它们提供在它们看来是图像的东西。在屏幕上显示文本，对其进行截屏，然后将该截屏制作成 *.GIF 格式是一种方法。

PDF 文件也可以工作，因为它在浏览器看来是一个带有自己渲染引擎的“有趣”图像。即使浏览器不同，大多数渲染引擎也可能相同（即来自 Adob​​e 的引擎），因此它更有可能工作。在 Web 上提供 PDF 文档效果很好，并且得到了广泛的支持。如果一个 URL 看起来像[http://yoursys.yourdomain/yourpath/yourfile.pdf](http://yoursys.yourdomain/yourpath/yourfile.pdf)大多数浏览器会获取它并启动他们的 PDF 渲染工具并直接显示它......通常在浏览器窗口中，所以用户甚至不知道使用了不同的应用程序。

至于你问题的最后一部分，这是错误的问题。它应该是“不需要用户已经拥有的插件的解决方案”。PDF插件的优势在于绝大多数用户*已经*拥有它。并非所有插件都是邪恶的/不方便的......只是不太常见的插件（或者如果您的目标是用户甚至不允许下载的 iPhone 则使用 Flash 插件:-)。

祝你好运！

# asp.net - 谷歌浏览器 Cookie 域名过滤器

> ID：10131440
> 
> 赞同：0
> 
> 时间：2012-04-12T20:39:19.250
> 
> 标签：asp.net, google-chrome, cookies, wif

使用 Windows Identity Foundation (asp.net, mvc 3)，我在 web.config 中设置 cookieHandler 配置，如下所示：

```
 <cookieHandler requireSsl="true" domain=".website.qa" /> 
```

.qa 是我们的质量保证和测试构建域。在本地，我将其设置为

```
 <cookieHandler requireSsl="true" domain=".website.local" /> 
```

这很好用。我需要覆盖默认域，因为需要在不同的子域（例如 asdf.website.qa 和 qwer.website.qa）中看到 auth cookie。本地构建就是这样，从开发人员的计算机本地运行。QA 构建被推送到服务器。Firefox 和 IE 对这个域没问题，但 Chrome 似乎根本没有设置 cookie。通过将 QA 站点更改为 asdf.website.qaa 解决了该问题，并且：

```
 <cookieHandler requireSsl="true" domain=".website.qaa" /> 
```

Chrome 中是否有阻止 cookie 上的两个字母顶级域的功能？还是我想错了？

# php - 无法从数据库填充列表

> ID：10131443
> 
> 赞同：0
> 
> 时间：2012-04-12T20:39:31.947
> 
> 标签：php, sql, database

我正在尝试从数据库中检索数据并从中填充列表，我的代码中似乎没有错误，但列表仍然没有填充，我的代码

```
<?php 
 $hostname = "localhost";
 $username = "username";
 $password = "password";
 $dbase = "db";
 $link = @ mysql_connect($hostname, $username, $password);
 $db_selected = @ mysql_select_db($dbase);
 ?>

<?php 
    include("scripts/dbconnect.php"); 
    $query="select class from school";
    $result=mysql_query($query);
    $numrows=mysql_num_rows($result);
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
     echo '<option value="'.$row['class'].'">'.$row['class'].'</option>';
    }  
   ?> 
```

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:43:14.833

您需要回显一个`select`元素。

```
<?php 
    include("scripts/dbconnect.php"); 
    $query="select class from school";
    $result=mysql_query($query);
    $numrows=mysql_num_rows($result);
    echo "<select>"
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
     echo '<option value="'.$row['class'].'">'.$row['class'].'</option>';
    }  
    echo "</select>"
   ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:47:53.943

选项必须用 select 标签包裹：

```
 echo "<select name='class'>";
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
 echo '<option value="'.$row['class'].'">'.$row['class'].'</option>';
}  
 echo "</select>"; 
```

另外做：

```
if (!$link) {
    die('Could not connect: ' . mysql_error());
    break;
} 
```

查看mysql连接是否有错误。

# php - Query several rows from 3 different tables

> ID：10131448
> 
> 赞同：0
> 
> 时间：2012-04-12T20:39:52.397
> 
> 标签：php, mysql

I was wondering how I could do this without using group_concat. Since my reviews are so long the group_concat is maxing out on them so it does not return all the reviews. The only other way I could think of doing it would be to loop the query. Just so you know there are several products and several reviews for each product. Any ideas?

```
 $this->db->select("product.id,
        product.name as name,
        group_concat(user.name) as user,
        group_concat(rating.overall) as overall,
        group_concat(rating.description SEPARATOR '|') as review");
    $this->db->join('rating', 'rating.idProduct = alcohol.id', 'LEFT');
    $this->db->join('user', 'user.id = rating.idUser', 'LEFT');
    $query = $this->db->get('product');
    return $query->result(); 
```

output as something like this:

```
[0] => stdClass Object (
        [name] => Product
        [reviews] => Array(
                [0]=> (
                        [user] => "cKendrick "
                        [overall] => "1"
                        [Rating] => "lalalalalala review"
                    )
                [1] = >
                    (...
    )

)
[1] => stdClass Object (.. 
```

UPDATE:

```
"SELECT product.id,
  product.name as name,
  category.permName as category,
  subCategory.permName as subCategory,
  product.permName as permName,
  product.picture as picture,
  user.username as username,
  user.firstName as firstName,
  user.lastName as lastName,
  user.picture as userPicture,
  rating.description as review
FROM (
     SELECT *
     FROM product
     LIMIT ?, 30
) product
LEFT JOIN category
    ON category.id = product.category
LEFT JOIN subCategory
    ON subCategory.id = product.subCategory
LEFT JOIN rating
    ON rating.idAlcohol = product.id
LEFT JOIN user
    ON user.id = rating.idUser
ORDER BY product.lastReview desc" 
```

How would I restrict it by its category?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:23:02.543

Here are my assumptions:

You want to get all the products with associated ratings. You want to know who wrote which review.

```
 select product.id, product.name, rating.overall, rating.description, user.name 
from product 
left join rating on product.id = rating.productId 
left join on user.id=rating.userId; 
```

If this is not what you want, edit your post and show a few rows of what you are looking for would look like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:27:57.573

Which DBAL are you using? In plain old PHP you could do it like this if you really want to use a single query -

```
<?php

$db = new PDO('dsn', 'user', 'pass');
$sql = "SELECT product.id, product.name, rating.overall, rating.description, user.name AS user  
        FROM (
           SELECT *
           FROM product
           LIMIT 30
        ) product   
        LEFT JOIN rating
            ON product.id = rating.productId   
        LEFT JOIN user
            ON user.id = rating.userId";

$stmt = $db->prepare($sql);
$stmt->execute();

$output = array();
while ($row = $stmt->fetchObject()) {
    $output[$row->id]['name'] = $row->name;
    $output[$row->id]['reviews'][] = array('user'        => $row->user,
                                           'overall'     => $row->overall,
                                           'description' => $row->description);
} 
```

**UPDATE** - I have moved the product table into a subquery to enable limiting the number of products. Note that any filtering on the products should be added to the subquery not the outer select.

**UPDATE** - updated query based on update to question. As you want to filter products based on category before limiting the result the joins and criteria need to be added to the subquery -

```
SELECT product.id,
    product.name as name,
    product.category,
    product.subCategory,
    product.permName as permName,
    product.picture as picture,
    user.username as username,
    user.firstName as firstName,
    user.lastName as lastName,
    user.picture as userPicture,
    rating.description as review
FROM (
    SELECT
        p.*,
        category.permName AS category,
        subCategory.permName AS subCategory
    FROM product
    LEFT JOIN category
        ON category.id = product.category
    LEFT JOIN subCategory
        ON subCategory.id = product.subCategory
    WHERE category.permName = ?
    LIMIT ?, 30
) product
LEFT JOIN rating
    ON rating.idAlcohol = product.id
LEFT JOIN user
    ON user.id = rating.idUser
ORDER BY product.lastReview desc 
```

# jquery - Jquery 对话框确认在 Jquery 数据表中不起作用

> ID：10131450
> 
> 赞同：0
> 
> 时间：2012-04-12T20:40:28.033
> 
> 标签：jquery

尝试使用 jquery 对话框确认删除 jquery 数据表中的记录。删除在初始页面加载时有效，但如果我更改页面或搜索删除链接不起作用。

```
<script type="text/javascript">
$(document).ready(function () {
    $('#dataTable').dataTable({
        "aoColumnDefs": [
        { "bSortable": false, "bSearchable": false, "aTargets": [2] }
        ]
    });

    //modal popup

    $("#dialog-confirm").dialog({
        autoOpen: false,
        resizable: false,
        height: 200,
        width: 400,
        modal: true,
        buttons: {
            "Delete": function () {
                $(this).dialog("close");
                $("form")["delete"].submit();
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    $(".deleteLink").click(function (e) {
        e.preventDefault();
        $("#dialog-confirm").dialog("open");
    });

    //     $.ajaxSetup({ cache: false });

}); 
```

这是html。

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="dataTable">
<thead>
    <tr>
        <th>
            @Html.LabelFor(p => Model.FirstOrDefault().LastName)
        </th>
        <th>
            @Html.LabelFor(p => Model.FirstOrDefault().FirstName)
        </th>
        <th>
        </th>
    </tr>
</thead>
<tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.LastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FirstName)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.UserId }) |
                @Html.ActionLink("Details", "Details", new { id = item.UserId }) |
                @Html.ActionLink("Delete", "DeleteConfirmed", new { id = item.UserId }, new { @class = "deleteLink" })
                @using (Html.BeginForm("DeleteConfirmed", "User", new { id = item.UserId})){}
            </td>
        </tr>
    }
</tbody> 
```

这是确认对话框

```
<div id="dialog-confirm" title="Delete the item?" style="display:none" >  
<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This item will be deleted. Are you sure?</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:44:49.053

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('#dataTable').dataTable({
                "aoColumnDefs": [
        { "bSortable": false, "bSearchable": false, "aTargets": [2] }
        ]
            });

            //modal popup

            $(".deleteLink").live('click', function (e) {
                var obj = $(this);
                e.preventDefault();
                var dialogAppendData = '<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>'
                                     + 'This item will be deleted. Are you sure?</p></div>';
                $(dialogAppendData).dialog({
                    autoOpen: true, resizable: false, modal: true,
                    height: 200, width: 400, zIndex: 10000,
                    title: 'Delete the item?',
                    buttons: {
                        'Delete': function () {
                            $.ajax({
                                url: '/User/DeleteUser', type: 'delete', dataType: 'json',
                                data: { 'userId': obj.data('id') },
                                success: function (data) {
                                    $(obj).remove();
                                }
                            });

                            $(this).dialog("close");
                        },
                        'Cancel': function () {
                            $(this).dialog("close");
                        }
                    },
                    close: function (event, ui) {
                        $(this).remove();
                    }
                });
            });
        });
    </script>

insteand of : 
@Html.ActionLink("Delete", "DeleteConfirmed", new { id = item.UserId }, new { @class = "deleteLink" })

//use below link.
     <a class = "deleteLink">Delete</a>

     //In controller

    UserController :

    [HttpDelete]
    public JsonResult DeleteUser(int userId)
    {
        var user = db.users.Find(userId);
        db.Users.Remove(user);
        db.SaveChanges();

        //Or

        // U r logic for delete.

        return Json(true, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:49:00.830

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('#dataTable').dataTable({
                "aoColumnDefs": [
        { "bSortable": false, "bSearchable": false, "aTargets": [2] }
        ]
            });

            //modal popup
            $('.deleteLink').live('click', function (e) {
                e.preventDefault();

                var obj = $(this);

                var dialogAppendData = '<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>'
                                     + 'This item will be deleted. Are you sure?</p></div>';
                $(dialogAppendData).dialog({
                    autoOpen: true, resizable: false, modal: true,
                    height: 200, width: 400, zIndex: 10000,
                    title: 'Delete the item?',
                    buttons: {
                        'Delete': function () {
                            $("form")["delete"].submit();

                            $(this).dialog("close");
                        },
                        'Cancel': function () {
                            $(this).dialog("close");
                        }
                    },
                    close: function (event, ui) {
                        $(this).remove();
                    }
                });
            });

            //     $.ajaxSetup({ cache: false });
        });

    </script> 
```

# xhtmlrenderer - 飞碟(xhtmlrenderer)分词

> ID：10131453
> 
> 赞同：0
> 
> 时间：2012-04-12T20:40:41.070
> 
> 标签：xhtmlrenderer, flying-saucer

我遇到了 Flying Saucer(xhtmlrenderer) 的错误，其中一行末尾的单词被分成两行，例如。思维分裂为瘦国王，国王出现在下一行的开头。这是非常令人费解的，因为拆分似乎没有遵循某种模式，而且似乎很少随机发生，例如每生成 20 个 pdf 就有 1 个。

使用过飞碟的其他人是否遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:15:46.583

排序。答案可在[http://abhirampal.com/2012/04/18/pdf-document-word-split-using-flying-saucerxhtml-renderer/](http://abhirampal.com/2012/04/18/pdf-document-word-split-using-flying-saucerxhtml-renderer/)

# android - 来自非活动类的 Android 上下文

> ID：10131455
> 
> 赞同：3
> 
> 时间：2012-04-12T20:40:48.803
> 
> 标签：android, sqlite, android-activity, android-context

在我的 SQLite 设置类中，我有一个 DbHelper，它需要一个 Context 作为它的一部分。为了设置上下文，我只是在我的 SQLite 类中使用了一个构造函数，它需要一个上下文作为它的参数的一部分。

但是我刚刚遇到了一个问题。当试图从一个不是 Activity 的类中调用我的 SQLite 类时，我不能用作`context classname.this`，这让我很烦。

我也尝试这样做来声明一个上下文：

```
protected Context context; 
```

然后再这样称呼它：

```
SetSql PlayerObject = new SetSql(This.context); 
```

但这也不起作用。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T08:01:17.230

像这样传递应用程序上下文

```
SetSql PlayerObject = new SetSql(this.getApplicationContext()); 
```

现在它应该可以正常工作了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T21:14:48.250

```
public class DBHelper extends SQLiteOpenHelper {

private static final String TAG = "DBHelper";
private static final int DB_VERSION = 1;

private Context context;
private String DB_PATH;
private String DB_NAME;
private String TABLE_NAME;
private boolean booCreate;
private String createString;
private SQLiteDatabase myDataBase;

public DBHelper(Context context, String db_name, String table_name,
        boolean booCreate, String createString) {
    super(context, db_name, null, DB_VERSION);
    this.context = context;
    this.DB_NAME = db_name;
    this.DB_PATH = "/data/data/" + FindPackageName() + "/databases/";
    Log.d(TAG, "DBPATH=" + DB_PATH);
    this.TABLE_NAME = table_name;
    this.createString = createString;
    this.booCreate = booCreate;
    Log.d(TAG,"booCreate=" + String.valueOf(this.booCreate));
    try {
        createDataBase();
    } catch (IOException e) {
        throw new Error("Unable to Create Database");
    }
} 
```

在你的活动中

```
dbHelper = new DBHelper(this, this.getString(R.string.db_name_contact),
            this.getString(R.string.table_name_contacts), true, createString); 
```

[观看此视频并从本教程](http://wissenways.com/androidblog/wordlist-builder/)的第三部分下载代码

# javascript - 从 JavaScript 创建一个可下载的附件？

> ID：10131459
> 
> 赞同：0
> 
> 时间：2012-04-12T20:40:53.257
> 
> 标签：javascript, file, download, mime

我从数据库中获取 varbinary 数据（文件内容）以及文件名和 mime 类型。根据有多少文件，我需要在网页上显示这些文件的链接。当用户点击一个链接时，该文件应该被下载。由于链接将动态创建，我想我将不得不调用客户端函数来处理下载。但我不知道如何做到这一点。在服务器端（C#）我们可以使用 FileContentType，但是如何通过 JavaScript 来实现呢？另外，由于我没有物理文件，只有它的内容，我将不得不以某种方式创建这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:45:42.530

您应该只创建指向动态提供内容的 C# 服务器端操作的链接。

在您的控制器中创建一个操作，该操作采用某种 ID 并返回文件。然后，您可以使用`<a>`直接指向此操作的 URL 的标记（具有不同的 ID）。您不需要任何 Javascript。

# c - 在 C 中返回一个 char 指针

> ID：10131464
> 
> 赞同：5
> 
> 时间：2012-04-12T20:41:15.247
> 
> 标签：c, pointers, c-strings

我正在开发一种用 C 编写的文件共享程序。有一个函数可以读取数据文件并将数据存储到字符串中，然后将此字符串返回给主函数，然后将主函数发送回客户端。代码如下所示

```
char* ListFiles(){
    FILE *fp;
    char file[30];
    char *f;
    if((fp=fopen("list","r"))==NULL)  
    {
        ...
    }
    while (!feof(fp))
    {
        fgets(file,50,fp);
    }
    fclose(fp);
    f=file;
    printf("%s",f); //get display!!!
    return f;
}
int main(){
      char *files;
      ...
      ...
      files=ListFiles();
      printf("%s",files); //nothing display!!
      sent();
} 
```

但是，这种方法不起作用。没有任何显示，当然也没有发送任何内容。但我确实在函数 ListFiles() 中得到了正确的显示。我不知道会发生什么。我也使用 strcpy() 但它仍然无法工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T21:40:27.320

遵循[`George Skoptsov`](https://stackoverflow.com/users/1257977/george-skoptsov)建议。但是如果你没有这个[`strdup()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)功能，那就用这个：

```
char* strdup(const char* org)
{
    if(org == NULL) return NULL;

    char* newstr = malloc(strlen(org)+1);
    char* p;

    if(newstr == NULL) return NULL;

    p = newstr;

    while(*org) *p++ = *org++; /* copy the string. */
    return newstr;
} 
```

进而：

```
#include <string.h> /* strlen() call */
#include <stdlib.h> /* NULL, malloc() and free() call */

/* do something... */

char* ListFiles() {
        /* .... */ 
         return strdup(f);
} 
```

或者代替`char file[30];`做[`dynamic memory allocation`](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation):`char* file = malloc(30);`然后你可以做`return f;`，它会正常工作，因为`f`now 不是指向局部变量的指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T20:43:30.983

您正在做的是返回一个指向局部变量的指针，该变量过去是在堆栈上分配的。

将您的退货声明更改为

```
return strdup(file); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T20:44:32.913

`file`是一个堆栈变量`ListFiles()`，你正在返回一个指向它的指针。从该函数返回后，该变量将不复存在，因此返回的指针将无效。

如果你想返回一个字符串，你应该[在堆上分配它](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)，返回它，使用它，然后在你完成使用它后释放它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T20:47:11.537

您正在返回一个指向堆栈变量的指针。当函数返回时，堆栈被弹出。堆栈变量不再存在，指针变成悬空指针。

一种解决方案是在主函数中分配适当数量的内存，并将指向内存的指针传递给辅助函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:45:00.727

当您返回超出范围时，您不应该返回位于自动存储上的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T20:46:23.383

您正在尝试显示在堆栈（函数堆栈）上分配的字符串值 char 文件 [30]。方法返回后，不保证这块内存的内容。您应该动态分配它（例如 malloc）或最终使用全局值，或者在外部函数的堆栈上分配它（在您的示例 main() 函数中）

# memory - Debian - 所有进程的内存使用率都很低，但没有更多可用 RAM

> ID：10131466
> 
> 赞同：1
> 
> 时间：2012-04-12T20:41:25.147
> 
> 标签：memory, debian, ram

根据`free`我的 RAM 是完全满的：

```
:~# free -m
         total       used       free     shared    buffers     cached
Mem:          2048       2048          0          0          0       1957
-/+ buffers/cache:         90       1957
Swap:         2048          0       2048 
```

但`ps aux`仅显示大约 20 个进程，内存使用量最多为 1%。这里发生了什么？我怎样才能找到罪魁祸首？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:45:37.000

你读错了。你实际上只使用了 90MB 的 RAM，而 Linux 将其余的用于缓存和缓冲区等，一旦应用程序需要它们就会立即释放。

未使用的 RAM 是浪费的 RAM - 因此 Linux 使用它来加速文件访问。这是一件好事（TM）。

# performance - 在功能运行时测量功能完成的时间

> ID：10131468
> 
> 赞同：2
> 
> 时间：2012-04-12T20:41:27.970
> 
> 标签：performance, r, optimization

我在 R 中运行一些有时需要很长时间才能完成的功能（从 10 分钟到 4 小时不等）。具体来说，我正在使用`forward.lmer()`Rense Nieuwenhuis 编写的函数 ()，可以在[此处](http://www.rensenieuwenhuis.nl/r-sessions-32/)找到。我想知道 R 是否有任何方法可以告诉 % 完成操作。特别是，当操作已经运行了一个多小时时，我想知道它离完成有多近。

是否有一个通用函数可以让我知道任何给定函数的进度？我最想知道的是是否有这样的功能：

```
percentComplete()
forward.lmer(inputs) 
```

然后这将告诉我完成该功能的距离有多近？

我尝试的第一件事是使用`library(time)`并执行以下操作：

```
time<-getTime()
function(inputs)
timeReport(time) 
```

但这只是告诉我完成该功能需要多长时间。有没有办法知道函数在运行时的进展情况（完成百分比）？

此外，我很想提高此功能的效率，但这是另一个问题。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:45:32.240

您可以使用[txtProgressBar](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/txtProgressBar.html)来跟踪您在某个过程中的进度。

我对您引用的函数不够熟悉，无法确切知道它应该去哪里，但仅从目测来看，它似乎可以在循环中花费大量时间：

```
# Iteratively updating the model with addition of one block of variable(s)
# Also: extracting the loglikelihood of each estimated model
for(j in 1:length(blocks)) 
```

如果您要使用：

```
pb <- txtProgressBar(style=3)
for(j in 1:length(blocks))
  setTxtProgressBar(pb, j/length(blocks))
  ...
}
close(pb) 
```

这可能会给你你正在寻找的东西。请注意，某些显示在某些样式的进度条上比其他显示效果更好。如果使用我发布的代码输出对您来说很有趣，那么在创建进度条时尝试不同的样式可能会更幸运。

R 无法提前知道通用函数需要多长时间才能完成，因此这里没有通用答案。这是您在每个循环中使用进度条发布的功能。

```
forward.lmer <- function(
  start.model, blocks,
  max.iter=1, sig.level=FALSE,
  zt=FALSE, print.log=TRUE)
  {

    # forward.lmer: a function for stepwise regression using lmer mixed effects models
    # Author: Rense Nieuwenhuis

    # Initialysing internal variables
    log.step <- 0
    log.LL <- log.p <- log.block <- zt.temp <- log.zt <- NA
    model.basis <- start.model

    # Maximum number of iterations cannot exceed number of blocks
    if (max.iter > length(blocks)) max.iter <- length(blocks)
      pb <- txtProgressBar(style=3)
      # Setting up the outer loop
      for(i in 1:max.iter)
      {
        #each iteration, update the progress bar.
        setTxtProgressBar(pb, i/max.iter)
        models <- list()

        # Iteratively updating the model with addition of one block of variable(s)
        # Also: extracting the loglikelihood of each estimated model
        for(j in 1:length(blocks))
        {
          models[[j]] <- update(model.basis, as.formula(paste(". ~ . + ", blocks[j])))
        }

        LL <- unlist(lapply(models, logLik))

        # Ordering the models based on their loglikelihood.
        # Additional selection criteria apply
        for (j in order(LL, decreasing=TRUE))
        {

          ##############
          ############## Selection based on ANOVA-test
          ##############

          if(sig.level != FALSE)
          {
            if(anova(model.basis, models[[j]])[2,7] < sig.level)
            {

              model.basis <- models[[j]]

              # Writing the logs
              log.step <- log.step + 1
              log.block[log.step] <- blocks[j]
              log.LL[log.step] <- as.numeric(logLik(model.basis))
              log.p[log.step] <- anova(model.basis, models[[j]])[2,7]

              blocks <- blocks[-j]

              break
            }
          }

          ##############
          ############## Selection based significance of added variable-block
          ##############

          if(zt != FALSE)
          {
            b.model <- summary(models[[j]])@coefs
            diff.par <- setdiff(rownames(b.model), rownames(summary(model.basis)@coefs))
            if (length(diff.par)==0) break
            sig.par <- FALSE

            for (k in 1:length(diff.par))
            {
              if(abs(b.model[which(rownames(b.model)==diff.par[k]),3]) > zt)
              {
                sig.par <- TRUE
                zt.temp <- b.model[which(rownames(b.model)==diff.par[k]),3]
                break
              }
            }

            if(sig.par==TRUE)
            {
              model.basis <- models[[j]]

              # Writing the logs
              log.step <- log.step + 1
              log.block[log.step] <- blocks[j]
              log.LL[log.step] <- as.numeric(logLik(model.basis))
              log.zt[log.step] <- zt.temp
              blocks <- blocks[-j]

              break
            }
          }
        }
  }
  close(pb)

  ## Create and print log
  log.df <- data.frame(log.step=1:log.step, log.block, log.LL, log.p, log.zt)
  if(print.log == TRUE) print(log.df, digits=4)

  ## Return the 'best' fitting model
  return(model.basis)
} 
```

# php - PHP 文件编码

> ID：10131469
> 
> 赞同：8
> 
> 时间：2012-04-12T20:41:28.190
> 
> 标签：php, encoding, character-encoding

我最近注意到我在编辑器中创建的页面的文件编码到处都是。有些保存为 ANSI，有些是“UTF-8 without BOM”。我指的是 PHP、HTML、CSS、JavaScript 文件。

保存文件的最佳格式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:46:13.303

建议的方法是在您的 Web 应用程序中的任何地方都使用 UTF-8。这包括 ：

*   文件编码
*   数据库字符集和编码
*   字符串处理
*   HTML 字符集输出

一个不错的备忘单：http: [//developer.loftdigital.com/blog/php-utf-8-cheatsheet](http://developer.loftdigital.com/blog/php-utf-8-cheatsheet)

编辑：只想添加与您的问题上下文相关的 PHP 不处理带有 BOM 的 UTF-8 文件编码。使用没有 BOM 的 UTF-8 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:44:55.670

我投票支持没有 BOM 的 UTF-8。但请注意，如果您只使用常规英文字符，ASCII 和 UTF-8 文件几乎总是相同的！这意味着即使您将字符集保存为 UTF-8，您的编辑器也可能将字符集读取为 ASCII。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:44:59.597

除非您进行*大量*CJK 工作，否则您应该在没有 BOM 的情况下将文件保存为 UTF-8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:45:35.590

UTF-8 是我使用的...

最适合英语。 [http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

# php - CodeIgniter + AJAX 内部错误 500

> ID：10131473
> 
> 赞同：1
> 
> 时间：2012-04-12T20:41:48.487
> 
> 标签：php, ajax, codeigniter

我正在尝试对通知控制器中的一种方法进行 ajax 调用。

我的方法是：

```
public function testeAjax()
{
    if($this->chamadaAjax())
        echo 'Ajax';
    else
        echo 'Form';
} 
```

简单的`$this->chamadaAjax()`执行和`$this->input->is_ajax_request()`

这是我的 Ajax 调用：

```
$.ajax({
      type: "POST",
      url: '<?php echo base_url(); ?>/office/notificacao/testeAjax',
      success: function(html) {
        alert(html);
      }
    }); 
```

我有一个带有两个按钮的表单，一个用于表单提交，另一个用于 ajax 请求。

问题是，当我向 ajax 添加一些数据时，例如：data:"nome=Gerep"，并调用它，我收到一个`Internal Erro 500`

当我不发送任何数据时，它会起作用，它会在提交时返回*表单，并在我调用**ajax*请求时返回 ajax。

有任何想法吗？

*编辑* 在这里使用 FireBug 是我得到的：

```
f.support.ajax.f.ajaxTransport.sendjquery-1.7.1.min.js:4
f.extend.ajaxjquery-1.7.1.min.js:4
testenotificacao:140
(anonymous function)notificacao:113
onclick 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:12:46.850

不确定您是如何设法使用 CRSF 保护来攻击服务器的，但如果您需要在域之间共享内容，[CORS](http://www.w3.org/TR/cors/)是您需要的解决方案。只需在您的 Web 服务器上定义 Origin 策略，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:48:29.870

您是在 URL 中传递数据还是定义对象？即：正在传递的数据（尤其是 POST）应如下所示：

```
$.ajax({
      type: "POST",
      url: '<?php echo base_url(); ?>/office/notificacao/testeAjax',
      data: { nome: "Gerep" },
      success: function(html) {
        alert(html);
      }
    }); 
```

而不是这样：

```
$.ajax({
      type: "POST",
      url: '<?php echo base_url(); ?>/office/notificacao/testeAjax?nome=Gerep',
      success: function(html) {
        alert(html);
      }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:53:06.660

问题在于[Cross Site Request Forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，禁用它可以解决问题。

# https - FB API 在安全页面中发出不安全的 xd_arbiter.php 请求

> ID：10131481
> 
> 赞同：8
> 
> 时间：2012-04-12T20:42:45.517
> 
> 标签：https, facebook-javascript-sdk

我在使用浏览器报告为包含不安全内容的安全 Facebook 应用程序页面时遇到问题。

不安全的内容似乎是一个请求： [http ://static.ak.facebook.com/connect/xd_arbiter.php](http://static.ak.facebook.com/connect/xd_arbiter.php)

不过，来自 FB API 的所有后续调用都通过 https。

我无法弄清楚问题是什么，因为我正在安全地加载我的所有内容，包括 FB 脚本： [https ://connect.facebook.net/en_US/all.js](https://connect.facebook.net/en_US/all.js)

有任何想法吗？

**更新：** 似乎这是 Facebook 自己的错误，并且正在修复：http: [//developers.facebook.com/bugs/303558613049120 ?browse=search_4f874a5f45e924383360019](http://developers.facebook.com/bugs/303558613049120?browse=search_4f874a5f45e924383360019)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:08:00.717

这是脸书的问题。修复应该很快就会到来，在此期间您无能为力。

[https://developers.facebook.com/bugs/303558613049120?browse=search_4f877beec69e35d32059456](https://developers.facebook.com/bugs/303558613049120?browse=search_4f877beec69e35d32059456)

# ruby-on-rails - 我在哪里放置基于 2 个模型的方法？

> ID：10131483
> 
> 赞同：1
> 
> 时间：2012-04-12T20:42:50.980
> 
> 标签：ruby-on-rails, activerecord

我有一个用户模型和点模型。一个用户可以有很多积分，积分属于用户。

用户赚取积分，我只是不确定我应该将这些模型的方法放在哪里。例如，我想要一个“add_points”方法来为用户添加点数。我认为应该进入用户模型，但我不确定。

我希望能够做 user1.add_points(:earned_for, amount)

或类似的规定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:47:34.803

当您将方法添加到用户时，您可能不会做更多的事情，而不仅仅是挂钩关系的`create`方法`has_many`：

```
class User < ActiveRecord::Base

  has_many :points

  def add_point(reason, amount)
    points.create({:earned_for => reason, :amount => amount})
  end
end 
```

如果速记有用，那就太好了；否则，您可能只使用在您的关系中定义的辅助方法。有关详细信息，请参见[此处](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:46:09.637

我会按照你的描述去做

用户对象可以有一个`add_points`方法，在点对象上放置任何东西都是没有意义的，因为点对象是用来表示抽象概念的，而用户对象是用来表示特定用户的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:50:58.990

实际上，在这种情况下，您不需要任何其他方法来添加积分：就您的 User has_many :points 而言，您可以通过这种方式为用户添加积分：

```
@user.points.create earned_for: reason, amount: amount 
```

# php - 评级系统 | 显示单个变量的评分

> ID：10131487
> 
> 赞同：-2
> 
> 时间：2012-04-12T20:43:04.600
> 
> 标签：php, rating

所以，我的问题非常紧迫，我有一个变量，例如 4，我需要将它转换为某种评级，非常简单（从 1 到 5），没有半星或任何东西。

我需要显示一个从 1 到 5 的数字的评分，所以如果我有 1 我将获得一颗星，如果我有 5 我将获得五颗星。我可以做一个 for 循环并显示图像，但我还需要显示空（未评级）星。我不需要任何功能，因此您无法实际评分，只需显示评分即可。

所以因为有人问我试过什么，我什么都没试过，因为我不知道从哪里开始。

我可以这样做以根据我拥有的变量（这是一个从 1 -> 5 的数字）显示一些星星：

```
<?php

$ratings = 3;

for( $i = 1; $i <= $ratings; $i++)
echo '<img src="some_image.png" />';

?> 
```

就是这样，但是对于未评级的开始，我该怎么办，如何将其余的空星显示到五？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:10:16.667

你可以像这样做一个嵌套的for循环：

```
$tranStars;

for($i=0;$i<5;$i++){
  if($i==0){
    for($j=0;$j<$rating;$j++){
      echo "<img src='yourFullStars.png'/>";
      $tranStars=$j;
    }
    $i=$tranStars;
  }
  echo "<img src='yourEmptyStars.png'/>";
} 
```

或者你可以做两个单独的 for 循环：

```
for($i=0;$i<$rating;$i++){
  echo "<img src='yourFullStars.png'/>";
}
for($i=0;$i<5-$rating;$i++){
  echo "<img src='yourEmptyStars.png'/>";
} 
```

......或任何数量的东西，真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:17:13.040

您已经显示了 3 个已填充的星，因此您所要做的就是显示其余未填充的。如果你有：

```
$ratings = 3;                               // 3 filled stars
for ($i = 1; $i <= $ratings; $i++) {        // go through each star
    echo '<img src="filled.png" />';        // show it filled
} 
```

那么您需要确定是否还有剩余：

```
$starsLeft = 5 - $ratings;                  // 2 stars left 
```

如果是这样，则将其余部分显示为空星：

```
if ($starsLeft > 0) {                       // if there are any more stars left
    for ($i = 1; $i <= $starsLeft; $i++) {  // go through each remaining star
        echo '<img src="empty.png" />';     // show it empty
    }
} 
```

# android - TabHost 刷新其他活动

> ID：10131494
> 
> 赞同：0
> 
> 时间：2012-04-12T20:43:26.713
> 
> 标签：android, uitableview, android-tabhost

我正在做一个文件传输应用程序，您可以在其中将一个文件传输到另一个文件。我正在使用 TabHost 创建 2 个选项卡，在这 2 个选项卡中，1 个 listview 是不可触摸的，另一个是 onclick 将向 listview1 添加一个项目。

我的问题是当另一个选项卡被选中时，另一个列表视图如何刷新自己？它只是立即传输活动而根本没有变化，还是更新然后显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:52:44.450

对于第一个未触及的列表，您有一个 ArrayAdapter。

每次在其他列表中添加/删除时，只需使用它的数组适配器执行此操作。

首先访问不可触摸列表的数组适配器（在列表片段中），然后通知（或清除）它，以便更新为新数据 - 更新了显示所选项目的数组适配器的基本数据，以便它实际上在更新之前有新内容。

```
ArrayAdapter<String> myArrayAdapter = ((ArrayAdapter<String>) getListAdapter());
    if (myArrayAdapter != null) {
        //myArrayAdapter.clear(); use this to clear....
        myArrayAdapter.notifyDataSetChanged(); 
```

# java - Servlet - 如何接收 zip 文件

> ID：10131496
> 
> 赞同：0
> 
> 时间：2012-04-12T20:43:36.650
> 
> 标签：java, servlets

我想知道是否有人可以告诉我如何编写一个可以在 http 请求中接收 zip 文件的 servlet？

我用谷歌搜索但没有找到任何东西。如果无法使用 http 请求发送 zip 文件，请提出替代方案

我不是在询问有关如何使用 servlet 上传文件的示例。我需要知道是否可以将文件发送到 servlet，如果可以，那么如何发送？

例如，如果一个字符串被发送到一个 servlet 并且您使用以下代码来获取它： String value = req.getParameter(name);

但是如果发送文件怎么办？这可以做到吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:48:07.383

可以上传任何文件，无论是 zip 文件还是文本文件都没有区别。

只需谷歌“servlet 文件上传”即可获得许多结果。一个例子是：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet)

# jquery - 用jquery调整div宽度大小

> ID：10131498
> 
> 赞同：0
> 
> 时间：2012-04-12T20:43:42.150
> 
> 标签：jquery

我在网站的右侧有一个大约 200 px 宽度大小的 div。

它就像 facebook 聊天框，提供最近的时间线。

这是我用来调整 html div 大小的代码

```
$(document).ready(function()
{
    $("#right_timeline_div").css("width", $(window).width() - 1200);
});
$(window).resize(function()
{
    $("#right_timeline_div").css("width", $(window).width() - 1200);
}); 
```

我的代码只缩小了一定大小的 div。

当浏览器变小时，我想更改 div 宽度大小。

假设浏览器的宽度为 1200px，那么我想用 jquery 减小右侧边栏的大小。

我从这里尝试了很多方法，但没有奏效。

感谢您阅读我的问题，我希望这可以帮助其他像我一样有同样问题的观众。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:49:50.883

尝试`px`添加

```
var newSize = $(window).width() - 1200;
$("#right_timeline_div").css("width", newSize + 'px'); 
```

或者：

```
$("#right_timeline_div").width(newSize); 
```

所以...

```
$(document).ready(function(){Resize_right_timeline();});
$(window).resize(function(){Resize_right_timeline();});

functiuon Resize_right_timeline(){
    var newSize = $(window).width() - 1200;
    $("#right_timeline_div").css("width", newSize + 'px');
    //                        Add This---------------^

    //OR:
   //$("#right_timeline_div").width(newSize);
} 
```

# facebook - Facebook-offline_access 替代方案：从应用程序创建的令牌将持续多长时间，以便我可以将页面的提要拉入我的网站

> ID：10131500
> 
> 赞同：0
> 
> 时间：2012-04-12T20:44:13.570
> 
> 标签：facebook, facebook-access-token

主要问题：（因为offline_access 权限）正在弃用；通过使用应用程序的 ID 和密码点击以下 url 创建的访问令牌将持续多长时间？ [https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=XXXX&client_secret=YYYY](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=XXXX&client_secret=YYYY) 最后一个？这似乎是一个简单的问题，但我无法在这里或 developer.facebook.com 上找到明确的答案

第二个问题我想将我的 facebook 页面的提要拉入我的网站（通过 jquery 插件或滚动我自己的），但两者都使用类似的东西：

```
https://graph.facebook.com/100002282383158/feed?method=GET&metadata=true&format=json&callback=___GraphExplorerAsyncCallback___&access_token=XXX 
```

基本上，我使用的是通过我制作的 fb 应用程序创建的 appID 和秘密，这样我就可以生成访问令牌并将我的提要拉入我的网站（见第一个问题），而不要求用户使用 fb 进行身份验证。**有没有比进行上述调用并创建应用程序来获取令牌更好的方法？（我必须使用的Web服务器不能使用php）**

注意：在这篇文章的评论中，它说“离线访问现已被弃用，但您可以将访问令牌延长至 60 天。” 但我还没有找到任何文档来支持这一点，也没有找到让我设置那个时间的方法；我不想上线想知道我的令牌是否会在某个未知时间过期 [Facebook 页面访问令牌 - 这些会过期吗？](https://stackoverflow.com/questions/7696372/facebook-page-access-tokens-do-these-expire)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:00:33.597

我正在使用应用程序访问令牌，并且它们（显然）不会过期（除非您弄乱了密码或应用程序机密）

> “除非您刷新应用程序的应用程序机密，否则应用程序访问令牌不会过期。您可以在应用程序的设置中执行此操作。”

[https://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:57:56.500

您可以通过点击闲置 url 为用户获取持续 60 天的令牌

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID& 
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:39:08.180

移除offline_access 权限后，令牌将持续60 天。

# php - 致命错误：调用未定义的方法 DOMElement::item()

> ID：10131501
> 
> 赞同：0
> 
> 时间：2012-04-12T20:44:17.723
> 
> 标签：php

该代码爬取了几个 URL，并在某个 url 处停止并出现以下错误：

```
 Fatal error: Call to undefined method DOMElement::item() 
```

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:50:15.377

可能是因为[DOMElement](http://php.net/manual/en/class.domelement.php)没有名为`item()`.

# javascript - 计算单选按钮的总和，显示总和，并传递给外部 Beanstream 服务器

> ID：10131503
> 
> 赞同：0
> 
> 时间：2012-04-12T20:44:21.497
> 
> 标签：javascript, post, sum, beanstream

我是一名新手 Web 开发人员，我需要计算一些具有不同值的单选按钮的总和，然后将该结果传递给外部支付服务器。

这是其中一个单选按钮的样子：

```
<div class='container'>
<label for='p_board_rental' ><strong>Paddleboard Rental</strong> (limited amount available*: </label><br/>
<input type='radio' name='rental' value='0'/><label class="radio"> No</label><br/>
<input type='radio' name='rental' value='20'/><label class="radio"> Yes</label><br/> 
```

我需要计算并显示最终结果，但我尝试了很多方法，但我无法让它正常工作！我能得到的最好的结果是总数应该出现的空框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:24:45.400

这应该让你接近你想去的地方。只需遍历所有单选按钮，如果它被选中，如果它在数组中尚不存在，则将其推入数组中。然后最后计算总数并将其设置在文本框中。

可能有一些 jquery 函数可以使它更优雅一些。

```
var array = new Array();

$(":input[type='radio']", "#containerOfChoice").each(function () {
    if ($(this).is(':checked')) {
        var value = $(this).attr("value");
        if ($.inArray(value, array) == -1) {
            array.push(value);
        }
    }
})

var total = 0;
for (var i = 0; i < array.length; i++) {
    total += parseInt(array[i]);
}

$("#textBoxOfChoice").val(total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:01:42.577

如果您使用的是 jQuery，您可以执行以下操作：

```
function tallyValues(){
    var tally = 0;
    $('input:radio').each(function(){
        if($(this).is(':checked')){
         tally += parseInt($(this).val());
        }
    });
} 
```

tally 将保存所选值的总和

# python - 如何保存来自 python cgi 脚本的 HTTP 请求，以便我可以轻松地重复它？

> ID：10131506
> 
> 赞同：0
> 
> 时间：2012-04-12T20:44:38.893
> 
> 标签：python, http, cgi

我有一个用 Python 编写的 cgi 脚本，它接收一些复杂的 http 请求，可能是 POST 或 GET。

我正在寻找一种简单的方法来以某种方式记录请求，以便以后可以*重播*任意次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:48:58.290

[如果您在 Windows 上， Fiddler](http://www.fiddler2.com/fiddler2/version.asp)将为您执行此操作。它有一个请求生成器和一些脚本功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T20:52:07.710

似乎您正在寻找缓存对您网站的查询。

计算响应后，将包含请求 url、方法、参数和响应的记录保存在您首选的存储中。

根据您的环境和请求数量，您可以选择数据库或文件系统。

但是，您需要考虑到某些结果数据可能会发生变化，在这种情况下，您需要删除依赖于该数据的缓存数据。

# ruby-on-rails - 我只想显示按 tag.resources.count 排序的最新 10 个标签

> ID：10131511
> 
> 赞同：0
> 
> 时间：2012-04-12T20:44:41.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller

这将显示在侧边栏中，这就是我将它放在应用程序控制器中的原因。我对更好的解决方案持开放态度

```
class ApplicationController < ActionController::Base

  protect_from_forgery

  before_filter :get_tags_latest, :get_tags_popular

  def get_tags_latest
    @tags_latest = Tag.all.first(5)
  end

  def get_tags_popular
    @tags_popular = Tag.by_most_resources.limit(10)
  end

end 
```

标签.rb：

```
class Tag < ActiveRecord::Base

  self.include_root_in_json = false

  has_many :resource_tags
  has_many :resources, :through => :resource_tags

  attr_accessible :name

  validates :name, :presence => true,
                   :length   => { :within => 2..20 },
                   :uniqueness => { :case_sensitive => false }

  scope :by_most_resources,
    joins("INNER JOIN resources ON resources.tag_id = tags.id").
    group("tags.*").order("count(resources.id) DESC")

end 
```

sidebar.html.erb

```
<ul class="tag-list">
    <% @tags_popular.each do |t| %>
      <li><%= link_to t.name, tag_path(t), :class => :tag %> (<%= t.resources.count %>)</li>
    <% end %>
  </ul> 
```

目前我没有太多代码（希望它也在正确的位置）......我真正想做的就是显示按 tag.resources.count 排序的最受欢迎的 10 个标签，以及最新的 5 个标签按日期排序。我试着四处寻找 find(:order => ) 但事实证明这无济于事。

有没有神奇的方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:01:06.683

从 SQL 开始

```
SELECT tags.*
FROM tags
  INNER JOIN resources ON resources.tag_id = tags.id
GROUP BY tags.*
ORDER BY count(resources.id) DESC
LIMIT 10 
```

所以，要 ActiveRecordize 这个...

```
class Tag < ActiveRecord::Base
  scope :by_most_resources,
    joins("INNER JOIN resources ON resources.tag_id = tags.id").
    group("tags.*").order("count(resources.id) DESC") 
```

通过以下方式调用：

```
Tag.by_most_resources.limit(10) 
```

# asp.net-mvc-3 - 是否可以从@Html.ActionLink 调用 HttpPost Action 方法？

> ID：10131515
> 
> 赞同：2
> 
> 时间：2012-04-12T20:44:59.490
> 
> 标签：asp.net-mvc-3, razor, html.actionlink

是否可以调用 HttpPost Action 方法`@Html.ActionLink`？

```
[HttpPost]
public ActionResult Delete()
{    
  // delete 
} 
```

`@Html.ActionLink("Delete","Delete","Cart")`将呈现一个获取请求的锚标记。

我有一个我在购物车中显示的产品列表，我想添加一个删除按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:47:13.213

在该 actionLink 的单击事件上添加一个 javascript 侦听器，并在侦听器的回调函数中对您的操作执行 POST。

# prolog - 无限人的序言桥拼图

> ID：10131517
> 
> 赞同：2
> 
> 时间：2012-04-12T20:45:08.857
> 
> 标签：prolog, river-crossing-puzzle

我正在尝试解决这样的流行问题。

一家四口试图在夜间过桥。一个人过桥需要一个手电筒，而且只有两个人可以同时过桥，以两个人中较慢的速度移动。爸爸1分钟过桥，妈妈2分钟，孩子5分钟，奶奶10分钟。他们过桥最快的方法是什么？

除了我必须找到一个家庭可以过桥的所有可能方式，以及每种方式所需的时间。不过，这个家庭可以有任何数量的人。

我有这段代码，但我不知道为什么不起作用。

```
cross(Max, Plan):-
touristList(Ts),
Ts = [Single] -> time(Single, Time),
Time =< Max,
Plan = [[Single]];
solve_left(s(Ts,[]),Max,Plan,[]).

touristList([t1,t2,t3,t4]).

time(t1,6).
time(t2,7).
time(t3,10).
time(t4,15).

member_rest(E,[E|Es],Es).
member_rest(M,[E|Es],[E|Rest]):-
    member_rest(M,Es,Rest).

solve_left(s(Lefts0,Rights0),Time0,Plan0,Plan):-
    member_rest(T1,Lefts0,Lefts1),
    member_rest(T2,Lefts1,Lefts2),
    time(T1,TT1),
    time(T2,TT2),
    Time1 is Time0 - max(TT1,TT2),
    Time1 >= 0,
    Plan0 = [[T1,T2]|Rest],
    solve_right(s(Lefts2,[T1,T2|Rights0]),Time1,Rest,Plan).

solve_right(s(Lefts0,Rights0),Time0,Plan0,Plan):-
    Lefts0 == [] -> Plan0 = Plan;
    member_rest(T,Rights0,Rights1),
    time(T,TT),
    Time1 is Time0 - TT,
    Time1 >= 0,
    Plan0 = [[T]|Rest],
    solve_left(s([T|Lefts0],Rights1),Time1,Rest,Plan). 
```

我试过这个：

```
 ruleMaker(Name) :-
    family(Name,[Title/Speed|_]),
    person(Title,Speed).

moveFamily(Name,Journey, TotalTime):-
  ruleMaker(Name),
  findall(Person-Time, person(Person, Time), Left),
  moveFamily(Left, [], Journey),
  findall(Time, member([Time|_], Journey), LTime),
  sumlist(LTime, TotalTime). 
```

有人可以告诉我为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:25:56.380

我在这里没有给出解决方案，因此您可以自己解决，但这里有一些建议：

你只需要保存两个列表，一个用于左侧的人，另一个用于右侧的人。最初所有人都在左侧（列表）。

那么你基本上有两种情况：

*   将最后两个人从左向右移动的一种
*   另一种是从左侧列表中选择两个人并将他们“移动”到右侧列表中，然后从生成的右侧列表中选择一个人并将其“移动”到左侧。此时你可以做一个递归来解决问题。
*   完成旅程后，您只需计算所花费的总时间即可。

[编辑：这是我使用内置的解决方案，因为你有一个几乎可以工作的版本]

```
person(father, 1).
person(mother, 2).
person(child, 5).
person(granny, 1).

bridge(Journey, TotalTime):-
  findall(Person-Time, person(Person, Time), Left),
  bridge(Left, [], Journey),
  findall(Time, member([Time|_], Journey), LTime),
  sumlist(LTime, TotalTime).

bridge([P1-T1, P2-T2], _, [[T, [P1-P2]]]):-
  T is max(T1, T2).
bridge(Left, Right, [[LT, [P1-P2]],[RT, [P3]]|Journey]):-
  select(P1-T1, Left, MLeft1),
  select(P2-T2, MLeft1, MLeft2),
  LT is max(T1, T2),
  select(P3-RT, [P1-T1,P2-T2|Right], MRight),
  bridge([P3-RT|MLeft2], MRight, Journey). 
```

# php - jQuery加载时数据出现和消失

> ID：10131520
> 
> 赞同：0
> 
> 时间：2012-04-12T20:45:18.940
> 
> 标签：php, jquery

我有下面的代码，我有选择`$menucompare`值的选项。

```
<script>
  function displayVals() {
    var singleValues = $("#menucompare").val();
    $("#hiddenselect").attr("value", singleValues );
    $("p").html("Procent of: " + singleValues);
  }

  $("select").change(displayVals);
  displayVals();
</script>

<table width='100%' border='1' cellspacing='0' cellpadding='0'>
  <th>weeks</th>
  <th style="text-align: left; padding-left:5%;"><?php echo "<p></p>"; ?></th> 
```

我可以得到这个值（Procent of: $menucompare）。但问题是当我选择一个选项时，该值在 jquery 加载时显示正确，并且当 jquery 完成加载时它会消失（Procent of: $menucompare），当然变量 $menucompare 具有正确的值。

所以我希望即使 jquery 完成加载此值仍保留在表中。希望能得到一些解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:13:07.383

请尝试以下脚本：

```
<script type="text/javascript">

  $(document).ready(function(){
       $("select").change(function() { 
             displayVals(); 
       });
       displayVals();
  });

  function displayVals() {
    var singleValues = $("#menucompare").val();
    $("#hiddenselect").val(singleValues);
    $("p").html("Procent of: " + singleValues);
  }

</script> 
```

# jquery - 带有 TinyMCE 字段的 Jquery 验证表单，空值没有给出错误

> ID：10131526
> 
> 赞同：1
> 
> 时间：2012-04-12T20:45:33.700
> 
> 标签：jquery, jquery-validate, tinymce

我有以下带有 TinyMCE 编辑器的 jQuery 验证脚本：[http ://www.zinomen.com/test/validate.html](http://www.zinomen.com/test/validate.html)

当字段为空时，根据名字和姓氏，您会收到错误消息，但在消息字段中您不会收到错误消息。

我使用以下代码：

```
<script type="text/javascript">
$.validator.setDefaults({
    submitHandler: function() { alert('submitted, value of message = '+ tinyMCE.get('message').getContent()); }
});

$(document).ready(function() {

    // validate signup form on keyup and submit
    $("#signupForm").validate({
        rules: {
            firstname: {
                required: true,
                minlength: 2
            },
            lastname: {
                required: true,
                minlength: 2
            },
            message: {
                required: true,
                minlength: 15
            }
        },
        messages: {
            firstname: {
                required: "Please fill in your firstname",
                minlength: "Your firstname must consist of at least 2 characters"
            },
            lastname: {
                required: "Please fill in your lastname",
                minlength: "Your lastname must consist of at least 2 characters"
            },
            message: {
                required: "Please fill in your message",
                minlength: "Your message must consist of at least 15 characters"
            }
        }
    });
});
</script> 
```

您获得的 tinyMCE 字段的值：`tinyMCE.get('message').getContent();`以及您拥有的形式`<textarea id="message" name="message"></textarea>`

任何人都可以帮助我，通过一个空的消息字段来获取 jquery 验证的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:27:36.987

工作jsFiddle：http: [//jsfiddle.net/jNJ2G/1/](http://jsfiddle.net/jNJ2G/1/)

我使用了[TinyMCE jQuery 插件](http://www.tinymce.com/js/tinymce/jscripts/tiny_mce/jquery.tinymce.js)并为 jquery 验证创建了一个自定义规则

```
$('#message').tinymce({
                    // Location of TinyMCE script
                    script_url : 'http://www.zinomen.com/test/tiny_mce/tiny_mce.js',

                    // General options
                    theme : "advanced",
                    plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

                    // Theme options
                    theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                    theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                    theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                    theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
                    theme_advanced_toolbar_location : "top",
                    theme_advanced_toolbar_align : "left",
                    theme_advanced_statusbar_location : "bottom",
                    theme_advanced_resizing : true,

                    // Example content CSS (should be your site CSS)
                    content_css : "css/content.css",

                    // Drop lists for link/image/media/template dialogs
                    template_external_list_url : "lists/template_list.js",
                    external_link_list_url : "lists/link_list.js",
                    external_image_list_url : "lists/image_list.js",
                    media_external_list_url : "lists/media_list.js",
            });

$.validator.addMethod("textInMce", function textInMce(value, element){
    return $('#message').html().length > 15;
}, "Please over 15 chars.");
$.validator.classRuleSettings.textInMce= { textInMce: true };

$("#signupForm").validate({
    rules: {
        firstname: {
            required: true,
            minlength: 2
        },
        lastname: {
            required: true,
            minlength: 2
        }
    },
    messages: {
        firstname: {
            required: "Please fill in your firstname",
            minlength: "Your firstname must consist of at least 2 characters"
        },
        lastname: {
            required: "Please fill in your lastname",
            minlength: "Your lastname must consist of at least 2 characters"
        }
    }
});
if ($("#signupForm").valid())
    alert('succes'); 
```

**现在编辑**这个可以工作的 pastebin 示例:) [http://pastebin.com/cDJ9033C](http://pastebin.com/cDJ9033C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:08:27.973

您的代码不起作用，因为`$("#signupForm")`引用了一个不“包含”编辑器但编辑器源 html 元素的表单 - 您的 textarea。Tinymce 使用像 textarea 这样的 html 元素来获取和写入编辑器内容，但 tinymce 像大多数 rte 编辑器一样创建一个 contenteditable iframe 来编辑内容。

验证不起作用，因为您的 textarea 上不会有 keyup 事件 - 这些事件在编辑器 iframe 中被触发（我猜如果您点击提交按钮（？），验证将起作用）。

为了使您的代码正常工作，您必须将编辑器内容写回 keyup 并在表单元素上触发/触发 keyup 事件（这可能无法使用某些 IE 浏览器）。

您可以使用[tinymce 设置配置参数](http://www.tinymce.com/wiki.php/Configuration%3asetup)来执行此操作。以下是在tinymce init 函数（配置）中编写内容的示例：

```
theme : "advanced",
plugins: "style, paste, wordcount",
...
setup : function(ed){

    ed.onKeyUp.add(function (ed, event) {
            tinymce.triggerSave();
            $("#signupForm#message").trigger({type: 'keyup', ctrlKey: event.ctrlKey, altKey: event.altKey, which: event.keyCode, event:eventObject });
    });
},
... 
```

# web-services - 为什么此 CAML 查询不筛选来自 SharePoint Web 服务调用的结果？

> ID：10131529
> 
> 赞同：0
> 
> 时间：2012-04-12T20:45:36.283
> 
> 标签：web-services, sharepoint-2007, caml

我正在尝试过滤由以下 Web 服务调用返回的结果列表到 SharePoint 列表。当我有

```
query.InnerText = ""; 
```

结果包括 SharePoint 列表中的每一行 - 包括 IN SERVICE DATE 小于今天、大于今天或根本没有值的行。我需要 CAML 查询来过滤，但添加 Where 语句不起作用。

```
service.Url = url;
String pipeProjectSummaryListGuid = "{2D193799-F1FB-46B1-A313-56B8B12E1111}";

XmlDocument xmlDoc = new System.Xml.XmlDocument();
XmlElement query = xmlDoc.CreateElement("Query");
XmlElement viewFields = xmlDoc.CreateElement("ViewFields");
XmlElement queryOptions = xmlDoc.CreateElement("QueryOptions");
String rowLimit = "9000";

query.InnerText = "<Where><Gt><FieldRef Name=\"In_x0020_Service_x0020_Date\" /><Value Type=\"DateTime\"><Today /></Value></Gt></Where>";
viewFields.InnerXml = "<FieldRef Name=\"NEW_ID\" /><FieldRef Name=\"In_x0020_Service_x0020_Date\" /><FieldRef Name=\"ProjectPriority\" />";
queryOptions.InnerXml = "<ViewAttributes Scope=\"Recursive\" /><IncludeMandatoryColumns>FALSE</IncludeMandatoryColumns>";

try
{
    results = service.GetListItems(pipeProjectSummaryListGuid, null, query, viewFields, rowLimit, queryOptions, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:43:14.907

尝试使用`query.InnerXml`而不是`query.InnerText`.

# c++ - 为什么 boost asio 函数 expires_from_now() 取消了一个deadline_timer？

> ID：10131531
> 
> 赞同：9
> 
> 时间：2012-04-12T20:45:38.327
> 
> 标签：c++, linux, boost, boost-asio

当我尝试获取（未设置！）使用 boost expires_from_now() 的当前到期时间似乎实际上取消了计时器，但它实际上按预期运行，但最终没有调用处理程序。

或者换句话说，当使用 expires_from_now() 访问 deadtime_timer 时，它将立即调用处理程序，而不是在处理程序到期时调用处理程序。

请考虑以下代码和相应的输出：

```
#include <boost/asio.hpp> 
#include <boost/thread.hpp> 
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/date_time/posix_time/posix_time_io.hpp>
#include <iostream> 

using namespace boost::posix_time;
using namespace std;

void handler1(const boost::system::error_code &ec) 
{ 
    if (ec == boost::asio::error::operation_aborted)
    {
        std::cout << microsec_clock::local_time() << " Handler1: Timer 1 was cancelled or retriggered." << std::endl; 
    }
    else
    {
        std::cout << microsec_clock::local_time() << " Handler1: expired." << std::endl; 
    }
} 

boost::asio::io_service io_service1; 

class Mytimer {
public:
    Mytimer();
    void startTimer();
    void runTimerThread();
    bool isRunning();
private:
    bool m_isRunning;
    boost::asio::deadline_timer* m_pTimer;
    boost::thread* m_pThread;
};

Mytimer::Mytimer()
  : m_pTimer(NULL),
    m_pThread(NULL)
{
    m_pTimer = new boost::asio::deadline_timer(io_service1); 
    m_pTimer->async_wait(handler1); 
}

void Mytimer::runTimerThread()
{
    io_service1.run();
}

void Mytimer::startTimer()
{
    m_pThread = new boost::thread(&Mytimer::runTimerThread, this);
    m_pTimer->expires_from_now(boost::posix_time::seconds(10));
}

bool Mytimer::isRunning()
{

    time_duration td = m_pTimer->expires_from_now();
    if (td.total_seconds() > 0)
    {
        return true;
    }
    return false;
}

int main() 
{ 
    time_facet *facet = new time_facet("%Y%m%d %H:%M:%S%f");
    std::cout.imbue(std::locale(std::cout.getloc(), facet));

    cout << microsec_clock::local_time() << " before timer construction" << endl;
    Mytimer timer;
    cout << microsec_clock::local_time() << " before startTimer()" << endl;
    timer.startTimer();
    cout << microsec_clock::local_time() << " IsRunning: " << timer.isRunning() << endl;
    for (int i = 0; i <= 20; i++)
    {
        sleep(1);
        cout << microsec_clock::local_time() << " IsRunning: " << timer.isRunning() << endl;
    }
} 
```

> 20120412 22:41:45689235 在计时器构造之前
> 20120412 22:41:45689514 在 startTimer() 之前
> 20120412 22:41:45689619 IsRunning: 1
> 20120412 22:41:45689693 Handler1：计时器 1 已取消或重新触发。
> 20120412 22：41：46689792 ISRUNGNUSN：1
> 20120412 22：41：47689994 ISRUNNNUMNNIUNN：1
> 20120412 22：41：48690179 ISRUNNUNNINNE：1
> 20120412 22：41：
> 41：41：49690375
> ISRINN 51690712 ISRUNNNING：1
> 20120412 22：41：52690884 ISRUNNNUMN：1
> 20120412 22：41：53691069 ISRINNUNN：1
> 20120412 22：41：41：
> 41：
> 41：54691236 ISRUNNINN
> 20120412 22：41：57691810 Isrunning：0
> 20120412 22：41：58692001 ISRUNNNING：0
> 20120412 22：41：59692193 ISRUNNINNE：0
> 20120412 22：42：
> 42：00692364 ISRINNUMNING
> ISRINNUMN 02692706 IsRunning: 0
> 20120412 22:42:03692886 IsRunning: 0
> 20120412 22:42:04693071 IsRunning: 0
> 20120412 22:42:05693267 IsRunning: 0
> 20120412 22:42:066934

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T16:20:36.443

> 当我尝试获取（未设置！）使用 boost expires_from_now() 的当前到期时间似乎实际上取消了计时器，但它实际上按预期运行，但最终没有调用处理程序。

这个假设是不正确的。当你创建你的`deadline_timer`

```
m_pTimer = new boost::asio::deadline_timer(io_service1);
m_pTimer->async_wait(handler1); 
```

你已经告诉它立即过期。然后，当你开始你的`io_service`

```
m_pThread = new boost::thread(&Mytimer::runTimerThread, this); 
```

您随后调用

```
m_pTimer->expires_from_now(boost::posix_time::seconds(10)); 
```

正如文档[中清楚描述](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_deadline_timer/expires_from_now/overload2.html)的那样，这将取消任何未完成的处理程序，重点是我的

> 该函数设置到期时间。**任何挂起的异步等待操作都将被取消**。每个取消操作的处理程序将使用`boost::asio::error::operation_aborted`错误代码调用。

`Mytimer::startTimer()`要解决此问题，请按如下方式更改您的方法

```
--- timer4.cc.orig  2012-04-13 11:18:47.000000000 -0500
+++ timer4.cc   2012-04-13 11:16:54.000000000 -0500
@@ -1,4 +1,3 @@
-
 #include <boost/asio.hpp> 
 #include <boost/thread.hpp> 
 #include <boost/date_time/posix_time/posix_time.hpp>
@@ -39,7 +38,6 @@
     m_pThread(NULL)
 {
     m_pTimer = new boost::asio::deadline_timer(io_service1); 
-    m_pTimer->async_wait(handler1); 
 }

 void Mytimer::runTimerThread()
@@ -49,8 +47,9 @@

 void Mytimer::startTimer()
 {
-    m_pThread = new boost::thread(&Mytimer::runTimerThread, this);
     m_pTimer->expires_from_now(boost::posix_time::seconds(10));
+    m_pTimer->async_wait(handler1); 
+    m_pThread = new boost::thread(&Mytimer::runTimerThread, this);
 }

 bool Mytimer::isRunning() 
```

这导致了预期的行为

```
mbp:stackoverflow samm$ ./a.out
20120413 11:17:22922529 before timer construction
20120413 11:17:22923155 before startTimer()
20120413 11:17:22923530 IsRunning: 1
20120413 11:17:23924702 IsRunning: 1
20120413 11:17:24925971 IsRunning: 1
20120413 11:17:25927320 IsRunning: 1
20120413 11:17:26928715 IsRunning: 1
20120413 11:17:27929969 IsRunning: 1
20120413 11:17:28930601 IsRunning: 1
20120413 11:17:29931843 IsRunning: 1
20120413 11:17:30933098 IsRunning: 1
20120413 11:17:31934366 IsRunning: 0
20120413 11:17:32923594 Handler1: expired.
20120413 11:17:32934692 IsRunning: 0
20120413 11:17:33935922 IsRunning: 0
20120413 11:17:34936638 IsRunning: 0
20120413 11:17:35937905 IsRunning: 0
20120413 11:17:36939133 IsRunning: 0
20120413 11:17:37940407 IsRunning: 0
20120413 11:17:38941043 IsRunning: 0
20120413 11:17:39942319 IsRunning: 0
20120413 11:17:40942662 IsRunning: 0
20120413 11:17:41943989 IsRunning: 0
20120413 11:17:42945284 IsRunning: 0
20120413 11:17:43946555 IsRunning: 0
mbp:stackoverflow samm$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:12:00.717

下面的代码现在有正确的deadline_timer初始化，并且有一个私有的bool标志，它允许确定定时器当前是否正在运行。它还有一个成员本地处理程序。

```
class Mytimer {
public:
    Mytimer();
    void startTimer(int timeDelaySecs);
    void cancelTimer();
    void runTimerThread();
    bool isRunning();
    void timerHandler(const boost::system::error_code& ec); 
private:
    bool m_isRunning;
    boost::asio::deadline_timer* m_pTimer;
    boost::thread* m_pThread;
};

Mytimer::Mytimer()
    : m_pTimer(NULL),
      m_pThread(NULL)
{
    m_pTimer = new boost::asio::deadline_timer(io_service1); 
}

void Mytimer::runTimerThread()
{
    io_service1.run();
}

void Mytimer::startTimer(int timeDelaySecs)
{
    m_pTimer->expires_from_now(boost::posix_time::seconds(timeDelaySecs));
    m_pTimer->async_wait(boost::bind(&Mytimer::timerHandler, this, _1)); 
    m_pThread = new boost::thread(&Mytimer::runTimerThread, this);
    m_isRunning = true;
}

bool Mytimer::isRunning()
{
    return m_isRunning;
}

void Mytimer::timerHandler(const boost::system::error_code& ec) 
{ 
    if (ec == boost::asio::error::operation_aborted)
    {
        std::cout << microsec_clock::local_time() << " Handler1: Timer 1 was cancelled or retriggered." << std::endl; 
    }
    else
    {
        std::cout << microsec_clock::local_time() << " Handler1: expired." << std::endl; 
    }
    m_isRunning = false;
} 
```

# asp.net - 从头开始创建 ASP.NET MVC 应用程序

> ID：10131532
> 
> 赞同：0
> 
> 时间：2012-04-12T20:45:40.057
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, svn

到目前为止，我只使用网络表单。但是我和我的朋友想尝试 MVC 架构。一些问题：

*   免费版的 Visual Studio VS Professional 有什么缺点吗？我可以从工作中获得专业版本，但值得付出努力吗？

*   我想使用实体框架和最新版本的 MVC + razor 视图引擎。这个需要单独下载吗？

*   就版本控制而言；乌龟SVN适合2人的小项目吗？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:50:45.740

根据我的经验，SVN 可以作为存储库。如果您使用的是 Visual Studio，则有一个不错的插件，因此您可以在 IDE 中使用它，而不是在 Windows 中。如果我使用的是 SVN，那就是我使用的！更多细节[在这里](http://ankhsvn.open.collab.net/)。

MVC3 可以在[这里下载](http://www.asp.net/mvc/mvc3)

实体框架可以通过 Nuget 安装（PM> Install-Package EntityFramework ）或者快速谷歌将显示下载位置（我认为有版本 4.3 和版本 5 的 CTP）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:49:02.000

1.  免费版可以，不确定是否有任何差异。
2.  是的，您需要单独下载
3.  为什么不呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:49:29.287

从来没听说过。这是一个很好的开始方式。我知道早期版本不允许插件，但不确定最新版本。

EF 将附带 .NET SDK (VS)，因此不需要。您可以从 Web 平台安装程序 (http://www.asp.net/mvc/mvc3) 获取 MVC3

我在一个 4 人的团队中使用 Tortoise SVN，完全没有问题。只要确保你们都知道源代码控制管理的良好规则。

# robots.txt - 我可以为学校域上的子目录使用“robots.txt”文件吗？

> ID：10131538
> 
> 赞同：2
> 
> 时间：2012-04-12T20:45:55.620
> 
> 标签：robots.txt

我拥有一些在大学注册的网络空间。不幸的是，谷歌在该网站上找到了我的 CV（简历），但错误地将其索引为学术出版物，这搞砸了 Google Scholar 上的引用计数之类的事情。我试图将 a 上传`robots.txt`到我的本地子目录中。问题是谷歌忽略了这个文件，而是使用为学校域列出的规则。

也就是说，网址看起来像

> www.someschool.edu/~myusername/mycv.pdf

我上传了一个 robots.txt，可以在这里找到

> www.someschool.edu/~myusername/robots.txt

谷歌忽略了它，而是使用`robots.txt`学校的域名

> www.someschool.edu/robots.txt

如何让 Googlebot 忽略我的简历？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:50:53.523

可悲的是，`robots.txt`它被定义为你得到的任何东西`GET /robots.txt`，所以你不能将它用于你的子目录。

如果您可以使用自定义文件，您可以做的是使用`X-Robots-Tag`HTTP 标头。`.htaccess`这是[Google 关于`X-Robots-Tag`](https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag).

# c++ - 是否可以创建一个包含透明浏览器组件的无窗口 mfc c++ 应用程序？

> ID：10131539
> 
> 赞同：1
> 
> 时间：2012-04-12T20:46:05.660
> 
> 标签：c++, windows, browser, mfc, windowless

是否可以创建一个无窗口的 mfc c++ 应用程序（将在 xp 上运行），它由透明浏览器组件（默认情况下背景透明）和一个按钮（例如关闭该应用程序）组成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:23:14.337

您可以尝试以下代码，但在选择或调整大小时仍然会出现伪影：

```
 private void WebCtrl_Loaded(object sender, RoutedEventArgs e)
    {
        var hRef = new HandleRef(null, WebCtrl.Handle);

        int style = GetWindowLong(hRef, GWL_EXSTYLE);
        if ((style & WS_EX_TRANSPARENT) == 0)
            SetWindowLong(hRef, GWL_EXSTYLE, style | WS_EX_TRANSPARENT);

        style = GetWindowLong(hRef, GWL_STYLE);
        if ((style & WS_CLIPCHILDREN) == 0)
            SetWindowLong(hRef, GWL_STYLE, style | WS_CLIPCHILDREN);
    }

    IntPtr WebCtrl_MessageHook(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        if (msg == WM_ERASEBKGND)
            handled = true;
        return IntPtr.Zero;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T08:09:06.647

No. There's no problem in hosting a `WebBrowser` component in an MFC app, and painting just a single close button in the Non-Client area, but the `WebBrowser` component itself will render a background.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:19:34.907

我认为您不能使用标准 WebBrowser（嵌入式 IE 引擎）来做到这一点，因为它对您的透明度要求一无所知，并且总是会绘制背景。

可以使用替代的 html 引擎，例如[HTMLayout](http://www.terrainformatica.com/htmlayout/main.whtm)。虽然它不如互联网浏览器（没有 javascript 等），但对于 web 样式的 UI，它比 WebBrowser 好得多（更快，使用更少的内存，支持渐变，动画，高级布局）。如果您只需要带有图像、控件、链接、动画和按钮的“Web UI”，并且您正在使用 MFC、WTL 或纯 WinAPI，那么这是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T09:33:19.660

**您是否尝试过捕获窗口的背景并将其添加为浏览器组件的背景？**当然，只有当您想显示您自己（/您的团队）创建的 HTML 文档时它**才会**起作用，但如果不是这样，整个问题将毫无意义。

我从来没有尝试过使用*嵌入式浏览器*这样做，但我在其他一些控件（如备忘录框）中这样做了，它确实有效。如果您选择此解决方案，您仍然应该知道，无论何时移动或调整窗口大小，您都必须重新捕获窗口的背景。

您可以使用您选择的解决方案在嵌入式浏览器中显示背景，但恕我直言，最好的选择是使用 CSS 定义的背景，它将替换为您的背景。（不要忘记伪造一个简单的[javascript](https://stackoverflow.com/questions/10867503/change-background-image-in-body)来刷新表单调整大小/移动的背景，以避免无意中重新加载整个文档。）

部分屏幕截图的更多信息可以在[这里](https://stackoverflow.com/questions/997175/how-can-i-take-a-screenshot-and-save-it-as-jpeg-on-windows)找到。

# grails - 'ApplicationSummaryPage' 的页面组件模板 '$' 的定义无效，参数必须是 Closure 或 Map 和 Closure

> ID：10131540
> 
> 赞同：1
> 
> 时间：2012-04-12T20:46:07.403
> 
> 标签：grails, groovy, spock, geb

下面是我的 Geb 页面、规格和错误。我不确定问题出在哪里以及是什么。当我从中删除以下内容时，`ApplicationSummaryPage`我没有收到此错误。

```
ds（等待：真）
{ module DatasourceInformationRow, $("table.ic-table-creditReportProduct table tr", it) }

```

```
class ApplicationSummaryPage extends Page
{
    static url = "application-summary/application-summary.jsf"

    static at =
    { assert title == "Application Summary" }

    static content =
    {
        menu
        { module MenuModule }

        userPanel
        {module UserPanelModule }

        ds(wait: true)
        { module DatasourceInformationRow, $("table.ic-table-creditReportProduct table tr", it) }

        applicationSummaryForm
        { $("#applicationSummary_form") }

        workItemDiv
        {$("div", id: "consumerWorkItems:workItemPanel")}

        workItemsSection
        {workItemDiv.find (".ui-panel-title").text()}

        resubmitLink
        {$("a",id: "loginForm")}

        overrideDecisionLink
        {$("a",id: "loginForm")}

        addNoteLink
        {$("a",id: "loginForm")}
    }
} 
```

**规格**

类 SearchSpec 扩展 BaseUiSpec { def setup() { login("manager") }

```
def "cccc"()
{
    when: "I search"
    to SearchPage
    at SearchPage

    applicationid.value "10002000000010000"
    searchButton.click()
    at SearchPage

    waitFor
    { searchResultsData }

    println "------------"+ searchResults(0).ApplicationId.text()

    searchResults(0).ApplicationId.click(ApplicationSummaryPage)
    Thread.sleep 5000
    at ApplicationSummaryPage
    println "-----???"+ ds
} 
```

}

**错误**

```
geb.waiting.WaitTimeoutException: condition did not pass in 15.0 seconds (failed with exception)
    at geb.waiting.Wait.waitFor(Wait.groovy:126)
    at geb.content.PageContentTemplate.create(PageContentTemplate.groovy:117)
    at geb.content.PageContentTemplate.get(PageContentTemplate.groovy:98)
    at geb.content.NavigableSupport.getContent(NavigableSupport.groovy:43)
    at geb.content.NavigableSupport.propertyMissing(NavigableSupport.groovy:127)
    at geb.Browser.propertyMissing(Browser.groovy:175)
    at geb.spock.GebSpec.propertyMissing(GebSpec.groovy:55)
    at test.SearchSpec.cccc(SearchSpec.groovy:33)
Caused by: geb.error.InvalidPageContent: Definition of page component template '$' of 'ApplicationSummaryPage' is invalid, params must be either a Closure, or Map and Closure (args were: [class java.lang.String, null])
    at geb.content.PageContentTemplateBuilder.throwBadInvocationError(PageContentTemplateBuilder.groovy:69)
    at geb.content.PageContentTemplateBuilder.methodMissing(PageContentTemplateBuilder.groovy:51)
    at groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
    at com.equifax.ic.testing.framework.ui.pages.applicationmanagement.ApplicationSummaryPage._clinit__closure2_closure5(ApplicationSummaryPage.groovy:24)
    at com.equifax.ic.testing.framework.ui.pages.applicationmanagement.ApplicationSummaryPage._clinit__closure2_closure5(ApplicationSummaryPage.groovy)
    at geb.content.PageContentTemplate.invokeFactory(PageContentTemplate.groovy:134)
    at geb.content.PageContentTemplate.create_closure1(PageContentTemplate.groovy:103)
    at geb.content.PageContentTemplate.create_closure1(PageContentTemplate.groovy)
    at geb.waiting.Wait.waitFor(Wait.groovy:115)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:57:29.967

问题是我不想传递**ds**的索引。更正的版本如下

```
println "-----???"+ ds(0) 
```

在 Geb 邮件列表上得到了回复。在这里为其他人发帖。

# wordpress - 如何向 Jekyll 博客添加站点搜索功能？

> ID：10131541
> 
> 赞同：20
> 
> 时间：2012-04-12T20:46:07.670
> 
> 标签：wordpress, search, github, jekyll

我正在考虑将我的网站从 Wordpress 迁移到 Jekyll，并希望保持对网站进行全文搜索的能力。Wordpress 搜索快速、可靠且格式与主题相匹配，但我还没有找到合适的替代品。

有一个[使用 indextank 的插件解决方案](https://github.com/PascalW/jekyll_indextank)，但我不想通过商业 API 将我的搜索与用户对搜索项进行排名联系起来，我只想要与 Wordpress 搜索相媲美的东西。

我还查看了[google Ajax api](http://jrmiii.com/2009/03/03/super-easy-sidebar-search-for-jekyll-powered-sites.html)，但我不希望网站上有一个浮动的 ajax 搜索框。

总是有谷歌搜索该网站，但我发现这并不可靠。（自从几年前我搬到 wordpress 以来，我还没有尝试过这个，所以也许我弄错了）。

由于所有帖子都以纯文本形式提供，因此在构建网站时创建用于搜索它们的索引似乎不难，但我还没有找到一个好的解决方案。有什么建议或例子吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-06T14:43:40.507

[Jekyll + lunr.js](https://github.com/slashdotdash/jekyll-lunr-js-search) = 强大的全文搜索，在您的浏览器中使用 JavaScript，为您的 Jekyll 静态网站

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T12:58:19.630

[调查Google 自定义搜索](http://www.google.com/cse/)的一种选择。

*您提到过去尝试使用 Google，但我不确定您是否指的是[此处描述](http://www.askdavetaylor.com/how_can_i_add_a_google_search_box_to_my_web_site.html)的自定义搜索框。*发布这个以防万一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T14:21:15.947

[https://github.com/flaptor/indextank-jquery](https://github.com/flaptor/indextank-jquery)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-08T17:53:28.017

[https://github.com/chinchang/super-search/](https://github.com/chinchang/super-search/)

这不需要额外的配置。只需即插即用的库，即可在您的 jekyll 博客的 RSS 提要上使用整洁的页面搜索 UI。

# meteor - 在远程服务器上运行 MeteorJS

> ID：10131546
> 
> 赞同：2
> 
> 时间：2012-04-12T20:46:19.297
> 
> 标签：meteor

我喜欢在远程服务器上通过 SSH 进行开发——在这种情况下有什么方法可以运行和访问流星的调试服务器吗？

它侦听[http://localhost://3000](http://localhost://3000)，而不是[http://example.com://3000](http://example.com://3000)，所以我无法访问它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:13:50.223

我刚刚在 app/meteor/run.js 中找到了代码，并将 Status.listening 语句的主机值硬编码到我的主机中，现在它可以工作了！也许 --host 可以作为一个选项添加到未来的“流星运行”中，作为一个可持续的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:40:01.487

你也可以做一个 ssh 本地端口转发，更多信息在[这里](http://magazine.redhat.com/2007/11/06/ssh-port-forwarding/#local)。

# c++ - 未解析的重载函数类型的 C++ lambda 错误转换

> ID：10131552
> 
> 赞同：-2
> 
> 时间：2012-04-12T20:46:54.497
> 
> 标签：c++, c++11

知道为什么这会产生编译错误吗？

```
std::unordered_map<int,int> mymap;
std::for_each(mymap.begin, mymap.end(), [](std::unordered_map<int, int>::value_type mapval) {
    std::cout << mapval.first << ",";
});

error: conversion from â<unresolved overloaded function type>â to non-scalar type âstd::_Rb_tree_iterator<std::pair<const int, int> >â requested 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:49:43.147

```
mymap.begin() 
```

您缺少`()`,`begin`是成员函数，而不是数据成员。

# vb.net - 在另一台计算机的桌面上打开文件夹中的文档

> ID：10131556
> 
> 赞同：1
> 
> 时间：2012-04-12T20:47:13.423
> 
> 标签：vb.net

我编写了一个必须在不同计算机上运行的程序。桌面上的文件夹中有一些文件。现在我想从我编写的程序中打开该文件，该文件在我的计算机上运行良好（参见下面的代码）：

```
If My.Computer.FileSystem.FileExists("C:\Users\Public\Desktop\black\test.doc") Then
        Process.Start("C:\Users\Public\Desktop\black\test.doc")
    Else
        MsgBox("No test.doc found!")
    End If 
```

当我在另一台计算机上运行该程序时，它不起作用。它仅在我将文件放在桌面上而不是文件夹中时才有效（请参见下面的代码）：

```
Dim thepath As String = Environment.GetFolderPath(Environment.SpecialFolder.Desktop)
    Process.Start(thepath & "\test.doc") 
```

这个想法是保持桌面干净，没有存储在桌面文件夹中的所有文件。

谁知道答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:06:47.040

Environment.SpecialFolder.Desktop 指向用户桌面，例如 C:\Users\Fred Bloggs\Desktop。

你想要公共的 Environment.SpecialFolder.CommonDesktopDirectory。

并使用 Path.Combine 建立您在 System.io 中的文件名，以及许多其他好东西。

# c# - 使用 Event 或 ..? 从类执行返回

> ID：10131557
> 
> 赞同：1
> 
> 时间：2012-04-12T20:47:15.740
> 
> 标签：c#, winforms, class, events, event-handling

我将提供一个简单的例子来说明我正在尝试做的事情——希望这是可能的吗？

我基本上有一门课可以对数据进行大量的格式化/分析。结果，有很多事情可能会出错。我遇到的问题是在出现问题时处理课程。一旦发生错误，我希望此类的所有执行都停止。

此类 (AnalyzingStuff) 是从基于此类执行结果执行各种操作的父窗体调用的。

理想情况下，我会触发一个名为“ABORT”的事件。

因此，在此代码中，我执行以下操作：

```
Class AnalyzingStuff{

public event EventHandler ABORT;

public AnalyzingStuff(){

    for(int i = 0; i < 999999; i ++){
        AnalyzeSomeStuff();
        AnalyzerSomeOtherStuff();
    }
    MoreStuff();
    OtherStuff();
}

private void AnalyzeSomeStuff(){
   if(someconditionNotMet){
        //EXIT OUT OF THIS CLASS, STOP EXECUTION!!!
        this.ABORT.Invoke(this, null);
   }
}
} 
```

调用这个“ABORT”事件，我会停止这个类的执行（停止循环而不做任何其他事情）。我还可以在其他父表单中捕获此事件处理程序。不幸的是，我找不到任何停止执行此类的方法。

到目前为止的想法：

1.  显而易见的答案是简单地设置一个标志并在多个地方反复检查这个标志，但我真的不喜欢这种方法（我当前的实现）。在每个方法调用（有很多）之后都必须检查这一点，这在代码方面是丑陋的。

2.  我想也许是后台工作人员或您可以取消执行 DoWork 的东西？

3.  使用表单作为 AnalyzingStuff 的基类，因此我可以简单地调用“this.Close();”。

您认为解决这种情况的最佳方法是什么？这些是最好的解决方案吗？是否有其他优雅的解决方案可以解决我想要的问题，还是我完全走错了方向？

**编辑：**我在整个代码中使用了一系列 try/catch 块，用于处理可能发生的不同错误。不幸的是，并非所有人都要求进行中止，因此需要立即抓住他们。因此，try/catch 不是最理想的方法.. 是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:44:29.503

不要在构造函数中进行分析。在主要的 Analyze() 方法中执行此操作。

使用例外。如果由于致命错误而要中止，请抛出致命异常。也就是抛出一个你在主要分析方法范围内没有捕捉到的异常。

```
class Analyzer
{
    public Analyzer()
    {
        // initialize things                
    }

    public void Analyze()
    {
        // never catch a fatal exception here
        try
        {
            AnalyzeStuff();
            ... optionally call more methods here ...
        }
        catch (NonFatalException e)
        {
            // handle non fatal exception
        }

        ... optionally call more methods (wrapped in try..catch) here ...
    }

    private void AnalyzeStuff()
    {
        // do stuff
        if (something nonfatal happens)
            throw new NonFatalException();

        if (something fatal happens)
            throw new FatalException();
    }
} 
```

外部：

```
{
    var analyzer = new Analyzer();
    try
    {
        analyzer.Analyze();
    }
    catch (FatalException)
    {
        Console.WriteLine("Analysis failed");
    }
} 
```

如果你不喜欢这样使用异常，你可以通过让每个分析方法返回一个布尔值来完成同样的事情：

```
if (!AnalyzeStuff())
    return false;
if (!AnalyzeMoreStuff())
    return false;
...
return true; 
```

但是你最终会得到很多 return 语句或很多大括号。这是风格和偏好的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:51:01.493

如果出现问题，您能否抛出异常，并在循环中调用该方法的地方运行 try catch？

如果你这样做，你可以在类失败时做一些事情（你将把它放在catch中），并且你可以做一些事情来在完成后关闭与数据库++的连接。

或者您可以让方法返回一个 int，以判断该方法的执行是否有效。前任。返回0；是有效执行，则返回 1-500 可能是不同的错误代码。或者您可能会选择传递布尔值的简单版本。如果您需要从错误代码以外的方法返回值，您可以将它们作为 OUT 变量传递。以下示例：

```
Class AnalyzingStuff{

public AnalyzingStuff(){

    for(int i = 0; i < 999999; i ++){
        if (!AnalyzeSomeStuff() || !AnalyzerSomeOtherStuff())
            break;
    }
    MoreStuff();
    OtherStuff();
}

private bool AnalyzeSomeStuff(){
   if(someconditionNotMet){
       return false;
   }
return true;
}
} 
```

您当然可以使用您的活动。为了简单起见，我只是将其删除。

# java - QT Jambi - QLCDNumber 实时更新

> ID：10131560
> 
> 赞同：0
> 
> 时间：2012-04-12T20:47:28.577
> 
> 标签：java, qt, qt-jambi

在我的大学里，我们使用 QT Jambi (Java) 和 Eclipse 集成来处理接口。我想改进我的电梯界面设计。

主要问题是我想用地板实时更新 QLCDNumber。我模拟电梯工作的方法是在 2 个楼层之间执行 Thread.sleep(1000)，这样，我的 QLCDNumber 将显示“动画”，上面写着“1...2...3...4 ”。问题是 QLCDNumber 只显示 1 和 4，没有动画。

因此，例如（恢复），我制作的代码是这样的：

```
private void simulate(int floor){
    while(actualFloor < floor){
        try{
           Thread.sleep(1000);
        }catch(InterruptedException e){};
    actualFloor++;
    ui.LCDfloor.display(actualFloor);   
    }
} 
```

为什么这段代码只显示一楼和最后一楼？对不起，如果你不明白我想要什么，我的英语每天都在进步 :)

先感谢您。

*请注意 LCDFloor 是 QLCDNumber 小部件的名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:08:10.583

看起来你有两个问题：

1.  （我假设）您正在调用`Thread.sleep()`GUI 线程。换句话说，当您调用模拟时，您是在与其余 gui 操作相同的线程上执行此操作的。这会导致整个 gui 暂停。

2.  你从来没有让 Qt 有机会真正更新 UI。当您调用`ui.LCDfloor.display(actualFloor)`时，绘制事件会排队，以便可以更新 UI，但不是让 UI 有机会实际执行绘制事件，而是继续执行循环，这会阻止 UI 在模拟之后更新完成了。

您有两个基本修复：

1.  不要睡觉，这是糟糕的设计。相反，使用计时器和信号来模拟更改。
2.  [使用processEvents](http://doc.trolltech.com/4.7/qcoreapplication.html#processEvents)强制处理事件。

另请记住，您不能从非 gui 线程更新 GUI 元素。由于这是家庭作业，剩下的交给你:)。

# c# - 应放置在 TempData 中的最大数据量是多少？

> ID：10131566
> 
> 赞同：4
> 
> 时间：2012-04-12T20:48:07.607
> 
> 标签：c#, asp.net-mvc-3, size, limit, tempdata

关于应该在 TempData 字典中放置多少数据，是否有上限或最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:49:49.130

查看这篇描述使用 TempData 时的最佳实践的帖子：

[何时在 ASP.NET MVC 3 应用程序中使用 ViewBag、ViewData 或 TempData](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

这个更进一步：

[ASP.NET MVC：你知道你的 TempData 在哪里吗？](http://www.gregshackles.com/2010/07/asp-net-mvc-do-you-know-where-your-tempdata-is/)

底线是：**默认情况下，TempData 存储在 Session 对象中。**所以限制是你的 Session 对象的限制。请参阅这篇[文章](https://stackoverflow.com/q/2843237/114029)以获得一些见解。

需要考虑的事项：

*   通常，会话存储在工作进程内存中，例如：在 RAM 中......
*   要增加可用内存量，请检查 IIS 中应用程序池的内存限制。

要更深入地了解 Session 对象，请查看 MSDN 上的此文档：

[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

# c# - 当 DetailsView 没有数据时进入插入模式

> ID：10131568
> 
> 赞同：2
> 
> 时间：2012-04-12T20:48:14.100
> 
> 标签：c#, asp.net, entity-framework, detailsview

我对 .NET 4 Web 开发非常陌生，我正试图弄清楚这应该如何工作。在我的页面上，我有一个下拉列表、一个文本框、一个搜索按钮和一个由实体数据源连接的详细信息视图。实体源和详细信息视图设置为允许自动插入和更新。这是我的查询扩展器的标记：

```
 <asp:QueryExtender ID="QECustFilter" runat="server" TargetControlID="ClaimEntitySource" >
            <asp:PropertyExpression>
                <asp:ControlParameter ControlID="ddlCustomer" Name="CTCustomerSubID" PropertyName="SelectedValue" />
                <asp:ControlParameter ControlID="txtClaim" Name="CustClaimID" PropertyName="Text" />
            </asp:PropertyExpression>
        </asp:QueryExtender> 
```

如您所见，它通过他们在下拉列表中选择的内容以及文本框中的文本进行过滤。这就是我想要发生的事情：

1.  用户从下拉列表中选择值
2.  用户在文本框中输入文本
3.  用户点击搜索按钮。
4.  如果找到符合条件的记录，则允许用户在详细信息视图中编辑记录。
5.  如果未找到记录，则强制详细信息视图进入插入模式。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:44:12.910

我想到了。如果有人关心后面的代码：

```
Listview.ChangeMode(FormViewMode.Edit); 
```

# android - Android - 无法获得滚动视图以正确滚动列表

> ID：10131569
> 
> 赞同：0
> 
> 时间：2012-04-12T20:48:19.423
> 
> 标签：android, android-layout

我有这个非常基本的观点：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >         

<TextView
    android:id="@+id/question_label"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Your question: "
    />     

<TextView
    android:id="@+id/question"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text=""
    />         

        <EditText  
            android:id="@+id/question_text"  
            android:layout_height="wrap_content"  
            android:hint="@string/question_comment_hint"  
            android:inputType="textMultiLine"  
            android:lines="4"  
            android:layout_width="fill_parent">  
        </EditText>

<Button  
            android:id="@+id/submit"  
            android:layout_height="wrap_content"  
            android:text="@string/submit"  
            android:onClick="sendFeedback"  
            android:layout_width="fill_parent">  
        </Button>       

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >    

<TextView
    android:id="@+id/please_wait"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Please wait while the discussion loads..."
    />     

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView>         

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

我希望用它做的是允许用户滚动浏览整个评论列表。截至目前，当屏幕上的评论多于空间时，屏幕不会向下滚动。

知道我应该改变什么来启用评论的滚动吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:01:09.330

似乎您正在尝试在 ListView 中的评论上方添加标题。正如编码员指出的那样，您不应该将 ListView 放在 ScrollView 中。您应该考虑将标题视图直接添加到您的 ListView（请参阅 参考资料[`addHeaderView`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:04:31.393

我会完全取消滚动视图 - 基于我认为您尝试完成的任务，因为列表视图将自行处理滚动。像这样：

```
<?xml version="1.0" encoding="utf-8"?>   
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >         

<TextView
android:id="@+id/question_label"    
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Your question: "
/>     

<TextView
android:id="@+id/question"    
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text=""
/>         

    <EditText  
        android:id="@+id/question_text"  
        android:layout_height="wrap_content"  
        android:hint="@string/question_comment_hint"  
        android:inputType="textMultiLine"  
        android:lines="4"  
        android:layout_width="fill_parent">  
    </EditText>

<Button  
        android:id="@+id/submit"  
        android:layout_height="wrap_content"  
        android:text="@string/submit"  
        android:onClick="sendFeedback"  
        android:layout_width="fill_parent">  
    </Button>       

<TextView
android:id="@+id/please_wait"    
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Please wait while the discussion loads..."
/>     

<ListView
android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="20px" >        
</ListView> 
```

现在的不同之处在于 ID 为“please_wait”的 TextView 不会随列表滚动。如果您需要它与列表一起滚动，我建议您在 java 中为您的列表使用动态构建的 TableLayout，然后将它和您的 textview 添加到 ScrollView。TableLayout 不会自行滚动，这就是为什么它比在 ScrollView 中使用 ListView 更好的解决方案。如果您想这样做，请告诉我，我将发布一些示例代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:07:38.953

基本上你可以这样做：摆脱滚动视图并加载文本视图。像这样为您的列表视图设置一个简单的适配器：

```
fList = (ListView)findViewById(R.id.lstview);
fList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, new String[]{"Please wait while the discussion loads..."})); 
```

比获取您的评论并设置为您的列表视图。

```
list.setAdapter(adapter); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T21:25:53.923

您不应该在 ScrollView 中有 ListView。膨胀一个 LinearLayout(vertical) 代替：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/question_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Your question: " />

    <TextView
        android:id="@+id/question"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="" />

    <EditText
        android:id="@+id/question_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/question_comment_hint"
        android:inputType="textMultiLine"
        android:lines="4" >
    </EditText>

    <Button
        android:id="@+id/submit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="sendFeedback"
        android:text="@string/submit" >
    </Button>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/please_wait"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Please wait while the discussion loads..." />

            <LinearLayout
                android:id="@+id/comments_layout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="invisible" >
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

在您的代码中：

```
LinearLayout commentsLayout = (LinearLayout) findViewById(R.id.comments_layout); 
```

填充线性布局：

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    for(int i = 0; i < comments.size(); i++){

        View childView = inflater.inflate(R.layout.comment_list_item, commentsLayout, false);

        TextView comment = (TextView) childView.findViewById(R.id.comment);

        comment.setText("Something");

        categoriesLayout.addView(childView, i);

    } 
```

类似的东西，希望这会有所帮助。

# c++ - 我可以用 C++ 编写基于以太网的网络程序吗？

> ID：10131572
> 
> 赞同：6
> 
> 时间：2012-04-12T20:48:29.577
> 
> 标签：c++, linux, sockets, ethernet

我想编写一个程序并在两台机器上运行它，并在以太网帧中将一些数据从一台机器发送到另一台机器。

通常，应用程序数据位于 OSI 模型的第 7 层，是否存在内核限制或 API 限制之类的东西，这会阻止我编写可以指定目标 MAC 地址并将一些数据发送到该 MAC 的程序作为以太网有效载荷？然后编写一个程序来监听传入的帧，并从指定的源 MAC 地址抓取帧，从帧中提取数据的有效载荷？

（所以我不想要任何其他开销，如 IP 或 TCP/UDP 标头，我不想高于第 2 层）。

这可以在 C++ 中完成，还是必须在 IP 层进行所有通信，这可以在 Ubuntu 上完成吗？额外的爱指向或提供示例！:D

我的问题显然是我是 C++ 网络编程的新手，据我所知，如果我想通过网络进行通信，我必须使用`socket()`调用或类似的方法，它在 IP 层工作，所以我可以写一个 C++程序在 OSI 第 2 层工作，是否有用于此的 API，Linux 内核甚至允许这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T23:38:17.303

正如您已经提到的套接字，您可能只想使用原始套接字。也许这个[带有 C 示例代码](http://aschauf.landshut.org/fh/linux/udp_vs_raw/ch01s03.html)的页面会有所帮助。

* * *

如果您正在寻找仅使用以太网但仍然有用的程序的想法：

[原始形式的LAN 唤醒](http://en.wikipedia.org/wiki/Wake-on-LAN)非常简单。但是请注意，大多数当前实现实际上发送 UDP 数据包（利用接收器不解析数据包头等，而只是数据包有效负载中的一个字符串）。

* * *

此外，原始套接字的使用通常仅限于特权用户。您可能需要

*   以 root 身份调用您的程序
*   或将其归 root 所有并设置 setuid 位
*   或设置使用创建原始套接字的能力`setcap CAP_NET_RAW+ep /path/to/your/program-file`

最后一个选项提供了比其他两个更细粒度的权限（只是原始套接字，而不是对整个文件系统的写访问等）。然而，它仍然鲜为人知，因为它“仅”从内核 2.6.24 开始支持（Ubuntu 8.04 附带）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T21:37:27.660

是的，实际上 linux 有一个非常好的功能，可以轻松处理第 2 层数据包。您可以使用 TAP 设备，它允许您的用户空间程序通过内核读取/写入以太网流量。

[http://www.kernel.org/pub/linux/kernel/people/marcelo/linux-2.4/Documentation/networking/tuntap.txt](http://www.kernel.org/pub/linux/kernel/people/marcelo/linux-2.4/Documentation/networking/tuntap.txt)

[http://en.wikipedia.org/wiki/TUN/TAP](http://en.wikipedia.org/wiki/TUN/TAP)

# jsf - 使用 EL 语句读取值时设置输入字段的默认值

> ID：10131574
> 
> 赞同：5
> 
> 时间：2012-04-12T20:48:30.187
> 
> 标签：jsf, el

所以我的团队有一个 jsf，我们使用 EL 语句读取输入框的值，工作正常，但默认情况下，我们将值设置为应该填充到字段中的值。如何在让 EL 语句正常工作的同时为输入设置默认值。例子：

```
 <h:inputText value="#{registrationBean.firstName}" styleClass="formEle"/> 
```

我试过了

```
<h:inputText value="#{registrationBean.firstName}First Name" styleClass="formEle"/> 
```

但这会在我们提交时中断连接。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T21:29:02.953

您正在寻找称为“水印”或“占位符”的东西。在低级别，现在这通常由 HTML5`placeholder`属性完成：

```
<input type="text" placeholder="First Name" /> 
```

这当然只适用于支持 HTML5 的浏览器，然后只适用于支持新 HTML5 属性的 JSF 组件。标准的 JSF`<h:inputText>`本身（还）不支持这个。您需要寻找支持此功能的 3rd 方组件库。其中包括 PrimeFaces 及其[`<p:watermark>`](http://www.primefaces.org/showcase/ui/watermark.jsf)：

```
<h:inputText id="firstName" value="#{registrationBean.firstName}" />  
<p:watermark for="firstName" value="First Name" /> 
```

如果由于某种原因不能使用 PrimeFaces，您需要自己重新发明它，以自定义组件和/或自定义 JS/jQuery 片段的风格，就像`<p:watermark>`在幕后所做的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T11:04:33.670

`<h:inputText>`您可以在 PostConstrut 阶段在您的支持 bean 中定义默认值。

```
@ManagedBean(name="registrationBean")   
public class RegistrationBean{

    private String firstName;

    @PostConstruct
    public void init(){
        firstName = "your default value";
    }

} 
```

页面创建后显示的值`h:inputText`将与您在支持 bean 中定义的一样。这是一种没有任何第三方库的工作，也许它会帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:09:49.640

在加载插入 HTML5 的占位符属性后，JSF 呈现的 HTML-Tags 可以通过 JavaScript 进行修改：

```
<script>
  window.onload = function() {
    document.getElementById('email').setAttribute("placeholder", "Email");
    document.getElementById('pwd').setAttribute("placeholder", "Password");
  }
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T12:21:41.040

如果您决定使用 PrimeFaces，则不需要使用水印，请参见以下示例：

```
<h:form>  
    <p:panel id="panel" header="Client Details" style="margin-bottom:10px;">  
    <p:messages id="messages" />  
    <h:panelGrid columns="2">

        <h:outputLabel for="firstName" value="First Name" />  
        <p:inputText id="firstName" value="#{clientlistpagebean.selectedFieldClient.firstName}" required="true" />  

        <p:outputLabel for="lastName" value="Last Name" />  
        <p:inputText id="lastName" value="#{clientlistpagebean.selectedFieldClient.lastName}" required="true" />  

    </h:panelGrid>  
    </p:panel>  

    <p:commandButton value="Submit" update="panel" style="margin-right:20px;" />  
</h:form> 
```

# javascript - 在 Highcharts 条形图中居中数据标签

> ID：10131575
> 
> 赞同：2
> 
> 时间：2012-04-12T20:48:30.867
> 
> 标签：javascript, highcharts

我正在尝试在 Highcharts 的条形图中将标签居中。在我的情况下，您可以在此处看到的倒瀑布图：

[http://jsfiddle.net/mUD9a/3/](http://jsfiddle.net/mUD9a/3/)

我正在尝试将每个条形中的数据标签水平居中，这样如果系列中的数据点的低点为 1，y 为 3，则该点将位于 2。我尝试了高图表中建议的解决方法这里的文档：

[http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-datalabels-y/](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-datalabels-y/)

使用最新版本，通过更改格式化程序回调中的选项似乎不会影响渲染。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:05:28.053

我知道这是旧的，但我只是需要这个，所以我是这样做的。我确定的解决方案是[如何在条形系列](https://stackoverflow.com/questions/8572090/how-to-position-datalabel-at-the-base-of-bar-series)和 alba lions 示例的基础上定位数据标签的组合，使用 stackLabels 而不是 dataLabels。

```
yAxis:{
    stackLabels: {
        style: {
            color: 'white'       // Make the labels white
        },
        enabled: true,           // Enable stack labels
        verticalAlign: 'middle', // Position them vertically in the middle
        align: 'center',            // Align them to the left edge of the bar
        formatter: function() {
            return categories[this.x];
        }
    }
} 
```

见[jsfiddle](http://jsfiddle.net/tPw24/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:42:44.313

我快速浏览了文档和您的示例，并在您的系列中使用 dataLabel 提出了蛮力解决方案。显然对齐到中心将集中在 y 上（例如上面的 3）。所以，我只是使用数据标签上的 x 偏移量将其转移。这不是一个真正合适的解决方案，但可能会让您朝着正确的方向思考：

```
series: [{
    min: 0,
    max: versions.length + 1,
    data: [ { low: 1, y: 3 }, { low: 2, y: 4 }, { low: 3, y: 5 }, { low: 3, y: 5 } ],
    dataLabels: {
        enabled: true,
        color: '#FFFFFF',
        align: 'right',
        x: -130,
        y: 10,
        formatter: function() {
            return  versions[this.y - 1];
        },
        style: {
            fontSize: '13px',
            fontFamily: 'Verdana, sans-serif'
        }
    }                                    
}] 
```

[Wayback Machine 存档版本 - 不起作用，但代码在那里](https://web.archive.org/web/20141031142247/http://jsfiddle.net:80/wjqrh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T21:21:34.780

尝试这个：

```
plotOptions: {
       series: {
       dataLabels: {                    
            enabled: true,
            color: '#000000',
            useHTML:true,
            style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                    },
            formatter:function(){
               return '<div align="center"><b><span>' + this.point.options.name + '</b><br />'+this.x+' '+this.y+'</span></div>';
 }, 
```

# git - 强制 'git merge' 将所有差异声明为合并冲突

> ID：10131577
> 
> 赞同：8
> 
> 时间：2012-04-12T20:48:42.657
> 
> 标签：git, git-merge

在“git merge”中，我希望任何差异，即使通常不是合并冲突，也被视为合并冲突。然后，使用“git mergetool”，我可以看到并解决每一个差异。我尝试在 .gitattributes 中指定 '* -merge' 但这似乎不起作用：

```
$ git checkout master
Switched to branch 'master'
$ ls
foo.c
$ git merge add-on
Updating a628824..2219552
Fast-forward
  0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 bar.c
$ cat .gitattributes 
* -merge
$ ls
bar.c   foo.c 
```

对于上面的“git merge add-on”，我预计“bar.c”会发生合并冲突，没有基本版本，没有本地版本和远程版本。[编辑] 正如一个答案中所建议的，上面没有发生合并。这是我强制合并的情况，但仍然没有所需的合并冲突：

```
$ git merge --no-ff add-on
Merge made by the 'recursive' strategy.
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 bing.c 
```

请注意，上面的“bing.c”实际上是空的；但是，这不是问题，因为提供非空文件仍然会被合并。[编辑 2] 我尝试了 --no-commit 这个结果：

```
$ git merge --no-ff --no-commit add-on
Automatic merge went well; stopped before committing as requested
$ git status
# On branch master
# Changes to be committed:
#
#   new file:   boom.c
#
$ git mergetool
No files need merging
$ cat .gitattributes 
* -merge 
```

我错过了什么？有没有办法确认“.gitattributes”正在被使用/阅读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:53:54.540

你没有合并。您的命令`git merge add-on`执行了“快进”，这意味着它只是移动了分支头。这是因为您的`add-on`分支已经从分支的尖端下降`master`，因此不需要合并。如果你运行`git log`，你会看到没有合并提交。

基本上，在合并之前它看起来像这样：

```
 master
             /
o---o---o---o           add-on
             \         /
              o---o---o 
```

合并只是将`master`指针移到行尾：

```
 master, add-on
                         /
o---o---o---o---o---o---o 
```

如果要强制合并，请传递`--no-ff`标志，如`git merge --no-ff add-on`.

* * *

经过进一步思考，该`merge`属性不会做你想做的事。这仅适用于文件级合并，这意味着合并的双方都对特定文件进行了更改。如果只有一侧有更改（这是您的情况），则不会进行文件级合并，并且无条件接受更改的文件。

您最好的选择可能是用于`git merge --no-ff --no-commit add-on`生成合并但实际上不提交。您现在可以在提交合并之前检查结果并对其进行调整以使您满意。如果您想在每个块的基础上接受更改，您可以执行一些操作，例如`git reset`重置索引，然后`git add -p`执行每个块的分段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T20:55:06.857

您可能想尝试：

```
git merge --no-commit 
```

这将使 GIT 不会提交合并更改。或者，如果您希望它在没有冲突时提交，但又不丢失源分支，那么它是 no-ff：

```
git merge --no-ff 
```

如有必要，两者都可以使用。

更多信息在这里：[为什么默认情况下 git 快进合并？](https://stackoverflow.com/questions/2850369/why-does-git-use-fast-forward-merging-by-default)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-16T21:21:35.680

我有类似的愿望，并且无法使用自动工具来做到这一点。这是一个半自动化的解决方案：

从`master`、合并`add-on`和手动解决更改：

从...开始：

```
git merge --no-ff --no-commit add-on 
```

然后，对于每个更改的文件，请执行以下操作：

```
git show master:path/to/file > from_master
git show add-on/to/file > from_add-on
kdiff3 --qall from_master from_add-on -o path/to/file
git add path/to/file 
```

最后，

```
git commit 
```

### 为什么这个 90% 的解决方案？

这个解决方案即使在“明显的情况”下也会合并，它不会强迫我设置 .gitattributes，因此我可以根据我从谁合并以及为什么而不是我要合并的文件来进行“手动合并”行为。

# django - django 提供的文件在 Windows 上返回空，而不是在 Mac 上

> ID：10131581
> 
> 赞同：1
> 
> 时间：2012-04-12T20:49:00.877
> 
> 标签：django, file, response

```
def _tarFiles(filepaths):
print "create tar file from all files in file list and save to temp working dir. returns tarfile path "
try:
    savePathDir = settings.TAR_FILE_TARGET_DIRECTORY
    if not os.path.exists(savePathDir):
        os.makedirs(savePathDir)

    tarredfiles = tarfile.open(settings.TAR_FILE_TARGET_DIRECTORY + '/' + 'responsefiles.tar',mode='w')
    for f in filepaths:
        tarredfiles.add(f)

    tarredfiles.close()
    return ("Ok", settings.TAR_FILE_TARGET_DIRECTORY + '/' + 'responsefiles.tar')

except Exception as e:
    return ("Error in "+ inspect.stack()[0][3] + " " + e.message, None)

 def sendFiles(files):
    try:
        result, tarfilename = _tarFiles(files)
        if result == 'Ok':
            try:
                print tarfilename
                wrapper = FileWrapper(file(tarfilename))
                response = HttpResponse(wrapper, content_type='application/x-tar') #zip,avi,png,jpeg, etc...
                response['Content-Disposition'] = 'attachment; filename=' + tarfilename#tarredfiles.name #eg. myfile.zip
                response['Content-Length'] = str(os.path.getsize(tarfilename))
                return ("Ok",response)
            except Exception as e:
                return ("Error in "+ inspect.stack()[0][3] + " " + e.message, None)

        else:
            return (result,None)

    except Exception as e:
        return ("Error in "+ inspect.stack()[0][3] + " " +e.message,None) 
```

tarfilename 是文件的完整路径。内容长度看起来正确（将实际文件与 getsize 进行比较）。

在运行 runserver 的 mac 上工作。返回运行 runserver 的 Windows 上的部分文件。如果我在 Windows 上单步执行，或者完全为空文件。

生成的目标目录和文件名是“tarred_files/responsefiles.tar”，文件大小为 90K，返回的 os.path.getsize 为 92160

我在做什么会导致下载一个空文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:04:14.010

对于 Windows，您需要将“rb”添加到文件中。

像这样：

```
wrapper = FileWrapper(file(tarfilename,'rb')) 
```

此外，Content-Length 应该使用整数，而不是字符串

像这样：

```
response['Content-Length'] = os.path.getsize(tarfilename) 
```

# python - Python：将未知大小的数组插入字符串

> ID：10131585
> 
> 赞同：2
> 
> 时间：2012-04-12T20:49:15.897
> 
> 标签：python, python-2.7

在 Python 中，我正在尝试使用“%s”将数组中的元素添加到字符串中。

但是，在编译时，数组的大小和我要插入的字符串是未知的。这个想法是我正在制作一个 madlibs 类型的脚本，它从一个单独的文件中提取文本。

当前代码：

```
from sys import argv

script, input = argv

infile = open(input)

madlibs = eval(infile.readline())
words = []

for word in madlibs:
    words.append(raw_input("Give me a %s: " % word))

print infile.read() % words 
```

因此，输入文件的第一行包含 madlib 问题，随后的文本有故事。这是我正在使用的示例输入文件：

```
["noun", "verb", "verb", "noun"]
There once was a %s named Bill.
He liked to %s all the time.
But he did it too much, and his girlfriend got mad.
She then decided to %s him to get back at him.
He died. It's a sad story.
They buried him. And on his tombstone, they placed a %s. 
```

所以，在一个理想的世界里，

```
print infile.read() % words 
```

会起作用，因为它只会将“单词”中的元素插入从文件中提取的字符串中。

但是，它没有，而且我没有想法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:54:22.257

确保`words`是一个元组：

```
print(infile.read() % tuple(words)) 
```

顺便说一句，MadLib 有时会重复提供的相同单词。因此，制作`words`a`dict`而不是`list`. 然后你可以做这样的事情：

```
words = {
    'man' : 'Bill',
    'store' : 'bar',
    'drink' : 'beer',
    'owner' : 'bartender',
    'action' : 'drink',
    }

text = '''
{man} walks into a {store} and orders a {drink}.
The {owner} asks {man} what he would like to {action}
'''

print(text.format(**words)) 
```

产生

```
Bill walks into a bar and orders a beer.
The bartender asks Bill what he would like to drink 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:54:50.207

“它没有”如何？包括一条错误消息。可能的问题是您需要一个元组而不是列表：

```
>>> print "%s %s %s %s" % ['This','is','a','test']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string
>>> print "%s %s %s %s" % ('This','is','a','test')
This is a test
>>> print "%s %s %s %s" % tuple(['This','is','a','test'])
This is a test 
```

# c - 四叉树和划分为相等的子象限

> ID：10131588
> 
> 赞同：1
> 
> 时间：2012-04-12T20:49:27.357
> 
> 标签：c, quadtree

如果我想遍历四叉树，尺寸必须只有 2^n 吗？如果不是，如果它不能被分成相等的子象限怎么办？例如，带有数据的 5x6 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:14:12.947

有几种方法可以解决这个问题。

首先，您的细分完全是任意的。您可以设置第一个细分以将 5x6 表格尺寸解释为 [1 + 4] x [2 + 4]。那么你的四个象限将是 1x2、1x4、4x2 和 4x4。此时您可以递归，因为尺寸为 2^n。

为了使这对您的代码透明，您可以定义函数以在四叉树坐标和表索引之间进行映射。

# javascript - 通过 jQuery AJAX 发布数据

> ID：10131590
> 
> 赞同：0
> 
> 时间：2012-04-12T20:49:29.073
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 AJAX 将数据发布到我的表中，我有以下表格，

```
<form>
    Total <input type="text" id="total" name="total" /><br />
    Bill name<input type="text" id="bill-name" name="bill-name" /><br />
    bill descriptiion <input type="text" id="bill-description" name="bill-description" /><br />
    bill colour<input type="text" id="bill-colour" name="bill-colour" />
    <input type="button" value="submit" onClick="insertBill();" />
</form> 
```

我的 AJAX 代码是...

```
<script type="text/javascript">
function insertBill()
{
    var bill = $("#bill").val();
    $.post('insert_bill.php', {total: total, bill-name: bill-name, bill-description: bill-description, bill-colour: bill-colour}, function(data) 
    {
        $("#bills").html(data); 
    });
}
</script> 
```

但是由于某种原因，我的价值观没有被传递。我是 AJAX 的新手，所以我一直在学习教程，所以请原谅我的天真！我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:58:21.490

对于这个以及许多其他 PHP、jQuery ajax 问题，我强烈建议您[序列化](http://api.jquery.com/serialize/)试试这个：

```
<div id="bills"></div>
<script type="text/javascript">
function insertBill()
{
    $.post('insert_bill.php', $('form').serialize(), 
        function(data) {
        $("#bills").html(data); 
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:54:34.440

您的 javascript 变量尚未定义。您的 javascript 函数不知道该表单。

尝试这样的事情：

```
$.post('insert_bill.php', {total: $('#total').val(), bill-name: $('#bill-name').val()... 
```

或者您可以预先设置变量

```
<script type="text/javascript">
function insertBill()
{
  var total = $('#total').val(); 
```

我不确定这是在做什么：

```
var bill = $("#bill").val(); 
```

我没有看到任何 id="bill"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:56:47.520

您正在传递甚至没有定义的变量。您需要像之前那样定义所有的 post 变量`var bill = $("#bill").val();`，然后传递它们。

我建议你使用[这个](http://jquery.malsup.com/form/)为你做所有事情的 jQuery 插件。我使用它，它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:56:51.880

将您的`form`标签更改为此（或类似的东西）

```
<form id="bill" onsubmit="return insertBill();"> 
```

在你的函数中，这样做：

```
<script type="text/javascript">
  function insertBill() {
    var bill = $("#bill").val();
    $.post('insert_bill.php', {total: total, bill-name: bill-name, bill-description: bill-description, bill-colour: bill-colour}, function(data) 
      {
        $("#bills").html(data); 
      } );
    return true;     // So that form may proceed.
  }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T20:59:40.780

忽略缺失的值`bill-name`不是有效的标识符，如果你真的想使用`bill-name`你应该用引号将它括起来并使用 jQuerys 检索值[`val()`](http://api.jquery.com/val/)：

```
$.post('insert_bill.php',{ 'bill-name' : $('#bill-name').val() } .... 
```

# c++ - 给定一个 x264 流和一个 ogg vorbis 流，我如何制作一个 mplayer/VLC 可以读取的混合流？

> ID：10131591
> 
> 赞同：3
> 
> 时间：2012-04-12T20:49:32.650
> 
> 标签：c++, ogg, x264, multiplexing, libx264

我很困惑，有点坚持这个问题。我在谷歌上只能找到转码软件的基本用法，与问题无关。

我正在制作一个游戏，我想包括原生捕获能力来流式传输视频。我很想将此流式传输到标准客户端，例如 VLC。它需要采用它可以识别的格式，并且需要多路复用才能使其正常工作。

因此，我的问题是，我知道如何将原始视频帧中的内容编码为 x264（另请参阅[如何使用 x264 C API 将一系列图像编码为 H264？](https://stackoverflow.com/questions/2940671/how-to-encode-series-of-images-into-h264-using-x264-api-c-c)）。我知道如何将原始音频样本编码为 ogg/vorbis。现在，我如何将一个和一个放在一起用于 VLC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:47:58.873

`x264`不是流格式。它是一个软件。该软件将视频编码为 H.264 视频格式。AFAIK，它不会将视频+音频混合到 MP4 或 AVI 容器文件中。查看 ffmpeg/libav 以获得完整的套件。还有其他程序可以混合视频和音频流。

这是我进行的一个实验：

```
youtube-dl "http://www.youtube.com/watch?v=0Bmhjf0rKe8"
avconv -i 0Bmhjf0rKe8.flv -vn -c:a libvorbis -b:a 64k 0Bmhjf0rKe8.ogg
avconv -i 0Bmhjf0rKe8.flv -c:v copy -bsf:v h264_mp4toannexb -an 0Bmhjf0rKe8.h264
avconv -i 0Bmhjf0rKe8.h264 -i 0Bmhjf0rKe8.ogg -c copy 0Bmhjf0rKe8.mkv
mplayer 0Bmhjf0rKe8.mkv
avconv -i 0Bmhjf0rKe8.flv -i 0Bmhjf0rKe8.ogg -c copy -map 0:0 -map 1:0 0Bmhjf0rKe8.mp4
mplayer 0Bmhjf0rKe8.mp4 
```

您应该能够使用 libav 以编程方式执行此操作。

# android - Android应用程序从短信中获取用户名和密码

> ID：10131592
> 
> 赞同：-2
> 
> 时间：2012-04-12T20:49:33.060
> 
> 标签：android, sms

我有一个需要用户名和密码的安卓应用程序，我的服务器通过短信将用户名和密码发送到手机。

我一直在寻找一种方法，让我的应用程序可以读取 SMS 并可以在设置中使用用户名和密码自动配置自己，而不是在设置中手动配置！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:15:50.523

**AndroidManifest.xml**

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" >
    <receiver android:name=".Receiver" >
        <intent-filter >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>
</application> 
```

**接收器.java**

```
import java.util.ArrayList;
import android.content.Context;
import android.content.Intent;
import android.content.BroadcastReceiver;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;

public class Receiver   extends BroadcastReceiver     
{

  @Override
    public void onReceive(Context context, Intent intent) {
      //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;         
    if (bundle != null)
    {
      //---retrieve the SMS message received---
      Object[] pdus = (Object[]) bundle.get("pdus");
      msgs = new SmsMessage[pdus.length];            
      for (int i=0; i<msgs.length; i++)
      {
        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                

        checkSMS(context, msgs[i]);
      }
    } 
    }

  void checkSMS(Context context, SmsMessage sms) 
  {
    String msg = sms.getMessageBody().toString();

  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:56:59.923

使用具有高优先级的 SMS 广播侦听器并在 rcv 检查它是否来自您的服务器用于发送 SMS 的号码，如果是，则从 SMS 文本中提取信息并相应地更新您的应用程序的配置，您甚至可以使用 abortBroad cast如果您希望 SMS 不应显示在本机 SMS 应用程序中，则方法

# javascript - 在 jQuery 中，是否可以暂停执行，直到用户在 jQuery UI 对话框中提交值？

> ID：10131593
> 
> 赞同：0
> 
> 时间：2012-04-12T20:49:33.443
> 
> 标签：javascript, jquery

目前，我有一个事件处理程序， `$('.toggle-enable-item').click(functi ....` 它执行 ajax 请求和一组关联的回调。我只想 `$('.toggle-enable-menu-item .with-comment').click(fun...`为该评论添加一个并将 textarea 设置为 window.unenable_comment。

但是，.with-comment 的事件只是继续进行。有没有办法告诉 Javascript 在用户单击“添加评论项”按钮之前停止执行？理想情况下，我希望它级联到“切换启用项”。FWIW，提示调用似乎正确地停止了执行。

发生这种情况是因为事件正在冒泡吗？有没有办法可以防止这种冒泡并单独进行 ajax 调用？

未启用：

```
<li data-id="1709" data-status="not-enabled" class="toggle-enable-item">enable</li> 
```

启用：

```
<li class="toggle-enable-item" data-id="1710" data-status="enabled">
unenable
<span class="with-comment">with comment</span>
</li> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:52:26.810

您可以通过在用户单击按钮后使用`event.stopPropagation()`“然后单击”来防止冒泡`$('.toggle-enable-menu-item .with-comment').click(function(event){``trigger``toggle-enable-item`

# ruby-on-rails - AWS::S3::Errors::InvalidArgument 与 Paperclip PDF 上传

> ID：10131595
> 
> 赞同：2
> 
> 时间：2012-04-12T20:49:36.403
> 
> 标签：ruby-on-rails, pdf, amazon-s3, paperclip

我正在尝试将在后台进程中生成的 PDF 上传到 AWS S3。我得到的错误有点神秘，我希望有人遇到过这个错误，或者可能能够引导我朝着正确的方向前进。我在应用程序的其他部分使用回形针，但这些正在获取表单数据，因为这是创建 PDF 并将其保存到本地临时目录，然后再上传。

相关宝石：

*   导轨 3.0.9
*   回形针 2.7.0
*   aws-sdk 1.3.9

代码：

```
MyDownload < ActiveRecord::Base
  has_attached_file :download,
    storage: :s3,
    default_style: :original,
    s3_permissions: 'authenticated_read',
    s3_credentials: "#{Rails.root}/config/s3.yml",
    bucket: S3_BUCKET,
    path: ":class/:attachment/:id/:style/:filename",
    s3_protocol: 'https'

  validates_attachment_content_type :download, content_type: [/application\/(x\-)?pdf/i]
  validates_attachment_presence :download

end 
```

在我的后台进程中，我知道 PDF 已生成并且可以在 tmp_path 中查看。这是我正在使用的一些代码：

```
PDFKit.new(report_content).to_file(tmp_path)
obj = MyDownload.new(date: Date.today)
obj.download = File.new(tmp_path)

obj.valid? # returns true 
```

但是当我这样做时它失败了：

```
obj.save!

(AWS::S3::Errors::InvalidArgument)
  (eval):3:in `put_object' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T14:28:35.167

事实证明，切换到 aws-sdk gem 需要 s3_permissions 选项作为符号。更改`'authenticated_read'`以`:authenticated_read`解决问题。

# java - 无限且无需等待？

> ID：10131607
> 
> 赞同：2
> 
> 时间：2012-04-12T20:50:09.653
> 
> 标签：java, concurrency, nonblocking

这是[ConcurrentLinkedQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)文档的描述：

> 基于链接节点的无界线程安全队列。此队列对元素进行 FIFO（先进先出）排序。
> ...
> 此实现采用高效的“无等待”算法

是否有可能*无界* **且** *无需等待*？
我很确定等待自由确保了对任何操作的限制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T21:19:59.290

> 我很确定等待自由确保了对任何操作的限制。

*操作所花费的时间*（或指令数量，或其他）的界限。

在那个 JavaDoc 中，“无界”可能是指队列可能包含*的元素数。*

例如，LinkedBlockingDeque 的 JavaDoc[写道](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingDeque.html)：

> 基于链接节点的可选有界阻塞双端队列。
> 
> 可选的容量绑定构造函数参数用作防止过度扩展的一种方式。容量（如果未指定）等于 Integer.MAX_VALUE。链接节点在每次插入时动态创建，除非这会使双端队列超出容量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:09:19.780

无等待实际上只是意味着在有限数量的步骤内，操作将按照[说明完成](http://en.wikipedia.org/wiki/Non-blocking_algorithm)

> 如果每个操作都限制了算法在操作完成之前将采取的步数，则该算法是无等待的

此定义不适用于`ConcurrentLinkedQueue`. 在轮询（或放入）队列时，每个线程都有可能无限次失败。仅这一事实就告诉我们队列并不是真正的空闲等待。我相信作者没有使用 Herlihy 在 The Art of Multiprocessor Programming 中对无等待的定义。

有关更多信息，CLQ 使用 Michael & Scott 算法，[此处解释](http://www.research.ibm.com/people/m/michael/podc-1996.pdf)

编辑：刚刚意识到我为 M 和 S 队列提供的链接也在 API 中。两者都应该没问题。

# java - JAXB 错误：解组时出现意外元素

> ID：10131609
> 
> 赞同：4
> 
> 时间：2012-04-12T20:50:26.227
> 
> 标签：java, jaxb, jersey, jax-rs

有人可以帮我理解为什么我会收到这个错误：

*javax.xml.bind.UnmarshalException：意外元素（uri：“”，本地：“项目”）。预期元素是 <{}item>*

我是 JAX-B 的新手，但整天都被困在这上面，我真的不明白发生了什么，非常感谢任何帮助，非常感谢。

物品类别：

@XmlRootElement

```
public class Item {

private String itemID;
private String itemDescription;

//need to have a constructor with no params
public Item(){

}

//Constructor: sets object vars
public Item(String itemID, String itemDescription) {

    this.itemID = itemID;
    this.itemDescription = itemDescription;
}

@XmlAttribute
//getters and setters
public String getID() {
    return itemID;
}

public void setId(String id) {
    itemID= id;
}

@XmlElement
public String getDescription() {
    return itemDescription;
}

public void setDescription(String description) {
    itemDescription = description;
} 
```

解组代码：

```
resource = client.resource("http://localhost:8080/testProject/rest/items");
    ClientResponse response= resource.get(ClientResponse.class);
    String entity = response.getEntity(String.class);

    System.out.println(entity);

    JAXBContext context = JAXBContext.newInstance(Item.class);
    Unmarshaller um = context.createUnmarshaller();
    Item item = (Item) um.unmarshal(new StringReader(entity));

And this is the XML i'm trying to parse:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
   <items>
      <item id="1">
        <description>Chinos</description>
      </item>
      <item id="2">
        <description>Trousers</description>
      </item>
</items> 
```

这是创建 XML 的 Web 服务：

```
@GET
            @Produces(MediaType.TEXT_XML)
            public List<Item> getItemsBrowser(){

                java.sql.Connection connection;
                java.sql.Statement statement;

                List<Item> items = new ArrayList<Item>();

                ResultSet resultSet = null;

                try {
                    connection = dataSource.getConnection();
                    statement = connection.createStatement();

                    String query = "SELECT * FROM ITEMS";

                    resultSet = statement.executeQuery(query);

                    // Fetch each row from the result set
                    while (resultSet.next()) {
                      String a = resultSet.getString("itemID");

                      String b = resultSet.getString("itemDescription");

                      //Assuming you have a user object
                      Item item = new Item(a, b);

                      items.add(item);
                    }

                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return items;
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:06:07.097

您从中创建 JAXBContext 的类是 Item.class，但 XML 包含一个名为 items 的列表，该列表又包含不同的项目条目。您将需要另一个包装

```
List<Item> 
```

为此工作。

这是一个完整的工作示例：

物品类：

```
import java.util.List;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Items {

    private List<Item> items;

    @XmlElement(name="item")
    public List<Item> getItems() {
        return items;
    }

    public void setItems(List<Item> items) {
        this.items = items;
    }

} 
```

请注意，在 items 属性上有一个 @XmlElement 注释，因为实际元素在 XML 中称为“item”。

物品类：

```
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;

public class Item {

    private String itemID;
    private String itemDescription;

    // need to have a constructor with no params
    public Item() {}

    public Item(String itemID, String itemDescription) {
        this.itemID = itemID;
        this.itemDescription = itemDescription;
    }

    @XmlAttribute
    public String getId() {
        return itemID;
    }

    public void setId(String id) {
        itemID = id;
    }

    @XmlElement
    public String getDescription() {
        return itemDescription;
    }

    public void setDescription(String description) {
        itemDescription = description;
    }
} 
```

还有一个单元测试：

```
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

import java.io.File;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

import org.junit.Test;

public class JAXBTest {

    @Test
    public void xmlIsUnmarshalled() throws JAXBException {
        JAXBContext context = JAXBContext.newInstance(Items.class);
        Unmarshaller um = context.createUnmarshaller();
        Items items = (Items) um.unmarshal(new File("items.xml"));

        assertNotNull(items);
        assertNotNull(items.getItems());
        assertEquals(2, items.getItems().size());

        assertEquals("Chinos", items.getItems().get(0).getDescription());
        assertEquals("Trousers", items.getItems().get(1).getDescription());

        assertEquals("1", items.getItems().get(0).getId());
        assertEquals("2", items.getItems().get(1).getId());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:20:54.117

由于您使用的是 Jersey 客户端 API，因此您可以执行以下操作并避免创建`Items`类：

```
import java.util.List;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.GenericType;
import com.sun.jersey.api.client.WebResource;

public class JerseyClient {

    public static void main(String[] args) {
        Client client = Client.create();
        WebResource resource = client.resource(""http://localhost:8080/testProject/rest/items"");
        List<Item> items = resource.accept("application/xml").get(new GenericType<List<Item>>(){});
        System.out.println(items.size());
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)

# javascript - 当我添加 jQuery 库时，它会使同一页面上的其他 jQuery 无效

> ID：10131611
> 
> 赞同：1
> 
> 时间：2012-04-12T20:50:28.720
> 
> 标签：javascript, jquery

我正在尝试创建一个包含图像滚动条和投票系统的页面（我从这里复制：http: [//yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-弹出使用 jquery/](http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/)）。

在我添加投票弹出窗口之前，滚动条工作得很好。本质上，当我添加库时

```
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"> 
```

弹出窗口需要工作，滚动图像消失，每当我点击滚动箭头时页面似乎重新加载。如果我注释掉上面的库，那么滚动条会重新出现（但弹出窗口不起作用）。这是其他文件的目录。

*   public/scripts/general0.js - 滚动条的初始化
*   public/script/woo-jcar.js - 滚动功能
*   public/scripts/popup.js" - 弹出式 javascript

请帮忙！我是新手，所以这可能只是一件愚蠢的事情，比如添加到冲突的库或其他东西。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:53:56.467

jQuery 已经存在于您的页面（版本 1.7.1）中，位于 HTML 标记的这一行中：

```
<script type="text/javascript" src="public/scripts/jquery00.js"></script> 
```

删除这一行，你应该没问题：

```
<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:28:18.680

正如 Rocket 所提到的，使用 noConflict 将 $ 重新打开 1.7.2 并使用 $jq126 引用 jQuery 1.2.6：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $jq126 = $.noConflict(true);
    // $ (and jQuery) is jQuery 1.7.2
    // $jq126 is jQuery 1.2.6
</script> 
```

如果这还不够，可能弹出库严格依赖于 jQuery 1.2.6。那么然后打开弹出的libray js文件，将所有代码按照如下方式封装：

```
(function($, jQuery){
    // all the lib code
})($jq126, $jq126); 
```

这样旧的 lib 继续引用旧版本的 jQuery。

# mysql - mysql资源暂时不可用

> ID：10131615
> 
> 赞同：11
> 
> 时间：2012-04-12T20:50:33.647
> 
> 标签：mysql

我在高负载时间看到了其中一些错误：

```
mysql_connect() [<a
href='function.mysql-connect'>function.mysql-connect</a>]: [2002] Resource
temporarily unavailable (trying to connect via
unix:///var/lib/mysql/mysql.sock) 
```

据我所知，mysql 服务器没有达到其最大连接数限制，但还有其他东西阻止它为查询提供服务。MySQL 还会遇到哪些其他限制？

我正在使用 MySQL 5.5.21 运行 RHEL 6.2 64 位

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-15T21:08:50.023

假设您的系统当前是基于 Unix 的（如您的问题陈述中所述）。如果这是正确的，那么您可能会遇到以下问题：

1.  您已经用完了MySQL 可用的[内存。](http://en.wikipedia.org/wiki/Computer_memory)

    这是您最可能面临的问题。MySQL 连接池中的每个连接都需要内存才能运行，如果此资源耗尽，则无法建立进一步的连接。当然，如果您发现这是一个问题[，则可以调整各种操作的内存占用和最大数据包大小。`my.cnf`](http://dev.mysql.com/tech-resources/articles/mysql_intro.html)

    [这是一个可以帮助您的附加线程](http://www.mysqlperformanceblog.com/2006/05/17/mysql-server-memory-usage/)，但您也可以考虑使用更简单的分析工具，例如`top`对正在发生的事情进行良好的大致估计。

2.  您的 MySQL 用户帐户可用的[文件描述符](http://en.wikipedia.org/wiki/File_descriptor)已用完。

    另一个常见问题：如果您尝试为要求文件 IO 超过 1,024 边界（默认情况下）的请求提供服务，您将遇到操作简单失败的情况。这是因为大多数系统都对每个用户一次可以拥有的打开文件描述符的数量指定了软限制和硬限制，超过这个阈值可能会导致问题。

    这通常会在您的日志文件中表达出一系列明显的迹象。检查`/var/log/messages`和您的可比较目录（例如，`/var/log/mysql`看看您是否能找到任何有趣的东西。

3.  您遇到了线程无法满足的[活锁或死锁](http://en.wikipedia.org/wiki/Deadlock)场景。

    内存和文件描述符耗尽的必然结果是，如果您超出了系统能够处理的计算负载，线程可能会超时。它不会抛出此错误消息，但这是将来要注意的事情。

4.  您的系统已用完可用于 的 PID [`fork`](http://en.wikipedia.org/wiki/Fork_%28operating_system%29)。

    另一个常见的场景：`fork`在任何给定时间只有这么多的 PID 可供使用。如果您的系统只是[overforked](http://en.wikipedia.org/wiki/Fork_bomb)，它将不再能够为请求提供服务。

    最简单的检查是查看是否有任何其他服务可以连接到机器。例如，尝试通过 SSH 连接到盒子并发现无法连接是一个很大的线索。

5.  上游代理或连接管理器已用完资源并停止服务请求。

    如果您的客户端和 MySQL 之间有任何服务层，则需要检查它是否已崩溃、挂起或以其他方式变得不稳定。上述建议适用。

6.  [在 65,536 个连接之后，](http://en.wikipedia.org/wiki/Port_%28computer_networking%29)您的端口映射器已经耗尽。

    不太可能，但又是一个可能的疲惫案例。如上所述检查琐碎的服务连接，嗯，这里也是最好的停靠港。

简而言之：**这是一个资源耗尽的场景，包括服务器只是“停机”。**您将不得不进一步分析您的系统以查看您正在阻止的内容。在这种情况下，给我们的所有错误消息都是资源对客户端不可用的事实——我们需要查看有关*服务器*的更多信息以确定更充分的补救措施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T02:56:14.147

我仍然没有找到它所达到的限制，但我确实设法解决了这个问题。使用 MEMORY 引擎的会话表（在 vbulletin 中）存在问题。该表的索引是 HASH，因此当 vbulletin 每小时清除一次该表时，它会将表锁定足够长的时间以阻止其他查询并将 mysql 推到其资源的限制。

通过将索引更改为 BTREE，这允许 MySQL 更快地从会话表中删除行，并避免之前达到的任何限制。当我们将主数据库服务器升级到 MySQL 5.5 时，错误才开始出现，所以我猜 MEMORY 表在最新版本中的处理方式有所不同。

请参阅[http://www.mysqlperformanceblog.com/2008/02/01/performance-gotcha-of-mysql-memory-tables/](http://www.mysqlperformanceblog.com/2008/02/01/performance-gotcha-of-mysql-memory-tables/)了解使用 BTREE 索引而不是 HASH For MEMORY 来提高速度的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T04:47:00.217

哎呀，这可能是很多事情。可能是套接字缓冲区空间已用完。可能`mysql`是接受连接的速度不如它们进入的速度并且达到了积压限制（尽管我希望这会给您一个“拒绝连接”错误，但我不确定您会这样获取 Unix 域套接字）。这可能是@MrGomez 指出的任何事情。

由于您在同一台服务器上运行 Apache 和 MySQL，这在高负载下是一个问题，很可能是 Apache 正在耗尽系统的某些资源，而您只是没有看到（注意到？）丢弃/失败的传入连接/请求在您的日志中。

你在使用连接池吗？如果没有，我会从那里开始。

我还会在 Apache 日志和 syslog 中与 mysql_connect 错误同时查找错误，看看还会出现什么。我特别建议将 MySQL 转移到它自己独立的专用服务器上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T16:20:12.797

就我而言，我正在使用（PHP 驱动程序）处理`JSON`数据类型。`PDO`我`fetch`用来检索一项但忘记添加`LIMIT 1`到查询中。添加它解决了这个问题。

# c - 如何在 /usr/include 中包含自定义 .h 文件

> ID：10131624
> 
> 赞同：3
> 
> 时间：2012-04-12T20:51:13.987
> 
> 标签：c

我在 /usr/include 下放置了一些自定义 .h 文件，但在目录 (/usr/include/itsmag1c) 中，我试图将它们包含在我的 C 文件中。我猜是因为我用

```
#include "filename.h"; 
```

对于同一目录中的文件，我会使用尖括号来包含像 math.h 或 stdio.h 这样的文件。我是否正确地猜测我会使用尖括号来包含我的自定义头文件？如果是这样，我的程序将无法编译，我收到无法找到包含文件的错误。有人可以指出我将如何包含这些文件，还是最好将它们与我的程序放在同一目录中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:54:11.957

两种选择：

1.  采用`#include <itsmagic1c/filename.h>`

2.  像以前一样使用`#include <filename.h>`，但添加一个`-I`开关。

Boost 等使用方法 1。（如果您在系统位置安装了 Boost，就像在具有合理包管理的合理标准 Linux 机器上一样，这种方法效果很好）。

方法 2\. 也很好，但是在构建系统、Makefile 等方面需要做更多的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:54:44.733

通常，您会将自己的标题放在同一目录或子目录中。Same-dir 包括使用“”的工作。对于括号包含，如果你使用 gcc，你可以传递额外的包含目录

```
 -Irelativedir 
```

或者

```
 -I/usr/local/yourpath. 
```

# java - Linux 如何将文件识别为某种文件类型，以及如何以编程方式更改它？

> ID：10131631
> 
> 赞同：5
> 
> 时间：2012-04-12T20:51:50.363
> 
> 标签：java, linux, byte, file-type

我正在用java编写一个程序，它读取文件的输入流，通过根据密码改变字节数来加密它，然后创建一个新的加密文件。

**例如：**
我创建了一个包含以下文字的测试文件：
`This is a test to see if the encrypter project works.`
当我在 java 中读取字节时，我得到：
`[84, 104, 105, 115, 32, 105, 115, 32, 97, 32, 116, 101, 115, 116, 32, 116, 111, 32, 115, 101, 101, 32, 105, 102, 32, 116, 104, 101, 32, 101, 110, 99, 114, 121, 112, 116, 101, 114, 32, 112, 114, 111, 106, 101, 99, 116, 32, 119, 111, 114, 107, 115, 46, 10]`
然后我取每个字节的值，减去密码的 unicode 值，得到绝对值. 然后我把它写到一个文件中。

我正在使用不同的算法对其进行加密，并开始在测试文本文件上对其进行测试。我使用的是 Linux，所以没有文件扩展名（例如 .txt、.pdf 等）我注意到在加密几次后，计算机不再将其识别为文本文件，而是，作为图像文件！（这意味着当您单击它时，默认情况下，它会尝试在图像编辑器中打开文件）

所以这是我的问题：

### 1、是什么导致计算机将文件识别为某种文件类型？

*   我猜它与它在文件中某处查看的某些字节有关，但除此之外，我迷路了。

### 2\. 这些信息存储在文件中的什么位置？

*   我希望即使在加密之后也能够将文件保持为相同的文件类型，所以我在想，例如，如果文件类型信息在前 10 个字节中，我会加密之后的所有内容，但是例如留下前 10 个字节。

### 3.文件类型信息标准吗？

*   这些字节是否具有在所有平台上都是标准的含义（即 pdf 文件是 pdf 文件，无论您在哪台计算机上使用它。是因为`.pdf`扩展名，还是因为文件。）

### 4.假设文件类型由于文件中的字节而被识别，我该如何更改文件类型？

*   我在哪里可以找到文件中哪些字节表示什么的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:07:51.137

在传统的 UNIX 系统上，仅通过查找文件中出现的特定字节模式来识别文件。

该`file`命令使用 包含定义这些字节模式的规则的`magic`配置文件（通常`/etc/magic`是 或）。`/usr/share/file/magic`

就是这样——没有特殊的额外元数据——这一切都是通过对内容的分析来完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:11:53.733

Usually it will be within the first few bytes of the file.

From [Wikipedia](http://en.wikipedia.org/wiki/File_format#Internal_metadata):

> **Internal Metadata**
> A second way to identify a file format is to store information regarding the format inside the file itself. Usually, such information is written in one (or more) binary string(s), tagged or raw texts placed in fixed, specific locations within the file. Since the easiest place to locate them is at the beginning of it, such area is usually called a file header when it is greater than a few bytes, or a magic number if it is just a few bytes long.

Although the file-type is not necessarily going to be stored in the first few bytes, it can be stored [elsewhere](http://en.wikipedia.org/wiki/File_format#File_header)

> The metadata contained in a file header are not necessarily stored only at the beginning but might be present in other areas too, often including the end of the file; it depends on the file format or the type of data it contains. Character-based (text) files have character-based human-readable headers, whereas binary formats usually feature binary headers, although that is not a rule: a human-readable file header may require more bytes, but is easily discernible with simple text or hexadecimal editors. File headers may not only contain the information required by algorithms to identify the file format alone, but also real metadata about the file and its contents. For example most image file formats store information about image size, resolution, color space/format and optionally other authoring information like who, when and where it was made, what camera model and shooting parameters was it taken with (if any, cfr. Exif), and so on. Such metadata may be used by a program reading or interpreting the file both during the loading process and after that, but can also be used by the operating system to quickly capture information about the file itself without loading it all into memory.

Another method of storing the file-type inside the file is using [magic numbers](http://en.wikipedia.org/wiki/File_format#Magic_number)

> One way to incorporate such metadata, often associated with Unix and its derivatives, is just to store a "magic number" inside the file itself. Originally, this term was used for a specific set of 2-byte identifiers at the beginning of a file, but since any undecoded binary sequence can be regarded as a number, any feature of a file format which uniquely distinguishes it can be used for identification. GIF images, for instance, always begin with the ASCII representation of either GIF87a or GIF89a, depending upon the standard to which they adhere. Many file types, most especially plain-text files, are harder to spot by this method. HTML files, for example, might begin with the string (which is not case sensitive), or an appropriate document type definition that starts with

The file-type doesn't even have to be stored inside the file. Other methods include [filename-extentions](http://en.wikipedia.org/wiki/Filename_extension) or even [External Metadata](http://en.wikipedia.org/wiki/File_format#External_metadata)

> A final way of storing the format of a file is to explicitly store information about the format in the file system, rather than within the file itself. This approach keeps the metadata separate from both the main data and the name, but is also less portable than either file extensions or "magic numbers", since the format has to be converted from filesystem to filesystem. While this is also true to an extent with filename extensions — for instance, for compatibility with MS-DOS's three character limit — most forms of storage have a roughly equivalent definition of a file's data and name, but may have varying or no representation of further metadata.

There are many other ways too, but these tend to be the most common.

# java-7 - ibm jdk7 是否包含类似于 Sun/Oracle jdk 的 JavaDB？

> ID：10131633
> 
> 赞同：2
> 
> 时间：2012-04-12T20:51:52.877
> 
> 标签：java-7, javadb

Sun JDK 7 或 6 - 都将 JavaDB 数据库作为 jdk 的一部分。有谁知道 IBM jdk 7 是否附带任何此类数据库，或者我们可以只使用 Apache Derby？谢谢。

# c# - 选择未知类型序列化的列

> ID：10131634
> 
> 赞同：0
> 
> 时间：2012-04-12T20:51:54.310
> 
> 标签：c#, serialization

我正在使用类似的东西：

```
var users = somelinqquery; 
```

目前，我正在使用以下方法返回序列化用户：

```
 return new JavaScriptSerializer().Serialize(
     new { Result = true, Users = users }
    ); 
```

User 对象有更多我需要序列化的属性、年龄、生日等...

如何选择要序列化的属性，例如：

```
 return new JavaScriptSerializer().Serialize(
     new { Result = true, Users = new { Id = users.id, Name = users.name } }
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:55:52.467

将`ScriptIgnore`属性添加到您的字段/属性

```
public class User
{
    [ScriptIgnore]
    public string IgnoreThisField= "aaa";
    public string Name = "Joe";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:57:35.850

您可以为此特定类型创建自己的[JavaScriptConverter 。](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptconverter.aspx)

通过覆盖`IDictionary<string, object> Serialize(object, JavaScriptSerializer)`，您将仅包含那些需要转换的值。

`IEnumerable<Type> SupportedTypes`将确保仅将您指定的类型传递给此方法。

**编辑**

我正在添加一个代码片段来说明我的观点。

```
public class Foo {
    public String FooField { get; set; }
    public String NotSerializedFooString { get; set; }
}
public class FooConverter : JavaScriptConverter {
    public override Object Deserialize(IDictionary<String, Object> dictionary, Type type, JavaScriptSerializer serializer) {
        throw new NotImplementedException();
    }

    public override IDictionary<String, Object> Serialize(Object obj, JavaScriptSerializer serializer) {
        // Here I'll get instances of Foo only.
        var data = obj as Foo;

        // Prepare a dictionary
        var dic = new Dictionary<String, Object>();

        // Include only those values that should be there
        dic["FooField"] = data.FooField;

        // return the dictionary
        return dic;
    }

    public override IEnumerable<Type> SupportedTypes {
        get {
            // I return the array with only one element.
            // This means that this converter will be used with instances of
            // only this type.
            return new[] { typeof(Foo) };
        }
    }
} 
```

# wpf - 在代码隐藏文本块中绑定字符串属性

> ID：10131637
> 
> 赞同：22
> 
> 时间：2012-04-12T20:51:59.823
> 
> 标签：wpf, binding, code-behind

我正在尝试将一个非常简单的属性绑定到 TextBlock，但我必须在代码隐藏 (C#) 中完成所有工作。

我想做的是：

```
public string SomeText { get; set; } 
```

在我尝试对 TextBlock 进行绑定之后：

```
Binding myBinding = new Binding(SomeText);
myTextBlock.SetBinding(TextBlock.TextProperty, myBinding); 
```

如何保持 TextBlock 的 Text 属性与 Property 相同`SomeText`。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-12T21:03:40.423

使用绑定操作

```
Binding binding = new Binding();
binding.Path = new PropertyPath("SomeText");
binding.Source = sourceObject;  // view model?

BindingOperations.SetBinding(theTextBlock, TextBlock.TextProperty, binding); 
```

# c# - 使用数组对最近的数字进行排序

> ID：10131641
> 
> 赞同：3
> 
> 时间：2012-04-12T20:52:24.670
> 
> 标签：c#, arrays, sorting

有一个数组

```
int[] array = new int[]{6,4,10,7,7,9}; 
```

和一个数字 8。

我想按最近的数字对 8 左右的数组进行排序。

最近的数字：分别为 9,7,7,10,6,4

因为 9-1 = 8, 7+1 = 8, 7+1 = 8, 10-2 = 8, 6+2 = 8, 4+4 = 8

我怎样才能对这些数字进行排序。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:56:15.960

```
var result = array.OrderBy(i => Math.Abs(i - value))
             .ThenBy(i => i < value)
             .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:56:24.493

```
int nearbyNumber = 8;
var query = array.OrderBy(number => Math.Abs(number - nearbyNumber )); 
```

`ToArray`如果你真的需要一个数组，你可以打电话。

如果你真的想对数组进行排序，你可以制作一个自定义的 Comparer 对象并使用`Array.Sort`，但这需要更多的工作......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:58:14.747

```
var array = new int[] { 6, 4, 10, 7, 7, 9 };
int target = 8;
var values = array.OrderBy(i => Math.Abs(i - target)).ToArray(); 
```

**编辑**我很快就得到了这个答案，然后用一些验证码询问我是否是人类。非常感谢！:)

# python - 让 NumPy 在逻辑索引后返回正确形状的数组而不进行整形的简洁方法？

> ID：10131644
> 
> 赞同：2
> 
> 时间：2012-04-12T20:52:35.870
> 
> 标签：python, numpy, indexing

说我有数组：

```
 >>> import numpy as np
 >>> myarr = np.array([[1],[2],[3],[2]]) 
```

我想使用逻辑索引来返回`myarr`不等于 2 的子数组。

```
 >>> subarr = myarr[myarr != 2]
 >>> print subarr
 [1 3] 
```

因此，`myarr.shape = (4,1)`但是`subarr.shape = (2,)`。

为什么在逻辑索引不影响维度 2 的情况下会更改维度 2 的大小？我可以轻松地重塑输出，但是如果我需要在我的代码中经常使用逻辑索引，我不想总是考虑额外的维度（即显然与我正在做的逻辑切片无关的维度）这可能已经改变。

这个 (N,1) --> (K,) 的例子特别麻烦，因为一个东西一个数组的任何逻辑切片也必须是一个东西一个数组。

我觉得必须有一种更简洁的方法来让 NumPy 切片操作不理会琐碎的数组维度。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:24:50.440

在 numpy 中，使用布尔数组进行索引与使用 array.nonzero() 进行索引相同。因为 array.nonzero() 为 2darray 返回两组索引，所以您实际上是在第一个和第二个维度上进行索引：

```
>>> myarr = np.array([[1],[2],[3],[2]])
>>> (myarr != 2).nonzero()
(array([0, 2]), array([0, 0]))
>>> myarr[(array([0, 2]), array([0, 0]))]
array([1, 3]) 
```

你真正想要的是：

```
>>> myarr[array([0, 2])]
array([[1],
       [3]]) 
```

您可以通过以下方式获得：

```
>>> myarr[myarr[:,0] != 2]
array([[1],
       [3]]) 
```

或者：

```
>>> myarr[(myarr != 2).nonzero()[0]]
array([[1],
       [3]]) 
```

# javascript - jQuery悬停在同一个元素上

> ID：10131645
> 
> 赞同：0
> 
> 时间：2012-04-12T20:52:37.217
> 
> 标签：javascript, jquery

使用 jQuery hover 你如何检查你是否刚刚再次悬停在同一个元素上？假设我有两个框并悬停在框 1 上，然后离开，然后返回并悬停在同一个框上。我想存储初始悬停元素的值（框 1），然后比较悬停时是否相同。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:55:36.293

试试下面的东西，

```
var lastHovered = '';

$('#box1').hover(function () {
    if (lastHovered == 'box1') {
       alert('You have hovered on this already');
    }   
    lastHovered = 'box1';

    //Your stuff
}, function () {
    //mouse out stuff
});

$('#box2').hover(function () {
    if (lastHovered == 'box2') {
       alert('You have hovered on this already');
    }   
    lastHovered = 'box2';

    //Your stuff
}, function () {
    //mouse out stuff
}); 
```

**注意：**我使用了 2 个函数，假设 box1 hover 和 box2 hover 具有完全不同的功能......如果不是，你可以将它放在同一个函数中并用于`this.id`对它们进行分组......见下文。

```
var lastHovered = '';

$('#box1, #box2').hover(function () {
    if (lastHovered == this.id) { //<-- used this.id instead of hard-coded value
       alert('You have hovered on ' + this.id + ' already');
    }   
    lastHovered = this.id; //<-- used this.id instead of hard-coded value

    //Your stuff
}, function () {
    //mouse out stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:00:34.960

```
var lastHovered = null;
$('#selector1,#selector2,#selector3').hover(function (evt) {
    if(lastHovered && lastHovered === $(this).attr("id")){
//code for 're-hovering'
    }else{
//code for 'new hover'
    }
}, function (evt) {
    //mouse out stuff
    lastHovered  =  $(this).attr("id");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:56:01.763

使用 .data() [http://api.jquery.com/data/](http://api.jquery.com/data/)等等首先在回调中悬停做类似的事情

```
if (!$(this).data('var')) {
    $(this).data('var','value');
} else {
    console.log($(this).data('var'));
}; 
```

# javascript - 在 for 循环中绑定侦听器：变量范围误解

> ID：10131647
> 
> 赞同：1
> 
> 时间：2012-04-12T20:52:48.047
> 
> 标签：javascript, jquery, scope

我有一个变量范围问题，我不明白为什么会发生这种情况以及如何摆脱它：

```
 var items = ['foo', 'bar'];
    for (var index in items) {
        var item = items[index];
        var selector = '.'+item+'-class';
        $(selector).bind('click', function() {
            console.log("class: "+$(this).attr('class'));
            console.log("selector: "+selector);
            console.log("item: "+item);
        });
    } 
```

认为此代码通过以下 HTML 自行执行：

```
<div class="foo-class">Foo</div>
<div class="bar-class">Bar</div> 
```

单击“Foo”会在第一行回显正确的类（即“foo-class”），但选择器和后面的项目名称与 bar 相关。我认为问题在于循环的第二次迭代重置了第一次迭代中使用的变量。

我认为循环内部的声明应该在这个级别清楚地声明它们的范围。我错了吗 ？为什么 ？我该如何解决？

我不是在寻找解决方法，我想要一些干净的东西，更好地理解 javascript 变量范围机制。

这里是[jsfiddle](http://jsfiddle.net/reVRn/)。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:58:42.963

这是您更新的小提琴示例。

```
var items = ['foo', 'bar'];
for (var index in items) {
    (function() {
        var item = items[index]; 
        var selector = '.' + item + '-class';
        $(selector).bind('click', function() {
            console.log("class: " + $(this).attr('class'));
            console.log("selector: " + selector);
            console.log("item: " + item);
        });
    })();
}​ 
```

创建匿名函数将为您定义的每个变量定义一个新范围

提示：尝试创建一个单独的函数来执行绑定，以保持代码更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:56:58.493

这些 for 循环总是一样的（google it）。JavaScript 没有块作用域而是函数作用域，因此当单击一个项目时，*一个*变量`selector`具有它在最后一次循环运行后的值（对于变量也是如此`item`）。

为了解决这个问题，您需要在循环中使用另一个闭包，将变量存储在自己的范围内。这意味着您需要为每个循环运行执行一个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:03:41.197

这个问题并不是严格意义上的变量范围。匿名函数在触发点击事件时运行，*而不是*在您在循环中定义它时运行。考虑以下与您的示例在功能上相同的内容：

```
var items = ['foo', 'bar'];

for (var index in items) {
    var item = items[index];
    var selector = '.'+item+'-class';
    $(selector).bind( 'click', test );
}
​
function test() {
    console.log("selector: "+selector);
} 
```

这（希望）演示了正在发生的事情：函数中的全局变量`selector`在调用函数时在两种情况下都是相同的（“bar”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:07:57.627

```
var items = ['foo', 'bar'];
for (var index in items) {
    (function(i){  
    var item = items[i];
    var selector = '.'+item+'-class';
    $(selector).bind('click', function() {
            console.log("class: "+$(this).attr('class'));
            console.log("selector: "+selector);
            console.log("item: "+item);
        });
    })(index);
} 
```

[在这里拉小提琴。](http://jsfiddle.net/heera/tKFD2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T21:09:34.447

变量“选择器”和“项目”是对您存储值的位置的引用，当您单击其中一个 htl 元素时，这两个值的值是最后一个循环中的一个。

# java - 是否可能与 URLEncoder 发生名称冲突

> ID：10131651
> 
> 赞同：0
> 
> 时间：2012-04-12T20:52:56.460
> 
> 标签：java, urlencode

我正在使用 java 的 URLEncoder 获取用户提供的字符串并创建一个可安全用于文件名的字符串。我想知道两个不同的字符串有可能被编码为相同的值。

例如，如果一个字符串是“ABC%20D”，但由于 % 被用作替换特殊字符的字符，那么“ABC D”和“ABC%20D”之类的内容是否可能都以相同的编码值结束？或者编码器是否总是将 % 之类的字符替换为其他字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:55:43.010

似乎使用您的示例输入对转义字符进行编码：

```
String result = URLEncoder.encode("ABC%20D", "UTF-8");
System.out.println(result);  //prints ABC%2520D 
```

# javascript - chrome 扩展，popup.html 和 background.html 之间的消息传递

> ID：10131652
> 
> 赞同：1
> 
> 时间：2012-04-12T20:52:57.307
> 
> 标签：javascript, google-chrome, google-chrome-extension, message

我的 chrome 扩展有一个奇怪的问题。我希望我的弹出页面充满数据库内容。所以在 background.html 我创建了到数据库的连接。数据库答案应该显示在弹出窗口中，所以我决定使用 chrome.extension.sendRequest 方法。（希望这对其架构是一个好主意？）

这是设置：

`POPUP.js`：

```
chrome.extension.sendRequest({greeting: "hello"}, function(response) {
  alert("out"); console.log(response);

  if(response == null){
    alert("No response. :( and the error was "+chrome.extension.lastError.message);
  }
}); 
```

`Background.html`：

```
chrome.extension.onRequest.addListener(   function(request, sender, sendResponse) {
  alert("inside");
  sendResponse({farewell: "goodbye"});
}); 
```

会发生什么：我的`alert("inside")`火灾，所以我知道从弹出到后台的通信正常。但是现在不会有答案了！

也很有趣：在开发者工具模式下运行相同（检查弹出窗口）一切正常！

# javascript - 安全地进行 AJAX 调用（如果可能）

> ID：10131653
> 
> 赞同：1
> 
> 时间：2012-04-12T20:53:00.060
> 
> 标签：javascript, html, ajax, sharepoint

我有一个具有“喜欢”功能的应用程序。我希望人们能够喜欢一个没有回发的项目。

该应用程序有一个身份管理器 (SharePoint)，因此我可以将“喜欢”与喜欢它的用户相关联并避免重复。

问题是，什么会阻止某人编写一个超越身份并喜欢一个项目成为超级明星的脚本？

有没有办法使用 AJAX 进行类似调用，但在服务器端处理所有信息以避免安全漏洞？

# iframe - tinymce - 在 iframe 窗口中加载预览

> ID：10131654
> 
> 赞同：0
> 
> 时间：2012-04-12T20:53:31.690
> 
> 标签：iframe, tinymce

我一直在为我的新闻页面设置 tinymce - 我能够设计一个自定义预览页面。虽然我希望能更进一步...

如何设置 tinymce 以在 iframe 中加载预览窗口而不是弹出窗口？

我真的很想在同一个窗口中预览结果。

TinyMCE 配置：

```
tinyMCE.init({

    posttitle : "<?php echo $title;?>",

    // General options
    mode : "exact",
    elements: "message",
    theme : "advanced",
    plugins : "pagebreak,style,advhr,advimage,advlink,preview,searchreplace,paste,visualchars,nonbreaking,xhtmlxtras,imagemanager",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,copy,paste|,search,replace,|,blockquote,|,undo,redo,|,link,unlink,image,cleanup,code,|,preview,|,advhr,visualchars,nonbreaking,visualblocks",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : false,
    content_css : "custom_tinymce.css?v=1",
    plugin_preview_pageurl : "preview_tinymce.html",
    plugin_preview_width : "540",
    plugin_preview_height : "400",
    width: "100%",
    height: "200"
}); 
```

# nlp - 如何在 UIMA ConceptMapper 中使用其他类型

> ID：10131655
> 
> 赞同：1
> 
> 时间：2012-04-12T20:53:36.853
> 
> 标签：nlp, uima

我已经成功地将 UIMA ConceptMapper 与我构建的字典一起使用。我将 TokenAnnotation 参数设置为 uima.tt.TokenAnnotation 并将 SpanFeatureStructure 参数设置为 uima.tt.SentenceAnnotation （基于参考示例）。我相信这些类型来自 OpenNLP 解析器。但我也使用 medkatp 进行了另一个解析，并想使用它们的类型。到目前为止，我还没有弄清楚如何做到这一点。如果我更改这两个参数中的任何一个，整个事情都会失败，说它找不到类型。

我在网上搜索了几个小时，但没有找到使用除这两种类型之外的任何东西的 ConceptMapper 示例。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:45:50.953

> 我相信这些类型来自 OpenNLP 解析器。

这些类型在组件描述符中定义（通常在 desc 文件夹中），在标签下`<typeSystemDescription>`

> 但我也使用 medkatp 进行了另一个解析，并想使用它们的类型。

如果您想使用其他类型（来自其他 UIMA 组件或您自己的类型），您需要在使用它们的任何地方定义它们（意思是：在您需要它的每个组件描述符中，在 tag 下`<typeSystemDescription>`）。

# jquery - jQuery CDN | 通过 JSAPI 还是直接 CDN 加载？

> ID：10131658
> 
> 赞同：1
> 
> 时间：2012-04-12T20:53:52.100
> 
> 标签：jquery, google-api, jsapi

加载什么比较好？

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("jquery", "1.7.2");
</script> 
```

或者

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:01:14.620

好吧，第一个必须提出两个请求，而第二个则提出一个。这真的取决于你想要做什么，谷歌加载器提供了许多有用的选项：

从示例：

```
function loadMaps() {
  google.load("maps", "2", {"callback" : mapsLoaded});
} 
```

你可以指定一个回调，这取决于你想要完成的事情。

此外，请查看自动加载，它可以减少使用 Google API 所需的请求量：

```
 <script src="https://www.google.com/jsapi?autoload=%7B%22modules%22%3A%5B%7B%22name%22%3A%22search%22%2C%22version%22%3A%221.0%22%2C%22language%22%3A%22en%22%7D%2C%7B%22name%22%3A%22maps%22%2C%22version%22%3A%222.X%22%7D%2C%7B%22name%22%3A%22elements%22%2C%22version%22%3A%221.0%22%2C%22packages%22%3A%5B%22localsearch%22%5D%7D%5D%7D"></script> 
```

# ajax - 多个 xhr.get 与 dojo

> ID：10131660
> 
> 赞同：0
> 
> 时间：2012-04-12T20:53:54.790
> 
> 标签：ajax, dojo

如何使用 dojo 一个接一个地执行两个 xhr.gets ？

我有 ....

```
require(["dojo/_base/xhr", "dojo/dom", "dojo/domReady!"],
function(xhr, dom) {

    // Using xhr.get, as very little information is being sent
    xhr.get({
        // The URL of the request
        url: "inc/etl2json.php?item=Execs",
        // The success callback with result from server
        load: function(execContent) {
            dom.byId("Execs").innerHTML = execContent;
        },
        // The error handler
        error: function() {
            // Do nothing -- keep old content there
        }
    });

}); 
```

我想对*"inc/etl2json.php?item=Execs"*做另一个 xhr.get并将其分配给*dom.byId("Elapsed").innerHTML = elapsedContent;*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:38:56.963

尽管嵌套是一个简单的解决方案，但它几乎总是会导致代码不可读，所以我会像@Ricardo 那样做，但是利用 Dojo 的[Deferred](http://dojotoolkit.org/api/1.7/dojo/Deferred) (+ [here](http://livedocs.dojotoolkit.org/dojo/_base/Deferred) ) 的优势并使用链接：

```
var requestUrl = "inc/etl2json.php?item=Execs";

xhr.get({ url: requestUrl})
    .then(function(results) {
        dom.byId("execs").innerHTML = results;
    })
    .then(function(results) {
        return xhr.get({ url: requestUrl});   
    })
    .then(function(results) {
        dom.byId("elapsed").innerHTML = results;
    }) 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/73X88/](http://jsfiddle.net/phusick/73X88/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:00:35.263

只需在加载函数中再次调用 xhr.get() ，如果内容应该更改，否则您可以使用第一次检索到的相同数据：

```
xhr.get({
    load:function(data){
        //use the first data you retrieved
        xhr.get({
            load: function(data2){
             //do what you like with the nuew data
            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:37:31.520

*我认为您应该为elapsedContent*添加另一个`xhr`调用。我看不出这两个电话之间有任何关系，所以你应该把它们分开。没有必要将一个嵌套在另一个中。只需添加

 *```
xhr.get({
        // The URL of the request
        url: "inc/etl2json.php?item=Execs",
        // The success callback with result from server
        load: function(elapsedContent) {
            dom.byId("Elapsed").innerHTML = elapsedContent;
        },
        // The error handler
        error: function() {
            // Do nothing -- keep old content there
        }
    }); 
```*

# c# - 自动增加文件名

> ID：10131667
> 
> 赞同：7
> 
> 时间：2012-04-12T20:54:34.043
> 
> 标签：c#

现在我有这个代码：

```
int number = 0;
DirectoryInfo di = new DirectoryInfo(scpath + @"Screenshots\");

if (di.Exists) {

} else {
    di.Create();
}
int screenWidth = Screen.GetBounds(new Point(0, 0)).Width;
int screenHeight = Screen.GetBounds(new Point(0, 0)).Height;
Bitmap bmpScreenShot = new Bitmap(screenWidth, screenHeight);
Graphics gfx = Graphics.FromImage((Image)bmpScreenShot);
gfx.CopyFromScreen(0, 0, 0, 0, new Size(screenWidth, screenHeight));
bmpScreenShot.Save(di + "Screenshot_" + number, ImageFormat.Jpeg); 
```

程序截取屏幕截图（有效）并保存。我想要做的是让程序检查并查看屏幕截图是否存在（“Screenshot_*”），如果不存在则创建它。如果是这样，请递增文件名，直到它达到“屏幕截图_”末尾未使用的数字。鉴于文件和递增更多，不确定如何处理。我正在考虑一个 for 循环，但我现在正在玩它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T21:02:22.370

获取不存在的文件的名称听起来像是一种方法的工作。

```
string IndexedFilename(string stub, string extension) 
{
    int ix = 0;
    string filename = null;
    do {
        ix++;
        filename = String.Format("{0}{1}.{2}", stub, ix, extension);
    } while (File.Exists(filename));
    return filename;
} 
```

如果您从多个线程调用它，*则会出现竞争条件。*假设您只有一个应用程序和应用程序中的一个线程要求文件名，那么这应该可以工作。

使用该方法的代码如下所示：

```
string di = Path.Combine(scpath, "Screenshots");
if (!Directory.Exists(di) { 
    Directory.Create(di); 
} 
int screenWidth = Screen.GetBounds(new Point(0, 0)).Width; 
int screenHeight = Screen.GetBounds(new Point(0, 0)).Height; 
Bitmap bmpScreenShot = new Bitmap(screenWidth, screenHeight); 
Graphics gfx = Graphics.FromImage((Image)bmpScreenShot); 
gfx.CopyFromScreen(0, 0, 0, 0, new Size(screenWidth, screenHeight));
string filename = IndexedFilename(Path.Combine(di,"Shot_"),"jpg");
bmpScreenShot.Save(filename, ImageFormat.Jpeg); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T21:03:28.210

就像@Quintin 所说，使用 datetime 作为文件名：

```
string filename = Path.Combine(
    di.FullName,
    String.Format("{0}.jpg", DateTime.Now.ToString("yyyy-MM-dd HH.mm.ss")));
bmpScreenShot.Save(filename, ImageFormat.Jpeg); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T21:06:08.020

这是一种可能

```
string[] files = System.IO.Directory.GetFiles(scpath, "Screenshot_*.jpg");
string baseName = Path.Combine(scpath, "Screenshot_");
string filename;
int i = 0;
do {
    filename = baseName + ++i + ".jpg";
} while (files.Contains(filename)); 
```

这种方法的优点是文件系统只被查询一次。如果文件号变大，请考虑将文件名添加到哈希集中以进一步加快检查速度：

```
var files = new HashSet<string>(Directory.GetFiles(scpath, "Screenshot_*.jpg")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T21:07:16.710

我会使用 GUID ...

```
try{
    bmpScreenShot.Save(di + "Screenshot_" + Guid.NewGuid().ToString(), ImageFormat.Jpeg);
}catch(Exception e)
{ 
    //handle the problems here, for example if file already exists, try again
} 
```

在您用完唯一的 GUID 之前，这应该可以正常工作......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T21:02:39.737

不要使用数字来区分屏幕截图，而是使用时间戳：

```
string currentDT = string.Format("{0:D4}.{1:D2}.{2:D2}-{3:D2}.{4:D2}.{5:D2}",
                   DateTime.Today.Year, DateTime.Today.Month, DateTime.Today.Day,
                   DateTime.Now.Hour, DateTime.Now.Minute, DateTime.Now.Second)
bmpScreenShot.Save(di + "Screenshot_" + currentDT, ImageFormat.Jpeg); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T21:18:05.970

```
public static string MakeUniqueFileName(string file)
{
    string dir = Path.GetDirectoryName(file);
    string fn;

    for (int i = 0; ; ++i)
    {
        fn = Path.Combine(dir, string.Format(file, i));

        if (!File.Exists(fn))
            return fn;
    }
} 
```

像这样使用它：

```
string file = scpath + @"Screenshots\" + "Screenshot_{0}.png";
bmpScreenShot.Save(MakeUniqueFileName(file), ImageFormat.Jpeg); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-09T19:10:04.920

这将创建 output_0.jpg output_1.jpg ... output_n.jpg：

```
int filecount = 0;
string path = Environment.CurrentDirectory;
for (int i = 0; File.Exists(path + @"\output_" + i + ".jpg"); i++)
{
    filecount = i + 1;
}
File.Create(path + @"\output_" + filecount + ".jpg"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-19T21:38:30.097

```
private static string GetUniqueFile(string path, string file, string ext)
{
    int filecount = 0;
    int i = 0;
    for (i = 0; File.Exists(path + "\\" + file + "_" + i + "." + ext); i++)
    {
        filecount = i + 1;
    }

    return path + "\\" + file + "_" + i.ToString() + "." + ext;
} 
```

# java - 有什么方法可以延迟流程执行？

> ID：10131677
> 
> 赞同：0
> 
> 时间：2012-04-12T20:55:15.773
> 
> 标签：java, groovy

我正在使用 Groovy 编写一个包装器脚本（但问题实际上是一个 Java 问题），并且想知道是否可以在不让它先运行的情况下创建一个进程。问题是进程开始运行并在 stdout 和 stderr 上生成输出。我想将它们转发到适当的目的地，同时创建一个合并流以在脚本中进行处理。然而，我遇到的问题是 Process 生成输出太快，前两行的输出有点乱码。我想在进程开始运行之前设置流。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:16:07.760

这会将输出和错误流消耗到两个单独的 StringWriter 中，但我没有看到任何“乱码”

```
new StringWriter().with { out ->
  new StringWriter().with { err ->
    'ls /tmp'.execute().with { proc ->
      consumeProcessOutput( out, err )
      waitFor()
    }
    println "OUT: $out"
    println "ERR: $err"
  }
} 
```

# string - 调用字符串值来创建元标记？

> ID：10131680
> 
> 赞同：0
> 
> 时间：2012-04-12T20:55:34.523
> 
> 标签：string, echo, meta-tags, whmcs

我需要为我的网站的 seo 创建元标记。我正在使用 WHMCS 和自定义模板

任何页面都是通过header.tpl、footer.php page1.tpl和page1.php页面编译的

我尝试将 "> 添加到 header.tpl 中，这确实将代码行添加到“输出源”中，并且我添加了 $pgDesc = 'Any custom description'; 到 page1.php

不知何故， echo $pgDesc 不正确地调用该值

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:14:35.150

只需将您的元标记添加到 header.tpl。就这样。您可以从各种来源获取标题/说明/关键字字符串：whmcs 变量、翻译字符串，甚至一些数据库。

请参阅[http://docs.whmcs.com/Seo](http://docs.whmcs.com/Seo)

# ruby-on-rails-3 - 获取响应代码 = 406。响应消息 = 解析 JSON 时出现不可接受的错误

> ID：10131686
> 
> 赞同：0
> 
> 时间：2012-04-12T20:55:53.527
> 
> 标签：ruby-on-rails-3, json

我已经使用 ActiveResource 构建了一个由另一个（Rails 也是）调用的 Rails 应用程序。

情况是我将第一个应用程序中的信息公开为 JSON，如下所示：

应用 1：

```
class PromotionsController < ApplicationController

  # GET /promotions
  # GET /promotions.xml
  def index
    @promotions = Promotion.all

    respond_to do |format|
      format.json  { render :json => @promotions }
    end
  end
end 
```

我通过 ActiveResource 模型在 App 2 上收到它，如下所示：

```
class Promotion < ActiveResource::Base
  self.site = "app_1_url"
  self.element_name = "promotion"
end 
```

当我想以 JSON 格式读取数据时，执行以下操作，我收到 406 Not Acceptable 错误消息：

```
class PromotionsController < ApplicationController
  # GET /promotions
  # GET /promotions.xml
  def index
    @promotions = Promotion.all

    respond_to do |format|
      format.json { render :json => @promotions }
    end
  end
end 
```

但是，当我尝试将信息解析为 XML 时（与上面显示的代码相同，除了将“json”更改为“xml”）它可以工作。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T14:36:06.053

您必须将接收数据的应用程序的格式更改为 JSON（应用程序 2）

```
class Promotion < ActiveResource::Base
  #your code
  self.format = :json #XML is default
end 
```

这就是我如何解决这个问题（对于任何最终来到这里的谷歌员工）

## 步骤 1：研究错误代码

**[Per Wikipedia](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)** :
**406 Not Acceptable**
请求的资源只能根据请求中发送的 Accept 标头生成不可接受的内容。
（基本上，您收到的数据与您想要的语言不同）

* * *

## 第 2 步：诊断问题

因为 400 级错误代码是客户端错误代码，所以我确定该错误一定与应用 2 相关（在这种情况下，应用 2 是客户端向应用 1 请求数据）。我看到您在应用程序 1 中对 JSON 进行了一些格式化，并在应用程序 2 中查找了类似的代码但没有看到，所以我认为错误是因为应用程序 2 的**[Content-Type](http://www.w3.org/Protocols/rfc1341/4_Content-Type.html)**标头与应用程序 1 不同。内容-Type 基本上告诉应用程序/浏览器在发送/接收数据时各自使用什么语言。您存储在 Content-Type 中的值是**[MIME 类型](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)**，其中有很多。

您说 XML 类型有效但 JSON 无效，因此我检查了 rails **[ActiveResource API](http://api.rubyonrails.org/v2.3.8/classes/ActiveResource/Base.html#M001249)**（在 App 2 中使用）寻找一些标头或内容类型方法，并看到了`format`与您在 Action Controller 中使用的方法和属性相匹配的方法和属性对于 App 1。我还看到，`format`如果未提供，则默认为 XML。

```
#Returns the current format, default is ActiveResource::Formats::XmlFormat.
def format
   read_inheritable_attribute(:format) || ActiveResource::Formats[:xml]
end 
```

* * *

## 第3步：修复thangz

将此行添加到应用程序 2 中的类：

```
self.format = :json 
```

我相信您也可以使用 headers 方法调整 Content-Type 标头，但 API 没有显示如何执行此操作的示例代码。使用 headers 方法调整 Content-Type 只是一种“更难”的方法，并且因为调整 Content-Type 是`format`为了简化流程而创建的常见轨道。我看到 API 有[一个调整类的格式属性的示例，该类可以方便地使用 json](http://api.rubyonrails.org/v2.3.8/classes/ActiveResource/Base.html#M001248)并读取`format`方法/属性“设置`format`从 mime 类型引用发送和接收的属性”又名设置 Content-Type HTTP标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T01:03:21.253

除了 CoryDanielson 的回答。

即使我的应用程序使用 :xml 格式（这是 Cory 指出的默认设置），我仍然必须包含

```
self.format = :xml 
```

为了修复406错误。

# javascript - 如何创建和缓存尚不存在的 DOM 元素？

> ID：10131690
> 
> 赞同：0
> 
> 时间：2012-04-12T20:56:13.003
> 
> 标签：javascript, jquery, assert

我正在写一个断言函数。如果#assert 尚不存在，如何缓存它？

```
function assert( outcome, description ) {
   if (!$('#assert').length) {
      $('body').append('<ul id="assert"></ul>');
   }
   $('#assert').append('<li class="' + (outcome ? 'hide' : 'alert-danger') + '">' + description + '</li>');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:58:46.013

```
$assert = $('<ul id="assert"></ul>');
$('body').append($assert); 
```

请注意，我没有`$assert`使用`var`关键字声明，因此赋予它全局范围（以防您在其他地方想要它）。如果您只需要将其限定为您的断言函数，请使用`var`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:58:38.353

你的意思是这样的？

```
 div = $("<div>").attr("id", "assert") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:01:34.850

我会这样做...

```
function assert( outcome, description ) {
    var assrt = $('#assert');
    if (!assrt || !assrt.length) {
        assrt = $('<ul>',{id:"assert"}).appendTo('body');
    }
    assrt.append('<li>', {className:outcome ? 'hide' : 'alert-danger', text:description});
} 
```

* * *

或者，如果该`assert`元素打算供后续调用使用，我可能会使用闭包来维护调用之间的引用......

```
var assert = (function() {
    var assrt = $('#assert');

    return function( outcome, description )
        if (!assrt || !assrt.length) {
            assrt = $('<ul>',{id:"assert"}).appendTo('body');
        }
        assrt.append('<li>', {className:outcome ? 'hide' : 'alert-danger', text:description});
    };
}()); 
```

* * *

您可以通过返回几个函数来扩展它...

```
var assert = (function() {
    var assrt = $('#assert');

    function verify_assert_container() {
        if (!assrt || !assrt.length) {
            assrt = $('<ul>',{id:"assert"}).appendTo('body');
        }
    }

    return {
        add: function( outcome, description )
            verify_assert_container();
            assrt.append('<li>', {className:outcome ? 'hide' : 'alert-danger', text:description});
        },
        empty: function() {
            verify_assert_container();
            assrt.empty();
        },
        sort: function() {
            verify_assert_container();
            // use sorting algorithm to reorder the LI elements
        },
        destroy: function() {
            if (assrt) {
                assrt.remove();
                assrt = null;
            }
        }
    };
}()); 
```

并像这样使用它...

```
assert.add('foo', 'bar');
assert.empty();
assert.destroy(); 
```

# xml - AS3 + XML + 鼠标事件

> ID：10131692
> 
> 赞同：0
> 
> 时间：2012-04-12T20:56:20.727
> 
> 标签：xml, actionscript-3, actionscript, flash-cs5

我想创建一个使用 XML 加载一些数据的 flash 电影。当用户点击屏幕时，我希望每一行数据一个接一个地出现。到目前为止，我已将所有数据添加到屏幕上，但我不确定如何为此编写点击机制。

我尝试添加一个允许我单击以删除和对象的功能，如下所示：

```
muppet_name0.addEventListener(MouseEvent.CLICK, fl_ClickToKermit);

function fl_ClickToKermit(event:MouseEvent):void
{
   muppet_name0.visible = false;
} 
```

但我不确定如何让它重新出现。如何添加将删除对象同时添加新对象的 MouseClick 事件？

我的文档类如下

```
package  {

import flash.display.MovieClip;
import flash.text.TextField;
    import flash.events.MouseEvent; 

public class MuppetsDoc extends MovieClip {

    public var myData:XML = <data>
        <item>
            <a>Kermit the Frog</a>
            <b>Jim Henson</b>
            <c>1955</c>
        </item>
        <item>
            <a>Miss Piggy</a>
            <b>Frank Oz</b>
            <c>1974</c>
        </item>
        <item>
            <a>Animal</a>
            <b>Frank Oz</b>
            <c>1975</c>
        </item>

        <item>
            <a>The Swedish Chef</a>
            <b>Jim Henson/Frank Oz</b>
            <c>1975</c>
        </item>

    </data>;

    public function MuppetsDoc() {

        // constructor code
        //trace(myData);
        //muppets_txt.text = myData.item[2].a.length();
        var aTxt:String = myData.item[2].a.text();
        muppet_name0.appendText(myData.item[0].a.text());

        muppet_puppet0.appendText(myData.item[0].b.text());

        muppet_year0.appendText(myData.item[0].c.text());

        muppet_name1.appendText(myData.item[1].a.text());

        muppet_puppet1.appendText(myData.item[1].b.text());

        muppet_year1.appendText(myData.item[1].c.text());

        muppet_name2.appendText(myData.item[2].a.text());

        muppet_puppet2.appendText(myData.item[2].b.text());

        muppet_year2.appendText(myData.item[2].c.text());

        muppet_name3.appendText(myData.item[3].a.text());

        muppet_puppet3.appendText(myData.item[3].b.text());

        muppet_year3.appendText(myData.item[3].c.text());

    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:08:27.490

我不太确定您要做什么，但我认为您正在寻找的东西是这样的：

```
function fl_ClickToKermit(event:MouseEvent):void
{
   muppet_name0.alpha = (muppet_name0.alpha == 0) : 1 ? 0;
} 
```

每次单击时，您都会反转其`alpha`值。当您使用时`visible`，`DisplayObject`它会被禁用，因此无法单击。通过使用`alpha`您的`DisplayObject`保持启用，但不再可见。

查看文档以获取更多信息：

[`DisplayObject.visible`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#visible) [`DisplayObject.alpha`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#alpha)

# c# - 如何在 Windows Phone 7 的应用程序中获取 youtube 视频的缩略图

> ID：10131693
> 
> 赞同：5
> 
> 时间：2012-04-12T20:56:22.013
> 
> 标签：c#, windows-phone-7, youtube

我的应用程序在 youtube 上为用户返回了一些链接视频。但我不知道如何获取视频的缩略图。当用户点击缩略图时，它会调用 WebBrowserTask 来显示这个链接。你能帮我解决它吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T21:11:34.910

您可以使用[GDATA](http://code.google.com/apis/gdata/)获取有关 youtube 视频的信息

如果你想半途而废，缩略图的 URI 将是：

[http://img.youtube.com/vi/](http://img.youtube.com/vi/) {0}/0.jpg

其中 {0} 是视频的 ID。

# ruby-on-rails - 如何使用 Factory girl 创建管理员角色？

> ID：10131694
> 
> 赞同：4
> 
> 时间：2012-04-12T20:56:22.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, factory-bot

好的，所以我想测试需要管理员用户的功能，我正在尝试以管理员身份登录，但为了做到这一点，我需要有管理员用户

这是我的代码

```
 let(:user) { FactoryGirl.create(:user) }
  let(:admin_role) { FactoryGirl.create(:role) }

FactoryGirl.define do
  factory :user do
    first_name "John"
    last_name  "Doe"
    email  "john@doe.com"
  end

  factory :role do
    name "Admin"
  end
end 
```

我如何连接它们我试过 `user.roles << user_role`但得到了这个错误

```
/Users/matt/Sites/application/spec/controllers/directory_controller_spec.rb:16:in `block (3 levels) in <top (required)>': undefined local variable or method `user' for #<Class:0x007fa550890d80> (NameError) 
```

这是我的模型

```
class User < ActiveRecord::Base
    has_many :roles, :through => :role_users
    has_many :role_users
    ...

class Role < ActiveRecord::Base
    has_many :users, :through => :role_users
    has_many :role_users
    ...

class RoleUser < ActiveRecord::Base
    belongs_to :role
    belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T21:05:39.660

`spec/factories/user.rb`

```
FactoryGirl.define do
  factory :user do
    first_name "John"
    last_name  "Doe"
    email "john@doe.com"
  end

  factory :admin_user, :parent => :user do
    roles { [ FactoryGirl.create(:admin_role) ] }
  end

  factory :role do
    name { "Role_#{rand(9999)}" }
  end

  factory :admin_role, :parent => :role do
    name "Admin"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:56:51.213

我遇到了完全相同的问题，代码如下：

```
describe "..." do
  let(:user) { create :user }
  let(:manager) { create :manager_role }
  user.roles << manager

  it "should ...." do
    # etc.
  end

end

# run rspec...
# => `block (2 levels) in <top (required)>': undefined local variable or method `user' for #<Class:0x000001016a2dc0> (NameError) 
```

当我将`user.roles << manager`代码移动到一个`before(:each)`块中时，错误消失了。因此，类似：

```
describe "..." do
  let(:user) { create :user }
  let(:manager) { create :manager_role }

  before(:each) do
    user.roles << manager
  end

  it "should ...." do
    # etc.
  end

end 
```

`role <-> user`这省去了必须在工厂中指定关联的痛苦。

我对 rspec 和 factory_girl 的工作方式不够熟悉，无法理解为什么不能`user.roles << role`在 call 之后立即拥有代码`let(:user) { create :user }`，但是将其放入`before(:each)`块或单个`it "should ... " do`块中应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:39:32.560

解决了

```
Factory.sequence(:email) {|n| "person#{n}@example.com" }

Factory.define :role do |r|
  r.name {"Admin"}
end

Factory.define :role_user do |ru|
  ru.association(:role)
  ru.association(:user)
end

Factory.define :user do |u|
  u.first_name {"matt"}
  u.last_name {"jones"}
  u.email {Factory.next(:email)}
end 
```

并像使用它一样

```
 let(:role_user) { FactoryGirl.create(:role_user)  }
  before { sign_in(role_user) } 
```

# tinymce - TinyMCE 配置第三行

> ID：10131702
> 
> 赞同：2
> 
> 时间：2012-04-12T20:56:57.263
> 
> 标签：tinymce, wysiwyg, html-editor

在[TinyMCE WYSIWYG 编辑器](http://www.tinymce.com/)中，第三行包含图标，例如`Insert horizontal ruler, Remove formatting, Subscript, Superscript, etc`. 这些图标似乎默认带有编辑器，因为似乎无法更改它们。.

[TinyMCE... http://img821.imageshack.us/img821/6431/tinymce.png](http://img821.imageshack.us/img821/6431/tinymce.png)

我希望能够选择要显示的那个，例如，假设我只想要下标和上标图标（而不是其他图标）

有人知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:26:14.050

您可以通过使用 TinyMCE 的 theme_advanced_buttons 选项来做到这一点:)

这是 TinyMCE 文档的链接：

[按钮主题](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_buttons_1_n)

我碰巧有一个使用 TinyMCE 的 jQuery 插件的示例，但您也可以使用“stock”tinyMCE 来实现：

```
$('#bio').tinymce({
    script_url : '/js/tiny_mce/tiny_mce.js',
    theme : 'advanced',
    theme_advanced_buttons1: 'bold,italic,underline,|,undo,redo,|,bullist,numlist',
    theme_advanced_buttons2: '',
    theme_advanced_buttons3: '',
    theme_advanced_buttons4: '',
    theme_advanced_toolbar_location: 'bottom',
    theme_advanced_toolbar_align: 'center',
}); 
```

在这种特殊情况下，我实际上禁用了其他工具栏——但你可以放任何你想要的东西。它理解的按钮记录在这里：

[TinyMCE 按钮文档](http://www.tinymce.com/wiki.php/Buttons/controls)

# nhibernate - FluentNHibernate - 如何将 KeyProperty 与 db 生成的值映射？

> ID：10131705
> 
> 赞同：0
> 
> 时间：2012-04-12T20:57:02.123
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有这个映射：

```
 public sealed class AcessoMap : ClassMap<Acesso>
{
    public AcessoMap()
    {
        CompositeId()
            .KeyReference(x => x.Associado)
            .KeyProperty(x => x.DataHora, k => k.ColumnName("aceDtHor").Type("Timestamp"));

        Map(x => x.IP, "aceEndIP");
        Map(x => x.NumeroAcesso).Not.Nullable().Generated.Insert();
        Map(x => x.DataAcessoAnterior).Not.Nullable().Generated.Insert();
        Map(x => x.ServerVariables).LazyLoad().Generated.Insert();
    }
} 
```

如何将其配置为 DataHora 属性使用数据库生成的值？（当前它在 db 上有默认值，将其设置为当前时间戳）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:38:57.817

我不知道这是否会奏效，但这是可以尝试的。在 CompositeId 定义之外定期映射您的时间戳列。

```
Map(x=>x.RecordVersion).Column("aceDtHor")
                       .CustomSqlType( "timestamp" )
                       .Not.Nullable()
                       .CustomType( "BinaryBlob" )
                       .Generated.Always(); 
```

# settings - Resharper - 如何关闭“私人”访问修饰符？

> ID：10131707
> 
> 赞同：7
> 
> 时间：2012-04-12T20:57:03.593
> 
> 标签：settings, resharper

我不喜欢在我的访问修饰符之前放置“私人”。无论如何，它们默认情况下都是私有的，这只是视觉上的混乱。

如何关闭 resharper 不断用“私人”标记所有内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-29T13:45:47.733

**ReSharper 9.1**

ReSharper -> 选项 -> 代码编辑 -> C# -> 代码样式 -> 修饰符 -> 使用显式私有修饰符（取消选中）

[![在此处输入图像描述](../Images/b3a1913107f7e1ab17a4181456b9f421.png)](https://i.stack.imgur.com/FsDcp.png)

**ReSharper 2016.1 ReSharper -> 选项 -> 代码编辑 -> C# -> 代码样式 -> 修饰符 ->

[![在此处输入图像描述](../Images/9b2018cf68c0e1634ddc9c70d61b834b.png)](https://i.stack.imgur.com/P6hj0.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T21:08:11.127

在 ReSharper 选项菜单中，转到代码编辑 -> C# -> 格式化样式 -> 其他并禁用显式私有修饰符。

![在此处输入图像描述](../Images/14b168485f906c74382e1478e8e323d7.png)

# c# - 将 String[] 转换为对象再转换回 String[]？

> ID：10131709
> 
> 赞同：0
> 
> 时间：2012-04-12T20:57:28.223
> 
> 标签：c#, object, casting, split, boxing

我以这种方式将连接的字符串放入组件的 Tag 属性中：

```
Tag = String.Format("{0};{1};{2}", AThis, AThat, ATheOtherThing); 
```

现在我该如何把它弄出来，因为 Tag 是一个对象？尝试这样做：

```
String[] someStuff = Tag.Split(';'); 
```

我明白了，“ *‘object’不包含‘Split’的定义，并且找不到接受‘object’类型的第一个参数的扩展方法‘Split’*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T20:58:19.770

的类型`Tag`是，`object`但`Split`方法是 on `String`。您需要转换`Tag`回`String`才能调用`Split`

```
string[] someStuff = ((string)Tag).Split(';'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:04:58.037

由于对象可以转换为任何其他数据类型，您可以完全跳过 string.Format()，并分配一个 string[]

```
Tag = new string[] { AThis, AThat, ATheOtherThing }; 
```

和

```
string[] someStuff = (string[])Tag; 
```

如果 AThis、AThat、ATheOtherThing 是不同的数据类型，则使用 object[]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:20:01.770

除非你有一些驱动需要它作为一个字符串，否则另一种方式是一个保存你的三个值的结构，然后只需将标签设置为它，然后将它重新转换为它。然后不再进行格式化和拆分。更重要的是，如果您添加第四项，重构结构，工作就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T21:23:43.737

一种安全的转换方式`Tag`是`string`使用`as`关键字。如果`Tag`包含除 a 以外的其他内容，`string`它不会抛出异常而是返回`null`

```
string s = Tag as string;
string[] someStuff = null;
if (s != null) {
    someStuff = s.Split(';');
} 
```

# glsl - 如何在GLSL的片段着色器中获取片段的第一个顶点法线

> ID：10131710
> 
> 赞同：0
> 
> 时间：2012-04-12T20:57:31.063
> 
> 标签：glsl

我知道我可以从 gl_Normal 在顶点着色器中获得顶点法线。

现在我想将片段的颜色设置为其第一个顶点的顶点法线。请问我该怎么做？我怎么知道片段有多少个顶点，片段着色器中每个顶点的位置和法线是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:16:07.447

你问的不太可能，但你可能能够足够接近。

您无法从图元的“第一个顶点”获得法线。您可以做的是将顶点着色器中的法线作为变量传递给片段着色器，但随后每个片段将获得从多边形的每个顶点插值的法线。

您不能从片段着色器访问顶点的特定属性，只能访问插值。

==编辑==

看起来我在某些情况下可能不正确，请参阅下面的评论。

# svn - 处理svn分支上的word文档——如何合并或避免合并

> ID：10131711
> 
> 赞同：0
> 
> 时间：2012-04-12T20:57:32.970
> 
> 标签：svn, ms-word

我们的项目有这样的结构：

```
Project
    src
        ...
    Documentation
        documentA.doc
        documentB.doc
    ... 
```

svn 树如下所示：

```
Project
    BRANCHES
        New Feature Branch 1
            src
                ...
            Documentation
                documentA.doc
                documentB.doc
            ... 
        New Feature Branch 2
            src
                ...
            Documentation
                documentA.doc
                documentB.doc
            ... 
    TRUNK
        Project
            src
                ...
            Documentation
                documentA.doc
                documentB.doc
            ... 
```

在分支上处理功能效果很好。代码只是文本，所以合并是可以的。

合并 word 文件不起作用。

有没有办法强制 .doc 文件或`Documentation`文件夹不在分支上编辑？理想情况下，我宁愿只使用乳胶（易于合并，而且您不必处理单词），但我的组织不会改用乳胶。处理此问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:23:34.850

就像一个想法：是否可以只分支功能分支的源路径（如果您的其他文件夹结构允许）？这样至少你不会在分支中拥有文档......

此外：我还尝试将源代码控制 Word 文档作为 .rtf（因为这不是二进制格式） - 也不起作用。Word 只是在这些文件中写入了太多东西......

# css - 使底部边框更接近文本

> ID：10131713
> 
> 赞同：23
> 
> 时间：2012-04-12T20:57:35.013
> 
> 标签：css, border, margin

我想强调我的导航菜单，但问题是我需要它更厚，所以我使用底部边框，以便我可以将宽度设置为 6px。

我似乎可以弄清楚如何让边框看起来更接近文本。目前，文本和底部边框之间似乎有大约 10 像素的间隙，我不想有任何间隙。

我试图用 {bottom: 10px} 定位另一个 div 并相对于每个 {li} 定位它，但我似乎无法让它工作。

这就是我所拥有的

代码

```
 <div id="menu">
    <ul>
        <li><a href="#home">home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</div> 
```

CSS

```
#menu {
position: fixed;
left: 25%;
clear: both;
float: left;
font-size: 80px;
z-index: 500;
filter: alpha(opacity=75);
opacity: .75;
}

#menu ul{
text-decoration: none;
list-style-type: none;
margin: 0;
padding: 0;
line-height: 90px;
}

#menu ul li{
text-decoration: none;
list-style-type: none;
margin: 0;
}

#menu ul li a{
border-bottom: 6px solid #000;
text-decoration: none;
list-style-type: none;
color: #000;
}

#menu ul li a:hover{
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T21:13:50.730

您可以使用`line-height`和的混合`margin`来获得这样的效果，如下所示：

```
#menu ul li a {
    border-bottom: 6px solid #000000;
    color: #000000;
    display: block;
    line-height: 50px;
    list-style-type: none;
    margin: 20px 0;
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-14T22:28:12.870

`display: inline-block;`如果较长的链接包含换行符，与 with 结合使用可能`border-bottom`会导致一些奇怪的行为换行符，请参阅[http://jsfiddle.net/PQZ9H/](http://jsfiddle.net/PQZ9H/)。或者，您可以使用 和 的组合，`background-image`其`background-position`优点是不触摸显示值。

```
a {
    text-decoration: none;
    position: relative;
    background-repeat: repeat-x;
    background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAAAAAAALAAAAAABAAEAAAICTAEAOw==);
    background-position: left 15px;
}
a:hover { background: none; } 
```

一个缺点是您可能必须为您使用的每个字体大小定义一个背景位置。

使用这种技术，您还可以从像 g 或 y 添加的下降器中删除边框

```
a span.descender { text-shadow: -1px 0px 0px white, 1px 0px 0px white, -2px 0px 0px white, 2px 0px 0px white, -3px 0px 0px white, 3px 0px 0px white; } 
```

和

```
<a href="javascript:void(0)"><span class="descender">A link with descenders like g or y</span></a> 
```

见[http://jsfiddle.net/25XNY/1](http://jsfiddle.net/25XNY/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:19:21.987

试试[这个](http://translate.google.com/translate?sl=ru&tl=en&js=n&prev=_t&hl=ru&ie=UTF-8&eotf=1&u=http://artgorbunov.ru/bb/soviet/20120510/&act=url)（原产俄罗斯[http://artgorbunov.ru/bb/soviet/20120510/](http://artgorbunov.ru/bb/soviet/20120510/)）文章方法（背景渐变和[http://jsfiddle.net/d3WG6/](http://jsfiddle.net/d3WG6/)）

```
<p>Зигварт считал <a><span>критерием истинности необходимость и&nbsp;общезначимость, для&nbsp;которых нет никакой опоры</span></a> в&nbsp;объективном мире.</p>

a { font-size: 50%; border-bottom: 1px dashed red; }
a > span { font-size: 200%; line-height: normal; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T18:05:26.403

边距属性不能改变边框底部的位置，所以

**元素的高度**将`<a>`定义边框底部的位置。

```
 #menu > ul > li > a {
      height: ;
 } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-13T12:20:37.977

与原始问题有类似的问题。它在这里得到了回答：[https ://stackoverflow.com/questions/18180490/move-border-bottom-closer-to-text](https://stackoverflow.com/questions/18180490/move-border-bottom-closer-to-text)

上面的解决方案可能会帮助那些无法为他们解决这个问题的人。

# html - 如何提高不需要登录的在线表单的安全性？

> ID：10131715
> 
> 赞同：2
> 
> 时间：2012-04-12T20:57:36.753
> 
> 标签：html, forms, security

我有一个在线表格，由我们的合同部门发送给我们的供应商。此表格允许我们的供应商更新其公司信息和产品价格。

我们不想强迫他们使用登录名，因为我们不想为我们所有的供应商创建一个帐户，这是他们每年都会做一次的事情，所以他们很可能会忘记他们的凭据。

这个在线表格会显示一些敏感信息，因为它会显示当前的“经纪人”价格。

我正在考虑创建一个唯一的 URL，该 URL 将通过电子邮件发送给他们。但我必须确保

*   只有预期的收件人才能阅读和更新表格

*   降低 URL 伪造的风险，这将允许某人通过猜测其他唯一 URL 来打开一堆表单。

此 URL 将通过电子邮件发送，我们希望供应商单击并编辑表格。在电子邮件中，我将包含一个数字密码，在发布更新信息时必须使用该密码，并且每个 URL 都会有一个过期时间。

生成此类唯一 URL 的最佳实践是什么？可以使用哪些步骤来提高安全性以防止上述风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:00:28.960

为每个喜欢的客户生成一个随机字符串，`GJAOEJGOMASDIG2351DSFGSD`并将其放在 URL 中的某个位置。当他们访问 URL 时 - 确保随机字符串与公司的随机字符串匹配......？

`http://www.domain.com/form.php?customerId=255&rand=GJAOEJGOMASDIG2351DSFGSD`

```
$sql = "Select * from customers where id=".$custId." and randomHash='".$randString."'"; 
```

这样，查看者需要知道客户的 ID 及其匹配的随机字符串。如果其中一个不匹配，则拒绝访问。

确保对 SQL 注入采取预防措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:01:25.603

最明显的答案是：

向 URL 添加一个带有随机数、大数的参数（在数据库中存储已分配的编号以及分配给哪个电子邮件）

当用户单击 URL 时，他必须在表单中输入正确的电子邮件。

# java - 我在 Sqlite 中得到一个错误的日期

> ID：10131721
> 
> 赞同：0
> 
> 时间：2012-04-12T20:57:52.280
> 
> 标签：java, android, sqlite, date

我保存了一个日期，这是 1698-19-20 而不是 2012-4-12。这里有人看到错误了吗？保存为整数的日期。

用计算器计算：1334262386066 毫秒

42.309182713914 年 + 1970 年 = ~2012

代码：

```
Calendar cal = Calendar.getInstance();
Date date = cal.getTime();
calendarEntity.setDate(date); 
```

sqlite查询：

```
SELECT strftime('%Y-%m-%d',DATE) FROM CALENDAR_ENTITY 
```

桌子：

```
 CREATE TABLE 'CALENDAR_ENTITY' ('_id' INTEGER PRIMARY KEY ,'TITLE' TEXT,'NOTICE'        TEXT,'DATE' INTEGER,'BABY_ID' INTEGER NOT NULL ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:17:54.557

如果您可以像这样长时间使用此返回，我认为您的问题将自行解决。

```
Date date = new Date(1334262386066l); 
```

这将返回您所期望的。这就是它打印的内容

```
2012 年 4 月 12 日星期四 23:26:26 EEST
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:47:26.177

问题是该`strftime`函数期望日期为`text`以下格式之一：

```
YYYY-MM-DD
YYYY-MM-DD HH:MM
YYYY-MM-DD HH:MM:SS
YYYY-MM-DD HH:MM:SS.SSS
YYYY-MM-DDTHH:MM
YYYY-MM-DDTHH:MM:SS
YYYY-MM-DDTHH:MM:SS.SSS
HH:MM
HH:MM:SS
HH:MM:SS.SSS
now
DDDD.DDDD 
```

您将日期存储为`integer`功能`strftime`无法处理的日期。有关 SQLite 日期时间函数的更多详细信息，请[点击此处](http://www.sqlite.org/cvstrac/wiki?p=DateAndTimeFunctions)（或[此处](http://catalogue.pearsoned.co.uk/samplechapter/067232685X.pdf)，第 80 页）。

# mocking - 模拟集成测试

> ID：10131723
> 
> 赞同：42
> 
> 时间：2012-04-12T20:58:10.720
> 
> 标签：mocking, integration-testing, mockito

如何模拟集成测试所需的许多依赖项？

我使用 Mockito 进行“纯”单元测试。在这种情况下，“纯”意味着测试单个类，模拟它的所有依赖项。美丽的。

现在来集成测试。假设在这种情况下，集成测试将测试如下内容：

1.  消息被放入队列
2.  消息已“处理”
3.  响应消息被放入响应队列

我们还假设第 2 步中发生的处理是严肃的事情。它依赖于大量的数据库交互、多个外部服务、文件系统以及各种各样的东西。流程还会触发很多副作用，所以我不能简单地确保响应正确 - 我需要验证副作用。

这些依赖项中的每一个都由单个无状态服务类包装，这使它们变得漂亮且可模拟。

人们如何处理这件事？

我很想使用 Mockito 来验证上述流程的副作用。然而，Mocktio 的文档（在很大程度上是它的实现）似乎强烈反对在“纯”单元测试以外的上下文中使用它。我试过走这条路，但是

*   填充存根数据很困难（因为它有很多）
*   很难让 Spring 将那些存根实例注入到我的 bean 中
*   很难“重置”模拟，这样我就可以在不清除存根的情况下验证一组不同的交互。

*编辑*

我知道我可以使用 HSQLDB 实例之类的东西来处理数据库问题，但仍然存在外部服务的问题。为了可重复性，我不能依赖这些服务处于启动状态、处于我需要的状态等。我看到的唯一选择是模拟它们。

做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T10:11:19.350

好问题。

看起来你已经达到了 Mockito 的极限。如果您想检查对象交互，Mockito 非常棒。

但是，您想要的似乎是更高抽象级别的可观察性（和可控性）。恐怕您需要的模拟或存根应该经过精心设计和手工制作。

在单元级别，可以通过 Mockito 很好地生成这些模拟。在集成级别，这变得更加困难，您将需要专门设计的可测试性接口。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T06:31:15.623

为了模拟数据库、Web 服务、文件系统等内容，您可能需要进行一些重构。对于每个外部服务，您应该编写一个包装类，该类为您希望执行的每个操作提供一个方法。每个这样的方法都应该没有实际的逻辑，而只是以外部服务将理解的方式传递其参数，并返回一个包含外部服务返回的任何数据的对象。例如，如果您正在与数据库交互，则包装类可能会将其参数格式化为 SQL 语句，将它们提交到现有`Connection`对象中，并`List`为结果返回 a。

因为包装类的方法不包含逻辑（即没有if/else，没有循环，也没有异常处理）；无需对包装类进行单元测试。您应该对包装类进行集成测试，以确保其职责正确执行（例如，SQL 语句对数据库具有预期的效果）。

现在重新编写与外部服务交互的类，以便它们与包装类交互。然后很容易对它们进行单元测试——你只需要模拟包装类。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-10-29T22:08:35.090

如果有一些 http 或 rest 模拟框架，使用它应该是好的。

所有复杂的依赖关系都可以被记录、修改和回放。

# c# - 解析 XML 导致 System.Xml.XmlException：找不到元素“客户”

> ID：10131726
> 
> 赞同：1
> 
> 时间：2012-04-12T20:58:19.597
> 
> 标签：c#, .net, xml

这是我的代码，它不断抛出 System.Xml.XmlException: Element 'Customer' was not found.And XML file pasteed at bottom

```
public static List<Customer> GetCustomers()
{
    // create the list
    List<Customer> customers = new List<Customer>();

    // create the XmlReaderSettings object
    XmlReaderSettings settings = new XmlReaderSettings();
    settings.IgnoreWhitespace = true;
    settings.IgnoreComments = true;

    // create the XmlReader object
    XmlReader xmlIn = XmlReader.Create(path, settings);

    // read past all nodes to the first Customer node
    xmlIn.ReadToDescendant("Customers");

    // create one Customer object for each Customer node
    do
    {
        Customer c = new Customer();
        xmlIn.ReadStartElement("Customer");
        c.FirstName =
            xmlIn.ReadElementContentAsString();
        c.LastName =
            xmlIn.ReadElementContentAsString();
        c.Email =
            xmlIn.ReadElementContentAsString();
        customers.Add(c);
    }
    while (xmlIn.ReadToNextSibling("Customer"));

    // close the XmlReader object
    xmlIn.Close();

    return customers; 
```

这是我的 XML，它清楚地包含 Element Customer

```
<?xml version="1.0" encoding="utf-8"?>
<Customers>
    <Customer>
        <FirstName>John</FirstName>
        <LastName>Smith</LastName>
        <Email>jsmith@gmail.com</Email>
    </Customer>
    <Customer>
        <FirstName>Jane</FirstName>
        <LastName>Doe</LastName>
        <Email>janedoe@yahoo.com</Email>
    </Customer>
</Customers> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:03:29.363

从文档中[`ReadStartElement(string)`](http://msdn.microsoft.com/en-us/library/y7e4769a.aspx)：

> 检查当前内容节点是否是具有给定名称的元素，并将阅读器推进到下一个节点。

当您只调用`ReadToDescendant("Customers")`当前节点时，将是`Customers`，而不是`Customer`。

您*可以*通过将其更改为`ReadToDescendants("Customer")`或在第一个调用之后添加类似的额外调用来解决此问题。

你真的*需要*使用`XmlReader`吗？如果您可以使用 LINQ to XML 阅读它，您的代码会简单*得多*：

```
return XDocument.Load(path)
                .Root
                .Elements("Customer")
                .Select(x => new Customer {
                           FirstName = (string) x.Element("FirstName"),
                           LastName = (string) x.Element("LastName"),
                           Email = (string) x.Element("Email")
                        })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:04:58.943

如果您想使用 ReadToDescendent，我认为您需要阅读到“客户”节点，如下所示：

```
// read past all nodes to the first Customer node
xmlIn.ReadToDescendant("Customer"); 
```

# html - 从表格单元格中删除边框

> ID：10131729
> 
> 赞同：48
> 
> 时间：2012-04-12T20:58:24.197
> 
> 标签：html, css, xhtml, html-table

我知道这是一个愚蠢的问题，但我似乎完全忘记了如何去做。

我有一个 HTML `table`，我想删除所有单元格周围的所有边框，以便整个表格周围只有一个边框。

我的代码如下所示：

```
<table border='1' width='500'>
  <tr><th><h1>Your Wheelbarrow</h1></th><tr>
    <th>Product</th>
    <th>Description</th>
    <th>Price</th>
    <th>Quantity</th>
    <th>Total</th>
    <th>Delete</th>
  </tr> 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-12T21:07:59.027

只需折叠表格边框并从表格单元格（`td`元素）中删除边框。

```
table {
    border: 1px solid #CCC;
    border-collapse: collapse;
}

td {
    border: none;
} 
```

如果不明确设置`border-collapse`跨浏览器删除表格单元格边框，则无法保证。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-12T21:40:00.100

用于此目的的 HTML 属性是`rules=none`（插入到`table`标记中）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-16T19:05:10.387

可能你只需要这个 CSS 规则：

```
table {
   border-spacing: 0px;
} 
```

[http://jsfiddle.net/Bz3Jt/3/](http://jsfiddle.net/Bz3Jt/3/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T21:01:48.537

```
<style type="text/css">
table {
  border:1px solid black;
}
</style> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-12T21:06:13.260

你可能想试试这个：http: [//jsfiddle.net/QPKVX/](http://jsfiddle.net/QPKVX/)

不太确定你想要你的最终布局是什么样子——但这也解决了 colspan 问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-28T14:13:10.537

只需在带有类的 div 中使用您的表格（`.table1`例如），并且不要在 CSS 中为该表格设置任何边框。然后使用该类的 CSS 代码。

```
.table1 {border=1px solid black;} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-12T21:02:57.630

将您的表声明更改为：

```
<table style="border: 1px dashed; width: 500px;"> 
```

以下是实际示例：http: [//jsfiddle.net/kc48k/](http://jsfiddle.net/kc48k/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-17T12:20:39.907

如果此页面上的解决方案均无效，并且您遇到以下问题：

[![在此处输入图像描述](../Images/e42fa99cfc6c1b1424cdb5eceef799fb.png)](https://i.stack.imgur.com/xX3SU.png)

您可以简单地使用这个 CSS 片段：

```
td {
   padding: 0;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-28T18:25:16.583

正如@brezanac 提到的，您可以添加边框折叠，不需要其他任何东西。我附上例子

```
.table {
    border: 1px solid #CCC; // only for example
    border-collapse: collapse;
}

th, td {
  border: 1px solid #CCC; // only for example
 }
```

```
<table aria-describedby="table without borders"
       class="table">
  <tr>
    <th id="id">id</th>
    <th id="name">name</th>
    <th id="price">price</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Pizza</td>
    <td>7.99</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Burger</td>
    <td>3.99</td>
  </tr>
</table>

<br/>

<table aria-describedby="table with borders">
  <tr>
    <th id="id">id</th>
    <th id="name">name</th>
    <th id="price">price</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Pizza</td>
    <td>7.99</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Burger</td>
    <td>3.99</td>
  </tr>
</table>
```

# android - 调用我的 R，而不是 android.R

> ID：10131735
> 
> 赞同：0
> 
> 时间：2012-04-12T20:58:41.607
> 
> 标签：android

如何从不是从 Activity 继承的类中访问 R 类。所以当我写 R.something 时，我隐式调用了 android.R.something。

调用 R.something 的显式方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:00:49.143

只需导入`R`您想要的版本。如果您需要访问两个类中的值，则至少其中一个必须是完全限定的。

请注意，继承自与在没有声明的情况下使用项目的值`Activity`无关。这是代码是否在清单中声明的​​应用程序包中。`R``import`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:06:06.943

如果您的资源中有错误，您将不会在您的 gen 目录中获得 R。检查控制台日志输出以获取更多信息。任何红色的东西都非常重要:)除此之外，如前所述，直接限定您的包裹

# javascript - Mongo/Node/Meteor 的全新用户，想知道为什么 Meteor 没有获取任何数据？

> ID：10131739
> 
> 赞同：1
> 
> 时间：2012-04-12T20:59:03.913
> 
> 标签：javascript, node.js, meteor

我正在尝试运行该`leaderboard`示例，并且已将`db.players`. 但是，在运行时`leaderboard`，不会出现任何名称。甚至没有在代码中手动指定的那些。`mongod`在跑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:47:29.943

这可能是因为您插入的是`db.players`，而不是`Players` (`Players`被定义为 leaderboard.js 顶部的流星集合)

如果是这种情况，请将您的插入语句更改为：

```
db.players.insert... 
```

至

```
Players.insert... 
```

# java - 如何让 Logback 与 Eclipse 一起工作？

> ID：10131741
> 
> 赞同：9
> 
> 时间：2012-04-12T20:59:10.157
> 
> 标签：java, eclipse, logback

如何让我的日志记录框架（当前为 Logback）与 Eclipse 配合得很好？特别是，最好单击日志语句并转到生成它的行。

我知道[Logback Eclipse 插件](http://logback.qos.ch/consolePlugin.html)，但显然它已经过时了，并且只适用于旧版本的 Logback。

是否有其他一些更适合 Eclipse 的日志记录框架？我认为必须有一个很好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T21:03:35.630

我使用这种模式：

```
<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level (%file:%line\) - %message%n</pattern>
    </encoder>
</appender> 
```

默认情况下， (%file:%line) 部分在 Eclipse 控制台中是可单击的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:34:02.683

如果您添加`%caller`到模式中，那么 Eclipse 控制台的功能可以解决您的问题......

# android - MonoDroid 选项菜单未显示

> ID：10131747
> 
> 赞同：0
> 
> 时间：2012-04-12T20:59:55.600
> 
> 标签：android, xamarin.android

为 ZTE Optik 平板电脑开发，该平板电脑底部有用于返回、主页等的浮动按钮。除非应用程序特别要求，否则菜单按钮不会出现（显然）。当我在平板电脑上打开 MyFitnessPal 时，会出现菜单按钮。但是，将选项菜单添加到我的应用程序时，菜单按钮永远不会出现。OnCreateOptionsMenu 永远不会被调用（或者至少断点没有被捕获）。我试图将菜单放在 TabbedActivity 本身以及 Activity 上。

主菜单.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/sendLog"
     android:title="Send Log"></item>
</menu> 
```

主菜单.cs

```
 public override bool OnCreateOptionsMenu(IMenu menu)
    {
        MenuInflater menuInflater = MenuInflater;
        menuInflater.Inflate(Resource.Menu.MainMenu, menu);
        return true;
    }

    public override bool OnOptionsItemSelected(IMenuItem item)
    {
        switch (item.ItemId)
        {
            case Resource.Id.sendLog:
                var query = new SQLite("Select * From Log", true);
                SqliteDataReader dr = query.dr;
                List<logInfo> logs = new List<logInfo>();
                while (dr.Read())
                {
                    logInfo log = new logInfo
                    {
                        DateTime = dr["DateTime"].ToString(),
                        Call = dr["Call"].ToString(),
                        Activity = dr["Activity"].ToString(),
                        Message = dr["Message"].ToString()
                    };
                    logs.Add(log);
                }

                InventoryApp inst = new InventoryApp();
                inst.sendLog(logs.ToArray());
                return true;
            default:
                return base.OnOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:39:37.890

The issue seemed to be that my Minimum Android Version was set to API Level 12\. When I peeled it back to 10, the menu appeared. Not so sure why this was considered such a terrible question by one nonconstructive member?

# c# - Python如何访问C#变量？

> ID：10131748
> 
> 赞同：0
> 
> 时间：2012-04-12T20:59:56.683
> 
> 标签：c#, python

我正在为 ArcGis 10.0 使用 Visual Studio 2010 AddIn 模板。由于我已经为 ArcGIS 处理编写了 python 代码。我想在运行此 python 代码的 ArcMap 桌面命令栏中插入一个按钮。以下是我的简化c#代码和python代码开头供大家参考：

c#代码：

```
using System;
using System.Windows.Forms;
using System.Collections.Generic;
using System.Text;
using System.IO;
using Microsoft.VisualBasic;

namespace CallPython
{
    public class CallPython : ESRI.ArcGIS.Desktop.AddIns.Button
    {
        public CallPython()
        {
        }
        public string inputName()
        {
            string inputNames;
            inputNames = "cavert.shp";
            return inputNames;
        }
        protected override void OnClick()
        {
            inputName();
            System.Diagnostics.Process.Start(
                   "D:\\From2\\BCAP\\python\\scripts\\trans5.py");
        }
        protected override void OnUpdate()
        {
            Enabled = ArcMap.Application != null;
        }
    }

} 
```

Python代码：

```
import arcpy
import os, win32com.client
from arcpy import env

arcpy.env.overwriteOutput = True
# Set environment settings
env.workspace = "D:/BCAP/trans/tempt/"

# Set local variables

vs_method_source = os.path.abspath("D:/Users/mar/CallPython/CallPython.cs")
vs_file_name = os.path.abspath("D:/Users/mar/CallPython/CallPython.sln")
vs = win32com.client.Dispatch("VisualStudio.DTE.7.1")
doc_template = vs.Documents.Open(vs_file_name)
mm = doc_template.CallPython.inputName() #CallPython is namespace, inputName is method 
```

最后一行python代码就是问题所在。我知道这绝对不对，但不知道如何从 python 访问 C# 命名空间、类和方法。

# iphone - 提交到 AppStore 后重命名 iOS 应用程序

> ID：10131751
> 
> 赞同：2
> 
> 时间：2012-04-12T21:00:14.880
> 
> 标签：iphone, objective-c, ios, ipad, universal

我刚刚开发并提交了应用程序。出于开发和测试目的，我将 App 名称命名为“XYZ”，而在准备 AppStore 时，我在 iTunes 连接中将其命名为“XYZ-abcd”。

在尝试上传二进制文件时显示错误，因此我不得不将其名称更改为“XYZ-abcd”，但在手机上运行该应用程序后，整个文本都没有显示出来。我已经上传了二进制文件，状态显示：上传已收到。

如何改变它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T21:33:20.870

使用应用程序的“名称”的地方很少：

1.  捆绑包标识符 - 这是`com.yourcompany.my-cool-app`系统用于在 iOS 和 iTunes Connect 中识别您的应用程序的 ID。这只是您独有的东西，只要它在应用商店上运行，它就不会在您的应用的生命周期内改变。我有一个应用程序，其标识符与应用程序商店中显示的名称完全不同
2.  捆绑包名称 - 这是 iOS 显示的名称（在跳板上的图标下、设置中等）。您可以将其缩短或缩写以不截断，但它必须类似于：
3.  应用程序名称（在 iTunes Connect 上）。这是用户搜索您的应用时应用商店中实际显示的内容。我的应用程序使用长格式的应用程序名称加上破折号和“副标题”（如果您想这样称呼它）。例如，Tweetbot（不是我的应用程序）：“Tweetbot — 具有 iPhone 个性的 Twitter 客户端”

听起来您遇到的错误与您更改应用程序中的捆绑标识符有关，但在 iTC 中捆绑 ID 不匹配。将您的捆绑 ID 更改为您在 iTC 上的任何内容，它应该可以正常上传。

# objective-c - NSPopover 和雪豹

> ID：10131752
> 
> 赞同：0
> 
> 时间：2012-04-12T21:00:26.523
> 
> 标签：objective-c, xcode, macos, nspopover

我已经在我的 Mac 应用程序中实现了 NSPopover。它在 10.7 Lion 中运行良好，但在 10.6 Snow Leopard 中启动时崩溃。我知道对 NSPopover 的支持是在 Lion 中引入的，但在 10.6 中不受支持，但我想知道如何使我的应用程序与旧的“雪豹”兼容。

我对 Mac 开发很陌生，但这里是代码。有小费吗？（弹出框位于 MainWindow.xib 中）

。H

```
NSPopover *popOver;
@property (assign) IBOutlet NSPopover *popOver;
- (IBAction)showPopover:(id)sender; 
```

.m

```
- (IBAction)showPopover:(id)sender
{    

if (popOver.isShown) {

    [self.popOver close];
}

[[self popOver] showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxYEdge];    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:07:48.887

在您的程序中使用 MAAttachwindow 并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:54:45.357

检查 MAC OS 版本（[链接](https://stackoverflow.com/questions/6492038/find-mac-os-x-version-number-in-objective-c)），如果是 10.6，则使用 NSDrawer，否则使用 NSPopover。

# css - 自定义工具提示

> ID：10131754
> 
> 赞同：0
> 
> 时间：2012-04-12T19:48:19.290
> 
> 标签：css

无论如何都可以通过标题标签自定义所有工具提示，而无需添加类或跨度等。

基本上只要使用 title="" 标签就显示自定义工具提示

以下演示将工具提示类添加到给定表单中的所有字段，但是由于某些我已经放弃的未知原因，我无法使其与我的网站一起使用。

[http://jquerytools.org/demos/tooltip/form.html](http://jquerytools.org/demos/tooltip/form.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:08:51.000

您可以使用 CSS3 来[定位标题元素](http://www.css3.info/preview/attribute-selectors/) `p[title^="ho"] {background: green;}`并[创建无 javascript 的工具提示](http://www.red-team-design.com/css3-tooltips)。

这将允许您仅使用 CSS 以编程方式添加提示，但您必须为旧浏览器提供 jQuery 或 javascript 后备。

# sorting - 按值对地图内的地图进行排序

> ID：10131759
> 
> 赞同：5
> 
> 时间：2012-04-12T21:00:38.893
> 
> 标签：sorting, groovy, map

我正在尝试在 Groovy 中对具有映射作为值的映射进行排序。我想遍历地图并打印出按 lastName 和 firstName 值排序的值。所以在下面的例子中：

```
def m = 
[1:[firstName:'John', lastName:'Smith', email:'john@john.com'], 
2:[firstName:'Amy',  lastName:'Madigan', email:'amy@amy.com'], 
3:[firstName:'Lucy', lastName:'B',      email:'lucy@lucy.com'], 
4:[firstName:'Ella', lastName:'B',      email:'ella@ella.com'], 
5:[firstName:'Pete', lastName:'Dog',    email:'pete@dog.com']] 
```

期望的结果是：

```
[firstName:'Ella', lastName:'B',      email:'ella@ella.com']
[firstName:'Lucy', lastName:'B',      email:'lucy@lucy.com']
[firstName:'Pete', lastName:'Dog',    email:'pete@dog.com']
[firstName:'Amy',  lastName:'Madigan', email:'amy@amy.com']
[firstName:'John', lastName:'Smith', email:'john@john.com'] 
```

我试过 m.sort{it.value.lastName&&it.value.firstName} 和 m.sort{[it.value.lastName, it.value.firstName]}。按 m.sort{it.value.lastName} 排序有效，但不按名字排序。

谁能帮忙解决一下，不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:10:23.677

这应该这样做：

```
m.values().sort { a, b ->
  a.lastName <=> b.lastName ?: a.firstName <=> b.firstName
} 
```

# php - 从另一个 php 脚本检查布尔值

> ID：10131761
> 
> 赞同：0
> 
> 时间：2012-04-12T21:00:56.197
> 
> 标签：php

我想检查另一个 phpscript 中的布尔值是真还是假。就像我在一个 php 脚本中有这样的布尔值：

```
$signedin = false; 
```

然后我想通过另一个文件中的另一个 php 脚本检查它是假的还是真。我希望有一个人可以帮助我！:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:02:59.310

要检查登录用户的状态，您通常需要使用会话，例如

```
<?php 
session_start();
// whatever code ...
$_SESSION['signedIn'] = true; 
```

然后在任何脚本上，您只需检查该变量：

```
<?php
session_start(); 
$signedIn = $_SESSION['signedIn']; 
```

不过，要从字面上回答您的问题，请在此处：

脚本A.php

```
function checkSignedIn(){
    return ($signedIn === true);
} 
```

脚本B

```
include_once('scriptA.php');
$signedIn = checkSignedIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:03:48.140

使用会话：[http ://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

# javascript - 提交按钮不起作用

> ID：10131763
> 
> 赞同：0
> 
> 时间：2012-04-12T21:00:59.210
> 
> 标签：javascript, html, jsp

当我点击提交按钮时没有任何反应，我不确定是什么问题。该程序仅添加 2 个数字，输出应为警报消息。请帮忙

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GlassFish JSP Page</title>
</head>
<body>

    <%
        int a = 6, b = 8, c;
            c=a+b;
    %>
    <p>
            Value 1 =
            <%=a%></p>
    <p>
            Value 2 =
            <%=b%></p>
    <p>
            Enter the value :<br /> <input type="text" id="c" /></br>
                <input type="submit" value="Submit"
                    onclick="validate();" />
    </p>
    <script type="text/javascript">

            function validate() {
                    var a = <%=a%>;
                    var b = <%=b%>;
                    var c = <%=c%>;
                    if (c!= parseInt(document.getElementById("c").value, 10))
                            alert("The values you entered is incorrect.");
                    } else {
                            alert("Correct!");
                    }
            }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:05:27.443

您在 if 语句中缺少左括号

```
if (c!= parseInt(document.getElementById("c").value, 10)) 
```

应该

```
if (c!= parseInt(document.getElementById("c").value, 10)){ 
```

# android - 如何实现水平滚动倒数计时器？

> ID：10131767
> 
> 赞同：5
> 
> 时间：2012-04-12T21:01:22.237
> 
> 标签：android

**目标** 我想实现一个倒数计时器，它只是从左到右滚动数字（不是图形）。

**效果** 效果看起来像数字从左侧放大，向中间放慢，然后向右缩小。

**备注** 由于我已经使用 TimerTask 每秒执行代码，我可以使用它来触发下一个数字以在水平滚动的文本视图中滚动。

这可以实现为滚动视图中的文本视图吗？寻找一个代码示例开始......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T23:07:16.510

使用动画将是最简单的解决方案。您可以创建自己的或尝试组合多个**[TranslateAnimations](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)**和 **[ScaleAnimations](http://developer.android.com/reference/android/view/animation/ScaleAnimation.html)**。

这意味着将每个数字放入其自己的 TextView 中，而不是使用滚动视图。

**[然后，您可以使用Interpolator](http://developer.android.com/reference/android/view/animation/Interpolator.html)**控制到中间的加速度。插值器是 Android 处理缓动的方式。您可能需要**[AccelerateDecelerateInterpolator](http://developer.android.com/reference/android/view/animation/AccelerateDecelerateInterpolator.html)**来实现加速/减速效果。

您可以使用**[AnimationSet](http://developer.android.com/reference/android/view/animation/AnimationSet.html)**将多个动画应用到同一个视图。弄清楚如何组合一个好的 AnimationSet 将是项目中最具挑战性的部分。请务必注意“填充”属性。事实上，在玩了一会儿之后，我认为自定义动画比使用现成的动画更简单。

你可以 fork**[我的 GitHub 项目](https://github.com/pajtai/CountDown/)**，它实现了一个非常简单的版本。4 月 17 日及之前我使用了多个预制动画。如果您查看最新版本，您将看到自定义动画。

在您设置一个动画的持续时间后，每个动画的时间都会自行处理。**[处理程序](http://developer.android.com/reference/android/os/Handler.html)**在前一个号码完成后调用下一个号码。我认为这比每隔 X 秒调用一个函数来更新所有内容要简洁一些。

功能概述：

*   一个 Activity ( **[CountDownActivity.java](https://github.com/pajtai/CountDown/blob/master/src/org/pa5/CountDownActivity.java)** ) 可以看到一切。

    *   Activitiy 的布局 XML 有一个用于开始倒计时的按钮。
    *   一旦倒计时开始，按钮就会消失。倒计时完成后它会重新出现。
*   Activity 包含一个**[处理](http://developer.android.com/reference/android/os/Handler.html)**程序( **[MotionHandler.java](https://github.com/pajtai/CountDown/blob/master/src/org/pa5/MotionHandler.java)** )。**[处理](http://developer.android.com/reference/android/os/Handler.html)**程序控制数字的移动和时间。
    *   Handler 使用**[AnimationSet](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)**来移动数字
        *   AnimationSet 是传入的依赖项
            *   这是为了灵活性。只需传入不同的 AnimationSet 即可更改数字的移动方式
            *   AnimationSet 由~~四个动画~~组成，一个自定义动画（见下文）
    *   AnimationSet 使用共享的**[AccelerateDecelerateInterpolator](http://developer.android.com/reference/android/view/animation/AccelerateDecelerateInterpolator.html)**，这似乎工作得很好。还有其他选择，包括自己编写。
    *   Handler 使用**[延迟消息](http://developer.android.com/reference/android/os/Handler.html#sendMessageDelayed%28android.os.Message,%20long%29)**开始下一个号码
    *   当倒计时完成时，处理程序会使用自定义侦听器（**[MotionHandler](https://github.com/pajtai/CountDown/blob/master/src/org/pa5/MotionHandler.java)** >> CountdownListener）通知 Activity
*   旋转设备将重新开始倒计时。

注意 - 之前我在一个 AnimationSet 中使用了四个现成的动画，我已经编辑为只包含一个自定义动画......您可以根据自己的喜好调整其算法。

此自定义动画使用**[Cycloid](http://mathworld.wolfram.com/Cycloid.html)**使数字看起来越来越大。

```
/**
 * A custom animation to move and scale the numbers.
 * 
 */
public class NumberAnimation extends Animation
{
    final public static float MINIMUM = 3;
    private int mHorizontal;
    private int mScaling;

    public NumberAnimation(int horizontalMovement, int scaling)
    {
        mHorizontal = horizontalMovement;
        mScaling = scaling;
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t)
    {
        // Cycloid repeats every 2pi - scale interpolatedTime to that
        double time = 2 * Math.PI * interpolatedTime;
        // Cycloid function
        float currentScale = (float) (mScaling * (1 - Math.cos(time))) + MINIMUM;
        Matrix matrix = t.getMatrix();
        matrix.preScale(currentScale, currentScale);
        matrix.postTranslate(mHorizontal * interpolatedTime, 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:29:44.590

[缓](http://www.gizma.com/easing/)动将帮助您控制速度。

# c# - 在线程中使用 Parallel.Foreach

> ID：10131768
> 
> 赞同：0
> 
> 时间：2012-04-12T21:01:22.560
> 
> 标签：c#, .net, linq, task-parallel-library

我有一个线程在服务启动时加载数据。我在这个线程中调用了一个方法，该方法使用 Parallel.Foreach 来迭代一组数据。但是我在并行 forerach 中的 linq 查询获得了一个未设置为实例错误的对象引用。

***如果我删除 Parallel.Foreach 或删除线程，则相同的逻辑有效。****即使锁定列表也无济于事。***

```
 loadingThread = new Thread(new ThreadStart(PreloadData));
                loadingThread.IsBackground = true;
                loadingThread.Start();
---------------------------------------

    public static void PreloadData()
    {
     Parallel.ForEach(loadedIDs.Keys, indexDefId =>
                    {
                        List<FixingEvent> lst = null;
                        lock (loadedEvents)
                        {
                            lst = (from e in loadedEvents where e.DIVACode.Equals(indexDefId) select e).ToList();
                        }

---------------------------
    } 
```

我在里面的 linq 查询中遇到异常 - ' **e 为 null，因此对象引用错误'**。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:59:05.497

您不应该锁定`loadedEvents`对象。根据[msdn](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)：

> 最佳实践是定义一个私有对象来锁定，或者一个私有静态对象变量来保护所有实例共有的数据。

你不需要锁定你正在访问的对象——你只需要一个对象来锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:18:04.693

我猜加载事件列表包含空元素。也许是由于比赛条件。

# c# - 为什么表达式树不能包含命名参数规范？

> ID：10131772
> 
> 赞同：45
> 
> 时间：2012-04-12T21:01:45.227
> 
> 标签：c#, c#-4.0, expression-trees

使用 AutoMapper，我找到了一个非常适合命名参数的地方：

```
.ForMember(s => s.MyProperty, opt => opt.MapFrom(s => BuildMyProperty(s, isAdvanced: false))) 
```

但是编译器对我大喊：

> 表达式树可能不包含命名参数规范

所以我不得不恢复到：

```
.ForMember(s => s.MyProperty, opt => opt.MapFrom(s => BuildMyProperty(s, false))) 
```

有谁知道为什么编译器在这种情况下不允许命名参数？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-12T23:07:38.137

考虑以下：

```
static int M() { Console.Write("M"); return 1; }
static int N() { Console.Write("N"); return 2; }
static int Q(int m, int n) { return m + n; }
...
Func<int> f = ()=>Q(n : N(), m: M());
Expression<Func<int>> x = ()=>Q(n : N(), m: M());
Func<int> fx = x.Compile();
Console.WriteLine(f());
Console.WriteLine(fx()); 
```

你同意我希望最后两行必须做完全相同的事情，对吧？即打印`NM3`。

现在，您希望表达式树转换生成哪个表达式树库调用来确保这一点？没有了！因此，我们面临以下选择：

1.  实现表达式树库中的功能。在表达式树降低引擎中添加一个转换，以保留命名参数的执行顺序。`Compile`在考虑执行顺序的方法中实现代码。
2.  make`x = ()=>Q(n : N(), m: M());`实际上被实现`x = ()=>Q(M(), N());`为非表达式树版本并且与非表达式树版本不兼容。
3.  禁止表达式树中的命名参数。为此实施错误消息。

(1) 很好，但很贵。(2) 是非首发；我们不能凭良心介绍这种“陷阱”。(3) 便宜但刺激。

我们选择了（3）。

# json - Highcharts：使用 setData() 更新饼图

> ID：10131774
> 
> 赞同：5
> 
> 时间：2012-04-12T21:01:49.300
> 
> 标签：json, highcharts

我正在尝试解决如何更新 Highcharts 饼图，但对于我的生活来说，它似乎无法正常工作。

我查看了文档，并且已经能够获得条形图、折线图和样条图以正常更新，但是当将此功能用于饼图时，它就不起作用了。

我目前正在喂食：

```
item.setData([["none", 100]], true); 
```

其中 item 等于系列，如下所示：

```
$.each(browser_chart.series, function(i, item){
    if(item.name == 'Browser share'){
        console.log(data.browsers);
        item.setData([["none", 100]], true);
    }
}); 
```

如演示中所示，饼图的数据是如何格式化的。问题是它似乎无法正确阅读该系列。我尝试：

```
item.setData([\"none\", 100], true); 
```

它似乎做了一些事情，但无法正确读取 x 和 y 值（这当然意味着它是错误的）。

这里的任何人都可以指出我的工作方向吗？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T03:23:56.200

**已编辑：**
当您设置新数据时，在这种情况下，您必须为所有饼图部分设置为数组数组。
在我的[示例](http://jsfiddle.net/ricardolohmann/SzuPB/4/)中，我有六个类别，因此我必须为所有类别设置数据。

因此，在这种情况下，您必须执行以下操作：

```
var seriesData = [];
$.each(browser_chart.series, function(i, item) {
    if(item.name == 'Browser share'){
        seriesData.push(["serie"+i, someNumber]);
    }
});
chart.series[0].setData(seriesData, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:18:06.903

我已经标记了里卡多斯的答案，但是我的问题涉及的内容更多，我没有正确解释。

我正在通过 AJAX 从 PHP 后端生成的 JSON 更新饼图。当我将新数据应用于饼图时，它会中断。

使用里卡多斯的答案，我发现这是因为我的点数不同，所以我不能只更新饼图，我必须像这样重新制作它：

```
browser_chart_config.series[0].data = data.browsers;
browser_chart = new Highcharts.Chart(browser_chart_config); 
```

这将允许您在具有不同数量的点时更新图表。

希望能帮助到你，

编辑：我还发现这是 HighCharts 的一个已知问题：[https ://github.com/highslide-software/highcharts.com/issues/542](https://github.com/highslide-software/highcharts.com/issues/542)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-10T09:20:37.100

```
 //initialise
        var new_data;
            new_data = [{ name: 'load percentage', y: 10.0, color: '#b2c831' },{ name: 'rest', y: 60.0, color: '#3d3d3d' }];
	function requestData() 
        {             
			$.ajax({
				url: 'live-server-data.php', 
				success: function(point) 
                                {
					var series = chart.series[0];
                                        var y_val = parseInt(point[1]);                                      
                                        var x_val = 100 - y_val;
                                        console.log(point[0]+ "," +point[1] );//["0"]
                                        new_data = [{ name: 'load percentage', y:y_val, color: '#b2c831' },{ name: 'rest', y:x_val, color: '#3d3d3d' }];                                                                
                                        series.setData(new_data);                                   
                                        // call it again after one second					
				},
				cache: false
			});
	} 
```

# css - CSS：单个图像文件中的普通和悬停背景图像

> ID：10131776
> 
> 赞同：0
> 
> 时间：2012-04-12T21:01:54.263
> 
> 标签：css

美好的一天，我的 HTML 页面上有一个固定宽度和高度的 DIV。在正常状态下，它应该在背景上显示图像 A，在悬停状态下，它应该显示图像 B。我知道如何使用 CSS 和两个图像文件 A 和 B 来做到这一点。在某个地方我看到了这两个图像（A 和 B）放入一个单独的图像文件，然后他们以某种方式编写 CSS，以便在正常状态下，DIV 在背景上显示图像的上半部分，在悬停状态下，它显示图像的下半部分。您能否建议使用 CSS 代码来实现这一目标？DIV 没有设置位置，但它是具有相对位置的 DIV 的子项。先感谢您。

沃杰科技

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:05:10.643

这被称为 CSS spriting，是每个人都应该使用的很棒的技术。

请参阅[此答案](https://stackoverflow.com/questions/2932566/how-do-css-sprites-work)以获得良好的概述。它归结为拥有一个具有定义的高度和宽度的 DOM 元素，并使用大于该区域的背景图像。然后，您可以使用选择性地仅显示该背景图像的一部分`background-position`

# php - 在 PHP 脚本中将文本转换为 UTF-8

> ID：10131777
> 
> 赞同：0
> 
> 时间：2012-04-12T21:02:02.013
> 
> 标签：php, html

我正在从动态 html 表中将数据导出到 CSV。

然而，这会导致一些问题，因为有时数据具有控制字符等。

如果可能的话，我需要把所有这些都去掉或变得“友好”吗？

我不知道该怎么做，所以有人可以帮忙吗？

这是我的脚本：

```
<textarea name="siteurl" rows="10" cols="50">
<?php //Check if the form has already been submitted and if this is the case, display the     submitted content. If not, display 'http://'.
echo (isset($_GET['siteurl']))?htmlspecialchars($_GET['siteurl']):"http://";?>
</textarea><br>
<input type="submit" value="Submit">
</form>
</div>
<div id="nofloat"></div>
<table class="metadata" id="metatable_1">
<?php
error_reporting(E_ALL);
//ini_set( "display_errors", 0);
function parseUrl($url){
    //Trim whitespace of the url to ensure proper checking.
    $url = trim($url);
    //Check if a protocol is specified at the beginning of the url. If it's not,    prepend 'http://'.
    if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
            $url = "http://" . $url;
    }
    //Check if '/' is present at the end of the url. If not, append '/'.
    if (substr($url, -1)!=="/"){
            $url .= "/";
    }
    //Return the processed url.
    return $url;
}
//If the form was submitted
if(isset($_GET['siteurl'])){
    //Put every new line as a new entry in the array
    $urls = explode("\n",trim($_GET["siteurl"]));
    //Iterate through urls
    foreach ($urls as $url) {
            //Parse the url to add 'http://' at the beginning or '/' at the end if not    already there, to avoid errors with the get_meta_tags function
            $url = parseUrl($url);
            //Get the meta data for each url
            $tags = get_meta_tags($url);
            //Check to see if the description tag was present and adjust output    accordingly
            $tags = NULL;
$tags = get_meta_tags($url);
if($tags)
echo "<tr><td>Description($url)</td><td>" .$tags['description']. "</td></tr>";
else 
echo "<tr><td>Description($url)</td><td>No Meta Description</td></tr>";
    }
}
?>
</table>
<script type="text/javascript">
        var exportTable1=new ExportHTMLTable('metatable_1');
    </script>
<div>
        <input type="button" onclick="exportTable1.exportToCSV()"   value="Export to CSV"/>
        <input type="button" onclick="exportTable1.exportToXML()"     value="Export to XML"/>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:10:18.500

不确定我是否正确理解了这个问题，但如果你想要的只是一个 UTF-8 编码的 CSV，你可以只使用`utf8_encode()`你正在写入文件的数据。

或者，如果您想省略控制字符，您可以在将控制字符写入文件之前使用`ctype_cntrl()`...检查这些行，然后使用正则表达式删除它们，或者拒绝将这些行全部写入.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:58:58.147

我猜你想要类似的东西：
`echo "<tr><td>Description($url)</td><td>" . utf8_encode($tags['description']) . "</td></tr>";`

请指定显示错误的文本是什么，是`$tags['description']`吗？

以下是您可能需要的功能手册：[mb_convert_encoding](http://php.net/manual/en/function.mb-convert-encoding.php)、[utf8_encode](http://php.net/manual/en/function.utf8-encode.php)。

# ocaml - int 键的 OCaml 映射 :: 与 Map.Make 仿函数一起使用的“简单” int 模块在哪里？

> ID：10131779
> 
> 赞同：20
> 
> 时间：2012-04-12T21:02:06.167
> 
> 标签：ocaml

我需要一个带有*int*类型键的 OCaml 映射，所以我使用*Map.Make*创建一个。[然而，标准模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/index_modules.html)似乎“只”提供**了 Big_int**、**Int32**、**Int64**和**Nativeint 等**需要转换的模块。所以我必须做这样的事情：

```
module IntMap = Map.Make(Int32) 
let a_map = IntMap.add (Int32.of_int 0) "zero" IntMap.empty ;; 
```

...我宁愿避免或定义我自己的愚蠢**Int**模块确实处理简单的*int*文字或值而不需要转换函数：

```
module Int = struct                       
   type t = int                                              
   let compare x y = if x < y then -1 else if x > y then 1 else 0 end ;;  
module IntMap = Map.Make(Int) 
let a_map = IntMap.add 0 "zero" IntMap.empty ;; 
```

我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-12T22:06:37.027

拥有 int 映射的最简单方法是执行以下操作：

```
module IntMap = Map.Make(struct type t = int let compare = compare end) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T21:10:35.980

我认为您没有遗漏任何东西，没有标准模块。我相信 [OCaml Batteries Included的](http://batteries.forge.ocamlcore.org/)[BatInt](http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatInt.html)模块可以满足您的需求。

（编辑补充：这是真的，我自己使用托马斯建议的方法！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T23:20:13.227

`IntMap` [您可以使用 one-liner](https://stackoverflow.com/a/10132568)构建。如果您不介意使用第三方库，[Jean-Christophe Filliâtre 的 Patricia 树库](http://www.lri.fr/~filliatr/software.en.html)( `Ptmap`) 效率更高一些（`Ptset`对于 OCaml 整数集也是如此）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-29T21:45:17.603

If you happen to use `containers` already (which I think is a bit more commonplace since previous answers were written), you can conveniently use the containers 'primitive' modules along with the CCMap module to achieve this, e.g.:

`module ByInt = CCMap.Make(CCInt)`

# java - 在 android 设备上使用 javascript 检测方向

> ID：10131782
> 
> 赞同：6
> 
> 时间：2012-04-12T21:02:20.020
> 
> 标签：java, javascript, android

使用[this question](https://stackoverflow.com/questions/1649086/detect-rotation-of-android-phone-in-the-browser-with-javascript)中的一些代码，我设置了一些代码来检测android设备何时旋转。它适用于华硕平板电脑（4.0.3）和两个模拟器（4.0.3 和 2.1），但对于 kindle fire（2.3.4）和 droidx（2.3.4），它会切换宽度和高度。

代码：

```
<script type="text/javascript">
    var supportsOrientationChange = "onorientationchange" in window,orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";

    window.addEventListener(orientationEvent, function() {
        alert("The rotation is " + window.orientation + " and the resolution is " + screen.width + " x " + screen.height);
        modRule();
    }, false);
</script> 
```

华硕平板电脑的输出

把它放在看起来像风景的地方：

> 旋转为0，分辨率为1280 x 800

肖像

> 旋转为 -90，分辨率为 800 x 1280

Kindle Fire 的输出

景观

> 旋转为 90，分辨率为 600 x 819

肖像：

> 旋转为 0 分辨率为 1024 x 395

来自 droidx 的输出

景观：

> 旋转为 90，分辨率为 320x488

肖像：

> 旋转为0，分辨率为569x239

有没有办法我可以

a) 让 javascript 检测它是否应该使用高度而不是宽度或宽度而不是高度

或者

b) 让设备报告其宽度和高度的正确值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:18:13.760

又找了一会儿，我发现这是 2.2 和 2.3 操作系统的一个错误。我通过将此代码放入我的应用程序中修复了 2.3.4 的错误。

```
browser = (WebView)findViewById(R.id.webBrowser);
browser.setBackgroundColor(Color.BLACK);
WebSettings webSettings = browser.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setUserAgentString("Android " + android.os.Build.VERSION.SDK);//this is so the JavaScript knows what version of the OS I'm using 
```

然后检测我是否处于横向模式：

```
var uagent = navigator.userAgent.toLowerCase();
function isLandscape()
{
    var width = screen.width;
    var height = screen.height;
    if (isBugged())
    {
        var temp = width;
        width = height;
        height = temp;
    }
    var landscape = width > height;
    return landscape;
}

function isBugged()
{
    return uagent == "android 10"
} 
```

如果这还不够令人困惑，那么当身体最初加载时，它是否处于横向模式是正确的。所以我不得不绕过我自己的解决方法。

```
<body onload="if(isBugged()){uagent = 'bypass';}/*code that depends on isLandscape()*/;uagent = navigator.userAgent.toLowerCase();"> 
```

这是一个真正的痛苦，比它应该做的工作要多得多。特别是因为它适用于 2.1 而不是 2.3.4。真的很沮丧，但这就是我所拥有的。目前，我只检查 sdk 10，我将很快添加对其他错误版本的检查。

# php - 'self' 在继承的类中究竟是如何工作的？

> ID：10131786
> 
> 赞同：16
> 
> 时间：2012-04-12T21:02:30.333
> 
> 标签：php, inheritance

根据 php，class::self 总是指向类本身，但是当我写下这些代码时，发生了一些奇怪的事情：

```
class C_foo{
    function foo() { return "foo() from C_foo"; }
    function bar() { echo self::foo(); }
}

class C_bar extends C_foo{
    function foo() { return "foo() from C_bar"; }
}

C_foo::bar();
C_bar::bar(); 
```

我以为输出会是：

```
foo() from C_foo
foo() from C_bar 
```

但实际上：

```
foo() from C_foo
foo() from C_foo 
```

这意味着父类中的*self*并不完全继承到子类中，它的工作方式更像这样：

```
foo() {return parent::foo();} 
```

这是php的一个功能还是一个错误？还是这样的意思？

否则，当我试图告诉一个类从自身创建对象时，就会发生这样的事情，代码是这样的：

```
class Models {
    function find($exp) {
        ...
        ...

        $temp_model = new self();
        ...
        ...
    }
}

class Something extends Models {...}

$somethings = Something::find("..."); 
```

也许有人会问，“为什么不设置一个值为**class**的变量，并将该变量用作 __construction 函数？”

像这样：

```
...
...
function find($exp) {
    ...
    ...
    $class_name = __class__;
    $temp_model = new $class_name();
    ...
    ...
}
... 
```

事实上，我这样做了，得到了一个更奇怪的结果：

它仅在类没有任何属性或函数但`find()`，或者告诉我一个变量显示一个函数存在的地方会跳出的错误时才有效。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-12T21:18:28.163

听起来您在描述称为“后期静态绑定”的 PHP 功能。

PHP 提供了两种语法：`self::`和`static::`.

`static`是在 PHP 5.3 中引入的，因为很多人都希望`self`按照您所描述的方式工作。

有关更多信息，请参阅 PHP 手册：http: [//php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)

您还可以使用语法`new self()`或`new static()`创建新实例：

```
$parent = new self();
$child = new static(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:09:22.670

这是因为接收父类方法的类属于该类。所以：

$bar 是 Bar，因此 self:: 指的是 Bar，而不是 Foo。即使该方法来自 Foo.

这可能与 Java 不同，但它可能表明 PHP 在内部是如何进行继承的。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-12T21:09:02.687

在 PHP 中，类不是对象。因此，没有静态方法的继承（实际上，它们类似于全局函数）。

所以，当 C_foo 说 self 时，它总是意味着 C_foo（即使你从 C_bar 调用了一个方法）。

如果你想从抽象类方法创建实例，你应该尝试工厂模式。

# matlab - 积分 log(x) Matlab

> ID：10131788
> 
> 赞同：0
> 
> 时间：2012-04-12T21:02:51.357
> 
> 标签：matlab, integration

怎样才能`1/ln(x)`集成到*Matlab*中？

```
y=0:.1:1;
a=log(y);
plot(a,y);
z=quad(a,-2,2); 
```

我以为这会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:24:44.023

这对我有用：

```
z = quad(@(x) 1./log(x), 2, 10) 
```

并给出结果

```
z = 5.1204 
```

您不能在区间 -2:2 内积分，因为在 x = 0 时自然对数未定义，而在 x = 1 时，自然对数为 0，因此未定义倒数。

# javascript - 如何解决不停止加载的 facebook 请求对话框的问题？

> ID：10131792
> 
> 赞同：2
> 
> 时间：2012-04-12T21:03:06.760
> 
> 标签：javascript, facebook

**情况** 我试图在我的页面上打开一个请求对话框。但是当我单击按钮时，框会出现但不会停止加载。

应用程序不会在 javascript 控制台或类似的东西中显示错误

谢谢

```
inviteFB = ->
  FB.ui
    method: 'apprequests'
    message: fb_request_message_text
    exclude_ids: fb_request_already_invited || []
    (response) -> 
```

![在此处输入图像描述](../Images/013f48b25c0b1765134350bc88567b05.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:56:16.277

如果您使用“to”参数传递好友列表。例如，不要传递超过 25 个朋友 ID。

当我将 50 个朋友传递给 apprequest 对话框时，就会发生这种情况。当通过 25 时它工作正常。

不知道什么是幻数，尝试了 26 并且仍然有效。

由于 IE6/IE7 每个请求限制 25 个朋友，我有了尝试这个的想法。

# sql - 使用 Join 获取记录信息而不返回查询中的行

> ID：10131795
> 
> 赞同：0
> 
> 时间：2012-04-12T21:03:13.400
> 
> 标签：sql, join

我有两张桌子（Apple 和 Bid）。我想根据给定条件从 A 返回所有行，并且我想从表 B 中获取单个值。如果我展示我正在尝试做的事情，这将有所帮助：

```
Apple
ID
Name
Type

Bid
bid_id
Type 
```

我想从 A 返回 ID 与给定 ID 匹配的所有记录，并且我想获取与从表 A 中提取的每条记录相关联的 bid_id。

所以，我的查询看起来像这样：

```
"Select A.ID, A.Name, A.Type, B.bid_id
FROM Apple A
LEFT JOIN Bid B on B.Type = A.Type
Where A.ID = 35"; 
```

表中只有一条 id 为 35 的记录`Apple`。但是，由于该表中有 3 个表`Bid`的类型与 Apple#35 的类型匹配，因此返回了 3 条记录。

为了澄清，应该只返回*一个记录。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:06:05.487

任意选择返回 MIN 值：

```
Select A.ID, A.Name, A.Type, MIN(B.bid_id)
    FROM Apple A
        LEFT JOIN Bid B 
            ON B.Type = A.Type
    WHERE A.ID = 35
    GROUP BY A.ID, A.Name, A.Type; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:06:10.043

对于 MySQL：

```
Select A.ID, A.Name, A.Type, B.bid_id
FROM Apple A
LEFT JOIN Bid B
  ON B.Type = A.Type
WHERE A.ID = 35
GROUP BY A.ID 
```

这将返回其中一个`bid_id`。如果您有一些`bid_id`关于选择的规则，您可以使用聚合函数来实现它 - 例如，MIN、MAX 以及更复杂的规则也可以实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:10:06.537

鉴于您正在寻找最多一个随机出价，最快的选择是`limit 1`：

```
select  A.ID
,       A.Name
,       A.Type
,       B.bid_id
from    Apple A
left join
        Bid B 
on      B.Type = A.Type
where   A.ID = 35
limit   1 
```

# core-data - 评论核心数据模型

> ID：10131797
> 
> 赞同：5
> 
> 时间：2012-04-12T21:03:20.157
> 
> 标签：core-data

有没有办法为 Core Data 的数据模型中的实体、属性和关系添加注释？随着我的模型变得越来越复杂，发表评论会很有用，但我还没有看到任何方法可以做到这一点。当然，如果可以通过迁移保留评论也会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:17:32.343

无法直接向您的 Core Data 模型添加注释，但在 X-code 中查看模型，您可以在实体检查器的右下角切换到 Table、Graph 编辑器样式。如果您已按逻辑构建该视图，则该视图应该可以作为模型的大量文档。

当然，您总是可以在您的 App Delegate 中添加一个注释部分，涵盖您的核心数据模型的结构，但我想您确实知道这一点。

# tfs - 是否可以为 MS Dynamics crm 2011 设置持续集成？

> ID：10131800
> 
> 赞同：6
> 
> 时间：2012-04-12T21:03:28.253
> 
> 标签：tfs, continuous-integration, dynamics-crm, dynamics-crm-2011

我们刚刚开始在本地开发和实施 Dynamics crm 2011。是否可以实现代码签入自动化以将代码从开发系统推广到测试系统？看起来这将涉及包含已签入的开发代码的非托管解决方案的导出/导入。我无法找到有关此功能的 API。

如果那不可能，你能走多远？看起来有 API 可以自动上传 web 资源和插件（例如 sdk 中的 webresourceutility），但是仍然需要手动链接到要使用它们的表单（在 javascript 的情况下） ETC）。是否有人在自动化部分 CRM 环境方面取得了进展？

作为参考，我们正在使用 vs 2010 和 tfs 2010，使用 MSuild 进行当前的持续集成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T12:49:59.547

我们有一些技术可以为我们提供非常稳固的 CI 结构。

**插件**

*   我们所有的插件都是在签入时编译的
*   我们编写的所有插件代码都具有自注册详细信息作为组件的一部分。
*   我们编写了一个工具，将插件播放到数据库中，首先根据自注册详细信息卸载旧插件。

**解决方案**

*   我们在自定义组织中有一个非托管解决方案，该解决方案干净且不包含数据。开发是在这个组织之外进行的。它有实体、表单、Jscript、视图、图标、角色等。
*   这个定制数据库包含我们从第三方导入的所有解决方案，并且定制化到我们的解决方案中，这是最终导入到目的地组织。
*   解决方案导出为托管和非托管并保存到 TFS
*   我们将 JScript 和 SSRS RDL 存储在 TFS 中，并有一个自定义工具在导出之前将它们播放到自定义数据库中。
*   我们还有一个 SiteMap 非托管解决方案，它被导出为非托管（以确保我们得到我们所追求的最终结果站点地图）

**部署**

我们有一个 UI 和命令行驱动的工具，它执行以下操作：-

*   针对特定组织
*   将自定义托管解决方案导入选定的环境。例如测试。另外导入非托管站点地图。
*   卸载现有的解决方案（我们更新 solution.xml 文件，根据导入时的日期/时间为其命名）
*   安装/卸载插件代码
*   安装任何自定义 SQL 脚本（用于 RDL）
*   重新启用重复检测规则
*   播放我们在源代码控制下存储的某些元数据。例如，我们构建的自定义报告实体具有附件和 XML 配置。

它并不完全完美，但通过命令行，我们每晚刷新 TEST 和所有开发人员 PC。每个组织安装和卸载旧解决方案大约需要 1 小时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T05:35:50.730

我们将 CI 广泛用于 Dynamics CRM。对于管理解决方案，我建议使用“干净的”Dynamics CRM 实施，它将成为您的解决方案和“域数据”的主控。有关导入解决方案，请参阅[http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.importsolutionrequest.aspx](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.importsolutionrequest.aspx)。另请查看 - [http://msdn.microsoft.com/en-us/library/hh547388.aspx](http://msdn.microsoft.com/en-us/library/hh547388.aspx)

# php - Foreach 用于数组内的数组

> ID：10131802
> 
> 赞同：6
> 
> 时间：2012-04-12T21:03:31.140
> 
> 标签：php, arrays, foreach

我有一个数组，我对它做了一个 print_r，它返回了这个......

```
Array ( [0] => Array ( [invoiceid] => 2 [client] => Test 1 [invoicedeliverymethod] => email [paymenttimeallotment] => 15 [clientid] => 1 [date] => 2012-04-12 [enddate] => 2012-04-02 00:00:00 [total] => 250.86 [remainingbalance] => 250.86 [ispaid] => No [isagentpaid] => No [datedistributed] => Not distributed [invoicedcontact] => 1 ) [1] => Array ( [invoiceid] => 1 [client] => Test 1 [invoicedeliverymethod] => email [paymenttimeallotment] => 15 [clientid] => 1 [date] => 2012-04-12 [enddate] => 2012-03-31 23:59:59 [total] => 602.29 [remainingbalance] => 602.29 [ispaid] => No [isagentpaid] => No [datedistributed] => 2012-04-12 [invoicedcontact] => 1 ) ) 
```

我试图运行这段代码......

```
 foreach($resultArray as $row => $value){
    echo $value . "<br/>";
} 
```

并返回 Array Array。

如何获取这些数组中的值？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-12T21:05:30.720

您需要迭代内部数组中的元素，如下所示：

```
foreach($resultArray as $row => $innerArray){
  foreach($innerArray as $innerRow => $value){
    echo $value . "<br/>";
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-12T21:04:33.467

```
foreach($resultArray as $row => $value){
    foreach($value as $row2 => $value2)
        echo $value2 . "<br/>";
} 
```

# jquery - 如何在 jquery animate 中使用 css3 转换？

> ID：10131806
> 
> 赞同：1
> 
> 时间：2012-04-12T21:03:46.143
> 
> 标签：jquery, css, transform, jquery-animate

我从[这里](http://www.bkosborne.com/jquery-feature-carousel)有这个旋转木马，我正在尝试向它添加一些 css3 转换选项。

更确切地说：

```
-webkit-transform-style: preserve-3d;
-webkit-transform: rotateY(45deg); 
```

在我的 javascript 中

```
if (newPosition == 1) {
    new_width = pluginData.largeFeatureWidth;
    new_height = pluginData.largeFeatureHeight;
    new_top = options.topPadding;
    new_zindex = $feature.css("z-index");
    new_fade = 1.0;
  } else {
    new_width = pluginData.smallFeatureWidth;
    new_height = pluginData.smallFeatureHeight;
    new_top = options.smallFeatureOffset + options.topPadding;
    new_zindex = 1;
    new_fade = 0.4;
  } 
```

animate 函数在这里运行

```
 .animate(
      {
        width: new_width,
        height: new_height,
        top: new_top,
        left: new_left,
        opacity: new_fade
      } 
```

生成的CSS是：

```
element.style {
    width: 225px;
    height: 115px;
    top: 70px;
    left: 50px;
    opacity: 0.4;
    z-index: 1;
} 
```

现在，所有这些变量都由这个插件计算，我只对向这个动画函数添加转换选项感兴趣，如下所示：

```
....
} else {
    new_width = pluginData.smallFeatureWidth;
    new_height = pluginData.smallFeatureHeight;
    new_top = options.smallFeatureOffset + options.topPadding;
    new_zindex = 1;
    new_fade = 0.4;
    new_transform_style = 'preserve-3d';
    new_transform = 'rotateY(45deg)';
} 
```

和

```
.animate(
      {
        width: new_width,
        height: new_height,
        top: new_top,
        left: new_left,
        opacity: new_fade,
        transform_style = new_transform_style;
        transform = new_transform;
      } 
```

但我不确定这些是动画的正确样式符号

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:09:00.750

默认情况下，您不能在 jQuery 中为旋转/缩放设置动画。

但是有一个插件可以解决这个问题：

[CSS中的动画旋转和缩放](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T20:34:30.593

您可以使用自定义属性`.animate()`并使用 step 函数“手动”执行转换。

有关更多详细信息，请参阅[我的这个 SO 答案。](https://stackoverflow.com/a/21815901/490560)

# asp.net-mvc - .NET EntityFramework：“在提供程序连接上启动事务时发生错误。有关详细信息，请参阅内部异常”

> ID：10131810
> 
> 赞同：0
> 
> 时间：2012-04-12T21:03:58.410
> 
> 标签：asp.net-mvc, entity-framework

当我尝试使用 EF 保存数据时，asp.net 引发异常：.NET EntityFramework：“在提供程序连接上启动事务时发生错误。有关详细信息，请参阅内部异常”</p>

请参阅下面的代码：

```
 foreach (tbCliente itemCliente in listClienteAtual)
                {
                    itemCliente.cod_usuario = idUsuarioAtual;
                    db.ObjectStateManager.ChangeObjectState(itemCliente, System.Data.EntityState.Modified);
                } 
```

# python - python帮助在嵌套for循环中列出值

> ID：10131811
> 
> 赞同：0
> 
> 时间：2012-04-12T21:04:09.100
> 
> 标签：python, list, variables

如何访问我的第二个列表 (val) 中的值？

```
colors = [('teal','30a8a0'),('pink','b33b96'),('red','de3249'),('green','758f3d'),('purple','532c86'),('darkblue','116da4'),('skyblue','1d9dc5')]
darkblue=[('first'),('second')]

for (color,value) in colors:
    print color #teal, pink, red, etc...
    for (val) in {color}:
        print val #first, second, etc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:08:02.963

这个怎么样？

```
subcolors = {'darkblue': ['first', 'second'],
             'teal': ['first-teal', 'second-teal'],
             'pink': ['first-pink', 'second-pink'],
             # etc..
            }

for (color,value) in colors:
    print color #teal, pink, red, etc...
    for val in subcolors[color]:
        print val #first-teal, second-teal, first-pink, second-pink, etc... 
```

通过将颜色放入字典中，我们可以更轻松地检索它们并遍历它们的值。

* * *

如果您真的想从`darkblue`变量中执行此操作并且您不想使用 dict，您可以这样做，但我不推荐它：

```
darkblue = ['first', 'second']
teal = ['first-teal', 'second-teal']
pink = ['first-pink', 'second-pink']
# etc...

for (color,value) in colors:
    print color #teal, pink, red, etc...
    for val in locals()[color]:
        print val #first-teal, second-teal, first-pink, second-pink, etc... 
```

# spring - java.io.FileNotFoundException：类路径资源 [timex-servlet.properties] 无法打开，因为它不存在

> ID：10131812
> 
> 赞同：2
> 
> 时间：2012-04-12T21:04:19.813
> 
> 标签：spring, filenotfoundexception, properties-file, timex

当我尝试启动 Spring Web 应用程序时收到以下错误消息：

```
2012-04-12 13:53:20,491 ERROR [org.springframework.web.servlet.DispatcherServlet] - 

Context initialization failed
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: class path resource [timex-servlet.properties] cannot be opened because it does not exist
java.io.FileNotFoundException: class path resource [timex-servlet.properties] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:137)
    at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:172) 
```

我正在通过 Eclipse 运行 Tomcat（版本 6.x）。我尝试将 timex-servlet.properties 放在以下目录中，但无济于事：

```
WebContent\WEB-INF
WebContent\WEB-INF\classes
WebContent\ 
```

下面是 timex-servlet.xml 中对 timex-servlet.properties 的引用：

```
 <bean id="placeholderConfig"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location"
        value="timex-servlet.properties" />
</bean> 
```

有几个 SO 线程处理相同的消息，说要放置一个类路径：在属性文件引用的前面。所以我尝试了以下方法，但也没有用：

```
 <bean id="placeholderConfig"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location"
        value="classpath:timex-servlet.properties" />
</bean> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T21:50:12.943

确保将文件放在`/WEB-INF/classes`文件夹中并使用`classpath:/timex-servlet.properties`（注意类路径后的斜杠：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T13:40:28.370

如果您不想将其移动到类下并希望将属性文件保留在 WEB-INF/ 下，请尝试以下类路径：../file.properties

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-30T14:24:59.160

不应将您的属性文件放在定义源代码和主要方法的同一位置。它应该放在您的配置文件所在的同一位置（applicationContext.xml）。

在我的情况下，我的属性文件名是 sport.properties（文件的扩展名应该是 .properties）并为项目使用 maven -

1.  **属性文件**的位置-> src->test->java->sport.properties

[属性文件位置](https://i.stack.imgur.com/auxh4.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-25T04:34:34.427

对于 Spring 项目，将文件放在 src 或 src->somefolder->some.properties 文件下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-18T11:09:01.610

就我而言，我的 pom.xml 中缺少一个 cargo-maven2-plugin。可能会帮助陷入困境的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-29T19:12:08.943

只是在这里描述我的情况，也许它会对某人有所帮助:) 使用纯 Java 配置（无 XML）的 Maven 和 Spring MVC。这是我解决问题的步骤：

1）将您的属性文件放在`src/main/resources`文件夹中（如果没有，则手动创建最后一个）。

仔细检查一下，认真的！如果你和我有同样的注意力，那可能是个问题:)

2) 在你的 Java 配置类中添加以下注解： `@PropertySource("classpath:nameOfYourFile.properties")`

3) 更新你的 Maven 项目（在 Eclipse 中：右键单击项目 -> Maven ->更新项目）。

当然，还要检查您的文件名称是否与注释中的名称匹配。
如果您的项目还有其他问题，那么它应该可以工作。

# google-chrome - Chrome 19 中的 Websockets 异常（最新测试版）

> ID：10131814
> 
> 赞同：1
> 
> 时间：2012-04-12T21:04:29.433
> 
> 标签：google-chrome, google-chrome-extension, websocket

几个月来，我一直在毫无问题地使用 websockets 在 Chrome 和我的本地主机应用程序之间进行通信。突然间，使用最新版本的 Chrome，数据传输不顺畅。

在 Chrome 扩展的 javascript 中，代码的相关部分是：

```
window.ws = new WebSocket("ws://localhost:13000/");

window.ws.onopen = function () {
    window.ws.send('GO'); 
```

在我的 C# 应用程序中：

```
string msg = ASCIIEncoding.UTF8.GetString(buffer);
Debug.WriteLine(msg); 
```

几个月来这工作得很好，我会日复一日地得到“GO”。现在我在接收缓冲区上得到的是 4 个字节**`{114,247,7,0)`**，在我能找到的任何编码中都不会转换为“GO”。有人知道会发生什么吗？我很困惑，因为我没有触及代码的任何一端（chrome 或 listener）。

干杯!

PS：完整的 Chrome 版本 19.0.1084.15 beta-m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T08:27:24.783

弄清楚了。原来 Chrome 刚刚默认启用了 websockets 上的压缩。我只需要修改我端的 websocket 服务器以拒绝该扩展，Chrome 就会恢复为纯文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:37:43.693

阅读一些关于掩蔽的数据。浏览器可能会在启用掩码的情况下发送消息，它会在帧中添加额外的 4 个字节，从而将掩码应用于您的消息。浏览器可能已启用或禁用它，因此在服务器端您应该同时支持并使用屏蔽，如果帧包含屏蔽启用位。

查看如何根据[RFC 6455应用屏蔽](https://www.rfc-editor.org/rfc/rfc6455#page-32)

# javascript - 地图标记getPosition（）在第一次调用函数时不适用于谷歌地图

> ID：10131815
> 
> 赞同：0
> 
> 时间：2012-04-12T21:04:30.577
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我试图在我的地图上放置一个标记，然后使用该标记的位置来绘制一些多边形。但是，marker.getPosition() 最初似乎没有返回值。我需要再次调用该函数以获取先前的标记位置。有没有人对为什么会这样有任何建议

```
function codeAddress() {
  var address = fubar;
  geocoder.geocode( { 'address': address}, function(results, status) {
      map.setCenter(results[0].geometry.location);
      map.setZoom(1);
      if (marker == null){
        marker = new google.maps.Marker({
          map: map,
        });
      }
      marker.setPosition(results[0].geometry.location);
  });
  document.write(marker.getPosition());   //this displays nothing
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:10:49.300

谷歌地图正在使用回调，（[参见文档中的参数 2](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)），因为它[不是同步](https://en.wikipedia.org/wiki/Asynchronous_I/O)的。这`function(results,status)`就是魔法发生的地方。它在 Google 对地址进行地理编码时运行。在那之前，你没有什么可以展示的。

尝试这个：

```
function codeAddress() {
    var address = fubar;
    geocoder.geocode( { 'address': address}, function(results, status) {
        map.setCenter(results[0].geometry.location);
        map.setZoom(1);
        if (marker == null){
            marker = new google.maps.Marker({
                map: map,
            });
        }
        marker.setPosition(results[0].geometry.location);
        alert("Alert 1");
        alert(marker.getPosition());
    });
    alert("Alert 2");
} 
```

你会看到它`alert("Alert 2")`出现在之前`alert("Alert 1")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T13:00:26.010

您可以利用 $.Deferred()

```
function codeAddress() {
  var address = fubar;
  var d = $.Deferred();
  var marker;

  geocoder.geocode( { 'address': address}, function(results, status) {
      map.setCenter(results[0].geometry.location);
      map.setZoom(1);
      if (marker == null){
        marker = new google.maps.Marker({
          map: map,
        });
      }
      marker.setPosition(results[0].geometry.location);
      d.resolve();
  });
  d.done(function(){
      document.write(marker.getPosition());
  });
} 
```

# iphone - 加载多个 MPMoviePlayerController 并将它们正确设置为空闲，而不会发生崩溃和消失的控件

> ID：10131818
> 
> 赞同：1
> 
> 时间：2012-04-12T21:04:33.730
> 
> 标签：iphone, mpmovieplayercontroller

所以，我已经阅读了文档并且知道这一点：[Multiple MPMoviePlayerControllers on iOS 3.2/4.0](https://stackoverflow.com/questions/3716352/multiple-mpmovieplayercontrollers-on-ios-3-2-4-0)（另外，通过文档我是指苹果的）

不幸的是，调试这是地狱 bc：[Xcode IPHONE 中的引导服务器错误](https://stackoverflow.com/questions/3905718/bootstrap-server-error-in-xcode-iphone)

因此，每运行 5 次左右，我就必须重新启动机器。

但主要问题是，我正在加载很多容器（只是视图）。在这些容器中，可能有一些带有 MPMoviePlayerController 的东西，我把它变成了一个自定义类。无论如何，它工作正常，播放电影就好了。

在任何给定时间，屏幕上最多可能有三个。（我使用分页，并卸载远处的那些）。所以有可能有 3 部电影，都连接到下载的数据。

他们玩，但当然，一次只玩一个。不是问题。只有一个包含视图处于活动状态。

当视图更改“页面”（它是 UIScrollView）时，我手动将“局外人”设置为非活动状态。本质上，它在 MPMoviePickerController 上调用“停止”。这停止了​​它，但我无法恢复。控件从字面上消失了，我无法恢复。（iOS 错误？）

所以我改为叫暂停。一样。

我回去玩它，它不会玩。

这是一个有趣的，暂停一个，然后去玩另一个。碰撞。AVPlayerItem 无法一次播放 2 个。由于需要 2 部电影或诸如此类的东西，我已经对自定义 AV 电影播放器​​进行了编程，如果这不起作用，我将再次这样做。Anywho...为什么两个控制器使用相同的播放器项目，我只能猜测 Apple 在一个非常糟糕的地方使用了单例。

因此，苹果文档清楚地表明我可以加载任意数量的内容，但只能播放一个。不幸的是，它没有说明如何正确暂停它们，因为控件消失了。

任何人都知道这是否是一个错误？或者除了暂停和停下来尝试之外还有什么？

如果没有，我可能会求助于 AV 的东西。无论如何，如果不是为了重新启动，我现在会尝试某种形式的简历，试图得到答案而不仅仅是一个问题。感谢您的任何提示/建议！

如果我找到它会告诉大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:40:56.917

好的，所以这是一种奇怪的解决方法，基本上是照常做。我的自定义视图卸载整个控制器，然后将其设置为 nil（如果您不设置为 nil，即使打算重新加载，也无法在不崩溃的情况下对其进行测试）。

所以，一旦我的视图离开屏幕，我就会向它发送“卸载自己”的消息。它缓存 URL 的名称，然后当我将其设置为活动时，它会重新加载并重新分配所有内容。

一切看起来都很好，不幸的是我不知道我会做什么，除了放置一个覆盖，如果我把它们都放在屏幕上。这真的只是看起来很流畅，因为我的东西不在屏幕上。

解决了这个例子。我可以向任何想要使用 AVPlayer 的人推荐。了解了使用layerClass来改变底层，添加item，记得做好记忆后，就不难了。在文档中复制苹果的示例代码...

并准备弄乱纵横比...

感谢您的评论！

# backbone.js - 在集合上使用重置与添加 - 为什么它们差异如此之大？

> ID：10131819
> 
> 赞同：2
> 
> 时间：2012-04-12T21:04:41.590
> 
> 标签：backbone.js

**修改后的问题**

collection.reset 方法与 collection.add 方法。两者都将模型列表作为输入。但是，当发出单个“重置”事件时，重置会像这样返回对象。

```
{d,
_byCid: Object,
_byId: Object,
_callbacks: Object,
length: 3,
models: Array[3],
__proto__: x} 
```

然而，add 方法返回一个简单的数组，在上面的 models:Array[n] 对象中可以看到。然后很容易做一些你在下面我的示例代码中的 addRender 方法中看到的事情。然而，当尝试做同样的事情时，必须做额外的工作来获取和处理相同的模型列表。

*要回答的问题：为什么这些方法（添加和重置）在做类似的事情时会返回两种不同的对象？添加，添加模型列表。重置，核对您现有的收藏并用模型列表替换它。`this`当模型是从添加触发器返回的内容时，从重置触发器返回的用途是什么。返回集合对象而不是模型有什么好处（请举个例子）？*

---下面的原始问题---

我正在学习如何使用backbone.js，并且一直在尝试使用集合。我发现通过调用 foo.add() 很容易将很多模型添加到集合中，其中 foo 是一个集合。我发现虽然执行 foo.reset() 并没有像我期望的那样采用相同的输入。EG，使用新的模型列表或哈希重置集合，即使根据主干js文档：

> 一次添加和删除一个模型很好，但有时您有太多模型要更改，您宁愿只批量更新集合。使用 reset 将集合替换为新的模型列表（或属性哈希）

那里的关键词是列表。我可以将模型列表发送到 add() 并且效果很好。但是，要使用重置做同样的事情，需要使用不同的模板来处理该数据，因为它与模板不同。我创建了一个 jsfiddle 来演示：

[http://jsfiddle.net/pLytF/2/](http://jsfiddle.net/pLytF/2/)

令我沮丧的是，我认为 reset() 的行为应该与 add() 完全一样，但似乎并非如此，而且我想不出一个很好的理由。我要解决这个问题了吗？

**更新** 我相信我已经开始回答我自己的问题了。在主干.js 的源代码中，在 reset 方法的第 745 行，您会发现：

```
if (!options.silent) this.trigger('reset', this, options); 
```

在第 631 行，您将在 add 方法中看到：

```
model.trigger('add', model, this, options); 
```

这第一个来自 reset 方法，第二个来自 add 方法。在重置的情况下，“this”被传递，它与 add 传递的结构不同。Add 传递单个模型，而 reset 传递一个对象，该对象具有指向所有模型数组的属性。这解释了我在 jsfiddle 中看到的内容。我不确定这是文档中实际描述的行为。唔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:48:31.097

~~不确定你的问题到底是什么。~~

**发布编辑**

[在重置事件](http://documentcloud.github.com/backbone/#FAQ-events)中传递的对象是集合本身。

如果要对该集合中的模型进行操作，可以使用 get them through `collection.models`。您可以访问Collection 上的所有[下划线继承方法](http://documentcloud.github.com/backbone/#Collection-Underscore-Methods)`each`，例如, `map`, `filter`, `find`。

您处理重置事件的代码可能类似于：

```
resetRender: function(collection) {
  collection.each(function(model){
      this.addRender(model);
  });
  return this;
} 
```

**原来的**

`Add`将模型添加到现有模型集合中，保留集合中已有的任何模型。 `Reset` **用传递给重置的模型或对象替换**当前模型集，它不保留集合中的任何现有模型。

添加会为添加的每个模型触发一个“添加”事件。

重置触发整个集合的单个“重置”。

它们的存在是为了做完全不同的事情。

重置通常用于批量加载包含一组数据的集合 - 例如，如果您已将初始页面加载作为 javascript 变量提供了一堆引导数据，并且您希望使用该数据填充集合。`{add: true}`除非指定了该选项，否则重置还用于在获取后填充集合。

想象一下用户故事：

> 给定一个包含模型 A、B、C 的集合。
> 
> 我希望集合现在包含模型 X、Y、Z

不使用重置，您将不得不（在伪代码中）

```
while collection.length
  collection.pop()
collection.add([X,Y,Z]) 
```

使用重置，您只需执行以下操作：

```
collection.reset([X,Y,Z]) 
```

第一个触发 6 个事件，第二个触发 1 个。

重置只是盒子中的另一种工具，用于做需要做的事情。

# vb.net - VB.NET ADO 数据消失问题

> ID：10131820
> 
> 赞同：0
> 
> 时间：2012-04-12T21:04:46.143
> 
> 标签：vb.net, data-binding, datagridview, ado.net, combobox

我有一个绑定的 datagridview 和一个带有表格的数据集。

我有两组组合框绑定到表中的同一字段“餐厅”（相互镜像）。

在“NewEmployeeRestaurant”组合框中，我更改了值，它反映在 datagridview 中。我可以四处点击其他员工的 datagridview，但是当我返回我更改的员工时，该值仍然是我更改的值。世界上一切都很好。

但是，当我转到具有相同设置的“EmployeeRestaurant”组合框时，我更改了值，它反映在 datagridview 中。到目前为止，一切都很好。但是当我去找另一个员工然后点击我改变的那个员工时，datagridview 仍然显示新值但是组合框是空的！不酷！

我什至尝试复制正在工作的组合框对象并使用它，但我遇到了同样的问题。我傻眼了。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:52:03.097

已解决：我认为这是 VS 中的某种错误。我有一个与其他绑定组合框绑定到同一张表的组合框。出于用户功能的原因，我使 groupbox 可见 = false。当我将该组框默认为可见 = true 时，原始组合框起作用了。

我被这些 VS 错误弄疯了，但总的来说还是很感谢这个工具。我希望这对将来的某人有所帮助。

# matlab - 如何在MATLAB中获得最小二乘回归线的斜率和截距？

> ID：10131823
> 
> 赞同：1
> 
> 时间：2012-04-12T21:05:00.250
> 
> 标签：matlab

我一直无法让 MATLAB 根据二维散点图泄露最小二乘回归线的斜率和截距。这看起来应该比实际情况更容易，但是 MATLAB 为回归提供的所有现有工具都倾向于假设我正在做比我想做的更复杂的事情。我应该能够从类似的设施中获得它`lsline`，但是 IDE 很难使用源代码获得它。有谁知道一个快速而肮脏的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:12:54.303

您是否只是试图从散点图中直观地估计回归？如果没有，您可以使用该`polyfit()`函数来获取您的估计值。或者更好的是，只需编写自己的函数。如果您制作一列 1，然后将您的独立轴变量放入相邻的列中，并调用该矩阵 X，并将您的因变量存储在一个名为 Y 的列向量中，那么只需计算`beta = (X'*X)\(X'*Y)`. 的第一个条目`beta`给出截距，随后的条目给出回归变量的系数。

# php - CodeIgniter：会话在谷歌浏览器中不起作用

> ID：10131824
> 
> 赞同：0
> 
> 时间：2012-04-12T21:05:02.937
> 
> 标签：php, codeigniter, session, cookies

浏览器曾经成功地获得了一个 cookie（如何？什么时候？我真的不知道。我只能说在某个时间，我意识到我的网站不再在 chrome 中工作）。现在 chrome 在开发工具中一直显示：“此站点没有 cookie”。

它在 explorer / firefox / safari 等中运行良好......

由于 CI 会话库使用 cookie 并且我的所有页面都使用会话库，我真的需要解决这个问题。

这是我的配置（数据库表存在，有效，通常 cookie 是加密的）

```
$config['sess_cookie_name']     = '[mydomain]sessions';
$config['sess_expiration']      = 60*60*24*7; // one week
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = '[mydomain]sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = FALSE;
$config['sess_time_to_update']  = 300; 
```

这是cookie配置

```
$config['cookie_prefix']    = "";
$config['cookie_domain']    = "[mydomain.com]";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE; 
```

当用户登录时，它会：

```
$query = $this->db->get_where('user', array('id' => $logged_in_user_id));
$row = $query->row();
$this->session->set_userdata('user_id', $row->user_id);
redirect(base_url(), 'location'); 
```

当用户注销时，它会：

```
$this->session->sess_destroy();
redirect(base_url(), 'location'); 
```

这很简单，我想这是应该这样做的方式吗？知道为什么它在 chrome 中不起作用，但在 firefox / explorer / safari 中完美运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:58:56.070

尝试在这一行添加一个点：

```
$config['cookie_domain']    = ".[mydomain.com]"; 
```

我的配置是相同的，它适用于谷歌浏览器，但我有这些不同的：

```
$config['sess_expiration']      = 86400;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE; 
```

我希望它有效:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-01T08:52:13.213

添加`ob_start()`在会话库之上。

```
ob_start();
$this->load->library('Session'); 
```

并添加`ob_clean()`您的会话破坏部分

```
$this->load->driver('cache');
$this->session->sess_destroy();
$this->cache->clean();
ob_clean(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T06:47:00.373

通常你（过去我有）通过延长会话到期来解决（d）它，但我看到你的已经设置为一周。试着缩短一点？例如：

```
$config['sess_expiration'] = 8600; 
```

或者，您可以尝试关闭加密 cookie，因为我刚刚在 CI 论坛上看到其他人已通过此方法解决了该问题：

```
$config['sess_encrypt_cookie'] = FALSE; 
```

希望我有所帮助。让我知道它对你有什么好处:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-11T05:47:10.450

转到配置，如果您在本地系统上使用，只需替换它：

```
$config['cookie_prefix']    = 'your_prefix';
$config['cookie_domain']    = 'localhost';
$config['cookie_path']      = '/folder_name/';
$config['cookie_secure']    = FALSE;
$config['cookie_httponly']  = FALSE; 
```

或者，如果您在服务器上使用它，只需将其替换为：

```
$config['cookie_domain']    = 'localhost';
to
$config['cookie_domain']    = '.localhost'; 
```

希望它会帮助你。

# asp.net - 根据选中的单选按钮启用文本框

> ID：10131827
> 
> 赞同：2
> 
> 时间：2012-04-12T21:05:25.633
> 
> 标签：asp.net, vb.net, visual-studio

我有一个列出不同业务类别的单选按钮列表。最后一个选项是`Other`类别。当用户选择`Other`类别时，我希望能够启用一个文本框，然后用户可以输入更多信息来解释`Other`选择。

目前，我正在尝试

```
 If rblCategory.SelectedIndex = 20 Then
        txtOther.Enabled = True
        lblOther.Text = rblCategory.SelectedItem.Text()
    End If 
```

在这段摘录中，我基于索引，但我也尝试基于 Text 字段和 Value 字段，但我仍然没有让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:21:27.497

如果你的断点没有被命中，这是一个很好的线索，表明更大的事情是错误的。您使用的所有控件是否都具有 ViewStateEnabled=true？对于单选按钮列表，我认为您可能需要设置 CausesValidation=true 和 AutoPostBack=true。某些控件默认情况下不会回发，我认为这可能是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:18:52.400

您可以通过简单地连接到最后一个单选按钮的 OnCheckChanged 事件来简化此操作。

```
Private Sub OtherRadioButton_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles OtherRadioButton.CheckedChanged
    Dim r As RadioButton = CType(sender, RadioButton)

    txtOther.Enabled     = r.Checked
    lblOther.Text        = r.Text
End Sub 
```

# asp.net-mvc - MVC3、RequireHttps 和自定义处理程序导致 http 310

> ID：10131830
> 
> 赞同：2
> 
> 时间：2012-04-12T21:05:34.323
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, https

我正在尝试构建一个使用 SSL 连接的 Web 应用程序。所以我做了一些研究，发现我可以使用 RequireHttpsAttribute 类来实现我所需要的。问题是当我使用它时，应用程序的执行会导致 310 错误（重定向太多）。我什至构建了一个自定义类来处理从 http 到 https 的切换。但这也会导致错误。

我的类来处理协议切换：

```
Public Class RequireSSLAttribute
    Inherits ActionFilterAttribute

    Public Property IsRequired() As Boolean

    Public Overrides Sub OnActionExecuting(filterContext As ActionExecutingContext)
        If Me.IsRequired AndAlso filterContext.HttpContext.Request.Url.Scheme <> "https" Then
            filterContext.HttpContext.Response.Redirect(filterContext.HttpContext.Request.Url.OriginalString.Replace("http:", "https:").Remove(filterContext.HttpContext.Request.Url.OriginalString.LastIndexOf(":") + 1), True)
            filterContext.Result = New HttpUnauthorizedResult
        End If
    End Sub

    Public Sub New()
        IsRequired = True
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T17:20:04.443

我不知道您的主机是谁，但我刚刚在[AppHarbor上遇到了类似的问题，并在他们的](https://appharbor.com/)[知识库](http://support.appharbor.com/kb/tips-and-tricks/ssl-and-certificates)中发现了这一点：

> 如果您使用内置的 RequireHttpsAttribute 来确保控制器操作始终使用 HTTPS，您将遇到重定向循环。原因是 SSL 在负载均衡器级别终止，并且 RequireHttps 无法识别它用来指示请求是使用 HTTPS 发出的 X-Forwarded-Proto 标头。因此，您应该为此目的使用自定义 RequireHttps 属性。

他们还在 Github 上提供了一个示例解决方案，为方便[起见](https://gist.github.com/915869)，我将在下面复制：

```
using System;
using System.Web.Mvc;
using RequireHttpsAttributeBase = System.Web.Mvc.RequireHttpsAttribute;

namespace AppHarbor.Web
{
    [AttributeUsage(
        AttributeTargets.Class | AttributeTargets.Method,
        Inherited = true,
        AllowMultiple = false)]
    public class RequireHttpsAttribute : RequireHttpsAttributeBase
    {
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            if (filterContext == null)
            {
                throw new ArgumentNullException("filterContext");
            }

            if (filterContext.HttpContext.Request.IsSecureConnection)
            {
                return;
            }

            if (string.Equals(filterContext.HttpContext.Request.Headers["X-Forwarded-Proto"],
                "https",
                StringComparison.InvariantCultureIgnoreCase))
            {
                return;
            }

            if (filterContext.HttpContext.Request.IsLocal)
            {
                return;
            }

            HandleNonHttpsRequest(filterContext);
        }
    }
} 
```

我不确定这是否能解决您的问题；但也许即使您没有使用 AppHarbor，根本原因对您来说也可能是相同的，在这种情况下，上述情况似乎值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:56:50.887

尝试将其更改为

```
If Me.IsRequired AndAlso filterContext.HttpContext.Request.Url.Scheme <> "https" Then
    secureUrl = filterContext.HttpContext.Request.Url.OriginalString.Replace("http:", "https:").Remove(filterContext.HttpContext.Request.Url.OriginalString.LastIndexOf(":") + 1)
    filterContext.Result = new RedirectResult(secureUrl)
End If 
```

# java - JPA 获取一对多

> ID：10131845
> 
> 赞同：7
> 
> 时间：2012-04-12T21:06:39.860
> 
> 标签：java, hibernate, jpa

我有以下实体：事件和属性。一个事件可以有很多属性。

我遇到的问题是，我似乎找不到在单个 SQL 查询中返回事件及其属性的查询。我可能有数百万个需要迭代的事件，出于明显的性能原因，我不想延迟加载它们。

我尝试在查询中使用 fetch，但它为每个属性返回一个事件。即，如果一个事件有 2 个属性，它将返回 2 个事件，每个事件都有一个属性。

我想要的是一个具有 2 个属性的事件。

```
SELECT e FROM Event e LEFT JOIN FETCH e.attributes 
```

如果我添加 DISTINCT 它可以工作，但是它会创建一个独特的 SQL 查询，这在大型数据集上非常慢。

```
public class Event {
  @OneToMany(mappedBy = "event", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
  public Set<Attribute> getAttributes(){}
}

public class Attribute {
    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name = "event_id", nullable = false)
    public Event getEvent() {
        return event;
    }
} 
```

**解决方案**

我找不到 JPA 解决方案。相反，我将 EntityManager 解包到 Hibernate 会话，并按照@milkplusvellocet 的建议使用标准的结果转换器。这将检索不同的根实体，而无需创建不同的 SQL 查询。

```
Session session = em.unwrap(Session.class);
Criteria criteria = session.createCriteria(Event.class);
criteria.setFetchMode("attributes", FetchMode.JOIN);

criteria.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY); 
```

需要注意的一件事是，我尝试从展开的会话中使用 HQL。我将 DISTINCT 添加到查询中，并将结果转换器设置为 DISTINCT_ROOT_ENTITY，类似于上面的标准解决方案。这样做**仍然会**创建一个独特的 SQL 查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T21:16:51.560

你需要一个`ResultTransformer`.

尝试以下 HQL：

```
SELECT DISTINCT e FROM Event e LEFT JOIN FETCH e.attributes 
```

这相当于`CriteriaSpecification.DISTINCT_ROOT_ENTITY`在条件查询中使用。

# xml - XML 文件不会得到验证

> ID：10131846
> 
> 赞同：1
> 
> 时间：2012-04-12T21:06:44.257
> 
> 标签：xml, validation, xsd, dtd

给定以下 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Clients SYSTEM "bank.dtd">
<Clients>
    <account>
        <number>323</number>

        <client>
            <address>
                <street>Sliders</street>
                <city>Tokyo</city>
            </address>
            <identity>1212</identity>
        </client>

        <client>           // HERE IS THE PROBLEM
            <address>
                <street>Jason</street>
                <city>Paris</city>
            </address>
            <identity>1313</identity>
        </client>

        <totoalSum>43333</totoalSum>
    </account>
</Clients> 
```

及其DTD文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!ELEMENT Clients (account+)>
<!ELEMENT account (number,client,totoalSum)>
<!ELEMENT client (address,identity)>
<!ELEMENT address (street,city)>
<!ELEMENT number (#PCDATA)>
<!ELEMENT street (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT identity (#PCDATA)>
<!ELEMENT totoalSum (#PCDATA)> 
```

我无法对其进行验证。XMLspy 说：

```
Content model of element 'account' disallows element 'client' at this position. 
```

这样，有问题的行在上面用“HERE”标记。

知道是什么原因造成的吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:10:03.133

`client`一个元素中有 2个`account`元素。那就是问题所在！

尝试`DTD`用这个改变：

```
<!ELEMENT account (number,client+,totoalSum)> 
```

# mysql - MySql 语法（加入，UNION ALL）？

> ID：10131850
> 
> 赞同：0
> 
> 时间：2012-04-12T21:06:58.003
> 
> 标签：mysql

好的。所以我有一个名为 jos_sobi2_fields_data 的表，其中包含多个 fid 和部分。例如，fid=36 中的 baseDate 包含“名称”，fid=39 中的 baseData 包含“地址”它。到目前为止我已经尝试过

```
Select baseDate 
from jos_sobi2_fields_data 
WHERE fid=36 
and section = 54; 
UNION ALL 
Select baseData 
from jos_sobi2_fields_data 
WHERE fid=39 
AND section = 54; 
```

但是当我查询它时，它首先列出来自fid = 36的baseData，然后在它下面列出来自fid = 39的baseData。那么我如何让它两个将两者分开成单独的列呢？

PS 该部分仅涉及来自一个特定网站的信息，因此另一个网站可能是 section = 52。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:12:14.850

你应该只使用一个连接......可能是这样的：

```
SELECT jsfdName.baseData AS Name, jsfdAddr.baseData as Address
FROM jos_sobi2_fields_data AS jsfdName
JOIN jos_sobi2_fields_data AS jsfdAddr USING( section, sid )
WHERE jsfdName.fid = 36 AND jsfdAddr.fid = 39
    AND section = <section> 
```

替换`<section>`为节号（或准备好的语句占位符，甚至更好）。

# ruby-on-rails - 如果我已经有一个没有任何测试的大型代码库，如何开始编写测试？

> ID：10131853
> 
> 赞同：2
> 
> 时间：2012-04-12T21:07:09.440
> 
> 标签：ruby-on-rails, unit-testing, testing, tdd

我一直在想“测试？我不需要任何该死的测试！我没有它就可以了！”

然后我的代码变长了。

现在我意识到为什么编写测试很重要。我总是害怕一点点改变会导致破坏某些东西。我真的很想开始写测试。但是代码库已经变得如此之大，以至于我真的不知所措。我不知道从哪里开始。其中大部分我什至不记得我为什么要这样编码，所以如果我开始回去编写测试，那将需要很长时间。

如果我已经有一个庞大的代码库，有人可以就如何开始编写测试提供建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:39:56.407

首先，我建议您阅读[WELC 书](https://rads.stackoverflow.com/amzn/click/com/0131177052)，它在您的情况下应该会派上用场。

下一次接触代码时开始，下一次需要更改代码中的某些内容时，请先为其编写测试，然后继续围绕您必须更改、更新、修复或添加的所有内容编写测试。这样，随着时间的推移，您将向所有正在发生变化的区域添加测试，并且在为其余代码编写测试时似乎不会那么不堪重负。

但是，我要重申，我链接到遗留代码的这本书将非常有帮助，因为它详细介绍了解决这个问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:08:36.427

编写测试，尤其是好的测试需要很多时间，有时可能会花费 50% 的开发时间/成本，有时甚至更多。我将首先为您的所有函数编写单元测试，并尝试获得尽可能多的语句覆盖率。如果你不知道一个方法是如何工作的，它可能没有很好的文档和/或编写，你最好还是重写它。

这不是对这个问题的直接回答，而是一个小建议：你现在真的应该花时间修复和清理你的代码，否则它将继续失控。代码不会因为写更多代码而变得更好，它只会变得更糟，如果你想让它变得更好，你必须回去重写它。

# android - 从 sqlite 调用图像到 ViewFlipper

> ID：10131854
> 
> 赞同：1
> 
> 时间：2012-04-12T21:07:10.077
> 
> 标签：android, sqlite

我正在为我的学校项目制作一个应用程序，它基本上是一个家用电器的瓦数计算器。我的`ViewFlipper`. 有没有办法创建一个搜索界面来调用这些图像，而不是翻阅所有图像来找到它？我浏览了几个网站，了解到为了使用搜索界面，我需要将我的图像存储在数据库中。它是如何工作的？还有另一种方法吗？或者真的可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:03:46.583

我不知道您对搜索界面的理解是什么。一种选择是使用 a[`Gallery`](http://developer.android.com/reference/android/widget/Gallery.html)而不是您当前的`ViewFlipper`（这是一个可以在您的应用程序中使用[的真正简单的教程）。](http://developer.android.com/resources/tutorials/views/hello-gallery.html)小`Gallery`部件将让用户通过简单的滚动快速移动到所需的图像`Gallery`（另一个优点是用户在滚动时可以看到图像）。

`ViewFlipper`此外，您可以使用`Spinner`+ one代替`ImageView`。（ Here is `Spinner`a [tutorial](http://developer.android.com/resources/tutorials/views/hello-spinner.html)）将让用户选择一个设备的名称，当这种情况发生时，您会找到用户选择的位置（从`Spinner`and 映射到 a `HashMap`（作为键的位置`Spinner`和作为值图像的 ID））并`ImageView`使用正确的设备图像更新。

还有其他方法，但实施起来更复杂。

# ios - 推送通知处理

> ID：10131856
> 
> 赞同：38
> 
> 时间：2012-04-12T21:07:15.120
> 
> 标签：ios, push-notification

我正在阅读 Apple 的文档

[处理本地和远程通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)

在我看来，有相互矛盾的陈述。有人可以清除这些混淆点吗？现在让我们严格地谈谈远程通知（相对于本地）。

文档说，如果按下通知上的操作按钮，它会调用 application:didFinishLaunchingWithOptions 并传入通知有效负载。后来它说如果应用程序在前台运行，它会通过 application:didReceiveRemoteNotification: 传递通知。这对我来说意味着当应用程序在后台运行或未运行时，会调用 application:didFinishLaunchingWithOptions。否则，调用 application:didReceiveRemoteNotification:。

后来，有一个 iOS Note 说如下：

"iOS 注意：在 iOS 中，您可以通过检查应用程序的状态来确定应用程序是否由于用户点击操作按钮而启动，或者通知是否已传递到已运行的应用程序。在委托的应用程序实现中:didReceiveRemoteNotification: 或 application:didReceiveLocalNotification: 方法，获取 applicationState 属性的值并评估它，如果值为 UIApplicationStateInactive，则用户点击了操作按钮；如果值为 UIApplicationStateActive，则应用程序在收到通知时位于最前面。 "

这对我来说意味着 application:didReceiveRemoteNotification: 在应用程序已经处于前台时以及如果用户按下操作按钮（或在 iOS 5 中滑动操作滑块）以前台/启动应用程序时调用。

我的困惑的根源可能在于文档暗示通知有效负载与 application:didFinishLaunchingWithOptions: 方法一起发送的第一部分，或者对“正在运行”的应用程序的误解（后台应用程序是否被视为“正在运行”？） . application:didReceiveRemoteNotification: 的文档声明它被称为“运行”应用程序。

所以，总而言之，我能否澄清一下：

1) application:didReceiveRemoteNotification: 是否总是在应用程序处于前台或用户选择对通知“采取行动”时调用？如果不是，我们如何理解 iOS Note 关于确定应用程序状态是活动还是非活动的意义？

2）后台应用程序是否“正在运行”，至少在文档声称应用程序的意义上：didReceiveRemoteNotification 被称为运行应用程序？

3) 为了完成，后台应用程序 UIApplicationStateInactive 还是 Active？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-24T21:28:24.607

这里的措辞令人困惑，尤其是围绕背景这个词。

当应用程序确实没有加载到内存中时（例如，当您启动它时会显示启动画面等），然后调用 application:didFinishLaunchingWithOptions，您可以获得推送通知，如下所示：

```
NSDictionary *remoteNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

if(remoteNotif)
{
    //Handle remote notification
} 
```

如果应用程序加载到内存中并且处于活动状态（例如应用程序当前在设备上打开），则仅`application:didReceiveRemoteNotification:`调用。

如果应用程序已加载到内存中但不是 ACTIVE 且不是背景（例如，您启动了应用程序，然后按下主页按钮，并等待 10 秒），然后您单击推送通知上的操作按钮，仅调用 didReceiveRemoteNotification .

您可以按如下方式捕获此案例：

```
-(void)application:(UIApplication *)app didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if([app applicationState] == UIApplicationStateInactive)
    {
        //If the application state was inactive, this means the user pressed an action button
        // from a notification. 

    //Handle notification
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-17T05:23:50.817

根据 iOS 9.1 场景，我已经在 Kill 模式下测试了推送通知，如果我点击推送通知，我的应用程序当时没有以任何模式运行，而不是系统首先调用，

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary *)userInfo{

//your code execution will here.

} 
```

第二个方法调用将是，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

//Your initial code execution.

} 
```

我在我的应用程序中测试过这个场景。

# .net - 如何在远程 AppDomain 中创建满足导入的自定义 ComposablePart？

> ID：10131860
> 
> 赞同：1
> 
> 时间：2012-04-12T21:07:38.803
> 
> 标签：.net, c#-4.0, mef, remoting

我创建了一个自定义`ComposablePartCatalog`,`ComposablePartDefinition`和`ComposablePart`.

这些都一起工作，以便在单独的 AppDomain 中创建组合部分。所有这些都在工作。问题是当一个包含导入的导出类型的实例（即一个具有导入属性的字段）被创建时，该字段没有被设置为预期的导入类型，即它为空。

当我不使用我的 custom`ComposablePartDefinition`时，即让它做默认组合时，会创建导入，因此它与类型无关。所以它一定是我在我的自定义 Composable 类中缺少的东西。

我不是这方面的专家，我一直在网上搜索有关创建`ComposablePart`满足导入的自定义的任何信息，但可以找到有关如何正确执行此操作的任何信息。

在我的 custom`ComposablePart`中，我重写`GetExportedValue`了 which 返回导出类型的实例，只要导出的类型不导入任何内容，它就可以正常工作。

我显然遗漏了一些重要的东西，但我找不到解释如何创建导入的文档。

在 中`ComposablePart`，有`SetImport`覆盖，但我应该如何在派生类中实现它？这是让我的导入工作的关键吗？`GetExportedValue`或者当我实际创建导出类型的实例以使其“组合”其导入时，我是否需要做一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:48:15.080

我已经自己想通了。在创建远程实例的“远程”上下文中`AppDomain`，我需要使用新目录（我使用从调用域传递的信息创建）和`CompositionContainer`将远程实例传递给构造函数的新目录来组合远程实例。

# ios - ios5中的自动旋转——失败的最常见原因？

> ID：10131869
> 
> 赞同：1
> 
> 时间：2012-04-12T21:08:01.527
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, orientation, autorotate

我对 ios 中自动旋转的实现感到困惑。
我有一个 UIViewController，我告诉它在 shouldAutoRotateToInterfaceOrientation 内部自动旋转。但是，它不起作用。所以我读了一些关于我需要如何查看导航堆栈和/或是否使用了 UITabBarController 的内容，因为众所周知这会导致各种混乱（举手）。

事实上，我有一个 UITabBar 和一个 UINavigationController。我要旋转的 UIView 被推入堆栈三或四个“级别”深。

为什么自动旋转不完全由当前 UIViewController 中的 shouldAutoRotateToInterfaceOrientation 返回的内容决定？

来自位于以下位置的苹果技术文档： [https](https://developer.apple.com/library/ios/#qa/qa2010/qa1688.html) ://developer.apple.com/library/ios/#qa/qa2010/qa1688.html关于为什么 UIViewController 在您期望它时可能不会旋转：

> > 您的 UITabBarController 或 UINavigationController 中的所有子视图控制器不同意共同的方向集。
> 
> 为确保您的所有子视图控制器正确旋转，您必须为代表每个选项卡或导航级别的每个视图控制器实现 shouldAutorotateToInterfaceOrientation。每个人都必须同意相同的方向才能发生旋转。也就是说，对于相同的方向位置，它们都应该返回 YES。

有人可以总结一下我们在使用 UITabBars 和 UINavigationControllers 时需要注意的事实吗？人们通常在哪里搞砸，或者什么是混乱点？

如果您有一个 UITabBar、UITabBarController 或 UINavigationController，它的所有子视图都需要具有相同的自动旋转行为。但是你肯定可以让一些子视图旋转而其他子视图不旋转，对吧？

我怀疑失败的常见原因与对响应链的理解不够好有关，因为它适用于自转。如果是这样，有人可以帮我解决这个问题吗？然后我也许能够弄清楚“选择性自转”。

除此之外，其他帖子表明您必须继承 UITabBarController 并覆盖 shouldAutorotateToInterfaceOrientation。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:32:27.900

我认为您希望他们都以相同的方式响应的原因是因为这对用户来说很尴尬。如果您在可以旋转的特殊视图上处于横向模式，当您将该视图控制器弹出到导航控制器上的父级或点击没有横向模式的选项卡时，这将是一种奇怪的体验。

我认为这就是其中的原因。

但是，如果需要，您可以捕获设备方向通知并自行处理它们，如果设备在您要旋转的特定视图上旋转，则可以推送新视图。

用这个：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(rotationDetected) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

然后创建一个函数`rotationDetected`来处理我们旋转时发生的事情......就像这样：

```
-(void) rotationDetected {

    if (([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft) || ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)){

    //Push on the view in landscape orientation if we aren't there already

} else if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait || [[UIDevice currentDevice] orientation] == UIDeviceOrientationPortraitUpsideDown) {

    //If the landscape view is present, pop it back to the portait view  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:27:31.083

我的2美分...

UIViewControllers 呈现的视图，当连接到 UITabBarController 和 UINavigationController 时，不是静态的，而是动态的。我的意思是你必须认为用户可能会在你的视图之间切换。如果其中一些旋转而另一些不旋转，则您的 GUI 应该是混乱的，至少在 Apple 看来是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T16:08:17.590

我遇到了同样的问题希望这个解决方案可以帮助其他人，

**对于 iOS 5 及更低版本**，

实现**类别** 以处理 **UINavigationControllers**与 **选项卡**关联的情况：

```
@implementation UITabBarController (AutoRotation)

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation

 {
          if ([self.selectedViewController isKindOfClass:[UINavigationController class]]) 

          {
              UIViewController *rootController = [((UINavigationController *)self.selectedViewController).viewControllers lastObject];
             return [rootController shouldAutorotateToInterfaceOrientation:interfaceOrientation];

          }
         return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];

  }

@end 
```

***现在，一旦实现了这个类别，自动旋转就完全由 shouldAutoRotateToInterfaceOrientation 在当前 UIViewController 中返回的任何内容决定***

# scala - 如何将可以为 null 或数组的值隐式包装到 Scala 选项中

> ID：10131873
> 
> 赞同：4
> 
> 时间：2012-04-12T21:08:12.823
> 
> 标签：scala, null, option, implicit-conversion, implicit

我在一个 Jar 文件中有这个 Java 类，作为 Scala 程序的依赖项（如 Axis jar）：

```
class MyClass {
    private String[] someStrings;
    public String[] getSomeStrings() { return someStrings; }
} 
```

在我的 Scala 程序中，我有一个 Java API，它将 MyClass 的 MyClass 实例返回给我在 Scala 中的程序：

```
val myInstance = JavaAPI.getInstanceOfMyClass() 
```

然后我尝试在我的 Scala 程序中使用**someStrings数组，但它为****空**（假设它没有正确初始化）

```
for(str <- myInstance.getSomeStrings()) ... 
```

所以这会引发**NullPointerException**。

我发现为了在 for comprehension 中使用它，我可以将它包装到一个 Option 中，以便它正确处理 NPE。

```
for(str <- Option[Array[String]](myInstance.getSomeStrings).getOrElse(Array[String]()) 
```

但这对我来说看起来不太好。

有没有一种方法可以像隐式方法一样创建即使它为 null 并将其包装到 Option 中的隐式方法，例如：

```
implicit def wrapNull(a: Null): Option[Nothing] = None
implicit def wrapArray(a: Array[String]): Option[Array[String]] = Some(a) 
```

所以当我这样做时：

```
for(str <- myInstance.getSomeStrings()) 
```

我没有得到**NPE**

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:31:32.240

编辑：

A`map`和 a`flatMap`总是必须返回相同的类型，它们被调用。如果你有一个列表，你总是会从`map`. 对于一个选项也是如此。如果您尝试在 flatMap 中混合 2 种类型，这很可能不起作用。什么应该

```
Some(Array(1,2)).flatMap { x => 
  x.map { _ * 2 }
} 
```

返回？Some(2,4) 是不可能的。所以你得到一个类型错误。出于这个原因，你必须做一个嵌套`map { map }`而不是`flatMap { map }`.

在你的情况下，它会像这样工作：

```
case class A(b: B)
case class B(c: String)

val result = for(as <- Option(Array(A(B("foo")), A(B("bar"))))) yield {
  for(a <- as; b <- Option(a.b); c <- Option(b.c)) yield {
    c
  }
} 
```

第一个`for`接受一个`Option[Array[A]]`并返回一个`Option[Array[String]]`。嵌套的 for 接受一个`Array[A]`并返回一个`Array[String]`。它们都满足单子定律。最后，如果您愿意，您可以安全地调用`getOrElse`以解开该值。`result`

原来的：

你可以做

```
val result = Option(myInstance.getSomeStrings).map { x =>
  x.map { y =>
    // do stuff with strings
  }
} 
```

或者

```
val result = for(x <- Option(myInstance.getSomeStrings)) yield {
  x.map { y =>
    // do stuff with strings
  }
} 
```

由于类型推断，您不需要编写类型，也不需要`getOrElse`，因为不会为 执行映射`None`。`getOrElse`然后，如果您需要解开该值，您可以简单地执行结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T21:41:37.737

我不认为你的版本有`getOrElse`那么糟糕（你可以通过删除`[Array[String]]`after来缩短它`Option`，因为可以推断出来）。如果您想要更简洁的内容，请执行以下操作：

```
for (str <- Option(myInstance.getSomeStrings).flatten) ... 
```

`Option`您还可以使用以下事实`foreach`：

```
for {
  strings <- Option(myInstance.getSomeStrings)
  str <- strings
} ... 
```

请注意，您不能`yield`在此处使用，因为 drexin 在下面的评论中突出显示。

或者你可以[拉皮条](http://www.artima.com/weblogs/viewpost.jsp?thread=179766) `MyClass`：

```
implicit def withNullWrapper(c: MyClass) = new {
  def getSomeStringsOrNot() = Option(c.getSomeStrings).getOrElse(Array[String]())
}

for (str <- myInstance.getSomeStringsOrNot) ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T22:51:08.017

简单的规则：有 a 的地方`null`，把它变成`Option`. 所以：

```
for {
  array <- Option(myInstance.getSomeStrings)
  element <- array
  thingy <- Option(element.method)
} yield thingy 
```

只有这样是行不通的。因为`array`，它会返回多个元素，但是因为第一个生成器是 an `Option`，所以它会返回一个`Option`。这两个元素是不利的：你不能返回`Option`多个元素中的一个。

解决问题的最简单的替代方法是将 转换`Option`为迭代器或集合（根据您的喜好）。像这样：

```
for {
  array <- Option(myInstance.getSomeStrings).toSeq
  element <- array
  thingy <- Option(element.method)
} yield thingy 
```

请注意，`Option`不需要触及第二个：导致问题的那个是第一个生成器。`Option`除了第一台发电机以外的任何地方都不是问题。

# jquery - 如何共享一个jquery函数

> ID：10131877
> 
> 赞同：1
> 
> 时间：2012-04-12T21:08:48.483
> 
> 标签：jquery

我有以下编辑文本的代码。通常使用 id 而不是类。我已将其更改为一个类，因为我想共享一个实例。现在它是一个类，我不知道用户点击了哪个元素。

我想使用以下代码的一个实例并发送一个附加参数，该参数可以传递给我的 PHP 以区分元素并将其传递给我的 PHP 代码。

```
$(".edit").edit({
  url:'server.php'
}); 
```

所以，也许是这样的：

```
function myFunc(arg){
  $(".edit").edit({
    url:'server.php?arg='+arg
  });
} 
```

当然，这不起作用，因为我需要点击功能，但我不知道该怎么做。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:12:19.900

```
$(".edit").click( function() { 
  $(this).edit({    
    url:'server.php?arg='+arg
  });
}) 
```

这是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:41:56.690

这听起来像你要求的：

```
 $(".edit").click( function() { 
     $(this).edit({    
         url: 'server.php?arg=' + $(this).attr('id')
     });
 }) 
```

# java - org.jdesktop.swingbinding.JTableBinding$BindingTableModel 无法转换为 javax.swing.table.DefaultTableModel

> ID：10131878
> 
> 赞同：1
> 
> 时间：2012-04-12T21:08:48.460
> 
> 标签：java, swing, jtable, jsr296, beans-binding

我试图对 JTable 标头进行分组，为此我想获取当前 JTable 的 DefaultTableModel。但是当我尝试像这样检索表模型时：

```
DefaultTableModel dm=(DefaultTableModel) tblTet.getModel(); 
```

它显示以下异常：

> org.jdesktop.swingbinding.JTableBinding$BindingTableModel 无法转换为 javax.swing.table.DefaultTableModel

因为我使用的是 JTableBeansBinding。

有谁知道如何解决这个问题（用于检索 DefaultTableModel）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:19:33.813

根据[BindingTableModel 的 JavaDoc](http://www.jarvana.com/jarvana/view/net/java/dev/beansbinding/beansbinding/1.2.1/beansbinding-1.2.1.jar!/org/jdesktop/swingbinding/JTableBinding%24BindingTableModel.class?classDetails=ok)，该类不扩展 DefaultTableModel。相反，它实现了 TableModel 接口。这意味着您不能转换为 DefaultTableModel，只能转换为 TableModel：

```
TableModel dm=(TableModel) tblTet.getModel(); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-08T05:39:33.113

你必须像这样创建你的表：

```
 String[] columnNames = {"Row",
            "Category",
            "From Date",
            "From Time",
            "To Date",
            "To Time",
            "Description",
            "Doc"};
    Object[][] data = {};//Table Rows

   table.setModel(new DefaultTableModel(data,columnNames)); 
```

代替：

```
 table=new JTable(data,columnNames); 
```

然后你可以将你的表模型转换为 defaultTableModel。

# javascript - jquery 自动完成 javascript, php 和 mysql

> ID：10131879
> 
> 赞同：1
> 
> 时间：2012-04-12T21:08:49.277
> 
> 标签：javascript, jquery, autocomplete

我正在尝试让 Jquery 自动完成工作，如[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

所以我下载了参考资料并将它们包括在内：

```
<link rel="stylesheet" type="text/css" media="all" href="jquery-ui-1.8.18.custom.css" />
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script> 
```

用这个短代码：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function()
    {
        $('#auto').autocomplete(
        {
            source: "./file.php",
            minLength: 3
        })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
   .data( "item.autocomplete", item )
   .append( item.auto )
   .appendTo( ul );
};  
})
</script> 
```

但我不断收到此错误：**自动完成不是功能**

我不知道我到底错在哪里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T16:58:01.427

你缺少 jquery-ui.js

我有同样的问题。我添加了 jquery-ui.js 并且那个错误消失了。

```
<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script> 
```

# dynamics-crm-2011 - Dynamics CRM 2011 使用 VB 在插件中设置字段值

> ID：10131880
> 
> 赞同：-4
> 
> 时间：2012-04-12T21:08:52.677
> 
> 标签：dynamics-crm-2011

我是CRM的新手。我需要运行一个插件，该插件将在创建联系人实体时执行。它需要查看联系人的 GUID 并将联系人表单上的字段设置为该值，以便可以在对话框中引用它。我正在用VB编码。

有人可以给我看一些VB中的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:25:06.533

CRM SDK 在 C# 和 VB 中都有代码示例。在任何情况下，你都需要它来进行开发，所以我建议你开始寻找那里。

SDK 可以在[这里](http://www.microsoft.com/download/en/details.aspx?id=24004)下载。

# linux - 在 Linux 中调试共享库

> ID：10131883
> 
> 赞同：1
> 
> 时间：2012-04-12T21:09:09.280
> 
> 标签：linux, debugging, shared

所以，我们有一个 Softimage 插件。不幸的是，Linux 版本在某处存在错误。

有没有一种很好的方法来调试那个插件，一个共享库，而它被 Softimage 使用？是否可以使用 Eclipse 或任何其他 IDE 来调试插件？

我们真的需要尽快完成这项工作。这个错误本身看起来很简单，但我们只是不知道该去哪里找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:20:56.517

> 有没有一种很好的方法来调试那个插件，一个共享库，而它被 Softimage 使用？

是的。

> 是否可以使用 Eclipse 或任何其他 IDE 来调试插件？

是的。

您使用任何调试器的方式与使用它调试任何其他可执行文件的方式完全相同：

```
gdb /path/to/exe
(gdb) run <arguments> 
```

> 即使我们无法访问程序的源代码，是否有可能

为什么你认为你需要那个来源？

据推测，该错误表现为崩溃、错误或其他一些不正确的行为。运行程序直到崩溃点，然后使用`where`命令找出崩溃的位置，`print`检查变量等。

如果在崩溃点没有足够的信息来诊断问题，请设置断点并根据需要重新运行。

# javascript - 通过javascript全屏

> ID：10131888
> 
> 赞同：2
> 
> 时间：2012-04-12T21:09:33.747
> 
> 标签：javascript, fullscreen

制作全屏页面是我最喜欢的主题之一，但每当我想到这样做时，我总是收到一个答案，那就是它只能用 Flash 完成。今天第一次看到不是用flash做的，谁能告诉我具体是怎么做的，让我终于实现了我的梦想^^这里是图片 [http://content.screencast.com /users/cryoffalcon/folders/Jing/media/5ac91f6f-ed2f-4312-b8e3-3ac9771f5497/2012-04-13_0001.png](http://content.screencast.com/users/cryoffalcon/folders/Jing/media/5ac91f6f-ed2f-4312-b8e3-3ac9771f5497/2012-04-13_0001.png)

这是此全屏按钮所在页面的链接。 [http://tutorialzine.com/2010/09/html5-canvas-slideshow-jquery/](http://tutorialzine.com/2010/09/html5-canvas-slideshow-jquery/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T21:12:53.250

一些浏览器通过 html5 支持这一点。

尝试

```
var docElm = document.documentElement;
if (docElm.requestFullscreen) {
    docElm.requestFullscreen();
}
else if (docElm.mozRequestFullScreen) {
    docElm.mozRequestFullScreen();
}
else if (docElm.webkitRequestFullScreen) {
    docElm.webkitRequestFullScreen();
} 
```

# c++ - 最后一个参数覆盖 SQLite 绑定中的先前参数

> ID：10131890
> 
> 赞同：3
> 
> 时间：2012-04-12T21:09:38.907
> 
> 标签：c++, sqlite, c++11

我知道这可能是一个非常愚蠢的错误，但我已经坐了几个小时盯着几行代码，浏览文档，我仍然不知道为什么会发生这种情况：

我正在为 C++11 中的 SQLite C API 编写一个方便的包装类。当建立与数据库的连接时，该函数`sql`准备一个语句，必要时将参数绑定到它，然后执行它。准备和执行工作正常，绑定一个参数工作正常，但如果我想绑定多个参数，所有值将始终设置为列表中的最后一个参数。

该`sql`函数如下所示：

```
template <typename... Args>
bool sql(const std::string &query, const Args &... args)
{
    sql_statement call;
    if(sqlite3_prepare_v2(database_, query.data(), -1, &call.statement, nullptr)
       != SQLITE_OK)
    {
        return false;
    }

    if(!bind(call.statement, 1, args...)) {
        return false;
    }

    return sqlite3_step(call.statement) == SQLITE_DONE;
} 
```

`sql_statement`是一个包装结构，`sqlite3_stmt`它只在语句超出范围时释放它。`database_`是工作数据库的句柄。不过，我不确定此功能是否与问题有关。作为麻烦制造者，我宁愿想到的是在`bind`函数中调用的`sql`函数。这里是：

```
template <typename T, typename... Args>
bool bind(sqlite3_stmt *statement, int current, const T &first, const Args &... args)
{
    std::stringstream ss;
    ss << first;
    if(sqlite3_bind_text(statement, current,
        ss.str().data(), ss.str().length(), SQLITE_STATIC) != SQLITE_OK)
    {
        return false;
    }
    return bind(statement, current+1, args...);
}
bool bind(sqlite3_stmt *, int) { return true; } 
```

注意没有错误，函数返回true。我已经用各种输入对此进行了调试；考虑这个例子：

```
if(!db.sql("INSERT INTO test (name, age) VALUES (?, ?);", "nijansen", 23)) {
    std::cerr << db.error() << std::endl;
    return 1;
} 
```

当我调试 的函数调用时`bind`，递归按预期工作，因此它将值`[1] nijansen`和`[2] 23`. [SQLite C API 的文档](http://www.sqlite.org/c3ref/bind_blob.html)说“最左边的 SQL 参数的索引为 1”，所以这不应该是问题。尽管如此，在数据库中查询的结果是：`id: 1, name: 23, age: 23`. 我真的很感激再看这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:46:53.797

除非`SQLITE_TRANSIENT`为第五个参数传递，否则`sqlite3_bind_text`不会复制您传入的字符串，并且您的字符串应该在语句执行之前一直存在。在您的情况下，字符串在`sqlite3_bind_text`被调用后立即被销毁，您只是在这里目睹了未定义行为的一种可能表现。

如果您想`sqlite3_bind_text`自行管理数据的生命周期，请更改`SQLITE_STATIC`为`SQLITE_TRANSIENT`.

# c# - 从 OsacbmTime 类型转换为 DateTime 类型

> ID：10131892
> 
> 赞同：0
> 
> 时间：2012-04-12T21:09:55.810
> 
> 标签：c#, datetime

我正在使用[OSA-CBM 3.3](http://www.mimosa.org/?q=resources/specs/osa-cbm-330)标准实施一个项目。在该标准中，包括一种称为`Osacbmtime`. 我正在尝试`DateTime`从 type 解析一个值`Osacbmtime`。铸造似乎并没有完成工作。我可以采取一种有用（或明显）的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:13:20.203

`Osacbmtime`必须是自定义库，因为 Google 搜索它不会产生任何结果。

您最好的选择是，根据您提供的有关`Osacbmtime`类型的少量信息，查看是否可以以日期/时间格式输出它，然后将其解析为 DateTime 对象，即

```
DateTime myDT = DateTime.Parse(myOSACBMTime.ToString("MM/DD/YYYY HH:MM:SS AA")); 
```

显然这是伪代码，因为我没有 的文档`Osacbmtime`，但是（希望）你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:16:07.633

[鉴于一些 Java 代码](http://www.koders.com/java/fid5F26CDDA00A20B45AA065B0BCFBBBAAB26BBD208.aspx?s=197#L133)的这个片段（虚拟的我能找到的唯一参考）：

```
DMPort d = new DMPort();
d.lastUpdate = new OsacbmTime();
d.lastUpdate.time = "2007-08-15T16:23:09";
d.lastUpdate.time_type = OsacbmTimeType.OSACBM_TIME_MIMOSA; 
```

我*怀疑*你想要类似的东西：

```
DateTime date = DateTime.ParseExact(time.Time, "s",
                                    CultureInfo.InvariantCulture,
                                    DateTimeStyles.AssumeLocal); 
```

[可排序 8601 格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Sortable)`s`的格式说明符在哪里。

# html - 使用 HTML/CSS 创建带标签的水平线

> ID：10131894
> 
> 赞同：1
> 
> 时间：2012-04-12T21:09:57.633
> 
> 标签：html, css, css-float

我正在尝试创建一种内部有“标签”的水平线。理想情况下，这应该是一个漂亮的分隔符。

我在这里创建了一个 JSFiddle：http: [//jsfiddle.net/9syqG/](http://jsfiddle.net/9syqG/)

左侧部分和标题似乎工作得很好。我只是无法获得直线的正确部分来拉伸剩余的距离。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:25:14.820

如果您有定义的颜色，您可以将其设置为背景，并且没有任何 css 浏览器注意事项，这可能会有所帮助。

* * *

更新 - 背景颜色现在很灵活。

[http://jsfiddle.net/9syqG/6/](http://jsfiddle.net/9syqG/6/)

# google-app-engine - 您可以为在 Google 的 App Engine 上创建的应用程序收费吗？

> ID：10131895
> 
> 赞同：3
> 
> 时间：2012-04-12T21:10:03.087
> 
> 标签：google-app-engine

我有一个想要创建的网络应用程序，我正在考虑在 Google 的 App Engine 上构建它，但我很好奇我是否可以为我在那里创建的应用程序收费，或者他们是否只允许免费的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:12:08.267

是的。服务条款中没有任何内容表明您不能向 App Engine 应用的用户收费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:17:10.763

您可以在 GAE 上免费制作应用程序，但 GAE 上的某些服务不是免费的..

# iphone - 在 cocos2d 中访问粒子的属性

> ID：10131901
> 
> 赞同：0
> 
> 时间：2012-04-12T21:10:19.043
> 
> 标签：iphone, ios, cocos2d-iphone, particles

所以我用粒子设计器创建了一个粒子系统并添加到我的项目中：

```
emitter =[CCParticleSystemQuad particleWithFile:@"bonparticle9.plist"];
emitter.position=ccp(size.width/2,size.height/2);
[self addChild:emitter z:10]; 
```

我想知道是否可以通过代码访问粒子的属性。例如在游戏期间修改我的粒子的速度。谢谢:)对不起我的英语我是法国人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:30:19.370

你`emitter`是一个`CCParticleSystemQuad`对象，这意味着你可以访问[`CCParticleSystem`](http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_particle_system.html)类的所有属性。`duration`, `life`, `speed`, ...之类的东西`speedVar`都是可以访问的。

# shell - 仅在递归差异中包含与给定模式匹配的文件

> ID：10131908
> 
> 赞同：25
> 
> 时间：2012-04-12T21:10:52.497
> 
> 标签：shell, unix, diff

如何执行两个目录（a 和 b）中文件的递归差异：

```
$ diff -r a b 
```

但只查看名称与给定模式匹配的文件。例如，使用 find 命令中可用的相同语法，如下所示：

```
$ diff -r a b -name "*crazy*" 
```

这将显示 a 和 b 中具有相同名称和路径的文件之间的差异，它们的名称中有“疯狂”。

实际上，我正在寻找与 diff 中可用的 --exclude 选项相反的选项。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T22:08:08.423

也许这有点间接，但它应该起作用。您可以使用`find`获取与模式*不*匹配的文件列表，然后“排除”所有这些文件：

```
find a b -type f ! -name 'crazy' -printf '%f\n' | diff -r a b -X - 
```

这`-X -`将使`diff`从标准输入读取模式并排除任何匹配的内容。如果您的文件没有类似`*`或`?`名称中的有趣字符，这应该可以工作。唯一的缺点是您的 diff 不会包含该`find`命令，因此列出的`diff`命令不是那么有用。

（我只用 GNU`find`和测试过它`diff`）。

**编辑**：

由于只有非 GNU`find`没有`-printf`,`sed`可以用作替代方案：

```
find a b -type f ! -name '*crazy*' -print | sed -e 's|.*/||' | diff -X - -r a b 
```

这也是假设非 GNU`diff`有`-X`我不知道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-09T12:49:25.070

我无法使用它`-X -`，所以我使用了不同的方法 - 让`find`根据我的要求递归查找文件并`diff`比较单个文件：

```
a="/your/dir"
b="/your/other/dir"
for f in $(find $a -name "*crazy*" | grep -oP "^$a/\K.*"); do
  diff -u $a/$f $b/$f
done 
```

或者，在一行中：

```
a="/your/dir" && b="/your/other/dir" && for f in $(find $a -name "*crazy*" | grep -oP "^$a/\K.*"); do diff -u $a/$f $b/$f; done 
```

这`grep -oP "^$a/\K.*"`用于提取相对于目录的路径，即从目录`a`中删除，以创建它。`/your/dir/``/your/dir/and/a/file``and/a/file`

# actionscript-3 - 跨域错误 / 错误 #2048 / 安全错误

> ID：10131909
> 
> 赞同：2
> 
> 时间：2012-04-12T21:10:52.800
> 
> 标签：actionscript-3, security, cross-domain

我在 AS3 中有这个脚本，它进行屏幕截图并尝试将其发送到服务器。在本地主机上一切正常，但在部署时出现此错误：

```
errorHandler: [SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase=2 text="Error #2048"] 
```

嵌入代码如下：

```
<object data="record_preview.swf" type="application/x-shockwave-flash" id="flash_38533942" width="740" height="550">
<param name="allowscriptaccess" value="always">
<param name="allownetworking" value="all">
<param name="movie" value="record_preview.swf">
<param name="wmode" value="opaque">
</object> 
```

crossdomain.xml 如下（在目标脚本文件夹和域根目录上）：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">

<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all"/>
</cross-domain-policy> 
```

管理负载的 AS3 脚本如下：

```
var header:URLRequestHeader = new URLRequestHeader("Content-type","application/octet-stream");
var _swfurl:URLRequest = new URLRequest("http://domain/subfolder/script.php");
_swfurl.requestHeaders.push(header);
_swfurl.method = URLRequestMethod.POST;
_swfurl.data = screenCapture.data;

var _swfLoder:URLLoader = new URLLoader();
_swfLoder.dataFormat = URLLoaderDataFormat.TEXT;
_swfLoder.addEventListener( Event.COMPLETE, imageUrlLoaderComplete );
_swfLoder.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);
_swfLoder.addEventListener(SecurityErrorEvent.SECURITY_ERROR, errorHandler);
_swfLoder.load( _swfurl ); 
```

函数**imageUrlLoaderComplete将****script.php**的结果加载到文本框中，**errorHandler**捕获应用程序给出的错误。

swf 文件已导出，具有**访问播放安全性：仅访问网络**。

在这一点上，我根本不知道问题到底出在哪里。任何建议都将受到欢迎和测试！

谢谢！

# asp.net-mvc-3 - 这段代码有什么意义？

> ID：10131910
> 
> 赞同：9
> 
> 时间：2012-04-12T21:11:07.810
> 
> 标签：asp.net-mvc-3, interface, implementation

[我正在阅读 ASP.NET MVC3 的源代码，并且在ControllerBase](http://aspnet.codeplex.com/SourceControl/changeset/view/72551#266453)的代码中遇到了以下内容：

```
public interface IController
{
    void Excecute(RequestContext requestContext);
}

public abstract class ControllerBase : IController
{

    protected virtual void Execute(RequestContext requestContext)
    {
        if (requestContext == null)
        {
            throw new ArgumentNullException("requestContext");
        }
        if (requestContext.HttpContext == null)
        {
            throw new ArgumentException(MvcResources.ControllerBase_CannotExecuteWithNullHttpContext, "requestContext");
        }

        VerifyExecuteCalledOnce();
        Initialize(requestContext);

        using (ScopeStorage.CreateTransientScope())
        {
            ExecuteCore();
        }
    }

    void IController.Execute(RequestContext requestContext)
    {
        Execute(requestContext);
    }
} 
```

ControllerBase 提供了`Execute`..`IController.Execute`

为什么这样做，它实现了什么？似乎没有任何用处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T21:57:17.773

此代码使您可以覆盖 Execute 方法。

请记住，通常实现的接口方法是公共的（而不是虚拟的或抽象的），因此您不能在派生类中重写它，并且`IController`默认情况下无法通过该接口访问创建新的 Execute 方法（没有此接口到受保护的虚拟技术）。通过创建受保护的虚拟方法（从显式实现的接口方法调用），派生类可以覆盖 Execute 方法，而不会破坏接口实现。

我在这里找到了一篇很棒的文章： [C# Overriding Interface Methods in Subclasses](http://www.williamcaputo.com/archives/000138.html "在子类中重写接口方法")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:51:00.397

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa664591%28v=vs.71%29.aspx)，显式接口成员实现的一个目的是：“因为显式接口成员实现不能通过类或结构实例访问，它们允许将接口实现从类或结构的公共接口中排除。这特别有用当一个类或结构实现一个对该类或结构的使用者不感兴趣的内部接口时。”

如果我对上面的解释是正确的，那么一个类型的变量`ControllerBase`不能被用来调用`Execute`，因为它是受保护的。变量的类型必须是`IController`。我不确定这是否是构造的意图，但感觉这就是原因。

在相关测试中，他们在`ControllerBase`调用.`IController``Execute`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:53:56.250

乍一看，这种设计模式似乎毫无用处。但是，它确实为`ControllerBase`类提供了稍后对其接口实现进行非破坏性更改的机会`IController`。更改将保证运行，因为它不依赖于调用的继承类`base.Execute()`。也许这可以用于在未来管理上下文或安全性？

也许开发人员只是喜欢将接口与可覆盖的实现保持逻辑分离。

# python - sorl-thumbnail URLField 而不是 ImageField

> ID：10131914
> 
> 赞同：1
> 
> 时间：2012-04-12T21:11:33.677
> 
> 标签：python, django, thumbnails, sorl-thumbnail

我有一堆图像上传到 Amazon S3，我想顺便在它们上使用 sorl，所以 sorl 不会将文件重新定位到 upload_to 目录。就像我使用 URLField 而不是 FileField 一样（这需要实际的文件内容）。可能吗？

**更新**：
这是一个例子：

```
from storages.backends.s3boto import S3BotoStorage
from sorl.thumbnail import ImageField

class Thumbnail(Model):
    image = ImageField(upload_to='.', storage=S3BotoStorage)

thumb = Thumbnail(image=File(S3BotoStorage.open('/path/to/image'))
thumb.save() 
```

此代码会将图像下载到服务器，然后将其上传到同一个 S3 存储，这需要时间。如果缩略图已经创建，这是完全没有必要的，所以我的想法是使用某种`URLField`，我会指向我的 S3 存储以避免这个问题。

# javascript - 在咖啡脚本中迭代数组和调用函数的最佳方法

> ID：10131916
> 
> 赞同：0
> 
> 时间：2012-04-12T21:11:45.757
> 
> 标签：javascript, arrays, coffeescript, loops

我在咖啡脚本中有这段代码

```
copy pages.template  for pages in configFiles.pages 
```

在 java 脚本中生成此代码

```
var pages, _i, _len, _ref;

_ref = configFiles.pages(function() {});
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  pages = _ref[_i];
  copy(pages.template);
} 
```

但我想要的是在 for 中再调用 2 个函数，如下所示：

```
var pages, _i, _len, _ref;

_ref = configFiles.pages(function() {});
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  pages = _ref[_i];
  copy(pages.template);
  copy2(pages.template);
  copy3(pages.template);
} 
```

我不知道这是否是一个好习惯。我是编程界的新手。如果是我怎么能在coffeescript中做到这一点？如果不是最好的解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:51:11.007

您可以将块语法用于循环，而不是将其嵌套在理解中：

```
for pages in configFiles.pages
    copy(pages.template)
    copy1(pages.template)
    copy2(pages.template) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:34:27.587

不推荐，但在技术上可以将它们塞进一行：

```
(copy pages.template; copy1 pages.template; copy2 pages.template) for pages in configFiles.pages 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T21:27:38.537

在 coffeescript 中，您可以嵌套列表推导/for 循环。所以你可以做这样的事情。

```
(copy pages.template for pages in configFiles.pages for num in [3..1]) 
```

# silverlight - Silverlight WP7中如何确定触摸位置？

> ID：10131918
> 
> 赞同：0
> 
> 时间：2012-04-12T21:11:50.803
> 
> 标签：silverlight, windows-phone-7

有没有一般的方法来知道 x 和 y 参考是屏幕的左上角？

因为当我在拖动图像时尝试获取 x 和 y 时，我会根据图像的角而不是包含图像的画布来获取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:42:49.270

你可以看到这个。 [如何在 WP7 上的 silverlight 中找到控件的屏幕位置？](https://stackoverflow.com/questions/8740374/how-do-you-find-the-screen-position-of-a-control-in-silverlight-on-wp7)

# wcf - 如何从 silverlight 4 开始在需要客户端证书的 https 连接上调用 WCF？

> ID：10131919
> 
> 赞同：2
> 
> 时间：2012-04-12T21:11:51.523
> 
> 标签：wcf, silverlight-4.0, https, client-side

在我们的应用程序中，我们有一个 Silverlight 应用程序 sl.xap。它托管在[https://xap.intra.net/getxapfile.html](https://xap.intra.net/getxapfile.html)上。

在浏览器中运行后，sl.xap 将调用托管在[https://wcf.intra.net/wcf.svc](https://wcf.intra.net/wcf.svc)上的 WCF 服务。

xap.intra.net 和 wcf.intra.net 都需要客户端证书。

[如果我在https://xap.intra.net/wcf.svc](https://xap.intra.net/wcf.svc)上托管 WCF 服务，一切都会很好。浏览器打开，要求提供证书，然后我们就走了。不幸的是，这不是生产的选择，因为公司政策等等。

所以，坦率地说，我不确定从这里去哪里。我在使用 SSL 客户端证书方面还是新手。我想我需要以某种方式获取客户端证书，然后将其传递给 WCF。不知道怎么做。

任何建议都会很棒！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:15:03.897

我最终从企业 IT 架构师那里得到的答案是：你不能。Silverlight 无法通过 https 访问客户端证书并将其发送到服务器。

这意味着，我必须从提供 Web 服务的同一连接下载 XAP。这允许 Silverlight 使用浏览器创建的现有 SSL 通道。

此外，如果我需要联系期待服务的第 3 方 https 客户端证书，我将不得不在我的服务器上创建一个代理服务来提供帮助。

# gwt - AttachEvent 是什么

> ID：10131920
> 
> 赞同：4
> 
> 时间：2012-04-12T21:11:51.917
> 
> 标签：gwt

我真的不明白 AttachEvent 或 addAttachHandler 类是什么。这有什么用？有人可以为此发布一个例子吗？多谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T22:10:11.793

当 Widget 与实际页面连接或分离时，AttachEvent 会通知您。如果某些东西没有被附加，那么它的元素就不可能是可见的或与之交互的，因此知道它何时*不可*用于交互可能是有益的。

GWT 本身使用这些知识的主要目的是连接事件处理代码。如果小部件未附加到 dom，则无法与之交互，因此所有处理程序都暂时与 dom 分离。这是作为 GWT 处理内存泄漏方法的一部分完成的（请参阅[http://code.google.com/p/google-web-toolkit/wiki/DomEventsAndMemoryLeaks](http://code.google.com/p/google-web-toolkit/wiki/DomEventsAndMemoryLeaks)和[http://code.google.com/p/google -web-toolkit/wiki/UnderstandingMemoryLeaks 了解](http://code.google.com/p/google-web-toolkit/wiki/UnderstandingMemoryLeaks)更多详情）。您通常不需要担心这个细节，除非您在自己的 dom 侦听器中进行连接，或者为其他小部件构建容器。容器的主要职责之一是在连接或分离时通知其子级。

# javascript - 总是返回函数是否 明智？

> ID：10131921
> 
> 赞同：3
> 
> 时间：2012-04-12T21:11:57.120
> 
> 标签：javascript

不久前我在某处读到（不幸的是不记得在哪里），总是`return`在 JavaScript 中的每个函数的末尾放置一个语句是明智的，因为它清除了在该函数中创建的对象和变量的内存。

这有什么道理吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T21:18:08.647

这没有道理。没有任何。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T21:28:44.110

不。

来自[标准 ECMA-262 ECMAScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)（12.9）：

> **句法**
> 
> *ReturnStatement* :
> `return ;`
> `return`[此处没有*LineTerminator* ]*表达式* `;`
> 
> [...]`return`语句会导致函数停止执行并向调用者返回一个值。如果`Expression`省略，则返回值为`undefined`。否则，返回值为*Expression*的值。

然而，情况恰恰相反：`return`语句可以防止内存被释放。

来自[函数和函数范围 - MDN # 变量的保留](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope#Preservation_of_variables)：

```
function outside(x) {
   function inside(y) {
      return x + y;
   }
   return inside;
}
fn_inside = outside(3); 
result = fn_inside(5); // returns 8

result1 = outside(3)(5); // returns 8 
```

> 注意返回`x`时如何保存`inside`。闭包必须在它引用的所有范围内保留参数和变量。由于每次调用都可能提供不同的参数，因此每次调用都会创建一个新的闭包`outside`。只有当返回的内存`inside`不再可访问时，才能释放内存。

# codeigniter - 从外部脚本 CI 调用 database.php

> ID：10131922
> 
> 赞同：0
> 
> 时间：2012-04-12T21:12:04.923
> 
> 标签：codeigniter

所以我有一个由 AJAX 请求调用的脚本，它位于 CI 安装根目录下名为“ajax”的文件夹中。我的 ajax 文件顶部有这段代码：

```
define("BASEPATH", "../../system/");
include("../../application/config/database.php"); 
```

所以它成功地抓取了 database.php 文件，但它告诉我“没有选择数据库”。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:39:23.297

在模型中输出数据打破了 codeIgniter 旨在实现的 mvc 的传统结构。但是，mvc 是一种设计模式，而不是严格的标准，因此您不会伤害任何人，除了您自己和其他人，他们将在未来追随您或使用您的代码。

就像 AndrewR 建议的那样，为什么不对控制器进行 ajax 调用[再次因为这是 mvc 的约定]？如果它位于 app 文件夹之外，那么它可能无法通过网络浏览器访问。

您也可以像这样获取codeigniter的全局对象的实例`$_CI =& get_instance();`并像这样加载数据库对象`$db = $_CI->load('database');`

希望这可以帮助！

# php - 为什么这个通知（12 次）：未初始化的字符串偏移量：第 90 行 app_vsf.php 中的 0

> ID：10131930
> 
> 赞同：1
> 
> 时间：2012-04-12T21:12:29.757
> 
> 标签：php, mysql

请帮助我解决标题中指定的问题。

代码部分是：

```
<?php
// framework related things in this file.

// vsf = Very Simple Framework

$vsf = new stdClass;

// default app_layout file
$vsf->app_layout = 'app_layout.php';

// define the 'index' file, where we should link back to.
// Need to include the path, otherwise S.E. friendly URLS get messed up.
$vsf->self = '/mapcal/index.php';

// to support search engine friendly URLS, grab data from PATH_INFO
if (isset($_SERVER["PATH_INFO"]) ) {
$tmp_array = explode("/",$_SERVER["PATH_INFO"]);

for ($index = 0; $index < count($tmp_array); $index++) {
// only want the odd elements, they are the parameters.  The even ones are the values
if ( $index % 2 == 0 ) { continue; }
$_REQUEST[$tmp_array[$index]] = $tmp_array[$index+1];
}
}

// these functions are for form error handling
$errorfields = array();

$errormsgs = array();

$errorwasthrown = FALSE;

function adderrmsg($field = '', $msg = '') {
global $errorfields;
global $errormsgs;
global $errorwasthrown;

if ($field) {
$errorfields[] = $field;
}
if ($msg) {
$errormsgs[] = $msg;
}
$errorwasthrown = TRUE;
}

function displayformerrors($errhdr = 'The following errors occured:') {
global $errorfields;
global $errormsgs;

if ( empty($errorfields) and empty($errormsgs) ) {return;}

if (! empty($errormsgs) ) {
print "<p style='color: red;'>$errhdr<br>\n";

foreach ($errormsgs as $msg) {
  print "&#8226; $msg<br>\n";
  }
print "</p>\n\n";
}
}

function displayformlabel ($field = '', $label = '') {
global $errorfields;
if ( in_array($field,$errorfields) ) {
print "<span style='color: red;'>$label</span>";
}
else {
print $label;
}
}

function reuseform($formaction = 'new',$field_list = '',$query = '') {
if ($formaction == "new") {
foreach (split(",",$field_list) as $field) {
  global ${$field};
  ${$field} = '';
  }
}
elseif ($formaction == 'form') {
foreach (split(",",$field_list) as $field) {
  global ${$field};
  ${$field} = $_REQUEST[$field];
  }
}

elseif ($formaction == 'query') {
foreach (split(",",$field_list) as $field) {
  global ${$field};
  ${$field} = $query[$field];
  }
}

}  // close function reuseform

?> 
```

第 90 行是： ${$field} = $query[$field];

该通知显示了 12 次，因为表单中有 12 个字段，但为什么会显示，我无法在表单字段中看到数据以进行编辑。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:15:29.507

检查以确保 $_REQUEST 保存了变量。

此外，reuseform 似乎默认将 $query 设置为 '' 而不是 Array() ... $query 设置是否正确？此错误表明它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:24:47.123

显然`${$field}`评估为`"0"`并且`$query["0"]`未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:28:10.073

你可以使用这个快速修复`isset`

```
if(isset($GLOBALS[${$field}]))
{
    ${$field} = $query [$field];
} 
```

# google-analytics - 页面级自定义变量未显示在 Google Analytics（分析）仪表板中

> ID：10131933
> 
> 赞同：2
> 
> 时间：2012-04-12T21:12:38.217
> 
> 标签：google-analytics, google-analytics-api

我有以下正在执行的跟踪脚本，但我没有看到插槽 2,3 和 4 中的自定义变量显示在 Demographics -> Custom Variables 下的 Google 分析仪表板上。但是，我确实看到插槽 1 的自定义变量出现在仪表板上。

同一个跟踪脚本中存在不同范围的自定义变量时有什么限制吗？

```
<script type="text/javascript">
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount','UA-XXXXXXX-X']);
   _gaq.push(['_setCookiePath','/shop']);
   _gaq.push(['_setDomainName','.XXXXX.com']);
   _gaq.push(['_setAllowLinker',true]);
   _gaq.push(['_setAllowHash',false]);
   _gaq.push(['_setCustomVar',1,'customerAccount','xxxxx',1]);
   _gaq.push(['_setCustomVar',2,'SKU ID | SKU NAME','0116516 | X-9 COPY PAPER 8.5X11" RM WE',3]);
   _gaq.push(['_setCustomVar',3,'CATEGORY ID','2 | 368 | 1602',3]);
   _gaq.push(['_setCustomVar',4,'CATEGORY NAME','MULTI-USE COPY PAPER',3]);
   _gaq.push(['_trackPageview']);
   (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

我在 Firefox 中通过 Firebug 验证了脚本，确实看到触发了 _utm.gif 请求，并且 utme 参数似乎具有所有插槽的自定义变量值。

自执行跟踪脚本以来已经过去了大约 4 天，但仪表板上仍然没有自定义变量 2、3、4 的值。关于为什么页面级自定义变量不显示的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:44:20.003

我不完全确定，但我认为您的管道符号 (|) 和双引号 (") 可能会影响您的跟踪。

哦，_setAllowHash() 已被弃用，不再需要跨域跟踪。

# 编辑1：

这对您来说可能是一个更好的选择，因为您似乎正在跟踪销售。 [http://code.google.com/intl/en-EN/apis/analytics/docs/tracking/gaTrackingEcommerce.html](http://code.google.com/intl/en-EN/apis/analytics/docs/tracking/gaTrackingEcommerce.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T09:38:48.020

我遇到过同样的问题。花了几天时间解决。

原因是：要查看*页面级自定义变量*，您需要明确指定**指标**和**维度**，这可以通过**自定义报告**完成（单击自定义选项卡）。

默认仪表板不会显示*页面级别的自定义变量*值。这是我为插槽 2 的自定义变量配置的自定义报告配置的屏幕截图：

![页面级自定义变量](../Images/1fa5ec960e6382cc63e6c2dc19c91aa7.png)

# objective-c - 使用（或不使用）自我。在 Objective-C 属性中

> ID：10131943
> 
> 赞同：1
> 
> 时间：2012-04-12T21:13:22.063
> 
> 标签：objective-c, syntax, self

我对在 Objective-C 中为属性赋值有疑问。我有很多“神秘地错过”值的问题，例如，如果我有这个界面：

```
// MyClass.h
@interface MyClass : NSObject {
    MyOtherClass *myVar;
}

@property (nonatomic, retain) MyOtherClass *myVar;

- (id)initWithValue:(NSString *)val; 
```

而这个实现：

```
// MyClass.m
@implementation MyClass

@synthesize myVar;

- (id)initWithValue:(NSString *)val {
    self = [super init];

    if (self != nil) {
        /** Do some stuff with val... **/
        myVar = [method:val]; // Some method that returns a MyOtherClass value
    }

    return self;
} 
```

在执行的某个时刻，myVar 的值消失、改变或其他什么……解决方法是改变：

myVar = [方法：val]；// 一些返回 MyOtherClass 值的方法

为了

**自我**.myVar = [方法：val]；// 一些返回 MyOtherClass 值的方法

那么......使用 self 或不使用它有什么区别？我的意思是，很明显我必须使用它，因为如果不使用它会导致问题，但我不知道为什么

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:18:38.793

如果您使用 self，则您正在使用该属性，并且它标有“保留”。如果您使用该变量，您将绕过该属性，因此没有“保留”。您可以编写`myVar = [[someObject method:val] retain];`并获得与属性相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:19:42.663

这是一个很好的例子，说明了为什么你应该改变你的`@synthesize`to`@synthesize myVar = _myVar;`或一些变体。如果不这样做，可以从您下面设置您的实例变量，因为直接分配“myVar = nil”会绕过您的设置器。

`myVar = _myVar`如果您尝试这样做，使用该策略将导致编译器抱怨，`myVar =`并要求您调用`self.myVar`哪个将访问您的 setter 或 getter。

然后，您应该使用的唯一地方`_myVar`是，如果您更改了该变量的 setter 或 getter 的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:21:17.350

你在调用什么方法`val`？

我想当你这样做的时候

```
myVar = [method:val]; // Some method that returns a MyOtherClass value 
```

结果是一个自动释放的对象。这意味着当您的 init 方法完成时，您的`myVar`对象将被释放并被销毁。该`myVar`变量仍然指向内存中对象所在的位置，但该内存可能会被任何东西填充。

当您使用像这样使用点语法的属性设置器方法时

```
self.myVar = [method:val]; 
```

编译器自动为您合成的 setter 方法将向对象发送一条保留消息以保留它。

您还可以像这样修复代码错误：

```
myVar = [[method:val] retain]; // Some method that returns a MyOtherClass value 
```

但最好坚持点语法。

# wpf - 在一个 WPF 网格单元格中有多个控件

> ID：10131944
> 
> 赞同：11
> 
> 时间：2012-04-12T21:13:24.557
> 
> 标签：wpf, grid, cell

WPF 新手，在线学习教程，有几个问题：

(1) 我试图让多个不同宽度的按钮并排出现在一个 WPF 网格单元中。然而，它们似乎总是相互叠加。我错过了什么？

(2) 是否可以控制网格单元内每个按钮的绝对起始左侧位置？

谢谢。

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" >
<ScrollViewer>
    <Grid xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          ShowGridLines ="True" >
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="60*" />
        </Grid.ColumnDefinitions>

        <Button Content="Button No. 1" Grid.Row="0" Grid.Column="0" />

        <GridSplitter HorizontalAlignment="Center" Width="6"
                      Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" />

        <Button Content="Button No. 4-2" Grid.Row="0" Grid.Column="2" Width="100" />
        <Button Content="Button No. 4-1" Grid.Row="0" Grid.Column="2" Width="50" />

    </Grid>
</ScrollViewer>
</Page> 
```

根据萨尔瓦多的回答，这有效：

```
 <Button VerticalAlignment="Top" HorizontalAlignment="Left" Content="Button No. 1" Grid.Row="0" Grid.Column="0" Height="100"/>

        <GridSplitter HorizontalAlignment="Center" Width="6"
                      Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" />

        <Button VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0" Content="Button No. 4-2" Grid.Row="0" Grid.Column="2" Height="100" Width="100" />
        <Button VerticalAlignment="Top" HorizontalAlignment="Left" Margin="400,0,0,0" Content="Button No. 4-1" Grid.Row="0" Grid.Column="2" Height="150" Width="50" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T21:19:56.640

您没有设置`VerticalAlignment`或`HorizontalAlignment`属性，因此默认情况下它们是居中的。

您需要设置这些属性并将它们与`Margin`wpf 元素的属性结合使用。

看看这篇[介绍 WPF 布局](http://www.wpftutorial.net/LayoutProperties.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T21:19:09.837

您可能希望在网格位置（Row # + Column #）使用[容器控件](http://msdn.microsoft.com/en-us/library/bb514628%28v=vs.90%29.aspx)（如[Canvas](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas%28v=vs.90%29.aspx)、[DockPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.dockpanel%28v=vs.90%29.aspx)、[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel%28v=vs.90%29.aspx)）之一，然后将控件放入其中。

这使得在单个网格位置布局多个控件变得更加容易。

# c++ - 如何遍历一组不同类型的类

> ID：10131947
> 
> 赞同：0
> 
> 时间：2012-04-12T21:13:40.617
> 
> 标签：c++, arrays, inheritance, pointers

我的 C++ 程序中有以下类：

*   游戏实体
*   继承自 game_entity 的 game_creature

我计划有更多的类继承自game_entity、game_creature，甚至是其他一些较低的类。

我还有一个 game_entity 类型的数组，其中包含 game_entity 实例和 game_creature 实例。现在我的问题是这样的：当数组传递给函数时，我尝试循环遍历数组，但是当它到达 game_creature 对象时，它没有使用下标形式将指针增加足够多。

例如：

如果第一个对象是一个 game_creature（它的字段比 game_entity 多），它将访问前 3 个字段（在 game_creature 上与在 game_entity 上相同），但是当我这样做时`array[1]`，它将访问第一个 game_creature 中的后两个整数作为第二个 game_creature 对象中的前两个整数。

这意味着如果我有一个 x = 1、y = 2、sprite* = Something、movespeed = 5 和 health = 25 的 game_creature，那么它将以 5 和 25 访问第二个 game_creature 对象的 x 和 y，这实际上是第一个 game_creature 的 movespeed 和 health。

我认为这是因为指针指向“game_entity”的 x 和 y 的内存实际上是“game_creature”的移动速度和健康所在的位置。但是，我不知道如何创建一个 game_entities 数组，因此它可以保存我游戏网格上的任何类型的对象，但仍然可以访问正确的字段并每次将指针递增足够多。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T21:18:58.997

您可以创建一个指向基类的指针数组，它将“保存”您的任何实体，但您不能创建基类的数组并假设它也将保存您的子类，因为在C/C++，数组是固定长度的，每个元素是固定数量的。即使您使用了向量或其他东西，它仍然无法正常工作，因为每个元素都是纯粹的基类。

在 C++11 中，您可以使用元组，但它可能不是您想要的。我会使用指向基类的指针数组（或者更好的是，智能指针的容器类），并遍历它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:17:55.417

你不能有一系列不同的类。如果您尝试将派生类放入基类数组中，您将得到切片。您需要使用指向基类的指针数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:18:07.313

您应该使用多态性，并对其使用 C++ 标准支持（使用虚拟基类迭代“实例”指针的容器）。

# iphone - 不使用 Game Center 发送游戏邀请

> ID：10131950
> 
> 赞同：0
> 
> 时间：2012-04-12T21:13:59.930
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我想知道是否有人可以告诉我 Wordfeud 和 Draw Something 等应用程序如何发送游戏邀请？我假设他们没有使用游戏中心。他们是否使用推送通知来执行此操作？如果是这样，如果用户不接受应用程序的推送通知，他们如何处理？

应用程序 Rumble 无需使用 Game Center 或推送通知即可处理游戏邀请。他们是否在服务器端将邀请作为会话处理？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:34:34.010

是的，他们确实使用推送通知，而他们如何处理这些消息的缺失的答案是：根本没有。根本没有办法这样做（除了可能为每个邀请发送一封电子邮件，但是嗯）。

# c# - 使 OpenFileDialog 尺寸更小的简单方法？

> ID：10131953
> 
> 赞同：1
> 
> 时间：2012-04-12T21:14:18.393
> 
> 标签：c#, .net, winapi, io

我正在为具有 480*800 垂直屏幕的手持 x86 设备开发 .NET 应用程序。除了打开文件/保存文件设计之外，一切都很好。默认`OpenFileDialog`和其他类似的对话框在显示时宽度太大，使“打开”按钮部分超出屏幕，而“取消”按钮全部显示在屏幕之外。实际上用户可以在显示后调整对话框的大小，但是存在宽度仍然大于 480的**MINIMUM SIZE 。**

据我所知，无法`OpenFileDialog`直接操作，也无法进行任何继承。继承自的`FileDialog`是`OpenFileDialog`不可继承的。而且`CommonDialog`看起来太远了。谷歌搜索显示了一些商业对话框组件，它们有很多我不想要的功能，黑客解决方案最终得到一个项目，其中至少有 4 个全新的类和一些我也不需要的 Win32 API 和消息传递机制。

这很简单，我只是想要一个简单的方法来将 OpenFileDialog 的宽度固定为 480 或更小。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:50:50.557

打开文件对话框是一个系统对话框。这意味着您的应用程序无法控制它。它由用户控制。如果用户想在一个应用程序中改变它的大小，它将在所有应用程序中获得新的大小，因为这个大小是用户的偏好。

通用对话框的目的是为用户提供标准的 UI 部分。想象一下，如果每个应用程序都使用自己的 OpenFileDialog，那么用户搜索要打开的文件会有多不舒服。

但是，您可以构建自己的对话框。

# ruby-on-rails - 使用 Nokogiri 将根文本节点包装在 ' 同时保持' 和' 在里面

> ID：10131954
> 
> 赞同：1
> 
> 时间：2012-04-12T21:14:38.240
> 
> 标签：ruby-on-rails, ruby, nokogiri

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:43:38.350

正确的方法可能是使用 xslt 但如果你只是处理短片段，你可以逃脱：

```
str.split('<br/>').map{|p| '<p>' + p + '</p>'}.join 
```

# c++ - C++：模板实现（代码风格）

> ID：10131956
> 
> 赞同：1
> 
> 时间：2012-04-12T21:14:49.083
> 
> 标签：c++, templates, coding-style

模板类的实现必须包含在定义它的头文件中。这样的类的实现应该在课堂上还是常规的（就像你对其他所有类一样）但只在头文件中完成？

常规方法的问题是实现变得非常臃肿，因为您需要将模板定义放在前面。我想知道哪种方法是最常见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:18:37.077

可能最常见的方法是编写类定义，然后在另一个文件中编写实现，然后*`#include`将实现文件放在头文件的底部，*并且不要将其列在要编译的文件中。这样它们在不同的文件中，但编译器很满意，因为预处理后定义和声明在同一个文件中。

例子：

```
// header.h

template<typename T>
struct A {
    int dostuff();
};

#include "header.template" 
```

* * *

```
// header.template (not header.cpp, to make it clear that this doesn't get compiled)

template<typename T>
int A::dostuff() { 
   // do stuff
} 
```

预处理器完成后，文件看起来像

```
template<typename T>
struct A {
    int dostuff();
};

template<typename T>
int A::dostuff() { 
   // do stuff
} 
```

# arrays - 你能有 mongo $push prepend 而不是 append 吗？

> ID：10131957
> 
> 赞同：44
> 
> 时间：2012-04-12T21:14:49.373
> 
> 标签：arrays, mongodb

当我执行 mongo $push 时，我希望在集合的开头添加 push 添加而不是附加到末尾。

是否可以进行原子推送更新，将元素添加为第一个而不是最后一个？

* * *

**2014 更新**：[是的，你可以](http://docs.mongodb.org/manual/reference/operator/update/position/)。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-13T06:13:41.237

从 MongoDB v2.5.3 开始，`$position`您可以将一个新的运算符与该`$each`运算符一起包含在`$push`查询中，以指定数组中您要插入值的位置。

这是文档页面中的一个示例，用于在数组索引 2 处添加元素 20 和 30::

```
db.students.update( { _id: 1 },
                    { $push: { scores: {
                                         $each: [ 20, 30 ],
                                         $position: 2
                                       }
                             }
                    }
                  ) 
```

参考：[http ://docs.mongodb.org/master/reference/operator/update/position/#up._S_position](http://docs.mongodb.org/master/reference/operator/update/position/#up._S_position)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-09T06:14:32.933

使用带有 $set 的负索引作为 prepend，在 mongo v2.2 中测试：

```
> db.test.insert({'array': [4, 5, 6]})
> db.test.find()
{ "_id" : ObjectId("513ad0f8afdfe1e6736e49eb"),
  "array" : [ 4, 5, 6 ] }

//prepend 3
> db.test.update({"_id" : ObjectId("513ad0f8afdfe1e6736e49eb")}, 
                 {'$set': {'array.-1':     3}})
> db.test.find()
{ "_id" : ObjectId("513ad0f8afdfe1e6736e49eb"), 
  "array" : [ 3, 4, 5, 6 ] }

//prepend 2
> db.test.update({"_id" : ObjectId("513ad0f8afdfe1e6736e49eb")}, 
                 {'$set': {'array.-1':     2}})
> db.test.find()
{ "_id" : ObjectId("513ad0f8afdfe1e6736e49eb"), 
  "array" : [ 2, 3, 4, 5, 6 ] }

//prepend 1
> db.test.update({"_id" : ObjectId("513ad0f8afdfe1e6736e49eb")}, 
                 {'$set': {'array.-1':     1}})
> db.test.find()
{ "_id" : ObjectId("513ad0f8afdfe1e6736e49eb"), 
  "array" : [ 1, 2, 3, 4, 5, 6 ] } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T21:27:53.190

前几天有人问过类似的问题。不幸的是，简短的回答是“不”，但对此功能有一个开放的请求。
[https://jira.mongodb.org/browse/SERVER-2191](https://jira.mongodb.org/browse/SERVER-2191) - “$push() 到数组前面”

在另一个线程上有更多信息以及可能的解决方法：“使用 MongoDB 数组作为堆栈” -[使用 MongoDB 数组作为堆栈](https://stackoverflow.com/questions/10094573/use-mongodb-array-as-stack)

希望以上内容对您有用并帮助您找到可接受的解决方法。

# javascript - 在javascript中遍历xmpp iq节

> ID：10131958
> 
> 赞同：1
> 
> 时间：2012-04-12T21:14:52.480
> 
> 标签：javascript, jquery, jquery-mobile, xmpp, openfire

我设法 sendIQ 并从 openfire 服务器获得响应。

现在我无法出于我的目的遍历响应：

有一种“find”方法可以搜索“list”、“other1”等节点，但我需要遍历“list”中包含的所有节点类型。IQ 响应如下所示：

```
 <iq type="get" id="sid_225">
   <list xmlns="urn:xmpp:archive" end="2012-04-30T22:00:00Z" start="2012-03-31T22:00:00Z">
     <set xmlns="http://jabber.org/protocol/rsm">
      <max>30</max>
     </set>
     <other1> asdf </other1>
     <othern> aasdf </othern>
   </list>
</iq> 
```

我需要“列表”的所有节点类型。我到目前为止：

```
$(iq).find("list").children().each(function () {
  alert($(this).text());
} 
```

但这给了我来自不同类型节点（如“other1”和“othern”）的“asdf”等文本。如何获取节点的类型（即“set”、“other1”）？我也试过`$(this).val()`）但它也不起作用。

请帮忙....

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:23:33.807

您可以`nodeName`在循环中获取每个元素的：

```
$(iq).find("list").children().each(function () {
  alert(this.nodeName + ' = ' + $(this).text());
}); 
```

对于数组/对象中的每个索引，您可以像上面一样在循环内访问这些变量。

这是一个演示：http: [//jsfiddle.net/7AKL6/2/](http://jsfiddle.net/7AKL6/2/)

文档`.each()`：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

文档`Node.nodeName`：[https ://developer.mozilla.org/en/Document_Object_Model_(DOM)/Node.nodeName](https://developer.mozilla.org/en/Document_Object_Model_(DOM)/Node.nodeName)

另请注意，您的 XML 示例中有一个错误：

```
<other1> asdf </other> 
```

应该：

```
<other1> asdf </other1> 
```

正确关闭自己。

# css - CSS下拉菜单在IE8中不起作用

> ID：10131959
> 
> 赞同：0
> 
> 时间：2012-04-12T21:15:08.383
> 
> 标签：css, internet-explorer-8

我在 CSS 中创建了一个下拉菜单。

下拉菜单在 Firefox、Chrome 和 IE8 中正确呈现。但在 IE8 中，我无法从下拉列表中进行选择。它立即消失..

css 文件...

```
ul {
/*  font-family: Arial, Verdana;
  font-size: 14px;*/
  margin: 0;
  padding: 0;
  list-style: none;
 }
ul li {
  display: block;
  position: relative;
  float: left;
}
li ul { display: none; }
ul li a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background: #2C5463;
  margin-left: 1px;
  white-space: nowrap;
}
ul li a:hover { background: #617F8A; }
li:hover ul {
  display: block;
  position: absolute;
  left:none;
}
li:hover li {
  float: none;
  font-size: 11px;
}
li:hover a { background: #617F8A; }
li:hover li a:hover { background: #95A9B1; } 
```

~

HTML（此处为 php 文件..）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" >
<HEAD>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<TITLE></TITLE>
<link rel="stylesheet" href="menu.css" type="text/css">
</HEAD>
<BODY>
<div id="header" class="top-bottom">
<ul id="menu">
  <li><a href="">Home</a></li>
  <li><a href="">Profile</a>
    <ul>
    <li><a href="./edit_profile.php">Edit Profile</a></li>
    <li><a href="">View Profile</a></li>
    <li><a href="">Add Education</a></li>
    </ul>
  </li>
  <li><a href="">My Connections</a></li>
  <li><a href="">Change Password</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:07:39.050

您的许多样式都被您的子菜单继承，因此您必须添加更具体的选择器才能正确定位您的第一级和子菜单。此外，您绝对将您的子菜单定位在悬停上，这应该设置在主声明上而不是状态上。这是一个固定版本：

**CSS**

```
ul {
/*  font-family: Arial, Verdana;
  font-size: 14px;*/
  margin: 0;
  padding: 0;
  list-style: none;
 }
#menu > li { /* used the child selector here to properly target your first level menu items */
  position: relative;
  float: left;
}
#menu li ul {
    display: none;
    position: absolute; /* moved the positioning to the main declaration instead */
    left:0; /* fixed this propery, there is no left:none as you had it before */
    top:100%;
}

#menu a {
  display: block;
  text-decoration: none;
  color: #ffffff;
  border-top: 1px solid #ffffff;
  padding: 5px 15px 5px 15px;
  background: #2C5463;
  margin-left: 1px;
  white-space: nowrap;
}
#menu li a:hover { background: #617F8A; }

#menu li:hover ul {
  display: block;
}

#menu li:hover li {
  font-size: 11px;
}
#menu li:hover a { background: #617F8A; }
#menu li:hover li a:hover { background: #95A9B1; } 
```

# php - WSO2 PHP 框架使用 wsdl 声明的方法

> ID：10131965
> 
> 赞同：1
> 
> 时间：2012-04-12T21:15:54.407
> 
> 标签：php, wsdl, wso2

再会。我想使用 PHP 和 WSO2 框架在互联网的 wsdl 中使用声明的 web 服务（出于流数据的原因，我需要使用它）。通过阅读文档和示例，我最终得到了以下内容

```
 $wsclient = new WSClient(array("wsdl" => $director->getWsReport()));
    $proxy = $wsclient->getProxy();

    $ret_val = $proxy->getMessage($params); 
```

在哪里：

1.- $director->getWsReport() 是 wsdl 的 URL 2.- $params 是 xsd 中定义的参数数组（key->value） 3.- getMessage 是定义在wsdl

在调试 $wsclient 和 $proxy 上方的段时，但是当我执行“getMessage”方法时，我最终什么也没收到（没有异常，没有结果），就好像这是一个超时问题。

服务和方法已经启动，因为它已经过测试。

另一个问题（我不确定是否相关）是在 netbeans 中，自动完成选项不适用于这些框架元素。起初我认为它可能安装不正确，但通过检查 phpinfo.php 我可以看到所有已注册的依赖项（正如 WSO2 安装教程所示）。

抱歉，我不能更具体，但是很难找到可以直接帮助解决我的问题的文档。希望我能和你们一起找到缺失的专业知识。

非常感谢您抽出宝贵的时间，并希望收到有用的数据。

# php - PHP循环随机增加？

> ID：10131966
> 
> 赞同：0
> 
> 时间：2012-04-12T21:15:56.763
> 
> 标签：php, loops, random, increment

我们都知道基本的

```
$i = 1;

while ($i<100){
    echo $i;
    $i++
} 
```

问题：如何在每次循环时将 $i 增加 1 到 5 之间的随机数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T21:17:17.183

就像你用文字描述的那样：通过用 1 到 5 之间的随机数递增它。

```
while ($i < 1000) {
  echo $i;
  $i += rand(1,5);
} 
```

[`rand()`](http://php.net/rand)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T21:18:20.880

在一行中：

```
for ($i = 1; $i < 1000; $i += rand(1, 5)) echo $i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:20:37.880

`mt_rand`速度更快，使用 Mersenne Twister 算法 (1997)

```
while ($i < 1000) {
  echo $i;
  $i += mt_rand(1,5);
} 
```

# java - 向按钮添加两个动作侦听器似乎不起作用

> ID：10131968
> 
> 赞同：1
> 
> 时间：2012-04-12T21:16:02.003
> 
> 标签：java, swing

我有以下简单的代码：

```
button.addActionListener(new ComeOnListener(jTextArea1));
button.addActionListener(new ComeOnListener(jTextArea2)); 
```

ComeOnListener 被实现为私有类（试图将其实现为匿名在语法上令人困惑）并且它附加了“来吧！” 在它作为参数接收的文本区域上。然而，它只是将它附加到 jTextArea2 上，完全忽略了 jTextArea1。监听器如下：

```
private class ComeOnListener implements ActionListener {

    JTextArea auxTextArea;

    public ComeOnListener(JTextArea jta) {

        auxTextArea = jta;

    }

    @Override
    public void actionPerformed(ActionEvent e) {

        auxTextArea.append("¡Come on!");
        //throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

有人可以告诉我发生了什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:33:46.480

与往常一样，您应该发布[SSCCE](http://sscce.org/)。这是一段显示所需功能的工作代码

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class AppendTextArea {

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = createUI();
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.pack();
        frame.setVisible( true );
      }
    } );
  }
  private static JFrame createUI(){
    JFrame result = new JFrame( "TestFrame" );
    JTextArea firstArea = new JTextArea( 30, 30 );
    JTextArea secondArea = new JTextArea( 30,30 );
    JButton appendButton = new JButton( "Append" );
    appendButton.addActionListener( new ComeOnListener( firstArea ) );
    appendButton.addActionListener( new ComeOnListener( secondArea ) );

    result.add( firstArea, BorderLayout.NORTH );
    result.add( secondArea, BorderLayout.CENTER );
    result.add( appendButton, BorderLayout.SOUTH );

    return result;
  }
  private static class ComeOnListener implements ActionListener {
    private final JTextArea auxTextArea;
    public ComeOnListener(JTextArea jta) {
      auxTextArea = jta;
    }
    @Override
    public void actionPerformed(ActionEvent e) {
      auxTextArea.append("Come on!");
    }
  }
} 
```

如您所见，您发布的代码只是复制到此代码段中并按预期工作。问题很可能位于代码中的其他位置。

# php - CakePHP：获取登录用户的关联对象

> ID：10131972
> 
> 赞同：1
> 
> 时间：2012-04-12T21:16:40.290
> 
> 标签：php, cakephp, cakephp-model

我尝试将关联模型的数据接收给当前登录的用户。这是我当前的用户模型：

```
class User extends AppModel {
    public $name = 'User';

    public $hasMany = array(
        'Website' => array(
            'className'  => 'Website',
            'foreignKey' => 'user_id'
        )
    );
} 
```

这是与用户模型相关联的网站模型：

```
class Website extends AppModel {
    public $name = 'Website';
    public $belongsTo = array(
        'User' => array(
            'classname' => 'User',
            'foreignKey' => 'user_id'
        )
    );
} 
```

当我尝试获取登录用户的网站时，我不想在数据库请求的条件下以静态方式设置网站的 user_id。所以我尝试使用这些关联：

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->Website->User->id = $this->Auth->user('id');
    // OR
    $this->Website->User->set($this->Auth->user());
}

public function index() {
    $this->set('websites', $this->Website->find('all'));
} 
```

但它会返回所有网站，而不是仅返回具有正确 user_id 的网站。

有没有办法按照我建议的方式去做？如果是，我做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:32:29.867

如果您使用 Model->find('all') 将检索该模型的所有记录。

使用您的belongTo 关系，当您检索用户（使用find->）时，Cake 将检索同一集合中的网站。根据您处理身份验证的方式，该数据可能是自用户会话开始以来

# javascript - 如何为这种格式 B001169875 创建正则表达式？

> ID：10131974
> 
> 赞同：-2
> 
> 时间：2012-04-12T21:16:44.600
> 
> 标签：javascript, regex

我需要创建一个正则表达式来匹配这种格式：B001169875

有人能帮我吗？

尝试使用 jQuery Validate 自定义方法使其工作：

```
 jQuery.validator.addMethod("brandnumber", function(value, element) {
       return  /B\d{9}/m.test(value);
  }, "Account number must start with B and be followed by 9 numbers."); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:18:11.823

您应该指定有关格式的更多详细信息。但这将是这样的：

```
[A-Z][0-9]{9} 
```

这意味着：一个大写字母 (A..Z)，然后是九位数字 (0..9)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T21:25:49.480

你说字符串总是`B`以数字开头。正则表达式取决于您要匹配多少个数字：

*   正好 9 个数字：[`/B\d{9}/`](http://regexpal.com/?flags=g&regex=B%5Cd%2b&input=B001169875)

*   零个或多个数字：[`/B\d*/`](http://regexpal.com/?flags=g&regex=B%5Cd%2a&input=B001169875)

*   一个或多个数字：[`/B\d+/`](http://regexpal.com/?flags=g&regex=B%5Cd%2b&input=B001169875)

此外，您可能必须使用`^`and`$`指定字符串应仅包含 B 和数字`/^B\d{9}$/`：`/^B\d*$/`或`/^B\d+$/`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T21:22:21.170

如果它总是以 a 开头，`B`后跟 9 个数字，那么它会这样做：

```
^B\d{9}$ 
```

你可以像这样使用它（取决于你想如何使用它）：

```
jQuery.validator.addMethod("brandnumber", 
    function(value, element) { 
        return /^B\d{9}$/m.test(value); 
    }, 
    "Account number must start with B and be followed by 9 numbers."
); 
```

# facebook - 发布到 Facebook 页面和 Twitter 帐户

> ID：10131985
> 
> 赞同：0
> 
> 时间：2012-04-12T21:17:28.090
> 
> 标签：facebook, facebook-graph-api, twitter

我们通过 Facebook API 成功地发布到 Facebook 页面 - 既作为页面管理员使用他们的个人访问令牌，也作为页面本身使用 manage_pages 权限。

我们正在尝试进行设置，以便帖子也可以发送到 Twitter 帐户。有问题的 Facebook 页面之前是通过管理员手动链接到 facebook.com/twitter 上的相应 Twitter 帐户。然而，尽管 facebook 页面上的手动帖子可以交叉发布到 twitter，但通过 api（无论是作为页面管理员还是页面）的程序化帖子不会显示在那里。

这是一个错误还是故意的功能？任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:06:44.567

只需包含头文件#import "Twitter/Twitter.h" 并在项目中添加框架 Twitter.framework..

并为按钮操作添加以下行

TWTweetComposeViewController *tweeter = [[TWTweetComposeViewController alloc] init]; [高音 setInitialText:@"你的分数"]; [self presentModalViewController：高音动画：YES]；

这一切......你的分数将被发布......

如果你想添加图片使用 [tweeter addImage:image]; 如果你想添加 url 使用 [tweeter addUrl:@"your url"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:44:08.113

您可以使用[Twitter API](https://dev.twitter.com/)直接在 Twitter 上发帖。

# javascript - 如何使用 jQuery 滑块更新 Flash 播放器的歌曲音量？

> ID：10131986
> 
> 赞同：0
> 
> 时间：2012-04-12T21:17:29.420
> 
> 标签：javascript, jquery, jquery-ui, flash

我在使用下面的代码时遇到了一些问题。Flash 播放器有一个默认的音量滑块，但我想使用 jQuery 滑块来更改音量。当我移动滑块时，音量值（nr）正在改变，但歌曲的音量没有。

谢谢你的意见。

```
<!DOCTYPE html>
<script type='text/javascript'>
$(document).ready(function(){

DefVol=$('#ArVol').val();

PlayPt1='<object type="application/x-shockwave-flash" data="http://flash-mp3- player.net/medias/player_mp3_maxi.swf" width="25" height="25"><param name="movie" value="http://flash-mp3-player.net/medias/player_mp3_maxi.swf" /><param name="FlashVars" value="mp3='

PlayPt2='&amp;showslider=0&amp;width=25&amp;autoplay=1&amp;volume='+DefVol+'" />  </object>'

$("#RegVol").slider({orientation:'horizontal', range:'min', value:DefVol,min:0, max:200,  slide:function(event,ui){DefVol=parseInt(ui.value/200), $( "#ArVol" ).val(ui.value );}

})
$( "#ArVol" ).val($( "#RegVol" ).slider( "value" ) );

$('#PlayMp3').click(function(){ 
IaSrc='song.mp3'

$('#showPlay').html(PlayPt1+IaSrc+PlayPt2)
})
})
</script>
<table><tr>
<th><div id='RegVol' style='width:150px;margin:0px 10px'></div></th>
<th><input id='ArVol' size='1' value='55'></th>
<th><div id='showPlay'></th>
</tr></table>

<input type='button' value='Play' id='PlayMp3'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:03:40.970

您是否有权访问 Flash 源或源是否公开了外部接口？如果没有，不要费心尝试你不能。

编辑：只需检查您正在使用的播放器的文档，我花了 5 秒钟：

[http://flash-mp3-player.net/players/js/documentation/](http://flash-mp3-player.net/players/js/documentation/)

# c# - 是否有更简单的语法来访问嵌入在程序集中的资源？

> ID：10131987
> 
> 赞同：3
> 
> 时间：2012-04-12T21:17:31.870
> 
> 标签：c#, .net, .net-4.0

现在我在一个班上有几个：

```
string upgrade_file 
    = new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream(
        Assembly.GetExecutingAssembly().GetName().Name 
        + ".schemas.template.db_upgrades.txt")
        ).ReadToEnd(); 
```

我可以编写一个包装函数来简化对嵌入式资源的访问（如果必须的话，我会这样做），但是有没有更简单或更优雅的方式来使用 .Net 本地访问它们？

例如，我觉得奇怪的是 GetManifestResourceStream(...) 不是静态的。另一个例子：是否有一些方法返回一个字符串而不是文本文件的流？

**更新 1**：

需要明确的是，我在子目录中有文本文件，我想要：

1.  这些文件仍然是单独的文件（例如，能够单独对它们进行源代码控制）
2.  这些文件仍然是*嵌入*资源，即与程序集一起编译。

现在我正在这样做，如图所示： ![在此处输入图像描述](../Images/89cc0e1bb10fc0d6df4c435b2259161d.png)

**更新 2**：

我没有设法使用答案中的任何内容来简化对文件的访问。

这是我现在使用的辅助方法，以防其他人发现它有用：

```
/// <summary>
/// Get the content of a text file embedded in the enclosing assembly.
/// </summary>
/// <param name="resource">The "path" to the text file in the format 
/// (e.g. subdir1.subdir2.thefile.txt)</param>
/// <returns>The file content</returns>
static string GetEmbeddedTextFile(string resource)
{
    return new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream(
        Assembly.GetExecutingAssembly().GetName().Name + "." + resource)).ReadToEnd();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:23:08.107

我的项目中有一个名为的资源文件，`Resource1`其中包含一个 TXT 文件和一个二进制文件。
我能做到

```
string str = Resource1.TxtFile;
byte[] file = Resource1.BinaryFile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:31:35.933

您是否知道在 VS 中，如果您有一个 Resources.resx 文件，它会生成一个真正的类的代码？您可以查看并直接使用它，无需任何元操作。

如果您双击 Rsources.resx 文件并打开设计器，您可以找到一个下拉列表，如果您需要，则将生成的类的访问权限从内部更改为公共。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T13:30:43.743

我个人的方法是为 Assembly 类编写一个扩展，因为这似乎是一个无论如何都应该包含在该类中的方法。

因此，如上所述，首先确保您的文本文件被标记为“嵌入式资源”，然后使用类似于以下的代码：

```
public static class Extensions
{
    public static string ReadTextResource(this Assembly asm, string resName)
    {
        string text;
        using (Stream strm = asm.GetManifestResourceStream(resName))
        {
            using (StreamReader sr = new StreamReader(strm))
            {
                text = sr.ReadToEnd();
            }
        }
        return text;
    }
} 
```

这允许您从 DLL 或您希望使用如下代码的任何程序集加载它：

```
 string content = Assembly.GetExecutingAssembly().ReadTextResource(myResourceName); 
```

（上面可以更简洁地编码，但我使用这个是为了演示）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-12T21:25:26.613

```
string upgrade_file  = Resources.db_upgrades.txt 
```

# sql-server - 复制数据库向导从源中删除用户？

> ID：10131993
> 
> 赞同：1
> 
> 时间：2012-04-12T21:18:07.747
> 
> 标签：sql-server, sql-server-2005

我正在尝试在客户端站点上制作实时数据库的副本，以便客户端可以拥有一个测试数据库。（已经有一个，但它已经过时了。）我正在使用 SSMS 2005 的复制数据库向导并选择不需要分离源数据库的选项（SQL 管理对象方法）。

复制失败，但这不是我的问题。我会使用创建的日志来解决这个问题。但是，我现在已经尝试了两次，之后两次都从源数据库的列表中删除了一个用户。具体来说，它是为此数据库列出的唯一不是标准内置用户的用户。

我已经恢复了具有适当权限的用户，但这对我来说真的很奇怪。关于为什么会发生这种情况以及如何防止它的任何想法？

添马舰