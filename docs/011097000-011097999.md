# StackOverflow 问答 11097000-11097999

# javascript - 将对象/数组转换为 JSON？

> ID：11097002
> 
> 赞同：2
> 
> 时间：2012-06-19T08:17:04.593
> 
> 标签：javascript, json, extjs4.1

我有一个数组（它也可能是一个对象，我不知道我在说什么）：

```
grid.columns[0].text
grid.columns[1].text
grid.columns[2].text 
```

等等。我想把它转换成 JSON。我试过使用`JSON.stringify(grid.columns.text)`但没有用：它给出了`null`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:25:51.537

尝试

```
JSON.stringify(grid.columns.map(function(item) {
    return item.text;
}));
// ["value of text 0", "value of text 1",...] 
```

* * *

或者

```
JSON.stringify(grid.columns.map(function(item) {
    return {text:item.text};
}));
// [{"text":"value of text 0"},{"text":"value of text 1"},..] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:26:35.733

根据您提供的结构，使用`JSON.stringify(grid.columns.text)`不会起作用：

请尝试以下操作：

```
JSON.stringify(grid.columns); 
```

这应该产生类似的东西：

```
[
  {"text": "value"},
  {"text": "value2"},
  {"text": "value3"},
  ...
] 
```

# iphone - 如何在垂直 UIScrollView 中延迟加载我的 UIView

> ID：11097004
> 
> 赞同：2
> 
> 时间：2012-06-19T08:17:07.313
> 
> 标签：iphone, uiview, uiscrollview, lazy-loading

我有一个垂直的 UIScrollView，其中包含几个缩略图（UIViews）。在我的 viewWillAppear 中，我正在用 200 个缩略图填充我的 UIScrollView。

滚动和表示这个视图并不需要很长时间，但是加载我的整个缩略图视图确实如此。因此，我正在寻找一种方法，可以在 viewWillAppear 上显示前 20 个缩略图，并将其余的缩略图加载到 UIScrollView 的委托方法上`-(void) scrollViewDidScroll:(UIScrollView *)scrollView{`。

然而，实际的实现对我来说并不是很清楚。我是在 viewWillAppear 上预加载所有缩略图还是只预加载前 20 个？如何跟踪需要在 scrollViewDidScroll 上绘制的新缩略图的位置？希望有人能指出我正确的方向。

这是我当前 viewWillAppear 的实现，它绘制了我的缩略图

```
for (int i = 0; i <= 20; i++){
            birdRow = (int) floor(i / 4);
            birdColumn = (i % 4) + 1; 
            paddingX = 125;
            UIView * thumbnail = [[UIView alloc] initWithFrame:CGRectMake(170*birdColumn - paddingX, 180*birdRow + 20, 160, 170)];
            [scroller addSubview:thumbnail];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T12:45:36.007

使用 UICollectionView。它会延迟加载 UICollectionViewCells，就像 UITableView 会延迟加载行一样。

每个单元格都可以是缩略图或您想要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:45:25.650

我所做的与您想要的有所不同，或者如果我正确地进行了一些修改，请参见以下代码

用于存储滚动视图的最后位置

```
float lastContentOffset; 
```

还使用一个用于跟踪数据的索引来加载后记所需的数据

```
NSInteger index; 
```

在第一次感觉到滚动视图时，我将值分配给 index 和 lastContentOffset

```
index = Currently shown image index;
lastContentOffset = scrollview.contentOffset.x;//it shows currently visible rect's origin's x value 
```

现在在滚动视图的委托方法中`scrollViewDidEndDecelerating:`，我用来更改如下值

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    NSLog(@"ScrollViewDidScroll is called"); 
    if(lastContentOffset < scrollView.contentOffset.x)
    {
        index += (int)(scrollview.contentOffset.x - lastContentOffset)/scrollview.frame.size.width;
        NSLog(@"Index incremented %d",index);
        //Load required new images also can remove some of the images
    }
    else if(lastContentOffset > scrollView.contentOffset.x)
    {
        index -= (int)(lastContentOffset - scrollview.contentOffset.x)/scrollview.frame.size.width;
        NSLog(@"Index decremented %d",index);
        //Load required new images also can remove some of the images
    }
    lastContentOffset = scrollView.contentOffset.x;
    NSLog(@"New lastContentOffset %.2f",lastContentOffset);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:29:27.977

为视图制作操作队列（NSOperation Queue）。

以下链接将为您提供帮助： [http ://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)

# android - 有没有办法在没有root设备的情况下将ffmpeg命令移植到Android？

> ID：11097008
> 
> 赞同：0
> 
> 时间：2012-06-19T08:17:18.390
> 
> 标签：android, ffmpeg, screen, capture

此链接[http://www.roman10.net/how-to-port-ffmpeg-the-program-to-androidideas-and-thoughts/](http://www.roman10.net/how-to-port-ffmpeg-the-program-to-androidideas-and-thoughts/)谈论将 ffmpeg 命令移植到 Android。

谁能描述得更详细些？

我的目的是记录用户在 Android 设备上的行为并保存为包含用户声音的视频文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:21:06.157

为 android构建**FFMPEG作为分片库并使用****Android NDK**在您的 android 应用程序中使用它，为此您不需要设备上的 root 权限。它像其他构建库一样工作。

在 Android 上查看这个 SO Question [FFMPEG](https://stackoverflow.com/questions/4725773/ffmpeg-on-android/4820282#4820282)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:31:07.280

FB 文件 /dev/graphics/fb0 归 root 所有，组设置为 graphics。由于常规的 android 应用程序不属于图形组，因此它们无法读取它。

要解决此问题，您可以创建一个使用 ffmpeg 库（静态）的本机应用程序（不是 JNI 应用程序，而是本机可执行文件），并使用 $adb push 命令通过 ADB 安装它。此二进制文件将由“shell”ID 所有，但属于图形组。这样就可以直接读取 FB。

你可以编写你的 Java 应用程序来与这个二进制文件对话（通过套接字）并控制它。ASL (Android Screenshot Library) 做了类似的事情，但不使用 ffmpeg 而是直接捕获屏幕截图。参考[http://code.google.com/p/android-screenshot-library/](http://code.google.com/p/android-screenshot-library/)

# jquery - jQuery - 无法向函数发送值

> ID：11097021
> 
> 赞同：0
> 
> 时间：2012-06-19T08:18:18.653
> 
> 标签：jquery

我想在更改输入字段的默认值后将数据发送到函数。

```
function change_pos(position, new_pos) {
    $.post(iloc, {a:"change_pos", position:position, new_pos:new_pos}, function(d){
        window.location = "[@HTTP_ADDR]/cms/gallery";
    });
}

<input type=\"text\" value=\"{$row['POSITION']}\" onchange=\"change_pos('{$row['POSITION']}', this)\" /> 
```

这个想法是发送当前和“新”的位置。但是该功能不接受它们。注意：PHP 没问题！jQuery是问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:22:20.663

`this`在`onchange`事件中替换为`this.value`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:23:56.547

`this`映射到的`new_pos`参数`change_pos()`是输入字段本身，而不是其中的值。尝试使用`this.value`in获得价值`onchange`

# url - Web Api：空白使 ASP.NET 4 Web Api (RC) 崩溃

> ID：11097023
> 
> 赞同：1
> 
> 时间：2012-06-19T08:18:20.193
> 
> 标签：url, crash, uri, whitespace, asp.net-web-api

在测试版中，我注意到如果我调用带有空白的 URI，框架会引发异常。

（是的，通常浏览器会用 '%20' 替换空格，但如果我使用 fiddler 或我自己的 HTTP 客户端，我可以杀死 web api）

现在，Web Api 命中 RC，但这个 bug 仍然存在。(NullReferenceException) 微软知道这个错误吗？

堆栈跟踪：

> 在 Microsoft.VisualStudio.WebHost.Request.IsBadPath() 在 Microsoft.VisualStudio.WebHost.Request.TryParseRequest() 在 Microsoft.VisualStudio.WebHost.Request.Process() 在 Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn)
> 在 Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn) 在 Microsoft.VisualStudio.WebHost.Server.OnSocketAccept(Object acceptedSocket) 在 System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔 ignoreSyncCtx) 在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() 在 System.Threading.ThreadPoolWorkQueue.Dispatch() 在 System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:24:28.423

异常的堆栈跟踪是什么？如果栈顶是这样的：

> WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Request.IsBadPath() 第 435 行 + 0x1e 字节 C# WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Request.TryParseRequest() 第 182 行 + 0x9 字节 WebDev.WebHost40.dll !Microsoft.VisualStudio.WebHost.Request.Process() 第 94 行 + 0x9 字节 C# WebDev.WebHost40.dll!Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Microsoft.VisualStudio.WebHost.Connection conn) 第 75 行 + 0xb 字节 C#

那么这是 Visual Studio Web 服务器中的一个已知错误。由于此 Web 服务器仅侦听 localhost，因此这不是安全问题，也不会被修复。

# java - 确保在 Java 中初始化 final 字段

> ID：11097024
> 
> 赞同：0
> 
> 时间：2012-06-19T08:18:27.137
> 
> 标签：java, final

我用多个构造函数扩展了一个类。我在我的子类中添加了一个 final 字段，当然需要在我自己的构造函数中对其进行初始化。

问题是我不想重新实现（大多数）超类的构造函数，所以我想做这样的事情：

```
public myConstructor(Object... params){
    super(params);
    try{
        this.finalField = "backup value";
    }
    catch(someException e){

    }
} 
```

这可能以某种方式或其他方式吗？

***编辑***：我意识到这种情况永远不会发生，因为超类构造函数永远不会调用我自己的构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:24:44.113

To simplify process of object initialization, usually I use the following solutions:

*   You could create a static-factory method which will be create object (and throw exceptions if needed) instead of constructors and provide common initialization functionality in reusable private method.
*   Also you could use Builder-pattern instead of multiple constructors. [http://en.wikipedia.org/wiki/Builder_pattern](http://en.wikipedia.org/wiki/Builder_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:25:00.893

Have all your constructors call one single constructor that sets the final field.

# join - 按顺序加入 csv

> ID：11097028
> 
> 赞同：1
> 
> 时间：2012-06-19T08:19:01.597
> 
> 标签：join, csv, merge

我正在尝试连接大约 30 个需要按正确顺序排列的 csv 文件。

我一直在研究使用 copy *.csv new.csv DOS 命令。这是否按照它们在目录中列出的顺序加入 csv 文件？因为使用替代方法会花费我很多时间：复制 file1 + file2 + file3 newfile 但是写下所有文件名需要很长时间。任何人都可以澄清这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T22:10:58.670

使用 copy *.csv new.csv 将使用文件名作为排序顺序（升序）加入 csv 文件。如果要使用不同的排序顺序加入 csv 文件，可以使用 copy file1 + file2 + file3 newfile。

# outlook - 在 Windows 小工具中拖放 Outlook 邮件

> ID：11097031
> 
> 赞同：1
> 
> 时间：2012-06-19T08:19:20.150
> 
> 标签：outlook, drag-and-drop

我从 Outlook 中拖动邮件或邮件附件。什么类型的参数数据放入 Outlook 中[`dataTransfer`](http://msdn.microsoft.com/en-us/library/ie/ms535861%28v=vs.85%29.aspx)？

在调用函数中完成丢弃时

```
function GetItemFromDrop() {
    var t1 = event.dataTransfer.files;
    var t2 = event.dataTransfer.types;
    var t3 = event.dataTransfer.items;
    var t4 = System.Shell.itemFromFileDrop(event.dataTransfer, intIndex);
} 
```

结果：`t1=t2=t3=t4=null`

从文件系统中拖动文件时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-22T01:10:23.180

`CF_FILEDESCRIPTOR`和`CF_FILECONTENTS`格式。

请参阅[当用户从电子邮件客户端拖放附件时上传失败](https://stackoverflow.com/questions/17184369/upload-fails-when-user-drags-and-drops-attachement-from-email-client/17197224#17197224)

# c - C代码解释

> ID：11097033
> 
> 赞同：1
> 
> 时间：2012-06-19T08:19:27.120
> 
> 标签：c

有一个以下函数应该在 2 个浮点值之间进行比较，但在某些特定情况下比常规比较更快（例如在 Cortex-A8 上）

```
int isGreater(float* f1, float* f2)
{
    int i1, i2, t1, t2;

    i1 = *(int*)f1; // reading float as integer
    i2 = *(int*)f2; // reading float as integer

    t1 = i1 >> 31;
    i1 = (i1 ^ t1) + (t1 & 0x80000001);

    t2 = i2 >> 31;
    i2 = (i2 ^ t2) + (t2 & 0x80000001);

    return i1 > i2;
} 
```

有人可以解释它是如何工作的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:23:00.200

此代码利用 IEEE 754 格式的结构来处理浮点数。该结构本身是专门为此类操作设计的，以便快速进行比较操作。

每个单精度 IEEE 754 数字包含三个部分（从 MSB 到 LSB 的顺序）：

*   符号位
*   指数部分（8 位）
*   尾数的有效位（23 位）

`f1`大于`f2`如果：

*   `f1`是正的和`f2`负的
*   `f1`并且`f2`都是正数，但`f1`指数大于`f2`
*   `f1`并且`f2`都是正数，并且具有相同的指数，但`f1`有效数大于`f2`
*   `f1`如果和`f2`为负，则与前两个相反

[如果它们是二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示，则可以将两个浮点数作为整数进行比较。不幸的是，IEEE 754 不使用二进制补码来表示负数，这就是为什么此代码执行转换以便能够将数字作为有符号整数进行比较。

以下是对每行代码的作用的逐步评论：

```
i1 = *(int*)f1; // reading float as integer
i2 = *(int*)f2; // reading float as integer 
```

这个使用了在大多数 32 位系统上将`sizeof(int) == sizeof(float)`浮点数读入常规有*符号*整数变量的事实。

```
t1 = i1 >> 31; 
```

这个提取 的符号位`f1`。如果`f1`为负，则其 MSB 为负`1`，因此`i1`为负。将其向右移动 31 位会保留符号，因此如果`i1`为负数`t1`，则所有位都会设置为`1`（等于 -1）。如果`f1`为正，则其符号位将为`0`并且最终`t1`将等于`0`。

```
i1 = (i1 ^ t1) + (t1 & 0x80000001); 
```

如果符号位是负数，则`1`此行将执行转换为二进制补码表示。`f1`

以下是它的工作原理：如果`f1`是正数，那么`t1`是`0`并且`(i1 ^ t1)`将只是`i1`并且`(t1 & 0x80000001)`将是`0`并且最终`i1`将保持其原始值。如果`f1`为负，则`t1`所有位都设置为`1`，RHS 上的第一个表达式将是 的位反转，`i1`第二个表达式将等于`0x80000001`。这种方式`i1`将被转换为它的位反转并被`1`添加。但这将导致一个正数，因为 MSB 将被清除，这就是为什么`0x80000000`还要添加以保持该数字为负数。

```
t2 = i2 >> 31;
i2 = (i2 ^ t2) + (t2 & 0x80000001); 
```

执行与上述相同的操作`f2`。

```
return i1 > i2; 
```

只需比较两个生成的有*符号*整数。大多数 CPU 都有专门的指令来在硬件中执行带符号的比较。

# iphone - 未使用数据搜索 UItableview 中的图像

> ID：11097035
> 
> 赞同：0
> 
> 时间：2012-06-19T08:19:35.627
> 
> 标签：iphone, xcode, uitableview, uisearchbar

我有一个`UITableView`包含每行中的名称以及每个名称的图像。在搜索特定名称时，不会搜索相同的图像`UITableViewCell`。第一行或单元格的图像保持不变。我如何也可以搜索图像？

我已经上传了搜索问题的图片。

[1]： http: [//i.stack.imgur.com/QcvtU.png](http://i.stack.imgur.com/QcvtU.png) “表格视图”

[2]： http: [//i.stack.imgur.com/RmsIv.png](http://i.stack.imgur.com/RmsIv.png) “在表格视图中搜索”

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier ];
} 
if(temp==1)
{
    cell.textLabel.text = [newarray objectAtIndex:indexPath.row];
    //cell.textLabel.text = [newarray2 objectAtIndex:indexPath.row];
}
else
{     
    cell.textLabel.text= [array objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:[imagearray objectAtIndex:indexPath.row]];
}
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:26:53.317

对于名称项目，您有 newarray 可变的，您也必须创建一个 newarrayimages。所以 alloc 和 init newarrayimages 像 newarray 并添加：

```
if(temp==1)
{
    cell.textLabel.text = [newarray objectAtIndex:indexPath.row];

    //line to add
    cell.imageView.image = [UIImage imageNamed:[newarrayimages objectAtIndex:indexPath.row]];

} 
```

试试这个，让我知道。经过

# newrelic - 我怎样才能看到最流行的新遗物请求？

> ID：11097036
> 
> 赞同：0
> 
> 时间：2012-06-19T08:19:36.983
> 
> 标签：newrelic

我在我的 heroku 应用程序上安装了新的遗物，似乎我得到了很多信息

我只是想知道是否可以看到像最受欢迎页面这样的简单统计数据？

就像是

```
mydomain.com/somepath  13 hits  
mydomain.com/somepath/deeper 3 hits  
mydomain.com/anotherpathe    26 hits 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:09:40.807

您可以在 Web 事务页面中看到这一点。有一个过滤器向您显示最高吞吐量的 Web 事务。

希望有帮助。如果您需要更详细的帮助，请随时写信 support@newrelic.com（他们非常好 :)

# java - 在 OpenFire 中刷新 VCard

> ID：11097041
> 
> 赞同：0
> 
> 时间：2012-06-19T08:20:05.783
> 
> 标签：java, xmpp, openfire, vcf-vcard

我为 OpenFire XMPP 服务器开发了一个 VCard 插件，主要目的是通过 HTTP 请求创建/更新和检索用户的头像。不幸的是，该插件没有按预期工作 - VCard 更改被传播到数据库（`ofVcard`表）中，但用户图片更新的用户和他的伙伴都看不到刷新的图像。以下是我创建/更新 VCard 的方法：

```
 ...
   XMPPServer server = XMPPServer.getInstance();
   VCardManager vcardManager = server.getVCardManager();

public void createOrUpdateVcard(String username, String vcard)
                              throws Exception {
                    SAXReader reader = new SAXReader();
                    reader.setValidation(false);
                    // convert String into InputStream
                    InputStream is = new ByteArrayInputStream(vcard.getBytes());
                    // read it with BufferedReader
                    BufferedReader br = new BufferedReader(new InputStreamReader(is));

                    try {
                              // Reading malformed XML will lead to DocumentException
                              Document document = reader.read(is);
                              Element vCardElement = document.getRootElement();
                              log.info("Username: " + username);
                              vcardManager.setVCard(username, vCardElement);
                    } catch (DocumentException e) {
                              throw new MalformedXmlException(e);
                    }
     }
     ... 
```

当我直接从客户端更改头像时（我们使用的是 Jitsi），所做的更改不仅会立即存储在数据库中，而且所有好友都会获得刷新的图像。我看到`VCardManager`我使用的在内部调度事件：

```
VCardEventDispatcher.dispatchVCardUpdated(username, newvCard); 
```

但它们似乎没有任何效果。

我无法弄清楚从内部和我自己的代码中调用`setVcard`该方法的方式之间有什么区别。我错过了什么？`handleIQ(IQ packet)``IQvCardHandler`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:05:56.173

好的，我会自己回答我的问题 - 也许有人会发现此信息有帮助。

事实证明，这并不像将图片存储到数据库中那么简单。有消息交换，预计将在相关方之间发生。此交换的关键部分是客户端发送的状态更新，该更新通知服务器并因此通知他的所有好友他的新个人资料图像。有关详细信息，请参阅[XEP-0153：基于 vCard 的头像](http://xmpp.org/extensions/xep-0153.html#usecases)。这是一段代码，它“模拟”将发送给所有用户好友的状态更新：

```
 public void createOrUpdateVcard(String username, String vcard)
        throws MalformedXmlException, UserNotFoundException, SetVcardException {
    SAXReader reader = new SAXReader();
    reader.setValidation(false);
    InputStream is = new ByteArrayInputStream(vcard.getBytes());

    try {
        // Reading malformed XML will lead to DocumentException
        Document document = reader.read(is);
        Element vCardElement = document.getRootElement();
        //Checking that the user exists
        User user = userManager.getUser(username);
        //This might be redundant
        String userUsername = user.getUsername();
        log.debug("Setting VCard for " + userUsername);
        //Storing vCard into the database
        VCardManager.getInstance().setVCard(userUsername, vCardElement);        

        Presence presence = new Presence();
        JID userJID = server.createJID(username, null);
        presence.setFrom(userJID);
        presence.setStatus("");
        presence.setPriority(30);

        Element xElement = presence.addChildElement("x", "vcard-temp:x:update");
        Element photoElement = xElement.addElement("photo");

        SecureRandom random = new SecureRandom();
                    //We do not care about the actual hash - just push updates every time
        String fakeHash = new BigInteger(130, random).toString(32);
        photoElement.setText(fakeHash);

        Element cElement = presence.addChildElement("c", "http://jabber.org/protocol/caps");
        cElement.addAttribute( "ext", "voice-v1 video-v1 camera-v1" )
        .addAttribute("hash", "sha-1");

        System.out.println("SENDING PRESENCE UPDATE:\n" + presence.toXML());
        broadcastUpdate(presence);

    } catch (DocumentException e) {
        throw new MalformedXmlException(e);
    }catch (UserNotFoundException e){
        throw new UserNotFoundException();
    } catch (Exception e){
        //Unfortunately setVCard method above just throws Exception.
        //This catch block is for wrapping it up
        throw new SetVcardException();
    }
} 
```

这是 PresenceUpdateHandler 类中稍微调整的方法：

```
private void broadcastUpdate(Presence update) {
    if (update.getFrom() == null) {
        return;
    }
    if (localServer.isLocal(update.getFrom())) {
        // Do nothing if roster service is disabled
        if (!RosterManager.isRosterServiceEnabled()) {
            return;
        }
        // Local updates can simply run through the roster of the local user
        String name = update.getFrom().getNode();
        try {
            if (name != null && !"".equals(name)) {
                Roster roster = rosterManager.getRoster(name);
                roster.broadcastPresence(update);
            }
        }
        catch (UserNotFoundException e) {
            log.warn("Presence being sent from unknown user " + name, e);
        }
        catch (PacketException e) {
            log.error(LocaleUtils.getLocalizedString("admin.error"), e);
        }
    }
    else {
        // Foreign updates will do a reverse lookup of entries in rosters
        // on the server
        log.warn("Presence requested from server "
                + localServer.getServerInfo().getXMPPDomain()
                + " by unknown user: " + update.getFrom());
    }
} 
```

对于调试 OpenFire 问题，我强烈建议在调试模式下在本地运行它 - 请参阅此处的说明：[2](http://community.igniterealtime.org/docs/DOC-1020)。请注意，较新的 Eclipse 版本没有从现有源创建项目，但您必须单击新建 -> Java 项目，取消选中使用默认位置复选框并浏览到项目位置。

# mysql - MySQL，如果在重复键上

> ID：11097042
> 
> 赞同：1
> 
> 时间：2012-06-19T08:20:09.007
> 
> 标签：mysql, sql

我有一个简单的问题。

如果新价格低于实际价格，我正在尝试重复密钥更新供应商名称和价格。查询看起来像这样并且不起作用：

```
INSERT INTO import_queue (`IQ_ART_ID`,`IQ_PRICE`, `IQ_SUPPLIER`)
VALUES (2987621,'105.03', 'Supplier name')
ON DUPLICATE KEY UPDATE IQ_SUPPLIER =
  IF(IQ_PRICE > 105.03, 'Supplier name', IQ_SUPPLIER) AND IQ_PRICE = IF(IQ_PRICE > 105.03,105.03, IQ_PRICE) 
```

谢谢你的任何提示

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-19T08:23:02.413

`update`语法似乎有点不对劲。您缺少`SET`关键字，并且多列应该用`,`not分隔`AND`：

```
ON DUPLICATE KEY UPDATE 
        IQ_SUPPLIER = IF(IQ_PRICE > 105.03, 'Supplier name', IQ_SUPPLIER) 
        AND IQ_PRICE = IF(IQ_PRICE > 105.03,105.03, IQ_PRICE)
        ^^^ 
```

试试这个：

```
ON DUPLICATE KEY UPDATE 
SET     IQ_SUPPLIER = IF(IQ_PRICE > 105.03, 'Supplier name', IQ_SUPPLIER) 
,       IQ_PRICE = IF(IQ_PRICE > 105.03, 105.03, IQ_PRICE) 
```

# asp.net - 取消选中动态填充的 CheckBoxList 中的所有值

> ID：11097043
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:20:09.513
> 
> 标签：asp.net, checkboxlist

我正在从数据库表中填充 CheckBoxList。根据要求，所有值都应取消选中为默认值。即使我编写了代码来做同样的事情，第一个值总是被检查，我不知道为什么。这是代码：

```
for (int i = CheckBoxList1.Items.Count - 1; i >= 0; i--)
    CheckBoxList1.Items.RemoveAt(i);
while (rd.Read())
{
    System.Web.UI.WebControls.ListItem item = new ListItem(Convert.ToString(rd["FullName"]), Convert.ToString(rd["ContactID"]));
    CheckBoxList1.Items.Add(item);
}
con.Close();
for (int i = CheckBoxList1.Items.Count - 1; i >= 0; i--)
    CheckBoxList1.Items[i].Selected = false; 
```

一旦页面被发回，只有这样所有的值都被取消选中。欢迎任何帮助和建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:24:09.993

试试这个： CheckBoxList1.Items[i].Checked = false;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:26:13.723

```
for (int i = CheckBoxList1.Items.Count - 1; i >= 0; i--)
          CheckBoxList1.Items[i].Selected = false; 
```

只是一个想法，但是；这个循环真的有效吗？因为您的停止条件是当 i 大于 0 时。从循环开始就应该是这样。我认为你的停止条件应该是 i=0。

就像 bdz 说的，使用 items[].checked 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:57:01.607

尝试更改您的这一部分：

```
 for (int i = CheckBoxList1.Items.Count - 1; i >= 0; i--)
          CheckBoxList1.Items[i].Selected = false; 
```

对此：

```
 foreach(ListItem i in CheckBoxList1.Items)
 {
     i.Selected = false;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T06:14:33.903

这是因为**UpdatePanel**发生的。一旦我删除它，代码就可以毫无问题地开始工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T09:18:47.987

**CheckBoxList1.ClearSelection()**

这适用于 Asp.Net Framework 4.5 我没有在其他框架上尝试过

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-17T17:31:55.937

```
foreach (int index in this.CheckedListBox1.CheckedIndices)
{
    this.CheckedListBox1.SetItemChecked(index, false);
} 
```

# ruby-on-rails - Spree Commerce：仅为结账更改标题

> ID：11097048
> 
> 赞同：1
> 
> 时间：2012-06-19T08:20:28.757
> 
> 标签：ruby-on-rails, spree

我想仅为结帐页面更改基本模板的页眉和页脚以及其他内容。

这可能与污损？

我想使用这样的污损块：

```
Deface::Override.new( :virtual_path   => 'spree/layouts/spree_application',
                      :name           => 'logo_checkout',
                      :replace_contents => '#logo',
                      :text        => 'You are in the checkout') 
```

但是这个污损规则应该只在用户结账时才有效，例如在页面上：

```
/checkout/registration 
```

有没有办法用污损来做到这一点？如果没有，我怎么能只为一组特定的页面更改基本模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:16:47.910

缰绳，

而不是指定文本，而是指定一个部分。

在该部分中，您可以检查您的控制器或 url 或其他任何内容，以根据您指定的任何规则呈现不同的内容，就像在普通视图中一样。

# mysql - mysql查询以英里为单位查找距离

> ID：11097049
> 
> 赞同：0
> 
> 时间：2012-06-19T08:20:28.293
> 
> 标签：mysql

我有一个查询要查找半径内的公里距离

```
SELECT id,first_name,avatar,user_des,thirdparty_account_type,user_latitude,user_longitude,last_login_time,SQRT( POW( 69.1 * ( user_latitude - 13.00887806598545) , 2 ) + POW( 69.1 * ( 77.65931731975401 - user_longitude ) * COS( user_latitude / 57.3 ) , 2 ) ) AS distance FROM ls_users  ORDER BY distance ASC limit 0,40 
```

我得到的距离以公里为单位。我如何将其转换为英里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:23:15.313

1 公里 = 0.621371192 英里。只需将距离乘以该常数即可。

```
SELECT id,first_name,avatar,user_des,thirdparty_account_type,
    user_latitude,user_longitude,last_login_time,
    SQRT( POW( 69.1 * ( user_latitude - 13.00887806598545) , 2 ) + POW( 69.1 * ( 77.65931731975401 - user_longitude ) * COS( user_latitude / 57.3 ) , 2 ) ) * 0.621371192 AS distance
FROM ls_users
ORDER BY distance ASC limit 0,40 
```

# facebook - 用 javascript api 在我的墙上贴一张大图

> ID：11097050
> 
> 赞同：2
> 
> 时间：2012-06-19T08:20:35.310
> 
> 标签：facebook

我试图从我的应用程序中将图像张贴在我的墙上。我希望图像可以看到它的原始大小，而不是像一张小图片。

我尝试了两种方法来做到这一点，但它不起作用。

```
FB.ui(
    {
    target_id:'ID',
    method: 'stream.publish',
    access_token:accessToken,
    attachment: {
        name: 'test name',
        caption: 'Caption here.',
        description: 'description here',
        href: 'http://facebook.com/mysite',
        media: [{'type': 'image', 'src': pic,  width: '150', height: '120', 'href': 'MY_SITE'}]
        },
    message: '',
    },
    function(response) {
        if (response && response.post_id) {
            alert('Post was published.');
        } else {
           console.log(response);
           alert('Post was not published.');
        }
    }
); 
```

这会将图像张贴在我的墙上，但它是一张小图片。我试图像这样将图像发布到我的相册中：

```
FB.api('me/photos', 'post',
    { 
    url:'MY_URL',
    href:'MY_LINK,
    message: 'photo description',                
    access_token:accessToken
    },
    function(response) {
        console.log(response);
        if (!response || response.error) {
            alert('Error occurred');
        } else {
            alert('Post ID: ' + response.id);
        }
}); 
```

但图像没有显示在我的墙上。它在我的相册中，但我需要点击“批准照片”。单击后，它会显示在我的墙上。

我的问题是：如果我使用第一个代码，有没有办法以原始大小显示图像？

如果我使用第二个代码，如何让它从我的相册自动发布到我的墙上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:44:24.310

向“我/照片”发布帖子将为您的应用创建一个新相册并在那里发布照片。您可以考虑创建一个新相册或上传到现有相册，并让 Facebook 处理照片在新闻源中显示给朋友的大小。看看这篇描述你需要什么的博客文章。这是一个`php`示例，但 API 调用在`JavaScript` [https://developers.facebook.com/blog/post/498/中是相同的](https://developers.facebook.com/blog/post/498/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:02:00.860

我不知道我做了什么，但这段代码对我有用：

```
FB.api('me/photos', 'post', { 
                url:pic.toString().replace('.png', '.fb.png'),                    
                message:message,
                access_token:accessToken
                }, function(response) {                    
                  }
            }); 
```

我添加`scope: 'email,user_photos,publish_stream` 到我的代码中，并将图片添加到用户的相册并立即显示在用户墙上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:30:07.033

在您提供的第一个示例中，我看到`width`和`height`。增加这些值，没有帮助吗？

例如：

```
// ...
media: [{'type': 'image', 'src': pic,  width: '1024', height: '768', 'href': 'MY_SITE'}]
// ... 
```

# flash - Flash 上传图片到网页

> ID：11097052
> 
> 赞同：0
> 
> 时间：2012-06-19T08:20:38.973
> 
> 标签：flash, rest, post, actionscript

我需要获取 Flash 才能将图像上传到我的网站。

该网站运行良好，我可以上传一个简单的 HTML 来工作。

但是如何让 Flash 将图像发布到网站？

这是当前的 ActionScript

```
public function encodeAndSave()
{
var bmd : BitmapData = new BitmapData( 300, 300, true, 0xFFFFFFFF );

// draw the bitmapData from the captureContainer to the bitmapData object;
bmd.draw( index.avatarMC, new Matrix(), null, null, null, true );

// create a new JPEG byte array with the adobe JPEGEncoder Class;
var byteArray : ByteArray = new JPGEncoder( 90 ).encode( bmd );

var date:Date = new Date();
var req:URLRequest = new URLRequest("http://bt.ind-igo.co.uk/test/SaveImage");

var params:URLVariables = new URLVariables();
params.file= Base64.encode(byteArray);

params.name = "MyImage.jpg";
req.method = URLRequestMethod.POST;
req.data = params;
var ldr:URLLoader = new URLLoader(req);

ldr.addEventListener(Event.COMPLETE, complete);

ldr.load(req);

function complete(e:Event):void
{
navigateToURL(new URLRequest("?" + Math.random()), "_self");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:54:23.690

下载我的小 FileSaver 类，在它的帮助下，您可以保存在服务器上，也可以保存在本地！ [http://www.myflashlab.com/2010/02/21/filesaver-data-transfer/](http://www.myflashlab.com/2010/02/21/filesaver-data-transfer/)

```
import com.doitflash.tools.fileSaver.FileSaver;
import com.doitflash.tools.fileSaver.FileSaverConst;
import com.doitflash.events.FileSaverEvent;

// if we're saving to server
var _fileSaver:FileSaver = new FileSaver();
_fileSaver.method = FileSaverConst.SERVER;

// by default the encryption is turned off. if you are turning it on,
// make sure to put a key for your encryption which is not longer than 8 characters.
// to deal with encrypted data on your server side script, refer to http://code.google.com    /p/as3crypto/
//_fileSaver.encrypt(true, "TESTTEST");
_fileSaver.encrypt(false);
_fileSaver.gateway = "phpProcessor.php";

// save all parameters that you want to send out in an object like below.
_fileSaver.vars = {var1:"value1",var2:"value2"};

// you may also wish to add a listener to receive the server script respond!
_fileSaver.addEventListener(FileSaverEvent.RESPOND, onRespond);

// call the save method and pass the file byteArray to it along with its name like below.
_fileSaver.save(_byte, "filename", ".gif");

function onRespond(e:FileSaverEvent):void
{
    trace(e.paramURLVars) // paramURLVars is of type URLVariables
    trace(e.paramOBJVars) // paramOBJVars is of type Object

    // OR

    trace(_fileSaver.theRespond);// theRespond is of type URLVariables
    trace(_fileSaver.theRespondObject);// theRespondObject is of type Object
} 
```

# iphone - 如何在iphone sdk中单击UIButton时根据UiTextfield绘制第一行和第二行？

> ID：11097053
> 
> 赞同：0
> 
> 时间：2012-06-19T08:20:39.323
> 
> 标签：iphone, xcode, ios5

我想画线，我有两个文本文件，我在其中输入一些值，当我单击按钮时，线将绘制（每个文本文件值 1 厘米）...

假设我在文本文件的第 1 行输入了一些值，该线将绘制 1 厘米，当我输入值 5 时，该线将绘制 5 厘米...

与文本文件 2 相同...

当第一个 textfield 行结束时，第二个 textfiled 行将从第一个 textfield 行的末尾开始...

表示第 1 行的最后一个点是第 2 行的起点...

我总共有两个 textField 和 1 个按钮。

我不知道该怎么做？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:24:12.427

您将需要子类`UIView`( `MYDrawingView`)

添加绘图参数作为 this 的属性`MYDrawingView` 然后实现in 的`drawRect`功能，之后可以使用来绘制线条和/或其他形状`UIView``MYDrawingView``drawRect`

# c++ - 在 WaitForMultipleObjects() 中使用 std::vector

> ID：11097059
> 
> 赞同：4
> 
> 时间：2012-06-19T08:21:08.793
> 
> 标签：c++, vector, waitformultipleobjects

我有一个`std::vector`句柄对象。我必须等待这些句柄对象在`WaitForMultipleObjects`函数中使用。因为它是一个向量，所以在使用它时出现错误`WaitForMultipleObjects`：

```
std::vector<HANDLE> events;
// ...
WaitForMultipleObjects(events.size(), events, true, INFINITE); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:48:03.043

如果您有最新版本的 STL，最好使用：

```
WaitForMultipleObjects(events.size(), events.data(), true, INFINITE); 
```

对于较旧的 STL，如果 .data() 不能用作向量上的方法，则可以使用 &events[0]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:25:26.717

如果您查看文档，[`WaitForMultipleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)您会发现第二个参数是*指针*，而不是`std::vector`. `std::vector`不能使用该类来代替指针或本机数组。

~~您可以做的唯一~~一种方法是创建一个临时“数组”，并将所有句柄复制到它，并将其用作参数。

查尔斯建议的另一种方法是使用`&vector[0]`或按照托尼的建议使用`vector.data()`（如果可用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:35:28.973

你应该这样做

```
WaitForMultipleObjects(events.size(), &events[0], true, INFINITE); 
```

这是可移植的，也是可行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T08:49:47.890

到达底层向量缓冲区的规范方法是

```
&events[0] 
```

所以你可以这样做：

```
WaitForMultipleObjects(events.size(), &events[0], true, INFINITE); 
```

另请参阅[此类似问题](https://stackoverflow.com/q/1339470/57428)。

# c# - 以编程方式右键单击并打印文件

> ID：11097063
> 
> 赞同：1
> 
> 时间：2012-06-19T08:21:27.920
> 
> 标签：c#, winforms

我想读取所有文件的文件夹并以编程方式打印它们，就像我右键单击 > 打印一样。

我知道以这种方式打印是特定于默认应用程序的。所以我认为这是一个两步过程：如何检查带有默认应用程序的文件是否支持打印；以及如何实际发出打印文件的命令？

以这种方式打印是否称为“shell 命令打印”或类似的东西？将需要正确的术语来搜索信息。

对于这项任务，您还有什么其他更好的建议吗？

**编辑**：文件类型可以是简单的 .txt 文件以外的任何文件，例如 PDF、DWG、JPEG 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:31:40.350

我相信这就是您正在寻找的：

[http://support.microsoft.com/kb/314499](http://support.microsoft.com/kb/314499)

如果这不起作用，那么还有很多其他方法可以使用宏或编写一个非常简单的 Visual Basic 程序来为您完成。

如果这不起作用，请回复评论，我将编辑我的帖子。

问候~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:46:08.847

[您可以使用Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)枚举文件夹中的文件，然后使用 ShellExecute 模式`Process.Start`依次对每个文件执行“打印”动词（命令）。

请参阅[Process.Start here](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)，您将需要传入[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)并进行适当的`UseShellExecute`设置`Verb`。

通过询问操作系统如何打印它们，您不必担心如何打印不同类型的数据等的复杂性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T08:39:52.893

`As you said: You want to read files in a folder and automatically print them`

因此，一种选择可能是读取文件 > 打开 FileStream 并将流发送到打印。这是一个打印流的示例 -

[http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.print.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.print.aspx)

注意`Printing()`示例中的函数。[我没试过，但看起来可以实现]

```
// Print the file.
     public void Printing()
     {
         try 
         {
            streamToPrint = new StreamReader (filePath);
            try 
            {
               printFont = new Font("Arial", 10);
               PrintDocument pd = new PrintDocument(); 
               pd.PrintPage += new PrintPageEventHandler(pd_PrintPage);
               // Print the document.
               pd.Print();
            } 
            finally 
            {
               streamToPrint.Close() ;
            }
        } 
        catch(Exception ex) 
        { 
            MessageBox.Show(ex.Message);
        }
     } 
```

**这里还有一个选项 -** [http://channel9.msdn.com/forums/TechOff/151242-How-to-send-a-PDF-to-a-printer/](http://channel9.msdn.com/forums/TechOff/151242-How-to-send-a-PDF-to-a-printer/) ---[请参阅最后](http://channel9.msdn.com/Forums/TechOff/151242-How-to-send-a-PDF-to-a-printer/9f137b7b3c704fd680579dea013489b8)一篇文章。

# objective-c - NSNumberFormatter 从 13000 到 13K

> ID：11097064
> 
> 赞同：7
> 
> 时间：2012-06-19T08:21:29.343
> 
> 标签：objective-c, nsnumberformatter

我想使用`NSNumberFormatter`.

例如：从 23000 到 23K。

我该怎么做`NSNumberFormatter`？

我知道可以自己进行计算，但就我而言，这不是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:35:25.607

'K' 后缀不被认为是标准的，所以你不能使用 NSNumberFormatter 来做到这一点。无论如何，这是一种简单的方法。

```
-(NSString *)kFormatForNumber:(int)number{
    int result;
    if(number >= 1000){ 
        result = number/1000;

        NSString *kValue = [NSString stringWithFormat:@"%dk",result];
        return kValue;
    }
    return [NSString stringWithFormat:@"%d",number];
} 
```

# wpf - Datagrid wpf中的Dragfill

> ID：11097068
> 
> 赞同：0
> 
> 时间：2012-06-19T08:21:39.993
> 
> 标签：wpf, datagrid

有没有办法复制数据网格列，如拖动填充/自动填充功能，以使用遵循模式的数据填充单元格，或者基于先前单元格中的数据（如 excel 中的数据）填充单元格。

![自动填充屏幕截图](../Images/ada678167893c6ca7973ddfa1e07f8d9.png)

# jquery - html存储在变量中时如何使用html元素的属性

> ID：11097071
> 
> 赞同：1
> 
> 时间：2012-06-19T08:21:44.923
> 
> 标签：jquery

这是我存储在变量中的示例 html。

```
var sHtml=''
sHtml='<div class="diagnostic_picture"><img src="test1.gif" /></div>';
sHtml=sHtml + '<div class="diagnostic_picture"><img src="test2.gif" /></div>';
sHtml=sHtml + '<div class="diagnostic_picture"><img src="test3.gif" /></div>'; 
```

现在我想知道如何将另一个名为 delaySrc 的属性添加到以 html 形式存储在变量中的所有图像中。

请帮助我使用 jquery 实现它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:22:54.503

你可以试试这个：

```
$(sHtml).find('img').each(function() {
    $(this).prop('delaySrc', 'something');
    alert($(this).prop('delaySrc')); // just for ensure
}); 
```

**[演示](http://jsfiddle.net/VSttS/6/)**

# ruby-on-rails - 使用 Devise 时控制器的替代 API 令牌

> ID：11097075
> 
> 赞同：0
> 
> 时间：2012-06-19T08:21:57.297
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, api

我在我的 rails 3.2 应用程序中设计了 token_auth 工作正常。我只是在构建一个 API，需要用另一个令牌覆盖设计身份验证机制。为什么？因为一个用户有很多位置，我想通过这个令牌提供对每个位置的独立访问，而不影响整个帐户。

创建位置时，会自动创建位置 api_token。

在我尝试使用新密钥访问的位置控制器中，我尝试了以下操作：

```
class Api::V1::LocationsController  < ApplicationController 

  before_filter :restrict_access, :only => :index

  def index
      @locations = Location.all
      @page_title = "Locations"
      @page_title_content = "A list of all your locations. Click to customise and view reports"

     respond_to do |format|
       format.json { render json: @locations }
       format.xml { render xml: @locations }
     end
   end

   private

   def restrict_access
     api_key = Location.find_by_api_token(params[:access_token])
     head :unauthorized unless api_key
    end

end 
```

然而，一切都很好，即使我没有登录并且没有在 url 中传递密钥，我也可以查看所有位置。

有什么建议我可以让这个工作吗？另外，我怎样才能限制那些可以访问的位置？通常我使用cancan，但看不到它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:35:59.617

使用设计，您需要使用`:token_authenticatable`和覆盖`find_for_token_authentication`. 这是在我的应用程序中有效的方法。

```
class User
  devise :token_authenticatable

  self.token_authentication_key = "access_token"

  def self.find_for_token_authentication conditions
    grant = AccessGrant.where(access_token: conditions[token_authentication_key]).
                         any_of({access_token_expires_at: nil}, {:access_token_expires_at.gt => Time.now}).
                         first

    if grant
      user = User.where(_id: grant.user_id).first
      user.current_grant = grant if user
      user
    end
  end
end 
```

之后，您只需`authenticate_user!`在前置过滤器中调用标准

```
class Api::BaseController < ApplicationController
  respond_to :json

  # don't protect from forgery here
  skip_before_filter :verify_authenticity_token
  before_filter :authenticate_user! 
```

# javascript - 在jquery数组中的第一个元素之前获取逗号

> ID：11097078
> 
> 赞同：0
> 
> 时间：2012-06-19T08:22:01.867
> 
> 标签：javascript, jquery

我正在向数组中插入一些数据，但我得到了

```
,9,My firstname,My lastname,myemail@example.com,123456789 
```

在我的控制台中。如何从第一个元素（即 9）中删除逗号？这是我的代码

```
var data = new Array();

                $(row_el.children("td")).each(function(i) {
                    var td = $(this);
                    //var data = td.html();
                    var td_el = td.attr('class');
                    //arr[i] = data;

                    if(!td.hasClass("element")) {
                        data[i] = td.html();        
                        console.log(i + ": " + data);
                    }

                }); 
```

我想要这样的输出

```
9,My firstname,My lastname,myemail@example.com,123456789 
```

然后我会将这个数组传递给一个函数并循环遍历这个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:25:27.710

只需使用`push()`（[MDN docu](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)）而不是设置到数组中的特定位置：

```
var data = new Array();

$(row_el.children("td")).each(function(i) {
    var td = $(this);
    //var data = td.html();
    var td_el = td.attr('class');
    //arr[i] = data;

    if(!td.hasClass("element")) {
        data.push( td.html() );        
        console.log(i + ": " + data);
    }

}); 
```

问题是，并非数组中处理的所有元素都会`each()`导致数组中的条目。但是，提交给您的回调 ( `i`) 的索引仍然会向上计数。因此，如果有一些元素不会导致您的数组进入，则这些位置将被填充`undefined`（只要您在后面的位置输入元素）。这些`undefined`条目现在以您的方式输出时会产生一个空字符串，从而导致您的前导逗号。

# android - 如何在Android中使用opengl-es对位图进行抖动效果？

> ID：11097080
> 
> 赞同：1
> 
> 时间：2012-06-19T08:22:02.660
> 
> 标签：android, opengl-es

我想制作一个应用程序，如`Magic Butt`应用程序[Youtube Video](http://www.youtube.com/watch?v=gz2hgEdGuqQ&has_verified=1)

当用户触摸它时，它会在 2D 图像位图上产生类似果冻的抖动效果。据我所知，这可以通过使用 openGL 修改附加此位图的网格来完成，但我不知道如何显示该拉伸效果。

在 Android 中是否有一个开源库可以为我执行此操作？

我不知道该怎么做。请提出一些指示。

# java - 如何用另一个 JButton 替换 JPanel 中的 JButton

> ID：11097082
> 
> 赞同：4
> 
> 时间：2012-06-19T08:22:09.090
> 
> 标签：java, swing, jpanel, jbutton

我正在java中尝试以下代码，但它似乎不适用于某种奇怪的时尚：

```
JFrame myFrame = new JFrame("Test Frame");
myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
JFrame.setLayout(new GridLayout());

JPanel myPanel = new JPanel();
myPanel.setLayout(new BorderLayout());
myFrame.add(myPanel);

JButton firstButton = new JButton();
myPanel.add(firstButton);

JButton secondButton = new JButton();
myPanel.remove(firstButton);
myPanel.add(secondButton);
myFrame.repaint(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:25:54.017

不要为`JFrame`( `myFrame.repaint();`) 重新绘制，您必须按照您的情况`(re)validate`和`repaint`最近的容器`JPanel`

```
JButton secondButton = new JButton();
myPanel.remove(firstButton);
myPanel.add(secondButton);
myPanel.revalidate();
myPanel.repaint(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:26:07.573

您可以使用`getComponents()`来查找`JButton`索引，并将`addComponent(Component component, int index)`旧索引添加到位，然后您可以删除要替换的索引。

# wcat - WCAT 报告.xsl 无效

> ID：11097084
> 
> 赞同：6
> 
> 时间：2012-06-19T08:22:12.500
> 
> 标签：wcat

来自 Microsoft 的 WCAT 就像它承诺的那样简单。不过，在 Windows 7 x64 上运行它并不是那么简单。包含的脚本文件中断，输出摘要的 XML 转换也使用 MS-only 功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T08:22:12.860

您仍然可以使用 Internet Explorer 9 查看格式化版本的 log.xml，点击 F12 以获取[开发人员功能](http://msdn.microsoft.com/en-us/library/ie/gg589507%28v=vs.85%29.aspx)并启用浏览器模式：“兼容性视图”。这将允许 xsl 转换，这在其他任何地方都不起作用，因为其他浏览器会抱怨一些无效的函数和语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T01:53:27.840

如果您安装了 Visual Studio，您还可以使用它来应用 XSLT。

在 Visual Studio 2012 中：

1.  确保 WCAT 创建的 XML 文件 (log.xml) 和 XSLT 文件 (report.xsl) 位于同一目录中。
2.  打开 XML 文件。
3.  在 VS2012 中，单击 XML 菜单 > Start XSLT Debugging（或 Start XSLT without Debugging）。
4.  等待几秒钟以生成结果 html 文件。

**作为旁白...**

请记住，1 WCAT 6.3 report.xsl 文件中有一些错误/错别字。

使用它进行转换时，report.xsl 会导致以下错误：

1.  未声明变量“i”（第 52 行，第 13 列）
2.  变量或参数“rowId”要么未定义，要么超出范围。（行：1182，列：37）
3.  变量或面值

您可以手动修复此问题（[参考](http://forums.iis.net/p/1184078/2006407.aspx)）：

1.  剪切第 1151-1157 行的代码并将其粘贴到第 1146 行。
2.  在第 51 行添加： var i=0;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-30T08:33:19.267

WCAT 6.4.0 的解决方案：

1.  剪切第**1259-1265**行的代码并粘贴到第**1293行**
2.  在第**53**行添加：`var`i=0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-21T08:50:36.053

有效的report.xsl：
[https ://www.dropbox.com/s/avyuyc6bxzt5k6x/report.xsl?dl=0](https://www.dropbox.com/s/avyuyc6bxzt5k6x/report.xsl?dl=0)

我遇到了同样的问题，之后我浏览了 xsl 文件并修复了代码。

不幸的是 IE 仍然没有正确显示它，但是在 Inspect Element 中 DOM 似乎很好。所以你需要把它保存到一个 HTML 文件中，然后它应该看起来很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T13:57:26.640

我经常使用 WCAT，发现在 IETester 中打开 log.xml 文件是可靠的，因为您可以选择 IE8 渲染引擎来一致地查看格式化报告。IE 升级后无需编辑 xsl 或查找其他查看器。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-03-15T11:43:33.317

我已经在工作室中打开了 result.xsl，开始调试，将“result”.xml 定义为输入并开始调试。你会得到 3 个错误。一切都很容易解决。1）在循环中的 i 之前添加一个“var” 2）删除其他两个错误行中的 $ 在该更改之后有效

# android - Android app crashing after a while using Fragments and ViewPager

> ID：11097091
> 
> 赞同：8
> 
> 时间：2012-06-19T08:22:39.247
> 
> 标签：android, crash, fragment, android-viewpager

I've got a problem with my android app crashing when trying to restore my fragments. I have not added any custom variables to the bundle that I'm trying to restore, It's all default. I'm using Fragments and ViewPager. See my code snippets below:

```
public static class MyAdapter extends FragmentStatePagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    public int getCurrentItemPosition(Fragment fragment){
        return getItemPosition(fragment);
    }

    @Override
    public Fragment getItem(int position) {
        return ContentFragment.newInstance(position);
    }
}

public class MyActivity extends FragmentActivity {

static final int NUM_ITEMS = 100000;
public int currentSelectedPage;
private int changeToFragmentIndex;
public DateTime midDate;
MyAdapter mAdapter;
ViewPager mPager;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.diary);
    MyApplication application = (MyApplication)getApplication();
    application.dataController.myActivity = this;
    mAdapter = new MyAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    int newDay = application.daysBetween(DateTime.now(), DateTime.parse(application.day.dateToShortString()));

    this.currentSelectedPage = NUM_ITEMS/2+newDay;
    mPager.setCurrentItem(NUM_ITEMS/2+newDay);
    mPager.setOnPageChangeListener(new SimpleOnPageChangeListener(){
        public void onPageSelected(int position){
            currentSelectedPage = position;
            ContentFragment fragment = (ContentFragment) mAdapter.instantiateItem(mPager, currentSelectedPage);
            fragment.loadData();
        }
    });
}

}

public class ContentFragment extends Fragment {
private View v;
static final int NUM_ITEMS = 100000;

static ContentFragment newInstance(int num) {
    ContentFragment f = new ContentFragment();

    return f;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null)
        return null;
    v = inflater.inflate(R.layout.diarycontent, container, false);
    return v;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

@Override
public void onSaveInstanceState(Bundle savedInstanceState){
    super.onSaveInstanceState(savedInstanceState);
    setUserVisibleHint(true);
}
} 
```

I receive this stackstrace:

```
Caused by: java.lang.NullPointerException
at android.support.v4.app.FragmentManagerImpl.getFragment(FragmentManager.java:519)
at android.support.v4.app.FragmentStatePagerAdapter.restoreState(FragmentStatePagerAdapter.java:1 55)
at android.support.v4.view.ViewPager.onRestoreInstanceState(ViewPager.java:522) 
```

As I have understood this may be a known problem with the support package and that one possible solution would be to use setUserVisibleHint(true) in onSaveInstanceState. But that didn't help.

Does anyone know another solution to the problem or what I've done wrong?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-16T02:32:30.320

一旦我开始在 Tab 中使用 ViewPager 和 FragmentStatePagerAdapter，我就遇到了同样类型的问题。

然后我在所有与这个问题相关的论坛上玩了两天，想知道为什么会发生这个问题以及如何解决它，但没有找到任何符合我要求的完美解决方案。

我得到了解决方案，因为为了避免 NPE 崩溃使用 FragmentPagerAdapter 而不是 FragmentStatePagerAdapter。当我替换 FragmentPagerAdapter 而不是 FragmentStatePagerAdapter 时，不会遇到 NPE 崩溃问题，但同一页面不会自行刷新以进行进一步导航（这是我的要求）。

最后覆盖 FragmentStatePagerAdapter 上的 saveState 方法，一切正常。

```
@Override
public Parcelable saveState() {
    // Do Nothing
    return null;
} 
```

我如何轻松重现此问题：
我使用的是更高版本（4.1）的设备并按照以下步骤操作：
1\. 转到设置 -> 开发人员选项。
2\. 单击“不保留活动”选项。

现在我玩了我的应用程序。

在每次应用程序由于 android.support.v4.app.FragmentManagerImpl.getFragment(Unknown Source) 处的 NPE 而崩溃时覆盖 saveState() 方法之前。但是在覆盖 saveState() 之后没有注册崩溃。

我希望这样做你不会有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T09:13:07.483

我最初使用@Lalit Kumar Sahoo 建议的解决方案。但是，我注意到一个严重的问题：每次旋转设备时，**片段管理器都会添加新片段，而不会删除旧片段**。所以我进一步搜索，发现了一个带有解决方法建议的错误报告（[帖子#1](https://code.google.com/p/android/issues/detail?id=37484)）。我使用了此修复程序并使用我的应用程序进行了测试，该问题似乎已解决，没有任何副作用：

> **解决方法：**在项目的 src/android/support/v4/app 文件夹中创建自定义 FragmentStatePagerAdapter 并使用它。

```
package android.support.v4.app;

import android.os.Bundle;
import android.view.ViewGroup;

public abstract class FixedFragmentStatePagerAdapter extends FragmentStatePagerAdapter {

  public FixedFragmentStatePagerAdapter(FragmentManager fm) {
    super(fm);
  }

  @Override
  public Object instantiateItem(ViewGroup container, int position) {
    Fragment f = (Fragment)super.instantiateItem(container, position);
    Bundle savedFragmentState = f.mSavedFragmentState;
    if (savedFragmentState != null) {
      savedFragmentState.setClassLoader(f.getClass().getClassLoader());
    }
    return f;
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T20:38:06.917

你究竟为什么要这样做：

```
mPager.setOnPageChangeListener(new SimpleOnPageChangeListener(){
    public void onPageSelected(int position){
        currentSelectedPage = position;
        ContentFragment fragment = (ContentFragment) mAdapter.instantiateItem(mPager, currentSelectedPage);
        fragment.loadData();
    }
}); 
```

这个：

```
@Override
public Fragment getItem(int position) {
    return ContentFragment.newInstance(position);
} 
```

实例化片段。

您可以在片段中加载这样的数据：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
super.onActivityCreated(savedInstanceState);
loadData();
} 
```

# apache - Ensure execution order of two Apache Filters

> ID：11097096
> 
> 赞同：3
> 
> 时间：2012-06-19T08:22:53.053
> 
> 标签：apache, apache2-module

I need to ensure **my custom filter** always executes before the **`mod_rewrite`**. As per [Apache Tutor](http://www.apachetutor.org/dev/request#d5), *filters do not run in a deterministic order:*

> The request processing axis is straightforward: the phases happen strictly in order. But confusion arises in the data axis. For maximum efficiency, this is pipelined, so **the content generator and filters do not run in a deterministic order**. So, for example, you cannot in general set something in an input filter and expect it to apply in the generator or output filters.

How to ensure execution sequence of two filters, or is it possible?

* * *

**Update:** Someone has [indicated](http://www.apachelounge.com/viewtopic.php?t=3084) to `mod_info` to display detailed information about modules and their order.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:31:18.583

理解这一点的最好方法是查看 apache 源代码。ap_hook_fixups 的 mod_proxy 和 mod_rewrite 用法是如何在特定模块之前或之后插入挂钩的完美示例。

假设你想在 mod_rewrite 之前插入一个钩子，你可以这样做：

```
static int my_fixup(request_rec *r)
{
    /* do something with request headers before it goes to the mod_rewrite */
    return OK;
}

static void register_hooks(apr_pool_t *p) {
    static const char * const aszSucc[] = {"mod_rewrite.c", NULL};
    ap_hook_fixups(my_fixup, NULL, aszSucc, APR_HOOK_FIRST);
} 
```

此外，您可以查看[http://httpd.apache.org/docs/2.2/developer/hooks.html](http://httpd.apache.org/docs/2.2/developer/hooks.html)页面以了解其他类型的钩子，或者更好地了解如何控制钩子调用顺序。

# mysql - MySQL Order By Query for varchar saved date

> ID：11097099
> 
> 赞同：0
> 
> 时间：2012-06-19T08:23:00.797
> 
> 标签：mysql

I try to order the results of a query by the date which is in the format `yyyy/mm/dd` and I am using this query to no avail.

```
SELECT * FROM table ORDER BY STR_TO_DATE(date, '%y/%m/%d') 
```

I can't change the type of field that the date is stored in so I am hoping I can order the date post data entry.

Any help and advice appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:25:49.350

如果日期是那种格式，你肯定不需要把它转换成日期，对吧？该格式将按字母顺序排序，假设它是 0 填充...（即 7 月是 2012 年 7 月 3 日是 2012/07/03...）

所以你可以去：

```
select * from table order by date 
```

您的字段是什么类型的`date`字段：您确定它是`varchar`?

假设它是 a `varchar`，您可以通过以下方式找出问题所在：

```
select str_to_date(date, '%y/%m/%d') from table 
```

您（应该）得到所有 NULL，因为这`%y`是错误的。尝试：

```
select str_to_date(date, '%Y/%m/%d') from table 
```

它应该可以工作。但如前所述，您不必转换为排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:26:11.817

尝试使用大写 Y：

`SELECT * FROM table ORDER BY STR_TO_DATE(date, '%Y/%m/%d')`

小写的 Y 代表 yy，大写的代表 yyyy。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T08:26:53.847

SELECT * FROM table ORDER BY date

# php - 用 preg_replace 替换所有 html 代码

> ID：11097109
> 
> 赞同：1
> 
> 时间：2012-06-19T08:23:34.893
> 
> 标签：php, regex

我想将所有 html 代码替换为空白空间。我想我应该使用**preg_replace**函数，但我不确定如果 html 代码看起来像这样，我应该怎么做：

```
&#8221;
&#946;

$text="&#946; something &#8221; test..."

$text=preg_replace("&# [what should be here?] ;", " ", $text);

echo $text;
result =  something  test... 
```

我认为它应该只是数字，因为我在这里只找到了数字：[http ://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:25:19.370

你可以看看[strip_tags](http://nl.php.net/manual/en/function.strip-tags.php)正是这样做的。然而那些不是 HTML 代码，它们被称为 HTML 实体。

匹配您想要的[正则表达式如下所示：](http://regexpal.com/?flags=gims&regex=%28&#%5B0-9%5D%2b;%29&input=”%20sdfasdfasd%20f%20{%20lksdjflsdj)

`(&#.+?;)`

它相当简单，寻找`&#`然后任何重复的字符直到`;`。

编辑：正如 Qtax 指出的那样，它们不必是数字。点匹配所有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:41:04.090

HTML 字符引用可以通过[两种方式定义](http://www.w3.org/TR/html4/charset.html#entities)。假设您只想替换数字字符引用，则需要一个解析这些格式的正则表达式：

*   `&#D;`其中 D 是十进制数
*   `&#xH;`其中 H 是十六进制数

兼顾两者的正则表达式：

```
/&#(\d+|x[\da-f]+);/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:25:02.917

如果您想替换所有 HTML 实体`&foo;`，可以使用以下内容：

```
preg_replace('/&(?:[a-z]+|#x[\da-f]+|#\d+);/i', ' ', $text); 
```

如果要解码它们，请使用[`html_entity_decode`](http://php.net/manual/en/function.html-entity-decode.php).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:38:03.267

`&<something>;`是 HTML 实体的语法。如果要替换所有这些，请使用此正则表达式：

```
preg_replace('/&.*?;/', '', $subject); // from ampersand till the next semicolon 
```

它将用空字符串替换所有 HTML 实体，包括`&auml;`,`&x20;`和其他

# c# - display HTML string in any control of web page

> ID：11097112
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:23:50.180
> 
> 标签：c#, asp.net, html, httpwebresponse

I have `httpWebResponse` object. I want to display the `html` text (string) contained in `httWebResponse` object to any element on the webpage using `c#`.

I tried to set `div.innerHtml` property to `html` string. It displays the form view (having buttons, textboxes etc) of the html string. When i click on the button displayed in the div it throws an exception. Also `javascript` is not working in that div. HTML string contains html tags and script associated to some text boxes. I am able to view the controls or form bu can not interact with the form. How to solve this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:47:26.273

按钮是htmlControl？它是 sumbit 类型吗？尝试将其类型更改为“按钮”。让我看看你的代码，否则我很难找到问题。

# javascript - 如何识别浏览器？

> ID：11097122
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:24:11.133
> 
> 标签：javascript, html, browser

> **可能重复：**
> [查找浏览器类型和版本的最佳方法？](https://stackoverflow.com/questions/6505027/best-way-to-find-browser-type-version)

在 HTML/JavaScript 中，我如何识别用户正在使用的浏览器，并通过选择代码，我的意思是：如果浏览器是 crhome，请执行此操作...否则...谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:29:17.993

您可以使用`navigator`并获取所有详细信息。只需进行谷歌搜索！

```
<div id="example"></div>

<script type="text/javascript">

txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";

document.getElementById("example").innerHTML=txt;

</script> 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T08:45:05.617

不建议检测浏览器，因为浏览器是移动的目标。例如，今天 Chrome 不支持功能 X，但几个月后它开始支持它。如果你简单地说

```
// Here I detect Chrome browser without a third-party library
if (navigator.userAgent.toLowerCase().indexOf('chrome') === -1) {
    doFeatureX()
else {
    console.log('Sorry, no Feature X for you.')
} 
```

*然后你永远*锁定 Chrome 用户。您应该改为进行[*特征检测*](http://ejohn.org/blog/future-proofing-javascript-libraries/)，并且有很多[库](http://modernizr.com/)可以帮助您：

```
if (Modernizr.geolocation) {
    // do stuff with user's coordinates
} 
```

* * *

当然*，如果您愿意，您可以检测浏览器*。例如，您想鼓励人们升级他们的浏览器：

```
// Here I'm using jQuery
if ($.browser.msie && parseInt($.browser.version, 10) < 9) {
    // show link to http://microsoft.com/ie
} else if ($.browser.mozilla && parseInt($.browser.version, 10) < 11) {
    // show link to http://mozilla.com/firefox
} // etc. 
```

# c - How to read a line and split into string and float values in a C program?

> ID：11097125
> 
> 赞同：0
> 
> 时间：2012-06-19T08:24:16.827
> 
> 标签：c, string

I have a file that contains 80 characters per line. I want to go to a particular line that starts with "ATOM".

I tried with `fscanf(f1," %s%*[^\n]", rec)` and compare `rec` with `strcmp(rec,"ATOM")`, but it reads the next line from the match.
I also tried with `fscanf("line_format", variables)`, but this reads somewhere else from the file.

The line is

```
ATOM      1  N   MET A   1      36.643 -24.862   8.890  1.00 24.11             N 
```

From this I want to read character by character and assign it to variables. I have a problem with the `float` values and spaces. If I find a space in a place of particular variable how do I read it? How do I read the `float` values if there is no space between them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:42:47.490

您可以使用 读取输入文件中的每一行，`fgets()`使用`strtok()`或对其进行标记，将第一个标记与“ATOM”进行比较，然后使用或`strtok_r()`解析其余标记，如有必要，将它们转换为浮点数或整数。`atof()``atoi()`

虽然这有点矫枉过正，因为`ATOM`PDB 文件中的记录具有定义明确的结构，具有固定大小的字段，并且任何符合要求的 pdb 文件都更容易解析。您只需选择相关的子字符串并将它们传递给`atof()`or `atoi()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:54:44.350

我相信您的 (未显示) 中有错误`line_format`。你真的应该能够做到：

```
if( fscanf(f1, "ATOM %d %s %s %s %d %f %f %f %f %f %s", /* ... */) == 11 )
{
  /* store/analyze/print the parsed values */
} 
```

当然请注意，这会冒覆盖字符串参数的风险。您可以使用更具体的格式字符串来限制长度。

# maven - 如何在 Enunciate 生成的文档中包含 JSON 响应正文的格式？

> ID：11097126
> 
> 赞同：9
> 
> 时间：2012-06-19T08:24:16.997
> 
> 标签：maven, enunciate

目前 Enunciate 生成 REST API 文档，但*响应正文*不包含有关响应的 JSON 结构的信息。据我了解，如果我包含由 Jersey 序列化/反序列化为 JSON 的数据实体的类，则 enunciate 将能够生成该文档。

数据实体位于不同的模块中，该模块与其源代码一起打包，如发音文档 -[多模块项目中所建议的那样](http://docs.codehaus.org/display/ENUNCIATE/Multi-Module+Projects)

```
...
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
    <version>2.1.2</version>
    <executions>
        <execution>
            <id>attach-sources</id>
            <phase>package</phase>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
</plugin>
... 
```

这就是我的**enunciate.xml**的样子：

```
<?xml version="1.0"?>
<enunciate label="someapi" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://enunciate.codehaus.org/schemas/enunciate-1.25.xsd">

    <api-import pattern="com.something.business.vo.**"/>
    <api-import pattern="com.something.business.domain.**"/>

    <api-classes>
        <include pattern="com.something.web.ssoApi.rest.*"/>
        <include pattern="com.something.business.vo.**"/>
        <include pattern="com.something.business.domain.**"/>
    </api-classes>

</enunciate> 
```

这就是文档的样子：

![文档截图](../Images/d00c4705a6e5e5c888c9290b548d31c7.png)

如您所见，响应正文仅包含`element: (custom)`.

如何使其包含响应的 JSON 结构？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T12:14:22.883

为了生成数据模型部分的文档，实体应该用`@XmlRootElement`.

# ruby-on-rails - Heroku: RAILS_ROOT returns app folder instead of root folder

> ID：11097129
> 
> 赞同：11
> 
> 时间：2012-06-19T08:24:24.610
> 
> 标签：ruby-on-rails, heroku

I have this RoR app that calls to RAILS_ROOT. When running it using rails server (or when checking with `./script/console`) the value contains the app's root. When deploying and running it with Heroku, however (or when checking with `heroku console`), the returned path is '/app'.

Why's that?

Thanks

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T15:12:05.870

因为在 heroku 上，您的应用程序位于`/app`文件夹中（从根目录`/`）。它不是您的应用程序的 app 文件夹，即`/app/app`.

文件结构为：

```
/app/app/...
/app/config/..
/app/Gemfile
... 
```

你可以做一个实验。

运行 heroku 控制台并发现文件结构。

```
> heroku console
> puts `ls`
> puts `pwd` 
```

# c++ - Minimal executable size after linkage

> ID：11097131
> 
> 赞同：3
> 
> 时间：2012-06-19T08:24:27.553
> 
> 标签：c++, qt, linker, executable, static-libraries

I link with Qt statically, so can linker or some other tool avoid adding unused binary code (from Qt libraries) to the final executable? I don't think i use all the 10 MB of Qt library code.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:49:39.843

如果您在某个时候自己编译 Qt 库并且您正在使用 g++，您应该尝试使用[链接时间优化 (LTO)](http://gcc.gnu.org/wiki/LinkTimeOptimization)选项。您可以通过在所有 g++ 调用中添加 -flto 来做到这一点。这让 g++ 可以将所谓的 GIMPLE 代码添加到与您的源代码相对应的目标文件中（因此它没有被完全编译）。在链接步骤中，您应该添加 -fwhole-program 或 -fuse-linker-plugin。然后 gcc 读取 Gimple 代码，并将您的程序作为一个整体进行优化，因此它应该能够摆脱任何未使用的代码。但是我不能保证这对你有用。

# php - 出于某种原因重视双重回声

> ID：11097136
> 
> 赞同：0
> 
> 时间：2012-06-19T08:24:40.730
> 
> 标签：php, mysql

我不太确定这里发生了什么，但我试图从 mysql 中回显一个值，当我这样做时，它只是出于某种原因显示 double

代码：

```
$result = MySqlQuery('SELECT value FROM table WHERE id=1');
$value = mysqli_fetch_assoc($result);

echo implode($value); 
```

它显示 7373，数据库中的值为 73。我还尝试回显 * 而不是 value，它还显示整个行双倍。

删除那里的回声不再显示任何内容，所以它也不像通过另一个函数回显，所以我很困惑

MySqlQuery() 函数也被网站上几乎所有其他不显示双重结果的网站所使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:26:43.910

[`mysqli_fetch_array`](http://php.net/manual/en/mysqli-result.fetch-array.php)返回一个数组，其元素数量是您默认选择的列的两倍（每列表示两次）。我假设[`mysqli_fetch_assoc`](http://php.net/manual/en/mysqli-result.fetch-assoc.php)您的代码中的 是一个错字。

要解决此问题，请`mysqli_fetch_assoc`改用或将`MYSQLI_ASSOC`和`MYSQLI_NUM`作为第二个参数之一传递给`mysqli_fetch_array`. 根据经验，`mysqli_fetch_assoc`除非您知道自己需要其他东西，否则请使用。

# haskell - 如何在 Text.Parsec.Expr 中制作后缀 (--)

> ID：11097153
> 
> 赞同：2
> 
> 时间：2012-06-19T08:25:34.237
> 
> 标签：haskell, parsec

我有一个来自文档的例子[`Text.Parsec.Expr`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Expr.html)。

```
expr    = buildExpressionParser table term
          <?> "expression"
term    =  parens expr 
      <|> natural
      <?> "simple expression"
table   = [ [prefix "-" negate, prefix "+" id ]
          , [postfix "++" (+1)]  
          , [binary "*" (*) AssocLeft, binary "/" (div) AssocLeft ]
          , [binary "+" (+) AssocLeft, binary "-" (-)   AssocLeft ]
          ] 
```

我试图添加后缀`--`操作并将表的第二行更改为

```
 , [postfix "++" (+1), postfix "--" (subtract 1)] 
```

现在

```
runParser expr () "expr" "1--" 
```

`Right 1`在 ghci 中给我。

为什么我得到它以及如何提供后缀（`--`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:33:26.167

`"--1"`被解析为`[prefix "-", prefix "-", number 1]`并评估为`negate (negate 1)`产生 1。

~~得到一个postfix `(--)`，不`runParser expr () "expr" "1--"`给你一个postfix `--`？~~

~~解析似乎没有消耗整个输入。不过我说不出为什么，~~

```
module ExParse where

import Text.Parsec
import Text.Parsec.Expr

parens p = do
    char '('
    e <- p
    char ')'
    return e

reservedOp s = do
    string s
    notFollowedBy letter

natural = fmap read $ many1 digit

expr    = buildExpressionParser table term
          <?> "expression"
term    =  parens expr 
      <|> natural
      <?> "simple expression"
table   = [ [prefix "-" negate, prefix "+" id ]
          , [postfix "++" (+1), postfix "--" (subtract 1)]  
          , [binary "*" (*) AssocLeft, binary "/" (div) AssocLeft ]
          , [binary "+" (+) AssocLeft, binary "-" (-)   AssocLeft ]
          ]

binary  name fun assoc = Infix (do{ reservedOp name; return fun }) assoc
prefix  name fun       = Prefix (do{ reservedOp name; return fun })
postfix name fun       = Postfix (do{ reservedOp name; return fun })

res = runParser expr () "expr" "1--" 
```

产量

```
*ExParse> res
Right 0 
```

根据需要在这里。

问题`natural = P.natural lexer`在于它被定义为

```
natural = lexeme nat 
```

和

```
lexeme p = do
    x <- p
    whiteSpace
    return x 
```

其中评论算作空白。现在，Haskell 中的行注释以 开头`--`，因此 with`natural = P.natural lexer`会`natural`消耗整个字符串`"1--"`。要使其`--`可用作后缀运算符，您必须选择一个不是注释起始符的语言定义。例如，您可以修改`haskellDef`每个

```
lexer = P.makeTokenParser (haskellDef{P.commentLine = "//"}) 
```

或重新定义`whiteSpace`解析器。

# javascript - 循环浏览图片

> ID：11097155
> 
> 赞同：1
> 
> 时间：2012-06-19T08:25:36.077
> 
> 标签：javascript, jquery, html, css

我想以这种方式使用 HTML、CSS、Jquery/Javascript 实现对图片的循环： ![图片](../Images/a66cbc5f0c2b4998012e258226fcf1ab.png) 一页上的图片很少（所有图片都是可见的，并且不会移动），并且想要遍历它们中的每一个（一个time) 并在当前图像上方弹出一些文本。例如，如果我将鼠标悬停在图片 C 上，则循环应该停止，当悬停时 - 应该从图片 C 继续，依此类推。但我不确定如何实现这一点。谁能告诉我应该使用什么或类似的例子。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:48:14.860

这是我为你做的事情，希望这是你正在寻找的。（我用于测试的图像是每 200 像素 200 像素。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Page title</title>

   <script src=http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js></script>
   <script>
        $(document).ready(function() {
            var currentImg = 1,
                totalImages = 4
                loopTime = 1000,
                intervalId = null;

            function displayTitle(imgNbr) {
                $('.title').hide();
                $('#image'+imgNbr).prev('div').show();
            }

            $('img').on('mouseover', function() {
                clearInterval(intervalId);
                displayTitle($(this).parent().attr('id').substring(5));
            }).on('mouseout', function() {
                currentImg = $(this).parent().attr('id').substring(5);
                startLoop();
            })

            function startLoop() {
                intervalId = setInterval(function() {
                    displayTitle(currentImg);
                    currentImg = ((currentImg == totalImages) ? 1 : parseInt(currentImg)+1);
                }, loopTime);
            }
            startLoop();
        });
   </script>
   <style>
       .imgcontainer {
           margin: 10px;
           float: left;
           position: relative;
           text-align: center;
       }
       .title {
           position: absolute;
           top: 70px;
           left: 60px;
           color: #ffffff;
           display: none;
       }
       .img {
           clear: both;
       }
   </style>

</head>
<body>

<div class="imgcontainer">
    <div class="title">title 1</div>
    <div class="img" id="image1"><img src="images/image1.jpg" /></div>
</div>

<div class="imgcontainer">
    <div class="title">title 2</div>
    <div class="img" id="image2"><img src="images/image2.jpg" /></div>
</div>    

<div class="imgcontainer">
    <div class="title">title 3</div>
    <div class="img" id="image3"><img src="images/image3.jpg" /></div>
</div>

<div class="imgcontainer">
    <div class="title">title 4</div>
    <div class="img" id="image4"><img src="images/image4.jpg" /></div>
</div>    

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:28:00.410

你需要有一个“旋转木马”。

如果您可以使用 JQuery，[那么 CarouFredSel](http://caroufredsel.frebsite.nl/)是一个非常好的选择，[这里](http://caroufredsel.frebsite.nl/examples/continuously-scrolling.php)是示例。

如果你想依赖 JavaScript，你可以使用[Conveyor Belt Slideshow Script](http://www.dynamicdrive.com/dynamicindex14/leftrightslide.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:39:15.433

正如@Asif 在他的回答中所说，这种类型的东西有许多公开可用的 JavaScript 组件。

我已经多次使用Dynamic [Drive中的](http://www.dynamicdrive.com/dynamicindex4/)[Lightbox Image Viewer v2.03a](http://www.dynamicdrive.com/dynamicindex4/lightbox2/index.htm)（这不是您所追求的），但在该站点上还有更多内容可供查看，其中一个可能正是您所需要的后。

# java - 此消息使用 InternetService 不支持的字符集？

> ID：11097161
> 
> 赞同：1
> 
> 时间：2012-06-19T08:25:46.747
> 
> 标签：java, email, spring-mvc, encoding, header

我正在使用 Spring`JavaMailSender`从我们的 Web 应用程序发送邮件。到目前为止，它运行良好，除了这种情况：我们的一位客户报告说他们的电子邮件客户端无法读取电子邮件中的字符，并显示：

> 此消息使用 Internet 服务不支持的字符集。要查看原始邮件内容，请打开附加邮件。如果文本显示不正确，请将附件保存到磁盘，然后使用可以显示原始字符集的查看器打开它。

奇怪的是只有一个人看到这个错误。其他人看到电子邮件就好了。有问题的用户正在使用 Hotmail。

我搜索了几个论坛，其中大多数是关于他们的电子邮件客户端的沮丧客户，但服务器端的解决方案/解决方法并不多。有人说这是因为中间的 SMTP 服务器不支持 Unicode，但我不认为是这种情况......

这是我的（简化的）代码：

```
MimeMessage mimeMessage = mailSender.createMimeMessage();
MimeMessageHelper helper = new MimeMessageHelper(mimeMessage, true);
helper.setFrom(new InternetAddress("abc@abc.abc","Hoang Long"));
helper.setReplyTo("abc@abc.abc");
helper.setTo(student.getEmail());           
helper.setSubject(emailSubject);
helper.setCc(studioParameterService.getAllCCEmailAddress(studio.getId()));
helper.setSentDate(new Date());
helper.setText(emailContent, true);

for (String filePath : attachFileList) {
FileSystemResource attachFile = new FileSystemResource(filePath);
   helper.addAttachment(attachFile.getFilename(), attachFile);
}           
mailSender.send(helper.getMimeMessage()); 
```

# c# - 我的程序中未处理的空引用异常

> ID：11097162
> 
> 赞同：0
> 
> 时间：2012-06-19T08:25:46.780
> 
> 标签：c#, .net

当我运行我的代码时，我收到一个错误“**空引用异常未处理**”和“**对象引用未设置为对象的实例”。**

**堆栈跟踪**

```
>   Excel1.exe!Excel1.Program.GetAllTemplateNames(string strParam, string strRetVal) Line 121   C#
    Excel1.exe!Excel1.Program.ProcessInput(string strRetVal, string strFunctionName, string strParam1, string strParam2, string strParam3, string strParam4, Excel1.MWMClient.MWMServiceProxy.TemplateData tData, Excel1.MWMClient.MWMServiceProxy.TaskInstance tInstance, int tID) Line 77 + 0x23 bytes    C#
    Excel1.exe!Excel1.Program.Main(string[] args) Line 66 + 0x20 bytes  C# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:35:05.123

看起来你没有在使用它们之前初始化`taskClient`and 。`templateClient`我没有看到对您的任何调用以及您`TemplateImpl()`在`TaskImpl()`哪里初始化这些调用。

# c++ - OpenGL 上的多线程渲染

> ID：11097170
> 
> 赞同：18
> 
> 时间：2012-06-19T08:26:08.027
> 
> 标签：c++, windows, multithreading, opengl, rendering

我有一个多线程应用程序，我正在尝试使用不同的线程进行渲染。首先，我尝试在所有线程之间使用相同的渲染上下文，但我得到了其他线程的 NULL 当前上下文。我在互联网上读到一个上下文一次只能在一个线程上是当前的。

所以我决定做一些不同的事情。我创建一个窗口，从中获取 HDC 并创建第一个 RC。之后，我在线程之间共享这个 HDC，并且在我创建的每个新线程中，我都从同一个 HDC 获得一个新的 RC，并使其成为该线程的最新版本。每次我这样做时，返回的 RC 总是不同的（通常是前一个值 + 1）。我做了一个断言来检查是否`wglGetCurrentContext()`返回一个 RC，看起来它返回了刚刚创建的那个。但是在进行渲染之后，我没有得到任何渲染，如果我打电话`GetLastError()`我会得到错误 6（无效的句柄？？）

那么，这是否意味着，尽管每个新的调用`wglCreateContext()`都给了我一个新的值，但不知何故，这意味着所有这些不同的值对于 OpenGL 调用来说都是相同的“连接通道”？

这是否意味着我将始终必须使线程上的先前渲染上下文无效，并在新线程上激活它？我真的必须一直进行这种同步，或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-19T08:46:23.337

> 我有一个多线程应用程序，我正在尝试使用不同的线程进行渲染。

***不！！！***

尝试对渲染器进行多线程处理将*一无所获*。基本上你遇到了一个大的竞争条件，驱动程序将忙于同步线程以某种方式理解它。

为了获得最佳渲染性能，请将所有 OpenGL 操作保留在一个线程中。所有并行化都在 GPU 上免费进行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-19T09:59:52.833

我建议阅读以下来自 OpenGL Consortium的[wiki 文章。](https://www.khronos.org/opengl/wiki/OpenGL_and_multithreading)

简而言之，这在很大程度上取决于您对 OpenGl 多线程的含义，如果您有一个线程执行渲染部分，而一个（或多个）线程执行其他工作（即 AI、物理、游戏逻辑等），它是完全正确。

如果您希望多个线程与 OpenGL 发生冲突，您不能，或者更好，但它确实会给您带来更多的麻烦而不是优势。

尝试阅读以下有关并行 OpenGL 使用的常见问题解答，以更好地了解此概念：

[http://www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html](http://www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-03T11:53:05.280

在某些情况下，在不同线程中使用多个渲染上下文可能是有意义的。我已经使用这样的设计从文件系统加载图像数据并将这些数据推送到纹理中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-31T01:22:26.633

Mac OS X 上的 OpenGL 是单线程安全的；启用它：

```
#include <OpenGL/OpenGL.h>

CGLError err = 0;
CGLContextObj ctx = CGLGetCurrentContext();

// Enable the multi-threading
err =  CGLEnable( ctx, kCGLCEMPEngine);

if (err != kCGLNoError ) {
     // Multi-threaded execution is possibly not available
     // Insert your code to take appropriate action
} 
```

请参阅： [并发和 OpenGL - Apple Developer](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_threading/opengl_threading.html)

并且： [技术问答 QA1612：OpenGL ES 多线程和...](https://developer.apple.com/library/ios/qa/qa1612/_index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-05T08:31:10.187

[https://www.imaginationtech.com/blog/understanding-opengl-es-multi-thread-multi-window-rendering/](https://www.imaginationtech.com/blog/understanding-opengl-es-multi-thread-multi-window-rendering/)

**什么时候不应该使用多线程渲染？**

**当您不受 CPU 限制或加载时间不是问题时。**

因此，如果您的 CPU 受限，请分开其他线程来完成 CPU 受限的工作，例如编解码器、纹理上传、计算......

# linux - 删除用户强制该用户解锁了所有锁定的文件

> ID：11097172
> 
> 赞同：1
> 
> 时间：2012-06-19T08:26:11.287
> 
> 标签：linux, admin, perforce, root

我已经从 perforce 中删除了一个特定用户，该用户已从该用户放置锁的文件中删除了锁。

我希望锁定仍然存在，那么为什么它没有发生呢？应该怎么做？作为删除 perforce 用户的过程的一部分，我已经删除了他的工作区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:10:46.293

我假设您的意思是有人运行了`p4 lock`命令？或者也许这些文件被设置为独家结帐？

在任何一种情况下，一旦用户离开，这些锁就没有任何意义，因为它们与用户和工作空间相关联。如果要限制对这些文件的编辑，可以再次锁定它们或更改对文件的保护。

# java - 使用 jmf 播放视频

> ID：11097174
> 
> 赞同：2
> 
> 时间：2012-06-19T08:26:12.770
> 
> 标签：java, swing, video, jmf

我正在尝试使用播放视频文件，`JMF`但它给了我`No Media Player found exception`.

这是我的代码，谁能告诉我我在这里做错了什么？

```
public class MediaPanel extends JPanel {
public MediaPanel(URL mediaURL) {
    setLayout(new BorderLayout());

    try {
        Manager.setHint(Manager.LIGHTWEIGHT_RENDERER, true);
        Player mediaPlayer = Manager.createRealizedPlayer(mediaURL);
        Component video = mediaPlayer.getVisualComponent();
        Component controls = mediaPlayer.getControlPanelComponent();

        if (video != null)

            add(video, BorderLayout.CENTER);

        if (controls != null)
            add(controls, BorderLayout.SOUTH);

        mediaPlayer.start();
    } catch (NoPlayerException noPlayerException) {
        System.err.println("No media player found");
    } // end catch
    catch (CannotRealizeException cannotRealizeException) {
        System.err.println("Could not realize media player");
    } // end catch
    catch (IOException iOException) {
        System.err.println("Error reading from the source");
    }
}
}

public class MediaTest {

public static void main(String args[]) {
    // create a file chooser
    JFileChooser fileChooser = new JFileChooser();

    // show open file dialog
    int result = fileChooser.showOpenDialog(null);

    if (result == JFileChooser.APPROVE_OPTION) // user chose a file
    {
        URL mediaURL = null;
        Player mediaPlayer = null;

        try {
            // get the file as URL 
            mediaURL = fileChooser.getSelectedFile().toURL();
        } catch (MalformedURLException malformedURLException) {
            System.err.println("Could not create URL for the file");
        }

        if (mediaURL != null) {
            JFrame mediaTest = new JFrame("Media Tester");
            mediaTest.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            MediaPanel mediaPanel = new MediaPanel(mediaURL);
            mediaTest.add(mediaPanel);

            mediaTest.setSize(300, 300);
            mediaTest.setVisible(true);
        }
    }
}
} 
```

我得到的例外是`No media player found`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T08:42:32.043

你想播放什么样的视频？JMF 是一个相当古老的库，无法播放大多数现代视频格式，只有一些旧的（我什至不确定是哪些）。

实际上，如果我是对的，要播放特定的内容，您必须将自己的视频编码器编写/添加到 JMF 中，或者至少下载并使用通常已经过时的现有视频编码器。

如果您真的想拥有可以播放任何现代视频的可调视频播放器之类的东西，那么有两种选择（在我看来）：

1.  使用[vlcj](https://github.com/caprica/vlcj)库将[VLC](http://www.videolan.org/vlc/)视频播放器嵌入到您的 Java 应用程序中

2.  使用 JavaFX[媒体播放器](http://docs.oracle.com/javafx/2/media/overview.htm)

我只提供这两个，因为我前段时间浏览了大量的图书馆，甚至没有其他任何东西接近这两个。此外，大多数其他库以及 JMF 本身都已过时，这两个库正在频繁更新，并得到大量用户的支持，因此这两个库是最佳选择。

如果您不介意将 Java FX 播放器嵌入到您的应用程序中 - 这可能是您的选择。

另一方面 - vlcj 是稳定的并且很容易集成到 Swing 应用程序中（它不像 Java FX 那样硬，但在某些情况下 vlcj 可能更好）。

无论如何，选择什么是你的决定。

# xcode - 如何使用 XCode 4 构建使用 py2app 的应用程序？

> ID：11097175
> 
> 赞同：1
> 
> 时间：2012-06-19T08:26:13.237
> 
> 标签：xcode, py2app

最近我终于想出了如何使用 py2app打包 Python 应用程序（ [Mnemosyne ）。](http://mnemosyne-proj.org/)这是跨平台软件，py2app 引入了很多依赖项——PyQt、cherrypy 等——所以重写不是一种选择。

但是，如果可能的话，我想将此应用程序提交到 App Store 或至少签署代码，以便下个月发布 Mountain Lion 时，用户可以在没有警告的情况下安装它。但是，当我启动 Xcode（我以前从未使用过）时，系统会提示我选择一个模板，但我不知道该选择什么。

我可以像这样轻松构建应用程序：

> sudo python setup.py py2app

有人可以给我一个粗略的想法，以便能够在 Xcode 中构建它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:42:59.440

我没有使用过 py2app，但我可以让你大致了解在 Xcode 中构建应用程序需要做什么。首先创建一个外部构建系统项目。外部构建系统项目允许您使用 Python 的工具来构建项目。

创建项目后，您可能需要配置构建工具才能正确构建项目。从项目窗口左侧的项目导航器中选择项目文件。这将打开项目编辑器。在项目编辑器的左侧选择您的目标。单击编辑器顶部的信息按钮以配置构建工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:35:04.267

您无需使用 Xcode 对 .app 进行签名。您还可以使用名为 codesign 的独立命令（这是 code-sign，而不是 co-design）。创建 .app 后，您可以使用以下命令对其进行签名

```
codesign -s "Your Developer ID Profile Name Here" "Your Program.app" 
```

您需要阅读手册页以确定您需要哪些选项，但希望这至少可以为您指明正确的方向。此外，您显然需要在您的钥匙串中拥有您的开发人员 ID 证书等才能正常工作。

# android - 安卓相机在后台

> ID：11097178
> 
> 赞同：3
> 
> 时间：2012-06-19T08:26:23.257
> 
> 标签：android, android-widget, android-camera, android-service

我正在开发一个应用程序来从后台应用程序中获取图像，比如使用 android 服务。我不希望任何用户交互来拍摄图像，它应该完全在后台工作。

我已经试过了——

1.  从服务中调用相机 - 如果我们有虚拟表面视图，有时它并不总是有效，同样如果 Android 关闭相关活动服务停止拍摄照片，我不想为用户交互运行活动。经过一些更改，它工作正常，但所有图像都是黑色的。
2.  小部件：由于小部件不支持表面视图，因此无法在小部件中调用相机。
3.  动态壁纸：目前无法使用，是否支持相机？

根据我迄今为止的经验，如果没有可用的实际预览，Android 相机服务不适合拍照。

有人开发过这样的东西吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:32:59.343

[如果您可以忽略旧版本，使用SurfaceTexture（API 11 及更高版本）](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)可能更容易正如**[vikky.rk](https://stackoverflow.com/users/1262000/vikky-rk)** [在对最近一个问题的回答中指出的那样](https://stackoverflow.com/questions/11544877/really-confused-with-setpreviewcallback-in-android-need-advice)，可以在默认 Android 相机的[PanoramaActivity 代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/camera/panorama/PanoramaActivity.java)中找到对该技术的介绍应用程序。

# c# - 在构造函数中初始化属性

> ID：11097179
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:26:30.350
> 
> 标签：c#, .net-4.0, constructor

我有一个类，其中的属性很少，出于某些原因，我必须在构造函数中初始化它们。我这样做了

```
public DataBuilder(IResources Resources)
        {
            _resources = Resources;
            // pre initializing data so request load faster after the first request
            var providerList = ProviderList;
            var publisherList = PublisherList;
            var applicationsList = ApplicationList;
            var catergoriesList = CategoryList;
            var editionsList = EditionsList;
        } 
```

但是团队负责人告诉我要考虑如何在不将它们分配给变量的情况下初始化它们。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:37:36.850

[很高兴知道您在每个属性中都在做什么，因为如果没有该上下文，所有这些似乎都是代码异味。]

如果属性 get 上的这个数据负载足够昂贵，足以保证在构造函数中“预先调用”它们，那么我要做的**第一件事就是***至少*让它们成为方法：

```
InitializePropertyList();
// etc 
```

我倾向于支持方法的原因是返回值可能会在后续调用中发生变化，或者调用很昂贵（在您的情况下就是这样） - 我希望属性调用很便宜。

至于他们在构造函数中，这对我来说立即像是一种代码味道。看来代码放错地方了。

为什么不在没有任何数据加载的情况下构造对象并公开预加载事物的方法？

```
class DataBuilder
{
    public DataBuilder(IResources resources)
    {
        _resources = resources;
    }

    public void PreLoadExpensiveData()
    {
        InitializeProviderList();
        // etc
    }

    private void InitializeProviderList()
    {
        // Put whatever was in get_ProviderList into here 
        // and make the property return just the field.
    }
} 
```

我也倾向于期望对象构造很便宜。如果构造函数需要做很多事情，也许可以重构它，以便构造函数*请求*数据而不是自己获取数据。或者，在构造对象很快的地方使用我上面的结构，但是您公开了数据加载或初始化方法 - 假设这样的数据加载操作是对象的*责任*。

# .net - .Net 应用程序的 Mono SOAP 请求构造导致 SOAP 错误

> ID：11097183
> 
> 赞同：1
> 
> 时间：2012-06-19T08:26:41.620
> 
> 标签：.net, soap, jboss, mono, jboss7.x

我有一个 .Net 应用程序，它对在 JBoss7.1 上运行的服务进行 Web 服务调用。来自 Linux（使用 Mono 2.10.2）和 Windows（下）的“登录”方法之一的 SOAP 请求是不同的。虽然它们看起来相当（我认为），但从 Linux 执行会导致服务器故障并出现异常**'Unmarshalling Error: unexpected element (uri:"http://ws.array.mod.abc.com/", local:"username") . 预期元素是 <{}username>,<{}password>'**

```
Linux(Mono 2.10.2)
==================
POST /array_ws/ArrayService?WSDL HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Content-Length: 335
Expect: 100-continue
Connection: keep-alive
Host: 10.10.5.61:8080

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <login xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://ws.array.mod.abc.com/">
         <username>admin</username>
         <password>admin</password>
      </login>
   </s:Body>
</s:Envelope>

Windows
=======
POST /array_ws/ArrayService?WSDL HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Host: 10.10.5.61:8080
Content-Length: 312
Expect: 100-continue
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <login xmlns="http://ws.array.mod.abc.com/">
         <username xmlns="">admin</username>
         <password xmlns="">admin</password>
      </login>
   </s:Body>
</s:Envelope> 
```

当我将 xmlns="" 添加到用户名和密码字段并从 Linux 对服务器进行直接 SOAP 调用时，它工作正常。是否有任何我必须更改的单声道库/我必须执行的 JBoss Web 服务配置才能使其正常工作？

# java - Java ByteBuffer 放置与包装

> ID：11097187
> 
> 赞同：5
> 
> 时间：2012-06-19T08:26:51.240
> 
> 标签：java, arrays, performance, bytebuffer

`ByteBuffer`用 Java填充预分配的最快方法是什么？

我首先用 设置字节缓冲区的大小`allocateDirect()`，这只需要做一次。之后，我需要用新数据尽可能快地连续填充（回收它），这些新数据`byte[]`大约每 5ms 一次，并且不占用内存，因为我已经预先分配了字节缓冲区。目前，我使用该`put()`指令，在我的系统中完成该指令大约需要 100 毫秒。是否有另一种方法来填充字节缓冲区？函数在不`wrap()`重新分配数组的情况下运行得更快吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T08:30:43.983

我希望你的意思`byte[]`不是`Byte[]`

A`put()`是将 byte[] 复制到 ByteBuffer 的最快方法。一种更快的方法是首先写入`ByteBuffer`而不使用 a `byte[]`。

如果复制需要 100 毫秒，则可能是您复制了太多数据。在此测试中，它在 128 微秒内复制 1 MB。

```
ByteBuffer bb = ByteBuffer.allocateDirect(1024 * 1024);
byte[] bytes = new byte[bb.capacity()];

int runs = 50000;
long start = System.nanoTime();
for (int i = 0; i < runs; i++) {
    bb.clear();
    bb.put(bytes);
}
long time = System.nanoTime() - start;
System.out.printf("Average time to copy 1 MB was %.1f us%n", time / runs / 1e3); 
```

印刷

```
Average time to copy 1 MB was 128.9 us 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-24T11:17:52.327

**wrap**应该快得多，因为——如果我正确理解了文档——它不会复制字节数组，而只是设置成员变量（容量/限制/位置）。当然，如果您已经从某个地方获得了带有所需数据的 byte[]，则 wrap 才有意义。

# java - 绑定到 Java 中的 0.0.0.0 是否保证绑定到所有网络接口？

> ID：11097189
> 
> 赞同：10
> 
> 时间：2012-06-19T08:26:55.797
> 
> 标签：java, networking

我凭经验发现

```
Endpoint endpoint1 = Endpoint.create(new Ping());
endpoint1.publish("http://0.0.0.0:8080/ws/ping"); 
```

绑定到当前计算机上的所有网络接口（而不仅仅是 localhost - 127.0.0.1 或主机名），但我无法找到说明这是保证的文档。

问题：在哪里定义绑定到 Java 中的 0.0.0.0 将始终绑定到所有网络接口？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T23:00:43.320

使用`0.0.0.0`只会绑定到启用 IPv4 的接口。但是，如果您绑定到`::`，则应该涵盖所有 IPv4 和 IPv6 接口，假设您的 TCP/IP 堆栈（和 Java）启用了与 IPv4 兼容的 IPv6 套接字。

您需要查看内核（或套接字库，如果您在 Windows 上）以了解“为什么”的解释。在我的 OS X 系统上，`man`页面解释了它。

来自*man 4 inet`*：

> 可以使用本地地址创建套接字，`INADDR_ANY`以对传入消息进行“通配符”匹配。*connect(2)* 或*sendto(2)*调用中的地址可以表示为`INADDR_ANY`“此主机”。`INADDR_BROADCAST`如果配置的第一个网络支持广播，则允许区分地址作为主网络上的广播地址的简写。

从*man 4 inet6*：

> 可以使用本地地址`::`（等于 IPv6 地址`0:0:0:0:0:0:0:0`）创建套接字，以影响传入消息的“通配符”匹配。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T10:14:26.547

它与Java无关。0.0.0.0 是 INADDR_ANY，它是一个特殊的地址，由 Java 调用的*C套接字 API 保证**从**任何*** 网络接口接收。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T09:02:55.373

它似乎是某种特殊的保留 IP 地址。这个链接可能有更多信息[0.0.0.0 是一个有效的 IP 地址吗？](https://stackoverflow.com/questions/3655723/is-0-0-0-0-a-valid-ip-address). 所以我怀疑它没有用 Java 记录，因为它与实际的网络规范更相关。

正如其他一些人提到的那样，它似乎是 Chuck Norris IP 地址：D

高温高压*

# ios - 设备开机时自动运行应用程序

> ID：11097191
> 
> 赞同：0
> 
> 时间：2012-06-19T08:27:18.740
> 
> 标签：ios

当用户打开设备时，如何自动运行我的应用程序？我可以在开机时触发本地通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:29:55.967

不，你不能，只有 VOIP 应用程序会在设备打开时启动。

# javascript - 为什么自定义单选按钮没有被禁用？

> ID：11097192
> 
> 赞同：0
> 
> 时间：2012-06-19T08:27:21.550
> 
> 标签：javascript, jquery, css

我正在使用[**这个插件**](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)来自定义页面上的复选框和单选按钮。

这些单选按钮位于一个`div#Main`元素中，该元素还包含一些其他 HTML 元素。我需要通过`div`单击按钮禁用其中的所有内容（*我正在使用[jQuery](http://jquery.com/)*）。为此，我有以下代码，

**HTML**

```
<input type="button" id="DisableElements" value="Disable elements" />

<div id="Main">
    <input type="radio" class="styled" name="reg-all"/>
    <input type="radio" class="styled" name="reg-all"/>

    <select id="MyList">
        <option value="1">Choice-1</option>
        <option value="2">Choice-2</option>
    </select>

    <textarea id="Comments" rows="4" cols="5"></textarea>
</div> 
```

**脚本**

```
$(function(){
    $('#DisableElements').click(function(){
        $('#Main').find('*').attr('disabled', 'disabled');
    });
}); 
```

* * *

**问题：**除单选按钮外，所有内容均已正确禁用。

> 在幕后，插件脚本隐藏了实际的单选按钮，并`span`像毯子一样将单选按钮放在单选按钮上。这`span`有一个具有不同状态（打开和关闭）的背景图像精灵，它会在单选按钮选择时相应更新。这是这个插件的工作。

我本可以使用插件的内置方法来禁用/破坏功能，但我没有找到任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:28:22.583

在 DOM 完成加载后，图像加载几乎没有延迟，

所以你可以尝试在`$(window).load()`.

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T11:15:21.570

我制作的解决方案可以被认为是一个补丁，但效果很好（至少对于我的场景）。正确的方法应该是使用一些现有的 API 方法来反映更改，类似`disable()`或类似的东西，但我没有找到这样的方法或类似的东西。

**解决方案：**使单选按钮看起来像禁用（不可点击）。

因为我不想深入研究插件`js`文件。为此，我做了一个透明`div`的`width`，`height`足以覆盖单选按钮并将其放置在单选按钮和光标之间的图层上。这个 div 默认是隐藏的，并在禁用控件时显示它。保持简短，这里是代码更改。

### HTML

```
<input type="button" id="DisableElements" value="Disable elements" />

<div id="Main">
  <div id="Blanket"></div>
  <input type="radio" class="styled" name="reg-all"/>
  <input type="radio" class="styled" name="reg-all"/>

  <select id="MyList">
    <option value="1">Choice-1</option>
    <option value="2">Choice-2</option>
  </select>

  <textarea id="Comments" rows="4" cols="5"></textarea>
</div> 
```

### CSS - 用于毯子 div

```
#Blanket
{
  position:absolute;  /*Imp: otherwise it will disturb the UI*/
  width:100px;
  height:100px;
  display:none;
  /* top/left adjustments, if required! */
} 
```

### 脚本

```
$(function(){
   $('#DisableElements').click(function(){
      $('#Blanket').show();
      $('#Main').find('*').attr('disabled', 'disabled');
   });
}); 
```

然而，这个解决方案需要消除如果有人使用**开发人员工具**来智能应用程序会发生什么的恐惧，但这并不重要。此外，您不能 100% 阻止用户使用此类工具。

**另一个可行且看起来更合适的解决方案：**在输入控件上放置隐形毯子听起来像一个补丁，并且可以轻松捕捉。插件脚本添加了一个名为的 CSS 类`styled`，并且需要添加以下样式来实现自定义外观。

```
input.styled
{
    display: none;  // hides the parent input element
} 
```

正因为如此，即使我们将按钮状态切换为禁用，更改也不会反映出来，因为父元素是隐藏的，使得其他侦听器难以附加。通过将样式更改为以下样式，一切正常。

```
input.styled
{
    position: absolute;
    opacity: 0;
} 
```

它使父输入元素不可见，但在幕后在 DOM 上完全活跃。

# nhibernate - NHibernate QueryOver SQLFunction 在 where 子句中

> ID：11097193
> 
> 赞同：3
> 
> 时间：2012-06-19T08:27:21.693
> 
> 标签：nhibernate, subquery, queryover

我想查询一个有多行的表，每行都有一个`timestamp`数据，数据间隔为十分钟。我想找到任何缺失数据的开头，即`timestamp`下一个十分钟间隔不相等的地方，如下所示：

```
select a.[timestamp]
from [table] as a
where not exists (select 1
                  from [table] as b
                  where a.[id] = b.[id] 

                    and b.[timestamp] = dateadd(mi, 10, a.[timestamp]))

order by a.[timestamp] 
```

到目前为止我有这个，但我看不到如何构建查询让我在上面的查询中执行**b.[timestamp] = dateadd(mi, 10, a.[timestamp])**：

```
Table tableAlias = null;

IList<DateTimeOffset> dateTimeOffsets = session.QueryOver(() => tableAlias)
.WithSubquery
.WhereNotExists(QueryOver.Of<Table>()
.Where(x => x.Id == tableAlias.Id)

.And(Restrictions.Eq(Projections.SqlFunction("addminutes",
                                             NHibernateUtil.DateTimeOffset,
                                             new[]
                                             {
                                               Projections.Property("Timestamp"),
                                               Projections.Constant(10)
                                             }),
                                             <insert timestamp property again here>))

.Select(Projections.Constant(1)))
.Select(x => x.Timestamp)
.List<DateTimeOffset>(); 
```

我无法理解对 sqlfuntion 部分的限制——`Nhibernate`只是不允许我比较 sqlfunction 和我的时间戳。

我希望我使用上面的代码走在正确的轨道上，但是如果我完全不打算解决这个问题，请纠正我......

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:10:09.983

你在正确的轨道上。您需要使用`Restrictions.EqProperty`而不是，`Restrictions.Eq`因为您正在比较两个投影而不是投影和常数值。

此外，您可以使用 an`Expression`来访问`TimeStamp`内部查询的属性，而不是使用字符串。

以下代码适用于 Sql Server 2008，但可能需要对其他数据库引擎进行一些调整：

```
Table a = null;

session.QueryOver<Table>(() => a)
    .WithSubquery
    .WhereNotExists(
        QueryOver.Of<Table>()
            .Where(t => t.Id == a.Id)
            .And(Restrictions.EqProperty(
                Projections.SqlFunction(
                    "addminutes",
                    NHibernateUtil.DateTimeOffset,
                    Projections.Constant(10),
                    Projections.Property(() => a.TimeStamp)),
                Projections.Property(() => a.TimeStamp)))
            .Select(Projections.Constant(1)))
.Select(t => t.TimeStamp)
.List<DateTimeOffset>(); 
```

应该生成以下 SQL（至少在 Sql Server 2008 上）：

```
SELECT this_.TimeStamp as y0_
FROM   [Table] this_
WHERE  not exists (SELECT 1 /* @p0 */ as y0_
                   FROM   [Table] this_0_
                   WHERE  this_0_.Id = this_.Id
                          and dateadd(minute, 10 /* @p1 */, this_.TimeStamp) = this_.TimeStamp) 
```

# c# - 如何声明新类型

> ID：11097197
> 
> 赞同：4
> 
> 时间：2012-06-19T08:27:41.693
> 
> 标签：c#, types

如何在 C# 中创建新类型？例如**字节**的范围是 0 到 255，但我需要新的类型，它的范围是 0 到 10。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:34:18.660

令人惊讶的是，人们想要关闭这个不是一个真正的问题！

答案是 C# 没有支持在编译时检查整数范围的类型系统，除了一些内置情况：它阻止您将较大范围的数字分配给较小范围的数字。但是这些数字的范围是在语言规范中预先定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:33:19.723

您创建一个包装类`byte`（或者`int`，如果您需要更大的范围）。
然后，您定义常用操作 - *、/、- ... 您可以为此使用运算符重载。
您添加一些检查以查看该值是否保持在边界内，否则抛出适当的异常。
这是一个简短的示例：

```
class LimitedRangeValue
{
    private static readonly int maxval = 10;
    private static readonly int minval = 0;
    private int n;

    public LimitedRangeValue( int n )
    {
        if (n < minval || n > maxval)
            throw new OverflowException();
        this.n = n;
    }

    public static LimitedRangeValue operator +( LimitedRangeValue r1, LimitedRangeValue r2 )
    {
        return new LimitedRangeValue( r1.n + r2.n );
    }

    // Other operators by analogy

    public override string ToString()
    {
        return n.ToString();
    }
} 
```

编辑：正如@Andrew Barber 在评论中指出的那样，您可以使用代码合同进行（额外）验证。

# multithreading - WCF - 产生一个新的工作线程并返回给调用者而不等待它完成

> ID：11097200
> 
> 赞同：2
> 
> 时间：2012-06-19T08:27:55.000
> 
> 标签：multithreading, wcf

我有一个托管在 IIS 中的 WCF Web 服务——该服务有一个方法——我们称之为 DoSomething()。DoSomething() 从客户端应用程序调用。

DoSomething 执行一些工作并将答案返回给用户。现在我需要记录 DoSomething 被调用的频率。我可以将它添加到 DoSomething 函数中，以便每次调用都会写入 sql 数据库并更新计数器，但这会减慢 DoSomething 方法的速度，因为用户需要等待这个额外的数据库调用。

让 DoSomething 方法生成一个新线程来更新数据库中的计数器，然后将 DoSomething 方法的答案返回给用户而不等待线程完成，这是一个不错的选择吗？然后我将不知道数据库更新是否失败，但这并不重要。

产生一个新的后台线程而不是等待它在 WCF 中完成有什么问题吗？或者有没有更好的方法来解决这个问题？

**更新：**以不同的方式提出问题。在 wcf Web 服务方法中生成新线程是不是一个坏主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:09:32.050

主要问题之一是可靠性。这是你关心的电话吗？如果 IIS 进程在您返回响应后崩溃，但在您的线程完成之前，这有关系吗？如果不是，那么您可以使用客户端 C# 工具。如果它*确实*重要，那么您必须使用可靠的排队技术。

如果您使用客户端，那么生成一个新线程*只是为了阻止数据库调用*永远不是正确的答案。您想要的是使调用异步，并为此在确保在连接上启用之后使用[SqlCommand.BeginExecute 。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.beginexecutenonquery.aspx)[`AsyncronousProcessing`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.asynchronousprocessing.aspx)

如果您需要*可靠的*处理，那么您可以使用依赖于持久队列的[异步过程执行等模式。](http://rusanu.com/2009/08/05/asynchronous-procedure-execution/)

附带说明一下，如果在每个 HTTP 请求上写入数据库的幼稚方法完成，诸如日志记录或命中计数之类的事情将是一个巨大的性能瓶颈。您必须批处理和冲洗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:29:44.070

如果您只想跟踪`DoSomething()`服务中的单个方法，则可以创建自定义操作行为并将其应用于该方法。

操作行为将包含将信息记录到数据库的代码。在该操作行为中，您可以使用 .NET 4.0 的新 TPL 库来创建一个负责数据库日志记录的任务。如果您使用 TPL，则无需担心直接创建线程。

明天使用操作行为的优点是您需要跟踪另一个方法，然后在那个时候而不是在那里复制代码，您只需使用自定义操作行为标记该方法。如果你想跟踪所有的方法，那么你应该去寻找服务行为。

要了解有关操作行为的更多信息，请查看[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationbehaviorattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationbehaviorattribute.aspx)

要了解有关 TPL（任务并行库）的更多信息，请查看[http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

# c# - 嵌入在多个 Satellite Assembly 中的资源

> ID：11097205
> 
> 赞同：3
> 
> 时间：2012-06-19T08:28:03.597
> 
> 标签：c#, asp.net, localization, embedded-resource, satellite-assembly

我知道有几个关于卫星大会的问题，但是在尝试实施它们时我仍然遇到了一些麻烦

> 我的目标是在一个程序集中分离每种文化，让我可以灵活地在需要时一次只重新编译一个程序集，如果我只想对一种语言进行一些小的更改，我不想编译所有语言语

我想充分了解卫星大会的工作方式。这是我目前的理解：

*   卫星程序集可以放在 bin 目录中，而无需重新编译整个应用程序，这意味着应用程序不需要这些程序集即可正常工作（只要指定了备用资源）

*   SA 必须与单一文化相关联

现在我可以使用该工具生成 SA `al`，如果我添加 .resx 文件，Visual Studio 可以为我生成 SA，SA 已创建（在 bin 文件夹中，我可以看到指定区域性的文件夹结构）

**问题1.**这些dll是不是等价的，一个是Visual Studio生成的，一个是`al`工具生成的？

**问题 2.**所有这些 dll 是否必须共享一个通用名称才能工作？（我知道他们应该保持一致性，但如果他们不共享名称，让我们说使用`al`指定不同名称的工具创建它们）它们仍然可以被要加载的.Net框架识别吗？

**问题 3.**如果我想使用`ResourceManager`该类，是否必须为每个装配文化实例化一个实例？（并且由于它们的名称中包含区域性，因此它们具有不同的程序集名称，我是否必须手动格式化嵌入的资源文件以加载以匹配当前区域性并手动加载该程序集？因为它们可能不会在第一次加载，我是否必须通过指定*文化文件夹*中的文件路径来手动加载它？）

**问题 4.**这些 SA 是由 .Net 框架自动加载的，还是我必须显式加载它们？

**问题 5**。如果我必须加载它们，这意味着如果我想在我的控制标签中以声明方式指定资源，我是否必须创建并注册一个自定义资源工厂才能加载它们？

**问题 6.**如果我在 Visual Studio 的一个类项目中添加多个文化的多个资源而没有代码，它们会自动嵌入，当我编译时，会创建每个文化的附属程序集，这些 dll 是否相关？我想知道它们是否按名称、名称空间或其他东西相关

所有这些问题都基于此：我认为我可以将程序集添加到 bin 文件夹*并*在`ResourceManager`. （这就是为什么我关心程序集名称或几个附属程序集是如何相关的）就像在单个程序集中定义资源时一样，您只需`Resources.MyResourceKey`调用

我很感激你的帮助，这个话题让我发疯了=（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:06:18.107

我知道`resgen`和`al`工具看起来比它们应该的要复杂一些，但我很确定您的目标是可以实现的，即您可以在 Visual Studio 解决方案之外构建您的附属程序集（以节省您维护所有已翻译的解决方案中的资源），但得到完全相同的结果。

**问题 1**：是的

**问题2**：是的，ResourceManager 依赖命名约定来加载本地化资源

**问题 3**：不可以。您可以使用标准的 ResourceManager。事实上，您根本不必直接使用 ResourceManager。在您的解决方案中包含您的基础资源并使用 Build Action = Embedded Resource 和 Custom Tool = PublicResXFileCodeGenerator 对其进行配置，然后 Visual Studio 将自动生成和维护一个类（与您的 resx 文件同名），该类允许您通过静态属性访问资源. 根据 Thread.CurrentThread.CurrentUICulture 和部署的附属程序集，这些属性将为您提供来自附属程序集或基础程序集的本地化资源。

**问题 4**：不。ResourceManager 会自动执行此操作。

**问题 5**：见 Q4。没事做。

**问题 6**：见 Q2。它基于命名约定（根据文化命名的文件夹，根据基本 dll 命名的附属程序集）和元数据（例如，使用 al 编译时使用的文化名称）

# c# - 二维网格

> ID：11097207
> 
> 赞同：0
> 
> 时间：2012-06-19T08:28:14.093
> 
> 标签：c#, asp.net

是否有可能使用基本的 ASP.net 控件或 Telerik 的 RadControls 来获得二维网格？到目前为止我找不到信息...在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:32:53.473

“二维网格”是一个非常模糊的要求，但取决于您的数据源是什么，[System.Web.UI.WebControls.GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)控件非常强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:20:11.620

二维网格将是[HTML Table](http://www.w3schools.com/tags/tag_table.asp)。

通过 ASP.NET，您可以使用[GridView](http://asp-net-example.blogspot.co.uk/2008/10/gridview-example-how-to-use-gridview-in.html)控件。

使用 Telerik 控件，您可以使用[Grid](http://www.telerik.com/products/aspnet-ajax/grid.aspx)控件。

这取决于您需要二维网格的用途。

# java - Android中事件监听器的超时检测

> ID：11097208
> 
> 赞同：0
> 
> 时间：2012-06-19T08:28:14.803
> 
> 标签：java, android, timeout

我设置了事件监听器，例如：`setOnClickListener`like this

```
 Button stopBtn = (Button)findViewById(R.id.stop);
    stopBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            doMagic();
        }
    }); 
```

如果未按下按钮，我想将此侦听器设置为 10 秒的超时事件。用例：我`button1`激活了这个`stopBtn`监听器 10 秒，如果超时，它会被停用，我需要按下`button1`才能`stopBtn`再次激活。

我可能做错了：

```
 final Handler myHandler = new Handler();
    startBtn = (Button)findViewById(R.id.start);
    myHandler.postDelayed(new Runnable() {
        public void run() {
            startBtn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.i(TAG,"runned");
                }
            });
        }
    }, 10000); 
```

10 秒后我仍然可以单击它，这可能是因为事件侦听器仍然附加。即使我不知道它是否被解雇，我该如何分离它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:32:38.790

在 Handler 上发布的[延迟 Runnable](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)可以管理：

```
myHandler.postDelayed(new Runnable() {
 public void run() {
   if(something happened) {
     // magic work
   } else {
     // turn off the event
   }
 }
, 10000); 
```

您可以使用以下代码将[Handler](http://developer.android.com/reference/android/os/Handler.html)初始化为实例变量：

```
final Handler myHandler = new Handler(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:38:09.257

[可以使用Handler](http://developer.android.com/reference/android/os/Handler.html)来安排延迟的操作。具体检查 2 种方法：[postAtTime(Runnable, long)](http://developer.android.com/reference/android/os/Handler.html#postAtTime%28java.lang.Runnable,%20long%29)和[postDelayed(Runnable, long)](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)。

创建一个 很容易`Handler`，只需`Handler handler = new Handler()`在`Activity.onCreate(Bundle state)`. 然后将您想要的操作包装成 a`Runnable`并传递给处理程序。

# c# - 应用程序在运行时更改语言

> ID：11097211
> 
> 赞同：3
> 
> 时间：2012-06-19T08:28:21.637
> 
> 标签：c#, winforms, reflection, multilingual

我已经阅读了有关如何在 .Net 中制作多语言程序的教程，并且效果很好，但是在这里我需要一个想法来使运行时的所有事情变得更容易。在运行时当用户单击语言时。我将文化更改为选择的适当语言，例如：

```
Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en"); 
```

然后调用一个为我的表单布局设置文本的函数：

```
private System.Resources.ResourceManager rm;
fileToolStripMenuItem1.Text =  rm.GetString("fileToolStripMenuItem1.Text");
settingsToolStripMenuItem.Text = rm.GetString("settingsToolStripMenuItem.Text"); 
```

当我为程序的每个组件设置文本时，.Net 构建的查找表似乎等于应该设置到其中的属性。换句话说，“fileToolStripMenuItem1.Text”正在传递给 GetString() 函数，结果应该设置为 fileToolStripMenuItem1.Text，所以我不知道我该怎么做，甚至不知道可以使用哪个工具进行迭代在 rm 的每个属性上，然后通过反射或其他方式将键的值分配给键。也就是说，假设“fileToolStripMenuItem1.Text”是查找表中的键，值为“A”，那么我该怎么做：将“fileToolStripMenuItem1.Text”的值“A”分配给fileToolStripMenuItem1.Text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:36:49.183

我已经编写了一些测试 winforms 应用程序并尝试了它，并且可以动态更改控件的 Text 属性。如果需要，您可以扩展此解决方案。

```
 using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Globalization;
using System.Linq;
using System.Reflection;
using System.Resources;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace ConsoleApplication5
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

    //main logic of switching language of UI
    void ChangeCulture_Handler(CultureInfo culture)
    {
        //getting relative path of resource file for specific culture
        var resourcePath = GetLocalizedResourceFile(culture);
        //initialize new reader of resource file
        var reader = new ResXResourceReader(resourcePath);
        //getting enumerator
        var resourceEnumerator = reader.GetEnumerator();
        //enumerate each record in resource file
        while (resourceEnumerator.MoveNext())
        {
            string resKey = Convert.ToString(resourceEnumerator.Key);
            //we can add here some check if need 
            //(for example if in resource file exists not only controls resources with format <Control Name>.<Property>
            //if( resKey.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries).Length == 2) 
            string resValue = Convert.ToString(resourceEnumerator.Value);
            //actually update property
            UpdateControl(resKey, resValue);
        }
    }

    //main logic of updating property of one control
    private void UpdateControl(string resKey, string resValue)
    {
        //we suppose that format of keys in resource file is <Control Name>.<Property>
        var strs = resKey.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries);
        var controlName = strs[0];
        var controlProp = strs[1];

        //find control of form by its name
        var controls = this.Controls.Find(controlName, true);
        if (controls.Length > 0)
        {
            //select first control
            var control = controls[0];
            //getting type of it
            var t = control.GetType();
            //getting property
            var props = t.GetProperty(controlProp);
            if (props != null)
            {
                //setting localized value to property
                props.SetValue(control, resValue, null);
            }
        }
    }

    //build resource file path
    string GetLocalizedResourceFile(CultureInfo ci)
    {
        string cultureCode = ci.TwoLetterISOLanguageName;
        //for english language is default, so we don't have a need to add "en" part in path 
        return cultureCode != "en" ? string.Format("Resource1.{0}.resx", cultureCode) : "Resource1.resx";
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Thread.CurrentThread.CurrentCulture = new CultureInfo("es-MX");
        ChangeCulture_Handler(Thread.CurrentThread.CurrentCulture);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
        ChangeCulture_Handler(Thread.CurrentThread.CurrentCulture);
    }
} 
```

}

英语资源 (Resource1.resx)

```
button1.Text    Change language to es   
button2.Text    Change language to en   
label1.Text         label1  
label2.Text         label2 
```

西班牙语资源 (Resource1.es.resx)

```
button1.Text    cambiar el idioma to es 
button2.Text    cambiar el idioma to en 
label1.Text     lalble1 
label2.Text     lalble2 
```

# jquery - 使用 jquery 将完整的照片路径添加到 img src

> ID：11097217
> 
> 赞同：0
> 
> 时间：2012-06-19T08:28:50.660
> 
> 标签：jquery, image

```
 <img id="lotImgtemp" src="" height="148px" width="200px" border="0">
    var photonames=$("#loyaltymemPhoto").val();     //1.jpg         
    $("#lotImgtemp").attr("src","localhost/sumerdia/uploaded_photos/'+ photonames +'"); 
```

如何将值添加到 img src ？

输出我得到相同的 `"localhost/sumerdia/uploaded_photos/'+ photonames +'"`

我需要的输出是`"localhost/sumerdia/uploaded_photos/1.jpg"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:30:53.113

代替

```
$("#lotImgtemp").attr("src","localhost/sumerdia/uploaded_photos/'+ photonames +'"); 
```

尝试

```
$("#lotImgtemp").attr("src","localhost/sumerdia/uploaded_photos/"+ photonames); 
```

# c# - c# 打开文件对话框

> ID：11097219
> 
> 赞同：7
> 
> 时间：2012-06-19T08:28:53.080
> 
> 标签：c#, openfiledialog

当我使用此代码打开文件时

```
if (ofd.ShowDialog() == DialogResult.OK)
     text = File.ReadAllText(ofd.FileName, Encoding.Default); 
```

出现一个窗口并要求我选择文件（文件名是空白的，如您在图像上看到的）

![在此处输入图像描述](../Images/9ef246b65d00e491126eed5a1df3f63d.png)

如果我第二次按“打开”按钮打开文件，“文件名”会显示上一个选定文件的路径（参见图片）每次按“打开”按钮时如何清除此路径？

![在此处输入图像描述](../Images/c7b3e08aab14224c07f60da0cf04fddc.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T08:32:54.907

`OpenFileDialog`每次单击按钮时，您可能都使用相同的实例，这意味着之前的文件名仍存储在`FileName`属性中。`FileName`您应该在再次显示对话框之前清除该属性：

```
ofd.FileName = String.Empty;
if (ofd.ShowDialog() == DialogResult.OK)
     text = File.ReadAllText(ofd.FileName, Encoding.Default); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T09:34:41.440

试试这个：

```
ofd.FileName = String.Empty; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T08:32:51.270

您需要重置文件名。

```
 openFileDialog1.FileName= ""; 
```

或者

```
 openFileDialog1.FileName= String.Empty() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T08:34:56.967

您可以在调用之前简单地添加此行`ShowDialog()`：

```
ofd.FileName = String.Empty; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T08:33:11.333

要仅清除文件名（而不是选定的路径），您可以将属性设置`FileName`为`string.Empty`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T08:43:12.560

```
private void button1_Click(object sender, EventArgs e)
    {
        openFileDialog1.ShowDialog();
    }

    private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
    {
        label1.Text = sender.ToString();
    } 
```

这个如何。

# iphone - 无法下载整个 html 页面 - Objective C/Xcode

> ID：11097220
> 
> 赞同：1
> 
> 时间：2012-06-19T08:28:59.260
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码行下载并保存 html 页面 ::

```
NSURL *goo = [[NSURL alloc] initWithString:@"http://www.google.com"];
NSData *data = [[NSData alloc] initWithContentsOfURL:goo]; 
NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; //Remove the autorelease if using ARC

NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSLog(@"%@", documentsDirectory);
NSString *htmlFilePath = [documentsDirectory stringByAppendingPathComponent:@"file.html"];
[html writeToFile:htmlFilePath atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

下载并保存后，我需要重新使用它，即上传它。但是，我无法下载css和图像文件以及html页面，即重新上传它时..我没有得到应该在谷歌主页上显示的图像..

有人可以帮我解决问题吗？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T06:12:56.283

嘿，我认为您无法从 google 下载所有文件，只需尝试使用任何其他 url 即可。您可以直接将其写入`NSData`您的文件`htmlFilePath`。

```
[data writeToFile:htmlFilePath atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:59:54.100

使用[ASIWebPageRequest](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)将解决问题：

```
 - (void)downloadHtml:(NSURL *)url
 {
   // Assume request is a property of our controller
   // First, we'll cancel any in-progress page load
   [[self request] setDelegate:nil];
   [[self request] cancel];

   [self setRequest:[ASIWebPageRequest requestWithURL:url]];
   [[self request] setDelegate:self];
   [[self request] setDidFailSelector:@selector(webPageFetchFailed:)];
   [[self request] setDidFinishSelector:@selector(webPageFetchSucceeded:)];

   // Tell the request to embed external resources directly in the page
   [[self request] setUrlReplacementMode:ASIReplaceExternalResourcesWithData];

   // It is strongly recommended you use a download cache with ASIWebPageRequest
   // When using a cache, external resources are automatically stored in the cache
   // and can be pulled from the cache on subsequent page loads
   [[self request] setDownloadCache:[ASIDownloadCache sharedCache]];

   // Ask the download cache for a place to store the cached data
   // This is the most efficient way for an ASIWebPageRequest to store a web page
   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
   NSString *documentsDirectory = [paths objectAtIndex:0];
   [[self request] setDownloadDestinationPath:documentsDirectory] // downloaded path
   //[[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:[self request]]]; use this instead of documentsDirectory if u want to cache the page

   [[self request] startAsynchronous];
}

//These are delegates methods:
- (void)webPageFetchFailed:(ASIHTTPRequest *)theRequest
{
  // Obviously you should handle the error properly...
  NSLog(@"%@",[theRequest error]);
}

- (void)webPageFetchSucceeded:(ASIHTTPRequest *)theRequest
{
   NSString *response = [NSString stringWithContentsOfFile:
   [theRequest downloadDestinationPath] encoding:[theRequest responseEncoding] error:nil];
   // Note we're setting the baseURL to the url of the page we downloaded. This is important!
  [webView loadHTMLString:response baseURL:[request url]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:06:29.133

```
- (void)viewDidLoad {
/// js=yourHtmlSring;
 NSString *js;  (.h)
 [self.myWebView loadHTMLString:js baseURL:nil];
 } 
```

//代表

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
[myWebView stringByEvaluatingJavaScriptFromString:js];
 }` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:37:06.353

正在下载的数据正是 Web 服务器返回的内容 - 纯 html。如果您需要来自内部的资源 - images/sounds/flash/css/javascripts/etc.. 您已解析此 html 并下载所有其他资源.. 您的 html 还可能包含这些资源的完整路径，因此您可能需要更改他们的网址是相对的（如果您想离线显示或上传到另一台服务器）。解析可以使用正则表达式或其他一些可以下载整个网页的第 3 方解析器或库来完成...
您可以看看[ASIWebPageRequest](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)，它声称能够下载整个网站，但我没有尝试过这个功能...

# ms-access - 控制源中的表达式和默认值

> ID：11097227
> 
> 赞同：0
> 
> 时间：2012-06-19T08:29:16.047
> 
> 标签：ms-access

我在这里拉头发。我想将 2 个子表单字段链接到主表单中的一个字段。我用于`Parent.MyFieldName.Column(3)`第一个子表单字段的控制源，它显示得很好。我的第二个子表单字段的行源使用第一个子表单字段作为其查询的条件。问题是，当我使用上面的代码时，这个组合框仍然是空的，但是如果我给第一个字段一个常量值，它就会被填充。感觉组合框在从第一个子表单字段检索数据之前已被填充。我尝试将上面的代码表单控件源移动到默认值，但是两个字段都保持为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:06:52.293

我找到了无法正常工作的主要原因 - 子窗体控件在主窗体的其余部分之前加载。这意味着当时我的子表单下拉菜单在其他表单字段中寻找数据，它们仍然没有出现，因此我留下了一个空的下拉菜单。

我通过删除子窗体控件的源对象并添加解决了这个问题

```
Me!Subform1.SourceObject = "SubformOtpuskaneIzhMat" 
```

在一些事件中的主要形式。

# objective-c - 如何将 UIActivityIndi catorView 与 XML 加载一起使用？

> ID：11097229
> 
> 赞同：1
> 
> 时间：2012-06-19T08:29:19.167
> 
> 标签：objective-c, ios, uiactivityindicatorview, tbxml

我有一个视图，当我单击一个按钮时，我使用 TBXML 解析器从 XML 文件中获取一些内容。在单击按钮方法中看起来像这样：

```
// Should be [activityIndicator startAnimating];
NSURL *url = [NSURL URLWithString:@"adress.xml"];
NSData *data = [NSData dataWithContentsOfURL:url];
TBXML *tbxml = [TBXML newTBXMLWithXMLData:data error:nil];
listArray = [NSMutableArray arrayWithObjects:nil];
[self getData:tbxml.rootXMLElement];
// Should be [activityIndicator stopAnimating]; 
```

但是activityIndi​​cator不显示......这不是它的实现问题，因为如果我在视图的开头添加它就会看到它......所以我被卡住了。有什么建议吗？

非常感谢

编辑：这是代码：

我的函数，当我单击按钮时调用：

```
NSURL *url = [NSURL URLWithString:@"adress.xml"];

dispatch_queue_t queue = dispatch_get_global_queue(
                                 DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    NSData *data = [NSData dataWithContentsOfURL:url];
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        TBXML *tbxml = [TBXML newTBXMLWithXMLData:data error:nil];
        listArray = [NSMutableArray arrayWithObjects:nil];
        [self getData:tbxml.rootXMLElement];
        [activityIndicator stopAnimating];
    });
}); 
```

我的 getData 函数：

```
- (void) getData : (TBXMLElement *) element
{
    Offre *offre = [[Offre alloc] init];
    do {
        if(!go) if([[TBXML elementName:element] isEqualToString:@"item"]) go = YES;
        if(go)
        {
            if([[TBXML elementName:element] isEqualToString:@"title"]) [offre set_title:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"description"]) [offre set_description:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"pubDate"]) [offre set_pubDate:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"link"]) [offre set_link:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"contract-type"]) [offre set_contractType:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"salary"]) [offre set_salary:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"fn-org"]) [offre set_fnOrg:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"locality"]) [offre set_locality:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"state"]) [offre set_state:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"filiere"]) [offre set_filiere:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"categorie"]) [offre set_categorie:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"statut"]) [offre set_statut:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"country-name"]) [offre set_countryName:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"tag"]) [offre set_tag:[TBXML textForElement:element]];
            if([[TBXML elementName:element] isEqualToString:@"familleMetiers"]) 
            {
                [offre set_familleMetier:[TBXML textForElement:element]];
                [listArray addObject:offre];
                offre = nil;
            }
        }
        if (element->firstChild) [self getData:element->firstChild];
    } while ((element = element->nextSibling));
} 
```

我想知道这是否不是因为函数的递归性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:56:39.010

问题是你`dataWithContentOfURL`需要很长时间。因此，最好在后台执行此操作。你可以这样做：

```
NSURL *url = [NSURL URLWithString:@"adress.xml"];

dispatch_queue_t queue = dispatch_get_global_queue(
                                 DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    NSData *data = [NSData dataWithContentsOfURL:url];
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        TBXML *tbxml = [TBXML newTBXMLWithXMLData:data error:nil];
        listArray = [NSMutableArray arrayWithObjects:nil];
        [self getData:tbxml.rootXMLElement];
        [activityIndicator stopAnimating];
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:50:03.653

```
{
    activityview = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [activityview setFrame:CGRectMake(295/2, 375/2, 25, 25)];
    [self.tableView addSubview:activityview];
    [activityview startAnimating];
    NSOperationQueue *queue = [NSOperationQueue new];

    /* Create our NSInvocationOperation to call loadDataWithOperation, passing in nil */
    NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                            selector:@selector(loadDataWithOperation) object:nil];

    /* Add the operation to the queue */
    [queue addOperation:operation];
    [operation release];
}

-(void)loadDataWithOperation {

    NSURL *url = [NSURL URLWithString:@"adress.xml"];
    NSData *data = [NSData dataWithContentsOfURL:url];
    TBXML *tbxml = [TBXML newTBXMLWithXMLData:data error:nil];
    listArray = [NSMutableArray arrayWithObjects:nil];
    [self getData:tbxml.rootXMLElement];
    [activityview stopAnimating];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:52:57.920

这取决于您如何执行 xml 数据的下载和解析。如果您在同一个线程（主要线程）中执行此操作，您将看不到指标。

为避免这种情况，您可以简单地启动指示器，将解析置于后台，完成后，抓住停止指示器。例如使用 GCD，你可以这样做：

```
// start the indicator

dispatch_queue_t queue = dispatch_queue_create(“com.app.yourtask”,NULL);

dispatch_async(queue,^{
 // your downloading and parsing here

 dispatch_async(dispatch_get_main_queue(),^{

   // stop the indicator
 });
});

// release the queue you create... 
```

另一种方法是在运行循环中延迟操作。

```
- (void)setUpDataParsing {

  // start the indicator
  [self performSelector:@selector(parseData) withObject:nil afterDelay:0];
}

- (void)parseData {
  // your downloading and parsing here
  // stop the indicator
} 
```

有关更多信息，请查看[NSRunLoop Pogo Stick](http://bynomial.com/blog/?p=15)。

PS Remember 将指标添加到超级视图。

希望能帮助到你。

# jquery - 使用 jquery 附加嵌套标签

> ID：11097232
> 
> 赞同：0
> 
> 时间：2012-06-19T08:29:37.717
> 
> 标签：jquery

我有一个选择列表。我想在它上面附加一个斜体的新项目。这是我的做法：

```
$('#idSelectList').append($("<option></option>").attr("value", "new").text("Some text")); 
```

但是如何使它成为斜体呢？这是我尝试过的：

```
$('#idSelectList').append($("<option></option>").append($("<i></i>")).attr("value", "new").text("Some text")); 
```

但它不起作用。

我只希望那个元素是斜体，而不是整个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:32:49.037

尝试用 css 来做：

```
$('#idSelectList').css("font-style","italic"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:33:28.990

您**不能**在`<i></i>`标签内放置`<option>`标签。更好的是你可以使用这个：

```
<option style="font-style: italic;"></option> 
```

或者使用**JavaScript / jQuery**，你可以这样做：

```
$('#idSelectList').append($("<option></option>").css("font-style", "italic").attr("value", "new").text("Some text")); 
```

希望能帮助到你！！！:)

# javascript - 使用 Firefox，我如何监控所有触发的事件？

> ID：11097234
> 
> 赞同：56
> 
> 时间：2012-06-19T08:29:55.247
> 
> 标签：javascript, jquery, firefox-addon, jquery-events, javascript-debugger

我正在尝试调试一个大量使用事件的网页，因此我需要监视所有被触发的事件。

大多数事件都是使用 jQuery 绑定的。因此，如果有一种方法可以专门监视这些事件，那将特别有用。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-19T08:33:53.390

当然，您可以使用[Firebug](http://www.getfirebug.com)、控制台和脚本选项卡来添加断点和监视，但显然您希望做得更智能/更容易。

有一个名为[EventBug](http://www.softwareishard.com/blog/firebug/eventbug-alpha-released/)的简洁 Firebug 插件，它只记录所有事件并按事件类型对它们进行分组，以便您可以展开并查看是什么触发了它们。

![事件错误截图](../Images/e26cbed3ed78427e6928e8f7017fc4b0.png)

EventBug 不会实时执行，但您必须刷新。

另一种方法是对 Firebug 中的任何 DOM 元素使用“日志事件”功能。这确实是实时的，您还可以看到触发/触发了哪些订单事件。

试试这个：

*   切换打开 Firebug
*   右键单击 HTML 选项卡中的元素，如果要查看所有事件，请右键单击`<body>`
*   `Log Events`从上下文菜单中选择
*   确保控制台选项卡已启用
*   单击以启用控制台选项卡中的“持久”模式（否则重新加载页面后控制台选项卡将清除）
*   您可能必须选择`Closed`（手动）
*   瞧！在控制台选项卡中观看事件流

这是您在日志事件中看到的内容：

![在此处输入图像描述](../Images/dd07207d5a2cd682fa4a3b877556b3a9.png)

同样值得尝试 Firebug 的[FireQuery](http://firequery.binaryage.com/)插件，以查看 DOM 中的哪些元素附加了 jQuery 事件以及它们是什么。

正如本维的回答所提到的，这在 webkit 的开发人员工具中也是可能的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-19T16:14:28.807

这已在某些版本之前引入，但从 Firefox 35 开始，与元素关联的事件可以在 Inspector 上看到：在您想要查看事件的元素旁边（如果有的话）将有一个带有 ' 的图标EV' 字母。单击它，您将看到一个包含该元素事件的小弹出窗口。

![Firefox 事件检查器](../Images/abf010a680c1f0ead12d8d64acec1ad8.png)

更多信息： http: [//flailingmonkey.com/view-dom-events-in-firefox-developer-tools/](http://flailingmonkey.com/view-dom-events-in-firefox-developer-tools/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T05:44:16.007

我相信这在 Firebug 中不存在，根本问题是在 api 级别缺乏支持或缺乏曝光。或者，除了可观察和可拦截的“onevent”属性之外，只有几种方法可以订阅 DOM 事件：Element.prototype.addEventListener（以及 window.addEventListener 和 document.addEventListener 和 XMLHttpRequest.addEventListener 等）。

但实际上，WebKit 调试器和 Chromium 的调试器（这是 webkit 的加分项）允许调试和观察附加的侦听器。有时更容易在另一个浏览器中调试一个浏览器的错误，从而更好地暴露应用程序/运行时状态，即使该浏览器没有显示错误。

![在此处输入图像描述](../Images/55964d36cfeba8fbe30eea1232831a40.png)

[https://developers.google.com/chrome-developer-tools/docs/elements](https://developers.google.com/chrome-developer-tools/docs/elements)

# jquery - 为什么“错误：”回调被调用

> ID：11097236
> 
> 赞同：0
> 
> 时间：2012-06-19T08:29:56.313
> 
> 标签：jquery

这就是我调用 click 的方式：

```
$("#myDivId").click(function(e) {
callAjax();
window.location = 'localhost://myhomepage'
}); 
```

在错误的错误回调中，我有这个：

```
function callAjax(){
$.ajax({
            url: "myurl",       
            type: 'POST',
            dataType : "text",
            data : ({
                json : myjson
            }),
            success : function(data) {

            },
   error : function() {
        console.log("readyState: "+xhr.readyState);
        console.log("status: "+xhr.status);
        console.log("responseText: "+xhr.responseText);
    } 

        }); 
} 
```

控制台输出是：

```
readyState : 0
status : 0
responseText : 
```

由于控制台输出没有用，如果调用成功，为什么调用错误回调？

如果我在调用 callAjax 之后删除了 window.location 调用，则不会调用错误回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:38:35.603

你的代码有问题。

`ReadyState 0`表示：对象已创建，但尚未初始化（open 方法尚未调用）。[☛来源](http://msdn.microsoft.com/en-us/library/ie/ms534361%28v=vs.85%29.aspx)

所以根本不发送 Ajax 调用。请从您的代码中发布更多详细信息。网络控制台在说什么？

# asp.net - ASP.NET Crystal Reports 不能在 Opera 浏览器中运行？

> ID：11097239
> 
> 赞同：0
> 
> 时间：2012-06-19T08:30:01.897
> 
> 标签：asp.net, crystal-reports, opera

ASP.NET Crystal Reports 在 IE、Firefox 浏览器中运行良好。但是 ASP.NET Crystal Reports 不能在 Opera 浏览器中运行。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:09:55.740

我的第一个猜测是 Crystal Reports 使用浏览器检测。您是否尝试过掩蔽/欺骗作为不同的浏览器？为此，当您看到问题时按 [F12]，然后选择“编辑站点首选项”，转到“网络”选项卡并更改“浏览器识别”设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:13:37.333

Javascript 将帮助您导航....

第一次听到这个问题，但我在不同的控制下面临同样的问题......所以它可能会帮助你......

# javascript - 比较数组慢

> ID：11097242
> 
> 赞同：0
> 
> 时间：2012-06-19T08:30:16.940
> 
> 标签：javascript, knockout.js

我使用比较两个数组的标准方法，但它就像做标准 O(n^2) 一样慢你们能看到问题吗？

```
 diffArray: function (arr1, arr2, observableArray, mapping) {
        //We cant sort orginal arrays
        var o = arr1.slice(0);
        var n = arr2.slice(0);

        // sort both arrays (or this won't work)
        var sorter = function (left, right) {
            return mapping.key(left) - mapping.key(right);
        };
        o.sort(sorter); n.sort(sorter);

        // declare temporary variables
        var op = 0; var np = 0;
        var added = []; var removed = [];

        // compare arrays and add to add or remove lists
        while (op < o.length && np < n.length) {
            if (mapping.key(o[op]) < mapping.key(n[np])) {
                // push to diff?
                removed.push(o[op]);
                op++;
            }
            else if (mapping.key(o[op]) > mapping.key(n[np])) {
                // push to diff?
                added.push(n[np]);
                np++;
            }
            else {
                this.diffMembers(o[op], n[np]);
                op++; np++;
            }
        }

        // add remaining items
        if (np < n.length)
            added = added.concat(n.slice(np, n.length));
        if (op < o.length)
            removed = removed.concat(o.slice(op, o.length));

        ko.utils.arrayForEach(removed, function (item) {
            this.itemDeleted(item, mapping);
        }.bind(this));

        ko.utils.arrayForEach(added, function (item) {
            if (observableArray.concurrencyExtendOptions) {
                this.itemAdded(observableArray, item, mapping);
            }
        } .bind(this));
    } 
```

注意：映射对象只是用户提供的用于比较数组中对象的辅助对象，arr1 和 arr2 是标准 JS 数组，而 observableArray 是未包装的 Knockout 数组

它基于 C# 代码示例，所以也许 JS 中的排序算法不是那么好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:37:27.630

真的不确定它会回答你，但这是`diff`我用于数组的：

```
Array.prototype.diff = function( arr ) {
    return arr.map( function( v ) {
        if ( !~this.indexOf( v ) ) return v;
    }, this ).filter( Boolean );
}; 
```

用法：

```
arr.diff( otherArr ); 
```

[PS：作为评论发布太长......不确定它是否值得回答。]
[PS2：函数原作者：[@Esailija](https://chat.stackoverflow.com/transcript/message/4021931#4021931)。]

# javascript - 在鼠标滚动时使用 JQuery 水平滚动元素

> ID：11097243
> 
> 赞同：1
> 
> 时间：2012-06-19T08:30:24.277
> 
> 标签：javascript, jquery, scroll, horizontal-scrolling

我[这里](http://tarashish.com/instagreat)有一个简单的图片库。我要做的就是在用户滚动鼠标时滚动图像列表。

有任何想法吗 ？`$('').scroll()`绝对行不通。即使我将它绑定到窗口

```
$(window).scroll(function() {
  //do something
}); 
```

它不起作用，因为我的窗口的高度太小而无法滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:43:31.607

这不是 jQuery，而是有一个纯 JS 插件来捕捉鼠标滚动事件：

[http://viralpatel.net/blogs/javascript-mouse-scroll-event-down-example/](http://viralpatel.net/blogs/javascript-mouse-scroll-event-down-example/)

演示：

[http://viralpatel.net/blogs/demo/javascript-mouse-scroll-wheel-event.html](http://viralpatel.net/blogs/demo/javascript-mouse-scroll-wheel-event.html)

# javascript - JavaScript 图像翻转

> ID：11097245
> 
> 赞同：0
> 
> 时间：2012-06-19T08:30:25.857
> 
> 标签：javascript, jquery

我有一些运行 JavaScript 图像翻转的代码，我是 JS 的新手，我需要图像在悬停和悬停时翻转，如果我把它放在 onhover 上，它会在每次移动鼠标时翻转，而不是在鼠标移动时翻转已关闭。

这是代码：

```
$(document).ready(function () {
    setInterval(function () {
        $('.sponsorFlip').load('script.js');
        $('.sponsorFlip').load('jquery.flip.min.js');
    }, 30000);
    $('.sponsorFlip').one("mouseenter mouseleave", function () {
        var elem = $(this);
        if (elem.data('flipped')) {
            elem.revertFlip();
            elem.data('flipped', false)
        }
        else {
            elem.flip({
                direction: 'rl',
                speed: 250,
                onBefore: function () {
                    elem.html(elem.siblings('.sponsorData').html());
                }
            });
            elem.data('flipped', true);
        }
    });
    $('.sponsorFlip').bind("click", function () {
        var elem = $(this);
        if (elem.data('flipped')) {
            elem.revertFlip();
            elem.data('flipped', false)
        }
        else {
            elem.flip({
                direction: 'rl',
                speed: 250,
                onBefore: function () {
                    elem.html(elem.siblings('.sponsorData').html());
                }
            });
            elem.data('flipped', true);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:20:15.867

利用类。;) 预览 - [http://jsfiddle.net/TJZmM/3/](http://jsfiddle.net/TJZmM/3/)

```
$('div').bind('mouseover mouseout', function(){
    var self = $(this);

    if(self.toggleClass('flipped').hasClass('flipped')) {
        self.html('rl');
    }
    else {
        self.html('lr');
    }
});​ 
```

# matlab - Matlab：查找从元素到矩阵边界的距离

> ID：11097248
> 
> 赞同：5
> 
> 时间：2012-06-19T08:30:36.727
> 
> 标签：matlab, matrix, submatrix

在 Matlab 中说我有一个这样的矩阵：

```
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9 
```

我现在需要在每个元素周围找到 3x3 的子矩阵（因此每个元素又是 3x3 子矩阵的中心）。中间的时候找fx没问题

1 2 3 4 5 6 7 8 9
1 **2 3 4** 5 6 7 8 9
1 **2 3 4** 5 6 7 8 9
1 **2 3 4** 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9

这是子矩阵：

```
2 3 4
2 3 4
2 3 4 
```

但是当在矩阵的边界，即第一个 og 最后一行或最后一列的元素时，当然不可能找到 3x3 子矩阵。相反，我需要适合的子矩阵。在角落里我会得到

**1 2** 3 4 5 6 7 8 9
**1 2** 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9

其中子矩阵是：

```
1 2
1 2 
```

在边界的中间，我得到了 fx：

1 2 3 **4 5 6** 7 8 9
1 2 3 **4 5 6** 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9

这使：

```
4 5 6
4 5 6 
```

或者作为另一个例子：

1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 6 7 8 9
1 2 3 4 5 **6 7 8** 9
1 2 3 4 5 **6 7 8** 9

这使：

```
6 7 8
6 7 8 
```

我希望你明白我的意思。我缺少一些功能，可以让我找到从元素到边界的距离。

我可以将每个元素视为子矩阵的中心，如果我可以测试，如果从元素到边界的距离低于子矩阵的边界（即子矩阵尺寸将改变，变为 5x5 子矩阵），那么我可以在制作子矩阵时截断它的一部分。

如何以最有效的方式找到从元素到矩阵边界的距离？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:39:15.290

尽管它没有直接回答您的问题，但我想您在更高的上下文中的问题是对 3x3 元素进行某种过滤或处理。通常解决方案是用额外的值填充数组，比如`NaN`. 然后您可以安全地提取 3x3 子矩阵，其中可能有一些`NaNs`.

您可以使用`padarray`命令进行填充。

**编辑（1）：** 我已经阅读了您对另一个答案的评论。看起来您对检测边界情况更感兴趣，而不是计算距离。如果您想知道何时接近边界，那么创建蒙版怎么样？

```
mask = false(size(A));
mask(1:2,:) = true;
mask(end-1:end,:) = true;
mask(:,1:2) = true;
mask(:,end-1:end) = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:39:15.430

让我们进一步说明这个问题：你有一个大小为 nxm 的矩阵，你选择了一个元素 i,j。你想知道元素 i,j 到边界的距离吗？那将是： min(i,j,ni,mj)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T08:41:55.633

```
% Define the example data:

Matrix = repmat(1:9, 9, 1) 
```

**编辑：具有自由大小子矩阵的通用解决方案：（大小必须是奇数）**

```
% Define the size of submatrix (square matrix assumed here).

SubmatrixSize = 5;

% Check that the size of submatrix is an odd number.

if (mod(SubmatrixSize, 2) == 0)
    error('SubmatrixSize must be odd number.');
end

Distance = floor(SubmatrixSize/2);

VertSize = size(Matrix, 1);
HorzSize = size(Matrix, 2);

for rowIndex = 1:VertSize
    yIndices = (rowIndex-Distance:rowIndex+Distance);
    yIndices = yIndices(find(yIndices >= 1 & yIndices <= VertSize));
    for colIndex = 1:HorzSize
        xIndices = (colIndex-Distance:colIndex+Distance);
        xIndices = xIndices(find(xIndices >= 1 & xIndices <= HorzSize));
        SubmatricesCellArray{rowIndex, colIndex} = Matrix(yIndices, xIndices);
    end
end 
```

**这是仅适用于 3x3 子矩阵的可能解决方案：**

```
% This code only works for 3x3 submatrices.

VertSize = size(Matrix, 1);
HorzSize = size(Matrix, 2);

for rowIndex = 1:VertSize
    yIndices = nonzeros(rowIndex-1:rowIndex+1);
    if yIndices(end) > VertSize
        yIndices(end) = [];
    end
    for colIndex = 1:HorzSize
        xIndices = nonzeros(colIndex-1:colIndex+1);
        if xIndices(end) > HorzSize
            xIndices(end) = [];
        end
        SubmatricesCellArray{rowIndex, colIndex} = Matrix(yIndices, xIndices);
    end
end 
```

然后你将拥有每个子矩阵`SubmatricesCellArray{y, x}`。

# java - 在 JBOSS 5.1.1 中获取部署异常

> ID：11097249
> 
> 赞同：2
> 
> 时间：2012-06-19T08:30:37.743
> 
> 标签：java, jboss, ejb, jboss5.x

我们正在将 JBoss 的版本从 4.x 更新到 5.1.1。

我将 EAR 放在 jboss 5.1.1 中，一旦我开始我的应用程序，我就会得到

```
"The content of element type "message-driven" must match "(ejb-name,destination-jndi-name,mdb-
user?,mdb-passwd?,mdb-client-id?,mdb-subscription-id?,configuration-name?,security-proxy?,ejb-
ref*,resource-ref*,resource-env-ref*,depends*)"." 
```

上述异常，我尝试更改 ejb-jar.xml 中的 DTD，但它抛出了相同的异常

这个耳朵以前在 JBoss 4 中成功部署过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:11:45.670

我要做的第一件事是在一个好的 XML 编辑器中加载您的**ejb-jar.xml**文件，以确保它没有格式错误。您说您更改了 DTD，但您是否尝试过根据 DTD 验证它，如果是，您会得到什么验证错误？

由于在我的 XML 配置文件中出现愚蠢的拼写错误和/或单词没有正确的大小写，我看到了与您类似的错误。

# java - 如何将“Mon Jun 18 00:00:00 IST 2012”转换为 18/06/2012？

> ID：11097256
> 
> 赞同：35
> 
> 时间：2012-06-19T08:30:54.997
> 
> 标签：java, date

我有一个如下值`Mon Jun 18 00:00:00 IST 2012`，我想将其转换为`18/06/2012`

如何转换这个？

我试过这个方法

```
public String toDate(Date date) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
        Date theDate = null;
        //String in = date + "/" + month + "/" + year;
        try {
            theDate = dateFormat.parse(date.toString());
            System.out.println("Date parsed = " + dateFormat.format(theDate));
        } catch (ParseException e) {
            e.printStackTrace();
        }
        return dateFormat.format(theDate);
    } 
```

但它会引发以下异常：

`java.text.ParseException: Unparseable date: "Mon Jun 18 00:00:00 IST 2012"`

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-19T08:46:30.460

我希望以下程序可以解决您的问题

```
String dateStr = "Mon Jun 18 00:00:00 IST 2012";
DateFormat formatter = new SimpleDateFormat("E MMM dd HH:mm:ss Z yyyy");
Date date = (Date)formatter.parse(dateStr);
System.out.println(date);        

Calendar cal = Calendar.getInstance();
cal.setTime(date);
String formatedDate = cal.get(Calendar.DATE) + "/" + (cal.get(Calendar.MONTH) + 1) + "/" +         cal.get(Calendar.YEAR);
System.out.println("formatedDate : " + formatedDate); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-02T22:45:33.637

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-16T00:46:00.627

只需添加： new SimpleDateFormat("bla bla bla", Locale.US)

```
public static void main(String[] args) throws ParseException {
    java.util.Date fecha = new java.util.Date("Mon Dec 15 00:00:00 CST 2014");
    DateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy", Locale.US);
    Date date;
    date = (Date)formatter.parse(fecha.toString());
    System.out.println(date);        

    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    String formatedDate = cal.get(Calendar.DATE) + "/" + 
            (cal.get(Calendar.MONTH) + 1) + 
            "/" +         cal.get(Calendar.YEAR);
    System.out.println("formatedDate : " + formatedDate);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T12:47:47.277

您还可以在 excel 中使用公式，以便将此类日期转换为 excel 可以读取的日期类型： `=DATEVALUE(CONCATENATE(MID(A1,8,3),MID(A1,4,4),RIGHT(A1,4)))`

你得到：`12/7/2016`从：`Wed Dec 07 00:00:00 UTC 2016`

# ios - 绘制 CGPDFDocumentRef

> ID：11097258
> 
> 赞同：1
> 
> 时间：2012-06-19T08:30:55.800
> 
> 标签：ios, ipad, pdf, uiview, core-graphics

我正在尝试在 UIView 上绘制 CGPDFDocumentRef。一切正常，除了 PDF 在视图上绘制得太小。我不确定为什么会这样。我尝试更改 CGContextScaleCTM() 和 CGContextTranslateCTM() 上的值。我还尝试使用其他框而不是 kCGPDFCropBox。我见过很多人使用相同的代码，一切都对他们有用。有谁知道我做错了什么？甚至 Apple 的文档也没有回答我的问题。

```
CGContextTranslateCTM(context, 0.0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGPDFPageRef pg = CGPDFDocumentGetPage(pdf, page);
    CGContextSaveGState(context);
    CGAffineTransform PDFTransform = CGPDFPageGetDrawingTransform(pg, kCGPDFCropBox, self.bounds, 0, true);
    CGContextConcatCTM(context, PDFTransform);
    CGContextDrawPDFPage(context, pg);
    CGContextRestoreGState(context); 
```

![在此处输入图像描述](../Images/34f9b5d357b5fb184c25118ccae3c7d2.png)

# iphone - 连接两个 NSDate 字符串值

> ID：11097260
> 
> 赞同：0
> 
> 时间：2012-06-19T08:31:04.483
> 
> 标签：iphone, objective-c

我只是感到困惑，是否有任何默认功能可以将两个 NSDate 值（如 11-jan-2012 和 15-jan-2012）连接为 11-15-jan-2012。2012 年 1 月 11 日和 2012 年 7 月 15 日为 2012 年 1 月 15 日 7 月 11 日。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:35:37.993

你可以很容易..你可以得到日、月和年

```
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];
NSInteger dayM = [components day];    
NSInteger monthM = [components month];
NSInteger yearM = [components year]; 
```

您可以从中为每一天进行此操作，只需`NSDate`使用您的格式更改日期，然后根据需要连接每一天

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:39:18.050

您可以使用此代码

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MMM-yyyy"];
NSDate *date1 = [formatter dateFromString:@"11-jan-2012"];
NSDate *date2 = [formatter dateFromString:@"15-jan-2012"];

NSDateComponents *dateComponents;
dateComponents = [[NSCalendar currentCalendar] components:NSYearCalendarUnit |NSDayCalendarUnit | NSMonthCalendarUnit  
                                                 fromDate:date1];
int day1 = [dateComponents day];    
int month1 = [dateComponents month];
int year1 = [dateComponents year];

dateComponents = [[NSCalendar currentCalendar] components:NSYearCalendarUnit |NSDayCalendarUnit | NSMonthCalendarUnit  
                                                 fromDate:date2];
int day2 = [dateComponents day];    
int month2 = [dateComponents month];
int year2 = [dateComponents year];

NSString *str = [NSString stringWithFormat:@"%d - %d %d %d", day1, day2, month1, year1]; 
```

# android - 格式化 android 日期时间选择器

> ID：11097263
> 
> 赞同：0
> 
> 时间：2012-06-19T08:31:27.180
> 
> 标签：android, datepicker

有谁知道格式化从 dateTime 选择器返回的日期的方法？

以下是 2012 年 1 月 1 日返回我需要 2012 年 1 月 1 日任何帮助将不胜感激

我目前有以下设置日期

```
date2.setText(new StringBuilder()
    .append(mDay).append(mMonth + 1)
    .append(mYear)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:06:03.360

我建议使用[SimpleDateFormatter](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。而且，由于`DatePicker`返回日、月、年的整数值，您应该使用[日历](http://developer.android.com/reference/java/util/Calendar.html)来创建日期：

```
 Calendar cal = Calendar.getInstance();
    cal.set(year, month, day);
    Date newDate = cal.getTime();

    SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
    String dateString = formatter.format(newDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:40:42.637

你可以试试这个

```
String mDate="";
String mMon="";

if(mDay<10)
   mDate="0"+mDay;
if((mMonth+1)<10)
   mMon="0"+(mMonth + 1);

date2.setText(new StringBuilder()
    .append(mDate).append(mMon)
    .append(mYear)); 
```

或者您也可以使用**[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:33:56.030

您可以使用这个库，这将使日期/时间格式之间的转换变得相当容易[https://github.com/novoda/NovodaTime](https://github.com/novoda/NovodaTime)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T08:59:40.573

使用此函数，它将返回您提到的字符串。

```
String create_date_string (Date time)
{
    String date = "";
    DateFormat outputFormatter = new SimpleDateFormat("dd/MM/yyyy HH mm ss ");
    date = outputFormatter.format(time);
    String date_tokens[] = date.split(" ");

    return date_tokens[0];
} 
```

希望它会帮助你。

在你的 OnDateSetListener 中使用它

```
@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
    Calendar calender = Calendar.getInstance();
    calender.set(year, monthOfYear - 1, dayOfMonth);
    String str = create_date_string(calender.getTime());
    date2.setText(str);
} 
```

# ruby-on-rails - 使用简单格式手动显示错误

> ID：11097266
> 
> 赞同：0
> 
> 时间：2012-06-19T08:31:40.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, simple-form

我正在使用 simple-form 作为表单。我已切换到使用 ajax 提交表单，我想在客户端验证表单，防止提交并显示任何错误。我目前正在使用绑定到 ajax:beforeSend 并检查所有必填字段，但是如何显示帮助文本和错误消息？我需要手动执行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T07:52:01.010

检查[有效性](https://github.com/afincha/validity)。它专门用于执行此操作。

# regex - 如何在 HTML5 中验证以仅允许在“输入类型 =“文件””中使用 JPG、GIF 或 PNG？

> ID：11097272
> 
> 赞同：35
> 
> 时间：2012-06-19T08:31:54.847
> 
> 标签：regex, html

> **可能重复：**
> [使用 <input type=“file”> 时限制文件格式？](https://stackoverflow.com/questions/4328947/limit-file-format-when-using-input-type-file)

我需要使用 HTML5`pattern`属性在一个`<input type="file">`元素中只允许 JPG、GIF 和 PNG 文件。

我目前有这种模式，但它不起作用：

```
<input type="file" class="input-file" id="tbinstUploadFile0" name="tbinstUploadFile0" placeholder="Please insert an image file..." pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)"> 
```

这个正则表达式模式与 HTML5 不兼容？如何测试有效的 HTML5 正则表达式模式？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-19T09:54:44.677

尝试类似的东西

```
<input type="file" name="my-image" id="image" accept="image/gif, image/jpeg, image/png" /> 
```

单击[此处获取最新的浏览器兼容性表](http://caniuse.com/#feat=input-file-accept)

现场演示[在这里](http://jsfiddle.net/rb1n9bfe/)

要仅选择图像文件，您可以使用此`accept="image/*"`

```
<input type="file" name="my-image" id="image" accept="image/*" /> 
```

现场演示[在这里](http://www.wufoo.com/html5/attributes/07-accept.html)

[![仅显示 gif、jpg 和 png，屏幕抓取来自 Chrome 版本 44](../Images/a9c5d1682b8e198c97adb922cd840782.png)](https://i.stack.imgur.com/FWFiw.png) 仅显示 gif、jpg 和 png，屏幕抓取来自 Chrome 版本 44

# php - WordPress 本地化 wp-config.php

> ID：11097275
> 
> 赞同：0
> 
> 时间：2012-06-19T08:32:06.593
> 
> 标签：php, wordpress, localization, dynamic-languages

我无法将主题的语言设置为我的语言..

我已经翻译了所需的字段并将 mo + po 文件设置在“wp-content/languages”文件夹中，将 wp-config.php 文件中的字段更改为我的语言 - 定义（“WPLANG”，“it_IT”）；

但主题中的所有领域仍然是英文..我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:43:38.380

您是否检查过“如何”的这一部分：http: [//codex.wordpress.org/Files_For_Direct_Translation](http://codex.wordpress.org/Files_For_Direct_Translation)

还有一些内容没有涵盖，需要手动翻译。

但是你上面所做的对其余的听起来是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:44:02.547

您是否将语言文件包含在主题目录中？

如果您需要，语言文件在默认主题中，或者您可以从这里获取它们；[http://codex.wordpress.org/WordPress_Localization](http://codex.wordpress.org/WordPress_Localization)

当您运行不止一种语言时，关于主题和插件的本地化也可能值得阅读此页面；[http://blog-en.icanlocalize.com/installing-wordpress-for-multiple-language-blogs/how-to-localize-wordpress-themes-and-plugins-with-gettext/](http://blog-en.icanlocalize.com/installing-wordpress-for-multiple-language-blogs/how-to-localize-wordpress-themes-and-plugins-with-gettext/)

最后我不知道你是否知道，但是有一个专门针对 wordpress 的堆栈交换，你会在上面找到比这里更多的答案；[https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)

# javascript - 如何在 DIv AS HTML 内容中显示文本区域的 HTML 内容而不是文本？

> ID：11097276
> 
> 赞同：2
> 
> 时间：2012-06-19T08:32:08.070
> 
> 标签：javascript, jquery, html, textarea

我有以下标记：

```
<input id="displayBuffer" type="hidden">
<textarea id="about" rows="2" name="about" cols="20" aria-hidden="true"><p>test</p></textarea>
<input type="button" onclick="javascript:
$('#displayBuffer').val($('#about').html());
$('#displayAbout').html(unescape($('#displayBuffer').val()));"
 name="Preview" value="Preview"> 
```

当单击“预览”按钮时，div 填充了“关于”文本区域的内容，但是它没有被编码为 HTML，而是`<p>test</p>`在我希望它以`test`我在 CSS 中具有的任何样式显示时显示`p`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:39:24.090

```
<textarea id="about" rows="2" name="about" cols="20" aria-hidden="true"><p>test</p></textarea>
<div id='displayAbout'>ale</div>
<input type="button" id='preview' name="Preview" value="Preview">​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

缓冲区没用：

```
$("#preview").click(function() {$('#displayAbout').html($('#about').val());}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:35:22.687

像下面这样的东西应该这样做

```
$('your-container').html($('#about').val()); 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/VY6Sh/2/)**

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:37:25.900

使用[.html()](http://api.jquery.com/html/)将内容放置为 html。

```
$('#show').click(function() {
    $('#Preview').html($('#about').val());
});​ 
```

[http://jsfiddle.net/LCwgc/1/](http://jsfiddle.net/LCwgc/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:39:28.177

根据 HTML 语法，`textarea`元素不能包含标记，只能包含文本。您需要一种不同的方法，可能是具有属性的元素（例如，`div`） 。`contenteditable`

# php - 我应该什么时候关闭课堂上打开的 MySQL 连接？

> ID：11097277
> 
> 赞同：0
> 
> 时间：2012-06-19T08:32:08.620
> 
> 标签：php, mysql

> **可能重复：**
> [关闭 mysql 连接 (PHP)](https://stackoverflow.com/questions/2975663/close-mysql-connection-php)

请帮助我，我不知道在哪里添加`mysql_close($db) ;`

查看我的代码：

```
<?php 

    class atsilipimai {

    private $db;

    public function __construct($host, $user, $password, $db) {

    $this->db = mysql_connect($host, $user, $password) or die('Couldn\'t connect to mysql');
    mysql_select_db($db) or die('Couldn\'t connect to db');
    }

    public function  addPost() {
    if ( isset($_POST['submit']) ) {
            $this->name = mysql_real_escape_string(addslashes($_POST['name']));
            $this->msg = mysql_real_escape_string(addslashes($_POST['msg']));
            $this->date = date("Y-m-d H:i:s");

            if (empty($this->name) || empty($this->msg)) {
                echo "<p>Please enter all details!</p>";
            } else {
                $sql = "INSERT INTO atsiliepimai (name, msg, date)";
                $sql .= " VALUES ('$this->name', '$this->msg', '$this->date')";
                mysql_query($sql) or die(mysql_error());

            }
        }
    }

    public function showPost() {
        //I'm not adding pagination, so it will only show last 5 posts.
        $sql = 'SELECT * FROM atsiliepimai ORDER BY id DESC LIMIT 5';
        $query = mysql_query($sql) or die('Couldn\'t get posts from database');
        while ( $row = mysql_fetch_array($query) ) {
            $this->name = htmlentities(stripslashes($row['name']));
            $this->msg = htmlentities(stripslashes($row['msg']));
            $this->date = htmlentities(stripslashes($row['date']));

            //Just add div's or what you want for the output.
            //Ip wont be added.
            echo "
            <h4>".$this->name."</h4>
            <p>".$this->msg."</p>
            <p class = 'data' >".$this->date."</p>
            <hr />
            ";

        }

    }

    public function __destruct() {

    }

    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:36:28.270

使用类不是 OOP。您没有关注点分离。您必须将数据库访问封装在自己的类中，并且可视化也应该分开。DB连接处理程序的关闭可以在`destructor`DB类中实现。但是在您的解决方案中，与数据库一起使用的每个对象都将拥有自己的连接处理程序，并且也将负责渲染，所以现在您的类只是一个命名空间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:47:42.120

你不应该在这里连接到你的数据库。您应该创建一个数据库类来处理与数据库的所有通信，打开 (in *) 和关闭 (in* ) 连接应该在那里完成。您只需在需要数据库实用程序的任何其他类中创建和使用所述类的对象。`_*construct()*```_destruct()``

 `* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:35:55.730

从手册[mysql_close](http://php.net/manual/en/function.mysql-close.php)

> 通常不需要使用 mysql_close()，因为非持久打开的链接会在脚本执行结束时自动关闭。

所以你不需要关闭它，除非你有一些特殊情况你需要终止连接然后把这个函数。

还请使用 mysqli_* 或 PDO 与数据库交互，因为 mysql_* 函数弃用进程已启动`

# android - 使用即将挂载的sdcard时如何避免应用程序被杀死？

> ID：11097279
> 
> 赞同：3
> 
> 时间：2012-06-19T08:32:15.343
> 
> 标签：android, crash, android-sdcard, mount, kill-process

假设我在 SD 卡上有繁重的工作（比如 CRC 检查、下载或任何你能想到的）。事实证明，如果用户在应用程序运行期间挂载 SD 卡（或移除它），应用程序将自动被操作系统杀死而不会发出任何警告。

我想避免它，而不是退出。相反，我想在可能的情况下停止工作并恢复（或做其他事情，只是不被杀死）。

所以，简而言之，我的问题正如标题所说：**当安装 SD 卡时，如何避免我的应用程序在使用 sdcard 时被杀死？**

我尝试了以下方法：

1.  捕获所有异常。这不起作用，因为该应用程序被简单地杀死了。

2.  通过广播接收器收听安装的意图。没有工作，因为应用程序在捕捉到意图之前就被杀死了。

3.  检查sd卡的状态。这不起作用，因为可以在检查和写入之间完成安装。

我也许可以创建一个新服务来处理与 sd 卡相关的所有事情，并为其提供自己的进程，但这真的是解决方案吗？它甚至会起作用吗？没有其他方法可以解决这个问题吗？

作为示例代码，您可以使用下面的代码。它只是为了解决问题：

```
public void createExternalStoragePrivateFile()
{
  final File file = new File(getExternalFilesDir(null), "DemoFile.jpg");
  try
  {
    final InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
    final OutputStream os = new FileOutputStream(file);
    final byte[] data = new byte[is.available()];
    is.read(data);
    for (int i = 0; i < data.length; ++i)
    {
      os.write(data[i]);
      Log.d("DEBUG", "byte " + i + " out of " + (data.length + 1));
      // try to mount during this loop and avoid crashing/being killed
      Thread.sleep(100);
    }
    is.close();
    os.close();
   }
  catch (final IOException e)
  {
    Log.w("DEBUG", "Error writing " + file, e);
  }
  catch (final InterruptedException e)
  {
    e.printStackTrace();
  }
} 
```

注意：当然我开发的应用程序安装在内部存储中。我知道安装在 sd 卡上的应用程序不会被杀死是没有意义的。当然，这也可能是一个有趣的问题（甚至可以避免安装 sd 卡？），但这不是这里的问题。

# sql-server - SQL 列存在于表中但不存在于 INFORMATION_SCHEMA

> ID：11097290
> 
> 赞同：0
> 
> 时间：2012-06-19T08:32:53.753
> 
> 标签：sql-server

我有一个在 sql 中创建的表。但是在我的应用程序中，我使用 INFORMATION_SCHEMA 来执行一些任务，我很惊讶它没有与我的表定义同步，也就是说

**代码**：

```
SELECT  SatComRatingTableID         -- This is working
FROM    dbo.tblSatComRatingTable

SELECT  f.field ,
        c.COLUMN_NAME
FROM    dbo.wiztbl_Fields f
        LEFT JOIN INFORMATION_SCHEMA.COLUMNS c ON c.COLUMN_NAME = f.Field
                                                  AND c.TABLE_NAME = 'tblSatComBillingPackage'
WHERE   f.DataObjectID = 2717
        AND COLUMN_NAME IS NULL 
```

第二个查询返回：

```
SatComRatingTableID NULL 
```

发生了什么以及如何解决？提前致谢

**编辑**：

注意：tblSatComBillingPackage 包含一个 FK 字段 SatComRatingTableID。我正在使用该字段从 INFORMATION_SCHEMA 获取信息...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:35:19.457

您正在查询错误的表，并且似乎正在过滤结果以排除成功：

```
SELECT  SatComRatingTableID
FROM    dbo.tblSatComRatingTable --<--This

SELECT  f.field ,
        c.COLUMN_NAME
FROM    dbo.wiztbl_Fields f
        LEFT JOIN INFORMATION_SCHEMA.COLUMNS c ON c.COLUMN_NAME = f.Field
             AND c.TABLE_NAME = 'tblSatComBillingPackage'  --<-- Does't match this
WHERE   f.DataObjectID = 2717
        AND COLUMN_NAME IS NULL --<-- And this seems wrong also 
```

# java - 从谷歌结果java中提取url

> ID：11097294
> 
> 赞同：0
> 
> 时间：2012-06-19T08:33:03.597
> 
> 标签：java, web-crawler

> **可能重复：**
> [您如何以编程方式搜索 Google Java API](https://stackoverflow.com/questions/3727662/how-can-you-search-google-programmatically-java-api)

我需要使用 Java 在谷歌搜索结果中提取 URL。我做的第一步是使用提取整个 html 页面文本的代码。

不幸的是，这段代码不适用于谷歌。有没有使用java代码从谷歌结果页面中提取url的解决方案？我已经阅读了有关谷歌自定义搜索 API 的信息。我的问题是：是否可以将它与 Java 一起使用？有什么线索吗？

```
URL url = new URL("http://type the search result url here");
URLConnection connection = url.openConnection();
connection.setDoInput(true);
InputStream inStream = connection.getInputStream();
BufferedReader input =
new BufferedReader(new InputStreamReader(inStream));
String line = "";
while ((line = input.readLine()) != null)
System.out.println(line); </i> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:46:44.570

如果你想要一个爬虫，你也可以试试 Selenium： [http ://seleniumhq.org/download](http://seleniumhq.org/download)

# javascript - 确定三星 Bada 虚拟键盘打开的一些功能

> ID：11097296
> 
> 赞同：0
> 
> 时间：2012-06-19T08:33:07.743
> 
> 标签：javascript, screen, bada, samsung-mobile

我正在寻找一些功能来确定在 samsung bada 上打开和关闭虚拟键盘。有办法确定吗？

我正在寻找它，因为当我们专注于文本字段时 - 键盘打开和屏幕的“工作”大小变为：屏幕高度减去虚拟键盘的高度。因为我们在打开键盘后有一个静态的小部件高度，所以我们的小部件的高度仍然是以前的大小，并且有滚动条。我想在打开键盘和关闭键盘的情况下找到确定小部件实际高度的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:05:39.727

好吧..我解决了确定键盘是否打开的问题..它只是模拟输入字段的焦点。

# entity-framework - ESQL 在自跟踪实体中不起作用

> ID：11097299
> 
> 赞同：0
> 
> 时间：2012-06-19T08:33:22.987
> 
> 标签：entity-framework, self-tracking-entities, entity-sql

我已经按照这个演练创建了一个 wcf+ef+self-tracking 实体项目。

[演练：序列化自我跟踪实体](http://msdn.microsoft.com/en-us/library/ee789839.aspx)

在服务中，Linq to Entities 可以很好地工作，但是如果我添加一个使用 ESQL 的方法，例如：

```
public string Test()
    {
        string Name = "";

        string sql = "select  d.Name,d.Budget from SchoolEntities.Departments";
        using (SchoolEntities db = new SchoolEntities())
        {
            var query = db.CreateQuery<Department>(sql);
            if (query != null)
            {
                foreach (var v in query)
                {
                    Name = v.Name;               
                }
            }
        }
        return Name;
    } 
```

代码执行时会抛出异常：

在当前范围或上下文中无法解析“d.Name”。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:40:24.440

我猜问题出在错误的 ESQL 查询中。你没有声明什么`d`是：

```
string sql = "SELECT d.Name, d.Budget FROM SchoolEntities.Departments AS d"; 
```

还要确保选择部门中映射的所有字段。

# cmd - 捕获 cmd 输出

> ID：11097303
> 
> 赞同：0
> 
> 时间：2012-06-19T08:33:31.490
> 
> 标签：cmd, teamcity, teamcity-7.0

我们正在从 ccnet 转移到 teamcity，所以我的问题可能只是无知，但无论如何：

我有一个 cmd line hack 可以检查构建中的“Todo”注释并输出计数：

```
findstr /s /i "TODO" *.cs | find /c "":"" 
```

或者

```
findstr /s /i TODO *.cs | find /c "":"" >todo.txt 
```

现在，如果构建大于 0，我想使构建失败，但我无法弄清楚如何做到这一点。我相信如果我可以将结果注入到构建日志中会是最好的

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:59:39.830

如果我正确理解您的要求，如果您在任何包含字符串 TODO 的 .cs 文件中找到至少一行以及？（其他一些字符串）。

我相信您的 FIND 命令已损坏。正如所写，它在名为`:`. 我相信您想搜索管道 FINDSTR 命令的输出。但我不明白你想用 FIND 寻找什么字符串。

FIND 搜索字符串必须用双引号括起来 - `"search"`。如果搜索要包含双引号，则每个双引号必须用另一个双引号转义。要搜索`She said "Hello"`，您需要`"She said ""Hello"""`.

我怀疑您使用 FIND 命令是因为您想要计数。但是由于您只是在寻找字符串的存在（计数> 0），因此您不需要实际计数。输出可以重定向到 nul，如果找到字符串，可以使用 && 运算符采取行动。

您应该能够使用正则表达式使用单个 FINDSTR 命令执行搜索。我将假设您正在寻找包含`:`在某个点后跟的任何行`TODO`（不区分大小写）。该表达式`.*`匹配除换行符以外的任何字符 0 次或更多次。所以你的搜索字符串是`:.*TODO`. 如果我`:`弄错了，并且您需要在搜索中包含双引号，那么每个双引号都需要用反斜杠转义，例如`\"`.

您正在所有子目录中进行递归不区分大小写的正则表达式搜索，因此您需要`/s`,`/r`和`/i`选项。

FINDSTR 将在每个空格处将任何字符串拆分为多个搜索，除非您使用该`/c:`选项。我认为您的搜索没有空格，但我喜欢以`/c`任何方式使用该选项。通常，搜索字符串也用双引号括起来。

完整的命令是

```
>nul findstr /sri /c:":.*TODO" *.cs && echo Do something to make the build fail 
```

我的问题是我不了解 TeamCity，所以我不知道如何向 TeamCity 发出信号以中止构建。如果找到搜索字符串，我只是打印了一条消息，但显然需要采取其他一些措施。

***编辑以回应评论***

好的 - 根据您的评论，TeamCity 似乎用另一个双引号转义了双引号。所以在你原来的问题中实际执行的命令变成了

```
findstr /s /i TODO *.cs | find /c ":" >todo.txt 
```

正如你所说，这完全没问题。

在这种情况下，我对使用单个 FINDSTR 的建议应该是完美的。由于您的搜索不需要空格，我们可以一起消除引号。如果 TeamCity 可以检查返回的错误代码并采取措施，那真的很简单。

```
>nul findstr /sri :.*TODO *.cs 
```

如果找到字符串，则错误代码将为 0，如果未找到，则为 1。

如果您需要错误代码为 1（如果找到）和 0（如果未找到），那么只需使用

```
>nul findstr /sri :.*TOTO *.cs && (exit 1) || (exit 0) 
```

如果你真的想使用你原来的命令

```
findstr /s /i "TODO" *.cs | >nul find /c "":"" 
```

如果找到将返回错误代码 0，如果未找到则返回 1

```
findstr /s /i "TODO" *.cs | >nul find /c "":"" && (exit 1) || (exit 0) 
```

如果找到将返回错误代码 1，如果未找到则返回 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:24:23.100

事实证明，问题不是我的 cmdline，而是我从 teamcity 调用它的方式。您的输入 dbenham 仍然非常有用，因为我可能会根据您的建议使构建失败并且仍然显示违规行的数量。

非常感谢 ：）

正确用法如下图！

![正确设置命令行的 teamcity 中 buildstep 的图片](../Images/12258d7ad291d1d168139119f5825b99.png)

# objective-c - 检测在 UIWebview 中单击的链接

> ID：11097310
> 
> 赞同：2
> 
> 时间：2012-06-19T08:33:54.623
> 
> 标签：objective-c, xcode, ios4

我的`UIWebView`iPhone 应用程序中有一个带有几个按钮的网页，每个按钮都有一个特殊的`URL`.

有什么方法可以检测在此特定中单击 URL 的时间`UIWebView`？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-19T08:42:41.467

```
-(void)ButtonPressed:(id)sender {

UIButton *btnCurrent = (UIButton*)sender;
NSLog(@"sender%@",sender);

NSString *str = [NSString stringWithFormat:@"%d",btnCurrent.tag];
    strRID =str;
    if ([str isEqualToString:@"0"]) {
    NSURL *urldata = [NSURL URLWithString:strLink];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:urldata];
    [self.webRegister setScalesPageToFit:YES];
    [self.webRegister loadRequest:request];
    [request release]; 
    [super viewDidLoad];
    strLink=@"";
     }
 } 
```

# mysql - Mysql在其他表的基础上对表进行排序

> ID：11097311
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:33:56.510
> 
> 标签：mysql, sorting

我有两张表，产品和销售。在产品表中，所有用户都添加产品。当进行销售时，销售表会更新有关产品的所有信息，包括添加该产品的用户。

产品表

**`id|Product Name|User|Price|Date`**

销售表

**`id|Product Name|Quantity|Seller|Price`**

卖方和用户具有相同价值的地方

我的问题是，当我展示产品时，我想要它们以便销售更多产品的用户，他的所有产品应该在顶部，而其他在 Products Table 中有产品但没有任何销售的用户应该在底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:46:51.980

所以这只是表名和列名的假设：

```
SELECT   a.UserID, 
         Count(a.ProductID) as TotalCount
  FROM   Sales a INNER JOIN Products b
           ON a.ProductID = b.ProductID
GROUP BY a.UserID
ORDER BY TotalCount desc 
```

**UserID** 是销售产品的人的 ID
**ProductID**是您的产品的 ID，它是连接两个表的字段
**COUNT()**是聚合函数的名称，它计算每个用户的记录。

***PS：请在您的问题中包含表格的架构。***

**更新 1**

如果是这种情况，您将不得不使用`LEFT JOIN`：

```
 SELECT a.ProductName,
         COUNT(b.Seller) as TotalSellerCount
    FROM Products a LEFT JOIN Sales b
       ON a.User = b.Seller
GROUP BY a.ProductName
ORDER BY TotalSellerCount desc 
```

# php - PHP 验证表单数据

> ID：11097313
> 
> 赞同：1
> 
> 时间：2012-06-19T08:34:01.550
> 
> 标签：php

我需要验证提交的表单数据：

1.  检查字段是否为空。
2.  继续验证非空数据。

x – 只允许空格、下划线、aplha 数字字符。y - 检查它是否是图像。

我正在使用下面的代码，它不起作用。它不是验证和打印错误。

```
<?php
$validate = array(
    '/^[a-z\d ]{4,20}$/i' => array('$x' => 'Please enter valid name.'),
    '/^[a-z\d ]{4,20}$/i' => array('$y' => 'Please enter a real category.')
);

$error = '';

foreach ($validate as $key => $field)
{
    if (preg_match($key,$field[0]))
    {
       $error.= $field[0];
    }
}

if ($error)
{
    echo $error;
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:40:21.597

使用[filter_var](http://no2.php.net/filter_var)函数。你有你需要的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:44:25.980

您正在将您的正则表达式与您的错误消息进行匹配，*而不是*您提交的字符串（$x 和 $y）。

你可能会做这样的事情：

```
$validate = array(
    '/^[a-z\d ]{4,20}$/i' => array($x, "Please enter valid name."),  //change here
    '/^[a-z\d ]{4,20}$/i' => array($y, "Please enter a real category.") //change here
);

$error = '';
foreach ($validate as $key => $field)
{
    if (preg_match($key,$field[0]))
    {
       $error.= $field[1]; //change here
    }
}

if($error)
{
    echo $error;
    exit;
} 
```

## 更新

我会怎么做。

```
$validate = array(
    array($x, '/^[a-z\d ]{4,20}$/i', "Please enter valid name."),
    array($y, '/^[a-z\d ]{4,20}$/i', "Please enter a real category."),
    array($phone, '/^\(?[0-9]{3}\)?|[0-9]{3}[-. ]? [0-9]{3}[-. ]?[0-9]{4}$/' , "Please enter a valid phone number")
);

$error = '';
foreach ($validate as $validation)
{
    if (!preg_match($validation[1],$validation[0]))
    {
       $error .= $validation[2]; 
    }
}

if($error != '')
{
    echo $error;
    exit;
} 
```

`$validate`now 是您的字段数组，每个字段都用它自己的数组表示，其中包含错误消息、正则表达式以匹配它并提交主题。

# matlab - 高效的 XOR 和运算（Matlab 或 C/C++）

> ID：11097316
> 
> 赞同：2
> 
> 时间：2012-06-19T08:34:17.810
> 
> 标签：matlab, sum, intel, xor

我有以下问题：我有数以万计的 512 位逻辑数组（或 64 字节）。对于每个可能的对，我必须执行 XOR 后跟 sum。有没有办法有效地做到这一点？我听说有这方面的特殊 CPU 指令，但我的谷歌搜索甚至找不到它的提及。

理想情况下，我想在 MATLAB 中做到这一点。如果没有，我还可以访问带有 IPP 和 TBB 的英特尔 C++ 编译器。

如果可能，我想避免对每个逻辑数组元素进行 for 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:49:55.863

如果不对数组元素进行 for 循环，请尝试：

```
x=[true true false false]
y=[true false true false]

z=xor(x,y)
sum(z) 
```

# codeigniter - codeigniter 模型 - 返回 2 组结果 - 如何？

> ID：11097319
> 
> 赞同：1
> 
> 时间：2012-06-19T08:34:21.297
> 
> 标签：codeigniter

我正在尝试做的事情：

我有一个搜索框，可以搜索帖子或用户名或用户电子邮件。

帖子在一个表中，用户在另一个表中。

这是结构：

帖子

post_id user_id post post_date 可见

用户

用户名 用户名 电子邮件 名字 姓氏

现在，我正在我的模型中尝试以下代码：

```
<?php

 public function posts_that_match_search_term($search_term) {

$post_query = $this->db->query("SELECT * FROM posts,users WHERE post_message LIKE '%$search_term%' AND post_user_id=user_id  ORDER BY post_id DESC", array());

$post_query2 = $this->db->query("SELECT * FROM users WHERE user_username LIKE '%$search_term%' OR user_email LIKE '%$search_term%'  ORDER BY user_id DESC", array());

if ($post_query->num_rows() == 0) {
    return array();
} else {
    $i = 0;

    foreach ($post_query->result() AS $row) {
        $post_array[$i]["post_id"] = $row->post_id;
        $post_array[$i]["post_message"] = $row->post_message;

        $post_array[$i]["post_datetime"] = $row->post_datetime;
        $post_array[$i]["post_completion_status"] = $row->post_completion_status;
        $post_array[$i]["post_completion_date"] = $row->post_completion_date;
        $post_array[$i]["post_completion_notes"] = $row->post_completion_notes;
    }

    return $post_array;
}

if ($post_query2->num_rows() == 0) {
    return array();
} else {
    $a = 0;

    foreach ($post_query2->result() AS $row2) {

        $post_array2[$a]["user_id"] = $row2->user_id;
        $post_array2[$a]["user_name"] = $row2->user_name;
        $post_array2[$a]["user_username"] = $row2->user_username;
        $post_array2[$a]["user_image_filename"] = $row2->user_image_filename;
        $post_array2[$a]["user_first_name"] = $row2->user_first_name;
        $post_array2[$a]["user_last_name"] = $row2->user_last_name;
        $post_array2[$a]["user_email"] = $row2->user_email;

        $a++;
    }

    return $post_array2;
}
} 
```

/* 注意 = 为了简单起见，代码在某些地方被缩短 */

如果我一一运行它们，这两个查询都有效并返回结果。也就是说，如果我注释第一个查询和 if ($post_query->num_rows() == 0) { 之后的所有代码，那么代码的第二部分工作正常并返回结果。对面也一样。

任何帮助将不胜感激。

问候，佐兰

当两者都未注释时，我没有收到任何错误，只有 0 个结果。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:41:30.093

Zoran，您必须进行一次查询以检查用户名或电子邮件。你知道如何进行这样的连接吗：

```
$this->db->join('posts', posts.userid = users.userid'); 
```

所以你加入这两个表，然后在它们中搜索用户名或电子邮件。让我知道你想出了什么！

# jackrabbit - 将数据从一个jackrabbit 存储库（Magnolia 存储库）传输/迁移到另一个jackrabbit 存储库

> ID：11097325
> 
> 赞同：2
> 
> 时间：2012-06-19T08:34:45.917
> 
> 标签：jackrabbit, jcr, magnolia

任何人都知道如何将内容从一个 Magnolia CMS 存储库（Jackrabbit 存储库）传输/迁移到我们的应用程序使用的另一个自定义 jacrabbit 存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:41:05.453

正如另一张海报所建议的那样，XML 导入/导出功能允许您在存储库之间复制内容。

不幸的是，XML 导入/导出功能不包括迁移数据，如版本历史或自定义节点类型。要迁移此类数据，您可以使用 Jackrabbit 独立 jar 的[备份/迁移功能](http://jackrabbit.apache.org/standalone-server.html#StandaloneServer-Backupandmigration)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:50:44.843

根据 API，您应该能够在 Session 上使用导入/导出方法。

[http://www.day.com/maven/jsr170/javadocs/jcr-2.0/javax/jcr/Session.html](http://www.day.com/maven/jsr170/javadocs/jcr-2.0/javax/jcr/Session.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T12:05:57.310

似乎您需要的是`RepositoryCopier`工具 [https://jackrabbit.apache.org/api/1.6/org/apache/jackrabbit/core/RepositoryCopier.html](https://jackrabbit.apache.org/api/1.6/org/apache/jackrabbit/core/RepositoryCopier.html)

可以通过它的 API 轻松地将存储库复制到存储库。

# knockout.js - 淘汰赛数据绑定模板

> ID：11097332
> 
> 赞同：1
> 
> 时间：2012-06-19T08:35:03.363
> 
> 标签：knockout.js, jquery-templates

由于某些原因，在使用数据绑定模板时，knockout 需要 jquery tmpl，否则它会抱怨它没有找到成员（尚未设置模板的数据绑定数据）。

tmpl 引擎不支持模板中的 foreach 绑定

1）它是一个错误淘汰，不应该需要外部引擎吗？

2) 是否有在模板中使用 tmpl 和 foreach 绑定的解决方法？

小提琴（见错误日志）[http://jsfiddle.net/C9kDL/](http://jsfiddle.net/C9kDL/)

谢谢

edti：一个没有 foreach 的例子，它说明了为什么数据绑定模板如何工作[http://jsfiddle.net/jvLyf/](http://jsfiddle.net/jvLyf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:34:27.247

假设你不喜欢 tmpl 库，你可以在没有 tmpl 库的情况下使用它（我相信你知道它不再被开发）。如果您只使用本机淘汰模板，则会收到错误消息：

> 未捕获的错误：无法解析绑定。消息：TypeError：无法读取未定义的属性“孩子”；绑定值：foreach:children

原因是它`selected`以 null 开头。因此，如果我们在模板调用中添加一个条件：

```
<div data-bind="template: { name: 'test', data: selected, if: selected }"></div> 
```

..然后一切正常。

有关示例，请参见[http://jsfiddle.net/unklefolk/Nrrv5/1/ 。](http://jsfiddle.net/unklefolk/Nrrv5/1/)

希望这就是你要找的。

# python - Django自定义主键id空错误

> ID：11097336
> 
> 赞同：0
> 
> 时间：2012-06-19T08:35:10.067
> 
> 标签：python, mysql, django

考虑这个模型：

```
class Organisation(models.Model):
    ref = models.CharField(max_length=50, primary_key=True)
    type = models.IntegerField(choices=ORGANISATION_TYPE_CHOICES, blank=True, null=True)
    org_name = models.CharField(max_length=255)
    org_name_lang = models.CharField(max_length=255, blank=True, null=True)

    date_created = models.DateTimeField(auto_now_add=True, editable=False)
    date_updated = models.DateTimeField(auto_now=True, editable=False) 
```

我在创建时收到此错误，但实例实际上已保存：

```
django.db.utils.IntegrityError: (1048, "Column 'organistion_id' cannot be null") 
```

再次运行创建：

```
django.db.utils.IntegrityError: (1062, "Duplicate entry 'GB-CHC-202918' for key 'PRIMARY'") 
```

我正在使用 mysql，并且没有使用字符主键，我错过了什么吗？

**更新：已解决**（有一个具有自定义保存方法的相关模型）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:40:48.503

Django 中的每个模型也有一个`id`自动添加并用作主键的字段（请参阅[自动主键字段](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)）。当您指定主键时， Django 不会添加该`id`字段，但由于您收到此错误，我认为您在创建表后添加了自己的主键？

如果是这样，您可以删除表并重新创建它 ( `syncdb`) 或添加数据库迁移以修改表结构（例如，使用[south](http://south.aeracode.org/)）。

# c - C 程序中的内存分配

> ID：11097342
> 
> 赞同：0
> 
> 时间：2012-06-19T08:35:31.797
> 
> 标签：c, memory-management, malloc

我有下面的代码块，我删除了所有不必要的部分，只留下了有问题的部分。我的目的是按功能以我需要的特定格式（YYYYMMDDHHmm）获取时间`fetch_time`。为了`return char array`，我用过`malloc`。但是，如果我运行下面的代码一分钟，程序就会崩溃。当我通过调试工具监控代码的运行时间时，p1 指向的内存位置会增加，例如第一次迭代为 0x72120，第二次迭代为 0x72150，依此类推。所以，我怀疑它失败是因为内存问题。我想知道我做错了什么，我该如何解决这个问题？

顺便说一句，我想我可以通过定义一个全局 char 数组并在子函数中分配时间信息来解决这个问题。我想了解我在 malloc 使用中的错误并学习解决方案。谢谢你。

```
int main(int argc,char *argv[]){
    char timedate2[13];
    char *p1 = malloc(strlen(timedate2)+1);
    if(!p1){exit(1);}

    while(1){
        p1=fetch_time();
    }
}

char *fetch_time() {
    char *p;
    time_t rawtime;
    struct tm * timeinfo;
    char buffer [13];

    time ( &rawtime );
    timeinfo = localtime ( &rawtime );
    strftime (buffer,13,"%04Y%02m%02d%02k%02M",timeinfo);
    p = (char *)malloc(sizeof(buffer));
    strcpy(p, buffer);
    return p;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:40:20.767

```
char timedate2[13];
char *p1 = malloc(strlen(timedate2)+1); 
```

`timedate2`未初始化，因此无法（可靠地）猜测您尝试分配多少，并且`strlen`调用可能会访问无效内存并导致段错误。你的意思是分配

```
char *p1 = malloc(sizeof timedate2 + 1); 
```

?

但主要的问题是`fetch_time`每次调用时都会返回一个新分配的缓冲区，而这永远不是`free`d。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:41:48.987

```
char timedate2[13];
/* timedate2 is not initialized, so strlen is unpredictable at best*/
char *p1 = malloc(strlen(timedate2)+1); 
```

您分配 p1 然后从不使用它，而是用他调用 fetch_time() 覆盖它 - 这是内存泄漏。

fetch_time() 看起来不错，但是当您在紧密循环中执行此操作时（例如 while(1)），它会返回从未释放的分配内存 [内存泄漏]，它会非常快速地分配所有可用内存，然后**繁荣**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T08:43:35.990

代码看起来是正确的。有一个想法。当您调用 时`malloc`，您正在请求一些用于存储日期字符串的内存。每次你打电话`fetch_time`时，你都会用一个新的字符串请求一些（其他）内存。您永远不会重复使用同一块内存并最终耗尽内存。要解决这个问题，您需要释放您请求的每一块内存，这将允许系统最终再次重用它。

```
while(1) {
    p1=fetch_time();
    // do something with p1
    free(p1);
} 
```

另外，请修正缩进。

如果你以后发现类似的问题，考虑使用类似的工具`valgrind`，它会对你有很大帮助（google it up！）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T08:43:59.750

您的程序中有很大的内存泄漏。
首先，您在 main() 中为 p1 分配内存。然后，`p1=fetch_time();`
In function语句有一个无限循环`fetch_time()`，您正在为 p 分配内存并复制缓冲区。这个地址被返回给 main()。您现在丢失了您在 main 中分配的 p1 的内存地址。
这个循环无限次运行，因此它会在内存达到其最大限制时达到一个阶段。
`FAULT 1`:分配给 p1 的内存未释放。
`FAULT 2`: 函数 fetch_time 在每次调用中都会继续为 p 分配内存并且不会释放它。 `FAULT 3`: 调用`malloc(strlen(timedate2)+1);`一个未初始化的字符串

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T09:02:31.613

如下修改您的功能

```
while(1){
   fetch_time(p1, strlen(timedate2) + 1);
  }
}
void fetch_time(char * time_str, int format_len)
    time_t rawtime;
    struct tm * timeinfo;
    char buffer [13];

    time ( &rawtime );
    timeinfo = localtime ( &rawtime );
    strftime (buffer,13,"%04Y%02m%02d%02k%02M",timeinfo);
    strncpy(p, buffer, format_len);
} 
```

以避免内存泄漏和其他意外错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T10:40:32.690

你不会忘记释放分配的内存吗？代码工作了 13 分钟，没有崩溃。

```
#include <time.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

char* fetch_time();

    int main(int argc,char *argv[]){

        char timedate2[13];
        char *p1 = malloc(strlen(timedate2)+1);
        if(!p1){exit(1);}
        free(p1);

        while(1){
               p1=fetch_time();
               free(p1);
        }
    }

    char* fetch_time() {
        char *p;
        time_t rawtime;
        struct tm * timeinfo;
        char buffer [13];

        time ( &rawtime );
        timeinfo = localtime ( &rawtime );
        strftime (buffer,13,"%04Y%02m%02d%02k%02M",timeinfo);
        p = (char *)malloc(sizeof(buffer));
        strcpy(p, buffer);

        return p;
    } 
```

我在下面的几行中看到了另一个问题。

```
char timedate2[13];
char *p1 = malloc(strlen(timedate2)+1); 
```

'strlen' 函数在给定的字符数组中搜索第一个符号 '\0'。但在这种情况下，数组 'timedate2' 的内容是未定义的，符号 '\0' 可以在任何地方找到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T08:41:34.173

你为什么要重新分配 p1（已经指向分配的内存）。

此外，无限期调用 fetch_time() 会导致堆溢出。

您可以做的是将 p1(pointer) 作为参数传递给 fetch_time() 并将 timeinfo 复制到已分配的内存中。

最后，记住`free`程序分配的内存。

# c# - 绑定到嵌套静态类中的属性

> ID：11097347
> 
> 赞同：11
> 
> 时间：2012-06-19T08:35:58.647
> 
> 标签：c#, .net, wpf, binding

我有以下结构：

```
public static class Constants {
  public static class Foo {
    public static string Bar {
      get {
        //Constants.Foo.Bar == "FooBar"
        return "FooBar";
      }
    }
  }
} 
```

我想将此绑定到用户控件中的按钮。

```
<Button Content="{Binding Source={x:Static ns:Constants.Foo.Bar}}" /> 
```

（其中 ns 指向定义“常量”的程序集和命名空间）。
这会导致两个错误：

> *   “找不到类型'Constants.Foo'。请注意，类型名称区分大小写。”
> *   “找不到类型‘ns:Constants.Foo’。”

我也试过：

```
<Button Content="{Binding Source={x:Static ns:Constants+Foo.Bar}}" /> 
```

这会导致一个错误：

> *   “找不到类型‘ns:Constants+Foo’。”

是否可以在静态类中绑定到静态类中的静态属性？如果是，如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T09:25:21.883

这对我有用

```
 <Button Content="{Binding Source={x:Static local:Constants+Foo.Bar}}" /> 
```

当地是

```
 xmlns:local="clr-namespace:WpfTestApp1" 
```

# c# - C# - 如何检查进程是否成功启动

> ID：11097349
> 
> 赞同：7
> 
> 时间：2012-06-19T08:36:09.677
> 
> 标签：c#, process

> **可能重复：**
> [如何知道 Process.Start() 是否成功？](https://stackoverflow.com/questions/5750651/how-to-know-if-process-start-is-successful)

我的程序中有一个类似于看门狗的进程（我们称之为它`WD`），它是另一个正在运行的进程（我们称之为它`A`）。我正在`WD`某个事件中启动进程，假设按下了一个键，我想用这个进程启动另一个进程，我们称之为`B`。

`A`问题是我想在我知道该过程`B`成功启动后关闭初始过程。我该如何检查？

我正在开始进程和`WD`语法。`B``Process.Start(argList)``ProcessInfo(argList)`

每个进程都是一个简单的 C# 控制台应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T08:42:14.573

Process.Start 返回一个布尔值（如果进程正确启动，则为**true ）检查此 MSDN**[链接](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)以了解 Process.Start() 方法。

你的代码应该是这样的：

```
 Process B= new Process();

        try
        {
            B.StartInfo.UseShellExecute = false;
            B.StartInfo.FileName = "C:\\B.exe";
            B.StartInfo.CreateNoWindow = true;
            if (B.Start())
            {
              // Kill process A 
            }
            else
            {
               // Handle incorrect start of process B and do NOT stop A
            }

        }
        catch (Exception e)
        {
            // Handle exception and do NOT stop A
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:40:47.677

[进程.开始](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)

> 返回：如果进程资源已启动，则返回**true ；**如果没有启动新的进程资源（例如，如果重用现有进程），则为**false 。**

我假设您应该只检查`Process.Start`. 如果是`true`，您可以关闭当前进程。

根据您使用的重载，`null`如果它也失败，则返回值可能是。

# google-apps-script - 如何使用 Google Apps 脚本显示 Google Drive 图片？

> ID：11097350
> 
> 赞同：3
> 
> 时间：2012-06-19T08:36:09.740
> 
> 标签：google-apps-script

如果我使用 Google 教程页面中的以下内容来加载图像，它可以正常工作：

> // 第一个谷歌涂鸦！app.add(app.createImage("http://www.google.com/logos/googleburn.jpg"));

但如果我尝试从自己的 Google Docs 获取 URL，则图像无法加载：

```
var image;
var url;    
var files = DocsList.getAllFiles();        
for (var i = 0; i < files.length; i++) {  
    url = files[i].getUrl();  
    app.add(app.createImage(image));  
    app.add(app.createLabel(url));  
} 
```

返回的 URL 不是直接指向图像，而是某种 Google Docs 容器：

> [http://docs.google.com/a/--------.com/open?id=0B5B_X4WaXYC7cExRT3Nvb0hTamc](http://docs.google.com/a/--------.com/open?id=0B5B_X4WaXYC7cExRT3Nvb0hTamc)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-12T18:11:12.000

我知道这里有一个公认的答案，但由于 UiApp 的弃用它不再准确。以下是读取给定 Google 驱动器目录并将每个**公开可用**图像通过具有现代 App Script API 的资产对象传递给模板的脚本。

```
function getAssets(driveDir) {
    var folders = DriveApp.getFoldersByName(driveDir);
    var folder = (folders.hasNext())? folders.next() : false ;
    var assets = {};
    if(folder){
        var files = folder.getFiles();
        while (files.hasNext()) {
            var file = files.next();
            var fileName = file.getName();
            assets[fileName] = 'https://drive.google.com/uc?export=view&id=' + file.getId();
        }
    }
    return assets;
} 
```

doGet() 函数应包含资产

```
function doGet(e) {
    var form = HtmlService.createTemplateFromFile('form.html');
    form.assets = getAssets('Your-drive-folder-name');

    return form.evaluate();

} 
```

最后在 HTML 模板中，您将可以通过以下代码访问您的资产：

```
 <img src="<?= assets.fileName ?>" /> 
```

再次记住，资产必须是公开的，才能在您的谷歌网站/应用程序脚本/任何内容上允许图像。您可以使用 File.setSharing API 方法通过 getAssets() 进行设置，但我发现设置上传权限并不麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:01:14.913

是的，您不能使用存储在 Google 文档中的图像。Imgae URL 应该是该图像的热链接（直接链接）。

```
app.createImage('YOUR_IMAGE_HOT_LINK_URL'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:11:47.547

在 UiApp 中显示来自经过身份验证的 URL 的图像是不可能的，即使来自站点、文档等 Google 服务也是如此。 [问题 #912](http://code.google.com/p/google-apps-script-issues/issues/detail?id=912)记录了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:12:00.867

您可以将图像作为附件存储到 Google 协作平台页面，然后使用 Google Apps 脚本的站点 API 访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-13T01:17:10.367

实际上你可以这样做，但我担心它不是很可靠。当您单击查看容器中的下载按钮时，该链接将起作用。但是，您必须让图像公开可用。或将其分享给能够查看工作表或文档的所有用户。

# javascript - 更改 Galleria 全屏主题中的第一张图片

> ID：11097352
> 
> 赞同：1
> 
> 时间：2012-06-19T08:36:16.807
> 
> 标签：javascript, jquery, fullscreen, image-gallery, galleria

我需要在 Galleria.run( ) 之后更改 Galleria 全屏主题（[链接）中的第一张图片。](http://galleria.io/themes/fullscreen/)

例如：我需要加载第三张图像（图像序列 3、4、5、....、n、1、2、3）

我可以写：

```
jQuery('.galleria-image-nav-right').click().click().click() 
```

但它丑陋且不友好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:56:37.063

您是否尝试过使用该`show`方法？

```
.show( index ) 
```

返回 Galleria 显示指定为索引的图像。您可以随时调用此方法，图像将被放置在转换队列中。

[http://galleria.io/docs/api/methods/](http://galleria.io/docs/api/methods/)

# matlab - Matlab中3.3882e+004 -1.9521e+001i是什么意思？

> ID：11097354
> 
> 赞同：-3
> 
> 时间：2012-06-19T08:36:26.403
> 
> 标签：matlab, numbers, number-formatting, scientific-notation, complex-numbers

这个数字“3.3882e+004 -1.9521e+001i”在 Matlab 中是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:40:25.680

这是一个复数，实部为 3.3882e+004，虚部为 -1.9521e+001。

有关复数的更多信息：[复数](http://en.wikipedia.org/wiki/Complex_number)

# c# - 编写 CRM 2011 插件的最佳设计模式

> ID：11097356
> 
> 赞同：8
> 
> 时间：2012-06-19T08:36:38.943
> 
> 标签：c#, dynamics-crm-2011

由于客户提供的复杂请求，有时我的代码会变得混乱。我花时间阅读和理解自上次工作以来我所写的内容，但这需要时间。

我想知道是否有人实现了一个好的设计模式，它可以节省时间并使代码更有条理和可读性等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T16:35:37.403

拥有一个实现 IPlugin 的基础插件是朝着正确方向迈出的一大步。它的 Execute 函数可以将 IServiceProvider 以及您的 dataContext 或 OrganizationService 传递到抽象的 onExecute 方法中，该方法包含在带有虚拟错误处理程序方法的 try catch 中。这将消除大量重复的样板代码......

## 编辑 1

添加了显示抽象 OnExecute 和虚拟错误处理程序的代码示例：

```
public abstract class PluginBase : IPlugin
{

    public void Execute(IServiceProvider serviceProvider)
    {
        try
        {
            OnExecute(serviceProvider);
        }
        catch (Exception ex)
        {
            bool rethrow = false;
            try
            {
                OnError(ex);
            }
            catch
            {
                rethrow = true;
            }

            if (rethrow)
            {
                throw;
            }
        }
        finally
        {
            OnCleanup();
        }
    }

    // method is marked as abstract, all inheriting class must implement it
    protected abstract void OnExecute(IServiceProvider serviceProvider);

    // method is virtual so if an inheriting class wishes to do something different, they can
    protected virtual void OnError(Exception ex){
        // Perform logging how ever you log:
        Logger.Write(ex);
    }

    /// <summary>
    /// Cleanup resources.
    /// </summary>
    protected virtual void OnCleanup()
    {
        // Allows inheriting class to perform any cleaup after the plugin has executed and any exceptions have been handled
    }
} 
```

## 编辑 2

我在 DLaB.Xrm.Plugin 命名空间的 DLaB.Xrm（在 Nuget 上）中定义了一个插件库，可以为您处理很多很棒的事情。 [这](https://github.com/daryllabar/XrmUnitTest/blob/master/Example.Plugin/Simple/RemovePhoneNumberFormatting.cs)是一个示例插件类，向您展示如何使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-08T08:56:49.153

我基于 2 类工作：

第一个叫`PluginContext`：

```
using System;

using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Client;

/// <summary>
/// The plugin context.
/// </summary>
public class PluginContext
{
    #region Constructors and Destructors

        /// <summary>
        /// Initializes a new instance of the <see cref="PluginContext"/> class.
        /// </summary>
        /// <param name="serviceProvider">
        /// The service provider.
        /// </param>
        /// <exception cref="ArgumentNullException">
        /// </exception>
        public PluginContext(IServiceProvider serviceProvider)
        {
            if (serviceProvider == null)
            {
                throw new ArgumentNullException("serviceProvider");
            }

            // Obtain the execution context service from the service provider.
            this.PluginExecutionContext =
                (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

            // Obtain the tracing service from the service provider.
            this.TracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));

            // Obtain the Organization Service factory service from the service provider
            var factory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));

            // Use the factory to generate the Organization Service.
            this.OrganizationService = factory.CreateOrganizationService(this.PluginExecutionContext.UserId);

            this.OrganizationServiceContext = new OrganizationServiceContext(this.OrganizationService);
        }

        #endregion

    #region Properties

        /// <summary>
        /// Gets the organization service.
        /// </summary>
        /// <value>
        /// The organization service.
        /// </value>
        public IOrganizationService OrganizationService { get; private set; }

        /// <summary>
        /// Gets the plugin execution context.
        /// </summary>
        /// <value>
        /// The plugin execution context.
        /// </value>
        public IPluginExecutionContext PluginExecutionContext { get; private set; }

        /// <summary>
        /// Gets the service provider.
        /// </summary>
        /// <value>
        /// The service provider.
        /// </value>
        public IServiceProvider ServiceProvider { get; private set; }

        /// <summary>
        /// Gets the tracing service.
        /// </summary>
        /// <value>
        /// The tracing service.
        /// </value>
        public ITracingService TracingService { get; private set; }

        /// <summary>
        /// Gets the organization service context.
        /// </summary>
        /// <value>
        /// The organization service context.
        /// </value>
        public OrganizationServiceContext OrganizationServiceContext { get; private set; }

        #endregion

    #region Methods

        /// <summary>
        /// The trace.
        /// </summary>
        /// <param name="message">
        /// The message.
        /// </param>
        public void Trace(string message)
        {
            if (string.IsNullOrWhiteSpace(message) || this.TracingService == null)
            {
                return;
            }

            if (this.PluginExecutionContext == null)
            {
                this.TracingService.Trace(message);
            }
            else
            {
                this.TracingService.Trace(
                    "{0}, Correlation Id: {1}, Initiating User: {2}", 
                    message, 
                    this.PluginExecutionContext.CorrelationId, 
                    this.PluginExecutionContext.InitiatingUserId);
            }
        }

        #endregion
} 
```

第二个叫`PluginBase`：

```
using System;

using Microsoft.Xrm.Sdk;

/// <summary>
///     Base class for all Plugins.
/// </summary>
public abstract class PluginBase : IPlugin
{
    #region Public Properties

    /// <summary>
    ///     Gets the entity reference.
    /// </summary>
    /// <value>
    ///     The entity reference.
    /// </value>    
    public EntityReference EntityReference { get; private set; }

    /// <summary>
    ///     Gets the plugin context.
    /// </summary>
    /// <value>
    ///     The plugin context.
    /// </value>    
    public PluginContext LocalContext { get; private set; }

    #endregion

    #region Properties

    /// <summary>
    ///     Gets a value indicating whether [ignore plugin].
    /// </summary>
    /// <value>
    ///     <c>true</c> if [ignore plugin]; otherwise, <c>false</c>.
    /// </value>
    /// <created>1/5/2014</created>
    protected virtual bool IgnorePlugin
    {
        get
        {
            return false;
        }
    }

    #endregion

    #region Public Methods and Operators

    /// <summary>
    /// Executes the specified service provider.
    /// </summary>
    /// <param name="serviceProvider">
    /// The service provider.
    /// </param>    
    public void Execute(IServiceProvider serviceProvider)
    {
        if (this.IgnorePlugin)
        {
            return;
        }

        this.LocalContext = new PluginContext(serviceProvider);

        if (!this.LocalContext.PluginExecutionContext.InputParameters.Contains("Target"))
        {
            return;
        }

        var entity = this.LocalContext.PluginExecutionContext.InputParameters["Target"] as Entity;
        if (entity != null)
        {
            this.EntityReference = entity.ToEntityReference();
        }
        else
        {
            this.EntityReference =
                this.LocalContext.PluginExecutionContext.InputParameters["Target"] as EntityReference;
            if (this.EntityReference == null)
            {
                return;
            }
        }

        this.Execute();
    }

    /// <summary>
    ///     Executes this instance.
    /// </summary>    
    public abstract void Execute();

    #endregion
} 
```

插件类将是这样的：

```
public class SamplePlugin : PluginBase
{
    // If don't want the plugin to be executed then override the IgnorePlugin property

    protected override bool IgnorePlugin
    {
        get
        {
            return true;
        }
    }

    public override void Execute()
    {
        var query = LocalContext
            .OrganizationServiceContext
            .CreateQuery("account")
            .Where(a => (string)a["accountname"] == "test accounts")
            .ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:25:15.383

我知道我可能迟到了，但是……

有几个 Visual Studio 插件模板，这些示例将让您了解什么是最好的。

我的最爱之一是： http: [//pogo69.wordpress.com/2011/04/15/crm-2011-visual-studio-plugin-templates/](http://pogo69.wordpress.com/2011/04/15/crm-2011-visual-studio-plugin-templates/)

无论如何，您必须知道最终您的逻辑设计会改进并变得更好，您所需要的只是练习。

问候！

# php - 仅从 php 字符串的开头删除空格

> ID：11097358
> 
> 赞同：11
> 
> 时间：2012-06-19T08:36:41.610
> 
> 标签：php, string, escaping

我有一个像下面这样的字符串

`$string = ' florida'`

我怎样才能从一开始就删除空白以形成如下所示。

`$result_string = 'florida'`

如果这个问题太简单了，我很抱歉。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T08:40:11.670

```
$string = ' florida'

$result_string = ltrim($string);

echo $result_string;// it will remove white spces from beganing 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T08:38:07.477

听起来像是[`ltrim()`](http://de2.php.net/manual/en/function.ltrim.php)您正在寻找的东西：

> 从字符串的开头去除空格（或其他字符）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T08:37:47.713

使用[trim()](http://php.net/manual/en/function.trim.php)它删除前导和尾随空格

手动的：

> trim — 从字符串的开头和结尾去除空格（或其他字符）

**Edit**， ltrim （如 Oezi 所述）删除开头的空格（错过了那部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-22T18:42:03.240

看看这个：

$string = trim('佛罗里达');

回声$字符串；//佛罗里达

欲了解更多信息： http: [//php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

# wpf - 将数字证书添加到 WPF 应用程序

> ID：11097361
> 
> 赞同：1
> 
> 时间：2012-06-19T08:36:55.730
> 
> 标签：wpf, digital-certificate

我有一个由我们的客户提供的应用程序的数字证书（*.pfx，它来自威瑞信）。我不知道我将如何使用它。

我已经有一个 Temporary.pfx 文件，我认为替换该文件应该可以工作。但是它没有发生。

谁能告诉我如何将 Certificate.pfx 文件用于 WPF 应用程序。

# iphone - 检测应用程序是否在 iPad 模拟器中运行

> ID：11097362
> 
> 赞同：2
> 
> 时间：2012-06-19T08:36:58.537
> 
> 标签：iphone, ios, ipad, ios-simulator

我可以检测到该应用程序正在*iOS 模拟器*下运行（使用`sysctlbyname("hw.machine")`），但我如何知道它是否是 iPhone 模拟器的 iPad？

当然我可以检查`[UIScreen mainScreen].bounds`，但可能有更优雅的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:38:45.377

苹果手机：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) { } 
```

平板电脑：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) { } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T08:39:38.787

哎呀，刚刚发现这`[[UIDevice currentDevice] model]`可以满足我的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:41:27.707

您可以查看您当前的设备型号，如下所示：

```
[[UIDevice CurrentDevice] model]; 
```

另外，你应该看看[这个](https://stackoverflow.com/questions/2522418/iphone-development-what-will-uidevice-currentdevice-model-return-for-ipad)我认为它对你有用。

# java - 在 Spring 中通过代理创建和初始化惰性类实例

> ID：11097369
> 
> 赞同：2
> 
> 时间：2012-06-19T08:37:30.610
> 
> 标签：java, spring, proxy, lazy-initialization

Spring中是否有现成的解决方案来代理一个类，以便在调用该类的方法时创建（新实例）和初始化（调用setter）？

我发现并尝试使用 org.springframework.aop.target.LazyInitTargetSource。

也许我做错了什么，但在以下场景中，我的类实例被创建了两次。从上下文中检索 bean 时一次，然后在调用方法时再一次：

我的代理类：

```
public class NewClass {

    private Integer i;

    public NewClass() {
        System.out.println("NewClass()");
    }

    public void setI(Integer i) {
        System.out.println("setI(): " + i);
        this.i = i;
    }

    public Integer add() {
        return i + 1;
    }
} 
```

弹簧配置：

```
<bean id="newClassTarget" class="com.mycompany.spring.NewClass" lazy-init="true">
    <property name="i" value="1"/>
</bean>

<bean id="newClass" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="targetSource">
        <bean class="org.springframework.aop.target.LazyInitTargetSource">
            <property name="targetBeanName">
                <idref local="newClassTarget"/>
            </property>
        </bean>
    </property>
</bean> 
```

运行代码：

```
public static void main(String[] args) {
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext("lazy.xml");
    System.out.println("Context initialized");
    System.out.println("before getting bean");
    NewClass newClass = (NewClass) applicationContext.getBean("newClass");
    System.out.println("after getting bean");
    System.out.println("calling add()...");
    System.out.println(newClass.add());
} 
```

产生：

```
Context initialized
before getting bean
NewClass()
after getting bean
calling add()...
NewClass()
setI(): 1
2 
```

因此，当从 Spring 上下文中获取 bean 和调用 add() 方法时，会调用 NewClass 构造函数。我不觉得这很好，我搞砸了什么？

无论如何，第一个调用来自 Cglib2AopProxy.getProxy() 中的 enhancer.create()。似乎代理在请求 bean 时创建代理类的实例，而不是在第一个方法调用发生时。那不是我想要的。

我可以创建自己的 java.lang.reflect.Proxy 作为我的 NewClass 的持有者，并在第一次调用方法时在处理程序的 invoke() 中创建 NewClass 的实例。不过，我会先玩调用二传手。

Spring 中是否有任何现成的解决方案可以用来实现：

```
Context initialized
before getting bean
after getting bean
calling add()...
NewClass()
setI(): 1
2 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:42:26.283

我能够复制您的行为 - 我的解决方法是简单地为您的 NewClass 定义一个接口，这样创建 Java 动态代理而不是 CGLIB 增强代理。然后它按预期工作 - 在被调用的方法处实例化 NewClass。

```
public interface NewInterface {
    public void setI(Integer i);
    public Integer add() ;
}

public class NewClass implements NewInterface{

    private Integer i;

    public NewClass() {
        System.out.println("NewClass()");
    }

    public void setI(Integer i) {
        System.out.println("setI(): " + i);
        this.i = i;
    }

    public Integer add() {
        return i + 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:57:07.560

您可以尝试在`@PostConstruct`方法中初始化您的类。我想Spring只会为你的类的实际实例调用这个方法，而不是代理。

**更新**

如果您启用了注释配置，那么您可以试试这个：

```
public class NewClass {

    private Integer i;

    public NewClass() {
        System.out.println("NewClass()");
    }

    @PostConstruct
    public void init() {
        System.out.println("Initialization");
    }

    public void setI(Integer i) {
        System.out.println("setI(): " + i);
        this.i = i;
    }

    public Integer add() {
        return i + 1;
    }
} 
```

检查`"Initialization"`打印到控制台的次数。

一些链接：
不带注释的初始化方法：[http](http://www.mkyong.com/spring/spring-init-method-and-destroy-method-example/)
://www.mkyong.com/spring/spring-init-method-and-destroy-method-example/ 带注释 的初始化方法： [http ://www.mkyong.com/spring /spring-postconstruct-and-predestroy-example/](http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:31:45.543

感谢所有的评论。我想出了一个快速（不完美）的解决方案来创建和初始化一个类，直到它的方法被调用。我希望它不会太复杂。我不喜欢这个解决方案的一点是委派 setter 调用的问题。我让工厂和类实现了相同的“可设置”接口。也许有人会有更好的主意。

类及其代理工厂的通用接口：

```
public interface ProxiedClassSettable {

    void setI(Integer i);
} 
```

代理类接口（扩展“setter”接口）：

```
public interface ProxiedClass extends ProxiedClassSettable {

   Integer add();

} 
```

代理类：

```
public class ProxiedClassImpl implements ProxiedClass {

    private Integer i;

    public ProxiedClassImpl() {
        System.out.println("ProxiedClassImpl()");
    }

    public Integer add() {
        return i + 1;
    }

    public void setI(Integer i) {
        System.out.println("setI(): " + i);
        this.i = i;
    }
} 
```

代理工厂（我让它实现了 'setter' 接口以显示与 ProxiedClass 的耦合）：

```
public class ProxiedClassFactory implements FactoryBean, ProxiedClassSettable {

    private Integer i;

    public Object getObject() throws Exception {
        return Proxy.newProxyInstance(ProxiedClass.class.getClassLoader(),
                new Class[]{ProxiedClass.class},
                new InvocationHandler() {

                    private ProxiedClass proxiedClass;

                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                        if (proxiedClass == null) {
                            proxiedClass = new ProxiedClassImpl();
                            //not a very nice way to initialize the proxied class
                            proxiedClass.setI(i);
                        }
                        return method.invoke(proxiedClass, args);
                    }
                });
    }

    public Class getObjectType() {
        return ProxiedClass.class;
    }

    public boolean isSingleton() {
        return true;
    }

    public void setI(Integer i) {
        this.i = i;;
    }
} 
```

春天 XML：

```
<bean id="proxiedClass" class="com.mycompany.spring.proxy.ProxiedClassFactory">
    <property name="i" value="1"/>
</bean> 
```

跑步：

```
public static void main(String[] args) {
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext("proxiedClass.xml");
    System.out.println("Context initialized");
    System.out.println("before getting bean");
    ProxiedClass newClass = (ProxiedClass) applicationContext.getBean("proxiedClass");
    System.out.println("after getting bean");
    System.out.println("calling add()...");
    System.out.println(newClass.add());
} 
```

产生我想要的——首先创建类，它的方法被称为：

```
Context initialized
before getting bean
after getting bean
calling add()...
ProxiedClassImpl()
setI(): 1
2 
```

# matlab - 在 Matlab 中编写带有节拍的声音

> ID：11097371
> 
> 赞同：0
> 
> 时间：2012-06-19T08:37:34.077
> 
> 标签：matlab, audio

我想在 Matlab 中创建一个连续的声音（40 Hz）并用节拍调制声音（参见下面的简单代码）。我的问题是我想在脑电图实验中使用这种声音作为刺激，但是节拍和持续的 40 Hz 频率会产生很多频率。我怎样才能减少频率的数量？我还使用 fft 来检查我用这个刺激产生的频率（太多）。有没有更好的方法来创建一个简单的节拍？我做错了吗？我希望它足够清楚，谢谢

```
clear all

Accent = 3; % amplitude for the beat
Freq = 40; % frequency
Dur = 4; % Duration
Samp = 48000; % sampling points

%% signal
Sine = sin((1:Dur*Samp)*2*pi*Freq/Samp);
Beat = repmat([ones(1,Samp/8)*Accent ones(1,Samp/8) ones(1,Samp/8)*Accent  ones(1,Samp/8) repmat(ones(1,Samp/8),1,4)],1,Dur);

S = Sine.*Beat;
S = S/max(abs(S));
% plot(S)
% sound(S,Samp)
FT = abs(fft(S)); 

%% plots
subplot(2,1,1)
plot(S); title(['Signal ' num2str(Freq) ' Hz + Beat'])
subplot(2,1,2)
plot(((0:length(S)-1)/length(S))*Samp,FT);
title('Signal FFT')
xlabel('Frequency')
axis([0 45 0 1]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:11:50.093

我认为你的问题在于数学。

您将正弦与方波相乘（参见此处：[https](https://en.wikipedia.org/wiki/Square_wave) ://en.wikipedia.org/wiki/Square_wave ）+ 偏移量（但这并不重要，因为它的频率为 0）。

当您将峰值（正弦波）与方波（具有无限频率）的变换进行卷积时，频率空间中的情况也是如此。

我认为最简单的解决方案不是使用方波，而是使用维基百科的公式和前几个术语创建自己的波（取决于您希望接近方形的程度）

# java - 获取证书链

> ID：11097375
> 
> 赞同：6
> 
> 时间：2012-06-19T08:37:45.950
> 
> 标签：java, cryptography, certificate, x509certificate, digital-certificate

我正在使用 Java 中的 X509 证书。**给定一个证书，在您到达根证书之前，是否可以在签名层次结构中找到所有其他证书？**

我有一个证书文件（带有`.cer`扩展名），我想提取父签名证书。我想继续查找该证书的父级，直到我获得最终的根证书，该证书是自签名的。

我检查了 X509Certificate 证书 API 和相关 API，`java.security.cert`但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T13:20:47.373

这并不难——假设您以某种方式/带外获得了一个或多个钥匙串中的所有中间证书和根证书。

看一下

```
http://codeautomate.org/blog/2012/02/certificate-validation-using-java/ 
```

用于执行此操作的代码片段。关键位在 validateKeyChain() 中，基本上包括

```
 cert = cert-to-validate
   while(not self signed) {
       extract issuer from cert
       scan keychain(s) to find cert with a subject equal to the issuer
       if none found - error
       check if the signature is correct.
       cert = issuers_cert
   }
   if not at the top/root - error 
```

至于*如何*获得中间/根证书 - 这是一个不同的问题。请注意，此代码有点幼稚 - 并不太了解交叉签名。虽然 java pkix 调用 - BouncyCastle 有一个例子。

您通常可以将根证书构建到密钥链中；但中间证书通常需要“收集”或更动态地发现。这通常需要在 TLS 或类似期间查询 SSL 堆栈。

# css - 无法更改页脚中链接的颜色

> ID：11097378
> 
> 赞同：0
> 
> 时间：2012-06-19T08:37:57.837
> 
> 标签：css, colors, less

我不明白为什么，但突然一些 css 坏了，我需要再次更改它们。

所以现在我的问题是我不能改变链接的颜色，我可以改变链接：悬停，但是链接的颜色 - 不是。

有人可以建议可能导致此问题的原因并帮助我吗？

它在我的屏幕上看起来是灰色的。

这是我的CSS代码：

```
 footer { 
     height:20px;
    background: #628d28;
    margin-top: 45px;    
    padding-top: 5px;
    border-top: 1px solid #eaeaea;
    a {
    color: white;
    background: #628d28;
    &:hover { 
    background: #628d28;
     }
  }  
  small { 
   float: left; 
   }
   ul {
   float: right;
  list-style: none;
   li {
  float: left;
  margin-left: 10px;
    }
   }
  } 
```

我认为的代码：

```
 <footer class="footer">
   <nav>
     <ul>
      <li><%= link_to "Privacy policy", privacy_policy_path %></li>
      <li><%= link_to "Terms of use", terms_of_use_path %>
     </ul>
   </nav>
 </footer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:53:43.677

可能对你有帮助：[jsfiddle](http://jsfiddle.net/ZSdQt/)。

一切正常。链接颜色变化。也许您在代码的其他部分有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:54:35.813

你的 CSS 应该是这样的：

```
 #footer {       
    height:20px;     
    background-color: #628d28;     
    margin-top: 45px;         
    padding-top: 5px;     
    border-top: 1px solid #eaeaea;     
}

#footer ul {
float: right;   
list-style: none;
}

#footer li {
float: left;   
margin-left: 10px;
}

#footer ul a{
color: white;     
background: #628d28;
}

#footer ul a:hover {     
background: #628d28; 
} 
```

还有你的 HTML：

```
> <div id="footer"> <nav> <ul> <li><a href="#">Testa</a></li> <li><a
> href="#">Test</a></li> </ul> </nav> </div> 
```

# ios - 应用内购买恢复

> ID：11097379
> 
> 赞同：3
> 
> 时间：2012-06-19T08:37:59.210
> 
> 标签：ios, in-app-purchase

我在我的 iPhone 应用程序中添加了一个恢复以前购买的按钮，在购买按钮（非消耗性 IAP 产品）旁边。当按下恢复按钮时，应用程序调用 [[SKPaymentQueue defaultQueue] restoreCompletedTransactions]，这似乎在发生某些事情并出现一个对话框的意义上起作用，但是我想检查这个对话框是否确实是打算出现的对话框. 因为当我按下恢复时出现的对话框看起来与我单击购买时出现的对话框完全相同（“你想购买...”）。然后在我点击购买并输入我的密码后，会出现另一个对话框，上面写着“你已经购买了这个。按确定免费下载”或类似的东西。

我的问题：这是恢复应用内购买的预期行为吗？对话框不应该说诸如“您希望恢复购买的物品吗？”之类的内容。

* * *

编辑：我想出了一个理论；上述行为是否可能仅在针对 App Store 使用测试帐户时发生？所以 App Store 根本不记得测试用户的购买行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:11:20.753

这是恢复对话框的预期行为——在应用程序内购买，你不会得到一个对话框说“你想恢复......”

您可以将按钮标记为恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:35:58.923

您确定您的恢复按钮实际上正在调用`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`吗？

我对测试用户没有任何问题。并且@Tapman 的答案不正确，因为它只询问您的密码并且不显示“您想免费加载这个”对话框。

# iphone - uitableview 中的 iPhone webview

> ID：11097380
> 
> 赞同：0
> 
> 时间：2012-06-19T08:38:00.160
> 
> 标签：iphone, uiwebview

```
UIWebView *webview=[[UIWebView alloc] initWithFrame:CGRectMake(10, 10, 150, 120)];
NSString *media=@"http://www.youtube.com/watch?v=kG2BYhjQIKQ";
NSString *html = [NSString stringWithFormat:youTubeVideoHTML,media, 150, 120];

[webview loadHTMLString:html baseURL:nil];
[cell.contentView addSubview:webview]; 
```

它不工作，它只显示白色视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:55:34.857

要在 webView 上播放 youtube 视频，请尝试以下操作：

```
NSString *youTubeVideoHTML = @"<html><head>\
                          <body style=\"margin:0\">\
                          <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
                          width=\"%0.0f\" height=\"%0.0f\"></embed>\
                          </body></html>";

    // Populate HTML with the URL and requested frame size
    NSString *html = [NSString stringWithFormat:youTubeVideoHTML, urlString, frame.size.width, frame.size.height];

    // Load the html into the webview
    [self loadHTMLString:html baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:42:34.317

[webview loadHTMLString:html baseURL:nil]; 用于加载到 UITextview 如果你想使用 UIwebview 手段

```
[webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

# string - 在文本中查找字符串的特定模式

> ID：11097391
> 
> 赞同：0
> 
> 时间：2012-06-19T08:38:34.853
> 
> 标签：string, algorithm, pattern-matching, text-mining, string-search

我正在寻找一种在文本中查找某些特定模式的方法。例如，如果我想从如下格式的文本中查找所有引用：

*   Baron, Naomi (2000) 字母到电子邮件：书面英语是如何演变的以及它的发展方向，劳特利奇：伦敦和纽约。

所以任何类似的东西都会从输入文本中返回。有什么算法可以很好的解决这个问题。到目前为止，我发现的只是在文本中搜索相似字符串的算法。

我正在考虑使用正则表达式，但我不知道这是否是最好的方法，因为我需要一些东西来计算一些相似性指数，然后返回得分最高的命中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:50:24.303

您正在寻找的技术称为信息提取。

这是我对类似问题的回答：

[Apple 如何在电子邮件中查找日期、时间和地址？](https://stackoverflow.com/questions/9294926/how-does-apple-find-dates-times-and-addresses-in-emails/9344555#9344555)

您可能还需要结合一些命名实体识别。[http://en.wikipedia.org/wiki/Named-entity_recognition](http://en.wikipedia.org/wiki/Named-entity_recognition)

# c# - 在事件工具箱中显示新方法

> ID：11097395
> 
> 赞同：0
> 
> 时间：2012-06-19T08:38:40.750
> 
> 标签：c#, visual-studio-2010, events, methods, custom-controls

是否可以在 Visual Studio 的属性-> 事件选项卡中显示新方法（任何自定义控件）？与显示自定义控件属性的方式相同。谢谢！

# android - android.view.InflateException 错误膨胀类

> ID：11097408
> 
> 赞同：4
> 
> 时间：2012-06-19T08:39:30.873
> 
> 标签：android, xml

我在实现[**Jake Wharton**的 ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)时发现了一些问题。这些是 Logcat 上所说的：

```
06-19 15:32:02.661: E/AndroidRuntime(692): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.aprian.learn/com.aprian.learn.VPIndicator}: android.view.InflateException: Binary XML file line #7: Error inflating class com.viewpagerindicator.TitlePageIndicator 
```

我已经放入了 viewpagerindicator 库并已将其放入构建路径中，但仍然无法启动应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T08:54:32.027

[您需要根据引用库项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html#ReferencingLibraryProject)将 ViewPagerIndicator 添加为库项目。将其用作 .jar 文件不起作用。

基本步骤是：将 ViewPagerIndicator 添加为现有源的新项目，然后

> 要添加对库项目的引用，请执行以下步骤：
> 
> 1.  在 Package Explorer 中，右键单击依赖项目并选择 Properties。
> 2.  在“属性”窗口中，选择左侧的“Android”属性组并找到右侧的库属性。
> 3.  单击添加以打开“项目选择”对话框。
> 4.  从可用库项目列表中，选择一个项目并单击确定。
> 5.  对话框关闭后，单击“属性”窗口中的“应用”。
> 6.  单击“确定”关闭“属性”窗口。

如果这不起作用，请尝试 Project -> Clean。

编辑：另见杰克沃顿的这个答案：[答案](https://stackoverflow.com/a/8445964/1166813)

# php - mysql 中的许多记录突然消失/丢失

> ID：11097414
> 
> 赞同：1
> 
> 时间：2012-06-19T08:39:56.850
> 
> 标签：php, mysql

我有一个奇怪的案例。突然，其中一个表中的一些记录（这么多记录）丢失了。首先，我认为这是由我的 PHP 脚本中的错误引起的。但是，我检查了一下，`DELETE`我的脚本中没有任何操作，只有`UPDATE`. 有谁知道我的 MySql 发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:44:22.620

我也认为有人可能通过删除行或删除表来执行 SQL 注入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:43:08.113

也许您或有权访问、从转储中恢复数据库的人？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:51:03.740

见这里： http: [//owasp.com/index.php/SQL_Injection](http://owasp.com/index.php/SQL_Injection)

需要检查的一些东西：如果您使用 phpMyAdmin 之类的东西，请确保没有人可以从外部访问它。

如果您也使用存储过程验证它们，一些可能会被删除。外部应用程序可能会从您的数据库中删除内容，因此严格控制谁拥有特权。

您还可以确保记录所有操作，并且可以使用 mysqldump 命令保留备份，您可以每天比较： http: [//dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

米海

# asp.net - 关于字符串生成器（如何在字符串生成器中显示下拉列表）

> ID：11097423
> 
> 赞同：0
> 
> 时间：2012-06-19T08:40:33.480
> 
> 标签：asp.net, vb.net, stringbuilder

朋友们

我正在使用字符串生成器生成乘客列表，其中我使用了一个表，我想将下拉列表添加到这个乘客中。我所做的是我占据了一张主桌——

```
strHTML1.Append("<table align=center cellpadding='0' cellspacing='0' width='100%'>");
strHTML1.Append("<tr>");
strHTML1.Append("<td>");
strHTML1.Append("Passenger");
strHTML1.Append("</td>");
strHTML1.Append("</tr>");
strHTML1.Append("<tr>");
strHTML1.Append("<td>");
strHTML1.Append("<asp:dropdownlist id='drp' runat='server' width='140px'>");
strHTML1.Append("</asp:dropdownlist>");
strHTML1.Append("</td>");
strHTML1.Append("</tr>")
......... 
```

问题是当我运行项目时它没有显示下拉列表。

请帮助我摆脱这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:47:35.740

据我所知，使用此代码，您可以使用文字添加 HTML 标记。您可以通过以下方式执行此操作：

```
 StringBuilder strHTML1 = new StringBuilder();
    strHTML1.Append("<select>");
    strHTML1.Append("<Option value = 'volvo'>Volvo</Option>");
    strHTML1.Append("<Option value = 'saab'>Saab</Option>");
    strHTML1.Append("<Option value = 'mercedes'>Mercedes</Option>");
    strHTML1.Append("<Option value = 'audi'>Audi</Option>");
    strHTML1.Append("</select>"); 
```

最终代码是：

```
 strHTML1.Append("<table align=center cellpadding='0' cellspacing='0' width='100%'>");
  strHTML1.Append("<tr>");
  strHTML1.Append("<td>");
  strHTML1.Append("Passenger");
  strHTML1.Append("</td>");
  strHTML1.Append("</tr>");
  strHTML1.Append("<tr>");
  strHTML1.Append("<td>");
  strHTML1.Append("<select>");
  strHTML1.Append("<Option value = 'volvo'>Volvo</Option>");
  strHTML1.Append("<Option value = 'saab'>Saab</Option>");
  strHTML1.Append("<Option value = 'mercedes'>Mercedes</Option>");
  strHTML1.Append("<Option value = 'audi'>Audi</Option>");
  strHTML1.Append("</select>");
  strHTML1.Append("</td>");
  strHTML1.Append("</tr>");
  strHTML1.Append("</table>"); 
```

# c# - 如果需要状态码，使用 WebClient 是否是传输文件的正确方法？

> ID：11097425
> 
> 赞同：0
> 
> 时间：2012-06-19T08:40:47.007
> 
> 标签：c#, file-upload, ftp

就像标题说的那样，我想知道使用 WebClient 是否是每天将文件传输到 ftp 的合适工具？经过一番阅读，在我看来，它没有返回 ftps 响应代码。

谁能推荐这方面的良好做法，或者推荐使用框架的哪一部分？

我想第三种选择是重写现有的 Ftp 功能。

今天存在以下内容，并且是从另一个类中调用的：

```
using System.Net;

public class WebClientAdapter : IWebClientAdapter
{
    private WebClient _webClient = new WebClient();

    public ICredentials Credentials
    {
        get { return _webClient.Credentials; }
        set { _webClient.Credentials = value; }
    }

    public byte[] UploadFile(string address, string fileName)
    {
        return _webClient.UploadFile(address, fileName);
    }

using System.Net;

    public class FtpHandler
    {

        public string Path { get; private set; }
        private const string Uri = "PathToFtp";
        private const string FileName = "SomeFile";

        private IWebClientAdapter _webClientAdapter;

        public IWebClientAdapter WebClientAdapter
        {
            get
            {
                if (_webClientAdapter == null)
                    _webClientAdapter = new WebClientAdapter();
                return _webClientAdapter;
            }
            set { _webClientAdapter = value; }
        }

        public FtpHandler()
        {
            Path = System.IO.Path.Combine(System.IO.Path.GetTempPath(), FileName);
        }

        public void Upload()
        {
            WebClientAdapter.Credentials = new NetworkCredential("user", "pass");
            WebClientAdapter.UploadFile(Uri, Path);
        }
    } 
```

由于公司政策，我删除了一些命名空间、凭据和名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:44:04.630

您应该考虑使用[FtpWebRequest-Class](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest%28v=vs.80%29) - 它拥有您需要的一切。

# java - SWT TableCombo 禁用所选项目的突出显示

> ID：11097428
> 
> 赞同：1
> 
> 时间：2012-06-19T08:40:54.930
> 
> 标签：java, swt, highlighting

我正在使用[TableCombo](http://www.eclipse.org/nebula/widgets/tablecombo/tablecombo.php)，当我按下下拉按钮时，会显示所有项目的列表。我想实现当前所选行在此列表中未突出显示（因为我根据项目类型使用不同的背景颜色，并且突出显示隐藏了所选项目的背景颜色）。我尝试使用`SWT.NO_FOCUS`和`SWT.HIDE_SELECTION`标志创建表格，但它没有删除突出显示。有任何想法吗？

我试图在挥杆中找出类似荧光笔的东西，但我没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:46:07.777

我刚刚找到[了这个帖子](https://stackoverflow.com/questions/7006924/windows-7-swt-table-selected-row-highlight-color)，它几乎回答了我的问题。对于`SWT.FULL_SELECTION`突出显示由操作系统自动处理 - 请参阅`Table.CDDS_ITEMPOSTPAINT(NMLVCUSTOMDRAW nmcd, int wParam, int lParam)`Win32。

但是，可以通过样式常量修改此行为。对我来说正确的解决方案是一起使用`SWT.FULL_SELECTION`（可以选择整行）和`SWT.NO_FOCUS`（不使用深蓝色突出显示）和`SWT.HIDE_SELECTION`（隐藏所选项目的默认灰色背景颜色）标志。

遗憾的是，`HIDE_SELECTION`SWT 不支持该标志`Tree`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T12:08:25.767

[如this SO answer](https://stackoverflow.com/a/916866/1329340)中所建议的，可以禁用传递给的事件`SWT.EraseItem`：

```
table.addListener(SWT.EraseItem, new Listener() {   
    @Override
    public void handleEvent(Event event) {
        event.detail &= ~SWT.SELECTED;
    }
}); 
```

`table`是我从 JFace 获得的 SWT 表`TableViewer`。不确定`TableCombo`API。

# asp.net-mvc-3 - MVC 3 - Ninject - 成员资格 - SQL Server Express 2008 r2

> ID：11097429
> 
> 赞同：0
> 
> 时间：2012-06-19T08:40:55.617
> 
> 标签：asp.net-mvc-3, ninject, sql-server-express, custom-membershipprovider

这是我的设置：

我已经按照 Pro ASP.NET MVC3 Framework 中的 SportsStore 为我的应用程序建模。

对于那些没有书的人：

我有 2 个项目捆绑在一个解决方案中 -

```
--Project.Domain--

  Abstract(folder)
  ..IObjectRepository.cs

  Concrete(folder)
  ..EFObjectRepository.cs

  Entities(folder)
  ..Data.cs - contains class definition for Object

--Project.WebUI--

  Areas(folder)
  ..Area1
  ..Area2

  Infrastructure(folder)
  ..NinjectControllerFactory.cs 
```

我的问题是如何使用 Ninject 组织自定义会员提供程序，以及我的应用程序当前的结构方式？

请提供 C# 代码并解释每个文件应该存在于我的结构中的什么位置。

还请提供所有在`CustomMembershipProvider`.

如果您想了解更多信息，请告诉我。

提前感谢您防止精神错乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:46:12.777

如果您想提供自己的实现，`IAuthProvider`您需要执行以下操作：

*   将您的自定义类添加到 SportsStore.WebUI\Infrastructure\Concrete 并让它继承自`IAuthProvider`

    public class MyCustomAuthProvider : IAuthProvider { public bool Authenticate(string username, string password) { // 用你的自定义逻辑实现这个函数 throw new NotImplementedException(); } }

*   在 NinjectControllerFactory 中更改绑定：

改变

```
ninjectKernel.Bind<IAuthProvider>().To<FormsAuthProvider>(); 
```

到

```
ninjectKernel.Bind<IAuthProvider>().To<MyCustomAuthProvider>(); 
```

这将改变你的依赖注入。AccountController 现在将使用您的自定义实现。

# c++ - 我可以从 NTFS 分区在 Ubuntu 中运行 C++ 项目吗？

> ID：11097443
> 
> 赞同：1
> 
> 时间：2012-06-19T08:41:38.473
> 
> 标签：c++, ubuntu, codeblocks, ntfs

我有一个额外的 NTFS 分区来存储我想从 WINdows 和 Ubuntu 使用的数据。我在那里做了一个 C++ 项目。这是一个简单的 Hello World 控制台应用程序。

运行时出现此错误。

```
sh :1 :/media/Data1/blah/blah/project/bin/debug/project :permission denied 
```

我的 fstab 文件如下所示：

```
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
proc            /proc           proc    nodev,noexec,nosuid 0       0 
```

Blkid：

```
/dev/sda1: SEC_TYPE="msdos" LABEL="DellUtility" UUID="5450-4444" TYPE="vfat" 
/dev/sda2: LABEL="RECOVERY" UUID="4248184648183ADD" TYPE="ntfs" 
/dev/sda3: LABEL="OS" UUID="20081BCC081B9FB8" TYPE="ntfs" 
/dev/sda5: UUID="bc712346-c70f-4bc6-9f21-48bae91b8b02" TYPE="swap" 
/dev/sda6: UUID="1915e08f-1961-437f-900a-3dd37a26118b" TYPE="ext4" 
/dev/sda7: UUID="bcb714f1-7428-4e5f-8cf9-73ae724ada57" TYPE="ext4" 
/dev/sda8: LABEL="Data1" UUID="7FCF22B82B6665CB" TYPE="ntfs" 
/dev/sda9: LABEL="Data2" UUID="411A8CDC1D33E6FA" TYPE="ntfs" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:42:55.947

你可以，如果你从 fstab 中删除 noexec 选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:58:14.787

在运行时使用 exec 重新挂载

```
sudo mount -o remount,exec /media/Data1 
```

### 使其在重新启动时保持不变：

我建议添加

```
LABEL=Data1 /media/Data1  auto auto,exec 0  0
LABEL=Data2 /media/Data2  auto auto,exec 0  0 
```

到您的 fstab 文件。

重启，完成。

# gitorious - 本地 gitorious http url

> ID：11097444
> 
> 赞同：1
> 
> 时间：2012-06-19T08:41:43.153
> 
> 标签：gitorious

我已经设置了一个主机名“localhost”的本地gitorious服务器。但它给了我一个 http URL，比如

[http://git.localhost/abc/abc.git](http://git.localhost/abc/abc.git)

所以我无法通过http访问。事实上，我想用 IP 地址替换“localhost”。但是“git”。部分导致问题。

如何解决问题才能通过http访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:21:01.177

将以下行添加到您的`/etc/hosts`：

```
git.<youhost>   <machine-ip> 
```

这是一种识别 http/https 请求的方法。您还可以使用自诊断脚本来检查某些错误。

```
$ sudo su git -c "RAILS_ENV=production bundle exec rake diagnostics:summary" 
```

# jsp - jQuery UI 未在 jsp 中加载

> ID：11097446
> 
> 赞同：1
> 
> 时间：2012-06-19T08:41:51.577
> 
> 标签：jsp, jsf-1.2

我想在我的 jsp 页面中包含 jQuery UI。我试过这个

```
<jsp:root 
    xmlns:jsp="http://java.sun.com/JSP/Page" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    version="2.1" >

    <jsp:directive.page 
        contentType="text/html" 
        pageEncoding="UTF-8" />

    <jsp:output
        doctype-root-element="html"
        doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
        doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" />

    <c:url var="cssUrl" value="/resources/css/eAuditStyle.jspx"/>

    <html xmlns="http://www.w3.org/1999/xhtml">
        <body>                       
            <f:view>                              
                <h:form>
                    <jsp:include page="topMenu.jspx" flush="true" />                  
                    <div id="menuBodyContainer" >             
                        <jsp:include page="leftMenu.jspx" flush="true" />

                        <div id="myBody">
               </h:form>             
            </f:view>          
        </body>       
    </html>   
</jsp:root> 
```

这是我的 leftmenu.jsp

```
<jsp:root 
    xmlns:jsp="http://java.sun.com/JSP/Page" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    version="2.1">

    <jsp:directive.page contentType="text/html" pageEncoding="UTF-8"/>

    <f:subview id="leftMenu" >           
        <div id="menu">               
            <div id="myAccordion">                  
                <h2>
                    <a href="#">Header 1</a>
                </h2>

                <div>
                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean 
                </div>

                <h2>
                    <a href="#">Header 2</a>
                </h2>

                <div>
                    Etiam tincidunt est vitae est. Ut posuere, mauris at sodales 
                </div>

                <script src="resources/development-bundle/jquery-1.7.2.js"></script>
                <script type="text/javascript" src="resources/development-bundle/ui/jquey.ui.core.js"></script>
                <script type="text/javascript" src="resources/development-bundle/ui/jquery.ui.widget.js"></script>
                <script src="resources/development-bundle/ui/jquery.ui.accordion.js"></script>
                <script>
                    $(function() {
                        $("#myAccordion").accordion();
                    });
                </script>                    
            </div> <!--end of id="myAccordion"  -->                
        </div> <!--end of menu -->       
</f:subview> 
```

它只包括 jQuery 1.7.2.js。它还包括`<link rel="stylesheet" href="resources/development-bundle/themes/base/jquery.ui.all.css" />`. 我的意思是路径是正确的。为什么它不包括其他文件:(。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:39:13.067

这应该工作 -

```
<script type="text/javascript">
<![CDATA[
   $(function() {
     $("#myAccordion").accordion();
   });
]]>
</script> 
```

* * *

或者您可能需要将整个内容放入 cdata -

```
<![CDATA[
  <script src="resources/development-bundle/jquery-1.7.2.js"></script>
  <script type="text/javascript" src="resources/development-bundle/ui/jquey.ui.core.js"></script>
  <script type="text/javascript" src="resources/development-bundle/ui/jquery.ui.widget.js"></script>
  <script src="resources/development-bundle/ui/jquery.ui.accordion.js"></script>
  <script>
    $(function() {
      $("#myAccordion").accordion();
    });
  </script>
]]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-09T15:58:45.373

您必须在“jqueryui/external/jquery/jquery.js”中的 jqueryUI 中使用 jquery.js，而 google chrome 总是延迟这么多时间，您最好不要使用 google chrome。

# mac-app-store - Mac OS Mountain Lion：是否可以在不向 Apple 支付开发者会员资格的情况下为 Gatekeeper 编写代码签名应用程序？

> ID：11097453
> 
> 赞同：6
> 
> 时间：2012-06-19T08:42:16.943
> 
> 标签：mac-app-store, osx-mountain-lion, osx-gatekeeper

我的理解是，Mountain Lion 将在默认情况下禁止通过 Gatekeeper 安装未签名应用程序的配置中发布。

我目前分发一个开源应用程序；这是一个爱好项目，我不为此收取任何费用。我是否可以在不购买 Mac 开发人员会员资格的情况下签署此应用程序的代码，或者 Apple 是否要求所有开发人员每年支付 99 美元才能发布安装在 Mountain Lion 的默认配置上的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:50:33.803

请注意，[“您可以通过按住 Control 键单击应用程序并选择打开它来手动覆盖 Gatekeeper。”](http://www.apple.com/osx/what-is/security.html) 从 Apple 的描述中不明显的是，[您只需要](http://www.anandtech.com/show/5545/mac-os-x-mountain-lion-developer-preview/3)为任何给定的应用程序执行一次此操作，因此它不应该以某种方式给您的用户带来太多不便。苹果似乎明白，如果 Gatekeeper 不方便，人们会简单地将其关闭。

至于Mountain Lion发布后是否只有付费计划成员才有资格获得Developer ID证书，我不知道Apple有任何声明。然而，开发者 ID 链接*目前*似乎将免费用户重定向到付费程序注册页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:57:18.417

如果您的应用程序是基于 Web 的应用程序，您可以避免成为开发人员会员，否则您不能。

# java - 如何使用失真系数使 jpeg 图像文件不失真？

> ID：11097460
> 
> 赞同：6
> 
> 时间：2012-06-19T08:42:47.567
> 
> 标签：java, opencv, javacv

我的网络摄像头有一张失真的快照。作为 jpeg 文件，固有矩阵和失真系数：-

```
matrix intrisic matrix
      (1137.0919189453125,0.0,383.99273681640625)
      (0.0,264.17974853515625,312.74951171875)
      (0.0,0.0,1.0)

matrix distortion :-
    (-0.26913660764694214)
    (0.22259517014026642)
    (-0.0928017795085907)
    (0.26249778270721436) 
```

我不知道如何在 CvMat 中加载这些失真系数，以便使用这些失真系数获得未失真的图像。另外，我只想使用 javacv 来做到这一点。

编辑：-另外，我知道功能

```
IplImage mapx=cvCreateImage(cvSize(src_img),IPL_DEPTH_32F,1);
IplImage mapy=cvCreateImage(cvSize(src_img),IPL_DEPTH_32F,1);

cvInitUndistortMap(CvMat intrinsic,CvMat distortion, IplImage mapx, IplImage mapy); 
cvRemap(IplImage tm,IplImage src,IplImage mapx,IplImage mapy,CV_INTER_LINEAR|CV_WARP_FILL_OUTLIERS,cvScalarAll(0)); 
```

但我不知道如何为固有矩阵和失真系数初始化各自的 cvMats。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:02:54.080

## 为什么不使用[`cv::undistort`](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html)？

它将您的矩阵作为其参数。

`void undistort(const Mat& src, Mat& dst, const Mat& cameraMatrix, const Mat& distCoeffs, const Mat& newCameraMatrix=Mat())`

`src`矩阵就是你的形象。

`dst`矩阵是未失真的图像。

是你的`cameraMatrix`内在矩阵。

该`distCoeffs`矩阵是您的失真矩阵。

从文档中引用：

> 将在校正后的图像中可见的源图像的特定子集可以通过 来调节`newCameraMatrix`。您可以使用 GetOptimalNewCameraMatrix 来计算适当的`newCameraMatrix`，具体取决于您的要求。

* * *

好的。我刚刚找到了您评论的答案....我想。

`public static native void cvUndistortPoints(CvMat src, CvMat dst, CvMat camera_matrix, CvMat dist_coeffs, CvMat R/*=null*/, CvMat P/*=null*/);` 您可以在[http://www.java2s.com/Open-Source/Android/UnTagged/educationalrobots/name/audet/samuel/javacv/jna/cv.java.htm](http://www.java2s.com/Open-Source/Android/UnTagged/educationalrobots/name/audet/samuel/javacv/jna/cv.java.htm)中找到它。

这实际上在**imgproc**中。

只需制作最后两个参数`null`。

* * *

第二部分 - 初始化 CvMat - 比看起来更难，因为如果你想优雅地做，你必须弄乱指针，我忘记了如何使用 JNA 指针 :)

所以这是一个替代解决方案：使用这个构造函数`public static CvMat create(int rows, int cols, int type);`

因此，对于您的矩阵，您将拥有三行和三列。

您的类型可能是 cxcore.java 中的类型之一，可能`CV_64FC1`是单通道`double`类型。否则，如果您使用`float`s，它将是`CV_32FC1`.

然后，您将使用以下方法一一设置值： 行在`opencv_core.cvSet2D(matrix, i, j, value);` 哪里，列在哪里！`i``j`

还有问题吗？

干杯！

# c++ - 使用 Boost 的 C++ 中的多线程之谜

> ID：11097461
> 
> 赞同：4
> 
> 时间：2012-06-19T08:42:49.997
> 
> 标签：c++, multithreading, boost

```
static void testlock()
{
    for(int i=0;i<10000000;i++)
    {
        float f=2.0/i;
    }
}

static void TEST()
{
    cout<<"Start testing" <<endl;
    unsigned int startClock;

    for(int i=1;i<=10;i++)
    {
        startClock = clock();
        vector<boost::thread*> threads;
        for(int j=0;j<i;j++)
            threads.push_back(new boost::thread(&testlock));
        for(int j=0;j<i;j++)
        {
            threads[j]->join();
            delete threads[j];
        }
        cout << i << " threads: "<< clock()-startClock << endl;
    }
} 
```

输出：

```
Start testing
1 threads: 180000
2 threads: 350000
3 threads: 540000
4 threads: 730000
5 threads: 900000
6 threads: 1080000
7 threads: 1260000
8 threads: 1510000
9 threads: 1660000
10 threads: 1810000 
```

我在四核 PC（Core2Quad，4 核无超线程）上运行此代码，所以我预计 1-4 个线程需要大约相同的时间。相反，似乎只使用了一个核心。我在这里想念什么？

谢谢

更新：

-我在 Ubuntu Linux 下使用 Eclipse CDT

-我对 Pthread 进行了同样的尝试，得到了相同的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T03:36:19.223

我的一位同事找到了解决方案：clock() 测量 CPU 周期，因此如果两个线程正在运行，它的运行速度会提高一倍。使用 gettimeofday 计时给出了预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:39:13.780

~~首先， with`i=0` `2.0/i`被零除~~（对不起，正如 Igor 在评论中正确指出的那样，它对浮点运算有效，并且在这种情况下，它会导致 + 无穷大。

其次，即使你修复了这个问题，你的`testlock`函数也可能会被优化为空，因为结果永远不会被使用。

因此，目前您只是在测量创建和加入线程的开销，这就是线性增加的原因。

# ruby-on-rails - 搜索模型？

> ID：11097464
> 
> 赞同：0
> 
> 时间：2012-06-19T08:43:00.470
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

所以我试图通过表格搜索模型。基本上，我的最终目标是能够在我的用户模型中为“用户”分配一个值，如果此搜索设法获得至少 1 个搜索结果，这只有在组织表单上的用户名和密码都匹配时才会发生。

控制器：

```
class OrganizationsController < ApplicationController
    def join
        @organization = Organization.find_by_username_and_password(params[:organization])
    end
end 
```

风景：

```
<div class="row">
  <div class="span6">

    <%= form_for(@organization) do |f| %>

      <%= f.label :username %>
      <%= f.text_field :username %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <br />
      <%= f.submit "Join!", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

我只是无法让它工作。我究竟做错了什么？任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:55:36.153

您处理参数的方式不正确。由于您使用的是 form_for，因此表单中的数据将封装在哈希中，即 params[:organization]

```
organization = params[:organization]
@organization = Organization.find_by_username_and_password(organization[:username], organization[:password]) 
```

但是，我建议您在方法中的这行代码之前添加一个调试器并自己进行试验！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:03:37.953

您可以使用动态查找器方法并提供相应的属性值进行搜索。例如

```
User.find_by_email_and_password 'test@email','password' 
```

我们正在搜索电子邮件和密码，在查找器方法中，电子邮件排在第一位，因此第一个参数应该是电子邮件的值，第二个参数应该是密码，您可以使用模型属性的任意组合进行搜索

```
User.find_by_password_and_email 'password','test@email' 
```

真棒Rails :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:57:26.313

根据方法名称`find_by_username_and_password`，您必须传递两个参数：

```
 Organization.find_by_username_and_password('username', 'password') 
```

# java - Eclipse RCP - 实现扩展点。在哪里评估？

> ID：11097469
> 
> 赞同：0
> 
> 时间：2012-06-19T08:43:16.843
> 
> 标签：java, eclipse-plugin, rcp, eclipse-indigo

*   我正在 Eclipse 3.7 Indigo 中实现一个带有自己的扩展点的扩展。
*   我找到了一种获取所有插件的方法，这将为我的扩展点提供功能。这在[此处进行了描述](http://www.vogella.com/articles/EclipseExtensionPoint/article.html#extensionpoints_access)

**问题：**
应该在哪里对贡献的信息进行评估？在哪个级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:50:20.973

当你贡献的东西需要这些信息时，它应该被触发。例如，一个常见的模式是您贡献一个视图并使用扩展点来允许其他人为您的视图做出贡献。将您的扩展点代码放入 MyViewRegistry 并让它在实例化时读取扩展点。然后创建：

```
private static MyViewRegistry registry = null;
public MyViewRegistry getRegistry() {
    if (registry == null) {
        registry = new MyViewRegistry();
        registry.read();
    }
    return registry;
} 
```

那么当你查看实际需要的扩展信息时，就会触发加载。

# wpf - 如何防止 DataBinding 暂时发生？

> ID：11097472
> 
> 赞同：0
> 
> 时间：2012-06-19T08:43:33.793
> 
> 标签：wpf, data-binding

我有一个在 WPF 和 MVVM 下运行的程序。我有一些每日工作时间信息，可以在每日、每周或每月视图中显示。

我使用三个数据网格来做到这一点，并通过绑定它们的 Visible 属性只显示用户想要的一个。问题在于这三个网格绑定到一个可观察的集合，因此视图正在询问信息，尽管这没有显示出来。是否可以通过任何属性停用某些元素的数据绑定功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:45:42.887

您可以简单地将`ItemsSource`不显示的数据网格设置为`null`。

您还可以通过使用`MultiBinding`for the`ItemsSource`和 custom来自动执行此操作[`IMultiValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)。转换器将绑定到两个值（源集合和网格`Visibility`），如果网格可见或`null`不可见，则返回集合本身。绑定本身可以是单向的。

# jquery - 在 Div 外部单击时取消隐藏登录弹出窗口

> ID：11097474
> 
> 赞同：1
> 
> 时间：2012-06-19T08:43:36.880
> 
> 标签：jquery, popup

我正在使用下面的脚本来获取`login dialogue box`用户单击主页内任何位置的时间。

```
<?php
 if (Mage::getSingleton('customer/session')->isLoggedIn())
 { 
    echo '<body>';
 } else {
    echo '<body onClick="showSmartRegisterDialog(); return false;">';
 }
?> 
```

如果我单击登录表单 div 之外的任何位置，登录窗口将再次出现。如何解决这个问题？

有人遇到过这个问题吗？

解决这个高度赞赏的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:47:08.037

显示对话框后清除 onclick。;)

```
echo '<body onclick="showSmartRegisterDialog(); this.onclick = \'\'; return false;">'; 
```

**编辑：**

尝试改变这个：

```
Event.observe($$('#smartlogin .overlay-modal')[0], 'click', function(event){
    $$('#smartlogin .error')[0].style.display != 'none' ? smartLogin.closeError() : smartLogin.hideSmartDialogs();
}); 
```

对此：

```
Event.observe($$('#smartlogin .overlay-modal')[0], 'click', function(event){
    if($$('#smartlogin .error')[0].style.display != 'none') smartLogin.closeError();
}); 
```

# c# - 从未知数据模型中获取数据

> ID：11097478
> 
> 赞同：1
> 
> 时间：2012-06-19T08:43:39.470
> 
> 标签：c#, templates

好的，所以我想要一个通用方法，它可以从给定剃刀类型属性指针的未知数据类中读取数据。

IE 我希望能够传入一个包含模板和对象的字符串，然后从模板中给定字符串的对象中提取数据。

```
String template = "@Model.Basket";
var results = parse(template, data); 
```

parse 方法不应该知道传递给它的特定模型，所以它的方法签名应该是这样的：

```
public var parse(String template, object model) 
```

数据类似于

```
public class Receipt
{
    public String Firstname { get; set; }
    public String Surname { get; set; }
    public DateTime TransactionDateTime { get; set; }
    public Boolean ReturnCustomer { get; set; }
    public LineItem[] Basket { get; set; }

    public class LineItem
    {
        public Product product { get; set; }
        public int Units { get; set; }

        public class Product
        {
            public int ProductId { get; set; }
            public String ProductName { get; set; }
            public double Cost { get; set; }
        }
    }
} 
```

在这种情况下，解析应该返回一个行项目数组，但如果我的模板等于“@Model.Firstname”，它应该只返回一个包含存储在该属性中的名称的字符串。

有没有人有什么好主意。

请注意，对于这个给定的解决方案，我不能使用 Razor 引擎，因为我的模板不是 razor 引擎可以理解的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:12:36.023

如果您想这样做，您需要查看`System.Reflection`命名空间——特别是 PropertyInfo。不过，我不确定这*是*个好主意。

# c# - 在数据网格中拖动和重复值（如在 Excel 中）.NET (WPF)

> ID：11097483
> 
> 赞同：4
> 
> 时间：2012-06-19T08:43:55.990
> 
> 标签：c#, .net, wpf, drag

我们希望在 gridview 或任何其他控件的 (WPF) .NET 应用程序中实现类似于 Excel 功能的功能。该功能应该类似于 Excel 中的功能，用户可以选择单元格并将鼠标向下拖动到所需的行（数字），并将第一行的值复制到所有选定的行（向下拖动并重复值）。

有谁知道这是否可能？我花了很多时间在谷歌上搜索并没有找到任何有用的东西。

为 Excel 编写 VSTO 可能会更简单，但我们有很多（旧版）VBA 代码和 VSTO 工作表和加载项的当前测试返回“混合”结果，而混合 VSTO 和 VBA 对我们来说不是最佳解决方案。

编辑：还可以提及应付解决方案。:)

# php - 图像线 php gd

> ID：11097490
> 
> 赞同：0
> 
> 时间：2012-06-19T08:44:05.743
> 
> 标签：php, gd, line

我的代码有问题，但找不到错误。我的浏览器出现错误：图像....无法显示，因为它包含错误。我的代码如下。谢谢。

```
header("Content-type: image/png");   
// Sample values
$values=array(rand(40,80),rand(40,100),rand(10,50),rand(80,160),rand(30,100),
    rand(40,120),rand(280,360),rand(20,80),rand(10,80),rand(40,120),rand(180,260),
    rand(40,160),rand(550,700),rand(480,600),rand(240,340),rand(480,600),rand(240,340));
$imgWidth=500;
$imgHeight=200;
$grid=25;
$graphspacing=0.05;

while (list($key, $val) = each($Values)) {
    if($val>$max){
        $max=$val;
    }
}

for ($i=0; $i<count($Values); $i++){
    $graphValues[$i] = $Values[$i] * (($imgHeight*(1-$graphspacing))/$max);
}

// use imagecreatetruecolor instead of imagecreate
$image=imagecreatetruecolor($imgWidth, $imgHeight);

// added antialiasing
imageantialias($image, true);

// had to force a white bg
$bgColor = imagecolorallocate($image, 255, 255, 255);
imagefill($image , 0,0 , $bgColor);

$colorWhite=imagecolorallocate($image, 255, 255, 255);
$colorGrey=imagecolorallocate($image, 192, 192, 192);
$colorBlue=imagecolorallocate($image, 0, 0, 255);

imageline($image, 0, 0, 0, $imgHeight, $colorGrey);
imageline($image, 0, 0, $imgWidth, 0, $colorGrey);
imageline($image, $imgWidth-1, 0, $imgWidth-1, $imgHeight-1, $colorGrey);
imageline($image, 0, $imgHeight-1, $imgWidth-1, $imgHeight-1, $colorGrey);

// Create grid
for ($i=1; $i<($imgWidth/$grid); $i++) {
    imageline($image, $i*$grid, 0, $i*$grid, $imgHeight, $colorGrey);
}
for ($i=1; $i<($imgHeight/$grid); $i++) {
    imageline($image, 0, $i*$grid, $imgWidth, $i*$grid, $colorGrey);
}

if($imgWidth/$grid>count($graphValues)){ 
    $space=$grid; 
} else { 
    $space = $imgWidth/(count($graphValues)-1);
}

for ($i=0; $i<count($graphValues)-1; $i++) {
    imageline($image, $i*$space, ($imgHeight-$graphValues[$i]), ($i+1)*$space, ($imgHeight-$graphValues[$i+1]), $colorBlue);
}
imagepng($image);
imagedestroy($image); 
```

# javascript - 带有多个标记的信息窗口中的小部件

> ID：11097493
> 
> 赞同：0
> 
> 时间：2012-06-19T08:44:19.223
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow, openinfowindowhtml

我正在尝试使用 Google Maps API 创建一个包含大量标记和信息窗口的地图。我可以获得一张地图，以显示大量标记和信息窗口，或者使用脚本中的位置或从文件中加载它们。

我想要做的是把这个代码：

```
<script type="text/javascript" src="http://www.tidetimes.org.uk/aberdaron-tide-times.js"></script> 
```

进入信息窗口，因此标记将位于该位置，单击信息窗口时会显示潮汐时间。

我找不到任何方法让它在信息窗口中工作。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:06:28.463

对不起，我不完全明白你在说什么。这个“我想做的是将此代码放入信息窗口中，以便标记将位于该位置，并且单击信息窗口时会显示潮汐时间。”您到底是什么意思？

首先，您不需要信息窗口中的代码来为标记提供位置。这是标记标准属性之一。

其次，我几乎可以肯定您的信息窗口中不能有事件（​​代码）。您可以做的是，当用户单击标记时，地图将放大或缩小。稍后您可以在该标记上进行另一个事件。

也许这会帮助您回答（取自 Google Maps API 文档）

“InfoWindow 的内容可能包含文本字符串、HTML 片段或 DOM 元素本身。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:59:48.973

您需要将html添加到信息窗口..

[请参阅文档](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

```
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">Uluru</h2>'+
    '<div id="bodyContent">'+
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the '+
    'Northern Territory, central Australia. It lies 335 km (208 mi) '+
    'south west of the nearest large town, Alice Springs; 450 km '+
    '(280 mi) by road. Kata Tjuta and Uluru are the two major '+
    'features of the Uluru - Kata Tjuta National Park. Uluru is '+
    'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
    'Aboriginal people of the area. It has many springs, waterholes, '+
    'rock caves and ancient paintings. Uluru is listed as a World '+
    'Heritage Site.</p>'+
    '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
    'http://en.wikipedia.org/w/index.php?title=Uluru</a> (last visited June 22, 2009).</p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

## 编辑

在进一步检查您的代码和您的网站后，我相信您在问如何通过单个文件注入时间和日期。

我的建议是使用服务器端代码中返回的 JSON 对象，遍历 json 对象并为弹出窗口使用模板。

如果您好奇，可以参考我们在[http://demo.mapitusa.com](http://demo.mapitusa.com)上做的类似事情，您可以轻松浏览源代码并找到所需的 js 文件并查看工作示例。

# iphone - 从 json 创建一个数组以进行向下钻取 tableview

> ID：11097499
> 
> 赞同：0
> 
> 时间：2012-06-19T08:44:39.847
> 
> 标签：iphone, json, uitableview, drilldown

我是 iOS 编程的新手。我正在尝试从 json 创建一个数组数组以用于向下钻取表视图。所以我想得到这个：blogsList --> blogPosts --> postDetailView。我已经花了2天的时间，但仍然没有结果。请帮忙。

这是我的json：

```
{ "blogs": [{"ID":8,"Title":"ringroads","Name":"utf8 coded name
 string","Logotype":"..\/images\/gup_logos\/ringroads_logo_mini.jpg","posts":
[{"ID":38,"URLTitle":"remont_dorog_v_moskve","title":"utf8 coded title string","Desc":"utf8 coded description 
string","0":"","Preview":"remont_dorog_v_moskve.jpg","create_time":"2012-05-22 
17:40:11"}]},{"ID":9,"Title":"gormost","Name":"utf8 coded name 
string","Logotype":"..\/images\/gup_logos\/gormost_logo_mini.jpg","posts":
[{"ID":35,"URLTitle":"rabochie_budni_uchastka_gormost__fontany","title":"utf8 coded 
title string","Desc":"utf8 coded description 
string.","0":"","Preview":"rabochie_budni_uchastka_gormost__fontany.jpg","create_time":"2012
-05-18 10:17:32"}]},{"ID":10,"Title":"unecomoscow","Name":"utf8 coded name 
string","Logotype":"..\/images\/gup_logos\/unecomoscow_logo_mini.jpg","posts":
[{"ID":52,"URLTitle":"documentooborot","title":"utf8 coded title string","Desc":"utf8 
coded description string.","0":"","Preview":"documentooborot.jpg","create_time":"2012-
06-05 14:02:23"},{"ID":49,"URLTitle":"grebnoy_kanal","title":"utf8 coded title 
string","Desc":"utf8 coded description 
string.","0":"","Preview":"grebnoy_kanal.jpg","create_time":"2012-05-31 14:37:08"},
{"ID":46,"URLTitle":"itogi_ozp","title":"utf8 coded title string.","Desc":"utf8 coded 
description string.","0":"","Preview":"itogi_ozp.jpg","create_time":"2012-05-30 
10:13:11"}]}] } 
```

这是我的代码：

```
...
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
[connection release];

NSString *responseStringBlogs = [[NSString alloc] initWithData:responseDataBlogs encoding:NSUTF8StringEncoding];
self.responseDataBlogs = nil;

NSDictionary *results = [responseStringBlogs JSONValue];
NSArray *blogs = [results objectForKey:@"blogs"];

int i;

NSMutableDictionary *blogsDict = [[NSMutableDictionary alloc] init];

for(i = 0; i < [blogs count]; i++){
    NSDictionary *tmpBlog = [blogs objectAtIndex:i];
    NSString *blogName = [tmpBlog objectForKey:@"Name"];
    NSDictionary *blogPosts = [tmpBlog objectForKey:@"posts"];
    //NSDictionary *blog = [NSDictionary dictionaryWithObjectsAndKeys:blogName, @"blogName", blogPosts, @"posts", nil];

    NSMutableDictionary *blog = [[NSMutableDictionary alloc] init];
    [blog setObject:blogName forKey:@"blogName"];
    [blog setObject:blogPosts forKey:@"posts"];
    //[blog setObject:urlTitle forKey:@"urlTitle"];

    blogsDict = blog;

    [arrayForTable addObject:blogsDict];
}

NSLog(@"blogsArr == %@", arrayForTable); 
```

NSLog 显示了一个带有字典的数组，其键为“blogName”和“posts”。然后我使用方法 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
...
NSDictionary *dict = [arrayForTable objectAtIndex:indexPath.row];
cell.textLabel.text = [dict objectForKey:@"blogName"];
} 
```

它在我的第一个 tableView 中为我提供了 blogNames 列表。然后我使用方法 didSelectRowAtIndexPath：

但是在这里，当用户选择博客时，我无法让 postTitle 在下一个 tableView 中显示帖子列表。我究竟做错了什么？请帮我！

Upd：我认为带有帖子的字典像数组一样创建并且没有我需要的键（“desc”、“title”等）。我看不到这个建议的代码错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:52:16.400

在 - 的里面

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

NSDictionary *dict = [arrayForTable objectAtIndex:indexPath.row];
NSString *blogName = [dict objectForKey:@"blogName"];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:54:52.413

您必须在字典中插入标题，如下所示

```
for(i = 0; i < [blogs count]; i++){
    NSDictionary *tmpBlog = [blogs objectAtIndex:i];
    NSString *blogName = [tmpBlog objectForKey:@"Name"];
    NSDictionary *blogPosts = [tmpBlog objectForKey:@"posts"];
    //Here get the post title too
    NSString *postTitle = [tmpBlog objectForKey:@"Title"];
    //NSDictionary *blog = [NSDictionary dictionaryWithObjectsAndKeys:blogName, @"blogName", blogPosts, @"posts", nil];

    NSMutableDictionary *blog = [[NSMutableDictionary alloc] init];
    [blog setObject:blogName forKey:@"blogName"];
    [blog setObject:blogPosts forKey:@"posts"];
    //Set title in dictionary too
    [blog setObject:postTitle forKey:@"postTitle"];
    //[blog setObject:urlTitle forKey:@"urlTitle"];

    blogsDict = blog;

    [arrayForTable addObject:blogsDict];
} 
```

现在在你`didSelectRowAtIndexPath`得到这样的帖子标题

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dict = [arrayForTable objectAtIndex:indexPath.row];
    //Get the post title
    NSString *postTitle = [dict objectForKey:@"postTitle"];
} 
```

# matlab - 如何在 MATLAB 中优化两个 for 循环

> ID：11097507
> 
> 赞同：0
> 
> 时间：2012-06-19T08:45:22.137
> 
> 标签：matlab, optimization, loops

我有两张图像，我想根据特定像素的值进行比较并执行不同的操作。问题是它真的很慢，我需要加快操作速度，代码可以做什么？

```
currentFrame = rgbimage; %rgbimage is an 800x450x3 matrix

for i = 1:size(currentFrame, 1)

   for j = 1 : size(currentFrame,2) 

       if currentFrame(i,j) > backgroundImage(i,j) %backgroundimage is an equally sized image which i would like to compare with
          backgroundImage(i,j, :) = double(backgroundImage(i,j, :) +1); 

       elseif currentFrame(i,j) < backgroundImage(i,j)
          backgroundImage(i,j, :) = double(backgroundImage(i,j, :) -1);          
       end

   end

end

diff = abs(double(currentFrame) - double(backgroundImage)); %difference between my backgroundimage and my current frame
fusion = zeros(size(currentFrame)); % A fusion image

for i=1:size(backgroundImage,1)
    for j = 1:size(backgroundImage,2)

           if diff(i,j) > 20

            fusion(i,j, :) = double(currentFrame(i,j, :));

           else
             fusion(i,j, :) = 0;  

           end
    end 
end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:59:30.040

您可以在一次操作中比较矩阵。例如，

```
D = diff > 20; 
```

矩阵 D 将包含 D(i,j) = 1，其中 diff(i,j) > 20，否则为零。

然后你可以用它来设置其他矩阵：

```
fusion = zeros(size(currentFrame));
fusion(diff > 20) = double(currentFrame(diff > 20)); 
```

和第一个循环一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:00:35.790

您不需要循环 - 您可以执行以下操作：

```
indexes = currentFrame > backgroundImage;
backgroundImage(indexes) = backgroundImage(indexes) + 1; 
```

* * *

顺便提一句。在您的代码中使用`currentFrame(i,j) > backgroundImage(i,j)`您只是比较三个颜色维度中的第一个。这是故意的吗？

# windows-8 - 双屏地铁应用

> ID：11097508
> 
> 赞同：7
> 
> 时间：2012-06-19T08:45:23.523
> 
> 标签：windows-8, microsoft-metro

我读过在 Windows 8 Metro UI 中一次只能在一个屏幕上运行。如果您有 2 台显示器，Metro 将在其中一台上运行，而在另一台上运行桌面环境。

是否可以使用两个屏幕创建 Metro 应用程序？第一个显示器将包含一个控制界面，第二个显示器将输出全屏视频？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T20:03:09.307

不，这是不可能的。Windows Metro UI 始终在主显示器上运行，并且始终全屏运行，并且无法将全屏应用程序放在两个显示器上。

您可以在第 44 页[的本产品指南](http://go.microsoft.com/fwlink/p/?LinkId=238697)中查看详细信息。

您可以使用[snap](http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx)在一个屏幕上显示两个 Metro 应用程序，但不能两个在两个或多个屏幕上显示一个应用程序。

# c# - 无法使用 Image Magick (Magick Net)

> ID：11097510
> 
> 赞同：1
> 
> 时间：2012-06-19T08:45:26.690
> 
> 标签：c#, .net, image, imagemagick

> **可能重复：**
> [ImageMagick.NET 异常](https://stackoverflow.com/questions/8555454/imagemagick-net-exception)

我正在尝试使用 ImageMagick 锐化图像

```
 ImageMagickNET.Image g = new ImageMagickNET.Image(@"I:\My Photos\a.jpg");
        g.Sharpen(1, 2);

        pictureBox1.Image = g.ToBitmap(); 
```

即使在引用程序集并将程序集放在可执行文件夹中之后。抛出一个 FileNotFound 异常说 ImageMagickNET.dll 找不到。可能是什么问题。这是使用 ImageMagick 的正确方法吗？有人可以举个例子吗？

# c++ - C++ 异常规范 - 处理无效异常

> ID：11097513
> 
> 赞同：1
> 
> 时间：2012-06-19T08:45:44.807
> 
> 标签：c++, visual-studio-2010, gcc, exception-handling, exception-specification

当函数抛出不在有效异常列表中的异常时，标准行为是什么？例如，当我运行此代码时：

```
#include <iostream>
#include <cstdlib>

using namespace std;

void NotLegal() throw(char) {
    throw 42;
}

void myunexpected () {
  cout << "exception not in list\n";
  cin.get();
  exit(0);
}

int main()
{
    set_unexpected(myunexpected);

    try {
       NotLegal();
   }
   catch(...) {
       cout << "exception catched";
       cin.get();
   }

   return 0;
} 
```

它在 GCC 和 Visual Studio C++ 编译器上的行为不同：

*   在 VS 2010 上，一般异常处理程序中未捕获到预期异常。
*   调用GCC`unexpected()`处理函数而不是捕获异常。

为什么会有这种差异？为什么 MS C++ 编译器不调用`unexpected()`回调？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:10:52.937

[的文档](http://msdn.microsoft.com/en-us/library/7twc8dwy.aspx)`set_unexpected`调用了这种行为：

> # 评论
> 
> ...
> 
> C++ 标准要求`unexpected`在函数抛出不在其抛出列表中的异常时调用它。当前的实现不支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:49:33.100

您是否使用正确的标志进行了编译？Visual Studio 默认情况下不为某些优化的发布版本打开异常处理。

你想要[/c 和 /EHsc](http://msdn.microsoft.com/en-us/library/7twc8dwy%28v=vs.80%29.aspx)

# c# - 这可能吗， DbContext.SaveChanges() 返回 0 但没有异常？

> ID：11097518
> 
> 赞同：22
> 
> 时间：2012-06-19T08:46:28.703
> 
> 标签：c#, asp.net, entity-framework, c#-4.0, entity-framework-4

我使用实体框架 4.0。是否有可能`SaveChanges()`返回 0 但不抛出异常？比如添加之后。

这是我的代码：

```
try
{
    _context.CodeProducts.Add(entity);
    _context.SaveChanges();

    //Shell I control return result from SaveChanges() in here.
    //However doesn't throw an exceoption?

    return new MethodResponse()
    {
        ResultText = "Successful",
        Type = MethodResponse.ResponseType.Succeed
    };
}
catch (OptimisticConcurrencyException exc)
{
    throw exc;
}
catch (UpdateException exc)
{
    throw exc;
}
catch (Exception exc)
{
    throw exc;
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-19T08:53:32.367

根据[文档](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.savechanges%28v=vs.103%29.aspx)`DbContext.SaveChanges`，返回值为

> 写入基础数据库的对象数。

因此，只有在不需要将实体保存到数据库中时，您才能看到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T18:10:00.507

实体框架的`db.SaveChanges()`删除和保存返回受影响的行数。然而，在使用 Fakes Framework（存根和垫片）的测试中，返回的值将始终为 0。

如果调用中有错误，则会抛出异常。这意味着任何依赖于大于零的值从`db.SaveChanges()`确认返回的调用方法都不能测试相同的值。

`db.SaveChanges()`当方法使用返回值来评估给定操作中受影响的行数时，这可能很关键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T04:56:58.740

我的回答没有提到`DbContext`，但如果有人在使用`XEntities`并遇到同样的问题，您可以尝试：

```
using (var entities = new XEntities())
{
    var product = entities.Products.SingleOrDefault(x => x.Id == id);
    product.Type = "New type"; // modifying

    int flag = entities.SaveChanges(); // 1
    // or await entities.SaveChangesAsync(); // 1
} 
```

问题：

```
public class Demo
{
    private XEntities _entities = new XEntities();

    public void Test(int id)
    {
        var product = _entities.Product.SingleOrDefault(x => x.Id == id);
        product.Type = "New type"; // modifying

        int flag = _entities.SaveChanges(); // 0 <<<====
        // or await entities.SaveChangesAsync(); // 0  <<<====

        // you need to create new instance of XEntities to apply changes
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-30T12:26:36.150

请注意，如果您更新实体并且实际上没有对其进行任何更改，`SaveChangesAsync()`它将返回`0`并且`Exception`将是`null`.

# algorithm - 图中的最小破坏成本

> ID：11097519
> 
> 赞同：8
> 
> 时间：2012-06-19T08:46:30.217
> 
> 标签：algorithm, graph, multiway-tree

我们得到一个图 G(V,E)，它有 N 个节点（编号从 0 到 N-1）和正好 (N-1)***个双向边***。

图中的每条边都有一个**正成本 C(u,v)**（边权重）。

*整个图是这样的，**在任何一对 Nodes 之间都有一条唯一的路径***。

我们还给出了一个节点号列表**L**，炸弹放置在该列表 L 上。

我们的目标是从图中**损坏/移除边缘**，这样，在从图中损坏/移除边缘之后，炸弹之间就没有联系了——

也就是**破坏后，任意两颗炸弹之间都没有路径**。

损坏 Edge(u,v) = **Edge weight(u,v)**的**成本**。

 **因此，**我们必须破坏这些边缘，以使总破坏成本最小**。

例子：

```
Total Nodes=N=5 
Total Bomb=Size of List L=3

List L={2,4,0}//Thats is at node number 2,4 and 0 bomb is placed...

Total Edges =N-1=4 edges are::

u v Edge-Weight

2 1 8

1 0 5

2 4 5

1 3 4

In this case the answer is ::
Total Damaging cost =(Edge Weight (2,4) + Edge Weight(0,1))
           =5+5=10.

So when we remove the edge connecting node (2,4),
and the edge connecting node (0,1) ,there is no connection left 
between any pair of machines in List {2,4,0};

Note any other,combinations of edges(that  we damaged ) to achieve the
target goal ,needs more than 10 unit cost. 
```

![在此处输入图像描述](../Images/80e9e17ad2bd8e057e955afe8e72578c.png)

```
Constraints::
N(ie. Number of Nodes) <= 100,000
ListSize |L|(ie. Number of Bombs) <= N
1 <=Edge cost(u,v) <= 1000,000 
```

**我做了什么？**

直到现在，我还没有找到任何有效的方法:(。

此外，由于节点`N`的数量是 ，边的数量是准确`N-1`的，并且整个图是这样的，任何一对节点之间都存在唯一路径，我得出的结论是**该图是一个*TREE***。

我试图修改 Kruskal 算法，但这也对我没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:20:01.230

我认为修改后的 Kruskal 是通往这里的路。

取图 G'=(V', E'), V'=V, E'={}。以成本的非递增顺序对 E 中的边进行排序。现在，对于 E 中的每条边，将其添加到 E' 中，当且仅当它不连接两个组件，这两个组件都具有带有炸弹的顶点。结果是 EE' 成本的总和。

编辑：

在您的示例上运行它。

最初，我们的边集是空的 {}，我们将边按非升序排序 [(1, 2), (0, 1), (2, 4), (1, 3)]

因此，一开始，我们的图表由 5 个不连贯的组件组成。

(1, 2) 的成本为 8，并且它所连接的组件中只有一个具有炸弹。所以我们将它添加到 E'。E'={(1, 2)} 我们有 4 个分量。

下一个最高成本边是 (0, 1)，成本为 5。但是两个组件都有炸弹，所以不要添加这个边。

下一个是 (2, 4)。这也连接到带有炸弹的组件，所以我们也跳过它。

最后，最低成本边是 (1, 3)。由于它的一个组件（仅包含节点 3）没有炸弹，我们将它添加到 E'。

这给了我们 E' = {(1,2), (1, 3)}。

我的理由是，我们尝试在成本较低的边缘之前添加成本较高的边 - 这确保在原始节点中带有炸弹的节点之间的任何路径中，除了最低成本之外的所有边都将被添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:48:19.093

我认为这可以在线性时间内完成。

将树根植于某个顶点，然后从自下而上遍历开始。

从一些叶子开始。如果没有炸弹，切掉叶子并继续前进。如果有炸弹，您必须在通往这片叶子的路径上切割一个边缘。向上传播有关最便宜边缘的信息。

然后当你在内部顶点时，你有这种可能性：如果顶点有炸弹，下面有一些炸弹，切掉所有这些炸弹的最便宜的路径。如果没有炸弹并且下面只有一颗炸弹，则传播有关最便宜路径的信息。如果下方有更多炸弹，则除最昂贵路径的炸弹外，将所有炸弹都砍掉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:40:48.837

这就是树中的多路切割问题。它可以通过简单的动态规划在多项式时间内求解。参见 Chopra 和 Rao：“ [On the multiway cut polyhedron](http://dx.doi.org/10.1002/net.3230210106) ”，Networks 21(1):51-89, 1991。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T20:31:19.840

这是我的假设：

图**G**是一棵树。因此，任何两个节点之间只有**一条路径。**

假设有**L** Red（炸弹）节点和**VL** White（非炸弹节点）。该解决方案需要将 G 划分为 L 个子树的森林。这需要移除最少的**L-1**条边。

每个被移除的边缘都必须**位于两个 Red 节点之间的路径**上。

**A. 修剪树 G 以删除所有*不参与两个红色节点之间路径的边。***

1.  从考虑中删除白色叶节点（和入射边缘）。
2.  重复#1，直到修改后的图中没有白色叶子节点。

**B.**在（A）之后，图中剩下的所有边都是边，它们形成**了两个红色节点之间的路径。**

选择这棵树中***权重最小的边。***这将产生两棵子树，每棵树至少包含一个红色节点。

**C.**如果 B 中创建的每个子树包含**多个红色节点，则返回步骤 A。**

这是 O(V log V) （|E| 是 |V| -1 ）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T09:27:33.747

我认为以下建议应该有效：

*   1）从炸弹开始，在你的例子中，我从：`0`
*   2）创建所有相邻节点的路径。所以，带着所有的关系，和他们一起开始一条路。在您的示例中，它将开始一条路径：`0 -> 1`.
*   3）如果你在路径上击中另一个炸弹，你会以最低的成本移除边缘。在示例中，我们没有击中炸弹，所以我们继续第 2 步。
*   3A) 任何路径上都没有炸弹。继续步骤 2 并使用新的相邻节点扩展路径。在您的情况下，将创建一个新路径：`1 -> 3`. 现有的将被扩展：`0 -> 1 -> 2`
*   3B）在路径上发现炸弹。走找到炸弹的路径，去掉成本最低的边。在您的示例中，路径`0 -> 1 -> 2`包含炸弹 (2)。因此，我们删除与成本 5 的关系。从“待办事项”中删除路径，并在最后到达的节点（2 和 3）上继续执行步骤 2。

最后你应该只遍历每个节点一次。如果我没记错的话，复杂度应该是 O(n log n)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T08:08:19.217

[http://www.cs.ust.hk/mjg_lib/Classes/COMP572_Fall06/Notes/Tree_Multicut.ps](http://www.cs.ust.hk/mjg_lib/Classes/COMP572_Fall06/Notes/Tree_Multicut.ps)

有算法的描述。

后记文件的[Google HTML 版本](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=29&ved=0CIkBECEwCDgU&url=http://webcache.googleusercontent.com/search?q=cache%3akB1mIzECSx8J%3awww.cs.ust.hk/mjg_lib/Classes/COMP572_Fall06/Notes/Tree_Multicut.ps%2b&cd=29&hl=en&ct=clnk&gl=us&ei=T4_hT_ijLOXa2wXa8YnrCw&usg=AFQjCNG-fpl9SK2GP-o4VMKJaDseONYNKQ)

==========================================

[http://dspace.mit.edu/bitstream/handle/1721.1/5394/OR-308-95.pdf?sequence=1](http://dspace.mit.edu/bitstream/handle/1721.1/5394/OR-308-95.pdf?sequence=1)

> k = 2 的情况并不是多路割问题的唯一多项式可解实例。Lovdsz [12] 和 Cherkasskij [3] 表明，当 ce = 1 Ve EE 且 G 是欧拉时，多路割问题是多项式可解的。**Erdos 和 Sz6kely [8] 表明，当底层图 G 是一棵树时，多路切割问题的推广是多项式可解的。**达尔豪斯等。人。[7] 已经表明，对于平面图上的固定 k，该问题是多项式可解的。

昨晚我写了一个简单的基于贪心算法的解决方案，其中包括删除不在两个红色（终端）节点之间的路径上的节点，然后选择最小的权重节点，然后在子树上重复该过程。我删除了它，因为进一步阅读表明问题是NP。但是这个参考表明有一个多项式解决方案......**

# for-loop - 如何与 OpenMP 并行读取每四行 .gz 文件？

> ID：11097521
> 
> 赞同：0
> 
> 时间：2012-06-19T08:46:30.373
> 
> 标签：for-loop, openmp, filehandle, gzip

## test.fa.gz 文件包含多个 4 行作为打击：

```
@HWI-ST298:420:B08APABXX:3:1101:1244:2212 1:N:0:TCATTC
GGCAAGGCACTTACTTTACAGCTAAAGAAGTGCAGC
+
@@@FDFFDFHCFDACGHC<<CCFEHHFCCFCEE:C? 
```

* * *

我想要做的是与 OpenMP 并行读取每四行 *.fq.gz 文件。code blow 可以编译成功，但有时会显示不正确的结果。在每个 for 循环中，我使用了 4 次 getline() 来读取文件。我不确定 OpenMP 将如何处理每个 for 循环中的多个作业，以及 .gz 文件句柄将如何在 OpenMP 的 for 循环之间移动。

我搜索了互联网和 OpenMP 文档以寻求帮助，但仍然不太明白。因此，任何帮助将不胜感激。

谢谢，

* * *

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <gzstream.h>
#include <omp.h>
using namespace std;

string reverseStrand (string seq);

int main (int argc, char ** argv) {
    const char* gzFqFile;
    unsigned int nReads;

    if (argc == 3) {
        gzFqFile = argv[1];
        nReads   = atoi(argv[2]); }
    else {
        printf("\n%s <*.fq.gz> <number_of_reads>\n", argv[0]);
        return 1; }

    igzstream gz(gzFqFile);
    string li, bp36, strand, revBp36;
    unsigned int i;
    #pragma omp parallel shared(gz) private(i,li,bp36,strand,revBp36)
    {
        #pragma omp for schedule(dynamic)
        for(i = 0;i < nReads;++i) {
            li      = "";
            bp36    = "";
            strand  = "";
            revBp36 = "";
            getline(gz,li,'\n');
            getline(gz,li,'\n');
            bp36 = li;
            getline(gz,li,'\n');
            strand = li;
            getline(gz,li,'\n');
            if(strand.compare("-") == 0) {
                revBp36 = reverseStrand(bp36);
            }
            cout << bp36 << " " << strand << " " << revBp36 << "\n";
        }
    }
    gz.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:02:48.407

也许更多的是扩展评论而不是答案，但无论如何……

即使`getline`是线程安全的，让 OpenMP 程序中的多个线程都尝试同时读取同一个文件可能不是一个好主意。除非你有一个并行文件系统（因为你没有提到它，所以我假设你没有）你会冒着编写一个线程为单个 I/O 通道相互竞争的程序的风险。考虑 4 个线程的情况，每个线程都使用磁盘上的 1 个读/写磁头读取文件的不同部分。准随机读取文件的一小部分可能是您能想到的最慢的方法。

Haatschi 的建议是将文件访问封装在一个临界区中，这只是意味着线程不会为 I/O 访问而争斗，而是可以很好地协同工作，每个线程都礼貌地等待轮到它。但是，正如 Haatschi 所暗示的，这不太可能导致文件读取速度加快，更有可能（根据我的经验）导致速度减慢。如果 I/O 时间不重要，这可能是一种可行的方法。

如果您关心 I/O 时间，则可以在一个线程中读取文件并并行处理数据；或者，让每个线程一次性从文件中读取所有数据，使用临界区来避免争用 I/O 资源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:55:49.567

getline 函数不是线程安全的。因此，您不能同时从不同的线程调用它而不会得到未定义的行为。正确执行此操作的唯一方法是在每个 getline 调用周围创建关键部分，强制任何时候只有一个线程在“gz”上调用 getline。但是，在您的代码示例中，我怀疑使用多个线程是否会有任何加速，因为除了从“gz”读取行之外，线程没有太多工作要做。

# php - php 和 (exe) C++ 控制台应用程序之间的通信

> ID：11097525
> 
> 赞同：0
> 
> 时间：2012-06-19T08:46:43.040
> 
> 标签：php, c++, exec, console-application

*是否可以调用 exe 文件并从中获取结果？*

（基本）例如，如果我有类似的东西：

应用程序

```
#include <iostream>

void main() 
{
  std::cout << "<?php echo text_from_exe; ?>" << std::endl;
} 
```

我可以这样调用exe吗：

```
<?php
  exec("app.exe");
?> 
```

**并得到像 " `text_from_exe`" 的输出？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:48:47.130

```
 #include <iostream>

void main() 
{
  std::cout << "echo text_from_exe;" << std::endl;
}

<?php
  exec("app.exe", $output);
  eval(implode("\n",$output));
?> 
```

注意：这是非常危险的，不应该在面向公众的服务器上运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:49:58.377

查看PHP 中可用的[程序执行函数列表。](http://php.net/manual/en/book.exec.php)该[`shell_exec`](http://www.php.net/manual/en/function.shell-exec.php)函数尤其可以在 PHP 变量中返回控制台程序的输出。

# php - 检查 PHP 是否已经编译 --with-mysql

> ID：11097531
> 
> 赞同：5
> 
> 时间：2012-06-19T08:47:39.687
> 
> 标签：php, mysql

> **可能重复：**
> [在 php 中检测 mysql 支持](https://stackoverflow.com/questions/4100885/detecting-mysql-support-in-php)

有没有一种快速的方法来以编程方式检查这个特定的 PHP 安装是否已在支持 MYSQL 的情况下编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T12:54:31.820

实际上有多个模块支持 MySQL (mysql, mysqli, pdo_mysql, ...)。 与原始 mysql 模块相比，通常建议使用[MySQLi（改进）以更完整地支持 MySQL5 功能。](http://php.net/manual/en/book.mysqli.php)[PDO（PHP 数据对象）](http://php.net/manual/en/book.pdo.php)是一个数据库抽象层，提供面向对象的数据抽象。

`function_exists()`如果要检查每个模块（mysql_connect，mysqli_connect，...）是否存在特定功能，可以使用前面的注释。

或者，您可以使用 PHP 函数[`extension_loaded()`](http://php.net/extension_loaded)来检查扩展本身（模块名称与 phpinfo() 的输出匹配）：

```
<?php
    if (extension_loaded('mysql') or extension_loaded('mysqli')) {
        // Looking good
    }
?> 
```

在命令行提示符下，您可以列出所有已编译的模块：

```
php -m 
```

如果您使用的是 unix-ish 系统，请使用`grep`将输出过滤到 MySQL 相关模块：

```
php -m | grep -i mysql 
```

如果您使用的是 Windows，请使用`findstr`将输出过滤到 MySQL 相关模块：

```
php -m | findstr -i mysql 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-19T08:50:51.700

```
if (function_exists('mysql_connect')) ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T08:50:40.603

我想你可能正在寻找[phpinfo();](http://php.net/manual/en/function.phpinfo.php)

这显示了有关 PHP 配置的信息。

> phpinfo — 输出有关 PHP 配置的信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T08:50:37.217

就在这里。只需检查其中一个`mysql_*`功能是否存在，例如`mysql_connect`：

```
if (function_exists("mysql_connect")) {
  echo "compiled using --with-mysql\n";
} 
```

# python - 检查exe是32位还是64位

> ID：11097535
> 
> 赞同：2
> 
> 时间：2012-06-19T08:47:53.317
> 
> 标签：python, scons

我正在编写一个使用 scons 构建的 python 程序，`.exe`然后检查它是 64 位还是 32 位。我试过`platform.architecture(test1.exe)`了，但问题是当我给一个 32 位的 exe 时，它​​说它是一个 64 位的。

我尝试使用`dumpbin`但输出很大，所以我使用了这个`dumpin /HEADERS test.exe |find "machine"`. 问题是我不能使用 python 来执行这个命令。当我使用`subprocess.call(['dumpbin /HEADERS test2.exe |find "machine"'])`时，我收到以下错误

```
Traceback (most recent call last):
  File "test_scons.py", line 66, in <module>
    print "Architecture of the compiled program is ",subprocess.call(["dumpbin /HEADERS test2.exe |find ""machine" ])
  File "C:\Python27\lib\subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "C:\Python27\lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "C:\Python27\lib\subprocess.py", line 896, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:51:54.833

您需要分别指定所有参数：

```
subprocess.call(['dumpbin', '/HEADERS', 'test2.exe', '|', 'find', '"machine"']) 
```

您也可以很好地通过 python 中的输出进行 grep。

顺便说一句：[`platform.architecture()`](http://docs.python.org/library/platform.html#platform.architecture)告诉你正在运行 scons 的当前平台架构*，*没有关于你正在生成的二进制文件，甚至没有关于 python 版本是如何编译的。它*可以*为其他二进制文件提供此信息，但前提*是可执行文件指向 Python 解释器*，并且可能不在 Windows 上，因为那里没有等效的`file`命令。

# jquery - jquery改变一个特定html元素的一个css属性

> ID：11097536
> 
> 赞同：2
> 
> 时间：2012-06-19T08:47:56.023
> 
> 标签：jquery, html, css

我已经看过但没有找到仅更改一个属性的具体答案。这是我做的一个例子：我只想更改显示属性。

```
<html>
    <head>
        <title>
            test
        </title>
        <style type="text/css">
            *{
                margin: 0px;
                padding: 0px;
            }
            a.move {
                height: 25px;
                width: 25px;
                display: inline-block;
                border: 1px #aaa solid;
                border-radius: 5px;
                text-align: center;
                text-decoration:  none;
                color: black;
            }
            a.move:hover {
                background-color: #aaa;
            } 
```

---v 这是重要的 css 部分

```
 li {
                display: inline-block;
                width: 370px;
                border: 1px #aaa solid;
            } 
```

---v 这是重要的 css 部分

```
 </style>
        <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
            var current = 1;
            var wait = 0;
            function next(){
                current++;
                update();
            }
            function prev(){
                current--;
                update();
            } 
```

---v 这是重要的 jquery 部分

```
 function update(){
                $('p').text(current);
                $('li').each(function(index) {
                    if(index != current)
                        $(this).css('display','none');
                    else
                        $(this).css('display','inline');

                });
            } 
```

重要部分结束---^

```
 $(function(){
                update();
                $('a.move.left').click(function(e){
                    if(wait) return;
                    e.preventDefault();
                    prev();
                });
                $('a.move.right').click(function(e){
                    if(wait) return;
                    e.preventDefault();
                    next();
                });
            });
        </script>
    </head>
    <body>
        <p> ... </p>
        <a class="move left" href="a">&lt;</a>&emsp;<a class="move right" href="b">&gt;</a></br>
        <ul>
            <li>123</li><!--
            --><li>123</li><!--
            --><li>456</li><!--
            --><li>789</li><!--
            --><li>abc</li><!--

            --><li>edf</li><!--
            --><li>ghj</li><!--
            --><li>!@#</li><!--
            --><li>$%^</li><!--
            --><li>ABC</li>
        </ul>
    </body>
</html> 
```

请指教。目前，发生的事情是它删除了所有其他 css 属性。我每次都可以设置所有属性，但我不希望这样做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:53:09.573

直接修改css（在大多数情况下）不是一个好的选择。

而是使用：

`$(this).show()`和`$(this).hide()`

或（我个人的偏好，因为这更灵活）：

`$(this).toggleClass("...")`并在您的样式表中创建相应的 CSS 类。

另外，您正在更改所有`li`项目的 css：`$('li').each`- 这真的是您想要的吗？

该`.css()`方法仅更改您指定的 css 属性 - 它不会覆盖其他样式。如果情况确实如此，那么问题可能出在代码的其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:06:42.113

利用

```
$(this).toggle() 
```

或者，如果您想显示或隐藏，请根据需要使用显示和隐藏。

```
$(this).show() 
$(this).hide() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:52:54.100

在 jquery 中，您可以使用以下方法隐藏或显示元素：

`$(this).show()`或者`$(this).hide()`而不是改变css。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:51:32.447

取而代之的是，为什么现在使用：

$(this).show() 或 $(this).hide() 根据需要... ot $(this).toggle() ....

# regex - 正则表达式计算

> ID：11097563
> 
> 赞同：1
> 
> 时间：2012-06-19T08:50:04.650
> 
> 标签：regex

有谁知道`47380539-47366525`从这个字符串计算的正则表达式（或其他类型的快速命令）？

```
1:47366525-47380539 
```

坚持这个脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:55:11.050

假设您正在编写一些 shell 脚本，这里有一些 Perl 示例。

要匹配`47366525-47380539`：`1:47366525-47380539`

```
echo 1:47366525-47380539 | perl -nE '/:([\d-]+)/ && say $1' 
```

如果要计算数学表达式的结果：

```
echo 1:47366525-47380539 | perl -nE '/:([\d-]+)/ && say eval $1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:56:43.967

我假设你想提取相关部分（正则表达式不能做数学）。

```
\d+:(\d+-\d+) 
```

此正则表达式将匹配格式为`digits:digits-digits`您可以提取第一个捕获的组以获取所需部分的字符串。

# javascript - 如何通过node.js（来自javascript）中的请求返回JSON？

> ID：11097564
> 
> 赞同：0
> 
> 时间：2012-06-19T08:50:04.930
> 
> 标签：javascript, node.js, request

我正在使用“请求”模块从 facebook API 获取 JSON 对象：

```
exports.userInfo = function (userID, accessToken){
request.get({url: facebookAPI.ME + accessToken, json: true}, function(error, response, user){
    if (error) {
        console.log(error);
    } else {
        if (typeof(user) !== 'undefined'){
            return User;
        }

    }
}); 
```

};

但是，如果我从外部调用此爬虫，则不会返回有效的 JSON 对象。

```
var crawler = require('./helper/crawler');
console.log(crawler.userInfo(userID, accessToken)); 
```

当请求返回有效的 JSON 对象并将该有效的 JSON 对象返回给 userInfo 函数时，我该如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:17:26.527

As request is asynchron and triggers a callback, you can't use return in it. You have to pass a callback to crawler.userInfo, like this:

```
exports.userInfo = function (userID, accessToken, callback){
  request.get({
    url: facebookAPI.ME + accessToken,
    json: true
  }, callback);
}; 
```

And then from outside

```
var crawler = require('./helper/crawler');
crawler.userInfo(userID, accessToken, function (error, response) {
  console.log(response);
}); 
```

# expression - 如何在报表生成器的同一表达式区域创建两个不同的 if 子句？

> ID：11097568
> 
> 赞同：0
> 
> 时间：2012-06-19T08:50:35.720
> 
> 标签：expression, report-builder2.0

如何在报表生成器的同一表达式区域创建两个不同的 if 子句？

第一：

```
=IIf( Fields!productidname.Value="" , Fields!productdescription.Value, Fields!productidname.Value); 
```

第二个：

```
=Iff(Fields!tler.Value="", " ","-- (" & Fields!tler.Value & " ) ") 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:34:21.620

我认为这可能是您正在寻找的；

```
=
IIf(Fields!productidname.Value="" , Fields!productdescription.Value, Fields!productidname.Value)
&
Iff(Fields!tler.Value="", " ","-- (" & Fields!tler.Value & " ) ") 
```

# ruby-on-rails - 使用字典重构 Ruby on Rails i18n YAML 文件

> ID：11097572
> 
> 赞同：25
> 
> 时间：2012-06-19T08:50:49.547
> 
> 标签：ruby-on-rails, internationalization, refactoring, structure, yaml

[这个](https://stackoverflow.com/q/10282857/567863)StackOverflow 问题让我思考了什么是 Rails i18n 文件的良好结构，所以我想我会分享另一个重构 Rails i18n yml 文件的结构供您考虑/批评。

鉴于我想

1.  保留默认的应用程序结构，这样我就可以像`t('.some_translation')`在我的视图中一样使用速记“惰性”查找，并了解应用程序中使用翻译的位置，
2.  避免尽可能多的字符串重复，特别是使用不仅相同而且具有相同上下文/含义的单词，
3.  只需更改一次密钥，即可在所引用的任何地方反映出来，

对于看起来像这样的**config/locales/en.yml文件：**

```
activerecord:
  attributes:
    user:
      email: Email
      name: Name
      password: Password
      password_confirmation: Confirmation
  models:
    user: User
users:
  fields:
    email: Email
    name: Name
    password: Password
    confirmation: Confirmation
sessions:
  new:
    email: Email
    password: Password 
```

我可以看到有很多重复，并且“电子邮件”和“密码”等词的上下文是明确的，并且在它们各自的视图中具有相同的含义。如果我决定将“电子邮件”更改为“电子邮件”，则必须全部更改它们会有点烦人，所以我想重构字符串以引用某种字典。那么，如何将字典哈希添加到文件顶部，并带有一些`&`锚点，如下所示：

```
dictionary:
  email: &email Email
  name: &name Name
  password: &password Password
  confirmation: &confirmation Confirmation

activerecord:
  attributes:
    user:
      email: *email
      name: *name
      password: *password
      password_confirmation: *confirmation
  models:
    user: User
users:
  fields:  
    email: *email
    name: *name
    password: *password
    confirmation: *confirmation
sessions:
  new:
    email: *email
    password: *password 
```

您仍然可以继续使用静态字符串（例如上面的“用户”），但是只要您在视图中获得多个完全相同的单词/短语的实例，您就可以将其重构到字典中。如果基础语言中的键的字典翻译对目标语言没有意义，那么只需将目标语言中的引用值更改为静态字符串或将其作为额外条目添加到目标语言的字典中。我敢肯定，如果每种语言的字典变得太大且笨拙，可以将它们重构到另一个文件中（只要它在翻译文件的顶部重新导入，以便参考工作）。

这种构建 i18n yaml 文件的方式似乎适用于我尝试过的一些本地测试应用程序。我希望精彩的[Localeapp](http://www.localeapp.com/)将来能为这种锚定/引用提供支持。但是无论如何，所有这些字典讨论都不可能是一个原创的想法，那么 YAML 中的锚引用是否还有其他问题，或者可能只是整个“字典”概念？或者，如果您有超出 Rails 默认 i18n 约定的需求，是否完全删除默认后端并将其替换为[Redis或其他东西会更好？](http://redis.io/)

**编辑**：

我想尝试解决在下面的评论中提到的 tigrish 的工作流程示例，而不是作为他的答案下方的另一条评论。如果我似乎没有得到所提出的观点或者我只是天真，请原谅我：

**第 1 点**：ActiveRecord 模型有一个通用的“名称”属性，它们都只是指向名称的通用字典：

```
dictionary:
  name: &name Name

activerecord:
  attributes:
    name: *name
    user:
      name: *name
    product:
      name: *name 
```

**第 2 点**：只需要更改用户模型的名称。其他名称保持不变。

*选项 1*：在后端保持模型字段名称相同，只需更改它指向的前端翻译。

```
dictionary:
  name: &name Name
  full_name: &full_name Full Name

activerecord:
  attributes:
    name: *name
    user:
      name: *full_name
    product:
      name: *name 
```

*选项 2*：也更改用户模型字段名称。这将需要更改代码中对该键的任何引用，以及`change_table`/`rename_column`迁移。

```
dictionary:
  name: &name Name
  full_name: &full_name Full Name

activerecord:
  attributes:
    name: *name
    user:
      full_name: *full_name
    product:
      name: *name 
```

*选项 3*：如果您想非常彻底，请将“名称”中包含的信息重构为单独的数据库/Activemodel 字段，这需要新的字典条目和迁移。您可以决定您希望如何显示“全名”：

```
dictionary:
  name: &name Name
  name_prefix: &name_prefix Prefix
  first_name: &first_name First
  middle_name: &middle_name Middle
  last_name: &last_name Last
  name_suffix: &name_suffix Suffix

activerecord:
  attributes:
    name: *name
    user:
      name_prefix: *name_prefix
      first_name: *first_name
      middle_name: *middle_name
      last_name: *last_name
      name_suffix: *name_suffix
    product:
      name: *name 
```

**第 3 点**：任何人出于任何原因都需要更改翻译，在这种情况下是营销。我将从第 2 点选项 1 的示例继续

*选项1*：模型字段名称相同，只需更改前端翻译。

```
dictionary:
  name: &name Name
  full_name: &full_name Full Name
  funky_name: &funky_name Ur Phunky Phresh Naym

activerecord:
  attributes:
    name: *name
    user:
      name: *full_name
    product:
      name: *name
sessions: # Sign up page keys
  new:
    name: *funky_name 
```

*选项 2*：出于某种原因，“Funky name”也迫切需要保存到数据库中。`username`如果没有人反对（或者`funky_name`由于某种原因营销坚持），我们就称它为。

```
dictionary:
  name: &name Name
  full_name: &full_name Full Name
  funky_name: &funky_name Ur Phunky Phresh Naym

activerecord:
  attributes:
    name: *name
    user:
      name: *full_name
      username: *funky_name
    product:
      name: *name
sessions: # Sign up page keys
  new:
    name: *name
    funky_name: *funky_name 
```

是的，所以我承认我对自己在做什么一无所知，但是，我愿意被公开拒绝，以了解为什么这种在 Haml 中使用 i18n 的方式在 Rails 应用程序中是一个坏主意。难以阅读？维护噩梦？如果我使用（我认为是）该语言的一个特性，它真的被认为是“破解文件格式”吗？

再次感谢 tigrish 驱使我完成这一切。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T18:10:34.843

TLDNR；不要破解您的文件格式，改进 rails helpers 并帮助建立标准化的密钥结构！

TLDR；

不想在你的游行中下雨，但我对这种技术有一些问题。在哪里使用点快捷方式以及rails helpers 的键结构有何不同的困境可能有点令人费解。

据我了解，问题基本上是关于干燥您的语言环境文件并使用 YAML 语言的功能来实现这一点。

首先，锚点只能真正保证适用于 YAML，因此该解决方案不能普遍应用于 I18n。如果您使用不同的后端，此技术可能不可行。无论是 SQL、Redis 还是 Json，我都不知道它们中的任何一个具有任何类型的符号链接功能。这并没有过多地考虑在引擎盖下，翻译实际上是重复的。

我遇到的第二个也是更大的问题是关于语言学的。您的示例说明所有这些术语在上下文和含义上完全相同。不幸的是，只有在极其简单的示例中才会出现这种情况。

毫无疑问，随着您的应用程序的增长或添加其他语言，您会发现 Person 的“name”属性必须不同于 Book 的“name”属性，在英语中我们称之为“title” - 好的，这个例子真的很复杂；）但是当你混合越来越多的语言时，这种情况确实经常发生并且理想情况下，我们需要一种通用的方式来处理它。

我认为在很大程度上，复杂性来自于随着不同默认值而演变的rails helpers，而没有关键结构的约定。

回到您的示例，您提到了我认为非常不同的两件事：使用 rails 助手的 activerecord 属性翻译和使用点快捷方式的查看翻译。

让我举一个非常频繁的工作流程示例：

1.  在这种情况下，您使用用户的“名称”字段创建一个表单，您希望使用通用的“名称”属性翻译（label_tag 应该使用类似：'attributes.name'）。这是最简单、最干燥的案例，可让您快速启动并运行，批量翻译简单属性。
2.  过了一会儿，您决定只需要将此模型的用户“姓名”翻译为“全名”，因此您创建了一个在 label_tag 的查找调用中具有更高优先级的新翻译（例如：'activerecord.attributes.users.name' ))
3.  再后来，营销人员有了一个绝妙的主意，即在此页面上（并且仅在此页面上）将此字段的标签显示为“输入您的时髦新名称”。我们不再描述 name 属性，我们描述的是这种形式的特定视图；这就是点快捷方式将 :'.form.name' 转换为类似 ':users.new.form.name' 的地方。

我们无法使用共享的“字典”来处理这种情况。当然，我们的语言环境文件将是 DRY，但我们的语言/翻译问题与我们在这里的开发人员问题大不相同（遗憾的是）。

从好的方面来说，我们可以更清楚地了解我们正在描述什么样的内容，并在我们的关键结构和工具中反映出来——对我来说，这就是前进的方向！:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T18:38:10.430

我刚刚发布了一个名为 i18n-recursive-lookup 的 gem，通过引入特殊的嵌入标记 ${}，它允许定义包含对其他定义的嵌入引用

[https://github.com/annkissam/i18n-recursive-lookup](https://github.com/annkissam/i18n-recursive-lookup)

使用它，您可以将示例重构为：

```
dictionary:
  email: Email
  name: Name
  password: Password
  confirmation: Confirmation

activerecord:
  attributes:
    user:
      email: ${dictionary.email}
      name: ${dictionary.name}
      password: ${dictionary.password}
      password_confirmation: ${dictionary.confirmation}
  models:
    user: User
users:
  fields:  
    email: ${dictionary.email}
    name: ${dictionary.name}
    password: ${dictionary.password}
    confirmation: ${dictionary.confirmation}
sessions:
  new:
    email: ${dictionary.email}
    password: ${dictionary.password} 
```

好消息是，一旦编译，翻译就会被写回翻译存储，这样所有的插值/递归查找都会发生一次。

我知道这可能无法回答有关干燥翻译的“正确”方法是什么的更多哲学问题，但我认为这是使用 & 标签参考 YML hack 的更好选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-19T00:18:14.213

改进重构 YAML 文件，特别是对于那些有许多模型的人：

```
ru:
  dictionary:
    name: &name "Имя"
    title_ru: &title_ru "Заголовок (ru)"
    title_en: &title_en "Заголовок (en)"
    content_ru: &content_ru "Содержание (ru)"
    content_en: &content_en "Содержание (en)"
    role: &role "Роль"
    created_at: &created_at "Создано в"
    updated_at: &updated_at "Обновлено в"
    published: &published "Опубликовано"

    nomination: &nomination
      name: *name
      title_ru: *title_ru
      title_en: *title_en

    post: &post
      content_ru: *content_ru
      content_en: *content_en
      published: *published

    dates: &dates
      created_at: *created_at
      updated_at: *updated_at

  activerecord:
    attributes:
      article:
        <<: *nomination
        <<: *post
        <<: *dates

      user:
        <<: *dates
        role: *role
        email: "Электропочта" 
```

有用的[链接](https://stackoverflow.com/questions/4150782/using-yaml-with-variables)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-12T13:57:07.400

我刚刚发布了一个名为 dry_i18n 的 gem：[https ://rubygems.org/gems/dry_i18n](https://rubygems.org/gems/dry_i18n)

我创建这个 gem 是为了解决您所要求的问题。有了这个 gem，你甚至可以重用带有插值的键并嵌套它们。

我希望它是有用的。

# javascript - 这个主干语句中的“这个”是什么意思？

> ID：11097574
> 
> 赞同：0
> 
> 时间：2012-06-19T08:50:53.720
> 
> 标签：javascript, backbone.js

> **可能重复：**
> [JavaScript“this”关键字](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

我现在正在通过检查 todos 应用程序的代码作为示例来学习主干。我对代码很困惑，`this.model.bind('change', this.render);`这两个在这个语句中是什么意思？有人给我一个解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:50:18.890

通常，该代码位于`initialize`视图组件的函数内部，`this`视图本身也是如此。

# joomla - jUpgrade 在下载 Joomla 2.5 时卡住了

> ID：11097576
> 
> 赞同：4
> 
> 时间：2012-06-19T08:51:02.817
> 
> 标签：joomla

我将 Joomla 1.0 迁移到 Joomla 1.5.26 并安装 jUpgrade 组件以迁移到 joomla 2.5.4，但 jUpgrade 在下载 Joomla 2.5 时卡住了。

问题是什么...？ ![在此处输入图像描述](../Images/4724abbe7fcf3b730a9684ae1416a78d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:37:02.523

jUpgrade 因存在各种故障和问题而臭名昭著。

解决下载问题的一种简单方法是直接从 Joomla 的站点下载您想要的 Joomla 版本，将其解压到您即将迁移的站点的 jUpgrade 目标文件夹中，然后更改 jUpgrade 的设置以跳过下载过程：

![在此处输入图像描述](../Images/23a5c420977d975770264498b11a0990.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:18:07.500

不是组件故障，您可能暂时失去了互联网连接，或者存在服务器故障。再试一次，它很可能会奏效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T06:58:54.457

这个问题我已经过期了。

首先，只需检查：1）您的互联网连接。2）不要从那里重新加载或导航。3) 可能需要网速。

现在如果你卡了很久，那么经常尝试它可能会立即成功。我有同样的情况来使用这个组件，经过一些尝试我成功了。

试试看可能对你有帮助。

# ruby-on-rails - capistrano 与 ubuntu ec2 实例在 rails 上部署 ruby

> ID：11097586
> 
> 赞同：1
> 
> 时间：2012-06-19T08:51:54.393
> 
> 标签：ruby-on-rails, ruby, amazon-ec2, capistrano

我正在尝试使用 Capistrano 在 Rails 应用程序上实现 ruby​​，我在暂存服务器中运行 apache rvm，在生产服务器中运行 nginx REE 版本。我也在使用 git。我一直在尝试集成 Capistrano，但我收到了这个错误

```
(Net::SSH::AuthenticationFailed: ubuntu) 
```

这是我的 deploy.rb 文件

```
set :application, "capify"

# The directory on the EC2 node that will be deployed to
set :deploy_to, "/home/ubuntu/apps/#{application}"

set :keep_releases, 3

# deploy with git
set :scm, :git
set :repository,  "git@github.com:username/capify.git"
set :git_shallow_clone, 1
set :branch, "master"
set :use_sudo, false

set :user, "ubuntu"
ssh_options[:keys] = ["/path/tp/key.pem"]
ssh_options[:forward_agent] = true
default_run_options[:pty] = true

# The address of the remote host on EC2 (the Public DNS address)
set :location, "ip"

# setup some Capistrano roles
role :app, location
role :web, location
role :db,  location, :primary => true

after 'deploy:update_code', 'deploy:symlink_db'

namespace :deploy do

desc "Restart Application"
task :restart, :roles => :app do
run "touch #{deploy_to}/#{shared_dir}/tmp/restart.txt"
end

desc "Symlinks the database.yml"
task :symlink_db, :roles => :app do
run "ln -nfs #{deploy_to}/shared/config/database.yml #{release_path}/config/database.yml"
end

end 
```

无法确定确切的问题和整合 capistrano 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:42:51.767

看起来很简单：Capistrano 在部署时不会提示输入密码，而是希望您的 SSH 密钥在目标服务器上对您进行身份验证。

因此，您尝试部署为（ubuntu）的用户似乎无法通过身份验证。

尝试将您的内容添加`~/.ssh/id_rsa.pub`到服务器：`/home/ubuntu/.ssh/authorized_keys`文件。

如果您可以在不提示输入密码的情况下通过 ssh 进入您的机器，那么它正在工作

**更新**：在您的情况下，您正在使用`ssh_options[:keys]`定义另一个用于 SSH 授权的密钥。您可以删除该指令以默认为您的标准 ssh 密钥（在 ~/.ssh/id_rsa.pub 中的那个），或者将您指定的其他密钥添加到服务器上的 authorized_keys 文件中。

我建议您在没有`ssh_options[:keys]`选项的情况下尝试它:)

# php - strtotime 下午时间反映 0

> ID：11097590
> 
> 赞同：0
> 
> 时间：2012-06-19T08:52:28.883
> 
> 标签：php, strtotime

我有一个问题，strtotime 将我的下午时间返回为 0。

这是我的代码：

```
date_default_timezone_set('Africa/Johannesburg');
$from = strtotime($_GET['meeting_date'] . ' ' . $_GET['meeting_start'] . ':00 ' . date('A',$_GET['meeting_start']));
$to = strtotime($_GET['meeting_date'] . ' ' . $_GET['meeting_end'] . ':00 ' . date('A',$_GET['meeting_end'])); 
```

基本上，用户选择日期（2012-06-19）并输入开始时间（过滤后，14:00）和结束时间（过滤后，15:00）。

然后这部分将给定的字符串转换为秒。

它适用于我在 13:00 之前输入的任何内容，但是当我在 12:59 之后输入任何内容时返回 0

一些测试用例：

```
User Input:
  Date: 2012-06-19
  Start: 10:00
  End: 11:50
Result: 
  start: 1340092800
  end: 1340099400

User Input:
  Date: 2012-06-19
  Start: 11:50
  End: 13:00
Result:
  start: 1340099400
  end: 0 
```

这可能又是一个愚蠢的错误，但我们将不胜感激。为什么返回0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:03:04.623

您将 12 小时制和 24 小时制混合在一起。AM 和 PM 后缀的日期格式`'A'`表明正在使用 12 小时格式，因此基本上您不能处理大于 12 的小时数。

# java - 将数组php转换为java

> ID：11097592
> 
> 赞同：0
> 
> 时间：2012-06-19T08:52:36.317
> 
> 标签：java, php, arrays, multidimensional-array

我正在开发一个包含 java 文件和 php 文件的应用程序。java 文件调用 php 文件，这些文件在 ddbb 中执行查询并将结果作为数组 php 返回，但将其打印在屏幕上。我在java中把它当作一个字符串，我必须将它转换为数组或集合，但我不知道该怎么做。

php 打印的结果示例如下：

```
Array
(
[0] => Array
    (
        [id] => 1
        [0] => 1
        [name] => pepe
        [1] => pepe
    )

[1] => Array
    (
        [id] => 2
        [0] => 2
        [name] => antoñito
        [1] => antoñito
    )

[2] => Array
    (
        [id] => 3
        [0] => 3
        [name] => loló
        [1] => loló
    )

[3] => Array
    (
        [id] => 4
        [0] => 4
        [name] => ñoño
        [1] => ñoño
    )

[4] => Array
    (
        [id] => 5
        [0] => 5
        [name] => Antoñito
        [1] => Antoñito
    )

[5] => Array
    (
        [id] => 7
        [0] => 7
        [name] => José
        [1] => José
    )

) 
```

如果我使用 json_encode($the_array) 这是结果：

```
[{"id":"1","0":"1","name":"pepe","1":"pepe"},    {"id":"2","0":"2","name":"anto\u00f1ito","1":"anto\u00f1ito"},{"id":"3","0":"3","name":"lol\u00f3","1":"lol\u00f3"},{"id":"4","0":"4","name":"\u00f1o\u00f1o","1":"\u00f1o\u00f1o"},{"id":"5","0":"5","name":"Anto\u00f1ito","1":"Anto\u00f1ito"},{"id":"7","0":"7","name":"Jos\u00e9","1":"Jos\u00e9"}] 
```

谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T08:58:18.780

您应该为您的数据选择一种序列化方法。例如 XML、[Protocol Buffers](http://code.google.com/p/protobuf/)或 JSON。

我个人建议您使用 JSON，因为它轻量级，即使对人类来说也易于阅读，并且有多种库可供两种语言使用。

### PHP端的编码

```
$encoded = json_encode($data); 
```

### 使用 Jackson 在 Java 端解码

```
final ObjectMapper objectMapper = new ObjectMapper();
// the better way is to create a custom class with the correct format
final Map<?, ?> decoded = objectMapper.readValue(encoded, Map.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:57:13.283

使用一些更标准化的传输格式，例如 JSON。PHP 端必须使用对数组进行编码，`json_encode()`而 Java 端需要一些库来对其进行解码（请参阅相关[问题](https://stackoverflow.com/questions/1927885/decode-json-data-in-java)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:55:34.357

我认为这可能很有用[http://publib.boulder.ibm.com/infocenter/wsmashin/v1r1/index.jsp?topic=/com.ibm.websphere.sMash.doc/using/zero.php/TypeConversion。 html](http://publib.boulder.ibm.com/infocenter/wsmashin/v1r1/index.jsp?topic=/com.ibm.websphere.sMash.doc/using/zero.php/TypeConversion.html)

# javascript - Mozilla中的Java脚本未定义错误？

> ID：11097593
> 
> 赞同：-2
> 
> 时间：2012-06-19T08:52:38.480
> 
> 标签：javascript, asp.net

我使用以下 Javascript 函数。它不起作用。它会在下面的行中给出**未定义的错误，**`c= row.cells[0].innerText.strip();`

```
function a()
{

    var table = getServerObject("b");
    var row,c;
    for (var i = 2; i < table.rows.length - 1; i++)
    {
        row = table.rows[i]; 
        if(row.cells.length==1)continue;
        c= row.cells[0].innerText.strip(); 
        if(c==0)
       {
        //Something
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:11:48.643

“继续”是问题所在。见[http://www.w3schools.com/js/js_break.asp](http://www.w3schools.com/js/js_break.asp)

```
if(row.cells.length==1)continue; 
```

代码应该是这样的

```
if(row.cells.length==1) {
    c= row.cells[0].innerText.strip(); 
} 
```

# iphone - 连接两个 NSdate 字符串值，如下所示：

> ID：11097598
> 
> 赞同：-4
> 
> 时间：2012-06-19T08:52:59.963
> 
> 标签：iphone, objective-c, ios, arrays, object

> **可能重复：**
> [连接两个 NSDate 字符串值](https://stackoverflow.com/questions/11097260/concatenate-two-nsdate-string-values)

只是混淆了连接两个 NSDate 值（如`11-jan-2012 and 15-jan-2012 as 11-15-jan-2012`. 也`11-jan-2012 and 15-jul-2012`作为`11-jan-15-jul-2012`。

> 2012 年 1 月 11 日-2012 年 1 月 15 日为 2012 年 1 月 11-15 日。2012 年 1 月 11 日-2012 年 7 月 11 日为 2012 年 1 月 11 日-7 月 11 日和 2012 年 1 月 11 日-2014 年 7 月 11 日为 2012 年 1 月 11 日-2014 年 7 月 11 日。

它应该自动符合

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:01:44.400

\你必须检查你的要求。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MMM-yyyy"];
NSDate *date1 = [formatter dateFromString:@"11-jan-2012"];
NSDate *date2 = [formatter dateFromString:@"15-jan-2012"];

NSDateComponents *dateComponents;
dateComponents = [[NSCalendar currentCalendar] components:NSYearCalendarUnit |NSDayCalendarUnit | NSMonthCalendarUnit  
                                                 fromDate:date1];
int day1 = [dateComponents day];    
int month1 = [dateComponents month];
int year1 = [dateComponents year];

dateComponents = [[NSCalendar currentCalendar] components:NSYearCalendarUnit |NSDayCalendarUnit | NSMonthCalendarUnit  
                                                 fromDate:date2];
int day2 = [dateComponents day];    
int month2 = [dateComponents month];
int year2 = [dateComponents year];

NSString *str = [NSString stringWithFormat:@"%d - %d %d %d", day1, day2, month1, year1]; 
```

您必须根据您的要求检查月份和年份。

# objective-c - NSUrl(Audio URL) 转换成 NString

> ID：11097600
> 
> 赞同：0
> 
> 时间：2012-06-19T08:53:08.577
> 
> 标签：objective-c, xcode, nsurl

我的代码就是这样..

```
 NSStringEncoding encoding;
    NSError* error;
    NSString* myString = [NSString stringWithContentsOfFile:recoredAudioUrl usedEncoding:&encoding error:&error];
    NSLog(@"recoredAudioUrl %@",myString) 
```

它打印`Null`并且我也尝试 `[recoredAudioUrl absoluteString]`但是当我将它转换为`NSData`然后它`data.length`也打印 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:22:45.243

您无法将音频文件读取为`NSString`.

> 错误域=NSCocoaErrorDomain 代码=264 UserInfo=0x100115d70“文件名.mp3”无法打开，因为无法确定其内容的文本编码。”

使用`NSData`.

```
NSData *postData = [NSData dataWithContentsOfURL:url]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:04:15.990

首先检查您的录制 URL。是NULL吗？如果没有，则使用以下方法初始化您的字符串：

```
NSString *str = [[NSString alloc]initWithContentsOfURL:recordingUrl encoding:NSUTF8StringEncoding error:&error]; 
```

# java - 在 Eclipse 之外运行程序时出现 NoSuchMethodError (org.slf4j.LoggerFactory.getLogger)

> ID：11097605
> 
> 赞同：0
> 
> 时间：2012-06-19T08:53:29.210
> 
> 标签：java, command-line-interface, slf4j, nosuchmethoderror

每次我尝试从命令行运行使用 SLFj4 记录器 (LoggerFactory.getLogger(myClass.class)) 的程序时，我都会得到一个`NoSuchMethodError`.

```
Exception in thread "main" java.lang.NoSuchMethodError:
  org.slf4j.LoggerFactory.getLogger(Ljava/lang/Class;)Lorg/slf4j/Logger; 
```

有趣的是，当我在 Eclipse 中运行相同的程序时，我没有收到此错误。编译代码时没有错误。并且该方法`getLogger`明确存在于类路径中对应的类文件中。

我尝试了最新版本的 SLF4j API 和绑定，但错误仍然存​​在。我已将所有相关类添加到类路径中（并且没有 ClassNotFoundExceptions）。

我可以尝试做什么？您需要什么进一步的信息？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-03T07:33:30.200

您必须使用包括 SLF4j 的两个依赖项，尝试从其中一个依赖项中排除，然后重试。

还要确保您使用相同的版本。

# java - Java：反转哈希表 keySet 上的迭代顺序。如何？

> ID：11097612
> 
> 赞同：3
> 
> 时间：2012-06-19T08:54:23.880
> 
> 标签：java, hashtable

我在一个哈希表上迭代，连接字符串值：

```
 Iterator<String> it = jsonHashtableTemp.keySet().iterator();
    String json = new String("[");
    while (it.hasNext()) {
        String s = it.next();
        json = json.concat(jsonHashtableTemp.get(s).toString());
        if (it.hasNext()) {
             json = json.concat(", ");
        }
    }
    json = json.concat("]"); 
```

我会颠倒迭代的顺序。

是否可以？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T11:09:45.290

您也可以使用“Collections.reverse()”函数进行反转。[仿效弗朗西斯科·斯派思的](https://stackoverflow.com/users/1001027/java-mentor)例子，

```
List<String> list = new ArrayList<String>(jsonHashTableTemp.keySet());

Collections.reverse(list);

for (String value : list) {
   jsonHashTableTemp.get(value);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T08:59:03.847

您无法使用 来执行此操作[`Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)，但您可以将其添加到列表中并使用简单的 for 迭代它，如下所示：

```
List<String> l = new ArrayList<String>(jsonHashTableTemp.keySet());
for (int i = l.size()-1; i >= 0; i--) {
   jsonHashTableTemp.get(l.get(i));
} 
```

这是有道理的，以防万一您使用一些像`LinkedHashMap`已经评论过的有序哈希。

编辑：更正了`l.get(i)`内部循环

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:37:53.327

如果您使用的是 Hashtable 或 HashMap，则根本无法保证顺序。每次运行可能会有所不同。如果要分别按插入顺序或自然顺序进行迭代，则应使用[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)或[TreeMap 。](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)只有这样，您才能使用已经建议的方法，将 keySet() 复制到 ArrayList 中并向后迭代。

注意：您应该使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)而不是连接字符串。否则，您将看到大型数据集的性能下降。

```
StringBuilder jsonSB = new StringBuilder();
jsonSB.append("[");
List<String> l = new ArrayList<String>(jsonHashTableTemp.keySet());
for (int i = l.size() - 1; i >= 0; i--) {
    jsonSB.append(jsonHashTableTemp.get(l.get(i)));
    jsonSB.append(", ");
}
jsonSB.append("]");
String json = jsonSB.toString(); 
```

# smtp - 使用媒体殿堂的外部服务器发送邮件

> ID：11097613
> 
> 赞同：0
> 
> 时间：2012-06-19T08:54:29.833
> 
> 标签：smtp

我正在一个服务器托管在 media Temple (gs) 的站点上工作，而我的域托管在 Godaddy。我在 postmarkapp.com 上使用了一个外部服务器来只发送电子邮件。谁能帮我解决我需要在设置中进行哪些更改才能发送邮件。我尝试过的一些事情是：将我的用户名和密码更改为邮戳给我的 API 令牌禁用从我的 mt 服务器发送邮件尝试使用端口 25 和 2525

请帮忙..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:44:16.070

娜塔莉，

JP 来自 Postmark 团队。您是否为 Postmark 帐户启用了 SMTP？如果您查看 Virtual Server Rack 上的 Credentials 选项卡，您将看到启用 SMTP 的设置。如果已经启用，您会遇到什么错误？

如果您仍然遇到困难，您也可以发送电子邮件至 support@postmarkapp.com。

干杯! -J.P

# delphi - 即使 Windows 使用中等字体大小（125%），如何始终在 DFM 文件中保留 PixelsPerInch = 96

> ID：11097622
> 
> 赞同：11
> 
> 时间：2012-06-19T08:54:57.123
> 
> 标签：delphi, opentools

我将 Windows 7 字体大小设置为中等 (125%)。当我打开一个表单 Delphi XE2 IDE 时，DFM 文件中的 PixelsPerInch 总是自动设置为 120。在 Windows 中使用较小的字体大小 (100%) 会使 Delphi DFM 文件中的 PixelsPerInch 变为 96。

这在团队环境中编码时会产生问题。大多数团队成员使用较小的字体大小（100% 或 96 PPI）。存储在版本控制存储库中的所有 DFM 文件都使用 96 PPI。如果我将使用 120 PPI 的 DFM 文件提交到存储库，所有其他团队成员都会对我对 DFM 文件所做的更改感到困惑。所有与大小、宽度或高度相关的属性都将被更改。

使用 120 PPI Windows 环境时，是否可以强制 Delphi IDE 以 96 PPI 保存 DFM？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:34:23.573

我编写了一个 Delphi IDE 开放工具来调整 Delphi IDE 中的表单设计器。该工具试图让用户以存储的 PixelPerInch 的固定比例设计表单，而不管 Windows 字体大小如何。它会阻止表单设计器将表单缩放为 Windows 字体大小。保存表单更改时应保持原始 PixelsPerInch 属性。

该代码已提交至 Embarcadero Code Central: [28922](http://cc.embarcadero.com/item/28922)。

# .net - 在 Windows 7 上的 VS2003 中调试时注册表项访问被拒绝

> ID：11097623
> 
> 赞同：0
> 
> 时间：2012-06-19T08:55:01.077
> 
> 标签：.net, windows, visual-studio, iis, windows-7

我必须支持多年前用**.NET 1.1编写的应用程序。**我继承了这个应用程序。**不，我还不能升级到更高版本的 .NET，是的，我知道 Windows 7 不再支持**它。这是一场巨大的斗争，当我解决了一个问题时，下一个问题就会弹出向上。

经过长时间的努力，我通过这篇文章设法让它运行起来：

[http://blogs.iis.net/brian-murphy-booth/archive/2007/03/09/how-to-setup-asp-net-v1-1-visual-studio-net-2003-projects-on- iis7-vista.aspx](http://blogs.iis.net/brian-murphy-booth/archive/2007/03/09/how-to-setup-asp-net-v1-1-visual-studio-net-2003-projects-on-iis7-vista.aspx)

我也让调试工作。我以管理员身份运行 Visual Studio 2003。

在应用程序中，它从注册表中获取数据库的连接字符串。我仍在本地调试/运行它。但是我在尝试读取注册表项时访问被拒绝。我查看了注册表，并且密钥确实存在。

它在这里失败了，我不确定问题是什么：

```
RegistryKey regKey = Microsoft.Win32.Registry.LocalMachine.CreateSubKey(Constants.DBRegKey); 
```

Constants.DBRegKey 有这个值：`"Software\\MyCompany\\MyProject\\Database"`

这是另一个 Visual Studio 2003 和 Windows 7 问题吗？还是所有 Visual Studio 版本都会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:21:18.257

我在 web.config 中添加了以下内容：

```
<identity impersonate="true" userName="username" password="password"/> 
```

这有效，我可以读取注册表项的值。不知道为什么这有效，但它有效。希望这是我必须支持的最后一个项目`.NET 1.1`。

尽管我可能会将其标记为答案，但我仍然想在这里发表更多意见。

# c - 将制表符转换为空格时出现分段错误

> ID：11097626
> 
> 赞同：0
> 
> 时间：2012-06-19T08:55:17.917
> 
> 标签：c

我刚买了K&R的《The C programming language》，并尽我所能做其中的练习（如果你知道这本书，那就是练习1.20）。

该程序旨在从键盘获取输入，并将制表符转换为由 TABLEENGTH 指定的适当数量的空格。

代码如下。当我尝试运行它时，出现分段错误。

```
detab.c:

#include <stdio.h>
#define TABLENGTH 8
#define MAXLINE 1000

int getline(char line[], int len);

int main()
{
    char line[MAXLINE];
    int length;

    while((length = getline(line, MAXLINE)) > 0) {
        printf("%s");
    }

}

int getline(char line[], int len)
{
  int i = 0;
  int c;

  for(i = 0; i < (MAXLINE - 1) &&
   ((c = getchar()) != EOF && c != '\n'); i++) {
   // if c is tab, replace with spaces
    if(c == '\t') {
        while((TABLENGTH - (i % TABLENGTH)) != 0) {
            line[i] = ' ';
            i++;
        }
        i--;
        continue;
    }
   }
   line[i] = c;
  }
  if(c == '\n') {
   line[i] = c;
   i++;
  }

  line[i] = '\0';
  return i;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T08:56:29.373

经典初学者错误 1A：`getchar()`返回`int`，因为`EOF`不适合`char`.

我也认为你有一个索引问题，因为如果你找到一个标签，你会增加`i`空格插入循环，然后`for`循环会`i`再次增加，在字符串中留下奇怪的东西。这可能会导致缓冲区溢出和您看到的崩溃。

请注意，空格插入循环不会检查`i`.`MAXLINE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:04:50.503

呼吁`printf`

```
printf("%s"); 
```

是段错误的可能原因。它将尝试将堆栈上的一些任意数据解释为指向以 0 结尾的`char`数组的指针。

段错误的某种方式是在 a 的情况下循环`'\t'`：

```
if(c == '\t') {
    while((TABLENGTH - (i % TABLENGTH)) != 0) {
        line[i] = ' ';
        i++;
    }
    i--;
    continue;
} 
```

因为`i >= 0`and `TABLENGTH > 0`，你总是有`0 <= (i % TABLENGTH) < TABLENGTH`，所以每当你遇到一个选项卡时，你会进入一个无限循环，将空格添加到`line`分配的空间之外，当它尝试将空间写入进程内存之外或读取时迟早会导致段错误 -只是记忆的一部分。一个简单但不是很优雅的修复方法是将循环更改为

```
if (c == '\t') {
    do {
        line[i] = ' ';
        ++i;
    }while(((TABLENGTH - (i % TABLENGTH)) % TABLENGTH) != 0);
    --i;
    continue;
} 
```

一个不同的解决方法可能是使用一个单独的计数器或一个`switch`带有故障的计数器。

# linux - 列出从用户空间到内核空间的 ioctl 调用

> ID：11097628
> 
> 赞同：6
> 
> 时间：2012-06-19T08:55:22.380
> 
> 标签：linux, linux-kernel, ioctl

可能是我的问题听起来更天真。

但我想知道是否可以列出从用户空间到 Linux 内核空间的 ioctl 调用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T15:11:25.150

使用[LTTng](http://lttng.org/)。如果您使用的是 Ubuntu、Fedora、Arch Linux、Debian 或 openSUSE，这是一个现代 Linux 内核跟踪器（也适用于用户空间），可以在几秒钟内安装（作为软件包提供）。否则，[获取 tarball](http://lttng.org/download)并遵循安装程序仍然很容易。

## 追踪

您创建这样的跟踪：

```
$ sudo lttng create mySession
Session mySession created.
Traces will be written in /home/user/lttng-traces/mySession-20120619-103600
$ sudo lttng enable-event -k -a --syscall
All kernel system calls are enabled in channel channel0
$ sudo lttng start
Tracing started for session mySession 
```

然后做你正常的事情。`ioctl`LTTng 使用有趣的参数记录/捕获所有系统调用，包括。正在将跟踪写入`/home/user/lttng-traces/mySession-20120619-103600`目录。完成录制后，请执行以下操作：

```
$ sudo lttng stop
Tracing stopped for session mySession
$ sudo lttng destroy
Session mySession destroyed at /home/ephipro 
```

虽然`destroy`在这里听起来不太好，但它实际上并没有*破坏*跟踪文件；它只是刷新所有内容并释放文件的任何链接。

`sudo`因为您正在跟踪内核事件，所以到处都需要。出于明显的安全原因，您不希望任何用户看到所有系统调用及其参数。

## 查看跟踪

现在有两个主要查看器可用。**Babeltrace**将为您提供所有捕获事件的文本输出。您应该能够使用`apt-get`( `babeltrace`) 获取它，否则只需获取[最新的 tarball](http://www.efficios.com/files/babeltrace/?C=M;O=D)即可。然后只需使用从巨大的转储 Babeltrace 输出`grep`中提取调用：`ioctl`

```
$ sudo babeltrace /home/user/lttng-traces/mySession-20120619-103600 | grep ioctl
[10:36:41.795425690] (+0.000001403) sys_ioctl: { 1 }, { fd = 18, cmd = 62981, arg = 0 }
[10:36:41.795435996] (+0.000000610) sys_ioctl: { 1 }, { fd = 18, cmd = 2148070920, arg = 139928632507464 }
[10:36:41.795573431] (+0.000008840) sys_ioctl: { 1 }, { fd = 18, cmd = 62982, arg = 4096 }
[10:36:41.795591089] (+0.000000854) sys_ioctl: { 1 }, { fd = 18, cmd = 62981, arg = 38520960 }
[10:36:41.795595956] (+0.000000434) sys_ioctl: { 1 }, { fd = 18, cmd = 2148070920, arg = 139928632507464 }
[10:36:41.796125261] (+0.000006110) sys_ioctl: { 1 }, { fd = 18, cmd = 62982, arg = 0 }
[10:36:41.796185722] (+0.000000947) sys_ioctl: { 1 }, { fd = 18, cmd = 62981, arg = 38530304 }
[10:36:41.796192688] (+0.000000628) sys_ioctl: { 1 }, { fd = 18, cmd = 2148070920, arg = 139928632507464 }
[10:36:41.797155511] (+0.000003280) sys_ioctl: { 0 }, { fd = 18, cmd = 62982, arg = 0 }
[10:36:41.797202362] (+0.000001995) sys_ioctl: { 0 }, { fd = 18, cmd = 62981, arg = 38529760 }
... 
```

您在这里看到的是事件发生的时间、事件名称及其所有参数和值。

Eclipse 还在 Linux 工具插件项目中提供了一个完整的 LTTng 查看器。简单的步骤是：

1.  转到[eclipse.org 的下载页面](http://www.eclipse.org/downloads/)
2.  Into *Developer Builds*（直到几天后 Eclipse Juno 发布），获取*Eclipse IDE for C/C++ Developers*
3.  解压并启动

从 Eclipse Juno 开始，Linux 工具被嵌入到 C/C++ 开发人员的 Eclipse IDE 中。

然后您可以创建一个新的**跟踪项目**并导入跟踪。如果您打开**Tracing**透视图，您将可以访问有用的视图来可视化事件。**这是直方图**和**事件**视图的示例：

![Eclipse LTTng 查看器](../Images/8d57ef821f2132c241bcac2762991844.png)

在这里，我使用事件视图只保留`ioctl`调用，您可以清楚地看到内容和时间戳与 Babeltrace 输出相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:05:34.340

你试过了`strace`吗？它列出了所有系统调用。

# java - 常量的内部接口

> ID：11097629
> 
> 赞同：0
> 
> 时间：2012-06-19T08:55:28.967
> 
> 标签：java, interface

我听说实现常量接口是一种反模式，因为这样的接口为类提供了实现细节（这不是接口的目的）。但是在一个类中有一个常量的内部接口呢？这是一个不好的做法吗？

**编辑：** 我的意思是我不想实现它，只是为了使用它的常量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:20:44.480

接口的唯一目的是实现。因此，使用接口对常量进行分组仍然是不好的做法，即使您没有实现它。只需使用一个类来放置常量：

```
public final class SomeClass {
    private SomeClass() {
    }

    public static final int FOO = 6;
    public static final String BAR = "bar";
} 
```

如果这些常量与给定的类紧密耦合，则将它们直接放在该类中。如果它们对多个类是通用的，请将它们放在一个外部类中，如上所示。

# android - 关于保存Activity状态

> ID：11097635
> 
> 赞同：1
> 
> 时间：2012-06-19T08:55:38.137
> 
> 标签：android, android-asynctask, android-progressbar

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Init();
    backthread tr=new backthread();
    tr.execute(0,0,0);
} 
```

backthread是一个实现AsyncTask的类，当程序运行在MainActivity时，progressbar的值会从0增加到100（在backthread中改变它的值），但是当我进入其他activity并返回时，progressbar会从0重新启动到100，当我进入其他活动并返回时，我希望进度条的值继续增加；我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:06:13.483

我认为您可以在 backthread 类的 currentUptae 中保留一个 int 变量，并在 onProgressUpdaete 中更新此变量。

为 OnRestart 或 onStart 中的 currentUptae 变量创建 getter 和 setter 并更新进度条......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:06:48.223

在 doInBackground() 中，您应该使用 publishProgress(progress++) 来更新进度结果和

```
 @Override
    protected void onProgressUpdate(Integer... values) {
      super.onProgressUpdate(values);
      tvInfo.setText("Downloaded " + values[0] + " files"); // progress bar 
    } 
```

# javascript - t.tBodies(0).appendChild(r) 在 Firefox 中不起作用

> ID：11097637
> 
> 赞同：1
> 
> 时间：2012-06-19T08:55:41.627
> 
> 标签：javascript, asp.net

`t.tBodies(0).appendChild(r);`不能在 Firefox 中工作。这是 javascript 代码，用于创建动态表格元素。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:57:02.723

尝试更换：

```
t.tBodies(0).appendChild(r); 
```

和：

```
t.tBodies[0].appendChild(r); 
```

它有效吗？

# javascript - 关于backbone.js的几个问题

> ID：11097638
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:55:45.863
> 
> 标签：javascript, backbone.js

[https://gist.github.com/1026406](https://gist.github.com/1026406)

我正在浏览这段代码，我有几个问题。有人可以解释一下吗。

```
window.LoginView = new LoginView({model: new Credentials()}); 
```

1.  谁能解释我上面的代码做了什么...我的 `LoginView`实例的模型是否为`Credentials`. 如果是这样，我对`Credential`.

    var Credentials = Backbone.Model.extend({});

2.  我如何调用我的 REST 服务。我不想使用`form action`，而是可以`authenticate service`从我的 JS 代码中调用它，这会返回一些`flag`。在提交我的 JS 时会收集用户名和密码并将其发送到`REST Service`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:11:21.757

查看提供的要点，凭据是在登录方法中设置的。所以 LoginView 提供了一个新的 Credentials 模型。在 Login 方法中，用户名和密码被设置为 Credentials Model。现在，当您在设置凭据后调用 this.model.save() 时，模型将被发送到服务器。然后，您可以在服务器上从您的凭据模型中检索用户名和密码。我认为有更好的方法来验证用户。REST[身份验证](https://stackoverflow.com/questions/11071512/backbone-js-how-to-track-logged-in-user-status-and-general-advice-on-app-structu/11085953#11085953)的基本介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:23:49.843

1.  使用`LoginView`空`Credentials`模型进行初始化，该模型将在输入更改时更新（nb. the `this.username.change(..)`and `this.password.change(...)`binds）。

2.  调用 REST 服务的 Backbone 方法是像这样设置模型的 url 属性，`url: "path/to/the/rest/service/tied/to/my/model"`或者通过将 url 声明为返回所需路径字符串的函数，像这样 `url: function() { ... return pathToMyRestService; }`。然后可以使用模型的[fetch](http://backbonejs.org/#Model-fetch)和[save](http://backbonejs.org/#Model-save)方法调用 REST 服务。

另一种方法是使用 jQuery ajax 方法`ajax`等`post`。

# c# - 检测连接的黑莓

> ID：11097641
> 
> 赞同：2
> 
> 时间：2012-06-19T08:55:51.900
> 
> 标签：c#, blackberry, usb, detect, pid

我正在尝试在 C# .NET 中以编程方式检测项目连接的黑莓设备的驱动器号。到目前为止，我已经通过在驱动器内部查看设备根目录下名为 blackberry 的文件夹来实现这一点，但这是一个肮脏且不太优雅的解决方案。

我尝试提取 USB 设备的 PID 和 VID，但似乎它不适用于每个黑莓，因为有这么多。

我没有主意了。有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:31:29.643

您不能仅根据供应商 ID 进行检测吗？所有黑莓设备（理论上）都应该使用 Research In Motion 供应商 ID。根据[http://www.linux-usb.org/usb.ids](http://www.linux-usb.org/usb.ids)这些应该是：

```
0fca  Research In Motion, Ltd.
    0001  Blackberry Handheld
    0004  Blackberry Handheld
    0006  Blackberry Pearl
    0008  Blackberry Pearl
    8001  Blackberry Handheld
    8004  Blackberry Handheld
    8007  Blackberry Handheld 
```

我刚刚连接了我的 Bold 9900，它确实使用了 0fca 的 VID 和 8004 的设备 ID。

我建议使用这种方法，似乎只有少数设备 ID（或者至少是 linux 支持的）。您可以通过 VID 识别以针对所有黑莓，或通过 PID 过滤以根据需要针对单个修订/模型。

# ios - 如何将 Buffer 数据转换为 NSdata

> ID：11097642
> 
> 赞同：0
> 
> 时间：2012-06-19T08:55:53.173
> 
> 标签：ios, type-conversion, nsdata, openal

在我`OpenAl`用来修剪音频歌曲的应用程序中，现在如何转换`alSourcePlay(source);`为`NSData`？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:53:24.943

我们可以使用 ExtAudioFileWrite 将缓冲区数据写入 NSDocumentDirectory 然后我们将获得缓冲区的路径，我们可以使用该路径转换为 ​​Nsdata

```
err = ExtAudioFileWrite(destinationFile, StartingFrameOffset, &theDataBuffer); 
```

# apache - 访问日志 apache 和 htaccess

> ID：11097646
> 
> 赞同：7
> 
> 时间：2012-06-19T08:56:13.690
> 
> 标签：apache, .htaccess

有什么方法可以配置 htaccess 以写入访问日志文件，该文件已由 apache 在语法中处理

```
 LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined 
```

需要向自定义日志添加更多变量，但无权访问 apache，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:33:41.957

不。

文档**清楚地**表明该`LogFormat`指令**只能**在服务器配置和虚拟主机上下文中使用。这是安全限制，否则如果您的网站被黑客入侵（例如，攻击者可以创建或修改您的 .htaccess），他将能够看到对您网站的所有请求（这里的重点是保护您的访问者，即使您不关心这方面）。

[http://httpd.apache.org/docs/current/mod/mod_log_config.html#logformat](http://httpd.apache.org/docs/current/mod/mod_log_config.html#logformat)

# php - 如何使用函数返回的值？

> ID：11097647
> 
> 赞同：-2
> 
> 时间：2012-06-19T08:56:17.057
> 
> 标签：php, oop, return-value

我想`$bank`在`ShowDistrict`函数中使用来选择行

```
$sql = "SELECT DISTINCT `district` FROM `ctable` WHERE state='$_POST[id]' AND bank='$bank' "; 
```

但它不起作用......有什么方法可以做到这一点？...提前致谢。

```
 class SelectList
 {
   protected $conn;

    public function __construct()
    {
        $this->DbConnect();
    }

    protected function DbConnect()
    {
        include "db_config.php";
        $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
        mysql_select_db($db,$this->conn) OR die("can not select the database $db");
        return TRUE;
    }

    public function ShowBank()
    {
        $sql = "SELECT DISTINCT `bank` FROM `ctable` WHERE 1 LIMIT 0, 30 ";
        $res = mysql_query($sql,$this->conn);
        $bank = '<option value="0">choose...</option>';
        while($row = mysql_fetch_array($res))
        {
            $bank .= '<option value="' . $row['bank'] . '">' . $row['bank'] . '</option>';
        }
        return $bank;
    }

    public function ShowState()
    {
        $sql = "SELECT DISTINCT `state` FROM `ctable` WHERE bank='$_POST[id]'";
        $res = mysql_query($sql,$this->conn);
        $state = '<option value="0">choose...</option>';
        while($row = mysql_fetch_array($res))
        {
            $state .= '<option value="' . $row['state'] . '">' . $row['state'] . '</option>';
        }
        return $state;
    }

    public function ShowDistrict()
    {
        $sql = "SELECT DISTINCT `district` FROM `ctable` WHERE state='$_POST[id]'";
        $res = mysql_query($sql,$this->conn);
        $district = '<option value="0">choose...</option>';
        while($row = mysql_fetch_array($res))
        {
            $district .= '<option value="' . $row['district'] . '">' . $row['district'] . '</option>';
        }
        return $district;
    }

          public function ShowBranch()
    {
        $sql = "SELECT DISTINCT `bname` FROM `ctable` WHERE district='$_POST[id]'";
        $res = mysql_query($sql,$this->conn);
        $bname = '<option value="0">choose...</option>';
        while($row = mysql_fetch_array($res))
        {
            $bname .= '<option value="' . $row['bname'] . '">' . $row['bname'] . '</option>';
        }
        return $bname;
    }

}

$opt = new SelectList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:04:40.670

正如 deceze 在评论中所说，这样做：

```
$bank = $this->showBank(); 
```

该`showBank()`函数*返回*`$bank`值。因此，您然后将函数的返回值传递给`$bank`可以使用的变量。

`$this`允许您选择类中的函数/变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:07:08.430

在您的代码中 $bank 是一个字符串，每次它与另一个字符串连接时都在 while 循环中。

$bank 包含一个字符串，如

```
 "<option value='bank1'>bank1</option><option value='bank2'>bank2</option>..."; 
```

因此，如果您返回该字符串，它将包含不必要的数据

```
$sql = "SELECT DISTINCT `district` FROM `ctable` WHERE state='$_POST[id]' AND bank='$bank' "; 
```

# c# - c#错误：输入的字符串格式不正确

> ID：11097648
> 
> 赞同：-1
> 
> 时间：2012-06-19T08:56:18.917
> 
> 标签：c#, datagridview

我有一个可编辑的数据网格视图。我正在获取一个单元格的值，然后计算另一个单元格的值。为此，我处理了 CellEndEdit 和 CellBeginEdit 事件。

```
quantity = 0, quantity1 = 0, quantity_wt1 = 0, quantity_wt = 0, ekundag = 0;
private void grdCaret_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    try
    {
        string value = grdCaret.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
        if (e.ColumnIndex == 1)
        {
            int val = int.Parse(value);
            quantity = val;
            ekundag = ekundag + quantity;
            tbTotDag_cr.Text = ekundag.ToString();
        }

        if (e.ColumnIndex == 2)
        {
            float val = float.Parse(value);
            total = val;
            ekunrakam = ekunrakam + total;
            tbTotPrice_cr.Text = ekunrakam.ToString();
        }
        grdCaret.Columns[3].ReadOnly = false;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
}

private void grdCaret_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
{
    rate = 0;
    quantity1 = quantity;
    total1 = total;
    rate = (total1 / quantity1);
    if (e.ColumnIndex == 3)
    {
        grdCaret.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = rate.ToString();
        grdCaret.Rows[e.RowIndex].Cells[e.ColumnIndex].ReadOnly = true;
        //  quantity = 0;
        //   total = 0;
    }
} 
```

在网格中，我有数量、总数和比率等列。我在这里收到上述错误：

```
if (e.ColumnIndex == 1)
{
    int val = int.Parse(value);
    quantity = val;
    ekundag = ekundag + quantity;
    tbTotDag_cr.Text = ekundag.ToString();
} 
```

当我输入数量并单击gridview中的总列时。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:02:47.150

AFAIK int.Parse() 函数可能会导致这种异常。

您是否尝试检查单元格中的值？单元格中是否有其他字符，而不仅仅是数字？例如空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:01:58.197

您在 Cell 中输入的值无法解析为 Integer，因此会失败 @int val = int.Parse(value);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:18:21.950

尝试使用`Text`而不是`ToString()`

```
string value = grdCaret.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.Text; 
```

代替

```
 string value = grdCaret.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:27:39.837

您的输入字符串“值”的格式无效，无法解析为整数。看看这个： http: [//www.codeproject.com/Articles/32885/Difference-Between-Int32-Parse-Convert-ToInt32-and](http://www.codeproject.com/Articles/32885/Difference-Between-Int32-Parse-Convert-ToInt32-and)

# c# - 防止 Windows 服务中计时器的 Elapsed 事件在一个周期完成之前触发的最佳方法

> ID：11097650
> 
> 赞同：2
> 
> 时间：2012-06-19T08:56:20.900
> 
> 标签：c#, multithreading, timer

我有一个 Windows 服务，它有一个从配置中读取的计时器间隔。

DipRedipServiceTimer_Elapsed 事件在服务首次运行 1000 毫秒后被调用。用这个方法编写的代码必须在运行这个定时器的下一个周期之前执行。但是，即使第一个周期尚未完成，我也看到 DipRedipServiceTimer_Elapsed 事件触发。这个结果是两个线程在同一段代码和一些非常可怕的问题上工作。我怎样才能防止这种情况发生？请建议。

```
partial class DIPREDIPServiceHost : ServiceBase
{
    #region Private Fields
    /// <summary>
    /// Timer for polling job pool on timely basis 
    /// </summary>
    private Timer DipRedipServiceTimer;                                   
    #endregion
    public DIPREDIPServiceHost()
    {
        InitializeComponent();
    }
    protected override void OnStart(string[] args)
    {                    
        DipRedipServiceTimer = new Timer();
        DipRedipServiceTimer.Enabled = true;            
        DipRedipServiceTimer.Interval = 1000;
        DipRedipServiceTimer.AutoReset = false; 
        DipRedipServiceTimer.Elapsed += new ElapsedEventHandler(DipRedipServiceTimer_Elapsed);                        
    }
    protected override void OnStop()
    {
        if (DipRedipServiceTimer != null)
        {
            DipRedipServiceTimer.Enabled = false;
            DipRedipServiceTimer.Stop();
            DipRedipServiceTimer = null;
        }
    }
    #region "Timer Elapsed Event"
    /// <summary>
    /// Handles the Elapsed event of the timer control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.Timers.ElapsedEventArgs"/> instance containing the event data.</param>
    void DipRedipServiceTimer_Elapsed(object sender, ElapsedEventArgs e)
    {
        //disable timers as at a given time only one thread should process dip/redip. 
        DipRedipServiceTimer.Stop();
        DipRedipServiceTimer.AutoReset = false;
        DipRedipServiceTimer.Enabled = false;
        try
        {
            IDipRedipController controller = new DipRedipController();
            try
            {
                DipRedipConfiguration config = controller.GetDipRedipConfiguration();
                // In case configuration has been retrieved, set timer defined.
                if (config != null)
                {
                    //set timer interval after reading from config file.
                    DipRedipServiceTimer.Interval = config.FileGenerationInterval * 60000;
                    controller.dipRedipConfiguration = config;
                    LoggingHelper.LogMessage(String.Format("Dip Service timer initialized at {0}", DateTime.UtcNow), Source.EDiscDIPREDIPService, LogCategory.Exception);
                    //Process Dip
                    bool dipSuccess = controller.ProcessDIP();
                    //Process Re-Dip
                    bool redipSuccess = controller.ProcessREDIP();
                    //Enable timers for next cycle
                    LoggingHelper.LogMessage(String.Format("Dip Service timer completed at {0}", DateTime.UtcNow), Source.EDiscDIPREDIPService, LogCategory.Exception);
                }
                // In case configuration is null, get the default timer defined in App.Config file.
                else
                {
                    int interval = 0;
                    int.TryParse(ConfigurationManager.AppSettings.Get("DefaultTimerValue"), out interval);
                    DipRedipServiceTimer.Interval = interval * 60000;
                    LoggingHelper.LogWarning("Configuration for Dip/Redip could not be fetched from database.", Source.FileImportService, LogCategory.Exception);
                }                    
                DipRedipServiceTimer.Enabled = true;
                DipRedipServiceTimer.Start(); 
            }
            catch (FaultException ex)
            {
                LoggingHelper.LogException("Exception Occured in DipRedipServiceTimer_Elapsed method of Dip/Redip Window Service", ex, Source.EDiscDIPREDIPService);                    
            }
        }
        catch (Exception ex)
        {
            LoggingHelper.LogException("Exception Occured in the DipRedip Service Host Window Service", ex, Source.EDiscDIPREDIPService);               
        }
     }
    #endregion                 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:19:27.773

以下链接 [http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)

描述再次设置间隔的行为。在进行任何处理之前，我在配置中设置了间隔，从而导致计时器重置并根据文档触发事件。

**修复**：-我在处理完成后设置间隔。这会重置计时器，并且经过的事件将在配置的时间间隔后触发。也不再需要以下代码行

```
 DipRedipServiceTimer.Stop();
    DipRedipServiceTimer.AutoReset = false;
    DipRedipServiceTimer.Enabled = false; 
```

因为在初始化计时器时 autoreset 设置为 false。

```
#region "Timer Elapsed Event"
    /// <summary>
    /// Handles the Elapsed event of the timer control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.Timers.ElapsedEventArgs"/> instance containing the event data.</param>
    void DipRedipServiceTimer_Elapsed(object sender, ElapsedEventArgs e)
    {

        try
        {                
            IDipRedipController controller = new DipRedipController();
            try
            {
                DipRedipConfiguration config = controller.GetDipRedipConfiguration();                    
                if (config != null)
                {
                    //set timer interval after reading from config file.                        
                    controller.dipRedipConfiguration = config;
                    LoggingHelper.LogMessage(String.Format("Dip Service timer initialized at {0}", DateTime.UtcNow), Source.EDiscDIPREDIPService, LogCategory.Exception);
                    //Process Dip
                    bool dipSuccess = controller.ProcessDIP();
                    //Process Re-Dip
                    bool redipSuccess = controller.ProcessREDIP();
                    // In case configuration has been retrieved, set timer defined.
                    DipRedipServiceTimer.Interval = config.FileGenerationInterval * 60000;
                    //Enable timers for next cycle
                    LoggingHelper.LogMessage(String.Format("Dip Service timer completed at {0}", DateTime.UtcNow), Source.EDiscDIPREDIPService, LogCategory.Exception);
                }
                // In case configuration is null, get the default timer defined in App.Config file.
                else
                {
                    int interval = 0;
                    int.TryParse(ConfigurationManager.AppSettings.Get("DefaultTimerValue"), out interval);
                    DipRedipServiceTimer.Interval = interval * 60000;
                    LoggingHelper.LogWarning("Configuration for Dip/Redip could not be fetched from database.", Source.EDiscDIPREDIPService, LogCategory.Exception);
                }                                        
                DipRedipServiceTimer.Start();
            }
            catch (Exception ex)
            {
                LoggingHelper.LogException("Exception Occured in DipRedipServiceTimer_Elapsed method of Dip/Redip Window Service", ex, Source.EDiscDIPREDIPService);                    
            }
        }
        catch (Exception ex)
        {
            LoggingHelper.LogException("Exception Occured in the DipRedip Service Host Window Service", ex, Source.EDiscDIPREDIPService);               
        }
     }
    #endregion 
```

# windows - Windows 应用程序调试

> ID：11097652
> 
> 赞同：1
> 
> 时间：2012-06-19T08:56:21.860
> 
> 标签：windows, debugging, freeze

我的运营团队和开发人员对为什么会发生这种情况一无所知。基本上，客户端/服务器应用程序的服务器端服务挂起。我们一直在推送新的错误修正版本并向开发人员提供各种日志，但他们无法弄清楚。为了更难弄清楚，这是一个与客户端上的另一个应用程序非常密切合作的应用程序。

我不知道我是否在这里做某事，因为我的windbg经验有限，但这似乎值得一试。谷歌很有希望，但大多数游戏玩家的蓝屏死机并没有提供更多信息……

我在转储开始时发现了这一点：

> 警告： odbccp32 与 comctl32 重叠。警告：odbc32 与 odbccp32 重叠 警告：odbc32 与 comctl32 重叠 .............警告：mswsock 与 FWPUCLNT 重叠 .......警告：winsta 与 winnsi 重叠。警告：ntlanman 重叠 drprov .... 警告：srvcli 重叠 netapi32 警告：wkscli 重叠 srvcli ....警告：ncrypt 重叠 schannel 。警告： nlaapi 与 ncrypt 重叠。警告：NapiNSP 与 nlaapi 重叠 .... 警告：rsaenh 与 cryptsp 重叠

再低一点：

> OVERLAPPED_MODULE：“odbc32”和“odbccp32”的地址区域重叠

这是完整的 !analyze -v 转储：

```
Microsoft (R) Windows Debugger Version 6.2.8400.0 AMD64
Copyright (c) Microsoft Corporation. All rights reserved.

Loading Dump File [C:\debug\MES\PLSMES.dmp]
User Mini Dump File: Only registers, stack and portions of memory are available

Symbol search path is: srv*c:\symbols*c:\windows\symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
Windows 7 Version 7601 (Service Pack 1) MP (16 procs) Free x64
Product: Server, suite: TerminalServer SingleUserTS
Machine Name:
Debug session time: Thu Jun 14 10:37:01.000 2012 (UTC + 2:00)
System Uptime: not available
Process Uptime: 0 days 6:36:13.000
......................................WARNING: odbccp32 overlaps comctl32
.WARNING: odbc32 overlaps odbccp32
WARNING: odbc32 overlaps comctl32
.............WARNING: mswsock overlaps FWPUCLNT
.......WARNING: winsta overlaps winnsi
.WARNING: ntlanman overlaps drprov
....
...WARNING: srvcli overlaps netapi32
.WARNING: wkscli overlaps srvcli
..........WARNING: ncrypt overlaps schannel
.WARNING: nlaapi overlaps ncrypt
.WARNING: NapiNSP overlaps nlaapi
....WARNING: rsaenh overlaps cryptsp

Cannot read PEB32 from WOW64 TEB32 7efdd000 - Win32 error 0n30
wow64cpu!CpupSyscallStub+0x9:
00000000`741f2e09 c3              ret
0:000> !analyze -v
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

*** WARNING: Unable to verify timestamp for PLSMES.exe
*** ERROR: Module load completed but symbols could not be loaded for PLSMES.exe

FAULTING_IP: 
+0
00000000`00000000 ??              ???

EXCEPTION_RECORD:  ffffffffffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 0000000000000000
   ExceptionCode: 80000003 (Break instruction exception)
  ExceptionFlags: 00000000
NumberParameters: 0

FAULTING_THREAD:  0000000000001364

DEFAULT_BUCKET_ID:  BAD_DUMP_MISSING_MEMORY

PROCESS_NAME:  PLSMES.exe

OVERLAPPED_MODULE: Address regions for 'odbc32' and 'odbccp32' overlap

ERROR_CODE: (NTSTATUS) 0x80000003 - {EXCEPTION}  Breakpoint  A breakpoint has been reached.

EXCEPTION_CODE: (HRESULT) 0x80000003 (2147483651) - One or more arguments are invalid

NTGLOBALFLAG:  0

APPLICATION_VERIFIER_FLAGS:  0

APP:  plsmes.exe

ADDITIONAL_DEBUG_TEXT:  Followup set based on attribute [Is_ChosenCrashFollowupThread] from Frame:[0] on thread:[PSEUDO_THREAD]

LAST_CONTROL_TRANSFER:  from 0000000000000000 to 00000000741f2e09

PRIMARY_PROBLEM_CLASS:  BAD_DUMP_MISSING_MEMORY

BUGCHECK_STR:  APPLICATION_FAULT_BAD_DUMP_MISSING_MEMORY

STACK_TEXT:  
00000000`00000000 00000000`00000000 bad_dump!missing_stack+0x0

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  bad_dump!missing_stack

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: bad_dump

IMAGE_NAME:  bad_dump

DEBUG_FLR_IMAGE_TIMESTAMP:  0

STACK_COMMAND:  ** Pseudo Context ** ; kb

FAILURE_BUCKET_ID:  BAD_DUMP_MISSING_MEMORY_80000003_bad_dump!missing_stack

BUCKET_ID:  X64_APPLICATION_FAULT_BAD_DUMP_MISSING_MEMORY_bad_dump!missing_stack

WATSON_STAGEONE_URL:  http://watson.microsoft.com/StageOne/PLSMES_exe/4_4_3_2582/4f8ac8f6/unknown/0_0_0_0/bbbbbbb4/80000003/00000000.htm?Retriage=1

Followup: MachineOwner
--------- 
```

这可能与应用程序挂起有关吗？重叠记忆似乎并不好。注意：同一台服务器运行同一应用程序的其他实例而不会出错。

任何指向进一步调试的指针也很好。

（从 ServerFault 移出，我想这最好在这里问。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:43:04.117

当使用 64 位版本的任务管理器创建 32 位进程的转储时，我已经看到了这种情况。如果是这种情况，请使用 SysWOW64 文件夹中的 32 位版本的任务管理器。此链接描述了该问题：http: [//blogs.msdn.com/b/tess/archive/2010/09/29/capturing-memory-dumps-for-32-bit-processes-on-an-x64-machine。 aspx](http://blogs.msdn.com/b/tess/archive/2010/09/29/capturing-memory-dumps-for-32-bit-processes-on-an-x64-machine.aspx)

# mysql - MYSQL 做正确的关系

> ID：11097654
> 
> 赞同：0
> 
> 时间：2012-06-19T08:56:32.217
> 
> 标签：mysql, relational-database

我正在进入表之间关系的世界并遇到一些问题。

我有 3 张桌子：

```
Client
 + id
 + alias

Client_Manager
 + id
 + user_id
 + client_id

Client_Facebook
 + id
 + facebook_page_id
 + client_id 
```

我将我的表与 mysql Workbench 中的 client.id 到 tables.client_ids 一对多并同步。这按预期工作，但是当我使用 Zend 构建 ObjectRelationshipMapper 时，我们遇到了错误的子表类。

所以我重做了我的关系，使子表具有从他们的客户 id 到 client.id 的关系

我的模型构建正确。

我的问题真的是，我应该在父表、子表还是两者上建立关系？

谢谢

# java - 使用反射获取 Java 数组中的字段“长度”

> ID：11097658
> 
> 赞同：12
> 
> 时间：2012-06-19T08:56:41.617
> 
> 标签：java, arrays, reflection

```
class Test {
    public static void main(String[] args) throws Exception {
        Test t = new Test();
        System.out.println(t.field);
        System.out.println(t.getClass().getField("field").get(t));

        int[] ar = new int[23];
        System.out.println(ar.length);
        System.out.println(ar.getClass().getField("length").get(ar));

    }
    public int field = 10;
}; 
```

当我运行上面的代码时，我在命令行上得到以下结果——

```
10
10
23
Exception in thread "main" java.lang.NoSuchFieldException: length
    at java.lang.Class.getField(Class.java:1520)
    at Test.main(Test.java:9) 
```

为什么我无法访问数组中的“长度”字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T09:01:52.573

有一个特殊的[`java.lang.reflect.Array`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Array.html)班级。`length`不是正常场。要访问它有一个特殊的方法`getLength`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T09:09:52.310

我认为这可能是 JVM 实现中的一个错误。这是我的推理：

1.  根据[文档`Class.getField`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getField%28java.lang.String%29)，`getField`应该作为其搜索算法的一部分（1），查找`length`它是否被声明为公共字段：“如果 C 声明了一个具有指定名称的公共字段，那就是要反映的字段。”

2.  根据[Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7)，每个数组都`length`声明为“公共最终字段长度，其中包含数组的组件数”。

3.  由于该字段被声明为具有 name `length`，`getField`因此应该按照记录抛出 a `SecurityException`，或者应该返回该`Field`对象。

现在有趣的是，该[`Class.getFields`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getFields%28%29)方法明确提到“该方法不反映数组类的隐式长度字段。用户代码应使用 Array 类的方法来操作数组。” 这似乎并不平行`getField`，所以这可能是我的误读或只是糟糕的文档。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:52:28.760

在 Java 中，数组只是简单的对象。对象没有任何名为*length*的字段。这就是反射失败的原因。

有关如何实现数组的更多信息，请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html 。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)

从文档...

> 数组的长度不是其类型的一部分。

# java - 作为参数传递的函数结果会在JNI中释放吗？

> ID：11097661
> 
> 赞同：1
> 
> 时间：2012-06-19T08:56:52.507
> 
> 标签：java, memory-management, java-native-interface

所以我的问题是关于 JNI 中的内存泄漏。

如果我有：

```
jclass cls = env->FindClass("java/lang/String");
jobjectArray aRow = env->NewObjectArray(col, cls, NULL);
env->DeleteLocalRef(cls); 
```

我知道 cls 内存将被释放。但是，如果我使用：

```
jobjectArray aRow = env->NewObjectArray(col, env->FindClass("java/lang/String"), NULL); 
```

作为参数传递的jclass会被释放吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:16:45.710

是的，但不是立即的，只有在您当前的 JNI 方法返回给 JVM 调用者之后。然后 GC 会处理它。只要您创建适量的引用，这应该不是问题。当您的金额不再适中时，JVM 会告诉您。

`FindClass`但是，为了完全正确，您应该在将其用作其他地方的参数之前检查返回值。如果 JVM 抛出异常，它仍然可以返回 NULL。

# java - 为什么将 (Object)null 结果转换为不为空？

> ID：11097664
> 
> 赞同：3
> 
> 时间：2012-06-19T08:57:07.280
> 
> 标签：java, variadic-functions

我使用 java 7，并创建了一个 varargs 方法

```
public class JavaApplicationTest {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        addBundleMessage("b", Integer.SIZE, "key", (Object) null);
    }

    public static void addBundleMessage(String bundleName, Integer severity, String key, Object... params) {
        if (params == null)
            System.out.println("params Is null");
        else
            System.out.println("Params not null");
    }
} 
```

如果我不投射对象，IDE 的 Netbeans 或 Eclipse 会抱怨，但它会编译：

> 最后一个参数的参数类型不准确的可变参数方法的非可变参数调用

**无强制**转换时：显示**参数为空**

当我将 null 转换为**(Object)**时，它显示**Params not null**

当我将 null 转换为**(Object[])**时，它显示**params Is null**

**这是正常行为吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:00:31.207

是的，这是“正常”行为。

混淆来自于 varargs 稍后被绑定到语言并使用数组作为“实际参数”来实现以保存可变数量的参数。

```
public static void addBundleMessage(String bundleName, Integer severity,
   String key, Object... params) { 
```

几乎一样

```
public static void addBundleMessage(String bundleName, Integer severity,
   String key, Object[] params) { 
```

在引擎盖下，参数作为 Object[] 包装传递。

但是，您仍然可以选择自己传入该数组。

如果您使用`(Object[]) null`，您将获得一个参数（即为空）。

如果你使用`(Object) null`，它使用 varargs 方法，所以它传入一个数组来保存参数（其中只有一个为空）。

对于可变参数方法的“正常使用”，`params`永远不会为空。您可以获得的“最差”是一个空数组（如果根本没有参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:00:53.383

强制转换不会对 null 做任何事情，它只会帮助编译器在重载方法之间进行选择。当您使用多参数方法时，参数将是一个数组，因此您对它的空测试不相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:02:26.510

> 无强制转换时：显示参数为空

在这种情况下，可变参数为空，所以你得到一个空

> 当我将 null 转换为 (Object) 时，它显示 Params not null

可变参数包含一个为空的对象（根据您的投射）

> 当我将 null 转换为 (Object[]) 时，它显示 params Is null

可变参数**是**您传递的 Object[]，它是 null

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:02:40.860

没有演员表与演员表相同`Object[]`。您正在传递一个空参数数组，因此`params`也是空的。

当您将 null 转换为 时`Object`，您将传递一个 null 参数，因此`params`不是 null，而是一个`Object[1]`，其唯一元素为 null。

# gwt - 在非 Java 服务器上运行 GWT

> ID：11097671
> 
> 赞同：1
> 
> 时间：2012-06-19T08:57:25.963
> 
> 标签：gwt, apache

我认为我的问题的答案是否定的。但是，我仍然想知道是否可以将 gwt applicaton 作为前端运行，例如在 Apache HTTPD 服务器上。编译gwt的想法是纯javascript，不需要java后端（如果我们不使用基于java的RPC）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:00:32.383

没有什么能阻止你。GWT 代码分为两部分；服务器端和客户端代码。正如您所说，客户端代码编译成纯 javascript，可以通过 httpd 轻松提供。

在服务器上使用 gwt 类的主要优点是，您通过 RPC 请求的数据将作为 java 对象到达您的客户端代码，而您无需进行任何工作。[但是您可以使用RequestBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/2.3/com/google/gwt/http/client/RequestBuilder.html)类或[XMLHttpRequest](http://google-web-toolkit.googlecode.com/svn/javadoc/2.3/com/google/gwt/xhr/client/XMLHttpRequest.html)轻松调用任何旧服务，如果您需要更多控制。

编辑：您应该做一些特殊的配置，以确保 httpd 与您的客户端 gwt 代码一起工作：

```
<Files *.nocache.*>
    ExpiresDefault "access"
</Files>
<Files *.cache.*>
    ExpiresDefault "now plus 6 months"
</Files> 
```

这可以确保当您上传应用程序的新版本时，用户的浏览器会自动下载它，同时也确保他们不会在每次访问您的网站时下载整个应用程序。很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:17:53.027

你的观点是错误的。您可以创建一个仅为前端设计的 gwt 应用程序。要测试您可以执行以下操作

1.  创建一个只有前端内容的示例 gwt 应用程序
2.  编译和构建应用程序
3.  将构建内容文件夹放在您的 Apache Web 目录中。
    Ee ：如果您创建了一个名为 的项目`test-gwt`，则`JS`和`HTML`内容在`test-gwt`目录中创建的`war`目录中。
4.  通过网络浏览器访问新应用程序，例如`http://localhost/test-gwt`

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:17:45.007

只要您不使用 gwt 编写您的服务器组件，这是可能的并且就像一个魅力。

这是一个简单的仅 gwt 客户端的[htaccess 密码应用程序](http://www.ip-info.tk/de/htpasswd/)（目前只有德语）作为示例，我为好玩而编写了代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T06:46:22.500

“我想知道是否可以将 gwt 应用程序作为前端运行，例如在 Apache HTTPD 服务器上”。

答案是不。GWT UI 前端根本不在任何服务器上运行。它仅在启用了 Javascript 的浏览器上运行。

但是，如果我忽略问题的语言语义并回答它的要点 - 答案是肯定的。请原谅我，但我认为你应该写的语言是

“是否可以从 Apache HTTPD 服务器提供 gwt 应用程序前端”。

只需将您的 servlet-less 战争部署到 HTTPD 上（删除 WEB-INF 文件夹）。

事实上，您甚至可以编写 RequestBuilder 请求来请求来自放置在 GWT 模块开发“公共”文件夹中的文件的静态 json 流。GWT 编译器会将“public”文件夹的内容复制到部署的应用程序根目录。

或者您可以使用 script-include 从另一台服务器获取 GWT 客户端对动态内容 jsonp 的请求——这不会在您的应用程序中创建任何 servlet。我在这里记录了脚本包含技术：http: [//h2g2java.blessedgeek.com/2011/06/gwt-requestbuilder-vs-rpc-vs-script.html](http://h2g2java.blessedgeek.com/2011/06/gwt-requestbuilder-vs-rpc-vs-script.html)。

# ios - 在日历，ios中选择日期时如何获取特定日期的位置

> ID：11097674
> 
> 赞同：1
> 
> 时间：2012-06-19T08:57:34.877
> 
> 标签：ios, date, calendar

我在这里感到困惑。我在ios应用程序中实现了一个日历控件。但是当用户选择日期时无法找到特定日期的位置。如何找到用户选择的特定日期的位置？请有人帮助我或给我一些建议。提供任何示例代码。将不胜感激。

在 DayButton.h 中

```
//
//  DayButton.h
//  DDCalendarView
//
//
//

#import <UIKit/UIKit.h>

@protocol DayButtonDelegate <NSObject>
- (void)dayButtonPressed:(id)sender;
@end

@interface DayButton : UIButton {
    id <DayButtonDelegate> delegate;
    NSDate *buttonDate;
}

@property (nonatomic, assign) id <DayButtonDelegate> delegate;
@property (nonatomic, copy) NSDate *buttonDate;

- (id)buttonWithFrame:(CGRect)buttonFrame;

@end 
```

在 DayButton.m 中

```
//
//  DayButton.m
//  DDCalendarView
//
//

#import "DayButton.h"

@implementation DayButton
@synthesize delegate, buttonDate;

- (id)buttonWithFrame:(CGRect)buttonFrame {
    self = [DayButton buttonWithType:UIButtonTypeCustom];

    self.frame = buttonFrame;
    self.titleLabel.textAlignment = UITextAlignmentRight;
    self.backgroundColor = [UIColor clearColor];
    [self setTitleColor:[UIColor grayColor] forState:UIControlStateNormal];

    [self addTarget:delegate action:@selector(dayButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];

    UILabel *titleLabel = [self titleLabel];
    CGRect labelFrame = titleLabel.frame;
    int framePadding = 4;
    labelFrame.origin.x = self.bounds.size.width - labelFrame.size.width - framePadding;
    labelFrame.origin.y = framePadding;

    [self titleLabel].frame = labelFrame;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

在 DDCalenderView.h

```
//
//  DDCalendarView.h
//  DDCalendarView
//
//

#import <UIKit/UIKit.h>
#import "DayButton.h"

@protocol DDCalendarViewDelegate <NSObject>
- (void)dayButtonPressed:(DayButton *)button;

@optional
- (void)prevButtonPressed;
- (void)nextButtonPressed;

@end

@interface DDCalendarView : UIView <DayButtonDelegate> {
    id <DDCalendarViewDelegate> delegate;
    NSString *calendarFontName;
    UILabel *monthLabel;
    NSMutableArray *dayButtons;
    NSCalendar *calendar;
    float calendarWidth;
    float calendarHeight;
    float cellWidth;
    float cellHeight;
    int currentMonth;
    int currentYear;
}

@property(nonatomic, assign) id <DDCalendarViewDelegate> delegate;

- (id)initWithFrame:(CGRect)frame fontName:(NSString *)fontName delegate:(id)theDelegate;
- (void)updateCalendarForMonth:(int)month forYear:(int)year;
- (void)drawDayButtons;
- (void)prevBtnPressed:(id)sender;
- (void)nextBtnPressed:(id)sender;

@end 
```

在 DDCalenderView.m

```
//
//  DDCalendarView.m
//  DDCalendarView
//
//

#import "DDCalendarView.h"

@implementation DDCalendarView
@synthesize delegate;

- (id)initWithFrame:(CGRect)frame fontName:(NSString *)fontName delegate:(id)theDelegate {
    if ((self = [super initWithFrame:frame])) {
        self.delegate = theDelegate;

        //Initialise vars
        calendarFontName = fontName;
        calendarWidth = frame.size.width;
        calendarHeight = frame.size.height;
        cellWidth = frame.size.width / 7.0f;
        cellHeight = frame.size.height / 14.0f;

        //View properties
//      UIColor *bgPatternImage = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"square-paper.png"]];
//       
//      self.backgroundColor = bgPatternImage;
//      [bgPatternImage release];

        //Set up the calendar header

        self.backgroundColor=[UIColor whiteColor];

        UIButton *prevBtn = [UIButton buttonWithType:UIButtonTypeCustom];
        [prevBtn setImage:[UIImage imageNamed:@"left-arrow.png"] forState:UIControlStateNormal];
        prevBtn.frame = CGRectMake(0, 0, cellWidth, cellHeight);
        [prevBtn addTarget:self action:@selector(prevBtnPressed:) forControlEvents:UIControlEventTouchUpInside];

        UIButton *nextBtn = [UIButton buttonWithType:UIButtonTypeCustom];
        [nextBtn setImage:[UIImage imageNamed:@"right-arrow.png"] forState:UIControlStateNormal];
        nextBtn.frame = CGRectMake(calendarWidth - cellWidth, 0, cellWidth, cellHeight);
        [nextBtn addTarget:self action:@selector(nextBtnPressed:) forControlEvents:UIControlEventTouchUpInside];

        CGRect monthLabelFrame = CGRectMake(cellWidth, 0, calendarWidth - 2*cellWidth, cellHeight);
        monthLabel = [[UILabel alloc] initWithFrame:monthLabelFrame];
        monthLabel.font = [UIFont fontWithName:calendarFontName size:18];
        monthLabel.textAlignment = UITextAlignmentCenter;
        monthLabel.backgroundColor = [UIColor clearColor];
        monthLabel.textColor = [UIColor blackColor];

        //Add the calendar header to view       
        [self addSubview: prevBtn];
        [self addSubview: nextBtn];
        [self addSubview: monthLabel];

        //Add the day labels to the view
        char *days[7] = {"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"};
        for(int i = 0; i < 7; i++) {
            CGRect dayLabelFrame = CGRectMake(i*cellWidth, cellHeight, cellWidth, cellHeight);
            UILabel *dayLabel = [[UILabel alloc] initWithFrame:dayLabelFrame];
            dayLabel.text = [NSString stringWithFormat:@"%s", days[i]];
            dayLabel.textAlignment = UITextAlignmentCenter;
            dayLabel.backgroundColor = [UIColor clearColor];
            dayLabel.font = [UIFont fontWithName:calendarFontName size:16];
            dayLabel.textColor = [UIColor darkGrayColor];

            [self addSubview:dayLabel];
            [dayLabel release];
        }

        [self drawDayButtons];

        //Set the current month and year and update the calendar
        calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

        NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
        NSDateComponents *dateParts = [calendar components:unitFlags fromDate:[NSDate date]];
        currentMonth = [dateParts month];
        currentYear = [dateParts year];

        [self updateCalendarForMonth:currentMonth forYear:currentYear];

    }
    return self;
}

- (void)drawDayButtons {
    dayButtons = [[NSMutableArray alloc] initWithCapacity:42];
    for (int i = 0; i < 6; i++) {
        for(int j = 0; j < 7; j++) {
            CGRect buttonFrame = CGRectMake(j*cellWidth, (i+2)*cellHeight, cellWidth, cellHeight);
            DayButton *dayButton = [[DayButton alloc] buttonWithFrame:buttonFrame];
            dayButton.titleLabel.font = [UIFont fontWithName:calendarFontName size:14];
            dayButton.delegate = self;

            [dayButtons addObject:dayButton];
            [dayButton release];

            [self addSubview:[dayButtons lastObject]];
        }
    }
}

- (void)updateCalendarForMonth:(int)month forYear:(int)year {
    char *months[12] = {"January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"};
    monthLabel.text = [NSString stringWithFormat:@"%s %d", months[month - 1], year];

    //Get the first day of the month
    NSDateComponents *dateParts = [[NSDateComponents alloc] init];
    [dateParts setMonth:month];
    [dateParts setYear:year];
    [dateParts setDay:1];
    NSDate *dateOnFirst = [calendar dateFromComponents:dateParts];
    [dateParts release];
    NSDateComponents *weekdayComponents = [calendar components:NSWeekdayCalendarUnit fromDate:dateOnFirst];
    int weekdayOfFirst = [weekdayComponents weekday];   

    //Map first day of month to a week starting on Monday
    //as the weekday component defaults to 1->Sun, 2->Mon...
    if(weekdayOfFirst == 1) {
        weekdayOfFirst = 7;
    } else {
        --weekdayOfFirst;
    }

    int numDaysInMonth = [calendar rangeOfUnit:NSDayCalendarUnit 
                                        inUnit:NSMonthCalendarUnit 
                                            forDate:dateOnFirst].length;

    int day = 1;
    for (int i = 0; i < 6; i++) {
        for(int j = 0; j < 7; j++) {
            int buttonNumber = i * 7 + j;

            DayButton *button = [dayButtons objectAtIndex:buttonNumber];

            button.enabled = NO; //Disable buttons by default
            [button setTitle:nil forState:UIControlStateNormal]; //Set title label text to nil by default
            [button setButtonDate:nil];

            if(buttonNumber >= (weekdayOfFirst - 1) && day <= numDaysInMonth) {
                [button setTitle:[NSString stringWithFormat:@"%d", day] 
                                                forState:UIControlStateNormal];

                NSDateComponents *dateParts = [[NSDateComponents alloc] init];
                [dateParts setMonth:month];
                [dateParts setYear:year];
                [dateParts setDay:day];
                NSDate *buttonDate = [calendar dateFromComponents:dateParts];
                [dateParts release];
                [button setButtonDate:buttonDate];

                button.enabled = YES;
                ++day;
            }
        }
    }
}

- (void)prevBtnPressed:(id)sender {
    if(currentMonth == 1) {
        currentMonth = 12;
        --currentYear;
    } else {
        --currentMonth;
    }

    [self updateCalendarForMonth:currentMonth forYear:currentYear];

    if ([self.delegate respondsToSelector:@selector(prevButtonPressed)]) {
        [self.delegate prevButtonPressed];
    }
}

- (void)nextBtnPressed:(id)sender {
    if(currentMonth == 12) {
        currentMonth = 1;
        ++currentYear;
    } else {
        ++currentMonth;
    }

    [self updateCalendarForMonth:currentMonth forYear:currentYear];

    if ([self.delegate respondsToSelector:@selector(nextButtonPressed)]) {
        [self.delegate nextButtonPressed];
    }
}

- (void)dayButtonPressed:(id)sender {
    DayButton *dayButton = (DayButton *) sender;
    [self.delegate dayButtonPressed:dayButton];
}

- (void)dealloc {
    [calendar release];
    [dayButtons release];
    [super dealloc];
}

@end 
```

在 MainViewController.h

```
//
//  MainViewController.h
//  DDCalendarView
//
//

#import <UIKit/UIKit.h>
#import "DDCalendarView.h"

@interface MainViewController : UIViewController <DDCalendarViewDelegate> {
    DDCalendarView *calendarView;
}

@end 
```

在 MainVIewController.m

```
//
//  MainViewController.m
//  DDCalendarView
//
//

#import "MainViewController.h"

@implementation MainViewController

// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
    UIView *appView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    calendarView = [[DDCalendarView alloc] initWithFrame:appView.bounds fontName:@"AmericanTypewriter" delegate:self];

    self.view = appView;
    [appView release];

    [self.view addSubview: calendarView];
}

- (void)dayButtonPressed:(DayButton *)button {
    //For the sake of example, we obtain the date from the button object
    //and display the string in an alert view
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];
    [dateFormatter setDateStyle:NSDateFormatterLongStyle];
    NSString *theDate = [dateFormatter stringFromDate:button.buttonDate];
    [dateFormatter release];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];
    [dateFormatter setDateStyle:NSDateFormatterLongStyle];
    NSString *theDate = [dateFormatter stringFromDate:button.buttonDate];
    [dateFormatter release];

    //  UIAlertView *dateAlert = [[UIAlertView alloc]
    //                              initWithTitle:@"Date Pressed"
    //                              message:theDate 
    //                              delegate:self
    //                              cancelButtonTitle:@"Ok"
    //                              otherButtonTitles:nil];
    //  [dateAlert show];
    //  [dateAlert release];
    //    

timeEntry *time=[[timeEntry alloc]init];
[time setDate:theDate];
[self.navigationController pushViewController:time animated:YES];
[time release];

}

- (void)nextButtonPressed {
    NSLog(@"Next...");
}

- (void)prevButtonPressed {
    NSLog(@"Prev...");
}

/*
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];
}
*/

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

我在日历上方拍了一张图片。如果用户选择日期，则图像必须以水平或垂直位置移动到该日期。是否需要动画？如果是，如何处理，否则任何人都可以以自己的方式提供帮助。请.伟大的答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:17:47.167

我建议使用[Kal](https://github.com/klazuka/Kal "卡尔")。我将它用于一个月视图，效果很好。即使您移动到另一个视图，它也会跟踪日期。

编辑：获取水龙头的位置查看[此链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/locationOfTouch%3ainView%3a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:05:03.373

你试过[Tapku 图书馆](https://github.com/devinross/tapkulibrary)吗？它更适合自定义日历控件。希望这对您有所帮助。

# java - 多线程和静态块

> ID：11097676
> 
> 赞同：4
> 
> 时间：2012-06-19T08:57:44.083
> 
> 标签：java, initialization, static-block

我在我们的一个项目中遇到了一个奇怪的问题。我们使用 JUnit 来运行我们的单元测试，前段时间，我们开始并行运行 pur 测试以加快执行速度。大多数时候，一切都很好，但有时，我们几乎所有的测试都会失败。在下一次运行时，它们都再次通过而没有更改任何代码。

这些错误似乎表明某些静态实例未正确初始化或在多线程情况下完成初始化之前未使用。（我无法调试这个，因为调试时问题从未出现过 -> [Heisenbug](http://en.wikipedia.org/wiki/Heisenbug)。）

抱歉，我无法提供显示该错误的最小工作示例，因为它在尝试重现时会消失。

具体问题是：当像下面这样声明一个变量时，当另一个线程调用 foo() 或 bar() 时，是否有可能没有完成 a 或 b 的初始化？我认为可以保证在调用任何方法之前执行静态块。或者可能存在类加载器问题？还是 JRE 中的已知错误（我们目前停留在 1.6.0_21，我们的 IT 部门尚未提供更新的版本）？

```
class C {
    private static final A a;
    private static final B b;

    static {
        a = new A(...);
        b = new B(...);
    }

    public static void foo() {
        useA();
    }

    public static void bar() {
        useB();
    }

} 
```

我确信它与硬件无关，因为它出现在不同制造商的不同机器上。测试使用服务器 vm。

谢谢，

阿克塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:30:35.563

如果创建线程或在不同线程上执行代码，`A`可能会出现问题。`B`无论如何，你真的希望静态是不可变的。

如果存在循环依赖关系，理论上有可能看到一个部分初始化的类，但这不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:04:18.363

这很可能是由于并发问题，特别是如果你正在调用`static`东西。尝试同步您的线程，如下所示：

```
class C {
    private static final A a;
    private static final B b;

    static {
        a = new A(...);
        b = new B(...);
    }

    public synchronized static void foo() {
        useA();
    }

    public synchronized static void bar() {
        useB();
    }

} 
```

# javascript - Javascript静态方法继承

> ID：11097679
> 
> 赞同：3
> 
> 时间：2012-06-19T08:57:57.760
> 
> 标签：javascript, oop, class, inheritance, static-methods

我想创建一个允许我拥有各种方法的 Javascript 类/对象：

**模型类**

*   `Model.all()`» 静态方法
*   `Model.find()`» 静态方法
*   `Model delete()`» 实例方法
*   `Model save()`» 实例方法
*   `Model.create()`» 静态返回一个新的模型实例

对于静态方法，我可以使用以下方法定义它们：

```
Model.staticMethod(){ method } 
```

而例如方法更好用：

```
function Model(){
    this.instanceMethod = function(){}    
} 
```

然后创建一个新实例

或使用原型？

```
var m = function Model(){

}

m.prototype.method() = function() {
} 
```

现在假设我要基于Model创建一个新类，如何不仅继承它的原型，还继承它的静态方法？

**编辑：**

为避免混淆，这或多或少是我想要创建的：

[http://activejs.org/activerecord/index.html](http://activejs.org/activerecord/index.html)和[http://activejs.org/activerecord/ActiveRecord/Model/index.html](http://activejs.org/activerecord/ActiveRecord/Model/index.html)

我可以使用类似的东西定义一个新模型

```
var User = ActiveRecord.create({
    username: '',
    password: '',
    post_count: 0,
    profile: ''
} 
```

然后创建一个实例

```
var jessica = User.create({
    username: "Jessica",
    password: "rabbit"
}); 
```

使用实例方法，例如

```
jessica.save(); 
```

还有类方法：

```
User.findByUsername('Jessica'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:08:10.393

```
function Model() {}

// Methods in the instantiated object
Model.prototype = {
    constructor: Model,

    // Note that "delete" is a reserved word, so we need quotes
    'delete': function() {},

    save: function() {}
};

// Static methods
Model.all = function() {};

Model.find = function() {};

Model.create = function() {
    return new Model();

    // To be more generic, you can also:
    return new this();
}; 
```

使用`var InheritedModel = Object.create( Model );`时，它还继承了静态方法。

```
var InheritedModel = Object.create( Model );
!!InheritedModel.all // true 
```

但是，您不能这样做`new InheritedModel()`，因为它不是函数，并且 using`Object.create( InheritedModel )`不会为您提供实例方法。

如果要使用 实例化继承的类`new`，则需要以下内容：

```
function InheritedModel() {}

InheritedModel.prototype = Object.create( Model.prototype );

// Copy all the static methods in the InheritedModel object
Object.keys( Model ).forEach( function( key ) {
    InheritedModel[ key ] = Model[ key ];
} ); 
```

**编辑：**看到您的编辑后，这是我推荐您的解决方案：

```
function ActiveRecord( type, args ) {
    if ( type = 'users' ) {
        return new this.users();
    }
}

// Static method on ActiveRecord
ActiveRecord.create = function( type, args ) {
    return new ActiveRecord( type, args );
};

ActiveRecord.prototype = {
    constructor: ActiveRecord,

    // Instance method on ActiveRecord, you won't need it,
    // but your constructor does
    users: function( args ) {}
};

var Users = ActiveRecord.prototype.users;

Users.prototype = {
    constructor: Users,

    // Instance method on User's instance
    save: function() {}
}

// Static method on User
Users.create = function() {} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:00:23.087

注释代码是伪代码。您可以通过以下方式实现相同的目的：

```
var modelInstanceMethods = {

    save: function() {
        /*
        insert into this.tableName blabla
        */
    },

    'delete': function() {
        /*
        delete from this.tableName blabla
        */
    }
};

var modelStatics = {

    create: function(obj) {
        return new this(obj);
    },

    all: function() {
        /*
        return select * from this.tableName.map( function( values ) {
            return new this(values);
        },this);
        */
    },

    find: function(id) {
        /*
        select * from this.tableName where id = id
        return new this(columnValues);
        */
    }

};

var ActiveRecord = {
    create: function( tableName, fields, methods ) {

        function Model( obj ) {
            this.tableName = tableName;
            this.fields = {};
            if( fields ) {
                for( var field in fields ) {
                    this.fields[field] = fields[field];
                }
            }

            if( obj ) {
                for( var field in obj ) {
                    this.fields[field] = obj[field];
                }       
            }
        }

        Model.tableName = tableName;
        Model.prototype = Object.create(modelInstanceMethods);
        Model.prototype.constructor = Model;

        for( var key in modelStatics ) {
            Model[key] = modelStatics[key];
        }

        if( methods ) {
            for( var key in methods ) {
                Model.prototype[key] = methods[key];
            }   
        }

        return Model;
    }
}; 
```

用法

```
var User = ActiveRecord.create('users',
    /* fields and their default values */
{
    id: 0,
    username: '',
    password: '',
    post_count: 0,
    profile: ''
}, {
    /*instance methods */
    setPassword: function(password) {
        this.fields.password = password;
    }
});

/*You can define static methods like this */

User.findByUsername = function(username) {
    /*select from this.tableName where userName = username
               return new this(columnValues) blabla
             */
};

var jessica = User.create( {
    username: "Jessica",
    password: "rabbit"
});

jessica.save();

User.findByUsername('Jessica'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-06T12:54:14.073

您可以扩展对象的原型，将“扩展”方法添加到 Object.prototype。这样，您将拥有一个看起来像 java 的继承方法。

（将“扩展”属性定义为不可枚举很重要，否则会破坏 jQuery）

```
Object.defineProperty(Object.prototype, "extends", {
        "enumerable": false,
        "value" : function(constructor) {

                /*Inheriting enumerable statick method and paramether
                from the super class */
                Object.keys( constructor ).forEach( function(key) {
                        this[key]= constructor[key];
                }.bind(this));

                /*Classic Javascript inheritance*/
                this.prototype= Object.create( constructor.prototype, {
                            "constructor": {
                                    "value": this,
                                    "configurable": true
                            }
                });             

                this.__super__= constructor;

        }

}); 
```

在您可以通过这样做轻松地继承一个类之后：

```
InheritedModel.extends(Model);

function InheritedModel(params){

       this.constructor.__super__.call(this, params);

       /* Or directly :
       Model.call(this,param);
       */

       /*Code specific to InheritedModel constructor */
}

/*To overload method from the super class:*/

InheritedModel.prototype.foo= function(params){

     var out= this.constructor.__super__.prototype.foo.call(this,params);

     /* Or
     var out= Model.prototype.foo.call(this,param);
     */

     /* code */

}; 
```

InheritedModel 将继承模型中的所有实例方法和所有静态方法。

例子：

```
function Model() {
        this.inheritedClassName= "Model";
};

Model.inheritedClassName= "Model";

Model.getClassName = function() {
       return this.name;
};

Model.prototype.getClassName = function() {
        return this.constructor.name;
};

InheritedModel.extends(Model);

function InheritedModel() {
        Model.call(this);
}

console.log(InheritedModel.inheritedClassName);/* Model */
console.log(InheritedModel.getClassName());/* InheritedModel */

var inheritedModel= new InheritedModel();

console.log(inheritedModel.inheritedClassName);/* Model */
console.log(inheritedModel.getClassName());/* InheritedModel */ 
```

我认为这是最好的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T09:09:40.750

怎么样，你有私有和公共方法：

```
function Model() {
    var privateMethods = {
       private1: function() {},
       private2: function() {},
       private3: function() {},
    };

    var publicMethods = {
    method1: function() {},
    method2: function() {
            //call a private method...
            privateMethods.private1();
        }
    };

    return publicMethods;
}

// Static methods
Model.all = function() {};

Model.find = function() {};

Model.create = function() {
    return new Model();
}; 
```

# android - 图片调整大小问题

> ID：11097681
> 
> 赞同：0
> 
> 时间：2012-06-19T08:58:11.163
> 
> 标签：android, bitmap

我正在根据[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)链接调整图像大小。
图像大小为 3264x2448，计算样本大小后现在为 24，但图像旋转 90 度（左）。
当宽度大于高度时会发生这种情况。
我被困住了。无法解决。

```
I am using accroding to http://developer.android.com/training/displaying-bitmaps/load-bitmap.html

public static String getCompressedImagePath(String orgImagePath,
        String storeImagePath) {
    if (orgImagePath == null) {
        return null;
    }
    Bitmap bitmap = decodeSampledBitmapFromResource(orgImagePath, 100, 100);
    String absolutePath = "";
    FileOutputStream fos = null;
    try {

        fos = new FileOutputStream(storeImagePath);
        bitmap.compress(getCompressionFormatType(orgImagePath),
                IMAGE_COMPRESS_FACTOR, fos);
        fos.flush();
        absolutePath = storeImagePath;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        e.printStackTrace();
    } finally {
        try {
            if (fos != null) {
                fos.close();
                fos = null;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return absolutePath;
}

public static Bitmap decodeSampledBitmapFromResource(String orgImagePath,
        int reqWidth, int reqHeight) {
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(orgImagePath, options);
    options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(orgImagePath, options);
}

public static int calculateInSampleSize(BitmapFactory.Options options,
        int reqWidth, int reqHeight) {
    final int height = options.outHeight;
    final int width = options.outWidth;

    int inSampleSize = 1;
    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
    }
    return inSampleSize;
} 
```

并且 decodeSampledBitmapFromResource 方法已从链接复制并将压缩图像设置为 intoimageview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:37:40.837

好吧，我使用了您的代码并在我的示例应用程序中使用了它，它工作正常。所以你运行这个应用程序并找出你还缺少什么

活动-ImageScaleTestActivity

```
    包 com.myTutorial;

    导入java.io.File；

    导入 com.myTutorial.utils.ImageUtils；

    导入android.app.Activity；
    导入android.graphics.Bitmap；
    导入android.graphics.BitmapFactory；
    导入android.os.Bundle；
    导入android.view.View；
    导入 android.view.View.OnClickListener；
    导入android.widget.Button；
    导入android.widget.ImageView；

    公共类 ImageScaleTestActivity 扩展 Activity {
        最终字符串 SRC_IMAGE = "/sdcard/Gallary/2.png";
        最终字符串 CONVERTED_IMAGE = "/sdcard/Gallary/Converted/1.png";
        布尔 isConvertedImage;
        /** 在第一次创建活动时调用。*/
        @覆盖
        公共无效 onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            设置内容视图（R.layout.main）；

            按钮按钮 = (Button) findViewById(R.id.button1);
            button.setOnClickListener(new OnClickListener() {
                公共无效 onClick（查看 arg0）{
                    isConvertedImage= !isConvertedImage;
                    if(isConvertedImage){
                        setImage(CONVERTED_IMAGE);
                    }别的{
                        设置图像（SRC_IMAGE）；
                    }
                }
            });
            设置图像（SRC_IMAGE）；
            ImageUtils.getCompressedImagePath(SRC_IMAGE, CONVERTED_IMAGE);
        }

        公共无效 setImage（字符串图像路径）{
            文件 imgFile = new File(imagePath);
            如果（imgFile.exists（））{

                位图 myBitmap = BitmapFactory.decodeFile(imgFile
                        .getAbsolutePath());

                ImageView myImage = (ImageView) findViewById(R.id.imageView1);
                myImage.setImageBitmap(myBitmap);

            }

        }
    }

```

XML-main.xml

```
    <?xml 版本="1.0" 编码="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        机器人：重力=“中心”
        安卓：方向=“垂直”>

        <图像视图
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:src="@drawable/ic_launcher" android:layout_weight="1"/>

        <按钮
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="显示转换后的图片" />

    </线性布局>

```

图像

```
    包 com.myTutorial.utils；

    导入 java.io.FileNotFoundException；
    导入 java.io.FileOutputStream；
    导入 java.io.IOException；

    导入android.graphics.Bitmap；
    导入android.graphics.Bitmap.CompressFormat；
    导入android.graphics.BitmapFactory；

    公共类 ImageUtils {
        公共静态字符串 getCompressedImagePath（字符串 orgImagePath，
                字符串存储图像路径）{
            如果（orgImagePath == null）{
                返回空值；
            }
            位图位图 = decodeSampledBitmapFromResource(orgImagePath, 100, 100);
            字符串绝对路径 = "";
            文件输出流 fos = null;
            尝试 {

                fos = new FileOutputStream(storeImagePath);
                bitmap.compress(CompressFormat.PNG, 90, fos);
                fos.flush();
                absolutePath = storeImagePath;
            } 捕捉（FileNotFoundException e）{
                e.printStackTrace();
            } 捕捉（IOException e）{
                e.printStackTrace();
            } 捕捉（NullPointerException e）{
                e.printStackTrace();
            } 最后 {
                尝试 {
                    如果（fos！= null）{
                        fos.close();
                        fos = null;
                    }
                } 捕捉（异常 e）{
                    e.printStackTrace();
                }
            }
            返回绝对路径；
        }

        公共静态位图 decodeSampledBitmapFromResource(String orgImagePath,
                int reqWidth, int reqHeight) {
            最终 BitmapFactory.Options 选项 = 新 BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeFile(orgImagePath, options);
            options.inSampleSize = calculateInSampleSize（选项，reqWidth，
                    要求高度）；
            options.inJustDecodeBounds = false;
            返回 BitmapFactory.decodeFile(orgImagePath, options);
        }

        公共静态 int calculateInSampleSize（BitmapFactory.Options 选项，
                int reqWidth, int reqHeight) {
            最终 int 高度 = options.outHeight;
            最终 int 宽度 = options.outWidth;

            int inSampleSize = 1;
            if (height > reqHeight || width > reqWidth) {
                如果（宽度>高度）{
                    inSampleSize = Math.round((float) height / (float) reqHeight);
                } 别的 {
                    inSampleSize = Math.round((float) width / (float) reqWidth);
                }
            }
            返回样本大小；
        }

      }

```

# ios - Jquery 移动和包装器

> ID：11097686
> 
> 赞同：0
> 
> 时间：2012-06-19T08:58:24.740
> 
> 标签：ios, ios5, jquery-mobile, cordova

我为 iOS 开发了一个 phoneGap 应用程序，它可以工作。现在我试图在 JqueryMobile 上切换它以改善图形。这是 index.html 页面的代码。我必须进行哪些更改才能使其与 JQueryMobile 一起使用？

我尝试使用 jQueryMobile 的 css 样式和库并修改页眉和页脚，但我不明白我必须`<div data-role="page">`在文件中放置的位置。我也不知道我是否必须`id=header`离开`class=header`。

```
<head>
    <title>x Directory</title>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>        
    <script type="text/javascript" charset="utf-8" src="js/cordova-1.7.0.js"></script>        
    <script type="text/javascript" charset="utf-8" src="ChildBrowser.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-WebInspector.js"></script>

</head>

<body>
<div id="header" class="header">
    <a href="index.html" class="nav" id="nav" style="display:none;">Home</a>
    <img src="img/mob.png" class="logo" id="logo"/>
    <h1>xAsk</h1>       
</div>

<div id="wrapper">

    <ul id="xList" class="icon-list"></ul>

</div>

<div id="wrapper_hidden">
    <div>
        <div id="employeeDetails">
            <img id="xPic"/>
            <h3 id="xName"></h3>
            <p id="xEmail"></p>
            <p id="city"></p>
        </div> 

        <ul id="actionList"></ul>
    </div>
</div>

<div id="footer" class="footer">
    <ul id="azioni">
    </ul>       
</div>
<script src="js/jquery.js"></script>
<script src="js/iscroll.js"></script>
<script src="js/xlist.js"></script>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:29:23.013

首先从其中一个示例开始。Jquery mobile 改变了您的应用程序的结构方式。你不包括`jquery-mobile.js`，所以你的例子不起作用。

应该在您的页眉、数据和页脚周围，但为了拥有多个（内联）页面，您需要更多。

# grails - 在 beforeInsert 和 beforeUpdate 中更改验证

> ID：11097687
> 
> 赞同：0
> 
> 时间：2012-06-19T08:58:34.353
> 
> 标签：grails, groovy

我有一个域类

```
class Store{
    String name
    Store hierarchy
    Date dateCreated
    Date lastUpdated
    static hasMany=[storeRestrictions:StoreRestrictions]
    boolean isBillable
    boolean isConsignment
    boolean isMassUploadPossible

    static constraints = {
        name(nullable:false,blank:false,maxSize:50,unique:true)
        hierarchy(nullable:true,blank:true)
        dateCreated()
        lastUpdated()
        isBillable()
        isMassUploadPossible()
        storeRestrictions(nullable:false)
    }
} 
```

有什么方法可以更改 and 中的验证`beforeInsert`，`beforeUpdate`例如，如果`isConsignment`为 true 那么`storeRestrictions`可以变为`nullable:true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-17T15:55:49.517

改为这样做：

```
static constraints = {
    ...
    storeRestrictions(validator: {field, inst -> 
                                    if( false == isConsignment) 
                                        return null != inst.storeRestrictions
                     )
} 
```

[在Grails 验证器](http://www.grails.org/doc/latest/ref/Constraints/validator.html)上阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:51:41.627

我认为[自定义验证器](http://www.grails.org/doc/latest/ref/Constraints/validator.html)适合您的需求。您可以使用检查 isConsignment 值的自定义验证器替换 storeRestrictions 上的 nullable:true 约束

# php - acl 实现 - 哪种方式更高效：拒绝所有人访问？

> ID：11097691
> 
> 赞同：1
> 
> 时间：2012-06-19T08:58:57.250
> 
> 标签：php, zend-framework, acl, access-control, rbac

我正在尝试实现一个 ACL，我希望您能对哪种方法是最好的（更高性能的）方法提出意见：

是拒绝所有人访问并根据每个用户授予权限更好，还是默认授予所有人访问权限并删除权限更好。

尝试更具体一点，假设我有 3 个用户：SuperAdmin、ClientAdmin、BasicMember。

**ClientAdmin**管理员拥有与SuperAdmin 几乎相同的权限，例如查看系统中注册的每个用户，但他无法进行任何更改，只能“读取”。

此时，我创建了一个函数，其中列出了用户的所有权限，并在每个资源中检查 currentUserRole 和授权，如下所示：

```
$acl = $this->generateAcl($roleId, AclResourceBean::ENTER_DATA, 'read')); 
```

所以..我想知道你是否最好检查一下：如果他有许可，showAction！或者如果他没有权限，hideAction。（例如：对于刚刚对其他用户具有读取权限的 ClientAdmin，我应该隐藏“编辑”按钮，还是总是隐藏更好，如果他没有权限，则显示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:01:08.370

我认为这主要取决于您的应用程序。但我通常倾向于拒绝所有并授予访问权限。这样一来，您就不太可能忘记访问权限并将人们放在不应该出现的地方。

# .net - 一键清除 VS2010 TFS 2010 中的待处理更改“添加”

> ID：11097692
> 
> 赞同：0
> 
> 时间：2012-06-19T08:58:59.587
> 
> 标签：.net, visual-studio-2010

我知道这个问题在这个门户网站上被问了很多次。

像这样：[清理 VS2010 TFS 2010 中的待处理更改“添加”，](https://stackoverflow.com/questions/5877239/clean-pending-changes-add-in-vs2010-tfs-2010)[当这些文件已在本地删除时](https://stackoverflow.com/questions/2770727/how-do-i-remove-files-from-the-pending-changes-list-in-tfs-when-those-files-have)， 如何从 TFS 的待处理更改列表中删除文件

我们可以选择撤消它。但目前它仅适用于单个项目。我有 200 多个待处理的添加更改文件。我想一键删除所有这些。

有没有人知道摆脱这个问题的完美解决方案。

# android - Android objectAnimator animate backgroundColor of Layout

> ID：11097693
> 
> 赞同：15
> 
> 时间：2012-06-19T08:59:02.013
> 
> 标签：android, android-animation

我有个问题。我想为a**的背景颜色设置动画**`LinearLayout`，使用`ObjectAnimator`.
问题是它有动画，但它既不关心持续时间也不关心`valueFrom`和`valueTo`。

这是我的 xml 文件：

```
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="2000"
    android:propertyName="backgroundColor"
    android:repeatCount="infinite"
    android:repeatMode="reverse"
    android:valueFrom="#FF0000"
    android:valueTo="#000000" /> 
```

在Java中我这样称呼：

```
ObjectAnimator objAnim = (ObjectAnimator)AnimatorInflater.loadAnimator(getActivity(), R.animator.animator_bkg);
objAnim.setTarget(view);
objAnim.start(); 
```

请注意，当我为布局的 alpha 设置动画时，它会按预期工作。
这是一个 Android 错误（华硕 Transformer 上的 4.0.3），还是我错过了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-07T18:46:45.687

我google了一下。有一个答案。尝试使用 TransitionDrawable。[http://developer.android.com/guide/topics/resources/drawable-resource.html#Transition](http://developer.android.com/guide/topics/resources/drawable-resource.html#Transition)

此外，stackoverflow.com 上的某个地方也有专门针对同一问题的主题。

添加代码示例：

```
 Button btn = (Button)this.findViewById(R.id.btn1);
    //Let's change background's color from blue to red.
    ColorDrawable[] color = {new ColorDrawable(Color.BLUE), new ColorDrawable(Color.RED)};
    TransitionDrawable trans = new TransitionDrawable(color);
    //This will work also on old devices. The latest API says you have to use setBackground instead.
    btn.setBackgroundDrawable(trans);
    trans.startTransition(5000); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-05T23:02:45.573

这似乎是一个老问题。我在遇到类似问题时偶然发现了这个问题。

最后，这只是Android中的一个错误。该代码应该可以工作，但是 AnimatorInflater 在设置评估器时会出错。

因此，`TypeEvaluator`在通货膨胀之后再次设置就可以了。

```
 ObjectAnimator objAnim = (ObjectAnimator)AnimatorInflater.loadAnimator(getActivity(), R.animator.animator_bkg);
    objAnim.setTarget(view);
    objAnim.setEvaluator(new ArgbEvaluator());
    objAnim.start(); 
```

设置为`new ArgbEvaluator()`预期的动画作品。

# c# - dataGridView 中的正确结果换行

> ID：11097695
> 
> 赞同：3
> 
> 时间：2012-06-19T08:59:05.213
> 
> 标签：c#, datagridview

我正在使用`DataGridView`and `Wrap="True"`。

但是当我在 DataGridView 中输入文本时。文本在单元格内上升。但我希望 DataGridView 中的整行自动下降。

结果不正确：

![在此处输入图像描述](../Images/c97eec60e6ac68c1ef5e7ccccfe6f36a.png)

正确的结果：

![在此处输入图像描述](../Images/ec20c334a9f333b6ca5f54557077c745.png)

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:48:02.997

你必须设置

`AutoSizeRowsMode = DisplayedCell`

和

`RowDefaultCellStyle: WrapText=True`

# java - 使用 iReport 操作甘特图的时间范围

> ID：11097696
> 
> 赞同：1
> 
> 时间：2012-06-19T08:59:08.363
> 
> 标签：java, jasper-reports, ireport, jfreechart

我正在尝试在*iReport*中开发甘特图，但时间范围以月为单位显示。我希望它在日期或星期。

这在*iReport*中可行吗？

![图片](../Images/8bba1009eeb171d2c45874e51a741fe6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:30:06.263

我不熟悉[ireport](/questions/tagged/ireport "显示标记为“ireport”的问题")，但您可以通过指定所需的时间间隔来使用[此处显示的方法。](https://stackoverflow.com/a/7771293/230513)`DateTickUnitType.DAY`一个相关的例子可以在[这里](https://stackoverflow.com/q/11010228/230513)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-07T15:16:46.047

您可以扩展页面宽度和图表宽度以适应更短的范围。间隔会自动调整到可用的页面宽度。

# titanium - 带有图像的 Titanium 通知（android toast）

> ID：11097697
> 
> 赞同：0
> 
> 时间：2012-06-19T08:59:16.340
> 
> 标签：titanium, titanium-mobile

我想将图像显示为吐司而不是纯文本消息。我试过了：

```
try{
  var toast = Titanium.UI.createNotification({
    duration: Ti.UI.NOTIFICATION_DURATION_LONG,
    background: '/images/img1.png'
  });
  toast.show();
}
catch (err)
{
  alert(err.message);
} 
```

应用程序在没有发出任何警报的情况下崩溃。我也试过：

```
try{
  var toast = Titanium.UI.createNotification({
    duration: Ti.UI.NOTIFICATION_DURATION_LONG,
    message: 'text',
  });
  toast.setBackgroundImage('/images/img1.png');
  toast.show();
}
catch (err)
{
  alert(err.message);
} 
```

但同样的问题。应用程序崩溃而不给出错误警报。任何人都知道如何在吐司中给出图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:22:20.603

我认为您错过了背景图像路径中的“..”。

**/images/img1.png**应该是： ../images/ **img1.png**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:07:56.790

我通过下面的函数解决了它。我已经根据我的要求决定了淡出时间（即总时间的 10%）。此代码可能需要手动处理后退按钮按下事件。

```
var createImageToast = function (img, time)
{
    Ti.UI.backgroundColor = 'white';
    var win = Ti.UI.createWindow();
    var image = Ti.UI.createImageView({
      image: img,
    });
    win.add(image);
    win.open();
    setTimeout(function(){
        decreaseImageOpacity(win,image,1,parseInt(time/10));
    },parseInt(time*9/10));
}
var decreaseImageOpacity = function (win, image, opacity, time)
{
    if(opacity<=0)
    {
        win.close();
    }
    else
    {
        setTimeout(function(){
            image.setOpacity(''+opacity);
            decreaseImageOpacity(win,image,opacity-0.1, time);
        },parseInt(time/10));
    }   
} 
```

# php - 导出查询为 csv 需要改进

> ID：11097698
> 
> 赞同：0
> 
> 时间：2012-06-19T08:59:18.987
> 
> 标签：php, mysql, csv

我正在构建一个代码，它可以帮助我检索查询并将其导出为 csv，一切正常，但 id 的作用是，如果我转到 /query.php，它会立即下载 csv 文件，而我想点击以便下载。

你能帮我怎么做吗？

这是代码..

```
 $query = sprintf( 'SELECT * FROM hostess' );
  $result = mysql_query( $query, $conn ) or die( mysql_error( $conn ) );

  header( 'Content-Type: text/csv' );
  header( 'Content-Disposition: attachment;filename=export.csv' );

  $row = mysql_fetch_assoc( $result );
  if ( $row )
  {
    echocsv( array_keys( $row ) );
  }

  while ( $row )
  {
    echocsv( $row );
    $row = mysql_fetch_assoc( $result );
  }

  function echocsv( $fields )
  {
    $separator = '';
    foreach ( $fields as $field )
    {
      if ( preg_match( '/\\r|\\n|,|"/', $field ) )
      {
        $field = '"' . str_replace( '"', '""', $field ) . '"';
      }
      echo $separator . $field;
      $separator = ',';
    }
    echo "\r\n";
  }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:02:19.400

创建一个包含指向 CSV 生成脚本的链接的页面。

# 编辑

您可以创建一个简单的 HTML 表单，使用查询字符串将参数传递给 CSV 脚本。例子：

```
<form action="export.php" method="get" target="_blank">
    <input type="text" name="param1">
    <input type="text" name="param2">
    ...
    <input type="submit">
</form> 
```

您的 CSV 导出脚本几乎不需要修改：它应该处理查询字符串变量以构建查询。就像是：

```
$where = "1 = 1";
if ($param1 = filter_input(INPUT_GET, "param1"))
{
    $where .= " AND param1 = '" . mysql_real_escape_string($param1) . "'";
}
if ($param2 = filter_input(INPUT_GET, "param2"))
{
    $where .= " AND param2 = '" . mysql_real_escape_string($param2) . "'";
}
...
$query = sprintf( 'SELECT * FROM hostess WHERE $where' ); 
```

当您提交表单时，它会请求导出页面，并传递查询字符串中的参数（例如 export.php?param1=foo¶m2=bar）。该脚本将发送一个 CSV 文件。该`target=_blank`属性被添加到表单上，以便将 CSV 文件加载到新的选项卡/窗口中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:02:14.283

使用链接设置另一个页面。这样，您可以从任何页面链接到 CSV 文件。

# android - 如何在我的 android 应用程序中每 n 分钟更新一次后台位置？

> ID：11097700
> 
> 赞同：0
> 
> 时间：2012-06-19T08:59:27.157
> 
> 标签：android, background-process

我正在开发一个需要*对我的位置进行后台更新*的 android 应用程序。

我不知道如何在后台运行我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:03:10.743

您应该使用 Service 类，它的工作原理和文档可以在这里找到。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

该服务类似于 Activity，但没有 UI，即使用户正在使用其他应用程序，它也可以在后台运行。

问候
托拜厄斯

# ruby - Ruby 运行 shell 命令不起作用（对于 facebook 应用程序）

> ID：11097704
> 
> 赞同：1
> 
> 时间：2012-06-19T08:59:39.580
> 
> 标签：ruby, facebook, shell, android-activity, command

我正在尝试运行一个系统调用，它将向 facebook 上的用户发布活动。当我在命令行上运行它时，一切正常，但在我的 RoR 控制器上，我没有得到任何结果。我拥有为用户发布活动所需的所有权限，并且我已经尝试过使用 system()、反引号(`)、exec() 和 %x，但仍然没有运气。对此有任何想法吗？这是我的代码：

```
post = "curl -F 'access_token=#{session[:access_token]}' -F 'achievement=https://example.com/main/fbobject' 'https://graph.facebook.com/me/app_fb:send'"
system(post) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:39:03.750

现在工作正常。作为参考，这里是解决方案。
在指令下的服务器设置上，我有：

```
 SetEnv PATH /usr/local/bin
 SetEnv LD_LIBRARY_PATH /usr/local/lib 
```

并补充说：

```
 SetEnv PATH /usr/local/bin:/usr/bin/
 SetEnv LD_LIBRARY_PATH /usr/local/lib:/usr/bin/lib 
```

我已经包括在内`:/usr/bin/`，并且`:/usr/bin/lib`因为 curl 命令位于那里。

# phpexcel - PHPExcel - 读取过去的最后一行

> ID：11097706
> 
> 赞同：5
> 
> 时间：2012-06-19T08:59:42.287
> 
> 标签：phpexcel

我对我拥有的一些文件的 PHPExcel 行为感到有些困惑。这些文件包含大约。3000 行数据，但根据 PHPExcel，使用的最后一行是 65535。我尝试从文件中剪切几行并将它们粘贴到一个新文件中，但无济于事。不管是Excel5还是Excel2007格式，结果都是一样的。

有什么想法可以在这里找到错误吗？

代码：

```
 $cr=$xls->getActiveSheet()->getHighestRow();
    $cn=PHPExcel_Cell::columnIndexFromString($xls->getActiveSheet()->getHighestColum‌​n()); 
    for ($z=2; $z<=$cr; $z++) { 
        $class=($z%2)?"odd":"even"; 
?> 
    <tr class="<?php echo $class; ?>"> 
    <?php for ($s=0; $s<$cn; $s++) { 
        $tmp=$xls->getActiveSheet()->getCellByColumnAndRow($s,$z)->getValue();?> 
        <td><?php echo $tmp; ?></td> 
    <?php } ?> </tr> 
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:26:21.063

所需要的只是一个空白单元格，最后一列/行可能比您预期的要高很多。甚至打印布局或样式也可以伪造存储的最高值。在 MS Excel 中打开文件并按 Ctrl-End，它将带您到 Excel 识别的最后一个单元格。

除了 getHighestRow() 和 getHighestColum() 之外，还有一个（较慢的）getHighestDataRow() 和 getHighestDataColumn() 方法，用于识别实际包含单元格数据的最高行和最高列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:14:18.970

```
$objPHPExcel->setActiveSheetIndex(0)->getHighestRow(); 
```

或者

```
$objPHPExcel->setActiveSheetIndex(0)->calculateWorksheetDimension(); 
```

它将范围作为字符串返回，例如 A1:AC2048

尽管其中包含尾随的空白行和列。

或者您可以使用迭代器遍历现有的行和列，以获取工作表使用范围内的每个单元格。有关示例，请参阅生产发行版中的 /Tests/28iterator.php。迭代器可以设置为忽略空格。

资源：

[如何找出使用 PHPExcel 从 Excel 文件中读取的行数和列数？](https://stackoverflow.com/questions/4562527/how-to-find-out-how-many-rows-and-columns-to-read-from-an-excel-file-with-phpexc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-20T20:31:23.463

马克贝克是对的。所以我通过以下步骤解决了我的问题：

1.  从有数据的最后一行之后的第一个空白单元格中执行 ctrl+end。例如，如果我有最后一行数据是 A3 到 D3。我将在单元格 A4 中执行 ctrl_end

    *   这将突出显示空白行的数量
2.  右键单击选定的行（按照第一步选择的行）并选择“删除”。

3.  它将打开弹出窗口。选择“整行”并单击“确定”按钮

因此，无论您的代码必须加载 excel 数据，它都只会读取那些有数据的行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T09:08:13.283

这没有错误。“空”电子表格仍然包含许多空单元格。Excel 通常有 65536 行和 256 列。

# jquery - 当我关注文本框时，jquery 验证不会消失

> ID：11097708
> 
> 赞同：0
> 
> 时间：2012-06-19T08:59:57.877
> 
> 标签：jquery, jquery-validate, validation

我正在使用我的代码如下形式的 jquery 验证

jQuery

```
$(document).ready(function () {
    $('#myformid').validate();
    $.validator.addMethod("endDate", function (value, element) {
        var startDate = $('.startDate').val();
        return Date.parse(startDate) <= Date.parse(value);
    }, "* End date must be Equal/After start date");

}); 
```

我正在尝试将两个日期与 jquery 进行比较，如果结束日期大于开始日期，则 jquery 显示验证错误，但在显示错误后，如果我输入一些有效日期，验证消息不会消失，直到我提交表单。应该是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:34:48.377

如果您仅更改 endDate，则验证应该可以正常工作（请参见[此处](http://jsfiddle.net/ryleyb/zhN6q/)，提交表单，然后修复 endDate，错误消息将消失），但我猜您的问题是当您更改 startDate 以更正问题时与结束日期...

在这种情况下，您还需要`endDate`在 startDate 更改时触发验证：

```
$('input[name="startDate"]').blur(function(){
    if ($('input[name="endDate"].error').length){
        validateObject.element($('input[name="endDate"]'));
    }        
}); 
```

if 语句只是检查 endDate 输入是否已经处于“错误”状态，如果是则重新验证它。 `validateObject`是 validate 对象，它是从`$('#myformid').validate()`.

你可以在这里看到那个版本：http: [//jsfiddle.net/ryleyb/zhN6q/1/](http://jsfiddle.net/ryleyb/zhN6q/1/)

# winapi - 指定以编程方式附加虚拟磁盘 (.vhd) 时要使用的驱动器号

> ID：11097709
> 
> 赞同：2
> 
> 时间：2012-06-19T09:00:08.323
> 
> 标签：winapi, virtual, vhd

我正在使用[`OpenVirtualDisk`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323680%28v=vs.85%29.aspx)和[`AttachVirtualDisk`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323692%28v=vs.85%29.aspx)函数来挂载 VHD 文件，但在挂载 vhd 文件时找不到如何指定驱动器号。

我想指定要挂载的驱动器号，例如（G:、H:、K: 等）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T14:02:39.197

我自己还没有尝试过，但可能是先在没有驱动器号的情况下附加它（参见标志），然后再打电话给`SetVolumeMountPoint`自己`DefineDosDevice`。两者都允许您传递所需的驱动器号。（这当然带有竞争条件。即使您认为驱动器号是免费的，但一旦您调用 SetVolumeMountPoint，它可能就不是了）

# node.js - 将事件绑定到所有 socket.io 连接

> ID：11097710
> 
> 赞同：1
> 
> 时间：2012-06-19T09:00:16.397
> 
> 标签：node.js, socket.io

我知道可以使用 向所有连接发出事件`io.sockets.emit('some event')`，但我也可以将事件全局绑定到所有当前和未来的连接吗？可能看起来像

```
io.sockets.on('feedTheDog', function (data) {
    // Someone told me to feed the dog..
}); 
```

[`.removeAllListeners()`](http://nodejs.org/api/events.html#events_emitter_removealllisteners_event)另外，我可以使用 Socket.IO删除事件侦听器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:34:22.200

我也不认为您可以将事件绑定到未来的连接，但是是的，您可以将 removeAllListeners 与 socket.io 一起使用。他们将节点的事件发射器移植到浏览器，所以那里的 api 完全相同。这是它的代码：[https ://github.com/LearnBoost/socket.io-client/blob/master/lib/events.js](https://github.com/LearnBoost/socket.io-client/blob/master/lib/events.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T17:38:24.193

您可以使用`socket.io-events`和附加`middleware`函数来处理所有套接字连接的消息，而无需将处理程序实际附加到套接字。

# javascript - 表单提交时，点击函数和提交的顺序

> ID：11097723
> 
> 赞同：5
> 
> 时间：2012-06-19T09:01:21.737
> 
> 标签：javascript, html

关于点击并提交示例如下：

```
<form action="url" method="post">
<input type="text" id="input1"/>
<input type="submit" value="submit" onclick="testFun()"/>
</form> 
```

当我们单击按钮提交时，是否有可能在表单提交后运行函数 testFun

如果答案是否定的。为什么？单击提交按钮时浏览器如何工作？订单是点击功能->提交？是正确的？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:19:12.123

不，您无法在提交表单后执行功能 - 执行的顺序如下：

*   用户点击提交按钮
*   `onclick`函数被执行
*   浏览器将页面提交到`url`表单的action中指定

`false`您可以通过从 onclick 处理程序返回来阻止浏览器提交页面：

```
function myfunc() {
  // do some stuff
  return false;
} 
```

然后应该像这样修改提交按钮：

```
<input type="submit" onclick="return myfunc()"/> 
```

如果您确实希望在提交表单后执行某个功能，您需要使用 AJAX 提交表单 - 这不会导致浏览器离开页面，并且可以在提交表单后执行 JavaScript 函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:03:08.320

这是不可能的，因为表单`action`会将浏览器重定向到该 URL。

1 选项是`testFun()`在您的`action` `url`页面上运行，但这可能是不可能的，具体取决于功能的作用。

如果您要在此处发布有关您实际尝试做什么的更多信息，那么它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:14:22.153

不，但`testFun`可能（反过来）调用另一个异步函数，该函数在表单提交之前不会运行（此时它根本不会运行，因为浏览器会离开页面）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:04:31.147

不，这是不可能的，提交后您超出了当前页面的范围。但是，如果您使用 iframe 提交表单并在父页面上调用该函数，那么我认为它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T09:08:36.470

答案是“不可能”

**为什么**

因为一旦浏览器触发提交事件，所有用户与页面的交互都会停止。触发提交事件后，您的浏览器和网络服务器之间会进行通信。这就是浏览器的设计方式。

在您的情况下，发生表单提交是因为您的页面中有一个表单，并且在该表单中您有一个 type=button 的输入。如果您不想提交页面，您可以将输入的类型更改为按钮。

检查这个小提琴[http://jsfiddle.net/kiranvj/MBxNs/1/](http://jsfiddle.net/kiranvj/MBxNs/1/)

# c++ - 在来自相机的视频上显示一个矩形

> ID：11097728
> 
> 赞同：1
> 
> 时间：2012-06-19T09:01:55.530
> 
> 标签：c++, opencv, camera

基本上我需要从摄像机捕获视频，对帧进行一些处理，并为每一帧显示一个检测矩形。

示例：[http ://www.youtube.com/watch?v=aYd2kAN0Y20](http://www.youtube.com/watch?v=aYd2kAN0Y20)

您将如何将此矩形叠加在摄像机（usb）的输出上？(c++)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:37:12.157

我会使用 OpenCV，一个开源成像库从网络摄像头/视频文件中获取输入。以下是有关如何安装它的教程：

[http://opensourcecollection.blogspot.com.es/2011/04/how-to-setup-opencv-22-in-codeblocks.html](http://opensourcecollection.blogspot.com.es/2011/04/how-to-setup-opencv-22-in-codeblocks.html)

然后我会使用这段代码：

```
CvCapture *capture = cvCreateCameraCapture(-1);
IplImage* frame = cvQueryFrame(capture); 
```

要获取图像，`frame`从`CvCapture`, `capture`。

在这种情况下，`capture`直接从摄像机拍摄，但您也可以从视频文件创建它： `CvCapture *capture = cvCreateFileCapture("filename.avi");`

然后，我将使用此处定义的函数绘制图像：http: [//opencv.willowgarage.com/documentation/drawing_functions.html](http://opencv.willowgarage.com/documentation/drawing_functions.html)

顺便说一句，Youtube 视频中的形状不是矩形。是一个平行四边形。

* * *

如果你想现场做，那么你基本上可以把它放在一个循环中，得到一个帧，处理它，在上面画图，然后输出图像，像这样：

你会在你的循环之前包括这个： `cvNamedWindow("Capture", CV_WINDOW_AUTOSIZE);`

然后，在你的循环中，你会这样说： `cvShowImage("Capture", frame);`

处理后。

* * *

**编辑**要在 C++ 中执行此操作，请像这样打开您的网络摄像头：

```
VideoCapture cap(0); // open the default camera
if(!cap.isOpened())  // check if we succeeded
    return -1; 
```

要从文件初始化它，而不是放入相机索引，放入文件路径。

像这样从相机中获取帧：

```
 Mat frame;
 cap >> frame; // get a new frame from camera 
```

然后你可以在这里找到绘图函数：http: [//opencv.willowgarage.com/documentation/cpp/core_drawing_functions.html](http://opencv.willowgarage.com/documentation/cpp/core_drawing_functions.html)

干杯!

# java - AsyncTask，在 onPostExecute vs get() 中处理结果

> ID：11097733
> 
> 赞同：2
> 
> 时间：2012-06-19T09:02:15.127
> 
> 标签：java, android, android-asynctask

我想处理来自`AsyncTask`课堂外的返回结果。

例如，使用 有什么缺点`Location loc = TheClass.execute().get();`吗？我应该在课堂内
处理结果吗？`onPostExecute`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:10:04.137

get() 方法不是很好的方法，因为它停止了 UI 线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:12:03.527

唯一可以确保您开始的操作`doInBackground()`已经完成的地方是回调方法`onPostExecute()`。因此，就目前而言，使用 get() 并不是一个明智的想法`AsyncTask`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:08:06.417

get() 让您（当前线程）等到结果到来并且 onPostExecute 异步工作，并且在后台工作完成后像回调一样工作。

[http://developer.android.com/reference/android/os/AsyncTask.html#get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)

公开最终结果获取（）

如有必要，等待计算完成，然后检索其结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:11:56.367

```
get() 
```

get() 的目的是阻塞直到获得结果。这可能很有用，例如，如果您有多个任务，其中一个使用另一个。一个任务可以启动另一个任务并调用 get() 以等待它完成，然后再继续自己的工作。

```
onPostExecute (Result result) 
```

在 doInBackground(Params...) 之后在 UI 线程上运行。指定的结果是 doInBackground(Params...) 返回的值。

如果任务被取消，则不会调用此方法。

# matlab - Matlab中的变量变量

> ID：11097738
> 
> 赞同：1
> 
> 时间：2012-06-19T09:02:33.143
> 
> 标签：matlab, file-io, eval

我有 30 个带有数据的 txt 文件，我想从这些文件中创建名为“文件名”的动态向量

```
pathforindependents = 'C:\MatLab\independent\'

independents = dir(fullfile(pathforindependents,'ind*.txt'))              

for i = 1:length(independents)

    filename = independents(i).name;
    r=regexp(filename,'\.','split');
    qnumber = r(2)
    qtitle=r(3)

    qpath = strcat(pathforindependents,filename)
    qdata = load(qpath)

    mtrxPrefix = 'mtrx_';

    v = strcat(mtrxPrefix,qtitle);

    eval(???????????????????????)

end 
```

但我不知道我该怎么做。无论我尝试什么，Matlab 都会给我“未定义的函数 'eval' 用于类型‘cell’的输入参数。” 错误？

我的数据文件结构就像

**ind.01.AGE.txt**

```
0
1
0
0
0
1
1
0
1
... 
```

最后我想达到这个

```
mtrx_AGE =
0
1
0
0
0
1
1
0
1
... 
```

我该怎么做 ？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:08:09.037

要将变量放在基础工作区中，请使用[assignin](http://www.mathworks.nl/help/techdoc/ref/assignin.html)：

```
 assignin('base', v, qdata); 
```

正如您在[assignin 文档](http://www.mathworks.nl/help/techdoc/ref/assignin.html)中看到的，对于某些分配情况，您可能需要使用[evalin](http://www.mathworks.nl/help/techdoc/ref/evalin.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:40:34.443

您可以使用带有 sprintf 的结构中的字段来动态命名变量：

```
for i = 1:100
   my_struct.(sprintf('A%s%i','filename',i)) = i^2
end 
```

将使

```
my_struct.Afilename1 = 1
my_struct.Afilename2 = 4
my_struct.Afilename3 = 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:41:12.127

阅读[Mathworks 技术说明 1103](http://www.mathworks.com/support/tech-notes/1100/1103.html)，了解为什么应该避免像现在这样使用 EVAL。替代方案包括单元阵列或结构。

# c# - DNN 博客模块如何更改博客文章顺序

> ID：11097739
> 
> 赞同：4
> 
> 时间：2012-06-19T09:02:33.267
> 
> 标签：c#, .net, dotnetnuke, dotnetnuke-5, dotnetnuke-module

在 DotNetNuke(DNN) 博客模块中，如何更改博客文章的顺序？默认情况下，最新的博客条目将始终显示在顶部。如何更改博客条目的顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:07:52.337

这需要您下载博客模块的源代码并自己添加此功能。它需要至少一个 UI 元素，例如切换排序链接，并修改 DAL 以响应 UI 元素操作。

# c# - 获取列表框中项目的索引c#

> ID：11097746
> 
> 赞同：2
> 
> 时间：2012-06-19T09:02:48.970
> 
> 标签：c#

我正在尝试获取列表框中每个项目的索引这是我的代码

```
 foreach (ListItem lstItem in lstCostCenter.Items)
           {
               int x = lstCostCenter.Items.IndexOf(lstItem);

           } 
```

但每次它只返回 0。

请有人帮助我。

谢谢 Gulrej

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:04:00.127

为什么不使用 for 循环？

```
for (int i = 0; i < lstCostCenter.Items.Count; i++)
{
    ListItem lstItem = lstCostCenter.Items[i];
} 
```

当前项目的索引是`i`。

# java - 规范化 Java bean 属性名称

> ID：11097748
> 
> 赞同：9
> 
> 时间：2012-06-19T09:02:52.003
> 
> 标签：java, javabeans

我有一堆第三方 Java 类，它们对本质上相同的属性使用不同的属性名称：

```
public class Foo {
   public String getReferenceID();
   public void setReferenceID(String id);
   public String getFilename();
   public void setFilename(String fileName);
}

public class Bar {
   public String getRefID();
   public void setRefID(String id);
   public String getFileName();
   public void setFileName(String fileName);
} 
```

我希望能够以规范化的形式解决这些问题，这样我就可以多态地对待它们，这样我就可以用 Apache BeanUtils 做一些事情，比如：

```
PropertyUtils.copyProperties(object1,object2); 
```

显然，为每个类编写一个适配器是微不足道的......

```
public class CanonicalizedBar implements CanonicalizedBazBean {
    public String getReferenceID() {
        return this.delegate.getRefID();
    }
    // etc.
} 
```

但我想知道那里有更普遍和动态的东西吗？需要属性名称等价的一对多映射和委托类并生成适配器的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:01:36.467

我从未使用过它，但我认为您正在寻找[Dozer](http://dozer.sourceforge.net)：

> Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。通常，这些 Java Bean 将具有不同的复杂类型。
> 
> Dozer 支持简单属性映射、复杂类型映射、双向映射、隐式-显式映射以及递归映射。这包括映射集合属性，这些属性也需要在元素级别进行映射。
> 
> Dozer 不仅支持属性名称之间的映射，还支持类型之间的自动转换。大多数转换方案都支持开箱即用，但 Dozer 还允许您通过 XML 指定自定义转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T19:29:19.237

1.  第一个选项是[推土机](http://dozer.sourceforge.net/)。

2.  第二个选项是带有调整的[Smooks](http://www.smooks.org/mediawiki/index.php?title=Main_Page)框架。使用 Smook 的图形映射器将是有益的。

3.  另一种选择是带有自定义映射器的[XStream 。](http://xstream.codehaus.org/faq.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T00:31:31.730

也许是这样的：

```
public class CanonicalizedBar implements CanonicalizedBazBean {
public String getReferenceID() {
    Method m = this.delegate.getClass().getDeclaredMethod("getReferenceID");
    if(m == null)
        m = this.delegate.getClass().getDeclaredMethod("getRefID");
    ...
    return m.invoke();
}
// etc.
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T03:04:03.477

虽然，我个人从未使用过它。我注意到一个名为[orika](http://code.google.com/p/orika/wiki/GettingStartedGuide)的项目被认为具有最佳性能和自动理解许多此类映射的能力。无论如何，它还支持自定义映射并使用生成的代码来隐式定义适配器。

您还可以定义自定义映射器，也就是说，如果您知道如何规范成员名称，则可以使用该知识来构建适用于所有对象的映射。例如：

```
DefaultFieldMapper myDefaultMapper = new DefaultFieldMapper() {
   public String suggestMapping(String propertyName, Type<?> fromPropertyType) {
      // split word according to camel case (apache commons lang)
      String[] words= StringUtils.splitByCharacterTypeCamelCase(propertyName);
      if(words[0].length() > 6) {
         // trim first camel-cased word of propery name to 3 letters
         words[0]= words[0].substring(0,2);
         return StringUtils.join(words);
      } else {
         // remains unchanged
         return propertyName;
      }   
   }
}

mapperFactory.registerDefaultFieldMapper(myDefaultMapper ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T05:36:38.457

我没有做太多，但你可以使用[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)来做到这一点。

我认为您应该能够为每个内部调用真实方法的类添加一个方法。看到这篇[文章](http://www.ibm.com/developerworks/java/library/j-aspectj/)的一半，它谈到了 mixins。

[AspectJ](http://www.eclipse.org/aspectj/)可能是最流行的实现。

# c# - XML Reader 抛出 Object Null 异常，但节点存在（？！）

> ID：11097750
> 
> 赞同：0
> 
> 时间：2012-06-19T09:02:55.997
> 
> 标签：c#, wpf, xml

我希望有人能告诉我为什么我会得到恼人的 - “xml object reference not set to an instance ..”错误。

我正在寻找的元素（节点？）似乎存在，而且我也没有拼错：[

我可能在这里做一些愚蠢的事情，但任何帮助都将不胜感激。

我的代码：

```
 private void button1_Click(object sender, RoutedEventArgs e)
{

    XmlDocument reader = new XmlDocument();
    reader.Load("Kotaku - powered by FeedBurner.xml");
    XmlNodeList titles = reader.GetElementsByTagName("title");
    XmlNodeList dates = reader.GetElementsByTagName("pubDate"); 
    XmlNodeList descriptions = reader.GetElementsByTagName("description");
    XmlNodeList links = reader.GetElementsByTagName("link"); 
    for (int i = 0; i < titles.Count; i++)
    {
        textBox1.AppendText(Environment.NewLine + titles[i].InnerText);
        textBox1.AppendText(Environment.NewLine + descriptions[i].InnerText); //<<-- Throws Object Ref Null Exception
        textBox1.AppendText(Environment.NewLine + links[i].InnerText);
        textBox1.AppendText(Environment.NewLine + dates[i].InnerText); //<<-- Throws Object Ref Null Exception

    }  

} 
```

我使用的 XML 是一个保存的 XML 页面，来自： http: [//feeds.gawker.com/kotaku/full](http://feeds.gawker.com/kotaku/full)

我现在的工作方式如下：我已经保存了上面链接中的页面（这是一个 XML 页面）并将其放在我的 EXE 旁边以便于访问。然后我运行代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:21:59.887

您阅读 RSS 的方式是错误的。首先获取所有项目并遍历每个项目并构建文本。如果您可以使用`StringBuilder`并最终将其转换为字符串，那就更好了。在访问对象的属性之前，您可以检查 null。

```
XmlDocument RSSXml = new XmlDocument();
RSSXml.Load("Kotaku - powered by FeedBurner.xml");
XmlNodeList RSSNodeList = RSSXml.SelectNodes("rss/channel/item");
StringBuilder sb = new StringBuilder();
foreach (XmlNode RSSNode in RSSNodeList)
{
    XmlNode RSSSubNode;
    RSSSubNode = RSSNode.SelectSingleNode("title");
    string title = RSSSubNode != null ? RSSSubNode.InnerText : "";
    RSSSubNode = RSSNode.SelectSingleNode("link");
    string link = RSSSubNode != null ? RSSSubNode.InnerText : "";
    RSSSubNode = RSSNode.SelectSingleNode("description");
    string desc = RSSSubNode != null ? RSSSubNode.InnerText : "";
    RSSSubNode = RSSNode.SelectSingleNode("pubDate");
    string pubDate = RSSSubNode != null ? RSSSubNode.InnerText : "";
    sb.Append("<font face='arial'><p><b><a href='");
    sb.Append(link);
    sb.Append("'>");
    sb.Append(title);
    sb.Append("</a></b><br/>");
    sb.Append(desc);
    sb.Append(pubDate);
    sb.Append("</p></font>");
}
textBox1.Text = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:19:24.260

它不能在 for 循环中运行，因为标题、描述、链接和日期中的项目数（在我运行它时）分别为：39 38 39 37。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:13:30.657

我检查了[http://feeds.gawker.com/kotaku/full](http://feeds.gawker.com/kotaku/full)的来源。

我所看到的 - 至少在 HMTL 源代码中 -`<title>`频道标题中也有一个元素。尚不属于任何项目。当您用作cicle`title.Count`的限制时，您的代码是否可能会计算一些像这样的额外元素？`for`

如果是这种情况，则可能是循环中的其他数组中没有足够的元素。你也检查过这个吗？

# vb.net - 单击 vb.net 中的 HTML 按钮

> ID：11097758
> 
> 赞同：0
> 
> 时间：2012-06-19T09:03:11.723
> 
> 标签：vb.net

我必须以编程方式单击网站第三页上的 HTML 按钮。该按钮没有ID。它只有名称 type 和 value 。该按钮的 HTML 代码如下所示

```
<FORM NAME='form1' METHOD='post' action='/dflogin.php'><INPUT TYPE='hidden' NAME='txtId' value='E712050-15'><INPUT TYPE='hidden' NAME='txtassId' value='1'><INPUT TYPE='hidden' NAME='txtPsw' value='HH29'><INPUT TYPE='hidden' NAME='txtLog' value='0'><h6 align='right'><INPUT TYPE='SUBMIT' NAME='btnSub' value='Next' style='background-color:#009900; color:#fff;'></h6></FORM> 
```

我正在使用以下代码单击它

```
 For Each webpageelement As HtmlElement In allButtons

        If webpageelement.GetAttribute("value") =  "Next" Then

            webpageelement.InvokeMember("click")

        End If

    Next 
```

但我无法点击它。我正在使用 vb.net 2008 平台。谁能告诉我点击它的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:21:02.677

我遇到了和你一样的问题。InvokeMember 看起来是正确的，所以我只能假设它没有拾取正确的 html 元素。尝试使用该值显式引用元素。以下代码对我有用，但我已经为您调整了它：

```
 For Each webpageelement As HtmlElement In allButtons
      If webpageelement.GetAttribute("value").Equals("E712050-15") Then
        webpageelement.InvokeMember("click")
        Exit For
      End If
 Next 
```

祝你好运 ：）

# asp.net-mvc - 使用部分渲染

> ID：11097759
> 
> 赞同：0
> 
> 时间：2012-06-19T09:03:19.050
> 
> 标签：asp.net-mvc

这是我的代码

```
@{
    ViewBag.Title = "MachinesManagement";
}
@using (Ajax.BeginForm("MachineList", "MachinesManagement", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "grd" }))
{

<div id="filterDiv">
@{Html.RenderPartial("/Views/MachinesManagement/MachineFilter.cshtml");}
</div>
<div id="grd">
@{Html.RenderPartial("/Views/MachinesManagement/MachineList.cshtml");}
</div>
} 
```

`

当我尝试运行应用程序时出现以下错误

“传入字典的模型项为空，但此字典需要 'KCMSWebClient.MachineManagementService.NtegraSearchCriteria' 类型的非空模型项。”

有什么帮助吗？？？？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:04:44.580

错误信息非常清楚。您需要将`KCMSWebClient.MachineManagementService.NtegraSearchCriteria`类的一个实例传递给您的部分。这可以使用`RenderPartial`助手的第二个参数来完成：

```
@{Html.RenderPartial(
    "/Views/MachinesManagement/MachineFilter.cshtml", 
    PASS_AN_INSTANCE_OF_THE_REQUIRED_CLASS_HERE
);} 
```

如果您不使用第二个参数，该`RenderPartial`方法只会传递当前视图模型 ( `@Model`)。而且由于我在 Razor 页面的顶部看不到任何`@model`指令，因此我假设您的视图没有强类型化到任何模型，并且当您从控制器操作提供此视图时，您没有将任何模型传递给它。

# java - 命令提示符中的 java.lang.NoClassDefFoundError

> ID：11097760
> 
> 赞同：0
> 
> 时间：2012-06-19T09:03:27.537
> 
> 标签：java

> **可能重复：**
> [我可以从 Eclipse 创建的命令行程序运行吗？](https://stackoverflow.com/questions/2276219/can-i-run-from-command-line-program-created-by-eclipse)

当我尝试从命令提示符运行类文件时，我遇到了异常，就像我在 eclipse 中运行一样，我没有收到任何错误

尝试从同一个文件夹运行

```
 Exception in thread "main" java.lang.NoClassDefFoundError: testClient (wrong nam
    e: com/mindcraft/queryExecutor/actionclass/testClient)
            at java.lang.ClassLoader.defineClass1(Native Method)
            at java.lang.ClassLoader.defineClassCond(Unknown Source)
            at java.lang.ClassLoader.defineClass(Unknown Source)
            at java.security.SecureClassLoader.defineClass(Unknown Source)
            at java.net.URLClassLoader.defineClass(Unknown Source)
            at java.net.URLClassLoader.access$000(Unknown Source)
            at java.net.URLClassLoader$1.run(Unknown Source)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(Unknown Source)
            at java.lang.ClassLoader.loadClass(Unknown Source)
            at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
            at java.lang.ClassLoader.loadClass(Unknown Source)
    Could not find the main class: testClient.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:08:58.743

我怀疑你*在*一个目录中运行`com/mindcraft/queryExecutor/actionclass`

相反，您应该在根目录（即 的父级`com`）中运行，如下所示：

```
java com.mindcraft.queryExecutor.actionclass.testClient 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:09:39.303

从具有完整名称空间的根目录运行 .class 文件。即，如果您的类在您的 src 中作为 com.test.App.java 在 com.test 包中，那么在编译其类文件时，将有一个合格的类名作为全名。即，com.test.App.class

因此，从您的 root/src 在命令行中将其作为 java com.test.App 运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:20:38.597

在发布问题之前，请充分搜索该问题之前是否曾被问过甚至更好地回答过。当我用谷歌搜索时，我发现一个[类似的问题](https://stackoverflow.com/q/2276219/883811)正在被回答。希望该链接为您提供您正在寻找的答案

# bash - 有没有办法让 bash 作业控制安静下来？

> ID：11097761
> 
> 赞同：52
> 
> 时间：2012-06-19T09:03:35.467
> 
> 标签：bash, shell, unix, parallel-processing

在后台运行作业时，Bash 非常冗长：

```
$ echo toto&
toto
[1] 15922
[1]+  Done                    echo toto 
```

由于我正在尝试并行运行作业并使用输出，因此我想找到一种使 bash 静音的方法。有没有办法消除这种多余的输出？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-19T23:45:39.667

您可以使用括号在子外壳中运行后台命令，这将使作业控制消息静音。例如：

```
(sleep 10 & ) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-07-09T04:21:42.293

^(注意：以下适用于*交互式*Bash 会话。在*scripts中，**从不*打印作业控制消息。)

**消除 Bash 的作业控制消息**有**两种基本**方案：

 *** * *

### 启动后忘记：

[CodeGnome 的有用答案](https://stackoverflow.com/a/11111042/45375)建议**将后台命令包含在一个简单的子外壳中**- 例如`(sleep 10 &)`- 这有效地使作业控制消息静音 - 无论是在作业*创建*时还是在作业*终止*时。

这有一个**重要的副作用**：

*   **`&` *通过在*子shell中使用控制运算符，您将*失去对后台作业的控制***-`jobs`不会列出它，也不会列出`%%`（最近启动的作业的规范（ID））和`$!`（启动的（最后）进程的PID（作为）最近工作的一部分）将反映它。^([1])

对于**启动后忘记的场景，这*不是*问题**：

*   你只需启动后台工作，
*   然后你让它自己完成（并且你相信它运行正确）。

^([1] 可以想象，您可以自己去寻找进程，通过搜索正在运行的进程以找到与其命令行匹配的进程，但这很麻烦并且不容易变得健壮。)

* * *

### 稍后启动和控制：

如果您想**继续控制工作**，以便以后可以：

*   **杀了它**，如果需要的话。
*   **同步等待**（稍后）完成，

需要一种不同的方法：

*   静音*创建*作业控制消息在下面处理，但为了 ***绝对*****静音*终止*作业控制消息***，您必须**关闭作业控制 shell 选项**：*

     **   `set +m`（`set -m`重新打开）
    *   **警告**：这是一个具有许多**重要副作用的****全局设置**，特别是： ***   用于后台命令的标准输入然后`/dev/null`是当前 shell 的标准输入。
        *   `Ctrl-Z`暂停 ( ) 和延迟暂停 ( `Ctrl-Y`) 前台命令的键盘快捷键被禁用。
        *   有关完整的故事，请参阅[`man bash`](https://linux.die.net/man/1/bash)并（不区分大小写）搜索“作业控制”的出现。*** 
****   要使***创建*****作业控制消息****静音***，请将后台命令包含在**组命令**中，并将后者的 stderr 输出重定向到`/dev/null`*

     *```
    { sleep 5 & } 2>/dev/null 
    ```**** 

 ****以下示例显示了如何在原则上保留对作业的控制权的同时安静地启动后台作业。

```
$ set +m; { sleep 5 & } 2>/dev/null # turn job-control option off and launch quietly
$ jobs # shows the job just launched; it will complete quietly due to set +m 
```

**如果您*不想*关闭*作业*控制选项`set +m`（*`kill``wait`***

 *警告：在*两种极端情况下*，这种技术仍然会产生输出：

*   *如果后台命令立即*尝试从标准输入读取。
*   *如果后台命令立即*终止。

安静地启动工作（如上，但没有`set +m`）：

```
$ { sleep 5 & } 2>/dev/null 
```

`wait`悄悄地为它：

```
$ wait %% 2>/dev/null    # use of %% is optional here 
```

`kill`悄悄地给它：

```
{ kill %% && wait; } 2>/dev/null 
```

`wait`为了使通常由 Bash*异步*显示的终止作业控制消息（在实际进程终止时，杀死后不久）成为来自 的*同步*输出，则需要额外的内容`wait`，然后允许静音。

但是，如前所述，如果作业*自行*完成，仍将显示作业控制消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:23:36.037

将其包装在一个虚拟脚本中：

安静的.sh：

```
#!/bin/bash
$@ & 
```

然后调用它，将您的命令作为参数传递给它：

```
./quiet.sh echo toto 
```

根据您的输入，您可能需要使用引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T10:08:21.677

交互式，没有。它将始终显示作业状态。您可以使用 影响显示状态的时间`set -b`。

没有什么可以阻止您使用命令的输出（通过管道或存储它的变量等）。作业状态由 shell 发送到控制终端，不与其他 I/O 混合。如果您正在做一些复杂的工作，解决方案是编写一个单独的脚本。

只有当你的 bashrc 中有函数使用你想要直接访问交互环境的作业控制时，作业消息才是真正的问题。不幸的是，您对此无能为力。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T19:12:16.357

一种解决方案（无论如何在 bash 中）是将所有输出路由到 /dev/null

```
 echo 'hello world' > /dev/null & 
```

除了 bg 进程的 id 之外，上述内容不会为您提供任何输出。*******

# django - 在 Dreamhost 上，如何让“django-admin startproject”以 django 1.4 的方式正确设置项目？

> ID：11097764
> 
> 赞同：0
> 
> 时间：2012-06-19T09:03:42.373
> 
> 标签：django, dreamhost

我在 Dreamhost 上托管我的网站，实际上我已经设法让 django 大部分工作。我仍在苦苦挣扎的一件事是让 django-admin 表现得像 1.4 而不是 1.2 的版本（这是 dreamhost 运行的）。[我按照这些说明http://blog.oscarcp.com/?p=167](http://blog.oscarcp.com/?p=167)设置了一个 virtualenv 等。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:04:22.317

听起来你在运行 django-admin 之前没有进入你的 virtualenv。说什么`django-admin.py --version`？

# backbone.js - 如何有条件地允许返回事件

> ID：11097768
> 
> 赞同：2
> 
> 时间：2012-06-19T09:03:51.240
> 
> 标签：backbone.js

使用 pushState 开发 BackboneJS 应用程序

当用户单击鼠标的后退按钮或单击浏览器的后退按钮时，我如何捕获事件并执行以下操作：

```
backAction: function(e){
  if (someConditionIsTrue) { preventBackAndDoSomeStuff(); }
  else { doNormalBackEvent() }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:52:03.920

您可以添加一个侦听器以[`window.onpopstate`](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)在用户点击后退按钮时获得通知。

# html - 最后一个 p 属性不应该覆盖它上面的所有 p 属性吗？

> ID：11097776
> 
> 赞同：1
> 
> 时间：2012-06-19T09:04:31.850
> 
> 标签：html, css

```
<style>
#content p {color: yellow;}
p {color: purple;}
p {color: green;}
</style> 
```

当我运行代码时，所有的 p 都变成了黄色而不是绿色（这是我所期望的。）

html代码在这里：

```
<div id="content">
<p>Duis autem vel eum </p>
<p>Duis autem vel eum </p>
<p>Duis autem vel eum </p>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T09:05:34.860

不，因为第一条规则比其他规则具有更高的[特异性](http://www.htmldog.com/guides/cssadvanced/specificity/)。

“最后一个获胜”规则仅适用于具有相同特异性的 CSS 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:10:26.727

没关系，你的 p 变成了黄色，因为 css 优先级。阅读这篇[文章](http://www.stoimen.com/blog/2010/03/11/css-priority-the-difference-between-a-my-class-and-my-class/)，它可以帮助你。

# string - PL/SQL 将字符串转换为布尔值

> ID：11097777
> 
> 赞同：2
> 
> 时间：2012-06-19T09:04:37.603
> 
> 标签：string, extjs, plsql, boolean

我有一个 EXT JS 页面，它发送一个带有一些值的表单。这些值都以字符串形式发送，一些以布尔值形式发送。它正在调用一个参数都是 varchar 的 PL/SQL 过程。由于某种原因，在提交表单时，即使某些值作为布尔值发送，程序也无法将它们作为布尔值接收。从过程中接收到的所有值都是 varchar；并且必须否则它会崩溃。

所以我从表单向程序发送一个布尔值。当它进入程序时，它现在是一个 varchar。如何将其转换回布尔值？

任何帮助都表示赞赏，我觉得我在这里做错了什么。我不明白为什么它将它作为 varchar 接收。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:54:52.167

您是对的，没有 Oracle 内置的字符串到布尔函数，但您可以轻松地自己创建一个：

```
create or replace function to_boolean
  ( p_string varchar2
  ) return boolean
is
begin
  return
    case upper(p_string) 
      when 'TRUE' then true
      when 'FALSE' then false
      else null
      end;
end; 
```

（“else null”是多余的，但我把它放在那里是为了提醒您，如果 upper(p_string) 不是 'TRUE' 或 'FALSE' 则该函数将返回 null）。

您当然可以增强函数以将其他字符串值视为真或假，例如'T'、'YES'、...

# java - 异步队列 - 仅处理最后一条消息

> ID：11097779
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:04:41.697
> 
> 标签：java, asynchronous, queue

```
public void updatePrice(Price update){
   sendPriceUpdate(update); //takes a long time
} 
```

我想构建一个将执行上述操作的类，除非 sendPriceUpdate 调用仍在运行，它会等待并将挂起的更新排队。一旦调用返回，它将发送最后一次更新（并丢弃其他更新）。即等待发送调用返回，然后发送最后一个挂起的价格更新。

使用什么合适的数据结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:08:59.597

最好的解决方案是更新已经知道这一点，并且只获取“增量”数据，即已更改或仅存在差异的数据。如果这不可能，那么您别无选择，只能回滚最新更新。为此，您需要存储以前的更新，以便您可以撤消它并推送新的更新。像这样的东西应该工作：

```
public class Updater
{
    private static Price prevUpdate = null;

    public static synchronized void updatePrice(Price update)
    {
        if (prevUpdate != null)
        {
            rollbackUpdate(prevUpdate);
        }
        sendPriceUpdate(update); //takes a long time        
        prevUpdate = update;
    }
} 
```

我已将其更改为，`static`因为我认为您不需要实例化此类的对象。对我来说看起来像是一个静态服务。如果我错了（例如不同的线程想要使用不同的更新程序，从而跟踪不同的更新），请更改它。

这是线程安全的，但是如果`sendPriceUpdate()`需要很长时间，它会在`updatePrice()`方法上锁定很多线程。这也不考虑抛出任何异常，您应该考虑到这一点。

正如我在评论中所说，恕我直言，这是一个（非常？）糟糕的解决方案，但如果您不知道哪个是最后一个或最后一个何时到来，这是唯一的。软件重新设计可能会解决这种情况，或者在更高级别解决它（在调用之前`updatePrice()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:16:27.410

我建议您使用 Active-Object 模式 - 您应该将队列（AKA Activation-queue 或操作队列）与您的对象相关联。我将首先解释如何在不丢弃的情况下解决，然后解释我认为丢弃应该如何处理。主要思想如下：
A. 你的对象将有一个队列的字段 - 假设一个通用类型的 Queue（具有 PriceOperation 的通用参数）

B. PriceOperation 将持有一个方法对象（java.lang.reflect.method） ，调用的目标对象 - 让我们的 PriceManager（它具有 updatePrice 方法）和参数（假设更新它应该是价格）

C. sendPriceUpdate 将使用“update”的方法对象（假设 Price 有这样的方法）或在同步调用的情况下您将激活的方法的方法对象排入队列和 PriceOperation 的对象

D. 与相关联的线程该对象将在队列中等待，当队列不为空时，它将出列一个 PriceOperation 对象，并使用相关参数（Price 对象）调用目标对象（无论是 PriceManager 还是其他）上的方法

E. 这样，您将能够保持等待更新的队列，并且仍然与您的 PriceManager 异步工作

F. 我刚刚注意到您有兴趣放弃最后的更新 - 如果是这种情况，那么您应该适当地使用优先级队列，而不是队列，并根据时间戳进行优先级排序，这样 PriceOperation最近创建的将被处理。您需要在生产者（PriceManager）和消费者（线程）之间同步这个队列。

# php - 使用 PHP 和 PDFLib 旋转图像

> ID：11097785
> 
> 赞同：3
> 
> 时间：2012-06-19T09:05:15.037
> 
> 标签：php, image-rotation, pdflib

我正在使用此代码在我使用 PDFLib 生成的 PDF 的框中呈现图像

```
$p = new pdflib();

if ($p->begin_document("", "") == 0)
  throw new Exception("Error: " . $p->get_errmsg());

$p->begin_page_ext(0, 0, "width=792 height=612");
$image = $p->load_image("auto", "01.jpg", "");
$p->fit_image($image, 100,200,"boxsize={300 500} fitmethod=entire showborder"); 
```

这按预期工作。现在需要像上面指定的那样在框内旋转图像。

我试过这个：

```
$p->fit_image($image, 100,200,"boxsize={300 500} fitmethod=entire showborder rotate 15"); 
```

但它没有产生任何结果。

更新：当我尝试上面没有显示边框的代码时，它可以工作：

```
$p->fit_image($image, 100,200,"boxsize={300 500} fitmethod=entire rotate 15"); 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:27:29.127

像这样试试。我认为它可能会帮助你，但不确定

```
$extra_pram = "boxsize={" . $int_image_w . " " . $int_image_h . "} position={left top} fitmethod=entire rotate=" . $int_image_rotation;
$this->pdflib->fit_image ( $image_obj, $int_image_x, $int_image_y, $extra_pram ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:37:55.307

您缺少旋转的 = 符号

应该是旋转=15

# html - 使用正确的 HTML 技术从图像创建 Web 表单

> ID：11097789
> 
> 赞同：3
> 
> 时间：2012-06-19T09:05:24.123
> 
> 标签：html, css, forms, html-table, gimp

我计划为我的网站 (XHTML) 创建一个交互式高尔夫记分卡。（顺便说一句。这就是记分卡的样子：[ScoreCard](http://upload.wikimedia.org/wikipedia/commons/3/3d/Golf_Scorekarte.jpg)）。因此，最后应该能够在网站上的虚拟记分卡的适当输入字段中为每个孔插入一个分数。对我来说，交互式记分卡看起来与原始（纸质）记分卡完全相同是非常重要的，因此我的第一个方法是扫描并切片记分卡图像以达到该外观。

在这里你可以看到我切片图像的方式：

![在此处输入图像描述](../Images/5955f523c64f5e8fd4c64b9a2f8f402a.png)

这个想法是为每个分数字段插入 HTML 文本输入，最终结果如下：

![在此处输入图像描述](../Images/e85dbae29a261e1bd967158c595edda5.png)

在对图像进行切片后，我使用 HTML 对其进行了重建。为此，我将图像切片作为单元格背景。

```
<table>
  <tr>
    <td style="background: url("slice1.jpg") width="58px" height="25px">
      <input type="text"></inputText>
    </td>
  </tr>
  ...
</table> 
```

起初，这很好用（因为 Gimp 为此提供了一个非常好的功能）。然后问题是我必须创建一个 HTML 表来创建确切的布局。如您所见，布局的下部分为 3 列。中间的列被分成几行（每个孔）。所以左右列必须跨越这些行。好吧，终于成功了，但它导致了某种缩放问题。如果我放大或缩小表格，则中间列（只有那一列）不会以正确的方式缩放。我无法解决这个问题，所以我开始怀疑这是否是 html 图像虚拟化的正确技术。我真的不是创建网站领域的专家，所以我非常感谢任何帮助。也许有一个完整的其他更好的技术来做到这一点，因为我认为这是网络创作中的一项常见工作。我找不到任何很好的例子或教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:09:26.697

除非我遗漏了任何东西，否则您不需要使用任何图像切片或任何图像来获得这种效果。这一切都可以在纯 CSS 中完成。

下面是如何实现这一目标的粗略示例：

[http://jsfiddle.net/Curt/wxFtJ/](http://jsfiddle.net/Curt/wxFtJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:13:08.503

您现在有一个包含一行的表格和一个带有背景图像的大单元格。你的意思是你想让你的 HTML 表格看起来像这样：

```
<table>
<tr>
<td colspan="3">One row</td>
</tr>
<tr>
<td colspan="3">One row</td>
</tr>
<tr>
<td colspan="3">One row</td>
</tr>
<tr>
<td colspan="3">One row</td>
</tr>
<tr>
<td><input type="text"></td>
<td><input type="text"></td>
<td><input type="text"></td>
</tr>
<tr>
<td><input type="text"></td>
<td><input type="text"></td>
<td><input type="text"></td>
</tr>
<tr>
<td><input type="text"></td>
<td><input type="text"></td>
<td><input type="text"></td>
</tr>
<tr>
<td><input type="text"></td>
<td><input type="text"></td>
<td><input type="text"></td>
</tr>
<tr>
<td><input type="text"></td>
<td><input type="text"></td>
<td><input type="text"></td>
</tr>
</table> 
```

请阅读基本的 HTML 表格样式：[http ://www.w3.org/TR/CSS2/tables.html](http://www.w3.org/TR/CSS2/tables.html)

此外，您真的不应该切片图像来创建表格。

# c# - 获取对视图中单击项目的引用

> ID：11097791
> 
> 赞同：4
> 
> 时间：2012-06-19T09:05:29.653
> 
> 标签：c#, wpf, mvvm

我最近一直在学习 WPF 中的 MVVM 模式，并且刚刚开始制作我的第一个合适的、相当大的应用程序。到目前为止，一切都很顺利，我很喜欢我所看到的。然而，我最近遇到了一个绊脚石。

该应用程序是使用 main 构建的`TabControl`，每个都`TabItem`包含一个非常大的详细信息视图。

```
TabControl inside main View, ItemsSource bound to MainViewModel.OpenTabs
 TabItem with data specific View+ViewModel
 TabItem with data specific View+ViewModel
 TabItem with data specific View+ViewModel
 etc... 
```

`OpenTabs`集合是`ObservableCollection<BaseViewModel>`on `MainViewModel`，而' `TabControl`s`SelectedItem`是必然的`MainViewModel.ActiveTab`。

到现在为止还挺好！但是，我不确定我得到的是如何在遵循 MVVM 的同时处理选项卡的关闭。如果我不想对 MVVM 严格要求（为了正确学习它），我只需在`MouseDown`-headers 上绑定一个 -event `TabItem`，从而在该事件中获取对单击项目的引用，将其从`OpenTabs`以这种方式收集。但是 - 除非我弄错了 - 交互逻辑不应该需要对实际 UI 项目的引用才能有效和正确的 MVVM。

那么，我该如何处理这种 MVVM 风格呢？我是否使用将特定参数发送到我的命令`MainViewModel`？似乎`ICommand`MVVM 中的首选实现不采用对象参数（查看 MVVM Light 以及其他一些教程）。

我是否应该在我的关闭按钮上创建一个`CloseTab(int id)`公共方法`MainViewModel`并从视图代码隐藏中调用它？这似乎是 MVVM 作弊。:)`Click``TabItem`

最后一点 - 即使我单击关闭`TabItem`不是当前活动的，这也应该有效。否则设置起来不难`OpenTabs.Remove(ActiveTab)`。

谢谢你的帮助！我也很感激有关这些问题的推荐阅读/观看的任何链接。

**解决方案：**似乎最好的方法是使用可以接受命令参数的命令。我使用了 MVVM Light 框架中的 RelayCommand：

在 MainViewModel 中：

```
CloseTabCommand = new RelayCommand<BaseViewModel>((vm) =>
{
    OpenTabs.Remove(vm);
}); 
```

在 XAML 中：

```
<Button
Command="{Binding Source={StaticResource MainViewModel}, Path=CloseTabCommand}"
CommandParameter="{Binding}"> 
```

注意：您的绑定路径当然可能会根据您的视图和视图模型的设置方式而有所不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:10:01.923

最好和正确的方法是创建命令。在不同的框架`ICommand`中通常有两种实现，带参数和不带参数（通常你不需要它）。

MVVM light 也有两个`ICommand`实现：[`RelayCommand`](http://mvvmlight.codeplex.com/SourceControl/changeset/view/d60b086fe424#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Command/RelayCommand.cs)和[`RelayCommand<T>`](http://mvvmlight.codeplex.com/SourceControl/changeset/view/d60b086fe424#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Command/RelayCommandGeneric.cs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:11:55.820

我建议创建你自己的`DelegateCommand`实现，一个很好的例子可以在[这里](http://msdn.microsoft.com/en-us/library/ff921126%28v=pandp.20%29.aspx)或[这里](http://kentb.blogspot.com/2009/04/mvvm-infrastructure-delegatecommand.html)找到。或者使用 Prism[变体](http://msdn.microsoft.com/en-us/library/gg431410%28v=pandp.39%29.aspx)，您可以[在此处](http://compositewpf.codeplex.com/)下载。

使用 DelegateCommand，您可以将参数传递给您的 ViewModel。

# java - 在android中处理多个视图

> ID：11097798
> 
> 赞同：0
> 
> 时间：2012-06-19T09:06:02.683
> 
> 标签：java, android, android-layout, views

我已经使用多个活动来处理 android 中的多个视图。我在博客中找到了一些地方，但我迷失在其中。

我无法在 2 个视图之间切换，我的代码如下：

**主文件**

```
public class MultiViewActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button next = (Button) findViewById(R.id.button1);  
        next.setOnClickListener(new View.OnClickListener() {  
         public void onClick(View view) {  
           Intent myIntent = new Intent(view.getContext(), MultiViews2.class);  
           startActivityForResult(myIntent, 0);  
         }  
       });
    }
} 
```

* * *

**xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button android:text="View 2"  
          android:id="@+id/button1"  
         android:layout_width="fill_parent"  
          android:layout_height="wrap_content">  
      </Button>  

</LinearLayout> 
```

* * *

**另一项活动：**

```
 public class MultiViews2 extends Activity {  
    /** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState) {  
      super.onCreate(savedInstanceState);  
      setContentView(R.layout.main2);  
      Button next = (Button) findViewById(R.id.button1);  
            next.setOnClickListener(new View.OnClickListener() {  
             public void onClick(View view) {  
               Intent myIntent = new Intent(view.getContext(), MultiViewActivity.class);  
               startActivityForResult(myIntent, 0);  
             }  
           });  
    }  
  } 
```

* * *

**xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button android:text="View 1"  
          android:id="@+id/button2"  
         android:layout_width="fill_parent"  
          android:layout_height="wrap_content">  
      </Button>  

</LinearLayout> 
```

* * *

**显现 ：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.multiview.org"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MultiViewActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".MultiViews2"></activity>
    </application>

</manifest> 
```

* * *

每当我单击 button2 时，它都会显示错误`the application has stopped unexpectedly`。
上面我错过的任何东西。我对android编程很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:10:24.090

MultiViews2 类中下一行的问题

```
Button next = (Button) findViewById(R.id.button2); 
```

代替

```
Button next = (Button) findViewById(R.id.button1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:12:41.813

好吧，考虑到您的观点令人困惑，我不能说哪个是 main.xml，哪个是 main2.xml - 如果您看到引用了按钮 1，则错误出在其中一个活动中。

```
 Button next = (Button) findViewById(R.id.button1); 
```

所以很明显，它应该是

```
 Button next = (Button) findViewById(R.id.button2); 
```

做出改变，它应该工作。并且为了便于理解，将视图 1 更改为对应于按钮 1，类似地更改为 2。否则，您将遇到更多此类问题

# objective-c - 从带有符号 $ 的数组中添加项目

> ID：11097803
> 
> 赞同：-3
> 
> 时间：2012-06-19T09:06:22.547
> 
> 标签：objective-c, ios5, ios4, xcode4.2, ipad-2

**我有一个 Array ，如果我在控制台中打印它会显示**

```
Price Array=(
    "$100",
    "$300"
) 
```

我需要在每个索引处添加添加对象并将其显示在标签中。请提出任何想法，在这种情况下，它将如何显示带有 $ 符号的 400？ **我试过这个，因为确实加载了**

```
for (int j=0; j<[cartArray2 count]; j++)
    {
        itemPrize =[prizelabel.text floatValue];
        tempVar=itemPrize;
        total=total+tempVar;
        NSString *strTotalAmt = [NSString stringWithFormat:@"%f",total];
        prizelabel.text=strTotalAmt;
    }
    NSLog( @"Toatl= %f",total);` 
```

在接口浮动 itemPrize,tempVar,total 中的位置

* * *

**这就是我所做的**

```
for (int j=0; j<[cartArray2 count]; j++)
{
    NSMutableString *cleanedText = [NSMutableString stringWithCapacity:0];

    NSString *newRecord = [[cartArray2 objectAtIndex:j] stringByReplacingOccurrencesOfString:@"$" withString:@"" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [[cartArray2 objectAtIndex:j] length])];
    [cleanedText appendFormat:@"%@\n", newRecord];

    NSLog(@"Cleaned=%@", cleanedText);
    itemPrize =[cleanedText intValue];
    tempVar=itemPrize;
    total=total+tempVar;
    NSString *strTotalAmt = [NSString stringWithFormat:@"%d",total];
    prizelabel.text=strTotalAmt;
}
NSLog( @"Toatl= %d",total); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:40:41.887

要摆脱 $ 符号，您应该尝试：`[[itemPrize componentsSeparatedByString:@"$"] objectAtIndex:1];`。然后你应该使用`stringWithFormat`方法来进行字符串格式化。

# wordpress - Wordpress 3.4 的自定义后台支持功能？

> ID：11097804
> 
> 赞同：0
> 
> 时间：2012-06-19T09:06:26.883
> 
> 标签：wordpress

我正在编写一个具有自定义背景的 Wordpress 主题，但在 WP 文档中，没有关于检索每个背景参数（图像、颜色、位置等）值的函数的`get_background_color`内容`get_background_image`。

这是支持自定义背景的代码：

```
$custom_background_support = array(
    'default-color'          => 'FFF',
    'default-image'          => '',
    'wp-head-callback'       => 'custom_background_cb'
);

if ( is_wp_version( '3.4' ) )
    add_theme_support( 'custom-background', $custom_background_support ); 
else
    add_custom_background( $custom_background_support ); 
```

这是回调：

```
function academia_custom_background_cb()
{
?>
<style type="text/css">
body{
background-color: #<?=get_background_color();?> !important;
background-image: url('<?=get_background_image();?>');
background-position: ...
background-repeat: ...
...
}</style>
<?php
} 
```

编辑：这些是我需要得到的值。此屏幕截图来自外观 -> 背景。

![外观 -> 背景](../Images/70e40052ad7b19645878dd17dbfb8044.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:55:33.507

老问题，但它出现在我的谷歌搜索相同的信息中。完成 Krike 的回答，确实是`get_theme_mod()`

您可以在默认情况下看到它在工作`wp-head-callback`。

```
/**
 * Default custom background callback.
 *
 * @since 3.0.0
 * @access protected
 */
function _custom_background_cb() {
    // $background is the saved custom image, or the default image.
    $background = set_url_scheme( get_background_image() );

    // $color is the saved custom color.
    // A default has to be specified in style.css. It will not be printed here.
    $color = get_theme_mod( 'background_color' );

    if ( ! $background && ! $color )
        return;

    $style = $color ? "background-color: #$color;" : '';

    if ( $background ) {
        $image = " background-image: url('$background');";

        $repeat = get_theme_mod( 'background_repeat', 'repeat' );
        if ( ! in_array( $repeat, array( 'no-repeat', 'repeat-x', 'repeat-y', 'repeat' ) ) )
            $repeat = 'repeat';
        $repeat = " background-repeat: $repeat;";

        $position = get_theme_mod( 'background_position_x', 'left' );
        if ( ! in_array( $position, array( 'center', 'right', 'left' ) ) )
            $position = 'left';
        $position = " background-position: top $position;";

        $attachment = get_theme_mod( 'background_attachment', 'scroll' );
        if ( ! in_array( $attachment, array( 'fixed', 'scroll' ) ) )
            $attachment = 'scroll';
        $attachment = " background-attachment: $attachment;";

        $style .= $image . $repeat . $position . $attachment;
    }
?>
<style type="text/css" id="custom-background-css">
body.custom-background { <?php echo trim( $style ); ?> }
</style>
<?php
} 
```

所以你会得到这样的重复、位置和附件：

```
$repeat = get_theme_mod( 'background_repeat', 'repeat' ); 
$position = get_theme_mod( 'background_position_x', 'left' ); 
$attachment = get_theme_mod( 'background_attachment', 'scroll' ); 
```

我假设第二个参数是默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:23:00.050

我不是 100% 确定，但我认为您正在寻找`get_theme_mod()`-> [http://codex.wordpress.org/Function_Reference/get_theme_mod](http://codex.wordpress.org/Function_Reference/get_theme_mod)

# javascript - 使用 xulrunner-sdk-13.0 编译 firefox 扩展

> ID：11097805
> 
> 赞同：0
> 
> 时间：2012-06-19T09:06:32.103
> 
> 标签：javascript, firefox-addon

我有一个在所有以前的版本中都可以使用的 FF 工具栏。
我的工具栏部分用 C++ 编写。我已经用 xulrunner-sdk-13.0 编译了 C++ 部分现在它不起作用了。

我的JS代码，

```
if (!Components.classes['@some/SignedData;1']) 
```

现在返回 false

Firefox 13.0 中有什么改变可以解释这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:09:16.410

下一个版本 13.0.1 修复了该问题

# javascript - javascript获取中继器中的选定单选按钮值？

> ID：11097806
> 
> 赞同：0
> 
> 时间：2012-06-19T09:06:32.360
> 
> 标签：javascript, asp.net, radio-button, repeater

aspx 脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".div_soru").hide();
        $(".div_soru").first().show();
        $(".onceki").click(function() {
            if ($(this).closest(".div_soru").prev(".div_soru").html() != null) {
                $(this).closest(".div_soru").hide();
                $(this).closest(".div_soru").prev().show();
                $(".bitir").hide();
                $(".sonraki").show();
            }
        });
        $(".sonraki").click(function() {
            if ($(this).closest(".div_soru").next(".div_soru").html() != null) {
                $(this).closest(".div_soru").hide();
                $(this).closest(".div_soru").next().show();
                if ($(this).closest(".div_soru").next().next().html() == null) {
                    $(".bitir").show();
                    $(".sonraki").hide();
                }
            }
        });
    });
</script> 
```

和aspx：

```
<asp:Repeater ID="Repeater_sorular" runat="server" OnItemDataBound="Repeater_sorular_OnItemDataBound"
            OnItemCommand="Repeater_sorular_ItemCommand">
    <HeaderTemplate>
    </HeaderTemplate>
    <ItemTemplate>
         <div class="div_soru">
             <div class="div_soru_wrapper">
                 <div style="font-weight: bolder; padding: 5px;">
                    (<%#(((RepeaterItem)Container).ItemIndex+1).ToString() %>
                    /
                    <%# Eval("SoruSayisi")%>)
                    <%#Eval("Subject")%>
                 </div>
                 <asp:RadioButtonList ID="RadioButtonList_secenekler" runat="server" Visible='<%# Eval("TypeId").ToString() == "2" %>'
                    DataSource='<%#Eval("Secenekler")%>' DataTextField="OptionName" DataValueField="OptionId">
                 </asp:RadioButtonList>
                 <asp:CheckBoxList ID="CheckBoxList_secenekler" runat="server" Visible='<%# Eval("TypeId").ToString() == "1" %>'
                    DataSource='<%#Eval("Secenekler")%>' DataTextField="OptionName" DataValueField="OptionId">
                 </asp:CheckBoxList>
              </div>
              <div class="div_nav_buttons">
                  <table>
                      <tr>
                            <td id="onceki" class="onceki">
                                <img src="../Img/adminicons/geri.gif" />
                            </td>
                            <td id="sonraki" class="sonraki">
                                <img src="../Img/adminicons/ileri.gif" />
                            </td>
                            <td id="bitir" class="bitir">
                                <asp:ImageButton ID="ImageButton_kaydet" runat="server" CommandName="kaydet" ImageUrl="~/Img/adminicons/kaydet.gif"
                                        CommandArgument='<%# Container.ItemIndex %>' OnClientClick="return confirm('Anketi kaydetmek istediğinize emin misiniz?');" />
                            </td>
                      </tr>
                 </table>
            </div>
        </div>
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:Repeater> 
```

此脚本隐藏广播组。我使用下一个和上一个按钮一一展示。如果未选择无线电组之一中的无线电，我想显示一条错误消息。我如何才能当前单选组选定的值。

我试试这个，但这是从第一个无线电组获得无线电价值。

```
var selectedRadios = $(".div_soru_wrapper input:radio:checked").val(); 
```

我想我无法解释清楚。我希望你明白我想做什么:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:12:51.263

如果您想检查当前可见组中是否有选中的单选按钮，[:visible](http://api.jquery.com/visible-selector/)选择器可以帮助您：

```
if ($(".div_soru_wrapper:visible input:radio:checked").length) {
    // There is a checked radio button in the currently visible group.
} else {
    // There is no checked radio button in the currently visible group.
} 
```

# android - 水平绘制多个圆圈android

> ID：11097807
> 
> 赞同：0
> 
> 时间：2012-06-19T09:06:34.573
> 
> 标签：android, android-layout, geometry, android-canvas, paint

如何在android中水平绘制多个圆圈，并带有一些填充颜色。
我想根据一些服务器响应来改变颜色。

任何人都可以告诉如何做到这一点？我这样实现来画一个圆圈。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new SampleView(this));

    }
    public class SampleView extends View
    {
        public SampleView(Context context)
        {
            super(context);
            // TODO Auto-generated constructor stub
        }

        @Override
        protected void onDraw(Canvas canvas)
        {
             Paint mPaint = new Paint();
             mPaint.setColor(Color.RED);
             mPaint.setStyle(Paint.Style.FILL);
             canvas.drawCircle(30, 30, 10, mPaint);

        }
     } 
```

我不知道如何在同一条线上再画三个圆圈。
如果我这样写，如何根据条件更改颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:15:52.780

您可以选择两个选项，或者有多个视图，每个视图都有一个圆圈，或者在一个视图中绘制多个圆圈。我更喜欢第一个选项，但由于您的需求可能会有所不同，所以我正在解释这两个选项。

**选项 1：**
有一个名为 color 的类变量，它可以作为一个属性，您可以在其中根据视图的默认颜色更改颜色。在视图外运行一个循环，可能在 onCreate() 中增加 x 坐标，可以传递给`drawCircle()`方法。

**选项 2**
您可以为每个圆圈设置一个颜色的 ArrayList。在方法中运行一个循环`onDraw()`，它会根据循环计数器更改颜色并增加 x 坐标。

# struts2 - struts 2.0如何在一行中显示多个按钮

> ID：11097816
> 
> 赞同：2
> 
> 时间：2012-06-19T09:06:50.897
> 
> 标签：struts2

我是struts 2的新手。我在struts 2中设计一个页面。我想知道如何在一行中显示多个按钮。我检查了页面的源代码，它显示了一个带有tr和td的html表标签。当我尝试在一行上添加更多按钮时，它们会在另一行下方显示。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:17:47.970

这是因为 S2 使用主题，并且默认情况下，当没有提供它`x_html`用作默认主题时，在此主题下，在浏览器中呈现标签 HTML 时，S2 会生成 table、tr 和 td 本身。

您有很多选择，您可以使用简单的主题或基于 css 的主题，并使用您自己的 CSS 来处理显示。

请参阅[此线程](https://stackoverflow.com/questions/11070423/how-to-avoid-generating-more-html-elements-in-struts)以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:50:33.830

使用`theme="simple"`：

```
<s:a theme="simple">test</s:a> 
```

# python - 奇怪的函数返回值？

> ID：11097822
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:07:14.473
> 
> 标签：python, python-3.x, return-value

我正在尝试删除字符串中大括号之间的所有内容，并尝试递归地执行此操作。`x`当递归结束时我会返回这里，但不知何故函数`doit`会返回`None`这里。尽管`x`在 def 中打印会打印正确的字符串。我究竟做错了什么？

```
strs = "i am a string but i've some {text in brackets} braces, and here are some more {i am the second one} braces"
def doit(x,ind=0):
   if x.find('{',ind)!=-1 and x.find('}',ind)!=-1:
     start=x.find('{',ind)
     end=x.find('}',ind)
     y=x[start:end+1]
     x=x[:start]+x[end+1:]
     #print(x)
     doit(x,end+1)
   else:
       return x

print(doit(strs)) 
```

**输出：**
`None`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:08:30.463

如果`if`块成功，你永远不会返回任何东西。该`return`语句位于`else`块中，并且仅在其他所有内容都不是时才执行。您想返回从递归中获得的值。

```
if x.find('{', ind) != -1 and x.find('}', ind) != -1:
    ...
    return doit(x, end+1)
else:
    return x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:09:34.290

```
...
#print(x)
doit(x,end+1)
... 
```

应该

```
...
#print(x)
return doit(x,end+1)
... 
```

您缺少`return`if 块中的语句。如果函数以递归方式调用自身，则它不会返回该调用的返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:15:24.850

请注意，使用正则表达式更容易：

```
import re
strs = "i am a string but i've some {text in brackets} braces, and here are some more {i am the second one} braces"
strs = re.sub(r'{.*?}', '', strs) 
```

# c++ - 模板函数的返回类型

> ID：11097823
> 
> 赞同：6
> 
> 时间：2012-06-19T09:07:29.173
> 
> 标签：c++, templates, c++11, decltype

**信息：**

我目前正在尝试学习模板元编程（通过遵循[这本书](http://www.amazon.co.uk/Template-Metaprogramming-Concepts-Techniques-Beyond/dp/0321227255/ref=sr_1_1?ie=UTF8&qid=1340095708&sr=8-1)）。他们给出的一个有用的例子是维度分析。我按照书中的方式实现了它，一切都很好；[看这里](http://www.boost.org/doc/libs/1_39_0/libs/mpl/doc/tutorial/representing-dimensions.html)。

然而，我的问题是，我想使用混合类型的维度分析框架。我的意思是你可以说一个具有质量维度的标量乘以一个向量与加速度的维度来给出一个向量力。正如链接中所示，它们仅适用于`T`所有操作的输入和输出的相同类型。

我有一个 3-vector 类，它具有所有必要的操作，用于乘以/除以标量等，所以我想做类似的事情

```
quantity<double,mass> m(1.0);
quantity<vect,acceleration> a(vect(0.0,0.0,-9.81));
quantity<vect,force> f = m*a; 
```

**第一次尝试：**

为了实现这一点，我尝试扩展书中的示例来处理两种不同的类型作为输入`operator*`，`operator/`但是在返回类型方面我碰壁了。

我知道这里的返回类型`double * vect`是，`vect`但如果它们是相反的，`vect * double`它仍然是`vect`. 更差; 原则上返回类型可以是任何东西。所以我想要一种方法将其扩展`operator*`到类似的东西

```
template<class T1, class T2, class Dim1, class Dim2>
quantity<X, typename boost::mpl::transform<Dim1,Dim2,boost::mpl::plus<_1,_2> >::type>
operator*(const quantity<T1,Dim1>& q1, const quantity<T2,Dim2>& q2)
{
    return quantity<X,
                    typename boost::mpl::transform<Dim1,Dim2,boost::mpl::plus<_1,_2> >::type>
                   (q1.value()*q2.value());
} 
```

哪里`X`是返回类型`q1.value()*q2.value()`并且是在编译时推导出来的。我尝试简单地将另一个模板类添加`T3`到签名中并让它返回`T3`，但它似乎无法推断出`T3`应该是什么。

**第二次尝试：**

接下来我尝试使用`decltype`如下

```
template<class T1, class T2>
struct return_type
{
    auto mult_f(const T1& a, const T2& b)->decltype(a*b){return a*b;}
    typedef decltype(mult_f) type;
};

template<class T1, class T2, class Dim1, class Dim2>
quantity<typename return_type<T1,T2>::type, typename boost::mpl::transform<Dim1,Dim2,boost::mpl::plus<_1,_2> >::type>
operator*(const quantity<T1,Dim1>& q1, const quantity<T2,Dim2>& q2)
{
    return quantity<typename return_type<T1,T2>::type,
                    typename boost::mpl::transform<Dim1,Dim2,boost::mpl::plus<_1,_2> >::type>
                   (q1.value()*q2.value());
} 
```

然而，这会引发大量难以理解的编译器错误。

**问题：**

那么我的问题是，我是否`decltype`以正确的方式使用但缺少一些语法，例如`typename`某处的说明符？或者; 甚至可以这样做吗？如果不是，如何计算函数的返回类型？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:15:31.747

好的，所以首先类型`return_type<T1,T2>::type`不是您所期望的，而是方法的类型，即您`T3 (return_type::*)(const T1&, const T2&)`所`T3`期望的类型。如果要使用中间类，可以使用：

```
template <typename T1, typename T2>
struct return_type
{
  typedef decltype(std::declval<T1>()*std::declval<T2>()) type;
}; 
```

但是你也可以直接使用`decltype(T1()*T2())`来获取产品的类型。

**编辑**：我根据 ildjarn 的建议编辑了代码，因此不需要默认可构造类型。只是不要忘记包括`<utility>`

# javascript - 找出点击时触发的 Javascript 函数

> ID：11097825
> 
> 赞同：22
> 
> 时间：2012-06-19T09:07:36.057
> 
> 标签：javascript, dom-events

有没有办法通过单击某个按钮来找出哪个 Javascript 函数被触发？

让我解释一下...
我有一个带有大型js脚本的网页（不是我制作的），我要检测特定按钮触发了哪个功能，我需要找到该按钮触发的功能。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T09:08:58.977

使用 Chrome 的 Web Inspector 检查元素并查看*Event Listeners*面板。

![Web 检查器示例](../Images/2a04e307dd9d8ba133ea32ae1ec4310c.png)

如果附加事件的代码在库中（例如，在我的示例中是由 Zepto 编写的），请在该行上设置一个断点并检查调用堆栈以查看它在代码中的来源。

![调用堆栈示例](../Images/e0eeda3c3f6b6c49b5fdf4b11149d351.png)

如您所见，事件起源于我的代码，现在我知道文件名和行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:10:16.367

在您的功能中，您可以[`arguments.callee`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)了解它。请注意，这已被[弃用](https://stackoverflow.com/questions/103598/why-was-the-arguments-callee-caller-property-deprecated-in-javascript)，但应该告诉您您在寻找什么。

```
alert(arguments.callee); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-25T08:03:54.033

在 Google Chrome 中，打开您感兴趣的网页。

右键单击要检查的元素（即按钮）。在出现的“上下文菜单”中，单击“检查”。将出现一个“开发者工具”窗口。

1.  单击“元素”选项卡。
2.  如果尚未选择，请单击要检查的 HTML 元素。
3.  单击“事件侦听器”选项卡。将显示完整的听众列表。
4.  选择您感兴趣的事件侦听器。即“单击”。将显示一个调用堆栈。
5.  单击调用堆栈中的最后一项。这最终会将您重定向到事件触发时执行的实际函数。

[![谷歌浏览器 - 检查选项](../Images/d80752f4c52a16422a7cc485bd20b6d9.png)](https://i.stack.imgur.com/Kg4Ux.png)

[![谷歌浏览器 - 开发者工具窗口](../Images/28272fa8952430bd0fc7884f1845663c.png)](https://i.stack.imgur.com/xBhUH.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:12:18.703

为什么不使用[Stack Trace for JavaScript](http://stacktracejs.com/)，即 stacktrace.js

转到上面的链接，单击*Bookmarklet*并在您要检查的任何站点上加载 js 文件。

# php - facebook graph api中的非法字符

> ID：11097831
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:08:12.123
> 
> 标签：php, facebook, facebook-graph-api

我试图通过 facebook graph api 获取一个 url 获得了多少 facebook 喜欢。为了得到喜欢，我需要从这个 url 获取内容： [http ://graph.facebook.com/?id=URL](http://graph.facebook.com/?id=URL)

例如，尝试进入此 url：“graph.facebook.com/?id= [http://stackoverflow.com](http://stackoverflow.com) ”，您将看到该 url 获得了多少“共享”。分享是分享和喜欢的总和，所以当我尝试这样做时，每件事都运行良好。

当我使用特殊字符时问题就开始了。当我使用“？” 性格一切正常。但是当我使用“&”字符时，网址会自行剪切。

试试这个：“graph.facebook.com/?id= [http://stackoverflow.com?p=blabla&a=fsdf](http://stackoverflow.com?p=blabla&a=fsdf) ”你可以在这个页面中看到，当它到达“&”字符和页面结束如下：

```
{
   "id": "http://stackoverflow.com?p=blabla"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:12:54.260

使用[urlencode](http://php.net/manual/en/function.urlencode.php)：

```
$url = 'graph.facebook.com/?id='.urlencode('http://stackoverflow.com?p=blabla&a=fsdf'); 
```

回馈：

```
{
  id: "http://stackoverflow.com?p=blabla&a=fsdf"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:10:24.323

尝试使用`&amp;`而不是`&`.

# android - 我们可以在android中开发pdf文件作为uI的一部分吗

> ID：11097837
> 
> 赞同：0
> 
> 时间：2012-06-19T09:08:25.197
> 
> 标签：android, android-layout

我们可以开发 pdf 文件或 word doc 作为 android 中 UI 元素的一部分吗？android屏幕应该包含pdf文件以及进度条，这可能吗？请建议我。

重新毕业迷你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:21:22.197

大约一年前，我需要做类似的事情。我找不到解决方案。幸运的是，我还编写了 PDF 来源的 Web 服务，因此我能够提供一个单独的函数，该函数返回一个 PNG（从原始 PDF 转换而来），并将其用作预览。然后，我提供了一个意图，让用户在他们选择的 PDF 查看器中以 PDF 格式打开。

# oracle - 如何在视图中创建非空列

> ID：11097839
> 
> 赞同：13
> 
> 时间：2012-06-19T09:08:30.550
> 
> 标签：oracle, casting, oracle10g, sql-view

给定一个像这样的表：

```
CREATE TABLE "MyTable" 
(
  "MyColumn" NUMBER NOT NULL
); 
```

我想创建一个像这样的视图：

```
CREATE VIEW "MyView" AS
SELECT
    CAST("MyColumn" AS BINARY_DOUBLE) AS "MyColumn"
FROM "MyTable"; 
```

仅当列“MyColumn”为“NOT NULL”时。

在 SQL Server 中，这非常简单：

```
CREATE VIEW [MyView] AS
SELECT
    ISNULL(CAST([MyColumn] AS Float), 0.0) AS [MyColumn]
FROM [MyTable]; 
```

但是，Oracle 等效项会导致“NULL”列：

```
CREATE VIEW "MyView" AS
SELECT
    NVL(CAST("MyColumn" AS BINARY_DOUBLE), 0.0) AS "MyColumn"
FROM "MyTable"; 
```

无论如何强制Oracle在元数据中将视图的列标记为“NOT NULL”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T10:03:06.910

您不能向视图添加非空或检查约束；请参阅[此](http://docs.oracle.com/cd/E11882_01/server.112/e26088/clauses002.htm#SQLRF52181)内容和同一页面上的“非空约束的限制”和“检查约束的限制”。您可以向视图添加一个`with check option`（针对多余的 where 子句），但不会`not null`在数据字典中标记为。

我认为获得这种效果的唯一方法是，如果您使用的是 11g，则将强制转换值添加为表上的虚拟列，并且（如果仍然需要）创建视图：

```
ALTER TABLE "MyTable" ADD "MyBDColumn" AS
    (CAST("MyColumn" AS BINARY_DOUBLE)) NOT NULL;

CREATE OR REPLACE VIEW "MyView" AS
SELECT
    "MyBDColumn" AS "MyColumn"
FROM "MyTable";

desc "MyView"

 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 MyColumn                                  NOT NULL BINARY_DOUBLE 
```

* * *

由于您在 dba.se 的评论中说这是为了模拟某些东西，您可以使用普通列和触发器来模拟虚拟列：

```
CREATE TABLE "MyTable" 
(
  "MyColumn" NUMBER NOT NULL,
  "MyBDColumn" BINARY_DOUBLE NOT NULL
);

CREATE TRIGGER "MyTrigger" before update or insert on "MyTable"
FOR EACH ROW
BEGIN
    :new."MyBDColumn" := :new."MyColumn";
END;
/

CREATE VIEW "MyView" AS
SELECT
    "MyBDColumn" AS "MyColumn"
FROM "MyTable";

INSERT INTO "MyTable" ("MyColumn") values (2);

SELECT * FROM "MyView";

  MyColumn
----------
  2.0E+000 
```

并且`desc "MyView"`仍然给出：

```
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 MyColumn                                  NOT NULL BINARY_DOUBLE 
```

正如 Leigh 提到的（也在 dba.se 上），如果您确实想插入/更新视图，您可以使用`instead of`触发器，使用 VC 或假版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:58:24.833

如果您**可以**在视图列上有一个 NOT NULL 约束，我相信如果有问题的列是 NULL，则视图中的 SELECT 将会失败。如果这是意图，那么以下内容可能会为您提供所需的内容：

```
CREATE OR REPLACE VIEW some_view AS
  SELECT some_field,
         some_other_field,
         CASE
           WHEN field_of_interest IS NOT NULL
             THEN CAST(field_of_interest AS BINARY_DOUBLE)
             ELSE 1 / 0
         END AS field_of_interest_not_null
     FROM some_table; 
```

不是很吸引人，如果采用 CASE 的 ELSE 分支，你会得到一个丑陋的“ORA-01476：除法等于零”消息，但也许这是在“更好”的道路上迈出的一步。

分享和享受。

* * *

编辑：如果目标是只选择目标列不为空的行，那么您可以在视图中添加 WHERE 子句，如下所示：

```
CREATE OR REPLACE VIEW some_view AS
  SELECT some_field,
         some_other_field,
         CAST(field_of_interest AS BINARY_DOUBLE) AS field_of_interest
    FROM some_table
    WHERE field_of_interest IS NOT NULL; 
```

YMMV。

* * *

EDIT2：查看 SQL Server 示例，似乎正在使用 ISNULL 函数来确保该列永远不会为 NULL。如果这是可以接受的，您可以执行以下操作：

```
CREATE OR REPLACE VIEW some_view AS
  SELECT some_field,
         some_other_field,
         CAST(NVL(field_of_interest, 0.0) AS BINARY_DOUBLE) AS field_of_interest
    FROM some_table
    WHERE field_of_interest IS NOT NULL; 
```

引用 Bullwinkle 的话，“这次一定要！！！” :-)

# ruby-on-rails - cURL 和 RestClient - SSL

> ID：11097849
> 
> 赞同：1
> 
> 时间：2012-06-19T09:09:05.170
> 
> 标签：ruby-on-rails, curl, rest-client

我无法通过 RestClient 访问服务器。

我用 cURL 编写了这段代码（它将 XML 文件发送到服务器进行解析）

```
curl -T /Users/amok/Code/1188/dragon/test.xml --cert Users/amok/Code/1188/dragon/client_1188.pem --key Users/amok/Code/1188/dragon/client_1188.key -k -u 1188:aaa https://smart.com/index.cgi 
```

需要在 RestClient 中做同样的事情。我试过这个，但它不起作用。

```
return RestClient::Resource.new(
  'https://smart.com/index.cgi',
  :ssl_client_cert  =>  OpenSSL::X509::Certificate.new(File.read(File.join(Rails.root, "/cert/client_1188.pem"))),
  :ssl_client_key   =>  OpenSSL::PKey::RSA.new(File.read(File.join(Rails.root, "/cert/client_1188.key"))),
  :user => '1188', 
  :password => 'aaa'
).post(xml, :content_type => 'application/xml') 
```

（xml是文件，存储在服务器上）

问题是：

```
OpenSSL::SSL::SSLError in BackOffice::DragonPilotController#create
SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

手掌现在在我的脸上......（（（谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:51:02.470

使用 PUT 方法而不是 POST

# google-maps-api-3 - bounds.contains 失败但不应该

> ID：11097854
> 
> 赞同：0
> 
> 时间：2012-06-19T09:09:18.900
> 
> 标签：google-maps-api-3

在示例[http://gmap3.net/issues/contains-failed.html](http://gmap3.net/issues/contains-failed.html)

map.getBounds().contains(marker.getPosition()) 在标记可见时失败，

如果我将地图宽度从 1200px 更改为 800px，它会成功

这是一个已知问题吗？

问候，

让-巴蒂斯特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:25:11.077

使用 ' `800px`' 宽度，您有以下界限：

```
(-57.31109738854086, -173.32397500000002),    //south west GPS -> sw
(84.67616358203445, 178.23852499999998)       //north east GPS -> ne 
```

在 ' `1200px`' 的情况下：

```
(-57.31109738854086, 151.51977499999998),    //south west GPS  -> sw
(84.67616358203445, -146.60522500000002)     //north east GPS  -> ne 
```

你的标记有`(49.00408, 2.562279999999987)`坐标。所以对于第一种情况：

```
-57.31109738854086    <    49.00408         <     84.67616358203445   //true
-173.32397500000002   <  2.562279999999987  <     178.23852499999998  //true 
```

第二个：

```
-57.31109738854086    <    49.00408         <     84.67616358203445   //true
151.51977499999998    <  2.562279999999987  <    -146.60522500000002  //false 
```

这就是为什么，`"No"`在第二种情况下和第一种情况下，您会收到警报`"Yes"`。

# ruby-on-rails-3 - Ruby on Rails 3.2 Mailer，本地化邮件主题字段

> ID：11097855
> 
> 赞同：8
> 
> 时间：2012-06-19T09:09:26.650
> 
> 标签：ruby-on-rails-3, actionmailer

我目前正在用 RoR 3.2 编写一个邮件程序，它会发送应该根据用户语言进行本地化的邮件。我设法渲染了正确的本地化视图，但在某些需要更改语言环境的字段（如主题）方面遇到了一些困难。在发送电子邮件之前，我已经阅读了一些反对更改语言环境的帖子。用户有许多不同的语言，这意味着每次向用户发送电子邮件时都要更改我的语言环境。

我知道可以更改语言环境、发送电子邮件、更改回语言环境。这感觉不像是铁轨方式。有这样做的正确方法吗？

这是一个片段：

```
class AuthMailer < ActionMailer::Base
  add_template_helper(ApplicationHelper)
  default :from => PREDEF_MAIL_ADDRESSES::System[:general]

  [...]

  def invite(address, token, locale)
    @token = token
    @locale = locale
    @url = url_for(:controller => "signup_requests", :action => "new", :token => token.key, :locale => locale)

    mail(:subject => "Invitation", :to => address) do |format|
      format.html { render ("invite."+locale) }
      format.text { render ("invite."+locale) }
    end
  end

  [...]
end 
```

我的看法

```
auth_mailer
  invite.en.html.erb
  invite.en.text.erb
  invite.it.html.erb
  invite.it.text.erb
  ... 
```

简而言之，在这种情况下，我想使用 @locale 本地化 :subject，而不是通过运行：I18n.locale = locale

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T15:50:44.693

暂时更改全局语言环境是可以的。有一个方便的 I18n.with_locale 方法。ActionMailer 也会自动翻译主题。

```
class AuthMailer
  def invite(address, token, locale)
    @token = token
    @locale = locale
    @url = url_for(:controller => "signup_requests", :action => "new", :token => token.key, :locale => locale)

    I18n.with_locale(locale) do
      mail(:to => address)
    end
  end
end 
```

在语言环境中：

```
en:
  auth_mailer:
    invite:
      subject: Invitation 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-12T08:37:36.500

**导轨 4 路**：

```
# config/locales/en.yml
en:
  user_mailer:
    welcome:
      subject: 'Hello, %{username}'

# app/mailers/user_mailer.rb
class UserMailer < ActionMailer::Base
  def welcome(user)
    mail(subject: default_i18n_subject(username: user.name))
  end
end 
```

**[default_i18n_subject](http://apidock.com/rails/v4.2.1/ActionMailer/Base/default_i18n_subject)** - 在 [mailer_scope, action_name] 范围内使用 Rails I18n 类翻译主题。如果在指定范围内找不到主题的翻译，它将默认为 action_name 的人性化版本。如果主题有插值，您可以通过插值参数传递它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T15:21:55.570

当您像这样调用 I18n 时，您应该能够传递语言环境：

```
mail(:subject => I18n.t("app.invite.subject", :locale => locale), :to => address) do |format|
  format.html { render ("invite."+locale) }
  format.text { render ("invite."+locale) }
end 
```

请记住，`locale`变量必须是符号。

# java - 使用 Messagepack 进行序列化

> ID：11097857
> 
> 赞同：4
> 
> 时间：2012-06-19T09:09:31.703
> 
> 标签：java, serialization, deserialization, msgpack, messagepack

我喜欢使用[Messagepack](http://msgpack.org/)序列化我的 java 类对象。我的班级结构是这样的

```
public class A
 {
   private InnerClass obj;
   //Some other variables with getters and setters.
   // There will be a getter and setter for obj(InnerClass) aswell.
 }
 class InnerClass
 {
  //Some variables with getters and setters.
 }
 class InnerDerivedClass extends InnerClass
 {
  //some variables with getters and setters.
 } 
```

我喜欢做的是为 InnerDerivedClass 创建对象并为其分配一些值。然后我会将对象作为基类对象添加到 A 类中。现在，当我使用 Messagepack 序列化和反序列化 A 类对象时，我无法将对象作为 InnerDerivedClass 对象获取，而是作为 InnerClass obj 来获取。如何使用 MessagePack 实现这一点。我没有使用任何注释，而是在消息包中注册每个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T10:30:48.793

我查看了 MessagePack 的文档和示例，但找不到任何关于嵌套序列化的信息，只有简单类型和 Maps。

我建议您使用 GSON 来解决您的问题 1) [Java - Gson 解析嵌套在嵌套中](https://stackoverflow.com/questions/4453006/java-gson-parsing-nested-within-nested) 2)[使用 Gson 或嵌套内部类反序列化内部类中的任意对象 json 数组](https://stackoverflow.com/questions/4470339/deserializing-arbitrary-object-json-arrays-in-inner-classes-with-gson-or-nested)

您可以尝试使用 JSON-SIMPLE。它会将您的类表示为嵌套地图 [https://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities](https://code.google.com/p/json-simple/wiki/MappingBetweenJSONAndJavaEntities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:17:00.700

对于嵌套结构，我推荐[FlexJson](http://flexjson.sourceforge.net/)；您可以避免所有与嵌套结构相关的样板代码：

```
A obj1 = new A()
String json = JSONSerializer().deepSerialize(obj1);

//get back
A obj2 = JSONDeserializer<A>().deserialize(json); 
```

# xpath - 为 Selenium 自动化测试编写 xpath 和 CSS 定位器/路径

> ID：11097861
> 
> 赞同：1
> 
> 时间：2012-06-19T09:09:53.153
> 
> 标签：xpath, selenium, css-selectors, firebug

我有以下 HTML：

```
<input type="submit" style="-webkit-user-select:none;line-height:100%;height:30px" value="Advanced Search" class="jfk-button jfk-button-action adv-button"> 
```

我将 xpath 写为： `//input[@value='Advanced Search']`

什么是 CSS 定位器/路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:47:16.897

很难回答，因为最佳搜索选择器需要编写整个源代码，因为可以为通用选择器返回文档中的多个 DOM 元素。在这种情况下，更详细的选择器将是：

```
input.adv-button[value='Advanced Search'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:29:00.360

您可以使用以下网站将您的 xpath 转换为相应的 CSS Locator：http: [//cssify.appspot.com/](http://cssify.appspot.com/)

例如：

1.  转到网站[http://cssify.appspot.com/](http://cssify.appspot.com/)

2.  将 XPath //input[@value='Advanced Search'] 插入文本字段

3.  点击提交按钮并观察结果

4.  可以看到对应的CSS Locator如下： input[value="Advanced Search"]

# python - random.randint 多久生成一次相同的数字？

> ID：11097862
> 
> 赞同：1
> 
> 时间：2012-06-19T09:09:56.340
> 
> 标签：python, random, integer

我想生成 0-9 之间的随机整数（包括两端），但我想确保它不会经常连续生成相同的数字。我打算使用模块中的`randint`功能`random`。但我不确定它是否会派上用场。多久`random.randint`生成一次相同的数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:20:09.423

为什么不包装randint？

```
class MyRand(object):
    def __init__(self):
        self.last = None

    def __call__(self):
        r = random.randint(0, 9)
        while r == self.last:
            r = random.randint(0, 9)
        self.last = r
        return r

randint = MyRand()
x = randint()
y = randint()
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:13:33.920

在[Python 文档](http://docs.python.org/library/random.html#module-random)说*随机*的地方，你可以假设它们的意思是一致随机的，除非另有说明（也就是说，所有可能的结果都具有相同的概率）。

为了在不生成连续数字的情况下生成数字，最简单的选择是制作自己的生成器：

```
def random_non_repeating(min, max=None):
    if not max:
        min, max = 0, min
    old = None
    while True:
        current = random.randint(min, max)
        if not old == current:
            old = current
            yield current 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T09:29:18.870

为避免重复，您可以使用这样的简单包装器（有关其工作原理的说明，请参见[Fisher-Yates ）：](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

```
def unique_random(choices):
    while True:
        r = random.randrange(len(choices) - 1) + 1
        choices[0], choices[r] = choices[r], choices[0]
        yield choices[0] 
```

使用示例：

```
from itertools import islice
g = unique_random(range(10))
print list(islice(g, 100)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T17:43:35.773

这很容易在没有 while 循环的情况下完成。

```
next_random_number = (previous_random_number + random.randint(1,9)) % 10 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-20T09:00:34.517

```
list =[]
x=0
for i in range(0,10):
    while x in list:
        x=random.randint(500,1000)
    list.append(x)
print sorted(list, key=int) 
```

# sql - SQL 语句的斗争（不存在）

> ID：11097871
> 
> 赞同：2
> 
> 时间：2012-06-19T09:10:29.083
> 
> 标签：sql, elgg, not-exists

嘿，我的 sql 语句有一些问题。这是数据库方案：（ [http://docs.elgg.org/wiki/DatabaseSchema](http://docs.elgg.org/wiki/DatabaseSchema)），只有“实体”和“关系”表很重要！我要做的是，选择对象类型为“组”但该对象不是其他组的子对象的所有 guid。这意味着关系表中没有与 guid_two 列中的 guid 的记录。我的第一个想法是这样的：

```
SELECT * FROM elgg_entities e 
JOIN elgg_entity_relationships r ON e.guid = r.guid_one
WHERE e.type='group' AND NOT EXISTS (
    SELECT * 
    FROM elgg_entity_relationships s 
    WHERE e.guid = s.guid_two 
          AND s.relationship='subgroup') 
```

但它不会工作。表中还有一些其他的关系，比如成员等。我希望有人能帮助我，因为我现在真的很沮丧。

编辑：此 SQL 查询在 MyPHP 中有效，在 elgg 中我尝试将其转换为“elgg-ich”：

```
$options = array(
    'type' => 'group',
    'joins' => array("JOIN elgg_entity_relationships r ON e.guid = r.guid_one"),
    'wheres' => array("e.type='group' AND not exists (SELECT e.guid
    FROM elgg_entity_relationships s
    where e.guid = s.guid_two
    AND s.relationship = 'subgroup' 
 )"),
 'limit' => $limit,
 'full_view' => FALSE,
 );
$content = elgg_list_entities($options); 
```

=> 解决方案是区分大小写和 where 而不是第 6 行中的 wheres。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:09:07.223

如已编辑问题中所述；

> 解决方案是区分大小写和 where 而不是第 6 行中的 wheres。

# android - 将图像从 Android 上传到 asp.net

> ID：11097875
> 
> 赞同：0
> 
> 时间：2012-06-19T09:10:43.653
> 
> 标签：android, wcf, file-upload

我收到以下错误：

```
Cannot process the message because the content type
'multipart/form-data;
boundary=0JxmnFLOmjvutAKrtR1bmPCqpG8M6WbwE-aAvh8' was not the expected
type 'text/xml; charset=utf-8' 
```

* * *

**安卓代码：**

```
 HttpPost httppost = new HttpPost("http://192.168.9.103/AndroidService/MediaUploadService.svc/uploadFile1");
        File photo = new File(Environment.getExternalStorageDirectory(), "01.jpg");
        MultipartEntity t = new MultipartEntity();
        t.addPart("t", new FileBody(photo));
        httppost.setEntity(t);
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = httpclient.execute(httppost); 
```

**WCF 代码：**

```
public class MediaUploadService : IMediaUploadService
{
    public void UploadFile(Stream fileContents)
    {
        byte[] buffer = new byte[10000];
        int bytesRead, totalBytesRead = 0;
        do
        {
            bytesRead = fileContents.Read(buffer, 0, buffer.Length);
            totalBytesRead += bytesRead;
        } while (bytesRead > 0);
        File.WriteAllText(@"D:\\Vechile\log2.txt", totalBytesRead.ToString());
    }
} 
```

有人可以帮我完成这个过程吗？

我的问题：-
需要将图像文件从 Android 上传到服务器（通过 IIS -> .asp、.asmx、.svc 等）

有人可以建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:48:56.613

您可以做的是将 2 个参数发送到 url ：

*   文件名 = 文件名
*   fileContent = 以 base64 编码的文件内容

在您的 asp 文件中，只需获取 2 个参数内容，进行 base 64 解码，并将其写入名为 filename 参数的文件中...

# dependencies - 在 Debian 上安装 xdebug 而不更新 PHP

> ID：11097877
> 
> 赞同：0
> 
> 时间：2012-06-19T09:10:46.930
> 
> 标签：dependencies, debian, xdebug

我正在尝试使用 PHP 5.3.9 在 Debian 挤压机上安装 xdebug。`php5-xdebug`包 和`php-dev`（具有手动安装所必需的 ）均`phpize`基于 PHP 5.3.13。如果我不想更新 PHP 版本，如何安装 xdebug？（我尝试手动构建 PHP 以获取`phpize`.libxml 和 libssh 以及诸如此类的东西，但最终陷入了依赖地狱。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:28:05.300

我猜应该没有问题。我安装了 php 5.3.3-7+squeeze9，刚刚从[http://packages.debian.org/squeeze/php5-xdebug](http://packages.debian.org/squeeze/php5-xdebug)下载了 php5-xdebug (2.1.0-1)和 dpkg -i'd it - 没有打嗝. 也许你的 apt 配置搞砸了？

编辑：对不起，现在我看到 xdebug 依赖于 phpapi-20090626+lfs（或没有 +lfs 的 phpapi-20090626，取决于架构），但我不知道你的 5.3.9 提供了哪个 api。找出来

```
dpkg -s php5-cgi | grep ^Provides: 
```

或其中之一

```
dpkg -s php5-cli | grep ^Provides:
dpkg -s plibapache2-mod-php5 | grep ^Provides:
dpkg -s plibapache2-mod-php5filter | grep ^Provides: 
```

然后为它找到正确的 xdebug 版本。

# python - 在 django 表单中是否可以将 Filefield 留空？

> ID：11097878
> 
> 赞同：1
> 
> 时间：2012-06-19T09:10:50.507
> 
> 标签：python, django, django-forms

我正在定义一个具有文件字段的 Form 类，并且不是必须向其中添加文件...但是每当我不提供文件时，表格都是无效的....所以有什么办法可以使它用户是否可选择添加文件？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:23:00.297

是的，这绝对是可能的，所以请检查您是否需要=False。

引用 django 1.4 的文档：“默认情况下，每个 Field 类都假定该值是必需的，因此如果您传递一个空值 - None 或空字符串 ("") - 那么 clean() 将引发 ValidationError 异常:" ( [https://docs.djangoproject.com/en/1.4/ref/forms/fields/#required](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#required) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-29T13:05:38.897

表格.py

```
myfile = forms.FileField(required=False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:16:17.180

鉴于您将表单基于模型，您想要的是[`Field.blank`](https://docs.djangoproject.com/en/dev/ref/models/fields/#blank)- 这允许字段为空白。（可能您也需要[`Field.null`](https://docs.djangoproject.com/en/dev/ref/models/fields/#null)，它允许`null`在数据库中记录一个空白值）。

```
x = FileField(..., blank=True, null=True) 
```

# toolbar - MDI子窗口透支框架工具栏？

> ID：11097879
> 
> 赞同：0
> 
> 时间：2012-06-19T09:10:51.857
> 
> 标签：toolbar, mdi

我编写了一个带有工具栏的 MDI 应用程序，但是子窗口过度绘制了框架窗口的工具栏。这里是效果，我要点击左上角才能看到工具栏图标。

![在此处输入图像描述](../Images/de25de9d4cf9cc54cea1d72b3971a1b6.png)

我使用以下代码创建工具栏：

```
CToolBar::CToolBar(HINSTANCE hInst, HWND hParent, LPCTSTR lpszWindowName) :
        CWindow(hInst, hParent, lpszWindowName)
{
        INITCOMMONCONTROLSEX icex;

        // Ensure that the common control DLL is loaded.
        icex.dwSize = sizeof(INITCOMMONCONTROLSEX);
        icex.dwICC  = ICC_BAR_CLASSES;
        InitCommonControlsEx(&icex);

        lstrcpy(m_szClassName, TOOLBARCLASSNAME);
}

BOOL CToolBar::Create()
{
        //create the toolbar
        m_hWnd = CreateWindowEx(0, TOOLBARCLASSNAME, (LPCTSTR) NULL,
                WS_CHILD, 0, 0, 0, 0, m_hParent,
                (HMENU) ID_TOOLBAR, m_hInst, NULL);

        //for backword compatibility
        SendMessage(m_hWnd, TB_BUTTONSTRUCTSIZE, (WPARAM) sizeof(TBBUTTON), 0);

        if (m_hWnd == NULL)
                return FALSE;
        return TRUE;
}

BOOL CToolBar::Init()
{
        TBBUTTON tbb[3];
        TBADDBITMAP tbab;

        if (! Create() )
                return FALSE;

        //Add standard toolbar bitmaps
        tbab.hInst = HINST_COMMCTRL;
        tbab.nID = IDB_STD_SMALL_COLOR;
        SendMessage(m_hWnd, TB_ADDBITMAP, 0, (LPARAM)&tbab);

        //Add buttons
        ZeroMemory(tbb, sizeof(tbb));
        tbb[0].iBitmap = STD_CUT;
        tbb[0].idCommand = IDS_CUT;
        tbb[0].fsState = TBSTATE_ENABLED;
        tbb[0].fsStyle = TBSTYLE_BUTTON;

        tbb[1].iBitmap = STD_COPY;
        tbb[1].idCommand = IDS_COPY;
        tbb[1].fsState = TBSTATE_ENABLED;
        tbb[1].fsStyle = TBSTYLE_BUTTON;

        tbb[2].iBitmap = STD_PASTE;
        tbb[2].idCommand = IDS_PASTE;
        tbb[2].fsState = TBSTATE_ENABLED;
        tbb[2].fsStyle = TBSTYLE_BUTTON;

        SendMessage(m_hWnd, TB_ADDBUTTONS, (WPARAM) 3, (LPARAM) (LPTBBUTTON) &tbb);
        ShowWindow(m_hWnd, SW_NORMAL);
        return TRUE;
} 
```

我用 SDI 窗口对其进行了测试，它运行良好，但是在我创建 MDICLIENT（客户端）窗口之后，它很糟糕。

请帮助我解决这个特殊问题。[您可以在https://code.google.com/p/jcyangs-code/source/browse/trunk/com/lib/](https://code.google.com/p/jcyangs-code/source/browse/trunk/com/lib/)获得所有源代码

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:26:55.247

处理 Frame Window 的 WM_SIZE 消息。

# c# - 事务（进程 ID 84）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品

> ID：11097887
> 
> 赞同：9
> 
> 时间：2012-06-19T09:11:28.567
> 
> 标签：c#, sql, sql-server, deadlock

我开发了一个监控应用程序。所以我使用了一个 Timer 函数来检查 SQL 表中的一些值。

尽管有这么多函数，但它为一个名为 getLogEntry() 的函数提供了以下错误

```
message>Transaction (Process ID 84) was deadlocked on lock resources with another process and has been chosen as the deadlock victim. Rerun the transaction.</message>
<innerMessage>
</innerMessage>
<source>.Net SqlClient Data Provider</source>
<stackTrace>at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at ShiftAlertSystem.DBAccess.getLogEntry(Int32 nEventLogIdn, connections cn)</stackTrace>
    <createdAt>2012/06/18 13:10:47</createdAt> 
```

这是函数的实现

```
public LogEntry getLogEntry(int nEventLogIdn, connections cn)
    {
        lock (_objLock)
        {
            LogEntry lgEntObj = new LogEntry();
             SqlConnection NewCon3 = new SqlConnection();
             SqlCommand newCmd2 = null;
             SqlDataReader dr = null;

             try
             {

                 string connectString;
                 // Configuration config = ConfigurationManager.u
                 string DataSource = cryptIT.Decrypt(cn.DataSource_bio);
                 string initialCatalog = cryptIT.Decrypt(cn.InitialCatalog_bio);
                 string user = cryptIT.Decrypt(cn.user_bio);
                 string password = cryptIT.Decrypt(cn.password_bio);
                 bool intergratedSecurity = cn.IntegratedSecurity_bio;

                 if (intergratedSecurity)
                 {
                     connectString = "Data Source=" + DataSource + ";Initial Catalog=" + initialCatalog + ";Integrated Security=True";
                 }
                 else
                 {
                     connectString = "Data Source=" + DataSource + ";Initial Catalog=" + initialCatalog + ";User ID=" + user + ";Password=" + password;
                 }

                 NewCon3 = new SqlConnection(connectString);
                 NewCon3.Open();

                 newCmd2 = NewCon3.CreateCommand();
                 newCmd2.Connection = NewCon3;
                 newCmd2.CommandType = CommandType.Text;
                 newCmd2.CommandText = @"
                                 SELECT [nUserID]
                                        ,[sUserName]
                                        ,dateadd(s,[nDateTime],'1970/1/1') AS LogDateTime
                                        ,[nEventIdn]
                                        ,[nTNAEvent]
                                        ,[TB_READER].[nReaderIdn]
                                        ,[sName]
                                 FROM 
                                        [TB_EVENT_LOG]
                                        ,[TB_USER]
                                        ,[TB_READER]
                                WHERE 

                                        [nEventLogIdn] = " + nEventLogIdn +
                                         @" AND
                                        [TB_EVENT_LOG].[nUserID] = [TB_USER].[sUserID]
                                        AND
                                        [nFlag]= 1
                                        AND
                                        [TB_EVENT_LOG].[nReaderIdn]=[TB_READER].[nReaderIdn]"
                                         ;
                 dr = newCmd2.ExecuteReader();

                 if (dr != null && dr.Read())
                 {
                     lgEntObj.nUserID = dr.GetInt32(0);
                     lgEntObj.nUserName = dr.GetString(1);
                     lgEntObj.LogDateTime = dr.GetDateTime(2);
                     lgEntObj.nEventIdn = dr.GetInt32(3);
                     lgEntObj.nTNAEvent = dr.GetInt16(4);
                     lgEntObj.nReaderIdn = dr.GetInt32(5);
                     lgEntObj.sName = dr.GetString(6);
                 }
                 dr.Close();
                 newCmd2.Dispose();
                 // NewCon.Close();
                 NewCon3.Close();

                 return lgEntObj;
             }
             catch (Exception exc)
             {
                 CenUtility.ErrorLog.CreateLog(exc);
                 return null;
             }

             finally
             {
                 if (dr != null)
                     dr.Close(); 

                 if(newCmd2 != null)
                     newCmd2.Dispose();

                     NewCon3.Close();

             }

        }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T09:31:11.363

您可能想参考这个[问题](https://stackoverflow.com/questions/2382410/sql-server-deadlock-fix-force-join-order-or-automatically-retry)以获得更多有用的建议。

我使用以下模式进行数据库重试；在这种情况下，我们返回一个 DataTable 但无论如何模式都是相同的；您根据 SqlException [Number](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)检测到 SqlDeadlock 或 Timeout ，然后重试，最多 n 次。

```
 public DataTable DoSomeSql(int retryCount = 1)
    {
        try
        {
            //Run Stored Proc/Adhoc SQL here

        }
        catch (SqlException sqlEx)
        {
            if (retryCount == MAX_RETRY_COUNT) //5, 7, Whatever
            {
                log.Error("Unable to DoSomeSql, reached maximum number of retries.");
                throw;
            }

            switch (sqlEx.Number)
            {
                case DBConstants.SQL_DEADLOCK_ERROR_CODE: //1205
                    log.Warn("DoSomeSql was deadlocked, will try again.");
                    break;
                case DBConstants.SQL_TIMEOUT_ERROR_CODE: //-2
                    log.Warn("DoSomeSql was timedout, will try again.");
                    break;
                default:
                    log.WarnFormat(buf.ToString(), sqlEx);
                    break;
            }

            System.Threading.Thread.Sleep(1000); //Can also use Math.Rand for a random interval of time
            return DoSomeSql(asOfDate, ++retryCount);
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T09:22:02.260

您的查询与另一个查询陷入僵局。另一个查询很可能是`insert`或`update`查询`delete`，因为`select`单独使用不会导致死锁。

如果你不太关心一致性，你可以使用`with (nolock)`提示：

```
FROM 
    [TB_EVENT_LOG] with (nolock)
    ,[TB_USER] with (nolock)
    ,[TB_READER] with (nolock) 
```

这将导致您的查询不放置锁。没有锁的查询不会导致死锁。缺点是当它与修改查询同时运行时，它可能会返回不一致的数据。

# jquery - jquery循环和比较值

> ID：11097888
> 
> 赞同：2
> 
> 时间：2012-06-19T09:11:31.827
> 
> 标签：jquery

是否可以在这种形式的每个循环中使用 jqueries 来分解超链接？

```
 $(document).ready(function() {
    var toExclude =['http://www.google.com', 'http://example'];
    $.each(toExclude, function(key, value) {

    $("a[href='+value+']").replaceWith(function(){
        var matches = value.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);
        var domain = matches && matches[1];
        return domain;
                });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:13:40.520

```
$("a[href='+value+']") 
```

应该：

```
$("a[href='"+value+"']") 
```

此外，您可能只想更改`href`属性 => 使用该[`.attr`](http://api.jquery.com/attr/)方法：

```
$("a[href='"+value+"']").attr("href", function() {
    // do your replace and return the new value of the href
    ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:27:18.120

```
var toExclude = ['www.goo.com','www.dgoo.com'];

$.each(toExclude, function(i,e)
       {

           $("a[href^='"+e+"']").each(function (i,e) {$(e).replaceWith($(e).attr('href'));});
       }
​);
       ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:18:47.147

```
$('a[href="'+value+'"]').attr("href", function() {
    // do your replace and return the new value of the href 
```

引号的一点变化..这也可以让你做

```
$('a[href$="'+value+'"]').attr("href", function() {
    // do your replace and return the new value of the href 
```

和

```
$('a[href^="'+value+'"]').attr("href", function() {
    // do your replace and return the new value of the href 
```

**匹配以value**开头和结尾的链接

# oracle - 在 Apex 中更改帮助文本的字体大小

> ID：11097898
> 
> 赞同：2
> 
> 时间：2012-06-19T09:12:17.097
> 
> 标签：oracle, oracle11g, oracle-apex

我需要`Page Items Help Text`在 Oracle Apex 中更改字体大小。我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:39:56.167

Apex 项目帮助通常（也许总是？）有一类“说明文本”。因此，您可以使用 CSS 为此定义属性。如果你有一个 CSS 脚本，你可以像这样添加一个条目：

```
.instructiontext {color: red; font-size: 300%} 
```

否则，您可以简单地在页面模板标题中添加一些内联 CSS，如下所示：

```
<html lang="&BROWSER_LANGUAGE." xmlns:htmldb="http://htmldb.oracle.com">
<head>
<title>#TITLE#</title>
<link rel="stylesheet" href="#IMAGE_PREFIX#themes/theme_20/theme_3_1.css" type="text/css" />
<!--[if IE]><link rel="stylesheet" href="#IMAGE_PREFIX#themes/theme_20/ie.css" type="text/css" /><![endif]-->
#HEAD#
<!-- Add this -->
    <style type="text/css">
    .instructiontext {color: red; font-size: 300%}
    </style>
<!-- End of my CSS -->
</head>
<body #ONLOAD#>#FORM_OPEN# 
```

结果：

![在此处输入图像描述](../Images/de8826d3820d7c32ffd22ffde01b6aa2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-17T07:05:54.953

好的，我知道这是我正在挖掘的一个非常古老的帖子，但这篇文章是我在搜索“instructiontext”时最终得到的。

无论如何，我有新的信息。Tony 的解决方案在 APEX 5.0 中仍然有效，但从那时到 APEX 19.2 之间的某个地方，Oracle 改变了情况。似乎不再应用类“instructiontext”，而是应用类“apex-help-dialog”。

所以，如果你像这样扩展 CSS 定义：

```
.instructiontext, .apex-help-dialog {color: red; font-size: 300%} 
```

它适用于两个版本。在将您的应用程序从 APEX 5.0 转换到 APEX 19.2 时，这应该很方便，就像我们正在做的那样。

希望这对任何人都有用。

# java - 如何在不触摸列表视图中选择/突出显示项目？

> ID：11097903
> 
> 赞同：2
> 
> 时间：2012-06-19T09:12:27.290
> 
> 标签：java, android, android-layout, android-listview

单击下一个按钮时，列表应突出显示/选择列表视图中的下一个项目。我如何在不直接在屏幕上实际触摸列表项的情况下实现它？

![在此处输入图像描述](../Images/326515dc00d69979902a871e29b5dd3d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:15:04.803

**[ListView.setSelection(int pos)](http://developer.android.com/reference/android/widget/ListView.html#setSelection%28int%29)**将帮助您实现这一目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-17T17:07:44.193

在下一次单击时，您可以更改相应项目的背景并存储位置以供进一步工作。这将作为选定项目

# c# - 在 Gridview 中填充组合框

> ID：11097906
> 
> 赞同：0
> 
> 时间：2012-06-19T09:12:45.260
> 
> 标签：c#, wpf, listview, gridview, combobox

我在使用 gridview 和其中的组合框时遇到了一些问题。

这是我的 ListView 控件的代码：

```
<ListView Height="139" HorizontalAlignment="Left" Margin="10,158,0,0" Name="lvAppointment" VerticalAlignment="Top" Width="250" MinWidth="350">
<ListView.View>
    <GridView>
        <GridViewColumn Header="Appointment" Width="120">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <DatePicker SelectedDate="{Binding Path=Appointment}"/>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
        <GridViewColumn Header="Type" Width="170">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ???/>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
        <GridViewColumn Header="Done" Width="50">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding Path=Done}" IsThreeState="False"/>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </GridView>
</ListView.View> 
```

我正在使用以下代码通过 c# 从 sql ce 数据库中填充列表

```
using (SqlCeCommand sqlCeAppointment = new SqlCeCommand("SELECT appid,appointment,done,apptype.type FROM appointment INNER JOIN apptype ON appointment.refatid = apptype.atid WHERE refeventid = @eventid;", sqlCeConn))
    {
        sqlCeAppointment.Parameters.AddWithValue("@eventid", ((cListEventItem)lvEvent.SelectedItems[0]).id);
        using (SqlCeDataReader sqlCeAppointmentReader = sqlCeAppointment.ExecuteReader())
        {
            lvAppointment.Items.Clear();

            while (sqlCeAppointmentReader.Read())
            {
                lvAppointment.Items.Add(new cListAppointmentItem { id = sqlCeAppointmentReader.GetGuid(sqlCeTerminReader.GetOrdinal("appid")), Appointment = sqlCeAppointmentReader.GetDateTime(sqlCeTerminReader.GetOrdinal("appointment")), Type = sqlCeAppointmentReader.GetString(sqlCeTerminReader.GetOrdinal("type")), Done = sqlCeAppointmentReader.GetByte(sqlCeTerminReader.GetOrdinal("done")) });
            }
        }
    } 
```

我可以很好地填充列表。但我希望“类型”成为一个组合框，以便用户可以选择约会的适当类型（它是连接到事件的约会列表）。此组合框应填充 sql ce 数据库 (apptype) 表中的数据。该表不是静态的，用户可以从该列表中添加和删除项目。

我尝试了几种通过谷歌找到的方法，但都失败了。我想我在理解这是如何工作/应该如何工作时遇到问题。

我希望有一个人可以帮助我 ：（

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:21:22.417

我建议在 MainViewModel 上获取约会类型列表。然后将 的 绑定`ItemsSource`到`ComboBox`该 List 并将 绑定`SelectedItem`到 AppointmentItem 类型。

```
<UserControl x:Name="TheUserControl">
    <ListView>
        <GridView>
            <GridViewColumn Header="Type" Width="170">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox ItemsSource="{Binding ElementName=TheUserControl, Path=AppointmentTypes}"
                                  SelectedItem="{Binding Path=Type}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-02T12:46:11.253

您可以通过定义 ObservableCollection 类型的属性来做到这一点。如果集合的数据类型是字符串，那么您可以将其定义为：

```
 public ObservableCollection<string> Types
        {
            get
            {
                ObservableCollection<string> _types = new ObservableCollection<string>();
                _types.Add("value1");
                _types.Add("value2");
                _types.Add("value3");
                return _types;
            }

        } 
```

在您的 XAML 中，您可以将其绑定为：

```
 <ComboBox VerticalAlignment="Top"  HorizontalAlignment="Left" ItemsSource="{Binding Path=Types}" SelectedItem="{Binding MainViewModel.Type,Mode=TwoWay}" SelectedValue="{Binding SelectedValue}"  Width="300"  ></ComboBox> 
```

# c# - FileHelpers 无法将转换后的字段映射到目标数组

> ID：11097913
> 
> 赞同：1
> 
> 时间：2012-06-19T09:12:55.680
> 
> 标签：c#, .net, parsing, csv, filehelpers

我有以下记录（为简洁起见减少了）：

```
 [DelimitedRecord(",")]
    [IgnoreFirst]
    [IgnoreEmptyLines()]
    public class ImportRecord
    {
        [FieldQuoted]
        [FieldTrim(TrimMode.Both)]
        public string FirstName;

        [FieldQuoted]
        [FieldTrim(TrimMode.Both)]
        public string LastName;

        [FieldQuoted]
        [FieldTrim(TrimMode.Both)]
        [FieldOptional]
        [FieldConverter(typeof(TestPropertyConverter))]
        public int[] TestProperty;    
    } 
```

转换器代码：

```
 public class TestPropertyConverter : ConverterBase
    {
        public override object StringToField(string from)
        {
              var ret = from.Split('|').Select(x => Convert.ToInt32(x)).ToArray();
              return ret;
        }
    } 
```

因此，示例记录可能是： **John, Smith, 1|2|3|4**

它会期望值 1、2、3、4 扩展并填充 TestProperty 数组。但是，我收到以下异常：

**源数组中的至少一个元素无法转换为目标数组类型。**

我试图调试代码，它似乎在 FieldBase.cs 内的 ExtractFieldValue() 函数中爆炸，它试图从函数中返回。以下行似乎是罪魁祸首：

```
res.ToArray(ArrayType); 
```

似乎期望“res”变量是目标类型数组，但它包含数组本身的 1 个元素。

谁能建议我做错了还是可能的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T08:29:53.220

您不需要编写转换器。您只需要更改最后一个字段的字段分隔符。以下示例有效：

```
[DelimitedRecord(",")]
//[IgnoreFirst]
[IgnoreEmptyLines()]
public class ImportRecord
{
    [FieldQuoted]
    [FieldTrim(TrimMode.Both)]
    public string FirstName;

    [FieldQuoted]
    [FieldTrim(TrimMode.Both)]
    public string LastName;

    [FieldQuoted]
    [FieldTrim(TrimMode.Both)]
    [FieldOptional]
    [FieldDelimiter("|")] // <-- here 
    public int[] TestProperty;
}

class Program
{
    static void Main(string[] args)
    {
        var engine = new FileHelperEngine<ImportRecord>();
        string fileAsString = @"John, Smith, 1|2|3|4" + Environment.NewLine;
        ImportRecord[] validRecords = engine.ReadString(fileAsString);
        Assert.AreEqual("John", validRecords[0].FirstName);
        Assert.AreEqual("Smith", validRecords[0].LastName);
        Assert.AreEqual(new int[] { 1, 2, 3, 4 }, validRecords[0].TestProperty);
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:24:49.733

另一种方法是处理`AfterReadRecord`事件中的解析。当数组字段的解析很复杂时，这很有用。（自定义转换器功能较弱，不会给您，例如`e.SkipThisRecord`）。

```
[DelimitedRecord(",")]
//[IgnoreFirst]
[IgnoreEmptyLines()]
public class ImportRecord
{
    [FieldQuoted]
    [FieldTrim(TrimMode.Both)]
    public string FirstName;

    [FieldQuoted]
    [FieldTrim(TrimMode.Both)]
    public string LastName;

    [FieldQuoted]
    [FieldTrim(TrimMode.Both)]
    [FieldOptional]
    public string TestProperty;

    [FieldIgnored] // <-- this field is ignored by the FileHelpers engine
    public int[] ParsedTestProperty; 
}

class Program
{
    static void Main(string[] args)
    {
        var engine = new FileHelperEngine<ImportRecord>();
        engine.AfterReadRecord += engine_AfterReadRecord;

        string fileAsString = @"John, Smith, 1|2|3|4" + Environment.NewLine;
        ImportRecord[] validRecords = engine.ReadString(fileAsString);
        Assert.AreEqual("John", validRecords[0].FirstName);
        Assert.AreEqual("Smith", validRecords[0].LastName);
        Assert.AreEqual(new int[] { 1, 2, 3, 4 }, validRecords[0].ParsedTestProperty);
        Console.ReadKey();
    }

    static void engine_AfterReadRecord(EngineBase engine, AfterReadEventArgs<ImportRecord> e)
    {
        e.Record.ParsedTestProperty = e.Record.TestProperty.Split('|').Select(x => Convert.ToInt32(x)).ToArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-30T11:30:08.027

很抱歉提出这个老问题，但我也遇到了同样的问题，我找到了一个更容易解决这个问题的方法。

似乎 FileHelpers 以特殊方式处理数组，并期望值用`DelimitedRecord`属性指示的分隔符分隔。因此，它尝试在每个分隔记录上调用自定义转换器，并希望您返回元素类型。

在我的情况下，我有位图（`010100101001010101001010001101`）字段，没有任何我想转换成的分隔符`bool[]`。我查看了源代码，发现它`typeof(T).IsArray`用于确定这种行为。

因此，长话短说，将数组更改为列表就足够了。

代替：

```
public int[] TestProperty; 
```

变成：

```
public List<int> TestProperty; 
```

并修改自定义转换器以返回列表：

```
return from.Split('|').Select(x => Convert.ToInt32(x)).ToList(); 
```

# tinymce - 如何在 TinyMce 中定义区域

> ID：11097915
> 
> 赞同：2
> 
> 时间：2012-06-19T09:13:14.030
> 
> 标签：tinymce

是否可以将 TinyMce 的可编辑区域设置为具有如下不同区域：

![在此处输入图像描述](../Images/44dd20b52bb88b910bc6ab76b13a437a.png)

我尝试在我用 TinyMce 编辑的区域内设置创建不同的区域，但用户能够删除这些区域。（例如用右键删除表）。

这是我用于创建 TinyMce 区域的 html：

```
 <div id="elm1" name="elm1" style="width: 80%" class="tinymce">
        <table>
            <tr>
                <td colspan="2"><h1>Hello world</h1></td>
            </tr>
            <td> Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros. </td>
            <td> Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros. </td>
        </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:25:50.780

这是可能的，但您必须使用自己的插件自己处理不删除。为此，您将需要拦截所有可能的删除事件，例如（退格、删除、复制/粘贴、选择 + 键入、cmd+x）并自己处理它们，这是相当多的工作。

# mysql - MySQL 脚本以块的形式删除数据，直到所有低于 id 的内容都被删除

> ID：11097925
> 
> 赞同：0
> 
> 时间：2012-06-19T09:13:53.200
> 
> 标签：mysql, phpmyadmin, mysql-management

我需要一个 MySQL Skript，它执行以下操作：

删除数据库块，直到删除所有大于 10000 的链接 ID

示例：

```
x = 10000
DELETE FROM pligg_links WHERE link_id > x and link_id < x+10000
x = x + 10000
... 
```

所以它会删除

```
DELETE FROM pligg_links WHERE link_id > 10000 and link_id < 20000 
```

然后

```
DELETE FROM pligg_links WHERE link_id > 20000 and link_id < 30000 
```

直到所有 id 小于 10000 被删除

我需要这个，因为数据库非常非常大（不仅仅是演出）

预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:22:46.367

您可以使用该`LIMIT`语句来调节一步删除多少项目：

```
DELETE FROM pligg_links
WHERE link_id > 10000
LIMIT 1000; 
```

[http://dev.mysql.com/doc/refman/5.1/en/delete.html](http://dev.mysql.com/doc/refman/5.1/en/delete.html)说：

> The MySQL-specific LIMIT row_count option to DELETE tells the server the maximum number of rows to be deleted before control is returned to the client. This can be used to ensure that a given DELETE statement does not take too much time. You can simply repeat the DELETE statement until the number of affected rows is less than the LIMIT value.

You could determine the number of deleted rows by using `SELECT ROW_COUNT();` if you would like automatize deletion:

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:19:03.213

::中的问题是什么

```
DELETE FROM pligg_links WHERE link_id > 10000 
```

还有另一种方法：（只需按顺序执行这3个查询）

```
Step1 : Insert into pligg_links_temp select * from pligg_links where link_id < 10000;
Step2 : Drop pligg_links;
Step3 : Insert into pligg_links select * from pligg_links_temp 
```

# macos - 如何在没有 system() 调用的情况下从 R 读取我的 mac 地址

> ID：11097926
> 
> 赞同：2
> 
> 时间：2012-06-19T09:13:54.320
> 
> 标签：macos, r

我需要在 R 脚本中使用 MAC 地址。我想不用`system()`电话，使其独立于平台。在R中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:19:24.573

我有理由确定纯 R 没有好方法。但是，如果您愿意进入 C 领域，则可以实现[类似 this example](http://wxwidgets.info/cross-platform-way-of-obtaining-mac-address-of-your-machine/)的东西。他们创建了一个 C++ 类来检测操作系统，然后运行适当的代码来提取 MAC 地址。

虽然这看起来很像使用系统调用，但它比解析[命令行调用可能返回 MAC 的所有不同格式的](http://www.coffer.com/mac_info/locate-unix.html)工作要少一些。

# c# - 具有布尔值的开关盒的奇怪行为

> ID：11097927
> 
> 赞同：3
> 
> 时间：2012-06-19T09:13:55.650
> 
> 标签：c#, .net, boolean, switch-statement

我的问题不是关于如何解决这个错误（我已经解决了），而是为什么这个错误带有布尔值。

我的功能是

```
private string NumberToString(int number, bool flag)
{
    string str;

    switch(flag)
    {
        case true: 
            str = number.ToString("00");
            break;
        case false:
            str = number.ToString("0000"); 
            break;
    }

    return str;
} 
```

错误是`Use of unassigned local variable 'str'`。Bool 只能取真或假。所以它会`str`在任何一种情况下填充。那为什么会出现这个错误？

此外，如果我添加一个案例以及真假案例，这个错误就消失了`default`，但是除了真假之外，布尔值还能保持什么？

为什么这种带有 bool 变量的奇怪行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T09:17:55.883

在布尔变量上编写 switch 语句对我来说似乎有点浪费。为什么不使用条件运算符 ( [`?:`](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx))：

```
private string NumberToString(int number, bool flag)
{
    return flag ? number.ToString("00") : number.ToString("0000"); 
} 
```

代码看起来更简洁一些，你不需要局部变量。

但是回到你关于为什么你的代码不能编译的问题=> 这是因为必须始终分配变量，并且这种分配不应该发生在条件语句中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T09:18:42.763

您得到的错误是关于`string`变量而**不是** `boolean`可能的值。

**没有**人可以运行的事实`cases`是真实的（在这种情况下），但是编译器在分析代码方面并没有走这么远。它只是查看在某些情况下未分配和使用的变量，并且没有默认变量，因此**假设**在某些*情况*下它仍然未分配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T09:17:46.663

我想，你想问，为什么`str`变量是未赋值的，因为 switch 语句的 case 会为其分配一些值，但编译器无法确定它是否会落在任何 case 语句中，这就是你得到这个的原因返回时出错`str`。

如果你添加一个带有字符串赋值的默认情况，那么编译器肯定会知道，str 会保存一些值，这就是你不会得到错误的原因

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T09:16:05.117

```
private string NumberToString(int number, bool flag)
{
    string str = "";

    switch(flag)
    {
        case true: 
            str = number.ToString("00");
            break;
        case false:
            str = number.ToString("0000"); 
            break;
    }

    return str;
} 
```

**写这个** `string str = "";`- 你应该赋值

如果您添加默认案例，则没有机会在没有分配的情况下通过切换案例。现在它是

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-04T12:09:02.603

好吧，对于这个问题的原因已经有了很好的解释，但是对于这个问题还有一个解决方案，没有提到。只需放置`default`而不是 second `case`：

```
 private string NumberToString(int number, bool flag)
    {
        string str;

        switch (flag)
        {
            case true:
                str = number.ToString("00");
                break;
            default:
                str = number.ToString("0000");
                break;
        }

        return str;
    } 
```

它让编译器不再考虑`flag`变量值，因为我们总是`default`在`switch`语句中赋值。

还要考虑 if-else 语句等效解决方案：

```
 private string NumberToString(int number, bool flag)
    {
        string str;

        if (flag)
            str = number.ToString("00");
        else
            str = number.ToString("0000");

        return str;
    } 
```

我不是特别喜欢“单线”（单线解决方案），因为它们缺乏可扩展性和可读性，但作为最后的手段，只需使用这样的三元运算符：

```
 private string NumberToString(int number, bool flag)
    {
        return flag ? number.ToString("00") : number.ToString("0000");
    } 
```

虽然我在它 - 考虑使用扩展方法+默认布尔值`false`，例如：

```
public static class intExtensions
{
    public static string NumberToString(this int number, bool flag = false)
    {
        return flag ? number.ToString("00") : number.ToString("0000");
    }
} 
```

然后在主课上：

```
 int intVal = 56;
        string strVal1 = intVal.NumberToString(true);
        string strVal2 = intVal.NumberToString(); 
```

# mysql - Solr DataImportHandler 配置

> ID：11097931
> 
> 赞同：3
> 
> 时间：2012-06-19T09:14:10.640
> 
> 标签：mysql, solr, indexing, dataimporthandler, requesthandler

*我想在 DataImportHandler 的帮助下从 mysql 数据库中获取数据，以便创建索引。现在我已经配置了我的 Solr 实例，以便它可以在 Tomcat（示例管理页面）上运行，但是如果我尝试更改 sorlconfig.xml 文件，我会收到错误消息。我正在使用 Solr 3.6*

**所以我的配置是：**

在 solrconfig.xml 我添加了：

```
<dataDir>${solr.data.dir:/usr/share/tomcat7/solr2}</dataDir> 
```

指定我的工作目录

进而

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
<str name="config">/usr/share/tomcat7/solr2/conf/data-config.xml</str> 
</lst>
</requestHandler> 
```

指定新的请求处理程序。

这两个是我对 DIH 的 lib 指令。我需要改变它们吗？

```
<lib dir="../../dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" />
<lib dir="../../contrib/dataimporthandler/lib/" regex=".*\.jar" /> 
```

我还创建了 data-config.xml 文件并添加了以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataConfig>
<dataSource   type="JdbcDataSource"
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost:3306/ethicsweb_experts"
              user="root"
              password=""/>

<document>
       <entity name="experts" datasource="mysql" pk="mainid"
              query="SELECT experts.mainid as mainid FROM experts WHERE validRec = 'y'">

        <field column="mainid" name="mainid"/>
        <field column="validRec" name="validRec"/>
    </entity>
</document> 
```

我已将以下 jar 复制到 tomcat/lib 文件夹（DIH jar 文件和 mysql JDBC 连接器 jar 文件）

```
apache-solr-dataimporthandler-3.6.0.jar
apache-solr-dataimporthandler-extras-3.6.0.jar
mysql-connector-java-5.1.20-bin.jar 
```

同样在 schema.xml 文件中，我添加了以下字段：

```
<field name="mainid" type="int" indexed="true" stored="true"  />
<field name="validRec" type="string" indexed="true" stored="true" />
<field name="recSource" type="string" indexed="true" stored="true" />

<uniqueKey>mainid</uniqueKey> 
```

但是现在当我尝试访问时：

```
http://localhost:8080/solr2/ 
```

**我得到以下输出：**

```
HTTP Status 500 - Severe errors in solr configuration. Check your log files for more detailed information on what may be wrong. If you want solr to continue after configuration errors, change: <abortOnConfigurationError>false</abortOnConfigurationError> in solr.xml ------------------------------------------------------------- 
org.apache.solr.common.SolrException: No cores were created, please check the logs for errors at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:172) 
at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) 
at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) 
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) 
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103) 
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638) 
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895) 
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871) 
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) 
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649) 
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585) 
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) 
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 
at java.util.concurrent.FutureTask.run(FutureTask.java:166) 
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 
at java.lang.Thread.run(Thread.java:722)
 -------------------------------------------------------------         
java.lang.NoClassDefFoundError: org/apache/solr/util/plugin/SolrCoreAware 
at java.lang.ClassLoader.defineClass1(Native Method) 
at java.lang.ClassLoader.defineClass(ClassLoader.java:791) 
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) 
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449) 
at java.net.URLClassLoader.access$100(URLClassLoader.java:71) 
at java.net.URLClassLoader$1.run(URLClassLoader.java:361) 
at java.net.URLClassLoader$1.run(URLClassLoader.java:355) 
at java.security.AccessController.doPrivileged(Native Method) 
at java.net.URLClassLoader.findClass(URLClassLoader.java:354) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:423) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
at java.lang.Class.forName0(Native Method) 
at java.lang.Class.forName(Class.java:264) 
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1698) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:410) 
at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:789) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
at java.lang.Class.forName0(Native Method) 
at java.lang.Class.forName(Class.java:264) 
at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378) 
at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419) 
at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:455) 
at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:159) 
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:563) 
at org.apache.solr.core.CoreContainer.create(CoreContainer.java:483) 
at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335) 
at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219) 
at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161) 
at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) 
at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) 
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) 
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) 
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103) 
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638) 
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294) 
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895) 
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871) 
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) 
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649) 
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585) 
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) 
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 
at java.util.concurrent.FutureTask.run(FutureTask.java:166) 
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 
at java.lang.Thread.run(Thread.java:722) Caused by: java.lang.ClassNotFoundException: org.apache.solr.util.plugin.SolrCoreAware 
at java.net.URLClassLoader$1.run(URLClassLoader.java:366) 
at java.net.URLClassLoader$1.run(URLClassLoader.java:355) 
at java.security.AccessController.doPrivileged(Native Method) 
at java.net.URLClassLoader.findClass(URLClassLoader.java:354) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:423) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:356) ... 47 more 
```

**我的日志条目告诉我：**

```
SEVERE: java.lang.NoClassDefFoundError: org/apache/solr/util/plugin/SolrCoreAware
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1698)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:789)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378)
    at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419)
    at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:455)
    at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:159)
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:563)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:483)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219)
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.apache.solr.util.plugin.SolrCoreAware
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 47 more

Jun 15, 2012 4:07:50 PM org.apache.solr.servlet.SolrDispatchFilter init
SEVERE: Could not start Solr. Check solr/home property and the logs
org.apache.solr.common.SolrException: No cores were created, please check the logs for errors
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:172)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Jun 15, 2012 4:07:50 PM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: No cores were created, please check the logs for errors
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:172)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

*所以现在我想知道我在哪里搞砸了 DataImportHandler 的配置。我需要指定更多的 jar 文件吗？我是否将 jar 文件放在正确的目录中？任何帮助将不胜感激。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:54:01.917

这里的问题是您的带有 jar 文件位置的“lib”条目未正确定义。

根据您的 solr.home 条目，这些 dist、contrib 文件夹无法解析。例如，您可能需要为此添加额外的“../”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:15:57.017

好的，我已经与同一个问题斗争了几个小时。solr 3.4 书中没有涵盖有关 DIH 设置的内容。

将 lib 文件夹保留在示例文件夹中。在 example/solr 中创建一个名为 lib 的新文件夹。打开配置内核的 example/solr/solr.xml 并添加 sharedLib 属性

```
<solr persistent="false" sharedLib="./lib"> 
```

把你所有的 solr 罐子都倒在这里！solr 没有从 lib 文件夹加载它们存在一些冲突问题，我认为那是针对码头库的......但我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T16:48:43.447

`lib`您的服务器提取的 war 文件在目录中没有这些 DIH 驱动程序。将其添加在那里，这可能会解决您的问题。

我为此奋斗了 5 个小时，现在它开始工作了。

# ipv6 - IIS Express 无法使用 ipv6 在 localhost 上启动

> ID：11097936
> 
> 赞同：4
> 
> 时间：2012-06-19T09:14:31.153
> 
> 标签：ipv6, iis-express, ipv4

您好 Stackoverflow 用户！

这是发生在我身上的一件有趣的事——也许你能解释一下为什么？

昨天我的工作日进行到一半时，我安装的 IIS Express 停止工作。

起初我以为是我正在做的 ASP.NET 项目的问题，只是挂起，无法启动，因为页面一直挂起，直到超时。然后我尝试了其他一些项目，也设置为在 localhost:8080 上运行——它们也不会加载——甚至是纯 HTML 的。

现在，当我说他们不会加载时；我的意思是根本没有活动。该页面将在 chrome 中“加载”很长时间，并且 IISExpress 控制台不会注册任何 GET 请求，直到最终 chrome 中的选项卡会显示超时错误。

今天早上，我（在一些帮助下）想出了一些办法——由于某种原因，当我 ping 时会返回`localhost`ipv6 地址`::1:`而不是 ipv4 地址`127.0.0.1`——我以前没有注意到这种行为，也没有更改任何网络设置。

我编辑了我的 HOST 文件，并包含了一个`127.0.0.1 localhost`强制`ping localhost`返回 ipv4 地址的条目。这有效，当我再次尝试将 IIS Express 绑定到 localhost:8080 时，它也有效。

*我的问题是*；**到底怎么回事？！？！**

我不知道为什么会这样。我知道我已经通过编辑我的 HOST 文件设法解决了个别问题，但是有谁知道到底为什么会发生这种情况？

知道为什么`ping localhost`会突然开始返回 ipv6 地址吗？知道为什么 IIS Express 不能与 ipv6 一起使用吗？（我假设 IIS 引擎现在已经包含了它）。

我想了解发生了什么以避免任何进一步的问题，并且出于好奇。

在此先感谢您的任何信息，

菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-18T15:19:27.913

*   打开一个管理 cmd 窗口，然后使用您绑定到的端口执行此操作：`netsh http add urlacl url="http://[::1]:8080/" user=everyone`. 这告诉您的系统绑定到很酷`::1`
*   打开`%USERPROFILE%\Documents\IISExpress\config\applicationhost.config`，找到您站点的部分，然后添加 IPv6 绑定：**`<binding protocol="http" bindingInformation="[::1]:8080:*" />`**

样本：

`<site name="WebSite1" id="2"> <application path="/" applicationPool="Clr4IntegratedAppPool"> <virtualDirectory path="/" physicalPath="C:\Users\ryan.versaw\Documents\WebSite1" /> </application> <bindings> <binding protocol="http" bindingInformation="*:8080:localhost" /> <binding protocol="http" bindingInformation="[::1]:8080:*" /> </bindings> </site>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:11:23.407

只要您的系统上启用了 IPv6， ::1 和 127.0.0.0 都是“localhost”的有效地址。两者中的哪一个由系统返回并用于例如 pings 或多或少是不确定的，除非程序专门请求 IPv4 或 IPv6 地址 - 并且由于 Windows 的 ping 可以处理任何一个，它可能没有这样做。

至于 IIS，像这样的答案表明这种行为是故意的，您需要单独启用绑定到 IPv6 地址：[https ://serverfault.com/questions/123796/get-iis-7-5-to-listen-在 IPv6 上](https://serverfault.com/questions/123796/get-iis-7-5-to-listen-on-ipv6)

# windows - 来自他们两个的两个 kinect 和骨架流 - 可能吗？

> ID：11097937
> 
> 赞同：2
> 
> 时间：2012-06-19T09:14:31.720
> 
> 标签：windows, sdk, kinect, hresult

我有两个连接在不同 USB 控制器上的 kinect 传感器。如果我在它们两个上启用骨架流，当我在第二个传感器上调用 start 方法时会出现异常：

```
This API has returned an exception from an HRESULT: 0x830100AA 
```

堆栈跟踪：

```
 at Microsoft.Kinect.KinectExceptionHelper.CheckHr(Int32 hr)
   at Microsoft.Kinect.NuiSensor.NuiInitialize(UInt32 dwFlags)
   at Microsoft.Kinect.KinectSensor.Initialize(SensorOptions options)
   at Microsoft.Kinect.KinectSensor.Start() 
```

为什么我无法从两个 kinect 进行骨骼跟踪？

PS 我正在使用 Kinect for Windows SDK 1.5

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T08:54:10.820

只是为了澄清：

*   两个 Kinect 的跟踪工作。（使用 Microsoft SDK 1.6 测试）
*   您需要做的是在单独的 USB 总线上连接 Kinect。

还可以查看 SDK 中的一些示例。在 1.6 SDK 中有一个名为“Kinect Explorer”的托管代码示例，它展示了如何安全地处理多个 Kinect。

处理多个骨架不是一件容易的事（如果你想检测来自 kinect 1 的用户是否是 kinect 2 中的同一个用户）你需要编写自己的逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:44:36.033

如果您使用多个 Kinect 传感器，则骨骼跟踪仅适用于您初始化的第一个设备（使用 RuntimeOption 进行骨骼跟踪）。要切换用于跟踪的设备，请取消初始化旧设备并初始化新设备。

# java - 如何在 Eclipse 中运行 java 文件服务小程序？

> ID：11097938
> 
> 赞同：2
> 
> 时间：2012-06-19T09:14:37.023
> 
> 标签：java, eclipse, applet, jnlp, java-web-start

我必须通过添加写入本地文件的能力来扩展现有的小程序。[我在http://pscode.org/jws/api.html#fs](http://pscode.org/jws/api.html#fs)尝试了文件服务演示，发现它正是我们所需要的。但我必须在 eclipse 中运行它，在那里我收到很多（对我来说无助的）消息：

```
javax.jnlp.UnavailableServiceException: uninitialized
    at javax.jnlp.ServiceManager.lookup(Unknown Source)
    at graph.FileAccess.loadFileByFileService(FileAccess.java:149)
    at graph.FileAccess.loadFile(FileAccess.java:141)
    at graph.FileAccess.loadFile(FileAccess.java:117)
    at graph.FileAccess$1.actionPerformed(FileAccess.java:75)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

我已经在网上搜索了几个小时，但找不到解决方案。什么不见​​了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:25:28.950

显然，在 Eclipse 中调试 WebStart 应用程序没有简单的方法（但使用 Netbeans 似乎很容易）。

有几件事要尝试：

*   [如何调试 WebStart 应用程序](http://lopica.sourceforge.net/faq.html#debug)

*   [Eclipse 的 Java Web Start 插件 (WS4E)](http://webstart.sourceforge.net/)

*   [故障排除指南](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/plugin.html)

我没有尝试过任何这些，但我个人会选择第一个选项，因为它是最直接的，尽管作为一个过程有点乏味。我还会尝试使用 WS4E 来看看它能做什么。

# qt - QPlainTextEdit 逐行截断历史

> ID：11097939
> 
> 赞同：14
> 
> 时间：2012-06-19T09:14:57.427
> 
> 标签：qt, logging, qplaintextedit, log-rotation

我有一个 GUI 应用程序，其主要部分是[QPlainTextEdit](http://doc.qt.nokia.com/4.7-snapshot/qplaintextedit.html)。它用于显示应用程序的日志，因此相关的文本会逐行无限增长。

由于应用程序打算运行很长时间，我需要限制将为此日志分配的内存。因此，我希望有一些`maxNumLines`或`maxNumCharacters`参数来确保在到达时将截断历史记录，即在添加新行时将删除标题行（也称为*日志轮换*）。

为了实现这一点，我找到了功能

```
// get the associated text
QString toPlainText () const

// set the associated text
void setPlainText ( const QString & text ) 
```

因此，像这样未经测试的代码可能会成功：

```
QString &tmp = pte.toPlainText();
while (tmp.size() > maxNumCharacters) {
  // remove lines from the head of the string until the desired size is reached
  // removes nothing if "\n" could not be found
  tmp.remove(0, tmp.indexOf("\n")+1);
}
pte.setPlainText( tmp ); 
```

这是从 中删除第一行的方法`QPlainTextEdit`吗？是否可能有其他 Qt Text GUI 元素更适合此任务（设置最大行数并在列表的开头截断），例如以某种方式显示`QStringList`我可以存储行的 a （我可以轻松地`erase(0)`）？

或者 QPlainTextEdit 最终是否最终为相关 QString 的大小实现了这样的上限？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T09:33:53.103

显然，该物业`maximumBlockCount`正是我所需要的：

> 如果您想限制 a 中的段落总数`QPlainTextEdit`，例如它在日志查看器中很有用，那么您可以使用该`maximumBlockCount`属性。`setMaximumBlockCount()`和的组合`appendPlainText()`变成`QPlainTextEdit`了日志文本的有效查看器。

以供参考：

*   [http://doc.qt.io/qt-5/qplaintextedit.html#maximumBlockCount-prop](http://doc.qt.io/qt-5/qplaintextedit.html#maximumBlockCount-prop)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T09:24:27.733

几个月前我遇到了完全相同的问题，最后我使用了`QListView`. 尽管使用模型/视图/委托架构有点繁琐，但从长远来看，它的扩展性要好得多。例如，一旦基本架构就绪，添加一个只显示错误或警告条目的过滤器就变得微不足道，或者创建一个委托以便将错误条目的背景涂成红色也很简单。

# azure - windows azure 是否仅支持 asp.net mvc 应用程序？

> ID：11097945
> 
> 赞同：-2
> 
> 时间：2012-06-19T09:15:20.847
> 
> 标签：azure

我对 Windows azure 有疑问。它是否只支持 mvc 应用程序或在 Visual Studio 中开发的任何类型的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:34:50.207

它不仅适用于 MVC 应用程序。在 Windows 上运行的任何东西都可以在 Windows Azure 上运行。ASP.NET、PHP、Java、Node.js 等。有关大量信息，请参阅[https://www.windowsazure.com/en-us/develop/overview/](https://www.windowsazure.com/en-us/develop/overview/)。

# wcf - 使用旧客户端使用 WCF 服务（使用 MSMQ）

> ID：11097954
> 
> 赞同：2
> 
> 时间：2012-06-19T09:15:41.937
> 
> 标签：wcf, encoding, msmq

我创建了一个使用 MSMQ 的 WCF 服务。
多个 .NET 客户端应该能够使用此服务并向其发送消息。
部分客户端是用没有 WCF 的 .NET 版本（例如 .NET 1.1）编写的。
对于这些客户端，我直接使用 Msmq API。
问题是，消息的编码不符合服务端的预期编码。
因此，我尝试使用以下命令更改服务端的消息编码`customBinding`：

```
<bindings>
    <customBinding>
        <binding name="MyCustomBinding">
            <!-- available encodings: -->
            <!-- <textMessageEncoding /> -->
            <!-- <binaryMessageEncoding /> -->
            <!-- <mtomMessageEncoding /> -->
            <!-- <webMessageEncoding /> -->

            <msmqTransport ...>
                <msmqTransportSecurity ... />
            </msmqTransport>
        </binding>
    </customBinding>
</bindings> 
```

我想我仅限于四种预定义编码之一：`textMessageEncoding`, `binaryMessageEncoding`, `mtomMessageEncoding`, `webMessageEncoding`.

在客户端，我尝试更改格式化程序：

```
System.Messaging.Message msmqMessage = new System.Messaging.Message();
msmqMessage.Formatter = new System.Messaging.ActiveXMessageFormatter();
//msmqMessage.Formatter = new System.Messaging.BinaryMessageFormatter();
//msmqMessage.Formatter = new System.Messaging.XMLMessageFormatter(); 
```

似乎没有格式化程序适合预期的编码。还有另一种统一编码的方法吗？也许是自定义编码器或类似的东西？或者我在调整格式化程序和编码器方面完全错了？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:09:52.170

您可以使用内置`MsmqIntegrationBinding`并将序列化格式设置为xml：

```
<service name="MyQueueListenner">
    <endpoint address="msmq.formatname:DIRECT=OS:.\private$\myQueue"
              binding="msmqIntegrationBinding"
              bindingConfiguration="DotNetBinding"
              contract="MyContract" />
  </service>
  ...

  <msmqIntegrationBinding>
    <binding serializationFormat="Xml" name="DotNetBinding" durable="false" exactlyOnce="false">
      <security mode="None" />
    </binding>
  </msmqIntegrationBinding> 
```

**更新**

集成绑定的重点是最大的互操作性，以便 wcf 可以支持非 .Net msmq 客户端（ActiveX、Java）。

出于这个原因，暴露数据合约（超出字符串）将没有意义。

我猜 MS 并没有真正想到人们会使用它来实现较低的 .Net 版本和 WCF 之间的互操作。

我唯一可以建议的是托管一个 mex 端点，定义一组单向操作，通过 http 公开您的类型，然后允许客户端从该端点使用 wsdl。

然后，他们可以使用它来构建他们的本地类型定义，以便与您的 msmq 端点一起使用。

只要明确他们不应该实际调用 http 操作，或者让操作抛出 NotImplementedException。

# trigger.io - 您在 trigger.io 中使用什么 JavaScript 框架？（骨干，淘汰赛，余烬，角）

> ID：11097955
> 
> 赞同：5
> 
> 时间：2012-06-19T09:15:44.167
> 
> 标签：trigger.io, forge

您在 Trigger.io 中成功使用了哪个 JavaScript 框架？我的意思是客户端 JS 应用程序框架，如骨干、淘汰赛、余烬、角度？

我们在此处使用 angular.js，但在为我们的应用程序使用路由器时遇到了一些重大问题……请在此处查看详细信息[https://groups.google.com/forum/?fromgroups#!topic/angular/XGDRAskA8qs](https://groups.google.com/forum/?fromgroups#!topic/angular/XGDRAskA8qs)。Trigger.io 和使用 angular.js 路由器不能一起工作。（至少我们不能让它工作）

您是否使用其他一些 JS 框架，您可以推荐使用应用程序路由器功能与 trigger.io 一起正常工作？（例如，我可以在 ember 或骨干网中看到类似的路由器功能）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T11:36:53.200

虽然我们不支持某个特定的库，并且我们的目标是与所有库兼容，但我通常在启动 Trigger 应用程序时首先使用 Backbone。它简单、轻量但功能强大，并且有很多[不错的](http://perka.github.com/backbone-ui/) [扩展](https://github.com/derickbailey/backbone.marionette)。

除了我们的目标是在下一个主要版本（可能是 12 年 7 月末）中修复的 Angular 问题之外，除了[Amber Smalltalk](http://amber-lang.net/)之外，我们还没有收到其他库存在任何问题的报告，这些问题应该在同一个版本。

我们[在这里](https://github.com/trigger-corp/Forge-Bootstrap)和[这里](https://github.com/trigger-corp/forge-template-sencha-touch)都有使用 Backbone 和 Sencha的演示应用程序，我们最初的演示应用程序是使用 jQuery Mobile 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T06:38:06.410

我使用 jQuery、Backbonejs、Handlebars、Coffeescript、LESS 作为我的框架——它们几乎都来自我的 Web 开发工作。不必改变太多。

事实上，到目前为止，我发现我必须简化很多事情才能将其降低到适合移动环境的水平。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T08:00:33.040

就 JavaScript 框架而言，Angular JS 是最好的竞争者之一。我一路浏览了 Angular 教程，创建了一个新的 Trigger 应用程序，然后放入教程应用程序以代替默认的脚手架。

运行没有问题！IOS、安卓、WEB

有趣的是，我用我自己的服务器数据改编了 Angular 教程。甚至可以使用 XHR 请求和跨域资源共享。

在我看来，使用 Angular.JS + Zepto/Jquery 构建你的应用程序。使用这些框架中的任何一个为您的 UI 添加 CSS 过渡到您的应用程序。

我建议制作自己的 UI 而不是使用 JQuery Mobile 或 Sencha Touch 2 之类的东西的原因是在过去的 3 天里，我一直在对众多 JS Mobile UI 框架进行广泛的研究和测试，而 JQmobi 是唯一一个接近的速度很快，但看起来变化不大。

自己制作将减小应用程序的大小，让您完全控制，并保持应用程序运行流畅..您的使用永远不会知道它不是原生的；P

# php - PHP从上传的文件创建缩略图并移动到服务器

> ID：11097956
> 
> 赞同：0
> 
> 时间：2012-06-19T09:15:46.113
> 
> 标签：php

我遇到了从上传的图像文件创建缩略图然后将其上传到服务器的问题。

截至目前，我有一个创建缩略图的函数，将其保存为临时文件并将其返回给调用者。

然后我尝试做的是使用 move_uploaded_file(tempthumb, path); 上传创建的拇指图像。

这是 createThumb 函数和调用者：

```
function createThumb( $image, $thumbWidth )
{
  // load image and get image size
  $img = imagecreatefromjpeg( "{$image}" );
  $width = imagesx( $img );
  $height = imagesy( $img );

  // calculate thumbnail size
  $new_width = $thumbWidth;
  $new_height = floor( $height * ( $thumbWidth / $width ) );

  // create a new temporary image
  $tmp_img = imagecreatetruecolor( $new_width, $new_height );

  // copy and resize old image into new image 
  imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

  return $tmp_img;

}

return $tmp_img; // Here I return the new image. Is this the proper way to get a binary image back?? 
```

这是调用者：

```
$thumb = createThumb($_FILES['propform-previmg']['tmp_name'], $max_previmg_width); 
        $filenamepath = $src_dir . '/thumb/' . $_FILES['propform-previmg']['name'];
        if ( !move_uploaded_file($thumb, $filenamepath ))
            echo "Error moving file {$filenamepath}"; 
```

我尝试直接上传上传的文件而不尝试先制作缩略图，效果很好。所以我猜我从 createThumb 函数返回的变量有一些错误，但我无法弄清楚到底是什么。

另外，我需要从调用者代码上传，而不是在带有 imagejpeg(file, path) 的 createThumb 函数中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:19:20.013

[手册](http://php.net/manual/en/function.move-uploaded-file.php)的第一行：

> 该函数检查以确保 filename 指定的文件是有效的上传文件（**意味着它是通过 PHP 的 HTTP POST 上传机制上传的**）。如果文件有效，它将被移动到目的地给定的文件名。

您的缩略图没有上传，它甚至还不是一个文件，而只是一个图像资源。要写入图像，请调用类似`imagejpeg($resource, $filename)`将其写入`$filename`.

# c# - FluentNHibernate 使用额外数据映射连接表

> ID：11097960
> 
> 赞同：2
> 
> 时间：2012-06-19T09:15:56.613
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有一个非常简单的数据库表，它以 many2many 关系连接另外两个表。

（几乎让用户提出问题——想想书签）

此表的我的 NHibernate 实体如下所示：

```
public class UserToRequestSubscription
{
    public virtual int Id{get;set;}
    public vitual int UserId{get;set;}
    public virtual int RequestId { get; set; }
    public virtual bool AcceptedByRequester { get; set; }
} 
```

我想做的是添加一个新属性：

```
 public virtual RequestForHelp Request { get; set; } 
```

到目前为止，我可以让它为选择工作。在我的`UserToRequestSubscriptionMapping`我可以简单地做：`References(x => x.Request)`。

我遇到的问题是尝试插入一个新`UserToRequestSubscription`的抛出：`Invalid index 6 for this SqlParameterCollection with Count=6.`。

我已经阅读了这个错误，当我删除`RequestId`属性时它消失了，但是没有这个，插入新订阅时不会填充数据库中的 RequestId 字段。

我该怎么做呢？

我的目的是节省对数据库的额外调用`RequestForHelp`。

**这是映射类：**

```
public UserToRequestSubscriptionMapping()
{
      Id(x => x.Id);
      Map(x => x.UserId);
      Map(x => x.RequestId);
      Map(x => x.CreatedDate);
      Map(x => x.AcceptedByRequester);
      Map(x => x.IsActive);
      Map(x => x.DeactivatedDate);
      References(x => x.Request).Column("RequestId");
      Table("TheTable");
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:26:48.527

我猜问题在于您根据映射两次引用 RequestId 。我认为`RequestId`一旦添加，该属性是多余的`Request`。

```
public class UserToRequestSubscription
{
    public virtual int Id{get;set;}
    public vitual User User{get;set;} // you'd probably also change this, too
    public virtual RequestForHelp Request { get; set; } // changed
    public virtual bool AcceptedByRequester { get; set; }
}

public UserToRequestSubscriptionMapping()
{
    Id(x => x.Id);
    Map(x => x.CreatedDate);
    Map(x => x.AcceptedByRequester);
    Map(x => x.IsActive);
    Map(x => x.DeactivatedDate);
    References(x => x.Request).Column("RequestId");
    References(x => x.User).Column("UserId");
    Table("TheTable");
} 
```

# python - 迭代列表时如何在python中获取当前循环的内部索引？

> ID：11097963
> 
> 赞同：2
> 
> 时间：2012-06-19T09:16:07.977
> 
> 标签：python, loops, indexing, counter

我有一个`listx =[1,2,3,4,5,6,7,8,9]`

我想更改列表中的每 N 个项目。例如，我想为每 2 项步骤进行修改，假设我想通过 +1 进行修改。所以我想得到结果=`[1+1,2,3+1,4,5+1,6,7+1,8,9+1] =[2,2,4,4,6,6,8,8,9]`

我可以通过使用 for-loop 来做到这一点，通过添加计数器变量，然后通过 counter%2==0 检查计数器。但这次我只是好奇使用单行语句。这是我想要的=

`newlistx=[i+1 for i in listx]`<- 这将修改所有项目，所以我希望我可以在这个迭代过程中使用一些内部索引，变成这样：

`newlistx=[i+1 if (__indexing__%step==0) else i for i in listx]`其中步骤 = 2。

实际上，我可以使用 list.index() 函数，如下所示：

`newlistx=[i+1 if listx.index(i)%2==0 else i for i in listx]`

这个问题只有在所有项目都是唯一的情况下才有效，如果我得到的项目具有相同的值，那么 index() 将返回错误的值。

同样，我只是好奇我是否可以获取一些内部索引或计数器（如果存在）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:20:39.437

您可以使用该`enumerate`功能。

```
newlist = [x + 1 if n % step == 0 else x
           for (n, x) in enumerate(oldlist)] 
```

该`enumerate`函数遍历一个序列并产生带有索引的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:32:31.947

```
new_list = [n + 1 if i & 1 else n for i, n in enumerate(listx)] 
```

# java - 请解释 Java 同步如何与静态方法一起工作？

> ID：11097964
> 
> 赞同：-4
> 
> 时间：2012-06-19T09:16:11.560
> 
> 标签：java, static, synchronized

> **可能重复：**
> [Java 同步方法：锁定对象或类](https://stackoverflow.com/questions/437620/java-synchronized-methods-lock-on-object-or-class)

请解释 Java 同步如何与静态方法一起工作？有人说它是由它的类对象完成的，但他们没有说锁是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:19:33.180

您始终在监视器对象上进行同步。每个 Java 对象都可以在这里使用。

使用同步块，您可以直接指定该对象。

```
synchronized (something){
} 
```

使用同步方法，它会在对象实例本身（on `this`）上同步，因此它等同于：

```
synchronized (this) {
} 
```

使用同步的静态方法，它在类对象上同步，就像“有人说过”一样。

```
synchronized (ThisClass.class){
} 
```

机制始终相同：只有一个线程可以同时持有锁，其他线程必须等待。

# android - 在带有标记的地图上显示多个地址

> ID：11097972
> 
> 赞同：0
> 
> 时间：2012-06-19T09:16:48.833
> 
> 标签：android, android-mapview, android-maps

我对与地图相关的一件事感到困惑：

我们可以使用两种方式在地图上显示地址：

*   1）使用本机/内置地图应用程序并使用以下代码在地图上显示带有标记的地址：

    ```
     Intent intent = new Intent(android.content.Intent.ACTION_VIEW , 
            Uri.parse("geo:0,0?q= (" + MyAddress+ ")"));
    startActivity(intent); 
    ```

在这里它会自动转换纬度和经度并打开本机地图应用程序并在地图上显示该地址。

*   2）这里我们必须在我们自己的应用程序中使用地图视图并显示地图。
    但是在这里我很困惑有什么方法可以使用（1）方法在地图上显示多个地址？

因为在这里我只传递 1 个地址`MyAddress`，但传递多个地址的方法是什么？
这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:28:49.400

据我所知，Android**目前不支持****通过 Intent**在本机 Google Map 应用程序中进行多地址标记。您可以在本地 Google 地图应用程序中使用 Intent 仅显示一个地址。对于地图上的多个地址，您必须构建自己的 android 地图应用程序。

# php - 我想获得填写在 php 表单中的两个时间戳之间的差异

> ID：11097973
> 
> 赞同：0
> 
> 时间：2012-06-19T09:17:10.643
> 
> 标签：php, mysql, datetime, datediff, php-5.2

我有一个 HTML 表单，它从用户那里获取数据作为 open_date 和 close_date。提交表单时，数据将被加载到 MYSQL 数据库中。

我想要的是：我的数据库中有一个列，它以小时为单位存储这两个时间戳之间的差异。

你能帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:23:36.800

## 功能

```
 function dateDiff($time1, $time2, $precision = 6) {
    // If not numeric then convert texts to unix timestamps
    if (!is_int($time1)) {
      $time1 = strtotime($time1);
    }
    if (!is_int($time2)) {
      $time2 = strtotime($time2);
    }

    // If time1 is bigger than time2
    // Then swap time1 and time2
    if ($time1 > $time2) {
      $ttime = $time1;
      $time1 = $time2;
      $time2 = $ttime;
    }

    // Set up intervals and diffs arrays
    $intervals = array('year','month','day','hour','minute','second');
    $diffs = array();

    // Loop thru all intervals
    foreach ($intervals as $interval) {
      // Create temp time from time1 and interval
      $ttime = strtotime('+1 ' . $interval, $time1);
      // Set initial values
      $add = 1;
      $looped = 0;
      // Loop until temp time is smaller than time2
      while ($time2 >= $ttime) {
        // Create new temp time from time1 and interval
        $add++;
        $ttime = strtotime("+" . $add . " " . $interval, $time1);
        $looped++;
      }

      $time1 = strtotime("+" . $looped . " " . $interval, $time1);
      $diffs[$interval] = $looped;
    }

    $count = 0;
    $times = array();
    // Loop thru all diffs
    foreach ($diffs as $interval => $value) {
      // Break if we have needed precission
      if ($count >= $precision) {
    break;
      }
      // Add value and interval 
      // if value is bigger than 0
      if ($value > 0) {
    // Add s if value is not 1
    if ($value != 1) {
      $interval .= "s";
    }
    // Add value and interval to times array
    $times[] = $value . " " . $interval;
    $count++;
      }
    }

    // Return string with times
    return implode(", ", $times);
  } 
```

## 用法

```
echo dateDiff("2010-01-26", "2004-01-26") . "\n";
echo dateDiff("2006-04-12 12:30:00", "1987-04-12 12:30:01") . "\n";
echo dateDiff("now", "now +2 months") . "\n";
echo dateDiff("now", "now -6 year -2 months -10 days") . "\n";
echo dateDiff("2009-01-26", "2004-01-26 15:38:11") . "\n"; 
```

链接告诉你所有关于日期差异的信息

[http://www.if-not-true-then-false.com/2010/php-calculate-real-differences-between-two-dates-or-timestamps/](http://www.if-not-true-then-false.com/2010/php-calculate-real-differences-between-two-dates-or-timestamps/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:24:48.860

你可以：

```
$timeDiff = strtotime('2012-07-08 13:43:22') - strtotime('2012-07-07 12:13:12');

echo round($timeDiff / 60 / 60); 
```

# java - Webscarab 拒绝与所有浏览器连接

> ID：11097977
> 
> 赞同：2
> 
> 时间：2012-06-19T09:17:37.690
> 
> 标签：java, linux, browser, proxy, penetration-testing

您好我正在使用 webscarab 作为代理来查看我的浏览器和服务器之间的对话。我有一段时间没有使用 webscarab。以前用的时候还可以。但是现在所有的连接都被拒绝了，所有的浏览器或端口。它显示如下异常。

```
WebScarab encountered an error trying to retrieve

GET http://www.gooogle.com:80/ HTTP/1.1
Host: www.gooogle.com
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:13.0) Gecko/20100101 Firefox/13.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Proxy-Connection: keep-alive
Cache-Control: max-age=0

The error was :

Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at org.owasp.webscarab.httpclient.URLFetcher.connect(URLFetcher.java:368)
    at org.owasp.webscarab.httpclient.URLFetcher.fetchResponse(URLFetcher.java:229)
    at org.owasp.webscarab.plugin.proxy.CookieTracker$Plugin.fetchResponse(CookieTracker.java:130)
    at org.owasp.webscarab.plugin.proxy.BrowserCache$Plugin.fetchResponse(BrowserCache.java:101)
    at org.owasp.webscarab.plugin.proxy.RevealHidden$Plugin.fetchResponse(RevealHidden.java:100)
    at org.owasp.webscarab.plugin.proxy.BeanShell$Plugin.fetchResponse(BeanShell.java:229)
    at org.owasp.webscarab.plugin.proxy.ManualEdit$Plugin.fetchResponse(ManualEdit.java:243)
    at org.owasp.webscarab.plugin.proxy.ConnectionHandler.run(ConnectionHandler.java:233)
    at java.lang.Thread.run(Thread.java:636) 
```

这是我现在从 Firefox 得到的错误。我尝试更改侦听器端口和浏览器。但是没有用。仍然得到同样的例外。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-28T12:34:49.653

最可能的问题是 WebScarab 本身配置了一个代理，WebScarab 无法访问。要检查这一点，请转到工具 -> 代理，并确保没有配置代理（除非您需要上游代理才能正常访问站点，在这种情况下，请确保已正确配置。）

[javafx2.2 webengine和webscarab之间的连接失败](https://stackoverflow.com/questions/13294436/connection-between-javafx2-2-webengine-and-webscarab-fails)

它对我有用。

# python - Google Analytics API - 表 ID

> ID：11097978
> 
> 赞同：0
> 
> 时间：2012-06-19T09:17:38.287
> 
> 标签：python, gdata

我正在尝试通过 Google Analytics API 访问我们网站的 Web 使用统计信息。我从这里下载了 Python 代码

[http://code.google.com/p/gdata-python-client/](http://code.google.com/p/gdata-python-client/)

在 samples/analytics 文件夹下，有 data_feed_demo.py。我运行了它，但是这段代码似乎需要一个表 ID，但在文档中不清楚它来自哪里。在 Web 上，一些人建议使用个人资料 ID，另一些人则建议从 GA 管理页面查看一些 URL。我从 GA 工具中尝试了此类 URL 的各个部分，但代码无法获取数据。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:46:52.203

这里有一个答案

[https://groups.google.com/forum/?fromgroups#!topic/google-analytics-data-export-api/SdprtYcBLP4](https://groups.google.com/forum/?fromgroups#!topic/google-analytics-data-export-api/SdprtYcBLP4)

当我登录 GA 时，主页中的 URL 类似于

https://www.google.com/analytics/web/?et=#dashboard...a[xxx]w[xxx]p[xxx]/

我从 p[xxx] 中取出 [xxx] 并将示例脚本作为 ga:[xxx] 给出。这行得通。有趣的是我记得以前从 URL 中取出 p 值，但我想我不在主页上。无论如何。这就是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T16:06:22.127

[https://developers.google.com/analytics/solutions/articles/hello-analytics-api](https://developers.google.com/analytics/solutions/articles/hello-analytics-api)

这是开始使用 GA api 的最佳方式。

# matlab - Matlab：mean() 函数中的中性元素是什么？

> ID：11097987
> 
> 赞同：0
> 
> 时间：2012-06-19T09:18:20.217
> 
> 标签：matlab, matrix, element, mean

我在一个 3 维矩阵中有一堆值，我正在找到它们的平均值：

```
mean(mean(mat)) 
```

现在，出于不同的原因，我必须将一些行和元素附加到矩阵中。但我希望平均值保持不变 - 就好像添加的元素是中性的并且不会对结果造成影响。

就像当您将一堆值相乘时，您可以在不改变结果的情况下将额外的 1 相乘。此外，您可以添加更多的 0 而不会造成任何影响。

使用 Matlab 时，我可以为矩阵中的新元素分配什么样的值以使元素保持中性`mean()`？

**已添加注释**

关键是，当我计算平均值时，我只有新的调整大小的矩阵来做它。因此添加的元素必须是中性的。

我正在考虑类似的东西`NaN`，但我没有运气，因为平均值也最终为`NaN`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:19:32.697

添加等于矩阵平均值但不添加值的值将使新平均值保持不变。（我希望这是有道理的！）。重点是填不改新均值，使用当前均值。

或者，您可以填写 NaN 并使用该`nanmean`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:48:26.720

向矩阵添加零并将平均值重新调整为正确的值。

即，如果您的原始矩阵 A 是 nxm 并且您将大小调整为 B 这是 N x M 那么：

```
mean(mean(A)) = sum(sum(A)) / n x m

mean(mean(B)) = sum(sum(B)) / N x M
              = sum(sum(A)) / N x M   --- since we padded with zeros 
```

重新排列给

```
mean(mean(A)) = mean(mean(B)) * ( ( N x M )/(n x m) ) 
```

# mysql - 使用复合键时添加外键约束给我错误

> ID：11097989
> 
> 赞同：2
> 
> 时间：2012-06-19T09:18:29.967
> 
> 标签：mysql, foreign-keys, foreign-key-relationship, composite-primary-key

我正在尝试创建三个表，但是出现错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REFERENCES personal_details(personID)
)' 
```

上述错误适用于第三张表，即表`hobbies_person`。

我正在创建如下表。

```
CREATE TABLE personal_details (
    personID   INT PRIMARY KEY,
    firstName  varchar(30),
    middleName varchar(30),
    lastName   varchar(30),
    age        INT,
    aboutMe    varchar(500)
);

CREATE TABLE hobbies (
    hobbID    INT PRIMARY KEY,
    hobbName  varchar(30)
);

CREATE TABLE hobbies_person (
    personID INT,
    hobbID   INT,
    PRIMARY KEY (personID, hobbID),
    FOREIGN KEY personID REFERENCES personal_details(personID)
); 
```

我也试过

```
CREATE TABLE hobbies_person (
    personID INT,
    hobbID   INT,
    PRIMARY KEY (personID, hobbID),
    FOREIGN KEY personID REFERENCES personal_details(personID),
    FOREIGN KEY hobbID   REFERENCES hobbies(hobbID)
); 
```

但仍然是同样的错误。

## [检查查询的链接](http://sqlfiddle.com/#!2/417b4)

知道如何解决这个问题吗？

## 笔记

在表中`hobbies_person`，我使用**复合主键**作为`PRIMARY KEY (personID, hobbID),`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:23:40.810

`personID`对于 FK 定义，您需要将列括在括号中：

```
CREATE TABLE hobbies_person (
    personID INT NOT NULL,
    hobbID   INT NOT NULL,
    PRIMARY KEY (personID, hobbID),
    FOREIGN KEY (personID) REFERENCES personal_details(personID)
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:24:12.780

你忘记了`()`你的外键

```
FOREIGN KEY (personID) REFERENCES personal_details(personID) 
```

# php - 如何设置php类属性？

> ID：11097990
> 
> 赞同：-6
> 
> 时间：2012-06-19T09:18:33.997
> 
> 标签：php, class, methods, attributes

我有问题

```
class a
{
     public $aa=1;
     public function dd(){
       $this->aa = 2;
     }
     public function gg(){
       echo   $this->aa ;
     }
} 
```

go方法怎么`echo $this->aa`还是'1'？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:20:16.633

因为`do`是 PHP 中的保留关键字。

[`do`as 方法名的演示。](http://codepad.org/EzUkPbUi)（一个错误）

[Demo 没有`do`，成功输出 2](http://codepad.org/8c3TgJi1)

您应该将方法名称从更改`do`为其他名称，因为它是[`do-while`](http://php.net/manual/en/control-structures.do.while.php)循环中使用的保留关键字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T09:19:35.103

因为函数`dd()`永远不会执行

# python - 链接两个 OptionMenu 小部件 Tkinter

> ID：11097994
> 
> 赞同：1
> 
> 时间：2012-06-19T09:19:01.263
> 
> 标签：python, tkinter

在下面显示的简单代码中，我有两个 OptionMenu 小部件：

```
 variable = StringVar(win1)                               
    variable.set(number(number2))
    type = OptionMenu(win1, variable, "None", "Clear", "Dark", "Heavy", )
    type.grid(row=i, column=3, sticky="nsew", padx=1, pady=1)

    variableunit = StringVar(win1)
    variableunit.set(unit)
    unit = OptionMenu(win1, variableunit, "colour", "shade")
    unit.grid(row=i, column=5, sticky="nsew", padx=1, pady=1) 
```

我已经尝试使用回调函数进行跟踪，但到目前为止还没有奏效。我想在第一个菜单中选择“重”时链接，第二个菜单总是“颜色”。对于其余选项，第二个菜单必须始终默认为“阴影”，但可以更改。

如果有人可以帮助我，我将不胜感激。我已经查看了带有变量和跟踪的 effbot 站点，但仍然卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:04:46.470

目前尚不清楚您想要什么，但我认为应该这样做。

在第一个菜单中选择“重”时，在第二个菜单中选择“颜色”并且该菜单被禁用（无法选择其他任何内容）。当在第一个菜单中选择其他内容时，第二个菜单会转到“mm”并再次启用。

```
from Tkinter import *

class app:
    def __init__(self, root):
        win1 = Frame(root)
        win1.grid(row=0,column=0)

        self.variable = StringVar(win1)                               
        self.variable.set(42)
        self.type = OptionMenu(win1, self.variable,
                          "None", "Clear", "Dark", "Heavy",
                          command = self.varMenu)
        self.type.grid(row=1, column=3, sticky="nsew", padx=1, pady=1)

        self.variableunit = StringVar(win1)
        self.variableunit.set('mm')
        self.unit = OptionMenu(win1,
                          self.variableunit, "mm", "colour", "shade")
        self.unit.grid(row=1, column=5, sticky="nsew", padx=1, pady=1)

    def varMenu(self, selection):
        if selection == "Heavy":
            self.variableunit.set("colour")
            self.unit.config(state = DISABLED)
        else:
            self.variableunit.set("mm")
            self.unit.config(state = NORMAL)

root = Tk()
a = app(root)
root.mainloop() 
```

# ios - 获得朋友脸书墙贴

> ID：11097996
> 
> 赞同：0
> 
> 时间：2012-06-19T09:19:05.753
> 
> 标签：ios, facebook, facebook-wall

这可能吗？我知道如何从你自己的墙上做到这一点，但不确定如何或是否可以从你朋友的墙上做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:22:10.000

对于自己的墙饲料，你必须这样做。

图网址/我/提要。

对于你应该做的朋友。

graphurl/{friendId}/feeds