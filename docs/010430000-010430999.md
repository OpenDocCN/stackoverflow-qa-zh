# StackOverflow 问答 10430000-10430999

# c# - 通过处理程序下载文件时询问密码

> ID：10430000
> 
> 赞同：0
> 
> 时间：2012-05-03T10:59:25.897
> 
> 标签：c#, asp.net, asp.net-mvc

在下载这样的文件时

```
<a target="_self" href="/abc/accc/Document/downloadFile.ashx?id=667491E0-6581-4AD5-A23F-4CB99F4075ED">Some file name</a> 
```

应该提示密码字段，输入密码后，文件将可下载....:) 我使用处理程序用 c# 在 asp.net 中下载文件

我只是简要介绍一下要求..实际上文件将可以在互联网上搜索...这些文件将受到密码保护。如果他单击文件下载文件，任何人都会搜索该文件，它会提示输入密码，就像在 modalpopextender 有密码文本框中一样。他将与文件所有者联系以请求密码。收集密码后，他将能够下载密码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:08:05.550

一种解决方案是不直接链接文件，而是将 id 保存在视图状态或会话中，并添加一个登录页面，该页面显示在按下的链接上。

```
<a target="_self" href="/login.aspx?id=667491E0-6581-4AD5-A23F-4CB99F4075ED">Some file name</a> 
```

然后在 login.aspx 中请求凭据，如果成功则重定向到 Handler.ashx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:08:43.350

您可以编写一个 httpmodule 并验证对您的处理程序的所有请求。

# javascript - 图像叠加闪烁？

> ID：10430003
> 
> 赞同：3
> 
> 时间：2012-05-03T10:59:32.600
> 
> 标签：javascript, jquery

****事实是所有这些解决方案都有效，只是不适用于项目，所以我将重新提出问题，略有不同****

基本上我有一个图像，当有人将鼠标光标移到它上面时，它会显示一个 div（其中包含一个图像 - 也就是播放按钮）。当他们移动时，他们的光标在图像之外，播放按钮就会消失。

它有效，但如果你将诅咒移到播放按钮上，它会像疯了一样闪烁，因此我必须以某种方式混淆我的事件..

在此先感谢您的帮助...

HTML

```
<div id="cont">
    <div id="art"  style= "position: absolute; left: 20px; top: 40px;">
        <a href="#"><img src="http://www.newmusicproducer.com/img/ic_play.png"></a>
    </div>
    <img src="https://i1.sndcdn.com/avatars-000008744854-5sr588-large.jpg?d408275" alt="smile" id="imgSmile"></img> 
```

jQuery

```
$(document).ready(function() {
    $('#art').hide();             
    $('#imgSmile').mouseenter(function() {
        $('#art').show();
    });

    $('#imgSmile').mouseleave(function() {   
        $('#art').hide();
    });
});​ 
```

[这是一个小提琴](http://jsfiddle.net/tW68d/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:16:05.470

仅使用 CSS 就可以达到同样的效果：

```
<div>
    <a href="#"><img src="http://www.newmusicproducer.com/img/ic_play.png"></a>
</div>

div
{
 background-image:url('https://i1.sndcdn.com/avatars-000008744854-5sr588-large.jpg?d408275');
    width:100px;
    height:100px;
    position:relative;
}
div a
{
 position:absolute;
    top:20px;
    left:30px;
    display:none;
}
div:hover a
{
    display:block;
} 
```

[**-- 观看演示 ​​--**](http://jsfiddle.net/tW68d/11/)

* * *

**编辑：**如果您需要在具有不同链接 URL 的同一页面上多次使用它，我制作了一个需要最少 HTML 的版本，使用一点 jQuery 来应用其余部分：

```
<div class="play kirkbridge" data-playUrl="/myPlayUrl"></div> 
```

[http://jsfiddle.net/tW68d/16/](http://jsfiddle.net/tW68d/16/)

不过，这可能有点矫枉过正，这取决于您的使用情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T11:08:37.113

问题是将鼠标悬停在新图像上导致原始图像上的鼠标悬停。尝试`hover()`改用两个元素作为选择器。

```
$(document).ready(function() {
    $('#art').hide();
    $('#imgSmile, #art').hover(
        function() {
            $('#art').show();
        }, function() {
            $('#art').hide();
        }
    );
}); 
```

[**更新的小提琴**](http://jsfiddle.net/tW68d/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:13:56.780

您可以使用该`.on()`方法，
而不是将两个元素都设置为选择器并使用事件`(e)`检查器，例如：

### *[演示 jsBin](http://jsfiddle.net/roXon/tW68d/10/)*

```
$(document).ready(function(){

    $('#art').hide();

    $('#imgSmile, #art').on('mouseenter mouseleave',function(e){
        if(e.type === 'mouseenter'){
            $('#art').show();
        }else{
            $('#art').hide();   
        }
    });

}); 
```

* * *

我最喜欢的是使用三元运算符，例如：

```
$('#imgSmile, #art').on('mouseenter mouseleave',function(e){
    var et = e.type === 'mouseenter' ? $('#art').show() :  $('#art').hide();  
}); 
```

### *[演示与 ternaly 运算符](http://jsfiddle.net/roXon/tW68d/12/)*

* * *

您可以在您的确切情况下使用以下`.toggle()`方法：

```
$('#imgSmile, #art').on('mouseenter mouseleave',function(e){
    $('#art').toggle(); 
}); 
```

### *[使用 .toggle() 演示](http://jsfiddle.net/roXon/tW68d/13/)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:17:22.710

这是另一种方法：

[http://jsfiddle.net/aramk/ZqVZ6/1/](http://jsfiddle.net/aramk/ZqVZ6/1/)

```
$(document).ready(function(){

    var art = $('#art');
    art.hide();
    var updatePlayButton = function() {
        if (art.is(':visible')) {
            art.hide();
        } else {
            art.show();
        }
    }

    $('#cont').hover(updatePlayButton);

});​ 
```

我会使用包装 DIV，因为当按钮与微笑图像重叠并且您的鼠标在它上方时，您会从微笑图像中失去焦点并开始闪烁。这将避免这种情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T11:18:28.577

如果可以的话，也可以使用 CSS 来完成。

这是小提琴[http://jsfiddle.net/xasy4/](http://jsfiddle.net/xasy4/)

```
<div id="imgSmile">
     <div id="art">
        <a href="#"><img src="http://www.newmusicproducer.com/img/ic_play.png">
        </a>
     </div>
    </div> 
```

**的CSS**

```
 #imgSmile
{
    background: url('https://i1.sndcdn.com/avatars-000008744854-5sr588-large.jpg?d408275') no-repeat center Transparent;
    width: 100px;
    height: 100px;
}
#imgSmile > #art
{
    position: absolute; left: 20px; top: 40px; opacity: 0;
}
#imgSmile:hover > #art
{
    position: absolute; left: 20px; top: 40px; opacity: 1;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T11:20:29.807

[http://jsfiddle.net/jqkBx/1/](http://jsfiddle.net/jqkBx/1/)

为什么不直接使用 CSS 来实现悬停效果？

HTML

```
<div id="wrapper">
  <img src="https://i1.sndcdn.com/avatars-000008744854-5sr588-large.jpg?d408275" alt="smile" id="imgSmile" />

  <div id="art" style="position: absolute; left: 20px; top: 40px;">
     <a href="#"><img src="http://www.newmusicproducer.com/img/ic_play.png" /></a>
  </div>
  </div> 
```

CSS

```
#art{
    display:none;
}
#wrapper{
    width:100px;
    height:100px;        
}
#wrapper:hover #art{
    display:block;        
} 
```

​</p>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T11:17:07.353

```
$(document).ready(function() {
    $('#art').hide();             
    $('#imgSmile').mouseenter(function() {
        $('#art').show();
    });
$('#art').mouseenter(function() {
        $('#art').show();
    });
    $('#imgSmile').mouseleave(function() {   
        $('#art').hide();
    });
});​ 
```

只需添加`#art`鼠标输入事件

# php - PHP MYSQL PDO -> 致命错误 23000，尽管有特殊程序

> ID：10430005
> 
> 赞同：3
> 
> 时间：2012-05-03T10:59:38.643
> 
> 标签：php, mysql, pdo

我的数据库中有一张桌子。我的表有几个字段，包括一个自动递增的 id 字段设置为主键，另一个字段称为“引用”，我确实设置为唯一。为了填充该表，我有一个使用 pdo 在该表中插入记录的 php 脚本。每次插入成功（意味着表中不存在“引用”）时，我都会增加一个名为 $newOnes 的变量。如果值“reference”已在表中，则会触发代码为 23000 的异常。在这种情况下，我增加了另一个名为 $doublons 的变量。**不幸的是，当 while 循环“处理”表的最后一条记录时，**我的脚本触发了一个致命错误，异常 23000 。我不明白。预先感谢您的帮助。干杯。马克。

我的PHP代码：

```
try {
  $connexion = connexion('localhost', 'user', 'user', 'mydb');
  $connexion->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  $qry_bat = $connexion->query('SELECT...');
  $ins_db = $connexion->prepare('INSERT...');
}
catch (PDOException $e) {
  echo $e->getMessage();
}

while($row = $qry_bat->fetch(PDO::FETCH_ASSOC)) {
  try {
    $ins_db->execute(array(...));
    $newOnes++;
  }
  catch (PDOException $e) {
    if ($e->getCode() != 23000) {
      echo '<span class="msg-alert">'.$e->getMessage().'</span>';
    } else {
      $doublons++;
    }
  }
} 
```

我得到的致命错误（注意第 22 行是指 while(...) 行）：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[23000]:  
Integrity constraint violation: 1062 Duplicate entry 'theFieldContentOfTheLastRecordOfTheTable' for key 'theFieldNameReference' in  
/myFilePath/file.php:22 Stack trace: #0 /myFilePath/file.php(22): PDOStatement->fetch(2)  
#1 {main} thrown in /myFilePath/file.php on line 22 
```

编辑 //////////

原始表（要提到的事情）：
自动递增 id

要插入的表（要提及的事情）：
在 id 字段上自动递增
UNIQUE INDEX 参考

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T10:10:17.967

（*升级到答案*）

看起来像[这个 bug](https://bugs.php.net/bug.php?id=42322)，将近五年后仍然开放；改为尝试：

```
while (true) {
  try {
    $row = $qry_bat->fetch(PDO::FETCH_ASSOC);
    if (!$row) break;
    $ins_db->execute(array(...));
    $newOnes++;
  }
  catch (PDOException $e) {
    if ($e->getCode() != 23000) {
      echo '<span class="msg-alert">'.$e->getMessage().'</span>';
    } else {
      $doublons++;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:16:25.563

堆栈跟踪显示在 try/catch 块之外的 fetch 中发生的异常。

SELECT 语句正在触发：

```
Integrity constraint violation: 1062 Duplicate entry 'theFieldContentOfTheLastRecordOfTheTable' 
```

**有一个名为theFieldContentOfTheLastRecordOfTheTable**的唯一键与之冲突。

您能否发布架构让我们看看这会如何影响完整性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T12:09:15.617

在该列中查找已脏/重复的数据。某些应用程序允许在已捕获数据后应用“松散”约束。这可能发生在您的情况下。

# php - 如何检查页面是否用php缓存

> ID：10430006
> 
> 赞同：1
> 
> 时间：2012-05-03T10:59:49.390
> 
> 标签：php, http-headers

...以及它是否在 30 天前被缓存，，

我正在使用这段代码：

```
 $page=get_headers('http://www.w3schools.com/php/func_date_strtotime.asp'); 
```

输出是这样的：

> ```
> 0=>HTTP/1.1 200 OK 
> ```
> 
> 1=>连接：关闭
> 
> 2=>日期：2012 年 5 月 3 日星期四 10:51:00 GMT
> 
> 3=>服务器：Microsoft-IIS/6.0
> 
> 4=>MicrosoftOfficeWebServer: 5.0_Pub
> 
> 5=>X-Powered-By: ASP.NET
> 
> 6=>编译指示：无缓存
> 
> 7=>内容长度：23643
> 
> 8=>内容类型：文本/html
> 
> 9=>到期：2012 年 5 月 3 日星期四 10:50:00 GMT
> 
> 10=>设置 Cookie：ASPSESSIONIDSAARQQST=AAMAAHBBBHBELMHDCHNNLMFP；路径=/
> 
> 11=>缓存控制：无缓存

我读了那个 pragma cache ，并不一定意味着该页面是不可缓存的。

我想知道两件事：1）页面是否被缓存 2）是否在 30 天前被缓存。

我可以这样做吗

```
 $date1=gmdate("D, d M Y H:i:s", strtotime("30 days ago")) . " GMT";
  $date2=$page['Expires'];
  if($date1>$date2)
  {
    echo 'The page was cached for longer than 30 days';
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:19:41.753

由于 PHP 是一种服务器端语言，因此您无法使用 PHP 检查浏览器缓存（这是客户端）。所以你需要一些像 Javascript 这样的客户端脚本，而不是像 PHP 这样的服务器端编程。

# arduino - 数字读取传感器时出错

> ID：10430031
> 
> 赞同：0
> 
> 时间：2012-05-03T11:01:37.540
> 
> 标签：arduino, sensors, digital

我正在尝试从 QTRA 8 传感器板上以数字方式读取所有单独的 8 个传感器：

[http://www.pololu.com/docs/0J19/all](http://www.pololu.com/docs/0J19/all)

我遇到的问题是，尽管机器人可以正确读取其位置：

```
qtra.readLine(sensorValues); 
```

它可以正确读取前 6 个传感器的数字，它不会从前 2 个传感器中读取任何内容。

下面是我为测试它而编写的简化代码。请注意，light7 和 light 8 始终返回 0，即使直接位于黑线之上。我想知道我是否做错了什么，以及有什么方法可以避免手动将 1 或 0 分配给前 2 个传感器的输出。

```
 #include <QTRSensors.h>

#define NUM_SENSORS             8   // number of sensors used
#define NUM_SAMPLES_PER_SENSOR  4  // average 4 analog samples per sensor reading
#define EMITTER_PIN             2  // emitter is controlled by digital pin 2

// sensors 0 through 5 are connected to analog inputs 0 through 5, respectively
QTRSensorsAnalog qtra((unsigned char[]) {A7, A6, A5, A4, A3, A2, A1, A0}, 
  NUM_SENSORS, NUM_SAMPLES_PER_SENSOR, EMITTER_PIN);
unsigned int sensorValues[NUM_SENSORS];

//LIGHTS
int light1 = A0;
int light2 = A1;
int light3 = A2;
int light4 = A3;
int light5 = A4;
int light6 = A5;
int light7 = A6;
int light8 = A7;

void setup(){
  pinMode(light1, INPUT);
  pinMode(light2, INPUT);
  pinMode (light3, INPUT);
  pinMode(light4, INPUT);
  pinMode(light5, INPUT);
  pinMode(light6, INPUT);
  pinMode(light7, INPUT);
  pinMode(light8, INPUT);

  Serial.begin(9600);
}

void loop(){
  Serial.print(digitalRead(light1));
  Serial.print(".....");
  Serial.print(digitalRead(light2));
  Serial.print(".....");
  Serial.print(digitalRead(light3));
  Serial.print(".....");
  Serial.print(digitalRead(light4));
  Serial.print(".....");
  Serial.print(digitalRead(light5));
  Serial.print(".....");
  Serial.print(digitalRead(light6));
  Serial.print(".....");
  Serial.print(digitalRead(light7));
  Serial.print(".....");
  Serial.print(digitalRead(light8));
  Serial.println();
} 
```

感谢任何愿意花时间回答这个问题的人......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:06:03.427

问题在于传感器设计在一个 2 传感器模块和另一个 6 传感器模块中。

我不得不通过比较analogRead 函数的值来人为地引入“数字读取”。

IE

```
 if(analogRead(light7) > value){
        return 1;
}else{
     return 0;
} 
```

# wcf - 使用 makecert.exe 在 Windows azure Web 或辅助角色上生成证书

> ID：10430034
> 
> 赞同：1
> 
> 时间：2012-05-03T11:02:04.553
> 
> 标签：wcf, azure, certificate, makecert

我们计划在 Azure Web 角色上创建和安装自签名证书。我们需要在 Web 角色本身上创建证书并在那里安装。但是我们在 azure web 和 worker 角色上找不到 makecert.exe。我们在 azure 角色上做了远程桌面，发现 makecert.exe 丢失了。在 azure 角色上创建和安装证书的任何方向都会有帮助吗？

如果有任何管理 API 可用于在 Web 角色上创建证书，请与我分享，因为我无法在 msdn 中找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:31:54.477

您有几个选项来创建自签名证书：

*   **将makecert.exe**与您的应用程序一起部署（将其包含在您的 VS 项目中，设置 Copy Local = true）
*   自己写一些东西来生成证书（这里的例子：[https](https://github.com/mono/mono/blob/master/mcs/tools/security/makecert.cs) ://github.com/mono/mono/blob/master/mcs/tools/security/makecert.cs ）

但它不仅仅是生成证书。如果您有多个实例在运行，您会怎么做？您会在 1 个实例上安装证书吗？还是您需要所有实例都拥有证书？如果重新部署应用程序会怎样？...

在这些情况下，您可能需要向前看。是否可以选择将所有这些证书存储在 blob 存储中？也许您可以在每个实例上运行一个进程，将证书与当前实例“同步”。您还可以使用 AppFabric ServiceBus 主题在生成新证书时通知其他实例...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:45:23.223

您的问题的直接答案是 Makecert.exe 是一个实用程序，可以通过安装 Visual Studio 或 Windows SDK 安装，也可以从 Microsoft 站点直接下载。Windows Azure VM 肯定没有这个 makecert.exe，因为它不是基础 Windows 部署的一部分，如果你想在 Windows Azure VM 中使用/运行 Makecert，你真的需要在你的项目中添加并部署它。

但是，如果您需要将证书部署到 Windows Azure，您真的不需要即时生成它（即使用 Makecert.exe），因为还有其他更简单的方法可以做到这一点。您只需将 PFX 证书添加（或部署）到您的 Windows Azure 服务 -> 证书部分，当您的 VM 将被初始化时，证书将被配置到您的 Windows Azure 角色（Web 或 Worker 或 VM），因此没有需要将 Makecert.exe 添加到您的项目中，然后使用启动任务来运行它。

与其依赖 Makecert.exe 或任何其他方法来获得您的角色证书，我建议使用上述方法，该方法实际上是为此类要求设计的。如果您不知道如何直接将证书部署到您的 Windows Azure 服务到门户或使用 PowerShell，请告诉我。

# jakarta-ee - 寻找 Java EE 6 应用程序

> ID：10430035
> 
> 赞同：0
> 
> 时间：2012-05-03T11:02:06.047
> 
> 标签：jakarta-ee, jpa

我正在寻找使用 JPA 构建 JUnit 测试用例和回归工具的 Java EE 6 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:48:10.663

本应用教程使用 JPA、CDI、Bean Validation 等。也许它对你有用：

[http://www.andygibson.net/blog/news/demo-application-using-jsf-jpa-cdi-with-jetty/](http://www.andygibson.net/blog/news/demo-application-using-jsf-jpa-cdi-with-jetty/)

# asp.net-mvc-3 - Ninject 无法在 MVC 3 站点中创建控制器

> ID：10430036
> 
> 赞同：0
> 
> 时间：2012-05-03T11:02:09.250
> 
> 标签：asp.net-mvc-3, ninject

我在 MVC 3 网站中使用 Ninject DI，但有时会出现以下异常：

```
System.InvalidOperationException: An error occurred when trying to create a controller of type 'SampleMVCApp.Controllers.OrderController'. Make sure that the controller has a parameterless public constructor. ---> System.NullReferenceException: Object reference not set to an instance of an object.
       at SampleMVCApp.Controllers.CRUDController`3..ctor()
       at SampleMVCApp.Controllers.OrderController..ctor()
       at DynamicInjector4625402b6de6431a8914a00f1cecee0d(Object[] )
       at Ninject.Activation.Context.Resolve()
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at Ninject.ResolutionExtensions.TryGet[T](IEnumerable`1 iterator)
       at SampleMVCApp.MvcApplication.NinjectDependencyResolver.GetService(Type serviceType)
       at System.Web.Mvc.DefaultControllerFactory.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType)
       --- End of inner exception stack trace ---
       at System.Web.Mvc.DefaultControllerFactory.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType)
       at System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName)
       at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory)
       at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<BeginProcessRequest>b__2()
       at System.Web.Mvc.SecurityUtil.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a()
       at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust[TResult](Func`1 func)
       at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
       at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我正在使用 ELMAH 来捕获所有异常，所以这可能只是一个内部错误，不会影响请求的最终结果，但我还是想修复它。我在测试或开发时没有在网站上看到这个错误，它只出现在 ELMAH 的日志中。

据我所见，当 Ninject 尝试实例化名为 OrderController 的控制器时发生错误，该控制器继承自 CRUDController。

我的猜测是，这发生在我部署了新版本并且正在重新编译站点之后，因为大多数时候它没有问题并且站点运行良好。

我想知道这是否是 Ninject 的一个已知问题，或者问题出在我的代码中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:00:07.473

堆栈跟踪告诉它`CRUDController`抛出某种异常。它被 MVC 捕获并重新抛出一个完全不同的异常。不幸的是，内部异常的类型没有被记录，这意味着很难判断你必须寻找什么样的异常。，

# php - 读取外部网页的内容并获取特定元素

> ID：10430037
> 
> 赞同：0
> 
> 时间：2012-05-03T11:02:13.560
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我已经尝试解决这个问题一段时间了。我不仅试图获取网页的内容，`file_get_contents($url)`而且还能够提取特定数据。

我有兴趣获取其内容的网页是[Craiglist](http://www.craigslist.org/about/sites)。这只是一个例子。我想用区域和随附的网站形成一系列状态，但我似乎找不到获取页面特定元素的方法。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:05:02.533

看看[`DOMDocument`](http://www.php.net/manual/en/domdocument.loadhtml.php)PHP 中的类。

```
<?php
    $doc = new DOMDocument();
    $doc->loadHTML("<html><body>Test<br></body></html>");
    echo $doc->saveHTML();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:09:55.537

尝试使用 domdocument

```
$html = 'Assume this is html that you get';
$dom = new DOMDocument;
$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;
$tables = $dom->getElementsByTagName('table');  // Sample to get table element
$rows = $tables->item(0)->getElementsByTagName('tr'); // sample to get rows of the table element 
```

[这是描述](http://php.net/manual/en/class.domdocument.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:16:59.967

使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

获取所有链接的示例`http://www.craigslist.org/about/sites`

```
include 'simple_html_dom.php';
$url = "http://www.craigslist.org/about/sites";
$html = file_get_html ( $url );
echo "<pre>";
foreach ( $html->find ( 'a' ) as $element ) {
    $link = $element->href;
    $link = ltrim ( $link, "/" );

    if (!preg_match ( "/http/i", $link )) {
        $link = $url . $link;
    }
    echo $link . PHP_EOL;
    flush ();
} 
```

输出

```
http://www.craigslist.org/about/sites#US
http://www.craigslist.org/about/sites#CA
http://www.craigslist.org/about/sites#EU
http://www.craigslist.org/about/sites#ASIA
http://www.craigslist.org/about/sites#OCEANIA
http://www.craigslist.org/about/sites#LATAM
http://www.craigslist.org/about/sites#AF
http://www.craigslist.org/about/sites
http://auburn.craigslist.org
http://bham.craigslist.org
http://dothan.craigslist.org
http://shoals.craigslist.org
http://gadsden.craigslist.org
http://huntsville.craigslist.org
http://mobile.craigslist.org
http://montgomery.craigslist.org
http://tuscaloosa.craigslist.org
http://anchorage.craigslist.org
http://fairbanks.craigslist.org
http://kenai.craigslist.org
http://juneau.craigslist.org
http://flagstaff.craigslist.org
http://mohave.craigslist.org
http://phoenix.craigslist.org
http://prescott.craigslist.org
http://showlow.craigslist.org
http://sierravista.craigslist.org
http://tucson.craigslist.org
http://yuma.craigslist.org
http://fayar.craigslist.org
http://fortsmith.craigslist.org
http://jonesboro.craigslist.org
http://littlerock.craigslist.org
http://texarkana.craigslist.org
http://bakersfield.craigslist.org
http://chico.craigslist.org
http://fresno.craigslist.org
http://goldcountry.craigslist.org
http://hanford.craigslist.org
http://humboldt.craigslist.org
http://imperial.craigslist.org
http://inlandempire.craigslist.org
http://losangeles.craigslist.org
http://mendocino.craigslist.org
http://merced.craigslist.org
http://modesto.craigslist.org
http://monterey.craigslist.org
http://orangecounty.craigslist.org
http://palmsprings.craigslist.org
http://redding.craigslist.org
http://sacramento.craigslist.org
http://sandiego.craigslist.org
http://sfbay.craigslist.org
http://slo.craigslist.org
http://santabarbara.craigslist.org
http://santamaria.craigslist.org
http://siskiyou.craigslist.org
http://stockton.craigslist.org
http://susanville.craigslist.org
http://ventura.craigslist.org
http://visalia.craigslist.org
http://yubasutter.craigslist.org
http://boulder.craigslist.org
http://cosprings.craigslist.org
http://denver.craigslist.org
http://eastco.craigslist.org
http://fortcollins.craigslist.org
http://rockies.craigslist.org
http://pueblo.craigslist.org
http://westslope.craigslist.org
http://newlondon.craigslist.org
http://hartford.craigslist.org
http://newhaven.craigslist.org
http://nwct.craigslist.org
http://delaware.craigslist.org
http://washingtondc.craigslist.org
http://daytona.craigslist.org
http://keys.craigslist.org
http://fortlauderdale.craigslist.org
http://fortmyers.craigslist.org
http://gainesville.craigslist.org
http://cfl.craigslist.org
http://jacksonville.craigslist.org
http://lakeland.craigslist.org
http://lakecity.craigslist.org
http://ocala.craigslist.org
http://okaloosa.craigslist.org
http://orlando.craigslist.org
http://panamacity.craigslist.org
http://pensacola.craigslist.org
http://sarasota.craigslist.org
http://miami.craigslist.org
http://spacecoast.craigslist.org
http://staugustine.craigslist.org
http://tallahassee.craigslist.org
http://tampa.craigslist.org
http://treasure.craigslist.org
http://westpalmbeach.craigslist.org
http://albanyga.craigslist.org
http://athensga.craigslist.org
http://atlanta.craigslist.org
http://augusta.craigslist.org
http://brunswick.craigslist.org
http://columbusga.craigslist.org
http://macon.craigslist.org
http://nwga.craigslist.org
http://savannah.craigslist.org
http://statesboro.craigslist.org
http://valdosta.craigslist.org
http://honolulu.craigslist.org
http://boise.craigslist.org
http://eastidaho.craigslist.org
http://lewiston.craigslist.org
http://twinfalls.craigslist.org
http://bn.craigslist.org
http://chambana.craigslist.org
http://chicago.craigslist.org
http://decatur.craigslist.org
http://lasalle.craigslist.org
http://mattoon.craigslist.org
http://peoria.craigslist.org
http://rockford.craigslist.org
http://carbondale.craigslist.org
http://springfieldil.craigslist.org
http://quincy.craigslist.org
http://bloomington.craigslist.org
http://evansville.craigslist.org
http://fortwayne.craigslist.org
http://indianapolis.craigslist.org
http://kokomo.craigslist.org
http://tippecanoe.craigslist.org
http://muncie.craigslist.org
http://richmondin.craigslist.org
http://southbend.craigslist.org
http://terrehaute.craigslist.org
http://ames.craigslist.org
http://cedarrapids.craigslist.org
http://desmoines.craigslist.org
http://dubuque.craigslist.org
http://fortdodge.craigslist.org
http://iowacity.craigslist.org
http://masoncity.craigslist.org
http://quadcities.craigslist.org
http://siouxcity.craigslist.org
http://ottumwa.craigslist.org
http://waterloo.craigslist.org
http://lawrence.craigslist.org
http://ksu.craigslist.org
http://nwks.craigslist.org
http://salina.craigslist.org
http://seks.craigslist.org
http://swks.craigslist.org
http://topeka.craigslist.org
http://wichita.craigslist.org
http://bgky.craigslist.org
http://eastky.craigslist.org
http://lexington.craigslist.org
http://louisville.craigslist.org
http://owensboro.craigslist.org
http://westky.craigslist.org
http://batonrouge.craigslist.org
http://cenla.craigslist.org
http://houma.craigslist.org
http://lafayette.craigslist.org
http://lakecharles.craigslist.org
http://monroe.craigslist.org
http://neworleans.craigslist.org
http://shreveport.craigslist.org
http://maine.craigslist.org
http://annapolis.craigslist.org
http://baltimore.craigslist.org
http://easternshore.craigslist.org
http://frederick.craigslist.org
http://smd.craigslist.org
http://westmd.craigslist.org
http://boston.craigslist.org
http://capecod.craigslist.org
http://southcoast.craigslist.org
http://westernmass.craigslist.org
http://worcester.craigslist.org
http://annarbor.craigslist.org
http://battlecreek.craigslist.org
http://centralmich.craigslist.org
http://detroit.craigslist.org
http://flint.craigslist.org
http://grandrapids.craigslist.org
http://holland.craigslist.org
http://jxn.craigslist.org
http://kalamazoo.craigslist.org
http://lansing.craigslist.org
http://monroemi.craigslist.org
http://muskegon.craigslist.org
http://nmi.craigslist.org
http://porthuron.craigslist.org
http://saginaw.craigslist.org
http://swmi.craigslist.org
http://thumb.craigslist.org
http://up.craigslist.org
http://bemidji.craigslist.org
http://brainerd.craigslist.org
http://duluth.craigslist.org
http://mankato.craigslist.org
http://minneapolis.craigslist.org
http://rmn.craigslist.org
http://marshall.craigslist.org
http://stcloud.craigslist.org
http://gulfport.craigslist.org
http://hattiesburg.craigslist.org
http://jackson.craigslist.org
http://meridian.craigslist.org
http://northmiss.craigslist.org
http://natchez.craigslist.org
http://columbiamo.craigslist.org
http://joplin.craigslist.org
http://kansascity.craigslist.org
http://kirksville.craigslist.org
http://loz.craigslist.org
http://semo.craigslist.org
http://springfield.craigslist.org
http://stjoseph.craigslist.org
http://stlouis.craigslist.org
http://billings.craigslist.org
http://bozeman.craigslist.org
http://butte.craigslist.org
http://greatfalls.craigslist.org
http://helena.craigslist.org
http://kalispell.craigslist.org
http://missoula.craigslist.org
http://montana.craigslist.org
http://grandisland.craigslist.org
http://lincoln.craigslist.org
http://northplatte.craigslist.org
http://omaha.craigslist.org
http://scottsbluff.craigslist.org
http://elko.craigslist.org
http://lasvegas.craigslist.org
http://reno.craigslist.org
http://nh.craigslist.org
http://cnj.craigslist.org
http://jerseyshore.craigslist.org
http://newjersey.craigslist.org
http://southjersey.craigslist.org
http://albuquerque.craigslist.org
http://clovis.craigslist.org
http://farmington.craigslist.org
http://lascruces.craigslist.org
http://roswell.craigslist.org
http://santafe.craigslist.org
http://albany.craigslist.org
http://binghamton.craigslist.org
http://buffalo.craigslist.org
http://catskills.craigslist.org
http://chautauqua.craigslist.org
http://elmira.craigslist.org
http://fingerlakes.craigslist.org
http://glensfalls.craigslist.org
http://hudsonvalley.craigslist.org
http://ithaca.craigslist.org
http://longisland.craigslist.org
http://newyork.craigslist.org
http://oneonta.craigslist.org
http://plattsburgh.craigslist.org
http://potsdam.craigslist.org
http://rochester.craigslist.org
http://syracuse.craigslist.org
http://twintiers.craigslist.org
http://utica.craigslist.org
http://watertown.craigslist.org
http://asheville.craigslist.org
http://boone.craigslist.org
http://charlotte.craigslist.org
http://eastnc.craigslist.org
http://fayetteville.craigslist.org
http://greensboro.craigslist.org
http://hickory.craigslist.org
http://onslow.craigslist.org
http://outerbanks.craigslist.org
http://raleigh.craigslist.org
http://wilmington.craigslist.org
http://winstonsalem.craigslist.org
http://bismarck.craigslist.org
http://fargo.craigslist.org
http://grandforks.craigslist.org
http://nd.craigslist.org
http://akroncanton.craigslist.org
http://ashtabula.craigslist.org
http://athensohio.craigslist.org
http://chillicothe.craigslist.org
http://cincinnati.craigslist.org
http://cleveland.craigslist.org
http://columbus.craigslist.org
http://dayton.craigslist.org
http://limaohio.craigslist.org
http://mansfield.craigslist.org
http://sandusky.craigslist.org
http://toledo.craigslist.org
http://tuscarawas.craigslist.org
http://youngstown.craigslist.org
http://zanesville.craigslist.org
http://lawton.craigslist.org
http://enid.craigslist.org
http://oklahomacity.craigslist.org
http://stillwater.craigslist.org
http://tulsa.craigslist.org
http://bend.craigslist.org
http://corvallis.craigslist.org
http://eastoregon.craigslist.org
http://eugene.craigslist.org
http://klamath.craigslist.org
http://medford.craigslist.org
http://oregoncoast.craigslist.org
http://portland.craigslist.org
http://roseburg.craigslist.org
http://salem.craigslist.org
http://altoona.craigslist.org
http://chambersburg.craigslist.org
http://erie.craigslist.org
http://harrisburg.craigslist.org
http://lancaster.craigslist.org
http://allentown.craigslist.org
http://meadville.craigslist.org
http://philadelphia.craigslist.org
http://pittsburgh.craigslist.org
http://poconos.craigslist.org
http://reading.craigslist.org
http://scranton.craigslist.org
http://pennstate.craigslist.org
http://williamsport.craigslist.org
http://york.craigslist.org
http://providence.craigslist.org
http://charleston.craigslist.org
http://columbia.craigslist.org
http://florencesc.craigslist.org
http://greenville.craigslist.org
http://hiltonhead.craigslist.org
http://myrtlebeach.craigslist.org
http://nesd.craigslist.org
http://csd.craigslist.org
http://rapidcity.craigslist.org
http://siouxfalls.craigslist.org
http://sd.craigslist.org
http://chattanooga.craigslist.org
http://clarksville.craigslist.org
http://cookeville.craigslist.org
http://jacksontn.craigslist.org
http://knoxville.craigslist.org
http://memphis.craigslist.org
http://nashville.craigslist.org
http://tricities.craigslist.org
http://abilene.craigslist.org
http://amarillo.craigslist.org
http://austin.craigslist.org
http://beaumont.craigslist.org
http://brownsville.craigslist.org
http://collegestation.craigslist.org
http://corpuschristi.craigslist.org
http://dallas.craigslist.org
http://nacogdoches.craigslist.org
http://delrio.craigslist.org
http://elpaso.craigslist.org
http://galveston.craigslist.org
http://houston.craigslist.org
http://killeen.craigslist.org
http://laredo.craigslist.org
http://lubbock.craigslist.org
http://mcallen.craigslist.org
http://odessa.craigslist.org
http://sanangelo.craigslist.org
http://sanantonio.craigslist.org
http://sanmarcos.craigslist.org
http://bigbend.craigslist.org
http://texoma.craigslist.org
http://easttexas.craigslist.org
http://victoriatx.craigslist.org
http://waco.craigslist.org
http://wichitafalls.craigslist.org
http://logan.craigslist.org
http://ogden.craigslist.org
http://provo.craigslist.org
http://saltlakecity.craigslist.org
http://stgeorge.craigslist.org
http://burlington.craigslist.org
http://charlottesville.craigslist.org
http://danville.craigslist.org
http://fredericksburg.craigslist.org
http://norfolk.craigslist.org
http://harrisonburg.craigslist.org
http://lynchburg.craigslist.org
http://blacksburg.craigslist.org
http://richmond.craigslist.org
http://roanoke.craigslist.org
http://swva.craigslist.org
http://winchester.craigslist.org
http://bellingham.craigslist.org
http://kpr.craigslist.org
http://moseslake.craigslist.org
http://olympic.craigslist.org
http://pullman.craigslist.org
http://seattle.craigslist.org
http://skagit.craigslist.org
http://spokane.craigslist.org
http://wenatchee.craigslist.org
http://yakima.craigslist.org
http://charlestonwv.craigslist.org
http://martinsburg.craigslist.org
http://huntington.craigslist.org
http://morgantown.craigslist.org
http://wheeling.craigslist.org
http://parkersburg.craigslist.org
http://swv.craigslist.org
http://wv.craigslist.org
http://appleton.craigslist.org
http://eauclaire.craigslist.org
http://greenbay.craigslist.org
http://janesville.craigslist.org
http://racine.craigslist.org
http://lacrosse.craigslist.org
http://madison.craigslist.org
http://milwaukee.craigslist.org
http://northernwi.craigslist.org
http://sheboygan.craigslist.org
http://wausau.craigslist.org
http://wyoming.craigslist.org
http://micronesia.craigslist.org
http://puertorico.craigslist.org
http://virgin.craigslist.org
http://www.craigslist.org/about/sites
http://calgary.craigslist.ca
http://edmonton.craigslist.ca
http://ftmcmurray.craigslist.ca
http://lethbridge.craigslist.ca
http://hat.craigslist.ca
http://peace.craigslist.ca
http://reddeer.craigslist.ca
http://cariboo.craigslist.ca
http://comoxvalley.craigslist.ca
http://abbotsford.craigslist.ca
http://kamloops.craigslist.ca
http://kelowna.craigslist.ca
http://cranbrook.craigslist.ca
http://nanaimo.craigslist.ca
http://princegeorge.craigslist.ca
http://skeena.craigslist.ca
http://sunshine.craigslist.ca
http://vancouver.craigslist.ca
http://victoria.craigslist.ca
http://whistler.craigslist.ca
http://winnipeg.craigslist.ca
http://newbrunswick.craigslist.ca
http://newfoundland.craigslist.ca
http://territories.craigslist.ca
http://yellowknife.craigslist.ca
http://halifax.craigslist.ca
http://barrie.craigslist.ca
http://belleville.craigslist.ca
http://brantford.craigslist.ca
http://chatham.craigslist.ca
http://cornwall.craigslist.ca
http://guelph.craigslist.ca
http://hamilton.craigslist.ca
http://kingston.craigslist.ca
http://kitchener.craigslist.ca
http://londonon.craigslist.ca
http://niagara.craigslist.ca
http://ottawa.craigslist.ca
http://owensound.craigslist.ca
http://peterborough.craigslist.ca
http://sarnia.craigslist.ca
http://soo.craigslist.ca
http://sudbury.craigslist.ca
http://thunderbay.craigslist.ca
http://toronto.craigslist.ca
http://windsor.craigslist.ca
http://pei.craigslist.ca
http://montreal.craigslist.ca
http://quebec.craigslist.ca
http://saguenay.craigslist.ca
http://sherbrooke.craigslist.ca
http://troisrivieres.craigslist.ca
http://regina.craigslist.ca
http://saskatoon.craigslist.ca
http://whitehorse.craigslist.ca
http://www.craigslist.org/about/sites
http://vienna.craigslist.at
http://brussels.craigslist.org
http://bulgaria.craigslist.org
http://zagreb.craigslist.org
http://prague.craigslist.cz
http://copenhagen.craigslist.org
http://helsinki.craigslist.fi
http://bordeaux.craigslist.org
http://rennes.craigslist.org
http://grenoble.craigslist.org
http://lille.craigslist.org
http://loire.craigslist.org
http://lyon.craigslist.org
http://marseilles.craigslist.org
http://montpellier.craigslist.org
http://cotedazur.craigslist.org
http://rouen.craigslist.org
http://paris.craigslist.org
http://strasbourg.craigslist.org
http://toulouse.craigslist.org
http://berlin.craigslist.de
http://bremen.craigslist.de
http://cologne.craigslist.de
http://dresden.craigslist.de
http://dusseldorf.craigslist.de
http://essen.craigslist.de
http://frankfurt.craigslist.de
http://hamburg.craigslist.de
http://hannover.craigslist.de
http://heidelberg.craigslist.de
http://kaiserslautern.craigslist.de
http://leipzig.craigslist.de
http://munich.craigslist.de
http://nuremberg.craigslist.de
http://stuttgart.craigslist.de
http://athens.craigslist.gr
http://budapest.craigslist.org
http://reykjavik.craigslist.org
http://dublin.craigslist.org
http://bologna.craigslist.it
http://florence.craigslist.it
http://genoa.craigslist.it
http://milan.craigslist.it
http://naples.craigslist.it
http://perugia.craigslist.it
http://rome.craigslist.it
http://sardinia.craigslist.it
http://sicily.craigslist.it
http://torino.craigslist.it
http://venice.craigslist.it
http://luxembourg.craigslist.org
http://amsterdam.craigslist.org
http://oslo.craigslist.org
http://warsaw.craigslist.pl
http://faro.craigslist.pt
http://lisbon.craigslist.pt
http://porto.craigslist.pt
http://bucharest.craigslist.org
http://moscow.craigslist.org
http://stpetersburg.craigslist.org
http://alicante.craigslist.es
http://baleares.craigslist.es
http://barcelona.craigslist.es
http://bilbao.craigslist.es
http://cadiz.craigslist.es
http://canarias.craigslist.es
http://granada.craigslist.es
http://madrid.craigslist.es
http://malaga.craigslist.es
http://sevilla.craigslist.es
http://valencia.craigslist.es
http://stockholm.craigslist.se
http://basel.craigslist.ch
http://bern.craigslist.ch
http://geneva.craigslist.ch
http://lausanne.craigslist.ch
http://zurich.craigslist.ch
http://istanbul.craigslist.com.tr
http://ukraine.craigslist.org
http://aberdeen.craigslist.co.uk
http://bath.craigslist.co.uk
http://belfast.craigslist.co.uk
http://birmingham.craigslist.co.uk
http://brighton.craigslist.co.uk
http://bristol.craigslist.co.uk
http://cambridge.craigslist.co.uk
http://cardiff.craigslist.co.uk
http://coventry.craigslist.co.uk
http://derby.craigslist.co.uk
http://devon.craigslist.co.uk
http://dundee.craigslist.co.uk
http://norwich.craigslist.co.uk
http://eastmids.craigslist.co.uk
http://edinburgh.craigslist.co.uk
http://essex.craigslist.co.uk
http://glasgow.craigslist.co.uk
http://hampshire.craigslist.co.uk
http://kent.craigslist.co.uk
http://leeds.craigslist.co.uk
http://liverpool.craigslist.co.uk
http://london.craigslist.co.uk
http://manchester.craigslist.co.uk
http://newcastle.craigslist.co.uk
http://nottingham.craigslist.co.uk
http://oxford.craigslist.co.uk
http://sheffield.craigslist.co.uk
http://www.craigslist.org/about/sites
http://micronesia.craigslist.org
http://bangladesh.craigslist.org
http://beijing.craigslist.com.cn
http://chengdu.craigslist.com.cn
http://chongqing.craigslist.com.cn
http://dalian.craigslist.com.cn
http://guangzhou.craigslist.com.cn
http://hangzhou.craigslist.com.cn
http://nanjing.craigslist.com.cn
http://shanghai.craigslist.com.cn
http://shenyang.craigslist.com.cn
http://shenzhen.craigslist.com.cn
http://wuhan.craigslist.com.cn
http://xian.craigslist.com.cn
http://hongkong.craigslist.hk
http://ahmedabad.craigslist.co.in
http://bangalore.craigslist.co.in
http://bhubaneswar.craigslist.co.in
http://chandigarh.craigslist.co.in
http://chennai.craigslist.co.in
http://delhi.craigslist.co.in
http://goa.craigslist.co.in
http://hyderabad.craigslist.co.in
http://indore.craigslist.co.in
http://jaipur.craigslist.co.in
http://kerala.craigslist.co.in
http://kolkata.craigslist.co.in
http://lucknow.craigslist.co.in
http://mumbai.craigslist.co.in
http://pune.craigslist.co.in
http://surat.craigslist.co.in
http://jakarta.craigslist.org
http://tehran.craigslist.org
http://baghdad.craigslist.org
http://haifa.craigslist.org
http://jerusalem.craigslist.org
http://telaviv.craigslist.org
http://ramallah.craigslist.org
http://fukuoka.craigslist.jp
http://hiroshima.craigslist.jp
http://nagoya.craigslist.jp
http://okinawa.craigslist.jp
http://osaka.craigslist.jp
http://sapporo.craigslist.jp
http://sendai.craigslist.jp
http://tokyo.craigslist.jp
http://seoul.craigslist.co.kr
http://kuwait.craigslist.org
http://beirut.craigslist.org
http://malaysia.craigslist.org
http://pakistan.craigslist.org
http://bacolod.craigslist.com.ph
http://naga.craigslist.com.ph
http://cdo.craigslist.com.ph
http://cebu.craigslist.com.ph
http://davaocity.craigslist.com.ph
http://iloilo.craigslist.com.ph
http://manila.craigslist.com.ph
http://pampanga.craigslist.com.ph
http://zamboanga.craigslist.com.ph
http://singapore.craigslist.com.sg
http://taipei.craigslist.com.tw
http://bangkok.craigslist.co.th
http://dubai.craigslist.org
http://vietnam.craigslist.org
http://www.craigslist.org/about/sites
http://adelaide.craigslist.com.au
http://brisbane.craigslist.com.au
http://cairns.craigslist.com.au
http://canberra.craigslist.com.au
http://darwin.craigslist.com.au
http://goldcoast.craigslist.com.au
http://melbourne.craigslist.com.au
http://ntl.craigslist.com.au
http://perth.craigslist.com.au
http://sydney.craigslist.com.au
http://hobart.craigslist.com.au
http://wollongong.craigslist.com.au
http://auckland.craigslist.org
http://christchurch.craigslist.org
http://dunedin.craigslist.co.nz
http://wellington.craigslist.org
http://www.craigslist.org/about/sites
http://caribbean.craigslist.org
http://buenosaires.craigslist.org
http://lapaz.craigslist.org
http://belohorizonte.craigslist.org
http://brasilia.craigslist.org
http://curitiba.craigslist.org
http://fortaleza.craigslist.org
http://portoalegre.craigslist.org
http://recife.craigslist.org
http://rio.craigslist.org
http://salvador.craigslist.org
http://saopaulo.craigslist.org
http://santiago.craigslist.org
http://colombia.craigslist.org
http://costarica.craigslist.org
http://santodomingo.craigslist.org
http://quito.craigslist.org
http://elsalvador.craigslist.org
http://guatemala.craigslist.org
http://acapulco.craigslist.com.mx
http://bajasur.craigslist.com.mx
http://chihuahua.craigslist.com.mx
http://juarez.craigslist.com.mx
http://guadalajara.craigslist.com.mx
http://guanajuato.craigslist.com.mx
http://hermosillo.craigslist.com.mx
http://mazatlan.craigslist.com.mx
http://mexicocity.craigslist.com.mx
http://monterrey.craigslist.com.mx
http://oaxaca.craigslist.com.mx
http://puebla.craigslist.com.mx
http://pv.craigslist.com.mx
http://tijuana.craigslist.com.mx
http://veracruz.craigslist.com.mx
http://yucatan.craigslist.com.mx
http://managua.craigslist.org
http://panama.craigslist.org
http://lima.craigslist.org
http://puertorico.craigslist.org
http://montevideo.craigslist.org
http://caracas.craigslist.org
http://virgin.craigslist.org
http://www.craigslist.org/about/sites
http://cairo.craigslist.org
http://addisababa.craigslist.org
http://accra.craigslist.org
http://kenya.craigslist.org
http://casablanca.craigslist.org
http://capetown.craigslist.co.za
http://durban.craigslist.co.za
http://johannesburg.craigslist.co.za
http://pretoria.craigslist.co.za
http://tunis.craigslist.org
http://www.craigslist.org/about/
http://blog.craigslist.com/
http://www.craigslist.org/about/help/system-status.html
http://www.craigslist.org/about/help/
http://www.craigslist.org/about/terms.of.use
http://www.craigslist.org/about/privacy_policy
http://sfbay.craigslist.org/forums/?forumID=1 
```

# c++ - 注册表设计

> ID：10430038
> 
> 赞同：2
> 
> 时间：2012-05-03T11:02:15.213
> 
> 标签：c++

我需要使用 C++ 设计一个应用程序注册表 S/W 组件。基本上，这需要支持键/值的添加和删除。需要支持动态更新（例如，安装新应用程序时）。是否有与给定问题密切匹配的设计模式？虽然我已经为这个组件需要支持的 API 制定了一个粗略的草图，但看看其他（也许更好的）设计方式会很有帮助。如果有一些与注册表设计相关的典型问题（可能是我可能忽略的一些线程问题），我想确保我已经规避了这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:09:16.363

> 是否有与给定问题密切匹配的设计模式？

您可能会看到不止一个：想到整个注册表、[迭代器等的](http://en.wikipedia.org/wiki/Iterator_pattern)[代理。](http://en.wikipedia.org/wiki/Proxy_pattern)

> 如果存在与注册表设计相关的一些典型问题

*   您可能需要事务语义。也回滚！
*   您是否需要不时保存快照？然后您将需要一个归档模块。
*   同步：需要注意对注册表的多次写入。

# java - Java中“char”和“String”的区别

> ID：10430043
> 
> 赞同：58
> 
> 时间：2012-05-03T11:02:54.793
> 
> 标签：java, string, char

我正在阅读一本我正在努力学习的 Java 书籍，我有一个问题。我不明白变量类型`char`和`String`. 例如，内存中的字节和它们拥有的数字区域之间存在`int`差异`short`。

`char`但是和有什么区别`String`？除了`char`使用 (') 和 "String" (")。

PS：这是我的第一个“真正的”编程语言。（在学校，我为了编程课学习了一种假语言。）

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-05-03T11:05:15.393

`char`是一个字符。`String`是零个或多个字符。

`char`是原始类型。`String`是一类。

```
char c = 'a';
String s = "Hi!"; 
```

注意 的单引号`char`和 的双引号`String`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-03T11:05:10.397

`char`表示单个字符。在java中它是UTF-16字符。 `String`可以被认为是一个字符数组。

所以，想象一下“Android”字符串。它由`'A', 'n', 'd', 'r', 'o', 'i'`和再次`'d'`字符组成。

`char`是java中的原始类型，`String`是一个类，它封装了数组`chars`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-03T11:04:37.883

通俗地说，`char`是一个字母，而`String`一个字母（或一个词）的集合。`'`和的区别`"`很重要，因为`'Test'`在 Java 中是非法的。

`char`是原始类型，`String`是类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:06:31.957

`char`是原始类型，它可以容纳单个字符。

`String`而是一个引用类型，因此是一个成熟的对象。它可以容纳任意数量的字符（在内部，`String`对象将它们保存在一个`char`数组中）。

Java 中的原始类型在速度和内存占用方面具有优势。但它们不是真实的对象，因此使用它们可能会丢失一些可能性。它们不能用作通用类型参数，它们不能有方法或字段，等等。

但是，每个 Java 原始类型都有一个对应的成熟对象，它们之间的转换是由编译器自动完成的（这称为自动装箱）。

例如，您可以这样做：

```
int i=12;
Integer l=i; 
```

编译器负责将 转换`int`为`Integer`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-16T11:06:01.127

char 只有一个字符（字母、数字、...）

```
char example = 'x'; 
```

字符串可以有零个字符或任意多个

```
String example = "Here you can have anything"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T11:05:02.377

char 包含单个字符，而 string 包含许多字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-21T14:03:13.990

Char 是一个单一的字母表，而 String 是一个字符序列。Char 是原始数据类型，而 String 是一个类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-24T19:39:23.787

char 是原始类型，它可以容纳单个字符。String 是一个引用类型，因此是一个成熟的对象。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-05-03T11:07:21.317

好吧，`char`（或其包装类`Character`）表示单个字符，即您不能编写`'ab'`，而`String`文本是由多个字符组成的，您可以将字符串视为字符数组（实际上`String`该类有一个成员`char[] value`） .

您可以使用普通`char`数组，但这很乏味，因此`String`该类提供了一种处理文本的便捷方式。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-09-07T16:28:50.280

一个字符只包含一个字母，而一个字符串包含一个完整的单词或多个单词，最后会自动插入一个转义序列，以告诉编译器字符串已在此处结束。(0)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-12-20T13:36:54.947

char 由单个字符组成，应用单引号指定。它可以包含字母、数字甚至特殊字符。下面是几个例子：

```
char a = '4';
char b = '$';
char c = 'B'; 
```

字符串定义了可以使用的行，用双引号指定。下面是几个例子：

```
String a = "Hello World";
String b = "1234";
String c = "%%"; 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-10-09T10:24:20.533

就 ASCII 值而言，您可以说 char 是范围从 0-255 的单个 ASCII 值。而 String 是 ASCII 值的集合。尝试此代码以更好地学习。

```
 char c='a';
        String s="a b c d e f g hijkl";
        int i=c;
        System.out.println(i);
        for(int count=0;count<s.length();count++){
            int temp=s.charAt(count);
            System.out.print(temp+" ");
        } 
```

输出将是：

97

97 32 98 32 99 32 100 32 101 32 102 32 103 32 104 105 106 107 108

因为 97 是小“a”的 ASCII 值。32 是空格的 ASCII 值。希望这有助于深入理解这个概念。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2017-09-11T06:55:11.367

在字符串中我们可以存储多个字符。例如 `char ch='a';`

```
String s="a"; 
```

字符串 s1="aaaa";

* * *

## 回答 #14

> 赞同：-5
> 
> 时间：2013-04-26T06:46:25.587

字符是您可以输入的任何内容，例如字母、数字、标点符号和空格。字符串出现在变量中。即它们是 perls 中的文本项。一个字符由 16 位组成。而字符串的长度是无限的。

# objective-c - 当键盘隐藏 UiTextField 时向上滚动视图

> ID：10430046
> 
> 赞同：1
> 
> 时间：2012-05-03T11:03:00.817
> 
> 标签：objective-c, ipad

我正在开发 iPad 应用程序。在一个视图中，我们有 10 个文本字段。当我在 iPad 中查看它们时，底部的文本字段隐藏在键盘后面。

我希望文本字段在隐藏在键盘后面时向上滚动。

非常感谢任何帮助

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:14:20.477

使用 UIScrollView 并将您的 UI 控件放在滚动视图中。在 viewDidLoad 中保留滚动视图的内容偏移量。（在下面的代码中，scrollOffset 是 CGPoint 类型。

```
scrollOffset = scrollView.contentOffset; 
```

在 UITextField 委托中为滚动视图设置一个新的内容偏移量。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {

    CGPoint scrollPoint;
    CGRect inputFieldBounds = [textField bounds];
    inputFieldBounds = [textField convertRect:inputFieldBounds toView:scrollView];
    scrollPoint = inputFieldBounds.origin;
    scrollPoint.x = 0;
    scrollPoint.y -= 90; // you can customize this value
    [scrollView setContentOffset:scrollPoint animated:YES];            
} 
```

在 textfiedlshouldreturn 委托中，重置滚动视图的内容偏移量。

```
- (BOOL) textFieldShouldReturn:(UITextField *)textField { 
    [scrollView  setContentOffset:scrollOffset animated:YES]; 
    [textField resignFirstResponder]; 
    return YES; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:13:38.823

您可以使用键盘的通知。显示键盘时您会收到 UIKeyboardWillShowNotification，然后您可以根据需要移动或滚动您的项目。

最好的问候伯恩哈德

# c - c 中存储的常量 volatile 变量在哪里？

> ID：10430047
> 
> 赞同：2
> 
> 时间：2012-05-03T11:03:12.487
> 
> 标签：c, microcontroller

哪个部分是存储在 c. 中的常量 volatile 变量？在微控制器中，我们应该将此类变量放入 RAM。正确的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T09:02:29.013

1.  局部变量和函数框架 - 堆栈

2.  全局变量和静态变量（如果未初始化） - .bss 块以符号开头

3.  全局变量和静态变量（如果已初始化） - 数据段

4.  环境变量和参数 - 在堆栈顶部

5.  动态数据分配 - 堆

6.  常量-ROM

7.  易挥发 - 无储存

8.  寄存器 - cpu 寄存器

9.  const volatile - 与 const storage 在同一个地方

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T11:12:14.300

`Volatile`与存储变量的位置有关。**它只是告诉编译器每次都**从内存中读取变量，以避免编译器可能对该变量执行任何优化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-03T11:31:08.927

`const volatile`变量意味着您的 C 程序不能合法地更改它，但其他东西可以。将此变量放在 RAM 中是合乎逻辑的，但是如果您告诉它（通过链接描述文件或类似选项）将其放在 ROM 中，编译器不会抱怨。将这个变量定位在某些内存映射设备所在的位置也可能很有用，例如只读定时器计数器寄存器或 ADC 输出寄存器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T11:50:12.710

`const`微控制器应用程序的变量很可能存储在闪存**ROM**中。它们存储在 RAM 中的唯一时间是在运行时评估它们，例如函数的 const 参数。或者当您从 RAM 执行一些调试构建时。

`volatile`如其他答案所述，与变量的存储位置无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T13:26:40.663

好吧，作为一个常量需要 RAM 地址，它可以存储在 ROM 中，但很可能它会（通过扩展）存储在（只读）汇编代码中，就像 for `a += 2`. 这是一个最快的速度`volatile`。

# sorting - 排序链表：随机还是接近排序？

> ID：10430052
> 
> 赞同：0
> 
> 时间：2012-05-03T11:03:28.727
> 
> 标签：sorting, linked-list

我有一个链表，我想检查它是几乎排序的还是随机的？任何人都可以建议如何做到这一点？

现在我要做的是运行到列表的一半并比较相邻元素以检查给定列表是否接近排序或其他。但困难在于这种方法不能完全证明，我想要一些具体的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:37:58.093

如果您想涉及数据的幅度，您可以执行以下操作（Python3）：

```
import random    
l = [random.random() for x in range(100)]
s = 0
for i,x in enumerate(l[0:50]):
    s += l[i+1] - x
print(s) 
```

如果您只想查看排序了多少个值，请将`s+=`行替换为

```
 s += 1 if l[i+1] > x else 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:15:15.893

例如，如果您有 100 个项目，则比例将超出 100。（列表排序的分数。）如果您对所有列表进行排序，则得分为 100。如果列表向后排序，则你的分数是 0。您将检查每个相邻的并决定这对是否已排序（第 0 和第 1、第 1 和第 2、第 2 和第 3 等等）。因此，您将有一个介于 0 和 100 之间的比例（或您的案例的链表大小）。关于“排序规模”有很多启发式方法，但这可能是其中之一。

# android - Android HttpURLConnection 与 RAILS Web 服务上的 HTTP 基本授权

> ID：10430056
> 
> 赞同：2
> 
> 时间：2012-05-03T11:03:40.280
> 
> 标签：android, ruby-on-rails, ruby, restkit, httpurlconnection

我正在尝试使用 HttpURLConnection 已经有一段时间了，我尝试了在这里和其他地方发布的几个解决方案，但似乎没有任何效果。

我有以下架构：

1.  Ruby on Rails Web 服务（带有 JSON 的 Rest 接口）
2.  带有 RestKit 的 iPhone 客户端
3.  带有 HttpURLConnection 的 Android 客户端

iPhone 客户端就像一个魅力。它使用 RestKit 连接到 Web 服务。

现在，Android 客户端完全不同了。我总是从服务器收到 401 Unauthorized 消息（这会导致本地 FileNotFoundException）。

奇怪的是，iPhone 客户端得到了同样的错误，但是 RestKit 以某种方式通过再次发送相同的请求来管理它。我当然试过了，但我只是两次得到同样的错误。

在 Rails 日志输出中，它看起来像这样：

```
Started POST "/api/v1/login" for 127.0.0.1 at 2012-05-03 12:44:56 +0200
Processing by Api::V1::ApiController#session_login as JSON
  Parameters: {"device"=>{"model"=>"Simulator", "system"=>"Android", "version"=>"Hugo", "name"=>"Android Simulator"}, "email"=>"florian.letz@simpliflow.com", "api"=>{"device"=>{"model"=>"Simulator", "system"=>"Android", "version"=>"Hugo", "name"=>"Android Simulator"}, "email"=>"florian.letz@simpliflow.com", "action"=>"session_login", "controller"=>"api/v1/api"}}
Filter chain halted as :require_login_from_http_basic rendered or redirected
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms) 
```

当 iPhone 客户端连接时会出现完全相同的消息，但随后突然出现一个神奇的第二个请求并通过。

在 Android 客户端上，我执行以下操作：

```
HttpURLConnection con = (HttpURLConnection) url.openConnection();
con.setRequestMethod(HTTP_POST);
con.setRequestProperty("Content-Type", "application/json");
con.setRequestProperty("Accept", "application/json");
con.setRequestProperty("Accept-Encoding", "gzip, deflate");

String userpassword = email + ":" + password;
con.setRequestProperty("Authorization", "Basic " + new String(Base64.encodeBase64(userpassword.getBytes())));

String body = jsonLogin.toString();
byte[] body_bytes = body.getBytes();

con.setRequestProperty("Content-Length", "" + Integer.toString(body_bytes.length));
con.setRequestProperty("Content-Language", "en-US");  

con.setInstanceFollowRedirects(false);
con.setUseCaches (false);
con.setDoInput(true);
con.setDoOutput(true);

DataOutputStream wr = new DataOutputStream (con.getOutputStream ());
wr.write(body_bytes);
wr.flush ();
wr.close ();

InputStream is = con.getInputStream(); 
```

最后一行发生异常。

我已经阅读了一些关于重定向的内容，但是在服务器上没有实现重定向，我在客户端也没有收到重定向。我刚收到 401 Unauthorized。Web 服务和 iphone 客户端中的代码表明了一个非常简单的工作流程。只需发送数据并接收答案。当 iPhone 连接时，我不知道 SECOND 登录呼叫来自哪里。

这里有人知道问题可能是什么吗？

非常感谢！

编辑#1：我已经确定了“神奇”的第二个请求。RestKit 日志显示以下内容：

```
Asked if canAuthenticateAgainstProtectionSpace: with authenticationMethod = NSURLAuthenticationMethodDefault 
```

然后这会导致第二个请求带有很多我无法理解的标头。

那么您知道在 Android 中实现此功能的方法吗？

# php - 如何存储 $_REQUEST 中的参数以供以后使用

> ID：10430062
> 
> 赞同：1
> 
> 时间：2012-05-03T11:04:10.700
> 
> 标签：php, search, parameters, request

我有一个带有表单的 html 页面。在表单中，我有一个搜索功能和一个删除功能，可以在每个结果行中使用，方式如下：

```
..<td><img src="delete.gif" style="cursor: pointer" onClick="javascript:delete();"></td>..

    <input type="submit"   value="search" onClick="javascript:search();"> 
```

在一个 。我有两个函数通过 jquery 的 ajax 函数将参数传递给 php 文件。

让我们转到 php 文件：

搜索功能没有问题：我通过 $_REQUEST 获取参数并执行选择查询。

通过单击表单中的 delete.gif，我进入了删除功能。该查询会在我需要调用搜索函数之后立即删除选定的行，这样我就可以在没有删除行的情况下显示结果。

麻烦来了：这两个函数都使用 $_REQUEST 来构建查询，因此在删除后调用搜索函数时，我将删除参数存储在 $_REQUEST 中。

如何在第一次搜索中恢复我在 $_REQUEST 中的搜索参数，以便在删除后再次进行搜索？

下面是php文件中delete函数的一瞥：

```
function deleteResult($_REQUEST['param1'],$_REQUEST['param2'], $_REQUEST['param3'])
{  
    $strSqlDelete = "DELETE FROM …"; // query working in database
    //here the connecting to the database code
        $result = search($_REQUEST['param1'],$_REQUEST['param2'], $_REQUEST['param3']);
        echo utf8_encode($result);
        exit();
} 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:10:33.453

`$_REQUEST`使用superglobal不太安全。使用`$_POST`或`$_GET`取决于您的方法。要存储一些东西以供以后使用，请使用`$_SESSION`suberglobal 数组。

```
 session_start(); // In the beginning of your script

...

    $_SESSION['param1'] = $_REQUEST['param1']; 
```

然后，`$_SESSION['param1']`即使在页面重新加载后，您也可以在站点内的任何其他地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:09:50.680

将其存储在局部变量中，或者您可以将它们存储到 cookie 中。这样您就可以根据需要多次使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:15:35.750

你也可以通过javascript做到这一点

它更喜欢通过删除它而不是再次调用服务器端来再次呈现结果来删除它

现在您将不需要的命中保存到服务器端

**例如**

```
// in JS
   function delete(this){
      $.ajax({}); // call ajax to delete from server side (php)<br>
      delete this row (tr);<br>
   } 
```

# javascript - JavaScript 可以通过单击按钮而不是使用 mailto: 或表单操作来发送电子邮件吗？

> ID：10430063
> 
> 赞同：0
> 
> 时间：2012-05-03T11:04:10.913
> 
> 标签：javascript, email, button

我需要从服务器端脚本发送电子邮件而不加载新页面（表单操作会这样做）。我已经尝试过`XMLHttpRequest`并在某处找到了一些代码：

```
UniAjax.request({
    uri: 'sendMail.php',
    method: 'post',
    arguments: {
        bodysHTML: document.body.innerHTML
    }
}); 
```

但他们都没有工作。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:28:25.057

I do not know the action of form you are using is in same page or other page.php.

In both the case after sending mail i.e after mail function if the mail has been sent properly you can specify header to redirect the page.

```
$sentmail=mail($to, $subject, $message, $header);

if($sentmail)
{
header('Location: http://www.example.com/');
} 
```

If u don't want the page to load only when u submit form, have a look at - [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

# python - 保存在数据库中时出现python日期时间问题

> ID：10430065
> 
> 赞同：1
> 
> 时间：2012-05-03T11:04:11.717
> 
> 标签：python, mysql, database, django, datetime

在下面的代码中，我试图将 2 种日期格式转换为通用日期格式，以便可以将其存储在我的数据库中。

```
import datetime
Date1 = '2012-04-24T12:58:52Z'

Date2 = 'Tue, 24 Apr 2012 12:56:21 -0700'

date1 = Date1.replace("T"," ").replace("Z","")
y = datetime.datetime.strptime(date1,"%Y-%m-%d %H:%M:%S")
date1 = datetime.datetime.strftime(y,"%A, %b %d %Y %H:%M:%S %p")

k = Date2.split(" ")
y = " ".join(k[1:len(k)-1])
date2 = datetime.datetime.strptime(y,"%d %b %Y %H:%M:%S")
date2 = datetime.datetime.strftime(date2,"%A, %b %d %Y %H:%M:%S %p")

print date1
print date2 
```

它给了我以下输出。

```
Tuesday, Apr 24 2012 12:58:52 PM
Tuesday, Apr 24 2012 12:56:21 PM 
```

但是当我尝试将它保存在数据库中时，它会抛出这个错误。

```
Enter a valid date/time in YYYY-MM-DD HH:MM[:ss[.uuuuuu]] format 
```

任何人都可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:09:33.953

许多数据库接受`datetime.datetime`对象。

```
import datetime

Date1 = '2012-04-24T12:58:52Z'
dt1 = datetime.datetime.strptime(Date1, '%Y-%m-%dT%H:%M:%SZ')
# dt1: datetime.datetime(2012, 4, 24, 12, 58, 52) 
```

现在尝试将 dt1 作为对象插入 DB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:17:37.123

我会将时间存储为纯整数，以纪元以来的秒数（UNIX 时间戳）为单位。这样，您可以轻松地将其存储到任何数据库中。`%s`格式说明符将`strftime`UNIX 时间戳作为字符串返回——所以类似于

```
int(datetime.datetime.now().strftime('%s')) 
```

应该管用。然后，您可以使用 将时间戳转换回`datetime`对象`datetime.datetime.fromtimestamp(…)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:21:33.207

我不确定您要在数据库中存储哪个对象。正如 eumiro 所建议的，许多库允许您直接存储日期时间对象。但是假设您需要将其存储为字符串，但为什么不能按照数据库错误的提示（YYYY-MM-DD HH:MM:ss）格式化日期时间对象？

所以......像这样：

```
 import datetime

 Date1 = '2012-04-24T12:58:52Z'
 d1 = datetime.datetime.strptime(Date1,"%Y-%m-%dT%H:%M:%SZ")
 d1.strftime("%Y-%m-%d %H:%M:%S") # Store this!

 Date2 = 'Tue, 24 Apr 2012 12:56:21 -0700'
 k = Date2.split(" ")
 y = " ".join(k[1:len(k)-1])
 d2 = datetime.datetime.strptime(y,"%d %b %Y %H:%M:%S")
 d2.strftime("%Y-%m-%d %H:%M:%S") # Store this! 
```

这可能超出了您的问题范围，但请注意，使用 Date2，您将删除时区信息 (-0700)。如果这对您很重要，您应该以某种方式解析和存储它。有一个`%z`选项`strptime`可以解析这个，但不幸的是它似乎并不适用于所有平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:13:52.987

将此格式用于`date1`and `date2`：

```
date1 = datetime.datetime.strftime(y,"%Y-%m-%dT%H:%M:%S")
date2 = datetime.datetime.strftime(date2,"%Y-%m-%dT%H:%M:%S") 
```

这将导致：

```
2012-04-24T12:58:52
2012-04-24T12:56:21 
```

您报告的错误消息清楚地表明您需要这种格式。

# silverlight - 如何在silverlight数据网格中显示鼠标悬停的图像

> ID：10430066
> 
> 赞同：1
> 
> 时间：2012-05-03T11:04:11.667
> 
> 标签：silverlight

我只需要在silverlight 5中在鼠标上显示图像。任何人都可以帮助我。给我任何想法如何实现它...

```
<sdk:DataGridTemplateColumn x:Name="colDeleteContent" IsReadOnly="True" Header="Delete Content" Width="100" CanUserResize="False">
 <sdk:DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
   <StackPanel x:Name="spDeleteContent" VerticalAlignment="Center" Margin="10,0,0,0" Width="20" Height="20" HorizontalAlignment="Center" Orientation="Vertical">                                                            
    <Image x:Name="imgDeleteContent" Source="Assets/Images/close.png" Height="15" Width="15" Margin="0" MouseLeftButtonDown="imgDeleteContent_MouseLeftButtonDown" Cursor="Hand"/>                                                            
   </StackPanel>
  </DataTemplate>
 </sdk:DataGridTemplateColumn.CellTemplate>
</sdk:DataGridTemplateColumn> 
```

氖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:54:55.747

有很多方法，OnFocus 设置你的图像 Visibility Visible 和 FocusLeft 设置 Collapsed 基本上你的主要元素。

但我看到它在您样本的 DataTemplate 上。

所以有一些我想象的方式。

1）在DataTemplate中创建一个新组件而不是元素，例如

```
namespace ProjectBus
{

    public class StackPanelHasHiddenImage : Control
    {
        //You may don't need dependency property
        //It supports bindability
        #region dependency property
        public static Image GetMyProperty(DependencyObject obj)
        {
            return (Image)obj.GetValue(ImageProperty);
        }

        public static void SetMyProperty(DependencyObject obj, Image value)
        {
            obj.SetValue(ImageProperty, value);
        }

        // Using a DependencyProperty as the backing store for MyProperty.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty ImageProperty =
            DependencyProperty.RegisterAttached("Image", typeof(Image), typeof(StackPanelHasHiddenImage), new System.Windows.PropertyMetadata(null));
       #endregion

        public Image Image
        {
            get;
            set;
        }

        protected override void OnGotFocus(RoutedEventArgs e)
        {
            Image.Visibility = Visibility.Visible;
            base.OnGotFocus(e);
        }
        protected override void OnLostFocus(RoutedEventArgs e)
        {
            Image.Visibility = Visibility.Collapsed;
            base.OnLostFocus(e);
        }
    }
} 
```

然后在你的 xaml 中使用

```
 <DataTemplate>
   <local:StackPanelHasHiddenImage Image="/ProjectBus;component/blabal.png"/>
</DataTemplate> 
```

2）使用 GotoStateAction 行为 [http://msdn.microsoft.com/en-us/library/ff723953%28v=expression.40%29.aspx](http://msdn.microsoft.com/en-us/library/ff723953%28v=expression.40%29.aspx)但我看到它在 DataTemplate 中并且使用它可能并不容易。

3) MainElement.FinChildByType < StackPanel >().FirstOrDefault() 不为空，然后将焦点和取消焦点处理程序添加到代码隐藏中的此元素。但这是我主要避免使用的一种方法。

它有点难，因为它在模板中，所以模板中的命名对象无法在代码隐藏中看到。

希望有所帮助

# android - Android Intent.ACTION_VIEW

> ID：10430073
> 
> 赞同：4
> 
> 时间：2012-05-03T11:04:50.943
> 
> 标签：android, video, android-intent

我需要用户选择自己的播放器来播放视频，然后我尝试

```
public class VideoViewActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String videoUrl = "http://someurl/video.mp4";
        Intent i = new Intent(Intent.ACTION_VIEW);  
        i.setData(Uri.parse(videoUrl));  
        startActivity(i); 
} 
```

但在我的示例活动中，打开浏览器不是当前安装的播放器列表。我应该使用哪个 Intent 选项？是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T11:11:56.130

请尝试以下代码。

```
String videoUrl = "http://someurl/video.mp4";
Intent i = new Intent(Intent.ACTION_VIEW);  
i.setDataAndType(Uri.parse(videoUrl),"video/mp4");  
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:11:33.137

架构是“http”，因此 webview 将打开。

这是一个流视频，请先尝试下载。然后打开它。

# mysql - MySQL 查询加速

> ID：10430074
> 
> 赞同：3
> 
> 时间：2012-05-03T11:04:57.990
> 
> 标签：mysql, database, performance, left-join

我的查询速度有问题 - 目前它的运行时间约为 16 秒，我需要加快速度！

我的表方案如下：

用户：

*   id (int 10, 主键)
*   用户名（varchar 100）
*   密码（varchar 100）

用户元：

*   id (int 10, 主键)
*   用户（int 10）
*   元（varchar 100）
*   值（长文本）

我需要从用户元表中的各个行（例如名字、姓氏等）作为列返回数据。此查询完成了这项工作，但运行速度太慢：

```
SELECT
Users.id as id,
Users.username as username,
firstName.value as metaFirstName,
lastName.value as metaLastName,
userLevel.value as metaUsername,
employer.value as metaEmployer,
gto.value as metaGTO
FROM Users
LEFT JOIN (Users_meta as firstName) ON (firstName.user = Users.id AND firstName.meta = 'first_name')
LEFT JOIN (Users_meta as lastName) ON (lastName.user = Users.id AND lastName.meta = 'last_name')
LEFT JOIN (Users_meta as userLevel) ON (userLevel.user = Users.id AND userLevel.meta = 'user_level')
LEFT JOIN (Users_meta as employer) ON (employer.user = Users.id AND employer.meta = 'employer')
LEFT JOIN (Users_meta as gto) ON (gto.user = Users.id AND gto.meta = 'gto') 
```

我还需要能够将 WHERE 和 ORDER BY 子句添加到查询中。

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:17:49.857

我不知道这是否更快。但也许是这样的：

```
SELECT
    Users.id as id,
    Users.username as username,
    MAX(CASE WHEN Users_meta.meta = 'first_name' THEN Users_meta.value ELSE NULL END) AS metaFirstName,
    MAX(CASE WHEN Users_meta.meta = 'last_name' THEN Users_meta.value ELSE NULL END) AS metaLastName,
    MAX(CASE WHEN Users_meta.meta = 'user_level' THEN Users_meta.value ELSE NULL END) AS metaUsername,
    MAX(CASE WHEN Users_meta.meta = 'employer' THEN Users_meta.value ELSE NULL END) AS metaEmployer,
    MAX(CASE WHEN Users_meta.meta = 'gto' THEN Users_meta.value ELSE NULL END) AS metaGTO
FROM
    Users
    LEFT JOIN Users_meta
        ON Users_meta.user = Users.id
GROUP BY
    Users.ID,
    Users.username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:43:05.930

我会首先在表 meta: 上添加一个复合索引`(meta, user, value)`。或`(user, meta, value)`。`WHERE`如果您的查询中有其他条件，这些肯定会有所帮助。

查询现在必须使用（几乎）表中的所有数据，`Users_meta`因此可能不会使用这些索引。

`longtext`数据类型是另一个问题。你确定你需要这么宽的列吗？

# android - 内存不足错误：巨大的位图

> ID：10430077
> 
> 赞同：2
> 
> 时间：2012-05-03T11:05:08.337
> 
> 标签：android, memory

我的活动有列表视图，并且（除了所有其他东西）从网络加载图像并将它们显示在列表视图中。我可以使用 5 台安卓设备：2 台 HTC 欲望、LG P-350、另外一部手机和一台平板电脑。通常情况下，一切正常，但在 HTC 的愿望之一上启动时，应用程序往往会因 NullPointerException 而崩溃，这是由于内存不足错误（我猜是这样），这是输出：

```
05-03 14:41:23.818: E/dalvikvm(843): Out of memory: Heap Size=7367KB, Allocated=4991KB, Bitmap Size=16979KB 
```

稍后，logcat 输出 nullpointerexception 的堆栈跟踪，其中我的一个静态变量突然变为空（该变量在应用程序的根活动中初始化，在整个应用程序中使用，并且肯定不会在代码中为空）。我想，由于内存不足，它被系统清空了。据我了解，系统会尝试分配 17mb 的位图——我确信加载的图像不会那么大。它们是 100*70 jpeg，其中任何一个的重量都远小于 1mb。我不明白的另一件事是为什么我只在一个设备上收到此错误 - 其他设备工作正常。

在我看来，这看起来很奇怪，我找不到任何线索，我需要建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:28:36.273

The reason is simple: the memory is not holding your JPG data per say, but rather its decompressed equivalent, which, needless to say, takes a lot more RAM space than the source files... Note that this 17 mb limit is for all your loaded bitmaps at once, not necessarily a single one.

I had to fight with similar problems in one of my programs (a custom Tile loader for a Mapquest Android API MapView object), and I ended up having to call the `recycle()` method of my bitmaps whenever possible, as well as manually oblige the system to garbage collect at strategic locations using `System.gc()`...

Sorry to not be the bearer of the best news...

You might solve your problems using the same strategy as I did: I essentially cache the loaded bitmaps in hard storage such as my external SD card, and reload them on the fly when needed, instead of attempting to hold everything in RAM.

# sql-server - Sql Server Service Broker 如何与 MSDTC 交互

> ID：10430078
> 
> 赞同：1
> 
> 时间：2012-05-03T11:05:08.820
> 
> 标签：sql-server, database, transactions, service-broker

我们有一种情况，我们在 Service Broker 队列上发送消息作为分布式事务的一部分。显然，我们只希望在事务完成时发送消息。

但是我们发现在这种情况下，队列的接收端在事务提交之前接收到消息，不知何故也被注册了。如果发件人随后回滚，这将导致连锁问题，最终导致队列因有毒消息而被禁用。

这是预期的行为吗？如果是这样，我们如何以事务方式发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:02:58.677

可能是这样，您正在阅读带有 NOLOCK 提示的队列吗？在这种情况下-您可以在队列中看到消息，但实际上您无法收到它！并且只有在事务提交后，才能收到。

# c# - 使用运营合同的好方法和坏方法。

> ID：10430080
> 
> 赞同：-1
> 
> 时间：2012-05-03T11:05:10.473
> 
> 标签：c#, wcf, web-services, anti-patterns

嗨，我一直在阅读一些讲义，但我无法弄清楚为什么这种方法：

```
[OperationContract]
Student PostStudent (Student student); 
```

很好。

而且这种方法很糟糕：

```
[OperationContract]
void PostStudent (string firstname, string lastname etc..); 
```

然而我实现的版本是这样的：

```
[OperationContract]
void PostStudent(Student student); 
```

所以我不确定我实施的版本是否不好，我也不确定我的讲师是如何得到的

`Student PostStudent (Student student);`// ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:40:34.457

Web 服务是建立在使用消息的基础上的。WCF 中的消息是通过编写一个类来定义的，您的`Student`类就是该类，并（[可选地](https://stackoverflow.com/a/4836803/266143)[`DataContract`](http://msdn.microsoft.com/en-us/library/ms733811.aspx)）用属性标记它。这启用了版本控制并在该类的属性上设置各种属性[（](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)尽管后一种效果也可以使用[MessageParameter](http://msdn.microsoft.com/en-us/library/system.servicemodel.messageparameterattribute.aspx)属性来实现）。

所以，是的，`PostStudent (string firstname, string lastname etc..)`很糟糕。

是否从该方法返回某些内容取决于您。A`void`可以很好，因为例如使用 SOAP，您可以返回一个错误，指示无法创建用户的原因：没有错误意味着创建顺利。

当您想检查创建的学生时，您不妨定义一个`PostStudentResult`（或`PostResult<T>`）类并返回它，其中包含属性`Student`（或`T Result`）和`Status`，其中第一个包含创建时的学生，后者指示是否创建那是成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:20:20.493

Web 服务中的返回值通常不是坏习惯。所以它是关于参数的。属于一起的数据应该包装在对象中。

此外， Post 方法根本不应该获得返回值。您发布它，如果出现错误，您将收到异常。

如果您需要接收一些学生，您应该创建一个方法，例如：

```
Student GetStudentByName(string name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:24:56.420

如果它是 WCF，那么使用 Void 方法指定 Action 也是一个很好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T12:00:32.657

Like evryone else said, having too many method parameters is bad practice. Any way I can see only one difference between your signature and the good signature you mentioned. Having the student object as return will give you the ability of having the Id of the student after addition in db for example. Same thing applies for any other calculated properties of the object. Have a void method will force you to load the object again which means an extra trip to server in case you wanted to use the object directly after posting it. Any way having void WCF method is not bad if returning the object is nothing but an extra bandwith.

# iphone - iPad：UIPageViewController 导航方向

> ID：10430083
> 
> 赞同：6
> 
> 时间：2012-05-03T11:05:18.623
> 
> 标签：iphone, objective-c, ipad, uipageviewcontroller

我希望我的 navigationOrientation`UIPageViewController`在我更改我的`UIViewController`. 也就是说，当设备旋转到纵向时，我希望将`navigationOrientation`更改`UIPageViewControllerNavigationOrientationVertical`为`UIPageViewControllerNavigationOrientationHorizontal`。

我尝试`navigationOrientation`在视图控制器的旋转上设置属性，但我发现该`navigationOrientation`属性是只读的。

这是我想要的图像。

**横向视图** ![横向视图](../Images/d3a2f5d6341a9ac7a11e046726b8caab.png)

**纵向视图** ![在此处输入图像描述](../Images/0657ac416af5bebb64bb53743e625e4b.png)

我该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:52:43.693

好问题。

不知道为什么，但似乎 Apple 不希望您更改该属性。无论是技术原因还是某种 UI 指南。

无论如何，如果你不能改变方向，你应该采用不同的方法并使用**两个** `UIPageViewControllers`，每个都有另一个导航方向，它们共享一个委托。在设备转动时，您隐藏/显示相应的视图，或者您在每个设备转动时初始化/释放一个新对象。

顺便提一句。你有没有看一下`pageViewController:spineLocationForInterfaceOrientation:`委托的方法。似乎 Apple 对设备方向变化做出反应的首选方式是这样的：

> **讨论**当设备方向改变时，使用这个方法来改变脊椎位置，以及设置新的视图控制器和改变双面状态。
> 
> 仅当过渡样式为 时才调用此方法 `UIPageViewControllerTransitionStylePageCurl`。

请注意，Apple 的日历应用程序带有非常纤薄的纵向页面 - 似乎真的是他们对 UI 的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:03:15.383

我以稍微不同的方式解决了这个问题，我继承了 UIPageViewController 类并覆盖了 initWithCoder，如下所示：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    NSDictionary *options = nil;

    if ([self isLandscapeOrientation])
    {
        options = [NSDictionary dictionaryWithObject:[NSNumber numberWithInteger:UIPageViewControllerSpineLocationMid] forKey:UIPageViewControllerOptionSpineLocationKey];
    }

    self = [super initWithCoder:aDecoder];

    return [super initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:options];
}

- (BOOL)isLandscapeOrientation
{
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

    return UIInterfaceOrientationIsLandscape(orientation);
} 
```

# delphi - 在 TPageControl 的每个 Ttabsheet 中绘制一个关闭按钮

> ID：10430088
> 
> 赞同：4
> 
> 时间：2012-05-03T11:05:33.637
> 
> 标签：delphi, delphi-xe2, tpagecontrol

我想在 PageControl 上实现一个关闭按钮，我也读过这个问题[How to implement a close button for a TTabsheet of a TPageControl](https://stackoverflow.com/questions/2201850/how-to-implement-a-close-button-for-a-ttabsheet-of-a-tpagecontrol)
事情是我不知道如何实现 Ulrichb 的答案中提供的代码...他们是否构建了 TPageControl 的新组件后代？如果有人可以解释在哪里编写某些代码，我将不胜感激！我有一个在我学校知道一点德尔福的老师，但他帮不了我。如果这是一个愚蠢的问题，我很抱歉，但我是德尔福和编程的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:10:34.697

您链接到的问题中的代码不会创建新组件。相反，它通过使用页面控件的事件来实现自定义绘图。特别是这些事件：

*   OnDrawTab
*   鼠标按下
*   鼠标移动
*   鼠标离开
*   OnMouseUp

您必须使用 Delphi 表单设计器将这些事件处理程序连接到匹配的事件以使代码工作。

在回答该问题时可能选择这种方法是为了简单，但它不适用于具有许多具有页面控件的表单的应用程序。在这种情况下，您会想要派生一个新的页面控件组件。

如果您这样做，那么您需要覆盖以下方法，而不是使用事件：

*   绘图标签
*   鼠标按下
*   鼠标移动
*   鼠标向上

除此之外，您必须复制该`OnMouseLeave`行为。这需要一个消息处理程序。

```
procedure CMMouseLeave(var Message: TMessage); message CM_MOUSELEAVE;
....
procedure TMyPageControl.CMMouseLeave(var Message: TMessage);
begin
  inherited;
  if Message.LParam=0 then
  begin
    // move OnMouseLeave code here
  end;
end; 
```

# windows-phone-7 - inputscope 西班牙语十进制数

> ID：10430090
> 
> 赞同：1
> 
> 时间：2012-05-03T11:05:44.603
> 
> 标签：windows-phone-7

如何配置 inputscope 数字以接受西班牙十进制数字？我需要一些零钱 ”。” 经过 ”，”

电话区域设置是西班牙语。

这是我的代码：

```
<TextBox x:Name="txtCantdiad" Text="{Binding Cantidad, Mode=TwoWay, ConverterCulture=es-ES, StringFormat=N2}" Grid.Row="1" Grid.Column="1" 
                      Visibility="{Binding UsaUnidades}"  KeyUp="Canvas_KeyUp">
               <TextBox.InputScope>
                    <InputScope>
                        <InputScopeName NameValue="Number"/>
                    </InputScope>
                </TextBox.InputScope>
 </TextBox> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:11:30.603

我认为用代码中的点替换逗号是最好的方法，如果我错了，请纠正我，

PHP：`str_replace(",",".", $_POST['txtCantdiad']);`

C＃ ：`txtCantdiad.Replace(",", ".");`

# c# - windows mobile 中的事件

> ID：10430092
> 
> 赞同：0
> 
> 时间：2012-05-03T11:06:08.500
> 
> 标签：c#, events, windows-mobile

我正在使用一个事件来通知我的应用程序的处理进度。但是当我更新标签或进度时，在调试更新代码的同时没有任何更新被执行

```
//update label 
void MUpdate_UpdateNotification(string Message)
{
    lblState.Invoke(UpdateLib.Notification.LabelDelegate, new object[] { lblState,  Message });
}
//delegate

public static LabeleAppendHandler LabelDelegate = new LabeleAppendHandler(UpdateLabel);
private static void UpdateLabel(System.Windows.Forms.Label lbl, string msg)
{
    lbl.Text = msg;
}

//how excute event
if (UpdateNotification!=null)
            UpdateNotification(Notification.GetNextStatus()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:09:09.673

Windows Mobile 默认在单线程中运行，因此可以添加 Application.DoEvents(); 可以解决你的问题。

```
private static void UpdateLabel(System.Windows.Forms.Label lbl, string msg)
{
    lbl.Text = msg;
    Application.DoEvents();
} 
```

# python - Django：将views.py 分离到自己的模块中是个好主意吗？

> ID：10430095
> 
> 赞同：6
> 
> 时间：2012-05-03T11:06:14.893
> 
> 标签：python, django, django-views, python-import

### 困境

我`views.py`变得非常笨拙，所以我想将它分成`views`我的应用程序内的一个单独的模块。但是，我不确定这是一个好主意，原因有两个：

1.  如果我的视图文件与应用程序名称相同，我无法在不使用的情况下导入模型`django.db.get_model`，因此我担心我的方法可能存在缺陷。我听说最好的做法是避免模块内的名称冲突；我应该重命名我的视图文件吗？

2.  我不确定`views`在 Django 社区中创建模块是否被认为是好的做法。

### 例子

例如，对于名为 的应用程序`blogs`，具有`Blog`模型和`Post`模型：

```
blogs/
    __init__.py
    models.py
    urls.py
    views/
        __init__.py
        blogs.py
        posts.py 
```

这是我的`blogs.views.blogs`：

```
# project/blogs/views/blogs.py

from django.db.models import get_model
from django.shortcuts import get_object_or_404
from django.views.generic import ListView, DetailView

# Cannot import model directly, results in `ImportError: No module named models`.
# This can be resolved if I resolve the name collision between this file and
# the app itself.
#
# from blogs.models import Blog

class BlogListView(ListView):
    model = get_model('blogs', 'Blog')

    def get_queryset(self):
        return self.model.objects.all()

class BlogDetailView(DetailView):
    model = get_model('blogs', 'Blog')

    def get_object(self):
        blog_pk = self.kwargs.get('blog_pk')
        return get_object_or_404(self.model.objects, pk=blog_pk) 
```

### 问题

我的问题是双重的：

1.  我应该首先分开我的观点吗？

2.  如果是这样，是使用`get_model`一个好主意，还是有一种方法可以在不使用此方法的情况下直接导入我的模型？或者我应该更改我的视图文件名，例如通过添加后缀`_views`（例如`blogs.views.blogs_views.py`：）来完全避免这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T11:18:28.447

> 我无法在不使用 django.db.get_model 的情况下导入模型

您可以：`from project_name.app_name.models import MyModel`而且最好的方式是“非常不鼓励对包内导入的相对导入”，如[PEP-8 中所述](http://www.python.org/dev/peps/pep-0008/#imports)。

名称应该没有任何问题，`views.py`在 Django 中没有特殊含义，它只是一个约定。

您可以以任何您想要的名称将视图保存在任何模块中的任何文件中。所以这里没有什么特别的规定，如果你觉得把模块分成子模块就好了，那就去做吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T11:34:30.407

正如 DrTyrsa 指出的那样，`views`没有特殊含义。因此，作为创建子包的替代方案，您可以只创建与现有 views.py - `blog_views.py`、`posts_views.py`等处于同一级别的多个文件。只要您在 urls.py 中使用正确的引用，就可以正常工作。

# java - 向量添加元素

> ID：10430096
> 
> 赞同：-3
> 
> 时间：2012-05-03T11:06:15.770
> 
> 标签：java, vector

我们可以对向量执行此操作吗？

```
 Vector object = (Vector) listUserEvents.get(key);
    object.addElement(eCompare); 
```

我这里没有实例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:07:20.903

你应该可以，`Vector`还是有[`addElement`方法](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html#addElement%28E%29)的；[`add`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html#add%28E%29)它只是新方法的副本。

* * *

**更新**

下面你说：

> 我的问题与 add/addElement 无关，我在这里问的是没有矢量实例我可以按照上面的片段添加数据吗？

它当然*似乎*是关于`add`/ `addElement`。

您正在将结果`get`转换为`Vector`. 如果它不是 a `Vector`，那将是一个 runtime `ClassCastException`。从根本上说，您需要确保您正在处理与您要返回的任何对象的正确接口。如果它真的是一个`Vector`，那么你可以使用`addElement`它。如果它是`List`实现之一，则将其转换为`List`并使用`add`.

* * *

另外，除非您真的需要同步、使用`ArrayList`或其他较新的`List`实现之一。`Vector`有点历史的残余，从 Java 中最早（而且相当糟糕）的初始集合开始，十多年前被[更新的集合框架](http://docs.oracle.com/javase/7/docs/technotes/guides/collections/index.html)取代（虽然仍然不出色，但向前迈出了一步）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:15:16.497

> 我们可以对向量执行此操作吗？

是的你可以。

该操作存在，并且有效。

如果您对上述代码有疑问，这与更大的上下文和/或您对代码功能的期望有关。但如果没有更多信息，我们只能猜测您的问题是什么，以及可能是什么原因造成的。

* * *

> 我这里没有实例

我不明白你的意思。

# unix - aix : 获取字符串前后的行

> ID：10430098
> 
> 赞同：1
> 
> 时间：2012-05-03T11:06:31.180
> 
> 标签：unix, aix

我正在使用 AIX，并且我有一个字符串“没有进程可以读取写入管道的数据”。我想在这个字符串之前和之后得到 2 行和 4 行的输出。该字符串在日志中出现超过 100 次，我想输出，日志中的最后一个结果与该字符串

我尝试使用：

```
nawk 'c-->0;$0~s{if(b)for(c=b+1;c>1;c--)print r[(NR-c+1)%b];print;c=a}b{r[NR%b]=$0}' b=2   a=4 s="There is no process to read data written to a pipe" File.log 
```

该命令的输出是我得到了所有 100 多个结果，其中存在上述字符串

-A number -B number 命令在 AIX 中不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:10:10.653

如果你有可用的 GNU grep，你可以使用它来代替 awk：

```
grep -B 2 -A 4 "There is no process to read data written to a pipe" File.log 
```

# sql - 插入由复选框选择的数据

> ID：10430101
> 
> 赞同：0
> 
> 时间：2012-05-03T11:06:42.963
> 
> 标签：sql, jsp

我正在尝试一个代码，我想在其中创建一个表并将数据插入到表中。我只想为用户使用复选框选择的那些字段创建表并插入数据。这是我的jsp代码：

```
<%@ page language="java" import="java.util.*"%>
<%@ page import="java.sql.*" %>
<%
    try
    {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String url = "jdbc:sqlserver://";
        Connection con = DriverManager.getConnection(url,"sa","SQL1423#3");
        Statement st=null;

        String select[] = (String[]) session.getAttribute("a");
        String tblname=(String)session.getAttribute("tblname");
        //out.println(tblname);
        //String select[] = request.getParameterValues("id");
        if (select != null && select.length != 0) 
        {
            for (int i = 0; i < select.length; i++) 
            {
                int ch=Integer.parseInt(select[i]);
                //int counter=1;
                //int ID=1;
                switch(ch)            
                {
                    case 1 :
                        String idOne=request.getParameter("idOne");
                        //out.println(idOne);
                        String idOneIns="insert into "+tblname+" (ID) values(?)";
                        PreparedStatement pstmt = con.prepareStatement(idOneIns);
                        pstmt.setString(1, idOne);
                        //st=con.createStatement();
                        int valueTwo = pstmt.executeUpdate();
                        out.println("Inserted");
                        break;
                    case 2 :
                        String ser=request.getParameter("series");
                        String serIns="insert into "+tblname+" (SERIES) values(?)";
                        PreparedStatement pst = con.prepareStatement(serIns);
                        pst.setString(1, ser);
                        int value = pst.executeUpdate();
                        out.println("Inserted");
                        break;
                    case 3 :
                        String sym=request.getParameter("symbol");
                        String symIns="insert into "+tblname+" (SYMBOL) values(?)";
                        PreparedStatement pstm = con.prepareStatement(symIns);
                        pstm.setString(1, sym);
                        int valueOne = pstm.executeUpdate();
                        out.println("Inserted");
                        break;
                }//switch
            }//for
        }//if
        st.close();
        con.close();
    }//try
    catch(Exception e)
    {
        out.println(e);
    }
%> 
```

这里数据插入到表中。但是如果我选择所有三个复选框，则数据插入为：

```
Id   Series Symbol

1    null   null

null a      null

null null   b 
```

但我希望将数据插入为：

```
Id Series Symbol

1  a      b 
```

我应该进行哪些更改才能获得此输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:28:39.923

1.  Updating the database is better put into a Controller. JSP pages is better used for displaying results (See [MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) pattern)
2.  Using dynamic SQL to determine database tables is inherently dangerous and could be targeted for attacks
3.  Your current code loops over input elements, and for each element inserts a new row in the database table. What you want to do is assemble the tree values (from your form input) and insert only one row. E.g.

    INSERT INTO table (ID, SERIES, SYMBOL) VALUES (?,?,?)

# asp.net - FormsAuthenticationTicket.Name 必须是唯一的吗？

> ID：10430103
> 
> 赞同：4
> 
> 时间：2012-05-03T11:06:51.773
> 
> 标签：asp.net, forms-authentication

通常我使用用户的电子邮件地址（唯一），但在我当前的项目中，从 User.Identity.Name 中获得用户全名（不是唯一的）会更有益。

那么，我为身份验证 cookie 名称设置的内容真的很重要吗？

注意我知道我可以在 auth cookie 中存储其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:22:04.090

是的，您可以输入 userName`FormsAuthenticationTicketName`它不一定是唯一的，但您收到的票应该存储在具有唯一名称的 cookie 中。

# java - 字符串无法转换为 JSONObject？

> ID：10430105
> 
> 赞同：1
> 
> 时间：2012-05-03T11:06:56.120
> 
> 标签：java, php, mysql, json, android-emulator

我是开发 Android 应用程序的初学者，这是我第一次从头开始编码，这就是为什么我觉得这对我来说很难。基本上，我只想摆脱错误，以便现在可以开始在我的 Android 应用程序上显示 SQL 表。当我从 mySQL 表中获取数据时，我被这个错误阻止了。我在 LogCat 得到这个：

```
Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
05-03 15:45:25.586: W/System.err(552): java.lang.NullPointerException
05-03 15:45:25.626: W/System.err(552):  at hs.stockapp.StocksTask.doInBackground(StocksTask.java:64) 
```

如果我理解错误，我的 StocksTask.java 文件的第 64 行有问题。

第 64 行：`if (json.getString(KEY_SUCCESS) != null)`

StocksTask.java 代码摘录：

```
protected Integer doInBackground(String... params)  {

    UserFunctions userFunction = new UserFunctions();
    JSONObject json = userFunction.findStocks();
    try {
        if (json.getString(KEY_SUCCESS) != null) {
            String res = json.getString(KEY_SUCCESS);

            if(Integer.parseInt(res) == 1){         
                DatabaseHandler db = new DatabaseHandler(activity.getApplicationContext());
                JSONObject json_stocks = json.getJSONObject("stocks");
                Log.v("company_name", json_stocks.getString(STOCK_COMPANY_NAME));
                userFunction.findStocks();
                db.findStocks(json_stocks.getString(STOCK_COMPANY_NAME), json_stocks.getString(STOCK_SYMBOL), json_stocks.getString(STOCK_MCAP));                        

                responseCode = 1;
                // Close Screen
                //finish();
            }else{
                responseCode = 0;
                // Error 
            }
        }
    }
    catch (NullPointerException e) {
        e.printStackTrace();
    }
    catch (JSONException e) {
        e.printStackTrace();
    }
    return responseCode;
} 
```

用户函数.java

```
 public JSONObject findStocks(){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", findstocks_tag));
    JSONObject json = jsonParser.getJSONFromUrl(stocksURL, params);
    // return json
    return json;
} 
```

索引.php

```
else if ($tag == 'stocks'){
    // request type is view stock list
    $stocks = $db->search_stocks();
    if ($stocks != false) {
        // stocks
        // echo json with success = 1
        $response["success"] = 1;
        $response["stocks"]["company_name"] = $stocks["name"];
        $response["stocks"]["com_sym"] = $stocks["com_sym"];
        $response["stocks"]["mkt_cap"] = $stocks["mkt_cap"];
        echo json_encode($response);
    } else {
        // no stocks found
        // echo json with error = 0
        $response["error"] = 1;
        $response["error_msg"] = "No stocks found";
        echo json_encode($response);
    }

} 
```

DB_functions.php

```
 public function search_stocks() {
    $result = mysql_query("SELECT company_name, com_sym, mkt_cap from stock ORDER BY com_sym") or die(mysql_error());
    $no_of_rows = mysql_num_rows($result);

    if ($no_of_rows > 0) {
        while($row=mysql_fetch_assoc($result)){
            $output[] = $row;
        }               
        print(json_encode($output)); 
        return $row;            
    return true;
    } else {
        // stocks not existed
        return false;
    }
mysql_close(); 
```

}

search_stocks 函数的生成结果

```
[{"company_name":"Asian Chorva","com_sym":"ASIA","mkt_cap":"4534356"},{"company_name":"Banko de Oro","com_sym":"BDO","mkt_cap":"54434"},{"company_name":"Bank of the Phil Island","com_sym":"BPI","mkt_cap":"5464554"},{"company_name":"College Hive In Boon","com_sym":"CHIB","mkt_cap":"5434654"},{"company_name":"Critical Heart Throb Racing","com_sym":"CHTR","mkt_cap":"53544564654"}] 
```

我应该如何处理 64 行？非常感谢:) 任何帮助将不胜感激。有关它的其他信息将非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T11:09:35.460

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:26:45.400

正确检查您要在其中显示的 url，就像 `"http://10.0.2.2/api/"`在 UserFunctions.java 中一样，其中 api 文件夹存储在 www 或 htdocs 文件夹中

# google-app-engine - Struts 2在Google App Engine中用点传递参数

> ID：10430106
> 
> 赞同：1
> 
> 时间：2012-05-03T11:07:02.243
> 
> 标签：google-app-engine, struts2

我可以在 Struts 2（GAE 应用程序）Url 中传递参数，如下所示：

```
http://localhost:8888/user/jr
http://localhost:8888/user/jr@jrgalia 
```

但我有一个错误

```
http://localhost:8888/user/jr@jrgalia.com 
```

如何允许使用点字符传递参数？

下面是struts.xml

```
....
<constant name="struts.enable.SlashesInActionNames" value="true"/>
<constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/>
...
<action name="/user/*" class="LinkAction" method="usersLink">
<param name="userName">{1}</param>
    <result>
    <param name="location">/index.jsp</param>
    <param name="parse">false</param>
        <param name="encode">false</param>
    </result>
</action> 
```

以下是错误：

```
HTTP ERROR 404
Problem accessing /user/jr@jrgalia.com. Reason:
   NOT_FOUND
Powered by Jetty:// 
```

# c# - ASp.NET MVC - 是否可以简化我的架构？

> ID：10430108
> 
> 赞同：7
> 
> 时间：2012-05-03T11:07:03.127
> 
> 标签：c#, asp.net-mvc-3, model

我刚刚开始从事一个 MVC 项目，一切进展顺利，但看起来我正在使用太多对象创建大量意大利面条代码。谁能看到我如何在整个项目失控之前简化这个解决方案？

好的，这是我的设置：

**DAL** - 具有实体框架连接和获取数据的方法，然后将数据转换为模型层中的模型对象

**BLL** - 将数据发送回 UI 模型 - 这包含整个站点使用的所有模型对象，来自 DAL 的任何内容都通过创建新对象然后填充变量转换为这些对象。

**UI** - 我的 MVC 解决方案

DAL、BLL 和模型也被其他解决方案使用。

现在使用 MVC，我正在尝试使用验证注释（[Required] 等），这意味着我必须使用注释重新创建模型对象。这很好，但如果我想将数据保存回数据库，我需要转换那些只是混乱的类。

谁能看到我如何将当前的模型类库与使用验证注释的 MVC 模型对象一起使用？

如果我没有清楚地解释自己，请告诉我，我会提供更多细节。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:13:46.003

理想情况下，一方面需要与域模型*分开，另一方面需要与 MVC 模型（它们实际上是***ViewModels**）分开。这种分离非常重要，强烈建议。

在大多数情况下，这些看起来很相似，尽管 ViewModel 可以包含额外的东西。然后您可以使用[AutoMapper](http://automapper.codeplex.com/)从一种转换到另一种。

例如：

```
public class User // in entity DLL
{
    [Required]
    public string Name {get; set;}
}

public class UserViewModel : User // in MVC DLL
{
    public string LastVisitedPage {get; set;} // which only MVC needs to know
}

Mapper.Map<User, UserViewModel>();
Mapper.Map<UserViewModel, User>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:16:10.903

您可以将元数据放入元数据对象中，而无需重新创建模型对象。这是一种非常简单的方法，但是它确实需要将模型对象本身标记为部分对象。我希望没关系，如果不是这个解决方案对你不起作用。

```
[MetadataType(typeof(PreviousResultsMetaData))]
public partial class PreviousResults
{
    public class PreviousResultsMetaData
    {
        [DisplayName("Class Ranking Score")]
        [Required]
        [Range(0.0, 100.0)]
        public object ClassRankingScore { get; set; }
    }
} 
```

在上面的示例中，有一个名为 PreviousResults 的数据模型对象，它是由一些脚手架代码在其他地方创建的。它定义了使用 LINQ 向数据库发送和从数据库发送的 POCO 对象。MetadataType 属性指示将用于保存元数据的类。然后，您只需创建与真实数据成员名称匹配的普通对象并对其进行注释。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:16:50.493

您可以完美地为您的 BLL（*业务实体*）添加属性。只需添加一个引用并为`System.ComponentModel.DataAnnotations`. 除此之外，您还可以实现[IValidatableObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)接口（这很简单，见下文）。

对于映射，您可以使用例如[AutoMapper](http://automapper.org/)，因此您不必自己编写很多映射逻辑（如果您可以利用名称映射魔法）。

验证示例：

```
ICollection<ValidationResult> validationErrors = new List<ValidationResult>();
var validationContext = new ValidationContext(this, null, null);
Validator.TryValidateObject(this, validationContext, ValidationErrors, true);

return validationErrors; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:14:07.120

您可以使用 FluentValidation 框架进行验证。看这里

[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

# perl - Perl - 从文本安排

> ID：10430109
> 
> 赞同：1
> 
> 时间：2012-05-03T11:07:17.487
> 
> 标签：perl

我目前正在阅读包含以下行的文本文件：

```
0 24000 97200
1 52200 95400
2 0 0
3 37800 180000
4 0 0
5 48000 95400
6 0 0
```

第一个值表示日期`(0 = sunday, 1 = monday, ...)` 。数值，例如 24000，表示总秒数。

最终我想得到这样的东西：

![每周计划的图形表示](../Images/848f975d83fe31a7de7b61fb8bbbaa32.png)

这是到目前为止的代码：

```
open(SCHEDULE, $schedule) or die print "Failed to open $schedule";
@lines = <SCHEDULE>;
@secondsfrom  = (0,0,0,0,0,0,0);
@secondsto    = (0,0,0,0,0,0,0);
@secondsextra = (0,0,0,0,0,0,0);
@days = ("sunday","monday","tuesday","wedsneday","thursday","friday","saturday");
foreach (@lines) {
    ($day, $fromtotalseconds, $tototalseconds) = split(/ /,$_,3);
    @secondsfrom[$day] += $fromtotalseconds;
    @secondsto[$day]   += $tototalseconds;
}
for (my $i=0; $i<=6;$i++) {
    print "\n@days[$i]  @secondsfrom[$i] to @secondsto[$i]";
} 
```

这一刻我卡住了！我一直在寻找如何将这些值转换为类似的东西，如：

```
周日从 24000 到 86400 (MAX)
星期二从 0 到 48000 和从 52200 到 86400
…
```

这就是它为我产生的：

```
周日 24000 至 97200
周二 52200 至 95400
…
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:58:32.920

这是一个文本实现。我并没有真正检查它的正确性，所以它可能潜伏着错误，但它应该说明如何一次处理一行输入：

```
#!/usr/bin/env perl

use strict; use warnings;

use constant ONE_MINUTE => 60;
use constant ONE_HOUR   => 60 * ONE_MINUTE;
use constant ONE_DAY    => 24 * ONE_HOUR;
use constant BLOCK_SIZE => ONE_MINUTE * 20;
use constant DAY_LENGTH => ONE_DAY/BLOCK_SIZE;

my @days = qw(Sun Mon Tue Wed Thu Fri Sat);

my $remainder = 0;

while (my $line = <DATA>) {
    next unless $line =~ m{
        \A
        ( [0-6]  ) \s+
        ( [0-9]+ ) \s+
        ( [0-9]+ ) \s+
        \z
    }x;
    my ($daynum, $start, $duration) = ($1, $2, $3);
    my $start_block = seconds_to_blocks($start);
    my $duration_block = seconds_to_blocks($duration);

    my ($dayrow, $hang) = make_dayrow(
        $remainder,
        $start_block,
        $duration_block,
    );

    printf "%3s: %s\n", $days[$daynum], $dayrow;
    $remainder = $hang;
}

sub seconds_to_blocks {
    my ($seconds) = @_;
    return int($seconds / BLOCK_SIZE);
}

sub make_dayrow {
    my ($remainder, $start, $duration) = @_;

    if ($remainder > DAY_LENGTH) {
        my $hang = $remainder - DAY_LENGTH;
        return ('#' x DAY_LENGTH, $hang);
    }

    my $hang = $start + $duration > DAY_LENGTH
             ? $duration - (DAY_LENGTH - $start)
             : 0
             ;

    my $dayrow = '#' x $remainder;
    $dayrow   .= ' ' x ($start - $remainder);
    $dayrow   .= '#' x ($duration - $hang);
    $dayrow   .= ' ' x (DAY_LENGTH - length $dayrow);

    return ($dayrow, $hang);
}

__DATA__
0 24000 97200
1 52200 95400
2 0 0
3 37800 180000
4 0 0
5 48000 95400
6 0 0 
```

输出：

```
太阳： ＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ ####
周一：############################################### ##########
星期二：############################################### ##
星期三： ＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃
周四：############################################### ########################
周五：################################################ #####################
周六：##############################################
```

### 更新

如果你只想要百分比，那也很简单：

```
#!/usr/bin/env perl

use strict; use warnings;
use YAML;

use constant ONE_MINUTE => 60;
use constant ONE_HOUR   => 60 * ONE_MINUTE;
use constant ONE_DAY    => 24 * ONE_HOUR;

my @days = qw(Sun Mon Tue Wed Thu Fri Sat);

my $remainder = 0;
my @rows;

while (my $line = <DATA>) {
    next unless $line =~ m{
        \A
        ( [0-6]  ) \s+
        ( [0-9]+ ) \s+
        ( [0-9]+ ) \s+
        \z
    }x;
    my ($daynum, $start, $duration) = ($1, $2, $3);

    my $dayrow = make_dayrow($remainder, $start, $duration);

    push @rows, $dayrow->[0];
    $remainder = $dayrow->[1];
}

for my $row (@rows) {
    print join("\t", map sprintf('%.0f%%', $_ * 100), @$row), "\n";
}

sub make_dayrow {
    my ($remainder, $start, $duration) = @_;

    return [[1, 0, 0], $remainder - ONE_DAY] if $remainder > ONE_DAY;

    my $hang = $start + $duration > ONE_DAY
             ? $duration - (ONE_DAY - $start)
             : 0
             ;

    return [
        [
            $remainder / ONE_DAY,
            $start / ONE_DAY,
            ($duration - $hang) / ONE_DAY
        ],
        $hang
    ];
}

__DATA__
0 24000 97200
1 52200 95400
2 0 0
3 37800 180000
4 0 0
5 48000 95400
6 0 0 
```

输出：

```
0% 28% 72%
40% 60% 40%
71% 0% 0%
0% 44% 56%
100% 0% 0%
52% 56% 44%
66% 0% 0%
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:17:37.203

对您的代码进行此更改怎么样？

```
use strict;
use warnings;
my @lines = (
'0 24000 97200',
'1 52200 95400',
'2 0 0',
'3 37800 180000',
'4 0 0',
'5 48000 95400',
'6 0 0',
);
my @days = qw(sunday monday tuesday wedsneday thursday friday saturday);
for (my $i=0; $i<=$#lines;$i++) {
    my ($day, $fromtotalseconds, $tototalseconds) = split(/ /,$lines[$i],3);
    next if ($fromtotalseconds == 0 && $tototalseconds == 0);
    if ($tototalseconds > 86400) {
      my $remainingSeconds = $tototalseconds - (86400 - $fromtotalseconds);
      $tototalseconds = 86400;
      splice @lines, $i+1, $#lines - $i, (sprintf('%d %d %d', $day + 1, 0, $remainingSeconds), @lines[$i+1 .. $#lines]);
    }
    print "\n$days[$day] from $fromtotalseconds to $tototalseconds";
} 
```

我删除了数组并将打印放在每次循环迭代的末尾。我还从 foreach 切换到三参数 for 因为这样我们可以轻松地将更多内容放入`@lines`. 每次我们发现 to-value`$tototalseconds`大于一天时，我们都会`@lines`在当前行之后添加一个新行。这样它将在下一次迭代中使用。

它没有说

```
Tuesday from 0 to 48000 and from 52200 to 86400 
```

但它说

```
sunday from 24000 to 86400
monday from 0 to 10800
monday from 52200 to 86400
tuesday from 0 to 9000
wedsneday from 37800 to 86400
thursday from 0 to 86400
friday from 0 to 7200
friday from 48000 to 86400
saturday from 0 to 9000 
```

我发现还不错。你将能够以你需要你的价值观的方式改变它。

顺便说一句，总是`use strict`和`use warnings`。您的代码中有几处引发了一些警告。例如，如果 perl 中数组元素的值是标量，则必须`$`在其前面放置 a，而不是`@`: `$secondsfrom[$day] += $fromtotalseconds`。

**编辑**：第二个例子。

```
my @lines = (
'0 9600 91200',
'1 40800 186000', 
'2 0 0', 
'3 57000 87000',
'4 63600 173400', 
'5 0 0', 
'6 0 0',); 
```

产生：

```
sunday from 9600 to 86400
monday from 0 to 14400
monday from 40800 to 86400
tuesday from 0 to 86400
wedsneday from 0 to 54000
wedsneday from 57000 to 86400
thursday from 0 to 57600
thursday from 63600 to 86400
friday from 0 to 86400
saturday from 0 to 64200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:18:10.383

```
 open SH, "<", $schedule or die "Oh, $schedule die :\ \n";
      %hash = map{$_,0}(0..6); #not best but work, create a hash of days
      my $day;
      my $first;
      my $second;
  for(<SH>){
     ($day,$first,$second)=split(/ /,$_,3); #work? yeah
     $hash{$day}=$second-$first;
  }

  map{print "key is ".$_." value is ".$hash{$_}."\n";}sort keys %hash; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T12:55:48.167

这几乎正​​是您正在寻找的：

```
use strict;
use warnings;

use constant MAX_DAY => 86_400;

my @week;
while ( <DATA> ) { 
    my ( $dow, $start, $end ) = split ' ';
    next unless $start + $end;
    while ( $end > 0 ) { 
        my $cont = $end > MAX_DAY;
        push @{ $week [ ( $dow++ ) % 7 ] }, [ $start, $cont ? MAX_DAY : $end, $cont ];
        $start  = 0;
        $end   -= MAX_DAY;
    }
}

my @dow_names = qw(Sun Mon Tue Wed Thu Fri Sat);
foreach my $day ( @week ) { 
    print shift( @dow_names ) . ': ';
    if ( ref $day ) { 
        print join( ' and '
                  , map { "from $_->[0] to $_->[1]" . ( $_->[2] and ' (MAX)' ) } @$day 
                  );
    }
    print "\n";
}
__DATA__ 
0 24000 97200
1 52200 95400
2 0 0
3 37800 180000
4 0 0
5 48000 95400
6 0 0 
```

# php - 如何用其他网站的账号搭建登录系统？

> ID：10430115
> 
> 赞同：0
> 
> 时间：2012-05-03T11:07:33.427
> 
> 标签：php, login

> **可能重复：**
> [您如何让客户使用他们的谷歌帐户登录到您的网站？](https://stackoverflow.com/questions/479535/how-do-you-enable-customers-to-login-to-your-site-using-their-google-account)

我想用其他网站的帐户创建一个登录系统，例如 google、yahoo、facebook。stackoverflow.com 也有相同的登录系统。使用 php 脚本，如何创建登录系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:11:30.117

你可以试试 OpenId API。检查此链接 - [http://openid.net/get-an-openid/start-using-your-openid/](http://openid.net/get-an-openid/start-using-your-openid/)或按照建议将 API 用于各种可用服务。

# matlab - 如何使用我以起点编写的代码绘制函数？

> ID：10430123
> 
> 赞同：2
> 
> 时间：2012-05-03T11:08:15.003
> 
> 标签：matlab, plot, numerical-methods

我为算法编写了代码`secant`，现在我有了函数：

`f(x) = 2x^3 - 4x^2 + 3x`，有两个初始点：`x0 = -1 , x1 = 2`。

我的问题是如何在一张图中绘制我写的函数，即`secant`上面的函数`f`和下面的结果？

甚至有可能做到这一点吗？

我使用**割线**算法后得到的结果是：

```
 v =
   -4.0000
    2.2069
    2.3699
    2.6617
    2.5683
    2.5804 
```

这些是我在我的`secant`算法中使用的 6 次迭代，对于`x0 & x1`上面给出的。

如果您能解释一下，我将不胜感激。

**编辑 ：**

这是我用来获取结果的代码：

```
[z,n,v]=secant([-1,2],10^(-5),10^(-5),10) 
```

对于原型：

```
function [x,n,v]=secant(X,d,e,N)

% x0 is the first point
% x1 is the end point 
% d is the tolerance 
% e is the requested precision 
% N is the number of iterations 
```

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:25:59.487

您可以绘制函数，并将结果绘制为散点。

首先，以向量的方式定义函数：

```
f(x) = @(x) ( 2*x.^3 - 4*x.^2 + 3*x ); 
```

然后在某个范围内绘制函数：

```
x = -10:10;
y = f(x);
figure(); plot(x,y); 
```

现在，显示结果：

```
hold on;
scatter(v,f(v)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:04:03.463

我很快把它放在一起，它说明了强大的[匿名函数](http://www.mathworks.nl/help/techdoc/matlab_prog/f4-70115.html) *，*它向您展示了如何绘制割线函数的结果（与维基百科相同的方式：http://en.wikipedia.org/wiki/File: [Secant_method.svg](http://en.wikipedia.org/wiki/File:Secant_method.svg) )

但是，我不明白的是，为什么您的割线函数既有公差又有要求的精度作为输入；我认为公差是割线算法的结果..

```
function [  ] = tmp1(  )

    f=@(x) x.^2;
    [xend,n,v]=secant(f,-4,3,1e-4,50);
    fprintf('after %d iterations reached final x_end = %g, f(x_end) = %g\n',n,xend,f(xend))

    figure;hold on;
    xtmp = linspace(min(v),max(v),250);
    plot(xtmp,f(xtmp),'r'); % plot the function itself
    line([v(1:end-2) v(3:end)]',[f(v(1:end-2)) zeros(n+1,1)]','Color','b','Marker','.','MarkerEdgeColor','b'); % plot the secant lines
    plot(v,f(v),'.','MarkerEdgeColor','r')% plot the intermediate points of the secant algorithm
    line([v(3:end) v(3:end)]',[zeros(n+1,1) f(v(3:end))]','Color','k','LineStyle','--'); % vertical lines

    ylim([-4 max(f(xtmp))]); % set y axis limits for nice plotting view algorithm

end

function [xnew,n,v]=secant(f, x0,x1,e,N)
% x0 is the first point
% x_end is the end point
% e is the requested precision
% N is the number of iterations

v=zeros(N+2,1);
v(1)=x0;
v(2)=x1;

for n=0:N-1
    xnew = x1 - f(x1) * (x1-x0)/(f(x1)-f(x0));
    v(3+n) = xnew;
    if abs(f(xnew)) <e
        break;
    else
        x0=x1;
        x1=xnew;
    end
end
v(n+4:end)=[];

end 
```

# bash - 如何停止在子shell中执行的tail -f命令

> ID：10430126
> 
> 赞同：3
> 
> 时间：2012-05-03T11:08:30.137
> 
> 标签：bash

我尝试了[http://mywiki.wooledge.org/ProcessManagement](http://mywiki.wooledge.org/ProcessManagement)和[http://mywiki.wooledge.org/BashFAQ/068My](http://mywiki.wooledge.org/BashFAQ/068My)的各种步骤， 但我无法实现的是如何在特定时间间隔后终止 tail -f 命令。

我的脚本：

```
#!/bin/bash

function strt ()
{
command 1..
command 2..
}

export -f strt
su user -c 'set -e && RUN_Server.sh > server.log && tail -f server.log & pid=$! { sleep 20; kill $pid; } && strt'

exit 0. 
```

我正在尝试杀死 tail -f server.log 的 pid 并继续执行“strt”，这是一个查找 jboss 服务器是否启动的小功能。

在执行时我得到错误

bash：-c：第 0 行：意外标记 `{' 附近的语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T22:38:26.247

尝试这个

```
timeout 20 tail -f server.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T05:10:23.143

我正在尝试类似的事情，即想在`&`单行/单行中打印出在后台使用 & 号 ( ) 生成的进程的 pid：

```
$ tail -f /var/log/syslog & ; echo $! 
bash: syntax error near unexpected token `;' 
```

...但不断收到可怕的语法错误，这让我来到了这篇文章。

在上面的示例中我没有意识到的是，`&`（和号）*也是*命令分隔符/终止符`bash`- 就像`;`（分号）一样！笔记：

[BashSheet - Greg 的维基百科](http://mywiki.wooledge.org/BashSheet)

> *   [命令] ; [command] [newline]
>     分号和换行符将同步命令彼此分开。
> *   [command] & [command]
>     单个 & 号终止异步命令。

所以 - 假设`&`是 中的命令行终止符`bash`，在我上面的示例中，后面跟着一个`;`，它*也是*命令行终止符 -`bash`扼流圈。答案是简单地删除分号`;`，并且只让 & 号`&`作为单行中的命令行分隔符：

```
$ tail -f /var/log/syslog & echo $! 
[1] 15562
15562
$ May  1 05:39:16 mypc avahi-autoipd(eth0)[23315]: Got SIGTERM, quitting.
May  1 06:09:01 mypc CRON[2496]: (root) CMD (  [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -depth -mindepth 1 -maxdepth 1 -type f -cmin +$(/usr/lib/php5/maxlifetime) -delete)
May  1 06:17:01 mypc CRON[5077]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
May  1 06:25:01 mypc CRON[7587]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily ))
^C
$ May  1 06:52:01 mypc CRON[15934]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly ))
$ ps -p 15562
  PID TTY          TIME CMD
15562 pts/0    00:00:00 tail
$ kill 15562
$ ps -p 15562
  PID TTY          TIME CMD
[1]+  Terminated              tail -f /var/log/syslog
$ ps -p 15562
  PID TTY          TIME CMD
$ 
```

...但是，在此示例中，您必须手动终止生成的进程。

回到 OP 问题，我可以用这个命令行重建问题：

```
$ tail -f /var/log/syslog & pid=$! { sleep 2; kill $pid; } 
bash: syntax error near unexpected token `}' 
```

考虑到这一点 - bash 将`&`其视为分隔符，然后看到“合法”命令`pid=$!`，然后 - 与先前的“合法”命令*未终止*，看到一个花括号`{`，这意味着当前 shell 中的新命令组。所以答案只是`pid=$!`用分号终止`;`，这样新的命令组就可以正常启动：

```
$ tail -f /var/log/syslog & pid=$! ; { sleep 2; kill $pid; } 
[1] 20228
May  1 05:39:16 mypc avahi-autoipd(eth0)[23315]: Got SIGTERM, quitting.
May  1 06:09:01 mypc CRON[2496]: (root) CMD (  [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -depth -mindepth 1 -maxdepth 1 -type f -cmin +$(/usr/lib/php5/maxlifetime) -delete)
May  1 06:17:01 mypc CRON[5077]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly)
May  1 06:25:01 mypc CRON[7587]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily ))
May  1 06:52:01 mypc CRON[15934]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly ))
$ ps -p 20228
  PID TTY          TIME CMD
[1]+  Terminated              tail -f /var/log/syslog
$ 
```

请注意，该`tail -f`过程似乎终止了属性，但在我的`bash`（版本 4.2.8(1)）中，我必须在 shell 中按 Enter，才能看到“ `[1]+ Terminated ...`”消息。

希望这会有所帮助，
干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:40:23.187

你遇到的问题是你的`slee`p 命令在你杀死你的`tail`.

命令结构：

```
command1 && command2 
```

说运行`command1`，如果它以退出代码退出`0`，则运行`command2`。这相当于：

```
if command1
then
     command2
fi 
```

前段时间我也遇到过类似的情况。我必须启动一个 Weblogic 服务器，等到服务器启动，然后在服务器上做一些事情。

我最终使用[命名管道（方向）](http://www.linuxjournal.com/content/using-named-pipes-fifos-bash)来做到这一点。我通过这个命名管道运行了启动 Weblogic 服务器的命令。然后我让另一个进程读取管道，当我看到启动字符串时，我跳出循环并继续我的程序。

上面的链接应该为您提供完整的指导。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:01:53.640

```
pid=$! { sleep 20 ; kill $pid; } 
```

你想做什么？也许只是在之前添加一个分号`{`会有所帮助？

# gwt - 我如何获得 GWT CellTable 的垂直滚动条

> ID：10430128
> 
> 赞同：1
> 
> 时间：2012-05-03T11:08:34.920
> 
> 标签：gwt, gwt2

我需要 GWT CellTable 的滚动条。以下是我的ui.xml，

```
<gwt:SplitLayoutPanel>
  <gwt:west size="200">
    <gwt:VerticalPanel>
     <gwt:HTMLPanel>
         <table>
            <tr>
               <td>
                  <gwt:Label>xxxx</gwt:Label>
               </td>
            </tr>
            <tr>
               <td>
                 **Here i need a CellTable with Vertical Scrollbar**
               </td>
            </tr>
         </table>
     </gwt:HTMLPanel>
  </gwt:VerticalPanel>
</gwt:west>
<gwt:center>
   <gwt:VerticalPanel />
</gwt:center>
</gwt:SplitLayoutPanel> 
```

我尝试使用 ScrollPanel --> VerticalPanel --> CellTable。但我没有得到 ScrollBar。谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:43:08.377

在这种情况下使用 VerticalPanel 有什么意义？将其替换为 UiBinder xml 文件中的[ScrollPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/ScrollPanel.html)。设置此 ScrollPanel 的*宽度*和*高度*（以像素为单位）（这非常重要！）并将 CellTable 放入其中：

```
<g:ScroollPanel pixelSize="200, 400">
   <c:CellTable ui:field="myCellList" />
</g:ScroollPanel> 
```

`200`- 面板的宽度（以像素为单位），`400`- 高度。

此时 CellTable 列表的大小必须大于 ScrollPanel 的大小。否则，不会出现滚动。

如果您需要垂直滚动，或者设置*宽度：*`100%`

```
<g:ScrollPanel  width="100%" height ="400px"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:13:00.737

如果您使用的是 Gwt 2.4，则将 CellTable 对象替换为 DataGrid 对象将为您提供所需的结果，而无需滚动面板。您可以在 gwt Showcase 中看到 celltable 和 datagrid 之间的区别（在单元格小部件下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:35:03.983

下面的代码对我有用 -

```
 <g:HTMLPanel>
    <g:VerticalPanel>
    <g:TabLayoutPanel barHeight="2" barUnit="EM" width="790px"
            height="500px">
            <g:tab>
                <g:header>Sample</g:header>
                <g:DockLayoutPanel>
                    <g:center>
                        <g:ScrollPanel>
                            <p1:CellTable ui:field="cellSampleTable" />
                        </g:ScrollPanel>                            
                    </g:center>                     
                </g:DockLayoutPanel>
            </g:tab>
            </g:TabLayoutPanel>
    </g:VerticalPanel>
</g:HTMLPanel> 
```

# android - 选中的列表项只显示一个值

> ID：10430132
> 
> 赞同：0
> 
> 时间：2012-05-03T11:08:42.617
> 
> 标签：android, string

我用一些字符串值填充了列表..然后在单击项目后...我能够看到所有选中项目的 Toast 消息...问题是我想将索引/字符串/位置移动到一个字符串并将其显示在下一个选项卡上...但是在下一个选项卡上它给了我我首先检查的项目...

```
protected void onListItemClick(ListView l, View v, int position, long id) {
        //final ViewHolder viewHolder = new ViewHolder();
        SparseBooleanArray sp=getListView().getCheckedItemPositions();

        String str="";
        for(int i=0;i<sp.size();i++)
        {
            str+=items[sp.keyAt(i)]+",";
        }
        Toast.makeText(this, ""+str, Toast.LENGTH_SHORT).show();

        Product.pro_selected= l.getItemAtPosition(position).toString();; 
```

我使用以下内容显示所有选定的项目..

```
txtPro=(TextView)findViewById(R.id.select_pro_name); 
                txtPro.setText(Product.pro_selected); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:49:01.723

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    ArrayList<String> itemSelected = new  ArrayList<String>();
    itemSelected.add(presidents[position]);
 } 
```

此代码从您导航到下一个活动/屏幕放置

```
 Intent i = new Intent(getApplicationContext(),Second.class);
    i.putStringArrayListExtra("SelectedItems", itemSelected);
    startActivity(i); 
```

在第二个活动中获取意图的值并使用它。

```
Intent intent = getIntent();
ArrayList<String> items = new ArrayList<String>();
items = intent.getStringArrayListExtra("SelectedItems"); 
```

这将向您显示所有选定的项目。

```
for (int i = 0; i < items.size(); i++) {

Toast.makeText(getApplicationContext(), String.valueOf(items.get(i)), Toast.LENGTH_SHORT).show();
} 
```

在列表中显示它们扩展了 ListActivity

```
ListView listView = getListView();
listView.setChoiceMode(listView.CHOICE_MODE_NONE);

setListAdapter(new ArrayAdapter<String>
                (this,android.R.layout.simple_list_item_1,items)); 
```

显示选定项目

```
 @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), items[position], Toast.LENGTH_SHORT).show();
        super.onListItemClick(l, v, position, id);
    } 
```

# javascript - 基于移动方向的图像高度

> ID：10430135
> 
> 赞同：2
> 
> 时间：2012-05-03T11:09:06.043
> 
> 标签：javascript, jquery, mobile, orientation, image-scaling

我有一个小型移动图片库的问题。当我将方向更改为纵向时，图像太大而无法显示在屏幕上。

当方向变为纵向时，是否可以使用一些 javascript 使图像适合屏幕？
在横向模式下，一切看起来都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:15:13.647

是的，您可以在不使用 JavaScript 的情况下使用[CSS3 媒体查询。](http://www.w3.org/TR/css3-mediaqueries/)

```
@media screen and (max-width: 450px) {
    img {
        width: 30%;
    }
} 
```

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:15:16.860

尝试这个：

```
@media screen and (orientation:portrait) {
    //your css code goes here
}

@media screen and (orientation:landscape) {
    //your css code goes here
} 
```

# javascript - JS 扩展方法的功能

> ID：10430140
> 
> 赞同：3
> 
> 时间：2012-05-03T11:09:33.103
> 
> 标签：javascript

我正在尝试扩展 2dcontext 对象的某些方法的功能，但是我无法让它按我想要的方式工作：我想覆盖一个方法，但我想从被覆盖的方法中调用原始方法，例如这：

```
//First get the original context
var ctx = canvas.getContext("2d");

//Create a class which uses ctx as it's prototype
var ExtendedContext = function (){};
ExtendedContext.prototype = ctx;

//And extend a method
ExtendedContext.prototype.fillRect = function(x, y, width, height) {
    //Do some stuff
    this.prototype.fillRect(x, y, width, height); //Doesn't work
    //Do some more stuff
}; 
```

如何`fillRect`从我自己的方法中调用原始方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:14:18.073

您可以像这样存储原始函数的引用：

```
var oldFillRect = ctx.fillRect; 
```

然后像这样称呼它

```
ExtendedContext.prototype.fillRect = function() {
    //Do some stuff
    oldFillRect.apply(this, arguments);
    //Do some more stuff
}; 
```

这种技术有时被称为“打鸭”或“功能挂钩”。在这种特殊情况下，您还应该能够使用该`Object.getPrototypeOf`方法来获取原始函数引用。这看起来像

```
ExtendedContext.prototype.fillRect = function() {
    //Do some stuff
    Object.getPrototypeOf(ExtendedContext.prototype).fillRect.apply(this, arguments);
    //Do some more stuff
}; 
```

因此，您甚至不需要存储参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:26:21.433

无需将旧名称保存在单独的对象中，使用闭包：

```
ExtendedContext.prototype.fillRect = (function () {
  var oldf = ExtendedContext.prototype.fillRect;
  return function () {
    //Do some stuff
    oldf.apply (this, arguments);
    //Do some more stuff
  };
}) (); 
```

如果您有很多事情要做，这可能会有所帮助：

```
function extend (fnc) {
  var mthd = (fnc.toString ().match (/^function\s+(\w+)\s*\(/) || ['', ''])[1];

  if (mthd in ExtendedContext.prototype)
    throw ('ExtendContext method ' + mthd + 'does not exist');  

  ExtendedContext.prototype['_' + mthd] = ExtendedContext.prototype[mthd];
  ExtendedContext.prototype[mthd] = fnc;
} 
```

然后你可以按如下方式调用extend

```
extend (function fillrect () {    
  // Do some stuff
  this._fillrect.apply (this, arguments);
  // Do some more stuff
}); 
```

要引用旧方法，请使用以“_”为前缀的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T15:45:55.053

我迟到了几个月，但我正在使用一个相当简单的设计来完成这个功能。我们的 JavaScript 的结构运行在一个全局对象上，以保证我们的代码不受全局变量的影响。

对于每个页面/用户控件，我们正在修改我们的全局对象以保存一个新对象，但是有些代码在不同的地方需要不同的功能，需要扩展方法。我们不想复制代码并为扩展实例重新定义整个对象，我们也不希望代码关心它是如何被扩展的。

为什么不创建一个通用的扩展方法呢？使用我们的案例，这里是一个例子：

```
// Using a Global JavaScript object:
GlobalNameSpace.ExtensionFunction = function(oParam1, oParam2, oParam3)
{
   /// <summary>All parameters are optional</summary>

   return; // For instances when it is not being overwritten, simply return
}

//In the Code to be extended:
GlobalNameSpace.Control.ControlFunction(oSender, oArgs)
{
    ///<summary>Control's function</summary>

    // Function-y stuff..
    GlobalNameSpace.ExtensionFunction(oSender, oArgs);
}

//and finally in the code to extend the functionality
GlobalNameSpace.Page.Init
{
    ///<summary>Initializes the page</summary>

    // redefine the extension function:
    GlobalNameSpace.ExtensionFunction = function(oSender, oArgs)
    {
        // Call the extension function, or just code the extension here
        GlobalNameSpace.Page.Function(oSender, oArgs); 
    }
} 
```

此方法的缺点是如果您想一次对多个对象执行此操作，此时将扩展方法移动到您特别想要扩展的代码中可能是一个更好的主意。这样做会使扩展代码不那么通用，但这可以根据您的需要来决定。

# c++ - 错误：“。”之前的预期不合格 ID 令牌

> ID：10430147
> 
> 赞同：3
> 
> 时间：2012-05-03T11:09:58.963
> 
> 标签：c++, compiler-errors

```
class A
{
    private:
        A () {}

    public:
        static A* getInstance ()
        {
            return new A ();
        }
};

int main ()
{
    A.getInstance ();
    return 0;
} 
```

导致标题中所述的错误。我确实意识到，如果我在 A 类中创建一个变量并在那里实例化它并直接返回它，错误就会消失。

但是，在这里我想了解这个错误的含义是什么，为什么我不能这样使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T11:10:46.483

您需要使用范围解析运算符调用该方法 - `::`：

```
 A::getInstance (); 
```

另外，如果这是一个单例，那是一个非常糟糕的。每当您调用`getInstance()`时，您都会收到一个新对象，如果您忘记删除任何实例，您将遇到内存泄漏。

单例通常是这样实现的：

```
class A
{
    private:
        A () {}
        static A* instance;
    public:
        static A* getInstance ()
        {
            if ( !instance )
                instance = new A ();
            return instance;
        }
};

//implementation file
A* A::instance = NULL; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T11:11:11.550

使用范围解析运算符`::`（`.`例如，不像 Java 中的那样）：

```
A::getInstance(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T11:23:53.107

`getInstance`是类的静态函数`A`。调用类的静态函数的正确形式是`<class_name>::<static_function_name>`.

我们还可以通过创建类的对象并使用`.`运算符来调用静态函数： `<class_object>.<static_function_name>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:11:34.507

`.`您可以使用或调用静态成员函数`::`。但是，如果您使用类名，则需要使用后者和对象，然后使用前者。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T11:12:46.377

使用范围解析运算符**::**

例如

```
class::methodName() 
```

# eclipse - Restful 服务请求源不可用

> ID：10430152
> 
> 赞同：0
> 
> 时间：2012-05-03T11:10:31.747
> 
> 标签：eclipse, maven, jersey

我正在尝试使用**Jersey Maven**和**Eclipse开发一个基本的****Restful 服务**。

 ****我正在按照[此处](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)给出的示例进行操作。

我按照链接中给出的步骤进行操作，但是当我尝试运行该项目时出现`Request Resource Not available`错误。

这是我在 pom.xml 文件中修改的依赖项

```
 <dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>
<dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency>
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>servlet-api</artifactId>
  <version>2.4</version>
  <scope>provided</scope>
 </dependency> 
```

并在 pom.xml 中修改 Build

```
<finalName>maven.secondrest</finalName>
<plugins>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <version>1.0-beta-1</version>
        <configuration>
            <port>9999</port>
            <path>/</path>
                <warFile>${project.basedir}/target/${project.build.finalName}.war</warFile>
        </configuration>
    </plugin>
</plugins> 
```

web.xml 与示例中给出的非常相似：

```
<display-name>Restful Web Application</display-name>

<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>
        com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
    <init-param>
         <param-name>com.sun.jersey.config.property.packages</param-name>
         <param-value>rest.model</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

这是更改的java代码：

```
package rest.model;
//imports
@Path("/hello")
public class HelloWorldService {
@GET
@Path("/{param}")
public Response getMsg(@PathParam("param") String msg) {
    String output = "Jersey say : " + msg;
    return Response.status(200).entity(output).build();
}
} 
```

我正在尝试使用以下方法运行它：**mvn tomcat:run**

当我输入**localhost:9999**时，它会显示一条消息“Hello World”。但是当我输入示例中给出的 url 时，我得到一个找不到资源的错误。

这是我运行的网址：**http://localhost:9999/maven.secondrest/rest/hello/nelo**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:51:17.820

我似乎错误地使用了 URL。访问此服务的正确 URL 是**localhost:9999/rest/hello/nelo**。也就是说，省略插件中已经提到的项目名称。****

# tfs - 如何将文本添加到工作项

> ID：10430156
> 
> 赞同：2
> 
> 时间：2012-05-03T11:10:43.593
> 
> 标签：tfs, tfs-workitem

我们有一些错误和变更请求，它们具有复杂的迭代路径。这导致团队中的人们经常问“我们在哪里筹集物品”。

由于您无法在 TFS 2010 中为迭代路径设置默认值，我们认为最好的解决方案是在字段下添加一串文本，我们可以每 7 周手动更新一次，使用正确的区域来提升项目。

然而，TFS 似乎不允许其工作项上的一行文本作为控件。有没有办法添加一行显示文本，即不是您编辑的字段，而只是通知那些编写项目的人？

请注意，它需要始终可见，在这种情况下，使用控件上的工具提示“帮助文本”字段是不够的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:07:27.443

为此，您可以使用[LabelControl](http://msdn.microsoft.com/en-us/library/aa337625.aspx)。

您不能在迭代路径的工作项中设置默认值，但您可以使用[Web 访问中的模板 url](http://www.ewaldhofman.nl/post/2009/05/06/Initial-values-in-a-work-item.aspx)或[电动工具中的工作项模板](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)来创建一个预先填充了值的工作项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:44:13.403

带有只读显示控件的自定义字段呢？您可以为该字段提供默认值，并且“只读”控件可防止其他人更改它。

# objective-c - LLDB：对象的类别是什么？

> ID：10430158
> 
> 赞同：3
> 
> 时间：2012-05-03T11:10:51.660
> 
> 标签：objective-c, xcode4, lldb

有没有办法在 LLDB 中找出对象的类，而对象本身由`id`. 类似的东西`isKindOfClass`，它返回它实际上是什么类，而不仅仅是`id`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T11:17:09.807

它似乎`po [myObject class]`有效。如果有人有更好的解决方案，请发布。

# java - Selenium 不使用具有受信任 SSL 证书的 FF 配置文件

> ID：10430162
> 
> 赞同：0
> 
> 时间：2012-05-03T11:11:17.600
> 
> 标签：java, selenium

我在 FF 中创建了 Selenium 配置文件，并在其中接受了 SSL 证书。当我启动 Selenium 测试时，它会在 /tmp 文件夹中创建 customProfileDir 并尝试使用 Cyber​​VillainCA 证书而不是我需要的证书。我可以在每次测试时接受此证书，并且每次启动测试时都应重新接受。

我使用以下 arg 行：

```
-firefoxProfileTemplate ${PATH_TO_FIREFOX_PROFILE} -trustAllSSLCertificates 
```

但在我看来，它不起作用。

如何修复？

补充资料：

操作系统：Linux

火狐：12.0

硒 IDE：1.8.0

硒服务器：2.21.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:10:14.420

如果您接受了配置文件中的证书并使用该配置文件运行测试，则不需要 -trustAllSSLCertificates 参数。

> 尝试删除 -trustAllSSLCertificates 并查看它是否有效。

我已经看到，当您提供 -trustAllSSLCertificates 和 firefox 配置文件模板时，它不起作用。但是，如果您从配置文件文件夹中删除文件**cert8.db 和 cert_override.txt（在您接受 SSL 证书时创建）** -trustAllSSLCertificates 工作正常。

# c# - 直接上传图片到推特

> ID：10430165
> 
> 赞同：5
> 
> 时间：2012-05-03T11:11:25.220
> 
> 标签：c#, windows-phone-7, twitter

我需要帮助在 Windows Phone 7 中将图像直接上传到 twitter。

我已经完成了 twitter 的 oauth 流程，也可以更新推文，但我无法使用 wp7 将图像上传到 twitter？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T11:09:59.027

我已经通过使用 Hammock.WindowsPhone.Mango 库为此制定了解决方案。（TweetSharp 在内部使用 Hammock 库来实现 oAuth 和其他功能，但我从未使用过 TweetSharp 或 Twitterizer）

我已经从[Nuget安装了最新版本的 Hammock](http://nuget.org/packages/Hammock)

然后使用以下代码将照片上传到 Twitter：

```
public void uploadPhoto(Stream photoStream, string photoName)
{
var credentials = new OAuthCredentials
        {
            Type = OAuthType.ProtectedResource,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            ConsumerKey = TwitterSettings.consumerKey,
            ConsumerSecret = TwitterSettings.consumerKeySecret,
            Token = TwitterSettings.accessToken,
            TokenSecret = TwitterSettings.accessTokenSecret,
            Version = "1.0a"
        };

        RestClient restClient = new RestClient
        {
            Authority = "https://upload.twitter.com",
            HasElevatedPermissions = true,
            Credentials = credentials,
            Method = WebMethod.Post
         };
         RestRequest restRequest = new RestRequest
         {
            Path = "1/statuses/update_with_media.json"
         };

         restRequest.AddParameter("status", tbxNewTweet.Text);
         restRequest.AddFile("media[]", photoName, photoStream, "image/jpg");

}

    restClient.BeginRequest(restRequest, new RestCallback(PostTweetRequestCallback));
}

private void PostTweetRequestCallback(RestRequest request, Hammock.RestResponse response, object obj)
{
        if (response.StatusCode == System.Net.HttpStatusCode.OK)
        {
        //Success code
        }
} 
```

这里，photoName 是所选图像的名称（“e.OriginalFileName”） photoStream 是来自 PhotoChooserTask 的“e.ChosenPhoto”

并且应该注意 .AddFile() 的第四个参数（我在做这个示例时没有考虑其他格式，你必须在你的应用程序中小心）

我希望这有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:50:15.537

LINQ to Twitter 支持 WP7 并有一个 TweetWithMedia 方法，其工作方式如下：

```
 private void PostButton_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrWhiteSpace(TweetTextBox.Text))
            MessageBox.Show("Please enter text to tweet.");

        ITwitterAuthorizer auth = SharedState.Authorizer;
        if (auth == null || !auth.IsAuthorized)
        {
            NavigationService.Navigate(new Uri("/OAuth.xaml", UriKind.Relative));
        }
        else
        {
            var twitterCtx = new TwitterContext(auth);

            var media = GetMedia();

            twitterCtx.TweetWithMedia(
                TweetTextBox.Text, false, StatusExtensions.NoCoordinate, StatusExtensions.NoCoordinate, null, false,
                media,
                updateResp => Dispatcher.BeginInvoke(() =>
                {
                    HandleResponse(updateResp);
                }));
        }
    } 
```

乔

# java - 地图嵌套在集合中.. 获取 Map 2D 的 values() 集

> ID：10430185
> 
> 赞同：0
> 
> 时间：2012-05-03T11:12:51.927
> 
> 标签：java, collections, map, hashmap

（重新定义方法

```
public Collection<String> values(); 
```

)

我有一个地图包含在另一个地图中，所以它是这样的：

```
Map<String,Map<String,String>> centralMap 
```

（实习地图是subjectGradeMap）我现在想用这个方法：

```
public Collection<String> values() 
```

获取包含地图所有值的集合。我试过：

```
Collection<String> returncoll = centralMap.values().values(); 
```

但它没有用。也试过这个：

```
Collection<Map<String,String>> collec = centralMap.values();
Collection<String> returncollection = collec.values(); 
```

但徒劳：-S

那个问题解决了谢谢！现在我想问你是否有想法，我应该如何实现Iterator方法？

```
/**
* Returns an Iterator, that pass through all the entries of the map. If
* something changes in the map, when it is being passed through all its'
* entries by the Iterator, we can't determinate the behaviour that will
* happen..
*
* @return An Iterator that pass through all entries. Every entry will be
*         returned as String-Tripel with its' three Elements row, column
*         and value.
*/
@Override
public Iterator<Entry> iterator() {
return null;
} 
```

你有想法吗？

Entry 类如下，（在我用来创建 TrueStringMap2D 对象的接口中实现：

```
final class Entry
    {       
       /** First Key. */
        private final String key1;

       /** Second Key. */
        private final String key2;

       /** Value. */
        private final String value;

       /** Ctor for a tripel.
        * @param key1 1st key.
        * @param key2 2nd key.
        * @param value Value.
        */
        public Entry(final String key1, final String key2, final String value)
        {
            this.key1 = key1;
            this.key2 = key2;
            this.value = value;
        }

        public String getFirstKey()
        {
            return key1;
        }

        public String getSecondKey()
        {
            return key2;
        }

        public String getValue()
        {
                return value;
        }

        @Override public boolean equals(final Object anything)
        {
            if(anything == null)
                return false;
            if(getClass() != anything.getClass())
                return false;
            final Entry that = (Entry)anything;
            return Objects.equals(getFirstKey(), that.getFirstKey())
                   && Objects.equals(getSecondKey(), that.getSecondKey())
                   && Objects.equals(getValue(), that.getValue());
        }

        // CHECKSTYLE- Magic Number
        @Override public int hashCode()
        {
            int hash = 7;
            hash = 17 * hash + Objects.hashCode(getFirstKey());
            hash = 17 * hash + Objects.hashCode(getSecondKey());
            hash = 17 * hash + Objects.hashCode(getValue());
            return hash;
        }
        // CHECKSTYLE+ Magic Number

        @Override public String toString()
        {
            return String.format("(%s, %s, %s)", getFirstKey(), getSecondKey(), getValue());
            }

    } 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:16:58.947

`centralMap.values()`给你一个 Collection，Collection 没有`values()`. `centralMap.values()`本质上返回一个地图列表。因此，为了评估这些地图中的每一个，您需要迭代：

```
for (Map map : cetralMap.values()) {
    Collection values = map.values();
    // do something with your values here
} 
```

要从包含的所有映射中构建所有值的集合`centralMap`：

```
List myGrandList = new ArrayList();
for (Map map : centralMap.values()) {
    myGrandList.addAll(map.values());
}
return myGrandList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:27:58.053

您可以使用`MultiKeyMap`（来自Apache 的[Commons-Collections](http://commons.apache.org/collections/)）：

```
MultiKeyMap<String, String> map;
map.put("Key1", "Key2", "Value");
map.put("Key1", "Key3", "Value2");

for (Entry<MultiKey<String>, String> entry : map.entrySet()) {
    // TODO something
} 
```

它有两个版本：

*   原版：[http ://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiKeyMap.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiKeyMap.html)
*   *通用*版本（更好）： http : [//sourceforge.net/projects/collections](http://sourceforge.net/projects/collections)

# java - 数组列表 插入（java）

> ID：10430186
> 
> 赞同：1
> 
> 时间：2012-05-03T11:13:05.640
> 
> 标签：java, arraylist

我应该如何将双精度插入 ArrayList 的特定部分？例如，我们有一个 ArrayList，其中有十个双精度数，每个双精度数为 0，我们想让第六名成为 10，我们应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:15:28.590

使用`ArrayList.set()`方法：

```
公共 E 集（整数索引，
             E元素）

替换此列表中指定位置的元素
与指定的元素。

```

例如：

```
list.set(5, new Double(10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:15:35.827

刚刚使用了索引的`add`.

```
list.add(6, 10D); 
```

**编辑：**

但是如果你想*替换*指定索引处的值（而不是插入一个新的），我建议你遵循[@hmjd 的](https://stackoverflow.com/a/10430225/343955)解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:16:04.173

请参阅文档：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)

```
void add(int index, Object element); 
```

在此列表中的指定位置插入指定元素。

# mfc - 如何将 VisualStudio 11 主题应用于我的 MFC 应用程序？

> ID：10430189
> 
> 赞同：0
> 
> 时间：2012-05-03T11:13:22.973
> 
> 标签：mfc

新的 VS 11 具有酷炫的灰色风格用户界面。我可以将它应用到我的 MFC 应用程序吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:18:03.540

MFC 控件及其外观的最后“更新”是 MFC 功能包，如下所述：http: [//msdn.microsoft.com/en-us/library/bb982354.aspx](http://msdn.microsoft.com/en-us/library/bb982354.aspx)

不幸的是，它不包括 VS 2011 样式，但也许您会发现其他对您的应用程序感兴趣的东西（例如功能区等）。

他们没有包含控件的图片，您只能在他们的示例应用程序中查看它们，您可以在此处下载

[http://msdn.microsoft.com/en-us/library/bb983962.aspx](http://msdn.microsoft.com/en-us/library/bb983962.aspx)

或通过谷歌图片搜索

[http://www.google.com/search?q=mfc+feature+pack](http://www.google.com/search?q=mfc+feature+pack)

# entity-framework-4 - 从插入中排除列

> ID：10430191
> 
> 赞同：0
> 
> 时间：2012-05-03T11:13:36.153
> 
> 标签：entity-framework-4, ef-code-first

有没有办法在 Code First 中映射列，以便在选择时填充它，但在插入或更新时不使用？

如果我应用 [NotMapped] 注释，则不会填充属性/列，但是如果我不添加此注释，则在插入时，它会抱怨该列不存在。

我问的原因是我有一个查询，它执行连接并返回列的值，但在插入时，不需要此列。

有任何想法吗？

干杯

编辑：

只是一个更新，以更详细地解释我在做什么。

以前，我有两张桌子，

```
Carer
    CarerID
    UserID
    IsPrimary

User
    UserID 
```

但是后来，要求一个 Carer 可以属于多个 User，所以我必须创建一个链接表，如下所示。

```
UserCarer
    UserCarerID
    UserID
    CarerID
    IsPrimary 
```

我不想做的是，我暂时解决这个问题的方法是在我的实体中创建一个方法，然后初始化另一个上下文以获取值。

相反，我希望当我选择数据时，我会执行左连接以`IsPrimary`从 UserCarer 表中获取值，从而允许我保留对`Carer.IsPrimary`

IE`select * from Carer.*, UserCarer.IsPrimary from Carer left join UserCarer on Carer.CarerID = UserCarer.CarerID where UserCarer.UserID = @p0`

高温高压

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:01:30.507

仅当您将列标记为计算列或标识列（插入时自动生成）时才有可能，但它有另一个后果 - EF 将在更新或插入后尝试选择该列，因此如果它在您的表中不存在，您仍然会得到一个错误。

看起来您正在尝试填充不是实体的类，并且此类类不能用于持久性！如果您在查询中有自定义联接，则意味着您正在对数据进行投影/查看，结果很可能不是实体 = 不应用于保存更改。

# sql-server-2008-r2 - 返回值时，SQL Server 2008 R2 的行数需要更多时间

> ID：10430193
> 
> 赞同：2
> 
> 时间：2012-05-03T11:13:42.807
> 
> 标签：sql-server-2008-r2

我有一个使用视图的存储过程。存储过程接受各种参数。

我试过了：

```
SELECT 
    COUNT(v.CampaignID) as RecordCount
FROM 
    VW_Results_ValueRank_2010_12_22_NEW V                        
INNER JOIN 
    ResultTopic ON V.ResultID = ResultTopic.ResultId    
INNER JOIN 
    CampaignTopic on ResultTopic.topicid = CampaignTopic.topicid         
WHERE 
    v.CampaignID = 37                        
    AND v.CreateDate BETWEEN 'May  3 2011  8:25PM' AND 'May  3 2012  8:25PM'                        
    AND v.SourceDate BETWEEN DATEADD(d,-3,'May  3 2011  8:25PM') AND 'May  3 2012  8:25PM' 
    AND (LEFT(Title, 80) LIKE '%google%' OR Domain LIKE '%google%' OR LEFT([Text], 300) LIKE '%google%') 
```

它返回 2016 年的记录，但需要 40-50 秒，我可以将这个时间减少到 5-10 秒吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:23:28.350

您可以通过查看执行计划并创建它们来检查丢失的索引。

如果所有 indexex 都存在并且无法在表上创建索引，那么您可以在 where 子句中为 CreateDate 、 SourceDate 和其他列创建索引视图。

[参考这个链接](http://technet.microsoft.com/en-us/library/cc917715.aspx)

# android - 是否可以在android中显示一个活动到另一个活动之间的进度条切换

> ID：10430197
> 
> 赞同：0
> 
> 时间：2012-05-03T11:13:54.970
> 
> 标签：android, progress-bar

从活动切换到另一个活动时是否可以显示进度条。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:23:26.793

尝试这个！！！！

ProgressDialog pd = new ProgressDialog(FirstActivity.this);

//在调用意图之前使用它

pd.setMessage("处理中...");

pd.show();

//在firstActivity的onResume中调用

pd.dismiss();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:16:51.350

您必须在第二个活动中显示进度条，因为第一个活动将被隐藏并且无论如何都不会显示。

# extjs - Extjs网格列渲染功能，访问外部存储

> ID：10430200
> 
> 赞同：1
> 
> 时间：2012-05-03T11:13:58.017
> 
> 标签：extjs, grid, store

我有 2 家商店和 1 个网格面板。一个商店分配给网格，另一个在我的应用程序开始时加载了记录。

现在，我的问题是，当我对网格面板中的列使用渲染函数时，我想访问其他商店的记录。但是，其他存储并不总是准备就绪，并且在渲染时刻并不总是充满记录。

这个问题有哪些可能的解决方案？

非常感谢你，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:18:15.373

在渲染网格之前加载第二个存储。似乎有什么问题？

更新：您需要确保 store2 在 store1 之前加载。你可以这样做：

*   不要在视图定义中首先将 store1 绑定到您的网格。分配所有列和其他东西，但保留存储`null`
*   在`afterrender`事件控制器中，您将处理程序分配给您调用的 store2`load`事件`store1.load()`
*   做`store2.load()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T11:20:14.003

我知道一家商店依赖于另一家商店？如果是这样，从第一个商店中选择一个项目时加载第二个商店。或者，您可以创建一个方法来查看用于填充商店的数据并找到您需要的东西。

# sql - SQL 查询以显示 Wordpress 中每个用户的登录计数

> ID：10430213
> 
> 赞同：0
> 
> 时间：2012-05-03T11:14:50.757
> 
> 标签：sql, wordpress

我想要一个显示每个用户登录到 Wordpress 的次数的查询。结果将是这样的：

```
User  | Login_count
------------------
user1 | 2
------------------
user2 | 5
------------------
user3 | 0 
```

ETC..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:48:15.553

这应该可以帮助您入门：

```
add_action('wp_login', 'db_increment');
function db_increment($login)
{
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T19:00:33.390

最好使用`update_user_meta`创建单独的 SQL 查询来实现这样一个简单的功能。

代码（functions.php）看起来像：

```
function my_handle_login($username, $user) {
    $login_count = intval(get_user_meta($user->ID, 'user_count', true));

    $login_count++;
    update_user_meta($user->ID, 'user_count', $login_count);

}
add_action('wp_login', 'my_handle_login', 10, 2);

function new_modify_user_table( $column ) {
    $column['counter'] = 'Logins Count';
    return $column;
}
add_filter( 'manage_users_columns', 'new_modify_user_table' );

function new_modify_user_table_row( $val, $column_name, $user_id ) {
    $user = get_userdata( $user_id );
    switch ($column_name) {
        case 'counter' :
            return get_the_author_meta( 'user_count', $user_id );
            break;
        default:
    }
    return $return;
}
add_filter( 'manage_users_custom_column', 'new_modify_user_table_row', 10, 3 ); 
```

# c# - DbContext 因 PrimitiveType != null 错误而崩溃

> ID：10430223
> 
> 赞同：5
> 
> 时间：2012-05-03T11:15:21.613
> 
> 标签：c#, entity-framework-4

首先使用实体​​框架代码，Web 应用程序在调用 DbContext 时崩溃，并出现以下错误：

> 断言失败
> 
> 表达式：primitiveType != null
> 
> 说明：断言失败：primitiveType != null

它在以下代码行崩溃：

```
public class MyDb : DbContext { 
```

由以下方式调用：

```
MyDb _db = new MyDb(); 
```

所以它看起来像调用 DbContext 会产生一个致命错误。DbContext 是一个 EF 函数，我无法在 EntityFramework.dll 中进行调试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:06:34.170

这是与旧版本的 EntityFramework 相关的问题。有时在将 Visual Studio 项目复制到另一台机器时会发生这种情况。这可能会导致应用程序计算出不同于数据库中的 ModelHash（在 EdmMetaData 表中）。解决方案是删除 EdmMetaData 表`DbDatabase.SetInitializer<MyContext>( new DropCreateDatabaseIfModelChanges<MyContext>());`并将其放回原处，甚至更好：升级到不使用 EdmMetaData 表和 ModelHashes 的较新版本的 EntityFramework。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:02:47.493

安装 asp.net4.5 后我有同样的错误。我的答案是将实体框架更新到新版本。

删除“EdmMetaData”表并没有解决错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:55:44.703

我切换到 linq to sql 并得到这个错误。不知道实体正在做什么来导致这种情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-03T13:45:22.933

您需要更新 EntityFramework 版本

# magento - 自定义编辑文件上传字段

> ID：10430231
> 
> 赞同：1
> 
> 时间：2012-05-03T11:15:44.803
> 
> 标签：magento, magento-1.5

我在管理 html 中的管理客户中创建了一个自定义编辑字段，并且还在数据库表 customer_entity 属性名称中创建了一个字段为 Upload_Logo_Cst。但是现在当我通过管理员将值存储在其中时，输入的值不会存储在 Upload_Logo_Cst 中。PLA帮助我提供适当的解决方案...

```
$fieldset->addField('customer_entity/Upload_Logo_Cst', 'File', array(
            'label' => Mage::helper('customer')->__('Upload Logo'),
            'name'  => 'uploadlogo',
            'id'    => 'uploadlogo',

        )); 
```

# jquery - jquery ajax 返回错误对象

> ID：10430237
> 
> 赞同：0
> 
> 时间：2012-05-03T11:16:05.783
> 
> 标签：jquery, ajax

提交表单时，我需要使用 jquery 对 php 文件执行 ajax 请求。我写了这段代码：

```
$.ajax({
           type: 'POST',
           url: 'send_password.php',
           data: 'mail_to='+ $('input[name$="email"]').val()+'&new_password='+new_password,
           success: function(response){
               alert(response);
           },
           error: function(r){
               alert(r);
               return false;
           }
       }); 
```

问题是这个函数返回错误，所以我收到一条警告消息，其中包含“[Object object]”消息并且表单转到操作页面并且不会停止，就像它没有看到 return false 行（之后警报（r））。我能怎么做？谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:25:39.960

如果你想在请求完成之前暂停你的脚本，你应该使用 async:false。[http://jsfiddle.net/Z8sRF/](http://jsfiddle.net/Z8sRF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:20:57.043

改变这个

```
data: 'mail_to='+ $('input[name$="email"]').val()+'&new_password='+new_password, 
```

到

```
data: 'mail_to='+ $("#email").val()+'&new_password='+new_password, 
```

它应该可以工作

你能把id加进去吗？

# c# - Stackoverflow 数据库结构 - 表上有类似情况

> ID：10430239
> 
> 赞同：1
> 
> 时间：2012-05-03T11:16:22.080
> 
> 标签：c#, asp.net, sql-server, database-design

stackoverlow 数据库结构在某处可用吗？

我正面临这样一种情况，即我有 Table1 与有关某事的信息和 Table2 与有关 Table1 的数字信息的 1:n 关系。就像我们在这里有关于堆栈溢出的用户和答案。

我需要快速访问数字信息的总和（比如 SO 可以快速访问用户的声誉总和），我想知道是否在 Table1 上添加一列来存储总和并在每次更新 table2 时更新它每次需要该信息时，我都会汇总 table2 上的所有记录。

SO也有同样的情况，而且似乎处理得很好。我想知道他们使用哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:23:09.617

是的，我们将其非规范化为我们随时间更新的数据库字段。我们*过去*常常通过执行连接/求和来进行重新计算（它偶尔会漂移），但这很痛苦——而且我们一开始不喜欢它不同步。所以现在，我们保留了一个*特定*的商店来记录随着时间​​的推移而发生的声誉变化——更直接和准确的历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:24:53.003

您的情况*不是*由帖子、回复和代表之间的 SO 关系定义的。您有一个完全通用的数据库情况，您需要对与标题记录关联的值求和。

你有两种常用的方法来解决这个要求

1.  当您需要值时，使用 SQL 可用的聚合方法对值求和
2.  添加新行时对值求和，并将其存储在标题中

两者各有利弊，但主要考虑1个权衡

1.  保持数据完整性 (pro)，性能受阻 (con)
2.  可能的数据损坏（con），性能不受阻碍（pro）

# objective-c - 为什么不需要释放一些对象？

> ID：10430241
> 
> 赞同：0
> 
> 时间：2012-05-03T11:16:25.403
> 
> 标签：objective-c, memory-management

如果我为任何对象分配内存，有时我必须运行 deallocate。但是如果我声明变量（例如 NSString）并且不分配如下：

```
NSString* myStr = [NSString stringWithContentsOfFile:@"file.xml" ....]; 
```

如果我尝试解除分配，为什么会出现错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:19:28.463

`stringWithContentsOfFile`是 NSString 的一个方便的方法来处理它。

有关您做什么和不需要发布的说明，请参阅[此答案。](https://stackoverflow.com/questions/607222/how-do-i-resolve-exc-bad-access-errors-encountered-in-iphone-development/4581151#4581151)

# android - 如何从android中的活动外部启动的活动堆栈中清除活动？

> ID：10430242
> 
> 赞同：0
> 
> 时间：2012-05-03T11:16:37.890
> 
> 标签：android, android-activity, activity-stack

我有一个广播接收器类，它启动一些对话活动，比如带有意图标志 Intent.FLAG_ACTIVITY_NEW_TASK 的 A，因为我正在从外部 Activity 开始活动（即使我的应用程序没有运行）并且每个人都这样做。**

## 案子 ：

** 我运行我的应用程序并关闭它。一些事件触发广播和广播接收器将捕获并启动对话活动 A，然后用户通过完成它来取消它。**这是问题所在：**用户尝试从主页按钮启动应用程序，然后打开对话框活动而不是主要活动。

任何建议将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:22:12.457

您可以检查意图[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)、[FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)或[FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)。

# symfony - Symfony2：如何在模拟用户帐户时显示管理员帐户名称？

> ID：10430244
> 
> 赞同：6
> 
> 时间：2012-05-03T11:16:42.377
> 
> 标签：symfony, twig

我想显示类似的东西：

**案例1：“以用户身份登录”**

> > @用户名 [注销]

这里没有问题，我只是这样做：

*@ {{ app.user.username}} [ <a href="{{ path("logout") }}">注销</a> ]*

**案例2：“以管理员身份登录”**

> > @AdminName [注销]

在这里同样有效：

*@ {{ app.user.username}} [ <a href="{{ path("logout") }}">注销</a> ]*

**案例 3：“以 ADMIN 身份登录冒充用户”**

> > AdminName@UserName [返回]

现在这是一个问题：

{{ **??..这里是什么..??** }} @ {{ app.user.username}} [ <a href="{{ (app.request.getRequestUri ~ '?_switch_user=_exit') }}">return</a> ]

这是我所知道的唯一解决方案......显示用户名的 sipmle 似乎有很多代码：/

```
{# iterating through user roles to find ROLE_PREVIOUS_ADMIN #}
{% for role in app.security.token.roles %}
  {% if role.source is defined %}
    {{ role.source.user.username }}
 {% endif %}
{% endfor %}
@ {{ app.user.username }} [ <a href="{{ (app.request.getRequestUri ~ '?_switch_user=_exit') }}">return</a> ] 
```

**还有其他方法吗？**我需要一个纯 TWIG 解决方案 -> 这应该是我的主要树枝模板的一部分（由所有其他模板扩展）-> 我不能将控制器代码添加到所有操作，只是为了显示用户名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:35:21.100

有了你上面提出的想法，..你能不能只创建一个自定义 twig 扩展来包含你的 twig 模板中的逻辑，这样你就可以`myCustomTwigFunction`在你的 twig 模板中调用它并输出原始用户名？

有关自定义树枝扩展的更多信息，请参阅[http://symfony.com/doc/current/cookbook/templating/twig_extension.html](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

您在 Twig 扩展文件中的代码将是...

```
$roles = $this->container->get('security.context')->getToken()->getRoles();
foreach ($roles as $role) {
    if (method_exists($role, 'getSource')) {
        return ($role->getSource()->getUser()->getUsername());
    }
} 
```

其中 $container 是 DI Container 在您的 twig 扩展类上的类变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-08T00:16:52.530

对于正在寻找 Symfony 4.3/4.4/5.0 解决方案的任何人：

```
{% if is_granted('ROLE_PREVIOUS_ADMIN') %}
    {% for role in app.token.roles %}
        {% if role.role == 'ROLE_PREVIOUS_ADMIN' %}
            Admin username is {{ role.source.user.username }}
        {% endif %}
    {% endfor %}
{% endif %} 
```

从 Symfony 5.1 开始，使用`IS_IMPERSONATOR`.`ROLE_PREVIOUS_ADMIN`

# qwt - QWT：重新绘制而不删除以前的点

> ID：10430255
> 
> 赞同：2
> 
> 时间：2012-05-03T11:17:12.597
> 
> 标签：qwt

我正在使用 QWT 6，我试图每秒绘制一些点。为此，我使用以下代码：

```
d_plot_dots->setRawSamples(_realDataPoints, _imagDataPoints, size);
plot->replot(); 
```

我想支持暂停选项，因此前几秒的点在绘图中仍然可见。对此的一种解决方案是每秒调整保存点的数组的大小，附加新值并再次调用`setRawSamples()`和`replot()`，但这种解决方案的内存效率不高，因为我必须每秒钟存储至少 2 * 2048 个点。

有没有更有效的方法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:50:57.667

解决方案是使用directPainter。按照 QWT 的实时示例，我执行了以下操作：

首先，我创建了辅助类 CurveData。

```
class CurveData: public QwtArraySeriesData<QPointF>
{
public:
  CurveData()
  {
  }

  virtual QRectF boundingRect() const
  {
    if ( d_boundingRect.width() < 0.0 )
      d_boundingRect = qwtBoundingRect( *this );

    return d_boundingRect;
  }

  inline void replace(double *x, double *y, int size)
  {
    if(d_samples.size() != size){
      d_samples.resize(size);
    }
    for(int i = 0; i < size; i++){
      d_samples.replace(i, QPointF(x[i], y[i]));
    }
  }

  void clear()
  {
    d_samples.clear();
    d_samples.squeeze();
    d_boundingRect = QRectF( 0.0, 0.0, -1.0, -1.0 );
  }
}; 
```

然后在我的绘图代码中：

```
void
PlottingClass::plotHoldOnPoints(int size)
{
   CurveData *data = static_cast<CurveData *>( d_curve->data() );
   data->replace(_realDataPoints, _imagDataPoints, size);
   d_direct_painter->drawSeries(d_curve, 0, data->size() -1);
} 
```

并且具有最小内存消耗的保持效果已准备就绪！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T06:18:52.327

是为数据点使用数据容器并向它们附加一些值的最简单方法，您将获得所需的绘图

像这样：在某些方法中，你积累数据

```
m_vctTime.append(xTime);
m_vctValue.append(yPower); 
```

进而

```
curve->setSamples(m_vctTime,m_vctValue);
curve->attach(plot);
plot->updateAxes();    
plot->replot(); 
```

# objective-c - 带有 MapView 的 TabBar 应用程序（我必须在哪里下载信息以及如何在 MapView 中显示该信息？））

> ID：10430256
> 
> 赞同：0
> 
> 时间：2012-05-03T11:17:15.980
> 
> 标签：objective-c, uitabbarcontroller, nsurlconnection

我的应用包含在带有 MapView 和 TableView 这样的控制器的 TabBarController 中。要在视图中显示的信息必须通过 NSURLConnection 下载，并且需要很长时间。我有以下疑问：

我将有一个类（NSObject）来下载数据并解析它。但是地图（带有注释）和表格都需要显示此信息。

*   我必须在哪里下载数据？在其他问题之间，地图在下载数据之前出现，那么如何使用注释更新地图？

**更新：**

好吧，也许我需要解释得更好。我的应用使用反向用户位置下载信息，因此在 AppDelegate.m 中我使用 locationManager。locationManagerDelegate 符合 Downloader.m（通过 NSURLConnection 获取信息）。到目前为止，mapView 出现在屏幕上，当然是空的，因为它没有信息，所以 annotations 属性是空的。下载器完成信息下载后，我需要在地图中设置注释。卜如何。我的意思是，我在 Downloader.m 中没有 mapViewController 的实例。我创建的地方是在 appDelegate 中。我的大问题是我必须执行任务的地方（appDelegate.m、Downloader.m、mapViewController.m），因为我将同时拥有 mapView 和 tableView，我需要为两者下载的信息其中。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:06:00.460

好的，我会根据我的理解尝试回答你的问题:)

我假设您正在使用 NSURLConnection 的委托方法，您的最终方法是：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

这是您要处理所有数据的地方，因为这种方法意味着所有数据都已从服务器检索。

因此，对于您对注释的最终答案，因为您将通过 NSURLConnection 检索数据，而不是实现您的代码，例如：

```
MKCoordinateSpan coordinateSpan = MKCoordinateSpanMake(0.01, 0.01);
MKCoordinateRegion coordinateRegion = MKCoordinateRegionMake(centerPoint, coordinateSpan);

[noteMap setRegion:coordinateRegion];
[noteMap regionThatFits:coordinateRegion]; //this is the center and region of your map

MyLocation *annotation = [[MyLocation alloc] initWithName:"annotation-name" address:"your-subtitle" coordinate:cordPoint] ; //this is an annotation class that i implemented
["your-map-view" addAnnotation:annotation]; //this is the method for adding annotation 
```

我希望上面的代码符合您的要求..

# c# - 我想让自定义方法成为使用 T 类型的通用方法

> ID：10430264
> 
> 赞同：0
> 
> 时间：2012-05-03T11:17:42.207
> 
> 标签：c#, .net, wpf

我有这两种方法

```
public static void NavigateAndExecute(Node root, Action<Node> actionToExecute)
{
    if (root == null || root.Children == null || root.Children.Count == 0)
        return;
    actionToExecute(root);
    foreach (var node in root.Children)
    {
        actionToExecute(node);
        NavigateAndExecute(node, actionToExecute);
    }
}
public static void NavigateAndExecute(List<Node> root, Action<Node> actionToExecute)
{
    if (root == null || root.Count == 0)
        return;
    foreach (var node in root)
    {                
        NavigateAndExecute(node, actionToExecute);
    }
} 
```

节点类是

```
public class Node
{
    public String Name { get; set; }
    public List<Node> Children { get; set; }
} 
```

这两个方法只适用于 Node 类，可以使它们适用于任何类型的 T 任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:23:44.860

您可以为此创建一个静态扩展方法，`IEnumerable<T>`该方法需要一个*子选择器* `Func<T, IEnumerable<T>>`：

```
 public static void TraverseAndExecute<T>(this IEnumerable<T> items, Func<T, IEnumerable<T>> selector, Action<T> actionToExecute)
    {
        if (items != null)
        {
            foreach (T item in items)
            {
                actionToExecute(item);
                TraverseAndExecute(selector(item), selector, actionToExecute);
            }
        }
    } 
```

与您的`Node`班级一起使用：

```
List<Node> nodes = // ...
nodes.TraverseAndExecute(n => n.Children, n => /* action here */); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:21:39.070

我看到您正在访问`node.Children`似乎是特定于`Node`该类的属性。所以你的代码不能简单地通过将方法转换为通用方法来工作。

但是，您可以使用以下通用约束来实现此目的：

```
public static void NavigateAndExecute<T>(List<T> root, Action<T> actionToExecute) where T: Node 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:36:45.347

我想你想要一些我以前实施过的东西。`Name2`请注意在 main 方法中使用新属性。

```
public static class Tree<N>
    where N : Tree<N>.Node
{
    public class Node
    {
        public String Name { get; set; }
        public List<N> Children { get; set; } 
    }

    public static void NavigateAndExecute(N root, Action<N> actionToExecute)
    {
        if (root == null)
            return;
        actionToExecute(root);

        if (root.Children == null || root.Children.Count == 0)
            return;
        NavigateAndExecute(root.Children, actionToExecute);
    }

    public static void NavigateAndExecute(List<N> root, Action<N> actionToExecute)
    {
        if (root == null || root.Count == 0)
            return;
        foreach (var node in root)
        {
            NavigateAndExecute(node, actionToExecute);
        }
    } 

}

public class Node2 : Tree<Node2>.Node
{
    public string Name2 { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var root = new Node2();
        Tree<Node2>.NavigateAndExecute(root, n => {
            Console.WriteLine(n.Name2);
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:43:50.090

你想要一个通用树集合。我一年前写的，我已经开源了：

[http://simplygenius.net/Article/TreeCollection2](http://simplygenius.net/Article/TreeCollection2)

我知道反对使用 Tree 数据结构的论点，但有时它们正是您所需要的。

# c# - 绑定到 DataTable 的 DataGridViewComboBoxColumn 上的 DataError

> ID：10430265
> 
> 赞同：2
> 
> 时间：2012-05-03T11:17:43.673
> 
> 标签：c#, data-binding, datagridview, datatable, datasource

我发现了几个具有类似问题的主题，但内容似乎略有不同，因此我无法解决我的问题。

在我的应用程序中，我有包含 4 列的 DataTable：

*   UInt16
*   UInt64
*   UInt64
*   由 2 个值组成的自定义枚举类型。

为了显示这个 DataTable 的值，我创建了一个 DataGridView 并将这个表设置为数据源。到现在为止还挺好。我希望枚举字段列包含组合框，但遇到了 DataGridViewComboBoxColumn 类型。我在让它工作时遇到了一些问题，但最终使用了以下方法：

```
// Create the 4 datarows

// Add the datarows to the data table

// Set the data table as the data source for the data grid view

// Remove the column that represents the enumeration

// Add a DataGridViewComboBoxColumn to the DataGridView as replacement 
```

我创建了 DataGridViewComboBoxColumn，如下所示：

```
DataGridViewComboBoxColumn cb = new DataGridViewComboBoxColumn();
cb.HeaderText   = "My header text";
cb.ValueType    = typeof(MyEnumType);
cb.DataSource   = Enum.GetValues(typeof(MyEnumType));
cb.FlatStyle    = FlatStyle.System;
cb.Name         = "Name"; //Same name as the DataColumn and the now deleted DataGridViewColumn
cb.DataPropertyName = "Name"; //Same name as the DataColumn and the now deleted DataGridViewColumn
cb.DisplayStyle     = DataGridViewComboBoxDisplayStyle.Nothing;

dataGridView.Columns.Add(cb); 
```

一旦我的应用程序启动，我就从一个文本文件中读取数据，该文本文件被放入具有上述 4 种数据类型字段的结构中。然后，我将这些字段添加到 DataTable，如下所示：

```
DataRow row = dataTable.NewRow();
row["Name of the UInt16 column"]    = mystruct.theUInt16;
row["Name of the UInt64 column"]    = mystruct.theUInt64;
row["Name of the UInt64 column"]    = mystruct.theUInt64_2;
row["Name of the enum column"]      = mystruct.theEnumValue;               
dataTable.Rows.Add(row); 
```

在启动时 DataError 事件被重复调用。然而，单元格的内容确实被正确填充。（我在几次单击错误后看到了这一点）禁用 DataError 事件（例如分配一个空处理程序）是我不想做的事情。

我认为某种程度上存在某种类型的不匹配。（也许是枚举类型和一个用于显示的字符串？）但这只是一个猜测。dataTable 列和 datagridview 列都将类型设置为枚举。

我希望有人能指出我正确的方向。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:07:50.623

与其添加和删除最后一列，不如在然后更改类型时监听[`ColumnAdded`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnadded.aspx)事件：`DataGridView`

```
dataGridView.ColumnAdded += DataGridViewColumnAdded;
dataGridView.DataSource = dataTable;

private void DataGridViewColumnAdded(Object sender, DataGridViewColumnEventArgs e) 
{
   if(e.Column.ValueType == typeof(MyEnumType)) 
   {
      DataGridViewComboBoxCell cb = new DataGridViewComboBoxCell();
      cb.ValueType        = typeof(MyEnumType);
      cb.DataSource       = Enum.GetValues(typeof(MyEnumType));
      cb.FlatStyle        = FlatStyle.System;
      cb.DisplayStyle     = DataGridViewComboBoxDisplayStyle.Nothing;
      e.Column.CellTemplate = cb;
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:46:17.783

我设法找到了适合我需要的解决方法。该方法仍然与我原来的帖子相同。我给DataTable中的枚举命名为“colMyEnumTypeTable”，数据类型是字符串而不是MyEnumType。然后我删除了这个列并添加了名为“colMyEnumType”的DataGridViewComboBoxColumn，DataPropertyName为“colMyEnumTypeTable”，并且也是字符串类型。然后在将枚举值添加到数据表时将它们转换为字符串，并在提取时使用 Enum.Parse 再次检索枚举值。不再进行 DataError 调用。

-edit- 我给 DataTable 和 DataGridViewComboBoxColumn 指定了不同的名称，以确保不会导致问题。我现在已将它们改回来，因此它们具有相同的名称，并且仍然有效。

-edit2- 而不是设置组合框列的 DataSource 属性，我通过将枚举值添加到 Items 属性来添加它们。（转换为字符串后）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T11:52:32.153

将枚举直接分配给带有数据表的组合框给出“值无效”错误的原因是 DataGridViewComboBoxColumn 中的枚举与 DataRow 中的整数值之间的类型差异（枚举始终作为其基础类型存储在一个 DataRow，无论列类型是否设置为枚举类型）。例如，如果您`row["Name of the enum column"]` 在调用后回读，`row["Name of the enum column"] = mystruct.theEnumValue;`
则它不是您刚刚分配的枚举，而是它的基础值。这篇文章：[DataGridView 与基于枚举的 Combobox 列链接到 DataTable](https://stackoverflow.com/questions/17972291/datagridview-linked-to-datatable-with-combobox-column-based-on-enum)有一个使用键值数据源的替代解决方案。

# asp.net - 将 SQL Server Compact 4.0 与 Windows Mobile 6.0 和 ASP.NET 3.5 一起使用

> ID：10430268
> 
> 赞同：0
> 
> 时间：2012-05-03T11:17:49.820
> 
> 标签：asp.net, sql-server-ce, windows-mobile-6

我创建了一个 ASP.NET 3.5 网站并通过第三方模板向其中添加了移动表单（因为 VS 设计器不再支持旧模板）。现在我想在我的应用程序中使用一些数据库处理，这将使用 Windows Mobile 6.0 模拟器进行测试。我编写了以下代码以使用 SQL Server Compact CE 4.0 以编程方式创建数据库：

```
SqlCeEngine engine = new SqlCeEngine("Data Source=Program Files\\Calculator\\Calc.sdf;password=abcd");
engine.CreateDatabase(); 
```

但是，无论我如何调整路径，我总是会收到错误消息，“路径无效。检查数据库的目录”。我尝试了连接字符串的各种组合，但徒劳无功。没有任何效果。

编辑：我在这里和其他地方也看到了关于这个问题的各种其他线程，但在这种情况下似乎没有任何解决问题的方法。我什至尝试了其他文件夹，如我的文档，如下所示，但它不起作用：

```
SqlCeEngine engine = new SqlCeEngine("Data Source='\\My Documents\\Calculator\\Calc.sdf';password=abcd"); 
```

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:04:31.837

我没有收到任何答案，但最终我自己想通了。似乎 .sdf 只能从我部署应用程序的本地机器/服务器访问。因此，路径将与服务器相关，在这种情况下，我的本地计算机。

因此对我来说，这是成功运行的代码：

```
path = Server.MapPath("~/App_Data");

SqlCeEngine engine = new SqlCeEngine("Data Source='" + path + "\\Calculator.sdf';password=abcd"); 
```

# ajax - 如何在MVC3中通过ajax调用局部视图

> ID：10430269
> 
> 赞同：1
> 
> 时间：2012-05-03T11:17:50.443
> 
> 标签：ajax, asp.net-mvc-3, asp.net-mvc-ajax

我正在 MVC3 中开发一个应用程序我需要在单击下拉菜单时显示一个部分视图为此我编写了一个 ajax，

```
 $("#UserName").change(function () {
        var userid = $("#UserName").val();
        var ProvincialStateID = $("#State").val();
        var Hobbyid = $("#Hobby").val();
        var Districtid = $("#DistrictNames").val();
        var Homeid = $("#Hobbyhome_EstablishmentId").val();
        var urlperson = '@Url.Action("FetchPersonByUserName")';
        $.ajax({
            type: "POST",
            url: urlperson,
            data: { userid: userid, stateid: ProvincialStateID, hobbyid: Hobbyid, districtid: Districtid, homeid: Homeid },
            success: function (data) {
            }
        });
    }); 
```

我在控制器中编写了一个函数：

```
 [HttpPost]
    public ActionResult FetchPersonByUserName(int userid,int stateid,int districtid,int homeid,int Hobbyid)
    {
        //Code to fetch data using all the parameters
        return PartialView("_LearnerAssociationGridPartial", list);
    } 
```

从这里它进入局部视图，我也可以看到数据
但是当它进入前端时，我无法看到数据。
请帮助我，也许我的 ajax 可能是错误的，请告诉我我哪里出错了。

这是我的主视图：

```
@model HobbyHomesWebApp.ViewModel.LearnerAssociationViewModel
@{
    Layout = "~/Views/Shared/_LayoutPostLogin.cshtml";
}

@using (Html.BeginForm("LearnerAssociation", "Registration", FormMethod.Post))
{
     @Html.ValidationSummary(true)
     <table>
         <div>
             @{Html.RenderPartial("_LearnerAssociationWebPartial", Model.learner);}
         </div> 
     </table>
     <table>
         <div id="result">
             @{Html.RenderPartial("_LearnerAssociationGridPartial", Model.LearnerList);}
         </div>
     </table>
} 
```

ajax函数写在第一个视图中，下拉菜单在第一个视图中。
现在单击第一个视图中的下拉菜单，我希望数据显示在第二个视图中的网格中。

我的第一个观点是：

```
@using (Html.BeginForm("LearnerAssociation", "Registration", FormMethod.Post))
{
  <table>
    <tr>
        <td>
            @Html.Label(@Resources.selectusername)
        </td>
        <td>:</td>
        <td>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Loginaccount.LoginAccountID, new SelectList(ViewBag.UserName, "LoginAccount.LoginAccountID", "FirstName"), "--Select UserName--", new { @id = "UserName" })
        </div>
        </td>
    </tr>
            </table> 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:12:35.693

编辑：好的，如果我理解正确，您的视图应如下所示：

```
@model HobbyHomesWebApp.ViewModel.LearnerAssociationViewModel
@{
    Layout = "~/Views/Shared/_LayoutPostLogin.cshtml";
}

@using (Html.BeginForm("LearnerAssociation", "Registration", FormMethod.Post))
{
     @Html.ValidationSummary(true)
     <table>
         <tr>
         <td>
            <div>
                 @{Html.RenderPartial("_LearnerAssociationWebPartial", Model.learner);}
            </div> 
         </td>
         </tr>
     </table>
     <table>
         <tr>
         <td> 
             <div id="result">

            </div>
         </td>
         </tr>
     </table>
} 
```

这意味着当您第一次加载页面时，第二个页面不会显示任何内容`div`。

然后，您希望`div`根据所选值将局部视图加载到 中。首先，添加 javascript 以调用您已经描述的操作。

```
$('#NameOfYourDropDownList').change(function () {
    var userid = $('#NameOfYourDropDownList').val();
    var ProvincialStateID = $("#State").val();
    var Hobbyid = $('#Hobby').val();
    var Districtid = $('#DistrictNames').val();
    var Homeid = $('#Hobbyhome_EstablishmentId').val();
    var urlperson = "@Url.Action('FetchPersonByUserName')";
    $.ajax({
        type: 'POST',
        url: urlperson,
        data: { userid: userid, stateid: ProvincialStateID, hobbyid: Hobbyid, districtid: Districtid, homeid: Homeid },
        success: function (data) {
            $('#result').html(data);
        }
    });
}); 
```

将`ActionResult`返回 HTML。在您的成功函数中，您将其指定为`div`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:10:31.910

我希望我明白你想要什么（如果我没有，请不要开枪）

让我们假设您有一个标签

```
<div id="Returned-Content-Container">
</div> 
```

我会提出2个建议（选择你喜欢的）

Razor 引擎，MVC 风格：

当您使用代码创建表单时：

```
@using (Html.BeginForm("LearnerAssociation", "Registration", FormMethod.Post)) 
```

将 FormMethod.Post 替换为

```
@using (Html.BeginForm("LearnerAssociation", "Registration", 
        new AjaxOptions() 
                            {
                                HttpMethod = "POST",
                                UpdateTargetId = "Returned-Content-Container",
                                InsertionMode = InsertionMode.Replace
                            })
        {
              // Your form fields go here
        } 
```

这样做是在返回数据时将定义的标记替换为从 ajax 调用返回的数据。自动地。

这种方式是用剃须刀引擎来做的。

如果您想以 jquery 方式执行此操作，请执行以下操作：

```
$("#UserName").change(function () {
    var userid = $("#UserName").val();
    var ProvincialStateID = $("#State").val();
    var Hobbyid = $("#Hobby").val();
    var Districtid = $("#DistrictNames").val();
    var Homeid = $("#Hobbyhome_EstablishmentId").val();
    var urlperson = '@Url.Action("FetchPersonByUserName")';
    $.ajax({
        type: "POST",
        url: urlperson,
        data: { userid: userid, stateid: ProvincialStateID, hobbyid: Hobbyid, districtid: Districtid, homeid: Homeid },
        success: function (data) {
             // This places all data returned into the defined DOM element
             $('#Returned-Content-Container').html(data);
        }
    });
}); 
```

希望这可以帮助，

祝你好运 ！

# mysql - Innodb 不接受外键

> ID：10430272
> 
> 赞同：0
> 
> 时间：2012-05-03T11:18:13.990
> 
> 标签：mysql, foreign-keys, innodb

我们无法运行下面的查询。我们有另一个名为“person”的表，它有一个主键 person_id。如您所见，我们试图将此列作为我们（客户表的）外键。phpMyAdmin 返回 #1064 语法错误。这里出了什么问题？

```
CREATE  TABLE IF NOT EXISTS `resort`.`customers` (
  `person_id` VARCHAR(45) NOT NULL ,
  `cid` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  UNIQUE INDEX `person_id_UNIQUE` (`cid` ASC) ,
  PRIMARY KEY (`person_id`) ,
  UNIQUE INDEX `person_id_UNIQUE` (`person_id` ASC) ,
  CONSTRAINT `person_id`
    FOREIGN KEY ()
    REFERENCES `resort`.`person` ()
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB 
```

顺便说一下，这个查询是由 Oracle 的 MySQL Workbench 生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:21:05.653

您需要在约束定义中包含列：

```
CONSTRAINT person_id
  FOREIGN KEY ()
  REFERENCES resort.person()
  ON DELETE CASCADE
  ON UPDATE CASCADE 
```

应该：

```
CONSTRAINT fk_person_id
  FOREIGN KEY (person_id)
  REFERENCES resort.person (id)
  ON DELETE CASCADE
  ON UPDATE CASCADE 
```

# android - Lint 警告我所有版本都不支持 API 访问，但它在任何地方都可以使用？

> ID：10430275
> 
> 赞同：2
> 
> 时间：2012-05-03T11:18:15.793
> 
> 标签：android, android-layout, android-lint

Lint 多次给我这个错误：

```
"match_parent" requires API level 8 (current min is 4), use "fill_parent" instead 
```

我理解错误。我`match_parent`在我的应用程序使用的所有 XML 布局中都使用它，并且从不使用它，`fill_parent`因为它已被弃用。但是，正如您从上面的错误中可以理解的那样，my`minSdkVersion`是 4 并且`match_parent`仅在 8 上可用。

问题是，我在 Cupcake 模拟器上运行了我的应用程序，并且该应用程序运行良好。为什么？它不应该崩溃吗？

解决这个问题的正确方法是什么，忽略所有 XML 文件的这个特定的 Lint 错误，或者只是放回`fill_parent`任何地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:26:30.387

> 为什么？

因为它们具有相同的数值，并且该值是 APK 文件中的最终结果，而不是符号。

> 解决这个问题的正确方法是什么，忽略所有 XML 文件的这个特定的 Lint 错误，或者只是把 fill_parent 放回任何地方？

对于您知道自己正确使用了这些东西的 lint 警告，您可以[在 Java 中添加注释（以及 XML 中的类似标记）](http://tools.android.com/recent/ignoringlintwarnings)，表明您知道自己在做什么，并且 lint 将不再抱怨。

# javascript - 在 Javascript 中扩展对象

> ID：10430279
> 
> 赞同：178
> 
> 时间：2012-05-03T11:18:40.273
> 
> 标签：javascript, function, object, prototype, extends

我目前正在从`Java`to转换`Javascript`，我很难弄清楚如何按照我想要的方式扩展对象。

我在互联网上看到有几个人使用了一种名为 extend on object 的方法。代码将如下所示：

```
var Person = {
   name : 'Blank',
   age  : 22
}

var Robot = Person.extend({
   name : 'Robo',
   age  : 4
)}

var robot = new Robot();
alert(robot.name); //Should return 'Robo' 
```

有谁知道如何使这项工作？我听说你需要写

```
Object.prototype.extend = function(...); 
```

但我不知道如何使这个系统工作。如果不可能，请告诉我另一个扩展对象的替代方法。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-05-03T11:55:08.443

您想从 Person 的原型对象“继承”：

```
var Person = function (name) {
    this.name = name;
    this.type = 'human';
};

Person.prototype.info = function () {
    console.log("Name:", this.name, "Type:", this.type);
};

var Robot = function (name) {
    Person.apply(this, arguments);
    this.type = 'robot';
};

Robot.prototype = Person.prototype;  // Set prototype to Person's
Robot.prototype.constructor = Robot; // Set constructor back to Robot

person = new Person("Bob");
robot = new Robot("Boutros");

person.info();
// Name: Bob Type: human

robot.info();
// Name: Boutros Type: robot 
```

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2015-02-02T16:08:18.567

# 使用 Object.create() 实现更简单的“类似散文”的语法

## 以及 Javascript 的真正原型性质

> *此示例针对 ES6 类和 TypeScript 进行了更新。

**首先，Javascript 是一种[原型语言](https://alistapart.com/article/prototypal-object-oriented-programming-using-javascript/)**，不是基于类的。它的真实性质以下面的原型形式表达，您可能会看到它非常简单，像散文一样，但功能强大。

### TLDR；

## Javascript

```
const Person = { 
    name: 'Anonymous', // person has a name
    greet: function() { console.log(`Hi, I am ${this.name}.`) } 
} 

const jack = Object.create(Person)   // jack is a person
jack.name = 'Jack'                   // and has a name 'Jack'
jack.greet()                         // outputs "Hi, I am Jack." 
```

## 打字稿

在 TypeScript 中，您将需要设置接口，这些接口将在您创建`Person`原型的后代时进行扩展。突变`politeGreet`显示了在后代上附加新方法的示例`jack`。

```
interface Person {
    name: string
    greet(): void
}

const Person =  {
    name:  'Anonymous',  
    greet() {
        console.log(`Hi, I am ${this.name}.`)
    }
}

interface jack extends Person {
    politeGreet: (title: 'Sir' | 'Mdm') => void
}

const jack: jack = Object.create(Person)
jack.name = 'Jack'
jack.politeGreet = function(title) {
    console.log(`Dear ${title}! I am ${this.name}.`)
}
jack.greet()  // "Hi, I am Jack."
jack.politeGreet('Sir') // "Dear Sir, I am Jack." 
```

**这消除了有时令人费解的构造函数模式。**新对象继承自旧对象，但能够拥有自己的属性。如果我们试图从新对象（`#greet()`）中获取新对象`jack`缺少的成员，则旧对象`Person`将提供该成员。

用[Douglas Crockford 的话来说：“对象继承自对象。还有什么比这更面向对象的呢？”](https://www.crockford.com/javascript/prototypal.html)

您不需要构造函数，也不需要`new`实例化。您只需创建对象，然后扩展或变形它们。

此模式还提供[不变性（部分或全部）](https://medium.com/better-programming/javascript-prevent-objects-from-being-changed-d1ca82f02975)和[getters/setters](https://javascript.info/property-accessors)。

干净利落。它的简单性不会影响功能。继续阅读。

## 创建 Person 的后代/副本`prototype`（技术上比 更正确`class`）。

> *注意：以下示例是在 JS 中。要使用 Typescript 编写，只需按照上面的示例设置输入接口即可。

```
const Skywalker = Object.create(Person)
Skywalker.lastName = 'Skywalker'
Skywalker.firstName = ''
Skywalker.type = 'human'
Skywalker.greet = function() { console.log(`Hi, my name is ${this.firstName} ${this.lastName} and I am a ${this.type}.`

const anakin = Object.create(Skywalker)
anakin.firstName = 'Anakin'
anakin.birthYear = '442 BBY'
anakin.gender = 'male' // you can attach new properties.
anakin.greet() // 'Hi, my name is Anakin Skywalker and I am a human.'

Person.isPrototypeOf(Skywalker) // outputs true
Person.isPrototypeOf(anakin) // outputs true
Skywalker.isPrototypeOf(anakin) // outputs true 
```

如果你觉得丢弃构造函数而不是直接赋值不太安全，一种常见的方法是附加一个`#create`方法：

```
Skywalker.create = function(firstName, gender, birthYear) {

    let skywalker = Object.create(Skywalker)

    Object.assign(skywalker, {
        firstName,
        birthYear,
        gender,
        lastName: 'Skywalker',
        type: 'human'
    })

    return skywalker
}

const anakin = Skywalker.create('Anakin', 'male', '442 BBY') 
```

## `Person`将原型分支到`Robot`

当您`Robot`从原型分支后代时`Person`，您不会影响`Skywalker`and `anakin`：

```
// create a `Robot` prototype by extending the `Person` prototype:
const Robot = Object.create(Person)
Robot.type = 'robot' 
```

**附加独特的方法`Robot`**

```
Robot.machineGreet = function() { 
    /*some function to convert strings to binary */ 
}

// Mutating the `Robot` object doesn't affect `Person` prototype and its descendants
anakin.machineGreet() // error

Person.isPrototypeOf(Robot) // outputs true
Robot.isPrototypeOf(Skywalker) // outputs false 
```

**在 TypeScript 中，您还需要扩展`Person`接口：**

```
interface Robot extends Person {
    machineGreet(): void
}
const Robot: Robot = Object.create(Person)
Robot.machineGreet = function() { console.log(101010) } 
```

### 你可以拥有 Mixins——因为……Darth Vader 是人类还是机器人？

```
const darthVader = Object.create(anakin)
// for brevity, property assignments are skipped because you get the point by now.
Object.assign(darthVader, Robot) 
```

**Darth Vader 获得以下方法`Robot`：**

```
darthVader.greet() // inherited from `Person`, outputs "Hi, my name is Darth Vader..."
darthVader.machineGreet() // inherited from `Robot`, outputs 001010011010... 
```

**除了其他奇怪的事情：**

```
console.log(darthVader.type) // outputs robot.
Robot.isPrototypeOf(darthVader) // returns false.
Person.isPrototypeOf(darthVader) // returns true. 
```

**这优雅地反映了“现实生活”的主观性：**

> “他现在比人更像机器，扭曲而邪恶。” ——欧比旺·克诺比

> “我知道你有好处。” - 卢克·天行者

### 与 ES6 之前的“经典”等价物相比：

```
function Person (firstName, lastName, birthYear, type) {
    this.firstName = firstName 
    this.lastName = lastName
    this.birthYear = birthYear
    this.type = type
}

// attaching methods
Person.prototype.name = function() { return firstName + ' ' + lastName }
Person.prototype.greet = function() { ... }
Person.prototype.age = function() { ... }

function Skywalker(firstName, birthYear) {
    Person.apply(this, [firstName, 'Skywalker', birthYear, 'human'])
}

// confusing re-pointing...
Skywalker.prototype = Person.prototype
Skywalker.prototype.constructor = Skywalker

const anakin = new Skywalker('Anakin', '442 BBY')

// #isPrototypeOf won't work
Person.isPrototypeOf(anakin) // returns false
Skywalker.isPrototypeOf(anakin) // returns false 
```

### ES6 类

与使用对象相比更笨拙，但代码可读性还可以：

```
class Person {
    constructor(firstName, lastName, birthYear, type) {
        this.firstName = firstName 
        this.lastName = lastName
        this.birthYear = birthYear
        this.type = type
    }
    name() { return this.firstName + ' ' + this.lastName }
    greet() { console.log('Hi, my name is ' + this.name() + ' and I am a ' + this.type + '.' ) }
}

class Skywalker extends Person {
    constructor(firstName, birthYear) {
        super(firstName, 'Skywalker', birthYear, 'human')
    }
}

const anakin = new Skywalker('Anakin', '442 BBY')

// prototype chain inheritance checking is partially fixed.
Person.isPrototypeOf(anakin) // returns false!
Skywalker.isPrototypeOf(anakin) // returns true 
```

# 进一步阅读

**可写性、可配置性和免费的获取器和设置器！**

对于免费的 getter 和 setter，或额外的配置，您可以使用 Object.create() 的第二个参数，即 propertiesObject。它也可用于[#Object.defineProperty](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)和[#Object.defineProperties](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties)。

为了说明它的用处，假设我们希望所有东西都`Robot`严格由金属制成（通过`writable: false`），并标准化`powerConsumption`值（通过 getter 和 setter）。

```
 // Add interface for Typescript, omit for Javascript
interface Robot extends Person {
    madeOf: 'metal'
    powerConsumption: string
}

// add `: Robot` for TypeScript, omit for Javascript.
const Robot: Robot = Object.create(Person, {
    // define your property attributes
    madeOf: { 
        value: "metal",
        writable: false,  // defaults to false. this assignment is redundant, and for verbosity only.
        configurable: false, // defaults to false. this assignment is redundant, and for verbosity only.
        enumerable: true  // defaults to false
    },
    // getters and setters
    powerConsumption: {
        get() { return this._powerConsumption },
        set(value) { 
            if (value.indexOf('MWh')) return this._powerConsumption = value.replace('M', ',000k') 
            this._powerConsumption = value
            throw new Error('Power consumption format not recognised.')
        }  
    }
})

// add `: Robot` for TypeScript, omit for Javascript.
const newRobot: Robot = Object.create(Robot)
newRobot.powerConsumption = '5MWh'
console.log(newRobot.powerConsumption) // outputs 5,000kWh 
```

**并且所有原型`Robot`都不能是`madeOf`别的东西：**

```
const polymerRobot = Object.create(Robot)
polymerRobot.madeOf = 'polymer'
console.log(polymerRobot.madeOf) // outputs 'metal' 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2013-11-04T20:38:55.283

如果您还没有想出办法，请使用 JavaScript 对象的关联属性将扩展函数添加到`Object.prototype`如下所示。

```
Object.prototype.extend = function(obj) {
   for (var i in obj) {
      if (obj.hasOwnProperty(i)) {
         this[i] = obj[i];
      }
   }
}; 
```

然后，您可以使用此功能，如下所示。

```
var o = { member: "some member" };
var x = { extension: "some extension" };

o.extend(x); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2016-01-15T08:33:14.450

**在 ES6**中，您可以使用扩展运算符，例如

```
var mergedObj = { ...Obj1, ...Obj2 }; 
```

> 请注意， Object.assign() 会触发 setter，而传播语法则不会。

有关更多信息，请参阅链接，[MDN -Spread Syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals)

* * *

**旧答案：**

**在 ES6**中，有`Object.assign`用于复制属性值。`{}`如果您不想修改目标对象（传递的第一个参数），请用作第一个参数。

```
var mergedObj = Object.assign({}, Obj1, Obj2); 
```

有关更多详细信息，请参阅链接，[MDN - Object.assign()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill)

如果您需要**ES5 的 Polyfill**，该链接也提供了它。:)

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2014-08-04T16:42:37.897

# 不同的方法：[Object.create](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)

根据@osahyoun 的回答，我发现以下方法是从 Person 的原型对象“继承”的更好、更有效的方法：

```
function Person(name){
    this.name = name;
    this.type = 'human';
}

Person.prototype.info = function(){
    console.log("Name:", this.name, "Type:", this.type);
}

function Robot(name){
    Person.call(this, name)
    this.type = 'robot';
}

// Set Robot's prototype to Person's prototype by
// creating a new object that inherits from Person.prototype,
// and assigning it to Robot.prototype
Robot.prototype = Object.create(Person.prototype);

// Set constructor back to Robot
Robot.prototype.constructor = Robot; 
```

创建新实例：

```
var person = new Person("Bob");
var robot = new Robot("Boutros");

person.info(); // Name: Bob Type: human
robot.info();  // Name: Boutros Type: robot 
```

现在，通过使用[Object.create](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)：

```
Person.prototype.constructor !== Robot 
```

还要检查[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)文档。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2014-01-22T15:09:13.520

又过了一年，我可以告诉你还有另一个不错的答案。

如果您不喜欢原型设计以扩展对象/类的方式，请查看：[https ://github.com/haroldiedema/joii](https://github.com/haroldiedema/joii)

可能性的快速示例代码（以及更多）：

```
var Person = Class({

    username: 'John',
    role: 'Employee',

    __construct: function(name, role) {
        this.username = name;
        this.role = role;
    },

    getNameAndRole: function() {
        return this.username + ' - ' + this.role;
    }

});

var Manager = Class({ extends: Person }, {

  __construct: function(name)
  {
      this.super('__construct', name, 'Manager');
  }

});

var m = new Manager('John');
console.log(m.getNameAndRole()); // Prints: "John - Manager" 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-10-08T11:02:53.667

仍在为简单和最佳方法而奋斗的人，可以**`Spread Syntax`**用于扩展对象。

```
var person1 = {
      name: "Blank",
      age: 22
    };

var person2 = {
      name: "Robo",
      age: 4,
      height: '6 feet'
    };
// spread syntax
let newObj = { ...person1, ...person2 };
console.log(newObj.height);
```

**注意：**请记住，最右边的属性将具有优先权。在此示例中，`person2`位于右侧，因此其中`newObj`将包含名称**Robo**。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-05-03T12:45:39.983

您可能需要考虑使用像[underscore.js](http://underscorejs.org/)这样的辅助库，它有[自己的`extend()`](http://underscorejs.org/#extend).

通过查看它的源代码，这也是一种学习的好方法。带注释的[源代码页面](http://underscorejs.org/docs/underscore.html)非常有用。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-04-09T11:30:26.717

Mozilla '宣布' 从 ECMAScript 6.0 扩展的对象：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/extends](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/extends)

注意：这是一项实验性技术，是 ECMAScript 6 (Harmony) 提案的一部分。

```
class Square extends Polygon {
  constructor(length) {
    // Here, it calls the parent class' constructor with lengths
    // provided for the Polygon's width and height
    super(length, length);
    // Note: In derived classes, super() must be called before you
    // can use 'this'. Leaving this out will cause a reference error.
    this.name = 'Square';
  }

  get area() {
    return this.height * this.width;
  }

  set area(value) {
    this.area = value;     } 
} 
```

该技术在 Gecko (Google Chrome / Firefox) - 03/2015 nightly builds 中可用。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-03-14T18:26:40.020

在大多数项目中，都有一些对象扩展的实现：下划线、jquery、lodash：**extend**。

还有纯 javascript 实现，它是 ECMAscript 6 的一部分：*Object.assign*： [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-02-19T06:43:08.563

```
Function.prototype.extends=function(ParentClass) {
    this.prototype = new ParentClass();
    this.prototype.constructor = this;
} 
```

然后：

```
function Person() {
    this.name = "anonym"
    this.skills = ["abc"];
}
Person.prototype.profile = function() {
    return this.skills.length // 1
};

function Student() {} //well extends fom Person Class
Student.extends(Person)

var s1 = new Student();
s1.skills.push("")
s1.profile() // 2 
```

# 更新 01/2017：

请忽略我对 2015 年的回答，因为 Javascript 现在支持`extends`自 ES6 以来的关键字（Ecmasctipt6）

### - ES6：

```
class Person {
   constructor() {
     this.name = "anonym"
     this.skills = ["abc"];
   }

   profile() {
    return this.skills.length // 1
   }

}

Person.MAX_SKILLS = 10;
class Student extends Person {

} //well extends from Person Class

//-----------------
var s1 = new Student();
s1.skills.push("")
s1.profile() // 2 
```

### - ES7：

```
class Person {
    static MAX_SKILLS = 10;
    name = "anonym"
    skills = ["abc"];

    profile() {
      return this.skills.length // 1
    }

}
class Student extends Person {

} //well extends from Person Class

//-----------------
var s1 = new Student();
s1.skills.push("")
s1.profile() // 2 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-09-07T11:55:35.623

简单易读的解决方案是使用扩展运算符

```
... 
```

例如：

```
const obj1 = {a: "a"} const obj2 = {b: "b"} const result = {...obj1, ..obj2,} console.log("result", result) // must be {a: "a", b: "b"} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-10-03T17:39:08.480

## 概括：

Javascript 使用一种称为**原型继承**的机制。在查找对象的属性时使用原型继承。当我们在 javascript 中扩展属性时，我们是从实际对象继承这些属性。它以下列方式工作：

1.  当请求对象属性时，（例如`myObj.foo`或`myObj['foo']`）JS 引擎将首先在对象本身上查找该属性
2.  当在对象本身上找不到此属性时，它将**爬上原型链**查看原型对象。如果这里也没有找到这个属性，它将继续爬上原型链，直到找到该属性。如果未找到该属性，它将引发引用错误。

当我们想从 javascript 中的对象扩展时，我们可以简单地将这个对象链接到原型链中。有很多方法可以实现这一点，我将描述两种常用的方法。

## 例子：

**1.`Object.create()`**

`Object.create()`是一个将对象作为参数并创建一个新对象的函数。作为参数传递的对象将是新创建对象的原型。例如：

```
// prototype of the dog
const dogPrototype = {
  woof: function () { console.log('woof'); }
}

// create 2 dog objects, pass prototype as an argument
const fluffy = Object.create(dogPrototype);
const notFluffy = Object.create(dogPrototype);

// both newly created object inherit the woof 
// function from the dogPrototype
fluffy.woof();
notFluffy.woof();
```

**2.显式设置原型属性**

在使用构造函数创建对象时，我们可以为其原型对象属性设置添加属性。使用关键字时从构造函数创建的对象，`new`其原型设置为构造函数的原型。例如：

```
// Constructor function object
function Dog (name) {
   name = this.name;
}

// Functions are just objects
// All functions have a prototype property
// When a function is used as a constructor (with the new keyword)
// The newly created object will have the consturctor function's
// prototype as its prototype property
Dog.prototype.woof = function () {
  console.log('woof');
}

// create a new dog instance
const fluffy = new Dog('fluffyGoodBoyyyyy');
// fluffy inherits the woof method
fluffy.woof();

// can check the prototype in the following manner
console.log(Object.getPrototypeOf(fluffy));
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-04T16:47:05.747

虽然这项工作并非 100% 正确

```
// Parent
var Parent = function (name) {
  this.name = name;
  this.test = function () {
    console.log("parent test");
  }
  this.testOverride = function () {
    console.log("parent testOverride");
  }
}
// define a function extend
Parent.prototype.extend = function () {
  // parent properties to override or add
  var override = arguments[0];
  return function () {
    Parent.apply(this, arguments);
    // add and override properties
    Object.keys(override).forEach(el =>{
      this[el] = override[el];
    })
   }
}
// create a Child from the Parent and override
// the function "testOverride" and keep "test" unchanged
var Child = Parent.prototype.extend({
  y: 10,
  testOverride: function () { 
    console.log("child testOverride"); 
  }
});
// Create an object of type Parent
var p = new Parent("Parent");
// Create an object of type Child
var c = new Child("Child");
console.log(p.name);
// Parent
console.log(c.name);
// Child
p.test();
//parent test
p.testOverride();
//parent testOverride
c.test();
//parent test
c.testOverride();
//child testOverride 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-02-23T13:36:00.600

您可以简单地使用：

```
Object.prototype.extend = function(object) {
  // loop through object 
  for (var i in object) {
    // check if the extended object has that property
    if (object.hasOwnProperty(i)) {
      // mow check if the child is also and object so we go through it recursively
      if (typeof this[i] == "object" && this.hasOwnProperty(i) && this[i] != null) {
        this[i].extend(object[i]);
      } else {
        this[i] = object[i];
      }
    }
  }
  return this;
}; 
```

> **更新：**我检查了`this[i] != null`因为`null`是一个对象

然后像这样使用它：

```
var options = {
      foo: 'bar',
      baz: 'dar'
    }

    var defaults = {
      foo: false,
      baz: 'car',
      nat: 0
    }

defaults.extend(options); 
```

这很好的结果是：

```
// defaults will now be
{
  foo: 'bar',
  baz: 'dar',
  nat: 0
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-20T14:24:07.203

**请添加拒绝投票的原因**

*   无需使用任何外部库来扩展

*   在 JavaScript 中，一切都是对象（除了三种原始数据类型，甚至在需要时也会自动用对象包装）。此外，所有对象都是可变的。

> **JavaScript 中的类人**

```
function Person(name, age) {
    this.name = name;
    this.age = age;
}
Person.prototype = {
    getName: function() {
        return this.name;
    },
    getAge: function() {
        return this.age;
    }
}

/* Instantiate the class. */
var alice = new Person('Alice', 93);
var bill = new Person('Bill', 30); 
```

> **修改特定的实例/对象**。

```
alice.displayGreeting = function() 
{
    alert(this.getGreeting());
} 
```

> **修改类**

```
Person.prototype.getGreeting = function() 
{
    return 'Hi ' + this.getName() + '!';
}; 
```

> **或者简单地说：extend JSON 和 OBJECT 都是一样的**

```
var k = {
    name : 'jack',
    age : 30
}

k.gender = 'male'; /*object or json k got extended with new property gender*/ 
```

感谢罗斯·哈姆斯，达斯汀·迪亚兹

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-01-19T10:18:38.900

这将使扩展您的属性创建一个具有对象参数原型的新对象，而无需更改传递的对象。

```
function extend(object) {
    if (object === null)
        throw TypeError;
    if (typeof object !== "object" && typeof object !== "function")
        throw TypeError;
    if (Object.create)
        return Object.create(object);
    function f() {}
    ;
    f.prototype = p;
    return new f();
} 
```

但是如果你想在不修改参数的情况下扩展你的对象，你可以将 extendProperty 添加到你的对象中。

```
var Person{
//some code
extend: extendProperty
}

//Enforce type checking an Error report as you wish
    function extendProperty(object) {
        if ((object !== null && (typeof object === "object" || typeof object === "function"))){
            for (var prop in object) {
                if (object.hasOwnProperty(prop))
                    this[prop] = object[prop];
            }
        }else{
            throw TypeError; //Not an object
        }
    } 
```

# actionscript-3 - 退出 NetGroup 成员会导致 Flash 插件崩溃

> ID：10430285
> 
> 赞同：2
> 
> 时间：2012-05-03T11:18:51.023
> 
> 标签：actionscript-3, flash, netstream, flash-media-server, rtmfp

我们正在使用[Cumulus](https://github.com/OpenRTMFP/Cumulus)服务器创建与 RTMFP 的语音聊天。用户通过加入同一个网络组相互连接。

订阅的 NetStreams 上的语音聊天和呼叫功能运行良好。

但是，**有时**，当用户关闭浏览器窗口时，同一个 NetGroup 中所有用户的 Flash 插件都会崩溃。

由于没有报告错误，并且从我的 IDE (FlashDevelop) 启动 Flash 应用程序时似乎没有发生崩溃，所以我不知道发生了什么。我所知道的是，有时当用户退出 Flash 应用程序（关闭浏览器窗口/应用程序）时会发生这种情况。

这是建立与 NetGroup 的连接和发布音频发布流的方式（在建立与 Cumulus 服务器的连接之后）：

```
_gspecMain = new GroupSpecifier("MainGroup");
_gspecMain.multicastEnabled = true;
_gspecMain.postingEnabled = true;
_gspecMain.serverChannelEnabled = true;
_gspecMain.objectReplicationEnabled = false;
_group = new NetGroup(_netConnection, _gspecMain.groupspecWithAuthorizations());
_group.addEventListener(NetStatusEvent.NET_STATUS, handleNetGroupStatus);

// Audio
_sendStream = new NetStream(_netConnection, NetStream.DIRECT_CONNECTIONS); 
_sendStream.addEventListener(NetStatusEvent.NET_STATUS, handleNetStreamStatus);
_sendStream.client = this;
_sendStream.attachAudio(_mic); 
_sendStream.publish("media"); 
```

这就是创建接收 NetStream 监听发布的方式（每当 Neighbor 连接时）：

```
var netStream :NetStream = new NetStream(_netConnection, p_netStatusEvent.info.peerID);
netStream.addEventListener(NetStatusEvent.NET_STATUS, handleNetStreamStatus); 
netStream.client = this;
netStream.play("media"); 
```

**什么可能导致这种情况？**当通知邻居断开连接时，我是否应该做一些特别的事情？请注意，我什至不知道崩溃是在任何通知之前还是之后发生的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:33:19.843

[您可以通过调试崩溃插件](http://www.firebreath.org/display/documentation/Debugging+Plugins)找到更多信息。将**Visual Studio**附加到进程中`plugin-container.exe`，也许您可​​以在此处发布更多信息（使用[pastebin](http://pastebin.com/)）。

第二件事 -如果您目前使用的是调试器版本，请尝试**Flash Player 插件发布版本，但调试器版本更有可能在 Firefox 中崩溃。**但是，您可以通过[将 dom.ipc.plugins.enabled.npswf32.dll 设置为 false](http://support.mozilla.org/en-US/questions/705281)来避免它。

关于 Firefox 插件中断开连接的网络组对等点的特殊处理 - 我认为您无需再做任何事情......如果该应用程序在 ActiveX 插件和 Flash Player Standalone 投影仪中工作，但仅在 Firefox 插件的调试器版本中崩溃。 .. 简而言之：**只关注 Flash Player 发行版本的崩溃**。

Other thing I would definitely try - **use the original Adobe Cirrus or Flash Media Server** Enterprise 4.5, not the open source equivalent, until you find the error. Even slight change in the protocol could crash the connection, thus crashing the plugin.

# c# - 如何在网页上搜索一些文本？

> ID：10430287
> 
> 赞同：2
> 
> 时间：2012-05-03T11:19:08.023
> 
> 标签：c#, .net, web-scraping

我以前使用 WatIn 从网站上抓取大量数据。我知道我可以用它来处理这项任务，但如果可能的话，我希望有一个更轻松的解决方案。

我希望能够访问一个 URL，并查看该网站上是否有“打开”字样，或者是否有“关闭”字样。

有没有人有好的建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T11:21:26.670

您可以使用 html 解析.. [Html Agility Pack](http://html-agility-pack.net/?z=codeplex)可以帮助您。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T11:20:54.233

是的。使用该方法并使用[标准](http://msdn.microsoft.com/en-us/library/aa904283%28v=vs.71%29.aspx)[方法](http://msdn.microsoft.com/en-us/library/aa904283%28v=vs.71%29.aspx)[`WebClient.DownloadString`](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)检查页面。这很简单。[`string`](http://msdn.microsoft.com/en-us/library/aa904283%28v=vs.71%29.aspx)

如果您想要更多，请遵循 @mekici 的提示：[The Html Agility Pack](http://html-agility-pack.net/?z=codeplex)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:21:48.900

探索`HttpWebRequest`& `HttpWebResponse`。您可以在字符串变量中获取页面文本并使用`IndexOf`or`Contains`来获取文本

# linux - cp 前导零

> ID：10430292
> 
> 赞同：2
> 
> 时间：2012-05-03T11:19:25.907
> 
> 标签：linux, bash

我的脚本：

```
for i in {99..100}
 do
  cp dummy.shp  dummy.{ printf %04d%s ${i}\_shp}
 done 
```

我希望有：

```
dummy.0099_shp
dummy.0100_shp 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:26:57.043

```
for i in {99..100}
do
  cp dummy.shp dummy.`printf "%04d%s_shp" ${i}`
done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T11:28:36.190

```
for i in {0099..0100}
do
  cp dummy.shp  dummy.${i}_shp
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T12:12:27.827

这可能对您有用：

```
parallel cp dummy.shp {} ::: $(seq -f'dummy.%04g_shp' 99 100) 
```

但不会：

```
for i in 0099 0100
do
  cp dummy.shp dummy.${i}_shp
done 
```

或者：

```
cp dummy.shp dummpy.0099_shp; cp dummy.shp dummy.0100_shp 
```

更容易？

# javascript - Javascript 格式化异常

> ID：10430294
> 
> 赞同：4
> 
> 时间：2012-05-03T11:19:29.537
> 
> 标签：javascript, jquery, xml

我在三个表上使用内部联接，并显示结果表。我为此使用 Xml。

```
<SQLInformation>
      <Table>tblechecklistprogramworkpackagexref prwpxref</Table>
      <TableJoins>
        INNER JOIN tblechecklistprogram pr ON pr.ixProgram=prwpxref.ixProgram
        INNER JOIN tblechecklistworkpackage wp ON wp.ixWorkPackage=prwpxref.ixWorkPackage
        INNER JOIN tblechecklistworkpackageactivityxref wpaxref ON wpaxref.ixWorkPackage=wp.ixWorkPackage
        INNER JOIN tblechecklistactivity act ON act.ixActivity=wpaxref.ixActivity
      </TableJoins>
      <WhereClause>
      </WhereClause>
      <GroupBy>
      </GroupBy>
      <OrderBy></OrderBy>
      <HeaderInformation></HeaderInformation>
      <FooterInformation></FooterInformation>
    </SQLInformation>
    <Columns>
      <Column>
        <Id>ProgramName</Id>
        <Title>Program Name</Title>
        <Table>pr</Table>
        <Field>sName</Field>
        <Alias>sName</Alias>
        <Sortable>true</Sortable>
        <GroupSort>true</GroupSort>
        <ColumnWidth>100</ColumnWidth>
        <JavascriptFormatter>
          <![CDATA[
            DesignDataFileFormatter = function(span,row,columns,data,item)
            {              
              $(span).createAppend('a', {href: '../EcheckList/TemplateUsage.aspx?IxTemplate=' + 2, title: 'Go to Corresponding Schedule Item.', innerHTML:sName });

              return true;
            }
          ]]>
        </JavascriptFormatter>
        <Display>true</Display>
        <Filter type="Database">
          <FilterContainer name="Program" DisplayMember="sName" ValueMember="ixProgram" UseHavingClause="false" >
            <FilterQuery>SELECT sName,ixProgram FROM tblechecklistprogram</FilterQuery>
          </FilterContainer>
        </Filter>
      </Column> 
```

我想使用输出表的列值之一创建一个超链接。每当我单击链接时，它都会给出格式异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:58:27.880

我发现问题出在虚拟路径上的解决方案..

$(span).createAppend('a', { href : 'Customer.aspx?ixProgram=' + row[columns.ixProgram] }).text(data); 返回真；} ]]>

# ios5 - 如何使用 iOS5 外观 API 在 UINavigationBar 中设置标题的字体和颜色？

> ID：10430298
> 
> 赞同：90
> 
> 时间：2012-05-03T11:20:02.143
> 
> 标签：ios5, uinavigationbar, uiappearance

我有多个视图控制器，我想将所有的字体颜色设置为红色。

```
 [[UINavigationBar appearance] setFont:[UIFont boldSystemFontOfSize:12.0]]; 
```

正在引发无法识别的选择器错误。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-05-03T22:45:08.547

来自雷·温德利希：

[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

```
// Customize the title text for *all* UINavigationBars
[[UINavigationBar appearance] setTitleTextAttributes:
    [NSDictionary dictionaryWithObjectsAndKeys:
        [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0], 
        UITextAttributeTextColor, 
        [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8], 
        UITextAttributeTextShadowColor, 
        [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], 
        UITextAttributeTextShadowOffset, 
        [UIFont fontWithName:@"Arial-Bold" size:0.0], 
        UITextAttributeFont, 
        nil]]; 
```

或者，如果您更喜欢对象文字样式：

```
[[UINavigationBar appearance] setTitleTextAttributes:@{
    UITextAttributeTextColor: [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0],
    UITextAttributeTextShadowColor: [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8],
    UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0, -1)],
    UITextAttributeFont: [UIFont fontWithName:@"Arial-Bold" size:0.0],
}]; 
```

**为 iOS 7 及以下版本编辑**

UITextAttributes 在 iOS 7 中已弃用，您可以使用以下内容：

```
NSShadow *shadow = [[NSShadow alloc] init];
shadow.shadowColor = [UIColor colorWithWhite:.0f alpha:1.f];
shadow.shadowOffset = CGSizeMake(0, -1);

[[UINavigationBar appearance] setTitleTextAttributes:@{
     NSForegroundColorAttributeName: [UIColor whiteColor],
     NSShadowAttributeName: shadow,
     NSFontAttributeName: [UIFont fontWithName:@"Arial-Bold" size:15.0f]
     }]; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-04-12T17:44:02.727

对于大于或等于 iOS 6 的部署目标，您应该`NSShadow`改用：

```
NSShadow * shadow = [[NSShadow alloc] init];
shadow.shadowColor = [UIColor lightGrayColor];
shadow.shadowOffset = CGSizeMake(0, -2);

NSDictionary * navBarTitleTextAttributes =
@{ NSForegroundColorAttributeName : [UIColor redColor],
   NSShadowAttributeName          : shadow,
   NSFontAttributeName            : [UIFont systemFontOfSize:14] };

[[UINavigationBar appearance] setTitleTextAttributes:navBarTitleTextAttributes]; 
```

![在此处输入图像描述](../Images/233abb0c7e2914f0d802a1a1e9abeb69.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-06-14T15:56:12.207

在 iOS 8+ 和 Swift 中执行此操作。没有`setTitleTextAttributes`外观对象。相反，请执行以下操作：

```
UINavigationBar.appearance().titleTextAttributes = [NSFontAttributeName : AppTheme.fontWithSize(18)] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-24T14:49:54.727

我通过在 AppDelegate.m 类的 didFinishLaunchingWithOptions 方法中添加几行代码来做到这一点： 使用以下代码：

```
NSDictionary *navbarTitleTextAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                           [UIColor colorWithRed:255.0f/255.0f green:0.0f/255.0f blue:0.0f/255.0f alpha:1.0],UITextAttributeTextColor,
                                           [UIColor clearColor], UITextAttributeTextShadowColor,
                                           [NSValue valueWithUIOffset:UIOffsetMake(-1, 0)], UITextAttributeTextShadowOffset, nil];

[[UINavigationBar appearance] setTitleTextAttributes:navbarTitleTextAttributes]; 
```

这个对我有用...

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-20T08:56:13.147

如果您需要在 Swift 中执行此操作，您可以为 UINavigationBar 创建一个扩展，以允许您获取或设置这些设置。

```
extension UINavigationBar {
var titleColor: UIColor? {
    get {
        if let attributes = self.titleTextAttributes {
            return attributes[NSForegroundColorAttributeName] as? UIColor
        }
        return nil
    }
    set {
        if let value = newValue {
            self.titleTextAttributes = [NSForegroundColorAttributeName: value]
        }
    }
}

var titleFont: UIFont? {
    get {
        if let attributes = self.titleTextAttributes {
            return attributes[NSFontAttributeName] as? UIFont
        }
        return nil
    }
    set {
        if let value = newValue {
            self.titleTextAttributes = [NSFontAttributeName: value]
        }
    }
    }
} 
```

然后，您可以像这样设置颜色和字体：

```
navigationBar.titleColor = UIColor.redColor()
navigationBar.titleFont = UIFont.systemFontOfSize(12) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-12T15:51:48.233

这可用于将自定义视图设置为单个导航栏而不是全局设置

```
- (void)updateTitleWithString:(NSString *)title
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectZero];
    [headerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
    [headerView setAutoresizesSubviews:YES];

    CGFloat headFontSize = (IS_SYSTEM_DEVICE_IPAD ? 25.0f : 19.0f);
    UIFont *headFont = [UIFont boldSystemFontOfSize: headFontSize ];

    NSMutableParagraphStyle *style = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];
    [style setLineBreakMode:NSLineBreakByTruncatingTail];

    CGSize size = [title boundingRectWithSize:CGSizeMake(190,headFontSize + 6) options:NSStringDrawingUsesLineFragmentOrigin
                                   attributes:@{NSFontAttributeName : headFont, NSParagraphStyleAttributeName : style} context:nil].size;

    headerView.frame  = CGRectMake(0, 0,size.width,self.navigationController.navigationBar.frame.size.height);
    float labelHeight = headFontSize + 6;
    float labelYLoc   = (   self.navigationController.navigationBar.frame.size.height - labelHeight ) / 2;
    UILabel *label    = [[UILabel alloc] initWithFrame:CGRectMake(0,labelYLoc, size.width,labelHeight)];
    label.backgroundColor = [UIColor clearColor];
    label.adjustsFontSizeToFitWidth = YES;
    label.textAlignment = NSTextAlignmentCenter;
    label.textColor = [UIColor whiteColor];
    label.font = headFont;
    label.text = title;
    label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.4];
    label.lineBreakMode = NSLineBreakByTruncatingTail;
    label.shadowOffset = CGSizeMake(0,-1);
    label.accessibilityLabel = @"<LABEL>";
    [headerView addSubview:label];

    self.navigationItem.titleView = headerView;
} 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-05-03T11:27:57.623

使用这行代码

```
UILabel *badge_Label=[[UILabel alloc]initWithFrame:CGRectMake(5,3, 15, 15)];
badge_Label.backgroundColor=[UIColor redcolor];
badge_Label.font=[UIFont systemFontOfSize:12];
[badge_Label setText:@"20"];
[self.navigationController.navigationBar addSubview:badgelabel]; 
```

我认为这对你会有帮助。

# ruby-on-rails-3 - 在 RestClient 中解析 elasticsearch 响应

> ID：10430303
> 
> 赞同：1
> 
> 时间：2012-05-03T11:20:28.290
> 
> 标签：ruby-on-rails-3, json, datamapper, elasticsearch, rest-client

我正在编写一个使用 Datamapper 作为 ORM 的 Rails 3 应用程序。我正在考虑使用 ElasticSearch 进行搜索，但不能使用 Tire gem，因为它似乎依赖于 ActiveRecord。

我正在使用 RestClient 向 ElasticSearch 提交请求，但无法解析 ruby​​ 中的响应。

如果我提交一个 GET 请求“ `http://localhost:9200/twitter/tweet/2`”，我会在浏览器中得到以下信息：

```
{
  "_index": "twitter",
  "_type": "tweet",
  "_id": "2",
  "_version": 3,
  "exists": true,
  "_source": {
    "user": "kimchy",
    "post_date": "2009-11-15T14:12:12",
    "message": "kimchy kimchy says"
  }
} 
```

在 Rails 中，当我键入以下内容时：

```
response = RestClient.get 'http://localhost:9200/twitter/tweet/2',{:content_type => :json, :accept => :json} 
```

我得到这个结果：

```
{
  "_index": "twitter",
  "_type": "tweet",
  "_id": "2",
  "_version": 3,
  "exists": true,
  "_source": {
    "user": "kimchy",
    "post_date": "2009-11-15T14:12:12",
    "message": "kimchy kimchy says"
  }
} 
```

这看起来有点正确，但我无法像通常使用 JSON 那样使用点表示法获取数据。

例如，我不能写`response._type`，因为我得到一个未定义的方法错误。

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:38:21.560

如果您想进行手动转换，您可以解析来自 json 的响应并手动将其转换为对象以使用点符号访问字段。

像这样的东西：

```
require 'json'
require 'ostruct'

response = RestClient.get '...url...'
o = OpenStruct.new(JSON.parse(response)) 
```

然后您应该能够使用`o._type`或访问字段`o.message`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:46:59.620

也许比您正在寻找的答案更广泛……</p>

我使用类似[这个要点](https://gist.github.com/2510941)的东西来包装我对 ElasticSearch 的 RestClient 调用。它解析 JSON 输出，并拯救一些 RestClient 的异常，以解析服务器输出并将其传递给客户端代码。

这是为您准备的精简版：

```
# url and method are provided as a param
options = { url: '...', method: '...' }

# default options
options = {
  headers: {
    accept:       :json,
    content_type: :json
  },
  open_timeout: 1,
  timeout:      1
}

begin
  request  = RestClient::Request.new(options)
  response = request.execute
  JSON.parse(response.to_str)

rescue RestClient::BadRequest => e # and others...
  # log e.message
  JSON.parse(e.response.to_str)
end 
```

最后，您会得到一个从 ElasticSearch 的 JSON 响应中解析出来的哈希值。

这一切如何与 DataMapper 交互有点超出我的正常经验，但请随时在评论中澄清或提出更多问题。

# android - 在没有java的android上扫描二维码

> ID：10430306
> 
> 赞同：1
> 
> 时间：2012-05-03T11:20:41.587
> 
> 标签：android, cordova, camera, mobile-website, qr-code

我刚刚为一个使用 phongeab + phonegab BarcodeScanner 插件的应用程序发疯。但是对于这个 webapp，我需要在我的手机上安装该应用程序。是否可以制作一个无需安装在手机上就可以扫描二维码的网络应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:59:16.710

不，扫描需要访问浏览器不允许的相机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:41:50.377

这是您可以从浏览器中获得的最接近的结果，但效果很好：

[http://code.google.com/p/zxing/wiki/ScanningFromWebPages](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)

# jquery - 你如何禁用事件 ctrl 并点击 jquery ui？

> ID：10430310
> 
> 赞同：0
> 
> 时间：2012-05-03T11:21:04.330
> 
> 标签：jquery, jquery-ui, jquery-plugins

我有一个使用**jquery-ui.min.js**和**jquery.treeTable.js 的表**。
但是每次如果我按下*ctrl*和桌子上的某个地方，就会选择单元格（会出现一个蓝色边框），这不会发生。

有人知道您如何设置此事件吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:41:49.120

我之前没有使用过 jquery.treeTable.js，但是从我在[这个演示页面](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/)上看到的内容来看，单击时会将“选定”的 CSS 样式添加到项目中。这有点小技巧，但您可以覆盖 css 样式并删除蓝色边框。

此外，它们似乎仅在启用拖放时才可选。如果合适的话，也许可以尝试禁用拖放。

希望有帮助。

# iphone - 如何在 UITableview 的部分中对 NSarray 进行排序

> ID：10430311
> 
> 赞同：2
> 
> 时间：2012-05-03T11:21:05.093
> 
> 标签：iphone, xcode, uitableview

嗨，我如何按天对我的数组进行排序，我从我的网络服务器（Json）中获取数据并解析到 NSDictionary 然后保存到 NSMutableArray ......我知道我需要实现

*   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
*   标题ForHeaderInSection：
*   部分行：

NSMutableArray 日志

```
2012-04-26 06:12:51.256 passingdata[91699:fb03] array : (
{
post =         {
    "CLASS_LEVEL" = "Intro/General";
    "CLASS_TYPE" = "Muay Thai";
    "DAY_OF_WEEK" = Sunday;
    ID = 19;
    "ORDER_BY" = 5;
    TIME = "1:00pm - 2:30pm";
};
}
{
post =         {
    "CLASS_LEVEL" = "General/Intermediate/Advanced";
    "CLASS_TYPE" = "Muay Thai Spar - Competitive";
    "DAY_OF_WEEK" = Friday;
    ID = 27;
    "ORDER_BY" = 5;
    TIME = "6:00pm - 9:00pm";
};
},
{
post =         {
    "CLASS_LEVEL" = "Fighters/Advanced/Intermediate";
    "CLASS_TYPE" = "Fighters Training";
    "DAY_OF_WEEK" = Monday;
    ID = 1;
    "ORDER_BY" = 1;
    TIME = "9:30am - 11:00pm";
};
}, 
```

我可以在我的桌子上显示所有数据，但我想每天（周一，周二，周三..周日）按部分进行，我尝试了 NSpredicate 和 NSSet 但仍然无法正常工作。

我不知道如何按天对项目进行分组并获取所有信息以实现所有方法。

有任何想法吗 ？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:30:39.377

您应该使用[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)类。

这是你应该做的：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"DAY_OF_WEEK MATCHES %@",@"Monday"];
NSArray *sections = [tableData filteredArrayUsingPredicate:predicate]; 
```

谓词格式不应硬编码当天，而应循环遍历所有天并创建包含每天结果的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:33:34.990

使用 NSSortdiscriptor 代码使用这行代码。

```
 NSSortDescriptor *timeSD = [NSSortDescriptor sortDescriptorWithKey: @"time" ascending: YES];
 NSMutableArray *sortedByTime = [UnsortedArray sortedArrayUsingDescriptors: timeSD];
 NSMutableArray *sortedArray = [NSMutableArray arrayWithCapacity:[sortedByTime count]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:25:52.207

使用这种方法

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView 
{
   NSMutableSet *mySet = [[[NSMutableSet alloc] init] autorelease];
   for ( NSString *s in myArray )
   {
     if ( s.length > 0 )
       [mySet addObject:[s substringToIndex:1]];
   }

   NSArray *indexArray = [[mySet allObjects] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
   return indexArray;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:26:45.697

此方法是完成工作的最简单方法：

```
NSArray *sortedStrings = [strings sortedArrayUsingSelector:@selector(compare:)]; 
```

更多关于：[sortedArrayUsingSelector](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSArray_Class/NSArray.html)

# ruby-on-rails - 分段错误 wrt RedCloth 和 Ruby 调试 gem

> ID：10430314
> 
> 赞同：0
> 
> 时间：2012-05-03T11:21:18.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-1.9.2, ruby-debug, redcloth

我尝试运行一个非常基本的命令来查看我的路由 wrt 所有控制器操作，使用`rake routes`. 我收到以下错误

```
/home/mohnish/.rvm/gems/ruby-1.9.2-p290@abc/gems/RedCloth-4.2.9/lib/redcloth_scan.so: [BUG] Segmentation fault
ruby 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux]

Aborted 
```

链接[http://railsforum.com/viewtopic.php?id=41077](http://railsforum.com/viewtopic.php?id=41077)也似乎已经过时，因为它是 Rails 3 中的一种解决方法。

我提到了这个链接：-[为什么 Ruby 只在我的系统上抛出分段错误，并且只在这个 Rails 应用程序中？](https://stackoverflow.com/questions/2112371/why-is-ruby-throwing-a-segmentation-fault-on-only-my-system-and-only-in-this-ra). 但这似乎并没有真正解决我的问题，因为还有其他 gem 依赖项需要以下 gem：-

```
* ruby-debug-base-0.10.4.gem
* ruby-debug-0.10.4.gem 
```

任何输入都会非常有帮助。

谢谢..

# javascript - 如何使用 JavaScript 或 jQuery 解析“dd/mm/yyyy”或“dd-mm-yyyy”或“dd-mmm-yyyy”格式的日期字符串

> ID：10430321
> 
> 赞同：66
> 
> 时间：2012-05-03T11:21:48.573
> 
> 标签：javascript, jquery, asp.net, date

> **可能重复：**
> [扩展 JavaScript 的 Date.parse 以允许 DD/MM/YYYY（非美国格式的日期）？](https://stackoverflow.com/questions/3003355/extending-javascripts-date-parse-to-allow-for-dd-mm-yyyy-non-us-formatted-date)
> [将 dd-mm-yyyy 字符串转换为日期](https://stackoverflow.com/questions/7151543/convert-dd-mm-yyyy-string-to-date)

在文本框中输入日期，例如：*05/09/1985*，我想将其转换为*05-Sep-1985* (dd-MMM-yyyy) 格式。我将如何实现这一目标？请注意，源格式可能是`dd-mm-yyyy`or `dd/mm/yyyy`or`dd-mmm-yyyy`格式。

**代码片段：**

```
 function GetDateFormat(controlName) {
        if ($('#' + controlName).val() != "") {      
            var d1 = Date.parse($('#' + controlName).val());
            if (d1 == null) {
                alert('Date Invalid.');
                $('#' + controlName).val("");
            }
                var array = d1.toString('dd-MMM-yyyy');
                $('#' + controlName).val(array);
        }
    } 
```

此代码返回*09-May-1985*但我想要*05-Sep-1985*。谢谢。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-03T12:35:19.973

您可能希望使用[http://momentjs.com/](http://momentjs.com/)之类的帮助程序库，它包装了本机 javascript 日期对象以便于操作

然后您可以执行以下操作：

```
var day = moment("12-25-1995", "MM-DD-YYYY"); 
```

或者

```
var day = moment("25/12/1995", "DD/MM/YYYY"); 
```

然后在日期操作

```
day.add('days', 7) 
```

并获取本机 javascript 日期

```
day.toDate(); 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-05-03T11:25:38.273

**更新**

下面你说：

> 抱歉，我之前无法预测日期格式，它应该是 dd-mm-yyyy 或 dd/mm/yyyy 或 dd-mmm-yyyy 格式最后我想将所有这些格式转换为 dd-MMM-yyyy 格式。

这***完全***改变了问题。如果您无法控制格式，它将更加复杂。JavaScript 中没有内置任何东西可以让您指定日期格式。官方上，JavaScript 支持的唯一日期格式是[ISO-8601 的简化版本](http://es5.github.com/#x15.9.1.15)：`yyyy-mm-dd`，尽管实际上几乎所有浏览器也支持`yyyy/mm/dd`。但除此之外，您必须自己编写代码，或者（这更有意义）使用一个好的库。我可能会使用像[moment.js](http://momentjs.com/)或[DateJS 之](http://www.datejs.com/)类的库（尽管DateJS 已经多年没有维护了）。

* * *

**原始答案**：

如果格式*总是* `dd/mm/yyyy`，那么这很简单：

```
var parts = str.split("/");
var dt = new Date(parseInt(parts[2], 10),
                  parseInt(parts[1], 10) - 1,
                  parseInt(parts[0], 10)); 
```

`split`在给定的分隔符上拆分字符串。然后我们使用`parseInt`将字符串转换为数字，并使用`new Date`构造函数`Date`从这些部分构建：第三部分是年份，第二部分是月份，第一部分是日期。`Date`使用从零开始的月份编号，因此我们必须从月份编号中减去 1。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-03T11:25:44.857

[`Date.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)仅识别特定格式，您无法选择告诉它您的输入格式是什么。在这种情况下，它认为输入是 format `mm/dd/yyyy`，所以结果是错误的。

要解决这个问题，您需要自己解析输入（例如使用[`String.split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)），然后[手动构造](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/constructor)一个`Date`对象，或者使用功能更全的库，例如[datejs](http://www.datejs.com/)。

手动解析示例：

```
var input = $('#' + controlName).val();
var parts = str.split("/");
var d1 = new Date(Number(parts[2]), Number(parts[1]) - 1, Number(parts[0])); 
```

使用 date.js 的示例：

```
var input = $('#' + controlName).val();
var d1 = Date.parseExact(input, "d/M/yyyy"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T11:29:11.377

Try this:

```
 function GetDateFormat(controlName) {
        if ($('#' + controlName).val() != "") {      
            var d1 = Date.parse($('#' + controlName).val().toString().replace(/([0-9]+)\/([0-9]+)/,'$2/$1'));
            if (d1 == null) {
                alert('Date Invalid.');
                $('#' + controlName).val("");
            }
                var array = d1.toString('dd-MMM-yyyy');
                $('#' + controlName).val(array);
        }
    } 
```

The RegExp replace `.replace(/([0-9]+)\/([0-9]+)/,'$2/$1')` change day/month position.

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-05-03T11:31:43.233

请参阅此[http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

你可以用日期做任何事情。

文件：[http ://stevenlevithan.com/assets/misc/date.format.js](http://stevenlevithan.com/assets/misc/date.format.js)

使用脚本标记将此添加到您的 html 代码中，并使用它作为：

```
var now = new Date();

now.format("m/dd/yy");
// Returns, e.g., 6/09/07 
```

# php - 替换 PHP 中的多数组值

> ID：10430329
> 
> 赞同：0
> 
> 时间：2012-05-03T11:22:42.453
> 
> 标签：php, arrays

我目前正在建立一个公会网站，在其中一个页面上，我从一个场外资源获取信息，该资源以数组形式返回请求的数据，如下所示：

```
[0] => Array
(
    [character] => Array
        (
            [name] => Name
            [realm] => Server
            [battlegroup] => Battlegroun Name
            [class] => int
            [race] => int
            [gender] => int
            [level] => int
            [achievementPoints] => int
            [thumbnail] => image
            [thumbnailURL] => url
        )
    [rank] => int
)
... 
```

我不得不承认，自从我上次学习 PHP 以来已经有一段时间了，当涉及到在数组中转换值时，我完全傻眼了。（我知道一次！）

我基本上想要实现的是“翻译”，例如 $arr['character']['gender'] 从它的整数值到我从另一个数组设置的值。

```
$gender = array(0 => 'M', 1 => 'F'); 
```

我已经尝试了一些解决方案，但是我空手而归。我希望你们中的一些人对我有任何指示。

提前谢谢，不过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:35:44.947

嗨，您可以尝试下面给出的示例代码..

```
foreach($arr As $index=>$arrs{
    $arrs[$index]['character']['gender'] = $gender[$arrs[$index]['character']['gender']];
} 
```

谢谢

# printing - 在 Windows CE 6.0 下打印

> ID：10430333
> 
> 赞同：2
> 
> 时间：2012-05-03T11:22:53.313
> 
> 标签：printing, windows-ce

我正在使用 Windows CE 6.0 在 ARM 平台上开发设备。目标之一是为用户提供直接从设备打印的可能性（而不仅仅是文本！）。这意味着，Windows 将不得不处理各种类型的打印机。我怎样才能实现这样的功能？

我的猜测是： - PCL 打印（你还能买到 PCL 打印机吗？） - 网络打印（怎么做 - 有什么例子吗？）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:47:19.133

在 Windows CE 6.0 下可以打印。在“\WINCE600\PUBLIC\COMMON\OAK\DRIVERS\PRINTER\PCL”中有一个 PCL 驱动程序的示例。要将其包含在 OS 设计中，请在 Configuraiton Properties --> Environment 中将 SYSGEN_PRINTING、SYSGEN_PCL 和 SYSGEN_USB_PRINTER 设置为 1。这将导致编译示例并将 pcl.dll 添加到 OS Design。还将添加 USB 打印机类驱动程序。

以上操作让我们以 ASCII 码打印文本：

```
 // initialize printing
    //hPrinter = CreateFile(L"LPT1:", GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0, NULL);
    //if (hPrinter == NULL) RETAILMSG(TRUE, (L"Error in OnClick5 (GUI): CreateFile() returned NULL"));

    // print text WORKS
    //WriteFile(hPrinter, szText, sizeof(szText), &cBytes, NULL);

    // close printer port
    //CloseHandle(hPrinter); 
```

但是要打印例如 BMP 文件，我们需要真正使用 PCL 驱动程序（看下面的代码）。问题是，我无法摆脱一个错误：StartDoc() 总是返回“不支持网络请求”。开始打印作业的正确方法是什么？

```
 LPVOID lpMsgBuf = NULL;
    HDC hdc = NULL;
    DOCINFO di;
    DEVMODE dm;

    // initialize DEVMODE struct
    memset(&dm, 0, sizeof(DEVMODE));
    wcscpy(dm.dmDeviceName, L"Hewlett-Packard LaserJet P3010 Series");
    dm.dmSize = sizeof(DEVMODE);
    dm.dmPaperSize = DMPAPER_A4;
    dm.dmPrintQuality = DMRES_DRAFT;
    dm.dmFields = DM_PAPERSIZE | DM_PRINTQUALITY;

    //PAGESETUPDLG psd;
    //memset(&psd, 0, sizeof(psd));
    //psd.hwndOwner = NULL;
    //psd.hDevMode = NULL; 
    //psd.hDevNames = NULL;
    //psd.Flags = PSD_RETURNDEFAULT;
    //psd.lStructSize = sizeof(psd);

    //PageSetupDlg(&psd);
    //RETAILMSG(TRUE, (L"GUI: PageSetupDlg() result 0x%x", CommDlgExtendedError()));

    //if (psd.hDevMode == NULL) return -1;

    //DEVMODE* lpdm = (DEVMODE*)psd.hDevMode;

    DEVMODE* lpdm = &dm;

    // initialize device context
    hdc = CreateDC(L"pcl.dll", L"Printer", L"LPT1:", lpdm);
    if (hdc == NULL) {
        RETAILMSG(TRUE, (L"GUI: CreateDC() error 0x%x", GetLastError()));
        return -1;
    }

    // register abort procedure
    SetAbortProc(hdc, AbortProc);

    // initialize DOCINFO struct
    memset(&di, 0, sizeof(DOCINFO));
    di.cbSize = sizeof(DOCINFO);
    di.lpszDocName = L"logo.bmp";
    di.lpszOutput = NULL;
    di.lpszDatatype = 0;
    di.fwType = 0;

    // print file
    if (StartDoc(hdc, &di) <= 0) {
        RETAILMSG(TRUE, (L"Error in OnClick5 (GUI): StartDoc() returned non-positive value"));
        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
            NULL, GetLastError(), 0, (LPTSTR)&lpMsgBuf, 0, NULL);
        RETAILMSG(TRUE, ((LPWSTR)lpMsgBuf));
        LocalFree( lpMsgBuf );
        DeleteDC(hdc);
        return -1;
    } 
```

# sql - sql查询从数据库中查找缺少的表

> ID：10430335
> 
> 赞同：0
> 
> 时间：2012-05-03T11:23:04.403
> 
> 标签：sql, database, oracle

我正在使用 ORACLE 数据库。 **编辑**：

我只想要列表中不存在的表，而不是数据库中的所有表。

例如：在我的数据库中存在以下表格：

```
a
b
c
d
e
r
s 
```

我得到了一个表格列表：

```
a
b
c
v
h 
```

其中我想找出我的数据库中哪些表**不存在（不存在）**。

所以：a、b、c 是我的数据库中存在的那些表。因此，排除这些表格，我的答案将是：

```
v and h 
```

**我的答案不是 d,e,r,s**

我怎样才能为此编写查询以找出答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:27:10.080

您可以使用

```
SELECT a.table_name FROM (SELECT 'A' as table_name 
               FROM DUAL UNION
               SELECT 'B' as table_name 
               FROM DUAL UNION
               SELECT 'C' as table_name 
               FROM DUAL UNION
               SELECT 'V' as table_name 
               FROM DUAL UNION
               SELECT 'H' as table_name 
               FROM DUAL) a WHERE NOT EXISTS (
SELECT 1 FROM DBA_TABLES b where b.table_name=a.table_name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:28:19.083

```
WITH table_names AS ( 
   SELECT 'A' AS tname FROM DUAL
   UNION ALL
   SELECT 'B' FROM DUAL
   UNION ALL
   SELECT 'C' FROM DUAL
   UNION ALL
   SELECT 'D' FROM DUAL
   UNION ALL
   SELECT 'E' FROM DUAL
)
SELECT tn.tname
FROM table_name tn
WHERE NOT EXISTS (SELECT 1  
                  FROM all_tables at
                  WHERE tn.tname = at.table_name); 
```

WITH 部分只是编写派生表（“内联视图”）的一种不同（可重用）方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:19:28.777

我会用 MINUS 运算符（总结如下）：

```
select table_name from table_list
minus
select table_name from db_tables
; 
```

更全面：

```
with table_list as 
(     select 'A' table_name from dual    
union select 'B' table_name from dual
union select 'C' table_name from dual
union select 'V' table_name from dual
union select 'H' table_name from dual
) 
, db_tables as
(     select 'A' table_name from dual
union select 'B' table_name from dual
union select 'C' table_name from dual
union select 'D' table_name from dual
union select 'E' table_name from dual
union select 'R' table_name from dual
union select 'S' table_name from dual
)
select table_name from table_list
minus
select table_name from db_tables
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:28:26.243

```
SELECT table_name FROM DBA_tables WHERE table_name IN (Yourlist comes here) 
```

例如

```
SELECT table_name FROM DBA_tables WHERE table_name NOT IN ('a','b','c'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:55:00.147

您可以使用该表和 sys.dbms_debug_vc2coll 从您的列表中创建一个虚拟列。

以下应该可以解决问题：

```
SELECT
    column_value AS missing_table_names
FROM
    TABLE(SYS.DBMS_DEBUG_VC2COLL('a','b','c','v','h'))
WHERE
    column_value NOT IN (
        SELECT
            table_name
        FROM
            ALL_TABLES
    ); 
```

# regex - 寻找正则表达式模式

> ID：10430336
> 
> 赞同：2
> 
> 时间：2012-05-03T11:23:05.107
> 
> 标签：regex

目前我得到了这个：

```
/^[0-9]{1,3}$/\.{1}/^[0-9]{1,3}$/\.{1}^[0-9]{1,3}$/ 
```

它应该接受以下内容：

*   0.0.0
*   00.00.00
*   000.000.000

它不应该接受：

*   000.000.0000
*   0000.000.000
*   000.0000.000
*   .0.0
*   0..0
*   等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:27:22.017

尝试这个：

```
^(0+)(\.\1){2}$ 
```

意义：

```
^        # the start of the input
(0+)     # match one ore more `0`'s and store it in group 1
(        # start group 2
  \.\1   #   match a literal `.` and match whatever group 1 matched
){2}     # end group 2 and repeat it twice
$        # the end of the input 
```

如果您只需要最多 3 个数字的 3 个块，请执行以下操作：

```
^\d{1,3}(\.\d{1,3}){2}$ 
```

或者

```
^\d{1,3}\.\d{1,3}\.\d{1,3}$ 
```

请注意，这也将 match `"777.888.999"`，但使用 regex 验证数字范围并不是 regex 的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:29:32.097

```
^([2][5][0-5]|[2][0-4][0-9]|[1][0-9]{2}|[1-9][0-9]|[0-9])[.]([2][5][0-5]|[2][0-4][0-9]|[1][0-9]{2}|[1-9][0-9]|[0-9]).([2][5][0-5]|[2][0-4][0-9]|[1][0-9]{2}|[1-9][0-9]|[0-9])$ 
```

我针对以下内容进行测试：

```
0.0.0
1.3.2
2.6.4
3.9.6
4.12.8
5.15.10
6.18.12
7.21.14
8.24.16
9.27.18
10.30.20
11.33.22
12.36.24
13.39.26
14.42.28
15.45.30
16.48.32
17.51.34
18.54.36
19.57.38
20.60.40
21.63.42
22.66.44
23.69.46
24.72.48
25.75.50
26.78.52
27.81.54
28.84.56
29.87.58
30.90.60
31.93.62
32.96.64
33.99.66
34.102.68
35.105.70
36.108.72
37.111.74
38.114.76
39.117.78
40.120.80
41.123.82
42.126.84
43.129.86
44.132.88
45.135.90
46.138.92
47.141.94
48.144.96
49.147.98
50.150.100
51.153.102
52.156.104
53.159.106
54.162.108
55.165.110
56.168.112
57.171.114
58.174.116
59.177.118
60.180.120
61.183.122
62.186.124
63.189.126
64.192.128
65.195.130
66.198.132
67.201.134
68.204.136
69.207.138
70.210.140
71.213.142
72.216.144
73.219.146
74.222.148
75.225.150
76.228.152
77.231.154
78.234.156
79.237.158
80.240.160
81.243.162
82.246.164
83.249.166
84.252.168
255.255.255
1.2.3
87.261.174
88.264.176
89.267.178
90.270.180
91.273.182
92.276.184
93.279.186
94.282.188
95.285.190
96.288.192
97.291.194
98.294.196
99.297.198
100.300.200
101.303.202
102.306.204
103.309.206
104.312.208
105.315.210
106.318.212
107.321.214
108.324.216
109.327.218
110.330.220
111.333.222
112.336.224
113.339.226
114.342.228
115.345.230
116.348.232
117.351.234
118.354.236
119.357.238
120.360.240
121.363.242
122.366.244
123.369.246
124.372.248
125.375.250
126.378.252
127.381.254
128.384.256
129.387.258
130.390.260
131.393.262
132.396.264
133.399.266
134.402.268
135.405.270
136.408.272
137.411.274
138.414.276
139.417.278
140.420.280
141.423.282
142.426.284
143.429.286
144.432.288
145.435.290
146.438.292
147.441.294
148.444.296
149.447.298
150.450.300
151.453.302
152.456.304
153.459.306
154.462.308
155.465.310
156.468.312
157.471.314
158.474.316
159.477.318
160.480.320
161.483.322
162.486.324
163.489.326
164.492.328
165.495.330
166.498.332
167.501.334
168.504.336
169.507.338
170.510.340
171.513.342
172.516.344
173.519.346
174.522.348
175.525.350
176.528.352
177.531.354
178.534.356
179.537.358
180.540.360
181.543.362
182.546.364
183.549.366
184.552.368
185.555.370
186.558.372
187.561.374
188.564.376
189.567.378
190.570.380
191.573.382
192.576.384
193.579.386
194.582.388
195.585.390
196.588.392
197.591.394
198.594.396
199.597.398
200.600.400
201.603.402
202.606.404
203.609.406
204.612.408
205.615.410
206.618.412
207.621.414
208.624.416
209.627.418
210.630.420
211.633.422
212.636.424
213.639.426
214.642.428
215.645.430
216.648.432
217.651.434
218.654.436
219.657.438
220.660.440
221.663.442
222.666.444
223.669.446
224.672.448
225.675.450
226.678.452
227.681.454
228.684.456
229.687.458
230.690.460
231.693.462
232.696.464
233.699.466
234.702.468
235.705.470
236.708.472
237.711.474
238.714.476
239.717.478
240.720.480
241.723.482
242.726.484
243.729.486
244.732.488
245.735.490
246.738.492
247.741.494
248.744.496
249.747.498
250.750.500
251.753.502
252.756.504
253.759.506
254.762.508
255.765.510
256.768.512
257.771.514
258.774.516
259.777.518
260.780.520
261.783.522
262.786.524
263.789.526
264.792.528
265.795.530
266.798.532
267.801.534
268.804.536
269.807.538
270.810.540
271.813.542
225.816.5441
273.819.546
274.8221.548
2725.8252.550 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:48:49.310

你的模式有几个问题

```
 /^[0-9]{1,3}$/.{1}/^[0-9]{1,3}$/.{1}^[0-9]{1,3}$/ 
```

1.  `^`是字符串开头的锚点，`$`结尾的锚点。

2.  要转义特殊字符，请使用反斜杠

3.  `{1}`是多余的。

所以我们在这里结束：

```
^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ 
```

[在 Regexr 上](http://regexr.com?30rbn)查看

但这仅检查模式！它也将接受例如 000、256 和 999，但匹配某个数字范围很困难，并且需要更复杂的正则表达式。

检查范围的模式看起来像这样（我只做了一个快速测试！）

```
^(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])(?:.(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])){2}$ 
```

[在 Regexr 上](http://regexr.com?30rc3)查看

**我不建议这样做！**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-03T14:21:41.120

如果要匹配 RGB 值，请使用范围：

```
^[0-256]{1,3}(\.[0-256]{1,3}){2}$ 
```

# c# - 在设计时获取枚举的数值？

> ID：10430337
> 
> 赞同：2
> 
> 时间：2012-05-03T11:23:09.337
> 
> 标签：c#, enums

我的一位同事今天问我是否有可能在设计时获得枚举的值。我指出在运行时使用强制转换和即时窗口很容易做到这一点。

显然在 VB6 中可以使用快速信息来做到这一点，但有没有办法在设计时在 C# 中做到这一点？

枚举很大，并将其值作为 int 存储在数据库中。我们有一个错误，我们怀疑数据库中的值不再与枚举同步（可能是由于有人编辑了枚举），我们需要知道数据库中的值实际指的是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:28:00.183

Why not writing a little program that takes your enum and iterates over all fiels of the enum to print out something like "EnumEntry = EnumValue". That you get a explicit description for all fields of your enum and can do further design time analysis.

```
Array values = Enum.GetValues(typeof(myEnum));

foreach( MyEnum val in values )
{
   Console.WriteLine (String.Format("{0}: {1}", Enum.GetName(typeof(MyEnum), val), val);
} 
```

from here: [C# Iterating through an enum? (Indexing a System.Array)](https://stackoverflow.com/questions/482729/c-sharp-iterating-through-an-enum-indexing-a-system-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:31:03.383

如果您有一个带有枚举的数据库表，并且您想将其与 c# 中的枚举对齐，我建议您执行以下操作：

```
enum Whatever
{

  Value1 = 1, 
  Value2 = 2, 
  Value3 = 3
} 
```

这样做，您将主键（可能自动递增）与枚举对齐，并且它不太可能改变。如果有人出现并想添加一些随机枚举值，它不会影响现有的枚举值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T10:51:21.280

您可以在设计时使用即时窗口，除非它是 Web 应用程序和其他少数应用程序。下线： String.Format("{0:D}", *enumValue* )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:42:31.403

我猜您想`enum`直接在调试器中查看整数值而不是它们的*名称*。

您可以使用[DebuggerDisplayAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerdisplayattribute.aspx)实现此目的（请注意，必须关闭原始对象可视化）。`enum`只需按如下方式装饰您的声明：

```
[DebuggerDisplay("{ToString()} ({ToString(\"d\")})")]
enum MyEnumToDebug
{
} 
```

当您将类型变量悬停`MyEnumToDebug`在调试器中时，您将看到名称和整数值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T11:33:09.280

是的，在 c# 中也是可能的，如果您没有明确定义值，它会从 0 开始分配值，但您也可以分配值；

```
enum Days
{
Sunday=10,
Monday=20,
Tuesday=30,
} 
```

你可以得到值

```
console.WriteLine((int)Days.Sunday); //print 10
console.WriteLine(Days.Sunday); //print Sunday 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T11:24:49.163

如果没有给出明确的值，则枚举成员从 0 开始以 1 递增。您可以使用它来确定枚举的数值。

例如：

```
enum Days
{
Sunday,
Monday,
Tuesday,
} 
```

在上面，星期日=0，星期一=1，依此类推......

# asp.net - 页面加载期间菜单扩展

> ID：10430339
> 
> 赞同：7
> 
> 时间：2012-05-03T11:23:13.497
> 
> 标签：asp.net, css, internet-explorer

我在我们的应用程序中创建了一个大型菜单。在页面加载期间，此菜单会展开所有项目，然后在页面加载后折叠（到所需的设计）。这种扩展只发生了几秒钟，对客户来说看起来很奇怪。我相信这是一个浏览器问题。应该怎么做才能解决这个问题？

注意：我使用 CSS 来设计菜单，并在我的 .net 应用程序的 aspx 页面中应用了这个 CSS

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T12:24:23.723

在样式表中，添加

> 显示：无

到您的菜单根目录。在这里我假设它是**无序列表**

就是这样，你的风格将是

```
<ul id="menu" style="display:none">...</ul> 
```

在您的页面中添加 Javascript 代码。

如果您使用的是 JQuery。尝试这个，

```
jQuery(document).ready(function(){

jQuery('ul#menu').css('display','block');

}); 
```

如果它不起作用，请在您的问题中提供更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:27:05.197

最初设置菜单可见性：隐藏，仅在页面加载后将其设置为可见性：可见

# php - MYSQL PHP 按日期排序并将每个日期的结果分成组

> ID：10430346
> 
> 赞同：5
> 
> 时间：2012-05-03T11:23:34.620
> 
> 标签：php, mysql

我试图寻找解决问题的方法，但我不确定我在寻找什么，所以我运气不佳。

我有一个简单的 MySQL 数据库，其中包含一个名为“活动”的表。在该表中，我有“start_date”、“activity_description”和“activity_location”字段。

我正在尝试使用 PHP 进行 MySQL 查询并按日期升序显示结果，但是将同一日期的所有活动用标题分隔。

例如，我正在尝试实现以下目标。

**2012-05-03**

*   带狗去散步
*   公园

*   出去吃晚餐
*   小意大利餐厅

**2012-05-04**

*   获得汽车服务
*   约翰斯汽车和机械

**2012-05-05**

*   做杂货店购物
*   生鲜超市

*   去看电影
*   MegaPlex 电影院

*   与山姆见面
*   墙上的洞

到目前为止，我已经确定 MQSQL 查询需要是这样的：

```
$result = mysql_query("SELECT * FROM activities ORDER BY start_date ASC") 
```

然后显示我需要这样做的结果：

```
while($row = mysql_fetch_array($result))
{
echo 
  '<strong>' .  
  $row['start_date'] . 
  '</strong>' .
  '<ul><li>' . 
  $row['activity_description'] .
  '</li><li>' .     
  $row['activity_location'] . 
  '</li></ul>'; 
 } 
```

它给出了这样的结果，重复每个结果的日期：

**2012-05-03**

*   带狗去散步
*   公园

**2012-05-03**

*   出去吃晚餐
*   小意大利餐厅

**2012-05-04**

*   获得汽车服务
*   约翰斯汽车和机械

**2012-05-05**

*   做杂货店购物
*   生鲜超市

**2012-05-05**

*   去看电影
*   MegaPlex 电影院

**2012-05-05**

*   与山姆见面
*   墙上的洞

谁能给我一些提示，告诉我如何只在特定日期回显“start_date”一次，然后在日期与前一个日期不同时再次回显？

任何提示，无论多么神秘，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:34:23.883

只需跟踪日期。

您定义一个日期，该日期不会显示为过去的日期或只是错误的日期。

运行 lis 时，您仅在日期更改时打印标题并保存新日期。像这样：

```
$currentDate = false;
while($row = mysql_fetch_array($result))
{
if ($row['start_date'] != $currentDate){
 echo
  '<strong>' .  
  $row['start_date'] . 
  '</strong>' ;
  $currentDate = $row['start_date'];
}
 echo 
  '<ul><li>' . 
  $row['activity_description'] .
  '</li><li>' .     
  $row['activity_location'] . 
  '</li></ul>'; 
 } 
```

问候， 斯特凡

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:34:52.433

可以这样做。

```
<?php

$data = array();

$result = mysql_query("SELECT * FROM activities ORDER BY start_date ASC")

while($row = mysql_fetch_array($result))
{
    if(isset($data[$row['start_date']]))
    {
        $data[$row['start_date']][] = $row;
    }
    else
    {
        $data[$row['start_date']] = array($row);
    }
}

?>

<ul>
    <?php foreach($data as $date => $rows): ?>

    <li>
        <strong><?php echo $date; ?></strong>
        <ul>
            <?php foreach($rows as $row): ?>
                <li><?php echo $row['activity_description']; ?></li>
            <?php endforeach; ?>
        </ul>
    </li>

    <?php endforeach; ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:30:56.690

试试这个，可能有用：

```
$last_date = '';    
while($row = mysql_fetch_array($result))
    {
$display_date = ($last_date == $row['start_date']) ? '' : $row['start_date'];
    echo 
      '<strong>' .  
      $display_date . 
      '</strong>' .
      '<ul><li>' . 
      $row['activity_description'] .
      '</li><li>' .     
      $row['activity_location'] . 
      '</li></ul>'; 
$last_date = $row['start_date'];     
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:32:33.857

```
$result = array();

while($row = mysql_fetch_array($result))
{
    if (empty($result[$row['start_date']]))
    {
        $result[$row['start_date']] = array(); 
    }
    $result[$row['start_date']][] = array($row['activity_description'], $row['activity_location']);
}

foreach($result as $key=>$value)
{
    echo 
       '<strong>' .  
       $key . 
       '</strong>';
    foreach($value as $act)
    {
         '<ul><li>' . 
         $act[0] .
         '</li><li>' .     
         $act[1] . 
         '</li></ul>';
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T11:32:55.817

将日期放入变量 $date 中，并检查日期是否已更改。

```
$date = "";while($row = mysql_fetch_array($result)){
if ($date != $row['start_date'])
{
    $date = $row['start_date'];
    echo '<strong>'.$row['start_date'].'</strong>';
}
echo '<ul><li>'.$row['activity_description'].'</li><li>'.$row['activity_location'].'</li></ul>'; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T11:34:06.660

尝试这样的事情（我省略了一些样式添加以使其更清晰）：

```
$yourdate = '';
$output = '';

while($row = mysql_fetch_array($result)) {
    if ($yourdate != $row['start_date']) {
        $output .= $row['start_date'];
    }

    $output .= '<ul><li>' . 
       $row['activity_description'] .
      '</li><li>' .     
      $row['activity_location'] . 
      '</li></ul>';
}

echo $output; 
```

# scala - 来自超级特征的隐式参数解析

> ID：10430357
> 
> 赞同：5
> 
> 时间：2012-05-03T11:23:56.173
> 
> 标签：scala, implicit

我正在尝试使用隐式参数将依赖项“注入”到我的类中，如下所示：

```
trait Bar {
    def m:String
}

object Bar {
    implicit val objBar = new Bar{ val m = "from object" } 
}

trait FooTrait { 
    def aBar(implicit bar:Bar) = bar
    def go = { aBar.m }
} 
```

在这里，编译器从伴随对象`FooTrait`中的隐式 val提供隐式参数。`Bar`这样做：

```
scala> println((new FooTrait{}).go)
from object 
```

给了我我期望的结果。但是，如果我将 FooTrait 和另一个特征混合在一起，例如：

```
trait SuperFoo {
    implicit val superBar = new Bar{ val m = "from super" }
} 
```

结果是一样的：

```
scala> println((new FooTrait with SuperFoo).go)
from object 
```

我认为编译器会`SuperFoo`在尝试通过检查`Bar`伴随对象来解析隐式参数之前查看。这篇[博文](http://daily-scala.blogspot.se/2010/04/implicit-parameter-resolution.html "隐式参数解析")指出：

> 对于将隐式值应用于隐式参数有非常严格的规则。考虑它的一种简单方法是使用“最接近”的定义。本地范围、封闭类、父类、所需类型的伴随对象。

我是否遗漏了什么，或者这是 scalas 隐式参数的已知限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T13:38:30.983

调用`aBar`是在内部定义的`FooTrait`。当这个 trait 编译时，本地范围、封闭类或父类中没有适当的隐式。当您稍后混合另一个特征时，编译器不会尝试重新查找隐含。所以它只使用伴随对象的默认隐式。

`SuperFoo`如果您覆盖方法，您可以从中获得价值`go`：

```
scala> println((new FooTrait with SuperFoo {override def go = {aBar.m}}).go)
from super 
```

您还可以重新定义类层次结构以从父特征中获取隐式：

```
trait BarHolder { 
    implicit val superBar: Bar
}
trait FooTrait extends BarHolder { 
    def aBar(implicit bar:Bar) = bar
    def go = { aBar.m }
}
trait DefaultFoo extends BarHolder {
    val superBar = implicitly[Bar]
}
trait SuperFoo extends BarHolder {
    val superBar = new Bar{ val m = "from super" }
} 
```

并以这种方式使用它：

```
scala> println((new FooTrait with DefaultFoo).go)
from object

scala> println((new FooTrait with SuperFoo).go)
from super 
```

# extjs - ExtJS 日期字段 - UI 选择重置 URL #（片段标识符）

> ID：10430358
> 
> 赞同：0
> 
> 时间：2012-05-03T11:24:16.580
> 
> 标签：extjs, datepicker, extjs3

我在`datefield`a 中创建了一个 ExtJS 3.4 组件`<form>`，但是每当我单击日期选择器时，它会将 URL #（片段标识符）设置为空白。

这会导致页面滚动到屏幕顶部；向下滚动到日期选择器显示单击对日期选择器没有影响（在选择原始日期时仍然可见）。

任何想法将不胜感激......

# api - 从 Linkedin API 中提取随机的个人资料图片

> ID：10430363
> 
> 赞同：0
> 
> 时间：2012-05-03T11:24:47.967
> 
> 标签：api, rest, linkedin

我正在制作一个 iPhone 应用程序，它需要拉入随机的 Linkedin 个人资料图片（可公开访问）。我可以简单地发送随机配置文件 ID 的请求，但这似乎非常低效。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:12:55.493

LinkedIn API 不适用于未经身份验证的用户进行的搜索（也不是随机搜索）。理论上您可以执行以下操作：1) 使用应用程序授权用户 2) 以该用户身份搜索随机字符串 3) 显示其中一个结果的个人资料图片

使用条款不允许您创建“主用户”并在未对使用该应用程序的每个用户进行身份验证的情况下访问 API。

# .net - Cruise Control .NET - 数据库架构迁移

> ID：10430368
> 
> 赞同：0
> 
> 时间：2012-05-03T11:25:03.693
> 
> 标签：.net, continuous-integration, cruisecontrol.net

我们有下一个：

*   对 db 进行大量更改的大型解决方案
*   生产数据库（是主参考数据库
*   每个开发人员的本地数据库
*   Changescripts 提交（对主参考数据库的更改）
*   对数据库进行更改的文件夹：sql 文件列表，如 010.SomeFeature.sql、020.SomeFeature.sql
*   mysql

我们需要什么：在每次提交新的 sql 文件时，我们需要：

*   回测数据库到主转储
*   从头到尾应用所有更改脚本
*   运行了脚本日志
*   每个脚本都有一个状态 seccess/fail

任何的想法？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:00:20.553

[CruiseControl.NET 与Nant](http://nant.sourceforge.net/)有很好的集成，这比 CCNET 在构建的一般脚本方面要好得多。如果是我，我会使用 Nant 重新加载您的测试数据库，并应用于更改。它还允许您检查每个脚本的状态。日志记录自动与 CCNET 集成。

# iphone - 如果应用程序长时间处于后台，UIAlertView 不显示

> ID：10430369
> 
> 赞同：0
> 
> 时间：2012-05-03T11:25:03.843
> 
> 标签：iphone, ios, nsnotifications

在我的（iPhone）应用程序中，我跟踪应用程序的活动时间。如果超过特定值（比如 15 分钟），登录视图将显示给带有警报视图的用户。如果应用程序在后台的时间过长，此行为类似。然后，当应用再次激活时，警报视图将呈现给用户。

但问题是当应用程序在后台很长时间并且应用程序再次变为活动状态时，AlertView 不会向用户显示。我正在使用 NSNotifications 来通知会话是否超时。

基本流程是这样的

启动 App -> 将 App 置于后台 -> applicationDidBecomeActive: -> 检查会话是否超时 -> 显示登录视图 -> 发布注销通知

接收器将显示警报视图。我将接收逻辑放在应用程序委托和登录视图中。但是在这两种情况下，如果它长时间处于后台，alertview 都不会显示。

我的问题是我可以延迟收到通知吗？我想在登录视图出现后接收它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:32:04.887

接收通知是您的应用程序的委托方法，它将在实现它的地方接收。但是您可以设置不同的标志来检查应用程序是否处于活动状态。

例如在应用程序中

设置标志 isActive = no;

并在接收通知检查 isActive 中设置一个标志 hasReceivedNotification=YES; 并将数据存储到某个地方

并且在应用程序中确实变为活动检查应用程序是否处于活动状态并收到远程通知设置第三个标志 shouldShowAlertOnLoginView = YES; // 通知数据以防万一显示

并在 loginview 检查 appDelegate.shouldShowAlertOnLoginView == YES

然后显示带有数据的警报

# java - 在 Java 1.5 中截断浮点数，不包括 setRoundingMode

> ID：10430370
> 
> 赞同：0
> 
> 时间：2012-05-03T11:25:09.840
> 
> 标签：java, format, jdk1.5

我想截断 Java 中的浮点值。

以下是我的要求：

> 1.  如果我有 12.49688f，它应该打印为 12.49 而不四舍五入
> 2.  如果是双精度的 12.456，应该打印为 12.45 不四舍五入
> 3.  在任何情况下，如果该值类似于 12.0，则应仅将其打印为 12。
> 
> 条件3要始终牢记。它应该与截断逻辑同时发生。

PS：我正在使用 Java 1.5 。所以我知道如何在 Java 1.6 中做到这一点，即使用十进制格式和调用`setroundingMode ()`方法。我需要了解 Java 1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:28:59.440

在将数字提供给 DecimalFormat 之前，使用[Math#floor和除法进行乘法运算。](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#floor%28double%29)这与截止圆角相同。

```
// Replace N with the desired number of decimals after the comma
number = Math.floor(1eN * number) / 1eN 
```

由于浮点计算中的舍入错误，这并不完美，因此您仍然必须为 DecimalFormat 指定 N 个小数。

一种（更昂贵，但也更合乎逻辑）的替代方法是使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)。

```
// Given as seperate statements for clarity, but these can be combined into a single line
// Replace "N" with the number of decimals after the comma
MathContext NDecimals = new MathContext(N, RoundingMode.FLOOR);
BigDecimal bdNumber = new BigDecimal(number, NDecimals);
number = bdNumber.doubleValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:29:15.853

将其转换为字符串并截断句点后第二个数字之后的任何内容。修剪“0”和“.” 如果有一个“。”

```
String x = Double.toString (12.456); // or Float.toString (12.49688f);

int pos = x.indexOf ('.');  // 
if (pos >= 0) {
  int end = Math.min(pos + 2, x.length() - 1); // truncate after 2 digits
  while (x.charAt (end) == '0') end --;  // trim 0
  if (x.charAt (end) == '.') end --; // trim .
  x = x.substring(0, end + 1);       // really truncate
} 
```

（经过测试，在我的环境中工作）

# iphone - 如何根据textview多行在iphone中输入单词增加行高

> ID：10430373
> 
> 赞同：-2
> 
> 时间：2012-05-03T11:25:28.530
> 
> 标签：iphone, objective-c

我想知道如何在运行时在 tableviewcell 上给 textview并且具有单元格高度的文本在这方面对我有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:41:11.757

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {  

       UITextView *yourtextview;// use your memoir class textview. I am declare here temporary.
       CGSize s = [yourtextview.text sizeWithFont:[UIFont systemFontOfSize:15] // enter your text font size and  cell-width
                    constrainedToSize:CGSizeMake(yourcellwidth, MAXFLOAT)  // - 40 For cell padding
                        lineBreakMode:UILineBreakModeWordWrap];    

       return s.height;    //this will give you height of text view you can change using addition according your requirements
} 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:33:17.443

我希望我能正确理解您的问题：您希望 UITableViewCell 内有一个 UITableView，两者都具有动态高度，对应于 TextView 中的文本。

[Sensible TableView](http://www.sensiblecocoa.com/)包含此功能（还有更多功能）。

[这篇博文](http://www.hanspinckaers.com/multi-line-uitextview-similar-to-sms)也可能有所帮助。

[来自stackoverflow的问题](https://stackoverflow.com/a/4242916/470964)

我希望这个链接会对你有所帮助。我认为您可以使用链接中的源代码来实现该行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:36:14.260

您可以从文本视图中的文本计算大小，然后您可以调整特定行或 texview 的大小，方法是 -

`CGSize Size = [text sizeWithFont:font constrainedToSize:CGSizeMake(width, 9999) lineBreakMode:UILineBreakModeWorldWrap];`

# dreamweaver - Dream Weaver CS5如何保存代码崩溃状态？

> ID：10430374
> 
> 赞同：3
> 
> 时间：2012-05-03T11:25:29.630
> 
> 标签：dreamweaver

在Dreamweaver CS5中折叠代码时，只要文件在同一文件夹中，折叠状态就会保存，但是当将文件复制到新文件夹时，折叠状态消失并且代码展开，所以有人知道如何保持即使在复制代码或将其上传到服务器后，代码也会崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:24:51.463

![在此处输入图像描述](../Images/dfd7e48ade2f8b91abbd81f3b2277d53.png)

如果您指的是此功能，那么它是在dreamweaver 中设置的，而不是在文件中，因此当您移动文件时，dreamweaver 会将其视为不同的文件，如下所示：

```
root/index.php 
```

并搬到了另一个地方

```
root/another_folder/index.php 
```

所以每次移动它时都必须重置它。

希望这可以帮助

# c++ - winapi - 未记录的 Windows 消息 0x0313 稳定吗？

> ID：10430377
> 
> 赞同：1
> 
> 时间：2012-05-03T11:25:38.787
> 
> 标签：c++, windows, winapi

我发现了这个未记录的 Windows 消息，十六进制代码：0x0313，当用户右键单击应用程序的任务栏按钮时发送。这是否稳定使用/捕获？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:36:14.290

它已经工作了很多年，所以虽然不能保证它在未来的版本中会起作用，但它更有可能会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:39:07.327

没有保证，但实际上它可能不会消失。

我用谷歌搜索它只是为了确保它不是例如记录在案的 MFC 消息。

一个结果，来自[http://delphi.about.com/od/vclwriteenhance/a/ttaskbarmenu.htm](http://delphi.about.com/od/vclwriteenhance/a/ttaskbarmenu.htm)：

> 当您右键单击任务栏按钮时，Windows 会向相应的应用程序窗口发送一条未记录的消息 ($0313)。WPARAM 未使用（零），LPARAM 以通常的格式包含屏幕坐标中的鼠标位置。默认情况下，WindowProc 通过在给定坐标处弹出系统菜单来处理此消息。

显然，您可以使用它来弹出您自己的自定义菜单，但在此之前，我会使用例如 Spy++ 来检查它是否可能生成可以处理的文档化消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:30:06.397

Undocumented features and messages are subjected to change. You should not rely on that this message is sent in the same way in another version of windows or that the parameters are in the same format.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:31:06.010

如果您可以保证它可以在以下情况下使用，它将是稳定的：

1) 当前使用的所有 Windows 版本。

2) 将在您的应用程序的预期生命周期内发布的所有 Windows 版本。

所以不行。

# html - 移动网站滚动

> ID：10430382
> 
> 赞同：0
> 
> 时间：2012-05-03T11:25:50.050
> 
> 标签：html, mobile, scroll, smooth-scrolling

在我的移动网站上向下滚动页面时，内容会消失并显示灰色和白色的小方块。一旦您停止滚动，内容就会重新出现。

有没有办法防止这种情况发生？

我的代码：

```
<html>
   <head>
      <title>PHP Test</title>
      <!-- Code within Head Tag -->
      <script type="text/javascript" src="jquery.js"></script>
      <script type="text/javascript">
          $(window).load(function(){
              $("#loading").hide();     
          })
      </script>
      <!-- Code within Head Tag -->

      <style type="text/css">
          /* Document Styles */

          #wrapper{
              width:800px;
              height:500px;
              margin:0 auto;
              padding:5px;
              border:1px solid #CCC;
              background:#CCC;
          }
          .desc{
              margin:5 auto;
              width:800px;
              text-align:left;
          }

          /* Loading Div Style */
          #loading{
              position:absolute;
              width:300px;
              top:0px;
              left:0%;
              margin-left:5px;
              text-align:left;
              padding:7px 0 0 0;
              font:bold 11px Arial, Helvetica, sans-serif;
          }
          body {
              overflow: hidden
          }
      </style>
      <meta name="apple-mobile-web-app-status-bar-style" content="black">
      <meta name="format-detection" content="telephone=no">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   </head>
   <body>
       <center>
           <form>
               <!-- Loading Div -->
               <div id="loading">
                   Fetching Hotels, please wait..
                   <img src="loading.gif" alt="loading.." />
               </div>
               <!-- Loading Div -->
               <br>
               <input type=text value="destination" name=title onclick="this.value = '';"><br>
               Date:<br>
               <select name="month">
                   <option value="1">January
                   <option value="2">February
                   <option value="3">March
                   <option value="4">April
                   <option value="5">May
                   <option value="6">June
                   <option value="7">July
                   <option value="8">August
                   <option value="9">September
                   <option value="10">October
                   <option value="11">November
                   <option value="12">December
               </select>
               <select name="day">
                   <option value="1">1
                   <option value="2">2
                   <option value="3">3
                   <option value="4">4
                   <option value="5">5
                   <option value="6">6
                   <option value="7">7
                   <option value="8">8
                   <option value="9">9
                   <option value="10">10
                   <option value="11">11
                   <option value="12">12
                   <option value="13">13
                   <option value="14">14
                   <option value="15">15
                   <option value="16">16
                   <option value="17">17
                   <option value="18">18
                   <option value="19">19
                   <option value="20">20
                   <option value="21">21
                   <option value="22">22
                   <option value="23">23
                   <option value="24">24
                   <option value="25">25
                   <option value="26">26
                   <option value="27">27
                   <option value="28">28
                   <option value="29">29
                   <option value="30">30
                   <option value="31">31
               </select>
               <select name="year">
                   <option value="2012">2012
                   <option value="2013">2013
                   <option value="2014">2014
               </select>
               <br><br>
               No. of Nights:
               <select name="nights">
                   <option value="1">1
                   <option value="2">2
                   <option value="3">3
                   <option value="4">4
                   <option value="5">5
                   <option value="6">6
                   <option value="7">7
                   <option value="8">8
                   <option value="9">9
                   <option value="10">10
                   <option value="11">11
                   <option value="12">12
                   <option value="13">13
                   <option value="14">14
                   <option value="15">15
                   <option value="16">16
                   <option value="17">17
                   <option value="18">18 
               </select>

               <input type=submit>

               <?php
                   // specify url of xml file
                   $url = "http://xmlfeed.laterooms.com/index.aspx?aid=1000&rtype=4&kword=".$_GET['title']."&sdate=".$_GET['year']."-".$_GET['month']."-".$_GET['day']."&nights=".$_GET['nights']."&orderby=hoteldistance&sortorder=asc";
                   // get xml file contents
                   $xml = simplexml_load_file($url);

                   // loop begins
                   $i = 0;
                   foreach($xml->hotel as $hotel)
                   {
                       if (++$i > 20) {
                           // stop after 5 loops
                           break;
                       }
                       // begin new paragraph
                       echo "<p>";
                       echo "<img src=".$hotel->images." height=100 width=100><br/>";
                       echo "<strong>Hotel Name:</strong> ".$hotel->hotel_name."<br/>";
                       echo "<strong>Prices From:</strong> &pound;".$hotel->prices_from."<br/>";
                       echo "<a href=".$hotel->hotel_link."><img src=http://affiliates.laterooms.com/AffiliateImages/en/buttons/more_details1.gif></a><br/>";
                       echo "<strong>Miles from ".$_GET['title']."</strong> ".$hotel->hotel_distance."<br/>";
                       echo "</p>";
                       // end paragraph
                   }
                   $cnt++;
                   // loop ends    
               ?>    
           </form> 
       </center>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:17:37.943

我认为你无法阻止这一点。（可能有一个解决方法很难）

我认为这就是浏览器和渲染的工作方式。只有页面的可见部分被渲染，如果你滚动页面，它必须渲染新的可见区域。直到它显示棋盘。然而，为了节省资源和出于性能原因（避免滚动不稳定），只有在停止滚动时才会进行渲染。

所以解决方法部分：

如果您创建自己的滚动机制，您可以实现您想要的，但也有一些缺点。它可能很慢，这可能会导致某些移动浏览器不兼容等。

基本思想是你把你的内容放在一个“全屏”div中，溢出：隐藏，并使用javascript捕捉（并覆盖）touchstart、touchend、touchmove、touchcancel事件，并自己滚动div的内容，显示你自己的滚动条等。它并不太复杂，但是如果你想用反弹和过度滚动等“正确”地做到这一点，还有很多事情要做。请参阅 iscroll4，它可以为您做到这一点:)

# soapui - 通过代理转发 Soap UI 请求

> ID：10430385
> 
> 赞同：1
> 
> 时间：2012-05-03T11:25:57.650
> 
> 标签：soapui, tunneling

我正在使用 proxifier 来传输我的请求，如何将我的 soap UI 请求转发到 proxifier 以便我可以测试我的 Web 服务？webservice 的 IP 地址已经添加到 proxifier 的代理规则中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T20:41:05.593

我对 SoapUI-x64-4.6.4.exe、Windows 7 x64 和 Sun Java 1.6 x64 有完全相同的问题尝试下载 SoapUI-4.6.4-windows-bin.zip 解压缩并使用 bat 文件运行。此版本通过 proxifier 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:42:08.593

根据 Proxifier 的[文档](http://www.proxifier.com/documentation/v3/)：

> Proxifier 允许您：
> 
> *   通过代理服务器运行任何网络应用程序。软件无需特殊配置；整个过程是完全**透明**的。

我会问这个问题 - 你如何错误配置代理 - 检查它的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:36:47.107

我找不到解决方案，但我能够找到替代方案。

它是**Mozzilla FireFox**的一个插件，插件名称是**Soa Client**。

要添加此插件，只需转到工具，单击插件并搜索 soa 客户端。

# python - 使用 python 解释器安装 pip

> ID：10430387
> 
> 赞同：3
> 
> 时间：2012-05-03T11:26:07.443
> 
> 标签：python, pip, scrapy, easy-install

我对 Python 的内部工作原理相当陌生。

我一直在尝试解决这里看到的错误， [Scrapy on Windows XP ImportError: No module named w3lib.html](https://stackoverflow.com/questions/8292379/scrapy-on-windows-xp-importerror-no-module-named-w3lib-html)

我安装了easy_install，所以我可以重新安装Scrapy，但我无法让它做任何事情。我可以导入easy_install，但我希望能够运行easy_install /my_downloads/OtherPackage-3.2.1-py2.3.​​egg 或easy_install [http://example.com/path/to/MyPackage-1.2 之类的东西。 3.tgz](http://example.com/path/to/MyPackage-1.2.3.tgz) 来安装依赖项之一，但显然我做错了。

我也不知道如何从这里安装 pip [http://www.pip-installer.org/en/latest/installing.html#using-the-installer](http://www.pip-installer.org/en/latest/installing.html#using-the-installer)

我想我的问题是如何运行如下命令？$ curl [https://raw.github.com/pypa/pip/master/contrib/get-pip.py](https://raw.github.com/pypa/pip/master/contrib/get-pip.py) | Python

我正在使用最新的免费 enthought 包，我认为 pylab 界面或 python.exe 会让我运行这个命令。我想我只是在寻找有关如何使用解释器安装所需软件包来解决原始问题的链接或纲要。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:45:15.790

要获得`easy_install`，您想`setuptools`使用此处提供的可执行安装程序安装 Windows：http: [//pypi.python.org/pypi/setuptools](http://pypi.python.org/pypi/setuptools)

例如，如果您在 32 位 Windows 上运行 Python 2.7，则安装程序将是： `setuptools-0.6c11.win32-py2.7.exe`.

这将安装`setuptools`，它`easy_install.exe`位于您的`C:\Python27\Scripts`目录中。

安装后，您可以安装 pip（或PyPI 中的*任何*软件包），如下所示：

`C:\Python27\Scripts\easy_install pip`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:40:43.677

首先使用适用于 Windows 的[官方 Python 安装程序](http://http://python.org/download/)安装 Python 。接下来，为 windows 下载并安装[setuptool](http://www.lfd.uci.edu/~gohlke/pythonlibs/#setuptools)，最后[为 windows 安装 pip](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip)。

完成此操作后，您可以使用`pip install scrapy`.

# ios - 在 iOS 上开发回合制游戏的最简单框架？

> ID：10430390
> 
> 赞同：1
> 
> 时间：2012-05-03T11:26:17.223
> 
> 标签：ios, asynchronous, game-center

我正计划制作一款回合制游戏，我正在研究各种选项，想知道哪种方式最好？

iOS5 中有 Game Center 和回合制 API，但这似乎是一条很难走的路，只有大约 1 个在线[教程](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)（我是 obj-c 的新手）来帮助实现这一目标

或者也许最好使用另一个 API，也许是[这样的](http://gameminion.com/)

有没有其他的选择，还是差不多？我正在寻找最直接的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:54:22.800

这取决于你的游戏有多复杂。Game Center 的好处是它是免费的（与 Game Minion 相比）并且 Apple 支持它（与运行您自己的服务器相比）。

我会说游戏中心是最直接的选择。Ray 的教程非常好，通过使用 Game Center 与其他解决方案相比，您可能会成为更好的 Objective-c 程序员。

编辑：随着 Mac OS X Mountain Lion 将 Game Center 引入 Mac，一旦 Mountain Lion 在今年夏天发布，它在技术上就是跨平台的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T22:22:43.040

您可能想看这里：[iOS 客户端/服务器 - 我应该使用 GameCenter 吗？](https://stackoverflow.com/questions/10212036/ios-client-server-should-i-use-gamecenter)

游戏中心似乎是一个自然的选择。另一个优势是您的游戏将在 Game Center 浏览器中列出，这意味着您可以获得更多下载和更多利润。

一个最重要的缺点：Game Center 不是跨平台的，而且永远不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T22:37:12.097

绝对去游戏中心。我们仍然不知道 iOS 6 会带来什么，但我感觉 Game Center 会发展得更多。经过几天的调查和努力，很容易让一些简单的东西启动并运行。正如 Brian 所说，Ray 的教程很棒，如果你真的想了解它，你应该考虑购买他的书《iOS by Tutorials》，Apress 也有一本完全关于 Game Center 的书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:04:40.947

这里的帖子很到位，如果你有相对简单的要求并且你的目标平台是 iOS，那么你不会出错 Game Center。集成非常简单，有很多信息可以帮助您启动和运行。另外，这里有很多经验可以提供帮助。

如果您希望支持多个平台并且需要额外的花里胡哨，那么我建议您查看我们的服务；游戏小黄人[http://gameminion.com](http://gameminion.com)。

# android - 如何在android relativelayout周围放置边框？

> ID：10430392
> 
> 赞同：24
> 
> 时间：2012-05-03T11:26:24.543
> 
> 标签：android, border, android-relativelayout

我已经看到这个 关于在 android textview 周围放置边框的主题，我使用了它[。](https://stackoverflow.com/questions/3182723/android-draw-custom-border-around-listview)但是现在，我想在位于相对布局中的小部件周围放置一个边框。我该怎么做？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2015-10-19T10:45:04.473

1.  在您的`res/drawable`文件夹中，创建一个新文件`background_border.xml`

在此文件中，您将像这样定义小部件的背景：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle" >
    <!-- This is the stroke you want to define -->
    <stroke android:width="1dp" 
            android:color="@color/color_stroke"/>

    <!-- Optional, round your corners -->
    <corners android:bottomLeftRadius="0dp"
             android:topLeftRadius="5dp"
             android:bottomRightRadius="5dp"
             android:topRightRadius="0dp" />

    <!-- Optional, fill the rest of your background with a color or gradient, use transparent if you only want the border to be displayed-->
    <gradient android:startColor="@android:color/transparent"
              android:endColor="@android:color/transparent"
              android:angle="90"/>
</shape> 
```

2.  将小部件的背景设置为您刚刚创建的可绘制配置

例如。如果您想将边框放在相对布局上：

```
<RelativeLayout            
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/background_border"
            android:padding="15dp">
    ...
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-12T07:21:48.640

```
RelativeLayout layout = (RelativeLayout) view.findViewById(R.id.borderEffect); // id fetch from xml
ShapeDrawable rectShapeDrawable = new ShapeDrawable(); // pre defined class

// get paint
Paint paint = rectShapeDrawable.getPaint();

// set border color, stroke and stroke width
paint.setColor(Color.GRAY);
paint.setStyle(Style.STROKE);
paint.setStrokeWidth(5); // you can change the value of 5
layout.setBackgroundDrawable(rectShapeDrawable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:32:35.380

创建一个 FrameLayout 来获取边框的背景颜色，以及边框宽度的边距或填充，并将该 FrameLayout 放置在 RelativeLayout 中。将 TextView 放在 FrameLayout 中，而不是直接放在 RelativeLayout 中。*噗*瞬间边框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-30T11:44:40.630

尽管所有提供的答案都有效，但它们非常死板。如果您想为不同的屏幕自定义边框颜色、边框厚度怎么办。为此，您应该尝试我的解决方案。我们将按照三个步骤创建自定义 RelativeLayout，允许您为底部边框提供边框颜色和厚度。

1)创建一个扩展RelativeLayout并覆盖Draw方法的类

```
public class BorderRelativeLayout extends RelativeLayout {

  private float borderThickness;
  private int borderColor;

  public BorderRelativeLayout(Context context) {
    this(context, null, 0);
  }

  public BorderRelativeLayout(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
  }

  public BorderRelativeLayout(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    init(context, attrs);
  }

  @Override
  protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    Rect rect = new Rect();
    Paint paint = new Paint();
    paint.setColor(borderColor);
    paint.setStrokeWidth(borderThickness);
    getLocalVisibleRect(rect);
    canvas.drawLine(rect.left, rect.bottom, rect.right, rect.bottom, paint);
  }

  private void init(Context context, AttributeSet attrs) {
    setWillNotDraw(false);

    TypedArray array = context.obtainStyledAttributes(attrs, R.styleable.BorderRelativeLayout);

    borderThickness = array.getDimension(R.styleable.BorderRelativeLayout_borderThickness, 0.5f);
    borderColor = array.getColor(R.styleable.BorderRelativeLayout_borderColor,
        ContextCompat.getColor(context, R.color.colorPrimary));
  }
} 
```

2) 在 attrs.xml 中定义可样式化的属性

```
<declare-styleable name="BorderRelativeLayout">
    <attr name="borderThickness" format="dimension"/>
    <attr name="borderColor" format="color"/>
  </declare-styleable> 
```

3）你完成了，你可以像使用它一样使用它

```
<com.spacewek.spacewek.controls.BorderRelativeLayout
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:id="@+id/headLayout"
      app:borderThickness="2dp"
      app:borderColor="@color/divider_new_color">

 </com.spacewek.spacewek.controls.BorderRelativeLayout> 
```

# oracle - 将查询从 Oracle 转换为 TSQL

> ID：10430395
> 
> 赞同：0
> 
> 时间：2012-05-03T11:26:40.830
> 
> 标签：oracle, sql-server-2008

我有一个在 Oracle 上运行非常快的查询。

`field1`和`field2`都是`field3`整数

```
select * FROM MY_TABLE P WHERE   
USER_ID = 167 AND 
(field1,field2,field3) NOT IN 
( SELECT field1,field2,field3 FROM EXCLUSION_TABLE) 
```

我把它翻译成 T/SQL (SQL Server 2008R2)

```
select * FROM MY_TABLE P WHERE   
USER_ID = 167 AND 
(cast(field1 as varchar)+ ','+cast(field2 as varchar)+ ','+
cast(field3 as varchar)) 
NOT IN 
( SELECT cast(field1 as varchar)+ ','+cast(field2 as varchar)+ ','+
cast(field3 as    varchar) FROM EXCLUSION_TABLE) 
```

有没有人知道我可以如何以不同的方式做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:31:26.943

也许是这样的：

```
select * 
FROM MY_TABLE P 
WHERE USER_ID = 167 
AND NOT EXISTS
(
    SELECT
        NULL
    FROM
        EXCLUSION_TABLE
    WHERE
        EXCLUSION_TABLE.field1=P.field1
        AND EXCLUSION_TABLE.field2=P.field2
        AND EXCLUSION_TABLE.field3=P.field3
) 
```

你可以在 oracle 中做同样的事情

# java - 为android应用程序设置声音

> ID：10430402
> 
> 赞同：0
> 
> 时间：2012-05-03T11:26:56.927
> 
> 标签：java, android, audio

我正在开发一个在android中的应用程序。`OnPause()`我用和为我的应用程序主页添加了媒体播放器声音`OnResume()`，但问题是当我转到另一个页面时声音停止。有什么代码可以让它继续吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:30:11.967

Play the sound in your service.Not the activity.

# iphone - 使用低功耗蓝牙将 iPhone 4s 与 iPad3 连接

> ID：10430405
> 
> 赞同：0
> 
> 时间：2012-05-03T11:27:04.797
> 
> 标签：iphone, objective-c, ipad, core-bluetooth, bluetooth-lowenergy

谁能指出我使用 BLE 将 iPhone 4S 连接到 iPad 3 的示例？

我编写了一个示例应用程序，当我像这样使用 CBCentralManager 时：

```
[centralManager scanForPeripheralsWithServices:uuidArray options:options]; 
```

要扫描设备，iPhone 和 iPad 似乎看不到对方。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:56:37.013

iPad 不是蓝牙低功耗设备。BLE 设备通常是手表、心率监测器等。

这就是为什么您看不到使用 CoreBluetooth 的 iPad 的原因。

考虑使用 GameKit 进行 iPhone-iPad 蓝牙通信？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:36:45.140

除了其他答案之外，蓝牙规范指出双模混合设备将使用经典的 bt 无线电而不是 ble 无线电。您只能将 ble 无线电与单模 ble 设备一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:22:00.730

新 iPad（第 3 代）确实具有蓝牙 4.0，但您无法使用 BT4.0 在两个 iOS 设备之间进行通信。

您只能与外部传感器通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T21:35:16.763

如果你想在两个低功耗蓝牙设备之间进行通信，你必须等待 iOS 6，它将支持 BLE 上的服务器功能。

# php - 为什么 mysqli_fetch_fields() 给我的结果不准确？

> ID：10430406
> 
> 赞同：2
> 
> 时间：2012-05-03T11:27:04.807
> 
> 标签：php, mysql, mysqli

结果`length`是`mysqli_fetch_fields()`给我不准确的结果。

MySQL >`DESCRIBE Notices;`

```
Field     Type               Null     Key     Default     Extra
Id        int(10) unsigned   NO       PRI     (NULL)      auto_increment
UserId    int(10) unsigned   NO       MUL     (NULL)
Title     char(255)          NO               (NULL)
Name      char(255)          NO               (NULL)
Summary   text               NO               (NULL) 
```

然而，

```
class Db {
    public function exec($sql) {
        if (!$this->link) {
            $this->open();
        }
        if (($this->result = mysqli_query($this->link, $sql)) === false) {
            throw new Exception('<b>' . __METHOD__ . '</b>: ' . $sql . ': ' . mysqli_error($this->link));
        }
        return true;
    }
    public function field_info($table) {
        $sql = 'SELECT * FROM `' . $table . '` LIMIT 1';
        $this->exec($sql);
        return $this->field_info = $this->result->fetch_fields();
    }
}

$a  = $db->field_info('Notices');
print_r($a); 
```

产生以下输出：

```
// Note: "max_length" is the maximum existing length in the result set,
// while "length" is the set maximum length in the table definition.

Array
(
    [0] => stdClass Object
        (
            [name] => Id
            [orgname] => Id
            [table] => Notices
            [orgtable] => Notices
            [def] =>
            [max_length] => 1
            [length] => 10
            [charsetnr] => 63
            [flags] => 49699
            [type] => 3
            [decimals] => 0
        )

    [1] => stdClass Object
        (
            [name] => UserId
            [orgname] => UserId
            [table] => Notices
            [orgtable] => Notices
            [def] =>
            [max_length] => 1
            [length] => 10
            [charsetnr] => 63
            [flags] => 53289
            [type] => 3
            [decimals] => 0
        )

    [2] => stdClass Object
        (
            [name] => Title
            [orgname] => Title
            [table] => Notices
            [orgtable] => Notices
            [def] =>
            [max_length] => 27
            [length] => 765
            [charsetnr] => 33
            [flags] => 4097
            [type] => 254
            [decimals] => 0
        )

    [3] => stdClass Object
        (
            [name] => Name
            [orgname] => Name
            [table] => Notices
            [orgtable] => Notices
            [def] =>
            [max_length] => 25
            [length] => 765
            [charsetnr] => 33
            [flags] => 4097
            [type] => 254
            [decimals] => 0
        )

    [4] => stdClass Object
        (
            [name] => Summary
            [orgname] => Summary
            [table] => Notices
            [orgtable] => Notices
            [def] =>
            [max_length] => 26
            [length] => 196605
            [charsetnr] => 33
            [flags] => 4113
            [type] => 252
            [decimals] => 0
        )
) 
```

如果您查看，您会发现报告的`CHAR`字段长度不匹配。`DESCRIBE`一边给我`255`，一边`fetch_fields()`给我`765`。为什么？

（如果您想知道，这个想法是为标签生成一个`maxlength`属性。）`<input>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:39:59.047

您的字段长度为 255 个**字符**，但报告的长度以**字节**为单位。

由于 MySQL对 UTF-8 排序规则[每个字符使用 3 个字节](https://dev.mysql.com/doc/refman/5.0/en/charset-unicode-utf8.html)`765`，因此结果为 255*3 =。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T10:57:47.200

`length`以及/输出中的`charsetnr`值显然取决于客户端定义的默认字符集。`mysqli_result::fetch_fields()``mysqli_fetch_fields()`

例如 a `charsetnr`of`33`代表 UTF-8。准确地说，它实际上代表字符集“utf8”的排序规则“utf8_general_ci”。可以通过执行以下查询来检索该信息：

```
SELECT * FROM information_schema.collations; 
```

可以通过以下查询检索可用字符集及其字符长度的列表：

```
SELECT * FROM information_schema.character_sets; 
```

默认客户端字符集可以通过 PHP 调用`mysqli::set_charset()`/来更改`mysqli_set_charset()`。

**例子：**

```
$dbHandle->set_charset('latin1'); 
```

当前的 PHP 文档`mysqli_fetch_fields()`不包含该信息，因此我要求将其添加到[bug 68573](https://bugs.php.net/bug.php?id=68573)中。

默认字符集也可以[在服务器配置中定义](http://dev.mysql.com/doc/refman/5.6/en/charset-configuration.html)，如[另一个线程](https://stackoverflow.com/a/3513812/432681)中所述。

由于这种行为`fetch_fields()`非常令人困惑，我要求在[错误 68574](https://bugs.php.net/bug.php?id=68574)中对其进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T18:08:41.233

我划分结果：

```
$result = mysqli_query($con,"SELECT * from tabla");
$campoTD = mysqli_fetch_fields($result);
  foreach ($campoTD as $campo){
    echo '<input maxlength='.number_format($campo[$i]->length / 3).' >';
    $i++;
  } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T22:10:31.630

我有同样的问题，发现你需要使用： $val->length;

不是 max_length，max_length 是该特定列中的值的最大长度，而不是表 def。

如果您希望表定义使用“长度”。

```
$q = $mysqli->query("select * from table");

$finfo = $q->fetch_fields();

foreach ($finfo as $val) {

    echo $val->length;

} 
```

参考： http: [//php.undmedlibrary.org/manual/de/function.mysqli-fetch-fields.php](http://php.undmedlibrary.org/manual/de/function.mysqli-fetch-fields.php)

# xslt - 使用基于参数的 XSLT 更新元素的文本

> ID：10430411
> 
> 赞同：9
> 
> 时间：2012-05-03T11:27:11.940
> 
> 标签：xslt

我正在尝试做一些看起来应该很简单的事情，但我无法让它发挥作用，而且我似乎找不到任何不涉及很多不相关事情的例子。我想将特定 xml 标记的文本内容更新为特定值（作为参数传入，此 XSLT 将从 ant 中使用）。一个简单的例子：

我想变身

```
<foo>
  <bar>
    baz
  </bar>
</foo> 
```

到

```
<foo>
    <bar>
        something different
    </bar>
</foo> 
```

这是我尝试过的样式表，它只产生标签，根本没有文字

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!-- identity transformation, to keep everything unchanged except for the stuff we want to change -->
    <!-- Whenever you match any node or any attribute -->
    <xsl:template match="node()|@*">
        <!-- Copy the current node -->
        <xsl:copy>
            <!-- Including any attributes it has and any child nodes -->
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!-- change the text of the bar node, in the real template the value won't be specified inline -->
    <xsl:template match="/foo/bar/">
        <xsl:param name="baz" value="something different"/>
            <xsl:value-of select="$baz"/>
    </xsl:template>
</xsl:stylesheet> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T11:47:04.877

**提供的代码存在许多导致编译时错误的问题：**

> ```
> <xsl:template match="/foo/bar/"> 
>     <xsl:param name="baz" value="something different"/> 
>         <xsl:value-of select="$baz"/> 
> </xsl:template> 
> ```

1.  此模板上指定的匹配模式在语法上是非法的——XPath 表达式不能以`/`字符结尾。

2.  `xsl:param`不能有未知属性，例如`value`

**解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pReplacement" select="'Something Different'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="foo/bar/text()">
  <xsl:value-of select="$pReplacement"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<foo>
  <bar>
    baz
  </bar>
</foo> 
```

**产生了想要的正确结果**：

```
<foo>
   <bar>Something Different</bar>
</foo> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:51:40.260

稍微不同的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:param name="replace"/>

  <xsl:template match="node()|@*">
    <xsl:choose>
      <xsl:when test="text() and name(..)='bar' and name(../..)='foo'">
        <xsl:value-of select="$replace"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy>
          <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T11:36:06.087

```
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  version="1.0">
<xsl:output indent="yes" encoding="UTF-8" method="xml"/>
<xsl:param name="param-from-ant" as="xs:string"/>

<xsl:template match="node()|@*">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="/foo/bar">
 <xsl:value-of select="$param-from-ant"/>
</xsl:template>
</xsl:stylesheet> 
```

# python - Python 的最佳 Cassandra 库/包装器？

> ID：10430417
> 
> 赞同：17
> 
> 时间：2012-05-03T11:27:45.060
> 
> 标签：python, cassandra, pycassa

我找到[了lazyboy](https://github.com/digg/lazyboy)和[pycassa——](https://github.com/pycassa/pycassa)也许还有其他人。我看过很多推荐lazyboy的网站。恕我直言，该项目似乎已死，请参阅[https://www.ohloh.net/p/compare?project_0=pycassa&project_1=lazyboy](https://www.ohloh.net/p/compare?project_0=pycassa&project_1=lazyboy)

那么新项目的最佳选择是什么？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-03T18:56:53.027

Cassandra 项目现在一直建议新项目在几个版本中使用 CQL，随着 Cassandra 1.1 中 CQL 3 的出现，我绝对建议直接使用。如果您以前使用过 SQL，则其优点包括更熟悉的语法，以及不同语言 CQL 驱动程序之间的接口通用性。CQL 就是 CQL，无论您是从 Java、Python、Ruby、Node.js 还是其他任何地方使用它。驱动程序不需要支持完整的 Cassandra 客户端库，因此对维护的需求更少，对客户端作者的依赖也更少。

Python CQL 驱动程序位于 GitHub 上：[datastax/python-driver](https://github.com/datastax/python-driver)。（以前的版本在[Google Code](http://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/)上。）

有关 CQL 的信息，请参阅[Datastax 的 CQL 2 文档](http://www.datastax.com/docs/1.0/references/cql/index)，一篇关于[如何使用 CQL 3 制作有效数据模型](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)的文章，以及一篇关于[CQL 3](http://www.datastax.com/dev/blog/whats-new-in-cql-3-0)整体新特性的文章。

还有一个关于 CQL 3 的完整参考，它正在等待官方 Cassandra repo 的批准；在它等待的时候，你应该可以[在 pcmanus 的 github](https://github.com/pcmanus/cassandra/blob/3779/doc/cql3/CQL.textile)中阅读它。

尽管如此，如果你不想使用 CQL，那么 Pycassa 确实得到了更好的维护，并且应该在相当长的一段时间内得到很好的支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T08:48:37.293

我会选择[pycassa](http://pycassa.github.io/pycassa/)。我们已经使用了很长一段时间并且工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T19:43:54.003

目前我也在使用 pycassa，并将结果传递给 colander ，[它将](http://docs.pylonsproject.org/projects/colander/en/latest/?awesome)一些模型与使用 pycassa 获得的查询结果挂钩。

这类似于 pycassa.columnfamilymap 提供的功能，但我可以直接“模拟”类似 ORM 并通过[变形使用相同的“模型”生成/验证表单](http://docs.pylonsproject.org/projects/deform/en/latest/index.html)

但是，如果出现一些用 CQL 编写的“真正的 ORM”，我会切换到它，但目前这是我找到的解决方案。如果有人有更好的，我会非常感兴趣地考虑它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T08:47:32.797

如果您使用的是旧版本的 Cassandra（这里特别谈论 1.0.8），请不要使用 CQLSH。我正在使用 CQLSH 并且得到的数据不正确，这与我从 cassandra-cli 获得的数据不一致。我尝试使用 nodetool 的修复、清理等，但`Error connection to remote JMX agent!`出现错误。我也绝对确定 cassandra-cli 数据是正确的。

真是一堆废话……

编辑：

原来我在客户端和服务器端使用了不同版本的 Cassandra。我认为它会向后兼容，但显然不是。

# c# - 窗体 DataGridView 事件

> ID：10430419
> 
> 赞同：0
> 
> 时间：2012-05-03T11:27:48.087
> 
> 标签：c#, winforms, datagridview

我有一个 DataGridView，我想为它创建一个事件处理程序，用于双击单个单元格。我正在尝试将 Windows.Forms.DataGridViewCellEventHandler 添加到 DataGridView.DoubleClick 事件，但它只会接受 System.EventHandler。一个简单的类型转换似乎不起作用：

```
this.song_grid.DoubleClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.cell_doubleclick); 
```

有人可以告诉我让我的 DataGridView 接受 DataGridViewCellEventHandler 的最佳方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:36:09.967

这些事件是不同的，它们需要不同的事件处理程序签名。你不能添加`DataGridViewCellEventHandler`到 simple `EventHandler`。您可以做的是在这些事件的处理程序中调用一些方法：

```
private void grid_DoubleClick(object sender, EventArgs e)
{    
    DoSomething();
}       

private void grid_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
    DoSomething();
}

private void DoSomething()
{
    // your code here
} 
```

我假设您已经订阅了两个事件处理程序：

```
grid.DoubleClick += new System.EventHandler(grid_DoubleClick);
grid.CellDoubleClick += new System.Windows.Forms.DataGridViewCellEventHandler(grid_CellDoubleClick); 
```

# c++ - 无法为不同线程中的父级创建子级

> ID：10430420
> 
> 赞同：1
> 
> 时间：2012-05-03T11:27:48.893
> 
> 标签：c++, qt, qthread, qtcpsocket

我在 MyThread.cpp 和 .h 中定义了一个 QThread。那里我有一个私人 QTcpSocket。

```
class MyThread: public QThread {

    Q_OBJECT

public:
    MyThread();
    virtual ~MyThread();

public slots:
    void reconnect();
signals:

protected:
    void run(void);

private:
    QTcpSocket *socket;
};

void MyThread::run(void) {
    bool connected = false;

    connected = prepareSocket(QString::fromLatin1((Global::directionIPSerialServer).toLocal8Bit().data()), 8008, socket);
} 
```

另一方面，我在 Functions.cpp 和 .h 中定义了一组函数，它们没有定义在 Functions 类中，而是定义在命名空间中。

```
bool Functions::prepareSocket(QString address, int port, QTcpSocket *socket) {
    socket->connectToHost(address, port);
    if(!socket->waitForConnected(Global::maxTimueToConnectByTCP)){
        qDebug()<<"Error: "<<socket->errorString();
        return false;
    }
    return true;
} 
```

然后，如果我错了，请纠正我，当我在 Functions 中调用一个函数以将 MyThread 的 QTcpSocket 连接到主机时，我假设我在同一个线程上，因为我正在从线程调用函数我已经创造，而不是一个不同的。

尽管如此，在 socket->connectToHost 上，我得到**QObject: Cannot create children 为位于不同线程中的父级。**两次。

这是为什么？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:12:25.183

你不应该从 QThread 派生。在派生自 QObject 的类上实现所有内容。然后，您可以选择调用`moveToThread()`该 QObject 以将其移动到新线程。但是，您会发现，通常不需要将其移至新线程*，*因为现在您将拥有不会停止 GUI 线程的异步、非阻塞代码。

他们这样做的关键是永远不要使用`waitxxx`电话。每当您想**等待**某件事时，您会发现当该事情发生（或失败）时会发出一个**信号。****将插槽**连接到该信号。您可能需要多次执行此操作——不同的插槽用于不同的信号。这就是您正确编码异步、事件驱动的应用程序的方式。

只有在不存在其他 API 时才使用阻塞调用。众所周知，数据库驱动程序和名称解析器在这方面很糟糕，但它们是唯一的反例。让他们孤独地死去吧，我说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:39:02.023

尝试：QObject::moveToThread。这应该可以解决问题。

# asp.net - 是否可以使用 webHttpBinding 对 WCF 服务执行 CSRF 攻击？

> ID：10430423
> 
> 赞同：0
> 
> 时间：2012-05-03T11:27:51.190
> 
> 标签：asp.net, wcf, web-services, security

我们使用带有`webHttpBinding`绑定的 WCF 服务向客户端公开端点。服务由 IIS (.svc) 托管。`enableWebScript`客户端是使用行为自动生成的 JavaScript 。所有方法都使用 POST。

是否可以对该服务进行 CSRF 攻击？

我考虑了以下选项：

*   AJAX - 不可能，因为不允许跨站点请求（我假设我们的站点不容易出现 XSS）
*   HTML 表单提交 - 不可能，因为服务需要某些无法使用 HTML 表单设置的 HTTP 标头

还有其他选择吗？Flash、Silverlight、网络套接字或其他东西？

有效请求如下所示：

```
POST http://site/Service.svc/ServiceMethod HTTP/1.1
Host: site
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: cs,en-us;q=0.8,en;q=0.5,pl;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Content-Type: application/json; charset=utf-8
Referer: http://site/
Content-Length: 33
Cookie: cookies, session id, etc.
Pragma: no-cache
Cache-Control: no-cache

{"param1":11,"param2":"123"} 
```

需要明确的是：我正在努力保护我的服务。不进行攻击。我正在考虑为每次通话添加一个“身份验证令牌”，但首先我想知道是否值得付出努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T22:46:40.363

这是一篇旧帖子，但它是在 Google 上出现的“WCF CSRC StackOverflow.com”的第一件事，所以这里是 OWASP 对推荐标头的看法：

[https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Checking_The_Referer_Header](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Checking_The_Referer_Header)

这里的另一个答案有些误导。推荐人标头是检查 CSRF 的有用方法，但并不完全可靠。一种更可靠的方法是使用嵌入在每个表单中的随机令牌（最好为表单的每个实例随机生成），该令牌将在服务器端进行检查。

例如：

```
<html>
<body>
    <form>
        <input type='text' name='securityfield' /><input type='submit' value='submit' />
    <input type='hidden' value='<some random token>' name='CSRF-token' />
    </form
</body>
</html> 
```

在 MVC 代码中：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult SomeAction(Dictionary<string, string> parameters){
    if(parameters["CSRF-token"] != UserContext.csrfToken){
        return View();
    }

    //Do actual work
} 
```

这是必要的原因是因为 CSRF 攻击使用受害者的浏览器，该浏览器可能仍会登录到您的站点。如果用户打开了多个选项卡，或者您的会话只是需要一段时间才能过期，则可能会发生这种情况。攻击者通常会使用恶意数据将用户重定向到您的表单提交页面。

我还应该说 AJAX 不是跨域的。此外，XSS 不需要实现 AJAX。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T16:53:10.440

一般来说，检查Referrer头就足以防止CSRF，因为浏览器会设置referrer头（即使它是由javascript设置的）。

我认为没有人能够保证您的服务不受 CSRF 影响，因为您总是有可能（意外地）打开一些攻击向量。例如，如果您有以下网站：

```
http://mycompanysite.com/MyService/Service.svc (hosting the service)
http://mycompanysite.com/MyWebApp/ (hosting a web app) 
```

然后，Web 应用程序中的漏洞可能允许攻击，因为“跨域”规则不再适用。此外，客户端应用程序（即浏览器）中始终存在漏洞的可能性，因此从托管的角度来看，您实际上只能在用户使用众所周知的最新浏览器的基础上工作没有插件等

# ruby-on-rails - 在 Ruby on Rails 3.2.1 上设计路线

> ID：10430425
> 
> 赞同：1
> 
> 时间：2012-05-03T11:27:55.137
> 
> 标签：ruby-on-rails, ruby, devise, ruby-on-rails-3.2

我刚刚安装了 Devise，现在我想为 Devise 制作更好的风格。我在 application.html.rb 链接中添加了编辑设计用户配置文件，但是当我访问此页面然后返回例如索引页面时，我没有路由匹配错误。

HTML 为 home/index 生成此链接：[http://localhost:3000/assets?controller=devise%2Fhome](http://localhost:3000/assets?controller=devise%2Fhome)

但确实需要：[http://localhost:3000/home/index](http://localhost:3000/home/index)

访问 Devise 用户页面后出现问题。

**我的导航：**

```
<ul>
  <li>
  <h2>Izvēlne</h2>
    <ul>
      <li><a class="menu"><%= link_to "Jaunumi" ,:controller=>"home", :action => "index" %></a></li>
      <li><a class="menu"><%= link_to "Par skolu" ,:controller=>"home", :action => "par_skolu" %></a></li>
      <li><a class="menu"><%= link_to "Galerijas" ,:controller=>"home", :action => "galerijas" %></a></li>
      <li><a class="menu"><%= link_to "Skolotāji" ,:controller=>"home", :action => "personals" %></a></li>
      <li><a class="menu"><%= link_to "Kontaktinformācija" ,:controller=>"home", :action => "kontakti" %></a></li>
      <li><a class="menu"><%= link_to "Personāla pieeja" ,:controller=>"home", :action => "pers_pieeja" %></a></li>
    </ul>
  </li>
  <li>
  <h2>Administrācija</h2>
    <ul>
      <li><%= link_to "Lietotāju rediģēšana", edit_user_registration_path %></li>
      <li><%= link_to "Rakstu rediģēšana" ,:controller=>"posts", :action => "index" %></li>
      <li><%= link_to "Galeriju rediģēšana" ,:controller=>"admin", :action => "galeriju_red" %></li>
    </ul>
  </li>
</ul> 
```

**路线.rb：**

```
devise_for :users

get "admin/galeriju_red"

resources :posts

get "admin/rakstu_red"

get "home/par_skolu"

get "home/personals"

get "home/kontakti"

get "home/pers_pieeja"

get "home/galerijas"

get "home/index" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:42:42.793

我能想到的唯一想法是改变你的路线：

```
get "home/index" 
```

至

```
match "/home/index" => "home#index", :via => [:get] 
```

它们是等价的，但**match**使路径助手可用，因此菜单视图中的链接可能如下所示：

```
<%= link_to "Home" main_app.home_index_path %> 
```

Main_app 是一个内置的 Rails 助手，它可以访问 Engine 中的 Rails 路由。

如果你只匹配 /home，路径助手将被称为 home_path。

我希望这可以解决您的问题。

参考：[Rails 中的路由](http://guides.rubyonrails.org/routing.html#paths-and-urls)

# html - What are pro's and cons of cookies versus sessions?

> ID：10430432
> 
> 赞同：3
> 
> 时间：2012-05-03T11:28:04.120
> 
> 标签：html, session, cookies

Can someone give me some good reading material on what's best in different cases?

I guess when you have a small website with not a lot of users, you could go for sessions since they are stored on a server. But for a bigger amount of users it may be better to go with cookies? And how do they both score on safety?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T11:38:00.267

会话管理分为两种方法——服务器端和客户端。cookie 的使用将信任置于客户端以及应用程序的物理状态管理部分。并非所有浏览器都支持 cookie，用户可以根据自己的判断选择启用或禁用 cookie。这给许多开发人员设置了一个独特的障碍，因为他们不能完全依赖客户端系统来确保他们积极接受 cookie。客户端可以随时终止活动 cookie。使用 cookie 的好处是它由客户端管理，并且可以存在于客户端系统上，用于跟踪对您的站点的访问和其他需要长期保存的数据。

另一方面，会话是服务器端技术。它们由服务器主动管理，它们的状态分别随服务器而生和死。无论客户端系统如何，它们都是确保开发人员能够跨浏览器维护某种状态的好方法。由于网络农场等概念，会话在本质上可能更复杂，但可以通过选择适当的会话状态管理和存储类型来克服。使用会话的缺点是它们通常是短暂的，并且是为了管理对您网站的独特访问而创建的，而不会持续很长时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T11:30:57.337

会话几乎总是使用 cookie 将会话与用户相关联（尽管可以在查询字符串中传递字符串或在每个请求中传递表单数据）。

饼干：

*   必须包含在每个 HTTP 请求中
*   对可以存储的数据量有限制
*   将您存储的数据公开给用户（以及如果您不使用 SSL，任何可以嗅探其流量的人）
*   允许用户直接编辑数据
*   可以设置持续一段时间

会话没有。

> 但是对于更多的用户来说，使用 cookie 可能会更好？

如果您要存储*这么*多数据，那么您要么有一个很小的硬盘，要么您将超过 cookie 大小限制……所以不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T11:53:43.810

我认为你应该在不同的情况下使用它们，因为它们都有优点和缺点。会话的最大缺点是当浏览器关闭时会话通常会被破坏。另一方面，饼干不会那么容易被破坏。虽然会话几乎总是支持，但并不总是支持 Cookie。

他们俩都不安全。据我所知，cookie 使用的性能略高一些。在客户端存储数据的一种更安全（更安全但不安全）的方法是将会话信息验证为保存在数据库中的哈希值。在数据库中存储带有哈希的会话 ID。并查一下。下次。如果你真的想要安全。使用令牌，并在每次查找信息时生成一个新令牌。

所以我不得不做出这样的决定。如果必须为多个浏览器会话存储信息。使用cookies。但是，如果您只需要保存几个页面切换的信息，只需使用会话。

编辑：好吧，我在我的 apache 服务器上运行它并跟踪 RAM 和 CPU 活动。（没有显着结果）我还检查了服务器将 1000 个变量（包含 30 个字符长的字符串）设置和取消设置到会话和 Cookie 中的时间。做了几次所有测试并取了平均值。结果。这是结果。

```
COOKIES
  Set: 0.001863 seconds.
  Unset: 0.004932 seconds.

SESSIONS:
  Set: 0.000494 seconds. (very consistent results)
  Unset: 0.000502 seconds. (Again very consistent) 
```

所以会话要快得多，而且更加一致。如果您能够使用会话。我肯定会去参加会议。

# analytics - Reporting Live Analytics - ideas and implementation techniques

> ID：10430435
> 
> 赞同：2
> 
> 时间：2012-05-03T11:28:19.223
> 
> 标签：analytics, polling

I administrate a website which gets many hits per day, these vary hour by hour and across the various areas of the website. This website is 'white labeled' and sold to clients.

I am creating a set of reporting tools which will allow clients to understand how their users are using their site.

I can create some 'standard' analytics, whereby user data is saved to the database and this same data is shown when clients visit the analytics page, but what I want to do is show live data which updates live as my clients view their analytics page.

I know Google Analytics offers something similar, however it would not suit my problem (the above description is an oversimplification of the actual problem...) yet I am trying to do something similiar.

I don't really want to poll the database using AJAX every few ms. Can anyone offer an better solution to updating my page regularly with new data.

Ideally I am looking for a javascript and or PHP solution. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:04:35.130

If you want to update your page regularly with freshly collected data then AJAX is what you need my friend. Sorry. If you're worried about the number of AJAX calls, you can update less frequently (every minute) or even put in a refresh button.

Dodgy alternative: If it's for metrics that increase reasonably stably and don't need to be exact, I suppose you could take the speed it increases and dummy that with Javascript. An example of this is the gmail log in page:

```
Over 10244.816596 megabytes (and counting) of free storage 
```

# php - 以菱形 PHP 打印数字

> ID：10430437
> 
> 赞同：1
> 
> 时间：2012-05-03T11:28:21.130
> 
> 标签：php, arrays

```
$arr = array(1,2,4,7,12,17,21,24,26,27);
for($i=1; $i<count($arr); $i++) {
    for($j=$arr[$i-1]; $j<$arr[$i]; $j++) {
        echo $j;
    }
    echo "<br>";
} 
```

我正在尝试使用 for 循环来制作看起来像菱形的形状。此时它看起来像半菱形。

我想在这方面提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:44:29.730

这是我能想到的最好的：

```
echo '<pre style="text-align:center;">';
$arr = array(1,2,4,7,12,17,21,24,26,27);
for($i=1; $i<count($arr); $i++) {
    for($j=$arr[$i-1]; $j<$arr[$i]; $j++) {
        echo $j;
    }
    echo "<br>";
} 
```

所以你想要的是（没有形状）：

```
 1
     2  4
 7  12  17  21 
    24  26
      27 
```

我很难找到断线的地方，因为数组中的数字不是“对称”数字。

或者你想要这个：

```
 1 
      2  4
     7    12
    17     21 
     24   26
        27 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:08:11.247

```
<?php

$kk=25;
$m=1;
for($kkk=1;$kkk<=7;$kkk++)
{
        for($k=0;$k<=$kk;$k++)
        {
            echo ('&nbsp;');
        }

        for($j=1; $j<=$m; $j++)
        {

            echo $j;
        }
            $kk=$kk-1 ;
            echo "<br>";
            $m=$m+2;

}

?> 
```

全钻石

```
<?php

$kk=25;
$m=1;
for($kkk=1;$kkk<=5;$kkk++)
{
        for($k=0;$k<=$kk;$k++)
        {
            echo ('&nbsp;');
        }

        for($j=1; $j<=$m; $j++)
        {

            echo $j;
        }
            $kk=$kk-1 ;
            echo "<br>";
            $m=$m+2;

}

$kk=22;
$m=9;
for($kkk=1;$kkk<=5;$kkk++)
{
        for($k=1;$k<=$kk;$k++)
        {
            echo ('&nbsp;');
        }

        for($j=$m; $j>=1; $j--)
        {

            echo $j;
        }
            $kk=$kk+1 ;
            echo "<br>";
            $m=$m-2;

}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-06T13:53:22.767

```
 <?php
echo '<div style="text-align:center;">';
$jeff = "5";
$y=1;
for($x=1;$x<=$jeff+1;$x++){
    for($y=1;$y<$x;$y++)
        {
        echo"*";
        }
        echo"<br>";
}
$rey = $jeff-1;
for($x=$rey;$x>=1;$x--){
    for($y=1;$y<$x;$y++)
        {
        echo"*";
        }
        echo"<br>";
}
echo"</div>"
?> 
```

# jquery - How can I set the minDate of datePicker to a time of day?

> ID：10430447
> 
> 赞同：0
> 
> 时间：2012-05-03T11:28:55.337
> 
> 标签：jquery, jquery-ui, datepicker, gmt, mindate

I am looking to use the datepicker to set up an ordering form on my website.

I have a rule that if a user can order before 3pm (GMT) then they can order the same day, if they try and order after 3pm then they need to choose the next available date.

I can use datepicker to set the minDate to +1 and it always picks a day ahead, but I would prefer to use the 3pm rule.

I have tried a few different ways, but I am not sure how to do this.

Any help much appreciated...

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:30:21.653

You should use the time on the server to deliver the JavaScript to the page with the relevant date set.

# ruby - How can I pass variables between ruby scripts?

> ID：10430455
> 
> 赞同：4
> 
> 时间：2012-05-03T11:29:39.533
> 
> 标签：ruby

I am mostly interested in the theory of this than an actual code solution. How can I have one main ruby script invoking other scripts and sharing variables between each other? I am a bit confused.. Do I need to use environmental vars, session vars, methods, models, controllers, what is the best way to do it!!?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T12:08:33.447

假设您有一个`script.rb`，其中包含以下内容：

```
$var = :value
def get; A end
load 'another_script.rb'
get  # Will it succeed? 
```

当您运行时`ruby script.rb`，您会生成一个 Ruby 进程，该进程将读取`script.rb`并执行每一行的内容。Ruby 解释器有一个*执行状态*，它保存着诸如对象数据、引用它们的变量、它们所属的范围、您当前所处的方法等信息。

当解释器读取该`$var = :value`行时，它会修改自己的状态。它存储一个引用新创建的符号对象的全局变量。接下来，它定义了一个方法，该方法将返回常量引用的`A`值。此时调用它会引发 a `NameError`，因为该常量不存在。当它到达该`load 'another_script.rb'`行时，它类似于 running `ruby another_script.rb`，除了没有启动第二个进程。脚本的内容*在同一个执行上下文中*被读取和解释。

假设`another_script.rb`包含以下内容：

```
$var = :changed
class A; end 
```

`$var`以前引用符号的变量`:value`现在将引用`:changed`符号。然后，`Class`将创建一个对象并将其分配给新`A`常量。

*加载此脚本后*，调用`get`将成功。另一个含义是*顺序很重要*。例如：

```
load 'another_script.rb'
$var = :value 
```

任何`another_script.rb`设置`$var`都将丢失，因为它将在执行完成后立即被覆盖。

不管你有多少脚本`load`，`require`或者`eval`，只要它们运行在同一个进程上，它们*总是*会共享相同的数据。[只有局部变量不会在文件之间共享](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-load)。当您想在两个*不同的*Ruby 解释器之间共享数据时，事情会变得复杂：

```
ruby script.rb &
ruby another_script.rb & 
```

在这种情况下，您必须使用[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T11:50:33.250

取决于您*调用*.

通常，当“*一个脚本调用另一个脚本*”时，它基本上与一个“进程启动另一个进程”相同。因此，您将使用进程间通信，而不是真正特定于 Ruby。是的，环境变量等简单的东西是传递信息的一种方式，但可能会考虑文件、套接字等。

OTOH，如果您想在另一个“脚本”(.rb) 文件中*使用Ruby 代码，请按照第一个答案指出的那样加载/要求它。*这使得方法 (def f)、常量 (CTE)、实例变量 (@f) 和全局变量 ($G) 在您从中加载的文件中可用；但不是局部变量（如 x=3）。

在特殊情况下，您也可以使用“eval”来访问局部变量 - 但我认为这不适用于您的场景。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T12:58:10.193

如果您希望两个 Ruby 进程进行通信（即使它们运行在不同的机器上），那么[Druby](http://ruby-doc.org/stdlib-1.9.3/libdoc/drb/rdoc/DRb.html)就是内置方式。

# jsp - 在项目中制作上传和下载文件工具。我从哪里开始？

> ID：10430456
> 
> 赞同：2
> 
> 时间：2012-05-03T11:29:42.913
> 
> 标签：jsp

我已经上传了jsp中的试卷（.xls），学生们将在解决它们后提交回来。

我怎样才能使它成为可能？我不知道上传文件和下载。那时我会寻找什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T08:16:38.997

Internet 上充斥着如何使用 JSP/Servlets 上传文件的示例，该站点也有一些关于此的很好的问题和答案。

所以这里有几个网站解释了如何进行：

1.  [How to upload using JSP/Servlets](https://stackoverflow.com/q/2422468/1761033) : This question uses the Apache Commons file upload api
2.  这是一个[很好的教程](http://www.servletworld.com/servlet-tutorials/servlet-file-upload-example.html)来解释如何使用 apache commons 处理文件上传。
3.  另一个使用 Apache Commons 文件上传的[例子。](http://www.javaquery.com/2011/12/how-to-upload-file-using-jsp-servlet.html)
4.  我说有很多例子吗：这是[另一个](http://senior.ceng.metu.edu.tr/2009/praeda/2009/05/28/how-to-file-uploading-using-jspservlet/)例子，而且他们还在[这里](http://senior.ceng.metu.edu.tr/2009/praeda/wp-content/uploads/2009/05/fileupload.war)下载了完整的源代码。

呸！这么多例子。如果您仍在寻找特定的东西，请告诉我。

第一个和最后一个链接是一个非常好的起点。

# debugging - Collecting callstack from debugee?

> ID：10430457
> 
> 赞同：1
> 
> 时间：2012-05-03T11:29:45.807
> 
> 标签：debugging, x86, callstack

I am currently making a debugger in my spare time. Mainly it is suppouse to have functionality similar to what Ollydbg has to offer. I am only insterested in supporting Windows x86\.

I am trying to find a way to show the callstack from the debugee. I am looking for suggestions on how I should collect information about the debugee's callstack?

# java - classNotFoundException when including applet un html file

> ID：10430459
> 
> 赞同：0
> 
> 时间：2012-05-03T11:29:53.837
> 
> 标签：java, html, applet

I've follow a lot of tutos and forum exemple and i've always the same problem.

I've generated a jar file from an applet in netbeans, including class files from my project. My main class (containing the init() method) is in the package caiusapplet and is named CaiusWeb.

My jar file and my html file are in the same directory, and there is the html code :

```
<!DOCTYPE html>
    <html>
       <head>
       <title></title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
       </head>
       <body>
          <applet code="caiusapplet.CaiusWeb" archive="CaiusApplet.jar">
          </applet>
       </body>
    </html>
</pre> 
```

But I always have the same issue :

```
java.lang.ClassNotFoundException: caiusapplet.CaiusWeb. 
```

Could you please help me?

## Edit 1 :

I've change my html code to

```
<OBJECT width="200" height="200" data="caiusapplet/CaiusWeb.class" type="application/x-java-applet">
        <PARAM name="code" value="caiusapplet/CaiusWeb.class">
</OBJECT> 
```

I've now another error message :

Exception : java.lang.reflect.InvocationTargetException

What's the matter ? Thanks

## Edit 2 :

I've found what was wrong : there was a JFileChooser in my java code. I removed it : everything is working. So now : What's wrong with the JFileChooser and the applet : access rights ? Still trying... Tanks for your help, if you can say to me how work with JFileChooser... I'll be very grateful !

## Edit 3 :

That's ok, if you have the same problem : Create au jar file manually from your .class files ans sign it, everything's now ok ! Thaks a lot.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:32:52.853

当所需的类不在不可用的匹配路径中时会触发此异常，可能是您忘记将该特定类添加到 jar 中。

# javascript - IE7/8 javascript“SCRIPT5007：无法获取属性值”

> ID：10430460
> 
> 赞同：2
> 
> 时间：2012-05-03T11:29:54.633
> 
> 标签：javascript, google-maps-api-3, internet-explorer-8, internet-explorer-7

我有一个正在开发的网站，它使用 Google Maps API V3 来加载多个定位器。一切正常，除了在 IE7/8 中，由于以下错误，我的数组循环失败：

```
SCRIPT5007: Unable to get value of the property '5': object is null or undefined 
```

我查看了 StackOverflow 上的所有类似问题，但找不到任何解决方案。

所以我试图从一个对象数组中访问数据（我也尝试了一个嵌套数组，但发生了同样的错误）。我的数组如下。我还尝试删除 html 对象以防万一导致问题，但没有任何变化 - IE7/8 仍然无法获取对象值。

```
var sites = [
    {title: "Hermitage Medical Clinic", latitude: 53.3593139774, longitude: -6.40494071541, enumerator: 1, html: "<div class=\"find_a_surgeon_info_inner\"><h4 style=\"margin: 0; padding: 0;\">Hermitage Medical Clinic</h4><p>Old Lucan Road, Dublin 20</p><p><a href=\"http://devel.pixelapes.com/iaps.ie/location/hermitage-medical-clinic/\">View hospital details</a></p></div>", iconTerm: "hospital" }
        ]; 
```

这是我试图访问数据的函数：

```
 function setMarkers(map, sites) {

            for (var i = 0; i < sites.length; i++) {
                // var sites = markers[i];
                var icon = '<?php bloginfo("template_url"); ?>/images/map-icons/' + sites[i].iconTerm + '.png';
                var siteLatLng = new google.maps.LatLng(sites[i].latitude, sites[i].longitude);
                var marker = new google.maps.Marker({
                    position: siteLatLng,
                    map: map,
                    icon: icon,
                    title: sites[i].title,
                    zIndex: sites[i].enumerator,
                    html: sites[i].html
                });

                var contentString = "Some content";

                google.maps.event.addListener(marker, "click", function () {
                    infowindow.setContent(this.html);
                    infowindow.open(map, this);
                });
            }
        } 
```

如果 iconTerm 对象存在特定问题，但 IE7/8 尝试获取下一个对象值失败，我也尝试回退到仅使用默认 Maps 标记。

这是发生这种情况的页面：http: [//devel.pixelapes.com/iaps.ie/surgeon/eamon-s-beausang/](http://devel.pixelapes.com/iaps.ie/surgeon/eamon-s-beausang/)

奇怪的是，我有另一个地图实例，我没有使用 map.fitBounds 设置边界。仍然无法获取对象值，但地图加载（但非常混乱）：[http ://devel.pixelapes.com/iaps.ie/find-a-hospital-or-clinic/](http://devel.pixelapes.com/iaps.ie/find-a-hospital-or-clinic/)

我已尝试删除单个外科医生页面上的 fitBounds 功能，但地图仍然没有像在“查找医院”​​地图上那样部分加载。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T12:31:22.923

`sites`在and的最后一项之后有尾随逗号`latlngs`，删除它们，IE 不喜欢数组/对象中的尾随逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:46:01.280

我认为您的问题可能是 IE 不喜欢您为`sites`数组成员选择的一个（或多个）属性名称。我建议将您的第一个代码部分更改为：

```
var sites = [{
        "title": "Hermitage Medical Clinic",
        "latitude": 53.3593139774,
        "longitude": -6.40494071541,
        "enumerator": 1,
        "html": "<div class=\"find_a_surgeon_info_inner\"><h4 style=\"margin: 0; padding: 0;\">Hermitage Medical Clinic</h4><p>Old Lucan Road, Dublin 20</p><p><a href=\"http://devel.pixelapes.com/iaps.ie/location/hermitage-medical-clinic/\">View hospital details</a></p></div>",
        "iconTerm": "hospital"
}]; 
```

# c# - 在 WP7 中扩展联系人卡片

> ID：10430461
> 
> 赞同：1
> 
> 时间：2012-05-03T11:30:04.880
> 
> 标签：c#, windows-phone-7, mobile

我可以注册应用程序以显示在联系人卡片中吗？那么除了打电话、发短信、发送电子邮件等，我还可以添加一个额外的选项吗？

我假设不是，因为否则 WhatsApp 会这样做，但我只是在检查。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:33:11.183

目前，这是不可能的。您的应用程序可以在电话的某些集线器中看到，但不能在联系人卡片中看到。

# php - 如何在php中找到PID

> ID：10430462
> 
> 赞同：3
> 
> 时间：2012-05-03T11:30:06.330
> 
> 标签：php, cron, pid

我正在编写一个将通过 cron 运行的 php 脚本。它的任务是调用其他 php 脚本。调用的脚本也可以在外部执行。我想要的是，当一个文件正在执行时，它不应该同时执行。为了清楚起见，请考虑以下

假设有一个脚本 master.php 依次调用另外两个脚本 script1.php 和 script2.php。现在，一旦它调用了 script1.php，它就会开始执行并需要 10 分钟来完成它的处理。这个 Script1.php 也可以由用户在这 10 分钟内单独运行。

我想要做的是，当这个脚本在它的处理过程中时，它不应该只并行执行。

有没有办法做到这一点？（也许通过检查 script1.php 的 PID）。

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:40:56.933

这就是我使用 pid 文件的方式。此外，如果脚本运行超过 300 秒，它将被杀死：

```
$pid_file = '/var/run/script1.pid';
if (file_exists($pid_file)) {
        $pid = file_get_contents($pid_file);
        if ($pid && file_exists('/proc/' . $pid)) {
                $time = filemtime($pid_file);
                if (time() - $time > 300) {
                        posix_kill($pid, 9);
                } else {
                    exit("Another instance of {$argv[0]} is running.\n");
                }
        }
}

$pid = posix_getpid();
if (!file_put_contents($pid_file, $pid)) exit("Can't write pid file $pid_file.\n"); 
```

然后在脚本末尾取消链接 pid 文件：

```
unlink($pid_file); 
```

如果您想在第一个实例完成时运行脚本 - 将 exit() 替换为 sleep(1) 并将整个块放入循环中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T11:33:09.923

脚本启动时，检查是否存在锁定文件。如果没有，请创建一个。下次脚本在另一个会话运行时启动，它将退出，因为锁定文件存在。在脚本结束时，删除锁定文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:33:19.013

您可以将 script1 的 pid 存储在临时文件、管道、共享内存中，或直接存储在父脚本中。您可以使用 getmypid() 从 php 进程获取 pid；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:34:56.300

启动脚本后，只需创建一个名为“Script1.txt”的文本文件，然后在脚本末尾删除该文件。

在实际脚本运行之前（例如在 Script1.php 的第一行）检查该文件是否存在。如果它存在，您就知道您的脚本已经在运行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T11:37:11.600

我相信[exec](http://nl.php.net/manual/en/function.exec.php)等到执行完成。所以 master.php 会是这样的：

> exec("/path/to/php script1.php");
> exec("/path/to/php script2.php");

# java - zk：如何在 zk 组件被销毁/分离时通知侦听器

> ID：10430466
> 
> 赞同：2
> 
> 时间：2012-05-03T11:30:15.307
> 
> 标签：java, zk

当 ZK 组件被销毁或分离时，是否有可能通知侦听器？

我希望不同的组件作曲家通过事件队列进行通信。为了做到这一点，我将这些组件的侦听器订阅到事件队列。现在我需要知道一个组件或其作曲家何时被销毁以便取消订阅它的监听器。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T01:35:18.330

是的，您可以实现[UiLifeCycle](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/util/UiLifeCycle.html)。

文档：http: [//books.zkoss.org/wiki/ZK_Configuration_Reference/zk.xml/The_listener_Element/The_org.zkoss.zk.ui.util.UiLifeCycle_interface](http://books.zkoss.org/wiki/ZK_Configuration_Reference/zk.xml/The_listener_Element/The_org.zkoss.zk.ui.util.UiLifeCycle_interface)

# keyboard - Weird keyboard locks in IntelliJ IDEA (delete & arrow keys, etc.)

> ID：10430467
> 
> 赞同：81
> 
> 时间：2012-05-03T11:30:16.690
> 
> 标签：keyboard, intellij-idea, keyboard-shortcuts

While working in IntelliJ IDEA, the keyboard occasionally locks in a way that `delete` or `<` `>` `^` keys don't work properly anymore, in a way that `delete` doesn't do anything anymore, and the arrow keys scroll the entire source code / editor section.

I don't know if I am accidentially some kind of shortcut, but the only way I can get it back to normal again is closing and re-opening the IDE, which is annoying of course.

I'm on Mac OS X Lion, latest IntelliJ IDEA CE (11.1.1), but also had it before with the previous versions.

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-09-03T14:38:35.813

[superuser.com](https://superuser.com/a/716440)上的这个答案对我有用：

```
ibus-daemon -rd 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2017-04-06T01:08:29.857

只需从如下图所示的**工具**中关闭**Vim Emulator**：

 **[![在此处输入图像描述](../Images/9ae6295e6eece5295ba13a3bb450a20e.png)](https://i.stack.imgur.com/waEqT.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-04-06T20:30:18.683

我是 IntelliJ 的新手，并且遇到了同样的删除`delete`. 但我刚刚意识到 IntelliJ 实际上是在模仿 Vim 中的键。

例如，当突出显示某些文本时，按`d`删除文本，按`y`复制（拉动）它，按`p`粘贴（放置）它，然后按`i`进入编辑（插入）模式。

对于导航，`Ctrl`+`f`导航到下一个屏幕，`Ctrl`+`b`导航到上一个屏幕，`Shift`+`g`导航到文件末尾。

一切都与 Vim 相同。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-03T12:12:14.503

检查`idea.log`(Help | Reveal Log in ...) 是否有异常。如果您看到`PSI/document inconsistency before reparse`那里，那么您可能受到[此错误](http://youtrack.jetbrains.com/issue/IDEA-80181)的影响。

如果有其他与此 bug 无关的异常，请将日志发送至 JetBrains 技术支持。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-21T23:30:26.097

我遇到了同样的问题，

### 环境：

Ubuntu Gnome 15.04 上的 IDEA 14.1.4

### 解决方案 ：

我使用默认键盘映射，但由于某些原因默认键盘映射不起作用。因此，我删除了“IdeaVim”插件并重新启动了 IDE，现在一切正常。`File > Settings > Plugins`并寻找插件。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-10-18T16:49:07.580

[jetbrains youtrack for intellij idea](https://youtrack.jetbrains.com/issue/IDEA-78860)中有一个未解决的问题，推荐两种解决方案：

1.  键盘输入可以通过重新启动 IBus 守护程序（来自控制台的“ibus-daemon -rd”）来解锁。
2.  通过取消设置 env 可以为 IDEA 禁用 IBus。变量 XMODIFIERS（例如“XMODIFIERS=idea.sh”），但在 IDEA 中输入国家字符的能力将丢失。

我已经使用了第二个并解决了我的问题。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-02T22:57:52.827

我定期遇到同样的问题，这很痛苦，因为 IntelliJ 首先需要很长时间才能加载，然后我需要关闭它并重新开始！

我的 IntelliJ 日志中的任何地方都没有“PSI”。我会将我的日志发送到 IntelliJ；希望他们能尽快解决这个问题，因为这很浪费时间！

我尝试过的其他事情：

*   更改当前键盘映射 - 箭头键在任何键盘映射中都不起作用
*   仅关闭并重新打开项目 - 问题一直存在，直到 IntelliJ 本身关闭并重新打开。
*   尝试其他键 - 一旦 IDE 进入此状态，似乎 Ctrl 和 Command 将完全被忽略。当然，所有的文本输入键仍然有效，所以你可以输入，只是不能使用鼠标和菜单栏以外的任何东西来改变光标位置。在紧要关头，一个人可以像这样工作很短的时间，但这将导致严重的受虐狂！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-01-19T17:27:29.700

您可能需要更新您的插件。如果它们过时，它们可能会导致奇怪的行为。

[http://www.jetbrains.com/idea/webhelp/installing-updating-and-uninstalling-repository-plugins.html](http://www.jetbrains.com/idea/webhelp/installing-updating-and-uninstalling-repository-plugins.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-18T03:34:17.307

升级到 IntelliJ 14.1.4 时我遇到了同样的问题。如果您安装了 IdeaVim 插件，请尝试禁用它。这对我有用。 [参考](https://superuser.com/questions/951374/cant-type-delete-in-intellij-idea-osx-el-capitan-4)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-02-18T21:07:12.487

如果你这样做`ibus restart`，你会得到一个 qwerty 键盘。对于法国用户，您可以执行以下操作：

```
ibus restart; sleep 1; ibus engine xkb:fr::fra 
```

我想你可以`fr::fra`改变`ru`或`us:dvorak:eng`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-24T20:16:55.097

我以前也有同样的问题。首先，您需要检查是否有“VIM 模拟器”。如果是这样，请尝试禁用它，这就足够了。如果问题仍然存在，请尝试在菜单栏的帮助部分联系支持人员。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-10T15:27:32.213

在 Windows 10 上遇到同样的问题。您可以尝试从任务管理器手动关闭 IDE。当 IntelliJ 无法运行时执行此操作，即 IntelliJ Idea 正在启动，但屏幕尚未打开。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-10-28T20:54:26.780

就我而言，退格键不起作用，但仅在终端中起作用。我通过去修复它

```
Preferences -> Terminal -> Check "Override IDE shortcuts" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-01T09:31:23.413

今天对我来说同样的问题。我的解决方案是在我的 MacBook 上拔下并插入 USB 键盘。希望能帮助到你。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-09T12:32:35.190

您可以简单地：将所有键盘映射重置为默认值或窗口：

文件>设置>键盘映射>“将第一个输入更改为首选键盘映射默认值”

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-09-15T17:41:39.697

就我而言，情况有所不同。在将许可证凭据输入到 Idea 后，我得到了这种奇怪的行为。我想它为我创建了一个新的 Jet Brains 用户帐户，能够同步默认启用的 IDE 设置。我建议它用 Jet Brains 创建的一些默认设置覆盖了我的设置（包括键盘绑定）。

幸运的是，我之前已经设置了我`Settings Repository`的`Github`. 我按 回滚到我的旧设置`File -> Settings Repository -> Override Local`。

问题出在数据库编辑器中的 macOS 上。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-02-28T18:55:51.877

1.  转到最近打开的 IntelliJ 实例
2.  检查光标是否卡在该项目的终端窗口中
3.  不？检查所有其他打开的 IntelliJ 实例

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-08-02T21:38:49.773

> Ubuntu 18.04.02
> Idea（终极版）2019.2

有同样的问题。键盘突然停止识别箭头键和退格键。上述解决方案均无效。
起作用的是——将引导 SDK 切换回旧的可信赖的 Oracle 1.8（我在 JB 9 上运行）。

### 如何：

*   **Help->Find Action**
    搜索**JDK**。选择**Switch Boot JDK**并选择 8 或 11 版本的 java。重新开始

*   如果您没有安装本地 8 或 11 java JDK。我只有 9 的问题，8 和 11 都可以正常工作。
    搜索 action **SDK**，选择“**从 Bintray 获取 JB SDK** ”，然后根据您的喜好选择最新的可用 11 或 8 ...

祝你好运，
尼克

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-16T14:48:11.000

**Ubuntu 20.04 上无响应键盘的解决方法**

来自：[https ://youtrack.jetbrains.com/issue/IDEA-23472](https://youtrack.jetbrains.com/issue/IDEA-23472)

> 1.  转到 IDE “帮助 | 编辑自定义 VM 选项...”
> 2.  将 -Drecreate.x11.input.method=true 添加到新行
> 3.  重启IDE

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2020-06-25T18:59:16.940

解决此问题的最简单方法是禁用您的 VIM 模拟器，您可以在 in.IDEA 的右下角找到该模拟器。应该这样做**

# qt - QXmlSchema validation

> ID：10430469
> 
> 赞同：1
> 
> 时间：2012-05-03T11:30:25.413
> 
> 标签：qt, xsd, xsd-validation

I'm trying to check the validity of an XML schema using methods provided by QXmlSchema. I know from other tools (such as Eclipse or xmllint) that the schema *is* valid, but the outcome with the following code always results in "schema is invalid".

```
QFile file("/home/....xsd");
file.open(QIODevice::ReadOnly);

QXmlSchema schema;
schema.load(&file, QUrl::fromLocalFile(file.fileName()));

if ( schema.isValid() ) {
    QXmlSchemaValidator validator( schema );
    if ( validator.validate( QUrl("file:///......xml") ) ) {
        qDebug() << "instance is valid";
    } else {
        qDebug() << "instance is invalid";
    }
} else {
    qDebug() << "schema is invalid";
} 
```

The error logged is something like:

> Error XSDError in file:///home/......xsd, at line X, column Y: Content model of complex type foo is not a valid extension of content model of bar.

I wonder if this has to do with the Schema namespace imports or what else.

EDIT: The schema I'm referring to is [this one](http://www.ebu.ch/metadata/schemas/EBUCore/20110915/EBU_CORE_20110915.zip).

# javascript - Integrate sencha touch 2 into phonegap, cannot get 'deviceready' event to fire up

> ID：10430472
> 
> 赞同：1
> 
> 时间：2012-05-03T11:30:32.167
> 
> 标签：javascript, cordova, dom-events, sencha-touch-2

This seems to be another issue than [PhoneGap 0.9.6 (Blackberry) + Sencha Touch 1.1.0: deviceready does not fire](https://stackoverflow.com/questions/6611417/phonegap-0-9-6-blackberry-sencha-touch-1-1-0-deviceready-does-not-fire) it's related to iOS.

So, I can't get that event to fire up; using latest cordova (phonegap) 1.6.1.

Has anyone been successfully integrating these ST2 and PhoneGap?

Here's my app.json :

```
"js": [
    {   
        "path": "resources/js/cordova-1.6.1.js",
        "update": "delta"
    },
    {
        "path": "sdk/sencha-touch.js"
    },
    {
        "path": "app.js",
        "update": "delta"
    },
], 
```

My app.js:

```
launch: function() {
    // Destroy the #appLoadingIndicator element
    Ext.fly('appLoadingIndicator').destroy();
    var mainPanel = Ext.Viewport.add({
        xclass: 'Sencha.view.Main'
    });

    // load phonegap stuff
    document.addEventListener("deviceready", function () {
        mainPanel.fireEvent("deviceready");
    } , true);
}, 
```

My Main.js controller :

```
Ext.define('Sencha.controller.Main', {
    extend: 'Ext.app.Controller',

config: {
    refs: {
        mainPanel: 'mainpanel',
    },
    control: {
        mainpanel: {
            deviceready: 'onDeviceReady'
        },
    },
},
onDeviceReady: function() {
    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';
    Ext.Msg.alert('Connection type', states[networkState], Ext.emptyFn);
    navigator.notification.beep(2);
}, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:00:35.630

Sencha Touch 2 will listen to that event and call your onReady/launch methods - therefore if you try listening to them in the launch method, it has already been fired.

Just put your logic inside the launch method in your application.

# windows-phone-7 - WP7 科尔多瓦示例不起作用

> ID：10430476
> 
> 赞同：2
> 
> 时间：2012-05-03T11:30:48.580
> 
> 标签：windows-phone-7, cordova

我完成了 phonegap.com/start 中的所有步骤以部署到 windows phone。当我在我的模拟器上调试默认的cordoba-1.7.0-Start项目时只有黑色背景，当我运行这个应用程序时什么都看不到，但在控制台输出中我有信息表明应用程序已启动和终止:(怎么了？

```
'UI Task' (Managed): Loaded 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v2.0\WindowsCE\mscorlib.dll' 
'UI Task' (Managed): Loaded 'System.Windows.RuntimeHost.dll' 
'UI Task' (Managed): Loaded 'System.dll' 
'UI Task' (Managed): Loaded 'System.Windows.dll' 
'UI Task' (Managed): Loaded 'System.Net.dll' 
'UI Task' (Managed): Loaded 'System.Core.dll' 
'UI Task' (Managed): Loaded 'System.Xml.dll' 
'UI Task' (Managed): Loaded '\Applications\Install\3B9113DD-7B84-4DC5-B767-33D200A5DC5B\Install\Cordova-1.7.0-Starter1.dll', Symbols loaded. 
'UI Task' (Managed): Loaded 'Microsoft.Phone.dll' 
'UI Task' (Managed): Loaded 'Microsoft.Phone.Interop.dll' 
'UI Task' (Managed): Loaded '\Applications\Install\3B9113DD-7B84-4DC5-B767-33D200A5DC5B\Install\WP7CordovaClassLib.dll' 
'UI Task' (Managed): Loaded 'System.Xml.Linq.dll' 
'UI Task' (Managed): Loaded 'System.Runtime.Serialization.dll' 
Updating IsolatedStorage for APP:DeviceID :: 000348be-f5cf-45c6-a4c0-7e6dce0244c6 
Writing data for /app/www\cordova-1.7.0.js and length = 117960 
Writing data for /app/www\index.html and length = 1100 
Writing data for /app/www\master.css and length = 322 
GapBrowser_Navigating to :: /app/www/index.html 
GapBrowser_Navigated :: /app/www/index.html 
'UI Task' (Managed): Loaded 'System.ServiceModel.Web.dll' 
'UI Task' (Managed): Loaded 'System.ServiceModel.dll' 
ScriptNotify :: Info:document.addEventListener event named DOMContentLoaded 
ScriptNotify :: Info:document.addEventListener event named deviceready 
ScriptNotify :: Info:Installing capture 
The thread '' (0xfcd0042) has exited with code 0 (0x0). 
Log:"GotDeviceInfo :: 7.10.7720" 
The thread '' (0xf1a0046) has exited with code 0 (0x0). 
The thread '' (0xe010036) has exited with code 0 (0x0). 
Log:"onDeviceReady. You should see this message in Visual Studio's output window." 
The thread '' (0xf6a005e) has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:59:02.820

Windows Phone Emulator 需要支持 DirectX 10 或更高版本的显卡以及 WDDM 1.1 驱动程序。我假设您在第一次启动模拟器时收到一条错误消息，表明您的图形适配器不能用于模拟器的所有功能

如果您的图形适配器不完全支持 DirectX 10 或没有 WDDM 1.1 驱动程序，您将只会看到黑屏而不是呈现的网页。这也会影响使用 MultiScaleImage 的所有控件，包括 webbrowser 控件。据我所知，目前没有解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:19:32.240

该应用程序似乎正在加载，您可以发布您正在运行的 html 吗？

顺便说一句：像这样的消息：线程“”（0xf6a005e）已退出，代码为0（0x0）。实际上并不意味着应用程序已退出，这些是正在退出的线程，您可以在 Visual Studio 的设置中隐藏这些消息。

# c# - 如何通过简单的绑定使用多个 ViewModel

> ID：10430481
> 
> 赞同：2
> 
> 时间：2012-05-03T11:31:04.497
> 
> 标签：c#, binding, xamarin.android, viewmodel, mvvmcross

是否有可能通过简单的绑定使用多个 ViewModel？我们的想法是为每个 Activity 拥有一个 ViewModel。

此致

尼尔斯

* * *

我尝试使用基于[https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20SimpleDialogBinding/SimpleBinding/SimpleDroid](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20SimpleDialogBinding/SimpleBinding/SimpleDroid)的两种不同的 ViewModel 进行测试，但似乎存在一些问题。

我的结构如下所示：

```
Activity1                   Activity2
    |                       |
    |                       |
    |                       |
ViewModel1              ViewModel2 
```

两个 Activity 都继承自 MvxSimpleBindingActivity。

当我运行程序时，MvxBaseSetup 会抛出 System.ArgumentException。这是关键部分：

```
 protected IDictionary<Type, Type> GetViewModelViewLookup(Assembly assembly, Type expectedInterfaceType)
    {
        var views = from type in assembly.GetTypes()
                    where !type.IsAbstract
                    && expectedInterfaceType.IsAssignableFrom(type)
                    && !type.Name.StartsWith("Base")
                    let viewModelPropertyInfo = type.GetProperty("ViewModel")
                    where viewModelPropertyInfo != null
                    let viewModelType = viewModelPropertyInfo.PropertyType
                    select new { type, viewModelType };

        return views.ToDictionary(x => x.viewModelType, x => x.type);
    } 
```

我真的不明白为什么这两个不同的 ViewModel 会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:13:51.867

如果您使用 MvvmCross 中的简单绑定示例而没有框架的其余部分，并且您正在使用多个 ViewModel，那么您将不得不找到一些方法来构建 View 和 ViewModel 之间的查找表。

* * *

`protected abstract IDictionary<Type, Type> GetViewModelViewLookup()`最简单的方法是在您的设置中覆盖该方法。

您可以将其替换为简单的字典，例如：

```
return new Dictionary<Type,Type>()
{
{typeof(Activity1), typeof(ViewModel1)},
{typeof(Activity2), typeof(ViewModel2)}
}; 
```

* * *

或者，如果您想要更“平台级别”的修复，那么您可以为您的活动实现一个通用基类，该基类设置 viewmodel 类型，如：

```
public class MyBaseActivity<TViewModel>
    : MvxBindingActivityView<MvxNullViewModel>
{
    public new TViewModel ViewModel { get; set; }

    public override object DefaultBindingSource
    {
        get { return ViewModel; }
    }

    protected sealed override void OnViewModelSet()
    {
        // ignored  here
    }
} 
```

然后，您的活动可以继承为：

```
public class Activity1 : MyBaseActivity<ViewModel1> {} 
```

和

```
public class Activity2 : MyBaseActivity<ViewModel2> {} 
```

然后基本反射代码将起作用。

* * *

我不确定是否有人将这种形式的简单绑定用于除演示之外的任何内容 - 到目前为止，大多数用户已经使用了整个平台 - 所以请在遇到其他问题时发布其他问题。

* * *

**更新：**我现在已经将一个推送到 GitHub - 你可以按照上面`MvxSimpleBindingActivityView<TViewModel>`的描述使用它`MyBaseActivity<TViewModel>`

# javascript - Ajax 内容随着页面刷新而消失

> ID：10430482
> 
> 赞同：0
> 
> 时间：2012-05-03T11:31:05.800
> 
> 标签：javascript, ajax, onclick

我有一个 div 元素和 onClick 我正在使用 ajax 加载内容，但刷新后加载的内容消失了。

只想在页面刷新后将内容保留在那里。

有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:33:07.627

Ajax 内容在您刷新页面之前是持久的，如果您想保留这些值，您有两种选择 1）在服务器端预加载内容并将页面呈现给用户，2）页面加载结束后立即触发ajax 命令加载前面介绍的 ajax 数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:55:04.063

一旦您向要呈现的页面发送 ajax 请求，您就可以执行此操作，一旦
刷新页面，您可以在会话中存储此日期，如果之前已设置，则可以从会话中呈现此部分

# objective-c - 如何将我的整数值分配给 CMTime iOS Sdk

> ID：10430486
> 
> 赞同：1
> 
> 时间：2012-05-03T11:31:11.513
> 
> 标签：objective-c, ios, avassetwriter

我想将我的 int 值分配给 CMTime 类型变量

我希望这个代码像：

```
CMTime frameTime;
if (i == 0 && i == 1) {
    frameTime = 0;//CMTimeMake(value, preferredTimeScale);
}
else if(i == 2) {
    frameTime = 2;
}
else {
    frameTime = 3;
}

append_ok = [adaptor appendPixelBuffer:buffer 
                  withPresentationTime:frameTime]; 
```

代替：

```
int64_t value = 10000;
int32_t preferredTimeScale = 600;
frameTime = CMTimeMake(value, preferredTimeScale); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:53:38.127

我不确定这是否对您有帮助，但我正在使用这样的 CMTime：

```
float seeking = songDuration*[slider value];
CMTime seekingCM = CMTimeMake(seeking, 1);
[mainDelegate.theAudio seekToTime:seekingCM]; //mainDelegate.theAudio is avplayer 
```

上面的代码只是为我创建了 CMTime，我想在音频和滑块上播放的确切时间..

我希望这就是你要找的..

# ios - XCode 4.3 构建和调试 iOS 5.0 项目

> ID：10430494
> 
> 赞同：0
> 
> 时间：2012-05-03T11:31:58.283
> 
> 标签：ios, xcode, sdk

如何在 xcode 4.3 上为 ios 5.0 构建和调试应用程序。当我运行 xcode-build 时，它使用 xcode 4.2 和应用程序崩溃进行构建，但是当我打开 xcode 时，它​​使用 xcode 4.3 构建（编译）。Build settings -> Base SDK 只有 iOS 5.1 和一些 MACOSX 变种。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:59:52.080

`/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild`考虑手动指定Xcode 4.3的 xcodebuild 路径。

我相信它正在尝试从`/Developer/usr/bin/`Xcode 4.2 工具版本启动该工具并找到它。

您将需要使用 Settings-Downloads-Components 安装适用于 Xcode 4.3 的 5.0 Simulator SDK。

# ruby-on-rails - 在通过 devise + rails 3.1 创建用户之前设置某些字段

> ID：10430499
> 
> 赞同：0
> 
> 时间：2012-05-03T11:32:12.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, devise

在用户注册并且我正在使用设计后，我正在尝试向用户添加一些字段。

这是我试图放入 RegistrationsController 的代码

```
 if resource.save
            address_1 = resource.address.split(',')
            resource.city = address[0]
            resource.state = address[1] 
```

但是，在用户注册这些字段后（城市和州似乎为零）。

有人可以告诉如何正确覆盖注册控制器，以便用户注册后我可以在将用户保存到数据库之前执行某些操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:11:40.090

似乎我没有通过在路由文件中提供覆盖的控制器名称来正确地提供控制器，一切都按预期工作。

# jquery - .serialize() 和 .serializeArray() 有什么区别？

> ID：10430502
> 
> 赞同：29
> 
> 时间：2012-05-03T11:32:29.207
> 
> 标签：jquery, serialization, serializearray

我正在尝试将表单发送到控制器。jQuery 文档说`.serializeArray()`应该发送一个 json 数组，并且`.serialize()`应该创建一个查询字符串。

但是，当我尝试使用 IE9 F12 模式进行检查时，在这两种情况下，它看起来都像是一个查询字符串。我打过哪个电话...

我错过了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-03T11:37:14.243

`serializeArray`创建一个数组（**不是**“json数组”——没有这样的东西）；你可以自己测试一下`console.log($("#myform").serializeArray())`。另一方面，`serialize`创建一个作为 HTTP 请求一部分的查询字符串。这两种表示在某种意义上是等价的，因为使用适当的代码，您可以毫无歧义地将一种表示转换为另一种表示。

两个版本都可用的原因是，`serialize`当您只想发出 HTTP 请求（只需将结果放在查询字符串中）时`serializeArray`更方便，而如果您想自己处理结果则更方便。

jQuery 的 AJAX 方法不在乎您是否给它们一个或另一个，因为它们会检测参数的类型并将其转换为查询字符串（如果它还不是一个），因此到发出请求时，外部观察者无法分辨是什么参数的原始格式。

# c# - 在 WinRT 中从 Code behind 激活底部 AppBar

> ID：10430505
> 
> 赞同：4
> 
> 时间：2012-05-03T11:32:36.520
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

当我们选择一个磁贴时，有谁知道从代码隐藏中激活底部 AppBar 的方法？我找到了这个，但我找不到 C# 等价物。我浏览了一堆样本，但没有运气

[http://msdn.microsoft.com/en-us/library/windows/apps/br229676.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229676.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T19:15:34.970

在 XAML 中将 IsOpen 设置为 true 应该足以使其在页面打开时可见。如果您想在 AppBar 上设置焦点 - 它只能通过调用 appBar.Focus(FocusState.Programmatic) 在按钮单击或按键事件上完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T17:45:30.613

我想您希望在选择磁贴时始终显示应用栏。

您始终可以从 tile 事件处理程序的代码隐藏中将 IsOpen 和 isSticky 设置为 true

# macos - 通过 Finder 和 Applescript 复制项目：如何获取“项目存在 - 替换？” Finder中的对话框？

> ID：10430506
> 
> 赞同：5
> 
> 时间：2012-05-03T11:32:39.953
> 
> 标签：macos, applescript, finder

在我的应用程序中，我喜欢让 OSX Finder 复制文件或文件夹。

（*注意：我有充分的理由使用 Finder 而不是使用 shell cmds、NSWorkspace 或其他方式，因此不需要在这个方向上提出建议。*）

我目前依靠 Applescript 要求 Finder 执行复制操作。这是一个用于测试的示例脚本：

```
tell application "Finder"
    try
        copy file POSIX file "/etc/bashrc" to folder POSIX file "/private/tmp"
        -- alternative with same behavior:
        --duplicate POSIX file "/etc/bashrc" to POSIX file "/private/tmp"
    on error errmesg number errn
        display dialog "Error thrown: " & errmesg
    end try
end tell 
```

现在的问题是：**如果目标项已经存在，脚本会抛出错误并取消复制操作。**

但是，**我宁愿让 Finder 显示“项目存在”对话框**，它会在 Finder 中以交互方式执行此类复制操作时显示，如下所示：

![发现者](../Images/c7fc8eab4252e67dae8394e63e12cf86.png)

现在，事情是这样的： **如果我从 3rd 方应用程序 Script Debugger 运行此脚本，则会出现此对话框！**

因此，显然有一种方法可以让 Finder 显示对话框而不是抛出异常。但是怎么做？谁知道这其中的秘密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T14:13:48.583

好吧，为了我自己的需要，我找到了一个解决方案：我需要直接使用 AppleEvents API，而不是使用 AppleScript。

在那里，我可以将值`kAEAlwaysInteract | kAECanSwitchLayer`提供给`AESend`的 SendMode 参数。这使得对话框出现在 Finder 中（在这种情况下也将 Finder 放在前面）。

但是，对于依赖 AppleScript 的人来说，不幸的是，这不是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:53:40.620

**在使用 AppleScript 时，似乎实际上没有办法让 Finder 显示对话框**——至少当脚本在其常规环境中运行时是这样。在我的测试中，当目标已经存在时， *Finder*和*System Events*的文件命令始终会出错——唯一的区别是，除了语义之外，Finder 提供了一个开关来抑制这种行为，这意味着目标文件将被覆盖没有提示，但没有选项将其设置为（有关完全相同问题的讨论，请参阅[此 MacScripter 线程）。](http://macscripter.net/viewtopic.php?id=28628)`move``replacing``true``ask`

如果不深入了解其内部工作原理，我只能冒险猜测[Script Debugger](http://www.latenightsw.com/sd4/)以不同方式处理这种情况的事实很可能是因为它**没有**在正常环境中运行脚本。很难想象它如何在不创建自己的脚本执行层的情况下连接到脚本的内部工作以作为调试器完成其工作。这样的中间层可以解释为什么命令以不同的方式转发到应用程序——在 Finder 和 的情况下`move`，到将显示对话框的低级 Finder 复制例程。

[正如 Paul R 所建议的那样](https://stackoverflow.com/questions/10430506/copy-items-via-finder-and-applescript-how-to-get-item-exists-replace-dialo#comment13465425_10430506)，您可以自己重新实现该功能，或者转向[AppleScript-ObjectiveC](http://www.macosxautomation.com/applescript/apps/index.html)（恐怕不是我的专业领域）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-03T23:33:26.800

这可能会迟到，但如果您在复制文件之前删除文件，则与替换相同：

```
tell application "System Events"
    if exists file ("NewFilePath") then
        delete file ("NewFilePath")
            -- NewFilePath Is where the file will end up or already is
    end if
end tell
tell application "Finder"
    try
        copy file POSIX file "FilePath" to folder POSIX file "FolderPath"
        -- FilePath is where it is now
        -- FolderPath is the path of the folder you want the file in
    on error errmesg number errn
        display dialog "Error thrown: " & errmesg
    end try
end tell 
```

并且由于在替换或停止查找器之间没有选择，因此不应出现这样的窗口

# elf - Elf 文件的“.group”部分的指定是什么？

> ID：10430511
> 
> 赞同：3
> 
> 时间：2012-05-03T11:32:53.727
> 
> 标签：elf

我在 readelf 实用程序的帮助下打开了我的对象 elf 文件：readelf -a ./my_object.o | less 结果我得到了很多有趣的信息。我在部分表中看到了一个带有“GROUP”类型的“.group”部分。有人可以解释一下，“.group”部分的任命是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:35:43.507

它用于将部分组合在一起，告诉链接器如果它在组中包含一个部分，那么它也必须包含其他部分。组也可以带有 GRP_COMDAT 标志，它告诉链接器如果同一个组出现在两个 .o 文件中，那么它只需要包含其中一个。我认为它用于重复 C++ 模板实例化。

# wpf - 当文件托管在共享驱动器上时，从 https 绑定 WPF Image.Source

> ID：10430512
> 
> 赞同：0
> 
> 时间：2012-05-03T11:32:54.303
> 
> 标签：wpf, https, proxy, system.net

我有一个 WPF 应用程序，`<Image Source="{Binding myUrl}">`它显示从 https 地址检索到的图像。

我已经在 .config 中配置了代理，如下所示：

```
 <defaultProxy enabled="true" useDefaultCredentials="true">
      <proxy bypassonlocal="true"
            proxyaddress="http://ourProxy:8080/" />
    </defaultProxy> 
```

当应用程序托管在我的机器上并执行时，一切都显示正常。

但是，如果我将应用程序及其配置文件的精确副本存储在共享驱动器（在我们的域内）并在我的机器上执行它，则图像不再出现。

这是某种信任/许可的事情吗？从共享驱动器执行时，如何让图像显示（或者，我假设允许 https 连接）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:08:16.683

我创建了一个控制台应用程序来测试 http 连接，结果发现问题出在 defaultProxy 设置 app.config 上。

[此处](https://stackoverflow.com/questions/8327691/exception-when-specifying-defaultproxy-in-app-config-when-running-net4-0-applica)记录了此特定问题及其修复。

# svg - 获取一个被剪裁对象的“显示”边界框

> ID：10430518
> 
> 赞同：8
> 
> 时间：2012-05-03T11:33:08.203
> 
> 标签：svg

我需要找到已被裁剪的对象的可见 x 和 y 边界，以便我可以在其周围放置其他对象。但是，[规范](http://www.w3.org/TR/SVG/masking.html#clipPath-geometry)声明`getBBox`不考虑剪辑路径，所以我不能使用边界框。知道如何找到剪辑对象的显示限制吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T14:01:51.677

创建一个`<use>`引用 clipPath 中路径的隐藏元素并获取它的边界框。然后你只想要你的对象的边界框和使用对象的交集。

```
<defs>
  <clipPath id="clipPath">
    <path id="path" ...>
  </clipPath>
</defs>

<use id="clipPathBounds" visibility="hidden" xlink:href="#path"/> 
```

# javascript - 是否有用于使用 Phonegap 在 Android 上收集联系人的组属性？

> ID：10430519
> 
> 赞同：1
> 
> 时间：2012-05-03T11:33:08.283
> 
> 标签：javascript, android, ios, cordova

我想知道是否有某种方法可以从 Android 上的联系人组中选择一个组名并同时向他们发送一条短信。在 Phonegap 上找到的联系人属性有：id、displayName、name、昵称、phoneNubers、电子邮件、地址、ims、组织、生日、便笺、照片、类别、url。

哪个不包含组，那么还有另一种选择组的方法吗？还是我应该每次都一一选择所有需要的联系人？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:14:03.123

抱歉，Android 上的 group 属性没有映射到 W3C Contact API 规范中的任何字段。如果您想将一堆联系人分组，您可能希望给他们所有相同的注释，以便您可以根据注释找到所有联系人。

# java - 为同一任务使用不同版本的不同 api 时的 Java 版本兼容性

> ID：10430526
> 
> 赞同：0
> 
> 时间：2012-05-03T11:33:18.007
> 
> 标签：java, swing, java-7, java-6, java-5

我为 jre 1.7、jre 1.6 和 jre 1.5 编写了一个用于屏幕捕获的小程序。小程序必须为其窗口使用透明背景。但是对于半透明 jre 1.7(graphicDevice window Translucency) 和 1.6(awtutilities) 使用不同的 api 并且 jre 1.5 有解决方法。现在如何使我的小程序兼容所有三个版本？

我想我必须用不同的编译器编译不同的类。但是如何在单个应用程序中使用这些单独编译的类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:49:10.960

> 根据参考文章..

好的，我觉得我应该在这个阶段加入，因为我对@Alexie 的评论投了赞成票......并写了这篇文章和小程序。;)

第 1 名。我基本上已经忘记了那个小程序，并打算建议使用 JWS/嵌入式小程序，但这仅适用于 1.6_10+（那是 Sun 发布 Plug-In 2 JRE 的时候——与其他 JRE 制造商不同）。

然后，当我*查看*小程序时，很明显 Alexie 已经成功了。只需几页，一些特定于版本的罐子和一点“跳过箍”，它就可以满足规范。

这是它的工作原理。

*   让“公共链接”指向 1.7+ 版本的小程序（例如称为：`applet.html`，使用`archive="appletcommon.jar,applet7.jar"`）。使用[Java 版本检查器小程序](http://www.pscode.org/jre.html)检查 1.7（或更高版本）。如果**不可**用：
    *   重定向到`applet6.html`, 对于 1.6 `archive="appletcommon.jar,applet6.jar"`。如果**不可**用：
        *   重定向到`applet5.html`, 对于 1.5 `archive="appletcommon.jar"`。如果**不可**用：
            *   重定向到显示“抱歉，需要 1.4+ 插件，请参阅 a、b、c 以进行安装”的页面。您可能会使用`deployJava.js`此处来询问“1.2+ Java”——甲骨文将提供最新的公开发布版本——我不确定 Apple 或 *nix，但希望相同。

这里重要的是对各种档案内容的精细描述。那分解为。

*   `appletcommon.jar`与此小程序可用的最低版本（在本例中为 1.5）兼容的核心小程序类。- 编译期间的源/目标必须==1.5，并且
*   `applet6.jar`有 1.6 节课。同上编译选项。
*   `applet7.jar`有 1.7 节课。同上编译选项（除非使用 1.7 SDK 编译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T09:08:25.603

如果在不同版本的 java 中存在相同功能的不同 API（如 java 1.7 中的 JWindow.setOpacity() 和 java 1.6 中的 AWTUtilities.setWindowOpacity()），那么我们可以使用类的动态加载来使用 API，具体取决于类 wrt java 版本的可用性。这是解决我的情况的代码：

```
 try
    {
        Class<?> cls = Class.forName("javax.swing.JWindow");
        Method meth = cls.getMethod("setOpacity", float.class);
        meth.invoke(transparentWindow, 0.50f);
    }
    catch (Throwable e)
    {
        e.printStackTrace();
        try
        {
            Class<?> cls = Class.forName("com.sun.awt.AWTUtilities");
            Method meth = cls.getMethod("setWindowOpacity", Window.class,
                                        float.class);
            meth.invoke(null, transparentWindow, 0.50f);
        }
        catch (Throwable e1)
        {
            e1.printStackTrace();
        }
    } 
```

希望它像以前一样对初学者有所帮助:)

# ruby-on-rails-3 - 宝石创建和导入

> ID：10430531
> 
> 赞同：0
> 
> 时间：2012-05-03T11:33:40.067
> 
> 标签：ruby-on-rails-3, rubygems, rails-engines, gemcutter

我目前正在从事一个项目，其中我有一个具有多个托管引擎的主应用程序。这些引擎之一用于身份验证和会话处理，当前存储在主应用程序自己的根文件夹中。

我希望从此文件夹创建一个 gem 并将其导入主应用程序，以便它可以用于对用户和会话等进行身份验证调用。

我怎样才能从这个文件夹中创建一个 gem，并使其中的类和方法对主应用程序可用。

您对此拥有的任何信息或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:14:27.900

RailsCasts 涵盖了可挂载 Rails 引擎的基本结构（gemspec 允许它与 Rails 4 兼容）。[http://railscasts.com/episodes/277-mountable-engines](http://railscasts.com/episodes/277-mountable-engines)。

可能是一个很好的起点，然后再回来提出更多问题。

# vb.net - 将短信号码转换为双倍（VB.NET）

> ID：10430539
> 
> 赞同：0
> 
> 时间：2012-05-03T11:34:38.343
> 
> 标签：vb.net

我正在尝试将短信转换为双倍。我正在创建一个监视系统，其中“45.2”之类的值被发送到另一个调制解调器。

我想将 45.2 （我认为它最初是字符串并放在文本框中）转换为 double 以便我可以在收到它时进行比较。

我已经尝试过了，但出现了错误：

```
Dim strMeasurement As String = txtMessage.Text.Trim
Dim dblMeasurement As Double = CDbl(strMeasurement) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:40:02.647

改用[Double.TryParse(](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:46:55.103

正如拉胡尔所说：
使用

```
Double.tryParse(stringvalue, doublevalueTofill) 
```

如果成功则返回 true，否则返回 false。

# javascript - 是否可以使用异步 Google Overlays 服务来绘制实时路线？

> ID：10430540
> 
> 赞同：1
> 
> 时间：2012-05-03T11:34:45.320
> 
> 标签：javascript, ajax, google-maps, asynchronous

我正在使用谷歌覆盖实时绘制我的步行路线，我有一个网络服务获取我的 gps 坐标并尝试实时绘制路线。目前我每10秒刷新一次......

我想知道每次获得新位置时是否可以异步刷新地图？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:44:29.150

是的，请查看[https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions](https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions)。

小路：

> 折线坐标的有序序列。可以使用简单的 LatLngs 数组或 LatLngs 的 MVCArray 指定此路径。请注意，如果您传递一个简单的数组，它将被转换为 MVCArray 在 MVCArray 中插入或删除 LatLngs 将自动更新地图上的折线。

# asp.net - 使用 UpdatePanel 外部的按钮验证 UpdatePanel 中的控件

> ID：10430542
> 
> 赞同：0
> 
> 时间：2012-05-03T11:34:53.310
> 
> 标签：asp.net, validation, updatepanel

我的表单中有两个`UpdatePanels`，都包含几个`DropDownLists`和`TextBoxes`，其中大部分都需要验证。我有一个验证摘要和验证器组合在一个单独的`div`. `div`不在任何一个更新面板内。我终于有了一个不在 any 中的按钮`UpdatePanels`。如何确保只需单击按钮即可验证所有控件并显示在验证摘要中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:26:36.747

首先，您的按钮必须设置为`AsyncPostBackTrigger`两者中的一个`UpdatePanels`。
其次，您必须设置`EnableClientScript="true"`所有验证器，这将在客户端（java 脚本）执行验证。
最后，您的按钮`ValidationGroup`必须与您的验证器之一匹配。

但是，如果您需要在服务器端执行一些验证，则必须将您的验证器放在更新面板中以异步更新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:17:25.747

相信我，我在没有采取任何这些建议的情况下实现了这一目标。我只是将按钮的验证组和所有验证器设置为相同的值。就是这样。让我提醒你这个案例：我有两个更新面板。第一个面板上的控件的验证器位于一个单独的 div 中，它不包含在任何一个面板中。第二个更新面板只有一个要验证的控件，所以我将它的验证器放在同一个面板上。我有一个与所有这些完全不同的按钮。当我单击按钮时，我可以获得验证摘要中汇总的所有验证消息。然而，一个非常奇怪的事情仍然是一个秘密：正如我所说的第一个面板控件的验证器在那个面板之外，它们工作得很好。但是，如果我从第二个更新面板中取出唯一的验证器并将其放在其他验证器中，我就不会收到该单个验证器的消息。我几乎可以肯定这是 Visual Studio 中的一个错误，因为我目睹了很多这样的事情。

# html - 如何在 hr 标签中添加一些文本？

> ID：10430557
> 
> 赞同：3
> 
> 时间：2012-05-03T11:36:26.787
> 
> 标签：html, css

我试图在 hr 标签的末尾添加一些文本，但到目前为止，我还没有设法让它按应有的方式工作。

我希望有一行 --------------------- 顶部有一些文本。
你可以在这里看到我的小提琴[http://jsfiddle.net/2BHYr/](http://jsfiddle.net/2BHYr/)

编辑：

我想要的是：

****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _** _Top**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:04:44.697

我相信我已经明白你想要什么了。这是小提琴： http:
[//jsfiddle.net/fMJm2/2/](http://jsfiddle.net/fMJm2/2/)（也更新了第2版。）

HTML：

```
<div class="separator">
    <hr>
    <a href="#top">To Top</a>

</div> 
```

CSS：

```
.separator {
    margin-top: 100px;
    text-align: right;
    position: relative;
}

.separator hr {
    position: absolute;
    z-index: 1;
    width: 100%;
}

.separator a {
    position: absolute;
    right: 0px;
    top: 0px;
    font-style: italic;
    background: #fff;
    z-index: 10;
    padding: 2px 20px;
}
​ 
```

`separator`在我的代码中，为了方便起见，我将所有内容都包含在一个带有类的 div 中。

*   .separator 将其位置设置为相对，以便更好地控制子元素。
*   hr 获得绝对位置，链接也是如此。这是为了能够将`<a>`标签放置在`<hr>`.
*   链接设置为`right: 0`带有一点填充，并在`<hr>`. 我相信这是您想要实现的目标。

**版本 2：**
根据 OP 的要求，我重新混合了上面的代码以在没有`<hr>`标签的情况下工作。从语义上讲，使用 a 是有意义的`<hr>`，但 OP 的情况不允许使用它。

HTML：

```
<div class="separator_v2">
    <a href="#top">To Top</a>
</div> 
```

CSS：

```
.separator_v2 {
    margin-top: 100px;
    text-align: right;
    border-top: 1px solid #000;
    overflow: visible;
}
.separator_v2 a {
    margin-top: -12px;
    display: block;
    font-style: italic;
    background: #fff;
    z-index: 10;
    padding: 2px 20px;
    float: right;
}​ 
```

负边距的使用是这项工作的原因。尽管普遍认为，负边距*不是*黑客行为，而是符合 W3C 标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:41:27.927

检查这个小提琴：

[http://jsfiddle.net/53vD8/2/](http://jsfiddle.net/53vD8/2/)

它给出了一条 HR 线，后面是一个链接。

**HTML**

```
<head>
    <title>Lines</title>
</head>

<body>
    <div class="layer">
        <div class="line simple"></div>
        <a href="#" class="top_a">Top</a>
    </div>
    <div class="layer">
        <div class="line simple"></div>
        <a href="#" class="top_a">Top</a>
    </div>
</body> 
```

**CSS**

```
.layer
{
    margin-top:10px;
    margin-bottom:10px;
}

.line.simple
{
    width:90%; 
    height:0px; 
    display:block;
    position:relative;
    border-style:solid; 
    border-width:1px 0 0 0; 
    float:left;
    margin:15px 0 0px; 
}

.top_a
{ 
    padding-left:5px; 
    font:italic 12px/18px Georgia, sans-serif;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:57:20.210

为什么你需要一个 HR 标签？试试这个：将文本放在宽度为 100% 的 DIV 中，将顶部或底部边框设置为 1 实线并将文本向右对齐。

```
.hr-div {
  width: 100%;
  text-align: right;
  border-style: solid;
  border: 0px 0 1 0
}

<div class="hr-div">Top</div> 
```**

# javascript - 你如何删除javascript中的unicode字符？

> ID：10430562
> 
> 赞同：6
> 
> 时间：2012-05-03T11:36:46.517
> 
> 标签：javascript

我试图从字符串中删除一些 unicode 字符 [E000-F8FF]。我该如何在 javascript 中执行此操作？例如，我希望从此字符串中删除 E018 ：

IT 人群 </p>

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-03T11:38:50.733

```
str = str.replace(/[\uE000-\uF8FF]/g, ''); 
```

从萤火虫截取的屏幕截图：

![在此处输入图像描述](../Images/f0e704c053f1564a1d0eafba38d075ef.png)

# java - Hadoop中的不合理错误

> ID：10430564
> 
> 赞同：1
> 
> 时间：2012-05-03T11:36:53.603
> 
> 标签：java, hadoop, mapreduce

我在用

```
System.loadLibrary("native1"); 
```

其中 libnative1.so 依赖于其他 .so 。我已将每个这样的 .so 添加到分布式缓存中。有趣的是，如果我不添加任何一个 .so ，它会引发相应的异常（即找不到这个特定的 .so ）。这意味着，所有依赖项*都*存在于 Mapper 中。那为什么我在加载 native1.so 时会出现这个奇怪且不合理的错误？

```
IOException: Task process exit with nonzero status of 134 hadoop 
```

我找不到任何解决方案..因此任何帮助都会非常好。

提前致谢

# java - 将短整数附加到 CodedOutputStream 的干净方法

> ID：10430565
> 
> 赞同：1
> 
> 时间：2012-05-03T11:36:57.343
> 
> 标签：java, protocol-buffers

我正在使用 google 协议缓冲区，我需要在消息前面加上 16 位 int 的大小。我没有找到写 16 位 int 的协议缓冲区方法

我是一个 c++ 人，对 java 知之甚少。

到目前为止，我正在使用：

```
 // protomessage is a protocol buffer message
            // assuming protomessage.toByteArray().length < short.MAX_value
            ByteArrayOutputStream rawOutput = new ByteArrayOutputStream();
            CodedOutputStream output = CodedOutputStream.newInstance(rawOutput);

            ByteBuffer b = ByteBuffer.allocate(2);
            b.order(ByteOrder.LITTLE_ENDIAN);
            b.putShort((short) (protomessage.toByteArray().length));
            output.writeRawBytes(b.array()) 
```

那是正确的方法吗？（老实说感觉不对）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:48:20.380

如果您确切知道需要两个字节，则可以直接执行此操作：

```
int len = protomessage.toByteArray().length;
output.writeRawBytes(new Byte[]{
        (byte) ((len >>> 8) & 0xff), 
        (byte) (len & 0xff)
     }); 
```

虽然这不会检查溢出。

# javascript - 我需要拍摄在浏览器中播放的视频的快照

> ID：10430567
> 
> 赞同：3
> 
> 时间：2012-05-03T11:37:03.633
> 
> 标签：javascript, jquery, jquery-plugins, mediaelement.js

假设正在浏览器中播放视频。在视频下方，有一个按钮。单击按钮应捕获正在播放的视频的快照，并在其下方的滑块中显示快照。

我需要 jQuery 或 JavaScript 中的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:36:35.717

如果视频不是直播，你可以在我前段时间为一个小型媒体项目写的这段代码片段中找到合适的答案。它是 PHP，但您可以将相同的概念应用于其他语言

```
public function actionAjaxSetThumbnailFromFrame()
{
    if(!isset($_POST['Video'], $_POST['Video']['id']) || !isset($_POST['time']))
        throw new CHttpException(400,'Invalid request.');

    $video = Video::model()->findByPk($_POST['Video']['id']);
    $path = Utils::generateUniquePath("thumbnail.jpg", Config::getParam('mediaPath'));

    $command = "ffmpeg  -itsoffset -{$_POST['time']}  -i \"$video->filePath\" -vframes 1 -an -f image2 \"$path\"";
    //generate thumbnail
    exec(
        $command,
        $out,
        $retval
    );

    $thumbnail = new Image();
    $thumbnail->name = basename($path);
    $thumbnail->serverUrl = '';
    $thumbnail->filePath = $path;
    $thumbnail->relativeServerUrl = Utils::relativeUrlPath($path);
    $thumbnail->save();

    [...]
} 
```

该函数将视频 ID 和要保存的帧的时间作为输入。然后它使用 ffmpeg ( [http://ffmpeg.org/](http://ffmpeg.org/) ) 实用程序来提取屏幕截图。

核心线是：

```
$command = "ffmpeg  -itsoffset -{$_POST['time']}  -i \"$video->filePath\" -vframes 1 -an -f image2 \"$path\""; 
```

在 Java 中会是这样的：

```
String command = "ffmpeg  -itsoffset -"+time+"  -i \""+videoPath+"\" -vframes 1 -an -f image2 \""+screenshotPath+"\"";
Process child = Runtime.getRuntime().exec(command); 
```

然后你需要一些 javascript 代码来创建一个 ajax 调用并调用上述函数。

# c# - 为什么将对象设置为不同的实例时，只更新本地引用

> ID：10430570
> 
> 赞同：1
> 
> 时间：2012-05-03T11:37:13.700
> 
> 标签：c#, object, pointers

当我做：

```
var foo = new Customer("Peter");
var sth = foo;
var foo2 = foo; 
```

进而：

```
foo = new Customer("Dave"); 
```

only`foo`已更新，其他仍将是“Peter”。

但是当我这样做时：

```
foo.Name = "Dave"; 
```

然后更新所有对象。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:38:59.917

当涉及到引用类型时，变量（在您的示例中为 foo）仅存储引用。当您为变量分配新值时，您仅更改此变量，而不是它之前引用的对象。

```
class Customer
{
    public Customer(string name)
    {
        Name = name;
    }
    public string Name { get; set; }

    public static Customer Current { get; set; }
} 
```

您期望的行为可以用上面的代码完成。如果您将 Customer.Current 设置为某个值，则要求 Customer.Current 的每个代码都将获得先前设置的 Customer。但是，静态变量通常不是很好的设计选择，并且会带来一系列问题（可测试性、线程问题等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:49:08.873

在这里，您将一个新的客户对象分配给 foo。这三行表示 foo、sth 和 foo2 指向 Customer(Peter)：

```
var foo = new Customer("Peter");
var sth = foo;
var foo2 = foo; 
```

但是在这里，您是说 foo 应该指向另一个客户（Dave）。其他“指针”没有改变，因为它们与 Dave 无关：

```
foo = new Customer("Dave"); 
```

但是在这里您是说 Peter 对象中的 Name 属性应该更改为 Dave。您正在使用 foo 获取实际对象，然后更改对象本身的某些内容：

```
foo.Name = "Dave"; 
```

sth 和 foo2 仍然指向您更改的对象。他们的参考没有改变；对象本身发生了内部变化。某事和 foo2 不在乎，他们唯一的工作就是指出他们被告知的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:03:42.440

如果您真的想要这种引用链接（非常奇怪的情况，顺便说一句），您可以创建一个新类，例如：

```
public class CustomerRef
{
     public Customer Obj { get; set; }
} 
```

因此，您的示例代码将变为：

```
var foo = new CustomerRef(new Customer("Peter"));  
var sth = foo;  
var foo2 = foo; 
```

进而

```
foo.Obj = new Customer("Dave"); 
```

所有变量都继续引用新对象。如果要更改名称，只需执行以下操作：

```
foo.Obj.Name = "Dave"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:40:23.463

引用是一个变量，其值是对对象的引用。当您将引用更改为指向不同的对象时，该值是一个新的引用。因此，对前一个对象的引用保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T12:10:15.780

引用只是堆中对象的地址（类是引用类型）。让我们看看当你这样做时会发生什么：

```
var foo = new Customer("Peter");
var sth = foo;
var foo2 = foo; 
```

想象堆是美国。当您创建新客户 Peter 时，他有一些地址，例如 33132 Miami Florida。考虑变量，例如地址簿中的记录。当您将 Peter 分配给某个变量时，它实际上只存储了 Peter 的地址，而不是 Peter 的身体（将人员的身体保存在地址簿中有点奇怪）。在您的示例中，地址簿中有三行：

```
var foo = [33132 Miami Florida] // Peter's address
var sth = [33132 Miami Florida] // copy address from foo record
var foo2 = [33132 Miami Florida] 
```

然后您创建新客户 Dave，该客户居住在 New Your 中：

```
foo = new Customer("Dave"); 
```

你擦除了`foo`在你的通讯录中在线写的内容。并在那里记下戴夫的地址：

```
 var foo = [10012 New York, NY] // this is address of Dave!
 var sth = [33132 Miami Florida] // other records in book has not changed
 var foo2 = [33132 Miami Florida] 
```

但是，当您使用对象的地址向他发送消息时，情况就不同了。

```
foo.Name = "Dave"; 
```

这向住在迈阿密的彼得发送了一条消息，他应该将自己的名字改为戴夫。彼得的地址没有改变。所以其他记录也包含彼得的地址。改变的是彼得！而且只有一个彼得。您只需将他的地址保存在几份记录中。

如果您从`sth`记录中获取 Peter 的地址，并向他发送消息“嘿，有人在地址 33132 Miami Florida，你叫什么名字？”，那么 Peter 将向您发送他的新名字：

```
string name = sth.Name; 
```

顺便说一句，垃圾收集器不会只杀死地址簿中存在的那些人。

# java - 属性“entityManagerFactory”是必需的

> ID：10430573
> 
> 赞同：0
> 
> 时间：2012-05-03T11:37:17.287
> 
> 标签：java, spring, jpa

我刚刚开始开发一个旨在支持现有 Web 项目的应用程序，因此业务和持久层已经存在并且在该 Web 应用程序中运行良好。现在，当我在控制台应用程序中使用两个层的库时，我收到一个错误，即 JpaTransactionManager 需要 entityManagerFactory，这很奇怪，因为它不会在我的 Web 应用程序中引发异常。我在控制台应用程序中所做的只是创建应用程序上下文

```
public static void main(String[] args) {
    ApplicationContext ctx = new ClassPathXmlApplicationContext("engine-context.xml");

} 
```

引擎上下文.xml：

```
<import resource="business-context.xml" />
<import resource="persistence-context.xml" />

<tx:annotation-driven transaction-manager="myTxManager" proxy-target-class="true"/> 
```

堆栈跟踪：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'spielerService' defined in class path resource [business-context.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'myTxManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myTxManager' defined in class path resource [persistence-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property 'entityManagerFactory' is required
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:452)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at org.boogerrangers.engine.EngineMain.main(EngineMain.java:14) 
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'myTxManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myTxManager' defined in class path resource [persistence-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property 'entityManagerFactory' is required
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)
    at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:107)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:278)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:848)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:820)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:446)
    ... 10 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'myTxManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myTxManager' defined in class path resource [persistence-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property 'entityManagerFactory' is required
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
    ... 26 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myTxManager' defined in class path resource [persistence-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property 'entityManagerFactory' is required
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 32 more
Caused by: java.lang.IllegalArgumentException: Property 'entityManagerFactory' is required
    at org.springframework.orm.jpa.JpaTransactionManager.afterPropertiesSet(JpaTransactionManager.java:257)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 39 more 
```

我在 Web 应用程序中所做的只是在 web.xml 中定义上下文 XML 文件

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
        classpath:persistence-context.xml   
        classpath:business-context.xml          
    </param-value>
</context-param> 
```

applicationContext.xml 中不再有魔法

```
<!-- SESSION: -->
    <bean name="spielerSession" class="org.boogerrangers.persistence.dom.SpielerLogin" scope="session"  >
        <aop:scoped-proxy/>
    </bean>

<!-- FILTER: -->
    <bean name="authFilter" class="org.boogerrangers.game.filter.AuthFilter" >
    </bean> 
```

--

持久性上下文

```
<context:annotation-config />

    <bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="xxx" />
        <property name="username" value="xxx" />
        <property name="password" value="xxx" />
    </bean>

    <tx:advice id="txAdvice" transaction-manager="myTxManager">
        <tx:attributes>
            <tx:method name="get*" read-only="true" />
            <tx:method name="find*" read-only="true" />
            <tx:method name="*" rollback-for="Exception" />
        </tx:attributes>
    </tx:advice>
    <aop:config>
        <aop:pointcut id="servicePointcut" expression="execution(* *..*Service*.*(..))" />
        <aop:advisor advice-ref="txAdvice" pointcut-ref="servicePointcut" />
    </aop:config>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="xxx"></property>
        <property name="loadTimeWeaver">
            <bean
                class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
        </property>
    </bean>

... DAOs ... 
```

需要更多信息？

作为一个肮脏的解决方法，我创建了一个新的持久性上下文并改用它，但这很令人困惑，我不想有多余的配置。我还创建了第二个 web 应用程序，其执行与独立应用程序相同的操作，没有抛出异常。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:42:29.593

`JpaTransactionManager`应提供`EntityManagerFactory`：

```
<bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

它的`dataSource`属性是可选的，仅当您要将 JPA 与普通 JDBC 访问混合时才需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:46:51.020

看来数据源是在事务管理器中注入的

```
<bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean> 
```

但在我们的例子中，您需要使用实体管理器而不是数据源，因为您使用**JPA 事务管理器**：

```
<bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

# c# - 如何将 ListBox 的 Visibility 绑定到 ApplicationBar 按钮？

> ID：10430576
> 
> 赞同：1
> 
> 时间：2012-05-03T11:37:46.093
> 
> 标签：c#, silverlight, windows-phone-7, mvvm

我想通过点击应用程序栏的按钮来切换列表框的可见性。

[我使用本指南](http://msdn.microsoft.com/en-us/library/hh394036%28v=vs.92%29.aspx)创建了 ApplicationBar[s] 。所以他们的方法活在`App.xaml.cs`. ListBox 位于 MainPage.xaml 中。

我不明白如何从 App.xaml.cs 访问 ListBox，而且我发现这表明这不是最佳做法。

我觉得我应该以某种方式将 ListBox 的可见性绑定到按钮。

那可能吗？如果不是，我的方法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:41:19.580

将应用程序栏放在您的页面中并在您的按钮上应用一个事件。在这种情况下，更改列表框的可见性。

要创建 ApplicationBar，本教程更好（msot 基础）： http: [//msdn.microsoft.com/en-us/library/hh394040 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394040(v=vs.92).aspx)

**编辑（评论）**：您可以将 VM 中的值绑定到列表框（可见性）并在 App.xaml.cs 中更改此值；）

# java - 用于可视化大型社交网络的 Java 库

> ID：10430577
> 
> 赞同：0
> 
> 时间：2012-05-03T11:37:49.907
> 
> 标签：java, networking, visualization

是否有任何用于可视化大型社交网络的库？此外，如果网络有例如 200 000 条边，那么将它们可视化是否有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:55:01.697

你可以google java社交网络可视化。

我发现的一些东西：http: [//jung.sourceforge.net/](http://jung.sourceforge.net/)

[http://www.isi.edu/~blythe/KP/](http://www.isi.edu/~blythe/KP/)

做一些研究，你可能会发现更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:48:49.557

[GraphViz](http://www.graphviz.org/)可能是最好的工具；它带有[Java 绑定](http://www.graphviz.org/pdf/gv.3java.pdf)并且可以很好地处理大图。它非常复杂，但也非常强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:27:49.517

我曾经使用[gephi](http://gephi.org/)进行图形可视化。他们也有一些用于社交网络分析的模块。

# c# - 从 Microsoft Access 数据库中检索日期/时间值

> ID：10430578
> 
> 赞同：0
> 
> 时间：2012-05-03T11:37:55.287
> 
> 标签：c#, .net, windows

我有一种方法可以从表中的特定列中检索所有数据。现在这种方法在数据库中字段为“string”或“int”（通过更改为GetInt32）格式时有效，虽然它不喜欢日期字段，但我的方法如下：

```
public static void getDates()
{
    //create the database connection
    OleDbConnection aConnection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\\ev_mgr.mdb");

    //create the command object and store the sql query
    OleDbCommand actorCommand = new OleDbCommand("select Issue_Time2 from Events", aConnection);
    try
    {
        aConnection.Open();

        //create the datareader object to connect to table
        OleDbDataReader aReader = actorCommand.ExecuteReader();

        //Iterate throuth the database
        while (aReader.Read())
        {
            timeList.Add(aReader.GetString(0)); // Error occurs here

        }

        //close the reader
        aReader.Close();

        //close the connection Its important.
        aConnection.Close();
    }

    //Some usual exception handling
    catch (OleDbException e)
    {
        Console.WriteLine("Error: {0}", e.Errors[0].Message);
    }

    foreach (string time in timeList)
    {
        Console.WriteLine(time);
    }
} 
```

此行引发异常：

```
timeList.Add(aReader.GetString(0)); 
```

**错误：**

> 指定的演员表无效。

列中的日期/字段示例如下：

```
02/05/2012 15:52:45 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:44:06.723

尝试

```
timeList.Add(aReader.GetDateTime(0).ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:44:31.810

采用

```
timeList.Add(DateTime.Parse(aReader.GetString(0)).ToString(yourdateformat)); 
```

你的日期格式可以在哪里`"dd/mm/yyyy hh:MM:ss"`或任何你想要的

# c++ - 从 cpp 和 hh 文件制作库

> ID：10430581
> 
> 赞同：1
> 
> 时间：2012-05-03T11:38:00.607
> 
> 标签：c++, visual-studio-2010, visual-c++, linker

我有一个 xx.cpp 和 xx.hh 文件，并希望将 xx.obj 文件与由其他 cpp 和 hh 文件制作的库链接...怎么做？我可以制作一个 xx.obj 的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:34:41.857

答案取决于您对不同资源的访问方式以及您使用的开发工具。我想到了2个解决方案：

1.  如果您可以直接访问第二个库的源代码，您只需将 xx-sources 直接添加到该库，重新编译并重新链接即可。
2.  如果您不能直接访问 xx-sources 并且您只有 xx-object 文件，您可以将该对象文件直接添加到您的项目中（就像它们是常规源文件一样）。我知道这适用于 Visual Studio，但 xx-object-file 必须使用相同的编译器版本和设置进行编译（不要混合调试/发布、静态/动态运行时库）

# java - Java的原始类型是什么？

> ID：10430582
> 
> 赞同：42
> 
> 时间：2012-05-03T11:38:07.033
> 
> 标签：java, types, primitive-types, strong-typing

Java中的原始类型是什么？

原始类型和引用类型有什么区别？

Java 有多少种原始类型，它们是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-03T11:41:15.857

在 Java 中，每个变量都有一个在源代码中声明的类型。有两种类型：引用类型和原始类型。引用类型是对对象的引用。原始类型直接包含值。有 8 种原始类型：

*   字节
*   短的
*   整数
*   长
*   字符
*   漂浮
*   双倍的
*   布尔值

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-27T21:47:12.060

# 人们所说的“类型”是什么意思？

例如，在现实世界中，您拥有不同类型的车辆。每个都有不同的目的。您有用于快速驾驶的跑车、用于携带工具的 ute、用于运输大量货物的卡车以及用于豪华旅行的豪华轿车。同样，在 Java 中，您可以拥有用于不同目的的不同类型的数据，例如，您可以拥有数字（用于加/减等），您可以拥有用于交流单词和字母的“字符串”。你不能用字母来加——那是没有意义的，你也不能用数字来写一个句子。你必须使用正确的数据类型来做任何你想做的事情。

## 原语与引用类型 - 这是什么意思？有什么不同？

现在有一些基本的数据“类型”。这些已经由 Redmond/Sun 的研究人员创建。这些被称为“原始”Java 类型，它们将值存储在自己内部。这意味着什么？最好通过示例来解释：

***原始类型示例***

如果我给你一张 50 美元的钞票，那么这张钞票本身就值 50 美元。该值存储在便笺本身中。

***原语与引用类型并列***

现在想象一下，我没有给你 50 美元，而是给你一张纸，上面写着我在瑞士银行的保险箱的地址。我给你的那张纸本身不值 50 美元，但它指向了一个地址，你可以在那里得到 50 美元。这张纸基本上是一种“引用”类型，因为它本身不存储任何值，它只是指向某些地址。但我可以给你任何东西的地址：飞机、城堡、雨林：任何东西！

## 概括

你不能只是从你的后兜里把飞机或新干线火车递给某人：你只需给他们一个地址。但如果你有 50 美元，或任何类型的货币：实际物品就在你的后兜里。你不会给他们一张 50 美元钞票的藏宝图。

简而言之，就是原始类型和引用类型之间的区别。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-03T12:03:38.353

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)，[第 4 章。类型、值和变量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)：

> Java 编程语言是一种静态类型语言，这意味着每个变量和每个表达式都有一个在编译时已知的类型。
> 
> Java 编程语言也是一种强类型语言，因为类型限制了变量 [...] 可以保存的值或表达式可以产生的值，限制了对这些值支持的操作，并确定了操作的含义。强静态类型有助于在编译时检测错误。
> 
> Java 编程语言的类型分为两类：原始类型和引用类型。原始类型 [...] 是布尔类型和数字类型。数字类型是整数类型 byte、short、int、long 和 char，浮点类型是 float 和 double。引用类型 [...] 是类类型、接口类型和数组类型。还有一种特殊的空类型。对象 [...] 是类类型的动态创建的实例或动态创建的数组。引用类型的值是对对象的引用。所有对象，包括数组，都支持 Object [...] 类的方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-03T11:40:21.123

Java 中的原始类型是非类类型。它们只存储值。

```
double d = 3.0;
d.intValue();  //compiler error!
Double d2 = new Double(3.0);
d2.intValue();  //works! 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-03T11:44:53.503

有引用类型、基元类型和`void`

对于每个原始类型（和`void`），都有一个包装类型，它定义了一个名为的常量，该常量`TYPE`具有原始类型的类。

获取原始类型的类的编译器方法是使用`.class`符号。例如

```
Class<Integer> intClass = int.class; // == Integer.TYPE
Class<Void> voidClass = void.class; // == VOID.TYPE 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T11:44:06.810

它们是仅包含值的非类类型。在传递原始变量时，您传递的是值本身而不是值的引用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T11:50:52.157

java支持基本数据类型int、double、float等共八种。这些是原始类型数据或数据的基本类型。

**boolean,char,byte,short,int,long,double,float**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-16T08:51:24.093

任何内置于编程语言的数据类型都称为原始数据类型。作者可以互换使用原始或内置或基本数据类型的词。Java 中的原始数据类型由 Java 编程语言作为基本构建块提供，因此它们被称为 Java 的原始类型。Java 还允许程序员定义自己的类型（用户定义类型）。对于原始类型，Java 具有内置支持。原始类型由 Java 语言预定义并由保留关键字命名。Java 支持 8 种内置数据类型，程序员不能修改它们的基本行为和支持的操作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-03T12:06:59.217

原始类型不是类，但可用于存储数字和字符等值。

*   字节
*   短的
*   整数
*   长
*   字符
*   漂浮
*   双倍的
*   布尔值

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-07T23:11:49.097

有两种类型的数据类型，原始和对象引用。原始数据类型不是对象，它们只存储实际值，而对象引用变量存储它们所引用的对象的地址。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-19T16:43:09.577

原始的实际含义是数据类型是否是类。Java 不是纯面向对象的语言，因为在 java 中数据类型不是原始意味着数据类型不是类。

```
Eg:- int a; a=10;

/*Integer a=new Integer();
     a=10;
*/not possible 
```

而在 c# 中，数据类型是类，这就是为什么它是纯面向对象的语言

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-08-18T11:30:37.630

Java 编程语言支持的八种原始数据类型：

*   byte - 它是 8 位有符号二进制补码整数。它的最小值为 -128，最大值为 127。

*   short - 它是一个 16 位有符号二进制补码整数。它的最小值为 -32,768，最大值为 32,767。

详细解释[点击这里](http://www.placementquestion.com/category/java_question/short_question/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-29T09:00:56.343

数据类型有两种划分，分别是`primitives`和`reference`。原语将代表以下内容

*   数字
*   布尔值
*   漂浮
*   双倍的
*   字符

根据我们的数字

1.  字节：-128 到 127
2.  空头：-32,768 至 32,767
3.  整数：-2^31 到 2^31
4.  长：-2^63 到 2^63 - 1

这些将代表数字并具有不同的内存分配以节省内存，我们可以有效地使用它。在 int 和 long 中，我们有签名和未签名。无符号以 min=0 开头。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-31T09:21:09.770

在Java中有两种类型，

*   原始类型
*   引用类型

**原始类型**

原始类型直接包含值。

```
int i = 24; 
```

有8种原始类型，

1.  字节
2.  短的
3.  整数
4.  长
5.  字符
6.  漂浮
7.  双倍的
8.  布尔值

**引用类型**

引用类型是对对象的引用。当您在 Test.java 类中创建新的 Test 对象时，会有引用类型

```
Test t = new Test(); 
```

特别是 String 是一种引用类型。它不是原始类型。有两种方法创建 String 对象。

```
String s = "abc";

String y = new String("abc"); 
```

# java - 如果传递了错误类型的对象，我应该抛出什么类型的异常？

> ID：10430583
> 
> 赞同：13
> 
> 时间：2012-05-03T11:38:09.127
> 
> 标签：java, exception, comparable

如果将错误类型的对象传递给我的 compareTo 方法，我应该抛出什么类型的异常？

类转换异常？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T11:39:39.153

`IllegalArgumentException`当传入的值不是正确的值时，这将是一般意义上的。

但是，正如[@Tom 下面的回答](https://stackoverflow.com/a/10430727/343955)所暗示的那样，它也可能是`ClassCastException`不正确的类型。但是，我还没有遇到这样做的用户代码。

但更根本的是，如果你使用`compareTo`泛型，这将是一个编译时错误。

考虑一下：

```
public class Person implements Comparable<Person> {
    private String name;
    private int age;

    @Override
    public int compareTo(Person o) {
       return this.name.compareTo(o.name);
    }
} 
```

您在哪里看到在上面的示例中传递了错误类型的可能性？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T11:47:36.480

不出所料，[API 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)指定了在这种情况下要抛出的异常。

> ClassCastException - 如果指定对象的类型阻止它与此对象进行比较。

假设您使用的是泛型，如果有人尝试使用原始类型、反射或其他一些不安全的技术调用您的方法，您将自动获得此异常。

# c# - C#中的运算符

> ID：10430584
> 
> 赞同：0
> 
> 时间：2012-05-03T11:38:12.247
> 
> 标签：c#, c#-4.0

我有一个单词数组，我想删除与模式匹配的任何单词，并删除每个长度小于 3 个字符的单词。以下代码是否能够完成我的想法？提前致谢。

```
 foreach (Match mtch in mc )

           {
               string p = @"[A-Z,a-z,0-9]" ;

               if (Regex.IsMatch(mtch.Value, p)  || mtch.Length < 3 )
                {
                   continue;
                }
              else
              {
               filter.Add(mtch.Value);
              }
           } 
```

因为我真的对使用 || 感到困惑 操作员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:53:13.533

|| （OR 运算符）以下列方式工作。如果条件 1 返回真，条件 2 返回假，则整体结果为真。

```
true || true = true

true || false = true

false || true = true

flase || false = false 
```

在你的情况下：

```
 if (Regex.IsMatch(mtch.Value, p)  || mtch.Length < 3 ) 
```

它正在检查 mtch 的值是否与 RegEx 匹配或 mtch 的长度小于 3，然后继续循环执行。现在这里有两个条件，如果两个条件的结果都为假，这只会转到 if 语句的 else 部分。即 mtch 的值与正则表达式 p 不匹配并且值 mtch 长度大于或等于 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:49:02.127

> 条件或运算符 (||) 对其布尔操作数执行逻辑或。如果第一个操作数的计算结果为真，则不计算第二个操作数。如果第一个操作数的计算结果为 false，则第二个运算符确定整个 OR 表达式的计算结果为 true 还是 false。

[|| 操作员](http://msdn.microsoft.com/en-us/library/6373h346.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:52:16.527

|| 运算符执行逻辑或。

它将首先评估左操作数，如果为真，则表达式为真。如果左操作数为假，则计算第二个操作数。

如果您将以下示例作为控制台应用程序运行，您将看到会发生什么：

```
using System;

namespace OrOperand
{
    class Program
    {
        static void Main(string[] args)
        {
            DisplayResult(true, true);
            DisplayResult(true, false);
            DisplayResult(false, true);
            DisplayResult(false, false);
        }

        private static void DisplayResult(bool left, bool right)
        {
            _left = left;
            _right = right;

            Console.WriteLine("Running " + left + " || " + right);

            if (Left() || Right())
            {
                Console.WriteLine(_left + " || " + _right + " is true");
            }
            else
            {
                Console.WriteLine(_left + " || " + _right + " is false");
            }
        }

        static bool _left = true;
        static bool _right = false;

        static bool Left()
        {
            Console.WriteLine("Left called");
            return _left;
        }

        static bool Right()
        {
            Console.WriteLine("Right called");
            return _right;
        }

    }
} 
```

这将输出：

```
Running True || True
Left called
True || True is true
Running True || False
Left called
True || False is true
Running False || True
Left called
Right called
False || True is true
Running False || False
Left called
Right called
False || False is false 
```

# c# - 无法从零件中导出

> ID：10430585
> 
> 赞同：0
> 
> 时间：2012-05-03T11:38:12.427
> 
> 标签：c#, .net, exception-handling, mef

我正在使用 MEF 创建一个插件风格的架构，但我得到了一个组合异常。

这是细节。

我有以下代码：

```
AggregateCatalog catalog = new AggregateCatalog();
catalog.Catalogs.Add(new DirectoryCatalog(pluginDirectory));
CompositionContainer container = new CompositionContainer(catalog);
container.ComposeParts(this);

// add to dictionary
foreach (Lazy<IGX3PluginInterface> plugin in plugins)
{
    if (!this.pluginDictionary.ContainsKey(plugin.Value.ModuleName))
    {
    }
} 
```

在线上：

```
if (!this.pluginDictionary.ContainsKey(plugin.Value.ModuleName)) 
```

我收到以下异常：

> Exception = {"合成产生了单个合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。1) 调用线程必须是 STA，因为许多 UI 组件都需要这个。

这一切正常，然后我将插件更改为从 System.Windows.Window 类继承。这会导致失败吗？

继承人的插件头：

```
[Export(typeof(IGX3PluginInterface))]
public partial class MainWindow : GX3ClientPlugins.GX3ClientPlugin 
```

其中 GX3ClientPlugin 扩展了 System.Windows.Window 类。

我很确定这是相关的，但不完全理解它:) [http://mef.codeplex.com/discussions/81717](http://mef.codeplex.com/discussions/81717)

请让我知道您还需要什么其他信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:30:58.823

该异常并不是真正与 MEF 相关的，而是由 WPF 窗口的构造函数在 MEF 尝试创建它时引发的。作为例外状态，WPF 窗口不喜欢在非 STA 线程上创建。

我可以想到您可能会收到此错误的两个不同原因：

1）您的主线程不是 STA 线程，因为`Main`您的应用程序的入口点没有[STAThread](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)属性。

2）您正在调用`ComposeParts`另一个不是主线程的线程，并且该另一个线程是在没有[将单元状态设置为 的](http://msdn.microsoft.com/en-us/library/system.threading.thread.setapartmentstate.aspx)情况下创建的`ApartmentState.STA`。

另请参阅this [other question](https://stackoverflow.com/questions/4183622/the-calling-thread-must-be-sta-because-many-ui-components-require-this-in-wpf)。

# android - 列表视图中的标题

> ID：10430586
> 
> 赞同：1
> 
> 时间：2012-05-03T11:38:15.817
> 
> 标签：android, listview, header

我有一个 ListView，我有两个来自数据库的表，它们是类别和项目，我想在 ListView 中将它们显示为标题（类别）和每个标题下方的项目。我不知道为什么我不能动态地做我用这个教程 [http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

并且工作正常但数据是静态的我想从数据库中获取数据并显示它

请提供任何帮助。谢谢

这是我试图做的，但数据没有绑定

```
 protected void BindOrederItemList(final int order_id) 
    {
        // TODO Auto-generated method stub
        //select all categories from order items where order_id =??
        //select items where category=??
        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderCategory&lang_id=1&order_id="+order_id;
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 
        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {

                 JSONArray jArray = new JSONArray(result);

                 ArrayList<Integer> category=new ArrayList<Integer>();
                 for (int i = 0; i < jArray.length(); i++) 

                    {
                             //   HashMap<String, String> map = new HashMap<String, String>();
                        JSONObject e = jArray.getJSONObject(i);
                            id=e.getInt("order_id");
                          if (id==0)
                        {

                        }

                      else
                       {

                         cat_name=e.getString("cat_name");
                          cat_id=e.getInt("cat_id");
                         category.add(cat_id);
                         //select orderitems where cat_id??

                         BindCatItems(cat_id, id);

                       }

                    }

                       Catadapter.addSection(cat_name , new SimpleAdapter(getActivity(), catItemsList, R.layout.list_item,
                                new String[] {"item_name"},
                                new int[]{R.id.list_item_title}));

                        Log.i("Bind item", "CAT SIZE "+catItemsList.size());

                 order_items_list.setAdapter(Catadapter);
                        }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }

            }

        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,null,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
    }

    protected void BindCatItems(int cat_id,int order_id)

    {
        // TODO Auto-generated method stub
        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderItems&lang_id=1&cat_id='"+cat_id+"'&order_id="+order_id;
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 

        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                         catItemsList.clear();
                         JSONArray jArray = new JSONArray(result);

                            for (int i = 0; i < jArray.length(); i++) {
                                HashMap<String, String> map = new HashMap<String, String>();
                                JSONObject e = jArray.getJSONObject(i);

                                int id=e.getInt("item_id");
                                if (id==0)
                                {

                                }
                              //  String s = e.getString("posts");
                            //     JSONObject jObject = new JSONObject(s);

                                else
                                {
                                map.put("item_id",String.valueOf(e.getInt("item_id")));
                                map.put("oi_id", String.valueOf(e.getInt("oi_id")));
                                map.put("item_name", e.getString("item_name"));
                                map.put("quantity",String.valueOf( e.getString("quantity")));
                                map.put("price", String.valueOf("price"));
                                catItemsList.add(map);
                                }
                            }

                            Log.i("Bind", "CAT SIZE "+catItemsList.size());

                             Log.i("Add Section","section "+cat_name);

                          /*  ItemsAdapter=new SimpleAdapter(getActivity(), catItemsList, 
                                    R.layout.list_item,
                                    new String[] {"item_name"},
                                    new int[]{R.id.list_item_title});
                             */
                             //order_list.setAdapter(adapter);
                            //adapter.notifyDataSetChanged();
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,null,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }

    } 
```

# c - 先进先出 [c] 训练

> ID：10430587
> 
> 赞同：0
> 
> 时间：2012-05-03T11:38:17.810
> 
> 标签：c, fifo

为了个人对 Fifo 和 C 程序开发的兴趣，我坚持这个练习显然我犯了很大的错误。Fifo 被创建了但里面没有流量，必须依赖 Fifo 的保护/关闭/打开机制。请帮忙。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <ctype.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(int argc, char** argv)
{
  int c;
  int fi;
  int fo;
  int stat;
  int pid;
  fprintf(stderr, "Fifo...\n");

  if (mkfifo("FifoA", 0666)==-1) {
    exit(1);
  }

  if (mkfifo("FifoB", 0666)==-1) {
    exit(1);
  }

pid = fork();

  switch (pid) {
  case 0:

  if((fo=open("FifoA",O_RDONLY))==-1)
    {
       perror("error FifoA");
       exit(1);
    }

    close(fi); 
    while (read(fo, &c, 1)>0) {

      c = toupper(c);
      fputc(c,stdout);   
}
    break;
  case -1: 
    fprintf(stderr, "Fork error\n");
    exit(1);
  default:

  if((fi=open("FifoB",O_WRONLY))==-1)
    {
       perror("error FifoB");
       exit(1);
    }
    close(fo); 
    while ((c = fgetc(stdin))!=EOF) {
      write(fi, &c, 1);
    }
    close(fi);
    wait(&stat);
    break;
  }

  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:44:55.437

在你之后打开先进先出`fork()`，`O_RDONLY`在孩子和`O_WRONLY`父母中。这样，fifo就可以知道它的两端都是开放的，并开始通信。请记住，fifos 是单向的，`O_RDWR`没有意义。

您的最后一个问题是您创建了两个不同的 fifo，并期望它们相互交谈。

```
if((fo=open("FifoA",O_RDONLY))==-1)
//...
if((fi=open("FifoB",O_WRONLY))==-1) 
```

应该

```
if((fo=open("FifoA",O_RDONLY))==-1)
//...
if((fi=open("FifoA",O_WRONLY))==-1) 
```

fifo 有两个方面。一个进程从一侧写入，另一个从另一侧读取。如果您的唯一目标是读写程序，则只需要一个 fifo。

# c++ - 将文件数据读入二维数组时的 EXC_BAD_ACCESS

> ID：10430591
> 
> 赞同：0
> 
> 时间：2012-05-03T11:38:31.713
> 
> 标签：c++, ios, c, xcode, exc-bad-access

我正在尝试将文件数据加载到二维数组中，但是在调用 fread 时出现 EXC_BAD_ACCESS 错误。

这就是我尝试读取文件的方式：

```
char data[21][23];
FILE* file = fopen("1.txt", "r");
fread(data, 1, sizeof(data), file); // EXC_BAD_ACCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:33:24.700

在 C 中，二维数组 (nxm) 表示为一个包含 n 个指针的数组，这些指针指向 n 个大小为 m 的数组。

fread 将读入给定指针指向的内存区域。

在您的情况下， fread 会将数据写入应该存储 n 指针的位置。您不能简单地对 C 中的二维数组使用 fread() 或任何类似方法。

相反，首先读入一个大小为 m*n 的一维数组，然后将指向“行首”的指针复制到一个指针数组中：

```
char tmp[21*23];
FILE* file = fopen("1.txt", "r");
fread(tmp, 1, sizeof(tmp), file);
char* data[21];
int i;
for(i = 0; i < sizeof(data)/sizeof(char*); i++) {
    data[i] = &tmp[23*i];
} 
```

**更新**：示例代码包含一个错误（我使用了 sizeof(data)，它在 64 位系统上将返回 8 倍于所需值，导致另一个 EXC_BAD_ACCESS ;)）

# android - 在 Android 的 Phonegap 中的 Html 页面之间传递值

> ID：10430595
> 
> 赞同：1
> 
> 时间：2012-05-03T11:38:51.787
> 
> 标签：android, cordova

我正在尝试将值从 index.html 传递到其他 html 文件。如何使用在其他页面的 index.html 中创建的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:11:28.837

在 page1.html 中：

```
localStorage.setItem("myValue", myValue); 
```

在 page2.html 中

```
var myValue = localStorage.getItem("myValue"); 
```

# objective-c - 插入警报视图但不起作用

> ID：10430606
> 
> 赞同：0
> 
> 时间：2012-05-03T11:39:37.063
> 
> 标签：objective-c, ios, xcode, ios5.1

我有一种情况，我需要提醒用户下一个访问的视图控制器是“数据加载”。

我将此添加到 FirstViewController 按钮操作：

```
- (IBAction)showCurl:(id)sender {
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Please Wait" message:@"Acquiring data from server" delegate:self cancelButtonTitle:@"OK!" otherButtonTitles:nil];
    [alert show];
    SecondViewController *sampleView = [[SecondViewController alloc] init];
    [sampleView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
    [self presentModalViewController:sampleView animated:YES];
} 
```

它不起作用。它加载到 SecondViewController 并仅在加载 SecondViewController 后弹出。

所以我尝试了 SecondViewController 本身。SecondViewController 从远程服务器提取数据，这就是它需要一段时间才能下载的原因，具体取决于 Internet 连接。所以我决定在函数中添加 UIAlertView：

```
- (NSMutableArray*)qBlock{
    UIAlertView *alert_initial = [[UIAlertView alloc]initWithTitle:@"Loading" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert_initial show];

    NSURL *url = [NSURL URLWithString:@"http://www.somelink.php"];
    NSError *error;
    NSStringEncoding encoding;
    NSString *response = [[NSString alloc] initWithContentsOfURL:url 
                                                    usedEncoding:&encoding 
                                                           error:&error];
    if (response) {
        const char *convert = [response UTF8String];
        NSString *responseString = [NSString stringWithUTF8String:convert];
        NSMutableArray *sample = [responseString JSONValue];
        return sample;
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"ALERT" message:@"Internet Connection cannot be established." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
    return NULL;
} 
```

这也行不通。最重要的是，我尝试关闭互联网连接以查看是否弹出第二个警报以提醒用户没有互联网连接。第二个警报也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:57:34.830

对于问题的第一部分： 的`show`方法`UIAlertView`不会阻塞当前线程，因此继续执行并且您的行为是预期的。您要做的是实现[UIAlertViewDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)的方法之一并将警报的`delegate`属性设置为`self`. 因此，当警报解除时，您可以显示您的`SecondViewController`.

对于第二部分，如果您`qBlock`在后台线程中执行您的方法，那么您通常会提醒不要再次显示 - 您需要在 UI 正在运行的主线程中显示您的警报。为此，请`else`使用以下内容更改您的声明：

```
else
{
    dispatch_async(dispatch_get_main_queue(), ^{
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"ALERT" message:@"Internet Connection cannot be established." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show]; 
    });
} 
```

希望这可以帮助。

# vb.net - 从数据表填充单选按钮

> ID：10430607
> 
> 赞同：0
> 
> 时间：2012-05-03T11:39:38.060
> 
> 标签：vb.net, winforms, data-binding, radio-button

我正在 Windows 窗体 (VB) 中进行回溯。我已成功设置 MySQL 数据库，并与所需的一切建立连接。我还设法填充了一个名为 tblAlt 的 DataTable 用于该问题的替代方案。

然后我尝试用 DataTable 中的行填充每个单选按钮。

这是我尝试过的：

```
For Each row In tblAlt.Rows
    If tblAlt.Rows.IndexOf(row) = 0 Then
        RadioButton1.DataBindings.Add("Text", bindAlt, "altTekst")
    ElseIf tblAlt.Rows.IndexOf(row) = 1 Then
        RadioButton2.DataBindings.Add("Text", bindAlt, "altTekst")
    ElseIf tblAlt.Rows.IndexOf(row) = 3 Then
        RadioButton3.DataBindings.Add("Text", bindAlt, "altTekst")
    End If
Next 
```

不幸的是，所有 3 个单选按钮都具有相同的文本（表格的第一行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:20:51.023

您通常不会将表格的各个行数据绑定到表单上的控件。在您的示例代码中，您每次都在对同一事物进行数据绑定。

我怀疑，这就是你想要的：

```
For Each row As DataRow In tblAlt.Rows
  If tblAlt.Rows.IndexOf(row) = 0 Then
    RadioButton1.Text = row("altTekst").ToString
  End If
  If tblAlt.Rows.IndexOf(row) = 1 Then
    RadioButton2.Text = row("altTekst").ToString
  End If
  If tblAlt.Rows.IndexOf(row) = 2 Then
    RadioButton3.Text = row("altTekst").ToString
  End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-28T16:18:31.023

Studentactive.lblcourse.Text = dgvstclass2.Rows(e.RowIndex).Cells("课程名称").Value Studentactive.lblTeacher.Text = dgvstclass2.Rows(e.RowIndex).Cells("教师姓名").Value Studentactive。 lbltiming.Text = dgvstclass2.Rows(e.RowIndex).Cells("Timing").Value Studentactive.lblhide.Text = dgvstclass2.Rows(e.RowIndex).Cells("Rec#").Value

# jquery - 在 JQuery Mobile 中动态填充选择列表

> ID：10430610
> 
> 赞同：2
> 
> 时间：2012-05-03T11:39:43.850
> 
> 标签：jquery, jquery-mobile

我有一个 JQuery 移动应用程序。这个应用程序有一个带有“选择”元素的页面。元素中的选项需要动态添加。对于我的生活，我无法弄清楚如何做到这一点。目前，我正在尝试以下操作：

**page.html**

```
<div id="myPage" data-role="page">
  <div data-role="header" data-position="fixed">
    <h1>Welcome</h1>
  </div>

  <div data-role="content">
    <select name="mySelector" id="mySelector" data-native-menu="false">
      <option>Please Choose</option>                
    </select>
  </div>
</div> 
```

page.html.js

```
$("#myPage").live("pagebeforeshow", function (e, ui) {
  for (i=0; i<5; i++) {
    $("#mySelector", "#myPage").append('<option value="' + i + '">Option ' + (i+1) + '</option>');
  }
}); 
```

由于某种原因，我的动态项目不会出现。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T10:30:53.413

您必须致电：

```
$('#mySelector').selectmenu('refresh'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:52:46.453

它适用于我，但默认情况下禁用选择（idk 为什么）[http://jsfiddle.net/vjkaG/](http://jsfiddle.net/vjkaG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:05:49.127

不幸的是，sofl 的回应没有奏效（感谢您的尝试）。但是，这样做了：http: [//forum.jquery.com/topic/dynamically-populating-select-control](http://forum.jquery.com/topic/dynamically-populating-select-control)

# scala - Scala map 方法语法

> ID：10430616
> 
> 赞同：27
> 
> 时间：2012-05-03T11:40:22.473
> 
> 标签：scala, syntax

下面的代码来自[http://www.scalaclass.com/book/export/html/1](http://www.scalaclass.com/book/export/html/1)做矩阵点积。

我无法理解大括号之间的语法。

*   为什么使用大括号，而不是常规方法括号？
*   不是匿名方法吗？
*   ._1 和 ._2 是什么？

谢谢。

```
type Row    = List[Double]
type Matrix = List[Row]

def dotProd(v1:Row, v2:Row) = 
    v1.zip(v2).map{ t:(Double, Double) => t._1 * t._2 }.reduceLeft(_ + _) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-03T17:42:28.690

*   为什么使用大括号，而不是常规方法括号？

当参数是匿名函数时，有些人更喜欢使用花括号。一方面，花括号启用了模式匹配匿名函数，而括号则没有。在这个特定的示例中，不需要花括号。

这是一个需要花括号的示例（因为`case`模式匹配）：

```
def dotProd(v1:Row, v2:Row) = 
    v1.zip(v2).map{ case (a, b) => a * b }.reduceLeft(_ + _) 
```

请注意，上述函数与问题中的函数完成相同的事情，但方式略有不同。

*   是`t`匿名方法吗？

不，它是一个参数。就像`v1`和`v2`的参数一样`dotProd`，`t`是传递给 的匿名函数的参数`map`。

*   什么是`._1`和`._2`？

上的方法`t`。该参数`t`被定义为一个元组（具体来说，`Tuple2[Double, Double]`，可以写成`(Double, Double)`），并且元组允许您使用以下方法提取元组的每个成员：`_1`、`_2`、`_3`等。

A当然`Tuple2`只有`_1`和`_2`。请注意，第一个参数是`_1`，而不是`_0`，因为受到其他函数式语言的影响。

无论如何，该`zip`方法会将`Row`( `List[Double]`) 转换为`List[(Double, Double)]`. 该方法采用将列表元素（元组）转换为其他`map`元素的函数。`(Double, Double)`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-03T12:44:49.200

在这种特殊情况下，大括号与普通的旧语法相比没有优势，但总的来说，使用大括号的好处是它们允许您在其中编写模式匹配表达式`map ...`：

所以我可以重写这个

```
.map{ t:(Double, Double) => t._1 * t._2 } 
```

进入这个

```
.map{ case(a: Double, b: Double) => a*b } 
```

但这不会编译：

```
.map( case(a: Double, b: Double) => a*b ) 
```

正如 Lee 所说，._1, ._2 提供对 N 元组的第一个、第二个、... N 元素的访问。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T12:45:27.237

您可以在这个问题中找到关于大括号 {} 和圆括号 () 之间区别的一个很好的答案：[Scala 中大括号和圆括号之间的形式区别是什么，什么时候应该使用它们？](https://stackoverflow.com/questions/4386127/what-is-the-formal-difference-in-scala-between-braces-and-parentheses-and-when)

对于 _1, _2，请参阅[_2 sign in scala language 的含义](https://stackoverflow.com/questions/6404730/meaning-of-2-sign-in-scala-language)。

是的，`t:(Double, Double) => t._1 * t._2`是一个匿名函数（实际上不是方法）。[Scala中方法和函数的区别](https://stackoverflow.com/questions/2529184/difference-between-method-and-function-in-scala)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T12:03:29.863

大括号表示具有类型的匿名函数`Tuple2[Double,Double] => Double`。该参数被赋予本地名称`t`，因此`t`是两个双精度的元组。`t._1`指第一项和`t._2`第二项。

因此`map`产生两个向量分量的元素乘积列表，并将`reduceLeft`这些乘积求和以计算点积。

# javascript - 如何使用jquery在html表中查找元素的id

> ID：10430622
> 
> 赞同：0
> 
> 时间：2012-05-03T11:40:39.157
> 
> 标签：javascript, jquery, asp.net

单击另一个图像按钮（在表格单元格 2 中）时，我需要找到图像按钮的 ID（在表格单元格 1 中）。

我无法在我的 javascript/jquery 中对任何索引进行硬编码。

有没有其他方法可以获取表格特定行中​​第二个按钮的 id？

请帮忙

代码示例

```
<tr class="home-history-grid-row">
    <td>
        <img id="test" height="16px" width="16px" onclick="changeImage(this)" src="SiteImages/deleteconfirm.png" title="Confirm Delete" alt="Delete">
    </td>
    <td>
        <input id="ctl00_Content_NotificationHistory_ctl02_ImgDelete" type="image" style="height: 16px; width: 16px; border-width: 0px;" src="SiteImages/X.gif" clientidmode="Static" disabled="disabled" name="ctl00$Content$NotificationHistory$ctl02$ImgDelete">
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:45:46.257

```
function changeImage(me){
  alert(me.id)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:49:53.197

如果我理解正确，您需要通过单击图像找到输入的 id？如果是这样，那么这将为您做到：

```
function changeImage(self) {
    $(self).closest('tr').find('td input').attr('id');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:56:28.383

以下代码必须解决您的问题：

```
function changeImage(elm) {
    var otherImageId = $(elm).parent().next().find("input:first").attr("id");

    // ... use otherImageId here ...
} 
```

# android - Android .apk 上传到市场

> ID：10430623
> 
> 赞同：-6
> 
> 时间：2012-05-03T11:40:40.793
> 
> 标签：android

1.安卓应用程序上载市场的流程是什么？2.我们可以用一个市场帐户上传多个apk吗？3.市场账户的有效期是多久？4\. 这还需要什么设置？

请帮我解决这个问题。

谢谢瓦基蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:43:23.390

1\. 您必须创建一个开发者帐户

2\. 打开开发者控制台并上传你的apk

3\. 是的，您可以使用一个帐户上传不同的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:42:43.713

阅读此页面：[https ://developer.android.com/guide/publishing/publishing.html](https://developer.android.com/guide/publishing/publishing.html)

它会告诉你你需要知道的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:42:50.497

我认为您可以在此页面上找到的每个答案：http: [//developer.android.com/guide/publishing/publishing.html](http://developer.android.com/guide/publishing/publishing.html)

# c - 在运行时替换动态共享库

> ID：10430624
> 
> 赞同：14
> 
> 时间：2012-05-03T11:40:43.600
> 
> 标签：c, linux, shared-libraries

我需要在程序的执行周期中使用不同的动态库。看着`dlfcn.h`我认为这是可能的。我承认没有阅读太多关于动态库加载的文献。

好的，这就是我所做的 -

*   我创建了名为“libdynamicTest.so.1”的共享库
*   主APP打开这个solib（**dlopen**），获取函数指针（**dlsym**），运行它然后关闭它（**dlclose**）

一切都很好，直到这里。

*   现在假设我用另一个 libdynamicTest.so.1（一些代码差异）替换我的 libdynamicTest.so.1，我看到了分段错误。此外，我确保在**dlclose**之后和**dlopen**之前替换了 solib 。

有人可以解释为什么会出现这种分段错误吗？

我注意到即使我删除 libdynamicTest.so.1 程序仍然执行，安静奇怪。

```
 SysTrace(("opening dynamic library"));
    handle = dlopen("libdynamicTest.so.1",RTLD_LAZY);
    fn     = dlsym (handle,"dylib_print_msg");
    SysTrace(("Using dynamic library"));
    if(!fn)
    {
        printf("unknown dylib_print_msg..!!\n");
    }
    else
    {
        (*fn)();
    }
    ret = dlclose(handle);
    SysTrace(("closed dynamic library status = [%s]", (ret==0?"OK":"NOK"))); 
```

PS 我不是试图修改任何现有程序的行为，也不是构成任何威胁。我正在做一个可行性检查，以将集成测试作为共享库运行。

* * *

编辑

我尝试使用 gdb，以下是堆栈跟踪，当故障发生时。

```
Program received signal SIGSEGV, Segmentation fault.
0x0000003e92408b7b in check_match.8509 () from /lib64/ld-linux-x86-64.so.2
#0  0x0000003e92408b7b in check_match.8509 ()
   from /lib64/ld-linux-x86-64.so.2
#1  0x0000003e92409024 in do_lookup_x () from /lib64/ld-linux-x86-64.so.2
#2  0x0000003e92409222 in _dl_lookup_symbol_x ()
   from /lib64/ld-linux-x86-64.so.2
#3  0x0000003e92908f14 in do_sym () from /lib64/libc.so.6
#4  0x0000003e93001104 in dlsym_doit () from /lib64/libdl.so.2
#5  0x0000003e9240ced6 in _dl_catch_error ()
   from /lib64/ld-linux-x86-64.so.2
#6  0x0000003e9300150d in _dlerror_run () from /lib64/libdl.so.2
#7  0x0000003e930010ba in dlsym () from /lib64/libdl.so.2 
```

* * *

编辑

在 svn checkout 共享的代码库`http://subversion.assembla.com/svn/dynamic_libso`

* * *

编辑：- 添加日志 LD_DEBUG=all

```
32564:     binding file ./test_agent [0] to /lib64/libc.so.6 [0]: normal symbol `__libc_start_main' [GLIBC_2.2.5]
     32564:
     32564:     initialize program: ./test_agent
     32564:
     32564:
     32564:     transferring control: ./test_agent
     32564:
     32564:     symbol=printf;  lookup in file=./test_agent [0]
     32564:     symbol=printf;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     symbol=printf;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     symbol=printf;  lookup in file=/lib64/libc.so.6 [0]
     32564:     binding file ./test_agent [0] to /lib64/libc.so.6 [0]: normal symbol `printf' [GLIBC_2.2.5]
     32564:     symbol=putchar;  lookup in file=./test_agent [0]
     32564:     symbol=putchar;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     symbol=putchar;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     symbol=putchar;  lookup in file=/lib64/libc.so.6 [0]
     32564:     binding file ./test_agent [0] to /lib64/libc.so.6 [0]: normal symbol `putchar' [GLIBC_2.2.5]
-hello.c main():20 Msg : hello world ..!!
-hello.c main():24 Msg : opening dynamic library
     32564:     symbol=dlopen;  lookup in file=./test_agent [0]
     32564:     symbol=dlopen;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     binding file ./test_agent [0] to /lib64/libdl.so.2 [0]: normal symbol `dlopen' [GLIBC_2.2.5]
     32564:     opening file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]; direct_opencount=1
     32564:
     32564:     symbol=dlerror;  lookup in file=./test_agent [0]
     32564:     symbol=dlerror;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     binding file ./test_agent [0] to /lib64/libdl.so.2 [0]: normal symbol `dlerror' [GLIBC_2.2.5]
-hello.c main():26 Msg : Opened dynamic library handle = [a16d9000]
     32564:     symbol=dlsym;  lookup in file=./test_agent [0]
     32564:     symbol=dlsym;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     binding file ./test_agent [0] to /lib64/libdl.so.2 [0]: normal symbol `dlsym' [GLIBC_2.2.5]
     32564:     symbol=_dl_sym;  lookup in file=./test_agent [0]
     32564:     symbol=_dl_sym;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     symbol=_dl_sym;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     symbol=_dl_sym;  lookup in file=/lib64/libc.so.6 [0]
     32564:     binding file /lib64/libdl.so.2 [0] to /lib64/libc.so.6 [0]: normal symbol `_dl_sym' [GLIBC_PRIVATE]
     32564:     symbol=solib_print_msg;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     binding file /user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0] to /user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]: normal symbol `solib_print_msg'
-hello.c main():28 Msg : Using dynamic library
     32564:     symbol=printf;  lookup in file=./test_agent [0]
     32564:     symbol=printf;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     symbol=printf;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     symbol=printf;  lookup in file=/lib64/libc.so.6 [0]
     32564:     binding file /user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0] to /lib64/libc.so.6 [0]: normal symbol `printf' [GLIBC_2.2.5]
     32564:     symbol=putchar;  lookup in file=./test_agent [0]
     32564:     symbol=putchar;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     symbol=putchar;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     symbol=putchar;  lookup in file=/lib64/libc.so.6 [0]
     32564:     binding file /user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0] to /lib64/libc.so.6 [0]: normal symbol `putchar' [GLIBC_2.2.5]
-dynamic.c solib_print_msg():9 Msg : nice nice..!!
     32564:     symbol=dlclose;  lookup in file=./test_agent [0]
     32564:     symbol=dlclose;  lookup in file=/lib64/libdl.so.2 [0]
     32564:     binding file ./test_agent [0] to /lib64/libdl.so.2 [0]: normal symbol `dlclose' [GLIBC_2.2.5]
     32564:
     32564:     closing file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1; direct_opencount=0
-hello.c main():40 Msg : closed dynamic library status = [OK]
-hello.c main():24 Msg : opening dynamic library
     32564:     opening file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]; direct_opencount=1
     32564:
-hello.c main():26 Msg : Opened dynamic library handle = [0]
     32564:     symbol=solib_print_msg;  lookup in file=/user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]
     32564:     binding file /user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0] to /user/skm/coding/fTest/approach/dynamic_library/gravity/contribs/libs/libdynamicTest.so.1 [0]: normal symbol `solib_print_msg'
-hello.c main():28 Msg : Using dynamic library
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T15:09:05.333

来自“人 dlclose”：

```
The function dlclose() decrements the reference count on the dynamic
library handle handle.  If the reference count drops to zero and
no other loaded libraries use symbols in it, then the dynamic library
is unloaded. 
```

我猜你正在与**“没有其他加载的库在其中使用符号”**部分发生冲突。

要进行调试，请使用 运行您的程序`LD_DEBUG=bindings`，并查找以下消息：

```
binding file <some.so> [0] to libdynamicTest.so.1 [0]: normal symbol `<symbol>' 
```

更新：

你有几个错误：

1.  您正在`test_agent`直接`libdynamic.so.1` **链接**：
    `cc -o test_agent -L. ...-ldl build/test_agent/hello.o libdynamic.so.1`

    一旦你完成了这个，你就不能再期望这个库被*卸载了*。

2.  通过做这个：

    `*((int *)handle) = 0;`

    您实际上正在破坏动态加载器的状态，*这*会导致后续`dlsym`给您提供虚假地址，这会导致您`SIGSEGV`尝试使用它。

一旦你解决了问题 #2，你的程序将不再崩溃，尽管它仍然不会卸载库。要*真正*让库卸载，您还需要修复问题 #1。

如果您先修复问题 #1，那么问题 #2 将不再破坏动态加载程序。相反，它会损坏堆，您可以使用 Valgrind 轻松观察到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T15:05:54.017

根据`man 8 ld.so`：

```
BUGS
       Currently ld.so has no means of unloading and searching for com‐
       patible or newer version of libraries. 
```

我不是 100% 确定这是相关的，但听起来可能是相关的。

# php - Opencart，去除邮资和包装上的大桶

> ID：10430627
> 
> 赞同：0
> 
> 时间：2012-05-03T11:40:52.787
> 
> 标签：php, opencart

想知道是否有人可以提供帮助。

我知道这可能更像是一个 opencart 配置问题，所以如果我在错误的区域发帖，我深表歉意 - 但我想知道这是否是我需要编写的代码。

我的客户希望我的邮资和包装成本不包括在小计中（例如，不征收增值税）并在之后添加 - 因为显然邮资和包装在英国不征税。

有人对我如何实现这一点有任何指示吗？我在 opencart 本身看不到任何选项来满足这一点。

感谢寻找

维修保养

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T16:39:03.597

你的客户错了，P&P 在英国是完全可以增值税的……除非你卖的是 0% 增值税的商品，比如书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:12:13.200

邮资选项应具有税级设置。只需将其设置为无

# c# - 使用 LINQ 时“输入字符串的格式不正确”

> ID：10430637
> 
> 赞同：5
> 
> 时间：2012-05-03T11:41:37.283
> 
> 标签：c#, linq, type-conversion

我正在尝试对`FirstOrDefault()`对象集进行查询，并引发了一个奇怪的异常：

**我的代码：**

```
private RecordObject GetRecordByID(int recID)
{
    return _objectSet.FirstOrDefault(rec => rec.ID == recID);
} 
```

**异常消息：**

> 输入字符串的格式不正确

`InnerException`一片空白。

**堆栈跟踪：**

```
at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer&         number, NumberFormatInfo info, Boolean parseDecimal)
at System.Number.ParseDecimal(String value, NumberStyles options, NumberFormatInfo numfmt)
at System.Convert.ToDecimal(String value, IFormatProvider provider)
at System.String.System.IConvertible.ToDecimal(IFormatProvider provider)
at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
at Oracle.DataAccess.Client.OracleDataReader.ChangeType(Object sourceValue, Type targetType)
at Oracle.DataAccess.Client.OracleDataReader.GetValue(Int32 i)
at System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
at System.Data.Common.Internal.Materialization.Shaper.GetPropertyValueWithErrorHandling[TProperty](Int32 ordinal, String propertyName, String typeName)
at lambda_method(Closure , Shaper )
at System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly[TEntity](Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet)
at lambda_method(Closure , Shaper )
at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext()
at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
at System.Linq.SystemCore_EnumerableDebugView`1.get_Items() 
```

奇怪的是我没有进行任何类型转换。

**PS：**数据库是Oracle 10g，但由于我使用的是EF，我想这并不重要，但以防万一你需要这个细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:58:41.080

好的，我已经解决了这个问题，如果有人遇到同样的问题，我会保留这个问题。

为了解决这个问题，我需要从数据库中重新导入我的表，显然，我的 ADO.Net 对象和数据库之间存在一些不兼容的列。

我认为，EF 试图进行 Cast 操作来弥补我的错误（留下不兼容的版本），并且 cast 是不可能的，这就是类型转换的来源。

谢谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:48:16.690

检查您是否没有将 int 与数据库 (ID) 中的空列进行比较。

PS传递的recId不为空，但它所检查的值在数据库表中可能为空

# asp.net - 在水平菜单中显示当前用户的名字

> ID：10430638
> 
> 赞同：0
> 
> 时间：2012-05-03T11:41:46.677
> 
> 标签：asp.net, membership

我使用的是`Asp.Net`内置的`membership framework`，我有一个需要显示`logged-in`用户名的要求，我的`aspnet_users`表存储了类似这样的用户名，`abc001`这实际上是用户的用户代码，它的用户名存储在另一个表中用 .链接到`aspnet_users`表`foreign key constraint`。那么如何在我的导航菜单中显示该表中的用户名，该菜单将向右浮动。很像`Facebook`，它`logged-in`在标题中显示用户名。 **编辑：**

```
protected void cmdLogin_Click(object sender, EventArgs e)
        {
            if (Membership.ValidateUser(txtUsername.Text, txtPassword.Text))
            {
                HttpCookie authCookie = FormsAuthentication.GetAuthCookie(txtUsername.Text, false);
                FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
                FormsAuthenticationTicket newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration, ticket.IsPersistent, "");
                authCookie.Value = FormsAuthentication.Encrypt(newTicket);
                Response.Cookies.Add(authCookie);
                GetUserName(); 
                string redirUrl = FormsAuthentication.GetRedirectUrl(txtUsername.Text, false);
                Response.Redirect(redirUrl);

            }

        }
        public void GetUserName()
        {
            DataClasses1DataContext dt = new DataClasses1DataContext();
            var name =( from nm in dt.Users_AdditionalInfos
                        where nm.UserCode== txtUsername.Text.Trim() 
                        select nm).Single();
           Global.UserName=name.FirstName +" "+ name.LastName; 
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:45:31.260

您可以使用，

```
Membership.GetUser().UserName 
```

...获取当前**登录的**用户。如果用户没有登录，你会得到一个*null*返回的值`GetUser()`，所以相应地编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:53:35.340

尝试`User.Identity.Name`

查看更多关于 [HttpContext.User 属性](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

如果您需要从另一个表中获取不同的信息，您可以获取`username`并执行类似的操作

```
MembershipUser userInfo = Membership.GetUser("myUserName");    
Guid guid = new Guid(userInfo.ProviderUserKey.ToString()); 
```

`ProviderUserKey`对于每个用户来说都是唯一的，我猜你使用它作为外键。既然你有`ProviderUserKey`你可以从你的另一个表中获取必要的详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T09:09:33.273

`User.Identity.Name` 可用于访问用户的用户名。查看本教程，因为它进一步解释了如何获取用户的会员信息。[http://mvctutorialsandguides.blogspot.co.nz/2013/03/mvc-c-sql-membership-provider-how-to.html](http://mvctutorialsandguides.blogspot.co.nz/2013/03/mvc-c-sql-membership-provider-how-to.html) 希望这会有所帮助。

# ios - 带有标签栏和导航控制器的 iOS 应用

> ID：10430642
> 
> 赞同：3
> 
> 时间：2012-05-03T11:42:06.017
> 
> 标签：ios, navigation, tabbar

在创建我的第一个 iPhone 应用程序的过程中，我注意到来自 Apple 的示例要么有标签栏，要么有导航栏，但从来没有两者兼有。

是否有可能做到这一点？

所以我这里有一个带有 3 个按钮的标签栏，我现在如何将导航控制器添加到我的整个应用程序中？

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

UIViewController *activityViewController = [[[ActivityViewController alloc] initWithNibName:@"ActivityViewController" bundle:nil] autorelease];
UIViewController *agendaViewController = [[[AgendaViewController alloc] initWithNibName:@"AgendaViewController" bundle:nil] autorelease];
UIViewController *settingsViewController = [[[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil] autorelease];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:activityViewController, agendaViewController, settingsViewController, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

编辑：

我真的没有关注，所以在我的 appdelegate 中我创建了一个 navigationController 并将其用作 rootViewController。

然后我创建了一个 tabBarController 并将其添加到我的窗口中

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

UINavigationController *mainViewController = [[UINavigationController alloc] init];
self.mainViewController = [[UINavigationController alloc] initWithRootViewController:mainViewController];
self.window.rootViewController = self.mainViewController;
[self.window makeKeyAndVisible];

self.window.rootViewController.title = @"test";

MainViewController *tabBarController = [[MainViewController alloc] init];
[self.window addSubview:tabBarController.view]; 
```

但是每当我运行时，我都会收到错误”

> 不支持推送导航控制器

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:54:11.720

嘿，这在概念上很容易：

您的 rootViewController 必须是您的 navigationController，因为它来回推动您的视图。

```
YourRootController *cont = [[YourRootController alloc] init];

UINavigationController *navi = [[UINavigationController alloc] initWithRootViewController:cont]; 
```

`YourViewController`的子类在哪里`UITabBarController`

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:49:05.227

您可以创建一个导航控制器，然后创建一个 tabBarController 并将您的导航控制器添加到它使用

```
 //incase you have 2 navigation controllers
 tabBarController.viewControllers=[NSArray arrayWithObjects:navigationController1, navigationController2, nil ]; 
```

# plsql - 过程错误 ORA-00918: 列定义不明确

> ID：10430644
> 
> 赞同：0
> 
> 时间：2012-05-03T11:42:25.250
> 
> 标签：plsql, oracle10g, ora-00918

嘿，任何人都可以帮助解决这个错误：

`9/10 PLS-00428: an INTO clause is expected in this SELECT statement`

尝试基于单个参数打印详细信息时会出现此问题。这是我一直在使用的代码

```
 CREATE OR REPLACE PROCEDURE PRINT_ACTOR_QUOTES (ID_actor CHAR)
 AS
 first_name CHAR(30);
 last_name CHAR(30);
 title CHAR(40);
 year NUMBER;
 role CHAR(40);
quote CHAR(255);
CURSOR print_cursor IS
SELECT a.actorID, a.firstname, a.lastname, m.title as title, m.year as year ,  
 r.rolename as role1 , q.quotechar as quote1 FROM movie m, role r, quote q, rolequote  
rq, actor a WHERE
a.actorID = r.actorID AND
m.movieID = r.movieID AND
rq.quoteID = q.quoteID AND
rq.roleID = r.roleID;
BEGIN  
FOR row IN print_cursor LOOP
SELECT AQ.QUOTES, A.FIRSTNAME, A.LASTNAME 
FROM ACTOR_QUOTES AQ, ACTOR A
Where row.actorID = ID_actor;
END LOOP; 
END PRINT_ACTOR_QUOTES ;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:35:58.523

我假设相关的错误是

> PLS-00428：此 SELECT 语句中应有一个 INTO 子句

（而不是您在问题标题中提到的那个）。

问题是您的 FOR 循环中的 SELECT 语句。在 PL/SQL 中，您不能只选择数据而不对其进行任何操作。因此，您需要一条 INTO 语句将检索到的数据存储在 PL/SQL 变量中：

```
SELECT AQ.QUOTES, A.FIRSTNAME, A.LASTNAME
  INTO quote, first_name, last_name
FROM ACTOR_QUOTES AQ, ACTOR A
Where row.actorID = ID_actor; 
```

然后我可以发现几个额外的问题：

*   SELECT 语句似乎是一个完全外部联接，这很少是您想要的。
*   如果返回多行，带有 INTO 子句的 SELECT 语句将失败。
*   What's the purpose of the FOR loop if you overwrite the local variables on each iteration and don't do anything with them.

# postgresql - 如何让 pg_dump 正确进行身份验证

> ID：10430645
> 
> 赞同：115
> 
> 时间：2012-05-03T11:42:28.897
> 
> 标签：postgresql, pg-dump

我尝试过使用主机变量`PGPASSWORD`，`.pgpass`但这两者都不允许我对数据库进行身份验证。我已经`chmod`获得`.pgpass`了适当的权限，并且还尝试了：

```
export PGPASSWORD=mypass and PGPASSWORD=mypass 
```

密码确实包含 a`\`但是我将它用单引号括起来`PGPASS='mypass\'`，它仍然不会进行身份验证。

我在跑：

```
pg_dump dbname -U username -Fc 
```

我仍然收到

```
pg_dump: [archiver (db)] connection to database "dbname" failed: FATAL:  Peer authentication failed for user "username" 
```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-05-03T19:34:17.070

**快速解决方案**

问题是它试图[`peer`](http://www.postgresql.org/docs/9.1/static/auth-methods.html#AUTH-PEER)根据您当前的用户名执行本地身份验证。如果您想使用密码，您必须使用 指定主机名`-h`。

```
pg_dump dbname -U username -h localhost -F c 
```

**解释**

这是由于您的以下内容[`pg_hba.conf`](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)

```
local   all             all                                     peer
host    all             all             127.0.0.1/32            md5 
```

这告诉 Postgres`peer`对本地用户使用身份验证，这需要 postgres 用户名与您当前的系统用户名匹配。第二行是指使用主机名的连接，并允许您通过该[`md5`](http://www.postgresql.org/docs/9.1/static/auth-methods.html#AUTH-PASSWORD)方法使用密码进行身份验证。

**我的首选开发配置**

**注意**：这应该只用于单用户工作站。这可能会导致生产或多用户机器上的重大安全漏洞。

在针对本地 postgres 实例进行开发时，我喜欢将本地身份验证方法更改为[`trust`](http://www.postgresql.org/docs/9.1/static/auth-methods.html#AUTH-TRUST). 这将允许以任何没有密码的用户身份通过​​本地 unix 套接字连接到 postgres。只需将`peer`上面的内容更改为`trust`并重新加载 postgres 即可完成。

```
# Don't require a password for local connections
local   all             all                                     trust 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-03-28T18:31:57.137

有时你可以使用

```
sudo -u postgres pg_dump ... 
```

# android - 具有多条线的 AChartGraph

> ID：10430649
> 
> 赞同：0
> 
> 时间：2012-05-03T11:42:41.503
> 
> 标签：android, achartengine, linechart

我想从表中获取一些值并将它们存储在多折线图中。当我只使用一列（胖）时，它会正确显示图表，但是当我添加另一列或两列时，它会给我一个错误提示：数据集和渲染器不应为空，并且不应具有相同数量的系列。你能帮我解决错误吗？

```
 public XYMultipleSeriesDataset getFatDataset() {

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    Cursor c = database.rawQuery("select * from dailystats;", null);
    float i = 1.0f;

    c.moveToFirst();
    XYSeries seriesFat = new XYSeries("Fat");
    while(!c.isAfterLast()) {
        seriesFat.add(i++, c.getDouble(2));

        c.moveToNext();
    }
    dataset.addSeries(seriesFat);

   i = 1.0f;
    c.moveToFirst();
    XYSeries seriesProtein = new XYSeries("Protein");
    while(!c.isAfterLast()) {

        seriesProtein.add(i++, c.getDouble(3));

        c.moveToNext();
    }
    dataset.addSeries(seriesProtein);

    c.moveToFirst();
    i = 1.0f;
    XYSeries seriesCarbs = new XYSeries("Carbs");
    while(!c.isAfterLast()) {

        seriesCarbs.add(i++, c.getDouble(4));
        c.moveToNext();
    }
    dataset.addSeries(seriesCarbs);

    return dataset;
} 
```

这是生成图表的代码：

```
public class ChartActivity {

public Intent getIntent(Context context) 
```

{

```
XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();
XYSeriesRenderer renderer = new XYSeriesRenderer();
mrenderer.addSeriesRenderer(renderer);

DatabaseAdapter dba = new DatabaseAdapter(context);
dba.open();

Intent intent = ChartFactory.getLineChartIntent(context, dba.getFatDataset(), mrenderer,"line graph");
dba.close();

return intent; 
```

}

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:00:02.210

报告的错误非常清楚：`Dataset and renderer should not be null and should not have the same number of series`意味着您使用了不同数量的系列和系列渲染器。事实上，您正在添加**两个**数据集：

```
//...
dataset.addSeries(seriesFat);
//....
dataset.addSeries(seriesCarbs);
//.... 
```

但你只有**一个** `XYSeriesRenderer()`：

```
mrenderer.addSeriesRenderer(renderer); 
```

在我看来，您的代码应该开始工作，只需将另一个渲染器添加到`XYMultipleSeriesRenderer()`，请尝试以下两行：

```
XYSeriesRenderer renderer2 = new XYSeriesRenderer();
mrenderer.addSeriesRenderer(renderer2); 
```

# c++ - nm 符号值的偏移量？

> ID：10430655
> 
> 赞同：7
> 
> 时间：2012-05-03T11:43:05.780
> 
> 标签：c++, macos, unix, linker, nm

只是为了给您一些上下文，这就是我想要实现的目标：我将 const char* 嵌入到共享对象文件中，以便在 .so 文件本身中有一个版本字符串。我正在做数据分析，这个字符串让我可以让数据知道是哪个版本的软件产生的。这一切都很好。

我遇到的问题是当我尝试直接从 .so 库中读取字符串时。我试着用

```
nm libSMPselection.so | grep _version_info 
```

并得到

```
000000000003d968 D __SMPselection_version_info 
```

这一切都很好，正如预期的那样（char* 被称为 _SMPselection_version_info）。但是我希望现在能够打开文件，寻找 0x3d968 并开始读取我的字符串，但我得到的只是垃圾。

当我打开 .so 文件并简单地搜索字符串的内容（我知道它是如何开始的）时，我可以在地址 0x2e0b4 找到它。在这个地址它在那里，零终止并且如预期的那样。（我现在正在使用这种方法。）

我不是计算机科学家。有人可以向我解释为什么 nm 显示的符号值不正确，或者不同的是，如果它不是符号的地址，符号值是什么？

（顺便说一句，我正在使用 OSX 10.7 的 Mac 上工作）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T12:26:26.973

假设它是 ELF 或类似结构的二进制文件，您必须考虑加载内容的地址，该地址受 ELF 标头中内容的影响。

在您的二进制文件上使用`objdump -Fd`，您可以让反汇编程序还显示符号的确切文件偏移量。

使用`objdump -x`你可以找到这个加载器地址，对于标准的 linux 可执行文件，通常是 0x400000。

接下来需要注意的是查看它是否是间接字符串，这可以通过使用`objdump -g`. 当字符串被发现为间接字符串时，在你输出的位置，`objdump -Fd`你不会找到字符串，而是地址。从中您需要再次减去加载程序地址。让我向您展示我的一个二进制文件的示例：

```
objdump -Fd BIN | grep VersionString
  45152f:       48 8b 1d 9a df 87 00    mov    0x87df9a(%rip),%rbx        # ccf4d0 <acVersionString> (File Offset: 0x8cf4d0)

objdump -x BIN
...
LOAD off    0x0000000000000000 vaddr 0x0000000000400000 paddr 0x0000000000400000 align 2**12
... 
```

于是我们查看文件中的0x8cf4d0，在hexeditor中找到：

```
008C:F4D0 D8 C1 89 00  00 00 00 00  01 00 00 00  FF FF FF FF 
```

所以我们在那里取 0x89C1D8，减去 0x400000 并得到 0x49c1d8，当我们在 hexeditor 中查看时，我们发现：

```
0049:C1D0 FF FF 7F 7F  FF FF 7F FF  74 72 75 6E  6B 5F 38 30
0049:C1E0 34 33 00 00  00 00 00 00  00 00 00 00  00 00 00 00 
```

这意味着“trunk_8043”。

YMMV，特别是当它是其他一些文件格式时，但这是这些东西如何构造的一般方式，有很多缺陷和细节会因特殊情况而异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:07:38.333

没有人建议最简单的方法：做一个动态加载你的库的二进制文件（在命令行上给它命名）并为你的符号执行 dlsym() （或者它也可以在命令行上得到它）将它转换为字符串指针和将其打印到标准输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:30:16.720

为什么您希望显示`nm`的偏移量是`.so`文件中的偏移量？ `.so`文件不仅仅是内存图像；它们还包含许多其他信息，并且具有或多或少复杂的格式。在 Unix 下（至少在大多数 Unices 下），共享对象使用 elf 格式。要查找信息，您必须解释文件中的各个字段，以查找所需符号的位置、段以及该段在文件中的开始位置。（您可能会找到一个可以简化阅读它们的库。）

此外，如果您说您嵌入了 a 是正确的`char const*`，即您的代码包含以下内容：

```
char const* version = "..."; 
```

那么地址或偏移量`version`就是指针的地址或偏移量，而不是它所指向的字符串数据。将其定义为：

```
char const version[] = "..."; 
```

将解决这个问题。

最后，最简单的解决方案可能是确保字符串具有一些高度可识别的模式，然后线性扫描整个文件以查找该模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:59:56.617

在 Linux 上，您有“字符串”命令，可以帮助您从二进制文件中提取字符串。

[http://linux.about.com/library/cmd/blcmdl1_strings.htm](http://linux.about.com/library/cmd/blcmdl1_strings.htm)

在 HPUX 中（我认为在其他 Unix 风格中也是如此）有一个类似的命令称为“what”。它只提取以“@(#)”开头的字符串，但如果您控制字符串的内容，这不是问题。

# android - 安卓用户界面设计

> ID：10430656
> 
> 赞同：0
> 
> 时间：2012-05-03T11:43:07.423
> 
> 标签：android, android-layout, user-interface

为什么 LinearLayout 不会在不同的屏幕上重新调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:49:29.037

这取决于你如何使用它！

[如果您希望您的布局](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_weight)自动调整大小，您可以为组成您的`LinearLayout`.

例如：

```
<LinearLayout
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:weightSum="1"
   android:orientation="horizontal"
>
   <SomeView
      android:layout_width="0dip"
      android:layout_height="wrap_content"
      android:layout_weight="0.5"
    />

   <SomeView
      android:layout_width="0dip"
      android:layout_height="wrap_content"
      android:layout_weight="0.5"
    />
</LinearLayout> 
```

在这种情况下，您的两个子视图将共享整个水平空间，并且每个子视图将占用 50% 的空间。

# jquery - jQuery Cycle Plugin动态功能

> ID：10430666
> 
> 赞同：2
> 
> 时间：2012-05-03T11:43:35.977
> 
> 标签：jquery, jquery-plugins, jquery-cycle

试图使这个函数动态而不是静态。

这是有效的原始代码

```
$('#goto1').click(function(e) {
    e.preventDefault();
    $('#slider').cycle(1);
}); 
```

这是动态功能（不起作用）。警报输出正确的 id 但滑块不循环。

```
$('.cycle_goto').live('click', function(e) {
    e.preventDefault();
    var cycle_id = $(this).attr('id').substr(4);
    alert ('##'+cycle_id+'##');
    $('#slider').cycle(cycle_id);
}); 
```

HTML如下：

```
<div id="slider">
    <img class="slide" src="<?=FE_URL;?>images/slide1.jpg" style="position: relative !important;" alt="Slide 1.">
    <img class="slide" src="<?=FE_URL;?>images/slide2.jpg" alt="Slide 2">
    <img class="slide" src="<?=FE_URL;?>images/slide3.jpg" alt="Slide 3">
</div>
<div class="slider_nav">
    <ul id="slider_nav_ul">
        <li><a class="cycle_goto" id="goto1" href="#">Hotel &amp; Residence<span class="arrow"><!--  --></span></a></li>
        <li><a class="cycle_goto" id="goto2" href="#">Yacht Charter<span class="arrow"><!--  --></span></a></li>
        <li><a class="cycle_goto" id="goto3" href="#">Properties<span class="arrow"><!--  --></span></a></li>
    </ul>
</div> 
```

**编辑**

通过使用以下代码将元素 id 转换为整数来使其工作：

```
$('.cycle_goto').live('click', function(e) {
    e.preventDefault();
    var myString = $(this).attr('id').substr(4);
    var myInteger;
    myInteger = parseInt(myString);
    var cycle_id = myInteger;
    $('#slider').cycle(cycle_id);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:02:45.820

您使用`$('#slider').cycle(1);`的逻辑上是无效的。

语法是`$('#slideshow').cycle('command');` ，因此您不能选择转到某个元素。

**编辑：**

您可以通过更改 API 中的选项来选择转到一个元素或选择一组元素：

> slideExpr: null, // 选择幻灯片的表达式（如果需要除所有子项之外的其他内容）

例如：`$('#slider').cycle({ slideExpr: $('#slider .child') });`

# android - 单击android中的按钮时如何在后台关闭我的应用程序

> ID：10430671
> 
> 赞同：3
> 
> 时间：2012-05-03T11:44:08.843
> 
> 标签：android

我在单击按钮时显示一条消息（“请验证电子邮件。”）。当用户单击按钮时，浏览器将打开，我想将我的应用程序重定向到后台的第一个活动。

当用户重新使用它时，我希望我的应用程序返回到他的第一个状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:26:03.230

当用户单击按钮关闭对话框时，然后从调用活动创建一个 Intent 并使用`startActivityForResult()`.

在同一活动中，实施`onActivityResult()`. 在那里，创建一个 Intent 并使用`startActivity()`.

有关更多信息，请参阅有关[活动](http://developer.android.com/guide/topics/fundamentals/activities.html)和[意图](http://developer.android.com/guide/topics/intents/intents-filters.html)的 Android 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:50:18.090

只需调用finish(); 每当您想完成活动时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:49:28.210

您可以在启动意图时设置一个标志，并在 onResume 中对其进行测试

当它是真的时，自己完成它并开始第一个acrivity。购买方式，设置第一个activity的launchMode为singleTop

# django - Django 跟踪用户所做的数据更改

> ID：10430678
> 
> 赞同：0
> 
> 时间：2012-05-03T11:44:35.920
> 
> 标签：django, audit

我如何跟踪 django 用户所做的数据更改并将它们保存在带有 user_ID 的审计表中？有什么应用程序可以做到这一点吗？我正在使用 postgres，现在我正在使用这个工具进行审计：http: [//dklab.ru/lib/dklab_rowlog/](http://dklab.ru/lib/dklab_rowlog/)但在这种情况下，我无法将 USER_ID 传递给触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:49:02.377

看[`django-audit-log`](https://github.com/Atomidata/django-audit-log)

# java - 使用 java 以编程方式突出显示 MS Word 中的文本

> ID：10430680
> 
> 赞同：2
> 
> 时间：2012-05-03T11:44:49.720
> 
> 标签：java, .net, ms-word, highlighting

有人可以告诉我是否可以在 word 文档（基本上是 DOCX）中突出显示某些单词（由页码和行号提供）？我的主要选择是使用Java。如果有针对此问题的任何 .Net 解决方案，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:50:51.267

我没有在 java 中找到，但在 .NET 中

```
object missObj = Missing.Value;
            object path = @"D:\mydoc.docx";
            Microsoft.Office.Interop.Word.Application app = new Microsoft.Office.Interop.Word.Application();
            Microsoft.Office.Interop.Word.Document doc = app.Documents.Open(ref path, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj, ref missObj);
            foreach (Microsoft.Office.Interop.Word.Range range in doc.Words)
            {
                if (range.Text.Trim() == "the text")
                {
                    range.HighlightColorIndex = Microsoft.Office.Interop.Word.WdColorIndex.wdDarkYellow;
                    range.Font.ColorIndex = Microsoft.Office.Interop.Word.WdColorIndex.wdWhite;
                }
            } 
```

来源：[http ://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/9fba8427-8b3c-44f2-b19f-92eb5108693b/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/9fba8427-8b3c-44f2-b19f-92eb5108693b/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:53:56.573

是的，这在 Java 中是可能的，但是您可能需要通过第三个库来实现它，Apache POI 是一个不错的选择，它是 Microsoft 文档的 Java API，提供了用于操作 DOC 或 DOCX fromat 文件的几乎所有功能和特性。

[http://poi.apache.org/](http://poi.apache.org/)

您的意思是“突出显示”是段落背景颜色和突出显示文本颜色？或者是其他东西？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:04:43.403

是的，通过使用 Apache POI，您可以阅读 Microsoft Word 文档并可以对该文档进行操作，例如突出显示文本等。

# php - 在buddypress中更改管理栏的内容

> ID：10430685
> 
> 赞同：0
> 
> 时间：2012-05-03T11:45:08.653
> 
> 标签：php, wordpress

我需要更改 buddypress 默认模板中管理栏的内容。它具有“我的帐户”、“仪表板”、“通知”等选项。首先，我想删除仪表板选项。接下来，我想在“我的帐户”选项中为不同的用户类型显示不同的选项。例如，我有两种用户类型——学生和教师。现在，我希望在“我的帐户”部分中为学生而非教师显示“朋友”选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:10:04.823

要删除仪表板，请尝试将其添加到您的 functions.php 或 bp-custom.php：

```
remove_action( 'bp_adminbar_menus', 'bp_adminbar_thisblog_menu', 6); 
```

您应该能够使用它来有条件地删除/添加菜单。这里有一篇相关文章：http: [//codex.buddypress.org/theme-development/modifying-the-buddypress-admin-bar/](http://codex.buddypress.org/theme-development/modifying-the-buddypress-admin-bar/)

# visual-studio-2010 - 可视源保存配置

> ID：10430688
> 
> 赞同：0
> 
> 时间：2012-05-03T11:45:17.380
> 
> 标签：visual-studio-2010, visual-sourcesafe, vssettings

我正在使用 VSS 版本 8.0.5。我已经在服务器上安装了它。我在其中添加了 Visual Studio 2010 项目。

现在在我的系统上，我在我的视觉工作室环境中指向源代码控制 vss。我在我的工作文件夹上配置项目，然后在 IIS 中设置解决方案文件。当我打开解决方案时，它没有被配置并且没有显示签入/签出。

谁能给我一个想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:33:38.533

不太清楚“不显示签入/结帐”是什么意思。你的意思是解决方案不绑定到VSS？如果是，您是如何打开解决方案的？请尝试从源代码管理中打开它，看看它是如何工作的。

# c - XML - 解析文件返回 NULL

> ID：10430689
> 
> 赞同：0
> 
> 时间：2012-05-03T11:45:21.177
> 
> 标签：c, xml, xml-parsing

昨天我可以用 C 语言编写的程序解析 XML 文件，使用函数 `doc = xmlParseFile(fname);`.

现在，它返回 NULL（在下一行被捕获，返回错误）。该程序已经一个多月没有改变了，XML 文件自上周以来没有改变，libxml2 自 25.3.2012 以来没有改变。xmllint 毫无问题地遍历文件，我可以在另一台计算机上解析它们（Solaris，使用相同的源代码，但不同的编译器和库）。那我还应该检查什么？这听起来类似于这个线程，虽然我想避免那个hacky解决方案[http://ubuntuforums.org/showthread.php?t=1402824](http://ubuntuforums.org/showthread.php?t=1402824)（还没有尝试过）

C 程序实际上是一个从 MatLab 调用的 mex 函数，但这应该没什么区别，对吧？我在 GNU/Linux 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:14:49.513

尝试这个：

```
 FILE *f = fopen("~/myxml.log", "a");
  xmlSetGenericErrorFunc(f, NULL);
  doc = xmlParseFile(fname);
  fclose(f); 
```

并查看日志文件中的结果。

# php - KOHANA 3.2.0 不选择列

> ID：10430693
> 
> 赞同：1
> 
> 时间：2012-05-03T11:45:37.943
> 
> 标签：php, kohana, inner-join, kohana-orm

我有两个连接的表。现在我需要打印一些列，但问题是我有 Firms.Id 和 FirmsUnique.Id 列。当我尝试 ->select("*") kohana 3.2.0 时抛出错误：*“顺序子句中的列 'Id' 不明确”*

```
$firms = ORM::factory('firm')
    ->select("Firms.Id", "FirmsUnique.*")
    ->join("firmsunique")
    ->on("Firms.FirmUID", '=', 'FirmsUnique.Id')
    ->order_by('Id', 'ASC')
    ->where('ProjectId', '=', $projectid)
    ->group_by("FirmsUnique.FirmName")
    ->limit($pages->items_per_page)
    ->offset($pages->offset)->find_all(); 
```

如何取消选择列？或者我必须手动输入我想要的所有列？(->select("Firms.Id", "Firms.ProjectId" ...等))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:49:23.327

```
->order_by('Id', 'ASC')
->where('ProjectId', '=', $projectid) 
```

到

```
->order_by('Firms.Id', 'ASC')
->where('Firms.ProjectId', '=', $projectid) 
```

您也可以使用`echo $firms->compile(Database::instance());`before call`find_all()`方法来检查您的查询并尝试直接在 MySQL 中执行它以查找一些错误和错误。

# c - 检查字符串是否包含字符串

> ID：10430695
> 
> 赞同：0
> 
> 时间：2012-05-03T11:45:47.553
> 
> 标签：c

我目前正在开发一个 C 程序，我需要检查一个字符串中是否有一个字符串。该字符串可能是 mylog.txt.1，我想检查它是否包含 mylog.txt 以及它是否确实执行了某些操作。

为了执行此操作，我使用以下代码

```
int logMaintenance(void *arg)
{
    while (TRUE)
    {
        DIR *dir;
        struct dirent *ent;
        dir = opendir(directory);
        if (dir != NULL)
        {
            while ((ent = readdir (dir)) != NULL)
            {
                if (strstr(ent->d_name, fileName) != NULL )
                {
                    printf("%s\n", ent->d_name);
                }
            }
            closedir(dir);
        }
        else
        {
            printf("Failed to read directory %i", EXIT_FAILURE);
        }
        SL_WU_SleepUSecs(2000);
    }
    return 0;
} 
```

但是，此代码似乎不起作用。出于某种原因，它只会打印 mylog.txt 而不会包含以 .1 或 .2 等结尾的任何其他文件。我还尝试在 if 语句中使用 >=0 而不是 != NULL ，这只是打印一切，即使它不包括 mylog.txt。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:52:47.937

ANSI/ISO C 提供`char *strstr(const char *haystack, const char *needle)`了大海捞针的功能。用于`#include <string.h>`获取原型。您确定您的参数顺序正确吗？

**编辑**：我把干草堆和针的顺序弄错了，脸红。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:53:43.903

您可能以错误的方式使用 strstr() 的参数。从你的描述很难判断。您是在 ent->d_name 中寻找文件名，还是相反？

第一个是要在里面搜索的字符串。第二个是要搜索的字符串。

否则，请尝试使用固定数据创建测试用例。

# javascript - Javascript添加js

> ID：10430700
> 
> 赞同：3
> 
> 时间：2012-05-03T11:45:53.497
> 
> 标签：javascript

让我们假设我们有一个网页。我们无法直接访问此页面，因此我们无法更改源代码，但我们需要在其内容中添加一个 js。有什么办法吗？我的意思是例如外部 javascript 或任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:47:24.947

如果没有任何访问权限，您当然不能向该站点添加任何脚本。我们在说啥啊？XSS 指令 ?

你也许应该澄清你到底在追求什么以及出于什么原因。上面的陈述仍然正确，没有访问权限，没有永久添加任何脚本（没有某种 xss 攻击）。

如果您只想将代码注入到本地打开的页面，您可以使用任何 js-console，例如 Firebug。例如

```
var head = document.head || document.getElementsByTagName('head')[0] || document.documentElement,
    scr  = document.createElement('script');
    scr.src = 'http://myserver/myscript.js';
    scr.type = 'text/javascript';

head.insertBefore(scr, head.firstChild); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:48:56.197

检查[Greasemonkey](http://www.greasespot.net/)及其FF[插件](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)。您可以使用它将 js 注入任何页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:49:33.033

通常没有，但是浏览器扩展可以。

# java - 使用 x509 证书在 .net 中加密 xml 文件并在 java 中解密

> ID：10430703
> 
> 赞同：1
> 
> 时间：2012-05-03T11:46:10.100
> 
> 标签：java, .net, xml, encryption, encryption-asymmetric

我花了将近一天的时间在网上搜索以下要求，最后只在 .net 中完成加密和解密，而不是在 java 中完成。

我想在 .net 中加密文件并在 java 上使用 x509Certificate 解密它

```
makecert -r -pe -n "CN=CERT_SIGN_TEST_CERT" -b 01/01/2010 -e 01/01/2012 -sky exchange -ss my 
```

使用此命令我生成证书并从证书导出 .pfx 文件，此 pfx 文件用于加密 xml 文件

> 在 .net 中使用 EncryptedXml、X509Certificate2、RSACryptoServiceProvider 和 XmlDocument 类 (.Net)

我加密以下xml

```
<Test><Name>Foo</Name><CardNo>123</CardNo></Test> 
```

如下：

```
<EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns="http://www.w3.org/2001/04/xmlenc#"><EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc" /><KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#"><EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#"><EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" /><KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#"><X509Data><X509Certificate>MIICFzCCAYCgAwIBAgIQK5IFtxwNaJhGzXuDf92TgzANBgkqhkiG9w0BAQQFADAfMR0wGwYDVQQDHhQARgBpAG4AYQBsAF8AQwBlAHIAdDAeFw0wOTEyMzExODMwMDBaFw0xMjEyMzExODMwMDBaMB8xHTAbBgNVBAMeFABGAGkAbgBhAGwAXwBDAGUAcgB0MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1Wx11luboMbT1swXV/56j2RYRhR81n9hF3b6tfof1zHRorg7DIP3hvnVtqDF+WxAjn1um97DHtxWf3solthbIHC9cGtqxUhZhgdd0aVAuiKTBbTgnOWdEqTErenrHOzlZnD9iDzOm3OYVLKN+3hKJmjlhTp0sFsu4AIbXlxZVHQIDAQABo1QwUjBQBgNVHQEESTBHgBBDXPlnSZ5zUyVbxJzJO12goSEwHzEdMBsGA1UEAx4UAEYAaQBuAGEAbABfAEMAZQByAHSCECuSBbccDWiYRs17g3/dk4MwDQYJKoZIhvcNAQEEBQADgYEAiubZJZdF3Y9ItOl7LTyixcbuebs50GLFsTeMslS3usq6psXcUEFJntXJ5vXOSe/vp6E6A5AwW4MtPfnB1kzach4T4+WlWeaDHoyj6y5j+n7P6B/X6ZhkQ8MCiGhZ/fTOt7CDisnFVG9gvoH2LUEs1QkiByDq6jii3TUAMN9YQdA=</X509Certificate></X509Data></KeyInfo><CipherData><CipherValue>Vyml+mtbeL5bE6EWKNqHfnE1xEkbJglcxbjH3Y7pj9BtXVImAI/SbBdLHatyjIAei7qUfhcn+qYC7WAh48XR78BgqCdJX7O5lfZjVSVeVaQUwl1Bdirdz7RYuveIjDtEIM80W4tB6rq2nOgYNkisxhhwIl7EiCQtT42bSGCKFic=</CipherValue></CipherData></EncryptedKey></KeyInfo><CipherData><CipherValue>ezVeQlBGZRbHqitB2mmHuMvifGB9IhG1g0CWmL8iz37JIIw7x5cGbb5Ap8iy24ACu8TJpwgAGIUWnUTDSZ//kWLzCa3G5HL+jT/RHn+zypk=</CipherValue></CipherData></EncryptedData> 
```

至于加密是使用 w3c 标准完成的。我如何在 java 上解密这个 xml 文件。我已经使用 .pfx 文件来加密文件。在 .net 中，我可以使用以下方法解密文件：

```
 EncryptedXml encXml = new EncryptedXml(xmlEncDoc);  
encXml.DecryptDocument(); 
```

我如何在java中解密，我应该将pfx文件传递给java端吗？因为加密的 xml 文件中有`<X509Data>`标签。

你的建议是appriciated。

# php - 获取引荐来源网址 - 来自 Paypal (HTTPS) 的访问者

> ID：10430704
> 
> 赞同：11
> 
> 时间：2012-05-03T11:46:12.717
> 
> 标签：php, paypal, http-referer

嗨，我正在尝试获取引荐来源网址，但是当访问者从 Paypal 访问该网站时它不起作用

```
$ref = $_SERVER['HTTP_REFERER'];
echo $ref; 
```

如果访问者登陆来自 Paypal 的网站，是否有一种简单的方法来获取 paypal url？

**编辑和澄清：** 我不希望在 Paypal 网站上进行任何特殊设置（包括但不限于：IPN、设置返回 URL、支付数据传输或 Paypal 网站上的任何其他特殊设置）查找是当访问者从 Paypal 访问该站点时获取 URL 引用，无论交易状态如何（如果有的话）。

正如鲍勃从手册中指出的那样

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。该数组中的 > 条目由 Web 服务器创建。无法保证每个 Web > 服务器都会提供其中的任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。

所以剩下的唯一问题是 - 如果没有在贝宝网站上设置一些东西，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-11T10:46:22.503

如果您的网站使用 HTTP（不是 HTTPS）而 PayPal 使用 HTTPS，则不会发送推荐人！

[HTTP RFC - 15.1.3 在 URI 的](https://www.rfc-editor.org/rfc/rfc2616#section-15.1.3)状态下编码敏感信息：

> 如果引用页面是使用安全协议传输的，则客户端不应在（非安全）HTTP 请求中包含Referer 头字段。

因此，获得推荐人的唯一方法是在您的网站上使用 HTTPS。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T12:21:35.657

您可以检查 IPN。当交易受到影响时，它会发送通知。
网址：[https ://www.paypal.com/ipn](https://www.paypal.com/ipn)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T00:14:38.107

不幸的是，引用者是由客户端设置的，一些浏览器（或插件）允许用户编辑发送到服务器的引用者。相信用户发送的“关键”（我猜是你的情况）信息从来都不是一个好主意。然而，这是您拥有的关于用户来自哪里的唯一信息（如果您决定不使用贝宝可以提供的服务）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T11:54:45.483

引用自[PHP.net](http://php.net/manual/en/reserved.variables.server.php)：

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。该数组中的 > 条目由 Web 服务器创建。无法保证每个 Web > 服务器都会提供其中的任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-03T17:48:04.737

感谢您的启发（在评论中）。正如 Bob 所说，您不能依赖服务器发送的信息。我要做的是创建一个用户在付款前必须访问的页面，设置一个 cookie（或会话），将用户重定向到 PayPal 网站。当用户返回您的网站（通过 PayPal、一些链接或手动）时，您知道该人点击了“支付”按钮（在您设置 cookie 或会话时）并执行您想要的操作。

这不是您所要求的，但可能是可接受的解决方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T11:20:53.810

您可以`document.referrer`在 javascript 中使用并通过 ajax 或其他方式将其发送到服务器（如果需要）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T10:05:27.963

从不同的角度来看：如果您想在他们去 PayPal 之前找出他们来自哪里，并且您的网站正在将他们发送到 PayPal（或者您可以让他们在前往 PayPal 的途中通过您的网站重定向)，在您重定向它们之前在您的网站上设置一个 cookie，然后在它们返回时读取 cookie。

抱歉，如果再次不是您需要的，但只是检查您是否考虑过它（因为我也不认为您会与推荐人一起获胜）。

# wcf - 如何自动创建 WCF 配置文件？

> ID：10430706
> 
> 赞同：0
> 
> 时间：2012-05-03T11:46:18.410
> 
> 标签：wcf, configuration

我在类库中创建了 WCF 服务接口和实现。

我尚未决定该服务是自托管还是由 Windows 服务托管。

我现在如何创建将托管我的 WCF 服务的控制台应用程序（Visual Studio 中的单独项目）？我知道我可以通过以编程方式输入所有配置（如[这里](http://msdn.microsoft.com/en-us/library/ms731758.aspx)）来托管它，但我不希望这样。

我希望这个控制台应用程序有一个配置文件，其中已经包含“serviceModel”部分，这样我在控制台应用程序的主要功能中要做的就是：

```
MyService service = new MyService();
service.Open(); 
```

因此“打开”将从“App.config”文件中读取配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:53:12.283

您必须手动将该部分添加到控制台应用程序的配置文件中。没有“自动”方法可以将该部分添加到现有的 app.config。

一旦该配置部分位于控制台应用程序的`app.config`中，那么您的类库的 WCF 服务将正确读取它，就像您希望的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:00:56.893

这是一个自托管模板：

[http://webservices20.blogspot.com/2010/10/wcf-self-hosting-also-in-vs-2010.html](http://webservices20.blogspot.com/2010/10/wcf-self-hosting-also-in-vs-2010.html)

# c# - 将一些代码移动到新类后出现运行时错误

> ID：10430710
> 
> 赞同：0
> 
> 时间：2012-05-03T11:46:35.127
> 
> 标签：c#, asp.net

我有代码：

```
namespace ShowDiagram1
{
    public partial class WebForm1 : System.Web.UI.Page
   {
         bitmap.Save(Server.MapPath("pic1.jpg"), ImageFormat.Jpeg);
        Image1.ImageUrl = this.ResolveUrl("pic1.jpg");
    }
} 
```

它工作正常。我将此代码移至新课程

```
 namespace ShowDiagram1
 {
     public class MyDraw : WebForm1
     {
          ...
         bitmap.Save(Server.MapPath("pic1.jpg"), ImageFormat.Jpeg);
        Image1.ImageUrl = this.ResolveUrl("pic1.jpg");
     }
 } 
```

现在我有运行时错误

> 你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。
> 
> 源错误：
> 
> 第 85 行：Image1.ImageUrl = ResolveUrl("pic1.jpg");

pic1.jpg 已创建好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:52:00.840

我认为这个问题的整个目标非常模糊，应该重新定义。如果 MyDraw 只是一个包含一些代码的实用程序类，那么它应该与继承无关，而是应该在构造函数中传递必要的数据并存储为变量。

# php - 在不同页面上定位 iFrame 的表单

> ID：10430712
> 
> 赞同：1
> 
> 时间：2012-05-03T11:46:44.850
> 
> 标签：php, javascript, forms, iframe

对于坚持使用当前设置的客户，他有一个表单，在提交时会在 iframe 中加载一个 asp 文件。

由于过去几年我只在这个领域工作，我在使用 iFrames 或 ASP 方面的经验很少，所以你能给我的任何帮助将不胜感激。

表格在 sidebar.php 中...

```
<form method="post" action="http://www.vebra.com/home/quick/PFrefine.asp" name="searchform">
        <dl id="property_search">
          <dt class="bord">Bedrooms</dt>
          <dd><select name="bed" class="type1 Selectrooms">
                  <option selected="selected" value="1">0</option>
                  <option value="2">2</option>
                  <option value="3">2</option>
                  <option value="4">3</option>
                  <option value="5">4</option>
                  <option value="6">5</option>
              </select>
          </dd>

          <dt class="bord">Minimum Price</dt>
          <dd><select class="type2 SelectPrices" name="lop">
                <option value="0" selected>&#163;0</option>
                <option value="25000">&#163;25,000</option>
                <option value="50000">&#163;50,000</option>
                <option value="75000">&#163;75,000</option>
                <option value="100000">&#163;100,000</option>
                <option value="125000">&#163;125,000</option>
                <option value="150000">&#163;150,000</option>
                <option value="175000">&#163;175,000</option>
                <option value="200000">&#163;200,000</option>
                <option value="225000">&#163;225,000</option>
                <option value="250000">&#163;250,000</option>
                <option value="275000">&#163;275,000</option>
                <option value="300000">&#163;300,000</option>
                <option value="325000">&#163;325,000</option>
                <option value="350000">&#163;350,000</option>
                <option value="375000">&#163;375,000</option>
                <option value="400000">&#163;400,000</option>
                <option value="500000">&#163;500,000</option>
                <option value="600000">&#163;600,000</option>
                <option value="700000">&#163;700,000</option>
                <option value="800000">&#163;800,000</option>
                <option value="900000">&#163;900,000</option>
                <option value="1000000">&#163;1,000,000</option>
                <option value="2000000">&#163;2,000,000</option>
                <option value="3000000">&#163;3,000,000</option>
                <option value="4000000">&#163;4,000,000</option>
                <option value="5000000">&#163;5,000,000</option>
                <option value="6000000">&#163;6,000,000</option>
              </select>
          </dd>

          <dt class="bord">Maximum Price</dt>
          <dd><select name="hip" class="type3 SelectPrices">
                <option value="25000">&#163;25,000</option>
                <option value="50000">&#163;50,000</option>
                <option value="75000">&#163;75,000</option>
                <option value="100000">&#163;100,000</option>
                <option value="125000">&#163;125,000</option>
                <option value="150000">&#163;150,000</option>
                <option value="175000">&#163;175,000</option>
                <option value="200000">&#163;200,000</option>
                <option value="225000">&#163;225,000</option>
                <option value="250000">&#163;250,000</option>
                <option value="275000">&#163;275,000</option>
                <option value="300000">&#163;300,000</option>
                <option value="325000">&#163;325,000</option>
                <option value="350000">&#163;350,000</option>
                <option value="375000">&#163;375,000</option>
                <option value="400000">&#163;400,000</option>
                <option value="500000">&#163;500,000</option>
                <option value="600000">&#163;600,000</option>
                <option value="700000">&#163;700,000</option>
                <option value="800000">&#163;800,000</option>
                <option value="900000">&#163;900,000</option>
                <option value="1000000">&#163;1,000,000</option>
                <option value="2000000">&#163;2,000,000</option>
                <option value="3000000">&#163;3,000,000</option>
                <option value="4000000">&#163;4,000,000</option>
                <option value="5000000">&#163;5,000,000</option>
                <option selected value="6000000">&#163;6,000,000+</option>
              </select>
          </dd>
          <dt>Regions</dt><dd><img src="images/spacer.gif" alt="" /></dd>

          <dt><input type="checkbox" name="cou" id="couHertfordshire" value="43"/></dt><dd>Hertfordshire</dd>
          <dt><input type="checkbox" name="cou" id="couLondonNorth" value="126" /></dt><dd>London, North</dd>
          <dt><input type="checkbox" name="cou" id="couLondonNorthWest" value="127" /></dt><dd>London, North West</dd>

          <input type="hidden" name="slo" value="undefined" />
            <input type="hidden" name="fid" value="894" />
            <input type="hidden" name="bid" value="0" />
            <input type="hidden" name="dbt" value="1" />
            <input type="hidden" name="nre" value="undefined" />
            <input type="hidden" name="thu" value="undefined" />
            <input type="hidden" name="vto" value="undefined" />
            <input type="hidden" name="ord" value="undefined"/>
            <input type="hidden" name="nba" value="undefined" />

          <dt><input type="submit" class="search_now" value="Find Property" formtarget="hello" /></dt><dd><img src="images/spacer.gif" alt="" /></dd>
        </dl>
      </form> 
```

我想在 test.php 中的结果页面...

```
<iframe width="583" height="500" name="hello">iframe</iframe> 
```

不幸的是，我根本无法访问 ASP 处理程序文件。

基本上，当您在侧边栏中填写表单并单击提交按钮时，我希望浏览器重定向到结果页面并使用结果加载 iframe。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:51:39.603

有可能，您只需使用 ajax 来发布表单数据。一切尽在您的掌控之中。请享用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:58:28.007

您需要在 iframe 上命名，然后在表单上使用[target](http://www.w3.org/TR/html401/present/frames.html#adef-target)属性。

```
<iframe src="foo" name="myframe"></iframe>
<form method="post" action="http://www.vebra.com/home/quick/PFrefine.asp" name="searchform" target="myframe">
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:15:44.673

这是一个使用 JavaScript 和 jQuery 读取表单并相应地更改 iframe 的 url 的示例：

```
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>

<body>
<form id="target" action="javascript:return false;">
  <input type="text" value="http://www.ftd.de" />
  <input type="submit" value="Go" />
</form>

<iframe id="iframe1" src="javascript:false;"></iframe>

<script>
$('#target').submit(function() {
  $('#iframe1').attr('src', $("input:first").val());
});    
</script>
</body> 
```

现场演示：

[jsfiddle](http://jsfiddle.net/snies/LDbFA/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T11:55:20.527

如果 iFrame 中的页面能够接受 GET 和 POST 数据，您可以将数据发布到包含 iFrame 的页面，然后使用您选择的语言将其作为查询字符串附加到 iFrame 的 src 标记。

或者，如果 iFrame 中的页面只接受 POST 数据，例如因为编写它的人出于（感知的）安全原因阻止它接受 GET 数据，您可以使用您选择的语言在目标页面中编写另一个包含iFrame，然后自动提交（使用 JavaScript）到 iFrame，将该表单的目标设置为 iFrame。（请注意，这与上面使用查询字符串的 JQuery 示例略有不同。）

这是上述第一个解决方案的示例：

第一页表格：

```
<form name="frmPost" method="post" action="test_iframe_post_target.php">
    <input type="hidden" name="actionid" value="2" />
    <input type="hidden" name="qy" value="1" />
    <input type="hidden" name="pid" value="123" />
</form>

<p><a href="javascript:document.frmPost.submit();">Submit Form</a></p> 
```

目标页面：

```
<?php
$lngAction = $_POST["actionid"];
$lngQy = $_POST["qy"];
$lngPID = $_POST["pid"];
?>

<p>This is the target page. Action is: <?php echo $lngAction; ?></p>

<iframe name="test_iframe" width="900" height="320" src="test_iframe_post_iframe.php?action=<?php echo $lngAction; ?>&qy=<?php echo $lngQy; ?>&pid=<?php echo $lngPID; ?>" border="0" frameborder="0" align="center" marginwidth="1" marginheight="1" target="_top"></iframe> 
```

框架：

```
<p>This is the iFrame. Action is: <?php echo $lngAction; ?>; Qy is: <?php echo $lngQy; ?>; PID is: <?php echo $lngPID; ?>.</p> 
```

# java - 在“else if”语句中放置适当的条件以在 Android 中执行查询时出现问题

> ID：10430713
> 
> 赞同：0
> 
> 时间：2012-05-03T11:46:47.787
> 
> 标签：java, android, database, string, if-statement

我正在尝试使用 else if 语句更改我的应用程序中相同 String 属性中的值，但到目前为止一直面临一些问题。直到现在我还没有能够改变价值观。这是我的代码的重要部分。有什么建议么？

```
protected void ScheduleOp1() {
   // TODO Auto-generated method stub
   String VarMin = "-140 minute";

   db.execSQL("DROP VIEW IF EXISTS " + view_Schedule1);
   db.execSQL("CREATE VIEW " + view_Schedule1 + " " + " AS SELECT "
         + sBusDepart + "," + sBusArrival + "," + sBusDepartT + ","
         + sBusArrivalT + " FROM" + " " + fDepart + " " + "INNER JOIN" + " "
         + sBusSchedule + " " + "ON " + sBusSchedule + "." + sBusDate + "="
         + fDepart + "." + fDate + " " + "WHERE " + fDate + "= '" + fDate1
         + "'" + " " + "AND" + " " + sBusDepartT + " "
         + "= strftime('%H:%M', '" + fTime + "', '" + VarMin + "');");

   Cursor cur = fetchAllTodos();
   startManagingCursor(cur);

   if (cur.moveToFirst()) {
      Toast.makeText(
            getBaseContext(),
            cur.getString(0) + "  " + cur.getString(1) + "  "
                  + cur.getString(2) + "  " + cur.getString(3) + "\n",
            Toast.LENGTH_LONG).show();
   } else if (cur.moveToFirst() == false) {
      VarMin = "-150 minute";
   } else {
      Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
   }
} 
```

希望你们能帮帮我。

- 更新 -

这是代码的更新。我正在尝试做的是不断更改“VarMin”的值，以便通过我创建的视图执行搜索。'else' 语句适用于绝对没有找到结果的情况。

```
protected void ScheduleOp1() {
        // TODO Auto-generated method stub

        db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
        db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
                " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
                +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
                +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
                "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
                +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
                "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '" +VarMin+"');");

          Cursor cur = fetchAllTodos();
            startManagingCursor (cur);

            if (cur.moveToFirst()) {

                Toast.makeText(getBaseContext(), cur.getString(0)+ "  " +cur.getString(1)+ "  "
                 +cur.getString(2)+ "  " +cur.getString(3)+ "\n",
                    Toast.LENGTH_LONG).show();
            }else if (cur.moveToFirst() == false){
                VarMin = "-145 minute"; 
            }
            else if (cur.moveToFirst() == false){
                VarMin = "-150 minute";
            }
            else{
                Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
            }

    }

           //fetching records from database
         public  Cursor fetchAllTodos() {   
         return db.query(view_Schedule1, new String [] {sBusDepart, 
                 sBusArrival, sBusDepartT, sBusArrivalT }, null, null, null, null, null);
           }

    } 
```

希望你们能帮助我。

- 更新 -

这是完整代码的更新。

```
package sirtat.individualProject.PublicTransportationTimeScheduler;
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;

import android.view.View;
import android.widget.Button;

import android.widget.Toast;

import android.widget.TimePicker;
import android.widget.DatePicker;

import java.util.Calendar;
import java.util.Locale;
import android.database.Cursor;

public class ScheduleActivity extends Activity {
    SQLiteDatabase db;

    TimePicker timePicker;
    DatePicker datePicker;

    int hour, minute;
    int yr, month, day;

    static String fDate1="DepartureDate";
    static String fDate2="DepartureDate";
    static String fTime="DEPART_TIME";
    static String fTime2="DEPART_TIME";

    public static final String view_Schedule1 = "ViewSchedule1";
    public static final String sBusArrival = "SBusArrivalLocation";
    public static final String sBusDepart = "SBusDepartLocation";
    public static final String sBusArrivalT = "SBusArrivalTime";
    public static final String sBusDepartT = "SBusDepartTime";
    public static final String fDepart = "FlightDeparture";
    public static final String sBusSchedule = "SkyBusSchedule";
    public static final String sBusDate = "SkyBusDate";
    public static final String fDate = "FlightDate";

    private int Min=140;
    private String getVarMin(){
        return "-"+Min+" " + "minute";
    }

    //private String VarMin = "";

    /** Called when the activity is first created */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.schedule_layout);

        db = openOrCreateDatabase("PublicTransport2" , SQLiteDatabase.CREATE_IF_NECESSARY, null);

        db.setVersion(1);
        db.setLocale(Locale.getDefault());
        db.setLockingEnabled(true); 

        Calendar today = Calendar.getInstance();

        //--GET THE CURRENT DATE--
        yr= today.get(Calendar.YEAR);
        month = today.get(Calendar.MONTH);
        day = today.get(Calendar.DAY_OF_MONTH);

        //--GET THE CURRENT TIME--
        hour = today.get(Calendar.HOUR);
        minute = today.get(Calendar.MINUTE);

        timePicker = (TimePicker) findViewById(R.id.timePicker);

        datePicker = (DatePicker) findViewById(R.id.datePicker);

        //--Button view--
                Button btnOp1 = (Button) findViewById(R.id.btnOption1);
                btnOp1.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        int year1 = datePicker.getYear();
                        int mnth1 = datePicker.getMonth() + 1;
                        int dy1 = datePicker.getDayOfMonth();
                        int hr1 = timePicker.getCurrentHour();
                        int min1 = timePicker.getCurrentMinute();

                        fDate1 = (pad(year1)) + ("-") + (pad(mnth1))
                             + ("-") + (pad(dy1));
                        fTime = (pad(hr1)) + (":") + (pad(min1));

                        ScheduleOp1();  
                            }
                    private Object pad(int b) {
                        // TODO Auto-generated method stub
                        if (b >= 10){
                            return String.valueOf(b);
                        }else{
                           return "0" + String.valueOf(b);
                        }

                    }
                   });  

                Button btnOp2 = (Button) findViewById(R.id.btnScheduleOption2);
                btnOp2.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        int year2 = datePicker.getYear();
                        int mnth2 = datePicker.getMonth() + 1;
                        int dy2 = datePicker.getDayOfMonth();
                        int hr2 = timePicker.getCurrentHour();
                        int min2 = timePicker.getCurrentMinute();

                        fDate2 = (pad2(year2)) + ("-") + (pad2(mnth2))
                             + ("-") + (pad2(dy2));
                            fTime2 = (pad2(hr2)) + (":") + (pad2(min2));

                            ScheduleOp2();

                    }

                    private Object pad2(int c) {
                        // TODO Auto-generated method stub
                        if (c >= 10){
                            return String.valueOf(c);
                        }else{
                           return "0" + String.valueOf(c);
                        }
                    }

                });

            }

    protected void ScheduleOp1() {
        // TODO Auto-generated method stub

            Cursor cur = null;
            boolean mustCont = true;
            while (mustCont){
                db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
                db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
                        " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
                        +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
                        +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
                        "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
                        +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
                        "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '" +getVarMin()+"');");
                cur = fetchAllTodos();

                if (cur.getCount() == 0){
                    switch (Min){
                    case 140 :
                        Min = 145;
                        break;
                    case 145 :
                        Min = 150;
                        break;
                    case 150 :
                        Min = 155;
                        break;
                    case 155 :
                        Min = 180;
                        break;
                    case 200 :
                        mustCont = false;
                        break;
                    }

                }else{
                    mustCont = false;
                }
            }
            if(cur != null && cur.getCount()>0){
                cur.moveToFirst();
                Toast.makeText(getBaseContext(), cur.getString(0)+ "  " +cur.getString(1)+ "  "
                             +cur.getString(2)+ "  " +cur.getString(3)+ "\n",
                                Toast.LENGTH_LONG).show();
            }else {
                Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
                }
    }
protected void ScheduleOp2(){

        Toast.makeText(getBaseContext(), "Date selected:"
                 + fDate2 + "\n" +
                "Time Selected:" + fTime2,
                Toast.LENGTH_LONG).show();
    }

           //fetching records from database
         public  Cursor fetchAllTodos() {   
         return db.query(view_Schedule1, new String [] {sBusDepart, 
                 sBusArrival, sBusDepartT, sBusArrivalT }, null, null, null, null, null);
           }

    } 
```

这是代码重要部分的更新

```
protected void ScheduleOp1() {
        // TODO Auto-generated method stub

            Cursor cur = null;
            boolean mustCont = true;
            while (mustCont){
                db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
                db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
                        " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
                        +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
                        +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
                        "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
                        +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
                        "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '" +getVarMin()+"');");
                cur = fetchAllTodos();

                if (cur.getCount() == 0){
                    switch (Min){
                    case 140 :
                        Min = 145;
                        break;
                    case 145 :
                        Min = 150;
                        break;
                    case 150 :
                        Min = 155;
                        break;
                    case 155 :
                        Min = 180;
                        break;
                    case 200 :
                        mustCont = false;
                        break;
                    }

                }else{
                    mustCont = false;
                }
            }
            if(cur != null && cur.getCount()>0){
                cur.moveToFirst();
                Toast.makeText(getBaseContext(), cur.getString(0)+ "  " +cur.getString(1)+ "  "
                             +cur.getString(2)+ "  " +cur.getString(3)+ "\n",
                                Toast.LENGTH_LONG).show();
            }else {
                Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
                }
    } 
```

希望你们能帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:03:33.640

您是否尝试过使用全局变量`private String VarMin = "-140 minute";`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:33:58.457

你`if`没有任何意义...... moveToFirst 为真，或者为假（意味着没有返回任何记录）。基本上，您现在拥有的将**永远不会**显示“未找到”吐司。

因此，不清楚您是想在没有记录时显示吐司，还是设置变量。

无论哪种方式，你都应该清理你`if`的东西（假设你想要变量集）：

```
if (cur.moveToFirst()) {
  Toast.makeText(
     getBaseContext(),
     cur.getString(0) + "  " + cur.getString(1) + "  "
     + cur.getString(2) + "  " + cur.getString(3) + "\n",
     Toast.LENGTH_LONG).show();
  } else {
     VarMin = "-150 minute";
  } 
```

**编辑**

并且您的代码的排列方式，您总是将“-140 分钟”放入您的数据库中。如果您希望 IF 所做的更改进入数据库，则需要在 db 操作之前将其移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T13:43:38.397

**编辑：我添加了管理查询的代码**

你可以做的事情：

```
private int mMinutes = 145;
protected void ScheduleOp1() {
    Cursor cur = null;
    boolean mustContinue = true  ;
    while(mustContinue){
         db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
    db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
            " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
            +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
            +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
            "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
            +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
            "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '-" +mMinutes+" minute');");
      cur = fetchAllTodos()
        if(cur.getCount()==0){
            mustContinue = true ;
            switch(mMinutes){
            case 145 :
                mMinutes = 150 ;
                break;
            case 150 :
                mMinutes = 155 ;
                break;
            case 200 : //for max value for example
                mustContinue = false ;
                break;
                //etc ....
            }

        }else{
            mustContinue = false ;
        }
    }
    if(cur != null && cur.getCount()>0){
        cur.moveToFirst();
        Toast.makeText(getBaseContext(), cur.getString(0)+ "  " +cur.getString(1)+ "  "
                 +cur.getString(2)+ "  " +cur.getString(3)+ "\n",
                    Toast.LENGTH_LONG).show();
    }else{
        mMinutes = 145;
        Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
    }
} 
```

# c# - Linq To Nhibernate : HqlTreeBuilder with Elements 怎么用？

> ID：10430716
> 
> 赞同：2
> 
> 时间：2012-05-03T11:46:58.440
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

对于我正在开发的项目，我必须使用 Linq 来创建一些规范。现在我有一个字典，我必须在上面搜索值。由于 NHibernate 的默认 Linq 实现不支持 ContainsValue 函数，因此我决定创建自己的。

所以我创建了一个名为 ContainsValueGenerator 的类，它派生自 BaseHqlGeneratorForMethod，如下所示：

```
public class ContainsValueGenerator : BaseHqlGeneratorForMethod
{
    public ContainsValueGenerator()
    {
        SupportedMethods = new[] { ReflectionHelper.GetMethodDefinition(() => new Dictionary<object, object>().ContainsValue(null)) };
    }

    public override HqlTreeNode BuildHql(MethodInfo method, Expression targetObject, ReadOnlyCollection<Expression> arguments, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
    {
        //Session.CreateQuery("from Message m where 'aDictionaryValue' in elements(m.Dictionary)"); 

        HqlTreeNode hqlTreeNode = treeBuilder.Elements(); // TODO include dictionary here? 
        return treeBuilder.In(visitor.Visit(arguments[0]).AsExpression(), hqlTreeNode);
        //return treeBuilder.In(visitor.Visit(arguments[0]).AsExpression(), treeBuilder.Indices(visitor.Visit(targetObject).AsExpression())); ContainsKey Method implementation 
    }
} 
```

我查看了 Nhibernate 的源代码，并采用了 ContainsKey 方法实现。Hqls 语法与 ContainsKey 语法非常相似。唯一需要改变的（我猜）是，我必须使用 treebuilder.Elements（在评论中显示）而不是 treebuilder.Indices()。

这就是我卡住的地方；我无法为 ElementsExpression 提供我自己的字典。如何创建一个利用 Elements 表达式的 HqlTreeNode？

在此先感谢，罗布范帕梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:25:24.447

解决方案是创建自己的 HqlElements 类，该类继承自 HqlExpression。事实上，它只是[HqlIndices](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Hql/Ast/HqlTreeNode.cs#L630)类的一个副本。

```
public class HqlElements : HqlExpression
{
    public HqlElements(IASTFactory factory, HqlExpression dictionary)
        : base(HqlSqlWalker.ELEMENTS, "elements", factory, dictionary)
    {
    }
} 
```

棘手的部分是将其作为属性添加到[HqlTreeBuilder](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Hql/Ast/HqlTreeBuilder.cs#L319)类。因此，您可以使用扩展方法。这包含一段*丑陋*的代码，通过反射获取 HqlTreeBuilder 的工厂。

```
public static class HqlTreeBuilderExtensions
{
    public static HqlElements Elements(this HqlTreeBuilder treeBuilder, HqlExpression dictionary)
    {
        var factory = (IASTFactory) treeBuilder.GetType().GetField("_factory", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(treeBuilder);

        return new HqlElements(factory, dictionary);
    }
} 
```

您的生成器现在可以更改为：

```
public class ContainsValueGenerator : BaseHqlGeneratorForMethod
{
    public ContainsValueGenerator()
    {
        SupportedMethods = new[] { ReflectionHelper.GetMethodDefinition(() => new Dictionary<object, object>().ContainsValue(null)) };
    }

    public override HqlTreeNode BuildHql(MethodInfo method, Expression targetObject, ReadOnlyCollection<Expression> arguments, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
    {
        return treeBuilder.In(visitor.Visit(arguments[0]).AsExpression(), treeBuilder.Elements(visitor.Visit(targetObject).AsExpression()));
    }
} 
```

最好的解决方案是让这段代码进入 NHibernate 本身。也许我会为此向 GitHub 添加一个补丁。

# blackberry - 如何在黑莓中创建用于询问权限的自定义对话框

> ID：10430718
> 
> 赞同：1
> 
> 时间：2012-05-03T11:46:59.540
> 
> 标签：blackberry

如何创建自定义对话框以在黑莓中询问权限并存储在应用程序描述符中。我已经创建了此代码，但我无法获取我们的自定义消息并获取 Exception Uncaught Exception:no Application Instance。

```
class PermissionTest extends UiApplication {

    private static String[] dialogChoice = { "Exit" };

    static boolean permissionsOk = false;

    // main method
    public static void main(String[] args) {
        _assertHasPermissions();
        PermissionTest theApp = new PermissionTest();
        theApp.enterEventDispatcher();
    }

    public PermissionTest() {
        if (permissionsOk)
            UiApplication.getUiApplication().pushScreen(new HomeScreen());
        else
            UiApplication.getUiApplication().pushScreen(new PermissionScreen());
    }

    // ASK FOR PERMISSIONS
    private static void _assertHasPermissions() {

        try {
            // Capture the current state of permissions and check against the
            // requirements.
            ApplicationPermissionsManager apm = ApplicationPermissionsManager
                    .getInstance();
            ApplicationPermissions original = apm.getApplicationPermissions();

            // Set up and attach a reason provider
            apm.addReasonProvider(
                    ApplicationDescriptor.currentApplicationDescriptor(),
                    new ReasonProvider() {
                        public String getMessage(int i) {
                            String msg = "I need the permissions in order to work properly.";
                            switch (i) {
                            case ApplicationPermissions.PERMISSION_LOCATION_API:
                                msg = "Needed for location based services.";
                                break;
                            case ApplicationPermissions.PERMISSION_BROWSER_FILTER:
                                msg = "Needed for location based services.";
                                break;
                            case ApplicationPermissions.PERMISSION_EMAIL:
                                msg = "Needed for location based services.";
                                break;
                            }
                            return msg;
                        }
                    });

            if (original
                    .getPermission(ApplicationPermissions.PERMISSION_LOCATION_API) == ApplicationPermissions.VALUE_ALLOW
                    && original
                            .getPermission(ApplicationPermissions.PERMISSION_BROWSER_FILTER) == ApplicationPermissions.VALUE_PROMPT
                    && original
                            .getPermission(ApplicationPermissions.VALUE_ALLOW) == ApplicationPermissions.VALUE_ALLOW) {
                permissionsOk = true;
            } else {
                // Create a permission request for each of the permissions your
                // application
                // needs. Note that you do not want to list all of the possible
                // permission
                // values since that provides little value for the application
                // or the user.
                // Please only request the permissions needed for your
                // application.
                ApplicationPermissions permRequest = new ApplicationPermissions();
                permRequest
                        .addPermission(ApplicationPermissions.PERMISSION_LOCATION_API);
                permRequest
                        .addPermission(ApplicationPermissions.PERMISSION_BROWSER_FILTER);
                permRequest
                        .addPermission(ApplicationPermissions.PERMISSION_EMAIL);

                permissionsOk = apm.invokePermissionsRequest(permRequest);
            }

            /*
             * if (permissionsOk) { // do nothing } else { // exit
             * System.exit(0); }
             */} catch (Exception e) {
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    Dialog.ask(
                            "Application install error, Please re-install application",
                            dialogChoice, 0);
                }
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:56:12.107

你不能， apm.invokePermissionsRequest() 总是显示默认对话框。

ReasonProvider 仅提供在权限设置为 PROMPT 且用户必须确认时显示的描述字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:30:39.213

你试过这样吗：

```
int k=Dialog.ask(Dialog.D_OK_CANCEL, "Can I provide all Permission?");
if(k==Dialog.D_OK)
{
    //Provide Permission;
} 
```

# java - 动态 Web 应用程序中的实时聊天模块

> ID：10430724
> 
> 赞同：0
> 
> 时间：2012-05-03T11:47:26.933
> 
> 标签：java, jsp, struts2

我使用 struts2、mysql、jquery 技术开发了婚姻网站。现在我想在我的应用程序中包含聊天模块，可以告诉我如何实现它。我盯着它，发现需要聊天服务器以及一些库文件，也可以使用 ajax 聊天来完成。

**谁能告诉我或给我链接以在struts2中开发聊天应用程序，我想像在facebook中一样实现它**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:00:21.500

你在使用 HTML5。如果是这样，您可以在网络工作者的帮助下使用 websockets，并可以创建在您的网页中作为单独组件运行的聊天应用程序。Gmail 对聊天应用程序使用相同的概念。但这可以使用 HTML5 来完成。截至目前，IE 8 支持 HTML5。HTML5 仅支持 chrome、safari 和 mozilla。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:41:47.307

首先，您正在寻找尽可能实时的传输解决方案。WebSockets 没有得到广泛支持，但它们对于此类应用程序来说是非常可取的。

因此，如果 WebSockets 不可用，您可能希望查看 Socket.IO，它通过故障转移到 longpoll 来实现 WebSockets。

对于服务器端，这将与您习惯于开发现有应用程序的 Web 应用程序开发非常不同。

因此，您必须阅读一些有关开发实时网络应用程序的总体思路的信息。与此同时，您必须选择服务器端语言/技术。因为你需要聊天，而且可能有很多用户，你最好看看更底层的语言，比如 .Net、Java、C++、Node.js 等。这里的 PHP 不会是一个好的解决方案，由于开发 Web 应用程序的旧方法，它变成了实时网络应用程序的可怕 idevelopment。

对于 Java，您可能想看看[jWebSockets](http://jwebsocket.org/)，对于数据协议，如果您想使用我会做的 JSON，请检查[google-gson](http://code.google.com/p/google-gson/)。

# sql - 将包含不同值的列聚合为一个

> ID：10430725
> 
> 赞同：1
> 
> 时间：2012-05-03T11:47:30.820
> 
> 标签：sql, sql-server, tsql, stored-procedures, sql-function

我有一张这样的桌子：

```
 type          load             total
    -------------------------------------
Default           base             26.2
Default           peak             29.625
NonDefault        base             26
NonDefault        peak             29.4 
```

我目前正在尝试`Sum(total)`按负载对总列和组求和，这使得类型列需要聚合。

大多数时间类型是相同的（all `Default`），所以我可以简单地将它添加到分组中，但有时它不是（如示例中所示）。我希望能够聚合此列，以便如果两种类型都显示 (`Default`和`NonDefault`)，那么我希望聚合输出`Default`所有列，这将允许我继续进行分组。

我意识到这可能是自定义功能的工作？或者有没有更好的方法来压缩这个专栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:45:58.030

```
select min(type) as type,
       load,
       sum(total) as total
from T
group by load 
```

[SQL小提琴](http://sqlfiddle.com/#!3/192a8/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:14:57.233

```
select 
       sum(total), 
       min(type) 
from table 
group by load 
```

# c# - Json with .NET and C#?

> ID：10430726
> 
> 赞同：3
> 
> 时间：2012-05-03T11:47:35.283
> 
> 标签：c#, json, visual-studio, .net

I'm having trouble parsing Json string to Objects in C#. I'm using this:

```
JavaScriptSerilizer parser = new JavaScriptSerializer(); 
```

but it doesn't recognize the JavaScriptSerilizer, and I can't add this:

```
using System.Web.Script.Serialization; 
```

but it returns an error, not recognizing the "Script" in "System.Web", and I added "System.Web" in the References. Also, I found "System.Web.Extensions.dll" in "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\", added it as a Reference but I get this error:

```
Could not resolve assembly "System.Web.Extensions". The assembly is not in the currently targetet framework... 
```

I searched for the same file in lower version but I couldn't find it.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:48:53.673

[That type](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx) is implemented in `System.Web.Extensions.dll`, not in `System.Web.dll`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:48:58.887

You have to add a reference to `System.Web.Extensions` in your project.

[MSDN: JavaScriptSerializer Class](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

If you look at the MSDN documentation for a class, it tells you which assembly it's in at the top of the page.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:50:32.683

Please add reference to System.Web.Extensions (in System.Web.Extensions.dll) in your project.

# wix - 尝试捆绑 .NET 框架依赖项时，WiX 找不到文件

> ID：10430728
> 
> 赞同：1
> 
> 时间：2012-05-03T11:47:39.210
> 
> 标签：wix, wix3.6, burn

尝试构建依赖于 .NET 4 框架的 Burn 引导程序时，我遇到了一个奇怪的错误。我已经下载了 WiX 设置的源代码并将其包含`NetFx.wxs`在我的项目中，并在链中添加了 PackageGroupRef，但出现以下错误：

> 错误 LGHT0103：系统找不到文件 'dotNetFx40_Full_x86_x64.exe'

文件`Netfx.wxs`：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
    <Fragment>
        <WixVariable Id="WixMbaPrereqPackageId"
                     Value="Netfx4Full" />

        <WixVariable Id="WixMbaPrereqLicenseUrl"
                     Value="NetfxLicense.rtf" />

        <util:RegistrySearch Root="HKLM"
                             Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full"
                             Value="Version"
                             Variable="Netfx4FullVersion" />

        <util:RegistrySearch Root="HKLM"
                             Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full"
                             Value="Version"
                             Variable="Netfx4x64FullVersion"
                             Win64="yes" />

        <PackageGroup Id="Netfx4Full">

            <ExePackage Id="Netfx4Full"
                        Cache="no"
                        Compressed="no"
                        PerMachine="yes"
                        Permanent="yes"
                        Vital="yes"
                        SourceFile="dotNetFx40_Full_x86_x64.exe"
                        DownloadUrl="http://go.microsoft.com/fwlink/?LinkId=164193"
                        DetectCondition="Netfx4FullVersion AND (NOT VersionNT64 OR Netfx4x64FullVersion)" />

        </PackageGroup>
    </Fragment>
</Wix> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T12:42:10.293

在制作 msi 时，您需要在本地存在文件 dotNetFx40_Full_x86_x64.exe。WiX 不会将其打包到 msi 中，并且仅在需要时才会在安装时下载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T20:45:15.357

*[通过使用RemotePayload Element](http://wix.sourceforge.net/manual-wix3/wix_xsd_remotepayload.htm)*`<RemotePayload>`中记录的选项，您实际上可以在没有 dotNetFx40_Full_x86_x64.exe 文件的情况下构建您的包。

# sql-server - 无法创建启用文件流的数据库

> ID：10430731
> 
> 赞同：0
> 
> 时间：2012-05-03T11:48:00.990
> 
> 标签：sql-server, sql-server-2008, sql-server-express, filestream

当我尝试使用以下查询创建具有启用文件流的数据库的简单数据库时：

```
CREATE DATABASE Archive
ON
PRIMARY ( NAME = Arch1,
FILENAME = 'c:\data\archdat1.mdf'),
FILEGROUP FileStreamGroup1 CONTAINS FILESTREAM( NAME = Arch3,
FILENAME = 'c:\data\filestream1')
LOG ON  ( NAME = Archlog1,
FILENAME = 'c:\data\archlog1.ldf')
GO 
```

那么它会出现以下错误..

```
Msg 5120, Level 16, State 106, Line 1

Unable to open the physical file "c:\data\filestream1". Operating system error -2147024891: "0x80070005(failed to retrieve text for this error. Reason: 1815)". 
```

我确信每个人都对“c:\data\”目录具有完全控制权限。我确信文件流已启用级别 1

我还尝试将 DB 文件位置更改为默认的 sql 数据文件夹，结果相同。

我也尝试手动创建“c:\data\filestream1”目录我会遇到以下错误：

```
Msg 5170, Level 16, State 2, Line 1

Cannot create file 'c:\data\filestream1' because it already exists. Change the file path or the file name, and retry the operation. 
```

如果有人知道如何解决这个问题，请帮助我..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:16:06.273

真正的答案如下：

1.  确保启用 FileStream。开始/程序/SQL Server 2008/配置工具/SQL Server 配置

2.  右键本地服务并转到属性

3.  单击 FileStream 的 Tab，如果未选中，请选中 Enable FileStream for Transact SQL，选中 Enable FileStream for local Files。确保在文本框中指定了所需的 SQLSERVICE

4.  在 LogOn 选项卡上，确保使用 LOCAL SERVICE 启动服务

5.  点击确定

您的脚本应该能够创建数据库。如果失败，请转到控制面板/管理工具/服务/

查找所需的 SQL Server，确认登录是本地服务，并选中“允许此服务与桌面交互”复选框。

# ios - 如何将使用 Interface Builder 制作的视图显示为 UIPopoverController？

> ID：10430734
> 
> 赞同：4
> 
> 时间：2012-05-03T11:48:12.380
> 
> 标签：ios, uiview, interface-builder, uipopovercontroller

我想在 Interface Builder 中安静地设计我的视图，然后能够将它们动态地显示为 UIPopoverController。

我找到了 Ray Wenderlich 的[这个宝贵教程](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)，但我无法将其扩展到我的需要。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T12:39:32.893

这是我通常的做法：假设我有一个父视图控制器，我想在其中显示弹出框。我将弹出控制器声明为该 VC 的属性（@property (nonatomic, retain) UIPopoverController* popOverController;）

使用新视图控制器呈现弹出框的代码，我们称之为 ViewController2，就是这个

```
ViewController2* viewController2 = [[ViewController2 alloc] initWithNibName:@"ViewController2"  bundle:nil];

self.popOverController = [[UIPopoverController alloc] initWithContentViewController:viewController2];

popOverController.popoverContentSize = CGSizeMake(350, 216); //or whatever size you need

//this will present the view controller from the sender's frame, assuming this code is used inside an IBAction 
//and the popover's arrow will point down
[popOverController presentPopoverFromRect:[sender frame] inView:self.view  permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 

[viewController2 release];

[popOverController release]; 
```

差不多就是这样...如果您遇到任何问题，我会尽力为您提供更多信息。

PS 我并不是说这是最好的方法，我在 iO 方面的经验不到一年，但这就是我们通常在我工作的地方这样做的方式

# mysql - 具有不同 where 条件的多个内部连接

> ID：10430738
> 
> 赞同：2
> 
> 时间：2012-05-03T11:48:22.317
> 
> 标签：mysql, sql, select, join, inner-join

我目前正在使用以下查询通过 INNER JOIN 跨多个表执行搜索。

```
 SELECT title, m2.txt1 AS teaser, inputdat, db_file.*
       FROM db_item 
            INNER JOIN db_itemv AS m1 USING(id_item) 
            INNER JOIN db_itemf USING(id_item) 
            INNER JOIN db_itemd USING(id_item) 
            INNER JOIN db_itemv AS m2 USING(id_item)
       WHERE type=15 AND m1.fldnr='12' 
AND m1.indik='b' AND m1.txt1s='en'
 AND visibility=0 AND inputdat>'2005-11-02' AND m2.fldnr='123'
       GROUP BY title
       ORDER BY inputdat DESC
       LIMIT 0,100 
```

db_itemv (m1, m2) 的列命名为：

```
ID   id_item   fldnr   indik   txt1 
```

一个 id_item 可能存在于多行中。

我的问题是， m2.fldnr='123' 并不总是存在，因此它会踢出整行。但是我想保留该行并在该行中不存在该列时保持该列为空。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:51:53.653

全部替换`inner join` 为`left outer join`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T12:23:00.423

我认为这里有几个问题，所以在我解决这些问题时请耐心等待:)

我同意您需要使用 @Jeurgen`LEFT JOIN`而不是`INNER JOIN`，这将使您能够检索您正在搜索的所有行，包括那些在`m2`.

但是，由于您的 where 子句明确指出只给我具有`m2.fldnr`等于“123”的值的数据，那么您没有任何不匹配`m2`行的行是正确的，因为它们不符合您的标准。

我认为您要做的是从前四个表中提取所有数据，然后只提取`m2`包含“123”的表中的数据，如果是这种情况，那么您需要重新定位您的`m2.fldnr`过滤器，并处理那些丢失的行...

因此，我的查询版本如下 - 这尚未经过测试，因为我没有您的结构的示例数据，但请尝试一下，并在需要时进行更改；

```
SELECT title, m2.txt1 AS teaser, inputdat, db_file.*
FROM db_item 
    INNER JOIN db_itemv AS m1 USING(id_item) 
    INNER JOIN db_itemf USING(id_item) 
    INNER JOIN db_itemd USING(id_item) 
    LEFT JOIN  db_itemv AS m2 
      ON db_item.id_item = m2.id_item
      AND ( m2.fldnr = '123' OR m2.fldnr IS NULL )
WHERE type=15 
    AND m1.fldnr = '12' 
    AND m1.indik = 'b'
    AND m1.txt1s = 'en'
    AND visibility = 0 
    AND inputdat > '2005-11-02' 
GROUP BY title
ORDER BY inputdat DESC 
```

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:59:36.320

我认为您应该`LEFT JOIN`改用`INNER JOIN db_itemv AS m2` 它，即使`db_itemv`返回 NULL 也应该返回所有其他数据。

# php - 相同的字符串加盐代码给出不同的结果

> ID：10430739
> 
> 赞同：2
> 
> 时间：2012-05-03T11:48:27.037
> 
> 标签：php, c++, string, encryption

我在 PHP 和 C++ 中都有一个类，可以简单地采用一个值字符串和盐字符串来为隐私做一些盐渍。这个想法是一个 PHP 脚本将加密一个 C++ 程序接收和解密的字符串。他们使用预先共享的盐串，同步模式。

问题在于似乎相同的逻辑，它们为加密相同的字符串生成了不同的结果。这意味着解密字符串的任一端都不会导致给出它的原始字符串。

这可能是我错过或犯错的非常简单的事情。或者可能它与使用字符编码的 PHP 有关，因为 C++ 是原始比特流。PHP 脚本设置为使用纯文本输出，使用“us-ascii”编码。

这是 PHP 类：

```
define( 'NUM_STRINGS', 256 );

class CTwEncryption
{
    function Crypt( $szValue, $szSalt )
    {
        $iValueSize = (int)strlen( $szValue );
        $iSaltSize  = (int)strlen( $szSalt );

        $szStrings  = array();
        $szKeys     = array();

        $j = 1;

        // Init array of 0-255
        for ( $i = 0; $i < NUM_STRINGS; $i++ )
            $szStrings[ $i ] = $i;

        // Init array of 0-255 with a calculated char value
        for ( $i = 0; $i < NUM_STRINGS; $i++ )
        {
            if ( $j > $iSaltSize )
                $j = 1;

            $szKeys[ $i ] = ord( substr( $szSalt, $j, 1 ) );
            $j++;
        }

        // Shuffle the array values around to give a random value
        $j = 0;
        for ( $i = 0; $i < NUM_STRINGS; $i++ )
        {
            $j = ( $j + $szStrings[ $i ] + $szKeys[ $i ] ) % NUM_STRINGS;

            $szTemp = $szStrings[ $i ];
            $szStrings[ $i ] = $szStrings[ $j ];
            $szStrings[ $j ] = $szTemp;
        }

        // Encrypt/decrypt the string
        $szReturnValue = null;
        $i = 0;
        $j = 0;

        for ( $x = 0; $x < $iValueSize; $x++ )
        {
            $i = ( $i + 1 ) % NUM_STRINGS;
            $j = ( $j + $szStrings[ $i ] ) % NUM_STRINGS;

            $szTemp = $szStrings[ $i ];
            $szStrings[ $i ] = $szStrings[ $j ];
            $szStrings[ $j ] = $szTemp;

            $t = ( $szStrings[ $i ] + ( $szStrings[ $j ] % NUM_STRINGS ) ) % NUM_STRINGS;
            $y = $szStrings[ $t ];

            $cCrypt = chr( substr( $szValue, $x, 1 ) ^ $y );
            $szReturnValue .= $cCrypt;
        }

        // Return encrypted/decrypted string
        return $szReturnValue;
    }
} 
```

这是 C++ 类：

```
#define NUM_STRINGS 256

class CTwEncryption
{
private:
    char    *szWorking;

public:
    CTwEncryption()     { szWorking = NULL; };
    ~CTwEncryption()    { if ( szWorking != NULL ) { delete szWorking; szWorking = NULL; } };

    char *Crypt( const char szValue[], const char szSalt[] )
    {
        const int iValueSize = (int)strlen( szValue );
        const int iSaltSize = (int)strlen( szSalt );

        if ( iValueSize == 0 || iSaltSize == 0 )
            return NULL;

        int j = 1;

        char *szStrings[ NUM_STRINGS ];
        char *szKeys[ NUM_STRINGS ];

        // Init array of 0-255
        for ( int i = 0; i < NUM_STRINGS; i++ )
        {
            char *szString = new char[ iValueSize + 1 ];

            itoa( i, szString, 10 );
            szString[ iValueSize ] = 0;

            szStrings[ i ] = szString;
        }

        // Init array of 0-255 with a calculated char value
        for ( int i = 0; i < NUM_STRINGS; i++ )
        {
            char *szKey = new char[ iValueSize + 1 ];

            if ( j > iSaltSize )
                j = 1;

            itoa( (int)( szSalt[ j ] ), szKey, 10 );
            szKey[ iValueSize ] = 0;

            szKeys[ i ] = szKey;
            j++;
        }

        // Shuffle the array values around to give a random value
        j = 0;
        for ( int i = 0; i < NUM_STRINGS; i++ )
        {
            j = ( j + atoi( szStrings[ i ] ) + atoi( szKeys[ i ] ) ) % NUM_STRINGS;

            char *szTemp = szStrings[ i ];
            szStrings[ i ] = szStrings[ j ];
            szStrings[ j ] = szTemp;
        }

        // Encrypt/decrypt the string
        szWorking = new char[ iValueSize + 1 ];
        for ( int i = 0; i <= iValueSize; i++ )
            szWorking[ i ] = 0;

        int i = 0;
        j = 0;

        for ( int x = 0; x <= iValueSize; x++ )
        {
            i = ( i + 1 ) % NUM_STRINGS;
            j = ( j + atoi( szStrings[ i ] ) ) % NUM_STRINGS;

            char *szTemp = szStrings[ i ];
            szStrings[ i ] = szStrings[ j ];
            szStrings[ j ] = szTemp;

            int t = ( atoi( szStrings[ i ] ) + ( atoi( szStrings[ j ] ) % NUM_STRINGS ) ) % NUM_STRINGS;
            int y = atoi( szStrings[ t ] );

            char cCrypt = char( (int)( szValue[ x ] ) ^ y );
            szWorking[ x ] = cCrypt;
        }

        // Clean dynamic memory
        for ( int i = 0; i < NUM_STRINGS; i++ )
        {
            delete szStrings[ i ];
            delete szKeys[ i ];

            szStrings[ i ] = NULL;
            szKeys[ i ] = NULL;
        }

        // Return encrypted/decrypted string
        szWorking[ iValueSize ] = 0;
        return szWorking;
    }
}; 
```

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:59:25.463

我不确定，但也许使用`mb_*`函数会有所帮助：

*   而不是`strlen`使用`mb_strlen`
*   而不是`substr`使用`mb_substr`

要么只给它值，要么给它编码（但`mb_*`如果没有提供，每个函数都应该检查字符串编码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:57:29.857

想通了。看起来我需要通过 HTTP PUT 请求将输入发送到 PHP 脚本，并使用 fopen("php://input", "rb") 读取它。看起来 PHP 没有以二进制安全的方式处理任何东西。同样在 C++ 和 PHP 上，我都将每个字符视为一个整数，这应该允许在二进制安全模式下正确处理 UTF-32 字符串。

这是我的 C++ 类，我在“twencrypt.h”中有我的：

```
#ifndef TWCRYPT_H
#define TWCRYPT_H

/***
*
*   Two-way string encryption
*   This will encrypt/decrypt a string using a salt.
*
*   -AdamR
*
****/

#define NUM_STRINGS 256

class CTwEncryption
{
private:
    char    *szWorking;

public:
    CTwEncryption()     { szWorking = NULL; };
    ~CTwEncryption()    { if ( szWorking != NULL ) { delete szWorking; szWorking = NULL; } };

    char *Crypt( const char szValue[], const char szSalt[] )
    {
        const int iValueSize = (int)strlen( szValue );
        const int iSaltSize = (int)strlen( szSalt );

        if ( iValueSize < 1 || iSaltSize <  1 )
            return NULL;

        int j = 1;

        int iChars[ NUM_STRINGS ];
        int iKeys[ NUM_STRINGS ];

        // Init array of 0-255
        for ( int i = 0; i < NUM_STRINGS; i++ )
            iChars[ i ] = i;

        // Init array of 0-255 with a calculated char value
        for ( int i = 0; i < NUM_STRINGS; i++ )
        {
            if ( j > iSaltSize )
                j = 1;

            iKeys[ i ] = szSalt[ j ];
            j++;
        }

        // Shuffle the array values around to give a random value
        j = 0;
        for ( int i = 0; i < NUM_STRINGS; i++ )
        {
            j = ( j + iChars[ i ] + iKeys[ i ] ) % NUM_STRINGS;

            int iTemp = iChars[ i ];
            iChars[ i ] = iChars[ j ];
            iChars[ j ] = iTemp;
        }

        // Encrypt/decrypt the string
        szWorking = new char[ iValueSize + 1 ];
        for ( int i = 0; i <= iValueSize; i++ )
            szWorking[ i ] = 0;

        int i = 0;
        j = 0;

        for ( int x = 0; x <= iValueSize; x++ )
        {
            i = ( i + 1 ) % NUM_STRINGS;
            j = ( j + iChars[ i ] ) % NUM_STRINGS;

            int iTemp = iChars[ i ];
            iChars[ i ] = iChars[ j ];
            iChars[ j ] = iTemp;

            int t = ( iChars[ i ] + ( iChars[ j ] % NUM_STRINGS ) ) % NUM_STRINGS;
            int y = iChars[ t ];

            char cCrypt = char( (int)( szValue[ x ] ) ^ y );
            szWorking[ x ] = cCrypt;
        }

        // Return encrypted/decrypted string
        szWorking[ iValueSize ] = 0;
        return szWorking;
    }
};

#endif 
```

由于它返回一个 char 指针，我建议您使用 strcpy() 将其放在安全的地方。这是一个示例，请记住完全相同的代码也用于解密字符串。

```
const char *szString = "My string to encrypt";
const char *szSalt   = "Some salt here :D";
int iStringSize      = (int)strlen( szString );

char *szEncrypted = new char( iStringSize ) + 1 );
CTwEncryption *pTwCrypt = new CTwEncryption();
strcpy( szEncrypted, pTwCrypt->Crypt( szString, szSalt );
szEncrypted[ iStringSize ] = 0;
delete pTwCrypt; 
```

这是我的 PHP 类：

```
<?php
    define( 'NUM_STRINGS', 256 );

    class CTwEncryption
    {
        function Crypt( $szValue, $szSalt )
        {
            $iValueSize = strlen( $szValue );
            $iSaltSize  = strlen( $szSalt );

            if ( $iValueSize == 0 || $iSaltSize == 0 )
                return null;

            $j = 1;

            $iChars = array();
            $iKeys  = array();

            // Init array of 0-255
            for ( $i = 0; $i < NUM_STRINGS; $i++ )
                $iChars[ $i ] = $i;

            // Init array of 0-255 with a calculated char value
            for ( $i = 0; $i < NUM_STRINGS; $i++ )
            {
                if ( $j > $iSaltSize )
                    $j = 1;

                $iKeys[ $i ] = ord( $szSalt[ $j ] );
                $j++;
            }

            // Shuffle the array values around to give a random value
            $j = 0;
            for ( $i = 0; $i < NUM_STRINGS; $i++ )
            {
                $j = ( $j + $iChars[ $i ] + $iKeys[ $i ] ) % NUM_STRINGS;

                $iTemp = $iChars[ $i ];
                $iChars[ $i ] = $iChars[ $j ];
                $iChars[ $j ] = $iTemp;
            }

            // Encrypt/decrypt the string
            $szReturnValue = null;
            $i = 0;
            $j = 0;

            for ( $x = 0; $x < $iValueSize; $x++ )
            {
                $i = ( $i + 1 ) % NUM_STRINGS;
                $j = ( $j + $iChars[ $i ] ) % NUM_STRINGS;

                $iTemp = $iChars[ $i ];
                $iChars[ $i ] = $iChars[ $j ];
                $iChars[ $j ] = $iTemp;

                $t = ( $iChars[ $i ] + ( $iChars[ $j ] % NUM_STRINGS ) ) % NUM_STRINGS;
                $y = $iChars[ $t ];

                $iValue = str_split( $szValue );
                for ( $c = 0; $c < $iValueSize; $c++ )
                    $iValue[ $c ] = ord( $iValue[ $c ] );

                $cCrypt = chr( $iValue[ $x ] ^ $y );
                $szReturnValue .= $cCrypt;
            }

            // Return encrypted/decrypted string
            return $szReturnValue;
        }
    }

    $c_TwEncryption = new CTwEncryption;
?> 
```

这个更容易使用。很简单：

```
$szString    = "My string to hide lollercoaster";
$szSalt      = "super duper password of doom";

$szEncrypted = $c_TwEncryption->Crypt( $szString, $szSalt );
$szDecrypted = $c_TwEncryption->Crypt( $szEncrypted, $szSalt ); 
```

请记住，您不应通过 HTTP GET 或 POST 请求定义 $szString 或 $szSalt（PHP 端）。安全并使用 PUT 请求，并像这样阅读它：

```
$szString = null;
$hInData = fopen( "php://input", "rb" ) || die( "Unable to open HTTP PUT handle." );

if( $hInData != null )
{
    while ( $bData = fread( $hRequest, 1024 ) )
        $szString .= $bData;
}
else
    die( "Unable to read HTTP PUT data." );

fClose( $hInData ) || die( "Unable to close HTTP PUT handle." );

if( $szString == null || empty( $szString ) )
    die( "No data read from HTTP PUT stream." ); 
```

享受。

# ant - ant -f build.xml: exec 返回: 2 with phpunit?

> ID：10430740
> 
> 赞同：0
> 
> 时间：2012-05-03T11:48:27.497
> 
> 标签：ant, jenkins, phpunit

我将按照[本](http://jenkins-php.org/)指南将 PHP 项目与 Jenkins 集成。

这是我的[`build.xml`文件](https://gist.github.com/2585120)

这是运行时[的输出](https://gist.github.com/2585144)`ant -f build.xml`：

```
phpunit:
     [exec] PHPUnit 3.6.10 by Sebastian Bergmann.

     [exec] Usage: phpunit [switches] UnitTest [UnitTest.php]
     [exec] phpunit [switches] <directory>

     [exec] --log-junit <file> Log test execution in JUnit XML format to file.
     [exec] --log-tap <file> Log test execution in TAP format to file.
     [exec] --log-json <file> Log test execution in JSON format.

     [exec] --coverage-clover <file> Generate code coverage report in Clover XML format.
     [exec] --coverage-html <dir> Generate code coverage report in HTML format.
     [exec] --coverage-php <file> Serialize PHP_CodeCoverage object to file.
     [exec] --coverage-text=<file> Generate code coverage report in text format.
     [exec] Default to writing to the standard output
     [exec] ... 
```

.

第 132 行附近的配置片段：

```
 <target name="phpunit" description="Run unit tests with PHPUnit">
  <exec executable="phpunit" failonerror="true"/>
 </target> 
```

phpunit/PHPUnit 已安装：

```
pear list -c phpunit
Installed packages, channel pear.phpunit.de:
============================================
Package            Version State
File_Iterator      1.3.1   stable
PHPUnit            3.6.10  stable
PHPUnit_MockObject 1.1.1   stable
PHP_CodeBrowser    1.0.2   stable
PHP_CodeCoverage   1.1.2   stable
PHP_Invoker        1.1.0   stable
PHP_Timer          1.0.2   stable
PHP_TokenStream    1.1.3   stable
Text_Template      1.1.1   stable
phpcpd             1.3.5   stable
phploc             1.6.4   stable 
```

* * *

**回复@oers Thu May 3 20:31:50 ICT 2012：**

我已将 build.xml 文件编辑为如下内容：

```
 <target name="phpunit" description="Run unit tests with PHPUnit">
  <exec executable="phpunit" failonerror="true"/>
    <arg line="--log-junit ${basedir}/build/logs/phpunit.xml serving" />
 </target> 
```

但没有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:51:35.367

> 我已将 build.xml 文件编辑为如下内容：

您的 build.xml 在树结构中有错误。

```
--- build.xml
+++ build.xml.new
@@ -1,4 +1,5 @@
 <target name="phpunit" description="Run unit tests with PHPUnit">
-  <exec executable="phpunit" failonerror="true"/>
+  <exec executable="phpunit" failonerror="true">
     <arg line="--log-junit ${basedir}/build/logs/phpunit.xml serving" />
+  </exec>
  </target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:40:30.480

正如您从输出中看到的（**Usage: ...**），`phpunit`需要一些参数才能正确执行。`<exec executable="phpunit" failonerror="true"/>`只会打印帮助并退出（就像直接从命令行`phpunit`调用）。`phpunit`

在[phpunit 的官方指南中，](http://www.phpunit.de/manual/3.4/en/build-automation.html)您被告知要像这样运行 phpunit：

```
 <target name="phpunit">
  <exec dir="${basedir}" executable="phpunit" failonerror="true">
   <arg line="--log-xml ${basedir}/build/logs/phpunit.xml MoneyTest" />
  </exec>
 </target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T20:05:02.793

就我而言，我遇到了这个问题，因为我设置了一个错误 BaseDir，基本目录应该设置为与项目路径相同或与 phpunit.xml.dist 相同的路径。

无论如何，您也可以像这样在 build.xml 中指定 phpunit 配置文件路径

```
<target name="phpunit">
   <exec dir="${basedir}" executable="phpunit" failonerror="true">
       <arg line="-c /your/path/to/phpunit.xml.dist" />
       <arg line="--log-xml ${basedir}/build/logs/phpunit.xml MoneyTest" />
  </exec>
</target> 
```

# jquery - jQuery - 如何在特定表格行中选择一个特定字段？

> ID：10430758
> 
> 赞同：0
> 
> 时间：2012-05-03T11:49:14.613
> 
> 标签：jquery, asp.net-mvc

我想**在我的表中的特定行中选择字段 @Html.HiddenFor(modelItem => item.FromUserID)。**

我**知道我可以通过以下方式在表中选择一行： var tableRow = $("#row-" + contactInfoRequestId);**

**但是我如何设法选择字段 FromUserID 并获取其内容？**

```
@foreach (var item in Model)
{
<tr id="row-@item.ContactInfoRequestID">
    <td>

            </td>

    <td>
        @Html.HiddenFor(modelItem => item.FromUserID)
            </td>

    <td>

            </td>
</tr>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:56:33.857

添加一个类：

```
<td class="fromuserid">
    @Html.HiddenFor(modelItem => item.FromUserID)
</td> 
```

并相应地选择：

```
var content = $("#row-" + contactInfoRequestId+" .fromuserid").html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:59:27.443

[`:nth-child`](http://api.jquery.com/nth-child-selector/)如果您想选择第二个`td`但不想在 HTML 中添加类或 ID，则jQuery非常适合：

```
 var secondTableCell = $("#row-" + contactInfoRequestId + " td:nth-child(2)"); 
```

这将选择您指定的行中的第二个 td。

要获取它的内容，只需使用 jQuery 的[`.text()`](http://api.jquery.com/text/)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:08:10.393

如果您使用的是 HTML 5，则可以使用数据属性而不是隐藏输入。

```
<td data-fromUserID="@item.FromUserID">

In jquery: 

var fromUserID = $("td").attr("data-fromUserID"); 
```

# sql - oracle SQL语句中结合order by子句使用rownum

> ID：10430762
> 
> 赞同：4
> 
> 时间：2012-05-03T11:49:19.423
> 
> 标签：sql, oracle

**以下哪两条 SQL 语句将返回所需的结果集**（即 Status=0 和 StartTimes 最高的十行）？

**两条语句是否总是返回相同的结果集**（StartTime 是唯一的）？

```
SELECT * 
FROM MyTable 
WHERE Status=0 
AND ROWNUM <= 10 
ORDER BY StartTime DESC

SELECT * 
FROM (
    SELECT * 
    FROM MyTable 
    WHERE Status=0 
    ORDER BY StartTime DESC
) 
WHERE ROWNUM <= 10 
```

**背景**

我的 DBAdmin 告诉我，第一条语句将*首先*将表限制为 10 行，然后按 StartTime 对这些随机行进行排序，这绝对不是我想要的。从我在[那个答案](https://stackoverflow.com/a/10429914/220636)中学到的，第二条语句的 order by 子句是多余的，可以被优化器删除，这也不是我想要的。

* * *

我问了一个关于 SQLite 数据库查询中的子句的[类似问题](https://stackoverflow.com/q/10429738/220636)`limit`，并且有兴趣了解与 oracle db 一起使用的上述语句（使用`limit`Vs ）的任何差异。`rownum`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T12:27:33.413

您的第二个查询将起作用

因为在第一个中，选择状态为 0 的前十行，然后按顺序完成，在这种情况下，获取的前十行不需要是最高顺序

# algorithm - 数字与重量的组合

> ID：10430770
> 
> 赞同：-1
> 
> 时间：2012-05-03T11:49:33.317
> 
> 标签：algorithm, combinations

我有一个数组/数字列表。每个数字都有一定的优先级/重要性。

我需要一种生成所有数字组合的算法，但从最重要的数字开始。

```
e.g. [number, priority]: [1,1], [2,3], [3,2]. Highest priority is 1. 
```

组合：

```
1, 3, 2, 1 1, 1 3, 3 3, 3 1, 1 2, 3 2, 2 1, 2 2, 1 1 1, 1 1 3, 1 3 1... 
```

知道怎么做吗？当然，我想生成一定数量的组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:57:55.030

似乎您正在寻找所有组合而不是所有排列（我没有看到任何重复的数字集，因此您只关心数字集而不关心该集合中的顺序）。

这是给您的提示 - 首先写下将产生数字 1 到 n 的所有可能组合的代码，然后在这些数字和您给出的考虑权重的数字之间进行简单的双射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:00:23.937

我将答案更改为示例代码，这样您甚至不需要递归。您必须首先按优先级对元素进行排序。该示例是在 Perl 中，它与 Pseudocode 相距不远

```
@numbers = (1, 3, 2, 4);

push(@result, @numbers);
push(@working_list, @numbers);
for ($i = 1; $i < @numbers; $i++) {  # We loop exactly for the length of the array (-1 because the first iteration is already inside)
    my @result_list;
    for $result (@working_list) { # get the result of the last iteration of $i
        for $number (@numbers) { # iterate the numbers
            push (@result_list, "$result $number");  # adding the numbers
        }
    }

    push(@result, @result_list); # push the last result to final result list
    undef @working_list;
    push(@working_list, @result_list); # use the last result as a start point for next $i iteration

}

print join(', ', @result); 
```

# iphone - 应用程序本身的应用程序名称

> ID：10430771
> 
> 赞同：0
> 
> 时间：2012-05-03T11:49:41.850
> 
> 标签：iphone, ios, cocoa-touch, user-interface

在应用程序本身中写入应用程序名称是一种好习惯吗？在导航栏或状态栏下方说？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:53:13.063

您可以在导航栏中写下您的应用名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:53:49.790

我认为好的做法是将应用程序徽标放在导航栏上。但是对于开发者来说最好的事情是在这里阅读适用于 iOS 的苹果指南

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:53:57.513

是的，在应用程序的第一个视图上写下应用程序的名称是一个很好的做法。您可以稍后根据当前视图更改名称。

# html - 在 JQM 中创建按钮的正确方法

> ID：10430772
> 
> 赞同：0
> 
> 时间：2012-05-03T11:49:46.823
> 
> 标签：html, jquery-mobile

创建按钮的正确方法是什么？第一种方法不行...

```
<div class="buttonContainer">
   <button type="submit" onclick="moSucess()" >Sign In</button>
</div>
<a id="sincData" href="#sincPage" data-role="button" onclick="moSucess()">Submeter</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:42:15.443

如果您尝试使用`a`标记创建样式化 JQM 按钮，请查看[此处的文档](http://jquerymobile.com/demos/1.0/docs/buttons/index.html)以获取此[jsfiddle 示例](http://jsfiddle.net/shanabus/Z2saQ/)。

```
<a href="index.html" data-role="button">Link button</a> 
```

# android - 自定义视图中的文本视图

> ID：10430776
> 
> 赞同：0
> 
> 时间：2012-05-03T11:49:53.517
> 
> 标签：android, android-activity

我想把 a`TextView`放入 a`CustomView`中。我已经使用`findViewById`. 我`TextView`直接插入到xml中。现在我想在进行触摸事件时添加文本。里面`ViewActivity`我放了这个。

```
public void getTextv(TextView tv)
    {
        tv1=tv;
    }
    int hit;
    public void setText()
    {    
             if(touch==true)
        tv1.setText(hit);
    } 
```

在我放的主要里面`ViewActivity.getTexttv(tv);`

然后，每当添加文本时，我都会收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:58:52.737

利用

```
tv.setText(hit+""); 
```

由于 textview 还接受一个整数值，它认为它是 R.java 文件中的一个 id。所以，你会得到如下错误：

> 找不到资源 id 0x02

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:52:57.687

您的错误可能是空指针异常吗？你不应该在 getTextv(..) 中设置 touch=true 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:54:43.047

tv.setText(String.valueOf(hit))

您应该首先将其解析为字符串。

对于 setText(int)，参数应该是一个字符串资源。

# c - 在 c 数组中查询

> ID：10430778
> 
> 赞同：-2
> 
> 时间：2012-05-03T11:50:17.900
> 
> 标签：c

```
 int a[2]={1210,15};

    printf("%d",a[33] ); 
```

输出

```
1073828132 
```

`a[33]`为什么即使数组元素不存在，当我尝试打印时它也不会抛出错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T11:50:54.703

因为C不做边界检查。

您将只是读取[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)中的任意位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:56:22.190

C 中的数组只是指针周围的一种语法糖。

`int a[2]`为 2 个 int 的数组创建空间并初始化。

但`a[33]`实际上`*(a + 33)`，`a`只是用一个`int *`指向的第一个元素`a`。取消引用数组时，C 不关心数组初始化的大小。

# split - BizTalk：如何根据具有公分母的子节点拆分传入消息

> ID：10430780
> 
> 赞同：1
> 
> 时间：2012-05-03T11:50:21.267
> 
> 标签：split, message, biztalk

我目前正在开发一个需要拆分传入消息的 BizTalk 实现。到目前为止，我能找到的唯一示例使用信封模式，该模式将为传入消息的每个子节点创建一条消息。

然而，在我收到的信息中，这还不够。我需要拆分消息，以便具有相同标识符的所有子记录成为一条消息。

简化后，入站消息如下所示：

```
<Root>
    <Child>
        <ID>1</ID>
    </Child>
    <Child>
        <ID>1</ID>
    </Child>
    <Child>
        <ID>2</ID>
    </Child>
    <Child>
        <ID>2</ID>
    </Child>
</Root> 
```

然而，显然有更多的数据，而不仅仅是一个 ID。我想要的是将其拆分为相同的结构，但每个 ID 生成一条消息，因此结果如下所示：

### 消息 1

```
<Root>
    <Child>
        <ID>1</ID>
    </Child>
    <Child>
        <ID>1</ID>
    </Child>
</Root> 
```

### 消息 2

```
<Root>
    <Child>
        <ID>2</ID>
    </Child>
    <Child>
        <ID>2</ID>
    </Child>
</Root> 
```

除此之外，我不能确定 ID 是否会逐渐增加，但它们也可能会在消息中被打乱。ID也没有最小或最大出现；可能有一个，可能有50个。

所以我的问题如下：如何以最好的方式解决这个问题？我可以将信封用于这种“高级”分批程序吗？我是否需要创建自定义管道组件，或者还有其他秘密吗？;)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:24:08.073

我认为这超出了信封可以为您做的事情。您可以在管道组件中执行此操作。

您必须创建所需的每条消息，然后将其添加到管道组件管理的队列中。然后通过管道组件实现的 IDisassemblerComponent 接口的“GetNext”方法提供对该队列的访问。可以在[http://www.codeproject.com/KB/biztalk/btsunzipdisassembler/UnzipDisassembler_src.zip](http://www.codeproject.com/KB/biztalk/btsunzipdisassembler/UnzipDisassembler_src.zip)上的 CodeProject 上找到执行此类操作来处理 zip 文件内容的示例。只需将处理 zip 文件的代码替换为处理消息的代码即可

请记住，在处理您的消息与“DOM”时，建议使用流式传输。可以在[http://www.microsoft.com/en-us/download/details.aspx?id=20375](http://www.microsoft.com/en-us/download/details.aspx?id=20375)找到开发流式管道组件的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:18:25.163

您可能会查看[message debatching](http://social.msdn.microsoft.com/Forums/en-US/biztalkgeneral/thread/9cbcc7e8-ad18-4297-b5d5-78e5ef75cf0d)。该链接中的编排建议可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:34:44.807

我使用自定义 XSLT 和 [Muenchian 方法] 使用地图做了类似的事情：http: [//www.jenitennison.com/xslt/grouping/muenchian.html](http://www.jenitennison.com/xslt/grouping/muenchian.html)

它本身并不分批，但您可以将其与包络模式一起使用，并通过环回端口重新提交消息或从编排执行接收管道以执行实际的分批。

# javascript - IE8 在 jQuery 追加操作后在 div 中不显示任何内容，即使 div 有内容（技术上）？

> ID：10430786
> 
> 赞同：1
> 
> 时间：2012-05-03T11:50:35.387
> 
> 标签：javascript, jquery, internet-explorer-8

我遇到了 IE 问题，我似乎无法让 div 在 IE8 中显示内容，即使当我再次要求返回 div 的内容时，它似乎已被填充。在 Chrome、Safari、Firefox 上运行良好。只是不在IE中。

[http://jsfiddle.net/Vb6nK/](http://jsfiddle.net/Vb6nK/)

开发网站在这里（如果有图片，您可以看到它的样子）：[http ://www.antarctic-design.co.uk/oboe/](http://www.antarctic-design.co.uk/oboe/)

非常感谢，

埃蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:12:02.163

我认为这是 - 奇怪的是 - 你的 CSS。

在 CSS 中取出这一行

```
.information_block {
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa',endColorstr='#eaeaea')";
} 
```

当我删除该行时，jsfiddle 对我有用

**编辑**您可以删除`-ms-`前缀，过滤器不需要在 IE8 中工作

# c# - 不支持 Linq-to-EF DateTime.ToLocalTime

> ID：10430791
> 
> 赞同：9
> 
> 时间：2012-05-03T11:50:53.647
> 
> 标签：c#, sql, linq, datetime, linq-to-entities

`DateTime.ToLocalTime`Linq to EF 不支持。

有什么选择？我快没主意了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T12:20:51.620

不要在 Linq 查询中使用 .ToLocalTime() ，而是在参数查询之外使用相反的转换。

```
var dateUniversal = dateParam.ToUniversalTime();

var query = myTable.Where( t => t.DateTime > dateUniversal ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:27:32.830

通常，您应该在数据库中以 UTC 格式存储日期和时间。

将代码中的任何本地日期/时间转换为 UTC，然后再将它们存储到数据库中。

同样，如果您需要在数据库中显示来自 UTC 的本地时间，则在数据库获取后将其转换为代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T16:41:39.307

我使用了 Extensions 的组合加上依赖于从我的应用程序前端传递的值在 LocalTime 中。所以，如果我有两个日期时间......比如......报告的开始日期和结束日期参数，我会把它们放在那里......让用户在 LocalTime 提交......然后在我的控制器的后端部分.. 我会在我的 Linq to Entities 查询中使用 sdate 和 edate 变量。我将静态扩展方法放入静态帮助器类中。对不起，我迟到了一年多。:)

```
 DateTime sdate = CalcHelper.AbsoluteStart(model.StartDate);
    DateTime edate = CalcHelper.AbsoluteEnd(model.EndDate);

    public static DateTime AbsoluteStart(this DateTime dateTime)
    {
        return dateTime.Date.ToUniversalTime();
    }
    public static DateTime AbsoluteEnd(this DateTime dateTime)
    {
        return AbsoluteStart(dateTime).AddDays(1).AddTicks(-1).ToUniversalTime();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-06T19:57:43.027

如果您从服务器获取时区偏移量，您可能可以使用 EntityFunctions 在 linq 查询中应用偏移量

```
var offset = TimeZoneInfo.Local.BaseUtcOffset.TotalMinutes;
var result = db.Dates.Where(a => 
             EntityFunctions.DiffDays(EntityFunctions.AddMinutes(a.Date, offset), DateTime.Now) == 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T04:34:09.243

你可以这样尝试：

```
var promotions = _promotionService.GetAll(
            x => (DbFunctions.TruncateTime(x.CreatedDate.Value) >= viewModel.GTXFromDate.Date)
            && (DbFunctions.TruncateTime(x.CreatedDate.Value) <= viewModel.GTXToDate.Date)); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-07-07T08:25:52.490

**将 DateTime 转换为 String 进行比较**，例如：

```
const string DATE_FORMAT = "yyyy/MM/dd";
var query = sampleTable.Where(x => x.DateTime.ToString(DATE_FORMAT) > DateTime.Now.ToString(DATE_FORMAT)); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-03T11:55:07.057

找到了这个[问题的解决方案](https://stackoverflow.com/questions/823313/linq-to-sql-datetime-values-are-local-kind-unspecified-how-do-i-make-it-utc)

```
public partial class Person { 

  partial void OnLoaded() { 
    this._BirthDate = DateTime.SpecifyKind(this._BirthDate, DateTimeKind.Utc); 
  } 
} 
```

# javascript - 何时在 javascript 中向对象添加新属性时使用“原型”一词？

> ID：10430794
> 
> 赞同：11
> 
> 时间：2012-05-03T11:51:13.750
> 
> 标签：javascript, object, prototype

我不明白在 JavaScript 中何时使用“原型”一词与使用没有“原型”一词的简单“点”表示法。有人可以查看这些代码块并帮助我了解您何时想要使用其中一个吗？

**使用**“原型”：

```
function employee(name,jobtitle)
{
  this.name=name;
  this.jobtitle=jobtitle;
}

var fred=new employee("Fred Flintstone","Caveman");
employee.prototype.salary=null;
fred.salary=20000;
console.log(fred.salary); 
```

**没有**“原型”：

```
function employee(name,jobtitle,salary)
{
  this.name=name;
  this.jobtitle=jobtitle;
  this.salary=salary;
}

var fred=new employee("Fred Flintstone","Caveman", 20000);
console.log(fred.salary); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T12:21:45.817

JavaScript 对象有一个属性，它是指向另一个对象的指针。这个指针是对象的原型。默认情况下，对象实例共享相同的原型：

```
function Employee(name){
  this.name = name;
}

Employee.prototype.company = "IBM";

Employee.prototype.who = function(){
  console.log("My name is", this.name, "I work for", this.company);
}

var bob = new Employee('Bob');
var jim = new Employee('Jim');

// bob and jim are seperate objects, but each is linked to the same 'prototype' object.

jim.who(); // jim doesn't have a property called 'who', so it falls back to it's 'prototype', where who exists
// My name is Jim I work for IBM

bob.who();
// My name is Bob I work for IBM

// Bob leaves IBM for Microsoft
bob.company = "Microsoft"; // bob now has a property called 'company'. The value of which is 'Microsoft', which overrides bob's prototype property of the same name.

bob.who();
// My name is Bob I work for Microsoft

Employee.prototype.company = 'Facebook';

jim.who(); 
// My name is Jim I work for Facebook

bob.who(); // Bob is not affected by the change.
// My name is Bob I work for Microsoft

delete bob.company;

bob.who(); // bob no longer has it's own property 'company', so like jim, it drops down to the prototype object.
// My name is Bob I work for Facebook 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T13:22:23.223

围绕 JS 和继承的问题可能很复杂，但您的问题的答案相对简单。考虑这段代码：

```
 function Klass() { }
 var obj1 = new Klass();
 var obj2 = new Klass(); 
```

现在，如果您向 中添加属性`obj1`，则该属性仅存在于 上`obj1`。同样`obj2`。

如果将属性添加到`Klass`，则该属性同样仅存在于 Klass（函数对象）上。它完全没有`obj1`影响`obj2`。

但是，如果您向 中添加一个属性`Klass.prototype`，则该属性将同时出现在`obj1`and`obj2`以及通过 . 创建的任何未来对象上`new Klass`。如果您随后更改原型上的属性值，则更改后的值将是您在所有这些对象上看到的值。

您可以在函数主体内添加代码`Klass`以将属性添加到`this`; 这将导致任何未来的`Klass`对象获得这些属性。但是每个对象都有自己的副本——它可以在内存方面累加起来，尤其是当属性是方法时——并且这些副本不会受到未来对`Klass`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T11:59:48.850

ES5`Object.create`几乎不再需要麻烦`.prototype`了。

所以，要拿起@Gerry 的例子，你可以像

```
var Mammal = {
    walk: function() {}
};

var Dog = Object.create(Mammal, {
    bark: {
        value: function() {}
    }
}); // create a new object which [[prototype]] refers to Mammal

Dog.walk();
Dog.bark(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T12:19:35.987

`prototype`对象有点难以理解；然而[这篇关于 OOP JavaScript 的文章](http://killdream.github.com/blog/2011/10/understanding-javascript-oop/#sec-3-1)可以帮助阐明一些观点。

简而言之，该`prototype`对象为“接收者”对象提供了蓝图——您所要做的就是将接收者的`prototype`属性指向您的蓝图对象。请注意，您可以拥有任意数量的原型蓝图对象接收者（因此 Car 和 Train 都可以指向一个公共 Vehicle 原型对象）。

您可以在原型对象中自由定义属性和函数，任何接收对象都可以使用它们，例如：

```
var vehiclePrototype = {
    // A property which will be supplied to the recipient
    cost: 0,

    // A method which will be supplied the recipient
    move: function () { 
        // Your prototype can refer to 'this' still.
        console.log("Moving " + this.name);
    };
} 
```

您现在可以创建一个`Car`使用`vechiclePrototype`：

```
// Factory method for creating new car instances.
function createCar(name) {
    // Define the Car's constructor function
    function Car(name) {
        this.name = name;
    }

    // Point the car's prototype at the vechiclePrototype object
    Car.prototype = vechiclePrototype;

    // Return a new Car instance 
    return new Car(name);
}

// Create a car instance and make use of the Prototype's methods and properties
var mustang = createCar(mustang);
mustang.cost = 5000;
mustang.move(); 
```

可以用类似的方式创建一个新的 Train 对象：

```
function createTrain(whilstleSound) {
    // Define the Train's constructor function
    function Train(name) {
        this.whilstleSound = whilstleSound;
    }

    // Point the train's prototype at the vechiclePrototype object
    Train.prototype = vechiclePrototype;

    // Return a new Train instance 
    return new Train(name);
}

var ic125 = new Train("pooop pooop");
ic125.move(); 
```

使用原型继承的一大优点是两者的所有实例都`Car`共享`Train`完全相同的`move`函数（而不是创建同一函数的多个实例），如果这些对象有很多实例，这会导致显着的内存节省。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T12:57:45.870

忽略`new`，忽略`.prototype`它们只是令人困惑的概念。如果您真的想要使用原型继承`Object.create`，但大多数时候继承完全是矫枉过正。（原型继承只能用作优化技术）。

在构建类时，只需创建对象并扩展它们。

```
var Walker = {
    walk: function() {}
}

var Eater = {
    eat: function () {}
}

var Dog = extend({}, Eater, Walker, {
    bark: function () {},
    sniffBehind: function () {}
})

function dog(dogName) {
    return extend({}, Dog, {
        name: dogName
    })
}

var steveTheDog = dog("steve")
console.log(steveTheDog.name === "steve") 
```

使用任何你想要的任意数量扩展函数`_.extend`，`jQuery.extend`, [`pd.extend`](https://github.com/Raynos/pd#pd.extend), 等。

[pd](https://github.com/Raynos/pd)实现`extend`如下

```
function extend(target) {
    [].slice.call(arguments, 1).forEach(function(source) {
        Object.getOwnPropertyNames(source).forEach(function (name) {
            target[name] = source[name]
        })
    })
    return target
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T11:55:06.557

使用原型，您可以以“更清洁”的方式进行扩展，因为您将构造函数内部的逻辑与定义对象的属性和方法分开。

```
var Mammal = function() { ... };
Mammal.prototype = {
  walk: function() { ... }
};

var Dog = function() { ... };

for (var prop in Mammal.prototype) {
  Dog.prototype[prop] = Mammal.prototype[prop];
}

Dog.prototype.bark = function() { ... }; 
```

然而，上面没有原型的可能看起来像这样：

```
var Mammal = function() {
  this.walk = function() { ... };
};

var Dog = function() {
  Mammal.apply(this);
  this.bark = function() { ... };
}; 
```

然而，这种扩展对象的方式与 Underscore.js 等现代 JavaScript 库无关，或者也可以在 jQuery 的帮助下编写得更简洁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-15T13:01:16.077

您可以使用该词`prototype`在应用程序中为特定类型定义一些功能（数组、函数、自定义类型的数量）

例如，您可以使用属性扩展所有数组`sum`：

```
const arrayPrototype = Array.prototype
Object.defineProperty(arrayPrototype, 'sum', { 
   get() { return this.reduce((a,b) => a + b, 0) }
}) 
```

执行完代码块后，所有数组都具有以下属性：

```
console.log([1,3,-1,10].sum) // prints 13 
```

# fancybox - 第二次单击时花哨的框不起作用

> ID：10430795
> 
> 赞同：0
> 
> 时间：2012-05-03T11:51:15.763
> 
> 标签：fancybox

这是我使用的代码

```
eventClick: function(event) {
$.fancybox({
                'transitionIn': 'none',
                'transitionOut': 'none',
                'href': event.url,
    });
        return false;
}, 
```

...........当我第一次点击它时，它会在一个花式框中打开，但是当我再次点击它时，它会移动到一个新页面（event.url）。还有正在使用的工具提示和第一次打开fancybox后它变为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:22:41.280

使用以下代码打开带有 url 的 Fancybox。它应该工作。

```
$('a.yourAnchor').fancybox({ 
    'overlayColor': '#fff', 
    'autoDimensions': true, 
    'hideOnContentClick': false, 
    'scrolling': false 
}); 
```

# mysql - 如何处理一个大的 CSV 文件？

> ID：10430799
> 
> 赞同：0
> 
> 时间：2012-05-03T11:51:22.040
> 
> 标签：mysql, database, file, list, csv

我打算将世界上所有城市的列表添加到我的应用程序中（*顺便说一句*：我正在使用 Ruby、Ruby on Rails 和 MySQL），所以我想使用从[www.maxmind.com](http://www.maxmind.com/app/worldcities)网站下载的 CSV 文件。

但是，我很担心和怀疑，因为解压后的文件在磁盘上大约有*151,1 MB*（！），我应该将所有这些值放入我的数据库中。*您如何建议继续（也适用于 MySQL 索引......）？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:45:56.500

使用 LOAD INFILE 是导入它的唯一方法，但索引和性能考虑将取决于您导入的内容以及您将如何使用它。研究、研究、研究……好的起点是[带有 LOAD DATA INFILE 的大文件](http://www.mysqlperformanceblog.com/2008/07/03/how-to-load-large-files-safely-into-innodb-with-load-data-infile/)

# assembly - ARM7TDMI（GameBoy Advance）上的操作系统相关操作和模式

> ID：10430801
> 
> 赞同：3
> 
> 时间：2012-05-03T11:51:35.930
> 
> 标签：assembly, operating-system, arm, gameboy, game-boy-advance

我想知道GBA的CPU是否可以使用通常为操作系统保留的任何功能，以及如何做到这一点。
例如，我想访问 cpu 显然支持的特权模式，但我不明白如何首先输入它（并修改要由它运行的代码），因为 gba 在用户中启动模式。
更重要的是，我想知道gba有哪些arm扩展，比如协处理器、mmu、mpu等。

我在[cowbite 规范](http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#CPU)参考中读到特权模式确实存在，但没有进一步提及。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:02:50.497

GBA 并没有什么特别之处，刚开始时您处于主管模式，您无需执行任何操作即可到达那里。对于您可能遇到的任何 ARM（即不运行操作系统，例如 linux，并且您是命令行上该操作系统的用户）也是如此。

尽管 ARM 具有带有保护的用户模式，但您不希望看到用于嵌入式应用程序的用户模式。当然不是 ARM7（ARMv4/ARMv4T），它没有缓存、没有 mmu，也没有像 GBA 中那样支持太多协处理器。

我想我回答了这个问题，它根本没有太多，没有 mmu，没有 fpu，它不记得它是否支持任何协处理器指令。这对于大多数 ARM7 来说都是如此，一般来说大多数 ARM。这样想，如果它运行一个成熟的、非 uclinux 的 linux，如 beagleboard 中的 OMAP 和 open-rd 和插件计算机中的 marvells 以及其他板上的 caviums，它有一个 mmu，可能有缓存，一个外部内存控制器等。如果它不运行，如果它只运行 uclinux 或根本不运行 linux，那么它更多的是在嵌入式端，微控制器或微控制器之类的。GBA中的ARM7TDMI绝对属于这一类。NDS 上的 ARM7 和 ARM9 大部分也是如此。

尽管多年来我一直在推荐 gba 作为 ARM 教育平台，但时代在变，闪存车正在消失等。看看 stm32f4 发现板 20 美元。（请参阅我的 github 空间中的 stm32f4d 存储库）它运行 168mhz，有缓存，有一个 fpu，还有微控制器很少有的其他东西。不确定您在寻找什么，但很难以那个价格放弃您所获得的东西，确保您没有获得 gba 获得的按钮和液晶屏幕、图形硬件等...

# php - 序列问题 php glob

> ID：10430814
> 
> 赞同：2
> 
> 时间：2012-05-03T11:52:15.877
> 
> 标签：php

我想在网页中依次显示文件，所以我在 php 中使用了 glob。我希望我的文件以下列方式显示：

```
video1
video2
video3
  .
  .
  .
video9
video10
video11 
```

但我得到的输出为：

```
video1
video10
video11
video2
video3
 ....... 
```

以下是我写的确切逻辑：

```
if ($_GET['name'])
{
        $query = $_GET['name'];
}else{
        $query = "NULL";
}

foreach(glob('video/*'.$query.'*.mp4') as $filename)
{
        $filename = substr($filename, 6);
        echo "<a href=".$server_path."".$filename.">".$filename."</a><br>";
} 
```

请帮帮我，伙计们...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:54:37.917

您可以将自然顺序排序函数[natsort](http://php.net/manual/en/function.natsort.php)用作：

```
$arr = glob('video/*'.$query.'*.mp4');
natsort($arr);
foreach($arr as $filename) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:59:28.443

它不会解决眼前的问题，但至少现在你知道为什么人们将他们的文件命名为：video0001 等等。

这种情况有排序功能。

# java - 是否有任何可能的方式通过 oracle 获取警告消息

> ID：10430816
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:18.333
> 
> 标签：java, oracle

我正在开发 oracle 数据库工具，我想在执行函数时显示警告消息，例如：

```
CREATE OR REPLACE FUNCTION FN_OEDS_CONVERTDATE2(
V_DATE DATE) RETURN VARCHAR2
    IS
BEGIN
DECLARE
    V_RETVALUE VARCHAR2(15) :='';
    BEGIN

    SELECT
        CASE V_DATE
            WHEN NULL THEN ''
            ELSE TO_CHAR(V_DATE, 'DD-MM-YYYY')
        END INTO V_RETVALUE FROM DUAL

     RETURN V_RETVALUE;
    END;

END;
/ 
```

上述函数将成功执行，但即使其状态无效，它也不会抛出任何错误消息。

我将如何在 Java 中抛出警告消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:55:44.030

编译器消息不会通过语句或连接上的 getWarnings() 返回给客户端。

相反，一旦您确定了警告，`Statement.getWarnings()`您需要从视图中解析检索编译器错误`ALL_ERRORS`

就像是：

```
SELECT line, 
       position, 
       text, 
       name, 
       type 
FROM all_errors 
WHERE owner = user
AND type = 'FUNCTION'
AND name = 'FN_OEDS_CONVERTDATE2'
ORDER BY line, position 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:03:55.693

为什么不只是在“运行之前”检查对象是否无效？这样的事情会有所帮助。

```
select *
from 
   dba_objects 
where 
   status != 'VALID'
order by
   owner,
   object_type
; 
```

# android - 在右侧对齐列表视图中的条目

> ID：10430818
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:20.563
> 
> 标签：android, listview, alignment

我有一个列表视图来显示聊天中的消息。我想在左侧显示收到的消息，在右侧显示已发送的消息。请考虑对齐包含的视图是不够的，因为我需要显示条目的背景，并且背景也应该对齐。所以整个条目应该对齐。

有没有办法做到这一点？

我尝试使用`android:layout_gravity="right"`但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:40:31.437

我设法通过使用来做到这一点：

```
 LayoutParams params = (LayoutParams) frame.getLayoutParams();
    params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, alignRight?0:1);
    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT,  alignRight?1:0);
    frame.setLayoutParams(params); 
```

重要的是我必须在 RelativeLayout 中为我的条目添加一个框架，因为 params.addRule 仅适用于 RelativeLayout。如果您尝试对传递给 bindView 的视图执行相同操作，则会得到一个不支持 addRule 的不同 LayoutParam

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:57:08.853

当然！你需要一个适配器。在适配器中，当您为 ListItem 充气时，只需为发送和接收的消息充气不同的项目！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:18:44.363

您可以尝试使用在适配器中以编程方式设置参数`LayoutParams`。

已发送消息的内容类似于以下内容：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.MyLinearLayout);
// need to cast to LinearLayout.LayoutParams to access the gravity field
LayoutParams params = (LayoutParams)ll.getLayoutParams(); 
params.gravity = Gravity.RIGHT;
ll.setLayoutParams(params); 
```

对于收到的消息，反之（将 RIGHT 更改为 LEFT）。

# python - 如何以 django 形式处理图像字段更新

> ID：10430819
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:24.310
> 
> 标签：python, django, forms, model, label

我有以下类别的模型

```
class Category(models.Model):
   name = models.CharField(max_length=30)
   is_active=models.BooleanField()
   photo=models.ImageField(upload_to='category')
   def __unicode__(self):
     name = str(self.name)
     return name
  def image(self):
    return self.photo or 'DEFAULT_PIC.jpg'
  class Meta:
        permissions = (
            ('category','Category'),
            ('view_category', 'View category'),
        ) 
```

我的表单类如下

```
class categoryForm(forms.Form):
    name = forms.CharField(widget=forms.TextInput(attrs={'class':'box'}),max_length=32,label='Category',required=True)
    is_active = forms.BooleanField(required=False)
    id = forms.CharField(widget=forms.HiddenInput,required=False)
    photo = forms.FileField(
        required=False,
        label='Select an Image',
        help_text='max. 4 megabytes'
   ) 
```

它非常适合插入和更新两者，现在我正在尝试加载已经上传到表单中的图像（比如说我已经添加了一个带有图像的类别，现在我想上传另一个图像，所以我正在尝试显示之前上传图片的预览）

我在视图中传递了数据，并在表单中尝试了一些技巧

```
formdata = categoryForm({'name':p.name,'is_active':p.is_active,'id':p.id,'photo':p.image()}) 
```

在表格中我做了如下修改

```
def __init__(self, data=None, **kwargs):
#    pass
     super(categoryForm, self).__init__(data, **kwargs)
     if self.data['photo']!='':
        self.fields['uploaded_photo'] =forms.CharField(widget=forms.TextInput,required=False,label=mark_safe('<img src="/media/%s" height="100">'%(self.data['photo'])))
        #self.fields['uploaded_photo'].widget.attrs['value']=self.data['photo'] 
```

现在它在标签上完美地显示了以前上传的图像。

之后我尝试上传另一张图片，但显示以下错误

```
TypeError at /update/category/ 
```

**init** () 最多接受 2 个参数（给定 3 个）

处理图片上传的脚本如下

```
formdata = categoryForm(request.POST,request.FILES)
        if formdata.is_valid():
            cd = formdata.cleaned_data
            p1=Category()
            p1.id=cd['id']
            p1.name=cd['name']
            p1.is_active=cd['is_active']
            p1.photo=cd['photo']
            p1.save() 
```

请让我知道这里发生了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:57:13.297

尝试使用 ImageField 让生活变得轻松

类 ImageField(**kwargs)¶

*   默认小部件：ClearableFileInput
*   空值：无
*   规范化为：将文件内容和文件名包装到单个对象中的 UploadedFile 对象。
*   验证文件数据是否已绑定到表单，并且文件是 PIL 可以理解的图像格式。
*   错误消息键：必需、无效、缺失、空、invalid_image

    使用 ImageField 需要安装 Python Imaging Library。

    当您在表单上使用 ImageField 时，您还必须记住将文件数据绑定到表单。

[在此处](https://docs.djangoproject.com/en/dev/ref/forms/fields/#imagefield)查看完整的文档

# java - 字节不是带符号的二进制补码吗？

> ID：10430820
> 
> 赞同：2
> 
> 时间：2012-05-03T11:52:26.400
> 
> 标签：java, primitive

鉴于 byte、short 和 int 是有符号的，为什么 Java 中的 byte 和 short 没有得到通常[的有符号二进制补码](https://en.wikipedia.org/wiki/Two%27s_complement)处理？例如 0xff 对于字节是非法的。

这已经在[这里](https://stackoverflow.com/questions/867365/in-java-can-i-define-an-integer-constant-in-binary-format)讨论过，但我找不到为什么会这样的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:54:54.427

如果您查看用于存储`-1`有符号字节的实际内存，那么您会看到它是`0xff`. 然而，在语言本身中，而不是二进制表示，`0xff`只是超出了一个字节的范围。的二进制表示`-1`确实会使用二进制补码，但您不受该实现细节的影响。

语言设计者的立场是，试图将 255 存储在只能保存 -128 到 127 的数据类型中应该被视为错误。

您在评论中询问为什么 Java 允许：

```
int i = 0xffffffff; 
```

文字`0xffffffff`是`int`文字，使用二进制补码进行解释。您不能对字节执行任何类似操作的原因是该语言不提供语法来指定字面量是类型`byte`，或者确实是类型`short`。

我不知道为什么决定不提供更多文字类型。我希望它是出于简单的原因而制作的。该语言的目标之一是避免不必要的复杂性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T12:07:01.963

你可以写

```
int i = 0xFFFFFFFF; 
```

但你不能写

```
byte b = 0xFF; 
```

因为 0xFF 是一个`int`值而不是 a`byte`所以它等于 255。没有办法定义字节或短文字，所以你必须转换它。

顺便说一句你可以做

```
byte b = 0;
b += 0xFF;
b ^= 0xFF; 
```

甚至

```
byte b = 30;
b *= 1.75; // b = 52. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:57:03.233

这是合法的，但是您需要将其显式转换为字节，即 (byte)0xff 因为它超出了范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T20:24:52.430

您可以从字面上设置一个字节，但令人惊讶的是，您必须使用更多数字：

```
byte bad = 0xff; // doesn't work
byte b = 0xffffffff; // fine 
```

逻辑是，0xff 隐含为 0x000000ff，超出了一个字节的范围。(255)

这不是你得到的第一个想法，但它有一些逻辑。较长的数字是较小的数字（和较小的绝对值）。

```
byte b = 0xffffffff; // -1 
byte c = 0xffffff81; // -127 
byte c = 0xffffff80; // -128 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T11:58:18.317

`byte`范围从 -128 到 127的可能值。

可以将范围之外的值分配给变量，并默默地丢弃溢出，但这宁愿令人困惑而不是方便。

然后我们会有：

```
byte b = 128;
if (b < 0) {
  // yes, the value magically changed from 128 to -128...
} 
```

在大多数情况下，最好让编译器告诉您该值超出范围，而不是像那样“修复”它。

# iphone - 如何获取UIPickerView选中值的行号

> ID：10430821
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:27.477
> 
> 标签：iphone, ios, uipickerview

我的 viewController 中有一个 UIPickerView。我可以从委托方法中获取选择器中所选值的行号的值

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

但就我而言，我需要在视图出现后立即获取所选组件的行号。有没有办法在视图出现后立即获取行号/触发委托方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:01:20.830

你只需要使用[selectedRowInComponent](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html#//apple_ref/occ/instm/UIPickerView/selectedRowInComponent%3a)

> selectedRowInComponent：
> 
> 返回给定组件中选定行的索引。- (NSInteger)selectedRowInComponent:(NSInteger)组件参数
> 
> 零件
> 
> ```
> A zero-indexed number identifying a component of the picker view. 
> ```
> 
> 返回值
> 
> 标识所选行的零索引数字，如果未选择任何行，则为 -1。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 也可以看看
> 
> ```
> – selectRow:inComponent:animated: 
> ```
> 
> 相关示例代码
> 
> ```
> iPhoneCoreDataRecipes 
> ```
> 
> 在 UIPickerView.h 中声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:00:00.613

你用这个在pickerview中选择

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
   {
      NSString *str= [yardsArray objectAtIndex:row];

   } 
```

加载视图时使用此代码

```
 -(void)ViewDidLoad
  {
   NSString *str= [yardsArray count];
  } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T12:01:22.143

在 viewDidLoad

遍历您的对象数组并匹配您想要找出行的对象并告诉我这是否是解决方案

# java - 向量中的问题

> ID：10430823
> 
> 赞同：1
> 
> 时间：2012-05-03T11:52:37.807
> 
> 标签：java, vector

我正在尝试通过检查向量是否已经具有数据来向向量添加一些数据，即使向量具有循环即将进入 else 块的数据。

```
Vector object = (Vector) listUserEvents.get(key);
Vector compareEventData = (Vector) hCompareTable.get(compareKey);

for (int i = 0; i < compareEventData.size(); i++) {
    EventData eCompare = (EventData) compareEventData.elementAt(i);
    if (object.contains(eCompare)) {
        System.out.println("in if of compare");
    } else {
        System.out.println("in else of compare");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:07:33.867

如果代码未按预期运行，则很可能是您不了解`contains`实际在做什么。

该`contains`方法正在寻找该`equals`方法所说的向量中等于参数的元素；例如，它（或多或少）等同于：

```
 boolean found = false;
    for (Object eventData : object) {
        if (eventData.equals(eCompare)) {
             found = true;
        }
    } 
```

如果这给出了一个意外的答案，那么可能的原因是`equals`为`EventData`. 特别是，如果您没有覆盖`equals`，那么`EventData`可能是`equals`从`Object`. 如果这样做，则`equals` *意味着*“具有相同的对象引用”。对于您的用例，这可能是错误的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:13:47.187

正如评论中所讨论的，您`EventData`在两个向量中似乎是不同的实例。如果您希望它们在包含相同信息的意义上是相等的，您应该`EventData`根据识别它们的属性来比较对象。例如：

```
Vector<EventData> object = (Vector<EventData>) listUserEvents.get(key);
Vector<EventData> compareEventData = (Vector<EventData>) hCompareTable.get(compareKey);

for (EventData eCompare : compareEventData) {
    boolean found = false;
    for (EventData other : object) {
        if (other.getSomeProperty().equals(eCompare.getSomeProperty())) {
           found = true;
           break;
        } 
    }
    if(found){
       System.out.println("contains");
    }else {
       System.out.println("does not contain");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:11:38.343

您需要覆盖`EventData.equals()`. 完成此操作后，您还应该覆盖[`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29).

最后，使用 a`Vector`会导致计算复杂度非常低，因为每次`contains()`检查都会花费`O(n)`. 此外，`Vector`通常不建议在新代码中使用。

最好使用[`LinkedHashSet`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashSet.html)代替（或者，如果元素的顺序不重要，则使用 any `Set`）。

# java - 如何访问servlet和下载附件？

> ID：10430824
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:43.160
> 
> 标签：java, servlets, apache-poi, content-disposition

我有以下代码片段尝试对我的 servlet 进行 HTTP 调用：

```
 try {
        // Construct data
        String data = URLEncoder.encode("rpt_type", "UTF-8") + "=" + URLEncoder.encode(reportType, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_project", "UTF-8") + "=" + URLEncoder.encode(reportProject, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_mrv_creator", "UTF-8") + "=" + URLEncoder.encode(reportMrvCreator, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_gi_recipient", "UTF-8") + "=" + URLEncoder.encode(reportGiRecipient, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_plant", "UTF-8") + "=" + URLEncoder.encode(reportPlant, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_sloc", "UTF-8") + "=" + URLEncoder.encode(reportStorageLoc, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_gi_no", "UTF-8") + "=" + URLEncoder.encode(reportGiNo, "UTF-8");
        data += "&" + URLEncoder.encode("date_sap_gi_fr", "UTF-8") + "=" + URLEncoder.encode(reportDateGiFrom, "UTF-8");
        data += "&" + URLEncoder.encode("date_sap_gi_to", "UTF-8") + "=" + URLEncoder.encode(reportDateGiTo, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_partno", "UTF-8") + "=" + URLEncoder.encode(reportPartNo, "UTF-8");
        data += "&" + URLEncoder.encode("rpt_so_no", "UTF-8") + "=" + URLEncoder.encode(reportSvcOrderNo, "UTF-8");
        data += "&" + URLEncoder.encode("date_scan_fr", "UTF-8") + "=" + URLEncoder.encode(reportDateScanFrom, "UTF-8");
        data += "&" + URLEncoder.encode("date_scan_to", "UTF-8") + "=" + URLEncoder.encode(reportDateScanTo, "UTF-8");
        System.out.println("[data]\n" + data);

        // Send data
        String urlString = "http://localhost:8080/aerobook/GIStatusReportDownload?" + data;
        System.out.println("[url] " + urlString);
        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();
        //conn.setDoOutput(true);
        //OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        //wr.write(data);
        //wr.flush();

        // Get the response
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line;
        while ((line = rd.readLine()) != null) {
            System.out.println(line);
        }
        //wr.close();
        rd.close();
    } catch (Exception e) {
    } 
```

我的调试输出：

```
[data]
rpt_type=d&rpt_project=aaa&rpt_mrv_creator=bbb&rpt_gi_recipient=ccc&rpt_plant=ddd&rpt_sloc=eee&rpt_gi_no=fff&date_sap_gi_fr=02%2F05%2F2012&date_sap_gi_to=03%2F05%2F2012&rpt_partno=ggg&rpt_so_no=hhh&date_scan_fr=26%2F05%2F2012&date_scan_to=31%2F05%2F2012
[url] http://localhost:8080/aerobook/GIStatusReportDownload?rpt_type=d&rpt_project=aaa&rpt_mrv_creator=bbb&rpt_gi_recipient=ccc&rpt_plant=ddd&rpt_sloc=eee&rpt_gi_no=fff&date_sap_gi_fr=02%2F05%2F2012&date_sap_gi_to=03%2F05%2F2012&rpt_partno=ggg&rpt_so_no=hhh&date_scan_fr=26%2F05%2F2012&date_scan_to=31%2F05%2F2012 
```

在我的 servlet 上（在与上述代码不同的文件中），我生成了一个 Excel 文件供下载：

```
 res.setContentType(sContentType);
    res.setHeader("Content-Disposition", "attachment;filename=\"" + sExcelFileName + "\"");
    OutputStream oOutStrm = res.getOutputStream();
    wbBook.write(oOutStrm);
    oOutStrm.close(); 
```

我的问题是，从我的代码生成的 URL（如上面的调试输出中所示），我可以访问我的 servlet 并设法获得“另存为”对话框。

我想获取生成的文件内容以在我的代码中使用。有什么方法可以从我的代码、字节流或任何其他格式中获取附件？

* * *

编辑#3：清理顶部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:21:47.230

当您在浏览器中输入 URI 时，您正在执行 GET 请求。但是，您的客户端 Java 代码会生成一个 POST 请求，并在正文中发送参数，而不是 URI。

您可能希望查看 HTTP 跟踪并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:00:16.287

检查`wbBook.write(oOutStrm);`是否有任何内容写入 outputStream，也需要`oOutStrm.flash()`在关闭之前调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:30:44.000

我怀疑问题出在 `OutputStream oOutStrm = res.getOutputStream();`.

我敢打赌`res`，`HttpServletResponse`它会返回一个`ServletOutputStream`适合在响应中写入二进制数据的值。servlet 容器不编码二进制数据

检查[API](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#getOutputStream%28%29)

所以，除了文件名，你可能什么也得不到。

在 Servlet 中尝试

```
FileOutputStream stream = new FileOutputStream("c:/excel/Book1.xls");
workBook.write(stream); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:25:24.390

*`I want to get the contents of the excel file on my code, but so far it's not working.`*

我发现代码中没有错误。
我相信您想将内容从输入流转换为`HSSFWorkbook`对象。
以下代码片段将帮助您。

```
java.net.URLConnection conn = url.openConnection();  
java.io.InputStream is = conn.getInputStream();  
org.apache.poi.hssf.usermodel.HSSFWorkbook workBook = new org.apache.poi.hssf.usermodel.HSSFWorkbook( is );  
System.out.println( "Number of Sheets: " + workBook.getNumberOfSheets() );  
org.apache.poi.hssf.usermodel.HSSFSheet sheet = workBook.getSheetAt( 0 );  
System.out.println( "Sheet Name: " + sheet.getSheetName() );  

// rest of your code to handle the captured workBook
// cheers 
```

# android - 在地图中心显示点

> ID：10430829
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:54.067
> 
> 标签：android

我试图在地图中心显示一个点，每次移动地图时它都应该在中心。我在地图中添加了一个点，但是当我移动地图时它不再位于中心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:53:23.083

```
Paint mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    Point p1 = new Point();
    Point p2 = new Point();

        Path path = new Path();
        Projection projection = mapv.getProjection();
        for(int i=0; i<listOfPoints.size()-2; i++)
        {
//              System.out.println(listOfPoints.get(i).getLatitudeE6()+"  "+ listOfPoints.get(i).getLatitudeE6());
            projection.toPixels(listOfPoints.get(i), p1);
            projection.toPixels(listOfPoints.get(i+1), p2);

            path.moveTo(p2.x, p2.y);
            path.lineTo(p1.x,p1.y);  
        }
        canvas.drawPath(path, mPaint); 
```

# iphone - 使用预定义的方法更改按钮图像

> ID：10430830
> 
> 赞同：0
> 
> 时间：2012-05-03T11:52:54.607
> 
> 标签：iphone, ios

在我的应用程序中使用 UIScrollView。我向 UIScrollView 添加了按钮。对于我使用分配图像的每个按钮

```
- (void)setImage:(UIImage *)image forState:(UIControlState)state; 
```

和行动。

forState 我 在**viewDidLoad中使用了****UIControlStateNormal**。

 **当我们点击按钮时，图像必须改变。为此，我使用了相同的方法，但 forState 值 在**ViewDidLoad中更改为****UIControlStateSelected**。

 **但按钮图像没有改变。任何人都可以提供帮助或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:58:39.737

你必须像这样使用

在 ViewDidLoad 中为正常和选中状态设置图像

```
-(void)ViewDidLaod

[myButton setImage:[UIImage imageNamed:@"barbutton.png"] forState:UIControlStateNormal];

[myButton setImage:[UIImage imageNamed:@"barbutton1.png"] forState:UIControlStateSelected]; 
```

要执行选择图像更改可以在下面的代码中完成

```
 -(void)buttonclick

[myButton setSelected:YES]; 
```

或者

```
[myButton setSelected:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:04:12.597

使用这行代码我认为这将对您有所帮助。

```
-(void)viewDidLoad
 {
    UIButton *myButton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
    [myButton setFrame:CGRectMake(0,3,70,32)];
    [myButton setImage:[UIImage imageNamed:@"barbutton.png"] forState:UIControlStateNormal];
    [myButton addTarget:self action:@selector(compete) forControlEvents:UIControlEventTouchUpInside];
 }
 -(void)compete
 {
    [myButton setImage:[UIImage imageNamed:@"barbutton1.png"] forState:UIControlStateNormal];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:07:28.423

采用

```
[button setImage:[UIImage imageNamed:@"button.png"] forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:@"button_highlighed.png"] forState:UIControlStateHighlighted]; 
```****

# java - 使用 Crawler4j 时线程“主”java.lang.NoClassDefFoundError：org/apache/http/conn/scheme/SchemeSocketFactory 中的异常

> ID：10430846
> 
> 赞同：2
> 
> 时间：2012-05-03T11:53:55.760
> 
> 标签：java, exception, crawler4j

我正在使用 Crawler4j 示例代码，但我发现我遇到了异常。

这是我的例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/http/conn/scheme/SchemeSocketFactory
    at LocalDataCollectorController.main(LocalDataCollectorController.java:24)
Caused by: java.lang.ClassNotFoundException: org.apache.http.conn.scheme.SchemeSocketFactory 
```

这是我的代码：

```
 public static void main(String[] args) throws Exception {

            String root Folder = "D:\\";
            int numberOfCrawlers = 5;
            System.out.println("numberOfCrawlers"+numberOfCrawlers);
            System.out.println(rootFolder);

          CrawlConfig config = new CrawlConfig();
            config.setCrawlStorageFolder(rootFolder);
            config.setMaxPagesToFetch(10);
            config.setPolitenessDelay(1000);

              PageFetcher pageFetcher = new PageFetcher(config);
           RobotstxtConfig robotstxtConfig = new RobotstxtConfig();
            RobotstxtServer robotstxtServer = new RobotstxtServer(robotstxtConfig, pageFetcher);
            CrawlController controller = new CrawlController(config, pageFetcher, robotstxtServer);

            controller.addSeed("http://www.ohloh.net/p/crawler4j");
            controller.start(LocalDataCollectorCrawler.class, numberOfCrawlers);

            List<Object> crawlersLocalData = controller.getCrawlersLocalData();
            long totalLinks = 0;
            long totalTextSize = 0;
            int totalProcessedPages = 0;
            for (Object localData : crawlersLocalData) {
                    CrawlStat stat = (CrawlStat) localData;
                    totalLinks += stat.getTotalLinks();
                    totalTextSize += stat.getTotalTextSize();
                    totalProcessedPages += stat.getTotalProcessedPages();
            }
           System.out.println("Aggregated Statistics:");
            System.out.println("   Processed Pages: " + totalProcessedPages);
            System.out.println("   Total Links found: " + totalLinks);
            System.out.println("   Total Text Size: " + totalTextSize);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T12:06:40.097

下载[`HttpClient`](http://hc.apache.org/downloads.cgi)并将其添加到您的构建路径。

[下载部分](http://code.google.com/p/crawler4j/downloads/list)中还有一个包含所有 crawler4j 依赖项的包。您应该使用它来避免进一步的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T12:04:46.747

原因`NoClassDefFoundError`总是相同的：在运行时执行期间您没有提供依赖类。换句话说，当您运行示例时，您没有将 HttpClient 的 JAR 文件放在类路径中。这样做，问题就会消失。

# iphone - 'NSInvalidArgumentException'，原因：'无法解析格式字符串 "title contains[cd] @%"' 错误

> ID：10430849
> 
> 赞同：0
> 
> 时间：2012-05-03T11:53:59.820
> 
> 标签：iphone, objective-c, ios, core-data, nspredicate

我正在尝试创建谓词，但出现错误。我收到错误'NSInvalidArgumentException'，原因：'无法解析格式字符串“title contains [cd] @%”'我试过这样：

```
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];
NSString *predicateString=[NSString stringWithFormat:@"title contains[cd] @% ",searchText];
request.predicate = [NSPredicate predicateWithFormat:predicateString];//error here 
```

像这样

```
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];
request.predicate = [NSPredicate predicateWithFormat:@"title contains[cd] @%",searchText];//error here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:56:36.530

您的意思是`%@`, not `@%`，作为对象的格式说明符。

# iphone - iPhone iOS“打洞”之类的应用程序，如何将两张图像拼接在一起？

> ID：10430852
> 
> 赞同：1
> 
> 时间：2012-05-03T11:54:14.310
> 
> 标签：iphone, objective-c, ios, uiimage, core-graphics

我正在构建一个“洞中的脸”或“照相亭”类型的应用程序，其中用户的脸可以使用人脸检测技术插入到现有图像中。我`UIImage`通过使用人脸检测来获得“抠图”人脸边界。

看看下面这个人耳朵附近的脸和头发之间的清晰边界。这种过渡如何才能更好地平滑和融合在一起？我知道有些应用程序可以“扩展”图片，是否有某种众所周知的算法可以用于此目的？

![人脸检测示例](../Images/cbd861db5f030d4bcd4fd3e0aff046dc.png)

我的问题是如何将用户的脸粘贴到这样的图像中？我正在考虑在切口的脸上添加一个透明蒙版（有效地为脸部切出一个洞），并从位于切口后面的视图中的实时摄像机馈送中替换用户的脸部。

我担心的是，这种方法会在切割面的边缘周围产生锋利的边缘。我怎样才能平滑这个边缘？我的透明蒙版是否应该是一个渐变，而不是纯 alpha 通道，中间的 alpha 通道为 1，而外边缘的通道更少？

**如何混合两个图像并使它们之间的边界消失或不那么明显？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:53:06.890

您可以使用两个 UIImageview 加载两个 PNG 文件，您可以使用 Photoshop 等图像编辑应用程序保存 PNG 保留透明度。因此，您可以避免使用蒙版，只需使用带有渐变的 PNG，该渐变在需要时以透明度结束。

请记住，当您添加 UIImageview 时：

```
UIImageView* myPortrait = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"myPortrait" ofType:@"png"]]];
myPortrait.frame = CGRectMake(50, 50, 80, 100);
[self.view addSubview:myPortrait];
UIImageView* photoWithHole = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"photoWithHole" ofType:@"png"]]];
photoWithHole.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:photoWithHole]; 
```

您应该记住，图像是以先进后出的方式显示的，因此请记住在有孔的照片之前添加肖像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T11:58:15.000

检查 OpenCV 库。几乎所有您希望的功能通常都使用 OpenCV 执行。

OpenCV 是一个 C++ 图像检测和处理库。有一个 objC++ 包装框架 xCode。

学习 iOS 的 openCV 基础知识。

将 OpenCV 框架嵌入到您的 xCode 项目中。

将 viewController 的 m 扩展名更改为 mm

将 viewController 的 h 扩展名更改为 hpp

导入opencv2/opencv.hpp ... ... ... ...

**你应该检查的东西：http:** [//docs.opencv.org/master/d7/d8b/tutorial_py_face_detection.html#gsc.tab=0](http://docs.opencv.org/master/d7/d8b/tutorial_py_face_detection.html#gsc.tab=0)

[http://www.bogotobogo.com/python/OpenCV_Python/python_opencv3_Image_Object_Detection_Face_Detection_Haar_Cascade_Classifiers.php](http://www.bogotobogo.com/python/OpenCV_Python/python_opencv3_Image_Object_Detection_Face_Detection_Haar_Cascade_Classifiers.php)

[https://www.youtube.com/watch?v=Gdy3fLS_fZA](https://www.youtube.com/watch?v=Gdy3fLS_fZA)

或者你可以使用 CoreImage

[https://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5](https://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5)

# parsing - Haskell：*** 例外：Prelude.read：无解析、解析、读取文件

> ID：10430854
> 
> 赞同：2
> 
> 时间：2012-05-03T11:54:16.860
> 
> 标签：parsing, haskell, read-write

我正在尝试从 .txt 文件中读取值并不断收到上述错误。我的代码如下：

```
file <- readFile "films.txt"
let database = (read file :: [Film]) 
```

和 Film 是我声明为的数据类型：

```
type Film = (String, String, Int) 
```

Haskell 仍然很新，所以不知道如何将字符串解析回所需的类型。有点假设它会很好，并且像 writeFile 一样为我做它！

有什么提示吗？

# c# - 从两个不同的类访问相同的接口，哪个接口在另一个类中实现。

> ID：10430857
> 
> 赞同：-1
> 
> 时间：2012-05-03T11:54:26.103
> 
> 标签：c#, interface

我有两个不同的班级名称员工和员工。我有一个接口名称 IEmployeeService 这里包括两个方法名称 Get(With Parameter) & Gets()。这个接口在另一个类名EmployeeService 中实现。现在我需要从我的员工类调用我的接口方法“Get()”，从我的员工类调用“Gets()”。有人帮我吗？

## 我的代码是：

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
   //My first Class 
    public class Employee
    {
        public Employee() { }
        public int EmployeeID { get; set; }
        public string EmployeeName { get; set; }
        public string Address { get; set; }
        public double Salary { get; set; }

        //This is a method I want to call My IEmployeeService Get Method from here 
        public Employee Get(int nEmployeeID)
        {
            //Try to call Interface Get Method
        }

    }

    //My Second Class
    public class Employees : CollectionBase
    {
        public void Add(Employee oItem)
        {
            List.Add(oItem);
        }
        public void Remove(Employee oItem)
        {
            List.Remove(oItem);
        }

        //This is my another method I want to call My IEmployeeService Gets Method from here 
        public static Employees Gets()
        {
            //Try to call Interface Gets Method
        }
    }

    //My Interface 
    public interface IEmployeeService
    {
        Employee Get(int nEmployeeID);
        Employees Gets();
    }

    // My Interface implementation Class 
    public class EmployeeService : IEmployeeService
    {

        public EmployeeService() { }

        #region IEmployeeService Members
        public Employee Get(int nEmployeeID)
        {
            Employee oEmployee = new Employee();
            oEmployee.EmployeeID = 1;
            oEmployee.EmployeeName = "Mohammed Faruk";
            oEmployee.Address = "Comilla, Bangladesh";
            oEmployee.Salary = 50000.00;
            return oEmployee;
        }

        public Employees Gets()
        {
            Employees oEmployees = new Employees();
            Employee oEmployee = new Employee();
            for (int i = 1; i <= 10; i++)
            {
                oEmployee = new Employee();
                oEmployee.EmployeeID = i;
                oEmployee.EmployeeName = i.ToString() + "th Mohammed Faruk";
                oEmployee.Address = i.ToString() + "Comilla, Bangladesh";
                oEmployee.Salary = 50000.00;
                oEmployees.Add(oEmployee);
            }
            return oEmployees;
        }
        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:03:50.737

您可能需要有一个 EmployeeService 的单例实例，如下所示（由您决定使用不同的实现，为简单起见，我使用了这种方法）

```
public class EmployeeService : IEmployeeService
{
      private readonly static EmployeeService _instance = new EmployeeService();

      public static EmployeeService Instance
      {
          get { return _instance; }
      }
} 
```

现在将其用于 Employee 和Employees 类，如下所示。

```
public class Employee
{
    //This is a method I want to call My IEmployeeService Get Method from here 
    public static Employee Get(int nEmployeeID)
    {
        return EmployeeService.Instance.Get(nEmployeeID);
    }

}

public class Employees
{
    //This is a method I want to call My IEmployeeService Get Method from here 
    public static Employees Gets()
    {
        return EmployeeService.Instance.Gets();
    }
} 
```

我希望这就是你要找的。

# javascript - 有没有办法在实时服务器上禁用 javascript 调试

> ID：10430858
> 
> 赞同：-2
> 
> 时间：2012-05-03T11:54:29.957
> 
> 标签：javascript, debugging

无论用户的浏览器配置如何，有没有办法告诉调试工具（firebug 等）永远不会为您的网站启用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:56:41.110

不。

客户端可以自由地做任何它认为适合您的 javascript 的事情。您可以尝试混淆 - 但这对坚定的开发人员无效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:57:48.693

脚本、HTML、CSS、图像所有内容都在页面打开之前加载到**客户端。**所以他可以用他系统中的东西做任何他喜欢的事情。没有**办法**禁用它。

*即使有可能这样做*，他也可以将其删除。

### 所以，基本上是白费力气。

# ios - 如何将响应通知的模式视图显示为新窗口？（没有父VC）

> ID：10430860
> 
> 赞同：0
> 
> 时间：2012-05-03T11:54:38.133
> 
> 标签：ios, xcode, uiviewcontroller, uilocalnotification, uiwindow

我在处理传入的本地通知时遇到了很多问题。我的应用程序正在使用情节提要，并有一个 tabbarcontroller 作为 rootviewcontroller。目前我以下列方式从“didReceiveLocalNotification”启动模态视图：

```
MedicationReminderViewController *vc = [[MedicationReminderViewController alloc] initWithNibName:@"MedicationReminderViewController" bundle:nil];
    vc.notificationInfo = [[NSDictionary alloc] initWithDictionary:notification.userInfo];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:vc];
    navController.navigationBar.barStyle = UIBarStyleBlackOpaque;
    navController.title = @"title";

    UITabBarController *tc = (UITabBarController *)self.window.rootViewController;
    UINavigationController *nc = (UINavigationController *)tc.selectedViewController;    
    [[nc visibleViewController] presentModalViewController:navController animated:YES]; 
```

这有效，但并非在所有情况下都有效。我想在新窗口中显示模态视图，而不是当时可以显示的任何其他内容。当用户处理传入的通知时，模态视图将自行关闭，并且在通知传入之前处于活动状态的底层视图将再次可见。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:57:33.823

在`window`对象上的 AppDelegate 中执行此操作。我相信你可以在那里做到。从我的脑海中，我相信它是 window.rootViewController。不过不确定。

怎么做：当您收到您的 UILocalNotification 时，您可以在 AppDelegate 中收到它。当通知“到达”时，使用`presentModalViewController`on `self.window.rootViewController`。

 *从[文档](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009565-CH1-DontLinkElementID_1)*更新*：* 

 *> 如果在系统传递通知时应用程序处于最前面且可见，则不会显示警报，不会标记图标，也不会播放声音。但是，如果应用程序委托实现了[application:didReceiveLocalNotification: ，则会调用它。](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidReceiveLocalNotification%3a)UILocalNotification 实例被传递到此方法中，并且委托可以检查其属性或访问 userInfo 字典中的任何自定义数据。

使用[`application:didReceiveLocalNotification:`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidReceiveLocalNotification%3a)方法。我希望这回答了你的问题。*

# php - PHP var 显示在 Chrome 开发工具中，但不显示网页

> ID：10430865
> 
> 赞同：1
> 
> 时间：2012-05-03T11:54:46.063
> 
> 标签：php, javascript, jquery, facebook, google-chrome-devtools

我有这个问题，我可以通过 Chrome 开发人员工具上的预览看到变量的回声，但在实际网页上它是空白的。

我猜这归结为时间问题，所以要说清楚这就是我的方式。

*   当页面 (index.php) 加载时，它会链接一个 .js 文件，该文件在 FB 上执行 FLQ 查询以获取用户名。
*   然后它使用 ajax 将信息重新发布到 index.php。
*   回到 index.php 页面，它通过 $_POST 重新加载和收集
*   然后它会显示 $_POST 中保存的一些用户信息

我在猜测为什么我这样做是不可能的，但奇怪的是，在 Chrome 开发工具中，所有变量都在页面上回显，但实际页面在变量应该显示的位置是空白的。

我只能建议我有一个保留页面，收集详细信息然后加载然后移动到主页以显示数据。

```
<!--
    Index.php
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head> 
    <?php
    global $uid;
    global $una;
    global $uem;
    global $uph;
    ?>
    <title></title>
    <script type="text/javascript"    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://connect.facebook.net/en_US/all.js">   </script>

    <script type="text/javascript">
        // initialize the library with the API key
        FB.init({ apiKey: '2847xxxxxxxx689' });  
    </script>
    <?php
    ?>
    <script type="text/javascript">

        FB.login(function(response) {
            // handle the response
        }, {scope: 'email,publish_stream'});

    </script>

    <script type="text/javascript" src="jquery/op.js"></script>
 <?php
 $uid = $_POST['uid'];
 $una = $_POST['una'];
 $uem = $_POST['uem'];
 $uph = $_POST['uph'];
 echo $_POST['una'];
 ?>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="stylesheets/op_main.css" media="Screen" type="text/css"   />
  <?php
    //include('assets/opPHP.php');
    include('sql/ajaxsql.php');
    include('sql/phpsql.php');
    $opapp = new opapp;
    ?>
  <body>
    <div id="mainbody">

        <div id="topbanner">
            Beta Name <?php echo $una; ?>
        </div> 

 <--

  .js File

  -->

        $(window).load(function() {

            FB.api('/me', function(response) {
                var query = FB.Data.query('select uid,name,email, pic_square from user     where uid={0}', response.id);
                query.wait(function(rows) {
                    var uid = rows[0].uid;
                    var una = rows[0].name;
                    var uem = rows[0].email;
                    var uph = '<img src="' + rows[0].pic_square + '>';

                    $.ajax({

                        url: '../index.php',
                        type: 'POST',
                        data: 'uid=' + uid + '&una=' + una + '&uem=' + uem + '&uph=' + uph
                    });
                });

            });

        }); 
```

我可以看到它发布信息，所以我的问题是。是他们在同一页面上收集信息的另一种方式。甚至解释为什么我可以看到它的开发工具，但看不到主页？

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:58:55.483

`echo $_POST['una'];`在 head 标签中回显，因此它将显示在 Chrome 开发工具中，但不会显示在网页中。

关于`<?php echo $una; ?>`，我没有看到任何地方设置了这个变量。所以这可能是它空白的原因

# entity-framework-4.1 - 使用通用存储库模式管理连接

> ID：10430880
> 
> 赞同：1
> 
> 时间：2012-05-03T11:55:40.557
> 
> 标签：entity-framework-4.1, repository-pattern, dbcontext

我正在使用实体框架 4.1 和 mvc3 构建一个站点。我正在使用通用存储库模式：
[http](http://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle) ://www.tugberkugurlu.com/archive/generic-repository-pattern-entity-framework-asp-net-mvc-and-unit-testing-triangle 。我`ninject`用来将我的具体存储库注入控制器。我的问题是我的每个 dbcontext 都不同，如果没有代码喊出“不同的上下文不能在同一个查询中使用”之类的东西，我就无法运行复杂的查询。我尝试使用“单例”方法，但随后代码大喊“试图输入已处置的对象（空引用异常）”之类的东西。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:07:37.973

单例模式是一种应该避免的反模式。它导致难以测试具有各种副作用的代码（例如，已处置的 DbContext）。

UnitOfWork 管理不同存储库上的操作。它将跟踪所做的所有更改，然后以正确的顺序将这些更改写入您的数据库。DbContext 已经实现了 UnitOfWork 模式（尽管将 DbContext 隐藏在自定义 UnitOfWork 接口后面会更好）。

如果您已经通过 NInject 使用依赖注入，那么您几乎就是他们的了！您应该更改存储库的构造函数以采用 DbContext：

```
public class MyRepository
{
   private _unitOfWork;

   public MyRepository(DbContext unitOfWork)
   {
      _unitOfWork = unitOfWork;
   }

   ....
} 
```

如果您随后使用[InRequestScope 模式](https://github.com/ninject/Ninject.Web.Common/wiki/InRequestScope)将 DbContext 连接到 NInject，那么一切都应该正常工作。然后，您的 DbContext 将由所有存储库共享，并且 Ninject 将在您的请求结束时处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:00:32.050

不确定我是否收到您的问题，但是您的存储库应该能够在具有单个 dbcontext 的“工作单元”中工作。

我发现开始这个工作单元的最佳位置是在开始请求上，你可以在你的 global.asax 中设置它（以及结束的拆除请求）

# html - CSS - 如何仅在分区边界处换行

> ID：10430881
> 
> 赞同：1
> 
> 时间：2012-05-03T11:55:42.470
> 
> 标签：html, css, word-break

我有以下代码

[http://jsfiddle.net/yXwh9/3/](http://jsfiddle.net/yXwh9/3/) 结果是 [http://jsfiddle.net/yXwh9/3/embedded/result/](http://jsfiddle.net/yXwh9/3/embedded/result/)

问题是第一行被打破了，“Techconnect 是我们讨论的一个小组”出现在第一行和“技术、语言、平台、开发以及 IDE 和前端开发”。

在第二行，我不希望这种情况发生。我希望这条线在包含分区的右边界处完全分解。（我不想`<pre>`作为解决方案，只是因为文本可能不包含`<br/>`在里面。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:58:07.633

您可能正在寻找`text-align: justify`. [例子](http://jsfiddle.net/QGuKM/)。

# c# - 从 WCF REST 函数重定向到另一个 URL 而不返回 HTTP 302

> ID：10430883
> 
> 赞同：0
> 
> 时间：2012-05-03T11:56:06.513
> 
> 标签：c#, wcf, rest

我有一个获取 GET 请求的 REST 服务，我希望它能够重定向到三个 url 之一，而不必发送`http 302`错误和新的 url。

```
 [OperationContract(Name = "MyService")]
    [WebGet(ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/myservice/{option}")]
    public System.IO.Stream MyService(String option) 
```

这就是我定义它的方式，但是当我查看时，`WebOperationContext.Current.OutgoingResponse`我没有重定向方法。

有没有办法自动做到这一点？我希望这样做的原因是该 Web 服务可能被程序调用，并且在程序上不必捕获 302 错误然后手动执行重定向会更简单。

看来正确的方法是遵循这个： [http ://christopherdeweese.com/blog2/post/redirecting-from-a-wcf-rest-service](http://christopherdeweese.com/blog2/post/redirecting-from-a-wcf-rest-service)

并这样做：

```
WebOperationContext.Current.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.Redirect;
WebOperationContext.Current.OutgoingResponse.Location = "/someOtherPage.aspx";
return null; 
```

我只是希望找到另一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T12:11:11.523

重定向始终是客户端功能。服务器只是通知客户端资源在别处。没有什么能像服务器端重定向一样，除了将这个重定向完全隐藏到您当前操作的单独服务调用中。

顺便提一句。REST 是关于统一接口的，重定向（3xx）是这个接口的一部分，所以如果你创建 REST 服务并且你想要这样的功能，你应该以通用的方式使用它。REST 客户端负责正确处理统一接口。

# html - 在选择框中设置 HTML 选定值的样式

> ID：10430886
> 
> 赞同：4
> 
> 时间：2012-05-03T11:56:27.367
> 
> 标签：html, css, forms, select

我已经到处搜索了这个，但在任何地方都没有找到。开始觉得不可行。我的问题是这样的：

是否可以使用 CSS 设置样式，选择框的选定值？

我使用这个代码和类 pretty-select 来设置整个选择框的样式！

```
 <div class="pretty-select">
    <select name="city" class="city">
      <option value="Porto" selected="selected">Porto</option>
      <option value="Penafiel">Penafiel</option>
      <option value="Lisboa">Lisboa</option>
      <option value="Madrid">Madrid</option>
      <option value="Barcelona">Barcelona</option>
    </select>
  </div> 
```

谢谢你的时间！干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:36:22.687

不幸的是，使用纯 CSS 无法实现您的要求。但是，您可以选择以下类似的方法作为解决方法。

检查实时代码[http://jsfiddle.net/Etr4F/](http://jsfiddle.net/Etr4F/)

HTML：

```
<div>
Select
<ul>
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 2</a></li>
    <li><a href="#">Item 3</a></li>
</ul>
</div> 
```

CSS：

```
div { 
  margin: 10px;
  padding: 10px; 
  border: 2px solid purple; 
  width: 200px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
}
div > ul { display: none; }
div:hover > ul {display: block; background: #f9f9f9; border-top: 1px solid purple;}
div:hover > ul > li { padding: 5px; border-bottom: 1px solid #4f4f4f;}
div:hover > ul > li:hover { background: white;}
div:hover > ul > li:hover > a { color: red; } 
```

干杯！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:31:18.880

如果您不反对使用 jQuery UI，您可以随意自定义它。

[http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html](http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html)

# php - Paypal - 在新服务器中 CURL 响应为 0（连接超时），在旧服务器中没问题

> ID：10430888
> 
> 赞同：0
> 
> 时间：2012-05-03T11:56:32.053
> 
> 标签：php, curl, paypal, connect

我正在尝试从新服务器连接到 Paypal Sandbox。如果我在本地计算机上测试代码（使用 XAMPP），它可以正常工作。此外，如果我在旧服务器中测试代码，它也可以正常工作（相同的 PHP 版本和库，并且新服务器应该具有与旧服务器相同的配置（尽管我开始怀疑它......）。

我将 CURL 输出重定向到一个文件，这就是我得到的（curl_error() 中的类似输出）：

```
About to connect() to svcs.sandbox.paypal.com port 443 (#0)
Trying 173.0.82.89... * Connection timed out
couldn't connect to host
Closing connection #0 
```

这是 curl_getinfo() 的输出：

```
[url] => https://svcs.sandbox.paypal.com/AdaptivePayments/Pay?actionType=PAY...
[http_code] => 0
[header_size] => 0
[request_size] => 0
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0
[namelookup_time] => 0.058702
[connect_time] => 0
[pretransfer_time] => 0
[size_upload] => 0
[size_download] => 0
[speed_download] => 0
[speed_upload] => 0
[download_content_length] => 0
[upload_content_length] => 0
[starttransfer_time] => 0
[redirect_time] => 0 
```

这是PHP代码：

```
$ch = curl_init();    
curl_setopt($ch, CURLOPT_URL, $URL);
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER
    , array(
    'X-PAYPAL-SECURITY-USERID: '.$api_userid
    , 'X-PAYPAL-SECURITY-PASSWORD: '.$api_pass
    , 'X-PAYPAL-SECURITY-SIGNATURE: '.$api_signature
    , 'X-PAYPAL-APPLICATION-ID: '.$api_appid
    , 'X-PAYPAL-REQUEST-DATA-FORMAT: NV'
    , 'X-PAYPAL-RESPONSE-DATA-FORMAT: NV'
    )    
);

$response = curl_exec($ch); 
```

我认为问题指向服务器配置问题，但我有点迷失了我必须查看的方式：PHP 配置、Apache、防火墙，... ¿任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:13:21.870

你可以比较 phpinfo() 列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:05:05.010

好的。这是一个 SSL 配置问题。传出 SSL 端口 (443) 已关闭，因此服务器无法与 Paypal 建立连接。

谢谢你的想法:)

# android - 用户离开活动后如何接收个人 SMS 发送/传递的 SMS 反馈

> ID：10430895
> 
> 赞同：2
> 
> 时间：2012-05-03T11:57:07.897
> 
> 标签：android, sms, broadcastreceiver, send, feedback

我有一个提供 SMS 消息的应用程序。短信数据存储在应用数据库中。该应用程序支持向多个联系人发送消息，因此在发送 SMS 时，我会动态注册一个不同的 BroadcastReceiver 以侦听是否发送了每条 SMS（我使用字符串中的每个电话号码来标识 IntentFilter 中的操作）。

收到确认发送后，我将 SMS 写入数据库。

问题是，如果用户在“已发送”意图被广播之前离开活动，BroadcastReceivers 将丢失，我无法再捕获“已发送”意图，因此数据库不会更新。我选择的一种解决方法是实现 onKeyDown() 以防止用户在所有 Intent 被广播之前关闭活动，但此解决方案仅适用于“返回”按钮 - 无法捕获“主页”按钮事件。

这是我的代码：

```
public void sendSMS(String[] phoneNumbers, String message){   

  final String currentMessage = message;
  SmsManager sms = SmsManager.getDefault(); 
  ArrayList<String> parts = sms.divideMessage(message);

     for(int i=0; i<phoneNumbers.length; i++){

    for(int j=0; j<parts.size(); j++){

        BroadcastReceiver sent = new BroadcastReceiver(){

             public void onReceive(Context arg0, Intent arg1) {             

                  String[] arg = arg1.getAction().split(KEY_SMS_SENT);  
                  String phoneNo = Utils.setSimpleFormatNumber(arg[1]);
                  String count = arg[0];
                  String parts = count.split(KEY_SMS_PART_NO)[0];
                  String partNo = count.split(KEY_SMS_PART_NO)[1];

                      sentReceivers.remove(this);
                      unregisterReceiver(this); 

                        switch (getResultCode())
                        {
                            case Activity.RESULT_OK:                    
                                if(parts.equals(partNo)){
                                    Toast.makeText(getBaseContext(), context.getString(R.string.sms_sent_message), 
                                        Toast.LENGTH_SHORT).show();                                                                                     

                           dbAdapter.createSentSMS(KEY_SMS_TYPE_SENT, phoneNo, currentMessage, Utils.getTimeStamp());                                                                       
                                }
                                break;
                            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                                if(parts.equals(partNo)){
                                    Toast.makeText(getBaseContext(), context.getString(R.string.sms_generic_failure_message), 
                                            Toast.LENGTH_SHORT).show();                                                                             

                                    dbAdapter.createSentSMS(KEY_SMS_TYPE_FAILED, phoneNo, currentMessage, Utils.getTimeStamp());                                                                        
                                }
                                break;
                            case SmsManager.RESULT_ERROR_NO_SERVICE:                                
                                if(parts.equals(partNo)){
                                    Toast.makeText(getBaseContext(), context.getString(R.string.sms_no_service_message), 
                                            Toast.LENGTH_SHORT).show();                                                                             

                                    dbAdapter.createSentSMS(KEY_SMS_TYPE_FAILED, phoneNo, currentMessage, Utils.getTimeStamp());                                                                        
                                }
                                break;
                            case SmsManager.RESULT_ERROR_NULL_PDU:                              
                                if(parts.equals(partNo)){
                                    Toast.makeText(getBaseContext(), context.getString(R.string.sms_null_pdu_message), 
                                            Toast.LENGTH_SHORT).show();                                                                             

                                    dbAdapter.createSentSMS(KEY_SMS_TYPE_FAILED, phoneNo, currentMessage, Utils.getTimeStamp());                                                                        
                                }
                                break;
                            case SmsManager.RESULT_ERROR_RADIO_OFF:                            
                                if(parts.equals(partNo)){
                                    Toast.makeText(getBaseContext(), context.getString(R.string.sms_radio_off_message), 
                                            Toast.LENGTH_SHORT).show();                                                                         

                                    dbAdapter.createSentSMS(KEY_SMS_TYPE_FAILED, phoneNo, currentMessage, Utils.getTimeStamp());                                                                        
                                }
                                break;
                        }
                    }
                };

                registerReceiver(sent, new IntentFilter(String.valueOf(parts.size()-1) + KEY_SMS_PART_NO + String.valueOf(j) + KEY_SMS_SENT  + phoneNumbers[i]));

                //I add the BroadcastReceiver-s to a Vector in order to keep track of them
                sentReceivers.add(sent);

                }
            }
            //I use an IntentService to do the actual sending
            Intent intent = new Intent(context, SMSSendService.class);
            intent.putExtra(KEY_SELECTED_PHONE_NUMBERS, phoneNumbers);
            intent.putExtra(KEY_SMS_MESSAGE, message);
            intent.putExtra(KEY_ACTION, KEY_REQUEST_SEND_SMS);
            startService(intent);
        } 
```

这是 IntentService 中的代码：

```
public void sendSMS(String phoneNo, String message, SmsManager sms)
    {           
        ArrayList<String> parts = sms.divideMessage(message); 

        ArrayList<PendingIntent> sentPIs = new ArrayList<PendingIntent>();

        for(int i=0; i<parts.size(); i++){
            sentPIs.add(PendingIntent.getBroadcast(context, 0, new Intent(String.valueOf(parts.size()-1) + KEY_SMS_PART_NO + String.valueOf(i) + KEY_SMS_SENT + phoneNo), 0));

        }

        sms.sendMultipartTextMessage(phoneNo, null, parts, sentPIs, deliveredPIs);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:29:07.573

您可以创建一个服务（不是 IntentService），您可以在其中实例化所有广播接收器并执行发送 SMS 逻辑。这样，您的 SMS-es 将在后台发送，您可以拦截发送/传递的广播。

# java - java中的新字体类型

> ID：10430898
> 
> 赞同：3
> 
> 时间：2012-05-03T11:57:10.407
> 
> 标签：java, swing, fonts, awt

在我的工作中，我们必须使用特定的字体类型，即 Futura std medium。

我有一个我写的 JFrame，我需要使用这种字体类型。我有 OTF 文档，但我找不到在我的代码中导入它的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T11:59:56.277

您是否尝试检查有关 Java 中 OTF 的答案：

[如何在 Java 中使用自定义字体和在 Java 中](https://stackoverflow.com/questions/5652344/how-can-i-use-a-custom-font-in-java)使用[OTF](https://stackoverflow.com/questions/872569/how-to-use-open-type-fonts-in-java)

我想它可以帮助你。

# c# - 如何使用 ANTLR 正确编码？

> ID：10430901
> 
> 赞同：1
> 
> 时间：2012-05-03T11:57:23.890
> 
> 标签：c#, java, encoding, antlr, ansi

我正在为学校做一个项目。我们正在制作一个静态代码分析器。对此的要求是分析 Java 中的 C# 代码，到目前为止，ANTLR 的表现非常好。

我制作了一些示例 C# 代码以在 Visual Studio 中使用 ANTLR 进行扫描。我分析了解决方案中的每个 C# 文件。但它不起作用。我收到内存泄漏和错误消息：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at org.antlr.runtime.Lexer.emit(Lexer.java:151)
    at org.antlr.runtime.Lexer.nextToken(Lexer.java:86)
    at org.antlr.runtime.CommonTokenStream.fillBuffer(CommonTokenStream.java:119)
    at org.antlr.runtime.CommonTokenStream.LT(CommonTokenStream.java:238) 
```

过了一会儿，我认为这是编码的问题，因为所有文件都是 UTF-8。我认为它无法读取编码的流。所以我打开了记事本++，我把每个文件的编码都改成了ANSI，然后就可以了。我不太明白 ANSI 是什么意思，这是一个字符集还是某种组织？

我想将编码从任何编码（可能是 UTF-8）更改为这种 ANSI 编码，这样我就不会再出现内存泄漏了。

这是制作 Lexer 和 Parser 的代码：

```
InputStream inputStream = new FileInputStream(new File(filePath));
CharStream charStream = new ANTLRInputStream(inputStream);
CSharpLexer cSharpLexer = new CSharpLexer(charStream);
CommonTokenStream commonTokenStream = new CommonTokenStream(cSharpLexer);
CSharpParser cSharpParser = new CSharpParser(commonTokenStream); 
```

*   有谁知道如何将 InputStream 的编码更改为正确的编码？
*   当我将编码更改为 ANSI 时，Notepad++ 会做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:19:37.330

读取文本文件时，您应该明确设置编码。尝试以下更改的示例

`CharStream charStream = new ANTLRInputStream(inputStream, "UTF-8");`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T01:26:00.607

我通过将 ImputStream 放入 BufferedStream 解决了这个问题，然后删除了字节顺序标记。

我猜我的解析器不喜欢这种编码，因为我也尝试过明确设置编码。

# python - kmedoids 使用具有各种距离函数的 Pycluster

> ID：10430912
> 
> 赞同：5
> 
> 时间：2012-05-03T11:58:10.407
> 
> 标签：python, windows, opencv

我正在为 Windows 使用 python 2.6。我正在研究 OpenCv 核心模块。我搜索了 Pycluster 中定义的 kmedoids 函数，但没有得到准确的答案。

我已经在 windows7 中安装了 Pycluster 1.50。有人可以解释如何使用 kmedoids 使用 Eucledian diatnce、L1 和 L2 距离、hellinger 距离和卡方距离吗？

通过搜索我知道到目前为止。

```
import Pycluster
from Pycluster import distancematrix, kmedoids 
```

kmedoid 函数有四个参数（如下所述），其中一个是距离。但我无法理解如何在 kmedoids 函数中指定不同的距离度量

```
clusterid, error, nfound = kmedoids (distance, nclusters=2, npass=1, initialid=None) 
```

强烈鼓励有关此事的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:00:04.470

正如 Shambool 所指出的，文档为您提供了答案。您不直接传递距离函数，而是传递成对距离矩阵。因此，首先使用您想要的任何距离度量进行计算，然后将其传递给 kmedoids

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:36:28.537

看来您甚至都懒得看[文档](http://bonsai.hgc.jp/~mdehoon/software/cluster/cluster.pdf)，在第 28-29 页上已清楚地解释了这一点。

# ruby-on-rails - 这个错误方法在哪里定义，我可以参考什么来在 Rails Api 中了解更多信息？

> ID：10430923
> 
> 赞同：0
> 
> 时间：2012-05-03T11:58:42.877
> 
> 标签：ruby-on-rails

查看这段代码时：

```
@user.errors.any? 
```

Rails 3.2.3 中定义的错误方法在哪里，或者我应该在 API 中查看什么以进一步理解它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:04:34.767

[http://apidock.com/rails/ActiveModel/Errors](http://apidock.com/rails/ActiveModel/Errors)

[http://apidock.com/rails/ActiveResource/Errors](http://apidock.com/rails/ActiveResource/Errors)

不知道是什么`@user`，虽然我认为它是一个 ActiveRecord 模型。

根据您要查找的信息，使用诸如“更改目录”到特定对象或类之类[的工具通常更容易。`pry`](https://github.com/pry/pry)从那里您可以查询对象以确定可用的方法，并且您通常可以直接从 pry 中查看源代码。

您正在寻找什么样的信息`errors`？IIRC 这只是一个哈希。

# apache-flex - Android 上的 Flex Mobile：强制运行时是或否？

> ID：10430924
> 
> 赞同：0
> 
> 时间：2012-05-03T11:58:46.387
> 
> 标签：apache-flex, mobile, air, adobe

如果我打包我的应用程序有或没有强制运行时，我必须做出决定。没有它，应用程序只有 1 mb，但用户必须下载一些额外的软件，并且可能不知道为什么。使用强制运行时，应用程序将是 10 mb，这可能会让人们停止下载。任何人都可以为这些选项中的任何一个提出更好的论据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:09:47.177

对“高”下载量的可用性。10MB 真的不算多，如果移动连接太慢，用户可以随时返回无线连接来获取您的应用程序。

我宁愿等待（或连接到不同的网络）几分钟，也不愿麻烦安装额外的软件来运行应用程序，而不是说我安装该软件需要额外的时间（这很可能需要比下载时间长10MB）。

# java - Java 线程转储优先级值与 linux 上的实际线程优先级不对应？

> ID：10430925
> 
> 赞同：8
> 
> 时间：2012-05-03T11:58:49.257
> 
> 标签：java, linux, multithreading, pthreads, jstack

我打算在我的 Java 代码中使用线程优先级。该应用程序应在我的 Linux 系统上运行：

```
>uname -a
Linux <host> 3.0.0-15-generic #26-Ubuntu SMP <date> x86_64 x86_64 x86_64 GNU/Linux

>java -version
java version "1.6.0_23"
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b23~pre11-0ubuntu1.11.10.1)
OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode) 
```

在网上阅读后，我现在使用以下命令启动我的测试应用程序：

```
sudo java -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=1 -jar ThreadPriorityTest.jar 
```

测试应用程序由以下两个类组成：

```
package ch.mypackage;

public class CountingRunnable implements Runnable {

    private long count = 0;
    private boolean goOn = true;

    public long getCount() {
        return count;
    }

    public void stop() {
        goOn=false;
    }

    public void run() {
        for(long iteration=0;goOn&&iteration<Long.MAX_VALUE;++iteration) {
            ++count;
        }
    }
}

package ch.mypackage;

public class PriorizedCountingThreads {

    private static final int NUM_MILLIS_TO_COUNT_FOR = 1*60*1000;
    private static CountingRunnable[] runnables;
    private static Thread[] threads;

    public static void main(String[] args) { 
        Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
        System.out.println("MIN_PRIORITY: "+Thread.MIN_PRIORITY);
        System.out.println("MAX_PRIORITY: "+Thread.MAX_PRIORITY);
        int numPriorityLevels = (Thread.MAX_PRIORITY-Thread.MIN_PRIORITY) + 1;
        init(numPriorityLevels);
        startThreads();
        try {
            Thread.sleep(NUM_MILLIS_TO_COUNT_FOR);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        stopRunnables();
        printCounts();
    }

    private static void printCounts() {
        for (int i = 0; i < runnables.length; ++i) {
            System.out.println(threads[i].getName() + " has priority: " + threads[i].getPriority() + " and count:" + runnables[i].getCount());
        }
    }

    private static void stopRunnables() {
        for (int i = 0; i < runnables.length; ++i) {
            runnables[i].stop();
        }
    }

    private static void startThreads() {
        for (int i = 0; i < threads.length; ++i) {
            threads[i].start();
        }
    }

    private static void init(int numPriorityLevels) {
        runnables = new CountingRunnable[numPriorityLevels];
        threads = new Thread[runnables.length];
        for (int i = 0; i < runnables.length; ++i) {
            int priority = i + 1;
            runnables[i] = new CountingRunnable();
            threads[i] = new Thread(runnables[i]);
            threads[i].setPriority(priority);
            threads[i].setName("PriorityThread_" + priority);
        }
    }
} 
```

如果我让程序计数一分钟（NUM_MILLIS_TO_COUNT_FOR=1 *60* 1000），那么我得到以下输出：

```
MIN_PRIORITY: 1
MAX_PRIORITY: 10
PriorityThread_1 has priority: 1 and count:12658044343
PriorityThread_2 has priority: 2 and count:19008431582
PriorityThread_3 has priority: 3 and count:30618946099
PriorityThread_4 has priority: 4 and count:34408365142
PriorityThread_5 has priority: 5 and count:36694025023
PriorityThread_6 has priority: 6 and count:40493710165
PriorityThread_7 has priority: 7 and count:42826305342
PriorityThread_8 has priority: 8 and count:42203891414
PriorityThread_9 has priority: 9 and count:43128747383
PriorityThread_10 has priority: 10 and count:43416371500 
```

根据此输出，优先级似乎具有预期的影响！但是，如果我使用“jstack”或“kill -s QUIT”生成线程转储，则会得到以下输出，这意味着每个线程都有相同的优先级（prio=10）：

```
 "PriorityThread_10" prio=10 tid=0x00007ff7e406f800 nid=0x12e6 runnable [0x00007ff7e2562000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_9" prio=10 tid=0x00007ff7e406d800 nid=0x12e5 runnable [0x00007ff7e2663000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_8" prio=10 tid=0x00007ff7e406b000 nid=0x12e4 runnable [0x00007ff7e2764000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_7" prio=10 tid=0x00007ff7e4069000 nid=0x12e3 runnable [0x00007ff7e2865000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_6" prio=10 tid=0x00007ff7e4067000 nid=0x12e2 runnable [0x00007ff7e2966000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_5" prio=10 tid=0x00007ff7e4065000 nid=0x12e1 runnable [0x00007ff7e2a67000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_4" prio=10 tid=0x00007ff7e4063000 nid=0x12e0 runnable [0x00007ff7e2b68000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_3" prio=10 tid=0x00007ff7e4061000 nid=0x12df runnable [0x00007ff7e2c69000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_2" prio=10 tid=0x00007ff7e405d000 nid=0x12de runnable [0x00007ff7e2d6a000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679)

"PriorityThread_1" prio=10 tid=0x00007ff7e4049800 nid=0x12dd runnable [0x00007ff7e2e6b000]
   java.lang.Thread.State: RUNNABLE
    at ch.mypackage.CountingRunnable.run(CountingRunnable.java:17)
    at java.lang.Thread.run(Thread.java:679) 
```

[如果我在 Windows 机器上执行相同操作，则根据我在此处](http://www.javamex.com/tutorials/threads/priority_what.shtml)找到的优先级映射，prio 值是正确的。

那么，这是 jstack 中的错误，还是我做错了什么？

如果我执行“top | grep java”，我会得到以下信息：

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
3394 root      20   0 4444m  15m 8376 S  789  0.1   0:47.52 java 
```

这意味着主线程的优先级为 20，而“top -H | grep java”会产生以下输出：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND     

 3457 root      15  -5 4444m  15m 8384 R   99  0.1   0:08.60 java
 3456 root      16  -4 4444m  15m 8384 R   97  0.1   0:08.41 java
 3455 root      17  -3 4444m  15m 8384 R   93  0.1   0:08.42 java
 3454 root      18  -2 4444m  15m 8384 R   97  0.1   0:08.27 java
 3453 root      19  -1 4444m  15m 8384 R   97  0.1   0:07.50 java
 3452 root      20   0 4444m  15m 8384 R   51  0.1   0:07.44 java
 3451 root      21   1 4444m  15m 8384 R   35  0.1   0:04.83 java
 3450 root      22   2 4444m  15m 8384 R   99  0.1   0:04.78 java
 3449 root      23   3 4444m  15m 8384 R   95  0.1   0:07.47 java
 3448 root      24   4 4444m  15m 8384 R   18  0.1   0:02.85 java 
```

这表明 java 线程优先级确实会影响 OS 线程的优先级。

但是 jstack 在 prio=10 中的值为 10 是从哪里来的呢？它只是一个任意值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T23:22:49.660

Java 7[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstack.html)状态

> **注意**- 此实用程序不受支持，并且可能会或可能不会在 JDK 的未来版本中可用。

所以我会假设 的输出`jstack`可能不准确，因为 linux 上的实现细节可能已经改变。

报告的值`htop -H`与您在问题中包含的[本文](http://www.javamex.com/tutorials/threads/priority_what.shtml)一致，并且是在 linux 内核中调度 java 进程的值。

如果您需要将 jstack 的输出映射到您报告的线程，`top -H`您只需将`nid`from转换`jstack`为十进制或`pid`从 from转换`top -H`为十六进制。[看这篇文章](http://nurkiewicz.blogspot.de/2012/08/which-java-thread-consumes-my-cpu.html)

关于您的源代码：程序在我运行时不会终止。编写生产多任务代码时的三个提示：

*   如果您知道一切都已完成（在调用`printCounts()`from之后`main`），请不要犹豫，`System.exit(0);`确保所有线程都已终止。
*   如果您想在并行执行期间测试代码的行为，通常最好先创建所有`Thread`s 并让它们同步工作。调用`await()`共享的[`CountDownLatch`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)或[`CyclicBarrier`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)作为工人的第一条语句通常可以很好地完成这个技巧。
*   虽然根据[Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)`boolean`，读写是原子的，但我建议将触发器变量（如您的字段）声明为 volatile，因为这也会影响编译器优化代码的方式。`goOn`

使用其中一个`volatile`或`System.exit(0)`您的基准测试正常终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:55:03.363

Java 中的线程优先级是一个非常敏感的主题......你可以在这里找到关于 StackOverlow 的有趣帖子：[https ://stackoverflow.com/a/2170304/1343096](https://stackoverflow.com/a/2170304/1343096)

基本上尝试将您的优先政策更改为 42 ：

```
-XX:ThreadPriorityPolicy=42 
```

让我们知道它是否对您有用！

您可以通过以下链接找到所有解释。

# javascript - 查找选择器的第一个父级

> ID：10430926
> 
> 赞同：2
> 
> 时间：2012-05-03T11:58:51.927
> 
> 标签：javascript, jquery, dom

考虑这个示例 html

```
<div class="A">
    <div class="B">
        <span class="C">Sample text</span>
        <div class="D">
            <div class="E">Clickable Text</div>
        </div>
    </div>
</div> 
```

还有一些 jQuery

```
$(".E").click(function(){
    //body
}); 
```

`$(this)`获得匹配选择器的父级的最简单方法是什么？例如，在示例中说我需要获取 div where `class="A"`。目前因为我知道我可以做的 html 的结构

```
$(this).parent().parent(); 
```

但我正在寻找一种不管结构如何都可以工作的方法。类似的东西

```
$(this).findFirstParent(".A"); 
```

我希望我是可以理解的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:59:55.340

```
$(".E").click(function(){
    console.log($(this).closest('.A'));
    /* console.log($(this).parents('.A')); works fine too */
}); 
```

见
[http://api.jquery.com/closest/](http://api.jquery.com/closest/)
[http://api.jquery.com/parents/](http://api.jquery.com/parents/)

请注意，这`parent()`与方法不同`parents()`（第一个仅查找一个祖先）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T12:00:21.753

第一个解决方案：

```
$(this).closest('.A') 
```

来源：[http](http://api.jquery.com/closest/) ://api.jquery.com/closest/ 这将在遍历匹配选择器时返回第一个父级。

第二种解决方案：

```
$(this).parents('.A:first') 
```

来源：[http](http://api.jquery.com/parents/) ://api.jquery.com/parents/ 这将返回所有匹配选择器的父母

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T12:00:26.777

关于什么

```
$(this).closest(".A"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T12:13:08.373

这就是我会做的方式

```
$(this).parents("div.A") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T12:03:54.267

jQuery 父选择器可能会帮助您。您可以将它与您正在寻找的课程相结合。请参阅文档@ [http://api.jquery.com/parent-selector/](http://api.jquery.com/parent-selector/)

# gwt - 使用 GWT jsni 在 javascript 函数中调用方法

> ID：10430929
> 
> 赞同：0
> 
> 时间：2012-05-03T11:59:04.057
> 
> 标签：gwt, jsni

我想要的是调用这段代码

```
public native void eventClickHandler( String id) /*-{
  $wnd.jQuery('#' + id).bind('jqplotDataClick',function(ev, seriesIndex, pointIndex, data) {
    this.@it.codegen.gwt.jqplot.client.charts.JQChart::onClick(Ljava/lang/String;Ljava/lang/String;)(seriesIndex, pointIndex);
  });
}-*/; 
```

这里的 onClick 方法是一个普通的 java 方法，我为此使用了 GWT 和 JSNI 接口。提前致谢！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:33:18.577

你以前用过 jQuery 吗？`this`在传递给 jQuery 的函数中具有特殊含义。即使在 JSNI 中，当它在 Java 文件中时，它的行为也不会像 Java `this`，而是像 JavaScript `this`。

试试这个：

```
public native void eventClickHandler( String id) /*-{
  var origThis = this;
  $wnd.jQuery('#' + id).bind('jqplotDataClick',function(ev, seriesIndex, pointIndex, data) {
    origThis.@it.codegen.gwt.jqplot.client.charts.JQChart::onClick(Ljava/lang/String;Ljava/lang/String;)(seriesIndex, pointIndex);
  });
}-*/; 
```

# validation - Selenium IDE 登录验证错误测试

> ID：10430930
> 
> 赞同：1
> 
> 时间：2012-05-03T11:59:04.340
> 
> 标签：validation, selenium, selenium-ide, custom-errors

我有一个登录页面。有用户名和密码的文本框。

如果在不输入用户名和密码的情况下单击登录按钮，则跨度显示为“无效登录”。

如果你只是输入用户名，一个跨度会显示“输入密码”

如果你只是输入密码，一个跨度会显示“输入用户名”

```
<span class="field-validation-error" data-valmsg-for="ErrMsg" data-valmsg-replace="true">Invalid login</span>

<span class="field-validation-error" data-valmsg-for="ErrMsg" data-valmsg-replace="true">Enter password</span>

<span class="field-validation-error" data-valmsg-for="ErrMsg" data-valmsg-replace="true">Enter username</span> 
```

如何在 Selenium IDE 上测试这些错误？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:37:47.193

您的测试将是这样的（将按钮和字段定位器替换为实际的）：

```
click | id=login
assertElementPresent | css=span:contains('Invalid login')
type | id=name | correctName
click | id=login
assertElementPresent | css=span:contains('Enter password')
type | id=name | 
type | id=pass | correctPass
assertElementPresent | css=span:contains('Enter username') 
```

此代码将假设客户端验证负责所有这些警告（我认为是这样）。`waitForElementPresent | css=span:contains('warning_string')`否则，在断言之前添加会很有用。在第一次单击步骤之前，这两个字段也应该为空。

# c# - 从数据行读取值

> ID：10430939
> 
> 赞同：0
> 
> 时间：2012-05-03T11:59:33.700
> 
> 标签：c#

是否可以从数据行中读取值？

我有这个代码：

```
bool CatchweightItem;
if (dr_art_line["CatchweightItemt"].ToString() -> READ VALUE)
{
    CatchweightItem = false;
}
else
{
    CatchweightItem = true;
} 
```

所以我想知道是否可以读取该字段的值。如果值为`false`，则将变量设置为`false`，如果为真，则将变量设置为`true`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:35:02.373

```
 if(string.Compare(Convert.ToString(dr_art_line["CatchweightItemt"])+"","false",true)==0)
         { 
CatchweightItem = false; }
 else {  
CatchweightItem = true; } 
```

这将避免来自数据库的空值以及不区分大小写的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:01:39.960

```
bool CatchweightItem = Convert.ToBoolean(dr_art_line["CatchweightItemt"].ToString()); 
```

读[这个](http://msdn.microsoft.com/en-us/library/system.convert.toboolean.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:13:34.377

如果 DataColumn[`DataType`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.datatype.aspx)仍然存在`bool`，则应使用此强类型方法：

```
bool isCatchweightItem = dr_art_line.Field<bool>("CatchweightItemt"); 
```

[`DataRowExtensions.Field<T>`方法（数据行、字符串）](http://msdn.microsoft.com/en-us/library/bb360891.aspx)

它还支持可为空的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T12:04:09.320

您必须使用 == 运算符来检查值，如下所示：

```
bool CatchweightItem;
if (dr_art_line["CatchweightItemt"].ToString() == "FALSE")
{
    CatchweightItem = false;
}
else
{
    CatchweightItem = true;
} 
```

实际上，您不需要所有这些代码，您也可以这样做更短更简洁：

```
bool CatchweightItem = (dr_art_line["CatchweightItemt"].ToString() == "TRUE") 
```

# visual-c++ - 如何在 VC++ 应用程序中将最低要求的平台从 IE7 更改为 IE9

> ID：10430941
> 
> 赞同：1
> 
> 时间：2012-05-03T11:59:37.477
> 
> 标签：visual-c++, mfc, jqplot

我的 Windows 7 机器上安装了 IE9。

1.  使用这个版本的 IE，当我查看包含 jqPlot 图形的本地 HTML 页面时，一切都是响应式的（图形渲染和缩放非常快）。
2.  如果我将浏览器的浏览器模式（F12 -> 浏览器模式）设置为 IE7 或 IE8，页面会变得非常无响应（预期）。

我目前正在使用 VC++ 2008 开发 MFC 应用程序。该应用程序将 IE7 定义为其最低要求平台，如下所示：

```
In targetver.h

...
#ifndef _WIN32_IE               // Specifies that the minimum required platform is Internet Explorer 7.0.
#define _WIN32_IE 0x0700        // Change this to the appropriate value to target other versions of IE.
#endif 
```

我想做的是改为以 IE9 为目标，因为当应用程序导航到我的本地 HTML 页面时，对页面执行的任何操作都非常慢（如上面的案例 2）。

有人知道该怎么做吗？我尝试将“_WIN32_IE”设置为“0x0900”，但这似乎没有任何区别。我需要更改任何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:25:33.317

**更新：**

添加

```
<meta http-equiv="X-UA-Compatible" content="IE=9" > 
```

到我的 HTML 文件的 head 部分似乎确实提高了整体性能。

我围绕花费最多时间的一段 JavaScript 代码进行了一些速度测试：

```
var start = (new Date).getTime();
for (var i = 0; i < targetPlots.length; i++) {
    targetPlots[i].replot();
    controllerPlots[i].replot();
}
var diff = (new Date).getTime() - start;
alert(diff); 
```

**添加元标记之前**

```
diff ≈ 6342 ms 
```

**添加元标记后**

```
diff ≈ 394 ms 
```

**使用独立的 IE9**

```
diff ≈ 173 ms 
```

394 毫秒还不错。

谢谢指点！

# visual-studio-2010 - Visual Studio 2010“无目标框架”

> ID：10430943
> 
> 赞同：1
> 
> 时间：2012-05-03T11:59:43.417
> 
> 标签：visual-studio-2010, ide

我的 Visual Studio 2010 Ultimate 有一个大问题。我安装了它，但在我的项目首选项中我无法选择框架目标。它只是空的，即使我安装了 .NET 4 Full ....

任何人都可以帮忙吗？

# eclipse - Git、SVN 和 Eclipse 工作流程

> ID：10430958
> 
> 赞同：5
> 
> 时间：2012-05-03T12:00:27.277
> 
> 标签：eclipse, git, svn, egit

我正在尝试采用以下工作流程：

1.  `git svn clone`通过命令行创建 svn 存储库（`egit`不支持 git-svn）
2.  在 Eclipse 中打开项目，`egit`因为我宁愿使用 egit 来分支、合并、提交等...
3.  当我准备好提交更改时，我使用 use`git svn dcommit`提交回 svn

我在第 2 步遇到问题，不明白如何导入 git 项目，eclipse 告诉我我无法导入它以使用它当前所在的同一目录，因为另一个同名项目已经存在。这令人困惑。

任何人都知道如何做到这一点？还想听听其他使用`egit`和的工作流示例`git svn`。我知道最好通过命令行来完成这一切，但是，我正在努力为我的团队中不习惯命令行界面等的开发人员简化向 git 的迁移...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T14:22:33.580

我曾简单地使用过 egit 插件（实际上我最近停止使用它，只使用 msysgit 作为我的 Git guiclient 并与 Eclipse 分开运行它）。我发现 Eclipse 很忙，添加这个插件会减慢它的速度（至少对我来说）。

在 Eclipse 中设置一个已经克隆的项目时我做了什么：

1.  在日食中。文件 -> 导入 -> 现有项目到工作区

2.  选择项目的根目录。不要检查复制项目到工作区。点击完成。

3.  项目导入后。右键单击项目，转到团队 -> 共享项目

4.  选择Git作为repo类型，点击next

5.  在项目的父文件夹中检查使用或创建 repo。由于您已经克隆了项目，它将使用 git 进行跟踪。当您选中此选项时，它将显示项目、路径和 repo (.git)。

6.  单击完成，一切就绪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:34:09.987

我认为你最好使用[SubGit](http://subgit.com)而不是 git-svn。

SubGit 在服务器端工作。它会自动同步 Subversion 和 Git 存储库之间的所有修改，以对来自任何一方的每次传入修改进行同步。

From the client perspective SubGit enabled repository is a usual Git repository, so you may pull from and push to it. Please refer to [SubGit documentation](http://subgit.com/documentation/) or [SubGit vs. git-svn comparison](http://subgit.com/documentation/gitsvn.html) for more details.

# objective-c - iOS系统声音服务无法调节音量

> ID：10430963
> 
> 赞同：0
> 
> 时间：2012-05-03T12:00:55.327
> 
> 标签：objective-c, ios, xcode, audio, audiotoolbox

在.h中：

```
#import <AudioToolbox/AudioToolbox.h>
@interface ViewController : UIViewController {
    SystemSoundID beatAudio;
} 
```

米：

```
//File path already created
AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:path], &(beatAudio));
AudioServicesPlaySystemSound(beatAudio); 
```

声音很完美，但是当我上下切换音量条时，这个声音的音量不受影响。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:25:53.373

您已将其创建为系统声音，为了使它们受到音量控制的影响，您必须更改手机设置

进入设置->声音并选择“使用按钮更改”以打开。

您可能不需要将此声音作为系统声音播放？

# iphone - 在 iPhone 应用程序中创建 .swf

> ID：10430964
> 
> 赞同：1
> 
> 时间：2012-05-03T12:00:59.347
> 
> 标签：iphone, ios, flash

在任何地方都找不到关于此的任何信息（也许有充分的理由......） - 有谁知道是否有任何库可以在 iOS 中创建简单的 SWF？我希望能够让用户构建一个简单的动画，然后将其作为 SWF 通过电子邮件发送出去。如果不可能，我可能会走动画 gif 路线。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:11:43.667

您可以使用具有 ac 接口的 libsswf。[在这里](http://sswf.sourceforge.net/libsswf/index.html#c_library)检查。

# php - PHP mysql如何关联三个表，显示来自不同表的输出

> ID：10430966
> 
> 赞同：5
> 
> 时间：2012-05-03T12:01:03.173
> 
> 标签：php, mysql, sql, facebook

我有这张图![发布提要](../Images/1a01cf5a99c2a0e1c84382eeb4dd7c3b.png)

我想做的是有这个输出： ![喜欢帖子 - 喜欢 Facebook](../Images/72fb0e81520fba1527fe82f7ddffb9bc.png)

你是如何做到这一点的查询的？

我有这个代码

```
SELECT users.firstname, users.lastname, 
       users.screenname, posts.post_id, posts.user_id,
       posts.post, posts.upload_name, 
       posts.post_type, posts.date_posted
FROM website.users users
INNER JOIN website.posts posts ON (users.user_id = posts.user_id)
ORDER BY posts.pid DESC
//PROBLEM with this one is that it only views the post from all users.

//SO I added
SELECT COUNT(user_id) AS friends, SUM(user_id = ?) AS you, user_id
FROM feeds WHERE post_id = ?
//This one will give you two fields containing how many different users **feeds** the
post 
```

请帮助各位。实际上，我只是在关注**Facebook 的**“LIKE”状态，唯一的问题是我不是这类东西的业余爱好者，所以我很高兴听到你所有的答案。我真的需要你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:13:02.553

如果我对您的理解正确，您需要与表进行外部连接（即使没有关联也`feeds`可以保留所有内容），然后将每个帖子的所有此类提要和所需信息合并在一起。`posts``feeds``GROUP BY post.pid``SELECT`

我使用 MySQL 的[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)函数来获取对给定帖子有“提要”的所有用户（最多）的逗号分隔列表（如果需要，您可以使用修饰符[`group_concat_max_len`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_group_concat_max_len)更改分隔符）。`SEPARATOR`

```
SELECT users.firstname, users.lastname, 
       users.screenname, posts.post_id, posts.user_id,
       posts.post, posts.upload_name, 
       posts.post_type, posts.date_posted,
       COUNT(feeds.user_id) AS friends,   -- number of "likes"
       SUM(feeds.user_id = ?) AS you,     -- did I like this?
       GROUP_CONCAT(feeds.user_id)        -- who likes it?
FROM website.users users
INNER JOIN website.posts posts ON (users.user_id = posts.user_id)
LEFT  JOIN website.feeds feeds ON (posts.post_id = feeds.post_id)
GROUP BY posts.pid
ORDER BY posts.pid DESC 
```

* * *

**更新**

获取“赞”过帖子的用户全名，不包括自己，需要`users`二次加入表：

```
SELECT users.firstname, users.lastname, 
       users.screenname, posts.post_id, posts.user_id,
       posts.post, posts.upload_name, 
       posts.post_type, posts.date_posted,
       COUNT(feeds.user_id) AS friends,                      -- number of "likes"
       SUM(feeds.user_id = ?) AS you,                        -- did I like this?
       GROUP_CONCAT(
         CASE WHEN NOT likes.user_id = ? THEN                -- exclude self
           CONCAT_WS(' ', likes.firstname, likes.lastname)   -- full names
         END
       )
FROM website.users users
INNER JOIN website.posts posts ON (users.user_id = posts.user_id)
LEFT  JOIN website.feeds feeds ON (posts.post_id = feeds.post_id)
LEFT  JOIN website.users likes ON (feeds.user_id = likes.user_id)
GROUP BY posts.pid
ORDER BY posts.pid DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T12:18:27.510

如果您想为所有用户执行此操作并同时获取提要，则必须加入此`feed`表：

```
SELECT u.firstname, u.lastname, 
   u.screenname, p.post_id, p.user_id,
   p.post, p.upload_name, 
   p.post_type, p.date_posted,
   COUNT(f.user_id) AS friends, SUM(f.user_id = ?) AS you
FROM website.users u
INNER JOIN website.posts p ON (u.user_id = p.user_id)
LEFT  JOIN website.feeds f ON (p.post_id = f.post_id)
GROUP BY p.pid
ORDER BY p.pid DESC 
```

这个应该可以解决...

# c# - 在visual studios 2010的gridview中添加下载超链接

> ID：10430968
> 
> 赞同：0
> 
> 时间：2012-05-03T12:01:15.257
> 
> 标签：c#, visual-studio-2010, gridview, hyperlink

我的问题很简单，我想让gridview的最后一列成为我计算机本地文件的下载链接。

我的数据表有 3 列：

```
User_id, request_id, FilePath 
```

FilePath 是我计算机上文件的路径（字符串），我一直在尝试的是：在网页上的 gridview 中显示前 2 列（User_id 和 request_id）。在第 3 列中，我添加了一个超链接字段并尝试将它（使用属性 DataNavigateUrlField）链接到 FilePath 列的内容。

我最终得到了我什至无法单击的死链接，它们只是在鼠标悬停时改变颜色。

有人对此有所了解吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:45:45.390

一个可能的解决方案可能是`TemplateField`为您的超链接列使用 a：

```
<asp:GridView AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <a href='<%# DataBinder.Eval(Container.DataItem, "FilePath") %>'>
                    <%# DataBinder.Eval(Container.DataItem, "FilePath")%>
                </a>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

将创建所需的输出：

```
<tr>
    <td>
        <a href='c:/directory/file.xxx'>c:/directory/file.xxx</a>
    </td>
</tr> 
```

似乎 a`HyperLinkField`不接受其`DataNavigateUrlFields`属性的文件路径。

* * *

我试图通过设置`DataNavigateUrlFormatString`属性来超越它：

```
<asp:HyperLinkField DataNavigateUrlFormatString="file:///{0}" DataNavigateUrlFields="FilePath" DataTextField="FilePath" /> 
```

但问题仍然存在，只会产生

```
<tr>
    <td>
        <a>c:/directory/file.xxx</a>
    </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:11:58.327

尝试使用这个

```
WebClient.DownloadFile(Uri,String) 
```

并阅读此如何获取所需的事件[超链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)

# wpf - 如何在 WPF 工具包图表控件中设置水平轴间隔？

> ID：10430969
> 
> 赞同：2
> 
> 时间：2012-05-03T12:01:18.477
> 
> 标签：wpf, charts, wpftoolkit

我正在使用 WPF 工具包中的图表控件。如何设置 X 轴的间隔？

我有以下 XAML 代码：

```
<Grid Height="800">

        <chartingToolkit:Chart  Name="lineChart" Title="Pressure over Time" 
    VerticalAlignment="Top" Margin="20,50,20,0" Height="500">

            <chartingToolkit:Chart.Axes>
                <chartingToolkit:LinearAxis Title="Pressure" Orientation="Y" Interval="100" />
                <chartingToolkit:LinearAxis Title="Time" Orientation="X" Interval="100" />
            </chartingToolkit:Chart.Axes>

            <chartingToolkit:LineSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}"  Name="Test"
                                        IsSelectionEnabled="True" ClipToBounds="False">
            </chartingToolkit:LineSeries>

        </chartingToolkit:Chart>

        <Button Width="100" Height="24" Margin="20,556,1058,220" Content="More" Name="Button1" />

    </Grid> 
```

Y 轴工作正常，它显示 100 的间隔，但 X 轴将自身置于顶部（请参阅添加的图像），并且间隔是点的确切数量。为什么它不听 xaml 中的 Interval="100" 属性？为什么它不把自己放在底部？

![图表样本](../Images/db1636e4219b3a08c648a7dfb24f95f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:44:33.253

对于 linearAxis 的位置，您可以将`Location`属性设置为`"Bottom"`

在代码中：

```
<chartingToolkit:LinearAxis Title="Time" Orientation="X" Interval="100" 
Location="Bottom" /> 
```

对于间隔问题，我不知道...

# padding - jqplot中倒轴上的填充值

> ID：10430972
> 
> 赞同：2
> 
> 时间：2012-05-03T12:01:22.157
> 
> 标签：padding, jqplot

我想知道如何将正确的填充值设置为 jqplot 轴，以便点不会呈现在边界上。

这是我的代码

```
yaxis:{     
    max: 1,
    min: 200,
    numberTicks: 5,
    tickOptions:{
        formatString:'%i'
    }
 } 
```

这将显示一个倒置轴，从底部的 200 到顶部的 1。值也从 1 到 200 不等。我尝试使用 maxPad、minPad 甚至手动设置刻度（刻度：['200'、'150'、'100'、'50'、'1']）但没有运气至今。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:37:05.720

这既有趣又令人放松。您的问题的答案很明显，因为在设置轴的最小值/最大值时显然会忽略填充设置。因此，您应该使用将点移离边界的方法只是增加最小/最大值[，就像在代码中一样](http://jsfiddle.net/Boro/83Ecv/)。

第一张图增加了最小值/最大值以将点从绘图的边界移开，下面的图（为相同的数据创建）没有。

为了避免这类问题和这些参数的手动设置，为什么没有一种可以从给定数据计算并返回最小值/最大值的方法。然后在您的图表中为每个值应用您喜欢的间隙（垫）。就像`minMax(data)`在代码中使用方法一样。

**顺便说一句：**感谢您教我如何反转我不知道这个技巧的情节的值。:)

**编辑**

[请参阅另一个版本，该版本提供了不涉及使用 jqPlot 脚本进行操作的解决方案。](http://jsfiddle.net/Boro/ekrT8/)

在这种方法中，我基本上隐藏了不需要的值标签，刻度线仍然存在。恐怕如果不与绘图的画布交互，您将无法删除那些不需要的刻度。

# mysql - 每个用户的积分总和大于某个值并已排序

> ID：10430973
> 
> 赞同：2
> 
> 时间：2012-05-03T12:01:22.670
> 
> 标签：mysql, sql

我知道这应该很容易，但今天不是我的日子。

我有一张这样的桌子

```
user     |  points     
---------|------------
Smith    |    100
Neo      |    200
Morpheus |    300
Smith    |    100
Neo      |    200
Morpheus |    300 
```

我正在寻找的选择会产生这个

```
user     |  points     
---------|------------
Morpheus |    600
Neo      |    400 
```

所以，我想打印出总分超过 300 分的用户，我想按总和从高到低的顺序打印出来。

我在用着：

```
$ mysql -V
mysql  Ver 14.14 Distrib 5.1.61, for redhat-linux-gnu (x86_64) using readline 5.1 
```

我一直在尝试的 SQL 是这样的：

```
SELECT user, SUM(points) AS sum FROM users GROUP BY user HAVING SUM(points)>300 
```

这给了我所有正确的输出，尽管它没有给我排序的输出。我确实尝试插入 ORDER BY 但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T12:03:07.057

```
SELECT user, SUM(points) AS sum 
FROM users 
GROUP BY user 
HAVING sum > 300
order by sum desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:05:03.970

应该只是

```
SELECT user, SUM(points) AS sum FROM users GROUP BY user HAVING SUM(points)>300 
ORDER BY SUM(points) DESC 
```

除非我错过了什么

# java - 试图通过 html 向 jface tableviewer 添加基本的富文本支持？

> ID：10430976
> 
> 赞同：0
> 
> 时间：2012-05-03T12:01:39.303
> 
> 标签：java, html, eclipse-rcp, jface

所以我正在尝试向 jface tableviwer 添加基本的富文本支持，例如粗体、下划线、斜体和突出显示，并且还需要能够将其保存到模型中，所以我认为一个不错的方法是使用 html 的子集（或 xml）标签。但是我似乎找不到在 tableviewer 中呈现 html 的方法。我看过 StyledCellLabelProvier，但它的 styledranges 似乎只支持前景色和背景色，而不支持字体和类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:17:42.933

看看所有的公共领域`StyleRange`。除了前景色和背景色之外，还有很多东西。提示：它们继承自`org.eclipse.swt.graphics.TextStyle`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:32:01.977

`TextLayout`绘制文本所调用的类`StyledCellLabelProvider`不使用`StyleRange`，而是使用它的超类`TextStyle`。`fontStyle`不是 的属性`TextStyle`，因此被忽略。`TextStyle.font`明确设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:23:33.210

您不能在表格查看器中呈现 HTML，因为这需要在 SWT 中呈现 HTML `Table`，并且*需要*在所有支持的平台和窗口系统上的表格中呈现原生 HTML。

# rest - WADL 中缺少对象

> ID：10430979
> 
> 赞同：0
> 
> 时间：2012-05-03T12:01:40.300
> 
> 标签：rest, jersey, wadl

我有一个使用 Jersey 的 Web 应用程序，我想用 WADL 描述它的 REST API。Jersey 默认生成 .wadl 文件，但它不包含对象（我的一些 REST 调用发送/返回对象）。实际上，我得到这样的东西：

```
<method id="save" name="POST">
<request>
<representation mediaType="application/json"/>
</request>
<response>
<representation mediaType="application/json"/>
</response>
</method> 
```

如何创建描述对象的 .wadl？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:07:21.160

只有当您接受/返回 application/xml 类型时，XML Schema 才会描述可接受和返回的类型。没有普遍接受的 JSON 类型或结构的描述，因此从 Jersey 生成的 WADL 不包含相关描述（仅仅是因为没有标准的方法来实现它）。

# java - 这是什么算法？盒子包装/背包？

> ID：10430981
> 
> 赞同：4
> 
> 时间：2012-05-03T12:01:43.010
> 
> 标签：java, algorithm, dynamic-programming

昨晚我正在开发一个应用程序，遇到了一个特定的问题，我确信它可能有一个有效的算法来解决它。有人可以建议吗？

问题：

TL;DR：也许一张图片会有所帮助：[http](http://www.custom-foam-inserts.com/) ://www.custom-foam-inserts.com/ 。我有很多物品可以放在不同的隔间里：我想尽量减少需要携带的箱子数量。

.

我有一套 N 件昂贵的电子设备，我想将它们装入专门设计的保护盒中。这些盒子每个都有许多隔间，每个隔间都可以容纳单个物品：其中一些专门设计用于容纳特定物品（即，相机形状的孔），而另一些则是通用的（矩形孔）。我事先知道有 C 种不同尺寸的隔间以及它们的尺寸。

这些盒子有 L 种不同的布局，每个都至少有一个隔间。布局可能是“两个大矩形隔间和 4 个小圆形隔间”。

每个隔间尺寸至少存在一个布局，但我有不适合任何隔间尺寸的物品。每件物品至少适合一个隔间，并且可能适合多个不同的隔间：例如，我的数码单反相机可能适合“中号矩形”隔间，宽松适合“大矩形”，完美适合“单反相机隔间”，但不适合“小圆圈”。为此，我列出了适合每个项目的隔间。

这些项目是中度异构的——例如，可能有 50 个相同尺寸的项目和 20 个另一种尺寸的项目。

每个盒子有两个成本 Volume 和 Dollars（但是 D ~与 V 成正比）。我需要尽量减少其中一项或两项费用，同时将我所有的物品都装进盒子里。由于盒子的布局，最佳解决方案可能包含未使用的隔间。如果两种溶液的体积相同，则选择未使用的隔间最多的一种。因为每个隔间都存在于至少一个布局中，并且每个项目至少适合一个隔间，所以总是有一个适合所有项目的解决方案。

项目数：<=2000，平均箱数 150。隔间数：<= 1000。布局数：<= 1000。

关于这个有什么想法吗？我看过一些背包和装箱算法，但我不确定它们是否适合。非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:10:22.090

从问题描述来看，这确实似乎是背包问题，因为您必须最大限度地利用可用空间，同时牢记您的选择*权重*。

根据您所追求的，您还可以考虑使用[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)。由于这个问题是 NP Complete，所以如果您需要添加更多项目，运行时间最终会爆炸，所以如果我需要与所需时间无关的最佳解决方案，我会主要使用这个。

另一方面，遗传算法应该能够在较短的时间内提供一些解决方案，但是它提供的解决方案可能不如背包算法提供的解决方案，所以我会选择遗传算法如果我有时间限制，我需要提供一些解决方案，我不在乎它是否不是绝对最好的。

# android - Android ListView 使用 3 列布局选择要删除的项目

> ID：10430986
> 
> 赞同：0
> 
> 时间：2012-05-03T12:02:09.593
> 
> 标签：android, checkbox, android-listview

我想`Listview`在 android 中实现一个我有可能启用删除模式，其中用户可以选择要删除的条目。它应该类似于android中的消息应用程序。

我已经有一个`ListActivity`左侧有一个图标，右侧有一个文本。我现在想`CheckBox`在列表条目的右侧添加一个浮动。我的`ListActivity`一个朋友在另一个问题中列出了它：[android listactivity background color](https://stackoverflow.com/q/10426451/1307620)。

布局应该是：

*   **左图**_
*   **中心**列表项
*   **删除选择的**右复选框****

 **我怎样才能做到这一点？`ListView`我可以使用框架中的标准项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:44:05.183

我猜您希望 a`CheckBox`出现（仅）何时从`ListView`. 假设您使用另一个问题的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:background="@color/darkbluelogo" >

    <ImageView android:id="@+id/list_image"
        android:layout_width="48dip"
        android:layout_height="48dip"
        android:contentDescription="@id/list_image"
         />
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="fill_parent"
        android:padding="5dp" 
        android:background="@color/darkbluelogo"
        android:scrollingCache="false" 
        android:cacheColorHint="#00000000" >

        <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@+id/title" >
        </TextView>

        <TextView
            android:id="@+id/datetime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@+id/datetime" >
        </TextView>

    </LinearLayout>
       <CheckBox
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:visibility="gone" />
</LinearLayout> 
```

`ListView`开始时将`CheckBox`不存在，内容`TextViews`将占据所有空间。`getView`在适配器的方法中添加一个标志，表示`CheckBox` 必须显示 （在这里，您将`CheckBox`' 从布局中的可见性设置为可见）。当删除项目的时候修改标志然后调用`notifyDataSetChanged()`所以`ListView`重绘它的孩子，这次是`CheckBox`现在。

注意：您必须存储`CheckBoxes`自己的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:23:18.783

首先，您需要为列表条目自定义布局。一个包含 ImageView 、 TextView 和 CheckBox 的简单 RelativeLayout 就足够了。

然后，您可能想要构建自己的自定义适配器，该适配器可以扩展 BaseAdapter（或 SimpleAdapter 或 CursorAdapter 或 ArrayAdapter 或...）。适配器会将列表的数据绑定到您的自定义布局。例如，如果您的数据包含在游标中，它将如下所示：

```
private class MyCustomAdapter extends CursorAdapter {

        public MyCustomAdapter(Context context) {
            super(context, null);
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {

            //Return a list item view
            return getLayoutInflater().inflate(R.layout.my_custom_list_item_layout, parent, false);

        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {

            //Get views from layout
            final ImageView imageView = (ImageView) view.findViewById(R.id.list_item_image);
            final TextView textView = (TextView) view.findViewById(R.id.list_item_text);
            final CheckBox checkBox = (CheckBox) view.findViewById(R.id.list_item_checkbox);

            //Get data from cursor
            final String text = cursor.getString(...); 

            //Add listener to the checkbox
            checkBox.setOnClickListener(new OnClickListener() {...});

            //Bind data
            textView.setText(text);
        }
    } 
```**

# connection - 插入 USB 调制解调器时检测并自动连接互联网的 Applescript

> ID：10430990
> 
> 赞同：1
> 
> 时间：2012-05-03T12:03:03.937
> 
> 标签：connection, usb, applescript, modem

我是新来的。我需要关于applescript的帮助。

目前我正在使用 USB 调制解调器连接到互联网，这是我的日常工作，所以我可以工作。但是我想让它在我将 USB 调制解调器插入我的 MBP 时自动运行，并运行脚本以使用已设置的配置连接互联网。

这是我用来连接到 Internet 的脚本。

```
tell application "System Events"
tell current location of network preferences
    set modem to service "Flexi EVDO"
    set isConnected to connected of current configuration of modem
    if isConnected then
        disconnect modem
    else
        connect modem
    end if
end tell
end tell 
```

我使用 automator 运行此脚本并将其另存为 App。

我想要实现的是，如果我可以在插入 USB 调制解调器时直接运行这个脚本。我一直在检测调制解调器脚本。我对此一无所知。

谁能帮我？提前致谢。真的很感谢每一条评论。对不起，我的英语不好。

谢谢！再次。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:13:30.030

你的英语很好，所以不用担心。要做的第一件事是确定您是否可以检测到调制解调器是否已插入。我们可以为此使用系统分析器。插入您的设备并在终端中运行以下命令。在输出中找到您的设备并找到其序列号。

```
system_profiler SPUSBDataType 
```

将该序列号放在此脚本的第一行...

```
set deviceSerialNumber to "CCCB1010221740331521362502"

try
    set theResult to do shell script "system_profiler SPUSBDataType | grep " & deviceSerialNumber
    set theStatus to "The device is available."
on error
    set theStatus to "The device is not available."
end try 
```

通过插入和拔出设备来查看脚本是否有效。如果是这样，那么您就有了解决方案的基础知识。现在你只需要一种方法来自动运行它。在 applescript 中，您可以创建一个“保持打开”应用程序，您可以使用它每隔几秒钟自动运行一次脚本。您可以谷歌搜索如何创建它。

NOTE: I do not think it is a good solution to have a script running every few seconds for this purpose. It's a waste of your computer's resources. However I can't think of another method to suggest. I really think your best solution is to just run your current script by hand.

# javascript - 如何计算与DIV位置相关的鼠标坐标

> ID：10430996
> 
> 赞同：3
> 
> 时间：2012-05-03T12:03:26.120
> 
> 标签：javascript, jquery

我有一个 DIV，我可以使用 .offset() 获得偏移量。

但我正在尝试获取与 div 相关的鼠标位置。当我悬停 DIV 时，我可以获得鼠标的 x 和 y 偏移量。但那些将与 Document 相关的计算。但应按以下方式计算。

```
 For example DIV dimensions are 200 and 200.
 then it should calculate offsets related to (0,200)(200,0),(200,200),(200,200). 
```

请帮助我。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T12:11:29.293

你的意思是：

```
$('#someele').click(function(e) {
  var offset = $(this).offset();
  var x = Math.floor(e.pageX - offset.left);
  var y = Math.floor(e.pageY - offset.top);
  console.log('x pos:' +  x  + ' y pos:' + y);
}); 
```