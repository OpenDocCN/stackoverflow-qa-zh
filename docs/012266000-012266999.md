# StackOverflow 问答 12266000-12266999

# string - Pl/Sql 使用 instr 查找完全匹配

> ID：12266013
> 
> 赞同：0
> 
> 时间：2012-09-04T14:47:22.607
> 
> 标签：string, oracle, plsql, extract, substr

我正在尝试查找单词中是否存在字符串并将其提取。我使用了该`instr()`函数，但它作为 LIKE 函数工作：如果部分或整个单词存在，它会返回它。

在这里，我想取出字符串“服务”，它可以工作，但是如果我将“服务”更改为“服务”，它仍然可以工作。我不想要那个。如果输入“服务”，它应该返回 null 而不是“服务”

修改的：

我在这里要做的是缩写公司名称的某些部分。

这是我的数据库表的样子：

```
Word     | Abb
---------+-----  
Company  | com
Limited  | ltd
Service  | serv
Services | servs 
```

这是代码：

```
Declare 

    Cursor Words Is

    SELECT word,abb
    FROM abbWords

    processingWord VARCHAR2(50);
    abbreviatedName VARCHAR(120);
    fullName = 'A.D Company Services Limited';

BEGIN

    FOR eachWord IN Words LOOP

      --find the position of the word in name
       wordPosition := INSTR(fullName, eachWord.word);

       --extracts the word form the full name that matches the database
       processingWord := Substr(fullName,instr(fullName,eachWord.word), length(eachWord.word));

      --only process words that exist in name
      if wordPosition > 0 then
           abbreviatedName = replace(fullName, eachWord.word,eachWord.abb);
       end if;

    END lOOP;

END; 
```

因此，如果用户输入“服务”，我不希望返回“服务”。我的意思是，如果找不到“服务”这个词，而不是返回“服务”这个词的位置，那么词的位置应该是 0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:03:56.783

一种方法：

```
DECODE(INSTR('A.D Company Seervices Limited','Services'),
              0,
              NULL,
              SUBSTR('A.D Company Services Limited',
                  INSTR('A.D Company Services Limited','Services'),
                  length('Services'))) 
```

[`INSTR()`](http://www.techonthenet.com/oracle/functions/instr.php)如果未找到文本，将返回 0。[`DECODE()`](http://www.techonthenet.com/oracle/functions/decode.php)将评估第一个参数，与第二个参数进行比较，如果匹配，则返回第三个参数，如果不匹配，则返回第四个参数。（[sqlfiddle链接](http://sqlfiddle.com/#!4/afbc3/9/0)）

可以说不是最优雅的方式，但符合您的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T18:21:37.537

我认为你过于复杂了。[你可以用正则表达式](http://psoug.org/reference/regexp.html)做任何事情。例如; 给出下表：

```
create table names ( name varchar2(100));
insert into names values ('A.D Company Services Limited');
insert into names values ('A.D Company Service Limited'); 
```

此查询将只返回名称`'A.D Company Services Limited'`。

```
select *
  from names
 where regexp_like( name
                  , '(^|[[:space:]])services($|[[:space:]])'
                  , 'i' ) 
```

这意味着匹配字符串的开头`^`，或者一个空格，然后是服务，然后是字符串的结尾`$`，或者一个空格。这就是正则表达式与使用`instr`等的区别。您可以轻松地根据其他因素进行匹配。

但是，尽管这似乎是您的问题，但我认为这不是您想要做的。您正在尝试替换`'serv'`更宽字符串中的字符串而不替换`'services'`or `'service'`。为此，您需要使用[`regexp_replace()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions149.htm#SQLRF06302).

如果我将以下行添加到表中：

```
insert into names values ('A.D Company Serv Limited'); 
```

并运行此查询：

```
select regexp_replace( name
                     , '(^|[[:space:]])serv($|[[:space:]])'
                     , ' Services '
                     , 1, 0, 'i' )
  from names 
```

*唯一*会改变的是，`' Serv '`在这个最新的行中，它将被替换为`' Services '`. 注意空格；因为您不想`'Services'`用`'ServServices'`这些替换，所以非常重要。

### 这是一个[小 SQL Fiddle](http://www.sqlfiddle.com/#!4/90466/9)来演示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:01:32.607

[`INSTR`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions080.htm#i77598)返回一个数字：匹配字符串第一次出现的索引。您应该[`regexp_substr`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#i1239858)改用（10g+）：

```
SQL> select regexp_substr('A.D Company Services Limited', 'Services') match,
  2         regexp_substr('A.D Company Service Limited', 'Services') unmatch
  3  from dual;

MATCH    UNMATCH
-------- -------
Services 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T14:26:37.137

另一种选择是使用类似的东西：

```
select replace(name,' serv ', ' Services ')
from names; 
```

这将仅替换位于 2 个空格之间的单词“Serv”。

谢谢你，亚历克斯。

# python - Python sqlite3，将一个类的实例与另一个实例一起保存为属性？

> ID：12266016
> 
> 赞同：1
> 
> 时间：2012-09-04T14:47:26.320
> 
> 标签：python, database, sqlite, instance

我正在用 python 为 Counter-Strike 创建一个游戏模组，基本上都完成了。唯一剩下的就是编写一个 REAL 数据库，我对 sqlite 没有任何经验，所以我需要很多帮助。

我有一个`Player`带有属性的类`self.steamid`，对于每个反恐精英玩家（从游戏引擎接收）来说都是唯一的，并且`self.entity`，它包含在玩家的“实体”中，并且`Entity`-class 有很多更多的属性，例如级别，名称和方法负载。而Entity是一个自制的Python类）。

实现数据库的最佳方法是什么，首先，如何将 Player 的实例与另一个 Entity 实例一起保存到数据库中，因为它是数据库的属性？

另外，每次他连接到游戏服务器时，我都需要获取用户数据（我有 player_connect 事件），那么我将如何接收数据呢？

我发现的所有教程都只教了保存字符串或整数，但没有教整个实例。我是否必须保存所有实例的每个属性（实体实例的属性很少，而且它们都有大量的属性......），还是有更快、更简单的方法？

此外，它将是一个本地保存的数据库，所以我不能真正使用除 sql 之外的任何其他语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:57:26.020

SQL 数据库通常只能保存基本数据类型。如果你想映射你的模型，你可以使用 SQLAlchemy，以便它们的属性自动映射到 SQL 类型——但是使用 SQLlite 需要大量的研究和反复试验。

我认为当你说“它必须是 SQL”时你并不完全正确 - 如果你正在运行 Python 代码，你可以保存你喜欢的任何格式。

然而，Python 允许您将您的实例数据序列化为一个字符串——该字符串可在数据库中持久保存。

因此，您可以在 SQL 中创建一个 varchar(65535) 字段，以及一个 ID 字段（例如，可以是您提到的玩家 ID 号），并将以下返回的值保存到它：

```
import pickle

value = pickle.dumps(my_instance) 
```

检索值时，您执行相反的操作：

```
my_instance = pickle.loads(value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:00:44.970

你需要一个 ORM。要么你自己滚动（我从不建议），要么你使用已经存在的一个。可能 Python 中最流行的两个是 sqlalchemy，以及与 Django 捆绑的 ORM。

# sqlite - Sqlite 查询优化（使用 Limit 和 Offset）

> ID：12266025
> 
> 赞同：15
> 
> 时间：2012-09-04T14:47:43.123
> 
> 标签：sqlite

以下是我用于从具有数百万条记录的数据库中获取固定数量记录的查询：-

```
select * from myTable LIMIT 100 OFFSET 0 
```

我观察到的是，如果偏移量非常高，比如 90000，那么执行查询需要更多时间。以下是具有不同偏移量的 2 个查询之间的时间差：

```
select * from myTable LIMIT 100 OFFSET 0       //Execution Time is less than 1sec
select * from myTable LIMIT 100 OFFSET 95000   //Execution Time is almost 15secs 
```

谁能建议我如何优化此查询？我的意思是，对于我希望从任何 OFFSET 检索的任意数量的记录，查询执行时间应该相同且快速。

新增：- 实际情况是我有一个数据库超过 100 万条记录。但由于它是嵌入式设备，我不能执行“select * from myTable”然后从查询中获取所有记录。我的设备崩溃了。相反，我所做的是按照上面提到的查询逐批（批量大小 = 100 或 1000 条记录）获取记录。但正如我所提到的，随着偏移量的增加，它变得很慢。所以，我的最终目标是我想从数据库中读取所有记录。但由于我无法在一次执行中获取所有记录，因此我需要一些其他有效的方法来实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-08T13:02:01.560

正如**JvdBerg**所说，LIMIT/OFFSET 中不使用索引。简单地添加 'ORDER BY indexed_field' 也无济于事。

为了加快分页速度，您应该避免使用 LIMIT/OFFSET 并改用 WHERE 子句。例如，如果您的主键字段名为 'id' 并且没有空格，那么您上面的代码可以这样重写：

```
SELECT * FROM myTable WHERE id>=0     AND id<100     //very fast!
SELECT * FROM myTable WHERE id>=95000 AND id<95100   //as fast as previous line! 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T14:52:14.163

通过执行偏移量为 95000 的查询，所有之前的 95000 条记录都会被处理。您应该在表上创建一些索引，并将其用于选择记录。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-04T12:27:09.903

正如@user318750 所说，如果你知道你有一个连续的索引，你可以简单地使用

```
select * from Table where index >= %start and index < %(start+size) 
```

但是，这些情况很少见。如果您不想依赖该假设，请使用子查询，例如 using `rowid`，它始终被索引，

```
select * from Table where rowid in (
  select rowid from Table limit %size offset %start) 
```

这会加快速度，特别是如果您有“胖”行（例如，包含 blob）。

如果维护记录顺序很重要（通常不重要），则需要先对索引进行排序：

```
select * from Table where rowid in (
  select rowid from Table order by rowid limit %size offset %start) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-09T21:22:28.677

```
select * from data where rowid = (select rowid from data limit 1 offset 999999); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-23T09:47:28.653

使用 SQLite，您不需要在一个大的胖数组中一次返回所有行，您可以为每一行回调。这样，您可以在结果进入时对其进行处理，这应该可以解决您的崩溃和性能问题。

我猜你没有使用 C，因为你已经使用了回调，但是这种技术应该可以在任何其他语言中使用。

Javascript 示例（来自：[https](https://www.npmjs.com/package/sqlite3) ://www.npmjs.com/package/sqlite3 ）

```
 db.each("SELECT rowid AS id, info FROM lorem", function(err, row) {
      console.log(row.id + ": " + row.info);
  }); 
```

# compact-framework - PNG图像的透明度问题

> ID：12266031
> 
> 赞同：0
> 
> 时间：2012-09-04T14:47:54.267
> 
> 标签：compact-framework, png, transparency

我需要显示具有透明背景的 PNG 图像。

在 OpennetCF.Button2 中：

```
 btn.ImageList = ilIcons;
        btn.ImageIndex = (int)ImageIndex; 
```

和图片框

```
 pbMyPB.Image = (Image)_ResourceManager.GetObject("MyImage"); 
```

有些图像显示正确，但有些图像显示为黑色背景。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:55:04.800

在您的图像中，它们是否都具有相似的背景颜色？

例如，我所有的图像都有一个白色或半透明的背景，并进入白色画布：

![资源屏幕](../Images/c705b6214e9af55b0bc2590365b8333b.png)

因此，如果您的图像将出现在 Button 上，您可能需要尝试查找或创建一些与您的 Button 颜色匹配的图像，或者更改您的 Button 颜色以匹配您的项目的背景颜色。

希望这可以帮助。

乔

# excel - 通过在 excel-vba 中提供数据库（.mdb）名称来获取 .mdb 文件所在的整个路径

> ID：12266032
> 
> 赞同：0
> 
> 时间：2012-09-04T14:47:55.490
> 
> 标签：excel, vba

如何通过在 excel-vba 中提供数据库（.mdb）名称来获取 .mdb 文件所在的整个路径。

当我在我的系统中安装应用程序时，将在安装路径中创建一个数据库（.mdb 文件）。我想从该数据库（.mdb 文件）中获取一些数据并在 excel 文件中使用它。

在不同的系统中，这将是不同的路径。我希望我的 excel-vba 代码自动查找数据库（.mdb 文件）并从数据库中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:11:50.360

`ActiveWorkbook.Path`是找到当前 excel 工作表的位置。假设你的数据库名称没有改变，那么使用这个值`& "MyDatabase.mdb"`应该找到你的数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:45:21.007

我可以建议一种不同的方法，因为我理解这个问题的方式，有必要首先找到*.mdb*文件 - 只提供名称。

在这种情况下，您将在以下文章中找到帮助 - 包括一些工作代码；）

[微软 KB185476](http://support.microsoft.com/kb/185476/en-us)

对于具有完整路径的部分：

```
Sub ShowFileAccessInfo(filespec)
    Dim fs, d, f, s
    Set fs = CreateObject("Scripting.FileSystemObject")
    Set f = fs.GetFile(filespec)
    s = UCase(f.Path) & vbCrLf
    s = s & "Created: " & f.DateCreated & vbCrLf
    s = s & "Last Accessed: " & f.DateLastAccessed & vbCrLf
    s = s & "Last Modified: " & f.DateLastModified
    MsgBox s, 0, "File Access Info"
End Sub 
```

*来自 excel 帮助（文件对象）

# c# - Windows 和 IIS 7.5 上的匿名身份验证，允许内部自动登录和外部手动登录

> ID：12266033
> 
> 赞同：2
> 
> 时间：2012-09-04T14:47:56.350
> 
> 标签：c#, iis-7.5, authentication, mixed-authentication

设想：

*   https asp/asp.net 网站运行的 IIS 7.5 (windows server 2008)
*   IIS 当前配置为允许匿名身份验证和表单身份验证，asp.net 模拟在未安装 windows 身份验证时被禁用（我知道为此需要安装 windows 身份验证。）
*   内部和外部用户的单个自定义登录页面

要求：

*   内部用户在捕获其 LOGON 名称的同时无缝登录（窗口身份验证）
*   应提示外部用户（不在域上）手动登录

问题：

*   可以使用什么方法来实现这一点？
*   寻找 IIS 7.5 和 web.config 设置

发现的方法：

1.  在 1 个网站内制作 2 个页面，winlogin 和 weblogin（首页）。在 winlogin.aspx 上允许 windows auth=true 和匿名 auth=false，反之亦然
2.  将 winlogin.aspx 作为主页并将 401 错误重定向到 weblogin.aspx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:08:57.580

这是为集成身份验证配置 IIS 的方法。

[http://netpl.blogspot.com/2012/06/iis-75-integrated-security-with-no.html](http://netpl.blogspot.com/2012/06/iis-75-integrated-security-with-no.html)

这将使您的站点可供 Intranet 用户使用，而无需提示输入凭据。

请注意，这也适用于网络用户。作为 HTTP 401 的结果，会显示一个内置的 Web 浏览器窗口。用户提供他/她的凭据并进入。

如果您希望将自定义 Web 表单显示为 401（未经授权）的结果，则必须稍微欺骗浏览器：

[http://www.codeproject.com/Articles/11202/Redirecting-to-custom-401-page-when-quot-Access-de](http://www.codeproject.com/Articles/11202/Redirecting-to-custom-401-page-when-quot-Access-de)

这样，您可以将未经授权的响应重定向到您选择的 Web 表单（例如，显示 asp.net 登录表单）。

尽管可以轻松配置集成身份验证，但在设置混合（集成/表单）身份验证时，请准备大量实验。每个版本的 IIS 都会发生变化；如果池处于经典模式与集成模式，IIS7 的行为也会有所不同。

# google-drive-api - 谷歌云端硬盘身份验证。我是否需要特殊权限才能获得域中的完全驱动器访问权限？

> ID：12266038
> 
> 赞同：0
> 
> 时间：2012-09-04T14:48:15.010
> 
> 标签：google-drive-api

我制作了一个管理谷歌驱动器中文件的应用程序。在开发期间，我使用了

gmailadress:user@gmail.com

现在我正在使用：user@googleappsdomain.com

并且身份验证停止工作。我不断收到 401 未授权。**我是否需要特殊权限才能获得域中的完全驱动器访问权限？**

这是网络服务器给我的错误。

```
{
"code" : 401,
"errors" : [ {
"domain" : "global",
"message" : "Invalid Credentials",
"reason" : "authError"
} ],
"message" : "Invalid Credentials"
} 
```

当我尝试使用其他电子邮件地址的快速入门示例时出错。（适用于我的 gmail 地址）。

当我使用 OAuth 2.0 Playground 时，当我请求 Files.List 时，我的应用程序地址在步骤 3 中出现相同的 401 错误...

我发现了这个： http: [//support.google.com/a/bin/answer.py ?hl=en&answer=162106](http://support.google.com/a/bin/answer.py?hl=en&answer=162106)

这是我要找的设置吗？它没有说明驱动范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:48:00.350

更正。

“我是否需要特殊权限才能获得域中的完全驱动器访问权限？”的简短回答 是是的。

[https://www.google.com/a/cpanel/YOURDOMAIN.COM/ServiceSettings#ServiceSettings/service=drive+and+docs&subtab=general](https://www.google.com/a/cpanel/YOURDOMAIN.COM/ServiceSettings#ServiceSettings/service=drive+and+docs&subtab=general)

为了向自己证明它应该有效，请尝试在[https://developers.google.com/drive/v2/reference/files/list#try-it上运行“试用”](https://developers.google.com/drive/v2/reference/files/list#try-it)

从那里您可以通过 oauth 操场向后工作，然后您自己的代码可以查看有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:16:07.223

您需要清除您的凭据，并为新用户获取一组新凭据。我怀疑您在某处使用了一些存储的凭据，或者一次登录多个帐户时遇到问题。

# jquery - jQuery 日期范围选择器添加重复功能

> ID：12266039
> 
> 赞同：-1
> 
> 时间：2012-09-04T14:48:19.753
> 
> 标签：jquery, jquery-ui, daterangepicker

我想使用 jQuery从**日期范围选择器做不同类型的重复。**那些在下面。

```
Recurrent day/week/month/year
Recurrent date untill/for/forever 
Period day/week/month/year numbers ... 
```

几乎就像 thundurbird 或 Outlook 中的日历或....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:46:39.523

[http://www.ohloh.net/p/jquery-recurrenceinput-js](http://www.ohloh.net/p/jquery-recurrenceinput-js)

还没用过，如果好用请告诉我。

# git - Atlassian Stash 显示本地提交更改的时间，而不是推送到 Stash 存储库的时间

> ID：12266040
> 
> 赞同：1
> 
> 时间：2012-09-04T14:48:22.357
> 
> 标签：git, bitbucket-server

![Atlassian Stash 的屏幕截图](../Images/e448cbe74aad3b9f32d3eddce128318c.png)

Stash 说最新的提交是在 8 分钟前提交的。那是我在本地提交更改的时候。然后，我在 7 分钟后（屏幕截图前 1 分钟）将更改推送到 Stash 存储库。

我对使用的是本地提交日期感到有些惊讶。真的应该是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T14:54:19.053

在 Git 中，提交是不可变的。每个提交[包括](http://git-scm.com/book/en/Git-Internals-Git-Objects)

> 此时项目快照的顶级树；从您的 user.name 和 user.email 配置设置中提取的作者/提交者信息，以及当前时间戳；一个空行，然后是提交消息。

[推](http://www.kernel.org/pub/software/scm/git/docs/git-push.html)（强调我的）

> 使用本地 refs 更新远程 refs，同时**发送**完成给定 refs 所需的对象。

由于 push 将您的对象发送到服务器，并且您的对象捕获了提交的时间戳；从逻辑上讲，服务器唯一能做的就是向您显示捕获的时间戳。

Stash 可以通过两种方式向您显示推送的时间。

1.  修改提交并更新它们的时间戳（这可能不是世界上最糟糕的想法，但它非常接近）。
2.  维护自己的一组特定提交何时被推送的时间戳，并显示该信息以及提交中记录的内容。这是可行的，但这是额外的工作，而且好处并不是立即显而易见的。

# deployment - 如何让 Jenkins 在另一台服务器上运行脚本并监视结果？

> ID：12266041
> 
> 赞同：5
> 
> 时间：2012-09-04T14:48:22.107
> 
> 标签：deployment, jenkins, master-slave, artifacts

我希望 Jenkins 能够在另一台服务器上启动部署过程，但我希望该服务器上的进程实际执行部署过程（出于安全原因，例如，而不是让 jenkins 服务器上的用户 ssh 到远程服务器和执行部署）并将部署状态报告给 Jenkins。

看起来这样做的方法是利用 Jenkins 的能力让从属进程可以在其他服务器上运行，执行脚本并将控制台输出、状态等报告回主服务器。

所以顺序是：

詹金斯（大师）

**1.**构建->

**2.**创建工件->

**3.**启动部署（使用 ssh 启动从机作业）jenkins（从机）

**4.**执行部署->

**5.**向 jenkins 主服务器报告状态

这是实现我想做的适当方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:26:25.297

这是 Jenkins 中基本的**“主从”**行为 - 检查**[分布式构建](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)**。

**A)**在远程机器上安装一个*Jenkins-slave 。*

**B)**让这个从机只运行“*捆绑工作*”。

**C)**设置步骤“4”。在您的示例中在远程*从站*（或“*节点*”）上运行。

**D)**步骤“3”。在您的示例中，可能应该是步骤“2”的“构建后触发器”。
（而不是它自己的一步）。

步骤“4”的结果。在您的示例中，主机可以使用。

# windows - MFC CString 到 int

> ID：12266044
> 
> 赞同：0
> 
> 时间：2012-09-04T14:48:29.600
> 
> 标签：windows, mfc, atoi

使用此代码，我在从到`atoi`转换时遇到错误：`CString``int`

```
 int nrCentrala; CString idCentrala;
    GetDlgItem(IDC_EDIT_IDCENTRALA)->GetWindowText(idCentrala);
    nrCentrala = atoi(&idCentrala); 
```

`IDC_EDIT_IDCENTRALA`编辑控件在哪里。

`Error 7 error C2664: 'atoi' : cannot convert parameter 1 from 'CString *' to 'const char *'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T14:53:57.320

CString 为 LPCTSTR 提供重载运算符。此外，请改用 _tstoi，以防万一您使用 Unicode 库进行编译，例如

```
nrCentrala = _tstoi(idCentrala); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T14:51:35.417

您将指针传递给`CString`( `CString*`type) 而不是. 正确的调用是`const char*``atoi()``nrCentrala = atoi(idCentrala.GetString());`

# javascript - 正确使用 RequireJS、Coffeescript 和 Revealing Module Pattern

> ID：12266047
> 
> 赞同：1
> 
> 时间：2012-09-04T14:49:00.843
> 
> 标签：javascript, coffeescript, requirejs, amd, revealing-module-pattern

我在下面定义了以下 Coffeescript 代码，它使用 RequireJS 定义了一个函数：

```
define 'PersonService', ['jquery'] ($) -> 
    getPerson = (id) -> 
        person = dataService.GetPerson id
    { getPerson: getPerson} 
```

它产生以下内容：

```
(function() {

  define('PersonService', ['jquery'](function($) {
    var getPerson;
    getPerson = function(id) {
      var person;
      return person = dataService.GetPerson(id);
    };
    return {
      getPerson: getPerson
    };
  }));

}).call(this); 
```

我想我遇到的问题是由 Coffeescript 代码生成的自执行函数。这会导致我可能无法跟踪的问题吗？或者这是正确的。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:52:37.097

这是正确的

没有包装函数和有一个包装函数之间的区别在于范围。

如果你定义 var a = 10; 在全局范围内，无论有没有`var`关键字，a 都变成全局的。

包装后，所有变量都是包装函数的本地变量，因此不要最终成为全局变量。

在您的示例中，所有内容都已包装在一个函数中，所以是的，您不需要额外的包装！

您可以告诉咖啡脚本不要使用添加包装函数

```
coffee -b, --bare         compile without a top-level function wrapper 
```

恕我直言：最好始终拥有包装器功能，这样您就不需要在文件到文件的基础上考虑它。

# c - 数组 30 x 30 的程序失败

> ID：12266048
> 
> 赞同：1
> 
> 时间：2012-09-04T14:49:02.473
> 
> 标签：c, cuda

这是 CUDA 架构上的矩阵乘法程序。当数组大小为 30 x 30 时，此代码工作正常，但当大小更大时，输出为一系列 0。我正在为 Linux 机器上托管的 CUDA 使用标准 ec2 实例。任何人都可以找出原因吗？

```
#include <stdio.h>
#define SIZE 30

__global__ void matrix_multiply(float *input1,float  *input2,float *output,int dimension){

    int input1_index = threadIdx.x / dimension * dimension;
    int input2_index =  threadIdx.x % dimension;
    int i=0;
    for( i =0; i <dimension; i++){
        output[threadIdx.x] += input1[input1_index + i] * input2[input2_index + i * dimension];
    }
}
int main(){
    int i,j,natural_number=1;
    float input1[SIZE][SIZE],input2[SIZE][SIZE],result[SIZE][SIZE]={0};
    float  *c_input1,*c_input2,*c_result;
    for(i=0;i<SIZE;i++){
        for(j=0;j<SIZE;j++){
            input1[i][j]=input2[i][j]=natural_number++;
        }
    }
    cudaMalloc((void**)&c_input1,sizeof(input1));
    cudaMalloc((void**)&c_input2,sizeof(input2));
    cudaMalloc((void**)&c_result,sizeof(result));
    cudaMemcpy(c_input1,input1,sizeof(input1),cudaMemcpyHostToDevice);
    cudaMemcpy(c_input2,input2,sizeof(input2),cudaMemcpyHostToDevice);
    cudaMemcpy(c_result,result,sizeof(result),cudaMemcpyHostToDevice);

    matrix_multiply<<<1,SIZE * SIZE>>>(c_input1,c_input2,c_result,SIZE);
    if(cudaGetLastError()!=cudaSuccess){
        printf("%s\n",cudaGetErrorString(cudaGetLastError()));
    }
    cudaMemcpy(result,c_result,sizeof(result),cudaMemcpyDeviceToHost);
    for(i=0;i<SIZE;i++){
        for(j=0;j<SIZE;j++){
            printf("%.2f ",result[i][j]);
        }
        printf("\n");
    }
    cudaFree(c_input1);
    cudaFree(c_input2);
    cudaFree(c_result); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T14:53:36.150

您的 GPU 上每个块可能最多有 1024 个线程。30 x 30 = 900，所以应该没问题，但是例如 40 x 40 会导致内核启动失败（带回家的消息：总是检查错误！）。

您可能需要考虑以不同方式组织数据，例如线程`SIZE`块，`SIZE`然后将内核称为：

```
matrix_multiply<<<SIZE, SIZE>>>(c_input1,c_input2,c_result,SIZE); 
```

（显然，您需要在内核代码中修改数组索引，例如使用块索引作为行，线程索引作为列。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T14:51:34.570

您正在使用 1 个大小为 30x30 的网格的配置调用内核：

```
matrix_multiply<<<1, SIZE * SIZE>>>(c_input1,c_input2,c_result,SIZE); 
```

没有足够的线程来处理更多。

# grails - 注册许多属性编辑器

> ID：12266050
> 
> 赞同：2
> 
> 时间：2012-09-04T14:49:05.183
> 
> 标签：grails

我在注册自定义属性编辑器时遇到问题。我像这样注册它：

```
class BooleanEditorRegistrar implements PropertyEditorRegistrar {

   public void registerCustomEditors(PropertyEditorRegistry registry) {
      registry.registerCustomEditor(Boolean.class,
         new CustomBooleanEditor(CustomBooleanEditor.VALUE_YES, CustomBooleanEditor.VALUE_NO, false))
      registry.registerCustomEditor(Boolean.class,
         new CustomBooleanEditor(CustomBooleanEditor.VALUE_ON, CustomBooleanEditor.VALUE_OFF, true))
   }
} 
```

但唯一的第一个被应用。可以注册多个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:59:38.483

每个类只能设置一个属性编辑器。如果您使用 Spring 的[`CustomBooleanEditor`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/propertyeditors/CustomBooleanEditor.html)，您可以使用默认值（“true”/“on”/“yes”/“1”、“false”/“off”/“no”/“0”） arg 构造函数，或者对于真假各一个字符串。如果您需要更灵活的东西，则必须实现自己的属性编辑器。例如：

```
import org.springframework.beans.propertyeditors.CustomBooleanEditor

class MyBooleanEditor extends CustomBooleanEditor {

    def strings = [
        (VALUE_YES): true, 
        (VALUE_ON): true,
        (VALUE_NO): false,
        (VALUE_OFF): false
    ]

    MyBooleanEditor() {
        super(false)
    }

    void setAsText(String text) {
        def val = strings[text.toLowerCase()]
        if (val != null) {
            setValue(val)
        } else {
            throw new IllegalArgumentException("Invalid boolean value [" + text + "]")
        }
    }
} 
```

# bash - 为什么我的“退出”命令不退出我的 Bash 脚本？

> ID：12266057
> 
> 赞同：4
> 
> 时间：2012-09-04T14:49:42.957
> 
> 标签：bash

我有这个 Bash 脚本：

```
#!/bin/bash
set -x
function doSomething() {
    callee
    echo "It should not go to here!"
}

function callee() {
    ( echo "before" ) && (echo "This is callee" && exit 1 )                                                                                   
    echo "why I can see this?"
}

doSomething 
```

这是结果：

```
+ set -x
+ doSomething
+ callee
+ echo before
before
+ echo 'This is callee'
This is callee
+ exit 1
+ echo 'why I can see this?'
why I can see this?
+ echo 'It should not go to here!'
It should not go to here! 
```

我看到了命令`exit`，但它没有退出脚本——为什么不起作用`exit`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T14:52:28.583

您是`exit`从子shell 内部调用的，所以这就是正在退出的shell。试试这个：

```
function callee() {
    ( echo "before" ) && { echo "This is callee" && exit 1; }                                                                                   
    echo "why I can see this?"
} 
```

但是，这将从任何名为`callee`. 您可能希望使用`return`而不是`exit`从函数返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T14:52:48.167

当您在其中运行命令时，`()`您将生成一个子shell。因此，当您`exit`在该子外壳中调用时，您只是退出它，而不是您的顶级脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T14:53:03.853

因为圆括号创建了一个新的嵌套shell，它通过exit退出。

# windows-phone - SSL 证书列为受支持，但不允许

> ID：12266061
> 
> 赞同：1
> 
> 时间：2012-09-04T14:49:53.327
> 
> 标签：windows-phone

在我的应用程序中，我需要使用 Starfield Class 2 证书颁发机构访问 Web 服务。在模拟器上运行时，一切正常，但是在设备上调试时，我无法访问该服务。我只得到状态代码“未找到”。

过了一会儿，我尝试在设备上手动安装证书，它现在可以工作了。

在此站点上，他们将其列为受支持的证书之一。 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg521150(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg521150(v=vs.92).aspx)

有人对此有任何了解吗？如果不手动安装证书，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:03:30.980

Windows Phone 似乎并不能很好地支持应付一些 UCC 证书。

我的解决方法是用通配符证书替换 UCC。

# c# - 从 WORD 打开 XML 中删除空白页

> ID：12266063
> 
> 赞同：3
> 
> 时间：2012-09-04T14:49:57.137
> 
> 标签：c#

我已经使用 open XML 成功生成了一个 word 文档文件，但是我有太多的空白页，我该如何删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:27:12.177

这取决于这些空白页在 Open XML 中的表示方式；您可能想发布一个示例文档来准确演示您的空白页是如何表示的。

但是，让我们以 Word 文档为例，其中用户插入了额外的分页符（通过在 Word 中按 ctrl-enter），导致出现空白页。这些分页符将在 XML 中表示为：

```
<w:br w:type="page"/> 
```

页面中仍然会有很多用于间距、字体等的标签；页面也可能显示页眉和页脚。但是让我们将空白页定义为没有新段落文本的空白页。在 Open XML 中，新文本使用 aw:t 标记显示。

因此，为了删除由额外分页符创建的空白页面，中间没有文本，我们可以在 XML 文档上运行以下正则表达式，替换为空白 ("")：

```
<w:br w:type="page"/>(.(?!<w:t>))*(?=<w:br w:type="page"/>) 
```

此正则表达式将搜索一系列两个或多个分页符，中间没有新文本，删除除最后一个之外的所有分页符。

（请注意，这不会处理文档末尾的空白页，这有点棘手。此外，如果您想考虑包含图像、文本框等的页面，则必须使用正则表达式扩大到包括相关项目）。

# c# - 增加 TCP/IP 窗口大小

> ID：12266065
> 
> 赞同：1
> 
> 时间：2012-09-04T14:49:59.173
> 
> 标签：c#, tcp, windows-server-2008-r2

我正在尝试在两台服务器之间通过 tcp/ip 发送消息。我想发送一条 30KB 的消息。但我想把它作为一个整体发送。我不希望 tcp 协议将其分成段。

我正在使用 2 个 Windows Server 2008 R2 之间的通信。客户端和服务器使用 C# 编码。我尝试使用

```
tcpclnt.SendBufferSize = 100000;
tcpclnt.Client.DontFragment = true; 
```

在服务器上也是如此。

我还尝试配置服务器的窗口大小（编辑注册表）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:25:36.923

我强烈建议您需要对[IPv4](http://en.wikipedia.org/wiki/IPv4#Header "IPv4 标头")和[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure "TCP 段结构")以及[以太网](http://en.wikipedia.org/wiki/Ethernet_frame#Structure "以太网帧结构")和[千兆以太网](http://en.wikipedia.org/wiki/Gigabit_Ethernet#Varieties "千兆以太网")（尤其是[巨型帧](http://en.wikipedia.org/wiki/Jumbo_frame "巨型帧")）进行进一步研究。

本质上，对您的问题的简短回答是，您不能发送包含 30kb 的 TCP 有效负载的单个 IP 数据报，尽管 IP 标头允许完整数据报的最大大小为 64kb。

这样做的原因是底层网络（很可能是以太网或千兆以太网）将具有较小的帧大小，因此需要对 IP 数据报进行分段，以便在其帧大小限制内通过物理网络传输该数据报。网络。

TCP 协议确实保证了完整的、未损坏的数据报的成功交付（通过自动重组、损坏数据报的自动检测以及丢失或损坏数据报的自动重传），因此除非您有高度专业化的要求，否则您应该能够让TCP 堆栈将您的消息分段并代表您重新组合它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T15:02:18.473

更改缓冲区大小将产生增加 ram 使用量的副作用 - 不推荐...

由于 TCP 实际上处理的是流而不是数据包（UDP 使用数据包），我相信您的答案在于构建消息，请参阅[消息帧](http://nitoprograms.blogspot.co.uk/2009/04/message-framing.html)

另见[代码](http://nitoprograms.blogspot.co.uk/2009/04/sample-code-length-prefix-message.html)

后来发现了这个可能的解决方案，但认为它应该包含在这里：

[SetTcpWindowSize](http://www.activexperts.com/activmonitor/windowsmanagement/adminscripts/networking/client/#SetTcpWindowSize.htm)

在底部搜索标题为“为所有网络适配器设置 TCP 窗口大小”的 VB 示例

或者，这里有一个缓冲区处理程序，它看起来可以让您在一个部分中读取消息，即使它位于多个数据包中，它也允许您通过缓冲区管理重新组合它们。看到[这个链接](http://www.lfsforum.net/showthread.php?t=41210)

# jsoup - 按属性值搜索元素

> ID：12266070
> 
> 赞同：4
> 
> 时间：2012-09-04T14:50:16.177
> 
> 标签：jsoup

所以我不确定这是否可能。但我想扫描 XML 文档以查找具有特定属性值的所有元素。

元素是什么或属性类型是什么都没关系......我只需要根据属性值找到它们。

例如，我正在寻找“鸭子”这个词

```
<person name="Fred" thing="duck"/>
<person name="Mary"/>
<animal name="duck" thing="swims"/> 
```

第一个和第三个应该匹配，第二个不匹配。

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-19T10:03:50.190

我知道这个答案是事后的，但我认为它对其他人有用。有比上述方法更好的方法：

```
Elements ducks = doc.select("person[*=duck]"); 
```

这将返回仅包含值为“duck”的属性的元素。

jsoups 网站上有用的备忘单：http: [//jsoup.org/apidocs/org/jsoup/select/Selector.html](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T18:03:38.327

如果使用选择器可以做到这一点，则不确定。但也许你可以尝试这样的事情：

```
final String input = "<person name=\"Fred\" thing=\"duck\"/>"
        + "<person name=\"Mary\"/>"
        + "<animal name=\"duck\" thing=\"swims\"/>";

Document doc = Jsoup.parse(input);
Elements withAttr = new Elements();

for( Element element : doc.getAllElements() )
{
    for( Attribute attribute : element.attributes() )
    {
        if( attribute.getValue().equalsIgnoreCase("duck") )
        {
            withAttr.add(element);
        }
    }
} 
```

# excel - 初始保存时保存名称中的引号？

> ID：12266074
> 
> 赞同：1
> 
> 时间：2012-09-04T14:50:37.610
> 
> 标签：excel, vba, macos

此代码有效，但是出现了一些奇怪的东西，当我尝试保存文件时，它显示在`"Open Order Log - 10-4-12.xlsx"`而不是`Open Order Log - 10-4-12.xlsx`有原因吗？

`NewFile = Application.GetSaveAsFilename(InitialFileName:="Open Order Log - " & Format(Date, "dd-mm-yyyy") & ".xlsx")`

解决了它：

`wbBK2.SaveAs Dir & Application.PathSeparator & "Open Order Report -" & Format(Date, "mm-dd-yyyy") & ".xlsx"`

这有点曲折，但它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:08:58.533

要删除引号，您必须使用过滤器。

```
NewFile=Application.GetSaveAsFilename(InitialFileName:="StackOverflow.xlsx", _
             FileFilter:="Excel Files (*.xlsx), *.xlsx") 
```

Mac 的注意事项：
请注意， `getsaveasfilename`如果用户使用显示箭头导航到文件，则会返回一个不正确的路径。但是，如果改为双击目录节点，则路径将是正确的。

# jquery - JQuery 显示/隐藏没有硬编码的 id

> ID：12266078
> 
> 赞同：0
> 
> 时间：2012-09-04T14:50:59.233
> 
> 标签：jquery

我想让 jQuery 函数显示/隐藏一些元素（现在是`<li>`）；

**所以，我有这个代码：**

```
.sub {
    display: none;
}

 ....

$(function show_sub(id) {
    $('#'+id).show('fast');
});

 .....

<a href="" onmouseover="show_sub('id1')" onclick="return false;"> Here is it </a> 
<li id="id1" class="sub"> .... </li> 
```

在 Internet 上，我只找到了必须对元素的 id 进行硬编码的函数。

我知道我的 jQuery 函数不正确。

请帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:57:17.897

你可以像这样清理你的代码

html

```
<a href="#"> Here is it </a> 
<li class="sub"> .... </li> 
```

Javascript

```
$(function() {
    $('a[href="#"]')
       .on('hover', function() {
           $(this).next('li').show('fast'); // or toggle();
       })
       .on('click', function(ev) {
           ev.preventDefault()
       })
}); 
```

这样做可以避免无用的标记、冗余信息和内联处理程序。

小提琴示例：http: [//jsfiddle.net/GYye8/](http://jsfiddle.net/GYye8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:55:54.633

您需要获取要显示/隐藏的元素。通过 id 获取它是一种方法，但还有更多方法。

看看[jquery 选择器](http://api.jquery.com/category/selectors/)。

例如，您可以通过以下方式显示具有“子”类的元素：

```
$(".sub").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T14:53:02.423

`$("li.sub").show()`显示所有`li`与类`sub`。

这就是你所追求的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:05:25.570

你可以试试下面的代码

**html**

```
<a href="#" class="li-toggler" data-toggle="id1">li toggler</a>   
<li id="id1">sometext</li>​ 
```

**js**

```
$("a.li-toggler").click(function() {
   $("#"+$(this).attr("data-toggle")).toggleClass("sub");
}); 
```

​</p>

# delphi - 如何防止滚轮选择 TStringGrid 的最后一行？

> ID：12266079
> 
> 赞同：0
> 
> 时间：2012-09-04T14:50:59.763
> 
> 标签：delphi, tstringgrid, scrollwheel

我有一个 TStringGrid 有几行，我在其中实现了某种“只读”行。更准确地说，我不允许用户单击倒数第二行。如果用户单击最后一行，则没有任何反应；焦点不会移动到该行的单元格。

我有代码（在 KeyDown 中），一切都很顺利。**但是**，如果用户单击最上面一行，然后使用鼠标滚轮向下滚动，最终焦点将移动到倒数第二行。知道如何防止这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T14:55:39.813

好吧，你可以重写`DoMouseWheelDown`来实现这一点。

```
function TMyStringGrid.DoMouseWheelDown(Shift: TShiftState; 
  MousePos: TPoint): Boolean;
begin
  if Row<RowCount-2 then
    //only allow wheel down if we are above the penultimate row
    Result := inherited DoMouseWheelDown(Shift, MousePos)
  else
    Result := False;
end; 
```

但是你怎么知道没有其他方法可以将焦点移到最后一行？

事实上，一个更好的解决方案是覆盖`SelectCell`：

```
function TMyStringGrid.SelectCell(ACol, ARow: Longint): Boolean;
begin
  Result := ARow<RowCount-1;
end; 
```

当你这样做时，你不需要任何`KeyDown`代码，也不需要覆盖`DoMouseWheelDown`. 将所选单元格更改为最后一行的所有可能机制都将被此阻止。

正如@TLama 正确指出的那样，您不需要子类`TStringGrid`来实现这一点。您可以使用该`OnSelectCell`事件：

```
procedure TForm1.StringGrid1SelectCell(Sender: TObject; ACol, ARow: Longint;
  var CanSelect: Boolean);
begin
  CanSelect := ARow<(Sender as TStringGrid).RowCount-1;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-21T18:47:17.760

我通过将它放在事件 OnMouseWheelUp 中解决了这个问题：

```
procedure Tmainform.sgup(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
begin
        sg.RowCount := sg.RowCount + 1;
        sg.RowCount := sg.RowCount - 1;
end; 
```

# iphone - 如何获取 UITableViewCell 的字幕显示特定单元格被点击了多少次？

> ID：12266091
> 
> 赞同：1
> 
> 时间：2012-09-04T14:51:40.740
> 
> 标签：iphone, objective-c, uitableview, didselectrowatindexpath

我有一个显示数组值的 uitableview。我想知道是否有办法根据每个单元格被点击的次数来更新其表格单元格的字幕。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:16:16.280

首先，您需要使用 a`NSMutableArray`以便在实例化后更改其内容。这是我刚刚尝试达到预期结果的基本概述：

在您的界面中

```
@property (strong, nonatomic) NSMutableArray *tapCountArray; 
```

在您的实施中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tapCountArray = [NSMutableArray new];
    int numberOfRows = 20;

    for (int i = 0; i < numberOfRows; i ++) {
        [self.tapCountArray addObject:@(0)];
    }
} 
```

然后是重要的部分！

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.tapCountArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    NSString *text = [self.tapCountArray[indexPath.row] stringValue];
    [cell.textLabel setText:text];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tapCountArray replaceObjectAtIndex:indexPath.row withObject:@([self.tapCountArray[indexPath.row] intValue] + 1)];
    [self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

当每个单元格被点击时，其中的数字`detailTextLabel`将加一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:30:46.883

您不应该创建新的数组或集合，如果两个数组彼此不同步，这可能会导致问题。正如您在评论中建议的那样，这样做的方法是使用字典。但是，您所说的方式可能不是这样。您需要一个字典数组，其中一个键的值将是您的主要数据，而另一个键的值将是点击次数。例如，让我们调用两个键 main 和 sub，您的主要数据是一组名称。字典数组如下所示： ({main:@"Tom",sub:1}, {main:@"Dick", sub:0}, {main:@"Harry",sub:2}, . ....）。在 tableView:cellForRowAtIndexPath:indexPath 方法中，您可以像这样向单元格提供数据：

```
cell.textLabel.text = [[array objectAtIndex:indexPath.row] valueForKey:@"main"];
cell.detailTextLabel.text = [[array objectAtIndex:indexPath.row] valueForKey:@"sub"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:02:35.210

我认为您可以设置另一个与您现在拥有的长度相同的数组。然后当你`didSelectRowAtIndexPath`被触发时，增加`indexPath.row`新数组的条目并刷新该单元格。如果您不希望洗牌，则不需要字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:10:33.210

您可以将对象插入到 NSCountedSet 中，在 cellForRowAtIndexPath 方法中，您将获取单元格的模型对象并验证它被插入到 NSCountedSet 实例中的次数。

看看 NSCountedSet 文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html)

# java - Spring Roo JPA - 为什么在持久性上下文中自动提供手动数据库更新？

> ID：12266094
> 
> 赞同：1
> 
> 时间：2012-09-04T14:51:53.530
> 
> 标签：java, hibernate, sql-server-2005, jpa, spring-roo

我使用 Spring Roo (Spring MVC 3)、JPA 1、Hibernate、JSTL、JQUERY 等开发了一个 Web 应用程序。持久性上下文是通过 JPA 事务管理器管理的应用程序。使用的数据库是 MSSQL2005。该应用程序在 JBOSS 5 上运行。

一切正常。我的问题一直在我脑海中，但我还没有找到合适的答案。

假设如下：

1.  我使用 entitymanager.find() 从表 T 中检索一些行，并将数据呈现到页面
2.  我手动更改了行中的一个字段值（通过 SQL 和 gui 工具）。
3.  我立即重复步骤 (1)，并且手动更新的值可用。

它是否正确？我的理解是持久性上下文中的值不会得到更新，除非：

*   调用 em.refesh()
*   对象在 PERSISTENCE CONTEXT 中不可用（--> 改为查询数据库）

我的经验似乎与下面的链接相矛盾，这对我来说实际上是合乎逻辑的。

[更新的数据（在数据库中）通过 JPA/Eclipselink 不可见](https://stackoverflow.com/questions/7175044/updated-data-in-database-is-not-visible-via-jpa-eclipselink)

非常感谢

小憩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:53:23.177

这是正确的行为。除非您在 SESSION 中调用 em.refresh()，否则不会更新持久性上下文中的值。当您再次检索网页时，旧会话将关闭并打开一个新会话并反映新数据。

# profiling - 是否有适用于 Entity Framework 5 的可靠分析器？

> ID：12266098
> 
> 赞同：0
> 
> 时间：2012-09-04T14:52:18.237
> 
> 标签：profiling, entity-framework-5

我已经使用了*miniprofiler.ef*和 glimpse `EF`，`efprof.com`但是在撰写本文时，它们在使用时都失败了`EF 5`（通常在使用空间类型时）。

你知道目前可靠的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:53:18.840

自 2012 年 12 月以来，[EntityFramework 分析器](http://nuget.org/packages/EntityFrameworkProfiler)提供完整的 EF 5 支持（包括空间类型）

# java - Java中的方法重载：该方法不适用于参数

> ID：12266101
> 
> 赞同：1
> 
> 时间：2012-09-04T14:52:45.513
> 
> 标签：java, methods

我正在尝试使用谓词，但我不能，因为方法重载正在起作用......

我想将*过滤器*与数组（varargs）一起使用，并且我想在谓词中使用内置方法，该方法将数组过滤为转换为列表。

这是错误：*Predicates 类型中的方法 filter(Iterable, Predicate) 不适用于参数 (Class[], Predicate)*

```
private static final Predicate<Method> isTestMethod = new Predicate<Method>() {
    @Override
    public boolean evaluate(Method input) {
        return input.isAnnotationPresent(Test.class);
    }
};

public static void testClasses(Class<?>... classes) {
    for (Method method : filter(classes, isTestMethod)) {

    }
} 
```

这是谓词方法：

```
/**
 * Returns the elements of <tt>unfiltered</tt> that satisfy a predicate.
 * 
 * @param unfiltered An iterable containing objects of any type
 * that will be filtered and used as the result.
 * @param predicate The predicate to use for evaluation.
 * @return An iterable containing all objects which passed the predicate's evaluation.
 */
public static <T> Iterable<T> filter(Iterable<T> unfiltered, Predicate<T> predicate) {
    checkNotNull(unfiltered);
    checkNotNull(predicate);

    List<T> result = new ArrayList<T>();
    Iterator<T> iterator = unfiltered.iterator();
    while (iterator.hasNext()) {
        T next = iterator.next();
        if (predicate.evaluate(next)) {
            result.add(next);
        }
    }
    return result;
}

/**
 * Returns the elements of <tt>unfiltered</tt> that satisfy a predicate.
 * 
 * @param unfiltered An array containing objects of any type
 * that will be filtered and used as the result.
 * @param predicate The predicate to use for evaluation.
 * @return An iterable containing all objects which passed the predicate's evaluation.
 */
public static <T> Iterable<T> filter(T[] unfiltered, Predicate<T> predicate) {
    return filter(Arrays.asList(unfiltered), predicate);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:54:28.443

您的过滤器适用于*方法*- 但您有一个*类*的集合。您不能将`isTestMethod`谓词应用于类...

What did you anticipate it would do? Were you perhaps looking for a filter to match classes which had *any* test methods?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T14:54:51.813

Nevermind. I am an idiot.

```
 for (Class<?> testClass : classes) {
        for (Method method : filter(testClass.getClass().getMethods(), isTestMethod)) {

        }
    } 
```

# c++ - 为什么要在 Py_Initialize() 之前调用 PyImport_AppendInittab()？

> ID：12266103
> 
> 赞同：6
> 
> 时间：2012-09-04T14:52:48.497
> 
> 标签：c++, python

根据[文档](https://docs.python.org/3/c-api/import.html#c.PyImport_AppendInittab)，PyImport_AppendInittab“应该在 Py_Initialize() 之前调用”。

没有解释为什么会这样，忽略这个建议会产生一个工作应用程序。那么，既然这行得通，那在什么情况下会行不通呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:10:25.703

因为文档是这样说的；并且违反 API 可能会在今天产生一个有效的应用程序，但不是明天。

您可能会遇到的几个问题：

*   `sys.builtin_module_names`在 内初始化`Py_Initialize`，因此它不会包含您的模块
*   `PyImport_AppendInittab`不占用任何锁，因此如果您`Py_Initialize`在多线程应用程序中调用它，您可能会遇到内存损坏

# php - mysql抛出空错误消息php

> ID：12266104
> 
> 赞同：-3
> 
> 时间：2012-09-04T14:52:52.533
> 
> 标签：php, mysql, ajax, phpmyadmin

```
 <?php

   if (isset($_COOKIE["username"])) {

$listType = $_POST['listType'];
$uid = $_COOKIE['username'];
$con = mysql_connect('localhost','xxxx','xxxx');
if(!$con)
{
        die("Could not connect: " . mysql_error());
}

$db = mysql_select_db('xxx');

$getUseridquery = mysql_query("SELECT * FROM user WHERE membername='".$uid."'") or die("error1" .mysql_error());
while ($row = mysql_fetch_array($getUseridquery)or die("error11" .mysql_error())) {
    $user_id = $row['uid'];
    typeHandler($listType, $user_id);
}

   } else {
       //something wrong
       return failure;
   }

   function typeHandler($type, $id) {
       if ($type == 'sub') {
        //get the list of subscibers if there's any
        $getSubscribe_query = mysql_query("SELECT target_id FROM subscribes WHERE owner_id='" . $id . "'") or die("error2".mysql_error());
           $subArray = mysql_fetch_array($getSubscribe_query);
           $rowcount = mysql_num_rows($getSubscribe_query) or die("error22".mysql_error());
           if ($rowcount > 0) {
            makeSubList($subArray, $id, TRUE);
           } else {
            makeSubList($subArray, $id, FALSE);
           }

       }

       if ($type == '') {

       }

   }

   function makeSubList($iArray, $id, $hasSub) {

if ($hasSub = TRUE) {
    //if user subscribed to others
    $responseArray = array();
    for ($a = 0; $a <= count($iArray); $a++) {
        makeListEntry($iArray[$a], $responseArray);
    }

    //add owner's scene
    makeListEntry($id, $responseArray);
    return $responseArray;
} else {
    //just add ower to the list
    $responseArray = array();
    makeListEntry($id, $responseArray);
    return $responseArray;
}

   }

   function makeListEntry($user_id, $responseArray) {

//scene count
$getSceneInfo = mysql_query("SELECT * FROM scene WHERE uid='" . $user_id."'") or die("error3".mysql_error());
$sceneCount = mysql_num_rows($getSubscribe_query)or die("error34".mysql_error());

//latest scene
$getLatestScene = mysql_query("SELECT * FROM scene WHERE uid='" . $user_id . "' ORDER BY time_created DESC LIMIT 1") or die("error4".mysql_error());
while($row = mysql_fetch_array($getLatestScene) or die("error44".mysql_error())){
    $title = $row['title'];
    $time = $row['time_created'];
}

//count follower
$getFollower = mysql_query("SELECT * FROM subscribes WHERE target_id='" . $user_id . "'") or die("error5".mysql_error());
$followerCount = mysql_num_rows($getFollower) or die("error54".mysql_error());

//get subscriber info
$getSubInfo = mysql_query("SELECT * FROM user WHERE uid='" . $user_id . "'") or die("error6".mysql_error());
while ($row = mysql_fetch_array($getSubInfo)or die("error66".mysql_error())){
    $dp = $row['dp_file'];
    $name = $row['name'];
}

//store data response to array
$response = array('name' => $name, 'dp' => $dp, 'title' => $title, 'uploadtime' => $time, 'scenecount' => $sceneCount, 'followercount' => $followerCount);
//store response to page
$responseArray . array_push($response);
   }

   ?> 
```

基本上，我试图从 mySQL 中的不同表中检索一些信息，并将这些数据存储在一个数组中，这样我就可以使用 AJAX 将它们传递给其他 JavaScript 文件。

这些代码以某种方式抛出 MySQL 错误框，其中没有错误消息。

我尝试分配额外的字符串来识别每条错误消息，但它只显示我写的字符串，并没有解决任何错误。

PS 我正在使用 PhpMyAdmin。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:55:19.880

很难说这是否是*唯一*的问题，但您无法在获取时检查错误。当没有剩余行时`mysql_fetch_*()`返回，但这*不是*错误条件：`FALSE`

 *```
// Don't do this!
// If no rows are found, or as soon as you have fetched all rows,
// it will exit with a bogus error.
while($row = mysql_fetch_array($getLatestScene) or die("error44".mysql_error())){}

// Instead check for errors first, then just loop:
$getLatestScene = mysql_query("SELECT * FROM scene WHERE uid='" . $user_id . "' ORDER BY time_created DESC LIMIT 1") or die("error4".mysql_error());
while($row = mysql_fetch_array($getLatestScene)){} 
```

注意：您的脚本容易受到 SQL 注入的攻击。过滤您的输入值：

```
$listType = mysql_real_escape_string($_POST['listType']);
$uid = mysql_real_escape_string($_COOKIE['username']); 
```

但是.. 将用户名存储在`$_COOKIE`. 相反，您应该将该值存储在`$_SESSION`. 任何用户都可以通过伪造 cookie 来伪装成任何其他用户。我们看不到你在哪里打电话`setcookie()`，但你不应该那样做。而是这样做：

```
// at start of script
session_start();
// Later, store the user in $_SESSION
$_SESSION['username'] = 'the username'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:55:41.693

为了您的 AJAX 调试目的，您的 AJAX 模块可以

```
die(JSON_encode("mysql_error",mysql_error())) 
```

使您的调试时间更容易。*

# orchardcms - Orchard：Projection-Query 过滤 Taxonomy-terms

> ID：12266105
> 
> 赞同：5
> 
> 时间：2012-09-04T14:52:57.920
> 
> 标签：orchardcms

我创建了一个名为 Contact 的 Content-Type（名称、电子邮件等字段）。

我也有两个分类法：

```
Location (N.Y, Denver, Washington...)
Department(Computers, Hardware, Software...) 
```

我将两者都包含在我的联系人类型中

现在我想找到一种方法来添加**参数化**查询以按位置和部门进行过滤。

我可以在 Location 上使用过滤器编写查询 - 但找不到动态设置 Location 的方法。（只能从列表中选择）

理想情况下，如果页面是[http://server.com/Denver](http://server.com/Denver) ，则该页面应列出丹佛的所有部门 - 带有链接

所以[http://server.com/Denver/Hardware](http://server.com/Denver/Hardware)应该列出所有使用分类术语“Denver”和“Hardware”的联系人

或者有比使用分类法和预测更好的方法吗？

谢谢，

莱因哈德

# unity3d - Nvidia 3d 视觉套件和 unity3d

> ID：12266113
> 
> 赞同：2
> 
> 时间：2012-09-04T14:53:44.107
> 
> 标签：unity3d, nvidia, stereo-3d

Unity3d 中有一些用于创建立体 3d 的脚本，您可以在此[链接](http://forum.unity3d.com/threads/63874-stereo-3D-in-Unity-3D)中找到示例。这个 stereokopix3D.js 非常适合立体渲染，您可以在此脚本中调整任何立体参数。

我想知道是否有类似的软件包适用于 Nvidia 3d vision kit 及其快门眼镜（适用于 Windows）。Nvidia 的快门眼镜可以看到任何 exe 文件（因为 exe 像任何其他商业 3d 游戏一样自动在 DirectX 上运行），但我正在寻找的是一个脚本/包来创建立体视觉（比如 stereokopix3D.js 如何创建浮雕）为了在立体声部分工作。

[该链接](http://wiki.etc.cmu.edu/unity3d/index.php/Stereoscopic_3D)似乎表明，由于立体 3d 系统在 Unity 外部，因此您无法控制在使用 Nvidia 3d 视觉系统时如何解释 3D 效果；所以没有办法使用Nvidia系统。另一方面，我仍然不太确定这一点:)

我还尝试使用 Nvidia SDK 更改立体声参数。我将所需的函数公开到 DLL 中以在 Unity 中使用。但是，DLL 无法正常工作，由于某种我不明白的原因，我无法访问 SDK 中的函数。如果有办法在 Unity 中使用 SDK 功能，我也会很高兴学习这种方式。

此外，如果有任何其他替代方法可以代替浮雕渲染来创建立体视觉，我也会很高兴听到它们，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T23:17:30.277

该插件允许您在场景中使用两个摄像头来组成真正的立体 3D 视觉：

[http://u3d.as/content/dembeta-sl/active-stereoscope-3d-for-unity/2Vt](http://u3d.as/content/dembeta-sl/active-stereoscopic-3d-for-unity/2Vt)

# php - 如何使用 URL 过滤 wordpress 自定义帖子类型？

> ID：12266114
> 
> 赞同：0
> 
> 时间：2012-09-04T14:53:49.007
> 
> 标签：php, javascript, wordpress, url-rewriting, filtering

我正在尝试使用 wordpress 中的 URL 更有效地过滤自定义帖子类型，但它并不完全正常。

我想使用如下链接：

[http://www.georgiancollege.ca/athletics/events/?year=2012&cat=barrie+fitness,orillia](http://www.georgiancollege.ca/athletics/events/?year=2012&cat=barrie+fitness,orillia)

这应该会拉出 2012 年的所有“事件”帖子，这些帖子要么是 barrie 和 Fitness，要么只是 orillia，但是，它只是重定向到这里：

[http://www.georgiancollege.ca/athletics/2012/?cat=barrie%20fitness%2Corillia](http://www.georgiancollege.ca/athletics/2012/?cat=barrie%20fitness%2Corillia)

所以它删除 /events 目录附加 /2012 然后添加类别过滤器 - 所以现在它会转到博客文章存档页面而不是事件存档...

有任何想法吗？

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:44:04.837

事实证明，事件类别不称为“猫”，所以我可以使用正确的名称“eab_events_category”完成我需要的事情，如下所示：

[http://www.georgiancollege.ca/athletics/events/2012/?eab_events_category=barrie+fitness](http://www.georgiancollege.ca/athletics/events/2012/?eab_events_category=barrie+fitness)

# java - 在java中更快地解析json

> ID：12266122
> 
> 赞同：1
> 
> 时间：2012-09-04T14:54:08.360
> 
> 标签：java, json, parsing

我有这个场景。我将向 Web 服务发送一个请求，并获得 XML 响应。使用 json.lib 中的 XML 类将 XML 转换为 JSON。从 Web 服务获得响应的时间是 7 秒，解析大约需要 4-8 秒。然后我需要做的就是将 JSON 解析为非常需要的格式。

例如：转换 XML 后的 JSON

```
{"Response":{"Response":{"type" : [{1,2,3}]},"value":[{100,200,300}]}} 
```

我正在将此 JSON 转换为以下格式

```
[{"type":1,"value":100},{"type":2,"value":200},{"type":3,"value":300}] 
```

问题是，这种特殊的 JSON -> JSON 转换需要很多时间，所以不是在 15 秒内显示结果，而是大约需要 25 秒，最糟糕的是，如果 JSON 有点大，它需要长达 90 秒。你能告诉我我该怎么做才能做到这一点吗？

我正在使用 Spring 3.0 + Tomcat 6.0.29 + json.lib 进行 JSON 解析。

**更新 ：**

我用来将 XML 转换为 JSON 的代码。

```
JSONObject ResponseObj = XML.toJSONObject(elementToString.getelementToString((Element)Responses.item(0))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:51:40.353

首先，为什么是 json-to-json？有必要还是“很高兴拥有”？

我认为问题在于对象创建，首先通过将 xml 解析为 DOM 创建大量对象，然后必须为 xml->json 转换构建新的对象树，然后再次为json->json 转换。对象创建是您可以在 Java 中执行的更昂贵的操作之一。

为了防止创建所有对象，请查看事件驱动的 xml 和 json 处理，例如用于 XML 的[SAX和用于 JSON 的](http://www.saxproject.org/)[Json Simple](http://code.google.com/p/json-simple/)和/或[Jackson](http://jackson.codehaus.org/)。

但当然，最快的解决方案是处理 XML SAX 样式并跳过所有转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:31:25.610

[您可以在xstream](http://xstream.codehaus.org)的 json 解析器中测试速度。通常`xstream`使用拉解析在 XML 的情况下非常快（拉解析与后面的想法相同- after和`Java StAX`中的新标准）。`Java``SAX``DOM`

当我使用`xstream`时，从 java 对象的解析`JSON`并不明显（带有嵌入式浏览器的 RCP 应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T08:20:07.803

自从我发布这个已经一年多了，但我觉得我需要用我的解决方案来结束这个问题，以防有人遇到完全相同的情况！

所以我所做的就是解析 JSON，并将其原样发送到 HTML 页面，在该页面中，我使用 lodash 插件完成了我喜欢的数据解析！它要快得多，而且由于转换发生在前端，我们在解析数据时显示数据，就像 5 后 5 一样，感觉很快。希望能帮助到你！

# php - 修剪、小写、大写单词并保存在 MongoDb 中

> ID：12266123
> 
> 赞同：0
> 
> 时间：2012-09-04T14:54:12.787
> 
> 标签：php, mongodb, character-encoding

我正在尝试将用户提供的字符串保存到 MongoDb 中，但在保存以规范化之前执行此操作：

`ucwords(mb_strtolower(trim($name)))`

但这使得 MongoDb 抛出一个带有“æøå”等字符的 MongoException。

我认为“mb_”使函数与 UTF-8 一起正常工作？使用普通的 strtolower 可以解决问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:02:48.817

如果您使用的是 PHP 5.4，则默认字符集已从 ISO-8859-1 更改为 UTF-8。

strtolower 应该为您做得很好，除非您的 $name 编码不是 ISO-8859-1 或 UTF-8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:15:46.647

MongoDB 总是需要 UTF-8 字符串。

正如@JvdBerg 所说，这取决于您的 PHP，但 PHP 5.4 之前的默认值不是 UTF-8，因此您需要使用`iconv`或`utf8_encode`“编码”字符串。您很可能使用的是旧的 PHP，而字符串实际上是 ISO 编码的。

`mb_`函数在进行转换时仅考虑多字节字符，它不会对字符串进行编码。

# iphone - NSMutable Array 期间应用程序崩溃

> ID：12266124
> 
> 赞同：0
> 
> 时间：2012-09-04T14:54:14.777
> 
> 标签：iphone, nsmutablearray, abaddressbook

我遇到了一个问题`NSMutableArray`。我用它来存储联系人详细信息表单地址簿。我在通讯录中有 300 个联系人。但是我的应用程序会崩溃。我用过这段代码

```
+(NSMutableArray *)getcontactdetails
{
  ABAddressBookRef addressBook;
  CFArrayRef allSources;
  NSMutableArray *list = [[NSMutableArray alloc] init];
  addressBook = ABAddressBookCreate();
  ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);

  allSources = ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonFirstNameProperty);
  CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

  if(nPeople != 0){
    for (CFIndex i = 0; i < nPeople; i++)
    {
        //common field
        NSString *first_name =[[[NSString alloc] init] autorelease];
        contact_details *phone_book_data=[[contact_details alloc] init];
        ABRecordRef aSource = CFArrayGetValueAtIndex(allSources,i);
        CFStringRef firstName = ABRecordCopyValue(aSource, kABPersonFirstNameProperty);
        first_name=[NSString stringWithFormat:@"%@",firstName];

        if ([first_name isEqualToString:@"(null)"] || first_name == nil || first_name.length == 0) {
        }
        else{
            phone_book_data.FirstName=[NSString stringWithFormat:@"%@",first_name];
        }
        [list addObject:phone_book_data];
        phone_book_data=nil;
        [phone_book_data release];

    }
    CFRelease(allSources);
  }

  [self current_function_name:@"Finished getcontactdetails"];

  return list;
 } 
```

我在控制台上有这些：

> 9 月 3 日 23:09:20 iPhone ReportCrash[1378]：为进程 intooch[1373] 制定崩溃报告 9 月 3 日 23:09:21 iPhone com.apple.launchd[1] (UIKitApplication:com.inTooch.inTooch[0x6b8a][ 1373]) : (UIKitApplication:com.inTooch.inTooch[0x6b8a]) 作业似乎已崩溃：分段错误：3 月 11 日 23:09:21 iPhone SpringBoard[52]：应用程序“inTooch”异常退出，信号 11：分段故障：9 月 3 日 11 日 23:09:21 iPhone ReportCrash [1378]：libMobileGestalt computeUniqueDeviceID：bb 返回 imei 的总时间：0

我是如何解决这个问题的？

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:10:24.070

你在这里泄漏内存：

```
CFStringRef firstName = ABRecordCopyValue(aSource, kABPersonFirstNameProperty);
first_name=[NSString stringWithFormat:@"%@",firstName]; 
```

完全摆脱第二行，它所做的只是引入内存泄漏。

这里的发布是没有意义的：

```
phone_book_data=nil;
[phone_book_data release]; 
```

由于您首先分配`nil`给指针，因此您正在泄漏它指向的对象的内存。交换这些线。

您还需要重命名此方法以指示调用代码拥有结果对象。

你真的需要阅读内存管理。从运行静态分析器开始，它应该标记出这段代码的一些问题，并且在你意识到每个警告的原因之前不要停止阅读。

# sql - Oracle 查询发现问题

> ID：12266126
> 
> 赞同：0
> 
> 时间：2012-09-04T14:54:21.313
> 
> 标签：sql, oracle, oracle10g, oracle11g

```
select product.id,product.name,product.itemcode,sum(product.amount)as total_amount
from product where product.account in
select G.account from  report_results G 
where     G.status='Y')
group by product.id,product.name,product.itemcode 
```

将上述内容视为QUERY1

现在为了执行一个操作我修改了QUERY1如下（我正在使用一个名为proc_temp的新表

```
 (select product.id,product.name,product.itemcode,sum(product.amount)as total_amount
   from product where product.account in
   (select G.account from  report_results G 
   where     G.status='Y'))as Input,proc_temp
   where Input.id=proc_temp.id 
```

上面的查询格式不正确。我想将 query1 与一个新表 proc_temp 连接并比较它的两个 id 列。请帮助我在语法上更正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:59:39.893

您需要添加一个`SELECT`子句。我不能保证这个查询，因为我不知道你想做什么，但类似：

```
select i.*
from (
    select product.id, product.name, product.itemcode, sum(product.amount) as total_amount
    from product
    where product.account in (
            select G.account
            from report_results G
            where G.status = 'Y'
            )
) i
inner join proc_temp t on i.id = t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:05:06.850

我会摆脱子查询，并使用内部联接。除此之外，以下查询假设 Input.id 是 G.account

```
select p.id,p.name,p.itemcode,sum(p.amount)as total_amount
from product p
inner join report_results g on (p.account = g.account)
inner join proc_temp pt on (g.account = pt.id)
where g.status='Y'
group by product.id,product.name,product.itemcode 
```

# java - 从数据库中检索印地语字符

> ID：12266127
> 
> 赞同：1
> 
> 时间：2012-09-04T14:54:24.683
> 
> 标签：java, mysql

我编写了一个程序，它在 mysql 数据库中搜索给定的印地语单词并检索其存储在数据库中的相应英文名称。当我直接在 select 语句中给出印地语单词时，它工作正常，但我想使用变量给它，这样它可能更通用，但我没有得到相同的结果..任何人都可以帮助我解决它..提前谢谢

这是我写的代码

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.SQLException;
import com.microsoft.sqlserver.jdbc.*;
import java.sql.*;

public class Example {

public static void main(String[] argv) {

    try {

        Class.forName("com.mysql.jdbc.Driver");

        } 
    catch (ClassNotFoundException e) 
        {

        System.out.println("Where is your MySQL JDBC Driver?");
        e.printStackTrace();
        return;

        }

    Connection connection = null;

                         SQLServerDataSource dataSource = new SQLServerDataSource();
                                 dataSource.setServerName("COMP-PC");
                                dataSource.setPortNumber(1433);
                              dataSource.setDatabaseName("concept");
                              dataSource.setUser("root");
                            dataSource.setPassword("abc");

        try
         {
        connection = dataSource.getConnection();
        connection.setAutoCommit(false);
        System.out.println("Connected to server !!!");
         Statement select = connection.createStatement();
         String var="N'हल्दी'";

     ResultSet result = select.executeQuery

               ("SELECT Name, Id FROM MConcept where CName=N'हल्दी'");  
     **// When given like the above statement it works fine 

                 ("SELECT Name, Id FROM MConcept where CName='"+var+" ' "); 
    **//This does not give result 

      System.out.println("Got results:");
      while(result.next()) { // process results one row at a time

      String Name = result.getString(1);
      int ID = result.getInt(2);

       System.out.println("name = " + Name);
       System.out.println("id = " + ID);
       }
      select.close();
     connection.close();
      }

  catch (SQLException e)
  {
   System.out.println("Connection Failed! Check output console");
   e.printStackTrace();
   return;
   }

    if (connection != null)
     {
    System.out.println("Successfully connected!");

     } 
   else 
    {
System.out.println("Failed to make connection!");
    }

   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:59:47.177

你的第二个说法是不正确的。

应该

```
"SELECT Name, Id FROM MConcept where CName=" + var 
```

但我强烈建议使用 PreparedStatement 并阅读这个关于 SQL 注入的警示故事 -> [http://xkcd.com/327/](http://xkcd.com/327/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:59:40.457

你有额外的报价；它们都`var`在你的 SQL 中。

您的工作示例是：

```
("SELECT Name, Id FROM MConcept where CName=N'हल्दी'"); 
```

虽然您损坏的示例评估为：

```
("SELECT Name, Id FROM MConcept where CName='N'हल्दी' ' "); 
```

这可能不仅不会给出结果，而且应该会导致有关您的 SQL 语法的错误消息，因为您有字符串文字 'N' 后跟某些编码中未引用的印地语字符和新字符串中的空格。

通过连接字符串来构建 SQL 也是一个非常不好的习惯；当值来自用户输入而不是像您的示例中那样硬编码时，请确保您永远不会这样做。

# asp.net - 为什么 EF 不能翻译 Int32.Pars(...?

> ID：12266131
> 
> 赞同：3
> 
> 时间：2012-09-04T14:54:37.537
> 
> 标签：asp.net, entity-framework

为什么 EF 不能`Int32.Parse`在`where`条件部分翻译？

例如下面的代码有错误：

```
var query = (from list in dbContext.Packages
                             where list.Id == Int32.Parse(Request["Id"].ToString())
                             select list).FirstOrDefault(); 
```

我解决了这个问题：

```
Int32 ID = Int32.Parse(Request["Id"].ToString());
 var query = (from list in dbContext.Packages
                             where list.Id == ID
                             select list).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:56:38.217

因为查询只是一个被翻译成 SQL 的表达式。

EF 不知道如何翻译`Int32.Parse`成等效的 SQL 语句，所以它失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:58:11.193

你解决问题的方法是正确的。

`where list.Id == Int32.Parse(Request["Id"].ToString())`，如果它可以工作，意味着发送`Request`到数据库，让数据库提取`["Id"]`，然后调用`ToString()`and `Int32.Parse()`。

`Int32 ID = Int32.Parse(Request["Id"].ToString());`在客户端上执行。然后你得到一个整数值，并且只有那个整数值被发送到数据库。

# ruby-on-rails - 将所有用户的个人资料图像存储到单个目录或每个子目录 ID 中？

> ID：12266135
> 
> 赞同：2
> 
> 时间：2012-09-04T14:54:49.863
> 
> 标签：ruby-on-rails, amazon-s3, storage

我使用 amazon s3 作为用户个人资料图片的存储。我看到许多网站会生成大的随机文件名并将它们放入同一个根目录中，例如：

```
http://xxx.us-east-1.amazonaws.com/aHR0cHM6Ly9mYmNkbi1wcm9maWxlLWEuYWthbWFpaGQubmV0L2hwcm9maWxlLWFrLWFzaDIvMjczMzkxXzEwMDAwMDMxMjAxMzg5OV81NTk3MjM4Mzdfbi5qcGc.jpg 
```

我的问题是：这种方法的优缺点是什么？

如果我将它们放在不同的目录中，我将来会遇到什么问题？

```
http://xxx.us-east-1.amazonaws.com/users/id/username.jpg 
```

或者

```
http://xxx.us-east-1.amazonaws.com/users/id/random_number.jpg 
```

谢谢！

# ios - 信息按钮未链接到其他视图控制器

> ID：12266139
> 
> 赞同：0
> 
> 时间：2012-09-04T14:54:54.800
> 
> 标签：ios, cocoa-touch, uibutton, segue

我有一个信息按钮，显示为未链接到所需视图控制器的相机视图顶部的覆盖 UIView。当它被触摸时没有任何反应。

这是创建按钮并链接它的代码

```
 // Create a Button to get Help
    infoButton =  [UIButton buttonWithType:UIButtonTypeInfoLight ] ;
    CGRect buttonRect = infoButton.frame;

    // Calculate the bottom right corner
    buttonRect.origin.x = 455;
    buttonRect.origin.y = 297;
    [infoButton setFrame:buttonRect];

    [infoButton addTarget:self action:@selector(presentInfo) forControlEvents:UIControlEventTouchUpInside];
    [view addSubview:infoButton]; 
```

这是创建segue的代码

```
- (void) presentInfo
{
InfoViewController *ivc = [self.storyboard instantiateViewControllerWithIdentifier:@"InfoViewController"];
[self presentModalViewController:ivc animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:10:23.897

先试试这个： - 在以下位置设置断点：

```
- (void) presentInfo
{
InfoViewController *ivc = [self.storyboard instantiateViewControllerWithIdentifier:@"InfoViewController"];
[self presentModalViewController:ivc animated:YES];
} 
```

如果程序达到这一点，那肯定是segue有问题。

这周我的按钮也有一些问题。在我的情况下，我的按钮上曾经有另一个 UIView，所以它不会点击选择器。或者您可以尝试更改：

```
[infoButton addTarget:self action:@selector(presentInfo) forControlEvents:UIControlEventTouchUpInside]; 
```

在：

```
[infoButton addTarget:self action:@selector(presentInfo) forControlEvents:UIControlEventTouchDown]; 
```

还要查看按钮是否对您的触摸与替代图像做出反应。

我希望这有帮助

哦，或者尝试给它一个你制作的 UITapGestureRecognizer ，但这仅适用于真正绝望的解决方案，如果没有其他方法......

# emacs - 禁用错误闪烁

> ID：12266140
> 
> 赞同：0
> 
> 时间：2012-09-04T14:54:58.363
> 
> 标签：emacs, elisp

不确定这是否是一种普遍的行为，但至少在 GTK/Linux Emacs 23/24 中，当一个人犯某种错误时，程序的第一行和最后一行会闪烁——也就是说，在短时间内反转它们的颜色.

重现此问题的一种简单方法是将点放在缓冲区的第一行，然后按向上键。一种是（方便地）提示“缓冲区开始”消息，但也会发生上述闪烁。

我觉得这在视觉上很烦人，在概念上有点过分热心。有什么办法可以禁用吗？这是功能还是错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:03:12.123

见变量可见钟：

```
Documentation:
Non-nil means try to flash the frame to represent a bell.

See also `ring-bell-function'.

You can customize this variable. 
```

# javascript - 如何用 Javascript 编写 OR？

> ID：12266142
> 
> 赞同：-5
> 
> 时间：2012-09-04T14:55:09.097
> 
> 标签：javascript

你如何`OR`用 Javascript 编写代码？

例子 ：

```
if ( age **or** name == null ){
    do something
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T14:56:00.257

只需使用：

```
if ( age == null || name == null ){    
    // do something    
} 
```

虽然，如果您只是测试变量是否具有值（因此是 'falsey' 而不是等于`null`），您可以改用：

```
if ( !age || !name ){    
    // do something    
} 
```

参考：

*   [JavaScript 中的逻辑运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T14:55:47.473

```
if (age == null || name == null) {

} 
```

注意：您可能希望看到这个线程，[为什么 null 是一个对象以及 null 和 undefined 之间的区别是什么？](https://stackoverflow.com/questions/801032/null-object-in-javascript), 有关 JS 中的空/未定义变量的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:02:43.210

您遇到的问题是这种方式或关联方式。 `(age or name == null)`实际上会是`((age or name) == null)`，这不是你想说的。你想要`((age == null) or (name == null))`。如有疑问，请插入括号。如果您放入括号并进行评估，您会看到情况变成了`(true == null)`和`(false == null)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-19T13:17:06.280

我们在**JavaScript**中没有**OR**运算符，我们使用相反，在您的情况下...：**`||`**

 **```
if (age || name == null) {
  //do something
} 
```**

# jakarta-ee - 定时器在哪里得到持久化 ejb

> ID：12266145
> 
> 赞同：1
> 
> 时间：2012-09-04T14:55:23.620
> 
> 标签：jakarta-ee, ejb

我现在有一个简单的问题，我正在使用 EJB 中的计时器，我创建了一个这样的计时器：

```
timerService.createCalendarTimer(
new ScheduleExpression().second("*/60").minute("*").hour("*"), new TimerConfig(
"mainTimer", true)); 
```

现在当我关闭服务器并重新启动时，这个计时器处于活动状态我知道我有 perstiance = true 但我没有指定数据源这些被持久化在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:36:05.560

我不知道您使用的是什么应用程序服务器，但例如在 GlassFish 中，计时器服务已预先配置为使用嵌入式 Java DB 数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:29:52.877

在服务器重新启动之间没有保存持久计时器的标准位置。它们可能保存在数据库或文件系统上，就像 Jboss 7 默认所做的那样。这应该是可配置的，但大多数时候您不需要更改默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:27:45.677

至于 WebSphere 6.1 默认的 EJB Timer 数据库是 Derby。

# web - nginx 是否缓冲其错误日志？

> ID：12266150
> 
> 赞同：5
> 
> 时间：2012-09-04T14:55:40.347
> 
> 标签：web, nginx

我们正在查看 nginx 错误日志以进行修改，但有一些难以解释的边缘情况，例如文件截断等。

了解 nginx 是动态写入错误日志文件还是缓冲写入错误日志会很有帮助。缓冲对于错误日志没有多大意义，但仍然可以确保 nginx 的高性能。

我们知道 nginx 缓冲访问日志写入，但目前无法找到证据表明它对错误日志执行相同操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T23:56:23.650

不，错误日志写入不会被缓冲。

# objective-c - Instagram 中的高斯选择性线性模糊着色器

> ID：12266155
> 
> 赞同：0
> 
> 时间：2012-09-04T14:55:44.027
> 
> 标签：objective-c, ios, opengl-es

> **可能重复：**
> [在目标 C 中创建类似 instagram 的 tilf-shift 过滤器](https://stackoverflow.com/questions/11256100/create-a-tilf-shift-filter-like-instagram-in-objective-c)

我需要在我的 iOS 应用程序中实现线性模糊。我想围绕排除的圆点按角度旋转未模糊的线。我使用[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)，它是一个非常棒的框架，但它没有这个功能。

# html - 带边框的 CSS 下拉菜单

> ID：12266158
> 
> 赞同：0
> 
> 时间：2012-09-04T14:55:53.893
> 
> 标签：html, css

我正在尝试在此链接中制作一个下拉菜单：http: [//k-prim.biz/ttpm/workspace-04d.png](http://k-prim.biz/ttpm/workspace-04d.png) 这里的诀窍是背景是半透明的，我在名称上有一个灰色边框和下拉菜单。任何想法只用css做这个？

更清楚一点 - 我想避免这部分边框 - 在用户名下：k-prim.biz/ttpm/screen.png

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:18:41.160

这是可能的，但您需要稍微更改您的 HTML

**HTML**

```
<div id="user">
    <div id="username">
      ljubo_v 
    </div>
    <div id="userarrow"></div>
    <div id="userdrop">
        <div id="myhomecork">
          myhomecork
        </div>
    </div>
</div> 
```

**css**

```
#user{
  position:absolute;
  right:50px; 
  top: 8px; 
  cursor:pointer;
  text-align:right;
  width: 202px;
  overflow: 
  hidden;
  z-index:0;
}
#username{
    border: solid 1px transparent;
    padding-top: 5px;
    padding-right: 5px;
    padding-bottom: 2px;
    padding-left: 8px;
    text-align:right; z-index:5;
    right:0;
    position: relative;
    border-bottom: none;
    line-height: 1em;
    float: right;
}
#user:hover #username::after{
    content:'';
    height: 1px;
    width:100%;
    position: absolute;
    border-left: solid 202px #999;
    right: 0;
    bottom: 0;
}

#userarrow{
    float:right;
    display:block;
    width:9px;
    height:7px; 
    margin-right:5px;
    background-image: url(../images/interface/sort-down.png);
    background-repeat: no-repeat;
    clear: right;
    margin-top: 5px;
}

#user:hover > #username{
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
    border-right-style: solid;

    border-left-style: solid;
    border-top-color: #999;
    border-right-color: #999;
    border-left-color: #999;
    background-image: url(../images/interface/black50.png);
    background-repeat: repeat;
}

#userdrop{
    background-image: url(../images/interface/black50.png);
    background-repeat: repeat;
    display: none;
    width:200px;
    height:433px;
    float: right;
    margin-top: -12px;
    text-align:left;
    font-size:13px;
    border: solid 1px #999;
    border-top: none;
}
#user:hover #userdrop{display:block;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:59:21.380

透明背景 (CSS3)：`background: rgba(0,0,0,0.6);`参数为`(red, green, blue, opacity)`（0.00 表示 0% 到 1.00 表示 100%）。

要重叠项目，请制作您的主菜单项`position: relative;`（这是以下各项正常工作所必需的）：制作子导航`position: absolute;`。这将是绝对的，但相对于顶部菜单项。您可以使用负位置值来重叠元素。

# php - ZFDebug - 添加自定义日志消息

> ID：12266168
> 
> 赞同：0
> 
> 时间：2012-09-04T14:56:14.620
> 
> 标签：php, debugging, zend-framework

我正在使用当前版本的 ZFDebug v1.5。我设法安装了调试栏。我只是想弄清楚如何添加我自己的消息。例如新通知，或系统错误..甚至可能输出数组信息等？

![在此处输入图像描述](../Images/5ca684cb60f5e4395f102c8d135ca7b5.png)

我已经搜索过以前的 stackoverflow 问题

[Zend 框架 - ZFDebug - 日志 - 记录自定义错误](https://stackoverflow.com/questions/9445239/zend-framework-zfdebug-log-log-custom-errors)

[ZFDebug Toolbar 如何记录自定义消息？](https://stackoverflow.com/questions/10545217/zfdebug-toolbar-how-to-log-custom-messages)

但是，代码示例不适用于我正在使用的当前版本？

也许我可以使用另一个插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:13:40.863

Adding for example and error message is simple as:

```
ZFDebug_Controller_Plugin_Debug_Plugin_Exception::errorHandler($level, $message, $file, $line); 
```

When you want to add a new tab to ZFDebug just write your own plugin to it. And then include written class to options, when initalizing ZFDebug.

# c++ - 线程 'std::vector >::_Insert_n' (0xf4) 以代码 0 (0x0) 退出

> ID：12266170
> 
> 赞同：0
> 
> 时间：2012-09-04T14:56:19.673
> 
> 标签：c++, visual-studio-2010, stl

关闭我的应用程序时，我在调试输出中得到了这条奇怪的线。

```
The thread 'std::vector<foo *,std::allocator<foo *> >::_Insert_n' (0xf4) has exited with code 0 (0x0). 
```

我习惯于看到类似...的消息

```
The thread 'Win32 Thread' (0x1ad0) has exited with code 0 (0x0). 
```

... 或者 ...

```
The thread 'RPC Callback Thread' (0x1f28) has exited with code 0 (0x0). 
```

...但这是第一次。这个奇怪的线程是什么？

它是由 STL 以某种方式启动的吗？

**编辑**

* * *

这是调试输出的摘录。

```
The thread 'Win32 Thread' (0x149c) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1b68) has exited with code 0 (0x0).
The thread 'std::vector<foo *,std::allocator<foo *> >::_Insert_n' (0xf4) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1ad0) has exited with code 0 (0x0).
The thread 'RPC Callback Thread' (0x1f28) has exited with code 0 (0x0). 
```

# css - 多个背景图像，附加图像

> ID：12266171
> 
> 赞同：0
> 
> 时间：2012-09-04T14:56:30.737
> 
> 标签：css

无论如何，CSS 中有没有将背景图像“附加”为 DIV 的附加背景图像，而不是将其“设置”为一个值（即替换已经存在的值）。

贾米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:58:56.927

真的这样做而不是将它们设置在具有相同大小并堆叠在元素顶部的元素的伪元素（[**DEMO**](http://dabblet.com/gist/3621981)）/子元素上吗？

**没有**。

`box-shadow`和其他人也是如此`transition`。将来事情可能会发生变化（请参阅[**这篇文章**](http://www.xanthir.com/blog/#4KZ0)），但就目前而言……这个问题的答案仍然是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:04:18.987

`background`我可能错误地理解了您的问题（如果是这样，请参阅 Ana 的回答），但是您可以通过用逗号分隔它们的说明符来将多个图像用作同一元素：

```
background: url("background1.png"), url("background2.png"), ...; 
```

您可以像通常简写一样为每个属性分别指定属性：

```
background: url("background1.png") no-repeat 50% 50%, url("background2.png"), ...; 
```

# lisp - Lisp没有输出任何结果

> ID：12266174
> 
> 赞同：0
> 
> 时间：2012-09-04T14:56:46.973
> 
> 标签：lisp

我有一个问题如下

```
 (define (problem GP)
   (:domain world)
   (:objects x1 z1 y1)
   (:init (X x1) (Z z1) )
   (:goal (Y y1))
   ) 
```

和域如下

```
 (define (domain GP-domain)
    (:action A
     :paremeters(?x y1)
     :precond((X ?x))
     :effect((Y y1)))
  ) 
```

我尝试用计划器运行它，但没有结果。正确地，动作 A 将在满足前提条件 (X ?x) 时执行。我不知道出了什么问题。

另一个疑问是，当我在我的对象问题中将 y1 声明为对象时，是否允许我在上述操作 A 中实际“声明”（Y y1）？它是否正确？

（解决了）

我应该用更简单的方式

```
 (define (domain GP-domain)
  (:action A
   :precond X
   :effect Y)

 (define (problem GP-problem)
   (:domain GP-domain)
   (:init X Z)
   (:goal Y)
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:21:44.723

我应该用更简单的方式

```
 (define (domain GP-domain)
  (:action A
   :precond X
   :effect Y)

 (define (problem GP-problem)
   (:domain GP-domain)
   (:init X Z)
   (:goal Y)
  ) 
```

# python - Python PyEphem 计算方位角和高度

> ID：12266176
> 
> 赞同：4
> 
> 时间：2012-09-04T14:56:50.783
> 
> 标签：python, azimuth, altitude, pyephem

我是 PyEphem 的新手，我正试图弄清楚它可以做什么以及它是如何工作的。由于我不想将其用作黑匣子并盲目相信我得到的任何数字，我想重新创建一个示例，[此处](http://www.stargazing.net/kepler/altaz.html)解释。

该示例在 1998 年 8 月 10 日 23:10 UT 计算给定观察者的对象的方位角和高度。给出以下参数：

RA = 16 小时 41.7 分钟，DEC = 36 天 28 分钟

观察者的纬度为北纬 52 分 30 分，西经 1 分 55 分。

根据示例（我可以在 Excel 中重新创建）的正确答案是 AZ = 269.14634 度和 ALT = 49.169122 度。

我使用 pyephem 编写了以下代码以尝试达到相同的结果：

```
day = '1998/8/10 23:10:00'
longitude = ephem.degrees('-1.91667')
latitude = ephem.degrees('52.5')

star = ephem.FixedBody()
star._ra = '16:41:42.0'
star._dec = '36:28:00.0'

observer = ephem.Observer()
observer.date = day
observer.lon = longitude
observer.lat = latitude

star.compute(observer)

print 'Observer', observer
print 'RA', star.ra, 'DEC', star.dec
print 'AZ', star.az, 'ALT', star.alt 
```

运行程序给了我这个输出：

```
>>> 
Observer <ephem.Observer date='1998/8/10 23:10:00' epoch='2000/1/1 12:00:00' lon=-1:55:00.0 lat=52:30:00.0 elevation=0.0m horizon=0:00:00.0 temp=15.0C pressure=1010.0mBar>
RA 16:41:39.23 DEC 36:28:33.5
AZ 269:09:54.9 ALT 49:10:57.7 
```

AZ + ALT 的结果显然与示例大致相同，但远非相同。与我输入的内容相比，打印输出中的 RA 和 DEC 略有修改，这也让我感到困惑。

如果有人可以帮助我解释为什么结果不同以及我可以或应该做些什么来复制结果，我将不胜感激。谢谢。

**编辑**：更正了下面答案中指出的错字。这个问题仍然有效。

**EDIT2**：好的，我已经阅读（并且有点理解）为什么 PyEphem 从此[链接](http://rhodesmill.org/pyephem/radec.html)调整了正确的提升和赤纬。我不明白的是，是否有任何方法可以让 PyEphem 忽略对*相对论偏转*、*章动*和*光像差的*调整，就像你可以让它忽略*大气折射*一样？我假设方位角的差异是由于 RA 和 DEC 的调整，但很高兴确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:38:49.660

观察者包括“temp=15.0C pressure=1010.0mBar”这一事实意味着计算将包括折射。你想关闭折射

如[帮助](http://rhodesmill.org/pyephem/quick.html#other-functions)中所述：

> 这些表观位置包括模拟观测者温度和压力的大气折射的调整；将观察者的压力设置为零以忽略折射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:32:31.520

PyEphem 底层的 C 库没有任何方法可以关闭偏转、畸变或章动——也许是因为大自然也不允许我们关闭这些效果，但我不确定！我会注意到，它不会对地球轨道卫星进行这些计算，但我想不出一个简单的方法让你把卫星放在一个精确的 RA 和你的位置之上，这样你就可以问 PyEphem它的位置。

实际上，我本周在 DjangoCon 上讨论 API，并思考 PyEphem 有朝一日如何使其内部工作更容易从 Python 访问，而不是将所有这些有趣的步骤锁定在 C 代码中。但是，在我准备好替代方案之前，完成您想要的唯一方法是打开源文件`circum.c`并注释掉这些行：

```
/* allow for relativistic light bending near the sun */
deflect (mjed, lam, bet, lsn, rsn, 1e10, &ra, &dec);

/* TODO: correction for annual parallax would go here */

/* correct EOD equatoreal for nutation/aberation to form apparent 
 * geocentric
 */
nut_eq(mjed, &ra, &dec);
ab_eq(mjed, lsn, &ra, &dec); 
```

如果这三个调用（`deflect()`从第 263 行开始）被注释掉，那么您可能会得到更接近本文中产生的答案`nut_eq()`。`ab_eq()`您可以通过以下方式应用这些更改：

*   下载`.tar.gz`PyEphem 的。
*   提取存档以生成文件。
*   进行我上面建议的编辑。
*   运行`python setup.py install`以安装您的自定义版本的软件。
*   试试看！

可能还有另一个障碍，如果岁差以某种方式开始发挥作用——在这种情况下，你可能需要将`star`对象的纪元设置为准确`'1998/8/10 23:10:00'`的——但请先尝试关闭三个光效调用，看看这是否能让你更接近！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:13:16.243

您想输入：RA = 16 h 41.7 min

但你输入了：star._ra = '16:41.42.0'

而不是star._ra = '16:41:42.0'

# sql - 如何使用 Oracle 将列值转换为 CamelCase？

> ID：12266179
> 
> 赞同：13
> 
> 时间：2012-09-04T14:56:53.593
> 
> 标签：sql, oracle, camelcasing

我需要一种使用 Oracle 10g 将列值转换为 CamelCase 的方法。我更喜欢在我的 select 语句中执行它，但如果我必须使用函数，那也可以。

我不需要支持下划线，只需要空格。

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-04T15:15:31.943

我猜[`initcap()`](http://www.techonthenet.com/oracle/functions/initcap.php)和的组合[`replace()`](http://www.techonthenet.com/oracle/functions/replace.php)会起作用：

```
select replace(initcap('hi ben'),' ') from dual;

REPLA
-----
HiBen 
```

这只是将每个单词的第一个字符大写，然后将空格替换为空。

如果第一个字符是数字，它显然不起作用：

```
select replace(initcap('go 2stack overflow'),' ') from dual;

REPLACE(INITCAP(
----------------
Go2stackOverflow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-01T02:59:16.420

这不是我对 camelCase 的理解

```
select substr(lower('Camel Case means the first char should be lower cased'),1,1)||substr(replace(initcap('Camel Case means the first char should be lower cased'),' '),2) from dual; 
```

```
camelCaseMeansTheFirstCharShouldBeLowerCased                                    
1 row selected. 
```

# c# - 可选参数：编译时间常数问题

> ID：12266182
> 
> 赞同：1
> 
> 时间：2012-09-04T14:57:01.440
> 
> 标签：c#, .net, compiler-errors

为什么这有效：

```
public int DoesEmailAddressExistsExcludingEmailAddressID(
    string emailAddress, 
    string invitationCode, 
    int emailAddressID = 0, 
    int For = (int) Enums.FOR.AC) 
```

而这不是

```
public int DoesEmailAddressExistsExcludingEmailAddressID(
    string emailAddress, 
    string invitationCode, 
    int emailAddressID = 0, 
    int For = Enums.FOR.AC.GetHashCode()) 
```

其中 AC 是枚举。枚举的哈希码可以在运行时更改吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T14:58:58.680

`GetHashCode`是一种方法。方法的返回值不是编译时常量，因为需要执行代码来确定返回值。
方法返回是否始终相同并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:01:06.137

Enum 的哈希码很有可能在程序运行时保持不变。但是，这在编译时不能*保证。*因此它不能是编译时常量。

此外，正如丹尼尔已经提到的，`GetHashCode`必须执行以确定值，这显然不能在编译时完成。

# java - Java 对象和方法参数

> ID：12266183
> 
> 赞同：2
> 
> 时间：2012-09-04T14:57:02.030
> 
> 标签：java, methods

*我只是想知道我是否遗漏了以下问题。我已经用我的回答提出了这个问题。*

什么样的对象可以传入下面的方法？在这个方法中可以在 obj 上调用哪些方法？

```
public void doThis (Object obj)
{
    // some code
} 
```

我的答案：

可以在上述方法中传递的对象类型是从作为当前类的超类的实际类实例化的对象以及已经在当前类本身中实例化的对象。此外，从其他实际类实例化的对象可以类型转换为当前类或其超类之一，以允许作为方法 doThis() 的参数。

可以在方法内部调用的方法包括当前类中的任何公共、受保护或私有方法以及从超类继承的任何方法。

这是正确的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T14:59:21.017

> 什么样的对象可以传入下面的方法？

的任何子类`Object`，包括`Object`它自己。

> 在这个方法中可以在 obj 上调用哪些方法？

类中定义的任何公共/受保护方法[`Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)（例如`toString`、`notify`、`wait`等）。这不包括在子类中定义的方法，除非您明确地向下转型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:01:10.363

你夸大了真正简单的答案。您可以传入的参数`doThis`可以是类型对象`Object`或其任何子类。这就是一切（原始类型除外）。

在内部`doThis`，您可以调用大多数方法，而不仅仅是类和超类中的方法。例如，`System.out.println()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:00:11.097

你的回答不正确。

的任何子类[`Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)都可以传入此方法。所有对象都是 的子类`Object`，包括数组。传入后，您可以调用在其上的`Object`类中定义的任何方法，除非您先对其进行类型转换。

# android - 在android中遍历color.xml中的所有值

> ID：12266185
> 
> 赞同：2
> 
> 时间：2012-09-04T14:57:06.197
> 
> 标签：android, loops

我正在为 android 开发一个图像编辑应用程序，并希望提供一个已定义颜色的列表，供我的用户在执行某些活动时选择（选择墨水颜色等）

我的 color.xml 中有一个很好的颜色列表，非常适合此任务，但我不知道如何迭代它并将其传递给自定义 ListAdapter。

我用谷歌搜索，但没有真正找到任何解决方案。

有什么方法可以循环 color.xml 中的所有值吗？

# linux - linux线程在eclipse中运行时被实时信号挂起

> ID：12266191
> 
> 赞同：11
> 
> 时间：2012-09-04T14:57:22.750
> 
> 标签：linux, eclipse, gdb, pthreads, signals

一个简单的linux多线程程序。在其中一个线程中，我启动了一个计时器，计时器会将 SIGRTMIN 发送到该线程。

使用eclipse gdb调试时，线程总是被SIGRTMIN挂起，恢复后，程序运行良好。

出了eclipse gdb，一切顺利。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-04T15:40:23.573

问题解决了。在主目录中创建一个 .gdbinit 文件。并添加以下行

```
handle SIG34 nostop noprint pass 
```

这使得 gdb 忽略 SIG-xx 实时信号

# python - 从 QGraphicsView 到 QMainWindow 现在 keyPressEvent 没有看到箭头键

> ID：12266192
> 
> 赞同：1
> 
> 时间：2012-09-04T14:57:22.670
> 
> 标签：python, event-handling, pyqt4

我正在尝试了解 PyQt4 中的事件处理，并偶然发现在 `keyPressEvent`更改类定义后看到除箭头键之外的所有键的情况。

从看到所有键：

```
class MaskWindow(QtGui.QGraphicsView):
    def __init__(self):
        QtGui.QGraphicsView.__init__(self)

        self.deskTop = QtGui.QDesktopWidget()
        self.scene = QtGui.QGraphicsScene(self) 
```

看不到箭头键，向下翻页和向上翻页，但其他人可以使用，例如`Tab`, `Shift`, `a`- `z`：

```
class MaskWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self, None, QtCore.Qt.WindowStaysOnTopHint|
                                   QtCore.Qt.FramelessWindowHint)            

        self.deskTop = QtGui.QDesktopWidget()
        self.view = QtGui.QGraphicsView(self)
        self.scene = QtGui.QGraphicsScene(self) 
```

这是箭头键不再捕获的键处理程序：

```
def keyPressEvent(self, event):
    key = event.key()
    if key == QtCore.Qt.UpArrow
        self.diameter += 1
    if key == QtCore.Qt.DownArrow:
        self.diameter -= 1 
```

换课时我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:59:50.183

您重新实现`keyPressEvent`的函数使用了错误的枚举常量。

它应该使用[QtCore.Qt.Key](http://doc-snapshot.qt-project.org/4.8/qt.html#Key-enum)枚举：

```
def keyPressEvent(self, event):
    key = event.key()
    if key == QtCore.Qt.Key_Up:
        self.diameter += 1
    if key == QtCore.Qt.Key_Down:
        self.diameter -= 1 
```

`QGraphicsView`并且可以使用以下功能在任何小部件（包括 ）上更改窗口标志[`setWidowFlags`](http://doc-snapshot.qt-project.org/4.8/qwidget.html#windowFlags-prop)：

```
class MaskWindow(QtGui.QGraphicsView):
    def __init__(self):
        QtGui.QGraphicsView.__init__(self)
        self.setWindowFlags(self.windowFlags() |
            QtCore.Qt.WindowStaysOnTopHint |
            QtCore.Qt.FramelessWindowHint) 
```

**更新**

在您的示例中重新实现的原因`keyPressEvent`不能与您一起使用`QMainWindow`，因为它不会再获得任何键事件 - 它们将转到带有键盘焦点的子小部件。

解决此问题的一种方法是[`event filter`](http://doc-snapshot.qt-project.org/4.8/qobject.html#eventFilter)在要从中获取关键事件的小部件上设置一个：

```
class MaskWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self, None,
            QtCore.Qt.WindowStaysOnTopHint |
            QtCore.Qt.FramelessWindowHint)
        self.view = QtGui.QGraphicsView(self)
        self.view.installEventFilter(self)
        self.setCentralWidget(self.view)

    def eventFilter(self, source, event):
        if (source is self.view and
            event.type() == QtCore.QEvent.KeyPress):
            key = event.key()
            if key == QtCore.Qt.Key_Up:
                self.diameter += 1
            elif key == QtCore.Qt.Key_Down:
                self.diameter -= 1
        return QtGui.QMainWindow.eventFilter(self, source, event) 
```

# java - GAE/GWT java 应用程序中的 OAuth2 令牌无效

> ID：12266194
> 
> 赞同：1
> 
> 时间：2012-09-04T14:57:27.693
> 
> 标签：java, google-app-engine, gwt, oauth-2.0

我正在开发一个 GWT/GAE java 应用程序，它

1.  只需通过 GWT 地理定位实现获取用户位置（效果很好）
2.  单击按钮时应将纬度、经度和准确度写入 Google 电子表格

当我单击“保存到电子表格”按钮时，我在 Eclipse 控制台中收到以下错误消息：

```
04.09.2012 16:44:01 com.google.appengine.repackaged.org.apache.http.impl.client.DefaultRequestDirector handleResponse
WARNUNG: Authentication error: Unable to respond to any of these challenges: {authsub=WWW-Authenticate: AuthSub realm="https://www.google.com/accounts//AuthSubRequest"}
com.google.gdata.client.GoogleService$SessionExpiredException: OK
<HTML>
<HEAD>
<TITLE>Token invalid - Invalid token: Stateless token parent not found</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Token invalid - Invalid token: Stateless token parent not found</H1>
<H2>Error 401</H2>
</BODY>
</HTML>
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:570)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:998)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
at com.google.gdata.client.Service.getFeed(Service.java:1017)
at com.cloudpilots.locator.server.GSpreadsheetServiceImpl.insertRow(GSpreadsheetServiceImpl.java:42)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

所以它必须是凭证/令牌的问题。

下面是服务器端 RPC 服务代码：

```
public class GSpreadsheetServiceImpl extends RemoteServiceServlet implements
        GSpreadsheetService {

    @Override
    public void insertRow(String latitude, String longitude, String accuracy) {

        try {
            String userId = UserServiceFactory.getUserService().getCurrentUser().getUserId();
            Credential credential = OAuth2Utils.initializeFlow().loadCredential(userId);

            SpreadsheetService service = new SpreadsheetService("Locator-v1");

            service.setOAuth2Credentials(credential);

            // Define the URL to request.  This should never change.
            URL SPREADSHEET_FEED_URL = new URL(
                "https://spreadsheets.google.com/feeds/spreadsheets/private/full");

            // Make a request to the API and get all spreadsheets.
            SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL,
                SpreadsheetFeed.class);
            List<SpreadsheetEntry> spreadsheets = feed.getEntries();

            // TODO: Choose a spreadsheet more intelligently based on your
            // app's needs.
            SpreadsheetEntry spreadsheet = spreadsheets.get(0);
            for (SpreadsheetEntry spreadsheetEntry : spreadsheets) {
                if (spreadsheetEntry.getKey() == "MY_SPREADSHEET_KEY") {
                    spreadsheet = spreadsheetEntry;
                    break;
                }
            }

            // Get the first worksheet of the first spreadsheet.
            // TODO: Choose a worksheet more intelligently based on your
            // app's needs.
            WorksheetFeed worksheetFeed = service.getFeed(
                spreadsheet.getWorksheetFeedUrl(), WorksheetFeed.class);
            List<WorksheetEntry> worksheets = worksheetFeed.getEntries();
            WorksheetEntry worksheet = worksheets.get(0);

            // Fetch the list feed of the worksheet.
            URL listFeedUrl = worksheet.getListFeedUrl();
            ListFeed listFeed = service.getFeed(listFeedUrl, ListFeed.class);

            // Create a local representation of the new row.
            ListEntry row = new ListEntry();
            row.getCustomElements().setValueLocal("Latitude", latitude);
            row.getCustomElements().setValueLocal("Longitude", longitude);
            row.getCustomElements().setValueLocal("Accuracy", accuracy);

            // Send the new row to the API for insertion.
            row = service.insert(listFeedUrl, row);
        } catch (ServiceException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

这是 OAuth2Utils 类：

```
public class OAuth2Utils {
    /** Global instance of the HTTP transport. */
    static final HttpTransport HTTP_TRANSPORT = new UrlFetchTransport();

    /** Global instance of the JSON factory. */
    static final JsonFactory JSON_FACTORY = new JacksonFactory();

    static String getRedirectUri(HttpServletRequest req) {
        GenericUrl url = new GenericUrl(req.getRequestURL().toString());
        url.setRawPath("/oauth2callback");
        return url.build();
    }

    static GoogleAuthorizationCodeFlow initializeFlow() throws IOException {
        return new GoogleAuthorizationCodeFlow.Builder(HTTP_TRANSPORT,
                JSON_FACTORY, "MY_CLIENT_ID",
                "MY_KEY",
                Collections.singleton("https://spreadsheets.google.com/feeds/"))
                .setCredentialStore(new AppEngineCredentialStore())
                .setAccessType("offline").build();
    }
} 
```

有谁知道问题可能是什么？

此致，

尤里维恩斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:55:24.117

这种方式有效：

1) 使用 Google 驱动器 DrEdit 示例进行 OAuth [https://developers.google.com/drive/examples/java](https://developers.google.com/drive/examples/java)

注意：您需要添加刷新令牌，我发现添加它并不难。

2）像这样连接：

```
 SpreadsheetService service = new SpreadsheetService("cellmaster-v0.2");

    // Authorize the service object for a specific user (see other sections)
    service.setHeader("Authorization", "Bearer " + accessToken);

    URL SPREADSHEET_FEED_URL = getSpreadsheetUrl(spreadsheetKey);
    spreadsheet = service.getEntry 
            (SPREADSHEET_FEED_URL, SpreadsheetEntry.class); 
```

我看了很多例子。我花了几天时间才找到这个解决方案。

# java - 如何在外观变化时动态更改图标？

> ID：12266196
> 
> 赞同：1
> 
> 时间：2012-09-04T14:57:36.090
> 
> 标签：java, swing, dynamic, icons, look-and-feel

我正在开发具有两个主题的外观。

问题是：

*   我希望能够在两个主题之间动态切换（这意味着在启动后更改主题）。
*   但是主题有两组不同的图标（实际上是相同的图标有不同的颜色）。

我不知道如何动态更改整个应用程序中的图标。

一种解决方案是在图标管理器上为每个组件注册一个图标和图标 ID，以在两种图标之间切换，但这似乎是一个非常繁重的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:25:43.700

可能有很多不同的方法（我不能说哪一个是最好的）：

1.  基于 javax.swing.Icon 创建您自己的图标类，并根据当前安装的 L&F 绘制一个实际图标
2.  在 installUI 方法中设置组件图标，因为它是在安装或重新安装组件 UI 时调用的（例如，当 L&F 更改时）
3.  创建您自己的组件或其处理图标绘制的 UI
4.  覆盖使用此类图标的组件并替换图标检索方法

可能还有更多，但首先想到的是……

这是第一个解决方案工作示例：

```
import com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel;

import javax.swing.*;
import javax.swing.plaf.metal.MetalLookAndFeel;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

/**
 * @see http://stackoverflow.com/a/12301173/909085
 */

public class LafIcon implements Icon
{
    private Map<String, Icon> lafIcons;

    public LafIcon ()
    {
        super ();
        lafIcons = new HashMap<String, Icon> ();
    }

    public void addIcon ( String laf, Icon icon )
    {
        lafIcons.put ( laf, icon );
    }

    private String getLaf ()
    {
        return UIManager.getLookAndFeel ().getClass ().getCanonicalName ();
    }

    private Icon getCurrentIcon ()
    {
        return lafIcons.get ( getLaf () );
    }

    public void paintIcon ( Component c, Graphics g, int x, int y )
    {
        Icon icon = getCurrentIcon ();
        if ( icon != null )
        {
            icon.paintIcon ( c, g, x, y );
        }
    }

    public int getIconWidth ()
    {
        Icon icon = getCurrentIcon ();
        return icon != null ? icon.getIconWidth () : 0;
    }

    public int getIconHeight ()
    {
        Icon icon = getCurrentIcon ();
        return icon != null ? icon.getIconHeight () : 0;
    }

    public static void main ( String[] args )
    {
        installMetalLookAndFeel ();

        JFrame frame = new JFrame ();
        frame.setLayout ( new FlowLayout ( FlowLayout.CENTER, 5, 5 ) );

        frame.add ( new JButton ( "Test button", createIcon () ) );

        String[] laf = { "Metal Look and Feel", "Nimbus Look and Feel" };
        final JComboBox lafType = new JComboBox ( laf );
        lafType.addActionListener ( new ActionListener ()
        {
            public void actionPerformed ( ActionEvent e )
            {
                if ( lafType.getSelectedIndex () == 0 )
                {
                    installMetalLookAndFeel ();
                }
                else
                {
                    installNimbusLookAndFeel ();
                }
            }
        } );
        frame.add ( lafType );

        frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
        frame.pack ();
        frame.setLocationRelativeTo ( null );
        frame.setVisible ( true );
    }

    private static LafIcon createIcon ()
    {
        LafIcon icon = new LafIcon ();    
        try
        {
            icon.addIcon ( MetalLookAndFeel.class.getCanonicalName (), new ImageIcon (
                    new URL ("http://cdn3.iconfinder.com/data/icons/fatcow/32x32_0020/application_form.png") ) );
            icon.addIcon ( NimbusLookAndFeel.class.getCanonicalName (), new ImageIcon (
                    new URL ("http://cdn3.iconfinder.com/data/icons/fatcow/32x32_0040/application_view_gallery.png") ) );
        }
        catch ( MalformedURLException e )
        {
            e.printStackTrace ();
        }    
        return icon;
    }

    private static void installMetalLookAndFeel ()
    {
        installLookAndFeel ( MetalLookAndFeel.class.getCanonicalName () );
    }

    private static void installNimbusLookAndFeel ()
    {
        installLookAndFeel ( NimbusLookAndFeel.class.getCanonicalName () );
    }

    private static void installLookAndFeel ( String name )
    {
        try
        {
            UIManager.setLookAndFeel ( name );

            Window[] windows = Window.getWindows ();
            if ( windows.length > 0 )
            {
                for ( Window window : windows )
                {
                    SwingUtilities.updateComponentTreeUI ( window );
                    window.pack ();
                }
            }
        }
        catch ( ClassNotFoundException e )
        {
            e.printStackTrace ();
        }
        catch ( InstantiationException e )
        {
            e.printStackTrace ();
        }
        catch ( IllegalAccessException e )
        {
            e.printStackTrace ();
        }
        catch ( UnsupportedLookAndFeelException e )
        {
            e.printStackTrace ();
        }
    }
} 
```

实际上，如您所见，大部分代码都是示例。您可以修改图标代码以提供额外的图标添加/设置/删除方法，使图标更易于创建。

此外，您不需要使用这种方式收听 L&F 更改，因为在组件 UI 更改时它将被重新绘制和重新验证，因此将再次调用图标大小和绘制方法，并为更新的 L&F 提供新图标。

# java - SQLIte 游标 - 最终确定尚未停用或关闭的 null 异常

> ID：12266197
> 
> 赞同：0
> 
> 时间：2012-09-04T14:57:40.190
> 
> 标签：java, android, sqlite

在您问之前，我已经四处寻找解决问题的方法，但我自己无法解决，因此来找你们。

**问题**

我的光标有一个未捕获的异常问题，我无法解决......

**错误**

```
09-04 15:48:38.863: I/dalvikvm(1421): Uncaught exception thrown by finalizer (will be discarded):
09-04 15:48:38.863: I/dalvikvm(1421): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@44ef6598 on null that has not been deactivated or closed
09-04 15:48:38.863: I/dalvikvm(1421):   at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
09-04 15:48:38.873: I/dalvikvm(1421):   at dalvik.system.NativeStart.run(Native Method) 
```

**投诉的代码**

```
public CCTrackLocation getTrackLocationForID(int id) {
        CCTrackLocation trackLocation = new CCTrackLocation();

        String selectQuery = "SELECT * FROM "+TABLE_TRACK_LOCATION+" WHERE \"id\" = "+ String.valueOf(id);

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery,null);
        if (cursor.moveToFirst()) {
            do {
                trackLocation.setID(cursor.getInt(0));
                trackLocation.segmentID = cursor.getInt(1);
                trackLocation.timestamp = cursor.getDouble(2);
                trackLocation.latitude = cursor.getDouble(3);
                trackLocation.longitude = cursor.getDouble(4);
                trackLocation.altitude = cursor.getDouble(5);
                trackLocation.velocity = cursor.getDouble(6);
                trackLocation.heading = cursor.getDouble(7);
                trackLocation.haccuracy = cursor.getDouble(8);
                trackLocation.vaccuracy = cursor.getDouble(9);
            }while(cursor.moveToNext());
        }

        cursor.close();
        db.close();

        return trackLocation;
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:09:16.533

为了安全起见，将所有 db 代码放在 try/catch/finally 子句中，并将 cursor.close() 和 db.close() 移动到它的 finally 部分，以确保您正在关闭游标和 db即使之前抛出异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:04:59.943

为了解决这个问题，我就是这样做的。

1.  只打开和关闭数据库一次。即使我每次使用它都打开和关闭数据库，有时我认为它还不够快，因此我得到了错误。
2.  每次我使用它并完成它后关闭光标。这解决了问题。

# c - 在 LPC1788 微控制器上通过 CAN 接收消息时遇到问题

> ID：12266199
> 
> 赞同：0
> 
> 时间：2012-09-04T14:57:43.323
> 
> 标签：c, microcontroller, lpc

我正在使用 NXP LPC1788 微控制器进行编程，它具有几个 CAN 控制器。我一直在尝试让微控制器传输一条消息，然后从自身接收回消息（本地自检）。

我认为传输工作正常（一位同事使用探针确认了这一点），当我发送消息时，会生成一个中断并调用它的句柄。但是，CAN 状态寄存器（CAN1GSR [全局状态寄存器，暂时在代码中注释掉] + CAN1SR [本地状态寄存器]）不报告已收到任何消息（消息接收缓冲区为空）。

代码（对不起，这是一团糟）：

```
#include "includes.h"
#include <yfuns.h>

#define CAN1          0x1
#define CAN2          0x2
#define BAUD_RATE     115200
#define LPC_APB0_BASE 0x40000000UL
#define LPC_CAN1      (LPC_APB0_BASE + 0x44000)
#define AFRAM         0x40038000

#define STD_ID_FORMAT 0
#define EXT_ID_FORMAT 1

#define DATA_FRAME   0
#define REMOTE_FRAME 1

#define RECEIVING    0
#define TRANSMITTING 1

typedef struct 
{
  uint32_t id;
  uint8_t dataA[4];
  uint8_t dataB[4];
  uint8_t len;      
  uint8_t format;
  uint8_t type;
} CAN_MSG_Type;

CAN_MSG_Type transMessage, recMessage;

void initCAN();
void setCANBaudRate();
void testCAN();
void configCANMessage(uint32_t id, uint8_t dataA[4], uint8_t dataB[4], 
                      uint8_t len, uint8_t format, uint8_t type, uint8_t dir);
void CAN_IRQHandler(void);
uint8_t checkMessage(CAN_MSG_Type* transMessage, CAN_MSG_Type* recMessage);
void receiveCANMessage(CAN_MSG_Type* recMessage);
void sendCANMessage(CAN_MSG_Type* transMessage);

/** external data **/
#pragma section=".intvec"
/** public functions **/
/*************************************************************************
 * Function Name: InitClock
 * Parameters: void
 * Return: void
 *
  * Description: Initialize PLL0 and clocks' dividers. PLL = 96MHz,
 *               CPU - 96MHz, PCLK - 48 MHz
 *
 *************************************************************************/
void InitClock(void)
{
  /*Sys Clock Select as CPU clock
    divider 1:1*/
  CLK_SetCpuClk(CPUSEL_CLKSYS,1);
  /*Select IRC oscilator as Sys clock*/
  CLK_SetSysClk(SYSSEL_IRCOSC);
  /*Enable Main oscilator*/
  CLK_MainOscSet(CLK_ENABLE,MOSCRNG_1_20MHZ);
  /*Select Main oscilator as Sys clock*/
  CLK_SetSysClk(SYSSEL_MOSC);
  /*Enable set PLL 96Hz (M = 8; P = 1)*/
  CLK_SetMainPll(CLK_ENABLE, 8-1, 0);
  /*Set peripheral divider 1:2\. Peripheral clock 48MHz*/
  CLK_SetPeriphClk(2);
  /*PLL0 out is used as the input to the CPU clock divider
  divider 1:1\. CPU runs at 96MHz*/
  CLK_SetCpuClk(CPUSEL_CLKPLL,1); 
}

/*************************************************************************
 * Function Name: __low_level_init
 * Parameters: void
 * Return: 
 *
 * Description: Low level system init (clock, flash accelerator, 
 *              SDRAM and vector table address)
 *              
 *
 *************************************************************************/
int __low_level_init (void)
{
  /*if debug is in SDRAM
    clock and SDRAM initialization is made
    in mac file*/
#ifndef SDRAM_DEBUG 
  int cpuclk;
  /* Flash accelerator save value*/
  FLASHCFG = (6UL<<12) | 0x3AUL;
  /*Clock Init*/
  InitClock();
  /*Flash accelerator init*/
  cpuclk = CLK_GetClock(CLK_CPU);

  if( cpuclk < 20000000 ){
    FLASHCFG = (0x0UL<<12) | 0x3AUL;
  } else if( cpuclk < 40000000 ){
    FLASHCFG = (0x1UL<<12) | 0x3AUL;
  } else if( cpuclk< 60000000 ){
    FLASHCFG = (0x2UL<<12) | 0x3AUL;
  } else if( cpuclk < 80000000 ){
    FLASHCFG = (0x3UL<<12) | 0x3AUL;
  } else if( cpuclk < 100000000 ){
    FLASHCFG = (0x4UL<<12) | 0x3AUL;
  }
  /*SDRAM init*/
  SDRAM_Init();
#endif
  /*Set vector table location*/
  VTOR  = (unsigned int)__segment_begin(".intvec");

  return  1;
}

// LOW-LEVEL INITIALISATION - END

// Params: baudrate - the baud rate of the CAN peripheral.
// Returns: None
// Description: Sets the baud rate for the CAN
void setCANBaudRate(int baudrate)
{
  uint32_t result = 0;
  uint8_t NT, TSEG1, TSEG2;
  uint32_t CANPclk = 0;
  uint32_t BRP;

  CANPclk = CLK_GetClock(CLK_PERIPH);

  result = CANPclk / baudrate;

  // Calculate suitable nominal time value.
  // NT = TSEG1 + TSEG2 + 3
  // NTEG <= 24
  // TSEG1 >= TSEG2*3
  for(NT=24; NT > 0; NT -= 2)
  {
    if(!(result % NT))
    {
      BRP = result / NT - 1;
      NT--;
      TSEG2 = NT/3 - 1;
      TSEG1 = NT - NT/3 - 1;
      break;
    }
  }

  // Enter reset mode.
  CAN1MOD = 0x01;

  // Set bit timing.
  // Default: SAM = 0x00;
  //          SJW = 0x03;
  CAN1BTR = (TSEG2 << 20) | (TSEG1 << 16) | (3 << 14) | BRP;

  // Enter normal operating mode.
  CAN1MOD = 0;
}

// Params: None
// Returns: None
// Description: Initialises the CAN peripheral.
void initCAN()
{
  // Enable power and clock.
  PCONP_bit.PCAN1 = 1;

  // Configure pins.
  IOCON_P0_00 &= ~0x7; IOCON_P0_00 |= 0x1;
  IOCON_P0_01 &= ~0x7; IOCON_P0_01 |= 0x1;

  IOCON_P0_04 &= ~0x7; IOCON_P0_04 |= 0x2;
  IOCON_P0_05 &= ~0x7; IOCON_P0_05 |= 0x2;

  IOCON_P0_21 &= ~0x7; IOCON_P0_21 |= 0x4;
  IOCON_P0_22 &= ~0x7; IOCON_P0_22 |= 0x4;

  IOCON_P2_07 &= ~0x7; IOCON_P2_07 |= 0x1;
  IOCON_P2_08 &= ~0x7; IOCON_P2_08 |= 0x1;

  // Triggers reset mode - all (writable) registers can be written to.
  CAN1MOD = 1;
  CAN1IER = 0;
  CAN1GSR = 0;

  // Aborts transmissions, releases receive buffer and clears data overrun.
  CAN1CMR_bit.AT  = 1;
  CAN1CMR_bit.RRB = 1;
  CAN1CMR_bit.CDO = 1;

  // Read to clear register.
  uint16_t i = CAN1ICR;

  AFMR = 0x01;

  SFF_SA     = 0;
  SFF_GRP_SA = 0;
  EFF_SA     = 0;
  EFF_GRP_SA = 0;
  ENDOFTABLE = 0;

  AFMR  = 0;

  // Set baud rate.
  setCANBaudRate(BAUD_RATE);
}

// Params: None
// Returns: None
// Description: Performs a self-test on the CAN peripheral.
void testCAN()
{
  uint32_t *ptr;

  // Enter reset mode.
  CAN1MOD_bit.RM  = 1;

  // Enable bypassing.
  AFMR_bit.ACCBP = 1;

  // Clear acceptance filter RAM.
  for(uint32_t i=0; i < 512; i++)
  {
    ptr  = (uint32_t*)(AFRAM+i);
    *ptr = 0;
  }

  /*
  // Set up acceptance filter values; reserve space in SFF_sa for one
  // standard format group id.
  SFF_SA     = (0x00 << 1);
  SFF_GRP_SA = (0x00 << 1);
  EFF_SA     = (0x20 << 1);
  EFF_GRP_SA = (0x20 << 1);
  ENDOFTABLE = (0x20 << 1);

  ptr = (uint32_t*)AFRAM;
  // [    Valid ID 1   ] [    Valid ID 2   ]
  // 0010 0111 1111 1111 0010 0000 0000 0000
  // *ptr = 0x2EFF2000;

  // 0010 0000 0000 0000 0010 0111 1111 1111
  *ptr = 0x20002EFF;
  */

  // Enable self-testing mode.
  CAN1MOD_bit.STM = 1;
  CAN1CMR_bit.SRR = 1;

  // Re-enter normal operational mode.
  CAN1MOD_bit.RM  = 0;

  // Enable interrupts on transmitting and receiving messages.
  CAN1IER_bit.RIE      = 1;
  CAN1IER_bit.TIE1     = 1;
  CAN1IER_bit.IDIE     = 1;
  SETENA0_bit.SETENA25 = 1;

  // [(En)/Dis]able AF bypassing.
  AFMR_bit.ACCBP  = 1;
  //AFMR_bit.ACCOFF = 0;
  //AFMR_bit.EFCAN  = 1;

  uint8_t dataA[] = { 0x12, 0x12, 0x12, 0x12 };
  uint8_t dataB[] = { 0x34, 0x34, 0x34, 0x34 };
  uint8_t dataZ[] = { 0, 0, 0, 0};
  configCANMessage(0xEFF, dataA, dataB, 8, STD_ID_FORMAT, DATA_FRAME,
                   TRANSMITTING);

  configCANMessage(0, dataZ, dataZ, 0, 0, 0, RECEIVING);

  printf("Sending message...\n");

  sendCANMessage(&transMessage);
}

// Params: id       - the id of the message (if format = STD_ID_FORMAT, then id
//                    should be 11 bits long, else if format = EXT_ID_FORMAT,
//                    then id should be 29 bits long).
//         dataA[4] - data field A.
//         dataB[4] - data field B.
//         len      - the length of the data field in bytes
//                    (0000b - 0111b: 0-7 bytes, 1xxxb - 8 bytes).
//         format   - the format of the id
//                    (STD_ID_FORMAT - 11 bit format,
//                    EXT_ID_FORMAT - 29 bit format).
//         type     - remote transmission request
//                  - (DATA_FRAME - the number of data bytes called out by the
//                    DLC field are sent from the CANxTDA and CANxTDB
//                    registers,
//                    REMOTE FRAME - a remote frame is sent).
//         dir      - specifies if the message format is for messages being
//                    sent or received (0 - receiving, 1 - transmitting).
// Returns: None
// Description: Configures the format for transmitting and receiving messages.
void configCANMessage(uint32_t id, uint8_t dataA[4], uint8_t dataB[4],
                               uint8_t len, uint8_t format, uint8_t type,
                               uint8_t dir)
{
  if(dir)
  {
    transMessage.id     = id;

    for(int i=0; i < 4; i++)
    {
      transMessage.dataA[i]  = dataA[i];
      transMessage.dataB[i]  = dataB[i];
    }

    transMessage.len    = len;
    transMessage.format = format;
    transMessage.type   = type;
  }
  else
  {
    recMessage.id     = id;

    for(int i=0; i < 4; i++)
    {
      recMessage.dataA[i]  = dataA[i];
      recMessage.dataB[i]  = dataB[i];
    }

    recMessage.len    = len;
    recMessage.format = format;
    recMessage.type   = type;
  }
}

// Params: None
// Returns: None
// Description: Handles messages received over CAN.
void CAN_IRQHandler(void)
{  
  printf("IRQ\n");

  /*
  // Check receive buffer status.
  if(CAN1GSR_bit.RBS) 
  {
    printf("You have mail\n");
  }
  else
  {
    printf("You don't have mail\n");
  }
  */
  CAN1ICR_bit;

  if(CAN1SR_bit.RBS)
  {
    receiveCANMessage(&recMessage);

    // Validate received and transmitted information.
    if(checkMessage(&transMessage, &recMessage))
    {
      printf("Self test is successful\n");
    }
    else
    {
      printf("Self test is not successful\n");
    }
  }
}

// Params: transMessage - the message being transmitted.
//         recMessage - the message being received.
// Returns: Whether the two messages are the same (0 - false, 1 - true).
// Description: Compares the two messages to each other and determines if
//              they are identical
uint8_t checkMessage(CAN_MSG_Type* transMessage, CAN_MSG_Type* recMessage)
{
  if(transMessage->format != recMessage->format) return FALSE;
  if(transMessage->id != recMessage->id) return FALSE;
  if(transMessage->len != recMessage->len) return FALSE;
  if(transMessage->type != recMessage->type) return FALSE;

  for(int i=0; i < 4; i++)
  {
    if(transMessage->dataA[i] != recMessage->dataA[i]
       || transMessage->dataB[i] != recMessage->dataB[i]) return FALSE;
  }

  return TRUE;
}

// Params: recMessage - a message loaded with the information of the incoming
//         data.
// Returns: None
// Description: loads data received over CAN into a message format. 
void receiveCANMessage(CAN_MSG_Type* recMessage)
{
  uint32_t data;

  // Check status of receive buffer.
  if(CAN1SR_bit.RBS)
  {
    recMessage->format = CAN1RFS_bit.FF;
    recMessage->type   = CAN1RFS_bit.RTR;
    recMessage->len    = CAN1RFS_bit.DLC;
    recMessage->id     = CAN1RID;

    if(recMessage->type == DATA_FRAME)
    {
      // Read first four bytes of data.
      data = CAN1RDA;

      recMessage->dataA[0] = (data & 0x000000FF) >> 0;
      recMessage->dataA[1] = (data & 0x0000FF00) >> 8;
      recMessage->dataA[2] = (data & 0x00FF0000) >> 16;
      recMessage->dataA[3] = (data & 0xFF000000) >> 24;

      // Read second four bytes of data.
      data = CAN1RDB;

      recMessage->dataB[0] = (data & 0x000000FF) >> 0;
      recMessage->dataB[1] = (data & 0x0000FF00) >> 8;
      recMessage->dataB[2] = (data & 0x00FF0000) >> 16;
      recMessage->dataB[3] = (data & 0xFF000000) >> 24;

      // Release receive buffer.
      CAN1CMR_bit.RRB = 1;
    }
    // If the received frame is just a Remote Frame, then we do not have data
    // and we release the receive buffer.
    else
    {
      CAN1CMR_bit.RRB = 1;
    }
  }
}

// Params: transMessage - the message to be transmitted.
// Returns: None
// Description: Prepares a message to be transmitted over CAN.
void sendCANMessage(CAN_MSG_Type* transMessage)
{
  uint32_t data;

  // Check status of transmit buffer 1.
  if(CAN1SR_bit.TBS1)
  {
    CAN1TFI1_bit.DLC = transMessage->len;

    if(transMessage->type == REMOTE_FRAME)
    {
      CAN1TFI1_bit.RTR = 1;
    }
    else
    {
      CAN1TFI1_bit.RTR = 0;
    }

    if(transMessage->format == EXT_ID_FORMAT)
    {
      CAN1TFI1_bit.FF = 1;
    }
    else
    {
      CAN1TFI1_bit.FF = 0;
    }

    // Write CAN ID.
    CAN1TID1 = transMessage->id;

    data = ((transMessage->dataA[0]) << 0)
         | ((transMessage->dataA[1]) << 8)
         | ((transMessage->dataA[2]) << 16)
         | ((transMessage->dataA[3]) << 24);

    // Write first four bytes of data.
    CAN1TDA1 = data;

    data = ((transMessage->dataB[0]) << 0)
         | ((transMessage->dataB[1]) << 8)
         | ((transMessage->dataB[2]) << 16)
         | ((transMessage->dataB[3]) << 24); 

    // Write second four bytes of data.
    CAN1TDB1 = data;

    // Select transfer buffer 1.
    CAN1CMR_bit.STB1 = 1;

    // Write transmission request.
    CAN1CMR_bit.TR = 1;

    while(!CAN1SR_bit.TCS1)
    {
      printf("Waiting...\n");
    };

    //printf("Got this far\n");
  }
}

int main()
{
  // Initialise CAN.
  initCAN();

  // Enter self-test mode.
  testCAN();

  printf("In main\n");

  while(1);

  return 0;
} 
```

终端 I/O 的输出：

```
Sending message...
WIRQ
aiting...
In main 
```

该代码也列在[http://pastebin.com/8kEmbvta](http://pastebin.com/8kEmbvta)

编辑：线程已死，不太可能再次查看，但我替换了该行

```
IOCON_P0_08 &= ~0x7; IOCON_P2_08 |= 0x1; 
```

和

```
IOCON_P2_08 &= ~0x7; IOCON_P2_08 |= 0x1; 
```

感谢 HonkyTonk。它似乎对我的代码没有任何影响，但我再次认为这些引脚被指定给 CAN 控制器 2（我使用的是 CAN 控制器 1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:15:54.403

首先，您不需要配置所有这些引脚。我只使用这些引脚就可以了：

```
IOCON_P0_00 &= ~0x7; IOCON_P0_00 |= 0x1; // RD1.
IOCON_P0_01 &= ~0x7; IOCON_P0_01 |= 0x1; // TD1.
IOCON_P0_04 &= ~0x7; IOCON_P0_04 |= 0x2; // RD2.
IOCON_P0_05 &= ~0x7; IOCON_P0_05 |= 0x2; // TD2. 
```

在您的情况下，甚至可能不需要最后两个。

接下来，你提到你已经确认你正在发送，但没有接收。你需要做的是让它接收

```
CAN1CMR_bit.SRR = 1; 
```

从 TestCAN() 内部并替换

```
CAN1CMR_bit.TR = 1; 
```

用它。除非您写入 SSR 位而不是 TR，否则 CAN 控制器会在发送时禁用接收，这可以解释您遇到的问题。

第三，每次收到消息时，除非您从中断和捕获寄存器中读取接收中断位，否则您将被卡在您编写的句柄中。读取该寄存器的前 10 位中的任何一个也会清除它们，清除 RI 位将阻止句柄多次触发。在 CAN_IRQHandler() 中的某处添加以下代码行：

```
CAN1ICR_bit.RI; 
```

最后，您使用的 id (0xEFF) 似乎使用了太多位；尝试将其替换为另一个 id，例如 0x7FF。

-标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T07:19:13.980

假设：您使用的是 Keil Uvision IDE。我认为您正在检查外围设备>CAN>通信。它只显示发送而不显示接收。（您的疑问）

如果要确认环回也正在接收，请在 Peripherals>System Viewer>CAN 中进行检查。检查接收缓冲区是否在发送后更新。

# java - Robolectric 和 SQLite.getVersion

> ID：12266200
> 
> 赞同：2
> 
> 时间：2012-09-04T14:57:58.643
> 
> 标签：java, android, unit-testing, roboguice, robolectric

在我的情况下，Robolectric SQLiteOpenHelper 中的 getVersion 始终返回 0。因此，如果当前 DATABASE_VERSION 大于 0，则在 DBHelper 中调用 onCreate。

有谁知道如何在 Robolectric 中配置/设置数据库版本？我正在使用 robolectric-1.1-jar-with-dependencies.jar 和 roboguice-2.0b4.jar。（到目前为止，读+写工作......）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:10:18.370

Uhhhh 发现 Robolectric 有多酷 - 所以我必须回答我自己的问题。这是我所做的：

ShadowSQLiteDatabase.java：

```
@Implements(SQLiteDatabase.class)
public class ShadowSQLiteDatabase extends com.xtremelabs.robolectric.shadows.ShadowSQLiteDatabase {

    @Implementation
    public int getVersion() {
        return 10;
    }
} 
```

InjectedTestRunner.java：

```
public class InjectedTestRunner extends RobolectricTestRunner {
    ...
    @Override
    protected void bindShadowClasses() {
        Robolectric.bindShadowClass(ShadowSQLiteDatabase.class);
    }
} 
```

而已！

# php - Zend_Mail - 从 GMAIL 获取 IMAP 附件

> ID：12266203
> 
> 赞同：0
> 
> 时间：2012-09-04T14:58:04.183
> 
> 标签：php, zend-framework, imap

我对 Zend 框架和从 GMAIL 获取附件有些麻烦。身份验证由 oAuth 处理。

获取Mailtext没有问题，但我无法获取附件，或者更好的是我不知道该怎么做（;

```
 if ($message->isMultiPart()) {

            $iParts = $message->countParts();

            for ($i = 1; $i < $iParts; $i++) {
                $part = $message->getPart($i);

                // ATTACHEMENT?
                if () {
                    // DO MAIL DOWNLOAD
                }

                // MAIL TEXT
                if (strtok($part->contentType, ';') == 'text/plain') {
                    $encoding = $part->getHeader('content-transfer-encoding');
                    $contentType = $part->getHeader('content-type');
                    $content = $part->getContent();
                    break;
                } 
            } 
```

我邮件的标题（删除了一些细节）：

> ```
> [delivered-to] => xxxx@gmail.com
> [received] => Array
>     (
>         [0] => 
>         [1] => 
>         [2] => 
>         [3] => 
>     )
> [return-path] => 
> [received-spf] => 
> [authentication-results] => 
> [dkim-signature] =>
> [mime-version] => 1.0
> [from] => 
> [date] => Thu, 30 Aug 2012 17:16:37 +0200
> [message-id] => 
> [subject] => ANHANG
> [to] => 
> [content-type] => multipart/mixed; boundary=f46d043bd88a9f5d9404c87d2ad5 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:21:14.210

我还没有尝试过，但是，如果它有效，你欠我一杯啤酒......无论如何，试试这个：逻辑上它应该工作......

```
if ($message->isMultiPart()) {
     $part = $message->getPart(2);
}

       // Remember mails with attachment are MULTI-part? (:
       $filename = $part->getHeader('content-description');
       $attachment = base64_decode($part->getContent()); //we decode because mails are encoded with base 64

       // File operations
       $fh = fopen($filename, 'w');
       fwrite($fh, $attachment);
       fclose($fh); 
```

如果您收到错误，请在此处发布

或者如果它有效，给我打勾；）

# javascript - 谷歌地图 - 更改图层图标大小

> ID：12266206
> 
> 赞同：0
> 
> 时间：2012-09-04T14:58:13.013
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个问题，我正在尝试使用 Google 地图创建悬停效果，您将鼠标悬停在右侧的 div 上，相应的地图标记会增加大小。我正在尝试使用此处讨论的技术：[Change marker size in Google maps V3](https://stackoverflow.com/questions/7842730/change-marker-size-in-google-maps-v3/7845077#7845077)，

但这并没有那么有用，因为它正在构建一个新的标记。我只是想扩大我现有的标记。我正在尝试做这样的事情：

```
var aMap = $container.googleMapClient("map");
var layer = aMap.layers[iconLayer];
layer.points[iconLayer].marker.getIcon().size = new google.maps.Size(45,33); 
```

但不幸的是，这并没有改变可见的大小。如果我在运行时检查图层，大小确实发生了变化。这种行为是不允许的吗？我真的必须破坏图层并渲染一个更大的图层，然后在鼠标悬停时做相反的事情吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:30:44.963

1.  创建两个不同的markerImages，一个默认一个用于悬停。（文档：[https](https://developers.google.com/maps/documentation/javascript/reference?hl=en#MarkerImage) ://developers.google.com/maps/documentation/javascript/reference?hl=en#MarkerImage ）

2.  使用 google.maps.Marker.setIcon() 在悬停时交换 markerImage（文档：[https](https://developers.google.com/maps/documentation/javascript/reference?hl=en#Marker) ://developers.google.com/maps/documentation/javascript/reference?hl=en#Marker ）

这是一个示例，如何使用 markerImages：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/icon-complex](https://google-developers.appspot.com/maps/documentation/javascript/examples/icon-complex)

marker.getIcon().size 是只读的，所以你不能在这里设置新的大小。并且 google.maps.Size(45,33) 不会将您的图像拉伸到新尺寸，而只会更改图像的剪裁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:55:21.327

您需要使用[MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)`scaledSize`上的属性。

正如 LeJared 所说，您需要创建两个不同的`MarkerImage`对象，并在它们之间进行交换。

`MarkerImage`对象是不可变的，因此您将无法动态更改大小。更一般地，在 Maps API 中，需要使用 set() 函数设置属性，否则 API 将看不到更新。

# android - Android Facebook SDK 访问令牌问题

> ID：12266207
> 
> 赞同：0
> 
> 时间：2012-09-04T14:58:13.683
> 
> 标签：android, facebook, facebook-graph-api, access-token

```
Bundle bundle = new Bundle();
bundle.putString("access_token", facebook.getAccessToken() );
Log.i("access_token", facebook.getAccessToken());
String response = facebook.request("me/friends?fields=name",bundle, "GET"); 
```

日志行工作正常，所以很明显那里有一个访问令牌。此外，前往

`https://graph.facebook.com/me/friends?fields=name&access_token=1234567.....`

完美运行。

然而，facebook 返回一个错误，指出使用上面的代码需要一个活动的访问令牌。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:18:19.250

您不需要将访问令牌添加到捆绑包中，因为 facebook 结构已经拥有它，并且它将作为请求方法的一部分插入。

尝试将“字段”添加为 Bundle 的一部分并调用不同的图形路径：

```
bundle.putString("fields", "name");
String response = facebook.request("me/friends",bundle, "GET"); 
```

# python - Python，对字典进行排序

> ID：12266208
> 
> 赞同：2
> 
> 时间：2012-09-04T14:58:23.203
> 
> 标签：python, dictionary

我正在研究python中的字典。我正在尝试按字母顺序对其进行排序并将其拆分以使其看起来更好一些。这是我迄今为止在字典中的代码。

```
authorentry = {'author':  name, 'date': datef , 'path': path_change , 'msg' : xmlMsgf }           
if not name in author:
    author[ name ] = []

author[ name ].append( authorentry )       

if not authorentry in author.items():
    author['author'] = [authorentry]

print sorted (author.keys()), sorted (author.values()) 
```

现在我想要它做的是根据作者和日期按排序顺序打印出字典。并且还要对其进行拆分和修改，以便它没有所有这些逗号和'u'，如果可能的话。关于如何完成它的任何想法？

这就是我按原样打印时的样子。

我想要的是作者首先出现在列表中而不是日期。如果可能的话，我希望它按字母顺序排列，并删除条目中的逗号以更清晰地打印出来。是否可以？

```
[[{'date': ['06-08-2012 09:01:52 PM'], 'path': [u'/branches/Patch_4_2_0_Branch'], 'msg': ['none', u'PATCH_BRANCH:N/A\nBUG_NUMBER:N/A\nFEATURE_AFFECTED:N/A\nOVERVIEW:N/A\nAdding the SVN log size requirement to the branch \n'], 'author': u'glv'}], [{'date': ['06-08-2012 09:01:52 PM'], 'path': [u'/branches/Patch_4_2_0_Branch'], 'msg': ['none', u'PATCH_BRANCH:N/A\nBUG_NUMBER:N/A\nFEATURE_AFFECTED:N/A\nOVERVIEW:N/A\nAdding the SVN log size requirement to the branch \n'], 'author': u'glv'}]] 
```

更新：截至目前，我可以将作者分组在一起，但由于某种原因，我不仅无法将其按字母顺序排列，我什至无法让作者成为列表中的第一人，显示的内容类似于以下内容：

```
 Date: 06-08-2012 08:56:09 PM

  Changes by : glv

  Comments: PATCH_BRANCH:N/A BUG_NUMBER:N/A FEATURE_AFFECTED:N/A OVERVIEW:N/A Adding the svn commit line requrement  

            Directory Location: /trunk 
```

我希望它订购的方式更像这样。

```
 Changes by : glv
  Date: 06-08-2012 08:56:09 PM
  Directory Location: /trunk
  Comments: PATCH_BRANCH:N/A BUG_NUMBER:N/A FEATURE_AFFECTED:N/A OVERVIEW:N/A Adding the svn commit line requrement 
```

我尝试了 OrderedList 以查看是否可以让它以这种方式工作，但到目前为止还没有运气或成功。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:11:10.247

如果您只关心呈现这些信息以提高用户的可读性，请使用`pprint`module.

```
import pprint
pprint.pprint(author) 
```

假设`author`是一个`dict`。或者使用`pprint.pformat`获取一个字符串，您可以进一步操作/清理它，例如`print pprint.pformat(author).replace(',','')`删除逗号。

您还应该知道`dict`s 不能重新排序，因为它们本质上是一个哈希表，其键是哈希（就像一个集合）。

您也可以尝试使用`collections.OrdererdDict`：

```
from collections import OrdererdDict
sorted_author = OrderedDict(sorted(author.iteritems())) 
```

* * *

**更新：**奇怪的是你仍然有这个问题。生病只是给你一些肯定会工作的代码，你可以从那里调整它：

```
def format_author(author):
    tups = sorted(author.iteritems())           # alphabetical sorting
    kmaxlen = max([len(k) for k, v in tups])    # for output alignment

    # some custom rearrangement. if there is a 'msg' key, we want it last
    tupkeys = [k for k, v in tups]
    if 'msg' in tupkeys:
        msg_tup = tups.pop(tupkeys.index('msg'))
        tups.append(msg_tup)    # append to the end
        # alternatively tups.insert(0, msg_tup) would insert at front

    output = []

    for k, v in tups:
        # dress our values
        if not v:
            v = ''
        elif isinstance(v, list):
            if len(v) == 1:
                v = v[0]
            if len(v) == 2 and v[0] in [None, 'none', 'None']:
                v = v[1]
         v = v.strip()
        output.append("%s: %s" % (k.rjust(kmaxlen), v))
    return "\n".join(output) 
```

然后您可以执行以下操作：

```
author = {'date': ['06-08-2012 09:01:52 PM'], 'path': [u'/branches/Patch_4_2_0_Branch'], 'author': u'glv', 'msg': ['none', u'blah blah blah \n']}
s = format_author(author)
print s 
```

并得到这样的输出：

```
author: glv
  date: 06-08-2012 09:01:52 PM
  path: /branches/Patch_4_2_0_Branch
   msg: blah blah blah 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:24:55.670

您可能会考虑创建一个类`authorentry`而不是使用 dict 并实现该`__str__`方法。

```
class authorentry:
    # create authorentry; usage: x = authorentry(author, date, path, msg)
    def __init__(self, author, date, path, msg):
        self.author = author
        self.date = date
        self.path = path
        self.msg = msg
    # return string representation for authorentry
    def __str__(self):
        return "Authorentry(name: %s, date: %r, path: ...)" % (self.author, self.date, ...) 
```

现在您可以像这样创建和打印`authorentry`：

```
ae = authorentry("some name", "some date", "some path", "some message")
print ae 
```

# javascript - 在鼠标悬停时隐藏图像

> ID：12266210
> 
> 赞同：0
> 
> 时间：2012-09-04T14:58:45.897
> 
> 标签：javascript, html

我希望 iframe 出现，但如果有意义的话，图像会在鼠标悬停时显示？我更喜欢在 javasript 中完成

```
<html>  
<head>
<script language="JavaScript" type="text/javascript">
function makeFrame(src) {
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src","http://www.google.com");
ifrm.style.display = "block";
ifrm.style.width = 640+"px";
ifrm.style.height = 480+"px";
document.body.appendChild(ifrm);
}

function closeFrame(){
ifrm.style.display = "none";
}
</script>
</head>
<body>
<img src="images/largepic.jpg" onmouseover=makeFrame() onmouseout=closeFrame() height="100px" width="100px" />
</body>
</html> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:14:50.693

 ~~您还可以将“this”参数传递给 closeFrame 函数调用，该函数将为您提供图像元素。然后，您可以`display: none`在该元素上进行设置：

```
<html>  
  <head>
    <script language="JavaScript" type="text/javascript">
    function makeFrame(image_element) { <!-- Take the image_element as a parameter -->
    image_element.style.display = "none"; <!-- Set image element to not display -->
    ifrm = document.createElement("IFRAME");
    ifrm.setAttribute("src","http://www.google.com");
    ifrm.style.display = "block";
    ifrm.style.width = 640+"px";
    ifrm.style.height = 480+"px";
    document.body.appendChild(ifrm);
    }

    function closeFrame(){
    ifrm.style.display = "none";
    }
    </script>
  </head>
  <body>
    <!-- Pass this into makeFrame where this is the image element -->
    <img src="images/largepic.jpg" onmouseover=makeFrame(this) onmouseout=closeFrame() height="100px" width="100px" />
  </body>
</html> 
```

正如 Shmiddty 所说，`closeframe()`一旦你设置`display: none`为 ，就会被调用。您可能想在 iframe 本身而不是 img 元素上设置 onmouseout 事件。

 ~~* * *

根据 OP 的评论更新我的答案：

这是将鼠标移出时关闭 IFrame 所需的代码。这也恢复了原始图像。

```
<html>  
  <head>
    <script language="JavaScript" type="text/javascript">
    function makeFrame(image_element) { <!-- Take the image_element as a parameter. -->
    image_element.style.display = "none"; <!-- Set image element to not display. -->
    ifrm = document.createElement("IFRAME");
    ifrm.setAttribute("src","http://www.google.com");
    ifrm.style.display = "block";
    ifrm.style.width = 640+"px";
    ifrm.style.height = 480+"px";
    ifrm.onmouseout=closeFrame; <!-- Close the IFrame when the mouse moves out of it. -->
    document.body.appendChild(ifrm);
    }

    function closeFrame(){
      ifrm.style.display = "none";
      var image_element = document.getElementById("myImg"); <!-- Show the image that was hidden when showing the iframe. -->
      image_element.style.display = "inline";
    }
    </script>
  </head>
  <body>
    <!-- Pass this into makeFrame where this is the image element -->
    <img id="myImg" src="images/largepic.jpg" onmouseover=makeFrame(this) height="100px" width="100px" />
  </body>
</html> 
```

这是通过将`onmouseout`事件绑定到 IFrame 来实现的。`closeFrame`这告诉浏览器在将鼠标移出 IFrame 时调用该函数。然后在`closeFrame`函数中恢复之前隐藏的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:01:28.427

我建议：

```
function makeFrame(src) {
    ifrm = document.createElement("iframe");
    ifrm.setAttribute("src","http://www.google.com");
    ifrm.style.display = "block";
    ifrm.style.width = 640+"px";
    ifrm.style.height = 480+"px";
    document.body.replaceChild(ifrm, document.getElementsByTagName('img')[0]);
} 
```

虽然我建议，在这种情况下，给`img`元素一个`id`或以其他方式唯一地引用它），以便准确地知道`img`你要删除哪个元素。

相反，如果您只想在`iframe`插入图像后隐藏图像：

```
function makeFrame(src) {
    ifrm = document.createElement("iframe");
    ifrm.setAttribute("src","http://www.google.com");
    ifrm.style.display = "block";
    ifrm.style.width = 640+"px";
    ifrm.style.height = 480+"px";
    document.body.insertBefore(ifrm, document.getElementsByTagName('img')[0]);
} 
```

使用 CSS：

```
iframe + img {
    display: none;
} 
```~~~~

# python - Python / Windows：仅列出 USB 可移动驱动器

> ID：12266211
> 
> 赞同：2
> 
> 时间：2012-09-04T14:58:51.300
> 
> 标签：python, windows, pywin32, drive

是否可以使用 Python 在 Windows 上仅获取可移动 USB 驱动器和（不是那么必要）它们的标签？在 Linux (Ubuntu) 上，您只需要列出`/media`文件夹。

这是我当前的代码（它列出了所有可用的驱动器号，包括系统驱动器、cd/dvd 驱动器等）：

```
import win32api

dv = win32api.GetLogicalDriveStrings()
dv = dv.split('\000')[:-1]
print dv 
```

结果是这样的： `['C:\\', 'D:\\', 'E:\\']`

我只想要 USB 大容量存储驱动器……有什么帮助吗？

问候...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T17:10:21.830

```
import win32file

def rdrive(d):
    # returns boolean, true if drive d is removable
    return win32file.GetDriveType(d)==win32file.DRIVE_REMOVABLE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-31T14:36:04.913

我自己也有类似的问题。使用@user2532756 的回答中的逻辑，我为这个问题的任何新访问者拼凑了这个快速功能：

基本上，只需调用该函数，它就会将`list`所有**可移动驱动器**中的一个返回给调用者。

```
import win32api
import win32con
import win32file

def get_removable_drives():
    drives = [i for i in win32api.GetLogicalDriveStrings().split('\x00') if i]
    rdrives = [d for d in drives if win32file.GetDriveType(d) == win32con.DRIVE_REMOVABLE]
    return rdrives 
```

**例如：** 调用`get_removable_drives()`将输出：

```
['E:\\'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-19T20:50:56.700

`wmi`我也在寻找这个，但后来使用该模块“从头开始” 。

```
import wmi

LOCAL_MACHINE_CONNECTION = wmi.WMI()

# .Win32_LogicalDisk() returns a list of wmi_object objects. Each of them represents a storage device connected to the local machine (serial number, path, description, e.t.c)
drives_available = [wmi_object.deviceID for wmi_object in LOCAL_MACHINE_CONNECTION.Win32_LogicalDisk() if wmi_object.description == "Removable Disk"]

# .deviceID is the tag (or letter like F:, G:) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T09:25:40.040

您还可以使用 ctypes 模块来获取可移动驱动器列表。

```
from ctypes import windll    
def get_drives():
        drives = []
        bitmask = windll.kernel32.GetLogicalDrives()
        for letter in map(chr, range(65, 91)):
            if bitmask & 1:
                drives.append(letter)
            bitmask >>= 1
        return drives 
```

您可以获取相同的列表并将其与新的驱动器列表进行比较，以添加可移动驱动器。

```
 drives_list=get_drives()
    drives_list1=[]
    while True:
      drives_list1=get_drives()
      if len(list(set(drives_list1) - set(drives_list))) > 0:
            print("Drives Added"+str(set(drives_list1) - set(drives_list))) 
```

有关更多信息，请参阅github 上的此 repo [drivemonitoring 。](https://github.com/ajaykumarkk/DriveMonitoring)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-25T20:02:27.243

图书馆`psutil`比`win32api`. 它提供了大量有关驱动器的信息，并且格式精美。[https://github.com/giampaolo/psutil](https://github.com/giampaolo/psutil)

```
import psutils as p
externals = [i.mountpoint for i in p.disk_partitions() if 'removable' in i.opts] 
```

# javascript - 如何在 $.ajax 请求上设置超时并在时间过长时重做？

> ID：12266218
> 
> 赞同：4
> 
> 时间：2012-09-04T14:59:23.080
> 
> 标签：javascript, jquery, ajax

如果第一个请求超时，有人可以向我展示一个关于为我的 $.ajax 请求设置超时并重做整个请求的实际示例，我已经阅读了文档但没有得到它。我将不胜感激。

这是我的 $.ajax 请求。

```
 $.ajax({
        url: '<?php bloginfo('template_directory'); ?>/ajax/product.php',
        type: 'get',
        data: {product_id : product_id},
        beforeSend: function(){
            $('#details').html('<div class="loading"></div>');
        },
        success: function(data){
            $('.iosSlider').fadeOut('fast');
            thisprod.addClass('current');
            $('#details').css({opacity: 0}).html(data).stop().animate({left: 0, opacity: 1}, 800);
        }
    });
    return false; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T15:00:44.417

[ajax](http://api.jquery.com/jQuery.ajax/)函数带有一个超时参数，您可以检查状态以防出错。

```
var call =function(){
    $.ajax({
        url: '<?php bloginfo('template_directory'); ?>/ajax/product.php',
        type: 'get',
        timeout: 400,
        ...
        error: function(x, textStatus, m) {
            if (textStatus=="timeout") {
                 call();
            }
        }
    });
}; 
```

您可能想要做一些更聪明的事情来避免永久调用......

从文档中：

> 为请求设置超时（以毫秒为单位）。这将覆盖使用 $.ajaxSetup() 设置的任何全局超时。超时时间从 $.ajax 调用开始；如果有几个其他请求正在进行并且浏览器没有可用的连接，则请求可能会在发送之前超时。在 jQuery 1.4.x 及以下版本中，如果请求超时，XMLHttpRequest 对象将处于无效状态；访问任何对象成员都可能引发异常。仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:07:57.263

一种。您可以维护您发出的所有请求的队列。

```
$.xhrQueue = []; 
```

* * *

湾。将您提出的每个请求排入队列

```
$.ajaxSetup({
    beforeSend: function (e, xhr) {  
            $.xhrQueue .push(xhr);
        }
}); 
```

* * *

C。轮询哪些请求已完成与超时

```
setInterval(function(){
    $.each($.xhrQueue, function (xhr) {
       //check whether status is complete, 
       //with some try-catch you can know which were the timed-out/not-sent ones

    });
}, 1000); 
```

[注意：如果没有`beforeSend`，您可以通过其他一些功能尝试进行 ajax 调用]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:13:41.280

对于这种情况，我会使用 jquery 延迟失败回调。 [http://api.jquery.com/deferred.fail/](http://api.jquery.com/deferred.fail/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T15:07:57.373

***试试这个***

```
var setTime = setTimeOut(function() {
    $.ajax({
        url: '<?php bloginfo('
        template_directory ');?>/ajax/product.php',
        type: 'GET',
        data: {
            'product_id': product_id
        }
    }).beforeSend(function() {
        $('#details').html('<div class="loading"></div>');
    }).done(function(data) {
        $('.iosSlider').fadeOut('fast');
        thisprod.addClass('current');
        $('#details').css({
            opacity: 0
        }).html(data).stop().animate({
            left: 0,
            opacity: 1
        }, 800);
    });
}, 2000); 
```

# math - 两个 U16 到浮点数的 Modbus 转换

> ID：12266227
> 
> 赞同：0
> 
> 时间：2012-09-04T14:59:48.400
> 
> 标签：math, protocols

我有两个系统相互传递实数。一个接收系统没有将两个 U16 准确地转换为浮点数（使用内部函数）。一个例子是 100.15 被转换成 100.21。准确性对我的应用程序非常重要。我需要自己执行转换，但缺乏这样做的数学。谁能提供将两个 Modbus U16 转换为浮点数所需的数学知识？

示例：给定 123.456 Modbus 通过 17142 和 59769

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T08:54:55.603

这两个数字几乎相似是奇数。如果存在表示问题（例如交换字节），则值将不匹配，即使它们甚至可以被解释为有效的浮点数。

如果您需要确定这些值，您是否可以让两个系统移动定点 (100150) 中的值并将该数字除以 1000 以将其缩放回工程单位？

这将允许您避免发送方和接收方中浮点实现的复杂性。当然，如果缩放整数转换是问题所在，那么您将需要查看系统中存在问题的值的替代表示。

# objective-c - Facebook SDK 3 崩溃

> ID：12266229
> 
> 赞同：0
> 
> 时间：2012-09-04T15:00:06.137
> 
> 标签：objective-c, facebook, facebook-ios-sdk

我想在我的项目中集成 Facebook SDK3.0，但在初始化部分我遇到了一些崩溃。我尝试了两种不同的方式：

*   我正在调用 [[FBSession initWithAppId] ...]，但我得到 GISABRT 异常

> > [FBSession initWithAppID:permissions:urlSchemeSuffix:tokenCacheStrategy:]：无法识别的选择器发送到实例 0x22c0890 wait_fences：无法接收回复：10004003 2012-09-04 17:40:46.353 iOSTemplate[236:707] ***由于未捕获的异常而终止应用程序' NSInvalidArgumentException'，原因：'-[FBSession initWithAppID:permissions:urlSchemeSuffix:tokenCacheStrategy:]：无法识别的选择器发送到实例 0x22c0890'

我的代码如下所示：

```
 fb_session = [[FBSession alloc] initWithAppID:@"1234"  //"1234" is not my app id. I use a valid one.                       
                                            permissions:nil
                                          urlSchemeSuffix:nil 
                                       tokenCacheStrategy:nil];//k_AppId 
if(fb_session.state == FBSessionStateCreatedTokenLoaded)
{ ... } 
```

*   我试图用 [[FBSession] init] 函数替换 initWithAppId 函数，但它在 [FBSession state] 处崩溃。我在互联网上阅读，我看到如果我有 Facebook 5.0 应用程序，但我没有那个应用程序。

> ```
> fb_session = [[FBSession alloc] init];
> if(fb_session.state == FBSessionStateCreatedTokenLoaded)
> { ... } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:22:28.137

您可以使用这两种方法中的任何一种。由你决定。为此，我建议您按照此处提供的 Facebook for iOS SDK 3.0 入门指南进行操作，该指南有一步一步的过程来帮助您滚动。 [https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/)

# c# - 实体框架按一对多实体排序

> ID：12266233
> 
> 赞同：0
> 
> 时间：2012-09-04T15:00:25.507
> 
> 标签：c#, .net, entity-framework

我见过类似的，但找不到答案。我有 2 个实体出版物和作者。作者不是强制性的，当我 OrderBy Publication.Author.Surname 我得到 NullReferenceException 因为出版物总是有相关的作者。我该如何编写这个简单的查询，为什么 EhtityFramework 知道如何处理这个问题？

```
public class Publication {
[Key]
public int ID { get; set; }

public string Title { get; set; }

[Display(Name = "Author")]
public int? AuthorId { get; set; }
public virtual Author Author { get; set; }
}

public class Author{
[Key]
public virtual int ID { get; set; }

public virtual string Forename { get; set; }

public virtual string Surname { get; set; }
}

this.db.Publications
    .OrderBy(p=>p.Author.Surname)
    .Skip(skip)
    .Take(model.PageSize).ToList(); 
```

失败是因为出版物并不总是有相关的作者。注意：db 是实体框架 DBContext，如下所示：

```
public class PPRDBContext : DbContext
{
  public DbSet<Publication> Publications { get; set; }
  public DbSet<Author> Authors { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:01:44.700

这不是 EF 的错 - 这是我在访问引用对象的属性时所知道的任何语言的常见陷阱。

根据您是否希望 NULL 值首先出现，您可以执行以下操作：

```
.OrderBy(p=> p.Author == null ? "" : p.Author.Surname) 
```

如果您希望 NULL 值最后出现，请使用以下内容：

```
.OrderBy(p=> p.Author == null ? "ZZZZZ" : p.Author.Surname) 
```

# javascript - 正则表达式或 javascript 每 X 个连续单词中的 1 个单词

> ID：12266235
> 
> 赞同：0
> 
> 时间：2012-09-04T15:00:31.857
> 
> 标签：javascript, regex

我需要想出一些正则表达式或 javascript，正如标题所说，从每 X 个连续单词中获取 1 个随机单词。

例如，我有这段文字

“在计算中，正则表达式提供了一种简洁灵活的方法来“匹配”（指定和识别）文本字符串，例如特定的字符、单词或字符模式。“正则表达式”的常见缩写包括 regex 和 regexp。 "

我想每 4 个单词正则表达式 1 个单词，所以从“在计算中，一个常规”文本中的前四个单词中，我将正则表达式出 1 个随机单词，例如计算

但是需要对整个文本执行此操作，例如上面有 9 组，每组 4 个单词。我想从每个组中正则表达式出一个随机单词。希望我可以在该正则表达式中进行快速编辑，以便它也可以对 X 字组执行相同的操作。X 是任意数字。

我已经尝试过一切可以为我做这件事的东西，但我进展得不是很好（我对正则表达式和 javascript 都是新手）

我想如果我可以使用 javascript 将文本分成 X 组单词，然后我可以尝试从每个组中获取一个随机单词。

我到目前为止是这样的：

```
var split='In computing, a regular expression provides a concise and flexible means to "match" (specify and recognize) strings of text, such as particular characters, words, or patterns of characters. Common abbreviations for "regular expression" include regex and regexp.'.match(/[^ ]+( +[^ ]+){0,3}/g); 
```

这会将带有逗号分隔符的文本分成 4 个单词（或每 3 个空格）的组。问题是分隔符是逗号，因此原始文本中的任何逗号也会在输出中看到，例如

```
In computing, a regular,expression provides a concise,and flexible means to,"match" (specify and recognize),strings of text, such,as particular characters, words,,or patterns of characters.,Common abbreviations for "regular,expression" include regex and,regexp. 
```

反正有没有把分隔符改成逗号以外的东西？至少通过这种方式，我可以尝试提出一些可用于每个 4 个单词组的正则表达式。我想也许在比赛结束后替换逗号，但这当然也会替换所有原来的逗号。

我不确定我将如何处理随机单词正则表达式或 javascript，但我认为将组整理好是朝着正确方向迈出的第一步？

感谢您对此的任何帮助或建议，我非常感谢。抱歉，如果这对你们中的某些人来说完全简单，但我是新手，我已经尝试了几个小时来提出一些可行的解决方案，但无济于事。

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:08:30.053

`.match`将返回一个匹配数组。然后只需将它们按空间拆分并从每个数组中随机获取一个：

```
var text = '"In computing, a regular expression provides a concise and flexible means to "match" (specify and recognize) strings of text, such as particular characters, words, or patterns of characters. Common abbreviations for "regular expression" include regex and regexp."';
var groups = text.match( /[^ ]+( +[^ ]+){0,3}/g );
for( var i=0 ; i<groups.length ; i++ ) {
  var words = groups[i].split( ' ' );
  console.log( words[~~(Math.random()*words.length)] );
} 
```

-

`~~(Math.random()*words.length)`会给你一个整数`0`到# of words (4) - 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:17:46.193

[http://jsfiddle.net/DqsQu/](http://jsfiddle.net/DqsQu/)

```
var str = "In computing, a regular expression provides a concise and flexible means to \"match\" (specify and recognize) strings of text, such as particular characters, words, or patterns of characters. Common abbreviations for \"regular expression\" include regex and regexp.";

var words = str.match(/\w+/g);
for (var i=0; i< words.length; i+=4) {    
    var randNum = Math.floor(Math.random()*4) + i;
    if (words[randNum]){
        document.write(words[randNum] + "<br>");
    }
}
​ 
```

编辑：

如果要确保最后一个“组”单词始终具有值，则可以这样做：

```
var words = str.match(/\w+/g);
for (var i=0; i< words.length; i+=4) {
    var maxRand = Math.min(4, words.length - i);
    var randNum = Math.floor(Math.random()*maxRand) + i;
    document.write(words[randNum] + "<br>");
}
​ 
```

所以，如果你有短语“一二三四五六”，第一个词将是前四个词中的一个随机词，第二组只包含词“五”和“六”，所以你会得到一个随机来自这两个词之一的词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:12:07.820

正则表达式不支持随机化，所以在这里它们不会帮助你。

但是您可以使用 String.split 方法将文本转换为单个单词的数组。然后，您以四个为一组对数组进行迭代，并从每组中选择一个随机单词。

```
Math.floor(Math.random() * 4) 
```

返回 0 到 3 之间的随机整数。

# ms-access-2010 - 复杂问题的 MS Access 查询

> ID：12266238
> 
> 赞同：1
> 
> 时间：2012-09-04T15:00:44.227
> 
> 标签：ms-access-2010, multiple-tables, cross-reference

我有几个表：SW_Report、SW_List、Manual_Install、Cloud_Install 和 SW_Exclusion。SW_Report 有一个字段 Computer_Name（例如：CN1）和 App_Name（例如：iTunes），其中每个用户计算机上安装的每个应用程序都有一行（例如：CN1 - iTunes，CN1 - Adob​​e，CN2 - iTunes...）。（SW_List 有一个字段 App_Name（例如：iTunes）和 App_ID（例如：1001）。Manual_Install 是由另一个项目团队构建的表，其中包含 Tested_Apps 列表（命名约定略有不同）（例如：iTunes 10.1_EN_US）和 App_ID （例如：n001）（不可能在运行查询时仅测试应用程序是否包含名称）。Cloud_Install 也是如此（Cloud_App 和 App_ID - 它们都与上述任何表都不一致。

我已手动将 Manual_Install 和 Cloud_Install 中的 ID 映射到 SW_List 中相应的 App ID，并将它们命名为 Manual_SW_Xref 和 Cloud_SW_Xref。我需要做的是构建一个查询，查看安装在每个唯一 Computer_Name 上的每个 App_Name，检查它是否列在 Manual_SW_Xref 和 Cloud_SW_Xref 中，并仅返回两个列表之一中包含 SW 的 Computer_Name 列表。

有什么想法吗？我需要一个起点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:09:20.280

可以测试一个字段是否存在于另一个字段中

```
 SELECT t1.field1 
 FROM table1 As t1, table2 As t2
 WHERE t1.Field1 & "*" like t2.Field1 
```

# java - 简单的类似 java 脚手架的 CRUD 生成器

> ID：12266241
> 
> 赞同：5
> 
> 时间：2012-09-04T15:00:53.790
> 
> 标签：java, swing, crud, scaffolding

java中是否有任何用于swing的简单、轻量级的crud表单生成器？

我有一个使用 spring+hibernate 的桌面应用程序，我只缺少一堆允许编辑一些数据库实体的 gui 面板。非常简单的属性可编辑表单，所以我虽然必须有一些工具来自动化这个过程。我不需要任何 DAO/pojo/bean/controller/service 生成。

我在其他问题中读过一些关于此的内容，但所有解决方案似乎都涉及安装整个框架和生成复杂的非标准 java 代码。我只想要普通的摆动面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:58:07.547

我不相信有任何像你正在寻找的东西。但是，为什么不使用 Grails（或 Rails，或任何您喜欢的 Web 框架）创建一个 Web 应用程序，其中包含执行 DB 工作的 Web 服务，然后从您的桌面应用程序中调用 Web 服务？

# iphone - 如果开发人员使用他们的开发人员帐户和证书等为我开发 iPhone 应用程序？

> ID：12266246
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:01:16.457
> 
> 标签：iphone, ios

快速一个，如果开发人员使用他们的开发人员帐户和证书等为我开发 iPhone 应用程序？以及他们的配置文件等。然后将完成的压缩 .app 文件发送给我以上传到我的开发者帐户，它会被接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:03:57.223

这有点离题，但不是。他们需要使用您的证书签署应用程序文件，以便您能够通过您的帐户将其提交到商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:04:36.957

不可以。证书和帐户必须匹配。

# asp.net-mvc-4 - 如何先在实体框架代码中保存列表

> ID：12266250
> 
> 赞同：0
> 
> 时间：2012-09-04T15:01:31.793
> 
> 标签：asp.net-mvc-4, entity-framework-5

我有一本字典 var movimiento_det = new MovimientoDet(); //

```
 foreach (var detalle in detalles)
                            {
                                movimiento_det.MovimientoDetId =   G.Serial("movimiento_det"); // get me the id of the entity
                                movimiento_det.MovimientoDetId= i;
                                movimiento_det.ProductoId = detalle.Value.ProductoId;
                                movimiento_det.Cantidad = detalle.Value.Cantidad;
                                Vmsb.MovimientoDets.Add(movimiento_det);
                            }
                            Vmsb.SaveChanges(); 
```

我想保存字典的所有值，但它只是将 foreach 中的最后一个数据保存到数据库中我该如何保存所有数据

使用 ef5 和 vs2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:07:22.417

据我所知，movimiento_det 是一个单一的对象。每次迭代仅更新该对象。您需要在每次迭代中创建一个新对象并修改该对象。

```
foreach (var detalle in detalles)
{
    var movimiento_det = new MovimientoDet();
    movimiento_det.MovimientoDetId =   G.Serial("movimiento_det"); 
    movimiento_det.MovimientoDetId= i;
    movimiento_det.ProductoId = detalle.Value.ProductoId;
    movimiento_det.Cantidad = detalle.Value.Cantidad;
    Vmsb.MovimientoDets.Add(movimiento_det);
}
Vmsb.SaveChanges(); 
```

# jsf-2 - 在 JSF facesContext 中获取 NullpointerException

> ID：12266251
> 
> 赞同：0
> 
> 时间：2012-09-04T15:01:39.203
> 
> 标签：jsf-2, junit4

当我尝试测试包含 facesContext（与 JSF 后端 bean 相关）的方法时，我在 Junit 中遇到空指针异常。

context.getApplication().evaluateExpressionGet();

在这里，我得到了 NullpointerExeotion。

如何在 Junit 中避免此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:21:54.407

您的单元测试需要在服务器端运行。使用仙人掌你可以做到这一点。还有另一个项目 JSFUnit，但从未测试过。

# android - 缩放扩展 LinearLayout 的自定义小部件

> ID：12266256
> 
> 赞同：1
> 
> 时间：2012-09-04T15:02:03.530
> 
> 标签：android, zooming, android-linearlayout, pinch

嗨，我正在尝试在 LinearLayout 中实现捏合缩放功能，我的第一次尝试是扩展线性布局并使用缩放手势检测器来检测捏合缩放手势，遵循[android 开发人员博客的建议](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

我试图覆盖 onDraw 方法并使用画布设置缩放，但它根本不起作用，视图保持固定大小

这是我的自定义视图中的代码：

```
private static final int INVALID_POINTER_ID = -1;

private static final String TAG = "MyTag";

private float mScaleFactor = 1f;
private ScaleGestureDetector mScaleDetector;
private float mPosX;
private float mPosY;
private float mFocusX;
private float mFocusY;

private float mLastTouchX;
private float mLastTouchY;
private int mActivePointerId = INVALID_POINTER_ID;

private boolean mHandlingGesture = true;

public CrosswordGridLayout(Context context) {
    super(context);
    init();
}

public CrosswordGridLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public CrosswordGridLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

private void init() {
    setWillNotDraw(false);
    mScaleDetector = new ScaleGestureDetector(getContext(),
            new ScaleListener());
}

@Override
protected void onDraw(Canvas canvas) {
    Log.d(TAG, "onDraw");
    canvas.save();
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor, mFocusX, mFocusY);
    super.onDraw(canvas);
    canvas.restore();
}
@Override
public boolean onTouchEvent(MotionEvent ev) {
    Log.d(TAG, "onTouchEvent");
    // Let the ScaleGestureDetector inspect all events.
    mHandlingGesture = mScaleDetector.onTouchEvent(ev);

    final int action = ev.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
        final float x = ev.getX();
        final float y = ev.getY();

        mLastTouchX = x;
        mLastTouchY = y;
        mActivePointerId = ev.getPointerId(0);
        break;
    }

    case MotionEvent.ACTION_MOVE: {
        final int pointerIndex = ev.findPointerIndex(mActivePointerId);
        final float x = ev.getX(pointerIndex);
        final float y = ev.getY(pointerIndex);

        // Only move if the ScaleGestureDetector isn't processing a gesture.
        if (!mScaleDetector.isInProgress()) {
            final float dx = x - mLastTouchX;
            final float dy = y - mLastTouchY;

            mPosX += dx;
            mPosY += dy;

            requestLayout();
        }

        mLastTouchX = x;
        mLastTouchY = y;

        break;
    }

    case MotionEvent.ACTION_UP: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_CANCEL: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_POINTER_UP: {
        final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = ev.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = ev.getX(newPointerIndex);
            mLastTouchY = ev.getY(newPointerIndex);
            mActivePointerId = ev.getPointerId(newPointerIndex);
        }
        break;
    }
    }

    return true;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    return true;
}

private class ScaleListener extends
        ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        Log.d(TAG, "onScale");
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

        mFocusX = detector.getFocusX();
        mFocusY = detector.getFocusY();
        Log.d(TAG, "mScaleFactor=" + mScaleFactor);
        requestLayout();

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:22:33.970

你canvas里面的操作`dispatchDraw()`不行吗`onDraw()`

```
protected void dispatchDraw(Canvas canvas) {
    Log.d(TAG, "dispatchDraw");
    canvas.save();
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor, mFocusX, mFocusY);
    super.dispatchDraw(canvas);
    canvas.restore();
} 
```

该示例与您的代码之间的区别在于，在该示例中，它是缩放的简单视图，在您的情况下，它是 ViewGroup。

并且不要在使用`requestLayout()`中`ScaleListener.onScale()`使用`invalidate()`。

# jasper-reports - iReport 3.0.0：如何比较字段表达式中的大小数

> ID：12266259
> 
> 赞同：0
> 
> 时间：2012-09-04T15:02:15.057
> 
> 标签：jasper-reports, expression, ireport, bigdecimal

谁能告诉我如何比较*字段*表达式（*textFieldExpression*）中的两个 Big Decimal 值？我正在使用*iReport 3.0.0*。

*更大*的语法是什么？

 *这是我的表达式，它有效，但仅显示两个值是否不相等，我需要检查哪个值更大（`amount > paid_amount`）。

我正在使用这个表达式：

```
($F{paid_date}!=null & ($F{amount}.equals($F{paid_amount}))) ? new String ("PAID") :(
($F{paid_date}==null) ? new String ("NOT PAID"): (
($F{paid_date}!=null & (!$F{amount}.equals($F{paid_amount}))) ? new String ("PARTIALLY PAID"):(new String ("INVOICE MISSING ")))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:59:46.780

对于这样的字段：

```
<field name="amount" class="java.math.BigDecimal"/>
<field name="paid_amount" class="java.math.BigDecimal"/> 
```

你应该使用这个表达式：

```
<textFieldExpression class="java.lang.String"><![CDATA[$F{amount}.compareTo($F{paid_amount}) == 1 
? "The amount value is greater than the paid_amount value" 
: $F{amount}.compareTo($F{paid_amount}) == 0 ? 
"The amount value is equal to the paid_amount value" : 
"The amount value is less than the paid_amount value"]]></textFieldExpression> 
```

这个表达式基于使用***[int BigDecimal.compareTo(java.math.BigDecimal val)](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)***方法。*

# java - 无法让 SocketPermission 与 RMI 一起使用

> ID：12266261
> 
> 赞同：1
> 
> 时间：2012-09-04T15:02:23.777
> 
> 标签：java, rmi

我有一个 RMI 应用程序，我正在尝试正确获取策略文件。当我将权限设置为：

```
grant codeBase "file:MyJar.jar" {
    permission java.security.AllPermission;
}; 
```

但这对于生产环境来说太自由了。当我更改为：

```
grant codeBase "file:MyJar.jar" {
    permission java.security.SocketPermission "*:1024-", "accept, resolve";
}; 
```

我得到如下的 AccessControlException。我以为我涵盖了所需的许可？

```
Exception in thread "RMI TCP Connection(idle)" java.security.AccessControlException: access denied (java.net.SocketPermission 127.0.0.1:63014 accept,resolve)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:546)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at java.lang.SecurityManager.checkAccept(SecurityManager.java:1157)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.checkAcceptPermission(TCPTransport.java:636)
at sun.rmi.transport.tcp.TCPTransport.checkAcceptPermission(TCPTransport.java:275)
at sun.rmi.transport.Transport$1.run(Transport.java:158)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

**编辑：** 运行`-Djava.security.debug=access,failure`并更改为`"*:1024"`后`"localhost:1024"`：

```
access: domain that failed ProtectionDomain  (file:MyJar.jar <no signer certificates>)
 sun.misc.Launcher$AppClassLoader@6bbc4459
 <no principals>
 java.security.Permissions@281acd47 (
 (unresolved java.security.SocketPermission localhost:1024- accept, resolve)
 (java.io.FilePermission MyJar.jar read)
 (java.util.PropertyPermission line.separator read)
 (java.util.PropertyPermission apple.laf.* read,write)
 (java.util.PropertyPermission java.vm.version read)
 (java.util.PropertyPermission java.vm.specification.version read)
 (java.util.PropertyPermission java.vm.specification.vendor read)
 (java.util.PropertyPermission java.vendor.url read)
 (java.util.PropertyPermission java.vm.name read)
 (java.util.PropertyPermission os.name read)
 (java.util.PropertyPermission java.vm.vendor read)
 (java.util.PropertyPermission com.apple.macos.useScreenMenuBar read,write)
 (java.util.PropertyPermission path.separator read)
 (java.util.PropertyPermission java.specification.name read)
 (java.util.PropertyPermission os.version read)
 (java.util.PropertyPermission com.apple.hwaccel read,write)
 (java.util.PropertyPermission mrj.version read)
 (java.util.PropertyPermission os.arch read)
 (java.util.PropertyPermission apple.awt.* read,write)
 (java.util.PropertyPermission java.class.version read)
 (java.util.PropertyPermission java.version read)
 (java.util.PropertyPermission file.separator read)
 (java.util.PropertyPermission java.vendor read)
 (java.util.PropertyPermission java.vm.specification.name read)
 (java.util.PropertyPermission java.specification.version read)
 (java.util.PropertyPermission java.specification.vendor read)
 (java.lang.RuntimePermission stopThread) 
 (java.lang.RuntimePermission exitVM)
 (java.net.SocketPermission localhost:1024- listen,resolve)
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:27:19.033

使用 -Djava.security.debug=access,failure 运行它以查看到底发生了什么。我不相信 * 本身就是 SocketPermission 中的有效主机规范。我也不清楚您为什么要使用 SecurityManager 在本地主机内进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:55:00.340

好的，所以我`SocketPermission`在策略文件中输入错误。它应该`java.net.SocketPermission`代替`java.security.SocketPermission`. 这就是为什么它说它没有解决。

# html - 贴在头上的位置

> ID：12266262
> 
> 赞同：52
> 
> 时间：2012-09-04T15:02:25.277
> 
> 标签：html, css

您可能知道，`position: sticky;`已经登陆 Webkit ( [demo](http://html5-demos.appspot.com/static/css/sticky.html) )。到目前为止，我可以看到这只适用于父元素。但我想知道我是否可以在带有表格的滚动 div 中使用它。

所以它需要“监听” 的滚动事件，而`div`不是`table`.

我知道我可以使用 javascript 和绝对定位来做到这一点，但我想知道是否`sticky-positioning`会支持这一点。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2018-03-14T05:01:44.480

**在 2018年的*工作上*粘贴位置！**

在您的样式表中，只需添加这一行：

```
thead th { position: sticky; top: 0; } 
```

您的表格将需要包含*thead*和*th*才能设置样式。

```
<table>
    <thead>
        <tr>
            <th>column 1</th>
            <th>column 2</th>
            <th>column 3</th>
            <th>column 4</th>            
        </tr>    
    </thead>
    <tbody>
      // your body code
    </tbody>
</table> 
```

*此外，如果您在thead*中有多行，则可以选择第一行以保持粘性：

```
thead tr:first-child th { position: sticky; top: 0; } 
```

截至 2018 年 3 月，现代浏览器几乎都提供支持参考：[https ://caniuse.com/#feat=css-sticky](https://caniuse.com/#feat=css-sticky)

*这个归功于@ctf0（[参考评论于2017年12月3日发表](https://stackoverflow.com/questions/12266262/position-sticky-on-thead/49270067#comment82195060_43895506)）*

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-05-10T14:33:00.660

如果您只需要 chrome 的粘性标题，那么您可以为元素中的元素设置`position: sticky; top: some_value`（`top`属性是必需的）。`td``thead`

看：

```
<table border=1>
  <thead>
    <tr>
      <td style='position: sticky; top: -1px;background: red'>Sticky Column</td>
      <td>Simple column</td>
    </tr>
  </thead> 
```

[带有粘性标题的表](https://codepen.io/bioform/pen/XRZBEW)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-03T17:37:45.387

`position: sticky` **不适**用于表格元素（只要它们的`display`属性以 开头`table-`），因为表格不是[规范](http://dev.w3.org/csswg/css-position/)的一部分：

> 其他类型的布局，例如表格、“浮动”框、ruby 注释、网格布局、列和正常“流”内容的基本处理，在其他模块中进行了描述。

* * *

**编辑**：根据[https://caniuse.com/#feat=css-sticky](https://caniuse.com/#feat=css-sticky) 2019 年 7 月， Firefox 支持此功能，Chrome 至少支持`<th>`标签。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T09:27:06.093

事实证明，`position: sticky`它只适用于窗口，而不适用于滚动 div。

我创建了一个带有表格标题的很长表格的[测试用例：](http://jsfiddle.net/willemdewit/xNsaM/)

```
h1 {
  font-size: 18px;
  font-weight: bold;
  margin: 10px 0;
}

div.testTable {
  height: 200px;
  overflow: auto;
}

table.stickyHead thead {
  position: -webkit-sticky;
  top: 0px;
  background: grey;
}

table.stickyHead td,
table.stickyHead th {
  padding: 2px 3px;
}
```

```
<h1>Position sticky</h1>
<div class="testTable">
  <table class="stickyHead">
    <thead>
      <tr>
        <th>column 1</th>
        <th>column 2</th>
        <th>column 3</th>
        <th>column 4</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
    </tbody>
  </table>
</div>
```

如您所见，如果您从包装纸中移除溢出物并使窗口不那么高，则表头会粘在窗口顶部。`div`即使您给予我也不适用于包装`div` `position: relative`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-21T00:01:07.713

警告：

position:sticiky 在 2019 年不再在 Google Chrome 上工作，尝试使用 fixed 或 display:inline-block

# c++ - 在 Windows 上的 Qt Creator 中编译 Cuda 代码

> ID：12266264
> 
> 赞同：12
> 
> 时间：2012-09-04T15:02:30.670
> 
> 标签：c++, windows-7, qt4, cuda

几天来，我一直在尝试让 Qt 项目文件在 32 位 Windows 7 系统上运行，我希望/需要在其中包含 Cuda 代码。事情的这种组合要么是如此简单以至于没有人愿意在网上发布一个例子，要么如此困难以至于没有人成功，似乎。不管怎样，我发现的唯一有用的论坛主题是 Linux 或 Mac 上的相同问题，或者 Windows 上的 Visual Studio。然而，所有这些都会产生各种不同的错误，无论是由于链接或冲突库，还是文件名中的空格或 Windows 版本的 Cuda SDK 中不存在的文件夹。有没有人`.pro`可以提供明确的文件来解决问题？

我的目标是用 Qt 风格的普通 C++ 代码和 Qt 4.8 库编译一个简单的程序，这些库引用了 .cu 文件中的几个 Cuda 模块。某种形式的东西：

```
TestCUDA \
    TestCUDA.pro
    main.cpp
    test.cu 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T15:02:30.670

所以我终于设法组装了一个`.pro`适用于我的，可能适用于所有 Windows 系统的文件。以下是一个简单的测试程序，应该可以解决问题。以下是至少在我的系统上工作的小项目文件和测试程序。

文件系统如下所示：

```
TestCUDA \
    TestCUDA.pro
    main.cpp
    vectorAddition.cu 
```

项目文件内容如下：

```
TARGET = TestCUDA

# Define output directories
DESTDIR = release
OBJECTS_DIR = release/obj
CUDA_OBJECTS_DIR = release/cuda

# Source files
SOURCES += src/main.cpp

# This makes the .cu files appear in your project
OTHER_FILES +=  vectorAddition.cu

# CUDA settings <-- may change depending on your system
CUDA_SOURCES += src/cuda/vectorAddition.cu
CUDA_SDK = "C:/ProgramData/NVIDIA Corporation/NVIDIA GPU Computing SDK 4.2/C"   # Path to cuda SDK install
CUDA_DIR = "C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v4.2"            # Path to cuda toolkit install
SYSTEM_NAME = Win32         # Depending on your system either 'Win32', 'x64', or 'Win64'
SYSTEM_TYPE = 32            # '32' or '64', depending on your system
CUDA_ARCH = sm_11           # Type of CUDA architecture, for example 'compute_10', 'compute_11', 'sm_10'
NVCC_OPTIONS = --use_fast_math

# include paths
INCLUDEPATH += $$CUDA_DIR/include \
               $$CUDA_SDK/common/inc/ \
               $$CUDA_SDK/../shared/inc/

# library directories
QMAKE_LIBDIR += $$CUDA_DIR/lib/$$SYSTEM_NAME \
                $$CUDA_SDK/common/lib/$$SYSTEM_NAME \
                $$CUDA_SDK/../shared/lib/$$SYSTEM_NAME
# Add the necessary libraries
LIBS += -lcuda -lcudart

# The following library conflicts with something in Cuda
QMAKE_LFLAGS_RELEASE = /NODEFAULTLIB:msvcrt.lib
QMAKE_LFLAGS_DEBUG   = /NODEFAULTLIB:msvcrtd.lib

# The following makes sure all path names (which often include spaces) are put between quotation marks
CUDA_INC = $$join(INCLUDEPATH,'" -I"','-I"','"')

# Configuration of the Cuda compiler
CONFIG(debug, debug|release) {
    # Debug mode
    cuda_d.input = CUDA_SOURCES
    cuda_d.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda_d.commands = $$CUDA_DIR/bin/nvcc.exe -D_DEBUG $$NVCC_OPTIONS $$CUDA_INC $$LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda_d.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda_d
}
else {
    # Release mode
    cuda.input = CUDA_SOURCES
    cuda.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda.commands = $$CUDA_DIR/bin/nvcc.exe $$NVCC_OPTIONS $$CUDA_INC $$LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda
} 
```

请注意`QMAKE_LFLAGS_RELEASE = /NODEFAULTLIB:msvcrt.lib`：我花了很长时间才弄清楚，但是这个库似乎与 Cuda 中的其他东西发生冲突，这会产生奇怪的链接警告和错误。如果有人对此有解释，并且可能有更漂亮的方法来解决这个问题，我想听听。

此外，由于 Windows 文件路径通常包含空格（NVIDIA 的 SDK 默认也包含空格），因此需要人为地在包含路径周围添加引号。同样，如果有人知道解决这个问题的更优雅的方法，我很想知道。

该`main.cpp`文件如下所示：

```
#include <cuda.h>
#include <builtin_types.h>
#include <drvapi_error_string.h>

#include <QtCore/QCoreApplication>
#include <QDebug>

// Forward declare the function in the .cu file
void vectorAddition(const float* a, const float* b, float* c, int n);

void printArray(const float* a, const unsigned int n) {
    QString s = "(";
    unsigned int ii;
    for (ii = 0; ii < n - 1; ++ii)
        s.append(QString::number(a[ii])).append(", ");
    s.append(QString::number(a[ii])).append(")");

    qDebug() << s;
}

int main(int argc, char* argv [])
{
    QCoreApplication(argc, argv);

    int deviceCount = 0;
    int cudaDevice = 0;
    char cudaDeviceName [100];

    unsigned int N = 50;
    float *a, *b, *c;

    cuInit(0);
    cuDeviceGetCount(&deviceCount);
    cuDeviceGet(&cudaDevice, 0);
    cuDeviceGetName(cudaDeviceName, 100, cudaDevice);
    qDebug() << "Number of devices: " << deviceCount;
    qDebug() << "Device name:" << cudaDeviceName;

    a = new float [N];    b = new float [N];    c = new float [N];
    for (unsigned int ii = 0; ii < N; ++ii) {
        a[ii] = qrand();
        b[ii] = qrand();
    }

    // This is the function call in which the kernel is called
    vectorAddition(a, b, c, N);

    qDebug() << "input a:"; printArray(a, N);
    qDebug() << "input b:"; printArray(b, N);
    qDebug() << "output c:"; printArray(c, N);

    if (a) delete a;
    if (b) delete b;
    if (c) delete c;
} 
```

Cuda 文件`vectorAddition.cu`描述了一个简单的向量加法，如下所示：

```
#include <cuda.h>
#include <builtin_types.h>

extern "C"
__global__ void vectorAdditionCUDA(const float* a, const float* b, float* c, int n)
{
    int ii = blockDim.x * blockIdx.x + threadIdx.x;
    if (ii < n)
        c[ii] = a[ii] + b[ii];
}

void vectorAddition(const float* a, const float* b, float* c, int n) {
    float *a_cuda, *b_cuda, *c_cuda;
    unsigned int nBytes = sizeof(float) * n;
    int threadsPerBlock = 256;
    int blocksPerGrid   = (n + threadsPerBlock - 1) / threadsPerBlock;

    // allocate and copy memory into the device
    cudaMalloc((void **)& a_cuda, nBytes);
    cudaMalloc((void **)& b_cuda, nBytes);
    cudaMalloc((void **)& c_cuda, nBytes);
    cudaMemcpy(a_cuda, a, nBytes, cudaMemcpyHostToDevice);
    cudaMemcpy(b_cuda, b, nBytes, cudaMemcpyHostToDevice);

    vectorAdditionCUDA<<<blocksPerGrid, threadsPerBlock>>>(a_cuda, b_cuda, c_cuda, n);

    // load the answer back into the host
    cudaMemcpy(c, c_cuda, nBytes, cudaMemcpyDeviceToHost);

    cudaFree(a_cuda);
    cudaFree(b_cuda);
    cudaFree(c_cuda);
} 
```

如果你让它工作，那么更复杂的例子是不言而喻的，我认为。

**编辑（24-1-2013）：**我添加了`QMAKE_LFLAGS_DEBUG = /NODEFAULTLIB:msvcrtd.lib`和`CONFIG(debug)`带有额外`D_DEBUG`标志的，这样它也可以在调试模式下编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:53:09.217

使用 msvc 2010 我发现链接器不接受 -l 参数，但是 nvcc 需要它。因此，我在 .pro 文件中做了一个简单的更改：

```
# Add the necessary libraries
CUDA_LIBS = cuda cudart
# The following makes sure all path names (which often include spaces) are put between quotation marks
CUDA_INC = $$join(INCLUDEPATH,'" -I"','-I"','"')
# LIBRARIES IN FORMAT NEEDED BY NVCC
NVCC_LIBS = $$join(CUDA_LIBS,' -l','-l', '')
# LIBRARIES IN FORMAT NEEDED BY VISUAL C++ LINKER
LIBS += $$join(CUDA_LIBS,'.lib ', '', '.lib') 
```

和 nvcc 命令（发行版）：

```
cuda.commands = $$CUDA_DIR/bin/nvcc.exe $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME} 
```

插入了 $$NVCC_LIBS 而不是 $$LIBS。整个 .pro 文件，对我有用：

```
QT       += core

QT       -= gui

TARGET = TestCUDA
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

# Define output directories
DESTDIR = release
OBJECTS_DIR = release/obj
CUDA_OBJECTS_DIR = release/cuda

# Source files
SOURCES += main.cpp

# This makes the .cu files appear in your project
OTHER_FILES +=  vectorAddition.cu

# CUDA settings <-- may change depending on your system
CUDA_SOURCES += vectorAddition.cu
#CUDA_SDK = "C:/ProgramData/NVIDIA Corporation/NVIDIA GPU Computing SDK 4.2/C"   # Path to cuda SDK install
CUDA_DIR = "C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v5.0"           # Path to cuda toolkit install
SYSTEM_NAME = win32         # Depending on your system either 'Win32', 'x64', or 'Win64'
SYSTEM_TYPE = 32            # '32' or '64', depending on your system
CUDA_ARCH = sm_11           # Type of CUDA architecture, for example 'compute_10', 'compute_11', 'sm_10'
NVCC_OPTIONS = --use_fast_math

# include paths
INCLUDEPATH += $$CUDA_DIR/include
               #$$CUDA_SDK/common/inc/ \
               #$$CUDA_SDK/../shared/inc/

# library directories
QMAKE_LIBDIR += $$CUDA_DIR/lib/$$SYSTEM_NAME
                #$$CUDA_SDK/common/lib/$$SYSTEM_NAME \
                #$$CUDA_SDK/../shared/lib/$$SYSTEM_NAME

# The following library conflicts with something in Cuda
QMAKE_LFLAGS_RELEASE = /NODEFAULTLIB:msvcrt.lib
QMAKE_LFLAGS_DEBUG   = /NODEFAULTLIB:msvcrtd.lib

# Add the necessary libraries
CUDA_LIBS = cuda cudart
# The following makes sure all path names (which often include spaces) are put between quotation marks
CUDA_INC = $$join(INCLUDEPATH,'" -I"','-I"','"')
NVCC_LIBS = $$join(CUDA_LIBS,' -l','-l', '')
LIBS += $$join(CUDA_LIBS,'.lib ', '', '.lib')

# Configuration of the Cuda compiler
CONFIG(debug, debug|release) {
    # Debug mode
    cuda_d.input = CUDA_SOURCES
    cuda_d.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda_d.commands = $$CUDA_DIR/bin/nvcc.exe -D_DEBUG $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda_d.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda_d
}
else {
    # Release mode
    cuda.input = CUDA_SOURCES
    cuda.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda.commands = $$CUDA_DIR/bin/nvcc.exe $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda
} 
```

我还添加了一些必要的声明，即 QT += core 以使应用程序正常工作，并且还删除了 SDK 部分，在这种情况下我没有发现它有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T14:13:00.270

我试过这个组合来工作。由于我的项目中有许多依赖项，无法使其工作。我的最终解决方案是在 Windows 1 上将应用程序分成两个单独的应用程序）

1.  在 VC 中开发并在 Windows 中作为服务/DLL 运行的 CUDA 应用程序
2.  在 QT 中开发的 GUI 界面并使用 DLL 进行 CUDA 相关任务。

希望它可以节省其他人的一些时间

# javascript - 带有 setInterval() 函数的图像闪烁

> ID：12266265
> 
> 赞同：0
> 
> 时间：2012-09-04T15:02:32.417
> 
> 标签：javascript, jquery, javascript-events

我制作了一个轮播并使用 javascript`setInterval()`函数在轮播中以固定间隔旋转图像。这是我用过的脚本

```
var timeOut = 4000;

function showSlide() {
       //....script for showing image
}

function pauseSlide() {

   setInterval(function(){showSlide();}, timeOut);

}

jQuery(document).ready(function() {
        pauseSlide();
}); 
```

现在的问题是，当我更改浏览器选项卡并在几分钟后再次回到轮播浏览器时，我看到轮播运行速度太快而不是默认时间间隔，假设时间间隔为 0，图像会快速变化。请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:06:18.050

你必须在开始另一个间隔之前摆脱第一个间隔，或者你开始同时工作多个间隔（即为什么你开始看到它“更快”）

做这个

```
var timeOut = 4000;
var interval = 0;

function showSlide() {
       //....script for showing image
}

function pauseSlide() {

   clearInterval(interval);
   interval =  setInterval(function(){showSlide();}, timeOut);

}

jQuery(document).ready(function() {
    //NOW you can do multiple pauseSlide() calls
     pauseSlide();
     pauseSlide();
     pauseSlide();
     pauseSlide();
     pauseSlide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:07:03.710

据我所知，在 Firefox 和 chrome 的较新版本中，后台选项卡已将 setTimeout 和 setInterval 限制为 1000 毫秒以提高性能。所以我认为你的问题可能与此有关。

也许这会有所帮助：[当标签在 Chrome 中处于非活动状态时，如何使 setInterval 也起作用？](https://stackoverflow.com/questions/5927284/how-can-i-make-setinterval-also-work-when-a-tab-is-inactive-in-chrome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:08:28.107

图像变化快于预期可能表明您以一种或另一种方式多次调用 pauseSlide()。

是`document ready`你调用函数的唯一地方吗？showlide 中的任何代码或触发文档就绪事件的任何地方？如果你`alert()`输入`pauseSlide()`，它会弹出不止一次吗？

# java - Actionbarsherlock 不会在 Android 4.x 中显示菜单项

> ID：12266270
> 
> 赞同：0
> 
> 时间：2012-09-04T15:02:36.053
> 
> 标签：java, android, xml, actionbarsherlock

我正在使用 actionbarsherlock 作为操作栏。它在 android 1.x 和 2.x 下工作得很好，但经过一些测试，我注意到 menuitems 没有在 android 4.x 中显示。这是我的菜单项的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/overview_newgame"
    android:showAsAction="withText"
    android:title="@string/new_game"/>

</menu> 
```

这就是它在 android 4.x 下的样子

![在此处输入图像描述](../Images/675419989aeb0b892041ffcdff6b63b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:32:59.860

尝试在您的 onCreate 中的 super.onCreate(savedInstanceState) 之前使用 setTheme(R.style.Theme_Sherlock)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:33:52.680

`withText`描述了操作项应该如何显示，但您没有指定它应该显示*在哪里*`never`（因此它默认为并进入溢出菜单）。

如果您希望它显示在操作栏上，您应该指定`ifRoom`.

请参阅[`setShowAsAction`文档](http://developer.android.com/reference/android/view/MenuItem.html#setShowAsAction%28int%29)。

# java - 向图像添加幻灯片视图

> ID：12266277
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:02:51.567
> 
> 标签：java, android, eclipse

我正在尝试从 Internet 获取图像。`(i can't show my code here)`. 我将一些图像存储在一个列表中，并`imageview`在点击其他图像后将它们显示在每个图像中。

但是，我想制作这些图像的幻灯片。

这只是一个基本的“移至下一张图片” `sliding your finger on the screen`。与手机照片库中的相同。这只是在图像中导航。

目前，用户点击屏幕，图像将转到下一张。但是以这种方式我们无法转到上一个图像。这就是为什么我们需要将导航更改为在屏幕上滑动手指。

我已经使用过`View Flipper`，`ViewPager`但是每次从互联网上获取后，我想如何将图像添加到这些视图中。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:05:41.870

这里从下面的链接你可以下载它可以帮助你的例子

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# namespaces - 在引用 NSubstitute 的程序集中使用 DynamicProxy 类型时，如何解决“类型存在于两个程序集中”故障？

> ID：12266279
> 
> 赞同：3
> 
> 时间：2012-09-04T15:02:59.297
> 
> 标签：namespaces, assembly-resolution, dynamic-proxy, nsubstitute

我有一个使用[DynamicProxy](http://www.castleproject.org/projects/dynamicproxy) 3.1 进行运行时拦截的应用程序。我有一个使用[NSubstitute](https://github.com/nsubstitute/NSubstitute)进行模拟的测试程序集。我刚刚针对我完全引导`InterceptWith`的容器（用于拦截的结构映射）编写了一些“集成”测试，以便我可以断言从容器中出来的某些类型被正确代理。

```
[Subject(typeof(RobotBoard))]
public class When_resolving_an_intercepted_type : WithContainer<IRobotBoard>
{
    It should_have_recovery = () => Subject.ShouldHaveInterceptor<RecoveryInterceptor>();
}

public static class TestExtensions
{
    public static void ShouldHaveInterceptor<T>(this object obj)
        where T : IInterceptor
    {
        ((IProxyTargetAccessor)obj)
            .GetInterceptors()
            .ToList()
            .Exists(x => x is T)
            .ShouldBeTrue();
    }
} 
```

但是，我收到此错误，表明 DynamicProxy 引用也在*NSubstitute*程序集中！（它似乎被合并了）。

```
Error    11    MyCompany.MyModule.Specifications    D:\code\source\tests\When_resolving_an_intercepted_type.cs
The type 'Castle.DynamicProxy.IProxyTargetAccessor' exists in both 'd:\code\packages\Castle.Core.3.1.0\lib\net40-client\Castle.Core.dll' and 'd:\code\packages\NSubstitute.1.4.2.0\lib\NET40\NSubstitute.dll' 
```

无论如何围绕这个冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:34:21.583

您可以获取 NSubstitute[源代码](http://nsubstitute.github.com/)`ilmerge`并从项目的目标中删除命令。我已经在他们的存储库上打开了[issue 86](https://github.com/nsubstitute/NSubstitute/issues/86)来解决这个问题。

```
<exec command="&quot;$(MSBuildProjectDirectory)\..\..\ThirdParty\Ilmerge\ILMerge.exe&quot; /internalize:&quot;$(MSBuildProjectDirectory)\ilmerge.exclude&quot; /keyfile:$(AssemblyOriginatorKeyFile) /out:@(MainAssembly)  &quot;@(IntermediateAssembly)&quot; @(AssembliesToMerge->'&quot;%(FullPath)&quot;', ' ')" Condition=" '$(TargetFrameworkVersion)' == 'v3.5'" />
<exec command="&quot;$(MSBuildProjectDirectory)\..\..\ThirdParty\Ilmerge\ILMerge.exe&quot; /internalize:&quot;$(MSBuildProjectDirectory)\ilmerge.exclude&quot; /keyfile:$(AssemblyOriginatorKeyFile) /out:@(MainAssembly) /targetplatform:&quot;v4,$(FrameworkReferenceAssemblyPath).&quot; &quot;@(IntermediateAssembly)&quot; @(AssembliesToMerge->'&quot;%(FullPath)&quot;', ' ')" Condition=" '$(TargetFrameworkVersion)' == 'v4.0'" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:55:04.577

您可以尝试使用别名来引用 NSubstitute 或 DynamicProxy 程序集。

有关详细信息，请参阅[MSDN 如何：使用全局命名空间别名（C# 编程指南）](http://msdn.microsoft.com/en-us/library/c3ay4x3d%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T14:26:43.160

您可以使用此处解释的“外部别名”指令：http: [//blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx](http://blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx)

基本上

(1) 在VS中，转到FooVersion1的程序集参考，然后右键单击>属性。

(2) 将“别名”值更改为“FooVersion1”

(3) 在您的 .cs 文件中使用：

```
extern alias FooVersion1;
using foo = FooVersion1::FooVersion1;
...
var something = foo.FooClass(); 
```

# python - 我在哪里可以找到 python 的内置类的方法和属性？

> ID：12266284
> 
> 赞同：16
> 
> 时间：2012-09-04T15:03:26.637
> 
> 标签：python, exception, documentation

我试图找出python中所有异常类的母亲都带有哪些方法和属性：异常类。但是，我遇到了一些麻烦，因为官方文档似乎没有提供它。

我能找到的最好的是：[http](http://docs.python.org/library/exceptions.html) ://docs.python.org/library/exceptions.html ，但它只列出了内置的异常。

这是怎么回事？我已经习惯了 Java 和 PHP 文档，所有东西都摆在桌面上 :(

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T15:10:58.633

内置函数`dir`将给出一个包含对象的方法和属性的名称列表。

```
>>>print dir(Exception)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribut
e__', '__getitem__', '__getslice__', '__hash__', '__init__', '__new__', '__reduc
e__', '__reduce_ex__', '__repr__', '__setattr__', '__setstate__', '__sizeof__',
'__str__', '__subclasshook__', '__unicode__', 'args', 'message'] 
```

您还可以使用以下`help`方法获得帮助：`help(Exception)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T15:12:59.713

上只有一个有趣的属性`BaseException`，那就是`args`. 这是记录在案的，所以没有问题。

除了不应该直接调用`BaseException`的特殊 ( ) 方法之外，没有其他方法。`__`其中，`__str__`由句子记录

> 如果在此类的实例上调用`str()`or `unicode()`，则返回实例的参数表示形式，或者在没有参数时返回空字符串。

[还有一个公共属性，`message`，但如果您访问它，您将获得一个`DeprecationWarning`. 不推荐使用的属性并不总是记录在案，因为您不应该在新代码中使用它们。]

# python-2.7 - 如何在特定时间启动/停止脚本？

> ID：12266286
> 
> 赞同：1
> 
> 时间：2012-09-04T15:03:32.820
> 
> 标签：python-2.7

我编写了一个实时读取日志文件的脚本。我遇到的问题是该日志文件的位置每个午夜都会更改，相同的文件名不同的文件夹。

我可以重新生成文件位置路径，但我不知道如何启动/停止脚本以重新处理日志文件？现在我正在手工做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:07:18.673

我的建议是

```
(a) If it's a linux box, why not run a "cron" job (which will stop and start the script)
(b) Alternatively, in your code, detect when the file can no longer be read, then switch folders 
```

# wordpress - 带有服务区域占位符的郊区的 Google 地图

> ID：12266290
> 
> 赞同：0
> 
> 时间：2012-09-04T15:03:54.687
> 
> 标签：wordpress, google-maps

如何在我的网站中使用 Google 地图向网站用户显示与服务区域相关的郊区位置？

我基本上想通过使用谷歌地图，在特定郊区为可能覆盖的特定区域添加占位符，比如 10 个不同的郊区。

然后，我想在我的网站上放置一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:04:26.403

当我使用 WordPress 来托管我的谷歌地图时，我设法找到了一个不错的 WordPress 谷歌地图插件，让我实现了我所追求的目标。

对于其他感兴趣的人，我在这个 WordPress 网站上使用了以下插件：

[http://wordpress.org/extend/plugins/comprehensive-google-map-plugin/](http://wordpress.org/extend/plugins/comprehensive-google-map-plugin/)

# symfony - 如何在 nginx 的子目录中安装 symfony2 应用程序

> ID：12266297
> 
> 赞同：5
> 
> 时间：2012-09-04T15:04:22.263
> 
> 标签：symfony, configuration, nginx, url-routing

我需要在同一主机上但在不同的子目录（或位置块）上安装多个 symfony2 应用程序。

使用此配置，nginx 在尝试访问任何 url 时会抛出“找不到文件”或重定向循环消息。

**例子：**

```
/login -> /base/login
/app1 -> /base/app1
/app2 -> /base/app2 
```

**当前配置：**

```
root /base/default; #Points to an empty directory

# Login Application
location ^~ /login {
    alias /base/login/web;
    try_files $uri app_dev.php;
}

# Anything else
location ~ ^/([\w\-]+) {
    alias /base/$1/web;
    try_files $uri app_dev.php;
}

location / {
    # Redirect to the login
    rewrite ^ /login redirect;
}

# Handle PHP
location ~ \.php$ {
    include fastcgi_params;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_param PATH_INFO $fastcgi_path_info;
    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
    fastcgi_param HTTPS off;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T14:39:42.463

花了几个小时才找到这个（sf2 doc没有解释如何需要和解释cgi参数，你需要通过Request.php来理解），所以我分享这个。

这是一个配置，在目录 {subdir} 中使用 sf2 似乎没问题（并且禁止通过 Web 访问除 {subdir}/web/* 之外的其他文件）。

它适用于我的 php-fpm（套接字）。

当然，用你的 /path/from/docroot/to/symfony_root/ 替换 "{subdir}"

可以通过将“dev”添加到“{subdir}”来选择开发环境（因为 url 中的 app_dev.php 不再适用于此配置）

```
server {

  # general directives

  location ~ ^/{subdir}(/.*)$ {   
    try_files /{subdir}/web$1 @sf2;
  }
  location ~ ^/{subdir}dev(/.*)$ {
    expires off;
    try_files /{subdir}/web$1 @sf2dev;
  }
  location @sf2 {
    expires off;
    fastcgi_pass   {your backend};
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root/{subdir}/web/app.php;
    fastcgi_param SCRIPT_NAME       /{subdir}/app.php;
    fastcgi_param REQUEST_URI       /{subdir}$1;
  }
  location @sf2dev {
    expires off;
    fastcgi_pass   {your backend};
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root/{subdir}/web/app_dev.php;   
    fastcgi_param SCRIPT_NAME       /{subdir}dev/app_dev.php;       
    fastcgi_param REQUEST_URI       /{subdir}dev$1;     
  }

  # other location directives

  # if some others apps needs php, put your usual location to cactch php here

} 
```

我希望它有所帮助（并且没有任何错误配置），但没有任何保证......

当然，如果您不需要，您可以选择 prod/dev conf。您可以使用 var 并且只使用一个 @sf2 位置：

```
 set $sf2_root /{subdir};
  location ~ ^/{subdir}(/.*)$ {   
    set $sf2_prefix /{subdir};  
    set $sf2_ctrl app.php;
    try_files $sf2_root/web$1 @sf2;
  }
  location ~ ^/{subdir}dev(/.*)$ {
    set $sf2_prefix /{subdir}dev;
    set $sf2_ctrl app_dev.php;
    expires off;
    try_files $sf2_root/web$1 @sf2;
  }
  location @sf2 {
    expires off;
    fastcgi_pass   {your backend};
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$sf2_root/web/$sf2_ctrl;
    fastcgi_param SCRIPT_NAME       $sf2_prefix/$sf2_ctrl;
    fastcgi_param REQUEST_URI       $sf2_prefix$1;
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-01T23:48:56.923

这是“/front/”子目录中 symfony2 的一个更简单的配置。路线生成和资产工作正常。

## 配置

```
set $frontRoot /your/project/path/web;
set $sfApp app_dev.php; # Change to app.php for prod

location /front/ { # Static files
    root $frontRoot;
    rewrite ^/front/(.*)$ /$1 break;
    try_files $uri @sfFront;
}

location @sfFront { # Symfony
    fastcgi_pass phpfcgi;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $frontRoot/$sfApp;
    fastcgi_param SCRIPT_NAME /front/$sfApp;
    fastcgi_param REQUEST_URI /front$uri?$args;
    fastcgi_param HTTPS off;
} 
```

## 一些解释

诀窍是让 symfony 相信 app.php 脚本在 /front/ 中，因此它会使用该路径生成路由和资产。

我查看了 apache 为 MOD-PHP 提供的使用相同值的内容。

*   SCRIPT_FILENAME：PHP 文件的绝对路径。这里，总是`/your/project/path/app_dev.php`
*   REQUEST_URI：用户输入的 URI。在这里，我们必须在路径的开头手动重新添加`/front`，因为它已被文件服务位置（通过`rewrite ^/front/(.*)$ /$1 break;`）删除
*   SCRIPT_NAME：值为`/front/app_dev.php`。这是最重要的部分。Symfony 将删除 app_dev.php 并`/front`添加到它的所有路由中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-18T18:58:06.557

根据 dcaillibaud 的回答，这里有一个更通用的配置，允许在根 Web 路径下支持多个 Symfony（版本 2 或 3）项目，使用一些正则表达式魔法：

```
server {
    # other specific directives...

    root /var/www;

    location ~ ^/([^/]+)/dev(/.*)$ {
        location ~ \.php { deny all; }
        set $sf2_root /$1;
        set $sf2_prefix /$1/dev;
        set $sf2_ctrl app_dev.php;
        expires off;
        try_files $sf2_root/web$2 @sf2;
    }
    location ~ ^/([^/]+)(/.*)$ {
        location ~ \.php { deny all; }
        set $sf2_root /$1;
        set $sf2_prefix /$1;  
        set $sf2_ctrl app.php;
        try_files $sf2_root/web$2 @sf2;
    }
    location @sf2 {
        expires off;
        fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$sf2_root/web/$sf2_ctrl;
        fastcgi_param SCRIPT_NAME       $sf2_prefix/$sf2_ctrl;
        fastcgi_param REQUEST_URI       $sf2_prefix$2;
    }
} 
```

所以基本上，您将拥有： [www.domain.com/project](http://www.domain.com/project)指向您的 PROD 环境和 [www.domain.com/project/dev](http://www.domain.com/project/dev)指向您的 DEV 环境

请替换行：fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock; 使用适当的后端

这也可以很容易地适应新的 Symfony 项目，使用 index.php 脚本而不是 app(_dev).php，更改 web/public 路径，并设置一些 ENV 变量。

我认为这种方法可以更好地回答原始问题。

# javascript - (!~index) 比 (index === -1) 快吗？

> ID：12266301
> 
> 赞同：3
> 
> 时间：2012-09-04T15:04:32.960
> 
> 标签：javascript, performance, bitwise-operators

每隔一段时间，我就会遇到有人使用`(!~val)`而不是`(val === -1)`在从函数返回 -1 的情况下（例如`indexOf()`）。

对我来说，与 -1 比较相比，逻辑 NOT + 按位 NOT 语句似乎非常不可读。是否有足够的速度差异来保证使用一个而不是另一个？或者如果不是速度，我错过了使用按位 NOT 代替 === 的其他一些原因？

（如果这是一个重复，请提前道歉。但我找不到这个确切问题的答案。搜索“！~”在 SO 或 Google 中不太适用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:11:05.333

不，它们绝对不一样。

按位转换将执行隐式类型强制。=== 运算符检查类型是否相等。

所以这两个可以给出完全不同的结果。

```
var val = "-1";

(!~val) // true
(val === -1)  // false 
```

在这种情况下，我认为比较的意图和正确性远远超过任何性能考虑。确定您要比较的确切内容，并为工作使用正确的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:06:54.413

这是*有意义的*性能差异吗？可能不会，但这*完全*取决于虚拟机。

您总是可以使用[http://jsperf.com/之类的东西找到答案](http://jsperf.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:21:34.953

## 务实，[追求](http://en.wikipedia.org/wiki/The_Pragmatic_Programmer)可读性

两者都*f@$#*快速关闭。

如果您的脚本有性能问题，它**肯定不会归结为这个 boolean check**。但正如其他人所说，这两者并不（完全）相同。

# php - 在命令行中运行 Silex 应用程序

> ID：12266304
> 
> 赞同：9
> 
> 时间：2012-09-04T15:04:43.260
> 
> 标签：php, symfony, silex

我想在命令行中运行这样的[Silex 应用程序：](http://silex.sensiolabs.org/)

```
$app = new Silex\Application(); 

$app->get('/hello/{name}', function($name) use($app) { 
  return 'Hello '.$app->escape($name); 
}); 

$app->run(); 
```

我认为为此目的，我必须将[Symfony 的请求对象](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html) 作为第一个参数传递给 run 方法，但我不知道在哪里设置 Url-Path 以使其工作。有任何想法吗？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T20:34:55.083

这是一个简单的方法：

```
list($_, $method, $path) = $argv;
$request = Request::create($path, $method);
$app->run($request); 
```

然后在命令行上：

```
$ php console.php GET / 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T15:18:41.233

如果你想在命令行中使用 silex，你需要使用[控制台组件](http://symfony.com/doc/current/components/console.html)，这里有一个关于 silex 的教程：[http ://beryllium.ca/?p=481](http://beryllium.ca/?p=481)

然后你就可以调用一个 twig (symfony) 服务，并转发一个动作！

[http://symfony.com/doc/current/cookbook/console/console_command.html#getting-services-from-the-service-container](http://symfony.com/doc/current/cookbook/console/console_command.html#getting-services-from-the-service-container)

# jquery - jquery ajax getJson onSuccess 使用来自响应的函数

> ID：12266305
> 
> 赞同：0
> 
> 时间：2012-09-04T15:04:53.120
> 
> 标签：jquery, ajax, json

我有一个 js 脚本，只是获取一个基本的 Json 内容 page.js

```
{
"desc":"",
**"save":function(){alert(0);}**
} 
```

然后`success:function(data)`我只是想做`data.save()` 但是**永远不会调用onsuccess？**

**'完成'虽然但我的保存功能仍然没有被评估？**

我尝试将其写为字符串：`"save":"function(){alert(0);}"` 并将其应用于`eval`onSuccess ，但奇怪的是它说函数没有名称

**这是一个限制 - 我们不能将函数作为 json 响应对象的一部分传递吗？**

甚至更少执行它们？还是我只是做错了什么

感谢您的洞察力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:17:54.423

JSON 是一种纯数据定义语言，因此函数不能是 JSON 对象的一部分。看到[这个问题](https://stackoverflow.com/questions/2001449/is-it-valid-to-define-functions-in-json-results)。使用`eval()`可能会起作用，但我强烈建议您不要使用它，因为它是[unsafe](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)。我建议你在一个对象中实现你想要的行为，然后使用你从服务器获得的 JSON 设置这个对象的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:16:55.087

您可以 eval `alert(0)`，它应该可以工作（并将其设置为 JSON 中的“保存”字符串）

但是您应该避免使用 eval 作为解决方法

编辑：这已经在这里得到了回答：[在 JSON 结果中定义函数是否有效？](https://stackoverflow.com/questions/2001449/is-it-valid-to-define-functions-in-json-results)

# php - 获取它们之间的最大周期的两个连续日期

> ID：12266306
> 
> 赞同：10
> 
> 时间：2012-09-04T15:04:54.243
> 
> 标签：php, mysql

```
$a = 1950-05-01
$b = 1965-08-10
$c = 1990-12-30
$d = 1990-12-29
$e = 2012-09-03 
```

从按日期升序排序的 mysql 数据库中检索日期。

我需要一个 mysql 或 PHP 脚本来获取两个具有最大天数差异的***连续日期。***

说明：脚本要计算$a和$b、$b和$c、$c和$d、$d和$e、$e和$a之间的天数，然后输出天数相差最大的两个日期.

有没有办法用快速的 mysql/php 代码来做到这一点，或者我应该用下面的脚本做一些循环（在 stackoverflow 上的另一个问题上找到它）？

```
$now = time(); // or your date as well
$your_date = strtotime("2010-01-01");
$datediff = $now - $your_date;
echo floor($datediff/(60*60*24)); 
```

列出日期的查询：

```
SELECT date AS count FROM table WHERE column1 = 'YES' AND data BETWEEN 1950-01-01 AND 2012-09-04 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T16:06:45.697

## MySQL 解决方案

假设每个日期都有一个连续的`id`. 看到它[在行动](http://sqlfiddle.com/#!2/27a94/1)。

**架构**

```
CREATE TABLE tbl (
  id tinyint,
  dt date);

INSERT INTO tbl VALUES 
(1, '1950-05-01'),
(2, '1965-08-10'),
(3, '1990-12-30'),
(4, '1990-12-29'),
(5, '2012-09-03') 
```

**询问**

```
SELECT a.dt AS date1, 
    (SELECT dt FROM tbl WHERE id = a.id - 1) AS date2,
    DATEDIFF(a.dt, b.dt) AS diff
FROM tbl a
LEFT JOIN tbl b ON b.id = a.id -1
GROUP BY a.id
ORDER BY diff DESC
LIMIT 1 
```

**结果**

```
| 日期1 | 日期2 | 差异 |
-------------------------------------------------- ----------------------
| 1965 年 8 月 10 日 00:00:00-0700 | 1990 年 12 月 30 日 00:00:00-0800 | 9273 |
```

## PHP解决方案

```
$array = array('1950-05-01', '1965-08-10', '1990-12-30', '1990-12-29', '2012-09-03');

$maxDiff = 0;
$maxStart = NULL;
$maxEnd = NULL;

for($i = 1; $i <= count($array); $i++) {
    if(isset($array[$i])) {
        $diff = (strtotime($array[$i]) - strtotime($array[$i-1])) / (60*60*24);

        if($diff > $maxDiff) {
            $maxDiff = $diff;
            $maxStart = $array[$i-1];
            $maxEnd = $array[$i];
        }
    }
}

echo "The maximum days difference is between $maxStart and $maxEnd, with a difference of $maxDiff days"; 
```

**结果**

```
最大天数差异在 1965-08-10 和 1990-12-30 之间，相差 9273.0416666667 天
```

**更新 1**

关于 PHP 解决方案，如果您的日期不按顺序排列，您可以在循环之前使用`sort($array);`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T20:57:30.010

您可以使用此单语句解决方案：

```
SELECT   a.date date1,
         b.date date2,
         DATEDIFF(b.date, a.date) ddiff
FROM     (
         SELECT     @a_rn:=@a_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @a_rn:=0) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) a
JOIN     (
         SELECT     @b_rn:=@b_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @b_rn:=-1) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) b ON a.ascrank = b.ascrank
ORDER BY ddiff DESC
LIMIT    1 
```

* * *

# 查询细分

* * *

给定这个示例数据集：

```
CREATE TABLE tbl (
  date DATE
);

INSERT INTO tbl VALUES
('1950-05-01'),
('1965-08-10'),
('1990-12-30'),
('1990-12-29'),
('2012-09-03'); 
```

我们希望找到两个连续日期之间的最大差异（意思是，给定按升序排列的日期，找到日期与其前一个日期的最大天数差异*）*。

我们期望输出：

```
+-------------+------------+--------+
| date1       | date2      | ddiff  |
+-------------+------------+--------+
| 1965-08-10  | 1990-12-29 | 9272   |
+-------------+------------+--------+ 
```

因为最大的*连续*日期差异在`1965-08-10`和之间`1990-12-29`。

* * *

## 第1步：

为了使上一个和下一个日期彼此并排（为了方便该`DATEDIFF`功能），我们要做的第一件事是根据日期的升序为每个日期附加一个排名编号。

因为日期的顺序只能依赖于它们本身（不是自动递增的 ID 或排名字段等），所以我们必须自己手动计算排名。

我们通过使用 MySQL 变量来做到这一点。其他使用变量的解决方案要求您执行三个或更多单独的语句。我在查询本身（通过`CROSS JOIN`）中初始化变量的技术将其包含在单个语句中。

```
SELECT     @a_rn:=@a_rn+1 ascrank,
           date
FROM       tbl
CROSS JOIN (SELECT @a_rn:=0) var_init
WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
ORDER BY   date 
```

*渲染：*

```
+----------+------------+
| ascrank  | date       |
+----------+------------+
| 1        | 1950-05-01 |
| 2        | 1965-08-10 |
| 3        | 1990-12-29 |
| 4        | 1990-12-30 |
| 5        | 2012-09-03 |
+----------+------------+ 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/18eea/5)

请注意`WHERE`日期必须在两个指定日期之间的条件。您可以在此处插入脚本中的开始/结束日期参数。

* * *

## 第2步：

现在我们已经对每个日期进行了排名，现在我们需要根据`ascrank`字段对结果执行移位内连接，以便我们获得彼此相邻的连续日期。我们通过将结果包装在子选择中来做到这一点。

由于我们需要自连接派生结果，因此我们必须重复上述步骤，只需稍微调整一下参数：

```
SELECT   *
FROM     (
         SELECT     @a_rn:=@a_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @a_rn:=0) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) a
JOIN     (
         SELECT     @b_rn:=@b_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @b_rn:=-1) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) b ON a.ascrank = b.ascrank 
```

*渲染：*

```
+----------+-------------+----------+------------+
| ascrank  | date        | ascrank  | date       | 
+----------+-------------+----------+------------+
| 1        | 1950-05-01  | 1        | 1965-08-10 | 
| 2        | 1965-08-10  | 2        | 1990-12-29 | 
| 3        | 1990-12-29  | 3        | 1990-12-30 | 
| 4        | 1990-12-30  | 4        | 2012-09-03 | 
+----------+-------------+----------+------------+ 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/18eea/6)

“稍微调整的参数”只是`@b_rn`第二个子选择中的ascrank变量（）从而`-1`不是开始`0`。这样，join 条件就以升序`a.ascrank = b.ascrank`加入*下一个日期。*我们也可以保持两个变量在 处初始化`0`，但在 的条件下加入`a.ascrank = b.ascrank-1`，这将呈现相同的结果。

**但是等等，那个日期发生了什么事`5`？**由于那是订单中的最后一个日期，因此在它之后没有日期可以取差，所以它不需要出现在结果的左侧，只需要与它的前一个日期进行比较.

* * *

## 第 3 步：

现在我们有了彼此相邻的连续日期，我们可以获取两者`DATEDIFF()`之间的日期差（通过）：

```
SELECT   a.date date1,
         b.date date2,
         DATEDIFF(b.date, a.date) ddiff
FROM     (
         SELECT     @a_rn:=@a_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @a_rn:=0) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) a
JOIN     (
         SELECT     @b_rn:=@b_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @b_rn:=-1) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) b ON a.ascrank = b.ascrank 
```

*渲染：*

```
+-------------+------------+--------+
| date1       | date2      | ddiff  |
+-------------+------------+--------+
| 1950-05-01  | 1965-08-10 | 5580   |
| 1965-08-10  | 1990-12-29 | 9272   |
| 1990-12-29  | 1990-12-30 | 1      |
| 1990-12-30  | 2012-09-03 | 7918   |
+-------------+------------+--------+ 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/18eea/8)

* * *

## 第4步：

现在选择最大值很简单`ddiff`。我们通过`ORDER BY / LIMIT 1`在现场使用一种技术来做到这一点`ddiff`：

```
SELECT   a.date date1,
         b.date date2,
         DATEDIFF(b.date, a.date) ddiff
FROM     (
         SELECT     @a_rn:=@a_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @a_rn:=0) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) a
JOIN     (
         SELECT     @b_rn:=@b_rn+1 ascrank,
                    date
         FROM       tbl
         CROSS JOIN (SELECT @b_rn:=-1) var_init
         WHERE      date BETWEEN '1950-05-01' AND '2012-09-04'
         ORDER BY   date
         ) b ON a.ascrank = b.ascrank
ORDER BY ddiff DESC
LIMIT    1 
```

*渲染：*

```
+-------------+------------+--------+
| date1       | date2      | ddiff  |
+-------------+------------+--------+
| 1965-08-10  | 1990-12-29 | 9272   |
+-------------+------------+--------+ 
```

[*最终结果的 SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/18eea/4)

我们已经得出了最终结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T18:02:13.453

我正在使用 njk 的表方案 - 并在我的 mysql 数据库上检查它。

**方案**

```
CREATE TABLE tbl (
  id tinyint,
  dt date);

INSERT INTO tbl VALUES 
(1, '1950-05-01'),
(2, '1965-08-10'),
(3, '1990-12-30'),
(4, '1990-12-29'),
(5, '2012-09-03') 
```

**询问**

```
SELECT a.id, b.id, ABS(DATEDIFF(a.dt, b.dt)) AS ddiff
 FROM tbl AS a
 JOIN tbl AS b ON (a.id = (b.id + 1)) OR (a.id = (SELECT id FROM tbl ORDER BY id ASC LIMIT 1) AND b.id = (SELECT id FROM tbl ORDER BY id DESC LIMIT 1))
 ORDER BY ddiff DESC
 LIMIT 1 
```

我将所有连续的行`(a.id = (b.id + 1))`和第一行与最后一行连接起来，如下所示：`(a.id = (SELECT id FROM tbl ORDER BY id ASC LIMIT 1) AND b.id = (SELECT id FROM tbl ORDER BY id DESC LIMIT 1))`这看起来很奇怪，但效果很好。如果你只有你提到的 5 行，这将是

```
 SELECT a.id, b.id, ABS(DATEDIFF(a.dt, b.dt)) AS ddiff
  FROM tbl AS a
  JOIN tbl AS b ON (a.id = (b.id + 1)) OR (a.id = 1 AND b.id = 5)
  ORDER BY ddiff DESC
  LIMIT 1 
```

编辑：结果是 1=$a 和 5=$e

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T06:17:58.623

试试这个查询 -

```
SELECT
  t1.dt,
  @dt_next := (SELECT dt FROM tbl WHERE dt > t1.dt ORDER BY dt LIMIT 1) dt_next,
  DATEDIFF(@dt_next, t1.dt) max_diff
FROM tbl t1
ORDER BY max_diff DESC LIMIT 1;

+------------+------------+----------+
| dt         | dt_next    | max_diff |
+------------+------------+----------+
| 1965-08-10 | 1990-12-29 |     9272 |
+------------+------------+----------+ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T15:08:11.323

举个例子：

```
mysql> SELECT MIN(version) AS version FROM schema_migrations UNION SELECT MAX(version) FROM schema_migrations;
+----------------+
| version        |
+----------------+
| 20120828071352 |
| 20120830100526 |
+----------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T15:11:33.007

如果日期在表上，您可以执行类似的操作（这不是 T-SQL，它只是一种算法，要获取 previous_date，您需要使用 aclias X 在同一张表上运行另一个 select top 1 例如 where X.日期<=日期）

```
select date, datediff(date, previous_date) 
```

并按第二列 desc 排序，因此第一行将是您想要的日期

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-07T17:43:33.913

从创建一个结果集的子查询开始，该结果集具有按升序排列的日期和一个从 1 开始并以 1 递增的 INT 字段 (dateOrder)。

```
SET @a := 0;
SELECT date, (@a:=@a+1) AS dateOrder FROM dateTable ORDER BY date 
```

现在我们可以通过使用 a.dateOrder = b.dateOrder -1 将此结果集连接到其自身的另一个副本来获得连续日期。在该结果集中，每一行都包含来自原始表的一对连续日期，并且很容易计算差异并对结果集进行排序以找到最大的差异。

```
SET @a := 0; SET @b := 0;
SELECT a.date as firstDate, b.date as secondDate, 
  datediff(b.date, a.date) AS difference FROM (
    SELECT date, (@a:=@a+1) AS dateOrder FROM dateTable ORDER BY date ) a JOIN (
    SELECT date, (@b:=@b+1) AS dateOrder FROM dateTable ORDER BY date ) b 
  ON a.dateOrder = b.dateOrder - 1
ORDER BY difference desc; 
```

您可以在查询末尾放置一个“limit 1”子句，以仅获取第一行，它具有最大的“差异”值。请注意，您必须使用两个不同的变量来为两个子查询生成日期顺序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-12T22:36:47.167

您返回日期值的查询是非确定性的……如果`ORDER BY`您的查询中没有子句，则无法保证这些行将以任何特定顺序返回。

在 MySQL 中，查询可以返回您指定的结果集。这是一种方法：

```
SELECT ABS(DATEDIFF(d.mydate,@prev_date))  AS days_diff
     , DATE_ADD(@prev_date,INTERVAL 0 DAY) AS date1
     , @prev_date := d.mydate              AS date2
  FROM ( SELECT @prev_date := NULL) i
  JOIN ( SELECT d1.*
           FROM (            -- query to return rows in a specific order
                             SELECT mydate       
                               FROM mytable3 
                              WHERE 1
                              ORDER BY foo
                ) d1
          UNION ALL 
         SELECT d2.*
           FROM (            -- query to return rows in a specific order (again)
                             SELECT mydate
                               FROM mytable3 
                              WHERE 1
                              ORDER BY foo
                   LIMIT 1
                 ) d2
       ) d
 ORDER BY days_diff DESC 
```

**笔记：**

仅当您想考虑日期之间的天数时才需要该`ABS()`函数，无论第一个日期是在第二个日期之前还是之后，因为该`DATEDIFF`函数可以返回负值。

`DATE_ADD( ,INTERVAL 0 DAY)`用户变量周围的函数只是`@prev_date`将返回值转换为数据类型 DATE。`STR_TO_DATE( ,'%Y-%m-%d') 函数也可以工作。（不同之处在于 DATE_ADD 函数将使用 DATE、DATETIME 和 TIMESTAMP 列，而无需指定格式字符串以包括小时、分钟、秒。）

内联视图别名为`d1`并`d2`包含查询，该查询以您希望比较行（日期）的指定顺序返回日期列表。如果要保证查询结果一致，则需要确定这些行的顺序.

别名为 as 的内联视图`d2`中的查询与 中的查询相同`d1`，除了添加了 LIMIT 1 子句。因为您指定要将 $e 与 $a 进行比较，所以我们将查询中的第一行“附加”到末尾，以便我们可以将第一行与查询中的最后一行进行比较。

结果集中的`date1`列不是 DATE 数据类型，但可以轻松转换为 DATE

如果您希望从两行返回其他列以及日期值，则可以使用相同的方法轻松处理。`d1`中的查询`d2`只需要返回附加列：

```
SELECT ABS(DATEDIFF(d.mydate,@prev_date)) AS days_diff
     , @prev_foo                          AS foo1
     , @prev_date                         AS date1
     , @prev_foo  := d.foo                AS foo2
     , @prev_date := d.mydate             AS date2
  FROM ( SELECT @prev_date := NULL, @prev_foo := NULL) i
  JOIN ( SELECT d1.*
           FROM (            -- query to return rows in a specific order
                             SELECT mydate, foo
                               FROM mytable3 
                              WHERE 1
                              ORDER BY foo
                ) d1
          UNION ALL 
         SELECT d2.*
           FROM (            -- query to return rows in a specific order (again)
                             SELECT mydate, foo
                               FROM mytable3 
                              WHERE 1
                              ORDER BY foo
                   LIMIT 1
                 ) d2
       ) d
 ORDER BY days_diff DESC
 LIMIT 1 
```

* * *

要设置测试用例：

```
CREATE TABLE `mytable3` (`foo` varchar(1), `mydate` date);

INSERT INTO mytable3 VALUES 
('a','1950-05-01'),
('b','1965-08-10'),
('c','1990-12-30'),
('d','1990-12-29'),
('e','2012-09-03'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-09T07:13:01.523

这是PHP解决方案

```
$dates  = array('1970-05-01', '1975-08-10', '1990-12-30', '1990-12-29', '2012-09-03');
$sorted = array();

foreach($dates as $i => $date) {
    $date2 = isset($dates[$i+1]) ? $dates[$i+1] : $dates[0];
    $diff  = (strtotime($date2) - strtotime($date))/(60 * 60 * 24);

    $sorted[abs($diff)] = array('start' => $date, 'end' => $date2);
}

ksort($sorted);

$result = end($sorted); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-12T17:14:57.127

我会使用一些简单的 PHP，因为它既快速又整洁：

```
function get_the_two_consecutive_dates_with_the_maximum_days_difference($dates) {
    foreach ($dates as $i => $date) {

        $previousDate = $dates[$i - 1];
        if (!$previousDate) continue;

        $diff = strtotime($date) - strtotime($previousDate);
        if ($maxDiff < $diff) {
            $maxDiff = $diff;
            $dateA = $previousDate;
            $dateB = $date;
        }

    }
    return array($dateA, $dateB, $maxDiff);

}

// Usage
$arr = Array ( '2012-01-01', '2012-02-01', '2012-03-01', '2012-04-12', 
               '2012-05-10', '2012-08-05', '2012-09-01', '2012-09-04' );

var_dump(get_the_two_consecutive_dates_with_the_maximum_days_difference($arr)); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-13T16:05:50.973

我已经使用 PHP 的[DateTime](http://www.php.net/datetime)类寻求解决方案。原因是 strtotime() 无法指定传递给它的日期格式。在我看来，这会对将返回的内容产生歧义，因此我已经停止使用它来支持 DateTime。

由于您提供的示例日期顺序不正确，我假设它们需要先排序。以下功能实现了这一点： -

```
/**
 * Sorts an array of dates in given format into date order, oldest first
 * @param array $dates
 * @param type $format Optional format of dates.
 * 
 * @return array with dates in correct order.
 */
function sortArrayOfDates(array $dates, $format = 'Y-m-d')
{
    $result = array();
    foreach($dates as $date){
        $timeStamp = DateTime::createFromFormat($format, $date)->getTimestamp();
        $result[$timeStamp] = $date;
    }
    sort($result);
    return $result;
} 
```

现在我们可以编写一个函数来完成这项工作：-

```
/**
 * Returns the longest gap between sets of dates
 * 
 * @param array $dates
 * @param string Optional. Format of dates.
 * 
 * @return array Containing the two dates with the longest interval and the length of the interval in days.
 */
private function longestGapBetweenDates(array $dates, $format = 'Y-m-d')
{
    $sortedDates = sortArrayOfDates($dates);
    $maxDiff = 0;
    $result = array();
    for($i = 0; $i < count($dates) - 1; $i++){
        $firstDate = DateTime::createFromFormat($format, $sortedDates[$i]);
        $secondDate = DateTime::createFromFormat($format, $sortedDates[$i + 1]);
        $diff = $secondDate->getTimestamp() - $firstDate->getTimestamp();
        if($diff > $maxDiff){
            $maxDiff = $diff;
            $result = array($firstDate->format($format), $secondDate->format($format), $firstDate->diff($secondDate)->days);
        }
    }
    return $result;
} 
```

使用您的示例列表：-

```
$a = '1950-05-01';
$b = '1965-08-10';
$c = '1990-12-30';
$d = '1990-12-29';
$e = '2012-09-03';

var_dump(longestGapBetweenDates(array($a, $b, $c, $d, $e))); 
```

输出：-

```
array
  0 => string '1965-08-10' (length=10)
  1 => string '1990-12-29' (length=10)
  2 => int 9272 
```

作为奖励，我的函数也为您提供了两个日期之间的天数。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-09-14T11:25:30.510

```
 Select t1.date as 'Date1', t2.date AS 'Date2', DATEDIFF(t2, t1) as 'DateDiff'
From    YourTable t1
    Left outer join YourTable t2
        ON     t1.Id <= t2.Id 
            OR (t1.Id = (Select Max(Id) From YourTable) AND t2.Id=(SELECT Min(Id) From YourTable) )
    Left outer join YourTable t3
        ON t1.Id < t3.Id AND t3.Id < t2.Id
    WHERE t3.Id IS NULL
    ORDER BY 'DateDiff' DESC
    Limit 1,1 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-09-12T10:07:52.283

要解决此问题，请使用具有此功能的数组：

```
<?php 
$date_array = array('1950-05-01','1965-08-10','1990-12-30','1990-12-29','2012-09-03');

function get_max_difference_dates($dates=array()){
    if(!count($dates)){
        return false;
    }
    $max_dates_diff = 0;
    $max_dates_diff_index = 0;
    for($i=0;$i<count($dates)-1;$i++){
        $temp_diff = strtotime($dates[$i+1]) - strtotime($dates[$i]);
        if($temp_diff>$max_dates_diff){
            $max_dates_diff = $temp_diff;
            $max_dates_diff_index = $i;
        }
    }
    return $max_dates_diff_index;
}

var_dump(get_max_difference_dates($date_array)); 
```

根据我的汇编，上述答案是`"1"`。

在索引之后，您可以通过返回的索引获取日期并向其添加一个。

```
$indx = get_max_difference_dates($date_array);
$date1 = $date_array[$indx];
$date2 = $date_array[$indx+1]; 
```

# colors - 如何更改 rdlc 文本字段的颜色？

> ID：12266308
> 
> 赞同：2
> 
> 时间：2012-09-04T15:05:07.067
> 
> 标签：colors, expression, rdlc

我正在使用 rdlc 报告。

我有一个文本字段“姓氏”和一个布尔字段“销售”。

根据布尔字段的值，我希望文本为红色或黑色。

查看示例我应该更改文本颜色。

但是当我选择“表达式”时对话框上的标签显示“设置表达式：值”，但我认为我应该能够选择设置颜色表达式。

我有以下表达式，但它只在文本框中显示文本“黑色”和“红色”。

```
=IIF(Fields!sales.Value,"Black","Red") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T12:00:42.893

好像您正在表达文本框的值。而是把字体颜色

```
=IIf(fields!sales.Value = "true","Black","Blue") 
```

为 fontcolor 文本框属性设置表达式 --> 颜色 --> 表达式。

请让我知道这对你有没有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T22:04:44.140

```
IIF(Fields!MiCampo.value = "Bueno","Green","Red") 
```

其他解决方案...

```
Fields!MiCampo.value  TYPE string
VALUE IS = "Orange" 
```

在表达...

```
=Fields!MiCampo.value.ToString() 
```

# c++ - gsoap wsdl2h 在 wcf wsdl 文件上失败

> ID：12266309
> 
> 赞同：3
> 
> 时间：2012-09-04T15:05:15.240
> 
> 标签：c++, linux, wcf, gsoap

我在一个 wsdl 文件上使用 gsoap 工具 wsdl2h，该文件是在 Visual Studio 中为 WCF 服务添加服务引用时由 Windows 客户端自动生成的。

```
wsdl2h -o service.h service.wsdl

**  The gSOAP WSDL/Schema processor for C and C++, wsdl2h release 2.8.9
**  Copyright (C) 2000-2012 Robert van Engelen, Genivia Inc.
**  All Rights Reserved. This product is provided "as is", without any warranty.
**  The wsdl2h tool is released under one of the following two licenses:
**  GPL or the commercial license by Genivia Inc. Use option -l for details.

Saving service.h

Cannot open file 'typemap.dat'
Problem reading type map file 'typemap.dat'.
Using internal type definitions for C++ instead.

Reading file 'service.wsdl'...

Connecting to 'http://tempuri.org/' to retrieve schema...
Connected, receiving...
Redirected to 'http://www.tempuri.org/'...

Connecting to 'http://www.tempuri.org/' to retrieve schema...
Connected, receiving...

An error occurred while parsing schema from ''
Error 3 fault: SOAP-ENV:Client [no subcode]
"Validation constraint violation: tag name or namespace mismatch in element 'html'"
Detail: [no detail]
HTTP/1.1 200 OK
Date: Tue, 04 Sep 2012 15:01:27 GMT
Server: Apache
Last-Modified: Sat, 01 Sep 2012 12:46:28 GMT
ETag: "16ca6ab-441-4c0d3100"
Accept-Ranges: bytes
Content-Length: 1089
Connection: close
Content-Type: text/html; charset=UTF-8

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
<!-- ** HERE ** -->

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tempuri</title>
<link rel="stylesheet" href="/style.css" type="text/css" media="screen" /></head>

<body>

<div id="wrap">
<div id="topnavbar">
</div>

<div id="header">
        <div class="headerleft">
                <h4><a href="/">Tempuri</a></h4>
        </div>
</div>

<div id="navbar">

<div id="navbarleft">
<ul id="nav">
<li><a href="/">Startseite</a></li></ul>
</div>
<div id="navbarright">
</div>

</div>
<div class="clear"></div>

<div id="content">

<div id="sidebar">

        <ul id="sidebarwidgeted">
                                <li class="widget widget_recent_entries"><span>MenÃ¼</span><ul>
                                <li><a href="/">Startseite</a></li></ul>
                </li></ul>
</div>
<div id="contentleft"><div class="postarea">
</div></div>
</div>
<div class="clear"></div>

<div id="footer">

        <p></p>

</div>
</div></body>
</html

If this schema namespace is considered "built-in", then add
  namespaceprefix = <namespaceURI>
to typemap.dat. 
```

这个 wsdl 文件有什么问题？？？我必须以某种方式修改它吗？？？

这是 wsdl 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="TycoFileDownload" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsp:Policy wsu:Id="WSHttpBinding_ITycoFileDownload_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SymmetricBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <wsp:Policy>
            <sp:ProtectionToken>
              <wsp:Policy>
                <sp:SecureConversationToken sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                  <wsp:Policy>
                    <sp:RequireDerivedKeys />
                    <sp:BootstrapPolicy>
                      <wsp:Policy>
                        <sp:SignedParts>
                          <sp:Body />
                          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
                          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
                        </sp:SignedParts>
                        <sp:EncryptedParts>
                          <sp:Body />
                        </sp:EncryptedParts>
                        <sp:SymmetricBinding>
                          <wsp:Policy>
                            <sp:ProtectionToken>
                              <wsp:Policy>
                                <sp:SpnegoContextToken sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                                  <wsp:Policy>
                                    <sp:RequireDerivedKeys />
                                  </wsp:Policy>
                                </sp:SpnegoContextToken>
                              </wsp:Policy>
                            </sp:ProtectionToken>
                            <sp:AlgorithmSuite>
                              <wsp:Policy>
                                <sp:Basic256 />
                              </wsp:Policy>
                            </sp:AlgorithmSuite>
                            <sp:Layout>
                              <wsp:Policy>
                                <sp:Strict />
                              </wsp:Policy>
                            </sp:Layout>
                            <sp:IncludeTimestamp />
                            <sp:EncryptSignature />
                            <sp:OnlySignEntireHeadersAndBody />
                          </wsp:Policy>
                        </sp:SymmetricBinding>
                        <sp:Wss11>
                          <wsp:Policy />
                        </sp:Wss11>
                        <sp:Trust10>
                          <wsp:Policy>
                            <sp:MustSupportIssuedTokens />
                            <sp:RequireClientEntropy />
                            <sp:RequireServerEntropy />
                          </wsp:Policy>
                        </sp:Trust10>
                      </wsp:Policy>
                    </sp:BootstrapPolicy>
                  </wsp:Policy>
                </sp:SecureConversationToken>
              </wsp:Policy>
            </sp:ProtectionToken>
            <sp:AlgorithmSuite>
              <wsp:Policy>
                <sp:Basic256 />
              </wsp:Policy>
            </sp:AlgorithmSuite>
            <sp:Layout>
              <wsp:Policy>
                <sp:Strict />
              </wsp:Policy>
            </sp:Layout>
            <sp:IncludeTimestamp />
            <sp:EncryptSignature />
            <sp:OnlySignEntireHeadersAndBody />
          </wsp:Policy>
        </sp:SymmetricBinding>
        <sp:Wss11 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <wsp:Policy />
        </sp:Wss11>
        <sp:Trust10 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <wsp:Policy>
            <sp:MustSupportIssuedTokens />
            <sp:RequireClientEntropy />
            <sp:RequireServerEntropy />
          </wsp:Policy>
        </sp:Trust10>
        <wsaw:UsingAddressing />
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="WSHttpBinding_ITycoFileDownload_GetUpdate_Input_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
        </sp:SignedParts>
        <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
        </sp:EncryptedParts>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="WSHttpBinding_ITycoFileDownload_GetUpdate_output_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
        </sp:SignedParts>
        <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
        </sp:EncryptedParts>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="WSHttpBinding_ITycoFileDownload_GetLicenseAgreement_Input_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
        </sp:SignedParts>
        <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
        </sp:EncryptedParts>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsp:Policy wsu:Id="WSHttpBinding_ITycoFileDownload_GetLicenseAgreement_output_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
          <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
          <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
        </sp:SignedParts>
        <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
          <sp:Body />
        </sp:EncryptedParts>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsdl:types>
    <xsd:schema targetNamespace="http://tempuri.org/Imports">
      <xsd:import namespace="http://tempuri.org/" />
      <xsd:import namespace="http://schemas.microsoft.com/2003/10/Serialization/" />
      <xsd:import namespace="http://schemas.microsoft.com/Message" />
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="ITycoFileDownload_GetUpdate_InputMessage">
    <wsdl:part name="parameters" element="tns:GetUpdate" />
  </wsdl:message>
  <wsdl:message name="ITycoFileDownload_GetUpdate_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetUpdateResponse" />
  </wsdl:message>
  <wsdl:message name="ITycoFileDownload_GetLicenseAgreement_InputMessage">
    <wsdl:part name="parameters" element="tns:GetLicenseAgreement" />
  </wsdl:message>
  <wsdl:message name="ITycoFileDownload_GetLicenseAgreement_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetLicenseAgreementResponse" />
  </wsdl:message>
  <wsdl:portType name="ITycoFileDownload">
    <wsdl:operation name="GetUpdate">
      <wsdl:input wsaw:Action="http://tempuri.org/ITycoFileDownload/GetUpdate" message="tns:ITycoFileDownload_GetUpdate_InputMessage" />
      <wsdl:output wsaw:Action="http://tempuri.org/ITycoFileDownload/GetUpdateResponse" message="tns:ITycoFileDownload_GetUpdate_OutputMessage" />
    </wsdl:operation>
    <wsdl:operation name="GetLicenseAgreement">
      <wsdl:input wsaw:Action="http://tempuri.org/ITycoFileDownload/GetLicenseAgreement" message="tns:ITycoFileDownload_GetLicenseAgreement_InputMessage" />
      <wsdl:output wsaw:Action="http://tempuri.org/ITycoFileDownload/GetLicenseAgreementResponse" message="tns:ITycoFileDownload_GetLicenseAgreement_OutputMessage" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="WSHttpBinding_ITycoFileDownload" type="tns:ITycoFileDownload">
    <wsp:PolicyReference URI="#WSHttpBinding_ITycoFileDownload_policy" />
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetUpdate">
      <soap12:operation soapAction="http://tempuri.org/ITycoFileDownload/GetUpdate" style="document" />
      <wsdl:input>
        <wsp:PolicyReference URI="#WSHttpBinding_ITycoFileDownload_GetUpdate_Input_policy" />
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <wsp:PolicyReference URI="#WSHttpBinding_ITycoFileDownload_GetUpdate_output_policy" />
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetLicenseAgreement">
      <soap12:operation soapAction="http://tempuri.org/ITycoFileDownload/GetLicenseAgreement" style="document" />
      <wsdl:input>
        <wsp:PolicyReference URI="#WSHttpBinding_ITycoFileDownload_GetLicenseAgreement_Input_policy" />
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <wsp:PolicyReference URI="#WSHttpBinding_ITycoFileDownload_GetLicenseAgreement_output_policy" />
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="TycoFileDownload">
    <wsdl:port name="WSHttpBinding_ITycoFileDownload" binding="tns:WSHttpBinding_ITycoFileDownload">
      <soap12:address location="http://localhost:8733/Design_Time_Addresses/TycoUpdateServerLibrary/Service1/" />
      <wsa10:EndpointReference>
        <wsa10:Address>http://localhost:8733/Design_Time_Addresses/TycoUpdateServerLibrary/Service1/</wsa10:Address>
        <Identity xmlns="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity">
          <Dns>localhost</Dns>
        </Identity>
      </wsa10:EndpointReference>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:07:48.430

我已将以下内容添加到`<types>`

```
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
```

现在它会生成一个头文件。

# php - Php.Advance 每周日历一周

> ID：12266310
> 
> 赞同：1
> 
> 时间：2012-09-04T15:05:23.010
> 
> 标签：php

> **可能重复：**
> [在 PHP 中获取下一个/上一个 ISO 周和年](https://stackoverflow.com/questions/3625484/get-next-previous-iso-week-and-year-in-php)

我正在尝试编写一个脚本，该脚本将在表格中显示一周中的几天，如果单击按钮，它将提前一周。我已经设法让它工作到年底，然后日期都出错了。他是我目前所拥有的...

```
 <?
     if(isset($_POST['add_week'])){
     $week = date('d-m-Y', strtotime($_POST['last_week']));
     $new_week =  strtotime ( '+1 week' , strtotime ( $week ) ) ;
     $new_week = date('d-m-Y', $new_week);

     $week_number = date("W", strtotime( $new_week));
     $year = date("Y", strtotime( $new_week));
  }else{

         $week_number = date("W");
         $year = date("Y");
  }

  if($week_number < 10){
      $week_number = "0".$week_number;
   }

  $week_start = date('d-m-Y', strtotime($year."W".$week_number,0));
 echo $week.' '.$new_week.' '.$week_number;
?>

<table name="week">
<tr>
        <?
            for($day=1; $day<=7; $day++)
  {
echo '<td>';
    echo date('d-m-Y', strtotime($year."W".$week_number.$day))." | \n";
echo '</td>';
  }
?>
</tr>
<tr>
 <form name="move_weeks" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
 <input type="hidden" name="last_week" value="<? echo $week_start; ?>" />
  <td colspan="7"><input type="submit" name="back_week" value="back_week" />
 <input ype="submit" name="add_week" value="add_week" />
</td>
</form>
</tr>
</table> 
```

一些值已被回显，因此我可以检查正在传递的值是否正确，我知道我可能已经采取了我不需要的额外步骤，但我对此相当陌生，并且想让代码更容易在我让它工作的时候跟随它。正如我所说，添加按钮在新年到来之前一直有效。

谢谢

好的，取得了一些进步，直到 2012 年都可以正常工作，然后它再次运行到 2012 年，而不是从 2013 年开始

```
 <?
if(isset($_POST['add_week'])){
    $week = date('d-m-Y', strtotime($_POST['last_week']));
    $new_week =  strtotime ( '+1 week' , strtotime ( $week ) ) ;
    $new_week = date('d-m-Y', $new_week);

    $week_number = date("W", strtotime( $new_week));
    $year = date("Y", strtotime( $new_week));
}else if(isset($_POST['back_week'])){
    $week = date('d-m-Y', strtotime($_POST['last_week']));
    $new_week =  strtotime ( '-1 week' , strtotime ( $week ) ) ;
    $new_week = date('d-m-Y', $new_week);

    $week_number = date("W", strtotime( $new_week));
    $year = date("Y", strtotime( $new_week));
}else{

$week_number = date("W");
$year = date("Y");
}
/*if($week_number < 10){
   $week_number = "0".$week_number;
}*/
$week_start = date('d-m-Y', strtotime($year."W".$week_number,0));
echo $week.' '.$new_week.' '.$week_number;
?>

<table name="week">
    <tr>
<?
for($day=1; $day<=7; $day++)
{
    echo '<td>';
    echo date('d-m-Y', strtotime($year."W".$week_number.$day))." | \n";
    echo '</td>';
}
?>
</tr>
<tr>
<form name="move_weeks" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="hidden" name="last_week" value="<? echo $week_start; ?>" />
<td colspan="7"><input type="submit" name="back_week" value="back_week" /><input type="submit" name="add_week" value="add_week" />
</td>
</form>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:27:55.847

在我看来，您将更好地根据 unix 时间戳值进行所有计算，然后仅在输出需要时转换为字符串。这样您就不必处理周数问题（即第 0 周），您不限于将星期一作为每周的第一天（作为计算的基础`date("W")`），并且您不会有做一堆黑客来寻找边缘条件。

所以假设`$_POST['last_week']`你的 dmY 格式是这样的：

```
if(isset($_POST['add_week'])){
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts + (3600 * 24 * 7);
} else if (isset($_POST['back_week'])) {
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts - (3600 * 24 * 7);
} else {
    $display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24;
}

$week_start = date('d-m-Y', $display_week_ts); 
```

对于您循环显示一周的部分，您可以使用以下内容：

```
for ($i = 0; $i < 7; $i++) {
    $current_day_ts = $display_week_ts + ($i * 3600 *24);
    echo date('d-m-Y', $current_day_ts); 
} 
```

# android - 将android屏幕方向锁定为横向

> ID：12266315
> 
> 赞同：1
> 
> 时间：2012-09-04T15:05:27.177
> 
> 标签：android, screen-orientation

我正在开发一个 android 应用程序，其一个功能是将屏幕方向锁定为 Landscape，我想将此方向更改应用于手机中的所有 android 应用程序。我正在使用此代码

```
private void lockScreenOrientation() {
if (!mScreenOrientationLocked) {
    final int orientation = getResources().getConfiguration().orientation;
    final int rotation = getWindowManager().getDefaultDisplay().getOrientation();
    if (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_90) {
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }
        else if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        }
    }
    else if (rotation == Surface.ROTATION_180 || rotation == Surface.ROTATION_270) {
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);
        }
        else if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);
        }
    }

    mScreenOrientationLocked = true;
}
}

private void unlockScreenOrientation() {
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
 mScreenOrientationLocked = false;
} 
```

但这是临时更改，不会对所有应用程序生效，有人知道将锁定方向应用于所有应用程序的方法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:30:38.257

像您链接的应用程序通过修改与旋转相关的全局系统设置值来完成此操作。查看[Settings.System](https://developer.android.com/reference/android/provider/Settings.System.html)类，了解应用程序可用的常量。具体来说，`ACCELEROMETER_ROTATION`and`USER_ROTATION`值可能会引起人们的兴趣。

您还需要在清单中声明权限`android.permission.WRITE_SETTINGS`以及可能的`android.permission.WRITE_SECURE_SETTINGS`权限。

# javascript - 将 div 内容复制到 Textarea 或具有相同字体系列样式的文本

> ID：12266320
> 
> 赞同：0
> 
> 时间：2012-09-04T15:05:35.737
> 
> 标签：javascript, html

我有某些将`<div>`内容复制到`<textarea>`的代码，但它不会复制`<div>`. 它以普通字体粘贴。我该如何解决这个问题？

*HTML*

```
<input type="text" id="styledText" placeholder="Place your Name..." size="50" name="styledText" class="changeMe">
<div id="fontselect" class="changeMe" onClick="copyText()" style="font-family: Times New Roman;font-size: 22px; font-weight: bold; cursor:pointer;">Place your Name...</div> 
```

*Javascript*

```
function copyText() {
    var output = document.getElementById("fontselect").innerHTML;
    document.getElementById("styledText").value = output;
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:09:52.413

请记住，这`font-family`将适用于*所有*插入的文本，因此任何单独样式的单词/内容都将失去它们的区别：

```
function copyText() {
    var output = document.getElementById("fontselect"),
        textElem = document.getElementById("styledText");
    textElem.value = output.value;
    textElem.style.fontFamily = window.getComputedStyle(output,null).fontFamily || output.style.fontFamily || output.currentStyle.getCurrentProperty('font-family');

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:11:48.347

```
#fontselect, #styledText {
    font-family: Times New Roman;
    font-size: 22px;
    font-weight: bold;
    cursor:pointer;
} 
```

# jquery - 未捕获的语法错误，无法识别的表达式：（查询中的空格和斜杠）

> ID：12266322
> 
> 赞同：2
> 
> 时间：2012-09-04T15:05:45.053
> 
> 标签：jquery, expression, syntax-error

我正在尝试查询具有预定义值的按钮。

如果查询值如下，则可以正常工作：

```
_v = "Button1"; 
```

但只要查询值为：

```
_v = "Button 1"; // with spaces
_v = "Button / Button / Button"; // or with slashes 
```

以下查询失败：

```
$('.club[value=' + _v + ']').addClass('active'); 
```

我收到以下错误：

```
Uncaught Syntax error, unrecognized expression: [value=Button 1] 
```

如何更改查询以使其不再失败？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T15:06:49.767

您需要用双引号将值括起来

```
$('.club[value="' + _v + '"]').addClass('active'); 
```

# cakephp - CakePHP 异常和错误处理

> ID：12266324
> 
> 赞同：2
> 
> 时间：2012-09-04T15:05:48.377
> 
> 标签：cakephp, exception-handling, cakephp-2.0

我试图为 CakePHP 2.2 编写我自己的异常处理程序，但我完全迷失在实现中。
[http://book.cakephp.org/2.0/en/development/exceptions.html](http://book.cakephp.org/2.0/en/development/exceptions.html)

所以我决定在异常中使用 MyController::myAction 。您能告诉我将用户重定向到 myAction 并在操作中解析错误类型的最简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:53:16.897

根据您遵循的文档，看起来您走在正确的轨道上。

您可以创建自己的自定义控制器来处理异常。请参阅此链接：[http ://book.cakephp.org/2.0/en/development/exceptions.html#creating-a-custom-controller-to-handle-exceptions](http://book.cakephp.org/2.0/en/development/exceptions.html#creating-a-custom-controller-to-handle-exceptions)

# ios - Instagram 重定向 URI 不匹配或有时 safari 显示“无法打开，因为地址无效”+ iOS 原生应用

> ID：12266331
> 
> 赞同：3
> 
> 时间：2012-09-04T15:06:21.030
> 
> 标签：ios, redirect, uri, instagram, invalid-url

我正在使用这个 iOS 库[https://github.com/crino/instagram-ios-sdk](https://github.com/crino/instagram-ios-sdk)从我的本机应用程序登录到 instagram 以共享和从 Instagram API 获取提要。当我将此演示应用程序中的课程带到我的项目时，会发生以下情况：

应用程序在 safari 中成功打开授权 URL，当我输入我的凭据并授权时，它会在重定向到应用程序之前显示“Safari 无法打开地址，因为它无效”，或者有时会显示“重定向 URI 与注册的 URI 不匹配”。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:54:40.860

您必须将 URL 方案添加到应用程序的 plist 文件中，它在 github instragram 页面上的简短指南中有所提及：确保您已正确编辑应用程序的 .plist 文件，以便您的应用程序绑定到`ig[clientId]://`URL 方案（`[clientId]`您的 Instagram 应用程序在哪里客户 ID）。

在这里您可以找到更多信息，请参阅[TutsPlus 上的这篇文章：iOS SDK 使用 URL 方案](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T12:10:24.957

该错误表明您提供的 URI 未由电话中的任何内容处理。

例如 - skype uri 看起来像 skype：如果安装了 skype，它会打开 skype。如果没有安装Skype，你会得到同样的错误。

您使用了错误的 URI（可能是因为您的客户端 ID 错误 - 不要在其中包含 []），或者您的 iOS 设备上没有安装 Instagram 应用程序，或者您可能搞砸了您的 instagram 帐户和应用程序不再收听该 URI。

# java - 如何将 java 类转换为 java 文件？

> ID：12266332
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:06:20.947
> 
> 标签：java, decompiling

有没有什么软件可以把java类转换成java文件？我知道反编译器在那里，但我正在寻找将 java 类转换为 java 文件的软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:13:38.017

反编译器是一种将类文件转换为 java 文件的软件 :) 请参阅以下问题：

[如何“反编译”Java 类文件？](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)

[我在哪里可以找到 Java 反编译器？](https://stackoverflow.com/questions/671394/where-can-i-find-a-java-decompiler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:14:18.790

可能你可以使用 - [http://www.showmycode.com/](http://www.showmycode.com/) 它是一个免费的在线解码器/反编译器。

# objective-c - UISegementSwitch 不工作

> ID：12266333
> 
> 赞同：0
> 
> 时间：2012-09-04T15:06:22.450
> 
> 标签：objective-c, ios, segment

我有一些 UISegmentSwitch 的代码，但它不起作用。

代码：

```
- (IBAction)seg:(id)sender {
switch (segSwitch.selectedSegmentIndex) {
    case 0:
        NSLog(@"test1");
        break;

    case 1:
        NSLog(@"Testy");
        break;

    default:
        break;
}
} 
```

当然，一切都是声明和连接的。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:36:18.050

您是否已将 IBAction 连接到“值确实发生了变化”插槽或“内部修饰”？您需要为 UISegmentedControls 注册“值确实发生了变化”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:18:19.493

我从未听说过 UISegmentSwitch，但我假设您正在谈论 UISegmentedControl。

尝试在 switch 语句中放置一个断点，以查看 seg: 方法是否被调用。不是，那么您还没有将方法正确连接到 UISegmentedControl。这很容易解决，但您必须显示更多代码。

您应该使用 sender.selectedSegmentIndex 而不是 segSwitch.selectedIndex。NSLog 在 switch 语句之前的值（或在调试器中检查它）以查看您是否获得了预期的值。

* * *

无法调用该方法的原因有几种。我认为 Cyrille 建议的那个很可能。

首先，确保您的控件实际上正在被触摸。当您点击不同的段时，选定的段是否会发生变化？如果没有，那么您所控制的可能是没有接触。检查以确保控件及其超级视图的 userInteractionEnabled 设置为 YES。

其次，在情节提要中选择分段控制器，打开 Xcode 检查器窗口，然后选择检查器窗口顶部的最后一个（第 6 个或最右边）选项卡。在这里，您将看到什么事件与什么方法相关联。发送事件应该是 Value Changed 并且应该连接到 File's Owner seg:。

您还可以检查以确保将文件的所有者设置为正确的视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:30:16.383

尝试这样做

```
- (IBAction)seg:(id)sender {

        UISegmentedControl *yourSegCtrl=(UISegmentedControl *)sender;

        switch (yourSegCtrl.selectedSegmentIndex) {
            case 0:
                NSLog(@"test1");
                break;

            case 1:
                NSLog(@"Testy");
                break;

            default:
                break;
        }
} 
```

还要确保您的分段控件已连接到 IBAction

# selenium - Selenium webdriver 自动完成

> ID：12266339
> 
> 赞同：1
> 
> 时间：2012-09-04T15:06:31.637
> 
> 标签：selenium, autocomplete, automation, webdriver, selenium-webdriver

我有输入

```
<input id="idForm:j_idt21Input" class="rf-sel-inp" type="text" value="Начните ввод" name="idForm:j_idt21Input" autocomplete="off"> 
```

和带有变体的 div

```
<div id="idForm:j_idt21Items">
<div id="idForm:j_idt21Item0" class="rf-sel-opt">Все</div>
<div id="idForm:j_idt21Item1" class="rf-sel-opt">Domosti Main (Domosti Main)</div>
<div id="idForm:j_idt21Item2" class="rf-sel-opt rf-sel-sel">N&K (N&K)</div>
<div id="idForm:j_idt21Item3" class="rf-sel-opt">АГМ (АГМ)</div>
<div id="idForm:j_idt21Item4" class="rf-sel-opt">АЕС Групп (АЕС Групп)</div>
<div id="idForm:j_idt21Item5" class="rf-sel-opt">АРКО (АРКО)</div>
<div id="idForm:j_idt21Item6" class="rf-sel-opt">АТМ-комплект (АТМ-комплект)</div>
<div id="idForm:j_idt21Item7" class="rf-sel-opt">Авита (Авита)</div>
<div id="idForm:j_idt21Item8" class="rf-sel-opt">Аква С. (Аква С.)</div>
<div id="idForm:j_idt21Item9" class="rf-sel-opt">Акваарт-М (Акваарт-М)</div>
<div id="idForm:j_idt21Item10" class="rf-sel-opt">Актив групп (Актив групп)</div>
<div id="idForm:j_idt21Item11" class="rf-sel-opt">Алан-Трейд (Алан-Трейд)</div>
<div id="idForm:j_idt21Item12" class="rf-sel-opt">Алекон (Алекон)</div>
<div id="idForm:j_idt21Item13" class="rf-sel-opt">Алекс трейд (Алекс трейд)</div>
<div id="idForm:j_idt21Item14" class="rf-sel-opt">Альт-М (Альт-М)</div>
<div id="idForm:j_idt21Item15" class="rf-sel-opt">Альфа (Альфа)</div>
<div id="idForm:j_idt21Item16" class="rf-sel-opt">Ансан (Ансан)</div>
<div id="idForm:j_idt21Item17" class="rf-sel-opt">Ария Текстиль (Ария Текстиль)</div>
<div id="idForm:j_idt21Item18" class="rf-sel-opt">Арреал 2000 (Арреал 2000)</div>
</div> 
```

我试过了

```
webDriver.findElement(By.xpath("//td[text()='Поставщики']/following-sibling::td//input[contains(@id, 'Input')]")).sendKeys("Поливалент");
webDriver.findElement(By.xpath("//td[text()='Поставщики']/following-sibling::td//input[contains(@id, 'Input')]")).sendKeys(Keys.ARROW_DOWN);
webDriver.findElement(By.xpath("//td[text()='Поставщики']/following-sibling::td//input[contains(@id, 'Input')]")).sendKeys(Keys.ENTER); 
```

但它不工作

帮助，如何使用 selenium webdriver 从此输入中选择变体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:44:41.243

试试这个变体（使用 css 选择器）：

```
webDriver.findElement(By.cssSelector("input.rf-sel-inp")).sendKeys("Поливалент"); 
```

或使用 jscript 的另一种方式：

```
String cssSelector = ....  //css selector of the element u need to select
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T01:27:45.353

尝试这个-

```
 driver.findElement(By.xpath("//input[@value='Начнитеввод']")).sendKeys("Поливалент"); 
```

让我知道它是否不起作用！

# memcached - 内存缓存，多实例与单实例

> ID：12266340
> 
> 赞同：3
> 
> 时间：2012-09-04T15:06:43.957
> 
> 标签：memcached

我有一个运行 php/mysql 的网站。该应用程序将被“复制”多次。每个实例都会有自己的数据库，一组 php 文件（通配符）域，你明白了。

现在应用程序的某些部分使用 memcache 缓存，我想知道它是否会更好/更快/更方便使用

*   每个内存缓存实例`app instance`

*   或一个大的内存缓存实例，并为每个应用程序实例添加一些唯一令牌作为每个键的前缀

我猜想使用单个 memcache 实例的优势是一个大的“索引表”

多个 memcache 实例会导致更多开销

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:21:30.073

使用一个 memcached 实例并为您的密钥添加前缀——这是确保最佳资源利用率的最简单方法。如果每个应用程序实例都有一个单独的 memcached 实例，则未使用的空闲实例会占用您的活动实例无法使用的内存。

# sql - 使用 JOIN 进行适当的查询

> ID：12266344
> 
> 赞同：0
> 
> 时间：2012-09-04T15:07:02.757
> 
> 标签：sql

我真的不知道如何查询这个。我的数据库中有以下内容

id,employee,jobsite1,stime,etime,lunchout,lunchout,lunchout,说明,材料,jobsite2,stime,etime,lunchout2,lunchout2,description2,materials2

这实际上重复了5次。当我从表中执行 SELECT * 时，就像一个魅力拉动我的所有数据（我将其导出到 xls 中进行编辑），然后我从 jobsite2、3、4 和 5 中获取所有信息并将其复制并粘贴到一行。所以基本上

```
ID, EMPLOYEE, JOBSITE,  , STIME,ETIME,LUNCHOUT,LUNCHIN, DESCRIPTION, MATERIALS
1,  CHRIS   , MYSITE,   , 9:00, 1:00 ,12:15,   12:45  , WORKED HERE, NONE
1,  CHRIS   , SECONDSITE, 1:15, 5:00 ,        ,       , WORKED HERE, NONE
2,  BOB     , MYSITE    , 9:00, 5:00 ,12:00   ,12:30  , WORKED HERE, NONE
3,  MIKE    , MYSITE    , 9:00, 2:00 ,12:00   ,12:30  , WORKED HERE, BOUGHT STUFF
3,  MIKE    , SECONDSITE, 2:00, 5:30 ,        ,       , DOING THIS , NONE 
```

有没有办法在我不通过 excel 手动执行的情况下进行查询？使用也许加入？我从未使用过 JOIN，但听说过它，并且一直很好奇，一旦我有正确的查询设置，导出它会更容易吗？这有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:14:37.757

如果我理解正确，您可以使用`UNION`

```
SELECT  id, employee, jobsite1, stime1, etime1, 
        lunchout1, lunchin1, description1, materials1
FROM tableName
UNION
SELECT  id, employee, jobsite2, stime2, etime2, 
        lunchout2, lunchin2, description2, materials2
FROM tableName
UNION
SELECT  id, employee, jobsite3, stime3, etime3, 
        lunchout3, lunchin3, description3, materials3
FROM tableName
UNION
SELECT  id, employee, jobsite4, stime4, etime4, 
        lunchout4, lunchin4, description4, materials4
FROM tableName
SELECT  id, employee, jobsite5, stime5, etime5, 
        lunchout5, lunchin5, description5, materials5
FROM tableName 
```

# php - 使用 META REFRESH 时防止重新提交

> ID：12266348
> 
> 赞同：0
> 
> 时间：2012-09-04T15:07:08.403
> 
> 标签：php, redirect, refresh

当用户提交表单并且一切正常时，他将收到一条 META REFRESH 为 3 秒的成功消息。然后页面刷新，但是当我点击刷新按钮或F5时，页面询问我是否要重新提交，这意味着META REFRESH实际上并没有重定向并清除所有内容。

使用 META REFRESH 时有没有办法防止数据重新提交？

我本可以使用`header('Location: somewhere.php');`，但我无法用它显示成功消息。

我正在使用带有 PHP 标头的 META REFRESH，就像这样`header("refresh:3;url=" . $home_action);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:11:34.313

您应该使用`header('location: somewhere.php?message=success')`和 在页面上，`somewhere.php`您可以检查`message`get 变量是否存在，如果看到则输出成功消息。

这是它通常完成的方式。另一种方法是设置一个`$_SESSION`变量并在`somewhere.php`. 如果存在，请记住将其从会话中删除。

# c# - 如何手动配置和初始化 .NET 2.0 SOAP Web 引用？

> ID：12266358
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:07:37.240
> 
> 标签：c#, .net, web-services

我在 Visual Studio IDE 中添加了一个 .NET 2.0 Web 引用，但对于这种特定情况，它无法使用 app.config 文件进行配置。

所以我试着用这种方式初始化它：

```
var service = new MyWebservice
{
   Url = config.MyWebserviceUrl
}; 
```

但我得到以下异常：

> 值不能为空。参数名称：uriString

`config.MyWebserviceUrl`包含有效的网址。

以编程方式配置和初始化 Web 服务的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:24:25.670

您是否检查了`URL Behavior`网络参考的设置？如果是`Dynamic`，它将尝试从配置文件中获取 URL。

这个问题更详细地介绍了 URL 的编程配置：

[如何在不重新编译的情况下在 .NET 中动态切换 Web 服务地址？](https://stackoverflow.com/questions/125399/how-can-i-dynamically-switch-web-service-addresses-in-net-without-a-recompile)

# twitter - Twitter Bootstrap 的替代品？

> ID：12266363
> 
> 赞同：1
> 
> 时间：2012-09-04T15:07:57.560
> 
> 标签：twitter, twitter-bootstrap, frontend

我一直在使用我的最新项目 Twitter Bootstrap，但我发现与旧版浏览器存在兼容性问题。

现在我想开始一个新项目，我不想再使用 Bootstrap。你知道它的任何替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:11:49.687

[Kickstrap](http://ajkochanowicz.github.com/Kickstrap/)是twitter-bootstrap 的不错替代品。但我会继续使用 twitter-bootstrap。

# xslt - 如何使用 BizTalk 映射器将 2 个不同的节点映射到一个重复节点

> ID：12266365
> 
> 赞同：2
> 
> 时间：2012-09-04T15:07:57.487
> 
> 标签：xslt, biztalk, biztalk-2010, biztalk-mapper

我有这个架构：

```
<Root>
  <Customers>
    <Customer>
      <ID>123</ID>
      <Name>John</Name>
    </Customer>
  </Customers>
  <Order>
    <ID>ABC</ID>
    <Title>Boat</Title>
  </Order>
</Root> 
```

我需要将两个不同的记录映射到一个重复记录中，如下所示：

```
<Root>
  <Data>
    <ID>123</ID>
    <Text>John</Text>
  </Data>
  <Data>
    <ID>ABC</ID>
    <Text>Boat</Text>
  </Data>
</Root> 
```

我尝试创建两个表循环（一个用于客户，一个用于订单）并得到：

```
<Root>
  <Data>
    <ID>ABC</ID>
    <Text>Boat</Text>
  </Data>
</Root> 
```

尝试了一个表循环两行，并得到了相同的结果。（也尝试使用 Gated 选项来检查是否存在，这没有任何区别）

实际上，模式很大，地图超级复杂（不是我建的），有很多fun​​ctoids，还有很多连线。所以我想避免创建自定义 XSL，这对于这项任务来说会更容易，但更难维护。这是我唯一需要改变的部分。

有人吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T01:16:20.527

对于复杂的映射，使用自定义 XSLT 几乎总是比我们在 BizTalk 映射中经常发现的蜘蛛网更简单、更易于维护。但是，正如您所说，您需要避免重新编码完整的地图，因为您只更改了一小部分。

您应该能够在 Scripting Functoid 中使用“内联 XSLT 调用模板”脚本类型来结合最好的 BizTalk 映射和自定义 XSLT。

根据 Sean B. Durkin 的回答，您需要设置 2 个调用模板 functoid，第一个连接到您的输出“数据”节点

```
<xsl:template name="DataTemplate">
    <xsl:apply-templates select="//*[local-name()='Customer']|//*[local-name()='Order']" />
</xsl:template> 
```

您的第二个调用模板会将相关数据输出到当前输出“数据”节点。请注意，第二个 Functoid 不需要连接到输出文档中的任何节点。

```
<xsl:template match="*[local-name()='Customer']|*[local-name()='Order']">
    <xsl:element name="Data">
      <xsl:element name="ID">
          <xsl:value-of select="*[local-name()='ID']"/>
      </xsl:element>
      <xsl:element name="Text">
          <xsl:value-of select="*[local-name()='Name']|*[local-name()='Title']" />
      </xsl:element>
    </xsl:element>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-03T23:20:01.963

这里不需要使用 XSLT。只需在地图上拖动一个 Looping functoid。将 Customer 和 Order 记录作为输入连接到 functoid（是的，您可以有多个输入）。将 functoid 的输出连接到数据记录。然后直接连接您的字段（ID --> ID，名称 --> 文本）。这将起作用。

Looping functoid 的各个输入记录本身不必重复记录。通过将多个输入连接到 functoid，您可以遍历实例集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:38:02.237

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <Root>
   <xsl:apply-templates select="*/Customers/Customer|*/Order"/>
 </Root>
</xsl:template>

<xsl:template match="Customer|Order">
 <Data>
   <ID><xsl:value-of select="ID" /></ID>
   <Text><xsl:value-of select="Name|Title" /></Text>
 </Data>
</xsl:template>

</xsl:stylesheet> 
```

# c# - 编辑 DataGrid 后保存额外信息

> ID：12266367
> 
> 赞同：0
> 
> 时间：2012-09-04T15:08:02.777
> 
> 标签：c#, .net, wpf, entity-framework, datagrid

我有一个`DataGrid`和一个`DataGridCheckBoxColumn`和其他人。被`DataGrid ItemSource`映射到`ObservableCollection`包含 的行的a `Tasks`。Task 类包括属性，例如`"ID", "IsScheduled", "IsScheduled_Date", "IsScheduled_EditorID", Etc.` 我试图弄清楚如何使一个`DataGridCheckBoxColumn`字段 ( `IsScheduled`) 还保存日期 ( `IsScheduled_Date`) 以及在选中时谁进行了更改 ( `IsScheduled_EditorID`)。

(1) 我曾尝试使用多重绑定来保存额外的数据，但到目前为止我的努力都失败了。[您可以在此处](https://stackoverflow.com/questions/12073597/)查看解决类似问题的进度。

(2) 我曾尝试让`DataGrid` `CellEditEnding`事件保存额外数据，但它最终在提交 IsScheduled 数据之前提交了额外数据，并且每当取消行和/或单元格编辑时都会造成麻烦。

(3) 我尝试在我的 Task 类中监听属性更改事件并在那里分配额外的更改。这似乎工作正常，直到我意识到当数据首次加载时它会导致覆盖任何早期更改的更改事件。

### 添加信息

* * *

该类`Task`是`Entity Framework Class`从数据库生成的。我正在收听该`OnIscheduledChanged`事件并进行必要的更改，因为当我在生成的类中进行更改时，它总是被覆盖。

### 更多信息

* * *

Task 类似乎有些混乱。正如我所说，它是由实体框架生成的，断点显示加载时调用的设置器......覆盖更改。更不用说每次代码重新生成时都会覆盖任何自定义代码。

> ```
>  /// <summary>
>     /// No Metadata Documentation available.
>     /// </summary>
>     [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
>     [DataMemberAttribute()]
>     public global::System.Boolean IsScheduled
>     {
>         get
>         {
>             return _IsScheduled;
>         }
>         set
>         {
>             OnIsScheduledChanging(value);
>             ReportPropertyChanging("IsScheduled");
>             _IsScheduled = StructuralObject.SetValidValue(value);
>             ReportPropertyChanged("IsScheduled");
>             OnIsScheduledChanged();
>         }
>     }
>     private global::System.Boolean _IsScheduled;
>     partial void OnIsScheduledChanging(global::System.Boolean value);
>     partial void OnIsScheduledChanged(); 
> ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:32:59.363

我最终为暴露相同属性的实体模型创建了一个 ViewModel 类。我将 DataGrid ItemSource 绑定到包装的任务模型列表（例如下面）。[显然这是显示属性的快速示例类，需要属性通知才能正常工作]

```
Class TaskViewModel
{
    private Task task;
    public Boolean IsScheduled
    {
        get
        {
            return task.IsScheduled;
        }
        set
        {
            this.task.IsScheduled = value;
            this.task.IsScheduledDate = Date.Now();
        }

    TaskViewModel(Task task)
    {
       this.task = task;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:07:45.257

在课堂上做

```
public partial class MainWindow : Window 
    {
        public ObservableCollection<xxx> xxxs { get; private set; }

        public MainWindow()
        {
            xxxs = new ObservableCollection<xxx>();
            xxxs.Add(new xxx("Mike", false));
            xxxs.Add(new xxx("Sarah", true));

            InitializeComponent();
        }

        public class xxx: INotifyPropertyChanged
        {
            public event PropertyChangedEventHandler PropertyChanged;
            private void NotifyPropertyChanged(String info)
            {
                if (PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs(info));
                }
            }

            private bool isChecked;
            public bool IsChecked
            {
                get { return isChecked; }
                set
                {
                    if (isChecked == value) return;
                    if (value) FirstName = DateTime.Now.ToString(); else FirstName = string.Empty;
                    // update db
                    isChecked = value;
                    NotifyPropertyChanged("FirstName");
                }
            }
            public string FirstName { get; private set; }
            public xxx(string firstName, bool _isChecked) { FirstName = firstName; isChecked = _isChecked; }
        }
    }

        DataContext="{Binding RelativeSource={RelativeSource self}}"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid x:Name="MyGrid" ItemsSource="{Binding Path=xxxs}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="CheckBox" Binding="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                <DataGridTextColumn Header="Text"  Binding="{Binding FirstName, Mode=OneWay}"/>
            </DataGrid.Columns>
        </DataGrid> 
```

# java - Jacob (Java / COM / ActiveX) 抛出 ComFailException

> ID：12266369
> 
> 赞同：1
> 
> 时间：2012-09-04T15:08:10.513
> 
> 标签：java, dll, com, activex, jacob

我正在使用 Jacob 一个 Java-COM 桥，并且我已将所需的 dll 放置到 - `C:\WINDOWS\system32\jacob-1.14.3-x86.dll`。我还将所需的 jar 文件添加到 - `C:\Program Files\Java\jdk1.6.0_18\jre\lib\ext\jacob-1.14.3.jar`。

直到昨天我还可以使用它，今天我在我的机器上卸载了一些不需要的 .Net 软件，突然它停止工作并抛出以下错误 -

```
com.jacob.com.ComFailException: Can't co-create object
at com.jacob.com.Dispatch.createInstanceNative(Native Method)
at com.jacob.com.Dispatch.<init>(Dispatch.java:101)
at com.jacob.activeX.ActiveXComponent.<init>(ActiveXComponent.java:58) 
```

我的机器属于“x86 Family 15 Model 4 Stepping 3”。我曾尝试使用 regsvr32.exe 取消注册/注册 dll，但没有成功。我不知道如何让它再次工作..否则我将不得不格式化我的机器..geeks 请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:48:32.963

我想知道是否有人遇到过类似的问题。无论如何，我别无选择，只能将我的机器恢复到最后一个工作日期。我猜一些 JAVA-COM 类条目会被意外地从注册表中删除。不知道到底是哪一个。最后“系统还原”是我的解决方案:)

# php - 警告：preg_replace() [function.preg-replace]：编译失败：在偏移量 1 处没有可重复的内容

> ID：12266372
> 
> 赞同：5
> 
> 时间：2012-09-04T15:08:22.960
> 
> 标签：php, regex, preg-replace

有人可以帮助调试此错误吗？

> 警告：preg_replace() [function.preg-replace]：编译失败：在偏移量 1 处没有可重复的内容

```
//Generate uid
    function gen_uid($len=40) {
        $hex = md5("what" . uniqid("", true));
        $pack = pack('H*', $hex);
        $tmp =  base64_encode($pack);
        $uid = preg_replace("#(*UTF8)[^A-Za-z0-9]#", "", $tmp);
        $len = max(4, min(128, $len));
        while (strlen($uid) < $len)
            $uid .= gen_uid(22);
        return substr($uid, 0, $len);
    } 
```

这是什么原因造成的？是 PHP 问题还是其他问题？该应用程序在我的本地机器上运行良好，但在服务器上却不行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T15:11:30.103

`*`在正则表达式中意味着匹配前一个字符 0 次或更多次，同时`(`启动一个捕获组。因此， the`*`没有什么可重复的，因为在 the 之前的`*`是 a `(`，它本身不能重复，因此有这个警告。

要修复它，只需转义`*`，如下所示：

```
$uid = preg_replace("#(\*UTF8)[^A-Za-z0-9]#", "", $tmp); 
```

# android - 通过 adb 备份完整的短信/彩信内容

> ID：12266374
> 
> 赞同：31
> 
> 时间：2012-09-04T15:08:25.077
> 
> 标签：android

我一直在尝试使用 adb 从设备中提取整个 sms/mms 收件箱，但遇到了一些麻烦。手机已root，我尝试了以下命令：

输入

```
./adb pull /data/data/com.android.providers.telephony/databases/mmssms.db 
```

输出

```
Permission denied 
```

输入

```
./adb pull su /data/data/com.android.providers.telephony/databases/mmssms.db 
```

输出

```
The help menu 
```

我是否认为我可以通过类似于我尝试过的命令来拉取短信收件箱？如果可以做到，我的命令有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-16T19:01:26.777

获取 /data 目录内容的一种方法是首先将 sqlite db 复制到可访问的位置，然后使用 adb pull 从那里复制到主机。

例如，以下命令使用 android bridge 来抓取 sms 数据（假设它包含在 /data/data/com.android.providers.telephony/databases/mmssms.db 中）：

```
adb shell
$ mkdir /mnt/sdcard/tmp
# su
# cat /data/data/com.android.providers.telephony/databases/mmssms.db > /mnt/sdcard/tmp/mmssms.db
# exit
$ exit
adb pull /mnt/sdcard/tmp/mmssms.db . 
```

现在您的主机上有 mms/sms 数据库，探测以查找最受欢迎的收件人，例如：

```
sqlite3 -header mmssms.db 'select address from sms' | sort -n | uniq -c | sort -n 
```

最后，整理临时区域：

```
adb shell
$ rm /mnt/sdcard/tmp/mmssms.db
$ rmdir /mnt/sdcard/tmp
$ exit 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-06T15:08:48.780

在拉取该数据库之前，您必须授予 ADB 根特权

```
adb root

adb pull /data/data/com.android.providers.telephony/databases/mmssms.db ./ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-09T23:52:54.927

感谢@Bonlenfum 的回答，我能够想出一个可重用的脚本，用于将有根设备上的任何文件/目录复制到 Windows 路径（本地或 UNC）。

* * *

**编辑**：修复了包含空格的路径的错误。

* * *

将以下内容另存为：**adbSuPull.bat**

```
@echo off

SetLocal
set RemotePath=%~1
set LocalPath=%~f2

if [%1] == [] goto Usage
if "%~1" == "/?" goto Usage
if not [%3] == [] goto Usage

:: Replace " " with "\ " (escape spaces)
set RemotePath=%RemotePath: =\ %

set TimeStamp=%date:~-4,4%-%date:~-10,2%-%date:~-7,2%_%time:~-11,2%-%time:~-8,2%-%time:~-5,2%

:: Replace spaces with zeros
set TimeStamp=%TimeStamp: =0%

if "%LocalPath%" == "" set LocalPath=adbSuPull_%UserName%_%TimeStamp%
set SdCardPath=/mnt/sdcard
set TempPath=%SdCardPath%/adbSuPull_temp_%TimeStamp%/

echo.
echo Copying to temp location "%TempPath%"
echo.
adb shell "su -c 'mkdir -p %TempPath%; cp -RLv %RemotePath% %TempPath%'"

echo.
echo Copying to destination "%LocalPath%"
echo.
adb pull "%TempPath%" "%LocalPath%"
if ErrorLevel 0 goto Cleanup

:Error
echo.
echo Operation failed. Is USB Storage in use?
echo.
pause
call Cleanup
exit /b 1

:Cleanup
echo.
echo Removing temp location "%TempPath%"
echo.
adb shell "rm -Rf '%TempPath%'"
exit /b ErrorLevel

:Usage
echo.
echo.adbSuPull ^<RemotePath^> [^<LocalPath^>]
echo.
echo Copies files/directories from a rooted Android device to a Windows path.
echo Author: Ben Lemmond benlemmond@codeglue.org
echo.
echo.  RemotePath (required)  Specifies the path to the file or directory on
echo.                         the rooted Android device.
echo.
echo.  LocalPath (optional)   Specifies the destination path. This can be a
echo.                         Windows local path (C:\folder) or a UNC path
echo.                         (\\server\share).
echo.                         Defaults to adbSuPull_%%UserName%%_%%TimeStamp%%
echo.                         in the current working directory.
exit /b 1 
```

* * *

用法：

```
adbSuPull <RemotePath> [<LocalPath>]

Copies files/directories from a rooted Android device to a Windows path.
Author: Ben Lemmond benlemmond@codeglue.org

  RemotePath (required)  Specifies the path to the file or directory on
                         the rooted Android device.

  LocalPath (optional)   Specifies the destination path. This can be a
                         Windows local path (C:\folder) or a UNC path
                         (\\server\share).
                         Defaults to adbSuPull_%UserName%_%TimeStamp%
                         in the current working directory. 
```

# android - android ListView ArrayAdapter

> ID：12266379
> 
> 赞同：0
> 
> 时间：2012-09-04T15:08:30.983
> 
> 标签：android, listview

我在我的 ListView 中使用 ArrayAdapter。

我真的不明白当我将 ArrayList 设置为我的 ArrayAdapter 时，它是否会重新创建它的所有对象，或者只是引用它。

由于某种原因，在列表视图中应该相同的相同对象不会受到属性更改的影响，就好像当前对象是另一个对象的克隆一样。

任何人都可以请清除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:13:27.460

当您传递`ArrayList`给时`ArrayAdapter`，它实际上使用**[传递引用](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)**来操作对象。

而当你改变你的内容`ArrayList`并想要反映这些变化时`ArrayAdapter`，你必须调用`notifyDataSetChanged()`你的适配器的方法。

PS：实际上，您应该将 ArrayList 的克隆对象传递给适配器（除非您知道自己在做什么），因为它是不必要的并且会占用额外的资源。

更多[信息](https://stackoverflow.com/a/40523/966550)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:31:03.450

这两种情况都是可能的，这里解释第二种情况如何帮助优化您的列表视图：http: [//developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:14:03.437

这取决于您如何创建`ArrayAdapter`.

如果您使用不带数组或不`List`作为参数的构造函数版本，那么它将创建每个适配器实例维护的新列表。如果您使用以下版本之一创建适配器：

```
ArrayAdapter(Context context, int textViewResourceId, List<T> objects)

ArrayAdapter(Context context, int resource, int textViewResourceId, List<T> objects) 
```

然后，您可以向多个适配器提供相同的外部列表，并且只更改一次数据集，因为在这种情况下，适配器只是引用您的列表，而不复制数据。

# c - 我如何知道指针是否指向特定结构？

> ID：12266380
> 
> 赞同：4
> 
> 时间：2012-09-04T15:08:36.200
> 
> 标签：c, pointers, struct

例如，在 Linux 中，我有一个指向 task_struct 的指针。稍后，task_struct 可能会迁移或删除。我如何知道指针是否仍指向 task_struct？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:10:37.403

这是不可能的。

指针仅包含地址，通常无法确定给定地址是否“有效”。

有时您可以询问为您提供开始指针的实体是否仍然有效，但这当然取决于实体的确切细节。语言本身无法做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T15:10:34.970

你不知道，因为：

*   指针只包含它指向的对象的地址；
*   类型信息在编译时丢失。

因此，C 没有提供处理此类问题的工具，您必须自己跟踪指向的内容会发生什么。

你可以问的最多（并且它已经是特定于操作系统的）是检查结构所在的内存页面是否仍然可以访问，但通常它不是特别有用的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T15:26:38.267

根据您的分配模式/运气，您可能会遇到分段错误（这当然会杀死您的程序）......但这至少会告诉您参考不再有效。

但是，如前所述，最好的方法是自己跟踪有效性。

如果您需要在内存中不断移动结构（而不​​是仅仅将其清空并在其当前位置重新初始化），您可以考虑使用指向指针的指针以使跟踪更容易。
“即。一切都获得对结构指针的引用，然后当您移动或删除结构时，您只需将该指针设置为 NULL 或新的内存位置。”

另外，一般来说，如果您想检查您的程序是否存在这种奇怪现象，我建议您查看 valgrind。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:22:49.643

在 C 中编写代码以便跟踪它是您的责任。您可以使用 NULL 的特殊值（表示不指向任何东西），当您删除（或尚未设置）指针指向的任何内容时将指针设置为 NULL 并在使用它之前测试 NULL。你也可以用一种永远不会出现问题的方式来设计你的代码。

没有办法查询一个随机指针值来查看它是否代表什么，就像没有办法查询一个 int 变量来检查其中的值是未初始化、垃圾还是计算的正确结果一样。

这完全是软件设计的问题，必要时使用 NULL 的值来指定未设置。

# authentication - SMTP 邮件服务器身份验证

> ID：12266381
> 
> 赞同：1
> 
> 时间：2012-09-04T15:08:38.297
> 
> 标签：authentication, smtp, mail-server

请一些人向我描述广义的 SMTP 身份验证，请记住以下内容。

当有人问“您使用什么身份验证？”

他们指的是什么？SMTP 协议的哪个变体，例如 ESMTP 和 POP-before-SMTP？

有多少变种？在这些协议中，我正在阅读诸如 Auth Mechanisms (Auth login, Auth plain, CRAM-MD 5) 之类的内容？

有人可以在这里广泛地阐明一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:44:51.000

这里有很多层次，很多方面。有多个相关的 ESMTP 扩展和多个身份验证方案。

您的连接方式会影响哪种身份验证方案有意义。一般来说，如果你有一个加密的连接，明文密码是没有问题的，因为连接级加密负责防止窃听。

如果您没有加密连接，理想情况下您根本不想以任何形式传输密码。有各种涉及挑战-响应机制或会话密码交换的身份验证方案，以便即使在未加密的通道上也能安全地进行身份验证。

POP-before-SMTP 曾经很流行，因为没有足够的标准来验证 SMTP。如今，它应该被认为仅仅是历史性的，尽管可能仍然有一些网站使用这种机制。这个想法是将身份验证推迟到 POP 协议，它无论如何都需要用户身份验证；然后当用户通过 POP 进行身份验证时，SMTP 端口也被允许在有限的时间内来自同一 IP 地址。显然，如果用户没有或不想使用 POP，这很麻烦，而且有些用户在 NAT 上，因此远程服务器看到的 IP 地址不是他们唯一的，但从前，这种安排非常适合自然而然地进入了人们如何仅使用他们自己的 ISP 的 POP 和 SMTP 服务通过拨号 PPP 连接到 Internet。

如今，对于新系统，默认设置应该是按照 RFC 6409 设置单独的加密和认证邮件提交代理端口 587。一些系统通过加密通道在端口 465 上运行传统 SMTP 服务器，但应该考虑到这一点遗留的安排。

进一步查看[http://en.wikipedia.org/wiki/SMTP_Authentication](http://en.wikipedia.org/wiki/SMTP_Authentication)和[http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)，我在这篇文章中非常依赖这两个文件。

# ios - 确定iOS“区域格式”

> ID：12266383
> 
> 赞同：2
> 
> 时间：2012-09-04T15:08:48.363
> 
> 标签：ios, html, cordova

[这个问题](https://stackoverflow.com/questions/4578347/phonegap-the-best-way-to-discover-the-country-iso-code-from-a-user)显示了如何使用 访问 iOS 语言设置`navigator.language`，但是如何确定用户的“区域设置”？目标是在 PhoneGap html5 应用程序中执行此操作。

语言和区域格式是两个不同的设置：

![语言和区域格式是两个不同的设置](../Images/d8e906d2cc7fb05c8ebd99c0dcb78155.png)

# c++ - 从向量类的向量中读取数据-c ++

> ID：12266387
> 
> 赞同：0
> 
> 时间：2012-09-04T15:09:06.043
> 
> 标签：c++, class, vector

我有一个由整数和字符串组成的类，但我在该类中也有一个向量。我必须从文件中读取记录，然后在解析每一行后，将信息放入我的类向量中。我必须获取基本的包信息，如 ID 和名称，然后添加该包提供的服务，所以我可以有 10 条来自一个包的记录，但它们的服务类型不同。现在我正在尝试将数据放入每个包中并访问每个元素的数据，但是当我尝试从类内的向量中获取数据时，我的编译文件崩溃了。它还打印出 1233 和 foo，但不打印测试。任何想法为什么会这样？

```
int main()
{
    vector<package> packs;
    package pack;
    pack.ID = 1233;
    pack.name = "foo";
    packs.push_back(pack);

    pack.putData("test",12);

     cout << packs[0].name << endl;
     cout << packs[0].ID << endl;
     cout << packs[0].bservice[0].serviceID << endl;    //[b]Crashes in this line[/b]

    return 0;

} 
```

定义的类是：

```
class package
{
    public:

    class aservice
    {
       public:
       int serviceID;
       string othername;
    };
    int ID;
    string name;
    vector<aservice> bservice;
    void putData(string name1, int serviceID1)
    { 
        aservice obj;
        obj.serviceID = serviceID1;
        obj.othername = name1;
        bservice.push_back(obj);
    }

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:13:14.637

在这里，您复制进入向量`pack`时的副本：`push_back`

```
packs.push_back(pack); 
```

在这里您可以访问`pack`，而不是存储在您的矢量中的副本

```
pack.putData("test",12); 
```

因此，`bservice`您尝试访问的向量实际上是空的，这就是您尝试在此处访问它时代码崩溃的原因：

```
cout << patients[0].bservice[0].serviceID << endl; // patients[0].bservice is empty!!! 
```

您可以通过在调用后推回来避免这种情况`putData`：

```
vector<package> packs;
package pack;
pack.ID = 1233;
pack.name = "foo";
pack.putData("test",12);
packs.push_back(pack); 
```

您也可以通过在不首先检查它是否为空的情况下不尝试访问向量来避免它。

理想情况下，您应该努力设计可以构造成有用状态的类，而不是默认构造它们并通过设置器逐步添加数据。如果数据是相互关联的并且类必须保持不变量，这一点尤其重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:15:26.600

```
 packs.push_back(pack); 
```

要将副本推`pack`送到您的向量中。因此，您将有两个特定实例：如果您在其中一个上调用 putData，则另一个不会自行修改！因此，写的时候

```
patients[0].bservice[0] 
```

您的应用程序崩溃是因为您没有`putData`在里面`patients[0]`，只有在里面`pack`——这又是一个不同的对象。

您应该修改您的向量，以便它存储指向`package`'s 的指针，并推入`pack`内部的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:15:48.607

```
pack.push_back(pack); 
```

假设第一个`pack`实际上是`packs`，这会将 的*副本*推`pack`送到向量上。

```
pack.putData("test",12); 
```

这会修改局部变量`pack`，但*不会*修改您推送到向量上的副本。那仍然包含一个空`bservice`向量。

```
cout << patients[0].bservice[0].serviceID << endl; 
```

假设`patients`实际上是`packs`，这会错误地尝试从空`bservice`向量中读取。

你要么想打电话`putData`之前`packs.push_back(pack)`，要么打电话`packs.back()`而不是本地`pack`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:29:15.987

试试这个：

```
#include <vector>
#include <iostream>

using namespace std;

class package
{
public:
   package(int inID, const string& inName ) : ID(inID), name(inName)
   {
   }

   void putData(string name1, int serviceID1)
   { 
      aservice obj;
      obj.serviceID = serviceID1;
      obj.othername = name1;
      bservice.push_back(obj);
   }

   void Print() const
   {
      cout << ID << endl;
      cout << name << endl;

      vector<aservice>::const_iterator iter;
      iter = bservice.begin();
      for (; iter != bservice.end(); ++iter)
      {
         cout << iter->serviceID << " " << iter->othername << endl;
      }
   }

private:
   class aservice
   {
   public:
      aservice() {};
      int serviceID;
      string othername;
   };

   int ID;
   string name;
   vector<aservice> bservice;

};

typedef vector<package> PackContainer;
typedef vector<package>::iterator PackContainerIterator;
typedef vector<package>::const_iterator PackContainerConstIterator;

void PrintAll(const PackContainer& packs)
{
   PackContainerConstIterator iter = packs.begin();
   for (; iter != packs.end(); ++iter)
   {
      iter->Print();
   }
}

int main()
{
   PackContainer packs;
   package pack( 1233, "foo");
   pack.putData("test",12);
   packs.push_back(pack);
   PrintAll(packs);

   return 0;
} 
```

# eclipse - 导出天线文件后找不到“Build.xml”

> ID：12266389
> 
> 赞同：2
> 
> 时间：2012-09-04T15:09:16.210
> 
> 标签：eclipse, ant, java-me, proguard, java-wireless-toolkit

我制作了一个 J2ME 程序。该程序将在 3 个特定国家/地区使用，并且必须支持 7 种不同的屏幕分辨率。

目前，我为每种分辨率类型创建了 7 个不同的版本，并为 3 个国家/地区中的每个国家/地区创建了 3 个变体。

我使用 LWUIT 作为我的 UI 框架。我已经使用以下配置了 MTJ。

*   天线-bin-1.2.1-beta.jar
*   WTK2.5.2_01
*   proguard4.8

在 Eclipse 3.7.2 上

1.  在包资源管理器中，我右键单击我的项目目录
2.  选择“导出”（我在“Java 移动工具”选项下找不到“导出天线构建文件”）
3.  我等待它做它的事情。
4.  我打开项目文件夹并搜索 Build.xml。但是什么也找不到。
5.  我找到一个名为“mtj-build”的文件夹，其中包含另一个文件夹（自定义任务）和两个文件 mtj-build.properties 和 mtj-build.xml 。

我希望能够编写一个能够执行以下操作的构建文件

1.  根据其建筑的决议投入正确的资源
2.  根据其建筑的决议放入正确的主题
3.  为每个国家/地区设置应用程序描述符文件中的相关属性
4.  为每个分辨率和每个国家/地区自动重复此过程，并将相应的 .Jad 和 .Jar 文件放置在特定的文件夹结构中，如图所示。

主文件夹：

```
{
    Country1:{
        Res1,
        Res2, 
        Res3, 
        ....}, 
   Country2:{
        Res1, 
        Res2, 
        Res3, 
        ....}, 
   Country3:{
        Res1, 
        Res2, 
        Res3, 
        ....}, 
   ....etc}
} 
```

据我了解，要做到这一点，我需要设置一个 Build.xml。但是在选择 Export Antenna Build Files 选项后我找不到 Build.xml。

我如何实现这个目标？甚至有可能做到这一点吗？请帮忙。提前致谢

===================更新到这篇文章#1======================

按照下面 Eugen Martynov 提到的链接进行操作。附带说明：我没有在项目的右键单击上选择导出天线构建文件的原因是因为它们指的是名为 Pulsar Eclipse 的 Eclipse IDE 的定制版本。 [ [http://www. eclipse.org/pulsar/](http://www.eclipse.org/pulsar/) ]

由它生成的 Antenna build xml 文件比您从标准 Eclipse 中获得的优化得多。我不知道为什么会这样。但那是我的观察。

===================更新到这篇文章#2======================

谢谢你的建议尤金。我将编写一些子 Ant Build 文件来简化我的问题。我仍然必须弄清楚如何打破这一点。

感谢 Telmo Pimentel Mota 的链接。在我当前的构建中，我有“wtkbuild”和“wtkpackage”。并且构建运行良好。我现在必须弄清楚如何按照 Eguen 的建议从另一个构建文件调用或执行一个构建文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:12:18.217

我不会给你完整的答案，但我会给你自己找出答案的方法。

[这里](http://www.javaworld.com/javaworld/jw-10-2000/jw-1020-ant.html)关于`ant`和构建过程。[这](http://www.javaranch.com/journal/2004/03/Antenna.html)是用`antenna`. `sample`在天线文件夹中也应该有 build.xml 文件的示例。[这](http://archive.javapronews.com/javapronews-47-20030611J2MEUsingAntwithJ2ME.html)是关于`ant`和构建 j2me 而不使用`antenna`.

在您的情况下，您必须使用不同的 res 文件夹并根据两个附加属性`country`和`resolution`. 您可以使用属性文件或命令行在 build.xml 之外传递属性：

```
ant -f <path to build.xml> -D<property name>=<property value> 
```

# javascript - 如何将PowerPoint图表转换为网络使用？

> ID：12266394
> 
> 赞同：1
> 
> 时间：2012-09-04T15:09:30.777
> 
> 标签：javascript, charts, highcharts, powerpoint, google-visualization

我有一些 PowerPoint 图表，我想将其转换为 Google Chart 或 Highchart 等价物。我能想到的唯一当前方法是在插件中手动输入所有数据，但这是一个非常痛苦的过程。是否有任何 API 支持这种类型的转换，或者我可以使用转换器将 powerpoint 图表转换为 web 格式？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:39:11.360

在寻找解决方案时，我能找到的最接近的是 HighCharts。这些示例看起来与我想要的完全一样，并且非常易于使用和提供数据。我将所有图表数据复制到记事本，并使用以下代码格式化它们以供在 HighCharts 中使用：

```
 var allfiles = File.ReadAllLines("file.txt");
        foreach (string s in allfiles)
        {
            var line = s.Split('\t');
            var sn = string.Format("['{0}', {1}],\r\n", line[0], line[1]);
            File.AppendAllText("nfile.txt", sn);
        } 
```

见[样本](http://eyapssa.org/apps/1.html)。

# c# - 在接口中指定允许的子类

> ID：12266396
> 
> 赞同：0
> 
> 时间：2012-09-04T15:09:41.623
> 
> 标签：c#, inheritance, syntax

有没有办法为接口指定允许的子类？

假设我有这些课程：

```
public interface IDoable // specify that only A or it's subclasses can implement IDoable
{
    void Do();
}

public class A : IDoable
{
    public void Do(){};
    public void Foo(){};
}

public class B : IDoable // implementing IDoable on something other than A or its sublcasses doesn't make any sense
{
    // public void Do();
} 
```

所以以后我将能够做到这一点：

```
IDoable d = new A();
d.Do();
d.Foo(); // I'd like to be able to do this. 
```

C# 支持这种特性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:13:16.807

不，它没有。一个接口代表一个契约，任何可以访问它的类都可以实现它。

您当然可以通过制作它来限制对它的访问`internal`（因此只有同一个程序集可以访问它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:15:58.627

> 有没有办法为接口指定允许的子类？

不，任何类都可以实现一个接口，只要它可以访问它。接口的全部意义在于向它的消费者*隐藏*具体的类型/实现，所以对我来说，以你建议的方式耦合它是没有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:12:00.067

您可以*投射* `d`到`A`以便能够调用`Foo`它：

```
((A)d).Foo(); 
```

请注意，如果`d`不是`A`，这将引发异常。

其他选项是测试`d`using[`is`](http://msdn.microsoft.com/en-us/library/scekt9xw.aspx)或[`as`](http://msdn.microsoft.com/en-us/library/cscsdfbt)运算符的类型。

这当然与一开始就使用界面的观点背道而驰。

# maven - 需要最新 xjc 版本 2.2.6 的 cxf jar

> ID：12266402
> 
> 赞同：0
> 
> 时间：2012-09-04T15:10:07.073
> 
> 标签：maven, ant, jaxb, jaxb2

谁能告诉我在哪里可以找到包含最新 xjc 版本的 cxf jar。目前我使用的是 2.2.11，与 -xjc-Xannotate 一起使用时会引发错误。你能告诉我我们如何查看 cxf jar 并告诉它里面有最新的 xjc 版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:27:00.253

xjc 是[Oracle/Sun Java Development Kit](http://docs.oracle.com/javaee/5/tutorial/doc/bnbah.html#bnbal)的官方组件。

在 Apache CXF 发行版中，您有供内部使用的 xjc 库。你最好使用JDK xjc。

要知道 cxf 中的 xjc 是哪个版本，只需查看 lib 目录下的文件即可，例如，最新的 cxf 版本（2.6.1）显示 xjc 版本为 2.2.5：

```
apache-cxf-2.6.1/lib/jaxb-xjc-2.2.5.jar 
```

[您可以在JAXB RI](http://jaxb.java.net)中拥有最新版本的 xjc 。目前，最新版本是 2.2.6。

# php - CakePhp 确实更新而不是插入新数据

> ID：12266403
> 
> 赞同：1
> 
> 时间：2012-09-04T15:10:17.780
> 
> 标签：php, mysql, cakephp

我开始使用 cakephp，但现在我遇到了一个我无法解决的问题。

我有以下相关的模型关系：

练习 hasMany Points 学生 hasMany Points,

现在我想检查 studentsController 是否每个练习都有一个点数据集，并且如果不插入一个新的。

当没有点数据集开始时，该函数为第一个正确的练习添加一个新的点数据集，但之后它只更新这个数据集的 erxercise_id，而不是创建新的。

控制器函数如下所示：

```
public function correct($id = null) {
    $this->Student->id = $id;
    $this->Student->recursive = 2;
    if ($this->request->is('get')) {
        $data = $this->Student->Exam->Exercise->find('all');
        foreach($data as $exercise)
        {
            $exerciseID = $exercise['Exercise']['id'];
            $this->Student->Point->recursive = 0;
            $foundPoints = $this->Student->Point->find('all', array('conditions' => array('exercise_id' => $exerciseID)));
            if($foundPoints == null)
            {
                $emptyPoints = array ('Point' => array(
                    'exercise_id' => $exerciseID,
                    'student_id' => $id
                    )
                );
                $this->Student->Point->save($emptyPoints);
            }
            else{
            }
        }

    }
    else //POST
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:12:50.713

如果您必须插入数据，您可以使用这样的 create() 方法：这只是一个示例，使用此行，您每次在数据库中创建新记录并保存数据

```
$this->Student->Point->create();
$this->Student->Point->save($emptyPoints); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:34:11.343

```
$this->Student->Point->id = '';
$this->Student->Point->save($emptyPoints);
or

 $this->Student->Point->saveAll($emptyPoints); 
```

# jboss7.x - FreeBSD 上的 JBoss 7

> ID：12266404
> 
> 赞同：1
> 
> 时间：2012-09-04T15:10:18.657
> 
> 标签：jboss7.x, freebsd

我听说 JBoss 7 没有经过 FreeBSD 认证——对吗？

在哪里可以找到受支持平台的列表？（我花了一些时间谷歌搜索，但没有成功）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:58:17.390

严格来说，没有经过认证的 JBoss 7 操作系统，因为 Red Hat 仅支持 JBoss EAP 6。

JBoss EAP 6 支持的配置（社区 JBoss 7 的支持版本）可以在这里找到：[https ://access.redhat.com/knowledge/articles/111663](https://access.redhat.com/knowledge/articles/111663)

由于 JBoss 是纯 java 应用程序，一个兼容的 JDK 就足以拥有一个受支持的系统。因此，如果您在 FreeBSD 上运行 Oracle 或 IBM JDK，Red Hat 将支持。但是他们还没有用 JBoss 测试它们。

无论如何，如果您希望 Red Hat 支持 EAP，您最好与那里的代表联系以讨论支持的扩展（如果 FreeBSD JDK 有一些合规性错误，他们可能会将您送回 JDK 供应商。如果您选择 RHEL OpenJDK 任何软件堆栈问题都将归咎于一个供应商，而不是重定向到另一个供应商。）

对于社区 JBoss 和其他平台，您将负责使其与您的堆栈一起工作。可以通过运行 JBoss 源中包含的标准合规性测试来执行良好的第一次测试，如果它在您的目标平台和 JDK 上运行，则表明 JBoss 正在处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:16:07.690

**根据 Redhat 的认证支持最多只能达到 6 个：** [https ://access.redhat.com/knowledge/articles/111663](https://access.redhat.com/knowledge/articles/111663)

但是，如果您回顾发布文档，它们并没有改变。操作系统是一样的。

# c# - 如何使用 XmlSerializer 在不同级别指定 XmlElement？

> ID：12266414
> 
> 赞同：2
> 
> 时间：2012-09-04T15:10:55.717
> 
> 标签：c#, xmlserializer

我有一个要序列化为 xml 的类。我想在生成的 xml（元素中的一个元素）中将其中一个属性向下移动一个级别，**而不改变类的结构**。是否可以使用 XmlSerializer 来做到这一点？

一个例子：

生成的xml：

```
<Person>
    <firstname xmlns=\"http://myschema.com\">John</firstname>
    <postcode xmlns=\"http://myschema.com\">N1 0XE</postcode>
</Person> 
```

所需的xml：

```
<Person>
    <firstname xmlns=\"http://myschema.com\">John</firstname>
    <address>
        <postcode xmlns=\"http://myschema.com\">N1 0XE</postcode>
    </address>
</Person> 
```

编码：

```
[Serializable]
[XmlType(Namespace = "http://myschema.com")]
public class Person
{
    [XmlElement("firstname")]
    public string FirstName { get; set; }

    [XmlElement("postcode")]
    public string Postcode { get; set; }
} 
```

序列化器：

```
var xmlSerializer = new XmlSerializer(typeof(Person));
var stringWriter = new StringWriter();
var xmlWriter = XmlWriter.Create(stringWriter);

xmlSerializer.Serialize(xmlWriter, person); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:23:12.763

我知道更改生成的标准输出 xml 的唯一方法是实现[IXmlSerializable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)。因此，您不必更改通用结构，但您必须提供某些方法的实现。

```
public class Person : IXmlSerializable
{
    [XmlElement("firstname")]
    public string FirstName { get; set; }

    [XmlElement("postcode")]
    public string Postcode { get; set; }

    #region IXmlSerializable Member

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        if (reader.Read())
        {
            FirstName = reader.ReadInnerXml();
        }

        reader.Read(); 

        Postcode = reader.ReadInnerXml();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteElementString("firstname ", FirstName);
        writer.WriteStartElement("address");
        writer.WriteElementString("postcode", Postcode);
        writer.WriteEndElement();
    }

    #endregion

    // for demo purposes only !
    public override string ToString()
    {
        return FirstName + ", " + Postcode;
    }

    // source to test the exported file and read it right after!
    Person p = new Person() { FirstName = "jon doe", Postcode = "N1 OX" };

    XmlSerializer xs = new XmlSerializer(typeof(Person));
    StreamWriter sw = new StreamWriter("export.xml");
    xs.Serialize(sw, p);
    sw.Close();

    StreamReader sr = new StreamReader("export.xml");
    Person p1 = xs.Deserialize(sr) as Person;
    Debug.WriteLine(p1.ToString()); 
```

@XmlSubElement - 只有一堆[**可用于 xmlSerialization 的属性**](http://msdn.microsoft.com/en-us/library/83y7df3e.aspx)。不幸的是，**没有** *subElement*或任何可比的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:19:09.987

还有其他两种方法不需要对您的类进行任何更改（甚至不需要实现 IXmlSerializable）：

1.  一个自定义的 XmlWriter，它将`<address>`在写入时包装在一个元素中；
2.  使用合适的 XSL 转换对 XmlSerializer 的输出进行后处理。

# c# - 从单个 WebApi 方法提供多个二进制文件的最佳方法是什么？

> ID：12266422
> 
> 赞同：16
> 
> 时间：2012-09-04T15:11:14.127
> 
> 标签：c#, rest, asp.net-web-api

我有一个 ASP.NET MVC 4 Web Api 控制器方法，它传递文件 ID 列表并返回这些文件的缩略图。

因此，客户端可能会传入一个数字 ID 列表（例如 10、303、29），并且该方法返回一个 List，其中 ThumbnailImage 看起来有点像这样：

```
class ThumbnailImage
{
    public int Id { get; set; }
    // Some other stuff
    public byte[] RawData { get; set; }
} 
```

调用者传入一个 ID 列表而不是对每个项目进行一次调用的原因应该是显而易见的 - 可能有几十个或数百个项目要下载，我试图避免所有需要的 HTTP 流量单独下载它们。

目前，我正在使用 RestSharp 和 JSON.NET，因此我的 ThumbnailImage 对象作为 JSON 通过网络传递。从编码简单性的角度来看，这很好，但 JSON 不是表示二进制数据的有效方式。

所以，我认为我应该将原始字节作为八位字节流返回......但是，虽然我可以轻松地为单个图像执行此操作，但我不确定为多个图像执行此操作的最佳方法，特别是当我还需要返回每个文件的 ID 和其他信息时。（ID 是必需的，因为结果不一定会按给定顺序返回 - 并且某些文件可能会丢失）。

我*可以*简单地将所有内容零碎地写入响应流，以便为每个项目写入 ID（适当编码），然后是图像数据的长度，然后是图像数据本身，然后是相同的内容下一项，等等。

然后，调用者将简单地继续从流中读取，直到用尽，对 ID 的编码（和长度！）等做出假设。

我认为这会奏效，但它似乎很笨拙 - 有没有更好的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-08T21:14:38.017

好的，这是一段似乎可以工作的代码片段，它使用了 KiranChalla 提到的 MultipartContent。（这只是一个虚拟示例，它展示了如何返回两个不同类型的文件，以及一个 JSON 编码的“对象”（在这种情况下，它只是一个整数 ID 列表）。

```
public HttpResponseMessage Get()
{
    var content = new MultipartContent();
    var ids = new List<int>() { 1, 2 };

    var objectContent = new ObjectContent<List<int>>(ids, new System.Net.Http.Formatting.JsonMediaTypeFormatter());
    content.Add(objectContent);

    var file1Content = new StreamContent(new FileStream(@"c:\temp\desert.jpg", FileMode.Open));
    file1Content.Headers.ContentType = System.Net.Http.Headers.MediaTypeHeaderValue.Parse("image/jpeg");
    content.Add(file1Content);

    var file2Content = new StreamContent(new FileStream(@"c:\temp\test.txt", FileMode.Open));
    file2Content.Headers.ContentType = System.Net.Http.Headers.MediaTypeHeaderValue.Parse("text/plain");
    content.Add(file2Content);

    var response = new HttpResponseMessage();
    response.Content = content;
    return response;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:14:33.837

您可以从所有缩略图中创建一个压缩文件（例如 ZIP 文件）并将其发回。

然后调用者只需将其解压缩 - 发送包含多个文件的单个文件将比在单个流中发送多个文件更容易接受。

缺点是您不太可能利用缓存（当然取决于您的使用模式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:48:09.620

我看到的一个挑战是，根据发回的图像数量，调用者必须调整它们的超时值。如果这是书店，可能会发回很多图像。

如果您只发回每张图片的 url 并将其留给调用者获取实际图片怎么办？这意味着多次调用会增加一点流量，但调用者会迟早得到信息，然后根据调用者的要求获取图像。

我可能是错的，但我认为 rest 背后的想法是识别每个资源，而不是捆绑一堆图像并将其称为资源。只是一个想法...

# iphone - 如何在ios的模态视图中使导航栏变黑

> ID：12266427
> 
> 赞同：0
> 
> 时间：2012-09-04T15:11:34.747
> 
> 标签：iphone, ios, uicolor, uimodalpresentationstyle

我做了一个模态视图。我不想要默认颜色。如何将其导航设置为黑色？

这是我的代码不起作用：

```
EditBillItemModalViewController *editBillItemvc = [[EditBillItemModalViewController alloc] init];
editBillItemvc.anItem = anItem;
editBillItemvc.navigationController.navigationBar = [UIColor blackColor];
editBillItemvc.onOKButtonClickedCallBack = ^(Item item){ [aBill.listOfOrderedItem replaceObjectAtIndex:bvc.selectedItemIndex withObject:item]; [(UITableView)bvc.view reloadData]; [self setnewTotalAfterEditBillItem]; }; 
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:editBillItemvc]; 
[self presentModalViewController:navController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:13:22.703

假设它有一个`UINavigationController`你可以做的：

`modalView.navigationController.navigationBar.tintColor = [UIColor blackColor];`

**添加代码后编辑：**

从您的代码看来，这是您的一连串事件：

1.  实例化视图控制器
2.  将条形 tintColor 设置为黑色
3.  实例化导航控制器
4.  将导航控制器呈现为模态视图

显然，这是行不通的，因为您在实例化导航控制器之前要更改色调颜色。

因此，您需要将第 2 步移到 3 和 4 之间，或者在此行之后更容易：

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:editBillItemvc]; 
```

只是说：

```
navController.navigationBar.tintColor = [UIColor blackColor]; 
```

# html - 如何摆脱 HTML 元素文本高度中不需要的额外空间？

> ID：12266440
> 
> 赞同：4
> 
> 时间：2012-09-04T15:12:13.307
> 
> 标签：html, css, safari, space

**问题：**

最好在使用 H2 元素时进行描述。当这个元素的高度是你设计的关键时，你会遇到一个巨大的问题。多个设备上的高度不同，因此真的会搞砸您的设计。

如下图所示。问号旁边的黑色空间显示了移动 safari 上出现的不需要的“额外空间”。

![在此处输入图像描述](../Images/090dcda55545b99dd576ba608fb08507.png)

**自己试试**

我找到了一种您可以自己测试的方法。只需在不同的设备上打开此链接，您就会发现实际高度与完全相同的代码段不同。

[http://jsfiddle.net/RwPk7/40/](http://jsfiddle.net/RwPk7/40/)

**研究**

```
 - MAC Chrome  : 18px 
 - MAC Safari  : 18px
 - MAC Firefox : 17px
 - iPad        : 20px
 - iPhone      : 20px
 - Android     : 19px
 - WIN Chrome  : 18px
 - WIN IE      : 18px 
```

**可能的答案**

```
font-size: 13px; 
line-height: 1.231; // Borrowed from HTML5 Boilerplate 
```

[http://jsfiddle.net/RwPk7/45/](http://jsfiddle.net/RwPk7/45/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T15:44:19.340

似乎是在 Mobile Safari 中如何实现粗体文本的问题。这似乎在没有粗体文​​本的两种浏览器中都有效：http: [//jsfiddle.net/RwPk7/23/](http://jsfiddle.net/RwPk7/23/)

但是，粗体文本在每种情况下呈现在不同的高度，再加上浏览器默认将文本垂直居中到行高的事实使得简单的通用解决方案变得困难。

因此，如果您可以不使用粗体文本，这应该没问题。

# php - 如何防止 XMLWriter 将空行附加到输出的 XML 文件？

> ID：12266441
> 
> 赞同：1
> 
> 时间：2012-09-04T15:12:17.853
> 
> 标签：php, xml, validation, schema, xmlwriter

以下代码创建一个 XML 文件，但最后一行是空白的，这会在验证时导致问题。

如何更改以下代码，以使输出的文件末尾没有空行？

```
<?php
$xmlFileName = 'testoutput.xml';

$xml = new XMLWriter;
$xml->openURI($xmlFileName);
$xml->startDocument('1.0', 'UTF-8');
$xml->setIndent(1);

$xml->startElement('name');
$xml->text('jim');
$xml->endElement();

$xml->endDocument();
$xml->flush();      
?> 
```

@DavidRR，当我使用以下代码验证 XML 文件时出现验证问题，它告诉我“文档末尾有额外内容”：

```
$schema = 'test.xsd';
$files[] = 'test1.xml';
$files[] = 'test2.xml';

foreach ($files as $file) {
    validateXml($file, $schema);
}

function validateXml($xmlFile, $xsdFile) {
    $dom = new DOMDocument;
    $dom->load($xmlFile);
    libxml_use_internal_errors(true); // enable user error handling
    echo "Validating <b>$xmlFile</b> with <b>$xsdFile</b>:";
    if ($dom->schemaValidate($xsdFile)) {
        echo '<div style="margin-left:20px">ok</div>';
    } else {
        $errors = libxml_get_errors();
        if (count($errors) > 0) {
            echo '<ul style="color:red">';
            foreach ($errors as $error) {
                //var_dump($error);
                echo '<li>' . $error->message . '</li>';
            }
            echo '</ul>';
        }
        libxml_clear_errors();
        echo '</span>';
        libxml_use_internal_errors(false); // enable user error handling
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:39:56.927

我发现没有办法改变`XmlWriter`这方面的行为。一个可能的解决方法是读取文件，`trim`然后将其写回文件，例如

```
file_put_contents($xmlFileName, trim(file_get_contents($xmlFileName))); 
```

[演示](http://codepad.viper-7.com/iYeUVI)

另一种方法是`ftruncate`文件

```
ftruncate(fopen($xmlFileName, 'r+'), filesize($xmlFileName) - strlen(PHP_EOL)); 
```

[演示](http://codepad.viper-7.com/6qrKBI)

后者假定文件中将有一个依赖于平台的换行符。如果没有，那么这可能会破坏文件。该`trim`版本在这方面更加可靠，因为如果没有换行符，它不会损坏文件，但它必须将整个文件读入内存才能修剪内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:05:01.960

如果你在 linux/unix 系统上，你可以这样做：

```
$test = `head -n -1 < $xmlFileName > $xmlFileName`; 
```

[看到这个。](https://stackoverflow.com/a/4743710/1273830)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:27:38.480

**报告的问题：**由于 XML 文件末尾存在空行，因此对文件的架构验证尝试会导致错误：

```
"Extra content at the end of the document" 
```

我无法在[codepad](http://codepad.viper-7.com/K4fsY5)、 PHP 版本**5.4-dev**或该站点上的任何早期版本的 PHP 上重现您所说的问题。我在这里也包括我编辑的代码版本。（我的版本包括创建简单 XSD 和 XML 文件的功能。）

**可能性：**您的问题可能与您使用的 PHP 版本有关吗？

如果我对您的代码的改编没有准确地测试您的场景，请进一步修改我的代码以沉淀问题。

```
<?php

$xsdFile = sys_get_temp_dir() . '/test1.xsd';
$xmlFile = sys_get_temp_dir() . '/test1.xml';

createXsdFile($xsdFile);
createXmlFile($xmlFile);

$files[] = $xmlFile;

foreach ($files as $file) {
    validateXml($file, $xsdFile);
}

function validateXml($xmlFile, $xsdFile) {
    $dom = new DOMDocument;
    $dom->load($xmlFile);

    libxml_use_internal_errors(true); // enable user error handling
    echo "Validating <b>$xmlFile</b> with <b>$xsdFile</b>:";
    if ($dom->schemaValidate($xsdFile)) {
        echo '<div style="margin-left:20px">ok</div>';
    } else {
        $errors = libxml_get_errors();
        if (count($errors) > 0) {
            echo '<ul style="color:red">';
            foreach ($errors as $error) {
                //var_dump($error);
                echo '<li>' . $error->message . '</li>';
            }
            echo '</ul>';
        }
        libxml_clear_errors();
        echo '</span>';
        libxml_use_internal_errors(false); // enable user error handling
    }
}

function createXsdFile($xsdFile) {
    $file = fopen($xsdFile, 'w');
    fwrite($file, "<?xml version='1.0' encoding='utf-8'?>\n");
    fwrite($file, "<schema xmlns='http://www.w3.org/2001/XMLSchema'>\n");
    fwrite($file, "<element name='name' type='string' />\n");
    fwrite($file, "</schema>\n");
    fclose($file);
}

//
// Appends a blank line at the end of the XML file.
// Does this cause a schema validation problem?
//
function createXmlFile($xmlFile) {
    $xml = new XMLWriter;
    $xml->openURI($xmlFile);
    $xml->startDocument('1.0', 'UTF-8');
    $xml->setIndent(1);

    $xml->startElement('name');
    $xml->text('jim');
    $xml->endElement();

    $xml->endDocument();
    $xml->flush();
}
?> 
```

# xquery - xquery-如何计算一个字符串在另一个字符串中出现的次数+第一个和最后一个occ。这个字符串的

> ID：12266445
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:12:27.063
> 
> 标签：xquery

我正在尝试从 XHTML 文档中提取一些名称——

现在我已经弄清楚如何在一段 XQuery 代码中提取所有这些名称——

例如 -

```
<div class="names">
    <b>Names</b>
    <a href="http://name1.com">A B.C D</a>
    <a href="http://name1.com">E F G</a>
    <a href="http://name1.com">H I</a>
</div> 
```

我想提取名字/中间名/姓氏，我了解如何使用一些字符串函数——我首先想知道的是，在上面的一个名字中出现空格的次数，以及位置空间的第一次和最后一次出现。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:39:44.850

众多解决方案之一：

```
let $doc :=
  <div class="names">
    <b>Names</b>
    <a href="http://name1.com">A B.C D</a>
    <a href="http://name1.com">E F G</a>
    <a href="http://name1.com">H I</a>
  </div>
for $a in $doc//a
return
  let $text := $a/text()
  let $spaces := index-of(string-to-codepoints($a), 32)
  return <result text="{ $text }" spaces="{ count($spaces) }"
    first="{ $spaces[1] }" last="{ $spaces[last()] }"/> 
```

[但是，使用正则表达式](http://en.wikibooks.org/wiki/XQuery/Regular_Expressions)可能比使用字符位置更容易。

# jquery - jquery手机图片不显示

> ID：12266446
> 
> 赞同：1
> 
> 时间：2012-09-04T15:12:33.303
> 
> 标签：jquery, image, mobile, jquery-mobile

我一直在开发我的第一个 JQM 网站，现在只是将其上线，但有一个大问题。在我的测试站点上，图像都显示正常，但在我的实时站点上，它们不显示。

如果我查看 HTML 图像源是

```
img src="path/to/image.jpg" 
```

如果我在 FireFox 中使用 firebug 来查看图像源，它是

```
img src="http://www.mysite.com/myCategorypath/to/image.jpg" 
```

所以看起来有些东西正在将完整路径添加到图像源 URL 的开头。

会不会是 JQM 这样做？我不确定，因为图像在我的测试站点上显示正常。我注意到的一件事是，如果我点击浏览器刷新图像就会出现。

我真的很困惑如何解决这个问题。谁能建议我可以看的任何东西？

编辑：看起来肯定是 JQM 这样做，因为如果我从服务器中删除 JQM，我的所有图像都会正确显示并且图像 url 不会被修改。有什么想法可以阻止 JQM 弄乱图像路径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:35:08.383

我有办法！我的图像没有显示的原因是因为我正在重写我的 URL，所以浏览器显示 www.mysite.com/myCategory，JQM 错误地为我的图像添加了 www.mysite.com/myCategory 的前缀，但真正的 url 是 www。 mysite.com/index.php?path=xxx

要解决此问题，请将带有前导斜杠的图像源生成为 img src="/path/to/image.jpg" 而不是 img src="path/to/image.jpg"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:29:03.140

这只是一种预感，但可能是因为您使用的是相对路径？也许您可以尝试绝对路径，例如：

```
img src="path/to/image.jpg" 
```

我从经验中知道 JQuery Mobile 在相对路径上可能很挑剔，所以我所有的 css/js/html 引用都是绝对的。

# mule - 查询 Mule ESB VM 队列中的消息数

> ID：12266455
> 
> 赞同：0
> 
> 时间：2012-09-04T15:12:59.977
> 
> 标签：mule

在 Mule 流程中，我想添加一个异常处理程序，当出现异常时将消息转发到“重试队列”。但是，我不希望这个重试逻辑自动运行。相反，我宁愿收到通知，以便查看错误，然后决定是否重试队列中的所有消息。

我不想收到每个异常的通知。我宁愿有一个每 15 分钟运行一次的计划作业，并检查此重试队列中是否有消息，然后仅在有时发送通知。

有什么方法可以确定持久 VM 队列中当前有多少消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:28:49.960

假设您使用默认的 VM 队列持久性机制并且 VM 连接器名为`vmConnector`，您可以执行以下操作：

```
final String queueName = "retryQueue";
int messageCount = 0;

final VMConnector vmConnector = (VMConnector) muleContext.getRegistry()
    .lookupConnector("vmConnector");

for (final Serializable key : vmConnector.getQueueProfile().getObjectStore().allKeys())
{
    final QueueKey queueKey = (QueueKey) key;
    if (queueName.equals(queueKey.queueName))
    {
        messageCount++;
    }
}

System.out.printf("Queue %s has %d pending messages%n", queueName, messageCount); 
```

# sql - 使用 T-SQL 从逗号分隔的数组中选择精确的表记录

> ID：12266459
> 
> 赞同：1
> 
> 时间：2012-09-04T15:13:13.690
> 
> 标签：sql, tsql

这我无法理解我的简单大脑。以逗号分隔的订购产品数组被传递给如下过程：

```
set @array = 'productID_47, productID_4'

select productID, price from Products 
where @array like '%' + productID + '%' 
```

返回两条记录。伟大的。但是，如果我有：

```
set @array = 'productID_47'

select productID, price from Products 
where @array like '%' + productID + '%' 
```

同样，返回两条记录，这不是我想要的。遗憾的是，产品代码是固定的。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:15:35.563

我假设只有一个项目时没有逗号`@array`：

```
select productID, price 
from Products  
where @array = productID --only one item, can use index
    or @array like productID + ',%'  --array starts with item, can use index
    or @array like '%, ' + productID + ',%' --item is in the middle of @array, cannot use index
    or @array like '%, ' + productID --item is at the end of @array, cannot use index
    or @array like '%,' + productID 
```

# javascript - CSS3卡片翻转动画，不支持检测

> ID：12266466
> 
> 赞同：3
> 
> 时间：2012-09-04T15:13:26.713
> 
> 标签：javascript, jquery, html, css

我在我的项目中使用 3d 卡片翻转动画。如本网站所示（[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)）

我想检测浏览器何时支持这种动画。例如，如果您有 Windows XP/旧驱动程序，Chrome 可能不会默认支持它，因为它可能会导致崩溃。当 Chrome 不支持它时，它会显示镜像的名称，并且动画不会是 3d（对我来说）。

我检查了两种不同的检测方法：
[如何在没有 webkit 上下文的情况下检测 CSS translate3d？](https://stackoverflow.com/questions/11628390/how-to-detect-css-translate3d-without-the-webkit-context) 并从
[Detecting 'transform: translate3d' support](https://stackoverflow.com/questions/5661671/detecting-transform-translate3d-support)
var has3d = function() { return ('WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix()); }

两者都给了我一个真实的价值。不支持什么以及如何在不使用 Modernizr 之类的库的情况下检测该属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:16:25.013

您应该使用 Modernizr 来检测用户的浏览器是否支持进行卡片翻转所需的一切。它正是为此目的而创建的，并且比您必须找到和维护自己的解决方案时更有效地完成工作。随着浏览器的发展，modernizr 也将如此，您不必担心您的功能检测是否会中断

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:40:50.043

您是否被迫使用 CSS3？

[Flip](http://lab.smashup.it/flip/)兼容所有主流浏览器...

# mysql - 将一个 MySQL 表的 ID 名称连接到另一个表中的 ID

> ID：12266471
> 
> 赞同：2
> 
> 时间：2012-09-04T15:13:48.897
> 
> 标签：mysql, inner-join

我有一个由 ID 标识的客户详细信息表，如下所示：

```
ID (the clientcode), Name, Details 
```

我想从另一个包含销售信息的表中引用 ID，并在查询中获取客户的名称。

我的原始查询字符串只获取了 ID（客户端代码）是这样的：

```
SELECT clientcode, SUM(sales) FROM inventory WHERE manufacturer='1' 
  GROUP BY client code ORDER BY SUM(sales) DESC 
```

我还想获取客户端代码引用的客户端名称。

我尝试了一些 LEFT JOIN，但无法使查询正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:18:33.117

```
SELECT i.clientcode
     , c.name
     , SUM(i.sales)
  FROM inventory i
  LEFT
  JOIN clientdetails c
    ON c.id = i.clientcode
 WHERE i.manufacturer='1' 
 GROUP BY i.clientcode, c.name
 ORDER BY SUM(i.sales) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:18:18.760

这应该这样做

```
SELECT c.ID, c.name, SUM(i.sales) 
FROM inventory i
JOIN clients c ON c.ID = i.clientcode
WHERE i.manufacturer='1' 
GROUP BY c.ID, ORDER BY SUM(i.sales) DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:19:37.300

实现此目的的一个简单查询是：

```
SELECT i.clientcode, d.name, SUM(i.sales) FROM inventory i, details d
WHERE i.manufacturer='1'
  AND d.clientcode = i.clientcode
GROUP BY i.clientcode ORDER BY SUM(i.sales) DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:20:03.723

来，试试这个。

```
SELECT  inventory.clientcode, 
        SUM(inventory.sales),
        clientdetails.Name
FROM inventory 
        INNER JOIN clientdetails
            ON inventory.clientcode = clientdetails.clientcode
WHERE inventory.manufacturer='1' 
GROUP BY inventory.clientcode, clientdetails.Name
ORDER BY SUM(inventory.sales) DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T15:23:23.143

```
SELECT  a.clientcode, 
        SUM(a.sales),
        b.Name
FROM inventory a
        INNER JOIN clientdetails b
            ON a.clientcode = b.clientcode
WHERE a.manufacturer='1' 
GROUP BY a.clientcode, b.Name
ORDER BY SUM(a.sales) DESC 
```

# java - 如何在 Eclipse 中配置外部工具以运行 jar 文件并加载其他类文件？

> ID：12266472
> 
> 赞同：0
> 
> 时间：2012-09-04T15:13:48.933
> 
> 标签：java, eclipse, jar, external-tools

在 Eclipse Indigo（在 Mac OSX 上）中，我有一个项目“测试”。在这个项目中，我有一个包“test1”。在这个包中，我有一个类 Test.java。

简而言之，文件结构是：Test/src/Test.java 和
Test/bin/Test.class

我在 lib 文件夹中有一个库**mylib.jar 。**

我还有一个名为**info.dat**的数据文件。在 info.dat 中，有关于要加载哪个类的信息。例如，在 info.dat 中，我指定：**class=Test** 然后，当我运行时：

```
$  java -jar lib/mylib.jar info.dat  

(NOTE: this works if I run this command in terminal and have class file in the same folder with info.dat) 
```

mylib.jar 中的 main 函数将加载 Test.class。

我正在使用**外部工具**来实现这一点。这是我的外部工具设置：

```
Location: /usr/bin/java
Working Location: /path/to/Test_folder
Argument: -cp . -jar lib/mylib.jar bin/test1/info.dat 
```

但是，当我尝试运行时，出现此错误：

```
LOADING INFO FROM FILE bin/test1/info.dat
=> Current directory=[not include because not important]
=> Full pathname=[not include because not important]
java.lang.ClassNotFoundException: Test 
```

我也尝试在 info.dat 中更改**class=** test.Test 但遇到类似错误

```
java.lang.ClassNotFoundException: test1.Test 
```

结果显示 info.dat 加载正常，但类文件的路径不正确。我应该如何配置外部工具来做我需要的事情？有人可以给我一些指导吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:04:09.023

这是一个使用运行配置的简单解决方案。我只需要从 Java Application 中的 mylib.jar 中选择主类并将 info.dat 放入参数字段中。

很抱歉在这里浪费资源。

# javascript - 一次重定向

> ID：12266477
> 
> 赞同：0
> 
> 时间：2012-09-04T15:14:13.270
> 
> 标签：javascript, html, css, redirect

有没有办法进行一次性重定向？它转到入口页面，并说进入站点，然后转到 index.html 页面。

我正在努力完成的最好的例子：www.matisyahuworld.com

有一个页面 order.html 是您在进入 index.html 页面之前看到的第一页

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:17:43.290

是的，您必须检查用户是否是新用户。我知道如何做到这一点的唯一方法是使用`javascript`cookie :)

```
document.cookie = 'unique_user = second time visitor; 
                   expires = date you want; path=/' 
```

当然，一切都变得更容易`jQuery`：

```
$.cookie("example", "foo"); 
```

逻辑是，检查您是否`cookie`存在于客户端浏览器中，如果存在，请不要放置启动页面并直接重定向到`index.html`. 如果没有`cookie`发送到splash, `splash.html`, 并设置在`cookie`那里。

这是一个很好的资源： [Javascript Cookies](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:30:33.597

*setcookie*使用起来更简单：

```
$expire=time()+60*60*24*30;
setcookie(user,visited, $expire);
if(isset($_COOKIE["user"]))
{
    RedirectToURL("index.html");
} 
```

*创建函数 RedirectToURL*

```
function RedirectToURL($url)
{
    header("Location: $url");
    exit;
} 
```

**注意：**上面的代码可以用于 PHP 脚本。但它很简单。只需将上面的行添加到

```
<?PHP 
```

并以

```
?> 
```

您还必须使用 .php 扩展名保存文件

# rabbitmq - 将消息路由到一个且只有一个队列

> ID：12266488
> 
> 赞同：1
> 
> 时间：2012-09-04T15:14:45.323
> 
> 标签：rabbitmq, amqp

我有一个主题交换，我想从中将消息分发到集群的两台服务器上的两个队列，以减少任何特定服务器上的内存压力。我的消费者周期性地变慢，我有时会遇到高内存水印。

我试图解决这个问题的方法是使用中间直接交换路由消息，两个队列绑定到交换：

```
a (topic) -> a1 (direct) -> q1/q2 (bound to routing key "a") 
```

但正如 AMQP 所期望的那样，消息被路由到两个队列。有人有想法吗？我需要的是一个路由到一个且只有一个队列的交换，即使路由键匹配许多队列。我不想更改我的路由键，但可以安排。

我发现[使用 RabbitMQ 进行选择性路由](https://stackoverflow.com/questions/9966354/selective-routing-with-rabbitmq)，这可能意味着我需要实现自己的路由逻辑。希望这已经存在于其他地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:39:17.847

您也许可以使用 Shovel 插件 - [http://www.rabbitmq.com/shovel.html](http://www.rabbitmq.com/shovel.html) - 将消息从中间交换移动到两个队列。

如果您设置了两个铲子，它们都从直接中间交换的单个队列中消耗，它们应该能够争夺传入的消息（我假设您不会太在意两个接收队列不' t 以严格的循环方式获取传入消息）。然后，铲子各自发布到两个端队列之一，并可以通过来自最终消费者的 ACK 发送。

# ruby-on-rails-3 - Rails 时区错误？

> ID：12266489
> 
> 赞同：2
> 
> 时间：2012-09-04T15:14:45.477
> 
> 标签：ruby-on-rails-3, heroku, timezone

我对时区“圣地亚哥”有疑问。智利从 9 月 1 日起改为夏令时 (GMT -3)。

> > Time.now.in_time_zone("Santiago") => Tue, 04 Sep 2012 10:57:43 CLT -04:00 <<-- 错误，应该是 11:57:43 CLT -03:00

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:33:04.627

时区数据由 tzdata gem 提供。Rails 需要一个相当最新的版本（Rails 3.2.8 的 iirc 至少为 0.3.31），但由于时区定义的寿命很短，有时您需要手动更新它们。在您的情况下，您至少需要 0.3.32 ，其中包括智利 DST 的更改。在撰写此答案时，tzdata 的当前版本是 0.3.33。

要强制更新版本的 tzdata，只需将其添加到您的`Gemfile`：

```
gem 'tzdata', '~> 0.3.33' 
```

# facebook - 使用访问令牌直接登录 facebook

> ID：12266498
> 
> 赞同：1
> 
> 时间：2012-09-04T15:15:03.720
> 
> 标签：facebook, api, facebook-graph-api, facebook-login

如果我们有用户名和密码，我们如何使用访问令牌直接登录 Facebook。

是否有任何脚本或图形 API 方法允许直接登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:30:44.590

我假设您所指的访问令牌是 OAuth 访问令牌。 [OAuth 的规范](https://www.rfc-editor.org/rfc/rfc5849)指出：

```
Unlike the resource owner credentials, tokens can be issued with a restricted scope... 
```

因此，拥有访问令牌并不能让您完全访问该帐户，这就是您无法使用它登录的原因。

至于用户名和密码，这正是您登录所需要的。要动态访问帐户，您需要一个 HTTP 客户端，例如[RestClient](https://github.com/adamwiggins/rest-client)（用于 Ruby）或[HttpClient](http://scripts.incutio.com/httpclient/)（用于 PHP）来发送请求和接收响应。

# android - Android中的重复补间动画：一些问题

> ID：12266499
> 
> 赞同：1
> 
> 时间：2012-09-04T15:15:04.760
> 
> 标签：android, repeat, tween

我用下面的代码在 Android 中尝试了重复动画，但没有这样做。

```
Animation a = AnimationUtils.loadAnimation(this, R.anim.animation);
a.reset();
ImageView rText = (ImageView) findViewById(R.id.ImageView01);
a.setRepeatMode(Animation.RESTART); 
a.setRepeatCount(Animation.INFINITE);
rText.startAnimation(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:01:39.760

宣布

```
 android:repeatCount="infinite" 
```

在你的动画.xml

然后在你的代码中

```
 ImageView rText = (ImageView) findViewById(R.id.ImageView01);
   Animation a = AnimationUtils.loadAnimation(this, R.anim.animation);
   rText.startAnimation(a); 
```

# php - PHP 和 MagicMethods

> ID：12266501
> 
> 赞同：1
> 
> 时间：2012-09-04T15:15:18.583
> 
> 标签：php, oop

我编写了一些类来使用 C# 中的字符串。

这里是：

```
class String {

        private $origin_string = null;
        private $result_string = null;

        function __construct($string)
        {
            $this->origin_string = $string;
            $this->result_string = $this->origin_string;
        }

        public function Trim()
        {
            $this->result_string = Trim($this->result_string);
            return $this->result_string;
        }

        public function StartWith($string)
        {
            return (substr($this->result_string, 0, strlen($string)) === $string);
        }

        public function EndWith($string)
        {
            $endlen = strlen($string);
            $strlen = strlen($this->result_string);
            return (substr($this->result_string, $strlen - $endlen, $endlen) === $string);
        }

        public function Contains($string) {
            return (strpos($this->result_string, $string) !== false);
        }

        public function Replace($search, $string) {
            $this->result_string = str_replace($search, $string, $this->result_string);
            return $this->result_string;
        }

        public function __invoke($string) {
            $this->origin_string = $string;
            $this->result_string = $this->origin_string;
            return $this;
        }

        public function __toString()
        {
            return $this->result_string;
        }

        public static function Override($string)
        {
            return new self($string);
        }

    } 
```

正在使用：

```
$s = new String("My custom string");

if ($s->StartWith("My"))
    $s->Replace("custom", "super");

print $s; // "My super string" 
```

为了更正从对象打印我的文本，我使用魔术方法 __toString()。

**问题：** 有没有一种方法，逆__toString？这样我们就可以写：

```
$s = "new text"; 
```

并且该行被分配给对象内的变量。

（$s - 上例中的现有对象“String”。）

方法 __set 的类似物，仅与对象有关，与其中的变量无关。

在使用 __invoke 时，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:19:04.610

不。

`$s = "new text";`将（原生 PHP）字符串分配给`"new text"`变量`$s`. 它会覆盖`$s`之前的任何内容。`$s`如果`$s`是一个对象，它不会调用任何方法。

你必须改变 PHP 的核心行为来实现类似的东西。您将始终必须显式调用`String`对象上的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:27:06.003

对您的直接问题的简短回答是“不，在 PHP 中没有任何方法可以做到这一点”。

字符串是 PHP 中的一种原始数据类型，它不执行运算符重载或启用此类事情所需的任何其他功能。

而且，因为它们是原始数据类型，所以没有必要将它们封装在这样的对象结构中。PHP 的 OO 功能在最近的版本中取得了长足的进步，但从本质上讲，它仍然不是一种完全的 OO 语言。

事实上，我会说你正在做的事情适得其反。您将字符串的概念包装到一个功能比基本 PHP 少得多的类中。您正在编写一整套代码，以便在一行代码中完成已经可以在一行代码中完成的事情，并且您限制了做更多事情的能力。

例如，你有`Contains()`and`StartsWith()`方法，但它们不以任何方式处理正则表达式。

你将如何处理连接？那么将变量嵌入字符串呢？

PHP 有*很多*字符串处理功能（事实上，字符串处理是它的强项之一），您的类将无法复制这些功能。

我建议使用您所获得的语言，而不是试图强迫它符合您的语法理想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:19:54.240

不，您不能直接为您的对象赋值。PHP 不允许运算符重载和这种样式赋值。您必须使用构造函数、调用或任何 setter 方法为字符串分配新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:21:17.233

你可以这样写：

```
$s = 'myclass';
$o = new $s(); 
```

或者，如果您想“编译”新关键字，您可以这样做：

```
$s = '$x = new myclass();';
eval($s); 
```

希望这可以帮助。

# android - Android MediaPlayer 停止和播放

> ID：12266502
> 
> 赞同：32
> 
> 时间：2012-09-04T15:15:19.173
> 
> 标签：android, media-player

我正在创建包含 2 个按钮的 Android 应用程序，点击每个按钮播放一个 mp3 文件。问题是当我播放`button1`它`sound1`时，当我点击`button2`它时`sound2`。

我检查另一个播放器的每个按钮是否正常工作，然后我停止它并播放点击的那个

但是，如果我两次单击相同的按钮，它将保持第一个音频在后台播放并再次播放另一个

我试图检查`isPlaying()`并阻止它，但它不起作用！

我想如果我点击`button1`它播放`sound1`，如果再次点击它，它会停止它并从头开始再次播放。

我的代码：

```
package com.hamoosh.playaudio;
import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class PlayaudioActivity extends Activity {
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button b= (Button) findViewById(R.id.button1);
        Button b2= (Button) findViewById(R.id.button2);
        final TextView t= (TextView) findViewById(R.id.textView1);

        final MediaPlayer mp = MediaPlayer.create(PlayaudioActivity.this, R.raw.far);
        final MediaPlayer mp1 = MediaPlayer.create(PlayaudioActivity.this, R.raw.beet);

        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (mp1.isPlaying()) {

                    mp1.stop();
                }

                mp.start();
            }

        });

        b2.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (mp.isPlaying()) {

                    mp.stop();
                }
                mp1.start();
            }
        });
    }
} 
```

希望是否有更好的代码可以将多个按钮用作数组或不每次都检查每个按钮和播放器的东西。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-04T15:25:46.623

您应该只使用一个媒体播放器对象

```
 public class PlayaudioActivity extends Activity {

        private MediaPlayer mp;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Button b = (Button) findViewById(R.id.button1);
            Button b2 = (Button) findViewById(R.id.button2);
            final TextView t = (TextView) findViewById(R.id.textView1);

            b.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    stopPlaying();
                    mp = MediaPlayer.create(PlayaudioActivity.this, R.raw.far);
                    mp.start();
                }

            });

            b2.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    stopPlaying();
                    mp = MediaPlayer.create(PlayaudioActivity.this, R.raw.beet);
                    mp.start();
                }
            });
        }

        private void stopPlaying() {
            if (mp != null) {
                mp.stop();
                mp.release();
                mp = null;
           }
        }
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-08T22:45:54.640

要在不存在非法状态异常风险的情况下停止媒体播放器，您必须执行

```
 try {
        mp.reset();
        mp.prepare();
        mp.stop();
        mp.release();
        mp=null;
       }
  catch (Exception e)
         {
           e.printStackTrace();
         } 
```

而不仅仅是

```
try {
       mp.stop();
       mp.release();
       mp=null;
    } 
catch (Exception e) 
    {
      e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T15:26:23.813

根据您可以在[Android API指南](http://developer.android.com/reference/android/media/MediaPlayer.html)`MediaPlayer`中查看的生命周期，我认为您必须调用而不是调用，然后再次准备媒体播放器（仅使用一个）从头开始播放声音。还要考虑到声音可能已经结束。因此，我还建议实施以确保如果您再次尝试播放声音，它不会失败。`reset()``stop()``setOnCompletionListener()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-26T12:10:49.350

我可能没有得到你的答案正确，但你可以试试这个：

```
public void MusicController(View view) throws IOException{
    switch (view.getId()){
        case R.id.play: mplayer.start();break;
        case R.id.pause: mplayer.pause(); break;
        case R.id.stop:
            if(mplayer.isPlaying()) {
                mplayer.stop();
                mplayer.prepare(); 
            }
            break;

    }// where mplayer is defined in  onCreate method} 
```

因为只有一个线程处理所有问题，所以 stop() 使它死亡，所以我们必须再次准备它如果您的意图是在按下开始按钮时再次启动它（它会引发 IO 异常）或者为了更好地理解 MediaPlayer，您可以参考[安卓媒体播放器](https://developer.android.com/reference/android/media/MediaPlayer)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-31T17:48:18.433

万一有人提出这个问题，我有更简单的版本。

```
public static MediaPlayer mp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b = (Button) findViewById(R.id.button);
        Button b2 = (Button) findViewById(R.id.button2);

        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                mp = MediaPlayer.create(MainActivity.this, R.raw.game);
                mp.start();
            }
        });

        b2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mp.stop();
               // mp.start();
            }
        });
    } 
```

# yii - Yii 在 CMenu 的“可见”属性中添加条件

> ID：12266516
> 
> 赞同：1
> 
> 时间：2012-09-04T15:16:23.260
> 
> 标签：yii

我想通过将菜单项限制为一个用户来在 CMenu 中显示一个条件，例如，名称为“admin”。我正在写这个

```
'items'=>array(
            array('label'=>'Logs','url'=>array('actionLogs/admin'),'icon'=>'wrench white',
            'visible'=>!Yii::app()->user->isGuest), 
```

这种情况工作正常。接下来，我尝试使能见度的条件复杂化一点，但它根本失败了

```
'items'=>array(
                array('label'=>'Logs','url'=>array('actionLogs/admin'),'icon'=>'wrench white',
                'visible'=>'!Yii::app()->user->isGuest && Yii::app()->user->name=="admin"'), 
```

我怎样才能实现我想要做的事情？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:57:09.560

好的，找到了解决方案。对于那些会遇到同样问题的人，这里是代码：

```
'items'=>array(
                array('label'=>'Logs','url'=>array('actionLogs/admin'),'icon'=>'wrench white',
                'visible'=>(!Yii::app()->user->isGuest && Yii::app()->user->name=="admin")), 
```

并在不缓存的情况下强制重新加载。(Ctrl+F5)

# sql - SQL Server 日期格式 MM/DD/YYYY

> ID：12266518
> 
> 赞同：6
> 
> 时间：2012-09-04T15:16:27.560
> 
> 标签：sql, sql-server, tsql

如何在 SQL Server 中检查日期字符串是否为 MM/DD/YYYY 格式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-04T15:17:35.507

```
SET DATEFORMAT MDY;
SELECT CASE WHEN ISDATE(@string) = 1 
  AND @string LIKE '[0-1][0-9]/[0-3][0-9]/[1-2][0-9][0-9][0-9]' 
  THEN 1 ELSE 0 END; 
```

如果结果为 1，则它是一个有效的日期，但不能保证它是用户想要的日期。如果他们输入：

```
06/07/2012 
```

没有办法知道他们是指 6 月 7 日还是 7 月 6 日。最好的办法是让用户从下拉菜单或日历控件中选择日期，这样您就可以控制格式并避免任何不必要的解释。您的应用程序层可以使用强类型变量/参数并插入到正确类型的列中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T15:23:52.867

如果您在 SQL Server 日期格式之后查看它是否为 MDY，请使用：

```
dbcc useroptions 
```

并查看*dateformat* Set Option

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T22:16:31.310

[您使用CONVERT 函数](http://msdn.microsoft.com/en-us/library/ms187928.aspx)以这种格式 MM/DD/YYYY 将日期转换为日期字符串

```
select convert(varchar(10),getdate(),101) 
```

输出将截至 2012 年 9 月 8 日

```
09/08/2012 
```

不需要验证，除了检查日期字段是否为空

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:23:56.303

您必须在数据库之外执行此操作。数据库以自己的格式在内部存储日期时间。我认为您无法读取存储日期的格式。您可以按照自己喜欢的方式读取它，例如 dd/mm/yyyy 或 yyyy/mm/dd 等。

您可以做的是在数据库之外检查任何日期字段的此值。您可以为此使用正则表达式。但这将在数据库之外。

# php - mcrypt_encrypt 初始化失败

> ID：12266519
> 
> 赞同：4
> 
> 时间：2012-09-04T15:16:36.640
> 
> 标签：php, encryption, aes, mcrypt

我正在尝试使用 CBC 模式下的 Rijndael 密码和 256 位密钥加密 PHP 中的一些数据，但由于某种原因，我收到以下错误消息：

mcrypt_encrypt() 模块初始化失败

我的代码：

```
 $hashKey = hash('sha256',$key);
    $iv = hash('sha256',$hashKey);

    //                                                 ------Cipher-------------key-------------Data-------------Mode---------IV--
    $encryptedQuestion = base64_encode(mcrypt_encrypt('MCRYPT_RIJNDAEL_256', $hashKey , $_POST['question'], MCRYPT_MODE_CBC, $iv)); 
```

谁能看出这有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:36:18.033

我可以发现代码存在一些问题：

1.  你`$iv`不应该依赖于`$hashKey`；相反，您应该使用`mcrypt_create_iv()`.

2.  你`$hashKey`应该是二进制的而不是文本的。

3.  `MCRYPT_RIJNDAEL_256`是一个常量，它不应该作为字符串传递。

以下代码比您的代码更冗长，但它应该让您深入了解加密某些内容所需的步骤：

```
$crypto = mcrypt_module_open(MCRYPT_RIJNDAEL_256, '', MCRYPT_MODE_CBC, '');
$iv = mcrypt_create_iv(mcrypt_enc_get_iv_size($crypto), MCRYPT_DEV_URANDOM);

$hkey = hash('sha256', $key, true);

mcrypt_generic_init($handle, $hkey, $iv);

$enc_question = mcrypt_generic($handle, $_POST['question']);

mcrypt_generic_deinit($handle);
mcrypt_module_close($handle); 
```

我也遗漏了任何错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T12:38:58.960

我遇到了类似的错误。我将常量分配给一个变量并传递了该变量，这就是错误的原因。

这对我来说失败了 > return new encKey($cipher_name, $mode, $value);

现在这个工程 > return new encKey(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB, $value);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T07:17:14.497

在 php 5.6 中尝试 mcrypt_ecb 来克服无效密钥问题

```
 $choice ="2";
      $key = "1234";
$key = hash("sha512", $key, TRUE);

    for ($x = 0; $x < 8; $x++) {
        $key = $key . substr($key, $x, 1);
    }
    $msg = "pato";
    echo("key is".$key." \n");

    if ($msg == ''){
        die("Please enter a text to encrypt! ");
        }
    if ($key == ''){
        die("Please enter a key! ");
        }        

   function pkcs5_pad($text, $blocksize) {

    $pad = $blocksize - (strlen($text) % $blocksize);
    return $text . str_repeat(chr($pad), $pad);
    }
 function pkcs_pad($text, $blocksize) {

    //$pad = $blocksize - (strlen($text) % $blocksize);
        $tes=substr($text,0,$blocksize) ;
    return $tes;
    }
    function encryptnow( $thekey, $themsg)
    {

$padded = pkcs5_pad($themsg, mcrypt_get_block_size(MCRYPT_3DES, MCRYPT_MODE_CBC));
           echo("padded".$padded."\n");
  $keypad = pkcs_pad($thekey, mcrypt_get_key_size(MCRYPT_3DES, MCRYPT_MODE_CBC));
   $i;
  //$iv=pkcs5_pad($i, mcrypt_get_block_size(MCRYPT_3DES, MCRYPT_MODE_CBC));
   //$iv = mcrypt_create_iv(8, MCRYPT_DEV_RANDOM);
         //  echo("padded".$keypad."\n");
    $encrypted = base64_encode(mcrypt_ecb(MCRYPT_3DES, $keypad, $padded, MCRYPT_MODE_CBC));

 echo "<html><hr size='2' ></html>";
        echo "<P><P><b>Plain Text : </b>";
        echo($themsg);
        echo "<p><b>Cipher Text : </b> ";
        echo "$encrypted";

        die();
    }

   if ($choice == '2'){

        encryptnow($key, $msg);
   } 
```

# sql - 检查 SQL 中是否满足 10 个条件中的任何 4 个

> ID：12266522
> 
> 赞同：1
> 
> 时间：2012-09-04T15:16:55.943
> 
> 标签：sql, sql-server

我很抱歉问了一个非常模糊的问题，但就是这样。我必须在 SQL Server 中编写一个 SQL 查询，如下所示。我有一张表说 tblA 有 10 列来自 col1、col2、.....col10。每列都不为空，并且肯定包含一些值和所有 int 类型。查询应该选择所有这样的记录，其中至少有 4 列与给定的过滤条件匹配，其中过滤条件具有所有 10 列的值。

我用谷歌搜索了一个线索。它需要在 SQL Server 和单个查询中完成。请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:19:22.417

```
SELECT *
FROM
    yourtable
WHERE
    case col1 when @value1 then 1 else 0 end +
    case col2 when @value2 then 1 else 0 end +    
    ...
    case col10 when @value10 then 1 else 0 end 

    >=4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T15:20:11.867

您可以使用 CASE 表达式来确定是否有四个或更多列匹配：

```
 SELECT *
 FROM YourTable
 WHERE CASE WHEN Col1 = Filter1 THEN 1 ELSE 0 END + 
     CASE WHEN Col2 = Filter2 THEN 1 ELSE 0 END + 
     ....
     CASE WHEN Col10 = Filter10 THEN 1 ELSE 0 END >= 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:21:42.223

你可以这样做：

```
select *
from (select t.*,
             (case when col1 <whatever> then 1 else 0 end) as col01_matches,
             (case when col2 <whatever> then 1 else 0 end) as col02_matches,
             . . .
      from t
     ) t
where (col1_matches + col2_matches + col3_matches . . .) >= 4 
```

这会为每个匹配创建一个单独的指示变量。您也可以在子查询中的单个变量中求和。我宁愿单独进行每个匹配，以防逻辑变得更复杂或者我想查看匹配的内容。

# wpf - 如何使用 MediaPlayer 恢复播放音频？

> ID：12266523
> 
> 赞同：1
> 
> 时间：2012-09-04T15:17:03.010
> 
> 标签：wpf, media-player, caliburn.micro

我有一个 WPF Caliburn.Micro 应用程序，我使用 MediaPlayer 类来播放音频。我实现了播放、停止和暂停功能，但在 MediaPlayer 中没有看到恢复（暂停后）的方法。你能帮我解决这个问题吗？

这是我的一些代码：

```
 public void Play()
   {
       try
       {
           var audio = Tpv.GetAudio(SelectedTpv.TpvId);
           var file = Path.GetTempFileName().Replace(".tmp", ".wma");
           File.WriteAllBytes(file, audio);

           Player.Open(new Uri(file, UriKind.Absolute));
           Player.Play();
           IsPlaying = true;

       }
       catch (Exception ex)
       {
           MessageBox.Show(String.Format("Failed to play audio:\n{0}", ex.Message), "Failure",
            MessageBoxButton.OK, MessageBoxImage.Error);

           Console.WriteLine(ex.Message);
       }        
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:23:46.677

我很确定这`Play`也应该处理恢复功能。根据[System.Windows.Media.MediaPlayer](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer%28v=vs.100%29)的 MSDN，该`Play`方法应该“从当前位置播放媒体”。这意味着当您从头开始播放媒体时，位置为 0。如果您暂停，则媒体将暂停在某个位置。再次按播放应从您暂停媒体的相同位置恢复播放。

**编辑：**

根据您提供的代码更新，您的问题似乎是每次单击播放时都在加载文件。这将导致任何先前的暂停信息被删除，并且每次都将文件视为全新的。您应该在那里进行某种检查，以说明如果文件尚未加载，则加载它。否则，您的`Play`方法应该只调用`Player.Play()`恢复。

我还要注意，`Player.Close`当您切换所选项目时，您还需要调用。这将使该`Play`方法知道它需要加载不同的文件。

```
public void Play()
{
   try
   {
       // Check if the player already has a file loaded, otherwise load it.
       if(Player.Source == null) { 
           var audio = Tpv.GetAudio(SelectedTpv.TpvId);
           var file = Path.GetTempFileName().Replace(".tmp", ".wma");
           File.WriteAllBytes(file, audio);

           Player.Open(new Uri(file, UriKind.Absolute));
       }

       Player.Play();
       IsPlaying = true;

   }
   catch (Exception ex)
   {
       MessageBox.Show(String.Format("Failed to play audio:\n{0}", ex.Message), "Failure",
        MessageBoxButton.OK, MessageBoxImage.Error);

       Console.WriteLine(ex.Message);
   }        
} 
```

# groovy - 如何使用soapUI MockService的外部响应文件的相对路径

> ID：12266525
> 
> 赞同：11
> 
> 时间：2012-09-04T15:17:09.523
> 
> 标签：groovy, relative-path, soapui, xmlslurper

# 我做了什么

我正在使用soapUI（3.6.1 免费版）模拟服务为我正在测试的2 个客户端应用程序提供特定数据。通过一些简单的 Groovy 脚本，我设置了一些模拟操作，以根据客户端应用程序发出的请求从特定文件中获取响应。

模拟响应的静态内容是：

```
${responsefile} 
```

操作调度脚本窗格中的 groovy 是：

```
def req = new XmlSlurper().parseText(mockRequest.requestContent)
if (req =~ "CategoryA")
{
    context.responsefile = new File("C:/soapProject/Test_Files/ID_List_CategoryA.xml").text
}
else
{
    context.responsefile = new File("C:/soapProject/Test_Files/ID_List_CategoryB.xml").text
} 
```

在此示例中，当客户端应用程序向包含字符串 CategoryA 的模拟服务发出请求时，soapUI 返回的响应是文件 ID_List_CategoryA.xml 的内容

# 我想要实现的目标

这一切都适用于 groovy 中的绝对路径。现在我想将soapUI项目文件和外部文件的整个集合拉到一个包中，以便于重新部署。从我对soapUI的阅读中，我希望这就像将项目资源根值设置为$ {projectDir}并将我的路径更改为：

```
def req = new XmlSlurper().parseText(mockRequest.requestContent)
if (req =~ "CategoryA")
{
    context.responsefile = new File("Test_Files/ID_List_CategoryA.xml").text
}
else
{
    context.responsefile = new File("Test_Files/ID_List_CategoryB.xml").text
} 
```

...请记住，soapUI 项目 xml 文件位于 C:/soapProject/

# 到目前为止我尝试过的

所以，这行不通。我尝试了相对路径的变体：

*   ./Test_Files/ID_List_CategoryA.xml
*   /Test_Files/ID_List_CategoryA.xml
*   Test_Files/ID_List_CategoryA.xml

一篇文章指出soapUI可能将项目文件的父目录视为相对路径的根目录，因此也尝试了以下变体：

*   ./soapProject/Test_Files/ID_List_CategoryA.xml
*   /soapProject/Test_Files/ID_List_CategoryA.xml
*   soapProject/Test_Files/ID_List_CategoryA.xml

当这些都不起作用时，我尝试使用 groovy 脚本中的 ${projectDir} 属性，但是所有这些尝试都失败了，并出现“没有这样的属性：类的模拟服务：脚本 [n]”错误。承认，当我试图这样做时，我真的很摸索。

我尝试使用这篇文章和其他文章中的信息：[如何使soapUI附件路径相对？](https://stackoverflow.com/q/8490982/1375763)

...没有任何运气。在该帖子的解决方案代码中将“test”替换为“mock”（以及其他更改）导致更多属性错误，例如

```
testFile = new File(mockRunner.project.getPath()) 
```

.. 导致...

```
No such property: mockRunner for class: Script3 
```

# 我认为我需要什么

我发现的与此问题相关的帖子都集中在soapUI TestSuites 上。我真的需要一个以 MockService 为中心的解决方案，或者至少阐明如何为 MockServices 而不是 TestSuites 以不同的方式处理它。

任何帮助是极大的赞赏。谢谢。标记。

# 解决方案 - 由[GargantuChet提供](https://stackoverflow.com/users/171012/gargantuchet)

以下包括[GargantuChet](https://stackoverflow.com/users/171012/gargantuchet)建议的更改，以解决尝试访问 ${projectDir} 属性的问题，并通过在 groovy 脚本范围内定义新的 projectDir 对象来启用相对路径的使用：

```
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectDir = groovyUtils.projectPath

def req = new XmlSlurper().parseText(mockRequest.requestContent)
if (req =~ "CategoryA")
{
    context.responsefile = new File(projectDir, "Test_Files/ID_List_CategoryA.xml").text
}
else
{
    context.responsefile = new File(projectDir, "Test_Files/ID_List_CategoryB.xml").text
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T15:37:57.837

我不熟悉 Groovy，但我认为这`File`是一个正常的`java.io.File`实例。

相对路径被解释为相对于应用程序的当前目录。尝试以下方法来验证：

```
def defaultPathBase = new File( "." ).getCanonicalPath()
println "Current dir:" + defaultPathBase 
```

如果这里是这种情况，那么您可能希望使用[`new File(String parent, String child)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)构造函数，将资源目录作为第一个参数传递，将相对路径作为第二个参数传递。

例如：

```
// hardcoded for demonstration purposes
def pathbase = "/Users/chet"
def content = new File(pathbase, "Desktop/sample.txt").text

println content 
```

这是执行脚本的结果：

```
Chets-MacBook-Pro:Desktop chet$ groovy sample.groovy 
This is a sample text file.

It will be displayed by a Groovy script.
Chets-MacBook-Pro:Desktop chet$ groovy sample.groovy 
This is a sample text file.

It will be displayed by a Groovy script.

Chets-MacBook-Pro:Desktop chet$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T20:05:30.873

您还可以执行以下操作来获取 projectDir 的值：

```
 def projectDir = context.expand('${projectDir}'); 
```

# git - git'错误：pathspec'中的错误

> ID：12266526
> 
> 赞同：2
> 
> 时间：2012-09-04T15:17:16.437
> 
> 标签：git

我正在使用 git 下载一些文件，然后我做了 'git init'

```
git pull https://myusername:mypass@github.com/Test/test.git 
```

问题是我想改变我现在所在的分支。从'master'到'mybranch'。我正在执行`git checkout 'mybranch'`，但我得到了这个：

```
error: pathspec 'mybranch' did not match any file(s) known to git. 
```

错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:24:48.047

初始化空存储库并发出`git pull`.

如果您想使用存储库中的任何/所有远程分支，您应该使用`git clone <remote>`创建存储库的本地克隆，而不是`git init; git pull <remote>`简单地为您提供远程默认分支的副本。

正确克隆存储库后，假设有一个远程分支`origin/mybranch`，您可以签出一个本地副本，该副本将通过您的命令跟踪远程：

```
git checkout mybranch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:19:19.267

如果要创建新分支，请使用：

```
git checkout -b mybranch 
```

此外，无需将分支名称放在引号中。

如果您希望分支已经存在，请运行：

```
git branch -a 
```

它应该在列表中。如果它不在列表中，则它还不存在。

# jquery-ui - Jquery自动完成更改事件未触发

> ID：12266530
> 
> 赞同：0
> 
> 时间：2012-09-04T15:17:31.950
> 
> 标签：jquery-ui, autocomplete

我正在使用 JQuery UI 自动完成功能，但遇到了问题。

这是我的代码：

```
 $("#Id").autocomplete({
      source: url,
          change : function (event,ui){
    alert('changed');       
    }
}); 
```

我希望用户在输入文本中输入任何内容时都会触发更改事件

这里不是这样。

当我输入一些东西时，它不会触发，直到我用鼠标按下屏幕上的其他地方。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:21:32.827

尝试直接将按键事件绑定到它？

```
 $("#Id").autocomplete({
      source: url,
          change : function (event,ui){
    alert('changed');       
    }
});    

$("#Id").bind('keypress',function(){$(this).autocomplete.change}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:42:54.547

我通过单独使用按键事件来解决我的问题。而不是使用更改事件。

新代码：

```
$("#Id").autocomplete({
  source: url
});    

$("#Id").keydown(function() {
    // Logic goes here
}); 
```

出现这个问题是因为我们失去了焦点，两个事件被触发了 onBlur 和我拥有的某个按钮的 onclick 事件。这会导致行为不一致。

谢谢

# php - 新创建的捆绑包中的 Symfony 2.1 原则

> ID：12266535
> 
> 赞同：1
> 
> 时间：2012-09-04T15:17:44.303
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

想知道是否有其他人遇到过这个问题。总之，我们从 Symfony 2.0 升级到 Symfony 2.1。使用 Symfony 2.1，如果创建一个全新的包，然后创建一个与 Doctrine 一起使用的实体，我会得到一个`"not a valid entity or mapped super class"`. 如果我将相同的实体类（具有适当的路径更改）放入现有包（在 2.1 之前创建）中，即使从新包中也可以毫无问题地访问它。

以下是步骤。

```
$ php app/console generate:bundle --namespace="Core/TestBundle"--format=yml --no-interaction --structure=no --dir=src 
$ php app/console doctrine:generate:entity --entity="CoreTestBundle:Product" --fields="name:string(255) price:float description:text" 
```

这是生成的 Product.php 代码

```
<?php

namespace Core\TestBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Core\TestBundle\Entity\Product
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Product
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @var float $price
 *
 * @ORM\Column(name="price", type="float")
 */
private $price;

/**
 * @var text $description
 *
 * @ORM\Column(name="description", type="text")
 */
private $description;

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 * @return Product
 */
public function setName($name)
{
    $this->name = $name;
    return $this;
}

/**
 * Get name
 *
 * @return string
 */
public function getName()
{
    return $this->name;
}

/**
 * Set price
 *
 * @param float $price
 * @return Product
 */
public function setPrice($price)
{
    $this->price = $price;
    return $this;
}

/**
 * Get price
 *
 * @return float
 */
public function getPrice()
{
    return $this->price;
}

/**
 * Set description
 *
 * @param text $description
 * @return Product
 */
public function setDescription($description)
{
    $this->description = $description;
    return $this;
}

/**
 * Get description
 *
 * @return text
 */
public function getDescription()
{
    return $this->description;
}
} 
```

从这里运行

```
$ php app/console doctrine:generate:entities "Core/TestBundle/Entity/Product" 
```

或从代码运行到
`[Doctrine\ORM\Mapping\MappingException] Class Core\TestBundle\Entity\Product is not a valid entity or mapped super class.`运行中访问产品
`$ php app/console doctrine:schema:update --force` 会产生“Nothing to update”

另一方面，如果我使用诸如 ArticleBundle 之类的预先存在的包并运行相同的命令，即

```
$ php app/console doctrine:generate:entity --entity="CoreArticleBundle:Product" --fields="name:string(255) price:float description:text"
$ php app/console doctrine:generate:entities "Core/ArticleBundle/Entity/Product"
$ php app/console doctrine:schema:update --force 
```

可以很好地创建表此外，从 TestBundle 访问产品也`CoreArticleBundle:Product`可以正常工作。我试图比较捆绑配置等，但无法提出任何建议。

我还按如下方式运行数据库创建脚本。

```
$ php app/console doctrine:database:drop --force 
```

删除名为 dev 的连接的数据库

```
$ php app/console doctrine:database:create 
```

为名为 dev 的连接创建数据库 除了产品表之外，所有表都已创建。

此外，我使用 Product 对象创建了一个夹具。一样。在现有捆绑包中工作。在新创建的包中出现与上述相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:22:52.913

与当地专家交谈。原来我们的应用程序使用了两个 ORM 管理器。在这种情况下，每个使用 ORM 的包都必须在 app/config/config.yml 中注册。IE

```
entity_managers:
        sql_write:
            connection: sql_write
            mappings:
                CoreUserBundle : ~
                CoreImageBundle : ~
                CoreTestBundle : ~ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:57:52.413

一个学说：模式：验证应该可以帮助您发现错误...它将检查您的映射，并检查映射是否与数据库同步。

# c# - C#检查具有有效增量的值范围

> ID：12266539
> 
> 赞同：0
> 
> 时间：2012-09-04T15:17:53.760
> 
> 标签：c#

看起来很简单，但找不到优雅的方式......我想检查一个值是否在一定范围内，但也使用有效的增量/分辨率。假设我的范围是 0.1 到 99.9，分辨率为 0.1。有效值为 1.1 和 1.2，但 1.15 无效。我将如何检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:21:50.880

您可以使用`%`运算符：

```
float i = 1.15;
Console.WriteLine((decimal)i % .1M == 0); 
```

输出：`false`

```
float i = 1.1;
Console.WriteLine((decimal)i % .1M == 0); 
```

输出：`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:23:08.283

尝试这样的事情（对于 0.1 分辨率）：

```
(x * 10) % 1 == 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:25:15.380

请试试：

```
 double a = 0.1;
        double b = 99.9;
        double x = 1.5;
        double range = 0.5;
        double epsilon = 0.000001;

        bool isRange = (x >= a) && (x <= b) && (Math.Abs((x - a)%range) < epsilon); 
```

这里 epsilon 是一些非常小的“错误”值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:25:59.093

您正在处理[算术级数](http://en.wikipedia.org/wiki/Arithmetic_progression)。在您的示例`a[1] = 0.1`中，`d = 0.1`, `a[999] = 99.9`。如果您的号码`x`是`n`进度的第 th 成员，则以下情况成立：

```
n = (x - a[1])/d + 1 
```

所以你必须检查是否

```
(x - a[1])/d 
```

是一个非负整数。例如：

```
(1.1 - 0.1)/0.1 = 10 
```

因此1.1是progression的成员。然而：

```
(1.15 - 0.1)/0.1 = 10.5 
```

因此 1.15 不是进展的成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T15:31:26.557

尝试使用此代码

```
decimal yourDecimal = ;

if( yourDecimal % .1M == 0 )
{
    ......
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T15:31:33.463

考虑使用[Math.Round](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)将其强制为您想要的精度。您的应用程序中的 1.999 和 1.2 有什么区别？（另见[这个问题](https://stackoverflow.com/questions/14/difference-between-math-floor-and-math-truncate-in-net/580252#580252)）

# python - 定位pywin32库组件python

> ID：12266540
> 
> 赞同：0
> 
> 时间：2012-09-04T15:17:53.920
> 
> 标签：python, windows, pywin32

您好，我正在使用 pywin32 跟踪服务器上的几个操作，目前我正在寻找跟踪服务器上每个用户打开的文件，我发现`File_Info_Structure_3`，这里[http://msdn.microsoft.com/en-us/library/windows/desktop /bb525375%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525375%28v=vs.85%29.aspx)，但我在任何 pywin32 库中都找不到它，我签入了`win32net`，`win32file`但它不存在。有谁知道我如何导入和使用它。谢谢！

我得到了什么：

```
{'num_locks': 0, 'path_name': u'd:\\database\\agdata\\inx\\', 'user_name': u'finance', 'id': -1342162944, 'permissions': 1}
{'num_locks': 0, 'path_name': u'd:\\database\\dealdata\\', 'user_name': u'ntmount', 'id': 1879102464, 'permissions': 1}
{'num_locks': 0, 'path_name': u'd:\\database\\dealdata\\', 'user_name': u'ntmount', 'id': 536973312, 'permissions': 1}
{'num_locks': 0, 'path_name': u'd:\\database\\agdata\\inx\\', 'user_name': u'ntmount', 'id': -469590016, 'permissions': 1}
.......... 
```

我需要的：

```
{'num_locks': 0, 'path_name': u'd:\\database\\agdata\\inx\\', '10.2.2.3': u'finance', 'id': -1342162944, 'permissions': 1}
{'num_locks': 0, 'path_name': u'd:\\database\\dealdata\\', '10.5.3.23': u'ntmount', 'id': 1879102464, 'permissions': 1}
.......... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:19:45.063

FILE_INFO_* 结构未翻译成 python 等价物。它们将被返回或使用，例如由[win32net.NetFileEnum](http://timgolden.me.uk/pywin32-docs/win32net__NetFileEnum_meth.html)作为字典。

# html - 正确的站点文件夹结构

> ID：12266546
> 
> 赞同：1
> 
> 时间：2012-09-04T15:18:18.890
> 
> 标签：html

我刚刚开始为特定站点整理服务器，并且在移动文件时遇到了一些麻烦。

我最初在我的**主文件夹中有***style.css*和另一个名为**images**的文件夹，所以*.css中的路径为**images/* myimage.png

 ******现在我已将*style.css*移到另一个名为**css**的文件夹中。

所以 CSS 中的图像链接不再起作用，因为它正在从**它自己的 CSS 文件夹中寻找文件夹****images**。

 **我将文件路径更改为*/images/myimage.png*，因为我认为这会使它上升一个级别，然后查找**图像**文件夹，但这似乎不起作用。

我很想知道人们有什么解决方案，以及关于人们如何为特定站点组织文件夹的任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:21:03.283

这样做../images/myimage.png

这应该有效，对于您想要上升的每个级别，添加 ../

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:25:59.667

我以某种方式构建主要资源，以便为客户端进程提供某种助记符。例如，如果我有一堆代表员工的资源，我会将每个资源放在`/employees/alice`、`/employees/bob`等处。如果我有一个代表所有员工的资源（列表等），我会将其放在`/employees/`，但如果我没有，我会' d 仍然使用该结构。

如果这个层次结构相对简单，我将按照我放置文件的位置来遵循它。

如果对本身具有层次结构的东西进行建模，我会在 URI 映射中遵循该层次结构。例如`/ireland/leinster/coDublin/dublin`。在这种情况下，我宁愿将处理程序放在与路径没有直接对应关系的地方，例如 in `wwwroot\placesHandler`，稍微遵循它，但不完全清楚地比显然不遵循它。

对于图像、css 等辅助资源，它们只是呈现实体的一部分，而不是客户端进程的主要兴趣（最常见于以浏览器为中心的人类可读站点上）。我通常只有`/s/`an`/i/`和 a`/js/`并且默认情况下几乎所有的网络服务器都会在站点的路径结构中镜像文件的目录结构。在这些中，我将根据目的进行`/i/`分组。`/js/`

正如我在评论中所说，`/images/myimage.png`将意味着`http://whateverTheSiteDomainIs/images/myimage.png`“爬上一个”你想要`../images/myimage.png`的。********

# c# - 为什么这个程序不能识别 void 函数？

> ID：12266558
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:18:53.737
> 
> 标签：c#, .net

我一直在尝试在 C#.NET 上创建此控制台应用程序，但收到以下错误消息：

> 错误 1 ​​预期的类、委托、枚举、接口或结构

我是 C# 的新手，我以前做过 C++。

**主要文件：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public void Main(string[] args)
{
  string repositories = args[0];
  string transaction = args[1];

  var processStartInfo = new ProcessStartInfo
                           {
                             FileName = "svnlook.exe",
                             UseShellExecute = false,
                             CreateNoWindow = true,
                             RedirectStandardOutput = true,
                             RedirectStandardError = true,
                             Arguments = String.Format("log -t \"{0}\" \"{1}\"", transaction, repositories)
                           };

  var p = Process.Start(processStartInfo);
  var s = p.StandardOutput.ReadToEnd();
  p.WaitForExit();

  if (s == string.Empty)
  {
    Console.Error.WriteLine("Message must be provided");
    Environment.Exit(1);
  }

  Environment.Exit(0);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T15:19:36.253

主要需要是静态的。

```
public static void Main 
```

您还需要将它包装到一个名称空间中，其中包含一个类。VS 2010 提供的标准控制台应用程序模板如下所示，您可以看一下：

```
namespace ConsoleApplication3
{
    class Program
    {
       static void Main(string[] args)
       {
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T15:21:08.890

您的程序中缺少一门课程=）。Asweel 作为命名空间。那么Main void应该是一个静态方法

```
namespace MyApplication
{
    static class Program
    {
        static void Main()
        {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T15:21:53.620

C# 中的每个方法都必须包含在`class`or`struct`中。无法在 C# 中定义独立（“顶级”）函数。

尝试：

```
public class Program
{
 public static void Main(string[] args)
 { 
```

最后还有一个额外`}`的。

如果您来自 C++ 背景，正如您所指出的，您也不应该假设`struct`并且与`class`C++ 具有相同的相似之处和不同之处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T15:20:42.680

首先，您是否将方法包含在类或结构中？

您必须声明包含在类或结构中的方法，因为方法不是根成员。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T15:21:33.147

Main 需要是静态的，并且在一个类中：

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Text; 

public class Program 
{
    public static void Main(string[] args) 
    { 
        string repositories //... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T15:23:03.973

C# 中的函数必须位于类或结构中。只有委托、类、结构、枚举和接口可以存在于命名空间级别。

```
public static class MyClass
{
    public static void Main (string[] paArguments) { /* ... */ }
} 
```

# php - php并发请求卡住了？

> ID：12266559
> 
> 赞同：2
> 
> 时间：2012-09-04T15:18:59.120
> 
> 标签：php, performance, fastcgi

我有一个 PHP 应用程序运行报告并在 90 秒内向 SQL 服务器发出大约 100 万个 SQL 查询。在这段时间内，没有其他人可以使用这个基于 Web 的应用程序 - 鸡蛋计时器正在滚动，但在报告超时或完成之前不会加载任何内容。我在一个只有我自己的隔离环境中测试了这个问题，在浏览器中运行报告，然后从其他浏览器窗口到该应用程序站点的任何操作都挂起。

关于测试环境的一些细节：

```
Windows 2008 R2 x64 - IIS 7.5 - PHP 5.3.8 via FastCGI 
Windows 2008 R2 x64 - SQL Server 2008 R2 x64 
```

IIS 中的 FastCGI 设置：

```
Instance MaxRequests = 200
Max Instances = 16
Activity Timeout = 70
Idle Timeout = 300
Queue Length = 1000
Rapid Fails PerMin = 10
Request Timeout = 90 
```

每个 SQL 请求在 SQL 服务器端完成的时间不到 60 毫秒。Web 服务器和 SQL 服务器的 CPU 负载均小于 10%。Web 服务器有 16GB RAM，运行报告时大约有 60% 的 RAM 可用。

似乎，PHP 已经向 SQL 服务器发出了太多请求，并且变得太忙而无法处理其他请求。如果是这种情况，那么我应该可以进行一些调整以使 PHP 处理更多并发请求。

有人知道吗？请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:46:54.573

我将在这里暗中刺伤并假设这是由于会话锁定。

当您使用 PHP 附带的标准会话处理程序时，它可以确保您的会话文件不会通过在整个脚本执行过程中使用（建议）写入锁而被破坏（除非`session_write_close()`之前调用过）。

尝试访问同一会话的其他脚本（您的浏览器将传递相同的 cookie 值）将等待锁定被释放，只要它需要。

您可以通过使用两个完全不同的浏览器来模拟两个用户（一个运行报告，另一个访问站点）来验证这一点。如果这有效，那么您很确定这是由于会话锁定造成的。

这应该不是问题，因为您会知道何时运行报告，但如果这可能会导致问题，那么您可以考虑两件事：

1.  不要为报告脚本启动会话（但这也意味着未经授权的用户可能会尝试运行您的报告脚本）
2.  在您的繁重工作开始之前关闭会话，`session_write_close()`在您验证用户身份之后使用。

# android - 获取版本数据库 ormlite

> ID：12266564
> 
> 赞同：0
> 
> 时间：2012-09-04T15:19:22.353
> 
> 标签：android, database, ormlite

我在 ormlite 中使用数据库。我想在 Activity 中获取我的数据库版本，但我不知道在哪个表中保存版本。

有人知道我怎样才能得到数据库的版本吗？我在手册中找过，但没有找到。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:33:23.617

在 onCreate 中写下这段代码

```
int version = getHelper().getReadableDatabase().getVersion(); 
```

希望这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:30:27.760

如果您在谈论由 Android 操作系统管理的数据库版本号，那么您将知道该编号是什么，否则您将接到[`onUpgrade(...)`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29).

如果您的`onUpgrade(...)`方法被调用，您知道编号是多少，因为您获得了旧版本号和新版本号。如果您*没有*接到电话，那么您知道您在数据库助手中设置并传递给`SQLiteOpenHelper`类的版本号对应于 Android 存储中的版本号。

下面是一个典型[ORMLite](http://ormlite.com/) `DatabaseHelper`类的代码示例：

```
private static final int DATABASE_VERSION = 4;
...

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION, R.raw.ormlite_config);
}
...

/**
 * This is called when your application is upgraded and it has a higher version 
 * number. This allows you to adjust the various data to match the new version
 * number.
 */
@Override
public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource,
    int oldVersion, int newVersion) {
    ... 
```

# spring - Spring bean 是否默认使用 Grails 的 Spring Bean DSL 事务配置？

> ID：12266566
> 
> 赞同：2
> 
> 时间：2012-09-04T15:19:32.047
> 
> 标签：spring, grails

Grails 中的服务（即 Spring bean）默认是事务性的，但我也可以使用 Spring Bean DSL 配置我自己的 Spring bean。

默认情况下，这些 bean 也是事务性的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:25:19.850

不，默认情况下不是。服务 Grails 插件（核心插件之一）显式地为想要事务的服务创建事务代理。

# android - Android - 在注销时终止所有活动

> ID：12266572
> 
> 赞同：6
> 
> 时间：2012-09-04T15:19:58.740
> 
> 标签：android

当用户在我的应用程序中点击“注销”时，我希望他们被带到“登录”活动并终止我的应用程序中所有其他正在运行或暂停的活动。

如果用户以前登录过，我的应用程序正在使用共享首选项绕过启动时的“登录”活动。因此，FLAG_ACTIVITY_CLEAR_TOP 在这种情况下将不起作用，因为当用户被带到那里时，登录活动将位于活动堆栈的顶部。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T15:22:52.043

您可以使用 BroadcastReceiver 在您的其他活动中侦听“终止信号”

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

在您的活动中，您注册了一个 BroadcastReceiver

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction("CLOSE_ALL");
BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
  @Override
  public void onReceive(Context context, Intent intent) {
    // close activity
  }
};
registerReceiver(broadcastReceiver, intentFilter); 
```

然后，您只需从应用程序中的任何位置发送广播

```
Intent intent = new Intent("CLOSE_ALL");
this.sendBroadcast(intent); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-24T19:05:49.757

对于 API 11+，您可以`Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK`这样使用：

```
Intent intent = new Intent(this, MyActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);
this.startActivity(intent); 
```

它将完全清除所有以前的活动并开始新的活动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T17:48:35.163

而不是`FLAG_ACTIVITY_CLEAR_TOP`使用[`FLAG_ACTIVITY_CLEAR_TASK`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)（尽管 API 11+）：

> 如果在传递给 Context.startActivity() 的 Intent 中设置，则此标志将导致与该活动相关联的任何现有任务在活动启动之前被清除。也就是说，该活动成为一个空任务的新根，并且所有旧活动都已完成。这只能与 FLAG_ACTIVITY_NEW_TASK 结合使用。

# c# - 防止标准控件出现在 WinForms 中的自定义控件

> ID：12266581
> 
> 赞同：1
> 
> 时间：2012-09-04T15:20:28.097
> 
> 标签：c#, winforms

我使用以下小类创建了一个自定义按钮以在我的 WinForms 应用程序中使用

```
public class MyButton : Button
{
    protected override void OnPaint(PaintEventArgs e)
    {
        this.BackColor = Color.ForestGreen;
        base.OnPaint(e);
    }
} 
```

我只是想让我的应用程序可定制，这样我只需要在一个地方更改按钮颜色（以及其他控件），并且该更改会反映在整个应用程序中。

使用上述代码创建自定义按钮后，我着手将所有标准 System.Windows.Forms.Buttons() 替换为 MyNamespace.MyButton()。然而，虽然新按钮在屏幕上都出现了变化，但其他控件（如文本框（我没有修改））根本不会在屏幕上呈现。但是，如果我在我的应用程序中单击并拖动一个窗口，那么所有丢失的控件都会突然出现。

我不知道是什么原因造成的。谁能给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:26:16.090

您不应该在绘制事件中“设置”背景色属性，这会导致屏幕不断刷新。

一种选择是尝试在构造函数中设置属性：

```
public class MyButton : Button
{
  public MyButton() {
    this.BackColor = Color.ForestGreen;
  }
} 
```

为了忽略控件的序列化 BackColor 属性，您可以尝试将按钮类更改为如下所示：

```
public class MyButton : Button {
  private Color myColor = Color.ForestGreen;

  public MyButton() {
    base.BackColor = myColor;
  }

  [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
  public new Color BackColor {
    get { return myColor; }
    set { // do nothing 
    }
  }

} 
```

此按钮控件将有效地忽略设计器中的 BackColor 属性。如果要更改所有按钮的颜色，只需在代码中更改 myColor 值并重新构建。

# c++ - 运算符重载：C++

> ID：12266582
> 
> 赞同：2
> 
> 时间：2012-09-04T15:20:30.443
> 
> 标签：c++, operator-overloading, equality

我有一个关于 C++ 中的运算符重载的问题。

对于作业，我必须编写一个包含数组的类，有点像 Java 中的 ArrayList。

我必须做的一件事是跟踪数组的大小。大小是包含的元素数量，而容量是在类必须扩展数组之前可以包含的最大数量。

客户端代码在调用构造函数时指定大小。但是，当添加新元素时，我必须想办法改变大小。

我的老师说了一些关于能够为等式的不同方面重载运算符的内容。这是真的吗，还是我误会了她？如果这行得通，那将是我的问题的最佳解决方案。

我当前对 [] 运算符的重载是：

```
int & ArrayWrapper::operator [] (int position){

if(position == _size){
    if(_size == _capacity){
        changeCapacity(_capacity+10);
    }
}
return _array[position];
} 
```

这适用于检索，但我想拥有它，以便如果有人从“=”的左侧调用它，那么它会检查它是否需要扩展大小。

编辑：如果这不是真的，任何人都可以想出不同的解决方案来解决这个问题吗？我想到的一种解决方案是让 getSize() 方法在每次调用时都遍历整个数组，但我真的不想使用该解决方案，因为它看起来很俗气。

编辑：为澄清起见，我不是在问我的数组扩展是否有效。每次添加新元素时，我都需要将大小加 1。例如，如果客户端创建一个大小为 15、容量为 25 的数组，然后尝试向 Array[15] 添加一些内容，则应该将大小增加到 16。我想知道是否有办法通过重载来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:41:07.723

一个简单的方法，它不能完全满足你的要求，是重载数组是可变的`const`还是可变的。

这不区分数组是在赋值的左侧（作为*左值*）还是在右侧（作为*右值*）使用；只是关于它是否允许修改。

```
// Mutable overload (returns a mutable reference)
int & operator[](size_t position) {
    if (position >= _size) {
        if (position >= _capatity) {
           // increase capacity
        }
        // increase size
    }
    return _array[position];
}

// Const overload (returns a value or const reference)
int operator[](size_t position) const {
    if (position >= _size) {
        throw std::out_of_range("Array position out of range");
    }
    return _array[position];
} 
```

如果您真的想知道您是否被分配，那么您必须返回一个*代理*以供参考。这会重载赋值以写入数组，并提供转换运算符来获取元素的值：

```
class proxy {
public:
    proxy(ArrayWrapper & array, size_t position) :
        _array(array), _position(position) {}

    operator int() const {
        if (_position >= _array._array._size) {            
            throw std::out_of_range("Array position out of range");
        }
        return _array._array[_position];
    }

    proxy & operator=(int value) {
        if (_position >= _size) {
            if (_position >= _capatity) {
                // increase capacity
            }
            // increase size
        }
        _array._array[_position] = value;
        return *this;
    }

private:
    ArrayWrapper & _array;
    size_t _position;
}; 
```

您可能需要声明此 a `friend`of `ArrayWrapper`; 然后从以下位置返回`operator[]`：

```
proxy ArrayWrapper::operator[](size_t position) {
    return proxy(*this, position);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:25:38.087

这种方法很好。但是，代码中有一个错误：如果有人调用该运算符的位置等于数组的当前大小加上 100，会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:44:08.623

问题是你是否真的想要不同的行为取决于`=`你的哪一边。您的基本想法可以正常工作，但无论您在哪一边都会扩展数组，例如：

```
ArrayWrapper a(10);
std::cout << a[20] << std::end; 
```

将导致扩展数组。大多数时候，在这种情况下，首选行为是让上面的代码引发异常，但对于

```
ArrayWrapper a(10);
a[20] = 3.14159; 
```

去工作。这可以使用代理：首先，您定义`double ArrayWrapper::get( int index ) const`and `void ArrayWrapper::set( int index, double newValue )`; 如果索引超出范围，getter 将抛出异常，但 setter 将扩展数组。然后， `operator[]`按照以下方式返回一个代理：

```
class ArrayWrapper::Proxy
{
    ArrayWrapper* myOwner;
    int           myIndex;
public:
    Proxy( ArrayWrapper& owner, int index )
        : myOwner( &owner )
        , myIndex( index )
    {
    }
    Proxy const& operator=( double newValue ) const
    {
        myOwner->set( myIndex, newValue );
    }
    operator double() const
    {
        return myOwner->get( myIndex );
    }
}; 
```

如果您不熟悉`operator double()`，它是一个重载的转换运算符。它的工作方式是，如果 位于 `operator[]`赋值的左侧，它实际上是被分配给的代理，并且代理的赋值运算符转发给`set()`函数。否则，代理将隐式转换为`double`，并将此转换转发给 `get()`函数。

# nhibernate - NHibernate 对属性进行多对一过滤

> ID：12266584
> 
> 赞同：0
> 
> 时间：2012-09-04T15:20:46.913
> 
> 标签：nhibernate, nhibernate-mapping, linq-to-nhibernate

我正在尝试使用 NHibernate 过滤器来过滤父类的属性，但我不断收到错误消息，即`multi-part identifier "Parent.Active" could not be bound`. 我的过滤器定义是：

```
<filter-def name="useActive" /> 
```

我的父类在映射中有这个：

```
<property name="Active">
    <column name="ACTIVE" not-null="true" />
</property>
<bag name="Children" table="CHILDREN" inverse="true">
    <key>
        <column name="PARENT_ID_IN_CHILD" />
    </key>
    <one-to-many class="ChildType" />
</bag> 
```

我的子类在映射中有这个：

```
<many-to-one name="Parent" class="ParentTyle">
    <column name="PARENT_ID_IN_CHILD" />
</many-to-one>
<filter name="useActive" condition="Parent.Active = 1" /> 
```

过滤时如何让 NHibernate 检查父列？

**编辑**：我正在使用`mySession.EnableFilter("useActive");`. 我也在使用 LINQ-to-NHibernate，但我认为这并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:31:05.007

您收到的错误来自 SQL Server，它在“父”表上找不到“活动”列。请记住，当您定义过滤器时，您放入条件中的字符串将简单地附加到 select *as is*的 where 条件中。如果您想过滤该字段，您必须首先确定用于 SQL 查询的别名 nHibernate，而不是使用该别名而不是“父级”。它类似于“mytable_0”或类似的东西。

# android - AIR for Android - 通过长按主页按钮并选择应用程序恢复应用程序时，本机活动被破坏

> ID：12266585
> 
> 赞同：2
> 
> 时间：2012-09-04T15:20:48.000
> 
> 标签：android, apache-flex, android-activity, air, air-native-extension

我正在使用 AIR 3.3 SDK 在 Adob​​e Flex 中创建一个跨平台应用程序。对于 Android，我创建了一个原生扩展，它通过触发 Intent 来启动一个带有简单视图的原生 android 活动。

问题是，当我们通过从应用程序菜单中选择应用程序图标或通过长按主页按钮来获取最近应用程序列表来最小化应用程序并恢复它时，Android 会自动调用本机 android 活动的 onDestroy 并将其杀死。相同的场景在 Android 4.0 上运行良好。该问题仅在 Android 2.x 设备上发生。我们还不能测试蜂窝。

阅读 Android 文档后，我了解到 onDestroy 要么在有人调用完成活动时调用，要么在设备空间不足时调用。而且，为了区分两者，可以使用 isFinishing() 方法。如果活动已通过调用完成被破坏，这将返回 true。

在我们的例子中，在上述场景中，**没有**调用活动的完成函数。当应用程序恢复但 isFinishing() 仍然返回**true时调用****onDestroy**。这表明该应用程序的内存并不低。我尝试将各种标志添加到意图中，但没有任何改变行为。

 **我不知道从哪里可以调用 onDestroy 函数？我需要找到一种方法来阻止本机活动在应用程序恢复时被破坏。

启动本机活动的代码如下所示：

```
Intent intent = new Intent("android.intent.action.K12");
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("params", parameters);
context.getActivity().startActivity(intent); 
```

清单中活动的条目如下所示：

```
<activity android:name="com.k12.main.MainActivity">
     <intent-filter>
         <action android:name="android.intent.action.K12" />
             <category android:name="android.intent.category.DEFAULT" />
     </intent-filter>
</activity> 
```

我已经阅读了很多博客和 SO 问题，但无法解决这个问题。请帮忙。**

# c# - 如何在 ASP .NET MVC 视图中获取当前路由的 url 参数值

> ID：12266587
> 
> 赞同：5
> 
> 时间：2012-09-04T15:20:53.727
> 
> 标签：c#, asp.net-mvc, razor

例如我在页面上`http://localhost:1338/category/category1?view=list&min-price=0&max-price=100`

在我看来，我想呈现某种形式

```
@using(Html.BeginForm("Action", "Controller", new RouteValueDictionary { { /*this is poblem place*/ } }, FormMethod.Get))
{
    <!--Render some controls-->
    <input type="submit" value="OK" />
} 
```

我想要的是`view`从当前页面链接获取参数值以使用它来构造表单获取请求。我试过`@using(Html.BeginForm("Action", "Controller", new RouteValueDictionary { { "view", ViewContext.RouteData.Values["view"] } }, FormMethod.Get))`了，但没有帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-20T09:22:33.263

我[在这个线程中找到了解决方案](https://stackoverflow.com/questions/11248064/how-to-get-query-string-parameter-from-mvc-razor-markup)

```
@(ViewContext.RouteData.Values["view"]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-09T08:48:33.997

您不能直接在 ASP .NET Core 中访问 Request 对象。这是一种方法。

```
@ViewContext.HttpContext.Request.Query["view"] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T15:24:28.087

您应该仍然可以从视图中访问 Request 对象：

```
@using(Html.BeginForm(
    "Action", 
    "Controller", 
    new RouteValueDictionary { 
        { "view", Request.QueryString["view"] } }, FormMethod.Get)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:27:09.640

从 MVC 的角度来看，您可能希望将值从控制器传递到页面中，例如

```
public ActionResult ViewCategory(int categoryId, string view)
{
    ViewBag.ViewType = view;
    return View();
} 
```

然后在您的视图中访问`@ViewBag.ViewType`，您需要将其转换为字符串，尽管默认情况下它是`object`（`ViewBag`是一个动态对象）。

# facebook - 如何使用新的客户端 Facebook 通知 API

> ID：12266593
> 
> 赞同：3
> 
> 时间：2012-09-04T15:21:09.773
> 
> 标签：facebook, facebook-graph-api, notifications

官方文档[https://developers.facebook.com/docs/app_notifications/](https://developers.facebook.com/docs/app_notifications/)说：

> 1.  “应用程序可以向已授权该应用程序的任何现有用户发送通知。不需要特殊或扩展权限。”
>     
>     
> 2.  “来自应用程序的所有通知都以相同的方式处理，与发送方式无关——通过此 API 或作为用户对用户的请求。”

服务器端 API 工作正常，但我决定直接从 Flash 客户端调用通知 API。我已经向**{recipient_userid}/notifications**请求了所有必要的东西，比如客户端令牌等。

我第一次收到错误 200。在为应用程序应用**manage_notifications**权限后，我收到了新类型的错误 606（“您无权获取此用户的通知”）。

我的问题是可以通过客户端请求向 Graph API 发送通知吗？是否需要额外的权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:44:48.967

正如您从 fb 文档中看到的：

> 注意：只有 Facebook.com 上的应用程序可以使用通知 API。此外，这些通知仅在 > 桌面版 Facebook.com 上出现。

这意味着在发布通知时，您必须使用应用程序访问令牌 - 而不是通常的用户访问令牌。

您必须首先获取应用程序访问令牌：

```
GET https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials 
```

然后在发布到图形 api 时使用此访问令牌。

# google-app-engine - 我可以在多个 servlet 中使用相同的 Objectify 实例吗？

> ID：12266595
> 
> 赞同：0
> 
> 时间：2012-09-04T15:21:20.337
> 
> 标签：google-app-engine, servlets, objectify

我在我的 GAE 应用程序中使用 Objectify，并且我有多个使用 Objectify 的 servlet。我可以在所有这些 servlet 中使用相同的 Objectify 对象实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:14:39.873

您绝不能在线程之间共享 Objectify 对象实例。您应该创建一个 Objectify，在您的请求中使用它，并在最后将其丢弃。甚至在一个请求中创建多个实例；它们很便宜。

# javascript - Javascript：如何检查 DropDownList 是否被禁用

> ID：12266608
> 
> 赞同：0
> 
> 时间：2012-09-04T15:22:16.963
> 
> 标签：javascript, asp.net

该函数检查 DropDownList 是否被禁用。

```
function CheckRowBeforeSaving() {
  for (i = 0; i < document.forms[0].length; i++) {
      if (e.id.indexOf("_ddlTask") != -1) {
         var disabled = e.disabled;
          alert(disabled);
    }
  }
} 
```

我注意到启用 DropDownList 时，会出现带有消息“ **False** ”的警报框。当 DropDownList 被禁用时，警报消息甚至不会出现。如何解决这个问题？

# 编辑

我已经删除了条件，但结果仍然相同。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:25:13.883

> 我注意到，启用 DropDownList 时，会出现带有消息“False”的警报框。当 DropDownList 被禁用时，警报消息甚至不会出现。如何解决这个问题？

删除仅检查 disabled==false 的条件，因为已禁用 (disabled=true)

```
if (disabled == false) { // <-----REMOVE THIS LINE
       alert(disabled);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:05:31.960

看看[这个 SO question——ASP.NET](https://stackoverflow.com/questions/6776789/find-out-client-side-id-of-html-element-created-by-net)分配它自己的客户端 ID

你可能需要

```
function CheckRowBeforeSaving() {
    for (i = 0; i < document.forms[0].length; i++) {
      if (e.id.indexOf('<%= myDDL.ClientID %>') != -1) {
          var disabled = e.disabled;
          alert(disabled);
        }
      }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:27:53.760

代替

```
if (disabled == false) {
            alert(disabled);
         } 
```

只需`alert(disabled);`

那就是取消对禁用的检查

# c - 解决快速搜索算法分配的技巧

> ID：12266609
> 
> 赞同：2
> 
> 时间：2012-09-04T15:22:26.777
> 
> 标签：c, file-io, binary

我有一个巨大的文本文件（50 MB），其中的键/值看起来像这样：

```
...
ham 2348239
hehe 1233493
hello 1234213
hello 1812394
hello 1923943
help 2038484
helping 2342394
hesitate 1298389
... 
```

基本上它是很多单词，其值是指向该单词在另一个文件中的位置的指针，该文件包含整本小说。

任务是编写一个非常快速的搜索算法，通过创建所有字母组合 AAA-ZZZ 的哈希表索引并将其存储在文件中。散列值应该指向以这三个字母开头的单词的第一次出现，例如。组合`HEH`应该指向`hehe`，并且`HEL`应该指向第一个`hello`等等。

因此，如果我搜索`help`,`HEL`将被散列，我将收到一个指向第一个 的指针`hello`，通过在我的哈希表中查找下一个索引，我将获得一个指向 的指针`hesitate`，从而可以访问以 开头的整个单词范围`HEL`。

为了在范围内查找单词`help`，作业建议进行二分搜索。

我实际上设法解决了这个问题，但是由于上述文本文件，该解决方案非常难看。

我在想必须有一种更优雅的方式来构造键/值文本文件。也许是二进制文件。

任何建议表示赞赏！

**编辑**

抱歉未指定的问题。我只是想从社区获得一些意见......也许是一些关于如何解决这个问题的最佳实践建议。

这是构建我的哈希表的代码：

```
while ((fscanf(indexFile, "%s %lu\n%n", buf, &bookPos, &rowLength)) != EOF){
    newHash = calcHashIndex(buf);
    if (curHash < newHash){
        curHash++;
        indexPos = ftell(indexFile) - rowLength;
        for (;curHash <= newHash; curHash++){
            hashTable[curHash] = indexPos;
        }
        curHash = newHash;
    }
}
fwrite(hashTable, sizeof(hashTable), 1, hashTableFile); 
```

这是在 indexFile 中进行二进制搜索的代码。实际上它并没有真正起作用......一些仅出现 1 次的随机单词不会作为匹配项返回。

```
int binarySearch(unsigned char *searchWord, FILE * file, long firstIndex, long lastIndex){
    unsigned char buf[WORD_LEN];
    long bookPos, middle;
    int cmpVal, rowLength;

    while (firstIndex < lastIndex){
        middle = (firstIndex + lastIndex)/2;
        fseek(file, middle, SEEK_SET);
        goBackToLastNewLine(file, 0);
        fscanf(file, "%s %lu\n%n", buf, &bookPos, &rowLength);
        if (strcmp(searchWord, buf) <= 0){
            lastIndex = ftell(file) - rowLength;
        } else {
            firstIndex = ftell(file);
        }
    }

    fseek(file, -rowLength, SEEK_CUR);
    return (strcmp(searchWord, buf) == 0) ? 1 : 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:49:10.523

这很困难，因为寻找 hello 的理想算法应该返回所有三个 hello

```
void binary_search(int index1, int index2, char* value, int* range){
    int range_size = (index2 - index1);

    if( range_size == 0 ){
         range[0] = range[1] = -1;
         return;
    }

    int middle_index = (range_size / 2) + index1;
    char* current_line = get_file_line(middle_index);

    int str_compare = strcmp(current_line,value);

    if(str_compare > 0 ) { 
        binary_search(index1, middle_index-1, value, range);
    } else if (str_compare < 0 ) { 
        binary_search(middle_index+1, index2, value, range);
    } else {
        find_whole_range(middle_index, value);
    }
} 

void find_whole_range(int index, char* value, int* range){

    range[0] = index;
    range[1] = index; 

    while( strcmp( get_file_line( range_top - 1 ), value) == 0 )
        range[0]--;

    while( strcmp( get_file_line( range_top + 1 ), value) == 0 )
        range[1]++;
} 
```

编辑：这是未经测试的，我确​​定某些引用/取消引用是错误的，您可能需要仔细检查我没有从 strcmp 翻转的值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:48:07.513

解决您非常不具体的问题的想法：使用数据库（mySQL fe）。凭借超过 40 年的 DBMS 设计和构建的工程知识，这拥有您所需的一切。

# php - 使用 PHP 进行 RSS 解析什么也没提供？

> ID：12266611
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:22:47.907
> 
> 标签：php, parsing, rss

我正在尝试用 php 解析 rss-feed，但它什么也没给我。如您所见，我试图同时回显 $doc 和 $itemRSS 数组，但它什么也没给我，而且“成功！” 当数组中的第 0 项永远无法到达时。

如果有人能说“你有没有想过[愚蠢的错误]？”，我会很高兴，所以请考虑我这个问题的菜鸟。谢谢！

```
 $doc = new DOMDocument();
  $doc->load('http://pipes.yahoo.com/pipes/pipe.run?_id=566903fd393811762dc74aadc701badd&_render=rss');
  $arrFeeds = array();
  foreach ($doc->getElementsByTagName('item') as $node) {
    $itemRSS = array ( 
      'guid' => $node->getElementsByTagName('guid')->item(0)->nodeValue
      );
    array_push($arrFeeds, $itemRSS);
  }

    if ($itemRSS[0] != NULL) {

        echo 'Success!';

    }

echo $itemRSS;
echo $doc; 
```

我的意思是页面是完全空白的。没有错误，什么都没有。

更新：显然我的网络主机已停用 allow_url_fopen，所以我必须找到另一种方法来做到这一点。*叹*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:50:19.463

将这些行添加到脚本的末尾并检查它。

```
var_dump($itemRSS);
var_dump($arrFeeds);
var_dump($doc); 
```

问题是知道您没有正确显示信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:58:18.660

除了你试图回显一个对象和一个数组之外，脚本没有问题， print_r $arrFeeds 你可以看到一切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:14:15.223

正如其他答案中提到的，您做错了几件事，例如尝试回显数组和对象。出于某种原因，您也没有在 $arrFeeds 中获得任何结果，尽管您应该这样做。

一个更简单的方法是将提要的渲染方法更改为 JSON：[http ://pipes.yahoo.com/pipes/pipe.run?_id=566903fd393811762dc74aadc701badd&_render=json](http://pipes.yahoo.com/pipes/pipe.run?_id=566903fd393811762dc74aadc701badd&_render=json)

然后您可以使用 json_decode() 获取所有项目的数组：

```
$contents = json_decode(file_get_contents('http://pipes.yahoo.com/pipes/pipe.run?_id=566903fd393811762dc74aadc701badd&_render=json'));
foreach($contents['items'] as $item) {
  // use $item['title'], $item['description'] etc... 
} 
```

请注意，您只能回显字符串、整数等，而不能回显数组或对象等结构化数据。

为方便起见，您可以在浏览器中打开该 URL 并分析 JSON 内容[@http://json.parser.online.fr/](http://json.parser.online.fr/) - 然后您将看到数组的结构。

JSON 是一种更容易与 IMO 一起使用的格式。

编辑：

由于 file_get_contents() 被禁用，您可以使用 cURL（应该安装在大多数服务器上，尤其是在禁用 allow_url_fopen 的情况下）：

```
function file_get_contents_curl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Set curl to return the data instead of printing it to the browser.
    curl_setopt($ch, CURLOPT_URL, $url);
    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

# jquery - 带有一张幻灯片的循环插件标题

> ID：12266615
> 
> 赞同：1
> 
> 时间：2012-09-04T15:22:52.517
> 
> 标签：jquery, plugins, callback, slider, cycle

`.caption`如果滑块仅包含一张幻灯片 ( )，我看不到 div ( `image`)，而如果滑块包含多张幻灯片，您会看到每张幻灯片的正确 div ( `.caption`)。

有没有财产的替代品`after`？

非常感谢你的帮助！

**这是代码：**

```
<div id="slideshow">
    <div>
        <img src="images/slide1.jpg" width="500" height="500" />
    </div>
</div>

$('#slideshow')
    .after('<div id="products-nav">')
    .cycle({
        fx:     'fade',
        speed:  2000,
        timeout: 0,
        next:   '#next',
        prev:   '#prev',
        pager:  '#products-nav',
        after:function(curr,next,opts) {
            var index=opts.currSlide;
            $('#caption .caption:visible').fadeOut();
            $('#caption .caption').eq(index).fadeIn();
            tooltip();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:48:49.413

添加选项 slideExpr: 'img' (或 'div') 以强制循环以了解幻灯片是什么。目前，您没有复数幻灯片列表，因此无法自动确定幻灯片是什么！

这里是 slideExpr 的演示：http: [//jquery.malsup.com/cycle/slideExpr.html](http://jquery.malsup.com/cycle/slideExpr.html)

# java - 在 MongoDB for Java 中修改嵌套文档的值

> ID：12266616
> 
> 赞同：0
> 
> 时间：2012-09-04T15:22:52.350
> 
> 标签：java, mongodb

一个非常快速的问题，我将如何在下面执行此操作：

```
> db.blog.posts.findOne()
{
"_id" : ObjectId("4b253b067525f35f94b60a31"),
"title" : "A Blog Post",
"content" : "...",
"author" : {
    "name" : "joe",
    "email" : "joe@example.com"
     }
} 
```

我在 Javascript 中看到的答案是这样的：

```
> db.blog.posts.update({"author.name" : "joe"}, {"$set" : {"author.name" : "joe schmoe"}}) 
```

但是我将如何在 Java 中做到这一点？

如果我有一个非常深层次的价值必须改变，我应该使用这种方式吗？比如：“person.abc.xyz.name.address”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:34:54.633

使用点表示法访问嵌套文档在 Java 驱动程序中可以很好地工作。看看这个 StackOverflow 答案：

[MongoDB 嵌套文档搜索](https://stackoverflow.com/questions/4433401/mongodb-nested-documents-searching)

对于 Java 驱动程序，基本思想是将 Javascript 对象替换为 BasicDBObject 的实例。

这是另一个很好的更新参考：

[MongoDb 在其 java 驱动程序中的 $set 等效项](https://stackoverflow.com/questions/4943434/mongodbs-set-equivalent-in-its-java-driver)

# python - 在字典python中查找前k个最大的键

> ID：12266617
> 
> 赞同：14
> 
> 时间：2012-09-04T15:22:53.293
> 
> 标签：python

假设我有一本字典：

```
{key1:value1........... keyn:valuen} 
```

所以可以说我想写一个函数

```
def return_top_k(dictionary, k):

    return list_of_keys_sorted 
```

什么是最有效的方法（就大 O 而言）来获取具有最高 k 值的键（保持顺序，即最高值的键出现在开头......等等。）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-04T15:27:09.373

`O(n log k)`：

```
import heapq

k_keys_sorted = heapq.nlargest(k, dictionary) 
```

您可以使用`key`关键字参数来指定应该用作排序键的内容，例如：

```
k_keys_sorted_by_values = heapq.nlargest(k, dictionary, key=dictionary.get) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T15:24:39.377

```
return sorted(dictionary, key=dictionary.get, reverse=True)[:10] 
```

应该是最坏的`O(NlogN)`（虽然`heapq`别人提出的可能更好）......

使用 a而不是常规字典也*可能*有意义。`Counter`在这种情况下，该`most_common`方法将（大约）执行您想要的操作（ ），但前提是在您的 API`dictionary.most_common(10)`中使用 a 是有意义的。`Counter`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-27T08:33:47.807

```
portfolio = [
   {'name': 'IBM', 'shares': 100, 'price': 91.1},
   {'name': 'AAPL', 'shares': 50, 'price': 543.22},
   {'name': 'FB', 'shares': 200, 'price': 21.09},
   {'name': 'HPQ', 'shares': 35, 'price': 31.75},
   {'name': 'YHOO', 'shares': 45, 'price': 16.35},
   {'name': 'ACME', 'shares': 75, 'price': 115.65}
]

cheap = heapq.nsmallest(3, portfolio, key=lambda s: s['price'])
expensive = heapq.nlargest(3, portfolio, key=lambda s: s['price']) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T15:28:33.993

前 3 名：

```
>>> from operator import itemgetter
>>> dct = {"a": 1, "b": 2, "c": 3, "d": 4, "e": 5}
>>> sorted(dct.items(), key=itemgetter(1), reverse=True)
[('e', 5), ('d', 4), ('c', 3), ('b', 2), ('a', 1)]
>>> map(itemgetter(0), sorted(dct.items(), key=itemgetter(1), reverse=True))
['e', 'd', 'c', 'b', 'a']
>>> map(itemgetter(0), sorted(dct.items(), key=itemgetter(1), reverse=True))[:3]
['e', 'd', 'c'] 
```

或使用`heapq`模块

```
>>> import heapq
>>> from operator import itemgetter
>>> heapq.nlargest(3, dct.items(), key=itemgetter(1))
[('e', 5), ('d', 4), ('c', 3)]
>>> map(itemgetter(0), _)
['e', 'd', 'c'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-14T01:02:59.590

在代码中

```
dct = {"a": 1, "b": 2, "c": 3, "d": 4, "e": 5}
k = 3
print sorted(dct.keys(), reverse=True)[:k] 
```

如果您还需要值：

```
print sorted(dct.items(), reverse=True)[:k] 
```

或者，如果您想使用`OrderedDict`：

```
from collections import OrderedDict
d = OrderedDict(sorted(dct.items(), reverse=True))
print d.keys()[:k] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-14T15:14:38.787

所以如果你想从字典中打印前 K 个频繁元素；你必须使用 heapq.nlargest 函数。

这是相同的示例：

```
return heapq.nlargest(k,count.keys(), key = count.get) 
```

这里，k 是帮助我们找出在字典中重复 k 次或超过 k 次的元素的数字。

`count.keys()`：这为您提供了使用创建的堆中的键或元素`collections.counter`

`key = count.get()`：这用于打印堆的键。如果我们跳过这个；它将打印字典的值，即元素在字典中出现的次数。

# javascript - FB.api 的问题

> ID：12266619
> 
> 赞同：0
> 
> 时间：2012-09-04T15:23:05.570
> 
> 标签：javascript, facebook, facebook-graph-api

我编写了以下代码，但由于某种原因**FB.api**无法正常工作。我可以这么说是因为 javascript 控制台中没有日志消息。我已经对用户进行了身份验证并获得了 publish_stream 权限。下面的代码在**FB.login**块内（我希望这不是问题）。我使用了**jQuery**，因为我已经知道如何使用它来发出**get**请求。

```
jQuery.ajax( {
    url: access,
    dataType: 'json',
    success: function (resp) { 
    var data_item='This is a successful post plz do not comment this is a test';
    FB.api('me/feed', 'post', {message: data_item}, function(response) {
    if (!response || response.error) {
        console.log('Error occured');
    } else {
        console.log('Post ID: ' + response.id);
    }
}); 
```

有什么帮助或建议**吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:25:27.223

您需要指定访问令牌，我遇到了同样的问题..我只是添加了访问令牌并解决了问题..

看看这里：[http ://www.friendouh.com/](http://www.friendouh.com/)

```
 jQuery.ajax( {
        url: access,
        dataType: 'json',
        success: function (resp) { 
        var data_item='This is a successful post plz do not comment this is a test';
        FB.api('me/feed', 'post', {message: data_item,access_token: 'your_acess_token'}, function(response) {
        if (!response || response.error) {
            console.log('Error occured');
        } else {
            console.log('Post ID: ' + response.id);
        }
    }); 
```

# jquery - JQuery - 悬停事件未在悬停时触发

> ID：12266624
> 
> 赞同：3
> 
> 时间：2012-09-04T15:23:25.970
> 
> 标签：jquery

我正在实现我自己的“工具提示”，每次将鼠标悬停在它上面时它都会创建一个新的 div 元素，并在悬停时将其删除。下面的代码是从我使用的代码中删除的，但它显示了问题：当用户慢慢地将鼠标放在 $('#' + fieldName) 对象上并移开对象时，这段代码非常有效，但是当您将鼠标移到对象，然后快速将其拉离工具提示不会被删除。有没有办法改进我的代码？

我尝试实现一个系统，在该系统中创建所有工具提示框并隐藏它们，然后在悬停时显示它们，但是它提出了相同的问题，即鼠标快速离开对象并且悬停未触发。

```
$('#' + fieldName).hover(
    function () { /* Create new DOM element */
        /* My ajax stuff here */
        var data = 'test';
        var tooltipBox = $('<div id="' + fieldName + '_tooltip">' + data + '</div>');
        $("body").prepend(tooltipBox);
    },
    function () { /* Remove Tooltip from DOM */
        $('#' + fieldName + '_tooltip').remove();
    }
); 
```

**回答：**

在 Robert Koritnik 和 sajawikio 的帮助下：

如果您需要在悬停时使用 AJAX 调用在悬停时制作工具提示，您可以做一个小技巧来使其工作。

```
var callingAjax = false;
var removeTooltip = false;
$('#tooltip').hover(
     function() {
          callingAjax = true;
          $.post(.. {
              callingAjax = false;
              /* do stuff */
              if(removeTooltip)
                   /* code to remove tooltip */
              removeTooltip = false;
          });
     },
     function() {
          if(callingAjax) 
              removeTooltip = true;
          else
              /* code to remove tooltip */
     }
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:32:34.167

## 您的代码有效

我已将您的代码放在[JSFiddle](http://jsfiddle.net/FUdU6/)中并且可以正常工作，因此您一定还有其他问题。我可以在链接上尽可能快地移动鼠标，但每次都会删除工具提示。

我正在使用 Chrome。你的*药*是什么？

> **注意**：我在 JSFiddle 中的代码与您的代码之间的唯一区别是我使用过`append`，而您使用过`prepend`. 出于明显的原因，我已经改变了这一点。尝试改变它，你会明白为什么。但它在两个方面都有效。
> 
> **注意2**：实际上如果你改变`append`它`prepend`实际上模拟了快速鼠标移动，因为当一个对象被前置时，鼠标悬停在链接之外。因此，与其尽可能快地移动鼠标，不如移动元素来模拟相同的行为。

## 实际问题

问题是您**在创建 tooltip 之前**在悬停中执行其他操作。这是否是 Ajax 调用并不重要。它可能是任何异步的，因此 Javascript 线程可以执行下一个函数。如果它执行的时间比你停留在元素上的时间长，你的鼠标移出想要删除尚未创建的东西（稍后会）。

两种可能的解决方案：

1.  **首先**添加您的工具提示，然后执行其他内容。
2.  在悬停事件执行后推迟 Ajax 调用。

## 警告

我强烈建议**不要在悬停事件中执行**ajax 代码，因为您可能会触发很多请求。实际上，不仅仅是浏览器可以处理的。如果您必须在悬停时执行 ajax 请求，请按以下方式执行：hover 触发并准备在其后立即执行的函数调用，但该函数仅在尚未进行时才会发出 Ajax 调用：

```
// variable outside of hover closures
var ajaxExecuting = false;

// code to put within your hover handler
setTimeout(function() {
    if (!ajaxExecuting)
    {
        ajaxExecuting = true;
        // do your AJAX stuff
    }
}, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:40:17.193

是的，有问题。让速度根本不是一个因素 - 不要让它碰运气，并确保当你悬停时，你的悬停激活 - 当你悬停时，你的悬停激活！万无一失！这样，您就不会像您所说的那样陷入“扩展”！换句话说，“来回切换样式”一次执行一个事件，而不是使用持久处理程序。

（请参阅示例代码 - 如果您使用的元素当然更大，则效果很好） - [http://jsfiddle.net/4jArC/](http://jsfiddle.net/4jArC/)

```
var fieldName = "whatever";

function b(evt) { /* Remove Tooltip from DOM */
    $('#' + fieldName + '_tooltip').remove();
    $(evt.currentTarget).one('mouseover',a);
}

function a (evt) { /* Create new DOM element */
    /* My ajax stuff here */
    var data = 'test';
    var tooltipBox = $('<div id="' + fieldName + '_tooltip">' + data + '</div>');
    $("body").prepend(tooltipBox);
    $(evt.currentTarget).one('mouseout',b);
}

$('#' + fieldName).one('mouseover', a);
​ 
```

# python - 如何使用scrapy python使用xmlfeed循环节点

> ID：12266627
> 
> 赞同：1
> 
> 时间：2012-09-04T15:23:40.947
> 
> 标签：python, xml, scrapy

嗨我第一次使用scrapy并尝试xml提要，下面是我的代码

```
class TestxmlItemSpider(XMLFeedSpider):
    name = "TestxmlItem"
    allowed_domains = {"http://www.nasinteractive.com"}

    start_urls = [
        "http://www.nasinteractive.com/jobexport/advance/hcantexasexport.xml"
    ]
    iterator = 'iternodes'
    itertag = 'job'

    def parse_node(self, response, node):
        title = node.select('title/text()').extract()
        job_code = node.select('job-code/text()').extract()
        detail_url = node.select('detail-url/text()').extract()
        category = node.select('job-category/text()').extract()

        print title,";;;;;;;;;;;;;;;;;;;;;"
        print job_code,";;;;;;;;;;;;;;;;;;;;;"

        item = TestxmlItem()
        item['title'] = node.select('title/text()').extract()
        .......  
        return item 
```

**结果**：

```
 File "/usr/lib/python2.7/site-packages/Scrapy-0.14.3-py2.7.egg/scrapy/item.py", line 56, in __setitem__
    (self.__class__.__name__, key))
exceptions.KeyError: 'TestxmlItem does not support field: title' 
```

总共有 200 多个项目，所以我需要循环并将节点文本分配给项目，但是这里所有结果在我们打印时立即显示，实际上我们如何在节点上循环遍历 xml 文件`xmlfeedspider`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:21:18.380

来自巴勃罗霍夫曼：

> 您的项目 (TestxmlItem) 中没有声明“标题”字段。

您需要添加：

```
title = Field() 
```

# c# - 将矩形数组传递给视图文件？

> ID：12266633
> 
> 赞同：1
> 
> 时间：2012-09-04T15:23:57.270
> 
> 标签：c#, asp.net-mvc, arrays, razor

我是 C#/MVC 的相对新手，在将矩形数组传递给 ViewData（然后尝试从 View 文件中显示内容）时遇到了一个问题。

我的数组是从数据库查询中填充的，据我所知，它运行良好：

```
Media [
    Images [
        [Id (int), Type (int), File (string), Title (string)],
        [Id (int), Type (int), File (string), Title (string)],
        [Id (int), Type (int), File (string), Title (string)]
    ]
    Videos [
        [Id (int), Type (int), File (string), Title (string)],
        [Id (int), Type (int), File (string), Title (string)]
    ]
] 
```

我将主数组（图像和视频）的每一半分配给控制器中的一个单独的 ViewData 对象：

```
ViewData["Images"] = Media.Images.ToArray();
ViewData["Videos"] = Media.Videos.ToArray(); 
```

视图知道这些对象在那里，但我似乎无法弄清楚如何遍历每个数组并从视图中访问每个单独的索引（Id、Type、File、Title）并将每一块添加到视图的 HTML代码。

一种选择是在控制器中构造 HTML，但我真的想避免这种情况。

有什么想法我哪里出错了吗？

编辑：这是解决方法，感谢大家促使我走上正确的道路:)

控制器：

```
ViewBag.Images = Media.Images; 
```

网络配置：

```
<namespaces>
    <add namespace="Path.to.Models" />
    ...
</namespaces> 
```

看法：

```
str_code = "<ul>";

foreach (Media image in ViewBag.Images)
{
    str_code += "<li>" + image.Title + "</li>";   
}

str_code += "</ul>";

Response.Write(str_code); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:32:30.590

我假设`Media.Images.ToArray();`给你一个对象数组`MyImage`。

**我的形象**

```
public class MyImage
{
    public int Id       { get; set; }
    public int Type     { get; set; }
    public string File  { get; set; }
    public string Title { get; set; }
} 
```

然后是剃刀代码：

```
@foreach (MyImage image in ViewData["Images"])
{
    <p>@image.Id</p>
    <p>@image.Type</p>

     ...
} 
```

`ViewBag`或者，您可以使用控制器中可用的动态属性：

```
ViewBag.Images = Media.Images.ToArray(); 
```

然后：

```
@foreach (MyImage image in ViewBag.Images)
{
    <p>@image.Id</p>
    <p>@image.Type</p>

     ...
} 
```

# php - 静态方法php中的动态绑定

> ID：12266636
> 
> 赞同：1
> 
> 时间：2012-09-04T15:24:10.047
> 
> 标签：php, static-methods, dynamic-binding

```
class A
{
  static function get_name_derived_class()
  {
      //This function must return the name of the real class
      //Is it possible without insert a methon in B class?
  {
}

class B extends A
{

}

B::test() 
```

我想在基类中有一个静态方法，它返回真实（派生）类的名称，而不在其中插入特定方法。是否可以？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:31:13.070

```
<?php

class A
{
    static function test()
    {
        return get_called_class();
    }
}

class B extends A
{
}

echo B::test(); 
```

需要 PHP >= 5.3.0。请参阅 PHP 的[后期静态绑定手册条目](http://php.net/manual/en/language.oop5.late-static-bindings.php)

# .net - Windows 7 上 Internet Explorer 9 的 Response.Output.Write 性能不佳

> ID：12266637
> 
> 赞同：1
> 
> 时间：2012-09-04T15:24:11.183
> 
> 标签：.net, iis-7, internet-explorer-9

我们有一个位于 IIS7 上的 ASP .NET Web 服务器。为了让我们的服务器能够将大文件（比如 30-50MB）传输到 Web 客户端，我们实现了 Response.Output.Write 算法，如下所示：http: [//support.microsoft.com/ ?kbid= 812406](http://support.microsoft.com/?kbid=812406)。

这是我们的代码片段：

```
long offset = 0, cb = info.AudioStream.Length;

context.Response.Clear();
context.Response.ClearHeaders();
context.Response.ContentType = "audio/wav";
context.Response.Cache.SetNoStore();
context.Response.AddHeader("Content-Length", cb.ToString());
context.Response.AddHeader("Content-Disposition", "attachment; filename=" + info.RecordingId + ".wav");

context.Response.Buffer = false;
context.Response.BufferOutput = false;
context.Response.Flush();

info.AudioStream.Seek(offset, SeekOrigin.Begin);

byte[] buffer = new byte[1024 * 1024];

long total = 0;
int count;
Tracer.TraceInfo(true, "WaveHandler::ProcessRequest; Before loop.");

while (context.Response.IsClientConnected && 
    total < cb && 
    (count = info.AudioStream.Read(buffer, 0, (int)Math.Min(buffer.Length, cb - total))) != 0)
{
    Tracer.TraceInfo(true, "WaveHandler::ProcessRequest; Before 'Write'; Count: " + count);

    context.Response.OutputStream.Write(buffer, 0, count);

    Tracer.TraceInfo(true, "WaveHandler::ProcessRequest; After 'Write'; Total: " + total);

    total += count;
}

Tracer.TraceInfo(true, "WaveHandler::ProcessRequest; After loop.");

context.Response.Flush(); 
```

问题是，在同一台 Windows 7 客户端 PC 上，使用 firefox 15.0 传输约 35MB 文件需要 5 秒，但使用 IE9 进行相同操作需要约 3 分 30 秒。在另一台装有 IE8 的 XP 客户端 PC 上，传输相同的 ~35MB 文件需要 10 秒。

我们尝试使用传输缓冲区大小（从 4kB 到 1MB）或在循环中放置一个“Response.Flush()”，但 IE9 的性能总是很差。

我们不知道哪一端需要调整：Web 服务器端还是客户端？

**更新：** 客户端的网页用于播放传输的音频文件。IE 和 Firefox 的区别在于，Windows Media Player（嵌入式）用于在 IE 中播放，而当 != IE 时使用音频标签。会不会是 WMP 限制了文件传输？

任何想法？

谢谢

# android - Android...在背景图像上准确定位组件

> ID：12266644
> 
> 赞同：0
> 
> 时间：2012-09-04T15:24:30.170
> 
> 标签：android, android-layout

我希望我的应用程序只能在各种纵向的 android 设备上运行。我有一个全屏背景图像，其中包括其他组件的边框。我想将列表视图/赞助商广告等项目准确地放置在这些边界内......将它们覆盖在背景顶部的正确位置。使用 Framelayout 是最好/最简单的方法吗？考虑到不同设备的背景将被拉伸到不同的尺寸，我如何确保将列表视图或赞助商广告放置在正确的位置和正确的尺寸？我已经考虑过切割背景图像，但这似乎需要更多的工作。最好的方法是什么？感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:33:56.333

不幸的是，这个方案永远不会在所有屏幕尺寸上一致地工作。如果需要边框，则需要从中创建 9 个补丁图形并将它们指定为 UI 项的背景。

# ruby - Ruby 守护进程软停止

> ID：12266645
> 
> 赞同：2
> 
> 时间：2012-09-04T15:24:31.007
> 
> 标签：ruby, daemons

这个简单的守护进程（使用 ruby[​​ daemons](http://daemons.rubyforge.org) gem 编写）打印从 0 到 9 的数字，直到我使用`stop`命令行选项停止守护进程：

```
require 'rubygems'
require 'daemons'

options = {
  :multiple   => false,
  :ontop      => false,
  :backtrace  => true,
  :log_output => true,
  :monitor    => false
}

Daemons.run_proc('test.rb', options) do
  loop do
    10.times do |i|
      puts "#{i}\n"
      sleep(1)
    end
  end
end 
```

我启动守护进程

```
ruby simple_daemon.rb start 
```

并停止它

```
ruby simple_daemon.rb stop 
```

是否可以轻柔地停止守护进程，让它在终止其进程之前结束其最后一个循环，以便我确定它最后一次打印所有 10 个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:51:15.063

您需要捕获调用 stop 时发送的 TERM 信号并自行处理。您的代码可能是这样的：

```
Daemons.run_proc('test.rb', options) do
  stopped = false

  Signal.trap("TERM") do
    stopped = true
  end

  while not stopped
    10.times do |i|
      puts "#{i}\n"
      sleep(1)
    end
  end
end 
```

# node.js - 使用 NodeJS 提供 HTML 文件

> ID：12266647
> 
> 赞同：1
> 
> 时间：2012-09-04T15:24:37.313
> 
> 标签：node.js, backbone.js, web

我开发了一个**backbone.js 页面**，其中**数据通过API 调用被废弃**。我 **直接通过 Apache 运行公共文件**。但我想**通过 node.js 运行它**

我尝试使用

```
var sys = require('sys'),
    http = require('http'),
    fs = require('fs'),
    index;

fs.readFile('./index.html', function (err, data) {
    if (err) {
        throw err;
    }
    index = data;
});

http.createServer(function(request, response) {
    response.writeHeader(200, {"Content-Type": "text/html"});
    response.write(index);
    response.end();   
}).listen(8000); 
```

但它不起作用，因为当我打开它时会打开一个空白的 html 页面。尽管页面的标题发生了变化。由于页面标题正在更改，但无法处理文件的正文部分。
*html页面的代码是*

```
 <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <title>Movie db</title>
    <link rel="stylesheet" href="css/screen.css" />
    </head>
    <body>
    <div id="moviedb"></div>
    <script id="moviedbTemplate" type="text/template">
    <dl><h4>
    <dt>Score:</dt><dd><%= score %></dd>
    <dt>Popularity:</dt><dd><%= popularity %></dd>
<dt>Translated:</dt><dd><%= translated %></dd>
<dt>Adult:</dt><dd><%= adult%></dd>
<dt>Language:</dt><dd><%= language %></dd>
<dt>Original_Name:</dt><dd><%= original_name %></dd>
<dt>Name:</dt><dd><a href=":<%= name %>"><%= name %></a></dd>
<dt>Alternative_name:</dt><dd><%= alternative_name %></dd>
<dt>Movie_type:</dt><dd><%= movie_type %></dd>
<dt>imdb_id:</dt><dd><%= imdb_id %></dd>
<dt>Votes:</dt><dd><%= votes %></dd>
<dt>Rating:</dt><dd><%= rating %></dd>
<dt>Runtime:</dt><dd><%= runtime %></dd>
<dt>Certification:</dt><dd><%= certification %></dd>
<dt>Overview:</dt><dd><%= overview %></dd>
<dt>Released:</dt><dd><%= released %></dd></h4>    
    </dl>
    <hr>
    </script>
    <script src="js/index.js"></script>
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/json2.js"></script>
    <script src="js/underscore-min.js"></script>
    <script src="js/backbone-min.js"></script>
    <script src="js/app.js"></script>
    </body>
    </html> 
```

先感谢您。

# android - GridView 有什么更好的背景结构

> ID：12266648
> 
> 赞同：0
> 
> 时间：2012-09-04T15:24:38.210
> 
> 标签：android

我正在 Android 4 上开发一个应用程序，它有很多选项卡（ActionBar.Tab），每个选项卡都有一个 GridView，它显示大约 30 个图像（ImageView）。单击时，每个图像都会引发其他活动。当活动执行结束时，系统会显示先前选择的选项卡。这是每个选项卡的风景。每个选项卡的图像从数据库中加载并放入一个单例列表中。然后只存在一个应用程序图像列表，该列表加载每个选项卡的变化。当我访问另一个选项卡时，它会花很多时间来加载我的图像列表并放入 GridView。我已经在 Bitmap 中减小了图像的大小，但没有找到好的解决方案。我想知道您是否了解我可以使用的其他结构。

谢谢。

马塞洛·阿劳霍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:31:03.723

*“每个选项卡的图像都从数据库中加载并放入单例列表中”*

坏主意，因为您可以获得OOM。

请阅读[有效地显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)文章。

# cocoa - 从 NSArrayController -arrangedObjects 访问核心数据实体名称

> ID：12266650
> 
> 赞同：0
> 
> 时间：2012-09-04T15:24:43.313
> 
> 标签：cocoa, core-data, nsmanagedobject, nsarraycontroller, nsentitydescription

给定一个`NSArrayController`绑定到 IB 中 moc 的“objController”，下面的工作不应该吗？鉴于它似乎不起作用，我该如何从我的 中检索实体的名称`NSArrayController`？

```
for (NSManagedObject *thisObj in [objController arrangedObjects]) 
{
    NSEntityDescription *description = [thisObj entity];
    NSString *entityName = [description name];
    // do something with entityName...
    NSString *entityAttributeValue = [thisObj valueForKey:@"attributeKey"];
    // do something with entityAttributeValue...
} 
```

“objController”是 IBOutlet-ed 并设置为“实体名称”模式，实体名称设置为模型中定义的实体。这个实体确实有子实体（因此我想访问它的描述名称的原因，因为它`NSArrayController`可以存储许多不同的子实体类型），但子实体的存在似乎并没有什么不同。

...在调试器中，“description”看起来是一个有效的`NSEntityDescription`对象，但“entityName”被设置为一个`_PFEncodedString`没有内容的对象。但是，“entityAttributeValue”很好，填充了存储在 Core Data 中的正确值。

我想，解决这个问题的一种方法是对我所有的 CD 实体进行自定义分类，然后使用 -`isKindOfClass`来获取我需要的信息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:55:43.870

`_PFEncodedString`是 的（私有）具体子类，`NSString`因此可以用作任何其他`NSString`.

# c# - 属性 Get v 方法的性能

> ID：12266652
> 
> 赞同：11
> 
> 时间：2012-09-04T15:24:48.150
> 
> 标签：c#, oop

我有一个包含一组方法的类，我想知道使用方法而不是属性是否有任何性能奖励？

一些方法相当复杂，但基本上返回一个 IEnumerable 对象集合，而另一些则是一个简单的`return values.Where(x => x.property == "comparison")`Linq 查询。

**例子**

方法：

```
public IEnumerable<PenDataRow> ActivePens() => Pens.Where(x => x.Status == "Active"); 
```

财产：

```
public IEnumerable<PenDataRow> ActivePens => Pens.Where(x => x.Status == "Active"); 
```

将它们标记为属性或方法会更好吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-04T15:26:35.457

属性在后台作为方法实现，因此绝对没有性能差异。[在属性和方法之间进行选择](http://msdn.microsoft.com/en-us/library/ms229054(v=vs.100))的准则是语义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T15:27:36.223

属性只是具有特定命名和元数据的一两个方法。

因此开销是相同的，JIT 内联的机会也是一样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T15:30:33.530

本身没有性能差异，但我认为您班级的用户可能“期望”有一个。也就是说，类似的属性`ActivePens`可能被认为比类似的方法“更轻” `GetActivePens()`。我尝试编写方法来获取更昂贵的事物的值。这是非常主观的。

也可能存在调试器影响 - 将鼠标悬停在调试器中的类中的属性上可能会调用该属性并引发昂贵的操作来显示工具提示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:27:30.003

不，没有任何性能提升，因为它们也是以更优雅的方式帮助公开您的私有字段的方法。

# asp.net - 用 XML 编写 SQL 查询

> ID：12266653
> 
> 赞同：0
> 
> 时间：2012-09-04T15:24:53.347
> 
> 标签：asp.net, xml, teradata

[http://www.codeproject.com/Articles/11178/Writing-SQL-queries-in-XML-A-support-intensive-app](http://www.codeproject.com/Articles/11178/Writing-SQL-queries-in-XML-A-support-intensive-app)

[ASP.NET - 在全局资源文件中存储 SQL 查询？](https://stackoverflow.com/questions/270611/asp-net-storing-sql-queries-in-global-resource-file)

我想做类似上面链接的事情......但它不适合我......

我的项目中有动态 sql，我想移动到 xml。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:03:22.000

我真的希望您说要存储“SELECT BookingID from BOOKING WHERE BOOKINGDATE >= {0}”并不意味着您打算编写：

```
String.Format(query, parameter) 
```

这是一个巨大的安全漏洞。

编辑：

如果你真的想走这条路，我会建议 XML 像：

```
 <queries>
   <query id="getBookingId">
     <parameters>
       <parameter name="bookingDate" />
     </parameters>
     <statement>
       <!-- 
          SELECT BookingID from BOOKING WHERE BOOKINGDATE >= @bookingDate
       -->
     </statement>
   </query>
 </queries> 
```

然后你可以上课：

```
[XmlElement("query")]
public sealed class Query 
{
    [XmlAttribute("id")]
    public string Id { get; set; }

    // other elements/collections
} 
```

然后，您可以将您的 Xml 反序列化为这些 Query 对象的集合。我建议这样做一次并将其存储在 IDictionary 某处以避免重复处理 Xml 文件。

然后，您在每个 Query 对象中拥有所需的一切。一组参数和 sql 语句 - 请注意，在使用之前，您必须手动将注释字符 () 从语句中删除。同样，可能最好在开始时执行一次。

# java - 在静态块中创建对象时，对象位于内存中的什么位置？

> ID：12266658
> 
> 赞同：5
> 
> 时间：2012-09-04T15:25:15.537
> 
> 标签：java, object, heap-memory, stack-memory, static-block

如果我创建一个静态块并在那里创建一个对象，比如其他一些类，该对象是在堆上创建还是在堆栈上创建？

```
class Hello {
   static {
       Abc abcObject=new Abc();
   }
   // Other Code...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T15:26:17.400

无论静态（或）非静态，对象总是在堆上。

引用将在堆栈上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T15:26:42.043

**对象是在堆中创建的，但对对象的引用在堆栈中。**

您创建的变量`abcObject`位于堆栈中。这包含存储对象的堆内的内存地址`new Abc()`。

# bash - 在 Bash 脚本中，将多个同名文件附加在一起的好方法是什么？

> ID：12266669
> 
> 赞同：0
> 
> 时间：2012-09-04T15:25:45.973
> 
> 标签：bash, directory

所以，我正在构建我的第一个脚本，它是从两个不同的目录中解压缩文件并将所述目录合并在一起，然后将所有同名的文件附加在一起。我唯一苦苦挣扎的部分是将多个同名文件附加在一起。有什么好办法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:38:19.903

那要看每个档案的目录结构，是一样的吗？在这种情况下，假设解压缩的文件在`a/`and中`b/`，请执行以下操作：

```
mkdir c
for f in a/*; do
  cat a/"$f" b/"$f" > c/"$f"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:35:30.473

而不是使用`cp`第二个目录，做

```
for file in source/* ; do
    cat "$file" >> target/"${file#*/}"
done 
```

# sockets - 辅助数据可以便携分配吗？

> ID：12266679
> 
> 赞同：0
> 
> 时间：2012-09-04T15:26:32.417
> 
> 标签：sockets, posix, portability

[IEEE Std 1003.1-2008](http://pubs.opengroup.org/onlinepubs/9699919799/)的[`<sys/socket.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_socket.h.html)部分不提供 CMSG_SPACE 或 CMSG_LEN 宏，而只是说：

> 辅助数据由一系列对组成，每个对由一个 cmsghdr 结构和一个数据数组组成。

是否有一种可移植的方式来分配没有 CMSG_SPACE 的辅助数据，或者在没有 CMSG_LEN 的情况下将辅助数据附加到消息中？该引用向我表明，单个缓冲区的大小`(sizeof(struct cmsghdr)+ sizeof data)*nr_of_pairs`（当然，每对数据可能会更改），每个`cmgshdr.cmsglen = sizeof(struct cmsghdr) + sizeof data`人和`msg.msg_controllen = (sizeof(struct cmsghdr)+ sizeof data)*nr_of_pairs`CMSG_SPACE/CMSG_LEN 的所有系统特定文档都表明可能存在对齐问题这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:01:31.427

好的，所以据我所知，我的猜测是如何分配通常不起作用（我无法让它在 Linux 上工作，我不得不改用 CMSG_SPACE/CMSG_LEN）。根据 rfc2292 第 4.2 节中的[图表](http://www.ietf.org/rfc/rfc2292.txt)，我提出了 CMSG_SPACE 和 CMSG_LEN 的以下定义，我认为它们应该可以移植到符合 IEEE Std 1003.1-2008 的实现：

```
#include <stddef.h>
#include <sys/socket.h>

#ifndef CMSG_LEN
socklen_t CMSG_LEN(size_t len) {
        return (CMSG_DATA((struct cmsghdr *) NULL) - (unsigned char *) NULL) + len;
}
#endif

#ifndef CMSG_SPACE
socklen_t CMSG_SPACE(size_t len) {
        struct msghdr msg;
        struct cmsghdr cmsg;
        msg.msg_control = &cmsg;
        msg.msg_controllen =  ~0ULL; /* To maximize the chance that CMSG_NXTHDR won't return NULL */
        cmsg.cmsg_len = CMSG_LEN(len);
        return (unsigned char *) CMSG_NXTHDR(&msg, &cmsg) - (unsigned char *) &cmsg;
}
#endif 
```

显然这应该用宏来完成，但我认为这说明了这个想法。这对我来说似乎真的很棘手，并且由于 CMSG_NXTHDR 中可能的大小检查，不能被推入编译时常量，所以可能下一个版本的 POSIX 应该定义 CMSG_SPACE 和 CMSG_LEN 因为任何使用辅助数据的程序都必须使用它们反正。

# python - Numpy 1d Array CumSquare 的值

> ID：12266682
> 
> 赞同：1
> 
> 时间：2012-09-04T15:26:39.357
> 
> 标签：python, optimization, numpy, multidimensional-array, cumsum

我希望模拟 的功能`numpy.cumsum()`，但我需要捕获值的累积平方。

例如：我有一个数组是 [1,2,3,4]。

我可以`numpy.cumsum(array)`用来返回一个`array([1,3,6,10])`. 我的目标是使用一些快速的 numpy 技巧来获得值的累积平方。

在纯 Python 中使用列表：

```
>>> y = [1,2,3,4]
>>> sqVal = 0
>>> for val in y:
...     sqVal += val*val
...     print sqVal
... 
1
5
14
30 
```

我试过`numpy.cumprod()`了，但那是累积乘积，而不是值的累积平方和。我使用 NumPy 的愿望纯粹是基于速度。使用`cumsum()`比使用 for 循环快得多（这是有道理的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:33:42.007

`square`除了使用 numpy 的功能`cumsum`：

```
In [1]: import numpy as np

In [2]: a = np.array([1,2,3,4])

In [3]: np.square(a)
Out[3]: array([ 1,  4,  9, 16])

In [4]: np.cumsum(np.square(a))
Out[4]: array([ 1,  5, 14, 30]) 
```

# qt - 通过十进制值增加进度条值以及Qt中的更多问题

> ID：12266685
> 
> 赞同：1
> 
> 时间：2012-09-04T15:26:50.670
> 
> 标签：qt, qt4

我有以下问题。

A）我怎样才能通过十进制值增加进度条的值？我试过了

`ui->progressBar->setValue(0.5);`并使用 while 循环增加了 0.5。但我得到的只是空的进度条。知道为什么吗？

ps：我收到警告“此语句无效”就行了`ui->progressBar->setValue(0.5);`

B）在制作进度条时，我制作了一个 while 循环，进度条值递增 1 并添加了 Sleep(600)，这样进度条就不会很快完成。这不是问题，我的问题是当进度条增加时，我的应用程序滞后了很多。我试着把`QCoreApplication::processEvents();`我的while循环和我的代码都放在我的代码中，但这没有用。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:32:08.330

`QProgressBar::setValue`接受一个`int`参数。`0.5`转换为`int`is `0`，就像任何 fule kno 一样。因此，您实际上是在调用`setValue (0)`.

要正确执行此操作，您必须调用`setMinimum`and `setMaximum`，然后按适当的因子缩放浮点数。

但我必须承认，我对你的“声明无效”警告感到困惑。您确定吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:54:33.330

关于 B)，不要在主线程中使用 Sleep。当然，这会使您的应用程序无响应，因为在线程休眠时不会发生重绘或输入事件处理。而是使用一个`QTimer`连接到一个插槽来增加你的进度条值。

# xquery - xquery初学者——如果某个文本跟随一个节点，那么它是一个子节点还是兄弟节点

> ID：12266694
> 
> 赞同：0
> 
> 时间：2012-09-04T15:27:15.183
> 
> 标签：xquery

看看下面的示例 XML——

```
 <div id="sample">
    <b>Some text</b>

    : Demetra R. Smith

    <b> Some more text </b>
</div> 
```

现在，文本“Demetra R. Smith”是“b”节点的“子节点”（包含文本“某些文本”？还是“下一个兄弟”？

您如何确定某些内容是兄弟姐妹还是孩子——尤其是。在这种情况下，文本“Demetra R. Smith”没有包含在任何标签中（否则我不会问这个问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:50:19.857

`Some text`是第一个节点的子（文本）节点`<b/>`。`: Demetra R. Smith`是兄弟姐妹，在这种情况下是`<b/>`-node 的后续兄弟姐妹（没有下一个兄弟姐妹）。

您可以使用它访问它

```
/div/b[1]/following-sibling::text()[1] 
```

它选择`<b/>`（每个）-元素内的第一个-节点`<div/>`，查找following-sibling-axis上的所有文本节点并限制为第一个。它会回来

```
: Demetra R. Smith 
```

# android - ViewPager 中的 WebView 在页面显示之前不会加载/渲染

> ID：12266696
> 
> 赞同：7
> 
> 时间：2012-09-04T15:27:17.783
> 
> 标签：android, webview, android-viewpager

我使用带有许多 WebView 的 ViewPager，它用于显示 ePub。我的问题是 WebViews 只是被渲染/加载（我不太确定）他们相应的页面变得可见。在此之后页面不需要重新渲染，直到它从 ViewPagerAdapter 中销毁。其后果是总有一小会儿的白页。如何将它平滑滚动到下一个 webView 的页面预渲染（之前未渲染）。

这是我的寻呼机适配器：

```
public class MagazineReaderPagerAdapter extends PagerAdapter {

    private MagazineReaderActivity activity;
    private EpubDocument epub;

    public MagazineReaderPagerAdapter(Context ctx, EpubDocument epub)
    {
        activity = (MagazineReaderActivity) ctx;
        this.epub = epub;
    }

    @Override
        public int getCount() {
        return epub.getContentDocuments().size();
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        ReaderWebViewMulti view = new ReaderWebViewMulti(activity);
        view.loadContentDocument(epub.getContentDocuments().get(position), epub);

        ((ViewPager) container).addView(view, 0);
        return view;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }
} 
```

ReaderWebViewMulti 从 WebView 扩展而来，实现了一个 loadContentDocument 方法，该方法通过 loadDataWithBaseURL 加载内容。

**编辑：** 在activity-oncreate setOffscreenPageLimit 设置为3

```
 viewPager.setOffscreenPageLimit(3); 
```

为了指出问题所在，我在[YouTube 上制作了一个小视频](http://www.youtube.com/watch?v=TByj5MZt8zk)

从第 4 秒开始，您可以看到每个页面在已经可见时才被渲染。当我回去时，一切都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-19T19:48:28.340

我遇到了同样的问题，并通过禁用 Web 视图的硬件加速来修复它：

```
webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

查看[ViewPager 或 ScrollView 中的 WebView - Android 3.0+ 上的奇怪渲染错误](https://stackoverflow.com/questions/8273327/webview-inside-viewpager-or-scrollview-weird-rendering-bug-on-android-3-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T09:15:44.540

在清单文件中为您的应用程序设置此属性

安卓：硬件加速=“假”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T10:27:05.757

我对此提出了一些想法。滚动屏幕 1 个像素将呈现正确的页面：

```
 class SomeClass implements OnPageChangeListener {

        private ViewPager viewPager;

        ...

        viewPager = ...
        viewPager.setOnPageChangeListener(this);

        ...

        @Override
        public void onPageScrollStateChanged(int state) {

            if (state == ViewPager.SCROLL_STATE_IDLE) {
                // viewpager finished scrolling to a page

                viewPager.scrollBy(1, 0);
            }
        }
     } 
```

您需要检查您是从右侧还是左侧，并根据此滚动 -1 或 1 个像素（您来自的页面将保留在内存中，因此您无需重新加载该页面）。只有在第一次滚动时（打开应用程序后），上述问题仍然存在。

缺点：如果你仔细看，你可以看到页面滚动 1 个像素。

比我有更多时间的人可以深入研究 android 代码，看看当 1 个像素进入屏幕时到底发生了什么，并模仿其中的一些行为。

# oracle - 简单的 Oracle 表单菜单

> ID：12266697
> 
> 赞同：1
> 
> 时间：2012-09-04T15:27:18.527
> 
> 标签：oracle, oracle10g, oracleforms

我不想有一个简单的菜单（主菜单不是菜单栏），其中的按钮可以链接到另一个表单/窗口/洞穴。或者至少是在屏幕之间切换的代码。

![preview_of_main_menu](../Images/5a64dee9e47de766a526027d671bf9b3.png)

我会在按钮中放入什么代码（SQL/PL），或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:01:06.400

这是一个非常广泛的问题。如果你想显示一个特定的窗口，`WHEN-BUTTON-PRESSED`那么你可以使用下面的内置 -

```
SET_WINDOW_PROPERTY('WINDOW_NAME', VISIBLE, PROPERTY_TRUE);  --This would display the window

SET_WINDOW_PROPERTY('WINDOW_NAME', VISIBLE, PROPERTY_FALSE);  --This will hide the window 
```

`SET_WINDOW_PROPERTY`如果您在同一表单中使用，上述方法将起作用。

如果您想从父表单调用另一个表单（根据您的评论截图就是这种情况），您需要使用`CALL_FORM`内置的

```
CALL_FORM('MEMBERS'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:20:13.053

你为什么不只制作 1 个表格？1 个表格，许多数据块，画布，窗口

无论如何，对于您的问题，只需调用块

```
go_block('your_block'); 
```

如果你想调用另一个块

```
go_block('another_block');
hide_window('1st_open_window'); 
```

您应该在 1 个窗口中制作 1 个画布以便更好地安排

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T03:05:18.873

您还可以在单​​击按钮时显示的相同表单中使用 Stack 画布。

> SHOW_VIEW('CANVAS_NAME');

在那个堆栈中，你可以做任何你想做的事情。

# math - 给我 10 = 0 但 100 = 100 的等式

> ID：12266700
> 
> 赞同：-6
> 
> 时间：2012-09-04T15:27:29.717
> 
> 标签：math, mathematical-optimization

在一行中，**如何得到一个方程，如果我通过 10，它将给我 0，但如果我通过 100，它会给我 100？**

因此，对于以下数字，该值将类似于：

10 -> 0

100 -> 100

当然，我的号码可以是 10 到 100 之间的任何数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:29:16.193

```
int input = ...;
int result = (input <= 10 ? 0 : 100 * (input - 10) / 90); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:11:51.547

最后我得到了答案，方程式是这样的：

X = (Y*10-100)/9

现在尝试将 10 到 100 之间的任何值放入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:29:04.917

你可以做

```
if (i == 0) return 10;
if (i == 100) return 100; 
```

其他任何事情都留给您的想象力。

```
return i * 9 / 10 + 10; 
```

或者

```
return (i * i + 1110) / 111; 
```

# nstableview - 使用绑定时如何在基于视图的 NSTableView 中从 NSTableCellView 触发操作

> ID：12266701
> 
> 赞同：5
> 
> 时间：2012-09-04T15:27:31.543
> 
> 标签：nstableview, cocoa-bindings, nstablecellview

我在 10.8 上运行基于视图的 NSTableView 时遇到问题（目标是 10.7，但我认为这不相关）。

我正在使用 NSTableView，并通过绑定获取自定义 NSTableCellView 的内容值。我使用 NSTableCellView 的 obejctValue 来获取我的数据。

我在我的单元格中添加了一个按钮，我希望它在单击时触发一些操作。到目前为止，我只能在自定义 NSTableCellView 的子类中触发一个动作。

我可以使用链获取像这样单击的行：

```
NSButton *myButton = (NSButton*)sender;    

NSTableView *myView = (NSTableView*)myButton.superview.superview.superview;

NSInteger rowClicked = [myView rowForView:myButton.superview]; 
```

从那里我不知道如何到达定义操作的应用程序代表或控制器。

当我使用可可绑定时，我在 NSTableView 上没有可以用来触发我的操作的委托。

你知道我怎么能和控制器说话吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T12:53:49.487

感谢您的问题，我还将从 NSTableView 上的按钮触发操作。你的问题帮助我走上了正确的道路。

首先解决您的解决方案，以查找我的 NSTableView 所在的行号。我能够在不知道按钮的情况下找到它，在我的自定义 NSTableView 中，我第一次尝试安装了以下内容：

```
- (NSInteger)myRowNumber  
{  
    return [(NSTableView*)self.superview.superview rowForView:self];  
} 
```

这工作正常，但它不够健壮。只有当您已经明确知道您在视图层次结构中的深度时，它才有效。一个更强大和通用的解决方案是：

```
- (NSInteger)myRowNumber  
{   
    NSTableView* tableView = nil;   
    NSView* mySuperview = self;   

    do   
    {   
        NSView* nextSuper = mySuperview.superview;   
        if (nextSuper == nil)   
        {   
            NSException *exception =   
                [NSException exceptionWithName:@"NSTableView not found."   
                    reason:[NSString stringWithFormat:@"%@ search went too deep.",   
                    NSStringFromSelector(_cmd)] userInfo:nil];   
            @throw exception;   
        }   

        if ([nextSuper isKindOfClass:[NSTableView class]])   
            tableView = (NSTableView*)nextSuper;   
        else   
            mySuperview = mySuperview.superview;   
    } while (tableView == nil);   

    return [tableView rowForView:self];   
} 
```

这不仅适用于 NSTableView 级别，而且适用于任何安装在其上的任何级别，无论视图层次结构多么复杂。

至于您的问题中未回答的部分，我在我的班级中建立了一个 IBOutlet 并使用与我的文件所有者（在我的情况下是我的文档类）绑定的界面构建器。一旦我引用了我发送消息的类和行号，我就会调用该函数。在我的情况下，调用要求我传递它源自的行号。

```
[self.myDoc doSomethingToRow:self.myRowNumber]; 
```

我对此进行了测试，它可以在 NSTableView 之上的视图层次结构的各个级别上工作。它的功能不必首先选择行（这似乎是在 Apples 文档中假设的）。

问候，乔治·劳伦斯·斯托姆，美国华盛顿州马尔特比

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T03:36:13.713

尽管您使用的是绑定，但您仍然可以在界面构建器中将控制器设置为您的 tableview 的委托。

我看到您已经能够从单元格内部访问表格视图。下一个任务必须很简单，只需将表视图委托设置为按钮操作的目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-30T11:18:09.120

# 使用`rowForView:`和响应者链

要响应嵌入在 中的控件的操作`NSTableCellView`，该控件应将该操作发布给**First Responder**。或者，**文件所有者**是可能的，但这是更紧密的耦合。

在 action 方法中使用[`rowForView:`](https://developer.apple.com/documentation/appkit/nstableview/1526732-rowforview?language=objc)来确定哪一行的控件发出了该操作：

```
- (IBAction)revealInFinder:(id)sender {
    NSInteger row = [self.tableView rowForView:sender];
    ...
} 
```

该操作在任何响应者链类中实现。这很可能是您的子类`NSWindowController`实例。响应者也可以是应用程序委托；假设代表有办法与`NSTableView`.

请参阅 Apple 的示例[TableViewPlayground：使用基于视图的 NSTableView 和 NSOutlineView](https://developer.apple.com/library/content/samplecode/TableViewPlayground/)来了解这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-04T18:12:06.270

苏哈斯的回答帮助了我。

```
func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -> NSView? {

    if let cell = tableView.makeView(withIdentifier: NSUserInterfaceItemIdentifier(rawValue: "EDIT_CELL_VIEW"), owner: self) as? SymbolManagerCell  {                    
                if let editButton = cell.subviews[0] as? NSButton {
                    editButton.target = cell // this is required to trigger action
                }
                return cell
            }
    return nil
} 
```

# stylus - Stylus，指变量名和值

> ID：12266704
> 
> 赞同：6
> 
> 时间：2012-09-04T15:27:42.417
> 
> 标签：stylus

## 我想...

我正在尝试做这样的循环

```
my-red = #fcc
my-blue = #ccf

for color in my-red, my-blue
  .{color}
    color x 
```

我希望它输出

```
.my-blue {
  color: #ccf;
}
.my-red {
  color: #fcc;
} 
```

我似乎无法同时获得所需的变量名称和值

## 我试过了...

```
my-blue = #ccf
my-red = #fcc

for x in 'my-blue' my-red
  .{x}
    color x 
```

但我只得到类名或颜色名（取决于我是否使用字符串作为变量名进行迭代）

```
.my-blue {
  color: "my-blue";
}
. {
  color: #fcc;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T20:07:07.623

您可以将数组用于此类任务，因此您可以这样做：

```
my-colors = my-red  #fcc,
            my-blue #ccf

for pair in my-colors
  .{pair[0]}
    color pair[1] 
```

这样做你声明了`my-colors`数组，然后遍历它，使用对中的第一个元素作为名称，第二个作为值。

# php - 会话变量在 IE 和 Safari 中有效，但在 Chrome、Opera 或 Firefox 中无效？

> ID：12266705
> 
> 赞同：1
> 
> 时间：2012-09-04T15:27:50.020
> 
> 标签：php

我正在从登录页面 ($_SESSION['login']) 设置会话变量。我已经彻底测试过，肯定会创建变量并存储正确的值（$_SESSION['login'] = '1'），但使用 Chrome、Opera 或 Firefox 在下一页中无法识别该变量- 奇怪的是，在 Safari 和 Internet Explorer 中，相同的脚本可以正常工作。

任何帮助都将不胜感激-我一直在尝试解决这个问题，但无法得到它-我在这里完全不知所措。

这是一步一步-

```
<?php
// log in page
// if logged in successfully set the session variable

session_start();

if (// log in credentials good) {
    $_SESSION['login'] = '1';
    header('location:inside_page.php');

    // echo $_SESSION['login'] ;
    // ----------------------
    // commenting out the redirect and echoing
    // the session variable works as expected
    // in IE, Safari, Chrome, Opera and Firefox
}

?> 
```

这是我的 Check_login 类 - 它在下一页（inside_page.php）中被实例化 -

班级：

```
<?php

if (! defined('EXT')){ exit('Invalid file request'); }

class Check_login { 
    private $login = null ;

    function __construct() {
        session_start();
        $this->login = $_SESSION['login'];
        if ($this->login != '1') {
            header('location:../index.php');
        }

        // $login = $this->login ;
        // echo $login ;
        // $session = $_SESSION['login'];
        // echo $session ;
        // ----------------------
        // commenting out the redirect and echoing the
        // session variable shows 1 in IE and Safari, but
        // empty in Chrome, Opera and Firefox
    }

}

?> 
```

页面（inside_page.php）：

```
<?php

require('../lib/Check_login.php');

session_start();

$login = new Check_login;

?> 
```

同样，任何帮助都会非常棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:09:29.347

我想通了 - 我不能说我明白为什么会这样，但这就是解决我的问题的原因。在我的登录页面中，验证登录凭据后，我将会话变量“登录”设置为 1，然后显式重定向到另一个页面。我在测试后意识到，使用相对 URL 进行重定向可以解决问题。

我的原始帖子甚至没有说明 URL，因为我认为没有必要，但这就是问题所在 -

```
<?php
// log in page
// if logged in successfully set the session variable

session_start();

if (// log in credentials good) {
    $_SESSION['login'] = '1';
    header('location:https://www.somedomain.com/inside_page.php'); // *** PROBLEM
}

?> 
```

通过相对设置位置，我的问题就消失了-

```
<?php
// log in page
// if logged in successfully set the session variable

session_start();

if (// log in credentials good) {
    $_SESSION['login'] = '1';
    header('location:inside_page.php'); // *** FIX
}

?> 
```

我仔细检查了，安全连接绝对不是问题，它是显式 URL。

使用相对位置，我的会话变量显示在 Internet Explorer、Safari、Chrome、Opera 和 Firefox 的下一页中。使用一个明确的位置，它出现在 IE 和 Safari 中，但不在 CHROME、OPERA 和 FIREFOX 中。

您可以轻松地重新创建并亲自尝试 -

```
<?php

// ------- page_one.php -------

session_start();

$_SESSION['val'] = '1';

header("location:http://www.somedomain.com/page_two.php") ;
// header("location:page_two.php") ;

?>

<?php

// ------- page_two.php -------

session_start();

if ($_SESSION['login'] != '1') {
    echo 'false' ;
} else {
    echo 'true' ;
}

?> 
```

希望这可以节省其他人一些时间（和头痛）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:31:48.703

移到inside_page.php`session_start()`中的 require 语句上方。

会话应该在脚本的最开始就开始，并且几乎总是在包含之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T01:00:04.080

我在尝试将 digitalaccesspass (DAP) 集成到 PHP5.5 服务器时遇到了类似的问题（破坏了所有 Webkit/Blink 浏览器，因此破坏了 Chrome、Safari 和 Opera 的登录），并且这些更改的星座有所帮助。

*   我确保验证器中的第一行是`session_start()`
*   就在我添加的所有重定向（`header("Location:")`调用）之前`session_write_close()`。
*   重定向被编辑为相对路径，而不是绝对路径。

对于通过 Google 偶然发现此问题的人，如果您使用 DAP 解决此问题，请在 /dap/authenticate.php 中进行这些更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-02T05:49:24.267

我的 PHP 会话也无法在 Chrome 中运行。

我发现 PHPSESSID cookie 路径在我的页面之间没有同步，尽管每个页面都只是`session_start()`用来初始化每个会话。

将上面的这一行添加`session_start()`到我将数据写入会话的页面解决了这个问题：

```
session_set_cookie_params(600, '/'); 
```

看：

[http://php.net/manual/en/function.session-set-cookie-params.php](http://php.net/manual/en/function.session-set-cookie-params.php)

# c# - 为什么我的事件处理程序只输入一次？

> ID：12266708
> 
> 赞同：1
> 
> 时间：2012-09-04T15:27:51.700
> 
> 标签：c#, winforms, datagridview, datagridviewtextboxcell

我将表单的 KeyPreview 设置为 true。

如果 DataGridView 单元格已经有值，我正在尝试向下移动到下一个单元格。我有这个代码：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
    if (this.ActiveControl == dataGridViewPlatypus)
    {
        var currentCell = dataGridViewPlatypus.CurrentCell;
        if (currentCell.Value.ToString().Length == 1) 
        {
            ;//Now what?
            SendKeys.Send("{DOWN}");
        }
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

在内部“如果”上设置了一个断点，我第一次在单元格中输入一个值时到达那里（大概它是长度 0 或长度 1，但在该点查看 currentCell 的值，它是“格式化文本” value == "" 并且我没有看到任何其他可能的属性来辨别单元格内容是什么）。

“如果”失败了，它下降到“返回基础”。线。

当我在单元格中输入第二个值时（例如，单元格中可见的内容从“2”变为“22”），我什至没有到达断点。为什么？？？

注意：这是我在这里提出的一个问题的变体：[如何以编程方式从 datagridview 中的一个单元格移动到另一个单元格？](https://stackoverflow.com/questions/12206478/how-can-i-programmatically-move-from-one-cell-in-a-datagridview-to-another#comment16370308_12206478)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:36:05.663

现在，您正在测试该框中的值的文本表示是否正好是一个字符的长度。

如果我正确理解您的问题，您应该尝试 `currentCell.Value.ToString().Length > 0`

# c# - 自定义控件依赖属性绑定到属性

> ID：12266712
> 
> 赞同：1
> 
> 时间：2012-09-04T15:28:08.173
> 
> 标签：c#, wpf, silverlight, custom-controls, dependency-properties

只是玩弄不同类型的绑定，并让一个属性将我的自定义控件的依赖属性绑定到另一个属性。

XAML：

```
<UserControl x:Class="BrickBreaker.Brick"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="20" d:DesignWidth="50"  >
<Rectangle Width="50" Height="20" RadiusX="3" RadiusY="3" Stroke="Black" Fill="{Binding BrickFill, Mode=TwoWay}" /> 
```

代码背后：

```
public partial class Brick : UserControl
{
    public Brick()
    {
        InitializeComponent();

    }

    public Brush BrickFill
    {
        get { return (Brush)GetValue(BrickFillProperty); }
        set { SetValue(BrickFillProperty, value); }
    }

    // Using a DependencyProperty as the backing store for BrickFill.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BrickFillProperty =
        DependencyProperty.Register("BrickFill", typeof(Brush), typeof(Brick), null);

} 
```

MainWindow.xaml 中的实现

```
<UserControl x:Class="BrickBreaker.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:BrickBreaker="clr-namespace:BrickBreaker" mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White">
    <BrickBreaker:Brick Margin="100,100,0,0" BrickFill="Azure"/>
</Grid> 
```

基本上我想在后面的代码中将 Rectangles Fill 属性绑定到 Dependency 属性。

谢谢。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:37:50.403

确切的问题是什么？将 UserControl 的 DataContext 设置为代码隐藏，例如：

```
<UserControl DataContext="{Binding RelativeSource={RelativeSource Self}}">

</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:05:00.383

缺少这个：DataContext="{Binding RelativeSource={RelativeSource Self}}"

# javascript - Extjs 组合框：从下拉列表中隐藏选定的值

> ID：12266713
> 
> 赞同：8
> 
> 时间：2012-09-04T15:28:10.933
> 
> 标签：javascript, extjs, combobox, extjs4

我正在使用 ExtJS 4 并寻找一种方法可以从组合的下拉列表中隐藏当前选定的值？

所以代替这个（组合框中当前选择的“阿拉斯加”）：

![默认组合框行为](../Images/d9f981baff1f25e9365b84db08a0c7cc.png)

我希望值列表如下所示：

![在此处输入图像描述](../Images/886ca15c97ee8fd94b369902110c44cd.png)

在我的情况下，组合框*不可编辑*（即您不能输入任意值），我认为两次显示所选值没有多大意义：一次在输入字段中，一次在下拉列表中。我已经看到选择了什么，我希望下拉列表只显示我可以选择的**其他选项。**

到目前为止，我还没有看到一个简单的方法来做到这一点。可能最好的起点是过滤组合框商店，但组合框使用自己的过滤器来实现实时搜索功能。

有人考虑过这个问题吗？我在尝试做一些奇怪的事情吗？我很惊讶我找不到任何相关的主题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T19:18:36.817

I don't think you have to much options here... maybe you could do something like this:

```
Ext.define('Your.company.Combo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.specialcombo',

    /**
    * @cfg {boolean} hideActive
    * True to hide any selected record. Defaults to <tt>true</tt>.
    */
    hideActive: true,

    /**
    * @private {Ext.data.Model[]} hideActive
    * A Array of selected records.
    */

    initComponent: function () {
        this.selectedRecords = [];

        this.callParent(arguments);

        this.on('select', this.onSelectionChange, this);
    },

    /**
    * @private onChangeSelection
    * eventhandler selections
    */
    onSelectionChange: function (me, recs) {
        if(!me.hideActive)
            return;
        // write the current selected back to the store (you need to suspend autoSync if active)
        me.store.add(me.selectedRecords);
        // set the selected as new recordlist
        me.selectedRecords = recs;
        // remove the selected from the store
        me.store.remove(recs);
    }
}); 
```

That example is totally untested. But as the store is mainly bound to the BoundList which is not direct connected to the textfield this should work. You are doing a sort of caching here.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T07:19:05.650

我想出了另一个看起来更简单的解决方案，并且快速测试显示没有副作用：

我们可以保持 Combobox 逻辑不变，但只需通过 CSS 隐藏所选项目：

```
.x-boundlist-selected {
    display: none;
} 
```

瞧，我们看不到所选项目！不知道这在生产代码中有多可靠，但我认为仍然值得考虑......

* * *

**更新。**如果您想通过 Combobox 的配置标志控制此行为，这里是完整的解决方案：

```
Ext.define('My.ComboBox',  {
    extend: 'Ext.form.field.ComboBox',

    /**
     * @cfg {Boolean} hideActive=true
     * When true, hides the currently selected value from the dropdown list
     */
    hideActive: true,

    /**
     * Internal method that creates the BoundList
     */
    createPicker: function() {
      var picker = this.callParent(arguments);

      // honor the hideActive flag
      if(this.hideActive) {
        picker.addCls('x-boundlist-hideactive');
      }

      return picker;
    }
}); 
```

在您的 CSS 中的某处：

```
.x-boundlist-hideactive .x-boundlist-selected {
    display: none;
} 
```

* * *

**更新 2\. 发现我的方法存在 UI 问题！**

从下拉列表中隐藏选定的项目会给键盘导航带来一个怪癖：虽然该元素在视觉上是隐藏的，但它仍然存在，并且当您按下 UP/DOWN 键时，Ext 会选择它。从视觉上看，这意味着您的选择将在某个时候消失，您必须再按一次 UP/DOWN 才能将其恢复到下一个可见元素上。

到目前为止，我无法找到一个简单的解决方法。我最好的选择是修改`itemSelector`绑定列表（这是一个数据视图），将其设置为类似`.x-boundlist-item:not(.x-boundlist-selected)`这样的内容，以便所选元素不会进入查询。

虽然选择器本身可以工作，但它并不能解决问题，因为视图会在任何其他类（包括所选项目类）应用于项目之前执行此选择器查询（这发生在[Ext.view.AbstractView.refresh()](http://docs.sencha.com/ext-js/4-0/source/AbstractView.html#Ext-view-AbstractView-method-refresh)中。

*此外，当下拉列表出现在组合框上方时*，此解决方案会导致错位！**

 *我有一种感觉，我的方法太容易完美地工作了:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T10:30:36.090

我最终使用了@sra 解决方案的修改版本：

```
Ext.define('My.ComboBox',  {
    extend: 'Ext.form.field.ComboBox',

    /**
     * @cfg {Boolean} hideActive=true
     * When true, hides the currently selected value from the dropdown list
     */
    hideActive: true,

    /**
    * @private {Ext.data.Model[]} selectedRecords
    * A Array of selected records, used when hideActive is true
    */

    initComponent: function() {
        this.selectedRecords = [];

        this.callParent();
    },

    setValue: function(value, doSelect) {
        var store = this.store;

        if(this.hideActive) {
            store.suspendEvents(false);
            // write the current selected back to the store (you need to suspend autoSync if active)
            // do this BEFORE callParent so the currently selected record would be found in the store
            store.add(this.selectedRecords);
        }

        this.callParent(arguments);

        if(this.hideActive) {
            // set the selected as new recordlist
            this.selectedRecords = this.valueModels;
            // remove the selected from the store
            store.remove(this.valueModels);
            store.resumeEvents();
            store.fireEvent('refresh', store);
        }

        return this;
    }

}); 
```

“隐藏”逻辑是相同的，只是我在`setValue`方法中执行它以确保它在以编程方式设置组合的值时也可以工作，包括使用值初始化组合框的情况。

**UPD**另外，看起来`store.add(this.selectedRecords);`必须在*之前* `this.callParent(arguments);`调用，否则如果我们尝试设置*相同的值两次*，组合框会表现得很奇怪（它根本不会在商店中找到活动记录，因为我们删除了它，所以它会重置为空白）。我暂停了商店的事件，以防止组合框在我对选定记录的操作过程中尝试与其下拉列表同步而引起的一些怪癖，并`'refresh'`在我完成后手动触发商店的事件，以便最终更新列表。这可能会对性能产生影响，但到目前为止我不知道更好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-31T23:51:23.420

ExtJS 3 我根据其他人写了这个答案。对我来说效果很好，但它与您所寻找的有所不同。

```
Name.space.name = new Ext.extend(Ext.form.ComboBox, {
    type: 'all',
    oldrec: null,
    store: null,
    constructor: function (config) {
        var me = this;
        if (config.type === 'all') {
            me.store = AllConditionStore;
        } else {
            me.store = ?.?('RuleParameterType');
        }
        config = Ext.apply({
            store: me.store,
            valueField: 'id',
            hideActive: true,
            triggerAction: 'all',
            lazyRender: true,
            allowBlank: false,
            mode: 'local',
            displayField: 'text',
            listeners: {
                select: function (me, recs, index) {
                    if (me.oldrec !== null)
                        me.store.add(me.oldrec);
                    me.oldrec = recs;
                    // remove the selected from the store
                    me.store.remove(recs);
                    // redo store
                }
            }
        }, config);
        ?.?.Parameter.superclass.constructor.call(this, config);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T19:00:50.760

所以我使用了@sra 的解决方案，但稍作修改，将内容添加到以下正确位置`if(!me.hideActive)`：

```
if(me.selectedRecords[0]) {
    me.store.insert(me.selectedRecords[0].index,me.selectedRecords);
} 
```

这样你就不会将它们添加到底部。我知道这是一个旧帖子，但我希望它可以帮助人们寻找解决方案。*

# gwt - GWT DeckLayoutPanel 滑动到一个新的（尚未渲染）小部件？不工作

> ID：12266716
> 
> 赞同：0
> 
> 时间：2012-09-04T15:28:23.803
> 
> 标签：gwt, animation, transition, slide

无论我尝试什么，我似乎都无法滑动到添加到 DeckLayoutPanel 的新的、尚未渲染的小部件。

如果它以前从未渲染过，它不会出现幻灯片过渡。

但是，当我执行 showWidget(...) 来回切换到新小部件时，幻灯片过渡效果很好。

有没有人能够在 DeckLayoutPanel 中滑动到尚未渲染的小部件？如果有怎么办？

我需要这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:51:20.690

您可以使用该`scheduleDeferred`命令。这将确保在实际显示小部件时执行您的幻灯片命令。

> 它将一些代码推迟到浏览器重绘页面（如果需要）并处理待处理事件之后（即在 mouseup 之后单击，如果这是在 mousedown 中完成的） [Source](https://stackoverflow.com/questions/7821963/usage-of-scheduledeferred-in-gwt)

[文档](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/core/client/Scheduler.html#scheduleDeferred(com.google.gwt.core.client.Scheduler.ScheduledCommand))

用法：

```
Scheduler.get().scheduleDeferred(new ScheduledCommand() {     
  @Override 
  public void execute() {        
    Scheduler.get().scheduleDeferred(/*Your silider comand*/); // reschedule 
  } 
}); 
```

# html - HTML 到 nopCommerce 主题

> ID：12266717
> 
> 赞同：8
> 
> 时间：2012-09-04T15:28:24.497
> 
> 标签：html, themes, nopcommerce

我是 nopCommerce 的新手，并试图在其上制作 HTML 主题我用谷歌搜索了很多东西，但无法获得创建自定义主题 nopCommerce 的正确方法，任何人都可以帮忙，

提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T06:30:20.753

最简单的方法：

1.  将文件夹复制`~/Themes/DarkOrange`到`~/Themes/YOUR_THEME`。修改theme.config中的对应项。

2.  如果您需要更改任何视图，请复制该视图`~/Views/SUB_FOLDER/FILE_NAME.cshtml`并将其粘贴到`~/Themes/YOUR_THEME/SUB_FOLDER/FILE_NAME.cshtml`.

    例如，如果您想更改 中的代码`~/Views/Shared/_ColumnsOne.cshtml`，请复制该文件并将其粘贴到`~/Themes/YOUR_THEME/Shared/_ColumnsOne.cshtml`.

3.  如果您不需要更改任何视图，那么修改`~/Themes/YOUR_THEME/Content/styles.css`就足够了。（还要确保您更新`~/Themes/YOUR_THEME/Views/Shared/Head.cshtml`以指向您的 CSS）

**经验法则：** nopCommerce 将在您的主题中寻找特定视图。如果它找不到视图，那么它会退回到`~/Views`. 否则，您的主题视图会覆盖原始视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T14:47:45.593

除了设计师指南之外，还有一些很好的文章描述了为什么以及如何使用 nopCommerce 主题：

[为什么选择 nopCommerce 主题？](https://www.nop-templates.com/why-nopcommerce-themes)

[如何创建 nopCommerce 主题](http://www.nop-templates.com/blog/12/how-to-create-nopcommerce-themes)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T14:43:40.680

这里有一点帮助：[概述（设计师指南）](http://docs.nopcommerce.com/pages/viewpage.action?pageId=1442505)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:45:32.587

将里面的所有文件复制`~/Views`到您的主题中：`~/Themes/YourTheme/Views`

然后只需修改`.cshtml`里面的任何文件。

我希望它有帮助！

# css - 未定义的表单样式

> ID：12266718
> 
> 赞同：0
> 
> 时间：2012-09-04T15:28:25.153
> 
> 标签：css, ruby-on-rails, coffeescript, simple-form, jquery-chosen

我从我的任务列表中创建了一些过滤器。使用`simple_form`和`chosen-rails`。但是我的表格看起来很糟糕。

我的表格有下一个代码：

```
= simple_form_for @search do |f|
  = f.collection_select(:user_id_in, User.all, :id, :name, {},{:multiple => "multiple", "data-placeholder" => "Select user"})
  = f.button :submit, "Submit" 
```

还有我的`coffee`文件：

```
jQuery ->
  $('#search_user_id_in').chosen() 
```

看起来：

```
<div id="search_user_id_in_chzn" class="chzn-container chzn-container-multi" style="width: 42px;"> 
```

这个值在哪里：`style="width: 42px;`？`Chosen`还是`simple_form`？我必须用?覆盖文件中的每个`<div>`元素`css``!important`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:54:02.550

我认为它来自选择...我使用选择，但我直接将它用作 JS 文件和 CSS，所以我可以灵活地找到 42px 并相应地更新它...你有 Chosen.js 还是 Chosen .css 某处？

# google-maps - 从 KML 文件创建多段线

> ID：12266734
> 
> 赞同：0
> 
> 时间：2012-09-04T15:29:17.020
> 
> 标签：google-maps, kml, google-polyline

我的网站上有一张地图，我想从 kml 文件中创建一些路径。我找到[了 geoxml3](http://code.google.com/p/geoxml/)，我有这个代码：

```
<script type="text/javascript" src="geoxml3.js"></script>
<script type="text/javascript">

var geoXml = null;
var map = null;
var myLatLng = null;

    function initialize() {
      var mapOptions = {
        //stuff
      };
      map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

      geoXml = new geoXML3.parser({
                      map: map
                  });
      geoXml.parse('paths/path1.kml');
    };
</script> 
```

它来自文档示例。现在我想通过访问 的某些属性来检索路径`geoXml`，但我的浏览器的调试器声称它是未定义的，即使从 kml 文件定义折线点的标记显示在地图上。如何从文件中绘制路径，不一定使用这种方法？

这是文件： http: [//pastebin.com/R1PsuumL](http://pastebin.com/R1PsuumL) 我想从`Folder/Placemark/LineString/coordinates`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:08:20.997

[这](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?lat=23.364511&lng=28.433372&zoom=21&type=m&filename=http://www.geocodezip.com/xmlproxy060215.asp?http://pastebin.com/raw.php?i=r1psuuml)是您使用 geoxml3 渲染的 KML。

# java - "No Main Manifest Attribute" in ----.jar Netbeans

> ID：12266735
> 
> 赞同：20
> 
> 时间：2012-09-04T15:29:17.800
> 
> 标签：java, maven, netbeans, jar, manifest.mf

I recently just started toying around with Maven in java. Time comes to test my project, it works fine in the NetBeans window, running the main class found in App.java (com.MyCompany.App), but when I try to run it from a command line I get an error:

```
java -jar fileName.jar 
```

> "No Main Manifest Attribute" in fileName.jar

I have tried adding a manifest.mf file specifying what main is, I've also been into project properties and added it as the main file...

What's going on?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-19T23:59:40.927

You need the `maven-jar-plugin` (see [Maven's example](http://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make)). This plugin will create the required entries in the manifest file when the project is built.

```
<project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <archive>
            <manifest>
              <addClasspath>true</addClasspath>
              <mainClass>fully.qualified.MainClass</mainClass>
            </manifest>
          </archive>
        </configuration>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

You need the version, otherwise, the project won't build. The `fully.qualified.MainClass` starts at the package hierarchy.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T15:52:07.413

Hope there is a problem in your manifest file. Some basic checks might solve your problem.

*   it should under `/META-INF/MANIFEST.MF`
*   Content should have `Main-Class:com.MyCompany.App`

If you are using any IDE, there should be an option to export project as `runnable jar`, you can make use of that to let the IDE take care of correct manifest.

From command line `jar cfm filename.jar Manifest.txt com/MyCompany/*.class` which generates the Manifest file with following contents

```
Manifest-Version: 1.0
Created-By: 1.6.0 (Sun Microsystems Inc.)
Main-Class: com.MyCompany.App 
```

And then you can run jar command `java -jar fileName.jar`.

These type of problems are trivial but kills lot of time, just ensure your contents and location of the file is correct.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T17:58:33.933

You could just use this for command line:

```
java -cp jarFileName.jar full.package.className 
```

You wouldn't have to go into specifics of the Manifest file in this case.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-11T08:40:51.347

Setting an Entry Point with the JAR Tool:

The 'e' flag (for 'entrypoint') creates or overrides the manifest's Main-Class attribute. It can be used while creating or updating a JAR file. Use it to specify the application entry point without editing or creating the manifest file. For example, this command creates app.jar where the Main-Class attribute value in the manifest is set to MyApp:

```
jar cfe app.jar MyApp MyApp.class 
```

You can directly invoke this application by running the following command:

```
java -jar app.jar 
```

If the entrypoint class name is in a package it may use a '.' (dot) character as the delimiter. For example, if Main.class is in a package called foo the entry point can be specified in the following ways:

```
jar cfe Main.jar foo.Main foo/Main.class 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-10T15:05:46.370

If you look at the properties dialog for the project (from project tab, right click on your project and select properties) you'll see that there is a "run" item in the "Categories" window. Click on it and you'll see a dialog where you can specify the Main Class for the jar. That information will end up in your manifest.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T04:34:22.173

I have been having this problem with Netbeans 8.0 and the built-in Maven project for the "Java Application" project prototype. Also I have Maven 3 and I found some of the suggestions on the web don't match the maven code used with Netbeans as well.

Anyway here's a simple recipe for having JAR file to run the main-class and embed dependent libraries. I made this work by comparing other project POM files for projects I found that worked with sub-project JAR-s so if someone with better Maven knowledge spots a *gottcha*, please speak. Also, I left in some normal stuff to provide context. Example follows:

```
 <properties>
         <packageName>trials.example</packageName>
         <mainClass>${packageName}.CmdApp</mainClass>
         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

         <slf4jVersion>1.7.7</slf4jVersion>
         <log4jVersion>1.2.17</log4jVersion>

         <maven.compiler.source>1.8</maven.compiler.source>
         <maven.compiler.target>1.8</maven.compiler.target>
     </properties> 
```

This section tells Maven about the project.

*   **packageName** ... Is the Java package for the main-class
*   **mainClass** ..... The fully qualified name for class with main() method.

You will see these used in the maven-jar-plugin.

The other thing the built-in example prototype didn't do was to package my sub-projects into the JAR so I can run from the command line. This is done with the maven-dependency-plugin below. The interesting bit is in the where we don't need to package the system stuff, and we want the dependant classes wrapped into our JAR.

These are used as follows:

```
 <build>
         <plugins>
             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-dependency-plugin</artifactId>
                 <version>2.6</version>
                 <executions>
                     <execution>
                         <id>unpack-dependencies</id>
                         <phase>package</phase>
                         <goals>
                             <goal>unpack-dependencies</goal>
                         </goals>
                         <configuration>
                             <excludeScope>system</excludeScope>
                             <outputDirectory>${project.build.directory}/classes</outputDirectory>
                         </configuration>
                     </execution>
                 </executions>
             </plugin>

             <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-jar-plugin</artifactId>
                 <version>2.5</version>
                 <configuration>
                     <useDefaultManifestFile>true</useDefaultManifestFile>
                     <archive>
                         <manifest>
                             <mainClass>${mainClass}</mainClass>
                             <packageName>${packageName}</packageName>
                             <addClasspath>true</addClasspath>
                             <classpathPrefix>classes/</classpathPrefix>
                         </manifest>
                         <manifestEntries>
                            <mode>development</mode>
                            <url>${pom.url}</url>
                         </manifestEntries>
                     </archive>
                 </configuration>
             </plugin>

          </plugins>
    </build> 
```

Hope that saves you the few hours of checking and testing to make it happen. Cheers, Will.

# r - 在 R 中绘图 + 更改字体大小

> ID：12266740
> 
> 赞同：2
> 
> 时间：2012-09-04T15:29:36.127
> 
> 标签：r

我想减少`"hola"`此指令中的标签表达式：

```
axis(1, at = c(32.65), labels = expression("hola")) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:33:43.650

使用论据`cex.axis`。这是一个相对于 1 的缩放值，因此值`<1`会减小字体大小，而值`>1`会增加字体大小：

```
plot(1:50)
axis(1, at = c(32.65), labels = expression("hola"), cex.axis=2)
axis(1, at = c(45), labels = expression("hola"), cex.axis=0.5) 
```

![在此处输入图像描述](../Images/812d07fe73d61e7cba9b23138d24ab9a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:33:34.430

用于`cex.axis`更改标签大小。

例如：

```
axis(1, at = c(32.65), labels = expression("hola"), cex.axis=0.8) 
```

# ios - 如何创建视图以添加到视图控制器？

> ID：12266741
> 
> 赞同：0
> 
> 时间：2012-09-04T15:29:38.290
> 
> 标签：ios, xcode, uiview, uiviewcontroller, storyboard

我正在使用 UAModalPanel 创建弹出框控制器效果。我可以显示弹出框，但我正在努力弄清楚如何创建一个视图（以图形方式，在情节提要中），在代码中实例化该视图，并将其添加到 UAModalPanel。

**我试过的**

*   在情节提要中创建了一个 UIViewController，将其类设置为自定义类，在代码中实例化该类，获取它的视图并尝试将其添加到当前的“场景”。

而已。当然有一种方法可以让我在故事板中创建一个视图，让它成为 UIView 的子类，然后我可以在需要使用它的代码中获取它？而不是把它放在代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:33:59.437

在情节提要中，您需要拖放一个新的`UIViewController`，然后在此处给它一个标识符：

![在此处输入图像描述](../Images/9fb0190348851d35f863d7effdf2a204.png)

然后在代码中，您可以使用以下内容获取此视图控制器的视图属性：

```
UIViewController *myController = [self.storyboard instantiateViewControllerWithIdentifier:@"myIDfromTheLastStep"]; 
```

现在您可以获取控制器视图属性并进行调整。这是帧更改的示例

```
[myController.view setFrame:CGRectMake(0, 0, 320, 320)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:39:53.523

除非您需要 segues，否则最好创建一个独立的 XIB

根据需要布局视图，将其类设置为您自己的（MyCustomView），然后像这样实例化

```
 NSArray *nib=[[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:self options:nil];
 MyCustomView *view = (MyCustomView*)[nib objectAtIndex:0]; 
```

只要您的视图是 XIB 中的第一个/唯一对象，这将为您实例化视图

# java - 尝试使用父类方法时Java调用子类方法

> ID：12266744
> 
> 赞同：7
> 
> 时间：2012-09-04T15:29:54.023
> 
> 标签：java, inheritance

如果我有两个班级，A 和 B，

```
public class A {
    public int test() {
        return 1;
    }
}

public class B extends A{
    public int test() {
        return 2;
    }
} 
```

如果我这样做：`A a1 = new B()`，则`a1.test()`根据需要返回 2 而不是 1。这只是 Java 的一个怪癖，还是这种行为有某种原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:31:22.213

这称为[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。在运行时，将根据“真实”类型调用正确的方法`a1`，`B`在这种情况下。

正如维基百科所说：

> 多态性在工业中的主要用途（面向对象编程理论）是属于不同类型的对象能够响应同名的方法、字段或属性调用，每个调用都根据适当的特定于类型的行为。程序员（和程序）不必事先知道对象的确切类型，因此确切的行为是在运行时确定的（这称为后期绑定或动态绑定）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T15:30:51.767

不，这是正确的（这是由于多态性）。所有方法调用都对对象进行操作，而不是引用类型。

在这里，您的对象是类型，因此将调用`B,`测试方法。`class B`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:37:23.547

这是[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，更具体地说是在 Java[覆盖](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)中。如果要从 B 类调用 A 类的测试方法，则需要使用[super](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)来调用超类方法。例如：

```
public class B extends A{
   public int test() {
       return super.test();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:31:50.207

这是预期的行为。B 类中的方法`test()`覆盖`test()`A 类的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T15:33:03.773

为了

```
A a1 = new B(); 
```

`a1`指向 B 的对象，它是运行时的真实类型。因此值是从对象 B 打印的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T15:33:47.497

```
A obj = new A();
obj.test() 
```

将返回 1

```
A obj = new B();
obj.test() 
```

将返回 2

```
B obj = new B();
obj.test() 
```

将返回 2

如其他答案所述，这就是多态性的工作方式。

[这篇](https://stackoverflow.com/questions/4605669/what-is-polymorphic-method-in-java)文章可能会让事情变得更清楚

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T15:34:01.327

Java 使用*动态绑定*（或*后期绑定*），所以`B`调用 的方法，而不是`A`。这与*静态绑定*相反。[这里](http://www.dcs.warwick.ac.uk/~ananda/javaNotes/node31.html)有一个很好的例子。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-04T15:35:22.253

您将对象声明为 A，但您的实例是 B。因此，将调用的方法来自 B 类。B 扩展了 A（我们可以说 A 是 B 的父级），如果您将在 B 中注释方法测试然后回想一下方法，在这种情况下，调用的方法将从 A 类测试并返回 1。

# objective-c - 为什么在我的代码之后没有在地图上添加注释？

> ID：12266745
> 
> 赞同：0
> 
> 时间：2012-09-04T15:29:56.177
> 
> 标签：objective-c, ios, xcode, mapkit

```
NSMutableArray* annotations = [[NSMutableArray alloc] init];

//This is the details needed to make a new annotation.
CLLocationCoordinate2D autoCoord1;
autoCoord1.latitude = 37.78616;
autoCoord1.longitude = -122.41018;

MyAnnotation* autoAnnot1 = [[MyAnnotation alloc] init];

autoAnnot1.coordinate = autoCoord1;
autoAnnot1.title = @"auto";
autoAnnot1.subtitle = @"auto";

[mapViewVC addAnnotation:autoAnnot1];

[annotations addObject:autoAnnot1]; 
```

我有这段代码在我的另一个 mapkit 应用程序中工作，但是我似乎无法`autoAnnot1`在给定坐标的地图上看到注释。

当然，代码`[mapViewVC addAnnotation:autoAnnot1];`应该将该注释添加到地图中？

MyAnnotation.h 类如下所示：

```
#import <Foundation/Foundation.h>
#import "MapKit/MapKit.h"

@interface MyAnnotation : NSObject <MKAnnotation> {

    CLLocationCoordinate2D coordinate;
    NSString*              title;
    NSString*              subtitle;
}

@property (nonatomic, assign) CLLocationCoordinate2D    coordinate;
@property (nonatomic, copy)   NSString*                 title;
@property (nonatomic, copy)   NSString*                 subtitle;

@end 
```

**下面是显示断点和输出的图像**

![在此处输入图像描述](../Images/e902bb9d5922a45706cecae3f3881009.png)

![在此处输入图像描述](../Images/e9c3b1ce3624f7e454f3d71c3447d686.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:11:16.817

我猜您向我们展示的代码位于视图控制器的初始化方法中。此时，视图对象还没有被实例化。你的网点都是`nil`。设置视图的代码应该放在`viewDidLoad`方法中，该方法在视图加载并且您的插座已连接后调用。

# sorting - NASM Ubuntu 中的冒泡排序

> ID：12266749
> 
> 赞同：0
> 
> 时间：2012-09-04T15:30:09.240
> 
> 标签：sorting, ubuntu, assembly, nasm, bubble-sort

我被要求在 NASM Ubuntu 中创建一个冒泡排序程序。这是代码：

```
section .data
i           db 0                    ; Value to be incremented
question    db  'Enter a number: '  ; Prompt
questionLen equ $-question
newLine     db 10, 10, 0            ; New blank line
newLineLen  equ $-newLine

section .bss
num resb 5          ; Array of size 5
counter resb 1      ; Value to be incremented
counter2 resb 1     ; Value to be incremented
temp resb 1
temp2 resb 1

section .text
global _start

_start:
mov esi, 0

getInput:
mov eax, 4
mov ebx, 1
mov ecx, question           ; Prints the question
mov edx, questionLen
int 80h

add byte[i], 30h            ; I'll retain this expression, since the program experienced an error
                                ; when this expression is deleted
sub byte[i], 30h            ; Converts the increment value to integer

mov eax, 3
mov ebx, 0
lea ecx, [num + esi]        ; Element of the array
mov edx, 2
int 80h

inc esi
inc byte[i]
cmp byte[i], 5              ; As long as the array hasn't reached the size of 5,
jl getInput                 ; the program continues to ask input from the user

mov esi, 0
mov byte[i], 0
mov edi, 0                  ; Index of the array

bubble_sort:
mov byte[counter], 0
mov byte[counter2], 0

begin_for_1:
    mov al, 0
    mov al, [counter]       ; Acts as the outer for loop
    cmp al, 5
    jg printArray           ; Prints the sorted list when the array size has reached 5
begin_for_2:
    mov edi, [counter2] ; Acts as the inner for loop
    cmp edi, 4
    jg end_for_2
    mov bl, 0               ; Acts as the if statement
    mov cl, 0
    mov bl, [num + edi]
    mov cl, [num + edi + 1]
    mov byte[temp], cl  ; This is the same as if(a[j] > a[j + 1]){...}
    cmp bl, [temp]
    jg bubbleSortSwap
return:
    inc edi                 ; Same as j++
    jmp begin_for_2     ; Goes out of the inner for loop
end_for_2:
    inc byte[counter]       ; Same as i++
    jmp begin_for_1     ; Goes out of the outer for loop

bubbleSortSwap:
mov [num + edi + 1], bl
mov [num + edi], cl     ; The set of statements is the same as swap(&a[j], &a[j + 1]);
jmp return

printArray:
mov eax, 4
mov ebx, 1
mov ecx, [num + esi]        ; Prints one element at a time
mov edx, 1
int 80h

inc esi
inc byte[i]
cmp byte[i], 5
jl printArray               ; As long as the array size hasn't reached 5, printing continues

mov eax, 4
mov ebx, 1
mov ecx, newLine            ; Displays a new blank line after the array
mov edx, newLineLen
int 80h

mov eax, 1                  ; Exits the program
mov ebx, 0
int 80h 
```

但唯一的问题是，它不能打印其余的迭代，因为它只打印第一次迭代，如下所示：

```
Enter a number: 7
Enter a number: 1
Enter a number: 4
Enter a number: 3
Enter a number: 5
17435 
```

我要输出的是数组输入和最终输出，从第一次迭代到最后一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:07:51.793

不……他只是需要整理一些东西！:)

如发布的那样，根本不为我打印任何输出。问题是您将“[contents]”放入 ecx - 您想要地址 - 您在输入例程中正确执行。

您可以使用更少的变量来解决问题 - 使用 esi 和/或 edi 作为“计数”和“索引”。如果您使用变量，请确保变量的大小与您将其移入/移出的寄存器的大小相匹配！（“mov edi，[counter2]”没有做你想做的事）勇气！如果它很容易，每个人都会这样做。

最好的，弗兰克

# spring - 我应该如何处理 Spring 的 JavaConfig 中的已检查异常？

> ID：12266751
> 
> 赞同：7
> 
> 时间：2012-09-04T15:30:15.977
> 
> 标签：spring

我正在将一些现有的 xml 配置转移到 Spring 的 Java 配置中。在此过程中，我遇到了一些传输的 Java 代码，它们会抛出一个已检查的`Exception`.

```
@Bean
public PoolDataSource myDataSource()
{
    final PoolDataSource dataSource = PoolDataSourceFactory.getPoolDataSource();
    dataSource.setConnectionPoolName("myDataSourcePoolName"); // throws SQLException
    return dataSource;
} 
```

我想知道我应该如何处理它，以及 Spring 开发人员是否有任何*“最佳实践”*。

`throws`我应该用一个子句标记方法（这将传播到任何`@Import`链上）还是应该用`try`-`catch`块处理它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T18:09:07.830

作为一般规则，您应该在方法的`throws`子句中简单地声明任何检查的异常`@Bean`。

我不确定您所指的“传播任何`@Import`链条”是什么；该`throws`子句当然需要任何相关`@Bean`方法来依次声明`throws`包含该异常的子句，但是当涉及到容器引导时的实际异常传播时，Spring 容器将处理异常，其处理方式与抛出异常的方式相同处理 Spring XML 中配置的 bean。`@Import`在这里应该是一个正交的问题。

# azure - Azure 备份区域：网站数据库

> ID：12266752
> 
> 赞同：0
> 
> 时间：2012-09-04T15:30:17.773
> 
> 标签：azure

我正在为我在西班牙的客户部署一个电子商务网站。因此，我的第一个想法是将其部署到 Azure 西北地区。

问题是，即使 SLA 达到 99.99%，整个 Azure 数据中心也可能发生故障。（与几个月前严重中断数小时的 Amazon S3 服务相同）。

我的问题是：如何防止这个最终的问题？我知道我可以更改我的 DNS C-Name 来更改端点网站，但是传播 DNS 更改需要很长时间，而且我必须拥有数据库的最新备份才能将其还原到另一台服务器. 我知道我也可以使用流量管理器，但我仍然有数据库的问题....

解决这个问题的最佳方法是什么？此外，我对将这一点考虑到中型公司是否合理有一些疑问。有没有人这样做，并且对解决方案感到满意？8·)

提前感谢您的帮助，路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:38:39.637

[SQL 数据同步](http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx)是在 Azure SQL 数据库之间同步数据的好方法。它适用于数据中心和区域。使用 SQL 数据同步，您可以在另一个数据中心创建第二个数据库并在两个数据库之间同步数据。您可能会在一段时间内遭受损失，但目前自动同步之间的时间不能低于五分钟。

# javascript - ExtJS 4：编写带有模型关联的嵌套 XML

> ID：12266753
> 
> 赞同：3
> 
> 时间：2012-09-04T15:30:25.563
> 
> 标签：javascript, xml, extjs, model, extjs4

我正在尝试通过模型关联编写嵌套的 XML 数据，但我无法继续。

首先是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<card>
    <generalData>
        <name>A card</name>
        <description>That's a description</description>
    </generalData>
    <specificData>
        <number>100</number>
        <type>int</type>
    </specificData>
    <otherStuff>
        <note>Those notes...</note>
    </otherStuff>
</card> 
```

这是模型的代码：

```
Ext.define ('generalData', {
    extend: 'Ext.data.Model' ,
    fields: ['name', 'description']
});

Ext.define ('specificData', {
    extend: 'Ext.data.Model' ,
    fields: ['number', 'type']
});

Ext.define ('otherStuff', {
    extend: 'Ext.data.Model' ,
    fields: ['note']
});

Ext.define ('Card', {
    extend: 'Ext.data.Model' ,

    requires: ['generalData', 'specificData', 'otherStuff'] ,

    hasOne: [{
        name: 'generalData' ,
        model: 'generalData' ,
        getterName: 'getGeneralData' ,
        associationKey: 'generalData' ,
        reader: {
            type: 'xml' ,
            root: 'generalData' ,
            record: 'generalData'
        } ,
        writer: {
            type: 'xml' ,
            documentRoot: 'generalData' ,
            record: 'generalData'
        }
    } , {
        name: 'specificData' ,
        model: 'specificData' ,
        getterName: 'getSpecificData' ,
        associationKey: 'specificData' ,
        reader: {
            type: 'xml' ,
            root: 'specificData' ,
            record: 'specificData'
        } ,
        writer: {
            type: 'xml' ,
            documentRoot: 'specificData' ,
            record: 'specificData'
        }
    } , {
        name: 'otherStuff' ,
        model: 'otherStuff' ,
        getterName: 'getOtherStuff' ,
        associationKey: 'otherStuff' ,
        reader: {
            type: 'xml' ,
            root: 'otherStuff' ,
            record: 'otherStuff'
        } ,
        writer: {
            type: 'xml' ,
            documentRoot: 'otherStuff' ,
            record: 'otherStuff'
        }
    }] ,

    proxy: {
        type: 'ajax' ,
        url: '/card' ,
        reader: {
            type: 'xml' ,
            record: 'card' ,
            root: 'card'
        } ,
        writer: {
            type: 'xml' ,
            documentRoot: 'card' ,
            record: 'card' ,
            header: '<?xml version="1.0" encoding="utf-8"?>'
        }
    }
}); 
```

如您所见，每个模型都有他的读者和作者（真的需要最后一个吗？）。

在这里，我检索数据并尝试将其发送回服务器。

```
Card.load (1, {
    success: function (card) {
        console.log (card);
        var gd = card.getGeneralData (function (data) {
            console.log (data.get ('name'));
            data.set ('name', 'Another card');
        });

        card.save ();
    }
}); 
```

当调用“成功”函数时，我已经获得了我请求的所有 XML，并且在控制台上写入了“一张卡片”。然后，我尝试在“另一张卡”中更改卡的名称，并使用*card.save ()*将数据发回。在这一点上，我遇到了三种问题：

1）请求paylod（发送到服务器的数据）不是我在上一个请求中得到的XML。实际上，它具有以下结构：

```
<?xml version="1.0" encoding="utf-8"?>
<card>
    <card>
        <id></id>
    </card>
</card> 
```

由于作者，我得到了这个结构：两个相等的元素和一个新元素（'id'）是空的，我没有在任何地方指定。所以，第一个问题是：**如何将单个 documentRoot 或记录元素添加到我要发送的数据中？**

2）第二点是：**我的数据在哪里？为什么发送的 XML 是空的？我在模型保存过程中做得对吗？**

3）最后，第三个问题：请求的*Content-Type*是**text/xml**。那么，**如何将其更改为 application/xml？**

模型关联可以阅读，但我无法真正理解它们如何与写作一起工作。 **我想要的只是读取 XML 数据，修改一些字段，然后再次发送回来，一切都是 XML 格式的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:06:51.977

我在 Sencha 论坛上问过，[**这就是答案**](http://www.sencha.com/forum/showthread.php?242157-Write-nested-XML)：

> 编写器目前不支持嵌套。
> 
> 斯科特。

所以，到目前为止，这是不可能的；）

# java - Eclipse：从java类路径中的文件夹添加所有jar

> ID：12266761
> 
> 赞同：28
> 
> 时间：2012-09-04T15:30:53.187
> 
> 标签：java, eclipse, classpath

有没有办法使用 Eclipse 将所有 jar 文件包含在类路径中的目录中？

可以通过以下命令使用命令行来完成：

```
java -cp "lib/*" my.package.Main 
```

但是如何从 Eclipse 中完成呢？

**编辑：**我将`.classpath`项目中的条目编辑为：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/> 
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry kind="lib" path="F:/Program Files/Java/log4j/apache-log4j-2.0-alpha2-bin/*"/>
    <classpathentry kind="output" path="classes"/>
</classpath> 
```

这`F:/Program Files/Java/log4j/apache-log4j-2.0-alpha2-bin/`是文件所在的`jar`文件夹。但它没有用。

**更新：**似乎没有直接的方法可以做到这一点。并且可能最简单的解决方案是创建用户库。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-04T15:45:03.237

不要使用项目外部的文件夹，而是将所有必要的 JAR 复制到`lib/`项目内部的文件夹中。

现在您可以选择该文件夹中的所有 JAR，右键单击 -> 构建路径 -> 添加到构建路径。

或者，您可以定义一个包含所有 JAR 的“用户库”并将该单个项目添加到项目的构建路径中。

但 IMO 最好的解决方案是为此使用 Maven。获取 Eclipse 的 M2E 插件并将您的项目转换为 Maven 项目。现在您可以使用“添加依赖项”将数百万其他项目（包括*他们*需要的一切）添加到您的项目中。Maven 将为您下载和管理依赖项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T15:50:46.930

不是没有插件。我不知道为什么这个功能不是 eclipse 的基本部分。

[https://github.com/benjchristensen/SimpleDirectoryContainer_EclipsePlugin](https://github.com/benjchristensen/SimpleDirectoryContainer_EclipsePlugin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-08T14:03:31.923

在eclipse（windows）中，右键单击要添加到类路径中的libs文件夹（包含所有jar文件）->构建路径->配置构建路径->单击类路径->添加类文件夹->选择java文件的文件夹......这样你就可以在类路径中使用多个jar文件

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-04T17:22:32.807

右键单击项目 -> 属性.. -> Java 构建路径 -> 库 -> 添加类文件夹...

# sql - SQL vb.net 搜索词计数或排名

> ID：12266764
> 
> 赞同：0
> 
> 时间：2012-09-04T15:31:05.037
> 
> 标签：sql, vb.net

我希望能够在表格中搜索短语或关键字/术语的使用，并让查询返回结果，并计算该术语在每一行中使用的次数，但不一定是列。我修改了我的查询，尝试从 manager studio 中查看错误在哪里。我在“，”附近遇到错误。但无法确定原因。谢谢您的帮助。

```
SELECT (KEY_TBL.[KEY], FT_TBL.title, FT_TBL.url, KEY_TBL.rank, FT_TBL.html) 
FROM content AS FT_TBL INNER JOIN FREETEXTABLE (content, html, 'income tax', 25) 
AS KEY_TBL ON FT_TBL.id = KEY_TBL.[KEY] ORDER BY KEY_TBL.Rank DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:21:06.170

您应该查看 FREETEXTTABLE 函数，而不是 FREETEXT - 这将返回匹配相关性的排名

[http://msdn.microsoft.com/en-us/library/cc879245](http://msdn.microsoft.com/en-us/library/cc879245)

尝试这个

```
SELECT 
    KEY_TBL.[KEY], FT_TBL.title, FT_TBL.url, KEY_TBL.rank, FT_TBL.html
FROM content AS FT_TBL 
INNER JOIN FREETEXTTABLE (content, html, 'income tax', 25)  AS KEY_TBL 
    ON FT_TBL.id = KEY_TBL.[KEY] 
ORDER BY KEY_TBL.Rank DESC 
```

# django - Django：追踪 DeprecationWarning 的原因

> ID：12266765
> 
> 赞同：22
> 
> 时间：2012-09-04T15:31:05.603
> 
> 标签：django, warnings, deprecated

我已经升级到 Django 1.4，现在当我运行我的开发服务器时，我收到以下警告：

> ```
> /home/flc/venvs/myprj/lib/python2.6/site-packages/django/views/generic/simple.py:8: 
> ```
> 
> DeprecationWarning：基于函数的通用视图已被弃用；改用基于类的视图。弃用警告

我已经找到了造成这种情况的大部分原因，并通过进行以下更改来修复它们：

django.views.generic.simple.direct_to_template => django.views.generic.base.TemplateView django.views.generic.simple.redirect_to => django.views.generic.base.RedirectView

ETC

但是，我仍然收到警告，无法弄清楚我错过了什么。如何在我的代码中获取导致 DeprecationWarning 的实际模块和行？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T16:21:50.493

您可以使用[警告](http://docs.python.org/library/warnings.html#warnings-warning-control)模块为`DeprecationWarning`.

暂时将以下代码段添加到项目的顶部`urls.py`：

```
import warnings
warnings.simplefilter('error', DeprecationWarning) 
```

现在`DeprecationWarning`将引发一个错误，因此如果`debug=True`您将获得熟悉的黄色 Django 错误页面以及完整的回溯。

找到弃用警告的来源后，请记住删除该片段！请注意，导致弃用警告的可能是第三方应用程序，而不是您自己的代码。

如果您不熟悉警告模块，您可能会发现[本周 Python 模块页面](http://www.doughellmann.com/PyMOTW/warnings/)比 Python 文档更容易介绍。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-17T16:27:29.200

You can also do this on the command line so you don't need to modify your code. For example:

```
python -We manage.py runserver --traceback 
```

The official doc is [here](http://docs.python.org/2/using/cmdline.html#cmdoption-W). You can use abbreviations and the `e` in `-We` stands for convert warnings to `error`.

# installation - Chef-solo 安装 - gecode 编译错误

> ID：12266767
> 
> 赞同：1
> 
> 时间：2012-09-04T15:31:06.147
> 
> 标签：installation, centos, chef-infra, yum

我试图在 CentOS 6.3 x64 上安装 chef-solo，当我运行时：

```
sudo chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz 
```

我得到这个输出：

```
g++ -I. -ffast-math -fno-strict-aliasing -O3 -fvisibility=hidden -ggdb -pipe -Wall -Wextra -fPIC -pthread -DNDEBUG   \
    -c -o gecode/int/extensional.o  gecode/int/extensional.cpp
make[1]: Leaving directory `/tmp/chef-solo/gecode-3.5.0'
STDERR: {standard input}: Assembler messages:
{standard input}:13822: Warning: end of file not at end of a line; newline inserted
{standard input}:14946: Error: unknown pseudo-op: `.'
{standard input}:14946: Error: open CFI at the end of file; missing .cfi_endproc directive
g++: Internal error: Killed (program cc1plus)
Please submit a full bug report.
See <http://bugzilla.redhat.com/bugzilla> for instructions.
make[1]: *** [gecode/int/extensional.o] Error 1
make: *** [compilelib] Error 2
---- End output of "bash"  "/tmp/chef-script20120904-19809-1ofhwoq" ----
Ran "bash"  "/tmp/chef-script20120904-19809-1ofhwoq" returned 2 
```

我可以毫无问题地从 RBEL6 存储库安装 gecode，但食谱会尝试从源代码安装。我在 github 上找到[了这个](https://github.com/opscode-cookbooks/gecode/pull/1)pull request，它试图从 RBEL 存储库安装，但我收到一个错误，提示找不到存储库元数据。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:04:12.473

因为我一直在寻找这个问题的答案，所以我的发现相当......不足为奇。

我只是内存不足。我必须在具有相同操作系统的另一个系统上编译我的文件（通过 /tmp/chef-solo/gecode-3.5.0 复制到盒子并运行 make）并将生成的文件夹同步回运行*make install*

找到库后，将跳过编译步骤，您应该可以继续。

# javascript - HTML5 应用数据库同步

> ID：12266770
> 
> 赞同：7
> 
> 时间：2012-09-04T15:31:16.780
> 
> 标签：javascript, sql, database, html, sync

我目前正在从事一个涉及将数据存储在 HTML5 SQL-Lite 数据库中的项目。目前，我的架构如下（4 个表）：

```
TransData:
-----------------------------------------------------------
|   TID   | UserName | TransColor | ... |  Date  |  Note  |
-----------------------------------------------------------
|    6    | Brendan  |      Red   | ... |        |        |
-----------------------------------------------------------
|    7    | Brendan  |      Red   | ... |        |     1  |
-----------------------------------------------------------

FullData:
-----------------------------------------------------------
|   TID   | UserName | TransColor | ... |  Date  |  Note  |
-----------------------------------------------------------
|    1    | Brendan  |      Red   | ... |        |  Start |
-----------------------------------------------------------
|    ...  | Brendan  |      Red   | ... |        |        |
-----------------------------------------------------------
|   40    | Brendan  |      Red   | ... |        |  End   |
-----------------------------------------------------------

SalamanderData:
----------------------------------------------------
|   SID   | SalamanderName | Length | ... |  TID   |
----------------------------------------------------
|    1    | Northern-Slimy |   16   | ... |    6   |
----------------------------------------------------
|    2    |   Two-Lined    |   26   | ... |    6   |
----------------------------------------------------  
|    3    |   Two-Lined    |   12   | ... |    7   |
----------------------------------------------------  

SalamanderData:
----------------------------------------------------
|   SID   | SalamanderName | Length | ... |  TID   |
----------------------------------------------------
|    1    | Northern-Slimy |   16   | ... |    6   |       
----------------------------------------------------
|    2    |   Two-Lined    |   26   | ... |    6   |   
---------------------------------------------------- 
|    3    |   Two-Lined    |   12   | ... |    7   |
---------------------------------------------------- 
```

注意：TransData 中的“Note”列用于指向 FullData 字段中集合的开始数据点。

我的应用程序和服务器之间的数据库不应该同步。我只是想将所有这些表转储到服务器上的数据库中（我的意思是转储，更新对其他表的引用，然后插入服务器数据库）。

我打算使用`MAX(TID-Server) + TID-App = new TID-Server`，并将更新级联到表格中。

你会怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:08:56.487

根据[Dan Pichelman](https://stackoverflow.com/users/427192/dan-pichelman)的评论，问题在于客户端将记录插入本地数据库，为此，必须确定它们的主键。但是，鉴于所有不同的客户端都在做同样的事情，新的 PK 会在它们到达服务器时发生冲突。

这是一个常见问题，即系统物理上断开连接（至少有时如此），或者不能存在单点故障，例如在共享序列生成器中。

一些常见的解决方案是：

**[图形用户界面](http://en.wikipedia.org/wiki/Globally_unique_identifier)**

这里的 PK 是一个 128 位（或更大）的随机数。任何两个PK相同的机会都*非常*小。但为了进一步减少冲突的变化，GUID 算法包括使用唯一机器标识符（网络 MAC）和时间播种。在同一台机器上生成的两个 GUID 永远不会发生冲突，在具有不同 MAC 的机器上生成的 GUID 也不会发生冲突。大多数机器和语言都有生成 GUID 的本机函数，但 JavaScript 没有。看：

*   [在 JavaScript 中创建 GUID/UUID？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523)
*   [在 JavaScript 中生成 UUID 时发生冲突？](https://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript)

**分区命名方案**

在这个方案中，PK 又是一个很大的数字（实际上是位域），并且您将其划分为分层的方式。一个很好的例子是国际电话系统（至少在便携式号码之前）。这里电话号码分为：

*   国家代码：例如美国 - 1
*   区号：例如 Sunnyvale - 615
*   用户编号，由交易所控制。

在您的情况下，您可以按以下方式对数字进行分区：

*   用户登录（例如每个用户唯一的号码）
*   会话 ID（例如，每个用户每次登录的唯一编号，以区分同一用户但在不同浏览器/计算机上的不同会话）
*   序列号

将这三者结合起来，您将有一个保证独特的 PK。

**PK“许可证”服务器**

前两个建议的优点是它们完全脱节。如果您有一个连接的客户端，您*可以*有一个 Web 服务，在客户端请求它们时提供 PK。

为了提高效率，它可能会返回一批，比如 100 个数字。这甚至可能在用户登录时返回。

客户可以全部使用它们并要求更多。可能存在客户端忘记状态并在全局 PK 序列中留下“漏洞”的情况。这几乎肯定不会是一个问题。

**一些注意事项**

有时您可能会出于表排序目的而喜欢顺序 PK。在这种情况下，您需要按客户订购还是按创建时间订购？如果其中任何一个很重要，您可能会对分区命名方案给予更高的评价。视情况将客户端或时间作为第*一个*分区。或者，向表中添加更多列。

如果您不想要分区命名方案的固定结构，GUID 会很好用。

如果您想要中央协调，请使用 PK 许可证服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:35:39.243

我不知道一种美观的方式来做到这一点，但我通过编写存储过程“解决”了它：

第一个表很容易 - 根据需要更新或插入。如果进行插入，则获取新插入记录的主键，然后相应地处理依赖表（这通常意味着使用新的主键插入数据）。当你走过关系时，根据需要重复。4张桌子应该没问题，但我不想做40张。

就我而言，它很混乱，并且涉及到其中包含 oldPK 和 newPK 的临时查找表。

这也是一段相当冗长乏味的代码，唯一的可取之处是它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:23:41.030

这有点违背你的要求，所以如果这完全不符合要求，请发表评论，我会删除它。但是您没有说明为什么服务器/客户端无法在主键方面同步的任何特定原因（我认为这确实是这里的问题）。

我还假设（根据您的数据和您的问题）我们正在谈论一个带有用户创建内容（如日志）的 webapp，这些内容偶尔会上传到服务器。

所以只是为了运动，你有没有考虑过使用由多个字段构建的主键？这样您就可以在本地数据库中进行自动增量，将数据转储到服务器，并且不会与其他用户数据发生冲突。SalamanderData 表的示例如下：

```
CREATE TABLE SalamanderData
(
    SID int NOT NULL,
    SalamanderName varchar(255),
    Length int,
    ... ...,
    TID int NOT NULL,
    CONSTRAINT pk_SDataEntry PRIMARY KEY (SID,TID)
) 
```

然后它将从 SID 和 TID 创建一个 PK。

**阅读我的帖子并检查其他答案，我意识到这是安德鲁的建议，所以即使这对你有帮助，你也应该真正接受他的回答**

*保留答案以可能澄清解决方案并提供代码示例*

# jquery - 尝试 POST 到 SOAP 端点时，jQuery Post 返回错误

> ID：12266783
> 
> 赞同：1
> 
> 时间：2012-09-04T15:31:53.000
> 
> 标签：jquery, servicenow

我正在尝试从 HTML 页面发布到 Service Now URL。我做不到。我会要求有人在这方面帮助我。

```
<html>
<body>
<button onclick="createRecord()">Create Soap</button>

<script src="jquery-1.6.4.js"></script>
<script language="javascript">
function createRecordCallback (xmlHttpRequest, status) {

  var sys_id = $(xmlHttpRequest.responseXML).find('sys_id').text();
  var tex = $(xmlHttpRequest.responseXML).text();
  if (status == "success") {
     var sys_id = $(xmlHttpRequest.responseXML).find('sys_id').text();
     alert(sys_id);
  } else {
     alert('error page'+sys_id+'is the sys id');
  }
}
function  createRecord() {
   var sel = '';
   var desc_field = 'comments';
     var instance = 'abc.service-now.com';
     var table = 'incident';
     var soapMessage = '<?xml version="1.0" encoding="UTF-8"?>';

     soapMessage += '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:inc="http://www.service-now.com/incident">';
     soapMessage += '<soapenv:Header/><soapenv:Body><inc:insert>';
     soapMessage += '<short_description>' + 'Incident Created' + '</short_description>';

     soapMessage += '</inc:insert></soapenv:Body></soapenv:Envelope>';

     $.ajax({
       url: "https://abc.service-now.com/incident.do?SOAP",
       type: "POST",
       dataType: "xml",
       username: "admin",
       password:"admin",
       data: soapMessage,
       complete: createRecordCallback,
       contentType: "text/xml; charset=\"utf-8\""

   });
   alert(soapMessage);
}
</script>
</body>

</html> 
```

我发布到 SOAP 端点[https://abc.service-now.com/incident.do?SOAP](https://abc.service-now.com/incident.do?SOAP)。我正在尝试使用该 WebService 的插入方法。

请注意，一个非常相似的代码正在同一端点的 chrome 扩展中工作。

谢谢！

# java - 嵌套循环反转计数器位置

> ID：12266784
> 
> 赞同：0
> 
> 时间：2012-09-04T15:31:54.433
> 
> 标签：java

嘿伙计们，我刚刚学会了如何做嵌套循环。这是我所做的。

```
public class TEst_1 {

public static void main(String[] args) {
    final int max = 10;

    for (int row = 1; row <= max; row++) {
        for (int col = 1; col <= row; col++)
            System.out.print(col);

        System.out.println();
    }

} 
```

}

我打印了“col”，让每一行都数到 10，我认为这很甜蜜！

```
1
12
123
1234
12345
123456
1234567
12345678
123456789
12345678910 
```

不过，我有一个问题，我将如何扭转数字？我的意思是从右边数列。

```
1
21
321
4321
54321
654321
7654321
87654321
987654321
10987654321 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:33:28.533

您可以在内部循环中反转计数：

```
for (int col = row; col > 0; col--) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:33:40.203

从最高数字开始，然后递减，直到达到最低数字。

```
for (int col = row; col >= 1; col--) 
```

# seo - Google 丰富片段测试工具“此页面不包含作者身份或丰富片段标记”错误

> ID：12266787
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:00.963
> 
> 标签：seo

我正在尝试使用谷歌片段测试工具测试下面的片段，但我得到的只是“这个页面不包含作者身份或丰富的片段标记”，它变得非常烦人任何想法可能是什么问题？

```
<div itemscope itemtype="http://data-vocabulary.org/Organization">
<span itemprop="name">Linas</span>
Located at<span itemprop="address" itemscope itemtype="http://data-vocabulary.org/Address">
<span itemprop="street-address">Plaza Hotel</span>,
<span itemprop="region">Hamra</span>,
<span itemprop="locality">Beirut</span>,
<span itemprop="country-name">Lebanon</span>,
</span>Phone: <span itemprop="tel">9611751244</span>.
<a href="http://www.linaslb.com" itemprop="url">http://www.linaslb.com</a>.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:58:22.680

您可能想尝试使用**schema.org**作为您的 itemtype 源，而不是 data-vocabulary.org。我将以下内容粘贴到[http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)中，它似乎有效。

```
<div itemscope itemtype="http://schema.org/Organization">
<span itemprop="name">Linas</span>
Located at<span itemprop="address" itemscope itemtype="http://schema.org/Address">
<span itemprop="street-address">Plaza Hotel</span>,
<span itemprop="region">Hamra</span>,
<span itemprop="locality">Beirut</span>,
<span itemprop="country-name">Lebanon</span>,
</span>Phone: <span itemprop="tel">9611751244</span>.
<a href="http://www.linaslb.com" itemprop="url">http://www.linaslb.com</a>.
</div> 
```

# css - 在固定高度的空间内垂直均匀分布图像

> ID：12266788
> 
> 赞同：6
> 
> 时间：2012-09-04T15:32:04.650
> 
> 标签：css

我有 3 张图像在固定高度 div 中垂直对齐。即使添加或删除图像，如何确保它们之间的顶部和底部填充仍然存在。

假设 Div 高度为 100px，图像高度为 20px。所以 3 张 20px 的图像总和为 60px。剩余的 40px 应该作为填充均匀分布在图像之间。

同样，当添加另一个图像时，剩余的 20px 应该是所有图像之间的总填充。

属性 : vertical-align: middle 在这里不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T15:33:47.937

你想要：

1.  将 div 设置`display:table`为固定高度，
2.  用and包裹每个`<img>`元素`display:table-row``display:table-cell`
3.  将图像设置为`display:block`
4.  将表格单元格元素设置为`vertical-align:middle`
5.  将第一行和最后一行的高度设置为与图像本身一样高

这将导致空间在垂直方向上均匀分布。

### 演示：http: [//jsfiddle.net/X2URZ/2/](http://jsfiddle.net/X2URZ/2/)

代码：

```
<ul id="img-list">
  <li><span><img src="http://phrogz.net/tmp/gkhead.jpg"></span></li>
  <li><span><img src="http://phrogz.net/tmp/gkhead.jpg"></span></li>
  <li><span><img src="http://phrogz.net/tmp/gkhead.jpg"></span></li>
</ul>​ 
```

```
#img-list { display:table; height:100px }
#img-list img { height:20px; display:block }
#img-list li { display:table-row }
#img-list li span { display:table-cell; vertical-align:middle; background:red }
#img-list li:first-child,
#img-list li:last-child { height:20px }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T04:28:18.463

我知道下次我搜索它时一定会再次偶然发现它。留下这个作为我自己的参考。不同之处在于元素本身不必具有固定的高度：

[http://codepen.io/anon/pen/ojBPaq?editors=110](http://codepen.io/anon/pen/ojBPaq?editors=110)

HTML

```
<ul>
  <li><div class="tile-wrap one"><div class="tile">wefwfwefww efwefwfwfewfwef wefwfwf wefwfe wefwf wefwfwfwfwf wef wefwfe</div></div></li>
  <li><div class="tile-wrap two"><div class="tile"></div></div></li>
  <li><div class="tile-wrap three"><div class="tile"></div></div></li>
</ul> 
```

CSS

```
* { box-sizing: border-box; }

ul {
  list-style: none;
  margin: 0;
  padding: 0;
  background: grey;
  width: 500px;
  height: 400px;
  display: table;
}

li {
  display: table-row;
  background: aqua;
  vertical-align: bottom;
}

.tile-wrap {
  display: table-cell;
  vertical-align: middle;
}

.one {
  vertical-align: top;
}

.two {
  vertical-align: middle;
}

.three {
  vertical-align: bottom;
}

.tile-wrap .tile {
  width: 100px;
  min-height: 100px;
  background: white;
  border: 1px solid blue;

} 
```

# php - 使用 PHP 在 mysql 数据库中插入多行

> ID：12266790
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:05.380
> 
> 标签：php, mysql, html

我正在尝试将数据插入表中，并且数据是从另一个表中提取的。目前我的代码如下所示：

```
$result3 = mysql_query('SELECT order_no 
                    FROM orders 
                    WHERE ord_date = "' . ($_POST["ord_date"]) . '"');

while($row=mysql_fetch_array($result3)){ $order=$row['order_no'];}

$result4 = mysql_query('SELECT door_product_no 
                    FROM estimateDescribesDoorProduct 
                    WHERE estimate_no = "' . ($_GET["estimate_no"]) . '"');

while($row=mysql_fetch_array($result4)){ $door=$row['door_product_no'];}

$result5 = mysql_query('SELECT quantity 
                    FROM estimateDescribesDoorProduct 
                    WHERE estimate_no = "' . ($_GET["estimate_no"]) . '"');

while($row=mysql_fetch_array($result5)){ $dquantity=$row['quantity'];}

$sql2="INSERT INTO orderConsistsOfDoor (order_no, door_product_no, product_quantity)

VALUES ('$order','$door','$dquantity')"; 
```

多亏了这个网站上的一些建议，我昨天使用了这种方法。我今天的问题是我需要插入多行。除了第一列 (order_no/estimate_no) 之外，表“orderConsistsOfDoor”和“estimateDescribesDoorProduct”是相同的。基本上，如果估价（或订单）由例如 3 个产品组成，那么表中将有 3 行包含该估价（但 product_no 和数量不同）。

我认为我的代码只会在 orderConsistsOfDoor 中插入一行，但我需要它来插入estimate_no 为 ($_GET["estimate_no"]) 的*每一行。*我认为这可以用 foreach 或其他东西来完成，但我从未使用过它，也不知道它是如何工作的。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:38:26.113

要使用一个查询插入多条记录，您可以执行以下操作：

```
INSERT INTO `table_name` (`foo`, `bar`) VALUES (1, 2), (3, 4), (5, 6); 
```

见[`INSERT`语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

不过，您应该使用图书馆，现在是 2012 年！

# asp.net-mvc-3 - 不显眼的收集验证

> ID：12266793
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:08.653
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我的模型包含一个集合：

```
public ICollection<int> ChildAges { get; set; } 
```

这是一个可以添加的动态年龄列表，这一切都通过 JQuery 控制。

给我

```
<select name="ChildAges">...</select>
<select name="ChildAges">...</select>
<select name="ChildAges">...</select>
etc... 
```

如果我添加标准`Required`属性，如果设置了集合中的任何一个值，则验证将返回 true。

如何验证`ChildAges`表单中的所有内容都已设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:32:08.653

我创建了一个新的自定义`IClientValidatable`属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
    public class MultipleRequiredValuesAttribute : RequiredAttribute, IClientValidatable
    {
        #region IClientValidatable Members

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            var clientValidationRule = new ModelClientValidationRule()
            {
                ErrorMessage = base.ErrorMessage,
                ValidationType = "multiplerequiredvalues"
            };

            return new[] { clientValidationRule };
        }

        #endregion
    } 
```

并将其应用于我的模型：

```
[DisplayName("Ages(s)")]
        [MultipleRequiredValues(ErrorMessage = "You must provide ages for all children in all rooms")]
        public ICollection<int> ChildAges { get; set; } 
```

然后我可以添加 JQuery 端：

```
(function ($) {

    $.validator.addMethod('multiplerequiredvalues', function (value, element) {
        if ($(element).is(':visible')) {
            var returnVal = true;
            var name = $(element).attr('name');
            var elements;
            if ($(element).is('input')) {
                elements= $('input[name='+name+']');
            }
            else
            {
                elements= $('select[name='+name+']');
            }
            elements.each(function() {
                if ($(this).is(':visible'))
                {
                    returnVal = $(this).val() != "" && $(this).val() != null;
                }
            });
            return returnVal;
        }
        else {
            return true;
        }
    });
    $.validator.unobtrusive.adapters.addBool("multiplerequiredvalues");
} (jQuery)); 
```

**请注意**，如果元素不可见，这也会返回 true

# javascript - Html 表格单元格大小（或适合其内容的单元格高度）

> ID：12266795
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:18.607
> 
> 标签：javascript, jquery, html, asp.net, html-table

我想在列表视图中放置 3 个垂直选项。我使用表格来完成此操作，但只有 2 个选项可见，因此我需要压缩单元格高度。您可以在图片中看到每个单元格中都有一个空闲空间。

![在此处输入图像描述](../Images/aa498c068c741f96aaa07e2afa986be0.png)

我尝试了一些 td 选项，例如高度，但没有成功。我可以使用其他一些 html 控件（可能是列表）来获得我想要的东西吗？是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:35:32.893

由于您使用表格来创建垂直选项，因此压缩高度的最佳方法（当然，除了使用较小的字体）是将单元格填充和单元格间距设置为较小的值：

```
<table cellpadding="1" cellspacing="1">
<tr> 
   etc... 
```

# html - IE9 问题：div 中的文本与底部对齐

> ID：12266796
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:21.377
> 
> 标签：html, css, internet-explorer

我有由 . 分隔的锚点`&nbsp;|&nbsp;`。这一切都包裹在一个`div.linksWrapper`. 在 IE9 中`&nbsp;|&nbsp;`，作为 的直接后代的任何文本（在本例中为 ）都会`div.linksWrapper`从其他元素的中心偏移。在所有其他浏览器`&nbsp;|&nbsp;`中，呈现与锚点对齐。

见下图...

![在此处输入图像描述](../Images/5851e6f6f6b0ec29f4bc3090d57825d4.png)

html

```
<div class="instagramViewerWrapper">
    <div class="linksWrapper">
        <a class="active" href="#">VIEW ALL</a>&nbsp;|&nbsp;
        <a id="40020931" href="#" class="">KATHERINE</a>&nbsp;|&nbsp;
        <a id="40027696" href="#" class="">MELISSA</a>&nbsp;|&nbsp;
        <a id="42768724" href="#">MICHELE</a>&nbsp;|&nbsp;
        <a id="42764826" href="#">CAILEE</a>&nbsp;|&nbsp;
        <a id="42767242" href="#">CHRISTIE</a>&nbsp;|&nbsp;
        <a id="42763829" href="#">JAMIE</a></div>
    <div class="grid" id="instagramViewer">...</div>
</div> 
```

css

```
html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, code, em, img, small, strike, strong, sub, sup, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
    background: none repeat scroll 0 0 transparent;
    border: 0 none;
    font-size: 100%;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}
.instagramViewerWrapper {
    color: #888888;
    margin-top: 30px;
    min-height: 1040px;
}
.instagramViewerWrapper .linksWrapper {
    position: relative;
    text-align: center;
}
.instagramViewerWrapper .linksWrapper a {
    color: #888888;
    display: inline-block;
    padding-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:38:46.587

`&nbsp;|&nbsp;`您可以这样做，而不是使用一些非语义分隔符，例如：

```
.instagramViewerWrapper .linksWrapper a {
    color: #888888;
    display: inline-block;
    padding: 0 5px 5px;
    border-right: 1px solid #ccc;
} 
```

这将为您的链接绘制一个边框，因此它们将与文本对齐，您的代码也将更加清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:51:17.350

这仅仅是由于您正在应用`padding-bottom: 5px;`锚点 ( `.instagramViewerWrapper .linksWrapper a`) 造成的。显然其他浏览器会忽略它，但 IE 不会。

要么移动规则声明以包含所有`.instagramViewerWrapper .linksWrapper`，要么完全删除它。

希望有帮助！

# php - 如何使用“get”将变量从 HTML 表单和 DropList 传递到 PHP 文件

> ID：12266798
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:30.553
> 
> 标签：php, html

我想更改此代码...

```
<form action="search.php" method="get" name="form1" id="form1">
<select name="name">
  <option value="category">CATEGORY</option>
  <option value="product">PRODUCT</option>
</select>
<input name="value" type="text" id="catprod" size="20" /> 
```

最后我想收到一个类型的链接......

[http://www.mysite.com/search.php?product=car](http://www.mysite.com/search.php?product=car)

或者

[http://www.mysite.com/search.php?category=auto](http://www.mysite.com/search.php?category=auto)

取决于下拉列表中的哪个项目将选择客户。“汽车”和“汽车”是客户的搜索请求，他们将输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:48:27.907

好吧，有两种方法可以做到这一点。

第一个是在 de select 更改时将文本字段的输入名称更改为正确的名称（类别或产品）。所以你做一个

```
onChange="document.getElementById('catprod').name = this.value;" 
```

请注意，在加载时您已经为输入提供了正确的名称。在正常情况下，这将是“类别”（因为它被选为第一个）。

另一种选择是使 2 个输入字段隐藏 1 个。然后显示用户选择的字段。（也有一个 onchange，但随后使用隐藏和显示）。

无论如何，这两者都不是解决问题的最佳方法。最好的问题就是在您的 PHP 脚本中解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:51:17.427

我会使用以下内容：

```
<html>
    <head>
        <script>
            function redirect() {
                window.location.href = 'http://www.mysite.com/search.php?'+document.form1.key.value+'='+document.form1.val.value;
            }
        </script>
    </head>
    <form name="form1" onsubmit="redirect(); return false;">
        <select name="key">
           <option value="category">CATEGORY</option>
           <option value="product">PRODUCT</option>
        </select>
        <input name="val" type="text" id="catprod" />
    </form>
</html> 
```

您的 javascript 和 html 主要以这种方式分离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:21:24.953

```
<form action="search.php" method="get" name="form1" id="form1">
<select style="border:1px solid rgb(102,153,204);background-color:FFFFCC;height:20px;width:120px;" onfocus="this.style.background='white'" onblur="this.style.background='FFFFCC'" name="name" id="myselect">
                              <option value="category">CATEGORY</option>
                              <option value="product">PRODUCT</option>
                            </select>
<input name="value" type="text" id="catprod" style="border:1px solid rgb(102,153,204);background-color:FFFFCC;height:15px;width:200px;" onfocus="this.style.background='white'" onblur="this.style.background='FFFFCC'" size="20" />

<script>
  var submitform = function() {
   form1.submit();  
  }
  document.getElementById('myselect').onchange = submitform;
</script> 
```

我强烈建议您不要使用内联 css，并为您的 ID（和类）提供更有意义的名称。另外，避免使用内联 JS。

脚本标签中的代码所做的是，当您更改选择元素上的值时提交表单。由于您的表单使用“get”方法，因此您在提交表单时将拥有这些类型的 URL。

# web-applications - 防止 API 调用使用缓存

> ID：12266799
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:31.667
> 
> 标签：web-applications, backbone.js, logout, browser-cache, backbone.js-collections

注销后登录后，我的 Backbone Web 应用程序无法从服务器正确重新加载集合。这似乎是因为相关的 API 调用正在被缓存，所以当新用户登录时，如果页面没有刷新，他们将看到一些以前用户的数据。

如果我在注销时为一个这样的集合调用 collection.reset，则至少会为下一个用户清除数据，但他们自己在该集合中的数据仍然没有被加载。有谁知道如何防止请求使用缓存？

# .net - Webservice 在某些连接处返回错误作为响应

> ID：12266801
> 
> 赞同：0
> 
> 时间：2012-09-04T15:32:44.900
> 
> 标签：.net, web-services, iis-7, windows-server

我有一个在 Windows 服务器机器上的 iis 7 上运行的 web 服务。我正在使用它来请求 iphone 应用程序的数据。它在过去 3 年中运行良好，但一个月前它突然开始给出以下错误作为响应：

> 服务器无法处理请求。---> 访问临时目录被拒绝。运行 XmlSerializer 的身份“NT AUTHORITY\NETWORK SERVICE”没有足够的权限来访问临时目录。CodeDom 将使用进程使用的用户帐户进行编译，因此如果用户无权访问系统临时目录，您将无法编译。使用 Path.GetTempPath() API 找出临时目录位置。

负责网络的同事已经解决了这个问题，至少我们是这么认为的。然后我们意识到问题仍然出现在某些互联网连接上。例如，当朋友使用 3g 连接打开应用程序时，响应正确，但在使用 wifi 连接打开时返回错误。

我们找不到发生这种情况的原因。以前遇到过这个问题的人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:53:37.963

我可能是错的，但我相信您需要在临时目录上添加对 IIS 用户帐户的权限。这些帐户 (IIRC) 是 IUSR 和 IIS_IUSRS。

# javascript - 如何在将文本添加到 div 标签时添加换行符

> ID：12266809
> 
> 赞同：0
> 
> 时间：2012-09-04T15:33:03.637
> 
> 标签：javascript, jquery, html

所有，我正在使用文本填充 div 标签。

```
var centName;
 centName=centName+$(this).attr('data-centerName');//tried <br/> / '\n'

 $("#selOccs").text(centName.Trim(';')); 
```

我的 div 标签就像

```
 <div ID="selOccs" NAME="selOccs"  style="width: 350px; height: 100px;border:1px solid ;
                   overflow-y: scroll; scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7; scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color: #888888">

   </div> 
```

问题是添加换行符。我需要用换行符显示centName。到目前为止，所有值都在一行中[根据代码]。

我尝试添加 <--br/--> 和 '\n' 但它似乎不起作用..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T15:34:11.300

使用[.html()](http://api.jquery.com/html/)代替文本，然后在字符串中使用`<br/>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:36:00.763

```
var centName;

centName = centName + $(this).attr('data-centerName') + '<br/>';

$("#selOccs").html(centName.Trim(';')); 
```

# html - IE中显示的隐藏字段值

> ID：12266811
> 
> 赞同：4
> 
> 时间：2012-09-04T15:33:09.297
> 
> 标签：html, internet-explorer

为什么这个字段显示在 IE 中？

我看过但找不到另一个这样的案例。

我正在使用隐藏属性，它仍然显示...

```
<input hidden="yes" value="<?php echo $sssssssss; ?>" name="ssssssssasas"></input> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T15:39:26.143

我会尝试`hidden="yes"`用`type="hidden"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:39:01.783

```
<input type="hidden" value="..." name="..."></input> 
```

以这种方式尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T07:14:41.637

还有另一种选择，您可以使用它。

```
<div hidden> value </div> // this works in IE11 
```

但你也可以尝试，

```
display:none; // set this for the variable you want to hide and you can access its value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T11:05:27.653

你可以使用这个：

```
<div hidden="hidden"> value </div> // this works in IE7+ 
```

CSS：

```
[hidden] {
   display: none;
} 
```

# php - 用其他 PHP 文件中指定的 HTML 表填充 DIV 容器

> ID：12266812
> 
> 赞同：0
> 
> 时间：2012-09-04T15:33:13.493
> 
> 标签：php, jquery, html-table

我需要如何更改`loadPopupManual()`才能`#popup_manual`用我所拥有的内容填充 DIV `content.php`？特别是，我需要将指定的表插入`content.php`到`#popup_manual`. 此表必须具有由`content.php`.

**测试.php**

```
$(document).ready(function() {
    loadPopupManual();
});

function loadPopupManual() {    // to load the PopupManual DIV
    $('#popup_manual').fadeIn("slow");  
}

<div id="popup_manual">
    // I need to fill this DIV with what I have in 'content.php'
</div> 
```

**内容.php**

```
<?php
    include_once 'include/connect_db.php';

    $query="SELECT * FROM aircrafts;";
    $result=execute_query($query);

?>

<script type="text/javascript" charset="utf-8">
         $(document).ready(function(){
             //...
         }
</script>

<table>
<tr>
//... some content is inserted here from DB ($result)
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:42:05.657

你只需要使用`$.get`

```
$.get('content.php', function(data) {
    $('#popup_manual').html(data);
}); 
```

所以它会变成：

```
$(document).ready(function() {
    loadPopupManual();
});

function loadPopupManual() {    // to load the PopupManual DIV
    $('#popup_manual').fadeIn("slow"); 
    $.get('content.php', function(data) {
        $('#popup_manual').html(data);
    });
} 
```

# asp.net-mvc-4 - 自定义 IActionInvoker 和异步操作

> ID：12266818
> 
> 赞同：2
> 
> 时间：2012-09-04T15:33:32.837
> 
> 标签：asp.net-mvc-4, ninject, task-parallel-library

我在 MVC4 项目中使用 NInject 作为默认容器和[NInjectResolver 类](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)。注射效果很好。

现在我正在尝试替换默认值`IActionInvoker`以提供自定义 JSON 序列化，如此[处所示](https://stackoverflow.com/a/11878694/165656)。

`JsonResult`如果操作返回但它阻塞`Task<JsonResult>`（即使我绑定`IActionInvoker`到默认值） ，这似乎工作正常`ControllerActionInvoker`。

当我将其转换为异步操作时，该操作返回（而不是 JSON），此文本：`System.Threading.Tasks.Task<System.Web.Mvc.JsonResult>`- 喜欢调用`ToString()`它。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:09:10.640

由于您正在使用基于任务的异步，因此您必须考虑注入[`AsyncControllerActionInvoker`](http://msdn.microsoft.com/en-us/library/system.web.mvc.async.asynccontrolleractioninvoker%28v=vs.108%29.aspx).

# iphone - Apple Mach-O 链接器错误，用于在 iPhone 应用程序中添加 iAd 横幅

> ID：12266826
> 
> 赞同：0
> 
> 时间：2012-09-04T15:33:50.407
> 
> 标签：iphone, iad

尝试使用以下代码在应用中添加 iAd 横幅视图：

```
adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
adView.frame = CGRectOffset(adView.frame, 0, -50);
adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;
adView.backgroundColor = [UIColor clearColor];
adView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin; 
```

它给 Apple Mach-O 链接器错误

```
Undefined symbols for architecture armv6:
"_CGRectOffset", referenced from:
  -[ContainerViewController viewDidLoad] in ContainerViewController.o
"_CGRectZero", referenced from:
  -[ContainerViewController viewDidLoad] in ContainerViewController.o
ld: symbol(s) not found for architecture armv6
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果有人可以指导需要修复什么来摆脱这些错误。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:56:50.753

确保您正在链接 CoreGraphics 框架。

# mysql - mysql返回具有更高值的行

> ID：12266838
> 
> 赞同：1
> 
> 时间：2012-09-04T15:34:26.707
> 
> 标签：mysql

我有一张看起来有点像这样的评论表

```
ID    REVIEWITEM  SCORE    DATE
1     Object A    5.0      6-5-2012
2     Object A    7.0      6-5-2012
3     Object A    6.0      6-7-2012
4     Object B    4.0      7-1-2012 
```

我希望有一个查询返回给我所有的评论，但如果评论是针对同一项目并且具有相同的日期，则只返回分数较高的评论。因此，例如上面的结果将是：

```
ID    REVIEWITEM  SCORE    DATE
2     Object A    7.0      6-5-2012
3     Object A    6.0      6-7-2012
4     Object B    4.0      7-1-2012 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:37:40.333

试试这个，

```
SELECT a.*
FROM   tableName a INNER JOIN
        (
            SELECT  ReviewItem, `Date`, MAX(SCORE) maxScore
            FROM tableName
            GROUP BY ReviewItem, `Date`
        ) b ON a.reviewItem = b.reviewItem AND
                a.score = b.maxScore AND
                a.`date` = b.`date` 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/9d70b/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:09:14.407

```
SELECT * FROM table_name ORDER BY ID DESC, SCORE DESC GROUP BY REVIEWITEM, DATE 
```

应该管用

# ios - 如果我们更新现有的 iPhone 应用程序以支持 iPad 会发生什么？

> ID：12266842
> 
> 赞同：-2
> 
> 时间：2012-09-04T15:34:55.253
> 
> 标签：ios, app-store

如果我们有一个当前在 App Store 上运行的应用程序，仅与 iPhone 设备兼容，并且我们进行了与 iPhone 和 iPad 设备（通用）兼容的更新，会发生什么？

我能想到两种可能：

*   应用程序不会更新 - 更新只需要 iPhone 设备的应用程序二进制文件；

*   添加 iPad 支持没有问题。

我在 Apple 的指南中没有看到明确的答案。以下链接中有一些讨论：
[iOS Universal App question](https://stackoverflow.com/questions/6303324/ios-universal-app-question)
[iPhone/iPad - Breaking universal into iPhone app only](https://stackoverflow.com/questions/6654646/iphone-ipad-breaking-universal-into-iphone-app-only)
[iOS: Universal App - Release as iPhone only](https://stackoverflow.com/questions/5868034/ios-universal-app-release-as-iphone-only)

有没有人有答案，参考苹果指南？我需要确定这是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:37:45.620

第二个答案：这绝对不是问题。那些在 iPad 上下载您的应用程序并在他们的 iPad 上以“iPhone 模拟器”模式运行的人会很高兴看到他们现在拥有一个成熟的应用程序。iPhone 上的用户不会注意到差异。

编辑：

我可以在 Apple 的文档中找到的最接近的是[https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

它指出“以下部分强调了您必须对现有应用程序进行的更改，以确保它在任何类型的设备上顺利运行”：本质上，更新 info.plist 并重新设计您的视图和视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:38:05.413

如果这就是您所要求的，那么不会发生任何不好的事情。您的 iPhone 用户只会注意到应用程序文件大小的差异（如果他们注意到任何东西的话）。iPad 用户会注意到您的应用程序现在占据了他们的全屏。

提交或批准过程中没有任何东西可以阻止您这样做。只要您正确配置了所有内容，iPhone-only 到 Universal 将是一个平稳的过渡。

# c# - 对 DropDownList 更改执行更新

> ID：12266843
> 
> 赞同：1
> 
> 时间：2012-09-04T15:35:00.467
> 
> 标签：c#, gridview, asp.net-3.5

目前，我在 ItemTemplate 中有一个 GridView，其中包含以下内容：

```
<asp:LinkButton ID="lbEdit" runat="server" CommandName="Edit">
    <asp:Label ID="Label6x" runat="server" Text='<%# Bind("progress_full") %>' /></asp:LinkButton> 
```

这工作正常，当我单击它时，它会显示当前包含以下内容的 EditTemplate：

```
<asp:DropDownList ID="DropDownList3" runat="server" 
    SelectedValue='<%# Bind("progress") %>'>
    <asp:ListItem Value="0">In queue</asp:ListItem>
    <asp:ListItem Value="1">Being worked on</asp:ListItem>
    <asp:ListItem Value="2">Complete</asp:ListItem>
</asp:DropDownList><br />
<asp:LinkButton ID="lbUpdate" runat="server" CommandName="Update" Text="Update" /> 
```

如何让下拉菜单在`Update`更改时自动执行命令，立即返回 ItemTemplate，而不是我对 DropDown 进行更改并且必须单击`Update`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:42:48.713

您添加`AutoPostBack="true"`到 DropDownList 并设置`OnSelecIndexChanged="DropDownList1_SelectedIndexChanged"`

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
   //execute here your update
   ......
} 
```

# zsh - zsh：如何取回“未扩展”命令

> ID：12266851
> 
> 赞同：12
> 
> 时间：2012-09-04T15:35:31.590
> 
> 标签：zsh, zsh-zle

Zsh 有一个很好的扩展 glob 的特性。例如，击中`Tab`变成`ls **/*.js`

```
ls app/assets/javascripts/application.js vendor/assets/javascripts/Markdown.Converter.js 
```

有没有办法将其折叠回原始 glob 版本？还是我应该禁用全局扩展？

我想要它的原因是，当我在调试一个 glob 时，我`Tab`只是为了仔细检查一些东西，没有办法返回并完成模式。我必须从头开始。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-04T15:54:58.190

使用`undo` `zle`命令。例如，将其绑定到`Ctrl``_`：

```
bindkey '^_' undo 
```

来自[`zshzle(1)`](https://linux.die.net/man/1/zshzle)：

```
undo (^_ ^Xu ^X^U) (unbound) (unbound)
       Incrementally undo the last text modification.

redo   Incrementally redo undone text modifications. 
```

# atk4 - 使用“保存和新文档”按钮提交表单

> ID：12266853
> 
> 赞同：1
> 
> 时间：2012-09-04T15:35:41.733
> 
> 标签：atk4

我正在使用一个简单的表单来提交一些新的文档信息，并希望用户能够点击“保存和新文档”按钮，以便他可以轻松添加多个文档。我尝试向表单添加一个按钮，该按钮在我第一次点击“保存和新建”按钮时起作用，并在现有表单上弹出另一个表单，但之后该按钮停止工作。可能是因为在生成新的时我没有正确关闭前一个？

我该怎么做？
我在调用新的 dialogURL() 之前尝试过使用 closeDialog() 但这显然不起作用......

（简化）代码示例如下：

```
class page_informa_documento extends Page {

  function init(){
  parent::init();
  $f=$this->add('Form');
  $f->setModel('Document');
  $f->addSubmit('Save');
  $f->addButton('Save and new document')->js('click',$f->js()->atk4_form('submitForm','otro'));

  if($f->isSubmitted() )
  {
      // save document info we just got here
      $doc->save();

    if ($f->isClicked('otro')) 

      $f->js()->univ()->dialogURL('New Document',$this->api->getDestinationURL('/informa/documento'))->execute();

    else  $f->js()->univ()->closeDialog()->execute();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:15:57.973

如果您需要表单数据，则必须添加多个提交按钮。

```
$a=$f->addSubmit('Save');
$b=$f->addSubmit('Save and Add More');
if($f->isSubmitted()){

    // save your document here

    if($f->isClicked($a)){
        $this->js()->univ()->location($this->api->url('index'))->execute();
        // go to index page, we are done
    }
    if($f->isClicked($b)){
        $this->js()->univ()->location($this->api->url()->execute();
        // stay on the same page, just reload
    }
} 
```

这是一个演示：[http ://test-suite.agiletoolkit.org/?page=form](http://test-suite.agiletoolkit.org/?page=form)

来源取自这里：[https ://github.com/atk4/atk4-testsuite/blob/master/page/form.php#L16](https://github.com/atk4/atk4-testsuite/blob/master/page/form.php#L16)

# javascript - 如何管理视图的变化？

> ID：12266854
> 
> 赞同：0
> 
> 时间：2012-09-04T15:35:41.873
> 
> 标签：javascript, backbone.js, coffeescript

我应该使用路由器来管理视图的变化吗？目前，我正在使用“父”视图来处理“子”视图管理。

我在一个父母中有多个“孩子”观点。通过单击链接更改子视图/页面，这也修改了 URL。显示视图的更改由父视图处理，而不是路由器。有问题的路由器没有任何价值编码，我创建了“虚拟”路由器，所以我可以使用`Backbone.history`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:01:58.593

我想您正在寻找某种验证，证明这是构建您的应用程序的正确方法。从您提供的有限信息来看，很难说，即使您确实提供了一些代码，您的问题也可能无法明确回答。

所以，让我这样说吧。我认为创建由其他视图组成的 Backbone.js 视图没有任何缺陷。如果您将与视图更改相关的所有内容都放在路由器中，我*确实*认为有问题 - 除非您在那里提供某种高级描述 - 例如传入视图，父视图应该显示/附加事件到/某物别的。

还有一点。孩子的观点是如何关联的？他们中的一些人可能有一个通用的（高级）接口吗？或者您的父视图是否包含不同的东西，例如搜索表单和一些网格和标签？或两者？这个父视图是否有可能在另一个页面上有用，或者它只是要管理这个特定的页面视图等等。所有这些都很重要。

我想甚至可能有理由质疑您的父视图是否应该严格扩展`Backbone.View`或应该具有某种其他类型的“基”类。但是，如果它有效并且与成为“观点”有某种合理的联系，我就不会费心问这个问题了。正如 Jeff Attwood 所说，“元是谋杀”。在某些时候，这类讨论变得不切实际，*当仍有重要问题需要解决或实施*时，最好留下合理的解决方案。

我的想法是，如果您使用路由器来控制并将事情委托给父视图，并让父视图用它的子视图来做这件事，那么您可能没问题。

不过，您可能需要考虑通过路由器中父视图的构造函数传入子视图。让一个单独的事物决定一个对象的组合通常比让对象自己创建它的组合更好，但并不总是更好。但也要始终追求透明度。有时，通过依赖注入获得的自由并不值得抽象代码的迟钝；特别是如果你不太确定自己在做什么。弄清楚你在做什么，然后考虑你可能没有想到的抽象。

如果你想知道你做的事情是否与社区做某些事情的方式一致，你可能应该去[主干.js 谷歌讨论组](https://groups.google.com/forum/?fromgroups#!forum/backbonejs)，并在那里审查或提出问题。

# hibernate - Rest-如何在 JSON 数据中动态添加/包含属性

> ID：12266855
> 
> 赞同：0
> 
> 时间：2012-09-04T15:35:42.497
> 
> 标签：hibernate, rest

我正在研究 Rest web 服务并为移动应用程序生成 JSON 数据。我使用 Jersey 1.4，web 服务器作为 tomcat 7，Hibernate 3.3，MySQL5。我是 REST 世界的新手。我有一个端点，它只是根据我的查询返回一个年份列表。

输出：

**{"success":true,"count":2,"message":null,"data":[{"year":2012},{"year":2013}]}**

这是我所期望的。

但是我被要求在这个返回的 json 数据集中包含一个字符串类型的描述值。基于年份的值。

如果 year=2012（当前年份）描述应该是“今年”，对于 year=2013 description="next year"，对于 year=2011 description="previous year"，对于 year=2010 description="2010" 等等.

**我必须返回类似：{"success":true,"count":2,"message":null,"data":[{"year":2012,"description":"this year"}, {“年份”：2013，“描述”：“明年”}]**

我的资源类

```
 @GET
@Path("/{countryCd}/upcoming")
@Produces("application/json")
public  JResponse<JsonResponse> getYearsForUpcoming(@PathParam("countryCd") 
     String  countryCode) {

     JobDao jobDao =new JobDao();   
     JsonResponse res= new JsonResponse();

   @SuppressWarnings({ })
List<Jobs> jobList=  jobDao.getYearsForUpcoming(countryCode);
   if(jobList==null){
       throw new NotFoundException("Error occured! NO data found");
   }

    int count = jobList.size();
    res.setCount(count);
    res.setData(jobList);

           return JResponse.ok(res).build();

} 
```

**我的查询**

String sql="SELECT distinct year(s_date) as year from jobs where country=:countryCode and year(s_date)>=year(curdate()) order by year(s_date) asc"; 查询 query=session.createSQLQuery(sql).addScalar("year").setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP);
query.setParameter("countryCode", countryCode); 即将到来的RegattaList= query.list();

**Jobs.java（myeclipse 为表作业生成的实体）**

公共类乔布斯实现 java.io.Serializable {

```
private static final long serialVersionUID = 1L;
private Integer jobId;
private String status;
    private Date  SDate;
    //some more

    // getter and setters 
```

}

我不知道如何向我的实体中不存在的 JSON 数据添加新属性。任何想法都非常感谢。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:03:14.470

您可能必须再创建一个实体来映射您的新对象，类似于

```
public class Data {
    private String year;
    private String description;
} 
```

然后加载这些实体的列表并将它们添加到响应中。

# websocket - 如何将在 dotcloud 上为 websocket 提供服务的龙卷风服务器暴露给 www？

> ID：12266863
> 
> 赞同：4
> 
> 时间：2012-09-04T15:36:12.190
> 
> 标签：websocket, tornado, dotcloud

我正在尝试 在 dotCloud 上安装[IPython html 笔记本服务器。](http://ipython.org/ipython-doc/dev/install/install.html#installnotebook)IPython 服务器使用带有 websockets 的 tornado（以及在 tcp 套接字上使用 zeromq 的其他内部通信）。

这是我的**dotcloud.yml**：

```
www:          
    type: custom
    buildscript: builder
    ports:
       nbserver: tcp 
```

我正在遵循[此处](http://answers.dotcloud.com/question/337/configure-ports-for-python-worker-web-server-eg)和[此处](https://stackoverflow.com/questions/12065217/dotcloud-www-and-tcp-in-single-app/12066359#12066359)给出的自定义端口配方。如日志所示，我在以下位置运行龙卷风服务器`127.0.0.1:$DOTCLOUD_WWW_NBSERVER_PORT`：

**/var/log/supervisor/www.log**：

> [NotebookApp] IPython Notebook 正在运行：' http: [//127.0.0.1](http://127.0.0.1:35928/) :35928/ '
> [NotebookApp] 使用 Control-C 停止此服务器并关闭所有内核。

但是当我推送时，dotCloud CLI 告诉我：

> 警告：服务在启动时崩溃或正在侦听错误的端口。它未能在 30 秒内对端口“nbserver”(42801) 做出响应。请检查应用程序日志。
> ...
> 部署完成。您的应用程序在以下 URL 可用 未找到 URL。没关系，这意味着您的应用程序不包含 Web 服务。”

什么都没有`my-app.dotcloud.com`或`my-app.dotcloud.com:DOTCLOUD_WWW_NBSERVER_PORT`

我在这里想念什么？谢谢你的帮助。

## 更新

问题解决了。通常的 HTTP 端口适用于 websocket，因此不需要自定义端口配方。这是我的新**dotcloud.yml**：

```
www:
 type: custom
 buildscript: builder
 ports:
   web: http 
```

适用于以下内容`ipython_notebook_config.py`：

```
 c.NotebookApp.ip = '*' 
```

这使得 tornado 网络服务器可以监听所有的 IP 地址。

**警告：首先设置安全和身份验证！**

有关详细信息，请参阅[运行公共笔记本服务器](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#running-a-public-notebook-server)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:11:44.860

真高兴你做到了！

将来，对于其他读者来说，您实际上希望您的应用程序能够监听`$PORT_NBSERVER`并连接到它`DOTCLOUD_WWW_NBSERVER_PORT`。`$PORT_NBSERVER`是本地端口，而后者是通过我们的路由/NAT 层暴露给外部世界的端口。

如果您有任何其他问题，请随时通过[http://support.dotcloud.com与我们联系](http://support.dotcloud.com)

*资料来源：我是 dotCloud 员工。*

# ios - 用于 iPhone 应用程序开发的 Storyboard 或 XIB，我应该选择哪一个？

> ID：12266864
> 
> 赞同：2
> 
> 时间：2012-09-04T15:36:16.840
> 
> 标签：ios, storyboard, xib

我有一个发布日期为 2013 年第一季度的项目，我应该使用 xib 来兼容 iOS4.3 和早期版本，还是应该只使用 storyboard 来忽略 iOS4.3 和早期版本的用户？查了一些ios版本的分享资料，想听听大家的意见。 [http://www.14oranges.com/2012/07/ios-version-statistics-%E2%80%93-july-14th-2012/](http://www.14oranges.com/2012/07/ios-version-statistics-%E2%80%93-july-14th-2012/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:46:48.443

我猜这取决于你想用它们做什么。我个人觉得 xibs 为您提供了比自定义界面更多的功能，但这可能只是因为我已经习惯了它们（我确信可以在 xibs 中完成的所有事情也可以在情节提要中完成）。

故事板可能会使整个开发过程变得更容易，就像您可以在几秒钟内将导航或表格视图控制器组合在一起一样。有关故事板津贴的更多详细信息，请[点击此处](https://stackoverflow.com/a/9084124/716216)。

此外，如果您在开始项目之前担心向后兼容性，您应该汇总您希望使用的 iOS 的所有功能。由此您可以推断哪些 iOS 设备/iOS 版本将能够运行您的应用程序。这样做应该让您清楚地了解您能够支持多远，并且应该有助于使 4.3+- 的决定更容易。

# html - iOS - 从 webview 缩略图播放 youtube 视频

> ID：12266866
> 
> 赞同：0
> 
> 时间：2012-09-04T15:36:18.873
> 
> 标签：html, ios, uiwebview, youtube

当我意识到我正在播放的 youtube 视频是在 iPhone 上播放的，而不是在 iPad 上播放时，我正准备提交一个应用程序。这是我正在使用的代码：

```
NSString *embedHTML = @"\
            <html><head>\
            <style type=\"text/css\">\
            body {\
            background-color: transparent;\
            color: white;\
            }\
            </style>\
            </head><body style=\"margin:0\">\
            <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
            width=\"%0.0f\" height=\"%0.0f\"></embed>\
            </body></html>";

            NSString *html = [NSString stringWithFormat:embedHTML, [videoItem objectForKey:@"URL"], thumb.frame.size.width, thumb.frame.size.height];
            UIWebView *videoView = [[UIWebView alloc] initWithFrame:thumb.frame];
            [videoView loadHTMLString:html baseURL:nil];
            [videoContainer addSubview:videoView]; 
```

有什么理由可以在 iPhone 而不是 iPad 上运行吗？我正在第一代 iPad 上进行测试。这些视频可以在我测试过的两种 iPhone 机型（3GS 和 4S）上播放。

当我点击 iPad 上的 webviews 时，什么都没有发生。

# lucene - Lucene .NET IndexWriter 锁

> ID：12266867
> 
> 赞同：0
> 
> 时间：2012-09-04T15:36:22.540
> 
> 标签：lucene, lucene.net

我的问题与下一个代码片段有关：

```
 static void Main(string[] args)
{
    Lucene.Net.Store.Directory d = FSDirectory.Open(new DirectoryInfo(/*my index path*/));
    IndexWriter writer = new IndexWriter(d, new WhitespaceAnalyzer());

    //Exiting without closing the indexd writer...
} 
```

在这个测试中，我打开了一个 IndexWriter 而没有关闭它——所以即使在测试退出后，write.lock 文件仍然存在于 index 目录中，所以我预计下次我打开一个 IndexWriter 到该索引的实例时，`LockObatinFailedException`会被抛出。有人可以向我解释为什么我错了吗？我的意思是，write.lock 文件的含义是否只是保护在同一进程中创建两个 IndexWriters？这对我来说似乎不是正确的答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:53:01.047

如果您将代码更改为：

```
IndexWriter writer = new IndexWriter("Path to index here", new WhitespaceAnalyzer()); 
```

你会得到异常。

锁文件用于防止在同一个索引上打开2个IndexWriter，无论它们是否在同一个进程中。您期望那里出现异常是正确的。

# ruby-on-rails-3.2 - Ruby On Rails - 在开发模式下不发送电子邮件

> ID：12266872
> 
> 赞同：0
> 
> 时间：2012-09-04T15:37:06.370
> 
> 标签：ruby-on-rails-3.2, actionmailer, active-attr

类似的问题 [Rails 联系表格不起作用](https://stackoverflow.com/questions/6185483/rails-contact-form-not-working)

指南：[https](https://github.com/thomasklemm/email_form_rails) ://github.com/thomasklemm/email_form_rails rails 3.2.x

应用\模型\消息.rb

```
class Message
  include ActiveAttr::Model
  include ActiveModel::Validations

  attribute :name
  attribute :email
  attribute :subject
  attribute :body
  attr_accessible :name, :email, :subject, :body

  validates_presence_of :name
  validates_presence_of :email
  validates :email, email_format: { message: "is not looking like a valid email address"}
  validates_presence_of :subject
  validates_length_of :body, maximum: 500
end 
```

app\mailers\contact_form.rb

```
class ContactForm < ActionMailer::Base
  default from: "myemail@gmail.com"
  default to: "myemail@gmail.com"

  def email_form(message)
    @message = message
    mail subject: "#{message.subject} #{message.name}"
    mail body: "#{message.body}"
  end
end 
```

发展.rb

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.perform_deliveries = true
  config.action_mailer.smtp_settings = {
      :address              => "smtp.gmail.com",
      :port                 => 587,
      :domain               => "mydomain.com",
      :user_name            => "myemail@gmail.com",
      :password             => "mypassword",
      :authentication       => :plain,
      :enable_starttls_auto => true
  }

  config.action_mailer.default_url_options = {
      :host => "localhost:3000"
  } 
```

命令输出

> 在 2012-09-04 22:10:40 +0700 开始 POST "/email" for 127.0.0.1 由 HomeController#send_email_form 作为 HTML 参数处理：{"utf8"=>"√", "authenticity_token"=>"w39BLqCrjTMm4RRi/ Sm5hZoEpcw46 npyRy/RS0h48x0=", "message"=>{"name"=>"anonymousxxx", "email"=>"anonymousxxx@yahoo.com", "subject"=>"Test", "body"=>" send email"}, "commit"=>"Create Message"} Redirected to localhost:3000/home/contact Completed 302 Found in 1ms (ActiveRecord: 0.0ms)

但是电子邮件（消息）没有收到我的电子邮件，..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:05:14.527

如果您只想看到电子邮件被触发，有一种方法可以使用操作邮件配置传递方法将电子邮件保存到本地文件系统并指定要保存它的位置。我通常保存到 tmp/mail。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T02:29:33.373

如果日志说是`Completed`在开发模式下，它不会告诉电子邮件已发送。您需要在 中设置`config.action_mailer.raise_delivery_errors`值`true`，`config/environment/development.rb`如果电子邮件发送不正确，它将显示一些错误。

```
Rails.application.configure do
    ## other stuff
    config.action_mailer.raise_delivery_errors = true
    ## other stuff
end 
```

# animation - 重复嵌套的 CSS 动画

> ID：12266874
> 
> 赞同：0
> 
> 时间：2012-09-04T15:37:14.867
> 
> 标签：animation, css

我正在尝试获取此加载栏： [http ://www.webfroze.com/css/loading-animation-circle-style](http://www.webfroze.com/css/loading-animation-circle-style)

无限期地重复。

我试过

```
-moz-animation:loading 1s infinite;
-webkit-animation:loading 1s infinite; 
```

但这不会起作用，因为动画是建立在 5 个独立的动画球体上的，这些球体彼此相邻，所以将它们设置为重复无限选项会搞砸

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:11:18.767

你需要在你的动画中添加一个休息，一个什么都没有发生的部分，这样你就可以模仿延迟。

**CSS：**

```
#layer1 { -moz-animation-delay:0.3s; -webkit-animation-delay:0.3s; }
#layer2 { -moz-animation-delay:0.6s; -webkit-animation-delay:0.6s; }
#layer3 { -moz-animation-delay:0.9s; -webkit-animation-delay:0.9s; }
#layer4 { -moz-animation-delay:1.2s; -webkit-animation-delay:1.2s; }
#layer5 { -moz-animation-delay:1.5s; -webkit-animation-delay:1.5s; }

@-moz-keyframes loading {
    0%{-moz-transform:scale(0,0);}
    25%{-moz-transform:scale(1,1);}  
    50%{-moz-transform:scale(1,1);} 
    75%{-moz-transform:scale(0,0);} 
    100%{-moz-transform:scale(0,0);} 
}

@-webkit-keyframes loading {
    0%{-webkit-transform:scale(0,0);}
    25%{-webkit-transform:scale(1,1);}  
    50%{-webkit-transform:scale(1,1);} 
    75%{-webkit-transform:scale(0,0);} 
    100%{-webkit-transform:scale(0,0);}    
} 
```

**演示：http:**
[//jsfiddle.net/Vf2aq/2/](http://jsfiddle.net/Vf2aq/2/)

# ruby-on-rails - 主干更新带有 id 的嵌套集合。（Rails 后端）

> ID：12266877
> 
> 赞同：0
> 
> 时间：2012-09-04T15:37:29.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, backbone-relational

我有一个模范约会，它有很多任务。

创建一个具有任务的新约会模型可以很好地与骨干网一起使用。但是，当我尝试使用不同任务的 id 更新模型时，它不起作用。

我收到以下错误：

```
ActiveRecord::AssociationTypeMismatch: Task(#1192000) expected, 
got ActiveSupport::HashWithIndifferentAccess(#2458300) 
```

参数：

```
{"appointment"=>
   {"id"=>"36",
    "customer_id"=>"19",
     "employee_id"=>"10",
     "done"=>"",
     "notes"=>"",
     "starts_at"=>"2012-09-05 13:00:00 +0200",
     "ends_at"=>"2012-09-05 14:30:00 +0200",
     "bookingtype"=>"",
     "tasks"=>
         "[{\"created_at\"=>\"2012-09-04T13:37:17+02:00\",
           \"duration\"=>\"60\", \"id\"=>\"12\",
           \"task_category_id\"=>\"5\", \"updated_at\"=>\"2012-09-04T13:46:13+02:00\"}]",
     "appointment"=>"",
     "task_ids"=>"[\"12\"]"},
     "action"=>"update",
     "controller"=>"appointments",
      "id"=>"36"} 
```

我有一些想法，问题是请求中有任务和 task_ids，但我不知道如何在骨干网中解决这个问题。

我的更新方法如下所示：

```
 save: function() {
            var self = this;        

            var tasks = [];

            $("input:checked").each(function() {                   
               tasks.push($(this).val());
            });

            this.model.save({starts_at: this.$('#appointment_starts_at_modal').val(), employee_id: this.$('#employeeSelect').val(), customer_id: this.$('#customerSelect').val(),
                        "starts_at(5i)": this.$('#appointment_starts_at_5i_modal').val() , 
                        "ends_at(5i)":  this.$('#appointment_ends_at_5i_modal').val(), task_ids: tasks}, {
            success: function(model, resp) {
                self.model = model;   

                self.close();
            },
            error: function() {
                //new App.Views.Error();
            }
        });
        return false;
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:21:42.277

从错误来看，这听起来像是一个红宝石问题，我对红宝石一点也不熟悉。但是，对于 Backbone，您的约会模型中有“tasks”和“task_ids”属性应该不是问题。Backbone 很乐意将这些作为 JSON 数据发送到您的服务器。但是请注意，在 Backbone 中使用嵌套集合时，将 id 作为任务模型之外的属性传递的方式有点奇怪。:-)

不过，我可以谈谈我从 Backbone 的角度看到的内容。

我假设您的`tasks_ids`属性代表您拥有的所有任务的 id 数组。`tasks`是任务 JSON 对象的 array()。在 Backbone 中，当使用嵌套集合等时，通常`id`每个任务的属性都是任务对象的一部分。因此，如果我制作了一个将一堆任务数据作为数组发送的应用程序，它会发送如下所示：

```
"tasks"=>
     "[{\"id"=>\"12\", \"created_at\"=>\"2012-09-04T13:37:17+02:00\",
       \"duration\"=>\"60\", \"id\"=>\"12\",
       \"task_category_id\"=>\"5\", \"updated_at\"=>\"2012-09-04T13:46:13+02:00\"}]", 
```

当我使用嵌套集合时，我基本上确保某个模型的 id 和所有属性都被对象封装。

```
// My fake JSON
{'id':'1', 'appointment':{
    'id':'50',
    'tasks':[
        {'id':'100', 'taskName':'groceries' /* etc. */},
        {'id':'200', 'taskName':'bank errand'}
    ]
}} 
```

当我的约会模型接收到这个获取的数据时，我将在我的`parse()`或修改的`set()`方法中处理它。我将展示我所做的`parse()`

```
// Inside my appointment model definition
parse: function(response) {
    if (_.isUndefined(this.tasks)) {
        this.tasks = new TasksCollection();
    }
    this.tasks.reset(response.tasks);
    delete response.tasks;

    return response;
} 
```

类似上面的东西。我的 TasksCollection 已`model: Task`定义，因此使用属性哈希重置将使用适当的数据（包括 id）填充嵌套在我的约会模型中的集合。

我不认为这可以解决您的问题，但是由于您提到了 Backbone 的做事方式，我认为（在许多方式中）说明这种方式可能会给您一些想法。

# database - 动态数据库存储

> ID：12266878
> 
> 赞同：1
> 
> 时间：2012-09-04T15:37:40.017
> 
> 标签：database, forms, dynamic, rdbms

我想构建一个可以存储动态字段的服务。例如，注册用户可以在应用程序的特定区域中动态创建、读取、更新和删除通用表单字段，并将动态表单保存在数据库中。这些通用表单字段将存储用户需要的任何信息。解决此类问题的最佳方法是什么？（这是一个数据库设计问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:41:17.873

为什么不考虑像 MongoDB、CouchDB、Riak 等这样的无 SQL 文档存储？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:49:49.167

我不得不做一次类似的事情。

我会使用的最小设计是这样的：

您需要三个表来定义表格 metadada：

形式：

*   表单ID (PK)
*   表格名称
*   ETC

表单域：

*   表单字段 ID (PK)
*   字段ID
*   表单ID

领域：

*   字段 ID (PK)
*   字段名
*   字段类型
*   ETC

还有两个表来存储表单实例数据：

表单实例：

*   FormInstanceID (PK)
*   表单ID
*   用户身份
*   ETC

表单域实例：

*   FormFieldInstanceID (PK)
*   表单实例ID
*   表单字段ID
*   值（这必须是文本，您必须管理类型转换）

这不是我所知道的最好的设计，但你甚至可以用它来支持多值字段。类型转换应在应用程序级别进行管理

# .net - Wix 从正在运行的 Windows 服务中获取用户

> ID：12266885
> 
> 赞同：0
> 
> 时间：2012-09-04T15:37:52.860
> 
> 标签：.net, windows, installation, wix, wix3.5

我想知道是否有任何内置功能可以获取使用 Wix 3.5 运行 Windows 服务的用户。我看过[这篇文章](https://stackoverflow.com/questions/1058681/check-if-service-is-running-in-wix)，上面说 Wix 没有内置任何东西来检查服务状态。我认为，如果这是不可能的，那么获得运行服务的用户就更不可能了。使用自定义操作是最后的手段。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:55:56.683

您可以对 HKLM\SYSTEM\CurrentControlSet\Services\ServiceName|ObjectName 进行注册表搜索，但这假定在不重新启动服务的情况下没有更新注册表值。（可能断开连接）。

以编程方式（自定义操作），您可以与 SCM API (win32) 或 WMI（win32_service 类 StartName 属性）进行交互以获取更详细的信息。

我同意避免 CA，但如果 CA 的唯一目的是收集数据而不是更改机器状态，那么它可以非常稳健地完成，几乎没有缺点。

# jquery - 在具有相同类的每个 div 上裁剪图像

> ID：12266886
> 
> 赞同：2
> 
> 时间：2012-09-04T15:37:57.097
> 
> 标签：jquery

我正在尝试在具有相同类的 div 内裁剪图像。我正在使用以下代码：

```
<script type="text/javascript">
var iu = $("div.postbody").find("img").attr("src");
iu = iu.substr(0, iu.indexOf('?')) + '?width=150&height=150&crop=1%3A1';
$("div.postbody").find("img").attr("src", iu);
</script> 
```

下面是 HTML 标记：

```
<div class="postbody">
<a href="#"><img src="http://1stimg.jpg?width=300"></a>
</div>
<div class="postbody">
<a href="#"><img src="http://2ndimg.jpg?width=300"></a>
</div> 
```

使用上面的代码片段可以将原始图像从 300 像素裁剪到 150 像素，但问题是 2ndimg.jpg 正在被 1stimg.jpg 替换。无论如何要修改代码以使其在单个 div 上运行？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:41:43.057

只需将您的代码应用于[`each`](http://api.jquery.com/each/)图像：

```
$("div.postbody img").each(function() {
    var iu = this.src;
    iu = iu.substr(0, iu.indexOf('?')) + '?width=150&height=150&crop=1%3A1';
    this.src = iu;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:42:06.673

```
$("div.postbody img").each(function(e) {

    var iu = $(this).attr("src");
    iu = iu.substr(0, iu.indexOf('?')) + '?width=150&height=150&crop=1%3A1';
    $(this).attr("src", iu);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:47:06.853

> `.attr( attributeName, function(index, attr) )`
> 
> `attributeName`要设置的属性的名称。
> 
> `function(index, attr)`返回要设置的值的函数。`this`是当前元素。接收集合中元素的索引位置和旧属性值作为参数。

```
$("div.postbody img").attr("src", function(i, cur){
     cur = cur.substr(0, cur.indexOf('?')) + '?width=150&height=150&crop=1%3A1';
     return cur;
}); 
```

[小提琴](http://jsfiddle.net/nDg2W/1/)

# batch-file - 通过批处理文件远程更新 SVN

> ID：12266891
> 
> 赞同：0
> 
> 时间：2012-09-04T15:38:24.647
> 
> 标签：batch-file, remoting

我尝试搜索相关线程，但没有成功。所以这里是详细的问题/情况，我正在寻求帮助。

1.  我有 30 个客户端节点，我在其中设置了 SVN，并在我想要（强制）的时候检查了两个文件夹（需要更新）.. 例如：“d:\gbv\textures”和“d:\gbv\characters”

2.  然后我将 svnUpdate.bat 文件放在主 d: 驱动器中，并使用相关命令，例如：“svn update blabla”

3.  如果我通过双击运行这个 bat 文件，它工作正常（它会更新）

4.  现在我想，我应该创建一个批处理文件，在其中键入所有 30 个节点 IP 和一组命令，以从本地 d 运行该批处理文件：它应该可以工作。

5.  问题：我无法做到这一点。

    *   因为我无法从我的 cmd 面板执行此操作。
    *   因为我不确定如何访问网络 pc 并告诉它从 dos 提示符下从其驱动器运行“d:\svnUpdate.bat”。（显然，我可以通过 win explorer 直观地做到这一点）。

希望这个问题是有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:48:24.250

[您可以使用PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)在网络中的远程计算机上执行文件。我用它来执行批处理文件并将参数传递给它们。

您可能需要`-w`设置工作目录的选项。

当然，使用 powershell 远程处理要容易得多，但是由于您已经使用批处理进行了设置，因此 PsExec 可以正常工作。

# css - 如何添加或更改 JSF 数据表（primefaces）的类属性？

> ID：12266895
> 
> 赞同：4
> 
> 时间：2012-09-04T15:38:31.737
> 
> 标签：css, jsf, primefaces

我有一个[PrimeFaces`<p:dataTable>`](http://www.primefaces.org/showcase/ui/datatableBasic.jsf)，我想在生成的 HTML`<table>`元素中指定一个 CSS 类。如果我使用该`styleClass`属性，那么它将被添加到包装`<div>`而不是`<table>`. 我怎样才能得到它`<table>`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T16:14:43.733

如果您设置`tableStyle`或`tableStyleClass`属性，它会将 css 类添加到 table 元素。

# javascript - html 等中的 html 会导致怪癖模式启动？

> ID：12266896
> 
> 赞同：0
> 
> 时间：2012-09-04T15:38:34.013
> 
> 标签：javascript, html, css, internet-explorer

我们正在尝试向很久以前制作的旧网站添加 cookie 策略。cookie 策略 (javascript) 在 chrome、ff 等中运行良好，但 IE 出现了怪癖。

我检查了生成的 html 和.. 哦，我的。

它看起来像：

```
html
head
/head
html
body
head
/head
/html
/body
html 
```

看图，丑 构建时，它们包含单独的 .shtml 文件，所有这些文件都包含它们自己的 html、head 等。

文档类型上方没有任何内容，因此我已将其作为问题删除。文档类型是：

```
<!doctype HTML PUBLIC "-//w3c//DTD HTML 4.01 Transitional//EN"> 
```

[jsfiddle](http://jsfiddle.net/bLDNK/)来自索引页面的 html，而不是用于演示，如果您想查看是（代码）的恶魔，它就在那里。

那么，我要问的问题是，什么可能导致怪癖模式启动？是否有“黑客”来防止它？

当我将它明确显示为 ie7+ 时它很好，所以作为作弊我们可以将它设置为不去怪癖吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:49:47.600

一般来说，quirks 模式在没有正确的 DOCTYPE 声明时打开，在有 DOCTYPE 定义时关闭。但是，无效的 HTML（相对于所选 DOCTYPE）也可能导致浏览器切换到怪癖模式。

# linux - 启动netcat服务器

> ID：12266898
> 
> 赞同：1
> 
> 时间：2012-09-04T15:38:43.763
> 
> 标签：linux, netcat

我不能像在教程中看到的那样简单地启动 netcat 进行监听：

```
nc -l -p 11457 
```

我究竟做错了什么？它让我失去了帮助：

```
usage: nc [-46CDdhklnrStUuvz] [-I length] [-i interval] [-O length]
  [-P proxy_username] [-p source_port] [-s source] [-T ToS]
  [-V rtable] [-w timeout] [-X proxy_protocol]
  [-x proxy_address[:port]] [destination] [port] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:43:27.423

假设您正在运行 Ubuntu，请下载 netcat-traditional 软件包。该命令将是`sudo apt-get install netcat-traditional`

对于其他 Linux 版本，请查看最新版本的 sourceforge 页面：

*   [http://sourceforge.net/projects/netcat/files/netcat/0.7.1/](http://sourceforge.net/projects/netcat/files/netcat/0.7.1/)
*   [http://nc110.sourceforge.net/](http://nc110.sourceforge.net/)

显然有多个版本。`netcat-openbsd`默认安装，不支持与传统版本相同的开关。奇怪的问题，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T11:52:06.473

只需省略`-l`标志，它应该可以工作。您使用的是不同版本的 netcat。

有`netcat-openbsd`和`netcat-traditional`。这些教程可能正在使用 netcat-openbsd，因此如果您愿意，请安装：

```
apt-get remove netcat-traditional
apt-get install netcat-openbsd 
```

# android - onMeasure 自定义视图说明

> ID：12266899
> 
> 赞同：337
> 
> 时间：2012-09-04T15:38:44.850
> 
> 标签：android, view

我试图做自定义组件。我扩展`View`了课程并在`onDraw`覆盖的方法中进行了一些绘图。为什么我需要覆盖`onMeasure`？如果我没有，一切看起来都是正确的。有人可以解释一下吗？我应该如何编写我的`onMeasure`方法？我看过几个教程，但每个教程都有点不同。有时他们`super.onMeasure`在最后调用，有时他们使用`setMeasuredDimension`而不调用它。区别在哪里？

毕竟我想使用几个完全相同的组件。我将这些组件添加到我的`XML`文件中，但我不知道它们应该有多大。我想稍后在自定义组件类中设置它的位置和大小（为什么我需要`onMeasure`在`onDraw`我绘制它时设置大小，也可以工作）。我到底什么时候需要这样做？

* * *

## 回答 #1

> 赞同：773
> 
> 时间：2012-09-04T15:58:20.277

`onMeasure()`您是否有机会告诉 Android 您希望自定义视图依赖于父级提供的布局约束有多大？这也是您的自定义视图有机会了解这些布局约束是什么（如果您想在某种`match_parent`情况下表现得不同`wrap_content`）。这些约束被打包到`MeasureSpec`传递给方法的值中。以下是众数值的粗略相关性：

*   **EXACTLY**表示`layout_width`or`layout_height`值已设置为特定值。你可能应该把你的视图设为这个大小。这也可以在`match_parent`使用时触发，以将大小精确设置为父视图（这取决于框架中的布局）。
*   **AT_MOST**通常意味着`layout_width`or`layout_height`值被设置为`match_parent`或`wrap_content`需要最大尺寸的地方（这取决于框架中的布局），并且父维度的大小是该值。你不应该比这个尺寸大。
*   **UNSPECIFIED**通常意味着`layout_width`or`layout_height`值被设置为`wrap_content`没有限制。你可以是任何你想要的尺寸。一些布局还使用此回调来确定您想要的尺寸，然后再确定在第二次测量请求中实际再次传递给您的规格。

存在的合同`onMeasure()`是`setMeasuredDimension()` **必须**在最后以您希望视图的大小调用。所有框架实现都会调用此方法，包括在 中找到的默认实现`View`，这就是为什么`super`如果适合您的用例，则可以安全地调用此方法。

当然，因为框架确实应用了默认实现，所以您可能没有必要重写此方法，但是如果您不这样做，并且如果您布置了您的两个方向的自定义视图`wrap_content`，您的视图可能根本不会显示，因为框架不知道它有多大！

通常，如果您正在覆盖`View`而不是另一个现有的小部件，那么提供一个实现可能是一个好主意，即使它像这样简单：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    int desiredWidth = 100;
    int desiredHeight = 100;

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    int width;
    int height;

    //Measure Width
    if (widthMode == MeasureSpec.EXACTLY) {
        //Must be this size
        width = widthSize;
    } else if (widthMode == MeasureSpec.AT_MOST) {
        //Can't be bigger than...
        width = Math.min(desiredWidth, widthSize);
    } else {
        //Be whatever you want
        width = desiredWidth;
    }

    //Measure Height
    if (heightMode == MeasureSpec.EXACTLY) {
        //Must be this size
        height = heightSize;
    } else if (heightMode == MeasureSpec.AT_MOST) {
        //Can't be bigger than...
        height = Math.min(desiredHeight, heightSize);
    } else {
        //Be whatever you want
        height = desiredHeight;
    }

    //MUST CALL THIS
    setMeasuredDimension(width, height);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-30T07:28:42.903

实际上，您的答案并不完整，因为这些值还取决于包装容器。在相对或线性布局的情况下，值的行为如下：

*   **EXACTLY** match_parent 是 EXACTLY + 父级的大小
*   **AT_MOST** wrap_content 产生一个 AT_MOST MeasureSpec
*   **未指定**从未触发

在水平滚动视图的情况下，您的代码将起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-28T12:22:05.037

如果您不需要更改 onMeasure 的某些内容 - 您绝对不需要覆盖它。

Devunwired 代码（此处选择和投票最多的答案）与 SDK 实现已经为您所做的几乎相同（我检查过 - 自 2009 年以来它已经这样做了）。

[您可以在此处](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/view/View.java)查看 onMeasure 方法：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),
            getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));
}

public static int getDefaultSize(int size, int measureSpec) {
    int result = size;
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    switch (specMode) {
    case MeasureSpec.UNSPECIFIED:
        result = size;
        break;
    case MeasureSpec.AT_MOST:
    case MeasureSpec.EXACTLY:
        result = specSize;
        break;
    }
    return result;
} 
```

用完全相同的代码替换覆盖 SDK 代码是没有意义的。

这个[官方文档](https://developer.android.com/guide/topics/ui/custom-components#extendondrawandonmeasure)声称“默认的 onMeasure() 将始终设置为 100x100 的大小” - 是错误的。

# android - 应用程序可以在一台平板电脑上崩溃而不是在所有其他平板电脑上崩溃吗？

> ID：12266905
> 
> 赞同：1
> 
> 时间：2012-09-04T15:38:57.943
> 
> 标签：android, crash, galaxy-tab

我制作了一个应用程序并将其发送给我的客户。他有三星 Galaxy 10 英寸平板电脑。他告诉我，每次他想创建特定条目时，应用程序都会崩溃。因此，它看起来像逻辑错误，而不是显示错误。

我已经在各种手机和 480x800 平板电脑上检查了该应用程序，但没有崩溃。他一直说存在错误，并且每次他重复特殊步骤时应用程序都会崩溃。

我无法在任何移动或平板设备上复制此错误（我没有 Galaxy 10 英寸标签）。我也试过三星的7英寸模拟器，但没有发生崩溃。

崩溃是否可能只发生在 Galaxy 10 英寸平板电脑上？除了购买真正的 10 英寸设备外，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:41:59.607

我确定这是可能的...

您可以查看[acra](http://code.google.com/p/acra/)以获取一些崩溃报告，至少异常的堆栈跟踪会告诉您有关错误的更多信息...

# iphone - 如何在不显示挂起的情况下下载东西？

> ID：12266906
> 
> 赞同：0
> 
> 时间：2012-09-04T15:38:58.850
> 
> 标签：iphone, objective-c, xcode, download

好的。所以我正在创建这个应用程序，除了一件事之外，我对它真的很满意。它使用了大量的互联网数据库检查等，每次执行此操作时都会挂起，直到完成，破坏了界面的流畅性。有没有办法避免这种情况？当您单击按钮或有时只是由于 NSTimer 的结果时，会发生下载内容。我希望用户能够流畅地通过界面，并且应用程序能够在信息到达那里时更新信息。有没有办法做到这一点？

编辑 - 当前同步代码：这是下载 CSV 文件：

```
NSString *link=[[NSString alloc] initWithFormat:@"http://d.yimg.com/autoc.finance.yahoo.com/autoc?query=%@&callback=YAHOO.Finance.SymbolSuggest.ssCallback",timer.userInfo];
NSURL *url=[[NSURL alloc] initWithString:link];
NSData *dl=[[NSData alloc] initWithContentsOfURL:url];
NSString *str = [[NSString alloc] initWithData:dl encoding:NSUTF8StringEncoding]; 
```

这是将 png 文件下载到 webView 中：

```
NSString *link=[[NSString alloc] initWithFormat:@"http://chart.finance.yahoo.com/z?s=%@&t=GOOG&q=m",self.Input.text];
url=[[NSURL alloc] initWithString:link];
[self.graph loadRequest:[NSURLRequest requestWithURL:url]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:41:10.187

听起来您正在发出同步请求。你不应该在主线程上这样做。您最好的选择可能是切换到异步请求。您可以在后台线程上发出同步请求，但在大多数情况下这更加复杂且不必要。

# objective-c - UIViewController 可见回调

> ID：12266909
> 
> 赞同：3
> 
> 时间：2012-09-04T15:39:20.433
> 
> 标签：objective-c, ios, ios5, uiviewcontroller, ios4

我正在开发一个 iOS 应用程序，当我有互联网连接时需要做一些事情，而当我没有互联网连接时需要做一些事情。如果我没有在某个时候，我会向用户显示一条消息，让我给我互联网并回来。问题是如何检测以下情况：

*   用户按两次主页按钮，进入多任务，设置并连接到互联网
*   用户返回我的应用程序的多任务处理，但没有按任何内容

我知道我会收到 AppDelegate 的回调：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
- (void) applicationDidBecomeActive:(UIApplication *)application 
```

但是代码（它不是由我启动的）非常大，如果有任何替代方案，我不想在那里处理 UIViewController 需要的东西。

我的 UIViewController 的 - (void)viewDidAppear:(BOOL)animated 当用户回来时它不会被调用。

![截屏](../Images/fefc30fe66747537d131849ce1216782.png)

断点肯定没有命中！

任何可用的想法，除了 AppDelegate 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T15:45:44.753

`applicationDidEnterBackground`您可以使用通知中心在视图控制器中收听：

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                      selector: @selector(handleEnteredBackground:) 
                                      name: UIApplicationDidEnterBackgroundNotification
                                      object: nil]; 
```

在`viewDidLoad`. 同样对于`applicationDidBecomeActive`.

不要忘记将自己移除为`viewDidUnload`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:45:54.020

应用程序委托是处理应用程序状态更改的正确位置，但正因为如此，并不意味着您必须将应用程序状态更改触发的所有逻辑都放在那里。

把逻辑放在它所属的地方。如果是网络代码，它不在应用程序委托中，也不在视图控制器中，它在一个单独的类中。然后研究将应用程序的不同部分联系在一起的方法。在大多数情况下，通知、KVO 和共享实例模式都是不错的方法。

# php - 循环和小时 php

> ID：12266911
> 
> 赞同：0
> 
> 时间：2012-09-04T15:39:29.077
> 
> 标签：php, loops

所以我暂时得到了这个脚本：

```
<select class="n-select" name="heure-event" id="heure-event">
    <option selected="selected"></option>
    <?php
        for ( $heures = 0 ; $heures <= 23 ; $heures++ ){
            for ( $minutes = 0 ; $minutes <= 45 ; $minutes += 15 ){ 
    ?>
    <option value="<?php echo $heures.':'.$minutes;?>:00">
        <?php
            echo $heures.':'.$minutes;
        ?>
    </option>   
    <?php
            }
        }
    ?>                    
</select> 
```

它工作得很好，但小问题：1:15、1:0 等。

我想要：01:15 和 1:00，

一些身体可以帮助我吗？我可能需要检查是否`$i`然后`< 10`添加`'0.$i'`或类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:43:02.727

利用[`strftime`](http://php.net/manual/en/function.strftime.php)

```
<?php

$hour = 1;
$minute = 9;

echo strftime('%H:%M', mktime($hour, $minute)); // 01:09 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T15:43:46.243

那只是显示问题。不要存储“格式化”数据，尤其是数字数据。

所以...对于值，存储 1:15，但显示 01:15，通过

```
value="<?php echo "$heure:$minutes" ?>"><?php echo sprintf('%02d:%02d', $heures, $minutes) ?></option> 
```

[sprintf()](http://php.net/sprintf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:58:51.867

```
 <option value="<?php echo sprintf('%02d:%02d', $heures, $minutes) ?>:00"><?php echo sprintf('%02d:%02d', $heures, $minutes) ?></option> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-04T15:43:16.487

```
$days = array('' => '');
for ($i = 1; $i <= 31; $i++)
{
    $days[$i] = $i;
}

$months = array('' => '');
for ($i = 1; $i <= 12; $i++)
{
    $months[$i] = $i;
}

$hours = array('' => '');
for ($i = 9; $i <= 18; $i++)
{
    $hours[$i] = sprintf('%02d', $i);
}

$mins = array('' => '');
for ($i = 0; $i <= 45; $i += 15)
{
    $mins[$i] = sprintf('%02d', $i);
}

$years = array(2012 => 2012, 2013 => 2013); 
```

编辑：糟糕，完全误解了这个问题，道歉。只需使用`sprintf`正确格式化数字：

```
$heures = sprintf('%02d', $heures);
$minutes= sprintf('%02d', $minutes);
<option value="<?php echo $heures.':'.$minutes;?>:00"><?php echo $heures.':'.$minutes;?></option> 
```

# java - play - 将全局变量添加到自定义标签

> ID：12266918
> 
> 赞同：0
> 
> 时间：2012-09-04T15:40:00.937
> 
> 标签：java, playframework, playframework-1.x

我有一个代表 HTML 的字符串（通过服务器端请求动态获得）。在此 HTML 中，有一个自定义播放标签。例如：

```
<html><body><div>#{myTag /}</div></body></html> 
```

现在，我想将一个变量传递给这个标签：

```
Template playTemplate = TemplateLoader.loadString(myHtml); // the HTML above
playTemplate.compile();

SomeObject myObject = SomeObject.find("name", "test").first();
Map<String,Object> args = new HashMap<String, Object>();
args.put("myObject", myObject);
String result = playTemplate.render(args); 
```

在我的自定义“myTag.tag”中，代码​​如下所示：

```
<p>
    Hello world: ${myObject.name}
</p> 
```

但我收到一个错误：

```
Exception raised was NullPointerException : Cannot get property 'name' on null object. 
```

对象不为空。当我在 HTML 字符串中替换为时，一切正常`#{myTag /}`！`${myObject.name}`如何将对象传递给自定义标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:36:37.433

你的模板应该是

```
<html><body><div>#{myTag obj: myObject/}</div></body></html> 
```

你的标签应该是

```
<p>Hello world: ${_obj.name}</p> 
```

本质上，您需要将渲染参数从模板显式传递到标签。

[Rythm 模板引擎](http://playframework.org/modules/rythm)支持隐式传递渲染参数到标记。它带来了 groovy 模板中没有的许多其他功能。[在http://rythmengine.com](http://rythmengine.com)查看完整的演示

# java - 以升序且不重复的方式打印除 2、3 或 5 之外没有素因数的正整数列表

> ID：12266920
> 
> 赞同：0
> 
> 时间：2012-09-04T15:40:21.983
> 
> 标签：java, algorithm, hamming-numbers

这是我的一门课程作业中的编程问题。我已经有几年没有编程了，而且我一开始也不是很好。我目前正在阅读教程以恢复速度，但这需要一些时间。如果你们能帮我解决这个问题，我将不胜感激。

约束：

这个序列的每一项都是一个形式为 的正整数，对于所有具有 `2^i*3^j*5^k`的非负整数`i, j, and k``i + j + k >= 1.`

不能使用数组。解决这个问题的算法必须涉及列表的重复创建和合并。具体来说`5 lists; a final list, temp list, and three term lists`。

“最终列表通过与当前临时列表合并而增长。临时列表又被三个术语列表的合并所取代。新术语列表是通过将新临时列表乘以`2, 3, and 5 respectively`“

所需的顺序如下：`2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, . . .`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:36:23.740

正如您在问题中所解释的那样，您可能会递归地执行您的算法。

在第 n 步：

最终列表将代表集合`F(n) = {m | m = 2^i*3^j*5^k, 1<=i+j+k<=n}`

临时列表将代表集合`T(n) = {m | m = 2^i*3^j*5^k, i+j+k=n}`

然后，“L2”术语列表将是`L2(n) = 2*T(n-1)`

“L3”术语列表将是`L3(n) = 3*T(n-1)`

“L5”术语列表将是`L5(n) = 5*T(n-1)`

为了得到 T，`T(n) = merge(L2(n), L3(n), L5(n))`

为了得到 F，`F(n) = merge(F(n-1), T(n))`

一旦你有了这个，你必须实现一个函数来合并 2 个列表。在 main 函数中，您只需将它们翻译成 Java。

您还可以使列表始终排序，以便合并简单高效！在 java 中，我认为您可以使用 LinkedList 或 ArrayList，两者都可以正常工作。

毕竟，这是你的功课。

# sql - 每两列（一张表）的组合得到一个随机记录

> ID：12266923
> 
> 赞同：1
> 
> 时间：2012-09-04T15:40:27.070
> 
> 标签：sql, oracle, select, random

我有这张桌子

rss_user。您会看到帐户名称、应用程序名称和应用程序类型。

带有 RSS_USER_NAME RSS_NAME RSS_TYPE

示例数据

```
tom@gmail.com   webapp4     webapps
tom@gmail.com   webapp6     webapps
tom@gmail.com   mswin3      windows
tom@gmail.com   mswin2      windows
sakur@gmail.com mswin2      windows
sakur@gmail.com webapp6     webapps 
```

我希望从 rss_name 和 rss_type 的组合中获得一个随机帐户。rss_name 和 rss_type 的每个组合都应该有一个随机帐户。

当前代码。完全没用:-(

```
SELECT *
  FROM (  SELECT    'SYNC rss_user WITH rss_user_name = "'
             || RSS_USER_NAME
             || '" , rss_name = "'
             || RSS_NAME
             || '" , rss_type = "'
             || RSS_TYPE
             || '";'
        FROM rss_user
    ORDER BY DBMS_RANDOM.VALUE)
 WHERE ROWNUM = 1 
```

结果：

```
SYNC rss_user WITH rss_user_name = "tom@gmail.com" , rss_name = "webapp4" , rss_type = "webapps"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:51:20.300

这是一种方法：

```
SELECT *
  FROM (SELECT    'SYNC rss_user WITH rss_user_name = "'
             || RSS_USER_NAME
             || '" , rss_name = "'
             || RSS_NAME
             || '" , rss_type = "'
             || RSS_TYPE
             || '";',
                 seqnum = row_number() over (partition by rss_name, rss_type order by dbms_random.value)
         FROM rss_user
        ) t
 WHERE seqnum = 1 
```

也就是说，使用 row_number() 和 dbms_random.value 来选择一个随机行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:46:40.973

[这](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/sql-server-set-based-random-numbers)是关于如何逐行生成随机数的精彩讨论。一旦你了解了如何做到这一点，你就可以这样做（伪代码）：

```
select rss_name, rss_type, max(rand) from
(select rss_name, rss_type, <random number> as rand from rss_user) a
group by rss_name, rss_type 
```

# c# - 如何读取 |DataDirectory| 的当前路径 从配置设置

> ID：12266924
> 
> 赞同：5
> 
> 时间：2012-09-04T15:40:30.573
> 
> 标签：c#, sql-server-ce, datadirectory

我正在编写一个程序，要求用户在应用程序启动时选择活动数据库。**我有一个 Windows 窗体，它将列出存储在ApplicationData**子文件夹中的数据库，专门用于存储数据库文件。但是，当我创建一个新数据库时，我需要复制模板数据库，但无法确定它默认存储在哪里。

我试过了：

```
dpath = ConfigurationManager.AppSettings["DataDirectory"]; 
```

不过，我似乎总是得到一个空值作为回报。有一次我放弃了，并认为我可以将**DataDirectory**设置为我选择的文件夹，但似乎我在执行程序时这样做太晚了，无法使其生效。

```
newdpath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\MyAppFolder"; 
```

我将不胜感激有关如何找到数据库位置的任何建议，或者自己设置它足够早以影响程序操作。

编辑：

对于第二部分，我发现我在执行**TableAdapter.Fill**命令后尝试修改连接字符串，从而解释了它打开默认数据库的原因。这个谜团已经解开了。然而，第一部分仍然是一个未知数。

谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-04T17:42:02.457

`|DataDirectory|`不是来自配置设置；你混合了三种不同的东西：

```
ConfigurationManager.AppSettings["DataDirectory"] 
```

这来自配置设置；您必须创建一个 .config 文件并将其放入项目中。此特定设置是元素中带有键`"DataDirectory"`的`AppSettings`元素的值。除非您在 .config 文件中放置一个，否则它不存在。通常，这是您放置永远不会更改的配置或启动数据的地方。您不应将文件路径放在这里，因为它们在用户安装数据库的机器上可能不同。

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

这是当前用户的漫游应用程序数据文件夹的路径，由安装您的应用程序的操作系统定义。您无法更改它，它是由操作系统定义的。您可以确定此文件夹是用户可写的，如果用户卸载您的应用程序不会被删除，并且如果用户漫游或从另一台机器登录时可用。这通常是您想要放置可编辑应用程序数据的位置。

```
SqlConnection("Data Source=|DataDirectory|DatabaseFileName.sdf;...") 
```

这是 ADO.NET 连接的连接字符串。ADO.NET 对竖线进行了特殊处理，它在竖线之间查找与键名匹配的 AppDomain 数据。您可以通过以下方式获得相同的数据：

```
AppDomain.CurrentDomain.GetData("DataDirectory") 
```

那么 的值是`DataDirectory`什么？它由部署您的可执行文件的任何方式完成：

*   .MSI 安装程序将其定义为应用程序的目标文件夹。
*   ClickOnce 在您的项目中定义了一个特殊的数据文件夹。
*   Web 应用程序使用 App_Data 文件夹。
*   Visual Studio 调试器使用调试文件夹。

请注意，.MSI 安装程序可以允许用户更改 DataDirectory；这就是为什么您永远不应该硬编码或更改的原因`DataDirectory`，如果您这样做，就无法找到您的应用程序数据的部署位置。您通常将该`DataDirectory`文件夹用于与可执行文件一起部署的只读二进制数据。

如果您需要写入与您的可执行文件一起部署的数据，您应该首先将其复制到您知道用户将能够写入的地方，例如 to `Environment.SpecialFolder.ApplicationData`，然后写入副本。不仅`DataDirectory`不一定是用户可写的，它是部署的一部分，而不是用户数据的一部分；如果您修复或卸载可执行文件，则会`DataDirectory`重新安装或删除。当您删除他们的数据时，用户不喜欢它，因此不要将其保存到`DataDirectory`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-04T16:37:57.037

在使用 ConnectionString、TableAdapter 等创建所谓的**DataDirectory**之前放置这一行。

我刚刚通过将它放在 TableAdapter.Fill(DataSet.DataTable); 之前成功地进行了测试。

```
AppDomain.CurrentDomain.SetData("DataDirectory", @"Full path to your data folder"); 
```

我找不到**DataDirectory**的位置和内容，因为它不存在，因此 MSSQL 将采用 AppDomain.CurrentDomain 的**BaseDirectory**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-11T05:46:30.123

`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`代码每次在开发中都会返回一个空值。|数据目录| 安装程序时设置。

构建项目，然后安装并测试它。

我使用那行代码在运行时压缩已安装应用程序中的数据库。

该代码可以设置为变量，如下所示...

```
Dim Beer as string
Beer = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

这将返回 INSTALLED |DataDirectory| 的文件夹路径。使用 CStr 和另一个变量添加数据库名称...

```
Dim MyPathA As String = CStr(Beer & "\Workout.mdb")
Dim MyPathB As String = CStr(Beer & "\BackupWorkout.mdb")

Dim JRO As JRO.JetEngine
JRO.CompactDatabase(CStr("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & MyPathA), _
CStr("Provider=Microsoft.Jet.OLEDB.4.0;Data Source= " & MyPathB & ":Jet OLEDB:Engine Type=5"))

On error Errorhandler, 
Errothandler
Kill(MyPathB) 
```

第一行是您的数据库，第二行将其重命名为 Backup 并将其压缩在同一目录中。如果那里有备份，它将触发错误，这将删除备份。

之后，说这是按钮单击。再次运行它。就在杀戮线之后，

```
Me.Buttonx.PerformClick() 
```

这就是在已安装的 ClickOnce 应用程序中压缩数据库的方法。使用 |数据目录| 在代码中会抛出非法字符错误...

# python - 通过本地 http 端口上的 JSON-RPC 访问 Jira 4.4.5

> ID：12266925
> 
> 赞同：2
> 
> 时间：2012-09-04T15:40:32.420
> 
> 标签：python, jira, json-rpc

我正在尝试使用它的 JSON-RPC 服务访问本地 JIRA 4.4.5 安装。因此，我使用 jsonrpclib 编写了一个 python 脚本并尝试按照[https://developer.atlassian.com/display/JIRADEV/JIRA+JSON-RPC+Overview](https://developer.atlassian.com/display/JIRADEV/JIRA+JSON-RPC+Overview)`http://localhost:8080/jira/rpc/json-rpc/jirasoapservice-v2`中的描述连接到。尝试从我的 python 脚本连接以及在浏览器中打开此 URL 时出现 404 错误。

```
import jsonrpclib
server = jsonrpclib.Server("http://localhost:8080/jira/rpc/json-rpc/jirasoapservice-v2")
reply = server.someMethod( param1, ... ) 
```

调用`someMethod`失败并出现以下错误：

```
xmlrpclib.ProtocolError: <ProtocolError for localhost:8080/jira/rpc/json-rpc/jirasoapservice-v2: 404 Not Found> 
```

有没有人像我一样成功地尝试过这个？我是否需要以某种方式通过 HTTPS 而不是 HTTP 进行访问？我将如何配置 jira 这样做？

顺便说一句：Jira 的 json-rpc 插件已启用。

# canonicalization - 在 xades4j 中使用 ALGO_ID_C14N11_OMIT_COMMENTS

> ID：12266928
> 
> 赞同：0
> 
> 时间：2012-09-04T15:40:48.343
> 
> 标签：canonicalization, xmlsec, xades4j

我需要使用 ALGO_ID_C14N11_OMIT_COMMENTS 和 ALGO_ID_C14N11_WITH_COMMENTS 规范化来签署我的文档。你能告诉我我应该对 xades4j 进行什么更改以允许这样做吗（只需要 xades_bes 和 xades_t，现在还没有验证）。

我应该像已经存在的那样在 xades4j.algorithms 中创建一个包装类吗？接着？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:09:41.027

您可以创建派生类或使用[GenericAlgorithm](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/algorithms/GenericAlgorithm.html)类并传递算法 uri。

然后，您需要在用于创建签名者的签名配置文件上[配置算法提供程序。](https://code.google.com/p/xades4j/wiki/ChangingAlgorithms)您可以定义一个新的提供者，或者扩展默认值并覆盖所需的方法。要在签名配置文件上注册提供者，请使用[withAlgorithmsProviderEx 方法](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/production/XadesSigningProfile.html)。

# css - 使 div 区域透明，而不是图像所在的区域？

> ID：12266929
> 
> 赞同：0
> 
> 时间：2012-09-04T15:40:54.227
> 
> 标签：css, styles, stylesheet

我有一个带有 2-3 个图标的 Div。图标在大图像 div 的顶部水平对齐。

我希望底部图像在图标之间的填充区域中可见。哪个属性可以帮助我实现这个功能？任何指针??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:43:53.353

`div`用这样的东西给你的样式：

```
background: transparent, ...your other images...; 
```

假设您的图标显示为`background-images`，如果没有，只需指定`background: transparent;`您的`div`.

# java - 自定义字段在模拟器上有效，但在实际设备上无效

> ID：12266933
> 
> 赞同：0
> 
> 时间：2012-09-04T15:41:08.877
> 
> 标签：java, blackberry, blackberry-simulator, custom-fields

我已经实现了几个自定义 BlackBerry 字段，它们几乎彼此相似，只是它们绘制不同的位图。

我注意到当我在 BlackBerry 模拟器上运行我的应用程序时它们可以正常工作，但是当相同的应用程序安装在实际的 BlackBerry 设备上时它们不能正常工作。

调试没有给我任何信息来解决这个问题。字段只是不显示。

我该如何解决这个问题？

# javascript - 从数组创建 DOM 节点

> ID：12266936
> 
> 赞同：0
> 
> 时间：2012-09-04T15:41:18.593
> 
> 标签：javascript, jquery, arrays, object, dom-node

> **注意：**这是[另一个问题](https://stackoverflow.com/questions/12222477/jquery-plugin-error-with-wrap-and-wrapall)的延续，我认为这是两个需要解决的独立问题。我目前也不确定如何准确地表达这个问题，所以我会尽力而为，当我更清楚时，我会重新表达我的问题以供将来参考。

我正在编写两个基本的 jQuery 插件，`$.fn.query`它们`$.fn.build`分别对数组进行排序，并创建要插入到文档中的 html 代码。我目前正在使用将用于显示视频的 Vimeo 视频 ID 对其进行测试。

`$.fn.build`有三个部分。首先它用单独的容器包装每个数组项，将它们构建成行（*问题区域*），然后最后将所有东西包装在一个容器中。（每个部分都是可选的）。

具体来说，问题来自这一行：`$(tmp).add(newRow);`虽然它是有效的 javascript。

```
if ( options.splitBy !== undefined && options.wrapRow !== undefined ) {
    var tmp = $([]),
        newRow = function(i) {
            $(build.splice( i, i + options.splitBy )).wrapAll( options.wrapRow ).parent();
        };

    for (var i = 0, l = build.length, a = options.splitBy; i < l; i += a) {
        $(tmp).add(newRow);
    }

    build = tmp;
    console.log(build);
} 
```

> 见：http: [//jsbin.com/upatus/2/edit](http://jsbin.com/upatus/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:46:57.547

我很确定您想使用该功能，而不是添加该功能本身。此外，您将希望`tmp`始终使用相同的对象，而不是将其包装到新的 jQuery 实例中而不是添加到原始实例中。尝试

```
tmp.add(newRow(i)); 
```

顺便说一句：如果你想构建一个数组，你应该使用

```
var tmp = []; 
```

和

```
tmp.push(…); 
```

* * *

现在我查看了另一个问题的代码。两个答案都是正确的，并且包含一些有效点：

*   `splice`是 jQuery 原型上的 Array 函数，并返回一个数组。（你现在已经修复了这个）
*   您的`query`方法返回一个数组，但应该返回一个用于链接的 jQuery 实例
*   您的`build`变量未初始化，但已使用

您应该真正选择是否要在函数内部使用数组或 jQuery 对象，而不是混合使用它们。

顺便说一句，您应该将函数重命名为更具描述性的名称。“构建”和“查询”非常模糊，可能与其他插件发生冲突。

# javascript - 保存 GET-Values

> ID：12266937
> 
> 赞同：1
> 
> 时间：2012-09-04T15:41:19.730
> 
> 标签：javascript, location-href

我有这样的功能：

```
 function SetPageShow (obj)
    {
        window.location.href="?CMD=PAGEROWS&PARA="+obj.options[obj.selectedIndex].text;
    } 
```

它工作正常，直到我有一个带有另一个 GET 值的页面，比如

```
http://protectneu/main.php?site=mitarb&liz=260 
```

. 然后当我调用函数 SetPageShow 时，URL 将是

```
http://protectneu/main.php?CMD=PAGEROWS&PARA=25 
```

并且其他值（mitarb 和 liz）正在丢失。有没有办法保存它们并添加新参数。我需要的结果是：

```
http://protectneu/main.php?site=mitarb&liz=260&CMD=PAGEROWS&PARA=25 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:53:03.690

```
if (window.location.search)  
  return window.location.href + "&CMD=PAGEROWS&PARA="+obj.options[obj.selectedIndex].text;  
else 
  return window.location.href + "?CMD=PAGEROWS&PARA="+obj.options[obj.selectedIndex].text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:47:27.997

如果您想保留这样的信息，请考虑使用 PHP 的[会话。](http://php.net/manual/en/features.sessions.php)

```
<?php
session_start();
$_SESSION['foo'] = $bar;
?> 
```

`session_start()`然后您可以通过在页面开头调用来参考其他页面上的此信息。

```
<?php
session_start();
$bar = $_SESSION['foo'];
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:00:20.743

在 PHP 端，您需要去除将通过 JavaScript 发送的参数，然后使用其他参数构建一个字符串，如下所示：

```
<?php
$params = $_GET;
unset($params['CMD']);
unset($params['PARA']);

?>
<script>
function SetPageShow(obj)
{
    var params = '<?php echo http_build_query($params); ?>';

    window.location.href = '?' + (params ? params + '&' : '') + "CMD=PAGEROWS&PARA=" + encodeURIComponent(obj.options[obj.selectedIndex].text);
} 
```

顺便说一句，我还添加`encodeURIComponent()`了 JavaScript 以执行所选值的正确转义。

# java - 需要帮助完成这两个活动的代码？

> ID：12266939
> 
> 赞同：0
> 
> 时间：2012-09-04T15:41:42.340
> 
> 标签：java, android, android-intent

我正在开发一个 android 应用程序，该应用程序使用点击监听器启动两个活动，我的代码中的所有内容都检查得很好，除了`public void onClick(View v)`开始的地方我从该行开始有多个错误并且我无法运行代码？我很感激任何帮助，因为我对此很陌生。我的代码如下

```
public class Safaricom extends Activity {

      @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.safaricom);

          Button button1 = (Button)findViewById(R.id.button1);
          Button button2 = (Button)findViewById(R.id.button2);

          button1.setOnClickListener(buttonClickListener);
          button2.setOnClickListener(buttonClickListener);
      }

      private OnClickListener buttonClickListener = new View.OnClickListener() {

           @Override
             public void onClick(View v) {
                  Intent intent = null;
                  switch(v.getId()){
                  case R.id.button1: 
                       intent = new Intent(this, Second.class);
                       break;
                  case R.id.button2:
                       intent = new Intent(this, SignUp.class);
                       break;
                  }
                  if (intent != null)
                      this.startActivity(intent);
             }     
      }; 
} 
```

错误有两点。首先是它说`public void on click view`的（错误是 - `Multiple Markers at this line - implements android.view.View.OnClickListener.onClick- The method onClick(View) of type new View.OnClickListener(){} must override a superclass`）

第二个地方`this.startActivity(intent);`（错误是 -T `he method startActivity(Intent) is undefined for the type new View.OnClickListener(){}`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:48:44.877

而不是`this`使用`v.getContext()`或`YOUR_ACTIVITY.this`

实际上，如果您仔细阅读文档，您就会知道`Intent`参数包含`Activity`，所以当您使用`this`它时，意味着您提供了一个类型的参数`new View.OnClickListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:47:29.690

好吧，我可以立即看到几个错误。使其更清晰，因为仅通过查看代码和学习显然并不清楚。我在每个新的 Intent 语句中添加了 Safaricom.this。这是因为 Intent 构造函数需要一个 Context 作为第一个参数，而 OnClickListener 不是一个 Context，您需要获取作为上下文的封闭 Activity。另一个编辑，我错过了，startActivity 还需要预先添加 Safaricom。

```
public class Safaricom extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.safaricom);

      Button button1 = (Button)findViewById(R.id.button1);
      Button button2 = (Button)findViewById(R.id.button2);

      button1.setOnClickListener(buttonClickListener);
      button2.setOnClickListener(buttonClickListener);
  }

  private OnClickListener buttonClickListener = new View.OnClickListener() {

       @Override
         public void onClick(View v) {
              Intent intent = null;
              switch(v.getId()){
              case R.id.button1: 
                   intent = new Intent(Safaricom.this, Second.class);
                   break;
              case R.id.button2:
                   intent = new Intent(Safaricom.this, SignUp.class);
                   break;
              }
              if (intent != null)
                  Safaricom.this.startActivity(intent);
         }     
     };
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:58:32.630

对于第一个错误

```
The Error is - Multiple Markers at this line - implements android.view.View.OnClickListener.onClick- The method onClick(View) of type new View.OnClickListener(){} must override a superclass ) 
```

尝试删除@override

如果这不能消除第二个错误，请让我们知道是否出现了不同的问题。

# c - Enum 如何在 C 上分配内存？

> ID：12266944
> 
> 赞同：5
> 
> 时间：2012-09-04T15:41:47.640
> 
> 标签：c, assembly, enums, abi

我正在尝试使用 C 和汇编（intelx8086）语言。

我也在使用一个由我的朋友实现的类。它有一个

```
typedef enum data_10 {a=0,b=7,c=10,} data_10_type; 
```

我想按位使用这个类（AKA 在程序集中构造它/销毁它）。我的问题是，“枚举”需要多少内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:47:31.057

尽管它可能因编译器而异，但`enum`通常与`int`. 不过可以肯定的是，您始终可以使用`sizeof( data_10_type );`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:47:10.400

你为什么不打印它？

```
/* C99 */
#include <stdio.h>

typedef enum { a = 0, b = 7, c = 10 } data_10_type;
printf("%zu\n", sizeof(data_10_type)); 
```

枚举器列表中的标识符被声明为具有类型`int`（**C11 §6.7.2.2 枚举说明符**）的常量，因此`sizeof(data_10_type)`通常等于`sizeof(int)`，但这不是必需的！

顺便说一句，如果您想以位为单位，只需使用`CHAR_BIT`常量（定义在 中`<limits.h>`），它表示单个字节中有多少位）。

```
/* C99 */
#include <limits.h>
#include <stdio.h>

typedef enum { a = 0, b = 7, c = 10 } data_10_type;
printf("%zu\n", sizeof(data_10_type) * CHAR_BIT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:47:04.737

枚举根本不占用任何内存。它被编译器理解，并且在编译过程中使用了正确的数字。它是一个 int，其大小取决于您的系统。

# java - 用 org.gwttime.time.LocalDate 覆盖 org.joda.time.LocalDate

> ID：12266945
> 
> 赞同：0
> 
> 时间：2012-09-04T15:41:49.423
> 
> 标签：java, gwt, jodatime

我正在尝试开发一个独立于 GWT 的通用模块，直到它实际用于 GWT 应用程序中。问题是 GWT 不支持 joda 并且我的模块不使用 GWT。

我想要实现的目标（这行不通）：

```
<replace-with class="org.gwttime.time.LocalDate">
    <when-type-is class="org.joda.time.LocalDate" />
</replace-with> 
```

最后的手段是在运行时添加自定义解析和一些智能规则，但我想避免这种情况并在编译时解决这个问题。

有什么方法可以轻松地将 gwttime 指定为 joda 时间的仿真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:33:48.147

我使用`<super-source> .gwt.xml`指令解决了它。

我检查了 gwttime 项目，重命名了所有包和导入声明`org.gwttime.time`，`org.joda.time`然后将一个添加`Emulation.gwt.xml`到 gwttime 文件所在的父源文件夹，其中包含以下内容：

```
<module>
   <super-source/>
</module> 
```

然后包结构与`org.joda.time`.

这样我可以在客户端和服务器端使用相同的导入，并且替换将在编译时发生。

# mysql - 从多个表中选择（mysql）

> ID：12266946
> 
> 赞同：1
> 
> 时间：2012-09-04T15:41:48.703
> 
> 标签：mysql

表格1

```
id | question
1  | who will win the election 
```

表 2

```
id | answers | question id
1  | I will  | 1 
```

表3

```
id | photo | question id
1  | xy.gif| 1 
```

表 4 * 用户既可以提出问题也可以为他人投票

```
id | username
1  | joe 
```

表 5

```
id | vote | question_id | user_id
1  | He   | 1           | 1 
```

什么查询可以让我在一个查询中获得以下信息

*   t1.*（所有问题）
*   t2 所有与问题相关的答案
*   t3 所有与问题相关的照片
*   t4 每个问题的作者用户名
*   t5 对问题的投票（可能有些问题没有登录用户的投票）

*   我的问题是最后一点，获得投票（虽然并非所有问题都有特定登录用户的投票）

这是我的查询的样子：

```
 SELECT 
        poll_questions.id,
        poll_questions.question,
        poll_questions.qmore,
        poll_questions.total_votes,
        poll_questions.active,
        poll_questions.created_at,
        poll_answers.answer,
        poll_answers.votes,
        poll_answers.id AS answer_id,
        poll_photos.photo_name_a,
        vote_history_raw.vote,
        users.username

        FROM poll_questions 

        LEFT JOIN (poll_answers, poll_photos)  
            ON (poll_answers.question_id = poll_questions.id AND
                poll_photos.question_id = poll_questions.id
                )
        LEFT JOIN users ON poll_questions.author = users.id 

        INNER JOIN vote_history_raw ON users.id = vote_history_raw.user_id 

        WHERE poll_questions.active = 1 

        ORDER BY poll_questions.created_at DESC 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:49:49.210

没试过，但是这个有用吗？

```
 SELECT 
    poll_questions.id,
    poll_questions.question,
    poll_questions.qmore,
    poll_questions.total_votes,
    poll_questions.active,
    poll_questions.created_at,
    poll_answers.answer,
    poll_answers.votes,
    poll_answers.id AS answer_id,
    poll_photos.photo_name_a,
    vote_history_raw.vote,
    users.username

    FROM poll_questions 

    LEFT JOIN (poll_answers, poll_photos)  
        ON (poll_answers.question_id = poll_questions.id AND
            poll_photos.question_id = poll_questions.id
            )
    LEFT JOIN users ON poll_questions.author = users.id 

    LEFT JOIN vote_history_raw ON (users.id = vote_history_raw.user_id OR users.id <> vote_history_raw.user_id AND vote_history_raw.user_id IS NOT NULL)

    WHERE poll_questions.active = 1 

    ORDER BY poll_questions.created_at DESC 
```

# jquery - Internet Explorer 错误上的 Sizset sizcache

> ID：12266947
> 
> 赞同：1
> 
> 时间：2012-09-04T15:41:49.767
> 
> 标签：jquery, html, internet-explorer

如果您在 mozilla 或 chrome 上查看它，包装器在屏幕上很好地居中，并且没有 ie9-ie8-ie7 赋予它的“sizset 和 sizcache”属性，我认为它也不以 IE 为中心bug，有人知道这是什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:50:14.220

~~您没有指定任何 Doctype，那么您的页面在 IE 上处于 Quirks 模式。~~

在文件的第一行添加这一行：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

 ~~**编辑 ：**

好吧，我刚刚看到你有一个 HTML5 DOCTYPE，但`<link>`之前有一个标签。将此标签移动到`<head>`部分：

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    (...)
    <link rel="stylesheet" type="text/css" href="http://www.dharanandayoga.com/wp-content/themes/dharananda/admin.css" > 
```~~

# c# - 从 DateTime 中删除 DST

> ID：12266948
> 
> 赞同：5
> 
> 时间：2012-09-04T15:41:49.560
> 
> 标签：c#, c#-4.0, datetime, dst

我看到许多网站（通常是论坛）允许用户通过选择来指定他们的时区偏好：

*   时区
*   是否使用夏令时

据我所知，在进行转换时，.NET 总是将 DST 考虑在内，所以问题是：

### “不使用夏令时”部分如何在 C# 中实现？

在这一点之下，我介绍了我到目前为止所做的事情，但感觉很老套，我想知道是否有更清洁/更好的方法。

首先，为了确保自动应用 DST，我编写了以下测试：

```
[Test]
public void DateTimeConversion_ToLocalTime_HandlesDSTByDefault()
{
    var utcDateInDstInterval = new DateTime(2012, 07, 15, 0, 0, 0, DateTimeKind.Utc);
    var utcDateOutisdeDstInterval = new DateTime(2012, 02, 15, 0, 0, 0, DateTimeKind.Utc);

    var roTimezone = TimeZoneInfo.FindSystemTimeZoneById("GTB Standard Time");

    Assert.AreEqual(3, TimeZoneInfo.ConvertTimeFromUtc(utcDateInDstInterval, roTimezone).Hour);
    Assert.AreEqual(2, TimeZoneInfo.ConvertTimeFromUtc(utcDateOutisdeDstInterval, roTimezone).Hour);
} 
```

该测试通过，表明：

*   当不适用 DST 时（例如在冬季），罗马尼亚时间为 UTC + 2 小时
*   当 DST 应用时（例如在夏季），罗马尼亚时间为 UTC + 3 小时
*   在进行 DateTime 转换时，会自动考虑 DST

接下来，我注意到[`TimeZoneInfo.GetAdjustmentRules()`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.getadjustmentrules%28v=vs.100%29.aspx)返回对象数组的方法，[`AdjustmentRule`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.adjustmentrule%28v=vs.100%29.aspx)并发现如果我撤消这些规则的影响，我可以获得 DST 未受影响的值。

因此，如果`DateTime`对象[受 DST 影响，](http://msdn.microsoft.com/en-us/library/system.datetime.isdaylightsavingtime%28v=vs.100%29.aspx)我编写了以下方法：

```
private DateTime RemoveDSTFromDateTime(DateTime dateTime, TimeZoneInfo timeZoneInfo)
{
    if (!dateTime.IsDaylightSavingTime())
        return dateTime;

    var result = dateTime;

    foreach (var adjustmentRule in timeZoneInfo.GetAdjustmentRules())
        result = result.Subtract(adjustmentRule.DaylightDelta);

    return result;
} 
```

回到最初的 DST/No DST 场景，但这一次强制结果不受 DST 影响：

```
[Test]
public void DateTimeConversion_ToLocalTime_WithoutDST()
{
    var utcDateInDstInterval = new DateTime(2012, 07, 15, 0, 0, 0, DateTimeKind.Utc);
    var utcDateOutisdeDstInterval = new DateTime(2012, 02, 15, 0, 0, 0, DateTimeKind.Utc);

    var roTimezone = TimeZoneInfo.FindSystemTimeZoneById("GTB Standard Time");

    var convertedDateWithDst = TimeZoneInfo.ConvertTimeFromUtc(utcDateInDstInterval, roTimezone);
    var convertedDateWithoutDst = TimeZoneInfo.ConvertTimeFromUtc(utcDateOutisdeDstInterval, roTimezone);

    Assert.AreEqual(2, RemoveDSTFromDateTime(convertedDateWithDst, roTimezone).Hour);
    Assert.AreEqual(2, RemoveDSTFromDateTime(convertedDateWithoutDst, roTimezone).Hour);
} 
```

这个测试也通过了，表明现在 DST 的效果被取消了（我们总是得到 UTC + 2h，不管一年中的什么时间）。

在写下这篇文章时，我得到了另一个似乎可行的想法：不要使用任何`TimeZoneInfo.Convert...()`方法，只需添加`roTimezone.BaseUtcOffset`UTC 日期即可。

谁能指出这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:59:16.907

解析您的问题，您似乎有两个建议的解决方案：

1.  确定 DST 调整并将其从转换后的输出中删除。

2.  采用 UTC`DateTime`并添加UTC，`BaseUtcOffset`因此您始终处理标准时间。

由于您的问题是如何不实施 DST，我想说您自己用选项 2 回答了它。

也就是说，您最初的假设是有缺陷的。许多网站要求时区和 DST 的原因通常是因为他们的时区实现不支持 DST。他们正在做的是让您选择一个基本偏移量并决定您是否希望在一年中的某个时间增加一个小时。他们可能称其为“时区”，但它绝不像 .Net 的`TimeZoneInfo`类或像[Noda Time](http://nodatime.org)这样的库那么健壮。

如果您真的选择“时区”，例如`TimeZoneInfo.GetSystemTimeZones()`（您应该保存`Id`属性并显示`DisplayName`属性），那么您绝对不应该询问用户是否使用 DST。如果用户住在不使用 DST 的地方（例如在亚利桑那州），则已经有一个选择。用户通常很擅长选择正确的选择来获得他们想要的效果，特别是如果他们住在一个有奇怪 DST 规则的地区（如印第安纳州）。

如果您使用 IANA/Olson 样式的时区`"America/New York"`，无论它们是由[Noda Time](http://nodatime.org)还是其他一些实现提供，同样的想法也适用。您应该将 DST 决定委托给图书馆——而不是用户。

将其委托给图书馆的一个非常有效的论点是，这些 DST 规则可以更改，并且在其生命周期中的许多时间点*都发生了更改。*如果您正在编写处理过去信息的任何类型的应用程序或网站，您可能会发现今天有效的内容并不是对过去发生的事情的正确调整。此外，时区世界也有很多奇怪之处，比如澳大利亚，某些地区的时差是 30 分钟而不是一小时。你真的想自己管理吗？可能不是。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T15:56:38.993

我的一个建议是创建一个自定义`TimeZoneInfo`并使用它来生成`DateTime`对象

```
myTimeZoneInfo = TimeZoneInfo.CreateCustomTimeZone(
                 TimeZoneInfo.Local.Id,
                 TimeZoneInfo.Local.BaseUtcOffset,
                 TimeZoneInfo.Local.DisplayName,
                 TimeZoneInfo.Local.StandardName, "", null, true); 
```

关键参数是`true`，即`disableDaylightSavingsTime`。

用法：

```
DateTime noDaylightSavings = TimeZoneInfo.ConvertTimeFromUtc(reading, myTimeZoneInfo); 
```

或者

```
DateTime noDaylightSavings = TimeZoneInfo.ConvertTimeToUtc(reading, myTimeZoneInfo); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T19:38:11.207

我最近这样做是为了在远程计算亚利桑那州的当前时间时删除 DST。就我而言，我在数据库中按邮政编码有一个 DST (y/n) 标志。对于使用上述代码（示例 #2）删除 DST 调整的任何人，您可能需要限定您打算应用的调整的时间范围，因为一些调整存在但已过期（我认为可能是未来日期当变化即将来临）。这是对我有用的示例：

```
private DateTime RemoveDSTFromDateTime(DateTime dateTime, TimeZoneInfo timeZoneInfo)
{
    #region detail...
    //removes daylight savings time adjustment as defined in current year
    int _currYear = DateTime.Now.Year;

    if (!dateTime.IsDaylightSavingTime())
        return dateTime;

    var result = dateTime;

    foreach (var adjustmentRule in timeZoneInfo.GetAdjustmentRules())
    {
        if (adjustmentRule.DateStart.Year <= _currYear && adjustmentRule.DateEnd.Year >= _currYear)
        {
            result = result.Subtract(adjustmentRule.DaylightDelta);
        }
    }

    return result; 
    #endregion
} 
```

# c# - 如何验证客户端服务器应用程序的 DTO

> ID：12266951
> 
> 赞同：3
> 
> 时间：2012-09-04T15:42:00.277
> 
> 标签：c#, web-services, validation, dto

我最近一直在阅读有关 DTO 的大量信息，以前从未使用过它们。我读过的一篇文章谈到了 DTO 不应该只是复制域模型对象，而是每个 DTO 应该针对正在执行的服务操作进行定制。

如果我决定使用 DTO，这让我开始考虑验证，并想知道以下内容是否可以接受？

```
public class Person {
    public Guid Id {get; set;}
    public string Name {get; set;}
    public Address Address {get; set;}
}

public class Address {
    public Guid Id {get; set;}
    public string AddressLine1 {get;set;}
    ...
}

publuc class CreatePersonDTO {
    private string _name;
    private string _addressLine1;

    public string Name {
        get {
             if (_name == null)
                 throw new Exception("Missing");

             return _name;
        }
        set { _name = value; }
    }

    public string AddressLine1 {
        get { return _addressLine1; }
        set { _addressLine1 = value; }
    }
} 
```

因此，您可以在 Json 或 Xml 中传递数据，并将其序列化为对象 CreatePersonDTO，并且在映射这些值以创建 Person 和 Address 对象时，如果缺少 Persons Name，它将引发验证异常。

由于 DTO 本身是特定于服务操作的，所以在这里进行此验证是否可以，或者它是否违反了某种关于业务逻辑应驻留在何处的规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:49:17.670

DTO 不应该有验证；它们**严格用于传输数据**。除了验证之外，它们应该真的没有任何行为。

如果需要名称，那是域或给定服务操作的一个方面；验证应该封装在相应的位置（尽管您也可以在 UI 中强制执行规则以获得更好的体验）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T15:48:54.813

我会解释**每个 DTO 都应该针对正在执行的服务操作进行定制，这**意味着如果您有庞大的域对象，DTO 可以表示与特定服务操作相关的子集。即它可能只对域对象的一些属性感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:48:10.463

那要看。但通常将验证登录放入 DTO 并不是一个好地方。您将遇到可重用性问题。例如，如果您需要更新人员，则必须创建 UpdatePersonDTO 并将所有相同的逻辑放在那里。
作为另一种选择，您可以将验证逻辑放入 Person 本身，这样您将无法创建无效的人员，并且可以重用。或者您可以将实体验证逻辑放入某种服务层。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:50:50.323

您不应该将验证逻辑放入您的 DTO，这应该主要由您的域层处理，并且在某些情况下，在您的 UI 层中复制。您的 DTO 应该就是用于传输数据的哑对象。

除了这里的职责分离之外，您的逻辑实际上不能被序列化。唯一可以通过网络传输的是值本身。如果您将此对象传递给非 .NET 使用者（例如通过 WCF），那么他们不一定会在将数据反序列化到的对象中内置相同的规则。

# c# - 如何为海关结构列表制作 ToString() 方法

> ID：12266952
> 
> 赞同：1
> 
> 时间：2012-09-04T15:42:03.147
> 
> 标签：c#

我有以下结构：

```
struct entry
{
    public string msg;
    public UInt32 ts;
    public bool newLines;

    public entry(string message, UInt32 timestamp, bool lines = false)
    {
        msg = message;
        ts = timestamp;
        newLines = false;
    }

    public override string ToString()
    {
        return msg + (newLines ? "\n" : "");
    }
}; 
```

我在我的程序中使用这些结构的列表，在程序的某些部分我需要获取这些条目的列表，并将它们组合回一个由换行符分隔的长字符串。我的问题是我的 ToString() 方法是否适用于`List<entry>`? 还是我需要覆盖另一个功能？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:43:25.893

您需要创建一个继承 List 的自定义类，如下所示：

```
public class EntryList : List<entry>
{
   public override string ToString()
   {
      //return what you want
      //EDIT:  accessing items
      foreach (entry e in this)
         //...
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T15:44:51.243

它不会起作用，`List<entry>`因为您正在覆盖`ToString`入口结构。您可以简单地使用`string.Join`：

```
var fullString = string.Join(",", entries); 
```

您还可以创建新类型，该类型将继承`List<entry>`您可以覆盖的形式`ToString`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T15:43:12.367

构建您自己的从 List<entry> 派生的“EntryList”并覆盖 ToString()。

另一个提示 - 在您的 ToString 实现中使用 StringBuilder 来更有效地构建您的 uber-string。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:33:56.977

您可以使用具有该方法的扩展方法，而不是一个全新的子类。但是，正如其他人所提到的，将长列表作为字符串进行水合可能不是正确的事情，并且会产生奇怪的效果（尤其是在调试器中）。

无论实施如何：

让列表 tostring 反映列表的某些状态（项目总数、值总和等）可能更正确，而不是转储每个项目的详细信息。

# asp.net - ASPxGridView 垂直滚动条的宽度

> ID：12266958
> 
> 赞同：1
> 
> 时间：2012-09-04T15:42:32.353
> 
> 标签：asp.net, c#-4.0, devexpress, scrollbar

我想知道如何获取 ASPxGridView 上垂直滚动条的宽度。

以下是更多细节： 我正在尝试将面板的大小调整为与 ASPxGridView 相同的宽度。网格没有设置其宽度属性。所有列都有固定的宽度。如果我总结了服务器端的所有列宽并将结果应用于面板，那么我仍然偏离垂直滚动条的宽度。我可以在渲染后检查元素并获取差异并对其进行硬编码......但我怀疑这是否适用于所有情况。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:49:57.713

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="true" ...>
             <Columns>
             ....
            </Columns>
            <RowStyle Width="150px"/>
        </asp:GridView> 
```

试试这个，我认为它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:57:55.857

控件在客户端渲染后将具有宽度，因此您可以在面板的客户端初始化函数中获取 gridview 的宽度。

Init="function(s, e) { s.SetWidth(ASPxGridView1.GetWidth());}"

# python - 多个对象以某种方式相互干扰

> ID：12266959
> 
> 赞同：0
> 
> 时间：2012-09-04T15:42:37.487
> 
> 标签：python, oop, neural-network

> **可能重复：**
> [多个对象以某种方式相互干扰[原始版本]](https://stackoverflow.com/questions/12262716/multiple-objects-somehow-interfering-with-each-other-original-version)

*（注意：几个小时前我发布了一个类似的问题，但措辞和解释都很糟糕，所以这是一个更清晰的重新提交）*

你好，

我有一个神经网络 (NN)，它在应用于单个数据集时效果很好。但是，如果我想在一组数据上运行 NN，然后创建一个新的 NN 实例以在不同的数据集（甚至是同一组数据）上运行，那么新实例将产生完全不正确的预测.

例如，在 XOR 模式上进行训练：

```
 test=[[0,0],[0,1],[1,0],[1,1]]
    data = [[[0,0], [0]],[[0,1], [0]],[[1,0], [0]],[[1,1], [1]]]

    n = NN(2, 3, 1) # Create a neural network with 2 input, 3 hidden and 1 output nodes
    n.train(data,500,0.5,0) # Train it for 500 iterations with learning rate 0.5 and momentum 0

    prediction = np.zeros((len(test)))
    for row in range(len(test)):
        prediction[row] = n.runNetwork(test[row])[0]

    print prediction

    #
    # Now do the same thing again but with a new instance and new version of the data.
    #

    test2=[[0,0],[0,1],[1,0],[1,1]]
    data2 = [[[0,0], [0]],[[0,1], [0]],[[1,0], [0]],[[1,1], [1]]]

    p = NN(2, 3, 1)
    p.train(data2,500,0.5,0)

    prediction2 = np.zeros((len(test2)))
    for row in range(len(test2)):
        prediction2[row] = p.runNetwork(test2[row])[0]

    print prediction2 
```

将输出：

```
 [-0.01 -0\.   -0.06  0.97]
    [ 0\.  0\.  1\.  1.] 
```

请注意，第一个预测非常好，而第二个完全错误，我看不出这个类有什么问题：

```
 import math
    import random
    import itertools
    import numpy as np

    random.seed(0)

    def rand(a, b):
        return (b-a)*random.random() + a

    def sigmoid(x):
        return math.tanh(x)

    def dsigmoid(y):
        return 1.0 - y**2

    class NN:
        def __init__(self, ni, nh, no):
            # number of input, hidden, and output nodes
            self.ni = ni + 1 # +1 for bias node
            self.nh = nh + 1
            self.no = no

            # activations for nodes
            self.ai = [1.0]*self.ni
            self.ah = [1.0]*self.nh
            self.ao = [1.0]*self.no

            # create weights (rows=number of features, columns=number of processing nodes)
            self.wi = np.zeros((self.ni, self.nh))
            self.wo = np.zeros((self.nh, self.no))
            # set them to random vaules
            for i in range(self.ni):
                for j in range(self.nh):
                    self.wi[i][j] = rand(-5, 5)
            for j in range(self.nh):
                for k in range(self.no):
                    self.wo[j][k] = rand(-5, 5)

            # last change in weights for momentum   
            self.ci = np.zeros((self.ni, self.nh))
            self.co = np.zeros((self.nh, self.no))

        def runNetwork(self, inputs):
            if len(inputs) != self.ni-1:
                raise ValueError('wrong number of inputs')

            # input activations
            for i in range(self.ni-1):
                #self.ai[i] = sigmoid(inputs[i])
                self.ai[i] = inputs[i]

            # hidden activations   
            for j in range(self.nh-1):
                sum = 0.0
                for i in range(self.ni):
                    sum = sum + self.ai[i] * self.wi[i][j]
                self.ah[j] = sigmoid(sum)

            # output activations
            for k in range(self.no):
                sum = 0.0
                for j in range(self.nh):
                    sum = sum + self.ah[j] * self.wo[j][k]
                self.ao[k] = sigmoid(sum)

            ao_simplified = [round(a,2) for a in self.ao[:]]
            return ao_simplified  

        def backPropagate(self, targets, N, M):
            if len(targets) != self.no:
                raise ValueError('wrong number of target values')

            # calculate error terms for output
            output_deltas = [0.0] * self.no
            for k in range(self.no):
                error = targets[k]-self.ao[k]
                output_deltas[k] = dsigmoid(self.ao[k]) * error

            # calculate error terms for hidden
            hidden_deltas = [0.0] * self.nh
            for j in range(self.nh):
                error = 0.0
                for k in range(self.no):
                    error = error + output_deltas[k]*self.wo[j][k]
                hidden_deltas[j] = dsigmoid(self.ah[j]) * error

            # update output weights
            for j in range(self.nh):
                for k in range(self.no):
                    change = output_deltas[k]*self.ah[j]
                    self.wo[j][k] = self.wo[j][k] + N*change + M*self.co[j][k]
                    self.co[j][k] = change
                    #print N*change, M*self.co[j][k]

            # update input weights
            for i in range(self.ni):
                for j in range(self.nh):
                    change = hidden_deltas[j]*self.ai[i]
                    self.wi[i][j] = self.wi[i][j] + N*change + M*self.ci[i][j]
                    self.ci[i][j] = change

            # calculate error
            error = 0.0
            for k in range(len(targets)):
                error = error + 0.5*(targets[k]-self.ao[k])**2
            return error

        def train(self, patterns, iterations=1000, N=0.5, M=0.1):
            # N: learning rate
            # M: momentum factor
            for i in range(iterations):
                error = 0.0
                for p in patterns:
                    inputs = p[0]
                    targets = p[1]
                    self.runNetwork(inputs)
                    error = error + self.backPropagate(targets, N, M)
                if i % 100 == 0: # Prints error every 100 iterations
                    print('error %-.5f' % error) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:56:02.813

有一件清楚可见的事情是你正在随机播种 0 - 我不知道你的问题域知道这是否是你的意图 - 但这样做总是会产生相同的数字系列，一个接一个. 这些数字是伪随机的。

当您使用同一类的第二个实例时，由于随机播种位于模块代码中，因此该系列不会重置 - 您将继续使用该系列的伪随机数，而不是相同的数字。如果我们的算法实际上不适用于随机数，这可能会在第二次运行时导致不同的结果，但取决于提供的特定系列 b random.seed(0)

除此之外，您的代码似乎没有保留任何可能导致您描述的问题的实例对象的状态。

及时 - 如果你的东西真的应该使用随机数，我建议在模块级别放弃 random.seed 语句。

否则，如果算法是正确的并且依赖于 random.seed(0) 之后产生的序列，您只需在开始在网络的第二个实例中工作之前重新发出此语句

# cordova - phonegap facebook 插件直接分享图片

> ID：12266963
> 
> 赞同：0
> 
> 时间：2012-09-04T15:43:02.217
> 
> 标签：cordova

我正在使用 Phonegap Facebook 插件。它工作正常。我正在尝试将我的 phonegap 应用程序中的图片分享到 Facebook。有用。

但我想知道是否有办法直接在我的 facebook 上发布，跳过对话窗口![在此处输入图像描述](../Images/8cbbf12aea5b2b8cf223dfc8af5194a4.png)

# linux - 从只有读取权限的 unix/linux 服务器复制文件的一小部分

> ID：12266966
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:43:04.460
> 
> 标签：linux, unix, command-line

服务器上有一个大文件，我只有读取权限（没有写入权限）。我只对文件头部的前几兆字节感兴趣，并希望避免将整个大文件复制到我的计算机上。有可能这样做吗？

（请注意，我不能在服务器上使用 dd 或 split，因为这需要写访问权限）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:46:55.160

是的，可以通过`ssh`and `head`：

```
$ ssh user@server "head -c NUM_BYTES /path/to/file" > file.bin 
```

这将 ssh 进入服务器并在 /path/to/file 上运行 head 命令，读取第一个 NUM_BYTES，并将其放入本地名为 file.bin 的文件中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T15:52:48.057

实际上，我发现例如 dd 是可能的，

dd if=inputfile.txt of=dest/outputfile.txt count=1 bs=1M

# javascript - d3.js：如何为图形上的散点添加标签

> ID：12266967
> 
> 赞同：8
> 
> 时间：2012-09-04T15:43:05.257
> 
> 标签：javascript, charts, d3.js, scatter

我正在尝试为该图上的散点添加标签：http: [//bost.ocks.org/mike/d3/workshop/dot-chart.html](http://bost.ocks.org/mike/d3/workshop/dot-chart.html)

我认为稍微修改此代码会起作用，但它没有：

```
svg.selectAll(".dot")
  .append("text")
  .text("fooLabelsOfScatterPoints"); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T20:01:54.303

迈克罗宾逊，你的榜样有所帮助。

对于那些想知道的人，这是我所做的：

我删除了：

```
svg.selectAll(".dot")
  .data(data)
  .enter().append("circle")
  .attr("class", "dot")
  .attr("cx", function(d) { return x(d.x); })
  .attr("cy", function(d) { return y(d.y); })
  .attr("r", 12); 
```

并补充说：

```
var node = svg.selectAll("g")
                .data(data)
                .enter()
                .append("g");

node.append("circle")
  .attr("class", "dot")
  .attr("cx", function(d) { return x(d.x); })
  .attr("cy", function(d) { return y(d.y); })
  .attr("r", 12);

node.append("text")
  .attr("x", function(d) { return x(d.x); })
  .attr("y", function(d) { return y(d.y); })
  .text("fooLabelsOfScatterPoints"); 
```

我将“文本”标签附加到“g”标签上，而不是将“文本”标签附加到“圆圈”标签上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T00:12:14.203

当我尝试节点解决方案时，我的一些数据消失了（？），所以我只是添加了一个名为“dodo”的新类，它对我有用：

```
svg.selectAll(".dot")
  .data(data)
 .enter().append("circle")
  .attr("class", "dot")
  .attr("r", 3.5)
  .attr("cx", function(d) { return x(d.time); })
  .attr("cy", function(d) { return y(d.place); })
  .style("fill", function(d) { return color(d.species); });

svg.selectAll(".dodo")
  .data(data)
 .enter().append("text")
  .attr("class", "dodo")
  .attr("x", function(d) { return x(d.time); })
  .attr("y", function(d) { return y(d.place); })
  .attr("dx", ".71em")
  .attr("dy", ".35em")
  .text(function(d) { return d.name;}); 
```

# asp.net - 针对多客户端和可定制 Web 应用程序的架构所需的建议

> ID：12266976
> 
> 赞同：6
> 
> 时间：2012-09-04T15:43:35.503
> 
> 标签：asp.net, sql-server, web-applications, architecture

我们的产品是一个基于网络的课程管理系统。我们有 10 多个客户，未来我们可能会获得更多客户。（ASP.NET、SQL Server）

目前，如果我们的一位客户需要额外的功能或定制的业务逻辑，我们将更改数据库架构和代码以满足需求。

（我们只有一个分支代码库和一个数据库模式）

为了使更改不会影响彼此的路由，我们使用了一个客户端标志，该标志在 Web 配置文件中定义，因此这些额外的字段和业务逻辑仅适用于特定客户的系统。

```
if(ClientId = 'ABC')
{
   //DO ABC Stuff
}
else
{
   //Normal Route
} 
```

我们的一位资深同事说，这样一来，像我们这样的小公司可以在支持多种资源上节省资源。

但我的感觉是，这种策略使我们的代码和数据库更难维护。

有没有人遇到过类似的情况？你怎么处理？

**更新**：如果这不是 SO 的正确问题，有人可以将此问题移至适当的 stackexchange 站点吗？

**更新2**：你是对的。代码现在变得很臭，我敢肯定迟早会成为一场噩梦。我公司在做产品，为了省力，后面给其他客户的产品都是在前一个的基础上做的。我知道理想的方法是将@ej-brennan 开发团队分成两部分。一个团队致力于核心产品并使其高度可定制，而第二个团队致力于为特定客户进行定制。但是，既然我们公司这么小，那真是一个两难的境地。:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:52:18.257

我认为您需要决定是销售为每个客户量身定制的定制软件，还是一刀切的“现成”软件（也许可以通过您提供的功能进行定制）。

当您像现在这样只有少数客户时，您可以摆脱您正在做的事情，但我几乎可以保证，如果您继续沿着这条路走下去，您的客户群会增加，客户特定定制的数量也会增加同样，您将做噩梦；我已经为多个客户经历了很多次，它总是以同样的方式结束。这一切都是可以控制的，直到它无法控制，然后它是一个皇家的颈部疼痛，可能会让你的生活变得非常困难。

如果您决定自己是一家定制公司，并且想要拥有多个版本的软件和数据库，那很好，只需确保您收取全部费用 - 即考虑到您可能需要维护多个级别的源代码和数据库以及升级的因素将需要许多倍的努力才能推出，因为您需要测试每个客户的代码库。

如果您决定要成为“现成”类型的产品，那么您最好的选择是让每个客户能够自定义他们的体验，而无需更改代码 - 即通过配置内置自定义功能控制事物如何工作的屏幕和表格 - 但每个人仍将使用相同的底层代码和数据库。前期工作要多得多，但可以为您节省大量时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T18:27:59.623

我也处于你的位置，我同意这是一个困难的位置。就我而言，我正在为客户构建定制的单一产品网站。虽然每个站点都遵循类似的布局和工作流程，但每个站点都必须有足够的灵活性才能拥有完全定制的设计、围绕运输和优惠券的定制规则以及不同的商家网关和配置。

几年后，我们确实得到了一些可维护的东西。首先，我们创建了库来存放我们所有的公共代码，并将这些库放入一个简单称为 Common 的 TFS 项目中。然后，我们为每个站点（不是客户，因为许多客户有多个产品/站点）创建了一个新的 TFS 项目，并将适用的项目从 Common 分支到它们中。接下来，我们创建了一个包含站点骨架的 VS 模板项目，包括“无设计”视图、控制器及其操作方法（请记住，每个站点都有相同的基本流程）。此外，每个站点都在自己的数据库上运行，该数据库是从一个其他未使用且大部分为空的模板数据库中克隆的。

由于每个站点都在自己的分支和数据库上运行，因此可以对模板安装的原始流程和设计进行修改（无需重新合并），而不会影响任何其他站点。对于自定义业务方法，例如运输计算，我们可以创建公共类的子类并在需要时覆盖。实现这一点的部分原因是将我们所有的代码转换为使用依赖注入。具体来说，每个 Controller 都注入了​​ Services，每个 Service 都注入了​​ Repositories。商户处理也被编码到一个接口并注入。另外值得一提的是，这允许我们对每个站点的所有加售逻辑进行硬编码（您购买了产品 X，所以我们推荐 Y），与在我们旧的追加销售规则引擎中定义复杂的配置规则相比，这更容易创建和维护。不知道你有没有这样的...

有时我们希望对公共代码本身进行更改，这通常是由对特定站点的特定需求引起的。在这种情况下，我们将在该分支上进行更改，将其合并到 Common，然后在方便时将其合并到其他站点（非常适合“破坏”更改或还需要更改数据库的更改）。同样对于数据库更改，我们将更新模板数据库，然后编写一个小脚本来更新具有相同架构更改的其他站点数据库（仍然必须聪明并小心）。

另一个好处是我们还创建了 Mock 存储库，这些存储库将在“设计”构建配置中使用/注入，这使设计人员能够在应用程序中跳转并在屏幕上工作，而无需将自己真正提交给工作流。它还允许他们在后端完成任何操作之前开始在站点上工作，这对于那些需要“看到一些东西”的焦虑客户来说非常重要。

10+ 客户绝对不是你所说的小数目。三对我来说已经足够痛苦了。我们同时运行了 30 多个站点，由三位开发人员和两位设计师维护。

Finally, I know it's outside the scope of your question and a bit presumptuous, but getting "final" client sign-off on design before the designers actually went about implementing it (and before devs did their thing) also saved us a lot of costly rework. I know no design is final, but increasing efficiency on the implementation end gave the clients less time to change their minds about the design they approved.

I hope that at least gives you some approaches to think about.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T15:54:27.643

使用必须更改或定制的系统的人们已经开发出处理这些问题的模式。

你绝对应该从阅读一本关于控制反转的好书开始。简而言之，您可以通过定义构建块（合同，表示为接口）来构建系统并提供多种实现。这种方法有很多好处，但只提两个： - 您可以通过提供相同接口的不同实现来处理自定义 - 您可以静态或动态重新配置您的应用程序，但这两种方法都比您的“如果”干净得多

当涉及到数据层时，请研究存储库模式。它有助于以您可以在不同提供者之间切换的方式组织数据访问。它非常适合ioc。

并且只是一个技术提示 - nhibernate 支持动态属性。您只需在映射中提供额外的列，nh 就可以从相同的代码库中支持它。通过这种方式，您可以针对具有稍微不同的数据库架构的不同数据库。

# c# - 如何在单独的 XAML 文件中使用 DrawingImage

> ID：12266977
> 
> 赞同：1
> 
> 时间：2012-09-04T15:43:35.003
> 
> 标签：c#, wpf, xaml

我有几个代表 DrawingImages 的 XAML 文件（从 Blend 中的 SVG 转换而来）。我想知道，使用这些的最佳方式是什么？

我可以以某种方式将指向它们的链接放在资源字典中吗？如果我想在代码中引用它们怎么办？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T18:33:39.570

您可以将绘图用作图像控件的源...请参见此处的示例。

*   [http://msdn.microsoft.com/en-us/library/system.windows.media.drawingimage.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingimage.aspx)

还有这篇长篇文章，讨论 XAML 中描述的图形及其用法。

*   [http://www.codeproject.com/Articles/22716/Graphic-in-XAML-and-WPF](http://www.codeproject.com/Articles/22716/Graphic-in-XAML-and-WPF)

至于管理您的“绘图”....将它们保存在单独的 .XAML 文件中。

然后，您可以使用 XamlReader.Load() 按需加载绘图。

*   [http://www.abhisheksur.com/2010/10/lazy-load-xaml-content-from-external.html](http://www.abhisheksur.com/2010/10/lazy-load-xaml-content-from-external.html)
*   [http://www.codeproject.com/Articles/115108/Lazy-Load-XAML-content-from-External-File-and-Vice](http://www.codeproject.com/Articles/115108/Lazy-Load-XAML-content-from-External-File-and-Vice)

或者

您可以将所有绘图合并到您的 App.Xaml ResourceDictionary....（您需要将每个绘图放在它自己的 ResourceDictionary 中，以便它可以与 MergedDictionaries 合并）。

请注意，您必须小心使用 ResourceDictionaries，尤其是在使用“合并”工具时……存在一些性能/查找问题。

# php - 从登录用户的会话变量中将数据发布到数据库

> ID：12266981
> 
> 赞同：-1
> 
> 时间：2012-09-04T15:43:47.810
> 
> 标签：php, sql

我在数据库表 pets 中得到 0，其中 pet_id 应更新为登录用户 id

任何想法请我认为这很简单，但我不确定。

```
<?php require 'database.php';
session_start();
$id = $_SESSION['user_id'];
$_SESSION['user_id']= $id;  
$_SESSION['user_name'] = $full_name;
$_SESSION['user_level'] = $user_level;
$_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);
$_SESSION['session_name'] = $user_name;
$_SESSION['balance']= $balance;  
$value = 1050;
$user_id = mysql_insert_id($link);

$sql_insert1 = "INSERT into `pets`
            (`pet_id`,`value`)
            VALUES
            ('.$id','$value')";

mysql_query($sql_insert1,$link) or die("Failed" . mysql_error());

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:45:36.313

您有一个不必要的时期，请尝试：

```
$sql_insert1 = "INSERT into `pets`
                (`pet_id`, `value`)
                VALUES
                ('$id', '$value')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:48:24.253

首先， session_start(); 必须始终是 <?php.ini 之后脚本的第一行。

其次，你的 concat 是完全错误的。

这是一个稍微正确的版本，需要一些测试：

```
<?php 
session_start();
require 'database.php';
$id = $_SESSION['user_id'];
$_SESSION['user_id']= $id;  
$_SESSION['user_name'] = $full_name;
$_SESSION['user_level'] = $user_level;
$_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);
$_SESSION['session_name'] = $user_name;
$_SESSION['balance']= $balance;  
$value = 1050;
$user_id = mysql_insert_id($link);

$sql_insert1 = "INSERT into `pets`
        (`pet_id`,`value`)
        VALUES
        ('".$id."','".$value."')";

mysql_query($sql_insert1,$link) or die("Failed" . mysql_error());

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:51:52.373

$id 来自哪里？我假设不是来自“database.php”。

您是要从会话中恢复 $id 吗？然后你应该写：

```
$id = $_SESSION['user_id']; 
```

而且，如果你有一个有意义的 $value，你的查询应该可以工作：

```
$sql_insert1 = "INSERT into `pets`
                (`pet_id`, `value`)
                VALUES
                ('$id', '$value')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:23:27.107

```
<?php 
session_start();
require 'database.php';
$id = $_SESSION['user_id'];
//echo $id;
//exit;
//print the value and check what you are getting here 
//i think you will get 0 here
//$_SESSION['user_id']= $id;  
$_SESSION['user_name'] = $full_name;
$_SESSION['user_level'] = $user_level;
$_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);
$_SESSION['session_name'] = $user_name;
$_SESSION['balance']= $balance;  
$value = 1050;
$user_id = mysql_insert_id($link);

$sql_insert1 = "INSERT into `pets`
            (`pet_id`,`value`)
            VALUES
            ('.$id','$value')";

mysql_query($sql_insert1,$link) or die("Failed" . mysql_error());

?> 
```

# eclipse - Eclipse CDT 未启动可执行文件

> ID：12266982
> 
> 赞同：1
> 
> 时间：2012-09-04T15:43:48.997
> 
> 标签：eclipse, executable, eclipse-cdt

我一直在使用 MinGW，在 Eclipse 决定不再运行可执行文件之前没有真正的问题。运行配置仍然相同，项目构建 100% 正常，我可以从命令行/GUI 运行构建的可执行文件。Eclipse 中的控制台是空的，在顶部栏中保存为，后跟可执行文件名称和时间/日期。

刚刚从菜单中创建了一个 hello world 项目，同样的事情发生在它身上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T12:18:26.327

我刚刚遇到了同样的错误，这就是我所做的：

必须选择正确的二进制解析器，这样 Eclipse 才能识别可执行文件： 选择项目，然后右键单击。

**Project->Properties->C/C++ Build->Settings->Binary Parsers, PE Windows Parser**（或者如果你使用那个编译器，你可以选择 Cygwin，在 Linux 上我使用 Elf parser。）。

这对我来说至少适用于交叉编译器（在 Windows 7 和 Ubuntu 12.04 上）

# xml - 在 XSD 中添加与父级相同类型的元素序列

> ID：12266984
> 
> 赞同：0
> 
> 时间：2012-09-04T15:43:56.800
> 
> 标签：xml, xsd, xsd-validation

我正在尝试创建一个验证以下 XML 结构的 XSD

```
<SystemData>
  <Item Value="Techno" ListType="Flat">
    <Node Value="Detroit" />
    <Node Value="Gabba" />
  </Item>
  <Item Value="House" ListType="Tree">
    <Node Value="Deep">
       <Node Value="New York" />
    </Node>
    <Node Value="Acid" />
    <Node Value="Chicago" />
  </Item>
</SystemData> 
```

基本上有一个根 SystemData 元素，其中包含一系列 Item 元素，可以包含一系列 Node 元素，每个元素都可以包含一系列节点元素，将树状结构建模到 n 级

所以我想出了这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="SystemData">
    <xs:complexType>
        <xs:sequence minOccurs="0" maxOccurs="unbounded">
            <xs:element name="Item">
                <xs:complexType>
                    <xs:sequence minOccurs="0" maxOccurs="unbounded">
                        <xs:element name="Node">
                            <xs:complexType>
                                <xs:attribute name="Value" type="xs:string" use="required"/>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                    <xs:attribute name="Value" type="xs:string" use="required"/>
                    <xs:attribute name="ListType" type="xs:string" use="required"/>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

如何将 Node 元素包含为自身的序列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:08:56.457

这个想法是通过重用类型中的类型或元素定义中的元素定义来使内容模型可引用。这暗示在选择方法时要根据创作风格考虑另一个标准。

选项 1：在类型中重用类型，建议使用百叶窗创作风格。

我会改变：

```
<xs:sequence minOccurs="0" maxOccurs="unbounded"> 
    <xs:element name="Node">
        <xs:complexType>
            <xs:attribute name="Value" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element> 
</xs:sequence> 
```

到：

```
<xs:sequence>
    <xs:element name="Node" type="NodeType" minOccurs="0" maxOccurs="unbounded"/>
</xs:sequence> 
```

并添加：

```
<xs:complexType name="NodeType">
    <xs:sequence>
        <xs:element name="Node" type="NodeType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="Value" type="xs:string" use="required"/>
</xs:complexType> 
```

选项 2：对于“Salami Slice”创作风格，您需要改为引用全局元素。所以，我会改变：

```
<xs:sequence minOccurs="0" maxOccurs="unbounded"> 
    <xs:element name="Node">
        <xs:complexType>
            <xs:attribute name="Value" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element> 
</xs:sequence> 
```

到：

```
<xs:sequence>
    <xs:element ref="Node" minOccurs="0" maxOccurs="unbounded"/>
</xs:sequence> 
```

并添加：

```
<xs:element name="Node">
    <xs:complexType>
        <xs:sequence>
        <xs:element ref="Node" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="Value" type="xs:string" use="required"/>
    </xs:complexType>
</xs:element> 
```

# objective-c - 如何获取 NSIndexPath 部分中的行数

> ID：12266985
> 
> 赞同：2
> 
> 时间：2012-09-04T15:43:57.850
> 
> 标签：objective-c, ios, nsindexpath

我想获取 NSIndexPath 部分中的行数。对于我在这里和 Apple 文档中的所有搜索，我找不到如何获得这个值。有什么线索吗？

我的具体目的是使用它来确定所选行是否是该部分中的最后一行，因此如果有人建议通过另一种方式确定该行，那将是一样好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T15:50:21.710

一切都在文档中

[numberOfRowsInSection：](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/numberOfRowsInSection:)

```
int rows = [table numberOfRowsInSection:indexPath.section]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T15:47:58.367

唯一的办法就是询问表的数据源：

```
NSUInteger rowCount = [tableView.dataSource tableView:tableView numberOfRowsInSection:indexPath.section]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T15:48:36.697

在我的情况下，这是我的做法：

表部分包含存储在 中的对象列表`NSArray`，因此部分中的行数是数组中对象的数量。在您的情况下-如果行不是数组中的对象-只需进行检查

```
if ([indexPath row] + 1 == [_objectsArray count]) {
    ... 
```

但是，如果表中的项目未保存在集合中，则只需在委托方法中调用`tableView`对象的适当方法即可轻松检索部分中的行数：`didSelectRow..`

```
NSInteger numberOfRows = [tableView numberOfRowsInSection:[indexPath section]]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T15:48:06.017

您可以调用`tableView:numberOfRowsInSection:`的方法`UITableViewDataSource`，传递节号。`tableView:numberOfRowsInSection:`但是，根据模型中的内容生成此数字的是您自己的代码，因此查看数据源中的实现以查看是否可以通过替代路径获得相同的答案可能是有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T15:50:03.060

如果您在谈论 UITableView，您可以询问它的 dataSource，这很可能是您自己 :-)

```
[self.tableView.dataSource tableView: self.tableView numberOfRowsInSection: indexPath.section];

// or, if you are the dataSource...
[self tableView: self.tableView numberOfRowsInSection: indexPath.section]; 
```

# java - ArrayList 之 ArrayList - 清除函数混淆

> ID：12266986
> 
> 赞同：1
> 
> 时间：2012-09-04T15:44:00.887
> 
> 标签：java

这是我写的一个特殊方法：

```
class A {

    private static ArrayList<ArrayList<Integer>> inputTerms = new ArrayList<ArrayList<Integer>();

    public static void method1(ArrayList<Integer> terms) {
        ArrayList<Integer> clauses = new ArrayList<Integer>();
        int N = terms.size();
        for (int i = 0; i < N - 1; i++) {
            for (int j = i + 1; j < N; j++) {
                clauses.add(-terms.get(i));
                clauses.add(-terms.get(j));
                inputTerms.add(clauses);
                clauses.clear();
            }
        }
    }
} 
```

从主函数多次调用此方法。最后，我尝试将类变量的内容写入文件。但是，当我这样做时，我得到 0 作为 inputTerms 的内容。但是，如果我删除了 Clauses.clear() 行，我可以获得适当的值。

我的程序是这样的，在添加到 inputTerms 之后清除子句对我来说至关重要。有没有其他选择？

**嗯..我已经按照你的建议做了。但是，我还没有完全克服这个问题。为了提供更多背景知识，在我的主要功能中，我有以下代码：

```
for (int i=0; i<N-1; i++){ 
ArrayList<Integer> firstdiagonalTerms = new ArrayList<Integer>(); 
for (int j=0; j<N-i; j++){ 
firstdiagonalTerms.add(variable[j][i+j]); 
} 
method1(firstdiagonalTerms);
} 
```

对于“i”和“j”的不同组合，我必须调用 method1 函数 4 次。但是，当我使用上述建议时，我仍然得到 0**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:49:09.340

您正在添加相同的列表并重复清除它。当您将对象添加到列表时，它会复制对它的引用，而不是对象的副本。

```
int N = terms.size();
for (int i = 0; i < N - 1; i++) {
    for (int j = i + 1; j < N; j++) {
        List<Integer> clauses = new ArrayList<Integer>();
        clauses.add(-terms.get(i));
        clauses.add(-terms.get(j));
        inputTerms.add(clauses);
    }
} 
```

或者

```
for (int i = 0, N = terms.size(); i < N - 1; i++) 
    for (int j = i + 1; j < N; j++) 
        inputTerms.add(Arrays.asList(-terms.get(i), -terms.get(j))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:48:53.187

不确定我是否理解您要实现的目标，但是您一直在重复使用相同的列表，这可能不是您想要做的。

您可能应该移动`ArrayList<Integer> clauses = new ArrayList<Integer>();`内部循环的内部，并且根本不调用`clauses.clear()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T15:58:40.667

当您添加“子句”时，您将实际对象添加到 arrayList，而不是副本。因此，当您清除它们时，列表中的所有值都将被删除。要解决这个问题，请添加列表的克隆：

```
inputTerms.add((ArrayList<Integer>) clauses.clone()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:45:19.183

当您在列表上调用 clear() 时，您正在更新/删除相同的对象（因为列表包含对对象的引用，而不是对象的副本）。这就是导致问题的原因。

我认为您需要执行以下操作。每次都创建一个新列表，而不是使用 clear()。

```
public static void method1 (ArrayList<Integer> terms)
{

int N = terms.size();       
        for (int i = 0; i<N-1; i++) {
            for (int j=i+1; j<N; j++) {
              ArrayList<Integer> clauses = new ArrayList<Integer>();
              clauses.add(-terms.get(i));
              clauses.add(-terms.get(j));
              inputTerms.add(clauses);

}
} 
```

# vba - 在 MS Access 中使用多个 DAO 记录集

> ID：12266987
> 
> 赞同：1
> 
> 时间：2012-09-04T15:44:06.677
> 
> 标签：vba, dao

第一篇文章，所以尽可能温柔！:)

我正在 Access 中创建一个新数据库来更新我们的电子商务软件（也基于 Access）。

我们收到来自供应商的 3 个提要，所有 CSV 文件的格式略有不同。我已经使用链接表成功导入了提要，并且可以（我认为）根据需要以编程方式刷新文件中的数据。

我创建了一个“CurrentProducts”表，其中包括目前在我们网站上的所有产品。

我想依次从 CurrentProducts 表中获取每个产品代码，在每个供应商提要中查找它，根据我们的购买价格计算我们的售价，找出哪个供应商提供最便宜的价格，然后相应地更新 CurrentProducts 表。

我以前经常在 Excel 中将 VBA 用于宏目的，但我从未真正接触过 Access 中的 DAO 记录集，所以我承认我真的不知道自己在做什么！

到目前为止，我已经得到了下面的代码。CurrentProducts 表中有大约 17,900 条记录，“Ingram”表中有近 51,000 条记录，ScanSource 表中有近 15,000 条记录，Varlink 表中有大约 3,000 条记录。

我已经让代码运行了 5 到 10 分钟，虽然代码看起来确实在工作，但它的运行速度非常慢。我只能假设必须有一种比我目前正在做的更快/更简单的方法来访问记录集中的数据。

所以交给你们，我应该放弃所有这些并重新开始还是可以从这里调整？

谢谢你。

```
Private Sub Command0_Click()

Dim var As DAO.Recordset
Dim ing As DAO.Recordset
Dim scan As DAO.Recordset
Dim curr As DAO.Recordset
Dim filtvar As DAO.Recordset
Dim filtscan As DAO.Recordset
Dim filting As DAO.Recordset
Dim db As Database
Dim varSQL As String, ingSQL As String, scanSQL As String, currSQL As String
Dim prodcode As String
Dim varPrice As Double, ingPrice As Double, scanPrice As Double, currPrice As Double

DoCmd.Hourglass True

Set db = CurrentDb

currSQL = "select ProductCode, Price from CurrentProducts"
varSQL = "select ProductCode, (Price*1.25) as CalcPrice from Varlink"
ingSQL = "select ProductCode, (Price*1.25) as CalcPrice from Ingram"
scanSQL = "select ProductCode, (Price*1.25) as CalcPrice from ScanSource"

Set curr = db.OpenRecordset(currSQL)
Set var = db.OpenRecordset(varSQL)
Set ing = db.OpenRecordset(ingSQL)
Set scan = db.OpenRecordset(scanSQL)

curr.MoveLast 'Needed to get the accurate number of records

'Show the progress bar
SysCmd acSysCmdInitMeter, "Working...", curr.RecordCount

curr.MoveFirst

Do While Not curr.EOF
prodcode = curr!ProductCode

var.Filter = "[ProductCode] = " & "'" & prodcode & "'"
Set filtvar = var.OpenRecordset

ing.Filter = "[ProductCode] = " & "'" & prodcode & "'"
Set filting = ing.OpenRecordset

scan.Filter = "[ProductCode] = " & "'" & prodcode & "'"
Set filtscan = scan.OpenRecordset

usevarprice = 0
useingprice = 0
usescanprice = 0

If filtvar.EOF And filtvar.BOF Then
Else
    varPrice = filtvar!CalcPrice
    varPrice = Round(varPrice, 0)
    usevarprice = 1
End If

If filting.EOF And filting.BOF Then
Else
    ingPrice = filting!CalcPrice
    ingPrice = Round(ingPrice, 0)
    useingprice = 1
End If

If filtscan.EOF And filtscan.BOF Then
Else
    scanPrice = filtscan!CalcPrice
    scanPrice = Round(scanPrice, 0)
    usescanprice = 1
End If

If usevarprice = 1 And useingprice = 1 And usescanprice = 1 Then
    If varPrice < ingPrice And varPrice < scanPrice Then
        newPrice = varPrice
    ElseIf ingPrice < varPrice And ingPrice < scanPrice Then
        newPrice = ingPrice
    Else
        newPrice = scanPrice
    End If
ElseIf usevarprice = 1 And useingprice = 1 And usescanprice = 0 Then
    If varPrice < ingPrice Then
        newPrice = varPrice
    Else
        newPrice = ingPrice
    End If
ElseIf usevarprice = 1 And useingprice = 0 And usescanprice = 1 Then
    If varPrice < scanPrice Then
        newPrice = varPrice
    Else
        newPrice = scanPrice
    End If
ElseIf usevarprice = 0 And useingprice = 1 And usescanprice = 1 Then
    If scanPrice < ingPrice Then
        newPrice = scanPrice
    Else
        newPrice = ingPrice
    End If
Else
    If usevarprice = 1 Then
        newPrice = varPrice
    ElseIf useingprice = 1 Then
        newPrice = ingPrice
    ElseIf usescanprice = 1 Then
        newPrice = scanPrice
    End If
End If

curr.Edit
curr!Price = newPrice
curr.Update

curr.MoveNext

n = n + 1

'Update the progress bar
SysCmd acSysCmdUpdateMeter, n

'Keep the application responding (optional)
DoEvents
Loop

curr.Close: Set curr = Nothing
var.Close: Set var = Nothing
ing.Close: Set ing = Nothing
scann.Close: Set scan = Nothing

'Remove the progress bar
SysCmd acSysCmdRemoveMeter

'Show the normal cursor again
DoCmd.Hourglass False

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:22:51.670

我最终使用了一个临时表（temp_prod）并将所有 3 个供应商的所有产品都转储到表中。然后我使用了这个查询：

```
SELECT a.productcode, a.buyprice, a.listprice, a.source FROM temp_prod AS a WHERE a.buyprice in (Select top 1 buyprice from temp_prod b where a.productcode = b.productcode order by buyprice) 
```

打开包含每个产品代码的最便宜价格的记录集。然后我遍历记录集，用新的销售价格（从购买价格计算）更新产品导出表，瞧。非常感谢您的帮助Remou！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:22:15.040

考虑这个查询，使用它只需剪切并粘贴到查询设计窗口的 SQL 视图中。

```
SELECT c.productcode,
       c.price,
       s.supfile,
       s.calcprice
FROM   currentproducts c
       LEFT JOIN (SELECT "varlink"        AS supfile,
                         productcode,
                         ( price * 1.25 ) AS CalcPrice
                  FROM   varlink
                  UNION ALL
                  SELECT "ingram"         AS supfile,
                         productcode,
                         ( price * 1.25 ) AS CalcPrice
                  FROM   ingram
                  UNION ALL
                  SELECT "scansource"     AS supfile,
                         productcode,
                         ( price * 1.25 ) AS CalcPrice
                  FROM   scansource) AS s
              ON c.productcode = s.productcode 
```

如果查询显示您感兴趣的数据，您只需从联合表中获取每个产品代码的最小值。这在 SQL 中并不太难。

例如，您可以将联合查询保存为查询，然后对数据进行操作。

```
SELECT u.supfile,
       u.productcode,
       u.calcprice
FROM   MyUnion u
WHERE  (( ( u.calcprice ) IN (SELECT TOP 1 calcprice
                                 FROM   MyUnion b
                                 WHERE  b.productcode = u.productcode
                                 ORDER  BY calcprice) )); 
```

此查询也可以作为派生表包含，与上面的查询相同，因此您可以将各种低价格与当前价格进行比较，但是，当两个供应商的价格相同时，此查询会给出重复。

决策过程可能不像更新价格最低的地方那么简单，但是，如果不出意外，使用 sql 和 vba 将大大减少处理时间和记录集的数量。

# android - PopupWindow 的 OnClickListener 中的 AlertDialog - 允许吗？

> ID：12266989
> 
> 赞同：0
> 
> 时间：2012-09-04T15:44:10.267
> 
> 标签：android

`AlertDialog`当单击a 上的某个按钮时，我需要出现一个`PopupWindow`。为了打电话`AlertDialog.Builder()`，我需要一个`context`. 如果我尝试使用“ `this`”，则会收到错误“ `Type mismatch: cannot convert from new View.OnClickListener(){} to Context`”。我知道还有几种其他类型的上下文，`getBaseContext()`但是当我尝试这些上下文时，程序会崩溃。我不确定我应该使用哪种类型，并且担心操作系统从根本上是否试图告诉我`alertdialog`在 a 中包含 a`pupupwindow`是不可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:48:13.770

传入父活动作为上下文 Mick。这将是对话的适当上下文。

# html - css 和 z-index - 使我的提交按钮出现在我的搜索框内和前面

> ID：12266990
> 
> 赞同：0
> 
> 时间：2012-09-04T15:44:15.290
> 
> 标签：html, css, z-index

我有一个搜索框，我希望在框内有一个提交按钮（有点像 bing）使提交按钮出现在搜索框的顶部

我已经整理了一个小提琴，但是因为图像在我的机器上，它显然没有拾取它，代码在那里

[http://jsfiddle.net/5a3Tr/1/](http://jsfiddle.net/5a3Tr/1/)

有人有什么想法吗？我认为 z-index 的东西会起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:48:15.643

只需`position: relative`从`input.rounded`- [**DEMO中删除**](http://jsfiddle.net/5a3Tr/3/)

# windows-8 - 如何为地铁控制执行绑定

> ID：12266994
> 
> 赞同：0
> 
> 时间：2012-09-04T15:44:40.403
> 
> 标签：windows-8, windows-runtime, winrt-xaml, windows-store

当用户按下组合键进行保存 (Ctrl-S) 时，我想将每次活动的 TextBox 的内容写回 ViewModel 的绑定属性。

我的问题是，我无法触发绑定的执行，以便绑定的 Text-Property 反映 TextBox 的内容。

- 似乎没有 GetBinding 方法。因此我无法获取绑定并手动执行它。
-在执行绑定的 WinForms 中没有 Validate-method -
从 KeyDown 中将焦点转移到另一个控件似乎不起作用，绑定不执行

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:56:47.687

看看 Aaron 在他的 WiredPrarie 博客文章中对此的讨论：http: [//www.wiredprairie.us/blog/index.php/archives/1701](http://www.wiredprairie.us/blog/index.php/archives/1701)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:33:37.613

我想我现在更好地理解了你的问题。解决此问题的一种方法是使用带有新属性的子类文本框，如下[所示](http://www.familie-smits.com/post/2012/07/29/UpdateSourceTrigger-in-WinRT.aspx)：

```
public class BindableTextBox : TextBox
{
    public string BindableText
    {
        get { return (string)GetValue(BindableTextProperty); }
        set { SetValue(BindableTextProperty, value); }
    }

    // Using a DependencyProperty as the backing store for BindableText.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BindableTextProperty =
        DependencyProperty.Register("BindableText", typeof(string), typeof(BindableTextBox), new PropertyMetadata("", OnBindableTextChanged));

    private static void OnBindableTextChanged(DependencyObject sender, DependencyPropertyChangedEventArgs eventArgs)
    {
        ((BindableTextBox)sender).OnBindableTextChanged((string)eventArgs.OldValue, (string)eventArgs.NewValue);
    }

    public BindableTextBox()
    {
        TextChanged += BindableTextBox_TextChanged;
    }

    private void OnBindableTextChanged(string oldValue, string newValue)
    {
        Text = newValue ? ? string.Empty; // null is not allowed as value!
    }

    private void BindableTextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        BindableText = Text;
    }    
} 
```

然后绑定到`BindableText`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:51:07.253

**命令实例**
的解决方案这是我发现的一个相对轻量级的解决方案，但也有点“hackish”：

```
btn.Focus(Windows.UI.Xaml.FocusState.Programmatic);
Dispatcher.ProcessEvent(CoreProcessEventsOption.ProcessAllIfPresent);         
btn.Command.Execute(null); 
```

首先，我将焦点放在另一个控件（在我的例子中是具有绑定命令的按钮）。然后我给系统时间来执行绑定，最后我提出绑定到按钮的命令。

**没有绑定命令的解决方案**
将焦点交给另一个控件并调用 Dispatcher.ProcessEvent(...)。

```
anotherControl.Focus(Windows.UI.Xaml.FocusState.Programmatic);
Dispatcher.ProcessEvent(CoreProcessEventsOption.ProcessAllIfPresent);
// Do your action here, the bound Text-property (or every other bound property) is now ready, binding has been executed 
```

**另请参阅 BStateham 的解决方案**。
这是解决问题的另一种方法

# javascript - 响应式图片库，每张图片都可以通过锚链接访问

> ID：12266995
> 
> 赞同：0
> 
> 时间：2012-09-04T15:44:49.983
> 
> 标签：javascript, jquery, html, responsive-design

我发现了很多很棒的响应式图片库，例如[Flexslider](http://www.woothemes.com/flexslider/)，但它们都没有为您提供以下功能：

让每张图片都有自己的锚标签，可以通过 URL 直接访问。例如：[http ://www.website.com/gallery#image-of-a-dog](http://www.website.com/gallery#image-of-a-dog)

我真正想要的是一个带有缩略图的画廊，其中每个缩略图将链接并通过锚链接滑动正确的图像。

我知道[任何滑块](http://css-tricks.com/examples/AnythingSlider/#&panel1-1)都可以做到这一点，但它没有响应。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:13:14.020

这是一个使用[`jQuery cycle`](http://jquery.malsup.com/cycle).

但是您可以将它与任何插件一起使用，让您选择从哪张幻灯片开始。

假设您有一个包含 10 张照片的画廊，当点击一张照片时，您会将数字附加到 url，假设您点击了照片，`3`因此 url 将是`/gallery#3`.

所以你需要得到这个号码：

```
 var num = location.pathname.split('#')[1];
 if (!num) num = 0; // default to starting slide.
 $('#gallery').cycle({ startingSlide: parseInt(num) }); 
```

希望这可以帮助。

# jsf - 日本皇历 JSF

> ID：12266997
> 
> 赞同：0
> 
> 时间：2012-09-04T15:44:51.867
> 
> 标签：jsf, calendar

是否有可用的 JSF 控件以日本皇历格式显示日期？

# ruby-on-rails - 为什么我在使用 selenium/webkit 和 capybara 时会出现空白页？

> ID：12266999
> 
> 赞同：2
> 
> 时间：2012-09-04T15:45:09.247
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara, capybara-webkit

我正在尝试用水豚和硒测试我的黄瓜场景，但我总是得到空白页。

我读到这个：[Capybara + RSpec 只在控制器规范中看到空白页。为什么？](https://stackoverflow.com/questions/5932605/capybara-rspec-only-sees-blank-pages-in-controller-specs-why)

但它并不完全相同，因为那是 rspec。

我的 env.rb 有：

```
Capybara.default_driver = :webkit 
```

我试图将其更改为 :selenium 但这是同一个故事。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:14:09.450

为什么不将这些驱动程序仅用于 javascript，您真的需要它们作为默认驱动程序吗？你想一直使用它们吗？

这可能只是一个超时问题..

如果您只想为 JavaScript 设置它们，请改为执行此操作 (env.rb)：

```
Capybara.javascript_driver = :webkit 
```

并使用@javascript 装饰您的场景，如下所示：

```
@javascript
Scenario: Customers List 
```