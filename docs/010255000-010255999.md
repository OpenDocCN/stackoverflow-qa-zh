# StackOverflow 问答 10255000-10255999

# ios - 如何复制 iOS 键盘外观？

> ID：10255000
> 
> 赞同：3
> 
> 时间：2012-04-21T00:05:21.097
> 
> 标签：ios, ipad, uibutton, uikeyboard

我为我的 iOS 应用程序制作了一个自定义数字小键盘，但希望它更接近标准键盘的外观。我正在寻找有关如何使标准 UIButton 外观和行为像标准键盘按钮的建议。

具体来说，我需要为 iPad 弄清楚以下内容，并希望在 xib 或情节提要中做尽可能多的事情。

*   按钮的大小
*   键盘背景的颜色（甚至更好，我如何自己确定？）
*   按钮的背景颜色
*   按钮中文本的字体和颜色
*   如何在按钮下添加阴影？
*   如何使用灰色而不是蓝色突出显示按钮？
*   按钮之间的间距
*   更改方向时如何使按钮“组”作为一个整体居中？（所有调整大小的选项都将其固定在一边，而不是彼此固定）

标准按钮使用图像，还是修改标准 UIButton？或者更恰当地说，哪个对我们更好？

**更新：**
我为数字键盘创建了一个项目，这是一个完整的工作示例。但是，我并没有花太多时间在实际外观上，这就是这个问题的主要内容。我已将其发布在 Github 上，并使其成为一个开源项目（受 MIT 许可证涵盖，因此也允许商业用途）。希望其他人会发现它有用，并希望其他人会愿意帮助它变得更好，看起来更像原生键盘。Github 存储库位于：

[https://github.com/lnafziger/Numberpad](https://github.com/lnafziger/Numberpad)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T01:33:54.570

如果您想主要在 IB 中进行，则可以执行以下操作：

*   尺寸
*   颜色
*   背景颜色
*   字体
*   文字颜色
*   阴影（对 UILabel 的不是 UITextArea）
*   间距
*   自动调整大小

有一个很酷的 PSD 矢量工具包适用于所有类型的 iOS 元素，应该会有所帮助：

[http://www.smashingmagazine.com/2008/11/26/iphone-psd-vector-kit/](http://www.smashingmagazine.com/2008/11/26/iphone-psd-vector-kit/)

无论如何，对于其余的答案：

### 尺寸

对按钮进行截图并在 Photoshop 中确定大小，或者您可以在图像文件上使用 CMD+i 查看像素尺寸。记得使用 CMD+Shift+4 然后拖动（然后按空格键截屏）。

### 颜色

使用预装在 Mac 上的 DigitalColor Meter 应用程序，它的各种功能都非常酷。

### 背景颜色`UIButton`

实际的 UIButton 将有一个背景颜色`[UIColor clear]`，但是，对于整个键盘背景，最好在 Photoshop 中创建类似的东西，然后再次使用颜色选择器来获得正确的渐变。然后你可以把它作为背景图像拖到 IB 中。

### 字体

再一次，看看字体/试试 Helvetica

### 文字颜色

```
[UIColor black] 
```

### 阴影：

以编程方式：

```
[text setShadowOffset:(0,1)]; // One option
[text setShadowOffset:(0,-1); // Another option
[text setShadowColor:[UIColor whiteColor]]; 
```

但是，您也可以在 IB 检查器中为 UILabel 设置阴影。

### 按钮突出显示

查看 UIButton 参考 [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

### 间距和旋转

如果您使用 IB，那么您可以将按钮拖到任何位置。IB 有一些自动调整大小的选项，可以根据 TOP、LEFT、RIGHT 和 BOTTOM 确定按钮的间距。您还可以设置它们是否可拉伸。

# javascript - Node.js 中的 JavaScript/ECMAScript 数组是否“稀疏”？

> ID：10255003
> 
> 赞同：4
> 
> 时间：2012-04-21T00:06:05.377
> 
> 标签：javascript, arrays, node.js, sparse-array

我的问题与[JavaScript 数组是否稀疏？](https://stackoverflow.com/questions/1510778/are-javascript-arrays-sparse)有一个区别...

**JavaScript 数组是否像 Node.js（和/或 V8）中实现的那样**稀疏？我以为是，但后来我做了以下测试：

```
var testArray = [];
testArray[10000] = 'test';
console.log(testArray); 
```

返回的是 10,000 个空白元素，最后是 'test'。这是因为调试输出的工作方式，还是 Node.js 在添加新元素时实际上为未定义的数组元素分配了内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T00:28:22.477

你看到的不是一个实际的数组，只是一个表示。控制台检查是否存在 a`length`和 a`splice`属性并打印对象的数字属性，这就是为什么 jQuery 集合在记录时看起来是数组的原因。

```
function RandomThingThatIsDefinitelyNotAnArray() {
    this.splice = function() {};
    this.length = 10;
    this[5] = 5;
}

console.log(new RandomThingThatIsDefinitelyNotAnArray());​
// shows [undefined, undefined, undefined, undefined, undefined, 5] 
```

[jsfFiddle](http://jsfiddle.net/na4Jc/)进行现场演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T05:12:09.723

Node 的 util.inspect 函数专门检查稀疏数组以像这样打印它们。事实上，它有[一个专门检查它的测试](https://github.com/joyent/node/blob/master/test/simple/test-util-inspect.js#L43)。我知道这一点是因为我对节点检查器的完全重写最终没有进入核心，并导致我的[UltraREPL](https://github.com/Benvie/Node.js-Ultra-REPL)。

# javascript - 破碎的 jQuery 滑块

> ID：10255005
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:06:13.967
> 
> 标签：javascript, jquery, slider

我有一个 jQuery javascript 滑块的问题。

基本上我在这个网站上的滑块有问题[http://crearewebsites.co.uk/victoria/pb-metal-dev/](http://crearewebsites.co.uk/victoria/pb-metal-dev/)

它被称为轨道滑块，可从[http://www.zurb.com/playground/orbit-jquery-image-slider](http://www.zurb.com/playground/orbit-jquery-image-slider)获得，我尝试搜索他们的文档等，但没有帮助。

问题是，当第一次加载页面时，所有幻灯片都非常快速地闪过，然后它会在第一张幻灯片上卡住 2 个周期，然后才能正常工作。

还有一种方法可以强制它在图像容器后面，因为圆角在动画时应该覆盖幻灯片。

任何帮助，即使是最轻微的也将不胜感激，干杯！

这是我用来调用滑块的代码：

```
<script src="js/jquery.orbit-1.2.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
 $(window).load(function() {
   $('#slider').orbit({
  'timer': true,
  'advanceSpeed': 6000,     
  'bullets' : false,        
  'bulletThumbs': false,
 }); 
```

的HTML

```
 <div id="slider-container">
     <div id="slider" class="png-fix">
        <img src="Images/energy-efficient-powder-coating-equipment.png" class="png-fix slide-img" alt="PB Metal Finishing Spray Save System" /> 
        <img src="Images/experts-in-powder-coating-equipment.png" class="png-fix slide-img" alt="Experts in Powder Coating Equipment" />
        <img src="Images/complete-turnkey-modular-powder-coating-plant-solutions.png" class="png-fix slide-img" alt="Complete modular, turnkey powder coating plant solutions." /> 
```

认为它可能是 JavaScript 代码中的某些内容：

* * *

```
(function(e) {
        e.fn.orbit = function(a) {
                a = e.extend({
                    animation: "horizontal-push",
                    animationSpeed: 600,
                    timer: true,
                    advanceSpeed: 4E3,
                    pauseOnHover: false,
                    startClockOnMouseOut: false,
                    startClockOnMouseOutAfter: 1E3,
                    directionalNav: true,
                    captions: true,
                    captionAnimation: "fade",
                    captionAnimationSpeed: 600,
                    bullets: false,
                    bulletThumbs: false,
                    bulletThumbLocation: "",
                    afterSlideChange: function() {}
                }, a);
                return this.each(function() {
                            function t() {
                                if (!a.timer || a.timer == "false") return false;
                                else if (u.is(":hidden")) v = setInterval(function() {
                                    o("next")
                                }, a.advanceSpeed);
                                else {
                                    r = true;
                                    A.removeClass("active");
                                    v = setInterval(function() {
                                        var d = "rotate(" + p + "deg)";
                                        p += 2;
                                        w.css({
                                            "-webkit-transform": d,
                                            "-moz-transform": d,
                                            "-o-transform": d
                                        });
                                        if (p > 180) {
                                            w.addClass("move");
                                            B.addClass("move")
                                        }
                                        if (p > 360) {
                                            w.removeClass("move");
                                            B.removeClass("move");
                                            p = 0;
                                            o("next")
                                        }
                                    }, a.advanceSpeed / 180)
                                }
                            }

                            function q() {
                                if (!a.timer || a.timer == "false") return false;
                                else {
                                    r = false;
                                    clearInterval(v);
                                    A.addClass("active")
                                }
                            }

                            function C() {
                                if (!a.captions || a.captions == "false") return false;
                                else {
                                    var d = c.eq(b).data("caption");
                                    if (_captionHTML = e(d).html()) {
                                        l.attr("id", d).html(_captionHTML);
                                        a.captionAnimation == "none" && l.show();
                                        a.captionAnimation == "fade" && l.fadeIn(a.captionAnimationSpeed);
                                        a.captionAnimation == "slideOpen" && l.slideDown(a.captionAnimationSpeed)
                                    } else {
                                        a.captionAnimation == "none" && l.hide();
                                        a.captionAnimation == "fade" && l.fadeOut(a.captionAnimationSpeed);
                                        a.captionAnimation == "slideOpen" && l.slideUp(a.captionAnimationSpeed)
                                    }
                                }
                            }

                            function D() {
                                if (a.bullets) F.children("li").removeClass("active").eq(b).addClass("active");
                                else return false
                            }

                            function o(d) {
                                function g() {
                                    c.eq(m).css({
                                        "z-index": 1
                                    });
                                    x = false;
                                    a.afterSlideChange.call(this)
                                }
                                var m = b,
                                    h = d;
                                if (m == h) return false;
                                if (c.length == "1") return false;
                                if (!x) {
                                    x = true;
                                    if (d == "next") {
                                        b++;
                                        if (b == s) b = 0
                                    } else if (d == "prev") {
                                        b--;
                                        if (b < 0) b = s - 1
                                    } else {
                                        b = d;
                                        if (mb) h = "prev"
                                    }
                                    D();
                                    c.eq(m).css({
                                        "z-index": 2
                                    });
                                    a.animation == "fade" && c.eq(b).css({
                                        opacity: 0,
                                        "z-index": 3
                                    }).animate({
                                        opacity: 1
                                    }, a.animationSpeed, g);
                                    if (a.animation == "horizontal-slide") {
                                        h == "next" && c.eq(b).css({
                                            left: k,
                                            "z-index": 3
                                        }).animate({
                                            left: 0
                                        }, a.animationSpeed, g);
                                        h == "prev" && c.eq(b).css({
                                            left: -k,
                                            "z-index": 3
                                        }).animate({
                                            left: 0
                                        }, a.animationSpeed, g)
                                    }
                                    if (a.animation == "vertical-slide") {
                                        h == "prev" && c.eq(b).css({
                                            top: y,
                                            "z-index": 3
                                        }).animate({
                                            top: 0
                                        }, a.animationSpeed, g);
                                        h == "next" && c.eq(b).css({
                                            top: -y,
                                            "z-index": 3
                                        }).animate({
                                            top: 0
                                        }, a.animationSpeed, g)
                                    }
                                    if (a.animation == "horizontal-push") {
                                        if (h == "next") {
                                            c.eq(b).css({
                                                left: k,
                                                "z-index": 3
                                            }).animate({
                                                left: 0
                                            }, a.animationSpeed, g);
                                            c.eq(m).animate({
                                                left: -k
                                            }, a.animationSpeed)
                                        }
                                        if (h == "prev") {
                                            c.eq(b).css({
                                                left: -k,
                                                "z-index": 3
                                            }).animate({
                                                left: 0
                                            }, a.animationSpeed, g);
                                            c.eq(m).animate({
                                                left: k
                                            }, a.animationSpeed)
                                        }
                                    }
                                    C()
                                }
                            }
                            var b = 0,
                                s = 0,
                                k, y, x, j = e(this).addClass("orbit"),
                                f = j.wrap('').parent();
                            j.add(k).width("1px").height("1px");
                            var c = j.children("img, a img, div");
                            c.each(function() {
                                var d = e(this),
                                    g = d.width();
                                d = d.height();
                                if (g > j.width()) {
                                    j.add(f).width(g);
                                    k = j.width()
                                }
                                if (d > j.height()) {
                                    j.add(f).height(d);
                                    y = j.height()
                                }
                                s++
                            });
                            if (c.length == 1) {
                                a.directionalNav = false;
                                a.timer = false;
                                a.bullets = false
                            }
                            c.eq(b).css({
                                "z-index": 3
                            }).fadeIn(function() {
                                c.css({
                                    display: "block"
                                })
                            });
                            if (a.timer) {
                                f.append('');
                                var u = e("div.timer"),
                                    r;
                                if (u.length != 0) {
                                    var w = e("div.timer span.rotator"),
                                        B = e("div.timer span.mask"),
                                        A = e("div.timer span.pause"),
                                        p = 0,
                                        v;
                                    t();
                                    u.click(function() {
                                        r ? q() : t()
                                    });
                                    if (a.startClockOnMouseOut) {
                                        var E;
                                        f.mouseleave(function() {
                                            E = setTimeout(function() {
                                                r || t()
                                            }, a.startClockOnMouseOutAfter)
                                        });
                                        f.mouseenter(function() {
                                            clearTimeout(E)
                                        })
                                    }
                                }
                            }
                            a.pauseOnHover && f.mouseenter(function() {
                                q()
                            });
                            if (a.captions) {
                                f.append('');
                                var l = f.children(".orbit-caption");
                                C()
                            }
                            if (a.directionalNav) {
                                if (a.directionalNav == "false") return false;
                                f.append('RightLeft');
                                var n = f.children("div.slider-nav").children("span.left"),
                                    z = f.children("div.slider-nav").children("span.right");
                                n.click(function() {
                                    q();
                                    o("prev")
                                });
                                z.click(function() {
                                    q();
                                    o("next")
                                })
                            }
                            if (a.bullets) {
                                f.append('');
                                var F = e("ul.orbit-bullets");
                                for (i = 0; i "+(i+1)+"
                                    ");if(a.bulletThumbs)if(z=c.eq(i).data("
                                    thumb ")){n=e(''+i+"
                                    ");n.css({background:"
                                    url("+a.bulletThumbLocation+z+") no - repeat "})}e("
                                    ul.orbit - bullets ").append(n);n.data("
                                    index ",i);n.click(function(){q();o(e(this).data("
                                    index "))})}D()}})}})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:10:37.313

我尝试了一个示例 html，它可以正常工作。`<img />`图像（在我的示例中）按照我声明标签的顺序呈现

在您的页面中，图像不是以这种方式呈现的。这应该是图像加载/缓存的问题吗？

我尝试使用 firebug/firefox 进行调试。您的最后一张图像首先呈现。

示例 HTML：

```
 <body>
    <div id="imgslider">
        <img src="http://www.lorempixum.com/898/270/animals" alt="" /> 
        <img src="http://www.lorempixum.com/898/270/city" alt="" /> 
        <img src="http://www.lorempixum.com/898/270/food" alt="" /> 
        <img src="http://www.lorempixum.com/898/270/sports" alt="" /> 
    </div>
    <pre>Animals -> City -> Food -> Sports</pre>
    <script type="text/javascript">
        $(window).load(
            function(){
                $('#imgslider').orbit({
            'timer': true,
            'advanceSpeed': 6000,
            'bullets' : false,
            'bulletThumbs': false, 
            });});
    </script>
</body> 
```

# mysql - SqlServer 中的 FILESTREAM 存储-> MySQL 等价物？

> ID：10255010
> 
> 赞同：13
> 
> 时间：2012-04-21T00:07:17.390
> 
> 标签：mysql

MySQL 版本中是否有任何等价物。5.5 用于 SqlServer 中的 FILESTREAM 存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:33:13.850

目前，没有。在 MySQL 中存储二进制数据只有`BLOB`,`CLOB`等数据类型。

# django - 每次迭代的 Django 查询都会访问数据库

> ID：10255011
> 
> 赞同：2
> 
> 时间：2012-04-21T00:07:27.870
> 
> 标签：django, django-queryset

我有一些**model.py**像这样：

```
class Muestraonline(models.Model):
    accessionnumber = models.ForeignKey(Muestra, related_name='online_accessionnumber')
    muestraid = models.ForeignKey(Muestra)
    taxonid = models.ForeignKey(Taxon, null=True, blank=True)
    ...

class Muestra(models.Model):
    muestraid = models.IntegerField(primary_key=True, db_column='MuestraID') # Field name made lowercase.
    latitudedecimal = models.DecimalField(decimal_places=6, null=True, max_digits=20, db_column='LatitudeDecimal', blank=True) # Field name made lowercase.
    longitudedecimal = models.DecimalField(decimal_places=6, null=True, max_digits=20, db_column='LongitudeDecimal', blank=True) # Field name made lowercase.
    ... 
```

而我的**view.py**我想获得唯一的标本并找到所有共享该分类的标本。对于相关标本，我只需要纬度/经度信息：

```
def specimen_detail(request, accession_number=None, specimen_id=None):
    specimen = Muestraonline.objects.get(accessionnumber=accession_number, muestraid=specimen_id)
    related_specimens = Muestraonline.objects.filter(taxonid=specimen.taxonid).exclude(id=specimen.id)

    # create array for the related specimen points 
    related_coords = []
    # loop through results and populate array
    for relative in related_specimens:
        latlon = (format(relative.muestraid.latitudedecimal), format(relative.muestraid.longitudedecimal))
        related_coords.append(latlon) 
    related_coords = simplejson.dumps(related_coords) 
```

但是当我循环遍历`related_specimens`它时，每个`relative`. 难道我不应该只用一个额外的数据库查询就可以得到我需要的格式的`latitudedecimal`和值吗？`longitudedecimal`我知道我在这里的方法中遗漏了一些非常基本的东西，只是不确定完成这项工作的最佳方法。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T00:17:11.797

只需在 QuerySet 中使用[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)：

```
related_specimens = Muestraonline.objects.filter(taxonid=specimen.taxonid).exclude(id=specimen.id).select_related('muestraid') 
```

这会将您的`Muestraonline`模型加入`Muestra`幕后，并且`Muestraonline`QuerySet 返回的每个实例也将包含`Muestra`.

# php - jquery 悬停选项然后单击以加载页面

> ID：10255012
> 
> 赞同：1
> 
> 时间：2012-04-21T00:07:47.330
> 
> 标签：php, jquery

我的问题：

我有一排 div 标签，当用户将鼠标悬停在它们上方时，它们充当列的标题，div 更改为排序选项，例如 ASC 和 DESC。我需要他们做的是，当用户单击其中一个选项时，将弹出一个警报，其中包含单击选项的值和 div 类名称。

例如，如果用户单击 ASC，则会弹出一个警报，如果单击 desc，则会弹出 headerID ASC 1 或 headerID DESC 2。

对于我的生活，我无法弄清楚这一点。现在我正在使用警报进行测试，然后我将使用 .load() 加载带有排序选项的页面

div = headerID

排序 = ASC

值 = 1

或者

div = headerID

排序 = DESC

值 = 2

取决于点击了什么。

我已经拥有的演示[http://jsfiddle.net/hmeHn/1/](http://jsfiddle.net/hmeHn/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:21:50.090

这是许多可能的解决方案之一

[http://jsfiddle.net/eQJSU/2/](http://jsfiddle.net/eQJSU/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:24:34.600

像这样的东西？

[http://jsfiddle.net/hmeHn/6/](http://jsfiddle.net/hmeHn/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T00:26:47.120

我会将 ASC 和 DESC 文本制作成链接，其中包含与它们中的每一个相关的点击操作。然后，在`click`回调中，提供您的操作：

```
 $(this).html('<span id="sortShow">\
                 <a href="#" class="asc">ASC</a> | \
                 <a href="#" class="desc">DESC</a></span>');
    $(this).on('click', 'asc', function(e) {
        e, preventDefault();
        alert('Ascending');
    }).on('click', 'desc', function(e) {
        e, preventDefault();
        alert('Descending');
    }) 
```

这只是一个粗略的例子。此外，我建议不要在 jQuery 选择器中使用正则表达式，因为它们比其他选择器慢得多。div[class*=header] 不好。尝试使用另一个类来区分您的标题。

# c++ - 如何使用 OpenCV 从名片中删除非文本区域？

> ID：10255013
> 
> 赞同：0
> 
> 时间：2012-04-21T00:07:54.180
> 
> 标签：c++, image-processing, opencv, ocr, image-segmentation

我的目标是从扫描的名片图像中删除任何非文本区域，但我不知道使用 OpenCV 执行该操作的步骤，我已按照此步骤操作，但不知道这是不是正确的，我也不知道t 注意到图像的任何变化（非文本区域仍然存在）任何想法都会非常有帮助，谢谢。

1）将图像转换为灰度

2）二进制图像

3) 反转颜色 (cv::bitwise_not) 以获得白色像素文本

4) 腐蚀图像(cv::erode)

5）使用canny检测边缘

6）使用霍夫变换检测文本行（尚未）

代码：

```
cv::Mat greyMat = [self.imageView.image CVGrayscaleMat];
cv::Mat bwMat;
cv::threshold(greyMat, bwMat, 128, 255, CV_THRESH_BINARY);
cv::bitwise_not(bwMat, bwMat);
cv::Mat element = cv::getStructuringElement(cv::MORPH_RECT, cv::Size(2, 1));
cv::erode(bwMat, bwMat, element);
std::vector<cv::Point>points;
cv::Mat_<uchar>::iterator it=bwMat.begin<uchar>();
cv::Mat_<uchar>::iterator end=bwMat.end<uchar>();
for (; it!=end; ++it) 
if (*it) 
points.push_back(it.pos());
cv::RotatedRect box=cv::minAreaRect(cv::Mat(points));
plImage* smothedImage=new IplImage(bwMat); 
cvSmooth(smothedImage, smothedImage);
cvCanny(smothedImage, smothedImage, 10, 100); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T23:36:21.487

定义徽标的一种方法可能是徽标部分包含比文本部分更粗的线条和更大的斑点。

如果这是真的，您可以像这样删除徽标：

（我使用 imagemagick 生成以下示例，你应该可以与 opencv 相同）

0）阈值图像（可选）

```
 imagemagick: convert img0052ir.jpg -threshold 60% monochrome.png 
```

![输出：转换 img0052ir.jpg -threshold 60% 单色.png](../Images/364be670d1070506e1c999cf995d206e.png)

1）放大图像，直到所有字母都消失，但徽标的某些部分仍然存在。

```
 orgImg = business card image 
 cvDilate (orgImg, curImg, null, Some_Value) // find a value that erases all letters but leaves the logo 
```

或者

```
 imagemagick:  convert monochrome.png -morphology dilate:3 diamond dilated.png 
```

![connvert mono.png -morphology dilate:3 diamond dilated.png 的输出](../Images/a79f6b0e0874a6b464897e42258c2543.png)

2) 条件腐蚀膨胀后的图像，使用原始图像作为掩码，直到徽标再次完整。

这意味着您侵蚀了扩张的图像，但绝不会将像素值设置为低于原始源图像中的值。您使用原始图像作为掩码来保护图像的某些部分免受更改。

这将恢复所有仍然有一些种子部分的形状，所以只有徽标

```
 // Not sure if opencv can use a mask in morphologial operations, 
 // but you can just use erode + max in a loop to achive the same effect albeit slower
 repeat
    lastImg = curImg
    cvErode (lastImg, curImg, null ,1)
    cvMax (curImg, orgImg, curImg)
 until lastImg == curImg 
```

或者

```
 imagemagick: convert dilated.png -morphology erode:20 diamond -clip-mask monochrome.png eroded.png 
```

![convert dilated.png -morphology erode:20 diamond -clip-mask 单色.png eroded.png 的输出](../Images/b43f4f6164e2ca1db5a19ac4db6bb480.png)

您现在有一个只有徽标而没有文字的图像，使用此图像删除徽标

```
 imagemagick: convert eroded.png -negate img0052ir.jpg -compose plus -composite test.png 
```

![在此处输入图像描述](../Images/8843842e01fb67f690959cfe62218310.png)

如您所见，它远非完美。也许在opencv中玩弄阈值，膨胀内核等，看看是否可以改进。但是我怀疑是否有一个通用的解决方案可以删除所有徽标并且不删除任何文字

**编辑：添加了一些图片**

# mysql - MySQL & Hibernate：左外连接与多选的性能

> ID：10255018
> 
> 赞同：2
> 
> 时间：2012-04-21T00:09:11.603
> 
> 标签：mysql, sql, hibernate, join

我在 MySQL 中有两个表，“apps”和“icons”，每个表大约有 750K 行。在 Hibernate 中，我将它们建模为：

```
public class App {
    @Basic
    private String title;

    @OneToOne(mappedBy = "app")
    private Icon icon;
    // etc...
}

public class Icon {
    @Basic
    private String name;

    @OneToOne
    private App app;
    // etc...
} 
```

当我添加这个关系时，我很快遇到了一个性能问题——在单个应用程序中读取需要超过 1 秒。我检查了 Hibernate 生成的 SQL，发现它是这样加入的：

```
select
    apps.id as app_id,
    apps.title as app_title,
    icons.id as icon_id,
    icons.name as icon_name
from
    apps
left outer join
    icons
        on apps.id=icons.app_id 
where
    apps.id="zyz"; 
```

我发现添加`@Fetch(FetchMode.SELECT)`注释大大提高了性能，将其降低到大约 30 毫秒，从而有效地获得相同的结果。这是生成的带有`@Fetch(FetchMode.SELECT)`注释的 SQL：

```
select
    apps.id as app_id,
    apps.title as title
from
    apps 
where
    apps.id="xyz";

select
    icons.id as icon_id,
    icons.name as icon_name
from
    icons
where
    icons.app_id="xyz"; 
```

为什么左外连接这么慢？连接查询上的“解释”显示：

```
+----+-------------+-------+-------+---------------+---------+---------+-------+--------+-------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref   | rows   | Extra |
+----+-------------+-------+-------+---------------+---------+---------+-------+--------+-------+
|  1 | SIMPLE      | apps  | const | PRIMARY       | PRIMARY | 767     | const |      1 |       | 
|  1 | SIMPLE      | icons | ALL   | NULL          | NULL    | NULL    | NULL  | 783556 |       | 
+----+-------------+-------+-------+---------------+---------+---------+-------+--------+-------+ 
```

所以它显然是访问每一行，而不是多选查询的单行。连接不能使用我在 icons.app_id 上的索引吗？

PS：是的，我在计时运行之间使用了“RESET QUERY CACHE”。

**更新：**移动到一个`bigint`主键，用它来连接表而不是`VARCHAR`，并且连接的性能现在与“多选”方法相当。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:33:27.153

根据您的解释，我认为问题出在数据库层而不是应用程序层的架构上。

连接到图标表没有条目的事实`possible_keys`使我相信您正在运行没有 FK 约束的 MyISAM 存储引擎或 InnoDB 存储引擎。此外，767 的密钥长度让我觉得不寻常，我只见过这个值 < 10。

*   如果引擎是 MyISAM：向列添加索引`icons.app_id`。并考虑使用 InnoDB 引擎，这样您就可以建立 FK 约束，这样您就不会以孤立的行结束。

*   `icons.app_id`如果引擎是 InnoDB：向which references添加 FK 约束`apps.id`。通过添加 FK 约束，您不仅可以确保数据不会成为孤立数据，还可以优化表之间的连接，因为您被迫在两列上创建索引。

上述任何一种解决方案都应该大大提高您的性能。让我知道事情的后续。

您可以使用以下链接阅读有关某些讨论主题的更多信息：

*   [InnoDB 存储引擎](http://dev.mysql.com/doc/refman/5.5/en/innodb-storage-engine.html)

*   [外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

**- 更新 -**

当您准备好添加 INT 列时，这里有一些示例更改，请记住首先在 dev 上执行此操作，并确保在推送到生产之前解决问题。

对于应用程序表：

```
 ALTER TABLE apps
     ADD COLUMN idi int(11) UNSIGNED auto_increment FIRST,
     DROP PRIMARY KEY,
     ADD PRIMARY KEY(idi); 
```

对于图标表：

```
 ALTER TABLE icons
     ADD COLUMN app_idi int(11) UNSIGNED auto_increment AFTER app_id,
     ADD INDEX (app_idi ),
     ADD FOREIGN KEY (app_idi) REFERENCES apps(app_idi) ON DELETE CASCADE; 
```

这些改变只是示范性的，但应该足以让你朝着正确的方向开始。您可以阅读我发布的关于外键约束的 MySQL 文档以获取更多信息。现在，通过在应用程序和图标之间设置 FK 约束，如果删除了任何应用程序，与图标匹配的行`app.id`也将被删除，确保您不会孤立任何数据。如果您不想删除`icons`表中的关联行，您可以更改`ON DELETE CASCADE`为`ON DELETE NULL`，它们将与`apps`表取消链接，但仍驻留在`icons`表中。

# asp.net-mvc - ASP.NET MVC 编辑操作？

> ID：10255021
> 
> 赞同：0
> 
> 时间：2012-04-21T00:09:32.207
> 
> 标签：asp.net-mvc

```
@Html.ActionLink("Edit", "EditArticle", new { ArticleID = article.ArticleID }) 
```

我通过 ArticleID 检索文章并返回到编辑页面，如下所示：

```
public ActionResult EditArticle(Guid ArticleID)
{
    AddArticleModel AddArticleModel = new AddArticleModel();
    AddArticleModel.Categories = entity.TBL_CATEGORIES.Select(a => a);
    AddArticleModel.Article = dbo.SelectArticleById(ArticleID);

    return View(AddArticleModel);
} 
```

到这里为止没有问题。

在我的编辑页面中，我正在更改文章的一些属性（不是所有属性）。例如，我正在更改标题、内容和更新日期。像这样：

```
@model DunyaYazilim.Models.AddArticleModel

@{
    ViewBag.Title = "EditArticle";
    Layout = "~/Views/Shared/_LayoutAuthor.cshtml";
}

@using (Html.BeginForm((string)ViewBag.FormAction, "Author"))
{
    @Html.ValidationSummary(true, "Makale gönderilirken bir hata oluştu. Lütfen daha sonra tekrar deneyin.")

    <div>
        <div class="label_header">@Html.Label("Kategori Seçiniz:")</div>
        <div>@Html.DropDownList("CategoryID", new SelectList(Model.Categories, "CategoryID", "Name"),Model.Article.TBL_CATEGORIES.Name)</div>
        <div class="label_header">@Html.Label("Makale Başlık:")</div>
        <div>@Html.TextBoxFor(m => m.Article.Title, new { @class = "my_textbox" })</div>
        <div class="label_header">@Html.Label("Makale Açıklama:")</div>
        <div>@Html.TextAreaFor(m => m.Article.Description, new { @class = "my_textarea" })</div>
        <div class="label_header">@Html.Label("Makale İçerik:")</div>
        <div>@Html.TextAreaFor(m => m.Article.ArticleContent, new { @class = "my_textarea" })</div>
        <div><input type="submit" value="Gönder" class="my_button" /></div>
    </div>
} 
```

然后我将其发布到：

```
[HttpPost]
public ActionResult EditArticle(AddArticleModel AddArticleModel, String CategoryID)
{
    //TODO: update database...
    return View(AddArticleModel);
} 
```

但未更改的属性返回 null（ArticleID、UserID 等）。所以我无法更新数据库，因为发布后我没有 ArticleID。这是什么原因？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:53:46.400

MVC 在请求之间不会为您维护任何内容。当您发布到您的操作时，它只会发布您在表单中设置的值。由于表单中没有您的文章 ID 或用户 ID（或其他任何地方，例如路由或查询字符串），MVC 在您的 EditArticle 操作的模型绑定期间不会知道它们。

如果您希望通过您的帖子发送额外的详细信息，您可以在表单中放置隐藏字段，例如

```
@Html.HiddenFor(m => m.Article.Id) 
```

# javascript - JavaScript/HTML5 Canvas - 加载图像数组

> ID：10255025
> 
> 赞同：3
> 
> 时间：2012-04-21T00:10:10.937
> 
> 标签：javascript, html, canvas

我有一个图像文件夹，总共 32x32 个图块。我正在尝试使用 JavaScript 将这些图像加载到 HTML5 画布上。

这是我所拥有的：

```
window.onload = function(){
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    var imageObj = new Image();
    var tiles = [];

    canvas.width = 512;
    canvas.height = 352;

    for (x = 0; x <= 520; x++) {
        imageObj.src = "line_tile/t"+x+".png";
        tiles.push(imageObj);
    } 

    var theX;
    var theY;
    for (x = 0; x <= 10; x++) {
        for (y = 0; y <= 15; y++) {

            theX = x*32;
            theY = y*32;

            context.drawImage(tiles[2], theY, theX,32,32);
            console.log("Tile X: "+x+" | Tile Y: "+y+" - X Pos: "+theX+" | Y Pos: "+theY);
        }
    } 
}; 
```

问题是这段代码只加载了最后一个图块（在这种情况下`tile[520]`）。实际上我想加载所有的瓷砖。无论。如何正确地将一组图像放入数组并加载它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:15:35.340

您修改了 imageObj 的单个实例；所以基本上你最终得到一个数组都指向同一个实例，它以 520 结尾。

尝试

```
for (x = 0; x <= 520; x++) {
    var imageObj = new Image(); // new instance for each image
    imageObj.src = "line_tile/t"+x+".png";
    tiles.push(imageObj);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:02:21.350

与您的问题不严格相关，但您可能会遇到它（使用当前代码）

我不确定在将图像添加到图块数组**之前**是否不需要先查看图像是否已实际加载。

# javascript - 将标签添加到混合内容文本区域字段的好解决方案？

> ID：10255030
> 
> 赞同：1
> 
> 时间：2012-04-21T00:11:25.587
> 
> 标签：javascript, jquery, tagging

一直试图为此找到一个好的解决方案，但我还没有发现任何东西。我发现很多插件可以将输入转换为可标记的文本输入字段，但几乎所有插件都用于添加“仅”标签。我发现的最接近的是：[http ://daniel-zahariev.github.com/jquery-textntags/](http://daniel-zahariev.github.com/jquery-textntags/)

但是，问题在于编辑。如果您键入 10 个句子并在每个句子中添加一个标签，然后单击返回到第 5 个句子并决定要添加另一个标签，那么几个现有标签的样式就会完全失控......最终我很想为此编写一个补丁，但我需要一些快速且易于实现的东西。

我最终需要的是一个插件，它允许我编辑文本段落，在我们的编辑想要的文本中添加和删除标签，而不会破坏现有标签......有意义吗？想法？

# objective-c - 将 AVAudioPlayerDelegate 设置为 self 会给我一个警告

> ID：10255032
> 
> 赞同：4
> 
> 时间：2012-04-21T00:12:08.223
> 
> 标签：objective-c

```
'__strong' only applies to objective-c object or block pointer types; type here is 'void *' 
```

这是我的 AVAudioPlayer.h 文件中的“__strong”行（这是一个导入的框架）

```
@interface AVAudioPlayer : NSObject {
@private
    __strong void *_impl;
} 
```

我的 .h 文件看起来像这样

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVAudioPlayer.h>

@interface excerViewController : UIViewController <AVAudioPlayerDelegate,UIAccelerometerDelegate>

@property (weak, nonatomic) IBOutlet UILabel *avgLabel;
@property (weak, nonatomic) IBOutlet UILabel *modeLabel;
@property (weak, nonatomic) IBOutlet UILabel *scoreLabel;
@property (weak, nonatomic) IBOutlet UILabel *timeLabel;
@property (weak, nonatomic) IBOutlet UIButton *playButton;
@property int subScore;
@property int score;
@property int seconds;
@property int moments;
@property NSMutableString *average;
@property double avg;
@property BOOL locked;
@property double delta;
@property UIAccelerometer *accel;
@property AVAudioPlayer *player;
-(void)drawEnergy:(double)energy;
@end 
```

我一生都无法弄清楚为什么会出现此错误。StackOverflow 上的另一个人有这个问题，这不是我得到它的原因（['__strong' 仅适用于objective-c 对象或块指针类型；这里的类型是 XXX" 警告](https://stackoverflow.com/questions/9430933/strong-only-applies-to-objective-c-object-or-block-pointer-types-type-here)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:27:41.797

因为 void* 是指向没有类型的参数的指针，而不是真正的对象，所以 __strong 不适用于它。

# c++ - g++ 可变参数模板。简单示例代码无法编译，抱怨“不是模板”

> ID：10255038
> 
> 赞同：4
> 
> 时间：2012-04-21T00:14:19.563
> 
> 标签：c++, c++11, g++, variadic-templates

我正在探索这个陌生的领域，并认为我会尝试[Danny Kalev 关于此事的教程中的](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=397)一个简单示例。代码非常简单：

```
template<> struct Count<> { static const int value = 0;};

template<typename T, typename... Args>
    struct Count<T, Args...> //partial specialization
{ 
    static const int value = 1 + Count<Args...>::value;
}; 
```

但是 gcc 4.4.7 甚至 4.7.0 抱怨（尽管有 -std=c++0x -std=gnu++0x 标志）：

```
/src/tests/VTemplates.h:12:8: error: 'Count' is not a template
/src/tests/VTemplates.h:12:18: error: explicit specialization of non-template 'Count'
/src/tests/VTemplates.h:16:8: error: 'Count' is not a template
/src/tests/VTemplates.h:16:26: error: 'Count' is not a template type 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T00:21:25.933

```
template<> struct Count<> { static const int value = 0;}; 
```

是没有模板参数的模板特化。但是你不能特化一个还不是非特化模板的模板类。也就是说你必须先建立一个非特化版本的模板类，然后才能特化它。例如，如果你这样做了：

```
//non-specialized template
template<typename... Args>
struct Count;

//specialized version with no arguments
template<> struct Count<> { static const int value = 0;};

//another partial specialization
template<typename T, typename... Args>
struct Count<T, Args...> 
{ 
    static const int value = 1 + Count<Args...>::value;
}; 
```

那会奏效。

# c# - TryParse 无法正确解析

> ID：10255039
> 
> 赞同：2
> 
> 时间：2012-04-21T00:14:19.583
> 
> 标签：c#, facebook, facebook-graph-api, resolve

Facebook API 函数`FacebookOAuthResult.TryParse()`无法解析。我为`TryParse`函数提供了正确的输入参数。我已经在项目的 Visual Studio 参考下正确添加了 Facebook 库。许多功能正在得到正确解决，但`TryParse`没有得到解决。关于这个问题的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T23:52:59.233

我注意到 FacebookClient 对象上有一个 ParseOauthCallbackUrl，它返回一个 FacebookOAuthResult 对象。即将实施并尝试一下，但这似乎是新的位置。

# c++ - 为什么我的函数没有执行 i++？

> ID：10255040
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:14:36.233
> 
> 标签：c++, string, object, for-loop

我正在一个面向对象程序的类中编写一个 get 函数，但是由于`i++`某种原因我的代码中没有执行。

这是我的 .cpp 文件中使用的内容：

```
char MyString::Get(int i)
{
  if( i = '\0')
  {
    exit(1);
  }
  else
  {
    return String[i];
  }
} 
```

这是在 main.cpp 文件中调用的内容：

```
for(int i=0; i < String1.Length()+1; i++) 
{
  cout<< String1.Get(i)<<" ";
}

cout << endl; 
```

这是 .cpp 文件中的长度方法以供参考：

```
int MyString::Length()
{
  int counter(0);

  while(String[counter] != '\0')
  {
    counter ++;
  }

  return (counter);
} 
```

另外：String1 = Jello World

输出：

> JJJJJJJJJJJJJJ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T00:19:09.520

好吧 - 可能是这个原因。您分配而不是比较。您将零分配给 i。'if' 测试失败（它为零），所以 exit 没有被调用，其余的例程运行 i == 为零。

```
 if( i = '\0')
   {
       exit(1);
   } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T00:18:50.653

您还没有真正显示足够的代码让某人能够弄清楚您的代码在做什么，但这看起来不正确：

```
 if( i = '\0') 
```

单个`=`符号导致`i`分配表达式右侧的值。
`if( '\0' )`评估为`if(false)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T00:27:56.660

正如其他人指出的那样，您正在执行分配而不是比较，因此“比较”将始终被视为错误 - 比较的结果是分配的值，在这种情况下为 0。

尽管它从未变得非常流行，但有一个相当简单的技术可以避免这个问题：当你与一个常数进行比较时，总是把常数放在左边。这样，如果您输入错误`==`as `=`，代码将无法编译：

```
 if ('\0' = i)   // error: lvalue required (or something on that order). 
```

# jquery - jQuery 滑块“更改”事件：我如何确定是谁调用了它？

> ID：10255041
> 
> 赞同：7
> 
> 时间：2012-04-21T00:14:41.030
> 
> 标签：jquery, jquery-ui-slider

我有一个滑块，用作音乐播放器中的时间线。最小值为 0，最大值为歌曲长度（以秒为单位）。每一秒（我用一个计时器来做这个），滑块移动并且值被设置为当前时间。此代码行如下所示：

```
$("#sliderTime").slider("option", "value", document.sound.controls.currentPosition); 
```

用户可以滑动/单击滑块并跳转到歌曲中的另一个点，这是通过触发函数“play(startPlayFromHere)”来实现的。它看起来像这样：

```
$("#sliderTime").slider({
   ...
  change: function (event, ui) { play(ui.value) },
}); 
```

问题是计时器中的代码行和用户都在调用滑块的相同“更改”事件，并且用户无法移动滑块。

**所以我的问题是如何确定用户是否调用了更改事件（这意味着它是计时器）？**

我希望它足够清楚，谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-21T03:05:20.653

`event.originalEvent`您可以通过在更改处理程序中进行测试来确定更改事件是手动发生还是以编程方式发生。

```
$('#slider').slider({
    change: function(event, ui) {
        if (event.originalEvent) {
            //manual change
            play(ui.value);
        }
        else {
            //programmatic change
        }
    }
}); 
```

见[小提琴](http://jsfiddle.net/PD7fX/2/)。

# web-services - 我需要一个 Web 服务来从服务器打开音频并提供一个我可以从任何地方访问的 uri

> ID：10255043
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:15:04.103
> 
> 标签：web-services, service, streaming

我不熟悉 Web 服务，使用或实现托管在服务器上以在 .mp3 uri 示例中提供音频的最佳技术/服务是什么：http: [//dl.dropbox.com/u/64382000/ mirror.mp3](http://dl.dropbox.com/u/64382000/mirror.mp3) 我需要实现一个服务来做同样的事情

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:29:18.833

RESTful Web 服务应该可以完成这项工作。以此为起点[。](http://www.ibm.com/developerworks/webservices/library/ws-restful)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:30:01.233

从理论上讲，您应该能够使用 Web 服务器（如 Apache、nginx，您最喜欢的 Web 服务器）并静态托管 mp3。

# objective-c - Xcode4 从现有项目创建静态库

> ID：10255044
> 
> 赞同：1
> 
> 时间：2012-04-21T00:15:13.127
> 
> 标签：objective-c, ios, xcode4, static-libraries

在 XCode4 中创建静态库时遇到问题。我一直在关注这个有用的[教程](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)：

但我一直遇到同样的问题。如何从现有项目创建库？我在构建项目（未运行）时遇到了困难，因为它似乎在我刚刚导入的代码中遇到了编译器错误。

如何设置现有项目以导入 Cocoa Touch 静态库项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:42:54.603

在链接部分中选择
**Target-> Build Settings将** **Mach-O 类型**更改为**静态库**

 ****![在此处输入图像描述](../Images/1d6d7a405038a62555f64616ed493b95.png)

你可以试试[这个](http://muthukumarela.wordpress.com/2012/05/24/ios-static-libraries-without-adding-header-files/)让你的静态库使用更智能****

# linux - SSH 身份验证（无 PAM）：如何知道用户是通过密钥还是密码登录？

> ID：10255047
> 
> 赞同：0
> 
> 时间：2012-04-21T00:15:51.673
> 
> 标签：linux, authentication, ssh

我想在用户 SSH 登录后做一些事情，这与通过公钥或密码不同。PAM 不会参与我的案件。

程序可以通过一种方法从 /var/log/messages 或 /var/log/auth.log 检查 SSH 身份验证信息。但通常，这些文件对普通用户来说是不可读的。也许我可以 chmod o+r，但这听起来不安全。

而且我还检查了一些与 SSH 相关的环境变量，例如“SSH_CONNECTION”，但它们都没有用。

有没有好的方法来做到这一点？感谢帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:52:59.010

Your only way right now is to change the LogLevel in /etc/ssh/sshd_config and parse your syslog output logs to find out what auth method was used.

LogLevel DEBUG have for sure the info needed, but you can probably find it also with VERBOSE level ... test it

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:27:40.327

你不能在它之外这样做`sshd`，而在它里面我知道的唯一方法是使用`authorized_keys`匹配特定的键并执行特定的命令。

# http - 哪个开源负载均衡器支持 SPDY？

> ID：10255052
> 
> 赞同：2
> 
> 时间：2012-04-21T00:16:57.617
> 
> 标签：http, nginx, haproxy, spdy

我知道 NginX SPDY 支持仍在开发中。是否有任何开源负载均衡器已经支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T13:17:04.653

[Haproxy](http://haproxy.1wt.eu/) 1.5 支持 spdy。与 jetty 9.1 一起，这是一个杀手级组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:30:58.617

使用[mod_spdy](https://developers.google.com/speed/spdy/mod_spdy/)，您可以在 Apache 中获得 SPDY 支持，并且 Apache 可以充当负载均衡器。

就我个人而言，我会等待 2 个月和/或帮助 Nginx SPDY 支持。

# c++ - 为什么第一次工作后调用 LoadLibrary 会失败并显示“找不到指定的模块”

> ID：10255055
> 
> 赞同：2
> 
> 时间：2012-04-21T00:17:44.883
> 
> 标签：c++, wcf, iis, com, loadlibrary

我有一个在 IIS7 上作为 WCF Web 服务运行的应用程序。它调用一个 COM 控件，然后该控件加载另一个带有数据的 dll。这个应用程序已经使用了很长一段时间并且正常工作，但最近我在一台机器上遇到了一个问题，其中 LoadLibrary 调用加载数据 dll 失败。但是，调用并不总是失败，它会在 IIS 服务重新启动后的第一次调用中起作用，然后再失败。

数据dll与COM控件存在同一目录下，当前目录设置为该目录。我已经检查过，当前目录没有设置为另一个目录，两个调用都保持不变。单独的调用是对 web 服务的单独调用，在它们之间，com 控件被卸载，数据 dll 也是如此。

如果我将数据 dll 放在系统目录中或使用 com 目录中 dll 的完整路径，则数据 dll 加载正常，所以我可以解决这个问题，但我只是想知道为什么会发生这种情况。当我在加载模块失败后调用 GetLastError 时，正如我所提到的，它只会给我“找不到指定的模块”错误。

LoadLIbrary的[MSDN 描述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx "DLL 搜索顺序")说，应该搜索当前目录，并且所有其他安装它的地方似乎都表明它通常会这样做。它发生故障的机器是 Windows Server 2008 R2 机器，尽管该应用程序之前已经在这种类型的机器上运行过很多次。

欢迎任何想法。有没有办法让 LoadLibrary 枚举它在哪里寻找？

谢谢，
乔丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:06:04.563

我还没有找到一个可以枚举所有 DLL 搜索路径的函数，它看起来相当复杂：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85% 29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)

Windows 在当前工作目录中搜索库的行为（除了 .exe 的位置）被[认为是潜在的安全漏洞](http://support.microsoft.com/kb/2389418)。那篇文章描述了一些在进程中排除当前目录的方法，包括 SetDllDirectory 函数。我不知道 IIS 是如何工作的，但如果你不控制进程，也许其他人正在篡改搜索设置？我认为 GetDllDirectory 会告诉你是否改变了。

还有一个[全局注册表设置](http://support.microsoft.com/?kbid=2264107)禁用搜索工作目录，但由于您的加载并不总是失败，我不得不猜测这不是原因。

# php - 如何正确格式化从网站检索到的文本？

> ID：10255058
> 
> 赞同：2
> 
> 时间：2012-04-21T00:18:43.033
> 
> 标签：php, android, textview, format, html

我正在为一家公司构建一个应用程序，不幸的是，该公司的网站设计非常糟糕。大多数 HTML 标签是错误的，有时是随机放置的，过度使用不间断空格，p 标签是随机分配的，它们不遵循任何规则等等......

我正在使用爬虫从他们的网站检索数据，然后通过我自己的网络服务将结果字符串提供给我的应用程序。问题是，一旦显示到android textview中，文本格式全部错误，分散且不均匀，非常混乱。

另外，值得一提的是，由于各种原因，我不能建议公司修改他们的网站......

我试过了

```
String text = Html.fromHtml(myString).toString(); 
```

和其他变体，我什至尝试过手动格式化它，但这很痛苦。

我的问题是：

是否有一种简单、优雅的方法可以直接在我的 Android 应用程序中使用我的 Web 服务上的 PHP 或使用 Java 重新格式化所有这些文本？

感谢任何愿意花时间回答的人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:23:14.417

如果您将代码保留在适当的位置，则可以使用[Tidy](http://php.net/manual/en/book.tidy.php)和 PHP 来清理代码。否则剥离 HTML 可能会使使用它更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:25:26.337

我会这样：不，没有简单、优雅的方法。HTML 结合了数据和视觉表示，它们本质上是相互联系的。要了解数据，您必须查看标签。标签喜欢`<h1>`并`<a>`带有含义。

如果 HTML 的结构足以将其分解为有意义的块：标题、正文和不相关/不重要的内容。然后你可以对这些应用重新设计原则。一个简单的解决方案是去掉所有标签，只获取 textNodes 并将它们拼接在一起。如果 HTML 的格式异常糟糕，您可能会得到乱序的句子，但如果 HTML 不是太做作，我希望这种方法应该有效。

为了让您了解所涉及的复杂性：您可以拥有`<span>`应用了样式的 s，例如`display: block`. 这改变了 span 的显示方式，从 inline 到 block，因此它的行为更像是 a `<div>`would。这意味着每个`<span>`人都可能在自己的行上，这似乎会强制换行。检测这些情况并非不可能，但它非常复杂。谁知道当你有列表元素、表格甚至浮动元素时会发生什么？他们可能完全不正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:19:17.103

可能不是最优雅的解决方案，但我设法通过根据我对 php 的需要剥离一些标签（这很容易做到）然后将检索到的字符串显示到格式化的 WebView 中来获得最佳结果。

正如我所说，可能不是最优雅的解决方案，但在这种情况下它对我来说效果最好。

# apache - apache mod mem_cache 会影响日志记录吗？

> ID：10255060
> 
> 赞同：0
> 
> 时间：2012-04-21T00:18:56.950
> 
> 标签：apache, memory, logging

所以我刚刚在我的服务器上启用了 mem_cache ......

如果我有一个 GIF 图像，我将其用作跟踪信标。每个请求都在查询字符串中使用随机数请求它。（例如`http://example.org/my.gif?trackid=001&random=38493843943232`）阻止客户端缓存图像，并允许我获得更准确的请求数量。

1.  即使在每个请求上使用随机/唯一查询字符串，apache 是否会将 GIF 图像保留在内存中？

2.  这会影响apache记录文件的方式吗？我的所有独特请求是否仍会被记录？

提前致谢！

# php - PHP 的萤火虫

> ID：10255065
> 
> 赞同：3
> 
> 时间：2012-04-21T00:19:51.437
> 
> 标签：php, ide, firebug

Firebug 是一个如此出色的 javascript 开发工具，有没有 PHP 的强大模拟？我已经看到了 Firebug 的这个 PHP（和 Drupal）扩展，但似乎它们不再被维护。特别是在控制台、网络和 yslow 功能方面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:21:14.917

[Xdebug](http://xdebug.org/)和[Wincachegrind](http://sourceforge.net/projects/wincachegrind/)是很棒的 PHP 调试器和分析器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:25:47.173

你也可以试试 FirePHP：[http ://www.firephp.org/](http://www.firephp.org/)

# silverlight - DataBinding Image.Source 到 PhotoChooserTask 结果不起作用

> ID：10255066
> 
> 赞同：0
> 
> 时间：2012-04-21T00:20:58.770
> 
> 标签：silverlight, data-binding, windows-phone

我有以下课程：

```
public class Sticky : INotifyPropertyChanged {

    // ... some members

    private BitmapImage _frontPic;
    [DataMember]
    public BitmapImage FrontPic {
        get {
            return _frontPic;
        }
        set {
            _frontPic = value;
            Changed("FrontPic");
            Changed("FrontBrush");
        }
    }
} 
```

我正在尝试将其数据绑定到此 XAML：

```
<Image Width="173" Height="173" Source="{Binding FrontPic}" /> 
```

在我的 PhoneApplicationPage 中使用此代码启动 PhotoChooserTask 后：

```
public Sticky Sticky { get; set; }

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) {
    Sticky = new Sticky();
    DataContext = Sticky;
}

private void ShowFrontPicPicker(object sender, RoutedEventArgs e) {
    var t = new PhotoChooserTask();
    t.PixelHeight = 173;
    t.PixelWidth = 173;
    t.ShowCamera = true;

    t.Completed += (s, ev) => {
        if (ev.TaskResult == TaskResult.OK) {
            var img = new BitmapImage();
            img.SetSource(ev.ChosenPhoto);
            Sticky.FrontPic = img;
        }
    };

    t.Show();
} 
```

但是，我的图像仍然是空白的。如果我将 Image.Source 属性直接分配给 Image 而不进行数据绑定，则一切正常。数据绑定其他属性有效，只是图像似乎是问题所在。如何使图像上的 DataBinding 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:45:03.437

发现问题了！PhotoChooserTask 的完成回调不会在 UI 线程中执行，因此`Dispatcher.BeginInvoke`必须添加对的调用：

```
t.Completed += (s, ev) => Dispatcher.BeginInvoke(() => {
    // do stuff...
}); 
```

# android - Eclipse 无法删除灰色的 Android 依赖项

> ID：10255073
> 
> 赞同：2
> 
> 时间：2012-04-21T00:23:01.747
> 
> 标签：android, eclipse

我的 Android 项目依赖项是灰色的。这意味着我有两个 jar 文件需要删除，而我似乎无能为力。或者有吗？刚刚检查 .classpath ，我没有看到那里的设置。是吗？

# android - 如何使 android:layout_gravity="bottom|center_horizo ntal" 停留在底部

> ID：10255080
> 
> 赞同：2
> 
> 时间：2012-04-21T00:24:03.217
> 
> 标签：android, android-layout, layout-gravity

我有一个垂直的 LinearLayout，它有一个列表视图，底部有一个 ImageView，顶部有一个，列表视图填满了留下的空间。

它看起来像这样：

```
<LinearLayout layout_height="match_parent" layout_width="@dimen/width"
    orientation="vertical"> 
    <ImageView layout_height="@dimen/width" layout_width="@dimen/width" id="@+id/top">

     <ListView  android:layout_height="0px"
        android:background="#00ffff"
        android:layout_width="@dimen/width"
        android:layout_weight="1" />

     <ImageView layout_height="@dimen/width" layout_width="@dimen/width" id="@+id/bottom" layout_gravity="bottom|center_horizontal"> 
```

每当我看到列表视图时，它都可以正常工作。

但是，每当我将 ListView 设置为可见性消失时，“底部”ImageView 就会弹出到顶部图像视图的下方。

我的问题是为什么底部 ImageView 不停留在底部，尽管我说'android:layout_gravity="bottom|center_horizo​​ntal"' 我查看了hierarchyViewer，父级的高度确实与屏幕的高度匹配。所以底部图像视图应该尊重 android:layout_gravity="bottom|center_horizo​​ntal" 并保持在底部，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T03:31:32.107

作为我评论的替代方案，您可以将您的替换`LinearLayout`为`RelativeLayout`. Agarwal 已经提出了这个建议，但是他的代码有点混乱，在撰写本文时，就您希望它执行的操作而言，它并不正确。

试试下面的代码。当您将 设置为`ListView`时`gone`，顶部和底部图像将保持与设置时相同的位置`visible`。请注意，我替换了`@dimens/width`引用，因此您可能希望将它们放回原处。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">

    <ImageView android:id="@+id/top" android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <ListView android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:layout_above="@+id/bottom"
        android:layout_below="@+id/top" android:background="#00ffff" />

    <ImageView android:id="@+id/bottom" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:22:28.980

最好的解决方案是为此使用 ralaticelayout::::

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#0000FF">

 <ImageView android:layout_height="wrap_content" android:layout_width="fill_parent" android:id="@+id/top" />
<ImageView android:layout_height="wrap_content" android:layout_width="fill_parent" android:id="@+id/bottom" android:layout_alignParentBottom="true"/>
     <ListView  android:layout_height="fill_parent"
        android:background="#00ffff"
        android:layout_width="fill_parent"
        android:layout_below:@id/top android:layout_above:@id/bottom />

</RelativeLayout> 
```

# linux - 从 CRAN Ubuntu 存储库安装 R：没有公钥错误

> ID：10255082
> 
> 赞同：79
> 
> 时间：2012-04-21T00:24:03.617
> 
> 标签：linux, r, apt

我使用的是 R 版本 2.13，并且想更新到较新的版本，以便使用一些依赖于 R>= 2.14 的包。

我在我的 sources.list 文件中找到了[此处](http://cran.r-project.org/bin/linux/ubuntu/)描述的行。然后我导航到终端并输入：

```
sudo apt-get update 
```

尝试在离我最近的 CRAN 镜像上更新 R 时出现以下错误：

> 阅读包裹清单...完成
> 
> W：GPG 错误：[http](http://lib.stat.cmu.edu) ://lib.stat.cmu.edu oneiric/ 发布：由于公钥不可用，无法验证以下签名：NO_PUBKEY 51716619E084DAB9

知道如何调试此错误吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2014-06-28T03:15:13.953

对我有用的最简单的解决方案是来自 Emre Sahin 在[这个线程](http://r.789695.n4.nabble.com/R-update-problem-td4667122.html)中：

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-04-21T16:02:14.563

就像@Ben Bolker 评论的那样（对不起，我劫持了您的评论，但尚未发布正确的答案），在debian 软件包 repo[的描述](http://cran.r-project.org/bin/linux/debian/)中，有一个部分`secure apt`说：

> 安全的 APT
> 
> CRAN 上的 Debian 反向移植档案使用密钥“Johannes Ranke (CRAN Debian archive)”签名，密钥 ID 为 381BA480。你可以用
> 
> gpg --keyserver subkeys.pgp.net --recv-key 381BA480 或者，使用另一个密钥服务器，
> 
> gpg --keyserver pgp.mit.edu --recv-key 381BA480 如果这不起作用，可能是由于防火墙阻止了端口 11371。或者，您可以在 [http://keyserver.noreply.org搜索 0x381BA480 /](http://keyserver.noreply.org/)或[http://pgp.mit.edu/](http://pgp.mit.edu/)并将密钥块复制到一个纯文本文件中，例如命名为 jranke_cran.asc。
> 
> 如果使用 gpg 接收密钥确实有效，则需要将其导出到文本文件
> 
> gpg -a --export 381BA480 > jranke_cran.asc 在这两种情况下，您都需要通过运行使 apt 系统知道密钥
> 
> apt-key 将 jranke_cran.asc 添加为 root。

如果您还没有这样做，这可能会解决您的问题。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-07-14T08:13:50.457

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys KEYID 
```

并将 KEYID 替换为错误消息中显示的数字。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-08-17T09:13:50.327

感谢[Philipp Burckhardt](https://stackoverflow.com/users/1494708/philipp-burckhardt)，我把它修好了。

尝试这个：

```
gpg --keyserver pgpkeys.mit.edu --recv-key 51716619E084DAB9  
gpg -a --export 51716619E084DAB9 | sudo apt-key add - 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-24T14:07:12.430

这是一步一步的答案，可能更容易理解。

1.  获取密钥（警告消息中的最后 8 位数字）：

    ```
    gpg --keyserver pgp.mit.edu --recv-key E084DAB9 
    ```

    输出应如下所示：

    ```
    gpg: requesting key E084DAB9 from hkp server pgp.mit.edu
    gpg: key E084DAB9: public key "Michael Rutter <marutter@gmail.com>" imported
    gpg: Total number processed: 1
    gpg:               imported: 1  (RSA: 1) 
    ```

2.  添加密钥（需要超级用户访问权限）：

    ```
    gpg -a --export E084DAB9 | sudo apt-key add - 
    ```

3.  更新存储库：

    ```
    sudo apt-get update 
    ```

现在应该没有关于丢失密钥的警告。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-07-29T00:38:26.607

我遇到了同样的问题，我发现的唯一解决方案（可能是由于防火墙）是使用有用的 Y PPA 管理器。下面概述的两个步骤已在 Ubuntu 15.04 上运行。

1）首先安装Y PPA Manager：

```
sudo add-apt-repository ppa:webupd8team/y-ppa-manager
sudo apt-get update
sudo apt-get install y-ppa-manager 
```

2) 然后通过运行 Y PPA 管理器获取丢失的密钥：

```
y-ppa-manager 
```

> 点击“高级”
> 
> > 接下来，单击“尝试导入缺少的 GPG 密钥”

最后，再次更新以检查它是否有效：

```
sudo apt-get update 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-09-21T23:31:35.393

就像上面发布的其他人一样，这个单行代码似乎在 Debian 6 上运行良好：

```
sudo apt-key adv --keyserver hkp://pgp.mit.edu:80 --recv-keys 381BA480

Executing: gpg --ignore-time-conflict --no-options
--no-default-keyring --secret-keyring /etc/apt/secring.gpg --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --keyserver hkp://pgp.mit.edu:80 --recv-keys 381BA480 
gpg: requesting key 381BA480 from hkp server pgp.mit.edu 
gpg: key 381BA480: public key "Johannes Ranke (CRAN Debian archive) <jranke@uni-bremen.de>" imported 
gpg: no ultimately trusted keys found 
gpg: Total number processed: 1 
gpg:      imported: 1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-29T08:14:20.460

这解决了我的问题

`$ wget -q -O - https://archive.kali.org/archive-key.asc | apt-key add`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-03T04:37:56.550

它必须为密钥使用更长的标识符。

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9 
```

问题似乎是服务器上的重复密钥 ID。请参阅[CRAN](https://cran.r-project.org/bin/linux/ubuntu/README.html)的说明以及Michael Rutter的[这篇文章](https://rubuntu.netlify.app/post/changes-to-cran-ubuntu-webpage-regarding-apt-secure-key/)的更多背景信息。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-10T10:56:27.450

最简单的解决方法是按照[https://cran.r-project.org/bin/linux/ubuntu/](https://cran.r-project.org/bin/linux/ubuntu/)中的说明进行操作。以 sudo 运行：

```
# update indices
apt update -qq
# install two helper packages we need
apt install --no-install-recommends software-properties-common dirmngr
# add the signing key (by Michael Rutter) for these repos
# To verify key, run gpg --show-keys /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc 
# Fingerprint: 298A3A825C0D65DFD57CBB651716619E084DAB9
wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
# add the R 4.0 repo from CRAN -- adjust 'focal' to 'groovy' or 'bionic' as needed
add-apt-repository "deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/" 
```

# python - 在二叉树中找到最小值，Python

> ID：10255092
> 
> 赞同：2
> 
> 时间：2012-04-21T00:26:54.413
> 
> 标签：python, recursion, tree

**我正在尝试编写一个函数，它返回二叉树而不是**二叉搜索树中的最小值。这是我写的，不正确。

```
def min(root, min_t): # min_t is the initially the value of root
    if not root:
            return min_t

    if root.key < min_t:
            min_t = root.key

    min(root.left, min_t)
    min(root.right, min_t)

    return min_t 
```

我觉得我不太了解递归。我似乎无法弄清楚何时将 return 语句与递归调用一起使用，何时不使用。

感谢您的见解！

这是我想出的另一个，它有效，但似乎不是最有效的：

```
n = []
def min_tree(root, n):
    if root:
        n += [(root.key)]
        min_tree(root.left, n)
        min_tree(root.right, n)
    return min(n) 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T01:05:06.200

迈克尔的回答解释了您可能应该解决问题的方式，但他没有解释您当前的尝试有什么问题。据我了解，您的策略是检查每个节点，并随时跟踪最低值，使用递归查找所有节点。一旦检查了所有节点，您就会知道结果是整个树的最小值。这是一种完全有效的方法，它本来可以奏效的，只是论点不像您预期​​的那样有效。

Python 按值传递参数，而不是按引用传递。当您使用“min_t = root.key”为 min_t 赋值时，它只在函数内部生效。函数的调用者看不到新值。

您可以使用一些更简单的代码对此进行测试：

```
def add_one_to(x):
    x = x + 1
    print "add_one_to", x

x = 2
add_one_to(x)
print x 
```

当您运行代码时，您可以看到 x 在函数内部递增，但在顶层没有递增。

这也适用于函数调用自身时。每个调用都有自己的一组局部变量，并且分配给函数内部的局部变量不会影响调用它的实例。

请注意，某些语言确实允许您通过引用传递参数。如果您通过引用传递参数，那么在函数内部分配该参数也会影响调用者。如果 Python 是其中一种语言，您可以将 min_t 作为参考参数，并且您的函数将正常工作。

虽然 Python 不直接支持引用参数，但您也可以将引用参数视为在函数被调用时进入函数并在函数完成时传递回调用者的值。你可以分别做这两件事。要将值传递回调用者，请返回该值。然后调用者可以将该函数分配给它的本地函数，并且您基本上已经通过引用传递了一个参数。

以下是如何将其应用于上面的示例：

```
def add_one_to(x):
    x = x + 1
    print "add_one_to", x
    return x

x = 2
x = add_one_to(x)
print x 
```

只需添加一个返回值和赋值，它就可以正常工作。

您也可以将其应用于您的原始功能：

```
def min(root, min_t): # min_t is the initially the value of root
    if not root:
            return min_t

    if root.key < min_t:
            min_t = root.key

    min_t = min(root.left, min_t)
    min_t = min(root.right, min_t)

    return min_t 
```

我所做的只是在每次调用 min() 之前添加“min_t =”，并将您的 return 语句更改为最后返回 min_t。（我认为您可能无论如何都打算返回 min_t。min 是您的函数的名称，所以这没有多大意义。）我相信该版本会起作用。

编辑：尽管如此，您的 min_tree 函数起作用的原因是 n 是一个列表，而列表是可变对象。当我在上面谈论“价值观”时，我真正的意思是“对象”。python 中的每个变量名都映射到一个特定的对象。如果你有这样的代码：

```
def replace_list(x):
    x = [1, 2, 3]

x = [2]
replace_list(x)
print x 
```

结果是[2]。因此，如果您使用“x =”为 x 分配一个新值，调用者将看不到它。但是，如果您这样做：

```
def replace_list(x):
    x.append(1)

x = [2]
replace_list(x)
print x 
```

结果是 [2, 1]。这是因为你没有改变 x 的值；x 仍然指向同一个列表。但是，该列表现在包含一个附加值。不幸的是，“+=”运算符在这方面令人困惑。您可能认为“x += y”与“x = x + y”相同，但在 Python 中并非总是如此。如果“x”是一种专门支持“+=”的对象，那么该操作将修改该对象。否则，它将与“x = x + 1”相同。列表知道如何处理“+=”，因此将 += 与列表一起使用会就地修改它，但与数字一起使用则不会。

您实际上可以在不进行任何函数调用的情况下对其进行测试：

```
x = [1, 2]
y = x
y += [3]
print x # [1, 2, 3]
print y # [1, 2, 3]
print x is y # True, x and y are the same object, which was modified in place

x = [1, 2]
y = x
y = y + [3]
print x # [1, 2]
print y # [1, 2, 3]
print x is y # False, y is a new object equal to x + [3]

x = 1
y = x
y += 2
print x # 1
print y # 3
print x is y # False, y is a new object equal to x + 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:53:22.517

因为与罐装解决方案相比，您自己尝试解决这个问题会得到更多，所以这里有一些提示。首先，你不应该调用它`min`，因为当然你不能调用 python`min`来测试你的结果。正如[迈克尔](https://stackoverflow.com/a/10255221/577088)的回答提醒我的那样，您不必*通过*考试，`min_t`因为您可以进行测试`root.key`——但我认为通过考试有助于`min_t`理解问题。

除此之外，你的第一行是正确的；这里做得很好。：

```
def tree_min(root, min_t): # min_t is the initially the value of root
    if not root:
            return min_t
    if root.key < min_t:
            min_t = root.key 
```

现在你必须考虑返回什么。基本上，存在三个可能的最小值。第一个是`min_t`。第二个是`right`子树的最小值。第三个是`left`子树的最小值。获取后两个值（这是递归调用进来的地方），然后返回最小值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T00:49:45.250

对于这个特定的问题，您想要遍历整个树并返回看到的最小值。但总的来说，递归的基本原理是，当你再次调用函数时，你会看到相同问题的修改版本。

考虑你的树：

```
 root
   /    \
left   right 
```

当您在左子树上调用递归函数时，您会再次看到一棵树。因此，您应该能够使用相同的逻辑。

递归函数的关键是基本情况和递归步骤。在您的树示例中，基本情况不是您找到最小值（您怎么知道？），而是当您到达树的底部（又名叶子）时。

而且，您的递归步骤是查看每个子问题（bin_min（左）和 bin_min（右））。

最后一块是考虑返回值。不变的是您的函数返回了它所看到的最小元素。因此，当您的递归调用返回时，您知道它是最小元素，然后您需要返回的是三个可能选择（root、left_min 和 right_min）中的最小元素。

```
def min_bin(root):
    if not root:
        return MAX_VAL
    left_min = min_bin(root.left)
    right_min = min_bin(root.right)

    return min(left_min, right_min, root.val) 
```

请注意，这是与@Rik Poggi 不同的解决方案。他使用尾递归对其进行了一些优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-25T17:57:11.697

这是一个找到最小元素的递归方法：

```
minelement = float("inf")
def minimum(self, root):
    global minelement
    if root:
        if root.data < minelement:
            minelement = root.data

        self.minimum(root.left)
        self.minimum(root.right)
    return minelement 
```

# android - 如何从示例将 ListFragment 实施到您的项目中？

> ID：10255094
> 
> 赞同：0
> 
> 时间：2012-04-21T00:27:35.657
> 
> 标签：android, listview, listactivity, listadapter, android-listfragment

我有一个寻呼机适配器，它将像这样调用 ListFragment：

```
public Fragment getItem(int position) {
        Fragment fragment = new ListViewFragment();

        // set arguments here, if required
        Bundle args = new Bundle();
        fragment.setArguments(args);

        return fragment; 
```

然后我有一个 ListActivity，我想将其更改为 ListViewFragment。

```
public class ImageListActivity extends ListActivity  implements RadioGroup.OnCheckedChangeListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.imagelist);

        RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radioGroup);
        radioGroup.setOnCheckedChangeListener(this);

        setListAdapter(new ImageAdapter());
    }

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        ImageDownloader.Mode mode = ImageDownloader.Mode.NO_ASYNC_TASK;

        if (checkedId == R.id.correctButton) {
            mode = ImageDownloader.Mode.CORRECT;
        }else if (checkedId == R.id.randomButton) {
                mode = ImageDownloader.Mode.NO_DOWNLOADED_DRAWABLE;
        }

        ((ImageAdapter) getListAdapter()).getImageDownloader().setMode(mode);
    }
} 
```

但我真的不能让它发挥作用..我试过了：

```
public class ListViewFragment extends ListFragment {
    int mNum;
    Context ctx;
    View v;
    static int p; 

    /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static ListFragment newInstance(int num) {
        ListFragment f = new ListFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

          v = inflater.inflate(R.layout.imagelist, container, false);
          ImageDownloader.Mode mode = ImageDownloader.Mode.NO_ASYNC_TASK;    
          mode = ImageDownloader.Mode.CORRECT;
          ((ImageAdapter) getListAdapter()).getImageDownloader().setMode(mode);
          setListAdapter(new ImageAdapter());            

          return container;      

    }
} 
```

**更新：** - 我只是回答我自己的问题，并制作了一个小教程来解释初学者如何通过示例将 ListAdapter 实现到您的项目中。

我从一个示例中得到了这个 ListAdapter，只需将文件复制到我的项目中，如果你运行它，就会崩溃。

因此，您需要按照我的回答进行更改并实施`ListArrayAdapter`您在互联网上找到的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:24:01.173

最后我把它付诸实践了。

好吧，首先您需要更正来自 的调用`PagerAdapter`。

```
public Fragment getItem(int position) {
        Fragment fragment = new FragmentListArraySupport.ArrayListFragment();

        // set arguments here, if required
        Bundle args = new Bundle();
        fragment.setArguments(args);

        return fragment; 
```

`FragmentListArraySupport`是`FragmentActivity`和`ArrayListFragment`是`ListFragment`。_

这是`FragmentListArraySupport`代码：

```
 public class FragmentListArraySupport extends FragmentActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            setTheme(SampleList.THEME); //Used for theme switching in samples
            super.onCreate(savedInstanceState);

            // Create the list fragment and add it as our sole content.
            if (getSupportFragmentManager().findFragmentById(android.R.id.content) == null) {
                ArrayListFragment list = new ArrayListFragment();
                getSupportFragmentManager().beginTransaction().add(android.R.id.content, list).commit();
            }
        }
        public static class ArrayListFragment extends ListFragment {

            @Override
            public void onActivityCreated(Bundle savedInstanceState) {
                super.onActivityCreated(savedInstanceState);
                ImageDownloader.Mode mode = ImageDownloader.Mode.CORRECT;
                ImageAdapter imageAdapter = new ImageAdapter();
                imageAdapter.getImageDownloader().setMode(mode);
                setListAdapter(imageAdapter); 
            }

            @Override
            public void onListItemClick(ListView l, View v, int position, long id) {
                Log.i("FragmentList", "Item clicked: " + id);
            }
        }
   } 
```

看到你需要更改`ListActivity`为`FragmentActivity` 现在你的图像适配器工作了，所以无论`ListArrayAdapter`你在互联网上找到什么，你只需要复制类文件，调用ArraySupport`PagerAdapter`并将.`ListActivity``FragmentActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:55:58.137

查看错误消息，然后查看您的`onCreateView()`-method。错误消息说您正在尝试将 a 添加`View`到*已经有*父级的父级。

你得到的原因`IllegalStateException`是因为你试图`(ViewGroup) container`通过`return`在`container`你的`onCreateView(...)`. 当然`container`已经有一个父母，这就是你得到错误的原因。

此外，onCreateView() 中有关适配器的部分可能会引发错误，因为在`ListFragment`您设置适配器之前您还没有适配器。调用`((ImageAdapter) getListAdapter())`will（可能）返回 null，导致`.getImageDownloader()`（可能）抛出一个`NullPointerException`. 在您的 中尝试以下操作`Fragment`：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        // You should choose what mode you want,
        // ImageDownloader.Mode.NO_ASYNC_TASK or
        // ImageDownloader.Mode.CORRECT;... no use in setting it, just
        // to override it again 1 line later :p
        ImageDownloader.Mode mode = ImageDownloader.Mode.NO_ASYNC_TASK;
        mode = ImageDownloader.Mode.CORRECT;

        ImageAdapter mImageAdapter = new ImageAdapter();
        mImageAdapter.setMode(mode);

        setListAdapter(mImageAdapter);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

      v = inflater.inflate(R.layout.imagelist, container,           

      return v; // notice you're returning your inflated View here,
                // instead of container
} 
```

* * *

## 更新

另外，将您的更改`ListActivity`为`Activity`（或者`FragmentActivity`如果您使用支持库）。`setListAdapter(new ImageAdapter());`从您的中删除对 的调用`Activity`，然后将 移动`implements RadioGroup.OnCheckedChangeListener`到`ListFragment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:09:09.543

如果没有关于“崩溃”的任何细节，很难确定出了什么问题。但是，我最好的猜测是，这是`NullPointerException`因为您似乎正在尝试从 的`ListFragment`适配器获取图像下载器，而适配器尚未初始化。

```
((ImageAdapter) getListAdapter()).getImageDownloader().setMode(mode);
setListAdapter(new ImageAdapter()); 
```

如果没有提前调用`setListAdapter(...)`,`getListAdapter()`上面代码的第一行将返回`null`. 显然，这意味着您无法从中检索任何内容。我想你会想把它改成这样：

```
ImageAdapter imageAdapter = new ImageAdapter();
imageAdapter.getImageDownloader().setMode(mode);
setListAdapter(imageAdapter); 
```

设置完毕后，可能还有其他原因导致您的问题，但是如果没有任何具体的堆栈跟踪，我们只能进行猜测......

# gcc - gcc -g 与 -fPIC 冲突？

> ID：10255095
> 
> 赞同：0
> 
> 时间：2012-04-21T00:27:37.867
> 
> 标签：gcc, g++

在 CentOS 5.1 g++ 4.1.2 和 4.6.3 和 4.7.0 下测试，它们都产生相同的结果。我该如何解决这个问题？基本上我不能用 Debug build 来构建 llvm。

```
[hidden]$ cat x.cpp 
#include <iostream>

int main() {
}
[hidden]$ g++ -c -fPIC -g x.cpp 
[hidden]$ objdump -r x.o | grep R_X86_64_32 | head -10
000000000000001c R_X86_64_32       .debug_frame
0000000000000044 R_X86_64_32       .debug_frame
000000000000006c R_X86_64_32       .debug_frame
0000000000000006 R_X86_64_32       .debug_abbrev
000000000000000c R_X86_64_32       .debug_str+0x0000000000000414
0000000000000011 R_X86_64_32       .debug_str+0x00000000000007f2
0000000000000015 R_X86_64_32       .debug_str+0x000000000000017b
0000000000000029 R_X86_64_32       .debug_line
000000000000002e R_X86_64_32       .debug_str+0x0000000000000422
0000000000000034 R_X86_64_32       .debug_str+0x0000000000000607 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:04:12.250

> 我该如何解决这个问题？

你没有要解决的问题（你没有表现出任何存在问题的迹象）。

不，*并且完全*`-g`兼容`-fPIC`并且彼此不冲突*。*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:32:04.437

这些不是动态重定位。它们将在链接时得到解决。这不会破坏 -fPIC。

请记住，有两种链接，静态的和动态的。当您从目标文件编译最终程序二进制文件时，静态链接由编译器/链接器完成，而动态链接由操作系统完成（`ld-linux.so`在 linux 的情况下）。

要获取动态重定位列表，请使用`objdump -R`. 但是，它仅适用于动态链接的二进制文件（即不是 .o 文件）。**

# android - 标签声音在多次点击时停止

> ID：10255101
> 
> 赞同：0
> 
> 时间：2012-04-21T00:28:27.360
> 
> 标签：android, android-widget

我正在运行一些测试，并注意到在我单击我的标签后大约..hmm..10 次可能？我的咔嗒声一起消失了。我需要添加某种类型的 onpauses 吗？我应该在此代码中添加什么以使其正常工作？

```
tabHost.setOnTabChangedListener(new OnTabChangeListener() {

        @Override
        public void onTabChanged(String tabId) {
            //PLAY SOUND HERE
            final MediaPlayer tabClick = MediaPlayer.create(TabBarActivity.this, R.raw.click);
            tabClick.start();
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:00:56.417

另一种可行的技术是分配一个[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)对象，您可以在创建 Activity 时将声音加载到该对象中。然后你可以在任何时候播放这些声音，你喜欢多少次都可以。

例如，看看如何在[ti5x](https://github.com/ldo/ti5x_android/blob/master/src/ButtonGrid.java)中实现点击声音。

# arrays - Perl：取消引用数组

> ID：10255104
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:29:11.677
> 
> 标签：arrays, perl, reference

为什么以下代码无法进入匿名数组？

```
 my @d = [3,5,7];
   print $(@{$d[0]}[0]);  

   # but print $d[0][0] works. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T00:36:44.240

### 脚本 1（原始）

因为它是无效的 Perl 代码？

```
#!/usr/bin/env perl
use strict;
use warnings;

my @d = [3,5,7];
print $(@{$d[0]}[0]); 
```

`perl -c`当使用 Perl 5.14.1编译 ( ) 时，它会产生：

```
Array found where operator expected at xx.pl line 6, at end of line
    (Missing operator before ?)
syntax error at xx.pl line 6, near "])"
xx.pl had compilation errors. 
```

坦率地说，我不确定你为什么期望它起作用。我无法对你试图做的事情做出判断。

替代方案：

```
print $d[0][0]; 
```

工作正常，因为`d`它是一个包含单个数组 ref 的数组。因此`$d[0]`是数组`(3, 5, 7)`（注意括号而不是方括号），`$d[0][0]`也是数组的第 0 个元素，即 3。

### 脚本 2

您的代码的此修改打印 3 和 6：

```
#!/usr/bin/env perl
use strict;
use warnings;

my @d = ( [3,5,7], [4,6,8] );
print $d[0][0], "\n";
print $d[1][1], "\n"; 
```

* * *

### 问题

> 所以`$`in`$d[0]`表示`[3,5,7]`对 array 取消引用`(3,5,7)`，或者`$`这里做什么？我认为这`$`是表明标量正在被打印出来？

粗略地说，引用是一个标量，但是一种特殊的标量。

如果你这样做`print "$d[0]\n";`，你会得到类似的输出`ARRAY(0x100802eb8)`，表明它是对数组的引用。第二个下标也可以写成`$d[0]->[0]`表示还有另一个级别的取消引用正在进行。您还可以编写`print @{$d[0]}, "\n";`以打印出数组中的所有元素。

### 脚本 3

```
#!/usr/bin/env perl
use strict;
use warnings;

$, = ", ";

my @d = ( [3,5,7], [4,6,8] );
#print $(@{$d[0]}[0]); 
print @d, "\n";
print $d[0], "\n";
print @{$d[0]}, "\n";
print @{$d[1]}, "\n";
print $d[0][0], "\n";
print $d[1][1], "\n";
print $d[0]->[0], "\n";
print $d[1]->[1], "\n"; 
```

### 输出

```
ARRAY(0x100802eb8), ARRAY(0x100826d18), 
ARRAY(0x100802eb8), 
3, 5, 7, 
4, 6, 8, 
3, 
6, 
3, 
6, 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T00:36:05.003

我认为您正在为此尝试：

```
${$d[0]}[0] 
```

虽然当然也总是有语法糖的方式：

```
$d[0]->[0] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T00:37:15.270

方括号构造函数创建一个匿名数组，但您将它存储在另一个数组中。这意味着您将三元素数组存储在一个元素数组的第一个元素中。这就是为什么`$d[0][0]`会返回值`3`。要执行单级数组，请使用列表构造函数：

```
my @d = (3,5,7);
print $d[0]; 
```

如果您真的打算在外部数组中创建数组，那么您应该取消引用单个（标量）值作为

```
print ${$d[0]}[0]. 
```

更多阅读[`perldoc perlreftut`](http://p3rl.org/reftut)。

# c++ - 在 C++ 中读取文本文件

> ID：10255107
> 
> 赞同：2
> 
> 时间：2012-04-21T00:29:46.690
> 
> 标签：c++, iostream

在用 C++ 读取文本文件时，我有一个关于如何处理`"\n"`等的问题。`"\r\n"`当我执行以下操作序列时存在问题：

```
int k;
f>>k;
string line;
getline(f,line); 
```

对于类似的输入文件

```
1
abc 
```

我必须放 a`f.get()`才能在 .`"\n"`之后读出结尾`f>>k`。如果有的话，我什至必须做`f.get()`两次`"\r\n"`。

如果我`>>`与混合阅读这样的文件的优雅方式是什么`getline`？

谢谢你。

**编辑** 另外，我想知道是否有任何方便的方法可以自动检测给定文件是否具有行尾字符`"\n"`或`"\r\n"`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T00:35:41.723

你需要稍微摆弄一下`>>`，`getline`才能愉快地一起工作。通常，使用`>>`操作符从流中读取内容不会丢弃任何后续的空白（换行符）。

解决这个问题的常用方法是使用以下`istream::ignore`函数`>>`- 告诉它丢弃每个字符直到并包括下一个换行符。（仅当您确实想丢弃每个字符直到换行时才有用）。

例如

```
#include <iostream>
#include <string>
#include <limits>

int main()
{
    int n;
    std::string s;
    std::cout << "type a number: ";
    std::cin >> n;
    std::cin.ignore( std::numeric_limits<std::streamsize>::max(), '\n' );
    std::cout << "type a string: ";
    std::getline( std::cin, s );
    std::cout << s << " " << n << std::endl;
} 
```

*编辑*（我意识到您在问题中提到了文件，但希望不用说 std::cin 可以与 ifstream 完全互换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:32:43.390

`tr`一种完全不同的方法是使用（假设您使用 Linux）预处理数据文件以删除`\r`然后使用`getline()`.

# c# - 为什么不首先调用基类构造函数

> ID：10255116
> 
> 赞同：3
> 
> 时间：2012-04-21T00:30:55.300
> 
> 标签：c#, .net, clr

当使用简单的语法通过直接为派生类字段赋值来初始化派生类字段时，编译器会发出一个 IL 代码，该代码首先初始化派生类字段，然后调用基类 .ctor。为什么它不调用基 .ctor 字段并初始化派生类字段。如果我的字段依赖于基类的字段怎么办？

我很想在这里放一些代码示例，但我是从我的手机上发布这个问题的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T00:47:07.327

我认为这是因为它需要处理在构造函数中调用虚拟方法或初始化程序的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T03:57:02.587

Eric Lippert 在他的博客上有一个由两部分组成的系列。

[http://blogs.msdn.com/b/ericlippert/archive/2008/02/15/why-do-initializers-run-in-the-opposite-order-as-constructors-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/02/15/why-do-initializers-run-in-the-opposite-order-as-constructors-part-one.aspx)

只是为了您的方便而在这里提及。希望这可以帮助。

```
Calling methods on derived types from constructors is dirty pool, but it is not illegal. 
```

将不完全构造的对象填充到全局状态是有风险的，但并不违法。

# python - 使用 Python 的 Google App Engine：无法更新数据实体

> ID：10255119
> 
> 赞同：1
> 
> 时间：2012-04-21T00:31:05.037
> 
> 标签：python, django, google-app-engine

我已阅读、阅读并再次阅读文档并在网上进行了多次搜索，但我还不明白为什么我的应用程序无法正常工作。当用户连接时，他必须填写表格。此代码有效。当用户注销然后登录时，表单字段将填充他的信息。因此，数据已正确保存。但是，当用户更改表单字段值并提交表单时，数据不会更新。

我的模型：

```
class Members(db.Model):
    account = db.UserProperty()
    hashtags = db.StringProperty() 
```

在这里提交表单的类：

```
class Submit(webapp.RequestHandler):
def post(self):
    user = users.get_current_user()

    if user:
        url = users.create_logout_url('/')
        url_linktext = 'Logout'

        member = db.GqlQuery("SELECT * FROM Members WHERE account = :1", user)

        if member.count(1) > 0:
            m = Members(account=user)
            m.hashtags = ','.join([
                self.request.get('hashtag1'),
                self.request.get('hashtag2'),
                self.request.get('hashtag3')])
            m.put()
        else:
            member = Members()
            member.account = user
            member.hashtags = ','.join([
                self.request.get('hashtag1'),
                self.request.get('hashtag2'),
                self.request.get('hashtag3')])
            member.put()

        self.redirect('/')
    else:
        self.redirect('/') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:00:55.713

问题是您要添加新记录而不是更新现有记录。对于您的代码，最简单的解决方法是更改​​它：

```
if member.count(1) > 0:
    m = Members(account=user) 
```

至：

```
if member.count(1) > 0:
    m = member[0] 
```

您的代码更新现有记录的原因是您尚未分配密钥。要了解有关键的更多信息，您可以在[Kinds and Identifiers](https://developers.google.com/appengine/docs/python/datastore/entities#Kinds_and_Identifiers)中了解它们。

# php - 警告：mysql_num_rows() 期望参数 1 是资源，数组在第 157 行的 J:\xampp\htdocs\Website\rpg.php 中给出

> ID：10255120
> 
> 赞同：-2
> 
> 时间：2012-04-21T00:31:07.303
> 
> 标签：php, mysql

我有这个问题，这是我的代码

```
 ?php
      $db_host = 'localhost';
      $db_user = 'root';
      $db_pwd = 'password';
      $database = 'nzpcgames';
      $table = 'gameinfo';

@ $dbcon = mysql_pconnect($db_host,$db_user,$db_pwd);
      if (!$dbcon)
      {
        die('Could not connect : ' . mysql_error());
        exit;
       }

mysql_select_db($database, $dbcon);

$query = "SELECT gameinfo.rank, gameinfo.game, gameinfo.platform, gameinfo.genre, gameinfo.publisher, gameinfo.developer, gameinfo.score*
FROM gameinfo
WHERE (((gameinfo.genre)='rpg'))";

$result = mysql_query("SELECT * FROM {$table}");
$num_rows = mysql_num_rows($result);
if ($num_rows == 0) {
    echo 'No results were found';
    exit;
}

   ?> 
```

虽然每次我尝试执行它时，我都会收到标题错误。在我的教程 power point 上，它说要更改 $result，但没有说明要更改什么，谢谢您的帮助

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-21T00:41:16.150

可能是因为你没有把连接，

```
$result = mysql_query("SELECT * FROM {$table}",$dbcon); 
```

或者你可以试试

```
SELECT COUNT(*) FROM $table_name 
```

看看这个[http://www.php.net/manual/en/function.mysql-num-rows.php](http://www.php.net/manual/en/function.mysql-num-rows.php)

# c# - 获取 List 中不同值的列表

> ID：10255121
> 
> 赞同：217
> 
> 时间：2012-04-21T00:31:33.267
> 
> 标签：c#, linq, list, distinct

在 C# 中，假设我有一个`Note`使用三个字符串成员变量调用的类。

```
public class Note
{
    public string Title;
    public string Author;
    public string Text;
} 
```

我有一个类型列表`Note`：

```
List<Note> Notes = new List<Note>(); 
```

在 Author 列中获取所有不同值的列表的最简洁方法是什么？

我可以遍历列表并将所有不重复的值添加到另一个字符串列表中，但这似乎很脏且效率低下。我有一种感觉，有一些神奇的 Linq 构造可以在一行中完成此操作，但我无法想出任何东西。

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2012-04-21T00:33:46.153

```
Notes.Select(x => x.Author).Distinct(); 
```

这将返回一个值序列 ( `IEnumerable<string>`) `Author`- 每个唯一值一个。

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2014-06-23T07:01:11.657

按作者区分 Note 类

```
var DistinctItems = Notes.GroupBy(x => x.Author).Select(y => y.First());

foreach(var item in DistinctItems)
{
    //Add to other List
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-04-21T00:37:38.790

Jon Skeet 编写了一个名为[morelinq](https://morelinq.github.io)的库，其中包含一个`DistinctBy()`运算符。请参阅[此处](https://github.com/morelinq/MoreLINQ/blob/master/MoreLinq/DistinctBy.cs)了解实施情况。你的代码看起来像

```
IEnumerable<Note> distinctNotes = Notes.DistinctBy(note => note.Author); 
```

**更新：** 重新阅读您的问题后，如果您只是在寻找一组不同的作者，柯克有正确的答案。

添加了示例，DistinctBy 中的几个字段：

```
res = res.DistinctBy(i => i.Name).DistinctBy(i => i.ProductId).ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-23T05:25:03.323

```
public class KeyNote
{
    public long KeyNoteId { get; set; }
    public long CourseId { get; set; }
    public string CourseName { get; set; }
    public string Note { get; set; }
    public DateTime CreatedDate { get; set; }
}

public List<KeyNote> KeyNotes { get; set; }
public List<RefCourse> GetCourses { get; set; }    

List<RefCourse> courses = KeyNotes.Select(x => new RefCourse { CourseId = x.CourseId, Name = x.CourseName }).Distinct().ToList(); 
```

通过使用上述逻辑，我们可以得到唯一`Course`的 s。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-10-09T21:26:15.310

```
mcilist = (from mci in mcilist select mci).Distinct().ToList(); 
```

# lotus-notes - Hotmail 无法正确显示 Lotus Notes 应用程序使用代理 Java 发送的电子邮件

> ID：10255125
> 
> 赞同：0
> 
> 时间：2012-04-21T00:32:16.530
> 
> 标签：lotus-notes, agent, hotmail

我有一个应用程序，它有一个代理，可以将文档转换为 MIME 格式（'memo.convertToMIME (2)'）并将其发送到多个外部电子邮件：gmail、hotmail、yahoo 等......这个代理由button.O 问题是发送的邮件在hotmail中被浏览器读取时，没有出现图片，但是文字、表格和格式都正常。至于 gmail、yahoo 等，电子邮件通常由浏览器显示。有趣的是，当我发送一个如此常规的 Lotus 电子邮件地址时，除了通过 Lotus 应用程序，仅使用客户端，通常通过 hotmail 在浏览器中读取此电子邮件测试。有谁知道会发生什么？PS：这个代理是设计在服务器上运行的，因为命令'convertToMime()'只适用于8.5版本的lotus forward，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:13:43.817

根据 Bob Balaban 的说法，在 C API 层下面的转换代码中存在一个小故障：它不会自动将附件内容转换为 base-64 编码（尽管 API 文档说它会这样做）——它将它们保留为二进制格式。

有关详细信息，请参阅[Geek-O-Terica 15：将 Notes 文档轻松转换为 MIME 格式（第 1 部分）](http://www.bobzblog.com/tuxedoguy.nsf/dx/geek-o-terica-15-easy-conversion-of-notes-documents-to-mime-format-part-1)。

外部用户创建/接收的 MIME 的视图也将帮助我们确定到底哪里出了问题。

# javascript - 无法初始化backbone.js 视图

> ID：10255126
> 
> 赞同：0
> 
> 时间：2012-04-21T00:32:25.437
> 
> 标签：javascript, backbone.js

我正在学习backbone.js，并且已经遇到了问题。

我正在使用 LABjs 加载我的脚本，如下所示：

```
$LAB.setOptions({BasePath : path})
.script('libs/underscore.js?v=1.3.3')
.script('libs/backbone.js?v=0.9.2')
.script('libs/jquery.js?v=1.7')
.script('libs/bootstrap.min.js?v=2.0.2').wait()
.script('test.js'); 
```

在我的 test.js 我有这个（来自backbonetutorials.com）：

```
(function($){
SearchView = Backbone.View.extend({
    initialize: function(){
        alert("Alerts suck.");
    }
});

var search_view = new SearchView;
})(jQuery); 
```

如您所见，这应该给我一个带有文本“Alerstuck.”的警报。相反，它会在我的萤火虫控制台上引发错误 - `i is not a function`（backbone.js 的 34 行）。

如果我尝试像这样初始化视图，`var search_view = new SearchView({el: $('#some_dom_element')});`它会给我另一个错误 - `invalid 'instanceof' operand i`（backbone.js 文件的 34 行）。

jQuery 对象`$`被定义。我可以毫无问题地初始化 Backbone.js 模型。只是查看会抛出这些错误。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T01:02:02.753

似乎加载脚本的顺序很**重要**。我现在首先加载了 jQuery，它开始工作了。我还用非缩小版的主干.js 对其进行了测试，错误更加详细`$ is not a function`。再说一遍 - 在backbone.js 修复它之前加载jQuery。

**编辑**：当我`console.log($)`在视图初始化之前在backbone.js 之后加载jQuery 时，它显示$ 是一个**函数**。为什么backbone.js 不能工作呢？有人可以解释一下吗？

# android - 用于阿拉伯语、中文和希腊语的 Google TTS API

> ID：10255130
> 
> 赞同：4
> 
> 时间：2012-04-21T00:33:06.317
> 
> 标签：android, http-headers, google-api, httprequest, user-agent

我正在尝试从 google TTS API 下载 mp3 文件，这是代码

```
try {   

        String path ="http://translate.google.com/translate_tts?tl=en&q=hello";
        //this is the name of the local file you will create
        String targetFileName = "test.mp3";
            boolean eof = false;
        URL u = new URL(path);
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        c.addRequestProperty("User-Agent", "Mozilla/5.0");
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();
        FileOutputStream f = new FileOutputStream(new File(Environment.getExternalStorageDirectory()
                + "/download/"+targetFileName));
            InputStream in = c.getInputStream();
            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ( (len1 = in.read(buffer)) > 0 ) {
            f.write(buffer,0, len1);
                     }
        f.close();
        } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (ProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    } 
```

这很好用，但是当我尝试请求使用特殊字符的中文或希腊语等语言时

```
String path ="http://translate.google.com/translate_tts?tl=zh-TW&q=你好"; 
```

我得到的 mp3 文件没有声音，但从文件的大小我可以看出它里面有数据。当我尝试用阿拉伯语做同样的事情时

```
String path ="http://translate.google.com/translate_tts?tl=ar&q=%D8%A7%D9%84%D9%84%D9%87"; 
```

我得到一个 0 字节的空 mp3 文件。

我尝试过使用不同的用户代理，但似乎没有任何效果。

请帮忙。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:23:19.167

将路径用作 URI 而不是字符串，然后将其更改为 ascii 字符串。

```
URI uri = new URI("http://translate.google.com/translate_tts?tl=zh-TW&q=你好");

URL u = new URL(uri.toASCIIString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T02:30:17.460

我有你同样的问题。但是我昨天已经解决了。我想让 API 说中文并保存到 mp3 文件。

现在的 url 是： path ="http://translate.google.com/translate_tts?tl=zh-TW&q=你好" 你这样做： path ="http://translate.google.com/translate_tts?ie =UTF-8&tl=zh-TW&q=".urlencode("你好");

添加一个参数 ie=utf-8 并对中文单词进行编码。你会得到你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T00:19:22.667

如果应用程序崩溃试试这个

```
txtToTranslate = txtToTranslate.replace(" ", "%20"); 
```

它替换单词之间的空格。

# ruby-on-rails - 如何在 Rails 查询中找到 nil 的对立面

> ID：10255137
> 
> 赞同：3
> 
> 时间：2012-04-21T00:34:47.777
> 
> 标签：ruby-on-rails, activerecord, mongoid

愉快地使用`Mongoid`并`ActiveRecord`喜欢这样：

```
Task.where(project_id: params[:project_id], archived_at: nil)
# find me the tasks for project_id that haven't been archived 
```

但是说相反的直接方式是什么？

```
# find me the tasks for project_id that have been archived
# i.e. where archived_at is not nil 
```

无法弄清楚或找出第一行代码的倒数。我认为它应该很简单:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:48:12.863

我想你想用这个：

```
:archived_at.ne => nil 
```

看看这里：[MongoId-Matchers-NE](http://rdoc.info/github/mongoid/mongoid/Mongoid/Matchers/Ne)

# objective-c - UIFont fontWithName 返回 nil

> ID：10255141
> 
> 赞同：31
> 
> 时间：2012-04-21T00:35:23.120
> 
> 标签：objective-c, ios, cocoa-touch, uifont

在我的 info.plist 中，我添加了一个键“应用程序提供的字体”并添加了`EdwardianScriptITCStd.otf` ![在此处输入图像描述](../Images/5c8270210a3d9a01fd090ae4da930bee.png)

但是，当我尝试获取该字体时，它返回 nil：

```
NSLog(@"%@", [UIFont fontWithName:@"EdwardianScriptITCStd" 
                                size:16.0f]); 
```

我使用打印了字体系列`[UIFont familyNames]`，但它也不存在：

```
(
    Thonburi,
    "Snell Roundhand",
    "Academy Engraved LET",
    "Marker Felt",
    "Geeza Pro",
    "Arial Rounded MT Bold",
    "Trebuchet MS",
    Arial,
    Marion,
    "Gurmukhi MN",
    "Malayalam Sangam MN",
    "Bradley Hand",
    "Kannada Sangam MN",
    "Bodoni 72 Oldstyle",
    Cochin,
    "Sinhala Sangam MN",
    "Hiragino Kaku Gothic ProN",
    Papyrus,
    Verdana,
    "Zapf Dingbats",
    Courier,
    "Hoefler Text",
    "Euphemia UCAS",
    Helvetica,
    "Hiragino Mincho ProN",
    "Bodoni Ornaments",
    "Apple Color Emoji",
    Optima,
    "Gujarati Sangam MN",
    "Devanagari Sangam MN",
    "Times New Roman",
    Kailasa,
    "Telugu Sangam MN",
    "Heiti SC",
    "Apple SD Gothic Neo",
    Futura,
    "Bodoni 72",
    Baskerville,
    "Chalkboard SE",
    "Heiti TC",
    Copperplate,
    "Party LET",
    "American Typewriter",
    "Bangla Sangam MN",
    Noteworthy,
    Zapfino,
    "Tamil Sangam MN",
    "DB LCD Temp",
    "Arial Hebrew",
    Chalkduster,
    Georgia,
    "Helvetica Neue",
    "Gill Sans",
    Palatino,
    "Courier New",
    "Oriya Sangam MN",
    Didot,
    "Bodoni 72 Smallcaps"
) 
```

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-21T00:57:37.397

我的评论开始变得冗长，所以我决定提交一个答案:)

1.  自定义字体仅在 iOS 3.2 及更高版本中受支持，因此请确保您的部署目标构建设置不会比 3.2 版本更早。

2.  验证字体是否包含在您的构建目标中（在“复制捆绑资源”构建阶段）

3.  检查“应用程序提供的字体”键的原始值以确保其正确。在 Xcode 中查看 *.plist 时，右键单击并选择“Show Raw Keys/Values”，然后验证密钥是否为`UIAppFonts`.

4.  我相信 iOS 在使用 时需要字体的 PostScript 名称`fontWithName: size:`，您可以通过在 Apple 的字体册中打开字体并键入 来查找/验证`command+I`。

5.  在某一时刻，使用自定义字体和`UILabel`. 我不确定这个问题是否仍然存在。解决方案是子类`UILabel`化并在其中设置字体。

如果它仍然不起作用，[这个关于自定义字体的 Stack Overflow 线程](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)有相当多的信息，你可能会有一些运气。

**编辑**
不能保证我有和你一样的字体文件，但在我的机器上，PostScript 名称是“EdwardianScriptITC”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-22T07:09:48.267

如果您的字体名称包含“-”字符，请将其替换为空格字符。例如，Arial-Bold.ttf 的使用类似于 [UIFont fontWithName:"Arial Bold" size:10];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:35:28.640

要使用的字体名称似乎是 Font Book 中的“Family name”。我尝试了 PostScript 名称，但它并不总是有效。据我所知，姓氏一直有效。

您可以检查此信息，如上述答案中所述，在 Font Book 中，选择字体并按 cmd+I。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-17T13:21:03.647

我有同样的问题。您可以在情节提要的界面构建器中将字体设置为标签。然后从标签以调试模式获取该字体，例如：

```
let cfnt = txtUsernameField.font 
```

然后单击小调试窗口上的 i 按钮，字体的系列名称将写入控制台窗口。你可以这样使用它：

```
txtUsernameField.font = UIFont(name: "MyriadPro-CondIt", size: 14) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T19:31:10.650

我有这个问题，虽然我发誓我以前的自定义字体工作得很好。

原来我只需要在 XCode 项目中对我的项目运行“清理”，这样它就可以重新建立引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-29T20:52:55.290

我遇到的问题是字体系列中的一些字体正确返回，而其他字体返回`nil`。

**例如：**

*   `MuseoSansRounded-500`有效的
*   `MuseoSansRounded-900`零

事实证明，Xcode 自动包含了在 Interface Builder 中使用的自定义字体。我在 IB 中使用了 500 粗细的字体，但没有使用 900 粗细的字体。

**这两个步骤为我修复了它：**

1.  在构建设置中，找到并禁用`Auto-Activate Custom Fonts`. 在我的项目中有两个这样的例子。

2.  在应用启动时，手动向系统注册自定义字体。我使用了这个 SO 答案的片段：[https ://stackoverflow.com/a/32600784/131378](https://stackoverflow.com/a/32600784/131378)

以完整性的名义，我本可以保持`Auto-Activate Custom Fonts`打开状态，然后跳过在代码中注册这些字体。但是，如果我最终在 IB 中使用以前手动注册的新字体，我不想在开发过程中更新代码。如果您注册了已经自动激活的字体，Xcode 会报错。

# java - Xprof 输出到文件

> ID：10255144
> 
> 赞同：3
> 
> 时间：2012-04-21T00:35:44.160
> 
> 标签：java, profiling

我正在使用 -Xprof 选项运行 java。我想知道是否有办法将探查器信息输出到文件而不是标准输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T01:36:17.220

如果从命令行运行，您可以尝试`>`，即：

```
java -Xprof YourClass > output.txt 
```

不确定您执行哪种分析以及应用程序的性质是什么，但您可以考虑使用更友好的分析器，例如[Eclipse TPTP](http://www.eclipse.org/tptp/)或[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)。

# enums - 如何将 typedef 枚举转换为 NSNumber？

> ID：10255145
> 
> 赞同：14
> 
> 时间：2012-04-21T00:35:58.200
> 
> 标签：enums, typedef, nsnumber, nsinteger, nsuinteger

1.  a 的每个值是否都`typedef enum`被视为`int`？

    例如，给定以下内容`typedef enum`：

    ```
    // UIView.h

    typedef enum {
        UIViewAnimationCurveEaseInOut,
        UIViewAnimationCurveEaseIn,
        UIViewAnimationCurveEaseOut,
        UIViewAnimationCurveLinear
    } UIViewAnimationCurve; 
    ```

    我如何知道使用哪种方法来创建`NSNumber`?

    ```
    + (NSNumber *)numberWithShort:(short)value;
    + (NSNumber *)numberWithUnsignedShort:(unsigned short)value;
    + (NSNumber *)numberWithInt:(int)value;
    + (NSNumber *)numberWithUnsignedInt:(unsigned int)value;
    + (NSNumber *)numberWithLong:(long)value;
    + (NSNumber *)numberWithUnsignedLong:(unsigned long)value;
    + (NSNumber *)numberWithLongLong:(long long)value;
    + (NSNumber *)numberWithUnsignedLongLong:(unsigned long long)value;
    + (NSNumber *)numberWithInteger:(NSInteger)value NS_AVAILABLE(10_5, 2_0);
    + (NSNumber *)numberWithUnsignedInteger:(NSUInteger)value NS_AVAILABLE(10_5, 2_0); 
    ```

    我认为这`+[NSNumber numberWithInt:]`是正确的使用方法，因为[使用 Core Data 实现枚举的最佳方法的公认答案](https://stackoverflow.com/a/1624352/242933)使用了它。例如：

    ```
    [NSNumber numberWithInt:UIViewAnimationCurveLinear] 
    ```

    但是，如果`+[NSNumber numberWithInt:]`是正确的，那为什么呢？

2.  对于按位`enum`，例如：

    ```
    enum {
        UIViewAutoresizingNone                 = 0,
        UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
        UIViewAutoresizingFlexibleWidth        = 1 << 1,
        UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
        UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
        UIViewAutoresizingFlexibleHeight       = 1 << 4,
        UIViewAutoresizingFlexibleBottomMargin = 1 << 5
    };
    typedef NSUInteger UIViewAutoresizing; 
    ```

    我猜这`+[NSNumber numberWithUnsignedInteger:]`是正确的使用方法，因为有一个明确的`NSUInteger`after `typedef`。正确的？例如：

    ```
    [NSNumber numberWithUnsignedInteger:UIViewAutoresizingNone] 
    ```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-04-04T13:39:03.983

现在可以使用现代语法：

`@(UIViewAnimationCurveLinear)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T00:31:01.920

[NSNumber numberWithInt:your_enum_int_variable];

# haskell - 如何将两种类型约束与逻辑或 Haskell 结合起来？

> ID：10255148
> 
> 赞同：14
> 
> 时间：2012-04-21T00:36:13.360
> 
> 标签：haskell, typeclass, type-constraints

在 Haskell 中，我们能够将类型的约束与逻辑与结合起来。

考虑以下

```
type And (a :: Constraint) b = (a, b) 
```

或更复杂的

```
class (a, b) => And a b
instance (a, b) => And a b 
```

我想知道如何在 Haskell 中逻辑地或两个约束在一起。

我最接近的尝试是这个，但它并不完全奏效。在这次尝试中，我用标签来具体化类型约束，而不是用隐式参数去具体化它们。

```
data ROr a b where
 L :: a => ROr a b
 R :: b => ROr a b

type Or a b = (?choose :: ROr a b)

y :: Or (a ~ Integer) (Bool ~ Integer) => a
y = case ?choose of
 L -> 4

x :: Integer
x = let ?choose = L in y 
```

它几乎可以工作，但用户必须应用最后一部分，编译器应该为我做这件事。同样，当两个约束都满足时，这种情况不会让人们选择第三种选择。

我怎样才能在逻辑上或两个约束在一起？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T01:17:06.930

我相信没有办法自动选择`ROr a b`; `b`如果满足，但后来也满足，它将违反开放世界假设`a`；任何冲突解决规则都必然会导致添加一个实例来改变现有代码的行为。

也就是说，选择`R`何时`b`满足但`a`不破坏开放世界假设，因为它涉及确定实例*不满足*；¹即使您添加了一个“都满意”的构造函数，您也可以使用它来确定实例是否*不*存在（通过查看是否获得 an`L`或 an `R`）。

因此，我不相信这样的*或*约束是可能的；如果你可以观察到你得到了哪个实例，那么你可以通过添加一个实例来创建一个行为发生变化的程序，如果你不能观察到你得到了哪个实例，那么它就没什么用了。

¹这和正常的实例解析（也可能失败）之间的区别在于，通常编译器无法决定是否满足约束；在这里，您要求编译器确定不能满足约束。一个微妙但重要的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T22:58:40.957

我来这里是为了回答你关于咖啡厅的问题。不确定这里的 q 是否相同，但无论如何......

> 具有三个参数的类型类。
> 
> ```
>  class Foo a b c | a b -> c where
>      foo :: a -> b -> c
>    instance Foo A R A where ...
>    instance Foo R A A where ... 
> ```
> 
> 除了函数依赖之外，我想表达的参数 a 和 b 中至少有一个是 c，

```
import Data.Type.Equality
import Data.Type.Bool

class ( ((a == c) || (b == c)) ~ True)
      => Foo a b c  | a b -> c  where ... 
```

你需要打开一堆扩展。特别是`UndecidableSuperClasses`，因为类约束中的类型族调用在 GHC 中是不透明的。

你的q在这里

> 我怎样才能在逻辑上或两个约束在一起？

更棘手。对于类型相等方法，`==`使用封闭类型族。所以你可以写一个 Closed Type Family 返回 kind `Constraint`，但我怀疑有一个通用的解决方案。对于您的`Foo`班级：

```
type family AorBeqC a b c :: Constraint where
  AorBeqC a b a = ()
  AorBeqC a b c = (b ~ c)

class AorBeqC a b c => Foo a b c  | a b -> c  where ... 
```

它可能有较差的和非对称类型的改进行为：如果 GHC 可以看到它们`a, c`是分开的，它将进入第二个等式并使用它`(b ~ c)`来改进；如果它看不到它们是分开的，也看不到它们是统一的，它就会卡住。

通常，正如@ehird 指出的那样，您无法测试约束是否*不可*满足。类型相等是特殊的。

# ruby-on-rails - 如何解决“对象不支持#inspect”错误？

> ID：10255150
> 
> 赞同：2
> 
> 时间：2012-04-21T00:36:20.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, inspect

我正在使用 rails v3.2.2，当我尝试加载关联记录时出现一个奇怪的错误。

以下是我得到的终端输入/输出：

```
1.9.2-p318 :011 > Category.first
=> #<Category id: 1, ...>

1.9.2-p318 :013 > Category.first.articles
  Article Load (0.2ms)  SELECT `articles`.* FROM `articles` LIMIT 1
(Object doesn't support #inspect)

1.9.2-p318 :014 > Category.first.articles.first
  Category Load (0.2ms)  SELECT `categories`.* FROM `categories` LIMIT 1
NoMethodError: undefined method `scoped' for Category::Article:Module
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.2/lib/active_record/associations/association.rb:123:in `target_scope'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.2/lib/active_record/associations/through_association.rb:15:in `target_scope'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.2/lib/active_record/associations/association.rb:87:in `scoped'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.2/lib/active_record/associations/collection_association.rb:569:in `first_or_last'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.2/lib/active_record/associations/collection_association.rb:101:in `first'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.2/lib/active_record/associations/collection_proxy.rb:46:in `first'
    from (irb):14
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.2/lib/rails/commands/console.rb:47:in `start'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.2/lib/rails/commands/console.rb:8:in `start'
    from /<USER_PATH>/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.2/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

在我的`Category`模型中，我有：

```
class Category < ActiveRecord::Base
  has_many :article_relationships,
    :class_name  => 'Category::Article::ArticleRelationship',
    :foreign_key => 'category_id'

  has_many :articles,
    :through     => :article_relationships,
    :source      => :article
end 
```

在我的`Category::Article::ArticleRelationship`我有：

```
class Category::Article::ArticleRelationship < ActiveRecord::Base
  belongs_to :article,
    :class_name    => 'Article',
    :foreign_key   => 'article_id'
end 
```

**如何解决相关问题`Object doesn't support #inspect`？**

* * *

*注意*：在同一个`Category`模型中，我有一个类似的语句，比如 for `Category::Article::ArticleRelationship`（它`User`通过一个`Category::UserRelationship`类与一个类相关）并且它不会引起问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T01:16:28.710

您的应用程序调用了两个常量`Article`。一个是您的活动记录类，顶级常量。另一个是模块 `Category::Article`。

当你这样做`belongs_to :article`时，似乎 rails 开始`Article`在类中寻找一个常量，从那里调用 belongs_to，所以它找到了错误的。这会导致各种混乱，因为您显然不能互换使用 activerecord 类和模块

设置会`:class_name => '::Article'`强制找到顶级`Article`类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-09T12:38:30.280

如果使用的是 rails 4，问题来自 protected_attributes gem，你需要将 gem 版本 1.0.3 升级到 1.0.5，然后它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:06:09.820

这个问题似乎可以通过在 my 中说明以下内容来解决`Category::Article::ArticleRelationship`：

```
class Category::Article::ArticleRelationship < ActiveRecord::Base
  belongs_to :article,
    :class_name    => '::Article', # note I added '::'
    :foreign_key   => 'article_id'
end 
```

*但我不明白为什么？*

# java - 使用 ArrayList 的每个循环中的 NoSuchElementException

> ID：10255152
> 
> 赞同：1
> 
> 时间：2012-04-21T00:36:32.300
> 
> 标签：java, foreach, iterator

下面的类旨在按行索引单词的位置。引发错误的方法旨在将单独文档的索引附加到当前索引上。也就是说，如果第一个文档中有 6 行，则附加文档的第一行应该被索引为第 7 行。

```
public class DocumentIndex {
  // a NavigableMap implementation to store indexed words and their locations
  private TreeMap<String, ArrayList<Integer>> map = new TreeMap<String, ArrayList<Integer>>();

    /**
     * A method to append another index onto the main index
     * @param       indexAppendix       the additional index to be appended onto the main index
     */
  public void append(DocumentIndex indexAppendix){
    if(indexAppendix == null){
        throw new NullPointerException();
    }
    Integer docEnd = 0;                                 // the last line recorded in the main index
    Set<String> set = map.keySet();                     // a Set of the key values from map
    //select each key
    for(Iterator<String> iter = set.iterator(); iter.hasNext();){
        String key = iter.next();                       // the current key value
        // for each key select contents and determine the highest value
        for(Iterator<Integer> iter2 = this.find(key).iterator(); iter2.hasNext();){
            Integer compare = iter2.next();             // the key index current value
            if(compare>docEnd){
                docEnd=compare;
            }
        }
    }

    // for each key find an index value
    for(Iterator<String> iter = set.iterator(); iter.hasNext();){
        String key = iter.next();                       // the current key value
        // for each index value map that value adjusting for the length of the original document
        ArrayList<Integer> toAdd = new ArrayList<Integer>();
        for(Iterator<Integer> iter2 = this.find(key).iterator(); iter2.hasNext();){
            Integer addIter = iter2.next();
            toAdd.add(addIter); // the current index value
        }

        /**
         *Below is the loop in which the error is thrown
         */
        for(Iterator<Integer> iter3 = toAdd.iterator(); iter.hasNext();){

            Integer addIter = iter3.next();      // The error is thrown on this line

            map.get(key).add(addIter+docEnd);
        }
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T01:15:57.697

路易斯·瓦瑟曼 (Louis Wasserman) 做到了。

我只想指出，如果您使用“新”Java`for`循环语法，您的代码会简单得多，而且一开始就不会（不可能！！）犯这个错误。`for`例如，以下是使用“新”语法时您的代码的大致样子：

```
 ...
    Integer docEnd = 0;
    Set<String> set = map.keySet();  
    for (String key : set) {
         for (Integer compare : this.find(key)) {
             if (compare < docEnd){
                  docEnd = compare;
             }
         }
    }

    for (String key : set) {
        ArrayList<Integer> toAdd = new ArrayList<Integer>();
        for (String add : this.find(key)) {
            toAdd.add(add); 
        }
        for (Integer add : toAdd) {
            map.get(key).add(add * docEnd);
        }
    } 
```

这不是更具可读性吗？

* * *

我将“新”放在引号中，因为这种语法是在 2004 年发布的 Java 5 中引入的。它应该是所有实践 Java 程序员……和讲师……现在的标准报告的一部分。

请不要复制粘贴以上代码。它只是为了说明我的观点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T00:41:30.943

有问题的循环中的循环条件应该是`iter3.hasNext()`，不是`iter.hasNext()`。

# javascript - SoundCloud Javascript API SC.Connect 错误

> ID：10255159
> 
> 赞同：0
> 
> 时间：2012-04-21T00:37:24.527
> 
> 标签：javascript, soundcloud

刷新页面后用户不再登录。

我猜这与cookie有关。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:16:14.060

我们目前正在重写 SC JS SDK 中的会话管理，使其适用于所有浏览器。我们希望在下周末之前完成它，并且目前应该解决这些问题。

# visual-studio-2010 - Reorganizing XML using LINQ

> ID：10255165
> 
> 赞同：0
> 
> 时间：2012-04-21T00:38:43.330
> 
> 标签：visual-studio-2010, linq, c#-4.0

I have an XML file

```
<products>
<product number="241">
    <investment number="29">
        <rateLevel number="2">
            <ticker>ttt</ticker>
            <Cusip>1234</Cusip>
            <secId>ffff</secId>
            <investmentName>google</investmentName>
            <marketingStatusCode/>
            <marketingStatusReason/>
            <tiers>
                <tier>R6</tier>
            </tiers>
        </rateLevel>
    </investment>
</product>
<product number="241">
    <investment number="28">
        <rateLevel number="3">
            <ticker>bbb</ticker>
            <Cusip>233</Cusip>
            <secId>tiee</secId>
            <investmentName>apple</investmentName>
            <marketingStatusCode/>
            <marketingStatusReason/>
            <tiers>
                <tier>R2</tier>
            </tiers>
        </rateLevel>
    </investment>
</product>
<product number="200">
    <investment number="8214">
        <rateLevel number="20">
            <ticker>yyyy</ticker>
            <Cusip>5655</Cusip>
            <secId>ghos</secId>
            <investmentName>microsof</investmentName>
            <marketingStatusCode/>
            <marketingStatusReason/>
            <tiers>
                <tier>Signature</tier>
            </tiers>
        </rateLevel>
    </investment>
</product> 
```

and would like to reformat/reorganize the (product) tags (using Linq) to

```
<products>
<product number="241">
    <investment number="29">
        <rateLevel number="2">
            <ticker>ttt</ticker>
            <Cusip>1234</Cusip>
            <secId>ffff</secId>
            <investmentName>google</investmentName>
            <marketingStatusCode/>
            <marketingStatusReason/>
            <tiers>
                <tier>R6</tier>
            </tiers>
        </rateLevel>
    </investment>
    <investment number="28">
        <rateLevel number="3">
            <ticker>bbb</ticker>
            <Cusip>233</Cusip>
            <secId>tiee</secId>
            <investmentName>apple</investmentName>
            <marketingStatusCode/>
            <marketingStatusReason/>
            <tiers>
                <tier>R2</tier>
            </tiers>
        </rateLevel>
    </investment>
</product>
<product number="200">
    <investment number="8214">
        <rateLevel number="20">
            <ticker>yyyy</ticker>
            <Cusip>5655</Cusip>
            <secId>ghos</secId>
            <investmentName>microsof</investmentName>
            <marketingStatusCode/>
            <marketingStatusReason/>
            <tiers>
                <tier>Signature</tier>
            </tiers>
        </rateLevel>
    </investment>
</product> 
```

I have been using group by but am able to group to rateLevel tag but after that I get repeated tags. Please help.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:02:00.220

This is a rough first cut at how to do it. It could certainly be refactored.

```
XDocument xDoc = XDocument.Load(@"c:\temp\xmlproducts.xml");

var nodeGroup = from p in xDoc.Element("products").Descendants("product")
        group p by p.Attribute("number").Value into g
        select new 
        {
            Key = g.Key,
            Nodes = g.Descendants("investment")

        };

XDocument outDoc = new XDocument();

var root = new XElement("products");

nodeGroup.ToList().ForEach(grp=>
        {
            var product = new XElement("product");
            product.SetAttributeValue("number", grp.Key);

            product.Add(grp.Nodes);

            root.Add(product);
        }); 
```

# c++ - 普通比较时 QT 4.8 崩溃

> ID：10255166
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:38:46.653
> 
> 标签：c++, qt, crash

请帮我解释一下意外崩溃！！！我有：

> xh

```
class x: QObject
   struct
    {
        struct
        {
            struct
            {
                int state;
                double curstring;
                QTimer timer_scroll;
                QTimer timer_done;
            }color;
            struct
            {
                int state;
                double curstring;
                QTimer timer_scroll;
                QTimer timer_done;
            }mono;
        }S2L_NOTIFY; 
```

....ETC

> x.cpp

```
void x::draw(const int type, QString str, bool isNeedAnswer)
{
    if(type == 3)
    {
        //here is crash!
        if(bitmap.S2L_NOTIFY.mono.state == 3 &&  bitmap.S2L_NOTIFY.color.state == 3)
        { 
```

`if((bitmap.S2L_NOTIFY.mono.state == 3))`-<这里不会崩溃

`if((bitmap.S2L_NOTIFY.color.state == 3))` -<这里不会崩溃

请告诉我我错在哪里或编译器错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:49:26.177

问题是您的条件中有 x，但该函数`x::rndfunc()`是 x 类的成员函数......而不是变量。它应该是：

```
// "this" refers to the current instance of class x
if((this->y.z.f.nmb2 == NOTOK) && (this->y.z.f.nmb1 == NOTOK)) 
```

或者简单地说：

```
// but the "this" isn't actually necessary
if((y.z.f.nmb2 == NOTOK) && (y.z.f.nmb1 == NOTOK)) 
```

（如你所写）。

**编辑：**好的，所以原来的问题中有一个错字，所以上面的内容不再相关。新的答案是：

`f`没有成员变量`nmb1`，只有`nmb2`。

**编辑#2：**更多错别字。我的新答案：

你正在尝试做的事情看起来真的很混乱。不要这样做。

# matlab - 在 MATLAB 中手动对齐图像？

> ID：10255168
> 
> 赞同：0
> 
> 时间：2012-04-21T00:39:42.143
> 
> 标签：matlab, image-processing, alignment

我做了一些搜索，但没有找到我需要的东西。我有两张图片需要对齐。我只想手动旋转它们和/或更改它们的比例。是否有任何工具/程序可以帮助我做到这一点？请注意，我无法单击相应的点，因为可能没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:39:13.157

我建议将这两个图像叠加在花药的顶部，并继续旋转和缩放顶部图像，直到它与底部图像重合。

但是，您想在无人监督的情况下执行此操作，您可以使用傅里叶梅林变换 (FMT)，它可以在合理的范围内执行此操作

# java - 为 java 友好/内部包类和内部/友好方法生成公共访问器类

> ID：10255178
> 
> 赞同：2
> 
> 时间：2012-04-21T00:41:44.833
> 
> 标签：java, android, unit-testing, junit

我有一个带有单个公共外观的包，有两种方法，启动和停止。因为这个外观适用于 50 多个内部/友好类包，所以我需要一种能够直接测试其中几个内部类的方法。

我正在使用 Eclipse 和 JUnit。

反射可能是一个好方法，但是为什么要自己编写所有这些反射代码，是否有生成包装器公共类的好工具（如 .net Visual Studio 可以）？

其次，有人可以解释一下如何为 JUnit 管理双源代码树，或者让我参考该主题的一篇好文章吗？我看过几篇博客文章，但更想看看这里的人是否有很好的解释/参考。

而且，最重要的是——是否测试内部类，这不是我的问题，这是我的设计，也是我喜欢的工作方式。有些人认为你应该，有些人认为你不应该，所以请不要发布答案，例如：你应该只测试公共，这样问题就解决了。我在stackoverflow中搜索并找不到关于它的好帖子。

先感谢您 ，

詹姆士 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:02:53.633

据我了解 Louis Wasserman 的回复，您的文件结构看起来像

```
src/production/mypackage/MyClass.java

src/junit/mypackage/MyClassTest.java 
```

然后 src/production/mypackage/MyClass.java 看起来像

```
class MyClass
{
      void start ( ) { ... }
      void stop ( ) { .... }

      class InnerClass1 { ... } 
      class InnerClass2 { ... }\
      ...
      class InnerClass50 { ... }
} 
```

由于 MyClassTest 和 MyClass 在同一个包中 mypackage.MyClass.InnerClass1...50 可以从 MyClass 测试中进行测试。

确保 MyClass 不依赖 MyClassTest 做任何事情。对于生产，您可以编译生产目录中的所有内容（完全跳过 junit 测试）。为了测试编译两个目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:38:30.507

Your instinct to maintain a dual source tree is correct. Simply have two source directories, with the same directory/package structure within. Compile to similarly separate output destinations, but put everything in your classpath when you run tests. Even though the classes may be even different output directories, their identical directory/package structure will make it work. If you use Maven, this is standard. With that tool, the source directory names are `src/main` and `src/test`, and the output directories are `target/classes` and `target/test-classes`. The fact that Maven supports this out of the box shows how standard this practice is within the Java community and you should use it with confidence. (For that matter, I encourage you to use Maven, it will make your life a lot easier. You can use Maven with Eclipse and lots of people do.)

With unit tests now being inside your package, you can test all the package-protected classes you want. I disagree with people who say only test `public` things. In fact, no less a luminary than Cedric Beust, the author of TestNG, argues that [if it can break, it should be tested, and that includes private methods](http://beust.com/weblog/2005/07/18/testing-private-methods-you-bet/). I have unit tested private methods [with a little help from reflection](https://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit). Package-protected stuff is of course easier to test. Regardless, I think it's a religious argument to say that only `public` things should be tested.

# json - 从 google fusion table SQL API 查询请求 JSON

> ID：10255179
> 
> 赞同：1
> 
> 时间：2012-04-21T00:42:00.613
> 
> 标签：json, google-fusion-tables

我正在通过下面的 url 查询一个 google 融合表，它返回一个 csv 文件。有谁知道如何让它返回json？

```
https://www.google.com/fusiontables/api/query?sql=SELECT ROWID FROM <table id> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T23:04:01.433

融合表 SQL api 有一个未记录的功能，可让您检索 JSON。所以你的网址是：

```
https://www.google.com/fusiontables/api/query?sql=SELECT ROWID FROM <table id>&jsonCallback=<callback function> 
```

一旦融合表表 api 生效，它默认返回 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:39:21.407

我认为这不是 Fusion Table API 中的一个选项。但是 CSV 很容易用 Javascript 解析。未记录的 Fusion Table JSONP API 将 CSV 包装在 JSON 中，创建列和行成员。

# ruby-on-rails - Ruby on Rails：未添加记录

> ID：10255180
> 
> 赞同：0
> 
> 时间：2012-04-21T00:42:09.900
> 
> 标签：ruby-on-rails

我有一个 iPhone 客户端，它应该将记录添加到我制作的 Heroku 应用程序中。问题是没有添加记录。

这是我的导轨代码：

```
 Bathroom.Create(name =>params[:name],
                    :bathroomtype =>params[:bathroomtype],
                    :street =>params[:street],
                    :city =>params[:city],
                    :state =>params[:state],
                   :country =>params[:country],
                    :postal =>params[:postal],
                    :lat =>params[:lat],
                    :lon =>params[:lon],
                    :access =>params[:access], 
                    :directions =>params[:directions],
                    :comment =>params[:comment],
                    :avail =>params[:avail] )
                    render :nothing => true 
```

在我的测试早期，它似乎可以在本地服务器上运行。这让我觉得我没有访问生产数据库，但我不确定如何设置它？

在本地测试之后，我做了一个 heroku db:push 来推送数据库，但我仍然不确定我是否做对了。没有创建记录。

这是我的 database.yml

开发：适配器：sqlite3 数据库：db/development.sqlite3 池：5 超时：5000

测试：适配器：sqlite3 数据库：db/test.sqlite3 池：5 超时：5000

生产：适配器：sqlite3 数据库：db/production.sqlite3 池：5 超时：5000

所以，我对创建代码是否正确感到困惑？如果是这样，那为什么我的条目没有出现在数据库中？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:44:57.327

有几件事突然出现在我身上，`name`是一个简单的词而不是一个符号（缺少前导冒号），`Create`应该是`create`. 对于调试，您可以通过查看`Bathroom.create(params).errors.full_messages`. `create!`您还可以使用而不是说“如果保存失败，则引发异常” `create`，然后检查您的日志中的死机。

# python - 如何在python中抓取到excel

> ID：10255185
> 
> 赞同：2
> 
> 时间：2012-04-21T00:44:33.617
> 
> 标签：python, excel, web-scraping

我想知道如何让 python 网络抓取将所有结果转储到 excel 中。不是我不知道怎么爬网，只是我不知道怎么爬进excel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:47:44.607

您说您知道[如何进行网络抓取](https://stackoverflow.com/questions/10078612/webscraper-will-not-work)，大概是记忆中的内容。

然后你只需要将内容转储到 Excel 中。使用[Excel Python API](https://stackoverflow.com/questions/6698229/excel-python-api)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:51:44.943

如果您不想引入完整的 excel 库，您可以编写 HTML 表格或 CSV，Excel 会很乐意导入它们。这样做的缺点是您仅限于一个工作表并且没有公式。

# ruby-on-rails - 这是在铁路中处理大量路线的正确方法吗？

> ID：10255191
> 
> 赞同：1
> 
> 时间：2012-04-21T00:45:15.813
> 
> 标签：ruby-on-rails, forms, filter, routing

我有一个名为 /monsters 的模板 url。在模板中，我有一个侧边栏

按类型排序：

*   水
*   火
*   地球
*   飞行
*   ETC...

我想知道每个路由的最佳方式是什么？我猜有这样的网址会很好

```
www.example.com/monsters/water 
```

或者

```
www.example.com/monsters/fire. 
```

我应该怎么做呢？在我的 routes.rb 上我想到了

```
match 'monsters/water',     to: 'monsters#water'
match 'monsters/fire',      to: 'monsters#fire'
match 'monsters/earth',     to: 'monsters#earth'
match 'monsters/flying',    to: 'monsters#flying' 
```

ETC...

但我觉得那不是一个好方法。每次都有单独的比赛去不同的动作？有人可以帮我设计吗？非常感谢您提供全面而明确的帮助=）

谢谢一堆=）

或者我什至应该有单独的链接开始？我应该将所有内容都发布到我的索引操作中吗？我想过使用表格并使用 :post 但这已经被我的怪物创建动作所采用。目前在我的索引页面 (/monsters) 上列出了所有这些，因为在我的索引操作中，我只是做了一个

```
@monsters = Monster.paginate(page: params[:page]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:01:00.250

你需要的是：

```
resources :monsters, path: '/monsters/:category' 
```

这将生成这些路由：

```
named path   | verb   | route                                  | controller#action
             |        |                                        |
monsters     | GET    | /monsters/:category(.:format)          | monsters#index
monsters     | POST   | /monsters/:category(.:format)          | monsters#create
new_monster  | GET    | /monsters/:category/new(.:format)      | monsters#new
edit_monster | GET    | /monsters/:category/:id/edit(.:format) | monsters#edit
monster      | GET    | /monsters/:category/:id(.:format)      | monsters#show
monster      | PUT    | /monsters/:category/:id(.:format)      | monsters#update
monster      | DELETE | /monsters/:category/:id(.:format)      | monsters#destroy 
```

它将允许您执行以下操作：

```
/monsters/fire  => { controller: 'monsters', action: 'index', category: 'fire' }
/monsters/water => { controller: 'monsters', action: 'index', category: 'water' }
/monsters/earth/15 => { controller: 'monsters', action: 'show', category: 'earth', id: 15 } 
```

另外，您仍然可以使用命名路径：

```
monsters_path('flying') => '/monsters/flying'
edit_monster_path('fire', 15) => '/monsters/fire/15' 
```

并链接到怪物，如：

```
<%= link_to monster.name, monster_path(monster.category, monster.id) -%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:50:16.710

您应该指定一个接受可变段的通用路由，并使用它来加载正确类型的怪物：

```
match "monsters/:category" => "monsters#index"

...

class MonstersController < ApplicationController
  def index
    @monsters = Monster.find_by_category(params[:category])
  end
end 
```

您可以使该`:category`段可选并修改您的索引操作以有条件地使用它，如果它被传入：

```
def index
  @monsters = Monster.find_by_category(params[:category]) if params[:category]
  @monsters ||= Monster.all
end 
```

# c# - 我需要一种方法来模拟或欺骗打印机或创建可以看到打印的虚拟打印机

> ID：10255192
> 
> 赞同：0
> 
> 时间：2012-04-21T00:45:43.910
> 
> 标签：c#, testing, printing, integration-testing

我需要一种方法来欺骗类似于 smtp4dev (http://smtp4dev.codeplex.com/) 的打印机。

smtp4dev 是一个测试电子邮件功能的好工具，我很想找到一个类似的产品，它可以欺骗打印机并提供对虚拟打印页面的访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:52:20.670

安装 PDF 驱动程序，然后打印到它，我使用[PDFCreator](http://sourceforge.net/projects/pdfcreator/)完成此任务。

从编程的角度来看，它看起来与打印机完全相同，并且您可以很好地预览实际页面在打印机上的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:53:27.397

如果您安装了 One Note，您可以打印到 One Note，然后您可以在 One Note 中查看。

# ios - 对以编程方式构建的 tableview 单元格使用 segues

> ID：10255194
> 
> 赞同：0
> 
> 时间：2012-04-21T00:45:55.143
> 
> 标签：ios, ios5, uitableview, uistoryboard, uistoryboardsegue

我避免在界面构建器的故事板模式中使用静态原型单元。但是当按下这些单元格以显示详细视图控制器时，我仍然想使用 segues。

我试图在 IB 中创建一个 segue，但它不允许我（从 tableview 本身拖）所以我继续尝试按如下方式创建程序：

```
[[UIStoryboardSegue alloc] initWithIdentifier:@"FriendProfileSegue" source:self destination:[[BBFOtherProfileController alloc] init]]; 
```

但是我仍然会崩溃，因为目标视图控制器没有实现 segue。有办法解决这个问题吗？如果可能的话，我更愿意在 IB 中创建 segue。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:08:23.643

您应该能够轻松地在 IB 中进行转场：按住 Control 并单击表格视图单元格，然后拖动到目标视图控制器。确保您实际单击的是表格视图单元格，而不是其中的子视图。为了确保这一点，您可以先在左侧面板中选择表格视图单元格，然后在图表视图中按住 Control 单击并从中拖动。

通常，如果您不使用 IB 来创建 segue，您只需按照常规的旧方式进行操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
    // ...
    // Pass the selected object to the new view controller.
    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

# c++ - 如何在远程主机上使用 GNU 在 Netbeans7.1.1 中编译 C/C++

> ID：10255195
> 
> 赞同：1
> 
> 时间：2012-04-21T00:46:07.977
> 
> 标签：c++

我已经安装了连接到远程构建主机（我的虚拟机）的 Netbeans 7.1.1。我试图编译我在某个网站上找到的一些程序。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <libxml/tree.h>
#include <libxml/parser.h>
#include <libxml/parserInternals.h>

// Appelée à la rencontre de chaque balise ouvrante
void debut_element(void *user_data, const xmlChar *name, const xmlChar **attrs) {
printf("Début de l'élément : %s\n", name);
}

int main() {
// Initialisation à zéro de tous les membres (NULL pour un pointeur par conversion)
xmlSAXHandler sh = { 0 };

// Affectation des fonctions de rappel
sh.startElement = debut_element;

xmlParserCtxtPtr ctxt;
// Création du contexte
if ((ctxt = xmlCreateFileParserCtxt("catalogue.xml")) == NULL) {
    fprintf(stderr, "Erreur lors de la création du contexte\n");
    return EXIT_FAILURE;
}
// Fonctions de rappel à utiliser
ctxt->sax = &sh;
// Analyse
xmlParseDocument(ctxt);
// Le document est-il bien formé ?
if (ctxt->wellFormed) {
    printf("Document XML bien formé\n");
} else {
    fprintf(stderr, "Document XML mal formé\n");
    xmlFreeParserCtxt(ctxt);
    return EXIT_FAILURE;
}
// Libération de la mémoire
xmlFreeParserCtxt(ctxt);

return EXIT_SUCCESS;
} 
```

但是，我在编译期间收到此错误消息

```
Copying project files to /home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/ at saebyuk@redHat
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/xml_decoder_red_hat
gmake[2]: Entering directory `/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat'
gmake[2]: Warning: File `main.cpp' has modification time 2.1e+04 s in the future
mkdir -p build/Debug/GNU-Linux-x86
rm -f build/Debug/GNU-Linux-x86/main.o.d
g++    -c -g -Wall -I/usr/include/libxml2 -MMD -MP -MF build/Debug/GNU-Linux-x86/main.o.d -o build/Debug/GNU-Linux-x86/main.o main.cpp
mkdir -p dist/Debug/GNU-Linux-x86
g++     -I/usr/include/libxml2 -o dist/Debug/GNU-Linux-x86/xml_decoder_red_hat build/Debug/GNU-Linux-x86/main.o  
build/Debug/GNU-Linux-x86/main.o: In function `main':
/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat/main.cpp:35: undefined reference to `xmlCreateFileParserCtxt'
/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat/main.cpp:40: undefined reference to `xmlParseDocument'
/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat/main.cpp:46: undefined reference to `xmlFreeParserCtxt'
collect2: ld returned 1 exit status
gmake[2]: *** [dist/Debug/GNU-Linux-x86/xml_decoder_red_hat] Error 1
gmake[2]: Leaving directory `/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat'
gmake[1]: *** [.build-conf] Error 2
gmake[1]: Leaving directory `/home/saebyuk/.netbeans/remote/redHat/saebyuk-pc-Windows-x86/C/Users/saebyuk/Documents/NetBeansProjects/xml_decoder_Red_hat'
gmake: *** [.build-impl] Error 2 
```

我知道这已经在这里被问了数千次，但我找不到正确的答案。感谢你们中的任何人可以指导我，因为我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:44:23.217

我不知道如何配置 Netbeans；但是如果您手动执行此命令，您的代码编译不会有任何问题：

```
gcc -o xmltest xmltest.c -I /usr/include/libxml2 -lxml2 
```

如果您还没有`Makefile`，这是一个好的开始：

```
LDFLAGS := -I /usr/include/libxml2 -lxml2 
```

但是，如果 Netbeans 强制您使用不同的构建系统，您将不得不找出另一种方法来适当地设置链接器选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T00:31:18.207

libxml2 库位于 libxml2/libxml/* 下，但所有头文件都使用 libxml/*。

将指令更改为

```
#include <libxml2/libxml/*> 
```

也会抱怨，因为所有指令都指向同一个文件夹；我在远程服务器上做的一个解决方法是在包含文件夹下创建一个指向库的符号链接。

ARM 板上的 Debian Lenny...

```
ln -s /usr/include/libxml2/libxml /usr/include/libxml 
```

重启Netbeans，所有红色消失，构建成功，运行成功。

# asp.net - System.FormatException：输入字符串的格式不正确

> ID：10255197
> 
> 赞同：1
> 
> 时间：2012-04-21T00:46:14.810
> 
> 标签：asp.net, vb.net

因此，我尝试为我的大学课程创建一个小型在线商店，但我偶然发现了这个我不明白的错误。首先是我的订单页面的代码。

```
<%@ Page Language="VB" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)  

        Dim strSessionID As String
        Dim strItem As String
        Dim strQuantity As String
        strSessionID = Session.SessionID
        strItem = Session("Item")
        strQuantity = Session("Quantity")
        tbxItem.Text = strItem
        tbxQuantity.Text = strQuantity

    End sub

    Protected Sub btnAddOrder_Click(ByVal sender As Object, ByVal e As System.EventArgs)

        Dim strItem As String
        Dim strQuantity As String
        Dim strFullName As String
        Dim strAddressLine As String
        Dim intPhoneNumber As Integer
        Dim intCardNumber As Integer
        Dim strNameOnCard As String
        Dim strExpirationDate As String

        strItem = tbxItem.Text
        strQuantity = tbxQuantity.Text
        strFullName = tbxFullName.Text
        strAddressLine = tbxAddressLine.Text
        intPhoneNumber = tbxPhoneNumber.Text
        intCardNumber = tbxCardNumber.Text
        strNameOnCard = tbxNameOnCard.Text
        strExpirationDate = tbxExpirationDate.Text

        Dim strDatabaseNameAndLocation As String
        strDatabaseNameAndLocation = Server.MapPath("pcland.mdb")
        Dim strSQLCommand As String
        strSQLCommand = "INSERT INTO orders(Item, Quantity, FullName, AddressLine, PhoneNumber, CardNumber, NameOnCard, ExpirationDate) " & _
            "Values ('" & strItem & "','" & strQuantity & "','" & strFullName & "', '" & strAddressLine & "', '" & intPhoneNumber & "', '" & intCardNumber & "', '" & strNameOnCard & "', '" & strExpirationDate & "');"
        Dim objOleDbConnection As System.Data.OleDb.OleDbConnection
        objOleDbConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & strDatabaseNameAndLocation)
        objOleDbConnection.Open()
        Dim objOleDbCommand As System.Data.OleDb.OleDbCommand
        objOleDbCommand = New System.Data.OleDb.OleDbCommand(strSQLCommand, objOleDbConnection)
        objOleDbCommand.ExecuteNonQuery()
        objOleDbConnection.Close()        
        strSQLCommand = "SELECT orders.* FROM orders ORDER BY orders.Price DESC;"
        objOleDbConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & strDatabaseNameAndLocation)       
        tbxItem.Text = ""
        tbxQuantity.Text = ""
        tbxFullName.Text = ""
        tbxAddressLine.Text = ""
        tbxPhoneNumber.Text = ""
        tbxCardNumber.Text = ""
        tbxNameOnCard.Text = ""
        tbxExpirationDate.Text = ""

        lblConfirmationMessage.Text = "Thank you for order."

    End Sub

</script>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title>PC land | Cart</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <link href="#" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <form id="webform" runat="server">
            <div>
                <table border="0">
                <tr>
                    <td>Item:</td>
                    <td><asp:TextBox ID="tbxItem" ReadOnly="True" runat="server"></asp:TextBox></td>
                </tr>
                <tr>
                    <td>Quantity:</td>
                    <td><asp:TextBox ID="tbxQuantity" ReadOnly="True" runat="server"></asp:TextBox></td>
                </tr>
                <tr>
                    <td>Full Name:</td>
                    <td><asp:TextBox ID="tbxFullName" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvFullName" runat="server" ControlToValidate="tbxFullName" 
                    Display="Dynamic">You must enter your full name</asp:RequiredFieldValidator></td>
                </tr>
                <tr>
                    <td>Address Line:</td>
                    <td><asp:TextBox ID="tbxAddressLine" TextMode="MultiLine" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvAddressLine" runat="server" ControlToValidate="tbxAddressLine" 
                    Display="Dynamic">You must enter your address</asp:RequiredFieldValidator></td>
                </tr>
                    <td>Phone Number:</td>
                    <td><asp:TextBox ID="tbxPhoneNumber" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvPhoneNumber" runat="server" ControlToValidate="tbxPhoneNumber" 
                    Display="Dynamic">You must enter your phone number (No spaces or dashs)</asp:RequiredFieldValidator></td>
                </tr>
                    <td>Card Number:</td>
                    <td><asp:TextBox ID="tbxCardNumber" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvCardNumber" runat="server" ControlToValidate="tbxCardNumber" 
                    Display="Dynamic">You must enter the card number (No spaces or dashs)</asp:RequiredFieldValidator></td>
                </tr>
                    <td>Name On Card:</td>
                    <td><asp:TextBox ID="tbxNameOnCard" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvNameOnCard" runat="server" ControlToValidate="tbxNameOnCard" 
                    Display="Dynamic">You must enter the full name that is on the card </asp:RequiredFieldValidator></td>
                </tr>
                    <td>Expiration Date:</td>
                    <td><asp:TextBox ID="tbxExpirationDate" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvExpirationDate" runat="server" ControlToValidate="tbxExpirationDate" 
                    Display="Dynamic">You must enter the expiration date (Example format: 01/02/90)</asp:RequiredFieldValidator></td>
                </tr>
                <tr>
                    <td><asp:Button id="btnAddRecord" runat="server" onclick="btnAddOrder_Click" postbackurl="confirm.aspx" text="Submit" /></td><br />
                </tr>
                </table>
                <asp:Label ID="lblConfirmationMessage" runat="server"></asp:Label><br />
            </div>
        </form>
        <div id="footer">Copyright &copy; 2012 PC Land - All Rights Reserved</div>
    </body>
</html> 
```

现在这里是确认页面的代码，它应该显示用户在订单页面上选择的选项

```
<%@ Page Language="VB" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)

        Dim tbxItem As TextBox
        Dim tbxQuantity As TextBox
        Dim tbxFullName As TextBox
        Dim tbxAddressLine As TextBox
        Dim tbxPhoneNumber As TextBox
        Dim tbxCardNumber As TextBox
        Dim tbxNameOnCard As TextBox
        Dim tbxExpirationDate As TextBox

        Dim strItem As String
        Dim strQuantity As String
        Dim strFullName As String
        Dim strAddressLine As String
        Dim intPhoneNumber As Integer
        Dim intCardNumber As Integer
        Dim strNameOnCard As String
        Dim strExpirationDate As String

        tbxItem = CType(Me.PreviousPage.FindControl("tbxItem"), TextBox)
        tbxQuantity = CType(Me.PreviousPage.FindControl("tbxQuantity"), TextBox)
        tbxFullName = CType(Me.PreviousPage.FindControl("tbxFullName"), TextBox)
        tbxAddressLine = CType(Me.PreviousPage.FindControl("tbxAddressLine"), TextBox)
        tbxPhoneNumber = CType(Me.PreviousPage.FindControl("tbxPhoneNumber"), TextBox)
        tbxCardNumber = CType(Me.PreviousPage.FindControl("tbxCardNumber"), TextBox)
        tbxNameOnCard = CType(Me.PreviousPage.FindControl("tbxNameOnCard"), TextBox)
        tbxExpirationDate = CType(Me.PreviousPage.FindControl("tbxExpirationDate"), TextBox)

        strItem = tbxItem.Text
        strQuantity = tbxQuantity.Text
        strFullName = tbxFullName.Text
        strAddressLine = tbxAddressLine.Text
        intPhoneNumber = tbxPhoneNumber.Text
        intCardNumber = tbxCardNumber.Text
        strNameOnCard = tbxNameOnCard.Text
        strExpirationDate = tbxExpirationDate.Text

        lblItem.Text = "You said your item was " & strItem
        lblQuantity.Text = "You said your quantity was " & strQuantity
        lblFullName.Text = "You said your full Name was " & strFullName
        lblAddressLine.Text = "You said your Address was " & strAddressLine
        lblPhoneNumber.Text = "You said your item was " & intPhoneNumber
        lblCardNumber.Text = "You said your item was " & intCardNumber
        lblNameOnCard.Text = "You said the name on your card was " & strNameOnCard
        lblExpirationDate.Text = "You said the expiration date was " & strExpirationDate

    End Sub

</script>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title>PC land | Cart</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <link href="#" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <form id="webform" runat="server">
            <div>
                <p><asp:Label ID="lblItem" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblQuantity" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblFullName" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblAddressLine" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblPhoneNumber" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblCardNumber" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblNameOnCard" runat="server"></asp:Label></p>
                <p><asp:Label ID="lblExpirationDate" runat="server"></asp:Label></p>
            </div>
        </form>
        <div id="footer">Copyright &copy; 2012 PC Land - All Rights Reserved</div>
    </body>
</html> 
```

我得到的错误是：

```
Server Error in '/' Application.
Input string was not in a correct format.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.FormatException: Input string was not in a correct format.

Source Error:

Line 37:         strFullName = tbxFullName.Text
Line 38:         strAddressLine = tbxAddressLine.Text
Line 39:         intPhoneNumber = tbxPhoneNumber.Text
Line 40:         intCardNumber = tbxCardNumber.Text
Line 41:         strNameOnCard = tbxNameOnCard.Text

Source File: D:\SOC Students Web Site\students\insc\insc209\project\confirm.aspx    Line: 39

Stack Trace:

[FormatException: Input string was not in a correct format.]
   Microsoft.VisualBasic.CompilerServices.Conversions.ParseDouble(String Value, NumberFormatInfo NumberFormat) +201
   Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) +66

[InvalidCastException: Conversion from string "" to type 'Integer' is not valid.]
   Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) +246
   ASP.students_insc_insc209_project_confirm_aspx.Page_Load(Object sender, EventArgs e) in D:\SOC Students Web Site\students\insc\insc209\project\confirm.aspx:39
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

它将信息放入数据库中，但显然我想摆脱错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:15:23.717

一般当你看到这个错误信息时：

> 输入字符串的格式不正确

它涉及将数据从一种类型转换为另一种类型，并且转换不成功。查看代码，您已声明`intPhoneNumber`为 type `Integer`：

```
Dim intPhoneNumber As Integer 
```

由于 VB.Net 提供了自动类型强制转换，这一行试图获取电话号码文本框内容的字符串值并将其转换为数字：

```
intPhoneNumber = tbxPhoneNumber.Text 
```

最有可能发生的情况是您的电话号码以类似的格式输入`(123) 456-7890`，无法转换为整数。如果您确实希望用户输入有效数字，您希望提供验证和错误检查作为防御性编码实践：

```
If IsNumeric(tbxPhoneNumber.Text) Then
    intPhoneNumber = CInt(tbxPhoneNumber.Text)
Else
    MessageBox("Error: Please enter phone as 9-digit number.")
End If 
```

**编辑：**我看到您已将`RequiredFieldValidator`其应用于电话号码。这很好，但它只会验证它是否已输入。如果您还想验证它是一个 9 位数字，您可以使用`RegularExpressionValidator`. 我建议让两个验证器都针对它们实际验证的事物类型提供适当的错误消息，例如：

```
<asp:RequiredFieldValidator ID="rfvPhoneNumber" runat="server"
    ControlToValidate="tbxPhoneNumber" 
    Display="Dynamic">
    You must enter your phone number (9 digits, no spaces or dashes)
</asp:RequiredFieldValidator>

<asp:RegularExpressionValidator" ID="revPhoneNumber" runat="server"
    ControlToValidate="tbxPhoneNumber"
    Display="Dynamic" ValidationExpression="\d{9}">
    Please enter 9-digit phone number without spaces or dashes
</asp:RegularExpressionValidator> 
```

# ruby-on-rails - 有没有办法用 simple_form 为 Rails 提交 ajax/json 请求

> ID：10255198
> 
> 赞同：8
> 
> 时间：2012-04-21T00:46:19.423
> 
> 标签：ruby-on-rails, ajax, simple-form

使用标准 Rails form_for，我能够通过 select 和 collection_select 帮助器传递 ajax 请求，如下所示：

```
<%= address.collection_select :country, @countries, :id, :name, {:include_blank => false}, "data-remote" => true, "data-url" => "/ajax/states", "data-type" => :json  %> 
```

我似乎无法弄清楚如何用[simple_form做到这一点](https://github.com/plataformatec/simple_form)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T00:59:41.133

弄清楚了。你只需要添加这个：

```
:input_html => {"data-remote" => true, "data-url" => "/yoururl", "data-type" => :json} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-13T08:38:29.820

最好这样写：

```
= simple_form_for sample_result, url: reject_sample_result_path(sample_result), method: :post, remote: true, input_html: {multipart: true} do |f| 
```

当您明确声明`data-url`时，它仍将首先进行默认路由计算，在我的情况下失败，因为默认路由不存在（并且不应该存在——因为我否决了 url）。当您声明 just`url`时，它只会采用给定的 url。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-02T13:54:22.730

我想发布一个相关的跟进，因为我在弄清楚如何为此实现回调时遇到了一些困难。我发现这篇文章很有帮助：[http ://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)

秘诀是添加一个 HTML5 数据属性，例如，`data-complete`或者（更好地）将 Rails 提供的`ajax:complete`或`ajax:success`回调绑定到您的表单（参见上面链接的文章中的 4\. 远程 JavaScript 回调）：

来自文章：

```
jQuery(function($) {
  // create a convenient toggleLoading function
  var toggleLoading = function() { $("#loading").toggle() };

  $("#tool-form")
    .bind("ajax:loading",  toggleLoading)
    .bind("ajax:complete", toggleLoading)
    .bind("ajax:success", function(event, data, status, xhr) {
      $("#response").html(data);
    });
}); 
```

咖啡脚本示例：

```
$("#new_post").on("ajax:success", (e, data, status, xhr)->
  console.log data
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T20:46:41.967

现在看来，这样做的有效方法是：

```
:remote => true, :html => { :data => { :url => '/yoururl', :type => :json } } 
```

使用 ruby​​ 1.9 哈希语法可能看起来更好一些：

```
remote: true, html: { data: { url: '/yoururl', type: :json } } 
```

[https://github.com/plataformatec/simple_form/wiki/HTML5-Attributes](https://github.com/plataformatec/simple_form/wiki/HTML5-Attributes)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-02T22:10:35.863

我发现的最简单的方法是：

在您看来：

```
<%= simple_form_for :my_object, url: my_objects_path(format: :json), remote: true do |f| %>
  <%= f.error_notification %>
  <%= f.input :an_attribute %>
  <%= f.submit %>
<% end %> 
```

在你的控制器中：

```
def create
  @my_object = MyObject.new(my_object_params)
  if @my_object.save
    respond_to do |format|
      format.html { redirect_to @my_object, notice: "Saved" }
      format.json { render json: @my_object, location: my_object_url(@object), status: :created }
    end
  else
    respond_to do |format|
      format.html { render :edit }
      format.json {render json: @my_object, status: :unprocessable_entity }
    end
  end
end 
```

在 Rails 5 中，安装了 Jbuilder 的控制器更容易创建简单的 json 哈希，但这也应该在那里工作。

# javascript - 在两个 div 之间自动切换

> ID：10255201
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:46:51.933
> 
> 标签：javascript, css, animation, jquery-animate, fade

我有两个 div 嵌套在一个包含的 div 中，并希望在两个 div 之间不断切换。

```
 <div style="position: relative; top: 50px; width: 778px; margin: 0 auto;">
    <div id="alerts" style="float: right; width:200px; height: 25px; background: goldenrod; border-radius: 3px 3px 3px 3px; font: 11px Arial; color: #404040; overflow: hidden;"> 
      <div id="Mass_alert" class="alert" style="position: relative; top: 0px; margin: 0 auto; text-align: center;"></div>
      <div id="Devotion_alert" class="alert" style="position: relative; top: 20px; margin: 0 auto; margin-top: 10px; text-align: center;"></div>
    </div>
  </div>

$('#alerts').ready(function(){
    $('#Mass_alert').ready(function(){
    fadein_Mass();
    });
});

function fadein_Mass() {
    $('#Devotion_alert').fadeOut(600, function() {
    $('#Mass_alert').fadeIn(600);
    fadein_Devotion();
    });
}

function fadein_Devotion() {
    $('#Mass_alert').fadeOut(600, function() {
    $('#Devotion_alert').fadeIn(600);
    fadein_Mass();
    });
} 
```

我希望能够使用淡入淡出效果来做到这一点：淡出`Mass_alert`，淡入`Devotion_alert`。最好的方法是什么？

**编辑** **这工作**

```
 <div style="position: relative; top: 0px; width: 778px; margin: 0 auto;"> 
    <div id="alerts" style="float: right; width:260px; height: 25px; background: goldenrod; border-radius: 3px 3px 3px 3px; font: 11px Arial; color: #101010;">
      <div id="Mass_alert" class="alert" style="position: relative; top: 3px; margin: 0 auto; text-align: center; width:100%; height: 20px;">Mass alert</div>
      <div id="Devotion_alert" class="alert" style="position: relative; top: -17px; margin: 0 auto; text-align: center; width:100%; height: 20px;">devotion alert</div>
    </div>
  </div>

$(document).ready(function() {  
    var continuous = function () {
    $("#Mass_alert").fadeToggle(6000, 'swing');
    $("#Devotion_alert").fadeToggle(6000, 'swing');   
    };
    $("#Devotion_alert").hide();
    setInterval(continuous,600); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:55:38.233

如果您使用 jQuery，您可以执行以下操作：

```
$('#Mass_alert').toggle(100);
$('#Devotion_alert').toggle(100); 
```

这是假设其中一个 div 最初是隐藏的。传递给 toggle 的参数是过渡效果的持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:26:53.710

```
var continuous = function() {
    $("#Mass_alert").fadeToggle(600);
    $("#Devotion_alert").fadeToggle(600);   
}

setInterval(continuous,600); 
```

这将每 600 毫秒连续发生一次。

# android - 在 Android 中实现实时搜索结果

> ID：10255202
> 
> 赞同：1
> 
> 时间：2012-04-21T00:47:06.417
> 
> 标签：android, http, search, provider

如何以 Google Finance android 应用程序的方式实施实时搜索建议？

假设我可以从 xyz.com/quote/tickers=aapl,goog,.... 检索 xml 响应

到目前为止，我已经实现了获取用户完整查询字符串并加载片段的意图和操作。我正在寻找的是一种解决方案，用户可以在输入每个字符时从 xyz.com 获得结果。这意味着我们需要在输入字符时点击引用 url 并在下拉列表中显示 xml 响应。

### 期望的行为：

![伊姆古尔](../Images/755436dedf1daedb6762bbdec6a20357.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:35:43.677

[Android 文档](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)描述了如何`ContenProvider`为您的搜索建议创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:32:32.667

[使用名为Trie](http://en.wikipedia.org/wiki/Trie)的数据结构更好地实现实时搜索建议（或自动完成），使用 Trie，您将所有候选关键字加载到内存中，然后在内存中搜索 Trie，这比从中获取搜索结果要快得多另一个通过 HTTP 的服务，如果你必须通过 HTTP 进行搜索，我怀疑它是否是*实时的。*

如果要加载的关键字数据集很大，使用 Trie 肯定会有限制，您可能无法在 Android 应用程序中使用它。

好吧，还有一个名为[Patricia Trie](http://en.wikipedia.org/wiki/Radix_tree)的压缩 trie ，它比传统的 trie 消耗更少的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T02:30:17.440

如果 xyz.com 有数据库使用 LIKE 运算符（％）查询该数据库，它将给出匹配的结果。为了显示 xml 响应，我们可以使用 jersey API。[http://jersey.java.net/](http://jersey.java.net/)，每个字符使用 Key down 事件。

# email - 电子邮件链接可以在新窗口中打开吗？

> ID：10255207
> 
> 赞同：1
> 
> 时间：2012-04-21T00:47:40.150
> 
> 标签：email, hyperlink, new-window

我有这行代码：

```
<a href="mailto:test@hotmail.com?subject=test&body=test" target="_blank">test</a> 
```

但`target="_blank"`它不起作用。它总是在同一个窗口中打开邮件服务器，而不是在新窗口中。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:52:17.433

> 它总是在同一个窗口中打开邮件服务器，而不是在新窗口中。

您*无法*控制用户的客户端如何处理`mailto:`URL。它可能会选择完全忽略它们（就像我的客户所做的那样），它可能会启动一个新程序，例如`mutt`or`pine`或`kmail`or`thunderbird`或其他；或者它甚至可能使用特定于浏览器的插件加载网络邮件客户端。

在处理 URL 时，您无法控制客户端计算机上发生的情况`mailto:`——您最好不要浪费时间试图摆弄它，因为它只会在您的开发计算机上有意义。

# django - django tag '{% url %}' 是否支持 url 参数的上下文变量？

> ID：10255213
> 
> 赞同：0
> 
> 时间：2012-04-21T00:48:37.750
> 
> 标签：django, tags

不确定我是否可以做以下事情，我的 url conf 如下所示：

```
(r'^web/p/(?P<user_info>\w{1,10})/$','web_user_handler') 
```

我的视图呈现如下模板：

```
def web_user_handler(request,user_info="temp"):
    render_items=RequestContext(request,{
        'user':user_info,
    })
    return render_to_response('user_index.html', render_items) 
```

在我的模板中

```
<a href="{% url pro.web.views.web_user_handler user_info=user %}?action=decoder"> 
```

但是我会得到一个错误，它说user_info等于一个SimpleLazyObject，因此无法获取url地址。

我怎样才能摆脱这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:08:46.027

> > 但是我会得到一个错误，它说user_info等于一个SimpleLazyObject，因此无法获取url地址。

这回答了这个问题：URL 中不能有 python 对象！

user_info 是用户名吗？然后传入`user.username`。

# php - PHPSESSID 未保存到 cookie

> ID：10255214
> 
> 赞同：6
> 
> 时间：2012-04-21T00:48:40.727
> 
> 标签：php, session, cookies

保存会话 ID 的 PHPSESSID 变量未保存到客户端 cookie 中。这导致每次我调用该`session_start()`函数时都会生成一个新的会话 ID。

当我使用 FireFox、Opera 和 Chrome 时，这是真的。在 safari 中，由于某种原因，此变量已成功保存到 cookie 中，并且一切正常。

**编辑：**这是我的会话设置`phpinfo()`：

![通过 phpinfo 设置会话](../Images/a05a46c1a562db7ba478e59097a740dd.png)

我的网站有一个子域，我想在所有子域中使用相同的会话。

**第二次编辑：** 当我检查`var_dump($_COOKIE);`我的主域时，我得到了名称下的会话 ID，`PHPSESSID`但是当我在子域上这样做时，我得到一个空的`array()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:05:28.077

看起来 cookie 的域被设置为`localhost`. 这仅在您实际运行您的网站时才有效`localhost`。您需要`session.cookie_domain`匹配您的域名，可选地`.`在它前面加上一个（如`.example.com`）以包含子域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-15T15:02:46.493

它不适用于 Yoav 的案例，但可能用于遇到类似问题的其他人：

**不要忘记调用 session_start()**

听起来 session_start() 会创建 PHPSESSID 并将其保存在 cookie 中，如果它不是从客户端 cookie 发送的。

来自 php.net

> 当访问者访问您的站点时，PHP 将自动检查（如果 session.auto_start 设置为 1）或根据您的请求（通过 session_start() 显式）检查是否已随请求发送了特定会话 ID。如果是这种情况，则重新创建先前保存的环境。

关于 session_start() 的一些很好的例子[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-10T15:38:44.697

同样的事情发生在我身上，我无法在 Safari 和 Mac Os 浏览器中登录我的用户，甚至无法登录 Firefox，只能在 Chrome（PC，而不是 Mac）上登录。原因原来是 php.ini 中的一个组合

1.  `session.cookie_lifetime=0`
2.  `session.cookie_domain=mydomain`

正如Shea所说，我将0更改为3600（合理），而“mydomain”（全是我的错）是错误的，因为它缺少正确的域名“.com”！

所以我最终将配置更改为

1.  `session.cookie_lifetime=3600`
2.  `session.cookie_domain=mydomain.com`

# c++ - 尝试在 Linux 上使用 Borland 头文件时未定义的引用

> ID：10255216
> 
> 赞同：0
> 
> 时间：2012-04-21T00:48:58.467
> 
> 标签：c++, compiler-construction, compiler-errors

编译器错误输出：

```
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/home/josh/Projects/Maze/Charon'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/charon
gmake[2]: Entering directory `/home/josh/Projects/Maze/Charon'
mkdir -p build/Debug/GNU-Linux-x86/sys
rm -f build/Debug/GNU-Linux-x86/sys/charon.o.d
g++    -c -g -MMD -MP -MF build/Debug/GNU-Linux-x86/sys/charon.o.d -o build/Debug/GNU-Linux-x86/sys/charon.o sys/charon.cpp
mkdir -p dist/Debug/GNU-Linux-x86
g++     -o dist/Debug/GNU-Linux-x86/charon build/Debug/GNU-Linux-x86/sys/charon.o build/Debug/GNU-Linux-x86/main.o build/Debug/GNU-Linux-x86/sys/chin.o build/Debug/GNU-Linux-x86/sys/chout.o  
build/Debug/GNU-Linux-x86/sys/chin.o: In function `chio::chin_::check()': 
```

这就是我正在努力解决的问题。我煞费苦心地设置了用于这些功能的库，所以我不知道我会做什么

```
/home/josh/Projects/Maze/Charon/sys/chin.cpp:28: undefined reference to `kbhit'
/home/josh/Projects/Maze/Charon/sys/chin.cpp:33: undefined reference to `stdscr'
/home/josh/Projects/Maze/Charon/sys/chin.cpp:33: undefined reference to `wgetch'
/home/josh/Projects/Maze/Charon/sys/chin.cpp:35: undefined reference to `kbhit'
collect2: ld returned 1 exit status
gmake[2]: *** [dist/Debug/GNU-Linux-x86/charon] Error 1
gmake[2]: Leaving directory `/home/josh/Projects/Maze/Charon'
gmake[1]: *** [.build-conf] Error 2
gmake[1]: Leaving directory `/home/josh/Projects/Maze/Charon'
gmake: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 1s) 
```

这是cpp文件chin.cpp

```
/* 
 * File:   chin.cpp
 * Author: josh
 * 
 * Created on 08 April 2012, 10:00
 */
#include <iostream>
#include <borland/conio.h>
#include <ncurses.h>
#include <deque>
#include "../headers/charon.h"

using namespace std;
using namespace charon;
using namespace chio;
namespace chio
{
  chin_::chin_(){}
  chin_::chin_(charon_ &handle) {
    engine = &handle;
    //key_presses = new deque();
  }
  chin_::~chin_() {
  }

  bool chin_::check()
  {
    if(kbhit())
    {
      while(true)
      {
        char ch;
        ch = getch();
        key_presses.push_back(ch);
        if(!kbhit())
          return true;
      }
    }
    return false;
  }

  void chin_::update()
  {
    while(stream_in)
    {
      check();
    }
  }
} 
```

所以在那个文件的顶部你可以看到我包含了 borland/conio.h 当我搜索一个特定的函数时，我发现它在 conio.h 中，这与 borland 有关，如果我没记错的话是一个编译器。我必须在 Windows 上安装 dev-c++ 流血，获取包含目录，然后将其重命名为 borland 并将其弹出到我的 linux 机器的包含目录中。

我有一个编译错误，最初是关于头文件中的依赖项，无论是 conio 本身还是它使用的一个，我所做的只是更改它，使其指向正确的位置。

现在我不知道到底发生了什么，因为我希望编译器能够简单地找到所有这些。它找到了头文件，所以我唯一能想到的可能是头文件无法找到 hpp 文件，但是为什么不这么说，而不是在所述假设的 hpp 文件中指定函数。因此，由于我在这里处于假设情况，我显然需要一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T01:02:35.570

你有两个问题。

1.  你不能只拿 Borland 头文件，然后把它们放进去，然后期望它们能正常工作。标头通常依赖于库。这些是特定于平台的（有时是特定于编译器的），在不同的操作系统上使用时将不起作用。更不用说，头文件通常包含一堆其他头文件，其中包括其他头文件等。其中一些或全部可能是编译器或平台特定的。

2.  CONIO.H 是一个非标准的仅限 Windows 的标头，并且不再使用。可能还有另一种正确的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:56:04.930

您有一个链接器错误，因为它没有链接到包含这些函数的实现的库。您使用 -l 指定要链接的库，LIBRARY_PATH 指定查找库的路径

# c# - 如何使用 LinQ to Entities 查询选择两个对象之一，具体取决于一个对象是否为空。

> ID：10255225
> 
> 赞同：0
> 
> 时间：2012-04-21T00:50:18.940
> 
> 标签：c#, sql-server, linq, entity-framework

```
List<IStoreItem> StoreItems = new List<IStoreItem>();             

StoreItems = repository.ProductToCatMaps.Where(x => CatList.Contains(x.ExCatID))
             .Select(x => x.ProductShell ?? x.PCBuild); 
```

实体类：

```
 public class ProductShell : IStoreItem
    {
    }

    public class PCBuild : IStoreItem
    {
    } 
```

ProductToCatMaps 表包含每个相应商店项目的外部类别 ID，我有两种商店项目类型：ProductShell 和 PCBuild。我希望根据哪个设置为空来选择其中一个，只有一个可以包含我需要选择的值（数据库中相应类型条目的外键）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T00:56:28.937

将您的*意图转换*为 SQL 几乎是不可能的（或者可能只是不太可能*），因为获取 ProductShell 完全填充的 SQL 将与获取 PCBuild 的 sql 完全不同。我会切换方向并在内存中进行最后一点查询。就像是

```
StoreItems = repository.ProductToCatMaps
                       .Where(yourCondition)
                       .Select(x => new { x.ProductShell, x.PCBuild })
                       .AsEnumerable() // *** pulls above into memory
                       .Select(x => (IStoreItem)x.ProductShell ?? (IStoreItem)x.PCBuild); 
```

* * *

*当然，我还没有在家里尝试过你的方法，所以如果它确实有效（经过一些修改，我假设通过询问，到目前为止你所拥有的东西不起作用），那么对 EF 团队表示敬意。

# c++ - 为什么这个非常简单的 return std::move(thread handle) 失败了？

> ID：10255226
> 
> 赞同：2
> 
> 时间：2012-04-21T00:50:29.233
> 
> 标签：c++, multithreading, c++11, move

```
#include <iostream>
#include <thread>
using namespace std;

thread&& launch(){
    thread launchee([](){
        this_thread::sleep_for(chrono::milliseconds(280));
        cout<<"HA!"<<endl;
    });
    return move(launchee);
}

int main(int argc, char **argv){
    thread mine(launch());
    mine.join();
} 
```

编译`g++-4.6 -std=c++0x 1.cpp -o e1 -pthread`

输出“在没有活动异常的情况下终止调用”，然后程序中止。

这应该有效，不是吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T00:56:18.430

您想按值返回线程，而不是*rvalue-reference*：

```
std::thread launch() {
    std::thread launchee([](){
        std::this_thread::sleep_for(std::chrono::milliseconds(280));
        std::cout<<"HA!"<<std::endl;
    });
    return launchee;
} 
```

原因是`std::move`(and `std::forward`) 只是*从左值*到*右值引用*的强制转换操作，但除非您使用它实际*移动*到其他对象，否则原始对象保持不变。然后在原始代码中，您将引用本地对象并退出函数，`std::thread`然后函数内部被销毁并调用`terminate`（根据合约`std::thread`，对于任何其他对象，它只会返回对已销毁对象的悬空引用）。

# json - 在杰克逊休息后恢复 JSON 流

> ID：10255227
> 
> 赞同：0
> 
> 时间：2012-04-21T00:50:49.953
> 
> 标签：json, jackson

有没有办法在重启后恢复 JSON 流到文件中？

即，如果我使用 JsonGenerator 流式传输数组元素（记录）并且应用程序在流式传输过程中失败，是否有办法在应用程序重新启动时重建上下文（JsonWriteContext）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:51:01.497

是的，从 Jackson 1.9.4 开始，无法重建上下文。从 Tatu Saloranta 得到确认，请参阅邮件列表讨论：

[http://markmail.org/message/mhx64nibm5ihi76i?q=list:org%2Ecodehaus%2Ejackson+JsonWriteContext#query:list%3Aorg.codehaus.jackson%20JsonWriteContext+page:1+mid:mhx64nibm5ihi76i+state:results](http://markmail.org/message/mhx64nibm5ihi76i?q=list:org%2Ecodehaus%2Ejackson+JsonWriteContext#query:list%3Aorg.codehaus.jackson%20JsonWriteContext+page:1+mid:mhx64nibm5ihi76i+state:results)

# php - php发送带图片的电子邮件

> ID：10255229
> 
> 赞同：0
> 
> 时间：2012-04-21T00:50:59.793
> 
> 标签：php, image, zend-framework, email, sendmail

我正在尝试发送带有图片的电子邮件；我的电子邮件正文是：

```
<?php 

$message = <<< email

<img src="http://planet-earth.bogus.us/icons/secret.pictures.gif">

Dear {$email},

email;

?> 
```

当我收到邮件时，我看不到图片。相反，我看到`<img src="http://planet-earth.bogus.us/icons/secret.pictures.gif">`. 我知道这是因为 <<< 电子邮件；我如何能够使用 <<< 电子邮件显示图片而不是代码？

更新

我正在使用 zend 框架。我的代码如下所示：

```
<?php
     $mail = new Zend_Mail();
     $mail->setFrom('admin@mysite.com', 'My site');
     $mail->addTo($recoveryaccount->username);
     $mail->setSubject("Mysite");
     include "_email_recover_password.phtml";
     $mail->setBodyText($message);
     $mail->send();
?>

_include "_email_recover_password.pthml" 
<?php 

 $message = <<< email
 <img src="http://picturelocation.picture.gif">
 Dear {$account->getUsername()},

 Somebody has requested that the password associated with this account be
 reset. If you initiated this request, click the below link to complete the process:

 http://www.example.com/{$account->getRecovery()}

 Thank you!
 Mysite

 Questions? Contact us at admin@mysite.com

 email;

 ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T01:05:42.277

要回答您的问题，您需要发送将内容类型设置为`text\html`. 没有它，您的消息将被接收客户端视为纯文本。以下代码正确设置内容标题并发送基本 HTML 消息。

```
// message
$message = '
<html>
<body>
  <img src="http://planet-earth.bogus.us/icons/secret.pictures.gif">
</body>
</html>
';

// Add the content headers
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$headers .= 'To: David <david-z@domain.com>' . "\r\n";
$headers .= 'From: Bot <bot@domain.com>' . "\r\n";

mail("david-z@domain.com", "mysubject", $message, $headers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:54:27.617

不，这不是因为heredoc。您需要发送格式正确的 HTML 邮件，而您不是。有各种标题和 MIME '骨架' 结构的东西，你根本没有发送。

不要试图自己建立一个。使用[Swiftmailer](http://swiftmailer.org)或[PHPMailer](http://phpmailer.worxware.com)为你做这件事。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-29T02:53:39.570

我用什么，

```
$from="From: TEST\r\nMIME-Version: 1.0\r\nContent-type: text/html; charset=iso-8859-1"; 
mail("TOWHO@TEST.com", $title, $content, $from); 
```

# python - linux下python如何优雅地读行

> ID：10255233
> 
> 赞同：1
> 
> 时间：2012-04-21T00:51:51.377
> 
> 标签：python, command-line, stdin

我正在编写一个简短的python脚本来从stdin读取行，但是当我运行它并按下home、end、left、right之类的键时，它不起作用，而是在行上打印键。

我还希望具有“向上/向下”功能来查看编辑历史记录，就像 python 交互式控制台一样。

是否有捷径可寻？我尝试了 getch 和 curses，但似乎并不容易做到这一点。尝试缠结我的命令行窗口的诅咒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:53:48.193

使用[GNU readline 接口](http://docs.python.org/library/readline.html)。

# iphone - 两个不同的头文件一个实现文件

> ID：10255235
> 
> 赞同：0
> 
> 时间：2012-04-21T00:52:27.930
> 
> 标签：iphone, xcode, header

头文件：SettingsVC.h ViewController.h

实现文件：SettingsVC.m ViewController.m

在 ViewController.m 中，我使用顶部的这行代码导入了 SettingsVC.h

导入“SettingsVC.h”，这样我就可以从不同的视图从步进器获取值。

在 SettingsVC.h 我有一行代码说 IBOutlet UIStepper *mainStepper;

分配给步进器。

当我尝试通过执行此 mainStepper.value 从 ViewController.m 访问步进器的值时，它不起作用，但它在 Settings.m 中起作用 感谢您的帮助。

维京人的新东西

设置VC.h 文件

```
#import <UIKit/UIKit.h>

@interface SettingsVC : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> {

IBOutlet UILabel *mainTimeShow;
IBOutlet UILabel *armTimeShow;
IBOutlet UILabel *defuseTimeShow;
IBOutlet UIStepper *armStepper;
IBOutlet UIStepper *defuseStepper;
IBOutlet UIStepper *mainStepper;

}

-(IBAction)goToClock;
@property (nonatomic, retain) UIStepper *mainStepper;
-(IBAction)mainTimeStepper;
-(IBAction)armTimeStepper;
-(IBAction)defuseTimeStepper;

@end 
```

设置VC.m 文件

```
#import "SettingsVC.h"

@interface SettingsVC ()

@end

@implementation SettingsVC

@synthesize mainStepper;

@end 
```

ViewController.m 文件

```
#import "ViewController.h"
#import "SettingsVC.h"

@interface ViewController ()

@end

@implementation ViewController

-(void)here {
SettingsVC.mainStepper.value; //Property mainStepper not found on object of type 'SettingsVC'
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:15:38.883

我编辑了我的答案，这应该让一切都清楚。您只在一个类中创建 UIStepper，在本例中为 SettingsVC。然后你可以通过其他类中的属性来检索变量，只需要导入SettingsVC。

您需要在 SettingsVC.h 中创建该属性

```
#import <UIKit/UIKit.h>

@interface SettingsVC : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> {

// Your other instance variables

}

@property (nonatomic, strong) UIStepper *mainStepper;

@end 
```

需要在SettingsVC.m中综合属性

```
#import "ViewController.h"
#import "SettingsVC.h"

@implementation SettingsVC

@synthesize mainStepper;

@end 
```

假设您有一个名为 ViewController 的类。您可以像这样访问 UIStepper 的值：

```
#import "ViewController.h"
#import "SettingsVC.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    SettingsVC *settingsVC = [[SettingsVC alloc] init];
    settingsVC.mainStepper.value = 23.0;

    NSLog(@"%f", settingsVC.mainStepper.value);
}

@end 
```

您将在其他类中使用它，因此您需要保留此属性。您通常仅将 assign 与原始值（例如 BOOL）一起使用。

```
@property (nonatomic, strong) UIStepper *mainStepper; 
```

编辑：ARC 会自动为你发布 settingsVC，所以永远不要明确发布。

# c# - 想了解如何将这种类型的 php 代码翻译成 Razor C#

> ID：10255245
> 
> 赞同：0
> 
> 时间：2012-04-21T00:54:50.733
> 
> 标签：c#, php, razor, radio-button, webmatrix

我想设置基于查询结果检查的单选按钮，例如在我的情况下它是一份医疗问卷。一份医疗问卷的结果会持续很长时间。

因此，如果用户没有有效的医疗问卷，用户将被引导到一个空的问卷页面以选择是或否单选按钮。问卷的部分编码如下所示：

```
<tr>
<td width="33">1.</td>
<td width="491">Heart or circulatory problems including: high blood pressure, heart attack, angina, heart murmur, heart failure, palpitations, circulatory problemseg. whitefinger, blocked arteries, stroke aneurysm.</td>
<td width="68"><input name="medq1" id="yes" type="radio" value="yes" onclick="displayTextBox()" /><label for="yes"> Yes </label></td>
<td width="78"><input name="medq1" id="no" type="radio" value="no" onclick="displayTextBox()"/><label for="no"> No </label></td> 
```

有 20 多个问题，但我不会全部发布，因为它会令人困惑。

但是，如果用户在数据库中存储了一份有效的医疗问卷，当他申请许可时，他将被重定向到相同的问卷页面，但它不是空的，而是应该选中是和否的单选按钮，基于SQL 查询的结果。

```
var sql = "SELECT * FROM Medical WHERE CDSID = @0";
var MedicalResult = db.QuerySingle(sql,myCDSID);
var myQ1 = MedicalResult.Q1;
:
:
:
var myQ20 = MedicalResult.Q20; 
```

所以现在结果存储在变量中，我们可以使用变量作为结果来告诉单选按钮必须检查哪个。

但是，我是 Razor C# 的菜鸟初学者，我知道的非常少，但仍在学习过程中。我知道 PHP 中的代码，但不知道 Razor C#

在 php 中，假设我们已经有了 sql 的结果。

```
<input <?php if ($myQ1 == 'yes'){ echo 'checked="checked"'; } else { } ?> name="medq1" id="yes" type="radio" value="yes" onclick="displayTextBox()" /><label for="yes"> Yes </label>
<input <?php if ($myQ1 == 'no'){ echo 'checked="checked"'; } else { } ?> name="medq1" id="no" type="radio" value="no" onclick="displayTextBox()"/><label for="no"> No </label> 
```

但是我如何在 Razor C# 中做到这一点？

提前感谢您的指导。还在学习过程中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:08:22.707

您可以使用 ViewBag 和 @Html.Raw() 辅助方法进行类似的操作。

```
// Controller
public ActionResult YourPage()
{
    ViewBag.MedQ1 = // bool value from SQL
    View();
} 
```

在 YourPage.cshtml 中

```
<input @Html.Raw(ViewBag.MedQ1? "checked": "") name="medq1" id="yes" type="radio" value="yes" onclick="displayTextBox()" /><label for="yes"> Yes </label>
<input @Html.Raw(ViewBag.MedQ1? "": "checked") name="medq1" id="no" type="radio" value="no" onclick="displayTextBox()"/><label for="no"> No </label> 
```

# php - 这个“非常简单”的 simplexml 脚本不起作用

> ID：10255253
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:56:09.513
> 
> 标签：php, xml, simplexml

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
<pages>
<page>
    <title>Home</title>
    <content>Lorem Ipsum</content>
</page>
<page>
    <title>Pictures</title>
    <content>Lorem Ipsum</content>
</page>
<page>
    <title>Information</title>
    <content>Lorem Ipsum</content>
</page>
</pages> 
```

我的 XML

```
$url = "xml->build.xml";
$xml = simplexml_load_file($url);

$i = 1;

foreach($xml->page as $page) {
    echo "<strong>Page ".$i.":</strong> ".$page->title."<br/>";
    $i++;
} 
```

我的 PHP

我越来越：

警告：simplexml_load_file()：I/O 警告：未能加载外部实体“xml->build.xml”

就从那个简单的脚本！有任何想法吗？:)

更新，这是确切的 XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
<pages>
<page>
    <title>Home</title>
    <content>Lorem Ipsum</content>
</page>
<page>
    <title>Pictures</title>
    <content>Lorem Ipsum</content>
</page>
<page>
    <title>Information</title>
    <content>Lorem Ipsum</content>
</page>
</pages>
<css>
<css-tag>
    <title>background-color</title>
    <value>#FFF</value>
</css-tag>
</css>
<layout>1</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:02:48.873

发生这种情况是因为您正在尝试读取不存在的文件。如果您的文件已命名`build.xml`并存储在与 PHP 脚本相同的目录中，请替换：

```
$url = "xml->build.xml"; 
```

和：

```
$url = dirname(__FILE__) . "/build.xml"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:03:32.740

不知道为什么你会收到这样的错误，但这可能会帮助你解决它

我认为这不是`xml->build.xml`一个有效的名称，您也可以将其更改为类似的名称`build.xml`

尝试

```
$url = "build.xml";
if(!is_file($url))
    die("File Does not exist");

if(!is_readable($url))
    die("File is not readeable");

$xml = simplexml_load_string(file_get_contents($url));
var_dump($xml);

$xml = simplexml_load_file($url);
var_dump($xml); 
```

如果`simplexml_load_string`工作肯定`simplexml_load_file`也会工作

更新

你的XML是错误的格式应该是这样的

```
$url = '<?xml version="1.0" encoding="ISO-8859-1" ?> 
<doc>
<pages>
<page>
    <title>Home</title>
    <content>Lorem Ipsum</content>
</page>
<page>
    <title>Pictures</title>
    <content>Lorem Ipsum</content>
</page>
<page>
    <title>Information</title>
    <content>Lorem Ipsum</content>
</page>
</pages>
<css>
<css-tag>
    <title>background-color</title>
    <value>#FFF</value>
</css-tag>
</css><layout>1</layout>
</doc>'; 
```

# actionscript-3 - AS3：函数和变量

> ID：10255258
> 
> 赞同：-1
> 
> 时间：2012-04-21T00:56:39.937
> 
> 标签：actionscript-3, flash

我基本上想做的是更改输出实例的名称。

但我遇到的问题是如何将通过函数'find_name'传递的变量发送到'Event.Complete'函数loadNameInfo？

下面的代码：

```
 // Finds a persons name using the ID
    private function find_name(page_Name='search.php',instance_name='name',get1='g1=1',get2='g2=2',get3='g3=3'):void
    {
        var randomParam:String = "?p=" + Math.floor(Math.random() * (10000000));
        var create_URL = (URL + page_Name + randomParam + '&'+ get1 + '&' + get2 + '&' + get3);
        _loader = new URLLoader();
        _request = new URLRequest(create_URL);
        _request.method = URLRequestMethod.POST;
        _loader.addEventListener(Event.COMPLETE, loadNameInfo);
        _loader.load(_request);
    }
    // Loads the name into the correct place
    public function loadNameInfo(e:Event)
    {
        instance_name.text = e.target.data;
    } 
```

这种事情可能吗？

伊莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:49:13.483

这个有可能。有很多关于这个的话题。尝试在此处搜索“as3 将变量传递给事件处理程序”。

一个例子是[这篇文章](https://stackoverflow.com/questions/1464925/passing-parameters-to-event-listeners-handlers)

基本上，您可以扩展事件处理程序以将其更改为接受您传递给它的另一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:52:17.767

您可以编写自定义事件：

[http://www.learningactionscript3.com/2008/11/11/passing-arguments-with-events/](http://www.learningactionscript3.com/2008/11/11/passing-arguments-with-events/)

```
package {   
   import flash.events.Event; 
   public class CustomEvent extends Event {     
      public static const CUSTOM:String = "custom";     
      public var arg:*;     
      public function CustomEvent(type:String, customArg:*=null,
                              bubbles:Boolean=false,
                              cancelable:Boolean=false) {

         super(type, bubbles, cancelable);

         this.arg = customArg;

      }

      public override function clone():Event {
         return new CustomEvent(type, arg, bubbles, cancelable);
      }

      public override function toString():String {
         return formatToString("CustomEvent", "type", "arg",
                           "bubbles", "cancelable", "eventPhase");
      }

   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:53:46.413

我刚刚遇到的另一种方法是使用内联函数。我在[这个链接](http://www.designscripting.com/2008/11/passing-arguments-to-event-handler-as3/)上找到了它。

基本上思路如下：

```
button.addEventListener(MouseEvent.CLICK, function(e:MouseEvent){handleClickEvent(e,"Home")});
function handleClickEvent(e:MouseEvent,str:String) {
    trace("Argument :"+str,"- Event target :"+e.target.name);
} 
```

这种风格的有趣之处在于，您可以通过使用内联函数作为事件处理程序来传递事件以及您想要的任何其他内容，然后调用您想要的真实处理程序。漂亮整齐。我从未尝试过，但它看起来应该对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T01:56:25.387

您不能将自定义值附加到 URLLoader 对象，但有几种解决方法。

如果您只有一个加载器，您可以简单地将所需的值存储在类字段中。如果您有许多同时加载内容的加载器，您可以创建 Dictionary 对象以将 URLLoader 实例与您的值相关联。像这样的东西：

```
private var _loaderValues:Dictionary = new Dictionary();

private function find_name(page_Name='search.php',instance_name='name',get1='g1=1',get2='g2=2',get3='g3=3'):void
{
    var randomParam:String = "?p=" + Math.floor(Math.random() * (10000000));
    var create_URL = (URL + page_Name + randomParam + '&'+ get1 + '&' + get2 + '&' + get3);
    var loader:URLLoader = new URLLoader();
    var request:URLRequest = new URLRequest(create_URL);
    request.method = URLRequestMethod.POST;
    loader.addEventListener(Event.COMPLETE, loadNameInfo);
    loader.load(_request);
    _loaderValues[_loader] = {"pageName": page_Name, "instanceName": instance_name};
}

public function loadNameInfo(e:Event)
{
    var loader:URLLoader = e.target as URLLoader;
    instance_name.text = loader.data;
    var values:Object = _loaderValues[loader];
    trace(values["pageName"], values["instanceName"]);
    loader.removeEventListener(Event.COMPLETE, loadNameInfo);
    _loaderValues[loader] = null;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T09:00:17.003

移除`loadNameInfo`并使用匿名函数作为事件监听器：

```
var that:* = this;   
_loader.addEventListener(Event.COMPLETE, function(e:Event):void{
     //you can access instance,which has 'instance_name' name, in 2 ways
     // 1\. that[instance_name]
     // 2\. that.getChildByName(instance_name)

     that[instance_name].text = e.target.data;
     //Removing anonymous listener from '_loader'
     e.target.removeEventListener(e.type, arguments.callee) ;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T16:08:13.830

是的，这很有可能而且非常简单。这是您的代码，其中包含 3 行以上的代码：

```
// Finds a persons name using the ID
private function find_name(page_Name = "search.php", instance_name = "name", get1 = "g1=1", get2 = "g2=2", get3 = "g3=3"):void {
  var randomParam:String = "?p=" + Math.floor(Math.random() * (10000000));
  var create_URL = (URL + page_Name + randomParam + "&" + get1 + "&" + get2 + "&" + get3);
  _loader = new URLLoader();
  _request = new URLRequest(create_URL);
  _request.method = URLRequestMethod.POST;
  var functionLoadNameInfo:Function = loadNameInfo(page_Name, instance_name, get1, get2, get3);
  _loader.addEventListener(Event.COMPLETE, functionLoadNameInfo);
  // To remove you do: _loader.removeEventListener(Event.COMPLETE, functionLoadNameInfo);
  _loader.load(_request);
}

// Loads the name into the correct place
public function loadNameInfo(pageName:String, instance_name:String, get1:String, get2:String, get3:String):Function {
  return function(e:Event):void {
    instance.text = e.target.data;
    instance.name = instance_name;
  }
} 
```

此解决方案基于[此答案](https://stackoverflow.com/a/13488640/1837285)。

# android - 交点计算不起作用

> ID：10255259
> 
> 赞同：1
> 
> 时间：2012-04-21T00:56:54.007
> 
> 标签：android, 2d, line-intersection

我正在为一个学校项目做一个游戏，它将使用计算来判断两条线是否相交。

我不太擅长计算交叉点背后的数学，但我发现了几个关于它如何工作的例子，例如在这个网站上。但我不让他们工作。

我已经制作了我如何尝试检测交叉点并将其与我找到的计算示例进行比较的图像，以及它为什么不起作用的图像。我在某个地方做错了，但我不知道在哪里。

如果有人可以帮助我，我将非常感激。

问候米克 ![在此处输入图像描述](../Images/813cdf113d3b2fc22780905da9912553.png)

# javascript - Google Maps REST API - AJAX 请求的请求限制

> ID：10255262
> 
> 赞同：3
> 
> 时间：2012-04-21T00:57:19.220
> 
> 标签：javascript, google-maps

我试图确定在从客户端机器通过 AJAX 请求信息的 JavaScript 运行的情况下，每日 Google Maps REST API 请求限制如何应用。

例如，如果我在 php 脚本中向其中一个 REST API 发出地理编码请求

`$response = simplexml_load_file($rest_request_url);`

我希望 Google 知道服务器 IP 并从当天允许的总数中减去 1。但是，如果我通过 AJAX GET 请求从 JavaScript 执行相同的操作，如果它是从客户端计算机运行并记录服务器 IP 而不是客户端 IP，Google 怎么知道它是托管该 JavaScript 的服务器？

这可能更普遍地属于 JavaScript 通常如何执行的括号，但是上面很好地说明了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:01:14.293

Google 在其地理编码文档中阐明了这种情况：[https](https://developers.google.com/maps/articles/geocodestrat#client) ://developers.google.com/maps/articles/geocodestrat#client 。这不是地图，但那里的信息是类似的。注意：

> 由于地理编码限制是针对每个用户会话的，因此该限制会影响您的应用程序的**使用者**。

强调我的。Google 并不关心服务器是否托管了恰好嵌入了地图的 HTML 文件。就 Google 而言，根本没有任何请求来自您的服务器。这些请求仅来自访问您网站的客户。

实际上，请求限制的存在是为了防止人们为了挖掘和/或缓存数据而对 Maps API 进行地毯式轰炸，并迫使真正的重度用户为订阅付费。

# c# - .net 正则表达式.Split

> ID：10255265
> 
> 赞同：4
> 
> 时间：2012-04-21T00:58:16.017
> 
> 标签：c#, .net, regex

我正在尝试将以下字符串拆分`"Name=='mynme' && CurrentTime<'2012-04-20 19:45:45'"`为：

```
Name
==
'myname'
&&
CurrentTime
<
'2012-04-20 19:45:45' 
```

我有以下正则表达式：

```
([+\\-*/%()]{1}|[=<>!]{1,2}|[&|]{2}) 
```

问题是使用上述正则表达式时，我得到以下结果：

```
Name
== 
'myname'
&&
CurrentTime 
<
'2012
-
04
-
20
19:45:45' 
```

我实际上需要正则表达式来了解引用。

谢谢

***更新 1 关于 lordcheeto 的回答：***

你的反应很接近。但以下内容仍未正确拆分：

```
 string input2 = "((1==2) && 2-1==1) || 3+1==4 && Name=='Stefan+123'"; 
```

我需要做的是将字符串拆分为运算符和操作数。像这样的东西：

```
 LeftOperand Operator RightOperand 
```

现在，如果有任何运算符介于`''`它之间，则应将其忽略，并且应将其之间的整个字符串`''`视为操作数。

上面的字符串应生成以下输出：

```
(

(
1
==
2
)

&&
2
-
1
==
1
)

||
3
+
1
==
4
&&
Name
==
'Stefan+123' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:35:21.490

好的，假设您希望它简单地拆分为逻辑和关系运算符，您可以使用以下模式：

```
string lordcheeto = @"\s*(==|&&|<=|>=|<|>)\s*"; 
```

这还将从返回的字符串中删除所有空格。

**代码：**

```
using System;
using System.Text.RegularExpressions;

namespace RegEx
{
    class Program
    {
        static void Main(string[] args)
        {
            string original = "([+\\-*/%()]{1}|[=<>!]{1,2}|[&|]{2})";
            string lordcheeto = @"\s*(==|&&|<=|>=|<|>)\s*";

            string input = "Name=='mynme' && CurrentTime<45 - 4";
            string input1 = "Name=='mynme' && CurrentTime<'2012-04-20 19:45:45'";
            string ridiculous = "Name == BLAH && !@#>=$%^&*()< ASDF &&    this          >          that";

            executePattern("original", input, original);
            executePattern("lordcheeto's", input, lordcheeto);
            executePattern("original", input1, original);
            executePattern("lordcheeto's", input1, lordcheeto);
            executePattern("original", ridiculous, original);
            executePattern("lordcheeto's", ridiculous, lordcheeto);
        }

        static void executePattern(string version, string input, string pattern)
        {
            // Avoiding repitition for this example.
            Console.WriteLine("Using {0} pattern:", version);

            // Needs to be trimmed.
            var result = Regex.Split(input.Trim(), pattern);

            // Pipes included to highlight whitespace trimming.
            foreach (var m in result)
                Console.WriteLine("|{0}|", m);

            // Extra space.
            Console.WriteLine();
            Console.WriteLine();
        }
    }
} 
```

**测试：**

[http://goo.gl/XAm6J](http://goo.gl/XAm6J)

**输出：**

```
Using original pattern:
|Name|
|==|
|'mynme' |
|&&|
| CurrentTime|
|<|
|45 |
|-|
| 4|

Using lordcheeto's pattern:
|Name|
|==|
|'mynme'|
|&&|
|CurrentTime|
|<|
|45 - 4|

Using original pattern:
|Name|
|==|
|'mynme' |
|&&|
| CurrentTime|
|<|
|'2012|
|-|
|04|
|-|
|20 19:45:45'|

Using lordcheeto's pattern:
|Name|
|==|
|'mynme'|
|&&|
|CurrentTime|
|<|
|'2012-04-20 19:45:45'|

Using original pattern:
|Name |
|==|
| BLAH |
|&&|
| |
|!|
|@#|
|>=|
|$|
|%|
|^&|
|*|
||
|(|
||
|)|
||
|<|
| ASDF |
|&&|
|    this          |
|>|
|          that|

Using lordcheeto's pattern:
|Name|
|==|
|BLAH|
|&&|
|!@#|
|>=|
|$%^&*()|
|<|
|ASDF|
|&&|
|this|
|>|
|that| 
```

* * *

## 编辑

好的，有了额外的约束，你应该可以使用这个：

```
string lordcheeto = @"\s*('.*?'|&&|==|<=|>=|<|>|\(|\)|\+|-|\|\|)\s*"; 
```

这仍然会从返回的字符串中删除所有空格。但是，如果匹配项彼此相邻（例如`Name=='Stefan+123'`），它将返回空字符串。这次我无法解决这个问题，但这并不重要。

如果您导入`System.Linq`and`System.Collections.Generic`并使结果为 a `List<string>`，您可以像这样从额外的一行中删除所有空字符串`List`（这比使用直接 for 循环要慢）：

```
var results = Regex.Split(input.Trim(), pattern).ToList();
results.RemoveAll(x => x == ""); 
```

**代码：**

```
using System;
using System.Text.RegularExpressions;

namespace RegEx
{
    class Program
    {
        static void Main(string[] args)
        {
            string lordcheeto = @"\s*('.*?'|&&|==|<=|>=|<|>|\(|\)|\+|-|\|\|)\s*";

            string input = "Name=='mynme' && CurrentTime<45 - 4";
            string input1 = "Name=='mynme' && CurrentTime<'2012-04-20 19:45:45'";
            string input2 = "((1==2) && 2-1==1) || 3+1==4 && Name=='Stefan+123'";

            executePattern("lordcheeto's", input, lordcheeto);
            executePattern("lordcheeto's", input1, lordcheeto);
            executePattern("lordcheeto's", input2, lordcheeto);

            Console.ReadLine();
        }

        static void executePattern(string version, string input, string pattern)
        {
            // Avoiding repitition for this example.
            Console.WriteLine("Using {0} pattern:", version);

            // Needs to be trimmed.
            var result = Regex.Split(input.Trim(), pattern);

            // Pipe included to highlight empty strings.
            foreach (var m in result)
                Console.WriteLine("|{0}", m);

            // Extra space.
            Console.WriteLine();
            Console.WriteLine();
        }
    }
} 
```

**测试：**

[http://goo.gl/lkaoM](http://goo.gl/lkaoM)

**输出：**

```
Using lordcheeto's pattern:
|Name
|==
|
|'mynme'
|
|&&
|CurrentTime
|<
|45
|-
|4

Using lordcheeto's pattern:
|Name
|==
|
|'mynme'
|
|&&
|CurrentTime
|<
|
|'2012-04-20 19:45:45'
|

Using lordcheeto's pattern:
|
|(
|
|(
|1
|==
|2
|)
|
|&&
|2
|-
|1
|==
|1
|)
|
|||
|3
|+
|1
|==
|4
|&&
|Name
|==
|
|'Stefan+123'
| 
```

**补充评论：**

如果您还想拆分任何其他运算符（例如 , `<<`, `+=`, `=`, `-=`）`>>`（有[很多](http://goo.gl/39KYB)），或者需要其他任何东西，请询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T06:17:33.123

感谢“lordcheeto”的回答，我能够用您的解决方案解决类似的问题。我正在分享我的问题和解决方案，以防万一帮助有类似问题的人。

我必须像这样拆分字符串

```
"abc < 1 && 124 > 2 || 1243 <= 555"; 
```

先入

```
abc < 1
&&
124 > 2
||
1243 <= 555 
```

我已经通过使用实现了这一点

```
string[] condtions = Regex.Split(str, @"\s*('.*?'|&&|\|\|)\s*"); 
```

然后我必须拆分每个条件

```
abc < 1 
```

进入

```
abc
<
1 
```

我通过使用实现了这一点

```
string[] statements = Regex.Split(condtions[0], @"\s*('.*?'|==|<=|>=|<|>|!=)\s*"); 
```

# mysql - 如果不在另一个表中，则仅从一个表中选择用户

> ID：10255266
> 
> 赞同：1
> 
> 时间：2012-04-21T00:58:20.953
> 
> 标签：mysql

我们有两张表：

-- 用户 --

```
id  name    borrower
--  ------  --------
1   Peter   1
2   John    1
3   Mark    1
4   David   0 
```

-- 借贷 --

```
id 从 到 金额
-- ---- -- ------
1 1 2 100

```

我需要输出用户 Peter 没有借出任何钱，并且是 borrowers=1（不包括结果中的 Peter），如下所示：

```
id  name    borrower
--  ------  --------
3   Mark    1 
```

现在我被这个查询困住了（不起作用）：

```
SELECT * 
FROM `users` u 
LEFT OUTER JOIN `lendings` l
ON u.`id` = l.`from`
WHERE l.`from` is null
AND u.`id` != 1
AND u.`borrower` = 1 
```

*这是实际代码的简化示例，以使问题对未来的读者有用/可读。*

相关问题：[MySQL：仅当不在另一个表中时才从一个表中选择电子邮件？](https://stackoverflow.com/questions/1002728/mysql-select-emails-from-one-table-only-if-not-in-another-table)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:03:49.870

像这样的东西？

```
SELECT 
    *
FROM
    users
WHERE
    id NOT IN (SELECT 
            id
        FROM
            lendings)
        AND borrower = 1; 
```

您可能希望使用不同的列名，因为我相信 from 和 to 是 mysql 中的保留字。

# python - 第二次迭代文件不起作用

> ID：10255273
> 
> 赞同：57
> 
> 时间：2012-04-21T01:00:16.600
> 
> 标签：python, file, iteration

我在迭代文件时遇到问题。这是我在解释器上输入的内容和结果：

```
>>> f = open('baby1990.html', 'rU')
>>> for line in f.readlines():
...  print(line)
... 
# ... all the lines from the file appear here ... 
```

当我再次尝试迭代同一个打开的文件时，我什么也得不到！

```
>>> for line in f.readlines():
...  print(line)
... 
>>> 
```

根本没有输出。为了解决这个问题，我必须`close()`打开文件然后再次打开它以供阅读！这是正常的行为吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-04-21T01:02:59.937

是的，这是正常行为。你基本上是第一次读到文件的末尾（你可以把它想象成在读磁带），所以除非你重置它，否则你不能再从它读取，通过使用`f.seek(0)`重新定位到开头文件，或者关闭它然后再次打开它，这将从文件的开头开始。

如果您愿意，可以改用`with`语法，它会自动为您关闭文件。

例如，

```
with open('baby1990.html', 'rU') as f:
  for line in f:
     print line 
```

一旦这个块执行完毕，文件会自动为你关闭，所以你可以重复执行这个块，而不用自己明确地关闭文件，然后再次以这种方式读取文件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-21T01:05:29.907

当文件对象读取文件时，它使用一个指针来跟踪它的位置。如果您阅读了文件的一部分，然后稍后再返回，它将从您离开的地方继续。如果你读取整个文件，然后回到同一个文件对象，这就像读取一个空文件，因为指针在文件的末尾，没有任何东西可以读取。您可以使用`file.tell()`查看指针在文件中的位置并`file.seek`设置指针。例如：

```
>>> file = open('myfile.txt')
>>> file.tell()
0
>>> file.readline()
'one\n'
>>> file.tell()
4L
>>> file.readline()
'2\n'
>>> file.tell()
6L
>>> file.seek(4)
>>> file.readline()
'2\n' 
```

此外，您应该知道`file.readlines()`读取整个文件并将其存储为列表。这很有用，因为您可以替换：

```
for line in file.readlines():
    #do stuff
file.seek(0)
for line in file.readlines():
    #do more stuff 
```

和：

```
lines = file.readlines()
for each_line in lines:
    #do stuff
for each_line in lines:
    #do more stuff 
```

您还可以一次一行地遍历一个文件，而无需将整个文件保存在内存中（这对于非常大的文件非常有用），方法是：

```
for line in file:
    #do stuff 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-21T01:04:34.037

文件对象是一个*缓冲区*。当您从缓冲区读取时，您读取的那部分将被消耗（读取位置向前移动）。当您通读整个文件时，读取位置位于文件末尾 (EOF)，因此它不返回任何内容，因为没有任何内容可供读取。

如果由于某种原因必须重置文件对象的读取位置，您可以执行以下操作：

```
f.seek(0) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T01:02:36.717

当然。这是正常和理智的行为。而不是关闭和重新打开，你可以`rewind`文件。

# javascript - 通过 URL 和 AJAX 进行内部密码保护？

> ID：10255275
> 
> 赞同：0
> 
> 时间：2012-04-21T01:00:41.523
> 
> 标签：javascript, html, ajax, url

在我的旧公司，我们有一个内部网站设置，只有在你的 URL 末尾有密码时才允许你查看它，我假设使用的是 AJAX，但我不太确定，即使是我不知道如何编码。

该 URL 类似于 internal.mysite/secretpanel?pass=superman，如果您输入的内容不是 superman，它会将您重定向到错误的通行证页面。

我的问题是如何检查 URL 的密码并重定向到“密码错误”页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:03:55.113

1.  我希望你没有将它用于任何安全的事情。URL 中的密码而不是 POST 数据不是最好的主意。
2.  不，那不是 AJAX。
3.  您希望在服务器端而不是客户端执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:26:16.060

What you described does not sound like AJAX and also is a horribly insecure system (even as far as internal systems go).

If you are using PHP, you might want to take a look at sessions rather than passing a password in as a portion of the query string in your URL. A simple implementation of this would be to have a login page that checks values posted from a form before redirecting you to a page containing your secrets.

**login.php**

```
 session_start();
 if (isset($_POST['username']) && isset($_POST['password']))
 {
     // Check to see if the username and password is correct
     if (user_is_valid_user($_POST['username'], $_POST['password'])
     {
         $_SESSION['logged_in'] = true;

         // Redirect to your secret page
         header("Location: http://mysite.com/secret.php");
     }
 }
 else
 {
     // Display the login form
     echo "<form method=\"post\" action=\"login.php\">";
     echo "   <input type=\"input\" name=\"username\" />";
     echo "   <input type=\"password\" name=\"password\" />";
     echo "   <input type=\"submit\" value=\"Login\" />";
     echo "</form>";
 } 
```

**secret.php**

```
session_start();
if (!isset($_SESSION['logged_in']))
{
     // Redirect to the login page since user is not logged in
     header("Location: http://mysite.com/login.php");
}

// Display your secret content here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:26:55.523

使用 $_GET['password'] （或您希望用作“密码”变量名的任何名称）。将其分配给变量或直接与服务器保存的变量进行比较。如果您不关心安全性，也无需清理它，尽管 ceejayoz 是对的，但如果您想要安全性，请使用发布的变量，这样没有人可以“碰巧低头看到” url 密码。

# javascript - iphone删除模式下app抖动算法

> ID：10255276
> 
> 赞同：0
> 
> 时间：2012-04-21T01:00:48.843
> 
> 标签：javascript, iphone, html, ios

有谁知道是否有一种开源算法可以操纵对象的（x，y）坐标，类似于 iPhone 在主屏幕上的删除模式，所有应用程序图标都在晃动？我们正在尝试使用 javascript/jquery 来模拟这一点，因此我们更喜欢使用 js 中的算法，但我想如果该算法已经开发但使用另一种语言，那么移植不会那么困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:34:59.777

我不记得 iPhone 在删除模式下摇晃的确切外观，但希望您可以调整以下脚本中的值以满足您的目的。它提供元素中的随机 X/Y 移动，前提是该元素具有类`shaking`。

```
function randomRange(lowerRange, upperRange) {
    return Math.floor(Math.random() * (upperRange - lowerRange + 1)) + lowerRange;
}

function shakeElement(elem) {
    if ($.data($(elem)[0], "pos") === undefined) {
        $.data($(elem)[0], "pos", {
            top: $(elem).position().top,
            left: $(elem).position().left
        });
    }

    if($(elem).hasClass("shaking")) {
        $(elem).animate({
            top: $.data($(elem)[0], "pos").top + randomRange(-8, 8),
            left: $.data($(elem)[0], "pos").left + randomRange(-8, 8)
        }, 100, function() {
            shakeElement(this);
        });
    }
}

$(".shaking").each(function() {
    shakeElement(this);
}); 
```

这是一个适用于您的[jsFiddle 演示](http://jsfiddle.net/HeyJavascript/pS7bx/)。​</p>

# c# - 文本框焦点的 WinForms 事件？

> ID：10255278
> 
> 赞同：16
> 
> 时间：2012-04-21T01:01:09.660
> 
> 标签：c#, .net, winforms

`TextBox`当它有焦点时，我想为它添加一个偶数。我知道我可以用一个简单`textbox1.Focus`的方法来检查布尔值......但我不想那样做。

这是我想做的事情：

```
this.tGID.Focus += new System.EventHandler(this.tGID_Focus); 
```

我不确定 EventHandler 是否是正确的方法，但我知道这不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T01:25:55.093

您正在寻找 GotFocus 活动。还有一个 LostFocus 事件。

```
textBox1.GotFocus += textBox1_GotFocus; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-21T01:28:21.990

```
this.tGID.GotFocus += OnFocus;
this.tGID.LostFocus += OnDefocus;

private void OnFocus(object sender, EventArgs e)
{
   MessageBox.Show("Got focus.");
}

private void OnDefocus(object sender, EventArgs e)
{
    MessageBox.Show("Lost focus.");
} 
```

这应该可以满足您的需求，[本文](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx)描述了调用的不同事件以及调用顺序。您可能会看到更好的活动。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-24T14:30:52.747

我赞成 Hans Passant 的评论，但它确实应该是一个答案。我正在 3.5 .NET 环境中开发 Telerik UI，并且 RadTextBoxControl 上没有 GotFocus 事件。我不得不使用 Enter 事件。

```
textBox1.Enter += textBox1_Enter; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-19T03:58:31.557

根据 Hans 的回答，这是您如何包装它并声明处理函数的方法。

```
namespace MyNameSpace
{
 public partial class Form1 : Form
 {
  public Form1()
  {
   InitializeComponent();
  }

  private void Form1_Load(object sender, EventArgs e)
  {
   txtSchedNum.Enter += new EventHandler(txtSchedNum_Enter);
  }
  protected void txtSchedNum_Enter(Object sender, EventArgs e)
  {
   txtSchedNum.Text = "";
  }
 }
} 
```

# c - 将指针传递给结构数组

> ID：10255280
> 
> 赞同：4
> 
> 时间：2012-04-21T01:01:34.240
> 
> 标签：c, arrays, struct

我正在尝试将指针传递给结构数组。这段代码应该创建一个结构数组，写入结构中的变量，然后将它们打印出来（有效）。然后我想将该结构数组的指针传递给另一个函数并打印出struts数组。

```
#define PORT_NUMBER 5100
#define MAX_CLIENTS 5

#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <pthread.h>

typedef struct thread_args
 {
    int client_number;
    int connected;
    char client_name[1024];
} client;

void pass_func(client* clients[])

int main()
{
  struct thread_args clients[MAX_CLIENTS];
  int i;

  for(i =0; i < MAX_CLIENTS; i++)
  {
  clients[i].client_number=i;
  strcpy(clients[i].client_name, "BOBBY");
  }

    for(i =0; i < MAX_CLIENTS; i++)
  {
     printf("%d | %s\n", clients[i].client_number=i, clients[i].client_name);
  }

  printf("\n\n");
  pass_func(&clients);
}

void pass_func(client* clients[])
{
  int i;
  for(i =0; i < MAX_CLIENTS; i++)
  {
     printf("%d | %s\n", clients[i]->client_number=i, clients[i]->client_name);
  }
} 
```

这是输出：

```
$ gcc TEST.c -lpthread -o TEST.out
TEST.c: In function ‘main’:
TEST.c:41:3: warning: passing argument 1 of ‘pass_func’ from incompatible pointer type [enabled by default]
TEST.c:22:6: note: expected ‘struct thread_args **’ but argument is of type ‘struct thread_args (*)[5]’

$ ./TEST.out 
0 | BOBBY
1 | BOBBY
2 | BOBBY
3 | BOBBY
4 | BOBBY

Segmentation fault 
```

我已经进行了大约一个小时的研究，但无法弄清楚为什么这不起作用。我找到的大多数示例都是针对 C++ 的，但不是针对 C 的。（是的，我知道我包含的许多头文件对于此代码来说不是必需的；这只是我原始代码的一部分。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T01:19:21.437

`pass_func`需要一个指针数组`client`

```
void pass_func(client* clients[]); 
```

但你通过了

```
pass_func(&clients); 
```

指向 s 数组的指针`client`。所以 the`client` `clients[i]`被解释为指向`client`in的指针`pass_func`，但是位模式当然不是指向 的有效指针`client`，因此你试图访问你不应该访问的内存并得到一个段错误。

要么传递一个指针数组，要么声明`pass_func`

```
void pass_func(client *clients); 
```

（然后`pass_func(clients)`在 main 中没有地址运算符的情况下通过）。

但是，您的编译器警告您传递不兼容的指针类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T02:24:28.690

```
void pass_func(client* clients[])
{
  int i;
  for(i =0; i < MAX_CLIENTS; i++)
  {
     printf("%d | %s\n", (*clients)[i].client_number=i, (*clients)[i].client_name);
  }
} 
```

这会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T02:46:28.277

您需要正确掌握基础知识...

您需要首先了解如何将数组传递给函数：最好通过[这个](http://www-ee.eng.hawaii.edu/~tep/EE160/Book/chap7/section2.1.2.html)

# objective-c - 如何恢复 NSMutableArray 的原始排序顺序？

> ID：10255285
> 
> 赞同：2
> 
> 时间：2012-04-21T01:02:09.730
> 
> 标签：objective-c, ios

我已将 NSString 标记为 NSMutable 数组。然后，我可以使用 NSSortDescriptor 按字符串的长度对该数组进行排序。然后我可以从最长的单词开始对某些单词执行方法。

这就是我的问题出现的地方。我现在需要恢复数组的原始排序顺序，以便可以将数组运行回已编辑的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:26:52.707

我的回答基本上和史蒂夫的回答一样，只是我会用另一种方式来做——保留原始数组，创建一个排序后的副本，逐步完成排序后的副本进行处理，然后将其丢弃。所以，例如

```
NSArray *yourOriginalArray = ...whatever...;

// do processing
for(id object in [yourOriginalArray sortedArrayUsing<whatever means>])
{
    // if you're doing processing that doesn't change the identity of
    // the object then there's no need to worry about this, but supposing
    // you want to adjust the identity (eg, the source array is full of
    // immutable objects and you want to replace them) then...

    NSUInteger originalIndex = [yourOriginalArray indexOfObject:object];

    id replacementObject = [self mutatedFormOf:object];
    [yourOriginalArray replaceObjectAtIndex:originalIndex
                     withObject:replacementObject];
    // of course, this is only if yourOriginalArray is mutable
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T01:29:46.677

NSMutableArray 对它的先前状态一无所知，只知道它的当前状态。可能有更优雅的解决方案，但您可以做的一件事是创建另一个存储原始排序顺序的数组。

# visual-studio-2010 - 无法使用 Selenium Web 驱动程序在 Chrome/Firefox/IE 上的 VS 2010 中运行自动化测试 - 显示空白页？

> ID：10255289
> 
> 赞同：1
> 
> 时间：2012-04-21T01:02:45.087
> 
> 标签：visual-studio-2010, testing, selenium, webdriver

浏览器打开并在所有三个（Chrome/Firefox/IE）中显示一个空白页面。它没有显示任何错误消息，但测试没有运行。无法弄清楚问题。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:50:56.660

向我们展示代码示例。

仔细检查您是否不仅为每个驱动程序创建了一个新实例，而且还提供了一个可访问的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:36:40.120

您是否仔细检查了命令中指向的 URL`open`是否正确，以及特定的 aspx 页面？

# silverlight - Windows phone 中的腐蚀和膨胀？？？

> ID：10255294
> 
> 赞同：1
> 
> 时间：2012-04-21T01:03:01.897
> 
> 标签：silverlight, windows-phone-7, image-processing, writeablebitmap

我试图在我的 Windows Phone 应用程序中应用侵蚀和膨胀算法:)。

但是很难做到:(我调查了一些例子，我发现了这个[http://channel9.msdn.com/coding4fun/articles/FaceLight--Silverlight-4-Real-Time-Face-Detection](http://channel9.msdn.com/coding4fun/articles/FaceLight--Silverlight-4-Real-Time-Face-Detection)

Silverlight 的 FaceLight。

是一个很好的例子，它有 Erode 和 Dilate 算法，但我的应用程序有一些差异，FaceLight 从相机拍照，我希望我的应用程序从图库中加载一些图像并应用该算法。

我按照以下步骤 1.- 从图库中加载图像。

```
PhotoChooserTask photo = new PhotoChooserTask();
        photo.Completed += (s, ee) =>
        {

            BitmapImage image = new BitmapImage();

            image.SetSource(ee.ChosenPhoto);

            image.CreateOptions = BitmapCreateOptions.None;

            this.imgoriginal.Source = image;

            GrayTimer.Start();

        };

        photo.Show(); 
```

2.- 从原始图像中获取灰度图像。

```
 WriteableBitmap grayimg = Operations.doGray(imgoriginal); // get the grayscale image 

        BitmapImage imggray = new BitmapImage();

        stream = new MemoryStream(grayimg.ToByteArray()); // get the array of the image

        this.Dispatcher.BeginInvoke(() =>
        {
            grayimg.SaveJpeg(stream, 320, 240, 0, 90); // resize and set quality
            imggray.SetSource(stream);
            grayImage.Source = imggray;// set the grayscale image in the control.
        }); 
```

这个方法 DoGray()

```
 public static WriteableBitmap doGray(Image image)
    {
        WriteableBitmap bitmap = new WriteableBitmap(image, null);
        for (int y = 0; y < bitmap.PixelHeight; y++)
        {
            for (int x = 0; x < bitmap.PixelWidth; x++)
            {
                int pixelLocation = bitmap.PixelWidth * y + x;
                int pixel = bitmap.Pixels[pixelLocation];
                byte[] pixelbytes = BitConverter.GetBytes(pixel);
                byte bwPixel = (byte)(.299 * pixelbytes[2] + .587 * pixelbytes[1] + .114 * pixelbytes[0]);
                pixelbytes[0] = bwPixel;
                pixelbytes[1] = bwPixel;
                pixelbytes[2] = bwPixel;
                bitmap.Pixels[pixelLocation] = BitConverter.ToInt32(pixelbytes, 0);
            }
        }

        return bitmap;
    } 
```

一切正常。

![原始图像](../Images/b82466a325c0e9524b1c310e583b8ef3.png)

![灰度图像](../Images/ce59aaac7f0841ae0fa7b98ec91a6547.png)

现在我应用来自 FaceLight 的 Erode 算法。

```
WriteableBitmap g;

        BitmapImage imggray = new BitmapImage();

        imggray =(BitmapImage) grayImage.Source; // get the gray image from the Control.

        g = new WriteableBitmap(imggray);

        // i apply 3 times for try to see something :S
        er = Operations.Erode(g);
        for (int i = 1; i <= 2; i++)
        {
            Stream str = new MemoryStream(er.ToByteArray());
            BitmapImage r = new BitmapImage();
            WriteableBitmap n;
            er.SaveJpeg(str, 320, 240,0, 100);
            r.SetSource(str);
            n = new WriteableBitmap(r);
            er = Operations.Erode(n);

        }

        this.Dispatcher.BeginInvoke(() =>
        {
            stream = new MemoryStream(er.ToByteArray());
            BitmapImage result = new BitmapImage();
            er.SaveJpeg(stream, 320, 240, 0, 100);
            result.SetSource(stream);
            imgerode.Source = result;
        }); 
```

这是 Erode 算法

```
// Process method of the Erode5x5Filter class
    public static WriteableBitmap Erode(WriteableBitmap input)
    {
        var p = input.Pixels;
        var w = input.PixelWidth;
        var h = input.PixelHeight;
        var result = new WriteableBitmap(w, h);
        var rp = result.Pixels;
        var empty = 0; // = 0
        int c, cm;
        int i = 0;

        // Erode every pixel
        for (int y = 0; y < h; y++)
        {
            for (int x = 0; x < w; x++, i++)
            {
                // Middle pixel
                cm = p[y * w + x];
                if (cm == empty) { continue; }

                // Row 0
                // Left pixel
                if (x - 2 > 0 && y - 2 > 0)
                {
                    c = p[(y - 2) * w + (x - 2)];
                    if (c == empty) { continue; }
                }
                // Middle left pixel
                if (x - 1 > 0 && y - 2 > 0)
                {
                    c = p[(y - 2) * w + (x - 1)];
                    if (c == empty) { continue; }
                }
                if (y - 2 > 0)
                {
                    c = p[(y - 2) * w + x];
                    if (c == empty) { continue; }
                }
                if (x + 1 < w && y - 2 > 0)
                {
                    c = p[(y - 2) * w + (x + 1)];
                    if (c == empty) { continue; }
                }
                if (x + 2 < w && y - 2 > 0)
                {
                    c = p[(y - 2) * w + (x + 2)];
                    if (c == empty) { continue; }
                }

                // Row 1
                // Left pixel
                if (x - 2 > 0 && y - 1 > 0)
                {
                    c = p[(y - 1) * w + (x - 2)];
                    if (c == empty) { continue; }
                }

                // ... 
                // ... Process the rest of the 24 neighboring pixels
                // ...

                // If all neighboring pixels are processed 
                // it's clear that the current pixel is not a boundary pixel.
                rp[i] = cm;
            }
        }

        return result;
    } 
```

这是结果：S什么也没发生:(

![侵蚀图像](../Images/343f18ac8d96accb9d314d7c71b6a82e.png)

**和扩张算法相同的问题，但结果图像是空白图像。任何想法或建议？我需要帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:38:00.350

虽然 Erode 函数看起来应该在灰度上工作，但在调用 erode 之前，您是否尝试过将图像阈值化为二进制掩码（例如 rp = p > 127 ? 255 : 0）？

您在此处为 Erode 函数提供的代码也永远不会`i`从 0 更改...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:10:23.457

我赶紧看了一下你的腐蚀方法。您为什么不编写一个循环（实际上是两个从 -2 到 +2 的 for 循环）来处理您要处理的 25 个案例？

# iphone - 更改 VIewControllers 会停止动画

> ID：10255304
> 
> 赞同：2
> 
> 时间：2012-04-21T01:04:41.567
> 
> 标签：iphone, objective-c, ios, animation

我在 tabbarviewcontroller 的第一个视图控制器上有这个动画

```
- (void)viewDidAppear:(BOOL)animated
{
    [UIView animateWithDuration:4.0 delay:0.0 options:UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear animations:^{
        CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);
        self.rotatingImage.transform = transform;
    } completion:NULL];
} 
```

它工作得很好，但是当我从标签栏更改视图控制器并返回到第一个视图控制器时，动画会停止。

有一个类似的线程[iOS UIView Animation Issue](https://stackoverflow.com/questions/8489638/ios-uiview-animation-issue)但没有任何解释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T01:39:17.840

试试这个：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    self.rotatingImage.transform = CGAffineTransformIdentity;
    [UIView animateWithDuration:4.0 delay:0.0 options:UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear animations:^{
        CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);
        self.rotatingImage.transform = transform;
    } completion:NULL];
} 
```

解释很简单……在再次触发动画代码的同时，UIImageView 的变换已经等于动画的最终变换。这类似于将 UIImageView 的 alpha 从 1.0 设置为 1.0 - 没有任何变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:27:47.023

使用以下代码并享受...

```
self.animationyourImageView.transform = CGAffineTransformIdentity; 
```

它将重置您的转换...

希望对你有帮助..

# sql - 如何计算二进制字段之间的差异？

> ID：10255308
> 
> 赞同：1
> 
> 时间：2012-04-21T01:05:09.400
> 
> 标签：sql, sql-server, entity-framework, linq-to-sql

我想要一个存储为`binary(64)`（固定长度）的字段，然后我希望能够查询“最接近的匹配”。为此，我只想找到每个字节之间的绝对差异，然后对差异求和。

带有四字节字符串的示例：

```
 13 AF 83 52
- E9 B4 9C 19
  -----------
  D6 05 19 39

D6 + 05 + 19 + 39 = 12D = 301 base 10 
```

我正在使用实体框架，所以最好在 Linq 中编写它，但如果这不可能，那么可以使用 raw-SQL。

我预计这不会很快，这就是为什么我计划首先使用另一个键尽可能缩小结果范围。这可以在 Linq/SQL 中做到吗？

否则，我想我可以使用 64 个单字节字段，但我真的不想手动编写代码（我无法编写循环，是吗？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:00:32.503

在 4 字节示例中，可能是这样的：

```
DECLARE @b1 BINARY(4)=0x13+0xAF+0x83+0x52;
DECLARE @b2 BINARY(4)=0xE9+0xB4+0x9C+0x19;

SELECT ABS(CAST(SUBSTRING(@b1,1,1) AS INT)-CAST(SUBSTRING(@b2,1,1) AS INT))
+ ABS(CAST(SUBSTRING(@b1,2,1) AS INT)-CAST(SUBSTRING(@b2,2,1) AS INT))
+ ABS(CAST(SUBSTRING(@b1,3,1) AS INT)-CAST(SUBSTRING(@b2,3,1) AS INT))
+ ABS(CAST(SUBSTRING(@b1,4,1) AS INT)-CAST(SUBSTRING(@b2,4,1) AS INT)) 
```

结果：301（以 10 为基数）

# python - TypeError: 'list' object is not callable /// 在 ex26 中艰难地学习 Python

> ID：10255316
> 
> 赞同：-2
> 
> 时间：2012-04-21T01:06:46.270
> 
> 标签：python

这是我收到的输出，当我重新检查指定行的代码时，我不知道要检查什么。

```
Traceback (most recent call last):
  File "ex27.py", line 93, in <module>
    print_first_and_last_sorted(sentence)
  File "ex27.py", line 35, in print_first_and_last_sorted
    words = sort_sentence(sentence)
  File "ex27.py", line 25, in sort_sentence
    return sort_words(words) 
```

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:24:03.453

[复制？](https://stackoverflow.com/questions/5735841/python-typeerror-list-object-is-not-callable)

无论如何，当您收到此错误时，这意味着您正在尝试以无法使用列表调用特定对象的方式调用对象（在本例中为列表）。但是，如果不查看代码，很难说出究竟是什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:51:58.573

您是否使用括号而不是方括号来引用列表中的项目？

例如

```
myList(0) # Incorrect 
```

代替：

```
myList[0] # Correct 
```

# python - 欺骗 MAC 地址通信的行为

> ID：10255319
> 
> 赞同：3
> 
> 时间：2012-04-21T01:07:06.147
> 
> 标签：python, networking, arp, scapy, spoof

我正在使用 Python 和他的合作伙伴 Scapy 进行编程。我面临的情况是，我不知道这是 ARP 协议的正常行为还是其他问题。

我有这种情况：

**1-**一台 vm 机器 (1) 向另一台 vm 机器 (2) 发送一个“ARP 请求”，其中包含 Spoofed Source MAC Address 字段（由 Scapy 生成）。

**2 -** vm 机器 (2) 接收到带有欺骗源 MAC 地址字段的“ARP​​ 请求”，并使用“ARP 回复”来响应。奇怪的是 vm 机器 (1) 收到了。

**注意：**我已通过 Wireshark 确认第一个数据包（ARP 请求）到达 vm 机器 (2)，且源 MAC 地址字段确实被欺骗了。并且网络接口上的混杂模式被禁用，因此，vm 机器只接收真正发往其接口的数据包。

所以，**我的问题：**

**a)**这是 ARP 协议的正常行为吗？

**b）**因为vm机器（1）在你的接口上配置了另一个MAC地址（真实的），从vm机器（2）发送的响应数据包如何在Destination字段上带有另一个MAC地址（即被欺骗，所以，甚至没有存在于网络上）到达 vm 机器 (1) 并由 vm 机器 (1) 像有效的“ARP​​ 回复”一样有效处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:21:20.930

我在这里看到的奇怪的事情是 ARP 回复如何反弹回 VM(1)，尽管它使用了欺骗的 MAC 地址。

好吧，尝试检查 VM (2) 上的 ARP 表并查看它为 VM (1) 保存的 MAC 记录；在您欺骗 MAC 地址之前，您可能会发现由于某些通信而缓存的合法 MAC 地址。

# jquery - JQuery如何查找和删除li元素

> ID：10255326
> 
> 赞同：4
> 
> 时间：2012-04-21T01:08:30.840
> 
> 标签：jquery, jquery-selectors

我正在尝试使用 JQuery 来查找和删除`<li> <a href="/arb/node/53/grouping/edit/">Edit group</a> </li>`，但一点运气都没有。

请让我知道实现这一目标。

```
<ul class="tabs secondary">
<li class="active">
<a href="/arb/node/53/grouping">View</a>
</li>
<li>
<a href="/arb/node/53/grouping/add">Add new Group</a>
</li>
<li>
<a href="/arb/node/53/grouping/edit/">Edit group</a>
</li>
</ul> 
```

我尝试了以下 jquery，但它不起作用。

```
$(".tabs.secondary:contains(\"Edit group\")").remove() 
```

正确的解决方案应该是找到“编辑组”一词并将其删除`<li>`父级。

谢谢

弗诺

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T01:17:39.007

```
$("li:has('a'):contains('Edit group')").remove(); 
```

演示：http: [//jsfiddle.net/YqFfe/](http://jsfiddle.net/YqFfe/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T01:15:11.320

如果您使用的是 jQuery：

```
$('.tabs li:has(a[href="/arb/node/53/grouping/edit/"])').remove() 
```

删除它。

[jsfiddle](http://jsfiddle.net/z4PkG/2/)

[参考](http://api.jquery.com/remove/)

编辑：由于路径中的数字是动态的，您可能可以使用以下内容：

```
$('.tabs li:has(a[href$="/edit/"])').remove() 
```

这只会删除以 . 结尾的 URL 路径`/edit/`。

[新的 jsfiddle](http://jsfiddle.net/Agprx/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T01:15:08.103

```
$('a').each(function() {
    if ($.trim($(this).text()) == 'Edit Group') {
        $(this).parent().remove();
    }
}); 
```

编辑为目标文本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T01:20:24.853

您也可以尝试：

```
$('li:eq(2)').remove();

$('.tabs li:eq(2)').remove(); 
```

# javascript - 抓取 chrome 扩展 ID 的爬虫

> ID：10255328
> 
> 赞同：1
> 
> 时间：2012-04-21T01:08:49.340
> 
> 标签：javascript, google-chrome, web-crawler

我将如何为 Google chrome 扩展网站编写爬虫？[https://chrome.google.com/webstore/category/extensions](https://chrome.google.com/webstore/category/extensions)

我正在对 chrome 扩展进行一些安全研究。每个类别大约有 100 个扩展，我现在遇到的问题是编写一个爬虫来至少抓取 UID。该网站似乎由 javascript 更新。如果我要获取 html，我将一无所获，因为该站点似乎在稍后阶段加载页面的其余部分。换句话说，我需要的核心内容（即带有所有扩展元素的 DOM）似乎是在我使用 python 获取 HTML 之后加载的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:22:00.950

是的，网页不包含数据 - 它是单独下载的。使用这样的 URL：

> `https://chrome.google.com/webstore/ajax/item?pv=1389738107&count=100&category=app/7-productivity`

请注意，这必须是一个 POST 请求（没有任何 POST 数据），出于安全原因，其他请求将被拒绝。您必须`")]}'"`在文件的开头和`"[]\n"`其他各个地方删除 - 然后您应该获得可以通过`json.loads`. 数据不是很结构化，但应该足以爬行。

请注意，该`pv`参数看起来可能很快会更改（此 Unix 时间对应于四天前的日期），您可以使用 Chrome 开发者工具的 Network 选项卡查看当前请求参数。该`category`参数是类别的标识符 - 它是`https://chrome.google.com/webstore/category/`Web Store 链接中的 URL 部分。

# c# - 尝试在运行时将 object[] 转换为 ValueType[]

> ID：10255329
> 
> 赞同：2
> 
> 时间：2012-04-21T01:09:00.370
> 
> 标签：c#, .net, .net-4.0

当值类型仅在运行时已知时，是否可以将 object[] 转换为诸如 double[] 之类的值类型？如果无法使用 .net 内置转换将 object[] 中的对象转换为值元素类型（例如双精度），则完全可以接受异常。

```
var original = new object[] { 1 , 2 , 3 , 4 , 5 , 6 }
Type resultType = typeof( double[] ); // or any means of getting a type at runtime
var result = ?? 
```

以下尝试失败：

```
# error: Object must impliment IConvertible
Convert.ChangeType( original , resultType );

# error: Object cannot be stored in an array of this type.
var result = Array.CreateInstance( resultType , original.Length );
for ( int i = 0 ; i < original.Length ; i++ )
{
    result.SetValue( Convert.ChangeType( original[ i ] , resultType.GetElementType() ) , i );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T01:25:36.917

您的最后一次尝试非常接近：第一行应该是

```
var result = Array.CreateInstance(resultType.GetElementType(), original.Length); 
```

因为`Array.CreateInstance`将*元素类型*作为其第一个参数。除此之外，它应该可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:38:52.963

```
private T[] Cast<T>(params object[] items)
{
    if (!typeof(T).IsValueType)
    {
        throw new ArgumentException("Destined type must be Value Type");
    }

    return items.Cast<T>().ToArray();
} 
```

# javascript - 使用 JQuery 的带有单选按钮的确认对话框

> ID：10255330
> 
> 赞同：3
> 
> 时间：2012-04-21T01:09:48.527
> 
> 标签：javascript, jquery, jquery-ui

我有一个非常基本的确认对话框，有 2 个按钮：“确定”和“取消”。这是演示：http: [//jsfiddle.net/VQmAm/11/](http://jsfiddle.net/VQmAm/11/)

现在我需要添加到该确认对话框：一些单选按钮，用户将只选择其中一个值，我将使用该值稍后使用它。

除了 JQuery 之外，我还找到了一些方法来做到这一点，但我想知道我是否可以通过 JQuery 来做到这一点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T01:17:49.567

将单选按钮（具有相同`name`属性）添加到#confirmDialog div。然后，您可以使用 OK 按钮获取所选值：

```
 'OK': function() {
            value = $(this).find('input:checked').val();
            $(this).remove();
        }, 
```

请注意，您在删除对话框之前获得了该值。你应该`value`在函数之外定义 var 。

# python - 如何从 Django 中的 ftp 下载保存到 ImageField

> ID：10255333
> 
> 赞同：1
> 
> 时间：2012-04-21T01:11:14.933
> 
> 标签：python, django, ftp

目前，我正在将文件从 ftp 服务器保存到 loal 目录中。但我想转向使用 ImageFields 使事情更易于管理。

这是当前的代码片段

```
file_handle = open(savePathDir +'/' +  fname, "wb")            
nvcftp.retrbinary("RETR " + fname, _download_cb)
file_handle.close()    
return savePathDir +'/' +  fname 
```

这是我第一次尝试匹配。我现在只是为了兼容性而返回路径。稍后我将通过模型正确访问存储的文件。

```
new_image = CameraImage(video_channel = videochannel,timestamp = file_timestamp)
file_handle = new_image.image.open()
nvcftp.retrbinary("RETR " + fname, _download_cb)
file_handle.close()
new_image.save()
return new_image.path() 
```

它是否正确？我对应该以什么顺序处理 file_handle 和 ImageField“图像”感到困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:48:40.863

你不见了`_download_cb`，所以我没有使用它。
参考[Django 的文件对象](https://docs.djangoproject.com/en/1.4/ref/files/file/)。尝试

```
# retrieve file from ftp to memory,
# consider using cStringIO or tempfile modules for your actual usage

from StringIO import StringIO
from django.core.files.base import ContentFile
s = StringIO()
nvcftp.retrbinary("RETR " + fname, s.write)
s.seek(0)  
# feed the fetched file to Django image field
new_image.image.save(fname, ContentFile(s.read()))
s.close()

# Or
from django.core.files.base import File
s = StringIO()
nvcftp.retrbinary("RETR " + fname, s.write)
s.size = s.tell()
new_image.image.save(fname, File(s)) 
```

# r - 在 R 中执行非负矩阵分解

> ID：10255336
> 
> 赞同：5
> 
> 时间：2012-04-21T01:11:59.677
> 
> 标签：r, matrix, sparse-matrix, matrix-factorization

我在 R 中有一个稀疏矩阵

我现在希望对 R 执行非负矩阵分解

data.txt 是我使用 python 创建的一个文本文件，它由 3 列组成，其中第一列指定行号，第二列指定列号，第三列指定值

数据.txt

```
1 5 10
3 2 5
4 6 9 
```

原始 data.txt 包含 164009 行，这是 250000x250000 稀疏矩阵的数据

我使用了 NMF 库，我正在做

```
x=scan('data.txt',what=list(integer(),integer(),numeric()))
library('Matrix')
R=sparseMatrix(i=x[[1]],j=x[[2]],x=x[[3]]) 
res<-nmf(R,3) 
```

它给了我一个错误：

> 函数错误（类、fdef、mtable）：无法找到函数 nmf 的继承方法，用于签名“dgCMAtrix”、“missing”、“missing”

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T03:31:00.937

第一个问题是您正在向 nmf 提供 dgCMatrix。

```
> class(R)
[1] "dgCMatrix"
attr(,"package")
[1] "Matrix" 
```

帮助在这里：

```
help(nmf) 
```

请参阅方法部分。它需要一个真实的矩阵。由于条目的数量，使用 as.matrix 进行强制可能对您没有多大帮助。

现在，即使使用您的示例数据，对矩阵的强制也是不够的：

```
> nmf(as.matrix(R))
Error: NMF::nmf : when argument 'rank' is not provided, argument 'seed' is required to inherit from class 'NMF'. See ?nmf. 
```

让我们给它一个排名：

```
> nmf(as.matrix(R),2)
Error in .local(x, rank, method, ...) : 
  Input matrix x contains at least one null row. 
```

确实如此：

```
> R
4 x 6 sparse Matrix of class "dgCMatrix"

[1,] . . . . 10 .
[2,] . . . .  . .
[3,] . . 5 .  . .
[4,] . . . .  . 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-13T15:33:32.303

现在有一个优秀的 NMF 包可用： [https ://cran.r-project.org/web/packages/NMF/NMF.pdf](https://cran.r-project.org/web/packages/NMF/NMF.pdf)

提供各种热图、纯度/熵、一系列不同的 NMF 算法（Brunet、Lee、sNMF、nsNMF、欧几里得/KL 散度等）以及创建您自己的框架。

尝试：

```
library(NMF)
x = read.table('data.txt')
# estimate rank
estim.x = nmf(x, 2:5, nrun=50, method = 'nsNMF', seed = 'random', .options = "v")
# plot clustering accuracy
plot(estim.x, what = c("cophenetic", "dispersion"))
# inspect consensus matrices
consensusmap(estim.x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-26T17:54:19.550

差不多 10 年后，有解决方案。这是一个快速的。

如果你有一个`dgCMatrix`250k 平方的 dgCMatrix，它的稀疏度接近 1%，你需要一个稀疏分解算法。

我`RcppML::NMF`为大型稀疏矩阵写了：

```
library(RcppML)
A <- rsparsematrix(1000, 10000, 0.01)
model <- RcppML::nmf(A, k = 10)
str(model) 
```

在笔记本电脑上这应该需要几秒钟。

您也可以签出`rsparse::WRMF`，尽管速度不快。

# .net - 如何通过索引选择 List<> 并返回内容？

> ID：10255338
> 
> 赞同：0
> 
> 时间：2012-04-21T01:12:32.677
> 
> 标签：.net, list, indexing

我得到了这个示例列表<>

```
List<string> pizzas = new List<string>();
pizzas.Add("Angus Steakhouse");
pizzas.Add("Belly Buster");
pizzas.Add("Pizza Bianca");
pizzas.Add("Classic Cheese");
pizzas.Add("Friday Special"); 
```

我只想知道如何使用索引返回字符串？

就像示例一样，我将输入“1”，它会返回“Belly Buster”

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T01:14:02.837

您应该能够使用：

```
pizzas[1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T01:14:34.043

```
var str = pizzas[1]; //Tada!!!! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T01:19:30.473

如果您只想访问特定元素并取回字符串，您可以这样做：

```
List<string> pizzas = new List<string>();
pizzas.Add("Angus Steakhouse");
pizzas.Add("Belly Buster");
pizzas.Add("Pizza Bianca");
pizzas.Add("Classic Cheese");
pizzas.Add("Friday Special");

string result = pizzas[1]; // result is equal to "Belly Buster" 
```

如果您想实际输入数据并返回结果，例如控制台应用程序，您可以执行以下操作：

```
Console.Write("Index: ");
int index = Int32.Parse(Console.ReadLine());

Console.WriteLine("You selected {0}.", pizzas[index]); 
```

这样做的原因是因为 List(T) 实现了所谓的索引器。这是一个特殊属性，可让您使用类似数组的语法访问对象。.NET BCL 中的大多数通用集合都有索引器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T01:19:34.633

由于您的列表是字符串类型，因此您可以像这样直接将其分配给字符串类型变量。

字符串 str = 比萨[1]；// str = 肚皮克星

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T01:19:06.760

您也可以这样做，但看起来以前的帖子也是正确的。

```
for(int i = 0; i < pizzas.Count; i++)
    Console.WriteLine(pizzas.ElementAt(i));
Console.ReadLine(); 
```

**编辑1：**

如果不明显，您想要的特定索引 (1) 将按如下方式访问：

```
string pizza = pizzas.ElementAt(1); 
```

**编辑2：**

错误的代码。见编辑 3。

**编辑3：**

给定这两种方法，让我们测试它们。

*代码：*

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

namespace ElementAtOrIndex
{
    class Program
    {
        // Declare/initialize static variables.
        static Stopwatch timer = new Stopwatch();
        static List<long> ElementAtTimes = new List<long>();
        static List<long> IndexTimes = new List<long>();

        static void Main(string[] args)
        {
            // Declare/initialize variables.
            int count = 100000;
            int iterations = 1000;

            // Just initializes a list with elements from 0 to count.
            // Slower than for loops, but pithy for an example on SO.
            List<int> list = Enumerable.Range(0, count).ToList<int>();

            // Assert that both methods are equal.
            for (int i = 0; i < list.Count; i++)
            {
                if (list.ElementAt(i) != list[i])
                {
                    Console.WriteLine("Both methods are not equal!");
                    Environment.Exit(1);
                }
            }
            Console.WriteLine("Both methods are equal!");

            // Time ElementAt access *iterations* times by copying into a variable.
            for (int i = 0; i < iterations; i++)
            {
                // [Re]start the timer.
                timer.Reset();
                timer.Start();

                int temp;
                for (int j = 0; j < list.Count; j++)
                    temp = list.ElementAt(j);

                // Note the time. 
                ElementAtTimes.Add(timer.ElapsedTicks);
            }

            // Time Index access *iterations* times by copying into a variable.
            for (int i = 0; i < iterations; i++)
            {
                // [Re]start the timer.
                timer.Reset();
                timer.Start();

                int temp;
                for (int j = 0; j < list.Count; j++)
                    temp = list[j];

                // Note the time. 
                IndexTimes.Add(timer.ElapsedTicks);
            }

            // Output times.
            Console.WriteLine("Average time for ElementAt access: {0} ns", ElementAtTimes.Average() / count * 100);
            Console.WriteLine("Average time for Index access: {0} ns", IndexTimes.Average() / count * 100);

            Console.ReadLine();
        }
    }
} 
```

*测试：*

[http://goo.gl/Tf10R](http://goo.gl/Tf10R)

*输出：*

```
Both methods are equal!
Average time for ElementAt access: 25.101014 ns
Average time for Index access: 12.961065 ns 
```

*评论：*

当涉及到错误时，MSDN 文档和大量经验证据表明，这种担忧是完全没有根据的。如果列表发生更改，那么这些更改当然会通过两种访问方法反映出来。

索引访问方法肯定更快，但我想淡化多少。这是 100,000 次访问的计时。通过访问访问，它只快了几纳秒。这最终会加起来，但对于大多数应用程序来说是不必要的优化，而且这两种方法最终都会做同样的事情。

此外，虽然这仅显示了访问 int 类型列表的时间，但我已经测试了 double、float 和 string 类型的列表，结果相似。如果需要，我可以发布这些版本。

*索引访问方法在所有情况下都应该更快，但里程因硬件而异。我的计算机对`ElementAt()`和索引访问方法的访问时间分别为 5.71ns 和 0.27ns。

# mysql - 在 3 个表中使用 mysql 连接

> ID：10255341
> 
> 赞同：0
> 
> 时间：2012-04-21T01:13:43.967
> 
> 标签：mysql, join, syntax

我似乎无法弄清楚我在 mysql 中执行完全连接的语法有什么问题

```
select movies.title, genres.name    
from movies
full join genres_in_movies
on movies.id = genres_in_movies.movie_id
full join genres
on genres_in_movies.genre_id = genres.id
where movies.id = 12345; 
```

以下是相关表格：

```
genres
id (pk)
name 

movies
id (pk)
title

genres_in_movies
genre_id
movie_id 
```

我正在尝试获取列出电影及其类型的表格。一部电影在流派表中可能有多个条目，因此我使用完全连接来获取所有结果，而无需在最终结果中重复 movies.title 属性。

我正在使用mysql，如果这有什么不同的话。我得到的错误抱怨我在第 5 行附近的语法错误。

编辑：

好的，现在是一个示例输出：

```
Name    Genre
Batman  Action
Batman  Crime
Batman  Mystery 
```

我想得到一个不包含 3 行的表来保存这些信息，而是有类似的东西：

```
Title  Genre
Batman Action, Crime, Mystery 
```

或者那是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:28:57.510

试试这个：

```
SELECT m.title, g.name
FROM movies m
JOIN genre_in_movies gim on gim.movie_id = m.id
JOIN genres g on g.id = gim.movie_id
WHERE m.id = '12345' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:33:13.910

MySQL 不支持 FULL JOIN。您必须使用 UNION 子句结合使用左外连接和右外连接。

[你可以在这里](http://www.roseindia.net/sql/sqljoin/mysql-full-join.shtml)看到一个解释。

无论如何，我不认为 FULL JOIN 会给你你想要得到的东西。

为了避免每部电影有多个记录，您应该按电影分组，但是您必须进行组连接以在单个记录中显示所有流派。

请为您的查询提供示例预期输出。

编辑：

```
select movies.title, GROUP_CONCAT( genres.name SEPARATOR ‘, ’ ) as 'genres'
from movies
inner join genres_in_movies on movies.id = genres_in_movies.movie_id
inner join genres on genres_in_movies.genre_id = genres.id
where movies.id = 12345
group by movies.title; 
```

# css - Visual Studio 将我的所有控件设置到同一个位置

> ID：10255355
> 
> 赞同：0
> 
> 时间：2012-04-21T01:16:08.413
> 
> 标签：css, visual-studio

情节是下一个..

我有一个样式表，例如：

.class{显示：块；位置：绝对；}

我将其分配给 div 内的每个控件。问题是，在我将控件拖放到 div 中后，visual studio 修改了我的 css 类，结果如下：

.class{display:block;position:absolute;top:100px;left:100px}

这导致每个控件具有相同的位置

有没有办法让视觉工作室单独设置位置而不影响我的班级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:31:34.813

最好的过程是使用`Source`视图而不是`Design`. `Design`真正的目的是更多地用作视觉参考而不是设计表面（尽管微软承认尝试并失败了，使其适用于设计）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:26:09.240

找到了解决方法。它包括在将源视图中的每个控件指定为 css 类之前指定它的任何位置，之后我可以独立于设计视图移动任何控件。

# c++ - 使用 .Copy 执行复制构造函数的最佳方法？

> ID：10255363
> 
> 赞同：0
> 
> 时间：2012-04-21T01:17:59.777
> 
> 标签：c++, string, object, copy-constructor

我需要帮助在我的面向对象程序中执行这个复制构造函数。结果应该是将字符串 1: 复制`Hello World`到字符串 2:`This is a test`中。

**在我的`.h`文件中**：

```
void Copy(MyString& one); 
```

**在我的`.cpp`文件中**：

```
void MyString::Copy(MyString& one)
{
   one = String;
} 
```

**在我的`main.cpp`文件中**：

```
String1.Print();
cout  << endl;
String2.Print();
cout  << endl;      
String2.Copy(String1);      
String1.Print();       
cout  << endl;
String2.Print();
cout  << endl; 
```

**输出**：

```
Hello World
This is a test
is a test
This is a test 
```

**它应该是**：

```
Hello World
This is a test
Hello World
Hello World 
```

请向我解释我做错了什么？

这是我的整个 .cpp 文件：

```
MyString::MyString()

{

char temp[] = "Hello World";

        int counter(0);
        while(temp[counter] != '\0') {
                counter++;
        }
        Size = counter;
        String = new char [Size];
        for(int i=0; i < Size; i++)
                String[i] = temp[i];

}

MyString::MyString(char *message)

{

      int counter(0);

       while(message[counter] != '\0') {

      counter++;

   }

        Size = counter;

        String = new char [Size];

         for(int i=0; i < Size; i++)

           String[i] = message[i];

}

MyString::~MyString()

{

        delete [] String;

}

int MyString::Length()

{
              int counter(0);

              while(String[counter] != '\0')
             {
                     counter ++;
             }

                return (counter);
}

void MyString:: Set(int index, char b)

{

         if(String[index] == '\0')

          {
                   exit(0);
          }

         else

        {

                   String[index] = b;
          }

}

void MyString::Copy(MyString& one)

{

        one = String;

}

char MyString:: Get(int i)
{

             if( String[i] == '\0')
             {
                     exit(1);
             }
            else
            {

                    return String[i];

            }
}

void MyString::Print()

{

        for(int i=0; i < Size; i++)

            cout << String[i];

             cout << endl;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:28:22.220

`void Copy(MyString& one);`不是复制构造函数，但我想你需要的只是一个复制的函数。

实施：

```
void MyString::Copy(MyString& one) {
   one = String;
} 
```

不管是什么，这`String`可能是您的类内部存储，并将其分配给您传入的字符串...

这意味着`String2.Copy(String1)`就像在做`String1 = String2.String`. 您想要的输出表明您想将 String1 复制到 String2 中，但您的方向完全错误。

此外，此分配导致部分副本（“是一个测试”）的事实意味着您正在执行该分配也被破坏了。你没有展示它的实现，所以我不能告诉你它是如何被破坏的。

* * *

代码有很多问题。您可能应该与另一个学生或助教一起讨论它。但是对于您的输出显示的特定问题，您应该查看三件事。首先谷歌“三法则”。其次考虑当左侧是`MyString`对象而右侧是 char* 时 '=' 的含义。第三，一旦你弄清楚数据将如何被复制，反转分配的方向（例如，`*this = out.String`），以便你在正确的方向上复制。

# c++ - C++ WTL8.1 如何在带有消息循环的新线程中创建一个窗口？

> ID：10255380
> 
> 赞同：1
> 
> 时间：2012-04-21T01:22:28.837
> 
> 标签：c++, windows, multithreading, wtl

我看到这个问了很多方法，但从未见过实际工作的代码片段。

毫无疑问，我尝试了用新窗口和消息循环创建新线程的天真尝试。我有一个必须打开一个窗口并处理其消息的函数，并且必须在可以从没有现有消息循环（也没有其他窗口）或通常的 mfc 消息循环或 WTL 消息循环的应用程序调用的环境中运行。我看到了一些关于 AddMessageLoop 和 Modules 的东西？但它似乎是针对主要应用程序的。无论如何，那里可能有也可能没有 WTL 模块。需要一个带有基本消息循环的独立窗口。传入一个窗口尚未打开的 WTL 类，因此窗口在与循环相同的线程中打开。类对象是否也必须在新线程中创建？

```
// does not work.... 
static DWORD WINAPI MyRunThread(__in LPVOID lpParameter)
{
CMessageLoop theLoop;
WTLsubclass *nav = (WTLsubclass *) lpParameter;

nav->CreateWindow(); 
int nRet = theLoop.Run();

return nRet;
}

CreateThread(0,0,MyRunThread,&nav,0,0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:58:48.287

`SetWindowLongPtr`并且`GetWindowLongPtr`，使用这些从窗口 proc 中访问您的实例，然后在 上设置条件变量`WM_ACTIVATE`。

在您的客户端代码中：

```
// Create window, this setups the window and runs a message loop, its guts are ran in a different thread
createwindow();
// Wait to be shown, this presumes the existence of a mutext (m) and a condition_variable (cv) in your instance
std::unique_lock<std::mutex> lock(m);
cv.wait_for(lock, std::chrono::milliseconds(800)); 
```

在窗口设置和创建期间，这可以在您的线程进程中：

```
// Create window (RegisterClass, CreateWindow, etc)
...
SetWindowLongPtr(hwnd, GWLP_USERDATA, /*your instance*/ ...);   
ShowWindow(hwnd, ...);
...
// Pump 
```

在你的窗口过程中：

```
...
switch(msg)
{
    case WM_ACTIVATE:
    {
        your_instance* inst = (your_instance*)GetWindowLongPtr(hwnd, GWLP_USERDATA);
        inst->cv->notify_one();
    }
    break;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:47:48.340

有关需要的更改，请参阅注释。Gotcha #1 was & operator 不适用于 WTL 类 Gotcha #2，永远不会为您的事件命名。如果您与未知的其他对象链接，则很可能有人已经使用了相同的名称，并且 Windows 认为相同的名称表示相同的事件，即使使用了多个 CreateEvent() 调用。没有名称，没有所谓的不同事件的“别名”。

Non-Gotcha，如果您不希望“主”消息处理程序处理您的消息，则不需要 _Module 或“告诉”有关您的消息循环的任何内容。如果您想要具有独立循环的独立窗口，请参见下文。

==================================================== =

```
static DWORD WINAPI MyRunThread(__in LPVOID lpParameter)
{
CMessageLoop theLoop;
WTLsubclass *nav = (WTLsubclass *) lpParameter;

nav->CreateWindow(); 
SetEvent(WindowCreatedEvent) // signal event HANDLE type for worker thread

int nRet = theLoop.Run();

return nRet;
}

//CreateThread(0,0,MyRunThread,&nav,0,0); // & wont work on WTL class objects
// some genius overloaded the & operator on WTL class objects, just because in C++ you can

//Workaround to get address of WTL class object
CLASSnav nav[1];
CLASSnav *pnav = nav; // because arrays is address of first element.
CreateThread(0,0,MyRunThread,pnav,0,0); 
```

# javascript - 有没有办法获得谷歌浏览器扩展的绝对路径

> ID：10255381
> 
> 赞同：0
> 
> 时间：2012-04-21T01:22:49.617
> 
> 标签：javascript, google-chrome, google-chrome-extension

是否可以获得谷歌浏览器扩展的绝对路径？任何想法，想法，都非常受欢迎！

**编辑**

我使用 Firebreath 构建了一个插件，我需要知道我的扩展在哪里，因为我想调用 myExecutable。

文件夹：

```
myExtensionFolder/
     manifest.json
     background.html
     background.js
     popup.html
     popup.js
     **myExecutable** 
```

TIA。

**解决方案**

解决了这个问题。我正在使用指向 myExecutable 文件的符号链接。我将文件直接复制到我的文件夹中解决了这个问题。

无论如何，谢谢你们的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:34:45.067

在 chrome 内部，它是`chrome-extension://your-extension-id-here/whateverfile.html`，可通过[`chrome.extension.getURL("whateverfile.html")`](http://code.google.com/chrome/extensions/extension.html#method-getURL). 在磁盘上，它是您的[用户配置](http://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=142059)文件中的 Extensions 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:30:40.507

解决方案

解决了这个问题。我正在使用指向 myExecutable 文件的符号链接。我将文件直接复制到我的文件夹中解决了这个问题。

# networking - 为什么 Kademlia 使用 UDP？

> ID：10255383
> 
> 赞同：3
> 
> 时间：2012-04-21T01:23:35.767
> 
> 标签：networking, udp, dht, kademlia

为什么[Kademlia 分布式哈希表](http://en.wikipedia.org/wiki/Kademlia)使用 UDP 作为其网络传输协议，即使它不可靠？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T10:58:21.720

主要原因是您快速查询了许多以前从未建立联系的节点，并且在查找期间可能永远不会再看到。

Kademlia 查找是迭代的，即不会转发请求。转发 DHT 将更适合长期存在的 TCP 连接。

即，流量的很大一部分包括可能在数百万范围内的网络节点之间的请求和响应的短暂交换。快速建立数千个 TCP 连接的开销将令人望而却步。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T01:42:09.697

为什么是 UDP？因为，它是简单、有效和低成本的协议。它不保证包裹的交付，也不需要建立恒定的连接。所有这些特性使 UDP 适合快速向多个接收者传送数据。这就是 P2P 应用程序所需的全部内容。

来自 Kademlia 设计规范的引用：

> Kademlia 的设计者似乎没有考虑到使用 IPv6 地址或 TCP/IP 而不是 UDP 或 Kademlia 节点具有多个 IP 地址的可能性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T01:47:51.530

我必须承认我没有使用过这个产品，但是研究它让我觉得我可以回答这个问题。

它似乎是一个最终连贯的系统。它似乎也是一个高性能系统。鉴于此，udp 将起作用。没有像 tcp 那样的握手，所以它很快。还有一个更正机制，以便处理协议可能的损坏。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-13T10:27:36.143

我们的 Kademlia (OpenKad) 版本可以使用 TCP 或 UDP。

Kademlia 是一种高级路由协议，因此与两种传输级协议的工作方式相同。由于失败丢弃数据包和超时，Kademlia 部署中的查找时间不是那么好。所以性能并不是最好的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-27T04:07:23.823

我知道这可能会引起很多争论，但 UDP 并不是专门设计为不可靠的，它只是缺少使其可靠的功能。从更高层次的角度看（如套接字编程）UDP 和 TCP 看起来和感觉非常相似，但实际上没有可比性。TCP 旨在开箱即用地处理大多数与传输相关的问题，其中 UDP 仅将端口标头和检查项附加到底层 IP 数据包，这几乎是它作为协议的全部范围。

自然地，您能够构建和扩展这两种协议。扩展 UDP 通常*不是*正确的解决方案，因为 TCP 通常会处理您在网络中所需的一切，但少数例外之一是 TCP 的连接模型过于受限。在 p2p 网络中就是这种情况，因为 TCP 旨在基本上模拟两个端点之间的专有一对一管道，其中 p2p 连接通常共享更多的全对全性质。

长话短说，此时您将通过向 UDP 添加“可靠性”或创建一个全面的 TCP 实现来“重建轮子”。

要回答您的问题的实质（为什么在 Kademlia 中使用 UDP），我认为规范实际上并没有解释为什么要使用 UDP（或不使用 TCP），因此我认为没有权威的答案，但我的猜测是作者现在/曾经认为，建立在 UDP 之上会比试图将 TCP 扩展到它不是专门为之设计的方向而增加更多的灵活性。换句话说，添加到几乎没有任何形式的功能的库上，VS 解决和/或扩展另一个现有功能。

# actionscript-3 - as3 获取调整大小的影片剪辑的宽度

> ID：10255384
> 
> 赞同：0
> 
> 时间：2012-04-21T01:23:53.887
> 
> 标签：actionscript-3, flash, width, movieclip

我有一个在时间轴中手动缩放的影片剪辑。

我现在正在尝试使用动作脚本获取宽度和高度，以便我可以将另一个电影剪辑加载到其中并使其大小相同。

但是，当我执行以下代码时，我无法正确定位它，因为比例是 WIDTH 并且 HEIGHT 显示原始大小而不显示缩放大小坐标。因此，当我将新剪辑放入其中时，我无法使其与重新缩放的剪辑具有相同的宽度和高度；

```
ScaledMC.addChild(myMC);
myMC.x = - ScaledMC.width /2; //Because the MC registration is in the center 
```

解决方法可能是一些代码来检测剪辑边界的 x 和 y 位置以及它们在舞台上的位置。

谢谢你的时间。

**更新：2012 年 4 月 25 日**

我正在发布我正在尝试做的事情的完整代码，包括 FLA。当您单击女孩时，我需要她加载到另一个电影剪辑中。然而，影片剪辑是按比例缩放的，所以当她加载时，她的位置会突然改变。我需要它看起来像她没有移动并留在同一个地方。

```
import flash.geom.Rectangle;

var Girlx = Girl.x;
var Girly = Girl.y;

var b:Rectangle;
b = Room.ChalkBoard.getBounds(this);

trace(b);

Room.ChalkBoard.addEventListener(MouseEvent.MOUSE_DOWN, fl_ClickToDrag);

function fl_ClickToDrag(event:MouseEvent):void
{
    Room.ChalkBoard.startDrag();
}

stage.addEventListener(MouseEvent.MOUSE_UP, fl_ReleaseToDrop);

function fl_ReleaseToDrop(event:MouseEvent):void
{
    Room.ChalkBoard.stopDrag();
    b = Room.ChalkBoard.getBounds(this);
}

Girl.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);

function fl_MouseClickHandler(event:MouseEvent):void
{
    //Room.ChalkBoard.scaleX = 1;
   // Room.ChalkBoard.scaleY = 1;
    Room.ChalkBoard.addChild(Girl);

    // I NEED TO KNOW HOW TO SCALE GIRL BACK TO SAME SIZE
    // EXAMPLE:

Girl.scaleY = 1 + Room.ChalkBoard.scaleY;

Girl.scaleX = 1 + Room.ChalkBoard.scaleX;
Girl.x = Girlx - b.x; /// This formula works if Room is at scaleX is 1;
Girl.y = Girly - b.y;  /// This formula works if Room is at scaleY is 1;

} 
```

这是 FLA：[http ://www.EdVizenor.com/Girl.fla](http://www.EdVizenor.com/Girl.fla)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:19:46.457

您可以访问[`Matrix`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)表示您使用 IDE 缩放的对象的转换，以计算出您缩放了多少。`Matrix`您要查看的关键属性是`a`x-scale 和`d`y-scale。

演示：

```
var matrix:Matrix = ScaledMC.transform.matrix;
trace(matrix.a, matrix.d); 
```

然后，您可以使用这些值来缩放额外的 MovieClip 或您需要做的任何事情。

奖励：有一个功能：

```
function getScale(target:DisplayObject):Object
{
    var mtx:Matrix = target.transform.matrix;

    return {
        scaleX: mtx.a,
        scaleY: mtx.d
    }
}

// Get scaleX of ScaledMC.
trace(getScale(ScaledMC).scaleX); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:45:38.617

If your problem is that you scale the movieclip and want to use the original dimensions (I think this is what you are saying) then you could try something like the following:

```
ScaledMC.addChild(myMC); 
myMC.x = - (ScaledMC.width/ScaledMC.scaleX) /2; 
```

Notice that I added in a factor for scaling of the movieclip object itself

# actionscript-3 - 我们可以使用 Adob e AIR 在 OS 文件夹右键菜单中添加菜单选项吗

> ID：10255385
> 
> 赞同：2
> 
> 时间：2012-04-21T01:24:02.503
> 
> 标签：actionscript-3, air, flex4, flash-cs5

我正在处理 Adob​​e AIR 项目，我需要在菜单中添加“菜单选项”，当我们右键单击任何文件夹时，该菜单会打开。我想问一下，用adobe air可以做到吗？

详细信息：这里有更多详细信息：我想开发空中应用程序，其功能是在 ftp 服务器上上传文件/文件夹。它在操作系统启动时（自动）启动并在后台运行。我想在操作系统文件夹/文件右键单击菜单中添加菜单项“上传”，以便每当我单击该文件夹时，该文件/文件夹应该上传到 FTP 服务器上。希望你明白了。我已经完成了 FTP 部分，但我想知道我可以在菜单中添加菜单项，当我们右键单击任何文件/文件夹时会打开该菜单项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:12:30.607

您不能直接在 AS3 中执行此操作，因为此类操作是通过 DLL（至少在 Windows 上）在操作系统上注册服务器来完成的，例如 GIT 安装或直接修改系统注册表。

[你可以在这里](http://www.jfitz.com/tips/rclick_custom.html)找到更多信息

恐怕除了 AIR 应用程序之外，您还必须使用另一种语言进行小型安装程序。

希望有帮助。

# prolog - 请帮助有关prolog的一些基础知识

> ID：10255391
> 
> 赞同：0
> 
> 时间：2012-04-21T01:25:40.677
> 
> 标签：prolog

我想编写一个程序来删除给定列表中出现的任何成员，如下所示：

```
deleteall(1,[1,2,3,1,3,2,5],Out)                
Out= [2,3,3,2,5] 
```

我怎样才能做到这一点？这是我的尝试：

```
deleteall(X,[],[]).                
deleteall(X,[H1|T1],[H2|T2]) :- deleteall (X,T1,T2). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:46:34.143

请尝试以下方法。您在原始程序中缺少一个条件。

```
deleteall(_,[],[]).
deleteall(X,[X|T1],T2) :- deleteall(X,T1,T2).
deleteall(X,[H1|T1],[H1|T2]) :- not(X=H1), deleteall(X,T1,T2). 
```

# windows - 1 pixel vertical discrepancy between text on OSX and Windows

> ID：10255394
> 
> 赞同：2
> 
> 时间：2012-04-21T01:26:45.760
> 
> 标签：windows, macos, html, css

I have a pretty simple button that is marked up like this:

```
<a href="#" class="common_cta buttons send_inquiry">
    <span>Back to homepage</span>
</a> 
```

The computed style of the `<a>` element looks like this: [http://pastebin.com/u9q6BDHx](http://pastebin.com/u9q6BDHx)

The computed style of the `<span>` looks like this: [http://pastebin.com/P9mR7yHF](http://pastebin.com/P9mR7yHF)

Here's what it looks like in comparison, Windows vs. OSX:

![enter image description here](../Images/cecc4e0ad9b8bc9f5191d27cbd098c64.png)

As you can see, there's a one pixel discrepancy between Windows and everything else. The designers are requiring that this be a pixel-perfect implementation and I have no idea how to fix the problem specifically for OSX.

How can I fix this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:33:25.240

o您会发现每个浏览器在处理 CSS 的方式上至少会略有不同。例如，我公司的网站使用了一些疯狂的 SEO“技巧”，以使 Goggle 与用户看到信息的位置相比，在页面中获得更高的部分。因此，我编写的一些 CSS 需要针对特定​​浏览器进行调整。

我相信您正在寻找的是类似于以下内容的内容，允许使用每个浏览器的单独样式：

```
.win.ie .buttons {padding:3px 5px;}
.mac.gecko .buttons {padding:4px 5px;}
.chrome .buttons {padding:4px 6px;}
.win.gecko .buttons{padding:4x 6px;} 
```

# google-maps - Google 地图和 Internet Explorer 8 错误 onunload="GUnload()

> ID：10255398
> 
> 赞同：0
> 
> 时间：2012-04-21T01:26:55.997
> 
> 标签：google-maps, internet-explorer-8, onunload

每个人：

对不起，我是一个菜鸟，真的不知道如何解决这个问题：

当我从包含谷歌地图的页面导航离开时，我在 IE8 中遇到错误。

以下是错误详情

网页错误详情

**消息：预期对象行：37 字符：1 代码：0 URI：[http ://www.yogahunter.com/detail/little-yoga-studio-9.htm](http://www.yogahunter.com/detail/little-yoga-studio-9.htm)**

事实证明，第 37 行有以下行（当您查看源代码时）：

```
<body onload="load()" onunload="GUnload()"> 
```

我看到这是一个相当普遍的问题。有谁知道修复它？

我正在从查看源代码中发布相关页面的代码。提前致谢。

~~~~~~~~~~

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=7" />
<title>
Little Yoga Studio - Details -
Yoga Hunter Directory
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="/templates/BusinessBlue-v4.2/style/main.css" />
<link rel="stylesheet" type="text/css" href="/templates/BusinessBlue-v4.2/style/fileuploader.css" />
<meta name="keywords" content="little yoga studio,lake arrowhead yoga studios" />
<meta name="description" content="&lt;p&gt;Little Yoga Studio Teaching in the Iyengar tradition, The Little Yoga Studio promotes health, life and happiness. Located near Lake Arrowhead in the San Bernardino Mountains of Southern Calfornia, we offer a complete Yoga Center, 12 Weekly classes, rope wall and Iyengar Certified Instuctors.&lt;/p&gt;" />
<meta name="author" content="Yoga Hunter" />
<meta name="copyright" content="Copyright (c) 1997 - 2012 by Srisuda Romero. All rights reserved!" />
<script src="/javascripts/jquery-1.3.2.min.js"></script>
<script src="/javascripts/ajaxupload.js" type="text/javascript"></script>
<script src="/javascripts/jquery/jquery-ui-1.7.2.custom.min.js"></script>
<script type="text/javascript" src="/javascripts/jquery.validate.js"></script>
<link rel="stylesheet" type="text/css" href="/templates/BusinessBlue-v4.2/style/jcarousel.css" />
<script type="text/javascript" src="/javascripts/jquery/jquery.jcarousel.min.js"></script> 
<script type="text/javascript" src="/javascripts/flowplayer-3.2.6.min.js"></script>
<script type="text/javascript">
            jQuery.noConflict();
        </script>
<script type="text/javascript" src="/javascripts/formtool/formtool.js"></script>
<script type="text/javascript" src="/javascripts/prototype/prototype.js"></script>
<script type="text/javascript" src="/javascripts/scriptaculous/scriptaculous.js"></script>
<script type="text/javascript" src="/javascripts/thickbox/thickbox.js"></script>
<link rel="stylesheet" href="/javascripts/thickbox/ThickBox.css" type="text/css" media="screen" />
<link rel="stylesheet" href="/javascripts/fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
<script type="text/javascript" src="/javascripts/categ_selection/categ_selection.js"></script>
<script type="text/javascript">
        var valid_obj = new Object();
    </script>
</head>
<body onload="load()" onunload="GUnload()">
<script type="text/javascript"> 

function increase_height() {
   height = parseInt(document.getElementById('slide').style.marginTop);
   if (height<110) {
      document.getElementById('slide').style.marginTop = eval(height+2)+"px";
      setTimeout("increase_height()",0.0001);
   } else {
      document.getElementById('panel').style.zIndex = 200;
   }
}

function decrease_height() {
   height = parseInt(document.getElementById('slide').style.marginTop);
   document.getElementById('panel').style.zIndex = -1;
   if (height>0) {
      document.getElementById('slide').style.marginTop = eval(height-2)+"px";
      setTimeout("decrease_height()",0.0001);
   }
}

function show_panel() {

   height = parseInt(document.getElementById('slide').style.marginTop);
   if (height>0) {
      decrease_height();
   } else {
      increase_height();
   }
   return false;
}

function ajaxFunction()
{

var xmlHttp;

try
  {
  // Firefox, Opera 8.0+, Safari
  xmlHttp=new XMLHttpRequest();
  }
catch (e)
  {
  // Internet Explorer
  try
    {
    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
    }
  catch (e)
    {
    try
      {
      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    catch (e)
      {
      alert("Your browser does not support AJAX!");
      return false;
      }
    }
  }
  xmlHttp.onreadystatechange=function()
    {
    if(xmlHttp.readyState==4)
      {
      }
    }
   var url = "http://www.yogahunter.com/update_session.php";

   xmlHttp.open("POST", url, false);
   xmlHttp.setRequestHeader( 
    'Content-Type', 
    'application/x-www-form-urlencoded; charset=UTF-8' 
); 
   xmlHttp.send('url='+window.location);
  }
</script>
</script>
<script type="text/javascript"> 
jQuery(function($) {
    $(document).ready(function(){

                                    jQuery.validator.messages.required = "This field is required.";
                                                jQuery.validator.messages.remote = "Please fix this field.";
                                                jQuery.validator.messages.email = "Invalid email address format.";
                                                jQuery.validator.messages.url = "Invalid URL.";
                                                jQuery.validator.messages.date = "Invalid date format.";
                                                jQuery.validator.messages.dateISO = "Please enter a valid date (ISO).";
                                                jQuery.validator.messages.dateDE = "Bitte geben Sie ein gültiges Datum ein.";
                                                jQuery.validator.messages.number = "Required numeric field.";
                                                jQuery.validator.messages.numberDE = "Bitte geben Sie eine Nummer ein.";
                                                jQuery.validator.messages.digits = "Required integer field.";
                                                jQuery.validator.messages.creditcard = "Please enter a valid credit card number.";
                                                jQuery.validator.messages.equalTo = "Please enter the same value again.";
                                                jQuery.validator.messages.accept = "Please enter a value with a valid extension.";
                                                jQuery.validator.messages.maxlength = $.format("Please enter no more than {0} characters.");
                                                jQuery.validator.messages.minlength = $.format("Please enter at least {0} characters.");
                                                jQuery.validator.messages.rangelength = $.format("This field must have minimum {0} characters and maximum {1} characters..");
                                                jQuery.validator.messages.range = $.format("Please enter a value between {0} and {1}.");
                                                jQuery.validator.messages.max = $.format("Please enter a value less than or equal to {0}.");
                                                jQuery.validator.messages.min = $.format("Please enter a value greater than or equal to {0}.");

        function fireEvent(obj, evt) {
            var fireOnThis = obj;
            if (document.createEvent) {
                var evObj = document.createEvent('MouseEvents');
                evObj.initEvent(evt, true, false);
                fireOnThis.dispatchEvent(evObj);
            } else if (document.createEventObject) {
                fireOnThis.fireEvent('on'+evt);
            }
        }

                //valid obj isntantiated in header.tpl
                valid_obj.login_form = {
                debug: false,
                onKeyUp: true,
                onfocusout: false,
                errorElement: "span",
                errorClass: "errForm",
                submitHandler: function(form) {
                    // do other stuff for a valid form
                    if ($("#login_form").valid()) {
                        form.submit();
                    }
                },

                "rules": {user: {"required":true},pass: {"required":true}}, "messages": {}
        };

        $("#login_form").validate(valid_obj.login_form);

                var selects = $("#login_form").find("select");
                var crt;
                $.each(selects, function() {
                    crt = this.id;
                    if(typeof(valid_obj.login_form.rules[crt]) !== 'undefined') {
                        $("#"+crt).change(function() {
                          $(this).valid();
                        });
                    }
                });
    });
});
</script>
<script type="text/javascript"> 
jQuery(function($) {
    $(document).ready(function(){

                                    jQuery.validator.messages.required = "This field is required.";
                                                jQuery.validator.messages.remote = "Please fix this field.";
                                                jQuery.validator.messages.email = "Invalid email address format.";
                                                jQuery.validator.messages.url = "Invalid URL.";
                                                jQuery.validator.messages.date = "Invalid date format.";
                                                jQuery.validator.messages.dateISO = "Please enter a valid date (ISO).";
                                                jQuery.validator.messages.dateDE = "Bitte geben Sie ein gültiges Datum ein.";
                                                jQuery.validator.messages.number = "Required numeric field.";
                                                jQuery.validator.messages.numberDE = "Bitte geben Sie eine Nummer ein.";
                                                jQuery.validator.messages.digits = "Required integer field.";
                                                jQuery.validator.messages.creditcard = "Please enter a valid credit card number.";
                                                jQuery.validator.messages.equalTo = "Please enter the same value again.";
                                                jQuery.validator.messages.accept = "Please enter a value with a valid extension.";
                                                jQuery.validator.messages.maxlength = $.format("Please enter no more than {0} characters.");
                                                jQuery.validator.messages.minlength = $.format("Please enter at least {0} characters.");
                                                jQuery.validator.messages.rangelength = $.format("This field must have minimum {0} characters and maximum {1} characters..");
                                                jQuery.validator.messages.range = $.format("Please enter a value between {0} and {1}.");
                                                jQuery.validator.messages.max = $.format("Please enter a value less than or equal to {0}.");
                                                jQuery.validator.messages.min = $.format("Please enter a value greater than or equal to {0}.");

        function fireEvent(obj, evt) {
            var fireOnThis = obj;
            if (document.createEvent) {
                var evObj = document.createEvent('MouseEvents');
                evObj.initEvent(evt, true, false);
                fireOnThis.dispatchEvent(evObj);
            } else if (document.createEventObject) {
                fireOnThis.fireEvent('on'+evt);
            }
        }

                //valid obj isntantiated in header.tpl
                valid_obj.search_form = {
                debug: false,
                onKeyUp: true,
                onfocusout: false,
                errorElement: "span",
                errorClass: "errForm",
                submitHandler: function(form) {
                    // do other stuff for a valid form
                    if ($("#search_form").valid()) {
                        form.submit();
                    }
                },

                "rules": {search: {"required":true}}, "messages": {}
        };

        $("#search_form").validate(valid_obj.search_form);

                var selects = $("#search_form").find("select");
                var crt;
                $.each(selects, function() {
                    crt = this.id;
                    if(typeof(valid_obj.search_form.rules[crt]) !== 'undefined') {
                        $("#"+crt).change(function() {
                          $(this).valid();
                        });
                    }
                });
    });
});
</script>
<div class="page">
<div class="header">
<div class="center">
<div class="headerLogo">
<a href="/"><img src="/templates/BusinessBlue-v4.2/images/yoga_logo_green.jpg" border="0" width="980" height="85" alt="Yoga Hunter Logo" /></a>
</div>
</div>
</div>
<div class="hMenuContainer"><ul id="nav"><li><a href="/">Home</a></li><li><a href="/submit.php" title="Submit your link to the directory">Add Your Site - It's FREE</a></li><li><a href="/submit_article.php" title="Submit your article to the directory">Submit Article</a></li><li><a href="/index.php?list=latest" title="Browse latest submitted links">Newest Sites</a></li><li><a href="/index.php?list=latestarticles" title="Browse latest articles">Newest Articles</a></li><li><a href="/contact.php" title="Contact directory owner">Contact</a></li><li><a href="/search.php?type=advanced" title="Go to advanced search page" accesskey="4" rel="nofollow">Advanced Search</a></li></ul></div><div class="menu_bottom"><div style="width:960px; margin:auto;"><form class="headerSearch" action="/index.php" method="get" id="search_form"><input class="searchInput" type="text" name="search" maxlength="250" value="" /><button class="searchBtnCenter" type="submit">SEARCH</button></form><ul id="nav_bottom"><li><a href="/profile.php?mode=register" title="Register">Register</a></li><li><span class="slash">|</span></li><li><a href="/login.php" class="btn-slide">Login</a></li></ul></div></div></div><div class="path"><a href="/" style="font-weight: bold;">Yoga Hunter</a> <img src="/templates/BusinessBlue-v4.2/images/pathArrow.gif" alt=" - " /> <a href="/usys/" title="Yoga Studios In The United States">Yoga Studios In The United States</a>&nbsp;<img src="/templates/BusinessBlue-v4.2/images/pathArrow.gif" alt=" - " />&nbsp;<a href="/usys/californiays/" title="California Yoga Studios">California Yoga Studios</a>&nbsp;<img src="/templates/BusinessBlue-v4.2/images/pathArrow.gif" alt=" - " />&nbsp;Listing Details</div><div class="center1"><div class="centerContainer"><div class="centerContainerM">
<script type="text/javascript"> 
jQuery(document).ready(function() {
jQuery('#mycarousel').jcarousel({
        visible: 4
    });

});
</script><h1>Little Yoga Studio of Agua Fria,, CA</h1>26898 Hwy 189, Agua Fria,, CA 92317<br>Phone: 909-336-6703<table border="0" width="680"><tr><td class="label_detail" style="padding-top: 25px;">Preview:</td><td class="smallDesc" align="left" style="padding-top: 25px;"><img src="/images/screenshots/9-346x260.jpg" alt="screenshot of Little Yoga Studio" border="0"/> </td></tr><tr><td class="label_detail">Studio Name:</td><td class="smallDesc" align="left"><span class="link" id="edittitle">Little Yoga Studio</span></td></tr><tr><td class="label_detail">Category:</td><td class="smallDesc" align="left"><a href="http://www.yogahunter.com/usys/californiays/" title="California Yoga Studios">Yoga Studios In The United States: California Yoga Studios</a></td></tr><tr><td class="label_detail">Description:</td><td class="smallDesc" align="left" id="editdescrip_9"><p>Little Yoga Studio Teaching in the Iyengar tradition, The Little Yoga            Studio promotes health, life and happiness. Located near Lake  Arrowhead            in the San Bernardino Mountains of Southern Calfornia, we  offer a complete            Yoga Center, 12 Weekly classes, rope wall and Iyengar  Certified Instuctors.</p></td></tr><tr><td class="label_detail" colsa[>Address:</td><td class="smallDesc" align="left" colspan="2">26898 Hwy 189</td></tr><tr><td class="label_detail" colsa[>City:</td><td class="smallDesc" align="left" colspan="2">Agua Fria,</td></tr><tr><td class="label_detail" colsa[>State:</td><td class="smallDesc" align="left" colspan="2">CA</td></tr><tr><td class="label_detail" colsa[>Postal Code:</td><td class="smallDesc" align="left" colspan="2">92317</td></tr><tr><td class="label_detail" colsa[>Phone Number:</td><td class="smallDesc" align="left" colspan="2">909-336-6703</td></tr><tr><td class="smallDesc" align="left" colspan="2">
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> 
</script>
<script type="text/javascript"> 
var geocoder;
var map;
  function load() {
    geocoder = new google.maps.Geocoder();
    var address = '26898 Hwy 189,Agua Fria,,CA';
geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,

            position: results[0].geometry.location,
            title:"Little Yoga Studio"
        });

         contentString = '<b>Little Yoga Studio <br>26898 Hwy 189<br> Agua Fria,<br> CA<br> 92317<br> 909-336-6703</b>';

    var infowindow = new google.maps.InfoWindow({
        content: contentString

    });

    infowindow.open(map,marker);
         map.panBy(10,-80); 

      } else {

      }
});

    var myOptions = {
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map"), myOptions);

  }

//]]>
</script>
<div id="map" style="margin:0px auto; width: 400px; height: 300px;"></div><br/><br/></div></td></tr><tr><td colspan="2"><div style="float: right;"></div></td></tr><tr><td colspan="2"><fieldset><legend>Ratings</legend><center><a href="/login.php" class="error">Please Login To Leave A Rating.</a><br><b>Average rating:</b> (0 votes)</fieldset></td></tr><tr><td colspan="2"><fieldset><legend>Reviews</legend><h3>No Reviews Yet.</h3><br><a href="/login.php" class="error">Please Log In To Leave a Comment.</a><br></fieldset></td></tr><tr><td colspan="2">&nbsp;</td></tr></table><script type="text/javascript">/* <![CDATA[ */var root = '';
   var a = document.getElementsByTagName("a");
   for(i = 0; i< a.length; i++)
      if(a[i].id != '')
         a[i].onclick = count_link;
   function count_link() {
      i = new Image();
      i.src= root+'/cl.php?id='+this.id;
      return true;
   }

   /* ]]> */</script>
<div style="clear: both"></div></ul></div><div class="centerContainerB"></div></div><div class="rightContainer">
<ul id="sortable_right" style="list-style-type: none; padding: 0px; margin: 0;">
<li class="widget_right">
<div class="box">
<div class="boxTopCenter">Latest articles</div>
<div class="boxMiddle">
<div class="boxSponsored" >
<a class="boxSponsoredA" href="/articles/the-differences-between-common-yoga-styles-407.htm" title="The Differences Between Common Yoga Styles">
The Differences Between Common Yoga Styles
</a>
<br/><br/>
</div>
<div class="boxSponsored" >
<a class="boxSponsoredA" href="/articles/teaching-yoga-in-jail-making-a-difference-through-yoga-406.htm" title="Teaching Yoga In Jail: Making A Difference Through Yoga">
Teaching Yoga In Jail: Making A Difference Through Yoga
</a>
<br/><br/>
</div>
<div class="boxSponsoredLast" >
<a class="boxSponsoredA" href="/articles/awakening-1.htm" title="Awakening">
Awakening
</a>
<br/><br/>
</div>
</div>
</div>
</li>
</ul>
</div>
<div style="clear: both; height: 30px;"></div></div><div class="footer"><div class="copy"><a href="http://www.phplinkdirectory.com" title="Directory Script by PHP Link Directory">Directory Script by PHP Link Directory</a><br /><a href="http://www.phpldclub.com" title="http://www.phpldclub.com">PhpLDClub - free templates for you</a></div></div><script type="text/javascript"> 

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-555555-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></body></html> 
```

~~~~~~~~~~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:54:15.497

Maps Version3 中没有功能 GUnload。

`onunload="GUnload()"`从 body-tag 中删除

GUnload 功能已在 v2 中实现，以防止内存泄漏。

# data-mining - 网络用户测量过程

> ID：10255399
> 
> 赞同：1
> 
> 时间：2012-04-21T01:27:20.787
> 
> 标签：data-mining, classification, web-analytics, user-tracking

如何获得网站用户的高精度分析？是分类问题吗？访问网站的用户如何获得年龄、性别和工作等属性？例如，Quantcast Measurement 向网站所有者提供此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:29:07.460

访问网站只会显示一些统计信息，例如 IP 地址和[浏览器设置](https://panopticlick.eff.org/)。由例如 Quantcast Measurement 显示的人口统计数据（年龄、性别、工作）是使用[大量](http://www.tvweek.com/news/2008/09/quantcast_delves_into_demograp.php)互联网用户推断出来的。将网站访问信息与来自用户面板的数据相结合，可以更深入地了解访问您网站的用户。这些信息当然不完全准确（因为您只有一小部分访问者在面板上），但它会给出一个很好的近似值。

# eclipse - 关于在 Eclipse 上优化 EGit 的建议

> ID：10255403
> 
> 赞同：6
> 
> 时间：2012-04-21T01:27:46.767
> 
> 标签：eclipse, git, egit

我在相当大和复杂的 Java 项目集（超过一百万行代码）和十年的历史中使用 EGit。
在这里，我遇到了 EGit 的严重性能问题，因为即使 Java 文件中的一小行更改也会导致 EGit 重新索引几分钟，这会减慢整个系统的速度。事实上，即使是 git 命令行也有点慢，因为“git status”从命令行需要大约一分钟，但我可以忍受这个性能问题和 EGit 提交对话框缓慢问题（[链接](https://bugs.eclipse.org/bugs/show_bug.cgi?id=327913)）。因为我可以使用 git 命令行来提交和更新，但我不想权衡我的 Eclipse 性能，因为这会影响生产力。

以下是我通过谷歌搜索并询问周围人所尝试的方法：

1.  在排除文件中添加了所有类文件夹。确实尝试暂时将类文件夹放在 .gitignore 中。
2.  通过将机器保持开启一天，给 Egit 足够的时间来完成索引。
3.  Git staging、history 和所有其他 Eclipse 视图在进行开发时在 Eclipse 工作台中关闭。
4.  做了“git gc” - 它对命令行性能产生了影响，但对 EGit 几乎没有任何影响。
5.  Git 的未选中标签装饰器。首选项 -> 常规 -> 外观 -> 标签装饰。
6.  从路径中删除了 cygwin，正如论坛中某处所读到的那样，JGit 可能正在使用 cygwin 进行路径转换。
7.  在 Eclipse 中将窗口缓存从 10 增加到 70m（首选项 -> 团队 -> Git -> 窗口缓存）。

PS：Git 仓库指向 svn 远程仓库。另外，我是 git 新手，所以可能在设置中犯了一些错误，所以请随时指出任何事情。

这是我的系统信息，我没有太多花哨的硬件规格，但有一些可用的 RAM (8GB)。

*   git-gui 版本 0.16 gitguid
*   git版本：1.7.10.mysysgit.1
*   JDK 1.6_025
*   Eclipse版本：3.7.2 Java EE版本带参数-Xms1536m -Xmx1536m
*   EGit：1.3.0.201202151440
*   Windows 7 处理器：Core 2 Duo 2.6GHZ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:14:34.640

这可能不是你的问题，但这个页面出现在谷歌上关于 egit 性能。一旦性能问题的根源是未跟踪（索引？）文件。确保本地目录树中没有大量未跟踪的文件，因为这会严重影响 egit 性能。我删除了一个拥有 10K + 文件的 Director，提交性能从打开提交对话框需要 1 分钟以上变为需要几秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:36:15.423

这就是CVCS（集中式VCS）和DVCS（分布式）VCS之间的问题：

*   一个 SVN 存储库可以包含 GB 的数据。
*   Git 存储库应该保持较小，并利用[子模块](http://book.git-scm.com/5_submodules.html)通过多个 Git 存储库来表示。

我怀疑很多回购可能比一个巨大的 Git 回购表现更好。否则，同步问题就会开始发生，例如[bug 323839](https://bugs.eclipse.org/bugs/show_bug.cgi?id=323839)。

但这意味着通过一个 SVN 工作区手动管理 Git 存储库和一个 SVN 存储库之间的（简化）同步，您从该工作区复制到您的 Git 存储库，或者将 Git 存储库新的演变复制回 SVN 工作区以提交在。

# html - 垂直对齐包装

> ID：10255405
> 
> 赞同：2
> 
> 时间：2012-04-21T01:28:10.143
> 
> 标签：html, css, center, vertical-alignment

我无聊地在一个网站上乱搞，并试图弄清楚如何垂直对齐我的包裹，但我在大声笑中失败了。我已经水平对齐它，只需要帮助垂直对齐它。（是的，我尝试过垂直对齐：中间，但它不起作用）。

```
 * { margin:0;  padding:0; }
    html { height:100%; }
    body { background:/*url(images/bg.jpg)*/#14181a; }
    #wrap { width:960px;  height:55%;  margin:0 auto;  background:#293033; }

    <div id="wrap">
    <div id="logo"></div>
    <div id="navgation"></div>
    <div id="content"></div>
    <div id="footer"></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:55:17.817

如果您不必支持较旧的浏览器，则可以使用显示框。我有以下课程：

```
.vertically_centered {
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-pack: center;
  -webkit-box-align: center;

  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-pack: center;
  -moz-box-align: center;

  display: box;
  box-orient: horizontal;
  box-pack: center;
  box-align: center;
} 
```

然后把任何东西都放在那里。由于您希望“wrap” div 垂直居中，请尝试将 vertical_centered 类分配给您的 body 元素。

有关使用灵活框的更多详细信息，您可能需要查看这篇文章：[http ://www.css3.info/introducing-the-flexible-box-layout-module/](http://www.css3.info/introducing-the-flexible-box-layout-module)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:52:23.170

如果要垂直对齐 div 对象，请使用 position:relative 和顶部值，如下所示：

```
#wrap {width:960px; height:55%; margin:0 auto; background:#293033; position:relative; top:20px;} 
```

如果您想将#wrap div 中的文本与特定的垂直对齐方式（例如动态上标）对齐，请在文本容器上使用 vertical-align：

```
#wrap span {font-size:14px; line-height:16px; vertical-align:2px;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T01:38:24.297

Vertical aligns can be accomplished using table layouts. You need an element displaying as a table-cell and it's parent should display as a table. Then you can add vertical alignment and it'll work.

First, here's a js fiddle showing it in action. It centers the contents of the wrap inside the wrap! (if I misunderstood and you need to center the wrap itself, just ask and I'll edit) [http://jsfiddle.net/YWdDC/1/](http://jsfiddle.net/YWdDC/1/)

```
 * { margin:0;  padding:0; }
    html { height:100%; }
    .wrap-wrapper {
        background: url('images/bg.jpg') #14181a;
        display: table;
     }
    .wrap {
        width:960px;
        height:300px;
        margin:0 auto;
        background:#293033;
        display: table-cell;
        vertical-align: middle;
    }​

    <div class="wrap-wrapper">
        <div class="wrap">
            <div id="logo">Logo</div>
            <div id="navgation">Nav</div>
            <div id="content">Content</div>
            <div id="footer">Footer</div>
        </div>
    </div>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T02:11:49.053

您的问题正是[这篇文章](http://phrogz.net/css/vertical-align/index.html)中讨论的问题。

> 方法一
> 
> 下面的例子做了两个（非平凡的）假设。如果您可以满足这些假设，那么此方法适合您：
> 
> 1.  您可以将要居中的内容放在块内，并为该内部内容块指定固定高度。
> 2.  可以绝对定位此内容。（通常很好，因为内容居中的父元素仍然可以流动。
> 
> 如果您能接受以上必需品，解决办法是：
> 
> 1.  将父容器指定为 position:relative 或 position:absolute。
> 2.  在子容器上指定一个固定高度。
> 3.  在子容器上设置 position:absolute 和 top:50% 以将顶部向下移动到父容器的中间。
> 4.  设置 margin-top:-yy ，其中 yy 是子容器高度的一半以向上偏移项目。
> 
> ...
> 
> 方法二
> 
> 此方法要求您能够满足以下条件：
> 
> 1.  您只有一行要居中的文本。
> 2.  您可以为父元素指定固定高度。
> 
> 如果您能接受以上必需品，解决办法是：
> 
> 1.  将父元素的 line-height 设置为您想要的固定高度。

我发现方法 2 通常是垂直对齐的最简单和最一致的方法，尽管它仅限于单行，这通常很好，因为我的大多数垂直对齐需求都是针对无论如何只需要一行的菜单项。

# java - Java Servlet 中的 PostgreSQL 连接以从数据库中检索信息。出现错误

> ID：10255410
> 
> 赞同：1
> 
> 时间：2012-04-21T01:28:23.030
> 
> 标签：java, postgresql, connect

我很难完成这项工作。我可以毫无问题地连接到数据库，但是我无法让它显示 html 页面。它不运行。

```
import java.io.*;
import java.sql.*;
import java.text.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class ShowBedrock extends HttpServlet 
{
    public String getServletInfo()
    {
       return "Servlet connects to PostgreSQL database and displays result of a SELECT";
    }

    private Connection dbcon;  // Connection for scope of ShowBedrock

    // "init" sets up a database connection
    public void init(ServletConfig config) throws ServletException
    {
        String loginUser = "postgres";
        String loginPasswd = "supersecret";
        String loginUrl = "jdbc:postgresql://localhost/bedrock";

        // Load the PostgreSQL driver
        try 
        {
              Class.forName("org.postgresql.Driver");
              dbcon = DriverManager.getConnection(loginUrl, loginUser, loginPasswd);
        }
        catch (ClassNotFoundException ex)
        {
               System.err.println("ClassNotFoundException: " + ex.getMessage());
               throw new ServletException("Class not found Error");
        }
        catch (SQLException ex)
        {
               System.err.println("SQLException: " + ex.getMessage());
        }
    }

    // Use http GET

    public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws IOException, ServletException
    {
        response.setContentType("text/html");    // Response mime type

        // Output stream to STDOUT
        PrintWriter out = response.getWriter();

        out.println("<HTML><Head><Title>Bedrock</Title></Head>");
        out.println("<Body><H1>Bedrock</H1>");

        try
        {
                // Declare our statement
                Statement statement = dbcon.createStatement();

                String query = "SELECT name, dept, ";
                query +=       "       jobtitle ";
                query +=       "FROM   employee ";

                // Perform the query
                ResultSet rs = statement.executeQuery(query);

                out.println("<table border>");

                // Iterate through each row of rs
                while (rs.next())
                {
                   String m_name = rs.getString("name");
                   String m_dept = rs.getString("dept");
                   String m_jobtitle = rs.getString("jobtitle");
                   out.println("<tr>" + 
                               "<td>" + m_name + "</td>" +
                               "<td>" + m_dept + "</td>" +
                               "<td>" + m_jobtitle + "</td>" +
                               "</tr>");
                }

                out.println("</table></body></html>");
                statement.close();
        }
        catch(Exception ex)
        {
                out.println("<HTML>" +
                            "<Head><Title>" +
                            "Bedrock: Error" +
                            "</Title></Head>\n<Body>" +
                            "<P>SQL error in doGet: " +
                            ex.getMessage() + "</P></Body></HTML>");
                return;
        }
        out.close();
    }
} 
```

我收到以下错误任何人都知道为什么？：

```
javax.servlet.ServletException: Class not found Error
    ShowBedrock.init(ShowBedrock.java:42)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Unknown Source)

note The full stack trace of the root cause is available in the Apache Tomcat/6.0.35 logs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:46:24.487

> 我收到以下错误任何人都知道为什么？

您收到该错误正文的原因是您的处理程序`ClassNotFoundException`正在**丢弃**原始异常堆栈跟踪。您正在将原始异常的消息写入`System.err`但（显然）不会进入正常系统日志。（您可能会在“catalina.out”文件中找到该消息……取决于 Tomcat 的配置/启动方式。）

正确的方法是链接异常；例如

```
 throw new ServletException("Class not found Error", e); 
```

或在您捕获它时明确记录它。如果您明确记录它，请确保记录异常，而不仅仅是异常消息。

* * *

除非我们看到原始异常堆栈跟踪，否则我们无法告诉您问题的实际根本原因......但两个最可能的原因是：

*   类加载器找不到需要的类；例如，因为 JAR 文件不在正确的位置。
*   在您尝试加载的类的初始化期间，某些类的类初始化失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:33:35.897

Tomcat 期望您的 servlet 位于一个包中。您的似乎在默认包中；请添加一个并重新编译。我敢打赌，到时候你会变得更好。

Tomcat 6 和 7 期望在服务器 /lib 目录中找到 JDBC JAR。将 PostgreSQL JDBC JAR 添加到服务器 /lib 位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:39:03.213

Seem you did't add Postgresql JDBC driver into classpath, as the following error suggest:

```
javax.servlet.ServletException: Class not found Error 
```

Which is origin from:

```
throw new ServletException("Class not found Error"); 
```

You can [download](http://jdbc.postgresql.org/download.html) Postgresql JDBC driver and put in `PROJECT/WEB-INF/lib` folder.

**Suggestion**

One suggestion, your exception handling is wrong, you should change

```
throw new ServletException("Class not found Error"); 
```

to

```
throw new ServletException("Class not found Error", e); 
```

# java - 如何增加数组的长度

> ID：10255411
> 
> 赞同：23
> 
> 时间：2012-04-21T01:28:24.263
> 
> 标签：java, arrays

我有一个快速的问题。我在java中有一个整数数组，它需要它的长度在整个类中变化。具体来说，我需要它在某些情况下增加一。我试过这样。

```
 sbgHeadX = new int[ numberOfSBG ]; 
```

我会在需要时增加整数变量 numberOfSBG，但我认为这行不通。还有其他方法吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-21T01:33:04.383

如果您不想或不能使用 ArrayList，那么有一个实用方法：

```
Arrays.copyOf() 
```

这将允许您指定新的大小，同时保留元素。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-21T01:34:32.117

Java 中的数组具有在声明时指定的固定大小。要增加数组的大小，您必须创建一个更大的新数组并将所有旧值复制到新数组中。

前任：

```
char[] copyFrom  = { 'a', 'b', 'c', 'd', 'e' };
char[] copyTo    = new char[7];

System.out.println(Arrays.toString(copyFrom));
System.arraycopy(copyFrom, 0, copyTo, 0, copyFrom.length);
System.out.println(Arrays.toString(copyTo)); 
```

或者，您可以使用动态数据结构，如列表。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-21T01:30:36.873

我建议您使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)，因为您不必再​​担心长度了。创建后，您无法修改数组大小：

> 数组是一个容器对象，它包含固定数量的单一类型的值。数组的长度是在创建数组时确定的。创建后，它的长度是固定的。

（[来源](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-19T09:30:39.607

第一件事：

*   在 Java 中，一旦创建了一个数组，它的长度就是固定的。数组无法调整大小。
*   您可以将数组的元素复制到具有不同大小的新数组中。最简单的方法是使用其中一种[`Arrays.copyOf()`](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOf-T:A-int-)方法。
*   如果您需要可变大小的集合，最好使用 an[`ArrayList`](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)而不是数组。

话虽如此，在某些情况下，您可能别无选择，只能更改在代码之外某处创建的数组的大小。¹唯一的方法是操作创建数组的代码的生成字节码。

### 概念验证

下面是一个小型的概念验证项目，它使用 Java[工具](https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/package-summary.html)来动态更改数组²的大小。示例项目是一个maven项目，结构如下：

```
.
├─ pom.xml
└─ src
   └─ main
      └─ java
         └─ com
            └─ stackoverflow
               └─ agent
                  ├─ Agent.java
                  └─ test
                     └─ Main.java 
```

**`Main.java`**

这个文件包含我们要操作字节码的目标类：

```
package com.stackoverflow.agent.test;

import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        String[] array = {"Zero"};

        fun(array);

        System.out.println(Arrays.toString(array));
    }

    public static void fun(String[] array) {
        array[1] = "One";
        array[2] = "Two";
        array[3] = "Three";
        array[4] = "Four";
    }
} 
```

在该`main`方法中，我们创建了一个`String`大小为 1 的数组。在该`fun`方法中，在数组边界之外分配了 4 个附加值。按原样运行此代码显然会导致错误。

**`Agent.java`**

该文件包含将执行字节码操作的类：

```
package com.stackoverflow.agent;

import java.lang.instrument.ClassFileTransformer;
import java.lang.instrument.Instrumentation;
import java.security.ProtectionDomain;

public class Agent {
    public static void premain(String args, Instrumentation instrumentation) {
        instrumentation.addTransformer(new ClassFileTransformer() {
            public byte[] transform(ClassLoader l, String name, Class<?> c,
                    ProtectionDomain d, byte[] b) {

                if (name.equals("com/stackoverflow/agent/test/Main")) {
                    byte iconst1 = (byte) 0x04;
                    byte iconst5 = (byte) 0x08;
                    byte anewarray = (byte) 0xbd;

                    for (int i = 0; i <= b.length - 1; i++) {
                        if (b[i] == iconst1 && b[i + 1] == anewarray) {
                            b[i] = iconst5;
                        }
                    }

                    return b;
                }

                return null;
            }
        });
    }
} 
```

在字节码层面，类中`String`数组的创建`Main`由两个命令组成：

*   [`iconst_1`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.iconst_i)，它将`int`值为 1 的常量压入堆栈 ( `0x04`)。
*   [`anewarray`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.anewarray)，它弹出堆栈的值并创建一个相同大小的引用数组³ ( `0xbd`)。上面的代码在`Main`类中查找该命令组合，如果找到，则将`const_1`命令替换为`const_5`命令 ( `0x08`)，从而有效地将数组的维度更改为^(5。4)

**`pom.xml`**

maven POM 文件用于构建应用程序 JAR 并配置主类和 Java 代理类。⁵

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.stackoverflow</groupId>
  <artifactId>agent</artifactId>
  <version>1.0-SNAPSHOT</version>

  <build>
    <finalName>${project.artifactId}</finalName>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>3.1.1</version>
        <configuration>
          <archive>
            <manifestEntries>
              <Main-Class>com.stackoverflow.agent.test.Main</Main-Class>
              <Premain-Class>com.stackoverflow.agent.Agent</Premain-Class>
              <Agent-Class>com.stackoverflow.agent.Agent</Agent-Class>
              <Can-Retransform-Classes>true</Can-Retransform-Classes>
            </manifestEntries>
          </archive>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

### 构建和执行

可以使用标准`mvn clean package`命令构建示例项目。

在不引用代理代码的情况下执行将产生预期的错误：

```
$> java -jar target/agent.jar 
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
        at com.stackoverflow.agent.test.Main.fun(Main.java:15)
        at com.stackoverflow.agent.test.Main.main(Main.java:9) 
```

使用代理代码执行时将产生：

```
$> java -javaagent:target/agent.jar -jar target/agent.jar
[Zero, One, Two, Three, Four] 
```

这表明使用字节码操作成功地更改了数组的大小。

* * *

^(¹这种情况出现在[这里](https://stackoverflow.com/questions/12000604/java-reflection-editing-array-length)和[这里](https://stackoverflow.com/questions/53844279/modify-array-size-passed-as-argument-to-method-in-java)的问题，后者促使我写下这个答案。
²从技术上讲，示例项目不会调整数组的大小。它只是使用与代码中指定的大小不同的大小创建它。实际上，在保持其引用并复制其元素的同时调整现有数组的大小会稍微复杂一些。
³对于原始数组，相应的字节码操作将改为[`newarray`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.newarray)( )。⁴如前所述，这只是一个概念证明（而且是一个非常老套的证明）。代替随机替换字节，更健壮的实现可以使用像[ASM这样的字节码操作库](https://asm.ow2.io/)`0xbc`
^(在任何或命令之前插入一个[`pop`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.pop)命令，然后是一个命令。可以在[对此答案](https://stackoverflow.com/a/12000695)的评论中找到有关该解决方案的更多提示。⁵在现实世界的场景中，代理代码显然会在一个单独的项目中。[`sipush`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.sipush)[`newarray`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.newarray)[`anewarray`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.anewarray))) 

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-13T07:22:39.257

您可以使用 ArrayList。数组具有固定数量的大小。

这个[例子](http://www.java2novice.com/java-interview-programs/arraylist-implementation/)可以帮助你。该示例的输出非常简单。

```
输出：
2 5 1 23 14

新长度：20

索引 5:29 处的元素

列表大小：6

删除索引 2 处的元素：1

2 5 23 14 29

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-21T01:30:17.137

根据定义，数组是固定大小的。您可以使用 Arraylist 来代替，即“动态大小”数组。实际上发生的情况是虚拟机“调整大小”* ArrayList 公开的数组。

[也可以看看](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)

*使用备份数组

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-16T12:35:56.823

数组长度更改方法示例（旧数据处理）：

```
static int[] arrayLengthChange(int[] arr, int newLength) {
    int[] arrNew = new int[newLength];
    System.arraycopy(arr, 0, arrNew, 0, arr.length);
    return arrNew;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-13T07:13:48.507

```
Item[] newItemList = new  Item[itemList.length+1];
    //for loop to go thorough the list one by one
    for(int i=0; i< itemList.length;i++){
        //value is stored here in the new list from the old one
        newItemList[i]=itemList[i];
    }
    //all the values of the itemLists are stored in a bigger array named newItemList
    itemList=newItemList; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-18T12:54:18.877

如果未在堆内存中声明数组，则无法增加数组的长度（请参见下面的代码，用户询问第一个数组输入，然后询问您要增加多少数组并复制先前的数组元素）：

```
#include<stdio.h>
#include<stdlib.h>

int * increasesize(int * p,int * q,int x)
{
    int i;
    for(i=0;i<x;i++)
    {
         q[i]=p[i];
    }
    free(p);
    p=q;
    return p;
}
void display(int * q,int x)
{
    int i;
    for(i=0;i<x;i++)
    {
        printf("%d \n",q[i]);

    }
}

int main()
{
    int x,i;
    printf("enter no of element to create array");
    scanf("%d",&x);
    int * p=(int *)malloc(x*sizeof(int));
    printf("\n enter number in the array\n");
    for(i=0;i<x;i++)
    {
        scanf("%d",&p[i]);
    }
    int y;
    printf("\nenter the new size to create new size of array");
    scanf("%d",&y);
    int * q=(int *)malloc(y*sizeof(int));
    display(increasesize(p,q,x),y);
    free(q);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-16T11:56:05.640

回答您的问题而不说“使用 ArrayList”之类的东西，这可能并不总是一种选择，特别是当您想要最佳性能时：

没有本地方法可以做到这一点，但你可以使用类似这样的东西：

```
int[] newArray = new int[oldArray.length + 1];
System.arrayCopy(oldArray, 0, newArray, 0, oldArray.length);
oldArray = newArray; 
```

就是这样，最后一个位置可以免费使用。请注意，您可以将“1”更改为任何您喜欢的数字。如果您重复使用它，您也可以使用此代码创建一个方法。

# php - 如何显示在线测验的结果（没有 java/sql，纯 php）？

> ID：10255413
> 
> 赞同：1
> 
> 时间：2012-04-21T01:29:24.483
> 
> 标签：php, multidimensional-array

我从逗号分隔的文本文件**data.txt开始**

> 什么是熊猫？,动物,植物,家庭成员,老师
> 什么是魔方？,拼图,迷宫,盒子,博物馆
> HTML是...,网页的主要标记语言,交叉-站点安全,巧妙的结构化脚本,极其安全和安全
> 的PHP是...,通用服务器端脚本语言,跨站点安全,处理超文本产品,处理HTML漂亮

我从文本文件中加载了我的问题，我的**main.php**看起来像这样

```
<h2>MasterQuiz Online</h2>
<p>Where would you like to go?</p>

<ul>
    <li><a href='question.php'>Take quiz</a></li>
    <li><a href='module.php'>Admin Module</a></li>
</ul>

<?php
//text file
$file = fopen('data.txt', 'r');
//array setup
$array = array();
while ($line = fgetcsv($file)) {
   $array[] = $line;
}

fclose($file);

session_start();
$_SESSION["questions_array"]=$array;

//display var and index
var_dump($array);

?> 
```

虽然这是我的**question.php**的样子

```
<h2>Online Quiz</h2>

<form action="answer.php" method="post">

<?php

session_start();
if(sizeof($_SESSION['questions_array']) > 0 )
{
    // Get the next question off of the quiz in session
    $data = array_shift($_SESSION["questions_array"]);

    echo '<p>'.array_shift($data).'</p>'; // next question
    //shuffle($data); //shuffle choices, toggle if needed

    foreach ($data as $a => $answer){ //answers
        echo 
             '<input type="radio" name="question-'.$data.'" id="question-'.$data.'"'.
             'value="'.$a.'"/>'.
             '<label for="question-'.$data.'">'.$answer.'</label>'.
             '<br>';
             }  
}
else{
  header('location:result.php'); //questions array is empty, go to results page
}
?>
<br>
<input type="submit" name="submit" value="Submit"/> 
```

基本上我需要两个结果页面。

一个是每次`submit`点击按钮时，用户都会被引导到另一个页面（**answer.php**），它会显示用户是否得到了正确的答案。还会显示一个继续按钮，以便用户可以继续下一个问题。

这就是我想要实现的目标：

> ## 问题结果
> 
> **CORRECT / INCORRECT** //取决于用户是否得到正确答案
> 
> **正确答案：** //插入正确答案
> **您的答案：** //插入用户选择的答案
> 
> （继续链接）

到目前为止，这就是我的**answer.php**的样子

```
<h2>Question Results</h2>

<?php

session_start();
$array=$_SESSION["questions_array"];

//insert whether correct or incorrect here

echo "Your answer:<br>";
echo "Correct answer:".$array[0][1];

?>
<br><br>
<a href="question.php">Continue</a> 
```

但它不起作用。我完全不知道为什么。给了我一些不同的`$array[0][1]`东西（我正在寻找的错误数组值），它在其他页面上给了我什么（我正在寻找的值）。

如果你们对我如何使我的代码更好和工作有任何建议，我将不胜感激！提前致谢！

第二个（如果这很长，我很抱歉，但我不想就同一个想法做单独的帖子）

我需要制作一个结果页面（**result.php**），一旦用户完成测验，就会显示整体结果。

*示例输出：*

![在此处输入图像描述](../Images/81dec2e01610876750a9d129e1e55c73.png)

老实说，我对如何做到这一点感到困惑，因为这是我第一次做这样的事情。

我的**结果.php**

```
<h2>Total Results</h2>

<?php

//table of results
echo "<table border='1'>
  <tr><th>Question</th><th>Your answer</th><th>Correct answer</th><th>Points</th></tr>
  <tr><td>Question#1</td><td>one</td><td>two</td><td>three</td></tr>
  <tr><td>Question#2</td><td>one</td><td>two</td><td>three</td></tr>
  <tr><td>Question#3</td><td>one</td><td>two</td><td>three</td></tr>
  <tr><td>Question#4</td><td>one</td><td>two</td><td>three</td></tr>
  <tr><td>Question#5</td><td>one</td><td>two</td><td>three</td></tr>
  <tr><th>Total Points</th></tr>
  </table>";

?>
<br>
<a href="p05_main.php">Back to homepage</a> 
```

表中的值只是暂时存在，因为它让我思考得更好。如果让任何人感到困惑，我很抱歉！

再次非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:47:02.987

如何使用 PHP fwrite() 函数将测验数据写入文件，然后使用 fopen() 和/或相关函数调用 results.php 页面上的数据：feof()、fgets/ fgetcsv() 等

# javascript - Web2py jQuery 克隆

> ID：10255415
> 
> 赞同：1
> 
> 时间：2012-04-21T01:29:29.573
> 
> 标签：javascript, jquery, python, web2py

我使用 jQuery 克隆表单中的字段。

```
$('#table_catalogues')
    .clone()
    .attr('id','table_catalogues_'+i2l)
    .appendTo('#table_invoices_catalogues__row') 
```

但是 web2py 不会创建这些字段，您无法在源代码中看到它们，并且在发送数据时我发现例如：

```
form.vars.catalogues = [1,2,3] 
```

其实我觉得很好，但是有这个

```
Field(
    'catalogues', 
    db.catalogues, 
    requires=IS_IN_DB(db(db.catalogues.user_id==auth.user_id)(db.catalogues.useable==True),
    'catalogues.id', 
    '%(catalogue_name)s'
), 
```

给我带来了麻烦。发送表单时，我总是收到此错误：

> 值不在数据库中

我尝试使用`IS_IN_SET()`并编写了一个函数来导出列表中的行，但出现此错误：

> 不允许值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:17:50.057

更改克隆对象的 ID 是不够的，您还需要更改 name 属性。如果您保持名称相同，则在发布表单时它将覆盖具有相同名称的原始字段。

# css - 跨度的 CSS 错误

> ID：10255417
> 
> 赞同：1
> 
> 时间：2012-04-21T01:29:54.137
> 
> 标签：css

我正在尝试使用跨度在表格内的某些文本旁边显示一个小图标。这是html代码：

```
<tr>
  <td>
    <span class="icon">&nbsp;</span>
    Bob Smith
  </td>
</tr> 
```

CSS 代码：

```
.icon
{
    cursor: pointer;
    background-position: left top;
    background-repeat: no-repeat;
    display: block;
    float:left;
    padding-left: 15px;
    background-image: url(../images/icon.png);
} 
```

我只想要一个小复选框图标（15x15px）显示在名称旁边，格式如下：

```
[icon]Bob Smith 
```

但是，现在它显示为：

```
[icon]           Bob Smith 
```

（即图标和文本之间有很多空白）

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:33:29.913

尝试`width`在`icon`类上显式设置 a ，例如：

```
.icon
{
    cursor: pointer;
    background-position: left top;
    background-repeat: no-repeat;
    float:left;
    width: 15px;
    height: 15px;
    background-image: url(../images/icon.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T01:37:14.083

html

```
<tr>
    <td>
        <span class="icon"></span> Bob Smith
    </td>
</tr> 
```

CSS 代码：

```
.icon {
    cursor: pointer;
    background: url(../images/icon.png) 0 0 no-repeat;
    display: block;
    float:left;
    width: 15px;
    height:15px;
    margin-right:4px;/*to put a slight buffer between icon and text*/
} 
```

# java - 如何从菜单发送电子邮件？

> ID：10255422
> 
> 赞同：1
> 
> 时间：2012-04-21T01:31:07.957
> 
> 标签：java, android, email

如何通过“菜单”按钮发送电子邮件？我用一个名为“发送”的选项膨胀了一个菜单。一旦按下它应该打开 Intent.ACTION_SEND 然后用户可以选择给我发送电子邮件。

我知道如何通过 Button 和 OnClickListener 来实现这一点。但不是通过菜单。下面粘贴的代码不起作用。我究竟做错了什么？

感谢您的时间。

自定义商店活动：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.customstore_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.send:

        Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("text/plain");
        i.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "myemail@myemail.com" });
        i.putExtra(Intent.EXTRA_SUBJECT, "Adding new shop to MinuteMap");
        i.putExtra(Intent.EXTRA_TEXT, "nll");
        // shopName + shopTimeM1);

        break;

    default:
        return super.onOptionsItemSelected(item);
    }
    return true;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:12:06.287

您可以使用以下代码:::

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_EMAIL, new String[] { "myemail@example.com" });
i.putExtra(Intent.EXTRA_SUBJECT, "Adding new shop to MinuteMap");
i.putExtra(Intent.EXTRA_TEXT, "nll"); 
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T03:25:58.590

试试这个代码，

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
            emailIntent.setType("text/html");
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                    new String[] { "abc@xyz.com" });

            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    "Subject of the Mail");
            emailIntent
                    .putExtra(
                            android.content.Intent.EXTRA_TEXT,
                            "This is my sample Mail");
            emailIntent.setType("vnd.android.cursor.dir/email");
            startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

# javascript - 如何在 Rails 3 中使用 ajax 请求请求 html 页面？

> ID：10255423
> 
> 赞同：3
> 
> 时间：2012-04-21T01:31:19.530
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-3

我正在尝试 Rails`.html.erb`在某些条件下通过 ajax 请求呈现模板。默认情况下，`.js.erb`当我发送 ajax 请求时，我会不断取回文件。

我不会解释为什么要这样做，但我想知道是否有一种方法可以指定何时通过 ajax 发送请求，我希望返回 html 内容而不是 js，或者，如果有在 Rails 3.1 中重构以下内容的方法：

```
respond_to do |format|
  format.html
  format.js do
    if params[:page].nil?
      render "home.html.erb"
    else
      render "home.js.erb"
    end
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:11:08.307

假设你使用的是 jquery，你可以设置 dataType 选项，即

```
$.ajax('some/page', {dataType: 'html'}) 
```

或者

```
$.get('some/page', function(){ //callback}, 'html') 
```

将格式添加到 URL（即请求'/some/page.html'）也应该有效（无论您如何提出请求）

# asp.net-mvc-3 - Asp.net mvc 3 - 从 viewModel 显示所需属性的视图不应该是

> ID：10255430
> 
> 赞同：1
> 
> 时间：2012-04-21T01:32:49.013
> 
> 标签：asp.net-mvc-3, validation

我有一个非常奇怪的问题

我有一个视图模型：

```
public class ServiceView
{
    [Required]
    [Display(Name = "Titre de l' annonce")]
    public string NomService { get; set; }

    [Required]
    [Display(Name = "Description")]
    public string DescriptionService { get; set; }

    [Display(Name = "Adresse")]
    public string AdresseService { get; set; }

    [Display(Name = "Le code postal")]
    public int CodePostalService { get; set; }

} 
```

和一个与我的 ViewModel 紧密相关的 View：

```
@model MeilleurPresta.Models.ViewModel.ServiceView

@{
    ViewBag.Title = "Déposer une offre";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="grid_23" id="body">

    <h3 style="padding-left: 50px"> Déposer une offre de Service </h3>

    <div style="margin-left: 50px">
        @using (Html.BeginForm()) {

            @Html.ValidationSummary(true)

            <div class="editor-label">
                @Html.LabelFor(model => model.NomService)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.NomService)
                @Html.ValidationMessageFor(model => model.NomService)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.DescriptionService)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.DescriptionService)
                @Html.ValidationMessageFor(model => model.DescriptionService)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.AdresseService)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.AdresseService)
                @Html.ValidationMessageFor(model => model.AdresseService)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.CodePostalService)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.CodePostalService)
                @Html.ValidationMessageFor(model => model.CodePostalService)
            </div>

            <p>
                <input type="submit" value="Create" />
            </p>
        }
    </div>
</div> 
```

我的控制器：

```
 public ActionResult Index()
    {
        return View();
    } 
```

没什么特别的，但是，当我提交表单时，在客户端验证时，它告诉我该字段：Le code postal 是必需的，但它不在 ViewModel 中。

我检查了 html 源代码，它生成了 data-val-required 类，而在我的 ViewModel 中没有 require 属性。

问题可能来自哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:29:57.510

因为您的 int 不可为空，所以默认情况下将其标记为必需。您可以将 int 设置为 int? 使其可以为空，或者您可以将其添加到您的 application_start 以更改默认行为...

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

# ruby-on-rails-3 - 未初始化的常量 UserJob::Delayed::Job

> ID：10255446
> 
> 赞同：0
> 
> 时间：2012-04-21T01:34:59.323
> 
> 标签：ruby-on-rails-3, activerecord, associations, delayed-job, ruby-on-rails-3.2

**介绍**

我正在按照这里的教程进行操作，我已经到了最后一点，但我遇到了一个错误。我正在使用 Ruby 1.9 和 Rails 3.2。

**问题**

当它遇到这行代码时会发生以下错误...

```
@user_job.job = @job 
```

**错误信息**

未初始化的常量 UserJob::Delayed::Job

**全跟踪**

```
activerecord (3.2.3) lib/active_record/inheritance.rb:119:in `compute_type'
activerecord (3.2.3) lib/active_record/reflection.rb:172:in `klass'
activerecord (3.2.3) lib/active_record/associations/association.rb:202:in `raise_on_type_mismatch'
activerecord (3.2.3) lib/active_record/associations/belongs_to_association.rb:6:in `replace'
activerecord (3.2.3) lib/active_record/associations/singular_association.rb:17:in `writer'
activerecord (3.2.3) lib/active_record/associations/builder/association.rb:51:in `block in define_writers'
app/controllers/posts_controller.rb:8:in `index'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:414:in `_run__2107776697662030787__process_action__219357298770380196__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__2493773234006611680__call__1862807147047497298__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/billyshambrook/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/billyshambrook/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/billyshambrook/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

问题似乎与协会有关。

```
class UserJob < ActiveRecord::Base
  belongs_to :job, :class_name => "Delayed::Job"
 ... 
```

这是声明与 DelayedJobs 表关联的正确方法吗？

正在使用的延迟作业的版本是

```
delayed_job (3.0.2)
  activesupport (~> 3.0)
delayed_job_active_record (0.3.2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T02:02:58.097

将您的班级名称选项更改为`::Delayed::Job`. 前导 :: 导致从顶层搜索类，而目前它正在搜索`Delayed::Job`嵌套在您的类中的`UserJob`类

# php - 从 PHP 中的 JSON 对象中过滤项目

> ID：10255450
> 
> 赞同：0
> 
> 时间：2012-04-21T01:36:00.820
> 
> 标签：php, json, filter

`ARRAY()`我有这个函数/方法用于在使用中过滤掉单词的黑名单，`array_filter`但我需要在下面的代码中做一些类似于我的对象的事情......

JSON 对象

```
// Get JSON Object
$obj = json_decode($out);

// Iterate JSON Object
foreach($obj as $index => $user) {
    echo $user->id;
    echo $user->screen_name;
    echo $user->language;
    echo $user->location;
    echo $user->time_zone;
    echo $last_status_date;
    echo $user->status->text;

    // Filter out Objects that match the Blacklist

    // insert remainning into database here

} 
```

我当前的黑名单过滤功能

```
public function blacklistFilter($raw_array){

    //$data1 = array('Phillyfreelance' , 'PhillyWebJobs', 'web2project', 'cleanname');
    $data1 = array_filter($data1, function($el) {
            $bad_words = array('job', 'freelance', 'project', 'gig', 'word', 'news', 'studio');
            $word_okay = true;

            foreach ( $bad_words as $bad_word ) {
                if ( stripos($el, $bad_word) !== FALSE ) {
                    $word_okay = false;
                    break;
                }
            }

            return $word_okay;
    });
} 
```

* * *

所以我很好奇是否有像`array_filter`ARRAYS 那样过滤对象的类似函数？

最终我的目标是能够通过一个函数传递数百个 JSON 对象，并且能够过滤掉与用户名中的一组单词匹配的对象，过滤掉与语言匹配的对象，并过滤掉与位置或位置匹配的对象。时区

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:51:59.720

除非你想要一个解决方案`specifically for object`，否则你不需要它

你在打电话

```
 $obj = json_decode($out); 
```

这就是为什么你得到一个对象..如果你打电话

```
 $obj = json_decode($out,true); 
```

当第二个参数为`TRUE`时，`json_decode`返回`objects will be converted into associative arrays.`

响应将是一个数组，请参阅[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)获取文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:52:56.863

如果我正确理解所有内容，我认为您甚至不需要针对对象的新 PHP 函数，而且您的过滤器似乎过于复杂。

```
$obj = json_decode($out);
$bad_words = array('job', 'freelance', 'project', 'gig', 'word', 'news', 'studio');
foreach((array)$obj as $key => $val)
{
    $word_okay = !in_array($val, $bad_words);
    if($word_okay){
        echo "{$val} is good";
    }
    else{
        echo "{$val} is bad";
    }
} 
```

我假设您希望能够在需要时将对象视为数组，但仍将其保留为对象。否则，这会将您的 JSON 对象初始化为数组：

```
$obj = json_decode($out, true); 
```

# apache - mod_deflate 与 mod_gzip

> ID：10255453
> 
> 赞同：33
> 
> 时间：2012-04-21T01:36:37.597
> 
> 标签：apache, gzip, mod-deflate

有人可以告诉我以下脚本在 CPU 负载性能和压缩方面的区别吗？

```
<ifModule mod_gzip.c> 
mod_gzip_on Yes 
mod_gzip_dechunk Yes 
mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$ 
mod_gzip_item_include handler ^cgi-script$ mod_gzip_item_include mime ^text/.* 
mod_gzip_item_include mime ^application/x-javascript.* 
mod_gzip_item_exclude mime ^image/.* 
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.* 
</ifModule> 

<ifModule mod_deflate.c> 
<filesMatch "\.(js|css)$"> SetOutputFilter DEFLATE </filesMatch> 
</ifModule> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-10-25T10:00:20.470

这两个模块都做同样的事情：即时添加 gzip 压缩。

这些天你应该使用的一个是**mod_deflate** - 它是更现代和推荐的一个，并且与 Apache 一起分发。mod_gzip 是一个较旧的第三方实现，没有充分的理由再使用它。

不要被名称所迷惑，以为它们使用不同的压缩方案。它们都使用 gzip（这是一种使用称为 DEFLATE 的压缩算法的格式）。后者仅称为 mod_deflate，因为取名为 mod_gzip。它们都将使用相同的设置实现相同的压缩级别。

它们具有不同的配置（可能包括不同的默认设置），因此您需要查找您正在使用的特定配置的文档。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-05T08:54:36.270

我猜你问的是这两者之间的区别，而不是一般的压缩。在这种情况下，我建议使用依赖于仍然活跃的项目 zlib 的 mod_deflate。顺便说一句，比较两者的旧文章（6-7 岁）不再相关。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T22:38:01.293

大多数压缩算法在应用于纯文本文件时，可以将其大小减少 70% 或更多，具体取决于文件中的内容。使用压缩算法时，标准压缩级别和最大压缩级别之间的差异很小，尤其是当您考虑处理这些额外压缩通道所需的额外 CPU 时间时。这在动态压缩 Web 内容时非常重要。大多数软件内容压缩技术使用 6 级（共 9 级）的压缩级别来节省 CPU 周期。6 级和 9 级之间的文件大小差异通常很小，不值得花费额外的时间。

对于标识为 text/.* MIME 类型的文件，可以在将文件放在网络上之前对其应用压缩。这同时减少了传输的字节数并提高了性能。测试还表明，Microsoft Office 和 PostScipt 文件可以进行 GZIP 编码以供压缩模块传输。

一些不能进行 GZIP 编码的重要 MIME 类型是外部 JavaScript 文件、PDF 文件和图像文件。Javascript 文件的问题主要是由于浏览器软件中的错误，因为这些文件实际上是文本文件，并且通过压缩传输整体性能将受益。PDF 和图像文件已经被压缩，尝试再次压缩它们只会使它们变大并导致浏览器出现潜在的渲染问题。

在向客户端发送压缩文件之前，服务器确保接收数据的客户端正确理解并呈现压缩格式至关重要。了解压缩内容的浏览器会发送以下客户端请求标头的变体：

```
Accept-encoding: gzip

Accept-encoding: gzip, deflate 
```

当前的主要浏览器在发送的每个请求中都包含此消息的一些变体。如果服务器看到标头并选择提供压缩内容，它应该使用服务器响应标头进行响应：

更多信息请看这篇文章：[http ://www.linuxjournal.com/article/6802](http://www.linuxjournal.com/article/6802)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-12T10:49:28.970

启用 mod_deflate 和 mod_gzip 基本上完成了同样的事情，它们都在发送给您网站的访问者之前压缩您的 web 文件。

但是，两者之间存在差异；*mod_deflate*有时可以比*mod_gzip*具有更好的压缩百分比。您应该选择 mod_deflate 的另一个原因是因为它作为 mod_gzip 得到了更好的支持，这使得配置更容易，因为它有更好的文档。更多信息可以在[这里](http://www.giftofspeed.com/enable-gzip-compression/)找到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-20T07:49:10.843

在 linuxjournal.com 上查看这篇文章

[http://www.linuxjournal.com/article/6802](http://www.linuxjournal.com/article/6802)

除此之外，mod_deflate 更容易配置，并且通常随 apache 包一起提供。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-04-12T19:46:18.590

恕我直言，您应该避免对静态文件使用 mod_deflate，而是通过 mod_rewrite 提供具有最佳压缩效果的预压缩文件（7zip 创建了 gzip AFAIK）。Apache 不缓存 gzip 后的静态文件。

对于动态文件：取决于可用带宽 - mod_deflate 需要大量处理能力，但如果您的服务器能够溢出网络，则可用。

# ios - UIAlertView 按钮操作？

> ID：10255455
> 
> 赞同：9
> 
> 时间：2012-04-21T01:36:49.327
> 
> 标签：ios, objective-c, delegates, uialertview

我有一个`UIAlertView`显示此代码的代码，要求您对应用商店中的应用程序进行评分。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Rate on the Appstore!" 
                                                message:@"" 
                                               delegate:self 
                                      cancelButtonTitle:@"Later" 
                                      otherButtonTitles:@"OK", nil];
[alert show];
[alert release]; 
```

但我不知道如何向 OK 按钮添加一个操作，将您带到**AppStore**中的应用程序。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-21T01:44:24.320

How about this?

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex != [alertView cancelButtonIndex]) {
        NSLog(@"Launching the store");
        //replace appname with any specific name you want
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms://itunes.com/apps/appname"]];
    } 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-21T01:42:18.713

You want something like the following:

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        NSLog(@"Clicked button index 0");
        // Add the action here
    } else {
        NSLog(@"Clicked button index other than 0");
        // Add another action here
    }
} 
```

NSLog's appear in the console when you press a button and help out whenever you want to debug/test anything.

Then for the action that you want, you'd write something like:

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"url_to_app_store"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T09:31:26.663

在 swift 中：使用此代码块显示警报消息。

```
let alert = UIAlertController(title: "Alert", message: "This is an alert message", preferredStyle: UIAlertControllerStyle.Alert)

let action = UIAlertAction(title: "OK", style: UIAlertActionStyle.Default, handler: {(action:UIAlertAction) in print("This is in alert block")
})

alert.addAction(action)
self.presentViewController(alert, animated: true, completion: nil) 
```

# .net - 字典和哈希表在线程安全方面的区别

> ID：10255456
> 
> 赞同：5
> 
> 时间：2012-04-21T01:36:56.783
> 
> 标签：.net, dictionary, hashtable

在线程安全方面，HashTable和Dictionary有什么区别吗？我没有看到任何...根据 msdn，两者都定义如下：-

[哈希表](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)

> Hashtable 是线程安全的，可供多个读取线程和单个写入线程使用。当只有一个线程执行写入（更新）操作时，多线程使用是线程安全的，如果写入器序列化到哈希表，则允许无锁读取。

[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

> 只要不修改集合，字典就可以同时支持多个阅读器。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T02:00:34.987

这两个类都允许多个阅读器一次没有锁定，都必须为多个作者锁定。不同之处在于，Hashtable 允许 ONE writer 与多个 reader 一起无需锁定，而 Dictionary 则不安全。因此，对于 Hashtable，只有写入必须被锁定。如果 Keys 和 Values 都是引用类型（因此不需要装箱/拆箱），则在有许多读者和一个（或多个）作者的情况下，Hashtable 可以比 Dictionary 更快，因为读者不必等待锁定全部。使用 Dictionary 相同的场景需要使用[ReaderWriterLock](http://msdn.microsoft.com/en-us/library/System.Threading.ReaderWriterLock.aspx)。

# java - Connect MySQL with Google App Engine with Eclipse

> ID：10255462
> 
> 赞同：0
> 
> 时间：2012-04-21T01:38:50.557
> 
> 标签：java, mysql, google-app-engine, jdbc

I'm new to Google App Engine and I need to make an application with GAE.

I want the database to be MySQL. I signed up in Google Cloud SQL for limited preview but I want to work meanwhile locally (offline). Is that possible even though I don't have access yet to the Google Cloud SQL? If so, can you please supply me with the JDBC script to make that happen? And any libraries if needed.

I usually connect to the local DB with this:

```
package acc;

import java.sql.*;
import com.google.appengine.api.rdbms.AppEngineDriver;

import java.io.IOException;
import java.sql.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * provide database connection 
 */
public class dbConnection {

   static Connection conn;
   static String url;

   public static Connection getConnection()
   {

      try
      {
          String url = "jdbc:mysql://localhost:3306/gp";

          Class.forName ("com.mysql.jdbc.Driver").newInstance ();

         try
         {
             String userName = "root";
             String password = "";

             conn = DriverManager.getConnection (url, userName, password);
             System.out.println ("Database connection established");
         }
         catch (Exception e)
         {
             System.err.println ("Cannot connect to database server");
         }
      }

      catch(ClassNotFoundException e)
      {
         System.out.println(e);
      } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

   return conn;
}
} 
```

Thanks alot

```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_(Runtime.java:126)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance(Runtime.java:134)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1013)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2464)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2207)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:797)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_(Runtime.java:126)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance(Runtime.java:134)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:389)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at acc.dbConnection.getConnection(dbConnection.java:35)
    at acc.DAO.getEmpList(DAO.java:40)
    at acc.SelectEmpServlet.doGet(SelectEmpServlet.java:27)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.security.AccessControlException: access denied ("java.net.SocketPermission" "localhost" "resolve")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:252)
    at java.lang.SecurityManager.checkConnect(SecurityManager.java:1048)
    at java.net.InetAddress.getAllByName0(InetAddress.java:1203)
    at java.net.InetAddress.getAllByName(InetAddress.java:1127)
    at java.net.InetAddress.getAllByName(InetAddress.java:1063)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:247)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:298)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2385)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2422)
    ... 48 more
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:43:14.233

```
>> Could not create connection to database server.
>> access denied ("java.net.SocketPermission" "localhost" "resolve") 
```

应用程序引擎不允许您打开套接字，这是理所当然的。部署后，您将永远无法访问此类低级机制。

记录在这里：[https ://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)

> App Engine 应用程序无法打开套接字或直接访问其他主机

# php - 存储配置数据 - 哪种方式？

> ID：10255464
> 
> 赞同：0
> 
> 时间：2012-04-21T01:39:06.627
> 
> 标签：php, mysql, codeigniter, configuration

我正在使用`Codeigniter`框架开发我的新网站。关键是，我想在我的管理面板中配置大多数东西。

我在存储数据方面没有太多经验，那么哪种方式会更好：PHP 配置文件或 MySQL 表？

会有相当多的配置，所以我想尽可能快地访问它：例如使用 MVC 的模型，但没有人说我不能对助手做同样的事情（对于 PHP 配置文件）。 ..所以这一切都取决于它的发展方式：访问速度更快，更新更好。在我看来，MySQL 将是一个更好的选择，因为我需要的只是一个小查询——但我会先听听你们的意见，因为你们中的大多数人在这类东西方面都有很好的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T01:45:46.760

这取决于 - 你需要一个用户界面吗？如果这样做，请将其存储在数据库中。否则，*请务必*将其存储在 PHP 配置文件中。那里的优点是：

*   它更快
*   这更容易
*   改变其实更容易

但是，如果您正在为设置创建某种管理面板，则需要将其存储在数据库中，因为在 PHP 中更新 PHP 配置文件通常很困难，而且是个坏主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T01:46:34.443

我认为这将取决于您的应用程序的配置方式。您将运行多少个实例（用于横向扩展）以及您期望值更改的频率。

大**专业人士**在所有实例中拥有一致的配置数据主控。在一个地方更改它，您的所有实例都会得到它。这也可以在运行时更改，而不必重新部署您的应用程序。**缺点**是从数据库中获取配置数据的额外复杂性（更不用说首先为此设置服务器），这是另一个故障点。

另一方面，拥有一个配置文件要容易得多，如果您不需要非常频繁地更改值或只有一个服务器，这可能是合适的。当您拥有多台服务器时，不利的一面是，在数十或数百台服务器上部署和管理配置文件变得很痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T01:49:20.190

使用 MySQL 数据库绝对是存储灵活数据的方法。此外，Codeigniter 的活动记录库 (http://codeigniter.com/user_guide/database/active_record.html) 使处理 MySQL 数据库变得更加容易，而且它还为您清理查询。如果您只需要存储几条数据，PHP 配置文件将是一个可接受的解决方案，但如果您正在构建管理面板，则绝对要使用 MySQL 数据库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T01:52:29.250

codeigniter 具有适当的配置机制。您可以将所有配置放在 application/config/config.php 文件中，codeigniter 框架确保以最有效的方式将它们提供给您的代码。

如果您认为将来它们将由用户/管理员管理，则应将配置放在数据库中，例如。站点名称等。否则请记住，每次访问数据库都是有成本的。您可以通过缓存值来支付该成本，但如果您确实需要它，请选择您的自定义配置解决方案。

# wordpress - Parent/Grandparent Page Title for Widget Title

> ID：10255469
> 
> 赞同：0
> 
> 时间：2012-04-21T01:39:59.420
> 
> 标签：wordpress, widget

Using page list with parent, child and grandchild pages for current nav section as widget in sidebar. Parent page displays correctly as widget title when on child page, but when on grandchild page widget title changes to child page title. Regardless of what I've tried to get back to the root parent, the result is always the same as using this:

```
php global $post; $thispage = $post->ID;
php $parent_title = get_the_title($post->post_parent); echo $parent_title; 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:56:30.243

我找到了答案，至少就我的目的而言：

```
php echo get_page(array_pop(get_post_ancestors($post->ID)))->post_title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:56:42.153

**更新：**所以当 Wordpress 已经在其框架中内置了[Get Ancestors功能时，我似乎已经开始并重新发明了轮子（很糟糕，我可以补充一下）。](http://codex.wordpress.org/Function_Reference/get_ancestors)使用它非常简单。这应该做你想要的：

```
if($ancestors = array_reverse(get_ancestors(get_the_ID(), 'page')))
    echo get_the_title($ancestors[0]);
else
    echo get_the_title(get_the_ID()); 
```

# jquery - 允许用户在 FullCalendar 上每天仅添加一个事件

> ID：10255470
> 
> 赞同：1
> 
> 时间：2012-04-21T01:40:20.227
> 
> 标签：jquery, fullcalendar

我正在使用[FullCalendar](http://arshaw.com/fullcalendar/) 如果她/他已经在前一天添加了一个事件，有什么方法可以禁止用户在同一天输入另一个事件？

因此，如果用户在 2012 年 1 月 1 日当天参加活动。如果她/他再次点击那一天，它将禁止用户输入新事件。我有一个对象数组，其中包含用户输入的事件。我现在正在考虑过滤这个数组，并在用户触发选择事件时相应地重新采取行动。我走对了吗！！您知道其他优化方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:43:06.393

是的。如果您正在跟踪它，您就可以控制需要做什么。

请看一下：-

[在 FullCalendar dayClick 事件中，我可以获取点击日期已经存在的事件吗？](https://stackoverflow.com/questions/2516050/in-the-fullcalendar-dayclick-event-can-i-get-the-events-that-already-exist-in-c)

可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T16:01:15.270

在完整日历的 2.2 版本中，可以使用 eventOverlap 来控制事件的重叠。参考[http://fullcalendar.io/docs/event_ui/eventOverlap/](http://fullcalendar.io/docs/event_ui/eventOverlap/)

对于议程 slotEventOverlap 参考[http://fullcalendar.io/docs/agenda/slotEventOverlap/](http://fullcalendar.io/docs/agenda/slotEventOverlap/)

# java - java中的图形实现

> ID：10255479
> 
> 赞同：4
> 
> 时间：2012-04-21T01:42:33.693
> 
> 标签：java, graph, implementation

我正在尝试创建一个 Graph 类，它使用另一个类 Vertex 类来表示图形的所有顶点。我不确定是否需要一个代表两个顶点之间可能连接的 Edge 类，因为每个顶点都可以跟踪它所连接的其他节点。但我不确定这是否正确。你怎么看？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T02:10:21.110

您不必使用`Edge`类。您可以使用邻接列表并仍然正确表示**未加权**的图。对于加权图，您需要一种表示边缘成本的方法，因此使用`Edge`类是合适的。

```
class Graph<E> {
    private List<Vertex<E>> vertices;

    private static class Vertex<E> {
        E elem;
        List<Vertex<E>> neighbors;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T02:04:08.907

通常，根据其对预期用途的适用性来选择[*表示。*](http://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29#Representations)在这个简单的示例中，[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)仅使用 a`List<Edge>`作为其模型。

# image - Understanding this code to generate a watermark logo for an image

> ID：10255480
> 
> 赞同：0
> 
> 时间：2012-04-21T01:43:19.357
> 
> 标签：image, matlab, image-processing, watermark

```
% imgew: watermark image  
% imge1: Orginal imge  

function W=dmg(imgew,imge1);      
% obtain original and watermark image

[w h]=size(imgew');  
[w1 h1]=size(imge1');  
a=1;  
b=1;  
W=zeros(size(imge1'));  

for i=1:w:w1  
for j=1:h:h1  
    W(i:a*w,j:b*h)=imgew';  
    b=b+1;  
end  
a=a+1;  
b=1;  
end  

W=W'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:31:43.120

嵌套循环只是计算“imgew”图像的马赛克“W”。请注意，“W”的大小将等于*或大于*“imge1”。

# java - (Java) Not sure of the term, but basically how do I get the "opposite" of a number in a range?

> ID：10255484
> 
> 赞同：-1
> 
> 时间：2012-04-21T01:43:56.373
> 
> 标签：java, math, equation

What I mean is, let's say that I have number between 0 - 400\. If I were to pass in 0, it would return 400, if I were to pass in 1 it would return 399, and so on and so forth. Is there an equation that will let me do this? (Yes, I know this isn't really java as much as it is plain Math)

EDIT: WOW, I'm and idiot. How did I NOT realize that this was subtraction? My problem is with Slick2D, and I'm having difficulty working with the LWJGL origin (0, 0 being in the top left) v.s. the other origin (0, 0 being in the bottom left)

EDIT 2: Requesting for a moderator to delete this

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T01:45:56.543

这叫做*减法*。

你拿最高的号码，打电话给它`N`。取下限，叫它`M`。然后你把原来的号码，打电话给它`i`。然后

答案 = (N - i) + M;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T01:45:39.543

I think you're looking for the difference.

`f(n) = 400 - n`

In Java, this might look like:

```
int getOpposite(int n) {
    return 400 - n;
} 
```

For even numbers, passing in `n/2` will return `n/2` -- so in the case of `400`, passing in `200` will just return `200`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T01:46:38.383

n = ULimit - n ; 会给你相反的

# xcode - Xcode won't run on device after deleting app

> ID：10255486
> 
> 赞同：0
> 
> 时间：2012-04-21T01:44:55.253
> 
> 标签：xcode

For some reason Xcode was running an old version of my app on the device. To fix it I deleted the app on my device after trying to reboot everyone. Now Xcode won't run on the device giving me:

error: failed to launch No such file or directory (/Users/me/Library/Developer/Xcode/DerivedData/Foo-ebesorzwidboecgphqwmmzabjvoe/Build/Products/Debug-iphoneos/Foo.app/Foo)

EDIT - I added the directory. It is a directory on my Mac. Why would deleting the app from the iphone cause this?

EDIT2 - and its lying because the app is there. Runs fine on simulator.

EDIT3 For those following, or if someone wants to help out:

What is happening is I am changing the version number of the app. At this point it will no longer load the new version number onto the device. So I go to organizer/apps and delete all apps on the device. Then I rerun and get the above error. Restoring the iPhone from scratch is the only way to fix it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:56:39.333

标准的重新启动都没有一切正常，但是在将我的 iPhone 恢复为新手机并且没有从备份中恢复后，我能够让它工作。

# ios - How to compile SecureUDID with CodeRunner

> ID：10255487
> 
> 赞同：1
> 
> 时间：2012-04-21T01:45:10.337
> 
> 标签：ios, objective-c, coderunner

I'm trying to quickly test what kind of results I'd get using SecureUDID before I can use in my Xcode project. In this case I'm using [CodeRunner](http://krillapps.com/coderunner/) but I've never compiled obj-c code outside of Xcode. I've attached the error I'm getting when using the default compilation flag CodeRunner provides for Obj-c files. I've experimented with compilation flag options inspired from the answer for this [questions](https://stackoverflow.com/questions/8918804/how-can-i-include-non-framework-libraries-when-writing-coderunner-documents) but still getting essentially the same error. What compilation flags should I be using? Are there any good resources to learn how to compile obj-c outside of Xcode? Please help thanks!

![enter image description here](../Images/2bba5a69f921b16a54694a57d4f41e9b.png)

Update: It looks like I need to add UIKit and maybe others to the compilation flags now?

![enter image description here](../Images/4cd3c9df9906ae52dd4b0f9f0b17c2db.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T22:36:25.813

我同意 Mattia，Xcode 可能是最好的方法，但是：**接受挑战**。

* * *

首先，让我们使用 UIKit 编译 CodeRunner。在 CodeRunner 首选项中，复制 Objective-C 语言并将其命名为“iOS”。我使用 Xcode 使用的命令（您可以在 Log Navigator 中找到）作为模板。这也是马蒂亚所说的。将编译标志设置为如下所示：

> -arch i386 -fmessage-length=0 -std=c99 -fpascal-strings -O0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions - fasm-blocks -g -fvisibility=hidden -fobjc-abi-version=2 -fobjc-legacy-dispatch -mios-simulator-version-min=5.1 -framework Foundation -framework UIKit -F /Applications/Xcode.app/Contents/开发者/平台/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks

注意`iPhoneSimulator5.1.sdk`路径和`-mios-simulator-version-min=5.1`标志。您可能需要为您自己的系统和版本更改这些。

首先，尝试使用以下 iOS 代码（您也可以在首选项中将其设为模板）：

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

@interface AppDelegate : NSObject <UIApplicationDelegate>

@property (nonatomic, retain) UIWindow * window;
@property (nonatomic, retain) UIViewController * viewController;

@end

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.viewController = [[[UIViewController alloc] initWithNibName:nil bundle:nil] autorelease];
    self.viewController.view.backgroundColor = [UIColor orangeColor];
    UILabel * label = [[UILabel alloc] initWithFrame:self.viewController.view.bounds];
    label.font = [UIFont boldSystemFontOfSize:48.0];
    label.textColor = [UIColor whiteColor];
    label.backgroundColor = [UIColor clearColor];
    label.textAlignment = UITextAlignmentCenter;
    label.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    label.text = @"Hello World";
    [self.viewController.view addSubview:label];
    [label release];

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        UIApplicationMain(argc, argv, nil, @"AppDelegate");
    }
} 
```

如果您尝试运行，它应该可以编译，但是应用程序将因以下错误而崩溃：

> dyld：库未加载：/System/Library/Frameworks/UIKit.framework/UIKit

这是因为您试图在没有 UIKit 的 Mac 上运行 iOS 应用程序；它需要在模拟器中运行。回到首选项，将运行命令更改为：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication $PWD/$compiler

现在运行相同的代码。iOS 模拟器应该会启动，您应该会看到一个带有“Hello World”的橙色屏幕：

![你好世界](../Images/08509f8a68a76061453394505d0c3b4c.png)

现在让它与 SecureUDID 一起工作。您需要将代码保存在某处。现在将 SecureUDID .h 和 .m 文件复制到与保存的代码相同的文件夹中。添加`#import "SecureUDID.h"`到文件顶部，将字体大小更改为`14.0`，然后更改`@"Hello World"`为`[SecureUDID UDIDForDomain:@"com.example.test" usingKey:@"abcdefg"]`. 如果您运行代码，它会抱怨找不到 SecureUDID 符号，正如您所看到的。我们需要将“SecureUDID.m”添加到编译标志中。因此，您可以在 CodeRunner 中重用 iOS 语言，您可以将其添加到自定义运行中的标志中，但是您每次想要运行时都需要处理该模式视图。

你去吧：

![安全UDID](../Images/643b4c95636ce012d764cbb16885ec81.png)

不幸的是，日志不会出现在 CodeRunner 控制台中，但您可以打开 Mac 应用程序控制台来查看它们。我还得到了一些额外的黑色填充。还不知道我做错了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T02:23:30.287

该错误意味着链接器找不到 SecureUDID 的实现（.m 文件或库）。如果您转到 coderunner 的首选项，您可以设置命令行选项并将其指向实现，但老实说，在 Xcode 中创建一个新项目来测试它可能会更快。Coderunner 很棒，但是当您必须处理外部库/源文件时，制作一个一次性的 Xcode 项目会更容易。

更新：

UIKit 是一个 iOS 框架，所以它不适合像 Foundation 这样的常规框架。假设您安装了 Xcode 4.3，您可以在以下位置找到 UIKit：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks

您需要将该目录添加到您的框架搜索路径，然后添加：

-框架 UIKit

给你在 Coderunner 中的编译参数。

不过，您问题的真正答案是停止尝试使用 Coderunner 并使用 Xcode。Coderunner 旨在编写小代码片段，而无需进行所有配置来创建 Xcode 项目。在这种情况下，您需要的是所有配置，而 Xcode 允许您这样做，因此与其与 coderunner 斗争以使其表现得像一个完整的 IDE，您应该只使用 Xcode - 您会更高兴。

# java - Hibernate 4.1 Hibernate.STRING 的最终替代方案

> ID：10255506
> 
> 赞同：50
> 
> 时间：2012-04-21T01:51:17.123
> 
> 标签：java, hibernate

我使用的是 Hibernate 3.6，我有这样的代码：

```
list =getSession().createSQLQuery(queryString)
        .addScalar("UNAME",Hibernate.STRING)
        .addScalar("COM",Hibernate.STRING)
        .addScalar("COM_DATE",Hibernate.DATE) 
        .setString("id", Id).list(); 
```

现在我将 jar 从 3.6 更改为 4.1Final

似乎 addScalar 方法要求输入 Type 而不是 Hibernate.STRING 我找不到任何热的例子来解决这个问题。如果有谁知道请帮助我谢谢。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-21T05:57:36.513

由于[HHH-5196 ，](https://hibernate.onjira.com/browse/HHH-5196) [org.hibernate.Hibernate](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Hibernate.html)中的类型字段已被弃用（实际上已被删除）

现在可以从 javadocs 中为[Type](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/type/Type.html)找到不同的 Hibernate 类型。在您的情况下，以下应该有效：

```
 .addScalar("UNAME", StringType.INSTANCE)
    .addScalar("COM", StringType.INSTANCE)
    .addScalar("COM_DATE", DateType.INSTANCE) 
```

# iphone - UITableViewCell 选择区域 - 如何为分组 UITableView 部分的顶部/底部单元格填充整个单元格？

> ID：10255507
> 
> 赞同：1
> 
> 时间：2012-04-21T01:51:28.737
> 
> 标签：iphone, uitableview, selection

我有一个分组样式的 UITableView。在 tableView 中，我将行排列成部分，因为这些部分具有可变数量的行。但是，我选择将所有部分放在一起（出于 UI 原因），这样它们看起来就像一个包含多个（可扩展）行的大部分。

我遇到的问题是我希望每个部分中顶行和底行的选择区域填充整个单元格 - 换句话说，不要有圆角。

我知道一个普通的表格视图可以完全选择单元格，但是我不能从一个分组的表格视图更改为一个普通的表格视图，因为这会产生其他不需要的后果。

我了解如何将单元格的 selectedBackground 遮盖为圆角（如果它还没有圆角），但我无法找到一种方法来“取消”部分顶部和底部单元格的角。我为每个部分的底部行创建了虚拟行，这似乎很有效，尽管它很乏味；但我不能为顶行做一个虚拟行，因为它使分隔线太粗。

是否可以在分组的 UITableView 中“取消”顶部/底部部分行的选择区域？

编辑添加答案：以下代码适用于我的自定义背景视图：

```
cell.selectedBackgroundView.bounds = cell.bounds; 
```

无论每个部分的顶部或底部单元格的“形状”如何，由自定义背景视图确定，选择样式与使用上述代码的“形状”相匹配。这并不一定会消除圆角本身，但是如果我将部分中的顶部或底部单元格设置为“中间样式”单元格背景视图（无角），则确实会根据需要选择整个单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:01:25.617

将 QuartzCore 框架导入您的项目。#import 到您的 tableViewController 并使用以下代码...

**>>>编辑..**

```
myTableView.layer.cornerRadius=0.0; 
```

//或使用您的 tableView:cellForRowAtIndexPath:

```
cell.backgroundView = [[[UIView alloc] initWithFrame:cell.bounds] autorelease]; 
```

[方角桌景](https://stackoverflow.com/questions/2554683/creating-a-uitableview-of-the-grouped-style-but-with-square-corners)

[分组表格视图中方角的示例代码和教程](http://iphonedevelopment.blogspot.in/2010/08/transparent-grouped-tableviews.html)

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:02:36.067

您也许可以创建一个自定义 UITableViewCell，将其设置为不剪切子视图，并覆盖单元格的“setSelected:animated”方法以显示您自己的选择区域。这是我唯一能想到的。为什么不能使用普通的 UITableView？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T13:56:46.113

可能有点晚了，但这是我所做的：

首先根据需要设置单元格的背景视图，然后设置单元格的选定背景视图（与单元格背景的边界相同）

您可以指定`cornerRadius`属性，以便您可以根据需要设置圆角，在我的情况下我省略了此属性

这是两者的代码：

```
 UIView *bg = [[UIView alloc] initWithFrame:cell.bounds];
        bg.backgroundColor = [UIColor colorWithRed:0.980 green:0.988 blue:0.984 alpha:1];
        bg.layer.borderColor = [UIColor colorWithRed:0.827 green:0.827 blue:0.835 alpha:1].CGColor;
        bg.layer.borderWidth = kCellBorderWidth;
//        bg.layer.cornerRadius= kCellBorderRadius;
        cell.backgroundView = bg;

        // to make cell selection square and not round (which is by default)
        UIView *bg_selected = [[UIView alloc] initWithFrame:cell.bounds];
        bg_selected.backgroundColor = [UIColor lightGrayColor];
        bg_selected.layer.borderColor = [UIColor colorWithRed:0.827 green:0.827 blue:0.835 alpha:1].CGColor;
        bg_selected.layer.borderWidth = kCellBorderWidth;
        cell.selectedBackgroundView = bg_selected; 
```

# python - 运行 Python（Django 脚本）？

> ID：10255512
> 
> 赞同：-1
> 
> 时间：2012-04-21T01:52:20.927
> 
> 标签：python, django

Php 脚本可以通过 Xampp 或 Wamp 执行。但是我如何在我的 PC 上执行 Django 脚本以用于开发目的？

我研究了一下，但没有发现任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:28:08.107

django自带开发服务器，进入一个django项目目录，输入“python manage.py runserver”；部署到共享主机时，您的主机应为 Django 配置 WSGI 或 FastCGI 设置。

如果您正在寻找某种独立的 CGI 脚本，不幸的是，django 不建议使用这种执行方法。但是，如果为 CGI 配置 Apache，则可以编写独立的*python*脚本以作为 CGI 脚本运行（减去 django 部分）。

我建议您阅读[安装指南](https://docs.djangoproject.com/en/dev/intro/install/)和Django 教程（[1、2、3、4](https://docs.djangoproject.com/en/dev/intro/tutorial03/)）[，](https://docs.djangoproject.com/en/dev/intro/tutorial01/)[它](https://docs.djangoproject.com/en/dev/intro/tutorial02/)解释[了](https://docs.djangoproject.com/en/dev/intro/tutorial04/)如何开始开发。Django 的工作方式与 php 有很大不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:01:55.277

Django 是一个用 Python 编写的 Web 框架，就像用 PHP 编写的 CakePHP 一样。所以为了运行 Django，你需要一个合适的环境。

> 你的意思是，我不能像在 php 中那样制作独立的脚本？与我正常的共享灯托管？

不，除非您的主机支持 Python，并且您知道如何使用 Django 正确配置服务器设置。大多数普通人`LMAP`根本无法托管 Django。

脚本在任何时候都是一个非常非常糟糕的词选择。你可以编写这个PHP代码并在浏览器中显示它，只要你把文件放在服务器的目录下（例如Apache）并通过一个url直接打开它（例如： [http://localhost:8000/hello.php](http://localhost:8000/hello.php)）

```
<html>
 <head>
  <title>PHP Test</title>
 </head>
 <body>
 <?php echo '<p>Hello World</p>'; ?> 
 </body>
</html> 
```

你也可以用 Python 写，但不能用那种风格，你需要一个 web 模块（你需要配置它，使它实际显示在浏览器上，而不是提示`oops, you want to download this file?`

出于开发目的，Django 附带了一个开发服务器。因此，请阅读其他人迄今为止推荐的教程。如果您想用于生产目的，您可以使用 mod_wcgi 设置 Apache、Niginx。这超出了你的问题范围。

快速浏览一下您最近的问题：我认为您需要了解 Python 不是 PHP。它的目的不是专门用于 Web 开发。Python是一种通用的编程语言，它能够做很多事情（但这并不是说PHP不能。它可以做到，只是不是PHP的目的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:54:55.443

查看有关如何为您的项目运行 django 开发服务器的文档：
[https ://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/)

您通常不会有“django 脚本”。也就是说，可以像任何普通 python 进程一样启动的独立脚本。它们是必须作为项目服务的框架的一部分。

话虽如此，您也可以像使用 apache 和 uwsgi 或 fcgi 的 php 一样为您的 django 项目提供服务

如果您尝试遵循入门 django 教程，他们将始终向您展示如何启动项目，然后启动开发服务器以便您查看它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T03:07:37.773

如果您指的是 Django 组件，那么您需要为每个组件创建子项目并将它们注册到主项目目录中。将所有内容都视为可以添加到现有项目的组件，尽管有些组件比其他组件更容易。

关于如何促进子项目和“可插入应用程序”的一个古老但相关的示例：[Django、可插入应用程序和代码重用](http://www.oreillynet.com/onlamp/blog/2006/09/django_pluggable_apps_and_code.html)

如有疑问，请重新阅读教程。Django 教程还有很多不足之处，但还有其他的。Lightbird 有一个与我认为您所描述的内容相关的不错的选择（[如何集成用户注册的示例](http://lightbird.net/dbe/forum3.html#user-registration)）。

编辑：如果你只是想运行一个独立的脚本，那都是 Python 代码。如果你修改 Django 特定的部分，任何脚本都可以自己运行。

# c# - 除了在 C# 中，如何延迟类似于“ping localhost ...”的代码

> ID：10255513
> 
> 赞同：1
> 
> 时间：2012-04-21T01:52:22.373
> 
> 标签：c#, winforms, delay, shortcut, timing

是否可以在 C# 中运行一些代码，等待几秒钟，然后继续？我知道你可以使用计时器，但有没有更简单、更快捷的方法？像批量一样，您可以执行以下操作：

```
echo Hello
ping localhost -n 10 > nul
echo World
pause > nul 
```

那么我可以在 C# 中执行此操作，它是否可以与 Winforms 或仅控制台一起使用，因为我需要它用于 Winforms... [编辑] 我只需要一个方法来暂停，但应用程序的其余部分仍然继续。例如，如果我有一个按钮，单击，然后 5 秒后继续调用的其余方法。但与此同时，还能按其他按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:28:32.740

开始调用？

```
new Action(() => {
    Console.WriteLine("Waiting...");
    Thread.Sleep(10000);
    Console.WriteLine("Over");
}).BeginInvoke(null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:54:48.453

是的 - 您可以调用[`Thread.Sleep`](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)，传递所需的毫秒数。您正在运行的代码将暂停，等待您经过的毫秒数，然后继续执行。这种技术是通用的——它可以在 winforms 或控制台应用程序中工作。

在 winforms 中，您不应`Thread.Sleep`从 UI 线程进行调用。相反，您应该将您的方法一分为二——在延迟之前和延迟之后，使用 生成一个线程`Sleep`，然后通过 调用代码的第二部分`Invoke`。

```
// This is your old method
void OnClick(object sender, EventArgs e) {
    // ... before the delay
    Thread.Sleep(1000);
    // After the delay
}

// This is your new method
void OnClick(object sender, EventArgs e) {
    // ... before the delay
    new Thread(() => {Thread.Sleep(1000); Invoke(Continuation); }).Start();
}

void Continuation() {
    // After the delay
} 
```

# jquery - 结合jQuery-ui datepicker的本地化和初始化参数

> ID：10255516
> 
> 赞同：8
> 
> 时间：2012-04-21T01:52:23.807
> 
> 标签：jquery, jquery-ui, localization, jquery-ui-datepicker

我想让我的本地化日期选择器不允许某些日期选择。

本土化：

```
$("#datepicker").datepicker($.datepicker.regional["fr"]); 
```

没有周末：

```
$("#datepicker").datepicker({ beforeShowDay: $.datepicker.noWeekends }) 
```

我不知道如何将两者结合起来？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T05:46:38.730

`$.datepicker.regional`属性属性包含一个本地化数组；它们本身是[datepicker options](http://api.jqueryui.com/datepicker/)的“预设” 。要附加您的选项（必要时覆盖）：

```
// use $.extend to merge preset options plus your options
$("#datepicker1")
    .datepicker($.extend({}, $.datepicker.regional.fr, {
        beforeShowDay: $.datepicker.noWeekends
    }));

// initialize the datepicker, then use .datepicker("option", options) method twice
$("#datepicker2")
    .datepicker()
    .datepicker("option", $.datepicker.regional.fr)
    .datepicker("option", "beforeShowDay", $.datepicker.noWeekends); 
```

[**演示（参见示例 5）**](http://salman-w.blogspot.com/2013/01/jquery-ui-datepicker-examples.html)

# php - PHP - 按键值分组数组

> ID：10255517
> 
> 赞同：0
> 
> 时间：2012-04-21T01:52:28.823
> 
> 标签：php, multidimensional-array, group-by

尝试根据它的索引是否可以被那里整除来对数组进行分组。我已经尝试了 for 循环和 foreach 循环的各种组合以及 if($i % 3 == 0) ... 但是，它并没有按照我需要的方式输出。

这是一个大大简化的数组（原始数据包含很多高度敏感的信息......）

原始数组与此类似：

```
$item[0]['Section 1']['Item 2'] => 1334;
$item[1]['Section 2']['Item 3'] => 15454;
$item[2]['Section 3']['Item 4'] => 1452;
$item[3]['Section 4']['Item 5'] => 1341;
$item[4]['Section 5']['Item 6'] => 1788655;
$item[5]['Section 6']['Item 7'] => 13;
$item[6]['Section 7']['Item 8'] => 142;
$item[7]['Section 8']['Item 9'] => 15678;
$item[8]['Section 9']['Item 10'] => 15542;
$item[9]['Section 10']['Item 11'] => 16578;
$item[10]['Section 11']['Item 12'] => 18452;
$item[11]['Section 12']['Item 13'] => 16565; 
```

我正在尝试对每 3 条记录进行分组，如下所示：

```
$newitem[0]['Section 1']['Item 2'] => 1334;
$newitem[0]['Section 2']['Item 3'] => 15454;
$newitem[0]['Section 3']['Item 4'] => 1452;
$newitem[1]['Section 4']['Item 5'] => 1341;
$newitem[1]['Section 5']['Item 6'] => 1788655;
$newitem[1]['Section 6']['Item 7'] => 13;
$newitem[2]['Section 7']['Item 8'] => 142;
$newitem[2]['Section 8']['Item 9'] => 15678;
$newitem[2]['Section 9']['Item 10'] => 15542;
$newitem[3]['Section 10']['Item 11'] => 16578;
$newitem[3]['Section 11']['Item 12'] => 18452;
$newitem[3]['Section 12']['Item 13'] => 16565; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:59:48.230

建议使用`array_chunk` [http://www.php.net/manual/en/function.array-chunk.php](http://www.php.net/manual/en/function.array-chunk.php)

```
$item = array_chunk($item, 3); 
```

或者

```
$newItem = array ();
$x = 0;
$t = 0;
foreach ( $item as $value ) {
    if ($x < 3) {
        $newItem [$t] [$x] = $value;
        $x ++;
    } else {
        $t ++;
        $x = 0;
        $newItem [$t] = array ();
    }
}

var_dump ( $newItem ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:00:25.323

[array_chunk](http://www.php.net/manual/en/function.array-chunk.php)是您需要的。并且您应该像二维数组一样迭代新数组，因为您可以看到您的新数组对于 3 个元素具有相同的索引 0。

尝试：

[http://www.php.net/manual/en/function.array-chunk.php](http://www.php.net/manual/en/function.array-chunk.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T02:03:16.403

这应该这样做：

```
$newindex = 0;
$newitem = array();
for($i = 0; $i < count($item); ++$i)
{
    $newindex = (int) $i / 3;
    if(!isset($newitem[ $newindex ]))
        $newitem[ $newindex ] = array();

    $newitem[ $newindex ] = array_merge($newitem[ $newindex ], $item[ $i ]);
} 
```

[链接到输出](http://pastie.org/private/ccbqpv35o7xk7ns9bzblxw)（转储`$newitem`）

诀窍是`(int) $i / 3`, 将`$i`, 除以`3`，然后强制转换为`int`截断任何小数位。

# cxxtest - 关于 cxxtest 的宏定义

> ID：10255520
> 
> 赞同：1
> 
> 时间：2012-04-21T01:53:02.340
> 
> 标签：cxxtest

我在vc6下使用cxxtest4.0.3做测试。一开始编译报告strcmp不是std的成员。在我将 CXXTEST_OLD_STD 宏添加到项目设置后，编译器在“CXXTEST_STD(string) _s;”行报告缺少字符串的类型信息。

我应该如何设置宏定义？先谢谢了。

这是示例代码：

```
#include <cxxtest/TestSuite.h>
class CSimpleTest : public CxxTest::TestSuite  
{  
public:  
    void testCxx(void){TS_ASSERT(10 == 0); }  
}; 
```

这是错误消息：
error C2039: 'strcmp' : is not a member of 'std'
cxxtest\testmain.h 中的行报告错误消息：

```
if ((CXXTEST_STD(strcmp)(argv[i],"-h")==0) || (CXXTEST_STD(strcmp)(argv[i],"--help")==0)) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:54:36.540

我无法访问 MS Visual Studio 6，但这不是有点过时吗？[根据Wikipedia](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_6.0_.281998.29) ，它于 1998 年 6 月发布，第一个 C++ 标准于 1998 年 11 月发布。所以，我怀疑您的 C++ 编译器太旧，无法被[cxxtest](http://cxxtest.com/)支持。

您可以查看以下选项`cxxgentest`：

```
--no-std              Do not use standard library (even if found in tests). 
```

您可以使用 来检查其他选项`cxxgentest --help`。

* * *

告诉您 cxxtest 4.0.3 在带有 G++ 的 MacOS X 10.7.3 上工作 find 并没有多大帮助`i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)`，但它确实 - 或者，至少，您的示例程序编译为目标文件而没有以下警告：

```
bin/cxxtestgen -o cxt.cpp test.simple.cpp
g++ -I. -c -Wall -Wextra -o cxt.o cxt.cpp 
```

# xmlhttprequest - 解释 XMLHttpRequest 创建

> ID：10255522
> 
> 赞同：10
> 
> 时间：2012-04-21T01:53:57.257
> 
> 标签：xmlhttprequest

我正在从 w3schools 学习 XMLHttpRequest。我不明白下面的代码片段。表示什么`window.XMLHttpRequest`？是什么让它对或错？这整个 if/else 结构是否仅用于解释 ie6 和 ie5，如果是，是否可以全部替换为一行`xmlhttp = new XMLHttpRequest()`？

```
 if (window.XMLHttpRequest) {
     // code for IE7+, Firefox, Chrome, Opera, Safari
     xmlhttp = new XMLHttpRequest();
 } else {
     // code for IE6, IE5
     xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:59:09.650

是的，我同意 harschware，拥有一些跨浏览器工具会有所帮助，因为它是一个复杂的领域。

`XMLHTTPRequest`上面的代码是一个创建对象的跨浏览器代码片段。

它结构良好，因为它依赖于功能检查而不是浏览器检查。请参阅本文“功能检测而不是浏览器检测”： [http ://www.javascripttoolbox.com/bestpractices/](http://www.javascripttoolbox.com/bestpractices/)

所以这：

```
if (window.XMLHttpRequest) 
```

-- 检测浏览器是否具有作为全局函数（窗口对象的成员）实现的 XMLHttpRequest 功能，如果是，则 XMLHttpRequest 对象是以这种方式构造的。

否则，代码会盲目地假设它可以通过调用 ActiveXObject 函数来创建 XMLHttpRequest，如前所述，这是在 IE5 和 IE6 中创建此类对象的方法。

最后一个假设可能不正确，因为浏览器甚至可能没有该功能，或者它可能以不同的方式实现。最后一种情况可能会引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T07:59:47.173

> ## 概括
> 
> `...``if (window.XMLHttpRequest) { ... }`仅在支持标准 XHR 时才评估in 。否则，ActiveX 用于支持 IE5-6。

要检查是否支持`XMLHttpRequest`API^([规范](http://www.w3.org/TR/XMLHttpRequest1/#toc))，请测试全局`XMLHttpRequest`对象是否存在。由于`window`是全局对象，因此只需检查`window.XMLHttpRequest`属性的存在。^({1})

如下图所示，`!`是*逻辑 NOT*运算符，用于在 中显示结果`if (window.XMLHttpRequest)`。

```
 if (window.XMLHttpRequest)
    // Supported:
    !!window.XMLHttpRequest === !![object XMLHttpRequest] === !false === true
    // Not supported, so the property does not exist, and is undefined
    !!window.XMLHttpRequest === !!undefined               === !true  === false 
```

但是，这还不是故事的结局。XHR 的概念起源于微软，它是第一个在他们的浏览器中实现它的人，通过`ActiveXObject`：Internet Explorer 5.0。后来，在 7.0 版中，Microsoft 增加了对标准化 XHR API 的支持。

没有人关心 IE5 了。然而，仍然有相当数量的 IE6 用户（大约 1%）。因此，通过以下方式支持 IE5-6 也无妨：

```
... } else { xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); } 
```

* * *

{1}：要考虑的其他方法：

*   `if (typeof window.XMLHttpRequest !== 'undefined')`- 这也行。
*   `if (XMLHttpRequest)`-**不应该使用**。当变量不存在（=未声明）时，`ReferenceError:`抛出 XMLHttpRequest is undefined`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T15:50:46.597

[XMLHTTP 的故事](http://www.alexhopmann.com/xmlhttp.htm)分享了一些关于 XMLHTTP 和 XMLHttpRequest 的有趣历史。长话短说，Microsoft 将 XMLHTTP 作为 ActiveX 对象引入，您需要使用`new ActiveXObject("Microsoft.XMLHTTP")`或创建它，有关更多信息`new ActiveXObject("MSXML2.XMLHTTP.6.0")`，请参阅[在 Internet Explorer 中使用正确版本的 MSXML](http://blogs.msdn.com/b/xmlteam/archive/2006/10/23/using-the-right-version-of-msxml-in-internet-explorer.aspx)。后来其他浏览器厂商发现这个组件很有用，并与 W3C 合作，以 XMLHttpRequest 的名义对其进行标准化，XMLHttpRequest 是 window 对象的原生对象，可以用`new XMLHttpRequest()`. 然而，由于并非所有浏览器都支持 XMLHttpRequest 对象，例如 IE6 和 IE5，一种常见的做法是检测 XMLHttpRequest 对象是否是 window 对象的有效对象，`if (window.XMLHttpRequest)`如果是，则使用 new 创建它，否则尝试回退到 XMLHTTP ActiveX。希望这可以帮助。

# php - 如何将 PHP 变量传递回调用它的 Javascript 页面

> ID：10255524
> 
> 赞同：-1
> 
> 时间：2012-04-21T01:54:07.913
> 
> 标签：php, javascript, variables

目前，我有一个 Javascript 文件（在客户端上运行），我从中调用一个 PHP 文件（在服务器上）。PHP 文件完成后，我想将三个变量传递回客户端上运行的 javascript。我想出了如何让 javascript 等待 php 文件完成执行，所以这不是问题。问题是将变量传递回 javascript 文件。这可以做到吗？我见过的所有示例都有某种混合 javascript/php 文件。我希望找到某种方法来传递 php 变量，就像 jquery.ajax 一样。我不知道这是否可以做到，因为我对 Javascript 和 PHP 还很陌生。谢谢，

javascript:

```
<html>
    <head>
        <title>Login Page</title>
    </head>
    <script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script language="Javascript">
        function calculations(callback)
        {
            var x = <?php echo $username?>;
            alert(x);
            var password = window.prompt("Please Type Your Password");
        }//ends the calculations function
        function getUsername()
        {
            var username = window.prompt('Please Type Your Username');
            var temp = document.getElementById('temp');
            temp.innerHTML = username;
            jQuery.ajax(
                {
                    type: "POST",
                    url:"GetInfo.php",
                    data: "username="+username,
                    success: function(msg)
                            {callback.call();}

                });//ends the jQuery send

        }//ends the GetUsername function
    </script>
    <body onLoad=getUsername()>
        <div id="temp">This will show text</div>

    <body>

</html> 
```

php:

```
<?
//$username = $_POST['username'];
$username = "tom";
$inFile="MyID.config.php";
$handle=fopen($inFile, 'r') or die ("No credentials could be gotten because the file MyID.config.php would not open.");
$data='0';

do{
$data = fgets($handle);
$temp = substr($data,0, 10);
//echo $temp.strcmp($temp,'\'username\'')."\n";
}while (strcmp($temp, '\'username\'')!= 0);

$data = substr($data,15,strlen($username));

if (strcmp($data, $username == 0) )
{
    $read_in = fgets($handle);
    $x = substr($read_in,8,-3);
    $read_in = fgets($handle);
    $y = substr($read_in,8,-3);
    $read_in = fgets($handle);
    $salt = substr($read_in,11,-3);
}//ends the strcmp $data and $username if statement.
fclose($handle);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:55:34.213

要将数据传回调用脚本的 Javascript，只需像这样回显：

```
$value = 'foobar';
echo $value; 
```

对于多个值，您可以将其作为 JSOn 对象传回

```
$name = 'foobar';
$text = 'helloworld';
$value = 5;

//add to associative array

$result['name'] = $name;
$result['text'] = $text;
$result['value'] = $value;

// encode as json and echo
echo json_encode($result); 
```

在 Javascript 方面，您的回调函数将收到以下信息：

```
function callback(data){
    var result = JSON.parse(data);
    //access the members
    console.log(result.name);
    console.log(result.text);
    console.log(result.value);
} 
```

# spring - 为什么Spring的源码这么多用链表

> ID：10255529
> 
> 赞同：3
> 
> 时间：2012-04-21T01:54:58.657
> 
> 标签：spring

在过去的几年里，我不得不深入研究 Spring 的源代码。我注意到开发人员真的很喜欢链表。我不确定他们为什么选择它作为他们的列表实现而不是数组列表。有谁知道为什么做出这个延期决定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:02:19.020

这真的取决于使用情况。但也许是因为增长链接列表时的空间复杂度很便宜，如果你只是迭代一个集合，你不做任何查找操作，这是一个不错的选择。回想一下，ArrayList 实现有一个几何增长模型，如果您不知道先验列表有多大，那么这是一个糟糕的选择。使列表超过当前容量将导致当前数组被复制到当前容量两倍的新数组中。

# c# - 将程序集加载到新的 AppDomain 以进行静态类/方法调用时出现问题

> ID：10255532
> 
> 赞同：2
> 
> 时间：2012-04-21T01:55:21.127
> 
> 标签：c#, .net, appdomain, .net-assembly, assembly-resolution

我在通过 C# 执行 .NET 程序集时遇到了一些重大问题。我想从一个静态类调用一个静态方法（Main）。我让它在当前域中工作，但显然我无法从那里卸载程序集。

首先，我尝试创建一个新的 AppDomain：

```
AppDomain domain = AppDomain.CreateDomain("PluginDomain"); 
```

由于我的主要问题是解决我要加载的程序集，因此我尝试挂钩 AssemblyResolve 事件：

```
domain.AssemblyResolve += new ResolveEventHandler(this.OnAssemblyResolve); 
```

但是，我得到一个关于序列化的错误（即这个类）。

我已经成功加载了一个程序集文件，该文件恰好位于 BaseDirectory 中，只需使用：

```
domain.Load("Assembly1"); 
```

但是有问题的程序集位于 BaseDirectory 的两个子目录中，即。BaseDirectory\dir1\dir2\Assembly2.dll - 使用带有字符串程序集名称的 domain.Load() （将 PrivateBinPath 设置到正确的子目录位置）以及使用带有程序集字节的 domain.Load() 时，我得到 FileNotFoundException （来自 File.ReadAllBytes()）。

~~我知道 AppDomain.Load() 已被弃用，但考虑到我不想强制包含静态方法的类为非静态且可实例化，这对我来说似乎是唯一可用的方法。~~

无论如何，我该怎么做才能确保将程序集文件正确加载到新的 AppDomain 中？

我的主要目标是从程序集中动态执行一个方法，该方法可以调用我自己的程序，但在必要时还必须完全卸载程序集。它的目的是有点像一个插件系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T02:51:25.300

Assembly.AssemblyResolve 的事件处理程序必须位于应加载此程序集的同一 AppDomain 中。这是因为此处理程序必须返回对 Assembly 实例的引用，但一旦您引用了程序集，它就会自动加载，因此程序集将加载到两个 AppDomain 中。

我建议您在与主应用程序相同的目录中创建小的单独程序集。这个程序集只包含一个从 MarshalByRefObject 派生的帮助类，它可以处理程序集解析/加载，并且可以提供调用所需的插件静态方法。将此程序集加载到要加载插件的每个 AppDomain，创建 hepler 类的实例并调用它。

```
public class HelperClass: MarshalByRefObject
{
    public void LoadPlugin(string PluginFileName)
    {
        //Load plugin assembly or register handler for Assembly.AssemblyResolve
        //AppDomain.CurrentDomain.Load()
        //AppDomain.CurrentDomain.AssemblyResolve += ...
        //Call plugin's static method
    }
}

AppDomain domain = AppDomain.CreateDomain("PluginDomain");
domain.Load("plugin_helper.dll");
HelperClass helper = (HelperClass)domain.CreateInstanceAndUnwrap("plugin_helper.dll", "HelperClass");
helper.LoadPlugin("plugin1.dll"); 
```

# python - Communication between Python and WCF

> ID：10255538
> 
> 赞同：3
> 
> 时间：2012-04-21T01:56:15.070
> 
> 标签：python, wcf, notifications, pooling

I have multiples servers (200-300) in Python 2.4 calling a WCF service using REST. I would like to be able to notify those servers of some changes that occured on the WCF service instead of asking all servers in Python to do some pooling to detect such changes.

How can I do such broadcast, notification to avoid the pooling?

Thanks Sylvain

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:49:48.860

消息总线似乎是正确的选择。您可能想看看[ZeroMQ](http://www.zeromq.org)。它是跨平台的，并且具有多种语言的绑定。

# static - 静态指的是“卡住”什么？

> ID：10255540
> 
> 赞同：0
> 
> 时间：2012-04-21T01:56:30.887
> 
> 标签：static, terminology

我试图给自己一个静态这个词的映射概念（使用我当前对静​​态的名词定义，对形容词定义没有很好的理解），但似乎非静态变量和方法实际上是“卡住” （或者更好的说法是引用/引用）对象/实例。那么实际上描述声明的方法/变量的术语静态是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:34:45.407

“静态”和“动态”这两个词在编程术语中经常被用作对立面。

动态的东西是变化的东西；在类的上下文中，它对每个实例（对象）具有不同的值或行为。

静态的东西不会改变；它处于停滞状态。因此，类的静态变量不会在每个实例中采用不同的值。

静电不动；它卡在一个地方，在你的袜子上。动态电力，在电线中运动，可以做更强大的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:06:34.543

我认为这里的这个问题提供了一个非常详细的答案：[什么是“静态”？](https://stackoverflow.com/questions/913560/what-is-static)

的概念`static`与某物是类还是对象（实例）的一部分有关。

在`main`声明为 的方法的情况下`static`，它表示该`main`方法是类方法 - 一种方法，它是类的一部分，而不是对象的一部分。这意味着另一个类可以通过引用`ClassName.method`. 例如，调用 run 方法`MyClass`将通过以下方式完成：

```
MyClass.main(new String[]{"parameter1", "parameter2"}); 
```

另一方面，没有`static`修饰符的方法或字段意味着它是对象（或也称为“实例”）的一部分，而不是类的一部分。它由方法或字段所属的特定对象的名称来引用，而不是类名：

```
MyClass c1 = new MyClass();
c1.getInfo()     // "getInfo" is an instance method of the object "c1" 
```

由于每个实例可能具有不同的值，因此不同对象中具有相同名称的方法或字段的值不一定必须相同：

```
MyClass c1 = getAnotherInstance();
MyClass c2 = getAnotherInstance();

c1.value     // The field "value" for "c1" contains 10.
c2.value     // The field "value" for "c2" contains 12.
             // Because "c1" and "c2" are different instances, and 
             // "value" is an instance field, they can contain different
             // values. 
```

结合实例变量和类变量这两个概念。假设我们声明了一个包含实例和类变量和方法的新类：

```
class AnotherClass {
    private int instanceVariable;
    private static int classVariable = 42;

    public int getInstanceVariable() {
        return instanceVariable;
    }

    public static int getClassVariable() {
        return classVariable;
    }

    public AnotherClass(int i) {
        instanceVariable = i;
    }
} 
```

上面的类有一个实例变量`instanceVariable`和一个用修饰符`classVariable`声明的类变量。`static`同样，有一个实例和类方法来检索值。

实例的构造函数将一个值作为参数分配给实例变量。类变量被初始化为`42`永远不会改变。

让我们实际使用上面的类，看看会发生什么：

```
AnotherClass ac1 = new AnotherClass(10);

ac1.getInstanceVariable();             // Returns "10"
AnotherClass.getClassVariable();       // Returns "42" 
```

请注意调用类和实例方法的不同方式。他们通过名称引用类`AnotherClass`或通过名称引用实例的方式`ac1`。让我们进一步看看这些方法的行为差异：

```
AnotherClass ac1 = new AnotherClass(10);
AnotherClass ac2 = new AnotherClass(20);

ac1.getInstanceVariable();             // Returns "10"
AnotherClass.getClassVariable();       // Returns "42"
ac2.getInstanceVariable();             // Returns "20"
AnotherClass.getClassVariable();       // Returns "42" 
```

可以看出，实例变量是由对象（或“实例”）持有的变量，因此对于该特定实例是唯一的，在本例中是 和 引用的`ac1`对象`ac2`。

另一方面，类变量只对整个类是唯一的。为了更好地理解这一点，让我们添加一个新方法到`AnotherClass`：

```
public int getClassVariableFromInstance() {
    return classVariable;
} 
```

然后，运行以下命令：

```
AnotherClass ac1 = new AnotherClass(10);
AnotherClass ac2 = new AnotherClass(20);

ac1.getInstanceVariable();             // Returns "10"
ac1.getClassVariableFromInstance();    // Returns "42"
ac2.getInstanceVariable();             // Returns "20"
ac2.getClassVariableFromInstance();    // Returns "42" 
```

虽然`getClassVariableFromInstance`是一个实例方法，但通过引用实例`ac1`和调用可以看出`ac2`，它们都返回相同的值，`42`。这是因为在这两种实例方法中，它们都引用类唯一的类方法，而不是实例——类`classVariable`只有一个副本。`classVariable``AnotherClass`

我希望有些东西可以澄清`static`修饰符的用途。

[Sun的 Java 教程](http://java.sun.com/docs/books/tutorial/index.html)有一个名为“[了解实例和类成员](http://java.sun.com/docs/books/tutorial/java/javaOO/classvars.html)”的部分，其中还介绍了两种类型的变量和方法。

# git - 未找到 Git 存储库

> ID：10255543
> 
> 赞同：2
> 
> 时间：2012-04-21T01:57:30.730
> 
> 标签：git, github, osx-lion

我第一次尝试使用 Git。

我做了 github 指令所说的所有事情，但是当我得到：

```
 git push -u origin master 
```

我输入：

```
 /Users/name/Documents/Xcode.app/Contents/Developer/usr/bin/git push -u origin master 
```

并得到错误：

```
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

我还尝试将我的 git 路径设置为上述路径，因为它说找不到 git，但路径不起作用。所以我只是把整个事情都打出来了。当我这样做时`sudo find / -name git`，它为 git 提供了上述目录，以及一些我不确定的其他目录，例如

*   /Applications/Xcode.app/Contents/Developer/usr/bin/git
*   /Applications/Xcode.app/Contents/Developer/usr/libexec/git-core/git
*   /Applications/Xcode.app/Contents/Developer/usr/share/git-core/python/git_remote_helpers/git
*   /Users/name/Documents/Xcode.app/Contents/Developer/usr/share/git-core/python/git_remote_helpers/git

和我使用的那个：

*   /Users/name/Documents/Xcode.app/Contents/Developer/usr/bin/git

我看到用于设置 git 存储库的所有其他命令似乎都可以正常工作。
其他设置命令包括

```
 mkdir fbPic2
    cd fbPic2
    <path to git>/git init
    touch README
    <path to git>/git add README
    <path to git>/git commit -m 'first commit'
    <path to git>/git remote add origin git@github.com:michcleary/fbPic2.git
    <path to git>/git push -u origin master #didn't work 
```

我试图寻找`.git/config`但找不到它。

我希望外面有人知道这件事。它说我需要安装 Git 才能在教程中创建 Facebook 应用程序。我有一台安装了 Lion 的 Mac Mini。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T03:36:48.703

绝对的第一步是让 Xcode 安装“命令行工具”。这样做会将工具放入 /usr/bin - 它已经在您的 PATH 中。转到“Xcode”::“Preferences”::“Downloads”:“Components”，其中应该有一个安装“命令行工具”。如果没有，请转到“Xcode”::“打开开发者工具”::“更多开发者工具”并下载最新的命令行工具。现在，'git' 将在你的路径中。也应该是'git help'也有效！

现在配置 git（如@johnsyweb 建议的那样）：

```
git config --global user.name "full name"
git config --global user.email  "email address" 
```

对于 GitHub：

```
 git config --global github.user "github username"
   git config --global github.token "github token" 
```

您需要按照 GitHub 的说明获取令牌。您还需要仔细遵循 GitHub SSH 说明。在上面的“git config”命令之后，你将准备好一个 ~/.gitconfig 文件。

大概您已经创建了一个 GitHub 存储库。如果没有，你必须。[看起来您还没有公共存储库。] 创建一个后，获取本地存储库设置的最简单方法很简单：

```
git clone git@github.com:michcleary/fbPic2           # cut and past the URI from the GitHub page after creating a repo
cd fbPic2
echo "more stuff" >> README.md
git add 
git commit -m 'stuff'
git push 
```

完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T19:02:40.123

我花了几个星期的时间，得出的结论是，mac 上的 git 应用程序使用 https 远程存储库 url，但是在使用该术语时，您需要 ssh url。为了解决这个问题，我单击了 github 应用程序中的设置选项卡，然后将 github 站点中的 ssh url 粘贴到我的 repo 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T02:39:41.387

首先，我建议您添加`<path to git>`到`PATH`环境变量中。您可能会通过编辑`${HOME}/.bashrc`和添加来做到这一点：

```
export PATH=${PATH}:<path to git> 
```

远程存储库肯定存在于[https://github.com/michcleary/](https://github.com/michcleary/)。

您似乎没有使用您的姓名和电子邮件地址在本地配置 Git，这就是您看不到 Git 配置文件的原因。

有很多方法可以做到这一点，但我建议您按照 GitHub 的[“设置您的用户名、电子邮件和 GitHub 令牌”](http://help.github.com/set-your-user-name-email-and-github-token/)页面中的说明为本地计算机上的所有 Git 实例进行设置：

```
$ git config --global user.name "Firstname Lastname"
$ git config --global user.email "your_email@youremail.com" 
```

这会将这些值添加到`${HOME}/.gitconfig`.

特定于存储库的值将存在于`/path/to/fbPic2/.git/config`（`.git`是一个隐藏目录）。

您应该在发出任何其他命令（例如or或）*之前*设置这些配置项。`git``init``commit``push`

我还建议查看 GitHub 的[“SSH 问题”](http://help.github.com/ssh-issues/)页面，因为这通常对首次使用 GitHub 的用户很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T19:16:04.553

在我的情况下，用户没有适当的权限。在我使用具有适当权限的用户后，错误消失了。

# javascript - 如何 XHR 远程服务器？

> ID：10255544
> 
> 赞同：1
> 
> 时间：2012-04-21T01:58:37.787
> 
> 标签：javascript, ajax, xmlhttprequest

以下代码是否足以用于 XHRing 远程服务器？与普通 XHR 代码唯一不同的是，我将完整的服务器 URL 放入 XHR 对象的 open 方法的 URL 参数中。我不确定这是否足够？它没有用；所以我不确定缺少什么。

```
<script type="text/javascript">
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","http://insertURLofRemoteServerHere.com?parameter1=true",true);
xmlhttp.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:02:20.033

通常，Javascript 只能将 xhrs 发送到加载 javascript 的服务器。它被称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。我怀疑这就是阻止你的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:04:04.693

您的代码在大多数情况下似乎是正确的。您正在处理跨浏览器兼容性等。但是，[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)将不允许您从远程服务器上的脚本接收响应。

如果远程服务器支持[JSON-P](http://en.wikipedia.org/wiki/JSONP)响应格式，则可以解决此问题。

另一种解决方法是服务器是否支持[Cross Origin Resource Sharing](https://developer.mozilla.org/en/http_access_control)。但是，从个人经验来看，这是参差不齐的。如果服务器支持，我会使用 JSON-P。

（旁注：如果你使用像 Jquery 这样的库/框架，你可以让你的生活变得更加简单。上面的代码片段可以压缩为 3-4 行代码，并且框架将负责跨浏览器的兼容性。）

# javascript - 使用函数构造器创建 Javascript 反对

> ID：10255547
> 
> 赞同：0
> 
> 时间：2012-04-21T01:59:48.257
> 
> 标签：javascript, closures

我期待obj是F1的实例（'this.prop'中的'this'指的是下面代码片段中的F1对象，同样我认为C1的'return this'中的'this'指的是F1，但事实并非如此.它是指Global Window对象），但实际上它是一个Window的实例。这是为什么 ？你能解释一下吗？

```
function F1() {
  this.prop = 5;
  function C1() {
   return this;
  }
  return C1();
}
var obj = new F1(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:07:58.060

如果您只是创建 的实例`F1`，那么只需执行以下操作：

```
function F1() {
  this.prop = 5;
}
var obj = new F1(); 
```

你不需要返回任何东西。

* * *

`this`里面和外面`C1`不一样`this`。如果您想保留`this`外部以便`C1`可以使用它，请将其存储到另一个变量中

```
function F1() {

    //preserve "this" from outside 
    var that = this;

    this.prop = 5;

    function C1() {
       return that; //"that" is "this" of the outside
    }
} 
```

# ruby-on-rails - rails，如何从 link_to 助手传递变量

> ID：10255548
> 
> 赞同：0
> 
> 时间：2012-04-21T02:00:00.240
> 
> 标签：ruby-on-rails, routes, link-to

在我的 routes.rb 我有

```
match "monsters/:category" => "monsters#index" 
```

我有一堆链接，例如

*   水
*   火
*   地球
*   飞行

但是我无法通过“水”或“火”作为我路线的：类别。我该怎么做？

我尝试了类似...

```
<%= link_to "Water", "monsters/water"(:category => "water") %> 
```

但在语法上我不能这样做。我如何将“水”作为 :category 符号传递？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:04:51.987

您无需`category`在**link_to**中指定 : 。这样做时：

```
<%= link_to "Water", "monsters/water" %> 
```

您的路线会将水与`:category`参数相匹配，因此在您的控制器中您可以访问`params[:category]`并且**水**将是值。请注意，在路线中，您已经说过“monsters/”之后的任何内容都将被识别为类别参数。

请注意，如果您有[Named Routes](http://railscasts.com/episodes/34-named-routes)，则可以传递如下参数：

```
<%= link_to "Up", monster_path(:category => "water") %> 
```

# javascript - 使用 JQuery 和 AJAX 的多个 GET 请求

> ID：10255555
> 
> 赞同：1
> 
> 时间：2012-04-21T02:01:21.077
> 
> 标签：javascript, jquery, ajax

这里对 JQuery AJAX 非常陌生。我一直在四处寻找答案，但找不到答案。

我有一个用户会填写的表格。填好后点击提交。这将启动对 asp 页面的 ajax 调用，基本上只显示输入的信息并淡出用户表单。下面的确认按钮将用户带到另一个 .asp 页面，该页面将其放入数据库并为他们提供票号。

我的问题是，在第二次调用（进行输入的页面）时，我在 firebug 中注意到 get 发生了两次。如果我单独尝试asp页面，它只会输入一次，所以它不是我的sql代码。如果我用第一个切换第二个 .asp 页面，它工作正常。

这是我的jQuery。我感谢任何评论。谢谢

```
 $('#submit').click(function (event){
event.preventDefault(); // DECLARE EVENT IN THE CLICK FUNCTION

//Get the data from all the fields 
var posting = 'no';
var firstname = $('input[name="firstname"]');
var lastname = $('input[name="lastname"]');
var phone = $('input[name="phone"]');
var email = $('input[name="email"]');
var family_size = $('select[name="family_size"]');
var date_3 = $("#date3");
var date_4 = $("#date4");
var book_option = $('input[name=book_option]:radio:checked');
var payment_type = $('input[name=payment_type]:radio:checked');
var comments = $('textarea[name="comments"]');

if (firstname.val()=='') { 
       firstname.addClass('fn_error');
       firstname.focus(); 
       return false;       
} else 
    firstname.removeClass('fn_error');

if (lastname.val()=='') {
       lastname.addClass('ln_error');
       lastname.focus();
       return false;       
} else 
    lastname.removeClass('ln_error');

if (phone.val()=='') {
       phone.addClass('fn_error');
       phone.focus();
       return false;       
} else 
    phone.removeClass('fn_error');

if (email.val()=='') { 
      email.addClass('ln_error');
      email.focus();
      return false;        
} else 
    email.removeClass('ln_error');

// TEST FOR VALID EMAIL
var email_pattern=new RegExp("^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$");
var email_result = email_pattern.test(email.val());
if( email_result == true ) {
    email.removeClass('fn_error');
}else{
    email.addClass('fn_error');
    email.focus();
    return false;
}

// TEST FOR VALID PHONE NUMBER
var phone_pattern= 
    new RegExp("^(\\(?\\d\\d\\d\\)?)?( |-|\\.)?\\d\\d\\d( |-|\\.)?\\d{4,4}(( |-|\\.)?[ext\\.]+ ?\\d+)?$");
var phone_result = phone_pattern.test(phone.val());
if( phone_result == true ) {
    phone.removeClass('fn_error');
}else{
    phone.addClass('fn_error');
    phone.focus();
    return false;
}

var dataString= 'firstname=' + firstname.val() + '&lastname=' + lastname.val() + '&phone=' + phone.val() + '&email=' + email.val() + '&family_size=' + family_size.val() + '&date3=' + date_3.val() + '&date4=' + date_4.val() + '&book_option=' + book_option.val() + '&payment_type=' + payment_type.val() + '&comments=' + comments.val() + '&posting=' + posting;

//alert(dataString);  
$('#ticketform').fadeOut('slow', function() {
    $('#testdiv').load('../resources/confirm_ticket.asp', dataString, function() {
        $('#generateform').fadeIn('slow');
        $('#submit').unbind('click');
    });

}); // LOAD CLOSE
}); // SUBMIT CLICK FUNCTION CLOSE

$('#gen').click(function (event){
event.preventDefault(); // DECLARE EVENT IN THE CLICK FUNCTION

var firstname = $('input[name="firstname"]');
var lastname = $('input[name="lastname"]');
var phone = $('input[name="phone"]');
var email = $('input[name="email"]');
var family_size = $('select[name="family_size"]');
var date_3 = $("#date3");
var date_4 = $("#date4");
var book_option = $('input[name=book_option]:radio:checked');
var payment_type = $('input[name=payment_type]:radio:checked');
var comments = $('textarea[name="comments"]');

var dataString= 'firstname=' + firstname.val() + '&lastname=' + lastname.val() + '&phone=' + phone.val() + '&email=' + email.val() + '&family_size=' + family_size.val() + '&date3=' + date_3.val() + '&date4=' + date_4.val() + '&book_option=' + book_option.val() + '&payment_type=' + payment_type.val() + '&comments=' + comments.val();

alert(dataString);  
$('#testdiv, #generateform').fadeOut('slow', function() {
    $('#message').load('../resources/generate_ticket.asp', function() {
        $('#message').fadeIn('slow'); 
    });

}); // LOAD CLOSE

   }); // SUBMIT2 CLICK FUNCTION CLOSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:03:59.907

首先，验证字段是否填写的更好方法是使用 jQuery `$.trim()`，它会修剪开头和结尾的所有空白，因此如果有人输入一堆空格，它仍然会返回 false。你会这样做：

```
if ($.trim(firstname.val())) { 
       firstname.addClass('fn_error');
       firstname.focus(); 
       return false;       
} 
```

这是验证它是否为空的更好方法，但*更好的想法是使用[jQuery Validation 插件](http://docs.jquery.com/Plugins/Validation)，您可以在其中为每个规则简单地放置`class="required"`、`class="required email"`等（如果您也可以在 javascript 中定义它们）更喜欢）。*

另外，我看到你一直在使用`.load`. 你知道有一种东西叫做[`$.get`](http://api.jquery.com/get/)存在吗？这是发送获取请求的一种更强大的方式，您不必将其加载到元素中即可使其工作（还有[`$.post`](http://api.jquery.com/get/)）。我曾经一直使用`.load`自己，直到我发现`$.get`和`$.post`。这是您的代码示例：

```
$.get('../resources/confirm_ticket.asp', dataString, function(data) { // data is what is returned from the request (html, etc.)
        $('#generateform').fadeIn('slow');
        $('#submit').unbind('click');
}); 
```

**无论如何，现在回答你的问题。**

我看不出它为什么会这样做的任何问题，但它可能是浏览器或其他东西的错误（通常不会，但我以前也发生过这种情况，我从未发现如何修复它）。您是否在 Google Chrome 或 Safari 等其他浏览器中尝试过？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:05:50.887

我今天从一个论坛得到了答案。不记得在哪里，但答案是......

```
$('#testdiv, #generateform').fadeOut('slow', function() {
$('#message').load('../resources/generate_ticket.asp', function() {
    $('#message').fadeIn('slow'); 
}); 
```

我在淡出中有 2 个选择器。它为每个选择器调用了两次加载函数。改变了它，现在我只收到一个 GET 请求。感谢大家的帮助！:) 快乐编码！

# javascript - 如何使用主干将“this”传递给事件？

> ID：10255558
> 
> 赞同：3
> 
> 时间：2012-04-21T02:01:38.277
> 
> 标签：javascript, backbone.js

我有一个将函数绑定到点击的事件。单击在同一视图中调用另一个函数。不幸的是，范围不是正确的范围。当我尝试执行 this.otherFunction() 时，分配给单击的函数与 this.otherFunction() 不在同一范围内。有没有办法在 otherFunction() 的范围内传递？

```
initialize: function() {
  this.render();

  if (joinedGoalList.get(this.model.id) != null) {
    this.renderLeaveGoal();
  } else {
    this.renderJoinGoal();
  }
},

events: {
  "keypress #goal-update": "createOnEnter",
  "click #join-goal": "joinGoal",
  "click #leave-goal": "leaveGoal",
},

joinGoal: function() {
  matches = joinedGoalList.where({id: this.model.get("id")});
  if (matches.length == 0) {
    joinedGoalList.create({goal_id: this.model.get("id")}, {wait: true, success: function() {
      var self = this;
      self.renderLeaveGoal();
    }, error: function() {
      console.log("error");
    }});
  }
},

renderLeaveGoal: function() {
  console.log("render leave goal");
  var template = _.template($("#leave-goal-template").html());
  console.log(template);
  $("#toggle-goal-join").html(template());
}, 
```

这些都是同一个观点。

编辑：嗯，现在的问题是我收到了这个错误：未捕获的类型错误：对象 [object DOMWindow] 没有方法“renderLeaveGoal”。这似乎是我保存了错误的范围吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T02:15:14.420

标准技术是做类似的事情

```
var self = this; 
```

然后你可以做

```
self.otherFunction(); 
```

代替

```
this.otherFunction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T08:05:46.840

deltanovember 的回答是正确的，但他没有解释*为什么*它是正确的，我觉得这很重要：

范围在 Javascript 中很混乱。我发现跟踪它的最简单方法是考虑什么*时候*会执行。如果一个代码块立即执行，它可能与“this”在同一范围内运行。如果稍后要调用一个函数，它可能运行在一个完全不同的范围内，具有自己的“this”概念。

在您的示例中，您作为成功回调提供的匿名函数将在稍后运行，并且它不会被限定为与定义所述回调时正在运行的代码相同的“this”。这就是您收到错误的原因：renderLeaveGoal 是在定义回调的范围内定义的，而不是在将执行回调的范围内。

现在，为了使这更加混乱，定义回调时定义的**变量****将**在该回调的范围内可用。这就是 deltanovember 的答案有效的原因。通过在定义成功回调时将“this”伪装在变量中，回调在稍后运行时仍然可以访问它，尽管范围完全不同。

我希望这是有道理的。如果没有，请评论，我会再试一次:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T21:56:06.260

你也可以像这样使用 Underscore 的[bindAll](http://documentcloud.github.com/underscore/#bindAll)函数：

```
initialize: function() {
    _.bindAll(this);
} 
```

在幕后，Underscore 会将对象中的所有函数调用替换为将“this”设置为与原始对象相同的“this”的代理版本。当然，如果您的某个方法内部有自己的匿名回调函数，那么您将需要完成整个“self = this”舞蹈；bindAll 仅修复对象上“外部”方法的上下文。

我已经养成了使用 _.bindAll 作为 View 的每个 initialize() 方法的第一行的习惯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T02:17:38.443

该函数附加到视图，因此您需要从视图对象中调用它。

```
success: this.renderLeaveGoal 
```

在这种情况下，您不需要匿名函数，因为视图函数会自动绑定到视图的上下文。

# video-streaming - 如何使用 Red5 播放视频？

> ID：10255561
> 
> 赞同：2
> 
> 时间：2012-04-21T02:02:23.777
> 
> 标签：video-streaming, red5, jwplayer, rtmp

我让我的托管公司在我的服务器上安装了 Red5，他们向我发送了 RMS 和 RMS HTTP 协议的地址和端口。那么我如何实际上传视频并将其嵌入网页中进行播放？是否有我可以使用的预制应用程序，还是我必须自己创建一个？除了开发代码，我在文档中找不到任何东西。

编辑：看起来我可以使用 JWPlayer 通过 RTMP 播放视频。是否有我需要将视频上传到的特定文件夹，或者我可以将它们放在 Red5 服务器上的任何位置，例如 rtmp://myip/red5/myvideos/video1.mp4 ？

编辑：我已将[Video Whisper 应用程序](http://www.videowhisper.com/?p=RTMP%20Applications)添加到我的 webapps 目录并将文件移动到 videowhisperstreams 目录，但仍然没有运气（JWPlayer 显示，但找不到服务器）这是我的代码：

```
<div id='mediaspace'>This text will be replaced</div>

<script type='text/javascript'>
  jwplayer('mediaspace').setup({
  'flashplayer': 'jwplayer/player.swf',
  'file': 'test.flv',
  'streamer': 'rtmp://myip/videowhisper',
  'controlbar': 'bottom',
  'width': '470',
  'height': '290'
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:11:15.713

我想到了。上面的脚本确实有效，但我将应用程序和视频上传到`/root/red5/webapps`而不是`<root>/opt/red5/webapps`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:42:51.240

试试这个.. 下载 jwplayer swfobject.js , player.swf

[http://blog.deconcept.com/swfobject/](http://blog.deconcept.com/swfobject/)

上传视频

[http://hioxindia.com/faq/domain-hosting/Install-Flash-Media-Encoder.php](http://hioxindia.com/faq/domain-hosting/Install-Flash-Media-Encoder.php)

```
<script type='text/javascript' src='swfobject.js'></script>

<div id='mediaspace'>This text will be replaced</div>

<script type='text/javascript'>
var url='rtmp://myip/red5/myvideos/video1.mp4';
var so = new SWFObject('player.swf','mpl','550','400','9');

so.addParam('allowfullscreen','true');

so.addParam('allowscriptaccess','always');

so.addParam('wmode','opaque');

so.addVariable('file','livestream.flv');

so.addVariable('plugins','livestream-1');

so.addVariable('streamer',url);

so.write('mediaspace');

</script> 
```

# ruby - Ruby：内存中的移位、推送和弹出

> ID：10255564
> 
> 赞同：0
> 
> 时间：2012-04-21T02:02:38.450
> 
> 标签：ruby

我知道 shift、push 和 pop 是用于添加/删除数组元素的数组方法，但我不确定内存中实际发生了什么。例如，pop 方法删除数组的最后一个元素。它让我想起了堆栈中使用的 LIFO 顺序，但我认为该元素并没有像汇编编程中那样真正“弹出”；而不是整个数组的索引被移动。我真的不知道，所以如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T03:36:48.787

Ruby 适用于因您的想法而受苦的程序员。我们相信那些在优化性能和内存管理方面做得最好的程序员。

如果你只是好奇，这里是 Rubinius 中 Array#shift 的代码：

```
def shift(n=undefined)
    Rubinius.check_frozen

    if n.equal? undefined
      return nil if @total == 0
      obj = @tuple.at @start
      @tuple.put @start, nil
      @start += 1
      @total -= 1

      obj
    else
      n = Rubinius::Type.coerce_to(n, Fixnum, :to_int)
      raise ArgumentError, "negative array size" if n < 0

      slice!(0, n)
    end
end 
```

你可以看到，一个数组本身就是一个 Rubinius::Tuple，而在 Tuple 的定义中，它就是一个 Rubinius::Array。它所做的只是将开始位置放在下一个位置。我不确定他们会释放它使用的空间（我认为它会），因为你必须更深入地挖掘。

在官方 1.9.3 中，我不知道它是如何实现的，就像他们在 C 中那样，而且它们很难阅读。如果想了解更多细节，可以在 GitHub 上 fork Rubinius，或者从 ruby​​-lang.org 上 fork 官方 1.9.3，并阅读源码。您也可以了解有关 C/C++ 编程的更多信息 :)

* * *

于是我快速浏览了官方1.9.3的代码，这是array#shift函数的定义：

```
static VALUE
rb_ary_shift_m(int argc, VALUE *argv, VALUE ary)
{
    VALUE result;
    long n;

    if (argc == 0) {
    return rb_ary_shift(ary);
    }

    rb_ary_modify_check(ary);
    result = ary_take_first_or_last(argc, argv, ary, ARY_TAKE_FIRST);
    n = RARRAY_LEN(result);
    if (ARY_SHARED_P(ary)) {
    if (ARY_SHARED_NUM(ARY_SHARED(ary)) == 1) {
        rb_mem_clear(RARRAY_PTR(ary), n);
    }
        ARY_INCREASE_PTR(ary, n);
    }
    else {
    MEMMOVE(RARRAY_PTR(ary), RARRAY_PTR(ary)+n, VALUE, RARRAY_LEN(ary)-n);
    }
    ARY_INCREASE_LEN(ary, -n);

    return result;
} 
```

这一行：

```
MEMMOVE(RARRAY_PTR(ary), RARRAY_PTR(ary)+n, VALUE, RARRAY_LEN(ary)-n); 
```

它告诉我们它实际上将内存块偏移量移动了 n。这大概就是官方运行速度比Rubinius慢的原因吧……Rubinius在大内存上占优势，但节省时间；官方消耗更少的内存，但需要更多的时间......

# list - Python 2.5 更改列表和元组

> ID：10255566
> 
> 赞同：0
> 
> 时间：2012-04-21T02:03:12.580
> 
> 标签：list, tuples, python-2.5

我相信代码的第一部分可以将列表加载更改为闲置。但是我得到的用于转换元组的代码的第二部分，加载到 loafing 中没有。

```
y=['l','o','a','d','i','n','g']

print type(y)

y[3] = 'F'

print y

x=('l','o','a','d','i','n','g')

print type(x)

x[3]='F'

print x 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:07:05.230

元组和字符串一样，是不可变的序列类型——它们一旦创建就不能更改。请参阅有关此主题[的 Python 文档。](http://docs.python.org/library/stdtypes.html#typesseq-mutable)

# prolog - 序言中的简单算术

> ID：10255570
> 
> 赞同：1
> 
> 时间：2012-04-21T02:03:34.340
> 
> 标签：prolog

我正在尝试编写一个程序，该程序给出一个列表并返回一个在第一个列表中有偶数的较新列表，如下所示：

```
evennom([1,3,2,4,3,2,1,2],out)
out = [2,4,2,2] 
```

我的代码如下：

```
evennom([],[]).  
evennom(H1|T1],[H2|T2):- H2 is H1 mod 2. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:21:58.790

`mod 2`你很接近 - 当操作失败时，需要有一些东西可以删除第一个元素。此外，您的“复制”规则并不完全正确。

试试这个：

```
evennom([], []).
evennom([H|T1], [H|T2]) :- H rem 2 =:= 0, !, evennom(T1, T2).
evennom([_|T1], T2) :- evennom(T1, T2). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:23:38.400

Prolog 为你做递归..

```
evennom(ListIn, ListOut) :-
    findall(Even, (nth0(_, ListIn, Even), 0 is (Even mod 2)), ListOut). 
```

# java - Java 接收邮件并在 JTable javamail 上列出

> ID：10255571
> 
> 赞同：0
> 
> 时间：2012-04-21T02:03:37.253
> 
> 标签：java, swing, jtable, jakarta-mail

我这里有点问题。我正在使用 javamail API 从我的“收件箱”文件夹中提取我的电子邮件，该部分工作得很好，我遇到的问题是，我试图将它们放入 JTable 中，如下面的代码所示：

```
 try
     {

            inbox.open(Folder.READ_ONLY);
            final Message[] messages = inbox.getMessages(1,20);
            System.out.println("NUMBER OF MESSAGES: " + inbox.getMessageCount());
             String[] colHead = {"Subject",  "Send Date"};
             for( int i = 0; i < messages.length; i++)
             {
                String[] heads = {"Subject", "Sender", "Send Date", "Content"};
                Object[][] data = {

                        {messages[i].getSubject(), (InternetAddress.toString(messages[i].getFrom())), messages[i].getReceivedDate(), messages[i].getContent()}

                };

                final JTable table = new JTable(data, heads);
                final int xyz = i;
                        panel_6.add(table); 
```

props2 属性在上面定义为：

```
 Properties props2 = new Properties();
     props2.setProperty("mail.store.protocol", "imaps");
     try
     {
         Session session = Session.getDefaultInstance(props2, null);
         Store store = session.getStore("imaps");
            store.connect(imapServer, imapUser, imapPass);
            Folder inbox = store.getFolder("Inbox"); 
```

我遇到的问题是我希望能够使该 JTable 可滚动，但是如果我创建一个 JScrollPane jsp = new JScrollPane(table) 然后将其而不是表添加到 panel_6，则该表仅显示 1 个结果而不是 20 我应该从 inbox.getMessages(1,20); 如果我让表格不可滚动，它工作正常，我能做些什么吗？谢谢！

# javascript - 花式 jQuery 标签选择器

> ID：10255574
> 
> 赞同：3
> 
> 时间：2012-04-21T02:04:16.877
> 
> 标签：javascript, jquery

我希望在我的应用程序中添加一个基于 jQuery/Javascript 的选择器类型的元素。这个想法是在文本区域内向用户呈现 50 个标签，但不仅仅是选择一个标签词并删除它，旁边还有一个 X 可以从列表中删除标签，并且有一个文本框可以在其中添加一个新词被添加。希望这是有道理的。

我想问一下，有没有现成的开源解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:36:14.973

实际上找到了一个似乎可以解决问题的方法：

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:31:07.403

我最近一直在做一个项目，这个插件对我来说非常好用：http: [//xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)

它执行“x”删除、退格删除、添加和删除标签的回调、自动完成和其他不错的功能。

# xml - 使元素始终只包含 CDATA（在 XML 文档中嵌入 XML 示例）

> ID：10255581
> 
> 赞同：2
> 
> 时间：2012-04-21T02:06:47.617
> 
> 标签：xml, xslt, cdata, dtd

我正在为我的大学计算俱乐部准备一篇关于 XML 和 XSLT 的 Presentation，我不是专家，但我比任何人都好，而且它只是一个 1 小时的入门。所以对于我的幻灯片，我想我会使用 XML 文档。然后我会用 XSLT 2.0 将其变成一系列网页

所以我们有我的源文件

```
<slideshow>
  <slide title="Example">
    <para>Below is an example of an XML document</para>
    <code> <![CDATA[
<?xml version="1.0"?>
<elephant Name="Fido">
  <head>
    <eyes qty="2" colour="blue"/>
    <trunk/>
    <ears qty="2"/>
  </head>
  <body>
    Thin, ribs showning
  </body>
  <legs qty="4">
    Roughly 1.5m Long
  </legs>
</elephant> ]]>
    </code>
  </slide>
</slideshow> 
```

因为我不希望我的示例构成文档的 XML 结构的一部分（并且不希望它们被 XSLT 更改），所以我有 CDATA 部分。所以，每当我有一个`<code>...</code>`元素时，它总是写着： `<code><![CDATA[...]]></code>` 这是重复的信息。

**我可以声明每个`code`元素只包含（未解析的）字符数据吗？**

所以我只会写 `<code>...</code>`，它永远不会尝试解析里面的内容。

似乎可以用 DTD 完成一些事情，也许？

* * *

## 我正在寻找的答案是

使用 `<!DECLARE-CDATA-ELEMENT code>`which 将生成代码元素，而不是对其内容进行解析。

* * *

你可以用实体来模拟它：

```
<!ENTITY CodeStart "<code><![CDATA["> 
<!ENTITY CodeEnd "]]></code>"> 
```

然后使用：`&CodeStart;<don'tParse/>&CodeEmd;`

* * *

不，不能这样做，但您可以强制所有代码段不包含子元素...

* * *

不，但是您可以像这样进行预处理：...

* * *

这些不是答案，它们只是表明答案可能是什么样的（希望现在更清楚了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:40:41.533

> 因为我不希望我的示例构成文档的 XML 结构的一部分（并且不希望它们被 XSLT 更改），所以我有 CDATA 部分。

**不必使用 CDATA 部分来保护某些 XML 片段不被“XSLT 更改”——只需编写 XSLT 代码，使其复制任何以`code`元素**为根的子树。

> 是否可以声明每个代码元素仅包含（未解析的）字符数据？

**是的，但是 XSLT 不要求源 XML 文档或处理结果有 DTD**（Schema-aware XSLT 2.0 可以验证这些甚至是中间结果，但它仅适用于 XML Schema (XSD) )，并且在存在这样的 DTD 的情况下，XSLT 不使用任何类型信息（唯一的例外是存在 ID 属性这一事实）。因此，提供这样的 DTD 不会有帮助。

**此外，这样的 DTD 将被违反，除非您至少转义`&``<`**的子文本节点中的每个**和****字符**`code`：

**来自[W3C XML 规范](http://www.w3.org/TR/2008/REC-xml-20081126/#syntax)**：

> *"[定义：所有非标记文本构成文档的字符数据。] 和号字符 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符或在注释、处理指令或 CDATA 部分。如果在其他地方需要它们，它们必须分别使用数字字符引用或字符串“&”和“<”进行转义*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T01:00:14.393

我明白你关于`code`和 CDATA 部分关系的观点：如果你从来没有一个没有另一个，那么其中一个不会携带太多信息。但是不，其他答案是完全正确的：没有办法声明`code`元素应该以不同的方式解析。

值得一提的是，SGML DTD 确实能够使用`CDATA`关键字声明元素，其含义是“此元素中的所有内容都是字符数据，而不是标记，因此此处不识别分隔符”。当然，您确实希望识别元素的结尾，因此事情很快变得相当复杂，并且`CDATA`声明结果（即使在所有复杂情况之后）对于您描述的用例来说并没有很好的工作。

`CDATA`因此，即使我们没有 Andrew Cooke 提到的动机， 我们也可能在 XML 中拥有深度六元素声明：任何允许声明改变解析器行为的工具都使得在不阅读 DTD 的情况下无法解析。

所以：您反对的冗余本质上是您针对两个不同受众这一事实的结果：`CDATA`标记部分与解析器讨论要解析的内容和方式，`code`元素与下游应用程序（例如您的 XSLT 样式表）对话关于文档的逻辑结构。简单过程的仔细分层有时会增加冗长的一般原则的一个小例子。

我希望你的演讲顺利。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T03:34:10.793

首先，我知道没有任何机制可以做到这一点。

其次，根据我对 xml 标准的有限理解，我认为您想要的东西不存在。xml 规范有一个“格式良好”的概念，适用于没有（或“之前”，如果您喜欢）DTD 的 xml 文档，并且没有 CDATA 的文档格式不正确。

换句话说，xml文档必须自己遵循一定的规则；您要求的是 DTD 放宽/更改这些规则，但 DTD 仅提供除了格式正确（导致“有效”文档）之外的进一步检查，它们不能更改格式正确的要求。

但我不是伟大的 xml 专家......

ps问题出在`<?xml... ?>`零件上；正如另一个答案所说，您可以将 xml 元素直接嵌入到您的文档中（在这种情况下，如果您想在“包含”和“嵌入”xml 之间做出更明确的区别，请查看 xml 命名空间）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T16:50:55.477

我倾向于不嵌入示例文档，而是引用它们：

```
<code ref="example1.xml"/> 
```

# ruby-on-rails - 使用命名空间类时解决“NameError 未初始化常量”问题？

> ID：10255587
> 
> 赞同：1
> 
> 时间：2012-04-21T02:08:18.027
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, namespaces, constants

我正在使用导轨 v3.2.2。我有两个类，如下所示：

```
# app/models/article/category/article_relationship.rb
class Article::Category::ArticleRelationship < ActiveRecord::Base
  ...
end

# app/models/comment/category/article_relationship.rb
class Comment::Category::ArticleRelationship < ActiveRecord::Base
  ...
end

# app/models/article/category.rb
class Article::Category < ActiveRecord::Base
  ...
end

# app/models/article.rb
class Article < ActiveRecord::Base
  ...
end 
```

如果在我的视图文件中我声明

```
::Article::Category::ArticleRelationship
# or
Article::Category::ArticleRelationship 
```

我收到以下错误：

```
NameError
uninitialized constant Category::ArticleRelationship 
```

**我该如何解决这个问题？**

* * *

**更新**

当我在同一个文件中同时声明多个命名空间类时，我发现问题“主要”发生，例如：

```
::Article::Category::ArticleRelationship
::Article::Category
# or
::Comment::Category::ArticleRelationship
::Article::Category
# or
::Article::Category
::Article::Category::ArticleRelationship
# or
::Article::Category::ArticleRelationship
Article::Category
# or
Article::Category::ArticleRelationship
::Article::Category
# or
::Article::Category::ArticleRelationship
::Article
# or
::Article
::Comment::Category::ArticleRelationship
# or
... 
```

它似乎是*随机发生的！*

* * *

*注意：这个问题受到@Frederick Cheung 对*[这个问题](https://stackoverflow.com/questions/10255150/how-to-solve-the-object-doesnt-support-inspect-error/10255357)的回答的“启发” 。

# html - 有没有办法让表格中的某些列居中？

> ID：10255588
> 
> 赞同：5
> 
> 时间：2012-04-21T02:08:24.870
> 
> 标签：html, css, markup

我广泛使用 css 格式并为 table 定义类，其中包含 thead、tbody、tfoot 的子类和 tr、th、td 的另一个级别的子类......

在某些情况下，我想让表格的整个列具有某种风格的类......但不知道该怎么做。

有什么办法（使用 HTML5、css3 或其他任何东西？）使 tbody 特定列中的所有单元格都具有相同的类？

我可以显式（手动）指定类，但我想避免这种重复。

欢迎任何想法。

PS也许我不应该为此烦恼，而只是为每个单元格明确指定类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T02:14:23.227

您可以使用 nth-child css 伪选择器来定位表格的中间列。

例子：

```
#myTable tr td:nth-child(3) {
  text-align: center;
} 
```

这将针对连续的第三列，只需相应地调整您的 X 即可。也可以使用“n”作为每个第 n 个孩子的变量。查看[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)以获得全面的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:11:22.473

看看`col`和`colgroup`标签。它们可用于定义列。但是，对于适用的样式有一些限制。

[http://www.quirksmode.org/css/columns.html](http://www.quirksmode.org/css/columns.html)

# c# - 从配置文件中读取应用设置值

> ID：10255591
> 
> 赞同：1
> 
> 时间：2012-04-21T02:09:39.453
> 
> 标签：c#, app-config

在我的解决方案中，我有 4 个名为 UI、Business、Data 和 common 的项目。在 Data 项目中，我有一个 app.config 文件，其中包含以下值

```
<?xml version="1.0" encoding="utf-8" ?>
 <configuration>
 <appSettings>
 <add key="LibrarySystemConnection" value="server=(local);Initial Catalog=SanasaLibrarySystem;Integrated Security=True;
     User ID=sa;Password=123"/>
 </appSettings>
 </configuration> 
```

在 Data 项目的一个类中，我按如下方式访问上述键：

```
connectionString = ConfigurationSettings.AppSettings["LibrarySystemConnection"]; 
```

当我运行代码时，connectionString 会返回 null。任何人都知道代码中有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:12:34.903

您应该将该`app.config`文件移动到您的主 UI 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:14:13.467

将 app.config 文件移动到生成 exe 的项目中，或者使用[它从 assembley 中读取配置](https://stackoverflow.com/questions/1682054/how-do-i-retrieve-appsettings-from-the-assembly-config-file)

# ios - UIImagePickerController 在不禁用其他控件的情况下避免在拍照后使用/重试视图

> ID：10255592
> 
> 赞同：6
> 
> 时间：2012-04-21T02:10:19.360
> 
> 标签：ios, ios5, uiimagepickercontroller

我想在拍照后避免使用/重试视图，而不禁用让我拍照的默认 Apple 相机控件。

这样做：

```
imagePicker.showsCameraControls = NO; 
```

导致所有相机控件消失。还有其他方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T05:54:39.953

不幸的是，Apple 没有提供适当的方法来做到这一点。所以这里有你的选择：

1.  showCameraControls = NO 并添加您自己的控件。
2.  去铁杆并使用 AVFoundation - 但是你需要自己的控件 - 可能不是你想要做的，但如果你有兴趣，我在这里有一个示例应用程序：

[https://github.com/Shein/CameraFeedUnderlay](https://github.com/Shein/CameraFeedUnderlay)

3.  绕过它 - 将您自己的按钮放在相机控制播放按钮的顶部并覆盖操作以拍摄照片，就像没有相机控制并直接关闭 UIImagePickerController 一样。

这里有一个这种解决方案的例子：

[iPhone SDK - 如何在 UIImagePickerController 中禁用图片预览？](https://stackoverflow.com/questions/2300616/iphone-sdk-how-to-disable-the-picture-preview-in-uiimagepickercontroller)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-27T22:02:23.683

也许这会有所帮助。您可以`imagePicker.showsCameraControls = YES;`配合`NSNotificationCenter`收听@"_UIImagePickerControllerUserDidCaptureItem" 和@"_UIImagePickerControllerUserDidRejectItem" 使用。

进入 @"_UIImagePickerControllerUserDidCaptureItem" 状态时，您可以关闭`UIImagePickerController`.

我有一个类似的问题，在进入预览视图时隐藏了一个覆盖。我可以[用这种方法解决问题](https://stackoverflow.com/a/23899448/1933185)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T05:53:28.600

您可以自定义图像选择器控制器来自己管理用户交互。为此，请提供一个包含您要显示的控件的覆盖视图，并使用“捕获静止图像或电影”中描述的方法。除了或代替默认控件，您还可以显示自定义叠加视图。UIImagePickerController 类的自定义覆盖视图在 iOS 3.1 及更高版本中可通过[cameraOverlayView](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/cameraOverlayView)属性获得。有关代码示例，请参阅[PhotoPicker](http://developer.apple.com/library/ios/samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)示例代码项目。

从此您可以创建自己的 customCameraView 来显示您自己需要显示的控件

# java - 如何绘制具有指定半径的圆形和矩形？

> ID：10255600
> 
> 赞同：1
> 
> 时间：2012-04-21T02:11:40.880
> 
> 标签：java, swing, jframe, jpanel, graphics2d

我正在尝试绘制一个以框架右下角为中心的半径为 60 的圆，以及以框架的上半部分为中心的半径为 50 的正方形。

帧大小为 300 x 300。我一直这样做到现在。

```
import java.awt.*;
import javax.swing.*;
import java.awt.geom.*;
public class Test {

    public static void main ( String[] args){

        JFrameTest5 frame = new JFrameTest5();
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         frame.setVisible(true);
         frame.setTitle("Test");

    }
}
class JFrameTest5 extends JFrame {

    public JFrameTest5()
       {
           setLocation(0,0);
           setSize(300,300);

        PanelTest1 panel = new PanelTest1();
     add(panel);        
       }

       }

class PanelTest1 extends JPanel

{

    public void paintComponent(Graphics g) 
    {
        Graphics2D g2 = (Graphics2D)g;

        Ellipse2D circle = new Ellipse2D.Double(250, 225, 120,120);
        g2.draw(circle);

        Rectangle2D rect = new Rectangle2D.Double(75,0,100,100);
        g2.draw(rect);  

    }

} 
```

问题是圆形和矩形似乎不正确，还有其他方法可以设置确切的半径吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T02:30:13.107

下面的示例包括几个重要的更改：

*   尽可能使用常量。

*   使用面板相对几何。

*   正确使用[初始线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

*   用于`pack()`调整封闭框架的大小。

代码：

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Rectangle2D;
import javax.swing.JFrame;
import javax.swing.JPanel;

/** #see http://stackoverflow.com/a/10255685/230513 */
public class Test {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrameTest frame = new JFrameTest();
            }
        });
    }
}

class JFrameTest extends JFrame {

    public JFrameTest() {
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setTitle("Test");
        this.add(new JPanelTest());
        this.pack();
        this.setLocationByPlatform(true);
        this.setVisible(true);
    }
}

class JPanelTest extends JPanel {

    private static final int R = 60;
    private static final int D = 2 * R;
    private static final int W = 50;
    private static final int E = 2 * W;

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }

    @Override
    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        Ellipse2D circle = new Ellipse2D.Double(
            getWidth() - D, getHeight() - D, D, D);
        g2.draw(circle);
        Rectangle2D rect = new Rectangle2D.Double(0, 0, E, E);
        g2.draw(rect);
    }
} 
```

# php - 将不同的数据存储到每个选项卡

> ID：10255601
> 
> 赞同：0
> 
> 时间：2012-04-21T02:11:41.230
> 
> 标签：php, javascript, session

我需要将不同*的帖子*数据存储到浏览器中的每个选项卡。如果我打开同一页面的新实例，则数据不会在两者之间共享。

**我的问题**：

我正在构建一个 CMS 来控制我的网站内容。但我会打开同一页面的一些实例（许多选项卡）。所以我有一个搜索表单来查找我在我的 CMS 上创建的*新闻。*如果我打开一个新闻项目，我有一个*取消*按钮，可以返回上一页（新闻列表）。

问题是新闻列表有分页和过滤形式。因此，例如，我可以通过“ *john doe* ”之类的术语进行搜索，然后前进到第 5 页，然后打开一个新闻项目。如果我取消，目前我会返回没有过滤器和第一页的新闻列表。

**我的解决方案**：

好吧，我不想使用，`history.back()`因为我可以提交新闻表单并单击返回/取消按钮。所以，我会回到当前的形式，有什么问题。

我的第二个想法是将 a`$_SESSION`与`$_POST`发送到新闻列表和后退按钮发送到 一起存储，这将从会话`/news/list/recovery-session`中恢复数据。`$_POST`但它有一个问题：如果我打开两个选项卡并进行两次搜索，我只会保存最后一个会话。

**您的解决方案**：

好吧，我可以使用 PHP 和 JS 来使它工作。你可以建议我能做什么。我考虑与 COOKIES 合作，但我相信它是由域共享的，而不是由选项卡共享的，这是一个问题。

有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:15:17.557

生成一个唯一的 id 并将其附加到表单或将要提交的某些隐藏元素上。将该唯一 ID 保存在 cookie 或会话变量中。在提交时比较两者。

如果第二个选项卡生成了新的 id，则第一个选项卡不会评估为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:25:32.817

主要问题是在返回新闻列表页面时需要保留*返回哪个页面*的状态以及*搜索词。*有很多方法可以做到这一点，但一种简单的方法是将这些数据编码到您的查询字符串中。

例如，假设您的搜索词是“john doe”并且您在第 5 页，将这些数据传递到您的新闻页面。

```
 news.php?returnSearchTerm=john+doe&returnPage=5& .... 
```

创建新闻页面后，您可以设置取消链接的格式，以将您发送回具有正确参数的列表页面。

```
 news_list.php?search=john+doe&page=5 
```

# asp.net-mvc-3 - 使用代码优先方法和实体框架是否能够使我的 asp.net mvc Web 应用程序适用于任何数据库供应商

> ID：10255602
> 
> 赞同：0
> 
> 时间：2012-04-21T02:11:42.813
> 
> 标签：asp.net-mvc-3, sql-server-2008-r2, code-first

我通常首先使用数据库方法来开发我的 asp.net mvc web 应用程序，然后我使用实体框架映射数据库表，但是这个 apprahc 将使我的 web 应用程序只能在特定的 DB 供应商下工作。

因此，如果我使用代码优先方法和实体框架，并且我在应用层上执行所有业务逻辑（例如，我不使用任何存储过程）；**无论数据库供应商如何，在这种情况下我的应用程序都能正常工作吗？？？** BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:55:16.883

要使 EF 在其他 rdbms 上工作，需要编写“驱动程序”以支持该平台。MS 只支持 MSSQL。我知道有 EF 的 oracle 库，但我不知道其他任何库。

也就是说，确保您的应用程序可移植的唯一方法是针对您希望支持的所有库进行开发，并在开发过程中不断测试所有这些库。否则，这只是一个白日梦。

当然，您可以使用 ANSI SQL 对 ADO.NET 执行相同的操作。

# .net - 在 F# 中使用 System.Collections Queue 类键入参数错误

> ID：10255606
> 
> 赞同：2
> 
> 时间：2012-04-21T02:12:43.783
> 
> 标签：.net, visual-studio-2010, f#, queue

尝试运行[此处](http://msdn.microsoft.com/en-us/library/hh297096.aspx)给出的阻塞队列示例。

使用该示例中所示的 .NET Queue 类，我收到以下错误：

```
let queue = new Queue<_>() 
```

“非泛型类型 System.Collection.Queue 不需要任何类型参数”

如果从 Queue 创建中删除了 type 参数，那么`type BlockingQueueAgent<'T>(maxLength)`.

除了实现我自己的队列类之外，还有什么方法可以使用示例程序中使用的 .NET 队列类？下面给出了整个代码，以防更具说明性。

```
open System
open System.IO
open System.Collections
//open System.Runtime.Serialization.Formatters.Binary

///defining Agent
type Agent<'T> = MailboxProcessor<'T>

///defining Message
type internal BlockingAgentMessage<'T> = 
  | Get of AsyncReplyChannel<'T>
  | Add of 'T * AsyncReplyChannel<unit> 

/// Agent-based implementation of producer/consumer problem 
type BlockingQueueAgent<'T>(maxLength) =
    let agent = Agent.Start(fun agent ->
        let queue = new Queue<_>()
        //let queue = new Queue()
        // State machine running inside the agent
        let rec emptyQueue() = 
            agent.Scan(fun msg ->
                match msg with 
                | Add(value, reply) -> Some(enqueueAndContinue(value, reply))
                | _ -> None )
        and fullQueue() = 
            agent.Scan(fun msg ->
                match msg with 
                | Get(reply) -> Some(dequeueAndContinue(reply))
                | _ -> None )
        and runningQueue() = async {
            let! msg = agent.Receive() 
            match msg with 
            | Add(value, reply) -> return! enqueueAndContinue(value, reply)
            | Get(reply) -> return! dequeueAndContinue(reply) }
        and enqueueAndContinue (value, reply) = async {
            queue.Enqueue(value)
            reply.Reply() 
            return! chooseState() }
        and dequeueAndContinue (reply) = async { 
            reply.Reply(queue.Dequeue())
            return! chooseState() }
        and chooseState() = 
            if queue.Count = 0 then emptyQueue()
            elif queue.Count = maxLength then fullQueue()
            else runningQueue()

        // Start with an empty queue
        emptyQueue() )

    /// Asynchronously adds item to the queue. If the queue
    /// is full, it blocks until some items are removed.
    member x.AsyncAdd(v:'T) = 
        agent.PostAndAsyncReply(fun ch -> Add(v, ch))

    /// Asynchronously gets item from the queue. If the queue
    /// is empty, it blocks until some items are added.
    member x.AsyncGet() = 
        agent.PostAndAsyncReply(Get)

let ag = new BlockingQueueAgent<int>(3)

let writer() = async { 
    for i in 0 .. 10 do 
        do! ag.AsyncAdd(i)
        printfn "Added: %d" i }

let reader () = async { 
    while true do
        let! v = ag.AsyncGet()
        do! Async.Sleep(1000)
        printfn "Got: %d" v }

reader () |> Async.Start
writer () |> Async.Start 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T02:15:24.320

我认为您正在寻找[System.Collections.Generic.Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)而不是[System.Collections.Queue](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)。

改变

```
open System.Collections 
```

到

```
open System.Collections.Generic 
```

# javascript - JavaScript 在函数中返回二维数组

> ID：10255607
> 
> 赞同：1
> 
> 时间：2012-04-21T02:12:56.743
> 
> 标签：javascript

我试图在这样的函数中返回一个数组：

```
function loadMap(map) {
    if (map == 1) {
        return board = [][
[ 1, 1, 1, 1, 1, 1, 1, 190, 115, 1, 1, 1, 1, 1, 1, 2],
[ 190, 190, 190, 190, 190, 190, 190, 190, 13, 148, 148, 148, 148, 148, 121, 2],
[ 1, 520, 127, 127, 127, 127, 127, 13, 13, 148, 167, 167, 167, 148, 343, 1],
[ 1, 520, 127, 166, 166, 166, 127, 13, 13, 148, 167, 167, 167, 148, 343, 1],
[ 1, 520, 127, 166, 166, 166, 127, 13, 13, 148, 148, 148, 183, 148, 343, 1],
[ 1, 520, 364, 174, 127, 361, 127, 13, 13, 13, 13, 13, 13, 13, 13, 1],
[ 115, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 115],
[ 1, 514, 13, 13, 394, 343, 145, 220, 145, 145, 145, 13, 13, 13, 13, 1],
[ 1, 514, 13, 13, 343, 118, 145, 166, 166, 166, 145, 13, 13, 13, 13, 1],
[ 1, 514, 514, 13, 118, 118, 145, 166, 166, 166, 145, 13, 13, 13, 13, 1],
[ 1, 1, 1, 115, 1, 1, 145, 145, 145, 145, 145, 1, 1, 1, 1, 1]
];
    }
} 
```

然而这是不对的。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T02:17:34.070

您没有在函数中为返回值命名，而是在调用时将返回值分配给变量。

`[]`您在数组文字前面有一个额外的内容。

```
function loadMap(map) {
  if (map == 1) {
    return [
      [ ... ],
      [ ... ],
      [ ... ],
      ...
    ];
  }
}

var board = loadMap(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:13:51.020

```
function loadMap(map) {
    if (map == 1) {
        return [
            [values],
            [values],
            [values]
        ]
    }
} 
```

您可以像这样访问它们`map[x][y]`：

```
var map = loadMap(1);

map[1][1]; //190 
```

# python - 在 Python 中随时加入解释器

> ID：10255608
> 
> 赞同：5
> 
> 时间：2012-04-21T02:13:03.157
> 
> 标签：python, debugging

我知道如何使用 and 进入解释器`pdb`，`IPython`但这需要我事先知道我想在哪里停下来。但是，我经常运行需要几分钟到几小时的数字运算脚本，我想确切地知道它的进度。一种解决方案是简单地将大量的日志记录语句放在任何地方，但是我要么用太多的信息淹没自己，要么无法准确地记录我想知道的内容。

有没有办法初始化一个侦听器循环，在某个组合键下，无论它当前在哪里，它都会让我进入代码中？想想 CTRL+Z，但把我留在 Python 而不是 Bash 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T02:30:02.610

您可以使用[信号模块](http://docs.python.org/library/signal.html)设置一个处理程序，该处理程序将在您按下 control-C 或 control-Z 或其他任何东西时启动调试器.. SIGINTR，SIGSUSP。

例如，定义一个`instant_debug.py`覆盖 SIGQUIT 的模块，

```
import signal
import pdb

def handler(signum, frame):
  pdb.set_trace()

signal.signal(signal.SIGQUIT, handler) 
```

然后编写脚本

```
import instant_debug
import time

for i in xrange(1000000):
  print i
  time.sleep(0.1) 
```

在执行过程中的任何时候，您都可以通过键入 跳入代码，用和正常`CTRL+\`检查堆栈，然后继续进行，就好像什么都没发生过一样。请注意，您只会在下一个“原子”操作结束时加入——这意味着不会在一个巨大的 C 模块中间停下来。`u``d``pdb``c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:11:48.953

你可以这样做

```
def main():
    i = 1000
    while True:
        print "Count Down %s" % i
        time.sleep(1)
        i -= 1

try:
    main()
except KeyboardInterrupt:
    pass # Swallow ctrl-c
finally:
    code.interact("Dropped into interpreter", local=globals()) 
```

# php - PHP中的嵌套引号

> ID：10255613
> 
> 赞同：-1
> 
> 时间：2012-04-21T02:14:48.763
> 
> 标签：php, syntax, quotes, gnu-screen

我在 PHP 中的引号有另一个问题，我在一个普通集合中有两组嵌套引号，这是我认为应该工作的

```
 if (!($stream = ssh2_exec($con, 'screen -p 0 -S new3 -X eval \"stuff \"stop\"\015\"'))) { 
```

这就是它在一个简单的 bash 脚本中的样子：

```
screen -p 0 -S minecraft -X eval 'stuff \"stop\"\015' 
```

所以我需要帮助从 bash 到使用 PHP 工作，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:20:16.620

您需要转义转义字符，如下所示：

```
if (!($stream = ssh2_exec($con, 'screen -p 0 -S minecraft -X eval \'stuff \\"stop\\"\\015\''))) { 
```

但是引用太多，你就会遇到[倾斜牙签的问题](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)。

# android - 将多个事件导入 Android 日历

> ID：10255620
> 
> 赞同：1
> 
> 时间：2012-04-21T02:15:28.977
> 
> 标签：android, icalendar, vcalendar

我正在尝试使用 PHP 将一堆事件导出到可以导入到 Android 日历应用程序的文件中。我尝试了 iCalendar (ICS) 文件，但 Android 无法读取该文件。vCalendar (VCS) 不允许您拥有多个事件（根据 RFC2445），因此如果您添加多个事件，应用程序只会崩溃。

有什么方法可以将多个事件导出到可以导入到 Android 日历应用程序的文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:58:07.190

您可以使用 CalendarSync 等专门的应用程序来导入 ics 文件。我每周使用该应用程序多次执行此操作，并且效果很好。[日历同步链接](http://ntbab.dyndns.org/apache2-default/seite/icalparseandroid.html)

# php - Ajax - 如何提醒部分 json 字符串？

> ID：10255623
> 
> 赞同：1
> 
> 时间：2012-04-21T02:16:27.340
> 
> 标签：php, javascript, ajax, json

HTML：

```
<html>
<head>
<title>AJAX</title>
<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.16.custom.min.js"></script>
<script src="testing.js" type="text/javascript"></script>
<script src="http://www.json.org/json2.js"></script>
</head>
<body>
<input type="button" value="btnText" id="btntext" />
<input type="button" value="btnJSON" id="btnjson" />
</body>
</html> 
```

PHP：

```
<? 
header('Content-type: application/json');
echo '{"id": 1, "name": "abc", "email": "me123@aol.com"}';
?> 
```

JS：

```
$(document).ready (function () {
    $("#btntext").click(function () {
        $.get("testing.text", function (data) {
           alert(data); 
        });
    });

    $("#btnjson").click(function () {
        $.get("testing.php", function (data) {
           alert(data);
       });
    }); 
}); 
```

单击文本按钮时，警报可以正常工作。单击 json 按钮时，警报显示 'header('Content-type: application/json'); echo '{"id": 1, "name": "abc", "email": "me123@aol.com"}'

我的问题是，如果我单击 json 按钮，我怎样才能只提醒电子邮件显示“me123@aol.com”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:20:42.707

您在没有服务器来运行 PHP 的情况下运行它，是什么导致代码出现而不是解释。例如。直接执行 html 文件，而不是通过 http url。

解决此问题后，您可以致电`alert(data.email);`显示电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:21:52.110

`data.email`会给你 email 属性的值。

# android - Android：fastScrollEnabled 一开始不工作

> ID：10255624
> 
> 赞同：2
> 
> 时间：2012-04-21T02:16:28.573
> 
> 标签：android, android-layout, android-listview

好的，我正在开发一个应用程序，该应用程序的页面顶部有一个列表视图和一个编辑文本框。当您在编辑文本框中输入内容时，它将过滤列表视图中显示的项目。我遇到的问题是出现在滑块侧面的快速滚动图标。
当页面第一次加载时，无论我做什么，快速滚动滑块图标都不会出现在屏幕上。然后我单击编辑文本框并输入一个字符，然后删除它，现在我的快速滚动滑块图标将出现。

首先加载没有快速滚动图标。
![没有快速滚动图标](../Images/16775a5dfef3216e726723226c1e438a.png)
编辑文本框，然后擦除文本并出现快速滚动图标。
![出现快速滚动](../Images/f30900c80e7c7b0da2e7bea53dfec3fe.png)

我在我的列表视图中设置了 android:fastScrollEnabled="true" 。另外，我通过执行 lv1.setFastScrollEnabled(true); 在代码中手动设置它；

无论我进行更改，我仍然会得到相同的行为，除非我从代码和 xml 中完整删除它，然后它将停止在第二页上工作。我已经尝试清理我的项目，但仍然没有好处。我倾向于它是android中的一个错误，或者我错过了一些非常简单的东西。

这是我的代码。

```
public class SearchByFood extends ParentClass
{
private ListView lv1;
private EditText ed;
int textlength = 0;
private ArrayList<String> arr_sort = new ArrayList<String>();
private ArrayList<String> foods = new ArrayList<String>();
private LayoutInflater mInflater;
private ArrayList<Food> foodList;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search_by_food);
    setTextTitle("Search by Food");

    lv1 = (ListView) findViewById(R.id.ListView01);
    ed = (EditText) findViewById(R.id.EditText01);
    mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    DataLayerFunctions d = new DataLayerFunctions(getApplicationContext());

    foodList = d.selectFoodsWithSubstitutes();
    for (Food f : foodList)
    {
        // this is to build a ArrayList<String> to pass to the setAdapter
        Log.d("SearchByFood", "FoodName: " + f.getFood_Name());
        foods.add(f.getFood_Name());
    }

    ArrayAdapter<String> firstAdapter = new ArrayAdapter<String>(SearchByFood.this, R.layout.search_food_listview, foods);
    lv1.setAdapter(firstAdapter);
    lv1.setFastScrollEnabled(true);

    ed.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s)
        {
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
        }

        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
            textlength = ed.getText().length();
            arr_sort.clear();
            for (String f : foods)
            {
                if (textlength <= f.length())
                {
                    if (f.toString().toLowerCase().contains((CharSequence) ed.getText().toString().toLowerCase()))
                    {
                        Log.d("STRING", "STRING: " + f.toString() + " contains " + ed.getText());

                        if (ed.getText().length() > 0)
                        {
                            String newString = boldMyString(f, ed.getText().toString());
                            arr_sort.add(newString);
                        }
                        else
                        {
                            arr_sort.add(f);
                        }

                    }
                }
            }

            // if empty add a no foods found
            if (arr_sort.isEmpty())
            {
                arr_sort.add("No Foods Found");
            }

            // Load array
            // lv1.setAdapter(new
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(SearchByFood.this, R.layout.search_food_listview, arr_sort)
            {
                @Override
                public View getView(int position, View convertView, ViewGroup parent)
                {
                    View row;

                    if (null == convertView)
                    {
                        row = mInflater.inflate(R.layout.search_food_listview, null);
                    }
                    else
                    {
                        row = convertView;
                    }

                    TextView tv = (TextView) row.findViewById(android.R.id.text1);
                    tv.setText(Html.fromHtml(getItem(position)));
                    // tv.setText(getItem(position));

                    return row;
                }

            };
            lv1.setAdapter(adapter);
        }

        private String boldMyString(String foodName, String guess)
        {
            int gLength = guess.length();
            ArrayList<Integer> results = new ArrayList<Integer>();

            for (int i = foodName.toLowerCase().indexOf(guess.toLowerCase()); i >= 0; i = foodName.toLowerCase()
                    .indexOf(guess.toLowerCase(), i + 1))
            {
                System.out.println("TEST:" + i);
                results.add(i);
            }

            // Count value is for words that have 2 or more values of guess
            // in them.
            int count = 0;
            for (int i : results)
            {
                StringBuffer s1 = new StringBuffer(foodName);
                s1.insert(i + count, "<b>");
                count = count + 3;

                s1.insert(i + count + gLength, "</b>");
                count = count + 4;

                foodName = s1.toString();
                System.out.println("FOOD NAME:" + i + ":" + foodName);

            }
            return foodName;
        }
    });

    // This is what actually does stuff when you click on a listview item.
    lv1.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id)
        {

            // Strip out the bold tags
            String clicked = (String) lv1.getItemAtPosition(position);
            clicked = clicked.replaceAll("<b>", "");
            System.out.println("Clicked" + clicked);
            clicked = clicked.replaceAll("</b>", "");

            // Find the Food ID match and pass the food id to the
            // fooddisplay page
            for (Food f : foodList)
            {
                if (null != clicked && clicked.equals(f.getFood_Name()))
                {
                    Intent intent = new Intent(SearchByFood.this, SubstituteDisplay.class);
                    intent.putExtra("FoodID", f.getFood_ID());
                    startActivity(intent);

                }
            }
        }

    });

}

@Override
public void onBackPressed()
{
    final Intent intent = new Intent(this, MasterTemplateActivity.class);

    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    this.startActivity(intent);
    return;
}
} 
```

同样，对于为什么我的快速滚动图标一开始没有出现的任何帮助将不胜感激。这是一件小事，但它真的让我很烦。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T03:58:31.010

尝试`list.setFastScrollAlwaysVisible(true)`

并尝试`list.smoothScrollToPosition(0);`在调用滚动时显示图标...

像这样的东西..

```
new Handler().postDelayed(new Runnable() {
  @Override
  public void run(){
    list.smoothScrollToPosition(0);
  }
}, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T07:33:50.037

所以我再次发布这个是因为我的问题是完全不同的。快速滚动似乎也不适用于`ConstraintLayout`. `ListView`快速滚动和快速滚动似乎都`RecyclerView`不起作用。

# mysql - 使用 iOS 应用程序创建 mysql 数据库

> ID：10255628
> 
> 赞同：1
> 
> 时间：2012-04-21T02:17:14.170
> 
> 标签：mysql, objective-c, ios, image-uploading

我正在寻找如何使用我的 iOS 应用程序上传的照片创建一个 mysql 数据库。我已经对选择器和上传部分进行了编程，但我不知道如何创建这个数据库，因为它将有 3 种不同的声音“本地化、类型、日期”

感谢先进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:36:16.863

你是指 iPhone 上的数据库吗？如果在你的 iPhone 上，典型的解决方案是 sqlite。我个人使用了一个 Objective C 包装器，[FMDB](https://github.com/ccgus/fmdb)，它可以让你摆脱 sqlite 编程的杂草。或者，如果您想了解更多 Cocoa，请查看[Core Data 。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

如果，正如我怀疑的那样，您正在谈论您的服务器数据库，那么这可能不是关于如何创建服务器数据库的问题的正确论坛。您需要更具体，并包含您尝试过的代码示例。

# facebook - 如何检索 Facebook 状态或照片的时间线属性

> ID：10255629
> 
> 赞同：0
> 
> 时间：2012-04-21T02:17:28.983
> 
> 标签：facebook, facebook-timeline

使用 facebook 时间线，我可以设置或更改状态或照片的日期。我的应用如何使用 Faceook API 检索这些信息？我可以获得 created_time / updated_time 起诉图形 API，但这些不是我设置的时间线日期。

另外，例如，如果我创建了旅行生活事件，我如何从应用程序中检索开始/结束日期？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:10:10.063

API 目前不支持检索生活事件/许多其他特定于时间轴的字段

# ruby - 是什么决定了 irb 返回/显示的内容？

> ID：10255632
> 
> 赞同：2
> 
> 时间：2012-04-21T02:17:43.987
> 
> 标签：ruby, irb

irb 如何决定如何表示从语句返回的对象？

```
> “富”
=> “富”
> 2
=> 2

```

我认为它是等价的`print object.inspect`或类似的东西，但我没有尝试返回相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:19:44.790

好吧，`irb`实现一个[REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)。它在幕后几乎是这样做的：

```
loop do
  '> '.display
  input = gets.chomp
  value = eval input
  puts " => #{value.inspect}"
end 
```

# router - 路由器模拟

> ID：10255634
> 
> 赞同：0
> 
> 时间：2012-04-21T02:18:06.967
> 
> 标签：router, packet

对于我的一门课程，我正在编写一个模拟网络活动的 Java Applet。我有一台主机，它保存一个 MAC 到 IP 地址的 ARP 表，然后我让交换机跟踪连接到哪个物理端口的 MAC。（界面）

我的问题是，我应该如何模拟路由器。据我了解，主机将对传出IP进行计算以确定该IP是否在网络上，假设不在，主机将数据包发送到默认网关（通过查找IP地址的MAC地址默认网关），在这种情况下是路由器。现在路由器将在两个不同的网络上至少有两个接口。

所以，我的理论是，路由器将查看目标 IP 地址并将数据包通过管道传送到具有该网络的正确接口。但是，路由器是否具有“默认网关”，如果目标网络上没有这些接口，路由器可以将其传递给其他路由器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:29:09.507

不完全是。路由器有路由表。它们获取数据包的目标地址并找到到该目标的路由。他们使用的算法基本上是“最长匹配”（或“最具体匹配”）。

要实现默认网关的等效项，您需要放置一个默认路由，即目标为 的路由`0.0.0.0/0`。这将匹配每个数据包（因为每个数据包都在该网络中），但它始终是最差的匹配。

这是我的一个路由器的匿名路由表：

```
C    x.y.z.104/29 is directly connected, FastEthernet0/0
S    10.0.0.0/8 is directly connected, Null0
S    192.168.0.0/24 [1/0] is directory connected, FastEthernet 1/0
S*   0.0.0.0/0 [1/0] via x.y.z.1
S    192.168.0.0/16 is directly connected, Null0 
```

第一条路线是公共 LAN。第三条路线是专用局域网。请注意两条“Null0”路由，以阻止流向未使用的私有 IP 地址的流量从默认路由流出到我的 ISP。倒数第二个路由是默认路由。

请注意，我们通常认为是终端系统的大多数设备实际上都是路由器。典型的 PC 和服务器操作系统也具有路由器功能，因此它们也在内部使用路由表、指标和最长匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:36:13.363

路由器可以有默认路由。在最长前缀匹配中，/0 条目将指向默认路由。

# python - 包含一些通配符的大型列表中的成员资格测试

> ID：10255642
> 
> 赞同：2
> 
> 时间：2012-04-21T02:19:48.103
> 
> 标签：python, performance, search, set

当该列表包含特殊类别时，如何测试一个短语是否在大型 (650k) 短语列表中？

例如，我想测试该短语`["he", "had", "the", "nerve"]`是否在列表中。它是，但在`["he", "had", "!DETERMINER", "nerve"]`where`"!DETERMINER"`是包含多个选择的词类的名称`(a, an, the)`。我有大约 350 个词类，其中一些很长，所以我认为枚举列表中具有一个（或多个）词类的每个项目是不可行的。

我想使用一组这些短语，而不是慢慢地浏览一个列表，但我不知道如何处理单词类的可变性。速度非常重要，因为我每次需要进行数十万次比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:29:19.663

与 pjwerneck 的建议类似，您可以使用树（或更具体地说是[trie](https://en.wikipedia.org/wiki/Trie)）将列表存储在部分中，但将其扩展为专门处理类别。

```
# phrase_trie.py

from collections import defaultdict

CATEGORIES = {"!DETERMINER": set(["a","an","the"]),
              "!VERB": set(["walked","talked","had"])}

def get_category(word):
    for name,words in CATEGORIES.items():
        if word in words:
            return name
    return None

class PhraseTrie(object):
    def __init__(self):
        self.children = defaultdict(PhraseTrie)
        self.categories = defaultdict(PhraseTrie)

    def insert(self, phrase):
        if not phrase: # nothing to insert
            return

        this=phrase[0]
        rest=phrase[1:]

        if this in CATEGORIES: # it's a category name
            self.categories[this].insert(rest)
        else:
            self.children[this].insert(rest)

    def contains(self, phrase):
        if not phrase:
            return True # the empty phrase is in everything

        this=phrase[0]
        rest=phrase[1:]

        test = False

        # the `if not test` are because if the phrase satisfies one of the
        # previous tests we don't need to bother searching more

        # allow search for ["!DETERMINER", "cat"]
        if this in self.categories: 
            test = self.categories[this].contains(rest)

        # the word is literally contained
        if not test and this in self.children:
            test = self.children[this].contains(rest)

        if not test:
            # check for the word being in a category class like "a" in
            # "!DETERMINER"
            cat = get_category(this)
            if cat in self.categories:
                test = self.categories[cat].contains(rest)
        return test

    def __str__(self):
        return '(%s,%s)' % (dict(self.children), dict(self.categories))
    def __repr__(self):
        return str(self)

if __name__ == '__main__':
    words = PhraseTrie()
    words.insert(["he", "had", "!DETERMINER", "nerve"])
    words.insert(["he", "had", "the", "evren"])
    words.insert(["she", "!VERB", "the", "nerve"])
    words.insert(["no","categories","here"])

    for phrase in ("he had the nerve",
                   "he had the evren",
                   "she had the nerve",
                   "no categories here",
                   "he didn't have the nerve",
                   "she had the nerve more"):
        print '%25s =>' % phrase, words.contains(phrase.split()) 
```

运行`python phrase_trie.py`：

```
 he had the nerve => True
         he had the evren => True
        she had the nerve => True
       no categories here => True
 he didn't have the nerve => False
   she had the nerve more => False 
```

关于代码的几点：

*   的用途`defaultdict`是避免在调用之前检查该子树是否存在`insert`；它会在需要时自动创建和初始化。
*   如果要进行大量调用`get_category`，则可能值得构建一个反向查找字典以提高速度。（或者，更好的是，记住调用，`get_category`以便常用词可以快速查找，但您不会浪费内存来存储您从未查找过的词。）
*   该代码假定每个单词仅属于一个类别。（如果没有，唯一的变化是返回一个列表和循环这个列表`get_category`的相关部分。）`PhraseTrie`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:47:53.427

首先，制作两个`dict`s：

```
partOfSpeech = {'a':'!DETERMINER', 'an':'!DETERMINER', 'the':'!DETERMINER'}
words = {'!DETERMINER': set(['a', 'an', 'the'])} 
```

这应该 - 至少 - 让你加快速度。让我们看看这让你有多少加速，如果还不够，请发表评论，我会努力做得更好（或者 SO 社区的其他人甚至可以改进我的解决方案或提供更好的解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:04:06.973

如果速度很重要并且您必须处理词类，而不是存储短语和词类的列表，您应该考虑将其存储为单词树，这样孩子的深度就是它在短语中的位置。这样，您可以简单地查询每个级别，并且随着您向上移动，搜索范围会缩小。一旦找不到单词，您就知道该短语未列出。

这是一个非常幼稚的实现，仅作为您的示例。您甚至可以将其实现为像这样的嵌套字典，但如果您的数据很大且是动态的，您可能应该使用数据库：

```
tree = {'he':
        {'had':
         {'the': {'nerve': {}, 'power': {}, 'gift': {}},
          'a': {'car': {}, 'bike': {}},
          'an': {'airplane': {}, 'awful': {'smell': {}}}
          }
         }
        }

def find_phrase(phrase, root):    
    if not phrase:
        return True

    try:
        next = root[phrase[0]]
        return find_phrase(phrase[1:], next)
    except KeyError:
        return False

    return False

assert find_phrase(['he', 'had', 'the', 'nerve'], tree) is True
assert find_phrase(['he', 'had', 'the', 'power'], tree) is True
assert find_phrase(['he', 'had', 'the', 'car'], tree) is False
assert find_phrase(['he', 'had', 'an', 'awful', 'smell'], tree) is True
assert find_phrase(['he', 'had', 'an', 'awful', 'wife'], tree) is False 
```

# css - CSS - display:(inline|block) 和 display:box 之间的区别？

> ID：10255643
> 
> 赞同：4
> 
> 时间：2012-04-21T02:20:09.243
> 
> 标签：css, inline

我很困惑。我刚刚发现了这个 CSS 属性：[display:box;](http://www.w3schools.com/cssref/playit.asp?filename=playcss_box-orient&preval=inline-axis) 我不明白它给 CSS 带来了什么，而 display:block、inline、inline-block 是不可能的。

任何人都可以启发我吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T02:38:29.277

它是新的 flexbox 模块的一部分。从[工作草案](http://www.w3.org/TR/css3-flexbox/)：

> 在 flexbox 布局模型中，flexbox 的子级可以在任何方向上布局，并且可以“伸缩”它们的大小，要么增长以填充未使用的空间，要么缩小以避免溢出父级。孩子的水平和垂直对齐都可以很容易地操作。这些框的嵌套（水平内垂直，或垂直内水平）可用于构建二维布局。

它仍然是一个草案规范，但值得一试，直到它被浏览器完全实现。在许多情况下，它可能会让我们摆脱浮动！

请注意，`display:box`它已被弃用，取而代之的是`display:flexbox`.

最后但同样重要的是：[不要依赖 w3schools](http://w3fools.com)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T02:25:29.130

你可以在这里找到更多信息[。](http://hacks.mozilla.org/2010/04/the-css-3-flexible-box-model/)

简要总结：

> 除了 CSS 1 和 2 的传统盒子模型之外，CSS 3 还引入了一种全新的盒子模型。灵活盒子模型决定了盒子在其他盒子中的分布方式以及它们共享可用空间的方式。
> 
> 这种盒子模型类似于 XUL（Firefox 使用的用户界面语言）使用的模型。其他一些语言使用类似的盒子模型，例如 XAML 或 GladeXML。
> 
> 通常，如果您想创建适应浏览器窗口大小的流体布局或适应字体大小的弹性布局，灵活的盒子模型正是您所需要的。
> 
> ...
> 
> 默认情况下，传统的 CSS 盒子模型根据 HTML 流垂直分布盒子。使用灵活的盒子模型，可以明确指定顺序。你甚至可以逆转它。要切换到灵活盒子模型，请将属性 display 设置为具有子盒子的盒子上的值盒子（或内联盒子）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T02:23:46.790

[查看MDN](https://developer.mozilla.org/en/CSS/box-orient)的文档：

> CSS`box-orient`属性指定元素是水平还是垂直布局其内容。
> 
> 例如，XUL`box`和`hbox`元素默认水平布局其内容，但 XUL`vbox`元素默认垂直布局其内容。
> 
> 默认情况下，HTML DOM 元素沿内联轴布置其内容。此 CSS 属性仅适用于 CSS`display`值为`box`或的 HTML 元素`inline-box`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T02:50:18.920

显示：框允许：

*   box-orient、box-direction、box-ordinal-group等box的灵活分布……可以修改另一个box内部box的正态分布，不仅可以从垂直到水平（可以通过inline、inline-block或者block来实现）有一些浮动技巧），但也有相反的顺序（可以通过一些浮动技巧来实现水平反向顺序），甚至是明确的顺序。
*   灵活的大小：框的大小可以计算为显式大小（使用高度、宽度、最大高度、最大宽度......）或父框的大小和可用空间（使用 box-flex）。
*   使用 box-align、box-pack、box-lines 处理可用空间...

新的盒子模型可以做一些旧模型在没有额外的javascript计算的情况下做不到的事情，不多

# ios5 - iOS5：为什么 setDelegate:self 在 main.m 中导致 EXC_BAD_ACCESS？

> ID：10255647
> 
> 赞同：1
> 
> 时间：2012-04-21T02:20:55.577
> 
> 标签：ios5

编辑：我实际上将其追溯到我调用 [in open] 的行；并尝试打开输入流。出于某种原因，我的自定义类可能是无效的委托？我看到其他人有同样的错误，并且在将所有内容移动到 ViewController 子类而不是扩展 NSObject 的自定义类之后没有问题。但是，我仍然想使用我自己的自定义类，而不是 ViewControllers 之一。

我有一个我自己编写的 Connection 类，我使用 NSInputStream 和 NSOutputStream。我在 init 方法中初始化流：

```
- (id)init {
    self = [super init];
    if(self) {
        messages = [NSMutableArray new];

        CFReadStreamRef readStream;
        CFWriteStreamRef writeStream;
        CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)HOST, PORT, &readStream, &writeStream);
        [self setIn: (__bridge_transfer NSInputStream *)readStream];
        [self setOut: (__bridge_transfer NSOutputStream *)writeStream];
        NSLog(@"Streams opened.");
        NSLog(@"ConnectionController initialized...");
    }
    return self;
} 
```

另外，这是我在 .h 中的连接类的定义

```
@interface ConnectionController : NSObject <NSStreamDelegate> {
    NSMutableArray *messages;
}

@property (strong, nonatomic) NSInputStream *in;
@property (strong, nonatomic) NSOutputStream *out;

-(void)sendMessage:(NSString*)msg;
-(void)stream:(NSStream *)eStream handleEvent:(NSStreamEvent)eventCode;
-(void)messageReceived:(NSString*)msg;
@end 
```

当我调用这个方法 openStreams 时，我得到 EXC_BAD_ACCESS

```
- (void)openStreams {
    [in setDelegate:self];
    [out setDelegate:self];

    [in scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [out scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [in open];
    [out open];
} 
```

当我注释掉 setDelegate:self 时，错误不会发生。但是，我需要这个才能使用事件驱动的方法来处理 NSStreamEvents 我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T15:45:09.433

正在发生的事情是 Connection 类的任何实例（设置为委托）正在被释放（在运行循环中导致 EXC_BAD_ACCESS），或者因为您没有保留它，或者您正在使用 ARC（很可能）并且您没有参考它。

解决方案是在连接类上调用保留，如下所示：

```
Connection *connection = [[Connection alloc] init];
[connection retain]; 
```

或者，如果您确实启用了 ARC，请在您分配 Connection 的类中创建一个实例变量，并将您的连接实例存储在那里。这样 ARC 就不会释放它，因为实例 var 算作引用。

# c - ncurses库编译错误

> ID：10255650
> 
> 赞同：0
> 
> 时间：2012-04-21T02:21:55.767
> 
> 标签：c, compiler-errors, ncurses

我在这个网站上查看了类似的问题并用谷歌搜索了为什么会发生这种情况，但尝试了这些[无法编译](https://stackoverflow.com/questions/6538059/not-able-to-compile-c-c-code-thats-using-ncurses)的解决方案，[ncurses 和 curses 之间的区别](https://stackoverflow.com/questions/1517756/whats-the-difference-between-lcurses-and-lncurses-when-compiling-c-using-ncur)，[另一个编译错误](http://www.linuxquestions.org/questions/programming-9/several-undefined-reference-to-error-when-compiling-a-c-programm-186781/)，但我仍然遇到错误问题，`undefined reference to stdscr`编译`wgetch`器正在寻找据我所知，该库是我用来`find`定位 curses 库并`#include`在行中输入完整位置的。

我的代码如下

```
#include <ncurses.h>
#include <stdio.h>
#include <string.h>

int first_line(char);
int main(){

    char c = 0;

    while((c = getch())!=EOF){
        first_line(c);

    }   

    return 0;
}

int first_line(char c){
    if (c != '\n' && c != '\r'){
            putchar(c);
        do{
            c = getch();
            putchar(c);}
            while( c !='\n');

    }
    else return 0;

    return 0;
} 
```

如果您能指出我错过了什么或做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:49:49.813

`ncurses.h`是一个头文件（包含声明），而不是一个库（包含实现这些声明的代码）。

您看到的错误消息来自链接器，而不是来自编译器。

如果您使用 gcc，则需要添加`-lcurses`或添加`-lncurses`到编译器命令行（*在*源文件名之后）。

例如，在我的系统上，我将您的源代码复制到`c.c`，我可以使用以下任一方法编译和链接它

```
gcc c.c -o c -lcurses 
```

或者

```
gcc c.c -o c -lncurses 
```

# asp.net-mvc-3 - 如果在 thr sql server 数据库上违反了唯一键约束，我如何强制实体框架引发唯一异常

> ID：10255654
> 
> 赞同：-2
> 
> 时间：2012-04-21T02:23:46.450
> 
> 标签：asp.net-mvc-3, entity-framework-4, sql-server-2008-r2

我有一个名为国家的表，我通过在 sql servwer 2008 r2 上创建类型为“唯一键”的“索引/键”来将 country_name 字段定义为唯一的。但目前如果用户插入我的 asp.net mvc3 应用程序中已经存在的 country_name 值，则会引发类型为“System.Data.Entity.Infrastructure.DbUpdateException”的异常，这是非常普遍的。

**那么有没有办法在违反唯一约束的情况下定义特定的异常？？？而不仅仅是引发一般的“System.Data.Entity.Infrastructure.DbUpdateException”异常？**

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:30:26.820

最有可能的是，我目前无法对其进行测试，内部异常`DbUpdateException`可能是关于重复或外键约束的异常。更重要的是，您有机会通过检查一个国家/地区是否已经存在来不抛出任何异常。我能想到的两种方法是；通过执行简单的选择检查并查看该国家/地区是否已经存在，如果不存在，则执行插入/添加或编写存储过程，然后执行选择/插入或合并并返回您想要返回的任何值.

**更新**

（这是演示事件逻辑流程的示例代码，不是良好的编程习惯，特别是通过捕获所有异常）

*异常逻辑*

```
public AddCountry(string countryTitle)
{
  using (var db = new DbContext(_connectionString)
  {
    try
    {
      // Linq to (SQL/EF)-ish code
      Country country = new Country();
      country.ID = Guid.NewGuid();
      country.Title = countryTitle;
      db.Countrys.Add(country);
      db.SubmitChanges(); // <--- at this point a country could already exist
    }
    catch (DbUpdateException ex)
    {
      // <--- at this point a country could be delete by another user
      throw Exception("Country with that name already exists");
    }
  }
} 
```

*非异常逻辑*

```
public AddCountry(string countryTitle)
{
  using (var db = new DbContext(_connectionString)
  {
    using (TransactionScope transaction = new TransactionScope())
    {
      try
      {
        Country country = db.Countries 
                            .FirstOrDefault(x => x.Title = countryTitle);

        if (country == null)
        {
          country = new Country();
          country.ID = Guid.NewGuid();
          country.Title = countryTitle;
          db.Countrys.Add(country);
          db.SubmitChanges(); // <--- at this point a country 
                              // shouldn't exist due to the transaction
                              // although someone with more expertise
                              // on transactions with entity framework
                              // would show how to use transactions properly
        }
      }
      catch (<someTimeOfTransactionException> ex)
      {
        // <--- at this point a country with the same name
        // should not exist due to the transaction
        // this should really only be a deadlock exception
        // or an exception outside the scope of the question
        // (like connection to sql lost, etc)
        throw Exception("Deadlock exception, cannot create country.");
      }
    }
  }
} 
```

很可能需要正确配置 [TransactionScope(Transaction transactionToUse) 构造函数。](http://msdn.microsoft.com/en-us/library/ms149851.aspx)[可能将 Transactions.IsolationLevel 设置为 Serializable](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel.aspx)

我还建议阅读[Entity Framework transaction](https://stackoverflow.com/questions/9093288/entity-framework-transaction)。

# c - 使用具有非空读取缓冲区的套接字流时出现“非法查找”错误

> ID：10255663
> 
> 赞同：6
> 
> 时间：2012-04-21T02:25:26.380
> 
> 标签：c, linux, sockets, fdopen

我目前正在编写一个关于`Linux x86_64`使用`<sys/socket.h>`. 通过 接受连接后`accept()`，我使用`fdopen()`将检索到的套接字包装到`FILE*`流中。

写入和读取该`FILE*`流通常工作得很好，但是一旦我写入它，套接字就会变得不可用，而它有一个非空的读取缓冲区。

出于演示目的，我编写了一些代码来侦听连接，然后使用`fgetc()`. 如果该行太长而无法放入缓冲区，则不会完全读取，而是在下一次迭代期间读取。

```
#include <unistd.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

FILE* listen_on_port(unsigned short port) {
        int sock = socket(AF_INET, SOCK_STREAM, 0);
        struct sockaddr_in name;
        name.sin_family = AF_INET;
        name.sin_port = htons(port);
        name.sin_addr.s_addr = htonl(INADDR_ANY);
        if(bind(sock, (struct sockaddr*) &name, sizeof(name)) < 0)
                perror("bind failed");
        listen(sock, 5);
        int newsock = accept(sock, 0, 0);
        return fdopen(newsock, "r+");
}

int main(int argc, char** argv) {
        int bufsize = 8;
        char buf[9];
        buf[8] = 0; //ensure null termination

        int data;
        int size;

        //listen on the port specified in argv[1]
        FILE* sock = listen_on_port(atoi(argv[1]));
        puts("New connection incoming");

        while(1) {
                //read a single line
                for(size = 0; size < bufsize; size++) {
                        data = fgetc(sock);
                        if(data == EOF)
                                break;
                        if(data == '\n') {
                                buf[size] = 0;
                                break;
                        }
                        buf[size] = (char) data;
                }

                //check if the read failed due to an EOF
                if(data == EOF) {
                        perror("EOF: Connection reset by peer");
                        break;
                } else {
                        printf("Input line: '%s'\n", buf);
                }

                //try to write ack
                if(fputs("ack\n", sock) == EOF)
                        perror("sending 'ack' failed"); 

                //try to flush
                if(fflush(sock) == EOF)
                        perror("fflush failed");        
        }

        puts("Connection closed");
} 
```

代码应在 gcc 中编译，无需任何特殊参数。使用端口号作为参数运行它，并使用 netcat 在本地连接到它。

现在，如果您尝试发送少于 8 个字符的字符串，它将完美运行。但是如果你发送一个包含超过 10 个字符的字符串，程序就会失败。此示例输入：

```
ab
cd
abcdefghij 
```

将创建此输出：

```
New connection incoming
Input line: 'ab'
Input line: 'cd'
Input line: 'abcdefgh'
fflush failed: Illegal seek
EOF: Connection reset by peer: Illegal seek
Connection closed 
```

如您所见，（正确地）只读取了 abcdefgh 的前 8 个字符，但是当程序尝试发送 'ack' 字符串（客户端从未收到），然后刷新输出缓冲区时，我们收到一个`Illegal seek`错误，并且下一次调用`fgetc()`返回 EOF。

如果该`fflush()`部分被注释掉，仍然会出现同样的错误，但是

```
fflush failed: Illegal seek 
```

服务器输出中缺少行。

如果该`fputs(ack)`部分被注释掉，一切似乎都按预期工作，但从 gdb 手动调用的 perror() 仍然报告“非法搜索”错误。

如果两者都`fputs(ack)`被`fflush()`注释掉，那么一切都会*按*预期工作。

不幸的是，我没有找到任何好的文档，也没有关于这个问题的任何 Internet 讨论，因此非常感谢您的帮助。

**编辑**

我最终解决的解决方案是*不*使用`fdopen()`and `FILE*`，因为似乎没有干净的方法可以将套接字 fd 转换为`FILE*`可以在`r+`模式下可靠使用的 a 。`fputs`相反，我直接在套接字 fd 上工作，为and编写自己的替换代码`fprintf`。

如果有人需要，[这里是代码](http://pastebin.com/Erd2zVD8)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T07:33:14.067

显然，“r+”（读/写）模式在这个实现中不适用于套接字，毫无疑问，因为底层代码假定它必须在读和写之间进行切换。这是 stdio 流的一般情况（您必须执行某种同步操作），因为回到昏暗时间，实际的 stdio 实现每个流只有一个计数器，它要么是“剩余字符数”的计数器通过`getc`宏从流缓冲区中读取”（在读取模式下）或“可以通过宏安全地写入流缓冲区的字符数`putc`（在写入模式下）。要重置单个计数器，您必须进行查找-类型操作。

在管道和套接字上不允许搜索（因为“文件偏移”在那里没有意义）。

一种解决方案是根本不使用 stdio 包装套接字。*对于您的目的，另一个可能更容易/更好的方法是用两个*stdio 流而不是一个来包装它：

```
FILE *in = fdopen(newsock, "r");
FILE *out = fdopen(newsock, "w"); 
```

不过这里还有另一个缺陷，因为当您转到`fclose`一个流时，会关闭另一个流的文件描述符。要解决这个问题，您需要`dup`一次套接字描述符（在上面的两个调用中的任何一个中，哪一个都没有关系）。

如果您打算在某个时候在套接字上使用`select`或`poll`类似的东西，您通常应该选择“不使用 stdio 包装”解决方案，因为没有很好的干净便携的方式来跟踪 stdio 缓冲。（有特定于实现的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T04:54:41.057

是的，您可以使用一个文件流来处理您的套接字，至少在 Linux 上是这样。但是你应该小心它：你只能使用 ferror() 来测试错误。我有一些代码使用它并在一个主要的法国网站上完美地运行在生产环境中。

如果您使用 errno 或 perror() 您将捕获流将遇到的任何内部错误，即使它想对您隐藏它。而“非法寻求”就是其中之一。

此外，要测试真正的 EOF 条件，您应该使用 feof()，因为当返回 true 时，它​​与返回非零值的 ferror() 互斥。这是因为，在使用 fgetc() 时，您没有任何方法可以将错误与真正的 EOF 条件区分开来。因此，正如另一位用户指出的那样，您可能应该更好地使用 fgets() 。

所以，你的测试：

```
if(data == EOF) {
    perror("EOF: Connection reset by peer");
    break;
} else {
    printf("Input line: '%s'\n", buf);
} 
```

应该写成：

```
int sock_error = ferror(sock);
if (sock_error) {
    fprintf(stderr, "Error while reading: %s", strerror(sock_error));
} else {
    printf("Input line: '%s'\n", buf);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T03:07:42.693

不要`fflush()`在网络套接字上使用。它们是无缓冲的流。

另外，这段代码：

```
//read a single line
for(size = 0; size < bufsize; size++) {
    data = fgetc(sock);
    if(data == EOF)
        break;
    if(data == '\n') {
        buf[size] = 0;
        break;
    }
    buf[size] = (char) data;
} 
```

不读一行。它只能读取到缓冲区大小，您定义为 8。`sock`仍然有数据供您接收，您应该**在**使用`fputs`. 顺便说一句，您可以将整个块替换为

```
fgets(buf, bufsize, sock); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-15T10:48:04.483

尝试这个 ：

```
#define BUFSIZE 88

FILE* listen_on_port(unsigned short port) {
 ... 
}

int main(int argc, char** argv) {
    int bufsize = BUFSIZE;
    char buf[ BUFSIZE ]; 
```

# java - 在 Windows 中，如何以编程方式使整个屏幕呈黑白闪烁？

> ID：10255668
> 
> 赞同：2
> 
> 时间：2012-04-21T02:26:16.700
> 
> 标签：java, winapi, timer

我正在使用一个简单的番茄定时器，但我没有声音/扬声器，所以我想通过简单地用指定的颜色将屏幕消隐，然后用另一种颜色切换几次来表示定时器的结束。就好像我让我的显示器成为左转汽车信号一样。我如何控制这样的显示器？这有一些win32代码吗？

我对 Java 很熟悉，对 c# 或 C++ 的了解就更少了

![在此处输入图像描述](../Images/949f7c2c5e31e51b1f6e1db98888c4aa.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T04:48:28.403

我不确定控制整个屏幕的动机是什么。也许更合适的是在系统托盘中显示通知。

`JFrame`无论如何，使用 Java 你可以在全屏模式下弹出一个。使用计时器更改其背景几次，然后将其关闭。这是一个演示类似内容的简化示例：

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.Timer;

class FullScreenFrame extends JFrame{
    private static final int MAX_COUNT = 3;
    private static final int PERIOD = 1000;
    private JPanel panel;
    private int count;

    public FullScreenFrame(){
        super();

        setUndecorated(true);

        getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, false), "ESCAPE");
        getRootPane().getActionMap().put("ESCAPE", new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                dispose();
            }
        });

        panel = new JPanel();
        panel.setBackground(Color.GREEN);
        add(panel);

        new Timer(PERIOD, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (count < MAX_COUNT) {
                    if (count % 2 == 0){
                        panel.setBackground(Color.BLACK);           
                    } else {
                        panel.setBackground(Color.GREEN);
                    }
                    count++;

                } else {
                    ((Timer) e.getSource()).stop();
                    dispose();
                }
            }

        }).start();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                FullScreenFrame frame = new FullScreenFrame();
                frame.setBounds(GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration().getBounds());
                frame.setAlwaysOnTop(true);
                frame.setVisible(true);
            }
        });
    }
} 
```

# perl - 如何使用科学记数法制作 Perl 的 system() 格式参数？

> ID：10255669
> 
> 赞同：2
> 
> 时间：2012-04-21T02:26:26.850
> 
> 标签：perl, floating-point, scientific-notation

在我的 Perl 程序中，我试图运行另一个用 C 编写的命令，使用`system`. 该命令需要几个参数：一个字符串、一个浮点数、两个整数、一对浮点数和另一个字符串。我正在运行这个

```
my $arg1="electron";
my $arg2=0.511;
# more definitions
system("./fermions $arg1 $arg2 $arg3 $arg4 " .
       "$arg5 $arg6 \"string\" > outfile.out"); 
```

我需要改变`$arg5`为几个不同的浮点值。我通过设置`$arg5="1.0e5"`然后在 for 循环中运行 if 语句以将值更改为字符串来使其工作。我希望能够以浮动方式执行此操作，并尝试过

```
system("./fermions $arg1 $arg2 $arg3 $arg4 " .
       "%e $arg6 \"string\" >outfile.out",
       $arg5); 
```

但这没有用。还有另一种选择，还是我的 if 语句选项是唯一的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T02:35:27.503

如果你想使用 printf 表示法（比如“%e”），你需要使用 Perl 的`sprintf`内建函数。否则，您最终只会将“%e”作为文字参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:13:05.617

**重要提示：**您应该*始终*检查 Perl[`system`](http://perldoc.perl.org/functions/system.html)函数的返回值以确定命令是否失败。

使用 Perl[`sprintf`](http://perldoc.perl.org/functions/sprintf.html)来格式化浮点值，如下面的代码所示。是的，您可以不使用该命令作为格式说明符，但如果该命令在其他地方有杂散的 % 字符，您可能会得到令人惊讶的结果。使用两个步骤更安全。

```
#! /usr/bin/env perl

use strict;
use warnings;

my @float_values = (1.0e5, 3.14159, 2.71828);

for my $f (@float_values) {
  my $arg5 = sprintf "%e", $f;

  system(qq[./fermions $arg5 "string" >> outfile.out]) == 0
    or warn "$0: fermions failed";
} 
```

如果您不熟悉语法，[`qq[...]`](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)它就像双引号字符串一样工作，但不同的分隔符意味着您不必在命令中转义双引号。

请注意，出于印刷目的，我省略了其他参数，但您可以将它们与`$arg5`. 另一个微妙的变化是切换到`>>`追加而不是`>`破坏。

使用替身`fermions`

```
#! /usr/bin/env perl
$" = "][";
warn "[@ARGV]\n"; 
```

两个程序一起运行的输出是

```
[1.000000e+05][字符串]
[3.141590e+00][字符串]
[2.718280e+00][字符串]
```

就术语而言，系统调用是指来自操作系统的低级服务请求，*例如*、`open`、`close`、`unlink`等等。尽管 Perl 的系统函数使用系统调用，但这两个概念是不同的。

为了确保 shell*不会*伪造你的命令行参数，请使用[perlipc 的“安全管道打开”部分中](http://perldoc.perl.org/perlipc.html#Safe-Pipe-Opens)描述的技术。当给定参数列表而不是包含整个命令的单个字符串时，Perl[`system`](http://perldoc.perl.org/functions/system.html)和函数会绕过 shell。[`exec`](http://perldoc.perl.org/functions/exec.html)

您的情况有点棘手，因为您想重定向标准输出。下面的代码 fork 一个孩子，将孩子设置`STDOUT`为 append `outfile.out`，然后在孩子中运行`fermion`with [`exec`](http://perldoc.perl.org/functions/exec.html)。父母等待孩子退出并报告任何失败。

```
#! /usr/bin/env perl

use strict;
use warnings;

my @float_values = (1.0e5, 3.14159, 2.71828);

for my $f (@float_values) {
  my $arg5 = sprintf "%e", $f;

  my $pid = fork;
  if (defined $pid) {
    if ($pid == 0) {
      my $path = "outfile.out";
      open STDOUT, ">>", $path or die "$0: open $path: $!";
      exec "./fermions", $arg5, "string" or die "$0: exec: $!";
    }
    else {
      local $!;
      my $pid = waitpid $pid, 0;
      warn "$0: waitpid: $!" if $pid == -1 && $!;
      warn "$0: fermion exited " . ($? >> 8) if $?;
    }
  }
  else {
    die "$0: fork: $!";
  }
} 
```

# iphone - Xcode 显示“Ghost”标头

> ID：10255670
> 
> 赞同：1
> 
> 时间：2012-04-21T02:26:27.513
> 
> 标签：iphone, ios, xcode, xcode4.3

我找不到更好的标题来描述这个问题。我创建了一个名为“ASFlyoutSheet”的 UIView 子类。我将该类添加到另一个项目（未复制，但引用）。多次成功构建项目后，我突然收到一些关于重复标题的错误。我检查了，我确定没有重复。

为了更深入地调查错误，我查找了文件（使用错误链接）。该文件是GHOST！我在项目中找不到它（见附图）。我什至从这个标题幽灵中删除了代码，但错误仍然存​​在。我从项目中删除了原来的那个。错误仍然存​​在。我搞定了。错误存在。我终于创建了一个具有相同类名的文件，通过删除到垃圾箱将其删除，但这个幽灵标题仍然出现。

![幽灵头文件](../Images/b451a3b58e35c5e810c274bd218aa8eb.png)

# ruby - 访问元素？

> ID：10255671
> 
> 赞同：-1
> 
> 时间：2012-04-21T02:26:32.137
> 
> 标签：ruby

我将自己的访问元素的方法定义为：

```
class Array2
  def [](key)
    if key.kind_of?(Integer)
      @elements[key]
    else
      # ...
    end
  end
end 
```

如果我之前声明`@elements`为`Array.new`，则这两个操作：

```
list = Array2.new
# ...
puts list[0]
puts list.[](0) 
```

好好工作。为什么第一次手术可以接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:31:41.447

`list[0]`和语法`list.[](0)`的含义完全相同。他们使用对象上`[]`的参数调用该方法。`0``list`

# jquery - jquery Ajax调用成功但调用错误回调

> ID：10255674
> 
> 赞同：1
> 
> 时间：2012-04-21T02:27:39.540
> 
> 标签：jquery, ajax

为什么即使 Fiddler 没有报告错误，下面的 jQuery ajax 也总是调用错误回调：

```
 $.ajax({
        type: 'GET',
        url: "http://open.mapquestapi.com/nominatim/v1/search?format=json&viewbox=-122%2C46%2C-73%2C40&countrycodes=ca&bounded=1&addressdetails=0&q=[hotel]",
        dataType: 'jsonp',
        jsonp: 'json_callback',
        error: function(parameters) {
            alert(parameters);
        },
        success: searchCompleteCallBack
    }); 
```

这是 Fiddler 会话，虽然成功，但有一个带有横线的红色圆圈作为状态图标，如下所示： ![在此处输入图像描述](../Images/90a3b2e323fa8eede29b44fe05d0df8b.png)

```
GET /nominatim/v1/search?format=json&viewbox=-122%2C46%2C-73%2C40&countrycodes=ca&bounded=1&addressdetails=0&q=[hotel]&json_callback=jQuery17108850838504386628_1334974646679&_=1334974661295 HTTP/1.1
Accept: application/javascript, */*;q=0.8
Referer: http://localhost:50383/?AspxAutoDetectCookieSupport=1
Accept-Language: en-US
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; BOIE9;ENGB)
Accept-Encoding: gzip, deflate
Host: open.mapquestapi.com
Connection: Keep-Alive

HTTP/1.1 200 OK
Date: Sat, 21 Apr 2012 02:17:41 GMT
Server: Apache
Content-Location: search.php
Vary: negotiate
TCN: choice
Access-Control-Allow-Origin: *
Content-Length: 4775
Keep-Alive: timeout=5, max=91
Connection: Keep-Alive
Content-Type: application/json; charset=UTF-8

jQuery17108850838504386628_1334974646679([{"place_id":"2166467243","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"1417990074","boundingbox":["43.0738813782","43.0938851929","-79.0912683105","-79.0712606812"],"lat":"43.0838817","lon":"-79.0812662","display_name":"Quality Hotel, Murray Street, Niagara Falls, Ontario, Ontario, Canada","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"},{"place_id":"2085733959","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"way","osm_id":"97928121","boundingbox":["49.8510055541992","49.8513870239258","-97.1532821655273","-97.1526718139648"],"lat":"49.8512060913871","lon":"-97.1530114466667","display_name":"Pembina Hotel, 1011, Pembina Highway, Point Road, Winnipeg, Manitoba, Canada","class":"amenity","type":"hotel"},{"place_id":"2152638544","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"1324405899","boundingbox":["43.8393080139","43.8593118286","-79.3921792603","-79.3721716309"],"lat":"43.849309","lon":"-79.382178","display_name":"Holiday Inn Express & Suites, Fulton Way, Thornlea, Markham, Ontario","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"},{"place_id":"2177668535","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"way","osm_id":"138157978","boundingbox":["43.4092330932617","43.4098968505859","-80.3297119140625","-80.3289260864258"],"lat":"43.40953956119","lon":"-80.3293440133707","display_name":"Hespeler Road, Cambridge, Ontario, Canada","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"},{"place_id":"2138545308","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"1280026038","boundingbox":["43.6322805786","43.6522843933","-79.4218270874","-79.401819458"],"lat":"43.6422834","lon":"-79.4118234","display_name":"Palace Arms, Strachan Avenue, Liberty Village, Toronto, Ontario, M5A1Z9, Canada","class":"tourism","type":"hostel"},{"place_id":"5773486","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"583902387","boundingbox":["45.3422987366","45.3623025513","-75.6427056885","-75.6226980591"],"lat":"45.3522996","lon":"-75.6327046","display_name":"Bank Street, Blossom Park, Ottawa, Ontario","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"},{"place_id":"2170250899","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"1445914835","boundingbox":["43.1746237183","43.194627533","-79.5842340088","-79.5642263794"],"lat":"43.1846249","lon":"-79.5742298","display_name":"Beamer Falls Manor at Falconridge Farm, Ridge Road West, Grimsby, Ontario, Canada","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"},{"place_id":"2664364","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"343055090","boundingbox":["43.6355078125","43.6555116272","-79.4053170776","-79.3853094482"],"lat":"43.6455088","lon":"-79.3953127","display_name":"Global Village Backpackers Hostel, King Street West, Fashion District, Toronto, Ontario, M5A1Z9, Canada","class":"tourism","type":"hostel"},{"place_id":"2168185190","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"way","osm_id":"129431482","boundingbox":["45.3853416442871","45.3861045837402","-75.733268737793","-75.7327346801758"],"lat":"45.3857092561038","lon":"-75.7330025913023","display_name":"Best Western Macies Hotel, Carling Avenue, Rideauview, Ottawa, Ontario, Canada","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"},{"place_id":"2166467244","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"node","osm_id":"1417990095","boundingbox":["43.0724356079","43.0924394226","-79.0928704834","-79.072862854"],"lat":"43.0824382","lon":"-79.0828672","display_name":"Hilton Niagara Falls, Fallsview Boulevard, Niagara Falls, Ontario, Ontario, Canada","class":"tourism","type":"hotel","icon":"http://open.mapquestapi.com/nominatim/v1/images/mapicons/accommodation_hotel2.p.20.png"}]) 
```

实际上，我不久前就进行了这项工作，但现在无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:55:42.373

我无法在 Firefox 和 Chrome 中重现该问题。

在您的控制台中尝试这段代码，看看发生了什么。

```
$.ajax({
        type: 'GET',
        url: "http://open.mapquestapi.com/nominatim/v1/search?format=json&viewbox=-122%2C46%2C-73%2C40&countrycodes=ca&bounded=1&addressdetails=0&q=[hotel]",
        dataType: 'jsonp',
        jsonp: 'json_callback',
        error: function(parameters) {
            console.error("error");
            console.error(parameters);
        },
        success: function(parameters) {
            console.log("success");
            console.log(parameters);
        },
    }); 
```

我得到了这个：

```
XMLHttpRequest
success
[
Object
, 
Object
, 
Object
, 
Object
, 
Object
, 
Object
, 
Object
, 
Object
, 
Object
, 
Object
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:40:45.607

在 jQuery-1.7.2.js 中，从加载动态 jsonp 请求脚本（大约 8123 行）到从服务器接收到响应并调用安装在 8016 行的回调时，存在一个灰色区域。看起来这个回调，即使在窗口对象的全局范围内定义，在某些情况下也不存在。此窗口对象下的子元素布局确实与它有关，因为通过单击直接放置在 ASP.NET 剃须刀局部视图上的复选框来调用 ajax 有效，但是当从 OpenLayers.Popup.FrameCloud 中的按钮调用时，您会遇到这个问题。

一种解决方法是防止 jQuery 将随机函数定义为 jsonp 回调，如下所示：

```
$.ajax({
        type: 'GET',
        url: "http://open.mapquestapi.com/nominatim/v1/search?format=json&viewbox=-122%2C46%2C-73%2C40&countrycodes=ca&bounded=1&addressdetails=0&q=[hotel]&json_callback=onSearchComplete",
        dataType: 'jsonp',
        jsonp: false,
        error: function(parameters) {
            alert(parameters);
        }
    }); 
```

在这种情况下，“onSearchComplete”是脚本中定义的全局函数。使用此设置，无论如何调用 ajax 查询，将始终在成功的服务器响应时调用 onSearchComplete。这种情况下的问题是 jQuery 仍然创建和安装随机命名的回调函数，即使它没有作为 json 请求的一部分发送。结果，随机生成的回调将永远不会被执行，并导致 jQuery 将其视为错误条件。

也许 jQuery 大师可以在这里提供更多的信息。

# android - 在我的布局中添加“部分分隔符”？

> ID：10255676
> 
> 赞同：17
> 
> 时间：2012-04-21T02:28:10.607
> 
> 标签：android, android-layout

[Android 设计 - 列表](http://developer.android.com/design/building-blocks/lists.html)页面描述了“部分分隔符”。我知道您可以使用`addHeaderView()`a`ListView`来获得类似的效果。我想使用没有 的“部分分隔符” `ListView`，而是使用`LinearLayout`.

在下面的屏幕截图中，我指的是蓝色文本“电话”和“电子邮件”，它们下方也有一行。截图来自[Android Design - Text Fields](http://developer.android.com/design/building-blocks/text-fields.html)

![在此处输入图像描述](../Images/9ab22b99ac97cab18e693036f63fa22b.png)

如何将它添加到我的布局中？它只是一个 TextView 加上一条水平线？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-13T13:27:13.680

我正在寻找同样的问题。我找到了一种简单的方法来告诉应用程序 texview 是一个部分分隔符：

```
<TextView
    android:id="@+id/address_label"
    style="?android:attr/listSeparatorTextViewStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Address"/> 
```

该行：

```
style="?android:attr/listSeparatorTextViewStyle" 
```

为文本添加下划线并根据默认的“分隔符”主题对其进行样式设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T03:18:56.143

尝试将此视图放在“电话”的 TextView 之后。在这个视图中，我添加了一种背景颜色，您可以根据需要更改它。祝你好运。

```
<View
    android:layout_width="match_parent"
    android:layout_height="2dip"
    android:background="#FF909090" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T21:15:43.430

该解决方案最终具有一个可包含的布局，称为`util_horizontal_line_section.xml`：

```
<?xml version="1.0" encoding="utf-8"?>

<View
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="1dip"
    android:background="@color/sectionSeparatorColour"/> 
```

`sectionSeparatorColour`输入`values/colors.xml`：_

```
<color name="sectionSeparatorColour">#a0a0a0</color> 
```

包括通过：

```
<include layout="@layout/util_horizontal_line_section"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T07:36:31.287

应这个问题的提问者的要求，我正在写我的评论作为答案

> 在底部创建一个带有线条的背景图像，并将其设置为 TextView 的背景。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-21T03:07:05.863

TextView 2dp in height and width = match parent 并将背景颜色设置为您希望线条的颜色。

您也可以通过颠倒这两个设置来进行垂直操作。

# javascript - Javascript While循环整数

> ID：10255680
> 
> 赞同：0
> 
> 时间：2012-04-21T02:29:37.590
> 
> 标签：javascript

我必须创建一个 while 循环，显示 1-20 的整数，但每行只有 5 个整数。我无法得到每行部分的 5 个整数。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:32:08.857

检查它是否是 5 的倍数之后的下一个项目，以及当前项目是否不是第一个项目。如果是，也打印一个换行符。例如：

```
for(var i = 1; i <= 20; i++) {
     print(i); // Or however you're outputting it

     if(i % 5 === 1 && i > 1) {
         print('\n');
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:31:26.783

你可以做...

```
if ( ! (i % 5)) {
    // Create new line.
} 
```

[js小提琴](http://jsfiddle.net/vwy4h/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:29:59.243

这是一个构建字符串并显示带有结果的警报框的解决方案。

```
var i = 0, result = "";

while (i++ < 20) {
    result += i + " ";

    // check to see if we're at 5/10/15/20 to add a new-line
    if (i % 5 === 0) {
        result += "\n";
    }
}

alert(result); 
```

jsFiddle 测试：http: [//jsfiddle.net/willslab/KUVkX/3/](http://jsfiddle.net/willslab/KUVkX/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T03:07:47.657

在以前的答案中看不到`while`循环=）

```
function generateLine(start, nElements, separator) {
  var i = start;
  var range = [];
  while (range.length < nElements) range.push(i++);
  return range.join(separator) + '\n';
}

function generate(start, end, elementsInLine, inlineSeparator) {
  var lines = [];
  while (start < end) {
    lines.push( generateLine(start, elementsInLine, inlineSeparator));
    start += elementsInLine;
  }

  return lines.join('');
}

console.log( generate(1, 20, 5, ' ') ); 
```

# android - 如何使文本视图滑出屏幕？

> ID：10255681
> 
> 赞同：0
> 
> 时间：2012-04-21T02:29:47.043
> 
> 标签：android, android-layout, slide

刚学安卓一周。我想问一下文本视图是否可以滑入和滑出屏幕手册。这是我的xml代码

```
<TextView
        android:id="@+id/streetName"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:layout_alignLeft="@+id/relativeLayout2"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="#A0000000"
        android:gravity="center_horizontal"
        android:text="Duong Quang Trung"
        android:textColorHighlight="@android:color/secondary_text_light"
        android:textSize="15sp" /> 
```

它看起来像这样

![http://i.stack.imgur.com/LecsX.jpg](../Images/2a02f5c7829d9273dd6065c7f41c889f.png)

我希望它消失，它只会在我触摸屏幕时出现（滑入）。我是怎么做到的？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:36:30.930

你必须在 android 中使用 swipe 事件。访问以下事件： http: [//developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html) 使用 android 中的一些滑动示例。

# asp.net - ASP.MVC3：调试时有3个MvcApplication实例吗？

> ID：10255683
> 
> 赞同：1
> 
> 时间：2012-04-21T02:30:05.410
> 
> 标签：asp.net, asp.net-mvc-3

MvcApplication 是 MVC 3 Web 应用程序中的单例吗？为什么我找到了 3 个实例？

我的步骤：（VS2010 SP1 + ASP.NET MVC 3 工具更新）

1.  创建一个默认的 Internet MVC 3 应用程序（带有帐户示例）
2.  在 global.asax 中添加 MvcApplication() 构造函数，并在其中设置断点
3.  按 F5 调试

我发现构造函数被调用了 3 次！

此致，

扎克@Shine

===编辑===

更正：

为 1 个 Web 应用找到 2 个实例，而不是 3 个。经过仔细检查，我发现我的解决方案包含 2 个 Web 应用程序，删除其中一个后，我可以找到左侧应用程序的 2 个实例。

这是日志（数字是 MvcApplication 实例的哈希码）

```
MvcApplication(): 41516761
Application_Start(): 41516761
 MvcApplication(): 56552081
 Application_AuthenticateRequest(): 56552081
 Application_AuthenticateRequest(): 56552081
 Application_AuthenticateRequest(): 56552081
 MvcApplication_Disposed(): 56552081
Application_End(): 41516761 
```

如图所示，一个实例用于处理开始、结束事件，另一个用于处理请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:50:27.870

MvcApplication 从下面的普通 asp.net 继承自 HttpApplication 是了解 asp.net 管道的一个很好的链接。我已经从文章中复制了相关部分。

简而言之 - 没有 MvcApplication 不是单例的，但每个请求只存在一个。

[http://www.west-wind.com/presentations/howaspnetworks/howaspnetworks.asp](http://www.west-wind.com/presentations/howaspnetworks/howaspnetworks.asp)

> 每个请求都被路由到一个 HttpApplication 对象。HttpApplicationFactory 类根据应用程序的负载为您的 ASP.NET 应用程序创建一个 HttpApplication 对象池，并为每个传入请求分发引用。池的大小受限于 machine.config 的 ProcessModel Key 中 MaxWorkerThreads 设置的设置，默认为 20。但池以较小的数字开始；通常是一个，然后随着需要处理多个同时请求而增长。池受到监控，因此在负载下它可能会增长到其最大实例数，然后随着负载下降，该实例数会缩小到较小的数量。HttpApplication 是特定 Web 应用程序的外部容器，它映射到 Global.asax 中定义的类。它是您在应用程序中经常看到的 HTTP 运行时的第一个入口点。如果您查看 Global.asax（或类背后的代码），您会发现该类直接派生自 HttpApplication：

# jquery - 如何使用 Colorbox 过滤画廊？

> ID：10255689
> 
> 赞同：0
> 
> 时间：2012-04-21T02:30:57.847
> 
> 标签：jquery, filter, colorbox, quicksand

我已经完成了建议的“类似问题”，但我没有看到任何我认为相关的内容。

我正在使用 Colorbox 为我的在线作品集提供动力。我想添加一个过滤器（品牌、网络、印刷等）。我发现[这](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-filterable-portfolio-with-jquery/)与流沙相结合会是一个可爱的效果，但它通过类利用列表和我的画廊功能。有没有办法让这些功能共存？

网站：[ephelan.com](http://ephelan.com/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:38:04.330

你看过使用 ColorBox 的**rel**元素吗？从插件的文档中：

> 这可以用作 ColorBox 的锚 rel 替代品。这允许用户将任何元素组合组合在一起以用于图库，或者覆盖现有的 rel 以便元素不组合在一起。

```
$("a.gallery").colorbox({rel:"group1"}); 
```

请注意，这不完全是过滤器，而是一种分组方法，因此您需要单独的链接来触发各种集合的插件。

另外 - 不相关 -对我来说， *portfolio.html*页面从页脚向下突出）我刚刚在 Ubuntu 12 上使用 Chromium）它是 Design Culture Now 元素。如果你需要截图，请告诉我。

KJM

# google-app-engine - App Engine - BlobStore- 如何按键引用 blob？

> ID：10255690
> 
> 赞同：0
> 
> 时间：2012-04-21T02:31:12.137
> 
> 标签：google-app-engine, servlets, blobstore

我正在编写一个servlet，它将通过引用blobkey 从blobstore 中获取一个blob。我在网上查了，但没有找到任何好的例子。谷歌网站有以下示例：

```
BlobKey key = new BlobKey(blobkey);
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
blobstoreService.serve(key, resp); 
```

因此客户端知道 blobkey 并将其发送到 servlet。servlet 应使用密钥将 blob 从 blobstore 中取出并在响应中将其发回。

有什么建议么？请在java中。

谢谢莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:55:05.967

如果您尝试将 blob 的内容读入您的应用程序并对其进行处理，您应该查看[BlobstoreInputStream](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreInputStream)。代码看起来像：

```
BlobKey key = new BlobKey(blobkey);
InputStream is = new BlobInputStream(key); 
```

您现在可以`read()`使用`InputStream`.

# c# - 无法使用 SslStream 将 SHA1WithRSA 证书传递给浏览器

> ID：10255693
> 
> 赞同：1
> 
> 时间：2012-04-21T02:32:06.423
> 
> 标签：c#, ssl, https, bouncycastle

我目前正在构建一个支持 HTTPS 的 C# 中间代理服务器，并且我正在以一种有点讨厌的方式重新绑定证书，但这是我这个项目所需要的。

我正在使用 BouncyCastle 生成 CA 证书和适用于 HTTP 的证书，并且我注意到它`SslStream`不会接受任何不是的证书签名算法，`MD5WithRSA`这意味着 Google Chrome 和 Firefox 将简单地拒绝打开页面，因为它期望`SHA1WithRSA`它的签名算法。

我用来生成 SSL 流并对其进行身份验证的完整代码块位于[http://cdn.afterlifelochie.rocket-it.com.au/temp/proxy-https.c-sharp.txt](http://cdn.afterlifelochie.rocket-it.com.au/temp/proxy-https.c-sharp.txt)，但这是简短的返回错误的代码段。

```
sslStream.AuthenticateAsServer(
    cert, false, SslProtocols.Default | SslProtocols.Tls | 
        SslProtocols.Ssl3 | SslProtocols.Ssl2,  false); 
```

链内带有CA的签名HTTPS证书在哪里`cert`，包括CA私钥和HTTPS私钥，返回此错误：

```
SSL-Exception: A call to SSPI failed, see inner exception.
   at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken messag
e, AsyncProtocolRequest asyncRequest, Exception exception)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToke
n message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, A
syncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 coun
t, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes
, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocol
Request asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToke
n message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, A
syncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 coun
t, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes
, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocol
Request asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToke
n message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, A
syncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 coun
t, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes
, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocol
Request asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToke
n message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, A
syncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 coun
t, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes
, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocol
Request asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byt
e[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyRes
ult)
   at System.Net.Security.SslStream.AuthenticateAsServer(X509Certificate serverC
ertificate, Boolean clientCertificateRequired, SslProtocols enabledSslProtocols,
 Boolean checkCertificateRevocation)
   at HTTPProxyServer.ProxyServer.DoHttpProcessing(TcpClient client) in C:\Users
\AfterLifeLochie\Desktop\C#Proxy\ProxyServer.cs:line 324

SSL-Inner-Exception: The specified data could not be decrypted 
```

但是，如果我将第 76 行的参数更改`SetSignatureAlgorithm(String Method)`为`MD5withRSA`from `SHA1WithRSA`，一切正常，所有数据都正确传输（除了 Google Chrome 的过度安全偏执的“您无法继续”消息）。

这是`SslStream`证书链、我的身份验证方式还是我忽略的其他问题？

**更新 1：**我从我的 Windows 2008R2 Active Directory 证书服务器实例中获取了证书和 CA 证书。显然使用该证书工作正常，所以我不确定我做错了什么。我假设这与将证书链接在一起、物理生成有关，或者我缺少重要的主题、用法或扩展/增强用法之一。

**更新 2：**我意识到每次软件生成新密钥时 CA 证书都会发生变化；这已被更改并锁定，我可以看到指纹和数据没有改变。仍然得到`SSL-Inner-Exception: The specified data could not be decrypted`虽然。

# java - Java 服务器 Socket，从 DataInputStream 读取内容

> ID：10255694
> 
> 赞同：0
> 
> 时间：2012-04-21T02:32:08.137
> 
> 标签：java, vb.net, sockets

所以我已经建立了一个基本的客户端/服务器连接，我试图在连接时互相发送一条消息，我让客户端从服务器接收消息，但服务器没有收到客户端消息。这是我当前用于从客户端读取发送数据的代码：

```
ServerThread.socket = new ServerSocket(5556);
Socket client = ServerThread.socket.accept();
DataInputStream in = new DataInputStream
    (
        new BufferedInputStream(client.getInputStream())
    );
String s = in.readUTF();
System.out.println("Client: " + s); 
```

使用它不会打印出任何东西，甚至不仅仅是“客户：”

这是我的客户端连接和发送消息的代码。注意：我在 VB 中编写了这部分：

```
client = New TcpClient()
client.Connect("myiphere", 5556)
Dim stream As NetworkStream = client.GetStream()
Dim sendBytes As [Byte]() = Encoding.ASCII.GetBytes("Hello server")
stream.Write(sendBytes, 0, sendBytes.Length) 
```

没有收到数据有什么原因吗？或者为什么会延迟？我尝试用 try catch 块包围代码的 Java 部分，但没有发出错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:56:00.033

正如 MaybeWeCouldStealAVan 指出的那样，`readUTF`需要两个字节来指示还有多少字节的内容。有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readUTF](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readUTF) ()。

但是，他/她使用的解决方案`InputStreamReader`不起作用，因为`InputStreamReader`需要 UTF-16 输入（每个字符两个字节），但您的 VB 客户端正在发送 ascii. 如果可以的话，我建议让您的 VB 客户端发送 UTF-16（然后使用 MaybeWeCouldStealAVan 的 java 代码）。如果你不能这样做（抱歉，我不知道 VB 允许什么编码），那么只需编写额外的两个字节即可`readUTF`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:08:10.853

DataInputStream 中的 UTF*前面*带有 0 和长度。

~~我对VB的操作不多，所以不知道是否还有其他错误，但试试：~~

 ~~```
stream.Write(0, sendBytes.Length, sendBytes) 
```~~  ~~我不应该建议用我不知道的语言编写代码。如果要使用 readUTF 读取它，则必须先发送一个`0`字节和一个等于字符串长度的字节，然后再发送文本字节。

编辑：不过，您可能根本不想使用 DataInputStream。它用于存储二进制流。如果您正在接收文本，请在 Java 端尝试此操作：

```
BufferedReader in = new BufferedReader(
    new InputStreamReader(
        client.getInputStream()
    )
);
String s = in.readLine(); 
```

如果您不发送文本，只需像您一样创建一个 BufferedInputStream 并从中读取字节。~~

# php - SQL：where 子句的不同结果列

> ID：10255699
> 
> 赞同：-2
> 
> 时间：2012-04-21T02:33:15.033
> 
> 标签：php, mysql, sql

我正在尝试执行 MySQL 查询，该查询会为每个 WHERE 子句生成不同的列。就像他们的别名。假设我有一个表，其中包含一列和一些任意数据，例如字符串。

```
Id | Column1
0  | mango
1  | porcupine 
2  | bear
... 
```

我需要一个产生类似的查询：

```
 animals  | fruits
------------------------
0| porcupine | 
1| bear      | mango 
```

如果有可能的话。我试过加入子查询，或者联合它们，但这只是覆盖了结果，这不好..

我将在 PHP 中使用它，并检查是否设置了别名列，以便我可以识别该行。例如

```
if( isset($results[$i]["animals"]) ) echo "hey it's an animal, not an apple, feed it!"; 
```

编辑： ...我想要一个将动物和水果放入结果中不同列的查询。我试过这个：

```
SELECT * FROM ( 
 SELECT * FROM table 
  WHERE Column1 = 'porcupine' ) as porcupines
 JOIN (
 SELECT * FROM table 
  WHERE Column1 = 'mango' ) as fruits 
```

但这不是我要找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:10:25.663

在表上创建另一列 ( **Column2** ) 以确定**第 1 列**是水果还是动物，然后创建查询：

```
SELECT id, column1 AS [Animal] FROM TABLE
WHERE Column2 = "Animal"
UNION
SELECT ID, column1 AS [Fruit] FROM TABLE
WHERE Column2 = "Fruit" 
```

# javascript - 从 PHP 返回 json 编码并添加到变量

> ID：10255700
> 
> 赞同：-2
> 
> 时间：2012-04-21T02:33:28.763
> 
> 标签：javascript, ajax

我有一个要添加到现有列表中的对象列表。

我目前拥有的数据是：

```
var sdata = {"10":{"8":["106","22","1","1","0","0"]}}; 
```

所以我做了一个这样的ajax请求：

```
var result = ajaxFunction('call.php',hid+','+ps[0]+','+ps[1]);
if(result != false){
document.write(result);
sdata += result; //add to it
} 
```

返回并分配给结果的数据是：

```
{2: {7:[119, 22, 1, 1, 0, 0]}} 
```

但我想知道的是：

```
sdata += result; 
```

将新数据添加到“sdata”的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:35:58.280

`+=`用于加法或字符串连接，而不是连接两个对象。为了得到`sdata`和`result`在一起，你循环遍历`result`每个键，你创建一个同名的键`sdata`来指向`result`. 这是一个更清晰的解释，因为 JavaScript 对象不会从一个复制到另一个，它们只是指向。

下面的代码只是一个“浅拷贝”，它只复制第一级的值。它还会覆盖第一个对象中的任何内容。您可以添加条件以防止覆盖。

```
for(var key in result){              //loop through new results
    if(result.hasOwnProperty(key){   //if it's an end property, not from prototype
        sdata[key] = result[key]     //put new key to old oject pointing to new set of values
    }
} 
```

最终结果是这样的：

```
sdata = {
    "10" : {"8":["106","22","1","1","0","0"]},
    "2" : {7:[119, 22, 1, 1, 0, 0]}
} 
```

# emulation - 如何模拟我的网站？

> ID：10255702
> 
> 赞同：1
> 
> 时间：2012-04-21T02:34:12.170
> 
> 标签：emulation

[由于大量问题](http://bigassmessage.com/abaec)，我有一个在 IE8 中无法运行的网站。

显然，有些人不明白。我的网站不可能在 IE8 中本地运行。

# 我的游戏永远无法在 IE 8 中原生运行。

作为一种解决方法，我想在其上放置一个模拟浏览器的 Java 小程序。这样，人们（25.8% 的人）可以通过小程序在 IE8 中查看我的网站。

基本上，它可以像[http://www.opera.com/developer/tools/mini/](http://www.opera.com/developer/tools/mini/)上的模拟器一样工作——除了 Opera Mini。

因此：我可以在我的网站上放置任何模拟器来模拟其他浏览器吗？它们可以是 JS/HTML5、Java、Flash 等等。

{Opera Mini 不适用于我的网站 - 所以不幸的是，这个来自 Opera 的完美示例不起作用，但 Big 5 的任何当前版本（IE、Chrome、FF、Opera、Safari）都可以在我的网站上使用完美无瑕。}

# prolog - 如何在序言中轮换列表？

> ID：10255703
> 
> 赞同：3
> 
> 时间：2012-04-21T02:34:35.377
> 
> 标签：prolog

我是序言编程的新手，我可以问一些简单的问题。

我想在序言中将列表向左旋转，如下所示：

```
rotatelist([1,2,3,4],R)   
R=[2,3,4,1] 
```

我尝试了以下代码：

```
rotatelist([],[]).   
rotatelist([H1|T1],[H2|T2]) :- rotatelist(H1,T2). 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T15:01:24.713

为什么要使用递归..这不只是将头部移动到尾部的情况吗？

```
rotatelist([H|T], R) :- append(T, [H], R). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:38:59.403

这样的事情应该可以解决问题：

```
rotatelist(List, R):- rotatelist(List, R1, H), R = [H|R1].
rotatelist([H], [], H).
rotatelist([H|T], L, R) :- rotatelist(T, T1, R), L = [H|T1]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:03:43.437

```
旋转列表（[H|T]，R）：- 附加（T，[H]，R1），rotatelist_2（R1，R）。
旋转列表_2（R，R）。
旋转列表_2（R1，R）：-旋转列表（R1，R）。

```

# objective-c - 制作一个不可变的类：我做错了什么？

> ID：10255712
> 
> 赞同：0
> 
> 时间：2012-04-21T02:37:15.473
> 
> 标签：objective-c

我正在尝试创建一个不可变的类。无需再费周折：

```
#import "MatrixRow2.h"

@implementation MatrixRow2

@synthesize rows;

-(MatrixRow2*) initWithFractionNumberArray:(NSArray*)array
{
    if (self = [super init]) {
        rows = array;
    }

    return self;
}

-(MatrixRow2*) rowByMultiplyingByFractionNumber:(FractionNumber*)number
{
    NSArray *temp = rows.copy;
    MatrixRow2 *newRow = [[MatrixRow2 alloc] initWithFractionNumberArray:temp];

    for (int i=0; i < newRow.rows.count; i++) {
        [[newRow.rows objectAtIndex:i] multiplyByFraction:number];
    }

    return newRow;
}

-(NSString*) description
{
    return [rows description];
}

@end 
```

和测试仪代码：

```
MatrixRow2 *r = [[MatrixRow2 alloc] initWithFractionNumberArray:tempRow];

NSLog(@"Initial row values: %@", r);

FractionNumber *randomMultiplier = [FractionNumber fractionFromRandomFractionWithMaxNumerator:100 maxDenominator:99 integerChanceIn10:8];

MatrixRow2 *r2= [r rowByMultiplyingByFractionNumber:randomMultiplier];

NSLog(@"%@ * %@ = %@", r, randomMultiplier, r2); 
```

输出是：

```
2012-04-20 22:33:29.081 RREF[3586:f803] Initial row values: (
    70,
    94,
    98,
    90
)
2012-04-20 22:33:29.083 RREF[3586:f803] (
    770,
    1034,
    1078,
    990
) * 11 = (
    770,
    1034,
    1078,
    990
) 
```

在第二个输出行中，r 的值已更改为相乘后的值。它应该是：

```
[70 94 98, 90] * 11 = [770 1034 1078 990] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:47:22.370

你正在做一个数组的浅拷贝。您需要先复制数组中的每个项目，然后再对其进行变异。

这将涉及创建每个项目的副本并将其添加到新数组（或使用每个项目的副本更新复制数组中的项目）。

与不可变对象一起使用的所有内容都需要在变异之前是不可变的或复制的。

# ruby-on-rails - Rails 3.1 + Heroku：有人可以帮我破译这个 Heroku 日志吗？

> ID：10255713
> 
> 赞同：2
> 
> 时间：2012-04-21T02:37:33.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, heroku

我遇到了这个间歇性问题，我的客户端从（我认为）向 Heroku 上的 Rails 服务器的单个 HTTP 请求接收到多个 JSON 响应。这是显示问题的 Heroku 日志...

```
2012-04-20T00:22:27+00:00 app[web.1]: Started POST "/games/2/call" for 76.171.181.11 at 2012-04-19 17:22:27 -0700
2012-04-20T00:22:27+00:00 app[web.1]:   Processing by GamesController#call as */*
2012-04-20T00:22:27+00:00 app[web.1]:   Parameters: {"fb_id"=>"0", "id"=>"2"}
2012-04-20T00:22:27+00:00 app[web.1]: Completed 200 OK in 163ms (Views: 0.3ms | ActiveRecord: 93.3ms)
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4594ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 app[web.1]: cache: [POST /games/2/call] invalidate, pass
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4546ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4594ms status=200 bytes=2012
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4570ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4560ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4534ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[nginx]: 76.171.181.11 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 560 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 76.171.181.11 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 560 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 76.171.181.11 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 539 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 207.151.231.155 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 207.151.231.155 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 207.151.32.38 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 108.70.74.121 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" 
```

我是 Rails 和 Heroku 的新手，所以我不能完全理解这个日志来弄清楚发生了什么。Heroku 上的 Rails 应用程序是从我的客户端接收多个 HTTP 请求，还是只接收一个 HTTP 请求并返回多个 JSON 响应？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:29:27.210

它同时收到 7 个 POST 请求：

```
# First Request, heroku starts to process it normally
2012-04-20T00:22:27+00:00 app[web.1]: Started POST "/games/2/call" for 76.171.181.11 at 2012-04-19 17:22:27 -0700
2012-04-20T00:22:27+00:00 app[web.1]:   Processing by GamesController#call as */*
2012-04-20T00:22:27+00:00 app[web.1]:   Parameters: {"fb_id"=>"0", "id"=>"2"}

# First request returns OK
2012-04-20T00:22:27+00:00 app[web.1]: Completed 200 OK in 163ms (Views: 0.3ms | ActiveRecord: 93.3ms)

# Second request starts
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4594ms status=200 bytes=2013

# It looks like the second request fails
2012-04-20T00:22:27+00:00 app[web.1]: cache: [POST /games/2/call] invalidate, pass

# Request 3-7 come in
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4546ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4594ms status=200 bytes=2012
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4570ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4560ms status=200 bytes=2013
2012-04-20T00:22:27+00:00 heroku[router]: POST myapp.heroku.com/games/2/call dyno=web.1 queue=0 wait=0ms service=4534ms status=200 bytes=2013

# Heroku responds to the requests... though I'm  not sure what it's serving up.
2012-04-20T00:22:27+00:00 heroku[nginx]: 76.171.181.11 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 560 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 76.171.181.11 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 560 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 76.171.181.11 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 539 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 207.151.231.155 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 207.151.231.155 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 207.151.32.38 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19" myapp.heroku.com
2012-04-20T00:22:27+00:00 heroku[nginx]: 108.70.74.121 - - [20/Apr/2012:00:22:27 +0000] "POST /games/2/call HTTP/1.1" 200 540 "http://myapp.heroku.com/pages/fb/webplayer_64.unity3d" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19" 
```

我偶尔会遇到这样的问题——当我只想让它们触发一次时，Javascript 请求会冒泡 DOM 并触发多次。这可能会很快使服务器崩溃，因此您绝对应该查看您的应用程序并确保您没有快速触发 AJAX 调用。

一个非常简单的方法是`alert()`在任何 ajax 调用之前或之后立即放置一个，看看它触发了多少次与您期望它触发多少次。

我不知道这是不是你的问题，但我以前也遇到过这样的事情。

# c# - 在 C# 中声明引用库的优点？

> ID：10255718
> 
> 赞同：1
> 
> 时间：2012-04-21T02:39:39.163
> 
> 标签：c#

我注意到在很多 C# 程序中，人们习惯于放置大量的东西，例如：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Diagnostics;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;
using System.Drawing.Text;
using System.Windows.Forms;
using System.IO;
using System.Xml.Linq;
using System.Xml.XPath;
using System.Net;
using System.Web; 
```

做这样的事情有什么好处？我的意思是我知道它可以让你简写一些函数，所以我可以只输入“XElement.Parse()”而不是“System.Xml.XPath.XElement.Parse()”。但是还有什么其他的优势呢？除了短手，真的有什么优势吗？

有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:46:01.403

除了使代码更具可读性之外，我唯一能想到的是：

```
using Num = System.Numerics.BigInteger; 
```

为不同命名空间中的特定类提供短名称和自定义名称。还可能有助于避免在不同名称空间中具有相同名称的类之间的混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T02:43:44.867

正如您提到的，这实际上只是“速记”。你给的例子：

```
System.Xml.XPath.XElement 
```

很好地证明了这一点。您正在寻找与`XElement`. 就这样。完全合格的参考的其余部分只是噪音。没有理由在整个代码中一遍又一遍地编写它。

它只是编写更清晰、更简洁和更具表现力的代码的一种措施，它专注于逻辑的有意义的部分，而不是编译器的结构脚手架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T02:40:32.997

命名空间的想法是限定类型，这提供了一种方便的方法。将您的 usings 包含在文件顶部的一个优点是简写，通常可以转化为更具可读性的代码。但缺点是，如果两个命名空间中的类型发生冲突，您最终可能会遇到命名空间冲突。在这种情况下，您可以查看创建别名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T02:45:42.663

using 语句提供了关于此代码正在使用什么以及提供对命名空间成员的速记访问的潜行峰值。通常，当我查看一个新文件时，我会根据包含的内容将某些 API 排队到速记内存中。*（在与草率的程序员打交道时，这并不总是有效。）*

# php - 使用 simplexml，我如何检索兄弟姐妹？

> ID：10255721
> 
> 赞同：0
> 
> 时间：2012-04-21T02:41:05.893
> 
> 标签：php, xml, simplexml

```
<root>
<pages>
<page>
    <title>Home</title>
    <content>Lorem Ipsum</content>
</page>
</pages>
</root> 
```

假设我有一个包含“Home”的变量，我想获取`<content>`兄弟节点中的内容，例如：`"Get -content- Where -title- = VARIABLE"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T02:44:07.943

```
foreach ($xml->pages->page as $page) {
    if ((string) $page->title == 'Home') {
        return (string) $page->content;
    }
} 
```

# php - 不正确的整数（2147483647）被插入到 MySQL 中？

> ID：10255724
> 
> 赞同：47
> 
> 时间：2012-04-21T02:42:54.050
> 
> 标签：php, mysql, insert, steam-web-api

好的，所以我一直在玩弄 Steam Web API，我将其中一个值存储在一个名为`$steam64`. 当我使用此代码剪辑器将其插入到 mysql 数据库中时，它会插入一个与存储在变量中的整数完全不同的整数。

`$sql_query = "INSERT INTO users_info (steam64) VALUES ('$steam64')";`

`var_dump($steam64);`返回真正的 int，回显它也是如此。不太清楚这里发生了什么，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-07-22T08:49:50.107

2147483647 是 mysql 的最大 int 值。只需将类型从 int 更改为 bigint。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-21T02:52:45.440

基于您对“价值被倾销”的评论；您尝试插入的数字对于 32 位系统来说太大了。32 位的最大值为**4,294,967,295**，64 位的最大值为**18,446,744,073,709,551,615**。我建议将您的列转换为`varchar(100)`哈希而不是 int，或者切换到 64 位系统。关于最大整数的**好文章**[在这里](http://laughingmeme.org/2010/01/24/4294967295-and-mysql-int20-syntax-blows/)和[这里](http://rpbouman.blogspot.com/2010/05/mysql-maximum-value-of-integer.html)。

* * *

此外，在我被激怒之前，请务必阅读[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)，以防您不清理直接发布到 sql 语句中的变量。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-08-03T19:10:09.927

当我在玩 SQL 和 MySQL 时，MySQL int 数据类型有同样的问题。将数据类型从**int**修改为**bigint**已修复问题。

[MySQL 整数类型 http://dev.mysql.com/doc/refman/5.7/en/integer-types.html](http://dev.mysql.com/doc/refman/5.7/en/integer-types.html)

```
ALTER TABLE tablename MODIFY columnname BIGINT; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-03-29T04:54:31.853

只需将数据类型从 INT 更改为 BIGINT

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-30T02:13:15.160

数据类型 INT 的最大值为 2147483647。如果您插入的数字大于 2147483647，则会导致问题。对于解决方案，将数据类型从 INT 更改为 BIGINT，因为 BIGINT 的最大值为 9223372036854775807，它可能会解决您的问题。看看这个网站： [https ://dev.mysql.com/doc/refman/5.7/en/integer-types.html](https://dev.mysql.com/doc/refman/5.7/en/integer-types.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-25T18:57:24.420

整数类型**INT**是 4Bytes 存储，你从`-2^(4*8-1)=-2147483648`to得到`2^(4*8-1)-1=2147483647`，当你有“**签名**”标志时，如果你将标志更改为**无符号**你将有一个范围 from `0`to `2^(4*8)-1`。MySQL 支持 BIGINT 为 8Bytes 存储。如果您尝试保存更大的值，您将保存范围的最大值

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-04T13:10:07.147

转到操作-> 表选项-> 将增量值更改为最小值或您想要增加的任何值..

自动增量的最大问题是如果它的值非常大，那么它会错误地从最后一个条目开始，然后在插入值中开始问题......使用我们预定义的数据类型
[![在此处输入图像描述](../Images/2273e8002d43a4f23f163caec69e37ab.png)](https://i.stack.imgur.com/9Xgbw.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-06T23:54:43.940

同意将数据类型从 INTEGER 更改为 BIGINT。目前正在使用 node.js/sequelize 构建一个 Web 应用程序，以下重构解决了从 react-redux 表单操作到“2147483647”的电话号码帖子：

```
clientPhone: {
    type: DataTypes.BIGINT,
    allowNull: true
}, 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2013-08-10T06:55:48.763

```
CREATE TABLE `dvouchers` (
  `2147483647` int(3) NOT NULL auto_increment,
  `code` varchar(12) NOT NULL default '1',
  `type` char(1) NOT NULL default '$',
  `count` int(3) unsigned NOT NULL default '0',
  `amount` int(3) unsigned default '0',
  `notes` text,
  `expiryDate` date default NULL,
  `fkUserAdminId` int(11) NOT NULL default '0',
  PRIMARY KEY  (`2147483647`),
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2016-02-19T16:58:56.563

最简单的方法是将 MySQL 的“int”更改为“varchar”。

# css - 在其他浏览器中调用 -ms-touch-action 是什么？

> ID：10255727
> 
> 赞同：10
> 
> 时间：2012-04-21T02:44:17.253
> 
> 标签：css, pointer-events

[`-ms-touch-action`](http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx)其他浏览器的等价物是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-25T08:30:23.760

现在有一个非前缀`touch-action`属性，在[W3C Pointer Events Candidate recomendation](http://www.w3.org/TR/pointerevents/)中提出。

从[链接到 OP 的 MSDN 文档中](http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx)：

> 从 Internet Explorer 11 开始，此事件 ( `-ms-touch-action`) 的 Microsoft 供应商前缀版本不再受支持，并且可能在未来的版本中被删除。相反，使用不带前缀的名称`touch-action`，这对于标准合规性和未来兼容性更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T03:28:27.930

没有一个。它[是](http://msdn.microsoft.com/en-us/library/windows/apps/hh453816.aspx)IE10 支持自定义多点触控交互或手势功能的一部分。

看看这个已实现的前缀 CSS 属性的[概述](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)，以及它们在其他 Web 浏览器引擎中的对应物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-17T15:50:03.193

Chrome 正在 Chrome 35（现在处于测试阶段）中提供触摸动作支持：http: [//blog.chromium.org/2014/04/chrome-35-beta-more-developer-control.html](http://blog.chromium.org/2014/04/chrome-35-beta-more-developer-control.html)

# java - Java中是否有一种快速失败的同步方式？

> ID：10255732
> 
> 赞同：4
> 
> 时间：2012-04-21T02:46:07.750
> 
> 标签：java, concurrency

假设我有一个这样的代码片段

```
synchronized(obj) {
    do something;
} 
```

如果`obj`已经被其他线程锁定，则此代码将等待直到`obj`释放，然后它会尝试获取锁定。

但是我想知道如果不能立即获得锁，是否有任何方法可以跳过代码块？

或者换一种说法，有没有办法检测一个对象是否已经被锁定？

更新：</p>

感谢您提到`Lock`接口，但这要求程序遵守相同的约定，即它们都引用`Lock`对象而不是`synchronized`关键字。

我想知道是否有一种检查锁定状态的内置方法？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-21T02:54:04.327

> Java中是否有一种快速失败的同步方式？

我认为使用“快速失败”来描述您在这里尝试做的事情是一个糟糕的术语选择。快速失败意味着不立即获取锁是失败或应用程序错误；cf 快速失败迭代器会抛出未经检查的 CCME。这不是一般的锁提供的语义模型，或者特别是这里。更好的术语是“非阻塞”

此外，由于无法获取锁而*静默跳过代码块是一种**有用*的行为，这一点也不清楚。在大多数情况下，应用程序需要知道已采用“跳过”路径。

撇开这些点不谈，你不能使用原始对象锁来做到这一点。

^(（好的，在某些 JVM 上您可能可以使用它`sun.misc.Unsafe`来执行此操作，但这是一个非常糟糕的主意。您可能会发现您的编译器、类加载器或安全沙箱会阻止您使用`Unsafe`API ......因为它应该这样做。此外，这个 API 并不是无缘无故被称为“不安全”的！）)

该[`java.util.concurrent.locks.Lock`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)API 有一个方法允许您尝试在不阻塞的情况下获得锁。具体来说，该`tryLock()`方法尝试获取锁并`false`在锁正在使用时立即返回。

还有其他更高级别的并发类可以用作 ersatz 锁；例如`Semaphore`。

* * *

> 或者换一种说法，有没有办法检测一个对象是否已经被锁定？

实际上，这有点不同……而且也不完全有用。当然，您可以（假设地）测试是否持有锁。（确实有些`Lock`类明确支持这一点。）但这并不意味着您可以保证能够在不阻塞的情况下获取锁。如果您做出该（不正确的）假设，则您已在代码中引入了 Heisenbug。

* * *

> 我想知道是否有一种检查锁定状态的内置方法？

[假设您指的是原始锁......]

不，没有。至少，不在正在运行的应用程序本身内。（调试代理可以做到这一点，但应用程序与其 JVM 的调试代理对话是不切实际的。）

如果您想要/需要做这种事情，那么您没有不涉及更改应用程序锁定机制的*实际选择。*它就是这样儿的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T02:55:26.183

你可以使用 java.util.concurrent.Semaphore 来实现它，它会让你有更多的控制权

# android - 应用内计费服务 onServiceConnected() 未在 4.0/ICS 上调用

> ID：10255735
> 
> 赞同：1
> 
> 时间：2012-04-21T02:46:29.290
> 
> 标签：android, android-4.0-ice-cream-sandwich, in-app-billing

我的应用有一个单一的应用内购买，并以 Google 提供的 Dungeon 示例为模型（可在[http://code.google.com/p/marketbilling/source/browse/](http://code.google.com/p/marketbilling/source/browse/)查看）。唯一的区别是在第一次运行时恢复事务的代码已被分离出来并放置在我的应用程序的主要活动中。（我修改后的“地下城”活动是用户购买插件的地方）

`restoreTransactions()`我的主要活动中的代码在2.3`onCreate()`和 1.6 测试设备上运行良好：

```
 if (!initialized) 
    {
        BillingService mBillingService = new BillingService();
        mBillingService.setContext(this);

        if (mBillingService.checkBillingSupported()) 
        {
            mBillingService.restoreTransactions();
        }

        mBillingService.unbind();
    } 
```

然而，在运行 4.0.4 的 wifi-Xoom 上，它似乎在没有实际做任何事情的情况下直接通过它，*直到*我打开我的“地下城”活动，此时应该在主要活动中发生的一切都发生了（几乎就像它把所有东西都排好队，但在实际采取行动之前等待“地下城”中的某些东西）。

深入挖掘我可以看到，`onServiceConnected()`在我打开我的“地下城”活动之前，Xoom 上永远不会调用 BillingService.java，而在 2.3 和 1.6 上调用它就很好，而没有打开相同的活动。

4.x 中是否发生了一些变化，阻止了它在早期版本中的工作方式？

# c++ - 如何从 EDID 中读取显示器的型号？

> ID：10255737
> 
> 赞同：2
> 
> 时间：2012-04-21T02:46:47.407
> 
> 标签：c++, edid

在注册表中有一个（或多个）键，具体取决于您拥有多少个监视器 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\DISPLAY\DEL404C{Some Unique ID}\Device Parameters\EDID 这是一个 REG_BINARY 键。就我而言，这是：

```
00 ff ff ff ff ff ff 00 4c 2d 6f 03 39 31 59 4d 
07 12 01 03 0e 29 1a 78 2a 80 c5 a6 57 49 9b 23 
12 50 54 bf ef 80 95 00 95 0f 81 80 81 40 71 4f 
01 01 01 01 01 01 9a 29 a0 d0 51 84 22 30 50 98 
36 00 ac ff 10 00 00 1c 00 00 00 fd 00 38 4b 1e 
51 0e 00 0a 20 20 20 20 20 20 00 00 00 fc 00 53 
79 6e 63 4d 61 73 74 65 72 0a 20 20 00 00 00 ff 
00 48 56 44 51 32 30 36 37 37 37 0a 20 20 00 ef 
```

我的问题是我如何才能使用 C 或 C++ 仅读取监视器模型（例如“SyncMaster”）而不是所有信息？

EDID 的格式在此处描述：[http ://en.wikipedia.org/wiki/Extended_display_identification_data](http://en.wikipedia.org/wiki/Extended_display_identification_data)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T02:58:02.097

您在这里感兴趣的是 EDID 的描述符块，它们位于字节范围 54-71、72-89、90-107 和 108-125 中。这是您的 EDID 中的这四个块：

```
#1: 9a29 a0d0 5184 2230 5098 3600 acff 1000 00
#2: 0000 00fd 0038 4b1e 510e 000a 2020 2020 20
#3: 0000 00fc 0053 796e 634d 6173 7465 720a 20
#4: 0000 00ff 0048 5644 5132 3036 3737 370a 00 
```

您可以识别包含监视器名称的描述符，因为前三个字节全为零（因此它不是详细的时序描述符），第四个字节`FC`（指示类型）。第五个字节及以后包含名称，此处为：

```
5379 6e63 4d61 7374 6572 0a20    SyncMaster.. 
```

因此，简而言之：在偏移量 54、72、90 和 108 处检查序列`00 00 00 FC`；如果找到匹配项，则监视器名称是接下来的 12 个字节。

# php - 联系表格不发送电子邮件

> ID：10255738
> 
> 赞同：0
> 
> 时间：2012-04-21T02:47:05.413
> 
> 标签：php, html, email, email-validation

我的网站在 Contact 选项卡中有一个联系表单，它应该将消息发送到我在 submit.php 文件中声明的电子邮件。不幸的是，我没有收到电子邮件或消息。有没有办法将联系表消息链接到特定的电子邮件。该网站是eagleview.it

如果您需要任何进一步的代码，请告诉我。非常感谢您！

这是 submit.php：

```
<?php

/* config start */

$emailAddress = 'samkamar@hotmail.com';

/* config end */

require "../php/class.phpmailer.php";

session_name("fancyform");
session_start();

foreach($_POST as $k=>$v)
{
if(ini_get('magic_quotes_gpc'))
$_POST[$k]=stripslashes($_POST[$k]);

$_POST[$k]=htmlspecialchars(strip_tags($_POST[$k]));
}

$err = array();

if(!checkLen('name'))
$err[]='The name field is too short or empty!';

if(!checkLen('email'))
$err[]='The email field is too short or empty!';
else if(!checkEmail($_POST['email']))
$err[]='Your email is not valid!';

if(!checkLen('subject'))
$err[]='You have not selected a subject!';

if(!checkLen('message'))
$err[]='The message field is too short or empty!';

if((int)$_POST['captcha'] != $_SESSION['expect'])
$err[]='The captcha code is wrong!';

if(count($err))
{
if($_POST['ajax'])
{
    echo '-1';
}

else if($_SERVER['HTTP_REFERER'])
{
    $_SESSION['errStr'] = implode('<br />',$err);
    $_SESSION['post']=$_POST;

    header('Location: '.$_SERVER['HTTP_REFERER']);
}

exit;
}

$msg=
'Name:  '.$_POST['name'].'<br />
Email:  '.$_POST['email'].'<br />
IP: '.$_SERVER['REMOTE_ADDR'].'<br /><br />

Message:<br /><br />

'.nl2br($_POST['message']).'

';

 $mail = new PHPMailer();
$mail->IsMail();

$mail->AddReplyTo($_POST['email'], $_POST['name']);
$mail->AddAddress($emailAddress);
$mail->SetFrom($_POST['email'], $_POST['name']);
$mail->Subject = "A new ".mb_strtolower($_POST['subject'])." from ".$_POST['name']." |   contact form feedback";

$mail->MsgHTML($msg);

$mail->Send();

unset($_SESSION['post']);

if($_POST['ajax'])
{
echo '1';
  }
else
{
$_SESSION['sent']=1;

if($_SERVER['HTTP_REFERER'])
    header('Location: '.$_SERVER['HTTP_REFERER']);

exit;
}

function checkLen($str,$len=2)
{
return isset($_POST[$str]) && mb_strlen(strip_tags($_POST[$str]),"utf-8") > $len;
}

 function checkEmail($str)
{
return preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $str);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:18:08.497

您如何整理信息似乎有些不对劲。尝试[`sprintf()`](https://developer.mozilla.org/en/http_access_control)像这样使用：

```
$msg = sprintf("Name : %s <br/> Email : %s <br/>IP : %s <br/><br/> Message : %s"
                , $_POST['name'], $_POST['email'], $_SERVER['REMOTE_ADDR'], nl2br($_POST['message'])); 
```

# drupal - Drupal 6，使用户能够创建微型站点

> ID：10255739
> 
> 赞同：0
> 
> 时间：2012-04-21T02:47:20.140
> 
> 标签：drupal, drupal-6

我建立了一个网站，允许用户创建带有日程安排等的活动页面......但现在我想提供更多选项，可用于构建更多的迷你网站或微型网站。因此，除了添加画廊、描述等常用选项之外。我希望他们能够添加子菜单和自定义背景。我觉得背景很简单。但是，对于子菜单，我真的不想授予对菜单选项的访问权限。我还是想使用漂亮的菜单。

我会喜欢一些关于添加这些功能的最佳方式的建议，同时使其对用户来说非常直观。像 Microsite 节点这样的东西，它可能允许将所有内容都设置在一个页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:08:27.027

你看过开放式中庭吗？ [http://openatrium.com/](http://openatrium.com/) 这是一个 Drupal 发行版，可让您创建微型站点。

# objective-c - 判断webview页面是如何加载的？

> ID：10255741
> 
> 赞同：0
> 
> 时间：2012-04-21T02:47:29.013
> 
> 标签：objective-c, cocoa, webview

判断webview页面是如何加载的？让我告诉你页面正在加载。此外，无法打开 Webview 中加载的网页，例如以下 URL。

```
- (void)awakeFromNib {
    NSString *urlString = @"http://www.google.com";
    // Insert code here to initialize your application 
    [[_webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];
}

- (IBAction)googleOpen:(id)sender {
    [_webView setMainFrameURL:@"http://www.google.com"];
}

- (IBAction)baiduOpen:(id)sender {
    [_webView setMainFrameURL:@"http://www.baidu.com"];
}

- (IBAction)yahooOpen:(id)sender {
    [_webView setMainFrameURL:@"http://www.yahoo.com"];
} 
```

如何通过传递参数的方式打开 URL？ ![在此处输入图像描述](../Images/806717c40f5aa3731d524f13e20086b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:40:27.743

1.  如果你想知道一个网站什么时候加载，可以链接 WebFrameLoadDelegate 协议，实现`webView:didFinishLoadForFrame:`知道网页是否加载。

2.  用于`webView:didStartProvisionalLoadForFrame:`了解网页是否已开始加载。

3.  检查您与 Internet 的连接，看看您是否可以从其他 Web 浏览器打开这些网站。如果它有效，然后检查您的 IBAction 是否正确链接到您的按钮。

4.  打开带有参数的 URL 是什么意思？如果您的意思是拥有一个允许用户在某些网站（例如 Google）上搜索关键字的文本字段，只需`http://www.google.com/search?q=%yoursearch`将 %yoursearch 替换为用户输入即可。

# ios - UINavigationController 中后退按钮按下的自定义逻辑

> ID：10255742
> 
> 赞同：1
> 
> 时间：2012-04-21T02:47:34.003
> 
> 标签：ios

对我的应用程序布局的更详细说明：单击表格视图的任何行都会将用户带到下一个屏幕，返回按钮指向主页，顶部有一个分段控件。代码中的逻辑确定将预选分段控件的哪些段。用户可以单击分段控件的任何索引来更改屏幕上显示的内容。

我实现上述布局的方式是通过导航控制器。分段控件的“第一、二、三”对应的每个页面的内容都是独立的视图控制器。我之所以有这样的原因是因为这些页面中的每一个都有重要的功能和控件供用户交互. 将它们各自作为一个单独的视图控制器有助于软件代码组织和数据完整性. 主屏幕位于导航控制器堆栈的索引零处, 视图控制器对应于导航控制器的第一个索引, 等等. 假设用户当前在第二个屏幕上，在分段控件中选择了“第一个”。如果用户现在点击“第三个”，

两个问题： • 对我的实施方式有何评论？有没有更好的实施建议？我确实考虑过的一个具体实现是让一个视图控制器具有三个单独的视图（第一个、第二个和第三个各一个）的可能性？对此方法有何评论？

```
•   I seem to have an extremely hard time controlling the behavior of the “back button”of the navigation controller. When the user has selected “second”in the segmented control, I would still like to have the back button saying “Home” instead of “first” which is the default behavior of the navigation controller. I have figured out how I can customize the text of the back button. However, I can't seem to figure out how to customize the behavior of the button. What I mean by that is, when the user is on "third”, and clicks on the “home button”I'd like to pop three view controllers and land the user on the home screen. 
```

在 SO 上，我看到并尝试了各种技术，但均未成功：方法 1：viewwillDisappear()：确定此函数是否作为后退按钮按下的一部分被调用，并实现在标准单视图控制器弹出之外弹出其他视图控制器的逻辑. 有那么一会儿，这个逻辑确实确实弹出回到主页但是它立即崩溃并显示以下我似乎不明白的消息：

方法2：didPopItem()：我把下面的代码放在这个函数里

```
- (void)navigationBar:(UINavigationBar *)navigationBar didPopItem:(UINavigationItem *)item {

   NSLog(@"%s",__FUNCTION__);
      [[self navigationController] popViewControllerAnimated:YES];
    //ViewControllerAnimated:YES];
   NSLog(@"navcount%d",self.navigationController.viewControllers.count);
   if (self.navigationController.viewControllers.count > 1) {
         [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] animated:YES];
   }

} 
```

对上述任何评论将不胜感激！在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:52:10.853

由于三个视图控制器在您的视图层次结构中实际上彼此相等，因此我建议在您在段之间切换时替换顶部视图控制器而不是推送多个视图控制器，以便您可以从三个视图中的任何一个“返回”控制器，你最终会到达你想去的地方。

像这样的东西应该适合你：

```
- (void)replaceTopViewControllerWith:(UIViewController *)vc {
    NSMutableArray *vcs = [[self.navigationController viewControllers] mutableCopy];
    [vcs removeLastObject];
    [vcs addObject:vc];
    [self.navigationController setViewControllers:vcs animated:YES];
} 
```

# php - 2 SELECT 语句与 UNION 与 MySQL-PHP 中的任何其他语句的性能/效率

> ID：10255746
> 
> 赞同：2
> 
> 时间：2012-04-21T02:48:23.033
> 
> 标签：php, mysql, select, union, create-table

在 MySQL（使用 PHP）中哪个更有效/更好的实践/成本更低？`SELECT`ing 两个单独的语句，`UNION`将它们组合成一个，或者我在网上找到的关于`CREATE`ing 一个临时表作为 MySQL 等价物的其他东西`SELECT INTO`？或者你还能想到什么？

结果将在 PHP 脚本中使用。

查询：

*   第一个`SELECT`（我们称之为查询 A）无论如何都会产生 10 行 4 列。
*   第二个`SELECT`（查询 B）无论如何都会产生 1 行 4 列。

场景：

*   如果我`SELECT`使用这两个语句，我将仅在以下情况下迭代查询 B `Query A[0]->Col1 > 0`：总共 2 个数据库查询 + PHP 处理。
*   如果我`UNION`将两个语句放入查询 C 中，查询 B 将是第一行（`Query C[0]`是查询 B），而查询 A 将是第 2-11 行（`Query C[1..10]`是查询 A），我只会在以下情况下迭代第 2-11 行`Query C[0]->Col1 > 0`：总共 1 db 查询 + PHP 处理。

不可转让：

*   无论如何，我都必须遍历查询 A。
*   查询 A 的迭代取决于查询 B 的值。

少 1 个`SELECT`查询值得`UNION`操作吗？有没有更有效/更好的实践/成本更低的解决方案？我在这里缺少什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:30:35.067

这完全取决于环境和你的管理方式——我不得不说——其他一切。如果服务器位于地球另一端的另一个网络上，那么网络就是您的瓶颈。
为了进行更好的调用，我会做出一些假设：服务器位于 localhost 上，连接管理得当，而应该优化的只是查询本身。如果你是这种情况，你可以使用命令，[这里](http://dev.mysql.com/doc/refman/5.5/en/explain.html)`Explain`解释的用法非常简单：

```
Explain select col1 from table1 Union select col2 from table2 
```

那里有大量文章为您解释如何使用`Explain`. [这](http://www.informit.com/articles/article.aspx?p=377652&seqNum=2)是一个。

最后一件事，重要的不仅仅是行数。您的选择代码也被执行多少次也很重要。假设您有一个循环，每次运行返回 11 行并且有 1000 次迭代。只需假设每次迭代中的行都不同，那么您将看到连接管理和缓存的效果。

# iphone - ZXingWidget：未找到 Counted.h 文件

> ID：10255749
> 
> 赞同：0
> 
> 时间：2012-04-21T02:48:48.327
> 
> 标签：iphone, xcode, zxing

我正在使用 ZXingWidget 构建一个 iPhone 应用程序。我按照自述文件的说明在我的项目中设置了所有内容，并且编译没有问题。然后我在我的视图控制器头文件中导入 QRCodeReader.h 并开始在编译 FormatReader.h 时收到以下错误：

*找不到词法或预处理器问题“zxing/common/Counted.h”文件。*

我意识到我忘记将我的视图控制器实现文件从 .m 重命名为 .mm 所以我这样做了。但是，我仍然收到错误消息。

有什么建议么？

编辑：这是我的“QR 扫描”项目的目录布局。您将看到“cpp”位于“Projects”文件夹下，“QR Scan.xcodeproj”位于“QR Scan”文件夹中。我的 QR Scan Xcode 项目的标题中有“../cpp/core/src”。

```
 /Projects
      /cpp
           /core
                /src
      /QR Scan
           /QR Scan
           /ZXingWidget
                ZXingWidget.xcodeproj
           QR Scan.xcodeproj 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T03:05:00.067

[仔细检查README](http://code.google.com/p/zxing/source/browse/trunk/iphone/README)的第 5 步。您的包含路径中没有 C++ 头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:54:10.263

我不得不花很多时间来解决这个问题。即使将文件扩展名更改为.mm，问题仍然出现。问题是由于 import 语句。尝试将#import "ZXingWidgetController.h" 放在你的.h（头文件）和#import "QRCodeReader.h" 在你的.m（实现文件）中。这确实解决了我在 XCode 4.2 中的问题。希望这可以帮助某人。

# javascript - 从跨度进/出 div 遍历 DOM

> ID：10255751
> 
> 赞同：1
> 
> 时间：2012-04-21T02:49:31.633
> 
> 标签：javascript, jquery, jquery-selectors, traversal

我正在向 div 内的跨度添加点击事件。此事件的目标将变为可见，它是一个 div 内的第一个 div，向下两个 div。如何遍历 DOM 找到它？

也许使用代码会更清楚：

```
<div a>
    <h2>
        <span id="here">Click</span>
    </h2>
</div>

<div></div>

<div>
    <div class="targetDiv">This is the div we need to find</div>
    <div class="targetDiv">There are other divs with the same id, but we don't need to find   those</div>
    <div class="targetDiv">Not looking for this one </div>
    <div class="targetDiv">Or this one either</div>
</div> 
```

我左右搜索，找不到答案。将事件仅限制在跨度之后的第一个 div 非常重要。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T02:57:28.693

如图所示，代码如下所示：

```
$('span#here').on('click', function() {
    $(this).closest('div').siblings(':contains(.targetDiv)').children().eq(0).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:04:04.037

这是我们捕获的鱼[的样本](http://jsfiddle.net/npVj4/1/)

```
$(function() {
    $('#here').on('click', function() {
        var div = $(this)          //the element clicked
            .closest('div')        //find nearest parent div
            .nextAll(':eq(1)')     //find the second next div
            .children(':eq(0)')    //find the first child of it
            .show();               //remove invisible cloak
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:33:46.730

这行得通。我提供了一个示例，您可以将其保存到 html 文件并自己进行测试

```
<style>
.targetDiv{display:none;}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function(){
$('#here').click(function(){
$('.targetDiv').first().show(); // or whatever you want
});
});
</script>

<div a>
    <h2>
        <span id="here">Click</span>
    </h2>
</div>

<div></div>

<div>
    <div class="targetDiv">This is the div we need to find</div>
    <div class="targetDiv">There are other divs with the same id, but we don't need to find   those</div>
    <div class="targetDiv">Not looking for this one </div>
    <div class="targetDiv">Or this one either</div>
</div> 
```

# assembly - 如何使用 DumpMem 在 Assembly 中显示 Stack

> ID：10255752
> 
> 赞同：1
> 
> 时间：2012-04-21T02:49:32.667
> 
> 标签：assembly, x86, masm, irvine32

好的，这是我的问题。在我将变量压入堆栈然后为局部变量创建空间之后。**从程序返回之前，如何使用 DumpMem 显示堆栈？**

```
include irvine32.inc

.data
X   sdword   10, -10, 20, -20, 30, -30, 40, -40

.code
begin:
mov ecx, offset x
push ecx
call StackProcedure

StackProcedure PROC
        push ebp
        mov ebp, esp
        sub esp, 32
        lea esi, [ebp-32]
        mov ecx, 32
L1:     mov BYTE PTR [esi], '*'
        inc esi
        loop L1
        add esp, 32
        pop ebp
        ret
StackProcedure ENDP

finfin:
invoke exitProcess,0
end begin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-30T10:42:20.273

Irvine[`DumpMem`](http://programming.msjc.edu/asm/help/index.html?page=source%2Firvinelib%2Fdumpmem.htm)只需要寄存器中的三个值。只有这些寄存器被附加，当函数返回时，其他所有内容（寄存器、内存、堆栈）都不会改变。所以，它的使用很简单：

```
include irvine32.inc

.data
    X sdword   10, -10, 20, -20, 30, -30, 40, -40

.code

StackProcedure PROC
    push ebp
    mov ebp, esp
    sub esp, 32
    lea esi, [ebp-32]
    mov ecx, 32
L1: mov BYTE PTR [esi], '*'
    inc esi
    loop L1

        mov esi, esp                ; Start address
        mov ecx, 48                 ; Number of bytes to dump
        mov ebx, 1                  ; 1 - size byte
        call DumpMem                ; call Irvine's DumpMem

    add esp, 32
    pop ebp
    ret
StackProcedure ENDP

main PROC
    mov ecx, offset x
    push ecx
    call StackProcedure
    invoke exitProcess,0
main ENDP

END main 
```

我想这实际上并没有被问到。Irvine's[`DumpMem`](http://programming.msjc.edu/asm/help/index.html?page=source%2Firvinelib%2Fdumpmem.htm)没有显示除起始地址外的地址，也没有反汇编程序转储中预期的等效 ASCII 字符。由于它有自己的显示（标题和换行符），它不能嵌入到提供附加信息的函数之间。这是一个显示一行 16 字节的函数，其中包含地址、十六进制值和 ASCII 字符：

```
include irvine32.inc

.data
    X sdword   10, -10, 20, -20, 30, -30, 40, -40

.code

DumpMemLine PROC C USES EBX ESI, address:PTR      ; dumps 16 bytes hex & char
    mov eax, address
    call WriteHex               ; call Irvine's WriteHex (8 hex digits)
    mov al, ' '
    call WriteChar              ; call Irvine's WriteChar (space)
    call WriteChar              ; call Irvine's WriteChar (space)

    mov esi, address
    mov ecx, 16
    L1:
    mov al, [esi]
    cmp al, 14                  ; ASCII code >= 14d?
    jae @F                      ; Yes, can be written unchanged
    cmp al, 7                   ; ASCII code < 7d?
    jb @F                       ; Yes, can be written unchanged
    cmp al, 11                  ; ASCII code == 11d?
    je @F                       ; Yes, can be written unchanged
    cmp al, 12                  ; ASCII code == 12d?
    je @F                       ; Yes, can be written unchanged
    mov al, ' '                 ; Replace characters that `WriteChar` will "cook" (7,8,9,10,13)
    @@:                         ; This is label where the `jcond @F` jump to
    mov ebx, 1                  ; Two hex digits
    call WriteHexB              ; call Irvine's WriteHexB
    mov al, ' '
    call WriteChar              ; call Irvine's WriteChar (space)
    inc esi
    loop L1
    call WriteChar              ; call Irvine's WriteChar (space)

    mov esi, address
    mov ecx, 16
    @@:
    mov al, [esi]
    call WriteChar              ; call Irvine's WriteChar
    inc esi
    loop @B

    mov al, 10
    call WriteChar              ; call Irvine's WriteChar (line feed)

    ret
DumpMemLine ENDP

StackProcedure PROC
    push ebp
    mov ebp, esp
    sub esp, 32
    lea esi, [ebp-32]
    mov ecx, 32
L1: mov BYTE PTR [esi], '*'
    inc esi
    loop L1

        mov esi, esp                ; Start address
        mov ecx, 48                 ; Number of bytes to dump
        mov ebx, 1                  ; 1 - size byte
        call DumpMem                ; call Irvine's DumpMem

        ; Dump three lines à 16 bytes
        push esp                    ; Argument for DumpMemLine
        call DumpMemLine
        add dword ptr [esp], 16     ; Increment the pushed argument
        call DumpMemLine
        add dword ptr [esp], 16     ; Increment the pushed argument
        call DumpMemLine
        add esp, 4                  ; Clean up the stack

    add esp, 32
    pop ebp
    ret
StackProcedure ENDP

main PROC
    mov ecx, offset x
    push ecx
    call StackProcedure
    invoke exitProcess,0
main ENDP

END main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:15:38.433

我认为您正在尝试查看内存转储，如果它是正确的，您可以使用 GDB 调试器来调试您的程序，还可以通过设置断点来查看寄存器、段、控制寄存器、帧等内存详细信息，并点击链接以获取有关 GDB 的更多信息，

```
http://www.yolinux.com/TUTORIALS/GDB-Commands.html 
```

# python - TypeError：执行 open() 时需要一个字符缓冲区对象

> ID：10255753
> 
> 赞同：4
> 
> 时间：2012-04-21T02:49:35.683
> 
> 标签：python, compiler-errors

所以我正在学习Python。我正在用数组和 open() 做一件简单的事情，有时这段代码可以工作，有时却不行！请帮忙！

```
 print('Load? (Y/N)')
load = raw_input()
if load == "y":
    fin = open("myArr.bat", "r")
    myArr = fin.readline()
if load == "n":
    myArr = [0, 0, 0,
             0, 0, 0,
             0, 0, 0]
if load != "y" and load != "n":
    print 'WUT?'
    exit()

print (myArr[0]) ,  '|' ,  (myArr[1]) ,  '|' ,  (myArr [2])
print '----------'
print (myArr[3]) ,  '|' ,  (myArr[4]) ,  '|' ,  (myArr [5])
print '----------'
print (myArr[6]) ,  '|' ,  (myArr[7]) ,  '|' ,  (myArr [8])
print '_______________________________________________'
print 'What shall I change?'
print 'Number in array: '
foo = raw_input()
doo = int(float(foo))
print 'Number to change to: '
bar = raw_input()
dar = int(float(bar))
myArr[doo] = dar
print '_______________________________________________'
print (myArr[0]) ,  '|' ,  (myArr[1]) ,  '|' ,  (myArr [2])
print '----------'
print (myArr[3]) ,  '|' ,  (myArr[4]) ,  '|' ,  (myArr [5])
print '----------'
print (myArr[6]) ,  '|' ,  (myArr[7]) ,  '|' ,  (myArr [8])
fout = open("myArr.bat", "w")
fout.write(myArr)
fout.close() 
```

它给了我这个：

```
 Traceback (most recent call last):
  File "Screen.py", line 35, in <module>
    fout.write(myArr)
TypeError: expected a character buffer object 
```

请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T02:53:52.177

那是因为该[`write`](http://docs.python.org/library/stdtypes.html#file.write)方法需要一个字符串作为第一个参数，但您传递给它的是一个数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-21T02:58:29.303

我猜你在测试你的代码和输入时会得到这个错误`'n'`，但是当你输入时`'y'`，它工作得很好。这是因为这些行：

```
if load == "n":
myArr = [0, 0, 0,
         0, 0, 0,
         0, 0, 0] 
```

这`myArr`使得`list`. 不只是将列表写入文件。您必须先将其转换为字符串（只能将字符串写入文件）。

因此，根据您希望如何将此列表存储在文件中，您可以执行以下操作：

```
fout = open("myArr.bat", "w")
fout.write(' '.join(map(str, myArr)))
fout.close() 
```

这基本上会将以下行写入`myArr.bat`（假设`myArr = [0, 0, 0, 0, 0, 0, 0, 0, 0]`）：

```
0 0 0 0 0 0 0 0 0 
```

希望这可以帮助

# xna - XNA 在模型内调整模型大小

> ID：10255755
> 
> 赞同：0
> 
> 时间：2012-04-21T02:49:59.873
> 
> 标签：xna

我创建了一个 XNA 游戏背景作为模型，但里面包含更多模型。例如：“地面包含一个球”。现在，我想做的是进入地面并取回球并调整它的大小。

是否有可能这样做或者我需要分别导入地面和球然后调整它的大小（我希望这是最后一个选项）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:35:27.733

我认为你的意思是你想`ModelMesh`在模型中缩放一个特定的。这可以使用一个`Matrix`数组来完成，该数组将包含特定于各个网格的变换。像这样的东西：

```
//In the class for the background, or the game class if there isn't one
Matrix[] specificTransforms;

//Initialize the array however you want, and assign the specific matrix for the ball to its corresponding index

//Loop through the meshes like usual but add this below your code that multiplies the transform matrices:
if (specificTransforms[(put your iterator variable here)] != null)
{
    (put your BasicEffect here).World *= specificTransforms[put your iterator variable here];
} 
```

这会将网格的世界矩阵与您要应用于球的特定变换相结合。

这不是最好的方法，如果你发布你正在使用的代码，给你一个例子会更容易。除非你这样做，否则不能保证这会奏效。

# wordpress - 无法使用 web 平台安装程序 3.0 安装 iis 日志记录工具

> ID：10255757
> 
> 赞同：3
> 
> 时间：2012-04-21T02:50:25.917
> 
> 标签：wordpress, iis-7.5, web-platform-installer

尝试从 Windows Server 2008 R2 Standard 上的 Web 平台安装程序安装 WordPress 并遇到其依赖项之一的问题：IIS 日志记录工具。还尝试从 Web 平台安装程序安装 IIS 日志工具，但没有成功。安装日志：

```
DownloadManager Information: 0 : Loading product xml from: https://go.microsoft.com/?        linkid=9767054
DownloadManager Information: 0 : https://go.microsoft.com/?linkid=9767054 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 175
Content-Type: text/html; charset=utf-8
Expires: Sat, 21 Apr 2012 02:14:46 GMT
Location: https://www.microsoft.com/web/webpi/3.0/webproductlist.xml
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:46 GMT

DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/3.0/webproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Last-Modified: Wed, 11 Apr 2012 18:51:03 GMT
Accept-Ranges: bytes
ETag: "1cada9b1418cd1:0"
Server: Microsoft-IIS/7.5
VTag: 791313531200000000
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:46 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\Administrator\AppData\Local\Microsoft\Web Platform Installer\542864071.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 0, minorSP: 0, productType: 7, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/3.0/webapplicationlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/3.0/webapplicationlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Last-Modified: Fri, 20 Apr 2012 13:43:26 GMT
Accept-Ranges: bytes
ETag: "fc283790fb1ecd1:0"
Server: Microsoft-IIS/7.5
VTag: 279698231100000000
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:47 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\Administrator\AppData\Local\Microsoft\Web Platform Installer\-1338951197.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 0, minorSP: 0, productType: 7, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/3.0/mediaproductlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/3.0/mediaproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Last-Modified: Wed, 09 Nov 2011 18:16:33 GMT
Accept-Ranges: bytes
ETag: "4bfbe4b5b9fcc1:0"
Server: Microsoft-IIS/7.5
VTag: 279698231100000000
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:48 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\Administrator\AppData\Local\Microsoft\Web Platform Installer\664384761.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 0, minorSP: 0, productType: 7, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/3.0/toolsproductlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/3.0/toolsproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Last-Modified: Mon, 20 Feb 2012 22:27:49 GMT
Accept-Ranges: bytes
ETag: "49228ce01ef0cc1:0"
Server: Microsoft-IIS/7.5
VTag: 791790030800000000
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:48 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\Administrator\AppData\Local\Microsoft\Web Platform Installer\1956869252.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 0, minorSP: 0, productType: 7, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/3.0/enterpriseproductlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/3.0/enterpriseproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Last-Modified: Tue, 11 Oct 2011 16:02:13 GMT
Accept-Ranges: bytes
ETag: "265bd232f88cc1:0"
Server: Microsoft-IIS/7.5
VTag: 7917131400000000
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:48 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\Administrator\AppData\Local\Microsoft\Web Platform Installer\903079739.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 0, minorSP: 0, productType: 7, architecture: x64
DownloadManager Information: 0 : Getting ratings file from http://go.microsoft.com/?linkid=9752395
DownloadManager Information: 0 : http://go.microsoft.com/?linkid=9752395 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 203
Content-Type: text/html; charset=utf-8
Expires: Sat, 21 Apr 2012 02:14:49 GMT
Location: http://www.microsoft.com/web/handlers/WebPI.ashx?command=getatomfeedwithavgratingquery
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Sat, 21 Apr 2012 02:15:49 GMT

DownloadManager Information: 0 : Ratings file loaded successfully
DownloadManager Information: 0 : Adding product Windows Cache Extension 1.1 for PHP 5.3 (WinCache53) to cart
DownloadManager Information: 0 : Adding product 'WinCache53'
DownloadManager Information: 0 : Product 'StaticContent' is installed. Not adding
DownloadManager Information: 0 : Product 'WASProcessModel' is installed. Not adding
DownloadManager Information: 0 : Product 'DefaultDocument' is installed. Not adding
DownloadManager Information: 0 : Product 'DirectoryBrowse' is installed. Not adding
DownloadManager Information: 0 : Product 'HTTPErrors' is installed. Not adding
DownloadManager Information: 0 : Product 'HTTPLogging' is installed. Not adding
DownloadManager Information: 0 : Adding dependency product 'LoggingTools' for product 'WinCache53'
DownloadManager Information: 0 : Product 'RequestMonitor' is installed. Not adding
DownloadManager Information: 0 : Product 'RequestFiltering' is installed. Not adding
DownloadManager Information: 0 : Product 'StaticContentCompression' is installed. Not adding
DownloadManager Information: 0 : Product 'IISManagementConsole' is installed. Not adding
DownloadManager Information: 0 : Product 'WASConfigurationAPI' is installed. Not adding
DownloadManager Information: 0 : Product 'CGI' is installed. Not adding
DownloadManager Information: 0 : Product 'UrlRewrite2' is installed. Not adding
DownloadManager Information: 0 : Product 'FastCGIUpdate' is installed. Not adding
DownloadManager Information: 0 : Product 'PHP53' is installed. Not adding
DownloadManager Information: 0 : Dependent product FastCGIBackport does not apply for current OS / configuration. Not adding
DownloadManager Information: 0 : Product 'VC9Redist' is installed. Not adding
DownloadManager Information: 0 : No SQL to configure
DownloadManager Information: 0 : No MySQL to configure
DownloadManager Information: 0 : Setting current install to 1
DownloadManager Information: 0 : Starting install sequence
DownloadManager Information: 0 : Starting IIS 7.5 component install
DownloadManager Information: 0 : Creating IIS 7.0 unattended setup file: C:\Users\Administrator\AppData\Local\Temp\216\tmpA8DB.tmp
DownloadManager Information: 0 : Starting IIS unattended setup: C:\Windows\sysnative\pkgmgr.exe
DownloadManager Information: 0 : Downloading file 'http://downloads.sourceforge.net/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe' to: C:\Users\Administrator\AppData\Local\Temp\216\tmpA90B.tmp
DownloadManager Information: 0 : http://downloads.sourceforge.net/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Access-Control-Allow-Origin: *
Content-Disposition: attachment; filename="wincachewpi-1.1.0-5.3-nts-vc9-x86.exe"
Location: http://superb-sea2.dl.sourceforge.net/project/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe
Set-cookie: sf_mirror_attempt=wincache:superb-sea2:/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe; expires=Sat, 21-Apr-2012 02:18:25 GMT; Path=/
Content-type: text/html
Content-Length: 0
Date: Sat, 21 Apr 2012 02:16:25 GMT
Server: lighttpd/1.4.26

DownloadManager Information: 0 : http://superb-sea2.dl.sourceforge.net/project/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Moved Temporarily
Server: nginx/0.6.39
Date: Sat, 21 Apr 2012 02:16:25 GMT
Content-Type: text/html
Content-Length: 161
Connection: keep-alive
Location: http://downloads.sourceforge.net/project/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe?download&failedmirror=superb-sea2.dl.sourceforge.net

DownloadManager Information: 0 : http://downloads.sourceforge.net/project/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe?download&failedmirror=superb-sea2.dl.sourceforge.net responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Access-Control-Allow-Origin: *
Content-Disposition: attachment; filename="wincachewpi-1.1.0-5.3-nts-vc9-x86.exe"
Location: http://iweb.dl.sourceforge.net/project/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe
Set-cookie: sf_mirror_attempt=wincache:superb-sea2|iweb:/wincache/wincache-1.1.0/wincachewpi-1.1.0-5.3-nts-vc9-x86.exe; expires=Sat, 21-Apr-2012 02:18:26 GMT; Path=/
Content-type: text/html
Content-Length: 0
Date: Sat, 21 Apr 2012 02:16:26 GMT
Server: lighttpd/1.4.26

DownloadManager Information: 0 : Moving downloaded file 'C:\Users\Administrator\AppData\Local\Temp\216\tmpA90B.tmp' to: C:\Users\Administrator\AppData\Local\Microsoft\Web Platform Installer\installers\WinCache53\5862B1955ACEE88B2BFA74E590A94D82F7464A9C\wincachewpi-1.1.0-5.3-nts-vc9-x86.exe
DownloadManager Information: 0 : Waiting for process: 3360 - C:\Windows\sysnative\pkgmgr.exe
DownloadManager Error: 0 : Unattended setup returned '-2146498529'
DownloadManager Information: 0 : Product IIS: Logging Tools done install completed
DownloadManager Information: 0 : Increasing current install to 2
DownloadManager Warning: 0 : Dependency failed for product 'Windows Cache Extension 1.1 for PHP 5.3'. Skipping install
DownloadManager Information: 0 : Product Windows Cache Extension 1.1 for PHP 5.3 had a dependency fail. Increasing install product to 3
DownloadManager Information: 0 : Clearing cart
DownloadManager Information: 0 : Adding product IIS: Logging Tools (LoggingTools) to cart
DownloadManager Information: 0 : Adding product 'LoggingTools'
DownloadManager Information: 0 : Product 'WASProcessModel' is installed. Not adding
DownloadManager Information: 0 : No SQL to configure
DownloadManager Information: 0 : No MySQL to configure
DownloadManager Information: 0 : Setting current install to 1
DownloadManager Information: 0 : Starting install sequence
DownloadManager Information: 0 : Starting IIS 7.5 component install
DownloadManager Information: 0 : Creating IIS 7.0 unattended setup file: C:\Users\Administrator\AppData\Local\Temp\216\tmpA264.tmp
DownloadManager Information: 0 : Starting IIS unattended setup: C:\Windows\sysnative\pkgmgr.exe
DownloadManager Information: 0 : Waiting for process: 5060 - C:\Windows\sysnative\pkgmgr.exe
DownloadManager Error: 0 : Unattended setup returned '-2146498529'
DownloadManager Information: 0 : Product IIS: Logging Tools done install completed
    DownloadManager Information: 0 : Increasing current install to 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:42:44.077

解决了！我必须使用服务器管理器/角色/Web 服务器/添加角色服务进行安装。我的机器是 Windows Server 2008 R2 Standard。在 W7 中，我相信是控制/程序/打开或关闭 Windows 功能。

# html - 如何在 IE 资源管理器中选择多个文件？

> ID：10255760
> 
> 赞同：1
> 
> 时间：2012-04-21T02:51:15.530
> 
> 标签：html, file, internet-explorer, button

我想用一个按钮在 IE 中选择多个文件。有没有简单的方法？IE 不支持 HTML5 标签，这令人难以置信。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:22:37.557

包括几个`<input type=file>`元素。您还可以使用 JavaScript 动态创建此类元素，这样一旦用户选择了一个文件，就会出现一个新的文件输入元素。

# jquery - 用jquery剥离所有html标签？

> ID：10255766
> 
> 赞同：4
> 
> 时间：2012-04-21T02:52:53.777
> 
> 标签：jquery

如何去除 jquery 中的所有 html 标签。PHP中的strip_tags之类的函数

eg：有一些内容如下：

```
 <div id='test'>This is <b>bold</b> and this <div>is</div> <i>italic</i>.</div> 
```

现在我想把它改成`<div id='test'>This is bold and this is italic.</div>`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T02:54:50.953

使用`.text()`：

```
$('#test').text($('#test').text()); 
```

我使用`.text()`了两次，因为`.html()`用于设置内容会导致带有小于号和大于号的字符串被错误地呈现：

```
Hello &lt;foo&gt; // Set with .text()
Hello <foo>       // Set with .html() 
```

如果您使用`.html()`, then`<foo>`将成为标签。

# c++ - 模板成员转换运算符中的编译错误

> ID：10255768
> 
> 赞同：0
> 
> 时间：2012-04-21T02:53:13.187
> 
> 标签：c++, compiler-errors, auto-ptr, function-templates

我正在尝试在一个类中编写一个转换运算符函数模板并遇到一些我不完全理解的编译错误。

```
class ABC { };

class BBC:public ABC { };

template <class T>
class TestPtr
{
    public:
        TestPtr(T* ptr=0)
            : _pointee(ptr)
        {   }

        TestPtr(TestPtr& rhs)
        {
            this->_pointee = rhs._pointee;
            rhs._pointee= 0;
        }

        template <class U> operator TestPtr<U>();

    private:
        T* _pointee;
};

template <class T> template <class U>
TestPtr<T>::operator TestPtr<U>()
{
    return TestPtr<U>(this->_pointee);   // if this line is changed to 
    //TestPtr<U> x(this->_pointee);      // these commented lines, the 
    //return x;                          // compiler is happy
}

void foo (const TestPtr<ABC>& pmp)
{  }

int main() {
    TestPtr<BBC> tbc(new BBC());
    foo(tbc);
} 
```

上面的代码导致以下错误

```
TestPtr.cpp: In member function ‘TestPtr<T>::operator TestPtr<U>() [with U = ABC, T = BBC]’:
TestPtr.cpp:38:9:   instantiated from here
TestPtr.cpp:28:34: error: no matching function for call to ‘TestPtr<ABC>::TestPtr(TestPtr<ABC>)’
TestPtr.cpp:28:34: note: candidates are:
TestPtr.cpp:13:3: note: TestPtr<T>::TestPtr(TestPtr<T>&) [with T = ABC, TestPtr<T> = TestPtr<ABC>]
TestPtr.cpp:13:3: note:   no known conversion for argument 1 from ‘TestPtr<ABC>’ to ‘TestPtr<ABC>&’
TestPtr.cpp:9:3: note: TestPtr<T>::TestPtr(T*) [with T = ABC]
TestPtr.cpp:9:3: note:   no known conversion for argument 1 from ‘TestPtr<ABC>’ to ‘ABC*’ 
```

现在让我困惑的是编译器试图选择`TestPtr<ABC>::TestPtr(TestPtr<ABC>)`而不是`TestPtr<ABC>::TestPtr(ABC *)`在 return 语句中。但是，如果我先用预期的构造函数创建一个变量，然后返回它的值，它就可以正常工作。我还使 T* 构造函数显式但无济于事。

我用 g++ 和 clang++ 都试过了，结果相似。有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:15:39.460

问题出在您的复制构造函数上。它的参数是一个`TestPtr&`（非常量引用）：

```
TestPtr(TestPtr& rhs) 
```

非常量引用不能绑定到右值表达式。 `TestPtr<U>(this->_pointee)`是创建临时对象的右值表达式。当您尝试直接返回此对象时，必须制作一个副本。因此，当编译器无法调用复制构造函数时，您会收到此错误。

通常解决方案是让您的复制构造函数获取 const 引用。但是，在这种情况下，解决方案有点棘手。你会想做一些类似的事情`std::auto_ptr`。[我在对“如何实现 std::auto_ptr 的复制构造函数？”](https://stackoverflow.com/questions/4514124/how-could-one-implement-stdauto-ptrs-copy-constructor)的回答中描述了它的肮脏技巧。

或者，如果您使用最新的 C++ 编译器并且只需要支持支持右值引用的编译器，您可以通过提供用户声明的移动构造函数 ( `TestPtr(TestPtr&&)`) 并抑制复制构造函数（`=delete`如果您的编译器支持删除的成员函数，或将其声明为私有而不定义它）。

* * *

另请注意，您必须提供用户声明的复制赋值运算符。（或者，如果您决定将类型设为仅移动，则需要提供用户声明的移动赋值运算符并禁止隐式复制赋值运算符，再次使用`= delete`或声明而不定义它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:26:10.510

在您的复制构造函数中，您出于某种原因坚持将源指针归零

```
TestPtr(TestPtr& rhs)
{
  this->_pointee = rhs._pointee;
  rhs._pointee= 0;
} 
```

你为什么做这个？

由于您坚持归零`rhs`，因此您不能将参数声明为`const TestPtr& rhs`，这反过来会破坏您的代码，正如 James 解释的那样。

我看不出有任何理由将源指针归零。做就是了

```
TestPtr(const TestPtr& rhs) : _pointee(rhs._pointee)
  {} 
```

它应该可以工作。

我怀疑你是`std::auto_ptr`为了灵感，在它的复制程序中看到了类似的东西。但是，在`std::auto_ptr`源指针中是归零的，因为`std::auto_ptr`它获得了它指向的对象的所有权，并在它被复制时转移了该所有权。所有权管理的需要是由以下事实决定的：`std::auto_ptr`不仅指向对象，它还试图自动销毁它们。

您的指针不会试图破坏任何东西。它不需要获得指向对象的所有权。出于这个原因，您不需要在复制指针时将源归零。

# c# - 如果我从 C# 中的 try/finally 块返回，finally 中的代码是否总是运行？

> ID：10255774
> 
> 赞同：43
> 
> 时间：2012-04-21T02:54:18.943
> 
> 标签：c#, try-catch-finally

它似乎按照一些初始测试进行，但我想知道它是否可以**保证**返回，或者在某些情况下它是否不能返回？这对我的应用程序至关重要，但我还没有找到不会返回的用例。
我想获得这方面的专业知识。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-21T15:18:18.390

其他答案有很多不准确之处。

当控制*正常*离开 try 块时，控制权被传递给 finally 块——也就是说，通过 return、goto、break、continue 或简单地从 end 上掉下来。*当控制通过已被封闭的 catch 块捕获的异常*离开 try 块时，控制将传递给 finally块。

在其他所有情况下，都不能*保证*finally 块中的代码会被调用。尤其：

*   如果 try 块代码进入无限循环，或者线程被冻结并且从未解冻，则 finally 块代码永远不会被调用。

*   如果进程在调试器中暂停，然后主动终止，那么 finally 块永远不会被调用。如果进程执行了快速失败，则永远不会调用 finally 块。

*   如果电源线从墙上拔出，则永远不会调用 finally 块。

*   *如果在没有相应 catch 块*的情况下抛出异常，则 finally 块是否运行是*运行时的实现细节*。当存在未捕获的异常时，运行时可以选择任何行为。“不运行 finally 块”和“运行 finally 块”都是“任何行为”的示例，因此可以选择其中任何一个。通常，运行时会询问用户是否要在 finally 块运行之前附加调试器；如果用户说不，那么 finally 块运行。但同样：运行时*不需*要这样做。它可能会很快失败。

你不能依赖 finally 块总是被调用。如果您需要对代码执行有强有力的保证，那么您不应该编写 try-finally，而应该编写一个[受约束的执行区域](https://docs.microsoft.com/en-us/dotnet/framework/performance/constrained-execution-regions)。正确编写 CER 是 C# 编程中最困难的任务之一，因此在尝试编写代码之前请仔细研究文档。

顺便说一句，关于最终被阻止的 goto 的“有趣事实”是：

```
try { goto X; } finally { throw y; } 
X : Console.WriteLine("X"); 
```

X 是一个不可访问的标签，由可访问的 goto 定位！因此，下次你参加聚会时，你可能会说“大家好，任何人都可以制作一个 C# 程序，它有一个不可访问的标签，并且是一个可访问的 goto 的目标吗？” 你会看到聚会上谁阅读了可达性规范，谁没有！

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-04-21T02:56:13.403

在正常情况下，无论 try 或 catch 块内发生什么，都会执行 finally 块中的代码。您是否从该方法返回都没有关系。

在某些情况下，这是不正确的。例如，如果 finally 块中的代码抛出异常，那么它将像任何其他代码块一样停止执行。

Eric Lippert 写了一个更全面的答案，概述了其他案例：[https ://stackoverflow.com/a/10260233/53777](https://stackoverflow.com/a/10260233/53777)

关于 goto，答案仍然是肯定的。考虑以下代码：

```
try
{
    Console.WriteLine("Inside the Try");
    goto MyLabel;
}
finally
{
    Console.WriteLine("Inside the Finally");
}

MyLabel:
    Console.WriteLine("After the Label"); 
```

产生的输出是这样的：

> 在尝试里面
> 
> 最后里面
> 
> 标签之后

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-21T15:50:34.257

这里有些例子：

**Environment.FailFast()**

```
 try
        {
            Console.WriteLine("Try");
            Environment.FailFast("Test Fail");

        }
        catch (Exception)
        {
            Console.WriteLine("catch");
        }
        finally
        {
            Console.WriteLine("finally");
        } 
```

输出只是“尝试”

**堆栈溢出**

```
 try
        {
            Console.WriteLine("Try");
            Rec();
        }
        catch (Exception)
        {
            Console.WriteLine("catch");
        }
        finally
        {
            Console.WriteLine("finally");
        } 
```

Rec 在哪里：

```
 private static void Rec()
    {
        Rec();
    } 
```

输出仅为“Try”，并且由于 StackOverflow 导致进程终止。

**未处理的异常**

```
 try
        {
            Console.WriteLine("Try");
            throw new Exception();
        }
        finally
        {
            Console.WriteLine("finally");
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T03:06:01.707

在终止应用程序的致命异常的情况下，将不会调用 finally 块。包括堆栈溢出、JIT 调用方法期间的异常、CLR 运行时中的致命异常。

正如@mintech 指出的那样，如果应用程序挂在块内，它根本不会到达 finally 块。这包括等待同步对象、死锁无限循环甚至是无法关闭它的 UI。

# algorithm - 如何以相反的顺序遍历这棵树

> ID：10255780
> 
> 赞同：2
> 
> 时间：2012-04-21T02:55:14.970
> 
> 标签：algorithm, tree, binary-tree

我找到了一个莫里斯树遍历的实现，

它工作正常，但是在尝试以相反的顺序遍历树时有点问题.. -

```
 void MorrisTraversal(struct Node *root)
    {  
    struct Node *p,*pre;
    if(root==0) { return; }
    for(p=root;p!=0;)
    {
    if(p->Left==0) { printf(" %d ",p->Data); p=p->Right; continue; }
    for(pre=p->Left;pre->Right!=0 && pre->Right!=p;pre=pre->Right) { }
    if(pre->Right==0)
        { pre->Right=p; p=p->Left; continue; }
    else
        { pre->Right=0; printf(" %d ",p->Data); p=p->Right; continue; }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:56:52.320

通过反向顺序，我假设您的意思是反向中序遍历。你至少有两个选择：

1.  您可以修改代码并将所有`->Right`指针引用交换为`->Left`一个。

2.  您可以将这两个`printf`语句替换为推送到堆栈上。算法完成后，您将从堆栈中弹出数据以打印它们。然而，这违背了 Morris 遍历算法的全部目的，即无堆栈。

这个相关的[SO 线程](https://stackoverflow.com/questions/5502916/explain-morris-inorder-tree-traversal-without-using-stacks-or-recursion)可能会帮助您理解。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-28T07:58:23.867

这是 Java 中的一个示例。[单击此处](http://www.javashava.com/2016/06/tree-traversal.html)获取另一个使用迭代而不是递归的示例。

```
public int depthOfTree(TreeNode node){
    if(node == null){
        return 0;
    }

    int leftDepth = depthOfTree(node.left);
    int rightDepth = depthOfTree(node.right);

    if(leftDepth > rightDepth){
        return leftDepth+1;
    } else {
        return rightDepth+1;
    }
}

//Reverse Level with recursion
public void reverseLevelOrder(TreeNode node){
    int depth = depthOfTree(node);

    for(int i=depth;i>0;i--){
        printTree(node,i);
    }
}

public void printTree(TreeNode node, int level){
    if(node == null){
        return;
    }
    if(level == 1){
        System.out.print(node.data+" ,");
    } else if(level>1){
        printTree(node.left, level-1);
        printTree(node.right, level-1);
    }
} 
```

# php - 敏感数据是否应该通过脚本和数据库两种方式加密？

> ID：10255785
> 
> 赞同：2
> 
> 时间：2012-04-21T02:55:50.510
> 
> 标签：php, mysql, encryption

我对加密知之甚少，但是加密已经加密的东西有什么好处，比如说密码？我知道盐，但在此之前，它是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:20:23.307

当散列是单向时，加密是双向的。您可以解密加密的字符串，但不能恢复散列。

一个简单但很好的例子是使用 md5 hash + salt: MD5('password' + 'random_string') - 无论你使用 PHP 还是 MySQL - 结果都是一样的。所以你在这里拥有的是'passwordrandom_string'的散列，使用字典不太可能匹配。

因此，每次检查密码时，您都会：

```
if (md5($password . 'random_string') == $hash_from_db) 
```

更新：但是如果你真的关心安全性（这通常只需要在你的应用程序处理非常敏感的数据时才需要这样做），并且说更多 - 你有疯狂的偏执狂和精神错乱：互联网上有很多散列方法. 用随机盐找一些东西（所以每个密码都可以有几乎无限数量的哈希），做一些改变，将它与其他哈希算法结合起来——问题就解决了。

你应该知道的一件事——有时散列越慢——效果越好。这意味着如果您以某种方式在登录尝试计数器中有一个老鼠洞，这将**真正**减慢暴力破解过程。

您可以查看一个示例 - bcrypt（它使用 Java 进行散列）。不是说你应该使用它，只是你应该寻找的一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:23:34.763

[这个问题](https://stackoverflow.com/questions/771315/is-there-any-benefit-to-encrypting-twice-using-pgp)对这个话题有一些相关的讨论。在某些情况下，这将是一个坏主意，并且可能会削弱链接线程中指出的加密，因此除非您真的确定要进入的内容，否则您不会想要这样做。

加密的基本基础是加密（多项式时间）比解密（非多项式时间）更容易。加密中断的唯一方法是如果以下任何一个/两个都为真：

1.  您的加密方案中存在一个漏洞，该漏洞减少了您加密所需的多项式时间与您期望攻击者解密所需的非多项式时间之间的差距。
2.  某人有足够的计算资源来解密您的数据（在非多项式时间内）。

听起来在某些情况下，双重加密实际上会使问题 #1 更有可能发生，所以这很危险。但问题 #2 对我来说似乎更大。这个想法是，拥有足够计算资源的攻击者将能够解密我的数据——这一行为意味着他们愿意/能够投入比我加密数据更多的计算资源来解密我的数据。

如果我们承认攻击者拥有解密我的数据所需的大量计算资源，那么在我看来，他们可能拥有两倍于这么多资源的想法似乎一点也不合理。

还要意识到，如果您使用相同的密钥，那么实际上并没有增加任何安全性——一旦他们破解了一个，他们就破解了它们。使用两种不同的加密技术和两个不同的密钥来加密某些东西，以防止任何一种加密方案出现问题#1，这可能是有价值的，但这肯定是有争议的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:30:24.470

**使用不同的密钥**进行两次加密确实会带来一些好处。例如，使用较弱的密码加密的文件，随后使用更强的密码和密钥强度再次加密，将比仅使用较弱的密码更难破解。类比是在银行的金库内放置一个脆弱的锁箱。但是，一般来说，您最好使用强密码进行加密，而不是使用弱密码进行两次加密。

在某些情况下，对某些内容进行两次加密是合适的，例如当您跨越多个信任障碍时。例如，您可能会在将文件发送给云提供商（您可能不信任）之前对其进行加密。如果云提供商需要将文件发送到另一家异地备份公司（云提供者可能不信任该公司），他们可能会再次对其进行加密。

也就是说，对于密码，您最好使用强哈希（例如 sha1）和盐来存储密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T03:58:18.903

这取决于您所说的加密是什么意思。如果您实际上是使用 Microsoft 的 SQL Server 加密引擎对数据库上的信息进行加密，那么它确实很重要。您不应该依赖数据库级加密，因为它并不安全。密钥仍存储在计算机上，仅可防止不与数据库一起查找该密钥的天真的攻击者。

一般情况下，数据库还支持在数据库加密时以明文形式导出数据。这意味着如果攻击者进入系统，他们就可以这样做。如果他们只有硬盘驱动器（外部驱动器被盗），那么它可以节省您。

通常，密码应在您的应用程序中进行散列处理，然后发送到数据库。生成 64 字节盐然后使用`SHA-512(salt || password)`where`||`表示**二进制**连接被认为是安全的。不要使用随机的 ASCII 文本作为盐，并坚持使用安全的随机数生成器，例如`/dev/urandom`Microsoft 的`CryptGenRandom`. 这使得攻击者无法存储预先计算的哈希列表以反向查找常用密码。

如果您想防止备份驱动器被盗的情况，您还需要确保备份数据库、保持加密并将密钥存储在远离加密数据库的安全环境中。我们称之为“将锁与钥匙分离”。由于这在导出数据库的情况下对您没有帮助，因此您还希望像我之前提到的那样进行散列。除了加密之外，散列技术将使得 1.) 攻击者无法获取其他不太敏感的信息，例如姓名和地址，以及 2.) 攻击者甚至无法开始尝试恢复密码或其他凭据。

最重要的是，这取决于您的威胁模型。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-21T03:18:35.013

是的。这很重要。以明文形式将敏感数据存储在任何地方都超出了不好的做法。这很危险。即使是标准的 md5 散列现在也被认为是“损坏的”，不应该在不加盐的情况下单独使用它，并且可能与它一起使用其他散列组合。只是为了振作起来。

```
$salt = 'Yh%Gg^!&ud$*';
$encryption = md5(sha1($salt.md5(md5($salt.$_POST['pwd']))));
$query = mysql_query("SELECT * FROM users WHERE name=$uname AND pass=$encryption"); 
```

不完全是最安全的，但如果有人得到了表信息，他们将无法在不知道盐和散列组合的情况下破解它。

最终，您需要根据数据的敏感性做出明智的决定。如果您要存储任何类型的用户密码，即使您也不应该知道它们是什么。

# asp.net-mvc-3 - 如何使用 HttpClient 查询 AzureTable REST API

> ID：10255788
> 
> 赞同：0
> 
> 时间：2012-04-21T02:56:36.153
> 
> 标签：asp.net-mvc-3, rest, azure-storage

我无法弄清楚如何在下面的步骤中设置授权

```
 static string _address = "http://Foo.table.core.windows.net/BackupEntries()?select=RowKey";

    static void Main(string[] args)
    {

        // Create an HttpClient instance
        HttpClient client = new HttpClient();
        client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("aa", ""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:18:31.010

As pointed out by Steve Marx, please sign the request. You can find the detailed authentication schema on [http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx). It’s not difficult to sign the request, but the process can be a bit complicated. You can search the web to find some examples, such as [http://blog.einbu.no/2009/08/authenticating-against-azure-table-storage/](http://blog.einbu.no/2009/08/authenticating-against-azure-table-storage/).

Best Regards,

Ming Xu.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-21T15:27:36.500

这是旧的，但你可以试试

```
 string Userid = string.Empty;
    string Pwd = string.Empty;

        byte[] bytes = Encoding.ASCII.GetBytes(String.Format("{0}:{1}", Userid, Pwd));
        var authorization = "basic " + Convert.ToBase64String(bytes);
        fr.Headers.Add("Authorization", authorization); 
```

# asp.net - 拒绝访问路径“c:\inetpub\wwwroot\myapp\App_Data”

> ID：10255790
> 
> 赞同：22
> 
> 时间：2012-04-21T02:56:52.533
> 
> 标签：asp.net, iis, access-denied

我刚刚在 Windows XP 上安装了 IIS。

当我尝试执行应用程序时，出现错误：

> 拒绝访问路径“c:\inetpub\wwwroot\myapp\App_Data”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：对路径“c:\inetpub\wwwroot\myapp\App_Data”的访问被拒绝。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 上的网络服务），如果应用程序不模拟，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的复选框。
> 
> 源错误：
> 
> 第 70 行：Protected Sub cmbSettingFiles_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) 处理 cmbSettingFiles.SelectedIndexChanged
> 第 71 行：Dim doc As XmlDocument = New XmlDocument()
> 第 72 行：doc.Load(Path.Combine(basePath, cmbSettingFiles. SelectedValue)) 第 74 行：Dim settingsNode As XmlNode = doc.SelectSingleNode("/settings")
> 
> 源文件：C:\myapp\install\install.aspx.vb 行：72

我已经尝试通过这样做来获得许可：

> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的复选框。

但错误仍然存​​在。

这和我的代码有什么关系吗？

我该如何解决这个问题？

**编辑**

我已经在我的开发机器上解决了这个问题，但我的网络服务器上仍然出现错误。

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2017-07-10T14:59:47.553

如果您收到此错误，您可能正在尝试写入`wwwroot`. 默认情况下这是不允许的，这是[有充分理由的](https://chat.stackoverflow.com/transcript/message/47399140#47399140)。

相反，请考虑将文件存储在`wwwroot`. 如果您只需要提供文件，请将它们存储在*外部*的文件夹中`inetpub`并使用[虚拟目录](https://docs.microsoft.com/en-us/iis/configuration/system.applicationhost/sites/site/application/virtualdirectory)使它们对 IIS 可见。

原答案：

* * *

**对于在 Windows Server 上运行 IIS 的用户：**

默认情况下，IIS 用户没有`wwwroot`文件夹的写入权限。这可以通过授予`IIS_IUSRS`用户完全权限来解决`wwwroot`。

1.  打开文件资源管理器并转到`C:/inetpub/`
2.  右键单击 wwwroot，然后单击“属性”
3.  转到安全选项卡并单击“编辑...”以编辑权限
4.  查找并选择 IIS 用户。就我而言，它被称为`IIS_IUSRS ([server name]\IIS_IUSRS)`.
5.  为所有权限选择“允许”复选框。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-21T07:47:04.413

> 尝试转到 App_Data 文件夹属性并添加具有读写权限的 ASPNET 用户

参考：
[如何为 WebMail Pro 的 App_Data 文件夹分配正确的权限 ASP.NET](http://www.afterlogic.com/kb/articles/how-to-assign-correct-permissions-to-appdata-folder-of-webmail-pro-aspnet)
[对 APP_DATA 文件夹](http://forums.asp.net/t/920414.aspx/1)
[ASP/ASP.NET 的权限 处理写权限的最佳方式？](https://serverfault.com/questions/14655/asp-asp-net-best-way-to-handle-write-permissions)

如果它不能解决您的问题，请检查您的 XML 文件是否未被使用这些配置文件的另一个线程打开。如果仍然存在，请提供更多详细信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T02:33:33.610

考虑如果您的文件是只读的，那么额外的参数可能有助于`FileStream`

```
using (var fs = new FileStream(path, FileMode.Open, FileAccess.Read)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T03:01:20.897

您确定要添加正确的用户吗？您是否检查过为您的应用程序池设置了哪个用户？

如果由于某种原因无法读取文件，也会发生此错误；例如文件被锁定或被另一个应用程序使用。由于这是一个 ASP.NET Web 应用程序，您需要确保您没有执行任何需要锁定文件的操作；除非您可以保证您的页面上一次只有一个用户。

您能否发布一个如何访问该文件的示例？它是什么类型的文件？代码片段将帮助您获得更准确的答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-13T15:01:26.330

我也有类似的情况。我正在使用 TFS 进行源代码控制。我发现，当它被签入时，它使文件只读。这在我的服务中导致了上述错误，它正在以读/写方式打开它们。一旦我检查了它们进行编辑。一切都很好。我正在考虑尝试在服务中以只读方式打开它们。我认为一旦它们发布到生产服务器，这不是问题。仅在开发环境中。我在使用实体框架的服务中看到了类似的问题。如果签入 .svc 文件，则无法通过 EF 更新数据库。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-10T06:43:54.597

我尝试添加具有所有权限的 ASP.net v4.0，添加 NETWORK SERVICE 用户但没有任何帮助。最后，在 App_Data 文件夹中添加 DefaultAppPool 用户的 MODIFY 权限，问题解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-24T07:08:37.023

尝试向 NETWORK SERVICE 用户授予权限。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-07T07:53:11.310

请以管理员权限运行 Visual Studio ..这个问题为我解决了..

**拒绝访问路径 C:\inetpub\wwwroot** 被拒绝表示自助服务网站无法访问安装它的服务器上的特定文件夹。这可能是因为该位置不存在，或者是因为身份验证用户没有任何权限应用于写入该位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-16T05:14:50.250

另一个原因可能是因为您尝试写入的文件路径为空，这就是它找不到它的原因。这只是发生此错误的另一个原因。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-07T06:42:13.350

对我来说，我已经在 wwroot D:\working directory\OnlineExam\wwwroot\excel 中创建了一个名为 excel 的文件夹，并且我试图复制一个名为 excel 的文件，该文件已经作为文件夹名称存在。所需的路径是 D:\working directory\OnlineExam\wwwroot\excel\finance.csv 所以根据我将代码更改如下

```
string copyPath = Path.Combine(_webHostEnvironment.WebRootPath, "excel\\finance");
                    questionExcelUpload.Upload.CopyTo(new FileStream(copyPath, FileMode.Create)); 
```

**基本上检查是否已经存在与您的路径同名的文件夹或文件。**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-17T04:31:48.840

我遇到了同样的问题，并且我承认花了更多的时间，特别是因为我能够将文件写入同一个文件夹。

只有在测试了十几个其他东西之后，我才意识到我的“路径”变量只有目录，没有文件名！糟糕，糟糕的错误信息！

前：

```
string path = Server.MapPath("~/App_Data/SpecialFolder"); 
```

后：

```
string path = Path.Combine(
      Server.MapPath("~/App_Data/SpecialFolder"),
      filename); //NOTE: will cause Access Denied if filename is missing or empty! 
```

原始错误也可能不是由于拒绝访问，而是因为选择的“文件名”是一个空字符串。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-06-17T23:19:55.543

我终于找到了 2019 年的答案。您需要将“IIS APPPOOL\DefaultAppPool”添加到对要修改的目录具有安全权限的用户列表中。确保他们拥有完整的权利。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-08-24T10:23:38.940

我创建了我的 inet 文件夹的副本，以复制该站点。它显示“拒绝访问 .../App_Data/viewstate/1/6/6/0 ...”。检查时显示 app_data 文件夹添加了 IIS_IUSER 但未检查修改或写入访问权限。只需选中这些框，实例就会开始运行。

# ios - ios opengl es 2.0 2D+3D组合

> ID：10255803
> 
> 赞同：0
> 
> 时间：2012-04-21T02:59:27.207
> 
> 标签：ios, opengl-es, opengl-es-2.0

我试图在 OpenGL ES“2.0”中结合 2D 和 3D，尽管这里有很多关于 openGL es 1.0 的问题和一些关于 2.0 的问题，但我在试图弄清楚这一点时遇到了麻烦。因此，对于 2D，我将退出本教程：[http ://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and -glkit-part-1](http://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and-glkit-part-1)对于 3D，我使用现有的立方体旋转 xcode 模板...

我在第二个 glDrawArray 上得到 EXC_BAD_ACCESS （不知何故，它认为原始缓冲区仍然适用？无论如何要在绘制 2D 纹理之前取消绑定？）使用以下渲染函数出错。如果我禁用这些行，它会起作用： glEnableVertexAttribArray(GLKVertexAttribPosition); glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0)); glEnableVertexAttribArray(GLKVertexAttribNormal); glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12));

这是怎么回事？提前致谢。

[代码]

```
glEnable(GL_DEPTH_TEST);

// glGenVertexArraysOES(1, &_vertexArrayNum);
// glBindVertexArrayOES(_vertexArrayNum);

glGenBuffers(1, &_vertexBufferNum);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBufferNum);
glBufferData(GL_ARRAY_BUFFER, sizeof(gCubeVertexData), gCubeVertexData, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12));

glBindVertexArrayOES(0);

float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 0.1f, 100.0f);

self.effect.transform.projectionMatrix = projectionMatrix;

GLKMatrix4 baseModelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -4.0f);
// baseModelViewMatrix = GLKMatrix4Rotate(baseModelViewMatrix, _rotation, 0.0f, 1.0f, 0.0f);

// Compute the model view matrix for the object rendered with GLKit
// GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, 1.5f);
GLKMatrix4 modelViewMatrix = GLKMatrix4MakeRotation(_rotation, 0, 1, 0);
//modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, _rotation, 1.0f, 1.0f, 1.0f);
modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, modelViewMatrix);

self.effect.transform.modelviewMatrix = modelViewMatrix;

glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glBindVertexArrayOES(_vertexArrayNum);

// Render the object with GLKit
// [self.effect prepareToDraw];

// glDrawArrays(GL_TRIANGLES, 0, 36);

modelViewMatrix = GLKMatrix4MakeScale(2.0f, 2.0f, 2.0f);
projectionMatrix = GLKMatrix4MakeOrtho(0, 480, 0, 320, -1024, 1048);
self.effect.transform.projectionMatrix = projectionMatrix;
self.effect.transform.modelviewMatrix = modelViewMatrix;

[self.effect prepareToDraw];

glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_BLEND);

[self.player render]; 
```

[/代码]

更新：添加 glEnableClientState(GL_VERTEX_ARRAY); 包裹在立方体绘图部分......它消除了错误的访问错误，但是立方体和精灵都没有被绘制（除非我完全注释掉代码部分）......

UPDATE2：所以问题显然是在我调用glDrawArray 来绘制立方体之后（效果很好）......我再次调用glDrawArray，如下所示。但不知何故，它仍在尝试渲染以前的数组？// 1 self.effect.texture2d0.name = self.textureInfo.name; self.effect.texture2d0.enabled = 是；

```
// 2    
[self.effect prepareToDraw];

// 3
glEnableVertexAttribArray(GLKVertexAttribPosition);
glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

// 4
long offset = (long)&_quad;        
glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));

// 5    
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:40:27.757

愚蠢的我。只要我这样做就可以工作：

```
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

清除缓冲区。我一直在寻找 glUnbind 的东西...忘记了 openGL 对内存引用的工作... 2D texutre 现在正在应用于立方体，但我相信这是一个简单的修复:)....大家的帮助> :o

纹理问题已修复:)

# debian - wicd 网络管理器找不到我的 wifi 网络

> ID：10255804
> 
> 赞同：0
> 
> 时间：2012-04-21T02:59:31.673
> 
> 标签：debian, wifimanager

这就是问题所在，在我的 debian 机器下工作的 wicd 网络管理器找不到我的 wifi 网络 SSID，它可以通过命令“iwlist wlan0 扫描”找到。有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:40:45.570

确保将 wicd 配置为具有“wlan0”（或任何您的 wlan 设备的名称）作为无线局域网适配器

# android - 如何在字符串数组中添加下划线？

> ID：10255806
> 
> 赞同：0
> 
> 时间：2012-04-21T03:00:13.530
> 
> 标签：android, button, arrays

我在strings.xml 中有一个字符串数组。如何在项目中的字符串下划线？

我在字符串中添加了这样的内容

```
<string-array name="myarray">
 <item> <Data> <![CDATA[ <u>Apple</u> ]]></Data> </item>`
<item> <Data> <![CDATA[ <u>Banana</u> ]]></Data> </item>
<item> <Data> <![CDATA[ <u>Orange</u> ]]></Data> </item> 
```

在这样的java文件中

```
final Button btn1;
    btn1 = (Button) findViewById(R.id.button1);
    btn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            final String q = myString[rgenerator.nextInt(myString.length)];
            ((Button) v).setText(q);

ArrayList<String> title_list = new ArrayList<String>();
String[] myarray_Array = getResources().getStringArray(R.array.myarray);
String categoryAndDesc = null;
for(String cad : myarray_Array) {
  categoryAndDesc = cad;
  title_list.add(categoryAndDesc);
}
CharSequence sequence = Html.fromHtml(categoryAndDesc);

btn1.setText(squence);
btn1.setMovementMethod(LinkMovementMethod.getInstance());
}); 
```

我会做一个按钮，点击它会显示从字符串中提取的随机文本，上面的代码有什么问题，请支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:36:41.737

用这个：

```
String[] myarray_Array = getResources().getStringArray(R.array.array);
String text =myarray_Array[0];
SpannableString content = new SpannableString(text);
content.setSpan(new UnderlineSpan(), 6, 11, 0);
textview.setText(content); 
```

或者您可以使用：

```
String[] myarray_Array = getResources().getStringArray(R.array.array);
String text =myarray_Array[0];
textview.setText(Html.fromHtml(""+"<u>" +text+ "</u>)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:36:06.253

```
<string-array name="description">
     <item> Check this &lt;u&gt;Redirect to Next Activity&lt;/u&gt; </item>
</string-array> 
```

在代码中，您可以将其用作....

```
String[] myarray_Array = getResources().getStringArray(R.array.array);
String text =myarray_Array[0];
myTextView.setText(Html.fromHtml(text)); 
```

您可以尝试上述解决方案作为替代方案...

# drupal - Drupal 6：将 webform 添加到节点或嵌入到节点中？

> ID：10255810
> 
> 赞同：1
> 
> 时间：2012-04-21T03:00:32.920
> 
> 标签：drupal, drupal-6

我一直在使用 webform 模块，但现在我需要一个易于站长使用的解决方案，所以没有 php.ini 文件。

也许，当他们创建一个节点时，他们可以添加一个 web 表单，而不必进入模板文件来添加一个块或其他东西。

只是在寻找一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:38:53.723

Webform 本身提供了一个节点，如果您想自定义外观、启用开发、主题开发人员模块并获取 tpl 文件的正确名称并自定义。

如果你只想要表单，那么使用 drupal_get_form('webform_id'); 这将为您的表单返回完整的 html。

# java - 来自文件的矩阵

> ID：10255814
> 
> 赞同：0
> 
> 时间：2012-04-21T03:01:43.423
> 
> 标签：java

我正在尝试从文本文件创建一个矩阵。问题是，当缓冲读取器函数 readline() 完成解析文件的第一行时，它会进入第二行，但它会将其读取为空，而事实并非如此。

```
void covar()
    {
        double [][]covar=new double[10][5];
        int i=0;
        int j=0;
        try
        {
            FileInputStream fstream = new FileInputStream("class 1\\feature_vector.txt");
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String input;

            while((input=br.readLine())!= null)
            {               
                String [] temp=input.split(",");
                //System.out.println(input.split(",").length);
                covar[i][j]= new Double(temp[0]);
                covar[i+1][j]=new Double(temp[1]);
                covar[i+2][j]=new Double(temp[2]);
                covar[i+3][j]=new Double(temp[3]);
                covar[i+4][j]=new Double(temp[4]);
                //i=0;
                j++;
            }

            in.close();
        }
        catch(Exception e)

        {
            e.printStackTrace();

        } 
```

以上是代码。文件名是完美的，流的东西没有任何问题。你们能帮我解决这个问题吗。

这是文件的内容：

```
0.75,321.0,0.22429906,0.97507787,1.966202512778112
0.33333334,135.0,-0.014814815,1.0,5.323770568766052
0.64285713,311.0,0.025723472,1.0,4.764298570227433
0.6,188.0,0.03723404,1.0,4.7349608150168105
0.25,189.0,0.16931216,0.98941797,7.15681209803803
0.71428573,194.0,-0.26804122,0.96391755,5.1654456838422425
0.6,173.0,0.028901733,1.0,6.54275787030257
0.2857143,257.0,0.031128405,1.0,6.095356508899233
0.23076923,197.0,-0.04568528,1.0,3.784908227189768
0.18181819,231.0,0.17316018,0.987013,5.956322938602553 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:10:04.467

有两件事显然是错误的：

*   您不需要 variable `i`，因为其中一个维度是固定的，并且您“展开”循环五次
*   你交换了索引：`j`应该先去，那是从`0`变为的那个`9`。

例如：

```
String [] temp=input.split(",");
covar[j][0] = new Double(temp[0]);
covar[j][1] =new Double(temp[1]);
covar[j][2] =new Double(temp[2]);
covar[j][3] =new Double(temp[3]);
covar[j][4] =new Double(temp[4]); 
```

您可以放回循环以缩短代码：

```
String [] temp=input.split(",");
for (int i = 0 ; i != 5 ; i++) {
    covar[j][i] = new Double(temp[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:10:49.437

看起来您为矩阵使用了错误的索引，我认为应该是这样的：

```
int i = 0;
while((input=br.readLine())!= null) {               
    String [] temp=input.split(",");
    //System.out.println(input.split(",").length);
    covar[i][0]= new Double(temp[0]);
    covar[i][1]=new Double(temp[1]);
    covar[i][2]=new Double(temp[2]);
    covar[i][3]=new Double(temp[3]);
    covar[i][4]=new Double(temp[4]);
    ++i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:52:46.157

您的文件可能有一些奇怪的行终止符，使读者认为有多余的行。

您可以尝试让您的代码跳过空白行：

```
while((input=br.readLine())!= null) {
    if( input.length() > 0 ){
        String [] temp=input.split(",");
        for (int i = 0 ; i != 5 ; i++) {
            covar[j][i] = new Double(temp[i]);
        }
    }
    ++j;
} 
```

# linux - ELF 库文件中的多功能符号

> ID：10255817
> 
> 赞同：0
> 
> 时间：2012-04-21T03:02:09.220
> 
> 标签：linux, elf

当我在 libmpich.a 中转储符号时，我得到了这个：

```
$ nm /usr/MPICH-install/lib/libmpich.a  | grep PMPI_File_open
00000000 T PMPI_File_open
     U PMPI_File_open 
```

谁能解释一下，thx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:39:40.103

> 谁能解释一下

`libmpich.a`包含至少两个目标文件。其中之一定义了函数 ( `T`)。另一个引用它（`U`）。

你可以通过运行看到这一点：

```
nm -A /usr/MPICH-install/lib/libmpich.a  | grep PMPI_File_open 
```

# python - 复制/深复制和变量范围

> ID：10255818
> 
> 赞同：0
> 
> 时间：2012-04-21T03:02:11.170
> 
> 标签：python

我在使用 copy.copy() 和 copy.deepcopy() 以及 Python 的范围时遇到问题。我调用一个函数，一个字典作为参数传递。字典复制本地字典，但字典不保留复制的值。

```
def foo (A, B):
    localDict = {}
    localDict['name'] = "Simon"
    localDict['age'] = 55
    localDict['timestamp'] = "2011-05-13 15:13:22"
    localDict['phone'] = {'work':'555-123-1234', 'home':'555-771-2190', 'mobile':'213-601-9100'}

    A = copy.deepcopy(localDict)

    B['me'] = 'John Doe'
    return

def qua (A, B):
    print "qua(A): ", A
    print "qua(B): ", B

    return

# *** MAIN ***
# 
# Test
#
A = {}
B = {}

print "initial A: ", A
print "initial B: ", B

foo (A, B)

print "after foo(A): ", A
print "after foo(B): ", B

qua (A, B) 
```

copy.deepcopy 有效，并且在函数“foo”中，dict A 具有 localDict 的内容。但是在“foo”的范围之外，dict A 是空的。同时，在分配了键和值后，dict B 保留了从函数 'foo' 出来后的值。

如何维护 copy.deepcopy() 在函数“foo”之外复制的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:21:30.387

想一想：

```
>>> def foo(d):
...   d = {1: 2}
... 
>>> d = {3: 4}
>>> d
{3: 4}
>>> foo(d)
>>> d
{3: 4}
>>> 
```

在里面`foo`，`d = {1: 2}`将一些对象绑定到名称`d`。这个名字是本地的，它不会修改`d`用来指向的对象。另一方面：

```
>>> def bar(d):
...   d[1] = 2
... 
>>> bar(d)
>>> d
{1: 2, 3: 4}
>>> 
```

因此，这与您使用（深度）复制无关，这只是 Python 中“变量”的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:25:53.813

您看到的行为与 无关`deepcopy()`，您正在将名称重新分配给新值，除非您使用关键字`A`，否则该分配不会继续。`global`更改为`B`持久的原因是您正在修改一个可变变量，这里有两个选项可以让您获得所需的行为：

*   而不是使用`localDict`，只需修改`A`：

    ```
    def foo(A, B):
        A['name'] = "Simon"
        A['age'] = 55
        A['timestamp'] = "2011-05-13 15:13:22"
        A['phone'] = {'work':'555-123-1234', 'home':'555-771-2190', 'mobile':'213-601-9100'}

        B['me'] = 'John Doe'
        return 
    ```

*   使用`A.update(copy.deepcopy(localDict))`代替`A = copy.deepcopy(localDict)`：

    ```
    def foo(A, B):
        localDict = {}
        localDict['name'] = "Simon"
        localDict['age'] = 55
        localDict['timestamp'] = "2011-05-13 15:13:22"
        localDict['phone'] = {'work':'555-123-1234', 'home':'555-771-2190', 'mobile':'213-601-9100'}

        A.update(copy.deepcopy(localDict))

        B['me'] = 'John Doe'
        return 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:21:18.253

发生的事情是，在 foo() 内部，您创建了 B 的副本并将其分配给 A，通过将新对象重新分配给相同的名称来隐藏您作为参数发送的空 dict。现在在函数内部你有一个名为 A 的新字典，在全局范围内与外部的 A 完全无关，并且当函数结束时它会被垃圾收集，所以实际上什么也没发生，只有添加到 B 的“me”键。

如果不是：

A = copy.deepcopy(localDict)

你做这样的事情，它会像你期望的那样工作：

```
C = copy.deepcopy(localDict)

A.update(C) 
```

但似乎你真正想要的与复制模块无关，是这样的：

```
def foo (A, B):
    A['name'] = "Simon"
    A['age'] = 55
    A['timestamp'] = "2011-05-13 15:13:22"
    A['phone'] = {'work':'555-123-1234', 'home':'555-771-2190', 'mobile':'213-601-9100'}

    B['me'] = 'John Doe' 
```

# c# - 如何在 C# 中使用 tcp 确定数据包接收是第一个数据包的一部分

> ID：10255819
> 
> 赞同：1
> 
> 时间：2012-04-21T03:02:35.527
> 
> 标签：c#, sockets

我使用阻塞套接字编写套接字应用程序并使用多线程..我的问题是我想接收两个大数据包..我们知道 tcp 必须将大数据拆分成多个数据包..这个场景：

1.  我将 6 mb 文本文件和 tcp 拆分数据包发送到 2 个单独的数据包中
2.  同时我发送 26 mb 视频文件和 tcp 也将数据包分成 2 个单独的数据包
3.  在我的应用程序中，我收到了文本文件的第一部分，比如说 3 mb of 6 mb
4.  然后我收到视频的第一部分，比如说 26 mb 的 13 mb ..

问题是我怎么知道文本文件的第一个数据包和视频文件的第一个数据包是不同的数据，应该以不同的方式处理..（可能不同的缓冲区？？）

对不起，我的英语不好..

提前致谢..

这是我的代码的一部分

ns = client.GetStream();

```
 while (isListen == true && client.Connected)
        {
                while (!ns.DataAvailable)
                {
                    try
                    {
                        Thread.Sleep(1);
                    }
                    catch (Exception ex)
                    {
                    }
                }

                data = new byte[client.ReceiveBufferSize];
                //client.Client.Receive(data);

                int indx = ns.Read(data, 0, data.Length);

                string message = Encoding.ASCII.GetString(data, 0, indx);

                if (message == GetEnumDescription(TypeData.Disconnect))
                {
                    isListen = false;
                    server.ClientKeluar = objClient;
                    if (ClientDisconnected != null)
                    {
                        ClientDisconnected(objClient);
                    }
                    thisThread.Abort();
                    Server.kumpulanThread.Remove(thisThread);
                    Server._serverConnections.Remove(this);
                    client.Close();
                }
                else if (message.Contains(GetEnumDescription(TypeData.GetFile)))
                {
                    //jalankan proses pengambilan data
                }
                else if (message.Contains(GetEnumDescription(TypeData.ByteLength)))
                {
                    string length = message.Substring(6, message.Length - 6);
                    int len = int.Parse(length);
                    expectedLength = client.ReceiveBufferSize = len;
                    data = new byte[len];
                }
                else if (message.Contains(GetEnumDescription(TypeData.Image)))
                {
                    typeData = "Image";
                    dat1 = new byte[client.ReceiveBufferSize];
                    index = 0;

                }
                else if (message.Contains(GetEnumDescription(TypeData.Video)))
                {
                    typeData = "Video";
                    dat2 = new byte[client.ReceiveBufferSize];
                    index = 0;
                }
                else
                {
                    if (typeData == "Image")
                    {
                        expectedLength = expectedLength - message.Length;
                        if (expectedLength == 0)
                        {
                            Array.Copy(data, 0, dat1, index, message.Length);
                            if (ImageDelivered != null)
                            {
                                ImageDelivered(dat1);
                            }
                        }
                        else
                        {
                            Array.Copy(data, 0, dat1, index, message.Length);
                            index = message.Length;
                        }
                    }
                    else if (typeData == "Video")
                    {
                        expectedLength = expectedLength - message.Length;
                        if (expectedLength == 0)
                        {
                            Array.Copy(data, 0, dat2, index, message.Length);
                            if (VideoDelivered != null)
                            {
                                VideoDelivered(dat2);
                            }
                        }
                        else
                        {
                            Array.Copy(data, 0, dat2, index, message.Length);
                            index = message.Length;
                        }
                    }
                    else
                    {
                        expectedLength = expectedLength - message.Length;
                        if (expectedLength == 0)
                        {
                            dataToWrite = dataToWrite + message;
                            string text = dataToWrite;
                            if (MessageDelivered != null)
                            {
                                MessageDelivered(text);
                            }
                            dataToWrite = "";
                        }
                        else
                        {
                            dataToWrite += message;
                        }
                    }
                }
        } 
```

任何人都可以提供示例代码，以便我可以得到解决这个问题的灵感吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:05:48.157

TCP 协议负责制作文件段并随后加入它们。您将收到完整的数据。

# php - 在 OAuth 流程中重定向之前设置的 Session 变量如何在用户返回后保持比较？

> ID：10255822
> 
> 赞同：0
> 
> 时间：2012-04-21T03:03:56.133
> 
> 标签：php, session, facebook-graph-api, oauth

我正在为我正在处理的项目设置各种身份验证方法，Google 和 Facebook 使用的通用 OAuth 2.0 框架看起来非常棒。阅读[Facebook 给出的例子](http://developers.facebook.com/docs/authentication/server-side/)，我偶然发现了一些对我来说似乎很奇怪的东西。

如果您查看该 facebook 页面的底部，您可以看到 PHP 中的示例。在他们的过程中，他们首先将一个随机字符串设置为 $_SESSION['state']，然后将用户重定向到 facebook 身份验证页面，然后将用户发送回原始页面，在那里他们*将状态字符串与假定存储的内容进行比较在会话变量中。*也许我在这里遗漏了一些东西，但是如果用户离开您的网站，您不会丢失所有会话数据吗？这是如何运作的？即使您离开网站，您的会话数据如何维护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:24:05.680

**当用户离开您的站点时，您不会丢失会话数据**。

因此，我们`state`在用户从 facebook 重定向回我们的网站后检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:06:39.827

会话数据会一直保留到您关闭浏览器或从应用程序中注销。会话状态可以保存在服务器或浏览器中的 cookie 中。无论哪种方式，一旦 facebook 重定向回您的站点，您就可以使用会话数据。

# actionscript-3 - 为什么我得到参数 hitTestObject must be non-null 错误？

> ID：10255827
> 
> 赞同：0
> 
> 时间：2012-04-21T03:04:26.143
> 
> 标签：actionscript-3, flash

我正在使用 Actionscript3 和 Adob​​e Flash CS5.5 创建我的第一个 Flash 游戏。游戏的概念就是你在宇宙飞船里，你试图避开小行星。你避开小行星的时间越长，你得到的分数就越多。我知道这不是很原始。今天突然出现这个错误：

```
TypeError: Error #2007: Parameter hitTestObject must be non-null. 
```

这个错误正在做的是，当宇宙飞船撞击小行星时，什么也没有发生。宇宙飞船刚刚飞过。

我不知道如何解决这个问题。这是我的代码：

```
public class AvoiderGame extends MovieClip
{   
    public var army:Array;
    public var gameTimer:Timer;
    public var avatar:Avatar;

    public function AvoiderGame()
    {
        army=new Array();

        avatar=new Avatar();
        addChild( avatar );
        avatar.x=mouseX;
        avatar.y=mouseY;

        gameTimer= new Timer (25);
        gameTimer.addEventListener(TimerEvent.TIMER, onTick);
        gameTimer.start();

    }
    public function onTick(timerEvent:TimerEvent):void
    {
        if (Math.random() < 0.1)
        {
            var randomX:Number = Math.random() * 400;
            var newEnemy=new Enemy(randomX,-15);
            army.push( newEnemy );
            addChild( newEnemy );
        }

            avatar.x=mouseX;
            avatar.y=mouseY;
            for each ( var enemy:Enemy in army ) 

            enemy.moveDownABit();
        {
            if (avatar.hitTestObject( enemy ))
            {
                gameTimer.stop();
                dispatchEvent( new AvatarEvent( AvatarEvent.DEAD ) );
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:17:07.933

看起来你的括号搞砸了。for each 只做`enemy.moveDownABit()`一行。在 for 循环开始后将您的括号移到右边。

使用现在的括号，敌人超出了范围，这就是为什么它是 Null ，这就是错误告诉你的。

# joomla - 致命的 utf8_strpos 错误

> ID：10255831
> 
> 赞同：0
> 
> 时间：2012-04-21T03:05:26.693
> 
> 标签：joomla, joomla1.7

我在我的 Joomla 2.5 网站上收到以下致命错误：致命错误：utf8_strpos: Offset must be an integer in /path/to/file/libraries/phputf8/native/core.php on line 66\. 我最近将我的网站移至一个新主机（专用的 Rochen Hosting 服务器），这就是错误开始出现的时候。致命错误从未出现在旧的托管服务提供商上。当网站加载时，我也间歇性地收到一个空白的白色 index.php 页面，但所有其他页面加载都没有问题。我不确定这个问题是否与致命错误有关。

对此问题的任何帮助将不胜感激。

谢谢你。

Mike Joomla 2.5.4 PHP 5.3.10 MySQL 5.1.61 Apache 2.2.22 自定义 Joomla 模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:54:36.940

您当前的 PHP 版本是否与该库兼容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T16:08:48.593

这是因为没有安装包 php-mbstring。`sudo yum install php55-mbstring`那就试试吧`service httpd restart`。

# python - 编译代码时出错？

> ID：10255832
> 
> 赞同：0
> 
> 时间：2012-04-21T03:05:46.823
> 
> 标签：python, gcc, compilation, linker, g++

我在安装 python twisted 包时遇到了错误。

```
Downloading http://pypi.python.org/packages/source/T/Twisted/Twisted-12.0.0.tar.bz2#md5=cf49a8676c21c50faf1b42b528049471
Processing Twisted-12.0.0.tar.bz2
Running Twisted-12.0.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-hEuJVt/Twisted-12.0.0/egg-dist-tmp-kPGrsY
/usr/bin/ld: crtbeginS.o: No such file: No such file or directory
collect2: ld returned 1 exit status
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

当我编译其他 c++ 程序时，这个错误也发生了。有没有人遇到过同样的问题？我用谷歌搜索了很多，但没有发现对我有用。

# .net - 如何在方法中使用 List？

> ID：10255849
> 
> 赞同：0
> 
> 时间：2012-04-21T03:08:37.597
> 
> 标签：.net, list, methods, this

这是一个方法内的 List<>

```
public void MenuList()
{
    List<string> flavors = new List<string>();
    flavors.Add("Angus Steakhouse");
    flavors.Add("Belly Buster");
    flavors.Add("Pizza Bianca");
} 
```

现在，我提出了一个新方法

```
public int GetSizePrices(int num)
{
   this.MenuList ???    
} 
```

如何在 GetSizePrices 方法中使用风味对象？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:10:49.687

我想你正在寻找类似的东西？：

```
public Class SomeClass
{
  public IEnumerable<string> MenuList()
  {
    List<string> flavors = new List<string>();
    flavors.Add("Angus Steakhouse");
    flavors.Add("Belly Buster");
    flavors.Add("Pizza Bianca");
    return flavors;
  }

  public int GetSizePrices(int num)
  {
   // No idea what to do with num
   return this.MenuList().Count();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:31:57.370

显然有许多不同的方法可以实现这一点，并且将基于您的设计要求。

现在让我们假设您是 C# 新手，并且您可能会考虑这两种简单的方法来帮助您开始您的旅程（我故意省略了惯用的 C# 以尽可能熟悉您现有的代码）。

**选项 1 - 作为参数传入：**

```
public List<string> BuildMenuList()
{
    List<string> flavors = new List<string>();
    flavors.Add("Angus Steakhouse");
    flavors.Add("Belly Buster");
    flavors.Add("Pizza Bianca");

    return flavors;
}

public int GetSizePrices(int num, List<string> menuList)
{
   // access to menuList
   var cnt = menuList.Count();
} 
```

**选项 2 - 使其可用作财产**

```
public class Menu
{
    // A public property that is accessible in this class and from the outside
    public List<string> MenuList { get; set;}

    public Menu()
    {
        // Populate the property in the constructor of the class
        MenuList = new List<string>();
        MenuList.Add("Angus Steakhouse");
        MenuList.Add("Belly Buster");
        MenuList.Add("Pizza Bianca");
    }

    public int GetSizePrices(int num)
    {
        // your implementation details here...
        return MenuList.Count();
    }
} 
```

希望能帮助到你。

# c# - 如何在 windows phone7 中创建和使用我自己的 url(svc) 推送通知？

> ID：10255851
> 
> 赞同：0
> 
> 时间：2012-04-21T03:08:59.490
> 
> 标签：c#, windows-phone-7

嗨，我是 Windows Phone 推送通知服务的新手。

我的问题是

我应该写一个 wcf 服务

通过使用这个 wcf 服务 url，我需要使用一个 Web 应用程序推送通知

最后在 Windows 手机上，我需要显示发布到该 svc url 的所有通知。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:34:48.307

[我刚刚通过阅读和实现本教程http://create.msdn.com/en-US/education/quickstarts/push_notifications](http://create.msdn.com/en-US/education/quickstarts/push_notifications)实现了您想要实现的功能，但是在此示例中，它仅实现了一个发送推送通知、祝酒词的服务并且平铺更新要清楚，对于订阅的每个人，我都对其进行了修改以发送给我想要的用户......

我希望你觉得它有用 :) 它还展示了 Azure 和 WP7 上的实现......

# regex - 所有非当前站点的正则表达式

> ID：10255853
> 
> 赞同：0
> 
> 时间：2012-04-21T03:09:10.457
> 
> 标签：regex

我正在尝试构建一个正则表达式，以便每个链接都不是`www.example.com`链接到新窗口中的链接。我认为这会给我所有与**它**相关的东西。我怎样才能得到所有没有的东西？

```
(http:\/\/)?(www\.)?example\.(com|net|gov|org) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:30:10.827

`(?!(http:\/\/)?(www\.)example\.(com|net|gov|org))(http:\/\/)?(www\.).*\.(com|net|gov|org)`

[http://regexr.com?30nfp](http://regexr.com?30nfp)

那样有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:14:25.783

为什么不添加：

```
<base target="_blank" /> 
```

到您的页面，然后使用您必须添加`target="_self"`到匹配链接的正则表达式？

# javascript - 使用 qTip 工具提示使用 AJAX 加载数据。$(this) 不是我期望的那样

> ID：10255854
> 
> 赞同：0
> 
> 时间：2012-04-21T03:09:32.480
> 
> 标签：javascript, jquery, qtip

我有许多图像的网格，每个图像都有一个 CSS 类设置为它的唯一 ID。

使用此 javascript 代码，我想要求我的服务器后端为所述元素构建适当的 HTML 摘要并将其返回。

```
$('.tier-items a img').qtip({
    content: {
        text: 'Loading...', // The text to use whilst the AJAX request is loading
        ajax: {
            url: '/Items/GetToolTip/' + $(this).attr("class"), //I assumed that $(this) would contain the element I moused over.
            type: 'GET', // POST or GET
            data: {} // Data to pass along with your request
        }
    },
    style: {
        classes: 'ui-tooltip-youtube ui-tooltip-shadow'
    },
    position: {
        my: 'bottom center',
        at: 'top center',
        effect: function (api, pos, viewport) {
            // "this" refers to the tooltip
            $(this).animate(pos, {
                duration: 600,
                easing: 'linear',
                queue: false // Set this to false so it doesn't interfere with the show/hide animations
            });
        }
    }
}); 
```

但是，在这种情况下，`$(this)`似乎不包含已被鼠标悬停以调用 qTip 的元素。

我需要调用一个像这样的 url：

```
/Items/GetToolTip/23 
```

相反，我得到：

```
/Items/GetToolTip/undefined?_=1334977600119 
```

**有什么方法可以获取调用 QTip 的元素吗？**

* * *

试过这个，仍然没有骰子：

```
itemHoverId = 1;

//Construct the id, on mouseenter and use that instead of $(this)
$('.tier-items a img').mouseenter(function () {
    itemHoverId = $(this).attr("class");
    alert(itemHoverId);
});

$('.tier-items a img').qtip({
    content: {
        text: 'Loading...', // The text to use whilst the AJAX request is loading
        ajax: {
            url: '/Items/GetToolTip/' + itemHoverId, //I assumed that $(this) would contain the element I moused over.
            type: 'GET', // POST or GET
            data: {} // Data to pass along with your request
        }
    }, 
```

结果调用是：

```
/Items/GetToolTip/1?_=1334978818620 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:26:30.660

问题是`this`指`this`的是调用初始化方法的时间而不是您的图像（即可能您的文档已准备好）如果您需要每个 img 的单独 url，您可以单独创建一个 qtip 小部件

```
$('.tier-items a img').each(function() { $(this).qtip({
content: {
    text: 'Loading...', // The text to use whilst the AJAX request is loading
    ajax: {
        url: '/Items/GetToolTip/' + $(this).attr("class"), //I assumed that $(this) would contain the element I moused over.
        type: 'GET', // POST or GET
        data: {} // Data to pass along with your request
    }
}, .... 
```

# c# - 您可以在收益返回时访问 IEnumerable 吗？

> ID：10255860
> 
> 赞同：6
> 
> 时间：2012-04-21T03:11:45.053
> 
> 标签：c#, ienumerable, yield-return

我下面的代码`number`通过创建一个素数列表并检查下一个潜在素数是否可以被列表中的任何素数整除来找到下面的所有素数。

我正在努力学习 的来龙去脉`yield return`。现在我有一个`List<int> primes`我在函数内部使用的。但我通过返回相同的数据`yield return`。所以我的问题是

> 我可以在创建 IEnumerable< int > 时从函数内部访问它吗？所以我可以完全删除 List< int > 素数。

```
/// <summary>
/// Finds all primes below <paramref name="number"/>
/// </summary>
/// <param name="number">The number to stop at</param>
/// <returns>All primes below <paramref name="number"/></returns>
private static IEnumerable<long> PrimeNumbers(long number)
{
    yield return 2;
    List<long> primes = new List<long>(2);          

    for(long num = 3; num < number; num += 2)
    {

        //if any prime lower then num divides evenly into num, it isn't a prime
        //what I'm doing now
        if(!primes.TakeWhile(x => x < num).Any(x => num % x == 0))
        {
            primes.Add(num);
            yield return num;
        }

        //made-up syntax for what I'd like to do
        if(!this.IEnumerable<long>
                .TakeWhile(x => x < num).Any(x => num % x == 0))
        {
            yield return num;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T03:27:30.620

不，你不能那样做。编译器构建了一个状态机来实现`yield return`，并且通过您的可枚举枚举的调用代码与您的代码一样是其工作的一部分。编译器构建一个隐藏对象来存储代码的当前状态，包括它的调用堆栈和局部变量，并在调用者调用时调用方法的不同部分`Current`和`MoveNext`. 在另一个枚举正在进行时尝试从头开始枚举您的对象会弄乱正在进行的枚举，这将是不好的。

在这种特殊情况下，您也不希望它发生： 的实现`yield return`不存储您生成的值，因此即使您可以`IEnumerable`在枚举时访问自己的值，它也会递归地多次回调自身以生成每个新项目，所以即使是中等数量的素数，你也需要很长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T03:27:45.047

整体枚举器不是像这样的容器`List<int> primes`。这是一个寻找素数的“过程”。如果您递归地使用自己的过程来生成要查找下一个素数的素数列表，您将一遍又一遍地递归枚举相同的结果，这将是非常低效的。考虑一下找到最大为 10 的素数会发生什么（如果你真的可以这样做的话）。

```
yield return 2
num = 3
IEnumerable<long>.TakeWhile(x => x < 3).Any(x => num % x == 0)
    new enumerator
    yield return 2
yield return 3
num = 4
IEnumerable<long>.TakeWhile(x => x < 4).Any(x => num % x == 0)
    new enumerator
    yield return 2
    num = 3
    IEnumerable<long>.TakeWhile(x => x < 3).Any(x => num % x == 0)
        new enumerator
        yield return 2
    yield return 3
num = 5
IEnumerable<long>.TakeWhile(x => x < 5).Any(x => num % x == 0)
    new enumerator
    yield return 2
    num = 3
    IEnumerable<long>.TakeWhile(x => x < 4).Any(x => num % x == 0)
        new enumerator
        yield return 2
        num = 3
        IEnumerable<long>.TakeWhile(x => x < 3).Any(x => num % x == 0)
            new enumerator
            yield return 2
        yield return 3
        num = 4
etc. 
```

这是一个指数级增长的枚举。这类似于天真地通过计算找到斐波那契数`f(n-1) + f(n-2)`。你一遍又一遍地做很多相同的工作，当你达到更高的数字时更是如此。素数的内部列表用作一种缓存，使您的枚举非常有效。

# android - 在布局的最底部设置按钮 - Android 2.2

> ID：10255867
> 
> 赞同：0
> 
> 时间：2012-04-21T03:14:51.157
> 
> 标签：android, android-layout, android-button

我有一个表格布局，其中我在 XML 文件中静态声明了一个按钮。我在程序中动态添加行。我希望将按钮设置在表格布局的最后。我尝试使用 android:layout_gravity="bottom" 这样做，但这没有帮助。

有什么解决办法吗？

这是我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:scrollbars="horizontal|vertical"
android:scrollbarStyle="outsideInset" >
<TableLayout 
    android:id="@+id/table"
android:layout_width="match_parent"
android:layout_height="wrap_content">
    <Button 
        android:id="@+id/back"
        android:layout_gravity="bottom"
    />
</TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:25:03.253

我不相信有一种方法可以重新排序 a 的孩子`ViewGroup`而不删除所有孩子并以适当的顺序阅读它们。如果 a`ListView`代替 a 就足够了`TableLayout`，它有一个`addFooterView()`方法可以实现你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:02:22.460

我不确切知道它是否适合您，但您可以做的是使用 remove 删除您的按钮，然后在添加所有元素后在运行时添加它。

例子：

```
 TableLayout tv = (TableLayout ) findViewbyId(R.id.table_layout_id);
    Button button = (Button) findviewbytid(R.id.button_id); 
```

可能是您需要按钮的布局参数，以便您轻松获得它。

```
 LayoutParams lp = button.getLayoutParams(); 
```

从布局中删除您的按钮。

```
 tv.removeView(button); 
```

在运行时添加所有视图。

再次添加您的按钮。

```
 tv.addView(button, lp); 
```

我没有尝试过这段代码，但我认为它应该可以工作。在某些情况下，您不需要布局参数，因此您也可以忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:46:33.160

将按钮放在表格和滚动视图之外......我的意思是在滚动视图下方

# php - 将php变量作为参数传递给javascript

> ID：10255868
> 
> 赞同：0
> 
> 时间：2012-04-21T03:15:05.237
> 
> 标签：php, javascript, ajax

我正在尝试调用一个 javascript 函数，其中一个参数是从下拉框中获取的变量。如果仅使用“this.value”从当前下拉框中传递值，则此脚本可以正常工作，但是当尝试传递变量时，代码不起作用。当我使用 echo 语句时，该变量已从下拉框中的值正确填充。我认为问题在于实际上将变量传递给 javascript 函数。函数 showSection(q, r) 永远不会被调用，因为 write 语句永远不会执行。任何帮助，将不胜感激。这是我的 php 和 javascript 代码

```
echo "<select name=\"course\" onchange=\"showSection($q, this.value)\">"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:31:18.643

您需要确保插入的值`$q`不会产生 javascript 语法错误。做到这一点的合理方法是[`json_encode`](http://us.php.net/json_encode)使用价值。

之后，您需要确保在该值中对单引号和双引号都进行了转义，以保持 html 正确。[`htmlspecialchars`](http://us.php.net/htmlspecialchars)用于此。在我看来，始终转换单引号和双引号 ( `ENT_QUOTES`) 是最佳选择。

最终结果是（我在这里使用 heredoc 语法，因为我发现它更具可读性）：

```
$escaped = htmlspecialchars(json_encode($q), ENT_QUOTES);
echo <<<HTML
<select name="course" onchange="showSection($escaped, this.value);">
HTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:40:06.613

如果 $q 或 this.value 是字符串值，则必须在引号内传递它。

```
echo "<select name='course' onchange='showSection(\"$q\", \"this.value\")'>"; 
```

# android - 在android MapView中选择带有标线的地图标记？

> ID：10255870
> 
> 赞同：0
> 
> 时间：2012-04-21T03:15:25.683
> 
> 标签：android, android-mapview, markers

我的应用程序要求用户在 MapView 上选择一个位置。我将使用 Google Places API 在地图上放置位置标记。但是，有时用户可能会选择未在 Places API 中列出的位置，例如公园中的喷泉。一种选择是让用户选择通过触摸地图来选择位置，或者为每个活动使用两个不同的地图选择已知位置的地图标记。然而，我认为完美的解决方案是使用一个包含地图标记的 MapView，但也允许用户选择一个没有关联标记的位置。

我的想法是在它自己的叠加层中应用一个标线，尽管滚动和选择按钮进行选择，但它仍保持在 MapView 的中间。

如果标线位于标记上方，例如 Sams Cafe'，则按钮将显示“选择 Sam's Cafe”，如果标线未位于任何地图标记上方，则按钮将显示“选择此位置”。

我无法找到一种方法来验证标线是否在标记上方。由于标记仅限于单个 GeoPoint，因此用户尝试将标线中心与确切的 GeoPoint 匹配将非常困难、令人沮丧且耗时。

最佳做法是检查十字线是否在地图标记图形上方。我认为这将利用投影和界限？

两个问题，如果可能的话，如何做到这一点？或者，是否有更好的用户界面，我忽略了它更容易实现？

谢谢您的考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:50:58.963

如果您使用您所说的方式比任何人都好，但为什么不让任何用户远离任何类型的地理编码。就像用户通过标记选择位置一样，用户会在此基础上确认位置，如果有任何地方则显示地址或显示附近的位置。例如，让用户从标记中选择位置获取多头。和纬度。, 如果用户确认该位置，然后将其放入地理编码并获取位置地址，它肯定会返回一个可能准确或附近的地址，如果用户喜欢它，用户会确认它，简单。如果方法不可行，请通知。

# android - 支持包中的 SearchViewCompat 与 SearchDialog

> ID：10255872
> 
> 赞同：1
> 
> 时间：2012-04-21T03:16:01.337
> 
> 标签：android, compatibility, searchview

`android.support.v4.widget.SearchViewCompat`应该捕获搜索查询，但官方教程建议使用`SearchDialog`：

[http://developer.android.com/training/search/backward-compat.html](http://developer.android.com/training/search/backward-compat.html)

哪种方法更好？我应该`SearchViewCompat`与这样的单独活动一起使用：

[http://developer.android.com/training/search/setup.html#create-sa](http://developer.android.com/training/search/setup.html#create-sa)

# xslt - XSL 按顺序处理属性

> ID：10255877
> 
> 赞同：2
> 
> 时间：2012-04-21T03:17:16.433
> 
> 标签：xslt

我需要以特定顺序处理（具有它们的任何节点的属性）。例如：

```
<test>
    <event 
        era  ="modern"
        year ="1996"
        quarter = "first"
        day = "13"
        month= "January"
        bcad ="ad"
        hour ="18"
        minute = "23"
        >The big game began.</event>
    <happening 
        era  ="modern"
        day = "18"
        bcad ="ad"
        month= "February"
        hour ="19"
        minute = "24"
        >The big game ended.</happening>
    <other>Before time existed.</other>
</test> 
```

这个

```
<xsl:template match="test//*">
    <div>
        <xsl:apply-templates select="@*" />
        <xsl:apply-templates />
    </div>
</xsl:template>

<xsl:template match="@*">
    <span class="{name()}">
        <xsl:value-of select="."/>
    </span>
</xsl:template> 
```

会格式化我需要的东西。也就是说，我会得到

```
<div><span class="era">modern</span>
     <span class="year">1996</span>
     <span class="quarter">first</span>
     <span class="day">13</span>
     <span class="month">January</span>
     <span class="bcad">ad</span>
     <span class="hour">18</span>
     <span class="minute">23</span>The big game began.</div>
<div><span class="era">modern</span>
     <span class="day">18</span>
     <span class="bcad">ad</span>
     <span class="month">February</span>
     <span class="hour">19</span>
     <span class="minute">24</span>The big game ended.</div>
<div>Before time existed.</div> 
```

（虽然没有为了易读性我在这里添加的换行符）。

但是属性的顺序（不一定）是正确的。

为了解决这个问题，我可以更改`<xsl:apply-templates select="@*" />`并`<xsl:call-template name="atts" />`添加一个以所需顺序应用模板的模板，如下所示：

```
<xsl:template match="test//*">
    <div>
        <xsl:call-template name="atts" />
        <xsl:apply-templates />
    </div>
</xsl:template>

<xsl:template name="atts">
    <xsl:apply-templates select="@era" />
    <xsl:apply-templates select="@bcad" />
    <xsl:apply-templates select="@year" />
    <xsl:apply-templates select="@quarter" />
    <xsl:apply-templates select="@month" />
    <xsl:apply-templates select="@day" />
    <xsl:apply-templates select="@hour" />
    <xsl:apply-templates select="@minute" />        
</xsl:template>

<xsl:template match="@*">
    <span class="{name()}">
        <xsl:value-of select="."/>
    </span>
</xsl:template> 
```

这是按指定顺序处理属性的最佳实践方式吗？我一直想知道是否有一种使用键或全局变量的方法。

我需要使用 XSLT 1.0，在实际情况下，有几十个属性，而不仅仅是八个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:38:42.477

例如，与元素相比，属性的顺序在 XML 中并不重要，即 XPath 和 XSLT 可以按任何顺序处理它们。因此，强制给定顺序的唯一方法是以某种方式指定它。一种方法是像上一个代码示例一样显式调用它们。您还可以提取所有属性名称并将它们存储在单独的 XML 文件中，例如

```
<attributes>
  <attribute>era</attribute>
  <attribute>year</attribute>
  <attribute>month</attribute>
  ...
<attributes> 
```

现在您可以使用 document() 函数加载这些元素并遍历所有*属性*元素：

```
<xsl:variable name="attributes" select="document('attributes.xml')//attribute"/>
...
<xsl:template match="*">
  <xsl:variable name="self" select="."/>
  <xsl:for-each select="$attributes">
    <xsl:apply-templates select="$self/@*[name()=current()]"/>
  </xsl:for-each>    
</xsl:template> 
```

# android - 冰淇淋三明治 init.rc 文档

> ID：10255881
> 
> 赞同：6
> 
> 时间：2012-04-21T03:18:50.003
> 
> 标签：android, service, system, android-4.0-ice-cream-sandwich, init

Ice Cream Sandwich 中 init.*.rc 的行为似乎发生了变化。以前，我可以在启动时使用如下条目启动服务：

```
service my_kool_service /system/bin/my_kool_service 
```

我确实找到[了这篇文章](http://groups.google.com/group/rowboat/browse_thread/thread/d28b9bdb8d542087/7c4f659f6c78b4ca?show_docid=7c4f659f6c78b4ca&pli=1)，它暗示了要更改为：

```
service my_kool_service /system/bin/my_kool_service
    class main 
```

那么什么是`class main`，为什么它是必要的？

[该文档](http://www.kandroid.org/online-pdk/guide/bring_up.html)确实讨论了`class`“*选项*”，但没有提供有关默认行为或观察到的更改的详细信息。

当前的 ICS init rc 语言是否正式或以其他方式记录在任何地方？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T09:57:32.357

如前所述[，本自述](https://github.com/aosp-mirror/platform_system_core/blob/master/init/README.md)`init.rc`文件中有记录。service 选项用于对服务进行分组，并分别与命令和一起启动和停止它们。`class``class_start``class_stop`

特别是 classes `core`，`main`并`late_start`在 Android 3.0 及更高版本中用于加密（请参阅“ [Android 3.0 中的加密实现说明](https://source.android.com/security/encryption/full-disk.html)”中的“Android 加密的工作原理”部分）。特别是，引用该文件：

> 核心服务启动后永远不会关闭。输入磁盘密码后关闭主要服务，然后重新启动。直到 /data 被解密和挂载后，late_start 服务才会启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T07:05:41.560

如果在特定类中添加服务，则可以调用 start_class 启动服务。例如，如果您有 10 个在类 test 下的服务，那么通过调用 start_class test，如果它们还没有运行，您可以启动所有 10 个在类 test 下的服务。同样适用于停止所有服务也...

有关 init.rc 语言的更多详细信息，请参阅以下链接 [https://github.com/android/platform_system_core/blob/master/init/readme.txt](https://github.com/android/platform_system_core/blob/master/init/readme.txt)

我希望它会有所帮助.. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T11:24:08.653

**class core** - 总是先启动，在大多数情况下不能在没有严重后果的情况下关闭 **class main** - 负责服务。可以重新启动，但只有在绝对需要 的情况下才可以**延迟启动**- 在整个系统启动并开始对用户可用之前发生。

# drop-down-menu - 向 SlickGrid 添加新行

> ID：10255883
> 
> 赞同：3
> 
> 时间：2012-04-21T03:19:24.663
> 
> 标签：drop-down-menu, slickgrid, newrow

我有一个使用数据视图的 slickgrid。据我所知，直到第一个新行字段的编辑器完成后，才会调用网格的添加新行事件。我正在编辑的字段是一个自定义编辑器，它使用带有自动完成功能的输入框并将所选项目“值”保存到网格源数据中。问题是在触发网格添加新行事件之前不会创建新的“项目”源。我知道有办法解决这个问题，只是想知道解决这个问题的最佳方法是什么。

谢谢。

```
//Add new row event

grid.onAddNewRow.subscribe(function (e, args) {
                       var item = args.item;
                       addnewid = addnewid - 1;
                       item.inventorytransferdetailid = addnewid;                          
                       $.extend(item, args.item);
                       dataView.addItem(item);
                   });

// Custom editor
function Suggest2(args) {
    var $input;
    var defaultValue;
    var scope = this;
    this.init = function () {
        $input = $("<INPUT type=text class='editor-text' />")
        $input.width = args.column.width;
        $input.appendTo(args.container);
        $input.focus();
        $input.bind("keydown.nav", function (e) {
            if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
                e.stopImmediatePropagation();
            }
            else if ($input.val().length > 0) {
                $.ajax({
                    type: "GET",
                    url: "http://localhost:11111/GetProducts/" + $input.val(),
                    dataType: "json",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        $input.autocomplete({
                            source: data,
                            select: function (event, ui) {
                                var v = ui.item.value;
                                var l = ui.item.label;
                                //Set "display" field with label  
                                args.item[args.column.field] = l;
                                this.value = l;
                                //Set "hidden" id field with value
                                args.item["productid"] = v;
                                return false;
                            }
                        });
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            }
        }) 
    }; 
    this.destroy = function () {
        $input.remove();
    }; 

    this.focus = function () {
        $input.focus();
    };

    this.getValue = function () {
        return $input.val();
    };

    this.setValue = function (val) {
        $input.val(val);
    };

    this.loadValue = function (item) {
        defaultValue = item[args.column.field] || "";
        $input.val(defaultValue);
        $input[0].defaultValue = defaultValue;
        $input.select();
    };

    this.serializeValue = function () {
        return $input.val();
    };

    this.applyValue = function (item, state) {
        //item[args.column.field] = state;
    };

    this.isValueChanged = function () {
        return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
    };

    this.validate = function () {
        if (args.column.validator) {
            var validationResults = args.column.validator($input.val());
            if (!validationResults.valid) {
                return validationResults;
            }
        }

        return {
            valid: true,
            msg: null
        };
    };
    this.init();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T11:13:40.990

你可以试试下面的代码。

```
function add_new_row(){
item = {
      "id": (Math.round(Math.random()*-10000))
    };
data_view.insertItem(0, item);
} 
```

然后，用按钮绑定。

```
<button onclick="add_new_row()">Add Row</button> 
```

# apache - apache域重定向未按预期工作

> ID：10255887
> 
> 赞同：0
> 
> 时间：2012-04-21T03:19:36.843
> 
> 标签：apache, redirect

我在 apache conf 中有以下重写规则。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^([^\.]+\.[^\.]+)$
RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L] 
```

[它将http://example.org/?p=18](http://example.org/?p=18)重定向到[http://www.example.org//?p=18](http://www.example.org//?p=18)。它在域名末尾添加//。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:22:32.567

你有一个额外的`/`. 你有两个选择：

1.  您可以避免将其放入目标中：

    ```
    RewriteRule ^(.*)$ http://www.%1$1 [R=301,L] 
    ```

2.  或者您可以避免在匹配部分捕获它：

    ```
    RewriteRule ^/(.*)$ http://www.%1/$1 [R=301,L] 
    ```

# php - 访问当前运行脚本错误日志

> ID：10255890
> 
> 赞同：0
> 
> 时间：2012-04-21T03:20:46.203
> 
> 标签：php, javascript

是否可以捕获站点执行期间发生的所有 PHP 错误，将它们保存到变量中并将它们打印到 javascript 部分进行打印？

IE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:26:22.697

这就是`set_error_handler`.. 的工作示例和完整文档

[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

你还应该看看`set_exception_handler`

[http://php.net/manual/en/function.set-exception-handler.php](http://php.net/manual/en/function.set-exception-handler.php)

例子

```
set_error_handler('my_error_handler');
set_exception_handler('my_exception_handler');

function my_exception_handler($e) {
    exit('Huston! We have a problem: '.$e);
}

function my_error_handler($no,$str,$file,$line) {
    $e = new ErrorException($str,$no,0,$file,$line);
    my_exception_handler($e);     /* Do not throw, simply call error handler with exception object */
} 
```

# php - 用于在任意数量的嵌套自定义标签中匹配 img 标签的正则表达式

> ID：10255891
> 
> 赞同：0
> 
> 时间：2012-04-21T03:20:58.643
> 
> 标签：php, regex, parsing, custom-tags

我正在写一个留言板，允许引用和引用其他用户的链接。留言板允许某些 html 标签，包括`<img>`. 引用消息时，我想找到`<img>`并用缩略图替换图片。这是我当前的代码：

```
<?php
 $pattern = "<quote msgid=\"t,(\d+),(\d+)@(\d+)\" from=\"([A-z0-9_\.-]+)\" posted=\"(\d+)\">(.+)<img src=\"https?:\/\/i\.(minus|imgur)\.com\/([A-z0-9_\.-]+)\.(jpg|gif|png|jpeg)\"( \/)?>";
 $replace = "<div class=\"quoted-message\" msgid=\"t,$1,$2@$3\"><div class=\"message-top\">From: $4 | Posted: $5</div>$6<img src=\"http:\/\/$7.com\/$8s\.$9\" />";
 $encoded = preg_replace($pattern, $replace, $encoded);
?> 
```

该模式本身有效，但我遇到的问题是它不能很好地使用嵌套引号。例如，数据可能如下所示：

```
<quote msgid="t,1234,3456@0" from"user" posted="test">Some words here<quote msgid="t,5635,57456@0" from"user2" posted="test">Some more <b>words</b> here<quote msgid="t,1243532,3452@0" from"user" posted="test">Something else here<img src="linktoimage"/></quote>some words can go here</quote>or here</quote> 
```

我当前的正则表达式将用一个 div 标签替换前 3 个开头引号标签，而不仅仅是匹配最内部的标签。我知道它与 the 有关，`(.+)`但我不知道我还能做些什么来检查先前的数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:27:20.613

正则表达式不太适合您的情况（[这里解释得很奇怪](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)）。你真的应该使用解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:46:04.443

`(?!<quote.*?<quote)(<quote)`

匹配最里面的引号标签。

[http://regexr.com?30ng2](http://regexr.com?30ng2)

# java - 在 Android 设备和桌面之间通过 Socket 或 HTTP 传输文件

> ID：10255892
> 
> 赞同：-2
> 
> 时间：2012-04-21T03:21:16.260
> 
> 标签：java, android, file, sockets, transmission

我有自定义`socket`客户端服务器数据（文件或文本）传输代码。现在，当我传输二进制文件时，一些字节转换为超出范围的字符。所以我以十六进制字符串发送它们。这样可行。但是对于另一个问题，这不是解决方案。这也有性能问题。

我从[Java 代码中获得了帮助 To convert byte to Hexadecimal](https://stackoverflow.com/q/2817752/787399)。

当我从网上下载图像时，也会发生同样的事情。一些字节变成了别的东西。我已经逐字节比较了字节。转换成字符串显示`?`而不是符号。我已经尝试过阅读器和字节数组输入流。我已经尝试了网络上的所有示例。我可能会犯什么错误？

**我的代码将字节保存到文件：**

```
void saveFile(String strFileName){  

 try{  
         URL url = new URL(strImageRoot + strFileName);  
         BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));  
         BufferedWriter bw = new BufferedWriter(new FileWriter(strImageDownloadPath + strFileName));  
         String line = null;  
         while ( (line = reader.readLine()) != null) {  
            bw.write(line);  
         }  
     }catch(FileNotFoundException fnfe){  
        System.out.println("FileNotFoundException occured!!!");  
     }catch(IOException ioe){  
     }catch(Exception e){  
        System.out.println("Exception occured : " + e);  
     }finally{  
        System.out.println("Image downloaded!!!");  
     }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:27:51.027

我在构建 Socket 客户端服务器应用程序时遇到了类似的问题。字节会是一些奇怪的字符，我尝试了各种方法来尝试比较它们。然后我遇到了一个讨论，其中 some1 向我指出我应该使用 datainputstream、dataoutstream 并让它进行字节之间的转换。这对我完全有用。我根本没有碰过字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:15:40.707

使用此代码

```
 File root = android.os.Environment.getExternalStorageDirectory();               

           File dir = new File (root.getAbsolutePath() + "/image");
           if(dir.exists()==false) {
                dir.mkdirs();
           }

           URL url = new URL("http://4.bp.blogspot.com/-zqJs1fVcfeY/TiZM7e-pFqI/AAAAAAAABjo/aKTtTDTCgKU/s1600/Final-Fantasy-X-Night-Sky-881.jpg");
           //URL url = new URL(DownloadUrl);
           //you can write here any link
           File file = new File(dir,"Final-Fantasy-X-Night-Sky-881.jpg");

           long startTime = System.currentTimeMillis();

            //Open a connection to that URL. 
           URLConnection ucon = url.openConnection();

            //* Define InputStreams to read from the URLConnection.

           InputStream is = ucon.getInputStream();
           BufferedInputStream bis = new BufferedInputStream(is);

            //* Read bytes to the Buffer until there is nothing more to read(-1).

           ByteArrayBuffer baf = new ByteArrayBuffer(6000);
           int current = 0;
           while ((current = bis.read()) != -1) {
              baf.append((byte) current);
           }

            //Convert the Bytes read to a String. 
           FileOutputStream fos = new FileOutputStream(file);
           fos.write(baf.toByteArray());
           fos.flush();
           fos.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-13T10:07:24.520

您应该借助此链接：[How to encode decode in base64 in Android](http://androidcodemonkey.blogspot.com/2010/03/how-to-base64-encode-decode-android.html)。

您可以通过编码从文件中获取的字节数组作为字符串发送到`Base64`. 这也减少了传输的数据量。

在接收端，只需使用解码字符串`Base64`并获取字节数组。

然后您可以使用@Deepak Swami 的解决方案将字节保存在文件中。

我最近发现 PHP 服务 API 不知道什么是字节数组。任何 String 都可以同时是字节流，因此 API 要求请求参数中包含 Base64 字符串。请看帖子：

[php中的字符串到字节数组](https://stackoverflow.com/questions/885597/string-to-byte-array-in-php)

[在 URL 中传递 base64 编码的字符串](https://stackoverflow.com/questions/1374753/passing-base64-encoded-strings-in-url)

因此，Base64 非常重要，因为它还允许您在首选项中保存字节数组，并且如果您必须使用序列化通过网络发送文件数据，则可以提高性能。

快乐编码:-)

# type-inference - 找出 Agda 程序中未解决的元数据

> ID：10255895
> 
> 赞同：22
> 
> 时间：2012-04-21T03:21:44.723
> 
> 标签：type-inference, agda, elaboration

找出导致未解决的元数据的最佳方法是什么？有没有办法通过扩展所有可解决的周围通配符将所有未解决的元数据（并且只有未解决的元数据）变成孔？

如果不出意外，将未解决的元数据更改为漏洞是否会使有关未解决的元数据的消息消失？因为那时我想我可以尝试将每个通配符和每个隐式参数都更改为漏洞，直到消息消失，然后找出导致问题的原因...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:52:46.207

一种方法（不一定是最好的）是用显式下划线替换所有隐式参数：

```
f {_} {_} {_} (x {_} {_} {_}) 
```

此答案来自 Agda 邮件列表：[https ://lists.chalmers.se/pipermail/agda/2012/004123.html](https://lists.chalmers.se/pipermail/agda/2012/004123.html)

# php - ob_start(); 回调函数

> ID：10255907
> 
> 赞同：1
> 
> 时间：2012-04-21T03:23:56.133
> 
> 标签：php

通过以下方式使用 ob_start 是否有任何区别（性能或其他）？

选项1：

```
function ob_handle($buffer){/*do something, and return buffer*/}
ob_start('ob_handle'); 
```

选项 2：

```
ob_start(function($buffer){/*do something, and return buffer*/}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:04:29.263

在性能方面几乎没有区别。这只是如何声明回调函数的问题，它不会改变函数的使用或执行方式。如果您想确定，请*对其进行基准测试*。

唯一的区别是，在第一种情况下，您声明了一个全局函数`ob_handle`，您可以从其他地方再次使用它并占用全局名称`ob_handle`。在第二种情况下，您不能再次从其他地方引用匿名函数。

# javascript - Javascript RegEx 恰好是一位数字模式

> ID：10255909
> 
> 赞同：2
> 
> 时间：2012-04-21T03:24:12.457
> 
> 标签：javascript, regex, pattern-matching, match, digit

```
str = "33d4m"; //d for days and h for hours and m for min
patt=/^[1-9]+d/i;
result=patt.test(str);
document.write("Returned value: " +  result); 
```

当且仅当 d 之前有一位数时，我希望结果返回 true，即；剩余不到 10 天或剩余几个小时，就像我希望返回 true 一样

```
str = "23h5m" 
```

如果 d 之前有两位数，则返回 false
如果 h 之前有两位数，则返回 true。
我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T03:49:02.630

你可以试试这个：

```
patt=/^\d{1,2}h|^\dd/i 
```

它的意思是：

> ```
>  Match 1 or 2 digits followed by the literal 'h' 
> OR match a single digit followed by the literal 'd' 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:27:26.367

我认为这样的事情会起作用：

```
patt=/^[1-9][dh]/i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T03:27:36.183

加号表示“至少一个” - 删除它。您可能还想使用`[0-9]`所有*数字*，但这只是猜测。

```
patt=/^[1-9]d/i; 
```

# android - 位图内存泄漏

> ID：10255910
> 
> 赞同：2
> 
> 时间：2012-04-21T03:24:26.957
> 
> 标签：android

因此，在蜂窝之前，Bitmap 对象只是本机堆内存空间的指针（使用 malloc ），我可以调用 .recycle() 清理该本机内存；在蜂窝之后，位图的内存在应用程序堆中分配，这会得到 gc 调用。

我的问题是，我的应用需要支持 2.2+，我该怎么办？检查版本并调用回收？根本不叫回收吗？你对此有何建议。因为我有一个 BitmapCache 保存一些 Bitmap 实例，我不希望它们永远存在于内存中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T03:41:19.387

在任何 android 版本中，无论是 froyo、姜饼还是蜂窝。您必须检查自己的内存管理。是的，从 2.2+ 开始，您可以从 sdcard 调整您的应用程序，但是将位图保存在堆内存中，无论您使用哪个版本，总是会产生问题。如果你想纯粹使用位图，那么你为什么不按照他们的方式，试试这个链接。他们为您提供了许多有效管理位图的方法。按照这个链接： [有效地显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T05:12:23.950

首先，任何android平台版本如：android 2.2，或android 3.0，或高于android 3.0，你不想使用的位图，你也需要调用`bitmap.recycle()`

虽然`android >=3.0`，位图保存在 dalvik 堆中，而不是保存在本机堆中。所以作为java堆，如果你有一些引用来引用对象，对象不能被`gc`系统，并且位图内存可以占用很多内存，如果你不确保对象引用计数器为零，那将是一个大问题.

你说的位图缓存可以保存位图，所以如果你用`WeakReference`or`SoftReference`来保存位图，用`WeakReference.get()`or`SoftReference.get()`来返回位图，`bitmap`引用就在系统的正确控制之下。否则需要自己管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:05:24.690

正如您在[开发人员页面](http://developer.android.com/training/displaying-bitmaps/index.html)上注意到的那样，他们说弱引用是过时的解决方案。从我留下的链接中检查所有位图引用的教程，并尝试使用[缩小](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)（如果可能）、缓存和 AsyncTask，以及[本示例中的延迟位图加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)..

这些东西结合起来将是我很确定的解决方案..

顺便说一句..我目前也在讨论这个主题，因为只是弱引用是可以的，但不是完美的解决方案，我想让我的应用程序在未来版本的 AndroidOS 中保持滞后。

希望它不是太多的链接，但当我们得到它时，它会像一个魅力;）

干杯

# jquery - jquery全局变量不被函数识别

> ID：10255911
> 
> 赞同：1
> 
> 时间：2012-04-21T03:24:28.460
> 
> 标签：jquery, function, global-variables

有关代码，请在此处查看我的小提琴：http: [//jsfiddle.net/6fwbS/5/](http://jsfiddle.net/6fwbS/5/)

单击增加按钮时，我无法更改全局变量 a、b 或 c。即使我已经在任何函数之外声明了它们，但这些函数似乎并不知道这些变量的值。在访问要在函数中使用的全局变量之前，我也遇到过类似的问题。有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:36:08.287

我不确定它*应该*如何工作，但我猜你忘记增加 a. 也许你需要这个：

```
if (a >= imgs)
    a = 0;
else
    a++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:44:29.303

您已经在函数`imgs`内声明了变量`$("#thumb_slider").children().each(function(index, element) {`，因此您`slide_img_left()`无权访问它，因为它已在该函数的本地范围内声明。尝试这个：

[http://jsfiddle.net/6fwbS/14/](http://jsfiddle.net/6fwbS/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:38:05.053

您的变量没有改变，因为您的代码没有改变它们。a 最初设置为 0，然后在 document.ready 中增加 1 (a++)。在那之后永远不会改变。之后 imgs 永远不会改变。所以 b 和 c，因为它们依赖于 a 的值才能改变，所以永远不会改变。你想在这里完成什么？也许你的问题的答案是：什么时候应该改变？

编辑：也许这就是您要对变量进行的操作？[http://jsfiddle.net/6fwbS/16/](http://jsfiddle.net/6fwbS/16/)

# ios - 使用 MVC 的 iOS 游戏，模型是否应该具有 objRect，同时将其 UIViewImage 对象保留在 ViewController 中？

> ID：10255913
> 
> 赞同：1
> 
> 时间：2012-04-21T03:25:00.827
> 
> 标签：ios, cocoa-touch, model-view-controller, uikit

iOS 上的一个游戏就是这样用的：有一个金属球，`ballRect`是 Model 类的一个属性，而对应`ball`的是 a `UIImageView object`，是`ViewController`类的一个属性。

是否可以进行这种设计以使两者`ballRect`都`ball`成为 Model 类的属性？在其他游戏示例中，我只看到`ViewController`该类的 2 个属性：模型对象和计时器对象。而已。我想知道为什么这一次，有额外的属性变成了`ViewController`类，他们应该去 Model 类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:25:57.767

我写了一篇关于 gamasutra 的文章，用于在游戏中应用 MVC 模式。它是用 C++ 编码的，但您可以轻松地将这些概念转移到任何其他语言。

我希望它对你有用。

[http://www.gamasutra.com/blogs/IvicaAracic/20100919/88083/Applying_the_ModelViewController_Pattern.php](http://www.gamasutra.com/blogs/IvicaAracic/20100919/88083/Applying_the_ModelViewController_Pattern.php)

问候， 伊维卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:37:53.633

制作一个包含指向 Ball（模型）的指针并托管显示球精灵的图像视图的 BallView 会更有意义。BallView 应该观察 Ball 的`ballRect`，并且当它发生变化时，更新它的（BallView 的）`frame`以匹配。

这种安排可以让您添加其他类似的关系。例如，如果有不同种类的球，并且一个球可以从一种变为另一种（例如，为了临时加电），BallView 可以观察球并在球发生变化时`kind`改变图像视图。`image``kind`

# grails - 如何在 Grails 的搜索栏上添加自动完成功能？

> ID：10255915
> 
> 赞同：0
> 
> 时间：2012-04-21T03:25:36.433
> 
> 标签：grails, groovy, autocomplete

嗨，任何人都可以提供一些可以帮助我在 grails 应用程序中设置自动完成功能的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:11:15.993

也许这可以帮助你！[使用带有 JQuery 自动完成功能的 Grails](http://jay-chandran.blogspot.mx/2011/09/using-grails-with-jquery-autocomplete.html)

# android - 将 Google Navigation 添加到我的 Android 应用程序

> ID：10255918
> 
> 赞同：0
> 
> 时间：2012-04-21T03:26:00.933
> 
> 标签：android, navigation, userlocation

是否可以将 Google 导航添加到我的 Android 应用程序中。我的想法是在应用程序上有一个按钮，单击该按钮会打开谷歌地图，以便用户可以看到他们在哪里以及如何导航到我选择的本地地图上的某些兴趣点。

或者，是否有任何我可以使用的开源导航，我如何将它用于我的 Android 应用程序以添加用户导航功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:39:31.377

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?daddr=0,0%20(Imaginary%20Place)&dirflg=r"));
if (isAppInstalled("com.google.android.apps.maps")) {
    intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
}
startActivity(intent);

// helper function to check if Maps is installed
private boolean isAppInstalled(String uri) {
    PackageManager pm = getApplicationContext().getPackageManager();
    boolean app_installed = false;
    try {
        pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
        app_installed = true;
    } catch (PackageManager.NameNotFoundException e) {
        app_installed = false;
    }
    return app_installed;
} 
```

你可以在你的点击事件中有代码..

# reflection - 使用嵌入进行反射

> ID：10255926
> 
> 赞同：1
> 
> 时间：2012-04-21T03:27:22.687
> 
> 标签：reflection, go, code-injection

使用匿名方法嵌入时，有没有办法从“父”结构上的方法访问“子”结构的名称。

例如：

```
type Animal struct{}

func (a Animal) SayName() string {
    v := reflect.TypeOf(a)
    return v.Name()
}

type Zebra struct {
    Animal
}

var zebra Zebra
zebraName := zebra.SayName() // "Animal" want "Zebra" 
```

SayName() 方法返回`type.Name()`“父级”的。

我意识到我可以做这样的事情，但是因为这是一个 API，并且会经常被重用。我希望有一个重复性较低的解决方案。

```
type Animal struct{
  Name string
}

func (a Animal) SayName() string {
    return a.Name
}

type Zebra struct {
    Animal
}

zebra := &Zebra{Name:"Zebra"}
zebraName := zebra.SayName() // "Zebra" 
```

关于如何实现这一点的任何想法？这在 Go 中可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:30:41.590

Animal 类型对可能将它们包含为成员的类型一无所知，因此 Animal 方法无法仅根据接收者为您提供此答案。但是这些信息必须来自 Zebra 方法吗？

```
func SayName(a interface{}) string {
    return reflect.TypeOf(a).Name()
} 
```

适用于任何类型，包括斑马。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:09:58.760

我用这种方式来实现后期绑定：

[http://play.golang.org/p/03-rs4bLaV](http://play.golang.org/p/03-rs4bLaV)

这不是那么完美，而是实现这一目标的一种方法。

# c++ - C++ noob 遇到段错误

> ID：10255934
> 
> 赞同：1
> 
> 时间：2012-04-21T03:28:16.397
> 
> 标签：c++, pointers, segmentation-fault

在 C++ 中制作无符号列表的向量。我对指针一无所知，但我认为我需要将向量声明为持有指向列表的指针。

这简直是​​一场灾难。如果它完全编译，我会遇到段错误。

在我得到一个要读取的文件（它应该在第一行）之前，我事先不知道向量会有多大，并且在我读完文件之前我不会知道列表会有多大。

关于如何声明列表向量的任何想法？我想一旦我明白了，我就可以弄清楚其余的（好吧也许不是，但我会更接近）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:32:55.703

*   使用调试器来跟踪崩溃的位置。

*   永远不要制作原始指针的向量；仅当您绝对必须有一个指针向量时才使用智能指针。

*   Vectors 为您进行内存管理和调整大小。

    `vector<list<TYPE> > vecOfLists; //empty`
    `vecOfLists.push_back (some_list); //add new list onto the back`

如果您使用列表代替普通数组，则最好使用向量向量。

# c# - C# 即时通讯

> ID：10255936
> 
> 赞同：-1
> 
> 时间：2012-04-21T03:28:56.557
> 
> 标签：c#, asp.net, web-services

我正在为我的工作创建一个程序，以通过我创建的 Web 服务发送 SMS。

我想让短信回复在每台可能通过互联网的台式计算机上的类似 ICQ 的程序上弹出。

如何将消息从服​​务（或其他）推送到桌面计算机程序？我可以轻松地让程序每两分钟或任何时间向 Web 服务发送 CheckForMsgs() 消息。但这似乎不优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:35:53.827

您可以使用[SignalR](https://github.com/SignalR/SignalR)开发您的应用程序。这里有一些有用的链接。

*   [使用 SignalR 的实时 Web 应用程序](http://ruwandotnet.wordpress.com/2012/03/17/74/)
*   [具有与 SignalR 的实时持久长期运行连接的异步可扩展 Web 应用程序](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

# jquery - 在 jQuery 中，我如何编写一个动态函数来显示和隐藏具有不同 ID 的多个 div？

> ID：10255938
> 
> 赞同：0
> 
> 时间：2012-04-21T03:29:13.227
> 
> 标签：jquery, show-hide, html

我知道这个问题是多余的，但我真的需要专家建议：

我在以下场景中以错误的方式使用 jQuery，并且希望尽可能多地提出建议以生成最有效的代码：

我有一个带有 ID =“#bottomrightbox”的父 div 的网页。这个父“#bottomrightbox” div 包含一系列 div，其 ID 为“#20111”、“#20112”、“#20113”......

目前，我已经为这些 div 中的每一个（即 id 为 #20111 的 div）分配了一个链接（即 id 为 #link20111），单击该链接时会隐藏 #bottomrightbox div 的子项并显示特定的 div。所以我的代码如下所示，简单地响应每个链接的 onclick 函数，然后隐藏父 div 中的所有 div，并显示按名称分配给它的特定 div。我的问题是我有 40 多个带有特定链接的 div，这些链接遵循这种类型的命名顺序，所以我有重复的 jQuery 代码行，应该简化为一个处理这个过程的函数。 **如果有人可以向我展示一种编写 jQuery 函数的简单方法，我将不胜感激，该函数允许我在单击分配给它的链接时显示每个 div。**

我的代码按以下方式工作：

带有 ID #link20111 的链接 -> 单击 -> 隐藏 #bottomrightbox 的子级 -> 显示带有 ID #20111 的 div

带有 ID #link20112 的链接 -> 单击 -> 隐藏 #bottomrightbox 的子级 -> 显示带有 ID #20112 的 div

链接 ID #link20113 -> 单击 -> 隐藏 #bottomrightbox 的子项 -> 显示 ID 为 #20113 的 div

```
<script type="text/javascript">
$(document).ready(function () {

$('#link20111').click(function () {
$('#bottomrightbox').children().hide();
$('#20111').fadeIn(500);

});

$('#link20112').click(function () {
$('#bottomrightbox').children().hide();
$('#20112').fadeIn(500);

});

$('#link20113').click(function () {
$('#bottomrightbox').children().hide();
$('#20113').fadeIn(500);

});

});
</script> 
```

非常感谢所有帮助。

**这是此代码的示例** [/jsfiddle：http://jsfiddle.net/uhnxj/](http://jsfiddle.net/uhnxj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:43:52.630

您可能想使用[正则表达式选择器](http://james.padolsey.com/javascript/regex-selector-for-jquery/)。例如，您的代码可能如下所示：

```
$(':regex(id,link)').click(function() {
    var link_id = $(this).attr('id');
    var id = link_id.replace(/^link/, '');
    $('#bottomrightbox').children().hide();
    $('#' + id).fadeIn(500);
}); 
```

请参阅以下[jsfiddle](http://jsfiddle.net/e7taT/)。但是，我也赞同@SenorAmor 的评论，即您不应该以数字开头 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:46:29.817

在没有看到您的 HTML 的情况下，如果您的 HTML 看起来像（并且已更新）：

```
<div id="buttoncollection">
 <div id="link20111" class="button">button 20111</div>
 <div id="link20112" class="button">button 20112</div>
 <div id="link20113" class="button">button 20113</div>
</div>

<div id="bottomrightbox">
 <div class="link20111">link20111</div>
 <div class="link20112">link20112</div>
 <div class="link20113">link20113</div>
</div>​ 
```

然后你可以很容易地做到：

```
<script type="text/javascript">
$(document).ready(function () {

  $('#bottomrightbox').children().hide();

  $('#buttoncollection .button').click(function (event) {
    $('#bottomrightbox').children().hide();
    $('#bottomrightbox .' + event.target.id).fadeIn(500);
  });
}); 
```

​​​

[JsFiddle 示例](http://jsfiddle.net/fNuFH/)

**更新**

[根据您的评论 JsFiddle 更新了 JsFiddle 示例](http://jsfiddle.net/2DJZt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:28:14.070

不确定您的 HTML，但这会起作用。我还添加了一个警报，您可以取消注释。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<a href="javascript:void(0);" class="someclass" id="20111">20111</a><br />
<a href="javascript:void(0);" class="someclass" id="20112">20112</a><br />
<a href="javascript:void(0);" class="someclass" id="20113">20113</a><br />
<a href="javascript:void(0);" class="someclass" id="20114">20114</a><br />

<div id="bottomrightbox">
<div id="20111">apples</div>
<div id="20112">oranges</div>
<div id="20113">banana</div>
<div id="20114">lemon</div>
</div>

<script type="text/javascript">
$('.someclass').click(function(){
var divid = this.id;
// alert(divid);
$('#bottomrightbox').children().not('#'+divid).hide();
});
</script> 
```

# php - 嵌套对象（来自 DQL 选择的混合结果）

> ID：10255941
> 
> 赞同：0
> 
> 时间：2012-04-21T03:30:06.580
> 
> 标签：php, object, doctrine-orm

我有一个这样的学说2查询：

```
$query = $this -> doctrine -> em -> createQuery ("SELECT a, b FROM ORM\Dynasties2\Maillinks a JOIN a.msgId b"); 
```

它返回[混合结果](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#pure-and-mixed-results)，类似于：

```
ORM\Dynasties2\Maillinks Object 
( 
    [id:ORM\Dynasties2\Millinks:private] => 1 
    [toUser:ORM\Dynasties2\Maillinks:private] => 16 
    [isRead:ORM\Dynasties2\Maillinks:private] => 0 
    [msgId:ORM\Dynasties2\Maillinks:private] => ORM\Dynasties2\Mailmsgs Object 
    ( 
        [id:ORM\Dynasties2\Mailmsgs:private] => 1 
        [msgText:ORM\Dynasties2\Mailmsgs:private] => asdfasdfasdfasdfasdfasdf 
        [fromUser:ORM\Dynasties2\Mailmsgs:private] => 13 
        [timeStamp:ORM\Dynasties2\Mailmsgs:private] => DateTime Object 
        (       
            [date] => 2012-04-20 12:17:29 
            [timezone_type] => 3 
            [timezone] => America/Los_Angeles 
        ) 
        [onTurn:ORM\Dynasties2\Mailmsgs:private] => 1 
        [importance:ORM\Dynasties2\Mailmsgs:private] => 2 
        [msgType:ORM\Dynasties2\Mailmsgs:private] => 1 
    ) 
) 
```

我可以很容易地访问“顶部”的一些数据。
`echo $row -> getToUser();`返回“16”

我试过`echo $row -> msgId-> getMsgText();`了，但又回来了`Fatal error: Cannot access private property ORM\Dynasties2\Maillinks::$msgId`

**如何访问对象中的数据？**

或者：我的查询和结果是否损坏？我需要对我的查询或实体做一些不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:54:36.390

这对你不起作用吗？

```
$row->getMsgId()->getMsgText(); 
```

您应该能够检查实际的实体文件（无论您是否有教义构建它们，或者其他人有）来检查该实体的 getter 和 setter。

# mysql - 如何更改mysql中的时区？

> ID：10255947
> 
> 赞同：1
> 
> 时间：2012-04-21T03:31:13.823
> 
> 标签：mysql

如何更改mysql中的时区？我想将时区更改为 GMT，但我不知道如何。我想更改 my.cnf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:35:53.683

转到`[mysql]`配置文件的部分并在该部分下输入此行

```
default-time-zone = '+00:00' 
```

希望这会帮助你。

# java - ComputeEngine 的 RMI 教程错误

> ID：10255949
> 
> 赞同：3
> 
> 时间：2012-04-21T03:31:53.373
> 
> 标签：java, eclipse, rmi

所以我花了很长时间试图从其他人那里找到答案，这些人对 RMI 教程有问题，但我完全被这个难住了。我正在通过 Eclipse 完成本教程。

我的 ComputeEngine 类。这只是从教程中复制的，所以我认为它没有任何问题。

```
import java.rmi.RMISecurityManager;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;
import compute.Compute;
import compute.Task;

public class ComputeEngine implements Compute {

    public ComputeEngine() {
        super();
    }

    public <T> T executeTask(Task<T> t) {
        return t.execute();
    }

    public static void main(String[] args) {
        if (System.getSecurityManager() == null) {
            System.setSecurityManager(new RMISecurityManager());
        }
        try {
            String name = "Compute";
            Compute engine = new ComputeEngine();
            Compute stub = (Compute) UnicastRemoteObject.exportObject(engine, 0);
            Registry registry = LocateRegistry.getRegistry();
            registry.rebind(name, stub);
            System.out.println("ComputeEngine bound");
        } catch (Exception e) {
            System.err.println("ComputeEngine exception:");
            e.printStackTrace();
        }
    }
} 
```

我在命令行中启动 rmiregistry

```
set classpath=
start rmiregistry 
```

我在 Eclipse 中的 VM 参数是：

```
-Djava.rmi.server.codebase=file:/C:/Users/Kevin/workspace/RMI/bin/
-Djava.rmi.server.hostname=Compute
-Djava.security.policy=server.policy 
```

我在 bin 文件夹中有 compute.jar 文件和 server.policy 文件。我授予了策略文件的所有权限。

```
grant{
    permission java.security.AllPermission;
}; 
```

毕竟，我运行 ComputeEngine 并收到以下错误：

```
ComputeEngine exception:
java.security.AccessControlException: access denied (java.net.SocketPermission          127.0.0.1:1099 connect,resolve)
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkConnect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.<init>(Unknown Source)
at java.net.Socket.<init>(Unknown Source)
at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown Source)
at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown Source)
at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
at sun.rmi.server.UnicastRef.newCall(Unknown Source)
at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
at engine.ComputeEngine.main(ComputeEngine.java:31) 
```

重新绑定似乎有某种问题，但我不明白是什么。当我有策略文件时，我也不理解 AccessControlException。我已经检查以确保 rmiregistry 仍在运行，并且我没有关闭启动后出现的空窗口。

所以，是的，我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:48:56.997

显然您的安全策略文件没有被*发现。*执行程序时，它需要位于当前工作目录中。使用 -Djava.security.debug=access,failure 运行您的程序以查看到底发生了什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-21T06:00:12.053

The exception clearly says that your code base does not have permission to creat sockets/ for network communication. The reason could be with your security policy specification alone. Do not specify the policy file explicitly and allow the JVM to use the default security policy. The default policy specifies the right permissions so you should be fine.

# python - 我如何获得所有喜欢对象列表的朋友？

> ID：10255952
> 
> 赞同：2
> 
> 时间：2012-04-21T03:32:37.067
> 
> 标签：python, sql, django, database-design

我有两个模型：Like 和 Object。如何使用以下模型检索喜欢该对象的相应人群：

```
class Object(models.Model):
    ...

class Like(models.Model):
    user = models.ForeignKey(User)
    object = models.ForeignKey(Object)

friends = [...some list of ids...] 
```

我想到了这两种方法：使用 Object 或使用 Like，但都不起作用。例如：

```
Object.objects.prefetch_related('like_set').filter(like__user__in=friends) 
```

这会为每个对象获取相应的喜欢集，但每个 like_set 将包含*所有*喜欢而不是我朋友的喜欢。

另一种方法是通过Like：

```
Like.objects.select_related('object').filter(user__in=friends) \
                                     .order_by('-user_id').distinct('object') 
```

但我相信这种方式只会让我每个对象都喜欢一个。那么有没有办法让我的朋友对每个对象都喜欢呢？

编辑：为了澄清，我需要与每个 Object 对象对应的 User 对象列表，因为我希望能够打印出它们的名称。我还想尽量减少查询的数量，并愿意使用原始 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:11:18.403

*更新*

```
objects = {}
for obj in Like.objects.filter(user__in=friends):
    objects.setdefault(obj.object, set()).add(obj.user)

# objects is a dict w/ object as key and the set of friends who like the object as the value 
```

为了得到喜欢的朋友`object`

```
User.objects.filter(like__object=object, pk__in=friends) # .distinct() depends on your schema 
```

获得你的朋友和对象之间的所有相似关系

```
Like.objects.filter(user__in=friends).order_by('user') # .distinct() depends on your schema 
```

为朋友喜欢的每个对象获取所有朋友

```
for obj in Object.objects.filter(like__user__in=friends).distinct():
    User.objects.filter(like__object=object).distinct() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:54:25.000

这应该可以满足您的需求，但是您确实需要[`ManyToMany`](https://docs.djangoproject.com/en/dev/topics/db/models/#many-to-many-relationships)在 Friends 模型上添加 Objects 并调用它`likes`。

```
from collections import Counter

likes_of_friends = Like.objects.filter(friends__in=friend_list)
objects_of_likes = likes_of_friends.values_list('object__pk',flat=True)
number_of_likes = dict(Counter(list(objects_of_likes)))

for key,val in number_of_likes.iteritems():
   print 'My friends like %s object %d times' % (Object.objects.get(pk=key),val) 
```

# php - PHP 将嵌套数组插入 mongoDB

> ID：10255954
> 
> 赞同：0
> 
> 时间：2012-04-21T03:33:06.310
> 
> 标签：php, mongodb

我有一个函数可以用一维数组很好地更新，但是用多维数组（或嵌套数组）它不会更新。文档数据、BSON 字段（充当查找键）和集合被估算。任何想法我做错了什么？

```
Public Static function updateDocument($collection, $BSONfield, $document){
    $dbcollection = $db->selectCollection($collection);
    $sdata = $document[$BSONfield];
    $secureInnerDocument = array();
            $secureDocument = array();
    if($BSONfield == "_id"){
        $sdata = new MongoID($sdata);
        unset($document["_id"]);
    }
    $filter = array($BSONfield=>$sdata);
    foreach ($document as $k => $v) {   
        if (is_array($v)) {
            foreach ($v as $sk => $sv) {
                $secureInnerDocument[$sk] = Security::secureQuery($sv);
            }
                $secureDocument[$k] = $secureInnerDocument;
        }else{      
            $secureDocument[$k] = Security::secureQuery($v);
        }
    }
    $dbcollection->update($filter,array('$set'=>$secureDocument));
    $objid = (string) $secureDocument['_id'];
    return $objid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:07:04.017

它相当直接地翻译：

```
db.collection.update(
   {fieldNameFilter:'filterValue'}, 
   {$set: {'stringFieldName' : 'newValue'}}
); 
```

转换为：

```
$collection->update(
   array('fieldNameFilter'=>'filterValue'), 
   array($set => array('stringFieldName'=>$value))
); 
```

然后有一些用于多行更新等的标志，我没有在这里展示，但它们在 PHP 和 Mongo 文档中。

您可能还想查看：[MongoDB - PHP 查询帮助](https://stackoverflow.com/questions/3202596/mongodb-help-with-a-php-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:13:58.207

因此，在摆弄我的解决方案之后，我的解决方案最终变得有点笨拙，我删除了 Document 然后重新创建它。如果有人在看，这是代码：

```
/**
 * updates document in the collection.
 * This function secures the data
 *
 * @return  object ID
 * @param   string $collection  The name of the collection
 * @param   string $BSONfield   The $BSON Field you want to index by
 * @param   string $document    The document contents as an array
 */
Public Static function updateDocument($collection, $BSONfield, $document){
    $db =  Database::dbConnect();
    $collection = Security::secureQuery($collection);
    $BSONfield = Security::secureQuery($BSONfield);
    $dbcollection = $db->selectCollection($collection);
    if(array_key_exists('_id', $document)){
        $document["_id"] = new MongoID($document["_id"]);
    }
    Database::deleteDocument($collection, $BSONfield, $document);
    $objid = Database::createDocument($collection, $document);
    return $objid;
}

/**
 * Deletes a document in the collection.
 * This function secures the data
 *
 * @return  Boolean     True - if successfully deleted, False if document not found
 * @param   string $collection  The name of the collection
 * @param   string $BSONfield   The $BSON Field you want to index by
 * @param   string $document    The document contents as an array
 */
Public Static function deleteDocument($collection, $BSONfield, $document){
    $db =  Database::dbConnect();
    $collection = Security::secureQuery($collection);
    $BSONfield = Security::secureQuery($BSONfield);
    $exists = False;
    $dbcollection = $db->selectCollection($collection);
    $documentList = $dbcollection->find();
    $sdata = $document[$BSONfield];
    if($BSONfield == "_id"){
        $sdata = new MongoID($sdata);
    }
    foreach ($documentList as $doc) {
        $documentID = $doc[$BSONfield];
        if ($documentID == $sdata){
            $exists = True;
        }
    }
    if ($exists){
        $deleted = True;
        $filter = array($BSONfield=>$sdata);
        $dbcollection->remove($filter,true);
    }else{
        $deleted = False;
    }
    return $deleted;
}

/**
 * Inserts document into the collection.
 * This function secures the data
 *
 * @return  object ID.
 * @param   string $collection  The name of the collection
 * @param   string $document    The document contents as an array
 */
Public Static function createDocument($collection, $document){
    $db =  Database::dbConnect();
    $collection = Security::secureQuery($collection);
    $dbcollection = $db->selectCollection($collection);
    $secureDocument = array();
    $secureInnerDocument = array();
    foreach ($document as $k => $v) {   
        if (is_array($v)) {
            foreach ($v as $sk => $sv) {
                $secureInnerDocument[$sk] = Security::secureQuery($sv);
            }
                $secureDocument[$k] = $secureInnerDocument;
        }else{  
            if ($k == '_id'){   
                $secureDocument[$k] = $v;
            }else{  
                $secureDocument[$k] = Security::secureQuery($v);
            }   
        }
    }
    $dbcollection->insert($secureDocument);
    $objid = (string) $secureDocument['_id'];
    return $objid;
} 
```

以及我如何从注射中保护所有数据：

```
/**
 * Secures string to be inputed into a database.
 * 
 * @return Retuns secure string
 * @param   String $string  String to be secured
 */
Public Static Function secureQuery($string){
    $secureString = strtr($string, array(
            "'"  => "0x27",
            "\"" => "0x22",
            "\\" => "0x5C",
            "<"  => "0x3C",
            ">"  => "0x3E",
            "="  => "0x3D",
            "+"  => "0x2B",
            "&"  => "0x26",
            "{"  => "0x7B",
            "}"  => "0x7D",
    ));
    return $secureString;
}

/**
 * Un-Secures string to be inputed into a database.
 *
 * @return Retuns unsecure string
 * @param   String $string  String to be un-secured
 */
Public Static Function unsecureQuery($string){
    $secureString = strtr($string, array(
            "0x27"  => "'",
            "0x22" => "\"",
            "0x5C" => "\\",
            "0x3C"  => "<",
            "0x3E"  => ">",
            "0x3D"  => "=",
            "0x2B"  => "+",
            "0x26"  => "&",
            "0x7B"  => "{",
            "0x7D"  => "}",
    ));
    return $secureString;
} 
```

请享用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:30:15.807

您似乎没有`$set`正确使用运算符。根据 MongoDB[文档](http://www.mongodb.org/display/DOCS/Updating#Updating-%24set)，您需要像这样格式化更新文档；

> { $set : { 字段 : 值 } }

如果您`$set`在嵌套键上运行，则需要使用点符号来获取它们。例如;

> { $set : { field.nest : value } }

# c - 如何将 MongoDB C 驱动程序链接到我自己的程序

> ID：10255955
> 
> 赞同：2
> 
> 时间：2012-04-21T03:33:27.170
> 
> 标签：c, mongodb

我是使用 C 驱动程序的 MongoDB 新手用户，我找不到任何详细的教程来教我如何用 C 创建我的第一个 MongoDB 程序。

我根据[http://api.mongodb.org/c/current/tutorial.html创建了我的第一个程序](http://api.mongodb.org/c/current/tutorial.html)

```
#include <stdio.h>
#include "mongo.h"

int main() {
  mongo conn[1];
  int status = mongo_connect( conn, "127.0.0.1", 27017 );

  if( status != MONGO_OK ) {
      switch ( conn->err ) {
        case MONGO_CONN_SUCCESS:    printf( "connection succeeded\n" ); break;
        case MONGO_CONN_NO_SOCKET:  printf( "no socket\n" ); return 1;
        case MONGO_CONN_FAIL:       printf( "connection failed\n" ); return 1;
        case MONGO_CONN_NOT_MASTER: printf( "not master\n" ); return 1;
      }
  }

  mongo_destroy( conn );

  return 0;
} 
```

但是，它显示了一个错误，它找不到“mongo.h”在哪里。有谁知道如何编译这个文件，以便我可以将它链接到 MongoDB C 驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:26:31.733

您应该转到[C 语言驱动程序文档](http://www.mongodb.org/display/DOCS/C+Language+Center)并下载最新的稳定代码库 (v0.4)。

这包含 mongo.h。将它安装在计算机上的任何位置，并构建库。然后，您需要将 -I 指定到下载的头文件的位置，并将 -L 指定为已编译的库。

# c# - 应用程序栏图标名称

> ID：10255960
> 
> 赞同：3
> 
> 时间：2012-04-21T03:34:45.827
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1, application-bar

如何进行应用程序栏设置或任何其他更改，以便在没有任何用户交互的情况下加载页面时默认显示应用程序栏图标下方的名称。就像在这个[Image](http://3mspaints.co.uk/img/A-Bar.png)中一样，但在该链接的图像中，用户必须单击应用程序栏的点才能在图标下方显示名称。我知道这是可能的，因为我在手机上的某些应用程序中看到过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:07:18.573

使用 SDK 的当前版本 (7.1.1) 无法做到这一点。的属性只有两种状态`ApplicationBar`；（即正常状态，显示任何图标，但不显示其文本，以及查看菜单项的省略号）并且仅显示省略号，不显示图标，直到展开。有关详细信息，请参阅[ApplicationBar.Mode](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.applicationbar.mode%28v=vs.92%29.aspx "ApplicationBar.Mode Property")。`Mode``ApplicationBarMode.Default``ApplicationBarMode.Minimized`

# mfc - 如何在 MFC 中动态拆分窗口而不使用 CSplitterWnd::Create

> ID：10255961
> 
> 赞同：0
> 
> 时间：2012-04-21T03:34:50.933
> 
> 标签：mfc, csplitterwnd

我创建了一个 MFC MDI 应用程序，并希望通过右键单击并选择“AddSplitWnd”弹出菜单项将窗口一次动态拆分为两部分。我尝试使用 CSplitterWnd::CreateStatic 来实现它，一旦窗口被拆分，它需要创建一个新视图，但我想使用以前的视图，所以有人知道如何实现它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:55:22.563

这是在 SDI 环境中的拆分器中交换视图的代码片段。这也应该适用于 MDI。

```
CView* CDoc::SwitchToView(CView* pNewView)
{
    CFrameWndEx* pMainWnd = (CFrameWndEx*)AfxGetMainWnd();
    CView* pOldActiveView;
    pOldActiveView = pMainWnd->GetActiveView();
    CSplitterWnd* pSplitter = (CSplitterWnd *)pOldActiveView->GetParent();

    // in this case Pane 0,0 is exchanged
    pOldActiveView = (CView*) pSplitter->GetPane(0,0);

    // set flag so that document will not be deleted when view is destroyed
    m_bAutoDelete = FALSE;    
    // Dettach existing view
    RemoveView(pOldActiveView);
    // set flag back to default 
    m_bAutoDelete = TRUE;

    // Set the child window ID of the active view to the ID of the corresponding
    // pane. Set the child ID of the previously active view to some other ID.
    ::SetWindowLong(pOldActiveView->m_hWnd, GWL_ID, 0);
    ::SetWindowLong(pNewView->m_hWnd, GWL_ID, pSplitter->IdFromRowCol(0,0));

    // Show the newly active view and hide the inactive view.
    pNewView->ShowWindow(SW_SHOW);
    pOldActiveView->ShowWindow(SW_HIDE);

    // Attach new view
    AddView(pNewView);

    // Set active 
    pSplitter->GetParentFrame()->SetActiveView(pNewView);
    pSplitter->RecalcLayout(); 
    return pOldActiveView;
} 
```

高温高压

# memory-management - 为什么在写入时复制时没有 SIGSEGV 信号？

> ID：10255962
> 
> 赞同：1
> 
> 时间：2012-04-21T03:34:57.387
> 
> 标签：memory-management, operating-system, copy-on-write, page-fault

wikipedia 上的[写时复制文章](http://en.wikipedia.org/wiki/Copy-on-write)说，写时复制通常是通过授予对页面的只读访问权限来实现的，因此当一个页面被写入时，页面错误陷阱处理程序可以为其映射一个唯一的物理内存页面。所以我的问题是为什么当这种页面错误发生时用户级应用程序没有收到 SIGSEGV 信号？毕竟，[关于 SIGSEGV 的维基百科文章](http://en.wikipedia.org/wiki/SIGSEGV)说 SIGSEGV 是当进程进行无效内存引用或分段错误时发送给进程的信号。所以在这种情况下，即写时复制的情况下，为什么没有 SIGSEGV 被发送到进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T18:29:35.877

我知道自从有人问这个问题以来已经有一段时间了，但我想稍微扩展一下 Alexey 的回答。

写时复制（我假设您在谈论虚拟内存而不是文件系统）通常是这样工作的：

1.  操作系统知道在写入时需要复制哪些页面。（它们是进程专用的页面。）这些页面*在硬件*中被标记为只读。但是，进程的虚拟内存映射将页面标记为可读和可写。这意味着用户进程认为它可以完全访问相关页面。
2.  当用户进程尝试写入其中一个页面时，会生成*页面错误*，因为处理器识别出该页面是只读的（基于之前的硬件标记）。页面错误有点像段错误，但对于内核而不是用户进程。
3.  这会触发页面错误处理程序在内核中运行，它查看有问题的页面并看到它是尚未复制的私有页面。处理程序将创建页面的副本并将副本标记为可写。
4.  然后处理程序将用虚拟到物理转换表中的新地址替换旧页面的地址并退出。
5.  此时用户进程将重试最后一条指令，这次写入将成功，因为新页面在虚拟内存映射（用户进程的内存权限视图）和硬件（内核的视图内存权限）级别。

每次发生分段错误时都会生成一个页面错误，但大多数页面错误都由内核处理，并且永远不会作为段错误传递给导致它们的进程。页面错误可能在较低级别处理的原因有很多，包括：

*   被访问的页面因为很长时间没有被使用而被调出到磁盘。操作系统必须将其带回内存，以便进程可以再次使用它。
*   进程是第一次访问一个新分配的页面，实际的物理页面还没有被分配。操作系统必须分配一个页面，然后将其插入到虚拟到物理的转换表中，然后才能实际使用内存。
*   操作系统正在播放硬件页面访问权限技巧，以允许它监视对特定页面的访问。这就是写时复制中发生的情况，但它也可以有其他用途。考虑一种操作系统级别的虚拟化技术，例如[`kvm`](http://www.linux-kvm.org/page/Main_Page)，在来宾操作系统的内存中写入内存映射设备的位置实际上应该写入主机操作系统中的文件或显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:41:46.810

COW 的主要思想是，COW 对用户进程是完全透明的，就好像它完全拥有内存而没有任何共享一样。

# c++ - QTcpSocket::write 上的多次调用？

> ID：10255964
> 
> 赞同：0
> 
> 时间：2012-04-21T03:35:41.247
> 
> 标签：c++, qt, asynchronous, qtcpsocket

根据这里[http://doc-snapshot.qt-project.org/4.8/qiodevice.html](http://doc-snapshot.qt-project.org/4.8/qiodevice.html)

> QIODevice 的某些子类，例如 QTcpSocket 和 QProcess，是异步的。

例如，已经进行了第一次写入调用以发送一大块数据。现在，在第一次写入调用完成之前，还进行了第二次写入调用以发送另一块数据。

现在会发生什么？在开始发送块之前，第二个调用是否等待第一个调用完全完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:36:37.973

数据至少由系统 TCP 堆栈缓冲，因此每次调用`write`“just”都会将新块附加到等待发送的未写入数据。

但是如果你`write`从 2 个不同步的线程中调用，结果是未定义的。

# python - 在 BS4 中解析文本

> ID：10255972
> 
> 赞同：0
> 
> 时间：2012-04-21T03:36:53.200
> 
> 标签：python, beautifulsoup

我正在阅读 python/BS4 中的一些产品页面，并在一行代码中找到了一个有趣的品种，即商品的价格。

有时 HTML 是：

```
<span class="currency">$<span id="product_price">0.00</span></span> 
```

其他时候会是：

```
<span class="currency">$17.95</span></b> 
```

使用`price = soup.find('span', {'class' : 'currency'})`

我可以隔离跨度，但是当我尝试仅获取文本时，使用

```
priceStr = price.findAll(text=re.compile(r'')) 
```

然后将其写入输出文件

```
divpage.write('Price = ' + str(priceStr) + '\n') 
```

我得到（对于第一个例子）：

```
Price = [u'$', u'0.00'] 
```

我的问题是，有没有办法只读取价格，没有'$'，以及如何将编码从“u'0.00'”转换为“0.00”？

我知道我可以使用 Python 的查找和替换功能来做到这一点，但我想尽可能地坚持 BSS4，而不必为一种或另一种形式编写 w check ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:02:05.680

我会使用 get_text() 而不是 find_all()

```
price_str = price.get_text() # $17.95 
```

然后你可以使用 lstrip 摆脱美元符号

```
price_str = price_str.lstrip('$') # 17.95 
```

你完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T06:50:26.187

在此处使用 Regex 也可以提供帮助，保留您需要的字符并删除其他所有内容。

```
if price_str is not None :
    price =  re.sub("[^0123456789.]","",price_str.get_text()) 
```

# android - 我应该单独存储转换矩阵吗？

> ID：10255978
> 
> 赞同：2
> 
> 时间：2012-04-21T03:38:28.177
> 
> 标签：android, opengl-es, transform, opengl-es-2.0

我是 OpenGL ES 2.0 的新手，我正在尝试一些 2-D 渲染。

假设每个对象都会被平移、旋转、倾斜和缩放，并且可以通过鼠标单击来选择，我现在有两个选择：

*   为每个变换存储一个矩阵，并将它们分别传递给顶点着色器。矩阵乘法将在 GPU 上完成，我想这会更快。当只改变一个变换矩阵时也很方便。决定选择有点重，因为我需要将每个矩阵应用于一个向量。*   只存储一个矩阵作为所有变换矩阵的乘积并将其传递给顶点着色器。这可能很好，因为某些方法（例如`Matrix.scaleM()`和`Matrix.translateM()`）速度很快并且不需要乘法。这也是因为我们每帧上传到着色器的统一数据减少了。但每次变换矩阵之一改变时，都应该重新计算整个乘积。决定选择相对简单，因为我只需要将单个矩阵应用于向量。

    欢迎任何关于选择的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:08:10.803

如果执行基准测试会更好，因为性能与多个关注点有关：

*   CPU和GPU的乘法性能差距。*   上传制服的带宽。*   应用变换的顶点数。*   仅将一个转换矩阵标记为脏的可能性。*   改变变换参数的频率。

    通常可以在本地执行此操作，因为在仅涉及 2D 对象时可以轻松优化矩阵乘法。

# javascript - 单击选择选项时如何显示/隐藏div

> ID：10255979
> 
> 赞同：2
> 
> 时间：2012-04-21T03:38:32.103
> 
> 标签：javascript, html

我有一个选择框，当您单击一个选项时，希望在隐藏的 div 中显示帮助文本：

```
<select  onchange="optionCheck()" multiple="multiple" name="test" id="options" size="15" class="form-select">
    <option value="1">option 1</option>
    <option value="2">option 2</option>
</select>

<div id="help1" style=visibility:hidden>help text 1</div>
<div id="help2" style=visibility:hidden>help text 2</div>

<script type="text/javascript">
    function optionCheck(){
        var option = document.getElementById("options").value;
        if(option == "1"){
            document.getElementById("help1").style.visibility ="visible";
            document.getElementById("help2").style.visibility ="hidden";
        }
        if(option == "2"){
            document.getElementById("help2").style.visibility ="visible";
            document.getElementById("help1").style.visibility ="hidden";
        }
    }
</script> 
```

如何创建一个简单的循环，这样我就不必为每个选项编写“if”语句？

```
 document.getElementById(option).style.visibility ="visible"; 
```

不工作 - javascript 和我相处得不好 ;-)

此外，还有一种简单的方法来隐藏选项时的所有其他div吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:11:15.820

我建议使用一些 CSS 类来隐藏/显示 div。然后 JavaScript 只需要为每个 div 设置类属性。

如果您选择多个选项，此解决方案仍然有效。

HTML：

```
<select onchange="optionCheck()" multiple="multiple" name="test" id="options" size="15" class="form-select">
    <option value="1">option 1</option>
    <option value="2">option 2</option>
</select>

<div id="help1" class="helpText">help text 1</div>
<div id="help2" class="helpText">help text 2</div> 
```

CSS：

```
/* consider "display: none/block" instead of visibility: hidden/visible
   if you don't want the hidden divs to occupy space */
.helpText {
    visibility: hidden;
}
.helpTextShow {
    visibility: visible;
}​ 
```

JavaScript：

```
function optionCheck() {
    var i, len, optionVal, helpDiv,
        selectOptions = document.getElementById("options");

    // loop through the options in case there
    // are multiple selected values
    for (i = 0, len = selectOptions.options.length; i < len; i++) {

        // get the selected option value
        optionVal = selectOptions.options[i].value;

        // find the corresponding help div
        helpDiv = document.getElementById("help" + optionVal);

        // move on if we didn't find one
        if (!helpDiv) { continue; }

        // set CSS classes to show/hide help div
        if (selectOptions.options[i].selected) {
            helpDiv.className = "helpText helpTextShow";
        } else {
            helpDiv.className = "helpText";
        }
    }    
}

// alternative method of binding the onchange handler, merely a suggestion
//document.getElementById("options").onchange = optionCheck; 
```

​</p>

这是一个 jsFiddle 来演示：http: [//jsfiddle.net/willslab/3N9pm/9/](http://jsfiddle.net/willslab/3N9pm/9/)

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T04:02:16.050

请查看修改后的 HTML 和 JavaScript 代码：

**HTML：**

```
<div id="help1" style="display:none">help text 1</div>
<div id="help2" style="display:none">help text 2</div> 
```

**JAVASCRIPT：**

```
function optionCheck()
{
    var option = document.getElementById("options").value;
    if(option == "1"){
        document.getElementById("help1").style.display ="";
        document.getElementById("help2").style.display ="none";
    }
    if(option == "2"){
        document.getElementById("help2").style.display ="";
        document.getElementById("help1").style.display ="none";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T07:10:38.617

这是我的做法：

首先，我很懒，我不想输入 style="visibility: hidden;" 在每个 div 上。使用 CSS 一次隐藏所有这些更容易：

HTML：

```
<select  onchange="optionCheck()" multiple="multiple" name="test" id="options" size="15" class="form-select">
  <option value="1">option 1</option>
  <option value="2">option 2</option>
</select>

<div id="help-wrapper">
  <div id="help1">help text 1</div>
  <div id="help2">help text 2</div>
</div> 
```

CSS：

```
#help-wrapper div {
  visibility: hidden;
}

/* It's better to use a class to highlight the selection,
   in case you feel like adding more styles later (like a border or something).
 */
.current-help {
  visibility: visible;
} 
```

现在我们可以努力使 Javascript 更通用一点：

```
function optionCheck()
{
  var i;
  var optionIndex = document.getElementById("options").value;

  var helpWrapper = document.getElementById("help-wrapper");
  var helpDivs = helpWrapper.getElementsByTagName("div");

  // Loop through all the help divs.
  for (i=0; i<helpDivs.length; i++) {
    // Parse out the numeric portion of this help div's id.
    var helpIndex = helpDivs[i].substring[4];

    // If we found our div, highlight it.
    if (helpIndex === optionIndex) {
      helpDivs[i].className = "current-help";
    }
    // Otherwise, we should make sure it's hidden,
    // in case it was the previous selection.
    else {
      helpDivs[i].className = "";
    } 
  }
} 
```

这应该可以解决问题！

如果您对上述代码有任何疑问，我很乐意为您解答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T03:59:55.730

最好用引号包裹 css 样式：

```
 <div id="help1" style="visibility:hidden">help text 1</div>
  <div id="help2" style="visibility:hidden">help text 2</div>

function optionCheck(){
        var option = document.getElementById("options").value;
        document.getElementById("help" + option).style.visibility ="visible";
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T03:42:54.140

而不是`getElementById(option)`，尝试类似的东西`getElementById("help" + option)`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T03:53:57.003

您可以尝试在 javascript 中使用三元运算符：

```
document.getElementById("options").value == 1?(document.getElementById("help1").style.visibility ="visible",document.getElementById("help2").style.visibility ="hidden"):(document.getElementById("help2").style.visibility ="visible",document.getElementById("help1").style.visibility ="hidden"); 
```

这将避免多个 if 语句

# azure - 工作角色中的 ServicePointManager.DefaultConnectionLimit

> ID：10255985
> 
> 赞同：6
> 
> 时间：2012-04-21T03:40:11.237
> 
> 标签：azure, role, worker

目前只是了解 Windows Azure。

我正在查看一些示例，并在我看到的工人角色的 OnStart 事件中

ServicePointManager.DefaultConnectionLimit = 5;

我不明白这一点的相关性。

在您的工作人员角色中，您可以设置实例数，所以这肯定会限制条目数吗？

对不起，我很困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T03:42:50.693

我们在团队中遇到了类似的问题。默认情况下，每个域的默认传出连接数默认设置为 2。这限制了您可以拥有的并发连接数，并可能导致执行问题。我会看一下下面的博客，其中详细介绍了这个问题。

[https://docs.microsoft.com/en-us/archive/blogs/jpsanders/understanding-maxservicepointidletime-and-defaultconnectionlimit](https://docs.microsoft.com/en-us/archive/blogs/jpsanders/understanding-maxservicepointidletime-and-defaultconnectionlimit)

在调整实例数量方面，虽然可以横向扩展 Azure 内部运行的实例数量，但简单地横向扩展并不能解决单个实例的瓶颈问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:01:20.990

此设置最直接适用于使用 Windows Azure 存储。如果您不设置此策略，您有一个主机端点（例如 .table.windows.core.net）将被限制为只有 2 个连接。但是，如果您了解 Windows Azure 存储，那么您就知道您可以通过并行化请求来实现规模化。在这种情况下，您需要许多同时连接。在我们的环境中，我们有极端的分区和许多 IO 绑定操作，我们有这个限制在 100 左右，IIRC。

# iphone - 了解用于移动设备的 flash builder 中的设备

> ID：10255986
> 
> 赞同：0
> 
> 时间：2012-04-21T03:40:12.503
> 
> 标签：iphone, flash, flash-builder

我正在为移动设备做一个应用程序，特别是针对 iphone 和 ipad。我想为每个使用不同的接口。我怎样才能做到这一点？是否有保存设备名称的变量？如

```
if(device=="iPhone")
    {use this state}
else if (device=="iPad")
    {use that state} 
```

??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:45:06.670

您可以使用[`Capabilities.os`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html#os)获取设备的操作系统并查看它是否使用iOS，然后使用[`Capabilities.screenResolutionX`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html#screenResolutionX)并[`Capabilities.screenResolutionY`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html#screenResolutionY)确定分辨率是否对应于iPhone或iPad。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:48:09.597

查看[这个文档](http://blogs.adobe.com/flashplatform/2011/04/mobile-development-scaling-content-depending-on-the-screen-resolution.html)，它显示了基于屏幕分辨率缩放事物的一般原则。

这不是您问题的确切答案，但我猜您只是想根据屏幕分辨率缩放界面。

您还可以使用`Capabilities.screenDPI.`它来检查屏幕 DPI，以了解这些像素的分布情况`Capabilities.screenResolutionX`并`Capabilities.screenResolutionY`获得分辨率。

如果您真的想知道操作系统是什么，您可以使用 进行检查`Capabilities.os`，但至于确切的设备，我不确定是否有方法。

# ruby-on-rails-3 - Rails：为 has_many 关系创建默认记录

> ID：10255988
> 
> 赞同：2
> 
> 时间：2012-04-21T03:41:06.030
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我有一个用于预算规划师的 rails 3.2 应用程序。

我的模型有一个用户，一个用户有一个预算，每个预算有很多budget_items。创建用户时，会为他们创建预算。

当用户访问他们的预算时，如果他们没有，我会插入一个空白的 budget_item。但是，我想做的是用一组带有估计成本的默认预算项目预先填充每个预算。这可以在创建预算时完成，也可以在用户访问空白预算时完成。

我希望实现尽可能干净，因为我正试图在 Rails 中以“正确的方式”做事（如果你看到任何不寻常的代码，还没有：）

我的代码可以在这里看到：[https ://github.com/michaelward82/WeddingPlanner](https://github.com/michaelward82/WeddingPlanner)

好吧，尽管答案将被认为比快速答案更好。在给出正确答案之前，我会给出合理的时间。

* * *

编辑：

通过以下列方式更改我的 BudgetsController，我成功地创建了默认记录：

```
class BudgetsController < ApplicationController
  def show
    if current_user
      @budget = current_user.budget
      if @budget.budget_items.empty?
        set_default_budget_items @budget
      end
    else
      redirect_to log_in_path
    end
  end

  def update
    @budget = current_user.budget
    if @budget.update_attributes(params[:budget])
      redirect_to budget_path, :flash => { :success => "Budget changes saved" }
    else
      redirect_to budget_path, :flash => { :error => "Budget changes were not saved" }
    end
  end

  private

  def set_default_budget_items(budget)
    default_budget_items = [
      { "description"=>"Insurance", "estimated_cost"=>"110", "actual_cost"=>"0", "position"=>"1"},
      { "description"=>"The Service", "estimated_cost"=>"520", "actual_cost"=>"0", "position"=>"2"},
      { "description"=>"Reception (venue, food & drinks)", "estimated_cost"=>"4000",  "actual_cost"=>"0", "position"=>"3"}
    ]

    default_budget_items.each {|b| @budget.budget_items.new(b) }
  end
end 
```

这是最好的方法吗？我很高兴接受这个，但如果有更清洁的方式来组织这个，那么我很乐意知道。默认项目比上面看到的要多得多，所以我怀疑我的控制器是存放这些数据的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:49:36.553

我认为您正在制作一个重型控制器，这可能应该移至模型中。您希望尽可能使您的控制器保持苗条。关于这个谷歌“rails skinny controllers”的文章很多。

[http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)

我会使用回调（可能是 after_create），具体取决于您对应用程序其余部分的计划。

# ruby - Ruby rails - submit_tag / button_tag 在名称之间切换/切换

> ID：10255990
> 
> 赞同：0
> 
> 时间：2012-04-21T03:41:27.617
> 
> 标签：ruby, ruby-on-rails-3

如何在单个按钮上的两个或多个名称之间切换/切换名称？
对于一种情况，我希望名称为“添加”，而对于另一种情况，我希望名称更改为“删除”。并根据后端的状态在它们之间切换。

```
 <%= button_tag "Add" , :id => "add_or_remove_button", :onclick => "javascript:add_or_remove_button()"%> 
```

我可以做“添加/删除”，点击同一个按钮仍然可以完成这项工作。但我想要它具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:51:35.397

由于您没有说明条件的来源，我将假设它在一个名为的实例变量中`@button_condition`

你可以这样做（我没有测试过）

```
button_tag(:type => 'button',:onclick => "javascript:add_or_remove_button()", :id => "add_or_remove_button") do
  if @button_condition == X
   "Add"
  else
   "Remove"
  end
end 
```

看一看：[按钮标签文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag)

# python - 这可能是一个新事物......但是，全局变量

> ID：10255991
> 
> 赞同：1
> 
> 时间：2012-04-21T03:41:27.700
> 
> 标签：python, variables

好的！基本上，我在一个函数中声明了一个变量，我想在另一个函数中使用该变量。我不想传递参数，因为我觉得会有更简单的方法来做到这一点。这是我的代码：

```
#!/usr/bin/python

#import os
import time
print ("Hello and welcome to Pygame!")
time.sleep(1)
print ("Would you like to load? (\"Y/N\")")

def LON():
    loadOrNew = raw_input()

    if loadOrNew == "N":
        hp = 100
        strhp = str(hp)
        lvl = 1
        strlvl = str(lvl)
        atk = 5
        stratk = str(atk)
        defn = 2
        strdefn = str(defn)
        fout = open("pygame.dat", "w")
        fout.write (strhp) 
        fout.write("\n")
        fout.write(strlvl)
        fout.write("\n")
        fout.write(stratk)
        fout.write("\n")
        fout.write(strdefn)
        fout.close()
        FIRSTPLAY()
        return

    if loadOrNew == "Y":
        fin = open("pygame.dat", "r")
        hpstr = fin.readline()
        lvlstr = fin.readline()
        atkstr = fin.readline()
        defstr = fin.readline()
        hp = int(float(hpstr))
        lvl = int(float(lvlstr))
        atk = int(float(atkstr))
        defn = int(float(defnstr))
        fin.close()
        return

    if loadOrNew != "Y" and loadOrNew != "N":
        print("Im sorry, what?")
        LON()
        return

    return

def SAVE():
    fout = open("pygame.dat", "w")
    fout.write(hp)
    fout.write(lvl)
    fout.write(atk)
    fout.close(defn)
    return

def FIRSTPLAY():
    print("man/woman?")
    gender = raw_input()
    if gender != "man" and gender != "woman":
        print("Not valid gender.")
        FIRSTPLAY()

    print("KING - ")    
    print(" Young " + gender + ", you are herby my knight!")
    time.sleep(1)
    print(" My daughter, princess PYTHON, has been captured!")
    time.sleep(1)
    print(" You are to find her, and relieve this world of her captor!")
    time.sleep(1)
    print(" Some say this evil man's name is GAMEMAKER, but we really don't know.")
    time.sleep(1)
    print(" What do you think it is?")
    captor = raw_input()
    time.sleep(1)
    print(" So you think it is " + captor + "?")
    time.sleep(1)
    print("     Very well, find " + captor + " ASAP!")
    PLAY()
    return

def PLAY():
    print hp
    print lvl
    print atk
    print defn
    greenSlime(hp, lvl, atk, defn)
    return

def greenSlime(php, plvl, patk, pdefn):
    MHP = 10
    MLVL = 1
    MATK = 2
    MDEF = 2
    print "Green Slime - "
    print " HP: 10"
    print " LVL: 1"
    print " ATK: 2"
    print " DEF: 2"
    print "ATK OR DEF?"

LON() 
```

我想在 PLAY 函数中使用在 LON 函数中声明的 hp、lvl、atk 和 defn 变量。我确信有一种比传递参数更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:43:10.147

在内部`LON()`，您可以使用以下`global`语句：

```
def LON():
    global hp, lvl, atk, defn 
```

然后，对内部这些变量的赋值`LON()`将创建全局变量。创建全局变量后，您可以在其他地方使用它们（无需`global`声明）。请注意，无论您想为全局变量*分配*新值的任何地方，都需要`global`在该函数中使用相应的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:21:29.323

仅仅在 global 中声明一个变量是行不通的。global 关键字是要求解释器在为其赋值时不要将其视为本地（覆盖具有相同名称的全局变量）。您需要做的是在应该共享它的函数之上的范围内定义变量。请注意，您不需要在函数中声明一个全局变量以进行只读访问。当解释器在本地范围内找不到变量时，它会自动在外部范围内查找它。但是在赋值语句的情况下，它会创建一个新的局部变量。

所以你想要做的是：

```
hp = None
lvl = None
atk = None
defn = None

def LON():
    global hp, lvl, atk, defn
    # rest of LON

# rest of the functions 
```

但我应该警告你，全局变量是不好的编程习惯，传递参数是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:37:37.563

您需要做的是将函数移动到 python 类中。这样类内的所有函数都可以访问变量，而无需将它们设为全局变量。

您可能会像这样构造代码：

```
#!/usr/bin/python

#import os
import time
print ("Hello and welcome to Pygame!")
time.sleep(1)
print ("Would you like to load? (\"Y/N\")")

class Game:

  def InitialiseNewPlayer(self):
    self.hp = 100
    self.lvl = 1
    self.atk = 5
    self.defn = 2

  def SavePlayer(self):
    fout = open("pygame.dat", "w")
    fout.write ( str(self.hp) ) 
    fout.write("\n")
    fout.write(str(self.lvl) )
    fout.write("\n")
    fout.write(str(self.atk) )
    fout.write("\n")
    fout.write(str(self.defn) )
    fout.close()

  def LoadPlayer(self):
     fin = open("pygame.dat", "r")
     self.hp = int(float(fin.readline()))
     self.lvl = int(float(fin.readline()))
     self.atk = int(float(fin.readline()))
     self.defn = int(float(fin.readline()))
     fin.close()

  def LON(self):
    while true:
      loadOrNew = raw_input()

      if loadOrNew == "N":
        self.InitialiseNewPlayer()
        self.SavePlayer();
        self.FIRSTPLAY()
        return

      if loadOrNew == "Y":
        self.LoadPlayer()
        return

      print("Im sorry, what?")

  # Watch out as this is using a different format to the SavePlayer above!
  def SAVE(self):
    fout = open("pygame.dat", "w")
    fout.write(self.hp)
    fout.write(self.lvl)
    fout.write(self.atk)
    fout.close(self.defn)

  def FIRSTPLAY(self):
    print("man/woman?")
    gender = raw_input()
    if gender != "man" and gender != "woman":
        print("Not valid gender.")
        FIRSTPLAY()

    print("KING - ")    
    print(" Young " + gender + ", you are herby my knight!")
    time.sleep(1)
    print(" My daughter, princess PYTHON, has been captured!")
    time.sleep(1)
    print(" You are to find her, and relieve this world of her captor!")
    time.sleep(1)
    print(" Some say this evil man's name is GAMEMAKER, but we really don't know.")
    time.sleep(1)
    print(" What do you think it is?")
    captor = raw_input()
    time.sleep(1)
    print(" So you think it is " + captor + "?")
    time.sleep(1)
    print("     Very well, find " + captor + " ASAP!")
    self.PLAY()
    return

  def PLAY(self):
      print self.hp
      print self.lvl
      print self.atk
      print self.defn
      self.greenSlime()

  def greenSlime(self):
    MHP = 10
    MLVL = 1
    MATK = 2
    MDEF = 2
    print "Green Slime - "
    print " HP: 10"
    print " LVL: 1"
    print " ATK: 2"
    print " DEF: 2"
    print "ATK OR DEF?"

game = Game()
game.LON() 
```

# macos - 如何设置鼠标位置？

> ID：10255995
> 
> 赞同：2
> 
> 时间：2012-04-21T03:42:26.743
> 
> 标签：macos, core-graphics, macos-carbon

我需要设置鼠标在屏幕上的位置。在其他一些类似的问题中，建议使用`CGDisplayMoveCursorToPoint(CGDirectDisplayID display, CGPoint point)`，但我不知道如何获得`CGDirectDisplayID`. 请告诉我如何获得`CGDirectDisplayID`或不同的方法来设置鼠标位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-26T13:26:47.457

这个问题的真正答案是：

```
CGMainDisplayID() 
```

[https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/index.html#//apple_ref/c/func/CGMainDisplayID](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/index.html#//apple_ref/c/func/CGMainDisplayID)

```
CGDisplayMoveCursorToPoint(CGMainDisplayID(), point); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T11:51:42.840

试试`CGWarpMouseCursorPosition()`。它不需要显示 ID。

如果你想要一个显示 ID，你可以使用任何你喜欢的标准从返回的数组中选择一个元素`[NSScreen screens]`。调用`-deviceDescription`该`NSScreen`对象。从返回的字典中，`-objectForKey:`使用 key调用`@"NSScreenNumber"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T03:49:06.063

这是一种方法：

```
// coordinate at (10,10) on the screen
CGPoint pt;
pt.x = 10;
pt.y = 10;

CGEventRef moveEvent = CGEventCreateMouseEvent(
    NULL,               // NULL to create a new event
    kCGEventMouseMoved, // what type of event (move)
    pt,                 // screen coordinate for the event
    kCGMouseButtonLeft  // irrelevant for a move event
);

// post the event and cleanup
CGEventPost(kCGSessionEventTap, moveEvent);
CFRelease(moveEvent); 
```

这会将光标移动到屏幕上的点 (10,10)（左上角，Apple 菜单旁边）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-07T03:37:27.523

这是一个 Swift 版本，只是为了好玩：

```
let pt = CGPoint(x: 100, y: 10)
let moveEvent = CGEventCreateMouseEvent(nil, .MouseMoved, pt, .Left)
CGEventPost(.CGSessionEventTap, moveEvent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-20T09:12:24.550

对我有帮助的答案的 Swift 3 版本：

```
let pt = CGPoint(x: 100, y: 10)

let moveEvent = CGEvent(mouseEventSource: nil, mouseType: .mouseMoved, 
mouseCursorPosition: pt, mouseButton: .left)

moveEvent?.post(tap: .cgSessionEventTap) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-13T03:37:25.307

这是在 Swift 5 中：

```
let pt = CGPoint(x: 100, y: 10)
        let moveEvent = CGEvent(mouseEventSource: nil, mouseType: .mouseMoved, mouseCursorPosition: pt, mouseButton: .left)
        moveEvent?.post(tap: .cgSessionEventTap); 
```

# c++ - 尝试赋值时 C++ 代码中断

> ID：10255996
> 
> 赞同：0
> 
> 时间：2012-04-21T03:42:37.917
> 
> 标签：c++, visual-studio, multidimensional-array, double-pointer

我是 C++ 新手，正在尝试使用双指针为多维数组编写代码。这是我的代码：

类声明：

```
class magicMat{

    private:
         int** ptrnum;

    public:
        void init(int);
        void Display(int);
        void set(int);
        void message();
        void errorhandling(int);    
}; 
```

函数定义：

```
void magicMat::init(int input)
{       
    ptrnum=new int*[input];

    for (int row=0;row<input;row++)
        ptrnum[row]=new int[input]; 

    for(int x=0;x<input;x++)
    {
        for (int y=0;y<input;y++)
        {
            *(ptrnum[x]+y)=0;
        }
    }
}

void magicMat::set(int input)
{
    int row=1,col=input/2,otherdiag=0;

    for(int value=1;value<=input*input;value++)
    {
        if (*(ptrnum[row]+col)>0)
        {
            row=row+2;
            if(row>input)
                row=row-input;

            col--;
            if(col<1)
                col=input;
        }
        *(ptrnum[row]+col)+=value;
        *(ptrnum[0]+col)+=value;
        *(ptrnum[row]+0)+=value;

        if (row==col)
            *(ptrnum[0]+0)+=value;          

        if (row+col==input+1)
            otherdiag+=value;                 
/*                                                                        */
/*       Determine where new row and col are                              */
/*                                                                     */
         row--;
         if (row < 1)                       /* If row exceeds side then   */
            row = input;                    /*  goto other side.          */
         col++;
         if (col > input)                   /* If col exceeds side then   */
            col = 1; 
    }       
} 
```

主功能：

```
int main()
{
    int num;
    magicMat newMat;
    newMat.message();
    while(1)
    {
        cin>>num;
        if (cin.good())
        {
            newMat.errorhandling(num);
        }
        else if (!isdigit(num))
        {
            cout<<"Please enter only digits"<<endl;
        }    
        newMat.init(num);
        newMat.set(num);
        newMat.Display(num);
    }
    cout<<"\nBye bye!\n"<<endl;
    return 0;
} 
```

它在`init`函数中有效，但是在`set`函数中我尝试检查它在数据函数中的第一`if`条语句处中断的值。`set`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:11:37.810

您正在超出数组的范围。举个例子，如果我运行您的代码并输入`5`我的第一个数字来设置`input`to的值，请查看函数`5`末尾的这些行：`set`

```
row--;
if (row < 1)
    row = input; 
```

在第一次通过`set`函数中的循环结束时，就在这些行之前，`row`等于`1`. 这三行执行并因此`row`设置为等于`5`。

在你的下一个循环开始时`set`，你这样做：

```
if (*(ptrnum[row]+col)>0) 
```

问题是这`ptrnum`是一个 5x5 数组，这意味着有效索引是从 0 到 4。但是，在上一个循环结束时，您设置了`row`equal ，`5`结果，您的索引超出了 of 的范围，`ptrnum`从而使您的程序崩溃。

我强烈建议您在调试器中单步执行您的代码，或者如果您不确定如何执行此操作，至少在您的函数中放入一堆`cout`语句，`set`这样您就可以检查变量是否设置为您认为应该设置的值设置为。

祝你好运！