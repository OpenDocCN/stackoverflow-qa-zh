# StackOverflow 问答 11983000-11983999

# php - jQuery Ajax 调用返回 HTML，但 HTML 没有放在文档中

> ID：11983007
> 
> 赞同：0
> 
> 时间：2012-08-16T08:06:43.273
> 
> 标签：php, jquery, ajax

我正在尝试创建一个 Ajax 调用，该调用在选择框更改时触发。它使用加载另一个 PHP 函数

`$('.selectbox').load("/path/to/script.php?x=" + x + "&y=" + y);`

这个调用是成功的，因为我可以在 Firebug 中看到该调用从 PHP（实际上是`<option>`标签）返回 HTML。但是，此 HTML 并未放入`.selectbox`元素中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:38:34.950

您的代码似乎正确。确保您获得了正确的 HTML 标记以插入到`<select>`. 预期的反应是`<option value="1">1</option><option value="2">2</option>`

或者尝试使用其他 Ajax 方法，例如[$.get](http://api.jquery.com/jQuery.get/)或[$.ajax](http://api.jquery.com/jQuery.ajax/)

演示：http: [//jsfiddle.net/TVZbS/](http://jsfiddle.net/TVZbS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:25:10.543

可能发生的情况是您请求的 URL 会导致重定向，并且没有内容。也许在某处添加了“/”或类似的东西......确保生成的 URL 与您在浏览器地址栏中看到的完全匹配。

# android - 除非我先单击一个项目，否则单击 ListView 的最后一项不起作用。点击次数堆积？

> ID：11983018
> 
> 赞同：0
> 
> 时间：2012-08-16T08:07:23.897
> 
> 标签：android, listview, click, footer

这是我发现的最奇怪的错误，我无法修复它。我正在使用一个名为 android-binding 的外部库来实现我的应用程序。我联系了这个库的一位开发人员，他调试了我的项目，他认为这个错误与他的库无关。

我有一个 ListView 显示某个月份的任务。该视图有一个按钮用于加载上个月的任务（从现在开始，LoadPrevious）和一个用于从下个月加载任务的页脚（从现在开始，LoadNext）。这个外部库允许您在布局视图上设置属性绑定：onclick，因此当用户单击视图时，它会自动调用放置在代码中的命令。

如果我单击 LoadNext，该功能第一次可以正常工作。从这里开始，每次我单击 LoadNext 时它什么都不做，也不会调用该函数。如果然后我点击 LoadPrevious，我在 LoadNext 上所做的所有点击都会执行，就像点击堆叠或类似的东西一样。

但它变得更加奇怪。如果我单击列表中的一个项目（onClick 函数不需要做任何事情，只需单击该项目）然后 LoadNext 工作正常。我试图模拟来自代码的点击（ListView->performItemClick、setSelection、setChecked），但它仍然无法正常工作。

有谁知道是否有原因导致点击 Views 可能会被堆叠或类似的东西？

编辑：项目代码并不简单。我将在这里放置与失败功能相关的代码，跳过此活动的所有其他功能，尽管我认为其中一些其他功能可能与错误有关。

这是不起作用的命令的代码：

```
public final CursorCollection<TaskItem> TaskList = new CursorCollection<TaskItem>(TaskItem.class); // Binded to the ListView (like an Adapter). Related to the external library

public final Command LoadNext = new Command(){
    @Override
    public void Invoke(View arg0, Object... arg1){
        monthListEnd++;
        if(monthListEnd==12){
            monthListEnd=0;
            yearListEnd++;
        }
        listTitle=monthName[monthListStart]+" "+yearListStart+" to "+monthName[monthListEnd]+" "+yearListEnd;
        fillList();
    }
};

//Fills the ListView.  
public void fillList(){
        int daysLastMonth = numberOfDays[monthListEnd];
        if(monthListEnd==1 && yearListEnd%4==0 && (yearListEnd%100 != 0 || yearListEnd%400 == 0)) daysLastMonth++;
        Cursor c = model.getTasks(1, monthListStart, yearListStart, daysLastMonth, monthListEnd, yearListEnd);
        if (c.getCount() == 0) ListEmpty.set(true);
        else ListEmpty.set(false);
        mContext.startManagingCursor(c);
        TaskList.setCursor(c);
} 
```

这是 TaskItem 类：

```
public class TaskItem extends RowModel{ 
    public final StringField Id = new StringField("id"); 
    public final StringField Id_local = new StringField("id_local"); 
    public final StringField Name = new StringField("name"); 
    public final DateField StartDate = new DateField("start_date"); 
    public final DateField EndDate = new DateField("end_date"); 
    public final StringField Status = new StringField("status"); 
} 
```

我发现了一些有趣的事情。如果我评论“TaskList.setCursor(c);”行 从它起作用的 fillList() 函数。但是，如果我取消注释该行并从视图中删除选项卡（布局有两个选项卡，第二个有列表），它也可以工作。也就是说，如果我同时使用这两个东西（选项卡和 setCursor），它就不起作用，但如果我删除其中一个，它就起作用了。

但这还不止于此。我使用带有选项卡和 setCursor 的项目创建了一个简化版本，但列表中没有上下文菜单，布局中没有选项菜单，也没有在后台运行 SyncAdapter，它也可以工作。就像这个错误只发生在一组东西一起工作时，其中两个是 setCursor 和选项卡。就像我说的，我发现的最奇怪的错误。

# iphone - 与方法声明混淆

> ID：11983020
> 
> 赞同：0
> 
> 时间：2012-08-16T08:07:32.820
> 
> 标签：iphone, objective-c

> **可能重复：**
> [Objective C 中的方法语法](https://stackoverflow.com/questions/683211/method-syntax-in-objective-c)

我对 iPhone 开发很陌生，我对使用 X-code 的方法声明 iPhone 开发感到困惑

请帮我确定这里的方法名称是什么。

`tableView`或者`willSelectRowAtIndexPath`

请解释你是如何识别它的。提前致谢。

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSUInteger row = [indexPath row];
    if (row == 0) return nil;
    return indexPath;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:12:49.680

方法签名是`tableView:willSelectRowAtIndexPath:`. 在这里，您可以阅读有关 Objective C 中的方法名称的信息 - [http://cocoawithlove.com/2009/06/method-names-in-objective-c.html](http://cocoawithlove.com/2009/06/method-names-in-objective-c.html)如果您不确定这里发生的原因和情况，请询问更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:39:25.843

方法名称是您可以通过按住键并单击要获取信息的方法`– tableView:willSelectRowAtIndexPath:` 在 Xcode 上轻松知道它。`alt/option`

编辑：

`– tableView:willSelectRowAtIndexPath:` 是一种方法“签名/名称”，它在代码中声明为

`- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath`

**参数**

`tableView` **：** 类型是`UITableView`

一个表视图对象，通知代理即将进行的选择。

`indexPath` **：**类型是`NSIndexPath`

在 tableView 中定位行的索引路径。

**`Return Value`** **()** 类型为 NSIndexPath

确认或更改所选行的索引路径对象。如果要选择另一个单元格，则返回 indexPath 以外的 NSIndexPath 对象。如果您不想选择该行，则返回 nil。

- 如此[处所示](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3awillSelectRowAtIndexPath%3a)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T08:23:45.733

方法名称是 -tableView: willSelectRowAtIndexPath:

':' 之后的单词在 'space' 之前是参数

() 中的单词是参数类型

PS：当然第一个（）是返回类型

# javascript - Javascript替换特定的特殊字符

> ID：11983021
> 
> 赞同：1
> 
> 时间：2012-08-16T08:07:35.317
> 
> 标签：javascript, regex, replace, special-characters

嗨，我无法更换五个“|||||” 到一个“|”。

```
var ss = "123|||||456|||||789|||||";
var ww = ss.replace(/[|||||]\W/g, "|"); 
```

我得到的输出是

```
123|||456|||789||| 
```

我应该写什么正确的正则表达式？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:10:50.503

您可以执行以下操作：

```
var ss = "123|||||456|||||789|||||";
console.log(ss.replace(/[|]{5}/g, "|")); 
```

正如评论中提到的，`[]`定义了一个字符类并匹配其中定义的任何字符。例如`[a-z]`将匹配小写字母。

但是，由于您只需要匹配管道 ( `|`) 字符，因此可以删除括号并将其转义，如下所示：

```
console.log(ss.replace(/\|{5}/g, "|")); 
```

它需要用 a 转义，`\`因为管道是 java 脚本中的特殊字符。管道后面的花括号`{5}`定义了您想要匹配的“前一个”的数量。

# python - Matplotlib 图例不起作用

> ID：11983024
> 
> 赞同：117
> 
> 时间：2012-08-16T08:07:48.110
> 
> 标签：python, plot, matplotlib

自从升级 matplotlib 以来，每当尝试创建图例时，我都会收到以下错误：

```
/usr/lib/pymodules/python2.7/matplotlib/legend.py:610: UserWarning: Legend does not support [<matplotlib.lines.Line2D object at 0x3a30810>]
Use proxy artist instead.

http://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist

  warnings.warn("Legend does not support %s\nUse proxy artist instead.\n\nhttp://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist\n" % (str(orig_handle),))
/usr/lib/pymodules/python2.7/matplotlib/legend.py:610: UserWarning: Legend does not support [<matplotlib.lines.Line2D object at 0x3a30990>]
Use proxy artist instead.

http://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist

  warnings.warn("Legend does not support %s\nUse proxy artist instead.\n\nhttp://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist\n" % (str(orig_handle),)) 
```

这甚至发生在像这样的简单脚本中：

```
import matplotlib.pyplot as plt

a = [1,2,3]
b = [4,5,6]
c = [7,8,9]

plot1 = plt.plot(a,b)
plot2 = plt.plot(a,c)

plt.legend([plot1,plot2],["plot 1", "plot 2"])
plt.show() 
```

我发现错误指向我的链接在诊断错误来源方面毫无用处。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-08-16T08:12:11.320

您应该添加逗号：

```
plot1, = plt.plot(a,b)
plot2, = plt.plot(a,c) 
```

您需要逗号的原因是因为 plt.plot() 返回一个线对象的元组，无论从命令实际创建了多少。没有逗号，“plot1”和“plot2”是元组而不是行对象，导致后面对 plt.legend() 的调用失败。

逗号隐含地解包结果，以便“plot1”和“plot2”自动成为元组中的第一个对象，而不是元组，即您真正想要的线对象。

[http://matplotlib.sourceforge.net/users/legend_guide.html#adjusting-the-order-of-legend-items](http://matplotlib.sourceforge.net/users/legend_guide.html#adjusting-the-order-of-legend-items)

[line, = plot(x,sin(x)) 逗号代表什么？](https://stackoverflow.com/questions/10422504/line-plotx-sinx-what-does-comma-stand-for?rq=1)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-08-01T09:51:17.013

使用“label”关键字，如下所示：

```
plt.plot(x, y, label='x vs. y') 
```

然后像这样添加图例：

```
plt.legend() 
```

图例将保留线条属性，如粗细、颜色等。

[![在此处输入图像描述](../Images/6621f0c0338b7223f3ce0b90a546e6c8.png)](https://i.stack.imgur.com/fqvyA.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-18T11:19:34.123

使用`handles`AKA`Proxy artists`

```
import matplotlib.lines as mlines
import matplotlib.pyplot as plt
# defining legend style and data
blue_line = mlines.Line2D([], [], color='blue', label='My Label')
reds_line = mlines.Line2D([], [], color='red', label='My Othes')

plt.legend(handles=[blue_line, reds_line])

plt.show() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-01T05:05:39.033

在绘制图形时使用标签，然后只有你可以使用图例。x 轴名称和 y 轴名称与图例名称不同。

# java - 错误的 ELF 解释器，在 Fedora 中使用 java 时

> ID：11983030
> 
> 赞同：2
> 
> 时间：2012-08-16T08:08:14.993
> 
> 标签：java, linux, fedora

我对 Linux 非常熟悉。我安装了从 oracle 下载的 jdk1.7（这是一个 rpm 文件）并更改了 .bash_profile 以添加 JAVAHOME 和 CLASSPATH，如下所示：

> ```
> JAVAHOME=/usr/java/jdk1.7.006 export JAVA_HOME
> 
> PATH=$JAVA_HOME/bin:$PATH export PATH
> 
> CLASSPATH=.:$JAVAHOME/lib/dt.jar:$JAVAHOME/lib/tools.jar export CLASSPATH 
> ```

我重新启动。但是当我尝试时：

> ```
> java -version 
> ```

将显示以下内容：

> ```
> bash: /usr/java/jdk1.7.0_06/bin/java: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory 
> ```

然后我尝试了：

> ```
> su -c 'yum install glibc.i686' 
> ```

并将导致：

> 加载的插件：langpacks、presto、refresh-packagekit 解决依赖关系 还有未完成的事务剩余。您可以考虑先运行 yum-complete-transaction 来完成它们。--> 运行事务检查 ---> 将安装包 glibc.i686 0:2.15-51.fc17 --> 处理依赖关系：libfreebl3.so(NSSRAWHASH3.12.3) 用于包：glibc-2.15-51.fc17.i686 --> 处理依赖：libfreebl3.so 用于包：glibc-2.15-51.fc17.i686 --> 运行事务检查 ---> 包 nss-softokn-freebl.i686 0:3.13.5-1.fc17 将是已安装 --> 完成依赖解决错误：受保护的多库版本：glibc-2.15-51.fc17.i686 ！= glibc-2.15-37.fc17.x8664 错误：受保护的多库版本：nss-softokn-freebl-3.13.5-1 .fc17.i686 != nss-softokn-freebl-3.13.4-2.fc17.x86_64

我只是不明白它有什么问题？

在我安装 jdk1.7 之前，我尝试了 java -version，我会得到一些响应，比如 openJDK 之类的。

顺便说一句，当我安装 java 时，在“完成”之前，它还显示了错误的 ELF 解释器错误，我忽略了它们。

如果你们中的任何人能提供解决方案，我将不胜感激。并原谅我糟糕的英语。

# ruby-on-rails - 基于与 ActiveRecord 和 Rails 的字符串比较查找对象

> ID：11983031
> 
> 赞同：1
> 
> 时间：2012-08-16T08:08:16.567
> 
> 标签：ruby-on-rails, ruby, string, activerecord, range

我有一个输入字符串，例如香蕉，并试图在数据库中找到相应的对象。该对象具有仅包含第一个字母的下限属性和上限属性。它们的长度没有定义。所以下限可以是“a”或“ananas”，上限可以是“b”或“ban”。如果给定的输入字符串以介于范围之间的字母开头，则以下查询有效：

`scope :by_name, lambda {|input_string| where('lower_limit <= :input AND upper_limit >= :input', input: input_string) }`

但如果上限由搜索字符串的第一个字母组成，则比较失败，因为 'banana' > 'ban'。

如何更改查询以使其起作用？

我正在使用 Ruby 1.9.3、Rails 3.2.3 和 ActiveRecord 3.2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:25:51.527

尝试使用 input: input_string[0..1] 代替

# c# - 如何使用 oledbConnection 连接到 SQL Server

> ID：11983032
> 
> 赞同：0
> 
> 时间：2012-08-16T08:08:29.100
> 
> 标签：c#, sql-server

我正在尝试使用 OledbConnection 连接到 SQL Server，但它显示错误

> *服务器不存在或访问被拒绝*

我的代码是

```
using (OleDbConnection conn = new OleDbConnection(ConnectionString))
{
   try
   {
      // test the connection with an open attempt
      conn.Open();
      this.Dispose();
   }
   catch (Exception ex)
   {
      // inform the user if the connection was not saved
      MessageBox.Show(ex.Message, "Connection Test");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:14:54.810

**[以下是MSSQL Server](http://connectionstrings.com/sql-server-2005)**的可用连接字符串列表。如果您使用**[System.Date.SqlClient](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.aspx)**命名空间会更好。

```
Using (SqlConnection connection = new SqlConnection(connectionString))
{
    try
    {
         connection.Open()
         // do something here
    }
    catch (SqlException ex)
    {
    }
    finally
    {
         connection.Close()
    } 
} 
```

# php - 为什么所有记录都被删除而不是一个？

> ID：11983035
> 
> 赞同：1
> 
> 时间：2012-08-16T08:08:36.143
> 
> 标签：php, symfony, doctrine-orm

为了从 Web 服务中删除游戏会话，我们定义了以下控制器。

我希望删除一个 Session 实体，而不是从数据库中删除所有记录。

```
SessionController.php

/**
 * @Route("/{id}/")
 * @Method({"DELETE"})
 */
public function deleteAction($id)
{
    $repository = $this->getSessionRepository();
    $session = $repository->find($id);

    $em = $this->getEntityManager();
    $em->remove($session);
    $em->flush();

    return new Response('', 200);
} 
```

services.yml 包含：

```
 sh.repository.session:
    class: ScavengerWebserviceBundle\Entity\SessionRepository
    factory_service: doctrine.orm.default_entity_manager
    factory_method: getRepository
    arguments:
      - 'ScavengerWebserviceBundle:Session'
/**
 * @return \Scavenger\WebserviceBundle\Entity\SessionRepository
 */
private function getSessionRepository()
{
    return $this->container->get('sh.repository.session');
} 
```

该实体包含：

```
<?php

namespace Scavenger\WebserviceBundle\Entity;

use Scavenger\WebserviceBundle\Entity\Battlezone;

use Doctrine\ORM\Mapping as ORM;
use \Doctrine\ORM\Mapping\OneToOne;
use \Doctrine\ORM\Mapping\ManyToMany;
use \Doctrine\ORM\Mapping\JoinTable;
use \Doctrine\ORM\Mapping\JoinColumn;

/**
 * Scavenger\WebserviceBundle\Entity\Session
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Scavenger\WebserviceBundle\Entity\SessionRepository")
 */
class Session
{

    const SESSION_ACTIVE = 0; //lol

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * @var integer $mrX
     *
     * @ORM\Column(name="mrX", type="integer")
     */
    private $mrX;

     /**
     * @var integer $causer
     *
     * @ORM\Column(name="causer", type="integer")
     */
    private $causer = 0;

    /**
     * @var integer $statusCode
     *
     * @ORM\Column(name="status_code", type="integer", nullable=false)
     */
    private $statusCode = self::SESSION_ACTIVE;

    /**
     * @ManyToMany(targetEntity="Scavenger\WebserviceBundle\Entity\User", mappedBy="sessions", cascade={"all"})
     */
    private $users;

    /**
     * @OneToOne(targetEntity="Scavenger\WebserviceBundle\Entity\Battlezone", cascade={"all"})
     * @JoinColumn(name="battlezone_id", referencedColumnName="id")
     */
    private $battlezone;

    /**
     * @var integer
     * @ORM\Column(name="start", type="integer") 
     */
    private $start = 0;

    /**
     * @var integer
     * @ORM\Column(name="end", type="integer")
     */
    private $end = 0;

    //a bunch of setters and getters ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:07:34.900

这是因为您在 $users 字段上设置了“cascade=all”。我猜你在用户实体的“会话”字段上也有相同的级联，因此如果你删除一些会话对象，与该对象相关的所有用户也将被删除，并且与这些用户相关的所有会话对象也将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:56:22.607

当您通过 find($id) 调用时，它调用了指向整个数据存储的对象，而它必须仅限于该对象指向的数据存储内的 1 个实体。

`model`在您的（如果可能的话）中创建一个“unsetData” 。

```
SessionController.php

/**
 * @Route("/{id}/")
 * @Method({"DELETE"})
 */
public function deleteAction($id)
{
    $session = $this->getSessionRepository()->find($id);
    $session->unsetData(); // Logically, unset($session->dataToUnset);
    $em->persist();
    $em->flush();

    return new Response('', 200);
} 
```

这是供参考的。我还没有尝试过这段代码，但是，如果没有，那么您现在已经知道路径，或者如果不知道，请恢复评论并将其排序！

# android - 在我的班级游戏视图上添加一个 textView

> ID：11983037
> 
> 赞同：1
> 
> 时间：2012-08-16T08:08:43.490
> 
> 标签：android, android-canvas, game-engine

我目前正在为 android 开发游戏。我想在我的类 gameView 上添加一个 textview。这是我的代码：

类 main.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<app.com.GameView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/game_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
<TextView 
        android:id = "@+id/score_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="0"
        android:paddingLeft="15dp"
        />
</FrameLayout> 
```

这是类活动：

```
public class GameActivity extends Activity {

/** Called when the activity is first created. */
private app.com.GameView gameView ;
private TextView scoreText;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gameView = (app.com.GameView)findViewById(R.id.game_view);
    scoreText = (TextView)findViewById(R.id.score_text);
    gameView.setScoreText(scoreText);
} 
```

这是类 GameView ：

```
private int score = 0;

 private TextView scoreText;

public void setscoreText(TextView tv){

this.scoreText = tv;
} 
```

但是当我使用 scoreText.setText(""+score) 时，却出现错误异常“CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触摸它的视图。”？请帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:26:31.603

您不能使用整数设置文本。

它首先需要转换为字符串。最简单的方法是：

```
scoreText.setText(score + ""); 
```

或者

```
scoreText.setText(Integer.toString(score)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:20:56.880

试试这个： scoreText.setText(String.valueOf(score));

编辑 ：

我认为您必须使用 Handler 类来发送消息以与 UI 交互。您在名为 LunarLander 的 Android SDK 示例中有一个很好的示例，它也是一个游戏。

我希望对你有所帮助。

# silverlight - 在 Silverlight 中将所有控件重置为初始状态

> ID：11983038
> 
> 赞同：0
> 
> 时间：2012-08-16T08:08:43.807
> 
> 标签：silverlight

我有一个 Silverlight 应用程序，其中包含一个巨大的搜索表单（该表单是网格），其中包含许多各种元素（组合框、文本框等）。如果需要，此控件的所有数据都从 LoadDate 事件中填充。我的要求是制作一个按钮，用于重置此网格内的所有元素，并以 LoadDate 事件之后的状态返回它们。

是否可以仅重新加载包含多个控件的网格？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:52:15.520

有人对此感兴趣吗，我解决了这个问题，查看搜索表单中的所有元素并根据它们的类型重置它们。[这是回答这个问题的链接](http://forums.silverlight.net/post/648452.aspx)

# perl - Perl: 错误信息: can´t locate ... in @INC

> ID：11983041
> 
> 赞同：3
> 
> 时间：2012-08-16T08:08:48.483
> 
> 标签：perl, compiler-errors

我正在尝试编译[此脚本](https://stackoverflow.com/questions/11965895/perl-string-manipulation-surrounding-a-word-with-a-character)，但我收到此消息：

> 无法在 @INC 中找到 Email/Address.pm（@INC 包含：C:/strawberry/perl/lib C:/strawberry/perl/site/lib C:\strawberry\perl\vendor\lib。）在 C: /strawberry/perl/lib/Regexp/Common/Email/Address.pm 第 9 行。BEGIN failed - 编译在 C:/strawberry/perl/lib/Regexp/Common/Email/Address.pm 第 9 行中止。编译失败在 (eval 1) 第 1 行需要。BEGIN 失败--编译在 C:\examples\script2.pl 第 4 行中止。

我不明白，因为我真的有这个根

> C:/strawberry/perl/lib/Regexp/Common/Email/Address.pm

**当我尝试编译我的脚本时，有人知道为什么我会收到此错误消息吗？**

太感谢了

* * *

我试着用这句话：

> 使用 lib 'C:/strawberry/perl/lib/Regexp/Common/Email'；

并将这两个句子作为评论：

```
use Regexp::Common qw[Email::Address];
  use Email::Address 
```

然后我得到这个错误

```
Global symbol "%RE" requires explicit package name at C:\examples\script2.pl lin
e 10.Execution of C:\examples\script2.pl aborted due to compilation errors. 
```

我看过[perldiag](http://perldoc.perl.org/perldiag.html)

> 全局符号“%s”需要显式包名 (F) 你说过“use strict”或“use strict vars”，这表明所有变量必须是词法范围的（使用“my”或“state”），声明事先使用“我们的”，或明确限定全局变量在哪个包中（使用“::”）。

但我发现这对我来说有点理论化，因为我知道你必须在代码的乞求处使用句子'use'来使用包。

顺便说一句，这是我的代码：

```
 use Regexp::Common qw[Email::Address];
  use Email::Address;
  while (<>) {
  my (@found) = /($RE{Email}{Address})/g;
  my (@addrs) = map $_->address, Email::Address->parse("@found");
  print "X-Addresses: ", join(", ", @addrs), "\n";
  } 
```

[我从我之前问过的一个问题中](https://stackoverflow.com/questions/11965895/perl-string-manipulation-surrounding-a-word-with-a-character)得到了这个代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T08:21:02.523

我认为问题是，您确实已[`Regexp::Common::Email::Address`](http://p3rl.org/Regexp::Common::Email::Address)安装。但是，您还需要[`Email::Address`](http://p3rl.org/Email::Address)，这是一个单独的模块。也就是说，您还应该在`C:/strawberry/perl/lib/Email/Address.pm`.

尝试使用 cpan 安装`Email::Address`，请参阅[安装缺少的 Perl 模块的最简单方法是什么？](https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module)

* * *

更新一点解释：

Perl 模块以分层方式组织。`::`包分隔符等于模块库路径中的目录。模块的全名/含义来源于包本身的名称和它的安装路径。假设您有名为`Restaurant::Bill`、`Hat::Bill`和的模块`Names::Male::Bill`。您将拥有三个名为 的不同文件`Bill.pm`，但它们代表的概念非常不同。它们将通过它们在模块库中的路径相互区分。

# php - SplObjectStorage::contains 和 SplObjectStorage::offsetExists 有什么区别？

> ID：11983042
> 
> 赞同：13
> 
> 时间：2012-08-16T08:08:50.433
> 
> 标签：php, spl, php-internals, splobjectstorage

PHP 文档不是很明确，只声明：

**SplObjectStorage::offsetExists** *检查存储中是否存在对象。*(PHP >= 5.3.0)

**SplObjectStorage::contains** *检查存储是否包含提供的对象。*(PHP >= 5.1.0)

这对我来说几乎是一样的。

**问题：**除了 offsetExists 仅在 5.3.0 中可用之外，两者之间有什么区别？

* * *

我进行的小测试...

```
$s = new SplObjectStorage();
$o1 = new StdClass();
$o2 = new StdClass();
$o3 = "I'm not an object!";
$s->attach($o1);

var_dump($s->contains($o1));
var_dump($s->offsetExists($o1));
echo '<br>';
var_dump($s->contains($o2));
var_dump($s->offsetExists($o2));
echo '<br>';
var_dump($s->contains($o3));
var_dump($s->offsetExists($o3)); 
```

输出：

```
boolean true
boolean true

boolean false
boolean false

Warning: SplObjectStorage::contains() expects parameter 1 to be object, string given in index.php on line 15
null

Warning: SplObjectStorage::offsetExists() expects parameter 1 to be object, string given in index.php on line 16
null 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T08:23:11.617

它们完全相同。

`offsetExists`被定义为**方法别名**，`contains`并被包含在内只是为了符合`ArrayAccess`接口。

您可以[在源代码](https://github.com/php/php-src/blob/php-5.4.5/ext/spl/spl_observer.c#L987)中看到`SPL_MA`正在使用（方法别名），并且还设置了几个其他别名。

*   offsetExists = 包含
*   offsetSet = 附加
*   offsetUnset = 分离

# python - python读取并验证输入url

> ID：11983049
> 
> 赞同：2
> 
> 时间：2012-08-16T08:09:38.820
> 
> 标签：python, url, input

> **可能重复：**
> [web2py url 验证器](https://stackoverflow.com/questions/11971369/web2py-url-validator)

你能帮我处理这段代码吗？

```
from urllib2 import Request, urlopen, URLError

url = raw_input('enter something')
req = Request(url)
try:
    response = urlopen(req)
except URLError, e:
    if hasattr(e, 'reason'):
        print 'We failed to reach a server.'
        print 'Reason: ', e.reason
    elif hasattr(e, 'code'):
        print 'The server couldn\'t fulfill the request.'
        print 'Error code: ', e.code
    else:
        print 'URL is good!' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:01:23.823

如果您尝试从[web2py url validator](https://stackoverflow.com/questions/11971369/web2py-url-validator/11974942#11974942)实现代码，您会注意到您已在不需要的地方添加并缩进 else。空格在 python 中很重要。我之前的答案中给出的代码是正确的，你只是复制不正确。您的代码应如下所示（与我之前的答案相同）：

```
from urllib2 import Request, urlopen, URLError

url = raw_input('enter something')
req = Request(url)
try:
    response = urlopen(req)
except URLError, e:
    if hasattr(e, 'reason'):
        print 'We failed to reach a server.'
        print 'Reason: ', e.reason
    elif hasattr(e, 'code'):
        print 'The server couldn\'t fulfill the request.'
        print 'Error code: ', e.code
else:
    print 'URL is good!' 
```

else 子句是 try 的一部分，但不是异常测试的一部分。基本上，如果没有抛出异常，则 url 是有效的。[如果您输入http://www.google.com](http://www.google.com)，以下代码将为您提供此结果

```
python test.py 
enter somethinghttp://www.google.com
URL is good! 
```

如果你输入[http://www.google.com/bad](http://www.google.com/bad)你会得到：

```
python test.py 
enter somethinghttp://www.google.com/bad
The server couldn't fulfill the request.
Error code:  404 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:17:31.857

尝试在您的输入中输入完整的 URL：

`entersomething http://www.google.com`

您需要指定请求的类型，以便它理解正确处理它（在本例中为`http`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:17:30.940

前缀 URL`http://`

例子`http://www.google.com`

```
In [16]: response = urllib2.urlopen("http://www.google.com")

In [17]: response
Out[17]: <addinfourl at 28222408 whose fp = <socket._fileobject object at 0x01AE59B0>> 
```

urllib2 模块定义了有助于在复杂世界中打开 URL（主要是 HTTP）的函数和类——基本和摘要身份验证、重定向、cookie 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:21:01.507

您提供的堆栈显示您收到 ValueError

```
"C:\Python25\lib\urllib2.py", line 241, in get_type raise ValueError, "unknown url type: %s" % self.__original ValueError: unknown url type: www.google.com 
```

因此，您可以为 ValueError 添加另一个 except 子句，以通知用户 url 无效。

或者，如果您打算*更正*网址，请使用`url.lower().startswith('http://') or ...`

另请注意， urlopen 可能会引发许多其他异常，因此您*可能*还想捕获一个通用的`Exception`. [你可以在这里](https://stackoverflow.com/questions/666022/what-errors-exceptions-do-i-need-to-handle-with-urllib2-request-urlopen)找到更详细的讨论

# client - 扩展jade模板并在客户端编译它们

> ID：11983059
> 
> 赞同：3
> 
> 时间：2012-08-16T08:10:47.797
> 
> 标签：client, extend, pug

我在我的 web 应用程序中使用玉作为模板。但我在客户端使用它。因此，翡翠模板​​的整个编译都是在客户的机器上完成的。但是我不能使用玉模板的扩展功能。由于某些原因，jade 模板无法扩展另一个模板，它不断给我诸如“加载路径失败”之类的错误。调试后我发现它需要jade.js，它已经在该目录中，并且所有其他依赖项都在该目录中，它仍然给出错误。请帮我解决这个问题

# java - 如何将泛型与异构映射一起使用？

> ID：11983067
> 
> 赞同：1
> 
> 时间：2012-08-16T08:11:45.570
> 
> 标签：java, generics, concurrency, java.util.concurrent, concurrenthashmap

我有一个实用方法可以帮助`ConcurrentMap.putIfAbsent`这样使用：

```
public static <K, V> V putIfAbsent(
        ConcurrentMap<K, V> map, K key, Callable<V> task) {
    try {
        V result = map.get(key);
        if (result == null) {
            V value = task.call();
            result = map.putIfAbsent(key, value);
            if (result == null) {
                result = value;
            }
        }
        return result;
    } catch (Exception ex) {
        throw new RuntimeException(ex);
    }
} 
```

现在我要处理这样一个异构的地图：

```
private ConcurrentMap<Class<?>, List<ClassHandler<?>>> handlerMap; 
```

以及向其添加处理程序的方法：

```
public <T> void addHandler(Class<T> c, ClassHandler<? super T> handler) {
    putIfAbsent(handlerMap, c, new Callable<List<ClassHandler<?>>>() {
        @Override
        public List<ClassHandler<?>> call() throws Exception {
            return new CopyOnWriteArrayList<>();
        }
    }).add(handler);
} 
```

到目前为止一切顺利，但是当我尝试处理课程时问题就来了，例如：

```
Class<String> c = String.class;
List<ClassHandler<?>> handlers = handlerMap.get(c);
if (handlers != null) {
    for (ClassHandler<?> c : handlers) {
        handler.handle(c);
    }
} 
```

但是，此代码无法编译：

```
error: method handle in class ClassHandler<T> cannot be applied to given types;
        handler.handle(c);
  required: Class<CAP#1>
  found: Class<String>
  reason: actual argument Class<String> cannot be converted to Class<CAP#1> by method invocation conversion
  where T is a type-variable:
    T extends Object declared in class ClassHandler
  where CAP#1 is a fresh type-variable:
    CAP#1 extends Object from capture of ?
1 error 
```

如果我使用`handler.handle((Class) c)`，代码会编译，但我会收到未经检查的警告。虽然我可以添加`@SuppressWarnings("unchecked")`注释，但如果没有更好的方法，这将是最后的选择。

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:34:36.223

对。map 本身的类型并不能保证类的类型参数和对应的类处理程序是相同的。（无论如何，没有类型会表达这一点。）但是，您正确地使用了自己的 add 方法来确保它们在放入时匹配。因此*您*可以相信它们是相同的。在这种情况下，只需将处理程序转换为适当参数化的类型（您将需要抑制警告）：

```
for (ClassHandler<?> handler : handlers) {
    ((ClassHandler<String>)handler).handle(c);
} 
```

# bash - 建立一个字符串

> ID：11983069
> 
> 赞同：9
> 
> 时间：2012-08-16T08:11:50.807
> 
> 标签：bash, ubuntu

我有这个代码：

```
#!/bin/bash

input="./user.cvs"

while IFS=';' read -r f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13
do

  path="./QRcodes/$f2$f3.png"

  vcard="BEGIN:VCARD%0AN;CHARSET=utf-8:$f3;$f2;;$f1;%0AADR;CHARSET=utf-8;INTL;PARCEL;WORK:;;$f10;$f11;;$f12;$f13%0AEMAIL;INTERNET:$f6%0AORG:$f4%0ATEL;WORK:$f8%0ATEL;FAX;WORK:$f9%0ATITLE:$f5%0AURL;WORK:$f7%0AEND:VCARD"

  latex=""

  encodedVCard=$(echo "$vcard" | sed -e 's/\+/\%2B/g')

  url="http://api.qrserver.com/v1/create-qr-code/?size=300x300&data=$encodedVCard"

  wget -O "$path" "$url"

  latex+="\n \\begin{tabular}{ C C } \\includegraphics[height=30mm]{graphic.png} & Name \\\\ \\end{tabular}"

  echo $latex

done < "$input" 
```

除了 'echo $latex' 外，一切正常，总是打印同一行而不是多次。我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T08:14:45.793

如果要附加到字符串，只需

```
latex="$latex newstring" 
```

或者

```
latex=${latex}newstring 
```

您需要注意 bash 不会将上述内容解释为新的 var 例如`"$a4`" 将被解释为变量而`a4`不是附加的。`$a``4`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:34:25.730

几个问题：

1.  反斜杠表达式在双引号内没有特殊处理，因此“\n”是两个字符，“\”和“n”，而不是单个换行符。使用 $'\n' 包含一个实际的换行符

2.  `echo $latex`扩展变量，但是 bash 对 . 中包含的任何空格`latex`（包括换行符）执行分词，因此`echo`. 您需要引用变量：`echo "$latex"`。

3.  正如其他人所指出的，您正在循环的每次迭代中重置变量。

把这一切放在一起，

```
input="./user.cvs"
latex=""

while IFS=';' read -r f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13
do

  path="./QRcodes/$f2$f3.png"

  vcard="BEGIN:VCARD%0AN;CHARSET=utf-8:$f3;$f2;;$f1;%0AADR;CHARSET=utf-8;INTL;PARCEL;WORK:;;$f10;$f11;;$f12;$f13%0AEMAIL;INTERNET:$f6%0AORG:$f4%0ATEL;WORK:$f8%0ATEL;FAX;WORK:$f9%0ATITLE:$f5%0AURL;WORK:$f7%0AEND:VCARD"

  #encodedVCard=$(echo "$vcard" | sed -e 's/\+/\%2B/g')
  # You can use bash parameter expansion instead of piping into sed 
  encodedVCard="${vcard//+/%2B}"

  url="http://api.qrserver.com/v1/create-qr-code/?size=300x300&data=$encodedVCard"
  wget -O "$path" "$url"
  latex+=$'\n \\begin{tabular}{ C C } \\includegraphics[height=30mm]{graphic.png} & Name \\\\ \\end{tabular}'

  echo "$latex"

done < "$input" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T08:24:31.603

你有

```
latex="" 
```

在循环中，所以它每次都会重置它。把它放在循环开始之前。

# c++ - C ++将函数指针转换为唯一的“哈希”键

> ID：11983070
> 
> 赞同：2
> 
> 时间：2012-08-16T08:11:56.487
> 
> 标签：c++, hash, function-pointers

底部的原始问题。

我想我明白你们现在在说什么——因为成员函数指针的内部结构是编译器/机器特定的，所以我真的不可能做到这一点。因此，即使在我测试它时它可以工作——我不能保证它会在其他编译器/机器上运行。

那么还有其他方法可以实现我想要的吗？

我有一个模板类和该类的基本模板类，并且我有一个委托类，其中包含委托类在调用时应调用的所有事件的 std::map。

我需要一个映射的原因是，既要确保相同的成员函数（指向成员函数的事件）不会被添加一次，又可以使用最初使用的对象和成员函数从映射中删除事件实例化事件对象。

```
template <class T_arg1> struct EventBase1
{
public:
    bool operator < (const EventBase1 &event1) const { return _key < event1._key; };
    virtual void operator()(T_arg1 t1) const {};
    std::pair<intptr_t, intptr_t> _key;
};

template <class T, class T_arg1> struct Event1: public EventBase1<T_arg1>
{
    template <class T_arg1> friend class Delegate1;
    typedef typename void (T::*Method)(T_arg1);
private:
    Method _method;
    T* _object;
public:
    Event1(T* object, Method method): _object(object), _method(method)
    {
        _key = std::pair<intptr_t, intptr_t>(reinterpret_cast<intptr_t>(object), reinterpret_cast<intptr_t>( reinterpret_cast<void*&>(method)));
    };
    virtual void operator()(T_arg1 t1) const {
        (_object->*_method)(t1);
    };
};

template <class T_arg1> class Delegate1
{
public:
    typedef typename EventBase1<T_arg1> T_event;
    void operator += (T_event* observer)
    {
        assert(observer);
        _observers[*observer] = observer;
    };
    void operator -= (const T_event &observer)
    {
        std::map<T_event, T_event*>::iterator i = _observers.find(observer);
        if(i != _observers.end()) {
            delete i->second;
            _observers.erase(i);
        }
    };
    void operator()(T_arg1 t1)
    {
        for(std::map<T_event, T_event*>::iterator i = _observers.begin(); i != _observers.end(); i++) {
            (*(i->second))(t1);
        }
    };
private:
    std::map<T_event, T_event*> _observers;     
}; 
```

**原始问题：**

我将函数指针存储在 a 中`std::map`，并且我正在为地图生成我的密钥，如下所示`std::pair<int, int>( (int)((int*)object), (int)(static_cast<const void*>(&method)) )`：

`method`是函数（方法）指针，`object`是指向方法对象的指针。

它有效，但是我偷偷怀疑我获得密钥第二部分的方式并不完全正确。

我从来没有完全理解函数指针，但我想我得到的是指针的地址而不是函数的地址，编译器不会让我这样做`((int)(static_cast<const void*>(method)))`。

所以我的问题是 - 我如何从函数指针中获取一个唯一键，如果我稍后从另一个指向相同方法的函数指针中获取键，这将是相同的？

在此先感谢，马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:30:54.160

第二个是不合法的：形式上，您不能将指向函数的指针转换为指向数据的指针（并且 a`void*`是指向数据的指针）。此外，不能保证您能够将任何指针转换为 `int`; `int`仅当至少与指针一样大时，转换才合法（这意味着您的代码应该无法在大多数 64 位系统上编译）。

有几种方法可以解决这个问题。首先，在大多数（全部？）现代机器上，函数指针和数据指针*确实*具有相同的大小和表示。（事实上​​，Posix 需要它。即使在我使用的第一台 Unix 机器上不是这种情况。）如果我们假设这一点，您可以通过使用来保证足够大的整数类型`intptr_t`，并使用附加的“欺骗”编译器间接级别：

```
std::pair<intptr_t, intptr_t>(
    reinterpret_cast<intptr_t>( reinterpret_cast<void*&>( object ) ),
    reinterpret_cast<intptr_t>( reinterpret_cast<void*&>( method ) ) ) 
```

（这假设`object`and`method`是您指向对象和函数的指针。）

请注意，这不适**用于**指向成员函数的指针。指向成员函数的指针是完全不同的野兽，我认为没有任何有效的方法可以以这种方式将它们用作键（因为在某些情况下，它们可能并且经常包含填充或未设置的字段） .

就此而言，正式地，即使对于普通指针，也不能真正保证这一点。该标准允许指针具有无关位，或者允许几个不同的指针表示比较相等。然而，在实践中，它在大多数（所有？）现代机器上都是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:21:43.047

你应该写得很好：

```
reinterpret_cast<uintptr_t>(method) 
```

[编辑] - 对于指向方法的指针，您必须使用 c 风格的强制转换，如本 SO 中所述：[reinterpret_cast to void* not working with function pointers](https://stackoverflow.com/questions/1304736/reinterpret-cast-to-void-not-working-with-function-pointers)

&method 是因为您怀疑指向指针的指针，所以它不是您想要的

uintptr_t 比 int 更好，因为它保证与指针大小相同

# python - 在 Appengine 上的 jinja2 中禁用自动转义

> ID：11983078
> 
> 赞同：0
> 
> 时间：2012-08-16T08:12:35.630
> 
> 标签：python, google-app-engine, jinja2, webapp2

默认情况下，jinja2 自动转义所有内容，我想阻止它。我在 BaseHandler 类中使用以下代码：

```
@webapp2.cached_property
def jinja2(self):
    # Returns a Jinja2 renderer cached in the app registry.
    return jinja2.get_jinja2(app=self.app) 
```

根据[文档](http://webapp-improved.appspot.com/api/webapp2_extras/jinja2.html)，get_jinja2() 有一个可调用的“工厂”参数，默认为 Jinja2()。我想我需要将其更改为 Jinja2(config={'autoescape':False})，但是如何为工厂指定参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:04:58.643

您应该`get_jinja2`使用`factory`set 调用一个可调用的对象，使用您的客户参数构造 jinja 实例：

```
@webapp2.cached_property
def jinja2(self):
    # Returns a Jinja2 renderer cached in the app registry, with no autoescaping.
    return jinja2.get_jinja2(lambda app: jinja2.Jinja2(app=app,config={'environment_args':{'autoescape':False}})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:09:06.580

可能你不需要转义整个模板，在这种情况下你可以试试标签：

```
 `{{autoescape false}}` 
```

有关更多详细信息，请尝试 [文档](http://flask.pocoo.org/docs/templating/#controlling-autoescaping)：

# matlab - 相对于像素的图像大小

> ID：11983079
> 
> 赞同：0
> 
> 时间：2012-08-16T07:28:01.357
> 
> 标签：matlab, graphics

我想增加相对于像素的图像大小，即大小为 150x225 的图像应更改为 250x250。我怎样才能在 Matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:17:42.173

您可以使用 matlab 函数`imresize`。

例如`B = imresize(A, [250 250]);` ，`A`您的初始图像大小（150x225）在哪里。

# ios - CFString(immutable) 不断增加

> ID：11983082
> 
> 赞同：1
> 
> 时间：2012-08-16T08:13:00.653
> 
> 标签：ios, ipad, ios5

我开发了一个 ipad 应用程序，该应用程序因内存警告而崩溃，我进行了分析并发现 CFString（不可变）即使我没有触摸任何东西也在不断增加。谁能告诉我为什么会这样。

提前致谢。

# rest - 交付和使用 Azure REST-API SharedKey 进行 Blob 上传

> ID：11983084
> 
> 赞同：2
> 
> 时间：2012-08-16T08:13:12.540
> 
> 标签：rest, azure, azure-storage

我们目前使用 REST API（基于 microsoft 示例）从 .NET 客户端配置文件机器上逐块上传 Blob。REST API 示例直接使用 Azure 存储帐户名称和访问密钥在请求标头中构造 SharedKey 条目。对于生产代码，我们需要在我们的服务器上计算 SharedKey，并将其交付给客户端以在会话期间使用。

为 blob 创建 SharedKey 的示例为我提供了包含访问参数的 Url 和查询字符串。

我的问题：如何将此 Url/查询字符串键格式与 Azure REST API 所需的 SharedKey 标头条目结合使用？

非常感谢任何指针或提示！R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:17:25.387

干得好。显然，可以对这段代码进行很多改进 :) 试一试。请让我知道它是否适合您。我能够使用以下代码在开发存储中上传 blob：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Web;
using System.Net;
using System.Collections.Specialized;
using System.Globalization;

namespace UploadBlobUsingSASUrl
{
    class Program
    {
        //This is part of SAS signature (query string). We will construct the URI later using this.
        private static string sasSignature = "sr=c&st=2012-08-16T14%3A38%3A48Z&se=2012-08-16T15%3A38%3A48Z&sp=w&sig=aNTLYQtwA1UmjG7j8Lg44t8YThL16FkNYBi54kl4ZKo%3D";
        //Blob storage endpoint
        private static string blobStorageEndpoint = "http://127.0.0.1:10000/devstoreaccount1";
        //Blob container name
        private static string blobContainerName = "[blob container name. SAS URI with Write permission must be created on this blob container]";
        //File to upload
        private static string fileToUpload = @"[Full path of the file you wish to upload]";
        //This is the default block size (This application always assumes that a file will be split in blocks and then uploaded).
        private static int blockSize = 256 * 1024;//256 KB
        //Storage service version (Unless you're using latest SAS related changes in cloud storage, use this version). For development storage always use this version.
        private static string x_ms_version = "2011-08-18";
        //Template for put block list
        private static string blockListTemplate = @"{0}";
        // Template for block id (to be included in put block list template)
        private static string blockIdTemplate = "{0}";
        //We'll keep a list of block ids.
        private static List blockIds = new List();
        static void Main(string[] args)
        {

        FileInfo file = new FileInfo(fileToUpload);
        long totalFileSize = file.Length;//Get the file size
        long bytesFrom = 0;
        long bytesRemaining = totalFileSize;
        string blobName = file.Name;
        //This is the base URI which will be used for put blocks and put block list operations.
        //It is essentially would be something like "http://127.0.0.1:10000/devstoreaccount1/myblobcontainer/myblobname?sassignature"
        string baseUri = string.Format("{0}/{1}/{2}?{3}", blobStorageEndpoint, blobContainerName, blobName, sasSignature);
        int counter = 0;
        //In this loop, we'll read file in chunks and try and upload one chunk at a time.
        while (true)
        {
            int bytesToRead = blockSize;
            if (bytesRemaining < blockSize)
            {
                bytesToRead = (int)bytesRemaining;
            }
            //Read the file in chunks
            byte[] fileContents = ReadFile(fileToUpload, bytesFrom, bytesToRead);
            bytesRemaining -= fileContents.Length;
            bytesFrom += fileContents.Length;
            //Create block id
            string blockId = string.Format("Block-{0:D5}", counter);
            //Append that to the block id list.
            blockIds.Add(blockId);
            //Now let's upload the block.
            var isBlockUploaded = UploadBlock(baseUri, fileContents, blockId);
            Console.WriteLine("Block Id: " + blockId + " Block Size: " + fileContents.Length + " Uploaded: " + isBlockUploaded);
            counter++;
            if (bytesRemaining <= 0)
            {
                break;
            }
        }
        //All blocks uploaded, now let's commit the block list
        var isBlockListCommitted = CommitBlockList(baseUri, blockIds);
        Console.WriteLine("Is Block List Committed: " + isBlockListCommitted);
        Console.WriteLine("Press any key to terminate the program ....");
        Console.ReadLine();
    }

    /// <summary>
    /// This function reads a chunk of the file and returns that as byte array.
    /// </summary>
    /// <param name="fileName"></param>
    /// <param name="bytesFrom"></param>
    /// <param name="bytesToRead"></param>
    /// <returns></returns>
    private static byte[] ReadFile(string fileName, long bytesFrom, int bytesToRead)
    {
        using (FileStream fs = new FileStream(fileName, FileMode.Open))
        {
            byte[] byteArray = new byte[bytesToRead];
            fs.Seek(bytesFrom, SeekOrigin.Begin);
            fs.Read(byteArray, 0, bytesToRead);
            return byteArray;
        }
    }

    /// <summary>
    /// This function uploads a block.
    /// </summary>
    /// <param name="baseUri"></param>
    /// <param name="blockContents"></param>
    /// <param name="blockId"></param>
    /// <returns></returns>
    private static bool UploadBlock(string baseUri, byte[] blockContents, string blockId)
    {
        bool isBlockUploaded = false;
        //Create request URI - 
        string uploadBlockUri = string.Format("{0}&comp=block&blockId={1}", baseUri, Convert.ToBase64String(Encoding.UTF8.GetBytes(blockId)));
        // Create request object
        var request = (HttpWebRequest) HttpWebRequest.Create(uploadBlockUri);
        NameValueCollection requestHeaders = new NameValueCollection();
        var requestDate = DateTime.UtcNow;
        //Add request headers. Please note that since we're using SAS URI, we don't really need "Authorization" header.
        requestHeaders.Add("x-ms-date", string.Format(CultureInfo.InvariantCulture, "{0:R}", requestDate));
        requestHeaders.Add("x-ms-version", x_ms_version);
        request.Headers.Add(requestHeaders);
        //Set content length header.
        request.ContentLength = blockContents.Length;
        //Set request HTTP method.
        request.Method = "PUT";

        // Send the request
        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(blockContents, 0, blockContents.Length);
        }
        // Get the response
        using (var response = (HttpWebResponse)request.GetResponse())
        {
            isBlockUploaded = response.StatusCode.Equals(HttpStatusCode.Created);
        }
        return isBlockUploaded;
    }

    /// <summary>
    /// This function commits the block list.
    /// </summary>
    /// <param name="baseUri"></param>
    /// <param name="blockIds"></param>
    /// <returns></returns>
    private static bool CommitBlockList(string baseUri, List<string> blockIds)
    {
        bool isBlockListCommitted = false;
        //Create the request payload
        StringBuilder blockIdsPayload = new StringBuilder();
        foreach (var blockId in blockIds)
        {
            blockIdsPayload.AppendFormat(blockIdTemplate, Convert.ToBase64String(Encoding.UTF8.GetBytes(blockId)));
        }
        string putBlockListPayload = string.Format(blockListTemplate, blockIdsPayload.ToString());
        // Create request URI
        string putBlockListUrl = string.Format("{0}&comp=blocklist", baseUri);
        // Create request object.
        var request = (HttpWebRequest)HttpWebRequest.Create(putBlockListUrl);
        NameValueCollection requestHeaders = new NameValueCollection();
        //Add request headers. Please note that since we're using SAS URI, we don't really need "Authorization" header.
        var requestDate = DateTime.UtcNow;
        requestHeaders.Add("x-ms-date", string.Format(CultureInfo.InvariantCulture, "{0:R}", requestDate));
        requestHeaders.Add("x-ms-version", x_ms_version);
        byte[] requestPayload = Encoding.UTF8.GetBytes(putBlockListPayload);
        //Set content length header.
        request.ContentLength = requestPayload.Length;
        request.Headers.Add(requestHeaders);
        //Set request HTTP method.
        request.Method = "PUT";

        // Send the request
        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(requestPayload, 0, requestPayload.Length);
        }

        // Get the response
        using (var response = (HttpWebResponse)request.GetResponse())
        {
            isBlockListCommitted = response.StatusCode.Equals(HttpStatusCode.Created);
        }
        return isBlockListCommitted;

    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:45:26.187

我相信您需要生成共享访问签名 (SAS) URL。我对么？当您生成 SAS URL 时，权限会在 URI 本身中进行编码，这样您就不必再使用授权密钥了。

对于生成 SAS，您可能会发现这两个链接很有用：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh508996](http://msdn.microsoft.com/en-us/library/windowsazure/hh508996)

[http://msdn.microsoft.com/en-us/library/windowsazure/ee395415](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:52:40.537

这是我在仿真环境中成功测试的结果代码（减去一些清理工作）。首先是客户端代码，它改编自 Microsoft REST API 示例 BlobHelper.cs 的方法。然后是传递客户端代码使用的端点 URL 的服务器端代码。再次感谢您的提示！R

```
//
// Client side: The "Endpoint" used below is the Uri as returned from the Server-side  code below.
//
//
    public bool PutBlock(int blockId, string[] blockIds, byte[] value)
    {
        return Retry<bool>(delegate()
        {
            HttpWebResponse response;

            try
            {
                SortedList<string, string> headers = new SortedList<string, string>();

                byte[] blockIdBytes = BitConverter.GetBytes(blockId);
                string blockIdBase64 = Convert.ToBase64String(blockIdBytes);

                blockIds[blockId] = blockIdBase64;

                // SharedAccessKey version.
                //End result will look similar to this in Fiddler if correct:
                //PUT http://127.0.0.1:10000/devstoreaccount1/uploads/aecdfa39-7eaa-474a-9333-ecf43e6a0508?st=2012-08-17T16%3A11%3A53Z&se=2012-08-17T16%3A51%3A53Z&sr=b&sp=rw&sig=2%2Fs0R1L78S55pW5o2WontVvlZypjkTriWoljnycPbFc%3D&comp=block&blockid=AAAAAA== HTTP/1.1
                //
                response = CreateRESTRequestDirectUtf8("PUT", "&comp=block&blockid=" + blockIdBase64, value, headers).GetResponse() as HttpWebResponse;

                response.Close();
                return true;
            }
            catch (WebException ex)
            {
                if (ex.Status == WebExceptionStatus.ProtocolError &&
                    ex.Response != null &&
                    (int)((HttpWebResponse)ex.Response).StatusCode == 409) 
                    return false;

                throw;
            }
        });
    }

    ///<summary>
    /// Put block list - complete creation of blob based on uploaded content.
    /// </summary>
    /// <param name="container">The container.</param>
    /// <param name="blob">The BLOB.</param>
    /// <param name="blockIds">The block ids.</param>
    /// <returns></returns>
    public bool PutBlockList(string[] blockIds)
    {
        return Retry<bool>(delegate()
        {
            HttpWebResponse response;

            try
            {
                StringBuilder content = new StringBuilder();
                content.Append("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
                content.Append("<BlockList>");
                for (int i = 0; i < blockIds.Length; i++)
                {
                    content.Append("<Latest>" + blockIds[i] + "</Latest>");
                }
                content.Append("</BlockList>");
                response = CreateRESTRequest("PUT", "&comp=blocklist", content.ToString(), null).GetResponse() as HttpWebResponse;

                response.Close();
                return true;
            }
            catch (WebException ex)
            {
                if (ex.Status == WebExceptionStatus.ProtocolError &&
                    ex.Response != null &&
                    (int)(ex.Response as HttpWebResponse).StatusCode == 409)
                    return false;

                throw;
            }
        });
    }

    /// <summary>
    /// Construct and issue a REST request and return the response.
    /// </summary>
    /// <param name="method">The method.</param>
    /// <param name="resource">The resource.</param>
    /// <param name="requestBody">The request body.</param>
    /// <param name="headers">The headers.</param>
    /// <param name="ifMatch">If match.</param>
    /// <param name="md5">The MD5.</param>
    /// <returns></returns>
    public HttpWebRequest CreateRESTRequest(string method, string resource, string requestBody = null, SortedList<string, string> headers = null,
        string ifMatch = "", string md5 = "")
    {
        byte[] byteArray = null;
        DateTime now = DateTime.UtcNow;
        Uri uri = new Uri(Endpoint + resource);

        HttpWebRequest request = HttpWebRequest.Create(uri) as HttpWebRequest;
        request.Method = method;
        request.ContentLength = 0;
        request.Headers.Add("x-ms-date", now.ToString("R", System.Globalization.CultureInfo.InvariantCulture));
        request.Headers.Add("x-ms-version", "2009-09-19"); //2009-09-19, 2011-08-18

        if (IsTableStorage)
        {
            request.ContentType = "application/atom+xml";

            request.Headers.Add("DataServiceVersion", "1.0;NetFx");
            request.Headers.Add("MaxDataServiceVersion", "1.0;NetFx");
        }

        if (headers != null)
        {
            foreach (KeyValuePair<string, string> header in headers)
            {
                request.Headers.Add(header.Key, header.Value);
            }
        }

        if (!String.IsNullOrEmpty(requestBody))
        {
            request.Headers.Add("Accept-Charset", "UTF-8");

            byteArray = Encoding.UTF8.GetBytes(requestBody);
            request.ContentLength = byteArray.Length;
        }

        // We now get our SharedAccessKey from the server
        //request.Headers.Add("Authorization", AuthorizationHeader(method, now, request, ifMatch, md5));

        if (!String.IsNullOrEmpty(requestBody))
        {
            request.GetRequestStream().Write(byteArray, 0, byteArray.Length);
        }
        return request;
    }

    /// <summary>
    /// Creates the REST request direct UTF8.
    /// </summary>
    /// <param name="method">The method.</param>
    /// <param name="resource">The resource.</param>
    /// <param name="requestBodyUtf8">The request body UTF8.</param>
    /// <param name="headers">The headers.</param>
    /// <param name="ifMatch">If match.</param>
    /// <param name="md5">The MD5.</param>
    /// <returns></returns>
    private HttpWebRequest CreateRESTRequestDirectUtf8(string method, string resource, byte[] requestBodyUtf8, SortedList<string, string> headers = null, string ifMatch = "", string md5 = "")
    {
        //byte[] byteArray = null;
        DateTime now = DateTime.UtcNow;
        Uri uri = new Uri(Endpoint + resource);

        HttpWebRequest request = HttpWebRequest.Create(uri) as HttpWebRequest;
        request.Method = method;
        request.ContentLength = 0;
        request.Headers.Add("x-ms-date", now.ToString("R", System.Globalization.CultureInfo.InvariantCulture));
        request.Headers.Add("x-ms-version", "2009-09-19"); //2009-09-19, 2011-08-18

        if (IsTableStorage)
        {
            request.ContentType = "application/atom+xml";

            request.Headers.Add("DataServiceVersion", "1.0;NetFx");
            request.Headers.Add("MaxDataServiceVersion", "1.0;NetFx");
        }

        // Additional headers can be passed in as a formal parameter:
        if (headers != null)
        {
            foreach (KeyValuePair<string, string> header in headers)
            {
                request.Headers.Add(header.Key, header.Value);
            }
        }

        if (requestBodyUtf8 != null)
        {
            request.Headers.Add("Accept-Charset", "UTF-8");
            request.ContentLength = requestBodyUtf8.Length;
        }

        // We now get our SharedAccessKey from the server 
        //request.Headers.Add("Authorization", AuthorizationHeader(method, now, request, ifMatch, md5));

        if (requestBodyUtf8 != null)
        {
            request.GetRequestStream().Write(requestBodyUtf8, 0, requestBodyUtf8.Length);
        }

        return request;
    }

    //
    // Server side: The returned Uri here is the "Endpoint" used in the client code.
    //
    /// <summary>
    /// Gets the blob-level shared access signature for the named blob
    /// </summary>
    /// <param name="blobName">The unique blob name Guid.</param>
    /// <returns>The fully qualified Azure Shared Access Signature Query String to be used in azure upload connections</returns>
    public Uri GetBlobUploadUrl(Guid blobName)
    {
        string containerName = BlobContainerName;
        const string permissions = "rw";
        string sharedAccessSignature = CreateSharedAccessSignature(containerName, blobName.ToString(), permissions);

        string urlPath;
        if (Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.IsEmulated)
        { // Emulation environment
          urlPath = String.Format("{0}/{1}/{2}{3}", _blobEndpoint, containerName, blobName, sharedAccessSignature);               
        }
        else
        { // Cloud
            urlPath = String.Format("{0}{1}/{2}{3}", _blobEndpoint, containerName, blobName, sharedAccessSignature);
        }

        Uri uri = new Uri(urlPath);

        return uri;
    }

    /// <summary>
    /// Creates a blob-level shared access signature.
    /// </summary>
    /// <param name="containerName">The blob container name.</param>
    /// <param name="blobName">The blob name, a unique ID which will be passed back to the client.</param>
    /// <param name="permissions">String of access levels, "r" = read, "w" = write "rw" = both etc.</param>
    /// <returns>The fully qualified Azure Shared Access Signature Query String</returns>
    private string CreateSharedAccessSignature(string containerName, string blobName, string permissions)
    {
        // SAS without stored container policy
        const string iso8061Format = "{0:yyyy-MM-ddTHH:mm:ssZ}";
        DateTime startTime = DateTime.UtcNow.AddMinutes(-10d); //UtcNow;
        DateTime expiryTime = startTime.AddMinutes(40d);
        string start = string.Format(iso8061Format, startTime);
        string expiry = string.Format(iso8061Format, expiryTime);
        string stringToSign = string.Format("{0}\n{1}\n{2}\n/{3}/{4}/{5}\n", permissions, start, expiry, _accountName, containerName, blobName);

        // SAS with stored container policy
        //string stringToSign = String.Format("\n\n\n/{0}/{1}\n{2}", accountName, containerName, policyId);

        string rawSignature = String.Empty;
        Byte[] keyBytes = Convert.FromBase64String(_accountKey); 
        using (HMACSHA256 hmacSha256 = new HMACSHA256(keyBytes))
        {
            Byte[] utf8EncodedStringToSign = System.Text.Encoding.UTF8.GetBytes(stringToSign);
            Byte[] signatureBytes = hmacSha256.ComputeHash(utf8EncodedStringToSign);
            rawSignature = Convert.ToBase64String(signatureBytes);
        }

        string sharedAccessSignature = String.Format("?st={0}&se={1}&sr=b&sp={2}&sig={3}", Uri.EscapeDataString(start), Uri.EscapeDataString(expiry), permissions, Uri.EscapeDataString(rawSignature));
        //
        // End result will look like this in Fiddler if correct:
        //PUT http://127.0.0.1:10000/devstoreaccount1/uploads/aecdfa39-7eaa-474a-9333-ecf43e6a0508?st=2012-08-17T16%3A11%3A53Z&se=2012-08-17T16%3A51%3A53Z&sr=b&sp=rw&sig=2%2Fs0R1L78S55uW5o2WontVvrZypckTriWoijnyrPbFc%3D&comp=block&blockid=AAAAAA== HTTP/1.1
        //
        return sharedAccessSignature;
    } 
```

# windows-phone-7 - 从 wp7 应用程序启动 Skype

> ID：11983085
> 
> 赞同：0
> 
> 时间：2012-08-16T08:13:16.440
> 
> 标签：windows-phone-7, skype4com

我想从我的 windows phone 7 应用程序启动 Skype，我找到了一些使用 android 和 iPhone 的方法，但无法在 windows phone 7 中获得任何帮助，这可能吗？或者我们怎么能这样做？如果有一些可用的库或任何可以提供帮助的示例代码，请分享。谢谢

问候扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:40:26.297

在 Windows Phone 上启动 Skype？

在当前适用于 Windows Phone 7 的 SDK 中，这是不可能的。

# java - 从字符串中获取日期格式

> ID：11983087
> 
> 赞同：-3
> 
> 时间：2012-08-16T08:13:18.843
> 
> 标签：java, string, date

Android：我将共享首选项中的日期保存为字符串。

```
Date now = new Date(new Date().getTime());
savePreferences(key, "" + now); 
```

我想从字符串中取回日期格式，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:15:53.183

试试这个功能。

```
public static Date convertStringToDate(String startDate) throws ParseException
{
    String myFormatString = // Your stored date format like "dd-mm-yyyy"
    SimpleDateFormat df = new SimpleDateFormat(myFormatString);
    Date startingDate = df.parse(startDate);
    return startingDate;
} 
```

***将毫秒转换为日期。***

```
long yourmilliseconds = 1119193190;
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm");

Date resultdate = new Date(yourmilliseconds);
System.out.println(sdf.format(resultdate)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:19:59.970

我假设您使用`java.util.Date`的是已弃用的。您应该改用[GregorianCalendar](http://developer.android.com/reference/java/util/GregorianCalendar.html)，然后将其保存为 long using `getTimeInMillis()`.

这使它更容易使用。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T07:18:28.183

您正在隐式调用`toString`Date 实例上的方法。不幸的是，该类使用较差的格式来呈现字符串。一个主要问题是使用的 3 个字母的时区代码既不标准化也不唯一（存在重复，例如 EST 和 IST）。应该避免这种输出。

实际上，应该避免使用所有 java.util.Date/Calendar 类。相反，使用[Joda-Time](http://www.joda.org/joda-time/)或 Java 8 的新[java.time.* classes](http://download.java.net/jdk8/docs/api/java/time/package-summary.html)。

此外，其他答案建议写自一个纪元以来的毫秒数。你可以这样做，但它是模棱两可的。什么时代？不止一个，尽管 Unix 纪元很常见，并且确实被 java.util.Date 和 Joda-Time 使用。这个数字是什么时间单位？旧的 Unix 风格是存储秒数，而 java.util.Date 和 Joda-Time 使用毫秒，而新的 Java 8 java.time* 类使用纳秒。

明确的方法是以[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式存储字符串，最好是[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)（无时区偏移）。然后在运行时在您的用户界面中，根据需要转换为其他格式和其他时区。

```
String string = new DateTime( DateTimeZone.UTC ).toString(); 
```

得到……</p>

```
string: 2013-12-27T07:15:00.395Z 
```

# java - 如何将 Java 项目导入 Eclipse？

> ID：11983088
> 
> 赞同：17
> 
> 时间：2012-08-16T08:13:25.647
> 
> 标签：java, eclipse, import, project

我试图导出一个 Java 项目。我能够通过使用选项 Export -> Java -> JAR file 创建一个 JAR 文件。我无法将此 jar 文件导入 Eclipse（java 没有导入选项）。我在这里做错什么了吗？

为 Web 开发人员使用 Eclipse Java EE IDE（版本：Juno Release）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-16T08:25:18.133

有一种比导出和导入 jar 更简单的方法。假设您的项目名为 MyProject123。只是：

1.  只需使用文件管理器打开工作区，
2.  复制包含该项目的文件夹 MyProject123 并将其粘贴到其他工作区。
3.  打开eclipse并新建一个名为MyProject123的Java项目

Eclipse 将识别工作区中有一个具有该名称的项目并将其导入。您所要做的就是在新项目上进行刷新（按 F5）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T08:21:50.767

为了能够重新导入项目而不是使用 JAR，请尝试使用“存档文件”，如下所示。

## 导出到存档

`File -> Export...`

`General -> Archive File`像这样选择导出类型：

![在此处输入图像描述](../Images/6a99ee9e1b8199ecdbdf08e9fe6705fb.png)

接着，

![在此处输入图像描述](../Images/f50ace9290981e2328c21796cf459420.png)

## 从上述存档导入回来

`File -> Import...`

选择`General -> Archive File`然后设置如下：

![在此处输入图像描述](../Images/168e7f2701826b9168c43981c0a63a01.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T08:17:02.663

遵循以下步骤：

`Import Project -> JavaEE -> App Client Jar File -> Browse and select jar -> OK`

你完成了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-28T03:11:11.637

去

File-> import 现在在搜索栏中输入“existing”点击“import existing project into workspace”选择你项目的根文件夹

点击确定导入

如需视频帮助，请访问 [https://www.youtube.com/watch?v=wsMPhZTxiF4](https://www.youtube.com/watch?v=wsMPhZTxiF4)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-29T11:10:21.867

这是您可以申请的步骤。

**Import Project -> JavaEE -> App Client Jar File -> Browse and select jar -> OK**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T08:26:17.203

您可以从`Eclipse File->Import->General->Archive File`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T23:28:34.590

```
File -> Import -> General -> Archive File 
```

这将在 Eclipse 中导入您的项目。

此外，您需要通过配置构建路径在外部添加 libs/jars。

# ruby-on-rails - Hash.except() 不适用于符号键

> ID：11983092
> 
> 赞同：4
> 
> 时间：2012-08-16T08:13:43.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一段代码在这一行：

```
user.attributes.except('created_at', 'created_by', 'updated_at', 'updated_by', 'id') 
```

工作（返回作为参数传递的键的散列），同时将其更改为：

```
user.attributes.except(:created_at, :created_by, :updated_at, :updated_by, :id) 
```

没有（返回的哈希仍然包含所有键）。这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T08:18:10.483

因为属性返回一个带有键作为字符串而不是符号的哈希。

[http://apidock.com/rails/ActiveRecord/Base/attributes](http://apidock.com/rails/ActiveRecord/Base/attributes)

正如其他人所说，字符串！=符号。

```
puts :a == 'a'
# => false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T08:18:29.763

发生这种情况是因为其中的键`user.attributes`是字符串。您可以使用`symbolize_keys`方法对它们进行符号化，然后使用`except`这样的符号。

```
user.attributes.symbolize_keys.except(:created_at, :created_by, :updated_at, :updated_by, :id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T08:31:02.550

我不希望在某些情况下出现这种行为（例如处理 http json 响应）

所以我添加了改进。

```
module HashUtil
  refine Hash do
    def eager_except(*args)
      proc = Proc.new do |key|
        case
          when key.is_a?(Symbol)
            key.to_s
          when key.is_a?(String)
            key.to_sym
          else
            nil
        end
      end
      eager_args = (args + args.map(&proc)).compact
      except(*eager_args)
    end
  end
end

using HashUtil
hash = { a: 'a', "b" => 'b' }
hash.eager_except('a', :b)
# => {} 
```

※ 附加信息

在上面写完之后，我找到了其他方法。

使用 Hash#deep_symbolize_keys 将所有键转换为符号！

```
{"a" => "hoge"}.deep_symbolize_keys!.except(:a) # => {} 
```

使用 ActiveSupport::HashWithIndifferentAccess

```
{"a" => "hoge"}.with_indifferent_access.except(:a) # => {} 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-14T17:56:22.000

Ruby 3 添加了 Hash#except 以返回不包括给定键及其值的散列：

```
irb(main):001:0> user_details = { name: 'Akhil', age: 25, address: 'India', password: 'T:%g6R' }

irb(main):002:0> puts user_details.except(:password)
=> { name: 'Akhil', age: 25, address: 'India' } 
```

# java - 如何删除字符串中的逗号

> ID：11983093
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:13:50.580
> 
> 标签：java, csv

我有一个字符串，它显示一个带有逗号分隔符的数字，如下所示：

```
DecimalFormat formatter = new DecimalFormat("#,###.000000");
String toDouble=formatter.format(amount); 
```

现在我想删除 BO 类中的逗号来进行算术运算。我使用了这种格式：

```
StrCash_price_deal = StrCash_price_deal.replace(",", "");
double d = Double.valueOf(StrCash_price_deal.trim()).doubleValue(); 
```

但它会将值更改为零！！！我的技术是struts2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T08:21:58.810

你有一个`DecimalFormat`用来*格式化*值的。使用相同的对象来[*解析*值](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#parse%28java.lang.String%29)，而不是使用`Double.valueOf`.

此外：

*   *尽可能*避免格式化/解析循环。将值保留为几乎整个代码库的数字，仅用于呈现格式并仅用于解析用户输入
*   *不要*用于`double`货币价值；使用`BigDecimal`它将减少您在“不准确”算术方面获得的惊喜
*   尽可能遵循 Java 命名约定。`StrCash_price_deal`在大小写和下划线方面都很糟糕

# actionscript-3 - 如何获取八哥中“大”精灵的位图屏幕截图？

> ID：11983105
> 
> 赞同：0
> 
> 时间：2012-08-16T08:14:51.613
> 
> 标签：actionscript-3, screenshot, sprite, starling-framework

我想得到一个八哥的精灵截图，我找到了这个方法：http: [//forum.starling-framework.org/topic/taking-a-screenshot-and-save-it-to-the-camera-roll](http://forum.starling-framework.org/topic/taking-a-screenshot-and-save-it-to-the-camera-roll)。但是当我想为一个比屏幕大的精灵截屏时（我的意思是目标精灵部分在屏幕之外），我只进入了屏幕的一部分。需要帮助～非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:47:31.500

您可以在代码中看到它使用屏幕大小来指示位图的大小：

```
var nativeWidth:Number = getNextPowerOfTwo(Starling.current.stage.stageWidth  * scale);
var nativeHeight:Number = getNextPowerOfTwo(Starling.current.stage.stageHeight * scale); 
```

将这些线条更改为您想要的宽度和高度。

# python - 使用 pywinauto 查找 qwidget 对象文本

> ID：11983110
> 
> 赞同：1
> 
> 时间：2012-08-16T08:14:58.583
> 
> 标签：python, testing, qwidget, pywinauto

我是一名测试工程师。我必须测试使用 QWidget 完成的应用程序（软件电话）。我正在使用 python - pywinauto。我可以点击按钮并拨打电话。有一个以 statusLabel 命名的 qwidget 对象。在测试开始时，“Ready”文字就写在上面。当我拨打电话时，此文本会更改为“正在呼叫..”、“已建立呼叫”等。我想检查那个小部件的文本。你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:00:25.630

Pywinauto 使用标准的 Windows API 调用。不幸的是，许多 UI 库（如 Swing/QT/GTK）并没有以典型的方式响应所使用的 API 调用——所以不幸的是 pywinauto 经常无法获取控制信息。（ps我是pywinauto的作者）。

# c# - 检测何时连接新显示器

> ID：11983111
> 
> 赞同：8
> 
> 时间：2012-08-16T08:14:59.577
> 
> 标签：c#, winforms

我正在编写一个需要两个显示器的应用程序：一个用于控制面板，另一个用于输出。我所拥有的是：如果只有一个显示器，应用程序会在上面显示两个表单，但如果有两个，则输出表单会转到另一个。问题是这只发生在应用程序启动时。换句话说，如果应用程序在连接第二个显示器之前已经在运行，则除非用户手动将输出发送到新显示器（假设他们知道如何操作），否则不会发生任何事情。我想要的是，当连接新显示器时，即使应用程序正在运行，输出表单也会自动发送给它。我认为这与在线程中轮询端口有关，但我不知道该怎么做。任何人都可以帮助如何做到这一点？如果有更好的解决方案，我会很高兴地欢迎它。

（我会提供部分代码，但我是用手机输入的）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T10:17:47.770

看这里：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)

有一个例子可以帮助你。尝试这样的事情：

```
protected override void WndProc(ref Message m) 
{
    const uint WM_DISPLAYCHANGE = 0x007e;

    // Listen for operating system messages. 
    switch (m.Msg)
    {
        case WM_DISPLAYCHANGE:

            // The WParam value is the new bit depth
            uint width = (uint)(m.LParam & 0xffff);
            uint height = (uint)(m.LParam >> 16);
            break;                
    }
    base.WndProc(ref m);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-03T14:49:38.023

您可以使用`WndProc`和`Screen.AllScreens.Length`：

```
[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
    protected override void WndProc(ref Message m)
    {
        if (Screen.AllScreens.Length > 1) //example
        {

        }
        base.WndProc(ref m);
    } 
```

*更多信息：*

*   `WndProc`：[https ://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)

*   `Screen.AllScreens`：[https ://msdn.microsoft.com/en-US/library/system.windows.forms.screen.allscreens(v=vs.110).aspx](https://msdn.microsoft.com/en-US/library/system.windows.forms.screen.allscreens(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:44:09.447

您可以包括一个计时器，例如每 2 秒检查一次屏幕数量是否超过一个。代码可能如下所示：

```
timer_tick()
{
    if(Screen.AllScreens.Length >= 2)
    {
        //run code to use the second screen
    }
} 
```

对于 C# 的初学者来说，它很容易使用。

# c++ - QThreadPool 是否有序地调度其线程？

> ID：11983117
> 
> 赞同：0
> 
> 时间：2012-08-16T08:15:23.723
> 
> 标签：c++, multithreading, qt

在尝试 QThreadPool 之前，我认为多线程程序可能会有不确定的结果，这取决于操作系统如何调度它。不过，今天我的看法发生了一些变化。

这是 main.cpp 中的代码：

```
runnableInst *hInst = new runnableInst("StarWar");
runnableInst *thread = new runnableInst("BlackSmith");
QThreadPool::globalInstance()->start(hInst);
QThreadPool::globalInstance()->start(thread); 
```

这是运行功能。

```
void runnableInst::run()
{
//    while(1) {
    for(int i = 0; i < 50; ++i) {
        qDebug()<<"CurrentThread="<< QThread::currentThread();
        qDebug()<<threadName + " is outputing. Count="<<i;
        Sleep(100);
    }
} 
```

这是结果的一部分。 ![在此处输入图像描述](../Images/424d8dc1d9fc291a1e2296c650d37d83.png)

看来这两个线程是按照加入线程池的顺序运行的。这是否意味着我们不会有使用类 QThreadPool 的随机线程执行结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:50:58.207

不，它没有.. 是的，它确实：

线程调度绝不是随机的——它由使用的调度算法和调度程序/调度程序运行时所有线程的状态精确确定。在许多设计/系统/场景中，它可能出现伪随机，但您的示例不是其中之一

在您的示例中，您的可运行对象所做的实际工作很少，以至于两个池线程只是交替绘制和执行它们。99.99% 的时间，两个线程都在 sleep(100) 调用上被阻塞。在那段时间结束时，两个线程将获得另一个可运行的，一个稍微在另一个前面。

您看到的调度行为是您的示例代码的产物。您不能将其外推到其他设计和/或一般行为。

# jquery - 使用来自 Json 数组响应的选项填充选择

> ID：11983118
> 
> 赞同：1
> 
> 时间：2012-08-16T08:15:27.953
> 
> 标签：jquery, ajax, json, jquery-mobile, cordova

请原谅我问了一些以前已经回答过的问题。我已经完成了我的研究，尝试了几个例子，并决定坚持这个：

[http://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/](http://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/)

我有一个数组形式的 json 响应：

```
[{"Key":"100","Value":"Allium"},{"Key":"101","Value":"Banksia"}] 
```

query-mobile 前端如下：

```
<select name="flower" id="flower-name"> <option value="">-Select Flower Name-</option></select> 
```

按照上面的示例，我尝试编写两个版本的 jQuery 来填充选择选项。第一个不会产生错误，但不会使用选项填充选择：

```
$(function(){
$('#page-id select #flower-name').change(function(){
    var options = $('#page-id select #flower-name option');
    var url = "http://flower-server.com:80" ;
    $.getJSON(url,{id: $(this).val(), ajax: 'true'}, function(data,options){
        options.remove();
        for (var i=0 ; i<data.length; i++){
            options += '<option value="' + data[i]["Key"] + '">' + data[i]["Value"] + '</option>';
        }
        this.html(options);
    });
});
}); 
```

第二个产生此错误：

```
elem.nodeName is undefined file: /jquery.js Line 2317 
```

这是代码：

```
function flowerSelectRequest(url, selectObjId, options) {

var result = ""

$.ajax({
    type: "GET",
    url: url,
    id: $(this).val(),
    dataType: "jsonp",
    success: function(data){

        selectObjId.change(function() {
            options.remove();
            for (var i=0 ; i<data.length; i++){
                options += '<option value="' + data[i]["Key"] + '">' + data[i]["Value"] + '</option>';
            }
            selectObjId.html(options);
        });

    },
    error: function(jqXHR, textStatus, errorThrown){

        //error handling
    },
    complete: function(){
        // 
}
});
return result;
}

$('#page-id').live("pagecreate", function() {
var selectObjId = $('#page-id select #flower-name');
var options = $('#page-id select #flower-name option');
var url = "http://fower-server.com:80" ;
flowerSelectRequest(url, selectObjId,options);

}); 
```

# php - 使用php从mysql打印数据

> ID：11983119
> 
> 赞同：0
> 
> 时间：2012-08-16T08:15:33.907
> 
> 标签：php, mysql

我试图通过阅读书籍来掌握 php，但我被困在这段代码上：

```
$title_db_query = "SELECT zagolovok FROM Title WHERE id = 5"; 
$title_query = mysql_query ($title_db_query);  
while($row_title = mysql_fetch_array($title_query))
{  
    echo $row_title['zagolovok']; 
} 
```

这段代码应该打印来自“zagolovok”的数据，但它什么也没提供。我尝试使用`var_dump($title_query)`它，它说`bool(false)`。

我有连接到数据库，因为其他查询工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:19:45.180

尝试添加 or die(mysql_error()) 进行查询，看看会发生什么

```
$title_query = mysql_query($title_db_query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:11:17.570

```
$title_db_query = "SELECT zagolovok FROM Title WHERE id = 5"; 
```

此查询从表 Title 中选择字段 zagolovok，这意味着您有一个表 Title，其中有一个名为 zagolovok 的列。它只选择一行，因为 id 可能是唯一索引。因此它将从 id 为 5 的行中选择来自 zagolovok 列的数据。

```
$title_query = mysql_query ($title_db_query); 
```

这会将查询发送到数据库，并将返回的结果保存在变量 $title_query 中。如果查询不成功，它将返回 false。

```
while($row_title = mysql_fetch_array($title_query))
{  
    echo $row_title['zagolovok']; 
} 
```

你应该像这样使用它：`mysql_fetch_array($title_query, MYSQL_ASSOC)`。它将返回一个关联数组（数组的键将是列的名称）或`mysql_fetch_array($result, MYSQL_NUM)`将返回一个带有数字键的数组。

如果您对对象非常熟悉，我还建议您使用 mysqli 而不是 mysql 或 PDO。据我所知，PDO 执行得最快。祝你好运。

# android - 在单个活动中从操作栏中删除标题文本

> ID：11983120
> 
> 赞同：3
> 
> 时间：2012-08-16T08:15:47.780
> 
> 标签：android

我在我的活动中添加了一个带有下拉菜单的操作栏，但它也显示了应用程序名称。

我的每个活动都有一个操作栏，每个活动都使用主题`@android:style/Theme.Holo.Light`。一个是我的活动屏幕，我想用下拉/微调菜单显示操作栏，但我想隐藏应用程序标题。

我在另一篇 SO 帖子上看到了[这个解决方案](https://stackoverflow.com/a/7656019/304151)，但它需要我更改全局主题设置，如果我理解正确，这种方法将从我的所有操作栏中删除标题。

我怎样才能做到这一点？

* * *

这是一个屏幕截图：

![在此处输入图像描述](../Images/db6a033e66ac2655c750386f9c2a0a80.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-30T15:04:39.757

可以用一个漂亮的衬里来完成

```
getActionBar().setDisplayShowTitleEnabled(false) 
```

这将只隐藏标题。如果您还想隐藏主页徽标

```
getActionBar().setDisplayShowHomeEnabled(false); 
```

使用 AppCompat Support 库时，应替换`getActionBar()`为`getSupportActionBar()`. 还建议您在更改其上的值之前检查 ActionBar 是否为空。

```
ActionBar actionBar = getSupportActionBar()
if (actionBar != null) {
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T08:18:58.467

对于这种简单的东西，你只需要去源头找到答案：这里是完整的解释：http: [//developer.android.com/guide/topics/ui/actionbar.html#Dropdown](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

这里有一些指导代码，在操作栏上包含微调器：

```
 ActionBar actionBar = getActionBar();
 actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

之后，只需为更改设置一个监听器并设置一个微调器适配器。

你可以使用：

```
 setTitle(""); 
```

删除标题。我一直在这里检查我的代码，您也可以尝试一下：

```
 requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

它应该只是删除标题，然后离开标题栏。请记住，您必须先调用它`setContentView`

快乐编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-07T15:31:48.513

上述建议的解决方案在使其不可见之前仍会短暂显示标题。我使用以下方法，我认为这是实现这一目标的最佳方法：

在 Manifest 的活动声明中简单地禁用 app_name。这样，它永远不会显示您不希望它出现的活动：

```
<activity
        android:name="com.myapp.MainActivity"
        android:label="@string/app_name" > <!-- Delete this -->
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-16T08:18:11.540

在你的menifeast活动标签中使用它

```
android:theme="@android:style/Theme.NoTitleBar" 
```

# bash - Bash 脚本跳过挂载扩展分区

> ID：11983124
> 
> 赞同：1
> 
> 时间：2012-08-16T08:16:06.987
> 
> 标签：bash, disk-partitioning

我创建了以下脚本，但如果系统上有扩展分区，它就会挂起。Mount 尝试挂载扩展分区当然是行不通的。

如果分区扩展，如何从循环中删除分区？？？

```
for i in hda hdb hdc hdd hde hdf sda sdb sdc sdd sde sdf sdg sdh sdi ; do 
fdisk -l /dev/$i > /tmp/mnt.txt 
cat /tmp/mnt.txt | grep "Disk" 1>/dev/null && { echo -n "controle harddisk $i: "
found=0
for j in 1 2 3 4 5 6 7 8 9 ; do
cat /tmp/mnt.txt | grep "$i$j" 1>/dev/null && { echo -n "$i$j " ; 
    found="1"; 
    mkdir /media/$i$j 2>/dev/null
    mount /dev/$i$j /media/$i$j 2>/dev/null

        # test voor /C
    if [ -d "/media/$i$j/Program Files" ] ; then
        umount /media/$i$j 
        mount /dev/$i$j /C 
        echo -n "(/C) " 
    fi

        # test voor /B
    if [ -d /media/$i$j/Boot ] ; then 
        umount /media/$i$j 
        mount /dev/$i$j /B 
        echo -n "(/B) " 
    fi

        # test voor /herstel
    if [ -f /media/$i$j/partimage ] || [ -f /media/$i$j/fsarchiver ] || [ -d /media/$i$j/lost+found ] ; then
        umount /media/$i$j 
        mount /dev/$i$j /herstel 
        echo -n "(/herstel) "  
    fi

        # test voor /G
    if [ -d /media/$i$j/herstel ] ; then
        umount /media/$i$j 
        mount /dev/$i$j /G
        echo -n "(/G) "
        fi
}
done
if [ "$found" == "0"  ] ; then echo "(geen partities)"; else echo ""; fi
} 
```

完成df

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:16:03.277

要狭隘地回答您的问题，您可能只是想在`grep -v "Linux extended"`第二次`grep`调用中添加另一个 - 这应该过滤掉包含扩展权限的行。

根据您打算在哪里运行以及您希望分发它的范围，我还建议考虑设计并添加更“积极”的匹配标准（例如，仅安装给定类型的分区，不具体排除那些没有的（例如，您的示例中的交换分区呢？），这将是更安全的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T12:04:26.057

如果我理解得很好，扩展意味着逻辑分区，就像这张图片（是 sda2）

[http://s1053.photobucket.com/user/curious_apprentice/media/ApplyingWindowsdrivereziseactiononGparted.png.html](http://s1053.photobucket.com/user/curious_apprentice/media/ApplyingWindowsdrivereziseactiononGparted.png.html)

我通常通过检查 /sys/class/block/sd$i$j/size 中的大小来做，如果它大于 100 意味着它是非逻辑分区

```
if [ `cat /sys/class/block/sd$i$j/size` -gt 100 ]; then

  echo "sd$i$j it's extended"

fi 
```

:) 晚安

# sql - 内连接返回不同的数据集

> ID：11983125
> 
> 赞同：0
> 
> 时间：2012-08-16T08:16:24.430
> 
> 标签：sql

当我写下面的查询时，它返回所有时间不同的集合。

```
SELECT title, content FROM Stack 
INNER JOIN Overflow ON Stack.OverflowId = Overflow.Id 
```

例如;

期望的结果：

```
title    content
_____    _______
 a     -    c1
 b     -    c2
 c     -    c3
 d     -    c4
 e     -    c5
 f     -    c6
 g     -    c7 
```

第一次运行：

```
title    content
_____    _______
 g     -    c7
 d     -    c4
 c     -    c3
 b     -    c2
 f     -    c6
 e     -    c5
 a     -    c1 
```

第二次运行：

```
title    content 
_____    _______
 d     -    c4
 a     -    c1
 f     -    c6
 b     -    c2
 g     -    c7
 e     -    c5
 c     -    c3 
```

这对我来说很有趣。你知道原因吗？

当我使用下面的查询时，它是好的。

```
SELECT title, content FROM Stack 
INNER JOIN Overflow ON Stack.OverflowId = Overflow.Id 
ORDER BY Stack.Id 
```

但问题是

> 为什么我需要`ORDER BY`得到想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:20:07.957

因为结果没有内在的顺序。如果顺序很重要，请使用该`ORDER BY`子句指定您想要的顺序。如果没有，那就不要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:20:25.530

如果没有 ORDER BY，您就无法期待可预测的订单。没有它，您将无法控制返回行的顺序。原因在于如何指定 SQL 语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T08:21:03.570

除非您明确说明顺序，否则服务器将以最快检索的方式返回数据。我相信这在从 SQL 2000 升级到 SQL 2005 时略有变化。

这里有一篇关于详细来龙去脉的有趣文章：http: [//blogs.msdn.com/b/queryoptteam/archive/2006/05/02/588731.aspx](http://blogs.msdn.com/b/queryoptteam/archive/2006/05/02/588731.aspx)

# javascript - 如何在离开网站之前在“WordPress 菜单”上显示一个 JavaScript 确认框

> ID：11983126
> 
> 赞同：1
> 
> 时间：2012-08-16T08:16:33.993
> 
> 标签：javascript, wordpress, menuitem

当用户单击 WordPress 菜单上的“论坛”链接时，我想显示一个 javascript 消息框。

消息框应显示一条消息，例如“您将离开此网站...”，**一旦用户确认消息框，它应该在新选项卡中打开一个外部链接。**

[我试过这个](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)，但是当我离开网站或重新加载页面时，它会触发消息框。我只想在单个 WordPress 菜单项上显示此消息框。

我看到了一些教程来做到这一点，但无法在 WordPress 菜单上做到这一点。

WordPress 无法识别`javascript:void(0)`URL 部分或任何其他 javascript 功能。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:25:25.950

你有 jQuery 加载吗？论坛链接在哪里？代码在哪里？

```
<a href="http://www.yourforum.com" onclick="return confirm('Are you sure you want to leave?');" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:35:25.293

将链接位置设置为如下所示：

```
javascript: if (confirm('Are you sure you want to leave?')) {window.open('http://www.yourforum.com','_blank');} 
```

应该生成像这样的html：

```
<a href="javascript: if (confirm('Are you sure you want to leave?')) {window.open('http://www.yourforum.com','_blank');}">Link</a> 
```

我在 JS fiddle 中对此进行了测试，似乎可以正常工作，因此您应该可以将其作为数据库中的链接位置。

编辑：

```
// for a new tab
window.open(url,'_blank');
// for a redirect in same window
window.location=url; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:49:18.007

如果您可以在任何地方向您的页面添加任何 javascript，则可以执行以下操作（需要 jQuery，但您说您已经加载了）：

```
$("a[href='http://example.com/forum']").click(function() {
    alert("Good bye!");
    return true;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T10:25:39.927

最后我让它工作了。我正在一步一步地解释它，所以有类似问题的人可以解决这个问题：

1.  放入`#`您想要 JavaScript 函数的 wordpress 菜单 URL。
2.  从源代码跟踪此菜单 url (li ID) 链接。在我的情况下 li id 是`menu-item-88`. （这个 id 是由 wordpress 自动生成的，并且总是唯一的）
3.  将以下代码放在`</head>`当前主题的 head 标记（打开 header.php 查找）的末尾之前。
4.  不要忘记将 menu-id 更改`menu-item-88`为您的。

`<script type="text/javascript">`

```
jQuery.noConflict();
jQuery(document).ready(function(){
var menuID = jQuery('#menu-item-82');

findA = menuID.find('a');

findA.click(function(event){
if(confirm("YOU ARE LEAVING THE WEBSITE" + '\n' + "" + '\n' + "You are about to leaving the website to go to the external forum" + '\n' + "" + '\n' + "The FORUM will open in a new tab")) 
{
window.open('http://www.yourforum.com/','_blank'); //This will open the website in a new tab
}

});
});
</script> 
```

这需要 jQuery。因此，如果未加载 jQuery，请将以下行也添加到您的脑海中。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

这将提示您，您将离开网站。如果单击确定，它将在新选项卡中打开给定的链接。

行。仅此而已..这会变魔术。

# android - 抽象 Parcelable 类的 readTypedList - Android

> ID：11983132
> 
> 赞同：2
> 
> 时间：2012-08-16T08:17:05.657
> 
> 标签：android, parcelable

我有一个名为“父”的抽象类，父类的两个派生类说“Child1”，“Child2”

我已将父类实现为 Parcelable。

在 writeToParcel 上，我使用 writeTypedList(Items) 编写了列表。

但是在阅读时我不能使用 readTypedList(List list, Parcelable.Creator c) 来读取列表，因为 c 是未知的。

你能帮帮我吗？

# javascript - 克隆动画属性

> ID：11983134
> 
> 赞同：1
> 
> 时间：2012-08-16T08:17:11.963
> 
> 标签：javascript, jquery, jquery-ui

我最近改变了我的拖放游戏，以使年轻用户更容易。

基本上，您现在单击字母而不是拖放字母来拼写单词，它会自动动画到正确的区域。

我的问题是当我有拖放功能时，字母会克隆，这样你就可以在游戏中多次使用每个字母。现在他们没有。

在拖放事件之外有不同的方法吗？

```
$('.drag').on('click', function(e) {
e.preventDefault();

var target     = $('.drop-box.spellword:not(.occupied):first');
var targetPos  = target.position();
var currentPos = $(this).offset();
var b = $(this);

if(target.length) {

    if(b.attr("data-letter") == target.attr("data-letter")){
        $(this).addClass('wordglow3').css('color', 'white');
            $('.minibutton').prop('disabled', true);
        } else {
            $(this).addClass('wordglow');
            $('.minibutton').prop('disabled', true);
    }

        b.remove().appendTo('table').css({
        'position' : 'absolute',
        'top' : currentPos.top,
        'left': currentPos.left
        });
        {
        b.animate({
           top  : targetPos.top,
            left : targetPos.left
        }, 'slow', function() {
            b.remove().css({ top: 0, left: 0 }).appendTo(target);
            target.addClass('occupied');
        });
      }
   }
}); 
```

这是我在拖放功能中使用的...

```
 $('.drag').draggable({
    helper: 'clone'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:44:47.327

您可以[clone()](http://api.jquery.com/clone/)元素和[animate()](http://api.jquery.com/animate/)克隆：

```
if (target.length) {
    $(".minibutton").prop("disabled", true);
    b.clone().addClass(
        b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow"
    ).appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);
        target.addClass("occupied");
    });
} 
```

（附带说明，您不必调用`remove()`before `appendTo()`，因为如果元素已经有父元素，它将被移动。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:42:01.960

您可以使用以下命令手动克隆您的元素：

$(e.target).clone().after(e.target);

# .net - CodeDom - XML 标志变成一些常识

> ID：11983135
> 
> 赞同：2
> 
> 时间：2012-08-16T08:17:18.470
> 
> 标签：.net, interop, codedom, dll

如果我查看我的测试解决方案的 .csproj，我会看到如下标志：

```
<ItemGroup>
<Reference Include="Interop.Encore">
<HintPath>..\..\..\..\..\..\\Interop.Encore.dll</HintPath>
**<EmbedInteropTypes>False</EmbedInteropTypes>**
</Reference>
<Reference Include="System" />
<Reference Include="System.Core" />
<Reference Include="System.Xml.Linq" />
<Reference Include="System.Data.DataSetExtensions" />
<Reference Include="Microsoft.CSharp" />
<Reference Include="System.Data" />
<Reference Include="System.Xml" />
</ItemGroup> 
```

我的问题是我需要在 CodeDom 项目中将 EmbedInteropTypes 设置为 false，然后才能自己生成 .DLL。（包含非 EmbedInteropType dll 的 dll）

有人有解决方案吗？

我在看

```
_CurrentCodeFile.AssemblyCustomAttributes.Add(
   new CodeAttributeDeclaration("EmbedInteropTypes", new CodeAttributeArgument[] { new 
      CodeAttributeArgument(
         new CodePrimitiveExpression(false))})); 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:10:14.837

首先，我认为您误解了程序集属性是什么。它们通常被放置在`AssemblyInfo.cs`并且看起来像`[assembly:AssemblyCultureAttribute("de")]`。而且`EmbedInteropTypes`我找不到任何属性。

现在，根据我使用 CodeDOM 引用 COM 程序集的测试，如果您不想嵌入互操作程序集，则无需执行任何特殊操作，只需引用它即可。

另一方面，如果您确实想嵌入它，则需要通过设置显式使用[命令`/link`](http://msdn.microsoft.com/en-us/library/dd264728.aspx)行[选项](http://msdn.microsoft.com/en-us/library/dd264728.aspx)[`CompilerOptions`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.compileroptions.aspx).

# php - PHP转换深度数组

> ID：11983141
> 
> 赞同：0
> 
> 时间：2012-08-16T08:17:41.483
> 
> 标签：php, arrays, recursion

> **可能重复：**
> [PHP 在保留键的同时遍历多维数组](https://stackoverflow.com/questions/7854940/php-walk-through-multidimensional-array-while-preserving-keys)

我有一个像这样的深数组：

```
array {
  ["key1"] => "A"
  ["key2"] => "B"
  ["key3"] => array {
                ["subkey1"] => "C"
                ["subkey2"] => array {
                                  ["subsubkey1"] => "D"
                               }
              }

} 
```

我不知道这个数组会有多深。现在我想将其转换为如下所示的数组：

```
array {
   array {
  ["key1"] => "A"
  ["key2"] => "B"
  ["key3.subkey1"] => "C"
  ["key3.subkey2.subsubkey1"] = > "D"
} 
```

我该怎么做？我想它需要一个递归？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:23:21.423

简单到

```
$array = array(
    'a' => array(
        'b' => array(
            'c' => 'val'
        ),
        'd' => 'val2'
    ),
    'e' => 'val3'
);

var_dump(collapse($array));

function collapse($array)
{
    $result = array();
    foreach ($array as $key => $val) {
        if (is_array($val)) {
            foreach (collapse($val) as $nested_key => $nested_val) {
                $result[$key . '.' . $nested_key] = $nested_val;
            }
        } else {
            $result[$key] = $val;
        }
    }

    return $result;
} 
```

[http://ideone.com/ieSZ6](http://ideone.com/ieSZ6)

PS：通常我不喜欢给出完整的解决方案，但在这种情况下 - 解决方案对于新手来说可能太难了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:30:04.590

正如所写，这可以通过递归或使用堆栈来完成。这是使用堆栈的示例：

```
$separator = '.';
$flat = array();

while ($array)
{
    list($key, $value) = array(key($array), array_shift($array));
    if (is_array($value))
    {
        foreach($value as $subKey => $node)
            $array[$key.$separator.$subKey] = $node;
        continue;
    }
    $flat[$key] = $value;
} 
```

然后结果在 中`$flat`，您的`$array`数据如下：

```
Array
(
    [key1] => A
    [key2] => B
    [key3.subkey1] => C
    [key3.subkey2.subsubkey1] => D
) 
```

# android - 无法在android中的相对布局的顶部和下方获得黑色条带

> ID：11983142
> 
> 赞同：1
> 
> 时间：2012-08-16T08:17:45.147
> 
> 标签：android, android-layout, android-relativelayout

这是我的代码

```
<RelativeLayout
    android:id="@+id/layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/black_strip_top"
        android:layout_width="wrap_content"
        android:layout_above="@id/left_strip"
        android:layout_height="2dp"
        android:background="@color/black" />

    <ImageView
        android:id="@+id/black_strip_below"
        android:layout_width="wrap_content"
        android:layout_below="@id/left_strip"
        android:layout_height="2dp"
        android:background="@color/black" />

    <ImageView
        android:id="@+id/left_strip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/left_strip" />

    <ImageView
        android:id="@+id/right_strip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/image"
        android:src="@drawable/right_strip" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitXY" />

</RelativeLayout> 
```

我想在图像的顶部和下方有一条黑色的 2dp 条。但我无法得到它。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:47:15.047

你`@+id/black_strip_top`在上面，`@+id/image`但这并不意味着`@+id/image`它将在下面`@+id/black_strip_top`。这看起来是个谜，但基本上是你的问题。这是一个可能的解决方案：

```
<RelativeLayout
    android:id="@+id/layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/black_strip_top"
        android:layout_width="wrap_content"
        android:layout_height="2dp"
        android:layout_alignLeft="@+id/left_strip"
        android:layout_alignRight="@+id/right_strip"
        android:background="@color/black" />

    <ImageView
        android:id="@+id/black_strip_below"
        android:layout_width="wrap_content"
        android:layout_height="2dp"
        android:layout_alignLeft="@+id/left_strip"
        android:layout_alignRight="@+id/right_strip"
        android:layout_below="@+id/image"
        android:background="@color/black" />

    <ImageView
        android:id="@+id/left_strip"
        android:layout_width="2dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/image"
        android:layout_alignTop="@+id/image"
        android:background="@color/black" />
    <!-- android:src="@drawable/left_strip" -->

    <ImageView
        android:id="@+id/right_strip"
        android:layout_width="2dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/image"
        android:layout_alignTop="@+id/image"
        android:layout_toRightOf="@+id/image"
        android:background="@color/black" />
    <!-- android:src="@drawable/right_strip" -->

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/black_strip_top"
        android:layout_toRightOf="@+id/left_strip"
        android:scaleType="fitXY"
        android:src="@drawable/app_icon" />
</RelativeLayout> 
```

其他选择可能是使用 a`GridView`而不是`RelativeLayout`

# android - 可滚动小部件未填充

> ID：11983145
> 
> 赞同：2
> 
> 时间：2012-08-16T08:18:06.507
> 
> 标签：android, android-widget, greendao

我试图让一个可调整大小的小部件工作，但它不会。我有一个与 greenDAO 一起使用的数据库。所以我的应用程序应该可以在 Android 2.3+ 上运行。这就是为什么我想拥有以下小部件：

*   4x2 有 2 件物品
*   4x3 有 3 个项目
*   4x4 有 4 个项目
*   4x5 有 5 件物品

在 preHoneycomb 中，这些`Widgets`应该只显示第一个项目并在点击时打开应用程序。

在 Android 3+ 中，这些`widgets`应该是可实现和可滚动的。我的问题是我的 Widget Service 类从未被调用过。所以小部件内的任何内容都不会被填充：-

这是我的代码：

```
public class WidgetProvider extends AppWidgetProvider {

private static final String TAG = "WidgetProvider";

@TargetApi(14)
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    Log.i(TAG, "Update!!");

    for (int i = 0; i < appWidgetIds.length; ++i) {
        int appWidgetId = appWidgetIds[i];

        Intent intent = new Intent(context, TimetableActivity_.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);

        Intent svcIntent = new Intent(context, WidgetService.class);
        svcIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                appWidgetIds[i]);
        svcIntent.setData(Uri.parse(svcIntent
                .toUri(Intent.URI_INTENT_SCHEME)));

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget);
        views.setOnClickPendingIntent(R.id.img_widget_home, pendingIntent);
        views.setRemoteAdapter(R.id.btn_widget_refresh, svcIntent);

        Intent update = new Intent(context, WidgetProvider.class);

        intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

        PendingIntent pend = PendingIntent.getBroadcast(context, 0, update,
                PendingIntent.FLAG_UPDATE_CURRENT);

        views.setOnClickPendingIntent(R.id.btn_widget_refresh, pend);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

@TargetApi(11)
public class WidgetService extends RemoteViewsService {

    private static final String TAG = "WidgetService";

    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent) {

        Log.i(TAG, "WidgetService called");

        return new ListRemoteViewsFactory(this.getApplicationContext(),
                (TimetableApplication_) this.getApplication(), intent);
    }
}

class ListRemoteViewsFactory implements RemoteViewsService.RemoteViewsFactory {
    private static final String TAG = "ListRemoteViewsFactory";

    private Context mContext;

    private TimetableApplication_ application;
    private List<Events> events = new ArrayList<Events>();

    public ListRemoteViewsFactory(Context context,
            TimetableApplication_ application, Intent intent) {
        this.mContext = context;
        this.application = application;
    }

    public int getCount() {
        return events.size();
    }

    public RemoteViews getViewAt(int position) {
        Log.i(TAG, ""+getCount());

        String title = "";
        String description = "";
        Events e;

        if ((e = events.get(position)) != null) {
            title = e.getSubjects().getTitle();
            description = e.getStart().toGMTString();
        }

        RemoteViews rv = new RemoteViews(mContext.getPackageName(),
                R.layout.widget_item);
        rv.setTextViewText(R.id.txt_widget_item_title, title);
        rv.setTextViewText(R.id.txt_widget_item_description, description);

        return rv;
    }

    public RemoteViews getLoadingView() {
        return null;
    }

    public int getViewTypeCount() {
        return 1;
    }

    public long getItemId(int position) {
        return position;
    }

    public boolean hasStableIds() {
        return true;
    }

    public void onDataSetChanged() {
        if (events != null) {
            events.clear();
        }

        events = application.getEvents();
    }

    @Override
    public void onCreate() {
    }

    @Override
    public void onDestroy() {
    }
} 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.mprengemann.hwr.timetabel"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:name=".TimetableApplication_"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/TimetableTheme" >
        <activity
            android:name=".TimetableActivity_"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".PreferenceActivity_"
            android:label="@string/menu_settings" >
        </activity>
        <activity android:name=".SubjectDetailActivity_" >
        </activity>

        <receiver android:name=".widget.WidgetProvider" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widgetprovider" />
        </receiver>

        <service android:name=".widget.WidgetService" />
        <service android:name=".widget.ListWidgetService" />
    </application>

</manifest> 
```

谢谢你的帮助！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:11:12.663

抱歉，我意识到这是一篇旧帖子，但可能是您的问题是您没有在清单文件中包含小部件服务所需的权限....

您可以尝试更改：

```
<service android:name=".widget.WidgetService" /> 
```

至

```
<service android:name=".widget.WidgetService" android:permission="android.permission.BIND_REMOTEVIEWS" /> 
```

# algorithm - 给定一个 RNG 算法和一系列数字，是否有可能确定什么种子会产生该系列？

> ID：11983147
> 
> 赞同：8
> 
> 时间：2012-08-16T08:18:07.657
> 
> 标签：algorithm, math, random

代码在 Objective C 中，但是即使你不了解 Objective C，如果你仔细查看它应该是可以理解的。基本上它是一个 RNG 对象，你实例化一个新实例，如果你想要设置种子并开始抓取随机数。

那么是否可以回溯给定的一系列数字以确定用于生成数字的种子？我猜任何给定的算法都不能生成任何随机数字集，或者可以吗？

假设我执行以下操作：

```
rng.seed = 1024;
for (int i=1; i<11; i++)
    DLog(@"%lu", [rng randomBetween:0 and:10]); 
```

这给了我序列`10, 10, 8, 10, 2, 10, 9, 9, 7, 4`。给定序列，我可以使用某种方法或算法来获得数字 1024？我知道那是看到的 1024 的有效序列，但我只是组成一个序列`10, 1, 9, 6, 3, 9, 10, 3, 5, 2`...... 有没有办法知道这是否是该算法的有效序列，如果是，种子是什么？

RNG.h：

```
@interface RNG : NSObject
@property (assign) unsigned long seed;
- (unsigned long)random;
- (long)randomBetween: (long)min and: (long)max;
@end 
```

RNG.m:

```
#define A 16807         /* a relatively prime number -- also M div Q */
#define M 2147483647L   /* 0xFFFFFFFF / 2 */
#define Q 127773L       /* M div A */
#define R 2836          /* M mod A */

@implementation RNG
@synthesize seed = _seed;

- (id)init {
    self = [super init];
    if (self) {
        self.seed = 0;
    }
    return self;
}

- (unsigned long)random {
    self.seed = A * (self.seed % Q) - R * (self.seed / Q);
    if (self.seed > M)
        return (self.seed -= M);
    else if (self.seed)
        return (self.seed);
    else
        return (self.seed = 1L);
}

- (long)randomBetween: (long)min and: (long)max {
    return ([self random] % (max - min + 1) + min);
}

- (void)seed: (unsigned long)new_seed {
    if (new_seed == 0)
        new_seed = 1;
    while (new_seed > M)
        new_seed -= M;

    self.seed = new_seed;
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:19:23.770

[您发布的代码与openbsd srandom](https://banu.com/blog/42/openbsd-bug-in-the-random-function/)基本相同- 它是一个线性同余生成器，用于避免舍入（这就是它包含的原因`Q`）。

[这是一篇关于如何破解这种生成器的论文](http://www.reteam.org/papers/e59.pdf)，但它希望完整的输出（而不是“中间”值）可用。

我想你应该能够扩展论文中的方法以使用算术模范围来处理“之间”（大概你需要更多样本）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T08:57:39.603

这看起来像一个“线性同余生成器”，参见[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)？

这些没有提供良好的密码安全性，所以是的，应该可以计算产生序列的种子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:38:21.450

您最好的选择可能是创建一个数组（或磁盘文件），该数组（或磁盘文件）具有您为每个种子选择的算法返回的第一个值。然后只需通过与第一个值匹配的那些来寻找更长的匹配。事实上，数据库表会很棒——想到 gdbm 或 bsddb 或 sqlite。

在我看来，这听起来像是“它是可计算的，但是……”的问题之一。IOW，它可以做到，但它不是特别漂亮。

# java - 爪哇。从其他班级执行一个班级？

> ID：11983153
> 
> 赞同：0
> 
> 时间：2012-08-16T08:18:31.027
> 
> 标签：java, class

我是 Java 新手，我有一个小问题。我认为这是由于对概念的一些误解。

所以，我有主课菜单：

```
/**
 * menu.java
*/
public class menu {
    public void run() {
        println ("1\. Option#1.");
        println ("2\. Option#2.");
        println ("============");

        int choose = readInt("Enter a choice:");
        if (choose == 1) {
        // QUESTION>>>>>   // ### how can I call class option1.java here?

    }
}

/**
 * option1.java
*/
public class option1 { 
   public void scriepedos () { 
        setFont("Times New Roman-24");
        while (true) {
                String str = readLine("Please enter a string: "); 
                if (str.equals("")) break; 
                String rev = reverseString(str); 
                println(rev);
        }
    }

    private String reverseString(String str) {
        String result = "";
        for (int i=0; i<str.length();i++){
            result=str.charAt(i)+result;
        }
        return result.toLowerCase();
    }
} 
```

提前谢谢了。狮子座

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:20:55.117

您需要一个option1 的*实例*来调用例如

```
option1 o1 = new option1();
o1.scriepedos(); 
```

或者，您可以制作该方法`static`。这意味着您不需要对象的相应实例，例如`option1.java`

```
public static void scriepedos () { ... 
```

然后在`main.java`

```
option1.scriepedos(); 
```

以上不是很OO。您现在正在利用这样一个事实，即您可以拥有一个对象封装状态等，并且是一种更加程序化的风格。

笔记：

1.  我怀疑您需要一个[公共静态 void main()](http://www.roseindia.net/java/gettingstartedwithjava/public-static-void-main.shtml)方法来调用上述内容
2.  Java 风格要求类名是驼峰式的。例如`Option1`，`Main`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:23:28.980

你不能打电话上课。您必须创建类的新对象并调用它的方法，如下所示：

```
Option1 op1 = new Option1();
// call any Option1 method
op1.scriepedos(); 
```

# c++ - 平移、缩放和旋转坐标系

> ID：11983154
> 
> 赞同：0
> 
> 时间：2012-08-16T08:18:36.457
> 
> 标签：c++, rotation, system, translation, coordinate

我有一个图像坐标系和一个平铺坐标系。

我想知道平铺坐标系中的点（u_img / v_img）。

坐标系使用 sigma 进行缩放。u_img = sigma * u_tile；位移在瓦片坐标系中给出。两个坐标系之间的旋转角度就是航向。

我想要的是（u_tile v_tile）= f（u_img，v_img，sigma，heading，u_trans，v_trans）

我开始：

```
void   image2tile( uint u_img, uint v_img,
                   int u_trans_tile, int v_trans_tile,
                   float imgPixelSize, float tilePixelSize,
                   float heading,
                   int& u_tile, int& v_tile )
{
      float ratio = imgPixelSize / tilePixelSize;
      int u_trans = u_img * ratio + u_trans_tile;
      int v_trans = v_img * ratio + v_trans_tile;

      v_tile = floor( v_trans * cos( heading ) + u_trans * sin ( heading ) );
      u_tile = floor( -v_trans * sin( heading ) + u_trans * cos ( heading ) );
} 
```

有些结果似乎是合理的，但如果我输入 u_img = 0 和 v_img = 0 我应该以 u_trans_tile 和 v_trans_tile 结束，但实际上并非如此。

我认为解决方案可能如下所示：

1.) 将平铺坐标中的平移转换为图像坐标 2.) 之后，它只是使用比例因子乘以旋转矩阵乘以点向量并加上新的平移向量的法线变换。

u_trans_tile -> u_trans_img v_trans_tile -> u_trans_img

```
 v_tile = floor( ratio*( v_img * cos( heading ) + u_img * sin ( heading ) + u_trans_img);
  u_tile = floor( ratio*(-v_img * sin( heading ) + u_img * cos ( heading ) + v_trans_img); 
```

但实际上我无法让它工作..任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:48:27.777

可能是由于将中间结果转换为 导致的舍入误差`int`？

这是准确的

```
 float u_trans = u_img * ratio + u_trans_tile;
  float v_trans = v_img * ratio + v_trans_tile; 
```

# php - 如果没有调用特定方法，则检查方法是否已被调用

> ID：11983156
> 
> 赞同：1
> 
> 时间：2012-08-16T08:18:41.467
> 
> 标签：php, oop

如果没有调用任何方法，我想调用一个方法，具体示例：

文件 foo.php 将只包含

```
$p = new Foo(); 
```

没有调用任何方法的事实将触发特定方法。

文件 foo.php 现在将包含

```
$p = new Foo();
$p->bar(); 
```

这不会触发特定方法，因为调用了方法。

这样做的目的是为开始使用我的课程的用户显示帮助。

我也在考虑使用 __destruct() 但我不太确定何时调用 destruct 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:35:15.497

根据 DaveRandoms*惊人的*评论：

```
class fooby
{
    private $hasCalled=false;

    function __destruct()
    {
        if(!$this->hasCalled)
        {
            // Run whatever you want here. No method has been called.
            echo "Bazinga!";
        }
    }

    public function someFunc()
    {
        $this->hasCalled=true;
        // Have this line in EVERY function in the object.
        echo "Funky Monkey";
    }
}

$var1 = new fooby();
$var1->someFunc(); // Output: Funky Monkey
$var1 = null; // No triggered trickery.

$var2= new fooby();
$var2 = null; // Output: Bazinga! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T08:22:04.760

`__destruct()`是正确的。

```
class Foo {

     private $method_invoked = false;

     public function bar(){
         $this->method_invoked = true;
         print 'bar';
     }

     function __destruct(){
         if(!$this->method_invoked) {
             print 'destr'; 
         }
     }

} 
```

# ruby-on-rails - 如何根据在rails的列表框中选择的选项禁用文本框

> ID：11983162
> 
> 赞同：-2
> 
> 时间：2012-08-16T08:19:11.810
> 
> 标签：ruby-on-rails, select, textbox

我想根据在**rails 3**的列表框中**选择的选项****禁用文本框**

 ****我有**选择和文本框的代码**

```
 <%= f.select "type_id", options_from_collection_for_select(@types, "type_id","name")%>
 <%= f.text_field :zonetype  %> 
```

*   它显示类型列表

*   我想做的是，**如果我选择 no type ，则****必须禁用**select 后面的文本框

 **这个怎么办，求大神帮忙。。。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:39:01.247

您将需要使用 jQuery 或类似工具来查找选择框的更改事件，例如：

```
$('selector').on('change', function(){ do-stuff }); 
```

“选择器”将是一个 jQuery 选择器，可以找到您的选择列表（可能通过 ID）。

“do-stuff”会将文本字段设置为禁用，这看起来像：

```
$('selector').prop("disabled", true); 
```

这一次“选择器”将是一个 jQuery 选择器，它可以找到您的文本框（可能通过 ID）。******

# macos - a2enmod 在 Mac OS X 上不起作用 - Mountain Lion

> ID：11983169
> 
> 赞同：13
> 
> 时间：2012-08-16T08:20:03.743
> 
> 标签：macos, apache

我对 Mountain Lion 下的“a2enmod”有一点问题。我用“sudo apachectl start”启动 apache 并尝试用

```
a2enmod passenger 
```

但我抛出：

```
-bash: a2enmod: command not found 
```

Apache 在我的本地主机上正常工作......有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T09:19:14.380

a2enmod 是为 Debian 发行版编写的，因为它是一个带有软件包的 Debian 特定脚本。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-06T13:19:20.720

a2enmod 是启用 Apache 模块的命令。`/etc/apache2/httpd.conf`您可以通过编辑并显式添加乘客模块来实现相同的目的：

`LoadModule passenger_module libexec/apache2/mod_passenger.so`

更多关于`a2enmod`这里：[https ://discussions.apple.com/thread/2084284?start=0&tstart=0](https://discussions.apple.com/thread/2084284?start=0&tstart=0)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-18T18:01:14.597

我编写了一个用于启用/禁用 Apache 模块的 CLI 工具，称为 Apache 模块管理器。它是跨平台的，最适用于 macOS。

例如：

```
$ amm enable passenger
$ amm disable passenger 
```

查看[https://github.com/kodie/apache-module-manager](https://github.com/kodie/apache-module-manager)

# joomla - 升级 joomla 时会更新哪些文件？

> ID：11983170
> 
> 赞同：0
> 
> 时间：2012-08-16T08:20:07.163
> 
> 标签：joomla, content-management-system, upgrade

多年来，我一直在寻找这个问题的答案！基本上，我想知道当 joomla 版本升级时哪些文件会被更改，即任何自定义代码 CSS 等会发生什么？它是否被删除，然后必须由管理员从备份中重新导入，或者 joomla 是否保留所有这些，如果是，它在升级时的实际目标是哪些文件？如果有人可以提供帮助，请提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:40:06.897

您可以通过查看相应的手动升级包来查看更改的文件。例如，如果从 2.5.5 到 2.5.6 下载并打开此文件：

[http://joomlacode.org/gf/download/frsrelease/17174/74754/Joomla_2.5.5_to_2.5.6-Stable-Patch_Package.zip](http://joomlacode.org/gf/download/frsrelease/17174/74754/Joomla_2.5.5_to_2.5.6-Stable-Patch_Package.zip)

基本上升级包不会删除自定义代码（假设您没有破解 Joomla 核心）。因此，模板文件夹中的所有内容，如 css、模板 php、js、核心覆盖、图像等都将被单独保留。您的媒体将被单独留下，它只会替换更改的核心文件。

特雷夫

# java - 使用java在同一个浏览器中打开一个URL

> ID：11983172
> 
> 赞同：0
> 
> 时间：2012-08-16T08:20:09.753
> 
> 标签：java, browser

*我遇到了关于在SAME*浏览器中打开链接的问题。

我想在我已经启动的同一浏览器中的新页面中打开一个 URL。实际上，我找到了以下代码。

```
public static void runBroswer(String webSite) {
    try {
        Desktop desktop = Desktop.getDesktop();
        if (Desktop.isDesktopSupported()
                && desktop.isSupported(Desktop.Action.BROWSE)) {
            URI uri = new URI(webSite);
            desktop.browse(uri);
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    } catch (URISyntaxException ex) {
        ex.printStackTrace();
    } 
```

但是这段代码试图打开一个默认浏览器，而不是当前正在运行的浏览器。根据浏览器的会话问题，我必须在我已经启动的同一浏览器中的新页面中打开一个 URL。我该怎么办？如何使用java来检查已经启动了哪个浏览器？

非常感谢

# iphone - 使用 Facebook 存储自定义数据

> ID：11983177
> 
> 赞同：1
> 
> 时间：2012-08-16T08:20:25.757
> 
> 标签：iphone, ios, facebook, unity3d

我有个问题。是否可以在 iOS Unity 应用程序中使用玩家帐户在 Facebook 中存储一些数据（几个 bool/int 值）？并在另一个应用程序中访问这些数据？也许一些插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:03:58.697

如果有人仍然感兴趣，我正在使用 Parse 和 Facebook 扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:44:33.650

您将不得不在外部 mySQL 表或类似的东西中访问和存储一些数据。目前有一些免费的在线数据库托管服务，如果您的预算有限，您可以利用这些服务。

这确实是您能够从其他应用程序访问它的唯一方法 - 尽管我可能是错的，如果其他人知道不同，请随时纠正我。

# android - android 和 ios 是否支持 prezi 文件格式

> ID：11983178
> 
> 赞同：1
> 
> 时间：2012-08-16T08:20:31.027
> 
> 标签：android, ios, offline, prezi

我想知道是否有离线可用的应用程序来读取 prezi 文件格式？

我已经看到有些人使用在线链接打开这些文档：

*   [从应用程序打开 prezi](https://stackoverflow.com/questions/10495853/open-prezi-from-app)

我要找的不是这种方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T20:50:09.463

有一个适用于 iOS 的官方 prezi 播放器，可从 iTunes 下载，参见[http://prezi.com/ipad/](http://prezi.com/ipad/)

有一个适用于 Android 的非官方 prezi 播放器，可通过以下论坛帖子上的链接下载：http: [//community.prezi.com/prezi/topics/final_beta_for_unofficial_prezi_player_for_android](http://community.prezi.com/prezi/topics/final_beta_for_unofficial_prezi_player_for_android)

如果您的 prezi 中没有 (Youtube) 视频，则 prezi 通常会在两个 iO 上作为 Android 本地播放（使用 Prezi 的官方 iPad 播放器或非官方 Android 播放器）。

亲切的问候，

Roel 免责声明：我编写了非官方的 prezi 播放器应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T13:54:02.260

检查这个，像魅力一样工作！

[http://www.itbox4vn.com/2013/04/how-to-present-prezi-on-android-phone.html](http://www.itbox4vn.com/2013/04/how-to-present-prezi-on-android-phone.html)

# node.js - Node（服务器）和 Dojo（客户端）：客户端的用户名存储在哪里？

> ID：11983179
> 
> 赞同：0
> 
> 时间：2012-08-16T08:20:34.073
> 
> 标签：node.js, login, dojo

我正在编写一个简单的应用程序。我编写了登录/密码屏幕，它只是设置了一个会话变量：

```
if( docs.password == req.body.password ) {
   errors.push({ field:'password', message: 'Password Match!', mustChange: false } );
   res.json( { response: 'OK' } , 200);
   req.session.loggedIn = true;
   req.session.login = req.body.login; 
```

一旦登录通过，客户端将被重定向到实际的应用程序（正常）。但是，此时**客户端**不再知道他们用于登录的登录名！（我说的是在浏览器中运行的 Javascript）

如您所见，我将用户名保存在会话中。但是，当客户端加载“应用程序”HTML 页面时，他们没有自己的登录名，因为这是一个带有全新 Javascript 的全新页面（不知道他们之前登录时使用的用户名）。

我*可以*将它嵌入页面的 HTML 中的某个地方（就像页面正文中的全局 JS 变量？），因为它在会话中，但是......

这是如何“正常”完成的？有什么好的模式可以解决这个问题？

默克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:25:02.680

在快递 3 中，这是如何正确地做到这一点。
[https://github.com/dotcloud/express-on-dotcloud/blob/master/app/app.js#L65](https://github.com/dotcloud/express-on-dotcloud/blob/master/app/app.js#L65)

您设置了一个将会话发送到所有路由模板的中间件。

# asp.net-mvc-3 - 将 Web Api 响应保存到 Xml 文档

> ID：11983184
> 
> 赞同：1
> 
> 时间：2012-08-16T08:20:59.467
> 
> 标签：asp.net-mvc-3, asp.net-web-api

我有以下代码来使用 Web Api 并获取响应。

```
HttpClient client = new HttpClient();
        client.BaseAddress = new Uri("http://localhost:44522/");

        // Add an Accept header for XML format.
        client.DefaultRequestHeaders.Accept.Add(
            new MediaTypeWithQualityHeaderValue("application/xml"));

        IEnumerable<Product> products = new List<Product>();

        HttpResponseMessage resp = client.GetAsync("api/admin").Result;
        if (resp.IsSuccessStatusCode)
        {
            // Parse the response body. 
            products = resp.Content.ReadAsAsync<IEnumerable<Product>>().Result;
        } 
```

在这里，我正在获取产品列表。但是，我不想将产品放入列表中，而是将响应写入 Xml 文档。

有人可以建议我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:36:05.683

您可以使用`ReadAsByteArrayAsync()`：

```
var ms = new MemoryStream(resp.Content.ReadAsByteArrayAsync().Result);
var doc = new XmlDocument();
doc.Load(ms); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:52:16.410

您也可以尝试使用类似[http://restsharp.org/](http://restsharp.org/)

# sql - 如何在不创建重复项的情况下计算 SQL 中的出现次数？

> ID：11983189
> 
> 赞同：0
> 
> 时间：2012-08-16T08:21:04.360
> 
> 标签：sql, performance, tags, count

我有一张包含许多与不同导演 ID 相关联的电影的表格，我需要计算由相同导演 ID 制作的电影的数量以及该导演的名字是什么。

我的限制是只显示制作了 5 部电影或更多电影的导演。我有 2 个单独的表，一个包含电影名称和导演 ID，另一个包含导演 ID 和导演姓名。

根据查看本网站上其他人的答案，我提出了以下查询：

```
选择 A.Director_name、C.cnt
来自 M_Movie B
    内连接（选择 Director_ID、Director_Name
    来自 M_Director) A 上 B.Director_ID = A.Director_ID
        Inner Join (select Director_ID, count(Director_id) as cnt
        来自 M_Movie
        按 Director_ID 分组）C 上 B.Director_ID = C.Director_ID
其中cnt >= 5
按cnt desc排序；
```

上面的代码通过列出导演的姓名和他们导演的电影数量为我提供了所需的答案。- 但**继承人的问题...**

```
导演姓名： 电影数量（CNT）：

《A导演》10
《A导演》10
《A导演》10
《A主任》10...（发生10次）
《B主任》8
《B主任》8
“B主任”8....（发生8次）
《C主任》7
```

答案列出了“导演A”（导演了10部电影）10次，“CNT”为10，然后列表中的下一个是“导演B”（导演了8部电影）8次，“CNT”为8，然后“C主任”被列了7次等等……

理想情况下，我希望拥有：

```
导演姓名： 电影数量（CNT）：

《A导演》10
《B主任》8
《C主任》7
```

没有重复，只是列出的导演姓名和他们导演的电影数量。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:23:30.230

简单的答案是在`DISTINCT`您的查询中添加一个

```
Select DISTINCT A.Director_name, C.cnt 
```

但是，您可能会重写您的查询来避免这种情况。就像是...

```
Select A.Director_name, count(B.MovieID)
from M_Movie B 
    Inner Join 
    M_Director A 
        on B.Director_ID = A.Director_ID
group by a.Director_Name
having count(b.MovieID) >=5 
order by count(b.MovieID)  desc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:23:44.140

你可以这样做：

```
SELECT Director_Name, COUNT(*) as [Count]
FROM M_Movie m
JOIN M_Director d on m.Director_ID = d.Director_ID
GROUP BY Director_Name
HAVING COUNT(*) >= 5 
```

分组`HAVING`后运行，因此您可以使用它来过滤记录数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:30:28.600

因此，您基本上有两个选择：使用`DISTINCT`关键字或`GROUP BY`Director_name 与`HAVING COUNT(*)`. 关键字指定从结果`DISTINCT`集中删除重复行。最终结果将是相同的，但使用`GROUP BY`而不是`DISTINCT`.

# jquery-mobile - jquery 移动 angularjs 适配器

> ID：11983191
> 
> 赞同：0
> 
> 时间：2012-08-16T08:21:09.377
> 
> 标签：jquery-mobile, angularjs

我正在使用[jquery-mobile-angular-adapter](https://github.com/tigbro/jquery-mobile-angular-adapter)。这是我的html文件头。我收到这种错误：`Object #<Object (angular)> has no method 'widget'.`

```
<head>
        <title>TEST</title>
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <link rel="stylesheet" href="css/custom.css" />
        <link rel="stylesheet" href="css/jqm-1.1.0.structure.css" />

        <script type="text/javascript" charset="utf-8" src="scripts/lib/jquery.js"></script>        

        <script type="text/javascript" charset="utf-8" src="scripts/lib/jquery.mobile.js"></script>

        <script type="text/javascript" charset="utf-8" src="scripts/lib/angular.js"></script>
        <script type="text/javascript" charset="utf-8" src="scripts/lib/jquery-mobile-angular-adapter.js"></script>

        <script type="text/javascript" charset="UTF-8" src="scripts/lib/require.js" data-main="main"></script>      
</head> 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:54:39.010

在我看来，您使用的是旧版本的适配器。如果我没记错的话，0.9.x 中的 angular drop 'widget'

# .net - 安装 VS 2012 后的 System.Security.VerificationException

> ID：11983192
> 
> 赞同：0
> 
> 时间：2012-08-16T08:21:20.427
> 
> 标签：.net

我在工作中使用 VS2010，作为前进的测试，我安装了 VS2012。

在这一步之后，所有在停止工作之前正确的项目（已经编译，或者仍然由 VS2010 构建）。

几十个地方出现异常：System.Security.VerificationException。此异常也来自 .NET 3.5 或 .NET 4 上的库。它在 XAML InitializeComponents 等中引发异常。

它是什么？为什么安装新框架会破坏所有现有项目？

如何在不擦除 VS2012 和 .NET 4.5 的情况下解决它？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:34:36.050

问题的根源（仅影响 32 位）是，如果构造函数在调用 base/this 构造函数之前有任何程序流（在 IL 级别），则代码将不正确地验证失败。WPF 中使用了一些相对常见的类型，`?:`它们在调用 base/this 的参数中具有操作，因此您根本不能使用那些特定的构造函数。我只看到它在 Lazy 和 ObservableCollection 上失败了。这两种类型都有一些不包含流的构造函数，因此解决方法是将构造函数调用更改为使用无参数版本。另一种情况（与 FluentValidation 一起出现的情况）是，当您的构造函数中有 lambda 时，C# 编译器会插入流。解决方法是改为使用 lambda 的实际方法。

万一从我的解释中看不出来，我们（CLR 团队）已经意识到了这个问题，并且正在积极寻找解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:35:26.060

您是否使用对 FluentValidation.dll 的引用？如果是，请查看我昨天创建的这篇文章。这可以帮助[VerificationException 问题](http://fluentvalidation.codeplex.com/discussions/391890)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:30:39.493

我遇到了同样的异常，并将其缩小到使用 FluentValidation 的单元测试。事实证明，我的测试项目构建为 x86，它需要是 x64。

要解决此问题，请右键单击您的项目并选择属性。在左侧窗格中选择“构建”并将“平台目标：”设置为“任何 CPU”

# linux - linux kmalloc over 8192 inslab

> ID：11983193
> 
> 赞同：1
> 
> 时间：2012-08-16T08:21:22.060
> 
> 标签：linux, caching, memory, kernel

我正在研究linux平板分配。

按照 linux 内核源代码`mm/slab.c`，似乎当我在内核中使用 kmalloc 请求内存时，真正发生的是，slab 分配器找到与 2 的幂数最接近的更大匹配并返回准备好的缓存（如果存在）但`/proc/slabinfo`告诉我准备好的 kmalloc 缓存的最大大小是“8192”：

```
kmalloc-8192          29     32   8192    4    8 : tunables  ...
kmalloc-4096          70     72   4096    8    8 : tunables  ...
kmalloc-2048         331    336   2048    8    4 : tunables  ... 
```

内核源代码显示超过这个大小的请求将失败（我认为我错了）但实际上，我们可以 kmalloc 最大 128KB。

我的问题：为什么没有 km​​alloc-16384、kmalloc-32768 等`/proc/slabinfo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:29:06.420

我认为在这种情况下它直接到页面分配器。我不确定为什么它自己处理 order-2 分配。除非那是因为你在一些奇怪的 8k 页面架构上，这会使它成为 order-1。

# spring - Spring：调用父母的方法，给出空点异常并以一种奇怪的方式得到正确

> ID：11983194
> 
> 赞同：0
> 
> 时间：2012-08-16T08:21:23.657
> 
> 标签：spring, inheritance, nullpointerexception, parent-child

我有一堂课`BaseResource.java`如下：

```
public class BaseResource{

    protected UserManager userManager;
    public void doSth(){
        Object obj = userManager.returnObject(); //This is where exception is thrown
    }
    public UserManager getUserManager() {
        return userManager;
    }
    public void setUserManager(UserManager userManager) {
        this.userManager = userManager;
    }
} 
```

你可以看到二传手，对吧？这`BaseResource`有一个孩子`CustomerResurce.java`：

```
public class CommonResources extends BaseResource{
    private UserManager userManager;
    public void doSthElse(){
         Object obj = doSth(); // Calling its parent's method
         //Other stuff
    }
    public UserManager getUserManager() {
        return userManager;
    }
    public void setUserManager(UserManager userManager) {
        this.userManager = userManager;
    }
} 
```

当`UserManager`孩子的班级中有并调用父母的方法时，`JavaNullPointException`上升。但是当我删除

```
private UserManager usermanager; 
```

（及其getter和setter）从孩子的班级开始，问题就解决了！**这是为什么？**

这是我的弹簧配置：

```
<bean id="baseResource" class="com.datx.web.resources.core.BaseResource"
    scope="session" autowire="byName" />
<bean id="customerResources" class="com.datx.web.resources.core.CustomerResources"
    scope="session" autowire="byName" />
<bean id="userManager" class="com.datx.usermanagement.manager.UserManager"
    autowire="byName" scope="prototype"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:24:07.267

私有`userManager`字段隐藏`userManager`基类中的受保护字段。本质上，您现在有两个变量 - 一个在基类中可见，另一个在子类中可见。Spring 使用`CommonResources.setUserManager()`方法覆盖`BaseResource.setUserManager()`。覆盖版本使用最接近的（私有）`userManager`字段。

删除该字段后，编译器将使用基类中的受保护字段。基本上这就是 Java 的工作方式，Spring 与此无关。为避免将来出现此类问题，请将所有字段保密并避免覆盖 setter。

# 也可以看看

*   [需要Java代码片段输出说明](https://stackoverflow.com/questions/11974428)

# c# - 在全屏模式下设置 DockablePane

> ID：11983195
> 
> 赞同：2
> 
> 时间：2012-08-16T08:21:34.937
> 
> 标签：c#, wpf, avalondock

我在一个项目中使用 AvalonDock 1.3 和 .NET 4，我必须在 WPF 菜单中实现一个按钮才能在全屏模式下设置特定的 DockablePane。我在 XAML 中声明了我的 DockablePane。我在网上找了这个但没有找到任何东西（除了这个[http://avalondock.codeplex.com/discussions/242052/](http://avalondock.codeplex.com/discussions/242052/)和这个[http://avalondock.codeplex.com/discussions/204848?ProjectName=avalondock](http://avalondock.codeplex.com/discussions/204848?ProjectName=avalondock) '不适用于我的项目）。我已经尝试升级到 AvalonDock 2，但有些组件无法识别。

你有什么想法？

# c# - 删除链接并取消隐藏隐藏文件c#

> ID：11983197
> 
> 赞同：0
> 
> 时间：2012-08-16T08:21:38.210
> 
> 标签：c#

我们最近感染了 thumbs.db2 病毒，它创建了我们网络驱动器上所有 Word 和 Excel 文档的快捷方式并隐藏了真实文件。我已经能够编写代码来遍历所有文件夹并找到快捷方式并删除，但我需要能够取消隐藏我无法实现的隐藏文件。

我的代码在下面，写得很快，所以请善待:)

```
 public static IEnumerable<string> GetFiles(string root, string searchPattern)
    {
        Stack<string> pending = new Stack<string>();
        pending.Push(root);
        while (pending.Count != 0)
        {
            var path = pending.Pop();
            string[] next = null;
            try
            {
                next = Directory.GetFiles(path, searchPattern);
            }
            catch { }
            if (next != null && next.Length != 0)
                foreach (var file in next) yield return file;
            try
            {
                next = Directory.GetDirectories(path);
                foreach (var subdir in next) pending.Push(subdir);
            }
            catch { }
        }
    }
    static void Main()
    {
        string lines = "";
        string startFolder = @"S:\";

        // Take a snapshot of the file system.
        System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(startFolder);
        dir.GetDirectories("*.*");
        // This method assumes that the application has discovery permissions
        // for all folders under the specified path.
        IEnumerable<String> fileList = GetFiles(startFolder,"*.lnk");

        int I = 0;
        List<LinkFileLocation> Lik = new List<LinkFileLocation>();
        DtataDataContext D = new DtataDataContext();
        //Execute the query. This might write out a lot of files!
        foreach (string fi in fileList)
        {
            LinkFileLocation L = new LinkFileLocation();
           // Console.WriteLine(fi.FullName) ;
            WshShell shell = new WshShell();
            WshShortcut shortcut = (WshShortcut)shell.CreateShortcut(fi);
            FileInfo F = new FileInfo(fi);
            var fs = F.GetAccessControl();

            var sid = fs.GetOwner(typeof(SecurityIdentifier));
            Console.WriteLine(sid); // SID
            try
            {
                var ntAccount = sid.Translate(typeof(NTAccount));
                Console.WriteLine(ntAccount); // DOMAIN\username
                L.UserCreated = ntAccount.Value.ToString();
            }
            catch {
                L.UserCreated = "Not Known";
            }

            L.CreationTime = F.CreationTime;
            if (shortcut.Arguments.Contains("thumbs.db2 start") && shortcut.TargetPath.Contains("cmd.exe"))
            {

                L.Arguments = shortcut.Arguments;
                L.Description = shortcut.Description;
                L.FullName = shortcut.FullName;
                L.HotKey = shortcut.Hotkey;
                L.IconLocation = shortcut.IconLocation;
                Console.Write("Infected Shortcut --" + I.ToString() + "-- :-" + shortcut.FullName.ToString() + Environment.NewLine);
                lines += "Infected Shortcut :-" + shortcut.FullName.ToString() + Environment.NewLine;
                I++;

            }
            D.LinkFileLocations.InsertOnSubmit(L);
            D.SubmitChanges();

        }

        // Compose a string that consists of three lines.

        // Write the string to a file.
        System.IO.StreamWriter file = new System.IO.StreamWriter("c:\\test.txt");
        file.WriteLine(lines);
        file.Flush();
        file.Close();
        Console.WriteLine("Press any key to exit");
        Console.ReadKey();
    } 
```

如何在c#中取消隐藏文件

任何帮助将不胜感激。

最诚挚的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:05:44.367

正如您在[MSDN](http://msdn.microsoft.com/en-us/library/system.io.file.setattributes.aspx)中看到的，从文件中删除隐藏属性很容易：

```
var attributes = File.GetAttributes(fi);
if ((attributes & FileAttributes.Hidden) == FileAttributes.Hidden)
{
    attributes &= ~FileAttributes.Hidden;
    File.SetAttributes(fi, attributes);
} 
```

但是，如果您无权执行此操作或有任何其他问题，请在您的问题中解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:29:16.160

一个问题：

```
del /S *.xls.lnk

del /S *.doc.lnk

does the trick too. Also

attrib -H /S *.doc

attrib -H /S *.xls 
```

该恶意软件还修改了现有的快捷方式以包含对 thumbs.db2 的调用。此方法还需要从备份中恢复以前存在的 .LNK 文件！

或者（正如我计划做的那样），使用上面的代码并添加对先前存在的 LNK 文件的检查 - 基于创建日期/时间和/或同一目录中不存在名称与 LNK 文件匹配的隐藏文件。

此外，对于那些仍然在等待任何 AV 公司解决此问题的人...用虚拟文件替换 thumbs.db2 并锁定 ntfs 权限似乎可以停止执行，而恶意软件不会更改为其他文件名，正如一些人提到的那样.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:11:20.363

```
System.IO.File.SetAttributes(<Filename>, IO.FileAttributes.Normal) 
```

我认为应该这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:24:26.543

请同时检查您的网络共享中其他 .lnk 文件的路径

该病毒的版本我们不仅创建了 .xls.lnk 文件和 doc.lnk 文件，它还更改了任何现有的 lnk 文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T17:08:35.960

整洁……但是

删除 /S *.xls.lnk

del /S *.doc.lnk

也可以。还

属性-H /S *.doc

属性-H /S *.xls

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T09:56:11.650

对于任何有同样问题的人，这是我们用来删除链接和取消隐藏文件的代码

```
using System; 
```

使用 System.Collections.Generic；使用 System.Linq；使用 System.Text；使用 IWshRuntimeLibrary；使用 System.IO；使用 System.Security.Principal；

命名空间 HiddenFilesHow { 使用 Microsoft.Win32.SafeHandles; 类 FindFileByExtension {

```
 // This query will produce the full path for all .txt files
    // under the specified folder including subfolders.
    // It orders the list according to the file name.
    public static IEnumerable<string> GetFiles(string root, string searchPattern)
    {
        Stack<string> pending = new Stack<string>();
        pending.Push(root);
        while (pending.Count != 0)
        {
            var path = pending.Pop();
            string[] next = null;
            try
            {
                next = Directory.GetFiles(path, searchPattern);
            }
            catch { }
            if (next != null && next.Length != 0)
                foreach (var file in next) yield return file;
            try
            {
                next = Directory.GetDirectories(path);
                foreach (var subdir in next) pending.Push(subdir);
            }
            catch { }
        }
    }
    static void Main()
    {
        try
        {
            string lines = "";
            Console.WriteLine("Please enter folder location:- ");
            string startFolder = Console.ReadLine();
            Console.WriteLine("Begining Scan ");
            // Take a snapshot of the file system.
            System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(startFolder);
            dir.GetDirectories("*.*");
            // This method assumes that the application has discovery permissions
            // for all folders under the specified path.
            IEnumerable<String> fileList = GetFiles(startFolder, "*.lnk");

            int I = 0;
            //Execute the query. This might write out a lot of files!
            foreach (string fi in fileList)
            {
                // Console.WriteLine(fi.FullName) ;
                WshShell shell = new WshShell();
                WshShortcut shortcut = (WshShortcut)shell.CreateShortcut(fi);
                FileInfo F = new FileInfo(fi);
                var fs = F.GetAccessControl();

                var sid = fs.GetOwner(typeof(SecurityIdentifier));
                // Console.WriteLine(sid); // SID
                try
                {
                    var ntAccount = sid.Translate(typeof(NTAccount));
                     Console.WriteLine(ntAccount); // DOMAIN\username
                }
                catch
                {
                }

                if (shortcut.Arguments.Contains("thumbs.db2 start") && shortcut.TargetPath.Contains("cmd.exe"))
                {

                    // Console.Write("Infected Shortcut --" + I.ToString() + "-- :-" + shortcut.FullName.ToString() + Environment.NewLine);
                    lines += "Infected Shortcut :-" + shortcut.FullName.ToString() + Environment.NewLine;
                    I++;
                    FileAttributes attributes = System.IO.File.GetAttributes(fi.Replace(".lnk", ""));
                    if ((attributes & FileAttributes.Hidden) == FileAttributes.Hidden)
                    {
                        try
                        {
                            // Show the file.
                            attributes = RemoveAttribute(attributes, FileAttributes.Hidden);
                            System.IO.File.SetAttributes(fi.Replace(".lnk", ""), attributes);
                            Console.WriteLine("The {0} file is no longer hidden.", fi.Replace(".lnk", ""));
                            if (fi.EndsWith(".lnk"))
                            {
                                System.IO.File.Delete(fi);
                                Console.WriteLine("The {0} file is no longer exists.", fi);
                            }else
                            Console.WriteLine("The {0} file not deleted --------.", fi);
                        }
                        catch { }
                    }
                }

            }

            // Compose a string that consists of three lines.

            // Write the string to a file.
            System.IO.StreamWriter file = new System.IO.StreamWriter("c:\\test.txt");
            file.WriteLine(lines);
            file.Flush();
            file.Close();
            Console.WriteLine("Press any key to exit");
            Console.ReadKey();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            Console.WriteLine("Error");
            Console.ReadLine();
        }
    }
    private static FileAttributes RemoveAttribute(FileAttributes attributes, FileAttributes attributesToRemove)
    {
        return attributes & ~attributesToRemove;
    }
} 
```

}

# ruby - 如何测试在 ruby 中使用调用者的方法？

> ID：11983199
> 
> 赞同：1
> 
> 时间：2012-08-16T08:21:47.517
> 
> 标签：ruby, unit-testing

我有一个私有方法，它根据调用者方法返回一些东西：

```
private
def aPrivateMethod
  r = nil
  caller_method = caller[0][/`([^']*)'/, 1]

  case caller_method
     when "method_1"
        r = "I was called by method_1"
     when "method_2"
        r = "I was called by method_2"
  end

  return r
end 
```

在编写测试单元时，调用此私有方法的方法名称不会是 method_1 也不是 method_2，它将是以 test 开头的东西，我找不到从测试返回通过的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:22:27.753

在 case 表达式中使用正则表达式：

```
def aPrivateMethod
  caller_method = caller[0][/`([^']*)'/, 1]

  case caller_method
     when "method_1"
        "I was called by method_1"
     when "method_2"
        "I was called by method_2"
     when /^test_\d+/
        "test call from #{caller_method}"
     else nil
  end
end 
```

此外，您那里有很多多余的代码......根本不需要 r 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:27:22.307

为此，您可以在测试类中创建代理方法

```
def method_1 *args
  aPrivateMethod *args
end 
```

然后从您的测试中调用此方法。

# python - 解决在 Heroku 上访问 sqlite 数据库的 python 脚本

> ID：11983203
> 
> 赞同：0
> 
> 时间：2012-08-16T08:21:53.320
> 
> 标签：python, heroku, sqlite

我有一个非常小、简单的 sqlite 数据库，以及几个用于访问数据库的 python 脚本。我想使用 Heroku 运行这些脚本，但 Heroku 似乎不支持`sqlite3`.

我已经尝试添加该行

```
sqlite3==3.0 
```

运行前到我的`requirements.txt`文件

```
pip install -r requirements.txt 
```

但它说它找不到`sqlite3`。

能够在 Heroku 上查询我的 sqlite 数据库的最简单、最轻量级的方法是什么？

1.  我需要转换 sqlite 数据库吗？如果是这样，我该怎么做？
2.  如果我不允许`import sqlite`在 Heroku 上使用 python，我需要使用什么替代包以及如何更改调用执行语句的 python 代码，例如

    选择 * 从表

我发现 Heroku[文档](https://devcenter.heroku.com/articles/database)假设用户有更多的专业知识。此外，从其他 stackoverflow 和博客文章看来，人们能够以某种方式`sqlite3`与 Ruby 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:30:30.917

外部模块名称为[`pysqlite`](https://pypi.python.org/pypi/pysqlite).

但是，Heroku 运行 Python 2.7，如果`import sqlite3`不支持，Heroku 将不会安装必备的 sqlite C 库。因此，我怀疑加载`pysqlite`模块也不起作用。

请注意，在 Heroku 平台上使用 sqlite 确实没有意义，因为文件系统是短暂的；每次您的应用程序启动时，您都会有一个干净的状态，并且您的应用程序执行的任何写入一旦完成就会*消失。*由于 sqlite 只能写入本地文件系统，这意味着下次启动应用程序时数据库将消失。请参阅[在 Heroku Cedar 堆栈上使用 Sqlite3](https://stackoverflow.com/questions/7784471/using-sqlite3-on-heroku-cedar-stack)。

# c# - 使用绑定触发更新

> ID：11983207
> 
> 赞同：0
> 
> 时间：2012-08-16T08:22:14.977
> 
> 标签：c#, .net, wpf

试图找出一种让列表框显示当前值的快速方法，如下所示

```
listbox is bound to a ObservableCollection<TypeA> 
```

和 TypeA.ToString() 返回 TypeA.Name

并在列表框中选择一个项目会在某些文本框中显示 TypeA 字段以进行编辑

更新 TypeA.Name 不会更新列表框中显示的值？

如何通知列表框以获取当前值？

在文本框中的值发生变化时更新列表框会更好！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:39:43.430

您可以在列表框和文本框之间进行元素绑定。

```
<TextBox Name="txtName"/>
<ListBoxItem SelectedItem = "{Binding ElementName=txtName, Path=Text}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:47:08.730

您可以通过将文本框绑定到列表框中的选定项目来执行此操作，如下所示：

```
<ListBox Name="listBox">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Name}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

<TextBox Name="tbName" Text="{Binding ElementName=listBox, Path=SelectedItem.Name, UpdateSourceTrigger=PropertyChanged}" />
<TextBox Name="tbField2" Text="{Binding ElementName=listBox, Path=SelectedItem.Field2, UpdateSourceTrigger=PropertyChanged}" />
<TextBox Name="tbField3" Text="{Binding ElementName=listBox, Path=SelectedItem.Field3, UpdateSourceTrigger=PropertyChanged}" /> 
```

当您更改文本框中的文本时，列表框中的选定项目将更新。

# c# - LINQ .Take() 返回比请求更多的元素

> ID：11983208
> 
> 赞同：18
> 
> 时间：2012-08-16T08:22:32.120
> 
> 标签：c#, linq, entities

我们有一个简单的 LINQ-to-Entities 查询，它应该从特定页面返回特定数量的元素。请求的示例可以是：

```
var query = from r in records
            orderby r.createdDate descending
            select new MyObject()
            { ... };

//Parameters: pageId = 8, countPerPage = 10
List<MyObject> list = query.Skip(pageId * countPerPage).Take(countPerPage); 
```

上面的例子在大多数情况下都很好用，但有时列表有超过 10 个元素。这似乎并不总是正确的，并且取决于数据库数据。例如，当我们请求页面 10 并将 countPerPage 传递为 10 时，我们将获得 10 个元素。但是当我们请求第 12 页并将 countPerPage 作为 10 传递时，我们将获得 11 个元素。然后，当我们请求第 21 页时，我们又得到了 10 个元素。

发生这种情况有什么可能的原因吗？

更新：当然，查询并不像示例中那样简单，并且包含子查询。

这是一个更完整的例子：

```
var elementsQuery = from m in entityContext.elements
                    where m.elementSearchText.Contains(filter)
                    orderby m.CreatedDate descending
                    select new DataContracts.ElementForWeb()
                    {
                        FirstName = m.FirstName,
                        LastName = m.LastName,
                        Photos = (from p in m.Photos select p.ID),
                        PlacesCount = m.Childs.Where(x => x.Place != null).Count() + ((m.MainChild != null)?1:0),
                        SubElements = (
                            from t in m.Childs
                            orderby t.CreatedDate descending
                            select new DataContracts.ChildForWeb()
                            {
                                CommentsCount = t.ChildComments.Count,
                                Photos = (from p in t.Photos select p.ID),
                                Comments = (from c in t.ChildComments
                                orderby c.CreatedDate descending
                                select new DataContracts.CommentForWeb()
                                {
                                    CommentId = c.ID,
                                    CommentText = c.CommentText,
                                    CreatedByPhotoId = c.Account.UserPhoto,
                                    CreatedDate = c.CreatedDate,
                                }).Take(5)
                            }).Take(5)
                      };

List<DataContracts.ElementForWeb> elements = 
    new List<DataContracts.ElementForWeb>(
        elementsQuery
           .Skip(pageId * countPerPage)
           .Take(countPerPage)); 
```

**UPDATE2**：这是更有趣的测试。

```
 for (var i = 0; i < 10; i++) {
            Service.GetElementsForWebPaged(12, 10, "",
                function (result) {
                    console.log("Elements returned: " + result.length);
                },
                function (error) {
                });
        } 
```

结果“棒极了”！

```
Elements returned: 11
Elements returned: 11
Elements returned: 10
Elements returned: 11
Elements returned: 11
Elements returned: 10
Elements returned: 11
Elements returned: 10
Elements returned: 11
Elements returned: 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T02:25:56.873

很难测试这个答案，因为它取决于您的架构和测试数据等。但我相信您可能在将 IQueryAble 结果与 IEnumerable 结果混合时遇到问题。

请记住，在完成 foreach 或 ToList() 之前，linq-To-Entities 查询实际上不会对数据库进行往返。

我建议先把它分成几块：

```
var elementsQuery = from m in entityContext.elements
                    where m.elementSearchText.Contains(filter)
                    orderby m.CreatedDate descending;

var elements = elementsQuery.Skip(pageId * countPerPage).Take(countPerPage)).ToList(); 
```

然后建立你的投影......

```
var elementsForWeb = from m in elements
                     select new DataContracts.ElementForWeb()
                     {
                     ...
                     } 
```

# android - 原因：java.lang.IllegalStateException: startRecording() 在未初始化的 AudioRecord 上调用

> ID：11983209
> 
> 赞同：6
> 
> 时间：2012-08-16T08:22:35.263
> 
> 标签：android

我收到错误，例如在 android 2.3.4 版本的移动设备（LG）中调用未初始化的音频录制开始录制（），它在 android 2.2 中工作正常，但在 android 2.3 中抛出错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-07T16:34:33.577

此外，请确保您在 AndroidManifest.xml 中设置了此权限：

`<uses-permission android:name="android.permission.RECORD_AUDIO" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T11:26:42.510

我回答这个问题太晚了。可能是我的回答，将来可以帮助其他开发人员。从 Android 6.0 Marshmallow 开始，应用程序在安装时不会被授予任何权限。应用程序必须在运行时向用户询问权限。权限请求对话框不会自动启动，开发人员必须在检查是否授予权限后手动调用它。在上述情况下，开发人员必须在运行时请求**android.permission.RECORD_AUDIO权限。**如果将录音保存到外部存储，也适用于**android.permission.WRITE_EXTERNAL_STORAGE 。**也添加到清单为

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />

<!--Audio Record Permission-->
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

希望它会帮助一些开发者。

# ios5 - 如何防止 UITextViewDelegate 作为对象添加到 Storyboard Scene 被释放？弧

> ID：11983210
> 
> 赞同：1
> 
> 时间：2012-08-16T08:22:35.897
> 
> 标签：ios5, interface-builder, automatic-ref-counting, uitableview

我有一个相当简单的应用程序，其中包含几个 UITextField，其中应该只有正数（一些整数，一些小数）。我创建了两个 UITextViewDelegates 在调用 textFieldShouldEndEditing 和 textFieldShouldReturn 时对文本字段执行验证。

我在我的故事板场景中添加了两个对象项目，并为每个项目分配了一个类，并将每个文本字段的委托连接到正确的委托对象。

不幸的是，当调用 [textField canBecomeFirstResponder] 时，代表正在被释放。我有一个半黑客修复，我使用 IBOutletCollection 来保留对每个代表的引用。理想情况下，我不应该这样做。

这是可以在 IB/XCode 中调整的东西，还是只是一个我无法自己解决的 ARC 相关问题？

# html - 检测对 HTML 5 中的实时流媒体格式的支持

> ID：11983212
> 
> 赞同：3
> 
> 时间：2012-08-16T08:22:43.667
> 
> 标签：html, video, http-live-streaming

关于检测浏览器对视频标签的支持以及使用编解码器根据编解码器支持指定替代媒体类型有很多指导。或者使用 JWPlayer 之类的播放器为您执行此操作。

但是我在做直播。所以我需要嗅探的不仅仅是视频/H.264 支持——我想检测是否也支持 HTTP 实时流（或一些替代方案）。

（例如：Android 4.1 上的 Chrome Mobile：支持视频标签，但浏览器中不支持 HLS/H.264，但如果我直接重定向到清单，它会在视频播放器应用程序中打开，并且可以正常播放）

这可能吗？我真的想避免诉诸版本嗅探。在最坏的情况下，我会接受能够（以某种方式）嗅探视频标签无法加载的情况。

# sql-server - 如何在 SQL Server 中显示 MMYYYY 中的列值？

> ID：11983213
> 
> 赞同：0
> 
> 时间：2012-08-16T08:22:45.757
> 
> 标签：sql-server

我的同事给了我一个复杂的 sql 查询。我想得到一列的`MMYYYY`格式。我怎样才能实现它？以下是查询中的列部分（查询太长。所以我只粘贴列部分）。

```
CASE
   WHEN len(datepart (WEEK, cast(cast(month(from_date) AS VARCHAR(2)) + '/' + cast(xx.day_val AS VARCHAR(2)) + '/' + cast(year(from_date) AS VARCHAR(4)) AS DATETIME))) = 1 
   THEN '0' + datepart (WEEK, cast(cast(month(from_date) AS VARCHAR(2)) + '/' + cast(xx.day_val AS VARCHAR(2)) + '/' + cast(year(from_date) AS VARCHAR(4)) AS DATETIME))
   ELSE datepart (WEEK, cast(cast(month(from_date) AS VARCHAR(2)) + '/' + cast(xx.day_val AS VARCHAR(2)) + '/' + cast(year(from_date) AS VARCHAR(4)) AS DATETIME))
END AS week_number 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:33:29.340

如果将日期存储为字符串 (char/varchar) 而不是日期时间/日期，则只能以特定格式保留日期。

要以特定格式显示日期/日期时间，您需要使用 CONVERT 或 CAST：

SELECT CONVERT(varchar,CONVERT(datetime, '2010-03'), 103) -- 03/2010

**参考： http:** [//karaszi.com/the-ultimate-guide-to-the-datetime-datatypes](http://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes)（我希望这能回答你的问题）

问候，

尼古拉斯

# java - android单选按钮数组

> ID：11983215
> 
> 赞同：0
> 
> 时间：2012-08-16T08:23:09.843
> 
> 标签：java, android, arrays, radio-button

我正在尝试使用 RadioButtons 制作二进制时钟样式的应用程序。布局是这样的：

哦哦

o * o

这将代表 2。

我已经想出了如何在屏幕上用 1 和 0 打印出来，现在我想改用单选按钮。我使用的方法是这样的：

```
public void displayButtons()
{
    int[] binArray = new int[6];

    binArray = exec.toBinary(gregCal.get(GregorianCalendar.SECOND));

    for(int i = 0 ; i < binArray.length; i++ )
    {

        if(binArray[i] == 0)
            rButtons[i].setChecked(false);
        else 
            rButtons[i].setChecked(true);

    }
} 
```

toBinary 方法执行二进制转换，在本例中为秒，并返回一个由 1 和 0 组成的数组。我制作了一系列单选按钮，如下所示：

```
 private RadioButton rB0, rB1,rB2,rB3, rB4, rB5;
private RadioButton[] rButtons = new RadioButton[6];

    rButtons[0] = rB0;
    rButtons[1] = rB1;
    rButtons[2] = rB2;  
    rButtons[3] = rB3;
    rButtons[4] = rB4;  
    rButtons[5] = rB5; 
```

我尝试像这样启动单选按钮数组：

```
private RadioButton[] rButtons = {rB0, rB1,rB2,rB3, rB4, rB5}; 
```

但这给了我一个运行时错误..

即使我将 displayButtons() 方法放在正确打印出 1 和 0 的方法旁边，按钮也不会更新。

我希望我没有忘记包含一些重要的东西来解决这个问题。请指教。

编辑：
我的日志如下

08-16 12:42:33.453: D/AndroidRuntime(1041): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
08-16 12:42:33.453: D/ AndroidRuntime(1041): CheckJNI 开启
08-16 12:42:34.323: D/AndroidRuntime(1041): 调用主入口 com.android.commands.pm.Pm
08-16 12:42:34.362: D/AndroidRuntime(1041 ): 关闭 VM
08-16 12:42:34.383: D/dalvikvm(1041): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 1ms+2ms
08-16 12:42:34.393: D/dalvikvm(1041)：调试器已分离；对象注册表有 1 个条目
08-16 12:42:34.413：I/AndroidRuntime(1041)：注意：附加线程 'Binder Thread #3' 失败
08-16 12:42:34.882：D/AndroidRuntime(1051)：> >>>>> AndroidRuntime 启动 com.android。
08-16 12:42:34.882: D/AndroidRuntime(1051): CheckJNI 开启
08-16 12:42:35.592: D/AndroidRuntime(1051): 调用主条目 com.android.commands.am.Am
08-16 12:42:35.653：I/ActivityManager(60)：开始：Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=se.macke.binarycounter/.MainActivity从 pid 1051
08-16 12:42:35.732: D/AndroidRuntime(1051): 关闭 VM
08-16 12:42:35.752: D/dalvikvm(1051): GC_CONCURRENT 释放 102K, 69% 免费 320K/1024K,外部 0K/0K，暂停 2ms+5ms
08-16 12:42:35.802：I/AndroidRuntime(1051)：注意：附加线程 'Binder Thread #3' 失败
08-16 12:42:35.802: D/dalvikvm( 1051): 调试器已分离；对象注册表有 1 个条目
08-16 12:42:35.922: I/ActivityManager(60): 为活动 se.macke.binarycounter/.MainActivity 启动 proc se.macke.binarycounter: pid=1060 uid=10035 gids={}
08-16 12:42 :37.812: I/ActivityManager(60): 显示 se.macke.binarycounter/.MainActivity: +2s103ms
08-16 12:42:42.933: D/dalvikvm(132): GC_EXPLICIT 释放 50K，51% 释放 2842K/5767K，外部2295K/2866K，暂停82ms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:37:13.537

rB0, rB1... rb5 尚未初始化。您可以在您的 xml 文件中定义它们，然后使用

```
rB0 = (RadioButton) findViweById( R.yourxml.rB0id ) 
```

# sql - 触发器如何在单个事务中插入多行触发

> ID：11983220
> 
> 赞同：8
> 
> 时间：2012-08-16T08:23:20.470
> 
> 标签：sql, sql-server, triggers

我创建了一个`FOR INSERT`触发器，将在插入后触发。以下是我想知道触发器将如何触发的不同场景。

触发器在`employee`桌子上。我开始一项事务，在其中插入 4 行。我的疑问是触发器将如何触发。

1.  插入每一行后它会立即触发吗？
2.  完成该事务中的所有行后它会触发吗

我们能够从触发器访问`inserted`&特殊表。`deleted`

1.  每次这些表中会出现多少行？只有一个记录？还是多条记录？

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T12:29:48.520

触发器将在每个`INSERT`语句之后触发。

如果您有 4`INSERT`条语句，每条 1 行，则触发器将被触发 4 次，`inserted`每次插入后特殊表中有 1 条记录。

如果您有`INSERT`4 行的 1 条语句，则触发器将`inserted`在插入后仅触发 1 次，其中特殊表中有 4 条记录。

如果它们是事务性插入，那么您在触发器中执行的操作也将是事务性的。如果触发器有内部事务，这非常重要。

# android - 解析整数不起作用

> ID：11983221
> 
> 赞同：0
> 
> 时间：2012-08-16T08:23:22.590
> 
> 标签：android

有人可以检查我的代码吗？我正在使用`TextView`and计算分数`EditText`，我还为变量声明了整数，但是当我运行我的代码时，它在解析整数时给了我错误。提前致谢。另请查看我的日志猫以获取更多信息。这是我的代码：

```
 initControls();
      }
      private void initControls()
      {
          amount1=(EditText)findViewById(R.id.amount1);
          amount2=(EditText)findViewById(R.id.amount2);
          amount3=(EditText)findViewById(R.id.amount3);
          result=(TextView)findViewById(R.id.result);
          calculate=(Button)findViewById(R.id.finish);
          calculate.setOnClickListener(new Button.OnClickListener()
          {public void onClick
          (View  v) { calculate();}});
      }
      private void calculate()
      {

          if(amount1.getText().toString().equals(null))
          {
          x=0;
          }
          else
              amount1.getText().toString();
              x=Integer.parseInt(amount1.getText().toString());

      if(amount2.getText().toString().equals(null)) {
          y=0; 
      }
      else
          amount2.getText().toString();
          y=Integer.parseInt(amount2.getText().toString());

     if(amount3.getText().toString().equals(null)) {
          v=0;
      }
     else
    amount3.getText().toString();
      v=Integer.parseInt(amount3.getText().toString());
      {
          z=x+y+v;
          result.setText(Integer.toString(z));
      } 
```

这是我的日志猫：

```
08-16 16:15:51.794: W/dalvikvm(224): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-16 16:15:51.794: E/AndroidRuntime(224): Uncaught handler: thread main exiting due to uncaught exception
08-16 16:15:51.824: E/AndroidRuntime(224): java.lang.NumberFormatException: unable to parse '' as integer
08-16 16:15:51.824: E/AndroidRuntime(224):  at java.lang.Integer.parseInt(Integer.java:353)
08-16 16:15:51.824: E/AndroidRuntime(224):  at java.lang.Integer.parseInt(Integer.java:323)
08-16 16:15:51.824: E/AndroidRuntime(224):  at drj.thesis.tridi.Maingame.calculate(Maingame.java:70)
08-16 16:15:51.824: E/AndroidRuntime(224):  at drj.thesis.tridi.Maingame.access$0(Maingame.java:54)
08-16 16:15:51.824: E/AndroidRuntime(224):  at drj.thesis.tridi.Maingame$1.onClick(Maingame.java:52)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.View.performClick(View.java:2364)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.View.onTouchEvent(View.java:4179)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.View.dispatchTouchEvent(View.java:3709)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-16 16:15:51.824: E/AndroidRuntime(224):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
08-16 16:15:51.824: E/AndroidRuntime(224):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
08-16 16:15:51.824: E/AndroidRuntime(224):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.os.Looper.loop(Looper.java:123)
08-16 16:15:51.824: E/AndroidRuntime(224):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-16 16:15:51.824: E/AndroidRuntime(224):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 16:15:51.824: E/AndroidRuntime(224):  at java.lang.reflect.Method.invoke(Method.java:521)
08-16 16:15:51.824: E/AndroidRuntime(224):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-16 16:15:51.824: E/AndroidRuntime(224):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-16 16:15:51.824: E/AndroidRuntime(224):  at dalvik.system.NativeStart.main(Native Method)
08-16 16:15:51.857: I/dalvikvm(224): threadid=7: reacting to signal 3
08-16 16:15:51.864: E/dalvikvm(224): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:26:52.617

首先，您应该使用字符串长度函数检查您的空字符串。

## 喜欢

`if(amount1.getText().toString().length == 0)`

第二件事你需要把`{ }`括号放在else循环中

## 例子

```
if(amount1.getText().toString().length() == 0)
{
   x=0;
}
else
{
   x=Integer.parseInt(amount1.getText().toString().trim());
} 
```

您尝试解析的代码`Empty Text('')`无法解析。请将该解析代码写在带`{}`括号的其他部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:26:39.620

问题很清楚：

```
java.lang.NumberFormatException: unable to parse '' as integer 
```

您正在尝试解析一个空字符串。您需要弄清楚*为什么*要尝试解析空字符串。

我怀疑这是其中很大一部分：

```
 if(amount1.getText().toString().equals(null))
 {
    x=0;
 }
 else
    amount1.getText().toString();
    x=Integer.parseInt(amount1.getText().toString()); 
```

你应该在你的`else`块周围有大括号，以便*两个*语句都在其中：

```
 if(amount1.getText().toString().equals(null))
 {
    x=0;
 }
 else
 {
    amount1.getText().toString();
    x=Integer.parseInt(amount1.getText().toString());
 } 
```

...虽然块中的第一条语句`else`对我来说毫无意义。

我实际上希望`amount1.getText()`已经*返回*一个字符串，从而使`toString()`调用变得不必要（也许不是；这可能是我不知道的 Android 方面），但我从不期望结果等于 null。也许您打算像这样与“”进行比较：

```
 if(amount1.getText().toString().equals(""))
 {
    x=0;
 }
 else
 {
    // Removed pointless call to amount1.getText().toString()
    x=Integer.parseInt(amount1.getText().toString());
 } 
```

（您也可以使用它`amount1.getText().toString().getLength() == 0`来检查空字符串。这是您选择的偏好问题。）

您在下面也遇到了同样的问题，建议您可能应该提取一种方法来执行此条件解析。

此外，您应该*真正*修复缩进。正确缩进代码对代码的可读性有很大的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:27:45.363

请记住，Empty Text( '' ) 不能被解析为数字/整数。

# google-drive-api - Google Drive SDK 中的结果顺序

> ID：11983228
> 
> 赞同：7
> 
> 时间：2012-08-16T08:23:43.227
> 
> 标签：google-drive-api

我们可以使用 Google Drive Api 订购文件列表（按标题、种类或上次更新）吗？这显然不能在客户端完成，因为我们不应该一次性获得整个列表，但无法弄清楚如何在服务器端对其进行排序。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:41:01.120

没有任何查询参数可以让客户端从 Google Drive API 请求排序的文件列表。这是我们可以考虑的有效功能请求。

与此同时，客户端应用程序别无选择，只能在他们身边执行排序。

# c++ - 在位字段中使用枚举是否安全？

> ID：11983231
> 
> 赞同：32
> 
> 时间：2012-08-16T08:23:46.810
> 
> 标签：c++, c, enums, bit-fields

说，我有以下结构：

```
typedef struct my_struct{
    unsigned long       a;
    unsigned long       b;
    char*               c;
    unsigned int        d1  :1;
    unsigned int        d2  :4;
    unsigned int        d3  :4;
    unsigned int        d4  :23;
} my_type, *p_type; 
```

该字段`d3`当前由从until`#define`到达的 s定义。`0x00``0x0D`

实际上，`d3`是一个枚举。所以很想继续更换

```
 unsigned int        d3  :4; 
```

经过

```
 my_enum             d3  :4; 
```

这是安全/允许的吗？

代码必须用各种编译

*   编译器（GCC、Visual Studio、嵌入式的东西）
*   平台（Win32、Linux、嵌入式）
*   配置（编译为 C，编译为 C++）

显然，我可以保持`d3`原样的定义并在我的代码中使用枚举，将其分配给`d3`等等，但这不适用于 C++。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T08:38:02.303

在所有支持标准的 C++ 编译器中都允许这样做。

C++03 标准 9.6/3

> 位域应具有整数或枚举类型（3.9.1）。普通（既不是显式签名也不是无符号）char、short、int 或 long 位字段是有符号还是无符号是实现定义的。

C++03 标准 9.6/4

> 如果枚举数的值存储在相同枚举类型的位域中，并且位域中的位数大到足以容纳该枚举类型的所有值、原始枚举数值和位域的比较相等。

例子

```
enum BOOL { f=0, t=1 };

struct A {
    BOOL b:1;
};

void f() {
    A a;
    a.b = t;
    a.b == t // shall yield true
} 
```

但是您不能认为枚举具有无符号基础类型。

C++03 标准 7.2/5

> 枚举的底层类型是一个整数类型，可以表示枚举中定义的所有枚举值。使用哪种整数类型作为枚举的基础类型由实现定义，除非基础类型不得大于 int，除非枚举数的值不能适合 int 或 unsigned int

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-16T08:38:29.007

C 和 C++ 的答案会有所不同，这是 C 的答案。

在 C 中，位域被限制为`signed int`, `unsigned int`,`_Bool`并且`int`在这种情况下可以是前两个中的任何一个。编译器实现者可以根据自己的喜好添加到该列表中，但需要记录他们支持的类型。

因此，要回答您的问题，如果您想绝对确定您的代码可移植到所有 C 编译器，不，使用`enum`类型不是一种选择。

当前标准的相应段落如下：

> 位域的类型应为 _Bool、signed int、unsigned int 或其他一些实现定义的类型的合格或非合格版本。是否允许原子类型是实现定义的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-04T06:26:08.373

不。

位域在编译器之间的实现方式明显不同。如果您使用两个值（零和一）定义位域，并尝试使用枚举类型的位域，那么您可能会遇到以下问题：

位字段将使用 gcc 和 clang 无符号，但使用 VC++ 签名。这意味着为了存储零和一，您需要一个两位位字段（一位有符号位字段只能存储零和负一）。

然后你必须担心包装。如果它们的大小匹配，VC++ 只会将相邻的位字段打包到同一个后备存储中。我不确定 gcc 和 clang 的规则是什么，但对于 VC++，位字段的默认后备存储是 int。因此，一系列位字段（例如，bool 和 enum 的混合）将在 VC++ 中非常糟糕地打包。

您可以尝试使用 C++ 11 类型的枚举来解决此问题：

枚举 Foo : 无符号字符 { 一，二 };

但是如果您在一位位字段中使用它，则 gcc 会抱怨：

警告：“bitfieldTest::g”太小，无法容纳“enum Foo”的所有值 [默认启用]

好像没有胜算。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T08:50:47.200

在 C 中，这是一种未定义的行为，因为位域只能具有`signed int`、`int`或`unsigned int`类型（或`_Bool`使用 C99）。

**6.5.2.1**：

> 位字段的类型应为 int、unsigned int 或 signed int 之一的合格或不合格版本。（可能有条件的）“普通”int 位域的高位位置是否被视为符号位是实现定义的。位域被解释为由指定位数组成的整数类型。

否则，一些编译器今天接受它作为扩展（参见标准中扩展的实现定义行为）。

# mysql - 无法安装 django-activity-stream 数据库表

> ID：11983232
> 
> 赞同：7
> 
> 时间：2012-08-16T08:23:47.700
> 
> 标签：mysql, django, django-south, migrate

使用 django-south，是否可以在不应用所有先前迁移的情况下仅将表设置为最后一个最近的配置？

我们对使用第 3 方工具 (django-activity-stream) 感兴趣，但在运行所有迁移时遇到了困难，原因不明（可能是有关特定字段的 MySQL 问题） - 特别是迁移 003，它会引发错误

> _mysql_exceptions.OperationalError: (1170, "BLOB/TEXT column 'object_id' used in key specification without a key length") "我强烈怀疑避免迁移并直接进入当前模式将避免这种情况。

不需要向后迁移的能力，只需要让我们立即进入当前模式，我不想破解包来处理这个问题。我似乎无法建立命令，或者这是否可能？

配置：

南 0.7.6，django 1.3.x，mysql 5.5.x，django-activity-stream 0.4.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T05:40:42.330

`actstream`由于处理其通用外键的方式而出现此错误。MySql 出现问题是因为它看到没有指定任何长度的文本字段。

可以通过将迁移 0003 设为无操作来修复此错误。

在 actstream中更改 migrations 中的以下内容`0003_text_field_ids`：`0004_char_field_ids`

0003_text_field_ids.py：

1.  删除中的所有内容 `def forwards(self, orm)`， `def backwards(self, orm)`然后将两者都写入`pass`。
2.  更改`TextField`为`PositiveIntegerField`。

0004_char_field_ids.py：

1.  中`def backwards(self, orm)`，全部更改`TextField`为`PositiveIntegerField`中`db.altercolumns()`。

这使得迁移 0003 成为使用前向和后向传递的 noop，并使模型的定义`PositiveIntegerFields`用于通用外键，因此它们保持与迁移 0001 离开它们时相同的状态。`PositiveIntegerFields`这样做，migration 0004 可以从to拾取`varChars`。然后修复更改迁移 0004，因此向后迁移更改为`PositiveIntegerFields`而不是`TextFields`.

这应该有望解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:21:35.463

我不认为问题是由迁移引起的，甚至`syncdb`会给你同样的结果。

出现错误是因为 MySQL 只能索引 BLOB 或 TEXT 列的前 N ​​个字符。因此，您必须有一个 TEXT 或 BLOB 的字段/列类型，您试图将其作为主键或索引。

**对于没有长度值的完整 BLOB 或 TEXT**，MySQL 将无法保证列的唯一性，因为它具有可变和动态大小。因此，当使用 BLOB 或 TEXT 类型作为索引时，必须提供 N 的值，以便 MySQL 可以确定键长度。

尝试解决此问题，然后尝试应用迁移，它应该可以正常工作。是的，您可以应用任何迁移并跳过较旧的迁移，但我建议不要这样做，因为这不是应该使用南的方式。

希望我把事情说清楚了。

# android - 是否有适用于 Android 的“评论提醒”插件？

> ID：11983237
> 
> 赞同：0
> 
> 时间：2012-08-16T08:24:08.267
> 
> 标签：android, plugins, alert, review

我找到了一个适用于 iOs 应用程序的插件。安卓也有这样的插件吗？

插件网站：http: [//goo.gl/yFTns](http://goo.gl/yFTns)

示例屏幕：http: [//goo.gl/GDtSL](http://goo.gl/GDtSL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:33:46.293

查看此 android 代码片段以评价您的 android 应用程序。

[http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:41:09.293

它不需要插件。您只需计算用户是否正在使用该应用程序（打开次数、时间等），一段时间后您会弹出一个带有 Intent ACTION_OPEN 的 AlertDialogue 到您的 Google Play 链接。

# web-services - REST 服务：格式化请求与响应的最佳实践是什么？

> ID：11983238
> 
> 赞同：1
> 
> 时间：2012-08-16T08:24:11.727
> 
> 标签：web-services, rest

具体来说，这是一种情况：一个请求可以有一个正文（POST 或 PUT），其格式为`Content-Type`标头中指定的格式 - 例如，`application/json`. 但是，URI 包含不同格式的格式匹配（例如 as`?_format=xml`或`resource_uri.xml`），通常用于表示响应格式。我在这里看到三种可能的解决方案：

1.  请求的`Content-Type`被忽略，请求正文被解析，就好像它是 URI 表示的格式一样。
2.  忽略 URI 标记，并且假定请求和响应都按照`Content-Type`.
3.  根据 解析请求正文`Content-Type`，并按照 URI 的提示格式化响应。

我个人喜欢方法#3，但有点担心格式的差异。这里通常的做法是什么，是否可以接受不同格式的请求和响应？如果不是，我更喜欢方法#1，而#2 似乎完全不直观且不直观。这里有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:31:33.600

方法#3 是这三种方法中唯一的一种，它还允许请求和响应采用不同的格式。这是一件好事，因为通常请求采用一种固定格式，而响应可以以客户喜欢的任何受支持的格式呈现。

方法 #1 显然滥用了 HTTP，并且永远不会出现。

方法 #2 也很糟糕，因为客户端期望的响应格式有*不同*[`Accept`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1)的标头： .

简而言之：您可以按照 HTTP 的预期方式进行操作（使用`Accept`标头），或者通过允许在 URL 中内联指定格式来为客户端提供一些便利。您也可以同时执行（如果`Accept`标头指定格式，则使用该格式，否则还要检查 URL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:33:44.513

方法#3 没问题，我想说您可以依靠`Accept`标头来确定响应格式。这样，`Content-Type`标头设置请求格式，`Accept`标头或`_format`查询参数设置响应格式。

# php - 用 PHP 更改 url

> ID：11983239
> 
> 赞同：0
> 
> 时间：2012-08-16T08:24:19.607
> 
> 标签：php, regex

我需要创建指向我的网站的多语言链接，我正在考虑使用 str_replace，但我不确定这是否是正确的选择。也许 REGEX 可以解决问题...但是我对正则表达式不太流利...

我的网址是这样的：localhost/project/public/LANG/event/id/

LANG 可以是：

```
/en/ 
/fi/
/sv/ 
```

其他网址相同，只是网址的 /LANG/ 部分发生了变化。我试图用这个改变网址：

```
<?php
$search = array("/sv/", "/fi/");
$replace = array("/en/");
$url_en = str_replace($search, $replace, $url);
echo $url_en;
?> 
```

然而，这并没有给我正确的 url，它用 sv 或 fi 替换了所有东西。我认为正确的解决方案是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:59:14.680

使用 .htaccess 文件翻译友好的网址

在您的网站根目录中创建一个 .htaccess 文件

您的链接看起来像 domain/a/b/c/d

本地主机/项目/公共/LANG/事件/id/

这被翻译为 domain/index.php?action=project&saction=public&language=LANG&taction=event&tid=id

他们被这个文件翻译成 domain/index.php?action=a&id=b&saction=c&sid=d

以下是我的文件之一，例如；祝你好运

```
Options +SymLinksIfOwnerMatch

RewriteEngine on

RewriteRule ^([a-zA-Z-]+)/(producator)-([0-9]+)$ index.php?action=$1&producator=$3 [NC,L]
RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(producator)-([0-9]+)$ index.php?action=$1&id=$2&producator=$4 [NC,L]

RewriteRule ^([a-zA-Z-]+)/(producatorx)-([0-9]+)$ index.php?action=$1&producatorx=$3 [NC,L]
RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(producatorx)-([0-9]+)$ index.php?action=$1&id=$2&producatorx=$4 [NC,L]

RewriteRule ^([a-zA-Z-]+)$ index.php?action=$1 [NC,L]

RewriteRule ^([a-zA-Z-]+)-([0-9]+)$ index.php?action=$1&id=$2 [NC,L]

RewriteRule ^(tag)/([a-z0-9]+)$ index.php?action=tag&tag=$2 [NC,L]

RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(update)-([a-z0-9]+)$ index.php?action=$1&id=$2&saction=update&code=$4 [NC,L]
RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(delete)-([a-z0-9]+)$ index.php?action=$1&id=$2&saction=delete&code=$4 [NC,L]

RewriteRule ^([a-zA-Z-]+)-([0-9]+)/([a-zA-Z-]+)-([0-9]+)$ index.php?action=$1&id=$2&saction=$3&sid=$4 [NC,L]

RewriteRule ^(.*)-([0-9]+).html$ index.php?action=details&id=$2 [NC,L] 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-16T08:36:07.203

```
preg_replace('|(localhost/project/public/)..|', '\1EN', $url); 
```

# sql - 没有游标的存储过程

> ID：11983253
> 
> 赞同：0
> 
> 时间：2012-08-16T08:24:48.677
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, sql-server-2008-r2

如何在没有光标的情况下编写以下 sp？更重要的是它没有给我想要的输出。我没有写这个，我试图解释这有什么问题。

```
ALTER PROCEDURE [dbo].[AccreditationExpiryCheck]
AS
BEGIN
    SET NOCOUNT ON;

    declare @taskTypeId int = 19 -- Accreditations, automated
    declare @firstActionTypeId int = 23 -- Accreditation expiring
    declare @nextActionTypeId int = 3 -- Call company

    declare @companyId int
    declare @accreditationId int
    declare @comment nvarchar(max) = N' accreditation for this company has expired.'

    -- find all companies and accreditations expiring
    declare companies cursor local forward_only read_only for 
        select c.Company_Id, a.Accred_ID
        from COMPANY c
            inner join MEMBERSHIP m on c.Company_ID = m.Company_ID
            inner join ACCREDITATION a on c.Company_ID = a.Company_ID
        where
            -- Accreditation expired yesterday
            cast(a.Accred_ExpDate as DATE) = cast(DATEADD(DAY, -1, GETDATE()) as DATE)
            and m.IsMember_Ind = 1
            and (c.HQ_ID IS NULL OR c.HQ_ID = c.Company_ID)  -- FB4640: this isn't a 'team' co (with an HQ)
            -- and there is no action of this type created within 1 day
            -- of the expiry date
            and not exists (
                select * from TaskAction ta where
                    ta.FirstActionTypeId = @firstActionTypeId and
                    ta.TaskTypeId = @taskTypeId and
                    ta.TaskCreatedOn BETWEEN a.Accred_ExpDate AND DATEADD(DAY, 1, a.Accred_ExpDate) and
                    ta.EntityId = c.Company_ID and 
                    ta.EntityTypeId = 1 )

    open companies

    fetch next from companies into @companyId, @accreditationId

    declare @title nvarchar(max) = 
        (select AccredType_Name from ACCREDITATION_TYPE at 
        inner join ACCREDITATION a on at.AccredType_ID = a.AccredType_ID
        where a.Accred_ID = @accreditationId)

    declare @comment2 nvarchar(max) = isnull(@title, '') + ' accreditation for this company has expired.'
    while @@FETCH_STATUS = 0
    begin
        exec CreateSystemTask 
            @taskTypeId, 
            @firstActionTypeId,
            @nextActionTypeId,
            @companyid,
            @comment2,
            @title

        fetch next from companies into @companyId,@accreditationId
    end

    close companies
    deallocate companies
END 
```

上面 sp 中的以下 select 语句为我提供了正确的数据集，但循环的光标给了我不同的输出。

```
select c.Company_Id, a.Accred_ID
        from COMPANY c
            inner join MEMBERSHIP m on c.Company_ID = m.Company_ID
            inner join ACCREDITATION a on c.Company_ID = a.Company_ID
        where
            -- Accreditation expired yesterday
            cast(a.Accred_ExpDate as DATE) = cast(DATEADD(DAY, -1, GETDATE()) as DATE)
            and m.IsMember_Ind = 1
            and (c.HQ_ID IS NULL OR c.HQ_ID = c.Company_ID)  -- FB4640: this isn't a 'team' co (with an HQ)
            -- and there is no action of this type created within 1 day
            -- of the expiry date
            and not exists (
                select * from TaskAction ta where
                    ta.FirstActionTypeId = @firstActionTypeId and
                    ta.TaskTypeId = @taskTypeId and
                    ta.TaskCreatedOn BETWEEN a.Accred_ExpDate AND DATEADD(DAY, 1, a.Accred_ExpDate) and
                    ta.EntityId = c.Company_ID and 
                    ta.EntityTypeId = 1 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:51:05.330

```
ALTER PROCEDURE [dbo].[AccreditationExpiryCheck] 
AS 
BEGIN 
    SET NOCOUNT ON; 

    declare @taskTypeId int = 19 -- Accreditations, automated 
    declare @firstActionTypeId int = 23 -- Accreditation expiring 
    declare @nextActionTypeId int = 3 -- Call company 

    declare @companyId int 
    declare @accreditationId int 
    declare @comment nvarchar(max) = N' accreditation for this company has expired.'

    -- find all companies and accreditations expiring 
    select ROW_NUMBER() OVER(ORDER BY c.Company_Id, a.Accred_ID) as [RecordId], c.Company_Id as [Company_Id], a.Accred_ID as [Accred_ID]
    into #COMPANIES
        from COMPANY c 
            inner join MEMBERSHIP m on c.Company_ID = m.Company_ID 
            inner join ACCREDITATION a on c.Company_ID = a.Company_ID 
        where 
            -- Accreditation expired yesterday 
            cast(a.Accred_ExpDate as DATE) = cast(DATEADD(DAY, -1, GETDATE()) as DATE) 
            and m.IsMember_Ind = 1 
            and (c.HQ_ID IS NULL OR c.HQ_ID = c.Company_ID)  -- FB4640: this isn't a 'team' co (with an HQ) 
            -- and there is no action of this type created within 1 day 
            -- of the expiry date 
            and not exists ( 
                select * from TaskAction ta where 
                    ta.FirstActionTypeId = @firstActionTypeId and 
                    ta.TaskTypeId = @taskTypeId and 
                    ta.TaskCreatedOn BETWEEN a.Accred_ExpDate AND DATEADD(DAY, 1, a.Accred_ExpDate) and 
                    ta.EntityId = c.Company_ID and  
                    ta.EntityTypeId = 1 )

    declare @recordId int = 0;
    declare @title nvarchar(max);
    declare @comment2 nvarchar(max);

    while(1=1)
        begin
            select top 1 @recordId = [RecordId]
                        ,@companyId = [CompanyId]
                        ,@accreditationId = [Accred_ID]
            from #COMPANIES
            where [RecordId] > @recordId

            if @@ROWCOUNT = 0 break;

            set @title =  
                (select AccredType_Name from ACCREDITATION_TYPE at  
                inner join ACCREDITATION a on at.AccredType_ID = a.AccredType_ID 
                where a.Accred_ID = @accreditationId) 

            set @comment2 = isnull(@title, '') + ' accreditation for this company has expired.' 

                exec CreateSystemTask  
                    @taskTypeId,  
                    @firstActionTypeId, 
                    @nextActionTypeId, 
                    @companyid, 
                    @comment2, 
                    @title        
        end 

    drop table #COMPANIES 
END 
```

# python - Python：创建元组列表

> ID：11983257
> 
> 赞同：0
> 
> 时间：2012-08-16T08:24:57.490
> 
> 标签：python, django

我正在尝试在 django 中创建一个元组列表，例如

```
appointments = [(datetime(2012, 5, 22, 10), datetime(2012, 5, 22, 10, 30)),    
                (datetime(2012, 5, 22, 12), datetime(2012, 5, 22, 13)),    
                (datetime(2012, 5, 22, 15, 30), datetime(2012, 5, 22, 17, 10))] 
```

我正在迭代一个 django 查询集并将值存储在约会列表中，例如

```
 appoinments = [] 
    for select_meeting in get_meeting:
        getm = int(select_meeting.duration)
        appoinments += zip(((select_meeting.meeting_datetime),
                            (select_meeting.meeting_datetime + timedelta(minutes = getm))))
    print appoinments 
```

但它返回的结果实际上不是我的要求

```
[(datetime.datetime(2012, 11, 11, 21, 5),),
 (datetime.datetime(2012, 11, 11, 22, 5),),
 (datetime.datetime(2012, 11, 11, 23, 5),),
 (datetime.datetime(2012, 11, 12, 0, 5),)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:36:02.710

您使用 zip 错误 - 它实际上是它的工作方式，这很正常（它返回的第 i 个元组包含给定可迭代的第 i 个元素）。这些行应该是：

```
appointments.append((select_meeting.meeting_datetime,
                     select_meeting.meeting_datetime + timedelta(minutes = getm))) 
```

它应该是你现在想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:01:23.617

```
appointments = [(x, x+timedelta(minutes=x.duration)) for x in get_meeting] 
```

# php - Amazon EC2 上的 Magento

> ID：11983261
> 
> 赞同：2
> 
> 时间：2012-08-16T08:25:06.250
> 
> 标签：php, mysql, magento, amazon-ec2, amazon-web-services

我正在考虑将我的 VPS 内容移动到 Amazon EC2 实例上。

我试图了解我需要哪些“部分”才能使我的 Amazon RI 持久化，它将运行 100% 的时间，并且我想避免数据丢失（例如，如果我重新启动/停止机器）。我在博客上读过这个，但我认为它指的是机器终止（而不是停止）。

顺便说一下，我想问你一些问题：

*   我是否需要购买 EBS 卷才能获得一些存储空间，或者它也随实例本身提供？
*   如果我有一个实例存储，EBS 对它有什么好处？
*   您建议什么样的存储具有持久性存储？（没有人会通过 API 访问，所以除了应用程序本身之外，没有人会接触到数据）。
*   您认为小型实例是否适合为拥有数百种产品的 MagentoCommerce 提供服务？
*   年会自动更新吗？是否需要再次支付一次性费用（对于 RI）？
*   在选择我应该购买哪种实例类型时，您有什么经验或建议需要注意吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:29:26.757

*   You can use an EBS backed instance where the EBS volume is the core volume. You can add additional EBS volumes for more disk space
*   The only real benefit of instance storage over EBS in my opinion is the cost savings, the persistence of EBS is a major plus.
*   Despite the comment above, I've set up Magento stores using multiple EBS volumes arranged in a RAID0 and achieved decent I/O. Be prepared to tune and tweak the server.
*   Instance size is going to be dependent on traffic and load. Without knowing either, my guess is that a small isn't going to perform well. I've seen a c1-xlarge hosting both Magento and the DB perform well with 15,000 uniques a day.
*   The 64 bit instances have more options for up sizing and downsizing.

Moving on to AWS involves trade-offs. You're going to get better hardware performance from a dedicated physical box, but you'll loose flexibility. Depending on how your payment gateway is setup, you may have PCI compliance issues in the cloud.

# c++ - 如何生成唯一的文件名或路径？

> ID：11983266
> 
> 赞同：3
> 
> 时间：2012-08-16T08:25:18.167
> 
> 标签：c++, windows, unix

如何生成唯一的文件名或路径？我正在寻找一种适用于 Unix（类）操作系统和 Windows 的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T08:39:48.570

利用[`boost::uuid`](http://www.boost.org/doc/libs/1_50_0/libs/uuid/)：

```
#include <string>
using std::string;

#include <boost/lexical_cast.hpp>
using boost::lexical_cast;

#include <boost/uuid/uuid.hpp>
using boost::uuids::uuid;

#include <boost/uuid/uuid_generators.hpp>
using boost::uuids::random_generator;

#include <boost/uuid/uuid_io.hpp>

string make_uuid()
{
    return lexical_cast<string>((random_generator())());
} 
```

并使用生成的 UUID 作为文件名（因此路径无关紧要）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T08:29:09.417

对两者都使用 mktemp。[Windows 在msdn docs](http://msdn.microsoft.com/en-us/library/34wc6k1f.aspx)上有一个版本的 posix 调用，而 linux 调用是[mktemp(3)](http://www.unix.com/man-page/FreeBSD/3/mktemp/)。linux上的mktemp命令行工具偶然只是调用它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T08:48:36.793

正如在其他地方提到的，有`tmpnam`. 它通常实现得很差，以允许与其他进程竞争条件。然而，在典型的单用户机器上，这通常就足够了。

在我自己的代码中，我通常会创建一个目录，将进程 ID 作为名称的一部分，并安排将我所有的临时文件放入其中（使用简单的计数器来改变文件名）；在共享磁盘上，我还将处理器 ID 修改为目录名称（但我倾向于将临时文件放在本地的非共享驱动器上，这样可以避免大多数问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:29:41.070

*   最简单的方法：生成一个随机数并使用它的十六进制值作为文件名（除非文件存在，在这种情况下你创建一个新的）。

*   最简单的方法2：如果您只需要一些不存在的文件，请使用一个数字（或其十六进制值）作为文件名或其一部分，您只需增加数字直到没有具有该名称的文件存在。

*   更复杂的方法：生成一个 GUID 并将其用作文件名（再次验证它未在使用中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T08:30:02.223

您可以获取当前时间戳并将其用作文件名。或者只是将最后一个文件名增加 1。
例如 1.txt、2.txt 等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T08:31:42.117

使用 C 库函数`tmpfile`或`tmpnam`. 两者都存在于 windows 和 linux 下。

但请注意，使用 tmpfile 时，它​​会在您关闭程序时自动删除，因此可能`tmpnam`更适合您。

# c# - 单开发。未找到从程序集浏览器可见的方法。(CS0584)

> ID：11983272
> 
> 赞同：0
> 
> 时间：2012-08-16T08:26:04.703
> 
> 标签：c#, xamarin.ios, monodevelop, xamarin

我有属于 AForge.NET 框架的 .dll。我无法编译项目，因为：

```
Error CS0584: Internal compiler error: Could not import type `AForge.Imaging.Filters.Sepia' from `AForge.Imaging, Version=2.2.4.0, Culture=neutral, PublicKeyToken=ba8ddea9676ca48b' (CS0584) (projectName)
Error CS0584: Internal compiler error: Could not import type `AForge.Imaging.Filters.Invert' from `AForge.Imaging, Version=2.2.4.0, Culture=neutral, PublicKeyToken=ba8ddea9676ca48b' (CS0584) (projectName)
Error CS0584: Internal compiler error: Method not found: 'AForge.Imaging.UnmanagedImage.CollectActivePixels'. (CS0584) (tryingImageProcessing) 
```

但是所有这些方法和类都可以从程序集浏览器中看到。 [这是](http://dump.bitcheese.net/files/awitaje/ImageProcessing.zip/preview)错误项目的链接。我还向 xamarin bugzilla[报告了一个错误。](https://bugzilla.xamarin.com/show_bug.cgi?id=6543)

*希望这篇文章不会被视为我以前的副本：该帖子的问题与当前完全不同。*

**更新：** 嗯，我发现了问题所在。@Jason 是对的：我没有针对 MonoTouch 编译库，它是针对 MonoTouch 编译的。所以我在那里创建了新项目和过去的资源。AForge (Core) 和 AForge.Math 编译完美，而 AForge.Imaging 没有：来自 github.com/mono/ 的 System.Drawing 实现了 AForge.Imaging 需要的一些功能。因此，目前还没有解决办法。

# iphone - 如何根据 BOOL 值对其他类隐藏已实现的委托方法？- 目标 c

> ID：11983275
> 
> 赞同：0
> 
> 时间：2012-08-16T08:26:21.390
> 
> 标签：iphone, objective-c, ios

我需要`delegate`在`UIViewController`类中隐藏我自定义的实现方法，具体取决于`BOOL`属性“isHidden”。我从 2 个地方调用一个`UIViewController`，我需要从这些类之一中隐藏委托方法。例如 A 类和 B 类调用 my`UIViewController`并检查此方法`respondsToSelector:@selector(myMethod)`，如果`BOOL`属性为`TRUE`，则让`respondsToSelector`方法返回`TRUE`值，否则 - `FALSE`。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:33:41.267

让委托调用这些方法......并根据布尔值在其中执行任务或让它通过......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:33:05.330

嗯……可以通过运行时交换选择器的实现（例如，到什么都不做的实现），但这是一个糟糕的解决方案。这会影响所有实例——这种方法使单例看起来像黄金。

相反，请考虑将条件引入`myMethod`，因此 myMethod 不会动态执行任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:45:47.117

有一种模式，您可以在其中定义委托方法，如下所示：

```
@protocol MyObjectDelegate <NSObject>

    - (void)myObject:(id)myObject processSomeData:(id)someData;

@end 
```

所以你的委托控制器知道哪个对象请求这个方法并且可以决定做什么。此外，您可以添加一些类似这样的方法来通知对象是否有权在实际发送消息之前访问此方法

```
- (BOOL)myObjectCanProcessSomeData:(id)myObject; 
```

当然，有一些技术可以通过与 Objective-C 运行时交互来添加和删除对象方法，但我不确定这是否是个好主意。

# windows - VIM：如何根据缓冲区类型映射命令？

> ID：11983282
> 
> 赞同：12
> 
> 时间：2012-08-16T08:26:53.567
> 
> 标签：windows, vim

我知道我的标题不是那么描述性/清晰，所以让我解释一下。

昨天我可以通过，`Vimgrep and copen`所以我在下面添加了以下行`.vimrc`

```
nnoremap <silent> ,/ :execute 'vimgrep /'.@/.'/g %'<CR>:copen<CR> 
```

它的作用是在 vim`quickfix list`中为`searched(highlighted)`单词打开 a。

现在，当你按下`Enter<CR>`quickfix 列表时，它会将你带到 Vim 主窗口中的相应行。

现在，我面临的问题是我已经映射了我的`<CR`like `map <CR> o<Esc>`，它在当前行的正下方创建了一个新行。

因此，如您所见，两者之间存在冲突。所以，我正在尝试的是想出一个 vim 函数，比如

*伪代码*

```
function IfNotInsideQuickFix()
    if buffer != QuickFix
        then map <CR> o<Esc>
    elif buffer == QuickFix
         Normal behaviour

Call function 
```

这是输出`:buffers`

```
:buffers
  1 #a   "test.cs"                      line 0
  2 %a-  "[Quickfix List]"              line 1
Press ENTER or type command to continue 
```

我没有编写 vim 函数的经验。所以，有人可以指导我吗？

PS：我知道我可以更改我的 Vim 映射来创建一个新行，但我想学习如何通过 Vim 函数来做到这一点

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T08:39:53.017

您可以保持全局`<CR>`映射原样，但在本地快速修复窗口中恢复原始行为。这是通过一个`:autocmd`（在快速修复窗口打开时触发的）映射（不重新映射）`<CR>`（本地通过`<buffer>`）到自身上来完成的。

```
:autocmd BufReadPost quickfix nnoremap <buffer> <CR> <CR> 
```

# javascript - 使用 .click 另一个 div 后如何使用 .blur 删除 div

> ID：11983285
> 
> 赞同：0
> 
> 时间：2012-08-16T08:27:04.433
> 
> 标签：javascript, jquery, onclick, onblur

我试图让一个大搜索栏 div 在我将鼠标从该 div 移开的那一刻消失（但只有在使用另一个搜索栏上的 .click 功能可以看到大搜索栏之后）。

对不起，如果这听起来令人困惑，但这是我到目前为止所做的：

```
$("#bar-b").click(function() {
    $("#quickSearch").show();
}); 
```

div 是小的`#bar-b`主搜索栏，一旦我单击它，`#quickSearch`div（我创建的大搜索栏）就会出现在小主搜索栏的正下方。我想要做的是当我将光标移动到`#quickSearch`div 中时（我希望不会进行任何更改，所以什么都不会发生，这就是它到目前为止所做的）但是当我将光标从`#quickSearch`div 中移开时，我想要`#quickSearch`div 消失。如果有人可以告诉我如何做到这一点，那么我将不胜感激。

我做了一些尝试，结果证明是不正确的，例如：

```
$("#bar-b").click(function() {
    $("#quickSearch").show();
});

$("#quickSearch").mouseleave(function() {
    $("#quickSearch").hide();
}); 
```

HTML 标签（如果有帮助，请在下面列出每个 div）：

```
<div id="bar-b">
    <a name="thesearchbox"></a>
    <input id="Keyword" accesskey="4" type="text" name="keyword" value="Search   Jessops - Keyword, name, catalogue no." style="color: rgb(153, 153, 153); ">
    <input id="cmdSearch" class="button" type="submit" value="">
</div>

<div id="quickSearch" style="border: 3px solid black; height: 250px; display: none;">/div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:57:32.133

检查这个[jsfiddle链接](http://jsfiddle.net/zXSH3/1/)

你的代码有语法错误

```
<div id="quickSearch" style="border: 3px solid black; height: 250px; display: none </div> 
```

div 缺少一个结束标签..我已经更正它并且它工作

```
<div id="quickSearch" style="border: 3px solid black; height: 250px; display: none;"> </div>​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:08:33.457

我想这就是你所追求的，如果是这样，那么你真的不远了！我整理了一个[jsFiddle 示例](http://jsfiddle.net/5Zc99/2/)，因此您可以随意玩耍，或者如果我不符合您的要求，请进一步指导我，我会尝试改进它。

```
$("#bar-b").bind("click", function() {
    $("#quickSearch").show();
});

$("#quickSearch").bind("mouseout", function() {
    $(this).hide();
});
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:57:04.880

如果我对您的理解正确，那么您似乎走在正确的道路上，您只需要确保仅在正确的情况下隐藏即可。实现这一点的最简单方法可能是添加一个变量来存储状态并将其设置到`true`您的事件侦听器函数中。类似于放入`openedWithClick = true`onClick 处理程序的东西，可能会根据您的场景添加对鼠标输入的检查。您可能还想使用`mouseout()`而不是`mouseleave()`. 如果这不是您的问题，您可能需要澄清您的示例代码到底发生了什么，以及它与您期望发生的情况有何不同。

# cakephp - 单页上的多个 TinyMCE 实例在表单提交后给出值

> ID：11983286
> 
> 赞同：4
> 
> 时间：2012-08-16T08:27:05.477
> 
> 标签：cakephp, post, tinymce

我在我的 CakePHP 应用程序的单页上使用了多个 tinyMCE 编辑器。这是一个 QnA 应用程序。

我的代码是这样 **的问题：**

```
<script type="text/javascript">
    tinyMCE.init({
        mode:"textareas",
        theme:"simple"
    });

</script>
<form action="/qna/questions/add" class="innerForm" id="QuestionViewForm" method="post" accept-charset="utf-8">

    <input name="data[Question][title]" placeholder="Please enter the title of your question" id="title"
           class="span7 focusBlur" maxlength="255" type="text">
    <textarea name="data[Question][description]" id="description" class="span7 questionDescription" div="false"
              rows="5">Please enter
        description</textarea>
    <input class="btn blueBtn" type="submit" value="Add Your Question" data-original-title="">
    <a href="javascript:;" class="link cancel" id="cancel" data-original-title="">Cancel</a>

</form> 
```

**对于答案：**

```
<form action="/qna/answers/add" class="innerForm" id="AnswerForm" method="post" accept-charset="utf-8"> 
    <textarea name="data[Answer][answer]" id="answer" class="span7 questionDescription" div="false"  rows="5">Please enter answer</textarea>
    <input class="btn blueBtn" type="submit" value="Add Your Question" data-original-title="">
    <a href="javascript:;" class="link cancel" id="cancel" data-original-title="">Cancel</a> 
```

但是每当我提交问题表时，它会在文本区域中给我值，它会跳过 tinyMCE 中的值。

输出是：

```
Array
(
[Question] => Array
    (
        [resource_id] => 1003
        [type] => 0
        [title] => This is my question
        [description] => Please enter description
    )
) 
```

我为问题输入了不同的描述:(

谢谢，维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:32:04.093

[这篇文章](http://bakery.cakephp.org/articles/TommyO/2006/11/08/using-tinymce-with-cakephp-and-ajax)可能会帮助您实现同样的目标。

[此问题解决方案](https://stackoverflow.com/questions/3574894/cakephp-tinymcehelper-helper-error-method-tinymcehelper-name-does-not-exis)还可以帮助您解决遇到的错误。

# wordpress - wp-plugin 或任何用于 wordpress 中特定类别的密码保护的代码

> ID：11983289
> 
> 赞同：0
> 
> 时间：2012-08-16T08:27:27.387
> 
> 标签：wordpress

1.  我想对我的特定类别应用密码保护，在一个论坛中，我看到了这段代码。但是，它对我不起作用。
2.  将此代码包含在我的主题的 function.php 中：

    `global $post; if ( ! is_single() ) return false; // edit these $password = 'your password'; $protected_categories = array('category-slug-name'); // stop editing if ( in_category( $protected_categories, $post->ID ) && stripslashes( $_COOKIE['wp-postpass_' . COOKIEHASH] ) != $password ) { $post->post_content = get_the_password_form(); } }` } ?>
3.  关于此的任何想法。对我来说有点紧急。如果您有任何想法，请回复我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T21:54:59.597

这应该适合你： [http ://codecanyon.net/item/privatecontent-multilevel-content-plugin/1467885?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=LCweb](http://codecanyon.net/item/privatecontent-multilevel-content-plugin/1467885?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=LCweb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:19:45.827

我硬编码了我的类别页面以进行密码保护-

```
<?php 
global $wpdb;
//create a table named pass_protect_cat with password field in it.
$db_pass = $wpdb->get_results("SELECT password FROM pass_protect_cat",ARRAY_N); 
$db_pass1=array_shift( $db_pass );
$db_password=array_shift($db_pass1);
$cat_pass_entered=$_POST['pass'];
$displayform=true;
if ($_POST['submitted'] )
{
    if((strcmp($db_password,$cat_pass_entered)) == 0)
    {
        $displayform=false;
    ?>
        <?php while (have_posts()) : the_post(); ?>
            <p align="left" class="txt_small"><?php the_content().'<br/>'; ?></p>
        <?php endwhile; ?>
    <?php
    }
    else
    {
        echo '<b>'."Wrong Password".'</b>';
    }
}
if($displayform)
{ 
```

?>

```
<p align="left" class="txt_small" id="Message">These category posts are Password Protected.<br/>Enter the password to view the contents.</p>
                <form name="form1" id="form1" method="post" action="<?php password_protect_cat.php ?>" >
                    <label for="password">Password</label>
                    <input type="password" name="pass" id="pass" value="">
                    <input type="submit" name="submitted" id="submitted" value="Submit">
                </form>

<?php } ?> 
```

# javascript - 如何在页面底部构建简单的粘性导航？

> ID：11983294
> 
> 赞同：3
> 
> 时间：2012-08-16T08:28:02.853
> 
> 标签：javascript, jquery, html, css, scroll

我正在努力做到这一点，所以当你加载一个页面时，一个 div 会粘在它的底部。然后，当用户向下滚动时，它会停留在顶部。

我可以使用粘性元素将其粘在顶部。

```
<div id="container">
<div id="menu">
    <ul>
        <li><a href='#test'>Line 1</a></li>
        <li><a href='#'>Line 2</a></li>
        <li><a href='#'>Line 3</a></li>
    </ul>
</div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $(window).scroll(function(){
           if($(this).scrollTop()>=660)
           {
           $('#menu').addClass('fixed');
           }else{
               $('#menu').removeClass('fixed');
           }
                   });
    });
    </script> 
```

我就是做不到，所以它在负载时会粘在底部。如果不清楚，我附上了一个小模型。

![黏](../Images/ce032b543f309d4ded17247c45259d0b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T08:33:33.273

**更新。**
**[这是工作 jsFiddle 来检查。](http://jsfiddle.net/4TfTF/42/)**

jQuery：

```
$(document).ready(function() {
    var windowH = $(window).height();
    var stickToBot = windowH - $('#menu').outerHeight(true);
    //outherHeight(true) will calculate with borders, paddings and margins.
    $('#menu').css({'top': stickToBot + 'px'});

    $(window).scroll(function() {
       var scrollVal = $(this).scrollTop();
        if ( scrollVal > stickToBot ) {
            $('#menu').css({'position':'fixed','top' :'0px'});
        } else {
            $('#menu').css({'position':'absolute','top': stickToBot +'px'});
        }
    });
});​ 
```

注意：如果您想更进一步，我建议您也检查一下这个答案：

[设置窗口滚动动画的 CSS 值限制](https://stackoverflow.com/questions/11971475/setting-css-value-limits-of-the-window-scrolling-animation/11971912#11971912)

# spring - 当前请求不是多部分请求 - Spring MVC

> ID：11983296
> 
> 赞同：9
> 
> 时间：2012-08-16T08:28:14.520
> 
> 标签：spring, file-upload, multipart

*   Spring 3.1.1.RELEASE
*   码头 7.3.0.v20110203
*   公共文件上传 1.2.1
*   公共-io 1.4

我想通过 html 表单上传两个文件，但我总是得到一个多部分请求异常。我google了很多，但没有找到正确的解决方案。

```
org.springframework.web.multipart.MultipartException: The current request is not a multipart request
at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.assertIsMultipartRequest(RequestParamMethodArgumentResolver.java:184)
at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.resolveName(RequestParamMethodArgumentResolver.java:149)
at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:83)
at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:534)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:476)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:935)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:404)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:184)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:870)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:346)
at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:596)
at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1068)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220)
at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:426)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:520)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528)
at java.lang.Thread.run(Thread.java:680) 
```

**我的控制器：**

```
 @RequestMapping(value = "blub", method = RequestMethod.POST)
    public String String(@RequestParam("version") String version, @RequestParam("changeLog") String changeLog,
            @RequestParam("status") String status, @RequestParam("y") MultipartFile y,
            @RequestParam("x") MultipartFile x, @RequestParam("zId") String zId, RedirectAttributes attr) {

        double size = 0.0;
        byte[] xFile = null;
        byte[] yFile = null;
        String downloadUrl = "blub";

        if (!x.isEmpty() && !y.isEmpty()) {
            try {
                xFile = x.getBytes();
                yFile = y.getBytes();
                size = x.getSize() / (1024 * 1024);
            } catch (IOException e) {
            }
            System.out.println("file upload received! Name:[" + version + "] Size:[" + xFile.length + "]");
            System.out.println("file upload received! Name:[" + version + "] Size:[" + yFile.length + "]");
        } else {
            return "file upload failed!";
        }

        zService.saveZ(new Z(changeLog, status, downloadUrl, size, new Date(), yFile, xFile,
                Integer.parseInt(zId)));
        return "redirect:Z";
    } 
```

**我的 .jsp 页面：**

```
 <form method="POST" action="/form/blub" id="Z" class="form-horizontal" enctype=”multipart/form-data”&gt;
                        <fieldset>
                            <legend>Create Z</legend>

                            <div class="control-group">
                                <label class="control-label" for="input">Version</label>
                                <div class="controls">
                                    <input type="text" class="input-xlarge" id="version" name="version">
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label" for="textarea">Changelog</label>
                                <div class="controls">
                                    <textarea class="input-xlarge" id="textarea" rows="4" id="changeLog" name="changeLog"></textarea>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label" for="input">Status</label>
                                <div class="controls">
                                    <input type="text" class="input-xlarge" id="status" name="status">
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label" for="select01">Select list</label>
                                <div class="controls">
                                    <select id="Z" name="Z">

                                        <c:forEach items="${z}" var="current">
                                            <option value="${z.id}">
                                                <c:out value="${z.name}" />
                                            </option>
                                        </c:forEach>

                                    </select>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="x">File input</label>
                                <div class="controls">
                                    <input class="input-file" id="x" type="file">
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label" for="y">File input</label>
                                <div class="controls">
                                    <input class="input-file" id="y" type="file">
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-success">Create Z</button>
                                <button type="reset" class="btn">Cancel</button>
                            </div>
                        </fieldset>
                    </form> 
```

**spring-serverlet.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />
    <!-- use this for Spring Jackson JSON support -->
    <mvc:annotation-driven />
    <mvc:default-servlet-handler />
    <tx:annotation-driven transaction-manager="transactionManager" />
    <jdbc:embedded-database id="dataSource" type="H2" />

    <context:component-scan base-package="com.x.y.z.config" />

    <context:component-scan base-package="com.x.y.z.market.dao" />

    <context:component-scan base-package="com.x.y.z.service.app" />

    <context:component-scan base-package="com.x.y.z.controller" />

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />
    <bean
        class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">

        <property name="viewResolvers">

            <list>

                <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">

                    <property name="viewClass"
                        value="org.springframework.web.servlet.view.JstlView" />

                    <property name="prefix" value="/WEB-INF/jsp/" />

                    <property name="suffix" value=".jsp" />
                </bean>
            </list>
        </property>
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-26T10:24:04.297

尝试添加标题：

```
@RequestMapping(value=("/uploadpsd"),headers=("content-type=multipart/*"),method=RequestMethod.POST) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T09:06:28.963

您需要将此添加到您的 spring xml

```
<bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
</bean> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-05T15:19:46.380

请确保您在 jsp`enctype`中为 -element 的 -attribute使用正确的引号。`form`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-08T11:15:08.063

# mysql - 获取 #1111 - 无效使用组函数错误

> ID：11983298
> 
> 赞同：0
> 
> 时间：2012-08-16T08:28:15.503
> 
> 标签：mysql, group-by, aggregate-functions

我看到最后一行有错误。有人可以告诉我有什么替代方法吗？

```
INSERT INTO month_week_qty 
(
    site_id, cat_id, cat_name, scat_id, scat_name, sscat_id, sscat_name, duration, w_m, year, sum_qty
) 
SELECT 
    c.site_id, NULL, NULL, NULL, NULL, NULL, NULL, 'month', MONTH(s.created_at), YEAR(s.created_at), ROUND( SUM( s.qty_ordered ) ) as qty 
FROM cat_products c, sku_qty_brand s
WHERE (c.product_id = s.product_id)
GROUP BY c.site_id, MONTH(s.created_at)
ON DUPLICATE KEY UPDATE sum_qty = sum_qty + ROUND( SUM( s.qty_ordered ) ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:48:53.520

您不能在`ON DUPLICATE KEY UPDATE`子句中使用聚合，但可以将分组聚合放在子查询中：

```
INSERT INTO month_week_qty 
(
    site_id, duration, w_m, year, sum_qty
) 
SELECT 
    site_id, duration, w_m, year, qty
FROM (
    SELECT 
        c.site_id, 'month' AS duration, MONTH(s.created_at) AS w_m, YEAR(s.created_at) AS year, ROUND( SUM( s.qty_ordered ) ) as qty 
    FROM cat_products c, sku_qty_brand s
    WHERE (c.product_id = s.product_id)
    GROUP BY c.site_id, MONTH(s.created_at)
) AS t
ON DUPLICATE KEY UPDATE sum_qty = sum_qty + t.qty 
```

（为了清楚起见，我省略了 NULL 列。）

# google-cloud-storage - Gsutil cp -z 返回CommandException：可用于压缩的临时空间不足

> ID：11983304
> 
> 赞同：2
> 
> 时间：2012-08-16T08:28:47.330
> 
> 标签：google-cloud-storage

当我尝试 gzip 并将文件上传到 GS 时，我不断收到此错误，尽管我有很多可用空间。这是为什么？我正在使用 gsutil 3.16 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:46:03.370

gsutil 压缩系统默认临时目录中的文件（我的是 /tmp 在 ubuntu 上），根据您的分区，这可能会导致大文件失败。如果这可以是 .boto 文件中的一个参数而不是使用系统相关的参数会更好。您可以通过在运行 gsutil 之前设置系统 TMPDIR 环境变量来克服这个问题

`export TMPDIR=/home/repldba/tempfiles/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:18:21.080

gsutil中的临时文件生成是使用python tempfile模块，可以配置如下：

> tempfile.tempdir 当设置为 None 以外的值时，此变量定义此模块中定义的所有函数的 dir 参数的默认值。
> 
> 如果在对上述任何函数的任何调用中 tempdir 未设置或 None ，Python 将搜索标准目录列表并将 tempdir 设置为调用用户可以在其中创建文件的第一个。列表是：
> 
> 由 TMPDIR 环境变量命名的目录。由 TEMP 环境变量命名的目录。由 TMP 环境变量命名的目录。特定于平台的位置：在 RiscOS 上，由 Wimp$ScrapDir 环境变量命名的目录。在 Windows 上，目录 C:\TEMP、C:\TMP、\TEMP 和 \TMP 按此顺序排列。在所有其他平台上，目录 /tmp、/var/tmp 和 /usr/tmp 按此顺序排列。作为最后的手段，当前工作目录。

# jquery - 使用 Jquery 从具有特定类的列表中删除项目

> ID：11983305
> 
> 赞同：0
> 
> 时间：2012-08-16T08:28:56.243
> 
> 标签：jquery

I have a dropdown, which when a particular option is selected removes an item from a list which has a certain class. 但是，我的删除命令： $('#coll-grouped-list li').hasClass('timeGroup').remove(); 似乎不起作用。有任何想法吗？

**HTML**

```
<select id="tGroup" name="tGroup" class="standard_select" style="width:200px;">
                  <option value="">Please Select</option>
                  <option value="hourGroup">Group by Hour</option>
                  <option value="dayGroup">Group by Day</option>
                  <option value="weekGroup">Group by Week</option>
                  <option value="monthGroup">Group by Month</option>
                  <option value="yearGroup">Group by Year</option>
                </select>

<ul id="coll-selected-list" class="droptrue sort-drop">
              </ul>
<ul id="coll-grouped-list" class="droptrue agg-drop">
              </ul> 
```

**JS**

```
$('#tGroup').bind('change', function (e) { 
        if( $('#tGroup').val() == 'hourGroup') {
          $('#coll-grouped-list li').hasClass('timeGroup').remove();
          $("#coll-grouped-list").append('<li class="timeGroup">Hour</li>');
        }
        if( $('#tGroup').val() == 'dayGroup') {
          $('#coll-grouped-list li').hasClass('timeGroup').remove();
          $("#coll-grouped-list").append('<li class="timeGroup">Day</li>');
        }         
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:29:59.613

`hasClass`返回布尔值，因此直观地说，它不可链接，因此在示例中执行您正在执行的操作是无效的，因为`remove()`布尔类 ( `true.remove()`)中没有方法

尝试

```
$('#coll-grouped-list li.timeGroup').remove(); 
```

从[文档](http://api.jquery.com/hasClass/)：

> 如果将类分配给一个元素，.hasClass() 方法将返回 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:30:46.260

它不起作用，因为`.hasClass()`返回一个布尔值，而不是 jQuery 对象，所以你不能在`.remove()`之后链接另一个 jQuery 函数 ()。

试试这个：

```
$('#coll-grouped-list li.timeGroup').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:34:06.120

尝试这个：

```
 $('#tGroup').bind('change', function (e) { 
     var $group = $('#coll-grouped-list');
     if( this.value == 'hourGroup') {
       $group.find('li.timeGroup').remove();
       $group.append('<li class="timeGroup">Hour</li>');
     }
     if( this.value == 'dayGroup') {
       $group.find('li.timeGroup').remove();
       $group.append('<li class="timeGroup">Day</li>');
     }         
  }); 
```

# php - 来自不同表中多条记录的 1 个字段的 PHP mysql SUM

> ID：11983306
> 
> 赞同：0
> 
> 时间：2012-08-16T08:28:58.627
> 
> 标签：php, mysql

我有一个脚本，可以从他们在 holiday_entitlement 表中的当前记录中获取员工的假期权利。

然后，该权利数字用于数据库中要从中减去的每个假期请求。

例如：权利天数 = 27

假期请求天数 = 2 >>>> 剩余权利天数 = 25

假期请求天数 = 4 >>>> 剩余权利天数 = 21

假期请求天数 = 1 >>>> 剩余权利天数 = 20 等等....

在我的脚本中，剩余的权利天数是 $remainder

**我正在努力的一点是，每次批准请求时，能够将这个 $remainder 保存到 holiday_entitlement 表中，或者在 SQL 中计算出原始权利数字减去该员工的所有请求、该学年以及是否获得批准。**

```
 <?php
    $is_business_result = mysql_query('SELECT * FROM holiday_entitlement WHERE employee = \'' . $username . '\' AND academic_year = \'' . $acyear . '\' ');

    if($is_business = mysql_fetch_array($is_business_result)) {
    echo'<div style="float:left; width:400px;">';

    echo'<table width="100%">
    <tr>
    <td><strong>Name:</strong></td>
    <td>'.$is_business['employee'].'</td>
    </tr>
    <tr>
    <td><strong>Entitlement:</strong></td>
    <td>'.$is_business['new_entitlement'].' '.$is_business['units'].'</td>
    </tr>
    <tr>
    <td><strong>Department / Division:</strong></td>
    <td>'.$is_business['division'].'</td>
    </tr>
    <tr>
    <td><strong>Line Manager:</strong></td>
    <td>'.$is_business['line_manager'].'</td>
    </tr>
    </table>';

    echo'</div>';

    echo'<table class="dataTable" id="business_days_table" cellpadding="2" cellspacing="2" width="100%">
    <thead>
    <th>Start Date</th>
    <th>End Date</th>
    <th>Days to be taken</th>
    <th>Days remaining</th>
    </thead>';

    echo '<tr>';

    echo '<td>-</td>';
    echo '<td>-</td>';
    echo '<td>-</td>';
    echo '<td>'.$is_business['new_entitlement'].'</td>';

    echo '</tr>';

    $input = $is_business['new_entitlement'];
    }

    else {echo 'You currently dont have a record for this academic year. ';}

    $requests_result = mysql_query('SELECT * FROM requests WHERE employee = \'' . $username . '\' AND approved = 1 AND academic_year = \'' . $acyear . '\' ORDER BY start_date ASC');

    $remainder = 0;

    while($requests = mysql_fetch_array($requests_result)) {

    $start_date = new DateTime($requests['start_date']);
    $end_date = new DateTime($requests['end_date']);

    $timestamp_start_date = $start_date->getTimestamp();
    $timestamp_end_date = $end_date->getTimestamp();

    $formatted_start_date = date("d M Y", $timestamp_start_date);           
    $formatted_end_date = date("d M Y", $timestamp_end_date);   

    $remainder = ($remainder == 0) ? $input : $remainder;
    $out = $remainder - $requests['days'];
    if($out < 0){
          break;
    }
    $remainder = $out;

    echo'<tr>';
    echo'<td>'.$formatted_start_date.'</td>';
    echo'<td>'.$formatted_end_date.'</td>';
    echo'<td>'.$requests['days'].'</td>';
    echo'<td>'.$remainder.'</td>';
    echo'</tr>';
    }

    echo'</table>';

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:15:10.513

> **在 SQL 中计算出原始权利数字减去该员工的所有请求、该学年以及是否获得批准**

应该是这样的：

```
select new_entitlement-(select sum(days) from requests where employee="sashn" and academic_year=2012 and approved=1) from holiday_entitlement where employee="sashn"; 
```

或作为更新：

```
update holiday_entitlement set new_entitlement=27-(select sum(days) from requests where employee="sashn" and academic_year=2012 and approved=1) where employee="sashn" and academic_year=2012; 
```

# android - 在 Internet 上发布我的 RESTful Web 服务

> ID：11983307
> 
> 赞同：7
> 
> 时间：2012-08-16T08:29:01.637
> 
> 标签：android, iphone, web-services, rest, tomcat

我在我的服务器数据库和我的移动应用程序（Android、iPhone）之间[使用 Jersey](http://www.vogella.com/articles/REST/article.html)开发了一个RESTful Web 服务。`mySQL`

我`Hibernate`在 Web 服务中使用与数据库通信，然后将我的连接`DAOs`到 Jersey 服务。

我的操作系统是 Windows7-64 位。现在 Web 服务`Tomcat 7`在`locathost`. 如何在 Internet 上发布我的 Web 服务？什么是最好的方法？例如，我可以使用 Amazon Web Services 还是`Apache HTTP Server`？或者可能是其他 Web 服务器，例如： [Web 服务器 - 示例](http://www.quackit.com/web_servers/tutorial/web_servers_examples.cfm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:05:53.820

这是一个相当大的转变，但 AWS 肯定可以提供帮助：

1.  报名
2.  运行一个实例 - Windows，如果它有助于让您尽可能保持一致
3.  确保您将实例的安全设置设置为允许端口 80 流量通过（或其他端口，如果您正在使用它们）
4.  在您正在运行的新 AWS 实例上设置相同的 tomcat 和项目（您可能可以压缩并复制您需要的内容）
5.  记下服务的 DNS 名称，或保留和 IP 地址（AWS 功能），并将您自己的 DNS 条目指向该 IP 地址
6.  测试。

一旦你变得更认真，你可能需要负载平衡、SSL 安全等，但可能不适用于你的初始试验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:42:19.520

我只是向您推荐这个：

[如何使用 Tomcat Web 服务器在 Internet 上发布 JSP 项目？](https://stackoverflow.com/questions/4676003/how-to-publish-a-jsp-project-on-the-internet-using-tomcat-web-server/4676135#4676135)

请注意，大多数供应商不赞成在您的家用机器上运行服务器，但如果您不推动疯狂的交易量，这可能没什么大不了的。

附加物：

前提是使用您的个人机器作为主机。使用 DynDNS 之类的服务可以让您在互联网上获得“存在感”，因为现在您有了一个可以解析的名称。没有端口号的 URL 会转到端口 80，因此您必须为该端口配置服务。这假设您有 100% 的互联网连接，并且您可以正确配置网络硬件以接受和路由传入流量（超出此处的范围）。

ISP 不赞成在家中运行服务器与 Windows 无关，更多的是政策、基础设施、定价等。

# c++ - C++ 4字节对齐数据

> ID：11983311
> 
> 赞同：1
> 
> 时间：2012-08-16T08:29:26.803
> 
> 标签：c++, memory

这个问题与[如何确保成员是 4 字节对齐的？](https://stackoverflow.com/questions/2124514/how-to-ensure-a-member-is-4-byte-aligned)

例子：

```
struct Aligned
{
    char c;
    __attribute__((__aligned__(4))) int32_t member;
}

struct Test
{
    char    c;
    Aligned s;//is s.member 4 bytes aligned?
}

void f1()
{
    char    c1;
    Aligned s;//is s.member 4 bytes aligned?
    char    c2;
}

void f2()
{
    Aligned* s = new Aligned();//is s.member 4 bytes aligned?
} 
```

您能否解释一下“成员”是否在所有情况下都是 4 个字节对齐的，如果是，它是如何工作的？

编辑：我忘记了 Aligned 派生自其他结构的情况：

```
struct Aligned : public SomeVariableSizeStruct
{
    char c;
    __attribute__((__aligned__(4))) int32_t member;
} 
```

第二次编辑：我的问题是：结构的第一个成员总是4字节对齐吗？因为在这里介绍的所有情况下，第一个变量地址可能不是 4 字节对齐的，并且 3 字节填充不能保证“成员”是 4 字节对齐的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:48:31.833

是的，它有效。需要编译器才能使其工作。

*每种*类型都有编译器必须遵守的对齐方式。您已指定一个特定对象应使用 4 字节对齐，但所有其他对象 a `char`、 an `int`、 a`std::string`和其他任何对象*也*有其自己的对齐要求。

所以编译器习惯于处理这个问题。

为了确定 所需的对齐`Aligned`，编译器基本上会遍历其所有成员（以及它的基类）以找到需要最严格对齐的那个。然后这`Aligned`也成为所需的对齐。

在这种情况下，最对齐的成员是`member`，它需要 4 字节对齐。所以`Aligned`需要4字节对齐。

是的，无论您是`Aligned`在堆栈上创建一个作为函数局部变量，还是作为另一个类成员，还是在堆上使用`new`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T08:44:03.530

它是如何工作的？

当您定义 a`struct`时，您定义了在处理为 this 时如何使用内存`struct`。这意味着当你定义`struct`如下

```
struct Aligned
{
    char c;
    __attribute__((__aligned__(4))) int32_t member;
} 
```

编译器定义了如何处理与 this 对应的内存`struct Aligned`。例如，编译器将使用具有以下布局的内存*：

```
bytes: |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
usage: |  c  |  X  |  X  |  X  |        member         | 
```

X 表示未使用这些字节。这称为*填充*。

*：请注意，这适用于 x86 架构，并且可能在其他架构上有所不同。但是不使用某些字节的事实是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:40:49.963

> 您能否解释一下“成员”是否在所有情况下都是 4 个字节对齐的，如果是，它是如何工作的？

是的。例外情况是，如果您告诉编译器打包您的结构。

这个怎么运作？编译器无形地对齐所有内容。它在成员之间添加填充/空间。这是 ABI 和生成程序集的要求。当然，程序员仍然能够使用非自然对齐的数据。

作为一种优化，编译器可能会重新排序您的成员——在某些情况下：[C++ 编译器可以重新排序结构中的元素吗？](https://stackoverflow.com/questions/916600/can-a-c-compiler-re-order-elements-in-a-struct)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:40:41.637

它可以工作，因为编译器必须让它工作。编译器将在内部具有类型描述，`Aligned`其中包括其名称和 等属性，以及`sizeof`对齐限制。

# mysql - 如何获取 2.5m 行的 MySql 中的最后一条记录

> ID：11983315
> 
> 赞同：5
> 
> 时间：2012-08-16T08:29:46.820
> 
> 标签：mysql, sql, optimization, sql-optimization

我想获取 MySql 表中的最后一条记录，但该表有 250 万行。如何有效地获得最后一行？

我正在使用订单和限制，但查询运行约 15 秒。我必须将此值减小到几乎为零。

我的 SQL 查询：

> SELECT id FROM table1 WHERE scenedevice_id = X AND module_id = Y ORDER BY id DESC LIMIT 0,1

**编辑**：我也试过 MAX(id) 。

**编辑**：这是我的桌子 -

```
CREATE TABLE IF NOT EXISTS `realtimedevicedata` (
  `id` int(11) NOT NULL auto_increment,
  `scenedevice_id` int(11) NOT NULL,
  `module_id` int(11) NOT NULL,
  `subid` tinyint(4) NOT NULL default '1',
  `value` varchar(30) collate utf8_turkish_ci NOT NULL,
  `timestamp` datetime NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `scenedevice_id` (`scenedevice_id`),
  KEY `module_id` (`module_id`),
  KEY `timestamp` (`timestamp`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_turkish_ci AUTO_INCREMENT=2428598 ; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:16:30.387

我为两个列scenedevice_id和module_id创建了一个索引，现在执行时间是0ms :)

谢谢大家的帮助，伙计们:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T08:30:32.333

尝试

```
SELECT MAX(id)
FROM table1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T10:14:53.757

只是另一种方式

```
select * from TableName where ColumnID = (Select max(ColumnID) from TableName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:40:24.750

试试这个解决方案来获取该行的所有列：

```
SELECT a.*
FROM   realtimedevicedata a
JOIN   (SELECT MAX(id) AS id FROM realtimedevicedata) b ON a.id = b.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T08:31:43.593

我不知道它是否真的更快，但你可以尝试一下：

```
SELECT * FROM table1 WHERE id = MAX( id ); 
```

**UPDATE**是获取最少插入行的正确查询，应为：

```
SELECT * FROM `table1` WHERE `id` = ( SELECT MAX(`id`) FROM `table1` ) 
```

# asp.net - 如何使用登录页面中的下拉框更改页面文化？

> ID：11983316
> 
> 赞同：1
> 
> 时间：2012-08-16T08:29:48.007
> 
> 标签：asp.net, culture

我想更改登录和刷新页面中的语言，但在我的组合框中 InitialCulture 函数中为空。

代码背后：

```
protected void myLang_OnChange(object sender, EventArgs e)
    {
        InitializeCulture();
    }

    protected override void InitializeCulture()
    {
        string Kultur = myLang.SelectedValue;
        if (string.IsNullOrEmpty(Kultur)) Kultur = "Auto";

        this.UICulture = Kultur;
        this.Culture = Kultur;

        base.InitializeCulture();
    } 
```

aspx：

```
 <asp:DropDownList Name="myLang" ID="myLang" runat="server" 
                OnSelectedIndexChanged="myLang_OnChange" AutoPostBack="True">
                <asp:ListItem Text="Auto" Value="auto" />
                <asp:ListItem Text="Türkçe" Value="tr-TR" />
                <asp:ListItem Text="İngilizce" Value="en-US" />
  </asp:DropDownList> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:33:03.093

您不能调用该`InitializeCulture`方法。你必须保存`SelectedValue`到`DropDownList`.`Session`

```
protected void myLang_OnChange(object sender, EventArgs e)
    {
        Session["lang"]=myLang.SelectedValue;
        Response.Redirect("your_current_page.aspx");
    }

protected override void InitializeCulture()
  {
    string Kultur="en-US"; // default lang
   if(Session["lang"]!=null)
     Kultur = Session["lang"].ToString();

    this.UICulture = Kultur;
    this.Culture = Kultur;
    base.InitializeCulture();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:32:54.280

您的代码不匹配

```
 string Kultur = myLang.SelectedValue;
        if (string.IsNullOrEmpty(Kultur)) Kultur = "Auto"; <-- 
```

你必须用价值 tr-TR 替换，因为你得到了价值

# selenium - Selenium Webdriver 窗口切换随机失败

> ID：11983317
> 
> 赞同：1
> 
> 时间：2012-08-16T08:29:50.230
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用 InternetExplorerDriver（我必须这样做）。我有两个窗把手。我必须在这些窗口之间切换多次。我使用这两行来做到这一点。

```
driver.switchTo().window(myWindowHandle1);
driver.findElement(By.xpath("//body")).click(); 
```

我添加了点击主体，否则有时开关无法正常工作，从那时起这对我来说很好。

现在我有一个新问题。我的第三个窗口开关（1\. window1 -> window2; 2\. window2 -> window1; 3\. window1 -> window2;）不再起作用。

```
ElementNotVisibleException: Cannot click on element --- in this case, line 2 
```

所以身体已经看不见了。以前的窗口开关工作得很好，所以手柄是正确的。找到正文元素 By.tagName 并没有解决问题。有人有同样的问题吗？解决方案？

提前致谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T11:56:46.887

终于找到答案了，我用下面的方法切换到新窗口，

```
public String switchwindow(String object, String data){
        try {

        String winHandleBefore = driver.getWindowHandle();

        for(String winHandle : driver.getWindowHandles()){
            driver.switchTo().window(winHandle);
        }
        }catch(Exception e){
        return Constants.KEYWORD_FAIL+ "Unable to Switch Window" + e.getMessage();
        }
        return Constants.KEYWORD_PASS;
        } 
```

要移动到父窗口，我使用了以下代码，

```
 public String switchwindowback(String object, String data){
            try {
                String winHandleBefore = driver.getWindowHandle();
                driver.close(); 
                //Switch back to original browser (first window)
                driver.switchTo().window(winHandleBefore);
                //continue with original browser (first window)
            }catch(Exception e){
            return Constants.KEYWORD_FAIL+ "Unable to Switch to main window" + e.getMessage();
            }
            return Constants.KEYWORD_PASS;
            } 
```

使用此代码在窗口之间切换。

# string - 为变量字符串定义类型树

> ID：11983319
> 
> 赞同：0
> 
> 时间：2012-08-16T08:29:53.037
> 
> 标签：string, wtx

我们如何为变量字符串定义类型树，其中前两个字节表示长度，然后是实际字符串，后面跟着长度的字符？

02ab，这​​里ab是字符串。

03abcghj。这里 abc 是字符串，其余部分是别的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:39:38.117

您可以创建一个包含两个字段、一个大小和一个字符串的组。然后右键单击大小字段并选择该`Sized`字段的属性。该属性表示第一个字段包含下一个字段的长度。

从手册：

> # 大小属性
> 
> sized 属性用于其值指定紧随其后的组件的大小（以字节为单位）的组件。sized 属性可用于组的多个组件。
> 
> 尺寸
> 
> 例如，您可能有一个可变长度组件，其前面有一个数字，表示组件的长度：
> 
> `10Washington`
> 
> 10 表示以下组件的大小。
> 
> 关于使用 sized 属性的一些要点是：
> 
> *   具有 sized 属性的组件必须定义为无符号整数。
>     
>     
> *   如果二进制字节流项没有固定大小，则其前面的组件必须指定其大小，并且必须在该组件上使用 sized 属性。
>     
>     
> 
> 组件的大小是从该组件的开头到该组件的结尾（包括该组件的结尾）的字节数。如果组件具有系列范围 [例如 (1:3)]，则大小包括该组件系列中的所有成员。如果分隔符分隔该系列的每个成员，则分隔符必须包含在大小中。此外，如果组件中出现释放字符，则它们必须包含在大小中。
> 
> 该大小不包括将一种组件类型与下一种组件类型分开的分隔符。

# javascript - 如何从 javascript 创建一个 jQuery Mobile 按钮？

> ID：11983326
> 
> 赞同：1
> 
> 时间：2012-08-16T08:30:17.347
> 
> 标签：javascript, dom, jquery-mobile

有没有办法让 jQuery Mobile 将 javascript 生成的链接呈现为按钮小部件，就像它在加载页面时自动执行的那样？

我有这样的javascript来动态创建链接：

```
var ws=document.getElementById('workspace'); // empty <div id="workspace"></div>
ws.innerHTML='<a id="myb" href="foo.php" data-role="button">baz</a>'; 
```

当然它只生成一个普通的链接而不是一个按钮，所以我的问题是如何让 jQueryMobile 动态创建按钮，如果`<a id="myb" href="foo.php" data-role="button">baz</a>`从一开始就出现在页面中，它会这样做吗？

**编辑 ：**

像这样的脚本：

```
$('#tagspace').html('<a id="myb" data-inline="true" data-ajax="false"
                    href="boo.php" data-role="button">baz</a>')
              .button()
              .click(function() { window.location.href=this.href;}); 
```

是一种改进。它*确实会*产生一个按钮（整个页面宽度），并且对标签文本之外的点击很敏感。但是，`this`似乎没有映射到包含预期链接“目标”的元素。

这个的 DOM 结果：

```
<div aria-disabled="false" class="ui-btn ui-shadow ui-btn-corner-all ui-fullsize
                                      ui-btn-block ui-btn-up-c" data-mini="false" data-inline="false" data-theme="c" data-iconpos="" data-icon="" data-wrapperels="span" data-iconshadow="true" data-shadow="true" data-corners="true"> <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">baz</span>
</span>
    <div aria-disabled="false" class="ui-btn-hidden" id="tagspace"> <a id="myb" data-inline="true" data-ajax="false" href="boo.php" data-role="button">baz</a>

    </div>
</div> 
```

所以，它仍然不是同一种按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:33:58.613

您可以通过将元素包装在 jQuery 对象中并调用该`button()`方法来创建按钮小部件。

```
$("#workspace").html("<a id='myb' href='foo.php' data-role='button'>baz</a>")
               .button(); 
```

*更新：*按钮小部件阻止链接的默认行为，因此`click`如果您希望恢复该行为，则必须添加一个处理程序：

```
$("#workspace").html("<a id='myb' href='foo.php' data-role='button'>baz</a>")
               .button()
               .click(function() {
                   window.location.href = this.href;
               }); 
```

# android - MapView MyLocationOverlay 首次运行问题

> ID：11983328
> 
> 赞同：0
> 
> 时间：2012-08-16T08:30:22.770
> 
> 标签：android, android-mapview, android-maps, android-location

我在我的应用程序中使用位置服务。如果我通过 DDMS 将经度和纬度发送到模拟器，蓝点会动画到那里。但是如果我关闭应用程序并重新启动，蓝点就不会出现。如果看到蓝点，则必须发送新的经度和纬度。 **我想每次应用启动时都显示蓝点。**

我能做些什么 ？

**创建：**

```
mc = mapView.getController();
        mapView.setBuiltInZoomControls(true);
        mc.setZoom(15);
        myLocOverlay = new MyLocationOverlay(this, mapView);
        mapView.getOverlays().add(myLocOverlay); 
        myLocOverlay.runOnFirstFix(new Runnable() {
            public void run() {
                mc.animateTo(myLocOverlay.getMyLocation());
                }
        });

        mapView.postInvalidate();

lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();       
        provider = lm.getBestProvider(criteria, false);

        Location location = lm.getLastKnownLocation(provider);

        if (location != null) {
            onLocationChanged(location);
            } 
```

**onLocationChanged（位置位置）**

```
String PK="";

        double lat = location.getLatitude();
        double lng = location.getLongitude();
        Geocoder gc = new Geocoder(this,Locale.getDefault());
        try{

            List<Address> adresler = gc.getFromLocation(lat, lng, 1);
            StringBuilder sb = new StringBuilder();
            if(adresler.size()>0){
                Address adres = adresler.get(0);
                boolean sayi = false;
                for(int i=0;i<adres.getMaxAddressLineIndex();i++){
                    if(i!=2){
                        sb.append(adres.getAddressLine(i)).append("\n");
                    }
                    else{
                        String full = adres.getAddressLine(i).toString();
                        char chars[] = full.toCharArray();
                        for(int k=0;k<chars.length;k++){
                            sayi = Character.isDigit(chars[k]);
                            if(sayi){
                                PK=PK+chars[k];
                            }
                        }
                    }

                }   
                adresString = sb.toString();
                new gpsYerBilgisiAS(PK).execute();
            }
        }
            catch(IOException e){

            }
        } 
```

**onResume 和 onPause**

```
@Override   
    protected void onResume() {  
        super.onResume();  
        lm.requestLocationUpdates(provider, 400, 1, this);      
        myLocOverlay.enableMyLocation();

    }
    @Override   
    protected void onPause() {    
        super.onPause();
        lm.removeUpdates(this); 
        myLocOverlay.disableMyLocation();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:45:13.030

让你`onResume()`像这样：

```
protected void onResume() {
    ....
    myLocOverlay = new MyLocationOverlay(this, mapView);
    myLocOverlay.enableMyLocation();
    mapView.getOverlays().add(myLocOverlay); 
    myLocOverlay.runOnFirstFix(new Runnable() {
        public void run() {
            mc.animateTo(myLocOverlay.getMyLocation());
            }
    });
    ....
} 
```

它会按照你想要的方式工作。这就是我目前在我自己的应用程序中拥有它的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:22:18.403

在模拟器中，每次要调用 onLocationChanged 方法时都必须发送位置。在设备上，如果 GPS 打开，它会自动完成。但我只会在您的设备通过 GPS 或网络接收到位置数据时显示“蓝点”。

# android - 从 android 网站的频道直播

> ID：11983335
> 
> 赞同：1
> 
> 时间：2012-08-16T08:30:48.073
> 
> 标签：android, video-streaming

我想通过我的 Android 应用从 Bambuser 网站托管的频道播放直播。我尝试同时使用 webview 和 videoview 并给他们我的频道链接，但视频没有被播放我认为这可能是因为它是 bambuser 的 swf。知道如何在我的应用程序或任何示例中播放此流吗？非常感谢

# objective-c - 从文本字段中删除焦点Objective C Xcode

> ID：11983339
> 
> 赞同：0
> 
> 时间：2012-08-16T08:31:14.847
> 
> 标签：objective-c, focus, uitextfield, uipickerview

在我的应用程序中，我有一个文本字段，单击该字段时会出现一个选择器视图。当我在选择器视图上单击完成时，我希望从字段中删除焦点，因为目前如果我点击完成然后单击相同的文本字段，选择器视图将不会再次出现（例如，如果用户意外点击完成并想要编辑字段）。请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:55:11.220

您可以做的是将 firstResponder 设置为另一个 UI 项。

假设 textField 的标签已设置，并且您希望它将 firstResponder(focus) 传输到另一个具有标签的文本字段，这就是您可以在处理完成按钮单击的代码中执行的操作

```
 NSInteger next_TextField_Tag = 202;
    UIResponder *nextResponder = ["current_TextView_Here".superview viewWithTag:nextTag];
    [nextResponder becomeFirstResponder]; 
```

这将确保当用户完成点击完成时，同一个文本框不是第一响应者。

您可以像这样将标签设置为特定的文本字段

```
YOUR_TextField_Here.tag=x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T06:59:32.557

您可以使用此代码 [yourTextField resignFirstResponder];

# iphone - 如何在objective-c中的工具栏按钮上显示值？

> ID：11983340
> 
> 赞同：0
> 
> 时间：2012-08-16T08:31:21.603
> 
> 标签：iphone, uibutton, uitoolbar, uitoolbaritem, uibuttonbaritem

我正在做账单项目。我可以滚动很多账单，每张账单都有很多数量和价格的项目。在按钮上，工具栏上也有很多按钮。账单总价是其中的1个按钮，我不知道如何在这个按钮上显示总价的数量！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:49:21.397

UIButton 具有 currentTitle-property，您应该能够从中获取标题。

UIBarButtonItem 有一个 possibleTitles 属性，它是一个 NSSet，其中包含栏按钮可能具有的所有可能的标题。如果它只是一个，那么您可以通过以下函数检索此标题：

```
NSString *buttontitle = [myBarButtonItem.possibleTitles anyObject]; 
```

如果它包含更多，则首先将其转换为数组，然后检索您需要的标题：

```
NSArray *titlesArray = [myBarButtonItem.possibleTitles allObjects]; 
```

如果你知道它可能包含什么标题，你可能想使用这个：

```
Bool *expectedTitleFound = [myBarButtonItem.possibleTitles contains:@"MyTitle"]; 
```

希望这可以帮助。祝你好运。

# google-maps - GIS - 谷歌地图返回错误。它没有返回 KML 文件

> ID：11983341
> 
> 赞同：1
> 
> 时间：2012-08-16T08:31:23.843
> 
> 标签：google-maps, google-maps-api-3

我需要从 googlemap 获取 KML 文件。我没有退货。这是我获取 KML 的代码。

```
 public String[] getPathString(String saddr, String daddr){
     String [] result = {"",""};
      try {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet getRequest = new HttpGet(
            "http://maps.google.com/maps?f=d&hl=en&saddr="+saddr+"&daddr="+daddr+"&ie=UTF8&0&om=0&z=20&output=kml");
        getRequest.addHeader("accept", "application/json");

        HttpResponse response = httpClient.execute(getRequest);

        if (response.getStatusLine().getStatusCode() != 200) {
            throw new RuntimeException("Failed : HTTP error code : "
               + response.getStatusLine().getStatusCode());
        }

        BufferedReader br = new BufferedReader(
                         new InputStreamReader((response.getEntity().getContent())));

        String output;
        StringBuilder urlString = new StringBuilder();
        System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {
            System.out.println(output);
            urlString.append(output);
            urlString.append("\n");
        }
        System.out.println(urlString);

        String coordinatestring  = urlString.toString().split("<LineString>")[1].split("<coordinates>")[1].split("</coordinates>")[0];
        //System.out.println(coordinatestring);
        String []  coordinates = coordinatestring.split(",0.000000 ");
        //String lineString = "LINESTRING(";
        String lineString =  "";
        for (int i = 0; i < coordinates.length-1; i++){
            lineString += coordinates[i].replace(',', ' ')+",";
        }
        if (lineString.length() > 0)
        lineString = lineString.substring(0,lineString.length()-1);
        //lineString += ")";
        //   );
        System.out.println(lineString);
        result [0] = lineString;

        String ditanceString = "";
        if (urlString.toString().length() > 200)
        ditanceString = urlString.toString().split("Distance:")[1].split("&#")[0];

        result[1]  = ditanceString;

        httpClient.getConnectionManager().shutdown();
        //return result;

      } catch (ClientProtocolException e) {

        e.printStackTrace();

      } catch (IOException e) {

        e.printStackTrace();
      }

      return result; 
    } 
```

这是示例网址： [http ://maps.google.com/maps?f=d&hl=en&saddr=6.87988,79.8906&daddr=6.87991,79.8911&ie=UTF8&0&om=0&z=20&output=kml](http://maps.google.com/maps?f=d&hl=en&saddr=6.87988,79.8906&daddr=6.87991,79.8911&ie=UTF8&0&om=0&z=20&output=kml)

但这给了这样的：

```
 </script> <script type="text/javascript">window.onunload = function(){GUnload();};</script> <script type="text/javascript">window.onresize = function(){resizeApp();};</script>     <style>.msie
e('inlineMarkersContainer').style.display = 'block';function constructEventQueue(queue,handler){return {q:queue,h:handler
}
}
function addDocListener(eventName,fn){if (document.addEventListener){document.addEventListener(eventName,fn,false);}else if (document.attachEvent){document.attachEvent("on" + eventName,fn);}

}
function removeDocListener(eventName,fn){if (document.removeEventListener){document.removeEventListener(eventName,fn,false);}else if (document.detachEvent){document.detachEvent("on" + eventName,fn);}

}

window.gEventQueue = (function(){

function getJsactionNodeForQueuing_(e){var node = e.srcElement || e.target;
if (node.nodeType == 3)node = node.parentNode;

var isMac = /Macintosh/.test(navigator.userAgent);var modified = (isMac && e.metaKey ||
!isMac && e.ctrlKey);
var re = modified ?/^click(modified)?:/ :
/^[^:]*$|^click(plain)?:/;

while (node){var attr = (node.getAttribute &&
node.getAttribute('jsaction'));if (attr){for (var i = 0,actions = attr.split(';');i < actions.length;i++){if (re.test(actions[i])){return node;}
}
}
node = node.parentNode;}
return null;}

var queue = [];

function handler(e){var node = getJsactionNodeForQueuing_(e);if (!node)return;

e.replayTimeStamp = (new Date).getTime();
e.stopPropagation ?e.stopPropagation():(e.cancelBubble = true);
if (node.tagName == 'A' && e.type == 'click'){e.preventDefault ?e.preventDefault():(e.returnValue = false);}

var copy = {};for (var i in e){copy[i]= e[i];}
queue.push(copy);}

addDocListener('click',handler);

return constructEventQueue(queue,handler);}());(function(){var init_timeout=5000;setTimeout(function(){
vpLoad.arg(0,'ait').check();},init_timeout);})();(function(){var main_js_before_onload=true;var not_fully_inlined=true;window.jsLoadCallback = function(appOptions){vpLoad.arg(3,appOptions).check();if (main_js_before_onload){

vpLoad.arg(0,'aij1').check();}
if (not_fully_inlined){

..................

gEventQueue = null;}
function onLoadHideLoadMessage(){}
function onLoadMainJs(){}
function onLoadApplicationInitialize(){
vpLoad.arg(0,'aiol').check();}
function onLoad(){onLoadHideLoadMessage();onLoadMainJs();onLoadApplicationInitialize();}

vpLoad.func(function(sourceTick,vPage,stateBox,appOptions,isHomeVPage){
vpLoad.func(null);loadApplication(vPage,stateBox,appOptions,isHomeVPage);}).check();window.onload = onLoad;

var userActions = [
'mousedown','keydown','mousewheel',
'DOMMouseScroll' 
];var gUserAction = false;function firstActionLoadMessages(){}
function firstActionLoadApplication(){setTimeout(function(){vpLoad.arg(0,'aiua').check();},0);}
function onFirstUserAction(event){for (var i = 0;i < userActions.length;++i){removeDocListener(userActions[i],onFirstUserAction);}
if (gUserAction)return;gUserAction = true;firstActionLoadMessages();firstActionLoadApplication();}

for (var i = 0;i < userActions.length;++i){addDocListener(userActions[i],onFirstUserAction);}
(function(){var cityblock_enabled=true;

if (navigator.geolocation){var inline_compass_size = 90;

var zoomTop = 29 + inline_compass_size;var zoomHeight = 377;e('flmc_inline').style.height = '' + zoomHeight + 'px';e('flmczoom_inline').style.top = '' + zoomTop + 'px';if (cityblock_enabled){
var cbTop = 27 + inline_compass_size;var cbTopPx = '' + cbTop + 'px';var launchpad = e('cb_inl_launchpad');if (launchpad){launchpad.style.top = cbTopPx;}

var pegman = e('pegman_inline');if (pegman){pegman.style.top = cbTopPx;}
}

d1('my_location_button');}
})();</script>  <div></div>  </body> </html> 
```

请任何人帮助我有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:53:21.350

从 2012 年 7 月 27 日起，这种通过解析 KML 文件从 Google 中提取 Google 路线的方式不再可用（因为 Google 更改了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 获取）。

# properties - Liferay：如何配置 Liferay 门户

> ID：11983343
> 
> 赞同：6
> 
> 时间：2012-08-16T08:31:33.487
> 
> 标签：properties, liferay, configure

如何配置或覆盖 Liferay 门户属性`portal.properties`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T08:31:33.487

Liferay 属性是一个强大的工具，它允许我们配置 Portal 行为，而无需编码 hooks-、ext- 和 theme-plugin。通过新的要求，我们首先证明了通过改变 Liferay 配置来解决这个要求的可能性。默认属性配置可以在 Liferay 源代码中找到：[https](https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/portal.properties) ://github.com/liferay/liferay-portal/blob/master/portal-impl/src/portal.properties或[https://github.com/liferay /liferay-portal/blob/master/portal-impl/src/portal.properties](https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/portal.properties)或在`liferay-bundles\tomcat-7\webapps\ROOT\WEB-INF\lib\portal-impl.jar`

要配置或覆盖 Liferay 门户的配置属性，我们必须`portal-ext.properties`在 Liferay 的根文件夹（与 tomcat 捆绑）中创建。

```
Liferay
|-data
|-deploy
|-license
|-logs
|-tomcat-7.xxx
|-portal-ext.propeties        <- override portal properties
|-portal-${user}.propeties    <- override user specific properties 
```

通常我们与 git 或 svn 等版本控制系统合作，开发人员有不同的配置，如数据库路径等。Liferay 允许配置用户特定的配置，例如`portal-${user}.properties`. 因此首先要`portal-ext.properties`包含用户属性：

```
include-and-override = ${default.liferay.home}/portal-${user.name}.properties 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-23T13:03:19.390

请记住，当您在 GUI（控制面板 -> 配置 -> 门户设置）中编辑门户属性时，这些更改优先于您在门户扩展属性中的任何内容。因此，假设您有一个在门户设置中指定的默认登录页面，那么您在 portal-ext.properties (default.landing.page.path=/your/path) 中输入的任何值都会被忽略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-01T23:28:07.113

**不要编辑portal.properties 文件**。如果您想覆盖任何属性，如果您的 liferay_home 或 ROOT/classes 文件夹中不存在 portel-ext.properties 文件，则在 liferay_home 中创建 portel-ext.properties 文件并在其中添加您的属性条目。重新启动服务器以查看更改。

查看您可以覆盖的所有属性[portal-ext.properties](https://docs.liferay.com/portal/6.2/propertiesdoc/portal.properties.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:20:23.447

您可以使用 hook 或 EXT 覆盖 portal.properties。您可以创建 portal-ext.properties 文件并将其放入钩子中的 WEB-INF/classes 文件夹中，然后可以部署该钩子。在 portal-ext.properties 中，您可以覆盖 portal.propertis 文件的所有属性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-08T10:12:28.360

您可以覆盖 portal.properties 文件中存在的门户属性。使用创建portal-ext.properties 文件，该文件可以放在portal-home/webapp/root/web-inf/classes 文件夹中。例如：../liferay-portal-x-ce-ga2\tomcat-x.0\webapps\ROOT\WEB-INF\classes

在此位置，您可以保留 portal-ext.properties 文件，您可以覆盖您想要覆盖的任何属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-10T18:50:18.607

是的，每当我们使用 liferay.properties 文件覆盖 liferay 属性时，我们都会创建一个名为 liferay-ext.properties 文件的文件，然后我们在此文件夹中添加额外要求，我们的 liferay 使用此文件以及您在此处执行的任何修改（liferay-ext.properties）。 properties 文件）将反映在您的 liferay 设置中。谢谢 asif aftab

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-01T07:15:07.023

不要编辑 portal.properties 文件。您可以覆盖portal.properties 文件进行复制并重命名portal-ext.properties，它必须放在`liferay_home/portal-ext.properties`

您可以在控制面板中配置属性，但如果同时使用这两种方法进行配置并且存在属性冲突，则控制面板设置优先。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-03T06:21:50.723

同样重要的是要注意，在 Liferay 7.x 中，如果您不将该属性设置`setup.wizard.enabled`为 false，那么当您第一次访问您的门户时会出现一个向导设置屏幕，它会创建一个 portal-wizard-setup.properties，至优先于 portal-ext.properties。

# android - 实现Android图片查看器

> ID：11983344
> 
> 赞同：1
> 
> 时间：2012-08-16T08:31:34.073
> 
> 标签：android

我只是想为我的 android 应用程序编写一个图片查看器。我看到画廊视图已被弃用。所以我真的不想将它用于新代码。我已经在寻找替代品，但只找到“照顾好自己”的答案。那么实现它的最佳方法是什么？浏览器？水平滚动视图？

我想滑动图像（不需要翻动），在顶部我想要一个带有整个相册缩略图的小预览行（最多 10 张图片）。我希望缩略图行是“可翻转的”。如果我点击那里的图片，它应该在下面的更大视图中打开。

是否有任何教程/开源应用程序，我可以在其中看到一些代码，它们是如何做到的？

问候

# java - 为什么 Outputstream = new BufferedOutputStream 没有缓冲？

> ID：11983351
> 
> 赞同：0
> 
> 时间：2012-08-16T08:31:50.737
> 
> 标签：java, io, buffer

从这个[例子](http://developer.android.com/reference/java/io/FileOutputStream.html) 中我了解到

```
OutputStream out = = new BufferedOutputStream(new FileOutputStream(file)); 
```

没有缓冲！为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T08:34:31.523

您误读了文档。

当文档状态：

> 此流**未缓冲**。

...他们指的是`FileOutputStream`自己，*而不是*示例代码。

因此文档中的下一行：

> 大多数调用者应该用`BufferedOutputStream`.

# c - API 和“-ldllname”编译器选项的运行时链接

> ID：11983352
> 
> 赞同：0
> 
> 时间：2012-08-16T08:31:58.353
> 
> 标签：c, winapi, dll, linker

我用`Loadlibrary`and`Getprocaddress`来链接一些WinApis来进行运行时链接。正如预期的那样，它工作正常。

但是对于某些 API，我只是用作`-ldllname`编译器选项。相同的选项会为某些 API 提供链接器错误，并且需要加载 dll。

这有什么特别的区别吗，即某些特定的 API 需要运行时链接，而其他 API 可以使用`-ldllname`选项？如何对这类 API 进行分类？

> 更新：我观察到的是支持 UNICODE 和 ANSI 的 API，即后缀为 "W" 和 "A" 的 API，通过静态链接本身得到解决？我对么？如果我错了，请纠正我！
> 
> 为什么有些 API 需要运行时链接，而另一些则通过静态链接本身（-l 选项）解决？这有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:39:28.707

基本上就是你描述的。我将在这里跳过非 Windows，但它本质上是相似的）。

所以，有两种不同的情况：

**编译时（静态）链接：**代码包括所有函数、类等的声明，但不包括正文。您必须在编译时提供正确的库文件（例如通过`-ldllname`）：

```
void sayHello(void); // the declaration might be a bit more complicated, e.g. adding a calling convention or dllimport/dllexport, etc. 
```

**运行时（动态）链接：**代码包括最少的函数体，主要是加载库和检索地址（通过您命名的函数）：

```
HMODULE lib = LoadLibrary("hello.dll"); // loading happening somewhere once

void sayHello(void) {
    myfnproc call = GetProcAddress(lib, "sayHello");
    call(); // actual call
}

FreeLibrary(lib); // unloading happening somewhere else 
```

虽然运行时方法更复杂，但它有一个很大的优势：您能够处理丢失的库。例如，如果用户缺少一些库，您可以告诉他在哪里下载它（甚至自己下载），并且可以轻松替换链接的代码（例如插件功能）。使用静态链接，您会很不走运：如果缺少依赖项，程序将无法运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:29:26.973

> 我使用了负载库

这将是对 DLL 进行隐式依赖的示例。LoadLibrary 是一个由 kernel32.dll 导出的函数，它是一个 Windows api DLL。它实际上存在于两个版本中，LoadLibraryA 和 LoadLibraryW。分别是非 Unicode 和 Unicode 版本的函数。你会得到一个或另一个，这取决于你在编译时是否有 UNICODE 宏#defined。

`-l`因此，这与使用 GetProcAddress 动态链接导出完全相反，您必须通过该选项告诉链接器您的程序依赖于 kernel32 。在运行时，DLL 会在您自己的代码开始运行之前自动加载。

对操作系统 DLL 有隐式依赖是很正常的。而且不可避免的是，您永远不能动态链接 kernel32.dll，这将是鸡与蛋的问题。

# asp.net-mvc - 可以将 2 个模型传递给视图吗？

> ID：11983353
> 
> 赞同：0
> 
> 时间：2012-08-16T08:32:12.830
> 
> 标签：asp.net-mvc, model-view-controller

我有一个必须呈现两个报告的视图。

我的行动：

```
public ActionResult TradeUKKPIShowData(SundaysInMonthViewModel model) //show actual data in the view
{
  var tradesmenReportData = _reportingService.GetTradeUKKPITradesmen(model.SelectedSunday);
  var jobSortedReportData = _reportingService.GetTradeUKKPIJobSorted(model.SelectedSunday);
  ViewBag.jobSortedReportDate = model.SelectedSunday;
  ViewBag.addJobSortedModel = jobSortedReportData;
  return View(tradesmenReportData);
} 
```

我的第一个问题是上述操作的前两行。我必须在这里通过什么？我为这些行得到的编译错误：

'TradeUK.Services.IReportingService.GetTradeUKKPItradesmen(TradeUK.Entities.Reporting.KPIResults)' 有一些无效参数

报告所需的所有存储过程都是选择的日期/星期日

我的 SundaysInMonthViewModel：

```
 namespace TradeUK.Admin.Web.ViewModels
 {
    public class SundaysInMonthViewModel
    {
       public IEnumerable<SelectListItem> AllSundays { set; get; }
       public string SelectedSunday { set; get; }
    }
 } 
```

这里 IReportingServices.cs：

```
IEnumerable<KPIResults> GetTradeUKKPITradesmen(DateTime date);
IEnumerable<KPIResults> GetTradeUKKPIJobSorted(DateTime date); 
```

以及上述的实际方法：

```
 public IEnumerable<KPIResults> GetTradeUKKPITradesmen(DateTime date)
 {
 }

 public IEnumerable<KPIResults> GetTradeUKKPIJobSorted(DateTime date)
 {
 } 
```

关键绩效指标结果：

```
namespace TradeUK.Entities.Reporting
{
 public class KPIResults
  {
   public virtual string Title { get; set; }
   public virtual int Total { get; set; }
   public virtual int Week6 { get; set; }
   public virtual int Week5 { get; set; }
   public virtual int Week4 { get; set; }
   public virtual int Week3 { get; set; }
   public virtual int Week2 { get; set; }
   public virtual int Week1 { get; set; }
  }
 } 
```

另一个问题是关于 return(View(tradesmenReportData,jobSortedReportData) 我可以这样做吗？在实际视图中，我必须 foreach 循环来显示报告数据集。

请帮忙？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:36:04.203

关于您的“第二个问题”：

不，你不能那样做，只有一个`Model`在`ViewData`. 您应该为这种情况创建单独的视图模型（或使用类似的东西`Tuple`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:38:34.653

您可以正常传递第一个模型`ViewBag`，然后再传递第二个模型

```
@model YourFirstModelClass

@{
    YourSecondModelClass model2 = ViewBag.YourSecondModel;
} 
```

有了它，你就有了你想要的效果。

因此，当您不使用 Razor 时，您可以像这样添加主要的强类型模型：

```
<%@ Inherits="System.Web.Mvc.ViewPage<PrimaryModelClass>" %> 
```

和 ViewData 中的第二个类似于 ViewBag

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:26:51.177

关于您的第二个问题，您可以创建一个具有两个表列的属性的模型视图类。从此模型类中，您可以查看视图页面中的数据并将数据保存在特定表中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-06T15:39:12.117

我在网上找到了这个链接，它可以为你做。

[https://weblogs.asp.net/dotnetstories/passing-multiple-models-to-a-view-in-an-asp-net-mvc-5-0-application](https://weblogs.asp.net/dotnetstories/passing-multiple-models-to-a-view-in-an-asp-net-mvc-5-0-application)

编辑 ：-

我链接到的页面建议将对象列表传递给视图，该列表由不同的模型组成，这是示例。

```
public ActionResult Index()
   {
         List<object> model = new List<object>();
         model.Add(ctx.ProductCategories.ToList());
         model.Add(ctx.Products.ToList());

        return View(model);
    }
} 
```

然后在视图中，您可以再次将列表分解为单个模型，这是作者给出的示例：-

```
@model IEnumerable<object>

@{

    List<PassingMultipleModelsToAView.ProductCategory> lstPCategory = Model.ToList()[0] as List<PassingMultipleModelsToAView.ProductCategory>;

    List<PassingMultipleModelsToAView.Product> lstProduct = Model.ToList()[1] as List<PassingMultipleModelsToAView.Product>;
}

<h3>Categories</h3>

<ul>
    @foreach (var item in lstPCategory)
    {    
        <li>@item.Name</li>
    }
</ul>

<hr />

<h3>Products</h3>

<ul>
    @foreach (var item in lstProduct)
    {
        <li>@item.Name-@item.Color</li>
    }
</ul> 
```

# node.js - 附加到已经存在的文件 nodejs？

> ID：11983355
> 
> 赞同：4
> 
> 时间：2012-08-16T08:32:32.617
> 
> 标签：node.js, logging, append

我知道诸如[如何附加到节点中的文件之类的问题？](https://stackoverflow.com/questions/3459476/how-to-append-to-a-file-in-node)

然而，那些不做我需要的。我所拥有的是一个在 nodejs 启动之前已经包含文本的文本文件，然后我希望节点在我的文件末尾附加文本。

但是，使用上面链接的问题中的方法会覆盖我的文件的内容。

我还发现我可以`start:number`在我的选项中使用，`fs.createWriteStream`所以如果我要弄清楚我的旧文件在哪里结束，我可以使用它来追加，但是我如何在不必读出整个文件并计算字符的情况下弄清楚这一点在里面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-09-15T12:33:30.780

使用`a+`标志附加和创建一个文件（如果不存在）。

`\r\n`用作换行符。

```
fs.writeFile('log.txt', 'Hello Node\r\n', { flag: "a+" }, (err) => {
  if (err) throw err;
  console.log('The file is created if not existing!!');
}); 
```

文档：[https ://nodejs.org/api/fs.html#fs_file_system_flags](https://nodejs.org/api/fs.html#fs_file_system_flags)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T02:04:07.947

I also found the documentation confusing, because it doesn't tell you how to actually set up that command (or that you may need to read in files before appending).

Here's a full script. Fill in your file names and run it and it should work! Here's a [video tutorial](https://www.youtube.com/watch?v=UxOpmMrZBto) on the logic behind the script.

```
var fs = require('fs');

function ReadAppend(file, appendFile){
  fs.readFile(appendFile, function (err, data) {
    if (err) throw err;
    console.log('File was read');

    fs.appendFile(file, data, function (err) {
      if (err) throw err;
      console.log('The "data to append" was appended to file!');

    });
  });
}
// edit this with your file names
file = 'name_of_main_file.csv';
appendFile = 'name_of_second_file_to_combine.csv';
ReadAppend(file, appendFile); 
```

# objective-c - NSJSONSerialization - 将对象修改为 json 文件

> ID：11983359
> 
> 赞同：1
> 
> 时间：2012-08-16T08:32:58.413
> 
> 标签：objective-c, json, nsjsonserialization

我的 iphone/ipad 项目中有这个简单的 json 文件。

```
{"initial_page" : Page_Selected} 
```

`Page_Selected`是一个`NSInteger`

我想`UIPickerView`通过`"initial_page"`. 怎么做？

当然我已经完成了`UiPickerWiew`选择部分和关于json的修改，我会把它写到

`-(void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponents:(NSInteger)component{ }`

功能。

也许完成这项工作的功能是`[[jsonParsed setInteger:row forKey:@"initial_page"]`这样，调试器返回我“无法识别的选择器发送”异常。

我只需要修改`json`参数的部分`"initial_page"`作为键。

任何人都可以帮助我吗？

* * *

这就是我得到的。

```
NSError *jsonParsingError = nil;
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Config" ofType:@"json"];
NSMutableDictionary *configJson = [NSJSONSerialization
                JSONObjectWithData:[NSData dataWithContentsOfFile:filePath]
                options:NSJSONReadingMutableContainers error:&jsonParsingError];

[configJson setValue:[NSNumber numberWithInt:row] forKey:@"initial_page"];

NSLog(@"%@",jsonParsingError); 
```

最后一行返回 me `(null)`，所以 json 文件没问题。

但是，如果我打印出来，`[configJson objectForKey:@"inital_page"]`那么我可以看到它发生了变化……那么，是否有一种“提交”或“保存”命令以使其持久化？

* * *

以下建议：

```
NSData * modified = [NSJSONSerialization dataWithJSONObject:configJson options:NSJSONWritingPrettyPrinted error:&jsonParsingError];

[modified writeToFile:filePath options:NSDataWritingAtomic error:&jsonParsingError];
NSLog(@"returned error: %@", [jsonParsingError localizedDescription]); 
```

再次，最后一行返回我`(null)`，但我在文件中找不到任何修改

* * *

更改后，我可以保存对 的修改`initial_page`，但这仅适用于`iPhone/iPad Simulator`真机调试，不适用于真机调试。

这就是我所做的：

```
if([modified wirteToFile:filePath options:NSDataWritingFileProtectionNone error:&jsonParsingError])
   NSLog(@"writing ok")
else
   NSLog(@"not ok with error :%@",jsonParsinError); 
```

`Iphone simulator`最后 4 行没有问题，但是当我在物理上运行它时`iPhone`，最后`NSLog`给出：

```
"not ok with error : Error Domain=NSCocoaErrorDomain Code=513 The Operation Could not be completed. Operation not permitted" 
```

似乎在写入 json 文件时权限被拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:57:18.017

问题解决了：主要的错误概念是在主包中写入和/或修改文件。现在我在`NSDocumentDirectory`

这样，我就不会出错，并且可以直接在 iPhone 中/从 iPhone 中读取/写入数据。

我遵循了本指南：[链接](http://www.developerfeed.com/ios/tutorial/copy-pdf-files-main-bundle-document-folder-ios)当然我使用 json 作为过滤器而不是 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:56:33.900

放在函数`NSDataWritingFileProtectionNone`中`option`。`dataWithJSONObject`现在它只在模拟器上对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:17:08.197

首先，您应该通过将初始值指定`Page_Selected`为数字来使您的 json 有效，否则您将无法解析它。例如`{"initial_page" : -1}`，您可以确定它是一个无效的初始值，并且您不会意外使用它

然后在解析时，指定`NSJSONReadingMutableContainers`为`+JSONObjectWithData:options:error:`方法的选项

然后您实际上可以修改获得的实例`NSMutableDictionary`：

```
[jsonDictionary setValue:[NSNumber numberWithInt:row] forKey:@"initial_page"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T16:11:48.833

> 是否有一种“提交”或“保存”命令以使其持久化？

您需要将 JSON 写回文件。

使用 NSJSONSerialization 的[-dataWithJSONObject:options:error:](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40010946-CH1-SW4)方法创建 NSData，然后将其写入文件。请注意，您不应尝试写入应用程序包中的资源。

# linux - 防止在 tar 解压后创建额外文件

> ID：11983363
> 
> 赞同：0
> 
> 时间：2012-08-16T08:33:08.247
> 
> 标签：linux, unix, tar

我曾经`$ tar -cvjf filename.tar.bz2`打包一个文件夹并`$ tar xfj file.tar.bz2`提取文件夹及其文件。在那之后，我注意到格式文件的克隆`._file1`，`._file2`...

我怎样才能防止 `._files`被创建？

我正在使用 Mac OSX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:52:14.327

`--exclude="._*"`提取时添加。

# xml - 使用 XSL 转换 XML

> ID：11983366
> 
> 赞同：0
> 
> 时间：2012-08-16T08:33:16.650
> 
> 标签：xml, xslt

我正在使用一个简单的 XSL 格式化一个 xml 文件，当容器标签中没有其他数据时它可以正常工作，但如果标签中有数据则不显示任何数据。

当 XML 是这样的时候很好

```
<Result>
 <primaryTopic> 
  <CompanyName>ZENITH PRINT (UK) LIMITED</CompanyName>
  <RegAddress>
    <AddressLine1>ZENITH HOUSE</AddressLine1>
    <AddressLine2>MOY ROAD INDUSTRIAL ESTATE</AddressLine2>
    <PostTown>TAFFS WELL</PostTown>
    <County>CARDIFF</County>
    <Postcode>CF15 7QR</Postcode>
  </RegAddress> 
```

当标签中有这样的 url 数据时，它会失败

```
<Result xmlns="http://#####.uk/terms/xxx">
 <primaryTopic> 
  <CompanyName>ZENITH PRINT (UK) LIMITED</CompanyName>
  <RegAddress href="http://#####.uk/doc/company/02050399#RegAddress">
    <AddressLine1>ZENITH HOUSE</AddressLine1>
    <AddressLine2>MOY ROAD INDUSTRIAL ESTATE</AddressLine2>
    <PostTown>TAFFS WELL</PostTown>
    <County>CARDIFF</County>
    <Postcode>CF15 7QR</Postcode>
  </RegAddress> 
```

我正在使用的 XSL

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
    <h2><xsl:value-of select="Result/primaryTopic/CompanyName"/></h2>
    <table border="1">
      <tr>
        <td>Company Name</td>
        <td><xsl:value-of select="Result/primaryTopic/CompanyName"/></td>
        <td>Address</td>
        <td><xsl:value-of select="Result/primaryTopic/RegAddress/AddressLine1"/></td>
      </tr>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:20:51.383

问题在于，对于第二个示例，已指定默认命名空间，因此 XML 中的所有元素都将成为该命名空间的一部分

```
<Result xmlns="http://#####.uk/terms/xxx"> 
```

但是，您的 XSLT 正在寻找没有名称空间的元素，因此它不会匹配 XML 中的元素，而这些元素确实有名称空间。

解决方案是在匹配元素时确保命名空间是 XSLT 的一部分

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xxx="http://#####.uk/terms/xxx" exclude-result-prefixes="xxx">
   <xsl:template match="/">
      <html>
         <body>
            <h2>
               <xsl:value-of select="xxx:Result/xxx:primaryTopic/xxx:CompanyName"/>
            </h2>
            <table border="1">
               <tr>
                  <td>Company Name</td>
                  <td>
                     <xsl:value-of select="xxx:Result/xxx:primaryTopic/xxx:CompanyName"/>
                  </td>
                  <td>Address</td>
                  <td>
                     <xsl:value-of select="xxx:Result/xxx:primaryTopic/xxx:RegAddress/xxx:AddressLine1"/>
                  </td>
               </tr>
            </table>
         </body>
      </html>
   </xsl:template>
</xsl:stylesheet> 
```

当然，这只适用于您的第二个 XML 示例，而不是第一个。如果您想要一个适用于这两个示例的 XSLT，您可以执行类似的操作来检查元素名称，而不考虑名称空间。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/*/*[local-name()='primaryTopic']">
      <html>
         <body>
            <h2>
               <xsl:value-of select="*[local-name() = 'CompanyName']"/>
            </h2>
            <table border="1">
               <tr>
                  <td>Company Name</td>
                  <td>
                     <xsl:value-of select="*[local-name() = 'CompanyName']"/>
                  </td>
                  <td>Address</td>
                  <td>
                     <xsl:value-of select="*[local-name() = 'RegAddress']/*[local-name() = 'AddressLine1']"/>
                  </td>
               </tr>
            </table>
         </body>
      </html>
   </xsl:template>
</xsl:stylesheet> 
```

这应该为第一个和第二个 XML 样本提供相同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:02:52.347

您的 XSL 对这两种 XML 都适用。一定还有其他问题。向 XML 节点添加属性不得影响转换。

# javascript - 将事件绑定到除 data-rel= back 之外的所有锚标记

> ID：11983374
> 
> 赞同：2
> 
> 时间：2012-08-16T08:33:54.270
> 
> 标签：javascript, jquery, html, jquery-mobile, anchor

我正在使用 jQuery Mobile 开发一个混合应用程序。问题是我想处理对应用程序中存在的所有锚标记的点击，除了`data-rel`后退按钮。

考虑这段代码：

```
<a data-rel="back">leave me</a> 
```

我不能`a`像这样选择所有元素：

```
$("a").click(function(event) {
    alert("whooi handled all anchors")
} 
```

有人对如何实现这一目标有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:37:37.213

[使用Not Selector](http://api.jquery.com/not-selector/)怎么样：

```
$('a:not([data-rel=back])') 
```

您还可以使用[Attribute Not Equal Selector](http://api.jquery.com/attribute-not-equal-selector/)：

```
$('a[data-rel!=back]') 
```

这对你有用吗？

# sql - 无法在单个查询中使用两个数据库链接

> ID：11983378
> 
> 赞同：0
> 
> 时间：2012-08-16T08:34:14.177
> 
> 标签：sql, database, oracle

我试图在一个查询中使用两个数据库链接，一个用于获取数据，另一个用于插入数据。但是我无法在单个查询中使用它们，即使它们在单独的查询中使用时都可以正常工作。我不能在单个查询中使用单独的数据库链接，如果可以，为什么不呢？我试图运行的查询就像

```
INSERT INTO TABLE1@DBLINK1 SELECT * FROM TABLE2@DBLINK2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:24:25.697

这看起来像 10g 中的错误。可能是错误 6320621，当 SQL 通过 DBLINK 连接多个站点时出现 ORA-2019'；或 5713736，“使用 DB-LINK ORA-02019 插入带有选择选项的语句失败”。您可能需要向 Oracle 提出 SR，以便针对您的具体情况进行调查。

作为一种替代方法，您可以考虑从一个数据库中卸载数据，然后将其加载到另一个数据库中。例如，您可以使用`expdp`and 和`impdp`and`tables`选项`content=data_only`，分两个阶段进行传输。当然，在中间数据库服务器上存储转储文件需要空间，而且不太方便。您可能能够从源数据库服务器或目标数据库服务器执行此操作，避免中间，但不清楚您是否有任何直接访问权限。

# mfc - 在 MFC 中使用相同的单击操作方法定义两个单选按钮

> ID：11983379
> 
> 赞同：0
> 
> 时间：2012-08-16T08:34:18.070
> 
> 标签：mfc

我试图在 MFC ( VS 2010 ) 中定义两个单选按钮，它们的动作单击将相同 - 这意味着在它们每个的单击动作中......将被调用的方法将是相同的方法。

但是VS没有给我这个选项..我收到消息，同名的方法已经存在。

我该怎么做？

我怎样才能让这两个单选按钮在同一个组中（只有一个会被选中，另一个不会被选中）？

以及如何在其中一个单选按钮上设置默认检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:39:40.210

在向导中生成两个方法，然后手动删除一个并指向您保存在消息映射中的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T09:14:44.853

打开属性面板，并设置第一个单选按钮的“组”属性。这将绑定一组中的两个按钮，并且一组内的按钮互斥。

# php - 是否可以在 MySQL 常规/慢查询日志中隐藏密码？

> ID：11983381
> 
> 赞同：6
> 
> 时间：2012-08-16T08:34:31.410
> 
> 标签：php, mysql, security, aes

有时我查看我的 MySQL 日志，偶然发现一些[AES_ENCRYPT/AES_DECRYPT](http://dev.mysql.com/doc/refman/5.6/en/encryption-functions.html#function_aes-encrypt)请求以明文形式显示密码。

如果我在 PHP 中创建日志，我将能够[删除](http://www.php.net/manual/en/function.preg-replace.php)它们。

但是[MySQL 通用/慢查询日志](http://dev.mysql.com/doc/refman/5.0/en/server-logs.html)呢？他们的选项是否可用，或者是否可以设置一个不会保存在日志中的 mySQL 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:43:36.780

不幸的是，我知道没有办法为单个语句禁用 MySQL 日志记录。由于这个原因，MySQL 文档建议保持日志的安全：

从[5.2.3 开始。一般查询日志](http://dev.mysql.com/doc/refman/5.6/en/query-log.html)

> 从 MySQL 5.6.3 开始，写入通用查询日志的语句中的密码由服务器重写，不会以纯文本形式出现。通过使用 --log-raw 选项启动服务器，可以抑制一般查询日志的密码重写。此选项可能对诊断有用，可用于查看服务器接收到的语句的确切文本，但出于安全原因，不建议将其用于生产用途。
> 
> 在 MySQL 5.6.3 之前，语句中的密码不会被重写，一般查询日志应该受到保护。请参阅第 6.1.2.2 节，“<a href="http://dev.mysql.com/doc/refman/5.1/en/password-security-admin.html" rel="nofollow">密码安全管理员指南” .

不幸的是，（从 5.6.3 开始）内置的反密码日志记录仅适用于 MySQL PASSWORD() 函数。

对于您的问题，我看到了一些可能的解决方案：

1.  对于每个查询：禁用日志、执行查询、启用日志
2.  在您的应用程序本身中散列密码（在您的情况下，php sha）
3.  保护日志文件，以便没有人可以看到语句
4.  登录到删除密码本身的应用程序

# c# - 在 C# 中是否可以像 Ruby 一样有两个类似的方法（名称和参数）？

> ID：11983384
> 
> 赞同：0
> 
> 时间：2012-08-16T08:34:33.860
> 
> 标签：c#, .net, ruby

C# 是否能够处理方法版本？

例如，如果我在 Ruby 中有两个具有相同名称和参数的方法，则会执行最新版本。

C# 如何处理这个问题？它会引发错误或执行最新版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:35:22.503

在 C# 中的同一个类中不能有两个具有相同名称和参数列表的方法。您需要以某种方式区分方法，使用不同的名称或不同的参数类型和/或不同数量的参数。你只会得到一个编译错误。

虽然在 C# 中没有方法的“最新版本”的概念，但听起来您正在尝试完成一种方法覆盖（我不熟悉 ruby​​，所以我不知道最新版本的含义），您可以通过子类化和方法覆盖来实现类似的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:35:38.557

如果它们完全相同（命名空间、类、名称和参数），则会出现编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:52:19.897

[成员重载](http://msdn.microsoft.com/en-us/library/ms229029.aspx)已成为过去`c#`

在使用`optional parameters`中要好得多。没有重复的代码，需要维护的代码更少。

```
public int SomeCalcMethod(int object1, int object2, int? object3 = null)
{
   return object1 + object2 + (int)(object3 ?? 0);
} 
```

无需重载方法：

```
public int SomeCalcMethod(int object1 , int object2)
{
    return object1 + object2;
}

public int SomeCalcMethod(int object1 , int object2, int object3 )
{
    return object1 + object2+ object3 ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:36:26.307

在同一个类中不能有 2 个具有完全相同签名的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T08:41:16.250

至少参数必须不同，否则会出现编译错误。

```
class CalculateSomething
{
    public static int Plus(int number1, int number2)
    {
        return Plus(number1, number2, 0);
    }

    public static int Plus(int number1, int number2, int number3)
    {
        return number1 + number2 + number3;
    }
} 
```

# html - 如何使网站垂直滚动和拖动？

> ID：11983386
> 
> 赞同：2
> 
> 时间：2012-08-16T08:34:41.237
> 
> 标签：html, css, scroll, draggable

我发现了一个导航非常有趣的网站。
内容可在垂直方向滚动和拖动。

导航的艺术感觉就像我在平板电脑上使用它一样。

见这里： [http ://www.abm.at/de/home](http://www.abm.at/de/home)

有没有图书馆？
有人知道吗？

而且非常有趣的是，内容像 iframe 一样列出，您可以在其中滚动。但是源代码中没有可见的 iframe。
**那么，那是什么？如何做同样的事情？**

**编辑1：**
我发现这个可以拖动滚动：http: [//archive.plugins.jquery.com/project/Dragscrollable](http://archive.plugins.jquery.com/project/Dragscrollable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:47:14.610

这是一个 jQuery 库，请在下面找到包含完整详细信息的链接

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

使用和实现非常简单

```
$(function()
{
$('.scroll-pane').jScrollPane();
}); 
```

# ruby-on-rails - 这个 NoMethodError 的原因是什么？

> ID：11983389
> 
> 赞同：0
> 
> 时间：2012-08-16T08:34:54.220
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我有以下代码：

```
Cms::Page.class_eval do
  def self.fetch_by_slug(slug)
    Rails.cache.fetch("cms_page_#{slug}") { Cms::Page.find_by_slug(slug) }
  end
end 
```

在`config/initializers/cms_mp.rb`

问题是，我在我的布局文件中有一个调用`fetch_by_slug`，因此，每个请求都会调用它。在开发模式下，如果我做了一些触发类重新加载的操作，我会收到错误消息`undefined method fetch_by_slug for #<Class:0xbff20e8>`，唯一的解决方法是重新启动 rails devel 服务器。

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:49:08.403

看起来问题在于初始化程序仅在服务器启动时加载。我您的 Cms::Page 稍后重新加载，然后添加的方法我走了。您应该考虑不将此代码放在初始化程序中，而是将其放在将用依赖类重新加载的地方。

# firebug - “网络错误：404 未找到 - http://www.humblefinancialservices.com/deferredfunctions.js” Firebug

> ID：11983393
> 
> 赞同：0
> 
> 时间：2012-08-16T08:35:17.793
> 
> 标签：firebug, http-status-code-404

只是为了让您知道我仍在学习 wordpress，所以请记住答案。

我总是有这个错误（使用`Firebug error code`但在其他测试软件上弹出）`NetworkError: 404 Not Found - http://www.humblefinancialservices.com/deferredfunctions.js`Firebug

我不知道它是什么。错误似乎出现在每一页上，即相同的错误在所有页面上重复出现。它确实大大降低了我的网站速度。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T11:30:49.050

此错误表明您的代码中包含浏览器无法找到的某些内容。在您的情况下，浏览器无法找到您提到的链接。再次检查您的代码。如果您使用的是 firebug，它可以帮助您找到确切的位置需要更改的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:36:27.663

您已在 HTML 代码中的某处包含 Javascript 文件，指向`http://www.humblefinancialservices.com/deferredfunctions.js`

所以每次你打开你的页面时，它也会被下载。如果您的网站在没有此脚本的情况下工作，只需将其从您的 wordpress 模板中删除。

# java - 如何在视图 Bean 中获取 JSP 请求和响应

> ID：11983398
> 
> 赞同：1
> 
> 时间：2012-08-16T08:35:46.247
> 
> 标签：java, jsp

我想从 JSP 中删除脚本。在我的 JSP 中，我有一个脚本为

```
<%response.setContentType("text/xml");%> 
```

我创建了一个*视图 bean*并创建了一个属性，`HttpServletResponse response` 并为此属性添加了 getter/setter。

当我试图获得响应时`ViewBean`，它会以`null`. 有什么建议可以避免这种情况`NullPointerException`吗？

我的 JSP 代码是：

```
<jsp:useBean id="test" class="someBean" />
<jsp:setProperty name="test" property="*" />
<jsp:getProperty name="test" property="response" /> 
```

ViewBean 代码是：

```
package test.here;

import java.sql.*;
import java.util.*;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.ibm.commerce.server.WcsApp;
import com.ibm.commerce.server.JSPHelper;

public class SomeBean {
    String punchOutRes = null;
    HttpServletResponse response;
    HttpServletRequest request;
    String test="Hello";
    public HttpServletResponse getResponse() {
        return response;
    }

    public void setResponse(HttpServletResponse response) {
        this.response = response;
    }

    public HttpServletRequest getRequest() {
        return request;
    }

    public void setRequest(HttpServletRequest request) {
        this.request = request;
    }

    public String getPunchOutRes() {    

           response.setContentType("text/xml");
           return "testing";       
    }
    public String getTest(){    
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:09:13.530

首先，在实例化你的 bean 时，你应该引用你的 java bean 类的完整限定名（即**包名**加上**类名**），如下所示：

```
<jsp:useBean id="test" class="test.here.SomeBean" /> 
```

另一方面，[`<jsp:setProperty property="*" />`](http://java.sun.com/products/jsp/tags/syntaxref.fm13.html)文档说明如下：

> 将请求对象参数（称为请求参数）中的所有值存储在匹配的 Bean 属性中。Bean 中的属性名称必须与请求参数匹配。参数名称通常来自 HTML 表单的元素，而值来自用户输入的数据。
> 
> 请求参数的值始终是字符串类型。String 值被转换为其他数据类型，因此它们可以存储在 Bean 属性中。允许的 Bean 属性类型及其转换方法如表 1-1 所示。

该解释中没有关于***隐式对象****注入的***任何内容（请求和响应是隐式 JSP 对象，而不是请求参数），并且**您不应该在 bean 代码中使用任何这些对象**。**

 **如果您只想设置内容类型，请使用 JSP 指令：

```
<%@ page contentType="text/xml;charset=ISO-8859-1" %> 
```

但是如果你想进行更复杂的操作，那么你应该使用 Servlet 或 Filter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:08:04.313

您可以使用 page 指令摆脱上面的 scriptlet：

```
<%@ page contentType="text/xml;charset=ISO-8859-1" %> 
```

通常，您的 bean 代码不应*包含*任何 servlet 特定信息。

在 servlet 中使用：

```
request.setAttribute("test", myBean);
request.getRequestDispatcher("page.jsp").forward(request, response); 
```

在 JSP 中使用：

```
${test.foo} 
```

foo 出现在哪里

```
public String getFoo() {
    return foo;
} 
```

在豆类中。**

# android - 片段的支持库

> ID：11983410
> 
> 赞同：0
> 
> 时间：2012-08-16T08:36:52.113
> 
> 标签：android, sdk

我想安装支持库来使用片段。

我找到了2个解决方案

解决方案1：

![在此处输入图像描述](../Images/1bcad83d9a6ef1aa33ad928fad39a949.png)

问题：

![在此处输入图像描述](../Images/b71e6aa972524d461d6d3f55e6d24361.png)

解决方案2：

[无法将 Fragments 与 Android 兼容包一起使用](https://stackoverflow.com/questions/5195697/unable-to-use-fragments-with-android-compatibility-package#answers-header)

问题：

我在控制台中得到这个：

```
[2012-08-16 13:49:12 - Android Compatibility JAR not found:] C:\Documents and Settings\user\v4\android-support-v4.jar] 
```

如何安装支持库？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:41:08.883

使用解决方案 1 下载。

您将在`\android-sdk\extras\android\compatibility\v4`.

**如何使用它：**

在您的项目中，创建一个名为： 的新文件夹`libs`。

复制库并将其粘贴到`libs`文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:41:15.183

> 将文件下载`android-support-v4.jar`或复制到项目的libs文件夹中，然后右键单击该jar文件->构建项目->添加到构建路径。

[从这里](http://www.java2s.com/Code/Jar/a/Downloadandroidsupportv4jar.htm)下载 jar 文件

# jquery - 在 JQuery 中获取所有具有名称、id、值的输入类型

> ID：11983412
> 
> 赞同：6
> 
> 时间：2012-08-16T08:36:53.533
> 
> 标签：jquery

在 JQuery 中，如何获取任何 div 中存在的名称、id 和值的输入类型列表？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T08:39:59.933

选择从具有 name、id 和 value 属性的 div 下降的输入。然后将每个匹配项的“类型”属性推入一个数组。

```
var inputTypes = [];

$('div input[name][id][value]').each(function(){
     inputTypes.push($(this).attr('type'));
}); 
```

[http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T08:41:14.967

> > 在 JQuery 中，我如何获取输入类型列表...

这？

```
var inputTypes = [];
$('input[name!=""][value!=""][id!=""]').each(function() {
    inputTypes.push($(this).prop('type'));
}); 
```

`property!=""`不仅仅是必要的，这`[property]`是为了过滤掉诸如

`<input type="text" name="something" value="" id="someId" />`

（我假设您不想获得任何属性等于空字符串的输入）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T08:40:11.927

您可以查看每个输入，获取它们的属性并检查每个输入的空字符串。你可以使用任何你想展示它们的方法，这里我只是将它们添加到一个数组中。

```
var inputs = new Array();  

$("input").each(function() {
    var name = $(this).attr("name");
    var id = $(this).attr("id");
    var val = $(this).val();

    if ((name) && name !== "") && ((id) && id !== "") && ((val) && val !== "")) {
        inputs.push(this);
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T08:42:12.550

您可以通过以下方式访问输入：

```
$('input') 
```

`.attr('type')`然后获取您想要的属性，例如`.attr('id')`. 如果你需要列表将它们写入数组是`$('input').each(...);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-13T19:14:49.990

当您想选择具有特定名称的输入时`"foo"`，如下所示：

```
$('div input[name="foo"]').each(function(){
     // your program logic goes here
     // this.val("123")
}); 
```

或者您可能想要获得它们的值不匹配的那些`"123"`：

```
$('div input[value!="123"]').each(function(){
     // your program logic goes here
}); 
```

甚至两者的结合：

```
$('div input[name="foo"][value!="123"]').each(function(){
    // your program logic goes here
}); 
```

有关详细信息，请参阅[JQuery API 参考。](http://api.jquery.com/multiple-attribute-selector/)

# visual-studio-2010 - 如何在 WiX 3.6 中包含依赖于配置的项目输出

> ID：11983424
> 
> 赞同：7
> 
> 时间：2012-08-16T08:38:06.280
> 
> 标签：visual-studio-2010, wix, wix3.6

我想知道，如何在 WiX 设置项目中包含依赖于配置的项目输出？例如，让我们看一下带有一个 .NET 应用程序和一个 Wix 安装项目的 Visual Studio 解决方案。

我在安装项目中添加了对 .NET 应用程序的引用，并在安装源中创建了组件：

```
 <Component Guid="EB0CBC32-5AE5-41B3-A343-FEBE044AC30A">
    <File Source="$(var.MyApp.TargetPath)" KeyPath="yes"/>
  </Component> 
```

因此，我希望 WiX 将在其**发布**设置 msi 中包含MyApp的**发布**版本，并在 debug msi 中分别包含调试版本。否则，对项目输出的引用对我来说毫无意义。

 **但总是有调试版本。我究竟做错了什么？

**更新。**

这是 VS 输出窗口中的蜡烛命令提示符：

> ------ 重建所有开始：项目：**MySetup，配置：Release x86** ------
> C:\Program Files\WiX Toolset v3.6\bin\candle.exe -d"DevEnvDir=C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\" -dSolutionDir=D:\Projects\Research\Wix_ProjectOutput\ -dSolutionExt=.sln -dSolutionFileName=Wix_ProjectOutput.sln -dSolutionName=Wix_ProjectOutput -dSolutionPath=D:\Projects\Research\Wix_ProjectOutput\Wix_ProjectOutput.sln -dConfiguration=Release -dOutDir=..\Release\ -dPlatform=x86 -dProjectDir=D :\Projects\Research\Wix_ProjectOutput\MySetup\ -dProjectExt=.wixproj -dProjectFileName=MySetup.wixproj -dProjectName=MySetup -dProjectPath=D:\Projects\Research\Wix_ProjectOutput\MySetup\MySetup.wixproj -dTargetDir=D:\Projects\ Research\Wix_ProjectOutput\Release\ -dTargetExt=.msi -dTargetFileName=MySetup.msi -dTargetName=MySetup -dTargetPath=D:\Projects\Research\Wix_ProjectOutput\Release\MySetup.msi **-dMyApplication.Configuration=Debug** -d"MyApplication.FullConfiguration=Debug|x86" -dMyApplication.Platform=x86 -dMyApplication.ProjectDir=D:\Projects\Research\Wix_ProjectOutput\MyApplication\ -dMyApplication.ProjectExt=.csproj -dMyApplication.ProjectFileName =MyApplication.csproj -dMyApplication.ProjectName=MyApplication -dMyApplication.ProjectPath=D:\Projects\Research\Wix_ProjectOutput\MyApplication\MyApplication.csproj -dMyApplication.TargetDir=D:\Projects\Research\Wix_ProjectOutput\Debug\ -dMyApplication.TargetExt= .exe -dMyApplication.TargetFileName=MyApplication.exe -dMyApplication.TargetName=MyApplication -dMyApplication.TargetPath=D:\Projects\Research\Wix_ProjectOutput\Debug\MyApplication.exe -out obj\Release\ -arch x86 Product.wxs

为什么MySetup的**发布版本使用了 MyApplication 的****调试**配置？

**更新 2**。

从命令行使用 msbuild 时，这里是蜡烛的命令提示符：

```
%windir%\Microsoft.NET\Framework\v4.0.30319\MsBuild.exe /verbosity:d /t:rebuild /fileLogger /p:Configuration=Release  Wix_ProjectOutput.sln 
```

在`msbuild.log`：

> C:\Program Files\WiX Toolset v3.6\bin\candle.exe -d"DevEnvDir=*如果不是从 Visual Studio 中构建，则未定义*" -dSolutionDir=D:\Projects\Research\Wix_ProjectOutput\ -dSolutionExt=.sln -dSolutionFileName =Wix_ProjectOutput.sln -dSolutionName=Wix_ProjectOutput -dSolutionPath=D:\Projects\Research\Wix_ProjectOutput\Wix_ProjectOutput.sln -dConfiguration=Release -dOutDir=..\Release\ -dPlatform=x86 -dProjectDir=D:\Projects\Research\Wix_ProjectOutput \MySetup\ -dProjectExt=.wixproj -dProjectFileName=MySetup.wixproj -dProjectName=MySetup -dProjectPath=D:\Projects\Research\Wix_ProjectOutput\MySetup\MySetup.wixproj -dTargetDir=D:\Projects\Research\Wix_ProjectOutput\Release\ - dTargetExt=.msi -dTargetFileName=MySetup.msi -dTargetName=MySetup -dTargetPath=D:\Projects\Research\Wix_ProjectOutput\Release\MySetup.msi**-dMyApplication.Configuration=Release** -d"MyApplication.FullConfiguration=Release|x86" -dMyApplication.Platform=x86 -dMyApplication.ProjectDir=D:\Projects\Research\Wix_ProjectOutput\MyApplication\ -dMyApplication.ProjectExt=.csproj -dMyApplication.ProjectFileName =MyApplication.csproj -dMyApplication.ProjectName=MyApplication -dMyApplication.ProjectPath=D:\Projects\Research\Wix_ProjectOutput\MyApplication\MyApplication.csproj -dMyApplication.TargetDir=D:\Projects\Research\Wix_ProjectOutput\Release\ -dMyApplication.TargetExt= .exe -dMyApplication.TargetFileName=MyApplication.exe -dMyApplication.TargetName=MyApplication -dMyApplication.TargetPath=D:\Projects\Research\Wix_ProjectOutput\Release\MyApplication.exe -out obj\Release\ -arch x86 Product.wxs

因此，在 msbuild 下一切正常。

**更新 3**。

看起来 WiX 使用了**主动**构建配置（参见 VS 工具栏上的组合框）。
我的意思是，如果`Debug`在那里选择，WiX 项目将包括引用项目的调试输出。如果`Release`选中，WiX 项目将包括发布输出。

从我的角度来看，这种行为是不正确的。`Debug`安装程序必须包含引用项目的**调试**输出。`Release`安装程序 -**发布**输出。

[在这里](https://sourceforge.net/tracker/?func=detail&aid=3558938&group_id=105970&atid=642714)发布了错误，但现在没有任何解释就关闭了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T09:12:17.683

您可以使用 $(var.Configuration)，它设置为解决方案配置（调试、发布等）：

```
<File Id="MyApp.exe" KeyPath="yes" Source="..\MyApp\$(var.Configuration)\MyApp.exe" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:31:34.523

尝试通过以下步骤添加变量`MyApplication.Configuration`并将其设置为：`Release`

1.  在解决方案资源管理器中右键单击项目的引用节点，然后选择添加引用...
2.  在 Add WiX Library Reference 对话框中，单击 Projects 选项卡。
3.  选择所需的项目并单击“添加”按钮，然后单击“确定”关闭对话框。

详情[在这里](http://blogs.msdn.com/b/jrock/archive/2008/01/29/complete-list-of-candle-preprocessor-variables.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:57:41.340

由于我所做的正是您经常尝试的成功操作，因此我怀疑您将解决方案配置与项目配置混淆了。**foo**的解决方案配置可以使用**bar**的项目配置- 它们只是名称，不必匹配。检查配置管理器（ VS2012 中的***BUILD → Configuration Manager...***）并验证当您的解决方案配置为“发布”时，您的项目配置也是“发布”。**

# osgi - OSGI 系统包上的 LinkageError

> ID：11983426
> 
> 赞同：1
> 
> 时间：2012-08-16T08:38:14.760
> 
> 标签：osgi, apache-felix

尝试运行捆绑激活器时出现此异常：

```
java.lang.LinkageError: loader constraint violation: when resolving
method "com.openaf.osgi.OSGIUtils$.mapToDictionary(Lscala/collection/immutable/Map;)Ljava/util/Dictionary;"
the class loader (instance of
org/apache/felix/framework/BundleWiringImpl$BundleClassLoaderJava5) of
the current class, com/openaf/test/TestBundleActivator, and the class
loader (instance of sun/misc/Launcher$AppClassLoader) for resolved
class, com/openaf/osgi/OSGIUtils$, have different Class objects for
the type a/util/Dictionary; used in the signature
    at com.openaf.test.TestBundleActivator.start(TestBundleActivator.scala:11) 
```

看起来`java.util.Dictionary`已经被两个不同的类加载器加载了，但我不知道为什么。导致问题的类 ( `com.openaf.osgi.OSGIUtils`) 是系统包。IE

```
hm.put("org.osgi.framework.system.packages.extra", "sun.misc, com.openaf.osgi") 
```

这是存在于其中的捆绑包的清单`TestBundleActivator`：

```
Manifest-Version: 1
Bnd-LastModified: 1345098244802
Bundle-Activator: com.openaf.test.TestBundleActivator
Bundle-ManifestVersion: 2
Bundle-Name: test.impl
Bundle-SymbolicName: test.impl
Bundle-Version: 0
Created-By: 1.7.0_04 (Oracle Corporation)
Export-Package: com.openaf.test;uses:="scala.collection,scala.collection
 .immutable,com.openaf.test.api,scala.collection.mutable,scala.reflect,o
 rg.osgi.framework,com.openaf.osgi,scala.runtime,scala,com.openaf.utils"
 ;version="0.0.0"
Import-Package: com.openaf.osgi,com.openaf.test.api,com.openaf.utils,org
 .osgi.framework,scala,scala.collection,scala.collection.immutable,scala
 .collection.mutable,scala.reflect,scala.runtime
Tool: Bnd-1.44.0 
```

有谁知道我做错了什么？我只是假设它在系统包中，它应该由基类加载器加载。看来情况并非如此。

谢谢，尼克。

编辑 - 我应该说我想要做什么。启动 felix 应用程序时，我在类路径上有一个包，我希望它可用于所有捆绑包。我认为`org.osgi.framework.system.packages.extra`财产是这样做的。那是对的吗？

# java - Linksys 路由器网络管理员 - .NET 中的自动登录

> ID：11983428
> 
> 赞同：0
> 
> 时间：2012-08-16T08:38:24.057
> 
> 标签：java, .net, authentication, router, linksys

我正在考虑制作一个应用程序来抓取我的 linksys 路由器管理网站的页面。但由于这是使用 java 登录对话框保护的，所以我无法获取网页，查找元素（用户名、密码）然后提交数据。还有另一种方法可以做到这一点吗？

亲切的问候，托拜厄斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:38:09.677

以下 python 代码允许我从我的 Linksys 型号 WRT320N 路由器中提取状态页面：

```
import urllib2
from base64 import encodestring

LOGIN  = 'admin'
PASSWD = '<your router password>'
URL    = 'http://<router IP address>/Status_Router.asp'

url    = urllib2.Request(URL)
b64str = encodestring('%s:%s' % (LOGIN, PASSWD))[:-1]
url.add_header("Authorization", "Basic %s" % b64str)

f = urllib2.urlopen(url)
for line in f.readlines():
    print line,

f.close() 
```

我还可以使用用户和密码选项使用“wget”实用程序来做到这一点。

# c# - 在主应用程序崩溃后杀死另一个进程

> ID：11983429
> 
> 赞同：1
> 
> 时间：2012-08-16T08:38:25.170
> 
> 标签：c#

主应用程序启动另一个进程，我如何在主应用程序崩溃后结束这个辅助进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:39:39.703

使辅助进程等待其父进程的句柄。如果父母出于任何原因存在，请退出孩子本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:40:05.413

你需要一个看门狗进程。但是然后... *quis custodiet custodes*？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:43:35.527

您需要确保您的主进程**不会崩溃！**- 这是你的第一个问题..

如果你不能确保这一点，那么你需要一个[看门狗](http://en.wikipedia.org/wiki/Watchdog_timer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:19:26.960

为什么不在后台线程中启动新进程。这样，每当您的主应用程序关闭或崩溃时，即主线程终止，后台线程将自动终止......

# visual-studio-2010 - VS 从解决方案资源管理器启动可执行文件

> ID：11983437
> 
> 赞同：2
> 
> 时间：2012-08-16T08:39:05.623
> 
> 标签：visual-studio-2010

我有一个 Visual Studio 解决方案，并希望在解决方案资源管理器中有一个 exe 文件（不是由该解决方案编译），该文件将在双击时启动。

可以添加exe文件。但是双击资源编辑器会显示有关该文件的元数据。我可能会单击“打开方式...”并在此处添加“cmd.exe /c”，但该条目不会持续存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T11:02:52.233

您可以使用 Windows 资源管理器打开您的 exe。当您选择“打开方式...”菜单项时，将“Windows 资源管理器”条目添加到列表中。路径是“C:\Windows\explorer.exe”

# iphone - 使用 TfL 数据的 iPhone 应用程序的 IP 地址是什么？

> ID：11983441
> 
> 赞同：3
> 
> 时间：2012-08-16T08:39:35.063
> 
> 标签：iphone, ip, bus

要从伦敦交通局 (TfL) 获取数据馈送，[注册表单](http://www.tfl.gov.uk/businessandpartners/syndication/16492.aspx)有一个必填字段，该字段需要请求数据的服务器的 IP 地址。但是对于使用 NSURLConnection 的 iPhone 应用程序，它是手机进行下载，因此不涉及服务器。

我给 TfL 发了电子邮件，但没有回复。本地 IP 地址被拒绝：

> (127.0.0.1, 192.168\. *, 10.*或在 172.16.* - 172.31.* 范围内) 不能被接受

有没有人解决这个问题以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T08:45:36.877

您的应用程序不应直接连接到服务器，而应使用自己的服务器作为 TfL 服务器的代理。

来自[TfL 的开发人员指南](http://www.tfl.gov.uk/assets/downloads/syndication-developer-guidelines.pdf)：

> 您应该获取我们的数据并代理它，您不应该让您的所有客户直接访问我们的服务。这旨在减少 TfL 对托管和内容交付的成本责任。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T00:50:26.213

查看 TfL 申请表，您必须指定您将从中调用 TfL api 的 IP 地址范围。

# ios - 在应用内购买期间观察相同的警报视图问题

> ID：11983445
> 
> 赞同：0
> 
> 时间：2012-08-16T08:39:40.417
> 
> 标签：ios, in-app-purchase, inappsettings

我有一个速度计应用程序，其中 2 个功能通过将它们添加到应用内购买来启用。一切正常，我关注了[http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

要启用的两个功能都是非消耗性的。问题是，当我对此进行测试并添加测试帐户和密码时，我一直得到相同的警报视图 - “您已经购买了这个，但尚未下载。点击 OK 立即下载”

[环境：沙盒]

为什么我总是得到相同的警报视图？该功能只是启用HUD功能并删除广告；所以没有什么可以从服务器下载。而且我无法确定交易是否完成，因为它甚至没有调用完成交易方法，只是给出了相同的警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:06:06.577

我浏览了本教程并观察了这个警报视图。我认为这不是任何问题，因为您可能已经在应用商店设置了一个测试帐户。如果您已经购买了此商品，Apple 商店会通知您，如果您已经运行了您的应用程序并多次测试了购买功能，您可能会这样做。这实际上是苹果商店完成的部分，所以你对此没有任何处理。

You should received though after this alert a notification that the transaction has been completed. Make sure you have added this method:

```
 [[SKPaymentQueue defaultQueue] addTransactionObserver:[InAppRageIAPHelper sharedHelper]]; 
```

in your **didFinishLaunchingWithOptions** method of your app delegate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:51:48.043

在购买商品时使用不同的产品 ID：

```
-(void)buyCoinPack_1
{
          SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:self.currentProductId_1]]; 

            request.delegate = self;  
            [request start]; 
}

-(void)buyCoinPack_2
{
          SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:self.currentProductId_2]]; 

            request.delegate = self;  
            [request start]; 
} 
```

# java - 从java给批处理文件输入

> ID：11983448
> 
> 赞同：0
> 
> 时间：2012-08-16T08:39:50.280
> 
> 标签：java, input, batch-file

我有一个批处理文件，它在打开显示选项控制台时执行不同的操作。我想从我的 java 代码中调用这个批处理文件，并在我的代码中的不同位置输入不同的选项输入。我试过 Runtime.getRuntime().exec("cmd /c start address/sys.bat"); 它显示了我前面提到的选项。现在我想从 java 本身向控制台提供输入以选择一个选项。可能吗？——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:49:06.493

下面是一个示例，您可以在 Linux 环境中为特定用户列出 crontab 任务：

```
String cmd = "crontab -u someuser -l";
Process proc = Runtime.getRuntime().exec(command);
int exitVal = proc.waitFor(); 
```

这`crontab`是一个系统 shell 脚本，它接受 -u、-l 等选项/参数，我希望您能找到与您的案例类似的情况。

# svn - SVN 流程：分支中的客户特定开发

> ID：11983451
> 
> 赞同：1
> 
> 时间：2012-08-16T08:39:58.710
> 
> 标签：svn, architecture, branching-and-merging

对于我的基于 java 的产品，这就是我的 SVN 结构的样子：

> \branches
>    \clientA
> \trunk
> \tags

**客户**正在`clientA`分公司进行特定的产品定制。一旦发布的自定义完成，分支将被*标记*并*发布*。现在，我**不**打算合并这些更改，`Trunk`因为这些是特定于客户端的更改。

比方说，我已经发布了`MyProduct-ClientA-REL-v1.0`。 **客户 A**请求更多功能/增强功能。所以，我继续在同一个分支中开发，为下一个版本（`MyProduct-ClientA-REL-v1.1`）做准备。在为此版本进行开发时，**客户 A**回来说他遇到了上一版本的错误。

现在我该怎么做？说，我在v1.0代码的同一分支中修改了太多东西（删除的文件）。

这个问题有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:09:18.573

我会做什么。

在发布时导出 clientA 标记（如果您没有将其设置为标记，则必须进行一些研究以找到它相当于哪个修订版）。此外，如果您之前没有制作标签，那么在找到修订版之后是做这件事的好时机。

这样，为该版本的错误创建一个额外的分支。进行修复并提交给给定的分支。获取与发布版本的差异并在您的客户端主分支中修复它。

对于其他自定义，创建一个分支“ClientX”并在那里重新创建主干/分支/标签结构可能是一个好主意。

# sql-server - 编写没有游标的存储过程

> ID：11983455
> 
> 赞同：0
> 
> 时间：2012-08-16T08:40:06.747
> 
> 标签：sql-server, tsql, stored-procedures

> **可能重复：**
> [没有游标的存储过程](https://stackoverflow.com/questions/11983253/stored-procedure-without-cursors)

如何在没有光标的情况下编写以下 sp？更重要的是它没有给我想要的输出。我没有写这个，我试图解释这有什么问题。

```
ALTER PROCEDURE [dbo].[AccreditationExpiryCheck]
AS
BEGIN
    SET NOCOUNT ON;

    declare @taskTypeId int = 19 -- Accreditations, automated
    declare @firstActionTypeId int = 23 -- Accreditation expiring
    declare @nextActionTypeId int = 3 -- Call company

    declare @companyId int
    declare @accreditationId int
    declare @comment nvarchar(max) = N' accreditation for this company has expired.'

    -- find all companies and accreditations expiring
    declare companies cursor local forward_only read_only for 
        select c.Company_Id, a.Accred_ID
        from COMPANY c
            inner join MEMBERSHIP m on c.Company_ID = m.Company_ID
            inner join ACCREDITATION a on c.Company_ID = a.Company_ID
        where
            -- Accreditation expired yesterday
            cast(a.Accred_ExpDate as DATE) = cast(DATEADD(DAY, -1, GETDATE()) as DATE)
            and m.IsMember_Ind = 1
            and (c.HQ_ID IS NULL OR c.HQ_ID = c.Company_ID)  -- FB4640: this isn't a 'team' co (with an HQ)
            -- and there is no action of this type created within 1 day
            -- of the expiry date
            and not exists (
                select * from TaskAction ta where
                    ta.FirstActionTypeId = @firstActionTypeId and
                    ta.TaskTypeId = @taskTypeId and
                    ta.TaskCreatedOn BETWEEN a.Accred_ExpDate AND DATEADD(DAY, 1, a.Accred_ExpDate) and
                    ta.EntityId = c.Company_ID and 
                    ta.EntityTypeId = 1 )

    open companies

    fetch next from companies into @companyId, @accreditationId

    declare @title nvarchar(max) = 
        (select AccredType_Name from ACCREDITATION_TYPE at 
        inner join ACCREDITATION a on at.AccredType_ID = a.AccredType_ID
        where a.Accred_ID = @accreditationId)

    declare @comment2 nvarchar(max) = isnull(@title, '') + ' accreditation for this company has expired.'
    while @@FETCH_STATUS = 0
    begin
        exec CreateSystemTask 
            @taskTypeId, 
            @firstActionTypeId,
            @nextActionTypeId,
            @companyid,
            @comment2,
            @title

        fetch next from companies into @companyId,@accreditationId
    end

    close companies
    deallocate companies
END 
```

上面 sp 中的以下 select 语句为我提供了正确的数据集，但循环的光标给了我不同的输出。

```
select c.Company_Id, a.Accred_ID
        from COMPANY c
            inner join MEMBERSHIP m on c.Company_ID = m.Company_ID
            inner join ACCREDITATION a on c.Company_ID = a.Company_ID
        where
            -- Accreditation expired yesterday
            cast(a.Accred_ExpDate as DATE) = cast(DATEADD(DAY, -1, GETDATE()) as DATE)
            and m.IsMember_Ind = 1
            and (c.HQ_ID IS NULL OR c.HQ_ID = c.Company_ID)  -- FB4640: this isn't a 'team' co (with an HQ)
            -- and there is no action of this type created within 1 day
            -- of the expiry date
            and not exists (
                select * from TaskAction ta where
                    ta.FirstActionTypeId = @firstActionTypeId and
                    ta.TaskTypeId = @taskTypeId and
                    ta.TaskCreatedOn BETWEEN a.Accred_ExpDate AND DATEADD(DAY, 1, a.Accred_ExpDate) and
                    ta.EntityId = c.Company_ID and 
                    ta.EntityTypeId = 1 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:58:22.747

您可以使用 while 循环摆脱光标，如下图所示。如果您查询的数据包含一个唯一标识符，您可以取消临时表，但对于您的示例，我使用了一个临时表并包含了一个 recordId。

```
ALTER PROCEDURE [dbo].[AccreditationExpiryCheck] 
AS 
BEGIN 
    SET NOCOUNT ON; 

    declare @taskTypeId int = 19 -- Accreditations, automated 
    declare @firstActionTypeId int = 23 -- Accreditation expiring 
    declare @nextActionTypeId int = 3 -- Call company 

    declare @companyId int 
    declare @accreditationId int 
    declare @comment nvarchar(max) = N' accreditation for this company has expired.'

    -- find all companies and accreditations expiring 
    select ROW_NUMBER() OVER(ORDER BY c.Company_Id, a.Accred_ID) as [RecordId], c.Company_Id as [Company_Id], a.Accred_ID as [Accred_ID]
    into #COMPANIES
        from COMPANY c 
            inner join MEMBERSHIP m on c.Company_ID = m.Company_ID 
            inner join ACCREDITATION a on c.Company_ID = a.Company_ID 
        where 
            -- Accreditation expired yesterday 
            cast(a.Accred_ExpDate as DATE) = cast(DATEADD(DAY, -1, GETDATE()) as DATE) 
            and m.IsMember_Ind = 1 
            and (c.HQ_ID IS NULL OR c.HQ_ID = c.Company_ID)  -- FB4640: this isn't a 'team' co (with an HQ) 
            -- and there is no action of this type created within 1 day 
            -- of the expiry date 
            and not exists ( 
                select * from TaskAction ta where 
                    ta.FirstActionTypeId = @firstActionTypeId and 
                    ta.TaskTypeId = @taskTypeId and 
                    ta.TaskCreatedOn BETWEEN a.Accred_ExpDate AND DATEADD(DAY, 1, a.Accred_ExpDate) and 
                    ta.EntityId = c.Company_ID and  
                    ta.EntityTypeId = 1 )

    declare @recordId int = 0;
    declare @title nvarchar(max);
    declare @comment2 nvarchar(max);

    while(1=1)
        begin
            select top 1 @recordId = [RecordId]
                        ,@companyId = [CompanyId]
                        ,@accreditationId = [Accred_ID]
            from #COMPANIES
            where [RecordId] > @recordId

            if @@ROWCOUNT = 0 break;

            set @title =  
                (select AccredType_Name from ACCREDITATION_TYPE at  
                inner join ACCREDITATION a on at.AccredType_ID = a.AccredType_ID 
                where a.Accred_ID = @accreditationId) 

            set @comment2 = isnull(@title, '') + ' accreditation for this company has expired.' 

                exec CreateSystemTask  
                    @taskTypeId,  
                    @firstActionTypeId, 
                    @nextActionTypeId, 
                    @companyid, 
                    @comment2, 
                    @title        
        end 

    drop table #COMPANIES 
END 
```

# javascript - 是否可以将外部数据用作 JavaScript 变量？

> ID：11983460
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:40:24.593
> 
> 标签：javascript, xml, google-visualization

我正在使用[谷歌图表工具](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)。

您可以通过链接查看示例。但我想使用 csv、xml、txt 或 excel 表等外部数据作为图表的来源。

```
 function drawRegionsMap() {
    var data = google.visualization.arrayToDataTable([
      ['Country', 'Popularity'],
      ['Germany', 200],
      ['United States', 300],
      ['Brazil', 400],
      ['Canada', 500],
      ['France', 600],
      ['RU', 700]
    ]); 
```

您可以看到我们在脚本中给出了诸如“德国”或“巴西”之类的名称。如上所述，是否可以从外部源中调用这些名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:45:14.967

是的。您将需要加载这些外部源并将它们转换为数组。所有这些都可以在 JavaScript 中完成，并且您可以通过 AJAX 加载外部资源。您可以在此处了解有关 AJAX 的更多信息：[wikipedia](http://en.wikipedia.org/wiki/Ajax_%28programming%29)、[w3schools](http://www.w3schools.com/ajax/default.asp)、[jQuery](http://api.jquery.com/jQuery.ajax/)。将文件中的数据加载到 JavaScript 中的字符串后，您仍然需要解析它，这取决于数据的格式。

# facebook - FB.setSize 或 FB.setAutoGrow 不适用于 pagetab 应用程序的高度

> ID：11983464
> 
> 赞同：1
> 
> 时间：2012-08-16T08:40:52.603
> 
> 标签：facebook, iframe, tabs, height, facebook-page

最近出现了这个问题，不知道为什么。我没有更改任何代码，所以我假设 Facebook 与它有关。

我制作应用程序以适应 Facebook 上的页面选项卡并调整 iframe 的高度，我一直使用以下方法：

```
<!DOCTYPE HTML>
<html>
<head>
<!-- Lots of code -->
</head>
<body>
<!-- Lots of code -->
<div id="fb-root"></div>
<script type="text/javascript">  
   window.fbAsyncInit = function() {
    FB.init({
     appId: '00000000000000' // A real ID of course
    });
    FB.Canvas.setAutoResize();

   };
     (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/sv_SE/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
  </script>
</body>
</html> 
```

如您所见，我正在使用 FB.Canvas.setAutoResize 方法来调整 iframe 的大小。现在，我知道此方法正在被删除，但我尝试使用 setAutoGrow() 和 setSize() 并传入特定的高度和宽度，但即使这样也行不通。当 iframe 的高度仅为 800 像素时，我创建的所有应用程序过去使用这些方法之一都可以正常工作，现在看起来都很糟糕。

非常感谢您的帮助！最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:32:56.097

**试试这个**

```
 <div id="fb-root">
</div>
<script type="text/javascript" language="javascript" src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript" language="javascript">
    FB.init({
        appId: 'APPID',
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true// parse XFBML
    });
    window.fbAsyncInit = function () {
        FB.Canvas.setSize();
    }

    FB.Canvas.setAutoGrow(7);
</script> 
```

# jquery - jQuery 从带有类的字符串创建一个 ui 列表

> ID：11983466
> 
> 赞同：1
> 
> 时间：2012-08-16T08:40:57.817
> 
> 标签：jquery, jquery-ui, list, jquery-ui-sortable

我有一个名为 allVals 的变量，其中包含我的项目列表，然后将其设置为 toString() 并且该列表是放在 div 中的。

这个列表我想成为一个列表项，它看起来像： -

```
<ul id="sortable">
  <li class="ui-state-default">Sat Nav</li>
  <li class="ui-state-default">Alloy Wheels</li>
  <li class="ui-state-default">etc etc</li>
</ul> 
```

这是我到目前为止所拥有的：http: [//jsfiddle.net/uJcB7/171/](http://jsfiddle.net/uJcB7/171/)

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:45:10.683

```
var target = $('.target');
var ul = $('<ul />');

target.append(ul);

$.each(allVals, function(_, item){
   ul.append('<li>' + item + '</li>');
}); 
```

**[演示](http://jsfiddle.net/mrobin/pnjma/)**

# containers - 容器不会在浏览器中保持 100%

> ID：11983467
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:40:59.253
> 
> 标签：containers

在某些浏览器中，我的容器不会保持 100% 的高度，Firefox 11 OS X 就是其中之一。

我还不能发布图片，但这里有一个网站链接 www.iodinemusic.co.uk

我是否需要某种技巧或方法来告诉不同的浏览器进行相应的调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:45:52.827

添加`display: table` 到 .container 类。

[这是iodinecss.css](http://www.iodinemusic.co.uk/iodinecss.css)的第 12行

# javascript - javascript/jquery 如何设置多个属性

> ID：11983469
> 
> 赞同：0
> 
> 时间：2012-08-16T08:41:07.150
> 
> 标签：javascript, jquery

我有这个for循环，它将选项附加到那个“optlist”；该值将设置为 manSel[i][0]，文本设置为 manSel[i][1]；我还想将属性 selected="selected" 设置为所有这些。我可以在同一个循环中执行此操作，还是应该再次遍历选项并将该属性添加到每个选项中。提前致谢！

```
for(var i = 0 ; i<manSel.length; i++){
  optlist.append($('<option/>').attr('value', manSel[i][0]).text(manSel[i][1]));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:42:55.883

尝试这个：

```
for(var i = 0 ; i<manSel.length; i++){
  optlist.append($('<option/>').attr({value: manSel[i][0], selected: "selected"}).text(manSel[i][1]));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:43:27.620

你可以用这个

```
optlist.append($('<option selected="selected"/>').attr('value', manSel[i][0]).text(manSel[i][1])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:45:39.083

要添加更多属性，请使用对象，这在 jQuery Docs 中有很好的解释，我的意思是这是[非常基本的东西](http://api.jquery.com/attr/)：

```
$ele.attr({ href: '', src: '' }) 
```

无论如何`value`都有一个特殊的方法`val()`：

```
$ele.val(value) 
```

并且`selected`是一个属性是用来与`prop()`.

```
$ele.prop('selected', true) 
```

# c# - 使用 Fluent NHibernate 从 Identity 类映射一个 Id

> ID：11983483
> 
> 赞同：0
> 
> 时间：2012-08-16T08:42:12.510
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试使用 Fluent NHibernate 从 Identity 类映射 Id。

身份等级：

```
public interface IValueObject<T> {
    bool SameValueAs(T other);
}

[Serializable]
public class Identity<TEntity> : IValueObject<Identity<TEntity>> {

    public long Id { get; protected set; }

    public Identity(long id) {
        this.Id = id;
    }

    protected Identity() { }

    public bool SameValueAs(Identity<TEntity> other) {
        return other != null && this.Id == other.Id;
    }
} 
```

模型：

```
public interface IEntity<T> {
    Identity<T> Identity { get; }
    bool SameIdentityAs(T other);
}

public class Employee: IEntity<Employee> {
    public virtual Identity<Employee> Identity { get; set; }
    public virtual string Name { get; set; }
} 
```

如何映射此员工？这种方式不起作用，在构建 SessionFactory 时出现以下异常：在“Employee”类中找不到属性“Id”的 getter

```
public class EmployeeMap : ClassMap<Employee> {

    public EmployeeMap() {
        Id(x => x.Identity.Id).GeneratedBy.Native();
        Map(x => x.Name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:07:15.147

不支持您尝试执行的操作。

有一个更长的解释，但特别是在使用 DB 生成的 id 时，您应该使用未包装的原生 int 或 long。

也就是说，您**可以**将 id 映射为实体中的私有字段，并使用包装器将其公开。这仍然不适用于 LINQ 查询，因此它的价值有限。

# c# - 长度为 9 的随机字符串碰撞

> ID：11983484
> 
> 赞同：0
> 
> 时间：2012-08-16T08:42:15.553
> 
> 标签：c#, .net

我想生成一个长度为 9 的随机字符串。

这是大约 10-15 次碰撞的代码。归功于[返回相同字符串的随机字符串生成器](https://stackoverflow.com/questions/1122483/c-sharp-random-string-generator)。谁能帮我生成一个真正随机的字符串？

```
 class Program
    {

        private static Random random = new Random((int)DateTime.Now.Ticks);
        private static object locker = new object();

        private static string RandomString(int size)
        {
            StringBuilder builder = new StringBuilder();
            char ch;
            for (int i = 0; i < size; i++)
            {
                lock (locker)
                {
                    ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
                }
                builder.Append(ch);
            }

            return builder.ToString();
        }

        static void Main(string[] args)
        {            
            Dictionary<string, string> dict = new Dictionary<string, string>();
            object locker2 = new object();

            ThreadPool.QueueUserWorkItem(new WaitCallback((obj) => {
                for (int i = 0; i < 5000000; i++)
                {
                    string random = RandomString(9);
                    lock (locker2)
                    {
                        if (!dict.ContainsKey(random))
                            dict[random] = random;
                        else
                            Console.WriteLine("Found");
                    }

                }
            }));

            ThreadPool.QueueUserWorkItem(new WaitCallback((obj) =>
            {
                for (int i = 0; i < 5000000; i++)
                {
                    string random = RandomString(9);
                    lock (locker2)
                    {
                        if (!dict.ContainsKey(random))
                            dict[random] = random;
                        else
                            Console.WriteLine("Found");
                    }

                }
            }));

            ThreadPool.QueueUserWorkItem(new WaitCallback((obj) =>
            {
                for (int i = 0; i < 5000000; i++)
                {
                    string random = RandomString(9);
                    lock (locker2)
                    {
                        if (!dict.ContainsKey(random))
                            dict[random] = random;
                        else
                            Console.WriteLine("Found");
                    }

                }
            }));

            ThreadPool.QueueUserWorkItem(new WaitCallback((obj) =>
            {
                for (int i = 0; i < 5000000; i++)
                {
                    string random = RandomString(9);
                    lock (locker2)
                    {
                        if (!dict.ContainsKey(random))
                            dict[random] = random;
                        else
                            Console.WriteLine("Found");
                    }

                }
            }));

            Console.ReadKey();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:08:54.583

即使使用没有约束的完全随机字符串，一旦生成大约 200 万个条目，您也可能会遇到冲突。共有 26^9 个字符串。一旦你达到它的平方根，即大约 230 万，碰撞就很可能发生。查看[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)。

你有几个选择：

*   显着增加可能字符串的数量。这意味着更长的字符串，可能还有更多的字符
*   跟踪现有值，并拒绝它们。
*   使用计数器并将其传递给所需大小的伪随机排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:24:03.907

使用[GUID](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)并将其压缩为您喜欢的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:16:58.377

它也可以执行，但如果您需要一个真正的随机数，您应该使用[RandomNumberGenerator](http://msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator.aspx)类。这为您提供了一个加密随机数，并将更好地分配随机性。当然，这仅在您需要加密随机字符串时才真正重要。这个[SO question](https://stackoverflow.com/questions/1257299/why-use-the-c-sharp-class-system-random-at-all-instead-of-system-security-crypto)在讨论差异方面做得很好。

# typo3 - 如何根据 TYPO3 中的顺序自定义页面？

> ID：11983488
> 
> 赞同：0
> 
> 时间：2012-08-16T08:42:42.440
> 
> 标签：typo3, typoscript, templavoila

在 TYPO3 4.7 和 Templavoila 1.7.0 上工作，我需要一种方法来根据当前页面在其导航级别中的顺序自定义模板的一个值。

具体来说，我需要将 div 的类属性更改为“左”或“右”，如果它是偶数或不均匀的。有没有办法用 Templavoila Typoscript-Attribute 来做到这一点？

例如：

*   主页
    *   第 1 页
        1.  页面 1.1 -> 渲染此页面时，我想将类属性设置为“左”
        2.  1.2页->“对”
        3.  1.3页->“左”
        4.  1.4页->“对”
    *   第2页
    *   第 3 页

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:05:53.510

如果有人更改页面的排序，TemplaVoila TypoScript 属性将失败。

我会尝试呈现一个菜单。使用 allWrap.cObject = TEXT 应该可以覆盖输出。因此，只需创建一个呈现类的菜单，并根据偶数或奇数呈现您需要的类。

！伪代码！

```
lib.getClass = HMENU
lib.getClass {
  1 = TMENU
  1.NO = 1
  1.NO {
    allWrap.cObject = TEXT
    allWrap.cObject.value = left
    allWrap.cObject.override = right
    allWrap.cObject.override {
      if.value = 1
      if.equals.data = REGISTER:count_HMENU_MENUOBJ
      if.equals.stdWrap.wrap = |%2
      if.equals.prioriCalc = 1
    }
  }
} 
```

没有测试代码，所以如果它不起作用，请检查语法。可能停用覆盖，检查值 REGISTER:count_HMENU_MENUOBJ 但我想它应该是你需要的寄存器。

# jquery - jquery - $.map - 返回元素未正确附加

> ID：11983489
> 
> 赞同：1
> 
> 时间：2012-08-16T08:42:48.230
> 
> 标签：jquery

使用 $.map 函数，我正在循环一个对象并附加我制作的元素。但我的情况是，我得到了正确的控制台信息，但最后只返回了附加的对象，我的代码有什么问题？

我的代码：

```
 $('body').append(
 $.map(val.fields, function (val, i) {
     var element;
     if (val.label) {
         element = $('<label />', {
             text: val.label
         });
         console.log(element); //properly consoles 3 lables but not appending why?
     }
     if (val.type) {
         element = val.type === 'text' || val.type === 'submit' ? $('<input />', {
             type: val.type,
             name: val.name,
             value: val.value,
             id: val.vlaue
         }) : val.type === 'select' ? $('<select />', {
             name: val.name
         }) : '';
         console.log(element); // properly console 3 element and only this is appending
     }

     return element;
 })) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:00:38.670

问题似乎与调用返回的对象类型有关`$.map`。

如果您将地图调用更改为`return element[0]`（创建的实际 dom 元素而不是包装的 jQuery 对象），那么它可以工作：

```
$('body').append(
     $.map(val.fields, function (val, i) {
         var element;
         if (val.label) {
             element = $('<label />', {
                 text: val.label
             });
             console.log(element); //properly consoles 3 lables but not appending why?
         }
         if (val.type) {
             element = val.type === 'text' || val.type === 'submit' ? $('<input />', {
                 type: val.type,
                 name: val.name,
                 value: val.value,
                 id: val.vlaue
             }) : val.type === 'select' ? $('<select />', {
                 name: val.name
             }) : '';
             console.log(element); // properly console 3 element and only this is appending
         }

         return element[0]; // <----- Added [0] here
     })
) 
```

示例 - [http://jsfiddle.net/nhds6/](http://jsfiddle.net/nhds6/)

这是假设总会有一个元素。如果不是这种情况，您可能想要添加一些错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:59:13.023

您可能误解了 map 的作用。

> $.map() 方法将函数应用于数组或对象中的每个项目，并将结果映射到新数组中。

您可能需要考虑添加一个 jQuery 集合：

```
var collection = $();

$.map(val.fields, function (val,i) {
    var element;
    if(val.label){
        element = $('<label />',{text:val.label});
        collection.add(element);
    }
    if(val.type) {
        element =   val.type === 'text' || val.type === 'submit' ? $('<input />',{
            type:val.type,
            name:val.name,
            value:val.value,
            id:val.vlaue
        }) :
        val.type === 'select' ? $('<select />',{name:val.name}) : '';
        collection.add(element);
    }
});

$('body').append(collection); 
```

user338128 答案的主要区别在于您不需要多个循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:55:13.423

您传递给的回调函数一次`$.map`只能返回一件事`element`，但是如果连续使用两个`if`语句，您可能会尝试创建两件事 - 但如果您确实创建了两个元素，则只有第二个元素最终出现`element`在你回来。

如果`val.label`和`val.type`都设置并且`val.label`应该优先，则将第二个更改`if`为`else if`.

如果您需要能够同时创建两者，那么可能`$.map`不是最好的方法。

# javascript - Office Communicator 2007 从 javascript 发送消息

> ID：11983492
> 
> 赞同：1
> 
> 时间：2012-08-16T08:42:51.873
> 
> 标签：javascript, office-communicator

我正在尝试通过链接打开 OC 聊天。目前正在使用这样的代码：

```
window.open("sip:name@domain.com"); 
```

但我想要一条自定义消息，就像处理电子邮件一样

```
window.location  = "mailto:email@address.com?Subject=subject&body=body"; 
```

所以它可能看起来像这样：

```
window.open("sip:name@domain.com?message=messageText"); 
```

可能吗？

# java - 如何在 Hibernate 中使用没有 PRIMARY KEY 的表？

> ID：11983493
> 
> 赞同：1
> 
> 时间：2012-08-16T08:42:54.313
> 
> 标签：java, hibernate, class, postgresql

我有桌子

```
CREATE TABLE test_wopk
(
  id integer,
  "name" character(25),
  age integer
) 
```

在休眠中进行反向工程之后，我得到了一个类和映射文件。

TestWopk.java

```
package gen;

// Generated 16.08.2012 14:08:26 by Hibernate Tools 3.4.0.CR1

/**
 * TestWopk generated by hbm2java
 */
public class TestWopk implements java.io.Serializable
{

private TestWopkId id;

public TestWopk()
{
}

public TestWopk(TestWopkId id)
{
    this.id = id;
}

public TestWopkId getId()
{
    return this.id;
}

public void setId(TestWopkId id)
{
    this.id = id;
}

} 
```

TestWopkId.java

```
package gen;

// Generated 16.08.2012 14:08:26 by Hibernate Tools 3.4.0.CR1

/**
 * TestWopkId generated by hbm2java
 */
public class TestWopkId implements java.io.Serializable
{

private Integer id;
private String name;
private Integer age;

public TestWopkId()
{
}

public TestWopkId(Integer id, String name, Integer age)
{
    this.id = id;
    this.name = name;
    this.age = age;
}

public Integer getId()
{
    return this.id;
}

public void setId(Integer id)
{
    this.id = id;
}

public String getName()
{
    return this.name;
}

public void setName(String name)
{
    this.name = name;
}

public Integer getAge()
{
    return this.age;
}

public void setAge(Integer age)
{
    this.age = age;
}

public boolean equals(Object other)
{
    if ((this == other))
        return true;
    if ((other == null))
        return false;
    if (!(other instanceof TestWopkId))
        return false;
    TestWopkId castOther = (TestWopkId) other;

    return ((this.getId() == castOther.getId()) || (this.getId() != null && castOther.getId() != null && this.getId()
            .equals(castOther.getId())))
            && ((this.getName() == castOther.getName()) || (this.getName() != null && castOther.getName() != null && this
                    .getName().equals(castOther.getName())))
            && ((this.getAge() == castOther.getAge()) || (this.getAge() != null && castOther.getAge() != null && this
                    .getAge().equals(castOther.getAge())));
}

public int hashCode()
{
    int result = 17;

    result = 37 * result + (getId() == null ? 0 : this.getId().hashCode());
    result = 37 * result + (getName() == null ? 0 : this.getName().hashCode());
    result = 37 * result + (getAge() == null ? 0 : this.getAge().hashCode());
    return result;
}

} 
```

TestWopk.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 16.08.2012 14:08:26 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="gen.TestWopk" table="test_wopk">
    <composite-id name="id" class="gen.TestWopkId">
        <key-property name="id" type="java.lang.Integer">
            <column name="id" />
        </key-property>
        <key-property name="name" type="string">
            <column name="name" length="25" />
        </key-property>
        <key-property name="age" type="java.lang.Integer">
            <column name="age" />
        </key-property>
    </composite-id>
</class>
</hibernate-mapping> 
```

我想从数据库中获取数据。

```
 Session session = HibernateUtil.currentSession();

    Transaction tx= session.beginTransaction();
    //чтение из бд
     List list = session.createQuery("from TestWopk").list();
 Iterator itr = list.iterator();
 while(itr.hasNext()){
   TestWopk test = (TestWopk) itr.next();
   System.out.print("EmpName: "+ test.getId());
   System.out.print(" EmpSal: "+ test.getName());
   System.out.print(" EmpSal: "+ test.getAge());
   System.out.println();
 }
    tx.commit();

    HibernateUtil.closeSession(); 
```

并得到错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
The method getName() is undefined for the type TestWopk
The method getAge() is undefined for the type TestWopk

at net.sf.hibernate.examples.quickstart.hib_main.main(hib_main.java:67) 
```

请告诉我如何使用由休眠生成的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:52:16.190

就像编译错误告诉您的那样，您的 TestWopk.java 类没有 getName() 和 getAge() 方法。将您的 while 循环更改为

```
 while(itr.hasNext()){    
        TestWopk test = (TestWopk) itr.next();
        System.out.print("EmpName: " + test.getId().getId());
        System.out.print(" EmpSal: " + test.getId().getName());
        System.out.print(" EmpSal: " + test.getId().getAge());
        System.out.println();
    } 
```

# c# - 通过 ADO.NET 在 Oracle 和 SQL Server 上的 C# 事务失败

> ID：11983496
> 
> 赞同：1
> 
> 时间：2012-08-16T08:43:03.453
> 
> 标签：c#, oracle, sql-server-2008, ado.net, transactions

我用 C# 编写了一个类，旨在提供在给定数据库连接上运行数据库事务的能力。但是，当我尝试运行代码时，我分别在 Oracle 和 SQL Server 上收到以下两个错误。查看我的代码是否有解决此问题的简单方法？

**甲骨文**

> *连接已经是本地或分布式事务的一部分*

**SQL Server 2008**

> *SqlConnection 不支持并行事务*

**基类**

```
 public abstract class DbFactoryDatabaseTransaction
  {
    public void DoTransaction(IDatabaseConnectivityObjectBasicResponse databaseConnectivityObject)
    {
        databaseConnectivityObject.PrepareConnection();

        DbTransaction dbTransaction = databaseConnectivityObject.DBFactoryDatabaseConnection.BeginTransaction();

        try
        {
            ExecuteSql(databaseConnectivityObject, dbTransaction);

            dbTransaction.Commit();
        }
        catch (Exception ex)
        {
            dbTransaction.Rollback();

            databaseConnectivityObject.Close();

            throw;
        }
        finally
        {
            dbTransaction.Dispose();
        }
    }

    /// <summary>
    /// A method to allow the caller to decide how the SQL statements are called as part of a transaction
    /// </summary>
    public abstract void ExecuteSql(IDatabaseConnectivityObjectBasicResponse databaseConnectivityObject, DbTransaction dbTransaction);
} 
```

**覆盖方法**

```
public override void ExecuteSql(IDatabaseConnectivityObjectBasicResponse databaseConnectivityObject, DbTransaction dbTransaction)
    {
        //oracle
        List<string> transactions = new List<string>
            {
                "INSERT INTO TMA_NOT_TO_ENTITY_QUEUE (RECEIVED_NOTICE_ID, NOTICE_TEXT, STATE_ID, TIME_RECEIVED) VALUES (1, 'This is a notice', 1, to_date('2012/08/15', 'yyyy/mm/dd'))",
                "INSERT INTO TMA_NOT_TO_ENTITY_QUEUE (RECEIVED_NOTICE_ID, NOTICE_TEXT, STATE_ID, TIME_RECEIVED) VALUES (2, 'This is a notice', 1, to_date('2012/08/15', 'yyyy/mm/dd'))",
                "INSERT INTO TMA_NOT_TO_ENTITY_QUEUE (RECEIVED_NOTICE_ID, NOTICE_TEXT, STATE_ID, TIME_RECEIVED) VALUES (3, 'This is a notice', 1, to_date('2012/08/15', 'yyyy/mm/dd'))",
                "INSERT INTO TMA_NOT_TO_ENTITY_QUEUE (RECEIVED_NOTICE_ID, NOTICE_TEXT, STATE_ID, TIME_RECEIVED) VALUES (4, 'This is a notice', 1, to_date('2012/08/15', 'yyyy/mm/dd'))",
                "INSERT INTO TMA_NOT_TO_ENTITY_QUEUE (RECEIVED_NOTICE_ID, NOTICE_TEXT, STATE_ID, TIME_RECEIVED) VALUES (5, 'This is a notice', 1, to_date('2012/08/15', 'yyyy/mm/dd'))",
                "INSERT INTO TMA_NOT_TO_ENTITY_QUEUE (RECEIVED_NOTICE_ID, NOTICE_TEXT, STATE_ID, TIME_RECEIVED) VALUES (6, 'This is a notice', 1, to_date('2012/08/15', 'yyyy/mm/dd'))"
            };

        databaseConnectivityObject.DBFactoryDatabaseCommand.Transaction = databaseConnectivityObject.DBFactoryDatabaseConnection.BeginTransaction();

        foreach (var transaction in transactions)
        {
            databaseConnectivityObject.DBFactoryDatabaseCommand.CommandText = transaction;
            databaseConnectivityObject.DBFactoryDatabaseCommand.CommandType = CommandType.Text;
            databaseConnectivityObject.DBFactoryDatabaseCommand.Transaction = dbTransaction;
            databaseConnectivityObject.DBFactoryDatabaseCommand.ExecuteNonQuery();
        }
    } 
```

**调用方法**

```
 public void RunTransaction()
        {
        IDatabaseConnectivityObjectBasicResponse databaseConnectivityObject = new DbProviderFactoryConnectionBasic();

        DoTransaction(databaseConnectivityObject);
        } 
```

**测试方法**

```
 [TestMethod()]
    public void RunTransactionTest()
    {
        TmaNoticeToClusteredEntityValidation target = new TmaNoticeToClusteredEntityValidation(BindVariables, SqlFactory, Dialect); 
        target.RunTransaction();
        Assert.Inconclusive("A method that does not return a value cannot be verified.");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:47:29.707

事实证明，问题实际上是我在连接对象上调用 BeginTransaction 两次（）。这是通过`databaseConnectivityObject.DBFactoryDatabaseCommand.Transaction = databaseConnectivityObject.DBFactoryDatabaseConnection.BeginTransaction();` 从覆盖方法中删除来解决的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:51:39.400

只需在覆盖时省略这一行

```
databaseConnectivityObject.DBFactoryDatabaseCommand.Transaction = databaseConnectivityObject.DBFactoryDatabaseConnection.BeginTransaction(); 
```

并改变这个

```
databaseConnectivityObject.DBFactoryDatabaseCommand.Transaction = dbTransaction; 
```

到

```
databaseConnectivityObject.DBFactoryDatabaseCommand.Connection= databaseConnectivityObject.DBFactoryDatabaseConnection; 
```

# google-chrome-devtools - Chrome 开发人员工具中的响应选项卡内容被以后的 HTTP 响应覆盖？

> ID：11983499
> 
> 赞同：0
> 
> 时间：2012-08-16T08:43:17.133
> 
> 标签：google-chrome-devtools

HTTP 响应主体的 Chrome 开发人员工具演示中是否存在错误？在那种情况下 - 任何已知的解决方法？

我正在使用 Chrome 开发者工具来查看 HTTP 响应。我使用相同的 URL 执行 PUT，然后执行 GET。在检查 PUT 和 GET 的响应时，它们是相同的。我正在使用“网络”下的“响应”选项卡，它显示了 HTTP 响应的正文。“标题”选项卡中的响应代码对于 PUT 是正确的，但“响应”选项卡显示 GET 响应的内容（正文）。

Chrome 开发人员保留的第一个请求（PUT）的响应主体似乎被来自 GET 的相同 URL 的后续响应主体覆盖。

我已经尝试过使用 Firefox 开发人员工具，并且 PUT 和 GET 的响应正文是正确的（并且不一样）。RESTClient 也显示了正确的结果。所以我非常相信 REST 服务可以正常工作。

这可能是我错过的一些设置，但是使用我正在使用的任何设置用后来的 GET 的响应覆盖来自 PUT 的响应似乎很奇怪？

我正在使用在 Mac OSX 10.7.4 上运行的 Chrome 版本 21.0.1180.75。

我不确定这是否已经被报道过，我可以找到类似的报道，即 [http://productforums.google.com/forum/#!category-topic/chrome/report-a-problem-and-get-troubleshooting -帮助/iRKQd3rL3NY%5B1-25%5D](http://productforums.google.com/forum/#!category-topic/chrome/report-a-problem-and-get-troubleshooting-help/iRKQd3rL3NY%5B1-25%5D)

但这似乎不是完全相同的问题。

这是一个已知问题吗？有什么补救措施吗？我当然可以使用其他工具，但我对 Chrome 开发者工具很满意。

/ 垫子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:17:49.357

这已在刚刚发布的 Google Chrome 版本 21.0.1180.82 中得到修复。

在现在最新的版本 (21.0.1180.82) 中，我已经完成了相同的 PUT，然后是在早期版本 (21.0.1180.75 和 21.0.1180.79) 中存在错误的 GET。我在 21.0.1180.82 工作正常，显示 GET 和 PUT 的不同响应主体。

结案。

# javascript - 我无法让脚本在不同的浏览器中正常运行？

> ID：11983501
> 
> 赞同：0
> 
> 时间：2012-08-16T08:43:22.697
> 
> 标签：javascript, html, xml, google-maps-api-3, kml

我在使用以下代码时遇到问题：

```
function initialize() {
            //myLatLng = new google.maps.LatLng(37.422104808,-122.0838851);

            var myOptions = {
                zoom: 18,
                center: new google.maps.LatLng(42.564613,-70.809087),
                // zoom: 5,
                // center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"),
                  myOptions);

   geoXml = new geoXML3.parser({
                map: map,
                singleInfoWindow: true,
                afterParse: useTheData
            });
            geoXml.parse('ActivityStatus_Producing_labels.kml');
        };
function kmlClick(marker) {
  google.maps.event.trigger(geoXml.docs[0].markers[marker],"click");
}

function useTheData(doc){
  // Geodata handling goes here, using JSON properties of the doc object
 var sidebarHtml = "<table>";
 for (var i = 0; i < doc[0].markers.length; i++) {
 // console.log(doc[0].markers[i].title);
sidebarHtml += '<tr><td><a     href="javascript:kmlClick('+i+');">'+doc[0].placemarks[i].name+'</a></td></tr>';
  } 
```

我收到一个错误，即 doc[0].markers.length 无法从 null 或不存在的变量中获取长度，具体取决于我使用的浏览器。

在这个网站上： http: [//thoughtfi.com/geoxmlpractice/practiceIMR2.html](http://thoughtfi.com/geoxmlpractice/practiceIMR2.html)我可以让它在 Chrome 但不是 IE 中运行

该网站在 IE 和 Chrome 中运行，代码几乎相同：[http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_us_states_kml_test.html](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_us_states_kml_test.html)

我怎样才能让我的网站正常工作？我猜它没有及时解析kml文件，或者服务器/浏览器解析kml太慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:03:07.277

它似乎是 kml 文件。IE 不认为它是有效的 xml。feedvalidator 也没有： [http ://www.feedvalidator.org/check.cgi?url=http%3A%2F%2Fthoughtfi.com%2Fgeoxmlpractice%2FActivityStatus_Producing_labels.kml#l675](http://www.feedvalidator.org/check.cgi?url=http%3A%2F%2Fthoughtfi.com%2Fgeoxmlpractice%2FActivityStatus_Producing_labels.kml#l675)

如果我修复了无效的 xml（以及 xml 文件报告的字符编码），它对我有用：

[http://www.geocodezip.com/geoxml3_test/thoughtfi_com_geoxmlpractice_practiceIMR2a.html](http://www.geocodezip.com/geoxml3_test/thoughtfi_com_geoxmlpractice_practiceIMR2a.html)

[这是另一个](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/ActivityStatus_Producing_labelsA_kml.xml)显示“固定”kml 的示例

[您还可以查看 Google 地图对您的 kml 的看法](https://maps.google.com/maps?q=http%3a%2F%2Fthoughtfi.com%2Fgeoxmlpractice%2FActivityStatus_Producing_labels.kml&hl=en&sll=44.999706,45.000086&sspn=0.011805,0.01929&t=m&z=16)：

> [http://thoughtfi.com/geoxml](http://thoughtfi.com/geoxml) ... 无法显示，因为它不是有效的 KML 或 KMZ 文件。

# iphone - 无法使用 iPhone 应用程序启动 facebook

> ID：11983505
> 
> 赞同：0
> 
> 时间：2012-08-16T08:43:42.127
> 
> 标签：iphone, objective-c, ios, facebook, xcode4

我正在将 facebook 集成到我的 iphone 应用程序中。为此，我下载`FacebookSDK`并将其包含在我的项目中。

我不知道我哪里出错了，因为当我通过我的应用程序启动 facebook 时出现以下错误

> +[FBSession openActiveSessionWithPermissions:allowLoginUI:completionHandler:]：无法识别的选择器发送到类 0x1a680c 2012-08-14 15:13:37.894 RightHand[11822:15803] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+[FBSession openActiveSessionWithPermissions:allowLoginUI:completionHandler:]: 无法识别的选择器发送到类**强文本**

谁能帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:47:21.360

请注意您添加到项目中的框架！

是“FacebookSDK.framework”

不是“FBiOSSDK.framework”

# search-engine - haystack 如何使用 elasticsearch 检索所有索引

> ID：11983510
> 
> 赞同：1
> 
> 时间：2012-08-16T08:44:01.423
> 
> 标签：search-engine, elasticsearch, django-haystack

版本：[django-haystack v2.0.0-beta pyelasticsearch(toastdriven) 0.0.5 elasticsearch0.18.5] 我正在尝试将 haystack 与 elasticsearch 一起使用。我已经完成`[了 Haystack 入门](http://django-haystack.readthedocs.org/en/latest/tutorial.html)`中的步骤，并且工作正常。我可以使用创建`Note`模型索引`python manage.py rebuild_index`，并成功检索索引`Note`。现在我有两个索引文件夹，一个名为`haystack`haystack 创建的，另一个`bolg`名为`curl -XPUT`. 但 haystack 只能检索文件夹中的索引`haystack`。如何让 haystack 检索索引`blog`？如何使用 haystack 检索所有索引（其中一些可能从其他机器复制）？``

 ``* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T17:45:53.750

在新应用程序中放置一个不同的 search_indexes.py。Haystack 会自动拾取文件。当您运行rebuild_index 时，它也会索引其他应用程序。``

# objective-c - 是否可以在模型窗口上显示 NSAlert/NSAlertPanel

> ID：11983512
> 
> 赞同：1
> 
> 时间：2012-08-16T08:44:06.980
> 
> 标签：objective-c, macos, nsalert

我正在使用 runModelForWindow 显示一个模型窗口，我在这个模型窗口中有一个按钮，每当用户点击这个按钮时，我需要在不关闭模型窗口的情况下显示一个警报面板。这可能吗？我试过显示 NSAlertPanel，它是在模型窗口后面，所以用户看不到它。请给我一些建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:19:53.130

在运行我的警报面板之前使用以下两行后，模型窗口顶部会出现警报。

```
ProcessSerialNumber psn = {0, kCurrentProcess};
TransformProcessType(&psn, kProcessTransformToForegroundApplication); 
```

NSAlert *alert = [NSAlert alertWithMessageText:@"Alert Text" defaultButton:@"OK" alternateButton:@"Cancel" otherButton:nil informativeTextWithFormat:@""];

```
NSInteger alertRetVal =[alert runModal]; 
```

# iphone - 如何解析简单的xml

> ID：11983514
> 
> 赞同：0
> 
> 时间：2012-08-16T08:44:11.533
> 
> 标签：iphone, ipad

```
 <NewDataSet>
      <Table>
        <CaseId>743</CaseId>
        <PartyId>11100550</PartyId>
        <CartId>18</CartId>

      </Table>
      <Table>
        <CaseId>742</CaseId>
        <PartyId>11100549</PartyId>
        <CartId>1148</CartId>
        <BusinessID>19</BusinessID>

      </Table>
    </NewDataSet>

        NSData* data = [xmlResponseData dataUsingEncoding:NSUTF8StringEncoding];

    //   NSXMLParser *XMLparser = [[NSXMLParser alloc] initWithData:data];
    //    [XMLparser setDelegate:self];

        BOOL success;

        if (XMLparser) // addressParser is an NSXMLParser instance variable
            [XMLparser release];

        XMLparser = [[NSXMLParser alloc] initWithData:data];
        [XMLparser setDelegate:self];
        [XMLparser setShouldResolveExternalEntities:YES];

        success = [XMLparser parse];   // return value not used
        // if not successful, delegate is informed of error 

       if(success)
            NSLog(@"Sucess Parsed");
        else
            NSLog(@"Error Error Error!!!");

    //  NSLog(@"Parsed string : %@",valueForItem);

    }

    - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
        attributes:(NSDictionary *)attributeDict {

        if([elementName isEqualToString:@"NewDataSet"]) {
            caseID_List = [[NSMutableArray alloc]init];
        }
        NSLog(@"Processing Element: %@", elementName);

        if ([elementName isEqualToString:@"CaseId"]) {

        }

    }

    - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

        if(!currentElementValue) 
            currentElementValue = [[NSMutableString alloc] initWithString:string];
        else
            [currentElementValue appendString:string];

        NSLog(@"Processing Value: %@", currentElementValue);

    }

    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

      if([elementName isEqualToString:@"NewDataSet"]) 
return;
    } 
```

我只需要 CaseId 从给定的 xml 中存储。任何人都可以就这个简单的解析给我建议！

对我来说它是循环的！并获取所有详细信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:16:46.870

使用下面的代码。其中表是 NSObject 类，其中 CaseId、PartyId、CartId 作为此类中的一个属性。如果您有 xml url，只需使用 URl 调用 loadXMLByURL 方法。解析后，您将获得 TableArray 中的每个对象，其中包含表具有上述属性的对象。

```
NSMutableString *currentNodeContent;
NSXMLParser     *parser;
Tweet           *currentTweet;
bool            isStatus;

-(id) loadXMLByURL:(NSString *)urlString
{
    _tweets         = [[NSMutableArray alloc] init];
    NSURL *url      = [NSURL URLWithString:urlString];
    NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
    parser          = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

    - (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
    {
        if ([elementname isEqualToString:@"Table"]) 
        {
            currentTable = [Table alloc];
                isStatus = YES;
        }
    }

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (isStatus) 
    {
        if ([elementname isEqualToString:@"CaseId"]) 
        {
            currentTable.CaseId = currentNodeContent;
        }
        if ([elementname isEqualToString:@"PartyId"]) 
        {
            currentTable.PartyId = currentNodeContent;
        }
        if ([elementname isEqualToString:@"CartId"]) 
        {
            currentTable.CartId = currentNodeContent;
        }

    }
    if ([elementname isEqualToString:@"Table"]) 
    {
        [self.tableArray addObject:currentTable];
        currentTable = nil;
        currentNodeContent = nil;
    }
} 
```

如果您有任何疑问，请告诉我。

# ant - 在 sublime text 2 中指定和切换蚂蚁目标

> ID：11983519
> 
> 赞同：7
> 
> 时间：2012-08-16T08:44:38.197
> 
> 标签：ant, build, sublimetext2, targets

我将 Sublime Text 2 与 ant 构建系统一起使用。CTRL+B 可以很好地使用默认目标开始构建。但是我的问题是，有没有办法定义不同的 ant 构建目标并有一种机制可以在它们之间轻松切换？

我考虑过为每个目标创建额外的自定义构建命令——例如“clean”。它有效，但在我看来这不是最好的方法，因为您必须转到“工具 > 构建系统 > Ant (clean)”，然后按 CTRL+B。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T15:06:46.303

将此构建文件保存为 Packages/User 文件夹中的 *.sublime-build 文件

```
{
    "selector": "source.java",
    "cmd": ["ant"],

    "variants": [

        { "cmd": ["solve_world_hunger"],
          "name": "Solve World Hunger"
        },

        { "cmd": ["ant", "clean"],
          "name": "Run"
        }
    ]
} 
```

*   默认目标将建立在`ctrl+b`
*   数组中命名`Run`的cmd将在`variants``ctrl+shift+b`
*   变体数组中的任何 cmd 都可以通过命令面板搜索来运行`name`。即点击`ctrl+shift+p`并键入`Solve World Hunger`以运行解决世界饥饿命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:57:45.987

您可以声明变体，如其他解决方案中所示。我还想将此添加到我的用户键绑定中：

```
{ 
    "keys": ["ctrl+b"],
    "command": "show_overlay",
    "args": {"overlay": "command_palette", "text": "Build:"}
}, 
```

有了这个，你可以点击 ctrl+b 然后然后输入默认构建，或者开始输入变体类型。c 用于清洁 r 用于释放，无论如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T16:33:56.263

这是我必须做的让我在 Windows 7 上工作，就像上面的答案一样，将它保存在您的 Packages/User 文件夹中，然后您可以通过按 ctrl+shift+p 并输入命令的名称来触发不同的构建目标在下面脚本的变体部分中。

希望这可以帮助一些人:)

```
{
    "working_dir": "${project_path:${folder}}",
    "selector": "source.java",

    // DEFAULT COMMAND TO EXECUTE FOR A BUILD SCRIPT ** OPTIONAL **
    //"cmd": ["ant.bat", "deploy_test"],

    "variants": 
    [

        { "cmd": ["ant.bat", "deploy_test"],
          "name": "Laravel Deploy Dev"
        },

        { "cmd": ["ant.bat", "deploy_delete"],
          "name": "Laravel Delete"
        }
    ]
} 
```

# android - 通过拖放移动图像

> ID：11983520
> 
> 赞同：0
> 
> 时间：2012-08-16T08:44:44.970
> 
> 标签：android

我正在制作一个 android 应用程序，我想在其中将图像从一个单元格移动到另一个单元格。我正在关注[这里](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html)的链接。问题是我正在让类扩展活动，同时扩展视图并在那里实现。见下文

我的课

```
 public class GameActivity extends Activity
    implements OnTouchListener 
```

示例中的类

```
 public class TouchExampleView extends View 
```

它在 OnDraw() 方法上显示错误。我可以理解它是在视图类中定义的，但我该如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:55:58.503

活动文件。

```
windowwidth = getWindowManager().getDefaultDisplay().getWidth();
windowheight = getWindowManager().getDefaultDisplay().getHeight();

tv1 = (ImageView)findViewById(R.id.image);
tv1.setOnTouchListener(new View.OnTouchListener() {         

@Override
public boolean onTouch(View v, MotionEvent event) {
    layoutParams1 = (RelativeLayout.LayoutParams) tv1.getLayoutParams();
    switch(event.getActionMasked())
    {
        case MotionEvent.ACTION_DOWN:
            break;
        case MotionEvent.ACTION_MOVE:
            int x_cord = (int) event.getRawX();
            int y_cord = (int) event.getRawY();
            if (x_cord > windowwidth) {
                x_cord = windowwidth;
            }
            if (y_cord > windowheight) {
                y_cord = windowheight;
            }
            layoutParams1.leftMargin = x_cord - 25;
            layoutParams1.topMargin = y_cord - 75;
            tv1.setLayoutParams(layoutParams1);
            break;
        default:
            break;
    }
    return true;
}
});

tv2 = (ImageView)findViewById(R.id.image1);
tv2.setOnTouchListener(new View.OnTouchListener() {         

@Override
public boolean onTouch(View v, MotionEvent event) {
    layoutParams2 = (RelativeLayout.LayoutParams) tv2.getLayoutParams();
    switch(event.getActionMasked())
    {
        case MotionEvent.ACTION_DOWN:
            break;
        case MotionEvent.ACTION_MOVE:
            int x_cord = (int) event.getRawX();
            int y_cord = (int) event.getRawY();
            if (x_cord > windowwidth) {
                x_cord = windowwidth;
            }
            if (y_cord > windowheight) {
                y_cord = windowheight;
            }
            layoutParams2.leftMargin = x_cord - 25;
            layoutParams2.topMargin = y_cord - 75;
            tv2.setLayoutParams(layoutParams2);
            break;
        default:
            break;
     }
     return true;
  }
}); 
```

XML 文件：-

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
 <ImageView 
    android:layout_width="100dp" 
    android:layout_height="100dp"
    android:id="@+id/imageview1" 
    android:src="@drawable/image1"  />    
 <ImageView
    android:layout_width="100sp" 
    android:layout_height="100sp" 
    android:id="@+id/imageview2"
    android:src="@drawable/image2"   />             
</RelativeLayout> 
```

看到这个

[Android 在屏幕上拖放图像？](https://stackoverflow.com/questions/11027792/android-drag-and-drop-images-on-the-screen)

# php - 如何为每个用户在我的表中放置默认图像？

> ID：11983528
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:45:18.693
> 
> 标签：php, mysql, html

我正在将 PHP 与 MYSQL 一起使用，并希望添加一个功能来上传个人资料图像。如果用户尚未上传他的图像​​，我想显示默认图像。我已将数据库的配置文件图像字段声明为 BLOB。在这种情况下，我没有选择直接通过数据库放置默认图像。请帮忙 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:48:30.800

在您的代码中处理它。无需将相同的图像复制到每个用户的数据库字段中。

```
if (!$user['image']) {
    // output default image
} else {
    // output $user['image']
} 
```

实际上，您应该首先将图像存储在数据库之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:47:07.840

与其存储相同的 blob 图像可能数千/数百万次，不如让您的 PHP 代码做一些检查 - 如果该字段为空，请将其指向文件系统上某个用于它们的文件。如果那里有数据，*则*使用用户数据行中的图像。

在那一点上，您实际上[不能](http://dev.mysql.com/doc/refman/5.5/en/blob.html)为 blob 分配默认值。

但是，您*可以*这样做：在数据库中创建第二个表并将 blob 插入其中。然后在您正在使用的表上创建一个`on insert`触发器，插入完成后，使用如下内容：

```
UPDATE BLOB_table SET BLOB_field = (select defaultBlob from othertableName); 
```

但话虽如此，浪费可能数百万行 blob 应该会让你畏缩。如果在行中找不到 blob，请检查您的 PHP 代码并指定一个默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:50:49.493

我的应用程序中有类似的功能。如果没有上传图片，我将重定向返回到默认图片：

```
if (mysql_num_rows($data) == 0) {
  header("Location: $default_image_url");
} else {
  // Code to output image
} 
```

# buddypress - 更改 buddypress 插件中的注册提交值

> ID：11983530
> 
> 赞同：0
> 
> 时间：2012-08-16T08:45:26.557
> 
> 标签：buddypress

我想在 buddypress 插件中将 Complete Sign Up 更改为其他值。我正在更改位于 bp_theme/register/register.php 的注册页面。但它显示了以前的价值。请问我该怎么办...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:31:16.340

我的建议只是删除或注释 register.php 文件代码并为简单的创建新注册表单代码进行新开发，但这里的问题是您遵循 Buddypress 规则是自定义表单数据与 Buddypress 存储相同。这是完成和满足您所有要求的简单方法。

# c# - 是否可以在此代码中避免多个 IF？

> ID：11983531
> 
> 赞同：2
> 
> 时间：2012-08-16T08:45:34.057
> 
> 标签：c#, if-statement

我有这种和平的代码。我必须检查 XML 中的每个级别以避免 NULL 异常。我可以改进这段代码吗？

```
private void GetFunctionsValues(XElement x)
    {
        if (x.Element("credentials") != null)
        {
            if (x.Element("credentials").Element("faccess") != null)
            {
                foreach (var access in x.Element("credentials").Element("faccess").Elements("access"))
                {
                    if (access.Attribute("db_id") != null)
                    {
                        if (int.Parse(access.Attribute("db_id").Value) == 19) FuncPlus = true;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T08:48:51.507

您可以将两个嵌套`if`在一个中折叠：

```
if (x.Element("credentials") != null && x.Element("credentials").Element("faccess") != null ) 
```

第一个评估为 false 阻止执行第二个，因此没有空引用异常。这种行为通常称为“短路评估”：程序一旦明白它可以跳过`if`，它就会停止评估剩余部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:03:31.863

我相信这将是最简单的选择：

```
 private void GetFunctionsValues(XElement x)
    {
        var el = x.XPathSelectElement(@"credentials/faccess/access[@db_id=19]");
        if(el != null)
            FuncPlus = true;
    } 
```

`XPathSelectElement`在`System.Xml.XPath`命名空间中声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T09:13:59.643

我有一个扩展方法可以使此类代码更具可读性：

```
 public static TResult Access<TSource, TResult>(
           this TSource obj, 
           Func<TSource, TResult> expression, 
           TResult defaultValue = default(TResult)) where TSource : class
    {
        if (obj == null)
        {
            return defaultValue;
        }

        return expression.Invoke(obj);
    } 
```

在这种情况下，您可以流畅地编写访问某些属性：

```
var faccessElement = x
         .Access(y => y.Element("credentials"))
         .Access(y => y.Element("faccess"));
if (faccessElement != null) 
{
    //...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T08:49:51.957

您可以简单地合并一些`if()`s ，因为布尔运算具有定义的操作数被评估顺序（从左到右）：

而不是这样写：

```
if (condition_a)
    if (condition_b)
        action(); 
```

你可以简单地使用这个：

```
if (condition_a && condition_b)
     action(); 
```

只要确保您仍然首先验证您的对象存在，然后执行进一步检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T08:49:56.447

您至少可以通过将前两个`if`s 合并为一个并将属性的选择放入`foreach`循环中的查询中来使其更紧凑：

```
private void GetFunctionsValues(XElement x) 
{ 
    if (x.Element("credentials") != null
        && x.Element("credentials").Element("faccess") != null) 
    { 
        foreach (var attribute in x.Element("credentials")
                                   .Element("faccess")
                                   .Elements("access")
                                   .Select(x => x.Attribute("db_id"))
                                   .Where(x => x != null)) 
        { 
            if (int.Parse(attribute.Value) == 19) FuncPlus = true; 
        } 
    } 
} 
```

请参阅[此答案](https://stackoverflow.com/questions/7331686/why-and-not/7331721#7331721)以了解为什么可以将前两个`if`s 合并为一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T08:50:41.833

要改进它并结合两个 if，您可以尝试

```
private void GetFunctionsValues(XElement x)
{
    var credentialsElement = x.Element("credentials") ;
    if (credentialsElement != null && credentialsElement.Element("faccess") != null)
    {
         foreach (var access in credentialsElement.Element("faccess").Elements("access"))
         {
             if (access.Attribute("db_id") != null)
             {
                 if (int.Parse(access.Attribute("db_id").Value) == 19) FuncPlus = true;
             }
         }
     } 
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-16T08:51:08.480

我经常发现使用 return 而不是 imbrication 代码更具可读性：

```
private void GetFunctionsValues(XElement x)
{
    if (x.Element("credentials") == null || x.Element("credentials").Element("faccess") == null) return;
    foreach (var access in x.Element("credentials").Element("faccess").Elements("access"))
    {
        if (access.Attribute("db_id") != null && int.Parse(access.Attribute("db_id").Value) == 19)
        {
            FuncPlus = true;
            return; // it seems we can leave now !
        }
    }
} 
```

并查看我在验证条件时添加的返回：我认为您不需要继续迭代。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-16T08:59:07.063

如果是我，我会这样写：

```
private void GetFunctionsValues(XElement x)
{
    if (x.Element("credentials") == null
    || x.Element("credentials").Element("faccess") == null)
       return;

    bool any = 
       x
       .Element("credentials")
       .Element("faccess")
       .Elements("access")
       .Where(access => access.Attribute("db_id") != null)
       .Any(access => int.Parse(access.Attribute("db_id").Value) == 19);

    if (any)
       FuncPlus = true;
} 
```

需要注意的关键事项：

两个`if`连续的 s 可以通过用 连接它们的表达式来替换`&&`。前任：

```
if (test1)
   if (test2)

// becomes

if (text1 && test2) 
```

a`foreach`后跟 an`if`可以替换为 LINQ`Where`查询。前任：

```
foreach (var item in collection)
   if (item.SomeProperty == someValue)
      action(item);

// becomes

collection
.Where(item => item.SomeProperty == someValue)
.ForEach(action); 
```

在执行某些操作之前进行的测试通常最好倒写，以避免过度嵌套。前任：

```
if (test1)
   if (test2)
      if (test3)
         doSomething();

// becomes

if (!(test1 || test2 || test3))
   return;

doSomething(); 
```

# php - PHP mssql_fetch_array 并获取数据库数据类型

> ID：11983534
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:45:38.410
> 
> 标签：php, json, database, types

我有一个类别表：

类别 ID：整数

类别名称：字符串

我使用以下方法从数据库中检索了我的数据：

```
while($rows[] = mysql_fetch_array($result,MSSQL_ASSOC)){} 
```

我想以 json 格式显示结果。

```
$response = array('success' => true, 'data' => $rows);
echo json_encode($response); 
```

它返回：

```
{"success":true,"data":[{"categoryId":"1","categoryName":"Car"}]} 
```

是否可以将 categoryId 作为整数 ({"categoryId":1) 而不是字符串返回？我知道 mssql_fetch_array 将返回字符串。当我对获取结果进行 json_encode 时，有什么好的方法可以保留数据库数据类型？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T08:53:50.867

在[`mysql_fetch_array`](http://www.php.net/manual/en/function.mysql-fetch-array.php)文档中，写得很清楚

> **返回与获取的行相对应的字符串**数组，如果没有更多行，则返回 FALSE。返回数组的类型取决于 result_type 的定义方式。

所以你最好通过**[类型转换来改变数据类型](http://www.php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)**

```
$foo = (int) $bar; 
```

# mobile - 如何在各种设备上测试 APK

> ID：11983537
> 
> 赞同：0
> 
> 时间：2012-08-16T08:45:48.803
> 
> 标签：mobile, apk

我有 biult 移动应用程序。我想在各种设备上测试我的 APK，以确保它适用于所有设备。我只有一部手机（Galaxy S），我的应用程序可以在上面运行。有没有可以测试我的应用程序的各种设备模拟器？或者唯一的方法是在真实设备上实际测试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:51:26.623

如果您使用eclipse进行Android开发，Android ADT Plugin提供的模拟器可以帮助您模拟不同屏幕尺寸和密度的不同设备。你可以在谷歌上快速搜索你想要的设备规格，比如这个链接：http: [//mobile.tutsplus.com/tutorials/android/common-android-virtual-device-configurations/](http://mobile.tutsplus.com/tutorials/android/common-android-virtual-device-configurations/)

附件是有关eclipse中模拟器详细信息的链接：http: [//developer.android.com/tools/building/building-eclipse.html](http://developer.android.com/tools/building/building-eclipse.html)

# iphone - 关闭模态视图控制器

> ID：11983538
> 
> 赞同：2
> 
> 时间：2012-08-16T08:45:49.730
> 
> 标签：iphone, objective-c, ios, cocoa-touch, modalviewcontroller

我有一个根视图控制器，用作菜单。当一个项目被选中时，它会以模态方式呈现一些全屏数据。当点击后退按钮时，将执行以下代码：

在 BoardViewController.m 中：

```
 - (IBAction)menuButtonPressed:(id)sender
    {
         [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
    } 
```

它很好地带回了主菜单。但在此之后，我想销毁被解雇的视图控制器（比如当你使用推送/弹出视图控制器时）。我不存储它们的任何引用，但它们在解雇后仍然存在。我该如何解决？（使用 ARC。）

编辑

在 AppDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...
    MenuViewController *menuVC = [[MenuViewController alloc] init];
    self.window.rootViewController = menuVC;
    ...
} 
```

在 MenuViewController.m 中：

```
- (IBAction)newGame:(id)sender
    {
        BoardViewController *boardVC = [[BoardViewController alloc] init];
        boardVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        [self presentViewController:boardVC animated:YES completion:nil];
    } 
```

编辑 2

好吧，一个非弱委托属性导致了这个问题。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:42:58.143

我不使用 ARC，但如果模态控制器没有被释放，那么可能是因为其他东西仍然有它的引用。模态控制器是否将自己作为委托添加到任何东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:56:12.133

呈现 ModalViewController 在代码中应该如下所示：

```
- (void)showModal
{
    MyModalVC *mmvc = [[MyModalVC alloc] init];

    mmvc.dismissDelegate = self;

    UINavigationController *navController = [[UINavigationController alloc]
                                             initWithRootViewController:mmvc];

    navController.modalPresentationStyle = UIModalPresentationFormSheet; //or similar

    [self presentModalViewController:navController animated:YES];

    [cleaningTaskVC release]; //see that it is released after the presentation so that when you dismiss it you don't have to worry about the destruction of the object anymore
    [navController release];
} 
```

最后的释放将确保销毁，这样您在解雇它时就不必担心它。

这就是我解除它的方式（使用我在 ModalVC 类中使用的协议和委托），然后没有活的 ModalVC 实例

```
- (void)didDismissModalView
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

希望这是你想要的。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:57:19.077

尝试这个，

```
- (IBAction)menuButtonPressed:(id)sender
{
   [self dismissModalViewControllerAnimated:YES];
} 
```

# jquery - 如何在jquery中选择所有div索引小于6的div？

> ID：11983542
> 
> 赞同：-2
> 
> 时间：2012-08-16T08:46:07.913
> 
> 标签：jquery, indexing

> **可能重复：**
> [使用 jQuery 选择前“n”个项目](https://stackoverflow.com/questions/1865552/selecting-the-first-n-items-with-jquery)

如何在jquery中选择所有div索引小于6的div？

```
$('div.lt(6)') 
```

这个对吗？

```
 $('div').slice(0,6).animate({ top:newtop2 }, 700)
    .removeClass("down").addClass("up"); 
```

我试过这个，但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:47:49.417

您正在使用`.`而不是`:`，请尝试以下操作：

```
$('div:lt(6)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:48:40.743

关闭，但不完全在那里。您正在使用[lt-selector](http://api.jquery.com/lt-selector/)，所以它`:lt()`不是`.lt()`-`.`选择器中的 a 表示一个类。您的代码将改为：

```
$('div:lt(6)') 
```

当然，除非您真正想要的是`<div>`它们的索引*相对于它们的兄弟姐妹*，而不是*相对于匹配的元素*，小于六的元素。

在这种情况下，我想你需要做这样的事情：

```
$('div').filter(function() {
    return $(this).index() < 6;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:48:48.933

```
$('div').slice(0,6) 
```

或者

```
$('div:lt(6)') 
```

# c# - 保持网络应用程序“活跃”（即响应数据的变化）

> ID：11983545
> 
> 赞同：0
> 
> 时间：2012-08-16T08:46:13.550
> 
> 标签：c#, asp.net, ajax, long-polling, data-driven

正如标题所说，我将开发一个用于显示数据的 asp .net 网络应用程序。这些数据会在一天中多次更改，因此 UI 显示的内容过期只是时间问题。

解决这个问题的方法是什么？轮询？定时“刷新”？阿贾克斯？我想避免告诉用户显示最新数据的唯一方法是点击刷新。

编辑：我刚刚偶然发现了淘汰赛框架 - 这可以成为解决这个问题的候选人吗？淘汰赛可以检测来自 sql 数据库的更改并在 UI 上相应地反映这些更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:04:08.993

看看[SignalR](http://signalr.net/)，它是一个类似于 socket.io 的 node.js 框架（如果你熟悉这个概念。）本质上，它是一个用于在服务器和客户端之间“实时”通信的高级通道架构，在两个方向。如果可能，它使用 Web 套接字，并回退到长轮询 ajax。

通过使用 SignalR，服务器可以在某些数据发生更改时简单地通知所有相关客户端

# javascript - 如何在IE中隐藏菜单栏、ftoolbar

> ID：11983546
> 
> 赞同：0
> 
> 时间：2012-08-16T08:46:13.793
> 
> 标签：javascript, jquery

有一个 HTML 页面。当页面ID打开时，我想在IE中隐藏菜单栏，ftoolbar。

我不想从另一个网页 ( `window.open(....)`) 打开该页面。我只想直接打开当前网页！

如何使用 jQuery 或纯 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:09:33.080

我不认为你可以。 [http://msdn.microsoft.com/en-us/library/ie/ms535873(v=vs.85).aspx#properties](http://msdn.microsoft.com/en-us/library/ie/ms535873(v=vs.85).aspx#properties) 没有处理浏览器菜单栏的属性。

我相信主要原因 - 是他们造成的安全风险。想象一下，如果在您的页面加载后无法单击“返回”或输入新的网址，用户会变得多么疯狂？如果您的页面被黑而成为浏览器主页怎么办？这将导致浏览器被窃听。

# sql - Oracle SQL 查询 - 请帮助

> ID：11983549
> 
> 赞同：0
> 
> 时间：2012-08-16T08:46:29.353
> 
> 标签：sql, oracle

我正在整理一个查询，该查询在很多情况下通过别名引用一个表，但随后它继续声明：

*ORA-00904: "MPAN_STATUS"."MPANCORE": 无效标识符 00904\. 00000 - "%s: 无效标识符" *原因：
*操作：错误行：43 列：126*

查询如下：

```
SELECT readings.mpancore, mtds.meterid, (SELECT CASE
                                                  WHEN meter_type 
                                                  LIKE 'RCAM%' AND
                                                       retrieval_method = 'R'
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.mtds
                                                 WHERE meter_removed IS NULL) "IS_SMART",
                                          (SELECT CASE 
                                                  WHEN flowversion = 'D0010'          AND
                                                       readings.filename IS NOT NULL  AND
                                                       readings.filedate >= mpan_status.ssd 
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.readings, edmgr.mpan_status
                                                 WHERE readings.mpancore = mpan_status.mpancore) "D0010_RECEIVED",
                                          (SELECT CASE 
                                                  WHEN effective_from_date >= mpan_status.ssd AND
                                                       dc_id = mpan_status.confirmed_dc_id          
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.D0019_reg, edmgr.mpan_status) "D0019_RECEIVED",
                                          (SELECT CASE 
                                                  WHEN file_date_time <= SYSDATE-409       
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.D0019_reg) "RF_READ",
                                          (SELECT CASE 
                                                  WHEN file_date_time <= SYSDATE-220       
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.D0019_reg) "R3_READ",
                                          (SELECT CASE 
                                                  WHEN file_date_time <= SYSDATE-118       
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.D0019_reg) "R2_READ",
                                          (SELECT CASE 
                                                  WHEN file_date_time <= SYSDATE-56        
                                                  THEN 'TRUE' 
                                                  ELSE 'FALSE' END
                                                  FROM edmgr.D0019_reg) "R1_READ"   
        FROM edmgr.mpan_status "mpan_status" LEFT JOIN edmgr.D0019_reg "D0019"   ON mpan_status.mpancore = D0019.metering_system_id
                                             LEFT JOIN edmgr.readings "readings" ON mpan_status.mpancore = readings.mpancore
                                             LEFT JOIN edmgr.mtds "mtds"         ON readings.mpancore    = mtds.mpancore 
                                                   AND D0019.metering_system_id                          = mtds.mpancore
                                                   AND mtds.meterid                                      = readings.meterid 
```

我真的是一个完全的新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:00:01.963

让我们开始定义[ORA-00904 错误](http://www.dba-oracle.com/t_ora_00904_string_invalid_identifier.htm)：

> ORA-00904 字符串：无效标识符原因：输入的列名丢失或无效。
> 
> 行动：输入一个有效的列名。有效的列名必须以字母开头，少于或等于 30 个字符，并且仅包含字母数字字符和特殊字符 $、_ 和 #。
> 
> 如果它包含其他字符，那么它必须用双引号引起来。它可能不是保留字。

这也是一个**区分大小写的**问题（在 FROM 参数中将 mpan_status 放在引号中。）在 Oracle 中，只有将列名放在引号中时它们才区分大小写。

**编辑：**

这是我将编写查询的建议（避免使用 ANSI 连接和子查询）。

```
SELECT  readings.mpancore,
        mtds.meterid,
        CASE  
            WHEN meter_type LIKE 'RCAM%' AND retrieval_method = 'R' THEN 'TRUE' 
            ELSE 'FALSE' 
        END AS "IS_SMART"
FROM    edmgr.mpan_status,
        edmgr.mtds,
        edmgr.D0019_reg,
        edmgr.readings
WHERE   mpan_status.mpancore = D0019_reg.metering_system_id
    AND mpan_status.mpancore = readings.mpancore
    AND readings.mpancore    = mtds.mpancore
    AND D0019_reg.metering_system_id = mtds.mpancore; 
```

# html - 网页上外部链接的可访问性？

> ID：11983551
> 
> 赞同：1
> 
> 时间：2012-08-16T08:46:46.703
> 
> 标签：html, accessibility, w3c

我一直在寻找关于如何（甚至是否）应该在 html 文档中显示外部链接的明确指南，以符合任何可访问性/可用性指南。但我真的什么都找不到。

我们有一个客户坚持认为任何外部链接（包括菜单/导航）都应该有一个图标表明它是外部的。

我的问题是——这有必要吗？区分外部链接的最低要求是什么？是否需要有视觉线索，或者是否可以仅在链接标题或名称中指出，如果单击它将转到另一个网站？

任何对此的澄清将不胜感激，因为我正在努力建议我们应该做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T10:30:14.070

The distinction between external and internal links is often made by web site owners and managers, but its relevance to users is questionable. [WCAG 2.0](http://www.w3.org/TR/WCAG/) expresses many concerns about links: [Guideline 2.4](http://www.w3.org/TR/WCAG/#navigation-mechanisms) Navigable: Provide ways to help users navigate, find content, and determine where they are. But external vs. internal is not among them.

The key issue is that the meaning and purpose of each link be available to the user. This is far more important than flagging external links, and such flagging tends to create problems rather than solve any. Flagging might be required by the site owner as a policy and caution matter, but this should not be confused with accessibility.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:26:23.257

当链接获得焦点或用户将鼠标悬停在链接上时，所有 Web 浏览器都会在状态栏中显示链接的 URL。只要您不隐藏链接的目标 URL，状态栏中的 URL 就可以很好地判断该链接是否为外部链接。

在互联网的旧时代（10 或 15 年前），在所有外部链接上都有退出免责声明是常见的做法。随着人们对链接的概念越来越熟悉，现在 Web 上的退出免责声明越来越少。您可以期望您的用户了解不同站点上的 URL 链接会将他们带到不同的站点。

至于可访问性，屏幕阅读器还为用户提供了一种听到链接 URL 的方式：

*   在 Voiceover 中，按 Ctrl-Option-Shift+U 将读取链接的 URL。
*   在 ChromeVox 中，命令是 Ctrl-Alt-U。

确保您的链接在悬停时显示正确的 URL。您不需要在这方面做任何特别的事情来使您的链接更易于访问。

# java - 从数据库中读取数据并存储在数组列表对象中

> ID：11983554
> 
> 赞同：13
> 
> 时间：2012-08-16T08:46:52.770
> 
> 标签：java, jdbc

大家好，我想在 html 页面上显示我的数据库表的全部内容。我试图首先从数据库中获取记录并存储，`ArrayList`但是当我在 html 页面上返回数组列表时，它只重复显示最后一条记录作为我的数据库表的计数。这是下面的代码：

```
public ArrayList<CustomerDTO> getAllCustomers() 
{
    ArrayList<CustomerDTO> customers = new ArrayList<CustomerDTO>();
    CustomerDTO customer = null;
    Connection c;
    try {
        c = openConnection();
        Statement statement = c.createStatement();
        String s = "SELECT * FROM customer";

        ResultSet rs = statement.executeQuery(s);
        int g =0;

        while (rs.next()) {

            customer.setId(rs.getInt("id"));
            customer.setName(rs.getString("name"));

            customer.setAddress(rs.getString("address"));
            customer.setPhone(rs.getString("phone"));
            customer.setEmail(rs.getString("email"));
            customer.setBountPoints(rs.getInt("bonuspoint"));
            customer.setTotalsale(rs.getInt("totalsale"));

            customers.add(customer);
        }

        rs.close();
    } catch (Exception e) {
        System.out.println(e);
    }

    return customers;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-11T01:59:03.213

尝试使用以下代码

```
public static ArrayList<Customer> getAllCustomer() throws ClassNotFoundException, SQLException {
    Connection conn=DBConnection.getDBConnection().getConnection();
    Statement stm;
    stm = conn.createStatement();
    String sql = "Select * From Customer";
    ResultSet rst;
    rst = stm.executeQuery(sql);
    ArrayList<Customer> customerList = new ArrayList<>();
    while (rst.next()) {
        Customer customer = new Customer(rst.getString("id"), rst.getString("name"), rst.getString("address"), rst.getDouble("salary"));
        customerList.add(customer);
    }
    return customerList;
} 
```

这是我的模型课

```
public class Customer {
private String id;
private String name;
private String salary;
private String address;
public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getSalary() {
    return salary;
}
public void setSalary(String salary) {
    this.salary = salary;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
} 
```

这是我的视图方法

```
 private void reloadButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
    try {
        ArrayList<Customer> customerList = null;
        try {
            try {
                customerList = CustomerController.getAllCustomer();
            } catch (SQLException ex) {
                Logger.getLogger(veiwCustomerFrame.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (Exception ex) {
            Logger.getLogger(ViewCustomerForm.class.getName()).log(Level.SEVERE, null, ex);
        }
        DefaultTableModel tableModel = (DefaultTableModel) customerTable.getModel();
        tableModel.setRowCount(0);
        for (Customer customer : customerList) {
            Object rowData[] = {customer.getId(), customer.getName(), customer.getAddress(), customer.getSalary()};
            tableModel.addRow(rowData);
        }

    } catch (Exception ex) {
        Logger.getLogger(ViewCustomerForm.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T08:50:24.487

您必须在每次迭代中创建一个新的客户对象，然后在迭代的最后将该新创建的对象添加到 ArrayList 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:54:58.563

尝试每次创建新的客户实例，例如

```
 while (rs.next()) {

        Customer customer = new Customer();
        customer.setId(rs.getInt("id"));
        customer.setName(rs.getString("name"));

        customer.setAddress(rs.getString("address"));
        customer.setPhone(rs.getString("phone"));
        customer.setEmail(rs.getString("email"));
        customer.setBountPoints(rs.getInt("bonuspoint"));
        customer.setTotalsale(rs.getInt("totalsale"));

        customers.add(customer);

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T08:50:04.033

您正在重用`customer`参考。Java 通过引用为对象工作。不适用于原始人。

您正在做的是将相同的内容添加到列表中`customer`，然后对其进行修改。从而为所有对象设置相同的值。这就是为什么你看到最后一个。因为一切都是一样的。

```
 while (rs.next()) {
        Customer customer = new Customer();
        customer.setId(rs.getInt("id"));

        ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-18T10:31:44.363

**尝试这个**

```
import java.sql.ResultSet;
import java.util.ArrayList;

import com.rcb.dbconnection.DbConnection;
import com.rcb.model.Docter;

public class DocterService {

public ArrayList<Docter> getAllDocters() {
    ArrayList<Docter> docters = new ArrayList<Docter>();

    try {
        String sql = "SELECT tbl_docters";

        ResultSet rs = db.getData(sql);
        while (rs.next()) {
            Docter docter = new Docter();

            docter.setD_id(rs.getInt("d_id"));
            docter.setD_FName(rs.getString("d_fname"));
            docter.setD_LName(rs.getString("d_lname"));

            docters.add(docter);

        }

    } catch (Exception e) {
        System.out.println("getAllDocters()");
        e.printStackTrace();
    }

    return (docters);
}

public static void main(String args[]) {
    DocterService ds = new DocterService();
    ArrayList<Docter> doctersList = ds.getAllDocters();
    String s[] = null;
    for (int i = 0; i < doctersList.size(); i++) {

        System.out.println(doctersList.get(i).getD_id());
        System.out.println(doctersList.get(i).getD_FName());
    }

  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-06T05:48:19.423

`Instead of`null`, use CustomerDTO customers =`new CustomerDTO()`;

```
CustomerDTO customer = null;

  private static List<Author> getAllAuthors() {
    initConnection();
    List<Author> authors = new ArrayList<Author>();
    Author author = new Author();
    try {
        stmt = (Statement) conn.createStatement();
        String str = "SELECT * FROM author";
        rs = (ResultSet) stmt.executeQuery(str);

        while (rs.next()) {
            int id = rs.getInt("nAuthorId");
            String name = rs.getString("cAuthorName");
            author.setnAuthorId(id);
            author.setcAuthorName(name);
            authors.add(author);
            System.out.println(author.getnAuthorId() + " - " + author.getcAuthorName());
        }
        rs.close();
        closeConnection();
    } catch (Exception e) {
        System.out.println(e);
    }
    return authors;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T09:18:25.933

> *我试图先从数据库中获取记录并存储在 ArrayList 中，但是当我在 html 页面上返回数组列表时，它只重复显示最后一条记录作为我的数据库表的计数*

这部分大部分已被所有先前的答案所涵盖。因此，您需要`CustomerDTO`在`while`循环中创建一个新实例并将其添加到您的`ArrayList`.

我还想评论一件事：

*   确保在使用完所有资源后释放它们。从您发布的代码中，您没有关闭您的对象`Statement`或您的`Connection`对象（*不确定您是否正在池化连接，在这种情况下，您需要将此连接释放到池中*）

因此，当您考虑这些要点时，您的代码结构可能如下所示：

```
public ArrayList<CustomerDTO> getAllCustomers() 
{
    ArrayList<CustomerDTO> customers = new ArrayList<CustomerDTO>();
    Connection c = null;
    Statement statement = null;
    ResultSet rs        = null;

    try {
        c           = openConnection();
        statement   = c.createStatement();
        String s    = "SELECT * FROM customer";

        rs          = statement.executeQuery(s);
        int g =0;

        while (rs.next()) {
            CustomerDTO customer = new CustomerDTO();
            //Code to fill up your DTO
            customers.add(customer);
        }
    } catch (Exception e) {
        System.out.println(e);
    }finally{
        //Code to release your resources
    }

    return customers;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-19T12:31:58.693

```
 while (rs.next()) {

            customer.setId(rs.getInt("id"));
            customer.setName(rs.getString("name"));

            customer.setAddress(rs.getString("address"));
            customer.setPhone(rs.getString("phone"));
            customer.setEmail(rs.getString("email"));
            customer.setBountPoints(rs.getInt("bonuspoint"));
            customer.setTotalsale(rs.getInt("totalsale"));

            customers.add(customer);
             customer = null;
        } 
```

尝试用上述代码替换您的 while 循环代码。在这里我们所做的是在做之后`customers.add(customer)`我们正在做 customer = null;`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-27T13:39:21.460

如果您的客户类有静态变量，请删除它们，以便您的类看起来像这样。

```
public class customer {

     private int id;
     private String name;
     private String DOB;

    public int getId() {
        return id;
    }
    public String getName() {
        return name;
    }
    public String getDOB() {
        return DOB;
    }
     public void setId(int id) {
        this.id = id;
    }
    public void setName(String name) {
        this.name = name;
    }
    public void setDOB(String dOB) {
        this.DOB = dOB;
    } 
```

而不是像

```
public class customer {

     private static int id;
     private static String name;
     private static String DOB;

    public static int getId() {
        return id;
    }
    public static String getName() {
        return name;
    }
    public static String getDOB() {
        return DOB;
    }
     public static void setId(int id) {
        custumer.id = id;
    }
    public  static void setName(String name) {
        customer.name = name;
    }
    public static void setDOB(String dOB) {
        customer.DOB = dOB;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-13T13:52:12.787

> 每次在 while 循环中创建 CustomerDTO 对象
> 
> 检查下面的代码

```
 while (rs.next()) {

    Customer customer = new Customer();

    customer.setId(rs.getInt("id"));
    customer.setName(rs.getString("name"));
    customer.setAddress(rs.getString("address"));
    customer.setPhone(rs.getString("phone"));
    customer.setEmail(rs.getString("email"));
    customer.setBountPoints(rs.getInt("bonuspoint"));
    customer.setTotalsale(rs.getInt("totalsale"));

    customers.add(customer);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-26T10:25:14.513

此外，如果您希望结果集数据在列表中。请在 LOC 下方使用：

```
public List<String> dbselect(String query)
  {
      List<String> dbdata=new ArrayList<String>();
      try {
        dbResult=statement.executeQuery(query);
        ResultSetMetaData metadata=dbResult.getMetaData();
        for(int i=0;i>=metadata.getColumnCount();i++)
        {
            dbdata.add(dbResult.getString(i));
        }
        return dbdata;
    } catch (SQLException e) {
        return null;
    }

  } 
```

# python - Flask 中的模板标签？可能的？

> ID：11983555
> 
> 赞同：3
> 
> 时间：2012-08-16T08:46:56.523
> 
> 标签：python, templates, flask, django-templates

当我尝试 Django 时，我真的很喜欢那里的模板标签。我快速阅读了 Flask 文档，可能遗漏了一些东西，但似乎这种以某种类似方式工作的东西并没有在 Flask 中实现？如果没有，也许有一些扩展或者可能以某种方式深入到 API 这可以实现？

如果不是......那么你们如何加载模板中的内容，例如所有页面都是常见的？就像我想在我的网站上显示最新的博客条目一样。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:52:12.540

Flask 的 Django 模板标签替代品是[Context Processors](http://flask.pocoo.org/docs/templating/#context-processors)。

# c# - 我可以在 EditorTemplate 中动态分配 @model 类型吗？

> ID：11983558
> 
> 赞同：1
> 
> 时间：2012-08-16T08:47:08.137
> 
> 标签：c#, asp.net-mvc-3, templates, editor, viewmodel

我有一个图像上传器编辑器模板，它目前被强输入到 MultiImageUploader 视图模型。问题是我有一些自定义数据验证属性，我想在直接调用编辑器模板的视图模型中使用它们，而不是通过 MultiImageUploader 视图模型进行路由。

而不是调用具有预设验证属性的 MultiImageUploader 视图模型，我想做这样的事情：

```
public class CreateBrandViewModel
{
    .....<snipped>.....

    [PermittedFileExtensions("jpg, jpeg, png, gif")]
    [MaxFileSize("2MB")]
    [UIHint("MultiImageUploader")]
    public HttpPostedFileBase Image { get; set; }

  //Currently this view model looks like this:
  //public MultiImageUploader Image { get; set; } <-- seperate view model 

} 
```

我目前无法使用我的首选方式，因为我的编辑器模板没有针对 CreateBrandViewModel 进行强类型化。有没有办法可以将调用视图模型的 @model 传递到编辑器模板视图中？：

```
@model // Here? //
<div class="editor-field">
     @Html.TextBoxFor(x => x.Image, new { type = "file" })
     @Html.ValidationMessageFor(x => x.Image)
</div> 
```

**编辑 1**

只是为了澄清，我想这样做的原因是因为我想从图像上传器更改为通用文件上传器 - 这需要在不同的视图模型上使用不同的验证属性。为此，目前我需要为每个稍微不同的验证参数变体创建不同的视图模型和编辑器模板。

**编辑2：关于@Joel Athertons 的回答**

我在尝试实现这一点时遇到了一些问题（或者我可能只是没有正确理解）。

我已经创建了接口和抽象类。我的 CreateBrandViewModel 现在继承自 FileUpload。FileUpload 当前为空，没有共享属性。当我尝试 model.GetType().Name 时，我得到一个“对象引用未设置为对象的实例”。错误。代码如下：

控制器将 CreateBrandViewModel 传递给视图：

```
 [HttpGet]
    public ActionResult Create()
    {
        var model = new CreateBrandViewModel();
        model.IsActive = true;

        return View(model);
    } 
```

Create 视图然后调用 EditorTemplate：

```
@model CumbriaMD.Infrastructure.ViewModels.BrandViewModels.CreateBrandViewModel 

@Html.EditorFor(model => model.File, "EditorTemplates/MultiImageUploader") 
```

然后模板（为了简单起见）看起来像这样：

```
@model CumbriaMD.Infrastructure.ViewModels.FileUploadViewModels.FileUpload

@{
    var partialView = Model.GetType().Name;
}

<h1>@partialView</h1> 
```

任何想法，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:44:05.627

我处理这个问题的方法是拥有一个接口，所有允许上传的模型都将实现该接口。如果您实际上具有通用功能，我还将它与具有任何通用属性、属性等的抽象模型相结合。然后您的每个单独的模型将继承抽象类（或者如果您不使用接口，则实现接口类），然后您可以将其用作您的 @model 语句。然后，您可以简单地将任何一次性的部分拆分为可以做自己的事情的部分视图。

```
public interface IFileUploadModel
{
    // any common properties would go here
}

public abstract class FileUploadModel : IFileUploadModel
{
    // implement the common stuff
}

public class CreateBrandViewModel : FileUploadModel
{
    [PermittedFileExtensions("jpg, jpeg, png, gif")]
    [MaxFileSize("2MB")]
    [UIHint("MultiImageUploader")]
    public HttpPostedFileBase Image { get; set; }
}

public class SomeOtherUploadModel : FileUploadModel
{
    // Other special stuff here
} 
```

然后在您的模板中。

```
@model FileUploadModel

@{
    // Common output code that they all do

    // Then the special stuff
    if (model.GetType().Name == "CreateBrandViewModel")
    {
        // Render the partial and pass it the model
        Html.RenderPartial("CreateBrandPartialView", Model);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:29:06.613

If your class looks like this:

```
public class CreateBrandViewModel
{
    [PermittedFileExtensions("jpg, jpeg, png, gif")]
    [MaxFileSize("2MB")]
    [UIHint("MultiImageUploader")]
    public HttpPostedFileBase Image { get; set; }
} 
```

and you have an EditorTemplate called MultiImageUploader.cshtml, then that would look like:

```
@model HttpPostedFileBase

@Html.LabelFor(m => m)
@Html.TextBoxFor(x => x, new { type = "file" })
@Html.ValidationMessageFor(x => x) 
```

And you would render it in your overall view with:

```
@Html.EditorFor(m => m.Image) 
```

# magento - 如何在magento中添加产品时检查是否为产品选择了一个类别？

> ID：11983560
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:11.830
> 
> 标签：magento

当我在 magento 的管理面板中添加产品时，我需要检查是否为产品选择了一个类别。客户需要为特定类别启用某些产品选项卡，而对于其他类别，它将被禁用。

如果客户选择特定类别，则选项卡将处于活动状态，否则不会。

请帮助我解决这种情况。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:12:51.043

您可以使用 Javascript 来检查该类别（每个复选框应该有一个唯一的 ID）是否被选中，如果是，您可以启用/禁用选项卡。

# java - JTable 数据持久化建议

> ID：11983565
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:16.913
> 
> 标签：java, swing, jtable, persistence

我正在寻求以优雅的方式保存我的 JTable 数据的建议。到目前为止，我的研究表明我可以遍历许多列和行并提取数据以进行保存（看起来很复杂），或者我可以将表和相关数据保存为对象文件中的对象。

我很想听听那些更精通该领域的人的一些建议，因为我对 JTables 及其工作方式还很陌生。是否有许多其他可用的解决方案可能是更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:52:53.223

这取决于您要对持久数据执行的操作。如果您只想保留它以便以后可以再次显示它，请查看将其序列化（Java Serializable 或 Java Externalizable）到您放置在某处的数据流。稍后您可以将其读回（反序列化）并再次显示。

如果您想将其放入数据库中，其中信息可用于其他目的，那么您可能需要实现一些对象来对数据进行建模以保持清晰和简单。然后，您可以通过将您的模型调整为表格模型，在 Swing Jtable 中呈现它。这仍然意味着您需要编写适应/转换逻辑，但它不应该是繁重的，并且您会得到最有用的结果。TableModel 只是一种查看 JTable 能够理解的数据的方法。查看适配器模式以了解有关映射的一个想法。

希望有帮助。

# python - x264 多次通过指定临时文件的位置？

> ID：11983566
> 
> 赞同：1
> 
> 时间：2012-08-16T08:47:20.723
> 
> 标签：python, video, ffmpeg, x264, transcoding

所以，我的情况是这样的。我有三个 x264 命令，我想并行运行 3 遍：

```
x264 -p 1 ...
x264 -p 1 ...
x264 -p 1 ... 
```

然后我想并行运行第二遍：

```
x264 -p 2 ...
x264 -p 2 ...
x264 -p 2 ... 
```

第三关也是如此。

问题是，因为我同时运行三个带有 -p 选项的 x264 命令（使用多处理），它们都试图使用相同的临时文件来保存第一/第二遍的结果。

有没有办法为每个 x264 命令指定使用不同的临时文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:43:24.410

如果临时文件是在当前目录中创建的，则从不同的目录启动不同的实例。如果它们都是在 eg 中创建的`/tmp`，那么多次使用相同的名称将是一个错误，我会说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:12:31.910

我已经想通了。我使用了 --stats 选项：

```
x264 -p 1 --stats file1.log ...
x264 -p 1 --stats file2.log ...
x264 -p 1 --stats file2.log ... 
```

# c# - .net项目综合数据库

> ID：11983567
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:20.707
> 
> 标签：c#, .net, database

我正在寻找一个数据库管理系统

1.  可以完全集成到c#.net项目中，不需要安装
2.  使用尽可能少的内存
3.  搜索性能不错
4.  开源

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T08:52:27.173

看看 SQLite

[http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

有关更多信息，请查看功能：

[http://system.data.sqlite.org/index.html/doc/trunk/www/features.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/features.wiki)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:54:18.810

我赞同 Antonio Bakula 对 SQLite 的建议，我建议您查看[http://sourceforge.net/projects/sqlite-dotnet2/](http://sourceforge.net/projects/sqlite-dotnet2/) - 一个开源库，允许您以与 ADO 的常规 API 一致的方式访问 SQLite 数据库。网。

至于一个实际大小的工作示例，我在那个开源项目中使用了它：http: [//morawski.codeplex.com/](http://morawski.codeplex.com/)（整体代码质量一般——当时我是从 C# 开始的——但是 SQLite访问工作正常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:49:22.553

您是否考虑过 SQL Server Compact，它可以满足您的大部分需求。

[http://en.wikipedia.org/wiki/SQL_Server_Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact)

不是开源的，但免费且可重新分发。

# java - 如何捕获从 com.sun.mail.iap.Argument 生成的字符串？

> ID：11983568
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:23.223
> 
> 标签：java, jakarta-mail

我正在尝试调试我的自定义 javamail `IMAPCommand`。

在构造发送到 IMAP 服务器的命令的过程中，我做了这样的事情：

```
public Object doCommand(IMAPProtocol p) throws ProtocolException {
Argument args = new Argument();

Argument sortCrit = new Argument();
sortCrit.writeString("REVERSE");
sortCrit.writeString("DATE");
args.writeArgument(sortCrit);

args.writeString("UTF-8");

Argument from1 = new Argument();
from1.writeString("FROM");
from1.writeString(searchFrom.get(0));

Argument from2 = new Argument();
from2.writeString("FROM");
from2.writeString(searchFrom.get(1));

fromArg.writeString("OR");
fromArg.writeArgument(from1);
fromArg.writeArgument(from2);

args.writeArgument(fromArg);

Response[] r = p.command("UID SORT", args);
Response response = r[r.length - 1];
[...]
} 
```

我想记录（例如，到 stderr）将发送到服务器的内容`p.command`。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:16:14.403

乍一看，该`Protocol`实现似乎具有一些调试功能。[使用流](http://grepcode.com/file/repository.springsource.com/javax.mail/com.springsource.javax.mail/1.4.0/com/sun/mail/iap/Protocol.java#Protocol.%3Cinit%3E%28java.io.InputStream,java.io.OutputStream,boolean%29)[创建一个`Protocol`](http://grepcode.com/file/repository.springsource.com/javax.mail/com.springsource.javax.mail/1.4.0/com/sun/mail/iap/Protocol.java#Protocol.%3Cinit%3E%28java.io.InputStream,java.io.OutputStream,boolean%29)并传递参数`true`。`debug`

然后你应该看到这个命令的输入和输出被转储到`System.out`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:22:06.730

调用 session.setDebug(true)，您将在 System.out 上获得完整的协议跟踪。这将向您显示您实际发送的内容。

# vim - 当我按 m 显示菜单时如何修复 NERDTree 的错误

> ID：11983572
> 
> 赞同：1
> 
> 时间：2012-08-16T08:47:33.610
> 
> 标签：vim, nerdtree

当我按“m”显示NERDTree的菜单时，出现错误并显示如下

```
NERDTree Menu. Use j/k/enter and the shortcuts indicated
==========================================================
Error detected while processing function <SNR>11_showMenu..30..31:
line    4:
E716: Key not present in Dictionary: menuItems)-1)
E116: Invalid arguments for function len(self.menuItems)-1)
E116: Invalid arguments for function range(0, len(self.menuItems)-1)
E15: Invalid expression: range(0, len(self.menuItems)-1)
Press ENTER or type command to continue 
```

怎么解决？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:25:00.597

要排查 Vim 插件问题，首先检查是否是您这边的问题：

*   通过单独测试插件来验证问题不是由您的设置引起的：备份您的`.vimrc`和`~/.vim`/`vimfiles`目录，清理它，保留/重新安装插件本身。
*   也许现在有更新的版本可用。检查[http://www.vim.org](http://www.vim.org)或您获得插件的站点。
*   尝试重新安装插件或安装在不同的系统上。

如果问题仍然存在，请联系插件作者。他最适合帮助您，并且对错误和修复最感兴趣。他的电子邮件通常可以在插件的随附文档或标题中找到。

原作者不再维护一些较旧的插件。Internet 搜索可能会出现分叉或替代实现。如果没有，插件的许可证（通常是 Vim 许可证或常见的开源许可证，如 GPL 或 MIT）允许您接管维护并开始发布自己的版本。社区对此表示感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T04:42:12.253

我可以通过[Vundle](https://github.com/gmarik/Vundle.vim)安装包来解决这个问题，而不是将其直接放在插件文件夹中。

# wpf - MenuItem 和 IcollectionView

> ID：11983575
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:38.823
> 
> 标签：wpf, menu, menuitem, icollectionview

我想在菜单中显示可用语言的列表。这些语言可作为 ICollectionView 使用。

这是代码：

```
<Menu DockPanel.Dock="Top">
 <Menu.Resources>
  <Style x:Key="LanguageMenuStyle" TargetType="MenuItem">
   <Setter Property="Header" Value="{Binding Name}"></Setter>
   <Setter Property="IsCheckable" Value="True"/>
  </Style>
 </Menu.Resources>
 <MenuItem Header="Language" ItemsSource="{Binding Languages}"
              ItemContainerStyle="{StaticResource LanguageMenuStyle}">
 </MenuItem>
</Menu> 
```

Languages 是从文化列表中创建为默认视图的 ICollectionView。菜单显示正确。现在我想在菜单中的选择更改时绑定到 CurrentChanged 事件，但是由于没有 IsSynchronizedWithCurrentItem 属性，我该怎么做？

有没有办法一次只检查一个项目？

# android - android结合fragmentactivity和listactivity

> ID：11983578
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:47.920
> 
> 标签：android, listactivity, android-fragmentactivity

抱歉可能是个愚蠢的问题，我是初学者。如果我需要同时扩展一项活动`ListActivity`，我该怎么办？ 我知道我只能扩展 1 个类，但是有什么技巧可以解决这个问题吗？ 预先感谢。`FragmentActivity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:49:35.173

不，您不能在 Java 中扩展 2 个类。你能具体说明为什么你需要同时扩展两者吗？我的猜测是 FragmentActivity 应该足以满足您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:51:41.160

您不必为了使用列表而扩展列表活动，您可以在布局文件中包含列表视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:52:51.863

你不能扩展一个以上的类。您说您是初学者，每当您深入了解对象的工作原理时，您就会发现这很简单是不可能的。

但是，要回答您可能要实现的目标的更大图景：

您希望有一个可以扩展 FragmentActivity 的类，以及一个可以扩展 ListFragment 的不同的类。并且每当创建 FragmentActivity 时，您都会实例化您的 ListFragments 之一并将其添加到布局中。

# java - 在方法中更改对象的值会全局更改它吗？

> ID：11983580
> 
> 赞同：0
> 
> 时间：2012-08-16T08:47:50.067
> 
> 标签：java, scope, parameter-passing

这是我的代码

`Class A`

```
public class A {
    private int a;

    public int getA() {
        return a;
    }

    public void setA(int a) {
        this.a = a;
    }
} 
```

`Class Change`

```
public class Change {
    public void changeSomething(A a){
        a.setA(13);
    }
} 
```

`Class Learn`

```
public class Learn {
    public static  void main(String[] args) {
        A a = new A();
        Change change = new Change();
        change.changeSomething(a);
        System.out.println(a.getA());
    }
} 
```

输出为 13。现在，当我将对象传递给 changeSomething 方法时，对象 A 的值在内部已更改，但为什么我会在该函数之外看到这种效果？

这不等同于在 C 中按值传递，除非您返回该变量/对象，否则您不会获得更新的值。

即我不需要`a=changeSomething(a);`将此方法的返回类型设置为A吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:53:51.300

您正在传递对原始对象的*引用。*当你写一个方法

```
void someMethod(A param) { ... } 
```

`param`是对原始对象的*引用。*原始对象没有被复制。因此，当您更改此对象时，无论观察到该对象，更改都是可见的。

当你写：

```
private A a = new A(); 
```

重要的是要意识到变量是对对象类型的*引用*`A`，而不是实际的对象类型`A`。这是一个很好的区别，当然。

上述行为可能会在您的系统中造成意想不到的影响，并且它是*immutability*的一个论据，尤其是在可以从多个线程触发更改的线程环境中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:50:20.367

**短的：**

`changeSomething()`将更新对象的值，因此如果您引用相同的实例，您将获得相同的值

**有点长的解释：**

```
//an Object of A created and its reference is set to a
A a = new A();
//instance of Change is created and its reference is set to change
Change change = new Change();
//it passes reference's (a) 's value to the changeSomething method
//which invokes `setA()` on instance referred by a (which is the same instance that waas crated in line 1

change.changeSomething(a);

//so you will get the changed value here
System.out.println(a.getA()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:51:01.210

好吧，您提供的代码直接在 A 的实例上工作。这个实例被更改，无论您是否返回它。它仍然是您的对象的同一个实例。这个实例变量反映了新值。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-16T08:51:18.997

这是因为你传递了 Object，而 Java 中的对象总是通过引用传递。只有原始（int、double、char、long...）是按值传递的。

在 C 中可能是：

```
public void changeSomething(A& a){
 a.setA(13);
} 
```

# opera - Opera 扩展 xmlhttp.send(); 错误

> ID：11983582
> 
> 赞同：2
> 
> 时间：2012-08-16T08:48:00.350
> 
> 标签：opera

我在使用我的 Opera 扩展连接到 Java 应用程序时遇到问题我已经在 chrome 中做了这个扩展，它可以工作。

这是 popup.html 中 javascritp 中的代码

```
function AtribuirID(){

    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }

    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var texto = xmlhttp.responseText;
            var splitagem=texto.split("(user)"); 
            localStorage.setItem('ID',splitagem[0]);
            localStorage.setItem('Auxiliar',splitagem[1]);
        }
    }

    xmlhttp.open("GET","http://localhost:10002?z=AtribuirID",true);
    xmlhttp.send();
} 
```

问题是我收到一个错误 Uncaught exception: DOMException: NETWORK_ERR in xmlhttp.send() 并且我无法在 java 中访问我认为是服务器部分的应用程序。我已经将 network="public private" 放在 config.xml 中，但它没有用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T22:43:36.360

在 config.xml 文件中添加这一行：在选项卡`<access origin="*" subdomains="true"/>`之前允许任何域 httprequest `</widget>`，这解决了问题，如果问题仍然存在，请在 Opera 浏览器选项卡中打开“opera:config”并选择“用户首选项”并选中“允许文件 XMLHttpRequest”和重新开始。如果有问题我可以给你我的歌剧扩展工作正常...

# c# - VB.net 中的 Annoumous 函数

> ID：11983584
> 
> 赞同：0
> 
> 时间：2012-08-16T08:48:09.947
> 
> 标签：c#, .net, vb.net, anonymous-methods

我在 c# 中有以下代码行。

```
Check.ThatIsNotAnEmptyString(line1, () => { throw new InvalidAddressException("An address must have a street"); }); 
```

我很难将其转换为 vb.net。

我使用了转换工具“www.developerfusion.com”，但它会生成以下代码。

```
Check.ThatIsNotAnEmptyString(line1, Function() Throw New InvalidAddressException("An address must have a street") End Function) 
```

它抱怨“投掷”一词表示预期的表达。

谁能告诉我是否可以将其转换为 vb.net。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:00:30.560

您必须使用`Sub`，因为该函数没有返回值（如`void`在 C# 中）。

此外，由于该函数位于一行上，因此您不需要一个`End Sub/Function`，它仅在多行函数上需要（并且在 .Net 4.0 中添加）。

* * *

所以你的代码应该是：

```
Check.ThatIsNotAnEmptyString(line1, Sub() Throw New InvalidAddressException("An address must have a street")) 
```

# asp.net-mvc-3 - 将 C# 列表导出到 Csv 文件

> ID：11983586
> 
> 赞同：0
> 
> 时间：2012-08-16T08:48:28.427
> 
> 标签：asp.net-mvc-3

我试图将我的 C# 列表导出到 Csv 文件。一切都安排妥当。但问题是字段分隔符无法正常工作。它的显示就像我的字符串以“结尾（例如：0000324df”）。这是我的控制器代码。

```
IEnumerable stockexpo = stockexp; // Assign value
        MemoryStream output = new MemoryStream();
        StreamWriter writer = new StreamWriter(output, Encoding.UTF8);
        writer.Write("ItemNo,");
        writer.Write("Repeat Count");
        writer.WriteLine();
        foreach (StockResult order in stockexpo)
        {
            writer.Write(String.Format("{0:d}", order.ItemNumber));
            writer.Write("\"");
            writer.Write(",");
            writer.Write("\"");
            writer.Write(order.Count);
            writer.Write("\"");
            writer.Write(",");
            writer.WriteLine();
        }
        writer.Flush();
        output.Position = 0;

        return File(output, "text/comma-separated-values", "stockexp.csv"); 
```

我需要知道如何适当地分隔字段值。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:02:29.353

```
 writer.Write("\""); 
```

这行代码每次都会输出一个“。为什么有它？

此外，我不会在 WriteLine 之前使用逗号，因为不需要分隔文件的结尾。

```
IEnumerable stockexpo = stockexp; // Assign value
    MemoryStream output = new MemoryStream();
    StreamWriter writer = new StreamWriter(output, Encoding.UTF8);
    writer.Write("ItemNo,");
    writer.Write("Repeat Count");
    writer.WriteLine();
    foreach (StockResult order in stockexpo)
    {
        writer.Write(order.ItemNumber);
        writer.Write(",");
        writer.Write(order.Count);
        writer.WriteLine();
    }
    writer.Flush();
    output.Position = 0;

    return File(output, "text/comma-separated-values", "stockexp.csv"); 
```

# scala - 练习：在 Scala 中实现 Stream

> ID：11983593
> 
> 赞同：2
> 
> 时间：2012-08-16T08:48:41.147
> 
> 标签：scala, functional-programming

我正在关注这本书`Functional programming in Scala`，特别是您实现简单 Stream 特征和伴随对象的部分。作为参考，这是我们迄今为止在伴生对象中的内容

```
object Stream {
  def empty[A]: Stream[A] =
    new Stream[A] {
      def uncons = None
    }

  def cons[A](hd: => A, tl: => Stream[A]): Stream[A] =
    new Stream[A] {
      lazy val uncons = Some((hd, tl))
    }

  def apply[A](as: A*): Stream[A] =
    if (as.isEmpty)
      empty
    else
      cons(as.head, apply(as.tail: _*))
} 
```

到目前为止的特征：

```
trait Stream[A] {
  import Stream._

  def uncons: Option[(A, Stream[A])]

  def toList: List[A] = uncons match {
    case None => Nil: List[A]
    case Some((a, as)) => a :: as.toList
  }

  def #::(a: => A) = cons(a, this)

  def take(n: Int): Stream[A] =
    if (n <= 0)
      empty
    else (
      uncons
      map { case (a, as) => a #:: (as take (n - 1)) }
      getOrElse empty
    )
} 
```

下一个练习需要我编写一个实现`takeWhile`，我认为下面会做

```
 def takeWhile(f: A => Boolean): Stream[A] = (
    uncons
    map { case (a, as) => if (f(a)) (a #:: (as takeWhile f)) else empty }
    getOrElse empty
  ) 
```

不幸的是，似乎我得到了一个我无法追踪的方差错误：

```
error: type mismatch;  found   : Stream[_2] where type _2 <: A 
required: Stream[A]
Note: _2 <: A, but trait Stream is invariant in type A.
You may wish to define A as +A instead. (SLS 4.5)
           getOrElse empty
           ^ 
```

我可以添加方差注释，但在此之前，我想了解这里出了什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:30:30.550

这似乎是类型推断的问题，因为如果您明确指定 subexpression 的类型，它就会起作用`uncons map { case (a, as) => if (f(a)) (a #:: (as takeWhile f)) else empty }`。

```
def takeWhile(f: A => Boolean): Stream[A] = {
  val mapped:Option[Stream[A]] = uncons map {
    case (a, as) => if (f(a)) (a #:: (as takeWhile f)) else empty
  }
  mapped getOrElse empty
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:11:57.357

要完成其他答案，请`empty`在此行：

```
map { case (a, as) => if (f(a)) (a #:: (as takeWhile f)) else empty } 
```

推断为`empty[Nothing]`，这意味着`(a #:: (as takeWhile f)) else empty`推断为`Stream[Foo <: A]`并且由于 a`Stream[A]`是预期的并且`Stream`是不变的，因此您有一个错误。

所以这给了我们最干净的方法来解决这个问题：只需注释`empty`：

```
map { case (a, as) => if (f(a)) (a #:: (as takeWhile f)) else empty[A] } 
```

然后它编译得很好。

这不会发生在原始`Stream`版本中，因为它是协变的，所以要么你真的想`Stream.empty`成为 a `Stream[Nothing]`（就像`Nil`是 a一样`List[Nothing]`），要么你不在乎。

现在，究竟为什么它被推断为`empty[Nothing]`而不是`empty[A]`，这可能隐藏在 SLS 6.26.4“本地类型推断”中的某个地方，但这部分不能真正被指责为易于阅读......

作为一个经验法则，每当你调用方法时总是要保持怀疑：

*   具有类型参数，其唯一推断方法是预期的返回类型（通常是因为它们没有参数），
*   并且同时预期的返回类型本身应该是从其他地方推断出来的。

# php - 标签的查找表，区分大小写

> ID：11983600
> 
> 赞同：0
> 
> 时间：2012-08-16T08:49:01.227
> 
> 标签：php, mysql, case-sensitive

我正在尝试在用户键入时实施主题标签建议，所以我正在构建一个这样的主题标签表：

```
CREATE TABLE IF NOT EXISTS `hashtags_weight` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `hashtag` varchar(140) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `tot` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `hashtag` (`hashtag`,`tot`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 
```

我稍后会查询：

```
SELECT hashtag  FROM hashtags_weight WHERE hashtag LIKE 'foob%' ORDER BY tot DESC 
```

我从中获取主题标签的来源来自先前插入的主题标签。现在，虽然这都是非常基本的东西，但我认为最好建议一个带有最常用案例的主题标签。假设我有一张桌子：

```
10 Foobar
5 FooBar
2 foobar 
```

这意味着已经使用了 10 次 Foobar，5 次 FooBar 和 2 次 foobar。现在，我想将主题标签计为 17，并在自动完成期间仅建议 Foobar。

当然，我可以通过一些数组排序来做到这一点，但我已经看到这需要很多时间（有很多行）。我想听听一些不同的方法来解决这个问题。

ps这项工作将每晚运行，因此无需超快。我只是想确保我做得正确。当然，我可以向 Db 添加更多表，这没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:55:48.257

更新您的查询：

```
SELECT count(*) as count,hashtag  FROM hashtags_weight WHERE hashtag LIKE 'foob%' GROUP BY hashtag ORDER BY tot DESC 
```

添加计数和分组依据，它应该可以工作，因为您的表格已经不区分大小写。

不知道你是如何到达已经购买的 10,5 和 2 我假设你是用 PHP 做到的

编辑：

我看到你用'tot'。这算不算总数？在这种情况下：

```
SELECT hashtag,sum(tot) as total FROM hashtags_weight WHERE hashtag LIKE 'foob%' GROUP BY hashtag ORDER BY tot DESC 
```

# windows - 如何在 NSIS 中创建从 Execwait 函数开始到 Execwait 结束的进度条？

> ID：11983606
> 
> 赞同：1
> 
> 时间：2012-08-16T08:49:13.503
> 
> 标签：windows, installation, nsis, progress

如何在 NSIS 中创建从 Execwait 函数开始到 Execwait 结束的进度条？

我有一个自定义页面，在自定义页面的离开功能中，我正在调用其他一些功能，然后我调用卸载程序来安装以前的版本。我想显示进度条或任何其他 UI，只是为了向用户传达正在进行的卸载。在此卸载后，将调用当前版本的安装。

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:53:42.693

如果您正在执行 MSI，则有一个[API](http://msdn.microsoft.com/en-us/library/Aa370573)，因此您可以监控进度。NSIS 对此没有本机支持...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:32:07.830

您可以使用[Marquee 插件](http://nsis.sourceforge.net/Marquee_plug-in)在`ExecWait`通话期间显示滚动文本：

```
Marquee::start /NOUNLOAD /color=0x000000 /top=80 "Running $PROGRAM"
ExecWait "$PROGRAM"
Marquee::stop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:38:38.653

我认为不可能监控`ExecWait`进展。

我可以修改通过 启动的卸载程序`ExecWait`，尝试在该部分显示进度。

# python - 如何解决没有属性 timedelta 的“datetime.datetime”问题？

> ID：11983609
> 
> 赞同：26
> 
> 时间：2012-08-16T08:49:27.263
> 
> 标签：python, datetime

我将如何在 Python 上解决这个问题。这是我的代码：

```
 import time
    import datetime
    from time import mktime
    from datetime import datetime

    date = '20120814174530'
    date_to_strp = time.strptime(date, '%Y%m%d%H%M%S') #convert the value of date into strptime
    date_final = datetime.fromtimestamp(mktime(date_to_strp))
    #convert date_to_strp so so i can use it to subtract a value from a timedelta later

    date_substracted = date_final - datetime.timedelta(hours = 36) 
```

这有一个错误：

> 类型对象“datetime.datetime”没有属性“timedelta”

即使 I `import datetime`，我认为它已被 覆盖`from datetime import datetime`，但是当我更改 and 的位置时`import datetime`，`from datetime import datetime`错误是：

> 'module' 对象没有属性 'fromtimestamp'

我可以用这段代码修复这两个错误：

```
 import time
    from time import mktime
    from datetime import datetime

    date = '20120814174530'
    date_to_strp = time.strptime(date, '%Y%m%d%H%M%S')
    date_final = datetime.fromtimestamp(mktime(date_to_strp))

    import datetime

    date_substracted = date_final - datetime.timedelta(hours = 36) 
```

现在，有了这段代码，它可以正常运行，但我想要的是所有导入部分都将作为一个好的做法放在顶部，任何关于我将如何做到这一点的建议，而不会出现任何错误，或者关于我将如何做的任何建议以其他方式对其进行编码。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-16T08:54:40.010

使用`datetime.datetime.fromtimestamp`或将导入更改为`from datetime import datetime as dt`并使用`dt.fromtimestamp`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-07T23:12:09.000

我想你应该像这样单独导入 timedelta 。

```
from datetime import datetime as dt, timedelta 
```

然后你可以打电话

```
dt.fromtimestamp(mktime(date_to_strp)) 
```

和

```
timedelta(hours = 36) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-17T19:12:07.683

不要使用直接导入，例如：

```
import decimal
import datetime 
```

会导致：

```
datetime.datetime.today()
decimal.Decimal() 
```

考虑一下：

```
from datetime import datetime
from decimal import Decimal
print datetime.now()
print Decimal("1") 
```

# ios - 警告：openssl_x509_read()：提供的参数不能被强制转换为 Mac 上的 X509 证书

> ID：11983612
> 
> 赞同：3
> 
> 时间：2012-08-16T08:49:36.140
> 
> 标签：ios, openssl, x509certificate

我尝试在 mac 上使用证书创建签名：

```
$pkcs12 = file_get_contents($this->certPath);

$certs = array();

if(openssl_pkcs12_read($pkcs12, $certs, $this->certPass) == true) {

    $certdata = openssl_x509_read($certs['cert']);
    $privkey = openssl_pkey_get_private($certs['pkey'], $this->certPass );

    openssl_pkcs7_sign($paths['manifest'], $paths['signature'], $certdata, $privkey, array(), PKCS7_BINARY | PKCS7_DETACHED);

    $signature = file_get_contents($paths['signature']);
    $signature = $this->convertPEMtoDER($signature);

    file_put_contents($paths['signature'], $signature);

    return true;
} 
```

但它给了我：

> 警告：openssl_x509_read()：提供的参数不能被强制转换为 X509 证书！

我发现有人说这是 UTF-8 BOM 问题，但在这种情况下不是问题，我该怎么办？

谢谢！

# jquery - 如何使用jquery计算宽度和边距

> ID：11983622
> 
> 赞同：2
> 
> 时间：2012-08-16T08:50:10.227
> 
> 标签：jquery, html

我做了一个小函数来计算宽度以及 li 的边距，但它给了我错误。

```
<head>

<style>

.bill ul{ list-style:none}

.bill ul li{ float:left; width:94px; margin-right:18px}

.bill ul li:last-child { margin-right:0}

</style>

<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">

$(function (){

    $('.bill').find('li').each(function (){
            var jn += parseInt($(this).css('margin-right')) + $(this).width();
        })

        alert(jn)

    })

</script>

</head>

<body>

<div class="bill">
<ul>
<li>aaa</li>
<li>aaa</li>
<li>aaa</li>
<li>aaa</li>
<li>aaa</li>

</ul>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:54:45.113

您正在使用传递给的匿名函数内`jn`的关键字声明变量，这意味着该变量将在该函数内部作用域并且不存在于它之外。`var``.each()`

尝试调用`alert(jn)`可能会导致`undefined`收到警报，因为该`jn`变量在该语句的范围内不可见。

此外，声明变量并使用`+=`运算符是无效的语法。该变量必须存在才能添加到它的值。尝试以下操作：

```
$(function (){
    var jn = 0;

    $('.bill').find('li').each(function (){
        jn += parseInt($(this).css('margin-right')) + $(this).width();
    });

    alert(jn);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:53:12.227

更好的方法是使用 jQuery position() [http://api.jquery.com/position/](http://api.jquery.com/position/)

# ios - 如何在 NSOperationQueue 中暂停 NSOperation？

> ID：11983625
> 
> 赞同：18
> 
> 时间：2012-08-16T08:50:26.133
> 
> 标签：ios, macos, cocoa, nsoperation, nsoperationqueue

我需要暂停一个插入到 NSOperationQueue 中的正在运行的 NSOperation。目前我正在取消所有操作并重新启动它们。但这会导致在完成的​​过程方面出现某种重复。我尝试使用 NSOperationQueue 的 setSuspended 标志。但这并没有暂停操作。有什么出路吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T09:06:31.697

看到这个：[链接](https://stackoverflow.com/a/3945778)

这里来自[苹果文档](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)：

> 挂起和恢复队列 如果要暂时停止操作的执行，可以使用 setSuspended: 方法挂起相应的操作队列。
> 
> 暂停队列不会导致已经执行的操作在其任务中间暂停。它只是防止新操作被安排执行。您可能会暂停队列以响应用户暂停任何正在进行的工作的请求，因为期望用户最终可能希望恢复该工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T10:03:49.627

我没有尝试过，但我可能会从这里开始：

*   为您的子类添加`isPaused`标志`NSOperation`
*   实现操作数据的复制/移动方法
*   如果暂停，`setCancelled:`（注意这个变化`-main`）
*   创建一个新操作，将状态从暂停操作移动到新操作
*   调整优先级以重新排序队列中的操作顺序，如果你喜欢
*   将克隆添加到队列中
*   从`-main`如果在返回`-main`

请注意，这只会暂停它。如果您真的想暂停并明确恢复，您可以在要恢复时手动“新操作”。

现在，如果您正在观察或有特殊的完成，那么您将遇到一些其他问题。对于简单的情况，这种方法似乎可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-16T07:52:49.247

> 在 Swift 5 中，您可以使用 isSuspended 属性来暂停和恢复您的 OperationQueue，您可以查看示例以获得更多理解：-

```
let operationQueue = OperationQueue()

let op1 = BlockOperation {
    print("done")
}
let op2 = BlockOperation {
    print("op2")
}
let op3 = BlockOperation {
    print("op3")
}

op1.addDependency(op2)
operationQueue.addOperations([op1, op2, op3], waitUntilFinished: false)

operationQueue.isSuspended = true
print("operationQueue suspended")

if operationQueue.isSuspended {
    operationQueue.isSuspended = false
    print("operationQueue restarted")
}

OutPut:- 
op2
op3
operationQueue suspended
operationQueue restarted
done 
```

# objective-c - popViewController 不适用于 UIAlertView

> ID：11983641
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:51:13.023
> 
> 标签：objective-c, ios, cocoa-touch, uialertview

我在使用 AlertView 时遇到问题。我正在尝试使用`UIAlertView`，单击确定后它将返回到上一个屏幕，但似乎没有任何建议？

```
if (xGPSCoordinate==0 && yGPSCoordinate == 0) {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" 
                                                    message:@"Failed to load the to get your current location"
                                                   delegate:self 
                                          cancelButtonTitle:@"Ok" 
                                          otherButtonTitles:nil, nil];
    [alert show];
    [alert release];

    return;
    [self.navigationController popViewControllerAnimated:YES];
} 
```

或者

```
if (xGPSCoordinate==0 && yGPSCoordinate == 0) {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"iPoly" 
                                                    message:@"Failed to load the to get your current location"
                                                   delegate:self 
                                          cancelButtonTitle:@"Ok" 
                                          otherButtonTitles:nil, nil];
    [alert show];
    [alert release];
    [self.navigationController popViewControllerAnimated:YES];
    return;

} 
```

两者都不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:55:17.287

为此，您必须使用`UIAlertView`'s 委托方法。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex; 
```

首先在你的`@interface` `<UIAlertViewDelegate>`

然后设置委托，`self.yourAlertView.delegate=self`;

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

       if(buttonIndex==0)//first button which should be the OK button
       {

              [self.navigationController popViewControllerAnimated:YES];

       }

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:04:32.867

使用 UIAlertView 的委托方法，见 iNoob 给出的答案。如果在“返回”之后写任何东西是没有意义的；声明为“return;”下面的代码 语句永远不会被执行。

有关 UIAlertView 委托的更多详细信息，请参阅苹果开发人员链接[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)

或警报视图的简单教程 [http://mobile.tutsplus.com/tutorials/iphone/uialertview/](http://mobile.tutsplus.com/tutorials/iphone/uialertview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:00:25.893

您只需要实现 UIAlerView 委托方法。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{} 
```

在这里将 Pop 的代码写到上一个控制器。您可以单击按钮索引并在此基础上使用。不要将 UIAlertViewDelegate 与接口一致。

# php - 如何在php中列出子目录而不显示父目录

> ID：11983643
> 
> 赞同：-1
> 
> 时间：2012-08-16T08:51:14.783
> 
> 标签：php, html

我遇到了我只想显示子目录但我从谷歌获得的代码的问题，它同时显示了父目录和子目录。我的代码在这里：

```
 foreach(glob('Comments/*', GLOB_ONLYDIR) as $dir){
       echo "<a href=comment.php?dir=". $dir . " >". $dir ."</a><br/>";
    } 
```

“评论”是父目录。和每个子目录，我将它们添加到每个标签链接。这段代码的结果是：

```
 Comments/New Folder1
    Comments/New Folder2
    Comments/New Folder3
          .
          .
          . 
```

我想这样展示：

```
 New Folder1
    New Folder2
    New Folder3
          .
          .
          . 
```

请大家帮助我...提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:54:06.563

```
$foldername = basename($dir); 
```

[`basename()`](http://php.net/basename)（也适用于文件夹）

# sharepoint - 如何在子网站上创建页面布局

> ID：11983645
> 
> 赞同：1
> 
> 时间：2012-08-16T08:51:22.410
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我需要为 wsp 导出创建一个子站点。但是，当我想为我的内容类型创建新的页面布局时，它会显示一个错误，指出该内容类型在网站集上不可用。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T11:01:47.673

尝试在 pages 文档库中添加内容类型 要遵循的步骤：1）子站点中的 pages 文档库 2）从功能区单击库和库设置 3）检查所需的内容类型是否可用。如果没有添加所需的内容类型。

# c++ - 如何从包装在类中的成员访问包装类的成员

> ID：11983648
> 
> 赞同：0
> 
> 时间：2012-08-16T08:51:35.403
> 
> 标签：c++, wrapper

例如。我得到了：“wrapper.h”

```
class wrapper : public QWidget
{
    Q_OBJECT
    public:
    Wrapped_class m_class;

    private:
    QTimer* m_timer;
} 
```

“Wrapped_class.h”

```
class Wrapped_class
{
public:
Wrapped_class();
public slots:
f(); // slot which is called when m_timer send signal timeout()

} 
```

“Wrapped_class.cpp”

```
Wrapped_class::Wrapped_class()
{
QOBject::connect(wrapper::m_timer, SIGNAL(timeout()), this, SLOT( f()))
} 
```

我收到无法访问 wrapper::m_timer 的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:52:54.717

你需要一个`pointer`or`reference`类来访问它的`non static`成员。包装时将a 传递`pointer`给包装的类

将这样的内容添加到您的`Wrapped_class`：

```
void Wrapped_class::setWrapper(wrapper *w)
{
    m_wrapper = w;
} 
```

并在包装对象时调用此函数。在构造函数中初始化`m_rapper`为`nullptr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:59:40.560

根据您的意图和系统设计，您可以选择：

1.  将“包装”类的指针或引用传递给“包装”类。请注意，您必须将包装类定义为 a`friend`才能访问`private`成员。

2.  编写“包装器”类的成员函数来处理两个类之间的交互。（这并不真正符合您的限制，但它是一种设计替代方案。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:53:43.310

`m_timer`不是静态成员，因此您不能那样访问它。在`Wrapped_class.cpp`你需要包装类的实例来使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:58:03.383

除了`wrapper::m_timer`不是静态的问题外，它也是*私有*的，这意味着`Wrapped_class`无法访问它。您需要交`Wrapped_class`朋友`wrapper`才能访问私人成员。

# php - 范围内的 Sphinxsearch 数字

> ID：11983650
> 
> 赞同：0
> 
> 时间：2012-08-16T08:51:39.010
> 
> 标签：php, html, search, sphinx

使用 Sphinxsearch，我如何搜索范围内的数字（使用 2 个 HTML 输入选择：最小值和最大值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:23:11.097

将数字设为属性 [http://sphinxsearch.com/docs/current.html#attributes](http://sphinxsearch.com/docs/current.html#attributes)

然后使用 setFilterRange

```
$cl->setFilterRange('price',intval($_GET['min']),intval($_GET['max'])); 
```

# android - android：如何将图像添加到相册

> ID：11983654
> 
> 赞同：3
> 
> 时间：2012-08-16T08:51:48.820
> 
> 标签：android, photos

任何人都可以分享代码（或指向我的 Android 示例代码）来帮助我将图像添加到媒体商店（图库）中的相册。

在我的应用程序中，我从我们的服务器下载图像，并使用相机（通过 Intent）拍摄新图像。

我想将这些图像组织在一个特定于应用程序的相册中，类似于 Facebook（和其他应用程序）应用程序所做的，保持相关图像井井有条。

不久前，我按照 Media Store API 文档进行了研究，但它对我不起作用....所以需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-09T15:12:04.200

这是一种用于将图像存储在公共图片文件夹中的方法，其中包含自定义应用程序文件夹。

```
public void saveImageToExternal(String imgName, Bitmap bm) throws IOException {
    //Create Path to save Image
    File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES+appFolder); //Creates app specific folder
    path.mkdirs();
    File imageFile = new File(path, imgName+".png"); // Imagename.png
    FileOutputStream out = new FileOutputStream(imageFile);
    try{
        bm.compress(Bitmap.CompressFormat.PNG, 100, out); // Compress Image
        out.flush();
        out.close();

        // Tell the media scanner about the new file so that it is
        // immediately available to the user.
        MediaScannerConnection.scanFile(context,new String[] { imageFile.getAbsolutePath() }, null,new MediaScannerConnection.OnScanCompletedListener() {
            public void onScanCompleted(String path, Uri uri) {
                Log.i("ExternalStorage", "Scanned " + path + ":");
                Log.i("ExternalStorage", "-> uri=" + uri);
            }
        });
    } catch(Exception e) {
        throw new IOException();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T08:58:58.823

您可以使用：

```
 MediaStore.Images.Media.insertImage(ContentResolver cr, Bitmap source, String title, String description); 
```

而且我确定在某些子菜单中的某个地方[http://developer.android.com/guide/](http://developer.android.com/guide/)显示了一个命令，要求 MediaStore 扫描确定的文件夹，我现在找不到它。

**编辑：** 找到它：

```
 MediaScannerConnection.scanFile(Context context, String[] path, null, null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:06:37.147

这是我最终用来执行此操作的代码：

```
public static Uri addToTouchActiveAlbum( Context context, String title, String filePath ) {
    ContentValues values = new ContentValues(); 
    values.put( Media.TITLE, title ); 
    values.put( Images.Media.DATE_TAKEN, System.currentTimeMillis() );
    values.put( Images.Media.BUCKET_ID, filePath.hashCode() );
    values.put( Images.Media.BUCKET_DISPLAY_NAME, Constants.TA_PHOTO_ALBUM_NAME );

    values.put( Images.Media.MIME_TYPE, "image/jpeg" );
    values.put( Media.DESCRIPTION, context.getResources().getString( R.string.product_image_description ) ); 
    values.put( MediaStore.MediaColumns.DATA, filePath );
    Uri uri = context.getContentResolver().insert( Media.EXTERNAL_CONTENT_URI , values );

    return uri;
} 
```

它适用于我在“getExternalStorage()”(/storage/sdcard0) 中的图像

我还想添加我在不同文件夹中的图像（我在 Context.getExternalCacheDir() 返回的文件夹下创建的 cacheDir）。问题：我不知道他们的 mime 类型（这有关系吗？），文件夹是不同位置的不同文件夹，名称不同 - 我不知道如何添加到“专辑”本身.....因为专辑名称似乎来自文件夹名称....

或者换一种说法：

```
values.put( Images.Media.BUCKET_DISPLAY_NAME, Constants.TA_PHOTO_ALBUM_NAME ); 
```

似乎没有任何效果？

# c# - 我们如何使用 ASP.Net RegularExpressionValidator 来支持多语言？

> ID：11983656
> 
> 赞同：1
> 
> 时间：2012-08-16T08:51:55.183
> 
> 标签：c#, asp.net, regex

我正在使用 ASP.Net RegularExpressionValidator 进行验证。

纯文本

```
^(a-z|A-Z|0-9)*[^#$%^&*()\']*$ 
```

仅限字母数字

```
^[a-zA-Z0-9]*$ 
```

仅限数字

```
^[0-9]*$ 
```

我需要使用这些表达式来处理多语言（日语、中文等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:55:27.597

使用[Unicode 属性](http://www.regular-expressions.info/unicode.html#prop)。

例如：

`\p{L}`任何语言的任何类型的信件

`\d`一个数字，在 .net 中，这些字符速记类是基于 Unicode 的。

`\p{Nd}`除表意文字外的任何文字中的数字 0 到 9

`\p{N}`任何脚本中的任何类型的数字字符。例如允许像“VII”这样的罗马数字

关于您的第一个表达式：范围（`a-z`部分）只能在字符类内部使用。所以该部分在`(a-z|A-Z|0-9)`字面上匹配“az”、“AZ”或“0-9”。

您可以将您的第一个表达式更改为

```
^[\p{L}\d]*[^#$%^&*()\']*$ 
```

你的第二个可能是

```
^[\p{L}\d]*$ 
```

或者

```
^[\p{L}\p{Nd}]*$ 
```

和最后一个

```
^\d*$ 
```

或者

```
^\p{Nd}*$ 
```

# objective-c - iOS 开发：应用程序在重新打开时崩溃

> ID：11983664
> 
> 赞同：0
> 
> 时间：2012-08-16T08:52:40.637
> 
> 标签：objective-c, ios

我的应用程序快完成了，但是当我测试它时，第一次使用时一切都运行良好且流畅。但是，从主页按钮关闭它并在我点击我的背部时重新打开它；它崩溃了。

在我的后退按钮中，我只有以下代码：

```
 [view1 removeFromSuperview];
        [view2 removeFromSuperview];
        [self view3]; 
```

可能是什么问题呢？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:06:19.433

为什么按下后退按钮时要从超级视图中删除视图。

还有你认为会发生什么

[自我观点3]；?

我建议您是否在 viewDidLoad 方法中添加了视图

您应该使用 viewdidUnload 方法而不是在后退按钮方法中删除它们。就像您尝试删除已发布的视图一样，您的应用程序将崩溃。

如果您尝试不同的东西，那么您需要显示更多代码。

# ruby-on-rails - 使用 ruby 脚本/服务器设置本地服务器后，如何键入 linux 命令？

> ID：11983667
> 
> 赞同：0
> 
> 时间：2012-08-16T08:52:51.500
> 
> 标签：ruby-on-rails, ruby

我是编程和 ruby​​ on rails 的新手。这个问题可能有点傻。

在我使用“ruby script/server”命令在 Ubuntu 终端中设置了一个服务器（基本上是一个空的）之后。我的“用户名：~$”标签不见了，我知道如何再次输入终端的唯一方法是关闭服务器或 Ctrl + z。当我尝试编辑服务器的内容（例如编写控制器）时，如何保持服务器运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:01:15.317

使用 ruby​​ 脚本/服务器 &。添加 & 将在免费中运行服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:20:04.897

打开另一个终端，

cd 应用程序目录

并运行您想要的任何命令。因此，您的命令不会因页面加载而受到影响

# c - 如何在不调用外部程序的情况下测量进程的内存使用情况

> ID：11983672
> 
> 赞同：3
> 
> 时间：2012-08-16T08:53:02.927
> 
> 标签：c, unix, memory, process, linux-kernel

可以通过运行显示进程的内存使用情况：

```
$ ps -C processname -o size
 SIZE
 3808 
```

有没有办法在不执行`ps`（或任何外部程序）或阅读的情况下检索这些信息`/proc`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T09:09:07.150

**在Linux系统**上，可以通过读取查询进程的内存使用情况`/proc/[pid]/statm`。`[pid]`进程的PID在哪里。如果一个进程想要查询它自己的数据，它可以通过读取`/proc/self/statm`来实现。[`man 5 proc`](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)说：

> /proc/[pid]/statm
> 
> ```
>  Provides information about memory usage, measured in pages.  The
>           columns are:
> 
>               size       total program size
>                          (same as VmSize in /proc/[pid]/status)
>               resident   resident set size
>                          (same as VmRSS in /proc/[pid]/status)
>               share      shared pages (from shared mappings)
>               text       text (code)
>               lib        library (unused in Linux 2.6)
>               data       data + stack
>               dt         dirty pages (unused in Linux 2.6) 
> ```

您可以使用：打开文件`fopen("/proc/self/statm", "r")`并读取内容。

由于文件以“页面”返回结果，因此您还需要查找页面大小。[`getpagesize ()`](http://www.kernel.org/doc/man-pages/online/pages/man2/getpagesize.2.html)返回页面的大小，以字节为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:17:12.097

您有几个选项可以查找程序的内存使用情况：

*   在 Valgrind 或 memprof 等分析器中运行它。
*   exec/proc_open/fork 一个新的进程来使用`ps`, `top`, 或者`pmap`像你从命令行一样
*   捆绑`ps`到您的应用程序中并直接使用它（它是[开源](http://procps.sourceforge.net/)的，当然！）
*   使用`/proc`系统（`ps`反正就是这样……）
*   创建一个内核报告，它监视进程内存操作。文件系统只是内核内部数据结构的`/proc`一个视图，所以这实际上已经为您完成了。
*   开发自己的机制来计算内存使用量而无需内核帮助。

从系统管理的角度来看，前者都是教育性的，并且是现实生活中的最佳选择，但最后一个要点可能是最有趣的。您可能想阅读 Valgrind 或 memprof 的源代码以了解它是如何工作的，但本质上您需要做的是在应用程序和内核之间插入您的机制，并拦截任何内存分配请求。此外，当进程启动时，您可能希望使用预设值（如 0xDEADBEEF）初始化其内存空间。然后，在该过程完成后，您可以读取内存空间并计算预设值以外的单词的出现次数，从而估算出内存使用情况。

当然，事情总是比看起来更复杂。共享库使用的内存呢？管道？您的进程和另一个进程之间的共享内存？系统调用？已分配但未使用的虚拟内存？缓冲到磁盘的数据？除了您的问题“过程记忆”之外，还有很多电话需要拨打，请参阅[这篇文章](https://stackoverflow.com/q/131303)了解其他一些问题。

# jquery - 显示器和浏览器屏幕分辨率网站设计

> ID：11983676
> 
> 赞同：0
> 
> 时间：2012-08-16T08:53:15.870
> 
> 标签：jquery, html, css

我将不得不重新设计我的公司网站以适应不同的访问计算机屏幕甚至手机，当前页面主要使用 div 标签（我听说他们想将所有当前的 html 页面更改为 php ）。我听说过流体设计，但它提供的不是如何将页面缩小到某些特定大小，例如使用 number%，是吗？

我不知道从这里去哪里。请提供任何建议和说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:56:24.743

这可以在 CSS 中完成。对您来说最好的办法是搜索流畅的 CSS 布局。这里有几个不错的：

[http://www.projectseven.com/whims/cssp_3box/](http://www.projectseven.com/whims/cssp_3box/)

[http://www.dynamicdrive.com/style/layouts/category/C10/](http://www.dynamicdrive.com/style/layouts/category/C10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:59:32.680

那么您可以使用 css 媒体查询来使您的布局响应检查：[http ://webdesignerwall.com/tutorials/5-useful-css-tricks-for-responsive-design](http://webdesignerwall.com/tutorials/5-useful-css-tricks-for-responsive-design)

此外，如果您希望使用 php 检测不同的浏览器/平台，请检查：[检测 iPhone 浏览器](https://stackoverflow.com/questions/3827466/detect-iphone-browser)和 [http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:11:13.307

您可以使用“响应式”设计或坚持标准屏幕分辨率“1024”或您的统计数据中的任何内容

# ruby - 红宝石十进制 (8.0 + 63.27 = 71.27000000000001)

> ID：11983677
> 
> 赞同：0
> 
> 时间：2012-08-16T08:53:23.613
> 
> 标签：ruby, decimal

在 irb 中执行以下操作时： `8.0 + 63.27` 产生以下结果： `=> 71.27000000000001`

有谁知道这是怎么回事？

更好的是，有人知道如何纠正这个问题吗？

```
ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0] 
```

编辑：感谢有关浮点计算的文章。编程了这么多年都不知道，我觉得很愚蠢。

（删除了错误标签）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:59:13.820

这是处理[浮点值](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)时的常见问题（不是错误） 。如果您需要准确的表示，请使用`BigDecimal`（在标准库中可用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:02:10.403

对于为什么会得到此结果的外行描述，请尝试[为什么浮点计算如此不准确？](http://effbot.org/pyfaq/why-are-floating-point-calculations-so-inaccurate.htm). 对于一些真正丰富的细节，[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

为了缓解这些问题，请按照其他答案中的建议使用[BigDecimal](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)，或者您可以尝试使用[Flt](http://flt.rubyforge.org/)，这是一个用于 Ruby 的任意精度浮点库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:57:18.233

这不是错误，这是由于浮点在内部表示的方式。内部浮动使用`base 2`. 由于这个原因，一个以十为基数的有限表示的数字可以在以二为基数的情况下成为周期性的。在一些计算后转换回来可以显示您所指的行为。要解决这种情况，请避免检查相等的浮点值，而是将它们与合理的 epsilon 进行比较。

# asp.net-web-api - 从 Web API RC 升级到 Web API RTM

> ID：11983679
> 
> 赞同：1
> 
> 时间：2012-08-16T08:53:33.827
> 
> 标签：asp.net-web-api

我看到昨天微软发布了Web API RTM。但是，我似乎找不到任何关于从 RC 到 RTM 发生了什么变化的日志以及关于发生了什么变化的任何提示。

我们有一项服务可以在下周投入生产，我不确定是在项目后期推出 RC 还是升级到 RTM。它增加了什么价值？

谢谢乌巴尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:20:17.120

@filip_woj 在[这里](http://www.strathweb.com/2012/08/asp-net-web-api-is-released-whats-new-in-web-api-rtm-and-how-to-use-it/)有一篇好文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:52:23.827

可以在 www.asp.net上[找到官方发行说明。](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253817)

正如@Aliostad 所提到的，我写了一篇[概述文章](http://www.strathweb.com/2012/08/asp-net-web-api-is-released-whats-new-in-web-api-rtm-and-how-to-use-it/)，重点介绍了正在发生的变化，并包括一些代码示例和其他参考资料。

Henrik 还写了一篇很好的[概述文章](http://blogs.msdn.com/b/henrikn/archive/2012/08/15/asp-net-web-api-released-and-a-preview-of-what-s-next.aspx)- 并且还专注于作为 NuGet 包（OData、跟踪、帮助页面和 Win8 格式库）提供的带外功能的预览。

如果您问是否应该升级 - 显然是的。没有太多的重大更改，所以它应该是相当轻松的，并且你会得到一个成熟的、可生产部署的产品。恕我直言，这很值得。

# php - 从网站向英国号码发送短信

> ID：11983682
> 
> 赞同：-2
> 
> 时间：2012-08-16T08:53:36.470
> 
> 标签：php, mobile, sms-gateway

有可能做到这一点吗？我已经读过它可以对美国号码进行，但我希望有机会向人们发送短信更新，如果他们已经订阅，但如果可能的话，只需使用 PHP 发送他们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:56:54.787

是的，您只需要支持英国号码的[SMS 网关服务。](https://www.google.co.uk/search?q=uk+sms+gateway+provider&oq=uk+sms+gateway+provider&sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8)

我不会推荐一个具体的，但谷歌会折腾很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:08:14.070

查找 SMS 服务提供商。我使用了 Esendex，但还有很多其他的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:00:42.920

是的你可以。您可以参考[Nexmo](http://www.nexmo.com/)寻求帮助。它提供免费的 API 和预建库，可与您的网站/平台集成，以极低的价格向 200 多个国家/地区发送 SMS。

免责声明：我是 Nexmo 团队的成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:57:49.877

查看 cbfsms，我认为他们提供您描述的服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:00:06.800

使用 email2sms：[http ://en.wikipedia.org/wiki/List_of_SMS_gateways](http://en.wikipedia.org/wiki/List_of_SMS_gateways)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-16T08:55:58.330

与电话运营商联系并询问他们是否可能以及您需要什么...

# c++ - WinDbg 和内联函数

> ID：11983683
> 
> 赞同：0
> 
> 时间：2012-08-16T08:53:42.227
> 
> 标签：c++, debugging, stack, windbg

我正在尝试调试故障转储，并且我想检查堆栈上某个变量的值。问题是发布版本中已内联了一些方法，但我想转储此变量（dv）。

如果我转到堆栈帧并执行 dv 命令，它会显示该特定函数的所有变量，但不会显示内联调用中的变量。

我可以执行一个 uf（unassmeble 函数）命令来查看汇编代码，但它需要做很多工作才能弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:57:57.687

在优化的构建中通常是不可能的。优化器可能决定不为变量分配内存，因此研究汇编代码以确定哪个寄存器是变量是唯一的方法。此外，如果“省略帧指针”开关打开，调试器将不会正确显示堆栈上分配的任何变量。

您可以尝试添加代码以将您感兴趣的变量记录到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:27:34.397

不幸的是，您将不得不通过拆卸来解决这个问题。如果您对此还不满意，那么现在是开始练习的好时机，这是调试棘手问题的宝贵技能。

此外，虽然它现在对您没有帮助，但 Visual Studio 2012 生成的 PDB 文件格式现在可以更好地跟踪内联函数。因此，在未来，这种特殊情况应该在大多数情况下得到缓解。您可以在此处阅读有关该功能的更多信息：

[http://dotnet.dzone.com/news/debugging-optimized-code](http://dotnet.dzone.com/news/debugging-optimized-code)

# regex - TCL 正则表达式模式搜索

> ID：11983690
> 
> 赞同：1
> 
> 时间：2012-08-16T08:53:59.097
> 
> 标签：regex, tcl

我正在尝试找到如下模式匹配 `abc(xxxx):efg(xxxx):xyz(xxxx)`- `xxxx`[0-9] 数字

我用了

```
set string "my string is abc(xxxx):efg(xxxx):xyz(xxxx)"
regexp abc(....):efg(....):xyz(....) $string result_str 
```

它返回 0。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:33:52.747

您遇到的问题是，它对 Tcl（`(`以及`)`许多其他 RE 引擎）中的正则表达式具有特殊含义，因为它们表示捕获子 RE。为了使字符“正常”，必须用反斜杠对其进行转义，这意味着最好将正则表达式放在大括号中（因为反斜杠是一般的 Tcl 元字符）。

因此：

```
% set string "my string is abc(xxxx):efg(xxxx):xyz(xxxx)"
% regexp {abc\(....\):efg\(....\):xyz\(....\)} $string
1 
```

如果您还想捕获这些括号的内容，*则*需要稍微复杂的 RE：

```
regexp {abc\((....)\):efg\((....)\):xyz\((....)\)} $string \
        all abc_bit efg_bit xyz_bit 
```

请注意，这些`....`序列总是完全匹配四个字符，但最好更具体。在每种情况下匹配任意数量的数字：

```
regexp {abc\((\d+)\):efg\((\d+)\):xyz\((\d+)\)} $string -> abc efg xyz 
```

^(当`regexp`用于提取字符串的位时，将其`->`用作整个字符串匹配的（相当奇怪的）变量名是很常见的；它看起来像是在说“将提取的片段发送到这些变量”。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:59:09.820

未与 tcl 一起使用，但似乎您需要转义`(`and `)`。此外，如果您确定`x`'s 将是数字，请使用`\d{4}`而不是`....`. 基于此，您可以尝试的更新正则表达式是

`abc\(\d{4}\):efg\(\d{4}\):xyz\(\d{4}\)`.

# windows-7 - 为什么当我的任务栏按钮组策略是“总是组合”时这些图标不组合？

> ID：11983699
> 
> 赞同：0
> 
> 时间：2012-08-16T08:54:34.863
> 
> 标签：windows-7, taskbar

我的系统是 Win7 Ultimate 32bit，我的任务栏按钮组策略是“总是合并，隐藏laybels”。

有一个程序有一些快捷方式，当我通过单击不同的快捷方式打开该程序时，我发现图标没有按照政策所说的那样组合。

所有这些快捷方式都针对相同的位置。谁能告诉我为什么会发生这种情况以及如何组合所有这些图标？谢谢

PS：系统提示我是新用户，无权发图....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:31:13.690

应用程序确实可以控制它们的任务栏外观，但用于启动它们的快捷方式也很重要。如果一个快捷方式指定了[应用程序模型 ID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391569%28v=vs.85%29.aspx)，而另一个快捷方式没有指定（您可能创建了一个？），则 Windows 可能会确定这是两个不同的应用程序（或具有不同“模式”的同一个应用程序）

如果应用程序未调用[SetCurrentProcessExplicitAppUserModelID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378422%28v=vs.85%29.aspx)，那么如果您运行同一应用程序的 32 位和 64 位版本，则自动生成的 Id 也可能不匹配...

# c# - IQueryable 全选？

> ID：11983710
> 
> 赞同：0
> 
> 时间：2012-08-16T08:55:14.423
> 
> 标签：c#, asp.net, visual-studio-2010, linq

我有这个方法，它选择特定范围内的数据（pageIndex 和 pageSize）

```
public PagedList(IQueryable<T> source, int pageIndex, int pageSize)
    {            
        this.AddRange(source.Skip(pageIndex * pageSize).Take(pageSize).ToList());
    } 
```

我想创建一个选择所有数据的重载方法，所以，这是我的代码

```
public PagedList(IQueryable<T> source)
    {
       //this.AddRange(source.Select(x => new T()).ToList()); (1)
        this.AddRange(source.AsQueryable().ToList()); (2)
    } 
```

首先，我尝试了（1），但它不接受 T。然后我尝试了（2），建议我应该将参数类型设为 INumerable 而不是 IQueryable。在这种情况下选择所有数据的解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T08:58:58.157

你可以像这样简单地做到这一点：

```
public PagedList(IEnumerable<T> source) 
{ 
    this.AddRange(source);
} 
```

*   `IEnumerable<T>`作为参数类型而不是`IQueryable<T>`，因为您不使用任何特定于`IQueryable<T>`.
*   不`AsQueryable`，因为您只想要所有数据
*   否`ToList`，因为`List<T>.AddRange`内部已经执行了副本。将`ToList`进行两次复制操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:59:25.360

会有什么问题：

```
public PagedList(IQueryable<T> source)
{
    this.AddRange(source.ToList());
} 
```

使某些东西可查询，然后使其成为列表似乎很奇怪。特别是考虑到源已经是可查询的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:00:53.367

IEnumerable 和 IQueryable 都很好，它只取决于你实际需要什么。

为了更好的案例 sudy，您可以阅读此内容。

[IQueryable<T> 和 IEnumerable<T> 有什么区别？](https://stackoverflow.com/questions/252785/what-is-the-difference-between-iqueryablet-and-ienumerablet)

# jquery - 如何使用jQuery调整自定义对话框的位置？

> ID：11983713
> 
> 赞同：2
> 
> 时间：2012-08-16T08:55:27.713
> 
> 标签：jquery, ruby-on-rails, jquery-ui, dialog

我有一个自定义对话框，现在我需要将自定义对话框定位到所需位置，如何在 .html.erb 文件中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:29:49.753

With the widget .dialog() **jQuery UI provides an option to change the position** of your dialog box.

Using it is as simple as : `$("#selector").dialog({position:"center"}); // center is default value`

or later with `$("#selector").dialog("option","position","center");`

Possible values :

*   a single string representing position within viewport: 'center', 'left', 'right', 'top', 'bottom'.
*   an array containing an x,y coordinate pair in pixel offset from left, top corner of viewport (e.g. [350,100])
*   an array containing x,y position string values (e.g. ['right','top'] for top right corner).

# php - PHP SQL 从哪里选择

> ID：11983714
> 
> 赞同：3
> 
> 时间：2012-08-16T08:55:28.893
> 
> 标签：php, mysql

我在运行一些 SQL 代码时遇到了一些困难。

我想要做的是，找到一个包含正确用户名的行，然后从该正确的行中获取一个值。

这是我在 php 中的 SQL：

```
mysql_query("SELECT * FROM users WHERE joined='$username' GET name") 
```

如您所见，它在 users 中查找用户名，然后一旦找到，它必须从正确的行中获取一个值。

我怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-16T08:58:33.133

您需要一些额外的 PHP 代码（调用 mysql_fetch_array）来处理 MySQL 返回的结果资源。

```
$result = mysql_query("SELECT name FROM users WHERE joined='$username'");

$row = mysql_fetch_array($result);

echo $row['name']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T08:56:51.727

```
mysql_query("SELECT `name` FROM users WHERE joined='$username' ") 
```

只需像上面一样在“选择子句”中选择正确的列。

编辑：如果您刚刚开始，您可能想要遵循这样的教程[，](http://www.phpeveryday.com/articles/PHP-Data-Object/PDO-Tutorial-P842.html)它应该会带您逐步完成（更重要的是最新功能），这将使您入门。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T08:57:47.177

```
mysql_query("SELECT name FROM users WHERE joined='$username'") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T08:59:33.837

```
$q = mysql_query("SELECT * FROM users WHERE joined='$username'");

$r = mysql_fetch_array($q);

$name = $r['user_name']; // replace user_name with the column name of your table 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T08:59:59.560

```
mysql_query("SELECT name FROM users WHERE joined='$username' ") 
```

阅读文档：[http ://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# iphone - Xcode在静态单元格上设置附件标记错误

> ID：11983715
> 
> 赞同：0
> 
> 时间：2012-08-16T08:55:29.970
> 
> 标签：iphone, ios, uitableview

我的应用程序的“设置”页面有问题。我选择使用静态单元格，所以我有几个表格部分，每个部分有 3-4 个单元格。

在 viewDidLoad 我加载我的 NSUserDefaults 并设置附件标记，如下所示：

```
...
}
else if ( ... my Condition3 ... ) {
    indexPath = [NSIndexPath indexPathForRow:2 inSection:0];
}
UITableViewCell* cell = [settingsTable cellForRowAtIndexPath:indexPath];
cell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

这工作正常，它使用复选标记设置具有匹配设置的单元格。但是，这仅适用于默认显示在屏幕上的单元格。任何需要滚动的单元格不包含复选标记。

有没有办法解决这个问题，最好不必使用动态单元格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T09:01:59.683

啊，我终于想通了。cellForRowAtIndexPath 使应用程序崩溃，因此我必须执行以下操作：

我使用上面的代码（在问题中）在我的 viewDidAppear 方法中设置了需要复选标记的单元格。我还删除了所有复选标记，然后像以前一样在 didSelectRowAtIndexPath 方法中的选定单元格中添加一个。

在这两种方法中，我将一个 NSString 变量设置为所选单元格的 .textview.text ，然后实现此方法：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    cell.accessoryType = UITableViewCellAccessoryNone;

    if ([cell.textLabel.text isEqualToString:[NSString stringWithFormat:@"%@", myFirstString]] || [cell.textLabel.text isEqualToString:[NSString stringWithFormat:@"%@", mySecondString]]) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:05:02.273

那是因为当您滚动时，您的单元格会被重建并且复选标记会被清除。

您需要在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# c# - 在 WPF 中使用 Codeplex 模板

> ID：11983716
> 
> 赞同：1
> 
> 时间：2012-08-16T08:55:40.653
> 
> 标签：c#, .net, wpf, visual-studio-2010, xaml

我使用 Visual Studio 2010 创建了一个基本应用程序。为了修改现有外观和改进 GUI，我尝试浏览模板并找到 Codeplex。然后下载一个exe并安装它。

不知道之后应该做什么！检查了视觉工作室项目设置。与模板无关。

我是 WPF 的新手。任何想法如何进行？周围有很多文章指出可以在 codeplex 中找到主题，但没有关于 2 如何使用它的文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:08:52.053

你的意思是WPF主题吗？请检查链接 [http://wpf.codeplex.com/wikipage?title=WPF%20Themes](http://wpf.codeplex.com/wikipage?title=WPF%20Themes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:08:42.830

好的，伙计们，让我们一步一步来。经过几个小时的努力，我确实将 Codeplex 模板应用到了我的项目中。

（这对其他人来说可能听起来很简单。（无论如何都是为了像我这样的初学者！）

第一的，

1）右键单击引用选项卡（在项目的解决方案资源管理器下找到）。

2) 单击“添加引用”并导航到“浏览”选项卡并选择 WPFToolkit.dll

3）这是最棘手的部分。为此，请从 codeplex [1 Link](http://wpf.codeplex.com/wikipage?title=WPF%20Themes#)下载 WPFToolKit.msi 。

4）您将需要.net 3.5 sp1 框架。请参阅我在[此处的 1 警告处的回答](https://stackoverflow.com/questions/10662131/cannot-install-net-framework-3-5/11983083#11983083)

5) 安装成功后，除了安装状态外什么都不会显示。

6) 现在，为 WPFTookKit.dll 浏览您的程序文件。对我来说，它位于“C:\Program Files\WPF Toolkit\v3.5.50211.1”中

7) 完成此操作后，按照下一步将 xaml 文件添加到您的项目。

8) 正如 Oleg 所说，在解决方案资源管理器中右键单击项目，选择 Add --> Existing File 并选择适当的 .xaml 文件（在我的情况下，我使用了来自[here](http://wpf.codeplex.com/downloads/get/62512)的表达式暗模板）

9) 现在双击 App.XAML 文件并在下面添加以下条目 []，不带 '[' 和 ']'。

10) 刷新 MAINWINDOW.XAML，此时，您的主题应该已被应用。

# php - 如何在 kohana 2.x 中验证 doc 文件

> ID：11983717
> 
> 赞同：1
> 
> 时间：2012-08-16T08:55:41.407
> 
> 标签：php, kohana, kohana-2

我正在尝试验证用户上传的文件。我正在使用 Kohana 2.3.4。

我已经为文件应用了验证规则。只允许上传 doc、docx 和 PDF。但问题是它正在验证 pdf 而不是 doc 或 docx。

这是我的代码

```
$file = Validation::factory($_FILES);       
$file->add_rules('applicant_cv','upload::valid','upload::required','upload::type[doc,docx,pdf]','upload::size[5M]');

if($file->validate()){
    echo 'No validation errors found ';
}
else{

    echo 'Validation errors were found for uploader'.'<br />';
    $errors = $file->errors();
    foreach ($errors as $key => $val)
    {
        echo $key.' failed rule '.$val.'<br />';
    }

} 
```

请指导我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:23:15.383

您是否检查了您的 mime 配置（默认为 in `system/config/mimes.php`）以查看您是否为无法正常工作的扩展指定了 mime 类型？这是第三次检查`upload::type`。

# linq - EF如何按日期过滤数据

> ID：11983725
> 
> 赞同：6
> 
> 时间：2012-08-16T08:56:16.133
> 
> 标签：linq, entity-framework, entity-framework-4

我使用 EF 4，我的`DateTimeStart`实体中有一个属性，日期格式为这种格式`16/08/2012 08:14:40`，我想用 EF 查询并找到所有实体`within the date 16/08/2012 only`。使用下面的代码我收到此错误

```
The specified type member 'Date' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported. 
```

我的代码

```
 DateTime dateTimeNow = DateTime.UtcNow;
        DateTime dateNow = dateTimeNow.Date;
        return db.EventCustoms.Where(x => x.DataTimeStart.Date <= dateNow)
            .Select(y => new { y.EventId, y.EventTitle, y.DataTimeStart }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T09:08:01.090

```
DateTime dateTimeNow = DateTime.UtcNow;
DateTime dateTomorrow = dateTimeNow.Date.AddDays(1);
return db.EventCustoms.Where(x => x.DataTimeStart < dateTomorrow) 
            .Select(y => new { y.EventId, y.EventTitle, y.DataTimeStart }); 
```

**[编辑]** @GibboK，详细说明一下：

实体框架无法在数据库端转换 DateTime 对象上的[Date属性。](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

您的选择是：

（1）（如上）重新考虑您的查询并尝试一种不需要在数据库端为表中的每一行调用函数的解决方案......这对查询性能也有好处

(2) 或者如果这不可能，您可以使用[EntityFunctions类，该类公开了](http://msdn.microsoft.com/en-us/library/dd412643)**可由**EF 转换为底层数据源的适当本机函数的方法（例如[TruncateTime](http://msdn.microsoft.com/en-us/library/dd395596)） 。

 **例如

```
return db.EventCustoms
    .Where(x => EntityFunctions.TruncateTime(x.DataTimeStart) <= dateNow) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:02:26.097

```
DateTime dateTimeNow = DateTime.UtcNow;
        DateTime dateNow = dateTimeNow.Date;
        return db.EventCustoms.Where(
             x => EntityFunctions.DiffDays(x.DataTimeStart, dateNow) >= 0)
            .Select(y => new { y.EventId, y.EventTitle, y.DataTimeStart }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T09:00:18.273

在 EF 6 中：

```
using System.Data.Entity;
...
db.EventCustoms.Where(x => 
 DbFunctions.TruncateTime(x.DataTimeStart) <= DbFunctions.TruncateTime(dateNow)) 
```**

# osgi - 如何更改 Apache ACE 的端口？

> ID：11983728
> 
> 赞同：1
> 
> 时间：2012-08-16T08:56:24.707
> 
> 标签：osgi, port, apache-ace

我想将 Apache ACE 的端口更改为 80。我该怎么做？我找不到任何文档。我尝试将`Dorg.osgi.service.http.port`文件中的密钥值`platform.properties`从 8080 更改为 80。但在此之后，我无法登录 Apache ace。它给出了无效的用户名和密码消息。但是，如果我在端口 8080 上运行它，我可以通过相同的凭据登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:36:55.127

需要更新以下文件中的属性以更改端口。

1.  平台属性

    ```
     -Dorg.osgi.service.http.port 
    ```

2.  conf/org.apache.ace.webui.vaadin.cfg

    ```
     aceHost
       obrUrl 
    ```

3.  conf/org.apache.ace.server.activation.impl.cfg

    ```
     hostName
       obrUrl 
    ```

4.  conf/org.apache.ace.discovery.property.cfg

    ```
     serverURL 
    ```

5.  conf/org.apache.ace.deployment.provider.repositorybased.cfg

    ```
     url 
    ```

6.  conf/org.apache.ace.configurator.useradmin.task.UpdateUserAdminTask.cfg

    ```
     repositoryLocation 
    ```

7.  conf/org.apache.ace.client.automation.cfg

    ```
     hostName 
    ```

8.  conf/org.apache.ace.activation.matcher.cfg

    ```
     repositoryURL 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T13:25:06.893

在当前版本 (1.0.0) 中，您可以通过从位于 server(-allinone).jar 中的 laucher.properties 中删除以下行来实现您最初尝试的内容

```
org.apache.ace.server.port=8080
org.osgi.service.http.port=8080 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T13:46:30.897

在 1.0.0 中，我无法通过 -D 传入参数（之前已将其注释掉）。对我有用的是在 server-allinone.jar/launcher.properties 中设置端口号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T17:03:26.967

在 Ace 1.0 中，我们使用命令行属性来更改端口（在我们的例子中为 8083）：

```
java -Dorg.apache.ace.server.port=8083 -Dorg.osgi.service.http.port=8083 -jar server-allinone.jar 
```

这不再适用于 Ace 2.0.1，即我们可以更改端口但身份验证不起作用。我在launcher.properties 中确定了要更改的属性，但在命令行上设置它们而不是更改launcher.properties。这样就不必重新创建 jar。我使用的命令行是：

```
java -Dorg.apache.ace.server=localhost:8083 -Dorg.osgi.service.http.port=8083 -Dorg.apache.ace.obr=localhost:8083 -jar server-allinone.jar 
```

# jquery - opencart - 选项更改时价格自动更新（jquery）

> ID：11983729
> 
> 赞同：0
> 
> 时间：2012-08-16T08:56:33.223
> 
> 标签：jquery, option, product, opencart

我必须稍微修改一下 opencart 商店系统才能自动更新产品价格，所以我找到了一个我已经修改了一些但现在遇到问题的脚本。

从 div 获取的原始价格，使用来自选定单选或选择选项的值进行更新。但是，当我在产品中有多个选项（多选或单选）时，价格不会相应更新：始终获取原始价格（从脚本中），并且在更改另一个选项时，它不会使用更新的价格更新它之前. 除此之外：当您选择一个选项，然后选择另一个选项并再次更改第一个选项时，它根本不会再更改任何内容。

jQuery脚本：

```
$(document).ready(function() {
   $('.option').change(function() {
   var OriginalPrice = $('#thisIsOriginal').text();
   OriginalPrice = OriginalPrice.replace( /,/,"." );

   var OriginalCurrency = OriginalPrice.substring(OriginalPrice.length - 1, OriginalPrice.length);
   OriginalPrice = OriginalPrice.substring(0,OriginalPrice.length - 1);

   if($('.option :checked').val()) {
    var newPriceValue = $('.option :checked').attr("id");
    newPriceValue = $("label[for='" + newPriceValue + "']").text();
   }
   if($('.option :selected').val()) {
    var newPriceValue = $('.option :selected').text();
   }

   newPriceValue = newPriceValue.replace( /,/,"." );

   var position1 = newPriceValue.indexOf("(");
   var position2 = newPriceValue.indexOf(")");
   position1 = position1+2;

   var finalPriceValue = newPriceValue.substring(position1, position2);
   if(newPriceValue.indexOf('.') == -1)
   {
    finalPriceValue = "0";
   }
   else
   {
    finalPriceValue = finalPriceValue.substring(0,finalPriceValue.length - 1);
   }
   console.log(finalPriceValue);

   finalPriceValue = parseFloat(finalPriceValue) + parseFloat(OriginalPrice);
   finalPriceValue = finalPriceValue.toFixed(2);
   finalPriceValue = finalPriceValue.replace( ".","," );

   $('#priceUpdate').text(finalPriceValue + OriginalCurrency);
   });
}); 
```

价格以欧元为单位，因此它会将其转换为正确的十进制值并返回。

希望它很清楚，有人可以提供帮助！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:13:41.317

假设您的代码的其他部分按预期执行（因为我看不到您的 html 示例）。还将假设您的所有无线电标签和选择标签都添加了 class="option" 。

目前，您正在检查是否每个 .option 都被选中或选中，但在可能有多个值时只得到一个值。

```
function get_final_price_value(newPriceValue)
{
  newPriceValue = newPriceValue.replace( /,/,"." );

   var position1 = newPriceValue.indexOf("(");
   var position2 = newPriceValue.indexOf(")");
   position1 = position1+2;

   var finalPriceValue = newPriceValue.substring(position1, position2);
   if(newPriceValue.indexOf('.') == -1)
   {
    finalPriceValue = "0";
   }
   else
   {
    finalPriceValue = finalPriceValue.substring(0,finalPriceValue.length - 1);
   }

  return parseFloat(finalPriceValue)
}

var runningTotalUpdatedPrice = parseFloat(OriginalPrice);

$('.option :checked').each(function(index) {
    var newPriceValue = $(this).attr("id");
    newPriceValue = $("label[for='" + newPriceValue + "']").text();
    var finalPriceValue = get_final_price_value(newPriceValue);
    runningTotalUpdatedPrice = runningTotalUpdatedPrice + finalPriceValue;
});
$('.option :selected').each(function(index) {
    var newPriceValue = $(this).text();
    var finalPriceValue = get_final_price_value(newPriceValue);
    runningTotalUpdatedPrice = runningTotalUpdatedPrice + finalPriceValue;
});

runningTotalUpdatedPrice = runningTotalUpdatedPrice.toFixed(2);
runningTotalUpdatedPrice = runningTotalUpdatedPrice.replace( ".","," );

$('#priceUpdate').text(runningTotalUpdatedPrice + OriginalCurrency); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:43:42.223

```
<script type="text/javascript">
function get_final_price_value(newPriceValue)
{

var position1 = newPriceValue.indexOf("(");
var position2 = newPriceValue.indexOf(")");

position1 = position1+2;

var finalPriceValue = newPriceValue.substring(position1, position2);

if(newPriceValue.indexOf('.') == -1)
{
 finalPriceValue = "0";

}
else
{
 finalPriceValue = finalPriceValue.substring(1,finalPriceValue.length - 1 );
}

 return finalPriceValue;
}

$(document).ready(function() {
$('.option').live('change',function() {
var OriginalPrice = $('#thisIsOriginal').text();
var OriginalCurrency = OriginalPrice.substring(0, 1);
OriginalPrice = OriginalPrice.substring(1);

var runningTotalUpdatedPrice = parseFloat(OriginalPrice);

$('.option :selected').each(function(index) {
    var newPriceValue = $(this).text();

    var finalPriceValue = get_final_price_value(newPriceValue);

    runningTotalUpdatedPrice = runningTotalUpdatedPrice +     parseFloat(finalPriceValue);
        });

 runningTotalUpdatedPrice = runningTotalUpdatedPrice.toFixed(2);

 $('#priceUpdate').text(OriginalCurrency + runningTotalUpdatedPrice  );

    }); 
 });
 </script> 
```

仅限英国

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:13:47.383

这是我用来改变期权价格的代码。此外，还可以选择更改产品图片。

```
$(document).ready(function() {

//total value
var total = 0;

//get the original price and convert to decimal (Euro prices)
var OriginalPrice = $('#thisIsOriginal').text();
OriginalPrice = OriginalPrice.replace( /,/,"." );

//get the currency (in Euro placed at the end of the string)
var OriginalCurrency = OriginalPrice.substring(OriginalPrice.length - 1, OriginalPrice.length);
OriginalPrice = OriginalPrice.substring(0,OriginalPrice.length - 1);

function calcTotal() {
    $("input:checked").each(function() {
        var value1 = $(this).attr("id");
        value1 = $("label[for='" + value1 + "']").text();
        value1 = value1.replace( /,/,"." );

        var position11 = value1.indexOf("(");
        var position12 = value1.indexOf(")");
        position11 = position11+2;

        var newPrice1 = value1.substring(position11, position12);
        if(value1.indexOf('.') == -1) {
            newPrice1 = "0";
        }
        else {
            newPrice1 = newPrice1.substring(0,newPrice1.length - 1);
        }

        total += parseFloat(newPrice1);
    });

    $("select option:selected").each(function() {
        var value2 = $(this).text();
        value2 = value2.replace( /,/,"." );

        var position21 = value2.indexOf("(");
        var position22 = value2.indexOf(")");
        position21 = position21+2;

        var newPrice2 = value2.substring(position21, position22);
        if(value2.indexOf('.') == -1) {
            newPrice2 = "0";
        }
        else {
            newPrice2 = newPrice2.substring(0,newPrice2.length - 1);
        }

        total += parseFloat(newPrice2);
    });
}

function imageUpdate( getoptionId ) {
    var value3 = $("label[for='option-value-" + getoptionId + "']").children("img").attr("src");

    var fileNameIndex = value3.lastIndexOf("/") + 1;
    var fileName = value3.substr(fileNameIndex);

    var fileTypeStart = fileName.indexOf("50x50");
    var fileTypeEnd = fileName.indexOf("50x50")+5;
    var fileType = fileName.substring(fileTypeEnd,fileName.length);

    var plainFileName = fileName.substring(0,fileTypeStart-1);

    var fullPath = value3.indexOf(fileName);
    fullPath = value3.substring(0,fullPath);

    var newPath = fullPath.replace("cache/","");

    var newFile = newPath + plainFileName + fileType;

    $("#imageUpdate > img").attr("src",newFile);
    $("#imageUpdate > img").attr({ width: '228px', height: '228px' });
}

$('.option').change(function() {
    total = 0;
    calcTotal();

    //add the collected changed prices on top of the original price
    total = parseFloat(total) + parseFloat(OriginalPrice);
    total = total.toFixed(2);
    total = total.replace( ".","," );

    //update the price value into the related div
    $('#priceUpdate').text('<span class="price-currency">' + OriginalCurrency + '</span> ' + total);

    var optionId = $(this).find("input:checked").val();
    imageUpdate(optionId);
});

}); 
```

希望这可以帮助！

# jquery - 标签内的换行符（按下输入）？

> ID：11983731
> 
> 赞同：0
> 
> 时间：2012-08-16T08:56:45.353
> 
> 标签：jquery

我有一个 div 可编辑内容，其中包含以下代码

```
<span id="id1">Hello </span>
<span id="id2">there </span>
<span id="id3">how </span>
<span id="id4">are </span>
<span id="id5">you? </span> 
```

现在的问题是当光标在这些跨度之一内并且我按 Enter 键时，我希望它是

```
<span id="id1">Hel[enter pressed here]</span>
<span id="xx">lo </span>
<span id="id2">there </span>
<span id="id3">how </span>
<span id="id4">are </span>
<span id="id5">you? </span> 
```

因此它会检测您是否在跨度中并将跨度拆分为新的跨度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:00:22.013

你可以使用 window.getSelection

tyr 这个 [http://jsfiddle.net/XRW4E/2/](http://jsfiddle.net/XRW4E/2/)

完整的解决方案：http: [//jsfiddle.net/XRW4E/5/](http://jsfiddle.net/XRW4E/5/)

# android - Android 操作群组联系人

> ID：11983732
> 
> 赞同：0
> 
> 时间：2012-08-16T08:56:49.313
> 
> 标签：android, contacts, group-concat

我想知道如何以组形式操作电话联系人，即创建、编辑、删除组、添加、删除、编辑特定组中的联系人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:07:05.483

您应该使用 ContentProvider 和[ContactsContract](http://developer.android.com/reference/android/provider/ContactsContract.Groups.html)，还可以查看有关使用联系人[的教程](http://developer.android.com/guide/topics/providers/contacts-provider.html)。

# c++ - boost/random/uniform_int.hpp 和 boost/random/uniform_int_distribution.hpp 可以互换使用吗？

> ID：11983745
> 
> 赞同：0
> 
> 时间：2012-08-16T08:57:32.167
> 
> 标签：c++, boost, random

boost 中有两个随机整数生成器，`boost::uniform_int<>`和`boost::random::uniform_int_distribution<>`，后者仅在 boost 1.47 之后添加。

我想知道它们的性能是否有任何差异（即它们生成的随机数的质量）？

此外，`boost::uniform_int<>`您需要通过 将其与随机引擎耦合`variate_generate`，但似乎在[boost 的官方网站](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_random.html)上您可以使用

```
boost::random::mt19937 rng;
boost::random::uniform_int_distribution<> six(1,6);
int x = six(rng); 
```

没有变量生成。

这两种用法可以互换使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:40:41.527

`boost::uniform_int<>`继承自`boost::random::uniform_int_distribution<>`并且如果您查看 的[标头](http://www.boost.org/doc/libs/1_48_0/boost/random/uniform_int.hpp)，`uniform_int<>`您会发现它基本上只是调用基类函数。

由于`uniform_int<>`只是调用`uniform_int_distribution<>`的函数，因此生成的数字没有区别。但是，Boost 确实明确指出`uniform_int<>`已弃用，`uniform_int_distribution<>`应将其用于所有新代码。

要回答您的第二个问题，既不需要`uniform_int<>`也不`uniform_int_distribution<>`需要`boost::random::variate_generator<>`功能。为了方便起见，`variate_generator<>`简单地将随机数生成器（如`boost::random::mt19937`）与随机数分布（如`uniform_int_distribution<>`）相关联。如果您不使用`variate_generator<>`，那么每次您希望生成随机数时都需要传递一个随机数生成器。这是一个例子：

```
#include <boost/random/uniform_int.hpp>
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/variate_generator.hpp>

#include <iostream>
#include <ctime>

int main()
{
  boost::mt19937 rand_generator(std::time(NULL));
  boost::random::uniform_int_distribution<> int_distribution(0, 100);

  //Need to pass generator
  std::cout << int_distribution(rand_generator) << std::endl;

  //Associate generator with distribution
  boost::random::variate_generator<boost::mt19937&,
                                   boost::random::uniform_int_distribution<>
                                   > int_variate_generator(rand_generator, int_distribution);

  //No longer need to pass generator
  std::cout << int_variate_generator() << std::endl;
} 
```

请注意，第一个电话是 to`uniform_int_distribution<> operator()`而第二个电话是 to `variate_generator<> operator()`。将生成器与分布相关联不会更改原始生成器或分布对象。

如果有任何不清楚的地方，请告诉我。

# git - `--squash` 和 `--no-ff --no-commit` 有什么区别？

> ID：11983749
> 
> 赞同：74
> 
> 时间：2012-08-16T08:57:46.547
> 
> 标签：git, merge, git-merge, fast-forward, squash

应该使用哪一个来隐藏微提交？

唯一的区别是`git merge --squash`和`git merge --no-ff --no-commit`其他父母的否认吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-16T09:25:56.467

# 差异

这些选项存在用于不同目的。您的存储库最终会有所不同。

假设您在主题分支上完成开发后，您的存储库是这样的：

![在此处输入图像描述](../Images/f977de1280ace3f1a7b5e07dfec9f32a.png)

* * *

## `--squash`

如果你 checkout master 然后`git merge --squash topic; git commit -m topic`，你会得到这个：

![在此处输入图像描述](../Images/743db9d657d8720a64782c6f816ae312.png)

* * *

## `--no-ff --no-commit`

相反，如果你这样做`git merge --no-ff --no-commit; git commit -m topic`，你会得到：

![在此处输入图像描述](../Images/063260707055911421b27944703219ba.png)

# 隐藏微提交

如果您真的想隐藏（我的意思是从您的存储库中*删除*）您的微提交，请使用`--squash`. 因为，正如您在上面的图片中看到的那样，如果您不进行压缩，您并没有真正隐藏您的微提交。此外，您通常不会将您的主题分支推向世界。主题分支是为了让主题变得成熟。

如果您希望历史记录包含所有微提交，但将它们留在另一条开发线（上图中的绿线），请使用`--no-ff --no-commit`. 但请记住，a) 这不是一个分支，并且 b) 在 Git 中没有任何意义，因为它只是您提交的另一个父级。

如果您真的想了解，请参阅[Git 分支 - 什么是分支。](http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is)

# ip - mod_security 白名单文件

> ID：11983753
> 
> 赞同：1
> 
> 时间：2012-08-16T08:57:57.940
> 
> 标签：ip, apache, whitelist, mod-security

当所有 IPS 都像 90.12.131 一样开始时，如何将 IP 添加到我的 mod_security“whitelist.file”。会开吗？

我尝试在 IP 之前添加 ^ 但它不起作用。^90.12.131

请问，有人吗？谢谢，奥兹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:54:59.943

```
SecRule REMOTE_ADDR "^90\.12\.131" "phase:1,nolog,allow" 
```

或者

```
SecRule REMOTE_ADDR "@ipMatch 90.12.131.0/24" "phase:1,nolog,allow" 
```

写入文件，像这样

whitelist.file，以点结尾

> 90.12.131。

```
SecRule REMOTE_ADDR "@pmf whitelist.file" "phase:1,nolog,allow" 
```

# mysql - htmlentities 和 mysql_real_escape_string

> ID：11983757
> 
> 赞同：1
> 
> 时间：2012-08-16T08:58:15.023
> 
> 标签：mysql

> **可能重复：**
> [htmlentities() 和 mysql_real_escape_string() 是否足以清除 PHP 中的用户输入？](https://stackoverflow.com/questions/4632663/is-htmlentities-and-mysql-real-escape-string-enough-for-cleaning-user-input)

在我的 sql 注入站点中，我使用了 mysql_real_escape_string 但现在假设有人想在论坛中输入 PHP 代码，因此使用了 htmlentities 函数。我的代码如下：

```
$not_con =mysql_real_escape_string(htmlentities($_POST['note'])); 
```

比我更新 sql db 更喜欢

```
 mysql_query("UPDATE forumtopic set forumDescri='$not_con' WHERE forum_id=$f_id"); 
```

现在，当我在文本框中输入简单的 PHP 代码时，就像`<?php echo "hi" ?>`没有问题一样，它成功地插入到数据库中。但是当我输入`<?php session_start(); echo "hi" ?>`时，它给出了错误，比如`FORBIDDEN you dont have permission 404 error`.help me in this

# java - 端口存在时获取 javax.comm.NoSuchPortException

> ID：11983764
> 
> 赞同：2
> 
> 时间：2012-08-16T08:58:37.643
> 
> 标签：java, serial-port

您好，我已经看到了[为什么当端口存在时我会收到 Java NoSuchPortException？](https://stackoverflow.com/questions/3026804/why-am-i-getting-a-java-nosuchportexception-when-the-port-exists)发布，但对我来说不是很清楚！

在设备管理器中，它显示 COM3 存在，我可以通过 putty 连接它，但是这段代码出现此错误/异常。

```
try {
       portId = CommPortIdentifier.getPortIdentifier("COM3");
    } catch (NoSuchPortException ex) {
       System.out.println(ex);
    }

try {
     serialPort = (SerialPort)portId.open("S2CFrameWork", 5000);
    } catch (PortInUseException e) {
        System.out.println(e);
    } 
```

这个简单的代码引发了 javax.comm.NoSuchPortException，我也尝试过使用枚举来获取可用端口列表，但它仍然显示异常。任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T05:06:07.630

## comm.jar 应该放在：

```
%JAVA_HOME%/lib

%JAVA_HOME%/jre/lib/ext 
```

## win32com.dll 应该放在：

```
%JAVA_HOME%/bin

%JAVA_HOME%/jre/bin

%windir%System32 
```

## javax.comm.properties 应该放在：

```
%JAVA_HOME%/lib

%JAVA_HOME%/jre/lib 
```

# sql - 在这里使用连接表是否合适

> ID：11983768
> 
> 赞同：0
> 
> 时间：2012-08-16T08:59:00.370
> 
> 标签：sql, database, database-design

如果我希望用户能够对存储在不同表中的内容发表评论，那么最好的方法是什么？

通过为每种内容类型的评论创建一个附加表。例如;

![桌子](../Images/95511eb231939aa46c2c2059e3494a37.png)

或者，使用一个表进行注释，并使用多个连接表。例如;

![加入表](../Images/20b55d446856dd43e4c43702b843a694.png)

或者，只需将每个表的外键添加到注释表中？

![外国的](../Images/d399ba83d2f25e09b13a40077c91259b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:10:54.017

我只需将每个表的外键添加到单个注释表中。如果这三者的评论格式相同，从长远来看，这将使您的事情变得更容易。值得一提的是，这意味着评论表中必须有可以为空的外键。

只有当页面的评论与帖子的评论不同时，才会使用您描述的第一种方法。否则，只有一个评论表要简单得多。

仅当您希望在多个页面上发布相同的评论（我怀疑您是否想要）时，才需要中间的表格。这称为多对多关系，但您描述的是一对多（一页、帖子或个人资料可以有很多评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:12:02.763

由于您不打算让多个页面/帖子/用户配置文件共享一个“评论”，因此最后一种方法并未完全标准化。它将允许数据异常和冗余。

第一个更正确，也更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:12:33.270

我个人会选择第一种方式，因为它更简单。但如果您最终倾向于第二种设计，则不需要“has_comments”表。而是在评论表中放置一个 fk 列和另一个具有 type_id 的列，其中包含评论是否属于页面、帖子等类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T09:14:34.640

我认为第一个选项是正确的方法。第二种方法感觉像是为了规范化而进行规范化的情况。问问自己：“我从第二种方法中得到什么？”。答案是在页面、帖子和 user_profiles 之间共享相同的评论。但实际上它们并不完全相同（您可能希望分别存储页面评论、帖子评论和用户个人资料评论）。所以你收获不大。

使用带有外键的选项 1。它将为您节省更多的麻烦。

# java - 检查终端是否打开

> ID：11983771
> 
> 赞同：1
> 
> 时间：2012-08-16T08:59:08.220
> 
> 标签：java

我现在正在使用 Ubuntu，并且可以通过 Java 代码打开终端。但是我的问题是，当我打开终端后关闭程序时，会看到一条消息说我打开的终端已关闭？

这是我打开终端的代码：

```
String command = "gnome-terminal -x bash cd ~/Desktop";
String cmd[] = { "gnome-terminal", "-x", "bash", "-c", "sudo gedit ~/Desktop/wat.txt" };
Runtime rt = Runtime.getRuntime();      
Process pr = rt.exec(cmd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:04:36.590

您可以在 Process 上调用[waitFor() 。](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#waitFor%28%29)API 说：

> 如有必要，使当前线程等待，直到此 Process 对象表示的进程终止。
> 
> 返回进程的退出值。按照惯例，0 表示正常终止。

如果您希望您的程序继续运行，请务必在单独的线程中调用您的代码。

# c# - 模式弹出窗口内的更新面板

> ID：11983773
> 
> 赞同：0
> 
> 时间：2012-08-16T08:59:11.773
> 
> 标签：c#, asp.net, .net, updatepanel

我在模式弹出窗口的更新面板中有一个 asp.net 复选框列表，我必须在单击模式弹出窗口之外的按钮时刷新它。我收到以下错误：在 UpdatePanel 'UpdatePanel6' 中找不到触发器的 ID 为 'btnAddFav' 的控件。请帮我解决这个问题。我无法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:17:32.983

请发布使用的代码。

您可以交叉检查模型窗口的 HTML 格式是否正确（所有正确的标签都已关闭/包含）。

# java - EJB 3.1 StartUp 单例 postconstruct 方法中长时间运行的线程中的异常

> ID：11983779
> 
> 赞同：1
> 
> 时间：2012-08-16T08:59:29.700
> 
> 标签：java, glassfish-3, ejb-3.1

嗨，在 Postconstruct 中启动并定期更新数据库的长时间运行的线程。

看起来像这样

```
 public void postconstruct() {
    Runnable runnable;
    runnable = new Runnable() {
        @Override
        public void run() {
            int interval = poissonRandomNumber(15);
            while (true) {
                try {
                    Map<Account, AccountUpdate> recentUpdates =
                            simulator.getRecentUpdates(tickDAO, securityDAO);
                    for (Map.Entry<Account, AccountUpdate> entry : recentUpdates.entrySet()) {
                        Account account = entry.getKey();
                        //                            String realised = getAccountReturn(parts, account);
                        Account accountByName = accountDAO.findAccountByName(account.getName());
                        if( accountByName == null  )
                        {
                            account.setAccountId(null);
                            accountByName = accountDAO.create(account);
                        }
                        int realised = new Random().nextInt(50);
                        boolean nextBoolean = new Random().nextBoolean();
                        realised = nextBoolean == true ? realised : -realised;
                        AccountUpdate accountUpdate = entry.getValue();
                        accountUpdate.setAccountId(accountByName);
                        accountUpdate.setDateCreated(new Date());
                        accountUpdate.setUnRealisedPL(new BigDecimal(realised));
                        accountUpdateDAO.create(accountUpdate);
                    }
                    Thread.sleep(interval);
                } catch (Exception ex) {
                    Logger.getLogger(ApplicationManager.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    };
    Thread tickThread = new Thread(runnable);
    tickThread.start(); 
```

每当我启动应用程序时，我都会遇到很多异常，因为看起来容器还没有准备好

我需要知道如何最好地使用 DAO，以及如何检测容器是否就绪

异常如下图

```
SEVERE: java.lang.NullPointerException
at com.sun.ejb.containers.util.pool.NonBlockingPool.returnObject(NonBlockingPool.java:285)
at com.sun.ejb.containers.StatelessSessionContainer.releaseContext(StatelessSessionContainer.java:602)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2055)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
at $Proxy270.create(Unknown Source)
at ucl.atrade.rnpvms.server.services.ApplicationManager$1.run(ApplicationManager.java:126)
at java.lang.Thread.run(Thread.java:722)

SEVERE: javax.ejb.EJBException: Attempt to invoke when container is in Undeployed
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1999)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at $Proxy265.findSecurityBySymbol(Unknown Source)
    at ucl.atrade.rnpvms.server.datafeed.AccountUpdateSimulator.getRecentUpdates(AccountUpdateSimulator.java:74)
    at ucl.atrade.rnpvms.server.services.ApplicationManager$1.run(ApplicationManager.java:108)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:37:42.827

正如此[链接](http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html#threads)中所解释的那样，

> EJB 规范将管理线程的责任分配给 EJB 容器。允许企业 bean 实例创建和管理线程会干扰容器控制其组件生命周期的能力。

这意味着`Runnable`在您的 EJB 中使用不是要走的路。

如果你想以给定的频率运行一些代码，你可以使用[Timer Service](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)。

如果在另一种方式上您需要在数据库更新完成时运行一些代码，即异步，您必须使用其他技术，如[JMS](http://docs.oracle.com/javaee/6/tutorial/doc/bncdq.html)、数据库触发器、持久性上下文共享/传播或[实体侦听器](http://www.objectdb.com/java/jpa/persistence/event)，具体取决于您的应用程序的要求。

# c# - 图片框和图像映射的工具提示

> ID：11983784
> 
> 赞同：4
> 
> 时间：2012-08-16T08:59:46.037
> 
> 标签：c#, winforms, tooltip, picturebox, mousemove

我有一个`PictureBox`分配给它的地图（基本上是一个`Rectangle`对象列表）。现在，如果用户将鼠标移到此图片框上，并且如果鼠标位于列表中存在的矩形上，我想这样做，则会弹出一个工具提示并显示一些信息。

映射工作正常，但问题是`ToolTip`它变得疯狂并且没有正确显示，它只是继续随着鼠标移动而弹出。我怎样才能编码它只在鼠标在矩形中时才会弹出？

这是我的代码，您可以在下面看到示例！

```
private void pictureBoxPackageView_MouseMove(object sender, MouseEventArgs e)
{
    if (PackageMap == null || PackageMap.Count == 0) return;
    var point = new Point(e.X, e.Y);

    foreach (var map in PackageMap)
    {
        if (map.Rectangle.Contains(point))
        {
            var tip = new ToolTip();
            tip.ToolTipTitle = map.Pin.Group;
            tip.Show("Result: " + map.Pin.Mk2Result, pictureBoxPackageView, point, 200);
            break;
        }
    }
} 
```

![在此处输入图像描述](../Images/4e3b07c96a2f6b36d0cbcd20df453ea5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:28:17.393

它不断弹出，因为您只检查光标是否在矩形内。请记住，您仍然可以多次移动鼠标，但您仍然在该矩形内。

我认为您想要的是在输入矩形时仅弹出一次工具提示。您应该记住鼠标的先前位置。如果当前位置在一个矩形内，则检查前一个位置是否不在同一个矩形内。这是显示工具提示的时间，否则通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T10:13:36.780

我将添加一个自定义侦听器来检测您希望显示不同工具提示的每个单独的矩形容器的[MouseEnter](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)事件和[MouseLeave事件，添加代码以在 MouseEnter 上显示工具提示 X 秒（使用](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseleave.aspx)[Show()](http://msdn.microsoft.com/en-us/library/67fds2ee.aspx)方法显示） . 如果用户将光标保持在矩形内，它将继续显示 X 秒（使用[AutoPopDelay](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.autopopdelay)属性在 X 秒后自动隐藏）。如果用户将光标移出，则 MouseLeave 事件应使用[Hide()](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.hide.aspx)方法。

当您一次将光标移动到多个区域时，我还将设置一秒延迟以防止打开多个工具提示。为此使用[InitialDelay](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.initialdelay)属性。

应该看起来像这样（不显示正确设置的属性）：

```
private void area1_MouseEnter(object sender, EventArgs e)
{
    tooltip.Show("text to display", window);
}

private void area1_MouseLeave(object sender, EventArgs e)
{
    tooltip.Hide(window);
} 
```

我要走的路线是扩展您正在使用的容器并将这些侦听器添加到自定义容器类中，特别是如果您正在创建几个都需要此功能的类似容器。

# java - 如果其中一个抛出异常，如何停止所有正在运行的线程？

> ID：11983789
> 
> 赞同：13
> 
> 时间：2012-08-16T09:00:03.663
> 
> 标签：java, multithreading

在我的一个应用程序中，我使用`ExecutorService`该类来创建一个固定的线程池并`CountDownLatch`等待线程完成。如果进程没有抛出任何异常，这工作正常。如果任何一个线程发生异常，我需要停止所有正在运行的线程并将错误报告给主线程。任何人都可以帮我解决这个问题吗？

这是我用于执行多个线程的示例代码。

```
 private void executeThreads()
    {
        int noOfThreads = 10;
        ExecutorService executor = Executors.newFixedThreadPool(noOfThreads);     
        try      
       {
        CountDownLatch latch = new CountDownLatch(noOfThreads);
        for(int i=0; i< noOfThreads; i++){
         executor.submit(new ThreadExecutor(latch));
        }
        latch.await();           
       }
       catch(Exception e)
       {
        e.printStackTrace();
       }
       finally
       {
        executor.shutDown();
       }
   } 
```

这是执行者类

```
 public class ThreadExecutor implements Callable<String> {
        CountDownLatch latch ;
        public ThreadExecutor(CountDownLatch latch){
            this.latch = latch;
        }   

    @Override
    public String call() throws Exception
    {
        doMyTask(); // process logic goes here!
        this.latch.countDown();
        return "Success";
    } 
```

==================================================== ============================

谢谢你们 ：）

我已经纠正了我的课程，如下所示，现在正在工作。

```
private void executeThreads()
    {
        int noOfThreads = 10;
        ExecutorService executor = Executors.newFixedThreadPool(noOfThreads);     
       ArrayList<Future<Object>> futureList = new ArrayList<Future<Object>>(noOfThreads );
    try
    {
        userContext = BSF.getMyContext();
        CountDownLatch latch = new CountDownLatch(noOfComponentsToImport);

        for(ImportContent artifact:artifactList){
            futureList.add(executor.submit(new ThreadExecutor(latch)));
        }

        latch.await();

        for(Future<Object> future : futureList)
        {
                  try
                  {
                      future.get();                 
                   }
                   catch(ExecutionException e)
                   {   //handle it               
                    }
        }           

    }
    catch (Exception e) {
       //handle it
    }
    finally
    {
        executor.shutdown();      

        try
        {
            executor.awaitTermination(90000, TimeUnit.MILLISECONDS);
        }
        catch (InterruptedException e)
        {
           //handle it
        }
    }
   } 
```

执行者类：

```
public class ThreadExecutor implements Callable<String> {
        private static volatile boolean isAnyError;
        CountDownLatch latch ;
        public ThreadExecutor(CountDownLatch latch){
            this.latch = latch;
        }   

    @Override
    public String call() throws Exception
    {

      try{
            if(!isAnyError)
            { 
               doMyTask(); // process logic goes here!
            }
     }
     catch(Exception e)
     {
        isAnyError = true ;
        throw e;
      }
      finally
      {
        this.latch.countDown();
       }
        return "Success";
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:38:08.997

使用一个`ExecutorCompletionService`, complete 和一个`ExecutorService`超过任务持续时间的（即它不会在之后被关闭）：

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.CompletionService;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorCompletionService;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

class Threader {

    static ExecutorService service = Executors.newCachedThreadPool();

    public static void main(String[] args) {
        new Threader().start();
        service.shutdown();
    }

    private void start() {
        CompletionService<Void> completionService = new ExecutorCompletionService<Void>(
                service);
        /*
         * Holds all the futures for the submitted tasks
         */
        List<Future<Void>> results = new ArrayList<Future<Void>>();

        for (int i = 0; i < 3; i++) {
            final int callableNumber = i;

            results.add(completionService.submit(new Callable<Void>() {

                                                     @Override
                                                     public Void call() throws Exception {
                                                         System.out.println("Task " + callableNumber
                                                                 + " in progress");
                                                         try {
                                                             Thread.sleep(callableNumber * 1000);
                                                         } catch (InterruptedException ex) {
                                                             System.out.println("Task " + callableNumber
                                                                     + " cancelled");
                                                             return null;
                                                         }
                                                         if (callableNumber == 1) {
                                                             throw new Exception("Wrong answer for task "
                                                                     + callableNumber);
                                                         }
                                                         System.out.println("Task " + callableNumber + " complete");
                                                         return null;
                                                     }
                                                 }

            ));
        }

        boolean complete = false;
        while (!complete) {
            complete = true;
            Iterator<Future<Void>> futuresIt = results.iterator();
            while (futuresIt.hasNext()) {
                if (futuresIt.next().isDone()) {
                    futuresIt.remove();
                } else {
                    complete = false;
                }
            }

            if (!results.isEmpty()) {
                try {
                /*
                 * Examine results of next completed task
                 */
                    completionService.take().get();
                } catch (InterruptedException e) {
                /*
                 * Give up - interrupted.
                 */
                    Thread.currentThread().interrupt();
                    throw new RuntimeException(e);
                } catch (ExecutionException e) {
                /*
                 * The task threw an exception
                 */
                    System.out.println("Execution exception " + e.getMessage());
                    complete = true;
                    for (Future<Void> future : results) {
                        if (!future.isDone()) {
                            System.out.println("Cancelling " + future);
                            future.cancel(true);
                        }
                    }
                }
            }
        }

    }
} 
```

输出类似于：

```
Task 0 in progress
Task 2 in progress
Task 1 in progress
Task 0 complete
Execution exception java.lang.Exception: Wrong answer for task 1
Cancelling java.util.concurrent.FutureTask@a59698
Task 2 cancelled 
```

由于任务 1 的失败，任务 2 被取消。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T09:04:34.707

我强烈建议您使用强大的机制来倒计时锁存器。使用一个包罗万象的`try-finally { latch.countDown(); }`检测线程中的错误使用一个单独的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:10:55.017

我认为您还需要一个线程，将其称为“观察者”，它将检查 for 的`AtomicBoolean`值`true`。设置后 - 您将关闭主要执行服务。请记住，关闭机制不能保证立即停止所有线程。阅读这个，例如：[Graceful shutdown of threads and executor](https://stackoverflow.com/questions/3332832)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T09:15:18.773

我认为你需要重组你的代码。看看[ExecutorService#invokeAny](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAny%28java.util.Collection%29)

> 执行给定任务，返回已成功完成的任务的结果（即，不抛出异常），如果有的话。正常或异常返回时，取消未完成的任务。如果在此操作进行时修改了给定的集合，则此方法的结果是不确定的。

这似乎是您需要的行为。而且您不需要`CountDownLatch`as `main`will 阻止`invokeAny`

# search - 如何在 Open Street Map (OSM) 上的 Nominatim 搜索中获取结果数量

> ID：11983792
> 
> 赞同：0
> 
> 时间：2012-08-16T09:00:15.647
> 
> 标签：search, openstreetmap, nominatim

早上好，

如果我们可以在应用程序中将 OSM 用于特定类型的 POI，或者我们是否需要从其他来源获取这些 POI，我们会尝试进行研究。为此，我们可以使用标签或 Nominatim 搜索。然而，结果总是至少是一个结果列表，例如在 XML 中。为几个关键字/标签解析 XML 然后计算条目将非常耗时。我尝试了 Nominatim API 文档并进行了几次网络搜索，但无法获得如何进行搜索或直接数据库查询的方法来获取搜索的结果计数，而不是结果本身。

您会为此使用哪种 API、方法和工具？我是 OSM 开发的新手，因此感谢您提供正确方向的任何提示。

问候，即

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:18:13.147

似乎 Nominatim 不支持这种类型的查询。但是您不必解析整个 XML/JSON 文件，只需计算顶级条目的数量即可。

[另请注意，根据使用政策](http://wiki.openstreetmap.org/wiki/Nominatim#Usage_Policy)，您不得进行批量查询。如果您有很多请求，最好[安装](http://wiki.openstreetmap.org/wiki/Nominatim/Installation)您自己的 Nominatim 实例或使用没有这些限制[的 MapQuest 的 Nominatim 实例。](http://open.mapquestapi.com/nominatim/)

# jenkins - 如何链接手动触发的下游作业，同时传递参数？

> ID：11983796
> 
> 赞同：13
> 
> 时间：2012-08-16T09:00:32.120
> 
> 标签：jenkins, jenkins-plugins

我正在使用 Jenkins 创建构建管道，并且需要在管道中触发部署步骤。这意味着一个手动过程（构建自动发生，定时，然后在部署阶段停止，等待手动授权）。

我还需要使用上一步中的参数触发部署步骤。

因此，使用“参数化插件”，我可以在作业之间传递参数。我可以触发自动或手动触发的下游作业（不确定这是标准功能，还是某些插件添加了手动构建）。

*但是*，我找不到任何方法来触发手动参数化作业。

有谁知道这样做的方法？我可以使用其他插件吗？

我需要参数的原因是我已经创建了一个通用的部署作业，并且需要传入模块名称和要部署的 maven 版本。我*可以*为每个模块创建特定的部署作业，但这会非常痛苦。

我也一直在考虑以下内容，但这似乎是一个杂项：

1.  自动化作业执行构建，触发“部署触发器”构建，传递参数。
2.  “部署触发器”将这些参数写入文件系统上的文件（构建步骤 - shell 执行），并手动触发*实际*部署作业
3.  部署作业（必须使用“部署触发器”作业中的 WORKSPACE）从文件系统读取参数（使用 EnvInject 插件）。

这种方法存在各种问题

1.  我只是不喜欢它。
2.  有一个中间作业*只是*为了传递参数。这使 Jenkins 工作区变得混乱
3.  由于构建是在同一个 WORKSPACE 上执行的，对我来说似乎很脆弱（尽管可行！）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-28T07:36:05.543

build-pipeline-plugin 的当前生产版本（1.4.2）允许它 - 使用参数指定手动下游作业，该参数显示在管道上并且可以从那里开始。老版本做不到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:51:02.430

看看**构建管道插件**：[https](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin) ://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin 。

您可以指定要自动触发或手动触发的作业。

此外，如果您需要在作业之间传递参数，则需要下载**Groovy 插件**：[https ://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)

为了传递参数，让我们说作业之间的 SVN 修订版，您需要在构建开始时**执行 System Groovy 脚本**。这是一个示例，它将添加可供任何下游作业使用的 SVN_UPSTREAM 参数。 **注意：**我注意到创建下游作业也有系统 groovy 脚本的问题。它似乎吹走了对创建的原始参数的任何引用。

```
import hudson.model.*
def build = Thread.currentThread().executable;
build.addAction(new ParametersAction(new StringParameterValue("SVN_UPSTREAM", build.getEnvVars()['SVN_REVISION'])));
println "SVN_UPSTREAM:" + build.getEnvVars()['SVN_UPSTREAM']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T14:24:49.603

有一种解决方法：

*   在上游作业中设置手动升级（在... > 仅在手动批准时升级）
*   在促销中指定添加操作>触发其他项目的参数化构建，指定作业并添加参数

一旦您手动提升上游作业的特定构建，它将启动下游作业的构建。但下游作业不会出现在管道上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T13:18:48.890

Build Pipeline Plugin 可以做到这一点，但在撰写本文时，尚未发布任何版本。我从 main（当时是 392 版）构建了插件，其中包括[这个问题](http://code.google.com/p/build-pipeline-plugin/issues/detail?id=54)中提到的[补丁](http://code.google.com/p/build-pipeline-plugin/issues/attachmentText?id=54&aid=540037000&name=patch.diff&token=QxrfIeDRreSdVjqI5lelFDdiUgY:1355743902615)，它对我有用。 安装后，您可以在第一个作业中使用名为“构建其他项目（手动步骤）”的构建后操作，您可以在那里配置要传递给第二个（手动触发）管道作业的参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-12T14:10:13.380

在我看来，没有可能实现目标

当您启动管道交付时，管道插件仅检查第一个作业的参数 -> 然后显示（或不显示）initParam 屏幕

但是当下一步（例如部署）是手动的并且它需要参数时，initParam 屏幕将被忽略查看问题[https://issues.jenkins-ci.org/browse/JENKINS-32336](https://issues.jenkins-ci.org/browse/JENKINS-32336)

# java - 通过许多条目提高 JCombobox 的性能

> ID：11983798
> 
> 赞同：2
> 
> 时间：2012-08-16T09:00:42.587
> 
> 标签：java, swing, jcombobox

我希望这个问题很有价值，但我会试一试......

我有一个相当复杂的 GUI，并希望稍微提高整体性能。我偶然发现了一些包含大量条目（最多 10000 行）的组合框。所有摆动元素的创建都已经优化，因此它们通常只初始化一次。但是，假设 10 个组合框模型总是在后台具有 10k 个条目，这似乎有点占用内存。

我已经实现了一个搜索功能，因此用户可以键入“B”，列表跳转到以“B”开头的第一个条目（如果添加更多字符，则进一步细化）。但这不会改变模型，只是重置选定的索引，所以列表仍然包含所有条目。

我的问题是：

是否有关于如何处理组合框中的大量条目的最佳实践？从用户的角度来看，您宁愿显示所有条目，还是只显示前 100 个以及按下按键后按需显示的其他条目？

或者问一个更具体的问题：

每次用户输入新键时，最好在内存中保留一个大的组合框模型，还是创建一个小的组合框模型（大约 100 个条目）？

感谢您的意见和建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:10:24.127

我会添加例如前 100 个和一个项目“更多...”或“显示全部”。当用户单击该项目时，会加载所有 10k 条记录。或者，如果用户开始输入，我会减去合适的范围（但也不超过 100）并将它们显示在列表中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:34:34.637

不应在 JComboBox 中显示 10000 个条目。您可以使用`JTextField`自动完成功能。Swingx 提供了一个实用程序来执行此操作：[AutoCompleteDecorator](http://download.java.net/javadesktop/swinglabs/releases/weekly/week-44-2006-10-29/swingx/javadoc/org/jdesktop/swingx/autocomplete/AutoCompleteDecorator.html)。

您还可以在[JXList](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/JXList.html)中显示数据（再次来自 swingx）并使用 JTextField 过滤其内容。

JList 是一个已经优化的组件。只有显示的数据（在滚动窗格视口中可见）被真正绘制。并且对于内存优化，[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)用于单元格渲染，只有一个 ListCellRendeter 用于绘制所有单元格。

如果由于某些原因，您必须使用 JComboBox。请注意，JCombobox 使用 JList 在 Popmenu 上显示数据，因此它具有上述好处。

为了提高模型的内存，您可以考虑延迟加载数据。但这有点复杂，因为您还需要自动完成功能。您的自动完成功能必须在持久化数据中搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:10:38.113

您的应用程序使用了多少内存？最初加载需要太长时间吗？

如今，台式机/笔记本电脑内存非常便宜。如果您的应用程序是专用/专业应用程序，也就是用户将在前台集中使用它，您希望为用户提供**速度**和响应能力高于一切。如果它是一种即时通讯工具，您可能希望保持其 RAM 指纹较低。

我的建议是将所有内容都保存在内存中，前提是 2012 年的计算机构建可以处理它。

编辑：从可用性的角度来看，StanislavL 的建议也很吸引我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T09:13:51.520

有这么多项目，ComoBox 不适合。您对智能搜索的想法很好，但您应该通过不预先填充 CB 来改进它，而是在用户键入并开始至少 1 或 2 个字符时异步加载数据。

# asp.net - Visual Studio 2010 未在设计器文件中生成新的控件定义

> ID：11983799
> 
> 赞同：2
> 
> 时间：2012-08-16T09:00:45.380
> 
> 标签：asp.net, visual-studio-2010, designer

我偶尔会遇到一个问题，在将新控件添加到 aspx 页面后，控件定义未在设计器文件中创建 - 这意味着它在代码隐藏中未定义。如果您在源代码中键入新控件或从工具箱拖放，则不会更新设计器。页面上没有错误或警告。

到目前为止，我只在使用嵌套母版页的 aspx 页面上看到它。在 aspx 页面上发生此错误的同时，设计器更新对用户控件起作用

从源视图切换到设计视图、保存、重新加载项目、重新启动 Visual Studio 的常用技巧不起作用。我对设计器文件有写权限。

我认为这可能是我安装的扩展程序的组合 - 但禁用所有扩展程序也无济于事。我不愿意实际卸载我的扩展 - 禁用*应该*会阻止它们加载，不是吗。

我不想尝试“转换为 Web 应用程序”，因为该项目已经是一个 Web 应用程序，这可能会影响项目中的所有页面，而不仅仅是出错的页面。

我不得不求助于手动编辑设计器文件——到目前为止这没有造成任何问题，但很痛苦。有谁知道允许重新生成单个设计器文件的扩展 - 或任何 KB 或修复或其他解决此问题的方法？

它的 Visual Studio 2010，针对 .Net Framework 3.5，在 C# 中隐藏代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:14:48.180

我在这里遇到了同样的问题，我删除了设计器文件，然后我做了***“转换为 Web 应用程序”***，重新创建了我的设计器文件，没有修改项目中的任何其他内容，只需确保您右键单击您的***aspx***页面并选择***“转换为 Web 应用程序”***菜单选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:07:14.303

我刚刚遇到了同样的问题，在网上搜索修复后，没有一个常用的技巧对我有用。最后我发现我添加的控件在现有的自定义控件中。

例如，我正在创建自己的用户密码检索部分（忘记了您的密码？），但开始在现有的

```
<asp.Login> 
```

标签。我的控件不是登录内容模板的一部分，我猜 asp.net 忽略了它们。

发生这种情况时，不会显示任何错误，也没有智能感知警告。您的控件在后面的代码中不可用。如果您手动将它们添加到设计器中，它们会在下次重新生成时丢失。如果您在 .cs 文件中声明它们，它们最终仍会成为*对象引用未设置*错误。

当您使用它太久并犯了一个愚蠢的错误时，需要注意一些事情。认为我应该添加这种补救措施，因为它似乎没有在其他地方涵盖。

# iis - 端口在防火墙中打开但仍被阻止

> ID：11983801
> 
> 赞同：1
> 
> 时间：2012-08-16T09:00:57.590
> 
> 标签：iis, sql-server-2008-r2

我正在构建我的第一个 IIS 平台。我已经为我的第一次安装成功打开了端口。我现在想为 POP gmail 的小应用程序打开端口 995（在端口 995 上）。根据以前的尝试，我已在防火墙中打开它。但是连接失败。如果我使用 [netstat -a] 查看所有打开的端口，则不包括 995。我可以问我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:02:49.183

如果我理解正确，您想在 995 端口上与 gmail 交谈。因此，该端口只会在连接打开时显示在您的计算机上使用。如果未打开，则不会显示在列表中。

如果您期待传入的请求，那么是的，该端口将在等待 connectios 时显示在 netstat 中。

# objective-c - 计划方法中的 deltaTime 是否考虑了 CCDirector 暂停的时间？

> ID：11983802
> 
> 赞同：1
> 
> 时间：2012-08-16T09:01:02.900
> 
> 标签：objective-c, cocos2d-iphone, schedule

我有一个每帧调用的更新方法。每次更新，它都会将其 deltaTime 添加到一个变量中。

如果我暂停 CCDirector 并在一段时间后恢复它，那么该预定方法中的 deltaTime 会很大吗？

我问是因为我正在追踪一个错误，在某些设备上，玩家可以在 iOS 设备上按下主页按钮，然后在一段时间后恢复应用程序，并且仍然添加了保存其 totalGameTime 的变量，就好像游戏没有t 被暂停。

当我使用 cocos2d 调度程序时，我的印象是不应该发生这种情况。

任何认为需要它的人的代码

```
//[self schedule:@selector(myUpdate:)];

float totalGameTime

-(void) myUpdate:(ccTime) dt {

    totalGameTime += (float) dt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:10:32.480

我注意到这也发生了，但只是在发布时。我通过添加来修复它：

```
[[CCDirector sharedDirector] setNextDeltaTimeZero:YES]; 
```

对我`-(void) applicationDidBecomeActive:(UIApplication *)application`

这可能是 2.0 版中的一个错误，因为我不记得在此版本之前发生过这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:10:46.357

不。据我所知，如果您暂停 cocos2d 或者由于操作系统中断（来电或其他原因）而经过大量时间，cocos2d 会重置增量时间。

您还可以通过记录增量时间来轻松测试。如果需要仅在大于 0.1f 左右时记录它。

# java - Java，在前台运行另一个应用程序

> ID：11983803
> 
> 赞同：6
> 
> 时间：2012-08-16T09:01:07.470
> 
> 标签：java, process, foreground

我想从 java 代码运行另一个应用程序。

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("cmd.exe"); 
```

进程已启动，但在后台。如何让它在前台运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:06:41.897

[Process#waitFor()](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#waitFor%28%29)是您正在寻找的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T09:16:29.740

您应该告诉 cmd.exe 您希望它在新窗口中打开：

```
Process pr = rt.exec("cmd.exe /c start"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:11:36.090

在处理外部进程时考虑使用[commons-exec 。](http://commons.apache.org/exec/)在我看来，它比使用 Java Runtime 类更容易处理。

教程：[http ://commons.apache.org/exec/tutorial.html](http://commons.apache.org/exec/tutorial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:05:12.010

从 JDialog 运行命令，运行后使用 toBack()。

```
final JDialog dlg = new javax.swing.JDialog(null, "test", JDialog.ModalityType.DOCUMENT_MODAL);
dlg.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
JButton button = new JButton("Select Me");
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        try {
            java.awt.Desktop.getDesktop().open(
                    new java.io.File("/home/user/Downloads/jfreechart-1.0.13-US.pdf"));
            dlg.toBack();
        } catch (IOException e1) {
            throw new RuntimeException(e1);
        }
    }
}); 
```

# c# - 生成一些唯一的数字并放入数组

> ID：11983804
> 
> 赞同：1
> 
> 时间：2012-08-16T09:01:07.767
> 
> 标签：c#

我正在尝试创建一种产生 10 个唯一随机数的方法，但这些数字不是唯一的，我得到了几个重复项！如何改进代码以按我的意愿工作？

```
 int[] randomNumbers = new int[10];

        Random random = new Random();

        int index = 0;

        do
        {
            int randomNum = random.Next(0, 10);
            if (index == 0)
            {
                randomNumbers[0] = randomNum;
                index++;
            }

            else
            {
                for (int i = 0; i < randomNumbers.Length; i++)
                {
                    if (randomNumbers[i] == randomNum)
                        break;
                    else
                    {
                        randomNumbers[index] = randomNum;
                        index++;
                        break;
                    }
                }
            }
        }
        while (index <= 9);

foreach (int num in randomNumbers)
            System.Console.Write(num + " "); 
```

编辑 2：我现在已更正所有错误，但此代码不起作用，因为数字不是唯一的！我已将上面的代码更新为最新版本。我希望有一些帮助来解决这个问题！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:54:09.537

最简单的方法是拥有一个你想要的数字数组（即1-10）并使用随机洗牌算法。

[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)是最简单的方法。

编辑：

这是 C# 实现的链接：http: [//www.dotnetperls.com/fisher-yates-shuffle](http://www.dotnetperls.com/fisher-yates-shuffle)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:53:30.703

random.next(0, 10) 返回一个介于 0 和 10 之间的随机数。它可能会连续多次返回相同的数字，并且不能保证您得到 0 到 10 之间的每个数字恰好一次，当你调用它 10 次时。

你想要的是一个数字列表，每个数字都是唯一的，介于 0 和 9（或 1 和 10）之间。一个可能的解决方案是这样的：

```
//Create the list of numbers you want
var list = new List<int>();
for(var x = 0; x < 10; x++)
{
    list.Add(x);
}

var random = new Random();
//Prepare randomized list
var randomizedList = new List<int>();
while(list.Length > 0)
{
    //Pick random index in the range of the ordered list
    var index = random.Next(0, list.Length);

    //Put the number from the random index in the randomized list
    randomizedList.Add(list[index]);

    //Remove the number from the original list
    list.RemoveAt(index);
} 
```

用文字解释，这就是你要做的：

1.  创建包含所有数字的列表，您的最终列表应包含
2.  创建第二个空列表。
3.  输入一个循环。只要有序列表中仍有数字，循环就会继续。

    1.  在 0 和 list.Length 之间选择一个随机索引
    2.  将此随机数放入随机列表中
    3.  从有序列表中删除索引位置的项目。

像这样，您可以在随机列表中创建一组数字，然后总是从有序列表中选择一个随机条目。使用此技术，您还可以实现某些值在列表中多次出现。

我不确定我的代码是否针对 c# 编译，因为我目前没有在这里运行 Visual Studio，但我认为代码应该大部分是正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:59:09.763

像这样的东西？

```
const int maxNumbers = 10;
List<int> numbers = new List<int>(maxNumbers);
for (int i = 0; i < maxNumbers; i++)
{
    numbers.Add(i);
}
Random r = new Random();
while (numbers.Count > 0)
{
    int index = r.Next(numbers.Count);
    Console.Write("{0} ", numbers[index]);
    numbers.RemoveAt(index);
}
Console.WriteLine(); 
```

**编辑：**对于任何随机数：

```
const int maxNumbers = 10;
const int biggestNumbers = 10000;
List<int> numbers = new List<int>(maxNumbers);
Random r = new Random();
while (numbers.Count < maxNumbers)
{
    int index = r.Next(biggestNumbers);
    if (numbers.IndexOf(index) < 0)
    {
        numbers.Add(index);
        Console.Write("{0} ", index);
    }
}
Console.WriteLine(); 
```

# javascript - 在 iPad Web App 上拖放 - 同时保留滚动功能

> ID：11983805
> 
> 赞同：7
> 
> 时间：2012-08-16T09:01:09.030
> 
> 标签：javascript, jquery, ipad, jquery-ui, web-applications

我正在使用 Jquery UI 拖放（[http://jqueryui.com/demos/draggable](http://jqueryui.com/demos/draggable)）和[https://github.com/furf/jquery-ui-touch-punch](https://github.com/furf/jquery-ui-touch-punch) 将触摸事件映射到鼠标事件。到目前为止，整个拖放操作都很好。

我现在遇到的问题是我有一个很长的可拖动元素列表，我还需要能够在 iPad 上滚动列表...当我使列表元素可拖动时，这将不再起作用。

我尝试使用 jqueryui 提供的约束，例如`distance`和`delay` - 但即使这样，滚动事件似乎也完全被拖动事件禁用/覆盖。

我可能需要编写一个自定义函数，例如“只有向左移动至少 50 px 使其可拖动”之类的。

有没有人遇到过类似的问题并愿意分享一些想法？Sencha 或 JQmobile 等其他移动 Web 框架是否配备了此类功能？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:08:23.827

当然，这取决于您的设计，但您可以尝试使用手柄。

这是 jQuery UI 的文档示例：

```
<div id="draggable" class="ui-widget-content">
    <p class="ui-widget-header">drag with handle</p>
</div>
<div id="draggable2" class="ui-widget-content">
    <p>drag from content</p>
    <p class="ui-widget-header">not drag with handle</p>
</div>

$("#draggable").draggable({handle:"p"});
$("#draggable2").draggable({cancel:"p.ui-widget-header"}); 
```

或者至少选项取消可以让你开始。

[http://jsfiddle.net/Dn9DX/](http://jsfiddle.net/Dn9DX/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T09:18:30.070

我通过从[https://github.com/furf/jquery-ui-touch-punch](https://github.com/furf/jquery-ui-touch-punch)切换 到此解决方案中的代码解决了这个问题：[Javascript Drag and drop for touch devices](https://stackoverflow.com/questions/5186441/javascript-drag-and-drop-for-touch-devices)。

最后，我需要调整的只是删除`event.preventDefault();`以重新启用 scolling。

**编辑**

基本上我使用了我链接的第二个答案中的代码 - 进行了一些调整。这是我的解决方案的 JS 小提琴，希望对您有所帮助：http: [//jsfiddle.net/LQuyr/8/](http://jsfiddle.net/LQuyr/8/)

# javascript - 更好的数据结构来处理这个数组

> ID：11983809
> 
> 赞同：1
> 
> 时间：2012-08-16T09:01:26.940
> 
> 标签：javascript

我从服务器获取了一组数据（按日​​期排序）：

`[ {date:"2012-8", name:"Tokyo"}, {date:"2012-3", name:"Beijing"}, {date:"2011-10", name:"New York"} ]`

我想 ：

1.  获取日期在给定年份的第一个元素的名称，例如给定`2012`，我需要`Tokyo`
2.  获取给定的年份`name`
3.  更改日期`name`

我应该使用哪种数据结构来使其有效？

因为数组可能很大，我不想循环数组来查找东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:04:24.097

假设您使用的是唯一城市，我会使用城市名称作为地图键：

```
cities = {
  Tokyo: {
    date: "2012-8" 
  },
  New York: {
    date: "2011-10"
  }
} 
```

按日期搜索：

```
function byDate(date) {
  for(el in cities) {
    if(cities.hasOwnProperty(el) && cities[el].date === date)
      return el;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:06:20.103

由于看起来数据*可能*已经按日期降序排序，因此您可以对该数据使用*二进制搜索*以避免执行完整的线性扫描。

要处理更改日期将更改排序的*未说明*要求，您需要执行两次搜索，如上所述，这可能是二进制搜索。找到当前索引以及它应该在的索引后，您可以使用两次调用来`Array.splice()`将元素从数组中的一个位置移动到另一个位置。

要按名称处理搜索，并假设每个`name`都是唯一的，您应该创建一个从名称映射到元素的二级结构：

```
var map = {};
for (var i = 0, n = array.length; i < n; ++i) {
    var name = array[i].name;
    map[name] = array[i];
} 
```

然后，您可以使用`map`阵列直接满足要求 2 和 3。

因为`map`元素实际上只是对元素的引用，所以`array`对这些元素的更改将在两者中发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:55:40.933

仅作记录：无需重新设计日期结构，您可以将排序与数组`filter`或`map`方法结合使用：

```
function sortByDate(a,b){
   return Number(a.date.replace(/[^\d]+/g,'')) > 
           Number(b.date.replace(/[^\d]+/g,''));
}
var example = [ {date:"2012-8", name:"Tokyo"}, 
                {date:"2012-3", name:"Beijing"}, 
                {date:"2011-10", name:"New York"} ]
              .sort(sortByDate);
//first city with year 2012 (and the lowest month of that year)
var b = example.filter(function(a){return +(a.date.substr(0,4)) === 2012})[0];
b.name; //=> Beijing
//year of a given city
var city = 'Tokyo';
var c = example.filter(function(a){return a.city === city;})[0];
c.year; //=> 2012
//change year of 'New York', and resort data
var city = 'New York', date = '2010-10';
example = example.map(
         function(a){if (a.name === city) {a.date = date;} return a;}
        ).sort(sortByDate); 
```

# android - phonegap 中的 Ajax Json 跨域

> ID：11983810
> 
> 赞同：2
> 
> 时间：2012-08-16T09:01:30.417
> 
> 标签：android, ajax, jquery-mobile, cordova

我对 PhoneGap 的 AJax/Json 请愿有疑问。我有这个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Cartelera</title>

<meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
    </title>
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" href="my.css" />
    <style>
        /* App custom styles */
    </style>
    <script src="cordova-2.0.0.js">
    </script>
    <script src="js/jquery.min.js">
    </script>
    <script src="js/jquery.mobile.js">
    </script>
    <script src="my.js">  
    </script>

    <script>

    $(document).ready(function(){

        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;

        //$("#ulCartelera").append('<li><a href="app.html" data-transition="slide" text="hola" > Prueba 1 </a></li>');
        //$("#ulCartelera").append('<li><a href="app.html" data-transition="slide" text="hola" > Prueba 2 </a></li>');
        $('#cargaDiv').html('<img src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/images/ajax-loader.gif" /> Cargando...'); // Loading message

        $.getJSON("http://www.cinesimf.com/rss/JSONTorrevieja.php",
                function(data){

            for (i=0;i<data.length;i++)
                {

                $("#ulCartelera").append('<li><a href="app.html" data-transition="slide" text="hola" >'+data[i].titulo+'</a></li>');

                }
            $('#cargaDiv').html(''); //Remove Loading message
            $("#ulCartelera").listview('refresh');      
        })

    })
    </script>
</head>
<body>
<div data-role="page" id="cartelerafinestrat">
<div data-role="header">
<a href="app.html" data-icon="delete" data-transition="flow">Atras</a>
<h1>IMF Finestrat</h1>
</div>
<div id="cargaDiv">

</div>
<div id="cartelera">
<ul id="ulCartelera" data-role="listview" class="ui-listview" data-theme="d" data_dividertheme="b">

</ul>
</div>
</div>
</body>
</html>
</pre> 
```

我在 config.xml (/res/xml/) 中添加了我的域 ("http://www.cinesimf.com/*") 在 phonegap 白名单中。

如果我在我的电脑的导航器中尝试代码，它可以正常工作，但在 Android 应用程序中永远不会加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:17:29.717

# ios - 如何解决 void* 的块中保留循环？

> ID：11983812
> 
> 赞同：0
> 
> 时间：2012-08-16T09:01:34.817
> 
> 标签：ios, automatic-ref-counting, retain-cycle

我有一个链接在我的 iOS 应用程序中的 C++ 静态库。我有一个 void* 以便从我的代码中访问库提供的一些操作。问题是我已经在我的项目中激活了 ARC，它尖叫着在一个称为 void* 的块中生成了一个保留周期。

生成保留周期警告的代码如下所示：

```
self.panGestureBlock = ^(UIGestureRecognizerState state, CGPoint point, CGPoint velocity) {
      [strongStreamClient onWorkerThreadDoBlock:^{
        LibGesture(libInstance, ATU_GESTURE_TYPE_PAN, GestureStateFromUIKitToLib(state), point.x, point.y, velocity.x, velocity.y); 
      }];
    }; 
```

当我将 libInstance 指针作为参数传递给函数时，它会发出如下警告：

> 在此块中强烈捕获“自我”可能会导致保留周期

如果我尝试做这样的事情：

```
__weak void* weakLibInstance = libInstance;

    self.panGestureBlock = ^(UIGestureRecognizerState state, CGPoint point, CGPoint velocity) {
      [self onWorkerThreadDoBlock:^{
        void* strongLibInstance = weakLibInstance;
        LibGesture(strongLibInstance, ATU_GESTURE_TYPE_PAN, GestureStateFromUIKitToLib(state), point.x, point.y, velocity.x, velocity.y); 
      }];
    }; 
```

它给出如下警告：

```
'__weak' only applies to objective-c object or block pointer types; type here is 'void *' 
```

这很清楚..问题是我如何克服这个保留周期？任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:13:53.077

该`__weak`修饰符仅适用于指向 Objective-C 对象的指针。您不能将它与 a 一起使用`void*`，但在这种情况下您不需要。只需将它从变量声明中删除，您的代码就应该可以工作（假设您在调用块之前不破坏库实例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:20:30.590

您需要将所有对`self`块中的引用包装为弱引用。这包括访问任何 ivar

```
__weak __block id blockSelf = self;
self.panGestureBlock = ^(UIGestureRecognizerState state, CGPoint point, CGPoint velocity) {
      [strongStreamClient onWorkerThreadDoBlock:^{
        LibGesture(blockSelf->libInstance, ATU_GESTURE_TYPE_PAN, GestureStateFromUIKitToLib(state), point.x, point.y, velocity.x, velocity.y);
      //assume libInstance is an ivar
      }];
    }; 
```

# ruby-on-rails - 如何在设计注册控制器中添加新操作？

> ID：11983813
> 
> 赞同：8
> 
> 时间：2012-08-16T09:01:39.340
> 
> 标签：ruby-on-rails, devise, overriding

我知道如何覆盖默认控制器并且它正在工作，但现在我需要在 Registrations 控制器中添加新操作。

我需要更新用户字段。我需要在此表单中添加名字和姓氏，但我不想使用标准编辑页面，因为它将是单独的页面。

所以我需要其他页面。我的注册文件夹中有 paypal..html.erb，但我无法通过 regustrations 控制器中的操作来呈现它。

贝宝操作：

```
class RegistrationsController < Devise::RegistrationsController

def paypal  
end 
...
end 
```

路线.rb：

```
 devise_for :users, :controllers => {:registrations => 'registrations', :sessions => 'sessions'} do
    match 'paypal' => 'registrations#paypal'
  end 
```

但不知何故，它呈现新的注册文件。这是错误：

```
 NoMethodError in Registrations#paypal
   Showing C:/1508/app/views/devise/registrations/new.html.erb where line #22 raised: 
```

**我如何使用更新表单来执行此操作以及我做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T00:54:04.407

我将此添加到我的路线中以使其正常工作

```
devise_scope :user do
  get 'paypal(/:id)', :action => 'paypal', :controller => 'user/registrations', :as => 'paypal'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T08:10:01.027

您的问题似乎有点不清楚，但是为什么不显式渲染视图？

```
def paypal
    render 'devise/registrations/paypal' 
end 
```

如果您有多种类型的用户，最好将路径和路由分开。

[https://github.com/plataformatec/devise/wiki/How-To%3a-Customize-routes-to-user-registration-pages](https://github.com/plataformatec/devise/wiki/How-To%3a-Customize-routes-to-user-registration-pages)

# symfony - 带有 ACL 的 Symfony2 组权限

> ID：11983814
> 
> 赞同：9
> 
> 时间：2012-08-16T09:01:48.093
> 
> 标签：symfony, acl, fosuserbundle, user-permissions

在我工作的地方，我们正在设计一个 web 应用程序，其中**用户**可能属于**多个组**，并且每个组都可以访问一组事先不知道的资源。另外，用户可以进入或离开组，组可以获取或失去对资源的访问权限，因此整个权限授予系统需要是动态的。

我们正在使用 Symfony2 和 FOSUserBundle。

我们喜欢 ACL 系统的工作方式，但我们找不到将其应用于 Group 对象的方法。

有人用 Symfony 做过类似的事情吗？或者您对如何以其他方式实施它有什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T22:34:28.727

根据说明书，您可以使用 RoleSecurityIdentity 而不仅仅是 UserSecurityIdentity。因此，根据我的理解，您的角色就是您的团队。我现在正在研究类似的问题。什么时候用它做更多的事情我会尝试用一些代码片段来更新它。

但现在看看：[http ://symfony.com/doc/current/cookbook/security/acl_advanced.html](http://symfony.com/doc/current/cookbook/security/acl_advanced.html)

编辑：

我们已经朝着另一个方向前进，而是在每个控制器动作系统的许可下进行更多。因此，每个控制器操作都使用注释分配了一个权限名称。

```
#SomeDomain/SomeBundle/Controller/SomeController.php
/**
 * @Permissions(perm="some.name.for.the.node")
 */
 public function indexAction(){ ... } 
```

然后我们有一个带有服务的权限包，该服务在调用控制器函数时检查权限。我们的管理员获得了一个 GUI，允许他们管理组和个人用户的权限。

查看启发我们正在做的事情的这个要点：[https ://gist.github.com/1391850](https://gist.github.com/1391850)

我知道这不是您正在寻找的 acl 系统，但只是想我会更新我们正在做的事情。

# xml - MATLAB：修改 XML 文件并保存

> ID：11983815
> 
> 赞同：2
> 
> 时间：2012-08-16T09:01:53.257
> 
> 标签：xml, matlab

我想读取一个 XML 文件并修改一些字符串，保存然后用 MATLAB 关闭文件。到目前为止，我有：

```
f = fopen( 'output_results\results.xml', 'w' ); 
```

我需要`optList`在文件的节点内添加以下行（见下文）：

```
<opt name="*_option1">true</opt>
<opt name="format">
    <f1>file:/C:/working/types.h</f1>
</opt> 
```

保存然后关闭文件

```
fclose(f); 
```

如何在 XML 文件中添加上述行？

文件内容：

```
<?xml version="1.0" encoding="utf-8"?> 
<Custom_project name="" val="True" name="file1" path="file:/C:/Users/Local/Temp/info.xml" version="1.0">
<verif="true" name="values" path="file:/C:/Users/Temp/folder1">
    <optList name="values">
        <opt name="color">red</opt>
        <opt name="police">calibri</opt>
        <opt name="font">blue</opt>
    </optList>
</verif>
<toto="myvalue" name="option1">
    <opt name="myvalue_1">32</opt>
    <opt name="-total">All</opt> 
    <opt name="characteristic">hybrid</opt>
</toto> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:23:46.803

在您的示例中，您从未阅读过该文件。

但是对于 XML，如果使用 java XML 工具可以省去很多麻烦。你可以直接从 Matlab 给他们打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:51:55.247

如发现[here](http://www.mathworks.nl/support/solutions/en/data/1-8IK11G/index.html?product=ML&solution=1-8IK11G)，*不可能*打开一个文件，寻找一个位置，在那里添加东西，同时保留其余的文本，然后关闭。

您可以通过重写整个文件来解决这个问题：

```
f = fopen( 'output_results\results.xml', 'r' ); 
g = fopen( 'output_results\results.xml.TEMP', 'w' ); 

while ~feof(f)
    line = fgets(f);
    fprintf(g, '%s', line);
    if strcmpi(line, '<optList name="values">')
        fprintf(g, '%s\n%s\n%s\n%s\n',....
            '<opt name="*_option1">true</option>',...
            '<opt name="format">',...
            '<f1>file:/C:/working/types.h',...
            '</f1></option>');
    end
end

fclose(f), fclose(g);
movefile('output_results\results.xml.TEMP', 'output_results\results.xml'); 
```

如果这*真的*是一次性问题，那么上面的 hack 就可以了。但是，正如@bdecaf 所建议的那样，您应该使用合适的工具来完成这项工作。我建议完全在 MATLAB 之外进行编写（以避免过于复杂的代码），只需通过 MATLAB 的系统调用语法（类型`help !`）调用外部工具/库。

# android - 从 android 在 Facebook 上发布大型视频文件

> ID：11983825
> 
> 赞同：1
> 
> 时间：2012-08-16T09:02:34.473
> 
> 标签：android, facebook, file, video

嗨，我正在尝试从我的 android 应用程序在 Facebook 上发布视频文件，我能够成功发布 5MB 文件，但是当我尝试发布大文件时，说 95MB **java.lang.OutOfMemoryError**爆发了。我按照[此](https://stackoverflow.com/questions/6908413/is-uploading-videos-from-an-sd-card-to-facebook-possible-with-the-facebook-sdk)链接发布视频。

有没有其他方法可以在 Facebook 上发布视频文件。请帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:10:13.700

您的视频文件大小可能大于设备上分配的可用内存量。考虑到您说您试图在智能手机上上传一个 95MB 的文件，这个文件太大而无法保存在`byte[]`.

我在网上找到了允许您一次上传大块数据以防止 OOM 异常的[解决方案](https://stackoverflow.com/questions/2599305/android-outofmemoryerror-while-uploading-video-how-best-to-chunk)，但是我们的 Facebook Android SDK AFAIK 没有那种可用的选项。您最好的选择是将视频压缩/缩放到更可接受的大小，或者编写自己的方法将视频分块发布到 Facebook。

# javascript - 为json数据制作模板html

> ID：11983826
> 
> 赞同：1
> 
> 时间：2012-08-16T09:02:43.240
> 
> 标签：javascript, jquery, asp.net, templates

我在我的项目中使用 [t.js](https://github.com/jasonmoo/t.js/blob/master/t_test.html)作为模板引擎。如何为此 json 制作模板：

```
{
data: [
    {
        FirstName: "Test1",
        LastName: "Test11"

    },
    {
        FirstName: "Test2",
        LastName: "Test22"
    },
    {
        FirstName: "Test3",
        LastName: "Test33"
    }
] 
```

}

我想渲染它

```
<ul>
    <li>Test1,Test11</li>
    <li>Test2,Test22</li>
    <li>Test3,Test33</li>
</ul> 
```

您能否为我的上述案例推荐任何其他模板引擎以及模板 html，哪个更好？我不想使用任何模板引擎`eval or new Func`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:27:04.777

标记

```
<ul id="myList">
    {{@mydata}} <li>{{=_val.FirstName}},{{=_val.LastName}}</li> {{/@mydata}}
</ul> 
```

Javascript

```
var source = $("#myList").html();
var template = new t(source);
$("#myList").html(template.render({
    mydata: [
        {
        FirstName: "Test1",
        LastName: "Test11"

        },
        {
            FirstName: "Test2",
            LastName: "Test22"},
        {
            FirstName: "Test3",
            LastName: "Test33"
        }
    ]
})); 
```

演示：http: [//jsfiddle.net/diode/c2Qhw/](http://jsfiddle.net/diode/c2Qhw/)

# scala - 带有标签和蚂蚁的 ScalaTest - 不运行测试

> ID：11983832
> 
> 赞同：0
> 
> 时间：2012-08-16T09:03:00.697
> 
> 标签：scala, ant, scalatest

我正在尝试使用 ant 作为构建系统的 ScalaTest。我正在尝试使用[示例代码](http://scalatest.org/user_guide/tagging_your_tests)：

```
package se.uu.molmed.SandBoxScalaTest

import org.scalatest.FlatSpec
import org.scalatest.Tag

object SlowTest extends Tag("com.mycompany.tags.SlowTest")
object DbTest extends Tag("com.mycompany.tags.DbTest")

class TestingTags extends FlatSpec {

  "The Scala language" must "add correctly" taggedAs(SlowTest) in {
      val sum = 1 + 1
      assert(sum === 2)
    }

  it must "subtract correctly" taggedAs(SlowTest, DbTest) in {
    val diff = 4 - 1
    assert(diff === 3)
  }
} 
```

我正在尝试使用以下 ant 目标运行它：

```
<!-- Run the integration tests -->
<target name="slow.tests" depends="build">
    <taskdef name="scalatest" classname="org.scalatest.tools.ScalaTestAntTask">
        <classpath refid="build.classpath" />
    </taskdef>

    <scalatest parallel="true">
        <tagstoinclude>
            SlowTests   
        </tagstoinclude>
        <tagstoexclude>
            DbTest
        </tagstoexclude>

        <reporter type="stdout" />
        <reporter type="file" filename="${build.dir}/test.out" />

        <suite classname="se.uu.molmed.SandBoxScalaTest.TestingTags" />
    </scalatest>
</target> 
```

它编译得很好，并运行套件，但不包括测试。我希望它在上面的代码中运行两个测试中的第一个。输出如下所示：

```
slow.tests:
[scalatest] Run starting. Expected test count is: 0
[scalatest] TestingTags:
[scalatest] The Scala language
[scalatest] Run completed in 153 milliseconds.
[scalatest] Total number of tests run: 0
[scalatest] Suites: completed 1, aborted 0
[scalatest] Tests: succeeded 0, failed 0, ignored 0, pending 0, canceled 0
[scalatest] All tests passed. 
```

为什么会这样？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:11:38.497

问题是标签的名称是传递给标签构造函数的字符串。在您的示例中，名称是“com.mycompany.tags.SlowTest”和“com.mycompany.tags.DbTest”。解决方法是在 ant 任务的 tagsToInclude 和 tagsToExclude 元素中使用这些字符串，如下所示：

```
<scalatest parallel="true">
    <tagstoinclude>
        com.mycompany.tags.SlowTest   
    </tagstoinclude>
    <tagstoexclude>
        com.mycompany.tags.DbTest
    </tagstoexclude>

    <reporter type="stdout" />
    <reporter type="file" filename="${build.dir}/test.out" />

    <suite classname="se.uu.molmed.SandBoxScalaTest.TestingTags" />
</scalatest> 
```

不幸的是，这种有点容易出错的设计是被迫的，因为我们希望在某些情况下允许注释用于标记，无论是在将测试编写为方法时，还是当您想一次标记一个类中的所有测试时。例如，您可以（在 ScalaTest 2.0 中）使用类上的 @Ignore 注释将类中的每个测试标记为已忽略，如下所示：

导入 org.scalatest._

@Ignore class MySpec extends FlatSpec { // 这里的所有测试都将被忽略 }

但是您可以使用任何标签来做到这一点，而不仅仅是 org.scalatest.Ignore。因此，您传递给 Tag 类的字符串旨在成为该标记的姊妹注释的完全限定名称。有关此设计的更多详细信息在这里：

[http://www.artima.com/docs-scalatest-2.0.M3/#org.scalatest.Tag](http://www.artima.com/docs-scalatest-2.0.M3/#org.scalatest.Tag)

# facebook - facebook fql查询专辑表不适用于graph api php

> ID：11983833
> 
> 赞同：0
> 
> 时间：2012-08-16T09:03:00.870
> 
> 标签：facebook, codeigniter, facebook-graph-api, codeigniter-2

```
 $fql = 'SELECT name,aid,photo_count,owner FROM album WHERE owner='.$userId;

 $fql = 'SELECT aid,owner,name FROM album WHERE owner IN 
          (SELECT uid1 FROM friend WHERE uid1 = 100002278102636 LIMIT 1 )'; 
```

我正在使用我的 codeigniter 应用程序将照片上传到一个名为当前日期的相册。创建相册和所有其他上传工作正常，但是当我尝试使用所有者字段从相册表中选择相册名称时，它返回一个空数组。但是上面的查询适用于 facebook 测试查询小部件

> [https://developers.facebook.com/tools/explorer?fql=SELECT%20aid%2Cowner%2Cname%20FROM%20album%20WHERE%20owner%3D100002278102636](https://developers.facebook.com/tools/explorer?fql=SELECT%20aid%2Cowner%2Cname%20FROM%20album%20WHERE%20owner%3D100002278102636)

我使用这样的 API

```
 $ret_obj1 = $this->facebook->api(array(
                                   'method' => 'fql.query',
                                   'query' => $fql,
                                 )); 
```

我在做什么错...提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:29:32.863

我的猜测是这是一个权限问题。要获得这些结果，您需要以用户身份进行身份验证，并在您的访问令牌中拥有`user_photos`and`friends_photos`权限。如果您不这样做，FQL 查询将返回一个结果，Facebook 将在将该结果提供给您的应用程序之前将其过滤掉，从而提供一个空数据集。

另一种可能性是您的访问令牌不属于用户 100002278102636。如果是这种情况，则`friend`子查询将失败。

此外，您应该使用`album_object_id`now 而不是`aid`. 看来该`aid`字段 (and `pid`) 将在 11 月被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:01:50.143

您是否尝试过通过 urlencode 运行 $fql 查询？你会注意到 facebooks graph explorer 上的那个是编码的，但你的不是

```
 $ret_obj1 = $this->facebook->api(array(
                               'method' => 'fql.query',
                               'query' => urlencode($fql),
                             )); 
```

顺便说一句 - 这个查询：

```
 $fql = 'SELECT aid,owner,name FROM album WHERE owner IN 
      (SELECT uid1 FROM friend WHERE uid1 = 100002278102636 LIMIT 1 )'; 
```

您正在选择 uid1 WHERE uid1 = a known value？为什么不只是做

```
$fql = 'SELECT aid,owner,name FROM album WHERE owner = 100002278102636 )'; 
```

# string - 为什么 Python 3.2 中的 print() 似乎没有默认为 UTF-8？

> ID：11983834
> 
> 赞同：2
> 
> 时间：2012-08-16T09:03:09.493
> 
> 标签：string, unicode, printing, python-3.x, encode

我正在编写脚本来清理 unicode 文本文件（存储为 UTF-8），我选择使用 Python 3.x（3.2）而不是更流行的 2.x，因为 3.x 应该默认为 UTF- 8\. 也许我做错了什么，但似乎打印语句至少仍然没有默认为 UTF-8。如果我尝试打印一个包含特殊字符的字符串（下面的 msg 是一个字符串），我仍然会收到这样的 UnicodeEncodeError：

```
print(label, msg)
... in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0] 
UnicodeEncodeError: 'charmap' codec can't encode character '\u0968' in position
38: character maps to <undefined> 
```

如果我首先使用 encode() 方法（很好地默认为 UTF-8），我可以避免错误：

```
print(label, msg.encode()) 
```

这也适用于打印包含 unicode 字符串的对象或列表——这是我在调试时经常要做的事情——因为 str() 似乎默认为 UTF-8。但是我真的需要记住每次我想做 print(myobj) 时都使用 print(str(myobj).encode()) 吗？如果是这样，我想我可以尝试用我自己的函数包装它，但我对处理 print() 支持的所有参数排列没有信心。

此外，我的脚本从文件加载正则表达式并一一应用它们。在应用 encode() 之前，我能够在控制台上打印一些相当清晰的内容：

```
msg = 'Applying regex {} of {}: {}'.format(i, len(regexes), regex._findstr)
print(msg)

Applying regex 5 of 15: ^\\ge[0-9]*\b([ ]+[0-9]+\.)?[ ]* 
```

但是，如果正则表达式包含文字 unicode 字符，则会崩溃，因此我首先将 encode() 应用于字符串。但是现在正则表达式很难在屏幕上阅读（我怀疑如果我尝试编写将这些正则表达式保存回磁盘的代码，我可能会遇到类似的问题）：

```
msg = 'Applying regex {} of {}: {}'.format(i, len(regexes), regex._findstr)
print(msg.encode())

b'Applying regex 5 of 15: ^\\\\ge[0-9]*\\b([ ]+[0-9]+\\.)?[ ]*' 
```

我在 Python 方面还不是很有经验，所以我可能会误解。任何解释或教程链接（对于 Python 3.x；我在网上看到的大部分内容都是针对 2.x）将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T09:25:51.070

`print`不默认使用任何编码，它只是使用输出设备（如控制台）声称支持的任何编码。您的控制台编码似乎是非 unicode，因此`print`尝试使用该编码对您的 unicode 字符串进行编码，但失败了。解决这个问题的最简单方法是告诉控制台使用 utf8（就像`export LC_ALL=en_US.UTF-8`在 unix 系统上一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:09:37.620

更简单的方法是仅在脚本中使用 unicode，并且仅在您想与“外部”世界交互时使用编码数据。也就是说，当您有要解码的输入或要编码的输出时。

为此，每次阅读时使用`decode`，每次输出时使用`encode`。

对于您的正则表达式，请使用`re.UNICODE`标志。

我知道这并不能完全逐点回答您的问题，但我认为应用这种方法应该可以让您免受编码问题的影响。

# ruby-on-rails-3 - 解决支持票？

> ID：11983835
> 
> 赞同：-1
> 
> 时间：2012-08-16T09:03:13.880
> 
> 标签：ruby-on-rails-3

我正在尝试创建一个支持系统。用户可以在其中提出票证，我们的支持团队将解决它，用户可以看到我们的回复。这里要注意的是我不想使用任何类型的电子邮件系统。我该如何解决这个任何帮助将不胜感激。

我的表结构如下：这里的票号是唯一的，每张票生成一次。

```
 +-------------------+--------------+------+-----+---------+----------------+
    | Field             | Type         | Null | Key | Default | Extra          |
    +-------------------+--------------+------+-----+---------+----------------+
    | id                | int(11)      | NO   | PRI | NULL    | auto_increment |
    | company_id        | int(11)      | NO   |     | NULL    |                |
    | subject           | varchar(255) | YES  |     | NULL    |                |
    | description       | text         | YES  |     | NULL    |                |
    | created_by        | int(11)      | NO   |     | NULL    |                |
    | created_date      | date         | YES  |     | NULL    |                |
    | assigned_to       | varchar(255) | YES  |     | NULL    |                |
    | status_id         | int(11)      | NO   |     | NULL    |                |
    | completed_date    | date         | YES  |     | NULL    |                |
    | ticket_number     | varchar(255) | NO   |     | NULL    |                |
    | deleted           | tinyint(1)   | YES  |     | 0       |                | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:02:12.753

我得到了支持票的解决方案。我为管理员使用单独的命名空间，为支持票使用单独的表，现在使用可以生成票，管理员是该票的默认接收者。当管理员回复任何票时，创建票的用户将成为接收者。

# version-control - 如何在迁移到 SVN 之前备份 Visual Source Safe

> ID：11983836
> 
> 赞同：2
> 
> 时间：2012-08-16T09:03:28.700
> 
> 标签：version-control, visual-sourcesafe, visualsvn, version-control-migration

**我对使用VSS 2005 (8.0.50727.42)**作为源代码控制的命运感到困扰，我真的很难继续使用它。我提议迁移到 SVN [http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)并找到了一个工具，它似乎可以进行迁移以及拉动所有历史 - 为了让我的伙伴们开心。- [http://vsstosvn.codeplex.com/](http://vsstosvn.codeplex.com/) （如果有人在这方面有任何成功或经验，有兴趣听听你的想法）

但是，为了确保它有效，我想做一个试运行，但不知道如何备份现有的 VSS 以便这样做.. 因为这个工具似乎也可以处理更改所有源控制解决方案中的绑定，所以如果它上升，我可能会被殴打..

我可以简单地复制 srcsafe.ini 所在的文件夹结构吗？只是它的数据文件夹中似乎有各种各样的废话……称为a b c等的文件夹。

非常感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:13:15.127

我过去使用过 VSS2SVN 命令行客户端，它工作正常。我认为 VSS 被滥用的方式（糟糕的提交消息，对单个零星文件的提交）有些阻碍，因此提交历史只是松散有用。

我不记得我是如何工作的，但它可能只是遵循 VSS2SVN 和 VSS 的文档。

Visual SourceSafe 的文档（似乎是 2005 版的“新增功能”页面）包含有关如何[备份](http://msdn.microsoft.com/en-US/library/da0t9wzx%28v=vs.80%29)和[恢复](http://msdn.microsoft.com/en-US/library/2490f87s%28v=vs.80%29)具有历史记录的 VSS 数据库的说明。您可以从管理员界面完成所有操作并还原到新位置，或者使用命令行客户端来完成。

请注意在您进行备份时用户无法使用数据库并且分析实用程序无法运行的警告。这意味着它可能只是网络上的简单文件副本，没有保护或锁定数据库。您可能需要围绕您的用户安排备份（当我这样做时没问题，因为我们只有三个人）。

编辑：我发现一篇[博客文章](http://alinconstantin.blogspot.co.uk/2007/03/how-to-backup-sourcesafe-database.html)总结了进行 VSS 备份的选项，这似乎很熟悉，所以我在执行迁移时可能参考了它。结果是，是的，您可以只复制包含所有 VSS 信息的目录，但您需要再次确保在复制数据库时不能修改数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-10T04:31:55.273

[https://support.microsoft.com/en-us/kb/244016](https://support.microsoft.com/en-us/kb/244016)

确保没有人在使用数据库，并且在您备份数据库时，Analyze 不会开始运行。复制以下文件夹：\DATA\Temp\USERS

复制 User.txt 和 Srcsafe.ini 文件。当您遵循此过程时，您可以通过将现有的用户、临时和数据文件夹以及用户.txt 和 Srcsafe.ini 文件替换为复制的版本来完全恢复数据库。

您还可以使用此过程通过将复制的文件放入新文件夹来将数据库移动到另一个位置。若要打开数据库，请在 Visual SourceSafe 资源管理器中的“文件”菜单上，单击“打开 SourceSafe 数据库”以浏览到新位置。

# php - 减少在 php 中解析大型 xml 文件的处理时间

> ID：11983841
> 
> 赞同：2
> 
> 时间：2012-08-16T09:03:46.043
> 
> 标签：php, xml, performance, parsing, profiling

我在处理大型 xml 文件的时间方面遇到了这个问题。大，我的意思是平均600MB。目前，解析数据并将其插入数据库大约需要 50 - 60 分钟。我想请教如何改进处理时间的建议？就像下降到20分钟一样。

因为在当前时间，我需要 2.5 个月的时间来使用 xml 中的内容填充数据库。顺便说一句，我有 3000 多个 xml 文件，平均为 600mb。我的 php 脚本在命令行中通过 cron 作业。

我还阅读了下面的其他问题，但我还没有找到任何想法。 [PHP 中最快的 XML 解析器是什么？](https://stackoverflow.com/questions/3048583/what-is-the-fastest-xml-parser-in-php?rq=1)

我看到有些已经解析了高达 2GB 的文件。我想知道处理时间是多少。

我希望你们能提供帮助。将不胜感激。谢谢。

我有这个代码：

```
$handler = $this;
$parser = xml_parser_create('UTF-8');
xml_set_object($parser, $handler);
xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, false);
xml_set_element_handler($parser, "startElement", "endElement");
xml_set_character_data_handler($parser, "cdata");

$fp = fopen($xmlfile, 'r');

while (!feof($fp)) {
    while (($data = fread($fp, 71680))){

    }
} 
```

我首先将解析数据放在一个临时数组中。我的 mysql 插入命令在 endElement 函数内。有一个特定的结束标记来触发我对数据库的插入命令。

感谢您的回复....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:17:05.357

在没有看到任何代码的情况下，我首先要建议的是**不要**使用 DOM 或 SimpleXMLElement，因为它们会将整个内容加载到内存中。

您需要使用像[XMLReader](http://www.php.net/manual/en/book.xmlreader.php)这样的流解析器。

* * *

## 编辑：

由于您已经在使用流解析器，因此您不会从更改解析器中获得巨大收益（老实说，我不知道 XML Parser 和 XMLReader 之间的速度差异，因为后者使用 libxml，它*可能*会更好但可能不值得）。

接下来要看的是您是否在代码中做任何愚蠢的事情；为此，我们需要更深入地了解您是如何实现这一点的。

您说您将数据放入临时数组并在到达结束标记后调用 MySQL insert。您是否使用准备好的语句？您是否使用事务批量进行多次插入？

解决瓶颈的正确方法是在代码上运行*分析器*。我最喜欢的工作工具是[带有 XHGui 的 xhProf](https://github.com/preinheimer/xhprof)。这将告诉您哪些函数正在运行，运行了多少次，它们消耗了多长时间和多少内存（并且可以将它们全部显示在一个漂亮的调用图中，非常有用）。

使用 GitHub 的 README 中的说明。这是一个[教程](http://erichogue.ca/2011/03/linux/profiling-a-php-application/)和另一个[有用的教程](http://techportal.inviqa.com/2009/12/01/profiling-with-xhprof/)（请记住，最后一个是针对没有我链接到的 XHGui 扩展的分析器的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:02:49.783

您似乎只需要解析和读取数据，而不需要编辑 XML。带着这种想法，我会说使用 SAX 解析器是更简单、更快捷的方法。

> SAX 是一种解析 XML 文档的方法，但不是验证它们的方法。好消息是您可以将它与 PHP 4 和 PHP 5 一起使用而无需更改。在 PHP 4 中，SAX 解析已在所有平台上可用，因此无需单独安装。

您基本上定义了一个在找到开始元素时运行的函数，以及在找到结束元素时运行的另一个函数（您也可以将一个用于属性）。然后你对解析的数据做任何你想做的事。

使用 SAX 解析 XML

```
<?
function start_element($parser, $element_name, $element_attrs) {
  switch ($element_name) {
    case 'KEYWORDS':
       echo '<h1>Keywords</h1><ul>';
       break;
    case 'KEYWORD':
       echo '<li>';
       break;
  }
}

function end_element($parser, $element_name) {
  switch ($element_name) {
    case 'KEYWORDS':
       echo '</ul>';
       break;
    case 'KEYWORD':
       echo '</li>';
       break;
  }
}

function character_data($parser, $data) {
  echo htmlentities($data);
}

$parser = xml_parser_create();
xml_set_element_handler($parser, 'start_element', 'end_element');
xml_set_character_data_handler($parser, 'character_data');

$fp = fopen('keyword-data.xml', 'r')
    or die ("Cannot open keyword-data.xml!");

while ($data = fread($fp, 4096)) {
  xml_parse($parser, $data, feof($fp)) or
   die(sprintf('XML ERROR: %s at line %d',
        xml_error_string(xml_get_error_code($parser)),
        xml_get_current_line_number($parser)));
}

xml_parser_free($parser);   
?> 
```

资料来源：我致力于解析和处理大量 XML 数据。 **编辑：更好的例子**

**编辑：嗯，显然你已经在使用 Sax Parser。只要您实际上以事件驱动的方式处理文件（没有任何额外的开销），您就应该在该部门中处于最佳状态。我会说你无能为力来提高解析性能。如果您遇到性能问题，我建议您查看您在代码中所做的工作以查找性能瓶颈（尝试使用像[这样](http://xdebug.org/docs/profiler)的 php 分析器）。如果你在这里发布你的代码，我们可以看看！干杯!**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T22:27:12.130

我花了最后一天左右的时间来解决同样的问题。我注意到限制插入查询的数量大大减少了处理时间。您可能已经这样做了，但尝试将一批解析后的数据收集到合适的数据结构中（我使用的是简单的数组，但也许更合适的数据结构可以进一步降低成本？）。在 X 个集合的集合上一次性插入数据（INSERT INTO table_name (field_name) VALUES (set_1, set_2, set_n) ）

希望这可以帮助任何可能偶然发现此页面的人。我还在解决其他瓶颈，如果我发现新的东西，我会在这里发布。

# ruby-on-rails - Rails image_tag 路径

> ID：11983842
> 
> 赞同：0
> 
> 时间：2012-08-16T09:03:50.650
> 
> 标签：ruby-on-rails, image

我需要在我的公用文件夹中显示图像。但它的 url 是使用 db 生成的，所以在我的控制器中我做了这样的事情（也很好吗？）：

```
@link_gra_art = LinkGraArt.find_by_LGA_ART_ID(params[:id])    
@graphics = Graphic.find_by_GRA_ID(@link_gra_art.LGA_GRA_ID) 
```

在我看来，我必须有这样的东西：

```
= image_tag("grafpath".@graphics.GRA_ID."/"@link_gra_art.LGA_ART_ID., :alt => "test image") 
```

我不知道如何组合这样的字符串，因为在 php 中我会写“”。$ var。“”，这在 Rails 中怎么样？通过点，还是通过什么？

这种通过另一个模型从模型中获取数据的方式也很好吗？

DB 不是我的，所以表很大，并且有非 Rails 方式写入的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:06:15.063

ruby 中的[变量插值](http://en.wikipedia.org/wiki/Variable_interpolation)`#{...}`是通过以下方式完成的：

```
image_tag("grafpath#{@graphics.GRA_ID}/#{@link_gra_art.LGA_ART_ID}", ... 
```

或者，您可以将字符串与`+`（PHP 的作用`.`）连接起来。

# asp-classic - 使用经典 asp 以阿拉伯语保存文件名

> ID：11983845
> 
> 赞同：2
> 
> 时间：2012-08-16T09:03:53.283
> 
> 标签：asp-classic, jnlp

嘿，伙计们，我正在创建一个运行时 jnlp 文件以供下载，并且因为文件名有时来自用户名，所以我被文件名卡住了，因为文件名有时是阿拉伯文或其他语言......当使用它创建时，我得到的文件名是“ Ø§Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬.jnlp"

我创建文件的代码

```
Set fs = Server.CreateObject("Scripting.FileSystemObject")
Set f = fs.CreateTextFile(Server.MapPath(id & "_" & user & ".jnlp"), true)
f.write(JNLPFile)
f.close
Set f = nothing
Set fs = nothing 
```

其中**CreateTextFile**中的**“用户”**是用户给出的名称，有时可能包含 unicode 字符或其他语言字符...

 **这个问题的任何解决方案....？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:12:59.897

好吧，FileSystemObject 本身并不支持 UTF8。

您应该使用 ADODB Stream 对象而不是使用 File System Object 和 CreateTextFile 来构建新的文本文件。

下面是一个 VBScript 过程的示例，它将您的路径作为 strPath 并将文件的内容作为 strOut。

```
Sub Generate_File(strPath,strOut)

    Set objStream = Server.CreateObject("ADODB.Stream")
    objStream.Open
    objStream.Position = 0
    objStream.Charset = "UTF-8"
    objStream.WriteText strOut
    objStream.SaveToFile server.mappath(strPath),2
    objStream.Close

End Sub 
```**

# android - android获取包图标

> ID：11983846
> 
> 赞同：0
> 
> 时间：2012-08-16T09:03:56.860
> 
> 标签：android

目前我知道我可以从包管理器中获取所有包图标。但是，我只想在启动器中获取这些图标。如果我从包管理器中获得列表，我将获得那些系统的 apk，例如蓝牙或启动器。有没有人知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:30:50.857

您需要获取所有包并从这些包中找出哪一个具有为 action.MAIN 和 category.LAUNCHER 定义的意图过滤器。

您可以为此使用[getLaunchIntentForPackage()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage%28java.lang.String%29)。

# multithreading - BlackBerry - 取消在另一个类中执行的线程以刷新位置

> ID：11983852
> 
> 赞同：1
> 
> 时间：2012-08-16T09:04:14.783
> 
> 标签：multithreading, blackberry, location

如何从另一个类获取/刷新位置取消线程。我可以从同一个类中取消一个线程。但我无法跨班级做到这一点。声明 GPSThread 静态并没有帮助。任何人都可以请指导吗？

第一类：

```
public class GPSListener {
    /* Other instantiation code */
    Dialog busyDialog1 = new Dialog("Refreshing Location...",
                                    new String [] { "Cancel" },
                                    new int [] { Dialog.CANCEL},
                                    Dialog.CANCEL,
                                    Bitmap.getPredefinedBitmap(Bitmap.HOURGLASS))
    {
        public void fieldChanged(Field field1, int context1)
        {
            GPSHandler.requestStop();
            busyDialog1.cancel();
        }
    };

    public String refreshCoordinates() {
        String test = "nothing";
        if (GPSHandler.isStopRequested())
        {
            GPSHandler.stopRequested = false;
            return null;
        }
        GPSHandler.getInstance().setListener(this);
        GPSHandler.getInstance().requestLocationUpdates();
        if (GPSHandler.isStopRequested())
        {
            GPSHandler.stopRequested = false;
            return null;
        }
        busyDialog1.setEscapeEnabled(false);
        busyDialog1.show();
        return test;
    }

    public void onLocationReceived(Coordinates location) {
        lblLatitude.setText(Double.toString(location.getLatitude()));
        lblLongitude.setText(Double.toString(location.getLongitude()));
        busyDialog1.cancel();
    }
} 
```

第 2 类：

```
public class GPSHandler {
    private GPSThread _gpsThread;
    private Coordinates _location;
    private boolean _gotLocation;
    private GPSListener _listener;

    /** this class will be a Singleton, as the device only has one GPS system */
    private static GPSHandler _instance;

    /** @return the Singleton instance of the GPSHandler */
    public static GPSHandler getInstance() {
        if (_instance == null) {
            _instance = new GPSHandler();
        }
        return _instance;
    }

    public static boolean stopRequested = false;
    public synchronized static void requestStop() {
        stopRequested = true;
    }
    public synchronized static boolean isStopRequested() {
        return stopRequested;
    }

    /** not publicly accessible ... use getInstance() */
    private GPSHandler() {
    }

    /** call this to trigger a new location fix */
    public void requestLocationUpdates() {
        if (_gpsThread == null || !_gpsThread.isAlive()) {
            _gpsThread = new GPSThread();
            _gpsThread.start();
        }
    }

    public void setListener(GPSListener listener) {
        // only supports one listener this way
        _listener = listener;
    }

    private void setLocation(final Coordinates value) {
        _location = value;
        if (value.getLatitude() != 0.0 || value.getLongitude() != 0.0) {
            _gotLocation = true;
            if (_listener != null) {
                // this assumes listeners are UI listeners, and want callbacks on the UI thread:
                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        _listener.onLocationReceived(value);
                    }
                });
            }
        }
    }

    private class GPSThread extends Thread {
        private void getLocationFromGoogle() {
            try {
                int cellID = GPRSInfo.getCellInfo().getCellId();
                int lac = GPRSInfo.getCellInfo().getLAC();
                String urlString2 = "http://www.google.com/glm/mmap";

                // Open a connection to Google Maps API
                ConnectionFactory connFact = new ConnectionFactory();
                ConnectionDescriptor connDesc;
                connDesc = connFact.getConnection(urlString2);
                HttpConnection httpConn2;
                httpConn2 = (HttpConnection)connDesc.getConnection();
                httpConn2.setRequestMethod("POST");

                // Write some custom data to Google Maps API
                OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream();
                writeDataGoogleMaps(outputStream2, cellID, lac);

                // Get the response
                InputStream inputStream2 = httpConn2.openInputStream();//getInputStream();
                DataInputStream dataInputStream2 = new DataInputStream(inputStream2);

                // Interpret the response obtained
                dataInputStream2.readShort();
                dataInputStream2.readByte();
                final int code = dataInputStream2.readInt();

                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        Dialog.alert(code + "");
                    }
                });
                if (code == 0) {
                    final double latitude = dataInputStream2.readInt() / 1000000D;
                    final double longitude = dataInputStream2.readInt() / 1000000D;
                    setLocation(new Coordinates(latitude, longitude, 0.0f));

                    UiApplication.getUiApplication().invokeLater(new Runnable() {
                        public void run() {
                            Dialog.alert(latitude+"-----"+longitude);
                        }
                    });

                    dataInputStream2.readInt();
                    dataInputStream2.readInt();
                    dataInputStream2.readUTF();
                } else {
                    System.out.println("Error obtaining Cell Id ");
                }
                outputStream2.close();
                inputStream2.close();
            } catch (Exception e) {
                System.out.println("Error: " + e.getMessage());
            }
        }

        private void tryGetLocationFromDevice() {
            _gotLocation = false;
            try {
                Criteria myCriteria = new Criteria();
                myCriteria.setCostAllowed(false);
                LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria);
                try {
                    Location myLocation = myLocationProvider.getLocation(300);
                    setLocation(myLocation.getQualifiedCoordinates());
                } catch ( InterruptedException iex ) {
                    System.out.println(iex.getMessage());
                } catch ( LocationException lex ) {
                    System.out.println(lex.getMessage());
                }
            } catch ( LocationException lex ) {
                System.out.println(lex.getMessage());
            }
            if (!_gotLocation) {
                getLocationFromGoogle();
            }
        }

        public void run() {
            int bbMapsHandle = CodeModuleManager.getModuleHandle("net_rim_bb_lbs"); // OS 4.5 - 6.0
            int bbMapsHandle60 = CodeModuleManager.getModuleHandle("net_rim_bb_maps"); // OS 6.0
            if (bbMapsHandle &gt; 0 || bbMapsHandle60 &gt; 0) {
                tryGetLocationFromDevice();
            } else {
                getLocationFromGoogle();
            }
        }
    }

    private void writeDataGoogleMaps(OutputStream out, int cellID, int lac) throws IOException {
        DataOutputStream dataOutputStream = new DataOutputStream(out);
        dataOutputStream.writeShort(21);
        dataOutputStream.writeLong(0);
        dataOutputStream.writeUTF("en");
        dataOutputStream.writeUTF("Android");
        dataOutputStream.writeUTF("1.0");
        dataOutputStream.writeUTF("Web");
        dataOutputStream.writeByte(27);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(3);
        dataOutputStream.writeUTF("");
        dataOutputStream.writeInt(cellID);
        dataOutputStream.writeInt(lac);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.writeInt(0);
        dataOutputStream.flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:10:31.743

您的对象当前被声明`GPSThread`为. 如果您想从范围之外停止执行（或确实对其执行*任何*操作），则需要将其标记为. 您还需要提供一些公共机制（例如方法）来取消线程执行。`private``GPSHandler`*`GPSHandler``public``stop()`*

 *最常见的方法是`boolean`在你的线程（例如）中有一个标志 `shouldStop`，在你的主执行循环内部检查`run()`它是否应该停止。当`stop()`方法被调用时`shouldStop`设置为`true`并且你的线程将停止。

这是一个很好的例子：[如何在 Java 中停止线程？](https://stackoverflow.com/questions/1611862/how-to-stop-threads-in-java?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:51:51.367

您应该进行两组更改。

## 更改停止请求标志

首先，请记住[封装在面向对象语言中是一件好事](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。的`isStopRequested()`方法或`stopRequested`变量`GPSHandler`不应在该类之外使用。您的 UI`GPSListener`不应尝试使用其中任何一个。我会改变你`GPSHandler`使用这个：

```
private static boolean stopRequested = false;

public synchronized static void requestStop() {
   stopRequested = true;
}

private synchronized static boolean isStopRequested() {
   return stopRequested;
} 
```

只是`requestStop()`应该`public`。看起来您`stopRequested`已公开以允许`GPSListener`重置它。如果需要重置，让拥有该变量的类进行重置。例如，在`GPSHandler`：

```
 /** call this to trigger a new location fix */
   public void requestLocationUpdates() {
       if (_gpsThread == null || !_gpsThread.isAlive()) {
          // reset this stop flag:
          stopRequested = false;
          _gpsThread = new GPSThread();
          _gpsThread.start(); 
       }
   } 
```

`requestLocationUpdates()`确实是**启动**线程的方法，所以它应该是`stopRequested`重置为`false`.

此外，您不应该`stopRequested` `public`允许其他类使用它的另一个原因是这通常不是线程安全的。`stopRequested`使用`requestStop()`and方法进行包装的原因之一`isStopRequested()`是添加线程安全性。有很多方法可以做到这一点，但这两种方法通过用`synchronized`关键字标记来实现线程安全。

## 更改检查标志的方式/位置

**进行这些修复后，**您需要更改检查是否已请求停止的位置。你真的不想检查`isStopRequested()`方法`refreshCoordinates()`。该方法几乎不涉及任何工作。即使它**启动**了获取位置修复的过程，也只是启动了一个线程，但获取位置的实际工作是在后台线程（您的`GPSThread`）上完成的。如果`requestStop()`被调用，它**不太**可能在*中间*被调用`refreshCoordinates()`，所以这不是你应该检查它的地方。

`isStopRequested()`在类`GPSHandler`的方法`tryGetLocationFromDevice()`和`getLocationFromGoogle()`. 这些是执行缓慢处理的方法。这些是你可能想在中间打断的那些。所以，像这样：

```
 private void getLocationFromGoogle() {
         try { 
            int cellID = GPRSInfo.getCellInfo().getCellId(); 
            int lac = GPRSInfo.getCellInfo().getLAC(); 

            String urlString2 = "http://www.google.com/glm/mmap"; 

            if (isStopRequested()) return;

            // Open a connection to Google Maps API  
            ConnectionFactory connFact = new ConnectionFactory(); 
            ConnectionDescriptor connDesc; 
            connDesc = connFact.getConnection(urlString2); 

            HttpConnection httpConn2; 
            httpConn2 = (HttpConnection)connDesc.getConnection(); 
            httpConn2.setRequestMethod("POST"); 

            // Write some custom data to Google Maps API  
            OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream(); 
            writeDataGoogleMaps(outputStream2, cellID, lac); 

            if (isStopRequested()) return;

            // Get the response   
            InputStream inputStream2 = httpConn2.openInputStream();//getInputStream(); 
            DataInputStream dataInputStream2 = new DataInputStream(inputStream2); 

            // Interpret the response obtained  
            dataInputStream2.readShort(); 
            dataInputStream2.readByte(); 

            if (isStopRequested()) return;

            final int code = dataInputStream2.readInt(); 
            UiApplication.getUiApplication().invokeLater(new Runnable() {
               public void run() {
                  Dialog.alert(code + "");   
               }
            }); 
```

在 中`tryGetLocationFromDevice()`，您可以这样做（确保在下面添加成员变量和新方法）：

```
 private LocationProvider _locationProvider;  // must be a member variable!

      public void requestStop() {
         if (_locationProvider != null) {
             // this will interrupt the _locationProvider.getLocation(300) call
             _locationProvider.reset();
         }
      }

      private void tryGetLocationFromDevice() {
         _gotLocation = false;
         try {
            Criteria myCriteria = new Criteria(); 
            myCriteria.setCostAllowed(false); 
            _locationProvider = LocationProvider.getInstance(myCriteria); 

            try { 
               Location myLocation = _locationProvider.getLocation(300); 
               setLocation(myLocation.getQualifiedCoordinates()); 
            } catch ( InterruptedException iex ) { 
               // this may be caught if stop requested!!!!
               System.out.println(iex.getMessage());
            } catch ( LocationException lex ) { 
               System.out.println(lex.getMessage());
            } 
         } catch ( LocationException lex ) { 
            System.out.println(lex.getMessage());
         }

         if (!_gotLocation && !isStopRequested()) { 
            getLocationFromGoogle();
         } 
      } 
```

`GPSThread.requestStop()`然后，从*外部* 方法调用该`GPSHandler.requestStop()`方法：

```
public synchronized static void requestStop() {
   stopRequested = true;
   if (_gpsThread != null) {
       _gpsThread.requestStop();
   }
} 
```*

# sql-server - 孤岛和差距tsql

> ID：11983853
> 
> 赞同：1
> 
> 时间：2012-08-16T09:04:16.473
> 
> 标签：sql-server, sql-server-2008, tsql, gaps-and-islands

我一直在努力解决一个实际上应该很简单的问题，但经过整整一周的阅读、谷歌搜索、实验等，我的同事和我们找不到合适的解决方案。:(

问题：我们有一个包含两个值的表：一个员工编号（P_ID，int）<---员工的识别日期（开始时间，日期时间）<---员工签到的时间

*   我们需要知道每个员工的工作时间。
*   当两个日期相隔小于@gap 天时，它们属于同一时期
*   对于每个员工，任何一天都可以有多个记录，但我只需要知道他工作的日期，我对时间部分不感兴趣
*   只要有一个差距 > @gap days，下一个日期就被认为是新范围的开始
*   范围至少为 1 天（例如：21-9-2011 | 21-09-2011），但没有最大长度。（员工每@gap 签到 - 1 天应该是从他签到的第一天到今天的一段时间）

我们认为我们需要的是这个表格中的岛屿，其中天数的差距大于@variable（@gap = 30 表示 30 天）

举个例子：

来源：

```
P_ID  | starttime
------|------------------
12121 | 24-03-2009 7:30
12121 | 24-03-2009 14:25 
12345 | 27-06-2011 10:00
99999 | 01-05-2012 4:50 
12345 | 27-06-2011 10:30
12345 | 28-06-2011 11:00
98765 | 13-04-2012 10:00
12345 | 21-07-2011 9:00
99999 | 03-05-2012 23:15
12345 | 21-09-2011 12:00
45454 | 12-07-2010 8:00
12345 | 21-09-2011 17:00
99999 | 06-05-2012 11:05
99999 | 20-05-2012 12:45
98765 | 26-04-2012 16:00
12345 | 07-07-2012 14:00
99999 | 01-06-2012 13:55
12345 | 13-08-2012 13:00 
```

现在我需要的结果是：

期间：

```
P_ID  |   Start    |    End
-------------------------------
12121 | 24-03-2009 | 24-03-2009
12345 | 27-06-2012 | 21-07-2012
12345 | 21-09-2012 | 21-09-2012
12345 | 07-07-2012 | (today) OR 13-08-2012  <-- (less than @gap days ago) OR (last date in table)
45454 | 12-07-2010 | 12-07-2010
45454 | 17-06-2012 | 17-06-2012 
98765 | 13-04-2012 | 26-04-2012
99999 | 01-05-2012 | 01-06-2012 
```

我希望这很清楚，我已经感谢你读到这里，如果你能做出贡献，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:24:45.337

我已经编写了一个粗略的脚本，应该可以帮助您入门。没有费心改进日期时间，端点比较可能需要调整。

```
select 
    P_ID,
    src.starttime,
    endtime = case when src.starttime <> lst.starttime or lst.starttime < DATEADD(dd,-1 * @gap,GETDATE()) then lst.starttime else GETDATE() end,
    frst.starttime,
    lst.starttime
from @SOURCETABLE src
outer apply (select starttime = MIN(starttime) from @SOURCETABLE sub where src.p_id = sub.p_id and sub.starttime > DATEADD(dd,-1 * @gap,src.starttime)) frst
outer apply (select starttime = MAX(starttime) from @SOURCETABLE sub where src.p_id = sub.p_id and src.starttime > DATEADD(dd,-1 * @gap,sub.starttime)) lst
where src.starttime = frst.starttime
order by P_ID, src.starttime 
```

我得到以下输出，这与你的有点不同，但我认为没关系：

```
P_ID        starttime               endtime                 starttime               starttime
----------- ----------------------- ----------------------- ----------------------- -----------------------
12121       2009-03-24 07:30:00.000 2009-03-24 14:25:00.000 2009-03-24 07:30:00.000 2009-03-24 14:25:00.000
12345       2011-06-27 10:00:00.000 2011-07-21 09:00:00.000 2011-06-27 10:00:00.000 2011-07-21 09:00:00.000
12345       2011-09-21 12:00:00.000 2011-09-21 17:00:00.000 2011-09-21 12:00:00.000 2011-09-21 17:00:00.000
12345       2012-07-07 14:00:00.000 2012-07-07 14:00:00.000 2012-07-07 14:00:00.000 2012-07-07 14:00:00.000
12345       2012-08-13 13:00:00.000 2012-08-16 11:23:25.787 2012-08-13 13:00:00.000 2012-08-13 13:00:00.000
45454       2010-07-12 08:00:00.000 2010-07-12 08:00:00.000 2010-07-12 08:00:00.000 2010-07-12 08:00:00.000
98765       2012-04-13 10:00:00.000 2012-04-26 16:00:00.000 2012-04-13 10:00:00.000 2012-04-26 16:00:00.000 
```

最后两个输出列是`outer apply`部分的结果，仅用于调试。

这基于以下设置：

```
declare @gap int
set @gap = 30

set dateformat dmy
-----P_ID----|----starttime----
declare @SOURCETABLE table (P_ID int, starttime datetime)
insert @SourceTable values 
(12121,'24-03-2009 7:30'),
(12121,'24-03-2009 14:25'),
(12345,'27-06-2011 10:00'),
(12345,'27-06-2011 10:30'),
(12345,'28-06-2011 11:00'),
(98765,'13-04-2012 10:00'),
(12345,'21-07-2011 9:00'),
(12345,'21-09-2011 12:00'),
(45454,'12-07-2010 8:00'),
(12345,'21-09-2011 17:00'),
(98765,'26-04-2012 16:00'),
(12345,'07-07-2012 14:00'),
(12345,'13-08-2012 13:00') 
```

更新：稍微重新考虑一下。现在使用 CTE 计算每个项目的前后差距，然后汇总这些：

```
--Get the gap between each starttime and the next and prev (use 999 to indicate non-closed intervals)
;WITH CTE_Gaps As ( 
    select
        p_id,
        src.starttime,
        nextgap = coalesce(DATEDIFF(dd,src.starttime,nxt.starttime),999), --Gap to the next entry
        prevgap = coalesce(DATEDIFF(dd,prv.starttime,src.starttime),999), --Gap to the previous entry
        isold = case when DATEDIFF(dd,src.starttime,getdate()) > @gap then 1 else 0 end --Is starttime more than gap days ago?
    from
        @SOURCETABLE src
        cross apply (select starttime = MIN(starttime) from @SOURCETABLE sub where src.p_id = sub.p_id and sub.starttime > src.starttime) nxt
        cross apply (select starttime = max(starttime) from @SOURCETABLE sub where src.p_id = sub.p_id and sub.starttime < src.starttime) prv   
)
--select * from CTE_Gaps
select
        p_id,
        starttime = min(gap.starttime),
        endtime = nxt.starttime
    from
        CTE_Gaps gap
        --Find the next starttime where its gap to the next > @gap
        cross apply (select starttime = MIN(sub.starttime) from CTE_Gaps sub where gap.p_id = sub.p_id and sub.starttime >= gap.starttime and sub.nextgap > @gap) nxt
group by P_ID, nxt.starttime
order by P_ID, nxt.starttime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:44:25.520

乔恩最明确地向我们展示了正确的方向。虽然性能很糟糕（数据库中有 400 万多条记录）。看起来我们错过了一些信息。根据我们从您那里学到的所有知识，我们提出了以下解决方案。它使用所有建议答案的元素，并在最终喷出结果之前遍历 3 个临时表，但性能以及它生成的数据都足够好。

```
declare @gap int
declare @Employee_id int

set @gap = 30   
set dateformat dmy
--------------------------------------------------------------- #temp1 --------------------------------------------------
CREATE TABLE #temp1 ( EmployeeID int, starttime date)
INSERT INTO #temp1 ( EmployeeID, starttime)

select distinct ck.Employee_id, 
                cast(ck.starttime as date)
from SERVER1.DB1.dbo.checkins pd
        inner join SERVER1.DB1.dbo.Team t on ck.team_id = t.id
where t.productive = 1

--------------------------------------------------------------- #temp2 --------------------------------------------------

create table #temp2 (ROWNR int, Employeeid int, ENDOFCHECKIN datetime, FIRSTCHECKIN datetime)
INSERT INTO #temp2 

select Row_number() OVER (partition by EmployeeID ORDER BY t.prev) + 1 as ROWNR,
             EmployeeID,
             DATEADD(DAY, 1, t.Prev) AS start_gap,
           DATEADD(DAY, 0, t.next) AS end_gap
from 
             (
                    select a.EmployeeID,
                                  a.starttime as Prev, 
                                  (
                                  select min(b.starttime)
                                  from #temp1 as b
                                  where starttime > a.starttime and b.EmployeeID = a.EmployeeID 
                                  ) as Next
from #temp1 as a) as t

where  datediff(day, prev, next ) > 30
group by     EmployeeID,
                    t.Prev,
                    t.next
union -- add first known date for Employee 

select      1 as ROWNR,
            EmployeeID,
            NULL,
            min(starttime)
from #temp1 ct
group by ct.EmployeeID

--------------------------------------------------------------- #temp3 --------------------------------------------------

create table #temp3 (ROWNR int, Employeeid int, ENDOFCHECKIN datetime, STARTOFCHECKIN datetime)
INSERT INTO #temp3

select  ROWNR,
        Employeeid,
        ENDOFCHECKIN,
        FIRSTCHECKIN
from #temp2 

union -- add last known date for Employee 

select       (select count(*) from #temp2 b where Employeeid = ct.Employeeid)+1 as ROWNR,
             ct.Employeeid,
            (select dateadd(d,1,max(starttime)) from #temp1 c where Employeeid = ct.Employeeid),
             NULL
from #temp2 ct
group by ct.EmployeeID

---------------------------------------finally check our data-------------------------------------------------

select              a1.Employeeid,
                    a1.STARTOFCHECKIN as STARTOFCHECKIN,
                    ENDOFCHECKIN = CASE WHEN b1.ENDOFCHECKIN <= a1.STARTOFCHECKIN THEN a1.ENDOFCHECKIN ELSE b1.ENDOFCHECKIN END,
                    year(a1.STARTOFCHECKIN) as JaarSTARTOFCHECKIN,
                    JaarENDOFCHECKIN = CASE WHEN b1.ENDOFCHECKIN <= a1.STARTOFCHECKIN THEN  year(a1.ENDOFCHECKIN) ELSE  year(b1.ENDOFCHECKIN) END,
                    Month(a1.STARTOFCHECKIN) as MaandSTARTOFCHECKIN,
                    MaandENDOFCHECKIN = CASE WHEN b1.ENDOFCHECKIN <= a1.STARTOFCHECKIN THEN  month(a1.ENDOFCHECKIN) ELSE  month(b1.ENDOFCHECKIN) END,
                    (year(a1.STARTOFCHECKIN)*100)+month(a1.STARTOFCHECKIN) as JaarMaandSTARTOFCHECKIN,
                    JaarMaandENDOFCHECKIN = CASE WHEN b1.ENDOFCHECKIN <= a1.STARTOFCHECKIN THEN (year(a1.ENDOFCHECKIN)*100)+month(a1.STARTOFCHECKIN) ELSE (year(b1.ENDOFCHECKIN)*100)+month(b1.ENDOFCHECKIN) END,
                    datediff(M,a1.STARTOFCHECKIN,b1.ENDOFCHECKIN) as MONTHSCHECKEDIN
from #temp3 a1
       full outer join #temp3 b1 on a1.ROWNR = b1.ROWNR -1 and a1.Employeeid = b1.Employeeid
where not (a1.STARTOFCHECKIN is null AND b1.ENDOFCHECKIN is null) 
order by a1.Employeeid, a1.STARTOFCHECKIN 
```

# google-apps-script - Google Apps 脚本，脚本已完成，但未返回任何内容

> ID：11983854
> 
> 赞同：4
> 
> 时间：2012-08-16T09:04:17.377
> 
> 标签：google-apps-script

我与“任何拥有链接的人”共享了我正在开发的应用程序，但我无法以其他用户身份访问该应用程序。

这是应用程序链接：[https](https://script.google.com/macros/s/AKfycbxjdyMyvIF8aYDBPurTi4VgVBP8PiiS76vh3mJXKCtFmljdmChK/exec) ://script.google.com/macros/s/AKfycbxjdyMyvIF8aYDBPurTi4VgVBP8PiiS76vh3mJXKCtFmljdmChK/exec 这是我与有效的类似设置共享的示例应用程序链接：[https ://script.google.com/macros/s/AKfycbwTM_gkT62IqpKjG52ZMh6LWo -gBKZyfcpmrrqNavdiuC71KsNv/exec](https://script.google.com/macros/s/AKfycbwTM_gkT62IqpKjG52ZMh6LWo-gBKZyfcpmrrqNavdiuC71KsNv/exec)

**应用部署设置：**

```
*Execute the app as: my_email@gmail.com

Who has access to the app: Anyone

The app uses ScriptDB.* 
```

如果最终无法公开访问，我的应用程序将毫无用处。您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:26:20.413

问题是`doGet`代码中的函数什么都不返回，它应该返回一个新的应用程序实例或 HTML 内容，就像在[Documentation](https://developers.google.com/apps-script/html_service#CreatingHTML)中一样。您必须通过以下方式更改`doGet`功能。

```
function doGet(e){
  //...
  return html;
} 
```

# sql - SQL查询以选择varchar字段的最大值

> ID：11983857
> 
> 赞同：0
> 
> 时间：2012-08-16T09:04:27.560
> 
> 标签：sql, select, varchar

我想选择 varchar 字段的最大值并将其值增加 1 保留其原始格式..

客户 ID 为 ex。:`CUS0000001`是值

向它添加 1，然后将其与其他详细信息一起输入到数据库中。

所以结果应该像`CUS0000002`..

这是我尝试过的，实际上达到了我想要的..

但这是最好的方法吗？

```
SELECT 
   CONCAT('CUS', RIGHT(CONCAT('000000', CONVERT((CONVERT(MAX(RIGHT(customer_id, 7)) , UNSIGNED) + 1), CHAR(10))), 7)) AS customer_id 
FROM customer_master 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:48:27.227

我同意评论者的观点，即数据库不应该这样设计。但是，如果您坚持使用它，我建议您这样做以获得最高价值：

```
select customer_id from customer_master 
    order by customer_id desc 
    fetch first row only; 
```

然后通过对返回的结果执行逻辑来生成新值。这会快得多，因为子字符串操作会很慢，在这种情况下它们只会执行一次。

（这假设每个 ID 都具有相同的前缀，即“CUS”；但是，您的代码似乎暗示了这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T06:35:38.783

```
SELECT MAX(RIGHT(CusID, 7)) AS id
FROM tblCustomer 
```

# xcode - Xcode：如何使用 TableView 切换到另一个窗口？

> ID：11983862
> 
> 赞同：0
> 
> 时间：2012-08-16T09:04:56.703
> 
> 标签：xcode

错误--->当我单击名称时应用程序崩溃...纠正--->当我单击表中的名称时，它应该跳转到另一个视图...

我的代码是

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [ListArr objectAtIndex:indexPath.row];
    ListData *oList = [[ListData alloc] initWithNibName:@"ListData" bundle:nil];
    NSString *psCatId = [NSString stringWithFormat:@"%d",indexPath.row+1];
    oList.psId = psCatId;
    [self presentModalViewController:oList animated:YES];
    [oList release];    
} 
```

# bash - 比较bash中的变量和整数

> ID：11983866
> 
> 赞同：0
> 
> 时间：2012-08-16T09:05:02.177
> 
> 标签：bash, ubuntu, conditional-statements

我有这个代码。但我总是得到一个错误`line 34: [24: command not found`。

它应该在 do while 循环执行 24 次后立即执行 if 语句中的代码。

```
#!/bin/bash

input="./user.cvs"

latexStart="\\documentclass[12pt]{article}\\usepackage{labels}\\usepackage{graphicx}\\usepackage{array}\\begin{document}\\graphicspath{{./QRcodes/}}\\newcolumntype{C}{>{\\centering\\arraybackslash} m{27mm} }"

latexEnd="\\end{document}"

latexBeginLabels="\\begin{labels}"

latexEndLabels="\\end{labels}"

counter=0

touch newLabels.txt

echo "$latexStart" >> newLabels.txt

echo "$latexBeginLabels" >> newLabels.txt

while IFS=';' read -r f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 f11 f12 f13
do

path="./QRcodes/$f2$f3.png"

vcard="BEGIN:VCARD%0AN;CHARSET=utf-8:$f3;$f2;;$f1;%0AADR;CHARSET=utf-8;INTL;PARCEL;WORK:;;$f10;$f11;;$f12;$f13%0AEMAIL;INTERNET:$f6%0AORG:$f4%0ATEL;WORK:$f8%0ATEL;FAX;WORK:$f9%0ATITLE:$f5%0AURL;WORK:$f7%0AEND:VCARD"

encodedVCard=$(echo "$vcard" | sed -e 's/\+/\%2B/g')

url="http://api.qrserver.com/v1/create-qr-code/?size=300x300&data=$encodedVCard"

wget -O "$path" "$url"

if ["${counter:-0}" -gt 21] ;
    then
        counter=0
        echo "$latexEndLabels" >> newLabels.txt
        echo "\\newpage" >> newLabels.txt
        echo "$latexBeginLabels" >> newLabels.txt
fi

echo "\\begin{tabular}{ C C } \\includegraphics[height=30mm]{name.png} & Name Man \\\\ \\end{tabular}" >> newLabels.txt

let counter=counter+1

done < "$input"

echo "$latexEndLabels" >> newLabels.txt
echo "$latexEnd" >> newLabels.txt 
```

错误在第 34 行，`if ["${counter:-0}" -gt 21] ;`. 我从[bash 中的比较整数中得到了这个例子，预计一元运算符](https://stackoverflow.com/questions/408975/compare-integer-in-bash-unary-operator-expected) 我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:10:38.930

你需要

```
if [ "${counter:-0}" -gt 21 ]; then ... 
```

即您的条件语句与周围的方括号之间用空格隔开。

我引用`counter`是安全的，但如果你确定它永远不会是空的，那么你可以跳过它。[然而，安全可能比抱歉](https://stackoverflow.com/a/605138/12960)更好，并遵循您的原始模式。

# php - 为什么我没有在php中将此数字作为整数

> ID：11983868
> 
> 赞同：0
> 
> 时间：2012-08-16T09:05:06.953
> 
> 标签：php, html, css, logic

我只在用户输入整数值（`no`字符串、浮点数等）时才尝试打印表格，但是这段代码不起作用让我现在缺少什么来获取整数值而不`JAVASCRIPT`在前端使用。如果我错过了一些逻辑，请告诉我。

这是我的 php 代码 ( **index.php** ) --

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>table Data</title>
</head>

<body>

<table width="29%" border="1">
<form name="mytableform" id="mytableform" action="mytabledata.php" method="POST">
  <tr>
    <td width="42%">Enter any munber :&nbsp;</td>
    <td width="58%"><input type="text" name="mynumber" id="mynumber" />&nbsp;</td>
  </tr>
  <tr>
    <td>Enter limit :&nbsp;</td>
    <td><input name="limit" type="text" id="limit" />&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2"><input type="submit" value="Submit" name="submit" />&nbsp;</td>
    </tr>
 </form> 
</table>

</body>
</html> 
```

我的**mytabledata.php**内容文件——

```
<?php

$number = $_POST['mynumber'];
$limit = $_POST['limit'];

//var_dump($number);
//var_dump($limit);

if( is_int($number) )
{
    for($i=1;$i<=$limit;$i++)
    {
    $p= $number * $i;
    echo $number." X ".$i." = "." ".$p.";";
    echo "<br />";
    }
}
else{
echo "Please check the type of data you are entering.";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:08:43.180

来自 HTTP ( , 等) 的输入`$_POST`将`$_GET`始终`string`输入 php 域。如果您想验证该字符串是否可以解释为您可以使用`is_numeric`的数字或[过滤器](http://php.net/manual/en/filter.filters.validate.php)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:08:07.860

您的值`POST`是字符串类型。要使用它，您可以这样做：

```
$number = intval( $_POST['mynumber'] ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:07:59.353

问题是`$_POST`值总是作为 ASCII 文本提交（即它们是字符串）。使用该[`intval`](http://php.net/manual/en/function.intval.php)函数将字符串转换为整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T09:10:32.563

的值`$_POST`始终是字符串，不会自动转换为数字。

您想在脚本中使用的可能不是`is_int()`，它检查变量类型，而是`is_numeric()`检查变量是否包含数值（无论是 int 还是 string）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T09:30:46.307

当我必须检查整数类型时，我通常使用下面提到的条件

```
if(is_numeric($val) && intval($val)==$val) {
/*Place your code here*/
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T09:17:52.837

我会使用`is_numeric`而不是`is_int`. 上面提到的答案也很好，但是 is_numeric 更好，因为它会立即返回 true 或 false。

```
 if( is_numeric($number) ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T09:20:13.373

试试这个，

```
if(((int) $number) == $number)
{
    echo "is integer";
} 
```

编辑：或者你可以像这样使用正则表达式

```
if(preg_match("/^\d+$/", $number))
{
    echo "is integer";
} 
```

# javascript - 返回导航/页面刷新问题

> ID：11983873
> 
> 赞同：1
> 
> 时间：2012-08-16T09:05:28.590
> 
> 标签：javascript, jquery, refresh, reload, back

我有一个博客页面（滑块的一部分），上面有一个博客文章列表。我点击一个帖子，它会把我带到它，但如果我尝试返回（通过浏览器的后退按钮）到博客列表页面，我得到的只是标题和背景图像。

在此之后，我按前进以返回博客文章（博客文章），如果我再次按返回，它就可以工作。我的页面可以正确显示，没有任何问题。

有谁知道这会导致什么？我忘了提到我的目的是让它在后退按钮后正确显示。

我尝试使用 onbeforeunload 事件：

```
<script type="text/javascript">
     window.onbeforeunload = function () {
     return "You are about to leave this order form. You will lose any information...";
    }
</script> 
```

在博客文章页面上，但无济于事。

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:09:04.173

尝试这个

```
<a href="#" onclick="history.go(-1);">Back</a> 
```

# javascript - 运行函数时出错

> ID：11983874
> 
> 赞同：0
> 
> 时间：2012-08-16T09:05:35.610
> 
> 标签：javascript, shape, shapes

我必须删除画布中的形状。

编写了以下代码-

```
 function deleteCircle(circle, propName) {
      for( i = 0; i < circle.length; i++) {
        circle[i].erase();      
      }
    }
   circle.prototype.erase=function() {
      delete this;
    } 
```

当我在 i=0 运行此代码时，它将进入擦除功能。但在第一次删除后，它不会回到 deletecircle。这只是一个粗略的代码......我只是感到困惑，在删除这个......之后，在对象被删除之后，代码会回到 deletecircle 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:24:36.273

正如其他用户所说，在循环期间修改数组的大小是一个坏主意。尝试：

```
var circle = new Array();
circle[0]=1;
circle[1]=2;
circle[2]=3;
circle[3]=4;

function deleteCircle(circle, propName) {
    while(circle.length!==0){
        erase(circle.pop());
    }
}
function erase(elem){
    delete elem;
}

alert(circle.length);
deleteCircle(circle,null);
alert(circle.length); 
```

[**现场演示**](http://jsfiddle.net/SP9CD/)

**编辑**：抱歉没有注意到您更改了代码。更新：

```
function circle(){};
circle.prototype.erase = function(){
    delete this;
}

var circles = [new circle, new circle, new circle];

function deleteCircle(circle, propName) {
    while(circle.length!==0){
        circle.pop().erase();
    }
}

function circle(){}; //or however you define your class
circle.prototype.erase = function(){ //extend the class
    delete this;
}

var circles = [new circle, new circle, new circle]; //your array

function deleteCircle(circle, propName) {
    while(circle.length!==0){
        circle.pop().erase();
    }
}

alert(circles.length);
deleteCircle(circles,null);
alert(circles.length); 
```

[**现场演示**](http://jsfiddle.net/SP9CD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:10:01.707

您的圆形对象没有`erase`方法。在你的情况下`erase`是单独的功能，不会像这样工作。

# c++ - C++11 中的 thread_local 是什么意思？

> ID：11983875
> 
> 赞同：153
> 
> 时间：2012-08-16T09:05:36.737
> 
> 标签：c++, multithreading, c++11, thread-local, thread-local-storage

我对`thread_local`C++11 中的描述感到困惑。我的理解是，每个线程在函数中都有唯一的局部变量副本。所有线程都可以访问全局/静态变量（可能使用锁进行同步访问）。并且`thread_local`变量对所有线程都是可见的，但只能由定义它们的线程修改？这是对的吗？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-08-16T09:13:22.620

线程本地存储持续时间是一个术语，用于指代看似全局或静态存储持续时间的数据（从使用它的函数的角度来看），但实际上每个线程都有一个副本。

它添加到当前自动（存在于块/函数期间）、静态（存在于程序持续时间）和动态（存在于分配和释放之间的堆上）。

线程本地的东西在线程创建时就存在，并在线程停止时被处理掉。

下面是一些例子。

考虑一个随机数生成器，其中种子必须在每个线程的基础上维护。使用线程局部种子意味着每个线程都有自己的随机数序列，独立于其他线程。

如果你的种子是随机函数中的一个局部变量，它会在你每次调用它时被初始化，每次都给你相同的数字。如果它是全局的，线程会干扰彼此的序列。

另一个例子是`strtok`标记化状态存储在特定于线程的基础上。这样，单个线程可以确保其他线程不会搞砸其标记化工作，同时仍然能够在多次调用时保持状态`strtok`- 这基本上使`strtok_r`（线程安全版本）冗余。

这两个示例都允许线程局部变量存在*于*使用它的函数中。在预线程代码中，它只是函数内的静态存储持续时间变量。对于线程，修改为线程本地存储持续时间。

另一个例子是`errno`. 您不希望`errno`在一个调用失败后但在检查变量之前修改单独的线程，但您只希望每个线程有一个副本。

[该站点](http://en.cppreference.com/w/cpp/language/storage_duration)对不同的存储持续时间说明符进行了合理的描述。

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2012-08-16T10:41:50.240

当您声明一个变量时`thread_local`，每个线程都有自己的副本。当您按名称引用它时，将使用与当前线程关联的副本。例如

```
thread_local int i=0;

void f(int newval){
    i=newval;
}

void g(){
    std::cout<<i;
}

void threadfunc(int id){
    f(id);
    ++i;
    g();
}

int main(){
    i=9;
    std::thread t1(threadfunc,1);
    std::thread t2(threadfunc,2);
    std::thread t3(threadfunc,3);

    t1.join();
    t2.join();
    t3.join();
    std::cout<<i<<std::endl;
} 
```

此代码将输出“2349”、“3249”、“4239”、“4329”、“2439”或“3429”，但不会输出任何其他内容。每个线程都有自己的副本`i`，分配给它，递增然后打印。运行的线程`main`也有自己的副本，它在开始时被分配，然后保持不变。这些副本是完全独立的，并且每个都有不同的地址。

只有**名称**在这方面是特殊的 --- 如果您获取`thread_local`变量的地址，那么您只有一个指向普通对象的普通指针，您可以在线程之间自由传递。例如

```
thread_local int i=0;

void thread_func(int*p){
    *p=42;
}

int main(){
    i=9;
    std::thread t(thread_func,&i);
    t.join();
    std::cout<<i<<std::endl;
} 
```

由于 的地址`i`被传递给线程函数，因此属于主线程的副本`i`即使是 也可以分配给`thread_local`。因此，该程序将输出“42”。如果你这样做，那么你需要注意`*p`在它所属的线程退出后不被访问，否则你会得到一个悬空指针和未定义的行为，就像指向对象被破坏的任何其他情况一样。

`thread_local`变量在“第一次使用之前”被初始化，所以如果它们从未被给定线程触及，那么它们不一定被初始化。这是为了让编译器避免`thread_local`在程序中为完全独立且不接触任何变量的线程构造每个变量。例如

```
struct my_class{
    my_class(){
        std::cout<<"hello";
    }
    ~my_class(){
        std::cout<<"goodbye";
    }
};

void f(){
    thread_local my_class unused;
}

void do_nothing(){}

int main(){
    std::thread t1(do_nothing);
    t1.join();
} 
```

在这个程序中有 2 个线程：主线程和手动创建的线程。两个线程都没有调用`f`，因此`thread_local`从不使用该对象。因此未指定编译器是否会构造 0、1 或 2 个实例`my_class`，输出可能是“”、“hellohellogoodbyegoodbye”或“hellogoodbye”。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-08-16T09:23:44.920

线程本地存储在各个方面都像静态（=全局）存储，只是每个线程都有一个单独的对象副本。对象的生命周期从线程开始（对于全局变量）或第一次初始化（对于块局部静态）开始，并在线程结束时（即被`join()`调用时）结束。

因此，只有也可以声明的变量`static`才能声明为`thread_local`，即全局变量（更准确地说：“在命名空间范围内”的变量）、静态类成员和块静态变量（在这种情况下`static`是隐含的）。

例如，假设您有一个线程池并且想知道您的工作负载的平衡情况：

```
thread_local Counter c;

void do_work()
{
    c.increment();
    // ...
}

int main()
{
    std::thread t(do_work);   // your thread-pool would go here
    t.join();
} 
```

这将打印线程使用统计信息，例如使用如下实现：

```
struct Counter
{
     unsigned int c = 0;
     void increment() { ++c; }
     ~Counter()
     {
         std::cout << "Thread #" << std::this_thread::id() << " was called "
                   << c << " times" << std::endl;
     }
}; 
```

# php - 在 joomla 1.5 的文章管理器中创建自定义文件

> ID：11983880
> 
> 赞同：0
> 
> 时间：2012-08-16T09:05:54.770
> 
> 标签：php, joomla1.5

我是 joomla 的初学者，所以对于 joomla 核心文件的一些自定义，我遇到了麻烦。

我想要什么：- 我想在文章详细信息页面中添加复选框。通过使用此选项，我将获得当前文章应该是“最新与否”的值。

我做了什么：-我在 jos_content 中添加了额外的 1 个布尔类型字段。并在文章编辑表单上创建一个复选框。我在以下代码管理员/组件/com_content/admin.content.html.php 中创建复选框

```
<td>
                <label>
                <?php echo JText::_( 'Latest News' ); ?>
                </label>
            </td>
            <td>
                <?php echo $lists['latestnews']; ?>
            </td> 
```

我的问题：- 我如何添加这个字段值并在数据库中更新？

我发现为 joomla 1.6,1.7 创建了这样的东西。但是 joomla 1.5 的文件结构与其他版本非常不同。请帮帮我..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:40:19.810

您需要编辑`controler`并将`tables`数据保存到数据库中，名称必须与文章有关！

# jquery - scroll left distance trigger jquery css

> ID：11983884
> 
> 赞同：0
> 
> 时间：2012-08-16T09:06:06.403
> 
> 标签：jquery, scroll

```
$(document).scroll(function() {

var distanceLeft = $(document).scrollLeft();

if( distanceLeft > 7200)
{
$('#element').animate({height: 421, top: 55}, 1500);
} 
```

Hi I am animating an element when the scroll left reaches more than 7200, how would I reverse this if it was less than 7200 back to original position please any help would be amazing thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:10:10.373

```
$(document).scroll(function() {

  var distanceLeft = $(document).scrollLeft();
  var isLeft = false;

  if (distanceLeft > 7200) {
    isLeft = true;
    $('#element').stop(true, false).animate({ height: 421, top: 55 }, 1500);
  } else if (isLeft) {
    isLeft = false;
    $('#element').stop(true, false).animate({ height: origHeight, top: origTop }, 1500);
  }
} 
```

put the original values in the palceholders

# django - Django FileField 上传对我不起作用

> ID：11983885
> 
> 赞同：16
> 
> 时间：2012-08-16T09:06:07.873
> 
> 标签：django, django-models, django-forms, django-views

我一直在挠头 FileField。FileField 是否需要单独的过程？

虽然我的网址被保存..但我的文件没有上传......我做错了什么？

这是我的models.py ...

```
class OpLink(models.Model):
    user = models.ForeignKey(User)
    file = models.FileField(blank=True, null=True, upload_to="uploads")
    url = models.URLField(blank=True, null=True) 
```

我的表格.py

```
class OpLinkForm(ModelForm):
    class Meta:
        model = OpLink
        exclude = ('user') 
```

我的意见.py

```
oplinkform = oplinkform(request.POST)
                oplink = oplinkform.save(commit=False)
                oplink.user = user
                oplink.save() 
```

和我的 html 来处理它。

```
<div class="span5">
                            {{ oplinkform.url|add_class:"span4"|attr:"Placeholder:URL for the item" }}
                            <br><h4>OR</h4><br>
                            {{ oplinkform.file|add_class:"input-file" }}
                            <br />
                            <input class='btn btn-primary btn-large' type="submit" value='Post' name='action'>
</div> 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-16T09:07:29.307

创建表单时需要包含文件

```
oplinkform = oplinkform(request.POST, request.FILES) 
```

还要确保您的表单具有正确的 enctype

```
<form enctype="multipart/form-data"></form> 
```

# cocos2d-iphone - CCSpriteBatchNode 动画单个精灵

> ID：11983892
> 
> 赞同：0
> 
> 时间：2012-08-16T09:06:28.900
> 
> 标签：cocos2d-iphone

据我了解，CCSpriteBatchNode 的作用是通过减少 OpenGL 指令的数量（如果它们都使用相同的 spritesheet）来优化许多孩子的渲染。

但是我在[Cocos2D动画指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3aanimation)中看到CCSpriteBatchNode是用来动画单个精灵的...

我有点困惑。使用 CCSpriteBatchNode 为单个 CCSprite 设置动画有什么好处？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:13:29.540

简而言之，没有。如果您在屏幕上只有一个精灵，使用 CCSpriteBatchNode 会适得其反，无论精灵是否动画。

# powershell - 在 powershell 中使用 netsh：保存多个命令的存储位置

> ID：11983895
> 
> 赞同：0
> 
> 时间：2012-08-16T09:06:40.647
> 
> 标签：powershell, dns, location, store, netsh

我有一个 powershell 脚本，旨在通过将 ip 地址添加到指定的过滤器列表来修改域的 ipsec 策略。问题是`netsh store location=domain domain=our.domain.com`在我的 powershell 脚本中运行时，它不记得以下命令的存储位置。我尝试了一种解决方法，方法是创建一个文本文件，然后从 powershell 运行，`netsh -f "path\to\textfile.txt"`但它似乎不起作用。您将在下面找到相关的脚本块。域设置正确，因为它直接在 netsh 中运行时工作。

```
$command = "ipsec static
    set store location=domain domain=our.domain.com
    add filter filterlist=$FILTERLIST
        protocol=ANY srcaddr=$ip
        srcmask=255.255.255.255
        dstaddr=ME 
        description='IP address blocked' 
        mirrored=YES"
    $($command.Trim()) | out-file $($DIR+"\netsh\temp.txt")
    netsh -f $($DIR+"\netsh\temp.txt")
    remove-item $($DIR+"\netsh\temp.txt") 
```

我还没有让它工作，但是当我即将这样做时，很高兴知道是否有其他设计更好的解决方案。我正在运行 PowerShell v.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-24T00:31:36.373

使用 here 字符串`@"`...`"@` 脚本的每一行都位于其间的单独行上。并将命令传递给`netsh`

```
@"
winhttp show proxy
winhttp show proxy
"@ | netsh 
```

# dojo - Dojo DataGrid 导出到 excel

> ID：11983897
> 
> 赞同：1
> 
> 时间：2012-08-16T09:06:45.203
> 
> 标签：dojo, dojox.grid

我使用了数据网格的导出器插件，并获得了 CSV 格式的网格数据。但我想让这些数据以 excel 格式下载。一种解决方案是我可以向服务器发送 ajax 请求并发送回 excel。

只是想知道是否有一种方法可以在不访问服务器的情况下创建和下载此 excel。

我现在的出口代码是：

```
 function exportAll(){
            dijit.byId("grid").exportGrid("csv", function(str){
                alert('Data to be exported',str);
            });
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:32:09.263

看

[将 dojo 数据网格导出到 csv 文件](https://stackoverflow.com/questions/4440803/exporting-a-dojo-datagrid-to-a-csv-file)

您无法通过 javascript 打开 excel，因此它需要是 GET 下载请求。

使用发送`str`到服务器`xhrPost`，放入临时文件，打印 temp-url 并在`xhrPost`成功回调函数中调用`window.open("./" + responseText, "_new");`. 也可以使用该`io.iframe`帖子中显示的答案之一的传输。

```
 function exportAll(){
        dijit.byId("grid").exportGrid("csv", function(str){
            dojo.xhrPost({
                url: '/putExportData.php',
                load: function(tempUrl) {
                    window.open(tempUrl, "_new");
                }
            });
        });
    }; 
```

# asp.net - asp.net查询字符串加密生成sql保留关键字并阻塞请求

> ID：11983902
> 
> 赞同：1
> 
> 时间：2012-08-16T09:07:08.577
> 
> 标签：asp.net, query-string, sql-injection

我正在使用技术来防止 sql 注入，其中我有 sql 保留关键字列表并检查查询字符串是否包含此保留关键字，如果是，那么我将阻止请求。

我的查询字符串总是加密的，有时生成的加密字符串包含 sql 保留关键字，因此所有此类请求都被阻止。

我应该如何处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:14:16.793

你永远不想这样做......只需用户[Params](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)来设置你的数据，它会自动检查关键字和整个 sql 注入过程，相信我最好使用[params](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)，它更安全......

# c++ - CString 找到最后一个条目

> ID：11983903
> 
> 赞同：2
> 
> 时间：2012-08-16T09:07:12.367
> 
> 标签：c++, mfc

我有两个`CString s1`和`CString s2`。我需要在 s1 中找到最后一个条目 s2。我可以在 CString 中找到任何方法，例如在 C# LastIndexOf 中。我是 C++ 中的菜鸟。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:15:40.470

`CString`没有这样的功能。你必须自己写，例如

```
int LastIndexOf(const CString& s1, const CString& s2)
  {
  int found = -1;
  int next_pos = 0;
  for (;;)
    {
    next_pos = s1.Find(s2, next_pos);
    if (next_pos == -1)
      return found;

    found = next_pos;
    };
  } 
```

一种更优化的算法会首先反转字符串，我将其留作练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T12:18:19.877

您不需要实现自我功能。std 提供了一个函数：std::string::find_last_of。例如：

```
std::string str("c:\windows\winhelp.exe");
unsigned found = str.find_last_of("/\\");
std::cout << " path: " << str.substr(0,found) << '\n';
std::cout << " file: " << str.substr(found+1) << '\n';

path: c:\windows
file: winhelp.exe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T03:40:07.073

我采用了 Andrey 的答案（为了增加 next_pos，没有它似乎会导致无限循环）。aaand，因为我还没有足够的声望点（无法发表评论），我将其作为单独的答案发布：

```
int LastIndexOf(const CString& s1, const CString& s2)
{
    int start = s1.Find(s2, 0);

    if (start >= 0) 
    {
        while (start < s1.GetLength()) 
        {
            int idx = s1.Find(s2, start+1); 
            if (idx >= 0) 
                start = idx; 
            else 
                break; 
        }
    }

    return start;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:14:40.817

没有`CString`办法直接解决您的问题。但是，您可以使用`CString::ReverseFind`+的组合`_tcsncmp`首先定位子字符串最后一个字符的下一个匹配项，如果找到，则从那里比较整个子字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T09:15:21.817

我认为 CString 是“Microsoft 基础类库”的一部分，而*不是*标准 C++。有一个参考，包括这里的方法：

[http://msdn.microsoft.com/en-us/library/aa315043%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa315043%28v=vs.60%29.aspx)

我没有看到任何东西可以直接将其转换为 std::string （它有更多的方法），但它可能也不是那么难（搜索“CString to std::string”，你会发现一些东西）。

尽管它们可能是相关的，但不要将其与 c-string 混淆，后者是`chars`标准 C++ 中包含的标准 C 的数组。

# php - 正则表达式内联选项

> ID：11983912
> 
> 赞同：1
> 
> 时间：2012-08-16T09:07:38.590
> 
> 标签：php, regex

我的文本中已经包含可能的值，我想在某些情况下显示正确的值。我不太擅长正则表达式，我真的不知道如何解释我的问题，所以这里有一个例子。我已经让它几乎工作了：

```
$string = "This [was a|is the] test!";

preg_replace('/\[(.*)\|(.*)\]/', '$1', $string);
// results in "This was a text!"

preg_replace('/\[(.*)\|(.*)\]/', '$2', $string);
// results in "This is the test!" 
```

这可以正常工作，但是当有两个部分时，它就不再起作用了，因为它从最后一个中获取了结束括号。

```
$string = "This [was a|is the] so this is [bullshit|filler] text";

preg_replace('/\[(.*)\|(.*)\]/', '$1', $string);
//results in "This was a|is the] test so this is [bullshit text"

preg_replace('/\[(.*)\|(.*)\]/', '$2', $string);
//results in "This filler text" 
```

情况 1 应该是 ( 和 | 之间的值，情况 2 应该显示 | 和 ) 之间的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:15:08.977

您的问题是正则表达式[贪婪](http://www.regular-expressions.info/repeat.html#~Watch+Out+for+The+Greediness)。添加一个`?`after`.*`使其仅使用方括号内的字符串：

```
 preg_replace('/\[(.*?)\|(.*?)\]/', '$1', $string); 
```

同样，您可以使用`/U`ungreedy 修饰符。更好的是使用更具体的匹配来代替`.*?`任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:14:16.357

而不是使用：

```
(.*) 
```

...要匹配选项组中的内容，请使用以下命令：

```
([^|\]]*) 
```

该模式匹配任何不是 | 或]，重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:17:15.247

您可以在替换with时禁止使用`|`字符（这意味着“否”）。`.*``.``[^|]``|`

```
$string = "This [was a|is the] so this is [bullshit|filler] text";

echo preg_replace('/\[([^|]*)\|([^|]*)\]/', '$1', $string);
// results in "This was a so this is bullshit text"

echo '<br />';

echo preg_replace('/\[([^|]*)\|([^|]*)\]/', '$2', $string);
// results in "This is the so this is filler text" 
```

# objective-c - 从 tableview 预览图像

> ID：11983913
> 
> 赞同：0
> 
> 时间：2012-08-16T09:07:45.327
> 
> 标签：objective-c, cocoa, nsfilemanager, nsimageview, ikimageview

我有一个包含目录文件的表格视图。当我从表中选择一行时，我想预览它的内容（例如 jpeg 图像或 pdf 文件的内容），但我找不到解决方案。请问您有什么建议吗？

# java - 保留特殊字符的replaceAll类型方法

> ID：11983914
> 
> 赞同：1
> 
> 时间：2012-08-16T09:07:52.600
> 
> 标签：java, regex, string

目前，类的`replaceAll`方法`String`以及`Matcher.replaceAll`方法将它们的参数评估为正则表达式。

我遇到的问题是我传递给这两种方法的替换字符串包含一个美元符号（这在正则表达式中当然具有特殊含义）。一个简单的解决方法是将我的替换字符串传递给“Matcher.quoteReplacement”，因为这会产生一个带有文字字符的字符串，然后将这个经过*清理*的字符串传递给`replaceAll`.

不幸的是，我不能执行上述操作，因为我需要保留特殊字符，因为生成的字符串稍后将用于需要 reg ex 的操作中，如果我已经转义了所有特殊字符，这将破坏该合同。

有人可以建议我可以实现我想做的事情吗？非常感谢。

编辑：为了更清楚的解释，请在下面找到代码示例：

```
String key = "USD";
String value = "$";

String content = "The figure is in USD";
String contentAfterReplacement;

contentAfterReplacement = content.replaceAll(key, value); //will throw an exception  as it will evaluate the $ in 'value' variable as special regex character

contentAfterReplacement = content.replaceAll(key, Matcher.quoteReplacement(value)); //Can't do this as contentAfterReplacement is passed on and later parsed as a regex (Ie, it can't have special characters escaped). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:25:39.180

为什么不使用[String#replace](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)方法而不是`replaceAll`. `replaceAll`使用正则表达式但`replace`不在替换字符串中使用正则表达式。

# javascript - 如何添加下拉菜单以将项目添加到我的 ckeditor

> ID：11983919
> 
> 赞同：0
> 
> 时间：2012-08-16T09:08:00.467
> 
> 标签：javascript, templates, ckeditor

我使用 ckeditor 并希望能够为用户提供一个模板令牌列表（对于 php smarty，但可以是任何东西），可以插入到光标处的主编辑器文本中

例如。

*   {[$FirstName]}
*   {[$PhoneNumber]}
*   {[$BalanceDue]}

有没有一种简单的方法来创建一个插件来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:08:00.467

kuba.co.uk 上有一篇文章，给出了一个非常简单的例子来说明如何做到这一点。

[http://www.kuba.co.uk/blog.php?blog_id=15](http://www.kuba.co.uk/blog.php?blog_id=15)

# sql - 使用索引优化 SQLite3 上的 SQL 查询

> ID：11983924
> 
> 赞同：7
> 
> 时间：2012-08-16T09:08:06.233
> 
> 标签：sql, performance, optimization, indexing

我正在尝试通过创建索引来优化 SQL 查询以获得最佳性能。

表定义

```
CREATE TABLE Mots (
  numero            INTEGER NOT NULL, 
  fk_dictionnaires integer(5) NOT NULL, 
  mot              varchar(50) NOT NULL, 
  ponderation      integer(20) NOT NULL,
  drapeau varchar(1) NOT NULL,
  CONSTRAINT pk_mots PRIMARY KEY(numero),
  CONSTRAINT uk_dico_mot_mots UNIQUE(fk_dictionnaires, mot),
  CONSTRAINT fk_mots_dictionnaires FOREIGN KEY(fk_dictionnaires) REFERENCES Dictionnaires(numero)
  ); 
```

索引定义

```
CREATE INDEX idx_dictionnaires ON mots(fk_dictionnaires DESC);
CREATE INDEX idx_mots_ponderation ON mots(ponderation);
CREATE UNIQUE INDEX idx_mots_unique ON mots(fk_dictionnaires, mot); 
```

SQL查询：

```
SELECT numero, mot, ponderation, drapeau 
FROM mots 
WHERE mot LIKE 'ar%' 
   AND fk_dictionnaires=1 
   AND LENGTH(mot)>=4 
   ORDER BY ponderation DESC 
LIMIT 5; 
```

查询计划

```
0|0|0|SEARCH TABLE mots USING INDEX idx_dictionnaires (fk_dictionnaires=?) (~2 rows)
0|0|0|USE TEMP B-TREE FOR ORDER BY 
```

定义的索引似乎没有使用并且查询持续（根据.timer）：

```
CPU Time: user 0.078001 sys 0.015600 
```

但是，当我删除 fk_dictionnaires=1\. 我的索引使用正确，性能约为 0.000000-0.01XXXXXX 秒

```
0|0|0|SCAN TABLE mots USING INDEX idx_mots_ponderation (~250000 rows) 
```

我在stackoverflow上发现了一些类似的问题，但没有帮助我。

*   [从 SQLite 查询中删除临时 B 树排序](https://stackoverflow.com/questions/9745128/removing-a-temporary-b-tree-sort-from-a-sqlite-query)
*   [类似问题](https://stackoverflow.com/questions/5206577/better-query-strategy-to-sort-files-by-file-hash-frequency-and-file-size)

如何通过使用索引或/和更改 SQL 查询来提高性能？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:44:33.343

SQLite 似乎认为`idx_dictionnaires`索引非常稀疏，并得出结论，如果它使用 扫描`idx_dictionnaires`，它只需要检查几行。但是，您引用的性能结果表明它必须检查的不仅仅是几行。首先，您为什么不尝试一下`ANALYZE mots`，这样 SQLite 将获得有关每个可用索引的基数的最新信息？

以下是 SQLite 文档中可能有帮助的其他内容：

* * *

通过在列名前添加一元 + 运算符，可以手动取消 WHERE 子句的条款与索引一起使用的资格。一元 + 是无操作的，不会减慢术语指定的测试的评估速度。但它会阻止该术语约束索引。因此，在上面的示例中，如果查询被重写为：

```
SELECT z FROM ex2 WHERE +x=5 AND y=6; 
```

x 列上的 + 运算符将阻止该术语约束索引。这将强制使用 ex2i2 索引。

请注意，一元 + 运算符还会从表达式中删除类型亲和性，在某些情况下，这可能会导致表达式含义的细微变化。在上面的示例中，如果列 x 具有 TEXT 相似性，则比较“x=5”将作为文本进行。但是 + 运算符删除了亲和力。因此，比较“+x=5”会将 x 列中的文本与数值 5 进行比较，并且始终为 false。

* * *

如果`ANALYZE mots`不足以帮助 SQLite 选择要使用的最佳索引，您可以使用此功能强制它使用您想要的索引。

您也可以尝试复合索引——看起来您已经在 上定义了一个`fk_dictionnaires,mot`，但 SQLite 没有使用它。对于“快速”查询，SQLite 似乎更喜欢使用 on 索引`ponderation`，以避免在查询结束时对行进行排序。如果您在 上添加索引，并且 SQLite 实际使用它，它可以在没有表扫描的情况下`fk_dictionnaires,ponderation DESC`挑选出匹配的行，*并*避免在最后进行排序。`fk_dictionnaires=1`

 ** * *

**POSTSCRIPT**：我在上面建议的复合索引“修复”了 OP 的性能问题，但他也询问了它的工作原理和原因。@AGeiser，我将使用一个简短的说明来帮助您直观地理解数据库索引：

想象一下，您需要找到镇上所有姓氏以“A”开头的人。您有一个包含所有名称的目录，但它们的顺序是随机的。你做什么工作？您别无选择，只能通读整个目录，然后选择以“A”开头的目录。听起来工作量很大，对吧？（这就像一个没有索引的数据库表。）

但是如果有人给你一个电话簿，所有的名字都按字母顺序排列怎么办？现在您可以找到以“A”开头的第一个和最后一个条目（使用类似于二进制搜索的东西），并获取该范围内的所有条目。您甚至不必查看书中的所有其他名称。这会*更快*。（这就像一个带有索引的数据库表；在这种情况下，将其称为 . 上的索引`last_name,first_name`。）

现在如果你想要所有名字以“A”开头的人，但是如果有两个人的名字相同，你希望他们按邮政编码排序？即使您使用“电话簿”（即索引`last_name,first_name`）快速获得所需的名称，您仍然必须手动对它们进行排序......所以听起来又开始做很多工作了。什么能让这份工作变得非常容易？

这将需要另一个“电话簿”——但其中条目首先按名称排序，然后按邮政编码排序。使用这样的“电话簿”，您可以快速选择所需的条目范围，甚至不需要对它们进行排序——它们已经按照所需的顺序排列。（这是关于 的索引`last_name,first_name,postal_code`。）

我认为这个插图应该清楚地说明索引如何帮助 SELECT 查询，不仅通过减少必须检查的行数，而且通过（可能）消除在找到所需行之后对单独的“排序”阶段的需要. 希望它也清楚地表明复合索引 on 与 on`a,b`完全不同`b,a`。我可以继续提供更多“电话簿”示例，但这个答案会变得很长，以至于更像是一篇博客文章。为了让您了解哪些索引可能对查询有益，我推荐 O'Reilly 的《SQL 反模式》一书（尤其是第 13 章，“Index Shotgun”）。*

# c# - 在 c# winforms app 中从模板生成 rtf

> ID：11983925
> 
> 赞同：1
> 
> 时间：2012-08-16T09:08:06.547
> 
> 标签：c#, .net, winforms

是否有人可以推荐一个简单的过程来从预先构建的“模板”生成 rtf 文档并填充字段。

我宁愿避免使用 ms word 自动化类型的解决方案，因为我不能保证 ms office 版本等。

生成的文件需要是可编辑的，所以我不能去 pdf

是像使用 nvelocity 之类的东西一样简单，还是我需要做一些更有趣的事情？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:11:41.767

您始终可以使用关键字：示例：

这是需要[替换]的[文本]

并使用 stringbuilder 替换关键字。

```
StringBuilder sb = new StringBuilder(yourTemplate);
sb.Replace("[text]", "car");
sb.Replace("[replaced]", "washed"); 
```

因此，如果您得到我，最终文本将是：

这是一辆需要清洗的汽车。

这只是一种方法。

# mysql - mysql分区修剪不起作用

> ID：11983926
> 
> 赞同：0
> 
> 时间：2012-08-16T09:08:07.183
> 
> 标签：mysql, database-partitioning, pruning

我创建了一个带有 MySQL 分区的表`hash(to_days(...))`。

```
CREATE TABLE `requestlog` (
  `remotehost` varchar(40) DEFAULT NULL,
  `user` varchar(255) DEFAULT NULL,
  `request_time_str` varchar(40) DEFAULT NULL,
  `request_time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `request_line` varchar(255) DEFAULT NULL,
  `status` int(11) DEFAULT NULL,
  `bytes` int(11) DEFAULT NULL,
  `referer` text,
  `useragent` text,
  `host` text,
  `instance` text,
  `ms` int(11) DEFAULT NULL,
  `cpu_ms` int(11) DEFAULT NULL,
  `api_cpu_ms` int(11) DEFAULT NULL,
  `cpm_usd` float DEFAULT NULL,
  `queue_name` varchar(40) DEFAULT NULL,
  `task_name` varchar(40) DEFAULT NULL,
  `loading_request` tinyint(1) DEFAULT NULL,
  `pending_ms` int(11) DEFAULT NULL,
  `exit_code` int(11) DEFAULT NULL,
  `throttle_code` int(11) DEFAULT NULL,
  `method` varchar(40) DEFAULT NULL,
  `path` varchar(255) DEFAULT NULL,
  `querystring` text,
  `protocol` varchar(40) DEFAULT NULL,
  `applog` text,
  `applog0` text,
  `applog1` text,
  `applog2` text,
  `applog3` text,
  `applog4` text,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMES
TAMP,
  PRIMARY KEY (`request_time`,`id`),
  UNIQUE KEY `path` (`path`,`request_time`,`remotehost`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8
/*!50100 PARTITION BY HASH (to_days(request_time))
PARTITIONS 1000 */ 
```

但是，当我执行以下查询时。`explain partitions`结果显示分区修剪不起作用，因为它扫描了属于该表的所有分区...

```
explain partitions select count(*) from requestlog where to_days(request_time) = '2012-08-01'; 
```

我尝试了本文中的示例。解释分区仍然显示它扫描所有分区。 [如何按日期时间列对表进行分区？](https://stackoverflow.com/questions/6093585/how-to-partition-a-table-by-datetime-column)

如何让分区修剪起作用？有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:10:00.510

试试这个没有`to_days`：

```
explain partitions select count(*) from requestlog where request_time = '2012-08-01'; 
```

编辑：

```
explain partitions 
        select count(*) 
        from requestlog 
        where request_time BETWEEN '2012-08-01 00:00:00' AND '2012-08-01 23:59:59'; 
```

# .net - 如何确定是否需要分派到 WinRT/Metro 中的 UI 线程？

> ID：11983929
> 
> 赞同：6
> 
> 时间：2012-08-16T09:08:18.627
> 
> 标签：.net, microsoft-metro, windows-runtime

在 .NET 中，您拥有`System.Threading.Thread.IsBackground`.

WinRT/Metro 中是否有类似的功能？

我有一个更改 UI 属性的方法，我想确定是否需要将执行分派到 UI 线程运行时。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T09:33:12.170

好吧，如果您在应用程序中使用**[MVVM Light Toolkit](http://mvvmlight.codeplex.com/)**，您可以使用**GalaSoft.MvvmLight.Threading.DispatcherHelper类的****CheckBeginInvokeOnUI(Action action)**方法自动处理这种情况。

 **```
GalaSoft.MvvmLight.Threading.DispatcherHelper.CheckBeginInvokeOnUI(() =>
{
    Gui.Property = SomeNewValue;
}); 
```

**编辑：**

以下代码基于**MVVM Light Toolkit的****DispatcherHelper**类-**[链接](http://mvvmlight.codeplex.com/SourceControl/changeset/view/4be0aa663f97#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Threading/DispatcherHelper.cs)**

 **但是，如果您不想使用 MVVM Light（*顺便说一句，这很酷*），您可以尝试这样的事情（抱歉，无法检查这是否有效，没有 Windows 8）：

```
var dispatcher = Window.Current.Dispatcher;

if (dispatcher.HasThreadAccess)
    UIUpdateMethod();
else dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => UIUpdateMethod();); 
```

将此逻辑放在单独的类中会更好，如下所示：

```
using System;
using Windows.UI.Core;
using Windows.UI.Xaml;

namespace MyProject.Threading
{
    public static class DispatcherHelper
    {
        public static CoreDispatcher UIDispatcher { get; private set; }

        public static void CheckBeginInvokeOnUI(Action action)
        {
            if (UIDispatcher.HasThreadAccess)
                action();
            else UIDispatcher.RunAsync(CoreDispatcherPriority.Normal,
                                       () => action());
        }

        static DispatcherHelper()
        {
            if (UIDispatcher != null)
                return;
            else UIDispatcher = Window.Current.Dispatcher;
        }
    }
} 
```

然后你可以像这样使用它：

```
DispatherHelper.CheckBeginInvokeOnUI(() => UIUpdateMethod()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T14:24:39.693

您可以通过 CoreApplication.Window 访问主 ui 线程，例如

```
 if (CoreApplication.MainView.CoreWindow.Dispatcher.HasThreadAccess)
            {
                DoStuff();
            }
            else
            {
                await CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
                {
                    DoStuff();
                });
            } 
```****

# android - Sencha Touch 应用部署到 iPhone 和 Android

> ID：11983931
> 
> 赞同：0
> 
> 时间：2012-08-16T09:08:30.947
> 
> 标签：android, ios, cordova, sencha-touch, extjs

在我们使用 sencha 构建了一个应用程序之后，我们如何将其打包以部署到 iPhone 和 Android 等物理设备上。我们可以**仅**在 Sencha 中执行此操作，还是**必须**使用 Phonegap 或 Appcelerator？在stackoverflow中有很多关于这个标题的文章，但很少有人说清楚。我不能只使用煎茶来完全构建一个应用程序吗？

非常感谢链接到任何文档。

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:17:47.860

您可以使用 sencha 的原生 android 和 iPhone 包装。下面我提供它的链接...

[http://docs.sencha.com/touch/2-0/#!/guide/native_android](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

[http://docs.sencha.com/touch/2-0/#!/guide/native_packaging](http://docs.sencha.com/touch/2-0/#!/guide/native_packaging)

# android - 如何在android中显示工具提示？

> ID：11983936
> 
> 赞同：29
> 
> 时间：2012-08-16T09:08:51.387
> 
> 标签：android

当我在视图上移动光标时，我想显示工具提示（快速操作视图）。谁能给我一个简单的例子吗？工具提示将仅包含文本值。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2017-11-14T13:04:46.060

可能使用`myView.setTooltipText(CharSequence)`（从 API 级别 26）或`TooltipCompat`（在 API 级别 26 之前）是一个附加选项：

```
TooltipCompat.setTooltipText(myView, context.getString(R.string.myString)); 
```

文档说：

> 用于模拟 API 级别 26 之前的 {@link View#setTooltipText(CharSequence)} 行为的帮助类。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-08-22T07:15:50.950

## 推荐使用 AndroidX。

> Android 4.0 (API 14) 及更高版本

AndroidX 支持库添加了对视图和菜单项的[工具提示（带有描述性文本的小弹出窗口）的支持。](https://developer.android.com/reference/androidx/appcompat/widget/TooltipCompat)

使用[setTooltipText](https://developer.android.com/reference/androidx/appcompat/widget/TooltipCompat)设置工具提示文本，该文本将显示在视图旁边的一个小弹出窗口中。

请参见以下示例：

```
FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
TooltipCompat.setTooltipText(fab, "Send an email"); 
```

将显示工具提示：

*   长按时，除非另有处理（通过 OnLongClickListener 或上下文菜单）。
*   悬停时，在指针停止移动后短暂延迟

要将 Appcompat 库添加到您的项目中，

1.  打开应用程序的 build.gradle 文件。

2.  将支持库添加到依赖项部分。

    ```
    dependencies {

    compile "androidx.appcompat:appcompat:1.1.0"
    } 
    ```

* * *

> Android 8.0（API 级别 26）及更高版本

如果您支持的最低版本是 Android 8.0（API 级别 26）或更高版本，您可以通过调用 setTooltipText() 方法在 View 中指定工具提示文本。您还可以使用相应的 XML 设置 tooltipText 属性。

要在 XML 文件中指定工具提示文本，请设置 android:tooltipText 属性，如下例所示：

```
<android.support.design.widget.FloatingActionButton
    android:id="@+id/fab"
    android:tooltipText="Send an email" /> 
```

要在代码中指定工具提示文本，请使用 setTooltipText(CharSequence) 方法，如以下示例所示：

```
FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
fab.setTooltipText("Send an email"); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-16T09:24:06.157

Android 仅从 Android 4.0 开始支持 ActionBar 按钮的“工具提示”。但正如 Jaguar 已经提到的，Android 中的工具提示没有多大意义，因为没有悬停的概念。

从 Android 4.0 开始，如果您长按按钮，则会出现正常的标题文本（您在 xml 文件中或通过代码设置）。但是如果屏幕上有足够的空间，它将在图标旁边的 ActionBar 中一直可见。

如果您想将其用于自定义视图，则需要通过将 a 添加到视图中来自己实现它，并在长按时[`LongClickListener`](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)显示 a ：[`Toast`](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

```
view.setOnLongClickListener(new OnLongClickListener() {
    public boolean onLongClick(View v) {
        Toast.makeText(v.getContext(), "My tool-tip text", Toast.LENGTH_SHORT).show();
        return true;
    }
} 
```

当然，您应该为字符串使用资源，而不是硬编码字符串。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-29T08:20:19.843

从 Android API 14+ 开始，有一个[悬停事件](https://developer.android.com/reference/android/view/View.OnHoverListener.html)。你可以做，

```
view.setOnHoverListener(...) 
```

并听`MotionEvent`诸如[`ACTION_HOVER_ENTER`](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_HOVER_ENTER)and之类的 s `ACTION_HOVER_EXIT`，而不是`onLongClick`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-02T13:23:35.453

根据[GregoryK 的回答](https://stackoverflow.com/a/39798024/1617737)，我创建了一个新的 ImageButton 类 - 请参见下面的代码。要使用它，您需要做的就是将`ImageButton`布局中的替换为`com.yourpackage.ImageButtonWithToolTip`并赋予它一个`android:contentDescription`属性（因为这是将在工具提示中显示的文本）。

```
package com.yourpackage;

import android.annotation.TargetApi;
import android.content.Context;
import android.graphics.Rect;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.View;
import android.widget.ImageButton;
import android.widget.Toast;

public class ImageButtonWithToolTip extends ImageButton {

    private static final int ESTIMATED_TOAST_HEIGHT_DIPS = 48;

    public ImageButtonWithToolTip(Context context) {
        super(context);
        init();
    }

    public ImageButtonWithToolTip(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public ImageButtonWithToolTip(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    @TargetApi(21)
    public ImageButtonWithToolTip(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        init();
    }

    private void init() {
        setOnLongClickListener(new View.OnLongClickListener() {
            @Override
            public boolean onLongClick(View view) {

                /**
                 * You should set the android:contentDescription attribute in this view's XML layout file.
                 */

                String contentDescription = getContentDescription().toString();

                if (TextUtils.isEmpty(contentDescription)) {

                    /**
                     * There's no content description, so do nothing.
                     */

                    return false; // Not consumed

                }
                else {

                    final int[] screenPos = new int[2]; // origin is device display
                    final Rect displayFrame = new Rect(); // includes decorations (e.g. status bar)
                    view.getLocationOnScreen(screenPos);
                    view.getWindowVisibleDisplayFrame(displayFrame);

                    final Context context = view.getContext();
                    final int viewWidth = view.getWidth();
                    final int viewHeight = view.getHeight();
                    final int viewCenterX = screenPos[0] + viewWidth / 2;
                    final int screenWidth = context.getResources().getDisplayMetrics().widthPixels;
                    final int estimatedToastHeight = (int) (ESTIMATED_TOAST_HEIGHT_DIPS
                            * context.getResources().getDisplayMetrics().density);

                    Toast toolTipToast = Toast.makeText(context, contentDescription, Toast.LENGTH_SHORT);
                    boolean showBelow = screenPos[1] < estimatedToastHeight;
                    if (showBelow) {
                        // Show below
                        // Offsets are after decorations (e.g. status bar) are factored in
                        toolTipToast.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL,
                                viewCenterX - screenWidth / 2,
                                screenPos[1] - displayFrame.top + viewHeight);
                    }
                    else {
                        // Show above
                        // Offsets are after decorations (e.g. status bar) are factored in
                        // NOTE: We can't use Gravity.BOTTOM because when the keyboard is up
                        // its height isn't factored in.
                        toolTipToast.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL,
                                viewCenterX - screenWidth / 2,
                                screenPos[1] - displayFrame.top - estimatedToastHeight);
                    }

                    toolTipToast.show();

                    return true; // Consumed

                }

            }

        });

    }

} 
```

您可以使用相同的方法来扩展其他视图 - 例如，`Button`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-16T09:12:46.070

Android 没有工具提示。它是一个基于触摸的 UI。当前的触摸传感器通常无法以工具提示有用的方式检测悬停。

在触摸屏中没有“悬停”的概念，但您可以为您的视图设置一个[LongClickListener](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)，并在长按后出现一个 Toast。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-30T18:37:32.297

如果您需要显示任何视图的工具提示，您可以使用[`CheatSheet`](https://gist.github.com/romannurik/3982005)Roman Nurik 的 util 类。（使用`Toast`和可选`content description`地显示工具提示。）

这是

> 用于在长按时显示仅图标 UI 元素的备忘单（工具提示）的 Android 助手类。这已经是仅图标操作栏项目和选项卡的默认平台行为。此类为任何其他此类 UI 元素提供此行为

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-02T15:00:21.617

```
package com.nbfc.tekis.tooltipexample;

import android.support.v7.app.AppCompatActivity; import
android.os.Bundle; import android.view.View; import
android.widget.Button; import android.widget.GridView;

import it.sephiroth.android.library.tooltip.Tooltip;

public class MainActivity extends AppCompatActivity {
    /*Button button1,button2,button3,button4;*/

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void bottomTooltip(View view) {
        Button button1=(Button)findViewById(R.id.button1);
        Tooltip.make(this,new Tooltip.Builder()
            .anchor(button1, Tooltip.Gravity.BOTTOM)
            .closePolicy(new Tooltip.ClosePolicy()
            .insidePolicy(true,false)
            .outsidePolicy(true,false),4000)
            .activateDelay(900)
            .showDelay(400)
            .text("Android tooltip bottom")
            .maxWidth(600)
            .withArrow(true)
            .withOverlay(true)
            .build())
            .show();
    }

    public void topTooltip(View view) {
        Button button3=(Button)findViewById(R.id.button3);
        Tooltip.make(this,new Tooltip.Builder()
            .anchor(button3, Tooltip.Gravity.TOP)
            .closePolicy(new Tooltip.ClosePolicy()
            .insidePolicy(true,false)
            .outsidePolicy(true,false),4000)
            .activateDelay(900)
            .showDelay(400)
            .text("Android tooltip top")
            .maxWidth(600)
            .withOverlay(true)
            .withArrow(true)
            .build())
            .show();
    }

    public void rightTooltip(View view) {
        Button button2=(Button)findViewById(R.id.button2);
        Tooltip.make(this,new Tooltip.Builder()
            .anchor(button2, Tooltip.Gravity.RIGHT)
            .closePolicy(new Tooltip.ClosePolicy()
            .insidePolicy(true,false)
            .outsidePolicy(true,false),4000)
            .activateDelay(900)
            .showDelay(400)
            .text("Android tooltip right")
            .maxWidth(600)
            .withArrow(true)
            .withOverlay(true)
            .build())
            .show();
    }

    public void leftTooltip(View view) {
        Button button4=(Button)findViewById(R.id.button4);
        Tooltip.make(this,new Tooltip.Builder()
            .anchor(button4, Tooltip.Gravity.LEFT)
            .closePolicy(new Tooltip.ClosePolicy()
            .insidePolicy(true,false)
            .outsidePolicy(true,false),4000)
            .text("Android tooltip left")
            .maxWidth(600)
            .withArrow(true)
            .withOverlay(true)
            .build())
            .show();
    } 
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-04T15:17:13.197

将此添加到您的按钮

```
android:tooltipText="Tooltip text goes here" 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-29T19:54:33.740

根据禁令的回答，我创建了这个方法。

它不对吐司大小做任何假设。只需根据视图相对于窗口的位置（即窗口中心的左/右/上方/下方）放置工具提示重力。吐司总是从视图的中心开始，并分别向右/左/下/上延伸。

[查看示例](https://i.stack.imgur.com/eA4n8.png)

```
private static void setToastGravity(View view, Toast toast) {
    final Rect viewRect = new Rect(); // view rect
    final Rect windowRect = new Rect(); // window rect
    view.getGlobalVisibleRect(viewRect);
    view.getWindowVisibleDisplayFrame(windowRect);

    int offsetX;
    int offsetY;
    int gravityX;
    int gravityY;

    if (viewRect.centerY() > windowRect.centerY()) {
        // above
        offsetY = windowRect.bottom - viewRect.centerY();
        gravityY = Gravity.BOTTOM;
    } else {
        // tooltip below the view
        offsetY = viewRect.centerY() - windowRect.top;
        gravityY = Gravity.TOP;
    }

    if (viewRect.centerX() > windowRect.centerX()) {
        // tooltip right of the view
        offsetX = windowRect.right - viewRect.centerX();
        gravityX = Gravity.END;
    } else {
        // tooltip left of the view
        offsetX = viewRect.centerX() - windowRect.left;
        gravityX = Gravity.START;
    }

    toast.setGravity(gravityX | gravityY, offsetX, offsetY);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-17T04:48:36.567

我很乐意帮助你

请先生试试这个-> [android-simple-tooltip](https://github.com/douglasjunior/android-simple-tooltip)

我希望这对你有用

示例：发布将其添加到存储库末尾的根 build.gradle 中：

```
allprojects {
    repositories {
        ...
        maven { url "https://jitpack.io" }
    }
} 
```

添加依赖

```
dependencies {
    implementation 'com.github.douglasjunior:android-simple-tooltip:0.2.3'
} 
```

将此代码添加到您的 MainActivity 类中，并为您的视图创建一个对象，该对象将与工具提示绑定

```
View yourView = findViewById(R.id.your_view);

    new SimpleTooltip.Builder(this)
        .anchorView(yourView)
        .text("Texto do Tooltip")
        .gravity(Gravity.END)
        .animated(true)
        .transparentOverlay(false)
        .build()
        .show(); 
```

[![在此处输入图像描述](../Images/7765b4881a00391f734420292daab56b.png)](https://i.stack.imgur.com/SnkWN.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-24T07:56:19.840

[https://github.com/skydoves/Balloon](https://github.com/skydoves/Balloon)

这个库提供了一个轻量级的弹出式工具提示，完全可定制的箭头和动画。100% Kotlin 和所有必要的文档。它也在积极管理中。

这是他们页面上的一些 gif；

[![e](../Images/f3cc0df14c14161b4ee2a3b52a704c5d.png)](https://i.stack.imgur.com/mdLor.gif)

其他，

[![e](../Images/539fdabc4116ad0a59d6e9288fdfc1c5.png)](https://i.stack.imgur.com/DX5Fr.gif)

# python - Python - 从多个线程附加到同一个文件

> ID：11983938
> 
> 赞同：33
> 
> 时间：2012-08-16T09:08:59.900
> 
> 标签：python, multithreading, python-multithreading

我正在编写一个应用程序，将行从多个线程附加到同一个文件。

我有一个问题，其中一些行被附加而没有新行。

有什么解决办法吗？

```
class PathThread(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def printfiles(self, p):
        for path, dirs, files in os.walk(p):
            for f in files:
                print(f, file=output)

    def run(self):
        while True:
            path = self.queue.get()
            self.printfiles(path)
            self.queue.task_done()

pathqueue = Queue.Queue()
paths = getThisFromSomeWhere()

output = codecs.open('file', 'a')

# spawn threads
for i in range(0, 5):
    t = PathThread(pathqueue)
    t.setDaemon(True)
    t.start()

# add paths to queue
for path in paths:
    pathqueue.put(path)

# wait for queue to get empty
pathqueue.join() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-16T09:57:49.077

解决方案是仅在一个线程中写入文件。

```
import Queue  # or queue in Python 3
import threading

class PrintThread(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def printfiles(self, p):
        for path, dirs, files in os.walk(p):
            for f in files:
                print(f, file=output)

    def run(self):
        while True:
            result = self.queue.get()
            self.printfiles(result)
            self.queue.task_done()

class ProcessThread(threading.Thread):
    def __init__(self, in_queue, out_queue):
        threading.Thread.__init__(self)
        self.in_queue = in_queue
        self.out_queue = out_queue

    def run(self):
        while True:
            path = self.in_queue.get()
            result = self.process(path)
            self.out_queue.put(result)
            self.in_queue.task_done()

    def process(self, path):
        # Do the processing job here

pathqueue = Queue.Queue()
resultqueue = Queue.Queue()
paths = getThisFromSomeWhere()

output = codecs.open('file', 'a')

# spawn threads to process
for i in range(0, 5):
    t = ProcessThread(pathqueue, resultqueue)
    t.setDaemon(True)
    t.start()

# spawn threads to print
t = PrintThread(resultqueue)
t.setDaemon(True)
t.start()

# add paths to queue
for path in paths:
    pathqueue.put(path)

# wait for queue to get empty
pathqueue.join()
resultqueue.join() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-23T02:03:47.183

您永远不会在同一行上看到混乱的文本或在一行中间看到新行这一事实表明您实际上不需要同步附加到文件。问题是您使用 print 写入单个文件句柄。我怀疑`print`实际上是在一次调用中对文件句柄执行 2 次操作，并且这些操作在线程之间竞速。基本上`print`是在做类似的事情：

```
file_handle.write('whatever_text_you_pass_it')
file_handle.write(os.linesep) 
```

并且因为不同的线程同时在同一个文件句柄上执行此操作，有时一个线程将进入第一次写入，然后另一个线程将进入其第一次写入，然后您将连续获得两个回车。或者实际上是这些的任何排列。

解决这个问题的最简单方法是停止使用`print`并直接使用`write`。尝试这样的事情：

```
output.write(f + os.linesep) 
```

这对我来说仍然很危险。我不确定所有使用相同文件句柄对象并争夺其内部缓冲区的线程可以期待什么保证。个人 id 旁观整个问题，只是让每个线程都有自己的文件句柄。另请注意，这是有效的，因为写入缓冲区刷新的默认设置是行缓冲的，因此当它对文件进行刷新时，它以`os.linesep`. 强制它使用行缓冲发送 a`1`作为`open`. 你可以像这样测试它：

```
#!/usr/bin/env python
import os
import sys
import threading

def hello(file_name, message, count):
  with open(file_name, 'a', 1) as f:
    for i in range(0, count):
      f.write(message + os.linesep)

if __name__ == '__main__':
  #start a file
  with open('some.txt', 'w') as f:
    f.write('this is the beginning' + os.linesep)
  #make 10 threads write a million lines to the same file at the same time
  threads = []
  for i in range(0, 10):
    threads.append(threading.Thread(target=hello, args=('some.txt', 'hey im thread %d' % i, 1000000)))
    threads[-1].start()
  for t in threads:
    t.join()
  #check what the heck the file had
  uniq_lines = set()
  with open('some.txt', 'r') as f:
    for l in f:
      uniq_lines.add(l)
  for u in uniq_lines:
    sys.stdout.write(u) 
```

输出如下所示：

```
hey im thread 6
hey im thread 7
hey im thread 9
hey im thread 8
hey im thread 3
this is the beginning
hey im thread 5
hey im thread 4
hey im thread 1
hey im thread 0
hey im thread 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T09:16:34.773

也许还有一些不应该出现的换行符？

您应该牢记这样一个事实，即一次不应由多个线程访问共享资源，否则可能会发生不可预知的后果（在使用线程时称为“原子操作”）。

看看这个页面以获得一点直觉：[Python中的线程同步机制](https://docs.python.org/3/library/asyncio-sync.html)

# php - 从 cron 运行 PHP 任务：将提交哪个 IP？

> ID：11983940
> 
> 赞同：0
> 
> 时间：2012-08-16T09:09:05.063
> 
> 标签：php, cron, ip

我有一个 PHP 脚本，它从我的服务器上的 cron 调用，并将运动结果发送到我的 Twitter 帐户。

Twitter 将为此访问保存哪个 IP 地址？以及其他服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:10:55.483

运行 cronjob 的服务器的 IP 地址。

# jquery - event.toElement 对象的 jQuery 子代

> ID：11983944
> 
> 赞同：1
> 
> 时间：2012-08-16T09:09:18.057
> 
> 标签：jquery, selector, draggable, helper, children

我在 jQuery 中有一个带有“helper：'clone'”的可拖动对象。我已经使用 $(event.toElement) 创建选择器来操作该可拖动对象。我希望能够选择该对象的子对象，但使用 .children() 不会返回任何子对象。我希望能够将*tinymce*函数附加到拖动对象的 textrea，而不是 div。

我的可拖动对象是：

```
<div class="text" style="padding: 10px"><textarea></textarea></div> 
```

我的 jQuery 代码是：

```
.draggable({helper: "clone", revert: "invalid", stop: function(event, ui){          
    $(event.toElement).children().tinymce({script_url : 'tiny_mce/tiny_mce.js'}); 
```

如何从可拖动对象中获取 textarea 的实例？

非常感谢

# javascript - 修改 John Resig 的微模板引擎以替换“new Fun”或“eval”

> ID：11983947
> 
> 赞同：2
> 
> 时间：2012-08-16T09:09:31.037
> 
> 标签：javascript, jquery, templates, jquery-templates

如何修改[John Resig 的微模板](http://ejohn.org/blog/javascript-micro-templating/)引擎，使其不应该使用`new Func or eval`. 我想要相同的行为，但没有`new Func`：

```
/ Simple JavaScript Templating
// John Resig - http://ejohn.org/ - MIT Licensed
(function () {
    var cache = {};

    this.tmpl = function tmpl(str, data) {
        // Figure out if we're getting a template, or if we need to
        // load the template - and be sure to cache the result.
        var fn = !/\W/.test(str) ?
      cache[str] = cache[str] ||
        tmpl(document.getElementById(str).innerHTML) :

        // Generate a reusable function that will serve as a template
        // generator (and which will be cached).
      new Function("obj",
        "var p=[],print=function(){p.push.apply(p,arguments);};" +

        // Introduce the data as local variables using with(){}
        "with(obj){p.push('" +

        // Convert the template into pure JavaScript
        str
          .replace(/[\r\t\n]/g, " ")
          .split("<%").join("\t")
          .replace(/((^|%>)[^\t]*)'/g, "$1\r")
          .replace(/\t=(.*?)%>/g, "',$1,'")
          .split("\t").join("');")
          .split("%>").join("p.push('")
          .split("\r").join("\\'")
      + "');}return p.join('');");

        // Provide some basic currying to the user
        return data ? fn(data) : fn;
    };
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:39:27.640

我没有看到一个简单的解决方案。您确实需要评估从“str ...”中出来的字符串才能使其正常工作。所以是的，它变成了 eval 或 Function 或任何类似的东西。

如果您不想这样做，您需要放弃 John 的想法，即您将模板解析为 JS 字符串，然后对其进行评估...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:02:27.260

出于明显的性能原因，许多模板引擎将模板编译为使用数据作为参数的函数，并使用生成的 JS 代码对其进行处理，而不是在每个输出上运行昂贵的模板解析并实现自己的表达式引擎。通常，摆脱编译的唯一方法是完全重写引擎或使用另一个引擎，所以不，不可能只是“修改”它。

但是，由于您需要它使其在 Chrome 中运行，您可以转换您自己的代码以使用[较低权限的沙箱，该沙箱专门设计用于运行`eval`类似](https://developer.chrome.com/trunk/extensions/sandboxingEval.html).

# sql - 将双引号替换为单引号是 SQLITE

> ID：11983950
> 
> 赞同：0
> 
> 时间：2012-08-16T09:09:38.663
> 
> 标签：sql, database, sqlite

如何用单引号替换双引号：

我试过了：

```
UPDATE table SET COLUMN=REPLACE(COLUMN,'''',''') 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:26:23.667

试试这个：

```
UPDATE table SET COLUMN=REPLACE(COLUMN,'''''','''') 
```

### 看到[这个 SQLFiddle](http://sqlfiddle.com/#!7/798f2/5)

我们必须转义单引号。如果你想写`'`，你必须写`''`。有关更多信息，[请参阅此。](http://www.sqlite.org/faq.html#q14)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:12:51.560

您需要转义报价。尝试

```
UPDATE your_table SET col = REPLACE(col, '''''' ,'''') 
```

# ruby-on-rails - 在 Rails 中使用变量方法名

> ID：11983952
> 
> 赞同：0
> 
> 时间：2012-08-16T09:09:40.613
> 
> 标签：ruby-on-rails, methods, naming-conventions

我想干掉我的方法。除了末尾的变量外，我有几个（旧）方法具有相同的名称。这些方法都做同样的事情。这些方法名称用于公开分发的 URL，因此重命名它们不是一种选择。我正在寻找一种使用灵活方法名称或根据方法名称的开头捕获所有方法的方法。我阅读了有关在其中调用带有变量的方法名称的文章，但这不是我在这里寻找的（我认为）。我想做类似的事情

```
def holiday_"#{var}"
 code
end 
```

有什么建议么？

问候，

罗格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:18:08.243

我认为您正在寻找的是`method_missing`- 以[这些](http://www.alfajango.com/blog/method_missing-a-rubyists-beautiful-mistress/) [文章](http://www.thirdbit.net/articles/2007/08/01/10-things-you-should-know-about-method_missing/)为例。

# iphone - 用户点击空格时 UITextField 突出显示文本

> ID：11983953
> 
> 赞同：1
> 
> 时间：2012-08-16T09:09:45.443
> 
> 标签：iphone, ios, uitextfield, uitextfielddelegate

我有一个`UITextField`让用户像在stackoverflow中一样编写标签的方法。我真正想要的正是stackoverflow所做的，略有不同的是检测用户在键盘上的触摸空格按钮。好吧，stackoverflow立即搜索并显示结果。相反，我希望用户点击空格按钮。你们有什么想法，任何我可以从中受益的教程吗？我确定我将使用 UITextFieldDelegate 方法

`-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`

但我不知道如何在用户开始点击另一个词之前突出显示这些词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:31:10.973

要突出显示文本，您将不得不使用`NSAttributestring`并且为此您将使用`UITextView`支持`NSAttributestring`。

参考支持 NSAttributestring 的[EGOTextView链接](https://github.com/enormego/EGOTextView/)

这样做可以像这样检测空间`UITextField`：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
     NSString *lastCharacter = [string substringWithRange:NSMakeRange([string length]-1, 1)];
     if([lastCharacter isEqualToString:@" "])
     {
         //space button pressed
     }
     else
     { 
         // continue
     }
} 
```

# windows - 如何从命令行停止/启动 AVG 防病毒保护

> ID：11983955
> 
> 赞同：0
> 
> 时间：2012-08-16T09:09:52.970
> 
> 标签：windows, batch-file, command-line, antivirus

我正在编写一个需要停止然后在中间启动 AVG 防病毒保护的批处理脚本。有没有办法只使用命令行来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:39:11.253

好的 - 我想你想要看起来像这样的东西。它不是防弹的，但它应该让你开始。

```
Set myshell = WScript.CreateObject("WScript.Shell")
Dim cmd

REM Do your pre-AVG-stop commands here

REM Now stop AVG using the 'taskkill' command.  Note that this command assumes 
REM that the name of the process is "avgscanx".  You should verify that is true.
REM You also may need to play around with the parameters for 'taskkill'.  Run
REM 'taskkilll /?' in a cmd window to see the various options.  You may also want
REM to add some code to verify that taskkill was successful.

taskkill /IM "avgscanx"

REM Do your post-AVG-stop commands here.

REM Now, let's restart AVG.
REM Modify the command line below for your specific use of AVG.
REM And, again, you may want to add some code to verify that AVG started.

cmd = """avgscanx"" /parameter1 /parameter2 /etc"
myshell.Run(cmd,0,true) 
```

最后一点。您可能需要考虑切换到 PowerShell，因为它比批处理功能更强大、更灵活。

# windows-phone-7 - ExpanderView，在 Expanded 事件上延迟加载项目

> ID：11983956
> 
> 赞同：0
> 
> 时间：2012-08-16T09:09:54.487
> 
> 标签：windows-phone-7, silverlight-toolkit, expander

我有兴趣使用具有以下行为的 ExpanderView 控件：

*   我知道在填充标题时是否应该有可扩展的项目，但我不知道有多少并且不想添加项目，直到点击标题以展开它（例如，因为需要使用网络请求）。
*   我最终会将 ExpanderControls 作为列表中的项目，但我首先使用的是最简单的场景。

似乎这将是一个常见的场景，以延迟加载可扩展项目。

所以我在 Expanded 事件中实现了简单的代码来加载尚未加载的项目：

```
if (!expanded)
{
    for (var x = 1; x <= 10; x++)
    {
        ((ExpanderView)sender).Items.Add(new TextBlock() { Text = "Added this on expanded " + x.ToString() });
    }

    expanded = true;
} 
```

这样做的问题是第一次没有正确呈现项目（控件下方的任何内容都没有“下推”以允许项目空间），大概是因为控件事先不知道项目内容。在随后的扩展中，项目将正确显示。

任何人都知道如何使用 ExpanderView 实现这种延迟加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T18:07:38.967

添加项目后，尝试在您的扩展视图上执行 UpdateLayout()。如果您在 Expanded 侦听器中进行扩展，您可以执行以下操作。

```
private void expander_Expanded(object sender, System.Windows.RoutedEventArgs e)
{
     // add item here
     ((ExpanderView) sender).UpdateLayout()
} 
```

# android - 如何在没有编译器警告的情况下在 Android 中对代码进行版本控制？

> ID：11983959
> 
> 赞同：13
> 
> 时间：2012-08-16T09:10:09.210
> 
> 标签：android

谷歌的文档说使用这种代码来确保新代码不会在旧平台上执行：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
} 
```

但是当我这样做时，Eclipse 仍然给我警告：“调用需要 API 级别 11（当前最小值为 7）”。我想要的是将我的最低版本设置为低于 Honeycomb 的值，让上述条件语句保护我免于在旧设备上运行新代码，并且*没有*编译器警告。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T09:11:21.467

在方法之前添加`@TargetApi(11)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:31:59.420

`@TargetApi()`似乎是最好的方法，查找此[页面](http://tools.android.com/recent/lintapicheck)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T07:18:47.450

Java 注释只能应用于[声明](http://en.wikipedia.org/wiki/Declaration_%28computer_programming%29)，而不能应用于[语句](http://en.wikipedia.org/wiki/Statement_%28computer_science%29)。[lint 文档](http://tools.android.com/recent/lintapicheck)中的示例通过`if`以变量声明开始块来作弊。

# delphi - Delphi：为什么抱怨缺少方法实现？

> ID：11983968
> 
> 赞同：7
> 
> 时间：2012-08-16T09:10:50.147
> 
> 标签：delphi, generics, interface, delphi-xe2

我想使用`IEnumerator<T>`而不是`IEnumerator`我正在构建的列表。我试过以下

```
IMyList = interface(IEnumerator<TElement>)
  procedure Add(Element: TElement);
end;

TMyList = class(TInterfacedObject, IMyList )
private
  function GetCurrent: TElement;
  function MoveNext: Boolean;
  procedure Reset;
public
  property Current: TElement read GetCurrent;
  procedure Add(Element: TElement);
end; 
```

但令我惊讶的是，有人告诉我这`TMyList`没有实现`GetCurrent`。为什么编译器告诉我`GetCurrent`它显然不是缺失的？（记录在案，`GetCurrent`已实现，为简洁起见，此处略去。）谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T10:07:06.883

`IEnumerator<T>`继承自`IEnumerator`接口。两者都有`GetCurrent()`方法，一是常用方法，二是泛型`T`方法；

所以在你的课堂上你必须同时实现它们`getCurrent():TObject`（from `IEnumerator`）和`getCurrent():T`（from `IEnumerator<T>`）；

一个小问题是两种方法都有相同的参数，你不能简单地声明它们。所以你应该使用别名：

```
 function getCurrentItem() : TElement; //actual method for IEnumerator<T>
  function GetCurrent():TObject;  //method for IEnumerator
  function IMyList.GetCurrent = getCurrentItem; //alias 
```

查看docwiki [http://docwiki.embarcadero.com/RADStudio/en/Implementing_Interfaces上的](http://docwiki.embarcadero.com/RADStudio/en/Implementing_Interfaces)**Method Resolution Clause**

因此，在您的情况下，代码应如下所示（我将所有方法标记为摘要）：

```
TElement = class(TObject)
end;

IMyList = interface(IEnumerator<TElement>)
  procedure Add(Element: TElement);
end;

TMyList = class(TInterfacedObject, IMyList )
private
  function getCurrentItem() : TElement; virtual; abstract;

  function IMyList.GetCurrent = getCurrentItem;
  function GetCurrent():TObject;  virtual; abstract;

  function MoveNext(): Boolean;   virtual; abstract;
  procedure Reset(); virtual; abstract;
public
  property Current: TElement read GetCurrentItem;
  procedure Add(Element: TElement); virtual; abstract;
end; 
```

# php - 如何在 Eclipse 中使用 JS 或 HTML 编辑器打开 PHP 文件

> ID：11983973
> 
> 赞同：1
> 
> 时间：2012-08-16T09:10:53.910
> 
> 标签：php, eclipse, interface, ide

我通常用它的默认编辑器打开一个文件。因此 .php 文件在默认的 PHP 编辑器中打开，并被视为 PHP 文件。

但是，我的 PHP 文件中的代码通常包含很多 JS 或 HTML。在这些情况下，最好使用 JS 或 HTML 编辑器打开此类 PHP 文件。现在，这很痛苦，因为我必须单击`Open With -> Other`然后选择 JS 或 HTML 编辑器。

有没有办法将 JS 或 HTML 编辑器作为选项添加到`Open With`菜单中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:13:13.417

尝试将 PHP 文件类型添加到内容类型。进入 Eclipse 首选项`General > Content Types`

![在此处输入图像描述](../Images/aed9111360683020b6d8701b5293c168.png)

1.  `JavaScript Source File`在内容类型中选择，然后，

2.  在`File associations`单击`Add`并添加`*.php`如下：

![在此处输入图像描述](../Images/cba7e147ad97c6aa4ce49a335a661dd7.png)

然后在 php 文件的打开方式菜单中，JS 编辑器应该开始显示如下：

![在此处输入图像描述](../Images/a4f681fbf235d6a88d7ff9fa70c5d3f8.png)

# c# - c#错误将word文档复制到文本框

> ID：11983976
> 
> 赞同：0
> 
> 时间：2012-08-16T09:11:01.600
> 
> 标签：c#, asp.net, exception, ms-word

我想将 Word 文档复制到 c# Web 应用程序中的文本框中。我添加了 Microsoft Word 10.0 对象库。但我遇到了一个例外。

错误：服务器抛出异常。（来自 HRESULT 的异常：0x80010105 (RPC_E_SERVERFAULT)）

```
Microsoft.Office.Interop.Word.ApplicationClass wordApp = new ApplicationClass();
object file = filePath;
object nullobj = System.Reflection.Missing.Value;
Microsoft.Office.Interop.Word.Document doc = wordApp.Documents.Open(
            ref file, ref nullobj, ref nullobj, ref nullobj,
            ref nullobj, ref nullobj, ref nullobj, ref nullobj,
            ref nullobj, ref nullobj, ref nullobj, ref nullobj,
            ref nullobj, ref nullobj, ref nullobj, ref nullobj);

doc.ActiveWindow.Selection.WholeStory();
doc.ActiveWindow.Selection.Copy();
TextBox1.Text = doc.Content.Text;
doc.Close(ref nullobj, ref nullobj, ref nullobj);
wordApp.Quit(ref nullobj, ref nullobj, ref nullobj); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:06:34.817

您应该使用`[`Microsoft.Office.Interop.Word.Application`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.application.aspx)而不是[`ApplicationClass`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationclass.aspx)`（记录为“保留供内部使用”）：有关原因的详细信息，请参阅[http://blogs.msdn.com/b/ptorr/archive/2004/02/05/67872.aspx](http://blogs.msdn.com/b/ptorr/archive/2004/02/05/67872.aspx)。

# tridion - 如何为禁用文本框中更改的文本连接 Tridion GUI 扩展事件？

> ID：11983977
> 
> 赞同：2
> 
> 时间：2012-08-16T09:11:04.470
> 
> 标签：tridion, tridion-2011

我正在链接弹出窗口上实现 Tridion 2011 (GA) GUI 扩展（当您单击富文本区域中的超链接按钮以使您能够选择要链接到的组件或 url/mailto 等时打开的那个。 ）。

我想在此弹出窗口中选择或更新组件的位置，以便我可以根据所选组件的架构加载一些数据。问题是包含组件 uri 的 html 输入字段被禁用（因为该值只能由选择器更改），我认为这会阻止更改事件触发。

在我的扩展 js 中，我有以下内容，但是当我选择/更新组件时不会调用该函数，仅当我更改 http/mailto 链接时

```
$evt.addEventHandler($("#FieldUrl"), "change", onFieldUrlChanged);

function onFieldUrlChanged()
{
    alert("url changed to: " + $("#FieldUrl").value);
} 
```

是否有其他活动可行？否则，有什么方法可以挂钩正在关闭的浏览弹出窗口？

**更新**

按照弗兰克的建议，我试图在“选择项目”弹出窗口中加入事件。我现在为浏览按钮添加了一个事件处理程序`click`，它又为弹出窗口添加了事件处理程序。我希望使用`insert`or `unload`，但是相当烦人的是，唯一似乎触发的是`close`（仅当您不选择链接组件时才会发生，所以对我没有多大用处）。我的JS代码如下：

```
$evt.addEventHandler($("#BtnBrowse"), "click", onBtnBrowseClicked);
function onBtnBrowseClicked = function (event)
{
    var popup = $display.getView().properties.ItemPopup;
    $evt.addEventHandler(popup, "load", function () { alert('loaded'); });
    $evt.addEventHandler(popup, "insert", function () { alert('insert'); });
    $evt.addEventHandler(popup, "close", function () { alert('close'); });
    $evt.addEventHandler(popup, "unload", function () { alert('unload'); });
} 
```

使用控制台，我确实设法将一个`click`事件挂钩到弹出窗口中的实际插入按钮中，如下所示：

```
$evt.addEventHandler($display.getView().properties.ItemPopup.properties.view.properties.controls.insertButton, "click", function () { alert('stone the crows'); }); 
```

但是，如果我在我的浏览单击事件处理程序中添加它，它会出错为`$display.getView().properties.ItemPopup.properties.view`null，可能是因为弹出窗口尚未完全加载（如所示，加载事件不起作用，所以我不知道如何等待它加载！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:26:56.247

您可能需要收听`submit`每个弹出窗口触发的事件，而不是`change`您现在正在收听的事件。

该`change`事件是一个标准的 HTML 事件，因此受制于随之而来的所有常规规则（例如它显然不会为禁用的控件触发）。

`submit`另一方面，该事件是自定义 Tridion 事件。尽管不幸的是这意味着它的文档较少，但它确实具有巨大的优势，我们可以简单地阅读 JavaScript 代码来查看它何时/如何触发以及如何挂钩它。

我会看看我是否可以为你写一个小例子，但同时看看来自 Nuno 的这个问题（和答案）：[Anguilla - Updating a field's value from a popup?](https://stackoverflow.com/questions/11208259/anguilla-updating-a-fields-value-from-a-popup) .

如果您想响应超链接弹出窗口本身中的组件选择，请查看内部`Link.js`，您会看到它为`insert`项目选择弹出窗口的事件注册了自己。

```
$evt.addEventHandler(p.ItemPopup, "insert",
                     function Link$_onBrowseClicked$onPopupSubmitted(event) 
```

对于那些跟踪的人，到那时你有这个弹出链：

```
> Dashboard > Edit Component > Insert Hyperlink > Select Item 
```

**更新**

`insert`我看到你正在按照我的建议走向钩子。当我尝试这样做时，我也无法`insert`从超链接弹出窗口中捕获事件。

但是，如果我从 Item Select Popup 本身中注册处理程序**，**它**会**触发：

```
$evt.addEventHandler($display.getView(), "insert", 
                     function() { alert('event fired in item selector'); }); 
```

如果这确实是挂钩它的唯一方法（我会进一步看，但不知道我会找到什么），那么您应该简单地将脚本文件加载到所有弹出窗口中，并在视图完全加载后注册处理程序：

```
$evt.addEventHandler($display, "start", function () {
    $evt.removeEventHandler($display, "start", onDisplayStarted);

    if ($display.getView().getId() == "ItemSelectDialogView") {
        // we're in an Item select popup -> listen for the insert event
        $evt.addEventHandler($display.getView(), "insert", onItemInserted);
    }
}

function onItemInserted(e) {
    $evt.removeEventHandler($display.getView(), "insert", onItemInserted);
    var items = e.data.items;
    ... 
```

如您所见，我们在注册事件处理程序之前监听`start`事件`$display`以确保视图已正确加载。`insert`不要忘记删除此类事件处理程序，否则您以后会遇到重新进入的问题。

# javascript - 检查具有相同类名的多个元素的值

> ID：11983978
> 
> 赞同：1
> 
> 时间：2012-08-16T09:11:05.247
> 
> 标签：javascript, jquery, asp.net

我有 7 个下拉菜单，类名 =“dd”。我有 7 个类名 =“tt”的文本框。每个文本框对应于每个下拉菜单。现在，我必须检查

```
if(dropdown value is equal to 1)
    text box can not be empty. 
```

所以要做到这一点，我正在做的事情：

```
function checkOpenHours() {
        if ($('.dd').val() == 1 && $('.tt').val() == "") {

                alert("Please select an opening hour.");
                return false;

        }
    } 
```

我正在调用这个函数

```
<asp:Button ID="btnSave" runat="server" Text="Update hour" Height="35px" 
        onclick="btnSave_Click" OnClientClick="return checkOpenHours()"/> 
```

但问题是，这只适用于第一个下拉列表和文本框。它不适用于其他 6 个下拉列表和文本框 ..!!

我究竟做错了什么？？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:14:43.720

该`.val()`方法从 jQuery 对象中的第一个元素返回值。

你可以这样做：

```
function checkOpenHours() {
    var $dd = $('.dd'),
        $tt = $('.tt'),
        i;

    for (i = 0; i < $dd.length; i++) {
        if ($dd.eq(i).val() == 1 && $tt.eq(i).val() == "") {
            alert("Please select an opening hour.");
            return false;
        }
    }
} 
```

我在那里所做的首先将`$('.dd')`and的结果`$('.tt')`放入变量中，因为尽管在循环中使用`$('.dd')`and`$('.tt')`会起作用，但它会效率低下，因为它会在每次迭代时重新创建它们（完成 DOM 访问）。然后我使用该[`.eq()`方法](http://api.jquery.com/eq/)获取当前`i`索引处的元素。

我使用的是标准`for`而不是 jQuery `.each()`，因为它可以很容易地从外部函数返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:17:28.143

`val()`只返回 jQuery 集合中第一个元素的值。

您可能应该使用`.each()`它。

就像是

```
var allOkay = true;
$('.dd').each(function(id, item) {
    var $dropDown = $(item);
    var $textbox = $dropDown.siblings('.tt') // You'll need to change this according to your HTML!

    if ($dropDown.val() == 1 && $textbox.val() == '') {
        allOkay = false;
    }
});
if (!allOkay) {
    alert("Ze opening hourz! You did not enter zem!")
} 
```

# python - Python - 打包不同数量的字符串

> ID：11983979
> 
> 赞同：-2
> 
> 时间：2012-08-16T09:11:08.290
> 
> 标签：python, dictionary

我正在尝试创建一个工作字典，它可以工作，但我有问题。我必须打包很多数据，但问题是我的字符串数量可变。我想打包每一步，我正在使用

```
struct.pack(polozka.param, polozka.text, 0, polozka.pointer, polozka.size) 
```

其中`polozka.param`是参数， `.text`是英文单词， `0`是偏移量，`.pointer`是指向语言中单词的翻译，并且`.size`是所需的大小。

到目前为止，我还没有想出任何其他想法，如果我能找到每一个建议，我将不胜感激:)

如果我开始我的字典，例如我有结果

```
Active
 -translated word
Active
 -translated word 
```

但想拥有

```
Active
 -translated word, translated word,etc. 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:26:04.560

`.`如果您有使用的字典，则不能使用属性 () 访问字典的键`dictionary['key']`。

并且不确定我是否正确理解了您的问题，但我假设您正在寻找的是这样的数据结构：

```
my_dict = {
    'Active': ['translated word', 'translated word'],
    'foo': []
} 
```

这是字典的键，一个字符串，值是相应的列表，其中包含您翻译的单词（也是字符串）。

另外，如果你能提供一些代码，我会很好。

# ruby-on-rails-3 - 自定义 sphinx 索引以搜索嵌套属性

> ID：11983981
> 
> 赞同：0
> 
> 时间：2012-08-16T09:11:14.727
> 
> 标签：ruby-on-rails-3, sphinx, thinking-sphinx

狮身人面像有没有办法以自定义方式定义索引。问题 - 我有一个产品模型，系统中存在多个管理员。每个管理员都可以对每个产品做自己的笔记。因此 notes 不是一个简单的文本字段。相反，它是一个单独的模型。产品以及管理员 has_many 注释。当管理员搜索产品列表时，我想确保他只能通过他的笔记进行搜索。

我了解狮身人面像索引存储在文档中（狮身人面像内部）。例如，产品“dell xps”的所有索引都将在一个文档中。这意味着所有的笔记都将在同一个文档中。如果只有我有办法将每个产品的 admin_id 和注释存储到单独的 sphinx 文档中，我就可以实现仅搜索注释的要求。也就是说，如果有 3 个人对此进行了注释，则戴尔产品的索引将跨越 3 个文档。仅供参考，弹性搜索中存在类似的功能。任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:58:01.873

发现在思考狮身人面像中没有利用此功能。伤心

# java - Java + Oracle：如何在数据库中查询一组值

> ID：11983987
> 
> 赞同：0
> 
> 时间：2012-08-16T09:11:23.077
> 
> 标签：java, oracle, spring, jdbc, oracle11g

我想做以下事情

```
private List<Number> getIds(List<String> names) {
    String query = "SELECT id FROM months WHERE name IN (?)";
            ...
    } 
```

我怎样才能将我的传递`List<String> names`给'？在上面的查询中？我正在寻找一个动态解决方案，因为给定列表的大小会有所不同。

我将 Spring 3.0 与 Oracle 11.2.0.2 一起使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:40:20.197

为什么不使用返回集合的数据库函数并使用 Java 从 Java 调用该函数`CallableStatement`？

通过这样做，您可以消除将多个值传递给`IN`条件的问题。

问候

# iphone - xcode中正在开发的应用程序无法在没有互联网的设备上运行

> ID：11983992
> 
> 赞同：0
> 
> 时间：2012-08-16T09:11:54.750
> 
> 标签：iphone, xcode, wifi

因为这是我的第一个应用程序，所以我不知道这是否是苹果应该做的，但是当在设备上传输应用程序然后断开连接设备的 USB 并重新启动应用程序时，它不会运行，除非设备是连接到wifi ..这是一个问题还是它应该是这样的？当应用程序在应用商店启动时，这会影响应用程序吗？提前谢谢你.. PS。该应用程序不需要wifi连接即可工作，但它具有一些需要它的功能，例如地图和推送通知..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:51:45.807

对于推送通知，您必须使用 Web 服务将您的设备令牌发送到服务器。请使用可达性类为 Web 服务调用添加网络检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:21:06.837

嗯，如果您使用地图...您需要互联网连接、wifi 或电话连接，并且您应该在使用之前通过代码测试是否已连接，但您的应用程序应该可以在其他控制器中运行...

无论如何，尝试找出在 yourApp-info.plist 文件中是否有设置：

“应用程序使用 Wi-Fi”

如果是这样，请尝试将其删除

# android - 移动验证：java.util.regex.PatternSyntaxException：索引 2 附近的语法错误 U_REGEX_RULE_SYNTAX：

> ID：11983998
> 
> 赞同：1
> 
> 时间：2012-08-16T09:12:09.690
> 
> 标签：android, regex

在这里，我想要验证以 . 开头`+91`和之后的手机号码`10 digit number`。我将添加`+91 pincode`到edittext中，例如：

`edtmobile.append("+91(-)");`所以当显示edittext（UI）时已经有`+91`并且在编辑10位数字之后

我正在使用 Reg Ex 之类的：

`String regExPhone = "(+91(-)?|91(-)?|0(-)?)?[0-9]{10}";`

但得到如下错误：

```
E/AndroidRuntime( 1411): java.util.regex.PatternSyntaxException: Syntax error U_REGEX_RULE_SYNTAX near index 2:
E/AndroidRuntime( 1411): (+91(-)?|91(-)?|0(-)?)?[0-9]{10}
E/AndroidRuntime( 1411):   ^ 
```

请让我知道我在哪里做错了，还有另一种解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:15:21.613

`+`是正则表达式中的特殊字符，需要转义

尝试

```
String regExPhone = "(\+91(-)?|91(-)?|0(-)?)?[0-9]{10}"; 
```

您也不需要对单个字符进行分组以使它们成为可选的，所以

```
String regExPhone = "(\+91-?|91-?|0-?)?[0-9]{10}"; 
```

会是一样的。

# git - gerrit setup git repo -- 权限被拒绝

> ID：11983999
> 
> 赞同：5
> 
> 时间：2012-08-16T09:12:20.880
> 
> 标签：git, gerrit, public-key

我是 gerrit 的新手，我现在正在尝试设置 gerrit 一个 git 项目。我现在正在寻找解决权限被拒绝问题的帮助，感谢任何帮助，在此先感谢。

我正在使用gerrit + http + mysql，我现在遇到以下问题：

1.  当我检查我的数据库时，我无法从我的数据库中的“system_config”中找到“login_type”和“login_http_head”，描述为[http://gerrit.googlecode.com/svn-history/r243/documentation/2.0/config- sso.html](http://gerrit.googlecode.com/svn-history/r243/documentation/2.0/config-sso.html)

2.  当我单击 admin->projects 时，提示说“缺少项目所有项目”

3.  当我从数据库中检查我的帐户时，有两个空用户（我认为是因为我没有在 UIweb 页面中设置它们）

4.  我无法从 UIweb 页面注册新帐户，也无法使用命令行创建新用户。

以下是我的 ssh-key 和注册步骤：

1.  我用过`ssh-keygen -t rsa -b 2048` （Searchign from internet，我不知道2048是什么意思）

2.  我`git config`用来配置昵称和邮箱，我`ssh-key`是通过UIweb页面注册的。

3.  使用`ssh -p 29418 admin@localhost gerrit create-project --name example.git` 我得到一个提示：“权限被拒绝（publickkey）。”

4.  从互联网搜索后，我使用`ssh -vv -p 29418 admin@localhost gerrit`

我得到以下输出：

```
gerrit2@bst-esa3-bs:~$ ssh -vv -p 29418 admin@localhost gerrit --help

OpenSSH_5.5p1 Debian-4ubuntu6, OpenSSL 0.9.8o 01 Jun 2010

debug1: Reading configuration data /etc/ssh/ssh_config

debug1: Applying options for *

debug2: ssh_connect: needpriv 0

debug1: Connecting to localhost [::1] port 29418.

debug1: Connection established.

debug2: key_type_from_name: unknown key type '-----BEGIN'

debug2: key_type_from_name: unknown key type '-----END'

debug1: identity file /home/gerrit2/.ssh/id_rsa type 1

debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048

debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048

debug1: identity file /home/gerrit2/.ssh/id_rsa-cert type -1

debug1: identity file /home/gerrit2/.ssh/id_dsa type -1

debug1: identity file /home/gerrit2/.ssh/id_dsa-cert type -1

debug1: Remote protocol version 2.0, remote software version GerritCodeReview_2.4.2 (SSHD-
CORE-0.5.1-R1095809)

debug1: no match: GerritCodeReview_2.4.2 (SSHD-CORE-0.5.1-R1095809)

debug1: Enabling compatibility mode for protocol 2.0

debug1: Local version string SSH-2.0-OpenSSH_5.5p1 Debian-4ubuntu6

debug2: fd 3 setting O_NONBLOCK

debug1: SSH2_MSG_KEXINIT sent

debug1: SSH2_MSG_KEXINIT received

debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-
exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1

debug2: kex_parse_kexinit: ssh-rsa-cert-v00@openssh.com,ssh-dss-cert-v00@openssh.com,ssh-
rsa,ssh-dss

debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-
cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-
cbc@lysator.liu.se

debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-
cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-
cbc@lysator.liu.se

debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-
ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96

debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-
ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96

debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib

debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib

debug2: kex_parse_kexinit:

debug2: kex_parse_kexinit:

debug2: kex_parse_kexinit: first_kex_follows 0

debug2: kex_parse_kexinit: reserved 0

debug2: kex_parse_kexinit: diffie-hellman-group14-sha1,diffie-hellman-group1-sha1

debug2: kex_parse_kexinit: ssh-rsa,ssh-dss

debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,aes192-cbc,aes256-cbc

debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,aes192-cbc,aes256-cbc

debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-md5-96,hmac-sha1-96

debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-md5-96,hmac-sha1-96

debug2: kex_parse_kexinit: none

debug2: kex_parse_kexinit: none

debug2: kex_parse_kexinit:

debug2: kex_parse_kexinit:

debug2: kex_parse_kexinit: first_kex_follows 0

debug2: kex_parse_kexinit: reserved 0

debug2: mac_setup: found hmac-md5

debug1: kex: server->client aes128-cbc hmac-md5 none

debug2: mac_setup: found hmac-md5

debug1: kex: client->server aes128-cbc hmac-md5 none

debug2: dh_gen_key: priv key bits set: 138/256

debug2: bits set: 1040/2048

debug1: sending SSH2_MSG_KEXDH_INIT

debug1: expecting SSH2_MSG_KEXDH_REPLY

debug1: Host '[localhost]:29418' is known and matches the RSA host key.

debug1: Found key in /home/gerrit2/.ssh/known_hosts:1

debug2: bits set: 1018/2048

debug1: ssh_rsa_verify: signature correct

debug2: kex_derive_keys

debug2: set_newkeys: mode 1

debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS

debug2: set_newkeys: mode 0

debug1: SSH2_MSG_NEWKEYS received

debug1: Roaming not allowed by server

debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth

debug1: SSH2_MSG_SERVICE_ACCEPT received

debug2: key: /home/gerrit2/.ssh/id_rsa (0x7f23f313aff0)

debug2: key: /home/gerrit2/.ssh/id_dsa ((nil))

debug1: Authentications that can continue: publickey

debug1: Next authentication method: publickey

debug1: Offering public key: /home/gerrit2/.ssh/id_rsa

debug2: we sent a publickey packet, wait for reply

debug1: Authentications that can continue: publickey

debug1: Trying private key: /home/gerrit2/.ssh/id_dsa

debug2: we did not send a packet, disable method

debug1: No more authentication methods to try.

Permission denied (publickey). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:38:45.777

您是否通过 Web 界面将 ssh 密钥上传到 Gerrit？您确定您在 Gerrit 中的用户名是“admin”吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-28T15:03:03.610

根据我的经验，最大的问题是 ssh 配置文件：~/.ssh/config

这是您告诉 SSH 将您的用户 ID 与目标 URL 和端口对齐的地方。

```
Host gerrit.domain.com
    User my_user_name
    Port 29418 
```

我只需要每隔几年做一次，所以在设置完所有键后总是忘记这最后一步，但它仍然不起作用。