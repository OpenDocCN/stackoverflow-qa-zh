# StackOverflow 问答 10040000-10040999

# android - Android如何在3次单击同一图像后调用另一个图像？

> ID：10040006
> 
> 赞同：0
> 
> 时间：2012-04-06T06:34:31.753
> 
> 标签：android, view, android-imageview, android-image, onclicklistener

我正在开发图像应用程序。

如果我点击相同的图像，图像将被另一个已经进入我的**Drawable的图像替换**

现在 onclick 我只能显示 Toast 消息；但我想替换图像。我不知道怎么办？任何有效的帮助和建议。

您可以将其图像名称为：img1，img2，img3。

```
 ImageView imgV = (ImageView) layout.findViewById(R.id.img1);
    imgV.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {

                        if (v.isClickable()) {
                            i++;
                            String ii = new Integer(i).toString();
                            Log.i("Inside", ii);
                            if (ii.equals("3")) {
                                Toast.makeText(getApplicationContext(), "Call another Image ",Toast.LENGTH_SHORT).show();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:41:06.517

```
ImageView imgV = (ImageView) layout.findViewById(R.id.img1);
imgV.setClickable(true);
int counter = 0;

imgV.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
    i++;
    if(i == 3){
    imgV.setImageResource(R.drawable.img2);
    //Or you may want to use
    //imgV.setBackgroundResource(R.drawable.img2);

    i = 0;
    }
} 
```

# ruby - 反向`...`方法Ruby

> ID：10040009
> 
> 赞同：3
> 
> 时间：2012-04-06T06:35:10.957
> 
> 标签：ruby

ruby 中是否有类似于`(1...4).to_a`is的标准方法，`[1,2,3,4]`除了反向 ie`(4...1).to_a`会是`[4,3,2,1]`吗？

我意识到这可以很容易地定义，`(1...4).to_a.reverse`但让我感到奇怪的是它还没有，而且**1）**我错过了什么吗？**2）**如果没有，是否有功能/实际原因还没有？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T07:12:03.603

最简单的可能是这样的：

```
4.downto(1).to_a #=> [4, 3, 2, 1] 
```

或者，您可以使用`step`：

```
4.step(1,-1).to_a #=> [4, 3, 2, 1] 
```

最后是一个相当晦涩的有趣解决方案：

```
(-4..-1).map(&:abs) #=> [4, 3, 2, 1] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T06:49:21.840

`(1...4)`是一个范围。ruby 中的范围不像数组。如果他们的优势是您可以创建一个范围，例如

```
(1..1e9) 
```

不会占用您机器的所有内存。此外，您可以创建此范围：

```
r = (1.0...4.0) 
```

这意味着“从 1.0 到 4.0 的所有浮点数的集合，包括 1.0 但不包括 4.0”

换句话说：

```
irb(main):013:0> r.include? 3.9999
=> true
irb(main):014:0> r.include? 3.99999999999
=> true
irb(main):015:0> r.include? 4.0
=> false 
```

您可以将整数范围转换为数组：

```
irb(main):022:0> (1..4).to_a
=> [1, 2, 3, 4] 
```

但不是浮点范围：

```
irb(main):023:0> (1.0...4.0).to_a
TypeError: can't iterate from Float
        from (irb):23:in `each'
        from (irb):23:in `to_a'
        from (irb):23
        from /home/mslade/rubygems1.9/bin/irb:12:in `<main>' 
```

因为没有自然的方法来迭代浮点数。相反，您使用`#step`：

```
irb(main):015:0> (1..4).step(0.5).to_a
=> [1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0]
irb(main):016:0> (1...4).step(0.5).to_a
=> [1.0, 1.5, 2.0, 2.5, 3.0, 3.5] 
```

如果您需要在较大的整数范围内向后迭代，请使用[`Integer#downto`](http://ruby-doc.org/core-1.9.3/Integer.html#method-i-downto).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T07:08:45.060

您可以修补 Range#to_a 以自动使用反向功能，如下所示：

```
class Range

  alias :to_a_original :to_a

  def reverse
    Range.new(last, first)
  end

  def to_a
    (first < last) ? to_a_original : reverse.to_a_original.reverse
  end

end 
```

结果：

```
(4..1).to_a
=> [4, 3, 2, 1] 
```

这种方法称为“重新打开”类，也称为“猴子补丁”。有些开发人员喜欢这种方法，因为它添加了有用的功能，有些人不喜欢它，因为它与 Ruby 核心混淆。）

# jquery - slideUp 或 slideDown 完成后触发事件

> ID：10040012
> 
> 赞同：7
> 
> 时间：2012-04-06T06:35:31.617
> 
> 标签：jquery

我正在一个对象上做一个简单的 slideUp 动画。我想在动画完成后向元素添加属性标签。我怎样才能让它工作？

```
if($(this).is(':visible')) {
  if(config.animate=='true')                    
    $(this).slideUp(options.animationTime);   //After animation ends do $(this).attr('shown','true');
  else 
    $(this).hide();             
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T06:37:37.693

```
$(this).slideUp(options.animationTime, function() {
    $(this).attr('shown','true');
}); 
```

# java - GWT 单元格表。沿行的文本

> ID：10040014
> 
> 赞同：0
> 
> 时间：2012-04-06T06:35:55.400
> 
> 标签：java, gwt

Gwt CellTable 只能显示对象。但是我需要动态生成列（所以我不能在我的类中预定义所有需要 CellTable 的字段）；并将一些行设为“标题”，如下所示：

![在此处输入图像描述](../Images/176cfc643674e61623d1cbf151d19f5c.png)

或者你可以给我一些其他的解决方案。（表最多可以有 2000 行。所以我也需要分页）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:08:01.883

无论如何，Celltable 都要求您单独定义每一行。如果您查看 Showcae 代码，您会看到，每个 Column 都是这样添加的：

```
Column<YOURDATAOBJECT, String> nameColumn = new Column<YOURDATAOBJECT, String>(
        new TextCell()) {
    @Override
    public String getValue(YOURDATAOBJECT object) {
        return object.getYOURCOLUMDATA();
    }
};
this.addColumn(nameColumn, YOURHEADERNAME); 
```

因此，只要数据位于为 CellTable 定义的 DataProvider 中，就可以像在代码的任何位置一样简单地添加列。因此，您的问题与 CellTable 无关，它与您为 CellTable 定义的 DataProvider 有关。

CellTable 通过[SimplePager](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/user/cellview/client/SimplePager.html)支持分页。

**总而言之，CellTable 支持您需要的这两个功能，但需要一些时间来理解它们。**

如果您还没有看过它，请查看 CellTable 的官方 Google ShowCase

*   [单元格表](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTable)
*   [数据网格](http://gwt.google.com/samples/Showcase/Showcase.html#!CwDataGrid)
*   [细胞样本](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellSamplerData)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:57:23.927

目前据我所知，gwt celltable 不能像你想要的那样做标题行。我相信 GXT 网格控件可以。

[http://www.sencha.com/examples/](http://www.sencha.com/examples/)

# android - 如何在水平 ListView 中制作垂直可滚动行

> ID：10040017
> 
> 赞同：0
> 
> 时间：2012-04-06T06:36:24.793
> 
> 标签：android

我想在每一行中实现具有垂直滚动内容的 Android 水平列表视图。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:40:56.303

取决于您计划如何以 XML 或编程方式制作每一行。
无论哪种方式，您只需将您的`View`or`Layout`放在 a 中`ScrollView`并为其固定高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:41:49.697

[垂直列表视图内的水平列表视图（并一起滚动多个列表视图）](https://stackoverflow.com/questions/9715341/horizontal-listview-inside-vertical-listview-and-scrolling-multiple-listviews-t)

水平列表视图可以包含垂直滚动视图中的每个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T06:45:38.233

您必须创建自定义列表视图。下面是代码：您必须将 Listview 放在 Horizo​​ntal Scroll View 中：

```
<HorizontalScrollView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/imageViewseparatorListview"
            android:id="@+id/hor">

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/relcoll"
                android:background="@drawable/wallpapertheme">

                <TextView
                    style="@style/ListViewHeaderTheme"
                    android:id="@+id/textviewoutletname"
                    android:text="@string/textviewoutletname"
                    android:layout_width="180dip"
                    android:background="@drawable/listview_heading_background" />

                <ImageView
                    style="@style/ListViewHeaderSeperator"
                    android:id="@+id/imageViewseparator1"
                    android:layout_toRightOf="@id/textviewoutletname" />

                <TextView
                    style="@style/ListViewHeaderTheme"
                    android:id="@+id/textviewcashamount"
                    android:text="@string/textviewcashamount"
                    android:layout_width="90dip"
                    android:layout_toRightOf="@id/imageViewseparator1"
                    android:background="@drawable/listview_heading_background" />

                <ImageView
                    style="@style/ListViewHeaderSeperator"
                    android:id="@+id/CollectionBarSeparator1"
                    android:layout_toRightOf="@id/textviewcashamount" />

                <TextView
                    style="@style/ListViewHeaderTheme"
                    android:id="@+id/textviewchequeamount"
                    android:text="@string/textviewchequeamount"
                    android:layout_width="90dip"
                    android:layout_toRightOf="@id/CollectionBarSeparator1"
                    android:background="@drawable/listview_heading_background" />

                <ImageView
                    style="@style/ListViewHeaderSeperator"
                    android:id="@+id/CollectionBarSeparator2"
                    android:layout_toRightOf="@id/textviewchequeamount" />

                <TextView
                    style="@style/ListViewHeaderTheme"
                    android:id="@+id/textviewosamount"
                    android:text="@string/textviewosamount"
                    android:layout_width="105dip"
                    android:layout_toRightOf="@id/CollectionBarSeparator2"
                    android:background="@drawable/listview_heading_background" />

                <ListView
                    style="@style/ListViewTheme"
                    android:id="@+id/listviewcollection"
                    android:layout_below="@id/textviewosamount"></ListView>

            </RelativeLayout>

        </HorizontalScrollView> 
```

列表视图.xml

```
**Second.XML**
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    style="@style/ListViewTextViewParent">

    <TextView
        style="@style/ListViewTextView"
        android:id="@+id/textviewoutletname"
        android:text="Mayur"
        android:layout_width="180dip" />

    <ImageView
        style="@style/ListViewTextSeperatorForAll"
        android:id="@+id/imageViewseparator1" />

    <TextView
        style="@style/ListViewTextView"
        android:id="@+id/textviewcashamount"
        android:text="2001"
        android:gravity="right"
        android:layout_width="90dip" />

    <ImageView
        style="@style/ListViewTextSeperatorForAll"
        android:id="@+id/imageViewseparator1" />

    <TextView
        style="@style/ListViewTextView"
        android:id="@+id/textviewchequeamount"
        android:text="3000"
        android:layout_width="90dip"
        android:gravity="right" />

    <ImageView
        style="@style/ListViewTextSeperatorForAll"
        android:id="@+id/imageViewseparator1" />

    <TextView
        style="@style/ListViewTextView"
        android:id="@+id/textviewosamount"
        android:text="5000"
        android:gravity="right"
        android:layout_width="100dip" />

</LinearLayout> 
```

现在通过 Base Adapter 在您的活动中扩展类并膨胀第二个 .xml 文件。

如果您愿意，也可以参考以下链接：

[将 ListView 子项添加到 Horizo​​ntalScrollView](https://stackoverflow.com/questions/7060343/adding-listview-children-to-a-horizontalscrollview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T09:04:33.457

创建一个垂直滚动视图

将该视图添加到您的水平滚动视图

# sql - 在存储过程中动态确定表名

> ID：10040022
> 
> 赞同：0
> 
> 时间：2012-04-06T06:36:51.523
> 
> 标签：sql, sql-server-2005

嗨，我有一个程序，它根据我通过的年份使用表名。如何在 sproc 中使用它？

例如：`tables_2000`, `tables_2001`,...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:49:18.907

只是要把它扔出去以帮助解决糟糕的模式设计。

创建一个视图，然后根据年份在视图上执行 where 子句

```
SELECT 2000 AS Year, *
FROM tables_2000
UNION
SELECT 2001 AS Year, *
FROM tables_2001
UNION
SELECT 2002 AS Year, *
FROM tables_2002
UNION
...etc 
```

这假设所有 tables_20XX 具有相同的架构。

您可能可以使用动态 sql 更有效地执行此操作，但您尚未在标签或问题中指定您的 sql 供应商。

# ruby-on-rails-3 - 用户登录集成测试如何/为什么实际上允许成功的假用户登录？

> ID：10040028
> 
> 赞同：1
> 
> 时间：2012-04-06T06:37:05.947
> 
> 标签：ruby-on-rails-3, railstutorial.org

我对rails相当陌生。我正在使用 railstutorial (Rails 3.0)。有一次，我们为用户登录/注销流程编写了一个集成测试：

```
describe "success" do
  it "should sign a user in and out" do
    user = Factory(:user)
    visit signin_path
    fill_in :email,    :with => user.email
    fill_in :password, :with => user.password
    click_button
    controller.should be_signed_in
    click_link "Sign out"
    controller.should_not be_signed_in
  end
end 
```

我的理解是测试使用 db/test 数据库。这个数据库是空的，据我所知（使用`rails console test`）打开它。我们如何使用 Factory 创建一个假用户，然后使用该用户的姓名和电子邮件成功签名？

RailsTutorial 解释：

> 这里 before(:each) 块通过访问登录页面并提交有效的电子邮件/密码对来登录。

为什么它是一个有效的对？我显然错过了一些东西。

我对此特别感兴趣，因为在我看来登录不起作用，我想找出原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:43:05.713

没错，您的测试数据库是空的，因为每个测试示例都在一个[事务](http://en.wikipedia.org/wiki/Database_transaction)中运行，并且在当前示例中创建的所有记录都通过回滚删除。这样做的目的是使每个示例与另一个示例隔离。

但是，当当前示例正在运行时，您的数据库将填充由 FactoryGirl 制作的记录（在您的情况下为一条记录）。无论在工厂中生成什么电子邮件和密码，它都会保存在数据库和内存（`user`变量）中。这就是为什么`user.password`永远是正确的。

# iphone - 通过 gdata-objectivec-client 下载 youtube 视频

> ID：10040029
> 
> 赞同：0
> 
> 时间：2012-04-06T06:37:07.710
> 
> 标签：iphone, objective-c, ios, ipad

我正在开发一个 iphone 应用程序，我必须在其中集成 youtube api。我正在为 iphone [http://code.google.com/p/gdata-objectivec-client/使用 gdata-objectivec-client 库](http://code.google.com/p/gdata-objectivec-client/)

我可以通过这个库搜索、喜欢、不喜欢、上传视频等，但我不知道如何使用这个库从 youtube 流式传输和下载视频，因为没有这方面的课程。

我的问题是可以通过 gdata-objectivec-client 库下载/流式传输 youtube 视频吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:49:17.920

您无法使用 API 下载 youtube 视频。它违反了他们的条款和条件。

但我认为流媒体是可能的。

检查这篇文章 [iphone：如何使用 MPMoviePlayer 在应用程序中流式传输和播放 youtube 视频？](https://stackoverflow.com/questions/4459975/iphonehow-to-stream-and-play-youtube-video-with-in-application-using-mpmoviepla)

# android - 在 Android 列表视图中列出图像和文本

> ID：10040030
> 
> 赞同：0
> 
> 时间：2012-04-06T06:37:13.200
> 
> 标签：android

在我的 RSS 新闻阅读器应用程序中，我目前正在使用以下方法在列表视图中列出 RSS 标题。我已使用此方法将 RSS 数据存储在数组中，[http:](http://droidapp.co.uk/?p=166) //droidapp.co.uk/?p=166。我想要列出 RSS 提要图像及其标题。我从 RSS 提要获取图像 URL。有人可以帮忙找到解决方案吗？

```
ListView lv1;

    lv1 = (ListView)findViewById(R.id.listView1);

    lv1.setAdapter(new ArrayAdapter<String>(this,R.layout.mylist , array.PodcastTitle)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:01:25.247

请参阅此自定义或动态[Listview 示例](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html)

另请参阅如何[从 URL 加载图像](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)

![在此处输入图像描述](../Images/b60584201085cc1b4b834551dbde4fde.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:52:16.767

用作[https://github.com/thest1/LazyList中给出的示例](https://github.com/thest1/LazyList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T06:57:29.453

首先，您必须通过扩展 BaseAdapter 来制作自定义 ListView 适配器，其次您要在位图中获取图像。

在这里：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html)你有一个优化的 ListAdapter

在这里：[使用外部资源动态填充 Android ImageView](https://stackoverflow.com/questions/8585493/dynamically-populate-android-imageview-with-outside-resources)您知道如何下载图像并将其放入位图中（之后您可以将其放入 ImageView）

# python - 字典作为 Django 模板中的表

> ID：10040037
> 
> 赞同：6
> 
> 时间：2012-04-06T06:38:03.497
> 
> 标签：python, django-templates

我有一本字典：

```
field = 

{
   u'Birthday:': [datetime.date(2012, 4, 6), datetime.date(2012, 4, 27)],
   u'Education': [u'A1', u'A2'],
   u'Job:': [u'job1', u'job2'],
   u'Child Sex:': [u'M', u'F']
} 
```

我的模板代码是：

```
<table width="100%" border="0">
     <tr>
        {% for k, v in field.items %}
            <th>{{ k }}</th>
        {% endfor %}
     </tr>
     <tr>
       {% for k,v in field.items %}
            <td>
                <table width="100%" border="0">
                 {% for a in v %}
                     <tr class="{% cycle 'odd' 'even' %}"><td>{{ a }}</td></tr>
                 {% endfor %}
                </table>
            </td>
        {% endfor %}
     </tr>
</table> 
```

我想将字典键显示为表头，将 esach 值显示为行：

```
Birthday                          Education      Job        Child Sex
datetime.date(2012, 4, 6)         A1             job1       M
datetime.date(2012, 4, 27)        A2             job2       F 
```

但我必须插入第二个表。有没有办法将字典键显示为表头，将 esach 值显示为行？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T06:43:46.550

如果您将数据作为字典中的表格提供，则可以使模板代码更易于阅读。它看起来更像这样：

```
field = {
    'headers': [u'Birthday:', u'Education', u'Job', u'Child Sex'],
    'rows': [[datetime.date(2012, 4, 6), u'A1', u'job1', u'M']
            ,[datetime.date(2012, 4, 27), u'A2', u'job2', u'F']]
} 
```

您现在可以按如下方式遍历标头：

```
<tr>
{% for header in field.headers %}
    <th>{{ header }}</th>
{% endfor %}
</tr> 
```

并且可以使用以下方式显示每一行：

```
<tr>    
{% for value in field.rows %}
    <td>{{ value }}</td>
{% endfor %}
</tr> 
```

现在，您可以`'headers'`使用以下方法获取值`field.keys()`：

```
[u'Birthday:', u'Education', u'Job:', u'Child Sex:'] 
```

您可以`'values'`使用以下循环获得（其中`2`是行数）：

```
rows = []
for i in xrange(2):
    row = []
    for k in field.keys():
        row.append(field[k][i])
    rows.append(row) 
```

或作为单行：

```
rows = [[field[k][i] for k in field.keys()] for i in xrange(2)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T15:25:12.260

Simeon 的回答对我有用，但是由于嵌套列表，我必须在模板中做一些不同的事情才能使行和数据看起来正确：

```
 {% for row in field.rows %}
            <tr>
                {% for value in row %}
                    <td>{{value}}</td>
                {% endfor %}
            </tr>
        {% endfor %} 
```

# google-maps - 在哪里设置 google 可视化的配置选项

> ID：10040042
> 
> 赞同：0
> 
> 时间：2012-04-06T06:38:36.700
> 
> 标签：google-maps

我想使用谷歌强度图并找到了这个，[https://developers.google.com/chart/interactive/docs/gallery/intensitymap#Configuration_Options](https://developers.google.com/chart/interactive/docs/gallery/intensitymap#Configuration_Options)

但我无法弄清楚我应该在哪里设置这些选项（在 javascript 代码中）。

我试过`chart.height = 200`了，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:44:40.443

在这里找到它：[https ://google-developers.appspot.com/chart/interactive/docs/quick_start](https://google-developers.appspot.com/chart/interactive/docs/quick_start)

第二个参数`IntensityMap.draw`是选项。

```
var options = {height: 200};
chart.draw(data, options); 
```

会做。

# java - 2D地图平铺java上的块碰撞问题

> ID：10040045
> 
> 赞同：-1
> 
> 时间：2012-04-06T06:38:41.140
> 
> 标签：java, collision

我遇到了墙壁碰撞的问题。基本上，我希望我的播放器在与块碰撞时停止。这是我到目前为止所做的：

Keylistener 设置：

```
addKeyListener(new KeyAdapter(){
        public void keyPressed(KeyEvent e){
            if(e.getKeyCode() == KeyEvent.VK_A){
                pressL = true;  

            }

            if(e.getKeyCode() == KeyEvent.VK_D){
                pressR = true;  

            }

            if(e.getKeyCode() == KeyEvent.VK_W){
                pressU = true;  

            }

            if(e.getKeyCode() == KeyEvent.VK_S){
                pressD = true;  

            }
        }

        public void keyReleased(KeyEvent e){
            if(e.getKeyCode() == KeyEvent.VK_A){

                pressL = false; 

            }

            if(e.getKeyCode() == KeyEvent.VK_D){

                pressR = false;

            }

            if(e.getKeyCode() == KeyEvent.VK_W){

                pressU = false;

            }

            if(e.getKeyCode() == KeyEvent.VK_S){

                pressD = false; 

            }
        }   

        public void keyTyped(KeyEvent e){

        }
    }); 
```

玩家移动：

```
public void playerMovement(){ 
   player.horizontalMovement(0);
   player.verticalMovement(0)

   map.horizontalMovement(0);   
   map.verticalMovement(0);     

   if(pressR && !pressL && !pressU && !pressD){
         if(!east){
         toggleRight();                 
         }

         if(collision("east"))
         east = true;                               
     }          

   if(pressL && !pressR && !pressD && !pressU){
        if(!west)
        toggleLeft();                    

        if(collision("west"))
        west = true;
   }

   if(pressD && !pressU && !pressR && !pressL){
        if(!south)
        toggleDown();

        if(collision("south"))
        south = true;
   }

   if(pressU && !pressD && !pressL && !pressR){ 
        if(!north)
        toggleUp();

        if(collision("north"))
        north = true;

   }
} 
```

这里是碰撞测试的地方：

```
public boolean collision(String loc){

    Rectangle pR = player.getBound();
    Rectangle pM = map.getBound(0, 0);

    if(loc.equals("east")){     
        if(pR.equals(pM)){
            if(west)                
            return false;               

            if(!west)               
            return true;                
        } west = false; south = false;north = false;                            
     }

    if(loc.equals("west"))      
            if(pR.intersects(pM)){
                if(east)                
            return false;   

            if(!east)               
            return true;        
        } east = false; south = false;north = false;
    }

    if(loc.equals("south")){
        if(pR.intersects(pM)){
                if(north)               
            return false;

            if(!north)              
            return true;    

        } north = false; west = false;east = false; 
    }

    if(loc.equals("north")){
        if(pR.intersects(pM)){
                if(south)               
            return false;

            if(!south)              
            return true;                        

        } south = false; west = false;east = false; 
    }

    return false;
} 
```

我像这样设置我的代码，以避免在与我正在测试的块发生碰撞时被卡住。它有效，但我遇到了很多错误。一个例子是有时我被卡住了，或者玩家可以通过使用水平键按下垂直来穿过块。我在为此找出正确的算法时遇到问题。顺便说一句，方向是基于观看者的方向而不是玩家的方向。

有人可以与我分享一种下降方式吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:53:29.520

为玩家和墙（块）创建`Shapes`（例如`Polygon`可以使用）。使用`Shape's`方法

```
public boolean intersects(double x, double y, double w, double h);
public boolean intersects(Rectangle2D r); 
```

或者您可以`Areas`从创建`Shapes`并使用

```
public void intersect(Area rhs) 
```

# android - NETWORK_PROVIDER 不适用于 android 版本 4.0 及以上/API 级别 14 及以上

> ID：10040048
> 
> 赞同：5
> 
> 时间：2012-04-06T06:38:49.220
> 
> 标签：android

在 android 4.0 及更高版本中调用

LocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener)

给出例外

引起：java.lang.IllegalArgumentException：provider=network。

即使启用了网络，也会发生同样的异常。

我知道这是一个报告的问题（http://code.google.com/p/android/issues/detail?id=19857）。

我的问题是。

**如何通过网络提供商或任何其他方法（不是 GPS）在 android 4.0 及更高版本中获取位置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:34:17.030

android 4.0 框架存在一个未解决的问题，因此网络提供商无法正常工作，但最新的 android 版本已解决并成功运行，请检查您在最新 android 框架中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:45:56.690

不要使用直接提供程序字符串，因为不能保证它会在运行时存在。

仅使用从 LocationManager 获得的提供程序，如下所示：

```
 LocationManager locationManager = (LocationManager)context.getSystemService( Context.LOCATION_SERVICE );

    Criteria criteria = new Criteria();
    criteria.setAccuracy( Criteria.ACCURACY_COARSE );
    String provider = locationManager.getBestProvider( criteria, true );

    if ( provider == null ) {
        Log.e( TAG, "No location provider found!" );
        return;
    }

    lastLocation = locationManager.getLastKnownLocation(provider); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:36:20.413

是的，此支持适用于您可以检查的较新版本。

# tiff - 如何通过 LibTiff.Net 库从巨大的 TIFF 文件中读取目标范围

> ID：10040050
> 
> 赞同：1
> 
> 时间：2012-04-06T06:38:53.307
> 
> 标签：tiff, libtiff.net

我有一个大的 tiff 文件，我不想一次将它加载到内存中（这将导致我的应用程序占用大量内存），我想加载它的目标部分并在屏幕上显示这部分。我正在尝试使用 LibTiff.net 库来实现这一点，但我还没有找到合适的 API。

目前我可以通过 calloc 加载一个新数组（非常大！）然后调用 ReadRGBAImageOriented 函数来加载它的 RGBA 值。

有人有这方面的经验吗？

谢谢

# jquery - 带有来自 xml 文件的标记的谷歌地图缩放级别

> ID：10040055
> 
> 赞同：0
> 
> 时间：2012-04-06T06:39:29.067
> 
> 标签：jquery, ajax, google-maps

我希望你能帮助解决我的问题；）
我正在使用谷歌地图 api 和 jquery 从 xml 文件动态加载标记。一切都按我的预期工作，除了一件事。当我加载第二组标记时，地图会失去缩放级别。这是我的[示例](http://markilfin.lx10.net/)尝试单击地图下的按钮，然后尝试单击第二个按钮。你会明白我的意思。这是我的[js 代码](http://markilfin.lx10.net/js/markers.js)。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:07:05.187

我认为，问题在于`MYMAP.bounds.extend(point);`，因为您只在边界上添加新点。

要从您的函数 MYMAP.placeMarkers() 开始，您必须清除界限。
~~`MYMAP.bounds = new GLatLngBounds();`~~

正确的是

```
MYMAP.bounds = new google.maps.LatLngBounds(); 
```

# facebook - When publishing to a user's Timeline (using open graph), can I use the application's access token?

> ID：10040062
> 
> 赞同：0
> 
> 时间：2012-04-06T06:39:53.170
> 
> 标签：facebook, facebook-graph-api

So, Facebook has 2 types of access tokens: Application and User access token.

Is it possible to use the Application access token for open graph?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:08:02.920

Facebook has more than two types of access tokens, there are at least 3 since you forgot to mention the [Page Access Token](http://developers.facebook.com/docs/authentication/pages/).

According to the [App Access Token documentation](http://developers.facebook.com/docs/authentication/applications/):

> Authenticating as an Application allows your application to obtain an App Access Token. This is useful to make requests to the Graph API to modify the parameters of your app, create and manage test users, or read your application's insights for example.

As you can see, it depends what it is you want to ask the fb graph. If you want for example to get the feed of a public page then an app token will suffice, on the other hand if you want to get the feed of a user then you'll have to use a user token.

When you browser through the [Graph API documentation](http://developers.facebook.com/docs/reference/api), for every object you get a list of fields and connections, and the 3rd column of the tables is titled as *Permissions*, in that cell you'll have info of what access token is needed if any.

I.e., if you check out the [User object](http://developers.facebook.com/docs/reference/api/user/) you can see:

*   id: No access_token required
*   updated_time: Requires access_token
*   installed: Requires app access_token

Hope this clarifies things for you.

# python - 列表python的排列

> ID：10040067
> 
> 赞同：0
> 
> 时间：2012-04-06T06:40:42.700
> 
> 标签：python, list

所以我在这里发布了这个问题。

[列表python的排列](https://stackoverflow.com/questions/10038604/permutations-of-lists-python)

解决方案有效..但我应该更加小心。请看一下上面的链接。

如果我没有明确的列表作为 a,b,c,d 但我有一个列表列表.. 类似

```
 lists.append(a)
  lists.append(b) 
```

等等。最后我只有“列表”

这

```
for item in itertools.product(lists): 
   print(item) 
```

在这种情况下不起作用？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:43:01.560

使用以下命令从列表中解压缩所有内容`*`：

```
>>> import itertools
>>> a = ["1"]
>>> b = ["0"]
>>> c = ["a","b","c"]
>>> d = ["d","e","f"]
>>> lists = [a,b,c,d]
>>> for item in itertools.product(*lists):
        print item

('1', '0', 'a', 'd')
('1', '0', 'a', 'e')
('1', '0', 'a', 'f')
('1', '0', 'b', 'd')
('1', '0', 'b', 'e')
('1', '0', 'b', 'f')
('1', '0', 'c', 'd')
('1', '0', 'c', 'e')
('1', '0', 'c', 'f') 
```

这只是将列表解包到其元素中，因此它与调用`itertools.product(a,b,c,d)`. 如果您不这样做，则当您想在列表中查找四个元素的乘积时`itertools.product`，会将其视为一个项目，即列表列表。`[a,b,c,d]`

@sberry 发布了这个有用的链接：[http ://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)

# java - Java中的抽象类与接口

> ID：10040069
> 
> 赞同：104
> 
> 时间：2012-04-06T06:40:58.890
> 
> 标签：java, design-patterns, interface, abstract-class

有人问我一个问题，我想在这里查看我的答案。

**问：**在哪种情况下扩展抽象类而不是实现接口更合适？

**A：**如果我们使用模板方法设计模式。

我对么 ？

如果我不能清楚地说明这个问题，我很抱歉。
我知道抽象类和接口之间的基本区别。

1）当要求是我们需要在每个子类中为特定操作（实现方法）实现相同功能而为某些其他操作（仅方法签名）实现不同功能时，使用抽象类

2）如果您需要将签名相同（并且实现不同），请使用接口，以便您可以遵守接口实现

3）我们可以扩展最多一个抽象类，但可以实现多个接口

**重申问题：**除了上面提到的之外，是否还有其他场景需要我们特别使用抽象类（一个是看到模板方法设计模式在概念上仅基于此）？

接口与抽象类

在这两者之间进行选择真的取决于你想做什么，但幸运的是，Erich Gamma 可以帮助我们一点。

与往常一样，需要权衡取舍，接口为您提供关于基类的自由，抽象类为您提供**以后添加新方法的自由**。——埃里希伽玛

你**不能去改变一个接口，而不必**在你的代码中改变很多其他的东西，所以避免这种情况的唯一方法是创建一个全新的接口，这可能并不总是一件好事。

`Abstract classes`应该主要用于密切相关的对象。`Interfaces`更擅长为不相关的类提供通用功能。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-06T06:47:11.323

**何时使用接口**

接口允许某人从头开始实现您的接口或在其他一些代码中实现您的接口，这些代码的原始或主要目的与您的接口完全不同。对他们来说，您的界面只是附带的，必须添加到他们的代码中才能使用您的包。缺点是接口中的每个方法都必须是公共的。您可能不想公开所有内容。

**何时使用抽象类**

相比之下，抽象类提供了更多的结构。它通常定义一些默认实现，并提供一些对完整实现有用的工具。问题是，使用它的代码必须使用您的类作为基础。如果其他想要使用您的包的程序员已经独立开发了自己的类层次结构，那可能会非常不方便。在 Java 中，一个类只能从一个基类继承。

**何时使用两者**

您可以提供两全其美，一个接口和一个抽象类。如果他们愿意，实现者可以忽略您的抽象类。这样做的唯一缺点是通过接口名称调用方法比通过抽象类名称调用方法稍慢。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-08-11T13:15:15.383

> 重申问题：除了上面提到的这些之外，还有任何其他场景需要我们使用抽象类（一个是模板方法设计模式在概念上仅基于此）

是的，如果您使用 JAXB。它不喜欢接口。您应该使用抽象类或使用泛型解决此限制。

来自个人博客[文章](http://tshikatshikaaa.blogspot.nl/2012/08/java-abstract-class-vs-interface-pros.html)：

**界面：**

1.  一个类可以实现多个接口
2.  接口根本无法提供任何代码
3.  接口只能定义公共静态最终常量
4.  接口不能定义实例变量
5.  添加新方法会对实现类产生连锁反应（设计维护）
6.  JAXB 无法处理接口
7.  接口不能扩展或实现抽象类
8.  所有接口方法都是公开的

***一般来说，接口应该用来定义契约（要实现什么，而不是如何实现）。***

**抽象类：**

1.  一个类最多可以扩展一个抽象类
2.  抽象类可以包含代码
3.  抽象类可以定义静态和实例常量（最终）
4.  抽象类可以定义实例变量
5.  修改现有抽象类代码对扩展类有连锁反应（实现维护）
6.  向抽象类添加新方法对扩展类没有连锁反应
7.  抽象类可以实现接口
8.  抽象类可以实现私有和受保护的方法

***抽象类应该用于（部分）实现。它们可以成为限制 API 合同实施方式的一种手段。***

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-04-06T06:47:03.273

当您遇到所有类具有相同结构但完全具有不同功能的情况时，将使用接口。

当您遇到所有类具有相同结构但某些相同和某些不同功能的场景时，将使用抽象类。

看看这篇文章：[http ://shoaibmk.blogspot.com/2011/09/abstract-class-is-class-which-cannot-be.html](http://shoaibmk.blogspot.com/2011/09/abstract-class-is-class-which-cannot-be.html)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-12-20T15:57:30.593

这里有很多很好的答案，但我经常发现同时使用接口和抽象类是最好的方法。 *考虑这个人为的例子：*

您是一家投资银行的软件开发人员，需要构建一个向市场下订单的系统。您的界面捕捉了交易系统*功能*的最一般概念，

```
1) Trading system places orders
2) Trading system receives acknowledgements 
```

并且可以在界面中捕获，`ITradeSystem`

```
public interface ITradeSystem{

     public void placeOrder(IOrder order);
     public void ackOrder(IOrder order);

} 
```

现在，在销售台和其他业务线工作的工程师可以开始与您的系统*交互*，为他们现有的应用程序添加下订单功能。你甚至还没有开始建造！这就是接口的力量。

因此，您继续为*股票交易*者构建系统；他们听说您的系统具有查找廉价股票的功能，并且非常渴望尝试一下！您在一个名为 的方法中捕获了这种行为`findGoodDeals()`，但同时也意识到与市场的连接涉及到很多混乱的东西。例如，您必须打开一个`SocketChannel`,

```
public class StockTradeSystem implements ITradeSystem{    

    @Override 
    public void placeOrder(IOrder order);
         getMarket().place(order);

    @Override 
    public void ackOrder(IOrder order);
         System.out.println("Order received" + order);    

    private void connectToMarket();
       SocketChannel sock = Socket.open();
       sock.bind(marketAddress); 
       <LOTS MORE MESSY CODE>
    }

    public void findGoodDeals();
       deals = <apply magic wizardry>
       System.out.println("The best stocks to buy are: " + deals);
    } 
```

具体的实现会有很多这样的杂乱无章的方法`connectToMarket()`，但是`findGoodDeals()`交易者真正关心的是所有这些。

*现在这是抽象类发挥作用的地方。* 你的老板告诉你外汇交易员也想使用你的系统。看看货币市场，你会发现管道几乎与股票市场相同。事实上，`connectToMarket()`可以逐字重复使用来连接外汇市场。然而，`findGoodDeals()`在货币领域是一个截然不同的概念。因此，在将代码库传递给大洋彼岸的外汇天才小子之前，您首先要重构为一个`abstract`类，留下`findGoodDeals()`未实现的

```
public abstract class ABCTradeSystem implements ITradeSystem{    

    public abstract void findGoodDeals();

    @Override 
    public void placeOrder(IOrder order);
         getMarket().place(order);

    @Override 
    public void ackOrder(IOrder order);
         System.out.println("Order received" + order);    

    private void connectToMarket();
       SocketChannel sock = Socket.open();
       sock.bind(marketAddress); 
       <LOTS MORE MESSY CODE>
    } 
```

您的股票交易系统`findGoodDeals()`按照您已经定义的方式实施，

```
public class StockTradeSystem extends ABCTradeSystem{    

    public void findGoodDeals();
       deals = <apply magic wizardry>
       System.out.println("The best stocks to buy are: " + deals);
    } 
```

但是现在外汇天才孩子可以通过简单地提供`findGoodDeals()`货币实现来构建她的系统；她不必重新实现套接字连接甚至接口方法！

```
public class CurrencyTradeSystem extends ABCTradeSystem{    

    public void findGoodDeals();
       ccys = <Genius stuff to find undervalued currencies>
       System.out.println("The best FX spot rates are: " + ccys);
    } 
```

接口编程功能强大，但类似的应用程序通常以几乎相同的方式重新实现方法。使用抽象类避免了重新实现，同时保留了接口的功能。

**注意：**有人可能想知道为什么`findGreatDeals()`不是界面的一部分。请记住，接口定义了交易系统中最通用的组件。另一位工程师可能会开发一个完全不同的交易系统，他们并不关心找到好的交易。该界面保证了销售台也可以与他们的系统进行交互，因此最好不要将您的界面与“优惠”之类的应用程序概念纠缠在一起。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-03-06T21:53:37.473

您应该使用哪个抽象类或接口？

*如果这些语句中的任何一个适用于您的用例，请考虑使用抽象类：*

您希望在几个密切相关的类之间共享代码。

您希望扩展抽象类的类具有许多公共方法或字段，或者需要公共以外的访问修饰符（例如受保护和私有）。

您要声明非静态或非最终字段。这使您能够定义可以访问和修改它们所属对象的状态的方法。

*如果这些语句中的任何一个适用于您的用例，请考虑使用接口：*

您希望不相关的类会实现您的接口。例如，接口 Comparable 和 Cloneable 由许多不相关的类实现。

您想指定特定数据类型的行为，但不关心谁实现了它的行为。

您想利用类型的多重继承。

[http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-18T18:46:04.447

在过去三年中，随着与 Java 8 版本交互的新功能的增加，情况发生了很大变化。

从界面上的oracle 文档[页面：](https://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

> 接口是一种引用类型，类似于类，只能包含常量、方法签名、**默认方法、静态方法**和嵌套类型。方法体仅存在于默认方法和静态方法。

正如您在问题中引用的那样，抽象类最适合您必须创建骨架的***模板方法模式。***接口不能在这里使用。

更喜欢抽象类而不是接口的另一个考虑因素：

您在基类中没有实现，只有子类必须定义自己的实现。您需要抽象类而不是接口，因为您想与子类共享状态。

***抽象类在相关类之间建立“是”关系，接口在不相关类之间提供“具有”能力**。*

* * *

关于您问题的第二部分，这对大多数编程语言都有效，包括***java-8***发布之前的 java

> 与往常一样，需要权衡取舍，接口为您提供关于基类的自由，抽象类为您提供以后添加新方法的自由。——埃里希伽玛
> 
> 你不能去改变一个界面，而不必在你的代码中改变很多其他的东西

如果你更喜欢抽象类而不是前面两个考虑的接口，你现在必须重新考虑，因为[默认方法](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)为接口添加了强大的功能。

> 默认方法使您能够向库的接口添加新功能，并确保与为这些接口的旧版本编写的代码的二进制兼容性。

要在接口和抽象类之间选择其中之一，oracle 文档[页面](https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)引用以下内容：

> 抽象类类似于接口。您不能实例化它们，它们可能包含声明的带有或不带有实现的方法的混合。但是，使用抽象类，您可以声明非静态和最终的字段，并定义公共、受保护和私有的具体方法。
> 
> 使用接口，所有字段都自动是公共的、静态的和最终的，并且您声明或定义的所有方法（作为默认方法）都是公共的。此外，您只能扩展一个类，无论它是否是抽象的，而您可以实现任意数量的接口。

有关更多详细信息，请参阅这些相关问题：

[接口 vs 抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo/33963650#33963650)

[我应该如何解释接口和抽象类之间的区别？](https://stackoverflow.com/questions/18777989/how-should-i-have-explained-the-difference-between-an-interface-and-an-abstract/34978606#34978606)

总结：***现在天平更倾向于界面***。

> 除了上面提到的之外，是否还有其他场景需要使用抽象类（一个是模板方法设计模式在概念上仅基于此）？

除了模板方法模式之外，一些设计模式使用抽象类（通过接口）。

*创作模式：*

[抽象工厂模式](https://en.wikipedia.org/wiki/Abstract_factory_pattern)

*结构模式：*

[装饰器模式](https://en.wikipedia.org/wiki/Decorator_pattern)

*行为模式：*

[中介者模式](https://en.wikipedia.org/wiki/Mediator_pattern)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-19T10:06:00.500

在我看来，基本的区别在于`an interface can't contain non abstract methods while an abstract class can`。所以如果子类共享一个共同的行为，这个行为可以在超类中实现，从而在子类中继承

我还引用了“Java 中的软件架构设计 ppatterns”一书中的以下内容

" 在 Java 编程语言中，不支持多重继承。这意味着一个类只能从一个类继承。因此，只有在绝对必要时才应使用继承。只要有可能，表示共同行为的方法应在Java 接口的形式由不同的实现者类实现。但是接口受到它们不能提供方法实现的限制。这意味着接口的每个实现者必须显式地实现接口中声明的所有方法，即使其中一些方法方法代表了功能中不变的部分，并且在所有实现类中都有完全相同的实现，这导致了冗余代码。以下示例演示了如何在这种情况下使用抽象父类模式，而无需冗余方法实现。”

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-06T06:43:25.243

你不正确。有很多场景。只是不可能将其简化为单个 8 字规则。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-06T06:49:21.697

最短的答案是，当您寻求的某些功能已经在其中实现时，**扩展抽象类。**

如果实现接口，则必须实现所有方法。但是对于抽象类，您需要实现的方法数量可能会更少。

在[模板设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)中，必须定义一个行为。此行为取决于其他抽象方法。通过创建子类并定义这些方法，您实际上定义了主要行为。底层行为不能在接口中，因为接口没有定义任何东西，它只是声明。所以模板设计模式总是带有一个抽象类。如果您想保持行为流完整，您必须扩展抽象类，但不要覆盖主要行为。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-04-06T06:52:04.663

抽象类在两个重要方面不同于接口

*   他们为所选方法提供默认实现（您的答案已涵盖）
*   抽象类可以有状态（实例变量） - 所以这是你想用它们代替接口的另一种情况

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-03T16:45:55.683

这是我的理解，希望对你有帮助

**抽象类：**

1.  可以有继承的成员变量（不能在接口中完成）
2.  可以有构造函数（接口不能）
3.  它的方法可以具有任何可见性（即：私有、受保护等 - 而所有接口方法都是公共的）
4.  可以有定义的方法（带有实现的方法）

**接口：**

1.  可以有变量，但都是public static final变量
    *   在静态范围内永远不会改变的常量值
    *   非静态变量需要一个实例，你不能实例化一个接口
2.  所有方法都是抽象的（抽象方法中没有代码）
    *   所有代码都必须实际编写在实现特定接口的类中

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-13T09:05:31.760

抽象和接口的用法：

一个有“Is-A-Relationship”，另一个有“Has-A-Relationship”

默认属性已经设置在抽象中，额外的属性可以通过接口来表达。

示例：--> 在人类中，我们有一些默认属性，例如吃饭、睡觉等，但如果有人有任何其他课程活动，如游泳、玩耍等，则可以通过 Interface 表示。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-09-19T06:17:35.627

这是一个很好的问题 这两个并不相似，但可以出于某些相同的原因使用，例如重写。创建时最好使用接口。归根结底，它有利于调试。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-06T06:54:50.877

`Abstract classes should be extended when you want to some common behavior to get extended`. 抽象超类将具有共同行为，并将定义子类应实现的抽象方法/特定行为。

`Interfaces allows you to change the implementation anytime allowing the interface to be intact`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-09T18:03:25.293

我认为这里的答案缺少要点：

Java 接口（问题是关于Java，但在其他语言中也有类似的机制）是一种部分支持多重继承的方法，即*仅方法*继承。

它类似于 PHP 的*特征*或 Python 的*鸭子类型*。

除此之外，没有什么是您真正需要的接口——而且您不能实例化 Java 接口。

# c# - 使用 HttpContext 获取模型（MVC 3）中每种语言的文件以将它们保存在单独的表中

> ID：10040073
> 
> 赞同：1
> 
> 时间：2012-04-06T06:41:24.010
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我有这段简单的 HTML 代码：

```
<div>
   <input type="file" name="english-file" />
</div>
<div>
   <input type="file" name="french-file" />
</div> 
```

我在我的模型中使用了以下 C# 行代码：

```
object receivedFiles = HttpContext.Current.Request.Params["english-file"]; 
```

但该对象总是返回 null 。

当然，我可以使用`HttpContext.Current.Request.Files`，但我想按语言分隔文件（上面的 HTML 代码很简单，但有人可以添加`english`比`french`+ 添加文件按钮更多的文件）并将它们保存在单独的表中。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:53:53.417

这不是文件上传的方式。在表格上`Request.Files["english-file"]`设置正确后，您应该查看。`enctype`

举个例子：

```
@using (Html.BeginForm("upload", "somecontroller", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        <input type="file" name="english" />
    </div>
    <div>
        <input type="file" name="french" />
    </div>

    <button type="submit">Upload</button>
} 
```

在控制器动作中：

```
[HttpPost]
public ActionResult Upload()
{
    var englishFile = Request.Files["english"];
    var frenchFile = Request.Files["french"];
    ...
} 
```

甚至更好：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase english, HttpPostedFileBase french)
{
    ...
} 
```

甚至更好：

```
[HttpPost]
public ActionResult Upload(IEnumerable<HttpPostedFileBase> files)
{
    ...
} 
```

假设您调整文件输入的名称：

```
@using (Html.BeginForm("upload", "somecontroller", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        <input type="file" name="files" />
    </div>
    <div>
        <input type="file" name="files" />
    </div>

    <button type="submit">Upload</button>
} 
```

我还邀请您阅读[以下博客文章](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)。

# asp.net - 这个 VB.net 语法传递查询字符串有什么问题？

> ID：10040080
> 
> 赞同：0
> 
> 时间：2012-04-06T06:42:59.590
> 
> 标签：asp.net, vb.net, visual-studio

```
this code will not pass the query string to default3.aspx on Image Button .. 
```

我认为我的语法有一些错误，请帮我解决错误..在下面的代码中：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            ImageButton1.Attributes.Add("onClick", "window.showModalDialog('Default3.aspx?id='" + Label4.Text + ",'','dialogHeight: 400px; dialogWidth: 370px;');return false;")
        End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:30:57.903

修改代码如下

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles   Me.Load
      ImageButton1.Attributes.Add("onClick", "window.showModalDialog('Default3.aspx?id=" + Label4.Text + "','','dialogHeight: 400px; dialogWidth: 370px;');return false;");
End Sub 
```

希望对你有帮助...

# php - php如何引用当前文档？

> ID：10040083
> 
> 赞同：1
> 
> 时间：2012-04-06T06:43:18.777
> 
> 标签：php, document

我的网页允许用户从下拉列表中选择项目并有一个表格。Javascript 在 javascript 创建的新表行中打印出每个下拉列表项（加上 javascript 从 XML 文件中提取的额外信息）。

我希望能够将表信息写入磁盘。如果我使用的是 Javascript，我会使用 document.getElementByID("table") 解析节点并将该信息放入我可以编写的变量中。但是，我发现的大多数文档都说 Javascript 不用于写入磁盘。所以，我认为我应该使用 php。

什么是 Javascript 的“文档”对象的 php 等价物？在 Javascript 中，我不需要定义任何新对象来使用它，我可以随时使用“文档”。我认为在 php 中我必须使用新的 DOMDocument。然后加载html。

大多数 php 示例显示 loadHTML(string) 和 loadHTMLFile(); 我不想从我写在标签内的字符串中加载 HTML。而且我不想从 .htm 文件中加载 HTML，因为那是原始文件，而 Javascript 已根据用户从下拉菜单中的选择更改了用户的文件。

我想使用 php 访问当前文档的元素。那么，php是如何引用当前文档的呢？

我正在处理的页面是[http://music.collwyncraig.info/hajimama/setlist.htm](http://music.collwyncraig.info/hajimama/setlist.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:58:17.497

我认为您对架构的想法是错误的。编程语言之间有一种交互方式。

*   php 是一个预处理器，它生成 - 你想要的任何东西 - 通常是 html，包含 javascript、css 和任何东西......
*   javascript 是一种动态语言，可以在生成的 html 文档中进行交互，或者通过 ajax 调用其他提供 html、javascript、css 或任何需要的服务
*   和 html - 即显示的文档对象，可以在运行时通过 javascript 和 css 等样式进行修改...

所以当你在你的文档中调用javascript函数时——基本的php已经完成了它的工作。

您可以先将其存储在 var 中，而不是将所有从 php 生成的内容直接打印到屏幕上。

例如：

```
$myContent = "<html><head>...</head><body><h1>Whatever...</h1></body>"; 
```

因此，您可以执行以下操作将其打印在屏幕上：

```
print "myContent";  // and it is shown on the screen 
```

或者

```
$myFile = "testFile.html";
$fh = fopen($myFile, 'w') or die("can't open file");
$myContent = "<html><head>...</head><body><h1>Whatever...</h1></body>";
fwrite($fh, $myContent);
$myContent = "Whatever2";
fwrite($fh, $myContent);
fclose($fh); 
```

所以你的文件的内容是：

```
<html><head>...</head><body><h1>Whatever...</h1></body>Whatever2 
```

然后可以`loadHTML`按照您想要的方式调用或使用此生成的文档。

这只是作为您可以思考的方向的提示-有多种解决方法-因此，在不了解您真正想要的更多信息的情况下-提及适当的解决方案并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:46:41.773

`$_SERVER['SCRIPT_NAME']`对于主文件。

或者

`__FILE__`获取调用它的文件的完整路径。

PHP 没有像 jQuery 这样的内置 DOM Manipulator - html 输出通常是通过您选择的某些模板引擎或手动生成的。如果你想要像 jQuery 这样的 DOM 操作，你可能想试试 PHPQuery

[http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

# javascript - 如何在 Backbone 模型中强制执行属性类型？

> ID：10040084
> 
> 赞同：3
> 
> 时间：2012-04-06T06:43:19.117
> 
> 标签：javascript, backbone.js

我希望有一个带有浮点属性的 Backbone 模型，但不必过多担心变量类型。

我想将值解析封装在模型中，因此我正在考虑覆盖该`set`函数：

```
var Place = Backbone.Model.extend({
  set: function(attributes, options) {
    if (!_.isEmpty(attributes.latitude)){
      attributes.latitude == parseFloat(attributes.latitude);
    }
    if (!_.isEmpty(attributes.longitude)){
      attributes.longitude == parseFloat(attributes.longitude);
    }
    Backbone.Model.prototype.set.call(this, attributes, options);
  }
}); 
```

然而，这似乎很麻烦，因为我在 validate 方法中会有类似的逻辑，并且可能会在多个模型中重复。我认为 View 不应该处理这些转换。

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:20:47.500

为您的模型使用验证插件，以便您可以以通用方式验证输入。

那里有几个，包括我写的一个：

*   [Backbone.Validator](http://github.com/toddself/Backbone.Validator/)
*   [Backbone.Validation](https://github.com/thedersen/backbone.validation)

然后您不必担心在其他任何地方执行数据验证 - 您的模型会执行此操作并发送`error`您可以收听的消息并提供适当的反馈。

此外，在极少数情况下，lat/lng 对可以是整数，例如格林威治英格兰：0,0 或北极：90,180。并且由于 JavaScript 只有“数字”，所以 parseFloat 的任何有效输入对于 parseInt 也是有效的。

但是 parseFloat 总是会返回一个浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T12:19:07.823

我的解决方案是`Backbone.Model.prototype.set`用预处理器代理替换：

```
/**
 * Intercept calls to Backbone.Model.set and preprocess attribute values.
 * 
 * If the model has a <code>preprocess</code> property, that property will be
 * used for mapping attribute names to preprocessor functions. This is useful
 * for automatically converting strings to numbers, for instance.
 * 
 * @param Backbone
 *            the global Backbone object.
 */
(function(Backbone) {
    var originalSet = Backbone.Model.prototype.set;
    _.extend(Backbone.Model.prototype, {
        set: function(key, val, options) {
            if(!this.preprocess) {
                return originalSet.apply(this, arguments);
            }

            // If-else copied from Backbone source
            if (typeof key === 'object') {
                attrs = key;
                options = val;
            } else {
                (attrs = {})[key] = val;
            }

            for(attr in this.preprocess) {
                if(_.has(attrs, attr)) {
                    attrs[attr] = this.preprocess[attr](attrs[attr]);
                }
            }
            return originalSet.call(this, attrs, options);
        },
    });
})(Backbone); 
```

在此之后，具有`preprocess`属性的模型将使用它来将属性名称映射到预处理器函数。例如，`preprocess: { age: parseInt }`意味着无论何时设置属性，都会在实际设置之前`age`传递该值。`parseInt`没有对应`preprocess`条目的属性不会受到影响。

示例用法：

```
var Thing = Backbone.Model.extend({
    preprocess: {
        mass: parseInt,
        created: function(s) { return new Date(s); },
    },
});
var t = new Thing({
    label: '42',
    mass: '42',
    created: '1971-02-03T12:13:14+02:00',
});
console.log(t.get('label')+3); // 423
console.log(t.get('mass')+3); // 45
console.log(t.get('created').toLocaleString('ja-JP', { weekday: 'short' })); // 水 
```

## 优点

*   该功能适用​​于所有型号，无需重复代码
*   无需`{ validate: true }`每次调用​​都发送到`set`
*   无需在 中重复预处理`validate`，因为这发生在`validate`调用之前（这也可能是一个骗局，见下文）

## 缺点

*   骨干代码的一些重复
*   可能会破坏验证，因为预处理发生在`validate`调用之前。JavaScript 解析方法通常会返回无效值而不是抛出异常（即`parseInt('foo')`返回`NaN`），因此您应该能够检测到它。

# applescript - 使用 Automator/Applescript 在某些字符后裁剪文件名？

> ID：10040085
> 
> 赞同：0
> 
> 时间：2012-04-06T06:43:23.803
> 
> 标签：applescript, automator

我有一个包含大约 5000 个文件的文件夹，其名称如下：

```
 Invoice 10.1 (2012) (Digital) (4-Attachments).pdf 
    Carbon Copy - Invoice No 02 (2010) (2 Copies) (Filed).pdf
    01.Reciept #04 (Scanned-Copy).doc 
```

我想通过从第一个括号开始删除所有内容来重命名这些文件，所以它们看起来像这样：

```
 Invoice 10.1.pdf
    Carbon Copy - Invoice No 02.pdf
    01.Reciept #04.doc 
```

我发现很多脚本会删除最后一个 x 字母，但没有任何内容会从特定字符中裁剪出来。

理想情况下，我想使用 Automator，但我猜这可能太复杂了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:36:04.400

尝试：

```
set xxx to (choose folder)
tell application "Finder"
set yyy to every paragraph of (do shell script "ls " & POSIX path of xxx)
repeat with i from 1 to count of yyy
    set theName to item i of yyy
    set name of (file theName of xxx) to (do shell script "echo " & quoted form of theName & " | sed s'/ (.*)//'")
end repeat
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:51:31.810

[@adayzone 发布](https://stackoverflow.com/a/10043562/990363)的代码可以工作，但不需要为此使用`sed`——普通的 AppleScript 可以，使用`offset`：

```
set fullString to "Invoice 10.1 (2012) (Digital) (4-Attachments).pdf"
set trimmedString to text 1 thru ((offset of "(" in fullString) - 1) of fullString
-- trim trailing spaces
repeat while trimmedString ends with " "
    set trimmedString to text 1 thru -2 of trimmedString
end repeat 
```

这将返回“Invoice 10.1”。要将文件名拆分为名称和扩展名，并重新添加扩展名，您可以使用*System Events*的 Disk-File-Folder 套件，该套件将提供方便的`name extension`属性，您可以存储和重新添加修剪名称后添加。

假设您使用一些 Automator 操作来获取要处理的文件，完整的处理工作流程将是在文件选择部分之后添加一个 AppleScript 操作，并使用以下代码：

```
repeat with theFile in (input as list)
    tell application "System Events"
        set theFileAsDiskItem to disk item ((theFile as alias) as text)
        set theFileExtension to name extension of theFileAsDiskItem
        set fullString to name of theFileAsDiskItem
        -- <insert code shown above here>
        set name of theFileAsDiskItem to trimmedString & "." & theFileExtension
    end tell
end repeat 
```

如果您希望 Automator 工作流程进一步处理文件，您还必须为重命名的文件创建一个别名列表，并从 AppleScript 操作中返回该别名（而不是`input`，这当然不再有效）。

# guid - 崇高的文本插入指南

> ID：10040087
> 
> 赞同：9
> 
> 时间：2012-04-06T06:43:30.700
> 
> 标签：guid, sublimetext, sublimetext2

我已经开始使用 Sublime Text，它很棒。但是在编辑 Wix 设置文件时，我需要插入随机生成的 GUID，例如`52E47764-B722-4E8A-9BA8-DDA5B1500391`.

问题：是否有任何片段或热键或其他东西可以将 GUID 插入到正在编辑的文本中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T06:54:55.173

它有一个插件：[https ://github.com/SublimeText/GenerateUUID](https://github.com/SublimeText/GenerateUUID)

# ruby - 如何在Ruby中将哈希值从字符串转换为数组？

> ID：10040092
> 
> 赞同：2
> 
> 时间：2012-04-06T06:44:37.890
> 
> 标签：ruby, arrays, hash

我正在寻找将 Ruby 哈希中的值从字符串转换为整数。

我认为这与您在 Ruby 数组中执行转换的方式非常相似（使用 map 方法），但我无法找到一个优雅的解决方案，它不涉及将哈希转换为数组，将其展平， ETC。

有没有一个干净的解决方案来做到这一点？

例如。从

```
x = { "a" => "1", "b" => "2", "c"=> "3" } 
```

到

```
x = { "a" => 1, "b" => 2, "c" => 3 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T07:13:18.507

为避免修改原始哈希（与现有答案不同），我会使用

```
newhash = x.reduce({}) do |h, (k, v)|
  h[k] = v.to_i and h
end 
```

如果您使用的是 Ruby 1.9，您还可以使用`Enumerable#each_with_object`更简洁地实现相同的效果。

```
newhash = x.each_with_object({}) do |(k, v), h|
  h[k] = v.to_i
end 
```

如果需要，您还可以将逻辑提取到模块中并`Hash`用它扩展类。

```
module HMap
  def hmap
    self.each_with_object({}) do |(k, v), h|
      h[k] = yield(k, v)
    end
  end
end

class Hash
  include HMap
end 
```

现在你可以使用

```
newhash = x.hmap { |k, v| v.to_i } # => {"a"=>1, "b"=>2, "c"=>3} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T07:22:45.877

我的首选解决方案：

```
Hash[x.map { |k, v| [k, v.to_i]}] #=> {"a"=>1, "b"=>2, "c"=>3} 
```

A somewhat wasteful one (has to iterate over the values twice):

```
Hash[x.keys.zip(x.values.map(&:to_i))] #=> {"a"=>1, "b"=>2, "c"=>3} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T06:47:09.180

试试这个：

```
x.each{|k,v| x[k]=v.to_i} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T06:47:06.280

```
p.keys.map { |key| p[key] = p[key].to_i } 
```

# c# - 在 SQL Server 2008 中基于多个 select 语句创建表并插入行

> ID：10040097
> 
> 赞同：0
> 
> 时间：2012-04-06T06:44:50.753
> 
> 标签：c#, asp.net, sql-server-2008

我的情况是在登录我的网站后，我想显示有多少员工活跃、不活跃以及部门明智、拼贴明智的员工人数列表。

为此，如果临时表不存在，我创建了一个创建临时表的过程，否则删除表创建临时表，之后我编写了一些 SQL 查询来获取员工数量、有条件的部门，然后我将记录插入到表中。

然后我需要插入的行。现在我的问题是在 SQL 中执行过程时它执行但它没有创建和插入任何行，我不知道为什么会发生这种情况。如果有人知道这个问题的解决方案，请帮助我。

我的代码：

```
alter proc SP_TEMPRECORDFORCOUNT
as
begin

IF (EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'dbo' AND  TABLE_NAME = 'TEMPRECORDFORCOUNT'))
BEGIN
   drop table dbo.TEMPRECORDFORCOUNT
END

create table dbo.TEMPRECORDFORCOUNT(totalemployeecount int,activeemployeecount int,inactiveemployeecount int,deptwiseemployeecount int,activeemployeecount int)

declare @totalemployeecount int
declare @activeemployeecount int
declare @inactiveemployeecount int
declare @deptwiseemployeecount int
declare @activeemployeecount int

select @totalemployeecount =COUNT(*) from Employee
select @activeemployeecount =COUNT(*) from Employee where status=1
select @inactiveemployeecount =COUNT(*) from Employee where status=0
select @deptwiseemployeecount = count(*) from Department where e_id !=null 
select @activeemployeecount = count(*) from Department d inner join Employee e on d.e_id =e.e_id where status_id=1

insert into TEMPRECORDFORCOUNT
(
totalemployeecount 
,activeemployeecount 
,inactiveemployeecount 
,deptwiseemployeecount 
,activeemployeecount 
)
values
(
@totalemployeecount ,
@activeemployeecount ,
@inactiveemployeecount ,
@deptwiseemployeecount ,
@activeemployeecount ,
)
end

is it correct way thing i'm doing? if not please correct me. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:49:56.340

使用 SQL Server 2008 R2，您可以选择表变量。

因此，您的声明应更改为以下内容：

```
DECLARE @TEMPRECORDFORCOUNT TABLE(totalemployeecount int,activeemployeecount int,inactiveemployeecount int,deptwiseemployeecount int,activeemployeecount int)

insert into @TEMPRECORDFORCOUNT
(
totalemployeecount 
,activeemployeecount 
,inactiveemployeecount 
,deptwiseemployeecount 
,activeemployeecount 
)
values
(
@totalemployeecount ,
@activeemployeecount ,
@inactiveemployeecount ,
@deptwiseemployeecount ,
@activeemployeecount ,
)

SELECT * FROM @TEMPRECORDFORCOUNT
; 
```

# regex - 如何使用正则表达式获取两个字符串之间的字符串

> ID：10040102
> 
> 赞同：1
> 
> 时间：2012-04-06T06:45:31.350
> 
> 标签：regex, vb.net

说字符串是这样的

> bla bla bla bla（猫） bladfdskdfd dsgdsdksf（狗） dfdshfdskdskfsdfkhsdf sdkfhdsfkdf（凯西） fdsfhdskfhdsfkd（狗）

我想要一个 generic.list （字符串）包含

猫

狗

凯西

狗

如何在 vb.net 中使用正则表达式来做到这一点

后来我想做一些更复杂的事情，比如从这个字符串中获取“url”：“和”之间的所有字符串

> 152742110214000.编号代理，：-。Tgl。机构， ： -。汝来，：90.76。瓦克图：270 哈里。Nilai kontrak, : Rp."},{"GsearchResultClass":"GwebSearch","unescapedUrl":"https://eproc.pu.go.id/publik/dinaspu/kegiatan/info_paket.asp?id\u003d%7B4BD47F74 -233B-4D49-BB60-4229023668C6%7D","url":"https://eproc.pu.go.id/publik/dinaspu/kegiatan/info_paket.asp%3Fid%3D%257B4BD47F74-233B-4D49-BB60 -4229023668C6%257D","visibleUrl":"eproc.pu.go.id","cacheUrl":"","title":"Informasi Proyek","titleNoFormatting":"Informasi Proyek","content":" 2010 年 4 月 9 日 \u003cb\u003e...\u003c/b\u003e Sub Kegiatan，：PEMBANGUNAN JALAN。Paket, : Peningkatan jalan sd hotmix Jl 。\u003cb\u003eKucing\u003c/b\u003e 凯尔。普沃萨里。Rupiah Murni, : 1449000000 \u003cb\u003e...\u003c/b\u003e"}],"cursor":{"resultCount":"10","pages":[{"start":"0"," label":1},{"start":"4","label":2},{"start":"8","label":3}],"estimatedResultCount":"10","currentPageIndex" :2,"moreResultsUrl":"http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8\u0026source\u003duds\u0026start\u003d12\u0026hl\u003den\u0026q\u003d+kucing+site:eproc。 pu.go.id","searchResultTime":"0.05"}}, 200, null, 200)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:27:03.313

如果你想从字符串中提取值并在 vb.net 中生成通用列表，你可以试试

```
Private Function Fetch_Items(Text As String) As List(Of Generic_List)
Dim pattern As String = "\((?<value>(.)*?\))"
Dim _lst As New List(Of Generic_List)()
Dim VDMatch As System.Text.RegularExpressions.Match = System.Text.RegularExpressions.Regex.Match(Text, pattern)
While VDMatch.Success
    _lst.Add(VDMatch.Groups("value").Value)
    VDMatch = VDMatch.NextMatch()
End While

Return _lst
End Function 
```

此函数将提取包含在 ( ) 内的所有字符串并生成通用列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:41:27.363

所以在寻找类似的问题时，我遇到了这篇文章。我的任务是解析树节点的完整路径（表示为“root\child\grandchild\greatgrandchild...\currentNode”以选择要使用的祖先级别。虽然 irfanmcsd 的回答很优雅，但我很难让我的手臂正确设置斜线模式（并且真的希望在正则表达式方面做得更好。）

这是我针对我的特定问题的解决方案：

```
 Dim exp As New Regex("\\", RegexOptions.IgnoreCase)
    Dim ancestors() As String

    ancestors = exp.Split(calledFromTreeNode.FullPath) 
```

我现在有一组值来完成我需要的。

诚然这不是同一个问题，但 irfanmcsd 的解决方案帮助推动了我自己的解决方案。现在我只需要更好地理解模式！

# facebook - Facebook 连接登录按钮在 iOS 5 上不起作用

> ID：10040109
> 
> 赞同：3
> 
> 时间：2012-04-06T06:46:10.310
> 
> 标签：facebook, ios5, xcode4.2

我正在使用[Facebook 连接](http://en.wikipedia.org/wiki/Facebook_Platform#Facebook_Connect)。当我单击 Facebook 对话框的“登录”按钮时，它会像平常一样消失，但不会登录。

如果我通过设备登录，然后按下键盘的 Go 按钮，如果我`Enter`在输入用户名和密码后按下模拟器，则它已成功登录，但不是通过单击“登录”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:37:33.397

当您说 Facebook Connect 时，我假设您指的是*[iOS 教程](https://developers.facebook.com/docs/mobile/ios/build/)*中概述的 Facebook SDK 的当前版本。

如果是这样，你能确认你的`FBSessionDelegate`方法`fbDidLogin`被调用了吗？（在此处放置日志消息或调试断点并确认是这种情况。）

如果它没有被调用，那么如果您不将此代码放在应用程序委托中，而是将其放在其他对象中，则可能会发生这种情况。

# plone - Plone 4.1.4 中的“标记为已读”功能

> ID：10040110
> 
> 赞同：2
> 
> 时间：2012-04-06T06:46:15.333
> 
> 标签：plone, iso

使用 Plone 作为质量管理计划的文档管理系统（大写流行语以增加效果......），我们正在寻找“阅读列表”功能。

这应该提供两个功能：

*   向最终用户显示哪些新文档已更新但他们尚未阅读
*   向尚未阅读某些更新文件的质量经理展示

添加了想法，最好是工作流中文档的状态应该保持不变（我们考虑添加“待读”状态，但决定反对）。

连同我之前在 Stackoverflow 上回答的一些问题，我们将准备推出似乎符合 ISO9001 的文档管理系统，在 Plone 中，开源，几乎所有通过网络 - 我可以'不是说我在三周前就预料到了……

有人知道这样的产品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:23:25.090

我认为这只能通过定制产品来完成。

我这样做的方法是注册一个与文档的内容类型相关联的 viewlet（或 portlet），并提供一个按钮。

单击该按钮时，会将用户 ID 和内容 ID 写入某处，可能在注释或外部数据库（Redis、MySQL）中。需要额外的视图、viewlet 和 portlet 来向最终用户和经理提供有关已阅读或未阅读内容的信息。

# facebook - How do I pop up a dialog from Facebook to request the user to "allow" for open graph?

> ID：10040116
> 
> 赞同：2
> 
> 时间：2012-04-06T06:46:42.043
> 
> 标签：facebook, facebook-graph-api

In my Facebook application, I am requesting 3 scopes: email,publish_stream,publish_action

I am using the FB.login function. These 2 steps pop up.

When the user clicks "Cancel" in the first step, FB.login will show "status: unknown" as the response object.

However, when user clicks cancel in the second step, FB.login shows it as "status:connected" and treats it as if the user accepted everything.

I recently learned that you can check if the user allowed the 2nd step using

```
FB.api('/me/permissions', function (response) {
    console.log(response);
} ); 
```

***My question is...knowing that the user denied the open graph step, how can I pop that dialog up again?***

![enter image description here](../Images/332cc41e493d8ababe4c21433f6fefd5.png) ![enter image description here](../Images/b4e263aef216bd28e2649d375161a492.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:49:42.633

You are correct, the 2nd stage of the [Auth Dialog](http://developers.facebook.com/docs/opengraph/authentication/) is optional, the user does not have to accept all of the extended permissions you ask for, or any of them, as it states in the [Permissions](http://developers.facebook.com/docs/opengraph/authentication/#perms) sections of the auth dialog documentation:

> **The user will be able to remove any of these permissions, or skip this stage entirely**, which results in rejecting every extended permission you've requested. Your app should be able to handle revocation of any subset of extended permissions for installed users.

The best approach I think is to have your app manage with what the user accepts, but if you **HAVE** to have the permission(s) in the optional stage (extended permissions) then this is what you can do:

```
FB.init({
    ....
});

var requiredPermissions = ["email", "publish_stream", "publish_action"];

function checkPermissions(response) {
    var ok = true;

    if (!response.data || response.data.length != 1)
        ok = false;
    else for (var perm in requiredPermissions) {
        if (!(perm in response.data[0])) {
            ok = false;
            break;
        }
    }

    if (!ok)
        login();
    else
        console.log("Hey there user who granted all the required permissions");
}

function loginCallback(response) {
    if (response.authResponse) {
        FB.api("/me/permissions", checkPermissions);
    }
    else {
        console.log("User cancelled login or did not fully authorize.");
    }
}

functoin login() {
    FB.login(loginCallback, { scope: requiredPermissions.join(",") });
} 
```

I haven't tested this code, it's a nudge in the right direction though. Also, this code will go on forever until the user accepts all permissions or just gives up, you should somehow let him know that you need those permissions and about to send him for the auth dialog again.

* * *

# Edit

I keep forgetting to include this with my answers: Calling *[FB.login](http://developers.facebook.com/docs/reference/javascript/FB.login/)* opens a new pop-up window, and browsers usually blocks that unless it's a result of a user action, as it says in the docs:

> Calling FB.login results in the JS SDK attempting to open a popup window. As such, this method should only be called after a user click event, otherwise the popup window will be blocked by most browsers.

It also says there:

> If you need to collect more permissions from users who have already authenticated with your application, call FB.login again with the permissions you want the user to grant. In the authentication dialog, the user will only ever be asked for permissions they have not already granted.

Which means that it's a way to do what you want, the popup probably did not open because it was blocked by your browser. You need to modify the code I gave you so that every time you call the *login* function it's after the user interacted with your page, i.e.: display a message saying "the application needs this and that permissions, please click this button to continue" which then will call the *login* function.

# c++ - 如何将每个数据相应地输出到文件中？

> ID：10040118
> 
> 赞同：0
> 
> 时间：2012-04-06T06:46:59.843
> 
> 标签：c++, file, outputstream, ofstream, file-io

```
struct GPattern() {
    int gid;
    ....
}
class Example() {
public:
    void run(string _filename, unsigned int _minsup);
    void PrintGPattern(GPattern&, unsigned int sup);
    ....
};

Eample::run(string filename, unsigned int minsup) {
    for(...) {    // some condition
        // generate one GPattern, and i want to ouput it
        PrintGPattern(gp, sup);
    }
}

Example::PrintGPattern(GPattern& gp, unsigned int sup) {
    // I want to ouput each GPattern to a .txt file
} 
```

`run`用于`GPattern`相应地生成一个。

我想要输出到文件的是一些重建原始`GPattern`.

我无法`GPattern`提前存储所有并输出所有这些。当我生成它时，我必须将它输出`GPattern`到一个文件，但我不知道如何实现它。

我试图`ofstream outGPatter("pattern.txt")`在课堂上声明`Example`，但它没有用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:18:07.223

好吧，ofstream 是正确的方法：

```
Example::PrintGPattern(GPattern& gp, unsigned int sup) {
    ofstream outGPattern("pattern.txt")

    outGPattern << gp.gid; << " " << gp.anotherGid << " " ....

    outGPattern.close()
} 
```

您是否查看了 pattern.txt 的正确位置？它应该在 .exe 所在的文件夹中，或者在所有 .h 和 .cpp 文件所在的文件夹中（至少对于 VS）。

如果要将所有模式写入同一个文件，则需要确保附加（而不是覆盖）pattern.txt

> ofstream outGPattern("pattern.txt",ios::app)

因此，您可以在程序开始时首先制作一个不带 ios::app 的 ofstream（以清除文本文件）。然后，您使用 ios::app 构造所有其他 ofstream 以附加新文本，而不是覆盖它。

或者，您可以使 ofstream 成为 Example 的成员变量。然后你只构建一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:31:42.147

我认为您可以使用附加模式，例如：

```
ofstream outGPattern;
outGPattern.open("GPattern.txt", ios::app); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:38:11.037

我看到它的方式，你想*附加*多个信息`GPattern`，你只需要`ios::app`在构造函数中设置 I/O 模式。

```
struct GPattern {
  int gid;
  friend ostream& operator <<(ostream& o, GPattern gp) {
    return o << "(gid=" << gp.gid << ")";
  }
  ...
}

Example::PrintGPattern(GPattern& gp, unsigned int sup) {
  ofstream fout("pattern.txt", ios::app)
  fout << gp << endl;
  fout.close()
} 
```

# c - 长型 64bit linux

> ID：10040123
> 
> 赞同：6
> 
> 时间：2012-04-06T06:47:18.627
> 
> 标签：c, linux, bit-manipulation

非常简单的问题，但也许我只是忘记了一些东西。在 64bit linux 中，long 是 8bytes 吗？如果是这种情况，并且我想设置第 64 位，我可以执行以下操作：

```
unsigned long num = 1<<63; 
```

然而，每当我编译它时，它都会给我一个错误，说我左移的幅度超过了宽度。另外，如果我想采用 long 类型的前 32 位（没有符号扩展），我可以这样做：

```
num = num&0xFFFFFFFF; 
```

或者怎么样：

```
num = (int)(num); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T07:22:08.307

实际上，如果您想要整数的精确长度（以位为单位），假设一个符合*C99*的编译器，`#include <stdint.h>`并使用诸如 等类型`int64_t`。`int32_t` 一个方便的类型是，一个与指针`intptr_t`具有相同位数的整数类型（因此您可以调用`void*`它是一个机器“词”）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:49:11.807

> 在 64bit linux 中，long 是 8bytes 吗？

不必。取决于编译器而不是底层操作系统。检查这个以获得很好的讨论。 [什么决定整数的大小？](https://stackoverflow.com/questions/9689049/what-decides-the-sizeof-an-integer)

> 然而，每当我编译这个时，它都会给我一个错误，说我左移超过了宽度

这个大家都已经回答过了。采用`1UL`

> 另外，如果我想采用**long**类型的前 32 位（没有符号扩展），我可以这样做：

```
num = num&0xFFFFFFFF;
or what about:

num = (int)(num); 
```

`num = num&0xFFFFFFFF`. 这将为您提供较低的 32 位。但请注意，如果`long`您的系统上只有 4 个字节，那么您将获得*整个数字*。来到符号扩展部分，如果你使用了 a`long`而不是，`unsigned long`那么你就不能取消符号扩展位。例如，`-1`从第 0 位开始，全部表示为 1。您将如何通过掩蔽来避免这些问题？

`num = (int)(num)`将为您提供较低的 32 位，但如果`num`不适合编译器，编译器可能会通过溢出异常警告`int`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T09:19:13.777

为了便携性，您可以使用：

限制.h

```
#define LNG_BIT   (sizeof(long) * CHAR_BIT)

unsigned long num = 1UL << (LNG_BIT - 1); 
```

* * *

要获得“*低 int* ”，例如？：

```
#define INT_BIT   (sizeof(int) * CHAR_BIT)

if (LNG_BIT > INT_BIT)
    return num & (~0UL >> INT_BIT);
else
    return num; 
```

或者

```
 num &= ~(~0U << INT_BIT); 
```

或者，使用掩码等。很大程度上取决于您想要 int 位的原因、用途等。

还要注意编译器给出的选项；即，如果您使用的是 gcc：

*   [i386 和 x86-64 选项](http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html)
*   [子模型选项](http://gcc.gnu.org/onlinedocs/gcc/Submodel-Options.html#Submodel-Options)

^(-m32
-m64
-mx32) [        为 32 位或 64 位环境生成代码。
        * -m32 选项将 int、long 和指针类型设置为 32 位，并生成可在任何 i386 系统上运行的代码。
        * -m64 选项将 int 设置为 32 位，将 long 和指针类型设置为 64 位，并为 x86-64 架构生成代码。对于 Darwin，只有 -m64 选项也会关闭 -fno-pic 和 -mdynamic-no-pic 选项。
        * -mx32 选项将 int、long 和指针类型设置为 32 位，并为 x86-64 架构生成代码。]

还有`-maddress-mode=long`等等。

^(-maddress-mode=long)
[        为长地址模式生成代码。这仅支持 64 位和 x32 环境。它是 64 位环境的默认地址模式。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T06:53:58.920

我认为第一个问题的问题在于编译器将“1”视为整数，而不是长整数。直到分配之后才弄明白。

您可以通过以下方式修复它：

```
unsigned long num = (unsigned long)1<<63; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T18:58:32.720

像这样的 AFAIR 代码是几年前 reiserfs 中一个主要错误的来源：

```
unsigned long num = 1<<63; 
```

如果您谈到 x86_64，是的，long 是 64 位的，并且在大多数其他 64 位 linux plytforms 上也是如此。问题是代码中的 the`1`和 the`63`都很简单`int`，因此结果是未定义的。更好的使用

```
 unsigned long num = 1UL<<63; 
```

或者

```
 unsigned long num = (unsigned long)1<<63; 
```

# ios - 将 UISearchBar 作为子视图添加到 tableView 标题中

> ID：10040125
> 
> 赞同：5
> 
> 时间：2012-04-06T06:47:33.820
> 
> 标签：ios, uitableview, uisearchbar

我正在尝试向 中添加一个自定义标题`UITableView`，它有一些按钮和一个`UISearchBar`. 问题是，当我尝试使用 searchBar 时，我收到一条消息：

`setting the first responder view of the table but we don't know its type (cell/header/footer)`

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T08:28:20.903

您是否通过以下方式添加到表格中：

```
[self.tableView addSubview:customView] 
```

如果是这样，那可能是您的错误。将子视图添加到 UITableView 需要您明确地将它们添加为页眉、页脚或单元格。尝试：

```
self.tableView.tableHeaderView = customView 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T05:38:39.157

只需按照这里的简单步骤..

1.  在您的“.h”文件中为 mySearchBar 创建一个属性并进行合成。
2.  在 viewDidLoad/viewDidAppear 方法中设置它的属性（或者你可以在 Interface Builder 中简单地做）
3.  使用以下委托方法将其设置为表格视图的标题...

    ```
    – (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {                 
            return self.mySearchBar;
    } 
    ```

# mysql - 如何将 MySQL InnoDB 表数据同步到 Memory 表

> ID：10040126
> 
> 赞同：1
> 
> 时间：2012-04-06T06:47:42.033
> 
> 标签：mysql, memory, synchronize

我们使用 MYSQL InnoDB 引擎进行插入和更新操作，为了提高查询性能，我们正在考虑使用 Memory 表来存储最新数据 Ex. 最近两个月的数据。

我们可以配置MySQL在服务器启动时将数据导入Memory表，但是实际业务数据一直在更新，我们不得不经常将数据从InnoDB表同步到Memory表，但是我们不能每次都重启MySQL服务器来同步数据。

谁能知道如何在不重新启动 MySQL 的情况下同步数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:50:33.607

您通常会使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)来执行此操作。我的第一个想法是分两部分来做。

1) 在 innodb 表上创建用于插入、更新和删除（如果发生）的触发器，这会导致内存表中的相同更改。确保没有逻辑依赖于某些行已从内存表中删除，它将保留过去 2 个月，然后是一些。

2）创建一个后台作业，清除旧数据的内存表。如果您对它有很高的负载，请考虑一个频繁的工作，一次蚕食几行旧行。

另一种解决方案是按时间对 innodb 表进行[分区](http://dev.mysql.com/tech-resources/articles/mysql_55_partitioning.html)，然后确保包含类似`where time > subdate(now(), interval 2 month)`

# backbone.js - Backbone.js 模型属性常量 - 这是一个好习惯吗？

> ID：10040128
> 
> 赞同：0
> 
> 时间：2012-04-06T06:48:19.123
> 
> 标签：backbone.js

我无法跟踪 Model 实例的属性。例如，我有如下声明：

```
MyModel = Backbone.Model.extend({}); 
```

然后在我看来，我经常做类似的事情：

```
var someVal = this.model.get('someProperty'); 
```

我开始通过将视图的字符串封装在一个对象中并将其作为第二个参数传递给视图的构造函数来将视图的字符串移动到常量中的任务，例如：

```
SchemaOptionsView = Backbone.View.extend(
    { /* Body of View here as usual */}, 
    {
        TEMPLATE: '#View-Template',
        INPUT_REQUIRED:'required'
    }); 
```

当我开始思考时，我可以通过使用我的模型来解决两个问题：

```
MyModel = Backbone.Model.extend(
{ /* Body of Model here as usual */},
{
    PROPERTY_1 = 'p1',
    PROPERTY_2 = 'p2'
}); 
```

然后我可以使用常量来检索属性值：

```
var someVal = this.model.get(MyModel.PROPERTY_1); 
```

这将使我能够清楚地看到 Model 实例包含的属性，并将字符串值移动到适当位置的常量中。

我没有看到这个推荐或任何例子。我错过了什么吗？人们如何看待这个想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:12:26.630

这是解决一个非问题。您的模型应该具有明确定义的属性 - 我们使用默认哈希来枚举模型的所有可用属性。这不仅提供了模型拥有的属性的目录，而且还提供了一种覆盖未验证输入的方法。

# android - 解析 Android 的 JSON 问题

> ID：10040130
> 
> 赞同：0
> 
> 时间：2012-04-06T06:48:25.723
> 
> 标签：android, json

您好 Frnds 这是我与 Xcode for iPhone 一起使用并正确获得响应的代码，但问题是当我使用相同的 url 和相同的 json 进行 android 开发时，我得到：-

```
{"code":"400","message":"Failed loading JSON. Special characters must not be included in the request. Please check the requested JSON."} 
```

我认为这是我没有发现的任何小技术问题。我是 android 开发的新手，我从过去 15 天开始尝试了 1000 次并且感到沮丧。:-(:-(:-(:-(:-(:-(:-(:-(:-(:-( 任何人都可以为我提供完整的解决方案和完整的android代码。我将非常感谢你。

iPhone的代码是：

```
NSURL *url = [NSURL URLWithString:@"http://www.invoicera.com/app/api/check_json_api.php?token=7B92C122473A3D6F54E60D20AC5526D0"];

NSString *jsonRequest = [NSString stringWithFormat:@"&json_data=%@",[[NSString stringWithFormat:@"{\"listInvoice\":{\"client_id\":\"\",\"date_from\":\"\",\"date_to\":\"\",\"invoice_number\":\"\",\"invoice_record_status\":\"\",\"invoice_status\":\"\",\"page\":\"1\",\"per_page_record\":\"20\"}}"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSLog(@"%@",jsonRequest);

NSData *json_data = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

NSLog(@"%@",json_data);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

[request setHTTPMethod:@"POST"];
[request setHTTPBody: json_data];
NSLog(@"%@",json_data);
// [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
//[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [json_data length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:[[jsonRequest stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]
                      dataUsingEncoding:NSUTF8StringEncoding 
                      allowLossyConversion:YES]]; 
```

// [NSURLConnection connectionWithRequest:[request autorelease] delegate:self];

```
NSURLConnection *nsUrlConnection=[[NSURLConnection alloc]
                                  initWithRequest:request 
                                  delegate:self];

// Successful connection.
if (nsUrlConnection) {

   // [self initSpinner];
   // [self spinBegin];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData=data;
    [data release];
} 
// Unsuccessful connection.
else {

}  
// Clean up
[url release];
[request release]; 
```

写完这段代码后，我得到了服务器的完美响应。但是我如何才能从服务器获得相同的响应以进行 android 开发。请为我提供完整的解决方案以及完整的android代码。

```
{"@attributes":{"status":"200"},"invoices":{"@attributes":{"page":"1","per_page_record":"20","total_pages":"13","total_records":"246"},"invoice":[{"client":{"client_id":"421","organization":"max styles","address":"H-189,Vasundhara","billing_address":{"street":"H-189,Vasundhara","city":{},"state":{},"zip":........................etc etc etc. 
```

这是安卓代码：

```
public class JSONParser {

    String s1 = "{\"listInvoice\":{\"client_id\":\"\",\"date_from\":\"\",\"date_to\":\"\",\"invoice_number\":\"\",\"invoice_record_status\":\"\",\"invoice_status\":\"\",\"page\":\"1\",\"per_page_record\":\"20\"}}";

    public String payload;

    public JSONParser(String[]array) {
        this.payload = null;
    }

    public void excuteHttpPost() throws Exception {
        BufferedReader in = null;

        try {
            // Creating HTTP client
            JSONObject listobj = new JSONObject ();
            JSONObject listInvoice = new JSONObject ();
            listInvoice.put("client_id","");
            listInvoice.put("date_from","");
            listInvoice.put("date_to","");
            listInvoice.put("invoice_number","");
            listInvoice.put("invoice_record_status","");
            listInvoice.put("invoice_status","");
            listInvoice.put("page","1");
            listInvoice.put("per_page_record","10");
            listobj.put("listInvoice", listInvoice);

            HttpClient client = new DefaultHttpClient();
            HttpPost request = new HttpPost(ConstantList.invoicelistURL);

            List<NameValuePair> postParameters = new ArrayList<NameValuePair>(1);
            postParameters.add(new BasicNameValuePair("json_data", s1));

            Log.d("Http Response:", postParameters.toString());

            // Build JSON string

            request.setHeader("Content-type", "application/x-www-form-urlencoded");
            request.setEntity(new UrlEncodedFormEntity(postParameters));
            HttpResponse response = client.execute(request);

            // writing response to log
            Log.d("Http Response:", response.toString());
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line+NL);
            }
            in.close();
            payload = sb.toString();

        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                   e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:01:26.790

问题是您根本没有`JSONObject listobj`在请求中使用，而是添加`s1`到 post 参数。使用此代码：

```
postParameters.add(new BasicNameValuePair("json_data", listobj.toString())); 
```

此外，明确地将整数值放入 JSONObject：`listInvoice.put("page", 1);`而不是`listInvoice.put("page", "1");`

# objective-c - PJSIP 未定义符号架构 Armv7

> ID：10040131
> 
> 赞同：0
> 
> 时间：2012-04-06T06:48:27.423
> 
> 标签：objective-c, xcode4, sip, pjsip

我正在尝试从 [http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone编译](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)[pjsip](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)。

```
cd /path/to/your/pjsip/dir
$ ./configure-iphone
$ make dep && make clean && make 
```

我收到以下未定义符号错误。

```
Undefined symbols for architecture armv7:
"_pjmedia_avi_streams_get_num_streams", referenced from:
  _app_init in pjsua_app.o
  _reset_dev_info in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
"_pjmedia_avi_streams_get_stream", referenced from:
  _app_init in pjsua_app.o
  _reset_dev_info in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
"_pjmedia_vid_register_factory", referenced from:
  _pjmedia_avi_dev_create_factory in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
"_pjmedia_vid_dev_get_local_index", referenced from:
  _pjmedia_avi_dev_get_param in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
  _pjmedia_avi_dev_free in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
"_pjmedia_vid_dev_get_global_index", referenced from:
  _pjmedia_avi_dev_alloc in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
"_pjmedia_avi_player_create_streams", referenced from:
   _pjmedia_avi_dev_alloc in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
"_pjmedia_avi_streams_get_stream_by_media", referenced from:
  _pjmedia_avi_dev_alloc in libpjmedia-videodev-arm-apple-darwin9.a(avi_dev.o)
ld: symbol(s) not found for architecture armv7
collect2: ld returned 1 exit status
make[2]: *** [../bin/pjsua-arm-apple-darwin9] Error 1
make[1]: *** [pjsua] Error 2
make: *** [all] Error 1 
```

请帮助为 Xcode 4.3 编译这个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T06:55:06.747

看起来您缺少一个应该链接的库。从符号错误看来，它可能被称为 pjmedia。确保您链接到所有库。pjsip 需要的预编译文件

# redis - 当redis过载时会发生什么？

> ID：10040133
> 
> 赞同：3
> 
> 时间：2012-04-06T06:48:44.413
> 
> 标签：redis

如果 redis 过载，我可以将其配置为丢弃集合请求吗？我有一个应用程序可以实时更新大量项目的数据（每个项目每秒 10-15 次）。这些值很快就过时了，我不需要任何一致性。

我还想计算实时写入的值的并行总和。这里最好的选择是什么？LUA 在 redis 中执行？使用 UNIX 套接字位于与 redis 相同的盒子上的小应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:22:49.587

当 Redis 过载时，它只会减慢其客户端的速度。对于大多数命令，协议本身是同步的。

Redis 虽然支持流水线，但客户端无法取消仍在流水线中但服务器尚未确认的流量。Redis 本身并不真正对传入流量进行排队，TCP 堆栈会这样做。

所以不可能配置 Redis 服务器来丢弃集合请求。但是，可以在客户端实现最后一个值队列：

*   队列实际上是由您的项目索引的 2 个地图表示（每个项目仅存储一个值）。应用程序将使用主地图。辅助地图将由特定线程使用。可以以原子方式交换 2 个地图内容。

*   当主映射为空时，特定线程正在阻塞。如果不是，它会交换两个映射的内容，使用激进的流水线和可变参数命令将辅助映射的内容异步发送到 Redis。它还接收来自 Redis 的 ack。

*   当线程正在使用辅助地图时，应用程序仍然可以填充主地图。如果 Redis 太慢，应用程序只会在主映射中累积最后的值。

这个策略可以用hiredis和你选择的事件循环在C中实现。

但是，实现起来并非易事，所以我会首先检查 Redis 对*所有*流量的性能是否不足以达到我的目的。如今，以超过 500K op/s 的速度对 Redis 进行基准测试并不少见（使用单核）。如果需要，没有什么可以阻止您将数据分片到多个 Redis 实例上。

您可能会在 Redis 服务器的 CPU 之前使网络链接饱和。这就是为什么最好在客户端而不是服务器端实现最后一个值队列（如果需要）。

关于总和计算，我会尝试实时计算和维护它。例如，GETSET 命令可用于在返回前一个值的同时设置一个新值。

您可以执行以下操作，而不仅仅是设置您的值：

```
[old value] = GETSET item <new value>
INCRBY mysum [new value] - [old value] 
```

mysum 键将随时包含所有项目的值的总和。使用 Redis 2.6，您可以使用 Lua 封装此计算以节省往返。

运行大批量来计算现有数据的统计信息（这就是我理解您的“并行”总和的方式）并不适合 Redis。它不是为类似 map/reduce 的计算而设计的。

# ios - 如何使用 QuartzPDF 在 PDF 中搜索非 ASCII 字符（西里尔字母）？

> ID：10040136
> 
> 赞同：1
> 
> 时间：2012-04-06T06:49:09.827
> 
> 标签：ios, pdf, sdk, full-text-search, quartz-2d

我偶然发现使用 PDDScanner 在 PDF 中搜索西里尔字母（以及任何其他非 ASCII）字符。我使用的代码类似于 Randon Ideas 博客中提到的 SO 代码。问题在于，对于西里尔 PDF，scanner 的输出是完全垃圾，无法解码为任何有意义的东西。西里尔 PDF 中的英文字符被完美地搜索。所以，问题在于，当涉及到西里尔文时，它是被编码的，我们不知道如何正确解码它。

我们在这里想念什么？

提前感谢任何可以阐明该主题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:41:26.393

您是否尝试过通过不同的编码推送该字符串？当我查看时`NSString.h`，我看到一些可疑标记为“西里尔字母”的东西，在同一行上也有“Adobe”:)（即尝试`NSWindowsCP1251StringEncoding`）

```
enum {
    NSASCIIStringEncoding = 1,      /* 0..127 only */
    NSNEXTSTEPStringEncoding = 2,
    NSJapaneseEUCStringEncoding = 3,
    NSUTF8StringEncoding = 4,
    NSISOLatin1StringEncoding = 5,
    NSSymbolStringEncoding = 6,
    NSNonLossyASCIIStringEncoding = 7,
    NSShiftJISStringEncoding = 8,          /* kCFStringEncodingDOSJapanese */
    NSISOLatin2StringEncoding = 9,
    NSUnicodeStringEncoding = 10,
    NSWindowsCP1251StringEncoding = 11,    /* Cyrillic; same as AdobeStandardCyrillic */
    NSWindowsCP1252StringEncoding = 12,    /* WinLatin1 */
    NSWindowsCP1253StringEncoding = 13,    /* Greek */
    NSWindowsCP1254StringEncoding = 14,    /* Turkish */
    NSWindowsCP1250StringEncoding = 15,    /* WinLatin2 */
    NSISO2022JPStringEncoding = 21,        /* ISO 2022 Japanese encoding for e-mail */
    NSMacOSRomanStringEncoding = 30,

    NSUTF16StringEncoding = NSUnicodeStringEncoding,      /* An alias for NSUnicodeStringEncoding */

    NSUTF16BigEndianStringEncoding = 0x90000100,          /* NSUTF16StringEncoding encoding with explicit endianness specified */
    NSUTF16LittleEndianStringEncoding = 0x94000100,       /* NSUTF16StringEncoding encoding with explicit endianness specified */

    NSUTF32StringEncoding = 0x8c000100,                   
    NSUTF32BigEndianStringEncoding = 0x98000100,          /* NSUTF32StringEncoding encoding with explicit endianness specified */
    NSUTF32LittleEndianStringEncoding = 0x9c000100        /* NSUTF32StringEncoding encoding with explicit endianness specified */
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:44:42.607

您可能需要更深入地了解[Apple 规范和标题](https://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html)- 添加 NSLog 行（并在此处发布）以获取扫描仪为普通 PDF 和西里尔文找到的内容。有很多可能性（可能是不同的编码，即您需要使用该编码将您拥有的字符串转换为不同的字符串）。我确信有一种方法可以列出表中的所有运算符，以查看您的西里尔 pdf 中是否有额外的运算符。此外，[这可能有助于](https://stackoverflow.com/questions/4097044/pdf-search-on-the-iphone)您尝试解决一个非常相似的问题 - 它指向一个[更适合扫描的库](https://github.com/KurtCode/PDFKitten/blob/master/PDFKitten/CMap.m)。

# soap - 在 Mule Flows 中使用 SOAP 配置 HTTP 端点

> ID：10040137
> 
> 赞同：5
> 
> 时间：2012-04-06T06:49:11.433
> 
> 标签：soap, cxf, mule

我正在尝试使用 Mule Flows 在 Mule 中配置现有的 SOAP Web 服务。我有一个带有请求/响应的 HTTP 端点和一个 SOAP 组件，比如服务 A。

![简单的 SOAP 流](../Images/5360b66fcdaf270307fe18d9ec8a19f6.png) 我想配置此设置以使简单的流程正常工作。我已经设置了我的 HTTP 端点和 SOAP 服务。流文件如下所示。

```
 <?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="CE-3.2.1" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <flow name="demoflowFlow1" doc:name="demoflowFlow1">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP"/>
        <cxf:jaxws-service port="8082" serviceClass="com.myapp.serviceA.ServiceAImplService" doc:name="SOAP"/>
    </flow>
</mule> 
```

这是行不通的。我的服务很简单，它接受一个字符串并返回一个字符串。

```
@WebService(targetNamespace = "http://service.demo.myapp.com/", endpointInterface = "com.myapp.demo.service.IServiceA", portName = "ServiceAImplPort", serviceName = "ServiceAImplService")
public class ServiceAImpl implements IServiceA {
    public String hello(String user) {
        return "at service A: " + user;
    }
} 
```

[我正在使用 HTTP 入站 URL http://localhost:8081/](http://localhost:8081/) {I am not sure what goes here!}调用我的流程并获得：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<soap:Fault>
<faultcode>soap:Server</faultcode>
<faultstring>No such operation: (HTTP GET PATH_INFO: /)</faultstring>
</soap:Fault>
</soap:Body>
</soap:Envelope> 
```

Mule 流程在 Mule Studio 中作为应用程序运行，服务作为 Springsource 工具套件中的 SOAP Web 服务运行。

我究竟做错了什么？

原始 WSDL 在[http://localhost:8080/ServiceA/services/ServiceAImplPort?wsdl](http://localhost:8080/ServiceA/services/ServiceAImplPort?wsdl)

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://service.demo.myapp.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="ServiceAImplService" targetNamespace="http://service.demo.myapp.com/">
<wsdl:types>
<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://service.demo.myapp.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<import namespace="http://service.demo.myapp.com/" schemaLocation="http://localhost:8080/ServiceA/services/ServiceAImplPort?xsd=serviceaimpl_schema1.xsd"/>
</schema>
</wsdl:types>
<wsdl:message name="helloResponse">
<wsdl:part element="tns:helloResponse" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:message name="hello">
<wsdl:part element="tns:hello" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:portType name="IServiceA">
<wsdl:operation name="hello">
<wsdl:input message="tns:hello" name="hello"></wsdl:input>
<wsdl:output message="tns:helloResponse" name="helloResponse"></wsdl:output>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="ServiceAImplServiceSoapBinding" type="tns:IServiceA">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="hello">
<soap:operation soapAction="urn:Hello" style="document"/>
<wsdl:input name="hello">
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output name="helloResponse">
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="ServiceAImplService">
<wsdl:port binding="tns:ServiceAImplServiceSoapBinding" name="ServiceAImplPort">
<soap:address location="http://localhost:8080/ServiceA/services/ServiceAImplPort"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

仅供参考，我可以毫无问题地从 SpringSource 工具套件运行 Web 服务。现在，如何使用 GET 请求从我的 HTTP 入站 URL 调用 Web 服务？[我假设像这样的简单 Web 服务接受 GET 请求。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T22:07:49.573

我认为您忘记了方法中的 @WebMethod 注释。这基本上就是你的错误所说的：没有操作。

[这](http://www.learnbysimpleway.com/2012/10/mule-3-esb-cxf-soap-webservice-ws.html)是一个很好的例子，你可以如何做到这一点。

```
@WebService(targetNamespace = "http://service.demo.myapp.com/", endpointInterface = "com.myapp.demo.service.IServiceA", portName = "ServiceAImplPort", serviceName = "ServiceAImplService")
public class ServiceAImpl implements IServiceA {
    @WebMethod
    @WebResult(name="result")
    public String hello(@WebParam(name="user")String user) {
        return "at service A: " + user;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T15:34:03.230

这很容易......我猜 com.myapp.serviceA.ServiceAImplService 是你的服务实现类，而 IServiceA.java 是你的服务类......你为什么不试试这个：-

![骡配置](../Images/57096e327437e0495bced66221b4c486.png)

您的 wsdl 有问题...。为什么**< wsdl:service name="ServiceAImplService" >**是**ServiceAImplService** ... 而应该是**IServiceA** .... **ServiceAImplService**是我猜想的 Web 服务实现类，应该保留在在骡流中

# algorithm - 对两个字典进行排序并查找排序列表中项目索引位置的差异

> ID：10040138
> 
> 赞同：-1
> 
> 时间：2012-04-06T06:49:12.270
> 
> 标签：algorithm

我面前有一个挑战。让我提出令我困惑的挑战——

有两个字典说- D1和D2。这些字典大部分时间都有相同的键，但不能保证它总是相同的。这两个字典可以表示如下 -

D1 = {["R1", 0.7], ["R2",0.73], ["R3", 1.5], ["R4", 2.5], ["R5", 0.12], ["R6", 1.9] , ["R7", 9.8], ["R8", 6.5], ["R9", 7.2], ["R10", 5.6]};

D2 = {["R1", 0.7], ["R2",0.8], ["R3", 1.5], ["R4", 3.1], ["R5", 0.10], ["R6", 2.0] , ["R7", 8.0], ["R8", 1.0], ["R9", 0.0], ["R10", 5.6], ["R11", 6.23]};

在这些字典中，键是字符串数据类型，值是浮点数据类型。从物理上讲，它们是两个不同时间的系统快照。D1 比 D2 早。我需要根据升序对这些字典进行独立排序。完成后将这些字典更改为 -

D1 = {["R5", 0.12], ["R1", 0.7], ["R2",0.73], ["R3", 1.5], ["R6", 1.9], ["R4", 2.5] , ["R10", 5.6], ["R8", 6.5], ["R9", 7.2], ["R7", 9.8]}; D2 = {["R9", 0.0], ["R5", 0.10], ["R1", 0.7], ["R2",0.8], ["R8", 1.0], ["R3", 1.5 ], ["R6", 2.0], ["R4", 3.1], ["R10", 5.6], ["R11", 6.23], ["R7", 8.0]};

这里将字典 D1 中元素的排序作为参考点。D1 的每个元素都与 D1 中的下一个元素相连。预计在 D2 中识别出在排序后出现在参考字典 D1 中的已破坏序列的元素。在确定向 D2 添加元素（即，密钥不存在于 D1 中但存在于 D2 中）和从 D1 中移除元素（即，密钥存在于 D1 中但不存在于 D2）时，将被忽略。即它们不应在结果中突出显示。

例如，继续上面列出的示例，参考 D1（忽略添加和删除）在 D2 中破坏序列的元素是 -

Breakers = {["R9", 0.0],["R8", 1.0]} 因为，R9 已将序列从 D1 排序字典中的第 8 个索引跳转到 D2 排序字典中的第 0 个索引。同样，R8 将序列从 D1 排序字典中的第 7 个索引跳转到 D2 排序字典中的第 4 个索引（所有索引都从 0 开始）。

注意 - ["R11", 6.23] 预计不会出现在断路器列表中，因为它是 D2 的补充。

请建议一种算法以最佳方式实现此目的，因为需要对从具有 3,256,190 条记录的数据库中获取的数据执行此操作。

编程语言不用担心，如果以逻辑为指导，我可以承担用任何语言实现它的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:31:39.010

我在 C# 中提出了这个算法。它非常适合您的示例数据。我还用 3000000 个完全随机的值进行了测试（因此检测到很多断路器），它在我的笔记本电脑（Intel Core i3 2.1GHz，64 位）上在 3.2 秒内完成。

我首先将您的数据放入临时字典中，以便在将它们放入列表之前复制粘贴您的值。当然，您的应用程序会将它们直接放入列表中。

```
class Program
{
    struct SingleValue
    {
        public string Key;
        public float Value;
        public SingleValue(string key, float value)
        {
            Key = key;
            Value = value;
        }
        public override string ToString()
        {
            return string.Format("{0}={1}", Key, Value);
        }
    }

    static void Main(string[] args)
    {
        List<SingleValue> D1 = new List<SingleValue>();
        HashSet<string> D1keys = new HashSet<string>();
        List<SingleValue> D2 = new List<SingleValue>();
#if !LARGETEST
        Dictionary<string, double> D1input = new Dictionary<string, double>() { { "R1", 0.7 }, { "R2", 0.73 }, { "R3", 1.5 }, { "R4", 2.5 }, { "R5", 0.12 }, { "R6", 1.9 }, { "R7", 9.8 }, { "R8", 6.5 }, { "R9", 7.2 }, { "R10", 5.6 } };
        Dictionary<string, double> D2input = new Dictionary<string, double>() { { "R1", 0.7 }, { "R2", 0.8 }, { "R3", 1.5 }, { "R4", 3.1 }, { "R5", 0.10 }, { "R6", 2.0 }, { "R7", 8.0 }, { "R8", 1.0 }, { "R9", 0.0 }, { "R10", 5.6 }, { "R11", 6.23 } };

        // You should directly put you values into this list... I converted them from a Dictionary so I didn't have to type over your input values :)
        foreach (KeyValuePair<string, double> kvp in D1input)
        {
            D1.Add(new SingleValue(kvp.Key, (float)kvp.Value));
            D1keys.Add(kvp.Key);
        }
        foreach (KeyValuePair<string, double> kvp in D2input)
            D2.Add(new SingleValue(kvp.Key, (float)kvp.Value));
#else
        Random ran = new Random();
        for (int i = 0; i < 3000000; i++)
        {
            D1.Add(new SingleValue(i.ToString(), (float)ran.NextDouble()));
            D1keys.Add(i.ToString());
            D2.Add(new SingleValue(i.ToString(), (float)ran.NextDouble()));
        }
#endif

        // Sort the lists
        D1.Sort(delegate(SingleValue x, SingleValue y)
        {
            if (y.Value > x.Value)
                return -1;
            else if (y.Value < x.Value)
                return 1;
            return 0;
        });
        D2.Sort(delegate(SingleValue x, SingleValue y)
        {
            if (y.Value > x.Value)
                return -1;
            else if (y.Value < x.Value)
                return 1;
            return 0;
        });

        int start = Environment.TickCount;

        Dictionary<string, float> breakers = new Dictionary<string, float>();
        List<SingleValue> additions = new List<SingleValue>();

        // Walk through D1
        IEnumerator<SingleValue> i1 = D1.GetEnumerator();
        IEnumerator<SingleValue> i2 = D2.GetEnumerator();

        while (i1.MoveNext() && i2.MoveNext())
        {
            while (breakers.ContainsKey(i1.Current.Key))
            {
                if (!i1.MoveNext())
                    break;
            }

            while (i1.Current.Key != i2.Current.Key)
            {
                if (D1keys.Contains(i2.Current.Key))
                    breakers.Add(i2.Current.Key, i2.Current.Value);
                else
                    additions.Add(i2.Current);
                if (!i2.MoveNext())
                    break;
            }
        }

        int duration = Environment.TickCount - start;
        Console.WriteLine("Lookup took {0}ms", duration);
        Console.ReadKey();
    }
} 
```

![在此处输入图像描述](../Images/e3d625d24e3d174d86d4040e31cd9b39.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:39:36.263

如果您可以在排序之前从 D2 中删除内容，那将很容易，对吧？你说你不能删除数据。但是，您可以创建一个模拟此类删除的附加数据结构（例如，向项目添加一个“已删除”位，或者如果您无法更改其类型，则创建一组“已删除”项目）。然后运行简单的算法，但要确保忽略“删除”的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:47:34.910

我一直在思考这个问题。正如您提到的 Levenshtein 距离，我假设您想通过将谁从 D2 中的位置移动到 D2 中的其他位置来获得这些元素，您将以最少的移动次数从 D2 获得 D1（忽略不存在的元素）两个序列）。

我写了一个贪心算法，它可能足以满足您的需求，但不一定在所有情况下都能给出最佳结果。老实说，我不确定，可能会在稍后（最早周末）回来检查正确性。但是，如果您真的需要对 300 万个元素的序列执行此操作，我相信在这方面做得好的算法都不会足够快，因为我看不到一个 O(n) 算法可以做到干得好，即使在一些琐碎的输入上也不会失败。

该算法尝试将每个元素移动到其预期位置，并计算移动后的误差总和（每个元素距其原始位置的距离）。导致错误总和最低的元素被宣布为断路器并移动。重复此过程，直到序列恢复到 D1。

我认为它具有 O(n^3) 复杂性，虽然元素有时需要移动多次，所以它可能是 O(n^4) 最坏的情况，我不确定，但在 100 万个具有 50 个元素的随机示例中外循环运行的最大次数是 51（n^4 意味着它可以是 2500，不知何故，我在所有的百万次测试中都很幸运）。只有键，没有值。这是因为这些值在此步骤中无关紧要，因此存储它们没有意义。

编辑：我为此写了一个反例生成器，实际上它并不总是最优的。断路器越多，获得最佳解决方案的机会就越小。例如，在 1000 个元素和 50 个随机移动的元素中，当最优解最多为 50 个时，通常会找到一组 55-60 个断路器。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Breakers
{
    class Program
    {
        static void Main(string[] args)
        {
            //test case 1
            //List<string> L1 = new List<string> { "R5", "R1", "R2", "R3", "R6", "R4", "R10", "R8", "R9", "R7" };
            //List<string> L2 = new List<string> { "R9", "R5", "R1", "R2", "R8", "R3", "R6", "R4", "R10", "R11", "R7" };
            //GetBreakers<string>(L1, L2);

            //test case 2
            //List<string> L1 = new List<string> { "R5", "R1", "R2", "R3", "R6", "R4", "R10", "R8", "R9", "R7" };
            //List<string> L2 = new List<string> { "R5", "R9", "R1", "R6", "R2", "R3", "R4", "R10", "R8", "R7" };
            //GetBreakers<string>(L1, L2);

            //test case 3
            List<int> L1 = new List<int>();
            List<int> L2 = new List<int>();
            Random r = new Random();
            int n = 100;
            for (int i = 0; i < n; i++)
            {
                L1.Add(i);
                L2.Add(i);
            }
            for (int i = 0; i < 5; i++) // number of random moves, this is the upper bound of the optimal solution
            {
                int a = r.Next() % n;
                int b = r.Next() % n;
                if (a == b)
                {
                    i--;
                    continue;
                }
                int x = L2[a];
                Console.WriteLine(x);
                L2.RemoveAt(a);
                L2.Insert(b, x);
            }
            for (int i = 0; i < L2.Count; i++) Console.Write(L2[i]);
            Console.WriteLine();
            GetBreakers<int>(L1, L2);
        }

        static void GetBreakers<T>(List<T> L1, List<T> L2)
        {
            Dictionary<T, int> Appearances = new Dictionary<T, int>();
            for (int i = 0; i < L1.Count; i++) Appearances[L1[i]] = 1;
            for (int i = 0; i < L2.Count; i++) if (Appearances.ContainsKey(L2[i])) Appearances[L2[i]] = 2;
            for (int i = L1.Count - 1; i >= 0; i--) if (!(Appearances.ContainsKey(L1[i]) && Appearances[L1[i]] == 2)) L1.RemoveAt(i);
            for (int i = L2.Count - 1; i >= 0; i--) if (!(Appearances.ContainsKey(L2[i]) && Appearances[L2[i]] == 2)) L2.RemoveAt(i);
            Dictionary<T, int> IndInL1 = new Dictionary<T, int>();
            for (int i = 0; i < L1.Count; i++) IndInL1[L1[i]] = i;

            Dictionary<T, int> Breakers = new Dictionary<T, int>();

            int steps = 0;
            int me = 0;
            while (true)
            {
                steps++;
                int minError = int.MaxValue;
                int minErrorIndex = -1;

                for (int from = 0; from < L2.Count; from++)
                {
                    T x = L2[from];
                    int to = IndInL1[x];
                    if (from == to) continue;

                    L2.RemoveAt(from);
                    L2.Insert(to, x);

                    int error = 0;
                    for (int i = 0; i < L2.Count; i++)
                        error += Math.Abs((i - IndInL1[L2[i]]));

                    L2.RemoveAt(to);
                    L2.Insert(from, x);

                    if (error < minError)
                    {
                        minError = error;
                        minErrorIndex = from;
                    }
                }

                if (minErrorIndex == -1) break;

                T breaker = L2[minErrorIndex];
                int breakerOriginalPosition = IndInL1[breaker];

                L2.RemoveAt(minErrorIndex);
                L2.Insert(breakerOriginalPosition, breaker);

                Breakers[breaker] = 1;

                me = minError;
            }
            Console.WriteLine("Breakers: " + Breakers.Count + " Steps: " + steps);
            foreach (KeyValuePair<T, int> p in Breakers)
                Console.WriteLine(p.Key);
            Console.ReadLine();
        }
    }
} 
```

# python - 如何在 Django 查询集中进行小于或等于过滤？

> ID：10040143
> 
> 赞同：228
> 
> 时间：2012-04-06T06:49:32.237
> 
> 标签：python, django, django-queryset

我正在尝试通过每个用户配置文件中称为配置文件的自定义字段过滤用户。该字段称为级别，是一个介于 0-3 之间的整数。

如果我使用 equals 过滤，我会按预期获得具有所选级别的用户列表：

```
user_list = User.objects.filter(userprofile__level = 0) 
```

当我尝试使用小于进行过滤时：

```
user_list = User.objects.filter(userprofile__level < 3) 
```

我得到错误：

> 未定义全局名称“userprofile__level”

有没有办法通过 < 或 > 进行过滤，或者我是在吠叫错误的树。

* * *

## 回答 #1

> 赞同：438
> 
> 时间：2012-04-06T06:52:03.120

小于或等于：

```
User.objects.filter(userprofile__level__lte=0) 
```

大于或等于：

```
User.objects.filter(userprofile__level__gte=0) 
```

同样，`lt`对于小于和`gt`大于。[您可以在文档](https://docs.djangoproject.com/en/stable/ref/models/querysets/)中找到它们。

# java - 欧洲/莫斯科时区 1916 年 7 月 3 日 Joda DateTime 的奇数结果

> ID：10040149
> 
> 赞同：2
> 
> 时间：2012-04-06T06:50:17.200
> 
> 标签：java, datetime, jodatime

Joda 不允许在指向 1916 年 7 月 3 日的欧洲/莫斯科时区创建 DateTime 实例：

```
DateTimeZone dateTimeZone = DateTimeZone.forTimeZone(TimeZone.getTimeZone("Europe/Moscow"));
Chronology internalCalendar = GJChronology.getInstance(dateTimeZone);
DateTime dt = new org.joda.time.DateTime(1916, 7, 3, 0, 0, 0, 0, internalCalendar);
// Exception thrown:
// java.lang.IllegalArgumentException: Illegal instant due to time zone offset transition: 1916-07-02T21:30:00.000 
```

从 00:00:00 到 00:00:47 的确切时间段给出了例外。

AFAICS，俄罗斯当天没有特殊的时移事件。最接近的日期是 1917 年 7 月 1 日，夏令时首次引入。

这是 Joda 的错误还是我有什么问题？)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:36:29.813

[在这里](http://www.timeanddate.com/worldclock/clockchange.html?n=166&year=1916)，您可以看到 1916 年 7 月 3 日星期一 0:00:00/0:00:48 时区发生了^(变化)。从 0:00:00 到 0:00:47 的 48 秒被跳过。

# html - 如何嵌入 swf 文件并使用 HTML 将其链接到另一个页面？

> ID：10040150
> 
> 赞同：0
> 
> 时间：2012-04-06T06:50:22.290
> 
> 标签：html

我用了

```
<object type="application/x-shockwave-flash" onmouseup="document.location='http://www.pageopensafterclick.com'" height=50 width=150>
  <param name="wmode" value="transparent" />
  <param name="movie" value="myswffile.swf" />
</object> 
```

嵌入我的 swf 文件并将其链接到另一个页面，但它仅适用于 Chrome、IE、opera，但不适用于 Firefox。有人可以告诉我一个适用于所有浏览器的代码。我会很感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:02:55.233

```
<div onmousedown="window.location.href='new_location'">
    <object>
        <param name="movie" value="3.swf">
        <param name="wmode" value="transparent" />
        <embed wmode=transparent allowfullscreen="true" allowscriptaccess="always" src="3.swf"></embed>
    </object>
</div> 
```

# c# - 无法加载文件或程序集

> ID：10040151
> 
> 赞同：0
> 
> 时间：2012-04-06T06:50:35.830
> 
> 标签：c#, winforms

当我尝试加载 pdf 文件时，我得到以下信息“无法加载文件或程序集'Interop.Acrobat，版本 = 1.1.0.0，文化 = 中性，PublicKeyToken = null'或其依赖项之一。尝试加载格式不正确的程序。” 包图像格式异常未处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:52:45.010

当您尝试将 64 位图像加载到 32 位进程时出现错误图像格式错误的最常见情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:39:20.207

当您尝试在 63 位进程中加载​​ 32 位 dll 时会发生这种情况，反之亦然，如 munissor 所说。您可以使用 PESnoop 来确定图像是 32 位还是 64 位。

从[http://www.prestosoft.com/download/plugins/PESnoop.zip获取](http://www.prestosoft.com/download/plugins/PESnoop.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:08:06.893

您是在 64 位机器上开发程序吗？如果是，请允许您的应用程序也接受 32 位汇编。

如果它是托管在 IIS 上的 Web 程序，您可以允许来自应用程序池的 32 位程序集。如果它是一个控制台应用程序，您可以在程序集级别进行更改。

这是非常常见的错误，实际上将通过上述步骤修复。

希望它能帮助你解决你的问题。

# perl - 如何使用 Perl 组织这些数据？

> ID：10040152
> 
> 赞同：2
> 
> 时间：2012-04-06T06:50:43.233
> 
> 标签：perl

我是 Perl 的新手。我有一个输入文件，例如：

```
a 7 5
b 8 2    
a 3 2   
b 4 1    
c 6 1 
```

我怎样才能得到像这样的输出

`column_1_val`, `number_occurrence_column_1`, `sum_of_column_2`,`sum_of_column_3`

例如

```
a 2 10 7
b 2 12 3
c 1 6 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:03:32.363

下面的程序是一个可能的解决方案。我使用了`DATA`文件句柄，而您可能需要打开一个外部文件并使用其中的句柄。

```
use strict;
use warnings;

use feature 'say';

my %data;

while (<DATA>) {
  my ($key, @vals) = split;
  $data{$key}[0]++;
  my $i;
  $data{$key}[++$i] += $_ for @vals;
}

say join ' ', $_, @{$data{$_}} for sort keys %data;

__DATA__
a 7 5
b 8 2    
a 3 2   
b 4 1    
c 6 1 
```

**输出**

```
a 2 10 7
b 2 12 3
c 1 6 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:01:54.857

这将类似于（未经测试）：

```
while (<>) {
    if (m/(\w+)\s+(\d+)\s+(\d+)/) {
        ($n, $r1, $r2) = ($1, $2, $3);

        $nr{$n}++;
        $r1{$n} += $r1;
        $r2{$n} += $r2;
    }
}

for $n (sort keys %nr) {

    print "$n $nr{$n} $r1{$n} $r2{$n}\n";
} 
```

这是一种非常快速和肮脏的方式来做你所描述的事情，但它应该让你上路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:38:18.763

略有不同的做法：

我的%记录；

```
while ( <> ) {
    my @cols = split ' ';
    my $rec  = $records{ $cols[0] } ||= {};
    $rec->{number_occurrence_column_1}++;
    $rec->{sum_of_column_2} += $cols[1];
    $rec->{sum_of_column_3} += $cols[2];
}

foreach my $rec ( map { { col1 => $_, %{ $records{ $_ } } } 
          sort keys %records 
        ) { 
    print join( "\t"
              , @$rec{ qw<col1 number_occurrence_column_1 
                          sum_of_column_2 sum_of_column_3
                         > 
                     } 
              ), "\n"
       ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T07:04:36.563

即使我不知道 perl。但如果你关心结果。下面是 awk 中的解决方案。它可能/可能对你没有帮助。但如果你需要它：

```
awk '{c[$1]++;a[$1]=a[$1]+$2;b[$1]+=$3}END{for(i in a)print i,c[i],a[i],b[i]}' file3 
```

# ios - 对于 iOS 绘画应用程序，它是否必须使用 Quartz 2D 或 OpenGL？

> ID：10040153
> 
> 赞同：1
> 
> 时间：2012-04-06T06:50:43.937
> 
> 标签：ios, opengl-es, paint, quartz-2d, quartz-core

我正在尝试实现一个具有画笔纹理和混合的绘画应用程序，类似于油画。我发现尽管 Quartz 2D 相对容易上手，但我发现很难实现笔触纹理/混合的想法。我天真地尝试破解阴影，它看起来“还可以”，但性能很糟糕。我有一种感觉，如果我尝试使用位图图像进行绘图，我会遇到类似的性能问题，但我不*知道*就是这样。同时，我看到的唯一替代方案是 OpenGL，感觉有点矫枉过正，也很吓人。我看过 GLPaint，但我不能声称理解它的某些部分。进一步对我不利的是，我对 C 的了解非常有限，而且真的感觉如果我更好地理解 C，我可能也会更好地理解适用于 iOS 的 OpenGL ES。

基本上，我想知道：鉴于我需要为 iOS 绘画生成“油画”类型的效果，我是不是因为 Quartz 2D 的性能不佳，还是学习了巨大而可怕的 OpenGL 框架？是否有任何框架可以为像我这样的凡人“包装”OpenGL 功能？

或者，还有其他一些我在 Quartz 中不知道的实现笔触纹理和混合的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:19:38.400

iOS 5 的 GLKit 会为你包装很多 OpenGL 功能，但是很难找到一个“油画库”，因为它非常具体。如果你想处理图形，我想你迟早要处理 OpenGL。这似乎令人生畏，但如果你读过一本关于它的好书，你就会开始更好地理解它。

但是，请确保先用尽 Quartz 的所有可能性。或许你可以找到最耗时的函数，然后再问一个关于如何提高效率的问题。

不过，要回答主要问题，“是的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:24:39.407

然而它主要专注于游戏开发，有一个名为[cocos2d](http://www.cocos2d-iphone.org/)的流行框架，它围绕 OpenGL 并为 2D gfx 开发提供简单的 API。如果您决定继续使用 OpenGL ES，我发现[本教程](http://iphonedevelopment.blogspot.it/2009/05/opengl-es-from-ground-up-table-of.html)非常出色且易于理解，即使它专注于 3D。

# c# - iTextsharp 横向文档

> ID：10040161
> 
> 赞同：26
> 
> 时间：2012-04-06T06:51:19.910
> 
> 标签：c#, itextsharp

我正在尝试使用 iTextSharp 创建横向 PDF，但它仍然显示纵向。我正在使用以下代码进行旋转：

```
Document document = new Document(PageSize.A4, 0, 0, 150, 20);
FileStream msReport = new FileStream(Server.MapPath("~/PDFS/") + "Sample1.pdf", FileMode.Create);

try
{
    // creation of the different writers
    PdfWriter writer = PdfWriter.GetInstance(document, msReport);

    document.Open();

    PdfPTable PdfTable = new PdfPTable(1);
    PdfTable.SpacingBefore = 30f;

    PdfPCell PdfPCell = null;

    Font fontCategoryheader = new Font(Font.HELVETICA, 10f, Font.BOLD, Color.BLACK);

    for (int i = 0; i < 20; i++)
    {
        PdfPCell = new PdfPCell(new Phrase(new Chunk("Sales Manager: ", fontCategoryheader)));
        PdfPCell.BorderWidth = 0;
        PdfPCell.HorizontalAlignment = Element.ALIGN_LEFT;

        if (i % 2 == 0)
            PdfPCell.BackgroundColor = Color.LIGHT_GRAY;

        PdfPCell.PaddingBottom = 5f;
        PdfPCell.PaddingLeft = 2f;
        PdfPCell.PaddingTop = 4f;
        PdfPCell.PaddingRight = 4f;
        PdfTable.AddCell(PdfPCell);
    }

    document.Add(PdfTable);
    document.NewPage();

}
catch (Exception ex)
{
    Console.Error.WriteLine(ex.Message);
}

finally
{
    // we close the document 
    document.Close();
} 
```

请提出解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-06T07:07:28.283

试试这个

```
Document Doc = new Document(new Rectangle(288f, 144f), 10, 10, 10, 10);
Doc.SetPageSize(iTextSharp.text.PageSize.A4.Rotate()); 
```

您可能还需要它来将表格扩展到最大宽度。

```
var _pdf_table = new PdfPTable(2); // table with two  columns
PdfPCell hc = new PdfPCell();
_pdf_table.WidthPercentage = 100; //table width to 100per
_pdf_table.SetTotalWidth(new float[] { 25, iTextSharp.text.PageSize.A4.Rotate().Width - 25 });// width of each column 
```

您必须确保在设置页面大小时在调用`Doc.Open();`

问候。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-16T08:29:53.830

无需初始化文档并重置页面大小...

```
Document doc = new Document(iTextSharp.text.PageSize.A4.Rotate(), 10, 10, 10, 10); 
```

...会成功的。

(4.1.6.0)

# grails - 为什么在测试我的控制器时出现无法转换对象“null”错误？

> ID：10040162
> 
> 赞同：0
> 
> 时间：2012-04-06T06:51:20.873
> 
> 标签：grails, spock

我有一个这样的控制器：

```
 def unCompletedTasks() { 
      def user = User.get(springSecurityService.principal.id) 
      def choice = params.managersProject 
      params.max = Math.min(params.max ? params.int('max') : 10,100) 
      def search = Tasks.createCriteria().list(max: params.max as Integer, offset: params.offset as Integer, order: params.order as String, sort : params.sort) { 
            and { 
                  project { 
                     like('name',"${choice}") 
                  } 
                  eq('completed',false) 
                  lt('endDate',new Date().clearTime()) 
            } 
      } 

      [tasksInstanceList : search, tasksInstanceTotal: search.getTotalCount() ] 
    } 
```

我想测试一下。我在 Spock 中写了一个测试规范，如下所示：

```
 def 'user should be displayed unCompletedTasks' () { 

            setup: "set the required objects" 
            def tasksController = new TasksController() 
            tasksController.springSecurityService = [principal: [id:tasksInstance.id]] 
            tasksController.params.managersProject = "testing" 
           //other codings goes here 

            when: 
            def model = tasksController.unCompletedTasks() 

            then: 
            model.tasksInstanceTotal == 1 

            where: 
            //required fields 
    } 
```

当我运行时，我收到这样的错误：

```
 user should be displayed unCompletedTasks(mnm.schedule.TasksSpec) 
|  org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'null' with class 'org.codehaus.groovy.runtime.NullObject' to class 'java.lang.Integer' 
        at mnm.schedule.TasksController.unCompletedTasks(TasksController.groovy:39) 
        at mnm.schedule.TasksSpec.user should be displayed unCompletedTasks(TasksSpec.groovy:59) 
```

我不知道我哪里错了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:30:22.400

听起来[与使用 Spock 投射空对象的问题中讨论的问题](https://stackoverflow.com/questions/11756297/problems-casting-a-null-object-with-spock)相同。解决方案是升级到 Grails 2.0.2。

# nlp - 将一阶逻辑表达式映射到数据库条目（从 FOL 表达式中提取信息）

> ID：10040169
> 
> 赞同：4
> 
> 时间：2012-04-06T06:52:44.957
> 
> 标签：nlp, nltk, context-free-grammar, first-order-logic

我正在构建一个仅限于医疗查询的**问答系统。**我使用一阶逻辑（FOL）来表示提出的问题。我已经设法使用[**NLTK BOOK**](http://nltk.googlecode.com/svn/trunk/doc/book/ch10.html#sec-evaluating-english-sentences)概述的程序得出了 FOL 表达式。

例如，对于这样的问题：

> 糖尿病的症状是什么？

，我得到了一个看起来像这样的表示：

> WHQ(list,exists y.(symptoms(y) & referTo(y,diabetes)))

这里，**WHQ**表示问题是 What question；**list**表示输出必须是某种值列表；**y**是映射到**症状**的一些值（变量） 。

我的问题是，

1.  这种方法（或表示）是否有效？

2.  考虑到 FOL 表达式是有效的，我将如何“以编程方式”映射此 FOL 表达式以从数据库中检索**答案**？

任何额外的见解将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:44:40.383

有一篇[论文](http://dlsu.academia.edu/KenstonChoi/Papers/1558781/A_Question_Answering_System_that_Performs_Evaluations_and_Comparisons_on_Structured_Data_for_Business_Intelligence_in_Biotechnology)（合着）讨论了同样的问题。表示是与 FOL 相关的 DRS。然后将表示转换为 SQL。一些谓词也必须被表示。虽然本文侧重于比较和评估，但也涵盖了事实性问题。

# asp.net-mvc - 为什么我会使用 jQuery Mobile 和 Razor 获得这个 Javascript HIERARCHY_REQUEST_ERR？

> ID：10040171
> 
> 赞同：1
> 
> 时间：2012-04-06T06:52:49.420
> 
> 标签：asp.net-mvc, jquery-mobile, razor

这里茫然和困惑......有问题的字段是一个布尔值，我希望 UI 是一个复选框（或一个是/否或开/关 jQuery 滑块）。每次我尝试添加此复选框输入时，我最终都会得到一个

```
Microsoft JScript runtime error: DOM Exception: HIERARCHY_REQUEST_ERR (3) 
```

错误。

这是 HTML+Razor

```
 <div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
       <legend>End Game:</legend>
       @Html.TextBoxFor(model => model.HandicapSession.WinByTwo, new { @type="checkbox" })
       <label for="WinByTwo">Win By Two?</label>
    </fieldset>
</div> 
```

这是生成的 HTML：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
       <legend>End Game:</legend>
       <input data-val="true" data-val-required="The WinByTwo field is required." id="HandicapSession_WinByTwo" name="HandicapSession.WinByTwo" type="checkbox" value="False" />
       <label for="WinByTwo">Win By Two?</label>
    </fieldset>
</div> 
```

显然，当 jQuery Mobile 创建其复选框小部件时存在冲突或重叠的 id 时会发生此错误

```
$.widget( "mobile.checkboxradio", $.mobile.widget, { ...etc... 
```

但是如何使用 HTML 和/或 razor 使一个简单的复选框在 jQuery Mobile 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:18:54.253

如果 jQuery Mobile 的问题确实是 HTML 标记的重复名称，那么您必须`input type=checkbox`在 HTML 中呈现您自己的标记，因为 ASP.NET MVC`Html.CheckBoxFor`帮助器方法将呈现`input type=hidden`具有重复名称值的标记。请参阅[此帖子](https://stackoverflow.com/questions/2860940/asp-net-mvcwhy-does-the-checkboxfor-render-an-additional-input-tag-and-how-can)进行讨论。

隐藏的表单标签在那里，因为如果您向服务器提交未选中的复选框，则该字段的表单值不包括在内。因此包含一个隐藏`input`标签，`value=false`因此如果未选中该复选框，`false`则仍会提交该值。MVC 中的模型绑定过程将为您过滤掉重复的表单值，但如果您遇到重复名称属性的客户端问题，则必须在 HTML 中呈现您自己的复选框和标签，然后处理事实上，`HandicapSession.WinByTwo`当未选中该框时，不会为该属性提交任何值。如果没有`HandicapSession`提交其他属性，则整个对象将为空。

因此，您可以手动创建复选框输入并仍然根据需要从模型中加载`checked`和`value`属性，但您可能会遇到模型绑定问题，即使选中该框，WinByTwo 的值仍然为 false。

另请注意，`for`您的属性`label`与示例中复选框的 ID 不匹配。你需要完整的`HandicapSession_WinByTwo`.

以下手动创建输入标签：

```
<link rel="stylesheet"  href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />  
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>

<div data-role="page">
    <div data-role="content"> 
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
               <legend>End Game:</legend>
               <input type="checkbox" id="HandicapSession_WinByTwo" name="HandicapSession.WinByTwo" @(Model.HandicapSession.WinByTwo ? "checked=checked" : "") value="@(Model.HandicapSession.WinByTwo.ToString().ToLower())" />
               <label for="HandicapSession_WinByTwo">Win By Two?</label>
            </fieldset>
        </div>
    </div>
</div> 
```

加载时选中的复选框的 HTML 输出如下：

```
<div data-role="page">
    <div data-role="content"> 
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
               <legend>End Game:</legend>
               <input type="checkbox" id="HandicapSession_WinByTwo" name="HandicapSession.WinByTwo" checked=checked value="true" />
               <label for="HandicapSession_WinByTwo">Win By Two?</label>
            </fieldset>
        </div>
    </div>
</div> 
```

最好的办法就是使用 MVC 辅助方法，所以我不确定您是否尝试过以下方法。默认`Html.CheckBoxFor`和`Html.LabelFor`辅助方法适用于 jQuery Mobile 1.0a4.1 或 1.1.0 就好了。以下对我有用：

```
<link rel="stylesheet"  href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />  
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>

<div data-role="page">
    <div data-role="content"> 
        @using (Html.BeginForm())
        { 
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup">
                   <legend>End Game:</legend>
                   @Html.CheckBoxFor(m => m.HandicapSession.WinByTwo)
                   @Html.LabelFor(m => m.HandicapSession.WinByTwo, "Win By Two?")

                   <input type="submit" id="SubmitForm" value="submit" />
                </fieldset>
            </div>
        }
    </div>
</div> 
```

这将产生 HTML 输出：

```
<div data-role="page">
    <div data-role="content"> 
        <form action="/Mobile/Mobile" method="post">            
             <div data-role="fieldcontain">
                <fieldset data-role="controlgroup">
                   <legend>End Game:</legend>

                   <input checked="checked" data-val="true" data-val-required="The WinByTwo field is required." id="HandicapSession_WinByTwo" name="HandicapSession.WinByTwo" type="checkbox" value="true" />
                   <input name="HandicapSession.WinByTwo" type="hidden" value="false" />
                   <label for="HandicapSession_WinByTwo">Win By Two?</label>

                   <input type="submit" id="SubmitForm" value="submit" />
                </fieldset>
            </div>
        </form>    
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:59:45.420

修复可能非常简单。

**选择 1**：去焦土并关闭基于 Ajax 的导航。这将确保唯一 ID 保持唯一。这将确保您再也不会遇到此问题。唯一的缺点是你失去了从页面到页面的非常小的转换（*有人称之为 whambulance*）。您可以通过设置[全局配置脚本](http://jquerymobile.com/demos/1.1.0-rc.2/docs/api/globalconfig.html)来做到这一点...

```
script src="jquery.js"
script src="custom-scripting.js"
script src="jquery-mobile.js" 
```

在里面你会覆盖ajax设置来禁用它们......

```
$(document).bind("mobileinit", function(){
    $.mobile.ajaxEnabled = false;
}); 
```

**选择 2：**调用需要此唯一性的页面，其链接具有的属性`rel='external'`或`target='_black'`将在不禁用所有基于 ajax 的导航的情况下完成相同的事情。如果您是作为表单发布的结果到达该页面，则可以使用`data-ajax='false'`表单标签来完成干净的加载。

# vba - 连接备用列

> ID：10040173
> 
> 赞同：2
> 
> 时间：2012-04-06T06:53:19.963
> 
> 标签：vba, excel

我有 10,000 行和无限的列数据。相邻列中的两个参数在 13 个不需要的列之后重复。

我想连接由空格分隔的行的这些相邻列

例如：

连接(B2,C2,"",P2,Q2,"",AC,AD,"",....)

但我不知道数据存在于哪一列。

你能建议我一个宏，它将数据连接到一行的一个单元格中的空白列，并且前 10,000 行继续相同。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:08:44.797

First off, are all the rows terminating at the same column? i.e. does every row have data in column AD but not AE?

If the answer to the above is 'yes', then you'll probably want to take a look at:

```
Range.End() 
```

which is used like:

```
YourSheet.Range(YourRange).End(xlToRight).Column 
```

([see here for more info](http://msdn.microsoft.com/en-us/library/aa214585%28v=office.11%29.aspx))

This will return either

*   the **last** column with data (when the starting cell contains data)

or

*   the **first** column with data (when the starting cell is empty).
    *   **not** the last column *without* data!

Based on your example in the question, your ranges probably start in Column B, P, AC, etc.

If the answer to the above is 'no', then you can use similar functionality, but you'll have to loop through each row...

# jquery - 如何让这个 jQuery 代码更精简、更简洁、更干净

> ID：10040175
> 
> 赞同：0
> 
> 时间：2012-04-06T06:53:37.613
> 
> 标签：jquery, optimization

我目前正在为我目前正在前端处理的网站加载大量 jQuery 函数。我不是一个真正的 jQuery 'ninja'（不过我终于开始阅读 sitepoint 书了）所以我确信这段代码可能写得不好，可能会更干净、更简洁、更精简。

这是代码 -

```
// add hasJS to html to allow for CSS fallbacks

jQuery(function($) {
$('html').addClass('hasJS');
});

// ENDS

// show/hide/kill the upload files modal box 

$('.upload').click(function(){
$('.uploader').toggle();
});

$('.creategroup').click(function(){
$('.createnewgroup').toggle();
return false;  
});

$('.adduser').click(function(){
$('.addnewuser').toggle();
return false;
});

 $('#tap-menu').click(function() {
$('#left-column, #settings, #ortibi, #userprofile').toggle();
 }); 

$('.cancel').click(function(){
$('.uploader, .shareform').hide();
  });

$('.connection-type').click(function(){
$('.connectform').toggle();
  });

$('.shareit').click(function(){
$('.shareform').show();
});
$(function() {
    $('article .folder-items').hide();    

$("p.folder").click(function () {
      $(this).parent().next(".folder-items").slideToggle("slow");
});
});
 $(document).ready(function(){

    $('#scrollbar1').tinyscrollbar();

});

// ENDS

$('textarea#txtarea_Message"').autoResize({
// On resize:
onResize : function() {
    $(this).css({opacity:0.8});
},
// After resize:
animateCallback : function() {
    $(this).css({opacity:1});
},
// Quite slow animation:
animateDuration : 300,
// More extra space:
extraSpace : 40
});

$("input:checkbox").uniform();
$("#check1").live("click", function(){
var two = $("#check2").attr("checked", this.checked);
$.uniform.update(two);
}); 
```

现在我可能在这里做错了很多。我能做些什么来改进这段代码？所有帮助表示赞赏:o)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:19:22.650

1.  Jquery [live](http://api.jquery.com/live/)从 1.7 版开始被弃用，[工作](http://api.jquery.com/on/) /性能更好

2.  正如 JT Smith 评论的那样——你有多种格式的“文档就绪”脚本——

    您可以在“文档准备就绪”电话中将所有这些包装成一个

    `$(document).ready{function() {} }`, `jquery(function() { }`, 和 `$(function() { }` - AFAIK 所有这些都是相同的并且工作相同。你可以坚持单一的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:28:57.927

像这样的东西？

```
// add hasJS to html to allow for CSS fallbacks
jQuery(function ($) {
    $('html').addClass('hasJS');

    $('article .folder-items').hide();
    $("p.folder").click(function () { $(this).parent().next(".folder-items").slideToggle("slow"); });

    $('#scrollbar1').tinyscrollbar();
});

// ENDS

// show/hide/kill the upload files modal box

$('.upload').click(function () { $('.uploader').toggle(); });

$('.creategroup').click(function (e) { e.preventDefault(); $('.createnewgroup').toggle(); });

$('.adduser').click(function (e) { e.preventDefault(); $('.addnewuser').toggle(); });

$('#tap-menu').click(function () { $('#left-column, #settings, #ortibi, #userprofile').toggle(); });

$('.cancel').click(function () { $('.uploader, .shareform').hide(); });

$('.connection-type').click(function () { $('.connectform').toggle(); });

$('.shareit').click(function () { $('.shareform').show(); });

$('textarea#txtarea_Message"').autoResize({
    // On resize:
    onResize: function () { $(this).css({ opacity: 0.8 }); },
    // After resize:
    animateCallback: function () { $(this).css({ opacity: 1 }); },
    // Quite slow animation:
    animateDuration: 300,
    // More extra space:
    extraSpace: 40
});

$("input:checkbox").uniform();
$("#check1").bind("click", function () {
    var two = $("#check2").attr("checked", this.checked);
    $.uniform.update(two);
}); 
```

# asp.net - 下拉列表导致完全回发并出现奇怪的错误

> ID：10040180
> 
> 赞同：1
> 
> 时间：2012-04-06T06:54:06.500
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit

我在更新面板中使用了一个下拉列表。我设置了所需的条件，但它仍然导致完整的回发。我搜索并尝试了我得到的所有东西，但它仍然坚持错误。

当我更改选定的索引时，它会导致整页发布并显示错误（由火灾错误）

`Sys.WebForms.PageRequestManagerServerErrorException:` `Sys.WebForms.PageRequestManagerServerErrorException: Invalid postback or callback argument` `Event validation is enabled using <pages enableEventValidation="true"/> in` `configuration or <%@ Page EnableEventValidation="true" %> in a page. For security purposes,` `this feature verifies that arguments to postback or callback events originate` `from the server control that originally rendered them. If the data is valid and expected,` `use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.' when calling method`：`[nsIDOMEventListener::handleEvent]`

这是我的代码

* * *

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" 
 runat="server" EnablePageMethods="true" EnablePartialRendering="true">
 </asp:ToolkitScriptManager> 
```

**更新面板代码**

* * *

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true"  >
                    <ContentTemplate>
                        <table cellpadding="0" cellspacing="0" width="100%" height="100%">
                            <tr>
                                <td>
                                    <asp:DropDownList ID="DDLCity" runat="server" CausesValidation="false" AutoPostBack="True" OnSelectedIndexChanged="DDLCity_SelectedIndexChanged"
                                        Width="200px">
                                    </asp:DropDownList>
                                </td>
                                <td>
                                    <asp:Label ID="Label19" runat="server" Text="Pin Code"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox ID="TxtPinCode" runat="server" Height="20px" ReadOnly="True" ToolTip="Pin Code"
                                        Width="100px"></asp:TextBox>
                                    <asp:TextBoxWatermarkExtender ID="TxtPinCode_TextBoxWatermarkExtender" runat="server"
                                        Enabled="True" TargetControlID="TxtPinCode" WatermarkCssClass="WaterMark" WatermarkText="XXXXXX">
                                    </asp:TextBoxWatermarkExtender>
                                    <asp:RequiredFieldValidator ID="RFVINCODE" runat="server" ControlToValidate="txtarea"
                                        ErrorMessage="Pin Code Required" Text="*">*</asp:RequiredFieldValidator>
                                </td>
                                <td>
                                    <asp:Label ID="Label17" runat="server" Text="State"></asp:Label>
                                </td>
                                <td>
                                    <asp:DropDownList ID="ddlstate" runat="server" Height="24px" OnSelectedIndexChanged="ddlstate_SelectedIndexChanged"
                                        ToolTip="State" Width="200px">
                                        <asp:ListItem>State</asp:ListItem>
                                    </asp:DropDownList>
                                </td>
                            </tr>
                        </table>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="DDLCity" EventName="SelectedIndexChanged" />
                    </Triggers>
                </asp:UpdatePanel> 
```

请帮我解决这个问题

我也尝试过这种情况，但这也不起作用。

```
protected override void Render(HtmlTextWriter writer)
    {
        ClientScript.RegisterForEventValidation(DDLCity.UniqueID.ToString());
        ClientScript.RegisterForEventValidation(txtarea.UniqueID.ToString());
        ClientScript.RegisterForEventValidation(ddlstate.UniqueID.ToString());

        base.Render(writer);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:32:23.333

添加`Location Tag`此页面的设置，该设置将授予执行事件的权限`asynchronously`。

欲了解更多信息，请**[在此处](https://stackoverflow.com/a/2016768/726802)**和**[此处查看](http://msdn.microsoft.com/en-us/library/6hbkh9s7.aspx)**

# java - 我如何使用“对象类”来调用java中用户定义类的方法

> ID：10040190
> 
> 赞同：2
> 
> 时间：2012-04-06T06:55:19.290
> 
> 标签：java

在这两个类中，我从 main 方法的 TestClass 的 getName 方法中传递了一个 TestClassTwo 对象，现在我想使用对象 obj 调用 getTwoName 方法。有人可以帮我解决这个问题。谢谢 // 下面是代码 // class1

```
package Test;

public class TestClassTwo {

    public static String getTwoName()
    {
        return "2nd";
    }

} 
```

// 类 2

包装测试；

公共类TestClass {

```
public void getName(Object obj) throws InstantiationException, IllegalAccessException, ClassNotFoundException
{
    //  call getTwoName method of TestClassTwo using obj object
}
public static void main(String args[]) throws InstantiationException, IllegalAccessException, ClassNotFoundException
{
    TestClass tc=new TestClass();
    tc.getName(new TestClassTwo());
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:57:19.627

将`Object`（超类）转换为`TestClassTwo`（子类）：

```
String name = ((TestClassTwo) obj).getTwoName(); 
```

或者：

```
TestClassTwo temp = (TestClassTwo) obj
String name = temp.getTwoName(); 
```

请注意，使用实例调用静态方法是没有用的。相反，使用类名来调用静态方法：

```
String name = TestClassTwo.getTwoName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:59:34.720

为什么？您不需要使用任何对象，因为该方法是静态的。使用对象调用此方法是徒劳的。就写吧`TestClassTwo.getTwoName()`。

[我强烈怀疑你的问题有问题。]

如果您确实需要通过该类的对象访问未知类的静态方法，您可以这样做：

```
String twoName = obj.getClass().getMethod("getTwoName").invoke(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:00:40.500

正如其他人所说，如果您打算静态访问该方法，则不需要实例，因此根本不需要参数`TestClass#getName`。但是，如果您确实希望它成为实例方法，则可以执行以下三件事之一：

**`TestClassTwo` **1）输入** **类型**`TestClass#getName`**：****

 **```
public class TestClass {
    public void getName(TestClassTwo obj) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        String name = obj.getTwoName();
        // Do something with 'name'
    }
    public static void main(String args[]) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        TestClass tc=new TestClass();
        tc.getName(new TestClassTwo());
    }
} 
```

* * *

**2) 将对象转换为 的实例** `TestClassTwo`**，检查类型：**

```
public class TestClass {
    public void getName(Object obj) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        if (obj instanceof TestClassTwo) {
            TestClassTwo two = (TestClassTwo) obj;
            String name = two.getTwoName();
            // Do something with 'name'
        } else {
            // Handle failure accordingly (throw an exception, log an error, do nothing, etc.)
        }
    }
    public static void main(String args[]) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        TestClass tc=new TestClass();
        tc.getName(new TestClassTwo());
    }
} 
```

* * *

**3）如果你想允许其他类有一个** `getTwoName()` **功能，定义一个接口并将该接口的一个实例作为参数** `TestClass#getName`**：**

```
public interface HasTwoName {
    public String getTwoName();
}

public class TestClassTwo implements HasTwoName {
    @Override
    public String getTwoName() {
        return "2nd";
    }
}

public class TestClass {
    public void getName(HasTwoName obj) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        String name = two.getTwoName();
        // Do something with 'name'
    }
    public static void main(String args[]) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        TestClass tc=new TestClass();
        tc.getName(new TestClassTwo());
    }
} 
```**

# matlab - 在 Parfor 循环中生成加扰准蒙特卡洛数的问题

> ID：10040194
> 
> 赞同：2
> 
> 时间：2012-04-06T06:55:34.590
> 
> 标签：matlab, random, parallel-processing

我在 parfor 循环中生成加扰的准蒙特卡罗数时遇到问题。

问题是，当我在 parfor 循环中生成多组这些数字时，每组中的数字最终都是相同的。我在下面包含一个非常简单的示例。

```
D = 3;
M = 1000;
numbers = cell(1,4);

mystream = qrandstream(scramble(sobolset(D),'MatousekAffineOwen'));
myfun = @(x) qrand(mystream,x);

parfor i = 1:4
    numbers{i} = myfun(M);
end 
```

为了演示该问题，运行此代码后，numbers{1}、numbers{2}、numbers{3} 和 numbers{4} 中的数字与以下内容相同：

```
>>numbers{1}(1:3,:)
ans =
          0.76          0.05          0.77
          0.33          0.96          0.23
          0.60          0.72          0.52

>> numbers{2}(1:3,:)
ans =
          0.76          0.05          0.77
          0.33          0.96          0.23
          0.60          0.72          0.52 
```

我想知道是否有人可以想到解决此问题的方法。我想一定有我可以做的事情，因为当我使用正常的随机数字流时不会出现问题。

我应该提到，我不可能利用准随机数流的“跳过”或“跳跃”属性。原因是我在并行运行的更大的 MATLAB 程序中使用了上面的代码片段......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:15:22.593

您需要一个单独的调用来争夺每个并行工作人员。这可以通过在 parfor 循环中移动与 qrandstream 相关的语句来完成，如下所示：

```
D = 3;
M = 1000;
numbers = cell(1,4);

parfor i = 1:4
    mystream = qrandstream(scramble(sobolset(D),'MatousekAffineOwen'));
    myfun = @(x) qrand(mystream,x);

    numbers{i} = myfun(M);
end 
```

原因：尽管 MatousekAffineOwen 确实具有随机加扰顺序，但 MATLAB 将准随机序列视为一个巨大的预定义数组，并且每次需要新样本时都会动态计算样本数据。加扰改变了这个顺序，但是一旦调用了加扰， qrandstream 对象的行为就好像它发生了一次。之后，qrandstream 是一个确定的数字流。在非并行代码中（或者如果您在没有首先启用 matlabpool 的情况下使用 parfor），则此设置适用于单个 qrandstream b/c MATLAB 每次调用 qrand 时都会通过（虚拟）列表工作。

但是在 parfor 中，所有需要的变量、函数等的副本都会传递给每个 worker。结果，每个工作人员都会获得一个重复的、预先确定的准随机数流，从而在每个工作人员身上产生相同的样本流。顺便说一句，这并不意味着所有数字{i} 都将具有相同的值。对于大于并行工作程序（机器核心）数量的 parfor 循环范围，多个循环迭代将发生在同一个工作程序上，因此共享相同的非重复 qrandstream。在我的两台核心机器上，您的 4 次迭代示例代码通过`numbers{1}==numbers{4}`和`numbers{2}==numbers{3}`

# objective-c - 从代码中获取主板或硬串口

> ID：10040196
> 
> 赞同：0
> 
> 时间：2012-04-06T06:55:41.897
> 
> 标签：objective-c, macos

是否可以从代码中获取主板或硬串行？

我想为我的程序获取它，其他人无法在他们的计算机上使用它。如果这种方式不好，有人可以给我另一种方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:25:43.313

创建该项目是为了解决 iOS 的类似问题： [https](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5) ://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5 我认为您可以使用这个想法创建一些库，该库将为你硬件

还有一篇文章描述了该问题的解决方案：

[http://wranglingmacs.blogspot.com/2009/04/getting-byhost-string.html?m=1](http://wranglingmacs.blogspot.com/2009/04/getting-byhost-string.html?m=1)

# javascript - 了解 jquery 初始化

> ID：10040200
> 
> 赞同：3
> 
> 时间：2012-04-06T06:55:58.457
> 
> 标签：javascript, jquery, javascript-events

当文档在客户端浏览器中加载时很明显，

```
$(function(){
some code here
}); 
```

接手。

假设我有两个 javascript 文件`main.js`和`style.js`

*main.js*用于功能，*style.js*用于页面加载时的一些假设样式。我想要这两个文件。我将它们包含在我的*index.html*中，首先*是 style.js* ，然后*是 main.js*，它们都以：

```
$(function(){
    some code here
    }); 
```

我的问题是，执行顺序`document.ready`是什么，*main.js*和*style.js*开始并行执行还是顺序执行，一旦*style.js*完成了它应该执行的操作，然后*main.js*接管？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T07:01:25.147

它是顺序的。javascript中没有并行处理。它们将按照您在页面上包含脚本的顺序被调用。

这也是一个很好的答案：[你能有多个 $(document).ready(function(){ ... }); 部分？](https://stackoverflow.com/questions/1327756/can-you-have-multiple-document-readyfunction-sections)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:07:02.477

好吧，您可以拥有多个`document.ready`，但这会影响代码的可读性。更多已解释[here](http://www.learningjquery.com/2006/09/multiple-document-ready)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:04:05.870

默认情况下，Javascript 不会并行执行代码，要在后台执行代码，您需要创建[webworkers](http://www.w3.org/TR/workers/#introduction)。目前，您的代码以先到先得的方式工作。

# iphone - 名片解析器。如何从名片识别文本中提取相关信息？

> ID：10040204
> 
> 赞同：2
> 
> 时间：2012-04-06T06:56:51.437
> 
> 标签：iphone, ios, ios4

我开发了具有 OCR 扫描功能的 iphone 应用程序。使用 Tesseract api，从拍摄的图像中获取文本。但是现在我需要将每个文本与姓名、地址、电子邮件、电话号码等分开。因为名片结构/格式并不具体，所以很难假设。

然而很少有事情假设 1）“@”包含字符串，主要是电子邮件 ID。2）所有带大括号或+号的数字主要是电话号码..但仍然有很多很多的可能性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T07:07:08.333

您将需要[NSLInguisticTagger](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSLinguisticTagger_Class/Reference/Reference.html)类的帮助。这是您最好的选择，否则您将不得不为每个部分创建类似的逻辑，如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-28T08:49:08.443

您可以检查我们在这个 Javascript BCR 库中使用的逻辑，也是基于 tesseract（js 中的移植）。

[https://github.com/syneo-tools-gmbh/Javascript-BCR-Library](https://github.com/syneo-tools-gmbh/Javascript-BCR-Library)

# ruby-on-rails - 守卫+rspec+spork 总是加载捆绑包中的所有宝石结果很慢

> ID：10040205
> 
> 赞同：0
> 
> 时间：2012-04-06T06:56:53.620
> 
> 标签：ruby-on-rails, rspec, spork, guard

在我的设置之后，除了一件事，一切都很完美。

spork 总是为 rspec 运行的每个触发器加载捆绑中的所有 gem，这个结果很慢。

如何避免这种情况？或者这是一个错误？

可能是由这个错误引起的：

如何让 DRB 服务器运行，我应该指向 127.0.0.1 吗？

没有 DRb 服务器正在运行。而是在本地进程中运行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:40.290

线

```
No DRb server is running. Running in local process instead ... 
```

已经告诉您 spork 运行不正确。尝试先手动运行 spork 并检查它是否有帮助（猜猜这是之前的人想说的）。

如果它有效，请检查您的 Guardfile 以了解您的 spork 设置。您可能需要运行

```
guard init spork 
```

为了引导 spork 的配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:06:34.053

尝试在其他终端中使用“bundle exec spork”手动启动 spork。

# scala - 什么是“？” Scala中的符号（问号）是什么意思？

> ID：10040206
> 
> 赞同：18
> 
> 时间：2012-04-06T06:57:11.827
> 
> 标签：scala, syntax

我遇到了一些带有“？”的scala代码 但不知道在scala中是什么意思，谁能给我解释一下？谢谢。

这是一个例子

```
 def getJobId(conf: Configuration): String =
    ?(conf.get("scoobi.jobid")).getOrElse(sys.error("Scoobi job id not set.")) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-06T08:29:02.277

对我来说，它看起来像 Option 的 apply 方法。代码中是否有以下导入语句：

```
import Option.{apply => ?} 
```

这意味着**apply**被导入为**?** . 来自 Option.apply 的文档：

> 一个选项工厂，如果参数不为空，则创建 Some(x)，如果为空，则创建
> None。

整个陈述意味着：

> 如果 conf.get("scoobi.jobid") 不等于 null，则分配此字符串，否则分配字符串 sys.error("Scoobi job id not set.") 返回

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T07:01:40.403

它只是一个合法字符，就像“abcd...”

```
scala> def ?(i: Int) = i > 2
$qmark: (i: Int)Boolean

scala> val a_? = ?(3)
a_?: Boolean = true 
```

**UPD：**请参阅[Scala 中的有效标识符字符](https://stackoverflow.com/questions/7656937/valid-identifier-characters-in-scala/7657692#7657692)、[Scala 方法和值名称](https://stackoverflow.com/questions/8629478/scala-method-and-values-names)

**UPD2：**在示例中“？” 可以是函数、方法`this`或只是一些带有`apply`方法的对象。它可能会返回`Option[String]`。

# java - 通过休眠映射将数据插入数据库表失败

> ID：10040210
> 
> 赞同：0
> 
> 时间：2012-04-06T06:57:33.610
> 
> 标签：java, mysql, database, hibernate, mapping

我正在使用 Hibernate 向数据库中插入一行，我正在使用 Visual Paradigm（企业版）生成数据库表。

这是错误

> org.orm.PersistentException：org.hibernate.PropertyValueException：非空属性引用空值或瞬态值：org.orm.PersistentSession.saveOrUpdate(PersistentSession.java:631) 处的 com.patientmanagement.model.Patient.visitRecord。 orm.PersistentManager.saveObject(PersistentManager.java:287) at com.patientmanagement.model.PatientDAO.save(PatientDAO.java:303) at com.test.InsertData.main(InsertData.java:28) 原因：org.hibernate .PropertyValueException：非空属性引用空值或瞬态值：com.patientmanagement.model.Patient.visitRecord at org.hibernate.engine.Nullability.checkNullability(Nullability.java:100) at org.hibernate.event.def.AbstractSaveEventListener .performSaveOrReplicate(AbstractSaveEventListener.java:312) 在 org.hibernate.event.def.AbstractSaveEventListener。performSave(AbstractSaveEventListener.java:203) 在 org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129) 在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210) 在 org.hibernate .event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195) at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:117) at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java :93) 在 org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:679) 在 org.hibernate.impl 的 org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:687)。org.orm.PersistentSession.saveOrUpdate(PersistentSession.java:629) 上的 SessionImpl.saveOrUpdate(SessionImpl.java:675) ... 还有 3 个

这是要测试的插入功能

```
public class InsertData {
    public static void main(String[]args) throws PersistentException
    {
        PersistentTransaction trans=PatientmanagementPersistentManager.instance().getSession().beginTransaction();
        try
        {
            //create patient instance
            Patient patient=PatientDAO.createPatient();

            //set patients properties
            patient.setName("Markus Rosevelt");
            patient.setRegisterDate(new Date());

            //save patient
            PatientDAO.save(patient);
            trans.commit();
        }catch(Exception e){
            trans.rollback();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:51:23.960

您可能已在数据库中将 visitRecord 列定义为 NOT NULL，现在您正尝试在该列上插入空值，或者您的映射不正确，您能显示您的映射和表定义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:46:05.613

此消息意味着您无法创建具有空属性的患者实体。在这种情况下，空属性是 Patient 实体中的 visitRecord 属性。您可以使用类似的东西为此属性分配一个值

```
patient.setVisitRecord(some values); 
```

我希望这能解决你的问题。

# c# - 实体框架 + LINQ 缓慢与字符串查询速度？

> ID：10040211
> 
> 赞同：3
> 
> 时间：2012-04-06T06:57:38.863
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

我继承了一个 C# / ASP.NET MVC / Entity Framework 项目，但速度有些慢。数据库中的数据不多，但调用`.Include()`导致速度变慢。

然而，我发现了一件很奇怪的事情。我有一个只有数字（5 列）的 2k 行表。我正在搜索的列上有索引。

做的时候：

```
_entities.MyTable.Where(x=> x.Id1 == 4 && x.Id2 == 5).First() 
```

在我的开发机器上需要 1800 毫秒。

但是，当我这样做时：

```
_entities.MyTable.Where("it.Id1 = 4 and it.Id2 = 5").First() 
```

大约需要 10 毫秒。

这是怎么回事？我不明白为什么 LINQ 表达式会这么慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:01:33.617

打开 Sql Profiler，查看来自 EF 的查询。尝试分析它，制定计划。似乎 EF 以一种奇怪的方式实现查询，而没有获取索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:16:39.973

是不是 EF 必须生成 SQL 才能在第一个示例中执行 where 子句，而在第二个示例中，SQL 更容易生成，因为它可以插入您已经提供的 SQL？

我发现 EF 生成查询的速度非常慢，在这种情况下似乎不太可能，因为它在这两种情况下都是一个相当简单的查询。

您是否尝试过编译第一个查询并多次运行它以检查执行时间是否仅包括实际运行 SQL 而不仅仅是生成它？

# sql - 关系代数中选择子句中的聚合函数

> ID：10040212
> 
> 赞同：0
> 
> 时间：2012-04-06T06:58:16.867
> 
> 标签：sql, aggregate-functions, relational-algebra

是否可以将属性值与关系代数中的聚合函数的值进行比较？我希望能够说如下的话：

(SELECTION) 子句 = 属性 1 > 计数（属性 2）

我的老师有点坚持只使用课堂上描述的方法，但是，如果它是关系代数的既定部分，我可以说服他接受我的答案，因为他首先是一名数学家，不能让我说他正在限制系统的已建立部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:04:51.363

有许多科学论文使用聚合运算符扩展关系代数。但是，我不相信您的老师会接受您的解决方案，因为他/她可能提到了他/她在课堂上使用的一本书，因此任何超出书籍语言的扩展可能是不可接受的。如果您真的很好奇，请考虑阅读以下论文：

*   G. Özsoyoğlu、ZM Özsoyoğlu、V. Matos。使用集值属性和聚合函数扩展关系代数和关系演算，ACM Transactions on Database Systems 12(4)，1987

*   A.克鲁格。具有聚合函数的关系代数和关系微积分
    查询语言的等价性，ACM 杂志 29(3)，1982

# java - Java垃圾收集和空

> ID：10040214
> 
> 赞同：1
> 
> 时间：2012-04-06T06:58:40.110
> 
> 标签：java, garbage-collection

我有以下一段代码：

```
 List<String> list = new ArrayList<String>();
  //  WeakReference<List> wr = new WeakReference<List>(list);
    System.out.println(" before tot memory... " +  Runtime.getRuntime().totalMemory());
    System.out.println(" before free memory... " +  Runtime.getRuntime().freeMemory());
    for(int i =0; i<100; i++)
    list.add(new String("hello"));
    //System.gc();
    list = null; //forcefully end its life expectancy
    System.out.println(" after tot memory... " +  Runtime.getRuntime().totalMemory());
    System.out.println(" after free memory... " +  Runtime.getRuntime().freeMemory());
    System.out.println(" after memory used ... " + (Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()));
   // System.out.println(" weak reference " + wr.get()); 
```

当我运行上面的代码时，我可以看到可用内存是 361064（在我的系统中，但是这个值可能会有所不同）

但是当我使用 System.gc() 和注释 list=null 运行上面的代码时，我可以看到我的可用内存即将到来（在这种情况下为 160944）小于上面的测试用例。在这两种情况下，对象都会从内存中删除。但是为什么这些值不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:01:27.493

**列表=空；**取消任何引用将自动导致垃圾收集。当您注释此行时，引用**列表**仍然处于活动状态，那么即使您调用**System.gc()**它也不会被垃圾收集。

当您显式调用**gc()**时，已经无效或超出范围的引用只会被垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:20:23.930

GC 通过查看内存中的所有对象以`objects which are no longer being referenced`在程序中找到任何对象来工作。可以删除这些未使用的对象，以便为新的内存对象腾出空间。

因此，如果任何对象仍在被引用，即使您调用也无法进行垃圾收集`System.gc()`。如果您可以在代码中引用一个对象，如何对它进行垃圾回收？

通过调用`list = null`被`list`变量引用的对象不能被再次引用，因此它有资格获得垃圾收集。

# c# - 如何更改 Windows 窗体中 DataGridViewColumn 的标题？

> ID：10040215
> 
> 赞同：1
> 
> 时间：2012-04-06T06:58:43.387
> 
> 标签：c#, winforms, datagridview

我检查了其他帖子并建议制作，`EnableHeadersVisualStyles = false`但这只能让我为它们着色。我想更改他们的名字，但是当我强制命名时它们不会改变，如下所示。

```
Products prod = new Products();
DataTable dt = prod.GetTopTenTransactions(Global.Instance.Accounts[0]);
transactionGrid.DataSource = dt;

foreach (DataGridViewColumn cols in transactionGrid.Columns)
{
    cols.Width = 70;
}

transactionGrid.ColumnHeadersDefaultCellStyle.BackColor = Color.CadetBlue;
transactionGrid.EnableHeadersVisualStyles = false; 

transactionGrid.Columns[0].Name = "ID";
transactionGrid.Columns[1].Name = "TYPE";
transactionGrid.Columns[2].Name = "DATE";
transactionGrid.Columns[3].Name = "AMOUNT";
transactionGrid.Columns[4].Name = "FROM";
transactionGrid.Columns[5].Name = "TO";
transactionGrid.Columns[6].Name = "TELLER ID"; 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T07:02:46.273

[DataGridViewColumn.Name](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.name.aspx)用于标识集合中的列。
尝试改用[DataGridViewColumn.HeaderText](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.headertext.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T07:02:54.420

你应该使用[`HeaderText`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.headertext.aspx)属性：

```
transactionGrid.Columns[0].HeaderText = "Header"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T06:15:21.680

1.  如果您使用的是一组预定义的列（在设计时已知），则在 Visual Studio 中选择数据网格，转到列中的属性单击`...`按钮，这将打开一个额外的窗口，您可以在其中编辑列的详细信息

2.  如果你在运行时做事，那么在文件后面的代码中使用：

    `datagrid.Columns[index].HeaderText = "new value";`

希望这可以帮助。

# javascript - ExtJS 在选择字段的 setValue 上触发“更改”事件

> ID：10040216
> 
> 赞同：2
> 
> 时间：2012-04-06T06:59:07.473
> 
> 标签：javascript, extjs, sencha-touch

我正在使用该`setValue`方法将值设置为选择字段，并且在`change`侦听器上我做了一些工作。问题是 setValue 方法不会触发 change 事件。知道我该怎么做吗？

**更新：**

这是我的选择：

```
 xtype: 'selectfield',
  id: 'category_id',
  name: 'category_select',
  label: 'Categoria',
  options: [],
  listener : { //my logic goes here } 
```

在我的代码中的某处（另一个选择的更改侦听器）我加载这样的项目：

```
 var jsonData = JSON.parse(result.responseText);
  for (var i = 0; i < jsonData.categories.length; i++) {
        Ext.getCmp('category_id').setOptions([{ text: jsonData.categories[i].category_name, value: jsonData.categories[i].category_id}], true);
  } 
```

然后我设置值：

```
 if (jsonData.categories.length > 0) {
        Ext.getCmp('category_id').setValue(jsonData.categories[0].category_id);
  } else {
        Ext.getCmp('category_id').setValue("");
  } 
```

# objective-c - 从坐标中获取当前地名（在 nsstring 中）

> ID：10040220
> 
> 赞同：2
> 
> 时间：2012-04-06T06:59:39.347
> 
> 标签：objective-c, ios, cocoa-touch, ipad, coordinates

我有当前位置的坐标，但如何将这些坐标转换为地名？我不想显示地图视图。由于 MKReverseGeocoder 在 iOS 5 中已被弃用，有没有其他方法可以实现这一点。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:04:05.653

您可以访问 Google Places Api

[http://maps.google.com/maps/geo?q=yourSearchName&output=xml](http://maps.google.com/maps/geo?q=yourSearchName&output=xml)

这将提供有关所提供的搜索名称的详细信息。您可以解析 xml 并从该详细信息中获取纬度和经度，并可以固定注释这些位置。

输出也可以是 json 和 csv。

一些可以提供帮助的代码

```
 NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv",coordinate];   //coordinate=-30.347744,71.3737373
 NSString *locationString = [NSString  stringWithContentsOfURL:[NSURL URLWithString:urlString]];
 NSArray *listItems = [locationString componentsSeparatedByString:@","]; 
```

[在此处](https://developers.google.com/maps/documentation/webservices/)参考 Google API

# android - 更新了 Android ADT，现在出现错误

> ID：10040222
> 
> 赞同：6
> 
> 时间：2012-04-06T07:00:04.727
> 
> 标签：android, adt

我刚刚将我的 android adt 更新到版本 17，现在我无法启动我的 android 项目。当我尝试更新时，它给了我一个错误：

> 此 Android SDK 需要 Android Developer Toolkit 版本 17.0.0 或更高版本。当前版本是 16.0.1.v201112150204-238534。请将 ADT 更新到最新版本。

我已尝试再次更新，但它向我显示了这一点

```
Cannot complete the request.  See the error log for details.  
Android DDMS will be ignored because it is already installed, and updates are not permitted.  
Android Development Tools will be ignored because it is already installed, and updates are not permitted.  
Android Hierarchy Viewer will be ignored because it is already installed, and updates are not permitted.  
Android Traceview will be ignored because it is already installed, and updates are not permitted. 
```

有没有办法解决这个问题或者我可以降级adt来解决这个问题

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T10:13:07.227

通过帮助、安装软件并输入[https://dl-ssl.google.com/android/eclipse/来获取最新的 ADT](https://dl-ssl.google.com/android/eclipse/)

如果它不允许您，请从“可用站点”中选择

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-20T14:39:09.860

在我的 Windows 7 机器上尝试更新 Android ADT 工具时，我遇到了几乎相同的问题。结果以管理员身份运行 Eclipse 为我解决了这个问题，并且我能够正常更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T01:46:38.253

1.  将我的 Android 文件夹移至根目录。
2.  通过浏览打开 Eclipse 之外的 SDK 管理器。
3.  关闭您的病毒防护
4.  关闭区域警报
5.  卸载 SDK 工具和 SDK 平台工具。
6.  关闭经理并启动eclipse。
7.  （在 Eclipse 中）帮助 -> 安装新软件 -> 添加“名称=“ADT PLUGIN”，位置“ [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/) ”---> 确定 ----- > 检查开发人员工具框。我相信我的 20 安装已损坏，所以 Eclipse 知道它在那里但不知道它不完整。希望这可以节省我花费 3 个小时来解决这个问题的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T13:31:23.093

删除 \eclipse\plugins 和 \eclipse\features 下的所有文件夹/ja​​r。再次尝试安装 Android ADT 工具。如果您仍然遇到与在 eclipse(installation) 文件夹下搜索 android word 相同的错误。删除除 platform.xml 之外的所有内容。打开 platform.xml 并搜索 android xml 标签并删除所有标签。再次尝试安装。这解决了下面的问题。

Android DDMS 将被忽略，因为它已经安装，并且不允许更新。
Android 开发工具将被忽略，因为它已经安装，并且不允许更新。
Android Hierarchy Viewer 将被忽略，因为它已经安装，并且不允许更新。
Android Traceview 将被忽略，因为它已经安装，并且不允许更新。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-06T07:17:41.980

我尝试过的步骤是：**运行 SDK 管理器并尝试更新 ADT。**

# jquery - 我们如何使用 jquery mobile/Jquery 找到元素的坐标或位置？

> ID：10040229
> 
> 赞同：1
> 
> 时间：2012-04-06T07:00:39.170
> 
> 标签：jquery, jquery-mobile, cordova

我正在使用的代码是用于移动应用程序的。我想在我们的移动屏幕上找出当前选定对象的位置>这里我有两个段落元素 id “#first”和“#second”，我试图找到它们的位置。但它总是`HTML coords (0,0)` 在结果中返回我。我想这是因为我使用的是 jquery 函数 .postion() 而不是 jquery 移动函数。请帮忙

```
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=no" />

    <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title">

    <script type="text/javascript" charset="utf-8" src="main.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.2/jquery.mobile-1.1.0-rc.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.2/jquery.mobile-1.1.0-rc.2.min.js"></script>

    <script>
     $("*", document.body).click(function (e) {
     var offset = $(this).position();
     e.stopPropagation();
     $("#result").text(this.tagName + " coords ( " + offset.left + ", " +
                                  offset.top + " )");
     });

    </script>

</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->
     <div data-role="content" id="objects">
        <p id="first">1st object</p>
        <p id="second">2nd object</p>
        <p id="result"></p>
    </div>

</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:08:53.810

你有没有试过这个：

```
$(function () {
    $('#first,#second').click(function () {
       $("#result").text(this.tagName + " coords ( " + $(this).position().left + ", " + $(this).position().top + " )");
    });        
});​ 
```

演示：http: [//jsfiddle.net/CKG9U/](http://jsfiddle.net/CKG9U/)

# c# - 下载和重定向

> ID：10040231
> 
> 赞同：0
> 
> 时间：2012-04-06T07:00:44.637
> 
> 标签：c#, asp.net, response.redirect

我想下载一个 .CSV 并将用户重定向到另一个页面。

这是我的代码

```
 protected void btnExport_Click(object sender, EventArgs e)
    {
        string attachment = "attachment; filename=" + Request.QueryString["exportName"] + ".csv";
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.ClearHeaders();
        HttpContext.Current.Response.AddHeader("content-disposition", attachment);
        HttpContext.Current.Response.ContentType = "application/ms-excel";

        //CODE TO WRITE CSV
        List<Company> companies = (List<Company>)Session["SelectedCompanies"];
        foreach (Company company in companies)
        {
            HttpContext.Current.Response.Write(company.Name + ";");
            HttpContext.Current.Response.Write(Environment.NewLine);
        }

        HttpContext.Current.Response.Redirect("otherpage.aspx", true);

    } 
```

但不幸的是，它只进行重定向而不是下载 .CSV。

如果我替换`HttpContext.Current.Response.Redirect("otherpage.aspx", true);`为`HttpContext.Current.Response.End();`，那么它只会下载 .CSV 而不是重定向。

但我想两者兼得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:03:25.020

据我所知，这两个操作无法在一个请求中完成，要么重定向用户要么给文件。试着用两个动作来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:14:27.403

对于这种情况，我要做的是：

1.  隐藏 iframe

    < iframe id="DownloadIFrame" visible="false" width="1" height="1" style="display:none" > </iframe >

2.  在更改我的页面内容时，给这个 Iframe 提供我下载的 url（如 download.ashx）。

*在服务器上*

```
public string DownloadViaIFrame(Page page, Download download)
        {
            string script = string.Format(
            @"
            var IsDownloaded=false;

            domReady(function() {{
                if (document.getElementById('DownloadIFrame')==undefined)
                                alert('DownloadIFrame not found');
                            else
                            {{
                                if (!IsDownloaded)
                                {{
                                    {0};
                                    IsDownloaded=true;
                                }}
                            }}
            }});", GetJavasciptToDownloadViaIFrame(download));

            ScriptManager.RegisterClientScriptBlock(page, typeof(Page), "download", script, true);

            return script;
        }

 public string GetJavasciptToDownloadViaIFrame(Download download)
        {
            return string.Format("document.getElementById('DownloadIFrame').src='{0}'", GetDownloadLink(download));
        } 
```

这样，Iframe 会在服务器上点击下载脚本并返回要由客户端下载的文件。客户同时看到其页面的内容发生了变化并且很高兴..

祝你好运，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:18:02.380

据我所知，不可能同时采取这两种行动。尝试重定向到 otherPage.aspx，并在 otherPage.aspx 中注入 JavaScript 代码，在 onload 事件中连接到特定的“真实”下载页面

# java - 如何获取对象的类型以便可以将其与 instanceof 一起使用？

> ID：10040232
> 
> 赞同：2
> 
> 时间：2012-04-06T07:01:04.477
> 
> 标签：java, reflection

我正在用 Java 编写一个程序，我有一个带有头的方法，例如`public void doSomething(Object o)`，我想检查 o 是否是另一个方法的参数的合适类型。所以我所拥有的是：

```
public void doSomething(Object o)
{
    Method m = //get method of another method (using reflection)
    Class<?> cl = m.getParameterTypes()[0];  //Get the class of the 0th parameter
    if(o instanceof cl)         //compile error here
         //do something
} 
```

但是，这不起作用。有人可以帮忙吗。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T07:11:31.253

试试这个：

```
if(c1.isInstance(o))
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T07:09:40.683

`instanceof`将静态类型作为参数，您正在寻找的是动态检查是否`o`可以作为方法的参数；

```
Object o = ...
Method m = ...
Class cl = m.getParameterTypes()[0];
if(cl.isAssignableFrom(o.getClass()))  // Is an 'o' assignable to a 'cl'?
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T07:09:24.980

你可以做

```
if (o.getClass().equals(cl)) 
```

反而。我相信`instanceof`需要实际类型（like`String`和 not `String.class`）。

# java - 它是 JAX-RS 中 UriBuilder 的正确行为吗？

> ID：10040243
> 
> 赞同：4
> 
> 时间：2012-04-06T07:02:12.403
> 
> 标签：java, jersey, jax-rs

第一个例子：

```
UriBuilder.fromUri("http://localhost")
  .queryParam("foo", "test")
  .clone()
  .build()
// equals to: "http://localhost/?foo=test" 
```

第二个例子：

```
UriBuilder.fromUri("http://localhost")
  .replaceQueryParam("foo", "test")
  .clone()
  .build()
// equals to: "http://localhost/" 
```

应该是这样还是它是一个缺陷（在 Jersey 1.11 中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T09:10:33.017

这是泽西岛的一个缺陷，它已经修复：http: [//java.net/jira/browse/JERSEY-1081](http://java.net/jira/browse/JERSEY-1081)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:38:34.247

好吧，我不能说为什么会这样，但是这个`clone`方法在这里完全没用：

```
URI uri1 = UriBuilder.fromUri("http://localhost")
.queryParam("foo", "test")
.build();
//prints http://localhost?foo=test

URI uri2 = UriBuilder.fromUri("http://localhost")
.replaceQueryParam("foo", "2")
.build();
//prints http://localhost?foo=2 
```

乃至

```
URI uri2 = UriBuilder.fromUri(uri1)
.replaceQueryParam("foo", "2")
.build();
//prints http://localhost?foo=2 
```

UPD。关于`clone()`方法：

> 创建保留其状态的 UriBuilder 的副本

所以应该在现有的 uri 上使用它来更有效地创建它的新实例，然后再构建一个新实例。所以我认为这里没有必要。

# oracle - 过程调用失败并且不继续迭代

> ID：10040245
> 
> 赞同：0
> 
> 时间：2012-04-06T07:02:21.417
> 
> 标签：oracle, plsql

我遇到了过程调用的问题..例如

```
MAIN_PROCEDURE_starts
  LOOP
  FOR records_present in Table_test
    Begin
      Call_procedure1
    End
    Begin
      Call_procedure2
    End
    Begin
      Call_procedure3 --this procedure gives an output value
    End
    Begin
      Call_procedure4 --this procedure takes input from output of procedure 3
    End
    Begin
      Call_procedure5
    End
  End loop
End 
```

在这里，我面临以下问题：

1.  如果过程的输出为空，则过程 4 无法执行，因此其他过程，即 5 不工作。
2.  它不是在循环中迭代。如果任何程序失败，它就会退出循环并且主程序结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T21:11:33.757

`First``BEGIN....END`总而言之，每次`Procedure`通话都没有感觉。如果您担心`Exception Handling`，请确保您在 procedure 中执行相同的`all`操作`Call_procedure1,Call_procedure2....`。

`Secondly`，你说它没有在循环中迭代，为什么你认为它没有迭代。这是因为在将空值传递给proc 4时出现异常，这引发了异常，因此程序以异常终止。

`Thirdly`：请详细说明您的要求，如果`output`是，您想做`procedure3`什么`null`？，您想继续还是提出异常。如果您不指定这些条件，那么任何人都很难在这里帮助您。

`Forthly`：如果你想继续循环，如果任何过程失败，那么不要在过程的异常处理部分引发异常。这样你会实现迭代，但这是糟糕的数据库设计。首先尝试找到什么您想在各种情况下`input` `output`或在各种情况下进行`exception` 然后继续。

```
MAIN_PROCEDURE_starts
  LOOP
  FOR records_present in Table_test
      Call_procedure1(..) --do proper exception handling in all procedure 
      Call_procedure2(..)
      Call_procedure3(..)  --what you want to do ,do it before calling procedure 4 
      --Suppose if output if null ,you wanted to raise an exception then 

      If output is NULL then 
      Raise e_null_value;
      END IF ;
      Call_procedure4(..) 
      Call_procedure5(..)
    End loop
Exception
  WHEN e_null_value then
    -- whatever you want to do in this case
End; 
```

# xcb - xcb 说明伪透明度（将根窗口像素图复制到子窗口背景）

> ID：10040246
> 
> 赞同：3
> 
> 时间：2012-04-06T07:02:25.493
> 
> 标签：xcb

我想用 xcb 说明 windows 的伪透明度（在窗口背景上复制根窗口 pixmap 的一部分）

为此，我使用：

根像素图设置为 feh 然后我启动我的程序（只是代码的一部分）：

->初始化连接：

```
xcb_connect() 
```

-> 创建窗口：

```
xcb_create_window()
xcb_create_pixmap( connection,screen->root_depth, pixmap, screen->root, width, height)
xcb_create_gc( connection, graphic_context, pixmap, XCB_GC_FOREGROUND | XCB_GC_BACKGROUND, gc_values_mask)
xcb_map_window 
```

-> 抓取 xcb 事件：

```
xcb_wait_for_event 
```

->回答map_request_event（当它是我们窗口的请求时）或property_notify（当更改的属性是通过feh的根像素图时）：

获取根像素图：

```
xcb_get_property / xcb_get_property_reply / xcb_get_property_value     
==> this works 
```

将根像素图的一部分复制到窗口像素图：

```
xcb_copy_area_checked(backbone.connection,
              rootpix,
              pixmap,
              graphic_context,
              x, y,
              0, 0,
              width, height) 
```

我使用 xcb_request_check 但似乎我对最后一个请求没有错误。

然后我用 cairo 在我的窗口中绘制元素。

问题是我只看到一个带有 cairo 绘制元素的白色窗口。即使没有 cairo 元素，我也无法显示窗口的复制像素图。

你有什么想法可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T08:26:57.220

由于没有人帮助我，我独自找到解决方案：

我只需要在我的窗口中复制部分根像素图：

```
xcb_copy_area_checked(backbone.connection,
          rootpix,
          my_window,
          graphic_context,
          x, y,
          0, 0,
          width, height) 
```

即使我不确定这是最好的方法，它也可以工作。

# java - 代码无法显示图像 - Image.createImage 处的 java.io.IOException

> ID：10040249
> 
> 赞同：1
> 
> 时间：2012-04-06T07:02:47.860
> 
> 标签：java, java-me, lwuit, midp

我正在尝试使用 LWUIT 创建启动画面。我想要一个表单来加载和显示文本和图像 5 秒钟，然后继续下一个表单。我有一个代码，但无法显示图像。类和图像一起存储在同一个包中。相反，它显示一个错误。

```
java.io.IOException 
```

可能是什么问题呢？这是代码

```
 package tungPackage;

 import com.sun.lwuit.Display;
 import com.sun.lwuit.Form;
 import com.sun.lwuit.Image;
 import com.sun.lwuit.Label;
 import javax.microedition.midlet.MIDlet;

 public class photoMidlet extends MIDlet {

 public void startApp() {
    Display.init(this);
      try {
        Form splashscreen = new Form();

        // Label splashText   = new Label("Baldy");
        Image image        = Image.createImage("/splash.png");
        Label pictureLabel = new Label(image);

        splashscreen.addComponent(pictureLabel);
        splashscreen.show();
    } catch (Exception ex) {

        Form x = new Form("ERROR");

        String y = ex.toString();

       Label g = new Label(y);

       x.addComponent(g);
       x.show();

    }

 }

 public void pauseApp() {
 }

 public void destroyApp(boolean unconditional) {
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:04:52.913

使用 ZIP 实用程序（例如 7-zip）打开您的 JAR 文件并查看文件的根目录。如果 splash.png 不在 jar 的根目录中，那就是你的问题！

放置 splash.png 使其位于 jar 的根目录中。

# linux - 使用 SED 在 unix 中编辑文件

> ID：10040255
> 
> 赞同：2
> 
> 时间：2012-04-06T07:04:00.003
> 
> 标签：linux, file, bash, unix, sed

我在 UNIX 中有 file1.txt 如下

```
[Section A]
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2=value2
$param3=value3 
```

我想以编程方式将 B 部分中的 value2 编辑为**new_value2**

```
[Section A]
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2=new_value2
$param3=value3 
```

知道执行此操作的 unix 命令应该是什么（使用 sed 吗？）？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:11:40.933

```
sed -ie '/^\[Section B\]$/,/^$/s/^\$param2=value2$/$param2=new_value/' foo.txt 
```

**编辑：**上面的例子对旧值和空格字符非常严格。我添加了另一个可能更合适的示例。sed 脚本由一个命令组成，并以以下地址范围为前缀：

```
/^\[Section B\]/,/^\[.*\]/ 
```

地址范围由两个用逗号分隔的正则表达式组成，并将以下命令限制为从第一个地址匹配的行开始，一直持续到第二个地址匹配（包括）。

```
s/^\(\$param2[ \t]*=[ \t]*\).*$/\1new_value/ 
```

替换命令用范围进行实际替换。一切都在一起：

```
sed -ie '/^\[Section B\]/,/^\[.*\]/s/^\(\$param2[ \t]*=[ \t]*\).*$/\1new_value/' foo.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:55:40.577

非常简单的解决方案。

```
ex file1.txt <<"INPUT"
/Section B
/param2
s/value2/new_value2/
:x
INPUT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:01:01.853

解析文件、执行编辑和重构的 TXR 程序：

```
@;
@; grab four comand line arguments
@;
@(next :args)
@(cases)
@file
@new_section
@new_param
@new_value
@(or)
@(throw "arguments needed: file section param value")
@(end)
@;
@; hash table mapping sections to assocation lists of values
@;
@(bind sec @(hash :equal-based))
@;
@; parse file, obtaining list of section names and filling in
@; section hash with an associ list of entries.
@;
@(next file)
@(collect)
[Section @secname]
@  (collect)
$@param=@val
@  (until)

@  (end)
@(do (set [sec secname] [mapcar cons param val]))
@(end)
@;
@; now edit
@;
@(do (let ((sec-entries [sec new_section]))
       (if (null sec-entries)
         (push new_section secname))
       (set [sec new_section] (acons-new new_param new_value sec-entries))))
@;
@; now regurgitate file
@;
@(do (each* ((s secname)
             (ent (mapcar (op sec) s)))
       (format t "[Section ~a]\n" s)
       (each ((e ent))
         (format t "$~a=~a\n" (car e) (cdr e)))
       (put-string "\n"))) 
```

测试运行：

```
# edit section B param2 to new_value2

$ txr config.txr config.txt B param2 new_value2
[Section A]
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2=new_value2
$param3=value3

# add new parameter x with value y to section A

$ txr config.txr config.txt A x y
[Section A]
$x=y
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2=value2
$param3=value3

# add new section with new parameter

$ txr config.txr config.txt foo bar xyzzy
[Section foo]
$bar=xyzzy

[Section A]
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2=value2
$param3=value3 
```

读者练习：实现参数/值对的删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T07:11:47.977

如果 Perl 适合你，你可以这样做：

```
perl -pe '$f=1 if(/\[Section B\]/);
          s/^\$param2=value2$/\$param2=new_value2/ if($f);' < file 
```

[看见](http://ideone.com/5YoAi)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-06T07:19:08.290

如果您需要 awk 中的解决方案：

```
nawk -F= '{if($0~/Section B/){print;getline;print;getline;gsub(/value2/,"value9",$2);print}else print}' file3 
```

测试如下：

```
pearl.274> cat file3
[section A]
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2=value2
$param3=value3
pearl.275> nawk -F= '{if($0~/Section B/){print;getline;print;getline;gsub(/value2/,"new_value2",$2);print}else print}' file3
[section A]
$param1=value1
$param2=value2

[Section B]
$param1=value1
$param2 new_value2 
$param3=value3
pearl.276> 
```

# internet-explorer - 我的导航菜单在 FF 和 Chrome 中运行良好，但在旧版本的 IE 中，它的纯文本看起来很糟糕

> ID：10040260
> 
> 赞同：1
> 
> 时间：2012-04-06T07:04:37.460
> 
> 标签：internet-explorer, cross-browser, nav

[这是我所做的。](http://foxklld.site88.net/test/nav/nav.html) 如何在IE中制作类似于FF和Chrome的导航菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:19:10.863

好吧，并非所有浏览器都支持径向渐变，但是如果您愿意满足于从上到下的渐变，那就去吧：

```
/* SVG fallback(Opera 11.10-, IE9) */
background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDg1LDg1LDg1LDEpOyIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYmEoNTEsNTEsNTEsMSk7IiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IGZpbGw9InVybCgjZ3JhZGllbnQpIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIiAvPjwvc3ZnPg==);

/* Opera 11.10+ */
background: -o-linear-gradient(left, rgba(85,85,85,1), rgba(51,51,51,1));

/* Firefox 3.6+ */
background: -moz-linear-gradient(left, rgba(85,85,85,1), rgba(51,51,51,1));

/* Chrome 7+ & Safari 5.03+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0, rgba(85,85,85,1)), color-stop(1, rgba(51,51,51,1)));

/* IE5.5 - IE7 */
filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr=#FF555555,EndColorStr=#FF333333);

/* IE8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr=#FF555555,EndColorStr=#FF333333)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:14:55.400

旧版本的 IE 不知道您正在使用以下 css：

```
background: -webkit-radial-gradient(bottom, #555, #333);
background: -moz-radial-gradient(bottom, #555, #333);
-webkit-transition: width .3s ease-in-out;
-moz-transition: width .3s ease-in-out; 
```

如果有人可以用 CSS3 和旧浏览器版本的替代品来回答这个问题，我会很感兴趣。但在那之前，我想你必须等到所有常见的浏览器都支持 CSS3。

# c# - 带有列表视图的手风琴

> ID：10040264
> 
> 赞同：2
> 
> 时间：2012-04-06T07:05:17.350
> 
> 标签：c#, asp.net, vb.net

我正在使用 a`listview`填充 1000 行的表。DB表是关于问题和答案的。

我想将`accordion`控制与 `listview`. 我应该把`accordion`控件放在里面`listview itemtemplate`吗？

我想要的是点击第一个问题打开第一个答案，点击第二个问题关闭第一个答案并打开第二个答案。

**更新：**

我正在尝试这种方式

```
<asp:ListView ID="lvQuestions" runat="server"
    DataKeyNames="QueryID" 
        DataSourceID="SqlDataSourceQueries">
    <LayoutTemplate>

        <asp:PlaceHolder ID="itemPlaceholder" runat="server" />

    </LayoutTemplate>
    <ItemTemplate>
    <div id="products">
       <h3><a href="#"><asp:Label ID="Label1" runat="server" Text='<%# Eval("Query") %>' ></asp:Label></a></h3>
         <div><asp:Label ID="ReplyLabel" runat="server" Text='<%# Eval("Reply") %>'></asp:Label></div>
   </div>
    </ItemTemplate>
</asp:ListView> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:20:01.800

你可以使用[Jquery Accordion](http://jqueryui.com/demos/accordion/)

就像在文档中一样，您可以将行呈现为以下结构：

```
<div id="accordion">
    <h3><a href="#">First header</a></h3>
    <div>First content</div>
    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>
</div> 
```

您的 ListView 可能如下所示：

```
<asp:ListView ID="lvQuestions" runat="server"
    onitemdatabound="lvQuestions_ItemDataBound">
    <LayoutTemplate>
       <div id="accordion">
        <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
       </div>
    </LayoutTemplate>
    <ItemTemplate>
       <h3><a href="#"><asp:Literal ID="litQuestion" runat="server" /></a></h3>
         <div><asp:Literal ID="litAnswer" runat="server" /></div>
    </ItemTemplate>
</asp:ListView> 
```

Codebehind（对不起，它在 C# 中，但你应该能够翻译）

```
protected void lvQuestions_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Literal litQuestion = (Literal)e.Item.FindControl("litQuestion");
        Literal litAnswer = (Literal)e.Item.FindControl("litAnswer");

        YourClass item = e.Item.DataItem as YourClass;
        litQuestion.Text = item.Question;
        litAnswer.Text = item.Answer;
     }
 } 
```

对于某些人来说，使用 ItemDataBound-Event 可能看起来是不必要的开销，但根据您的情况，您可能希望根据自定义类中的值对正在呈现的文本进行更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:16:14.780

我还没有尝试过，但我建议在列表视图的模板中使用手风琴。然后您可以在 itemtemplate 中使用手风琴项。那会给出类似的东西：

```
<ListView>
  <ListView.Template>
    <ControlTemplate TargetType="ListView">
      <Accordion IsItemsHost="True"/>
    </ControlTemplate>
  </ListView.Template>
  <ListView.ItemTemplate>
    <DataTemplate>
      <AccordionItem .../>
    </ControlTemplate>
  </ListView.ItemTemplate>
</ListView> 
```

# java - Java：无法加载属性文件。为什么？

> ID：10040265
> 
> 赞同：0
> 
> 时间：2012-04-06T07:05:39.977
> 
> 标签：java, file, properties, properties-file

我正在尝试加载属性文件。
我的属性文件与我尝试加载的类**位于同一目录中。**
例子：

```
package com.classes.internal;   
public class ClassA {  

    private static String PFILE = "config.properties";  

    private static void methodA(){  
    //do stuff  
        Properties properties = null;  
        try{  
            properties = new Properties();  
            properties.load(new FileInputStream(PFILE));  
            //properties.load(new ClassA().getClass().getResourceAsStream(PFILE)); --> Does not work either   

        }catch(Exception e){  
            e.printStackTrace();  
        }  

    } 
```

文件也在`config.properties`com\classes\internal 目录中

但我得到一个`FileNotFoundException`或`java.lang.NullPointerException`（如果使用注释掉的行而不是第一行）

我在这里做错了什么？我有什么误解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:10:59.347

该文件需要位于您正在执行的目录中，而不是类文件所在的目录中。

所以如果你有目录结构

> 项目/com/classes/内部

然后你运行命令

```
Project$ java com.classes.internal.SomeClass 
```

您的 JVM 将在“Project”目录中查找“config.properties”文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:50:24.323

下面的行将加载相对于工作目录的文件（在 FrankieTheKneeMan 示例中，“Project”文件夹。如果您在 Tomcat 中运行代码，很可能来自 $Tomcat/bin/）：

```
properties.load(new FileInputStream(PFILE)); 
```

对于下面的行，它正在加载相对于您的类路径的文件。所以“config.properties”指的是包含“com”文件夹的目录，而不是“com/classes/internal/”。

```
properties.load(new ClassA().getClass().getResourceAsStream(PFILE)); 
```

所以你需要决定是从类路径加载，还是从工作目录加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:06:31.947

例子。我正在使用eclipse项目结构，我希望你无论如何都能得到图片：

```
//File in Project/src/com/classes/internal/config.properties
InputStream in = ClassA.class.getResourceAsStream("config.properties");
Properties p = new Properties();
try {
   p.load(in);
} catch(IOException e) {
   e.printStackTrace();
} 
```

如果您决定将文件放在包之外：

```
//File in Project/src/config.properties
InputStream in = ClassA.class.getClassLoader().getResourceAsStream("config.properties"); 
```

请注意，`getResourceAsStream`文件必须包含在您的类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T06:29:11.723

直接在源文件夹中创建一个**config**包，并将*config.properties*文件放入其中。在构建应用程序时，它将转到 /WEB-INF/classes/config/config.properties

然后，您可以使用以下代码访问属性文件 -

```
 Properties prop = new Properties();
    String propFileName = "/config/config.properties";

    InputStream input = null;

    input = ClassA.class.getResourceAsStream(propFileName);
    prop.load(input); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T07:20:08.670

```
properties.load(this.getClass().getResourceAsStream(
    "/com/classes/internal/" + PFILE)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T07:11:26.760

我认为您的程序工作目录不在 com\classes\internal 中。尝试传递这个相对路径：

```
com\classes\internal\config.properties 
```

或绝对路径。您可以像这样获取当前工作目录

```
String currentDir = new File(".").getAbsolutePath(); 
```

# wpf - 如何在 Wpf 中同时处理 PreviewMouseLeftButtonDown 和拖放事件

> ID：10040266
> 
> 赞同：0
> 
> 时间：2012-04-06T07:06:09.717
> 
> 标签：wpf

我想在 MVVM 模型的 DataGrid 中公开鼠标双击和 PreviewMouseLeftButtonDown 事件。为此，我创建了两个附加行为，一个是双击，另一个用于拖放和附加 DataGrid。我的问题是，当我在数据网格的任何项目上按下鼠标双击时，会调用 PreviewMouseLeftButtonDown 鼠标按钮，即不会触发双击事件。

谁能告诉我如何在 MVVM 模型中同时处理鼠标双击和 PreviewMouseLeftButtonDown(Drag And Drop)Event。

谢谢阿米特夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:30:55.097

显然，如果不发布一些代码，很难说出代码在做什么，但这里有一个想法：

如果您的 PreviewMouseLeftButtonDown 干扰双击，这可能意味着您将事件标记为已处理。如果您正在这样做，那么显然停止，而是用一些布尔值捕获您的状态并将它们用作执行逻辑的条件。

在 PreviewMouseLeftButtonDown 上设置 _IsMouseLeftButtonDown = true;

在 PreviewMouseButtonUp 上设置 _IsMouseLeftButtonDown = false 和 _IsDragging = false;

在拖放检查 if(_IsMouseLeftButtonDown) IsDragging =true + 做你的逻辑..

# xcode - Xcode项目中的数据目录在哪里？

> ID：10040279
> 
> 赞同：-3
> 
> 时间：2012-04-06T07:07:28.460
> 
> 标签：xcode

在其他语言（例如 C#）中，我们有一个数据目录（我们程序的源文件所在的目录），我们可以将图像、数据库、声音文件放在该目录中并在程序中使用它们。

这里的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:11:57.407

任何地方。或者在您的项目所在的文件夹中。只需将您需要的文件拖放到项目中即可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:11:36.870

在 iOS 开发中，一般来说，图片、声音文件等都是`Resources`在 Xcode 中添加到 group 中的。但实际上它可以在项目内的任何文件夹中。

# android - 如何以编程方式在android中显示微调器弹出窗口

> ID：10040280
> 
> 赞同：3
> 
> 时间：2012-04-06T07:07:29.107
> 
> 标签：android, spinner

我面临一个关于微调器的问题。假设弹出一个微调器对话框，如果在我解锁屏幕时出现熨平板锁定，微调器弹出窗口不会显示在那里。任何人都可以向我建议任何解决方案，或者任何人都可以知道如何在 onResume 中务实地弹出微调器对话框。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T07:28:13.910

试试`spinner.performClick();`。对我来说，它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T06:22:53.783

尝试这个

```
Spinner spinner = new Spinner(this);
    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, spinnerArray); //selected item will look like a spinner set from XML
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(spinnerArrayAdapter); 
```

# xtk - 如何在 XTK 中可视化远程、url 可访问的 vtk 文件？

> ID：10040281
> 
> 赞同：1
> 
> 时间：2012-04-06T07:07:38.990
> 
> 标签：xtk

有没有人有在 XTK (https://github.com/xtk/X) 中渲染远程文件的示例？这目前可能吗？

我尝试在 URL 中交换文件位置，如下所示：

```
// load a .vtk file
var skull = new X.object();
skull.load('https://s3.amazonaws.com/surfaces/skull.vtk'); 
```

不过没有运气......有什么想法吗？

更新：AWS 现在支持 S3 上的 CORS！只是有点耐心：[http ://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:58:04.683

一般来说，这应该工作！

也许这是一个跨域错误 - 它可能是远程服务器（托管 .vtk 文件的服务器）上的一个简单修复，如下所述：

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

# php - 使用 PHP 删除文件

> ID：10040283
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:07:47.663
> 
> 标签：php, delete-file

如何使用 PHP 代码删除文件系统上的文件？

```
<?php
if (isset($_GET['remove']) && is_numeric($_GET['remove']))
{
//Delete here using $_GET['remove'] value
}

if (isset($_POST['Submit']) && $_POST['Submit'] == 'Remove Selected')
{
$id = array();
$id = $_POST['removeid'];
//print_r($id);
if (count($id) > 0)
{
 foreach ($id as $removeid)
 {
    //Delete here using $removeid value
 }
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:16:10.037

```
unlink ( string $filename [, resource $context ] ) 
```

获取更多详细信息：[php.net 手册](http://us3.php.net/manual/en/function.unlink.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T07:14:46.367

使用 PHP 的[unlink](http://php.net/manual/en/function.unlink.php)。

# perl - Perl - 使用反引号缺少输出

> ID：10040284
> 
> 赞同：1
> 
> 时间：2012-04-06T07:07:51.853
> 
> 标签：perl, stdout, capture

大家好，我需要捕获外部命令的输出，因此我使用反引号。但是，当命令到达换行符时，将省略输出。其中 $_ = AD

```
@lines = `"C:/Program Files/Veritas/NetBackup/bin/admincmd/bppllist" $_ -U"` 
```

```
测试：test1
测试：test2

测试：test3
测试：test4

```

实际输出：@lines

```
测试：test1
测试：test2

```

感谢您的时间。

```
 print HTML "<h2 id='pol'>Policy Configuration\n</h2>" ;

  @bpllist =`"$admincmd/bppllist.exe"` or die print "$admincmd/bppllist.exe not found or could not be executed";
foreach (@bpllist) 
{
  print HTML "<div><table class='table'>\n";
  @lines = `"$admincmd/bppllist" $_ -U` or die print       "$admincmd/bpplinfo $_ -U not found or could not be executed";
   print HTML "\t<tr>\n\t<td><b>Policy name: <b></td><td>$_</td>\n\t</tr>\n" ;

  foreach (@lines) {

chop;
 ($var, $value) = split(/:/,$_,2);
 $var = "" if !defined($var);
 $value = "" if !defined($value);
print HTML "\t<tr>\n\t<td>$var</td><td>$value</td>\n\t</tr>\n" ;

  } 
  print HTML "</table></div>";
  } 
```

@bpllist 的输出：

```
 AD
  Sharepoint
  Echchange
  Vmware 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:14:41.047

以下是使用反引号捕获衍生进程的 STDOUT 和 STDERR 的方法：

```
my $output = join('', `command arg1 arg2 arg3 2>&1`); 
```

它的工作方式不依赖于输出中的换行符`command`。

如果您还需要向`command`的 STDIN 发送文本，请使用 IPC::Open3。

* * *

稍微清理一下你的代码。这个对我有用。

```
use strict;
use warnings;
use 5.10.0;

# something missing here to set up HTML file handle
# something missing here to set up $admincmd

print HTML q{<h2 id='pol'>Policy Configuration\n</h2>};
my @bpllist = `"$admincmd/bppllist.exe"` 
  or die "$admincmd/bppllist.exe not found or could not be executed\n";
for my $policy (@bpllist) {
  print HTML q{<div><table class='table'>\n};
  my @lines = `$admincmd/bpplinfo.exe $policy -U 2>&1`;
  print HTML qq{\t<tr>\n\t<td><b>Policy name: <b></td><td>$policy</td>\n\t</tr>\n} ;
  for my $pair (@lines) {
    chomp($pair); # only remove newlines, not other characters
    my ($var, $value) = split /:/, $pair, 2;
    $var //= '';
    $value //= '';
    print HTML qq{\t<tr>\n\t<td>$var</td><td>$value</td>\n\t</tr>\n} ;
  }
  print HTML q{</table></div>};
} 
```

**更新 2**

您似乎在 Windows 上执行此操作？

我不认为这个`2>&1`技巧会在那里奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:02:11.017

[尝试使用核心模块IPC::Cmd](http://perldoc.perl.org/IPC/Cmd.html) ，而不是使用`qx`或反引号，然后使用 shell 命令来重定向输出。特别是，它的可导出功能将为您方便地捕获 STDOUT 和 STDERR。来自简介：`&run`

```
### in list context ###
my( $success, $error_message, $full_buf, $stdout_buf, $stderr_buf ) =
run( command => $cmd, verbose => 0 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:44:12.623

也许该命令将其输出发送到 stderr。

尝试这个：

```
my $output = `'command' -ARG -L 2>&1`; 
```

问候，

# android - 如何在android的自定义布局中将编辑文本所有值存储到单个变量中

> ID：10040286
> 
> 赞同：0
> 
> 时间：2012-04-06T07:07:55.433
> 
> 标签：android, android-listview

我从数据库中获取项目名称并附加到自定义列表视图中的编辑文本。现在我正在更改edittext中的值我可以打印我正在打印的内容我想要存储一个变量

我的代码：

```
 public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.editmainmenulist, null);
            holder.caption = (EditText) convertView
                    .findViewById(R.id.editmaimenu);
            holder.caption1=(ImageView) convertView.findViewById(R.id.menuimage);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        //Fill EditText with the value you have in data source
        holder.caption.setText(itemnames[position]);
        holder.caption.setId(position);
        holder.caption1.setImageBitmap(bmps[position]);

        //we need to update adapter once we finish with editing
        holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
                if (!hasFocus){
                    final int position = v.getId();
                    final EditText Caption = (EditText) v;
                    itemnames[position] = Caption.getText().toString();
                    System.out.println(Caption.getText().toString());//here only i am printing all values i want store all values into one varible
                }
            }
        });

        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:13:11.953

您可以在类范围内使用声明字符串变量，并且每次使用 system.out.println 进行打印。所以就在它下面将新字符串附加到字符串变量。

```
String str;//in the class scope

str = str.concat(Caption.getText().toString());//just below your 
system.out.print(str); 
```

试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:22:51.263

create one static variable

```
static String str="";
str = str + Caption.getText().toString(); 
```

at last you will get all values in single string

# excel - 使用 TCOM 在 excel 中指定单元格

> ID：10040289
> 
> 赞同：0
> 
> 时间：2012-04-06T07:08:06.057
> 
> 标签：excel, tcl

命令 $cells Item 2 A {SomeText} 不会设置单元格 A2 中的文本，而是分配单元格 A1 中的文本。知道为什么它会这样吗？？？

```
 set application [::tcom::ref createobject "Excel.Application"]
              set XlFileFormat(xlCSV) [expr 6]
              set workbooks [$application Workbooks]
              set workbook [$workbooks Add]
              $application DisplayAlerts False
              set worksheets [$workbook Worksheets]
              set worksheet [$worksheets Item [expr 1]]
              set cells [$worksheet Cells]
            $cells Item 2 A {Range}

              $workbook SaveAs {c:\test.csv} $XlFileFormat(xlCSV)      
              $application Quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:39:30.530

好的，这里有一个解释：当保存到 CSV 时，Excel 似乎只保存了在（虚拟化）工作表网格内形成“边界框”的数据。换句话说，您没有修改第一行单元格中的任何数据，因此它没有被保存。

这个简单的程序（WSH 的 JScript）：

```
var app = new ActiveXObject("Excel.Application");
var wbs = app.Workbooks;
var wb  = wbs.Add;
var wss = wb.Worksheets;
var ws  = wss.Item(1);
var cells = ws.Cells;

app.DisplayAlerts = false;

cells.Item(2, "B") = "B2";
cells.Item(2, "C") = "C2";
cells.Item(3, "B") = "B3";
cells.Item(3, "C") = "C3";

wb.SaveAs("foo.csv", 6);
app.Quit(); 
```

它将四个单元格排列在一个矩形块中，从工作表的左上角偏移一列和一行，生成这个 CSV 文件：

```
B2,C2
B3,C3 
```

# php - 将 UNIX 时间戳转换为格式化的日期字符串

> ID：10040291
> 
> 赞同：214
> 
> 时间：2012-04-06T07:08:25.593
> 
> 标签：php, unix-timestamp

使用 PHP，我想将 UNIX 时间戳转换为与此类似的日期字符串：`2008-07-17T09:24:17Z`

如何将时间戳转换`1333699439`为`2008-07-17T09:24:17Z`？

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2012-04-06T07:20:10.060

试试[`gmdate`](http://php.net/manual/en/function.gmdate.php)这样：

```
<?php
$timestamp=1333699439;
echo gmdate("Y-m-d\TH:i:s\Z", $timestamp);
?> 
```

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-04-06T07:11:57.243

使用日期功能 `date ( string $format [, int $timestamp = time() ] )`

`date('c',time())`用作转换为 ISO 8601 日期的格式（在 PHP 5 中添加）-`2012-04-06T12:45:47+05:30`

用来`date("Y-m-d\TH:i:s\Z",1333699439)`得到`2012-04-06T13:33:59Z`

以下是日期函数支持的一些格式

```
<?php
$today = date("F j, Y, g:i a");                 // March 10, 2001, 5:16 pm
$today = date("m.d.y");                         // 03.10.01
$today = date("j, n, Y");                       // 10, 3, 2001
$today = date("Ymd");                           // 20010310
$today = date('h-i-s, j-m-y, it is w Day');     // 05-16-18, 10-03-01, 1631 1618 6 Satpm01
$today = date('\i\t \i\s \t\h\e jS \d\a\y.');   // it is the 10th day.
$today = date("D M j G:i:s T Y");               // Sat Mar 10 17:16:18 MST 2001
$today = date('H:m:s \m \i\s\ \m\o\n\t\h');     // 17:03:18 m is month
$today = date("H:i:s");                         // 17:16:18
?> 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2012-04-06T07:14:14.760

假设您使用的是 PHP5.3，那么处理日期的现代方式是通过本机[DateTime 类](http://uk.php.net/datetime)。要获取当前时间，您只需致电

```
$currentTime = new DateTime(); 
```

从特定时间戳创建 DateTime 对象（即不是现在）

```
$currentTime = DateTime::createFromFormat( 'U', $timestamp ); 
```

要获取格式化的字符串，您可以调用

```
$formattedString = $currentTime->format( 'c' ); 
```

请参阅[此处的手册页](http://uk.php.net/manual/en/datetime.format.php)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-04-06T23:00:53.633

设置默认时区以获得正确的结果非常重要

```
<?php
// set default timezone
date_default_timezone_set('Europe/Berlin');

// timestamp
$timestamp = 1307595105;

// output
echo date('d M Y H:i:s Z',$timestamp);
echo date('c',$timestamp);
?> 
```

在线转换帮助： http: [//freeonlinetools24.com/timestamp](http://freeonlinetools24.com/timestamp)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2017-02-16T07:24:47.033

```
<?php
$timestamp=1486830234542;
echo date('Y-m-d H:i:s', $timestamp/1000);
?> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-12-03T12:59:49.733

```
$unixtime_to_date = date('jS F Y h:i:s A (T)', $unixtime); 
```

这应该有效。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-22T10:42:40.693

DateTime 类在构造函数中接受一个字符串。如果您在时间戳前面加上 @ 字符，您将创建一个带有时间戳的 DateTime 对象。对于格式化，请使用“c”格式……预定义的 ISO 8601 复合格式。

如果可以像这样使用 DateTime 类...设置正确的时区，或者如果您想要 UTC 时间则将其排除在外。

```
$dt = new DateTime('@1333699439');
$dt->setTimezone(new DateTimeZone('America/New_York'));
echo $dt->format('c'); 
```

*   [https://www.php.net/manual/en/book.datetime.php](https://www.php.net/manual/en/book.datetime.php)
*   [https://www.php.net/manual/en/datetime.format.php](https://www.php.net/manual/en/datetime.format.php)
*   更多示例和时区[https://time.einfach.jetzt/?t=1333699439](https://time.einfach.jetzt/?t=1333699439)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-03T23:14:07.853

我发现这个对话中的信息非常有用，我只想通过使用我的 MySQL 数据库中的时间戳和一点 PHP 来添加我是如何计算出来的

```
 <?= date("Y-m-d\TH:i:s\+01:00",strtotime($column['loggedin'])) ?> 
```

输出为：2017-03-03T08:22:36+01:00

非常感谢 Stewe 你的回答对我来说是一个尤里卡。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-26T11:31:59.077

你可以像......

```
$originalDate = "1585876500";

echo $newDate = date("Y-m-d h:i:sa", date($originalDate)); 
```

# android - 我可以将 SharedPreferences.edit() 放在我的类的构造函数中，还是每次偏好更改并提交时都需要调用它？

> ID：10040293
> 
> 赞同：1
> 
> 时间：2012-04-06T07:08:50.393
> 
> 标签：android, sharedpreferences

在我更改首选项并提交之前，我是否需要每次都调用 edit SharedPreferences ，或者我可以在 costructor 中只做一次吗？

它是否正确 ？

```
public class MyPreferencesClass {

    private Context ctx;

    private static SharedPreferences settings;
    private static SharedPreferences.Editor editor;

    // Constructor Class //
    public MyPreferencesClass(Context context) {
        this.ctx = context;
        settings = ctx.getSharedPreferences(CUSTOM_PREFS_NAME, 0);
        editor = settings.edit(); // Called Only once in constructor not not everytime in edit methods
    }

    public static void setSomePref1(Boolean boolValue) {
        // editor = settings.edit(); Not required everytime
        editor.putBoolean(PREFS_1, boolValue);
        editor.commit();            
    }

    public static void setSomePref2(Boolean boolValue) {
        editor.putBoolean(PREFS_2, boolValue);
        editor.commit();            
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:39:00.683

您应该能够使用 SharedPreferences.Editor 实例，只要它有效，因此无需每次都调用 SharedPreferences#edit() 。

# javascript - 如何用 div 和 Javascript 替换 iframe？

> ID：10040297
> 
> 赞同：13
> 
> 时间：2012-04-06T07:09:17.117
> 
> 标签：javascript, iframe, html

我有一个将外部 HTML 页面加载到 iFrame 中的页面。我面临两个问题：

1.  iFrame 始终是固定高度，但我希望它根据内容的高度垂直扩展。
2.  iFrame 内的内容不能继承附加到包含它的 HTML 页面的 CSS 样式。iFrame 中的 HTML 必须有它自己的链接或单独的样式表。

这两点我都可能错了，所以如果我错了，请告诉我，然后我会继续使用 iFrame。

否则，*是否有一个简单的**Javascript**调用可以将外部 HTML 文件加载到**DIV***中？

需要明确的是，因为似乎有些人误解了我：

我在问**如何用 DIV 和 Javascript 替换 iframe**以获得我上面提到的功能。我**不是**在寻找使 iFrame 表现不同的方法。

*（我认为这会很常见，但我在本网站和网络上找到的大多数问题和信息似乎都是针对特定情况的，并且要求提供我不需要的其他功能并使问题复杂化。但是，如果我遗漏了一些东西并且这是重复的，如果它被关闭，我不会被冒犯。）*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T17:50:09.003

您可以进行 ajax 调用来获取您的 html 页面并将其添加到 div。例如使用 JQuery：

`$.get('yourPage.html', function(data) { $('#yourDiv').html(data); });`

阅读更多：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T18:17:08.167

我实际上写了一个不同问题的答案，这似乎适用于这里：[https ://stackoverflow.com/a/10012302/166661](https://stackoverflow.com/a/10012302/166661)

你有一个服务器会返回给你信息——你可以把这个信息放在一个`IFRAME`... 或者你可以调用一个 JavaScript 函数来检索那个信息并将它显示在`DIV`你在页面上留出的位置 ( ) 中。

这是一个示例 HTML 页面，它将使用 AJAX 从服务器检索信息

```
<html>
<head>
<script type="text/javascript">
function getAreaInfo(id)
{
  var infoBox = document.getElementById("infoBox");
  if (infoBox == null) return true;
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
    if (xhr.readyState != 4) return;
    if (xhr.status != 200) alert(xhr.status);
    infoBox.innerHTML = xhr.responseText;
  };
  xhr.open("GET", "info.php?id=" + id, true);
  xhr.send(null);
  return false;
}
</script>
<style type="text/css">
#infoBox {
  border:1px solid #777;
  height: 400px;
  width: 400px;
}
</style>
</head>
<body onload="">
<p>AJAX Test</p>
<p>Click a link...
<a href="info.php?id=1" onclick="return getAreaInfo(1);">Area One</a>
<a href="info.php?id=2" onclick="return getAreaInfo(2);">Area Two</a>
<a href="info.php?id=3" onclick="return getAreaInfo(3);">Area Three</a>
</p>
<p>Here is where the information will go.</p>
<div id="infoBox">&nbsp;</div>
</body>
</html> 
```

这里是将信息返回给 HTML 页面的 info.php：

```
<?php
$id = $_GET["id"];
echo "You asked for information about area #{$id}. A real application would look something up in a database and format that information using XML or JSON.";
?> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-10T02:42:34.143

```
#mydiv {
      all: initial; /* blocking inheritance for all properties */
} 
```

从[如何将 div 与公共 CSS 样式隔离开来？](https://stackoverflow.com/questions/10064172/how-to-isolate-a-div-from-public-css-styles)

这个解决方案挽救了我的一天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T07:15:43.557

1.  使用[jQuery 插件](https://github.com/house9/jquery-iframe-auto-height)动态调整 iframe 的大小。

2.  您不能在 iframe 中重新设置内容的样式。你打算用 iframe 做什么？通常有更好的方法来解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:20:34.257

> 我在问**如何用 DIV 和 Javascript 替换 iframe**以获得我上面提到的功能。我**不是**在寻找使 iFrame 表现不同的方法。

如果您想要提到的功能，则不必替换 iframe。使用 iframe 功能 2 更容易。至于功能 1，您有两种选择：

1.  将您的 iframe 放入 DIV 并使用 css 规则，例如绝对位置和相对位置以及 100% 的高度

2.  添加一个javascript函数来处理window对象的resize事件来调整iframe的大小

# java - setPosition(1, 2) 是否比 setPosition(new Point(1, 2)) 快很多

> ID：10040300
> 
> 赞同：0
> 
> 时间：2012-04-06T07:10:09.940
> 
> 标签：java, optimization

两种方法实现：

> public void setPosiotion(int x, int y) { //什么都不做 }
> 
> public void setPosiotion(Point point) { //什么都不做 }

如果我必须调用 setPosition() 10 亿次怎么办，不需要创建新 Point 的方法会明显更快地工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:52:45.763

它可能会产生很小的差异，但它可能少于您编写较长表达式所需的时间。有时你的时间和效率更重要。

比编写时间更重要的是维护代码所花费的时间，这可能是开发时间的 3 倍。这表明可维护性应该是您的主要关注点。

简而言之; 编写简单、清晰易懂的代码，它通常会表现良好，并且从长远来看是最有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T07:59:16.073

> 如果我必须调用 setPosition() 10 亿次怎么办，不需要创建新 Point 的方法会明显更快地工作吗？

这取决于`setPosition`方法的作用。

*   如果该方法仅使用`x`和中的`y`值，`Point`那么不创建/传递`Point`对象可能会更快。

*   如果该方法立即创建 a`Point`来保存您传递的`x`and`y`值，那么您`Point`自己创建*可能*会更快。

由于最新的 JVM 可以使用转义分析来推断`Point`不需要将对象创建为堆对象，因此这很复杂。另一方面，它取决于需要传递多少级方法调用（等等）`x`和值。`y`

简而言之，很难预测。

* * *

最后，您的假设`setPosition`将被调用 10 亿次是值得怀疑的……除非您实际分析了应用程序。即使它是有效的，这些调用*仍然*可能对整个应用程序执行时间做出微不足道的贡献。

先剖析，*再*优化。

# php - 如何绑定字符串列数据

> ID：10040301
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:10:13.830
> 
> 标签：php, mysql, string

我想编写一个 php 脚本来比较数据库中的行，然后如果 payment_id 匹配，则将这些值相加。基于payment_id：

例子：

```
 +----+------------+-----------+--------+
   | id | payment_id | cheque_id | amount |
   +----+------------+-----------+--------+
   |  1 | 1000       | MB101     | 20     |
   |  2 | 1000       | MB102     | 20     |
   |  3 | 1111       | MB113     | 20     |
   +----+------------+-----------+--------+ 
```

需要结果

```
 +------+--------------+----+
   | 1000 |  MB101/MB102 | 40 |
   | 1111 |  MB113       | 20 |
   +------+--------------+----+ 
```

尝试将检查列合并为字符串。对于“金额”列，我知道应该使用 SUM。

任何建议表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:14:32.747

采用`GROUP BY`

```
select payment_id,group_concat(cheque_id SEPARATOR '/') as cheque_ids,
SUM(amount) as amount
FROM table name
GROUP BY payment_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:26:02.453

我找到了解决方案

```
SELECT payment_id, group_concat(cheque_id SEPARATOR '/') AS cheque_ids,
SUM(amount) AS amount
FROM tbl_name
GROUP BY payment_id 
```

# java - Java 从文件读取到数组运行时错误

> ID：10040303
> 
> 赞同：2
> 
> 时间：2012-04-06T07:10:26.227
> 
> 标签：java, file-io

```
 import java.io.*;
    import java.util.*;

    public class Readfilm {

    public static void main(String[] args) throws IOException {

        ArrayList films = new ArrayList();
        File file = new File("filmList.txt");
        try {
            Scanner scanner = new Scanner(file);

            while (scanner.hasNext())
            {
                String filmName = scanner.next();
                System.out.println(filmName);
            }
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
    }} 
```

以上是我目前正在尝试使用的代码，它编译得很好，然后我得到一个运行时错误：

```
java.util.NoSuchElementException  
    at java.util.Scanner.throwFor(Scanner.java:907)  
    at java.util.Scanner.next(Scanner.java:1416)  
    at Readfilm.main(Readfilm.java:15) 
```

我搜索了错误并没有任何帮助（我只搜索了错误的前 3 行）

基本上，我正在编写的程序是一个更大程序的一部分。这部分是从这样写的文本文件中获取信息：

电影一 / 1.5
电影二 / 1.3
电影三 / 2.1
电影四 / 4.0

文本是电影标题，浮点数是电影的持续时间（将添加 20 分钟（对于广告），然后将四舍五入到最接近的整数）

继续前进，程序然后将信息放在一个数组中，以便可以从程序轻松访问和修改它，然后写回文件。

我的问题是：

我目前收到运行时错误，不知道如何修复？（目前我只是想读取每一行，并将其存储在一个数组中，作为程序其余部分的基础）有人能指出我正确的方向吗？

我不知道如何在“/”处进行拆分，我认为它类似于 .split("/")？

任何帮助将不胜感激！

扎克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:18:08.713

您的代码正在运行，但它只读取一行。您可以使用 bufferedReader 这是一个示例

```
import java.io.*;
class FileRead 
{
 public static void main(String args[])
  {
  try{
  // Open the file that is the first 
  // command line parameter
  FileInputStream fstream = new FileInputStream("textfile.txt");
  // Get the object of DataInputStream
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {
  // Print the content on the console
  System.out.println (strLine);
  }
  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  }
}
```

这是一个拆分示例

```
class StringSplitExample {
        public static void main(String[] args) {
                String st = "Hello_World";
                String str[] = st.split("_");
                for (int i = 0; i < str.length; i++) {
                        System.out.println(str[i]);
                }
        }
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:20:29.540

我不会使用 a `Scanner`，那是为了标记（你一次得到一个单词或符号）。您可能只想使用`BufferedReader`具有`readLine`方法的 a，然后`line.split("/")`按照您的建议将其分成两部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:08:14.830

懒惰的解决方案：

> 扫描仪扫描 = ..;
> scan.nextLine();

# android - EditText 没有得到焦点 Mono Android

> ID：10040305
> 
> 赞同：0
> 
> 时间：2012-04-06T07:10:35.987
> 
> 标签：android, focus, xamarin.android, android-tabactivity, custom-titlebar

我正在使用带有自定义标题的 TabActivity。

`TabControl.xml`包含

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

* * *

当活动启动时，默认选项卡是 Tab0。

在 Tab0 的 .xml 中：

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

* * *

而对于自定义标题栏，`TitleBar.xml`包含：

```
<RelativeLayout
    //not setting android:focusable here >

    <EditText
            android:id="@+id/edsearch" 
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:nextFocusUp="@id/edsearch" 
            android:nextFocusLeft="@id/edsearch" > 
```

* * *

但问题是当我尝试在 of 中输入任何输入时`EditText`，`TitleBar`它不起作用。这背后的原因可能`EditText`是没有专注。

为了纠正它，我使用`:nextFocusUp`并`:nextFocusUp`按照建议**[在这个讨论中](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)**

但它仍然不起作用。

我已经为 EditText 使用了 OnClick 事件，点击它就会触发它。

但是 TextChanged 事件没有得到执行，因为我无法向 EditText 提供任何输入。

由于我是*Mono Android*的新手，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:25:52.527

消除

```
android:focusable="true"    
android:focusableInTouchMode="true" 
```

来自 Tab 活动。

无需设置

```
android:focusable="true"    
android:focusableInTouchMode="true"    
android:nextFocusUp="@id/edsearch"     
android:nextFocusLeft="@id/edsearch" 
```

# vps - jekyll 进程需要多少内存？

> ID：10040306
> 
> 赞同：1
> 
> 时间：2012-04-06T07:10:37.413
> 
> 标签：vps, jekyll

我打算将我的博客移动到一个 jekyll 博客引擎，但我有一个小型 vps，现在它托管了很多网站，而且今天没有那么多可用内存。并且默认情况下交换是关闭的，我无法处理它。

我想问你 jekyll 进程会使用多少内存？

任何人都可以看到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:11:42.160

我想你没有明白 jekyll 是一个**静态**博客生成器，那么它在运行时不会占用你的 web 服务器上的内存。代表着 ：

*   您可以在安装了 ruby​​ 和 jekyll 的任何机器上生成您的站点，
*   然后将生成的站点移动到不需要安装 ruby​​ 和 jekyll 的 Web 服务器中。

现在更有意义了吗？

# php - 我无法理解的 PHP OOP 错误

> ID：10040307
> 
> 赞同：2
> 
> 时间：2012-04-06T07:10:42.023
> 
> 标签：php, oop

我尝试用我的新类扩展 CheckfrontAPI 类。

在我的情况下，我使用单例模式来一次只加载一个实例，我得到了那个错误

致命错误：CheckFrontIntegrator::store() 的声明必须与第 83 行 /home/my_web_site/public_html/wp-content/plugins/checkfront/class/Checkfront_Integration.php 中的 CheckfrontAPI::store() 的声明兼容

关于如何解决该问题的任何想法？

这是 CheckfrontAPI 源代码：[https ://github.com/Checkfront/PHP-SDK/blob/master/lib/CheckfrontAPI.php](https://github.com/Checkfront/PHP-SDK/blob/master/lib/CheckfrontAPI.php)

这是我的类扩展该类：

```
<?php

class CheckFrontIntegrator extends CheckfrontAPI
{
    private static $instance = null;
    public $tmp_file = '.checkfront_oauth';

    final protected function store($data = array())
    {
        $tmp_file = sys_get_temp_dir() . DIRECTORY_SEPARATOR. $this->tmp_file;

        if(count($data))
        {
            file_put_contents(  
                $tmp_file,
                json_encode(
                    $data, 
                    true
                )
            );
        }
        elseif(is_file($tmp_file))
        {
            $data = json_decode(
                trim(
                    file_get_contents(
                        $tmp_file
                    )
                ),
                true
            );
        }

        return $data;
}

    public function session($session_id, $data = array())
    {
        $_SESSION['checkfront']['session_id'] = $session_id;
}

    public static function instance($data)
    {
        if(!isset(self::$instance))
        {
            self::$instance = new CheckFrontIntegrator($data);
        }

        return self::$instance;
    }

    public function __construct($data)
    {
        if(session_id() == '')
        {
            session_start();
        }

        parent::__construct($data, session_id());
    }
}

?> 
```

我像这样启动该类的新实例：

```
$this->checkfront_integrator = CheckFrontIntegrator::instance($args); 
```

其中 args 是类启动新对象所需的所有重要信息

编辑后

我已经从以下位置更改了我的方法存储：

```
final protected function store($data = array())
.... 
```

至

```
protected function store($data)
.... 
```

并且问题仍然存在:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:15:03.160

CheckfrontAPI 是一个抽象类？在这种情况下，您的 CheckFrontIntegrator::store() 参数计数必须与原始声明相同

编辑

我在github上看到

```
abstract protected function store($data); 
```

您的覆盖必须是：

```
protected function store($data) {

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T07:14:39.727

您正在扩展 CheckfrontAPI。CheckfrontAPI 有一个方法 store()。如果您覆盖该方法，则必须正确执行。

贴出 CheckfrontAPI 和你的类 Checkfront_Integration 的代码：什么时候能明白什么问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T07:24:14.360

当您想通过编写自己的类来扩展现有类的功能并且您要扩展的类是*抽象*类时，您需要确保函数调用是兼容的。
这是什么意思？

如果您要扩展的类具有此函数调用，例如：

```
function walk($direction, $speed = null); 
```

然后你必须在*你的实现*中尊重函数签名——这意味着你仍然必须在你的版本中传递两个函数参数。

你将**无法**改变是这样的：

```
function walk($direction, $speed, $clothing); 
```

# jquery - Twitter Bootstrap Twipsy 在 Firefox/Chrome 中不起作用，但在 IE 中起作用

> ID：10040308
> 
> 赞同：0
> 
> 时间：2012-04-06T07:10:43.933
> 
> 标签：jquery, twitter-bootstrap

我有一个应用程序，我正在使用 Twitter Bootstrap 中的 Twipsy 插件在客户端显示验证消息......

如果有错误，会有一个漂亮的 twipsy 工具提示。但是，如果用户更正了输入字段，则 twipsy 错误消息不会在 Firefox 和 Chrome 中消失。它在 IE 9 中消失了。

问题是什么？

这是该项目的网址：http: [//4aab82026a744a638d04d47f8b428217.cloudapp.net/](http://4aab82026a744a638d04d47f8b428217.cloudapp.net/)

如果您在不输入 zip 的情况下单击注册，则会显示该消息。

输入邮政编码后，在第二个注册页面中也可以观察到相同的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:29:00.870

禁用任何加速机制，即CloudFlare，然后删除DOCTYPE；重新加载并查看它是否有效；如果它确实将您的 DOCTYPE 数据替换为以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Site name goes here</title> 
```

这应该可以解决 Chrome 中基于 Bootstrap 的错误。

# php - 如何使用 FPDF 和 PHP 保持图像质量？

> ID：10040309
> 
> 赞同：12
> 
> 时间：2012-04-06T07:10:45.090
> 
> 标签：php, image, fpdf

我正在使用 FPDF 和 PHP 将图像添加到 PDF。但是 PDF 中的图像质量比原始图像差得多，如您在此处看到的：

![从网页打印屏幕](../Images/3ddf4aad9112b115e0604d762b5e7ff6.png) ![从 PDF 打印屏幕](../Images/ad880cdf3c80f1fc04315e211a1482d4.png)

相关代码：

```
$image_height = 40;
$image_width = 40;
$pdf = new FPDF();
$pdf->AddPage();
$start_x = $pdf->GetX();
$start_y = $pdf->GetY();
$pdf->Image('./images/ds_pexeso_ros_0_17.jpg', $pdf->GetX(), $pdf->GetY(), $image_height, $image_width); 
$pdf->Output("pexeso".date("Y-m-d"),"I"); 
```

原始图像为 150x150 像素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-22T21:07:46.700

我在客户项目中遇到了同样的问题。即使是雇佣图像，生成的 pdf 文档中的图片也会变得模糊。

我花了几个小时，但这对我有用。

我查看了代码，发现在 pdf 文档的构造函数中设置了比例因子：

```
//Scale factor
if($unit=='pt')
    $this->k=1;
elseif($unit=='mm')
    $this->k=72/25.4;
elseif($unit=='cm')
    $this->k=72/2.54;
elseif($unit=='in')
    $this->k=72;
else
    $this->Error('Incorrect unit: '.$unit); 
```

比例因子取决于 pdf 文档的构造函数中给出的值：

```
function FPDF($orientation='P',$unit='mm',$format='A4') 
```

默认值为“毫米”。在我的大多数文档中，我都会创建一个 pdf 文档，例如：

```
$pdf = new PDF('P'); 
```

这意味着将使用 72/25.4 = 2.83 的比例因子。当我在刚刚使用之前放置图像时：

```
$this->Image('path/to/file', 0, 0); 
```

这样我得到了模糊的图像。也可以在命令中给出图片的宽度

```
$this->Image('path/to/file', 0, 0, 200); // for a image width 200 
```

这给了我一个太大的图像。但是 - 诀窍来了 - 当您将实际宽度除以比例因子（在我的情况下为 2.83）并将其放在此语句中时，它会给出一个非常清晰的图像：

```
$this->Image('path/to/file', 0, 0, 71); // for a image width 200 / 2.83 = app 71 
```

我希望这也适用于你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:27:50.967

我认为问题可能与以下方面有关：

```
 $image_height = 40;
 $image_width = 40; 
```

通过这两个说明，您可以设置图像在 pdf 中的尺寸。

但如果原始图像大于 40x40，图像的缩放可能会导致质量问题。

所以我的建议是：

*   正确调整图像大小（php 提供 GD 库）。将其调整为 40x40。GD 函数 imagecopyresampled 是您的朋友：调整图像大小并重新采样！完整参考：[http ://www.php.net/manual/en/function.imagecopyresampled.php](http://www.php.net/manual/en/function.imagecopyresampled.php)
*   现在在pdf中插入图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T16:26:32.447

FPDF 使用这样的语句将用户单位设置为 mm $pdf=new FPDF('P','mm','Letter');

```
<?php 

    require_once('fpdf.php');
    $image_height = 40;
    $image_width = 40;
    $pdf = new FPDF('P','mm','Letter');
    $pdf->AddPage();
    $start_x = $pdf->GetX();
    $start_y = $pdf->GetY();
    $pdf->Image('./images/ds_pexeso_ros_0_17.jpg',$start_x+0,$start_y-2,40);
   $pdf->Output("pexeso".date("Y-m-d"),"I");
?> 
```

FPDF 取得了非常好看的结果。

# tomcat - 我在调用 DataImport Handlor 时使用 solr 在 MS SQL 服务器中导入数据时遇到此错误

> ID：10040314
> 
> 赞同：1
> 
> 时间：2012-04-06T07:11:20.747
> 
> 标签：tomcat, solr

当我调用 DataImport Handlor 时，使用 solr 在 MS SQL 服务器中导入数据时出现此错误。

```
SEVERE: java.lang.AbstractMethodError
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1372)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1600)
    at java.lang.Thread.run(Unknown Source)

Apr 6, 2012 12:30:37 PM org.apache.solr.common.SolrException log
SEVERE: java.lang.AbstractMethodError
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1372)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1600)
    at java.lang.Thread.run(Unknown Source) 
```

任何机构都可以帮我解决这个错误

# javascript - 从 webAudio / mozAudio 获取原始 PCM 数据

> ID：10040317
> 
> 赞同：12
> 
> 时间：2012-04-06T07:11:30.300
> 
> 标签：javascript, html, web-audio-api

我正在尝试保存 webAudio API 的输出以供将来使用，到目前为止，我认为获取 PCM 数据并将其保存为文件将符合我的期望，我想知道 webAudio 或 mozAudio 是否已经支持保存输出流，如果不怎么可以我从输出流中获取 pcm 数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T22:30:05.410

除了尝试以某种编程方式捕获[网络音频](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)之外，这里的要求并没有很好的意义。这里的假设是您希望通过在当前正在浏览的页面上以 JavaScript 执行的代码来执行此操作，但这也不完全清楚。

正如 Incognito 指出的那样，[您可以在 Chrome 中使用挂起的回调来执行此操作`decodeAudioData()`](https://stackoverflow.com/a/10067038/517815)。但是，如果您只是尝试捕获单个 Web 流的输出并将其解码为 PCM 以用于您选择的声音工具，这可能对您的使用过于复杂。

对于媒体 URL 模糊或难以使用当前工具解码的情况，您可能会考虑的另一种策略是[从底层声卡捕获](http://www.askdavetaylor.com/how_do_i_capture_an_internet_audio_stream.html)。如果（且仅当）您的声卡无法有效地对流进行采样，这会为您提供免费解码，但可能会降低采样率。

正如我们所知，[您已经通过对 PCM 编码的渴望对模拟信号进行了数字编码](http://en.wikipedia.org/wiki/Pulse-code_modulation)。显然，只有在您拥有使用被采样文件的合法权利时才这样做。

无论您选择哪种路线，都祝您好运。无论是程序化流剖析还是现场采样，您现在应该有足够的信息来继续。

* * *

**编辑：**根据来自 OP 的其他信息，这似乎是所需的解决方案（从[此处](https://stackoverflow.com/questions/7700273/play-mp3-file-after-uploading-it-with-html5-drag-and-drop-upload)和[此处](http://nodejs.org/docs/v0.4.8/api/fs.html#file_System)合并，使用[NodeJS 的实现`fs`](http://nodejs.org/docs/v0.4.8/api/fs.html#file_System)）：

```
var fs = require('fs');

function saveAudio(data, saveLocation) {
    var context = new (window.AudioContext || window.webkitAudioContext)();
    var source = context.createBufferSource();

    if(context.decodeAudioData) {
        context.decodeAudioData(data, function(buffer) {
            fs.writeFile(saveLocation, buffer, function (err) {
                if (err) throw err;
                console.log('It\'s saved!');
            });
        }, function(e) {
            console.log(e);
        });
    } else {
        var buffer = context.createBuffer(data, false /*mixToMono*/);
        fs.writeFile(saveLocation, buffer, function (err) {
            if (err) throw err;
            console.log('It\'s saved!');
        });
    }
} 
```

（**警告：未经测试的代码。**如果这不起作用，欢迎编辑。）

这有效地`decodeAudioData`从[Web Audio API](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)中提取出来，从提供的 PCM 解码`data`，然后尝试将其保存到目标`saveLocation`。很简单，真的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T05:09:48.480

[最新的 WebAudio API 草案](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)[`OfflineAudioContext`](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#OfflineAudioContext-section)正是为此目的而引入的。

您使用它的方式与常规 AudioContext 完全相同，但有一个额外的`startRendering()`方法来触发离线渲染，以及一个`oncomplete`回调，以便您可以在完成渲染时采取行动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T22:21:41.197

Chrome 应该支持它（或者至少，大部分支持这个新功能）。

[`decodeAudioData()`](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

> 当 decodeAudioData() 完成时，它会调用一个回调函数，将解码后的 PCM 音频数据作为 AudioBuffer 提供

它与 XHR2 的处理方式几乎相同，因此您可能希望为其创建一个抽象层。

注意：我还没有测试过它是否有效，但我只在 chromium 中看到一个与此相关的错误，表明它有效但对*某些*文件失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:24:13.480

我认为您正在寻找的内容可以通过 Web Audio 中的 startRendering-function 来实现。我不知道上面的答案是否有效，但如果他们没有 - 这里有一些东西可以让你继续前进：

[https://bugs.webkit.org/show_bug.cgi?id=57676](https://bugs.webkit.org/show_bug.cgi?id=57676)（向下滚动到评论三）

这部分仍然没有记录，因此在规范中无处可见，但您可以 console.log 音频上下文以确认它确实存在。我只对它进行了一些初步测试，但我认为它应该是您问题的答案。

# html - 跳转到网页中的特定位置

> ID：10040329
> 
> 赞同：0
> 
> 时间：2012-04-06T07:12:47.163
> 
> 标签：html

我有这样的链接：

```
 <a class="faq_text_header_jump" href="#general_questions">General Questions</a><br>
  <a class="faq_text_header_jump" href="#how">How do i..</a><br>
  <a class="faq_text_header_jump" href="#once_you_book">Once you've booked lessons..</a> 
```

像这样的目标：

```
<div class="faq_text_section_header" id="how"><h2>How do I...?</h2></div> 
```

但是我的第二个和第三个链接不起作用。

在此处查看示例：http: [//lessonshark.com/dev1/homes/faq](http://lessonshark.com/dev1/homes/faq)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T07:16:14.883

HTML 有一个解决方案。

利用

```
<a name="target"> 
```

标记您要跳转到的页面中的位置

```
<a href="page.html#target"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:29:14.340

使用该`id`属性来指定链接的目的地。这是推荐的做法，虽然较旧的`<a name=...>...</a>`作品也适用，但它更受限制。在任何情况下都*不能*使用相同的名称指定目的地两次。目前标记有

```
<a name="how_do_i">
    <div class="faq_text_section_header" id="how_do_i" >How do I...?</div></a> 
```

根据 HTML 4.01 和 XHTML 1.0（尽管在 HTML5 草案中允许），这是无效的，因为`a`元素不能包含`div`元素。更严重的是，这使得 how_do_i 被双重定义，这几乎可以导致任何事情。将此修复为

```
<div class="faq_text_section_header" id="how_do_i" >How do I...?</div> 
```

并确保您的链接使用`href="#how_do_i"`（就像现在一样，但问题另有说明）。考虑将其`div`设为`h2`（并相应地调整样式表），因为它确实是一个标题。

另请注意，在链接中，

```
<a class="faq_text_header_jump"href="#how_do_i">How do i..</a> 
```

前面应该有空格`href`。这只是形式上的语法，但最好把它弄对，这样你就可以有效地利用验证器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:19:27.003

您需要在文档中的某处命名锚点。

要创建一个命名锚点，只需像这样使用 HTML：

```
<a name="anynameyoulike"></a> 
```

然后，您可以使用如下链接跳回到页面中的该点：

```
<a href="#anynameyoulike">Jump to Named Anchor</a> 
```

# java - 如何从字节数组中提取文件扩展名

> ID：10040330
> 
> 赞同：26
> 
> 时间：2012-04-06T07:13:01.883
> 
> 标签：java, sql, bytearray, mime-types

我在数据库中有字节数组。

如何从java中的字节数组中提取文件扩展名（mime/type）？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-09T11:15:57.883

原来在`JDK`'s 的`URLConnection`类中有一个不错的方法，请参考下面的答案：[Getting A File's Mime Type In Java](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java#847849)

如果需要从字节数组而不是文件中提取文件扩展名，则应该简单地使用`java.io.ByteArrayInputStream`（专门从字节数组中读取字节的`java.io.FileInputStream`类）而不是（专门从文件中读取字节的类），如下例所示：

```
byte[] content = ;
InputStream is = new ByteArrayInputStream(content);
String mimeType = URLConnection.guessContentTypeFromStream(is);
 //...close stream 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-06T07:59:11.820

如果这是用于存储上传的文件：

*   为文件扩展名创建一列
*   为浏览器发送的 mime 类型创建一列

如果您没有原始文件，并且只有字节，那么您有几个很好的解决方案。

如果您能够使用库，请查看使用 mime-util 检查字节：

[http://technopaper.blogspot.com/2009/03/identifying-mime-using-mime-util.html](http://technopaper.blogspot.com/2009/03/identifying-mime-using-mime-util.html)

如果您必须构建自己的字节检测器，这里有许多最流行的起始字节：

```
"BC" => bitcode,
"BM" => bitmap,
"BZ" => bzip,
"MZ" => exe,
"SIMPLE"=> fits,
"GIF8" => gif,
"GKSM" => gks,
[0x01,0xDA].pack('c*') => iris_rgb,
[0xF1,0x00,0x40,0xBB].pack('c*') => itc,
[0xFF,0xD8].pack('c*') => jpeg,
"IIN1" => niff,
"MThd" => midi,
"%PDF" => pdf,
"VIEW" => pm,
[0x89].pack('c*') + "PNG" => png,
"%!" => postscript,
"Y" + [0xA6].pack('c*') + "j" + [0x95].pack('c*') => sun_rasterfile,
"MM*" + [0x00].pack('c*') => tiff,
"II*" + [0x00].pack('c*') => tiff,
"gimp xcf" => gimp_xcf,
"#FIG" => xfig,
"/* XPM */" => xpm,
[0x23,0x21].pack('c*') => shebang,
[0x1F,0x9D].pack('c*') => compress,
[0x1F,0x8B].pack('c*') => gzip,
"PK" + [0x03,0x04].pack('c*') => pkzip,
"MZ" => dos_os2_windows_executable,
".ELF" => unix_elf,
[0x99,0x00].pack('c*') => pgp_public_ring,
[0x95,0x01].pack('c*') => pgp_security_ring,
[0x95,0x00].pack('c*') => pgp_security_ring,
[0xA6,0x00].pack('c*') => pgp_encrypted_data,
[0xD0,0xCF,0x11,0xE0].pack('c*') => docfile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T07:45:02.790

> 也许我需要在我的数据库中保存额外的列作为文件扩展名。

这是一个比尝试根据数据库内容推断 mimetype 更好的解决方案，原因（至少）如下：

*   如果您有来自文档源的 mime 类型，则可以存储和使用它。
*   您可以（可能）要求用户在提交文档时指定一个 mimetype。
*   如果您*必须*使用一些基于启发式的方案来确定 mimetype：
    *   您可以在创建表格行之前完成一次工作，而不是在提取它之后执行 N 次，并且
    *   您可以报告启发式没有给出好的答案的情况，并且可能要求用户说出文件类型的真正含义。

（我做了一些可能没有根据的假设，但这个问题并没有提供任何关于更大系统如何工作的线索。）

# ember.js - Ember 视图、把手和 jQuery 效果

> ID：10040339
> 
> 赞同：8
> 
> 时间：2012-04-06T07:13:57.270
> 
> 标签：ember.js

我想在我的车把模板的一部分中加入 jQuery 效果（fadeIn、fadeOut 等）。我认为这可以或多或少地通过一个单独的视图来完成，其中视图的`isVisible`属性最初是 false 并且它的`didInsertElement`方法调用类似`this.$().fadeIn()`.

但是，我想做的是向视图的一小部分添加 jQuery 效果 - 比如说为了显示一小块内容，这些内容最初被一个`{{#if}}`语句隐藏，`false`然后通过用户反馈进行评估到`true`. 请参阅以下[http://jsfiddle.net/YeGbF/2/](http://jsfiddle.net/YeGbF/2/)。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T07:52:24.117

您可以使用视图来显示淡入淡出的内容，请参阅[http://jsfiddle.net/pangratz666/dJMwC/](http://jsfiddle.net/pangratz666/dJMwC/)

**车把**：

```
{{#view App.FadeInView contentBinding="this"}}
    <div>{{content.someAdditionalDetail}}</div>
{{/view}} 
```

**JavaScript**：

```
App.FadeInView = Ember.View.extend({
    didInsertElement: function(){
        this.$().hide().show('slow');
    }
}); 
```

还可以看看[Deferring remove of a view 所以它可以被动画化](https://stackoverflow.com/q/9925171/65542)

# objective-c - 使用在Objective C的另一个类中声明的枚举数据类型

> ID：10040341
> 
> 赞同：9
> 
> 时间：2012-04-06T07:14:05.483
> 
> 标签：objective-c, enums

我有一个 DataClass.h

```
@interface DataClass : NSObject
{
}

enum knownTypes
{
    type1 = 0,
    type2,
    type3,
    UnknownType = -1
}; 
```

有没有办法可以在 .m 文件中指定 knownTypes 并从其他类访问。

这是我正在创建的 Util 类，因此不想创建一个对象来访问此类中的值。

例如：在 TestClass.m 中，通过导入 DataClass.h ，现在我可以将枚举值用作 type1,type2 .. 但如果我在 DataClass.m 中声明枚举数据，我将无法使用这些枚举值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T08:24:27.627

This has nothing to do with classes. This is a feature of C.

If you define a type or an enum in a `.h` file, you can use it by importing it (`#import`) where you need it.

If you define your enum in a `.c` or `.m` file, only elements after that definition in the file can use it.

In your case, it appears that you need the same enum in two different files. Usage is to define that enum in a separate file, e.g., `knownTypes.h` and import that file in the two files using it: `DataClass.m` and `TestClass.m`.

If `TestClass` is for testing purpose, then your current organization is OK: enum is declared in `DataClass.h` and both `DataClass.m` and `TestClass.m` import `DataClass.h`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T07:22:46.327

不，如果您`enum`在源文件而不是标题中定义 ，那么只有该源文件才能使用`enum`. 如果您想保持它“私有”但可供多个源文件使用，请将其放在单独的标头中，并将此单独的标头包含在两个源文件中。

# asp.net - 查找 asp.net 页面呈现所花费的时间

> ID：10040349
> 
> 赞同：0
> 
> 时间：2012-04-06T07:14:41.533
> 
> 标签：asp.net, vb.net, performance, rendering

我有一个 asp.net 页面，我使用 Nyromodel 将其显示为弹出窗口。该页面包含

1.  4 div 显示为选项卡（使用 Jquery 选项卡）。
2.  4 中继器。每个转发器我都有一个自定义控件，我通过将数据源设置为转发器来设置 db 中的值。（此查询可能有 300-500 行）。
3.  1 基础设施 UltraWebGrid。我将选定的值添加到网格中。

所以问题是，如果我在那个 UI 中执行任何操作，渲染时间就会太长。我记录了 sp 的执行时间，然后我发现 SP i 只需要 2-3 秒。但控件将在 30-40 秒后完全呈现。所以仅 sp 执行时间不足以满足我的领先。所以请帮助我如何分析渲染控件的时间。感谢您的任何输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:17:31.493

我强烈建议您使用 jetbrains 的 dotTrace 或 RedGate 的分析器之类的工具来分析您的网页。他们花了一些美元，但非常值得。您可能同时可以下载试用版。我相信 Visual Studio 内置了一些分析，但我从来没有像 dotTrace 那样有效地使用它。

# c - 如何在 C 中接收未命名的结构作为函数参数？

> ID：10040369
> 
> 赞同：4
> 
> 时间：2012-04-06T07:16:26.323
> 
> 标签：c, struct, function-prototypes, function-parameter

昨天在处理[这个](https://stackoverflow.com/questions/10031665/using-macros-in-c-to-define-data-structures/)问题时，我发现了一个将未命名结构作为函数参数传递和接收的奇怪案例。

例如，如果我有这样的结构，

```
int main ()
{
    struct {
        int a;
    } var;

    fun(&var);
} 
```

现在，原型应该`fun`是什么？以及如何将该结构用作函数中*的结构（指针）*`fun`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T07:18:55.560

出于对齐的原因，这个原型应该可以工作：

```
void fun(int *x); 
```

而且当然：

```
void fun(void *x); 
```

我看不到在函数中有效地使用结构的简单方法；也许在该函数中再次声明它，然后分配`void *`？

### 按要求编辑

> *6.7.2.1 - 15*
> 
> **一个指向结构对象的指针，经过适当的转换，指向它的初始成员**（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:34:17.563

您也可以定义`fun`为`void fun(void* opaque);`。然而，这不被认为是一种好的做法，因为将参数声明为`void*`将删除任何类型信息。您还需要解释传递的参数，因为您最终会得到一个指向字节序列的指针。您也必须以某种方式传递结构的大小。

这种做法在 WIN32 API 中很常见，您在结构中有一个字段来指定结构的大小（通常命名为 dwSize 或类似名称）。这也有助于传达有关结构定义版本的信息。

这里要考虑的另一件事是[结构打包](https://stackoverflow.com/questions/1537964/visual-c-equivalent-of-gccs-attribute-packed)，它依赖于编译器和平台。

# c# - WinForms 中的图标

> ID：10040374
> 
> 赞同：10
> 
> 时间：2012-04-06T07:17:41.123
> 
> 标签：c#, winforms, visual-studio

我创建了一个带有两种不同图像大小的图标：

*   一个 16x16 24bpp
*   一个 32x32 24bpp

使用 Visual Studio 中的图标编辑器。

我曾希望当被表单（表单的图标属性）使用时，我会在其左上角看到 16x16 版本，在任务栏上看到 32x32 版本。不幸的是，任务栏中也使用了 16x16 版本。

所以我的问题很简单：如何说服 Windows 在我的图标文件的不同大小之间做出“更好”的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-24T21:53:29.987

将不同大小的图像作为图层导入 Gimp。确保较大的图标是顶层。然后您可以导出为 .ICO，Gimp 将制作一个包含多个图标的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-25T02:10:47.523

更改 .ico 文件中图像的顺序：最大 -> 最小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:59:07.170

为了获得任何用途的最佳图标质量，我将创建最大的尺寸。这个尺寸是256*256。它将帮助您获得更好的质量，除了较小的尺寸，窗口不会将它们管理为唯一，因此尝试分别创建 256' 、 32' 和 16' 作为图像并将它们组合为 .ico 文件。

# iphone - 我想在 iPhone 上通过 POST 发送请求，但服务器无法接收正文

> ID：10040379
> 
> 赞同：-5
> 
> 时间：2012-04-06T07:17:50.460
> 
> 标签：iphone, post

> **可能重复：**
> [iPhone SDK Xcode 4.2 iOS 5-如何将 json 发送到 url？（POST 不是 GET）[已解决]](https://stackoverflow.com/questions/7673127/iphone-sdk-xcode-4-2-ios-5-how-do-i-send-a-json-to-url-post-not-get-resolv)

```
 NSDictionary *requestDic=[NSDictionary dictionaryWithObjects:values forKeys:keys];
    NSString *jsonreq=[requestDic JSONRepresentation];
    NSURL *requrl=[NSURL URLWithString:[NSString stringWithFormat:@"%@index.php?r=%@&te=%@&noCheck=1&checkInstall=start",[Info serverUrl],[dictParameters objectForKey:@"r"],[dictParameters objectForKey:@"te"]]];
    requrl = [NSURL URLWithString:[[requrl absoluteString] stringByAppendingString:subUrl]];
    NSMutableURLRequest *req=[NSMutableURLRequest requestWithURL:requrl];
    [req setHTTPMethod:@"POST"];
    [req setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [req setValue:@"application/json-x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    NSData *requestData=[NSData dataWithBytes:[jsonreq UTF8String] length:[jsonreq length]];
    [req setHTTPBody:requestData];
    [browser loadRequest:req] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:46:12.413

Dilshand 的回答是好的，但您可以轻松使用 ASIFormDataRequest。喜欢关注

```
 ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setRequestMethod:@"POST"];
[request setPostValue:mobileApplicationId forKey:@"mobileApplicationId"];
[request setPostValue:mobileApplicationVersion forKey:@"mobileApplicationVersion"];
[request setPostValue:userID forKey:@"userId"];
[request setPostValue:pass forKey:@"password"];
[request setValidatesSecureCertificate:NO];
[request setDelegate:self];
[request setTimeOutSeconds:60];
[request startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:43:46.437

您要发布服务器的内容提供完整的详细信息以及您遇到的错误

尝试按照我已经使用它将数据发送到服务器，它对我来说很好，希望这会有所帮助

```
 NSString *post =[[NSString alloc] initWithFormat:@"ProviderNPI=%@&PatientID=%@&FileURL=%@&FileTYPE=%@&DataSynID=%@& AppointmentListingsID=%@",providerNPI,patientID,FILEURL,FILETYPE,dataSynID,appointmentListingID];

    NSURL *url=[NSURL URLWithString:@"http://myserver.com/Sync.php?"];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:00:49.667

NSURL *url = [NSURL URLWithString:@"http://www.invoicera.com/app/api/check_json_api.php?token=7B92C122473A3D6F54E60D20AC5526D0"];

```
NSString *jsonRequest = [NSString stringWithFormat:@"&json_data=%@",[[NSString stringWithFormat:@"{\"listInvoice\":{\"client_id\":\"\",\"date_from\":\"\",\"date_to\":\"\",\"invoice_number\":\"\",\"invoice_record_status\":\"\",\"invoice_status\":\"\",\"page\":\"1\",\"per_page_record\":\"20\"}}"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSLog(@"%@",jsonRequest);

NSData *json_data = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

NSLog(@"%@",json_data);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

[request setHTTPMethod:@"POST"];
[request setHTTPBody: json_data];
NSLog(@"%@",json_data);
// [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
//[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [json_data length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:[[jsonRequest stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]
                      dataUsingEncoding:NSUTF8StringEncoding 
                      allowLossyConversion:YES]]; 
```

// [NSURLConnection connectionWithRequest:[request autorelease] delegate:self];

```
NSURLConnection *nsUrlConnection=[[NSURLConnection alloc]
                                  initWithRequest:request 
                                  delegate:self];

// Successful connection.
if (nsUrlConnection) {

   // [self initSpinner];
   // [self spinBegin];

    NSMutableData *data = [[NSMutableData alloc] init];
    self.receivedData=data;
    [data release];
} 
// Unsuccessful connection.
else {

}  
// Clean up
[url release];
[request release];
// Close keypad. 
```

# desktop-application - 关于 CAD/CAE 软件开发的书籍/博客有哪些？

> ID：10040381
> 
> 赞同：2
> 
> 时间：2012-04-06T07:17:56.967
> 
> 标签：desktop-application, cad

能否请您列出有关 CAD/CAE 工具开发的书籍？我记得浏览过一本关于其他主题（OOAD 或设计模式）的书，其中包含 CAD/CAE 工具开发中的所有示例。你知道有这样的书吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T21:34:19.883

*   Michael Mortenson 的 [几何建模](https://rads.stackoverflow.com/amzn/click/com/0831132981)
*   韦恩·蒂勒 (Les A. Piegl) [的 NURBS 书籍](https://rads.stackoverflow.com/amzn/click/com/3540615458)
*   CADG 的曲线和曲面： Gerald Farin[的实用指南](https://rads.stackoverflow.com/amzn/click/com/1558607374)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:58:01.747

除了 Alberto 提到的书籍之外，您还应该查看[Boundary Representation Modeling Techniques](https://rads.stackoverflow.com/amzn/click/com/1846283124 "边界表示建模技术")

它是关于这个主题的极少数书籍之一。

# java - 如何中止正在进行的 GWT RequestBuilder 请求？

> ID：10040388
> 
> 赞同：1
> 
> 时间：2012-04-06T07:18:38.267
> 
> 标签：java, gwt

我有一些 GWT (2.4) 提出的查询`RequestBuilder`可能需要很长时间才能执行。在这些情况下，我想允许用户取消请求。因为它只是一个中止服务器端处理的查询，不会产生任何有害的副作用。如果解决方案涉及任何问题，即使浪费的服务器端 CPU 周期也无关紧要。下面是一个例子：

```
RequestBuilder requestBuilder = new RequestBuilder(
    RequestBuilder.GET, FOOBAR_SERVICE_URL);

 requestBuilder.sendRequest("",
   new RequestCallback<ResultList>() { .... });

// I'd like to cancel the request when a Cancel button is pressed 
```

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:20:34.877

`sendRequest()``RequestBuilder`返回实例`Request`类的方法，它有方法`cancel()`，可以取消请求。

例如

```
RequestBuilder requestBuilder = new RequestBuilder(
    RequestBuilder.GET, FOOBAR_SERVICE_URL);

Request request = requestBuilder.sendRequest("",
   new RequestCallback<ResultList>() { .... });

...

//user clicked cancel button
request.cancel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:07:21.260

我从来没有使用过RequestBuilder，所以我不能确定没有更好的机制或者你已经描述过的功能。

一种方法是保留对回调的引用，如果用户按下“取消”，则在回调上设置一个标志，表示它已被取消（`setCancelled(true)`）。收到响应时，检查该标志，如果为真，则丢弃响应。

我认为您实际上不能“杀死”请求。

# android - Android 应用中的 FrameLayout 边框

> ID：10040394
> 
> 赞同：3
> 
> 时间：2012-04-06T07:19:10.700
> 
> 标签：android, android-layout, android-framelayout

为了限制 FrameLayout 或其中的视图的最大大小，我必须实施什么？

我正在为我的 Android 应用程序使用 FrameLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/dog_holder"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </FrameLayout>

</LinearLayout> 
```

我给它添加了一个视图：

```
 FrameLayout frame = (FrameLayout) findViewById(R.id.dog_holder);
    dog = new DogView(this);
    frame.addView(dog); 
```

（DogView 扩展视图）

我正在使用位图初始化视图：

```
my_dog = BitmapFactory.decodeResource(getResources(), R.drawable.dog); 
```

我想在图片周围移动（我已经实现了触摸控制）但不能在图片之外移动。一个很好的例子是一个图片库应用程序：当图片被缩放时，你可以绕过它，但在边框上有弹性效果，不允许进入黑暗的一面。

**当我试图超出位图的维度时，我必须采取什么措施来阻止我？**

# windows - 用于低延迟线程通信的 Windows 睡眠微秒

> ID：10040402
> 
> 赞同：0
> 
> 时间：2012-04-06T07:19:39.733
> 
> 标签：windows, multithreading, communication, sleep, low-latency

有什么办法可以让线程暂停 1-2 微秒？（注意 1 微秒 = 1/1000 毫秒）。我知道有人问过这个问题，但到目前为止还没有很好的答案。这是我的情况，为什么我需要这个：

我有一个运行多个线程来服务客户端请求的服务器。请求是由其他线程通过偶尔发生的共享内存发送的。但是，一旦发送请求，就需要尽快处理。因此，当请求在共享内存中排队时，我需要一种快速的方法来通知其中一个服务线程。

使用了 Windows 事件对象，但在我的机器上从 SetEvent() 到 WaitForSingleObject() 返回需要 6-7us（尝试设置进程/线程优先级但仍然没有太大改进）。我尝试使用一个繁忙的循环来让服务线程继续池化内存，从而将延迟降低到 1-2us，这已经足够了，但它会烧毁 CPU，而请求只像每分钟发送一次一样。如果我可以在循环中插入微/纳秒睡眠，我至少可以释放我的 CPU，同时保持低延迟。

如果有人能建议我另一种方法来进行延迟低于 2us 的线程通信，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:20:38.587

我认为你不能在那段时间睡觉。

上次我测试（大约 10 年前，请注意，在 Windows 2000 上）睡眠时间少于 13 毫秒导致睡眠时间为 0 毫秒或 13 毫秒。

Windows 不是实时操作系统。

您可以使用高分辨率计时器在该时间段内旋转您的线程。

老实说，尽管这几乎可以肯定意味着设计存在缺陷。

我刚刚读过这篇文章；问题是线程模型。你有一个工人池。这本质上需要跨线程通信，这是有问题的，因为它需要操作系统服务。另一种选择是每个内核一个线程，这些线程之间具有对称性，例如，它们都可以做所有事情并且您在它们之间分担负载。

# c# - 设置存储在 Blob 上的媒体文件的内容类型

> ID：10040403
> 
> 赞同：89
> 
> 时间：2012-04-06T07:19:44.737
> 
> 标签：c#, azure, content-type, jwplayer

我们在 Azure 上托管了一个网站。它是基于媒体的，我们使用 JWPlayer 通过 HTTP 伪流播放媒体。媒体文件以 3 种格式存储在 blob 中 - mp4、ogg、webm。

问题是媒体文件的内容类型设置为所有类型的应用程序/八位字节流。因此，媒体播放和进度条存在一些问题。

如何设置存储在 blob 上的文件的适当内容类型（例如 - video/mp4、video/ogg、video/webm）？

我不想通过进入 blob 界面手动为每个文件执行此操作。必须有其他一些我不知道的方法来做到这一点。也许是配置文件、设置文件等。或者可能是一个代码块，用于为存储在文件夹中的所有文件设置内容类型。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-04-06T07:36:34.397

这应该有效：

```
var storageAccount = CloudStorageAccount.Parse("YOURCONNECTIONSTRING");
var blobClient = storageAccount.CreateCloudBlobClient();

var blobs = blobClient
    .GetContainerReference("thecontainer")
    .ListBlobs(useFlatBlobListing: true)
    .OfType<CloudBlockBlob>();

foreach (var blob in blobs)
{
    if (Path.GetExtension(blob.Uri.AbsoluteUri) == ".mp4")
    {
        blob.Properties.ContentType = "video/mp4";
    }
    // repeat ad nauseam
    blob.SetProperties();
} 
```

或者设置一个字典，这样你就不必编写一堆 if 语句。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2020-06-09T21:16:23.703

不幸的是，这里接受的答案目前不适用于最新的 SDK (12.x.+)

使用最新的 SDK，应该通过 BlobHttpHeaders 设置内容类型。

```
var blobServiceClient = new BlobServiceClient("YOURCONNECTIONSTRING");
var containerClient = blobServiceClient.GetBlobContainerClient("YOURCONTAINERNAME");
var blob = containerClient.GetBlobClient("YOURFILE.jpg");

var blobHttpHeader = new BlobHttpHeaders { ContentType = "image/jpeg" };

var uploadedBlob = await blob.UploadAsync(YOURSTREAM, new BlobUploadOptions { HttpHeaders = blobHttpHeader }); 
```

YOURSTREAM 可能是一个`new BinaryData(byte[])`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-14T11:09:44.110

这是使用正确的 Content-Type 将视频上传到 Azure Blob 存储的工作示例：

```
public static String uploadFile(
     CloudBlobContainer container,String blobname, String fpath) {

    CloudBlockBlob blob;
    try {
        blob = container.getBlockBlobReference(blobname);
        File source = new File(fpath);

        if (blobname.endsWith(".mp4")) {
            System.out.println("Set content-type: video/mp4");
            blob.getProperties().setContentType("video/mp4");
        }

        blob.upload(new FileInputStream(source), source.length());

        return blob.getUri().toString();
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (StorageException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-01T16:00:39.997

使用 Azure Storage v10 SDK，可以按照[Node.js 快速入门中的说明](https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-nodejs-v10)`BlockBlobURL`上传Blob ：

```
const {
  Aborter,
  BlockBlobURL,
  ContainerURL,
  ServiceURL,
  SharedKeyCredential,
  StorageURL,
  uploadFileToBlockBlob
} = require("@azure/storage-blob");

const containerName = "demo";
const blobName = "quickstart.txt";
const content = "hello!";

const credentials = new SharedKeyCredential(
  STORAGE_ACCOUNT_NAME,
  ACCOUNT_ACCESS_KEY
);
const pipeline = StorageURL.newPipeline(credentials);
const serviceURL = new ServiceURL(
  `https://${STORAGE_ACCOUNT_NAME}.blob.core.windows.net`,
  pipeline
);

const containerURL = ContainerURL.fromServiceURL(serviceURL, containerName);
const blockBlobURL = BlockBlobURL.fromContainerURL(containerURL, blobName);

const aborter = Aborter.timeout(30 * ONE_MINUTE);
await blockBlobURL.upload(aborter, content, content.length); 
```

然后可以在上传后使用以下`setHTTPHeaders`方法设置内容类型：

```
// Set content type to text/plain
await blockBlobURL.setHTTPHeaders(aborter, { blobContentType: "text/plain" }); 
```

文件可以使用`uploadFileToBlockBlob`from 的方法上传`@azure/storage-blob`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-25T21:01:08.523

在蟒蛇

```
azure_connection_str = libc.retrieve.get_any_secret('AZURE_STORAGE_CONNECTION')
blob_service_client = BlobServiceClient.from_connection_string(azure_connection_str)
blobs = blob_service_client.list_blobs()
my_content_settings = ContentSettings(content_type='video/mp4')

for blob in blobs:
    blob_client = blob_service_client.container_client.get_blob_client(blob)
    blob_client.set_http_headers(content_settings=my_content_settings) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-19T06:52:28.347

使用php，可以通过设置内容类型来上传视频，如下所示

```
$blobRestProxy = ServicesBuilder::getInstance()->createBlobService($connectionString);
//upload
$blob_name = "video.mp4";
$content = fopen("video.mp4", "r");

$options = new CreateBlobOptions();
$options->setBlobContentType("video/mp4");
try {
    //Upload blob
    $blobRestProxy->createBlockBlob("containername", $blob_name, $content, $options);
    echo "success";
} catch(ServiceException $e){
    $code = $e->getCode();
    $error_message = $e->getMessage();
    echo $code.": ".$error_message."<br />";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-29T22:58:08.407

这就是我所做的

```
BlobHTTPHeaders h = new BlobHTTPHeaders();
String blobContentType = "image/jpeg";
h.withBlobContentType(blobContentType);
blobURL.upload(Flowable.just(ByteBuffer.wrap(Files.readAllBytes(img.toPath()))), img.length(), h, null, null, null)
.subscribe(resp-> {
  System.out.println("Completed upload request.");
  System.out.println(resp.statusCode());
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-08T10:49:54.637

您可以使用 Azure 存储资源管理器手动执行此操作。右键单击要更改的文件并选择属性。转到 ContentType 并将值编辑为正确的值，即“video\mp4”

# android - Android Button Onclick 关闭应用程序

> ID：10040404
> 
> 赞同：0
> 
> 时间：2012-04-06T07:19:48.553
> 
> 标签：android, events, button, onclick

```
btnPhotoGalary = (Button) findViewById(R.id.btn_photo_galary);
btnPhotoGalary.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        startActivity(new Intent(SplashActivity.this,
                AllPhotoActivity.class));
    }
});

btnInformation = (Button) findViewById(R.id.btn_information);
btnInformation.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        startActivity(new Intent(SplashActivity.this,
                Information.class));
    }
}); 
```

此代码用于按钮的单击事件。信息按钮显示在应用程序中，但是当您单击它时，应用程序会自动关闭。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:48:58.440

代码看起来不错...

您应该在此处粘贴错误描述。它可以从 DDMS 窗口复制。

**清单：**

检查清单文件，您是否在 XML 中定义了您的活动？

```
<activity android:name=".AllPhotoActivity" android:label="Photo Activity Title"> 
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:25:48.653

尝试

```
btnPhotoGalary = (Button) findViewById(R.id.btn_photo_galary);
    btnPhotoGalary.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(this,
                    AllPhotoActivity.class));
        }
    });

    btnInformation = (Button) findViewById(R.id.btn_information);
    btnInformation.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(this,
                    Information.class));
        }
    }); 
```

# c# - C# 更改“可见”会破坏我的停靠面板的顺序？

> ID：10040410
> 
> 赞同：0
> 
> 时间：2012-04-06T07:20:16.153
> 
> 标签：c#, panel

我有对接问题。事情就是这样。我希望我能解释清楚。

表格的设计是这样的

```
The form
   panelA -docked on top (there is a groupbox in this, it is also docked on top)
   panelB -docked on top
   tablist -docked fill 
```

问题是，panelB 需要在中间。panelB 的可见性由 panelA 中的组合框控制。因此，当用户选择组合框中的任何内容（在 panelA 中）时，panelB 是可见的并加载了相关的用户控件。

文档大纲是

```
The form
  tablist
  panelB
  panelA 
```

它们与设计处于同一级别但顺序不同。我不知道为什么。

问题是，我在构造函数中使 panelB visible=false，并在 combobox_selectedIndexChanged 中再次使其可见。但是 panelB 似乎在 panelA 的顶部。使其可见后，这就是它的外观；

```
the form
  panelB
  panelA
  tablist 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:24:02.677

在使 panelB 对以下内容可见后尝试此序列`true`：

```
panelA.BringToFront();
panelB.SendToBack(); 
```

# asp.net - Asp.net 会员密码格式

> ID：10040416
> 
> 赞同：3
> 
> 时间：2012-04-06T07:20:46.883
> 
> 标签：asp.net, asp.net-membership, membership-provider

我有使用 asp.net 成员资格的应用程序。不幸的是，用户密码是使用 PasswordFormat clear 存储的。我想将密码更改为哈希格式而不要求用户再次设置他们的密码。另一个限制是不能更改 Membership 表中的 UserId。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:27:29.807

您可以通过在 web.config 中配置会员提供程序设置和密钥来加密密码

```
<membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="15">
<providers>
<add
name="SqlProvider"
type="System.Web.Security.SqlMembershipProvider"
connectionStringName="SqlServices"
enablePasswordRetrieval="true"
enablePasswordReset="true"
requiresQuestionAndAnswer="true"
passwordFormat="Hashed"
minRequiredPasswordLength="1"
minRequiredNonalphanumericCharacters="0"
passwordStrengthRegularExpression="^([1-zA-Z0-1@.\s]{1,255})$"
applicationName="NitinJS" />
</providers>
</membership> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:13:20.117

在您的 web.config 中转到

```
<membership defaultProvider="MyMembershipProvider">
   <providers>
     <clear/>
     <add name="MyMembershipProvider"
          type="MyProviders.SqlMembershipProvider"
          connectionStringName="MyConnectionString"  
          maxInvalidPasswordAttempts="5"             
          passwordAttemptWindow="10"
          minRequiredNonalphanumericCharacters="0"
          minRequiredPasswordLength="4"
          passwordStrengthRegularExpression=""
          passwordFormat="Hashed"
          enablePasswordReset="true"
          enablePasswordRetrieval="false"             
          requiresQuestionAndAnswer="false"
          requiresUniqueEmail="true" />
   </providers>
 </membership> 
```

[在这篇MSDN](http://msdn.microsoft.com/en-us/library/ms998288.aspx)文章中有一个“密钥生成器”片段，运行它两次并将它们推到你的 web.config 中：

```
<system.web>
    <machineKey  
    validationKey="<blah>"           
    decryptionKey="<blah>"
    validation="SHA1"
    decryption="AES"
    />
</system.web> 
```

# javascript - 从应用程序加载网页，然后单击该页面上的链接？

> ID：10040419
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:21:16.167
> 
> 标签：javascript, c#, asp.net, dom-events

我正在编写一个应该加载网站的应用程序。加载网站后，我必须向网页启动第二个命令，这是一种 Javascript 脚本。

我在浏览器中手动执行此操作，通常它似乎工作正常。他们手动操作的方式是我在浏览器中创建了两个快捷方式：

1.  本网站的 URL（例如`http://www.example.net/123456-e.aspx`）
2.  调用本网站上的函数的 Scriptlet 的快捷方式（例如`javascript:__doPostBack('Video_Info1$Rating_control1$lnk_star5',''))`.

我首先单击 URL 快捷方式，然后在加载后启动第二个快捷方式。

但是如何在 C# 应用程序中做到这一点？

* * *

但是，我想做的事情与我想的完全相反。

我想发送`_postBack`到现有网站。我不是在编写我自己的包含 postBack 控件的网站！

让我稍微详细解释一下...

我在我的应用程序中加载的网站是网络中现有的 ASPX 网站。在此站点中，您会找到几个`_doPostback`条目，并且在浏览器中，postBack 事件（当我在书签/快捷方式中手动点击它时）将被发回并具有所需的结果（在这种情况下，它分配“5 星”告诉大家，有些东西非常好;-)。

所以，我想做的是编写我的 C# 应用程序，它会在`_postBack`我每次点击 OK 按钮或其他一些事件时发送这个命令。就像我上面的链接一样

```
"javascript:__doPostBack('Video_Info1$Rating_control1$lnk_star5','')" 
```

这是我在浏览器书签面板上的书签 - 一个快捷方式！

.... 老实说，这是一种作弊，它将在外部站点上进行自动投票...

我现在的问题是，...我怎样才能将它`_postBack`直接发送到网站，以增加我的星星？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:33:21.270

I am not sure what exactly you are trying to achieve, The code which you are seeing (`_doPastBack(..)`) is actually going to invoke a server method (code in your codebehind of that page).

You can create a webpage and have an iframe and load your first page in that.The user will be able to click on any of the button and invoke the corresponding server code if there is one attached.

```
<html>
<body>
  <iframe src="http://www.example.net/123456-e.aspx"></iframe>
</body> 
```

# ruby-on-rails - 在 Rails 中编写管理界面的提示

> ID：10040422
> 
> 赞同：1
> 
> 时间：2012-04-06T07:21:36.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, metaprogramming

我一直在关注[本教程](http://iain.nl/backends-in-rails-3-1)，了解如何为 rails 3 应用程序创建后端管理部分。

我喜欢它的工作方式，但是开发人员需要为他们想要在后端管理的每个资源手动生成命名空间控制器和模型。

相比之下，RailsAdmin 不需要您这样做，而是检测您的应用程序中有哪些模型，并为每个模型设置管理部分，而无需生成任何额外的代码。

有什么资源可以让我学习让我的管理部分更像 RailsAdmin 吗？（我尝试阅读 RailsAdmin 代码库，但我迷路了，因为发生了很多事情）。

理想情况下，我希望我的管理部分能够检测我的应用程序模型，并根据该模型的属性神奇地为每个模型创建管理页面。我当然不是要求任何人在这里编写我的代码，只是寻找一些关于去哪里的提示，以便了解更多关于这种元编程的信息。

# objective-c - 添加对象后检查数组

> ID：10040423
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:21:44.550
> 
> 标签：objective-c, cocoa-touch, ios5, nsmutablearray

编译器没有给我任何错误并且代码运行。只是好奇如何在添加新元素后检查数组的内容。

在我的 .h 文件中

```
@interface AddCardViewController : UIViewController <UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *cardNameTextField;

@end 
```

在我的 .m 文件中

```
@interface AddCardViewController ()

@property (nonatomic, strong)NSMutableArray *nameOfCards;

@end

@implementation AddCardViewController 

@synthesize cardNameTextField = _cardNameTextField;

@synthesize nameOfCards = _nameOfCards;

- (NSMutableArray *)nameOfCards 
{
    if (!_nameOfCards)
           _nameOfCards = [[NSMutableArray alloc] init];

    return _nameOfCards;
}

- (IBAction)addNewCard:(id)sender {
    [_nameOfCards addObject:self.cardNameTextField.text];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:56:08.497

```
- (IBAction)addNewCard
{
    [your_Array addObject:self.Your_textfeild.text];
} 
```

数组应该是 NSmutable 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:34:38.033

当您使用延迟加载（即您在其 getter 方法中创建对象）时，您必须使用 getter 来访问该对象。不要通过它的实例变量访问对象！

```
- (IBAction)addNewCard:(id)sender {
    [self.nameOfCards addObject:self.cardNameTextField.text];
    NSLog(@"my array content: %@", self.nameOfCards);
} 
```

这就是为什么你在实例变量前加上下划线。它告诉您不要直接使用实例变量，除非绝对必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:39:11.543

改变

```
 - (IBAction)addNewCard:(id)sender {
       [_nameOfCards addObject:self.cardNameTextField.text];
   } 
```

到

```
 - (IBAction)addNewCard:(id)sender {
       [self.nameOfCards addObject:self.cardNameTextField.text];
   } 
```

之后，您可以在 NSLog 中看到您的数组；

```
 NSLog(@"%@", self.nameOfCards); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T07:25:59.427

使用**NSLog**查看数组的内容，即`NSLog(@"%@",_nameOfCards);`

# android - 在某些设备中具有相同颜色值的不同颜色名称

> ID：10040426
> 
> 赞同：0
> 
> 时间：2012-04-06T07:22:00.240
> 
> 标签：android, colors

我有来自我的用户的投诉：

“在 MultiAutoCompleteTextView 控件中输入文本时 -> 文本颜色和背景颜色相同，我无法阅读文本！”

实际上我使用的是设备提供的颜色。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:layout_width="match_parent" android:layout_height="wrap_content" android:background="@android:drawable/title_bar"
    android:id="@+id/title_layout" android:padding="5dp">
    <TextView
        android:id="@+id/tv_label"
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:paddingLeft="5dp" android:layout_toLeftOf="@+id/btn_send"
        android:textColor="@android:color/primary_text_light" android:textStyle="bold"
        android:text="@string/_Find" android:layout_alignBaseline="@+id/btn_send" />
    <Button
        android:id="@+id/btn_send" android:text="@string/Search"
        android:layout_height="wrap_content" android:layout_width="wrap_content"
        android:layout_alignParentRight="true"/>
</RelativeLayout>

<MultiAutoCompleteTextView
    android:id="@+id/search_city"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:layout_marginTop="3dp" android:layout_below="@+id/title_layout"
    android:completionThreshold="1"
    android:hint="@string/CityResort"
    android:imeOptions="actionNext"
    android:nextFocusRight="@+id/search_address"
    android:drawableRight="@android:drawable/ic_input_delete"
    android:singleLine="true"
    android:text=""
    >
    <requestFocus />
</MultiAutoCompleteTextView>

<MultiAutoCompleteTextView
    android:id="@+id/search_address"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/search_city"
    android:layout_alignParentLeft="true"
    android:completionThreshold="1"
    android:hint="@string/adres_or_poi_name"
    android:imeOptions="actionDone"
    android:paddingTop="10dp"
    android:drawableRight="@android:drawable/ic_input_delete"
    android:singleLine="true"
    android:text=""
    />
<FrameLayout
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:layout_alignParentBottom="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:47:53.587

问题可能是因为不同的主题颜色。例如。我的 motorola defy 有黑色主题，因此如果你在不同的原生小部件上设置白色或黑色文本，背景可能是一个意想不到的背景（比如黑色，你将文本颜色设置为黑色）并且文本无法阅读。尝试设置您的应用程序的主题，也许这会解决您的问题。

# java - GenericJDBCException：无法加载实体

> ID：10040430
> 
> 赞同：6
> 
> 时间：2012-04-06T07:22:14.503
> 
> 标签：java, mysql, hibernate

我正在尝试读取一个惰性初始化实体`ProductUnits`，它是一个持久集，并为此打开了一个新会话。

```
Session session = HibernateUtil.getSessionFactory().openSession();
session.update(stock.getProduct());
List<ProductUnits> units = new ArrayList<ProductUnits>(stock.getProduct().getUnits()); 
```

问题是在运行时它抛出异常

```
org.hibernate.exception.GenericJDBCException: could not load an entity: [hibernate.tables.plain.Product#1] 
```

但是在进行**逐步调试时，它运行得非常好**。是 session.update 需要一些时间还是我错过了什么

异常堆栈是

```
 Exception in thread "AWT-EventQueue-0" org.hibernate.exception.GenericJDBCException: could not load an entity: [hibernate.tables.plain.Product#2]
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:126)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1895)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:121)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.immediateLoad(SessionImpl.java:863)
at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:95)
at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:140)
at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
at hibernate.tables.plain.Product_$$_javassist_15.getUnits(Product_$$_javassist_15.java)
at bill.mainBill.InputProductsPanel.computeStockAvailablity(InputProductsPanel.java:278)
at bill.mainBill.InputProductsPanel.findStock(InputProductsPanel.java:242)
at bill.mainBill.ProductDetailPanel.setStats(ProductDetailPanel.java:315)
at bill.mainBill.ProductDetailPanel$3.focusLost(ProductDetailPanel.java:187)
at java.awt.AWTEventMulticaster.focusLost(Unknown Source)
at java.awt.Component.processFocusEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)
at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Source)
at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)

    Caused by: java.sql.SQLException: Invalid value for getInt() - 'N'
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
at com.mysql.jdbc.ResultSetImpl.getInt(ResultSetImpl.java:2727)
at com.mysql.jdbc.ResultSetImpl.getInt(ResultSetImpl.java:2815)
at org.hibernate.type.IntegerType.get(IntegerType.java:51)
at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:184)
at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:173)
at org.hibernate.type.AbstractType.hydrate(AbstractType.java:105)
at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2124)
at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1404)
at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1332)
at org.hibernate.loader.Loader.getRow(Loader.java:1230)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:603)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
... 48 more 
```

那么映射文件如下

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Apr 3, 2012 1:21:15 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
 <class name="hibernate.tables.plain.ProductUnits" table="PRODUCT_UNITS">
  <composite-id mapped="false" unsaved-value="undefined">
   <key-many-to-one class="hibernate.tables.plain.Product"
    column="Product_ID" name="product"/>
   <key-many-to-one class="hibernate.tables.plain.Unit" column="Unit_ID" name="unit"/>
  </composite-id>
  <property generated="never" lazy="false" name="basePrice" type="java.lang.Double">
   <column name="BASE_PRICE"/>
  </property>
 </class>
</hibernate-mapping> 
```

和产品映射

```
 <class name="hibernate.tables.plain.Product" table="PRODUCT">
        <id name="id" type="java.lang.Long">
            <column name="ID" />
            <generator class="assigned" />
        </id>
        <property name="name" type="java.lang.String">
            <column name="NAME" />
        </property>
        <property name="recommendedHolding" type="java.lang.Double">
            <column name="RECOMMENDED_HOLDING" />
        </property>
        <set name="units" table="Product_Units" inverse="false" lazy="true">
            <key>
                <column name="Product_ID" />
            </key>
            <one-to-many  class="hibernate.tables.plain.ProductUnits" />
        </set>
        <property name="active" type="java.lang.Character">
            <column name="ACTIVE" />
        </property>
    </class> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:33:50.540

似乎 Hibernate 在将字符值映射`N`到`java.lang.Boolean`.

如果您需要映射`java.lang.Boolean`，最好使用`java.lang.Boolean`或`org.hibernate.type.YesNoType`代替“java.lang.Character”。您可以在[参考资料](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-value-basic)中阅读更多内容。

或者你需要使用`java.lang.Character`，按照[参考](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom)注册一个自定义类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:36:06.303

你的问题是：

```
 Caused by: java.sql.SQLException: Invalid value for getInt() - 'N' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T14:02:02.813

那么将属性类型从字符更改为字符串

```
<property name="active" type="java.lang.String">
    <column name="ACTIVE" />
</property> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T14:51:30.333

我怀疑您的问题来自您的映射设置：

```
 <composite-id mapped="false" unsaved-value="undefined"> 
```

**笔记：**

> unsaved-value（可选 - 默认为“合理”值）：一个标识符属性值，指示实例是新实例化的（未保存），将其与在先前会话中保存或加载的分离实例区分开来。

该设置导致`PRODUCT_UNITS`不持久。

`unsaved-value`在 Hibernate3 中几乎不需要该属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T03:40:04.503

我发现另一个参考说明 hibernate 将字符转换为 int （即使文档状态字符是可用的数据类型......）。其他答案应该可以解决这个问题。或者我建议您只使用 varchar(1) - 最终结果相同。

IE）

```
@Column(name = "column", nullable = false, length = 1)
public String getColumn() {
    return column;
} 
```

或者

```
 <property name="active" type="java.lang.String">
        <column name="ACTIVE" length="1"/>
    </property> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-10T04:53:08.410

请检查 persistence.xml 文件添加正确的类 注意：-persistence.xml 文件的数据源未正确匹配

# html - 按钮位于相同的地址

> ID：10040431
> 
> 赞同：0
> 
> 时间：2012-04-06T07:22:27.637
> 
> 标签：html

我有以下html代码

```
gogu@yahoo.com wants to be your partner. Do you agree? 
<br><input type="button" id="1" name="btn1" class="button" value="Yes"  onclick="window.location='confirm/gogu@yahoo.com';" />     
<input type="button" id="2" name="btn2" class="button" value="No"  onclick="window.location='decline/gogu@yahoo.com';" /> 
```

问题是当我单击“否”按钮时，它会让我进入同一个地址确认/gogu@yahoo.com。

我怎样才能正确重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:26:08.123

尝试使用 window.location.href=

# c++ - C++ 内存分配 new[] 和 delete[]

> ID：10040436
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:22:45.923
> 
> 标签：c++, memory, allocation

我正在尝试动态分配一个新对象。

```
 int len = (nm == NULL) ? 0 : strlen(nm);

try {
  name = new char[len + 1];
}
catch(std::bad_alloc) {
  name = NULL;
}
if(name) {
    if(nm == NULL)
        strcpy(name, "");
    else
    {
        strcpy(name, nm);
        cmds=new command [num_of_cmds]; 
```

然后我的析构函数将它们通过

```
robot::~robot()
{
if (name) {
    delete[] name;
}
delete [] cmds;
} 
```

我不断收到分段错误，如果我编辑一些代码来初始化一个简单 int 上的值，它就会中断。我的 delete[] cmds 中断了，所以我必须将其注释掉。任何帮助将不胜感激。如果人们需要，我会澄清更多的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:33:38.680

当您的机器人名称为 NULL ( `nm == NULL`) 时，您分配一个空字符串，但**不要**分配`cmds`。因此，您至少应该在该分支中将 cmds 设置为 NULL，或者`if (name && *name != 0)`在`delete [] cmds;`. 我会选择第一个选项...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:11:40.847

除非您有充分*的*理由不这样做，否则您应该避免使用`new[]`and`delete[]`而是使用`std::string`and `std::vector`。这些为您处理内存管理；并且因此相当容易使用。

`std::vector`比手动分配的缓冲区有用得多，不仅因为它为您处理内存，而且它仍然与旧的 C 样式 API 兼容。在需要提供`const char *`or的情况下`char *`，您可以简单地提供`&vec[0]`（如 的第一个元素的地址`std::vector`）。

`std::string`使内存管理、字符串操作和（结合`std::stringstream`）字符串格式化变得非常、非常、容易*得多*。不要试图自己处理内存管理，使用经过充分测试的`std::string`和`std::vector`.

# python - 在 Django admin 中覆盖表单

> ID：10040442
> 
> 赞同：47
> 
> 时间：2012-04-06T07:23:19.840
> 
> 标签：python, django, django-models, django-admin, django-views

在 Django admin 中，我想为模型（例如 Invoice 模型）覆盖并实现我自己的表单。

我希望发票表单具有客户名称、产品名称的自动填写字段，并且我还想进行自定义验证（例如客户的信用额度）。如何覆盖 Django 管理员提供的默认表单并实现我自己的？

我是 Django 的新手，我很感激任何指示。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-06T09:16:10.270

您可以通过将 ModelAdmin 的表单属性设置为您自己的表单类来覆盖 django 内置管理员的表单。看：

1.  [https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form)
2.  [https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin)

也可以覆盖表单模板 - 看看[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#custom-template-options](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#custom-template-options)

如果您专门寻找自动完成功能，我可以推荐[https://github.com/crucialfelix/django-ajax-selects](https://github.com/crucialfelix/django-ajax-selects)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-09-25T20:14:21.633

如何根据[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.form)覆盖 django 管理员中的表单：

```
from django import forms
from django.contrib import admin
from myapp.models import Person

class PersonForm(forms.ModelForm):

    class Meta:
        model = Person
        exclude = ['name']

class PersonAdmin(admin.ModelAdmin):
    exclude = ['age']
    form = PersonForm 
```

# python - 在不使用 DOM 方法的情况下迭代解析大型 XML 文件

> ID：10040444
> 
> 赞同：3
> 
> 时间：2012-04-06T07:23:35.317
> 
> 标签：python, xml, xml-parsing, lxml

我有一个xml文件

```
<temp>
  <email id="1" Body="abc"/>
  <email id="2" Body="fre"/>
  .
  .
  <email id="998349883487454359203" Body="hi"/>
</temp> 
```

我想读取每个电子邮件标签的 xml 文件。也就是说，有一次我想读取电子邮件 id=1..从中提取正文，读取的电子邮件 id=2...并从中提取正文...等等

我尝试使用 DOM 模型进行 XML 解析，因为我的文件大小为 100 GB ..该方法不起作用。然后我尝试使用：

```
 from xml.etree import ElementTree as ET
  tree=ET.parse('myfile.xml')
  root=ET.parse('myfile.xml').getroot()
  for i in root.findall('email/'):
              print i.get('Body') 
```

现在，一旦我获得了根..我不明白为什么我的代码无法解析。

使用 iterparse 时的代码抛出以下错误：

```
 "UnicodeEncodeError: 'ascii' codec can't encode character u'\u20ac' in position 437: ordinal not in range(128)" 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T07:39:58.873

iterparse 的一个例子：

```
import cStringIO
from xml.etree.ElementTree import iterparse

fakefile = cStringIO.StringIO("""<temp>
  <email id="1" Body="abc"/>
  <email id="2" Body="fre"/>
  <email id="998349883487454359203" Body="hi"/>
</temp>
""")
for _, elem in iterparse(fakefile):
    if elem.tag == 'email':
        print elem.attrib['id'], elem.attrib['Body']
    elem.clear() 
```

只需将 fakefile 替换为您的真实文件即可。另请阅读[此](http://effbot.org/zone/element-iterparse.htm#incremental-parsing)内容以获取更多详细信息。

# c# - BeginInvoke 在显式接口成员上

> ID：10040446
> 
> 赞同：0
> 
> 时间：2012-04-06T07:23:51.210
> 
> 标签：c#, .net, compact-framework, begininvoke

使用“经典”方法实现，我通常像这样执行 BeginInvoke：

```
private delegate void FooDelegate();
public void Foo()
{
  if(InvokeRequired)
  {
    BeginInvoke(new FooDelegate(Foo));
    return;
  }

  // Do what you want here
} 
```

当方法是显式接口成员声明时，如何做同样的事情？像：

```
public void IFace.Foo()
{
  // Need to BeginInvoke here
} 
```

这不起作用：

```
private delegate void FooDelegate();
public void IFace.Foo()
{
  if(InvokeRequired)
  {
    BeginInvoke(new FooDelegate(IFace.Foo));
    return;
  }

  // Do what you want here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:28:55.990

您必须先转换`this`为`IFace`：

```
var iface = (IFace)this;
BeginInvoke(new FooDelegate(iface.Foo)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:41:39.010

因为您的实现是[显式](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)的，所以无法通过类实例访问 Foo 方法。仅通过接口实例。这意味着您需要将实例`this`转换为`IFace`实例。然后你可以将该方法传递给`BeginInvoke`：

```
var asIFace = (IFace)this;
BeginInvoke(asIFace.Foo)); 
```

# ruby-on-rails - 是否有允许我只定义一次模型的框架？

> ID：10040449
> 
> 赞同：3
> 
> 时间：2012-04-06T07:24:03.800
> 
> 标签：ruby-on-rails, model-view-controller, node.js, backbone.js, dry

我刚刚完成了几个模型的创建，并且必须将它们的所有属性分别写入 1）Rails ActiveRecord 2）Rails 数据库迁移和 3）Backbone.js 模型。我感觉不是很干燥。我假设解决这个问题的第一步是切换到 node.js，我可以在后端和前端使用 CoffeeScript（理想情况下重用相同的 Backbone.js 模型），但是数据库模式呢？我意识到我可以创建一个从模型属性生成 SQL 的框架，但在我开始这项工作之前，我想知道这样的东西是否已经存在或正在开发中。

如果这个框架可以统一视图和控制器，这样我就没有 app/views、app/controllers、app/assets/javascripts/views、app/assets/javascripts/routers 等所有定义类似不同地方的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:41:47.507

[这是Wakanda](http://www.wakanda.org/)系统的目标之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:46:55.820

对于模型，您可以简单地创建一个基类并从中继承。您只需要调用`set_table_name`派生类。我已经摆脱了这个。它的优点是您可以调整派生类中的功能。例子：

应用程序/模型/widget.rb：

```
class Widget < ActiveRecord::Base
   def some_common_method
      # ...
   end
end 
```

应用程序/模型/blue_widget.rb：

```
class BlueWidget < Widget
   set_table_name "blue_widgets"
   # special methods, if any
end 
```

等等

对于迁移，只需为公共表列定义一个函数。例如：

```
def common_table_columns(t)
   t.integer :id
   t.stirng :some_string
   # etc
end

create_table(:table1) { |t| common_table_columns(t) }

[:table2,:table3,:table4].each do |name|
   create_table(name) { |t| common_table_columns(t) }
end

create_table :table5 do |t|
    common_table_columns(t)
    t.string :extra
end 
```

不能代表 Backbone.js（刚刚），但我 100% 确信您可以实现相同类型的重复代码消除。Javascript 与 ruby​​ 一样具有动态性。

说了这么多，为什么你有几个相同的表？您是否使用正确的解决方案来解决正确的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:14:16.847

查看[Derby ，这是一个正在](http://derbyjs.com/)[积极开发](https://github.com/codeparty/derby)中的 node.js 框架，它试图统一视图和控制器（以及更多）：

> [Derby] 在服务器和浏览器中运行相同的代码，并自动同步数据。Derby 负责开箱即用的模板呈现、打包和模型视图绑定。由于所有功能都旨在协同工作，因此无需重复代码和粘合代码。

我正在用 Derby 构建一个小型的业余爱好应用程序，到目前为止，它既有趣又具有挑战性。一个统一的新世界有它自己的物理。

[需要注意的一点是 Derby 建立在Racer](https://github.com/codeparty/racer)之上，这是一个“实时模型同步引擎”；如果您期待将 Backbone.js、express 和一些数据库层缝合在一起的轻量级胶水代码之类的东西，您可能会发现它“很重”。

* * *

**编辑**：我还没有仔细研究过的其他框架：

*   [流星](http://www.meteor.com/)（node.js）
*   [ClojureScript 一](http://clojurescriptone.com/)（ClojureScript）

# ios - 使用 stringWithFormat 时的 EXC_BAD_ACCESS？

> ID：10040454
> 
> 赞同：10
> 
> 时间：2012-04-06T07:25:02.770
> 
> 标签：ios, xcode

在部署我的应用程序时，我收到错误消息：“线程 1：程序收到信号：”EXC_BAD_ACCESS”。

我的代码如下：

```
-(NSDictionary *)syncWithList:(NSInteger)listID
{
    NSString *urlit = [NSString stringWithFormat:@"http://0.0.0.0:3000/lists/%@/syncList.json?auth_token=%@",@"xxxxxxxxxxx",listID];
// **Here I got the error message: "Thread 1:Program received signal: "EXC_BAD_ACCESS"**
    NSLog(@"url: %@",urlit);
    NSURL *freequestionurl = [NSURL URLWithString:urlit];
    ASIHTTPRequest *back = [ASIHTTPRequest requestWithURL:freequestionurl];
    [back startSynchronous];
    self.listData = [[back responseString] objectFromJSONString];
    NSLog(@"%@",listData);
    NSDictionary *dicPost = [listData objectAtIndex:0];
    return dicPost;
} 
```

非常感谢！！！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-06T08:05:40.550

您不能使用说明符进行格式化`NSInteger`（这只是`int`当前 iOS 版本上的 typedef'd） `%@`。以字符串格式编写`%@`基本上意味着“调用`description`对象并使用结果”。
但是 NSInteger 不是一个对象，它是一个原始类型。
您会得到一个内存异常，因为当 listID 为 42 时，您访问内存地址为 42 的对象。这绝对不是您想要的。

```
-(NSDictionary *)syncWithList:(NSInteger)listID
                               ^^^^^^^^^
NSString *urlit = [NSString stringWithFormat:@"http://0.0.0.0:3000/lists/%@/syncList.json?auth_token=%@",@"xxxxxxxxxxx",listID];
                                                                                                     ^^ 
```

只需使用`%i`格式说明符而不是`%@`listID。

```
NSString *urlit = [NSString stringWithFormat:@"http://0.0.0.0:3000/lists/%@/syncList.json?auth_token=%i",@"xxxxxxxxxxx",listID]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:54:23.833

编辑：所以习惯于从 Xcode 中获取错误，而它没有给我任何我忽略的线索，我没有注意到有问题的线路已经知道。我将把它留在这里，希望它对将来的人有所帮助。

尝试创建一个异常断点，它可能会直接指向您的代码所在的行，这应该可以帮助您找出问题所在。

1.  切换到左侧导航器中的断点“选项卡”。
2.  点击底部的小“+”。
3.  如镜像所显示，创建一个断点：
4.  运行你的代码，看看它在哪里弹出。

![断点添加](../Images/242d893bd91949f687ecdd0ad5a25654.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:35:37.637

您使用错误的数据类型打印出来。

```
NSLog(@"%@",listData); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:08:14.727

你在这行犯了非常流行的错误

```
NSString *urlit = [NSString stringWithFormat:@"http://0.0.0.0:3000/lists/%@/syncList.json?auth_token=%@",@"xxxxxxxxxxx",listID]; 
```

第二个参数是 NSInteger 类型，但在您使用的格式中`%@`，这只是对象，编译器认为您的 listID 是对象的地址。正确的格式是`%li`：

```
NSString *urlit = [NSString stringWithFormat:@"http://0.0.0.0:3000/lists/%@/syncList.json?auth_token=%li",@"xxxxxxxxxxx",listID]; 
```

# video - 从视频生成缩略图的服务

> ID：10040455
> 
> 赞同：1
> 
> 时间：2012-04-06T07:25:04.130
> 
> 标签：video

我想创建一个包含图像和视频的媒体库。现在对于视频，我只想显示带有播放按钮的图像，而不是嵌入视频。然后在我点击播放按钮后打开视频。就像[这个](http://chill.com/)网站所做的一样。这怎么可能做到。我可以为它编写自己的服务吗？或者有没有可以自动完成的免费服务。例如来自[embed.ly](http://embed.ly)的服务。我们给出以下内容：

```
(function() {
$.ajax({
    url: "http://api.embed.ly/1/oembed?url=http://www.youtube.com/watch?v=nwdnMcM0NXg&feature=g-all-esi&context=G27cd8c6FAAAAAAAABAA",

    cache: false,
    success: function(data) {
        console.log(JSON.parse(data).thumbnail_url);
    },
}); 
```

})()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:56:56.087

试试这个[转换器](http://easyhtml5video.com/)，它为您提供视频的缩略图，以便您可以将视频的图像显示为画廊。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T07:32:01.730

这是我要做的：

使用 jQuery，为图像提供一个类，将媒体链接保留在某处，例如在数据属性中：

```
<img src='img.jpg' data-link='video.mp4' class='video' /> 
```

然后是javascript：

```
$(.video).click(function(event){
var link = $(this).data("link");
$(this).replaceWith("<video src='"+link+"'/>");
}); 
```

# android - 在 Eclipse 中没有获得内容助手/智能感知

> ID：10040460
> 
> 赞同：1
> 
> 时间：2012-04-06T07:25:32.973
> 
> 标签：android, eclipse, intellisense, content-assist

我遇到了内容助手/智能感知在 onCreate 等方法中工作的问题，但是当我在 onClick 方法中调用它时它不起作用。

我附上了这两种情况的屏幕截图。

![工作内容助理](../Images/dddc5ca6ad3ef01e8c22bda51821dc6f.png)

上图显示了当我在 oncreate 方法中使用 ctrl + 空格调用它时它的工作情况

![不工作的内容助理](../Images/39ab3e9682c9c183f7684b2f04a93a63.png)

上图它不起作用

我也收到此错误“ACTIVITY NAME 类型的 onCreate(Bundle) 方法必须覆盖或实现超类型方法”

如图所示

![在此处输入图像描述](../Images/1c1b17b9a5bc9b6687e4ec31aa9b0d68.png)

但是活动已经覆盖了超级方法。

这仅在此活动中发生，其他活动内容助手正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:32:23.423

您是否尝试过重置为默认选项：

`Windows -> Preferences -> Java -> Editor -> Content Assist -> Advanced`

在那个“Api Proposal tools”是主要的。

然后它将起作用，在上面的窗口中，所有选项都仅用于智能感知（Ctrl + Space），只是看看，如果变得混乱，那么只需将其设置为默认值，就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:19:04.570

去

**窗口 -> 首选项**

见搜索框在这里写内容帮助

复制并粘贴不带引号的字符串

" **.abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789** "

在自动激活触发器中如下图所示

![在此处输入图像描述](../Images/566436b112acb5e8c0d92e6c4e9a75e8.png)

# java - 调用2个类java时出错

> ID：10040462
> 
> 赞同：0
> 
> 时间：2012-04-06T07:25:35.047
> 
> 标签：java, oop

我需要从一个类中调用两个类，基本上我需要调用的这两个类的内容是相同的，只是查询不同，但是在制作对象时出错并调用第二个类。这是我要调用的代码

```
 Tree tree = new Tree();
        return tree.hashtree(dbtoarray.getdata(), dbtoarray.GetDataPrediction());

        TreeApplicationSubject treeA = new TreeApplicationSubject();//error sign:unreachable statement
        return treeA.hashtree(dbtoarray.getdata(), dbtoarray.GetDataPrediction()); 
```

下面是我需要在第二个调用者中调用的类

```
package Engine;
import java.util.*;
/**
 *
 * @author fobia
 */
public class TreeApplicationSubject {

    double[] correlation;
    double[] meanArr;

    public double[] getCorrelation() {
        return correlation;
    }

    public double[] getMeanArr() {
        return meanArr;
    }

    public String[] hashtree(String[][] dataset, String[][] predictiondata) {
        //======fetch data from database then add 1 morre row for calculation

        String temp = "";

        String[] Means = {"Means", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"};

        //================= combine 3 array =====================================
        System.out.println("dataset.length: " + dataset.length + "\npredictiondata.length" + predictiondata.length);
        int heightofarray = (dataset.length) + (predictiondata.length) + 1;
        int lengthofarray = (dataset[0].length);
        System.out.println("heightofarray: " + heightofarray + " lengthofarray: " + lengthofarray);

        //TextArea
        temp = temp + "\n" + "heightofarray: " + heightofarray + " lengthofarray: " + lengthofarray;
        String[][] toCalculate = new String[heightofarray][lengthofarray];

        for (int a = 0; a < dataset.length; a++) {
            for (int b = 0; b < dataset[0].length; b++) {
                toCalculate[a][b] = dataset[a][b];
            }
        }
        for (int a = 0; a < predictiondata.length; a++) {
            for (int b = 0; b < predictiondata[0].length; b++) {
                toCalculate[(dataset.length) + a][b] = predictiondata[a][b];
            }
        }
        for (int a = 0; a < Means.length; a++) {
            toCalculate[heightofarray - 1][a] = Means[a];
        }

        //==========================mulai kalkulasi=============================
        System.out.println("harusnya muncul String[][]toCalculate");
        //TextArea
        temp = temp + "\n" + ("harusnya muncul String[][]toCalculate");

        for (int a = 0; a < toCalculate.length; a++) {
            for (int b = 0; b < toCalculate[0].length; b++) {
                System.out.print(toCalculate[a][b] + "\t");
            }
            System.out.println("");
        }

        System.out.println("=============================== hashtree ====================================");
        System.out.println("                       value in root position\n");

        //ngeprint dataset per row serta memecah nilai means, kalau di tree ini adalah root. dlm method ini smua data dimasukkan ke root
        for (int y = 1; y < toCalculate[0].length; y++) {
            System.out.println("dataset " + y + " is ");
            //TextArea
            temp = temp + "\n" + ("dataset " + y + " is ");
            //---
            double manto = 0;
            for (int x = 0; x < toCalculate.length - 1; x++) {//biar mulai itung data dr sini
                manto = manto + Double.parseDouble(toCalculate[x][y]);
                //nilai array per row
                System.out.print(toCalculate[x][y]);

            }
            System.out.println("\tmeans value: " + (manto / (toCalculate.length - 1)));
            toCalculate[toCalculate.length - 1][y] = "" + (manto / (toCalculate.length - 1));

        }

        System.out.println("lalallalallaa~");
        Print.Print(toCalculate);
        System.out.println("lalallalala");
        AvgDev avgDev = new AvgDev();
        //    String[][] newCombine = avgDev.FindAvg(toCalculate);//mengcombine array blm dipecah

      //        temp = temp + "\n" + ("harusnya masih nol 00");

        //mulai mengisi
        Map mapTree = new HashMap();

        //   int numClusters = 2;// int akar=2--> number of cluster;
        int treeDeep = 3;//int maxNode = 2;
        int jumlah = 1;//counter

        //positioning for childs
        for (int x = 0; x <= treeDeep; x++) {
            for (int y = 1; y <= jumlah; y++) {
                //initialize position. position adalah nomor identitas setiap node
                String position = x + "." + y;//x itu deep, y itu nomor children
                mapTree.put(position, null);
            }
            jumlah = jumlah * 2;//karena binary tree
        }

        //String sementara untuk membangun tree
        //all ID are turned into String (not string array) to enter the tree
        String root = "";
        for (int i = 1; i < toCalculate.length; i++) {
            if (i == 1) {
                root = toCalculate[i][0];
            } else {
                root = root + "," + toCalculate[i][0];
            }
        }
        mapTree.put("0.1", root);//0.1 root tree identity, since it's root, all comes up here
        System.out.println("=== Printing map tree ===");
        System.out.println("mapTree: "+mapTree);
        System.out.println("root vale: "+root);
        jumlah = 1;
        String[][] data = new String[0][0];//the strings value name is now become data
        for (int i = 0; i < treeDeep; i++) {
            for (int j = 1; j <= jumlah; j++) {
                String IDRoot = (i + "." + j);
                if (mapTree.get(IDRoot) != null) {
                    if (!mapTree.get(IDRoot).toString().trim().equals("")) {
                        String[] getMap = mapTree.get(IDRoot).toString().split(",");
                        data = new String[getMap.length][toCalculate[0].length];
//                        for (int k = 0; k < toCalculate[0].length; k++) {
//                            data[0][k] = toCalculate[0][k];
//                        }
                        for (int k = 0; k < getMap.length; k++) {
                            for (int l = 0; l < toCalculate.length; l++) {

                                //  System.out.println("aw>" + getMap[k]+"><"+toCalculate[l][0]);
                                if (getMap[k].equals(toCalculate[l][0])) {

                                    //   System.out.println("masuk");
                                    data[k][0] = getMap[k];
                                    for (int m = 1; m < toCalculate[0].length; m++) {
                                        data[k][m] = toCalculate[l][m];
                                    }
                                }
                            }
                        }

                        System.out.println("data.length>" + data.length);
                        System.out.println(">>" + "" + (i) + "." + (j));
                        //testing the tree (masuk apa gak)
                        for (int p = 0; p < data.length; p++) {
                            for (int q = 0; q < data[0].length; q++) {
                                System.out.print(data[p][q] + "|");
                            }

                            System.out.println();
                        }
                        System.out.println("WUZZZ");
                        //-----

                        KMeansClustering kmeans = new KMeansClustering();//call KMeans

                        if (data.length > 1) {

                            List valueclust = kmeans.Kmeanz(data);
                            //checking for the cluster value (checking only)
                            for (int p = 0; p < valueclust.size(); p++) {
                                String[] wew = valueclust.get(p).toString().split(";");
                                for (int q = 0; q < wew.length; q++) {
                                    System.out.print(wew[q] + "|");
                                }
                                System.out.println();
                            }
                            //----

                            //inserting to the tree
                            int numb = 1;//counter for cluster numbering (1 or 2)
                            for (int p = 0; p < valueclust.size(); p++) {
                                System.out.println("=================================================================");
                                System.out.println("CLUSTER" + numb);
                                String clusterElement = "";//strings containing the cluster elements of a clusters
                                clusterElement = "" + valueclust.get(p);
                                String judul = "";//child positioning
                                if (numb == 1) {
                                    judul = "" + (i + 1) + "." + (j * 2 - 1);
                                } else if (numb == 2) {
                                    judul = "" + (i + 1) + "." + (j * 2);
                                }
                                System.out.println("Cluster elements: " + judul + ":" + clusterElement);
                                mapTree.put(judul, clusterElement);
                                numb++;
                            }
                        }
                    }
                }
            }
            jumlah = jumlah * 2;
        }
        data = null;

        /////??????????????????????????????????????????????????????????????????????????

        // tambahan baru nih

        /////??????????????????????????????????????????????????????????????????????????

        //untuk menginisialisasi anggota cluster yang didalamnya terdapat dataset Means value
        String adaMeans = "";
        for (int i = 0; i < mapTree.size(); i++) {
            String mapStr = (String) mapTree.get(treeDeep + "." + i);

            if (mapStr != null) {
                String[] mapStrArr = mapStr.split(",");
                for (int j = 0; j < mapStrArr.length; j++) {
                    if (mapStrArr[j].equals("Means")) {
                        adaMeans = mapStr;
                    }
                }
            }
        }
        //dibawah ini untuk display anggota cluster terpilih (yg ada data means)
        System.out.println("Cluster yang ada means di dalamnya: >" + adaMeans);
        String[] adaMeansArr = adaMeans.split(",");
        data = new String[adaMeansArr.length ][toCalculate[0].length];//array yg ada data means-nya dimasukkan ke array data
//        for (int k = 0; k < toCalculate[0].length; k++) {
//            data[0][k] = toCalculate[0][k];// <-- ini untuk alokasi smua yg di arr jadi ke array data
//        }

        //untuk apa ini?
        for (int k = 0; k < adaMeansArr.length; k++) {
            for (int l = 0; l < toCalculate.length; l++) {
                // System.out.println(getMap[k]+"<>"+(arr[l][0]));
                if (adaMeansArr[k].equals(toCalculate[l][0])) {
                    data[k ][0] = adaMeansArr[k];
                    for (int m = 1; m < toCalculate[0].length; m++) {
                        data[k ][m] = toCalculate[l][m];
                    }
                }
            }
        }
        System.out.println("=============untuk print array yang ada meansnya==================");
        for (int i = 0; i < data.length; i++) {
            for (int j = 0; j < data[0].length; j++) {
                System.out.print(data[i][j] + "\t");
            }
            System.out.println("");
        }
        System.out.println("==============================*****================================");

        //----Untuk memindahkan isi data pada means, average value & SD pada means, average value pada data ke dalam array baru
        String[][] avgDevArr = avgDev.FindAvg(data);//the data of the choosen cluster exclude means data is located to a new array
        double[] avgArr = null;//the data of of average value for choosen cluster exclude means data is located to a new array
        double[] sdArr = null;//the data of of SD for choosen cluster exclude means data is located to a new array
        //double[] meanArr = null;//the data of Means in the choosen cluster is located to a new array
        double meanAvg = 0;//initialization
        double meanSd = 0;//initialization
        String[][] data2 = new String[data.length - 1][data[0].length - 1];//the new String data
        //ngisi data2
        for (int i = 0; i < data.length - 1; i++) {
            for (int j = 0; j < data[0].length - 1; j++) {
                data2[i][j] = data[i][j];
            }
        }
        //ngisi arrmean
        meanArr = new double[data[0].length - 1];
        for (int i = 0; i < data[0].length - 1; i++) {
            meanArr[i] = Double.parseDouble(data[data.length - 1][i + 1]);
        }

        //ngisi arrsd
        sdArr = new double[avgDevArr.length - 1];
        for (int i = 0; i < avgDevArr.length - 1; i++) {
            sdArr[i] = Double.parseDouble(avgDevArr[i + 1][avgDevArr[0].length - 1]);
        }

        //ngisi arravg
        avgArr = new double[avgDevArr.length - 1];
        for (int i = 0; i < avgDevArr.length - 1; i++) {
            avgArr[i] = Double.parseDouble(avgDevArr[i][avgDevArr[0].length - 2]);
        }

        //ngisi avgmean
        meanAvg = Double.parseDouble(avgDevArr[avgDevArr.length - 1][avgDevArr[0].length - 2]);
        //ngisi sdmean
        meanSd = Double.parseDouble(avgDevArr[avgDevArr.length - 1][avgDevArr[0].length - 1]);

        System.out.println("arrAVG=================================================");
        for (int i = 0; i < avgArr.length; i++) {
            System.out.print(avgArr[i] + " | ");
        }

        System.out.println();
        System.out.println("arrMeans=============================================");
        for (int i = 0; i < meanArr.length; i++) {
            System.out.print(meanArr[i] + " | ");
        }

        System.out.println();
        System.out.println("arrSD================================================");
        for (int i = 0; i < sdArr.length; i++) {
            System.out.print(sdArr[i] + " | ");
        }

        System.out.println();
        System.out.println("meanAVG===============================================");
        System.out.println(meanAvg);
        System.out.println("meanSD=============================================");
        System.out.println(meanSd);
        System.out.println("\n Data2: data of grade from chosen cluster to be inputted==========================");
        //move data from choosen cluster into new array to make the calculating easier
        for (int i = 0; i < data2.length; i++) {
            for (int j = 0; j < data2[0].length; j++) {
                System.out.print(data2[i][j] + "\t");
            }
            System.out.println("");
        }
        System.out.println("=== Start calculating for the correlation ===");
        double summation = 0;//summation adalah hasil sum dari (Data in Means - Avg Value of dataset Means)(data in each dataset - Avg Value of each dataset)
        correlation = new double[data2.length];//new array to store the correlation
        for (int i = 0; i < data2.length; i++) {
            double jml;//jml adalah jumlah summation per row
            summation = 0;//smmation adalah jumlah summation keseluruhan, untuk menghitung correlation yang dimasukan ke rumus

            for (int j = 0; j < data2[0].length; j++) {

                System.out.println("calculating for dataset number " + (i + 1));
                System.out.print("summation: " + summation + " | ");//hasilTambah
                System.out.println("data to be calculating:" + Double.parseDouble(data2[i][j]));
                System.out.print("avg of array [i]" + avgArr[i] + " | ");
                System.out.println("meanArr[j]: " + meanArr[j]);
                System.out.println("meanAvg: " + meanAvg);

                jml = ((meanArr[j] - meanAvg) * ((Double.parseDouble(data2[i][j])) - avgArr[i]));
                System.out.println();
                System.out.println("summation value per dataset is: " + jml);
                summation = summation + jml;
            }
            int Y; //Y adalah faktor pembagi, max value is the number of dataset - 1
            Y = data2[0].length - 1;
            System.out.println("\nY is: " + Y);

            double corrtemp = summation / sdArr[i] * meanSd * Y;//correlation sementara
            System.out.println(" The correlation for Means into this dataset= summation / Y ");
            System.out.println(summation + " / " + sdArr[i] * meanSd * Y + " = " + corrtemp);

            //mengisi hasil perhitungan correlation ke aray baru bernama correlation
            correlation[i] = corrtemp;
            System.out.println();
            System.out.println("---");
        }
        System.out.println();

        for (int i = 0; i < correlation.length; i++) {
            System.out.print("The correlation remains: " + correlation[i] + " | ");
        }
        System.out.println("\n=========================*****=============================");

        /////??????????????????????????????????????????????????????????????????????????

        // Calculating correlation finished
        String[] i = Prediction.computing(meanAvg, meanSd, data, correlation, meanArr, sdArr, avgArr);
        int x = i.length;

        for (int r = 0; r < x; r++) {
            temp = temp + "\n" + i[r];
        }
        /////??????????????????????????????????????????????????????????????????????????
        String[] y = new String[1];
        y[0] = temp;
        return y;
    }
} 
```

我想知道是否有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:28:56.790

如错误所示，表达式`TreeApplicationSubject treeA = new TreeApplicationSubject();`无法访问，因为您已经`return`从上一行的方法中编辑了。

您不能`return`从 java 中的方法中获取两个值 [或两次]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:38:16.357

哦，我的上帝......你已经在第二行返回控制第三行将如何执行。你应该把它放在`if(){} else{}`条件下。像下面

```
 if("Some_condition){
  Tree tree = new Tree();
    return tree.hashtree(dbtoarray.getdata(), dbtoarray.GetDataPrediction());
   }
  else{
    TreeApplicationSubject treeA = new TreeApplicationSubject();
    return treeA.hashtree(dbtoarray.getdata(), dbtoarray.GetDataPrediction());
   } 
```

# html - 添加边距会导致姐妹元素具有相同的边距

> ID：10040464
> 
> 赞同：2
> 
> 时间：2012-04-06T07:25:48.273
> 
> 标签：html, css

我已经制作了这个居中的导航栏，我想`:active`通过使它看起来像被按下来向链接添加一个状态，所以我`margin-top:2px`在`a`元素上添加了一个。

```
<ul>
    <li>Previous</li>
    <li>1</li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li>...</li>
    <li><a href="#">Next</a></li>
</ul> 
```

* * *

问题是为什么`a`即使我只将其他元素分配给当前正在单击的元素，其他元素也有一个 margin-top？

* * *

```
ul {
    text-align:center;
}
li {
    color:#555+60;
    display:inline;
    font-size:18px;
    padding:0 4px;
}
li:first-child,li:last-child {
    border:1px solid #bbb;
}
a {
    display:inline-block;
    color:#555;
}
a:active {
    margin-top:2px;
}​ 
```

**JSFiddle：http:** [//jsfiddle.net/Pxmp3/](http://jsfiddle.net/Pxmp3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:42:42.817

您实际上并没有为所有`a`元素添加边距，而是考虑到它们的行高、垂直对齐等，这是内联块元素的行为方式。

您正在`li`内联渲染元素。想象一条穿过它们的基线 - 现在，当您最终将其中一个节点的子节点向下推 2px 时，它*不会*干扰该基线，因此它最终会以统一的方式推动该基线，从而在视觉上降低其余按钮。

我建议`inline-block`在您对它的渲染细节感到满意之前避免非平凡的使用 - 例如，尝试[浮动](http://jsfiddle.net/Pxmp3/1/)或使用[position:relative](http://jsfiddle.net/Pxmp3/2/)

# java - 日食鱼眼

> ID：10040467
> 
> 赞同：2
> 
> 时间：2012-04-06T07:25:51.350
> 
> 标签：java, eclipse, eclipse-plugin

是否有任何 Eclipse 插件允许在单独的编辑器中仅显示类中的一种方法？就像一个人只将一个方法从类复制到单独的编辑器中一样，但是能够编辑（保存、使用引用搜索、ctrl+单击导航到引用的对象）这个类。简而言之，这应该是同一个 java 编辑器，只显示一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:13:23.260

单击工具栏上的“仅显示所选元素的来源”按钮。

如果没有这样的按钮，请执行以下操作：右键单击工具栏->“自定义透视...”->选择选项卡：“工具栏可见性”->菜单：“编辑器演示”->选中“显示源代码”仅选定元素"

它不在单独的编辑器中，而是为您提供所需的功能。

# asp.net - Process.Start in BackgroundWorker

> ID：10040470
> 
> 赞同：0
> 
> 时间：2012-04-06T07:26:18.293
> 
> 标签：asp.net, multithreading, asynchronous

我正在尝试在 BackgroundWorker IsBusy 时启动一个新进程。

**全球.asax：**

```
BackgroundWorker thread;
protected void Application_Start(object sender, EventArgs e)
{
     StartThread();
}
protected void StartThread()
{
     thread = new BackgroundWorker();
     thread.DoWork += new DoWorkEventHandler(DoWork);
     thread.RunWorkerAsync();
}
private void DoWork(object sender, DoWorkEventArgs e)
{
     Process p = new Process();
     p.StartInfo.FileName = "exe.exe";
     p.Start();
     p.WaitForExit(10000);
} 
```

但是什么也没发生。也没有提出任何例外。我在 p.Start() 行插入了一个断点。一切正常，只是该过程没有开始。

这可能是什么原因？我也尝试为此使用 Thread 类，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:07:11.907

您正在从`BackgroundWorker`的`DoWork`委托内部开始一个新线程。当您触发`DoWork`事件时，为什么不从 UI 线程启动新进程。这在线程安全和并发方面会好得多——这也可能是你问题的根本原因。

# c - C 程序错误

> ID：10040472
> 
> 赞同：-2
> 
> 时间：2012-04-06T07:26:31.093
> 
> 标签：c

> **可能重复：**
> [C++初学者，执行窗口很快消失](https://stackoverflow.com/questions/9436108/c-beginner-execution-window-disappears-quickly)

我是 C 编程的初学者。但是当我编译程序时，出现了问题。编译器为程序创建一个.exe，但是当我打开它时，它会在一秒钟内出现并消失。

可以通过添加来停止此错误

```
SYSTEM("PAUSE"); 
```

在程序结束时。但它会创建一个

> 按任意键继续

在程序结束时。我的错误是什么？为什么程序出现和消失的匆忙？

如何在不添加`system()`功能的情况下停止它？我正在使用 GCC 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:29:15.813

那不是错误。程序将在完成您编写的代码后终止。例如，如果您想输入一些内容，请尝试`scanf`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:30:45.890

如果您不想添加暂停或scanf，请从dos窗口运行程序而不是双击

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T07:31:08.333

这是程序的正常行为。当它走到尽头时，它已经做了它该做的，所以它没有什么可做的了。这使操作系统停止并删除其进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T07:30:11.283

这不是错误。程序在执行完成后执行并消失。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-06T07:31:59.667

您可以使用输入函数，如`gets()`or`getchar()`或`scanf()`没有输入变量，而不是`system()`

# svn - 使用`命令行`创建repo时如何在`uberSVN Web GUI`中显示`repo`

> ID：10040473
> 
> 赞同：0
> 
> 时间：2012-04-06T07:26:34.517
> 
> 标签：svn, command-line, load, repository, ubersvn

我用ubersvn

我创建回购`svnadmin create repositories/SVN`

我将转储文件加载到新仓库`svnadmin load repositories/SVN/ < backups/SVN-rev1-15.dump`

但是当我创建并加载完成时，在[UberSVN GUI](http://hostname:9890/ubersvn/views/platform/repository/viewRepositories.jsf)中查看时看不到新的 repo 显示。那么，如何在[Repositories uberSVN GUI中使用命令行显示创建 repo](http://hostname:9890/ubersvn/views/platform/repository/viewRepositories.jsf)

注意：我只想使用命令行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:54:55.397

简而言之，您无法通过命令行创建存储库并在 uberSVN 中查看它而不导入它。

您需要在命令行中创建它，然后转到 uberSVN 并单击“添加存储库”并选择“添加位于服务器上的现有存储库”。[这里](http://docs.ubersvn.com/v1.0/reference.html#R31)有这方面的文档。

或者，直接在 uberSVN 中创建存储库。

# c - vim c 在插入模式下自动完成，无需按 CX CO

> ID：10040476
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:26:59.493
> 
> 标签：c, vim

我的 vim（7.3 版）在使用 c 代码时遇到了一个奇怪的情况：

当它进入插入模式时，`s`例如，在我按下一个键后，vim 会给我标记文件（由 ctags -R 生成的文件）中的所有关键字：

```
strstrip(
sample_check(
sabd
... 
```

就像我按了CX CO，但我没有，我只是按了`s`

然后，例如按另一个键`p`，然后再次智能自动完成：

```
sp_print(
sp_test(
... 
```

我忘了我是怎么进入这个模式的，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:00:43.310

看看这个插件：[AutoComplPop](http://www.vim.org/scripts/script.php?script_id=1879)

# sd-card - 将文本文件部署到 Panda II SD 卡

> ID：10040482
> 
> 赞同：0
> 
> 时间：2012-04-06T07:27:30.397
> 
> 标签：sd-card, microcontroller, .net-micro-framework

将文本文件部署到 Panda II SD 卡的最佳方法是什么？文本文件有一些配置数据将被部署的应用程序使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:20:29.543

最简单的方法是将 SD 卡从 Fez 中取出并将其插入 PC，更新您的文件，然后将其放回原处。

有很多方法，但你需要一种方法来让变化，无论它们是什么，从你的脑海中消失并进入非斯。在考虑选项时，您需要知道执行此操作的频率、是否还需要更改程序以及是否需要在“现场”进行此类操作。

我的常用方法是有一个启动例程，每次我更改我的应用程序时（通过文件和应用程序中的版本标记，所以如果它们不同，它会在启动时写出 SD 卡所需的配置）写它）。如果您在 Fez (Wiz5100 以太网) 上有网络功能，那么您可以通过网络对该功能进行编程。所以有很多方法，取决于你希望整个系统如何工作。

# https - 通过 Fiddler 的 HTTPS->HTTP

> ID：10040483
> 
> 赞同：20
> 
> 时间：2012-04-06T07:27:41.757
> 
> 标签：https, fiddler

我正在寻找一种使用 Fiddler 将 HTTPS 会话代理到 HTTP 会话的方法，因此资源管理器将使用 HTTP 会话，而 Fiddler 在服务器前处理 HTTPS 会话：

客户端（资源管理器）<--http--> Fiddler <--https--> 服务器

谁能说这是否可以通过 Fiddler 脚本完成？

如果您对如何使用其他工具（不是 Fiddler）有其他想法，我愿意接受建议 :)

谢谢！优海

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-26T09:39:04.497

@troy 的回答很好，但还不够。您应该处理 CONNECT 的：

```
 if (oSession.HostnameIs("app.yourdomain.com") ) 
     {  
        // Handle CONNECT Tunnels
        if (oSession.HTTPMethodIs("CONNECT"))
        {
            oSession["x-replywithtunnel"] = "FakeTunnel";
            return;
        }           

        oSession.fullUrl = "http://somedomain:someport" + oSession.PathAndQuery;
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-18T05:43:22.653

尝试这个：

```
if (oSession.fullUrl.StartsWith("http://"))
{
  oSession.oRequest.headers.UriScheme = "https";
} 
```

# oracle - 公共同义词与 schema.object 模式

> ID：10040486
> 
> 赞同：1
> 
> 时间：2012-04-06T07:28:00.283
> 
> 标签：oracle, oracle10g, synonym

在我的应用程序中，会有很多用户，超过 500 个。他们只处理一个模式对象。我已授予必要的权限。当我说：

```
SELECT * FROM EMP; 
```

我收到“表或视图不存在”错误，这意味着：

1.  我要么需要在对象之前指定所有者名称。像`SCOTT.EMP`，或
2.  我可以为我将要引用的所有对象创建公共同义词。

我担心的是，公共同义词是否会对具有大约 300 个同时连接的这么多用户的性能产生影响。我应该选择第一种还是第二种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:15:57.540

公共同义词服务于一个非常特定的目的；*它们使每个*用户都可以引用一个对象-假设他们具有适当的权限。如果在未来的任何时候您可能想要更改特定用户查看对象的方式，那么公共同义词不是可行的方法。

它们还使用了整个数据库的特定对象名称。但是，存在公共同义词这一事实并不妨碍您创建具有相同名称的对象。这可能令人难以置信的混乱。

例如，假设您有一个过程`test`和一个模式`emp`。尝试执行`emp.test`将不起作用，因为您已经`emp`在*桌子*上拥有公共同义词。

[Tom Kyte](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:7769752293246)，[似乎已经写了](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2171660165273) [很多关于这个的文章。](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:7452932520496)

在性能方面，他们似乎认为公共同义词优于私有同义词会导致[性能略有下降](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:7555433442177#7640980652786)。但是，使用同义词而不是不使用同义词也会导致性能略有下降。这表明，如果每一个最后的[计算机](http://en.wikipedia.org/wiki/Computron)都是宝贵的，那么您根本不应该使用同义词。

综上所述，我认为这意味着您应该尽可能避免使用公共同义词。如果您*需要*一个，那么当然要使用一个，毕竟它们的存在是有原因的，但是如果您不需要，那么拥有一个有什么意义呢？`scott.emp`结构很清晰，可以准确地向您显示您正在引用的模式和对象，而不会被您自己或其他新接触数据库和代码的人误解。

快点。您没有明确地说出来，但您问题的措辞似乎表明您正在为每个用户创建一个模式。这似乎会造成很大的混乱......

# asp.net-mvc - 在 Asp.net MVC 中使用 Twitter 帐户登录

> ID：10040496
> 
> 赞同：1
> 
> 时间：2012-04-06T07:29:09.787
> 
> 标签：asp.net-mvc, twitter, tweetsharp

我试图让用户使用他们的 twitter 帐户登录我的网站。我正在使用 Tweetsharp 库。

现在的问题是：在我输入推特用户名和密码后，推特页面会显示一个类似“7825362101”的数字，并说要将此数字输入关注网站。

我不知道我的网站应该如何处理这个号码！！当我在 Twitter 中创建应用程序时，我已经有了“消费者密钥”和“消费者秘密”。

我希望有一个人可以帮助我！！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:33:30.493

You don't need to do anything with that number if you are using the Tweetsharp in a web application. Just do the following in your controller, this will return a list of tweets from the public timeline:

```
private readonly string _consumerKey = "yourconsumerkey";
private readonly string _consumerSecret = "yourconsumersecretkey";

public ActionResult Index()
        {
            var service = new TwitterService(_consumerKey, _consumerSecret);

            IEnumerable<TwitterStatus> model = service.ListTweetsOnPublicTimeline();

            return View(model);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:11:58.163

Spring.NET Twitter 为 ASP.NET MVC 提供了一个示例。 [http://www.springframework.net/social-twitter/](http://www.springframework.net/social-twitter/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T12:58:49.407

我认为重定向到 Twitter 身份验证时缺少某些内容。Twitter API 没有获得所有必需的值。因此，只需按照以下链接使用 Tweetsharp 库对您的 Web 应用程序进行身份验证

[http://tutorialslink.com/Articles/Login-with-Twitter-account-in-Aspnet-MVC/24](http://tutorialslink.com/Articles/Login-with-Twitter-account-in-Aspnet-MVC/24)

# iphone - iPhone文件系统操作问题

> ID：10040497
> 
> 赞同：2
> 
> 时间：2012-04-06T07:29:12.160
> 
> 标签：iphone, objective-c, ios

我想将文件从远程下载到临时文件夹

远程文件夹如：

```
http://remoteserver.com/abc/def/file1.txt
http://remoteserver.com/abc/file2.png
http://remoteserver.com/abc/pla/mnb/file3.html 
```

文件夹结构如下：

```
tmpefolder/abc/def/file1.txt
tmpefolder/abc/file2.png
tmpefolder/abc/pla/mnb/file3.html 
```

然后下载后，将文件移动到永久文件夹，并保持相同的文件夹结构

```
permanentfolder/abc/def/file1.txt
permanentfolder/abc/file2.png
permanentfolder/abc/pla/mnb/file3.html 
```

最后删除临时文件夹中的所有文件

所以我的问题是：

1.  从服务器下载多个文件的最佳方法是什么？（最好显示 ASIHTTPRequest，可以显示其他方式）

2.  创建整个文件夹结构的简单方法？我是否必须通过“/”拆分文件夹路径并检查每个级别路径是否存在并创建它？

3.  如何将整个临时文件夹内容复制到永久文件夹？是否可以通过 OS X 上的复制等操作来做到这一点？

4.  另外，像 OS X 上的删除操作，一键删除临时文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:36:12.033

1/ 你最好使用`AFNetwork`. `ASIHTTPRequest`正在变老，不再维护。`AFNetwork`更现代，并且可以使用积木（“嗯，积木”，就像荷马所说的那样）。这里有很多例子，只需搜索即可。

具体来说，`AFNetwork`允许您将下载操作放在一个`NSOperationQueue`中，您可以随意处理，例如并行下载 35 个文件，最多同时运行 4 个下载，并在一切完成后向您报告。

2, 3, 4/ 看一下`NSFileManager`. 你需要的一切都在那里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T10:21:31.337

创建所有文件的 .zip 使用以下代码下载 .zip 表单服务器。这将在 NSTemporaryDirectory 中创建您的文件夹。

```
 NSString *filePath = [NSString stringWithFormat:@"%@/FILENAME.zip",NSTemporaryDirectory()];
 [[NSFileManager defaultManager] createFileAtPath:filePath contents:[NSData dataWithContentsOfURL:[NSURL URLWithString:[obj valueForKey:@"zip_path"]]] attributes:nil]; 
```

下载后将文件夹移动到documentDirectory。

```
[[NSFileManager defaultManager] moveItemAtPath:filePath toPath:[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] error:nil]; 
```

以下代码是从 temp 中删除文件

```
[[NSFileManager defaultManager] removeItemAtPath:filePath error:nil]; 
```

# scala - Play framework 2.0 - deadLetters 代替 Actor

> ID：10040503
> 
> 赞同：3
> 
> 时间：2012-04-06T07:29:48.620
> 
> 标签：scala, akka, playframework-2.0

出于学习目的，我正在尝试实现一个从远程参与者获取数据的简单播放应用程序。演员的代码如下：

```
import akka.actor.{Props, ActorSystem, Actor}

class NumbersServer extends Actor {
  var number = 0
  protected def receive = {
    case 'next => {
      number += 1
      number
    }
    case 'reset => number = 0
    case 'exit => context.stop(self)
    case 'get => sender ! number
  }
}

object Server {
  def main(args: Array[String]) {
    val system = ActorSystem("ServerSystem")
    val server = system.actorOf(Props[NumbersServer], "server")
  }
} 
```

我将它打包到一个 jar 中并从命令行启动它。如果我尝试从另一个窗口打开的 Scala 控制台向这个演员发送消息，一切正常。现在我想从 Play 框架中获取演员。在`Application`对象中，我定义了以下方法：

```
def numbers = Action {
  Ok(views.html.numbers(Client.actor.path.name))
} 
```

然后在`models`包中我定义了 Client 对象：

```
object Client {
  import play.api.Play.current
  val actor = Akka.system.actorFor("akka://ServerSystem@127.0.0.1:2552/user/server")
} 
```

`numbers.html.scala`文件：

```
@(message: String)

@main("Header") {
    <h1>@message</h1>
} 
```

所以我希望当我去 时`127.0.0.1:9000/numbers`，我会得到一个页面，其中包含服务器参与者的路径。而不是这个，我得到`<h1>deadLetters</h1>`. 我做错了什么以及应该如何正确完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:39:45.517

请按照中给出的配置

[https://groups.google.com/forum/#!topic/akka-user/Vw-B8nQeagk](https://groups.google.com/forum/#!topic/akka-user/Vw-B8nQeagk)

并且还添加了akka-remote依赖

```
val appDependencies = Seq(
    "com.typesafe.akka" % "akka-remote" % "2.0.2"
) 
```

# c# - .Net 2.0 如何在 VS2010 中支持 LINQ

> ID：10040504
> 
> 赞同：0
> 
> 时间：2012-04-06T07:29:49.600
> 
> 标签：c#, linq, .net-2.0

我们一直致力于在 VS 2010 中加载 .NET 2.0 解决方案。**我们的 IDE 允许我们编写 Lambda 表达式、LINQ 查询等，尽管我们的项目框架设置为 2.0（我可以在项目中看到 .NET Framework 版本特性）。**

我们能够针对我们的列表实现 Predicate。我想知道当我们的项目框架是在 Visual Studio 2010 中加载的 2.0 时怎么可能。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:34:22.040

Lambda 表达式甚至查询表达式都是*C#*功能，而不是框架功能。当表达式树不可用时，您仍然可以编写转换为委托类型的 lambda 表达式。`List<T>`并且`Predicate`存在于 .NET 2.0 中，所以很好。如果您使用[LINQBridge 之](http://code.google.com/p/linqbridge/downloads/list)类的东西，您甚至可以在 .NET 2.0 中使用 LINQ to Objects，而且我相信有*一些*方法甚至可以针对 .NET 2.0 使用 Mono 的表达式树实现。

我有一个[简短的页面](http://csharpindepth.com/Articles/Chapter1/Versions.aspx)列出了针对 .NET 2.0 时可用的 C# 3 功能。在某些时候，我应该使用针对早期版本的 C# 4 功能的类似分析来更新它。

# objective-c - 下载大量图像时出现内存泄漏问题

> ID：10040506
> 
> 赞同：0
> 
> 时间：2012-04-06T07:30:09.743
> 
> 标签：objective-c, memory, memory-leaks

我正在尝试使用屏幕顶部的进度表循环下载 600 多张图像给用户。我用淡入淡出层挡住了我的屏幕，以显示活动和进度。

我在两者之间收到内存警告消息，并且应用程序崩溃。

我达到循环的步骤是：

1.  在应用程序委托上，我检查所有在 isImageAvailable bool 字段中具有“0”值的行的第一个核心数据表。
2.  如果向我显示一些计数（例如 600），我会显示并使用“是”和“否”选项发出警报。
3.  是：[self performSelector:@selector(myDownload:) withObject:nil afterDelay:0.2];
4.  在我的下载

    ```
    NSOperationQueue *queue = [NSOperationQueue new];
    // Create our NSInvocationOperation to call loadDataWithOperation, passing in nil 
    NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                     selector:@selector(startUpdatingRecords:) object:nil];

    // Add the operation to the queue 
    [queue addOperation:operation];
    [operation release];
    [queue release]; 
    ```

5.  在 startUpdatingRecords ：

    ```
    -(void)startUpdatingRecords:(id)sender 
    {    
    [self performSelectorInBackground:@selector(updateProgressMeter:) withObject:    [NSString stringWithFormat:@"%d",self.loopStartIndex]];

    // Variable declarations             
    CGSize newSizeLarge ;
    NSPredicate *predicate;
    NSMutableArray *MatchingID;
    Image_DB *data;

    // Cache Directory path
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask,  YES);

    NSData *responseData; // = [[NSData alloc]init] ;

    NSURL *url = [[[NSURL alloc]init] autorelease];
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc]init] autorelease];
    UIImage *imgSelected_Large = [[[UIImage alloc]init] autorelease];

    // Loop through all IDs
    for (int i = 0; i < [self.arrayOfID count]; i++) //for (int i = loopStart; i < loopEnd; i++) 
    { 
    if (self.abortDownload)
    {           
        break;
    } 

    NSString *documentsDirectory = [[[NSString alloc] initWithFormat:@"%@",[paths objectAtIndex:0]] autorelease];
    documentsDirectory = [paths objectAtIndex:0];
    documentsDirectory = [documentsDirectory stringByAppendingFormat:@"/ImageFolder"]; // Image folder path

    myClass *classObj = [self.arrayOfID objectAtIndex:i];   

    NSString *strURl = [[[NSString alloc] initWithFormat:@"%@%@", self.MyURL,recipeObj.recipeImageStr] autorelease];
    //NSLog(@"URL = %@",strURl);           

    url = [NSURL URLWithString:strURl];
    request = [NSMutableURLRequest requestWithURL:url];
    responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:NULL]; // Get Image Data into NSData

    //imgSelected_Large = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:strURl]]];

    NSLog(@"Download Count = %d",i+1);

    if (responseData != nil)
    {
        imgSelected_Large = [UIImage imageWithData:responseData];

        // Resizining image
        newSizeLarge.width = 320;    
        newSizeLarge.height = 180;     

        imgSelected_Large = [self imageWithImage:imgSelected_Large scaledToSize:newSizeLarge]; // New sized image
        NSData *dataPhoto; // no need to release it because UIImageJPEGRepresentation gives autoreleased NSData obj.
        dataPhoto  = UIImageJPEGRepresentation(imgSelected_Large, 0.6);  // Set new image representation and its Compression Quality

        documentsDirectory = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"Image_%d", classObj.nodeID]];            
        [dataPhoto writeToFile:documentsDirectory atomically:YES]; //Write file to local folder at default path

        predicate = [NSPredicate predicateWithFormat: @"(image_ID = %d )",recipeObj.nodeID];
        MatchingID = [CoreDataAPIMethods searchObjectsInContext:@"Image_DB" :predicate :@"image_ID" :YES :self.managedObjectContext];

        // Setting flag variable for available image
        for (int j = 0; j< [MatchingID count]; j++)
        {
            //Assign the Authors Records in Class Object and save to Database 
            data = (Image_DB*) [MatchingID objectAtIndex:j];                
            // data.image_large = dataPhoto; // Code for storing BLOB object to DB
            data.extra_1 = @"1";
            //NSLog(@"Flag updated");
        }
    }
    // Exit out code
    if ( i == [self.arrayOfID count] - 1 || i == [self.arrayOfID count]) // Its the last record to be stored
    {    
        NSError *error;             
        if (![self.managedObjectContext save:&error])
        {
            // Handle the error...
            NSLog(@"Error in updating %@",error);
        } 

        self.isUpdateImageCalled = NO;
        [self performSelectorOnMainThread:@selector(removeProgressMeter) withObject:nil waitUntilDone:NO];

    }
    // Update UI screen while in downloading process
    [self performSelectorInBackground:@selector(updateProgressMeter:) withObject:[NSString stringWithFormat:@"%d",self.loopStartIndex+i+1]];
    }
    } 
    ```

如果我没有释放 responseData，那么我的应用程序会向我显示内存警告并崩溃。如果我当时释放，[NSConcreteMutableData release]: message sent to deallocated instance 0x1e931de0 错误发生。

如何优化我的代码。任何人都可以就我的代码和返工建议我并制作精炼的代码。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:48:59.687

您`responseData`返回的 by`sendSynchronousRequest`是自动释放的，因此您不应该自己释放它。乍一看，我没有在您的代码中看到内存泄漏。您的应用程序可能*实际上*使用了太多内存，而没有泄漏它。尝试在你的 for 循环中放置一个自动释放池：

```
for (...) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    // your original code with a lot of autoreleased objects

    [pool release];
} 
```

如果您将代码包装在自动释放池中，则*所有*在包装内发送`autorelease`消息的对象将在释放池本身时实际释放：这样您就可以在每个 for 循环中清除内存。

另请参阅文档中的[Using Autorelease Pools](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)，它特别提到您应该在“如果您编写一个创建许多临时对象的循环”的情况下使用它们。

# ios - iOS：当键盘出现时禁用 UITableView 动画

> ID：10040508
> 
> 赞同：7
> 
> 时间：2012-04-06T07:30:17.310
> 
> 标签：ios, uitableview, keyboard, uitextview, becomefirstresponder

每个人都想在键盘弹出时移动 UITableView，但我正在寻找一种方法来禁用键盘弹出时对光标的自动动画。当键盘弹出并导致 UITableView 滚动到光标（以避免阻止它）时，我遇到了奇怪的抽搐/摇晃/不稳定的滚动行为。

我的每个 UITableView 单元格中都有一个 UITextView 。当键盘弹出时，我不会提交任何其他动画。

此时，我想完全禁用动画并手动滚动到所需的 CGPoint。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T14:23:48.030

自动滚动代码驻留在 tableViewController 中，因此无法禁用自动滚动。您可以从 UIViewController 子类化并在其中使用 tableView，而不是从 UITableViewController 子类化。如果你愿意使用 UITableViewController 本身，你可以重写 viewWillAppear 并且不要调用 [super viewWillAppear]。

# java - 是否可以将 Nutch Crawler 与我现有的 Lucene 项目集成？

> ID：10040510
> 
> 赞同：0
> 
> 时间：2012-04-06T07:30:37.670
> 
> 标签：java, lucene, web-crawler, nutch, heritrix

我已经有一个使用 Lucene3.5 的项目。

现在我需要提供网络搜索功能，但我不想导入整个 Nutch 项目。

所以我想知道，可能我只能使用 Nutch 的爬虫部分来爬取网站并将它们索引到 Lucene 样式中。

然后使用我现有的 Lucene 搜索器搜索索引文件。

是否可以这样做或者您有什么建议（Heritrix 怎么样）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:55:02.270

是的，可以使用您自己的 lucene 实现来搜索 nutch 生成的索引。我在我们项目的 wiki 中写了一个简短的描述，我们使用 nutch 抓取静态内容。

您可以在这里查看：[http ://code.google.com/p/gtxcontentconnector/wiki/HowTo_Nutch](http://code.google.com/p/gtxcontentconnector/wiki/HowTo_Nutch)

兄弟，克里斯

# html - 带有 Chrome 和 HTTPS Everywhere 插件的 HTML5 appcache 导致跨站点 css 无法加载

> ID：10040517
> 
> 赞同：1
> 
> 时间：2012-04-06T07:31:23.537
> 
> 标签：html, google-chrome, https, manifest, html5-appcache

我的一个网页出现了问题，该网页已更改为使用 HTML5 appcache 功能。当在页面上启用 appcache 时，Chrome 19（我假设是早期版本）会阻止我的跨站点 css 文件。该页面[http://www.ericperrets.info/index.html](http://www.ericperrets.info/index.html)从我的服务器加载了一些图像/css 文件，并从 google url/servers 加载了一些 css 文件。下面是epi.appcache文件内容

```
CACHE MANIFEST
#

CACHE:
/default.css
/800px.css
/images/bg.jpg
/images/spwright.png
/images/spwright2.png
/images/meme.jpg
/favicon.ico
/Resume%20-%20Eric%20Perret.pdf

NETWORK:
/index.html
*
http://*
https://* 
```

当页面在最新的 safari 或 firefox 中加载时可以找到，但是当我尝试在 Chrome 中加载它时，它会阻止对[http://fonts.googleapis.com/css?family=Reenie+Beanie|Candal&v1&text=的调用ERIC%20PT%E2%80%99SINFOAesum WorkapntcfLidh%2C](http://fonts.googleapis.com/css?family=Reenie+Beanie|Candal&v1&text=ERIC%20PT%E2%80%99SINFOAesumWorkaplntcfLidh%2C)

![出现错误的瀑布图和控制台的屏幕截图](../Images/0c8c64a279c12cc63b321021a704957c.png)

**更新：**我通过禁用我的 Chrome 插件之一解决了这个问题：[HTTPS Everywhere](https://www.eff.org/https-everywhere)。这是一个非常有用的插件。除了将 URL 更改为 https 之外，还有其他方法可以解决此问题吗？

# drupal - Drupal 7：单击菜单块菜单时的活动主菜单

> ID：10040537
> 
> 赞同：0
> 
> 时间：2012-04-06T07:33:35.190
> 
> 标签：drupal, drupal-7

我有 3 种内容类型

HTML HTML4 HTML5

2 菜单块 HTML4 HTML5

在我的主菜单中有 2 个菜单链接 (HOME | HTML)

HTML4（菜单块）显示 HTML4（内容类型）的内容。

当用户单击 HTML（主菜单）时，我配置了 HTML4 和 HTML5（2 个菜单块）。没事。

我的问题是：当用户单击 HTML4 或 HTML5（2 菜单块）中的链接时，如何激活（突出显示）HTML（主菜单）？

解决方案：我发现模块名称是“菜单位置” [http://drupal.org/project/menu_position](http://drupal.org/project/menu_position)。该模块在主菜单和内容类型之间建立关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:39:45.833

这样做很好：

1> 确保您使用的是自己的主题。

2> 编写菜单的css以在单击内部时突出显示。

## 知道何时单击菜单的子项

用于`jQuery`检查被单击的子项并使用 $('#MenuDiv').addClass('highlightClass'); 将突出显示类添加到菜单名称中

如果您发布菜单代码，也许我可以从 jQuery 的角度提供帮助。

# c# - 允许和限制一些 HTML 字符

> ID：10040538
> 
> 赞同：0
> 
> 时间：2012-04-06T07:33:36.573
> 
> 标签：c#, asp.net-mvc-3

我已经制作了一个消息系统，用户可以在其中相互发送消息，他们也可以将文件作为消息中的附件发送（它就像简单的电子邮件系统）。它允许用户发送 HTML 字符，它们将通过浏览器呈现，例如，如果他们输入

> `<b>Hello</b>`

它会呈现为 **Hello**

它工作正常，但是如果用户输入我将面临一个问题

```
<iframe src="anywebsite"><iframe> 
```

然后它也会由浏览器呈现。

我怎样才能只允许浏览器渲染某些特定字符，其余字符将显示为普通文本我正在使用 Asp.net MVC3

在我的模型类中，我添加
`[AllowHtml]`了允许 HTML 字符的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:47:08.120

您可以使用[AntiXss 库](http://wpl.codeplex.com/)：

例如：

```
@Html.Raw(Sanitizer.GetSafeHtmlFragment("<b>Hello</b>"))
@Html.Raw(Sanitizer.GetSafeHtmlFragment("<iframe src=\"anywebsite\"><iframe>")) 
```

第一个将以粗体呈现 Hello 文本，而第二个不会呈现任何内容，因为它不被认为是安全的。

您还可以[查看 AntiSamy 项目](https://www.owasp.org/index.php/Category%3aOWASP_AntiSamy_Project_.NET)。

# hbase - 加快 HBase 读取响应

> ID：10040541
> 
> 赞同：6
> 
> 时间：2012-04-06T07:33:52.623
> 
> 标签：hbase, benchmarking, database-performance, latency, ycsb

我在 Amazon XLarge 实例（16Gb RAM，4 核 CPU）上部署了 4 个节点 HBase v0.90.4-cdh3u3 集群，为 HRegion 服务器分配了 8Gb 堆 -Xmx，为数据节点分配了 2Gb。HMaster\ZK\Namenode 位于单独的 XLarge 实例上。目标数据集是 1 亿条记录（每条记录是 10 个字段乘以 100 字节）。从并行 100 个线程同时执行基准测试。

**[与 YCSB 团队在他们的YCSB 论文](http://research.yahoo.com/files/ycsb-v4.pdf)**中取得和展示的成果相比，我对我得到的读取延迟感到困惑。他们实现了高达 7000 ops/sec 的吞吐量，延迟为 15 毫秒（第 10 页，读取延迟图表）。在 90% 读取/10% 写入工作负载上，我无法获得高于 2000 次操作/秒的吞吐量。在禁用自动提交的情况下写入速度非常快（在几毫秒内响应），而读取延迟平均不低于 70 毫秒。

这些是我使用的一些 HBase 设置：

*   hbase.regionserver.handler.count=50
*   hfile.block.cache.size=0.4
*   hbase.hregion.max.filesize=1073741824
*   hbase.regionserver.codecs=lzo
*   hbase.hregion.memstore.mslab.enabled=true
*   hfile.min.blocksize.size=16384
*   hbase.hregion.memstore.block.multiplier=4
*   hbase.regionserver.global.memstore.upperLimit=0.35
*   hbase.zookeeper.property.maxClientCnxns=100

您建议查看哪些设置以加快 HBase 读取速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:19:20.093

升级到更新的稳定版本会有所帮助。任何 0.92+ 都将拥有更新的 HFile v2，这真的很有帮助。

*   0.94 已经发布并且有几个点发布。
*   如果您更喜欢 CDH 构建，[CDH 4.1](https://ccp.cloudera.com/display/SUPPORT/CDH4+Downloadable+Tarballs)具有基于 0.92.1 的 HBase。

在启用布隆过滤器的情况下创建表预拆分确实很有帮助。我会尝试稍微降低处理程序的数量。[http://archive.cloudera.com/cdh4/cdh/4/hbase/book.html#perf.handlers](http://archive.cloudera.com/cdh4/cdh/4/hbase/book.html#perf.handlers)

70ms 的读取延迟与我的预期相差甚远。查看 gc 调优并确保您的所有 RegionServer 都在运行，并且具有您尝试进行基准测试的表的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:23:05.857

这不是一个直接的答案。我建议您设置`Ganglia`以监控 HBase 的性能。您可以按照[此处](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-hbase-ganglia.html)和[此处](http://hbase.apache.org/metrics.html)的说明进行操作。

一旦有了指标，您就可以识别系统的瓶颈并对其进行一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T05:47:38.950

很难准确地对 HBase 进行基准测试。您还应该提供有关您正在使用的查询的一些信息。

例如，在 HBase 中，带有 RowFilter 和 QualifierPrefixFilter 的扫描查询可能会非常慢，即使您只检索一行（在 RowFilter 中指定）。

但是，使用 get 而不是 scan 和 QualifierPrefixFilter 完成**的相同查询**要快得多。

# jquery - 自定义下拉菜单鼠标离开问题

> ID：10040544
> 
> 赞同：0
> 
> 时间：2012-04-06T07:34:20.620
> 
> 标签：jquery

我有 2 个 div，其中一个包含“可点击 div”和其他“nav_menu”，即菜单。为“#clickable_div”实现了一个mouseleave函数我的问题是当我将鼠标悬停在菜单上时它不应该滑动当前正在发生我该如何解决这个问题？

注意：我正在使用一个小插件进行下拉

JSFiddle - > [http://jsfiddle.net/HtNK3/13/](http://jsfiddle.net/HtNK3/13/)

## 代码

```
$(document).ready(function() {
    var visible = false;

    $('#clickable_div').click(function() {
      visible = true;
      $('#nav_menu').showMenu({
            parent:'#clickable_div'
      });                
    }).mouseleave(function() {

    if(visible) {
        visible = false;
        window.setTimeout(function(){$('#nav_menu').hide('blind');}, 1000);
    }
    });       //end mouseleave     

    $('#l1').click(function() {
    alert("...");               
    });  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:42:24.023

> 我的问题是当我将鼠标悬停在菜单上时，它不应该滑动当前正在发生的问题我该如何解决这个问题？

然后不要在mouseleave上隐藏该框。删除所有这些：

```
.mouseleave(function() {

    if(visible) {
        visible = false;
        window.setTimeout(function(){$('#nav_menu').hide('blind');}, 1000);
    }
 }) 
```

编辑：

我能想到的最简单的方法是将整个事物包装在另一个块元素中并将`mouseleave`事件绑定到该元素。我已经更新了您的 Fiddle 以显示解决方案。

[http://jsfiddle.net/HtNK3/20/](http://jsfiddle.net/HtNK3/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:45:24.773

以下代码导致问题，

```
 .mouseleave(function() {
        if(visible) {
            visible = false;
            window.setTimeout(function(){$('#nav_menu').hide('blind');}, 1000);
        }); 
```

您要做的是当鼠标离开您要求隐藏菜单的菜单标题时。

> 尝试在菜单标题和菜单上检测鼠标移出。[检查这个答案](https://stackoverflow.com/questions/4928632/how-to-detect-mouseout-of-two-elements-in-jquery)如何做到这一点

[JS代码](http://jsfiddle.net/Bdpnd/)

已经有很多[插件](http://http:http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions///)可以做到这一点，使用其中任何一个并更改 css 以匹配您的站点

# c++ - XML Lite 解析问题 - 解析时忽略无效数据

> ID：10040551
> 
> 赞同：0
> 
> 时间：2012-04-06T07:35:07.330
> 
> 标签：c++, visual-studio, xml-parsing, xmllite

我使用微软的 XML Lite (http://msdn.microsoft.com/en-us/library/windows/desktop/ms752872%28v=vs.85%29.aspx)

有没有办法忽略它可能做的任何验证错误（我在与“”相关的节点上遇到一些模糊的错误 - 尽管 XML 输入看起来很好）并继续下一个节点？

我有这样的阅读循环

```
while ( !reader->IsEOF())
{
        result = reader->Read(&nodeType);
        if (result != S_OK)
        {
            //just ignore cuurrent read and continue reading more from XML
            continue; // does not work
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T01:42:08.993

XmlLite 返回的[错误代码是什么？](http://msdn.microsoft.com/en-us/library/windows/desktop/ms753129%28v=vs.85%29.aspx)无效字符？XmlLite 是一个符合 W3C 的 XML 解析器，这意味着它是设计用来阻塞带有无效字符的无效 XML 文件的，并且没有这样的功能可以忽略无效字符并继续前进。选项包括：

1.  使用 XmlLite 或其他兼容的 XML 解析器来生成 XML。这样一来，您就不会得到无效字符。
2.  如果您可以控制源数据，则过滤掉无效字符。XmlLite 支持 XML 1.0，有效字符范围为 #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]。

除此之外，XmlLite 可能不是您的选择。

# c - 从树中消除节点函数在 C 中不起作用

> ID：10040552
> 
> 赞同：0
> 
> 时间：2012-04-06T07:35:08.330
> 
> 标签：c

我必须从树中删除一个节点。我首先尝试消除节点根，所以我不必搜索节点并且它可以工作。但是后来我尝试通过搜索来做到这一点，当函数调用自身时，程序在通过第一个 if 语句后冻结......

问题出在函数中`void Eliminar(struct arbol *tree, int valor);`：

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
struct arbol
{
    int numero;
    struct arbol *izq;
    struct arbol *der;
};
struct arbol *raiz = NULL;
struct arbol *eliminador = NULL;
int encontrado = 0;
int right = 0, left = 0;
int crear_arbol(int dato);
struct arbol * crear_nodo(int valor);
void ImprimeDNI (struct arbol *tree);
void ImprimeIND (struct arbol *tree);
void ImprimeNDI (struct arbol *tree);
void Buscar (struct arbol *tree, int valor);
void Eliminar (struct arbol *tree,int valor);
int Eliminaroot ();
int Eliminarright(struct arbol *localizador);
int Eliminarleft(struct arbol *localizador);
int main ()
{
    int n, i;
    char opcion;
    int numero;
    puts("Ingrese la cantidad de numeros a ingresar");
    scanf("%d", &n);
    int numeros[n];
    puts("Ingrese los numeros separados por espacio o enter");
    for(i = 0; i < n; i++)
    {
        scanf("%d",&numeros[i]);
    }
    for(i = 0; i < n; i++)
    {
        crear_arbol(numeros[i]);
    }
    puts("");
    system("pause");
    system("cls");
    do
    {
        encontrado = 0;
        puts("******** OPCIONES ********");
        puts("|B o b| Para buscar un numero");
        puts("|E o e| Eliminar un nodo");
        puts("|I o i| Imprimir de las 3 formas principales");
        fflush(stdin);
        opcion = getch();
        switch(opcion)
        {
        case 'B': case 'b': puts("Ingrese el numero a buscar"); scanf("%d",&numero); Buscar(raiz,numero);
        if(encontrado == 0) {puts("El numero no esta en el arbol");} break;
        case 'E': case 'e': puts("Ingrese el numero a eliminar"); scanf("%d", &numero);
        if(raiz->numero == numero)
        {
            Eliminaroot();
        }
        else
        {
            Eliminar(raiz,numero);
            if(right == 0 && left == 0)
            {
                puts("No se encontro el numero");
            }
            if(right == 1)
            {
                Eliminarright(eliminador);
            }
            if(left == 1)
            {
                Eliminarleft(eliminador);
            }
        }
        break;
        case 'I': case 'i': ImprimeDNI(raiz); puts(""); ImprimeIND(raiz); puts(""); ImprimeNDI(raiz); puts(""); break;
        default: puts("Opcion Invalida"); break;
        }
        puts("");
        system("pause");
        system("cls");
    }while (opcion != 'T' || opcion != 't');
    return 0;
}
int crear_arbol(int dato)
{
    struct arbol *recorrer = raiz;
    struct arbol *nuevo;
    if(raiz == NULL)
    {
        raiz = crear_nodo(dato);
        return 1;
    }
    else
    {
        nuevo = crear_nodo(dato);
    }
    while (1) {
        if(recorrer->numero <= nuevo->numero)
        {
            if(recorrer->der == NULL)//si las ramas de donde esta el puntero que recorre son NULL, significa
            { //que es la ultima comparacion
                recorrer->der = nuevo;
                break;
            }
            recorrer = recorrer->der;
        }
        else
        {
            if(recorrer->izq == NULL)//lo mismo que el if de arriba
            {
                recorrer->izq = nuevo;
                break;
            }
            recorrer = recorrer->izq;
        }
    }//while
    return 1;
}
struct arbol * crear_nodo(int valor)
{
    struct arbol *aux;
    aux = (struct arbol*)malloc(sizeof(struct arbol));
    aux->numero = valor;
    aux->izq = NULL;
    aux->der = NULL;
    return aux;
}
void ImprimeDNI (struct arbol *tree)
{
    if(!tree)
        return;
    ImprimeDNI(tree->der);
    printf("%d, ", tree->numero);
    ImprimeDNI(tree->izq);
}
void ImprimeIND (struct arbol *tree)
{
    if(!tree)
        return;
    ImprimeIND(tree->izq);
    printf("%d, ", tree->numero);
    ImprimeIND(tree->der);
}
void ImprimeNDI (struct arbol *tree)
{
    if(!tree)
        return;
    printf("%d, ", tree->numero);
    ImprimeNDI(tree->der);
    ImprimeNDI(tree->izq);
}
void Buscar (struct arbol *tree, int valor)
{
    if(tree->numero == valor)
    {printf("El numero si se encuentra en el arbol"); encontrado = 1;}
    if(!tree)
        return;
    Buscar(tree->der, valor);
    Buscar(tree->izq,valor);
}
int Eliminaroot ()
{
    int encontrado = 0;
    struct arbol *aux = raiz;
    struct arbol *buscador = raiz->der;
    for(; buscador->der != NULL ; buscador = buscador->der)
    {
        if(buscador->izq != NULL)
        {
            encontrado = 1;
        for(; buscador->izq->izq != NULL ; buscador = buscador->izq)
        {
        }
        break;
        }//if
    }
    if(encontrado == 0)
    {
        if(raiz->der == NULL)
        {
            raiz = aux->izq;
            raiz->izq = aux->izq->izq;
            raiz->der = aux->izq->der;
        }
        else
        {
        raiz = aux->der;
        raiz->izq = aux->izq;
        raiz->der = aux->der->der;
        free(aux);
        }
    }
    else
    {
    raiz = buscador->izq;
    raiz->der = aux->der;
    raiz->izq = aux->izq;
    buscador->izq = NULL;
    free(aux);
    }
    return 1;
}
void Eliminar (struct arbol *tree, int valor)
{
    if(tree->izq->numero == valor)
    {
        eliminador = tree;
        left = 1;
    }
    puts("AAAA");
    if(tree->der->numero == valor)
    {
        eliminador = tree;
        right = 1;
    }
    if(!tree)
        return;
    Eliminar(tree->der, valor);
    Eliminar(tree->izq, valor);
}
int Eliminarright(struct arbol *localizador)
{
    return 1;
}
int Eliminarleft(struct arbol *localizador)
{
    return 1;
}* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:46:45.313

正如尼克建议的那样，您应该`tree`在`Eliminar`. 但是，如果第一`if`条语句执行良好，`tree`则不能`NULL`. `tree->der`可以，但是 - 您也应该在取消引用之前检查它。当然，`tree->izq`在第一个 if 中也是如此 - 只是因为在您第一次调用此函数时它不是 NULL，所以不要假设它永远不会。

进一步说明：您正在搜索具有 in 值的节点`valor`（`Eliminar`因此这是一个坏名字 - 您没有消除那里的节点，只是将其标记为以后删除）。

如果找到它，继续搜索就没有意义了，因此您可以`return`立即从两个`if`分支中搜索。

此外，当您`valor`在左子树或右子树中找到时，您可以通过设置`left`or`right`标志并相应地调用`Eliminarleft`or来分别处理这些情况`Eliminarright`。直接存储要删除的左子树或右子树会简单得多，因此您可以删除两个标志和两种删除方法：

```
void Eliminar (struct arbol *tree, int valor)
{
    if(!tree)
        return;
    if(tree->izq && tree->izq->numero == valor)
    {
        eliminador = tree->izq;
        return;
    }
    puts("AAAA");
    if(tree->der && tree->der->numero == valor)
    {
        eliminador = tree->der;
        return;
    }
    Eliminar(tree->der, valor);
    Eliminar(tree->izq, valor);
}

...
Eliminar(raiz,numero);
if(!eliminador)
{
    puts("No se encontro el numero");
}
else
{
    Eliminar(eliminador);
} 
```

这更干净，但我们可以走得更远。请注意，您正在检查 中的左右子树`Eliminar`，然后对其进行递归。只检查`tree`自身就足够了，然后递归：

```
void Eliminar (struct arbol *tree, int valor)
{
    if(!tree)
        return;
    if(tree->numero == valor)
    {
        eliminador = tree;
        return;
    }
    puts("AAAA");
    Eliminar(tree->der, valor);
    Eliminar(tree->izq, valor);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:43:07.143

您没有检查`tree`函数顶部的指针，因此可能会导致空指针访问冲突。将您的`if (!tree) return;`支票移动到函数的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:35:04.147

@PéterTörök 的回答让您成为其中的一部分。在我看来，您有一个标准的二叉树设置，左侧为“值小于”，右侧为“值大于”（或者如果您允许重复，则可能 >=）。

不过，摆脱全局变量（`Eliminar`集合`eliminador`和左/右标志）会非常好，您可以通过使用指向指针的指针来做到这一点。它可以获取指向树节点的指针，而不是`Eliminar`获取树节点，并在删除节点时更新它。此外，删除节点后，您可以停止：

```
int Eliminar(struct arbol **tree_p, int valor)
{
    struct arbol *tree = *tree_p;

    if (!tree)
        return 0; /* nothing to remove */ 
    if (tree->numero == valor) {
        /* this is the node to remove */
        *tree_p = rewrite(tree); /* rewrite subtree from here down, and update */
        return 1; /* indicate that we're done */
    }
    /* didn't find the node to remove ... use left or right subtree for next attempt */
    tree_p = tree->numero > valor ? &tree->der : &tree->izq;
    return Eliminar(tree_p, valor);
} 
```

（不确定我上面的左/右是否正确；我把它留给你处理:-)）。

现在很容易将递归变成迭代。困难的部分是`rewrite()`，因为您可以同时拥有 的左右子树`tree`。如果你只有一个，这很容易，但如果你有两个，那就不那么容易了。再次，我把它作为练习...... :-)

您可以`Eliminar`返回实际删除的树节点（或者`NULL`如果`valor`不在树中）；这在某些情况下可能很有用。在任何一种情况下，您只需执行以下操作：`result = Eliminar(&root, valor);`更新根节点并获取成功/失败指示器。

# ruby-on-rails - Ubuntu 上的乘客仍然只提供默认的 index.html

> ID：10040555
> 
> 赞同：1
> 
> 时间：2012-04-06T07:35:24.620
> 
> 标签：ruby-on-rails, apache, passenger

试图让我的服务器为我的 Rails 应用程序提供服务。

我安装了一个测试应用程序，已经安装了 apache2 和乘客我是否已将以下内容添加到 apache2.conf

```
# Include the virtual host configurations:
Include sites-enabled/
NameVirtualHost localhost:80
<VirtualHost localhost:80>
      ServerName 192.168.1.67
      DocumentRoot /home/john/Public/test-app
</VirtualHost> 
```

显然，我误解了一些东西，因为我认为这应该将对我的本地 IP 的调用重定向到我的 rails 应用程序。它不是。它将转到默认的 apache index.html。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T07:40:57.420

更新的答案：我认为您缺少“目录”节点。尝试使用此配置代码：

（假设您的项目路径是：/home/john/Public/test-app）

```
<VirtualHost *:80>
    DocumentRoot /home/john/Public/test-app/public
    RailsEnv development
    <Directory /home/john/Public/test-app/public>
    AllowOverride all 
    Options -MultiViews
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:40:26.593

我通常是这样做的：

```
<VirtualHost *:80>
    ServerName mysubdomain.betamaster.us
    DocumentRoot /var/www_home/mysubdomain/
</VirtualHost> 
```

应用这些更改后，请确保执行

```
/etc/init.d/apache2 reload 
```

为了重新加载服务器配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T19:38:46.090

我在这个问题上有相同的症状，但这是一个不同的问题。我的 apache 安装已经启用了虚拟主机，所以我必须禁用它并使用命令启用我自己的

```
sudo a2dissite default
sudo a2ensite myapp 
```

其中 default 是 sites-avaliable/ 中默认包含的虚拟主机文件的名称，而 myapp 是我添加的文件。

希望这可以帮助某人。

# java - 如何使表格布局屏幕独立

> ID：10040556
> 
> 赞同：0
> 
> 时间：2012-04-06T07:35:42.627
> 
> 标签：java, android

1.这是我的代码，我试图在表格布局的帮助下显示按钮矩阵。我也试图使这个矩阵屏幕独立，但这不能正常工作。在大尺寸模拟器中，它给出了问题按钮重叠。

```
 TableLayout layout = new TableLayout (this);
     layout.setStretchAllColumns(true);
     Display display = ((WindowManager)       getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
           int width = display.getWidth();  
           int height = display.getHeight();
           layout.setLayoutParams( new TableLayout.LayoutParams(height,width) );

            layout.setPadding(1,1,1,1);

            for (int f=0; f<=3; f++) 
            {
                TableRow tr = new TableRow(this);

                for (int c=0; c<=3; c++) 
                {
                    Button b = new Button (this);
                    b.setText(""+f+c);
                    b.setTextSize(10.0f);
                    b.setTextColor(Color.rgb( 100, 200, 200));

                  tr.addView(b,30,30);

                    final float scale = getBaseContext().getResources().getDisplayMetrics().density;
                    int pixels = (int) (dps * scale + 0.5f);
                     b.setHeight(pixels);
                     b.setWidth(pixels);

                } // for
                layout.addView(tr);
            } // for

            super.setContentView(layout);
        } 

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:56:10.217

您正在以一种奇怪的方式设置布局参数。尝试使用：

```
layout.setLayoutParams( new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); 
```

按钮也有同样的问题。尝试使用这个：

```
Button b = new Button (this);

LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);
params.gravity = Gravity.CENTER; // if you want it centered
params.span = 1;

b..setLayoutParams(params);

b.setText(""+f+c);
b.setTextSize(10.0f);
b.setTextColor(Color.rgb( 100, 200, 200));

tr.addView(b); 
```

并且不要使用“比例”设置高度和宽度值。该`params.span = 1;`部分应为表格行中的每个元素提供相同的宽度。并将`params.gravity = Gravity.CENTER;`其居中在表格单元格中。

或者你可以使用 GridLayout。在这里查看：[新布局小部件：空间和网格布局](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:57:52.703

我不熟悉 TableLayout，但您可以使用 LinearLayout 来使按钮大小相同。你可以有一个垂直的 LinearLayout 包装 4 个水平的 LinearLayout，每个都有 4 个内部具有相同布局权重的按钮。

示例线性布局：http: [//developer.android.com/resources/tutorials/views/hello-linearlayout.html](http://developer.android.com/resources/tutorials/views/hello-linearlayout.html)

# django - 如何安排在每月特定日期运行的 Celery 任务？

> ID：10040566
> 
> 赞同：0
> 
> 时间：2012-04-06T07:37:34.223
> 
> 标签：django, celery, django-celery

我尝试使用此[解决方案](https://stackoverflow.com/questions/4397530/how-do-i-schedule-a-task-with-celery-that-runs-on-1st-of-every-month#_=_)但没有成功。如何指定应在一个月中的哪一天执行任务？我的解决方案是

```
class DayOfMonth(schedule):

    def __init__(self, day=1):
        self.day = day

    def is_due(self, last_run_at):
        now = datetime.datetime.now()
        if now.month != last_run_at.month and now.day == self.day:
            return True, 3000
        return False, 3000

    def __eq__(self, other):
            if isinstance(other, DayOfMonth):
                return self.day == other.day and self.month == other.month
            return False 
```

我尝试使用 django-celery 运行它，但我仍然收到未指定 run_every 的错误。

编辑1：

我运行我的任务添加：

```
"my_task": {
        "task": "util.tasks.CeleryManagementCommand",
        "schedule": DayOfMonth(day=4),
        "args": ('my_task',),
    }, 
```

`CELERYBEAT_SHEDULE`听写_

编辑2：

**当我在init**中指定 run_every ->`self.run_every = None`我收到 None 类型对象没有属性 total_seconds 的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:38:10.187

如果您子类化并更改**init**，您最好确保调用父级的**init**。我很确定这将解决您的问题：

```
class DayOfMonth(schedule):

    def __init__(self, day=1, *args, **kwargs):
        super(DayOfMonth, self).__init__(*args, **kwargs)
        self.day = day 
```

如果您检查这一点，它将阐明您遇到的错误： [https ://github.com/ask/celery/blob/master/celery/schedules.py#L33](https://github.com/ask/celery/blob/master/celery/schedules.py#L33)

# entity-framework - 将属性添加到 WCF EF OData 服务

> ID：10040567
> 
> 赞同：1
> 
> 时间：2012-04-06T07:37:46.907
> 
> 标签：entity-framework, wcf-data-services, odata

我创建了一个通过 WCF 数据服务公开的实体框架模型。我想向一个不在数据库中的实体添加一个属性，因此我为该实体创建了一个具有公共属性的部分类。但是，此属性不会通过服务公开 - 我需要做什么才能实现这一点？

我尝试将 [DataMemberAttribute()] 添加到属性中，但没有帮助。我错过了什么？

# android - WebView在android中多次加载url

> ID：10040575
> 
> 赞同：1
> 
> 时间：2012-04-06T07:38:38.287
> 
> 标签：android

android中的webview在加载url时不止一次加载。下面是代码。

```
 public boolean shouldOverrideUrlLoading(WebView view, String url)
            {

                if (url.contains(".pdf")) {
                    String[] spliturl = url.split("http://someurl/");
                    String googleurl = "http://docs.google.com/viewer?embedded=true&url=";
                    System.out.println("Google Url"+googleurl);
                    System.out.println("spliturl"+spliturl[1]);
                     view.loadUrl(googleurl+spliturl[1]);
                }
                else
                     view.loadUrl(url);

                return true;
            }
        }); 
```

我正在拆分 url，因为它包含多个要在 google 文档查看器上传递以呈现 pdf 文档的 url。第一次正确拆分 url 并连接 url 以在 google docs 中打开，但 webview 通过在 spliturl[1] 处给出 ArrayIndexOutOfBoundsException 再次执行。任何人都可以让我知道为什么这会再次执行。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:57:59.770

我不知道为什么它会被多次调用，但解决方案是在 onPageStarted 而不是 shouldOverrideUrlLoading 中处理它

```
 boolean calledOnce=false;

public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);

        return true;
    }

public void onPageStarted(WebView view, String url, Bitmap favicon) {
    if (url.contains(".pdf") && !calledOnce) {
            String[] spliturl = url.split("http://someurl/");
            String googleurl = "http://docs.google.com/viewer?embedded=true&url=";
            System.out.println("Google Url"+googleurl);
            System.out.println("spliturl"+spliturl[1]);
            url = googleurl+spliturl[1];
            calledOnce = true;
        }       
    super.onPageStarted(view, url, favicon);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T07:43:49.430

您应该始终检查数组的大小是否大于请求的索引：

```
if (url.contains(".pdf") && url.split("http://someurl/").size()>2){
// your code
} 
```

不知道为什么会调用它-可能是多次重定向。

# c# - 冒泡排序没有给出正确的结果代码附加C#？

> ID：10040577
> 
> 赞同：-4
> 
> 时间：2012-04-06T07:38:49.610
> 
> 标签：c#, .net, sorting

我的排序代码没有给出正确的结果它没有正确排序给定的列表，而我没有收到错误请检查它，

```
 static void Main(string[] args)

        {

            List<int> a = new List<int>(new int[] { 3, 7, 6, 1, 8, 5 });

            int temp;

// foreach(int i in a)

for(int i=1; i<=a.Count; i++)

for(int j=0; j<a.Count-i; j++)

if (a[j] > a[j + 1])

{

temp = a[j];

a[j] = a[j + 1];

a[j + 1] = temp;

Console.WriteLine(a[j]);

}

Console.Read();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:01:59.057

我无法理解你的代码，我不知道 C#。但无论如何，这是冒泡排序的排序逻辑（用c编写）。

```
//assuming there are n elements in the array a[]

    for(i=0; i<n; i++)
    {   for(j=1; j<n-i; j++)
        {   if(a[j] < a[j-1])
            {   temp = a[j];
                a[j] = a[j-1];
                a[j-1] = temp;
            }
        }
    } 
```

也可以参考： [www.sorting-algorithms.com/bubble-sort](http://www.sorting-algorithms.com/bubble-sort)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:46:06.183

您发布的内容不是[冒泡排序算法](http://en.wikipedia.org/wiki/Bubble_sort)的实现。当没有数字被交换时，您忘记了循环。[这是由 John Skeet](https://stackoverflow.com/a/1595310/637967)编写的冒泡排序实现。`stillGoing`检查是您的实施中至少缺少的内容：

```
public void BubbleSort<T>(IList<T> list);
{
    BubbleSort<T>(list, Comparer<T>.Default);
}

public void BubbleSort<T>(IList<T> list, IComparer<T> comparer)
{
    bool stillGoing = true;
    while (stillGoing)
    {
        stillGoing = false;
        for (int i = 0; i < list.Length-1; i++)
        {
            T x = list[i];
            T y = list[i + 1];
            if (comparer.Compare(x, y) > 0)
            {
                list[i] = y;
                list[i + 1] = x;
                stillGoing = true;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:32:24.350

从嵌套循环中删除 console.write。将 console.write 放在新的 for 循环或 foreach 中的嵌套循环之外。然后你会得到正确的顺序。否则冒泡排序的逻辑是正确的

# jquery - 对于多项选择，当它在表格中时，使用 multiple='multiple' 选择将不会与设备屏幕对齐

> ID：10040579
> 
> 赞同：1
> 
> 时间：2012-04-06T07:38:58.770
> 
> 标签：jquery, jquery-ui, jquery-mobile

说，我有一个选择菜单，它允许进行多项检查，它工作得非常好，

```
<table width="100%">
    <tr>
     <td>
<div data-role="fieldcontain">
    <label for="select-choice-10" class="select">Choose state(s):</label>
    <select name="select-choice-10" id="select-choice-10" multiple="multiple" data-native-menu="false"  style="overflow: hidden">
        <option>Choose options</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DE">Delaware</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
    </select>
</div>
  </td>
</tr> 
```

问题是...对于我设置的设备屏幕

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

但是当我选择多个项目（比如 10 个）时，菜单长度会扩展到它的宽度以显示所有 10 个选定的项目。这部分屏幕在设备上看起来是部分的。

我尝试了 <-select style="overflow: hidden"> 但仍然无法正常工作...请帮我解决这个问题...

# android - Android Google Oauth：授予访问权限后不返回应用程序

> ID：10040581
> 
> 赞同：1
> 
> 时间：2012-04-06T07:39:02.407
> 
> 标签：android, oauth, callback, android-manifest, oauth-2.0

我在使用[路标](http://nilvec.com/implementing-client-side-oauth-on-android/)库在 Android 中实现 Oauth 时遇到问题。一切都很好，除了最后一部分，它应该在授予访问权限后返回应用程序本身。

下面是我在清单中的活动回调声明：

```
<activity android:name="ro.locationsApp.android.login.LoginScreenActivity" 
        android:screenOrientation="portrait"
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" android:host="myCallbackHost"/>
        </intent-filter>
    </activity> 
```

我从这样的代码中传递回调 URL：

```
new OAuthHelper("mySite", "secret", 
        "https://www.googleapis.com/auth/userinfo.profile", "http://myCallbackHost"); 
```

myCallbackHost 它是一个真实的功能链接（它也用于网站身份验证后的回调 - 现在我也想要移动设备）。

问题是我的 android 应用程序在此之后没有被调用。我也试过

```
<data android:scheme="customScheme"/> 
```

和

```
new OAuthHelper("mySite", "secret", 
    "https://www.googleapis.com/auth/userinfo.profile", "customScheme:///"); 
```

但没有成功。

谢谢，

亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:12:56.430

用其他东西改变http是可行的。

这是我的清单现在的样子：

```
<activity android:name="ro.locationsApp.android.login.LoginScreenActivity" 
    android:screenOrientation="portrait"
    android:launchMode="singleTask">
    <intent-filter>
        <category android:name="android.intent.category.LUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="alex" android:host="me"/>
    </intent-filter>
</activity> 
```

和代码：

```
new OAuthHelper("mySite", "secret", 
"https://www.googleapis.com/auth/userinfo.profile", "alex://me"); 
```

奇迹般有效。

# php - “XDEBUG NOT LOADED AS ZEND EXTENSION”警告是什么意思？

> ID：10040586
> 
> 赞同：18
> 
> 时间：2012-04-06T07:39:41.477
> 
> 标签：php, xdebug

Xdebug 已加载，但未作为 zend 扩展加载。这是什么意思？如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T10:48:38.897

这个错误意味着你使用了“extension=”来加载 Xdebug。这可能在您的普通 php.ini 中，或者在某些发行版喜欢添加的名为 xdebug.ini 的文件中。在任何情况下，Xdebug 都需要作为 Zend 扩展加载某些功能，例如单步调试。由于 Xdebug 不打算作为普通扩展工作，它也可能崩溃和烧毁。

将 Xdebug 作为 Zend 扩展加载的语法取决于 PHP 版本和构建。我建议您使用[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)为您提供正确的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:15:33.583

确保它是否配置为正确加载为`zend_extension`. 在里面`php.ini`添加这一行

```
zend_extension="/usr/local/php/modules/xdebug.so" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-21T02:25:45.847

其他人已经解释过该错误是因为 Xdebug 是作为常规 PHP 模块而不是作为 Zend 扩展加载的。您可以使用 Derick 链接的[向导](http://xdebug.org/wizard.php)或手动输入 Starx 显示的行。

但是，您可能会遇到一个问题。目前该`extensions_dir`指令`php.ini`仅适用于 PHP 模块，[不适用于 Zend 扩展](https://bugs.php.net/bug.php?id=54564)。因此，您不能使用这样的通用配置：

```
[PHP]
extension_dir  = .\ext
extension      = php_memcache.dll
…
[zend]
zend_extension = php_xdebug-2.2.3-5.3-vc9-nts.dll 
```

虽然 PHP 会`php_memcache.dll`从`ext`子目录正确加载，但它*不会*加载`php_xdebug-2.2.3-5.3-vc9-nts.dll`并会抛出错误`Failed loading php_xdebug-2.2.3-5.3-vc9-nts.dll`。

要解决此问题，您将需要使用完全限定/绝对路径，例如：

```
zend_extension = C:\foobar\PHP\ext\php_xdebug-2.2.3-5.3-vc9-nts.dll 
```

或诸如此类的相对路径：

```
zend_extension = ext\php_xdebug-2.2.3-5.3-vc9-nts.dll
zend_extension = ..\phpexts\php_xdebug-2.2.3-5.3-vc9-nts.dll
zend_extension = \dev\phpexts\php_xdebug-2.2.3-5.3-vc9-nts.dll 
```

（向导将返回`zend_extension=.\ext\php_xdebug-2.2.3-5.3-vc9-nts.dll`其中包括目录但也是多余的`.\`）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-20T08:58:11.087

如果要在 Windows 服务器上激活文件，`zend*nts*.dll`则`php.ini`必须使用`zend_extension_ts`指令而不是`zend_extension`

**Example 来加载 xdebug ：**

```
[XDeug]
zend_extension_ts="DRIVE:/PATH_TO_XDEBUG/php_xdebug.dll"
xdebug.show_local_vars=1
xdebug.default_enable=On 
```

注意：您的 dll 文件的双引号

希望这会帮助某人:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-14T08:45:19.067

如果您在尝试*构建*xdebug 时来到这里，那么这意味着您已将其构建为“静态”扩展（不是 zend 扩展）。

您可以使用`configure --with-xdebug=shared`将其构建为共享扩展（dll/so；您应该看到一个表格，显示 xdebug 现在已配置为构建为共享扩展而不是静态扩展），以便之后可以将其作为 zend 扩展加载。

我不知道你是否可以制作静态 zend 扩展。

另外，请注意，运行完整的 xdebug 测试套件需要不激活 opcache ( `configure --disable-opcache --with-xdebug=shared`)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-27T13:22:59.357

为我工作：在 php.ini

```
zend_extension = php_xdebug-3.0.4-8.0-vs16-x86_64.dll 
```

# asp.net - 如何检查在asp.net中点击了哪一个

> ID：10040587
> 
> 赞同：0
> 
> 时间：2012-04-06T07:39:44.180
> 
> 标签：asp.net, vb.net, button

在while循环里面，我用过

```
<asp:Button ID="<%=objReader.Item(0)%>" OnClick="btn_Click"  runat="server" CssClass="submit_button" Text="Delete" />

Sub btn_Click(ByVal sender As Object, ByVal e As EventArgs)
       'You have clicked button 

    End Sub 
```

动态创建按钮。现在，单击特定按钮时，它应该显示与单击的按钮相关联的信息。需要帮忙 ！！

**解决方案**

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="Jobs">
        <ItemTemplate>
            <asp:Button ID="btnDemo" CommandArgument='<%#Eval("Login_id")%>' OnCommand="btnDemo_Click" runat="server" Text="Button" /></ItemTemplate>

        </asp:Repeater>

Sub btnDemo_Click(ByVal sender As Object, ByVal e As CommandEventArgs)
        MsgBox(e.CommandArgument)

    End Sub 
```

谢谢大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:52:03.470

最好在数据绑定控件中实现这一点，例如转发器或列表视图。

然后，您可以使用按钮的 CommandArgument 添加一些对每个按钮都不同的参数。

然后，您可以在 Click 过程中处理此问题，以在正确的 CommandArgument 处处理正确的操作。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandargument.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandargument.aspx)

例子：

```
<asp:Repeater runat="server" ID="rptList">
    <ItemTemplate>
        <asp:Button runat="server" ID="btnDemo" CommandArgument='<%#Eval("Id") %>' Text="Click me" OnCommand="btnDemo_Click"  />            
    </ItemTemplate>
</asp:Repeater> 
```

# javascript - 为什么会出现类似函数名称未定义的错误？

> ID：10040594
> 
> 赞同：1
> 
> 时间：2012-04-06T07:40:37.173
> 
> 标签：javascript

我将一个函数绑定为一个按钮的“单击”处理程序，该按钮的 id 和名称与函数的名称相同。它给出了函数未定义且函数未运行的错误。

```
<input type="button" name="saveClientDetail" id="saveClientDetail" onclick="saveClientDetail();" value="Save"/> 
```

包含此元素的 HTML 使用 AJAX 加载。该函数`saveClientDetail();`在外部 JS 文件中定义。当您单击该按钮时，它会给出错误“saveClientDetail() 未定义”。如果我更改函数名称，那么它不会产生错误。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:44:02.873

您有`id`, `name`, 并且也具有相同的 ' `saveClientDetail`' 名称。`saveClientDetail`当你写的时候，浏览器无法区分你所说的名字是哪一个。

# javascript - 带有 JSON 数据的 JavaScript 的奇怪 CSS 问题

> ID：10040597
> 
> 赞同：0
> 
> 时间：2012-04-06T07:40:56.287
> 
> 标签：javascript, android, json, html, cordova

当我使用硬编码的 JSON 字符串时，我的 UI 正常但是当我使用来自 Web 服务的字符串时，没有 css 样式运行！！！

```
//jsonData = '{.....}';
//extractData(jsonData);   //THIS CODE WORKS

var request = new XMLHttpRequest();
request.open("GET",url);
request.onload = function(){
   if(request.status == 200){
jsonData = new String(request.responseText);
alert("RESPONSE : "+jsonData);
     extractData(jsonData);   //THIS WON'T WORK :(
   }
   else
alert("Connection Issue : "+request.status);
};
request.send(null); 
```

谁能指出根本原因？？？我在 phoneGap for Android 中运行此代码。

# iphone - 如何使用嵌入式 HTML 检查您的视频是否存在

> ID：10040599
> 
> 赞同：1
> 
> 时间：2012-04-06T07:41:00.540
> 
> 标签：iphone, objective-c, ios, uiwebview, youtube

我正在使用嵌入式 HTML 在 iOS 5 上播放视频，它运行良好，但如果视频不存在，则显示空白屏幕。我如何识别视频是否存在？即使在这种情况下 webView didFailLoadWithError 也没有被调用。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:31:48.180

您可以使用 Javascript 检查视频是否存在（请参阅[如何使用 JavaScript 检查文件是否存在？](https://stackoverflow.com/questions/1657121/how-can-i-check-existence-of-a-file-with-javascript)），然后（再次使用 JS）如果视频存在则更新`<video>`元素中的引用。

# jquery - 使用 Onclick 事件处理程序触发 Doubleclick Floodlight

> ID：10040601
> 
> 赞同：5
> 
> 时间：2012-04-06T07:41:02.157
> 
> 标签：jquery, event-handling, umbraco, double-click, onclicklistener

当用户单击公司网站上的 facebook 按钮时，我必须触发 doublelclick 泛光灯标签。问题是整个网站都是由 umbraco 构建的，上面固定有诸如“andthis”之类的小部件，这使得添加功能标签变得困难。

我计划在下面使用此代码，因此当用户单击包含“分享到社交媒体”按钮的 div 标签时，它将触发该标签，但是在测试中它不只是触发它试图将用户带走的标签. 我究竟做错了什么？我只想在用户点击时加载标签，我不想真正离开他们当前所在的页面。

```
<div id="buttonsContainer">
  <p>Click or double click here.</p>
</div>

<script>
    $("#buttonsContainer").click(function () {

var axel = Math.random() + "";
var a = axel * 10000000000000;
document.write('<iframe src="http://fls.doubleclick.net/activityi;src=36705;type=count134;cat=faceb540;ord=1;num=' + a + '?" width="1" height="1" frameborder="0" style="display:none"></iframe>');
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:21:11.350

当用户单击时，它会重新加载页面，因为您正在使用 document.write，它会重新打开流以将页面写出。你会想要使用像 $('buttonsContainer').append(''); 这样的东西。将 iframe 放入 buttonContainer 元素中。

例如：

```
<div id="buttonsContainer">
  <p>Click or double click here.</p>
</div>

<script>
    $('#buttonsContainer').click(function () {
        var axel = Math.random() + '';
        var a = axel * 10000000000000;
        $(this).append('<iframe src="http://fls.doubleclick.net/activityi;src=36705;type=count134;cat=faceb540;ord=1;num=' + a + '?" width="1" height="1" frameborder="0" style="display:none"></iframe>');
    });
</script> 
```

# javascript - 如何在 V8 中获取脚本的原始文件名

> ID：10040604
> 
> 赞同：4
> 
> 时间：2012-04-06T07:41:10.717
> 
> 标签：javascript, c++, c++11, v8

我想在全局函数中获取脚本的原始文件名。

我尝试了以下代码，但 **filename.IsEmpty()** 返回 true。

```
using namespace v8;

HandleScope handle_scope;

// Define Global Function 'func'
Handle<ObjectTemplate> global = ObjectTemplate::New();

auto func_name = v8::String::New("func");
auto func = v8::FunctionTemplate::New(
        [](const v8::Arguments& args) -> v8::Handle<v8::Value>{

            // I want to get Filename here.
            auto filename = args.Callee()->GetScriptOrigin().ResourceName();
            std::cout << filename.IsEmpty() << std::endl;

            return v8::Undefined();
        });

global->Set(func_name, func);

auto context = Context::New(nullptr, global);
Context::Scope context_scope(context);

auto source = String::New("func()");

// Set Filename
auto filename = String::New("abc.js");
auto script = v8::Script::Compile(source, filename);
script->Run();

context.Dispose(); 
```

是否有正确的方法来访问脚本的原始文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:57:08.473

自己解决：

```
auto func = v8::FunctionTemplate::New(
    [](const v8::Arguments& args) -> v8::Handle<v8::Value>{

          // Get Filename
          auto filename = v8::StackTrace::CurrentStackTrace(1,v8::StackTrace::kScriptName)
                                ->GetFrame(0)->GetScriptName();
          std::cout << *v8::String::AsciiValue(filename) << std::endl;

        return v8::Undefined();
    }); 
```

# dojo - 如何设置 NumberTextBox 只接受道场中的数字？

> ID：10040606
> 
> 赞同：6
> 
> 时间：2012-04-06T07:41:15.833
> 
> 标签：dojo, validation

我有以下内容`NumberTextBox`，我只想允许数字，但我不知道`constraints`用来实现它的属性是什么。

```
<input type="text" data-dojo-type="dijit.form.NumberTextBox" invalidMessage="Please enter only numbers" constraints="{}" required="true" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T08:08:35.463

例如，您可以有以下内容：

```
constraints: { min:0, places:0} 
```

另见：[http ://www.unicode.org/reports/tr35/#Number_Format_Patterns](http://www.unicode.org/reports/tr35/#Number_Format_Patterns)

使用道场 NumberTextBox，您仍然可以输入字符：a、b、c。它只会给你无效的信息。如果您只想允许数字输入，您可以在[此处](https://stackoverflow.com/questions/7295843/allow-only-numbers-to-be-typed-in-a-textbox)使用 javascript 。

# c# - 为什么我的 WCF 服务不返回整数？

> ID：10040608
> 
> 赞同：1
> 
> 时间：2012-04-06T07:41:19.593
> 
> 标签：c#, wcf

我编写了一个从我的 SQL Server 数据库中读取数据的 WCF 服务。当调用一个返回所有字符串的方法时它工作正常，但是如果我调用一个返回一个 int 的方法，它会崩溃并出现一些关于超时和太多数据的错误，这对我来说没有意义......

这是我的网络服务代码：

```
public List<Track> getTrack()
{
    List<Track> trackList = new List<Track>();

    SqlConnection dbConn = connectToDb();

    string _selectQuery = string.Format("SELECT Date, Track, KeyID FROM hdData ORDER BY Track");

    try
    {
        dbConn.Open();
        SqlCommand cmd = new SqlCommand(_selectQuery, dbConn);
        SqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
            Track Dat = new Track();
            Dat.Date = (string)reader[0];
            Dat.TrackName = (string)reader[1];
            Dat.KeyId = (int)reader[2];
            trackList.Add(Dat);
        }

        dbConn.Close();
     }
     catch (Exception e)
     {
        Console.WriteLine(e.ToString());
     }

     return trackList;
  } 
```

如果我取出该`KeyId`字段，它就可以正常工作......`KeyId`在数据库中被定义为一种类型`int`并且是一个自动递增字段。

我什至尝试将其转换为`varchar`相同的结果...

我究竟做错了什么？

问候，院长

确切的错误和Track类如下：

好的，确切的错误是：

> 已超出传入邮件 (65536) 的最大邮件大小配额。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。
> 
> 服务器堆栈跟踪：
> 在 System.ServiceModel.Channels.HttpInput.GetMessageBuffer(
> )
> 在 System.ServiceModel.Channels.HttpInput.ReadBufferedMessage(Stream inputStream)
> 在 System.ServiceModel.Channels.HttpInput的 System.ServiceModel.Channels.HttpInput.ThrowMaxReceivedMessageSizeExceeded() .ParseIncomingMessage(Exception& requestException)
> 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
> 在 System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
> 在 System.ServiceModel.Dispatcher.RequestChannelBinder。请求（消息消息，TimeSpan 超时）
> 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
> 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
> 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）
> 
> 在 [0] 处重新抛出异常：
> 在
> System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
> 在 IService1.getTrack( )
> 在 Service1Client.getTrack()
> 
> 内部异常：
> 已超出传入邮件的最大邮件大小配额 (65536)。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。

Track 类是：

```
[DataContract]
public class Track
{
    string _Date, _TrackName;
    int _KeyId;

    [DataMember]
    public string Date
    {
        get { return _Date; }
        set { _Date = value; }
    }

    [DataMember]
    public string TrackName
    {
        get { return _TrackName; }
        set { _TrackName = value; }
    }

    [DataMember]
    public int KeyId
    {
        get { return _KeyId; }
        set { _KeyId = value; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:31:38.360

当您说“如果我取出 KeyId 字段”时，您的意思是从 Track 类中删除吗？如果是这样，您返回的 Track 列表的大小是否可能接近您的端点绑定 MaxReceivedMessageSize (65536)？如果是这种情况，那么通过从 Track 类中删除 _KeyId int 来减小该列表的大小可能会将返回的总体数据大小减小到此限制以下。
尝试在端点绑定中增加此限制。您可能需要为服务器和客户端执行此操作。例如：

```
 maxBufferPoolSize="10000000" maxBufferSize="10000000" maxReceivedMessageSize="10000000">
    <readerQuotas maxDepth="32"
        maxStringContentLength="10000000" maxArrayLength="10000000"
        maxBytesPerRead="10000000" maxNameTableCharCount="10000000" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:36:59.353

基本上，您需要增加消息的大小。为此，您需要为您正在使用的任何绑定创建一个**绑定配置**- 我在`basicHttpBinding`这里用作示例。因此，您需要定义绑定配置（在您的服务器和客户端的配置中），并且您的服务以及您的客户端需要引用该绑定配置：

```
<system.serviceModel>
  <bindings>
    <!-- use whichever binding you're using here! -->
    <basicHttpBinding>
      <!-- define a binding configuration with a name -->
      <binding name="LargeData"
               maxBufferSize="999999" maxReceivedMessageSize="999999" />
    </basicHttpBinding>
  </bindings>
  <services>
    <service name="Namespace.YourServiceClass">
      <!-- your endpoints - both on the server as well as on the client - need
           to make reference to that defined binding configuration -->
      <endpoint name="test"
                address="...."
                binding="basicHttpBinding"
                bindingConfiguration="LargeData"
                contract="Namespace.IYourServiceContract" />
    </service>
  </services>
</system.serviceModel> 
```

在客户端，您将拥有以下内容：

```
 <client name="....">
        <endpoint name="test"
            address="...."
            binding="basicHttpBinding"
            bindingConfiguration="LargeData"
            contract="Namespace.IYourServiceContract" />
   </client> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:51:05.573

我期待一个配额错误，这就是为什么我问你确切的错误信息。

请仔细阅读此链接： [http](http://www.aspnet101.com/2010/08/wcf-performance-best-practices/) ://www.aspnet101.com/2010/08/wcf-performance-best-practices/ 特别是配额部分（但我认为整篇文章将帮助您更好地了解 WCF） .

Then, don't forget that you have to change these settings (Quota) also on the client side (i.e. refresh web reference once you've updated the server)

# algorithm - 如何应对垂直棒挑战？

> ID：10040609
> 
> 赞同：1
> 
> 时间：2012-04-06T07:41:22.943
> 
> 标签：algorithm, data-structures, probability

这个问题取自[interviewstreet.com](https://www.interviewstreet.com/challenges/dashboard/#problem/4eed18ded76fe)

> 给定整数数组 Y=y1,...,yn，我们有 n 个线段，使得线段 i 的端点是 (i, 0) 和 (i, yi)。想象一下，从每个段的顶部向左发射一条水平射线，当它接触到另一个段或到达 y 轴时，这条射线停止。我们构造了一个由 n 个整数组成的数组，v1, ..., vn，其中 vi 等于从片段 i 的顶部射出的射线的长度。我们定义 V(y1, ..., yn) = v1 + ... + vn。
> 
> 例如，如果我们有 Y=[3,2,5,3,3,4,1,2]，那么 v1, ..., v8 = [1,1,3,1,1,3,1, 2]，如下图所示：
> 
> ![在此处输入图像描述](../Images/5624ff03dcef255610410d314295813d.png)
> 
> 对于 [1,...,n] 的每个排列 p，我们可以计算 V(yp1, ..., ypn)。如果我们选择 [1,...,n] 的均匀随机排列 p，那么 V(yp1, ..., ypn) 的期望值是多少？
> 
> **输入格式**
> 
> 输入的第一行包含一个整数 T (1 <= T <= 100)。T 测试用例如下。
> 
> 每个测试用例的第一行是一个整数 N (1 <= N <= 50)。下一行包含由单个空格分隔的正整数 y1, ..., yN (0 < yi <= 1000)。
> 
> **输出格式**
> 
> 对于 V(yp1, ..., ypn) 的每个测试用例输出预期值，四舍五入到小数点后两位数。
> 
> **样本输入**
> 
> ```
> 6
> 3
> 1 2 3
> 3
> 3 3 3
> 3
> 2 2 3
> 4
> 10 2 4 4
> 5
> 10 10 10 5 10
> 6
> 1 2 3 4 5 6 
> ```
> 
> **样本输出**
> 
> ```
> 4.33
> 3.00
> 4.00
> 6.00
> 5.80
> 11.15 
> ```
> 
> **解释**
> 
> 案例 1：我们有 V(1,2,3) = 1+2+3 = 6, V(1,3,2) = 1+2+1 = 4, V(2,1,3) = 1+ 1+3 = 5, V(2,3,1) = 1+2+1 = 4, V(3,1,2) = 1+1+2 = 4, V(3,2,1) = 1 +1+1 = 3。这些值的平均值为 4.33。
> 
> 情况2：不管排列是什么，V(yp1, yp2, yp3) = 1+1+1 = 3，所以答案是3.00。
> 
> 情况 3：V(y1 ,y2 ,y3)=V(y2 ,y1 ,y3) = 5, V(y1, y3, y2)=V(y2, y3, y1) = 4, V(y3, y1, y2 )=V(y3, y2, y1) = 3，这些值的平均值为 4.00。

对于 N=50，一个简单的问题解决方案将永远运行。我相信这个问题可以通过独立计算每根棍子的值来解决。我仍然需要知道是否有任何其他有效的方法来解决这个问题。我们必须在什么基础上独立计算每根棍子的价值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T15:47:55.017

我们可以通过以下方式解决这个问题：

> 如果第*k*根棍子放在第*i*个位置，那么这根棍子的预期射线长度是多少。

然后可以通过将所有位置的所有棒的所有预期长度相加来解决问题。

设第*k*根棍子放置在第*i*个位置`expected[k][i]`的预期射线长度，设 是第*k*根棍子放置在第*i*个位置且射线长度等于的排列数，则**`num[k][i][length]`**`length`****

 ***> `expected[k][i] = sum( num[k][i][length] * length ) / N!`

如何计算`num[k][i][length]`？例如，对于`length=3`，请考虑下图：

> ...Gxxx我...

位置在哪里`I`，3 'x' 意味着我们需要 3 根严格低于的棍子`I`，并且`G`意味着我们需要一根至少与 一样高的棍子`I`。设`s_i`小于`k`第 th 根的棍`g_i`数为 大于等于`k`第 th 根的棍数，则可以选择任意一个 `g_i`放置，`G`我们可以选择任意填充位置，所以我们有：`length``s_i``x`

> `num[k][i][length] = P(s_i, length) * g_i * P(n-length-1-1)`

如果之前`I`的所有位置都较小 then `I`，我们不需要更大的坚持`G`，即`xxxI....`，我们有：

> `num[k][i][length] = P(s_i, length) * P(n-length-1)`

这里有一段 Python 代码可以解决这个问题：

```
def solve(n, ys):
    ret = 0
    for y_i in ys:
        s_i = len(filter(lambda x: x < y_i, ys))
        g_i = len(filter(lambda x: x >= y_i, ys)) - 1

        for i in range(n):
            for length in range(1, i+1):
                if length == i:
                    t_ret = combination[s_i][length] * factorial[length] * factorial[ n - length - 1 ] 
                else:
                    t_ret = combination[s_i][length] * factorial[length] * g_i * factorial[ n - length - 1 - 1 ]
                ret += t_ret * length

    return ret * 1.0 / factorial[n] + n 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T22:05:38.420

*[这是与https://cs.stackexchange.com/questions/1076/how-to-approach-vertical-sticks-challenge](https://cs.stackexchange.com/questions/1076/how-to-approach-vertical-sticks-challenge)相同的问题，我的答案（比前面给出的更简单）是：*

想象一个不同的问题：如果你必须`k`在槽中放置相同高度的棍子，`n`那么棍子之间的预期距离（以及第一根棍子和名义槽`0`之间的期望距离，以及最后一根棍子和名义槽之间的期望距离`n+1`）是`(n+1)/(k+1)`因为有`k+1`间隙适合长度`n+1`。

回到这个问题，一根特定的棍子对有多少根棍子（包括它自己）一样高或更高感兴趣。如果是这样`k`，那么之前的预期差距也是如此 `(n+1)/(k+1)`。

所以算法只是简单地为每根棍子找到这个值并将期望值相加。例如，从高度 开始，`3,2,5,3,3,4,1,2`具有更大或相等高度的棒的数量是`5,7,1,5,5,2,8,7`这样的期望是`9/6+9/8+9/2+9/6+9/6+9/3+9/9+9/8 = 15.25`。

这很容易编程：例如 R 中的一行

> ```
> V <- function(Y){(length(Y) + 1) * sum(1 / (rowSums(outer(Y, Y, "<=")) + 1) )} 
> ```

给出[原始问题中样本输出中的值](https://www.interviewstreet.com/challenges/dashboard/#problem/4eed18ded76fe)

```
> V(c(1,2,3))
[1] 4.333333
> V(c(3,3,3))
[1] 3
> V(c(2,2,3))
[1] 4
> V(c(10,2,4,4))
[1] 6
> V(c(10,10,10,5,10))
[1] 5.8
> V(c(1,2,3,4,5,6))
[1] 11.15 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:17:36.343

正如您正确地指出的那样，我们可以为每根棍子独立解决问题。

令 F(i, len) 是排列数，来自棒 i 的射线正好是 len。
那么答案是

> （总和（由 i，len）F（i，len）*len）/（n！）

剩下的就是计算 F(i, len)。设 a(i) 为棒数 j，即 y_j<=y_i。b(i) - 棒数，即 b_j>b_i。

为了获得长度为 len 的光线，我们需要有这样的情况。

```
B, l...l, O  
   len-1 times 
```

其中O - 是棒#i。B - 坚持更大的长度，或开始。l - 坚持高度，小于 ith。

这给了我们2种情况：
1）B是开始，这可以通过`P(a(i), len-1) * (b(i)+a(i)-(len-1))!`多种方式实现。
2）B是更大的棍子，这可以通过`P(a(i), len-1)*b(i)*(b(i)+a(i)-len)!*(n-len)`多种方式实现。

编辑：将 b(i) 更正为 (mul) 中的第 2 项，以代替案例 2 中的 a(i)。***

# scala - 带有 Scala 和 Java 的 Eclipse 插件 - PDEBuilder Java 代码看不到 Scala 类型

> ID：10040611
> 
> 赞同：0
> 
> 时间：2012-04-06T07:41:23.307
> 
> 标签：scala, ant, eclipse-plugin, eclipse-pde

连续大约 6-7 小时后，我希望有人可以帮助我解决我遇到的问题。基本上我正在尝试开发一个包含 Scala 和 Java 代码的 Eclipse 插件。不幸的是，当我尝试构建插件时，我得到了这种错误：

* * *

文件：@dot.log 04-04-12 19:02:49 CEST Eclipse Compiler for Java(TM) 0.A76_R36x, 3.6.2，版权所有 IBM Corp 2000, 2010。保留所有权利。

1.  C:\Documents and Settings\b96274\workspace_scala_akka\TestScala\src\testscala\Activator.java 中的错误（第 16 行）ScalaTest t = null; ^^^^^^^^^ ScalaTest 无法解析为类型

1 个问题（1 个错误）

我定义的两个类是：

“激活器.java”

```
package testscala;
import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;

public class Activator implements BundleActivator {

private static BundleContext context;

static BundleContext getContext() {
    return context;
}

public void start(BundleContext bundleContext) throws Exception {
    Activator.context = bundleContext;
    ScalaTest t = null;
}

public void stop(BundleContext bundleContext) throws Exception {
    Activator.context = null;
}
} 
```

“ScalaTest.scala”包testscala

```
class ScalaTest {
  val t = "whatever"
} 
```

我首先将插件创建为插件项目，然后将 Scala 特性添加到其中。为了通知我使用的 scala 的 PDE 构建器：http: [//www.michel-kraemer.com/scala-projects-with-eclipse-pde-build-2](http://www.michel-kraemer.com/scala-projects-with-eclipse-pde-build-2) Michel Kraemers 非常出色的构建文件。

我的 build.properties 文件是：

来源.. = src/

输出.. = bin/

bin.includes = META-INF/,\

.

customBuildCallbacks=customBuildCallbacks.xml

customBuildCallbacks.inheritall=true

并且 customBuildCallbacks.xml 存储在项目的底部。

我尝试过使用 Scala IDE 插件的 nightly 和 stable build 分支。还尝试了 Eclipse 3.6.2 和 3.7.2 的新版本。我以前用这个设置得到了插件，不幸的是我似乎忘记了一些（基本的？）东西。

我可以使用解决方法“使用在工作区中编译的类文件”，但我需要 PDE 构建器来处理它。任何人都可以请帮助，如果需要，我当然会提供更多详细信息。

我的猜测是 Java 编译器看不到已编译的 Scala 文件，因为它们首先会稍后编译，但这只是一个猜测。

提前致谢。问候 Stefan Ettrup

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:49:07.913

我也在使用这种方法。基本上，我相信它不支持依赖于 Scala 代码的 Java 代码，因为 Java 编译器必须首先运行并且它失败了，甚至没有尝试过 Scala 编译器。至少那是我的经验。当然，Java 代码可以依赖*于其他插件*中的 Scala 代码，因为它只能从那里看到字节码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T18:23:25.100

java 编译器不理解 scala 文件，但 scala 编译器*解析*/理解 java 文件。然而，scala 编译器不*编译*java 文件，它只编译 scala 文件。因此，要编译一个组合的 java/scala 插件，您通常必须：

1）编译你的scala，包括你的java源代码树。这会为您的 scala 文件生成 .class 文件。2）编译你的java，包括上面生成的.class文件。这将为您的 java 文件生成 .class 文件。任何依赖于 scala 类的 java 都应该被正确编译。

所以先做scala编译。有时，您需要添加第三步，使用 java 编译器生成的类文件再次编译您的 scala。但这种情况很少见。

恐怕我不知道如何用 ant 做到这一点，但我相信这是可能的。

对于 scala-ide，这更容易，因为在 Window->Preferences->Scala->Compiler 选项卡 Build manager 中有一个选项，可以选择 compileorder (Mixed, JavaThenScala, ScalaThenJava)。试试这个。

# android - 自动切换背景

> ID：10040612
> 
> 赞同：2
> 
> 时间：2012-04-06T07:41:30.543
> 
> 标签：android, background-image

如何自动切换背景

在布局中

```
android:background="@drawable/image"> 
```

我有两张图片
我想允许自动切换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:01:56.343

```
Timer timer = new Timer();
TimerTask timerTask  = new TimerTask() {
@Override
public void run() {
// TODO Auto-generated method stub
if(loadFirst){
loadFirst = false;
layout_reference.setBackgroundResource(R.drawable.imagename1);
}else{
loadFirst = true;
layout_reference.setBackgroundResource(R.drawable.imagename2);
}
}
};
timer.schedule(timerTask,0,10000);//fires every 10secs 
```

在代码中尝试此代码，并在您的 oncreate 方法（）中声明一个布尔变量“boolean loadFirst = false”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:54:31.723

创建一个线程并分配睡眠时间，并将 layout.setBackgroundDrawable(drawable) 与 sleep 方法一起使用，并且可以使用标志变量在两个背景可绘制对象之间切换，如果 1 设置为 2，如果 2 设置为 1。

或者您可以将 layout.setBackgroundDrawable(drawable) 代码放入 runOnUIThread。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:01:28.117

试试这种方式：

```
public class mainActivity extends Activity 
    {
        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Resources res = getResources(); //resource handle
        Drawable drawable = res.getDrawable(R.drawable.images1); //new Image that was added to the res folder
        LinearLayout linearLayout =   (LinearLayout)findViewById(R.id.etxtLayout); 
        linearLayout.setBackgroundDrawable(drawable);
        }
    } 
```

# jqgrid - jqGrid 与我的自定义搜索

> ID：10040614
> 
> 赞同：0
> 
> 时间：2012-04-06T07:41:35.323
> 
> 标签：jqgrid

我每个人都需要像附件中所示的东西![在此处输入图像描述](../Images/28b1d33411427a2171a9e9fc6f044071.png)

谁能帮我吗。我不想使用工具栏搜索和 jqgrid 的默认搜索。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:14:32.843

如果我理解正确您的问题，您可以通过将搜索选项添加到与“相关”列对应的项目来解决您[的](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asearch_config#colmodel_options)`colModel`问题。`searchoptions`应该具有`sopt`您需要允许列的操作的属性。例如

```
searchoptions: { sopt: ['eq', 'cn'] } 
```

# uploadify - 在 MAC 上上传

> ID：10040618
> 
> 赞同：2
> 
> 时间：2012-04-06T07:41:52.280
> 
> 标签：uploadify

我注意到在进行多次上传时，mac 和 flash-plugin 会发生冲突。只有 3 或 5 个文件时没有问题，但当文件数量较多时，uploadify 会停止上传。插件有点崩溃。

奇怪的是，在 Windows 上，多次上传没有单一问题。

我在 mac 和 windows 上都升级了 Flash。我检查了会话 ID，我检查了这个论坛，uploadify 的论坛。但是找不到在哪里搜索...

有人可以给我一些关于该怎么做的线索。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T14:20:49.230

我也在使用uploadify v3.2.1。我来到这里调查为什么它不适用于某些 mac 用户，但偶然发现了你的问题，发现它没有任何反馈，我会尝试为你指出一些可能是解决方案的东西....

你在使用 PHP 吗？如果是; 您是否确认总帖子大小没有超出 php 允许的范围？

php.ini文件有post size限制的设置，如果一个请求中的图片数量超过了php.ini中设置的数量，可能会导致这种情况，因为你只有在上传超过3个时才会得到它- 5个文件（可能超过该限制的大小），而不是在上传少于该限制时...尝试提高帖子大小限制，然后重试现在失败的上传文件集...

# java - JButton 子类不改变透明度

> ID：10040621
> 
> 赞同：0
> 
> 时间：2012-04-06T07:42:41.500
> 
> 标签：java, swing, jbutton, superclass

我想制作一个透明的按钮，直到用户用鼠标悬停在它上面，所以我创建了自己的扩展 JButton 的类。我对其进行了测试，它确实使按钮透明并且确实检测到用户何时将鼠标悬停在它上面，但之后它并没有使它变得不透明。我需要用这个代码改变什么？

```
import javax.swing.*;
import java.awt.event.*;

public class TransparentButton extends JButton {

    boolean opaque = false, areaFilled = false, borderPainted = false;

    public TransparentButton(Icon icon) {
        super(icon);
        initialise();
    }

    public TransparentButton(String text) {
        super(text);
        initialise();
    }

    private void initialise() {
        super.setOpaque(opaque);
        super.setContentAreaFilled(areaFilled);
        super.setBorderPainted(borderPainted);
        super.addMouseListener(new MouseListener() {
            public void mouseEntered(MouseEvent e) {
                opaque = true;
                areaFilled = true;
                borderPainted = true;
            }

            public void mouseExited(MouseEvent e) {
                opaque = false;
                areaFilled = false;
                borderPainted = false;
            }

            public void mouseClicked(MouseEvent e) {}
            public void mousePressed(MouseEvent e) {}
            public void mouseReleased(MouseEvent e) {}
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:52:50.210

```
import javax.swing.*;
import java.awt.event.*;

public class TransparentButton extends JButton {

    boolean opaque = false, areaFilled = false, borderPainted = false;

    public TransparentButton(Icon icon) {
        super(icon);
        initialise();
    }

    public TransparentButton(String text) {
        super(text);
        initialise();
    }

    private void initialise() {

        super.addMouseListener(new MouseListener() {
            public void mouseEntered(MouseEvent e) {
                opaque = true;
                areaFilled = true;
                borderPainted = true;
                reset();

            }

            public void mouseExited(MouseEvent e) {
                opaque = false;
                areaFilled = false;
                borderPainted = false;
                reset();
            }

            public void mouseClicked(MouseEvent e) {}
            public void mousePressed(MouseEvent e) {}
            public void mouseReleased(MouseEvent e) {}
        });
    }

    private void reset() {
        super.setOpaque(opaque);
        super.setContentAreaFilled(areaFilled);
        super.setBorderPainted(borderPainted);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:01:43.810

boolean opaque = false，areaFilled = false，borderPainted = false；字段 opaque、areaFilled 和borderPainted 是您的类的局部变量。改变它不会影响晚餐课！

setOpaque、setContentAreaFilled 和 setBorderPainted 方法背后有很多逻辑，你应该使用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:10:51.933

*   对于您的代码，您必须添加[MouseMotionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)，但最好是[ChangeListener](https://stackoverflow.com/a/5755124/714968)

*   在鼠标/更改事件中，您必须更改[AlphaComposite的值](https://stackoverflow.com/a/6720207/714968)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T07:47:53.233

设置变量是不够的。您还必须在按钮上调用适当的方法：

```
 public void mouseEntered(MouseEvent e) {
                super.setOpaque(true);
                super.setContentAreaFilled(true);
                super.setBorderPainted(true);

        }

        public void mouseExited(MouseEvent e) {
                super.setOpaque(false);
                super.setContentAreaFilled(false);
                super.setBorderPainted(false);

        } 
```

PS：我没有测试。但这在逻辑上似乎很明显

# android - 通过 ADB 检查设备是否为横向

> ID：10040624
> 
> 赞同：6
> 
> 时间：2012-04-06T07:43:05.313
> 
> 标签：android

是否可以通过 ADB 检查设备方向？

不是通过安装任何软件，调用任何现有软件，只是通过亚行。会猜测在某处有一个状态文件`/proc`，但还没有找到。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T15:16:00.827

这可以通过以下命令完成：

```
adb shell dumpsys | grep 'SurfaceOrientation' | awk '{ print $2 }' 
```

对于四个可能的方向中的每一个，输出将是一个介于 0 到 3 之间的整数。0 和 2 是风景，而 1 和 3 是肖像。由于`dumpsys`输出非常大，该命令可能需要几秒钟才能完成。

**更新：** dgmltn 的修改可能要快得多：

```
adb shell dumpsys input | grep 'SurfaceOrientation' | awk '{ print $2 }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T09:02:56.207

更简单的解决方案：

```
adb shell dumpsys window | grep -i surfaceorientation | awk '{ print $2 }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T21:59:02.213

`content query --uri content://settings/system --projection name:value --where "name='user_rotation'"`我打开后发现了这个方法`adb shell`。虽然如果在没有先打开外壳的情况下输入似乎不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-15T08:11:59.177

除了前面的答案，我想指出的是，返回值`adb shell dumpsys | grep 'SurfaceOrientation'`并不总是遵循跨设备的特定规则（“0 和 2 是横向，而 1 和 3 是纵向”是错误的）。

我通过附加查询改进了该方法，该查询建议如何解释返回值，即

```
dumpsys window | grep 'mLandscapeRotation' 
```

值 0 表示：0 和 2 是风景，1 和 3 是肖像

值 1 表示相反的情况

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-26T10:47:58.270

我不确定自上次写完答案后是否发生了变化，或者是因为我正在模拟不同的设备。但我也`SurfaceOrientation`没有`mLandscapeRotation`出现在 dumpsys 中。在区分`dumpsys`旋转之间的输出后，我发现 `mPredictedRotation`

```
#Normal
$./adb shell dumpsys window displays | grep 'mPredictedRotation'
        mPredictedRotation=0

#Right
$./adb shell dumpsys window displays | grep 'mPredictedRotation'
        mPredictedRotation=3

#Inverted
$./adb shell dumpsys window displays | grep 'mPredictedRotation'
        mPredictedRotation=2
$Left
#./adb shell dumpsys window displays | grep 'mPredictedRotation'
        mPredictedRotation=1 
```

# asp.net - 关于中文“360安全浏览器”的任何信息？下载我正在流式传输的文件时遇到问题

> ID：10040630
> 
> 赞同：2
> 
> 时间：2012-04-06T07:43:53.337
> 
> 标签：asp.net, cross-browser

有一个**桌面**浏览器叫做“ [360安全浏览器](http://se.360.cn/)”。他们在中国占有相当大的市场份额，我们需要支持他们。

它说[布局引擎是 Trident (IE)](http://en.wikipedia.org/wiki/360_Secure_Browser)，这是我所期望的，但我现在无法验证（在 Mac 上！）。

这样做的原因是我有一些表单可以启动下载，将字节流式传输到客户端，并且它们可以在其他主要浏览器中使用。导致问题的代码如下或类似。这是在做我没有注意到的错误吗？字节流通常在 50-100KB 左右，我们还没有遇到过问题。

*   调用此代码以响应 PostBack 事件（例如，在网格中单击按钮等）
*   使用来自文件、在内存中生成或从 db 读取的字节流调用此函数。

功能：

```
public static bool DownloadStream(byte[] packageStream, string fileName) {
    var response = HttpContext.Current.Response;
    response.Clear();
    response.AddHeader("Accept-Ranges", "bytes");
    response.AddHeader("Content-Disposition", "inline; filename=" + HttpUtility.UrlEncode(fileName, Encoding.UTF8));
    response.AddHeader("Content-Length", packageStream.Length.ToString());
    response.ContentType = "application/xlsx";
    response.BinaryWrite(packageStream);
    response.Flush();
    HttpContext.Current.ApplicationInstance.CompleteRequest();
    return true;
} 
```

有没有人有支持这个浏览器的经验？在谷歌上用英文搜索时，我找不到*任何*关于它的信息。没有规格，没有文档，什么都没有。我得去百度找资料，看不懂那种程度的中文！

**编辑：**

问题显然在于 360 使用的下载器。不过，我想知道流代码中是否应该更改某些内容。我缺少的标题或其他内容。

*   这只发生在*小*文件上。相同的页面，更大的下载 = 没有问题。
*   更改为内置 IE 下载器会导致问题消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:55:39.733

您好，我在 360 安全浏览器上尝试了您的代码。它对我有用。我在下面编辑一点是我的代码。注意：据我所知，360 安全浏览器使用的是 IE Core。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DownloadStream(StreamFile(@"C:\Users\My\Desktop\test2.xlsx"), "test.xlsx");
    }

    private byte[] StreamFile(string filename)
    {
        FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read);

        // Create a byte array of file stream length
        byte[] Data = new byte[fs.Length];

        //Read block of bytes from stream into the byte array
        fs.Read(Data, 0, System.Convert.ToInt32(fs.Length));

        //Close the File Stream
        fs.Close();
        return Data; //return the byte data
    }

    public static bool DownloadStream(byte[] packageStream, string fileName)
    {
        var response = HttpContext.Current.Response;
        response.ClearContent();
        response.ClearHeaders();
        response.AppendHeader("Accept-Ranges", "bytes");
        response.AppendHeader("Content-Disposition", "inline; filename=" + HttpUtility.UrlEncode(fileName, Encoding.UTF8));
        response.AppendHeader("Content-Length", packageStream.Length.ToString());
        response.ContentType = "application/xlsx";
        response.BinaryWrite(packageStream);
        response.Flush();
        response.End();
        return true;
    } 
```

# wordpress - SES 不适用于本地主机

> ID：10040632
> 
> 赞同：1
> 
> 时间：2012-04-06T07:44:11.780
> 
> 标签：wordpress, smtp, amazon, amazon-ses

我正在使用以下 wordpress 插件发送电子邮件。

[http://coffee2code.com/wp-plugins/configure-smtp/](http://coffee2code.com/wp-plugins/configure-smtp/)

我已经完成了配置，这对服务器运行良好，但相同的配置在 localhost 上出现以下错误。

```
An error was encountered while trying to send the test e-mail.
SMTP Error: Data not accepted. 
```

在 localhost 上，我使用此插件测试了 gmail 设置，效果很好，但使用 Amazon SES 设置配置时出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:03:51.100

已解决，发件人电子邮件地址必须与亚马逊上配置的“发件人地址”相同。

# asp.net-mvc-3 - 如何发布部分视图数据？

> ID：10040633
> 
> 赞同：3
> 
> 时间：2012-04-06T07:44:12.557
> 
> 标签：asp.net-mvc-3

非常感谢任何输入:)

我想知道我是否可以在 MVC 中发布多个部分视图数据？（意味着我想将部分视图数据更新到数据库）

这是示例：

模型：-

```
public class PassengerViewModel
{
    public List<PassengerModel> Passengers { get; set; }
    public ContactModel Contact { get; set; }
} 
```

控制器：-

```
[RequiredAuthentication]
    public ActionResult Passenger()
    {
        var passengrViewMdl = new PassengerViewModel()
        {
            Contact = new ContactModel(),
            Passengers = psngrService.LoadPassengers(Convert.ToInt32(Session["LPORefNO"]))
        };
        return View(passengrViewMdl);
    }
    [HttpPost]
    public ActionResult Passenger(PassengerViewModel passengerViewModel)
    {
        Here i want to update Passengers & Contact information
    } 
```

看法：-

```
@model QR.LPO.Core.Models.PassengerViewModel
@{
ViewBag.Title = "Add Passengers";
}
@using (Html.BeginForm())
{
@Html.Partial("_Passenger", Model.Passengers);
@Html.Partial("_PassengerContact", Model.Contact);
<input type="submit" value="Submit" />
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:48:18.850

是的，确实可以，但是控制器通常每个请求只使用一个模型，因此您的模型应该在其中声明两个部分子模型或子模型本身的属性。

由于 HTML 规范，这是可能的，表单上所有具有提交按钮的数据都发送到提交操作 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:07:11.380

这几乎可以按照您的方式工作-partials 没有任何固有的东西可以防止这种情况发生，最终输出的 html 才是最重要的。

您的代码的问题在于，您的`_Passenger`视图模型可能是 type `Passengers`，而您的视图模型`_PassangerContact`是 type `Contact`。这意味着，如果您的标准`HtmlHelper`扩展（like`Html.Textbox(...)`或`Html.TextboxFor(...)`它们生成的字段将没有全名，例如`Contact.Name`，而只是与其模型相关的名称，例如`Name`。这将导致模型绑定在您的发布操作中失败。

您可以通过多种方式解决此问题。

1.  只需`PassengerViewModel`在子视图中使用相同的模型类型 ( )，然后编写类似`@Html.TextboxFor(m => m.Contact.Name)`.

2.  而不是使用`Html.Partial`，使用`Html.EditorFor(...)`。这会将正确的前缀信息传递到子视图中，以便正确生成字段名称。

3.  自己显式设置前缀

像这样：

```
@{
    var childViewData = new ViewDataDictionary(this.ViewData);
    childView.TemplateInfo.HtmlFieldPrefix = "Contact";
}
@Html.Partial("_PassengerContact", Model.Contact, childViewData) 
```

您还可以查看`Html.PartialFor`自己创建重载，如此 stackoverflow 问题中所述：[ASP.NET MVC partial views: input name prefixes](https://stackoverflow.com/questions/1488890/asp-net-mvc-partial-views-input-name-prefixes)

# c# - C# JOIN 和 DataSet：它将如何工作？

> ID：10040635
> 
> 赞同：0
> 
> 时间：2012-04-06T07:44:28.027
> 
> 标签：c#, join, dataset

我有两张桌子：A 和 B。

*表 A*：

```
身份证 | 数字
1 | 2
2 | 5
3 | 1

```

*表 B*：

```
身份证 | 姓名
2 | X
5 | 是
1 | Z

```

当我从数据库中获取信息时，我会填充一个 DataSet。但是，我在 A.Number = B.Name 上使用 JOIN。因此导致：

**结果**：

```
身份证 | 号码 | 姓名
1 | 2 | X
2 | 5 | 是
3 | 1 | Z

```

我有一个 DataGridView 显示**Result**，但只有**Id**和**Name**列。

一件事困扰着我。我想更改DataGridView 中的***Result* .Name**值，但我希望用***B*** **.Name**值的相应***A*** **.Number**值更新*表 A。**表 A*没有**名称**列。

 *****所以我想得到这样的东西：

**表 A 之前**：

```
身份证 | 数字
1 | 2

```

**数字**2 符合“X”**名称**值。

在 DataGridView 中更改“Y”的**名称**，符合“5”**号**...

**表 A 后**：

```
身份证 | 数字
1 | 5

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:20:38.907

不要使用加入。

您希望将表 A 显示为具有 Number 查找列的主体。

您需要 A 和 B 之间的关系以及在 A 上具有Expression[属性的 DataColumn](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:28:02.323

我假设`Id`在两个表中都是一个 PK。通过更改`B`表中“X”的名称，您可以更改`Name`与`Id`=2 关联的值。如果要更改`Id`表中 =1 的关联值，`A`则需要将其`Number`值更改为 5，而不是其`Name`本身。

你问的实际上是这样的：“`Number`如果它存在于表中，我想根据名称（不是唯一的）自动更改为其他名称`B`”。这对我来说很荒谬。例如，将什么值更改为不在列表中的项目？

您需要的是某种`A`带有 DropDown 的 Table 列表，用于`Number`填充 Table 中的值`B`。然后用户将从预定义的列表中选择值，并`A`使用正确的更新表`Id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:40:50.390

我会将**Result.Name**列更改为 a [`DataGridViewComboBoxColumn`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcomboboxcolumn.aspx)，将表 B 连接到它，并在将其发送回数据库进行存储之前在客户端引用组合的值。

以下是[其他列类型](http://msdn.microsoft.com/en-us/library/bxt3k60s.aspx)`DataGridView`

*   `DataGridViewTextBoxColumn`
*   `DataGridViewCheckBoxColumn`
*   `DataGridViewImageColumn`
*   `DataGridViewButtonColumn`
*   `DataGridViewLinkColumn`
*   *自定义：*继承自`DataGridViewColumn`*****

# iphone - 如何获取mp3文件的专辑封面

> ID：10040643
> 
> 赞同：2
> 
> 时间：2012-04-06T07:45:53.600
> 
> 标签：iphone, objective-c

我正在开发一个音频播放器。我成功获取了mp3文件的其他信息。但无法获取 mp3 文件的专辑封面。使用此代码我得到 mp3 文件信息。

```
- (NSDictionary *)songID3Tags
{   
AudioFileID fileID = nil;
OSStatus error = noErr;
error = AudioFileOpenURL((CFURLRef)self.filePath, kAudioFileReadPermission, 0, &fileID);
    if (error != noErr) {
    NSLog(@"AudioFileOpenURL failed");
}
UInt32 id3DataSize  = 0;
    char *rawID3Tag    = NULL;

error = AudioFileGetPropertyInfo(fileID, kAudioFilePropertyID3Tag, &id3DataSize, NULL);
if (error != noErr)
    NSLog(@"AudioFileGetPropertyInfo failed for ID3 tag");

rawID3Tag = (char *)malloc(id3DataSize);
if (rawID3Tag == NULL)
    NSLog(@"could not allocate %lu bytes of memory for ID3 tag", id3DataSize);

error = AudioFileGetProperty(fileID, kAudioFilePropertyID3Tag, &id3DataSize, rawID3Tag);
if( error != noErr )
    NSLog(@"AudioFileGetPropertyID3Tag failed");

UInt32 id3TagSize = 0;
UInt32 id3TagSizeLength = 0;

error = AudioFormatGetProperty(kAudioFormatProperty_ID3TagSize, id3DataSize, rawID3Tag, &id3TagSizeLength, &id3TagSize);

if (error != noErr) {
    NSLog( @"AudioFormatGetProperty_ID3TagSize failed" );
    switch(error) {
        case kAudioFormatUnspecifiedError:
            NSLog( @"Error: audio format unspecified error" ); 
            break;
        case kAudioFormatUnsupportedPropertyError:
            NSLog( @"Error: audio format unsupported property error" ); 
            break;
        case kAudioFormatBadPropertySizeError:
            NSLog( @"Error: audio format bad property size error" ); 
            break;
        case kAudioFormatBadSpecifierSizeError:
            NSLog( @"Error: audio format bad specifier size error" ); 
            break;
        case kAudioFormatUnsupportedDataFormatError:
            NSLog( @"Error: audio format unsupported data format error" ); 
            break;
        case kAudioFormatUnknownFormatError:
            NSLog( @"Error: audio format unknown format error" ); 
            break;
        default:
            NSLog( @"Error: unknown audio format error" ); 
            break;
    }
}   

CFDictionaryRef piDict = nil;
UInt32 piDataSize = sizeof(piDict);

error = AudioFileGetProperty(fileID, kAudioFilePropertyInfoDictionary, &piDataSize, &piDict);
if (error != noErr)
    NSLog(@"AudioFileGetProperty failed for property info dictionary");

free(rawID3Tag);

return (NSDictionary*)piDict;
} 
```

我知道通过 kAudioFilePropertyAlbumArtwork 可以获取 mp3 文件的专辑封面，但我不知道如何获取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:17:04.927

```
 - (NSArray *)artworksForFileAtPath:(NSString *)path {
NSMutableArray *artworkImages = [NSMutableArray array];
NSURL *u = [NSURL fileURLWithPath:path];
AVURLAsset *a = [AVURLAsset URLAssetWithURL:u options:nil];
 NSArray *artworks = [AVMetadataItem metadataItemsFromArray:a.commonMetadata  withKey:AVMetadataCommonKeyArtwork keySpace:AVMetadataKeySpaceCommon];

for (AVMetadataItem *i in artworks)
{
    NSString *keySpace = i.keySpace;
    UIImage *im = nil;

    if ([keySpace isEqualToString:AVMetadataKeySpaceID3])
    {
        NSDictionary *d = [i.value copyWithZone:nil];
        im = [UIImage imageWithData:[d objectForKey:@"data"]];
    }
    else if ([keySpace isEqualToString:AVMetadataKeySpaceiTunes])
        im = [UIImage imageWithData:[i.value copyWithZone:nil]];

    if (im)
        [artworkImages addObject:im];
}
NSLog(@"array description is %@", [artworkImages description]);
return artworkImages; } 
```

上面的代码返回 mp3 文件的专辑封面。其中 path 是音频文件路径。

# ios - AIR SDK：编译成 iOS 原生应用的 SWF 性能

> ID：10040649
> 
> 赞同：3
> 
> 时间：2012-04-06T07:46:16.163
> 
> 标签：ios, actionscript-3, flash, air

可以将 SWF 编译到 iOS 原生应用程序中是一件很棒的事情。我认为 AIR 现在是编写小游戏或互动书籍的最佳选择。当然，AIR 应用程序会比在目标 C 上编写的相同应用程序慢。问题是 AIR 应用程序会慢多少。可以在 iPhone 3G 或 iPad 1 上启动**简单的AIR 应用程序吗？**

还有一个问题是，任意flash app可以编译成iOS原生app吗？

将不胜感激**任何**想法！！！！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T13:12:39.120

1.  AIR 与 Objective C 的性能：

对于纯脚本执行，AIR 应用程序的执行速度比本机应用程序要慢，包括在 iOS 上。**但是**，几乎在所有情况下，限制应用程序性能的因素都是渲染，而不是脚本，因此它完全取决于您在内容中的可视化操作。这就是 Crooksy 建议你看看 Starling 的原因。如果没有 Starling（或使用 GPU 的类似库），要从 iPad1 中获得不错的性能是非常具有挑战性的。可以做到，但需要专业知识并需要额外的工作。从使用 Starling 或类似产品的巨大性能提升开始会好得多。

1.  任意flash app可以编译成iOS原生app吗？

只要它是用 AS3 制作的，那么它应该可以编译。对于它是否有效，我想到了两个主要警告：首先，少数 API 不适用于移动设备。（我认为打印就是一个例子。）其次，如果您在运行时读取任何 SWF，其中的所有动作脚本都将被忽略。（不是出于技术原因，这是 Apple 的要求。）因此，如果您的内容被拆分为一堆 SWF，则您需要在打包时将它们捆绑在一起，并且如果您绝对依赖于使用来自网络的脚本读取 SWF运行时，你会碰壁。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:20:55.497

查看新的 Starling 框架作品。

[http://gamua.com/](http://gamua.com/)

这是一个不错的教程系列的开始（第 1 集和第 2 集）

[http://www.hsharma.com/tutorials/](http://www.hsharma.com/tutorials/)

Lee Brimelow 也有一些教程

[http://www.gotoandlearn.com/](http://www.gotoandlearn.com/)

关于将 Flash 应用程序转换为与 iOS 兼容的应用程序，是的，这是可能的，但这取决于应用程序实际执行的操作，即在设备上正确执行之前是否需要进行任何修改。

# winforms - Visual Studio - 命名表格

> ID：10040656
> 
> 赞同：0
> 
> 时间：2012-04-06T07:47:16.370
> 
> 标签：winforms, visual-studio

这可能是一个非常基本的问题，但是命名我的表单的最佳方式是什么？
我的意思是，我可以使用空格还是以后会给我带来问题？

**示例**
我应该使用“Logged on Popup”还是“Logged_on_Popup”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:50:28.927

由于 Forms 也是类，因此您应该遵循[Class Namings](http://msdn.microsoft.com/en-us/library/4xhs4564%28v=vs.71%29.aspx)：

*   使用名词或名词短语来命名一个类。
*   使用帕斯卡案例。
*   谨慎使用缩写。
*   不要在类名上使用类型前缀，例如 C 表示类。例如，使用类名 FileStream 而不是 CFileStream。
*   不要使用下划线字符 (_)。
*   有时，有必要提供一个以字母 I 开头的类名，即使该类不是接口。只要 I 是作为类名一部分的整个单词的第一个字母，这是合适的。例如，类名 IdentityStore 是合适的。
*   在适当的情况下，使用复合词来命名派生类。派生类名称的第二部分应该是基类的名称。例如，`ApplicationException`是从名为 的类派生的类的适当名称`Exception`，因为`ApplicationException`是一种异常。在应用此规则时使用合理的判断。例如，Button 是从 Control 派生的类的适当名称。虽然按钮是一种控件，但将 Control 作为类名的一部分会不必要地延长名称。

所以`Log On Popup`是无效的，`Log_On_Popup`从编译器的角度来看应该是有效的，但从类命名指南来看却不是。我应该选择`LogOnPopup`. 有些人喜欢在其中添加后缀`LogOnPopupForm`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T07:51:14.733

不要使用空格。或下划线。Microsoft 确实有一些他们推荐的[命名约定](http://msdn.microsoft.com/en-us/library/ms229045.aspx)。虽然他们没有具体的建议：表单命名，但它们可能是一个很好的阅读：

> 优先考虑可读性而不是简洁。属性名称 CanScrollHorizo​​ntally 优于 ScrollableX（对 X 轴的模糊引用）。
> 
> 不要使用下划线、连字符或任何其他非字母数字字符。

* * *

另外，请记住，代码中使用的名称不会暴露给最终用户 - 而表单的标题却是 - 确保这些标题选择得当。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:53:11.413

```
public partial class LoggedOnPopupForm 
```

在组件名称中可以使用空格，但我不建议这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:32:07.460

很简单，您可以使用 log_on_popup 如果您的疑问是如何命名它，当您的表单设计器打开时，打开**属性窗口**（如果属性窗口不存在，只需右键单击表单并选择属性），在属性中，您将找到**（名称）**只需输入**log_on_popup** :)

# c# - 异常在 C# 中将 msg 设为：“IndexOutOfRangeException was unhandle OrgerView”，我该怎么办？

> ID：10040669
> 
> 赞同：0
> 
> 时间：2012-04-06T07:48:38.310
> 
> 标签：c#, ms-access-2007

*我试图在 C# 中连接 MS Access Db 并想查看全部。我的 Db 连接代码如下所示*

```
String conStr= @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Administrator\Desktop\SMSGateway2\SMS.mdb;Persist Security Info=True; Jet OLEDB:Database Password=testing" ;

        OleDbConnection con;
        con = new OleDbConnection(conStr);
        string cmdString = "select * from Temp_Order";
        OleDbCommand command = new OleDbCommand(cmdString, con);

        try
        {
            con.Open();
            command.ExecuteNonQuery();

            OleDbDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {
                richTextBox1.Text = "Student Name: " + reader["SenderNo"].ToString() + "\n" +
                   "ID: " + reader["OrgerView"].ToString() + "\n" +
                   "Program: " + reader["OrderTime"].ToString() + "\n" +
                   "Address: " + reader["Flag"].ToString();
            }

        }
        catch (Exception readexcp)
        {
            throw readexcp;
        }
        finally
        {
            con.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:56:50.773

首先删除此行 `command.ExecuteNonQuery();`，然后检查 SenderNo、OrgerView、OrderTime 和 Flag 是有效的列名。

# http - Chrome 不发送“If-Modified-Since”

> ID：10040670
> 
> 赞同：8
> 
> 时间：2012-04-06T07:48:40.123
> 
> 标签：http, if-modified-since

我希望浏览器始终添加（第一次除外）“If-Modified-Since”请求标头以避免不必要的流量。

响应头是：

```
Accept-Ranges:bytes
Cache-Control:max-age=0, must-revalidate
Connection:Keep-Alive
Content-Length:2683
Content-Type:text/html; charset=UTF-8
Date:Thu, 05 Apr 2012 13:06:19 GMT
Keep-Alive:timeout=15, max=497
Last-Modified:Thu, 05 Apr 2012 13:05:11 GMT
Server:Apache/2.2.21 (Red Hat) 
```

FF 11 和 IE 9 都发送“If-Modified-Since”并得到 304 作为响应，但 Chrome 18 没有并得到 200。

为什么？如何强制 Chrome 发送“If-Modified-Since”标头？我不知道它是否重要，但所有请求都通过 HTTPS。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-18T07:13:37.343

我一直在追逐这个问题一段时间，以为我会分享我的发现。

“规则实际上很简单：证书的任何错误都意味着页面不会被缓存。”

[https://code.google.com/p/chromium/issues/detail?id=110649](https://code.google.com/p/chromium/issues/detail?id=110649)

如果您使用的是自签名证书，即使您告诉 Chrome 为其添加例外以便页面加载，该页面的任何资源都不会被缓存，并且后续请求也不会具有 If-Modified-Since 标头。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-26T17:54:45.003

我刚刚发现了这个问题，在对 Chrome 的`If_Modified_Since`行为感到困惑之后，我找到了答案。

Chrome 缓存文件的决定是基于`Expires`它接收到的标头。标`Expires`头有两个主要要求：

1.  它**必须**是格林威治标准时间 (GMT)，并且
2.  它**必须**按照[RFC 1123](http://www.ietf.org/rfc/rfc1123.txt)（基本上是[RFC 822](http://www.ietf.org/rfc/rfc0822.txt)的四位数年份）进行格式化。

格式如下：

```
Expires: Sat, 07 Sep 2013 05:21:03 GMT 
```

例如，在 PHP 中，以下输出格式正确的标头。

```
$duration = time() + 3600 // Expires in one hour.
header("Expires: " . gmdate("D, d M Y H:i:s", $duration) . " GMT"); 
```

（“GMT”被附加到字符串而不是“e”时区标志，因为当与 一起使用时`gmdate()`，该标志将输出“UTC”，RFC 1123 认为该标志无效。还要注意[PHP 常量](http://www.php.net/manual/en/class.datetime.phpdatetime.constants.rfc1123) `DateTime::RFC1123`并`DATE_RFC1123` **不会**提供正确的格式，因为它们*以小时为单位将差异输出到 GMT* [即 +02:00] 而不是“GMT”。）

有关详细信息，请参阅[W3C 的日期/时间格式规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1)。

简而言之，**Chrome 只会在标题遵循这种确切格式的情况下才能识别它。**这与`Cache-Control`标题相结合...

```
header("Cache-Control: private, must-revalidate, max-age=" . $duration); 
```

...允许我实施适当的缓存控制。一旦 Chrome 识别出这些标头，它就会开始缓存我发送给它的页面（即使是查询字符串！），它也开始发送`If_Modified_Since`标头。我将它与存储的“最后修改”日期进行了比较，发回`HTTP/1.1 304 Not Modified`，一切正常。

希望这可以帮助其他绊倒的人！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T13:40:26.837

我注意到几乎相同的行为，我的发现是：

*   首先，chrome 中的 200 状态指示器并不是全部事实，您还需要查看“Size Content”列。如果这显示“（来自缓存）”，则资源直接从缓存中获取，甚至不询问它是否被修改。

*   当请求具有 last-modified 标头的静态文件时，这种缺乏任何过期或 max-age 指示的资源缓存行为似乎适用。我注意到 chrome (ver. 22):

    1.  第一次请求文件（显然因为它不在缓存中）。
    2.  询问它是否被第二次修改（因为它在缓存中但没有新鲜的迹象）。
    3.  第三次直接使用，然后再使用（即使是新的浏览器会话）。
*   我对这种行为有点困惑，但这是相当合理的，如果它是静态的，很久以前就被修改过，并且自上次检查以来没有改变，你可以假设它会在一段时间内有效（不知道他们是如何计算的）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-03T18:25:39.240

我遇到了同样的问题，在 Chrome 中所有请求总是状态码 200，在其他浏览器中是 304。

原来我在 Devtools - Settings - General 页面上签入了**禁用缓存（在 DevTools 打开时）** ..:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-13T17:12:30.283

1.  不要在 Chrome 开发工具中禁用缓存（在“网络”选项卡上）。
2.  缓存控制应该是`Cache-Control: public`. 用作PHP 函数`true`的第二个参数：`header``header("Cache-Control: public", true);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-22T08:38:36.243

我还发现，如果我打开 DevTools，Chrome（最近的 v95+）也会返回缓存的 200 响应。它甚至从不将请求发送到服务器！如果我关闭 DevTools，行为应该是正常的，并且服务器会收到预期的请求。

# c# - 由于“make-local-hook”，无法为 emacs 加载 C# 模式

> ID：10040673
> 
> 赞同：2
> 
> 时间：2012-04-06T07:49:07.730
> 
> 标签：c#, emacs, elisp

模式：[http ://www.emacswiki.org/emacs/CSharpMode](http://www.emacswiki.org/emacs/CSharpMode)

日志：

```
Loading /.emacs.d/contrib/dev/csharp-mode.el
Done loading /.emacs.d/contrib/dev/csharp-mode.el
File mode specification error: (void-function make-local-hook)
Loading vc-git...done
When done with a buffer, type C-x #
(No files need saving)
File mode specification error: (void-function make-local-hook)
When done with a buffer, type C-x #
Making completion list... [2 times]
goto-history-element: End of history; no default available [3 times]
or: Symbol's function definition is void: make-local-hook
mouse-minibuffer-check: Minibuffer window is not active
(No files need saving)
When done with a buffer, type C-x #
(No files need saving)
File mode specification error: (void-function make-local-hook)
When done with a buffer, type C-x #
Making completion list... [2 times]
or: Symbol's function definition is void: make-local-hook 
```

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T08:20:24.657

`make-local-hook`已经过时多年，并在 Emacs 24 中完全删除。

您应该尝试找到该库的更新版本。根据您链接到的 Wiki 页面，最新版本在这里：
[http ://code.google.com/p/csharpmode/](http://code.google.com/p/csharpmode/)

如果做不到这一点，代码很可能只包含那些函数调用以保持与 Emacs 20 的向后兼容性，并且只要有适当的调用`add-hook`呈现，您需要做的就是`(make-local-hook HOOK)`从代码中删除所有实例.

这是其旧文档字符串的相关位：

> (make-local-hook HOOK)
> 
> This function is obsolete since 21.1; not necessary any more.
> 
> Make the hook HOOK local to the current buffer. The return value is HOOK.
> 
> *You never need to call this function now that `add-hook' does it for you if its LOCAL argument is non-nil.*

See also `C-h``f` `add-hook` `RET`

# django - django日历应用程序？

> ID：10040677
> 
> 赞同：2
> 
> 时间：2012-04-06T07:49:21.027
> 
> 标签：django, calendar

每个人。我正在为我的公司开发一个带有 django 的会议室预订系统。我需要这个系统中的日历组件。我想以每日、每周和每月视图查看我的活动，就像 Google 日历一样。是否有任何现有的应用程序对我有帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T07:58:45.033

Django 基于类的视图支持开箱即用的日、月和年视图。我们将这些用于项目（[示例](http://www.kortevlietschool.nl/agenda/2012/04/)）中的简单日历应用程序，就像一个魅力。我们使用 Python 的日历库作为通用模板标签的起点。

我用谷歌搜索了一个类似的想法，发现了这个：[http ://code.google.com/p/django-gencal/](http://code.google.com/p/django-gencal/)

# servicestack - ServiceStack 并返回一个流

> ID：10040680
> 
> 赞同：12
> 
> 时间：2012-04-06T07:49:39.250
> 
> 标签：servicestack

我刚刚开始使用 ServiceStack，这是一个很棒的库。

但是，我有一个业务需求，我们必须返回 xml 和 json，其中 xml 必须是特定格式。

例如，我们现有的客户希望使用以下格式的 xml：

```
<service name="service1" type="audio" .../> 
```

所以基本上是一堆属性。

我知道 ServiceStack 使用 DTO 的概念并使用返回 xml 元素的 DataContractSerializer，而不是上面带有 xml 属性的表单。

我仍然想将 DTO 用于请求（在 Accept 标头中传入 application/xml 或 application/json），然后我可以创建自己的 xml 字符串或 json 字符串，然后将它们返回为：

```
string result = "....xml or json string...";
return new MemoryStream(Encoding.UTF8.GetBytes(result)); 
```

其中结果字符串可以是 xml 字符串或 json 字符串。

我在提琴手中注意到响应内容类型为文本/html。

使用我使用的方法，我是否违反了任何 REST 原则？当前的 Content-Type (text/html) 会有问题吗？

如果我确实使用这种方法，它确实可以解决业务需求。

**编辑**

我发现我可以将 httpResult 返回为：

```
return new HttpResult(
         new MemoryStream(Encoding.UTF8.GetBytes(result)), "application/xml"); 
```

这给出了正确的内容类型。

那么，这是正确的方法还是如果我走这条路我会遇到问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-06T18:10:21.710

是的，返回 IHttpResult 将允许您根据需要控制确切的有效负载、内容类型和其他 HTTP 标头。

此外，您不限于返回流，即您可以使用 HttpResult 返回具有不同 Content-Type 的 xml 字符串。

以下是一些链接，可以更好地演示 ServiceStack 返回类型的可能性：

*   [ServiceStack 如何支持纯 C# 字符串、二进制、流、IStreamWriter 等返回类型](https://stackoverflow.com/questions/6245616/does-servicestack-support-binary-responses/6249042#6249042)
*   [使用 CORS 设置全局或每个服务的自定义 HTTP 标头的示例](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors/8215777#8215777)
*   [从 ServiceStack 服务返回图像的不同方式](https://gist.github.com/2321702)
*   [返回 HTML 的多个选项](https://stackoverflow.com/questions/8199493/is-it-possible-to-serve-html-pages-with-servicestack/8200056#8200056)

您还可以使用 FileInfo 对象返回静态文件，并带有一个可选参数以将文件作为附件返回，这将提示用户下载文件而不是尝试在浏览器中查看它：

```
return new HttpResult(new FileInfo("~/static-response.xml"), asAttachment:true); 
```

# c# - 向 splittercontainer 添加超过 1 个 bar

> ID：10040681
> 
> 赞同：0
> 
> 时间：2012-04-06T07:49:39.787
> 
> 标签：c#, visual-studio-2010, devexpress

是否可以在 Devexpress 或 Winforms 控件中的 splittercontainer 中添加 1 个以上的拆分器？我尝试在容器中嵌套容器，但主容器阻止子拆分器栏的移动，因此可以在其中创建一个灵活的拆分器容器方法？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:56:04.703

SplitPanel 可以嵌套，但每个控件只能包含 2 个面板，因此需要嵌套才能获得超过这 2 个面板或更多条形图。您能否详细说明*主容器阻止子分隔条的移动*？

# jquery - JQuery Connected Sortables并通过项目属性禁用项目拖动

> ID：10040684
> 
> 赞同：0
> 
> 时间：2012-04-06T07:49:57.143
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

连接排序的项目属性有问题。我想要做的是禁用使用 CSS 选择器传递的项目拖动（使用 :not 选项）：

```
.sortable({
    items: ":not(.disabledItem)"
}); 
```

但是，每当我：

1.  从项目中删除“禁用项目”类
2.  拖动它（不拖动一切正常）
3.  重新应用“disabledItem”类

它不会再次被禁用，即使它附加了“disabledItem”类。

JsFiddle 示例：http: [//jsfiddle.net/LZsT6/](http://jsfiddle.net/LZsT6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:01:26.797

嗨，你去**工作演示**：http: [//jsfiddle.net/tBKP6/1/](http://jsfiddle.net/tBKP6/1/)

随意使用 jsfiddle，而不是 :not I have used **cancel**您可以在文档中阅读更多详细信息。[http://jqueryui.com/demos/sortable/items.html](http://jqueryui.com/demos/sortable/items.html) && 别忘了接受答案 :)

> 通过将 jQuery 选择器传递给 items 选项来指定哪些项目可以排序。此选项中排除的项目不可排序，也不是可排序项目的有效目标。
> 
> 要仅防止对某些项目进行排序，请将 jQuery 选择器传递给取消选项。已取消的项目对其他人来说仍然是有效的排序目标。

**jQuery代码**

```
$('.list')
    .sortable({
        connectWith: ".list",
        //items: ":not(.disabledItem)"
        cancel: ".disabledItem"
    });

$('#enableItem').click(function(){
    $("#itemToDisable").removeClass('disabledItem');        
    //$("li[value='it']").removeClass('disabledItem');
});

$('#disableItem').click(function(){
    $("#itemToDisable").addClass('disabledItem');        
    //$("li[value='it']").removeClass('disabledItem');
}); 
```

​</p>

# iphone - UILabel 固定宽度/固定高度获取文字编号

> ID：10040685
> 
> 赞同：0
> 
> 时间：2012-04-06T07:50:17.213
> 
> 标签：iphone

我有一个在网络上读取 XML 文件的 iPhone 应用程序。我必须将读取的字符串放在许多标签中，标签大小是固定的。所以，我想知道标签包含固定大小的字符串长度。

就像这样，我有一个 UILabel，标签的大小是 320x480。现在我有一个非常长的字符串，它的长度可能是 10000。我想知道标签可以包含多少个字符。100 或 200 或 300。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:00:38.623

如果您希望标签在溢出时剪切字符串，请使用：

```
label.lineBreakMode = UILineBreakModeTailTruncation; // see other possible values, for different truncations 
```

如果您希望标签在溢出时自动减小字体大小，请使用：

```
label.adjustsFontSizeToFitWidth = YES;
label.minimumFontSize = 10.0f; // minimum font size in font points, that can be used 
```

如果您想知道，文本需要多大的标签设置：

```
CGSize limitSize = label.frame.size;
limitSize.height = 30000.0f;
CGSize countedSize = [label.text sizeWithFont:label.font constrainedToSize:limitSize]; 
```

# c++ - 迁移到 c++11

> ID：10040686
> 
> 赞同：7
> 
> 时间：2012-04-06T07:50:19.283
> 
> 标签：c++, c++11

我正在开发一种主要将 C++ 用于其核心组件的产品。尽管它使用 Visual C++ 作为 Windows 平台的主要编译器，并将其编辑器和调试器作为主要开发环境，但并未使用任何 Microsoft 特定技术。对于其他平台，它使用 gcc 进行编译。

我的代码库大量使用模拟右值引用（使用 Boost 移动库）、可变参数模板（使用 Boost 处理器），在某些情况下还使用表达式模板。

我很想切换到 C++11 以使用右值引用、完美转发、构造函数的默认和删除、可变参数模板以及 auto 和 decltype 来获得更简洁的代码库。

如果我这样做，我可能会对现有代码进行一些修改以简化它（使用模板别名和可能的 constexpr）。在这种情况下，我必须使用 mingw 切换到 Windows 平台的 gcc，因为 Visual Studio 没有实现默认和删除以及可变参数模板。此外，我必须切换到 gdb 作为调试器和不同的代码编辑器。

对我来说，在代码简单性和性能方面的好处看起来很大，但是稳定性、可用性（在某些平台上，例如 Android）、调试（从 Visual Studio 迁移到 gdb，因为我们有许多为 Visual Studio 调试器开发的可视化工具）和代码编辑器（与其说是大量模板代码，我没有发现太多使用自动完成、重构等，而且 Codelite、Codeblocks、QtCreator 与我们的构建系统配合得很好）是一些问题。

我想知道是否有任何中/大型项目（无论是商业项目还是开源项目）使用/打算使用上述任何 C++11 功能？进行这种迁移需要多少努力？

任何实践经验、技巧或智慧之言都会帮助我做出决定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T08:03:29.057

首先：这取决于政策。

像所有技术一样，从有效的东西转换到新的东西本身就是一种风险。根据您的心态和对项目的批评，您接受的风险程度可能会有所不同（例如，我将 Clang 的树顶版本用于个人项目，但在工作中使用了成熟的 gcc）。

就个人而言，我建议*不要*一头扎进生产就绪的项目，而是对可行的功能进行零碎的选择。

你提到：

*   右值引用和完美转发
*   `default`/`delete`
*   可变参数模板
*   类型推断 ( `auto`/ `decltype`)
*   模板别名和`constexpr`

VC++11[支持许多 C++11 特性](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)。例如，您现在可以开始使用*右值引用*和*类型推断*。如果我没记错的话，这些可以与 gcc 4.5.x 分支一起使用，它已经有一年多的历史了，非常好用。

您的列表中一个值得注意的缺席是*lambdas*，例如，VC++11 和 gcc 都支持它。

如果你想更进一步，那么你将不得不切换编译器和环境。由于您需要重新培训团队，因此付出的努力要大得多（就我个人而言，我在 mingw 上与 gdb 有过一些矛盾……）。

除非你有冒险精神，否则我建议现在挑选对两种编译器都有效的方法。不过，迁移始终是一种商业风险。

# android - 如何将 Makefile 重写为 android.mk？

> ID：10040693
> 
> 赞同：9
> 
> 时间：2012-04-06T07:51:22.433
> 
> 标签：android, android-ndk, android-ndk-r5

在我的新项目中，我需要基于 ac 编写的项目。而且我知道我可以使用 NDK 来做到这一点，但这里有一个问题：如何将标准重写`Makefile`为`Android.mk`? 更进一步，在Android中，我可以忽略ndk，直接使用jni构建项目，将c项目适配到android项目中吗？还有将 c 项目改编为 android 项目的想法吗？谢谢。最后，这是 Makefile：

```
# Makefile.in generated by automake 1.10.1 from Makefile.am.
# Makefile.  Generated from Makefile.in by configure.

# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
# 2003, 2004, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
# This Makefile.in is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

pkgdatadir = $(datadir)/fuse
pkglibdir = $(libdir)/fuse
pkgincludedir = $(includedir)/fuse
am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
install_sh_DATA = $(install_sh) -c -m 644
install_sh_PROGRAM = $(install_sh) -c
install_sh_SCRIPT = $(install_sh) -c
INSTALL_HEADER = $(INSTALL_DATA)
transform = $(program_transform_name)
NORMAL_INSTALL = :
PRE_INSTALL = :
POST_INSTALL = :
NORMAL_UNINSTALL = :
PRE_UNINSTALL = :
POST_UNINSTALL = :
build_triplet = i686-pc-linux-gnu
host_triplet = i686-pc-linux-gnu
target_triplet = i686-pc-linux-gnu
subdir = .
DIST_COMMON = README $(am__configure_deps) $(srcdir)/Makefile.am \
    $(srcdir)/Makefile.in $(srcdir)/fuse.pc.in \
    $(top_srcdir)/configure AUTHORS COPYING COPYING.LIB ChangeLog \
    INSTALL NEWS compile config.guess config.rpath config.sub \
    depcomp install-sh ltmain.sh missing
ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
am__aclocal_m4_deps = $(top_srcdir)/m4/libtool.m4 \
    $(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
    $(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
    $(top_srcdir)/configure.in
am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
    $(ACLOCAL_M4)
am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \
 configure.lineno config.status.lineno
mkinstalldirs = $(install_sh) -d
CONFIG_HEADER = $(top_builddir)/include/config.h
CONFIG_CLEAN_FILES = fuse.pc
SOURCES =
DIST_SOURCES =
RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
    html-recursive info-recursive install-data-recursive \
    install-dvi-recursive install-exec-recursive \
    install-html-recursive install-info-recursive \
    install-pdf-recursive install-ps-recursive install-recursive \
    installcheck-recursive installdirs-recursive pdf-recursive \
    ps-recursive uninstall-recursive
am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
am__vpath_adj = case $$p in \
    $(srcdir)/*) f=`echo "$$p" | sed "s|^$$srcdirstrip/||"`;; \
    *) f=$$p;; \
  esac;
am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
am__installdirs = "$(DESTDIR)$(pkgconfigdir)"
pkgconfigDATA_INSTALL = $(INSTALL_DATA)
DATA = $(pkgconfig_DATA)
RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive \
  distclean-recursive maintainer-clean-recursive
ETAGS = etags
CTAGS = ctags
DIST_SUBDIRS = $(SUBDIRS)
DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
distdir = $(PACKAGE)-$(VERSION)
top_distdir = $(distdir)
am__remove_distdir = \
  { test ! -d $(distdir) \
    || { find $(distdir) -type d ! -perm -200 -exec chmod u+w {} ';' \
         && rm -fr $(distdir); }; }
DIST_ARCHIVES = $(distdir).tar.gz
GZIP_ENV = --best
distuninstallcheck_listfiles = find . -type f -print
distcleancheck_listfiles = find . -type f -print
ACLOCAL = ${SHELL} /home/kaiwii/fuse-2.8.1/missing --run aclocal-1.10
AMTAR = ${SHELL} /home/kaiwii/fuse-2.8.1/missing --run tar
AR = ar
AUTOCONF = ${SHELL} /home/kaiwii/fuse-2.8.1/missing --run autoconf
AUTOHEADER = ${SHELL} /home/kaiwii/fuse-2.8.1/missing --run autoheader
AUTOMAKE = ${SHELL} /home/kaiwii/fuse-2.8.1/missing --run automake-1.10
AWK = gawk
CC = gcc
CCDEPMODE = depmode=gcc3
CFLAGS = -Wall -W -Wno-sign-compare -Wstrict-prototypes -Wmissing-declarations -Wwrite-strings -g -O2 -fno-strict-aliasing
CPP = gcc -E
CPPFLAGS = 
CYGPATH_W = echo
DEFS = -DHAVE_CONFIG_H
DEPDIR = .deps
DSYMUTIL = 
DUMPBIN = 
ECHO_C = 
ECHO_N = -n
ECHO_T = 
EGREP = /bin/grep -E
EXEEXT = 
FGREP = /bin/grep -F
GREP = /bin/grep
INIT_D_PATH = /etc/init.d
INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_STRIP_PROGRAM = $(install_sh) -c -s
LD = /usr/bin/ld
LDFLAGS = 
LIBICONV = 
LIBOBJS = 
LIBS = 
LIBTOOL = $(SHELL) $(top_builddir)/libtool
LIPO = 
LN_S = ln -s
LTLIBICONV = 
LTLIBOBJS = 
MAKEINFO = ${SHELL} /home/kaiwii/fuse-2.8.1/missing --run makeinfo
MKDIR_P = /bin/mkdir -p
MOUNT_FUSE_PATH = /sbin
NM = /usr/bin/nm -B
NMEDIT = 
OBJDUMP = objdump
OBJEXT = o
OTOOL = 
OTOOL64 = 
PACKAGE = fuse
PACKAGE_BUGREPORT = 
PACKAGE_NAME = fuse
PACKAGE_STRING = fuse 2.8.1
PACKAGE_TARNAME = fuse
PACKAGE_VERSION = 2.8.1
PATH_SEPARATOR = :
RANLIB = ranlib
SED = /bin/sed
SET_MAKE = 
SHELL = /bin/bash
STRIP = strip
UDEV_RULES_PATH = /etc/udev/rules.d
VERSION = 2.8.1
abs_builddir = /home/kaiwii/fuse-2.8.1
abs_srcdir = /home/kaiwii/fuse-2.8.1
abs_top_builddir = /home/kaiwii/fuse-2.8.1
abs_top_srcdir = /home/kaiwii/fuse-2.8.1
ac_ct_CC = gcc
ac_ct_DUMPBIN = 
am__include = include
am__leading_dot = .
am__quote = 
am__tar = ${AMTAR} chof - "$$tardir"
am__untar = ${AMTAR} xf -
bindir = ${exec_prefix}/bin
build = i686-pc-linux-gnu
build_alias = 
build_cpu = i686
build_os = linux-gnu
build_vendor = pc
builddir = .
datadir = ${datarootdir}
datarootdir = ${prefix}/share
docdir = ${datarootdir}/doc/${PACKAGE_TARNAME}
dvidir = ${docdir}
exec_prefix = ${prefix}
host = i686-pc-linux-gnu
host_alias = 
host_cpu = i686
host_os = linux-gnu
host_vendor = pc
htmldir = ${docdir}
includedir = ${prefix}/include
infodir = ${datarootdir}/info
install_sh = $(SHELL) /home/kaiwii/fuse-2.8.1/install-sh
libdir = ${exec_prefix}/lib
libexecdir = ${exec_prefix}/libexec
libfuse_libs = -pthread -lrt -ldl  
localedir = ${datarootdir}/locale
localstatedir = ${prefix}/var
lt_ECHO = echo
mandir = ${datarootdir}/man
mkdir_p = /bin/mkdir -p
oldincludedir = /usr/include
pdfdir = ${docdir}
pkgconfigdir = ${libdir}/pkgconfig
prefix = /usr/local
program_transform_name = s,x,x,
psdir = ${docdir}
sbindir = ${exec_prefix}/sbin
sharedstatedir = ${prefix}/com
srcdir = .
subdirs2 = include lib util example
sysconfdir = ${prefix}/etc
target = i686-pc-linux-gnu
target_alias = 
target_cpu = i686
target_os = linux-gnu
target_vendor = pc
top_build_prefix = 
top_builddir = .
top_srcdir = .
ACLOCAL_AMFLAGS = -I m4
SUBDIRS = include lib util example
EXTRA_DIST = \
    fuse.pc.in      \
    README*         \
    Filesystems     \
    FAQ         \
    doc/how-fuse-works  \
    doc/kernel.txt      \
    doc/Doxyfile

pkgconfig_DATA = fuse.pc
all: all-recursive

.SUFFIXES:
am--refresh:
    @:
$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
    @for dep in $?; do \
      case '$(am__configure_deps)' in \
        *$$dep*) \
          echo ' cd $(srcdir) && $(AUTOMAKE) --gnu '; \
          cd $(srcdir) && $(AUTOMAKE) --gnu  \
        && exit 0; \
          exit 1;; \
      esac; \
    done; \
    echo ' cd $(top_srcdir) && $(AUTOMAKE) --gnu  Makefile'; \
    cd $(top_srcdir) && \
      $(AUTOMAKE) --gnu  Makefile
.PRECIOUS: Makefile
Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
    @case '$?' in \
      *config.status*) \
        echo ' $(SHELL) ./config.status'; \
        $(SHELL) ./config.status;; \
      *) \
        echo ' cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe)'; \
        cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe);; \
    esac;

$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
    $(SHELL) ./config.status --recheck

$(top_srcdir)/configure:  $(am__configure_deps)
    cd $(srcdir) && $(AUTOCONF)
$(ACLOCAL_M4):  $(am__aclocal_m4_deps)
    cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
fuse.pc: $(top_builddir)/config.status $(srcdir)/fuse.pc.in
    cd $(top_builddir) && $(SHELL) ./config.status $@

mostlyclean-libtool:
    -rm -f *.lo

clean-libtool:
    -rm -rf .libs _libs

distclean-libtool:
    -rm -f libtool
install-pkgconfigDATA: $(pkgconfig_DATA)
    @$(NORMAL_INSTALL)
    test -z "$(pkgconfigdir)" || $(MKDIR_P) "$(DESTDIR)$(pkgconfigdir)"
    @list='$(pkgconfig_DATA)'; for p in $$list; do \
      if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
      f=$(am__strip_dir) \
      echo " $(pkgconfigDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(pkgconfigdir)/$$f'"; \
      $(pkgconfigDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(pkgconfigdir)/$$f"; \
    done

uninstall-pkgconfigDATA:
    @$(NORMAL_UNINSTALL)
    @list='$(pkgconfig_DATA)'; for p in $$list; do \
      f=$(am__strip_dir) \
      echo " rm -f '$(DESTDIR)$(pkgconfigdir)/$$f'"; \
      rm -f "$(DESTDIR)$(pkgconfigdir)/$$f"; \
    done

# This directory's subdirectories are mostly independent; you can cd
# into them and run `make' without going through this Makefile.
# To change the values of `make' variables: instead of editing Makefiles,
# (1) if the variable is set in `config.status', edit `config.status'
#     (which will cause the Makefiles to be regenerated when you run `make');
# (2) otherwise, pass the desired values on the `make' command line.
$(RECURSIVE_TARGETS):
    @failcom='exit 1'; \
    for f in x $$MAKEFLAGS; do \
      case $$f in \
        *=* | --[!k]*);; \
        *k*) failcom='fail=yes';; \
      esac; \
    done; \
    dot_seen=no; \
    target=`echo $@ | sed s/-recursive//`; \
    list='$(SUBDIRS)'; for subdir in $$list; do \
      echo "Making $$target in $$subdir"; \
      if test "$$subdir" = "."; then \
        dot_seen=yes; \
        local_target="$$target-am"; \
      else \
        local_target="$$target"; \
      fi; \
      (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
      || eval $$failcom; \
    done; \
    if test "$$dot_seen" = "no"; then \
      $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
    fi; test -z "$$fail"

$(RECURSIVE_CLEAN_TARGETS):
    @failcom='exit 1'; \
    for f in x $$MAKEFLAGS; do \
      case $$f in \
        *=* | --[!k]*);; \
        *k*) failcom='fail=yes';; \
      esac; \
    done; \
    dot_seen=no; \
    case "$@" in \
      distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
      *) list='$(SUBDIRS)' ;; \
    esac; \
    rev=''; for subdir in $$list; do \
      if test "$$subdir" = "."; then :; else \
        rev="$$subdir $$rev"; \
      fi; \
    done; \
    rev="$$rev ."; \
    target=`echo $@ | sed s/-recursive//`; \
    for subdir in $$rev; do \
      echo "Making $$target in $$subdir"; \
      if test "$$subdir" = "."; then \
        local_target="$$target-am"; \
      else \
        local_target="$$target"; \
      fi; \
      (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
      || eval $$failcom; \
    done && test -z "$$fail"
tags-recursive:
    list='$(SUBDIRS)'; for subdir in $$list; do \
      test "$$subdir" = . || (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) tags); \
    done
ctags-recursive:
    list='$(SUBDIRS)'; for subdir in $$list; do \
      test "$$subdir" = . || (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) ctags); \
    done

ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
    list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
    unique=`for i in $$list; do \
        if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
      done | \
      $(AWK) '{ files[$$0] = 1; nonemtpy = 1; } \
          END { if (nonempty) { for (i in files) print i; }; }'`; \
    mkid -fID $$unique
tags: TAGS

TAGS: tags-recursive $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
        $(TAGS_FILES) $(LISP)
    tags=; \
    here=`pwd`; \
    if ($(ETAGS) --etags-include --version) >/dev/null 2>&1; then \
      include_option=--etags-include; \
      empty_fix=.; \
    else \
      include_option=--include; \
      empty_fix=; \
    fi; \
    list='$(SUBDIRS)'; for subdir in $$list; do \
      if test "$$subdir" = .; then :; else \
        test ! -f $$subdir/TAGS || \
          tags="$$tags $$include_option=$$here/$$subdir/TAGS"; \
      fi; \
    done; \
    list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
    unique=`for i in $$list; do \
        if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
      done | \
      $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
          END { if (nonempty) { for (i in files) print i; }; }'`; \
    if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
      test -n "$$unique" || unique=$$empty_fix; \
      $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
        $$tags $$unique; \
    fi
ctags: CTAGS
CTAGS: ctags-recursive $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
        $(TAGS_FILES) $(LISP)
    tags=; \
    list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
    unique=`for i in $$list; do \
        if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
      done | \
      $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
          END { if (nonempty) { for (i in files) print i; }; }'`; \
    test -z "$(CTAGS_ARGS)$$tags$$unique" \
      || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
         $$tags $$unique

GTAGS:
    here=`$(am__cd) $(top_builddir) && pwd` \
      && cd $(top_srcdir) \
      && gtags -i $(GTAGS_ARGS) $$here

distclean-tags:
    -rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags

distdir: $(DISTFILES)
    $(am__remove_distdir)
    test -d $(distdir) || mkdir $(distdir)
    @srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
    topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
    list='$(DISTFILES)'; \
      dist_files=`for file in $$list; do echo $$file; done | \
      sed -e "s|^$$srcdirstrip/||;t" \
          -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
    case $$dist_files in \
      */*) $(MKDIR_P) `echo "$$dist_files" | \
               sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
               sort -u` ;; \
    esac; \
    for file in $$dist_files; do \
      if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
      if test -d $$d/$$file; then \
        dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
        if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
          cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
        fi; \
        cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
      else \
        test -f $(distdir)/$$file \
        || cp -p $$d/$$file $(distdir)/$$file \
        || exit 1; \
      fi; \
    done
    list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
      if test "$$subdir" = .; then :; else \
        test -d "$(distdir)/$$subdir" \
        || $(MKDIR_P) "$(distdir)/$$subdir" \
        || exit 1; \
        distdir=`$(am__cd) $(distdir) && pwd`; \
        top_distdir=`$(am__cd) $(top_distdir) && pwd`; \
        (cd $$subdir && \
          $(MAKE) $(AM_MAKEFLAGS) \
            top_distdir="$$top_distdir" \
            distdir="$$distdir/$$subdir" \
        am__remove_distdir=: \
        am__skip_length_check=: \
            distdir) \
          || exit 1; \
      fi; \
    done
    -find $(distdir) -type d ! -perm -777 -exec chmod a+rwx {} \; -o \
      ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
      ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
      ! -type d ! -perm -444 -exec $(install_sh) -c -m a+r {} {} \; \
    || chmod -R a+r $(distdir)
dist-gzip: distdir
    tardir=$(distdir) && $(am__tar) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
    $(am__remove_distdir)

dist-bzip2: distdir
    tardir=$(distdir) && $(am__tar) | bzip2 -9 -c >$(distdir).tar.bz2
    $(am__remove_distdir)

dist-lzma: distdir
    tardir=$(distdir) && $(am__tar) | lzma -9 -c >$(distdir).tar.lzma
    $(am__remove_distdir)

dist-tarZ: distdir
    tardir=$(distdir) && $(am__tar) | compress -c >$(distdir).tar.Z
    $(am__remove_distdir)

dist-shar: distdir
    shar $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).shar.gz
    $(am__remove_distdir)

dist-zip: distdir
    -rm -f $(distdir).zip
    zip -rq $(distdir).zip $(distdir)
    $(am__remove_distdir)

dist dist-all: distdir
    tardir=$(distdir) && $(am__tar) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
    $(am__remove_distdir)

# This target untars the dist file and tries a VPATH configuration.  Then
# it guarantees that the distribution is self-contained by making another
# tarfile.
distcheck: dist
    case '$(DIST_ARCHIVES)' in \
    *.tar.gz*) \
      GZIP=$(GZIP_ENV) gunzip -c $(distdir).tar.gz | $(am__untar) ;;\
    *.tar.bz2*) \
      bunzip2 -c $(distdir).tar.bz2 | $(am__untar) ;;\
    *.tar.lzma*) \
      unlzma -c $(distdir).tar.lzma | $(am__untar) ;;\
    *.tar.Z*) \
      uncompress -c $(distdir).tar.Z | $(am__untar) ;;\
    *.shar.gz*) \
      GZIP=$(GZIP_ENV) gunzip -c $(distdir).shar.gz | unshar ;;\
    *.zip*) \
      unzip $(distdir).zip ;;\
    esac
    chmod -R a-w $(distdir); chmod a+w $(distdir)
    mkdir $(distdir)/_build
    mkdir $(distdir)/_inst
    chmod a-w $(distdir)
    dc_install_base=`$(am__cd) $(distdir)/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
      && dc_destdir="$${TMPDIR-/tmp}/am-dc-$$$$/" \
      && cd $(distdir)/_build \
      && ../configure --srcdir=.. --prefix="$$dc_install_base" \
        $(DISTCHECK_CONFIGURE_FLAGS) \
      && $(MAKE) $(AM_MAKEFLAGS) \
      && $(MAKE) $(AM_MAKEFLAGS) dvi \
      && $(MAKE) $(AM_MAKEFLAGS) check \
      && $(MAKE) $(AM_MAKEFLAGS) install \
      && $(MAKE) $(AM_MAKEFLAGS) installcheck \
      && $(MAKE) $(AM_MAKEFLAGS) uninstall \
      && $(MAKE) $(AM_MAKEFLAGS) distuninstallcheck_dir="$$dc_install_base" \
            distuninstallcheck \
      && chmod -R a-w "$$dc_install_base" \
      && ({ \
           (cd ../.. && umask 077 && mkdir "$$dc_destdir") \
           && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" install \
           && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" uninstall \
           && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" \
                distuninstallcheck_dir="$$dc_destdir" distuninstallcheck; \
          } || { rm -rf "$$dc_destdir"; exit 1; }) \
      && rm -rf "$$dc_destdir" \
      && $(MAKE) $(AM_MAKEFLAGS) dist \
      && rm -rf $(DIST_ARCHIVES) \
      && $(MAKE) $(AM_MAKEFLAGS) distcleancheck
    $(am__remove_distdir)
    @(echo "$(distdir) archives ready for distribution: "; \
      list='$(DIST_ARCHIVES)'; for i in $$list; do echo $$i; done) | \
      sed -e 1h -e 1s/./=/g -e 1p -e 1x -e '$$p' -e '$$x'
distuninstallcheck:
    @cd $(distuninstallcheck_dir) \
    && test `$(distuninstallcheck_listfiles) | wc -l` -le 1 \
       || { echo "ERROR: files left after uninstall:" ; \
            if test -n "$(DESTDIR)"; then \
              echo "  (check DESTDIR support)"; \
            fi ; \
            $(distuninstallcheck_listfiles) ; \
            exit 1; } >&2
distcleancheck: distclean
    @if test '$(srcdir)' = . ; then \
      echo "ERROR: distcleancheck can only run from a VPATH build" ; \
      exit 1 ; \
    fi
    @test `$(distcleancheck_listfiles) | wc -l` -eq 0 \
      || { echo "ERROR: files left in build directory after distclean:" ; \
           $(distcleancheck_listfiles) ; \
           exit 1; } >&2
check-am: all-am
check: check-recursive
all-am: Makefile $(DATA)
installdirs: installdirs-recursive
installdirs-am:
    for dir in "$(DESTDIR)$(pkgconfigdir)"; do \
      test -z "$$dir" || $(MKDIR_P) "$$dir"; \
    done
install: install-recursive
install-exec: install-exec-recursive
install-data: install-data-recursive
uninstall: uninstall-recursive

install-am: all-am
    @$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am

installcheck: installcheck-recursive
install-strip:
    $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
      install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
      `test -z '$(STRIP)' || \
        echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
mostlyclean-generic:

clean-generic:

distclean-generic:
    -test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)

maintainer-clean-generic:
    @echo "This command is intended for maintainers to use"
    @echo "it deletes files that may require special tools to rebuild."
clean: clean-recursive

clean-am: clean-generic clean-libtool mostlyclean-am

distclean: distclean-recursive
    -rm -f $(am__CONFIG_DISTCLEAN_FILES)
    -rm -f Makefile
distclean-am: clean-am distclean-generic distclean-libtool \
    distclean-tags

dvi: dvi-recursive

dvi-am:

html: html-recursive

info: info-recursive

info-am:

install-data-am: install-pkgconfigDATA

install-dvi: install-dvi-recursive

install-exec-am:

install-html: install-html-recursive

install-info: install-info-recursive

install-man:

install-pdf: install-pdf-recursive

install-ps: install-ps-recursive

installcheck-am:

maintainer-clean: maintainer-clean-recursive
    -rm -f $(am__CONFIG_DISTCLEAN_FILES)
    -rm -rf $(top_srcdir)/autom4te.cache
    -rm -f Makefile
maintainer-clean-am: distclean-am maintainer-clean-generic

mostlyclean: mostlyclean-recursive

mostlyclean-am: mostlyclean-generic mostlyclean-libtool

pdf: pdf-recursive

pdf-am:

ps: ps-recursive

ps-am:

uninstall-am: uninstall-pkgconfigDATA

.MAKE: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) install-am \
    install-strip

.PHONY: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) CTAGS GTAGS \
    all all-am am--refresh check check-am clean clean-generic \
    clean-libtool ctags ctags-recursive dist dist-all dist-bzip2 \
    dist-gzip dist-lzma dist-shar dist-tarZ dist-zip distcheck \
    distclean distclean-generic distclean-libtool distclean-tags \
    distcleancheck distdir distuninstallcheck dvi dvi-am html \
    html-am info info-am install install-am install-data \
    install-data-am install-dvi install-dvi-am install-exec \
    install-exec-am install-html install-html-am install-info \
    install-info-am install-man install-pdf install-pdf-am \
    install-pkgconfigDATA install-ps install-ps-am install-strip \
    installcheck installcheck-am installdirs installdirs-am \
    maintainer-clean maintainer-clean-generic mostlyclean \
    mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
    tags tags-recursive uninstall uninstall-am \
    uninstall-pkgconfigDATA

$(pkgconfig_DATA): config.status
# Tell versions [3.59,3.63) of GNU make to not export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:49:35.060

你走错路了。Android.mk 文件相当于 autotools 世界中的 Makefile.ac。所以从 Makefile.ac 的转换开始，而不是 Makefile 本身。

但是，您将面临的一个问题是 NDK 中的配置脚本没有任何等效项。这意味着没有自动方法来创建通常在使用自动工具的项目中找到的 config.h。

一个快速而简单的解决方案是使用适当的选项运行 ./configure 以生成正确的 config.h，将 Makefile.am 移植到 Android.mk 中，然后使用 NDK 构建。

我使用的选项是使用 ndk r7c（我针对 API_8 构建，即 2.2）：

```
./configure \
--host=arm-linux-androideabi \
CC=arm-linux-androideabi-gcc \
LD=arm-linux-androideabi-ld \
CPPFLAGS="-I/home/sdk/ndk/platforms/android-8/arch-arm/usr/include/" \
CFLAGS="-nostdlib" \
LDFLAGS="-Wl,-rpath-link=/home/sdk/ndk/platforms/android-8/arch-arm/usr/lib/ -L/home/sdk/ndk/platforms/android-8/arch-arm/usr/lib/" \
LIBS="-lc" 
```

可以从[http://forum.xda-developers.com/showthread.php?t=1612760下载我所做的示例（文件（1）和 libmagic）](http://forum.xda-developers.com/showthread.php?t=1612760)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T03:18:06.553

也许您不需要将`Makefile`or`Makefile.ac`转换为`Android.mk`. 您还可以按照 Android NDK 文档 (${NDK_INSTALL_DIR}/doc/STANDALONE-TOOLCHAIN.html) 中的详细说明独立使用 Android NDK 工具链。您需要在运行时指定`-sysroot`交叉编译选项，可能是这样的：`gcc``./configure`

```
./configure --host=xxx CC="xxx-gcc" \
CFLAGS="-sysroot ${NDK_INSTALL_DIR}/platforms/android-<level>/arch-<arch>/" \
CPPFLAGS="-sysroot ..." ... 
```

您可以通过构建专用工具链来消除提供`-sysroot`选项的需要（这在上面的 NDK 文档文件中也有详细说明），从而使其变得更加容易。

相关问题：

*   [对Tool to generate an Android.mk 的](https://stackoverflow.com/questions/6853568/tool-to-generate-an-android-mk)回答说您可以使用 cmake 来构建`Android.mk`文件 - 我没有尝试过，也不知道这种方法。
*   [Android.mk for LibXtract](https://stackoverflow.com/questions/10863741/android-mk-for-libxtract/10868093) (includes my answer with some more details than given here about using independent tool chain).

# xml - 使用 SQL Server 2005 从 xml 中检索字段

> ID：10040698
> 
> 赞同：1
> 
> 时间：2012-04-06T07:51:46.850
> 
> 标签：xml, sql-server-2005, xpath

我有以下 sql 代码：

```
declare @x xml
set @x = 

'<ResultBlock>
    <MatchSummary matches="1"><TotalMatchScore>900</TotalMatchScore>
        <Rules totalRuleCount="9">
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_SWTEL_DEMP_DEADD</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_MS</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_PAS_MS</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_CTEL_MS</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_REF</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_PAS_REF</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_CTEL_REF</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_MS_PER</RuleID>
                <Score>100</Score>
            </Rule>
            <Rule ruleCount="1" isGlobal="1">
                <RuleID>MA_REF_PER</RuleID>
                <Score>100</Score></Rule>
        </Rules>
        <MatchSchemes schemeCount="1">
            <Scheme>
                <SchemeID>7</SchemeID>
                <Score>900</Score>
            </Scheme>
        </MatchSchemes>
    </MatchSummary>
    <ErrorWarnings>
        <Errors errorCount="0" />
        <Warnings warningCount="0" />
    </ErrorWarnings>
</ResultBlock>'

select  x.value(N'RuleID', N'varchar(50)') as RuleID
from @x.nodes(N'//RuleID') t(x) 
```

我需要检索所有`RuleID`的。但是以下查询会产生错误： `XQuery [value()]: 'value()' requires a singleton (or empty sequence), found operand of type 'xdt:untypedAtomic *'`. 可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:11:47.523

你已经接近了——你的 XPath 将所有`<RuleID>`节点的列表作为 XML 片段返回——现在你想提取实际的元素值，所以你需要使用这个 SQL XQuery 来实现这一点：

```
select 
    x.value('.', 'varchar(50)') as RuleID
from 
    @x.nodes('//RuleID') t(x) 
```

`.`说：*只要给我元素的内容*-这就是你要找的，对吧？

# fonts - 更改 uinavigationcontroller 上的后退按钮的字体

> ID：10040699
> 
> 赞同：27
> 
> 时间：2012-04-06T07:51:49.030
> 
> 标签：fonts, uinavigationcontroller, back-button

我正在尝试更改 UINavigationControllerBar 中后退按钮上文本的字体颜色

```
 [[UIBarButtonItem appearance] setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; 
```

给我这个错误：[_UIBarItemAppearance setTitleColor:forState:]: unrecognized selector sent to instance 0x69aeb70'

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-06T20:47:42.193

```
NSMutableDictionary *attributes = [NSMutableDictionary dictionary];
[attributes setValue:[UIColor colorWithRed:(163.0f/255.0f) green:(0.0f) blue:(0.0f) alpha:1.0f] forKey:UITextAttributeTextColor];
[attributes setValue:[UIColor clearColor] forKey:UITextAttributeTextShadowColor];
[attributes setValue:[NSValue valueWithUIOffset:UIOffsetMake(0.0, 0.0)] forKey:UITextAttributeTextShadowOffset];
[[UIBarButtonItem appearance] setTitleTextAttributes:attributes forState:UIControlStateNormal]; 
```

似乎工作！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-17T12:19:11.287

```
[[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                     [UIFont fontWithName:kDefaultFont size:16.0f],UITextAttributeFont,
                                                     nil] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-04T14:19:47.767

改用这个，默认功能在 ios 5 中可用

```
UIBarButtonItem *backbutton =  [[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStyleBordered target:nil action:nil];    

    [backbutton setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                   [UIColor blackColor],UITextAttributeTextColor,[UIFont fontWithName:TEXTFONT size:16.0f],UITextAttributeFont,
                                                   nil] forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-18T04:37:04.873

还有漂亮的解决方案，iOS7+（因为属性名称）：

```
NSShadow *shadow = [NSShadow new];
[shadow setShadowColor: [UIColor colorWithWhite:0.0f alpha:0.750f]];
[shadow setShadowOffset: CGSizeMake(0.0f, 1.0f)];

[[UIBarButtonItem appearance] setTitleTextAttributes:@{
        NSFontAttributeName: [UIFont systemFontOfSize:24],
        NSForegroundColorAttributeName: [UIColor colorWithWhite:0.2 alpha:1.0],
        NSShadowAttributeName: shadow,
} forState:UIControlStateNormal]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-01T09:33:48.333

Swift 4 中的解决方案：

```
UIBarButtonItem.appearance().setTitleTextAttributes(
[
    NSAttributedStringKey.font: UIFont(name: "MyriadPro-SemiboldCond", size: 16)!,
    NSAttributedStringKey.foregroundColor: UIColor.white
], for: .normal) 
```

将此添加到 AppDelegate 中，它将应用于应用程序中的所有按钮。

# iphone - 如何使用字符串名称访问 UINavigationController

> ID：10040701
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:51:55.257
> 
> 标签：iphone, ios, objective-c-runtime, kvc

我的应用程序有 navController

在运行时我有 NSString *propertyName = @"navController";

我知道它是一种 UINavigationController

如何使用字符串名称访问 UINavigationController

我可能需要使用[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T07:53:56.290

[键值编码](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)会有所帮助，

```
UINavigationController *navController = [self valueForKey:@"navController"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:04:02.673

如果您想使用运行时，您可以使用以下命令从任何类 navigationController 中获取 Ivar：

```
Ivar var =  class_getInstanceVariable(your class, "navController"); 
```

然后使用该 Ivar，您可以使用此方法调用您的类的实例，以获取 navController 指向的对象

```
UINavigationController* controller = object_getIvar(instanceofyourclasswithnavcontroller, var) 
```

# liferay - Liferay Portlet 将告诉 Liferay 服务器是否已启动并正在运行

> ID：10040706
> 
> 赞同：0
> 
> 时间：2012-04-06T07:52:22.560
> 
> 标签：liferay, portlet

我的公司正在运行许多应用程序，其中之一是 liferay 门户。liferay portlet 由许多插件（portlet、主题、钩子）组成。

现在我要开发一个应用程序，它会显示 liferay-server 的状态。是否启动并运行？以及其中部署了所有 portlet 的内容。

我们将 Liferay 与 tomcat 服务器一起使用

liferay 中是否有任何方法可以确定在其中部署了哪些自定义 portlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:21:13.900

你会得到所有 portlet 的列表：

```
PortletLocalServiceUtil.getPortlets(); 
```

为了观察 liferay-server 的状态，开发一个带有 Web 服务接口的小型 portlet 很有用。

# entity-framework - 执行命令定义时发生错误。有关详细信息，请参阅内部异常 - 实体框架错误

> ID：10040711
> 
> 赞同：1
> 
> 时间：2012-04-06T07:53:02.900
> 
> 标签：entity-framework

我正在使用实体框架对数据库进行一些批量操作。

应用程序将上传一个 CSV 文件，该文件可以是任意数量的行和列，应用程序将文件上传到服务器并创建用于数据库插入的事务。我们使用事务来避免数据垃圾，如果发现任何损坏的数据，我们会回滚整个操作。

我的问题是，当我使用具有较少数据的较小文件时，它会完美运行。

使用大文件我在错误日志中收到此错误

> 2012-04-06 12:28:13 PM [4] Amit-PC [fe80::4c0c:23b9:4c3:bbb8%10]
> 错误 VC.Phoenix.QM.Web.UI.Controllers.QuotasController - 应用程序错误发生在方法：ProcessMatrix()。请联系应用程序管理员。错误详细信息是：执行命令定义时发生错误。有关详细信息，请参阅内部异常。
> 
> 在 System.Data.Objects.ObjectContext.CreateFunctionObjectResult[TElement](EntityCommand entityCommand, EntitySet entitySet, EdmType edmType, MergeOption mergeOption) 在 System.Data.Objects
> 的 System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior 行为)的stackTrace .ObjectContext.ExecuteFunction[TElement](String functionName, MergeOption mergeOption, ObjectParameter[] parameters) at System.Data.Objects.ObjectContext.ExecuteFunction[TElement](String functionName, ObjectParameter[] parameters)
> 
> 在 D:\OptimusRepository\VisionCritical\PhoenixQuota\Branches\BugFixes\VC.Phoenix.QM.EntityDataModel\QuotaManagement1.Designer.cs:
> VC中的 VC.Phoenix.QM.EntityDataModel.QuotaManagementContainer.SetTotalColumns(Nullable`1 quotaId) D:\OptimusRepository\VisionCritical\PhoenixQuota\Branches\BugFixes\VC.Phoenix.QM.Web.UI\Controllers\QuotasController.cs 中的 .Phoenix.QM.Web.UI.Controllers.QuotasController.SetTotalColumnData(Int32 quotaId, QuotaManagementContainer quotaManagementContext) :
> D:\OptimusRepository\VisionCritical\PhoenixQuota\Branches\BugFixes\VC.Phoenix.QM.Web 中 VC.Phoenix.QM.Web.UI.Controllers.QuotasController.ProcessMatrix(Int32 quotaId, String isCount, String cellPos) 的第 3032 行.UI\Controllers\QuotasController.cs：第 844 行

请帮助我理解实体框架的问题。提前致谢。

# c - 内联汇编是否需要在 linux 中获得权限？

> ID：10040713
> 
> 赞同：3
> 
> 时间：2012-04-06T07:53:13.477
> 
> 标签：c, linux, permissions, linux-kernel, inline-assembly

任何用户都可以为当前的 linux 内核运行内联汇编还是需要特殊权限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T07:56:32.557

内联汇编与内核无关。所以答案是否定的。

任何人都可以编写内联汇编并将其编译到程序中。它与编译器生成的代码没有任何不同。

[至于您的评论，答案是否定的，因为内存保护](http://en.wikipedia.org/wiki/Memory_protection)是不可能的。一旦您尝试访问未映射或不允许访问的内存（无论是在 C 语言中还是通过内联汇编），您就会遇到段错误。

* * *

换句话说，保护层不在 C 代码和编译器之间。它位于编译后的代码和操作系统之间。

因此，您不能使用 C 或内联汇编损坏内核 - 除非您已获得这样做的权限。

# windows-phone-7 - 从适用于 Windows Phone 7 的 Windows Azure 工具包部署 Web 服务

> ID：10040723
> 
> 赞同：0
> 
> 时间：2012-04-06T07:54:33.843
> 
> 标签：windows-phone-7, azure, azure-storage

几天来，我一直在使用适用于 Windows Phone 7 的 Windows Azure 工具包。我最近一直在尝试将我的 Web 服务部署到 Windows azure。我在让证书正常工作时遇到问题。

我已经按照这个演练（减去 Apple 推送通知部分）没有任何运气。 [http://www.wadewegner.com/2011/05/deploying-your-services-from-the-windows-azure-toolkit-for-windows-phone-7/](http://www.wadewegner.com/2011/05/deploying-your-services-from-the-windows-azure-toolkit-for-windows-phone-7/)

一切都部署到云上很好，但是当我在手机上测试它时，我按下了“安装证书”按钮，我总是收到一个错误，说找不到页面等。

这样做有什么理由吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:31:20.240

在玩过这个之后，我尝试打包我的服务并将其直接部署到 Windows Azure，而不是使用 Visual Studio 发布工具，它似乎正在工作。

# codeigniter - 如何在 netbeans IDE 中包含 codeigniter 函数的自动提示

> ID：10040729
> 
> 赞同：0
> 
> 时间：2012-04-06T07:55:22.503
> 
> 标签：codeigniter, netbeans-7, phpdoc

我能够将 codeigniter 功能与 netbeans 自动完成功能集成在一起。

我一直在寻找一种方法，以便用户文档也可以与 netbeans 集成，以便对 codeigniter 函数的简短描述也与具有自动完成功能的 codeigniter 函数列表一起提供。有什么建议么？

有一个选项可以在 netbeans 中包含 phpdoc 路径，但我用谷歌搜索我没有找到codeigniter 的**phpdoc**。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:59:08.470

我刚刚检查了这一点，我认为问题可能与 CodeIgniter 函数的声明方式有关。每个函数都封装在一个：

```
if ( ! function_exists('the_function_name'))
{
    function the_function_name($param)
    {
        //...
    }
} 
```

当我删除它时，自动完成似乎可以正常工作（带有描述以及参数）。我并不是建议您删除这些来解决问题（因为这将涉及破解 CI 核心），但这可能是 Netbeans 通过声明 CI 函数的方式管理自动完成的方式的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:06:54.787

您可以在类上方添加@property。您将拥有自己的模型和库的自动完成功能。

有关@property 的更多信息，请参阅[http://www.edmondscommerce.co.uk/netbeans/netbeans-autocomplete-on-class-properties-using-phpdoc/](http://www.edmondscommerce.co.uk/netbeans/netbeans-autocomplete-on-class-properties-using-phpdoc/)

问题是您需要为每个文件中的所有模型执行此操作。我不知道这是否适用于系统库。

# php - 如何扩展我的聊天应用程序？

> ID：10040730
> 
> 赞同：1
> 
> 时间：2012-04-06T07:55:37.313
> 
> 标签：php, chat, scalability

我有一个用 php/mysql 实现的网站，并托管在 hostmonster（*共享主机*）。

我计划在我的网站中加入聊天功能，使用户能够相互聊天。大约有。我的网站上有 1000 个用户。目前，我已经实现了一个 ajax 策略，它会定期（比如每 4 秒）向服务器发送请求，以获取有关在线用户和消息的 json 响应。

这是发送请求的示例代码：

```
var timer, delay = 4000;

timer = setInterval(function(){
    $.ajax({
      type: 'POST',
      url: 'update.php?user_id=2',
      success: function(html){
        $('.chat_messages').append(html);
      }
    });
}, delay); 
```

但正如我所见，用户数量越多，每 4 秒的请求数越多，Apache 服务器和数据库在传递响应方面的负担也越大。

所以我正在计划一个替代解决方案，它在服务器上没有开销。我听说过很少的服务器，如 APE、Nginx、Node.js、StreamHub，它们使用 COMET/reverse ajax 技术来处理请求，并且对我的目的很有效。

但问题是，我没有权限在我的 hostmonster cpanel 上安装第三方服务器。有没有其他方法，比如 HTML5 网络套接字？

**编辑：**顺便说一句，如果有可行的解决方案，我也有兴趣在 Java 上重建我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:26:15.597

正如您所发现的那样，为每个用户每 4 秒请求新内容将无法扩展。它甚至不适用于聊天应用程序，因为消息之间的延迟太长，导致您的聊天无法使用。

如果我是您，我会首先研究不需要您进行任何（或很少）编程的插入式聊天解决方案。您通常只需在页面中插入一些 JavaScript 代码，提供聊天的第三方会完成所有其余的工作（提供文件、运行聊天服务器等...）。我没有使用任何可用的解决方案，所以我不能推荐任何解决方案，但是快速的谷歌搜索得到了这个：[https](https://www.meebo.com/websites/) ://www.meebo.com/websites/这应该让你大致了解我是什么谈论。

如果上述内容不适合您，那么您面前有一个相当大的项目。你需要做的是编写一个 websocket 服务器（然后是你的聊天应用程序）。如果我想向你解释如何做到这一点，我可以写一本关于它的书，所以我只会这样说：谷歌是你的朋友。你不是第一个需要这个的人。因此，在 stackoverflow 中搜索提示，并且那里也有开源 PHP websocket 服务器（[这是一个](https://github.com/jam1401/PHP-Websockets-Server)）。

祝你好运。

# iphone - 如何访问我在相机应用中保存的照片的相册？

> ID：10040731
> 
> 赞同：2
> 
> 时间：2012-04-06T07:55:46.633
> 
> 标签：iphone, ios, camera, alassetslibrary

我已使用代码将照片保存到我的应用程序中的自定义相册

```
[library saveImage:self.capturedImg toAlbum:@"FunCam" withCompletionBlock:^(NSError *error) {
    if (error!=nil) {
        NSLog(@"Big error: %@", [error description]);
    }
}]; 
```

现在，当用户单击某个按钮并在视图中显示它们时，我想检索保存到该相册的所有照片，如相机应用程序（iphone 上的默认应用程序）显示

请帮助我，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:59:10.700

试试这些方法...

```
-(void)loadNewLibraryImages
{
    self.assetGroups = [[NSMutableArray alloc] init];
    // Group enumerator Block
    dispatch_async(dispatch_get_main_queue(), ^
                   {    
                       void (^assetGroupEnumerator)(struct ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop) 
                       {
                           if (group == nil) 
                           {
                               return;
                           }
                           if ([[group valueForProperty:ALAssetsGroupPropertyName] isEqualToString:@"YOUR ALBUM NAME"]) {
                               [self.assetGroups addObject:group];                             
                               [self loadImages];
                               return;
                           }                           

                           if (stop) {
                               return;
                           }

                       };

                       // Group Enumerator Failure Block
                       void (^assetGroupEnumberatorFailure)(NSError *) = ^(NSError *error) {

                           UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[NSString stringWithFormat:@"No Albums Available"] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                           [alert show];
                           [alert release];
                       };   

                       // Enumerate Albums
                       ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];        
                       [library enumerateGroupsWithTypes:ALAssetsGroupAll
                                              usingBlock:assetGroupEnumerator 
                                            failureBlock:assetGroupEnumberatorFailure];

                   });

}

-(void)loadImages
{   
    //for (ALAssetsGroup *assetGroup in self.assetGroups) {
//  for (int i = 0; i<[self.assetGroups count]; i++) {

        ALAssetsGroup *assetGroup = [self.assetGroups objectAtIndex:0];
        NSLog(@"ALBUM NAME:;%@",[assetGroup valueForProperty:ALAssetsGroupPropertyName]);

        [assetGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) 
         {         
         if(result == nil) 
         {
         return;
         }
            UIImage *img = [UIImage imageWithCGImage:[[result defaultRepresentation] fullScreenImage] scale:1.0 orientation:(UIImageOrientation)[[result valueForProperty:@"ALAssetPropertyOrientation"] intValue]];         

         }];  

//  }
} 
```

希望他们会有所帮助....

# ruby-on-rails - 如何通过用户定义的方法按日期从 sqlite3 中选择记录？

> ID：10040732
> 
> 赞同：0
> 
> 时间：2012-04-06T07:56:00.887
> 
> 标签：ruby-on-rails

我有一个名为 GuestOrder 的模型：

```
class GuestOrder < ActiveRecord::Base
end

# == Schema Information
#
# Table name: guest_orders
#
#  id             :integer         not null, primary key
#  notes          :string(255)
#  adults         :integer
#  children       :integer
#  created        :datetime
#  placed         :datetime
#  billed         :datetime
#  user_id        :integer
#  guest_table_id :integer
#  take_away_id   :integer
#  created_at     :datetime
#  updated_at     :datetime 
```

和一个控制器

```
class ApiController < ApplicationController
  def getOrdersByDate
    @guest_orders = GuestOrder.where(:created_at => (params[:created]))
    render json: @guest_orders
  end
end 
```

在`routes.rb`

```
 match '/api/getOrdersByDate' 
```

当我尝试在 url 中获取它时

```
http://localhost:3000/api/getOrdersByDate?:created=2012-4-5 
```

我得到了所有不受日期限制的记录

在我得到的服务器中`select * from guest_orders`

```
Started GET "/api/getOrdersByDate?:created=2012-4-5" for 127.0.0.1 at 2012-04-06 13:19:59 +0530
  Processing by ApiController#getOrdersByDate as HTML
  Parameters: {":created"=>"2012-4-5"}
  GuestOrder Load (26.3ms)  SELECT "guest_orders".* FROM "guest_orders"
Completed 200 OK in 47ms (Views: 1.5ms | ActiveRecord: 26.3ms)

Started GET "/api/getOrdersByDate?:created=2012-4-5" for 127.0.0.1 at 2012-04-06 13:21:21 +0530
  Processing by ApiController#getOrdersByDate as HTML
  Parameters: {":created"=>"2012-4-5"}
  GuestOrder Load (1.7ms)  SELECT "guest_orders".* FROM "guest_orders"
Completed 200 OK in 47ms (Views: 1.4ms | ActiveRecord: 1.7ms) 
```

我的数据库中的记录有日期记录`2012-03-22, 2012-04-05, 2012-04-06`

如何查询`getOrdersByDate`以获取特定日期的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:05:58.673

您的请求中不需要冒号，[`HashWithIndifferentAccess`](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)将为您进行 sym 查找。

```
http://localhost:3000/api/getOrdersByDate?created=2012-4-5 
```

但是这个问题看起来很有趣，因为将 a 传递`nil`给 where 条件应该会导致以下查询：

```
SELECT "guest_orders".* FROM "guest_orders" WHERE "created_at" IS NULL 
```

在您的情况下，缺少整个 SQL WHERE 条件。

### 更新#1

似乎需要重新加载。

要获取某个日期的记录，您可以使用以下方法：

```
time = Time.zone.parse(params[:created])
range = time.beginning_of_day..time.end_of_day
@guest_orders = GuestOrder.where(:created_at => range) 
```

### 更新#2

如果您有开始和结束日期：

```
t_start = Time.zone.parse(params[:start])
t_end = Time.zone.parse(params[:end])
range = t_start.beginning_of_day..t_end.end_of_day
@guest_orders = GuestOrder.where(:created_at => range) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T08:07:40.047

您可以使用此查询按日期获取记录

```
 @results = GuestOrder.where("created_at = ? ", params[:created]) 
```

尝试一下

# authentication - 避免多次投票龙卷风

> ID：10040735
> 
> 赞同：0
> 
> 时间：2012-04-06T07:56:09.570
> 
> 标签：authentication, tornado

我正在使用 Tornado 开发一个网站，用户将能够对项目进行投票。这些项目是由其他用户上传的，当他们上传内容时，我会为他们提供一个可以与朋友分享的 url，以便他们可以投票。

该网站要求那些上传项目的人注册，理想情况下我希望保持这种状态。但是，没有经过身份验证的人有可能对一个项目多次投票，因为我不知道如何跟踪他们投票的内容！有什么好办法吗？

我强调一个事实，即理想情况下我希望人们无需注册即可访问该网站！

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:38:05.000

实际上，您对此只有几个选择。所有这些都需要以某种方式跟踪此人的能力。

如果您不要求进行身份验证，那么您只需要跟踪 IP 以防止来自该 IP 的任何其他人投票（如果人们从基于 NAT 的网络连接，则会出现问题。

另一种选择是设置一个分配给他们的唯一 ID 的 cookie（我会亲自使用基于他们的 IP 和随机数的哈希组合生成。） Cookie 的问题是，如果有人清除他们的缓存，他们就是可以再次投票。这就是为什么大多数地方都要求人们登录帐户才能投票。

# c - 如何在c中返回这个缓冲区值？

> ID：10040738
> 
> 赞同：0
> 
> 时间：2012-04-06T07:56:33.327
> 
> 标签：c

假设我有 2 个 dll。第一个，我从 openbsd.org 获得关于使用 strlcpy 函数避免缓冲区溢出的代码，第二个是再次使用 gtk-glib-2.0 dll 导出函数以避免缓冲区溢出“g_snprintf”，而不是标准调用 c 函数 snprintf。当我想返回缓冲区字符串值时，问题就出现了，这样我就可以将此代码制作为 dll 并轻松地从 python 语言调用这两个函数。这是片段：

```
#include <stdio.h>
#include "dlfcn.h"
#include <sys/types.h>
#include <string.h>

#define lib     "strlcpy.dll"
#define func    "strlcpy" 
#define lib2    "libglib-2.0-0.dll"
#define func2   "g_snprintf"

char* returnMsg(char *buff, unsigned long n, char *msg)
{
int (*g_snprintf)(char *string, unsigned long n, char const *format,char  *msg);
void *handle2;
int errorno;

handle2 = dlopen(lib2, RTLD_LAZY);
if (!handle2){
    printf("\nerror opening second dll\n");
    return 1;

printf("got it at second dll: %p",handle2);

g_snprintf = dlsym(handle2, func2);
if (!g_snprintf)
    printf("error getting g_snprintf symbol..");
    return 1;
if ((errorno= g_snprintf(buff, n, "%s",msg)) !=0)
    printf("error cannot use g_snprintf..");
    return 1;
dlclose(handle2);
return buff;
}

int main()
{
char iv[32];
char *msg,*l;
int k;
unsigned int g;
char buff[16];

size_t (*strlcpy)(char *dst, const char *src, size_t siz);
void *handle;

handle = dlopen (lib, RTLD_LAZY);
if (!handle) {
    printf("error cannot open library..");
    return 1;
}
printf("opening dll at %p\n", handle);
strlcpy = dlsym(handle, func);
if (!strlcpy)  {
    printf("error cannot find desired exported function..");
    return 1;
}
printf("got it, strlcpy function at %p\n",strlcpy);

g = 16;
msg = "this is messages boy!";
memset(iv,0,sizeof(iv));
strlcpy(iv,msg,sizeof(iv));
for(k=0;k<strlen(msg);k++){
    printf("%c",iv[k]);
}
printf("\n%ul",g);
printf(" and %d",sizeof(iv));

l = returnMsg(buff, sizeof(buff),msg);
printf("%s",l);

dlclose(handle);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:03:14.127

```
if ((errorno= g_snprintf(buff, n, "%s",msg)) !=0)
    printf("error cannot use g_snprintf..");
    return 1; 
```

男孩，这不是蟒蛇。你需要括号`{}`。

# sos - 我如何找出'object'和'method'各自的值，它们是构造函数System.MulticastDelegate的参数？

> ID：10040743
> 
> 赞同：0
> 
> 时间：2012-04-06T07:57:27.187
> 
> 标签：sos, .net

我使用 .Net Reflector 反编译了委托。我发现它继承自 System.MulticastDelegate 。并且 System.MulticastDelegate 的构造函数有两个参数，即“对象”和“方法”。但是使用 sos.dll，我怎样才能得到具体的他们的价值？我是新人，我想看看具体的价值（他们的类型属于价值类型。在我看来，所有对象都是由价值类型组成的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:28:11.780

1 - 要使用 SOS 查找方法参数，请运行 !clrstack -a。或者，您可以使用 sosex.dll 并运行 !mdv 或 !mk -a。您还可以使用 !sos.dso 或 !sosex.mdso 在堆栈上查找对象。如果您有 System.MulticastDelegate 的实例并想要检查字段，请使用 !sos.do (!DumpObj) 或 !sosex.mdt。

2 - 并非所有对象都派生自 ValueType。所有对象实际上都是从 System.Object 派生的。从 System.ValueType 派生的所有类型都称为“值类型”。事实上，甚至 System.ValueType 都是从 System.Object 派生的，但它们被运行时视为特殊的。

# ruby - swig xcb lib 和 ruby

> ID：10040745
> 
> 赞同：0
> 
> 时间：2012-04-06T07:57:34.463
> 
> 标签：ruby, swig, xcb

我想为 xcb 创建一个基本的 ruby​​ 模块供我自己使用。我尝试了一个基本测试，用 swig 包装头文件：这是我的 xcb_ruby.i

```
%module ruxcby 
%{
#include <xcb/xcb.h>
#include <xcb/xcb_util.h>
#include <xcb/xcb_aux.h
#include <xcb/xcb_atom.h>
#include <xcb/xcb_event.h>
%}
%include "/usr/include/xcb/xproto.h"
%include "/usr/include/xcb/xcb.h"
%include "/usr/include/xcb/xcb_atom.h"
%include "/usr/include/xcb/xcb_aux.h"
%include "/usr/include/xcb/xcb_event.h" 
```

当我在 irb 中尝试它时，我能够连接以初始化连接，从这个连接中获取信息，但是 ruby​​ 接口就像在 C 中一样。我想要一个更面向对象的接口。

例如在 xcb.h 中有：

```
typedef struct xcb_connection_t xcb_connection_t;
xcb_connection_t * xcb_connect(const char *displayname, int *screenp);
int xcb_flush( xcb_connection_t *);
uint32_t xcb_generate_id( xcb_connection_t *);
void xcb_disconnect(xcb_connection_t * ); 
```

我想要一个 Connection 类，其中包含 new/connect()、flush()、generate_id() 和 disconnect() 方法，这是我的新 xcb_ruby.i：

```
%module ruxcby
%{
#include <xcb/xcb.h>
#include <xcb/xproto.h>
%}
%import "/usr/include/xcb/xproto.h"

typedef struct xcb_connection_t {
} Connection;

%extend Connection 
{
  Connection(const char *displayname, int *screenp)
  {
    Connection * c;
    c = xcb_connect(displayname, screenp);
    return c;
  }
  int flush()
  {
    return xcb_flush($self);
  }
  xcb_generic_event_t *wait_for_event()
  {
    return xcb_wait_for_event($self);
  }
  void disconnect()
  {
    return xcb_disconnect($self);
  }
  uint32_t generate_id()
  {
    return xcb_generate_id($self);
  }
}; 
```

如果我在生成 c 文件后尝试编译，则会出现错误：erreur: unknown type name 'Connection'</p>

有人可以告诉我我错在哪里吗？

谢谢

**编辑**

我做了一些修改，现在我可以编译它，但我仍然得到一些错误：

```
%module ruxcby
%{
#include <xcb/xcb.h>
#include <xcb/xproto.h>
typedef struct {
  xcb_connection_t * ptr;
} Connection;
%}
%import "/usr/include/xcb/xproto.h"
%feature("autodoc" , "1");

typedef struct {
  xcb_connection_t * ptr;
} Connection;
%extend Connection {
  Connection(const char *displayname, int *screenp)
 {
    Connection * c ;
    c->ptr = xcb_connect(displayname, screenp);
    return c;
 }
 int flush()
 {  
    return xcb_flush($self->ptr);
 }
 xcb_generic_event_t *wait_for_event()
 {
    return xcb_wait_for_event($self->ptr);
 }
 int connection_has_error()
 {
    return xcb_connection_has_error($self->ptr);
 }
 void disconnect()
 {
   return xcb_disconnect($self->ptr);
 }
 uint32_t generate_id()
 {
    return xcb_generate_id($self->ptr);
 }
}; 
```

现在我可以编译我的模块并使用它：

```
require './ruxcby'
=> true
conn=Connection.new(nil, nil)
=> #<Ruxcby::Connection:0x0000000223dfc8> 
```

但是当我尝试另一种方法时，我遇到了错误：

```
conn.connection_has_error 
ObjectPreviouslyDeleted: Expected argument 0 of type Connection *, but got Ruxcby::Connection #<Ruxcby:: 
```

似乎该方法存在，但是在将参数传递给该方法时仍然存在问题。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:43:51.407

我提出的解决方案也许可以帮助某人：当我扩展 Connection 类时，我没有为我的结构分配内存：

```
%extend Connection {
Connection(const char *displayname, int *screenp)
{
  Connection * c ;
  c = (Connection * ) malloc(sizeof(Connection));
  c->ptr = xcb_connect(displayname, screenp);
  return c;
}
~Connection()
{
  free($self);
} 
```

# android - 如何连接设备发送消息然后关闭Android应用程序中的蓝牙连接？

> ID：10040746
> 
> 赞同：0
> 
> 时间：2012-04-06T07:57:46.657
> 
> 标签：android, bluetooth, message, send

我有一个来自 android api 示例的蓝牙应用程序。当用户选择一个设备尝试向选定的配对设备发送消息时，我在列表中显示蓝牙配对设备，然后该消息应该传送到该设备。从这个当用户检查配对设备然后在编辑字段中输入消息然后单击发送按钮时，我想开发规范。当用户单击发送按钮时，用户可以连接到选定的设备，然后将该消息发送到该设备，然后如果交付是成功立即关闭连接。我已经实现了如下代码

```
 ListView listDevicesFound;
 ArrayAdapter<String> btArrayAdapter;
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set up the window layout
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    btArrayAdapter = new ArrayAdapter<String>(BluetoothChat.this, android.R.layout.simple_list_item_multiple_choice);
    listDevicesFound.setAdapter(btArrayAdapter);
    listDevicesFound.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    listDevicesFound.setSelected(true);
    listDevicesFound.setClickable(true);
    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
      if (pairedDevices.size() > 0) {
          for (BluetoothDevice device : pairedDevices) {
           String deviceBTName = device.getName();
           String deviceBTAddress = device.getAddress();
           btArrayAdapter.add(deviceBTName + "\n"  + deviceBTAddress);
          }
      }

      mSendButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

          SparseBooleanArray checked = listDevicesFound.getCheckedItemPositions();
            Set<BluetoothDevice> devices = btAdapter.getBondedDevices();
            Log.v("prasad", "devices.size()===>>>"+devices.size());
            for (int j=0;j<=devices.size();j++) 
               {
                    System.out.println(j);
                    if(checked.get(j))
                    {
                        String devadd= listDevicesFound.getItemAtPosition(j).toString();
                        String devaddress=devadd.substring(0,devadd.length()-17);
                        Log.v("prasad", "address===>>>"+devaddress);

                        /*
                         *BluetoothDevice:
                         *Represents a remote Bluetooth device. 
                         *A BluetoothDevice lets you create a connection with the respective device 
                         *or query information about it, such as the name, address, class, 
                         *and bonding state 
                         */

                        for(BluetoothDevice itDevices:devices)
                        {
                            Log.v("prasad", "itDevices.getAddress()===>>>"+itDevices.getAddress());
                            if(devadd.endsWith(itDevices.getAddress()))
                            {

                                            Log.v("1111","Here the adderess of selected device :"+itDevices.getAddress());

             }
         }
      }
   }

         //Please help on following steps
         //1.How to connect to a selected device code here                

         String message = messageEdit.getText().toString();
         //2.How to send the message to selected device here

         //3.How to close the connection with selected device here

            }
    });

  } 
```

请按照我在编码行中的评论

请任何人帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:18:17.357

您看过蓝牙聊天示例应用程序吗？我认为这与您尝试做的非常接近：http: [//developer.android.com/resources/samples/BluetoothChat/index.html](http://developer.android.com/resources/samples/BluetoothChat/index.html)

此外，Android 蓝牙开发人员指南包含与您提出的特定问题相关的代码示例：

//1.How to connect to a selected device code here
[http://developer.android.com/guide/topics/wireless/bluetooth.html#ConnectingDevices](http://developer.android.com/guide/topics/wireless/bluetooth.html#ConnectingDevices) 告诉你如何在 BluetoothServerSocket 上调用 accept() 来监听传入一侧，然后在另一侧的 BluetoothSocket 上调用 connect()。

//2.How to send the message to selected device here [http://developer.android.com/guide/topics/wireless/bluetooth.html#ManagingAConnection](http://developer.android.com/guide/topics/wireless/bluetooth.html#ManagingAConnection) 说明如何将您的套接字附加到 I/O 流，然后调用读/写在溪流上。

//3.如何在此处关闭与所选设备的连接您只需在 BluetoothSockets 上调用 close()。通常，您从一个线程执行此操作，这会导致蓝牙线程中的挂起操作引发 I/O 异常。

但同样，我建议通读上面列出的聊天示例和开发人员指南。

# delphi - 如何禁用 TdxRibbon（DevExpress 功能区控件）中的控件？

> ID：10040747
> 
> 赞同：4
> 
> 时间：2012-04-06T07:57:50.627
> 
> 标签：delphi, devexpress, ribbon

我的 Delphi 应用程序中有一个 DevExpress VCL 功能区 应用程序不时进行一些更新，在此期间我需要确保用户没有做任何事情，所以我希望能够禁用所有控件功能区，但我无法让每个选项卡上的控件数量正常工作

不管我怎么做，ComponentCount 都会返回 0，但我可以看到控件。我的测试代码是这样的：

```
procedure TfrmMain.RibbonDisable(var aMessage: TMessage);
var
  i: integer;
begin
  try
    for i := 0 to ribMain.TabCount - 1 do
      begin
        ribMain.Tabs.Items[i].Active := True;
        ShowMessage(IntToStr(ribMain.ActiveTab.ComponentCount));
      end;
  except
    on E:exception do
      Logfile.Error('frmMain.RibbonDisable: ' + E.Message);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T08:54:30.673

[`TdxRibbon`](http://documentation.devexpress.com/#WindowsForms/CustomDocument2500)只需在执行更新时禁用整个功能：

```
ribMain.Enabled := False; 
```

或者，如果您真的只想禁用选项卡项，请使用以下命令：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
begin
  for I := 0 to ribMain.BarManager.ItemCount - 1 do
    ribMain.BarManager.Items[I].Enabled := False;
end; 
```

几乎每个工具栏控件都禁用操作，而不是显示的内容，这是很常见的。

# android - 一项将始终在后台运行的服务？

> ID：10040756
> 
> 赞同：-2
> 
> 时间：2012-04-06T07:58:56.227
> 
> 标签：android, service, sms, location

考虑到 2 个人拥有该应用程序。当其中一个用户想知道另一个用户的位置时，他会发送一条短信（内容可以是任何内容或特定的）。现在当另一个用户收到短信时（如果可能，他不应该知道他收到了短信）。然后他的位置被发送回请求它的用户。希望解释清楚。

```
public void onReceive(Context context, Intent intent) 
{   
//this stops notifications to others
this.abortBroadcast();

//---get the SMS message passed in---
Bundle bundle = intent.getExtras();   
SmsMessage[] msgs = null;
String str = "";            
if (bundle != null)
{
    //---retrieve the SMS message received---
    Object[] pdus = (Object[]) bundle.get("pdus");
    msgs = new SmsMessage[pdus.length];            
    for (int i=0; i<msgs.length; i++){
        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
        str += "SMS from " + msgs[i].getOriginatingAddress();
        from = msgs[i].getOriginatingAddress();
        str += " :";
        str += msgs[i].getMessageBody().toString();
        msg = msgs[i].getMessageBody().toString();
        str += "\n"; 
    }
    if(checksomething){
        //make your actions
        //and no alert notification and sms not in inbox
    }
    else{
        //continue the normal process of sms and will get alert and reaches inbox
        this.clearAbortBroadcast();
    }
  } 
```

我得到了这个代码......我应该在这个里面做些什么改变......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:20:48.107

您需要的不是服务，而是位于您想要其位置的用户一侧的广播接收器。

```
public class SmsReceiver extends BroadcastReceiver {

    private static final String ACTION_SMS_RECEIVED = 
        "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context context, Intent intent) {

            if(intent.getAction().equals(ACTION_SMS_RECEIVED)){
                //your code to get location here.
            }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:30:02.790

`Service`通过扩展.like创建普通服务

```
 public class LocalService extends Service {
        @Override
        public void onCreate() {
  // SEND USER LOCATION
        }
        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {
            Log.i("LocalService", "Received start id " + startId + ": " + intent);
            return START_STICKY;
        }
        @Override
        public void onDestroy() {
        }
        @Override
        public IBinder onBind(Intent intent) {
            return null;
        }
       } 
```

开始您的服务：

```
 public final BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();
           // CHECK SMS IF IT IS FOR SEND LOCTION OR ANY OTHER SMS
            if (action.equals(ACTION_SMS_RECEIVED)) {
               //START SERVICE HERE
            }

        }
    }; 
```

并注册 BroadcastReceiver`ACTION_BOOT_COMPLETED ,ACTION_SCREEN_ON,ACTION_SCREEN_OFF`以处理服务的启动和停止

也许有帮助:-)

# php - 使用光滑的网格和 php 在服务器端保存数据

> ID：10040757
> 
> 赞同：0
> 
> 时间：2012-04-06T07:58:58.293
> 
> 标签：php, slickgrid

我正在使用以下功能添加数据

```
 grid.onAddNewRow.subscribe(function (e,args) {
        // code for adding data
    }); 
```

但在第一列中添加数据后立即调用它。我想在整行（所有列）中添加数据后调用此函数。在最后一列添加数据后，是否有任何事件或任何其他方式调用此函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:27:16.053

SlickGrid 适用于单元格编辑模型。没有编辑“行”的概念，只有行内的单元格。因此，您将如何决定用户何时在“最后”列中添加数据？用户可以添加新行并在第 1、2、3、5 列中添加数据，然后在第 4 列中添加数据。推测该行应仅在第 4 列被编辑后提交，但下一次可能是第 5 列或第 3 列.

我可以想到两个选择：

*   使用`onCellChange`事件并检查是否已将数据添加到每一列
*   使用自定义格式化程序向网格添加额外的列，以在新行中显示“提交”按钮。用户在将数据添加到新行时可以单击此按钮。

# c# - 如何测试 WinForm 数据绑定？

> ID：10040758
> 
> 赞同：2
> 
> 时间：2012-04-06T07:58:58.723
> 
> 标签：c#, winforms, unit-testing, data-binding

我正在尝试在 WinForm 应用程序中测试 DataBinding。以下测试用例失败。

```
[Test]
public void TestOneWayEntityBinding()
{
    //Arrange
    var entity = new MyEntity();
    entity.SomeProperty = "someValue";
    var userControl = new MyUserControl();
    const string pattern = @"xxx";

    //Act
    userControl.textBox.DataBindings.Add("Text", entity, "SomeProperty");
    userControl.textBox.Text = pattern;

    //Assert
    Assert.AreEqual(pattern, entity.SomeProperty);
} 
```

即使在绑定实例 b 上显式调用 b.WriteValue() 也不起作用。

谢谢，马塞洛。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:11:19.150

您似乎正在尝试测试 .Net 框架。你不应该为你不拥有的代码编写测试。这里的好选择是验收测试，它通过设置 textBox 文本作用于 UI（例如[White ）。](http://white.codeplex.com/)

顺便说一句，为什么`textBox`在您的用户控制中公开？应该隐藏实施。拥有像 type 'Pattern' 这样的属性很好`string`。而且您不应该公开您的控件中使用的数据绑定。因此，如果您不想使用 UI，那么对您的控件的良好测试将是：

```
[Test]
public void ShouldUpdateEntityWhenPatternChanged()
{
    //Arrange
    var entity = new MyEntity() { SomeProperty = "someValue" };    
    var userControl = new MyUserControl() { Entity = entity };
    const string pattern = @"xxx";

    //Act    
    userControl.Pattern = pattern;

    //Assert
    Assert.That(entity.SomeProperty, Is.EqualTo(pattern));
} 
```

理想情况下是模拟实体并验证是否设置了 SomeProperty，因为当前测试可能因两个原因而失败：文本框未绑定到 SomeProperty，或者 SomeProperty 设置器工作不正确。

更新看[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.datasourceupdatemode.aspx)为什么以编程方式设置文本后绑定不起作用。为了在属性更改而不是验证时更新绑定，请使用：

```
textBox.DataBindings.Add("Text", entity, "SomeProperty", true, DataSourceUpdateMode.OnPropertyChanged); 
```

更新似乎控制应该是可见的以进行验证。如果您不想更改 DataSourceUpdateMode，并且不想在没有 UI 的服务上运行测试，那么简单的 ControlTester 将帮助您：

```
public class ControlTester : IDisposable
{
    private Form _form = new Form();

    public ControlTester(Control control)
    {
        _form = new Form();
        _form.Controls.Add(control);
        _form.Show();
    }

    public void Dispose()
    {
        _form.Close();
    }
} 
```

在对被测控件进行操作时使用它：

```
using(new ControlTester(userControl))
    userControl.Pattern = pattern; 
```

**最后更新：** DataBining 不适用于尚未创建的控件。所以这里的选项：

*   创建假表单（使用 ControlTester）
*   运行真实形式
*   实例化后调用 CreateControl()

我认为最后一个选项是最好的。要使 DataBinding 在测试中工作，您可以简单地调用 CreateControl() 方法：

```
[Test]
public void ShouldUpdateEntityWhenPatternChanged()
{
    //Arrange
    const string pattern = @"xxx";
    var entity = new MyEntity() { SomeProperty = "someValue" };    
    var userControl = new MyUserControl();
    userControl.CreateControl();
    userControl.Entity = entity;

    //Act    
    userControl.Pattern = pattern;

    //Assert
    Assert.That(entity.SomeProperty, Is.EqualTo(pattern));
} 
```

# github - Github 问题跟踪器没有搜索结果？

> ID：10040763
> 
> 赞同：-1
> 
> 时间：2012-04-06T07:59:22.843
> 
> 标签：github

我开始使用个人 github。我还没有推送任何代码；我只玩过问题跟踪器。

我创建了一些问题，但发现“搜索”功能不会返回任何搜索结果，这与我输入的关键字无关。我去了某人的存储库并测试了他们的问题跟踪器，我可以毫无问题地搜索。

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:02:27.340

当您输入一个新问题时，您通常无法立即搜索它。将问题编入索引并将其包含在搜索引擎结果中需要时间。

Github 很可能不会持续地索引他们网站上的所有数据，而是定期索引。因此，最好的建议是稍后再回来查看并重试。如果仍然没有出现，可能是 Github 的一个 bug。

# android - Android 蓝牙使用 OBEX 发送私有/内部文件

> ID：10040765
> 
> 赞同：0
> 
> 时间：2012-04-06T07:59:43.300
> 
> 标签：android, file, bluetooth, internal, obex

是否可以通过蓝牙从 Android 应用程序私有目录发送文件？（目录/data/data//..（getFilesDir（）））
我无法在任何地方找到并回答这个问题。

这种 Intent.ACTION_SEND 方法适用于外部文件：
[Sending a File using Bluetooth OBEX Object Push Profile (OPP)](https://stackoverflow.com/questions/5577481/sending-a-file-using-bluetooth-obex-object-push-profile-opp)

但是，当我尝试发送私人文件
时，当 BtOpp 抛出 FileNotFoundException

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:39:42.910

```
String path = con.getFilesDir().getAbsolutePath() + File.separator  + TEMP_FILE_NAME; //i will get file from your /data/data/...
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("plain/text");// 
i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:/" + path));
startActivity(Intent.createChooser(i, "Send File")); 
```

如果工作，请点击接受....谢谢

# c# - FormsAuthenticationTicket 为空

> ID：10040768
> 
> 赞同：1
> 
> 时间：2012-04-06T08:00:39.020
> 
> 标签：c#, asp.net, .net

使用框架 4.0

场景 1：
   使用 Live.com 登录。
   在 Live.com FormsAuthenticationTicket 中不为空，ticket.name 是我的用户 ID。
   在 Local.com FormsAuthenticationTicket 中为空。
   我不知道这里缺少什么。

场景 2：
   使用 Local.com 登录。
   在 Local.com FormsAuthenticationTicket 中不为空，ticket.name 是我的用户 ID。
   在 Live.com FormsAuthenticationTicket 中为空。

我的机器配置设置在本地和实时站点中是相同的
目标框架是 4.0

ApplicationAuthenticate_request 如下：

```
HttpCookie AuthCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
FormsAuthenticationTicket ticket = null;
if (AuthCookie != null)
{
    try
    {
        ticket = FormsAuthentication.Decrypt(AuthCookie.Value);
        if (ticket != null && ticket.Name != null)
            Response.Write(ticket.Name);
    }
    catch (Exception ex11)
    {
        string sErr = ex11.Message + ex11.StackTrace;
    }
} 
```

登录代码如下

```
authenticationTicket = new FormsAuthenticationTicket(UserId, mPersistant, 30);
//FormsAuthenticationTicket authenticationTicketV1 = new FormsAuthenticationTicket(1, userGuid,DateTime.Now, DateTime.Now.AddMinutes(30), lPersistant, "User");
string authEncrypt = FormsAuthentication.Encrypt(authenticationTicket);
FormsAuthenticationTicket authTickChk = FormsAuthentication.Decrypt(authEncrypt);
bool bChk = authTickChk.Name.Equals(authenticationTicket.Name);
// Create form identity from FormsAuthenticationTicket.
id = new FormsIdentity(authenticationTicket);
// Set the Context User
HttpContext.Current.User = this; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:09:58.650

machine.config 是指 web.config 吗？如果您的 web.config 文件不同，这可能是问题所在

```
<authentication mode="Forms">
  <forms loginUrl="member_login.aspx"
  cookieless="UseCookies"
  domain="contoso.com" />
</authentication> 
```

您的浏览器只会将 FormsAuth cookie 提交到 web.config 文件中指定的域，也许您已将此设置为每个环境中的不同域？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T17:19:20.273

听起来表单身份验证 cookie 没有被发送到不同的站点，这是预期的行为。要意识到的是，表单身份验证只是一个带有加密值的 cookie。表单身份验证票证仍然遵守 cookie 的所有规则，其中包括一个站点 (live.com) 设置的 cookie 永远不会发送到另一个站点 (local.com) 的规则。

另外，我建议您使用`FormsAuthentication.SetAuthCookie()`登录您的用户。登录代码似乎没有设置 cookie。

诸如 Fiddler 之类的工具可能会帮助您解决问题。当你登录时，响应应该包含一个看起来像这样的标题`Set-Cookie: .ASPXAUTH=FC0C57A...; path=/; HttpOnly`

每个后续请求都将发送一个看起来像的标头`Cookie: ASP.NET_SessionId=zcsmunozu0iqshwcvb11qu1m; .ASPXAUTH=FC0C57A...`

但是，如果域与设置 cookie 的站点相同，您的浏览器只会发送 .ASPXAUTH cookie。

# jquery - 自定义 CSS 属性或 HTML 属性？

> ID：10040771
> 
> 赞同：1
> 
> 时间：2012-04-06T08:00:52.473
> 
> 标签：jquery, html, css

我正在尝试视差滚动，我想做类似的事情：

```
$('.page').each(function() {
    $(this).css("background-position", 
        "center " + ((window.pageYOffset - $(this).offset().top) /
                     $(this).css("speed")) + "px");
}); 
```

其中 speed 是分配给特定项目的属性，用于控制项目在滚动期间的移动速度。所以我会有类似的东西：

```
#item { speed: 4; } 
```

和

```
<div name="item" class="page"></div> 
```

我知道这可能是不可能的`CSS`。HTML5 支持自定义属性，但我宁愿在头部的某处声明这些内容以及有关元素的其他信息。
关于如何做到这一点的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:05:25.623

你不能用 CSS 做到这一点。但是您可以使用 HTML5 自定义属性，如果您想在标题中声明所有内容，正如您在问题中所说，您可以使用 jQuery 自己的方法将数据绑定到元素：

```
$(document).ready( function(){
    $.data(selector,'speed',5);
    alert($.data(selector,'speed')); //this will alert 5 now
}); 
```

文档在这里：[http ://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

这个也应该工作：[http](http://api.jquery.com/data/) ://api.jquery.com/data/ - 代码在这里看起来有点不同：

```
$(document).ready( function(){
    $(selector).data('speed',5);
    alert($(selector).data('speed')); //this will alert 5 now
}); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:04:40.437

`data-`具有自定义属性的 HTML5 ：

```
<div name="item" class="page" data-speed="4"></div> 
```

[`data()`](http://api.jquery.com/data/)在循环中使用 jQuery 的方法：

```
parseInt($(this).data('speed'), 10); 
```

# java - Gradle 删除任务未按预期工作

> ID：10040772
> 
> 赞同：1
> 
> 时间：2012-04-06T08:01:04.797
> 
> 标签：java, gradle

我正在尝试删除在我的项目中创建的临时文件。我使用了以下构建文件

```
apply plugin: 'java'
apply from: 'https://github.com/valkolovos/gradle_cobertura/raw/master/repo/gradle_cobertura/gradle_cobertura/1.0/coberturainit.gradle'

sourceCompatibility = 1.6

dependencies {
    testCompile group: 'junit', name: 'junit', version: "4.+" 
}

repositories {
    mavenCentral()
}

task deleteStuff(type: Delete) {
    delete 'testfile.txt'
}

defaultTasks 'cobertura' 
```

但是 testfile.txt 没有被删除。我缺少什么吗？

# c# - 我需要在每个窗口中配置 Log4Net，还是有办法在基类中配置一次？

> ID：10040779
> 
> 赞同：2
> 
> 时间：2012-04-06T08:02:09.637
> 
> 标签：c#, wpf, log4net

我见过的任何例子都是这样的：

```
ILog log = log4net.LogManager.GetLogger(typeof(MainWindow)); 
```

我不喜欢在整个地方复制/粘贴代码做基本相同的事情的想法。

理想情况下，我可以在某个基类中配置记录器并配置 Log4Net，如下所示：

```
public ILog log = log4net.LogManager.GetLogger(typeof(MyWindowBase)); 
```

并让所有窗口都继承自它。我可以看到的问题是 MainWindow 被定义为

```
public partial class MainWindow : Window {} 
```

所以它已经继承自`Window`.

我想过做以下事情：

```
public partial class MyBase : Window
{
    // configure Log4Net here
}

public partial class MainWindow : MyBase
{
    // use Log4Net here
} 
```

但这不起作用。我收到以下错误：

> 'WpfApplication3.MainWindow' 的部分声明不得指定不同的基类

那么我想知道是否有一种不需要在每个窗口中配置 Log4Net 的可靠方法呢？

**编辑**以澄清问题不在于创建基类，问题是我想知道配置 Log4Net 的最佳方法而无需添加它

```
ILog log = log4net.LogManager.GetLogger(typeof(/* Window Type */)); 
```

在每个班级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:22:11.390

如下配置 log4net 记录器是很常见的：

```
class MyClass
{
    private static ILog log = log4net.LogManager.GetLogger(typeof(MyClass)); 
    ...
} 
```

这将创建一个与类同名的记录器，如果您希望能够根据记录器名称有选择地启用日志记录，这很方便。

请注意静态字段的使用，以便实例化记录器的开销只发生一次，而不是每次实例化类时。

当然，能够选择性地启用日志记录的灵活性是有代价的：您必须在每个执行日志记录的类中都有一个类似的声明。

除非您愿意放弃选择性启用日志记录的能力，否则我看不到任何解决方法，在这种情况下，您可以通过单个全局记录器路由所有日志记录请求，例如：

```
public static class LoggingHelper
{
    public static ILog GlobalLogger
    {
        get { return _globalLogger; }
    }
    private static ILog _globalLogger = log4net.LogManager.GetLogger("Global"); 
} 
```

您还可以组合这些方法：例如，您可以在记录异常时使用全局记录器（您不太可能希望选择性地禁用异常记录），并在某些类中使用特定于类的记录器进行调试记录（其中您可能希望有选择地启用/禁用）。

回应评论：

> 有选择地启用日志记录有什么好处？

恕我直言，主要的好处是当您需要[仪器](http://en.wikipedia.org/wiki/Instrumentation_%28computer_programming%29)时。您可以通过在您想要检测的代码库的各个部分自由地散布调试级别的日志记录语句来做到这一点。因为这样的日志记录往往很冗长，所以能够有选择地只启用您想要检查的那些位是很好的，例如在故障排除时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:07:54.557

我使用静态类

```
public static class lgr
{
#region "log4Net"
private static bool _isInfoEnabled = false;
private static bool _isWarnEnabled = false;
private static bool _isDebugEnabled = false;
private static ILog _logger;
public static ILog Logger {
    get {
        if ((_logger == null)) {
            _logger = LogManager.GetLogger("root");
            _isInfoEnabled = _logger.IsInfoEnabled;
            _isWarnEnabled = _logger.IsWarnEnabled;
            _isDebugEnabled = _logger.IsDebugEnabled;
        }
        return _logger;
    }
    set {
        if ((value == null)) {
            _logger = LogManager.GetLogger(Reflection.MethodBase.GetCurrentMethod.DeclaringType);
        } else {
            _logger = value;
        }
    }
}

public static string LoggerName {
    get { return Logger.Logger.Name; }
    set {
        if (value == null || value == string.Empty) {
            Logger = null;
        } else {
            Logger = LogManager.GetLogger(value);
        }
    }
}

public enum LogType
{
    Debug,
    Info,
    Warn,
    Error_,
    Fatal
}
public static void WriteLogError(string _message, Exception ex)
{
    if (Logger.IsErrorEnabled) {
        Logger.Error(_message, ex);
    }
}

public static void WriteLogInfo(string _message)
{
    if (_isInfoEnabled) {
        Logger.Info(_message);
    }
}

public static void WriteLogWarn(string _message)
{
    if (_isWarnEnabled) {
        Logger.Warn(_message);
    }
}
#endregion 
```

}

然后我在应用程序的任何地方都使用它

```
if (Logger.IsInfoEnabled()) {
    Logger.Info("Processing...");
} 
```

并且

```
WriteLogInfo(string.Format("Close time:{0}", _closeDateTime)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T11:52:39.530

不确定它是否完全解决了您的问题，但您可以使用：

```
ILog log = log4net.LogManager.GetLogger(
               System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

那么至少这样代码在每个实例中都是相同的，而不得不使用：

```
ILog log = log4net.LogManager.GetLogger(typeof(/* Window Type */)); 
```

# javascript - 从不同的 .JS 文件引用函数中的数组

> ID：10040781
> 
> 赞同：0
> 
> 时间：2012-04-06T08:02:19.180
> 
> 标签：javascript, arrays

所以我发现自己处于尴尬的境地，我在 main.js 中有一个函数，它需要一个填充在 second.js 中的数组......

简而言之，main.js 中的函数旨在可重用：

```
function chug()
{
    p1.innerHTML = st_a[0];
    p2.innerHTML = st_a[1];
    ...
} 
```

现在，'st_a' 应该被解析为： st_ + ，在这种情况下，该变量是 'a'。作为 second.js 文件的想法将有多个数组（st_a、st_b 等），并且根据需要，相关数组将用于填充段落元素（p1、p2 等）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:05:37.057

如果 st_[x] 是一个全局变量，您可以使用`window['st_a']`它来引用它。所以，你应该能够使用类似的东西：

```
function chug()
{
    var arrid = 'st_'+'a';
    p1.innerHTML = window[arrid][0];
    p2.innerHTML = window[arrid][1];
    //...
} 
```

或使用函数来检索数组：

```
function getArr(id){
  return window['st_'+id];
} 
```

`second.js`或者，您可以使用带有“get”方法的容器对象，例如：

```
var myArrays = {
  st_a: [],
  st_b: [],
  st_c: [],
  get: function(id){
    return this['st_'+id];
  }
  /* etc */
} 
```

现在`chug`可能看起来像：

```
function chug()
{
    var arr = myArray.get('a');
    p1.innerHTML = arr[0];
    p2.innerHTML = arr[1];
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:36:52.490

使用全局变量是邪恶的。因为您可以覆盖另一个已经设置的内容，并且 javascript 不会告诉您您做了一些愚蠢的事情。

您有多种选择可以避免使用它们：

*   使用单个对象来包含所有功能。此示例应向您展示如何执行此操作：

    var MYAPP = {} MYAPP.chug = function() { // 你的代码 } // 然后，在这个之后加载的任何其他文件中，你可以这样做： MYAPP.anotherFunction = function() {} // 甚至这个: MYAPP.chug()

这样，您只用一个变量污染了全局范围。

*   另一种方法是使用诸如[Require.js 之](http://requirejs.org/)类的库。

然后，为了解决您的问题，您可以根据您选择的解决方案执行以下操作：

```
// Let me borrow this code from kooiinc
MYAPP.myArrays = {
   st_a: [],
   st_b: [],
   st_c: [],
   get: function(id){
       return this['st_'+id];
   }
   /* etc */
}
MYAPP.chug = function() {
    var arr = this.myArrays.get('a') // 'this' refers to the MYAPP object in this case
    p1.innerHTML = arr[0]
    // ...
} 
```

# python - 如何分析 Google App Engine python27 运行时（不是 python）

> ID：10040783
> 
> 赞同：7
> 
> 时间：2012-04-06T08:02:24.977
> 
> 标签：python, google-app-engine, profile, python-2.7

如何在**Google App Engine**运行时**python27下****分析**python 代码？

 ****在运行时**python**它是由这个代码完成的 - [python 运行时](https://developers.google.com/appengine/kb/commontasks#profiling)：

```
from google.appengine.ext import webapp

class PageHandler(webapp.RequestHandler):
  def get(self):
    self.response.headers['Content-Type'] = 'text/plain'
    self.response.out.write('Hello, WebApp World!')

def real_main():
  application = webapp.WSGIApplication([('/', PageHandler)], debug=True)
  run_wsgi_app(application)

def profile_main():
  # This is the main function for profiling
  # We've renamed our original main() above to real_main()
  import cProfile, pstats, StringIO
  prof = cProfile.Profile()
  prof = prof.runctx('real_main()', globals(), locals())
  stream = StringIO.StringIO()
  stats = pstats.Stats(prof, stream=stream)
  stats.sort_stats('cumulative')
  logging.info("Profile data:\n%s", stream.getvalue())

if __name__ == "__main__":
    profile_main() 
```

在运行时**python27**必须以不同的方式完成，因为没有主要调用 - 如何做同样的事情 - 我想切换到 python27 但不是没有分析。如何在**python27** - [python27 运行时](https://developers.google.com/appengine/docs/python/python27/using27)附加探查器？

```
import webapp2

class PageHandler(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('Hello, WebApp World!')

app = webapp2.WSGIApplication([('/', PageHandler)]) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T12:59:22.087

您可以通过在 appengine_config.py 中插入使用 WSGI 中间件来分析 WSGI 应用程序：

```
import cProfile
import cStringIO
import logging
import pstats

def webapp_add_wsgi_middleware(app):

  def profiling_wrapper(environ, start_response):
    profile = cProfile.Profile()
    response = profile.runcall(app, environ, start_response)
    stream = cStringIO.StringIO()
    stats = pstats.Stats(profile, stream=stream)
    stats.sort_stats('cumulative').print_stats()
    logging.info('Profile data:\n%s', stream.getvalue())
    return response

  return profiling_wrapper 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T19:29:09.050

您也可以直接使用 App Engine Mini Profiler，它会为您处理这个咒语，并在每个被分析的页面上很好地显示结果。

它提供 API 调用性能信息（通过 Appstats）和所有函数调用的标准分析数据（通过 cProfiler）

[https://github.com/kamens/gae_mini_profiler](https://github.com/kamens/gae_mini_profiler)****

# mysql - MySQL 可重复读取和丢失更新/幻读

> ID：10040785
> 
> 赞同：9
> 
> 时间：2012-04-06T08:02:27.497
> 
> 标签：mysql, transactions, isolation-level

我用 MySQL Server 5.5 试过这个：

1）确保事务隔离级别是repeatable_read

2）启动shell-1，在其中启动一个事务，然后通过select读取一个值

3）启动shell-2，在其中启动一个事务，然后通过select读取相同的值

4) 在 shell-1 中，将值更新为 value + 1 并提交

5) 在 shell-2 中，将值更新为 value + 1 并提交

该值丢失了一次更新，仅增加了 1。

现在，据我了解，RR 使用共享读锁和排他写锁，这意味着在上面的#4 和#5 中，事务应该是死锁的，但这并没有发生。

所以要么我对 RR 的理解有问题，要么 MySQL 以不同的方式实现 RR。那是什么？

编辑：通过类似的实验，还确认了一个 RR 事务 (t1) 看不到由另一个 RR 事务 (t2) 插入到同一个表中的行，如果它在该表上执行另一个选择，即使在 t2 提交之后和 t1 提交之前. （这里是这个实验的链接：[http](http://www.databasejournal.com/features/mysql/article.php/3393161/MySQL-Transactions-Part-II---Transaction-Isolation-Levels.htm) ://www.databasejournal.com/features/mysql/article.php/3393161/MySQL-Transactions-Part-II---Transaction-Isolation-Levels.htm ）

这是否意味着 MySQL 的 RR 也负责幻读？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T09:11:46.523

MySQL 确实不符合可重复读取。您可以通过使用可序列化的隔离级别或在您的选择之后放置 FOR UPDATE 来强制它执行（请看下面的示例）。然后将实现所需的行为。关于幻读，MySQL实际上比必要的更严格......

```
SELECT value FROM table WHERE id = 7 FOR UPDATE; 
```

# symfony1 - Symfony 1.4 中的嵌入式表单：为什么我必须使用包装器？

> ID：10040786
> 
> 赞同：0
> 
> 时间：2012-04-06T08:02:33.170
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我正在构建一个表单，允许我使用 Symfony 1.4 同时编辑给定表的所有行。为此，我使用了嵌入式表单。我的解决方案正在运行，但我想知道为什么我必须为我的嵌入式表单使用包装器？

这是我的代码：

```
class FooCollectionForm extends BaseForm
{
  public function configure()
  {    
    $wrapperForm = new sfForm();
    foreach ($this->getOption('bar') as $bar)
    {
      $form = new myForm();
      $form->widgetSchema->setNameFormat('foo_collection['.$bar['label'] . '][%s]');
      $wrapperForm->embedForm($bar['label'], $form);
    }

    $this->embedForm('foo_collection', $wrapperForm);
  }
} 
```

我发现 setNameFormat 的参数很难看，但它似乎是它的工作方式。你同意这一点还是有更好的解决方案？

我正在手动构建表单的布局，这是我必须用来显示所有字段的循环：

```
<?php foreach ($form->getEmbeddedForm('foo_collection')->getEmbeddedForm() as $subForm): ?>
  <?php include_partial('form', array('form' => $subForm)) ?>
<?php endforeach; ?> 
```

我再次觉得这很丑陋，但我仍然不明白为什么`$form->getEmbeddedForm()`不使用包装表单就不能做到这一点。

我尝试在没有包装器的情况下使用这样的循环来执行相同的表单：

```
<?php foreach ($form->getEmbeddedForms() as $subForm): ?> 
```

除了我的输入具有相同的名称和 ID 之外，它几乎可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:08:26.647

> 我发现 setNameFormat 的参数很难看，但它似乎是它的工作方式。你同意这一点还是有更好的解决方案？

是的，Symfony 和嵌入式表单有点令人困惑。

但是是的 - 有一个更好的解决方案，您应该让表单名称格式达到框架。

这是fabien 和 ryan 关于 embedForm()/embedRelation() 函数、嵌入式表单背后的逻辑以及渲染嵌入式表单的[优秀文档。](https://symfony.com/legacy/doc/more-with-symfony/1_4/en/06-Advanced-Forms)

# xml - 当没有一个孩子符合某些标准时，是否可以在 XPath 中找到父母

> ID：10040787
> 
> 赞同：0
> 
> 时间：2012-04-06T08:02:43.797
> 
> 标签：xml, xpath

我想在没有孩子满足某些条件时找到父母，例如找到那些在其子级别中没有**项目的****部分。**XPath 可以吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:39:46.560

Well`//section[not(item)]`找到所有`section`没有任何子`item`元素的元素或`//section[not(descendant::item)]`找到所有`section`没有任何后代元素的`item`元素。那是你要找的吗？如果没有，请考虑显示一个 XML 输入示例，并更详细地说明您要查找的元素。**

# jasper-reports - JasperReports：如何根据参数构造标题标题

> ID：10040796
> 
> 赞同：1
> 
> 时间：2012-04-06T08:03:48.930
> 
> 标签：jasper-reports

如何根据参数构造标题标题？

例如，我有一份按日期、每周、月份和年份的报告。我有一个参数，但我不知道如何在标题中显示它。

我想要的是：

```
If I put parameter $P{date1} and $P{date2} then it will show 'Date range from $P{date1} and $P{date2}' for header 1

else if parameter $P{w}$P{month}$P{year} then 'For weekly $P{w}$P{month}$P{year}' for header 2

else if parameter $P{month}$P{year} then 'For monthly $P{month}$P{year}' for header 3

else if parameter $P{q}$P{year} then 'For quarter $P{q}$P{year}' for header 4

else if parameter $P{year} then 'For yearly $P{year}' for header 5 
```

更新：-运行报告时出现新问题，我的输出无法正确显示。这是我的代码：-

```
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Company Profile by Date Registered" pageWidth="595" pageHeight="842" whenNoDataType="NoDataSection" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isFloatColumnFooter="true">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="daterangefrom" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="daterangeto" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="monthy" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="yrs" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="quarter" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="weeks" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[select a.entered,
a.modified,
a.org_id,
a.name,
a.organization_type,
c.description as companygroup,lead,
a.industry_temp_code,
b.description,
a.equity_structure,a.operation_date from organization a
left join lookup_industry_group b on a.industry_temp_code = b.code
left join lookup_company_group c on c.code = a.company_group
left join ticket d on d.org_id = a.org_id
where
((d.entered BETWEEN $P{daterangefrom} AND $P{daterangeto}) or ($P{daterangefrom} =' ' AND $P{daterangeto} =' '))
AND
((datename(month,d.entered) = $P{monthy}) or ($P{monthy} = ' '))
AND
((datename(year,d.entered) = $P{yrs}) or ($P{yrs} = ' '))
AND
((datepart(qq, d.entered) = $P{quarter}) or ($P{quarter} = ' '))
AND
((DATEPART(day, d.entered - 1) / 7 + 1 = $P{weeks}) or  ($P{weeks} = ' '))]]>
    </queryString>
    <field name="entered" class="java.sql.Timestamp"/>
    <field name="modified" class="java.sql.Timestamp"/>
    <field name="org_id" class="java.lang.Integer"/>
    <field name="name" class="java.lang.String"/>
    <field name="organization_type" class="java.lang.String"/>
    <field name="companygroup" class="java.lang.String"/>
    <field name="lead" class="java.lang.String"/>
    <field name="industry_temp_code" class="java.lang.Integer"/>
    <field name="description" class="java.lang.String"/>
    <field name="equity_structure" class="java.lang.String"/>
    <field name="operation_date" class="java.sql.Timestamp"/>
    <title>
        <band height="79" splitType="Stretch">
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement x="18" y="14" width="537" height="41" isRemoveLineWhenBlank="true"/>
                <textElement/>
                <textFieldExpression><![CDATA[(($P{daterangefrom} != null) && ($P{daterangeto} != null)) ?  "Date range from " + $P{daterangefrom} + " and " + $P{daterangeto}
: (($P{weeks} != null) && ($P{monthy} != null) && ($P{yrs} != null)) ? "For weekly " +$P{weeks} + $P{monthy} + $P{yrs}
: (($P{monthy} != null) && ($P{yrs} != null)) ? "For monthly " + $P{monthy} + $P{yrs}
: (($P{quarter} != null) &&  ($P{yrs} != null)) ? "For quarter " + $P{quarter} + $P{yrs}
: (($P{yrs} != null)) ? "For yearly " + $P{yrs} : null]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:58:33.413

您可以将*`textField`*元素放到`Title`乐队中并设置*`textFieldExpression`*属性。

您应该在表达式中使用条件运算符***`? :`***。

示例（jrxml 文件的片段）：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <parameter name="date1" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="date2" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="w" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="q" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="month" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="year" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="79" splitType="Stretch">
            <textField>
                <reportElement x="18" y="14" width="537" height="41"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{date1} != null && $P{date2} != null ?  "Date range from " + $P{date1} + " and " + $P{date2}
: $P{w} != null && $P{month} != null && $P{year} ? "For weekly " + $P{w} + $P{month} + $P{year}
: $P{month} != null && $P{year} != null ? "For monthly " + $P{month} + $P{year}
: $P{q} != null &&  $P{year} != null ? "For quarter " + $P{q} + $P{year}
: $P{year} != null ? "For yearly " + $P{year} : null]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

# xml - 用于将 CSV 文件转换为 XML 文件的 Xquery

> ID：10040798
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:03:59.647
> 
> 标签：xml, rest, csv, xquery

我正在研究 RESTful XRX，因为我必须在 eXist 数据库上创建一个安静的 crud 操作。我在创建 Xquery 时遇到了一些问题，它将给定的 csv 文件转换为 XML 格式。如何创建 Xquery 文件以将给定的 csv 文件转换为 XML 文件格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:58:23.553

我想你在存在开放邮件列表上问了同样的问题，你已经在那里收到了答案。但是为了其他人的利益，让我包含一个指向 XQuery Wikibook 文章的链接，该文章改编自该答案：

[http://en.wikibooks.org/wiki/XQuery/Parsing_CSV](http://en.wikibooks.org/wiki/XQuery/Parsing_CSV)

本文中的方法显然非常特定于您的数据，但它可以轻松扩展以允许更多不同类型的 CSV 数据。

# python - Python C-API：如何在不转换为 UTF-8 的情况下将 UNICODE UTF-16 null 终止的 C 字符串传递给我的 python 应用程序？

> ID：10040800
> 
> 赞同：3
> 
> 时间：2012-04-06T08:04:12.863
> 
> 标签：python, unicode, utf-8, utf-16, python-c-api

蟒蛇爱好者，

我正在尝试用 C 编写一个 Python 扩展，它将大量以空字符结尾的 UNICODE UTF-16 编码的 C 字符串传递给我的 Python 应用程序。我的 C 库中的 UNICODE 字符串保证始终为 16 位。由于 wchar_t 的大小可能会有所不同，因此我没有在 LINUX 上的 C 库中使用 wchar_t。

我发现很多函数（PyUnicode_AsUTF8String、PyString_FromStringAndSize、PyString_FromString 等）完全符合我的要求，但所有这些函数都是为 8 位字符/字符串表示而设计的。

Python 文档 (http://docs.python.org/howto/unicode.html) 说：

> “在底层，Python 将 Unicode 字符串表示为 16 位或 32 位整数，具体取决于 Python 解释器的编译方式。”

我真的很想避免将我所有的 UTF-16 C 字符串转换为 UTF-8 C 字符串仅用于 Python 接口的性能损失，尤其是在 Windows 上，如果 Python 解释器也使用 16 位“引擎盖下”。

任何如何应对这一挑战的想法都受到高度赞赏。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:11:09.100

您无法避免复制数据（除非您突破 Python C API），但您可以直接从 UTF-16 数据创建 Python unicode 对象，使用`PyUnicode_DecodeUTF16`; 请参阅[http://docs.python.org/c-api/unicode.html#utf-16-codecs](http://docs.python.org/c-api/unicode.html#utf-16-codecs)。

# javascript - Facebook - JavaScript SDK - 如何自动请求许可

> ID：10040804
> 
> 赞同：0
> 
> 时间：2012-04-06T08:04:23.573
> 
> 标签：javascript, facebook

我正在使用 HTML 5 开发一些东西并在其中插入 Facebook JavaScript SDK。

我开发了一个 Facebook 应用程序，我想：

1）如果用户没有登录facebook，它会要求登录，但如果用户登录并打开应用程序，它应该自动请求权限，而不是用户需要`FB.LOGIN()`再次点击链接。

有一个 Stack Overflow 问题，*[如何让我的 Facebook 应用程序在安装后使用 自动请求所需的权限](https://stackoverflow.com/questions/3955615)*，`window.top.location = "<?php echo $loginUrl; ?>";`但是如何在 JavaScript 中找到此身份验证 URL？

JavaScript 代码：

```
<div id="fb-root"></div>
<script>
    // Load the SDK asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));

    // Init the SDK upon load
    window.fbAsyncInit = function() {
        FB.init({
            appId      : 'appid', // App ID
            channelUrl : '//www.domain.com/channel.html', // Channel file
            status     : true, // Check login status
            cookie     : true, // Enable cookies to allow the server to access the session
            xfbml      : true  // Parse XFBML
        });

        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                document.getElementById('auth-loggedout').style.display = 'none';
                document.getElementById('auth-loggedinnotauthenticate').style.display = 'none';
                document.getElementById('loginauthenicated').style.display = 'block';
            }
            else
                if (response.status === 'not_authorized') {
                    window.top.location = "https://www.facebook.com/dialog/oauth?client_id=id&redirect_uri=http://apps.facebook.com/appp/";
                }
                else {
                    window.top.location = "https://www.facebook.com/login.php?api_key=id&skip_api_login=1&display=page&cancel_url=http://apps.facebook.com/appp/";
                }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:56:01.693

用这个：

```
FB.getLoginStatus(function(response) {
    if (response.authResponse) {
        fbUserId = response.authResponse.userID;
        token = response.authResponse.accessToken;
    }
    else {
        FB.login(function(response) {
            if (response.authResponse) {
                fbUserId = response.authResponse.userID;
                token = response.authResponse.accessToken;
            }
            else {
                 console.log('User cancelled login or did not fully authorize.');
            }
        }, {scope: 'user_location'});
    }
},true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:28:55.530

我认为对您来说最好的选择是使用经过[身份验证的推荐](http://developers.facebook.com/docs/opengraph/authentication/#referrals)功能，这意味着 Facebook 会为您处理身份验证以及您需要的权限。

只有在用户完成身份验证过程后，用户才会被传递给您的应用程序。

如果由于任何原因这不适合您，请查看[身份验证](http://developers.facebook.com/docs/authentication/)文档，尤其是[服务器端流程](http://developers.facebook.com/docs/authentication/server-side/)，因为这似乎就是您所写的内容。

从您的 JavaScript 代码来看，您在初始化 Facebook SDK 时似乎没有使用频道 URL 属性。正如它在[JavaScript SDK 文档](http://developers.facebook.com/docs/reference/javascript/)（*通道文件*部分）中所述：

> 频道文件解决了某些浏览器中跨域通信的一些问题

进而：

> channelUrl 参数是可选的，但建议使用。

我不能保证它会修复它，但它可能会。

它应该是这样的：

```
// Init the SDK upon load
window.fbAsyncInit = function() {
    FB.init({
        appId      : 'appid', // App ID
        channelUrl : '//www.domain.com/channel.html', // Channel File
        status     : true, // Check login status
        cookie     : true, // Enable cookies to allow the server to access the  session
        xfbml      : true  // Parse XFBML
    });

    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;

            document.getElementById('auth-loggedout').style.display = 'none';
            document.getElementById('auth-loggedinnotauthenticate').style.display = 'none';
            document.getElementById('loginauthenicated').style.display = 'block';
        }
        else
            if (response.status === 'not_authorized') {
                window.top.location = "https://www.facebook.com/dialog/oauth?client_id=id&redirect_uri=http://apps.facebook.com/appp/";
            }
            else {
                window.top.location = "https://www.facebook.com/login.php?api_key=id&skip_api_login=1&display=page&cancel_url=http://apps.facebook.com/appp/";
            }
});

// Load the SDK asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

如您所见，首先您需要定义*window.fbAsyncInit*回调方法，然后才加载 SDK。

# c - 为什么 C 编译器不能进行类型推断？

> ID：10040808
> 
> 赞同：3
> 
> 时间：2012-04-06T08:05:05.683
> 
> 标签：c, types, inference

在 的情况下，由于未附加“ L ” `long double x = 8.99999999999999999`，因此该值被存储。`double`当我已经将变量声明`x`为`long double`浮点类型时，为什么 C 编译器不能进行类型推断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:50:26.040

编译器不进行类型推断，因为[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)标准明确规定*不*应该这样做。

关于浮动常量的第 6.4.4.2 节说：

> 无后缀的浮点常量具有 double 类型。如果以字母 f 或 F 为后缀，则为 float 类型。如果以字母 l 或 L 为后缀，则它的类型为 long double。

* * *

为什么*标准*会这样说？也许是因为它简化了编译器，而不是必须这样做（老实说，我不确定）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:01:20.207

在 1970 年代初期，当 C 语言首次开发时，运行编译器的计算机速度很慢，内存很少。因此，有必要设计语言，使编译器简单，编译速度快。一个简单的编译器需要程序员告诉它一切，因为每次编译器需要推导时，它都会使用 CPU 和内存。

另一个，我认为同样重要的原因是，开发和使用 C 的人最初是用它编写操作系统，他们想要一种不试图变得聪明的语言。编写操作系统非常棘手，无需猜测编译器可能会或可能不会做什么：他们需要对发生的事情进行非常精确的控制，从这个意义上说，更简单的语言对操作系统编写者来说可能是一个很大的好处。

由于这些原因，C 最终没有许多高级语言在后来的几十年中设计并针对应用程序编程现在拥有的许多特性。它没有面向对象，没有类型推断，没有垃圾收集，没有异常，也不支持线程。

将来 C 可能会被更改为具有这样的东西（事实上，最新的 C 标准现在有本地线程，但我相信它们是可选的），但总的来说，如果你想要这些东西，你想要一个不同的语言。确实有成千上万种有趣的语言可供选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T18:25:01.617

C 编译器不进行类型推断，因为 C*不是类型安全*的。您可以轻松地将事物随意转换为 void、void 指针，然后再返回。这并不违反规则。这至少意味着，任何类型的 C 类型推断都只是近似的，并且充其量你会让编译器为你提供关于你的类型出了什么问题的线索。

至于为什么 C 不进行类型推断：C 中的类型*不是*为了强制逻辑关系，或者在语言中编码真理。在某种程度上，具有健全类型系统的语言（Haskell、OCaml、SML、Coq 等）旨在让类型*告诉*你一些事情：你可以从类型中写下一个关于你的程序的定理。（请参阅 Philip Wadler 的“Theorem's for Free！”这个有趣的例子！）

那么为什么*C*使用类型呢？原因纯粹是编译器需要知道——在某种程度上——如何组织你的数据，因为它存储在内存中。C 中的类型不是逻辑一致性，而是告诉你事情是如何布局的，我应该把这个 int 放在结构中的什么位置，等等......

相反，C 有许多习惯用法来*模拟*类型安全语言中的更多标准特性。例如，空指针通常用于表示参数多态性。（例如，你可以有一个列表，它可以包含指向任何数据类型的指针。）事实上，它做了更多的事情，在 C 中你可以对指向不同数据类型的列表进行编码。虽然在传统的函数式语言中，列表的归纳类型要求所有元素都属于同一类型，但您可以在 C 中轻松地对交叉类型和行进行编码（例如，在 C 中，通过使用标识符标记列表元素来完成）。

C有*类型*和*内存*安全的方言，以[Cyclone](http://en.wikipedia.org/wiki/Cyclone_%28programming_language%29)为例，在某些地方，多态*确实*取代了诸如 void 指针之类的东西，同时仍然为您提供了 C 语言的许多细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T08:14:11.127

> 在 long double x = 3.0 的情况下。值 3.0 存储为双精度值。

不对！这会将 3.0 存储为`long double`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T09:27:15.770

正如其他人所说的标准状态`that unless suffixed, a floating point constant is a double`。现在，让我们从计算复杂性来看其背后的基本原理。标准还指出，`long double>=double`现在考虑一个系统 where`sizeof(double)=8`和`sizeof(long double)=16`。现在在没有后缀的特定示例中，编译器只需计算一个`64-bit`精度浮点数并将剩余的 8 个字节归零。但是，如果要按照您的建议进行类型推断，则现在必须进行计算以产生`128-bit`浮点数。

[将浮点数转换为二进制](http://sandbox.mc.edu/~bennet/cs110/flt/dtof.html)表示并非易事，因此编译器会尽可能地小气。特别是在这个例子中，不需要升级`8.99999999999999999`到，`long double`因为它可以`double`以合理的精度压缩成一个。

# javascript - 在 Javascript 中跨对象组共享属性

> ID：10040815
> 
> 赞同：0
> 
> 时间：2012-04-06T08:06:27.897
> 
> 标签：javascript, inheritance, behavior

在javascript中，如果我需要每个对象都有一个属性的单独值，我可以在构造函数中设置它，如下所示：

```
function A(x) {
    this.a = x;
} 
```

如果我想在对象之间共享某个属性，我可以在构造函数的原型中设置它。

```
function B() {}
B.prototype.b = 'B0'; 
```

但是在中间的情况下该怎么办？基本上，我有一个现有代码，其中所有构造的对象都从原型继承一​​个属性，但现在我需要将它们分成几个组，以便一个组的所有成员共享一个属性。

有没有办法以某种方式专门化构造函数 B ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:07:45.610

`B.prototype.b`不会像您想象的那样创建静态属性。比这更复杂一点，附加到原型的属性与其他实例共享它们的值，直到它们覆盖该值，这意味着：

```
var Foo = function(){
};
Foo.prototype.bar = 'bar';

var f1 = new Foo();
console.log( f1.bar ); //outputs 'bar'
var f2 = new Foo();
console.log( f2.bar ); //outputs 'bar'

f2.bar = 'notbar';
console.log( f2.bar ); //outputs 'notbar'
console.log( f1.bar ); //outputs 'bar' 
```

拥有“真实”静态属性的唯一方法是将它们附加到构造函数本身：

```
Foo.bar2 = 'bar2'; 
```

的实例`Foo`必须使用 访问该值`Foo.bar2`。

因此，您的问题的答案是为每个组创建“子类”（从基本构造函数继承其原型的构造函数）并为每个子类附加一个属性，如下所示：

```
var Base = function(){
};
Base.prototype.getSomething = function(){
    return this.constructor.something;
};
Base.prototype.setSomething = function( value ){
    this.constructor.something = value;
}
var Group1 = function(){
};
Group1.prototype = new Base(); //classical inheritance
Group1.prototype.constructor = Group1;
Group1.something = 'something';
var Group2 = function(){
};
Group2.prototype = new Base(); //classical inheritance
Group2.prototype.constructor = Group2;
Group2.something = 'something else';

var g1a = new Group1();
var g1b = new Group1();
var g2a = new Group2();
var g2b = new Group2();

g1a.setSomething( 'whatever' );

console.log( g1a.getSomething() ); //outputs 'whatever'
console.log( g1b.getSomething() ); //outputs 'whatever'
console.log( g2a.getSomething() ); //outputs 'something else'
console.log( g2b.getSomething() ); //outputs 'something else' 
```

警告：`Group1.prototype = new Base();`实际上是不好的做法，就在几天前，我写了一篇关于 3 种继承类型的博客文章，解释了原因：

[http://creynders.wordpress.com/2012/04/01/demiurge-3-types-of-javascript-inheritance-2/](http://creynders.wordpress.com/2012/04/01/demiurge-3-types-of-javascript-inheritance-2/)

# c#-4.0 - 表单在 C# 中不刷新

> ID：10040819
> 
> 赞同：2
> 
> 时间：2012-04-06T08:07:01.943
> 
> 标签：c#-4.0

我有一个表单，显示来自 access 数据库中的表的名称，然后单击按钮，我移至 form2 进行一些更改，例如重命名一个字段，单击确定，更改在数据库中进行，然后我返回`form1`，但更改不会反映回来。

要查看更改，我必须重新启动程序。

我尝试了 form.refresh 和 form.invalidate 但没有任何效果。

我在某处读到必须完成线程，但我是 c# 新手，不知道线程。

有人可以建议除线程之外的任何方法来执行此操作。如果线程是唯一的方法，请提出一些好的资源和示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:12:59.030

创建您希望更新的控件的访问器或传递 to 的`Form1`引用`Form2`。如果您访问访问器根目录，您可以尝试`Form1`拥有

```
public dataGridView
{
    get { return this.dataGridView1; }
    set { this.dataGridView1 = value; }
} 
```

然后你可以更新`Form2`使用

```
Form1 accessForm1 = (Form1)this.Parent;
accessForm1.dataGridView.Update(); 
```

注意：也要更新`DataGridView`使用`Form1`它

```
accessForm1.dataGridView.Source = someDataBindingSource; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:08:56.950

上的数据`form1`不会因为您更新了基础数据而改变。

您需要从数据库中重新获取数据并`form1`在从`form2`.

您可以通过向`form2.Closing`事件注册并在事件处理程序中执行重新获取和重新填充来做到这一点。

# c# - 如何每秒更改 texbox 的文本？

> ID：10040828
> 
> 赞同：1
> 
> 时间：2012-04-06T08:08:31.957
> 
> 标签：c#, windows-phone-7

我有一个 texbox，我想在 Windows Phone 7 中每秒更改它的内容。例如，我有一个 int 列表，我想显示它的第一个值。然后 1 秒后显示第二个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:39:25.903

DispatcherTimer 是您正在寻找的：http: [//msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)

创建一个新的 DispatcherTimer 实例，将其设置为每秒滴答一次，并在回调函数中更新文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:39:41.020

看看这里。

[http://www.developer.nokia.com/Community/Wiki/Implement_Timer_control_in_Windows_Phone](http://www.developer.nokia.com/Community/Wiki/Implement_Timer_control_in_Windows_Phone)

从那里获取的示例代码：

```
 DispatcherTimer timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(.1)};
   // Constructor
   public MainPage()
   {
       InitializeComponent();
       this.timer.Tick+=new EventHandler(timer_Tick);
   }
   private void timer_Tick(object sender, EventArgs e)
   {
       output.Text = DateTime.Now.ToLongTimeString();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:47:16.650

```
 public class ViewModel : INotifyPropertyChanged
        {
         DispatcherTimer timer;

         private int _seconds;
         public int Seconds
        {
        get 
        { 
           return _seconds;
        }
        set 
        {
           _seconds= value;
           OnPropertyChanged("Seconds");
        }
        }
// Here implementation of INotifyPropertyChanged interface and ctor

    } 
```

并在您的 XAML 代码中用作 DataContext

```
<TextBlock Text="{Binding Seconds}" /> 
```

现在在您的 ViewModel 中，只需使用带有事件 Tick 的计时器并将 Seconds 设置为您需要显示的新值。

# ruby-on-rails - update_attribute 正在修改 Rails 中的密码

> ID：10040833
> 
> 赞同：0
> 
> 时间：2012-04-06T08:09:01.877
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我有一个用户模型。我正在尝试从 Admin 模型更新“确认”属性。但是在这样做的时候，所有的属性都被重新传递了一遍；并且由于使用了散列，因此再次传递的密码正在更改。我已经按照 Michael Hart 的教程实现了我的模型，并且使用了相同的散列技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:23:44.487

在 Admin 模型中，您可以设置白名单可以访问的属性

```
attr_accessible :username 
```

现在发布时只能调整 User 的 :username 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:03:17.823

而不是使用`update_attribute()`use`update_column(:name, value)`方法，因为`update_attribute`调用正在更新密码的回调方法。

# java - 如何在日志文件中打印堆栈跟踪

> ID：10040834
> 
> 赞同：13
> 
> 时间：2012-04-06T08:09:04.383
> 
> 标签：java, log4j

我在我的 java swing 应用程序 `logger.error("ERROR: " + ex);`中记录错误：ex 是异常

这只是打印我`13:33:58,964 ERROR PlayOffPanel:292 - ERROR: java.lang.NullPointerException`

但我想知道堆栈跟踪。

我的 log4j 属性：

```
log4j.rootLogger=DEBUG,file

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.maxFileSize=100KB
log4j.appender.file.maxBackupIndex=5
log4j.appender.file.File=error.log
log4j.appender.file.threshold=DEBUG
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-06T08:11:22.183

你必须写

```
logger.error("Error description",ex); 
```

查看[javadoc](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Category.html#error%28java.lang.Object,%20java.lang.Throwable%29)，如果您想要堆栈跟踪，异常必须是第二个参数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-06T08:11:38.703

通常，您也可以将`Throwable`实例传递给记录器，例如

```
logger.error( "My custom message", exception ) 
```

# ruby-on-rails - Rails 块中的 update_attributes

> ID：10040837
> 
> 赞同：0
> 
> 时间：2012-04-06T08:09:25.687
> 
> 标签：ruby-on-rails

我正在尝试更新已通过`globalize3`. 为此，我需要多次更改语言环境以更新模型。但是，该`update_attributes`方法似乎不接受块作为参数。有没有其他方法可以实现以下目标？

```
Country.where(code: 'NLD').first_or_create.update_attributes do |country|
  I18n.locale = :en
  nld.name = 'Netherlands, The'

  I18n.locale = :nl
  nld.name = 'Nederland'
end 
```

我这样做的原因是我希望能够多次运行我的种子文件并相应地更新数据`first_or_create`。`update_attributes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:14:17.687

G3有`set_translations`方法，所以你可以

```
Country.where(code: 'NLD').first_or_create.set_translations(
  :en => { :name => 'Netherlands, The' },
  :nl => { :name => 'Nederland' }
) 
```

# android - 创建居中缩放位图

> ID：10040838
> 
> 赞同：0
> 
> 时间：2012-04-06T08:09:32.263
> 
> 标签：android

所以我有一些代码可以拍摄视频并使用 MediaMetadataRetriever 的 getFrameAtTime 抓取帧。到目前为止，这很好用。但是，我想列出在列表视图中录制的视频，并附带 getFrameAtTime 屏幕抓取使用的缩略图。屏幕抓取不会保存为正方形，并且使用具有均匀宽度/高度尺寸的 createBitmap 可能会扭曲缩略图。知道如何解决这个问题吗？或者也许非方形矩形缩略图可以正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:17:22.540

将位图设置为`ImageView`-的背景`imageView.setImageDrawable(drawable);`并将比例类型设置为`FIT_CENTER`-`imageView.setScaleType(FIT_CENTER);`

# javascript - 无法理解此 javascript 代码

> ID：10040841
> 
> 赞同：0
> 
> 时间：2012-04-06T08:09:45.817
> 
> 标签：javascript, appcelerator

我是 javascript 新手，我必须了解一个 appcelerator 项目。在 appcelerator 中，我们需要在 java 脚本中编写代码。

```
var winForm = (function() {

    var API = {};

    API.list = [
        {
            title:'title1', hasChild:true, color:'#9B0B0B',font:'font'
        },
        {
            title:'title2', hasChild:true, color:'#9B0B0B',font:'font'
        },
        {
            title:'title3', hasChild:true, color:'#9B0B0B',font:'font'
        }
    ];//end winList

    return API;
})(); //end 
module.exports = winForm; 
```

1.  这是什么类型的功能？
2.  这是什么“{}”初始化？
3.  我们在 API.list 中做什么？
4.  如何调用这个函数和列表。
5.  这是什么出口？

很抱歉在一篇文章中问了这么多问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:15:30.410

1.  这是一个声明创建范围的匿名函数。
2.  它创建一个空对象。它没有属性，但已定义。
3.  `list`被设置`[ ... ]`为由 3 个对象组成的数组（即表示法）。每个对象都有 4 个属性，`title`、`hasChild`、`color`和`font`， 以及各自的值。
4.  您不能显式调用此函数，它已声明、运行，结果存储在变量`winForm`中（然后存储在 中`module.exports`）。
5.  对象上的一些属性`module`，不管是什么。

您应该花时间了解有关 javascript 工作原理的更多信息。我推荐[http://javascript.info/](http://javascript.info/)作为一个很好的提升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:31:02.883

I would like to recommend some useful links, these will enrich your knowledge

*   [`Javascript Programming pattern`](http://www.klauskomenda.com/code/javascript-programming-patterns/)
*   [`JavaScript Object Literal`](http://www.dyn-web.com/tutorials/obj_lit.php)
*   [`javascript closure`](http://sleeplessgeek.blogspot.in/2009/12/so-what-are-these-closure-thingys.html)
*   [`Lesson from javascript code review`](http://coding.smashingmagazine.com/2011/10/27/lessons-from-a-review-of-javascript-code/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:15:56.117

1) 该函数是一个立即匿名自执行表达式函数，形式为`variable = (function() {}())`

2) API 被初始化为一个对象（或哈希表），其作用域在该函数内

3) API.list 是一个对象数组，每个对象包含四对`key:value`

4) 函数是自执行的，因此当您返回 API 对象时，您将其分配给 winForm 变量

5)`winForm` is the returning object and `winForm.list` is the array.
Since you assign `module.exports = winForm;` then `module.exports.list` is your array

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:22:52.407

```
1.This function is called as anonymous function or rather you can say self executing function

2.It is creating an empty object 

3.API.list is array of the object .. To define array [ ] these brackets are used and for object { }.
4\. You are using the return function .. and the result is getting stored in module.export
5\. Export is the method name .. There has to be a method object define somewhere in js . you can you this method to get your result
as in the winForm  function  and used for some purpose 
```

# html - 将边框底部添加到表格行

> ID：10040842
> 
> 赞同：483
> 
> 时间：2012-04-06T08:09:47.443
> 
> 标签：html, css, html-table

我有一个 3 x 3 的表格。我需要一种方法来为每一行的底部添加一个边框`tr`并给它一个特定的颜色。

首先我尝试了直接的方式，即：

```
<tr style="border-bottom:1pt solid black;"> 
```

但这没有用。所以我添加了这样的CSS：

```
tr {
border-bottom: 1pt solid black;
} 
```

那仍然没有用。

我更喜欢使用 CSS，因为这样我就不需要`style`为每一行添加一个属性。我没有`border`向`<table>`. 我希望这不会影响我的 CSS。

* * *

## 回答 #1

> 赞同：647
> 
> 时间：2012-04-06T08:14:50.323

添加[`border-collapse:collapse`](https://developer.mozilla.org/en-US/docs/Web/CSS/border-collapse)到您的表格规则：

```
table { 
    border-collapse: collapse; 
} 
```

### 例子

```
table {
  border-collapse: collapse;
}

tr {
  border-bottom: 1pt solid black;
}
```

```
<table>
  <tr><td>A1</td><td>B1</td><td>C1</td></tr>
  <tr><td>A2</td><td>B2</td><td>C2</td></tr>
  <tr><td>A2</td><td>B2</td><td>C2</td></tr>
</table>
```

[关联](http://www.w3schools.com/cssref/pr_border-collapse.asp)

* * *

## 回答 #2

> 赞同：463
> 
> 时间：2012-04-06T08:26:55.160

我以前遇到过这样的问题。我认为`tr`不能直接采用边框样式。`td`我的解决方法是为行中的 s设置样式：

```
<tr class="border_bottom"> 
```

CSS：

```
tr.border_bottom td {
  border-bottom: 1px solid black;
} 
```

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2014-07-23T09:50:03.297

使用`border-collapse:collapse`在桌子和`border-bottom: 1pt solid black;`tr

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2012-04-06T08:26:34.287

采用

`border-collapse:collapse`正如内森所写，您需要设置

`td { border-bottom: 1px solid #000; }`

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2016-08-31T02:52:48.793

这里有很多不完整的答案。由于您无法将边框应用于`tr`标签，因此您需要将其应用于`td`or`th`标签，如下所示：

```
td {
  border-bottom: 1pt solid black;
} 
```

这样做会在每个 之间留下一个小空间`td`，如果您希望边框看起来好像它是`tr`标签，这可能是不可取的。可以说，为了“填补空白”，您需要利用元素`border-collapse`上的属性`table`并将其值设置为`collapse`，如下所示：

```
table {
  border-collapse: collapse;
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-02-19T17:47:02.390

您可以使用该`box-shadow`属性来伪造`tr`元素的边框。调整`box-shadow`（以下表示为2px）的Y位置以调整厚度。

```
tr {
  -webkit-box-shadow: 0px 2px 0px 0px rgba(0,0,0,0.99);
  -moz-box-shadow: 0px 2px 0px 0px rgba(0,0,0,0.99);
  box-shadow: 0px 2px 0px 0px rgba(0,0,0,0.99);
} 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2019-03-18T18:52:24.570

我尝试添加

```
 table {
      border-collapse: collapse;
    } 
```

旁边

```
 tr {
      bottom-border: 2pt solid #color;
    } 
```

然后注释掉border-collapse，看看有什么效果。只是让带有底部边框属性的 tr 选择器对我有用！

**无边框 CSS ex。**

![无边框 CSS ex。](../Images/a44c3640eeb987547c855dc169b5d04e.png)

**无边框照片直播**

![无边框照片直播](../Images/9d29b2a4e129c6e4906dcadf324e3fca.png)

**CSS 边框 ex。**

![CSS 边框 ex。](../Images/5afddca62f0035f32788b9f3d6bc9d0c.png)

**带边框照片的表**

![带边框照片的表](../Images/a05da4c3e175d4baa44db6c7c9575243.png)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-12-28T19:34:19.913

采用

```
table{border-collapse:collapse}
tr{border-top:thin solid} 
```

用 CSS 属性替换“thin solid”。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-11-23T19:17:29.137

将行显示为块。

```
tr {
    display: block;
    border-bottom: 1px solid #000;
} 
```

并简单地显示替代颜色：

```
tr.oddrow {
    display: block;
    border-bottom: 1px solid #F00;
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-09-04T13:19:07.740

另一个解决方案是[`border-spacing`](https://www.w3schools.com/cssref/pr_border-spacing.asp)属性：

```
table td {
  border-bottom: 2px solid black;
}

table {
  border-spacing: 0px;
}
```

```
<table>
 <tr>
   <td>ABC</td>
   <td>XYZ</td>
</table>
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-14T20:37:11.440

我在使用这种方法时发现，td元素之间的空间导致边框形成间隙，但不用担心......

一种解决方法：

```
<tr>
    <td>
        Example of normal table data
    </td>

    <td class="end" colspan="/* total number of columns in entire table*/">
        /* insert nothing in here */ 
    </td>
</tr> 
```

使用 CSS：

```
td.end{
    border:2px solid black;
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-08-17T16:48:12.503

`<td style="border-bottom-style: solid; border-bottom: thick dotted #ff0000; ">`

您也可以对整行执行相同的操作。

有`border-bottom-style`, `border-top-style`, `border-left-style`, `border-right-style`。或者简单地`border-style`说，它同时适用于所有四个边界。

您可以[在此处查看（并在线](http://www.w3schools.com/css/css_border.asp)**尝试**）更多详细信息

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-06-19T16:50:08.370

几个有趣的答案。由于您只想要一个边框底部（或顶部），这里还有两个。假设你想要一个 3px 厚的蓝色边框。在样式部分中，您可以添加

```
.blueB {background-color:blue; height:3px} or
hr {background-color:blue; color:blue height:3px} 
```

在表代码中

```
<tr><td colspan='3' class='blueB></td></tr> or
<tr><td colspan='3'><hr></td></tr> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-01-19T08:00:00.390

无 CSS 边框底部：

```
<table>
    <thead>
        <tr>
            <th>Title</th>
        </tr>
        <tr>
            <th>
                <hr>
            </th>
        </tr>
    </thead>
</table> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-31T18:37:20.613

您不能在 tr 元素上放置边框。这在 Firefox 和 IE 11 中对我有用：

```
<td style='border-bottom:1pt solid black'> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-15T13:46:40.497

如果你不想

*   在桌子上强制边框折叠
*   使用 TD 元素样式

您可以使用**::after**选择器为 TR 添加边框：

```
table tbody tr {
    position : relative; # to contain the ::after element within the table-row
}

table tbody tr td {
    position : relative; # needed to apply a z-index
    z-index : 2; # needs to be higher than the z-index on the tr::after element
}

table tbody tr::after {
    content : '';
    position : absolute;
    z-index : 1; # Add a z-index below z-index on TD so you can still select data from your table rows :)
    top : 0px;
    left : 0px;
    width : 100%;
    height : 100%;
    border : 1px solid green; # Style your border here, choose if you want a border bottom, top, left, etc ...
} 
```

这是我在必须在表格行之间放置空格的情况下使用的一个简单技巧，因此我无法在表格上添加边框折叠，最终结果：

[![在此处输入图像描述](../Images/092e504db10e20053d5ac9432adceec9.png)](https://i.stack.imgur.com/CdTrs.png)

希望能帮助到你 ：）

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2016-03-01T07:18:00.053

HTML

```
<tr class="bottom-border">
</tr> 
```

CSS

```
tr.bottom-border {
  border-bottom: 1px solid #222;
} 
```

# android - 如何从联系人列表中获取联系人姓名、号码和电子邮件 ID？

> ID：10040843
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:09:57.203
> 
> 标签：android

当我按下按钮时，我需要获取所有联系人的详细信息，但我的详细信息仅包含 3 个详细信息

1.  联系人姓名

2.  联系电话和

3.  电子邮件ID

我正在使用此代码获取联系人姓名和所有联系人的号码，这是我的按钮单击中的代码

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;  
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.view.View;
import android.widget.Button;

public class GetNameNumberActivity extends Activity {
/** Called when the activity is first created. */
private static final int CONTACT_PICKER_RESULT = 1001; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

       Button Btn = (Button)findViewById(R.id.getContacts);
        Btn.setOnClickListener(new View.OnClickListener() { 

            @Override
            public void onClick(View v) {
                Intent i = new Intent(Intent.ACTION_PICK,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI);
                startActivityForResult(i, CONTACT_PICKER_RESULT);

            }
        });
    }

    protected void onActivityResult(int reqCode, int resultCode, Intent data) {
        super.onActivityResult(reqCode, resultCode, data);
        if(resultCode == RESULT_OK) {
            switch (reqCode) {
            case CONTACT_PICKER_RESULT:
                Cursor cursor = null;
                String number = "";
                try {

                    Uri result = data.getData();

                    //get the id from the uri
                    String id = result.getLastPathSegment();  

                    //query
                    cursor = getContentResolver().query(
                            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Phone._ID + " = ? " , new String[] {id}, null);

                    int numberIdx = cursor.getColumnIndex(Phone.DATA);  

                    if(cursor.moveToFirst()) {
                        number = cursor.getString(numberIdx);

                    } else {

                    }
                } catch (Exception e) {
                    //failed
                } finally {
                    if (cursor!=null) {
                        cursor.close();
                    }

                }

            }
        }
    }
} 
```

使用此代码，我如何添加获取电子邮件地址的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:11:27.620

你的课是叫`URLExample`的，不是`URLReader`的。

你还没有说你是如何启动它的，但是你应该把它改成 use `URLExample`，或者你应该把你的类改成 call `URLReader`。您还应该格式化您的代码，而不是更具可读性...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:17:21.867

当我使用

```
System.out.println(hpCon.getHeaderFields()); 
```

它打印

```
P3P=[CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."] 
```

我建议您阅读链接[http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657](http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:34:15.313

您的 URLExample 类是否不是公共的，并且还检查 java 文件名和文件中公共类的名称是否相同？它应该是一样的。

# javascript - Chrome 中的同步控制台日志记录

> ID：10040856
> 
> 赞同：8
> 
> 时间：2012-04-06T08:11:23.857
> 
> 标签：javascript, google-chrome, logging, webkit

是否可以同步记录到控制台？我经常遇到代码执行比转储结构更快的情况。这解决了输出已经更改的对象。

我当然可以使用调试器浏览代码，进行单元测试等，只是简单的`console.log`东西只是为了大致了解正在发生的事情通常很方便。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T08:24:03.997

您可以在将对象传递给`console.log`. [在此处](http://www.overset.com/2007/07/11/javascript-recursive-object-copy-deep-object-copy-pass-by-value/)查找用于创建对象的深层副本的函数。

**编辑：**

现在在 Chrome 中实现，请参见[此处](http://blog.chromium.org/2012/10/do-more-with-chrome-developer-tools.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-10T00:36:16.593

我刚刚被这种行为抓住了，花了几个小时才意识到控制台很糟糕，而不是我的代码。该死。

到目前为止，我只能通过以下方式获得预期的行为：

```
console.log(JSON.stringify(obj)) 
```

好的副作用是，它扩展了像 {0: "a", 3: "b"} 这样的对象

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T08:16:04.407

在 console.log 语句中放置一个断点（见下图）并使用控件跳转到下一个。

![在此处输入图像描述](../Images/23c10806e343f8d72d393324eff796a8.png)

# eclipse - Eclipse nodejs vjet v8调试

> ID：10040861
> 
> 赞同：1
> 
> 时间：2012-04-06T08:11:42.293
> 
> 标签：eclipse, node.js

我正在使用 Eclipse helios，并通过以下链接中的步骤安装了 vjet 和 v8 调试：- [http://jonathan-whywecanthavenicethings.blogspot.in/2011/08/war-of-worlds.html](http://jonathan-whywecanthavenicethings.blogspot.in/2011/08/war-of-worlds.html) 另外，NodejsTL zip 文件我下载并设置在我项目的构建路径中

但是当我试图通过 Eclipse 在 Eclipse 中调试它时。外部工具配置，我收到以下错误：-

```
debugger listening on port 5858

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: Cannot find module 'E:\eclipse-jee-helios-SR1-win32\workspace\nodejswkspace\TempVjetProject\Server1.js'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:46:18.057

当您设置它时，eclipse 很有可能将它卡在“src”或“source”文件夹中。因此，运行配置基本上假设您的源文件夹部署在根目录下。

仔细检查路径，然后重试。我所做的是消除源文件夹，所以我不必处理 - 或者做类似的事情

```
--debug src/${resource_name}
//or better still since the above shouldn't work for subfolders... 
--debug ${workspace_loc}/${resource_path} 
```

我敢打赌你的路径看起来像：

```
E:\eclipse-jee-helios-SR1-win32\workspace\nodejswkspace\TempVjetProject\***src***\Server1.js 
```

这是我的项目现在的样子： ![在此处输入图像描述](../Images/044dfc7c6548cbe6ee4725096b3bcfe6.png)

对于我的配置，这呈现：

# java - 启动时如何处理 Spring Webservice 连接错误？

> ID：10040866
> 
> 赞同：5
> 
> 时间：2012-04-06T08:12:26.947
> 
> 标签：java, web-services, spring

我在 Spring 中使用 JaxWsPortProxyFactoryBean 来连接 SOAP Web 服务。问题是，如果在 Spring 启动的那一刻，webservice 就关闭了（因为网络问题）。它将导致异常并停止 Spring 初始化。我不想要这种行为，应用程序不需要仅仅因为 web 服务连接失败而停止。

有没有更好/正确的方法使用 Spring 来处理这个问题？这是我当前的 xml 上下文。

```
<bean id="beanWebServiceSOAP" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean" lazy-init="true">
    <property name="serviceInterface" value="com.company.bean.BeanWebServiceSoap" />
    <property name="wsdlDocumentUrl" value="${bean.wsdldocumenturl}" />
    <property name="namespaceUri" value="${bean.namespaceuri}" />
    <property name="serviceName" value="BeanWebService" />
    <property name="portName" value="BeanWebServiceSoap" />
</bean> 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T08:29:39.887

也许通过将属性“ [lookupServiceOnStartup](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/jaxws/JaxWsPortClientInterceptor.html#setLookupServiceOnStartup%28boolean%29) ”设置为 false：

```
<bean id="beanWebServiceSOAP" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean" lazy-init="true">
    <property name="serviceInterface" value="com.company.bean.BeanWebServiceSoap" />
    <property name="wsdlDocumentUrl" value="${bean.wsdldocumenturl}" />
    <property name="namespaceUri" value="${bean.namespaceuri}" />
    <property name="serviceName" value="BeanWebService" />
    <property name="portName" value="BeanWebServiceSoap" />
    <property name="lookupServiceOnStartup" value="false" />
</bean> 
```

# php - 查找重复的数组值并有条件地删除

> ID：10040867
> 
> 赞同：0
> 
> 时间：2012-04-06T08:12:30.887
> 
> 标签：php, arrays, multidimensional-array

我有一个像这样的多维数组：

```
$orders = array(
  array(
    'id' => '123',
    'name' => 'John',
    'lastname'=>'Carter',
    'rate' => '1.0'
  ),
  array(
    'id' => '546',
    'name' => 'Ben',
    'lastname'=>'Wall',
    'rate' => '0.25'
  ),
  array(
    'id' => '666',
    'name' => 'John Bow',
    'lastname'=>'Porter',
    'rate' => '0.25'
  ),
  array(
    'id' => '156',
    'name' => 'John',
    'lastname'=>'Carter',
    'rate' => '0.5'
  )
); 
```

并希望创建一个函数来删除比率 < 1.0 的重复行。结果数组应为：

```
$orders = array(
  array(
    'id' => '123',
    'name' => 'John',
    'lastname'=>'Carter',
    'rate' => '1.0'
  ),
  array(
    'id' => '546',
    'name' => 'Ben',
    'lastname'=>'Wall',
    'rate' => '0.25'
  ),
  array(
    'id' => '666',
    'name' => 'John',
    'lastname'=>'Porter',
    'rate' => '0.25'
  )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:57:30.963

## 编辑：第二个也是好的版本：http: [//ideone.com/zJ8vj](http://ideone.com/zJ8vj)

* * *

您所说的“重复”-相同的“速率”是什么意思？下面的示例删除具有相同“率”和“率”< 1.0 的重复订单。这是你需要的吗？

```
$tmpOrders = array();
foreach($orders as $order) {
    // Check only rate < 1.0
    if((float)$order['rate'] < 1.0) {
        // Check duplicate
        $exists = false;
        foreach($tmpOrders as $tmp) {
            if($tmp['rate'] == $order['rate']) {
                $exists = true;
                break;
            }
        }
        // Add if rate not exists
        if(!$exists) {
            $tmpOrders[] = $order;
        }
    }
    // Add all with rate >= 1.0
    else {
        $tmpOrders[] = $order;
    }
}
$orders = $tmpOrders;

echo "<pre>";
print_r($orders);
echo "<pre>"; 
```

结果：

```
Array
(
    [0] => Array
        (
            [id] => 123
            [name] => John
            [lastname] => Carter
            [rate] => 1.0
        )

    [1] => Array
        (
            [id] => 546
            [name] => Ben
            [lastname] => Wall
            [rate] => 0.25
        )

    [2] => Array
        (
            [id] => 156
            [name] => John
            [lastname] => Carter
            [rate] => 0.5
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:46:07.820

不是很漂亮和速度，但可行的解决方案：

```
$a = array(...); // Your array

$hashstack = array_map(function($value) { return md5($value['name'] . $value['lastname']); }, $a);
$result = array_filter($a, function($value) use ($hashstack)
{
    if ((float)$value['rate'] < 1.0) {
        $count = 0;
        foreach ($hashstack as $hash) {
            if (md5($value['name'] . $value['lastname']) == $hash) {
                $count++;
            }
        }
        if ($count > 1) {
            unset($value);
            return;
        }
    }
    return $value;
}); 
```

结果和你一样。

# mysql - 带有 WHERE 子句的 MySQL SELECT 查询返回的结果不严格相等

> ID：10040868
> 
> 赞同：1
> 
> 时间：2012-04-06T08:12:41.263
> 
> 标签：mysql, sql, select, where-clause

这是传递给 MySQL 5.1 的 SQL 查询：

```
SELECT * FROM option_groups WHERE parent_id = 22 
```

我得到多个结果，其中父 ID 实际上等于 2。同样，对于父 ID 34，我得到父 ID 3 的结果。我从未见过这样的事情。

我的印象是 '=' 强制执行严格相等。我如何得到不同的结果？

## 更新

所以，这就是我解决问题的方法：

这是一个双重问题。首先，我在删除条目的例程中打错了一个名称，最后在关系表中留下了剩余行。其次，我在标记为弃用的循环中重新转换父 ID。

这引出了一个进一步的问题，即如何/如果通过将整数分配给变量来将整数转换为循环内的字符串将在源行对象中重新转换它，但我会在不是凌晨 3:45 时保存它。

我觉得自己像个白痴，很抱歉浪费了大家的时间。非常感谢，大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:42:43.297

尝试

```
SELECT * FROM option_groups WHERE parent_id = '22' 
```

# google-maps - 地图在模拟器中的三星 Galaxy 平板电脑中不起作用

> ID：10040873
> 
> 赞同：0
> 
> 时间：2012-04-06T08:13:24.407
> 
> 标签：google-maps, android

我的应用程序是用地图和其他一些列表视图开发的。

当我删除

```
<uses-library android:name="com.google.android.maps" /> 
```

从清单文件中，应用程序运行正常，但是当我在清单中添加它时，我得到了

```
Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY 
```

错误，如何解决此问题以在 Galaxy 平板电脑模拟器中运行该应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:20:48.820

您应该使用带有 Google API 的 Android Build。右键单击您的项目 > 属性 > Android，选择目标名称中包含“Google API”的项目。请务必选择您需要的版本。

Google 地图需要包含 Google API 的 Android 库。因此，如果您使用 Android SDK 2.3... 那么您应该选择“Google APIs 2.3”。

![在此处输入图像描述](../Images/b0b1f9c668e15c678d879fd74d74f7cb.png)

如果找不到，则应使用 Android SDK Manager 下载它。

![在此处输入图像描述](../Images/f62f010f556219140a0f31a023592416.png)

选择您需要的任何版本：

![在此处输入图像描述](../Images/2d17a5294e8030531fb06056cba75d64.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:43:46.867

你应该检查你的 AVD 是它的简单或谷歌 API

因为 Google MAP 仅适用于 Google API。

# web-services - 作为 EJB 和 Websphere 7 上的 Web 服务访问 EJB 3.0

> ID：10040874
> 
> 赞同：0
> 
> 时间：2012-04-06T08:13:36.587
> 
> 标签：web-services, jakarta-ee, ejb-3.0, websphere-7

我想将 EJB 3.0 无状态 bean 部署到 WAS7，这样我就可以通过本地接口将其作为 EJB 访问，也可以作为 jax-ws Web 服务访问。

我的 bean 如下所示：

```
@Stateless
@WebService
public class UserManagerImpl implements UserManager {
    public UserManagerImpl() {
    }
    @WebMethod
    public String getName(){
        return "UserName";
    }
} 
```

问题是，如果我将它打包到 EJB-JAR 中并进行部署，它就不能作为 WAS-7 上的 Web 服务工作。

对我来说唯一可行的配置是如果我将 EJB-JAR 放入 EAR 并将此 EJB-JAR 放入也在 EAR 中的 WAR 中，如下所示：

```
EAR/
   |--EJB-JAR
   |--WAR/
         |WEB-INF/lib/
                     |EJB-JAR 
```

所以我的豆子是重复的。

这个设计有问题吗？如果是这样，是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:23:29.790

如果您的应用程序包含`@WebService`带注释的 EJB，那么您需要`endptEnabler`在部署之前使用 WebSphere 附带的工具来处理 EAR。请注意，这不适用于`@WebService`Web 模块中的注释类。

# c - C char 数组在传递给函数后被损坏

> ID：10040875
> 
> 赞同：1
> 
> 时间：2012-04-06T08:13:48.403
> 
> 标签：c, arrays, pointers, tree, char

我正在尝试实现一个类似于 20 Questions 的程序，其中加载了一个包含问题和猜测答案的文本文件，复制到一个 char 数组中（其中新的空格行被替换为 '/0' 以便拆分问题成单独的字符串）。将文本文件复制到其中后，该数组可以正常工作。建立一个树结构将短语组织成是/否问题树，其中左孩子是是的响应，而右是否响应，而叶子是程序最后用来猜测的猜测。

我遇到的问题是，在我构建树（从 InitTree 调用 treeBuilder）之后，复制文本文件中的短语的数组内容被破坏了。

在调用 InitTree 之前，数组内容如下所示：

> 是不是毛茸茸的？它喵喵叫吗？猫 狗 它有象牙吗？它有大耳朵吗？大象 犀牛 鳄鱼

调用后是这样的：

> 是不是毛茸茸的？-???` ?p ?a dog 它有象牙吗？它有大耳朵吗？大象 犀牛 鳄鱼

我一直在测试它停止工作的位置，并且在 treeBuilder 中，数组的所有元素都完好无损，但是一旦对 treeBuilder 的函数调用结束，数组就会损坏。我尝试通过在分配内存时使用 calloc 来保护内存，甚至通过使字符数组静态化，这在发生这种情况的类似情况下工作。但我所有的预防措施似乎都不起作用，我不确定问题出在哪里。我已经尝试在 stackoverflow 上查看类似案例，但我无法找到与我的问题相关的任何内容。

由于显而易见的原因，当程序实际开始使用树时，这最终会导致段错误。

我试过运行 gdb，但无论出于何种原因，它都不会让我逐行遍历，因为它找不到行信息，并且只是跳过所有内容，直到它提示输入，或者出现内存错误或其他东西，所以在这里运行 gdb 不是很有帮助。我猜这可能是因为 main 函数在包含的文件中。但这无关紧要。

这是与问题相关的代码：

```
struct treeStruct {
    char *string;
    struct treeStruct *left, *right;
};

typedef struct treeStruct *TreeType;

// Builds a tree
void treeBuilder(TreeType tree, char **phrase, long level){
    // Gets the level (number of tabs) of the next phrase
    long nextLevel = countTabs(*phrase + strlen(*phrase) + 1);

    tree->string = *phrase + level; // Assigns the response pointer to the tree array

    // Move the pointer to the next string, since the the strings need to be
    // put into the tree in linear order
    (*phrase) += strlen(*phrase) + 1;

    if (level >= nextLevel){
    // Compares the current level with the level of the next string
            // to determine if returning up the tree is necessary;
            // This should be the answer to a question.
            tree->left = NULL;
            tree->right = NULL;
            return;
    }
    else{
            // Makes sure the left and right pointers of the struct have
            // allocated space
            tree->left = calloc(1, sizeof(TreeType));
            tree->right = calloc(1, sizeof(TreeType));

            // Adds the yes and no branches to the tree, recursion will take care
            // of adding sub-branches
            treeBuilder(tree->left, phrase, level + 1);
            treeBuilder(tree->right, phrase, level + 1);
    }

    return;

}

TreeType InitTree (char *file){
    if(file == NULL){
            printf("File '%s' does not exist.\n", file);
            exit(2);
    }

    FILE *fp;
    fp = fopen(file, "r");

    // Create a space in memory for the loaded questions to occupy
    static char *phrases;
    phrases = (char *)malloc(MAXSTR * MAXNUMQS * sizeof(char));

    copyText(fp, phrases);

    fclose(fp);

    // Create space in memory for the tree structure
    TreeType tree;
    tree = (TreeType) calloc(1, sizeof(TreeType));

    // Create a pointer to a pointer so that treeBuilder can
    // change what the first pointer is pointing to, so the strings in
    // phrases can be added in order throughout the recursion
    static char *phrase_ptr, **phrase_ptr2;
    phrase_ptr = &phrases[0];
    phrase_ptr2 = &phrase_ptr;

    //Build the tree
    treeBuilder(tree, phrase_ptr2, 0);

    topNode = tree;

    return tree;
} 
```

抱歉，如果这是 tl;dr，但我想尽可能清楚地说明我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:23:40.850

我注意到的一件事是您正在使用`sizeof(TreeType)`, but`TreeType`是指向结构而不是结构本身的指针。这意味着您正在创建一个不指向任何地方的指针，并且取消引用该指针将导致未定义的行为。刚刚阅读了问题的其余部分肯定会解释段错误。

我认为你最好不要将你的结构定义为指针，并且更明确地使用指针。

例如。

```
typedef struct treeStruct TreeType;

void treeBuilder(TreeType *tree, char **phrase, long level){
    ...
    if (!tree->left) {
        // calloc returns a pointer to a new bit of memory that has been 
        // assigned on the heap
        TreeType *temp = calloc(1, sizeof(TreeType));
        // assignments below not explicitly needed as you're using calloc
        temp->string = NULL;
        temp->left = NULL;
        temp->right = NULL;

        tree->left = temp;
    }
    ...
} 
```

这是关于 typedef-ing 指针的[问题。](https://stackoverflow.com/questions/750178/typedef-pointers-a-good-idea)似乎在 C 中比较常见，用于暗示数据类型是不透明的，不应由用户取消引用（仅由用户传递给它的 API 调用）。

# javascript - 如果没有元素，我该如何修复：悬停在 iPhone 上？

> ID：10040882
> 
> 赞同：6
> 
> 时间：2012-04-06T08:14:50.847
> 
> 标签：javascript, iphone, html, hover

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:17:43.553

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T06:36:12.293

使 iPhone 尊重悬停状态。

```
<ul>
  <li onclick="//">test</li>
  <li onclick="//">test</li>
  <li onclick="//">test</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-03T04:03:34.287

我找到了处理 div:hover 在 iphone 上工作的最佳方法。不使用 javascript

使用 `cursor: pointer`使您的元素充当锚标记

css

> ul li { 光标：指针}

而且您还会注意到，当您在下拉菜单之外单击时，它不会在 iphone 上关闭，除非您单击真正的链接。由于我们在手机上看不到光标，这是我提出的解决方案。

css

> 正文 { 光标：指针 }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T00:57:30.527

虽然 iPhone/etc 没有专门的悬停状态，但链接的悬停状态会在用户点击它们时触发。通常双击实际上会跟随链接。

也许重新构建您的 HTML，以便您确实拥有具有悬停状态的锚点，而不仅仅是列表项。不需要 JS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T09:34:21.460

将 :focus 和 :active 添加到您的样式中：

ul li ul{display:none} ul li:focus ul,ul li:active ul{display:block}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-02T08:15:08.450

[http://blog.0100.tv/2010/05/fixing-the-hover-event-on-the-ipadiphoneipod/](http://blog.0100.tv/2010/05/fixing-the-hover-event-on-the-ipadiphoneipod/)

```
//ipad and iphone fix
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
    $(".menu li a").click(function(){
        //we just need to attach a click event listener to provoke iPhone/iPod/iPad's hover event
        //strange
    });
} 
```

# fedora - linux libpcap编程

> ID：10040883
> 
> 赞同：0
> 
> 时间：2012-04-06T08:15:02.420
> 
> 标签：fedora, libpcap, opensuse

相同的程序可以在 Opensuse 12.1 (x64) 上成功运行 虽然在 Fedora 16 上的 Fedora 16 (x64) 上无法运行，但它显示“Err calling pcap_compile” 我不知道这些操作系统之间有什么区别，我想他们完全一样，但我确保 Opensuse 12.1 可以成功过滤和捕获数据包。

```
int init_capture() {
int i;
char *dev;
char errbuf[PCAP_ERRBUF_SIZE];
pcap_t* descr;
const u_char *packet;
struct pcap_pkthdr hdr; /* pcap.h */
struct ether_header *eptr; /* net/ethernet.h */
struct bpf_program fp;
char portfilter[20]= "dst port 1521";
bpf_u_int32 maskp;
bpf_u_int32 netp;
/* grab a device to peak into... */
dev = pcap_lookupdev(errbuf);
if (dev == NULL) {
    printf("%s\n", errbuf);
    exit(1);
}
pcap_lookupnet(dev,&netp,&maskp,errbuf);
/* open device for reading */
descr = pcap_open_live(dev, BUFSIZ, 0, -1, errbuf);
if (descr == NULL) {
    printf("pcap_open_live(): %s\n", errbuf);
    exit(1);
}
if (pcap_compile(descr,&fp,portfilter,0,netp) == -1)
{
    printf("Err calling pcap_compile\n");
    exit(1);
}
if (pcap_setfilter(descr,&fp) == -1)
{
    printf("Err setting filter \n");
    exit(1);
}

/* allright here we call pcap_loop(..) and pass in our callback function */
/* int pcap_loop(pcap_t *p, int cnt, pcap_handler callback, u_char *user)*/
/* If you are wondering what the user argument is all about, so am I!!   */
pcap_loop(descr, -1, capture_callback, NULL);

fprintf(stdout, "\nDone processing packets... wheew!\n");
return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:17:15.613

如果`pcap_compile()`失败，你应该做

```
printf("Err calling pcap_compile: %s\n", pcap_geterr(descr)); 
```

看看它报告了什么问题。这可能有助于我们确定 Fedora 出了什么问题；在不知道故障*是*什么的情况下，很难确定如何修复它 - 过滤器应该适用于任何支持 IP 的链路层类型，并且`pcap_lookupdev()`应该始终返回这样的设备。

但是，`pcap_lookupnet()`如果您打开一个没有分配 IPv4 地址的设备，则可能会失败。如果失败，您可能应该只传递 0 作为两者`netp`-`maskp`您可能只是在调用之前将它们初始化为 0 `pcap_lookupnet()`。但是，这*不应该*有所作为 - 过滤器不需要网络和掩码，例如`dst port 1521`.

（顺便说一句，`-1`这不是一个有效的超时参数`pcap_open_live()`- 我会使用 1000 代替 - 但这在 Linux 上可能没问题；如果它无效，打开会失败，但打开不会对你失败，因为它正在报告中的错误`pcap_compile()`。）

# c# - 有符号与无符号整数的长度/计数

> ID：10040884
> 
> 赞同：26
> 
> 时间：2012-04-06T08:15:03.403
> 
> 标签：c#, c++, unsigned, signed

对于表示长度或计数变量，使用有**符号**整数还是**无符号**整数更好？

在我看来，C++ STL 倾向于喜欢*unsigned* ( `std::size_t`，就像在[std::vector::size()](https://docs.microsoft.com/en-us/cpp/standard-library/vector-class?view=vs-2019#size)中一样，而不是 C# [BCL](https://en.wikipedia.org/wiki/Base_Class_Library)倾向于喜欢有*符号*整数（就像在[ICollection.Count](https://docs.microsoft.com/en-us/dotnet/api/system.collections.icollection.count?view=netcore-3.1)中一样。

考虑到长度或计数是非负整数，我的直觉会选择*unsigned*；但我不明白为什么.NET 设计者选择有符号整数。

最好的方法是什么？各有什么优缺点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-06T08:56:22.110

C++ 使用无符号值，因为它们需要完整的范围。在 32 位系统上，该语言应该能够拥有 4 GB 的向量，而不仅仅是 2 GB 的向量。（操作系统可能不允许您使用全部 4 GB，但语言本身不想妨碍您）

在 .NET 中，无符号整数不符合 CLS。您可以使用它们（在某些 .NET 语言中），但它限制了可移植性和兼容性。所以对于基类库，它们只使用有符号整数。

然而，这些都是边缘情况。对于大多数用途来说，一个有符号`int`的就*足够大了*。因此，只要两者都提供您需要的范围，您就可以同时使用两者。

有符号整数有时具有的一个优点是它们更容易检测下溢。假设您正在计算一个数组索引，并且由于一些错误的输入，或者您的程序中可能存在逻辑错误，您最终尝试访问 index `-1`。

使用有符号整数，很容易检测到。使用 unsigned 时，它将环绕并变为`UINT_MAX`. 这使得检测错误变得更加困难，因为您期望一个正数，而您*得到了*一个正数。

所以真的，这取决于。C++ 使用无符号，因为它需要范围。.NET 使用签名是因为它需要使用没有未签名的*语言*。

在大多数情况下，两者都可以工作，有时，签名可以使您的代码更可靠地检测错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:03:06.993

将无符号类型用于计数和大小是很自然的，除非我们在某些上下文中它们可能是负数但有意义。我的猜测是 C++ 遵循它的哥哥 C 的相同逻辑，其中`strlen()`return`size_t`和`malloc()`take `size_t`。

C++（和C）中带有符号和无符号整数的问题是，当您混合使用这两种整数时，您必须知道它们是如何相互转换的。一些人主张对所有整数都使用有符号整数，以避免程序员无知和疏忽的问题。但我认为程序员必须知道如何使用他们的交易工具（编程语言、编译器等）。迟早他们会被转换所咬，如果不是他们所写的，那么其他人所拥有的。这是不可避免的。

因此，了解您的工具，选择适合您情况的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T09:03:33.387

这里有几个方面：

1）最大值：通常有符号数的最大值是对应无符号最大值的1/2。例如，在 C 中，最大有符号短值是 32767，而最大无符号短值是 65535（因为 -ve 数字不需要范围的 1/2）。因此，如果您期望的长度或计数会很大，那么无符号表示会更有意义。

2) 安全性：您可以浏览网络查找整数溢出错误，但可以想象以下代码：

```
if (length <= 100)
{
  // do something with file
} 
```

...然后，如果“长度”是一个有符号值，那么您将冒“长度”是一个 -ve 数字的风险（尽管是恶意的，一些强制转换等）并且代码没有执行您所期望的。我在以前的项目中看到过这个，其中每个事务都会增加一个序列，但是当我们使用的有符号整数达到最大有符号整数值（2147483647）时，它在下一个增量之后突然变成 -ve 并且我们的代码无法处理它。

无论底层语言/API考虑如何，都需要考虑一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:45:51.420

如果您不设计可重用的库（在 .NET 术语中，例如 VB.NET 项目使用您的 C# 类库），那么选择适合您的。当然，如果您正在创建任何类型的 DLL，并且您的库可以在具有不同语言的项目中使用是可行的（再次想到 VB.NET），那么您需要注意不兼容的类型（无符号）。

# scala - 将“_”分配给scala中的字段是什么意思？

> ID：10040886
> 
> 赞同：12
> 
> 时间：2012-04-06T08:15:24.690
> 
> 标签：scala, syntax

我看到一些将“_”分配给类字段的scala代码，这是什么意思？谢谢

```
private var tk: TaggedKey = _ 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-06T08:17:16.733

这意味着：*分配默认值*。默认值定义为`null`，`0`或`false`取决于目标类型。

它在[*Scala 语言规范*](http://www.scala-lang.org/docu/files/ScalaReference.pdf)*的4.2 变量声明和定义*中进行了描述：[](http://www.scala-lang.org/docu/files/ScalaReference.pdf)

 *> 变量定义`var x : T = _`只能作为模板的成员出现。它引入了一个类型为 T 和默认初始值的可变字段。默认值取决于类型 T，如下所示：
> 
> `0`- 如果`T`是 Int 或其子范围类型之一，
> 
> `0L`- 如果`T`是长，
> 
> `0.0f`- 如果`T`是浮点数，
> 
> `0.0d`- 如果`T`是双倍，
> 
> `false`- 如果`T`是布尔值，
> 
> `()`- 如果`T`是单位，
> 
> `null`- 对于所有其他类型`T`。*

# msbuild - 在同时包含 C# 和 VB.NET 项目的解决方案中抑制 C# 特定的警告

> ID：10040888
> 
> 赞同：1
> 
> 时间：2012-04-06T08:15:31.757
> 
> 标签：msbuild, suppress-warnings

我们使用 TFS 2010 进行服务器构建。我想关闭一些不太有用的警告。我可以通过指定自定义 MSBuild 参数来实现：

```
/p:NoWarn=1591 
```

它适用于 C# 项目的解决方案。但是，我们有一个解决方案，其中也包含一些 VB.NET 项目。VB.NET 编译器没有 C# 编译器的警告，所以我收到以下错误消息：

> vbc：选项“nowarn”的警告编号“1591”不可配置或无效

对于包含多种 .NET 语言的项目的解决方案，是否有办法实现此目的，而无需为解决方案中的每个项目单独指定忽略的警告列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:44:46.470

BC* 警告不能被抑制。您最好的选择是`NoWarn`使用目标重新评估 VB 项目中的属性`BeforeCompile`，方法是编辑`.vbproj`文件：

```
<Target Name="BeforeCompile">
  <PropertyGroup Condition=" '$(NoWarn)' == '1591' ">
    <NoWarn>42016,41999,42017,42018,42019,42032,42036,42020,42021,42022</NoWarn>
  </PropertyGroup>
</Target> 
```

# android - android中的Sencha轮播实现

> ID：10040895
> 
> 赞同：1
> 
> 时间：2012-04-06T08:15:56.913
> 
> 标签：android, carousel, swipe

谁能让我知道如何实现指定的此功能

[http://vimeo.com/24475654](http://vimeo.com/24475654)

特别是我很想知道如何在我们滑动图像时改变图像下方的点。是否有内置功能或任何开源来实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:28:47.360

您可以使用本机`Gallery`来执行此操作并将其扩展为您想要的样子。它具有选定的项目侦听器，因此您可以简单地选择与选定项目相对应的点。

这是一个图库教程：http: [//developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:33:05.003

另一种方法是使用android 支持包中的[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。这是一个关于如何使用它的教程：[Android用户界面设计：水平视图分页](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

至于下面的“点”，您可以参考此自定义库以获取`ViewPager`指标：[JakeWharton / Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

# php - 使用 ini_set

> ID：10040901
> 
> 赞同：0
> 
> 时间：2012-04-06T08:17:09.237
> 
> 标签：php, error-handling, ini-set

我正在使用包含 ini_set 类型的基于结构的配置文件。然后我填写包含参数的第一个类 Config 文件，然后继续应用程序过程。

加载文件并设置 ini_set 后，将触发并正确捕获任何错误；在这种情况下，错误将是 02

怀疑是在执行函数 settings() 之前是否出现任何错误，未设置 ini_set，此错误将是 01 的情况，并且想知道如何解决此问题。

```
try
{
    # trigger_error( 'case 01, example error' , E_USER_ERROR );

    # include
    Loader::import( 'configure.php' );
    Loader::import( 'config.php'    );

    # ini set
    settings();

    # execute application

    # trigger_error( 'case 02, example error' , E_USER_ERROR );
}
catch( Exception $e )
{
    echo 'critical error';
}

function settings()
{
    ini_set( 'error_reporting' , Config::read( 'settings.error_reporting' ) );
    ini_set( 'display_errors'  , Config::read( 'settings.display_errors'  ) );
    ini_set( 'default_charset' , Config::read( 'settings.charset'         ) );
    ini_set( 'date.timezone'   , Config::read( 'settings.timezone'        ) );
} 
```

1.  import 方法是一个类加载器
2.  config文件包含ini_set的数据：

Config::write ('ErrorReporting', E_ALL);

配置，是类

配置，包含值

如果有人没有理解某事，请再次解释

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:22:30.357

说如果我误解了这个问题，但我注意到的第一件事是：

```
import( 'configure.php' );
import( 'config.php' ); 
```

通常一个使用`require, include, include_once`or `require_once`：

```
include( 'configure.php' )
include( 'config.php' ); 
```

另外，为什么有两个配置文件？

# sql - 比较查询耗时

> ID：10040908
> 
> 赞同：1
> 
> 时间：2012-04-06T08:17:33.160
> 
> 标签：sql, tsql, comparison, sql-server-2008-r2

我的查询很简单：

```
select  a.ID, a.adres, a.place, a.postalcode  
from COMPANIES a, COMPANIES b  
where a.Postcode = b.Postcode  
and a.Adres = b.Adres  
and (  
select COUNT(COMPANYID)  
from USERS  
where COMPANYID=a.ID  
)>(  
select COUNT(COMPANYID)  
from USERS  
where COMPANYID=b.ID  
) 
```

数据库：sql server 2008 r2

我正在尝试做的事情： COMPANIES 表包含双重条目。我想知道连接到最多用户的那些。所以我只需要更改那些最少的外键。（我已经知道双打的ID）

现在需要很多时间才能完成。我想知道是否可以更快地完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:41:08.173

试试这个版本。它应该只是快一点。`COUNT`速度很慢。我已经添加`a.ID <> b.ID`以避免之前的少数情况。

```
select  a.ID, a.adres, a.place, a.postalcode  
from COMPANIES a INNER JOIN COMPANIES b
ON
a.ID <> b.ID
and a.Postcode = b.Postcode  
and a.Adres = b.Adres  
and (  
select COUNT(COMPANYID)  
from USERS  
where COMPANYID=a.ID  
)>(  
select COUNT(COMPANYID)  
from USERS  
where COMPANYID=b.ID  
) 
```

这`FROM ... INNER JOIN ... ON ...`是连接表的首选 SQL 构造。它也可能更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:35:01.380

一种方法是在进行连接之前预先计算`COMPANYID`计数，因为您将在主查询中重复计算它。即类似的东西：

```
insert into @CompanyCount (ID, IDCount)
select COMPANYID, COUNT(COMPANYID)
from USERS
group by COMPANYID 
```

然后你的主要查询：

```
select a.ID, a.adres, a.place, a.postalcode
from COMPANIES a
  inner join @CompanyCount aCount on aCount.ID = a.ID
  inner join COMPANIES b on b.Postcode = a.Postcode and b.Adres = a.Adres
  inner join @CompanyCount bCount on bCount.ID = b.ID and aCount.IDCount > bCount.IDCount 
```

如果你想要所有的实例，`a`即使没有对应的`b`，那么你需要有`left outer join`s to`b`和`bCount`.

但是，您需要查看查询计划 - 您正在使用哪些索引 - 您可能希望将它们至少放在`ID`s 和 the`Postcode`字段`Adres`上，因为您要加入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:42:11.250

1.  建立关于邮政编码和地址的索引

2.  数据库可能会为每一行执行子选择。（只是在这里猜测，在解释计划中对其进行验证。如果是这种情况，您可以重写查询以加入内联视图（注意这是它在 oracle hop 中的外观，它也适用于 sql server）：

    ```
    select distinct a.ID, a.adres, a.place, a.postalcode  
    from 
        COMPANIES a, 
        COMPANIES b,  
    (
        select COUNT(COMPANYID) cnt, companyid  
        from USERS
        group by companyid) cntA,  
    (
        select COUNT(COMPANYID) cnt, companyid  
        from USERS
        group by companyid) cntb   
    where a.Postcode = b.Postcode  
    and a.Adres = b.Adres  
    and a.ID<>b.ID
    and cnta.cnt>cntb.cnt 
    ```

# jquery - Ajax 按钮在新加载的表单内容中不起作用 - Drupal 7

> ID：10040910
> 
> 赞同：0
> 
> 时间：2012-04-06T08:17:44.237
> 
> 标签：jquery, ajax, drupal

我有一个模块，当用户单击链接时，我会在对话框中加载一个新表单，该表单具有启用 Ajax 的提交按钮。在我的对话框中，我不希望显示整个 drupal 页眉和页脚等。我所展示的只是那个新表格的内容。所以我的表单是通过 json 输出的，如下所示：

```
$json['html'] = drupal_render(drupal_get_form('my_form'));
drupal_json_output($json); 
```

像我想要的那样工作，并且只显示表单内容。但是，当这种情况发生时，该表单中启用 ajax 的提交按钮不会通过 ajax 提交。相反，它像普通按钮一样提交并将我带到另一个页面上的相同表单。

如果我有正常输出和显示的表单，带有页眉和页脚，如下所示：

```
$output = drupal_get_form('my_form');
return $output; 
```

一切正常，我的提交按钮是“启用 ajax”的。

我想，也许是因为我正在加载新内容，而行为并没有附加到这些新的表单内容上。所以在我的 js 文件中，我也这样做了：

```
$('a.my_link', context).click(function() {
//processing done here
$('#my_modal_dialog').html(jsondata['html']);
}, "json");
Drupal.attachBehaviors($('#my_modal_dialog')); 
```

那个小小的补充，也没有解决问题。我想知道为什么，如果表单正常输出，按钮作为ajax按钮工作，而当只显示表单内容时，ajax不起作用。

希望有人能得到答案...在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:10:05.387

我已经解决了问题，可以在以下链接中找到它：[drupal.org/node/1517414](http://drupal.org/node/1517414)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:38:23.400

我认为问题确实在于 javascript 没有应用于新内容，因为它在页面加载后运行一次。尝试使用以下`live()`方法：

```
$('a.my_link', context).live("click", function() {
  ...
}); 
```

请注意，从 jQuery 1.7 开始，live() 方法似乎已被弃用：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

它似乎已被[on](http://api.jquery.com/on/)或[delegate](http://api.jquery.com/delegate/)方法取代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:43:56.173

请检查是否`$`替换为`jQuery`，也许这有帮助。

# java - 读取文件时在运行时替换文件中的字节块的建议

> ID：10040912
> 
> 赞同：1
> 
> 时间：2012-04-06T08:17:52.827
> 
> 标签：java

伙计们。我相信社区会将此视为一个相关问题。如果没有，我很抱歉，mods，请关闭。

我正在为客户开发一个带有静态内容的视频播放应用程序。我的客户希望我实施一些基本的安全措施，以阻止有人解包已部署的应用程序（适用于 Android）并简单地复制 MPEG。我的客户已将基本保护作为一项关键要求，他正在支付账单:)

这些文件太大而无法即时解密，所以我正在考虑以下方法。我欢迎有关替代方案的想法和建议。我知道支持和反对通过默默无闻的复制保护方案和安全性的论点，我提出的方法使用了这些论点，我的问题不是“我应该吗？”。

从 MPG 标头的某处获取一个字节块，例如 256。用随机值替换这些字节，这样 MPEG 将无法播放而无需花费大量精力来修复它。将原始 256 字节存储在其中一个应用程序位图中，以便位图仍能正确显示。播放视频时，通过字节流读取它，并将字节替换为其原始值，然后再将它们传递给输出流。

总之：

1.  从 MPEG 的标头中提取 256 个字节
2.  将这些字节存储在位图中
3.  随机化原始字节中的值
4.  在运行时，从位图中读回 256 个字节
5.  使用字节数组缓冲区通过输入流读取 MPEG
6.  用原始值替换随机字节
7.  将输入流式传输到作为视频播放器输入的输出流。

我确实知道至少有两种方法可以解决这个问题，逆向工程和屏幕抓取，但重点是防止普通小偷不费吹灰之力地复制我的客户内容。

想的人？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:47:39.903

我建议对整个流使用加密/解密方案：

1.  实时视频流解密是处理这个问题的标准方法。与实际的视频解码相比，它的处理开销可以忽略不计。例如，每个[DVD](http://en.wikipedia.org/wiki/DVD)播放器都支持[CSS](http://en.wikipedia.org/wiki/Content_Scramble_System)加密方案。

    虽然使用 Java 确实施加了一些限制，例如无法有效利用各种特定于 CPU 的指令，但您应该能够找到一种不太昂贵的解密算法。我建议在拒绝流加密算法之前对您的应用程序进行分析。

2.  修改标题确实会使*一些*视频文件难以阅读，但远非不可能。一些文件具有冗余信息，而另一些文件实际上是直接连接的结果，这将使任何后续段都可读。一些流式视频编解码器实际上会插入足够的元数据以每隔几秒重建一次流。并且有*很多*视频格式。

    换句话说，无法*保证*从文件开头删除任意数量的字节会使其不可读。我还认为，对您的客户施加一系列限制他们可以使用的视频格式是不合理的，并且会限制您的应用程序未来的有用性。

# java - 用 0-(N-1) 的唯一数字替换重复数字

> ID：10040913
> 
> 赞同：6
> 
> 时间：2012-04-06T08:18:05.203
> 
> 标签：java, algorithm

## 背景：

我有一个 N 长度的正随机数数组，肯定包含重复项。例如 10,4,5,7,10,9,10,9,8,10,5
**编辑**：*N 很可能是 32，或者其他一些关于该大小的 2 的幂。*

## 问题：

我正在尝试找到用 0-(N-1) 中缺失的数字替换重复项的最快方法。使用上面的例子，我想要一个看起来像这样的结果：
10,4,5,7,0,9,1,2,8,3,6
目标是让每个数字中的一个从 0 到 N-1 ，而不只是用 0-(N-1) 替换所有数字（随机顺序很重要）。
**编辑**：*这个替换是确定性的也很重要，即相同的输入将具有相同的输出（不是随机的）。*

## 我的解决方案：

目前在 Java 中实现，使用 2 个布尔数组来跟踪使用/未使用的数字（范围 [0,N) 中的唯一数字/缺失数字），并且具有近似的最坏情况运行时 N+N*sqrt(N) .
代码如下：

```
public byte[] uniqueify(byte[] input)
{
    boolean[] usedNumbers = new boolean[N];
    boolean[] unusedIndices = new boolean[N];
    byte[] result = new byte[N];

    for(int i = 0; i < N; i++) // first pass through
    {
        int newIdx = (input[i] + 128) % N; // first make positive
        if(!usedNumbers[newIdx]) // if this number has not been used
        {
            usedNumbers[newIdx] = true; // mark as used
            result[i] = newIdx; // save it in the result
        }
        else // if the number is used
        {
            unusedIndices[i] = true; // add it to the list of duplicates
        }
    }

    // handle all the duplicates
    for(int idx = 0; idx < N; idx++) // iterate through all numbers
    {
        if(unusedIndices[idx]) // if unused
            for(int i = 0; i < N; i++) // go through all numbers again
            {
                if(!usedNumbers[i]) // if this number is still unused
                {
                    usedNumbers[i] = true; // mark as used
                    result[i] = idx;
                    break;
                }
            }
    }
    return result;
} 
```

这似乎是我所希望的最快的，但我想我会问互联网，因为有比我聪明得多的人可能有更好的解决方案。

注意 建议/解决方案不必使用 Java。

谢谢你。

**编辑**：*我忘了提到我正在将它转换为 C++。我发布了我的 java 实现，因为它更完整。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T08:21:03.090

使用[平衡二叉搜索树](http://en.wikipedia.org/wiki/Balanced_binary_search_tree)来跟踪使用/未使用的数字，而不是布尔数组。那么你的运行时间就会`n log n`。

最直接的解决方案是：

1.  浏览列表并构建“未使用”的 BST
2.  再次浏览列表，跟踪迄今为止在“使用过的”BST 中看到的数字
3.  如果找到重复项，请将其替换为“未使用”BST 的随机元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:31:08.897

这就是我的写法。

```
public static int[] uniqueify(int... input) {
    Set<Integer> unused = new HashSet<>();
    for (int j = 0; j < input.length; j++) unused.add(j);
    for (int i : input) unused.remove(i);
    Iterator<Integer> iter = unused.iterator();
    Set<Integer> unique = new LinkedHashSet<>();
    for (int i : input)
        if (!unique.add(i))
            unique.add(iter.next());
    int[] result = new int[input.length];
    int k = 0;
    for (int i : unique) result[k++] = i;
    return result;
}

public static void main(String... args) {
    System.out.println(Arrays.toString(uniqueify(10, 4, 5, 7, 10, 9, 10, 9, 8, 10, 5)));
} 
```

印刷

```
[10, 4, 5, 7, 0, 9, 1, 2, 8, 3, 6] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:25:33.123

My approach would be 1\. copy the array to a Set in Java.

Set will automatically remove duplicates in the fastest complexity possible(because Sun Micro has implemented it, generally their approach is the fastest like.. use of TimSort for sorting etc...)

1.  Calculate size() of the set.

2.  the size will give you no of duplicates present.

3.  now copy array 0-n-1 to the same set... the missing values will get inserted.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T01:38:02.053

最快的方法可能是最直接的方法。我会遍历数据列表，记录每个不同值的计数并标记重复出现的位置。然后只需形成一个未使用值的列表，然后将它们依次应用到发现重复项的位置。

使用 C++ 可能很诱人`List`，如果速度至关重要，那么简单的 C 数组是最有效的。

这个程序显示了原理。

```
#include <iostream>
#include <cstring>

using namespace std;

int main()
{
  int data[] = { 10, 4, 5, 7, 10, 9, 10, 9, 8, 10, 5 };
  int N = sizeof(data) / sizeof(data[0]);

  int tally[N];
  memset(tally, 0, sizeof(tally));

  int dup_indices[N];
  int ndups = 0;

  // Build a count of each value and a list of indices of duplicate data
  for (int i = 0; i < N; i++) {
    if (tally[data[i]]++) {
      dup_indices[ndups++] = i;
    }
  }

  // Replace each duplicate with the next value having a zero count
  int t = 0;
  for (int i = 0; i < ndups; i++) {
    while (tally[t]) t++;
    data[dup_indices[i]] = t++;
  }

  for (int i = 0; i < N; i++) {
    cout << data[i] << " ";
  }

  return 0;
} 
```

**输出**

```
10 4 5 7 0 9 1 2 8 3 6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T09:42:34.190

```
List<Integer> needsReplaced = newLinkedList<Integer>();
boolean[] seen = new boolean[input.length];

for (int i = 0; i < input.length; ++i) {
    if (seen[input[i]]) {
        needsReplaced.add(i);
    } else {
        seen[input[i]] = true;
    }

}

int replaceWith = 0;
for (int i : needsReplaced) {
    while (seen[replaceWith]) {
        ++replaceWith;
    }
    input[i] = replaceWith++;
} 
```

这应该在大约 2n 内运行。列表操作是常数时间，即使第二个循环看起来是嵌套的，外循环运行的次数明显少于 n 次迭代，而内循环总共只运行 n 次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T09:58:03.487

~~C# 但应该很容易转换为 java。~~上）。

```
 int[] list = { 0, 0, 6, 0, 5, 0, 4, 0, 1, 2, 3 };
        int N = list.length;

        boolean[] InList = new boolean[N];
        boolean[] Used = new boolean[N];
        int[] Unused = new int[N];

        for (int i = 0; i < N; i++) InList[list[i]] = true;
        for (int i = 0, j = 0; i < N; i++) 
            if (InList[i] == false)
                Unused[j++] = i;

        int UnusedIndex = 0;
        for (int i = 0; i < N; i++)
        {
            if (Used[list[i]] == true)
                list[i] = Unused[UnusedIndex++];
            Used[list[i]] = true;
        } 
```

编辑：试图将其从 c# 转换为 java。我这里没有java，所以它可能无法编译，但应该很容易修复。如果 java 不自动执行此操作，则可能需要将数组初始化为 false。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T08:30:53.790

我认为它甚至可以运行 time `n`。这个想法是在一个单独的数组中跟踪原始列表中使用的项目和处理期间使用的其他项目。一个可能的 java 实现如下所示：

```
int[] list = { 10, 4, 5, 7, 10, 9, 10, 9, 8, 10, 5 };

boolean[] used = new boolean[list.length];
for (int i : list) {
    used[i] = true;
}

boolean[] done = new boolean[list.length];
int nextUnused = 0;

Arrays.fill(done, false);

for (int idx = 0; idx < list.length; idx++) {
    if (done[list[idx]]) {
        list[idx] = nextUnused;
    }
    done[list[idx]] = true;
    while (nextUnused < list.length && (done[nextUnused] || used[nextUnused])) {
        nextUnused++;
    }
}

System.out.println(Arrays.toString(list)); 
```

# vb.net - 根据其他数组的值从数组中获取一个值（VB.Net）

> ID：10040915
> 
> 赞同：0
> 
> 时间：2012-04-06T08:18:46.327
> 
> 标签：vb.net, arrays

假设我有两个数组：

```
Dim RoomName() As String = {(RoomA), (RoomB), (RoomC), (RoomD), (RoomE)}
Dim RoomType() As Integer = {1, 2, 2, 2, 1} 
```

我想根据“ RoomType ”数组的条件从“ **RoomName** ”数组**中**获取一个值。例如，我想得到一个带有“ **RoomType** **= 2** ”的“RoomName”，所以算法应该随机化“RoomType”为“2”的数组的索引**，**并从索引“ **1-3** ”获取单个值范围“ 只要。

 ******是否有任何可能的方法来使用数组来解决问题，或者有没有更好的方法来做到这一点？非常感谢您的宝贵时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:16:11.360

注意：下面的代码示例使用 C#，但希望您可以阅读 vb.net 的意图

好吧，一种更简单的方法是拥有一个包含名称和类型属性的结构/类，例如：

```
 public class Room
  {
      public string Name { get; set; }
      public int Type { get; set; }

      public Room(string name, int type)
      {
          Name = name;
          Type = type;
      }
  } 
```

然后给定一组房间，您可以使用简单的 linq 表达式找到给定类型的房间：

```
var match = rooms.Where(r => r.Type == 2).Select(r => r.Name).ToList(); 
```

然后您可以从一组匹配的房间名称中找到一个随机条目（见下文）

但是，假设您要坚持使用并行数组，一种方法是从类型数组中找到匹配的索引值，然后找到匹配的名称，然后使用随机函数找到其中一个匹配值。

```
var matchingTypeIndexes = new List<int>();
int matchingTypeIndex = -1;
do
{
  matchingTypeIndex = Array.IndexOf(roomType, 2, matchingTypeIndex + 1);
  if (matchingTypeIndex > -1)
  {
    matchingTypeIndexes.Add(matchingTypeIndex);
  }
} while (matchingTypeIndex > -1);

List<string> matchingRoomNames = matchingTypeIndexes.Select(typeIndex => roomName[typeIndex]).ToList(); 
```

然后找到匹配的随机条目（来自上面生成的列表之一）：

```
var posn = new Random().Next(matchingRoomNames.Count);
Console.WriteLine(matchingRoomNames[posn]); 
```******

# c++ - 托管 C++ 中的非托管 char * 数组到托管 System::String

> ID：10040919
> 
> 赞同：1
> 
> 时间：2012-04-06T08:19:24.697
> 
> 标签：c++, c++-cli, marshalling

我无法弄清楚我的代码有什么问题。这用于从我的非托管 C++ 代码创建数组 fontNames，然后在 C# 中检索该数组。C# 代码只输出一个空白字符串数组。（这对于我使用相同方法的其他整数数组来说不是问题）。

请注意此处 exportFontNames 输出的字体名称数组在 C++ 中工作正常（打印正常）。

```
unsigned int fontNamesCount = 0;
const char ** unmanagedFontNames = o.exportFontNames(fontNamesCount);
array<String^>^ fontNames = gcnew array<String^>(fontNamesCount);
for (unsigned int i = 0; i < fontNamesCount; i++)
{
    fontNames[i] = gcnew String(unmanagedFontNames[i]);
    delete [] unmanagedFontNames[i];
}
delete [] unmanagedFontNames; 
```

任何人都可以看到结果字符串数组不包含任何内容的原因吗？据我了解， gcnew String 的构造函数应该复制非托管 char 数组，因此删除不应该影响它（删除删除没有区别）。我难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:58:34.340

尝试在循环中执行此操作：

```
fontNames[i] = marshal_as<String^>(unmanagedFontNames[i]); 
```

您还需要一些指令：

```
#include <msclr/marshal.h>
using namespace msclr::interop; 
```

# php - 使用 mcrypt 和 sha-512 加密解密？

> ID：10040922
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:20:13.337
> 
> 标签：php

我从 php.net 得到了一个代码。[http://php.net/manual/en/book.mcrypt.php](http://php.net/manual/en/book.mcrypt.php)

问题是当你加密某些东西时，下一次加密的和第一个不一样。我需要使用 sha512 或 sha256 获得完全相同的哈希值。我还需要解密它，因为该函数将用于加密客户的姓名和其他数据。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:52:59.493

不要使用 mcrypt 进行散列，而是考虑使用该[`hash()`函数](http://php.net/manual/en/function.hash.php)。

请记住，哈希是单向方法，不能“解密”。

寻找加密/解密我建议您查看 AES 加密 - 如果您将数据存储在数据库中，则可以通过 MySQL，否则`mcrypt()`也可以管理 AES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:40:15.110

我在[https://stackoverflow.com/a/173764/17404](https://stackoverflow.com/a/173764/17404)分享了我的 crypt 包装器。尝试使用它。

# sql-server - tsql grouping consecutive numbers in range

> ID：10040941
> 
> 赞同：1
> 
> 时间：2012-04-06T08:23:04.950
> 
> 标签：sql-server, tsql, count, group-by

Is there any way to group these temperature measurement in a range with consecutive group? I want to get group, time difference and count in between 0-7 and 8-12 and more than 12

```
 Date         Heat 
01/01/2012 12:00    8
01/01/2012 12:03    9
01/01/2012 12:06    5
01/01/2012 12:09    3
01/01/2012 12:12    6
01/01/2012 12:15    7
01/01/2012 12:18    1
01/01/2012 12:21    12
01/01/2012 12:24    28
01/01/2012 12:27    25
01/01/2012 12:30    20
01/01/2012 12:33    20
01/01/2012 12:36    20
01/01/2012 12:39    12
01/01/2012 12:42    6
01/01/2012 12:45    3
01/01/2012 12:48    5
01/01/2012 12:51    7
01/01/2012 12:54    11
01/01/2012 12:57    12
01/01/2012 13:00    6 
```

The result should be:

```
0-7   (01/01/2012 12:06-01/01/2012 12:18)   5
/* Rows of dataset:
01/01/2012 12:06    5
01/01/2012 12:09    3
01/01/2012 12:12    6
01/01/2012 12:15    7
01/01/2012 12:18    1    
*/
0-7   (01/01/2012 12:42-01/01/2012 12:51)   5
/* Rows of dataset:
01/01/2012 12:42    6
01/01/2012 12:45    3
01/01/2012 12:48    5
01/01/2012 12:51    7  
*/
8-12   (01/01/2012 12:00-01/01/2012 12:03)   2
/* Rows of dataset:
01/01/2012 12:00    8
01/01/2012 12:03    9
*/
more then 12   (01/01/2012 12:24-01/01/2012 12:36)   5
/* Rows of dataset:
01/01/2012 12:24    28
01/01/2012 12:27    25
01/01/2012 12:30    20
01/01/2012 12:33    20
01/01/2012 12:36    20
*/

8-12   (01/01/2012 12:21)   1
/* Rows of dataset:
01/01/2012 12:21    12     */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:50:25.650

注意：因为处理顺序`RANK/DENSE_RANK`是`PARTITION BY`then `ORDER BY`，所以这些函数在这种情况下没有用。也许，在某个时间点，MS 会因此引入一种补充语法： `[DENSE_]RANK() OVER(ORDER BY fields PARTITION BY fields)`so`ORDER BY`将首先被处理，然后`PARTITION BY`.

1）第一个解决方案（SQL2005+）

```
 DECLARE @TestData TABLE
    (
        Dt      SMALLDATETIME PRIMARY KEY,
        Heat    TINYINT NOT NULL
    );

    INSERT  @TestData(Dt, Heat)
    VALUES
            SELECT '2012-01-01T12:00:00', 8  UNION ALL SELECT '2012-01-01T12:03:00', 9  UNION ALL SELECT '2012-01-01T12:06:00', 5
UNION ALL   SELECT '2012-01-01T12:09:00', 3  UNION ALL SELECT '2012-01-01T12:12:00', 6  UNION ALL SELECT '2012-01-01T12:15:00', 7
UNION ALL   SELECT '2012-01-01T12:18:00', 1  UNION ALL SELECT '2012-01-01T12:21:00', 12 UNION ALL SELECT '2012-01-01T12:24:00', 28
UNION ALL   SELECT '2012-01-01T12:27:00', 25 UNION ALL SELECT '2012-01-01T12:30:00', 20 UNION ALL SELECT '2012-01-01T12:33:00', 20
UNION ALL   SELECT '2012-01-01T12:36:00', 20 UNION ALL SELECT '2012-01-01T12:39:00', 12 UNION ALL SELECT '2012-01-01T12:42:00', 6
UNION ALL   SELECT '2012-01-01T12:45:00', 3  UNION ALL SELECT '2012-01-01T12:48:00', 5  UNION ALL SELECT '2012-01-01T12:51:00', 7
UNION ALL   SELECT '2012-01-01T12:54:00', 11 UNION ALL SELECT '2012-01-01T12:57:00', 12 UNION ALL SELECT '2012-01-01 13:00:00', 6;

    SET STATISTICS IO ON;

    WITH CteSource
    AS
    (
            SELECT  a.*,
                    CASE 
                        WHEN a.Heat >= 0 AND a.Heat <= 7 THEN 1
                        WHEN a.Heat >= 8 AND a.Heat <= 12 THEN 2
                        WHEN a.Heat > 12 THEN 3
                    END AS Grp,
                    ROW_NUMBER() OVER(ORDER BY a.Dt) AS RowNum
            FROM    @TestData a
    ),  CteRecursive
    AS
    (
            SELECT  s.RowNum,
                    s.Dt,
                    s.Heat,
                    s.Grp,
                    1 AS DENSE_RANK_OVER_ORDERBY_PARTITIONBY
            FROM    CteSource s
            WHERE   s.RowNum = 1
            UNION ALL
            SELECT  crt.RowNum,
                    crt.Dt,
                    crt.Heat,
                    crt.Grp,
                    CASE 
                        WHEN crt.Grp = prev.Grp THEN prev.DENSE_RANK_OVER_ORDERBY_PARTITIONBY 
                        ELSE prev.DENSE_RANK_OVER_ORDERBY_PARTITIONBY + 1
                    END
            FROM    CteSource crt
            INNER JOIN CteRecursive prev ON crt.RowNum = prev.RowNum + 1
    )
    SELECT  r.DENSE_RANK_OVER_ORDERBY_PARTITIONBY, 
            MAX(r.Grp) AS Grp,
            COUNT(*) AS Cnt,
            MIN(r.Dt) AS MinDt,
            MAX(r.Dt) AS MaxDt
    FROM    CteRecursive r
    GROUP BY r.DENSE_RANK_OVER_ORDERBY_PARTITIONBY; 
```

结果：

```
DENSE_RANK_OVER_ORDERBY_PARTITIONBY Grp         Cnt         MinDt                   MaxDt
----------------------------------- ----------- ----------- ----------------------- -----------------------
1                                   2           2           2012-01-01 12:00:00     2012-01-01 12:03:00
2                                   1           5           2012-01-01 12:06:00     2012-01-01 12:18:00
3                                   2           1           2012-01-01 12:21:00     2012-01-01 12:21:00
4                                   3           5           2012-01-01 12:24:00     2012-01-01 12:36:00
5                                   2           1           2012-01-01 12:39:00     2012-01-01 12:39:00
6                                   1           4           2012-01-01 12:42:00     2012-01-01 12:51:00
7                                   2           2           2012-01-01 12:54:00     2012-01-01 12:57:00
8                                   1           1           2012-01-01 13:00:00     2012-01-01 13:00:00 
```

2）第二种解决方案（SQL2012；更好的性能）

```
SELECT  d.DENSE_RANK_OVER_ORDERBY_PARTITIONBY,
        MAX(d.Grp) AS Grp,
        MIN(d.Dt) AS MinDt,
        MAX(d.Dt) AS MaxDt
FROM
(
        SELECT  c.*,
                1+SUM(c.IsNewGroup) OVER(ORDER BY c.Dt) AS DENSE_RANK_OVER_ORDERBY_PARTITIONBY
        FROM
        (
                SELECT  b.*,
                        CASE 
                            WHEN LAG(b.Grp) OVER(ORDER BY b.Dt) <> b.Grp THEN 1  
                            ELSE 0
                        END
                        AS IsNewGroup
                FROM    
                (
                        SELECT  a.*,
                                CASE 
                                    WHEN a.Heat >= 0 AND a.Heat <= 7 THEN 1
                                    WHEN a.Heat >= 8 AND a.Heat <= 12 THEN 2
                                    WHEN a.Heat > 12 THEN 3
                                END AS Grp
                        FROM    @TestData a
                ) b
        ) c
) d
GROUP BY d.DENSE_RANK_OVER_ORDERBY_PARTITIONBY; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:37:52.500

这是 SQL Server 2005 或更新版本的替代解决方案：

```
WITH auxiliary (HeatID, MinHeat, MaxHeat, HeatDescr) AS (
  SELECT 1, 0 , 7   , '0-7'  UNION ALL
  SELECT 2, 8 , 12  , '8-12' UNION ALL
  SELECT 3, 13, NULL, 'more than 12'
),
datagrouped AS (
  SELECT
    d.*,
    a.HeatDescr,
    grp = ROW_NUMBER() OVER (                      ORDER BY d.Date)
        - ROW_NUMBER() OVER (PARTITION BY a.HeatID ORDER BY d.Date)
  FROM data d
    INNER JOIN auxiliary a
      ON d.Heat BETWEEN a.MinHeat AND ISNULL(a.MaxHeat, 0x7fffffff)
)
SELECT
  HeatDescr,
  DateFrom  = MIN(Date),
  DateTo    = MAX(Date),
  ItemCount = COUNT(*)
FROM datagrouped
GROUP BY
  HeatDescr, grp
ORDER BY
  MIN(Date) 
```

其中`data`定义如下：

```
CREATE TABLE data (Date datetime, Heat int);

INSERT INTO data (Date, Heat)
SELECT '01/01/2012 12:00',  8  UNION ALL
SELECT '01/01/2012 12:03',  9  UNION ALL
SELECT '01/01/2012 12:06',  5  UNION ALL
SELECT '01/01/2012 12:09',  3  UNION ALL
SELECT '01/01/2012 12:12',  6  UNION ALL
SELECT '01/01/2012 12:15',  7  UNION ALL
SELECT '01/01/2012 12:18',  1  UNION ALL
SELECT '01/01/2012 12:21',  12 UNION ALL
SELECT '01/01/2012 12:24',  28 UNION ALL
SELECT '01/01/2012 12:27',  25 UNION ALL
SELECT '01/01/2012 12:30',  20 UNION ALL
SELECT '01/01/2012 12:33',  20 UNION ALL
SELECT '01/01/2012 12:36',  20 UNION ALL
SELECT '01/01/2012 12:39',  12 UNION ALL
SELECT '01/01/2012 12:42',  6  UNION ALL
SELECT '01/01/2012 12:45',  3  UNION ALL
SELECT '01/01/2012 12:48',  5  UNION ALL
SELECT '01/01/2012 12:51',  7  UNION ALL
SELECT '01/01/2012 12:54',  11 UNION ALL
SELECT '01/01/2012 12:57',  12 UNION ALL
SELECT '01/01/2012 13:00',  6; 
```

对于上述示例，查询提供以下输出：

```
HeatDescr     DateFrom             DateTo               ItemCount 
------------  -------------------  -------------------  --------- 
8-12          2012-01-01 12:00:00  2012-01-01 12:03:00  2    
0-7           2012-01-01 12:06:00  2012-01-01 12:18:00  5    
8-12          2012-01-01 12:21:00  2012-01-01 12:21:00  1    
more than 12  2012-01-01 12:24:00  2012-01-01 12:36:00  5    
8-12          2012-01-01 12:39:00  2012-01-01 12:39:00  1    
0-7           2012-01-01 12:42:00  2012-01-01 12:51:00  4    
8-12          2012-01-01 12:54:00  2012-01-01 12:57:00  2    
0-7           2012-01-01 13:00:00  2012-01-01 13:00:00  1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:37:25.873

你应该使用 RANK() 来达到你的目标

[http://msdn.microsoft.com/en-us/library/ms176102.aspx](http://msdn.microsoft.com/en-us/library/ms176102.aspx)

就像是

```
SELECT date, heat, RANK() OVER (PARTITION BY heat ORDER BY date DESC) AS Rank
FROM tbl 
```

然后，您可以在之后对其进行 GROUP，或者进行更多子选择并将它们联合起来，具体取决于您的结果。

# zipstream - convert ZipOutputStream into ZipInputStream using PipedStream in java

> ID：10040943
> 
> 赞同：1
> 
> 时间：2012-04-06T08:23:09.510
> 
> 标签：zipstream

i want to convert a ZipOutputStream into ZipInputStream using PipedOutputStream and PipedInputStream. I am receiving ZipOutputStream from DataHandler, and i don't want to write it on file and then open and read it, rather i want to convert this ZipOutputStream into ZipInputStream for my further processing, like extracting ZipEntry and save it in some file.

```
public String documentReceived(@WebParam(name = "document")final DataHandler dataHandler) {
...
   ZipOutputStream zout = new ZipOutputStream(dataHandler.getOutputStream());

   final PipedInputStream pin = new PipedInputStream();
   final PipedOutputStream pout = new PipedOutputStream(pin);

   ??? need help here to convert a ZipOutputStream into
   ??? ZipInputStream

...
} 
```

Any help will be appreciated... thanks

# c# - 报表查看器无法访问其他数据库服务器中的报表

> ID：10040945
> 
> 赞同：1
> 
> 时间：2012-04-06T08:23:38.953
> 
> 标签：c#, asp.net, ssrs-2008

我在应用程序服务器中发布了一个在 asp.net 3.5 中的 Web 应用程序。我在需要从 Web 应用程序访问的数据库服务器中部署了几个 SSRS 报告。两个服务器都在同一个网络中。我正在使用报告查看器控件显示报告，我正在动态传递报告路径。我还从后面的代码发送登录凭据。

问题是报告被正确识别并且也显示了正确的报告参数。但是当我单击查看报告按钮时没有数据出现。我有 Sql server 2008 r2 和报告查看器版本 9.0

请帮我解决一下这个。这是一个代码片段...

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ReportViewer1.ShowCredentialPrompts = false;

        IReportServerCredentials irsc = 
            new CustomReportCredentials("user", "pass", "domain");

        ReportViewer1.ServerReport.ReportServerCredentials = irsc;
        ReportViewer1.ServerReport.ReportServerUrl = 
            new Uri("http://72.0.170.205:80/ReportServer");

        ReportViewer1.ShowParameterPrompts = true;
        ReportViewer1.ShowPrintButton = true;
        ReportViewer1.ProcessingMode = ProcessingMode.Remote;

        ReportViewer1.ServerReport.Refresh();

        ReportViewer1.ServerReport.ReportPath = Request.QueryString["val"];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:43:13.380

[您是否使用http://72.0.170.205:80/Reports](http://72.0.170.205:80/Reports)上的相同凭据检查报告是否运行正常？

不知道这是否有任何帮助，但这是我在实现中看到的差异：

*   我不调用 ReportViewer1.ServerReport.Refresh();
*   我称之为 this.RegisterRequiresViewStateEncryption(); （有时不得不禁用它）
*   我的 reportDisplay 应用程序不是根应用程序。由于冲突，早在 SSRS2005 中，我不得不在 web.config 中为其会话 cookie 使用不同的名称。从那以后一直保持着

    ```
     <sessionState cookieless="UseCookies" cookieName="ASP.NET_SessionId.myCustomName"/> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T09:50:17.730

Protected Sub Load_Report() Dim Connection As New SqlConnection(Connection_String) *'服务器连接字符串*

```
 Dim Data_Table As New DataTable("DataTable1") *'Create New Data Table in DataSet having same columns as are there in your Datatable*
    Dim Query As String
    Query = "SELECT Caption,Mobile,Age,City FROM Bond.Book"
    Dim Command As New SqlCommand(Query, Connection)
    Dim Table_Adapter As New SqlDataAdapter(Command)
    Table_Adapter.Fill(Data_Table)
    ReportViewer1.ProcessingMode = ProcessingMode.Local
    ReportViewer1.LocalReport.ReportPath = Server.MapPath("Book.rdlc")
    ReportViewer1.LocalReport.DataSources.Clear()
    ReportViewer1.LocalReport.DataSources.Add(New ReportDataSource("Book_DataSet", Data_Table))
    ReportViewer1.LocalReport.Refresh()
End Sub 
```

这对我有用。我能够在服务器上加载报表查看器并查看服务器数据

# php - 基于 Cookie 的登录系统

> ID：10040947
> 
> 赞同：1
> 
> 时间：2012-04-06T08:23:54.497
> 
> 标签：php, security

我正在考虑使用 cookie-ip 匹配系统自动登录用户，如果他们在已知系统上并且他们的 ip 没有改变，他们不必输入他们的登录数据。

这个政策是体面的还是我打开了一个重大的安全漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:41:27.630

就某些人使用公共机器而言，这可能是一个潜在的安全问题。所以让它成为可选的。您还需要考虑某些机器使用动态 IP 地址。您提出的方法在这种情况下不起作用。

但最重要的是**不要**将密码存储在 cookie 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:30:41.913

只需创建“注销”链接，在您删除他们的 cookie 之前，选择他们的电子邮件并用哈希发送给他们的链接，这会重新生成他们的 cookie。所以他们可以在公共机器上注销。

在通过数据库处理之前清理 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T08:43:19.033

这当然是一个安全漏洞，因为如果用户登录到您的网站并忘记注销，任何使用这台计算机（在计算机上具有相同帐户）的人都可以登录到您的网站。

请注意，所有网站也会出现此问题，只是它通常仅限于会话生命周期。

既然所有网站都是这样工作的，我不认为这是一个真正的安全漏洞，但它肯定会鼓励用户对安全性漠不关心。这是一个椅子/键盘接口安全漏洞：P

正如@Ed Heal 所说，不要将密码存储在 cookie 中，而是存储一个随机令牌，而不是将其保存在数据库中。登录过程应检查存储在 DB 中的 cookie 是否与 cookie 上的相同。

# oop - Optimum Way To Restore Domain Object

> ID：10040950
> 
> 赞同：3
> 
> 时间：2012-04-06T08:24:04.693
> 
> 标签：oop, domain-driven-design, factory-pattern

This is such a simple and common scenario I wonder how did I managed until now and why I have problems now.

I have this object (part of the Infrastructure assembly)

```
public class Queue {}

public class QueueItem
{
    public QueueItem(int blogId,string name,Type command,object data)
    {
        if (name == null) throw new ArgumentNullException("name");
        if (command == null) throw new ArgumentNullException("command");
        BlogId = blogId;
        CommandType = command;
        ParamValue = data;
        CommandName = name;
        AddedOn = DateTime.UtcNow;
    }

    public Guid Id { get; internal set; }
    public int BlogId { get; private set; }
    public string CommandName { get; set; }
    public Type CommandType { get; private set; }
    public object ParamValue { get; private set; }
    public DateTime AddedOn { get; private set; }
    public DateTime? ExecutedOn { get; private set; }
    public void ExecuteIn(ILifetimeScope ioc)
    {
        throw new NotImplementedException();
    }
} 
```

This will be created in another assembly like this

```
 var qi = new QueueItem(1,"myname",typeof(MyCommand),null); 
```

Nothing unusal here. However, this object will be sent t oa repository where it will be persisted.The **Queue** object will ask the repository for items. The repository should re-create QueueItem objects.

However, as you see, the QueueItem properties are invariable, the **AddedOn** property should be set only once when the item is created. The **Id** property will be set by the Queue object (this is not important).

The question is how should I recreate the QueueItem in the repository? I can have another constructor which will require every value for ALL the properties, but I don't want that constructor available for the assembly that will create the queue item initially. The repository is part of a different assembly so internal won't work.

I thought about providing a factory method class QueueItem { /* ..rest of definitions.. */

```
 public static QueueItem Restore(/* list of params*/){}
   } 
```

which at least clears the intent, but I don't know why I don't like this approach. I could also enforce the item creation only by the Queue , but that means to pass the Queue as a dependency to the repo which again isn't something I'd like. To have a specific factory object for this, also seems way overkill.

Basically my question is: **what is the optimum way to recreate an object in the repository, *without exposing that specific creational functionality* to another consumer object**.

**Update**

It's important to note that by repository I mean the pattern itself as an abstraction, not a wrapper over an ORM. It doesn't matter how or where the domain objects are persisted. It matters how can be re-created by the repository. Another important thing is that my **domain model** *is different* from the **persistence model**. I do use a RDBMS but I think this is just an implementation detail which should not bear any importance, since I'm looking for way that doesn't depend on a specific storage access.

While this is a specific scenario, it can applied to basically every object that will be restored by the repo.

**Update2**

Ok I don't know how I could forget about AutoMapper. I was under the wrong impression it can't map private fields/setter but it can, and I think this is the best solution.

In fact I can say the optimum solutions (IMO) are in order:

1.  Directly deserializing, if available.
2.  Automap.
3.  Factory method on the domain object itself.

The first two don't require the object to do anyting in particular, while the third requires the object to provide functionality for that case (a way to enter valid state data). It has clear intent but it pretty much does a mapper job.

**Answer** *Updated*

To answer myself, in this case the optimum way is to use a factory method. Initially I opted for the Automapper but I found myself using the factory method more often. Automapper can be useful sometimes but in quite a lot of cases it's not enough.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:22:13.127

ORM 框架会为您解决这个问题。您只需要告诉它重新水化一个对象，然后域类的常规实例就会提供给您（有时您只需将属性声明为虚拟或受保护，例如在 NHibernate 中）。原因是因为在幕后，它们通常对派生自您的基类的代理对象进行操作，从而使您可以保持这些基类的完整性。

但是，如果您想实现自己的持久层，那就另当别论了。在不破坏对象中最初定义的范围约束的情况下从数据库中重新水化对象可能涉及反射。您还必须考虑很多附带的问题：如果您的对象引用了另一个对象，则必须先重新水化该对象，等等。

您可以查看该教程：[构建您自己的数据访问层](http://davybrion.com/blog/2009/08/build-your-own-data-access-layer-hydrating-entities/)，尽管我不建议在大多数情况下重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:08:38.613

您谈到了对象本身的工厂方法。但是 DDD 声明实体应该由工厂创建。所以你应该有一个 QueueItemFactory 可以创建新的 QueueItems 并恢复现有的 QueueItems。

> 好的，我不知道我怎么能忘记 AutoMapper。

我希望我能忘记 AutoMapper。只是看着可怕的 API 就让我脊背发凉。

# javascript - 如何处理 ASP.NET AJAX 返回的 JSON 日期？

> ID：10040951
> 
> 赞同：3
> 
> 时间：2012-04-06T08:24:08.650
> 
> 标签：javascript, jquery, asp.net, ajax

JSON 中如何处理日期的问题是直接调用 ASP.NET AJAX Web 服务和页面方法时可能出现的比较麻烦的问题之一。与该语言中的所有其他数据类型不同，JavaScript 没有提供表示日期的声明方法。因此，将它们嵌入 JSON 需要一些花哨的步法。

我将尝试解释 JSON 中的日期到底有什么问题。

**有什么问题？**

根本问题是 JavaScript 没有提供一种以声明方式表达 Date 对象的方法。您之前可能已经将其描述为（缺少）日期文字。什么是字面量？为了说明，这些是其他几种数据类型的文字：

```
// String
'foo';

// Number
3.14;

// Boolean
true;

// Array
[1, 2, 3, 5, 7];

// Object
{ pi: 3.14, phi: 1.62 }; 
```

不幸的是，当涉及到日期时，缺少文字意味着创建日期的唯一方法是显式初始化 Date 对象：

```
// Correct.
new Date('4/26/09');

// Correct (the month is 0 indexed, hence the 3).
new Date(2009, 3, 26);

// Incorrect. This is a string, not a Date.
'4/26/09'; 
```

虽然在编写客户端 JavaScript 代码时这个限制很好，但它让我们没有一种在 JSON 对象中传输日期的好方法。缺少日期文字是一个问题，有人可以提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:30:05.527

考虑一下为什么要首先将 DateTime 发送到客户端。大多数情况下，您会显示它的字符串表示形式，并且不需要正确的 JavaScript Date 对象。此外，如果您最终得到一个 JavaScript Date 对象，您可能会使用附加代码或 JavaScript 库以用户友好的格式显示它。尽管我很欣赏一个聪明的解决方法，但我宁愿完全避免这个问题。我建议不要跳过所有这些循环来在客户端实例化一个 JavaScript Date 对象然后对其进行格式化，我建议只需返回一个格式化的字符串。例如，

```
[System.Web.Script.Services.ScriptService]
public class DateService : System.Web.Services.WebService
{
[WebMethod]
public string GetDate()
{
return new DateTime(2009, 4, 26).ToLongDateString();
}
} 
```

现在，调用该服务将返回此 JSON：

```
{"d":"Sunday, April 26, 2009"} 
```

没有更多的正则表达式。不再有 JavaScript 日期对象。无需再担心在客户端格式化数据。更好的是，没有功能丢失。如果我们需要实例化 Dates，我们仍然可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:49:39.123

[我最近在这里](http://thesoftwarecondition.com/blog/2012/03/22/json-datetime-serialisation-gotchas-2/)写了一篇关于这类事情的博客文章……这是一个雷区！在工作中，我们决定使用[此处](http://www.w3.org/TR/NOTE-datetime)找到的 W3C 格式的变体，将 MVC3 服务中的 DateTimes 和 DateTimeOffsets 作为字符串传输。对于 DateTime，我们使用 YYYY-MM-DDThh:mm:ss，对于 DateTimeOffsets，我们使用 YYYY-MM-DDThh:mm:ss+TZD（这些格式说明符是 W3C，而不是 .NET）。

但是这个问题的答案确实取决于你想对日期做什么。正如另一个回复所暗示的那样，如果您只想将其显示给最终用户，那么您可能只需通过网络发送一个人类可读的字符串即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:37:45.600

我使用两种方法，一种是将其设为 Date.UTC()，另一种是将其设为 Ticks。他们都工作。

将其转换为 Json Ticks 的函数

```
 private static readonly long UnixEpochTicks = (new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)).Ticks;

  public static long cOnlyDate(long Ticks)
  {
     return (864000000000 * (Ticks / 864000000000));
  }

  public static long ToJsonTicks(DateTime value)
  {
    return (cOnlyDate(value.ToUniversalTime().Ticks) - UnixEpochTicks) / 10000;
  } 
```

结果会像 `{dt : 28839281}`

以及我如何将其转换为日期

```
public static string ToJsonDate(DateTime value)
{
    return string.Format("Date.UTC({0}, {1}, {2})", value.Year, value.Month-1, value.Day);
} 
```

结果会像 `{d : Date.UTC(2012, 2, 11)}`

ps，*我现在只是测试“未知”的解决方案，不适用于我的代码。*

# ruby - Press TAB and then ENTER key in Selenium WebDriver with Ruby

> ID：10040953
> 
> 赞同：9
> 
> 时间：2012-04-06T08:24:18.250
> 
> 标签：ruby, tabs, selenium-webdriver, keypress, enter

I am doing automated testing using Selenium WebDriver with Ruby. I need to click a button. I cannot get the button element by id or css or xpath as the button is transparent. I would like to use Tab and Enter key to press the button.

I can use Tab key to get the button as below:

```
@element.send_keys :tab
@element --> any javascript element visible in the browser 
```

But how do I use the Enter key on the button?

Basically I need to achieve press Tab key and then press Enter key to click the button.

I am using Selenium WebDriver `@driver = Selenium::WebDriver.for :firefox`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T05:16:45.607

在 Ruby user1316 的代码看起来像

```
driver.action.send_keys(elementVisible, :tab).send_keys(elementVisible, :return).perform 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T09:03:34.060

请记住摘录：

> 我可以使用 tab 键来获取按钮
> 
> @element.send_keys :tab
> 
> @element --> 浏览器中可见的任何 javascript 元素
> 
> 但是我如何使用按钮上的回车键？

为了使用按钮上的回车键，您可以[在此处](https://stackoverflow.com/a/6661301/948641)尝试使用 Ruby 提供的解决方案之一。这基本上是关于发送`:return`值而不是`:enter`值，即 `@element.send_keys :return`和一些附加信息。

**更新：**

我可以在 Java 中提供一些代码，尝试使用[此处](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions#Getting_started_%28short_how-to%29)提供的信息从概念上实现问题。您可以尝试翻译相应的 Ruby Selenium API。

编码：

> 动作生成器 = 新动作（驱动程序）；
> 
> builder.sendKeys(elementVisible, Keys.TAB).sendKeys(Keys.RETURN);
> 
> 操作 submitTheTransperentButton = builder.build();
> 
> submitTheTransperentButton.perform();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-27T02:12:29.060

利用`Selenium::WebDriver::Keys::KEYS[:tab]`

参考：[https ://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys](https://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T04:09:11.523

用红宝石发送ENTER：

```
@browser.action.send_keys("\n").perform 
```

# python - 相当于 Delphi 中的 Python DocTest？

> ID：10040955
> 
> 赞同：4
> 
> 时间：2012-04-06T08:24:27.163
> 
> 标签：python, delphi, doctest, dunit

Delphi 是否有任何等效的 DocTest。我使用 DUnit，但我喜欢 Python DocTest 的想法。我在[这里](https://stackoverflow.com/questions/3965547/how-come-theres-no-c-sharp-equivalent-of-pythons-doctest-feature)看到了一些答案，但我认为，对于简单的功能，像 DocTest 这样的可能没问题。我的目标是在编写函数时在注释标题中定义我的测试。像 ：

```
function Plus(i1, i2 : integer) : integer;
//>>> Check( Plus(1, 3) = 4)
begin
  result := i1 + i2;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:04:40.557

这个想法是您可以使用“控制台”将一些结果输出到测试代码，然后将输出文本内容与预期值进行比较。

例如，看看[伟大的 DWSScript 开源项目提供的回归测试](http://code.google.com/p/dwscript/source/browse/#svn%2Ftrunk%2FTest%253Fstate%253Dclosed)。您会发现一些 .pas 文件和一些相关的 .txt 文件。

例如 abs.pas：

```
var vf = 1.5;
var vi = 2;

var i : Integer := Abs(-vi);
PrintLn(i);
PrintLn(Abs(vi));

var f : Float := Abs(-vf);
PrintLn(f);
PrintLn(Abs(vf)); 
```

以及对应的abs.txt内容：

```
2
2
1.5
1.5 
```

AFAIK 目前还没有现有的解决方案集成到 Delphi 世界中。

在注释中编写测试将缺少 IDE 自动完成功能，并且在某种程度上破坏了对象 pascal 设计。使用 DWS 会很容易，但需要调用命令行 Delphi 编译器。老实说，我看不出拥有自己的一组专门用于测试的单元有什么问题。带有固定和随机值的循环的一小段代码`for..to`将比一组固定参数具有更好的测试覆盖率。

# sql-server - Error in create master key

> ID：10040958
> 
> 赞同：0
> 
> 时间：2012-04-06T08:24:37.587
> 
> 标签：sql-server, vb.net

I want to do a master key, but the following error occurs

my error is

```
Msg 170, Level 15, State 1, Line 1
Line 1: Incorrect syntax near 'master'. 
```

my code is

```
USE EncryptTest 
GO
create  master key encryption by password='al4jklklkl@kjkjkFdi';
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:19:13.233

```
 USE AdventureWorks2012;
    CREATE MASTER KEY ENCRYPTION BY PASSWORD = '23987hxJ#KL95234nl0zBe';
    GO 
```

# mongodb - MongoDB 的更新原子性是否适用于查询和修改？

> ID：10040960
> 
> 赞同：8
> 
> 时间：2012-04-06T08:25:01.417
> 
> 标签：mongodb

MongoDB 支持原子更新。即我可以确定，当文档更新时，没有其他更新会覆盖我之前的更改。我的问题与查询和更新语句的组合有关，下面显示的示例最好地说明了这一点。

```
db.foo.update(
{ state : 1, players: { $size: 2 } } , 
{ $push: { players : { new player document } } }, 
false , true ); 
```

在上面的例子中，如果玩家数量等于 2，我只想将一个新玩家推送到一个玩家集合中。鉴于上面的查询和更新语句，是否有可能两个同时更新都将一个玩家推送到同一个文档, 因为在阅读文档时它的 player $size 是 2? 即原子性是否跨越查询和更新语句的更新部分？

**编辑**更深入的事件序列：

考虑同时触发两次相同的更新（U1 和 U2）。以下事件序列是否可能？

1.  U1 发现文档 #1 与更新语句的查询部分匹配。
2.  U2 发现文档 #1 与更新语句的查询部分匹配。
3.  U1 在文档 #1 中推了一个新玩家。
4.  U2 在文件 #1 中推了一个新玩家。

最终结果是文档 #1 包含的玩家比预期的多，因为 U1 和 U2 都认为文档 #1 仅包含两个玩家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:54:46.687

我在 mongodb-user 组上问过这个问题。[http://groups.google.com/group/mongodb-user/browse_thread/thread/e61e220dc0f6f64c](http://groups.google.com/group/mongodb-user/browse_thread/thread/e61e220dc0f6f64c)

根据 Marc（在 10gen 工作）的回答，我描述的情况不会发生。

> 您描述的情况是不可能的；两个更新都没有修改同一个文档的危险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:14:17.640

更新：不知道我的知识了……见[“ABA Nuance”](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-TheABANuance)。请不要接受这个答案（或我在下面的评论），因为它可能不正确。很想得到纠正。

* * *

您对 atomic 的解释不正确（*我可以肯定，当文档更新时，没有其他更新会覆盖我之前的更改*）。其他更新可以（并且将会）覆盖您的更改。但他们不会以会干扰查询完整性的方式进行操作。

重要的是要知道 MongoDB 更新[在单个文档上是原子的](http://www.mongodb.org/display/DOCS/Atomic+Operations)。因此，当文档与您的查询匹配时，它会被“锁定”并准备好进行更新。请注意，您的更新 ( `$push`) 在被锁定的同一个文档中工作。更新完成后，锁被释放。

我不确定我是否理解“*原子性是否跨越查询和更新语句的更新部分*”，但是：原子意味着**其他**查询不能与我们的查询混淆。我们的查询可以更改本身“锁定”的数据。

免责声明：我不了解 MongoDB 用于确保这种原子性的内部机制，因此从技术角度来看（尤其是与锁定相关的）可能缺乏这种描述 - 但它在概念上是有效的。从外部角度来看，这就是它的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:46:45.700

根据您写下的事件顺序，您确实可以拥有太多的玩家。更新的“查找”和“更新”的工作方式非常类似于自己使用“查找”然后对您正在迭代的每个文档进行“更新”。您可能想看看“$atomic”运算符：[http ://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-ApplyingtoMultipleObjectsAtOnce](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-ApplyingtoMultipleObjectsAtOnce)

# opengl - Opengl像素完美2D绘图

> ID：10040961
> 
> 赞同：31
> 
> 时间：2012-04-06T08:25:15.130
> 
> 标签：opengl, drawing, pixel-perfect

我正在研究二维引擎。它已经工作得很好，但我不断收到像素错误。

例如，我的窗口是 960x540 像素，我画了一条从 (0, 0) 到 (959, 0) 的线。我希望扫描线 0 上的每个像素都将设置为一种颜色，但不是：最右边的像素没有被绘制。当我垂直绘制到像素 539 时，同样的问题。我真的需要绘制到 (960, 0) 或 (0, 540) 来绘制它。

由于我出生在像素时代，我坚信这不是正确的结果。当我的屏幕为 320x200 像素大时，我可以从 0 到 319 以及从 0 到 199 进行绘制，我的屏幕将是满的。现在我最终得到了一个未绘制右/下像素的屏幕。

这可能是由于不同的原因：我期望opengl线原语从一个像素绘制到一个包含像素的像素，最后一个像素实际上是独占的？是这样吗？我的投影矩阵不正确？我有一个错误的假设，即当我有一个 960x540 的后备缓冲区时，实际上还有一个像素？还有什么？

有人可以帮帮我吗？我一直在研究这个问题很长时间，每次我认为没问题的时候，我发现它实际上不是。

这是我的一些代码，我试图尽可能地精简它。当我调用我的 line-function 时，每个坐标都添加了 0.375、0.375 以使其在 ATI 和 nvidia 适配器上都正确。

```
int width = resX();
int height = resY();

for (int i = 0; i < height; i += 2)
    rm->line(0, i, width - 1, i, vec4f(1, 0, 0, 1));
for (int i = 1; i < height; i += 2)
    rm->line(0, i, width - 1, i, vec4f(0, 1, 0, 1));

// when I do this, one pixel to the right remains undrawn

void rendermachine::line(int x1, int y1, int x2, int y2, const vec4f &color)
{
    ... some code to decide what std::vector the coordinates should be pushed into
    // m_z is a z-coordinate, I use z-buffering to preserve correct drawing orders
    // vec2f(0, 0) is a texture-coordinate, the line is drawn without texturing
    target->push_back(vertex(vec3f((float)x1 + 0.375f, (float)y1 + 0.375f, m_z), color, vec2f(0, 0)));
    target->push_back(vertex(vec3f((float)x2 + 0.375f, (float)y2 + 0.375f, m_z), color, vec2f(0, 0)));
}

void rendermachine::update(...)
{
    ... render target object is queried for width and height, in my test it is just the back buffer so the window client resolution is returned
    mat4f mP;
    mP.setOrthographic(0, (float)width, (float)height, 0, 0, 8000000);

    ... all vertices are copied to video memory

    ... drawing
    if (there are lines to draw)
        glDrawArrays(GL_LINES, (int)offset, (int)lines.size());

    ...
}

// And the (very simple) shader to draw these lines

// Vertex shader
    #version 120
    attribute vec3 aVertexPosition;
    attribute vec4 aVertexColor;
    uniform mat4 mP;
    varying vec4 vColor;
    void main(void) {
        gl_Position = mP * vec4(aVertexPosition, 1.0);
        vColor = aVertexColor;
    }

// Fragment shader
    #version 120
    #ifdef GL_ES
    precision highp float;
    #endif
    varying vec4 vColor;
    void main(void) {
        gl_FragColor = vColor.rgb;
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-06T09:29:50.060

在 OpenGL 中，使用“钻石出口”规则对线条进行光栅化。这和说结束坐标是独占的*差不多，但不完全是……*

这就是 OpenGL 规范必须说的： [http ://www.opengl.org/documentation/specs/version1.1/glspec1.1/node47.html](http://www.opengl.org/documentation/specs/version1.1/glspec1.1/node47.html)

还可以查看 OpenGL 常见问题解答，[http://www.opengl.org/archives/resources/faq/technical/rasterization.htm](http://www.opengl.org/archives/resources/faq/technical/rasterization.htm)，项目“14.090 如何获得线条的精确像素化？”。它说“OpenGL 规范允许使用广泛的线渲染硬件，因此可能根本无法实现精确的像素化。”

许多人会争辩说你根本不应该在 OpenGL 中使用线条。他们的行为是基于古代 SGI 硬件的工作方式，而不是基于什么是有意义的。（宽度 >1 的线条几乎不可能以看起来不错的方式使用！）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T08:35:00.467

请注意，OpenGL 坐标空间没有整数的概念，一切都是浮点数，OpenGL 像素的“中心”实际上是在 0.5,0.5 而不是左上角。因此，如果你想要一条从 0,0 到 10,10 的 1px 宽的线，你真的必须画一条从 0.5,0.5 到 10.5,10.5 的线。

如果您打开抗锯齿，这一点尤其明显，如果您有抗锯齿并且您尝试从 50,0 到 50,100 绘制，您可能会看到一条模糊的 2px 宽线，因为该线位于两个像素之间。

# java - 数据库值分离

> ID：10040964
> 
> 赞同：0
> 
> 时间：2012-04-06T08:25:35.997
> 
> 标签：java, database, resultset

我正在开发一个应用程序来创建图表。我有两种类型的查询。
**类型 1**只返回一个值[Double]
**类型 2**返回多个值[Strings,Value]

我已经包含了两个样本结果

> **类型 1：**
> **医院死亡率**
> 1.7879989
> 
> **类型 2：**
> **药物不良反应数量：**
> 不良事件药物不良反应 56
> 不良事件药物不良反应 67
> 不良事件输血后不良反应 31
> 不良事件输血后不良反应 32

我想分隔字符串和值。欢迎提出建议。
我的查询：

```
SELECT WMSNAB_MAIN_DESCRIPTION MAIN,WNSNAC_DETAIL_DESCRIPTION DETAIL,
COUNT(WMSNAD_PATIENT_ID) PID
FROM WMSNAB_INCIDENT_MASTER A,WMSNAC_INCIDENT_DETAIL B, 
WMSNAD_PATIENT_INCIDENTS C,WMSNAE_PAT_INCI_DET D
WHERE A.WMSNAB_MAIN_CODE       = B.WMSNAC_MAIN_CODE
AND B.WMSNAC_DETAIL_CODE     = D.WMSNAE_INCIDENT_DETAIL_CODE
AND C.WMSNAD_TRANS_ID = D.WMSNAE_TRANS_ID
AND TO_CHAR(C.WMSNAD_TRANS_DATE,'YYYY') = '2011'
AND A.WMSNAB_MAIN_CODE = 'A'
GROUP BY WMSNAB_MAIN_DESCRIPTION, WNSNAC_DETAIL_DESCRIPTION
UNION
SELECT WMSNAB_MAIN_DESCRIPTION MAIN,WNSNAC_DETAIL_DESCRIPTION DETAIL,
COUNT(WMSNAE_TRANS_ID) PID
FROM WMSNAB_INCIDENT_MASTER A,WMSNAC_INCIDENT_DETAIL B, WMSNAE_PAT_INCI_DET D
WHERE A.WMSNAB_MAIN_CODE       = B.WMSNAC_MAIN_CODE
AND B.WMSNAC_DETAIL_CODE     = D.WMSNAE_INCIDENT_DETAIL_CODE
AND TO_CHAR(D.WMSNAE_OCCURRED_DATE_TIME,'YYYY') = '2011'
AND A.WMSNAB_MAIN_CODE = 'A'
GROUP BY WMSNAB_MAIN_DESCRIPTION, WNSNAC_DETAIL_DESCRIPTION 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:34:56.557

示例代码

```
String s = "Adverse EventsAdverse drug reaction 56";
int number = Integer.valueOf(s.substring(s.lastIndexOf(' ')).trim()); 
```

# c# - C# 再现 RSS 提要

> ID：10040967
> 
> 赞同：1
> 
> 时间：2012-04-06T08:25:53.317
> 
> 标签：c#, xmlwriter

我制作了一个扫描 RSS 提要的程序。同样的程序从它爬取的元素创建提要。这意味着 rss 提要不相同，但项目必须相同。它复制它。因此，重要的是出来的东西和进来的东西是一样的。

现在，输入 rss 中的 elmenents 的元素名称如下：

```
<dc:creator>tomatoes</dc:creator> 
```

现在，当我扫描它时，它工作得很好。元素被保存到数据库中，一切都很好。

当我尝试使用这些代码线（以及一堆 foreaches，如果是 +++）再次将其写出到 RSS 提要时

```
StringBuilder sb = new StringBuilder();
XmlWriterSettings settings = new XmlWriterSettings();
settings.Indent = true;
settings.IndentChars = "  ";
settings.NewLineOnAttributes = true;
XmlWriter feedWriter = XmlWriter.Create(sb, settings); 
```

每个元素的这一行：

```
feedWriter.WriteElementString(keyAndValue[0], keyAndValue[1]); 
```

如果我点击上面的示例元素，我会收到此错误消息：

```
Invalid name character in 'dc:creator'. The ':' character, hexadecimal value 0x3A, cannot be included in a name. 
```

现在，我发现很多文章都提到了这个错误。在几乎所有的问题中，他们都被告知这不是正确的 XML，应该放弃写“：”。然而我不能。

我发现了一个例子，你可以使用另一种 XmlWriter 的重载方法，这个：

```
feedWriter.WriteElementString(prefixAndKey[0],prefixAndKey[1],"Namespace",keyAndValue[1]); 
```

然而，这会导致元素看起来像这样：

```
<dc:creator xmlns:something="NameSpace">tomatoes</dc:creator> 
```

众所周知，这与上面的不一样，因为它包含 xmlns 位。

我还尝试了另一个“hack”，它的工作原理如下：

```
StringBuilder sb = new StringBuilder();
StringWriter stringWriter = new StringWriter(sb);
XmlTextWriter xmlTextWriter = new XmlTextWriter(stringWriter); 
```

和

```
feedWriter.WriteElementString(keyAndValue[0], keyAndValue[1]); 
```

这个构建并且没有返回错误，但是当我在 Firefox 中打开它时，它显示了 0 个项目。

然后我仔细查看了我从中获取这些元素的提要，它包含一个像这样的 rss 元素：

```
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"> 
```

我目前正在尝试复制这一点。

有什么理由可以这样做吗？为什么？有没有更简单的方法来做到这一点？我是否必须为所有不同类型的标签添加 xmlns:dc 或 xmlns:itunes 或任何标签？

无论输入的 rss 提要中有什么内容，我都需要一种简单而安全的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:51:53.743

XDocument 的快速片段：

```
 XNamespace dc = @"http://purl.org/dc/elements/1.1/";

    XElement doc = new XElement("items", 
        new XAttribute(XNamespace.Xmlns + "dc", dc),
        new XElement("item",
          new XElement("title", "test"),
          new XElement(dc + "creator", "tomatoes"))) ; 
```

给

```
<items xmlns:dc="http://purl.org/dc/elements/1.1/">
  <item>
    <title>test</title>
    <dc:creator>tomatoes</dc:creator>
  </item>
</items> 
```

# facebook-graph-api - How do I get all photos a fan page is tagged in with the Facebook Graph API?

> ID：10040969
> 
> 赞同：3
> 
> 时间：2012-04-06T08:26:04.157
> 
> 标签：facebook-graph-api, fan-page, photo-tagging

I was able to write a PHP application which requests an access node for the admin of the FB Fan Page, and then requests an access node to gain access to the fan page itself.

I'm now able to get all photos that were posted to the timeline of the fan page by going to [https://graph.facebook.com/GROUP_ID/tagged?access_token=](https://graph.facebook.com/GROUP_ID/tagged?access_token=)...

However, I actually want the photos the fan page is tagged in. The above url only gives me the photos posted to the time line of the fan page, not the ones in which the page is tagged by other users. According to the developers documentation I could get these by going to [https://graph.facebook.com/GROUP_ID/photos?access_token=](https://graph.facebook.com/GROUP_ID/photos?access_token=)...

Everything seemed to work this way. I got a photo in which the fan page was tagged (profile picture of the fan page). However, I don't get any other photos in which the fan page is tagged. I tried to tag the fan page in its own photos (posted and tagged by an admin of the fan page) and tagging the fan page in other people's photos, but I only get the one profile photo in which the fan page is tagged.

Is this a permission problem or something else? When requesting the access tokens I asked for the following permissions:

*   offline_access
*   read_stream
*   manage_pages

Any help would be greatly appreciated.

# html - 文档类型在此处不允许元素“样式”

> ID：10040973
> 
> 赞同：0
> 
> 时间：2012-04-06T08:26:26.357
> 
> 标签：html, doctype

我目前正在使用这个 DOCTYPE：`<!DOCTYPE HTML SYSTEM>`

但是，当我验证我的网页时，我收到以下错误：

> 文档类型在此处不允许元素“STYLE”，位于`<style type="text/css">`

你能告诉我`DOCTYPE`我应该使用的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:46:55.337

你为什么不简单地删除它`SYSTEM`：

```
<!DOCTYPE HTML> 
```

也许 ：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

并尝试看看它是否有效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:51:19.237

它不取决于你有什么 DOCTYPE 声明，或者即使你有没有。
您的`<style>`元素在文档中的错误位置。将其向上移动到`<head>`.

澄清一下，如果 W3C 验证器说“文档类型”，它只是表示文档的类型，即 HTML。这与*您*提到的序言“DOCTYPE 声明”不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:16:54.470

您可能已将元素放置在`style`元素内部`body`。虽然在那里可以正常工作，但正式规则不允许这样做。将其移动到`head`元素中。

如果问题仍然存在，请提供整个文档的链接。当问题是元素出现在错误的上下文中时，比如这里，上下文是最重要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:34:13.193

**提示：**

*   将您的脚本和样式标签放在您的 HEAD 部分
*   把剩下的放在你的身体部分
*   请记住“关闭”所有标签。

* * *

```
<html>
      <head>
             <!-- title,scripts & styles go here -->
      </head>
      <body>
             <!-- the rest goes here -->
      </body>
</html> 
```

**您的代码：（更新：通过验证）**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>World Flag Registration</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="validate.js"></script>

        <style type="text/css">
            label{
                display:inline-block;
                width:200px;
                margin-right:30px;
                text-align:right;
            }

            input{

            }

            a, a:link, a:visited, a:active { 
                 color: #000000;
            }

            fieldset{
                border:none;
                width:500px;
                margin:0px auto;
            }
        </style>

    </head>
    <body>

        <form onsubmit="return validate(this);" action="registrationSubmit.html">
            <p align="center"><font face="Times New Roman" size="6">World Flag Registration</font></p>
            <p align="center"><a href="index.html"><font face="Times New Roman">Home</font></a> | <a href="registration.html"> Register</a> | Play</p>
            <p align="center">Please register your school in order to play the Flag Quiz</p>

            <fieldset>
                <legend></legend>
                <label>Classroom name:</label><input type="text" name="txtClassroomName" size="20">
                <label>School name:</label><input type="text" name="txtSchoolName" size="20">
                <label>School contact email address:</label><input type="text" name="txtSchoolEmail" size="20">
                <label>School address:</label><input type="text" name="txtSchoolAddress" size="20">
                <label>School telephone number:</label><input type="text" name="txtTelephoneNumber" size="20">
            </fieldset>

            <div style="text-align:center">
                <input type="submit" name="btnSubmit" value="Submit" onClick="Submit" align="middle">
            </div>
        </form>
    </body>
</html> 
```

# java - Unable to write CSR generated using org.bouncycastle.asn1.pkcs.CertificationRequest in PEM file format

> ID：10040977
> 
> 赞同：5
> 
> 时间：2012-04-06T08:27:01.237
> 
> 标签：java, x509certificate, bouncycastle

I am generating CSR using BouncyCastle APIs with bcprov-jdk15on-147 jars.

```
CertificationRequestInfo certInfo = new CertificationRequestInfo(subject, subKeyInfo, new DERSet(attribute));
org.bouncycastle.operator.ContentSigner sigGen = null;
sigGen = new JcaContentSignerBuilder("SHA1withRSA").setProvider("BC").build(privateKey);
org.bouncycastle.asn1.pkcs.CertificationRequest ctest = new org.bouncycastle.asn1.pkcs.CertificationRequest(certInfo,sigAlgName,new DERBitString(sigGen.getSignature())); 
```

I am passing this obejct to my calling function:

```
GenerateCSR gcsr = GenerateCSR.getInstance();
System.out.println("Public Key:\n"+gcsr.getPublicKey().toString());

System.out.println("Private Key:\n"+gcsr.getPrivateKey().toString());
org.bouncycastle.asn1.pkcs.CertificationRequest  csr = gcsr.getCSR("IMO");
System.out.println("CSR Request Generated!!");
FileWriter fcsr = new FileWriter("C:\\test.txt");
PEMWriter w1 = new PEMWriter(fcsr);
w1.writeObject(csr); 
```

But i am getting the below exception:

```
Exception in thread "main" org.bouncycastle.util.io.pem.PemGenerationException: unknown object passed - can't encode.
    at org.bouncycastle.openssl.MiscPEMGenerator.createPemObject(Unknown Source)" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:35:54.270

更好的解决方案是使用 PemObject。

```
 String type = "CERTIFICATE REQUEST";
    byte[] encoding = pkcs10.getEncoded();

    PemObject pemObject = new PemObject(type, encoding);

    StringWriter str = new StringWriter();
    PEMWriter pemWriter = new PEMWriter(str);
    pemWriter.writeObject(pemObject);
    pemWriter.close();
    str.close();

    System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:54:20.413

我最终像这样手动创建了 pem 对象..

```
 String code = "-----BEGIN CERTIFICATE REQUEST-----\n";
    code += new String(Base64.encodeBase64Chunked(request.getEncoded()));
    code += "-----END CERTIFICATE REQUEST-----";
    System.out.println(code); 
```

我猜这是 PemWriter 无法输出 CertificationRequest 对象的错误，因为看起来 BouncyCastle v1.47 仍然充满了其他错误。

# xml - JODReports fill in table in .odt file from list in xml

> ID：10040978
> 
> 赞同：2
> 
> 时间：2012-04-06T08:27:02.987
> 
> 标签：xml, templates, odt

I'm working with JODReports and I have to fill in a table in odt file from given xml. In other words I have to prepare odt template file. Hopefully someone's familiar with jodreports here and could help me out...

Here's my xml:

```
<?xml version="1.0" encoding="utf-8"?>
<data>

    <label>Finansavimo šaltinių klasifikatorius</label>

    <date>
        <strdate>2012-04-02</strdate>
        <strtime>15:10:05</strtime>
    </date>

    <param>
        <expdate>2012-04-02</expdate>
    </param>

    <tableconts>
        <col1name>Kodas</col1name>
        <col2name>Pavadinimas</col2name>
        <col3name>Pavadinimas dokumentuose</col3name>
        <col4name>Kodas dokumentuose</col4name>
        <col5name>Naudojamas</col5name>
    </tableconts>

    <table1>

        <values>
        <col1value1>1,</col1value1>
        <col2value2>Lietuvos Respublikos valstybės biudžetas</col2value2>
        <col3value3>-</col3value3>
        <col4value4>-</col4value4>
        <col5value5>Taip</col5value5>
        </values>

        <values>
        <col1value1>1.1</col1value1>
        <col2value2>Valstybės biudžeto lėšos</col2value2>
        <col3value3>-</col3value3>
        <col4value4>-</col4value4>
        <col5value5>Taip</col5value5>
        </values>

    </table1>

</data> 
```

And here's my odt file(doing |[script]| to show table colums):

```
@table:table-row
[#list data.table1.values as items]

|${items.col1value1}|${items.col2value2}|${items.col3value3}|${items.col4value4}|${items.col5value5}|

@/table:table-row
[/#list] 
```

Problem is this template takes all the right values from xml and prints them in the file, however they are not in the same table ! Instead of adding a row to the table it makes a completely new table. I want only one table and increase the number of rows for it each time new values are being taken from xml. I've tried manually editing contents.xml of the odt file adding [#list data.table1.values as items] before rows tags and closing with [/#items] after rows tag but it didn't bring out any success. I believe this task is a piece of cake for anyone who came across the same needs but to me it's a headache. Any help is appreciated, thanks in advance...

# ios - In WebView how can I change so I go back to detail view?

> ID：10040980
> 
> 赞同：0
> 
> 时间：2012-04-06T08:27:33.537
> 
> 标签：ios, ios5

I have a table view, when a row is selected it goes on to the detail view. In the detail view i have a button that passes a string to the the new view the new view is a webView, so it opens up a webpage. But in web view I have the navbar and when I press the back button I end up in the table view not the detail view. How can I change that so I go back to the detail view?

This is what I use to get to detail view

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  CustomDrawingViewControllerA *drawingVC = [[CustomDrawingViewControllerA alloc] init];
drawingVC.viewTitle = [[tableView cellForRowAtIndexPath:indexPath] textLabel].text;
[self.navigationController pushViewController:drawingVC animated:YES]; 
```

This gets me from detailview to Webview via a button pressed

```
 - (IBAction)onHelpButtonClicked:(id)sender
   {
if (m_helpPopupViewController==nil)
{
    m_helpPopupViewController =[[WebViewController alloc]
     initWithNibName:@"WebViewController" bundle:nil];
    m_helpPopupViewController.title2 = webAdd;         
     }

[self.view addSubview:m_helpPopupViewController.view]; 
```

This gets the Webview loaded

```
 - (void)viewDidLoad
 {
 [super viewDidLoad];
  // Do any additional setup after loading the view from its nib.
  NSString *fullURL = @"http://www.systembolaget.se"; NSURL *url =
  [NSURL URLWithString:fullURL]; NSURLRequest *requestObj
  = [NSURLRequest requestWithURL:url]; [webView loadRequest:requestObj];

   NSLog(@"test %@", title2);

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:21:21.323

您将 webView 添加为详细视图控制器的子视图，因此您使用 Web 选项卡导航控制器的后退按钮，您将返回到导航堆栈上的前一个视图控制器，即表格视图。要得到你想要的，你应该执行：

```
[self.navigationController pushViewController:webView animated:YES]; 
```

# ruby-on-rails-3.1 - 使用 AWS 部署 Rails 3 站点

> ID：10040986
> 
> 赞同：0
> 
> 时间：2012-04-06T08:28:41.050
> 
> 标签：ruby-on-rails-3.1, amazon-web-services

我将第一次部署我在 rails 3 中构建的站点。有人建议我使用 AWS。我已经在线阅读了一些教程，但一直遇到同样的问题。当我运行命令时

```
 rails g vulcanize complete_passenger_mysql 
```

我收到以下错误消息

```
 Could not find generator vulcanize. 
```

乍一看，rails 3.1 似乎与 Gem: Rubber 不兼容。

有没有其他人有同样的问题或知道这样做的任何方式？我也愿意听取其他选择，我选择了 AWS，因为它是免费的，而且人们推荐它。欢迎任何建议.. 我真的很想尽快部署我的网站

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:47:01.607

您需要将橡胶添加到您的 Gemfile 中，以便拾取其生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T17:46:09.277

您需要进行橡胶硫化：

```
rubber vulcanize complete_passenger_mysql 
```

# java - inputType="phone" 是否限制作为 inout 的位数

> ID：10040999
> 
> 赞同：0
> 
> 时间：2012-04-06T08:30:00.090
> 
> 标签：java, android

我曾经`android:inputType = "phone"`将电话号码作为输入，但如果我给出六位数字，它会强制关闭并触发错误

> “NumberFormat 异常无效的 int 值”

实际上我正在尝试通过以下方式将该值转换为整数：

```
phone = Integer.parseInt(phoneNumber.getText().toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:36:38.137

电话号码由大约 10 位数字组成，如何将其转换为 int。只需将其转换为长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:55:47.017

你应该知道java中整数的范围

尝试使用长...