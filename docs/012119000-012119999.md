# StackOverflow 问答 12119000-12119999

# php - 安装 ZF2 的 Ubuntu 12 上的 Pyrus 问题

> ID：12119001
> 
> 赞同：0
> 
> 时间：2012-08-25T03:47:20.463
> 
> 标签：php, ubuntu, pear, zend-framework2, pyrus

我尝试在 Ubuntu 12.04.1 64 位上安装 zend 框架 2，但遇到了困难。

# sudo pyrus install zf2/Zend_Framework-beta#Standard

中间交易失败，除了关于未设置时区的警告外，没有其他我记得的错误。（不幸的是我的终端历史丢失了原始输出）

Pyrus\Installer\Exception：安装失败
 Pyrus\AtomicFileTransaction\MultiException：错误：提交失败
  Pyrus\IOException：严重 - 无法完成事务，将实际路径重命名为备份路径失败
   Pyrus\AtomicFileTransaction\RuntimeException：无法回滚 - 不在事务中

现在，当我尝试重新运行
# sudo pyrus install -f zf2/Zend_Framework-beta#Standard
失败并出现
Pyrus\Registry\Exception: Cannot retrieve package file object for package packages.zendframework.com/zend_framework，它没有安装

卸载只是告诉我它没有安装。

我将 /usr/share/.old-php 恢复到 /usr/share/php 但是我仍然遇到同样的错误。
请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:29:29.433

您可以尝试将*Zend Framework 2 存档*下载并解压缩到项目的库文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:18:56.567

根据 Matthew，这似乎是元数据包的问题。我有同样的问题。 [使用 Pyrus 安装完整框架时出错](http://zend-framework-community.634137.n4.nabble.com/Install-full-framework-with-Pyrus-td4657786.html)

因此，如果我在这里安装了 pyrus：“/usr/share/pear/pyrus”，那么我应该创建一个目录“/usr/share/pear/pyrus/zf2”并在 zf2 中下载并解压缩完整的 Zend 框架，它应该可以工作?

谢谢

# php - Rephactor 和 Scisr PHP 重构工具有什么区别？

> ID：12119005
> 
> 赞同：1
> 
> 时间：2012-08-25T03:49:11.737
> 
> 标签：php, refactoring

Rephactor 和 Scisr 都是 PHP 的自动重构工具。两者都在开发中，并提供相同的重构功能。谁能告诉我这两种工具的确切区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T23:34:10.220

我写了 Scisr，所以也许我可以提供一些见解。简短的回答是它们只是不同的工具。它们每个都有一个功能子集，您可能会发现两者、一个或都不提供您想要的确切功能。每一个都提供了开发人员可以实现的一组特性——即有些不完整。

更长（并且稍微偏颇）的答案是它们在哲学上是不同的。幸运的是，这两个工具都提供了一些介绍性的简介，可以让您了解每个开发人员打算创建的内容。[这里是 Rephactor 的](http://rephactor.sourceforge.net/user-guide.php)，[这里是 Scisr 的](http://iangreenleaf.github.com/Scisr/)。

在尝试了所有我能找到的 PHP 重构工具（包括 rephactor）并且对所有这些工具都不满意后，我写了 Scisr。rephactor 绝对是我尝试过的所有工具中最有用的，但我认为它提出了太多要求——它想连接到 SVN、测试工具和各种其他东西。这些都是值得遵循的好流程，但集成的需要意味着我无法选择该工具并立即在我的项目中使用它。于是我着手编写一个更简单、单一用途的工具，于是 Scisr 诞生了。

IIRC 我还查看了 rephactor 的源代码，发现它使用正则表达式和其他我认为不足的解决方案。不过，我可能记错了，所以请原谅该声明中的任何不实之处。

另一个考虑因素应该是产品健康。不幸的是，这两个项目或多或少都是不活跃的。Scisr 最近更新了，我仍在接受拉取请求，但我不再积极致力于它。Rephactor 最后一次更新是在 2009 年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-03T22:40:47.257

## 2019+答案

看起来这两个包自 2013 年以来都已失效。但即时重构的需求仍然存在，所以我想分享 2019 年替代方案，它正在积极开发中，[每天有 200 次下载](https://packagist.org/packages/rector/rector/stats)。

2017 年我开始了一个名为 Rector 的小项目：[https ://github.com/rectorphp/rector](https://github.com/rectorphp/rector)

## Rector 可以帮助您完成任何手动操作

开箱即用，它支持：

*   重命名类、方法、属性、命名空间、常量……任何东西 :)
*   添加、替换或删除参数
*   添加没有文档块的参数或返回类型声明 - 仅使用静态分析
*   从 PHP 5.3 升级到 PHP 7.4
*   从一个 PHP 框架迁移到另一个
*   完成 PHP 7.4 属性类型声明
*   将 Laravel 静态转换为依赖注入
*   ...

它是一个 CLI 工具，易于使用：

```
composer require rector/rector --dev
vendor/bin/rector process src --level code-quality 
```

[阅读更多自述文件](https://github.com/rectorphp/rector)

# linq - Linq 相关项目未加载

> ID：12119009
> 
> 赞同：0
> 
> 时间：2012-08-25T03:51:03.857
> 
> 标签：linq, entity-framework

我有一个“任务”表，其中有一个“子类别”。子类别与类别相关。一个类别有很多子类别，但我的任务项只存储了子类别id（可以由此推断类别）。

所以，我的实体框架似乎理解了这种关系。

但是，我的链接失败了。

```
public TaskObject GetTask(int taskId)
{
    var item = (from t in _te.tasks.Include("r_sub_category").Include("r_category").Include("r_priority").Include("r_state").Include("assigned_person").Include("create_person").Include("update_person") where t.task_id == taskId select t).FirstOrDefault();
    return Transformer.UnpackTask(item);
} 
```

有一个 r_category 表和实体对象，但是当我运行它时，它告诉我：

**指定的包含路径无效。EntityType 'taskerModel.task' 没有声明名为 'r_category' 的导航属性。**

这是正确的 - r_category 链接到我的 r_sub_category 表......而不是直接链接到任务。有没有办法加载 r_category？

或者，也许这个 Include 是懒惰的，我应该做某种加入自己？或许更有效率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T03:54:40.003

您需要使用点符号显示完整路径，所以我猜它会是

```
"r_sub_category.r_category". 
```

等等

# google-chrome - CSS3 动画在 Google Chrome 中不起作用

> ID：12119013
> 
> 赞同：1
> 
> 时间：2012-08-25T03:51:35.103
> 
> 标签：google-chrome, css, webkit

我有一个动画，直到几周前还在 Google Chrome 中工作。我什么也没做，突然间它停止工作了。我问了几个我认识的人，他们也做网站，没有人能直接回答我为什么动画不起作用。

我在一个网站上有一个落叶动画，当你点击树叶时它会落下。根据浏览器，图像确实“掉落”（如果您将鼠标悬停在开发人员工具中的链接标签上，您可以看到蓝色框掉落），但实际图像保持不动或仅在屏幕上掉落几个像素。我不知道为什么会发生这种情况，这真的很令人困惑。

所以它应该是这样的：用户点击叶子，jquery改变类，叶子动画被触发，使叶子看起来像它正在下降。

```
@-webkit-keyframes fallingLeaves {
 0% {
     opacity: 1;
     -webkit-transform: translate(0, 10px) rotateZ(0deg);
     -moz-transform: translate(0, 10px) rotateZ(0deg);
     -ms-transform: translate(0, 10px) rotateZ(0deg);
     -o-transform: translate(0, 10px) rotateZ(0deg);
     transform: translate(0, 10px) rotateZ(0deg);
     z-index: 100;
 }
 75% {
      opacity: 1;
      -webkit-transform: translate(100px, 600px) rotateZ(270deg);
      -moz-transform: translate(100px, 600px) rotateZ(270deg);
      -ms-transform: translate(100px, 600px) rotateZ(270deg);
      -o-transform: translate(100px, 600px) rotateZ(270deg);
      transform: translate(100px, 600px) rotateZ(270deg);
      z-index: 100;
 }
 100% {
      opacity: 0;
      -webkit-transform: translate(150px, 800px) rotateZ(360deg);
      -moz-transform: translate(150px, 800px) rotateZ(360deg);
      -ms-transform: translate(150px, 800px) rotateZ(360deg);
      -o-transform: translate(150px, 800px) rotateZ(360deg);
      transform: translate(150px, 800px) rotateZ(360deg);
      z-index: 100;
 } 
```

}

这是其中一片叶子的动画之一（有不同的动画使叶子落下的方式不同）。

如果有人可以帮助我，那就太棒了。我已经尝试了很多，问了很多人，但一无所获。谢谢

该网站位于 www.shearmadnesshoboken.com，因此您可以查看

我应该注意到动画在 Linux 上的 Google Chrome 上运行。我也认为它在野生动物园中有效，除了一片叶子正确地落在那里（为什么只有一片没有落下我无法理解，但是是的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:47:43.713

对我来说，这看起来像是一个浏览器错误。检查您的 Linux 版本是否与您的（Mac？）版本相同。我发现的一种解决方法是`rotateZ(0deg)`在您的第一个关键帧中删除（您实际上不需要指定）。

```
 0% {
     opacity: 1;
     -webkit-transform: translate(0, 10px);
     -moz-transform: translate(0, 10px);
     -ms-transform: translate(0, 10px);
     -o-transform: translate(0, 10px);
     transform: translate(0, 10px);
     z-index: 100;
 } 
```

# .htaccess - 移动重定向后获取“查看完整站点”链接的原始请求 URL

> ID：12119015
> 
> 赞同：1
> 
> 时间：2012-08-25T03:51:54.200
> 
> 标签：.htaccess, redirect, mobile

我已经彻底搜索了一个类似的主题，但找不到一个。这里希望有人可以提供帮助。

=> 设置：

我正在使用我在野外发现的 .htaccess 移动重定向。

重定向将移动设备上的访问者从 www.MYSITE.com 发送到 m.MYSITE.com（一个简单的 .html“启动页面”）。在这个移动版本上是一个供访问者用来继续访问完整站点的链接：

```
<a href="http://www.MYSITE.com">Visit Full Version</a> 
```

=> 问题：

用户从搜索引擎访问 www.MYSITE.com/page。用户被重定向到 m.MYSITE.com 上的移动启动页面，然后他们单击“访问完整版”链接。它们不会被重定向到 www.MYSITE.com/page 的完整站点版本，而是被发送到 www.MYSITE.com。

我需要访问者能够从 m.MYSITE.com 初始页面“查看完整版本”链接返回到最初请求的 URL（如 www.MYSITE.com/page 甚至 www.MYSITE.com/page/post） .

我的 .htaccess 代码如下：

```
# If you're not already on m.YOUR_DOMAIN_NAME.com,
# and if you're on a mobile device,
# and if you just got here (didn't get here by clicking links on YOUR_DOMAIN_NAME.com),
# and if you're not just looking for pictures
# then go to the mobile site instead
RewriteCond %{HTTP_HOST} !^m\.MYSITE\.com [NC]
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|iphone|ipod|iemobile|webos|googlebot-mobile" [NC]
RewriteCond %{REQUEST_URI} !\.(jpg|png|gif)$ [NC]
RewriteCond %{HTTP_REFERER} !^http://(.*).MYSITE.com/.*$ [NC]
RewriteRule ^(.*)$ http://m.MYSITE.com [L,R=302] 
```

=> 问题：

我可以在我的 .htaccess 文件和/或移动 index.php 中进行哪些操作，以将访问者作为“访问完整版”链接返回到他们最初请求的 URL？

任何帮助是极大的赞赏！

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:33:49.523

在此处使用`conditional`.htaccess。

通过`parameter`以决定是否要查看完整站点

```
<a href="http://www.MYSITE.com?seeFullSite=YES">Visit Full Version</a> 
```

如果 .htaccess 检查`seeFullSite`param是否为`set`且 value 是否为`YES`. 如果为真，则不要重定向到您的移动网站。

条件 .htaccess :: 的示例

*   [有条件的htaccess？](https://stackoverflow.com/questions/6326477/conditional-htaccess)

*   [有条件的.htaccess](https://stackoverflow.com/questions/6876655/conditional-htaccess)

# javascript - 为什么从 DOM 中删除后 IE 中的元素为空？

> ID：12119018
> 
> 赞同：4
> 
> 时间：2012-08-25T03:53:37.053
> 
> 标签：javascript, jquery, internet-explorer, dom

以下 HTML 和 JavaScript 取自此 jsFiddle 的部分内容：http: [//jsfiddle.net/stephenjwatkins/2j3ZB/3/](http://jsfiddle.net/stephenjwatkins/2j3ZB/3/)

HTML：

```
<p class="source">
    Source
</p>
<div id="target">
    <p class="dummy">
        Target
    </p>
</div>
<button id="transfer-button">Transfer</button> 
```

JavaScript：

```
var sourceEl = $('.source');
var targetEl = $('#target');

$('#transfer-button').click(function() {
    targetEl.html('<p class="dummy">Transferring...</p>');
    setTimeout(function() {
        // Source element will be empty on second attempt to append
        targetEl.html('').append(sourceEl);
    }, 750);
    return false;
});​ 
```

*请注意，setTimeout 和虚拟文本只是用于视觉指示器。*

可以看到，在源元素从 DOM 中追加和删除一次后，IE（所有版本）将在任何进一步追加时向 DOM 添加一个空元素；而所有其他浏览器都会添加正确的非空元素。

另一个增加混乱的方面是 sourceEl 仍然有元素信息（例如`sourceEl.attr('class')`将返回“source”）。

我知道缓解该问题的方法（例如`sourceEl.clone()`），但最好能更好地理解为什么 IE 的行为会有所不同，以避免将来出现任何相关问题。

**替换元素后，是什么导致源元素在 IE 中唯一为空？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T05:17:45.627

首先让我们强调重要的部分：

1.  （第一次点击）获取`source`元素并将其放入`target`元素内部；
2.  （第二次点击）清空`target`元素并添加一个新的子元素（`p.dummy`），有效地`source`从 DOM 中移除；
3.  清空`target`元素并尝试重新附加`source`，它不再存在于 DOM 中。

* * *

乍一看，这在任何浏览器中都不起作用，因为该`source`元素已从 DOM 中删除。这里的“魔法”是 JavaScript 的[垃圾收集器](https://stackoverflow.com/q/864516/1331430)。浏览器看到它`sourceEl`仍然是作用域的（在`setTimeout`闭包内）并且不会丢弃`sourceEl`jQuery 对象内引用的 DOM 元素。

**这里的问题不是 JScript（Microsft 的 Javascript 实现）的垃圾收集器，而是 JScript 在设置元素的`innerHTML`.**

其他浏览器将简单地分离所有`childNode`s（当没有更多活动引用时，GC 将收集这些 s）并将传递的 html 字符串解析为 DOM 元素，将它们附加到 DOM 中。另一方面，Jscript 也会擦除分离`childNode`的 s' `innerHTML`/ `childNode`s。检查这个[**小提琴**](http://jsfiddle.net/zgKqV/1/)的插图。

实际上，该元素仍然存在于 IE 中并附加到 DOM 中：

![在此处输入图像描述](../Images/1f7b09fa4644e17ce739cd6800c9e836.png)

它只是没有`childNode`s了。

为了防止这种行为，如果您打算重新使用该元素而不是“覆盖”它，则[`.clone()`](http://api.jquery.com/clone/)该元素（如问题中所述）或[`.detach()`](http://api.jquery.com/detach/)它在调用`.html()`其父级之前。

这是在覆盖元素之前使用的[**小提琴，在所有浏览器中都可以正常工作。**](http://jsfiddle.net/2j3ZB/6/)`.detach()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T04:39:47.807

在我看来，IE 的行为是正确的，而其他浏览器的工作原理很神奇。这一切都源于您拨打电话时：

```
targetEl.html('<p class="dummy">Transferring...</p>'); 
```

这将从页面中删除`sourceEl`元素。所以它不再存在。我猜其他浏览器正在记住 DOM 对象，因为仍然有一个变量引用它。但 IE 将其识别为页面上不再存在，因此它丢失了引用。

正如您所提到的，我建议您在单击时克隆对象。这会在 JavaScript 中创建一个新对象。幸运的是，覆盖相同的变量是可行的。

```
 sourceEl = sourceEl.clone(); 
```

[http://jsfiddle.net/AbJQE/3/](http://jsfiddle.net/AbJQE/3/)

**编辑**您还可以在插入新的源对象之前删除任何可能存在的原始源对象。这解决了触发快乐答题器的问题：

```
setTimeout(function() {
    $('.source').remove();
    targetEl.html('').append(sourceEl);
}, 750); 
```

# r - 从列表中选择多个元素

> ID：12119019
> 
> 赞同：99
> 
> 时间：2012-08-25T03:53:53.790
> 
> 标签：r, list, subset

我在 R 中有一个大约 10,000 个元素的列表。假设我只想选择元素 5、7 和 9。如果没有 for 循环，我不知道该怎么做。

我想做类似的事情，`mylist[[c(5,7,9]]`但这不起作用。我也尝试过该`lapply`功能，但也无法使其正常工作。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-08-25T04:02:15.083

`mylist[c(5,7,9)]`应该这样做。

您希望子列表作为结果列表的子列表返回；你不使用`[[]]`（或者更确切地说，函数是`[[`）——正如 Dason 在评论中提到的那样，`[[`抓住了元素。

# python - Pyserial 读取循环需要多个输入来注册

> ID：12119021
> 
> 赞同：1
> 
> 时间：2012-08-25T03:54:28.567
> 
> 标签：python, while-loop, arduino, microcontroller, pyserial

我是 Python 和一般编程的新手。我正在使用 Arduino 和 python 为 Spotify 制作遥控器。每当在 Arduino 上按下按钮时，都会通过串行发送一个字符。有一个 python 脚本监听这个字符，并根据这个字符执行一个命令。我遇到的问题是`spotify.playpause()`每次按下其各自的按钮时都能正常工作，但所有其他命令都需要多次按下按钮。我确信这不是 Arduino 的问题，因为我已经通过多个串行监视器确认字符发送正确，所以我认为这是 Python 循环的问题。

编辑：只是添加更多信息，似乎在 python 端和或`serial.read()`在Arduino 端的不同组合对问题没有影响`serial.readline``Serial.print``Serial.println`

TL;DR 循环没有完全执行，它有什么问题。

这是代码：

```
import serial
from pytify import Spotify
spotify = Spotify()
connected = False

ser = serial.Serial("COM3", 57600)

while not connected:
    serin = ser.read()
    connected = True

while True:
    if ser.read() == '0':
         spotify.playpause()
    elif ser.read() == '1':
        spotify.volumeUp()
    elif ser.read() == '2':
        spotify.volumeDown()
    elif ser.read() == '3':
        spotify.previous()
    elif ser.read() == '4':
        spotify.next()
    else :
        pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:51:35.527

您的问题是您不断为每个 if/elif 案例调用 ser.read ，因此每次比较失败时您都会丢弃该值。您只需调用 ser.read 一次，然后使用本地 var 比较该结果，如下所示：

```
c = ser.read()

if c == '0':
   spotify.playpause()
elif c == '1':
   spotify.volumeUp()
... 
```

# arduino - 如何在不使用计算机的情况下使用 Arduino 发送电子邮件？

> ID：12119022
> 
> 赞同：3
> 
> 时间：2012-08-25T03:54:31.827
> 
> 标签：arduino, communication, microcontroller, ethernet

我正在试验我的[Arduino Mega](http://arduino.cc/en/Main/ArduinoBoardMega)。我还有一个[Arduino Ethernet Shield](http://arduino.cc/en/Main/ArduinoEthernetShield)。

我需要在**没有计算机**（或任何其他设备；如智能手机等）的帮助下使用它们发送电子邮件。虽然我可以找到几篇文章，但我找不到任何可接受的解决方案......

我该怎么做？由于我不要求将其用于任何特殊应用程序，因此您可以对缺失的细节做出任何假设。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:42:26.477

从上面评论中的讨论看来，您要么需要刚刚为您完成代码的人提供的代码，要么需要花时间了解组件并查找或制作组件。

如果它只对非标准数据包有用，他们就不会为这个平台制作以太网屏蔽。因此，某个地方的某个人创建了某种级别的 IP 堆栈。

但是，为了发送邮件，您需要学习[简单邮件传输协议](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)(SMTP)。几乎所有 Internet 协议定义都是使用称为[RFC](http://en.wikipedia.org/wiki/Request_for_Comments)（征求意见）的东西定义的。因此，如果您搜索 SMTP RFC，您会找到[RFC 2821](http://www.ietf.org/rfc/rfc2821.txt)。

[IETF](http://en.wikipedia.org/wiki/Internet_Engineering_Task_Force)是 Internet 工程任务组。许多网站上都会有这些文件的许多副本。并且由于 Internet 的时代和这些协议，在许多情况下，您会发现创建了一个 RFC 来替换之前的一个。不使用版本号，但它有点像 HTML 1.0 然后 HTML 2.0 等等。即使 RFC 说它完全取代了 RFC xyz，我还是建议您去查找 RFC xyz 并阅读它。我尽可能地回去学习那个，然后继续前进。

许多/大多数基于[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)的协议（TCP 是 RFC 中定义的另一种协议，稍后会详细介绍）是基于 ASCII 的，因此非常容易，例如 Telnet 学习/实验该协议，您可以可能使用 Telnet 来学习 SMTP。

大多数协议都是某种半双工的东西，建立连接并且服务器通常会向您发送一个字符串，您会看到该字符串，然后您发送某种 hello 字符串，服务器会以某种 OKAY 或失败状态响应。对于 SMTP，然后您执行某种“*我正在从该电子邮件地址发送邮件*”，服务器说 OKAY，您说我要发送此人或此人员列表，对于每个电子邮件地址，您都可以或失败。最终，您告诉服务器您已准备好发送消息正文，您这样做，以定义的终止方式结束消息。然后要么服务器说没问题，要么失败，或者可能有更多的握手。

一般的协议虽然有这个来回。通常您发送带有命令的字符串，并且服务器端通常会发回一个简短的 OK 或错误。有时，如果他们愿意，他们会发回有关错误的更多详细信息，但总是以表示正常或错误的几个字节开头。协议通常有一个流程，您必须先执行此操作，然后执行此操作。

您应该学习套接字编程，有时称为[伯克利套接字](http://en.wikipedia.org/wiki/Berkeley_sockets)。如果您选择的平台是 Windows 套接字，您可以编写大部分可跨 Unix 移植的程序，但也可以使用 Windows 套接字跨 Windows 移植。您需要先学习该协议，最好在您的台式机/笔记本电脑上而不是嵌入式上，您可以在那里更快地完成它。您不必学习 fork 或 thread 来使用套接字。这些示例可能表明，这样很容易显示，但是您可以仅使用轮询来编写完整的应用程序，它是半双工的，发送一些东西，等待，发送一些东西，等待。对于这些简单的学习程序，提前一点时间来学习套接字，从那里开始，就是学习协议了。

现在这是非常容易的部分，困难的部分是 TCP/IP 堆栈。我不建议在没有获得更多经验的情况下尝试这样做。例如，学习首先响应[ARP](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)（又一个 RFC 协议，地址解析协议），然后[ping](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29)（[ICMP](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)回显，ICMP 协议的一个子集），然后是[IP](http://en.wikipedia.org/wiki/Internet_Protocol)基础知识（嗅探数据包），然后接收并生成[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)数据包。TCP 在此之上是另一个层次，更多的握手。它不是固定的数据包大小，***它是流式传输的，不要让您的代码对数据包进行操作，它是字节流***，就像使用串行端口一样。

做你自己的 TCP 堆栈是一件非常重要的事情，我不推荐它，你需要找一个为这个平台为以太网屏蔽做过 TCP/IP 堆栈的人，然后使用它，无论[RTOS](http://en.wikipedia.org/wiki/Real-time_operating_system)或环境如何他们使用，使用它。然后使用该协议获取基于台式机/笔记本电脑的体验并应用它。

从上面的讨论中，如果您不想学习协议等，我认为您需要在谷歌周围查看 Arduino 以太网屏蔽示例，看看是否有人做过发送电子邮件的事情。

# python - 如何与 UTC 计时器进行循环同步并在每一分钟执行一次？

> ID：12119031
> 
> 赞同：6
> 
> 时间：2012-08-25T03:56:59.407
> 
> 标签：python, timer, sync, clock

`datetime.utcnow().second`我希望在零时每分钟执行一次循环。到目前为止我有这个

```
while True:
    while datetime.utcnow().second != 0: pass
    do_something() 
```

但问题是我在浪费 cpu 进程。我会使用`time.sleep(60)`，但我不知道它如何与 UTC 时钟同步，因为`time.sleep(60)`随着时间的推移可能会偏离官方的 UTC 时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T03:59:55.663

我能想到的最好方法是睡到下一分钟：

```
while True:
    sleeptime = 60 - datetime.utcnow().second
    time.sleep(sleeptime)
    ... 
```

如果你想非常精确：

```
while True:
    t = datetime.utcnow()
    sleeptime = 60 - (t.second + t.microsecond/1000000.0)
    time.sleep(sleeptime)
    ... 
```

这会以亚秒级精度准确地休眠到达下一分钟所需的时间。

*编辑*修复分钟翻转错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T04:54:48.280

有趣的问题 python 确实有一种方法可以使用[sched](http://docs.python.org/library/sched.html)来安排事件并让它再次发生，你可以一次又一次地安排它等等......

这里会是什么样子。

```
>>> import sched, time, datetime
>>> sch = sched.scheduler(time.time, time.sleep)
>>> 
>>> count = 0
>>> last = 0
>>> def do_something():
...     global count, last
...     if count != 5:
...         sch.enter(5, 1, do_something, ())
...     print datetime.datetime.now() - last
...     last = datetime.datetime.now()
...     count += 1
... 
>>> sch.enter(5, 1, do_something, ())
Event(time=1345872167.9454501, priority=1, action=<function do_something at 0x1004c4a28>, argument=())
>>> last = datetime.datetime.now()
>>> sch.run()

0:00:05.000015
0:00:05.000159
0:00:05.000184
0:00:05.000183
0:00:05.000181
0:00:05.000148
>>> 
```

有趣的是，它似乎非常准确，可能由于执行实际指令所需的时间而产生了轻微的开销，我想如果我们想要完美的准确性，我们需要考虑它们......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T04:03:37.487

天真的方法过于将 更改`pass`为 a `sleep (1)`，这将大大减轻 CPU 压力，但如果由于某种原因`12:30:59.99999`被`12:31:01.00001`.

您可以选择两阶段方法。虽然还有超过三秒钟的时间，但根据需要的时间等待更长的时间。否则，请等待一秒钟。

类似以下功能齐全的 Python 程序的东西将说明我的意思：

```
from datetime import datetime
from time import sleep

def WaitForNextMinute():
    secs = datetime.utcnow().second
    while secs < 57:
        sleep (57 - secs)
        secs = datetime.utcnow().second
    while datetime.utcnow().second >= 57:
        sleep (1)

while True:
    WaitForNextMinute()
    print datetime.utcnow() 
```

我的系统上的输出是：

```
2012-08-25 04:16:00.111257
2012-08-25 04:17:00.157155
2012-08-25 04:18:00.217356
2012-08-25 04:19:00.270348
2012-08-25 04:20:00.330203
2012-08-25 04:21:00.390318
2012-08-25 04:22:00.450440
2012-08-25 04:23:00.510491
2012-08-25 04:24:00.570487
2012-08-25 04:25:00.630502
2012-08-25 04:26:00.690523
2012-08-25 04:27:00.750642
2012-08-25 04:28:00.810780
2012-08-25 04:29:00.870900
2012-08-25 04:30:00.931078 
```

这几乎就是你所追求的。

这个函数基本上会做一个等待，让你非常接近一分钟结束，然后每秒醒来，直到它循环结束。

因此，例如，假设它是`12:21:13`. 因为`secs`是小于`57`，它会等待`57 - 13`或足以让你达到大约`12:21:57`。

从那里开始，它会一次只休眠一秒钟，直到`second`小于`57`。换句话说，当我们进入下一分钟时。

通过这样做而不是尝试检测零秒，您还可以绕过错过一分钟的可能性。

而且，如果您想确保尽可能接近分钟翻转，您可以将 替换`sleep (1)`为`pass`. 这样，您将在 60 秒（平均 5%）中以全 CPU 运行最多三秒（平均 5%），并尽可能接近分钟翻转。

当我执行那个小修改时，我得到：

```
2012-08-25 05:48:00.000003
2012-08-25 05:49:00.000003
2012-08-25 05:50:00.000003
2012-08-25 05:51:00.000004
2012-08-25 05:52:00.000004
2012-08-25 05:53:00.000004
2012-08-25 05:54:00.000003
2012-08-25 05:55:00.000004 
```

# ruby - 在 ruby 文件中需要一个 ruby 文件

> ID：12119032
> 
> 赞同：2
> 
> 时间：2012-08-25T03:57:07.770
> 
> 标签：ruby, sinatra

我想要`require`一个`config.rb`名为`basics.rb`. 我使用 Sinatra 作为我的 Web 框架。我确定有办法做到这一点，我只是在文档中找不到任何东西。

希望它看起来像

```
post '/' do
  require 'config.rb'
  // logic
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T04:06:03.257

如果 config.rb 在您的加载路径中，您可以在 basics.rb 文件的顶部使用`require 'config'`. 如果它不在您的加载路径中，您将需要类似`require '/path/to/your/config'`.

您发布的代码将需要该文件。但只有当有人发布到“/”时。

此外，在需要 ruby​​ 文件时省略 .rb 扩展名是正常的。但是，如果您愿意，可以包含它。

您可以通过检查全局变量来查看加载路径`$LOAD_PATH`。从命令行`ruby -e 'puts $LOAD_PATH'`将为您的 ruby​​ 版本打印它。您还可以[将目录添加](https://stackoverflow.com/questions/837123/adding-a-directory-to-load-path-ruby)到加载路径。

# ruby-on-rails - 如何根据用户登录/注销在数据库中添加或删除记录，我正在为 Ruby on Rails 使用 Devise gem？

> ID：12119038
> 
> 赞同：0
> 
> 时间：2012-08-25T03:59:19.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, devise

我有某些用户设置需要在用户登录时加载并在他注销后销毁他的自定义设置。我正在使用设计宝石。此外，我打算在 Rails 会话中保留此设置记录 ID，以便通过应用程序轻松访问。

当用户注销时，我想做这样的事情：

```
Setting.delete(session[:settings_id]) 
```

其中 Setting 是我的模型类，我将会话中当前加载的 settings_id 保存为 session[:settings_id] = Settings.where(:conditions => hash).id

然后当用户注销时，我将不得不使用从我的设置表中删除记录

```
 Setting.delete(session[:settings_id]), 
```

因为我当前已经加载了会话中保存的 settings_id。我怎么能和设计一起做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:01:14.593

Devise 是建立在warden 之上的，它提供了一些你可以使用的[回调：](https://github.com/hassox/warden/wiki/Callbacks)

```
Warden::Manager.before_logout do |user, auth, opts|
  Setting.delete(auth.session[:settings_id])
end 
```

# netbeans - 无法为 Java ME 项目启动 Netbeans 7.2 Profiler

> ID：12119040
> 
> 赞同：3
> 
> 时间：2012-08-25T03:59:23.527
> 
> 标签：netbeans, java-me, profiler, netbeans-7.2

我试图弄清楚为什么我的 Java ME 应用程序（媒体播放器）抛出内存不足异常，但是我无法启动 Netbeans 分析器。分析器适用于其他项目类型，但当我选择时显示为灰色任何 Java ME 项目。我试图通过在命令提示符下调用模拟器并提供适当的参数来启动它（Xprofile 启动 cpu 分析器和 Xnetmon 启动网络监视器），但模拟器在没有分析工具的情况下启动。

接下来，我尝试重新安装 Netbeans，希望能清除我可能遇到的任何配置问题，但仍然没有运气。

环境：我使用带有 JDK 1.7.0_04 版本的 Windows 7 64 位和 Java ME SDK 3.0.5 附带的 Netbeans 7.2，并且我已经安装了 Java SDK 工具。

其他信息：当我从项目中选择 unintegrate profiler 时（在配置文件菜单下的高级命令下）我收到一条消息，它首先没有集成，但我不知道如何触发这种集成。当我选择校准分析器选项时，我只看到 JDK 1.& 平台，而没有看到我的 Java Me 平台。

我不确定分析器依赖于什么或 Netbeans 的怪癖，所以我可能没有提供足够的信息，任何有关更多相关信息的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T08:25:54.130

在寻找另一个答案时，我遇到了这个问题。这里的问题是没有 J2ME 平台与 IDE 集成。添加平台的方法是：在工具菜单上 --> 点击“Java Platforms” --> 点击“Add Platforms...”按钮 --> 在添加平台向导上点击“Java ME CLDC Platform Emulator”（第二个选项) --> 单击“下一步” --> 浏览并选择 J2ME 平台的位置 --> 完成添加过程。重新启动 netbeans IDE 后，探查器现在将被激活。

# java - Java：恢复双值二进制文件的最快方法

> ID：12119042
> 
> 赞同：1
> 
> 时间：2012-08-25T03:59:46.973
> 
> 标签：java

我有一堆文件（假设 1'000，每个条目介于 100 万到 1000 万个条目之间），其中包含二进制格式的双精度值（之前由 DataOutputStream 转储）；在 JAVA 中恢复这些双值的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:02:56.753

内存映射 IO 和[DoubleBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/DoubleBuffer.html) s？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T04:03:40.590

使用数据输入流：

```
 DataInputStream dis = new DataInputStream(new BufferedInputStream(new FileInputStream("myfile.bin")));
  while(dis.available() > 0) {
      double d = dis.readDouble();
      // ... do something with the double
  } 
```

# css - 大图像的图像加载器动画

> ID：12119045
> 
> 赞同：0
> 
> 时间：2012-08-25T04:00:39.390
> 
> 标签：css, ajax, image, preloader

我在我的网站上的画廊中有一些高分辨率图像，我只想要某种动画，比如可以在[ajaxload.info](http://ajaxload.info)找到的动画，以代替我的图像显示，直到它完全加载。它的一些建议就像在你的css中添加这样的东西一样简单：

```
img { background:url('../images/ajax-loader.gif') center center no-repeat;} 
```

好吧，这会将这个背景图像添加到我的透明“spacer.gif”中，从而导致加载图像显示在我的垫片所在的位置。然而，这种“方法”甚至一开始都行不通。当我查看高分辨率图像时，它们仍然从上到下加载，我什至看不到 loader.gif。有什么帮助吗？我以为到处都有这方面的信息，但我一生都找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:11:48.950

只需给所有高分辨率图像一个类，然后在 css 中使用类名而不是全局 img 标签来设置背景。

如果您使用 jquery 加载图像，则图像不会从上到下加载，而只会在完全加载时出现，因此背景加载器图像将可见，一旦图像完全加载并显示，加载器将是覆盖。这种方法非常有效，因为它非常简单，您可能只是错过了一些东西。

# java - 在 Android 中获取 Facebook 页面状态更新列表

> ID：12119046
> 
> 赞同：1
> 
> 时间：2012-08-25T04:01:11.527
> 
> 标签：java, android, facebook, facebook-opengraph

如何在 Android 中提取所有 Facebook 页面状态更新的列表？这似乎是一个如此简单的问题，但似乎是一项非常艰巨的任务。我不想使用 SDK。我认为它会像 twitter 一样简单... http 请求并解析生成的 json。根据研究，我似乎能够从 Facebook 获取 JSON 的唯一方法是使用他们的 Open Graph，这需要注册应用程序并生成访问令牌。仅仅为了尝试获取公共状态更新，这似乎有点矫枉过正。有什么我想念的吗？

我没有尝试进行任何状态更新，或获取任何其他信息。我只想从一个 Facebook 页面上读取公共状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:08:17.500

你必须像这样使用 URL

```
String url = "https://graph.facebook.com/" +facebook_User_name +"/statuses&limit=20&access_token=" + access_token 
```

您必须将该 url 传递给 HttpGet 方法以获取信息。

```
HttpGet httpget = new HttpGet(url);    
HttpResponse response;  
try {
   response = httpclient.execute(httpget);          
   HttpEntity entity = response.getEntity();             
   if (entity != null) {    
       InputStream instream = entity.getContent();
       result= convertStreamToString(instream);
       JSONObject json = new JSONObject(result);             
           JSONArray valArray = json.getJSONArray("data");

       for(int i=0;i<valArray.length();i++) {             

           String info = main_object.getString("message");
       }
       instream.close();
    }            
} 
catch (ClientProtocolException e) {             
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T07:18:33.900

请使用此网址从 Facebook 页面获取帖子列表

```
https://graph.facebook.com/"YOUR PAGE NAME"/feed?access_token="YOUR ACCESS TOKEN" 
```

如果您想获取自己的 Facebook 帖子详细信息，请使用以下网址

```
https://graph.facebook.com/me/feed?access_token="YOUR ACCESS TOKEN" 
```

# sql-server-2008 - 查询显示已登录用户及其好友的碎片？

> ID：12119051
> 
> 赞同：0
> 
> 时间：2012-08-25T04:02:28.587
> 
> 标签：sql-server-2008

我创建了 3 个表：

*   `Login(firstname,lastname,age,gender,email)`
*   `Scraps(email,scrap,posttime)`
*   `requests(email,frnemail,frnshpstatus,frnpic)`

我想要一个连接这三个表的查询，以显示用户和 frnshpstatus 为“Y”的人发布的关于他在请求表中的电子邮件的剪贴簿留言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:25:33.670

您可以尝试连接查询。

```
DECLARE @usrEmail varchar(255) // Set the users email you are getting.

SELECT l.*, s.scrap, s.posttime
FROM Login l
LEFT JOIN Scraps s
ON l.email = s.email
WHERE l.email = @usrEmail

// Use a UNION query to also get scraps left by the users friend.
// Im assuming the friends would have entries in the login column as well.
UNION ALL

SELECT l.*, s.scrap, s.posttime
FROM Login l
LEFT JOIN Scraps s
ON l.email = s.email
WHERE l.email IN (SELECT frnshpEmail FROM requests WHERE email = @usrEmail AND frnshpStatus = 'Y') // This will create a list of all the users that are also have a frnshp with the user. 
```

我不确定您如何使用请求表。如果您可以给我更多详细信息，我会尽力帮助您了解具体情况，但是就我所拥有的而言，这应该让您知道该怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:55:32.767

试试这个：

```
select * from scraps where email in(
select r.frnemail
from [Login] l inner join requests r
on l.email=r.email and r.frnshpstatus = 'Y'
where l.email=@useremail) 
```

# sql - 需要帮助将 SQL 查询转换为 LINQ 语句以在我的 ASP.NET MVC 3 项目中使用

> ID：12119054
> 
> 赞同：0
> 
> 时间：2012-08-25T04:02:44.687
> 
> 标签：sql, linq, entity-framework, linq-to-sql

这是我需要转换为 LINQ 语句以在我的 ASP.NET MVC 3 项目中使用的查询。我对 LINQ 还不是很好，所以我需要一些帮助。

```
WITH CTE AS (
  SELECT a.GalleryID GalleryID_A, a.GalleryTitle, a.GalleryDate, b.*
        ,ROW_NUMBER() OVER (PARTITION BY a.GalleryID, a.GalleryTitle, a.GalleryDate
                            ORDER BY b.MediaThumb DESC) AS Rn
    FROM Media b
         INNER JOIN Galleries A ON a.GalleryID = b.GalleryID
),

CTE2 AS (
  SELECT a.GalleryID GalleryID_A, a.GalleryTitle, a.GalleryDate, b.*, 1 Rn
   FROM Media b
        LEFT OUTER JOIN Galleries A ON a.GalleryID = b.GalleryID
)

SELECT * FROM CTE where rn = 1

UNION ALL

SELECT * FROM CTE2
  WHERE rn = 1
    AND galleryid is null

ORDER BY MediaID DESC 
```

这是我的解决方案。

```
var Results = DB.Database.SqlQuery<WhatsNew>
                (@" WITH CTE AS (
                    SELECT a.GalleryTitle, a.GalleryDate, b.*,  
                    ROW_NUMBER() OVER (PARTITION BY  a.GalleryID, a.GalleryTitle, a.GalleryDate 
                    ORDER BY b.MediaThumb DESC) AS Rn
                    FROM Media b
                    INNER JOIN Galleries A
                    ON a.GalleryID = b.GalleryID
                ), 
                CTE2 AS
                (
                    SELECT a.GalleryTitle, a.GalleryDate, b.*,  
                    1 Rn
                    FROM Media b
                    LEFT OUTER JOIN Galleries A
                    ON a.GalleryID = b.GalleryID
                )
                SELECT * FROM CTE where rn = 1
                UNION ALL
                SELECT * FROM CTE2 WHERE rn = 1 and galleryid is null
                ORDER BY MediaID DESC "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:26:36.187

如果您只是学习 linq 并想转换这样的复杂查询，我建议您使用此工具

[http://www.sqltolinq.com/](http://www.sqltolinq.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T21:31:06.977

在 sql 中将查询创建为视图，说“MyView”，然后从 MVC 项目中调用它。

```
return db.ExecuteStoreQuery<YourEntityType>("SELECT * FROM MyView"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T18:12:16.673

如果您仅将 CTE 用于分页，则可以使用[`Skip()`](http://msdn.microsoft.com/en-us/library/bb357513.aspx)和[`Take()`](http://msdn.microsoft.com/en-us/library/bb300906)扩展。

```
var page = (from a in _context.Set<Media>()
    orderby a.GalleryID, a.GalleryTitle, a.GalleryDate
    select a)
    .Skip(page * size).Take(size); 
```

或使用[PagedList](https://github.com/TroyGoode/PagedList)。

```
var page = (from a in _context.Set<Media>()
    orderby a.GalleryID, a.GalleryTitle, a.GalleryDate
    select a)
    .ToPagedList(page, size); 
```

# python - print() vs sys.stdout.write()：哪个和为什么？

> ID：12119060
> 
> 赞同：36
> 
> 时间：2012-08-25T04:03:41.673
> 
> 标签：python, python-3.x

`sys.stdout.write()`我有一个使用and创建输出的脚本`sys.stderr.write()`。最近我发布了几个关于脚本其他方面的问题，我注意到发布答案的人似乎更喜欢`print('some text', file=sys.stdout)`. 我对输出的主要关注只是它可以通过 shell 管道传输到文件中或作为另一个程序的输入。有人可以解释（或将我引向现有的解释） 和 之间的区别`print()`，`sys.stdout.write`应该使用每个的情况以及这些约定的合理性吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-26T10:45:31.440

“*有人可以**解释一下**（或指导我了解现有的解释）print() 和 sys.stdout.write 之间的区别、应该使用它们的情况以及这些约定的合理性吗？* ”

好吧，我猜你听到的关于 Python3 的 print() 函数的沉默是因为实际上只有一个区别：用法。让我引用 PEP-3105：[ [1](http://mail.python.org/pipermail/python-dev/2005-September/056154.html) ]

的签名`print()`是：

> def print(*args, sep=' ', end='\n', file=None)

像这样的调用：

> 打印（a，b，c，文件=sys.stderr）

将相当于今天的：

> 打印 >>sys.stderr, a, b, c

而可选的 sep 和 end 参数分别指定在参数之间和之后打印的内容。

softspace 功能（当前用于告诉 print 是否在第一项之前插入空格的文件的半机密属性）将被删除。因此，今天的内容不会直接翻译：

> 打印“a”，打印

这不会在“a”和换行符之间打印空格。

因此，引用 Guido van Rossum 在 2005 年对该问题的讨论 [ [1](http://mail.python.org/pipermail/python-dev/2005-September/056154.html) ]： 一旦您决定不希望在项目之间有空格，打印的易用性就会出现明显的非线性；您要么必须切换到 using `sys.stdout.write()`，要么必须收集字符串中的所有项目。这不是一个简单的转换，考虑在这个简单的例子中去掉逗号前的空格需要什么：

> ```
> print "x =", x, ", y =", y, ", z =", z 
> ```

如果它是一个内置函数，那么有一个内置的伴随函数可以在不插入空格和添加换行符的情况下执行类似的操作（或添加关键字参数来控制该行为；但我更喜欢第二个）功能）; 但是目前只有打印，你必须切换到类似的东西

> ```
> print "x = " + str(x) + ", y = " + str(x) + ", z = " + str(z) 
> ```

或者

> ```
> print "x = %s, y = %s, z = %s" % (x, y, z) 
> ```

两者都不是很有吸引力。（不要告诉我空格没什么大不了的——在*这个*例子中没有，但在其他情况下。）

* * *

一个星期天早上沿着记忆小路的好问题；*为什么会有这种明显的冗余？*因为编写更高级别的代码在 Python 上更正确：

python的第七禅：“可读性很重要”

# ruby - 如何知道一场比赛是否与前一场比赛相邻

> ID：12119065
> 
> 赞同：1
> 
> 时间：2012-08-25T04:04:21.097
> 
> 标签：ruby, regex, ruby-1.9.3, oniguruma

在像这样的建筑中

```
string.scan(regex){...} 
```

或者

```
string.gsub(regex){...} 
```

如何检查循环循环的匹配是否与原始字符串中的前一个相邻？例如，在

```
"abaabcaaab".scan(/a+b/){|match|
    ...
    continued = ...
    ...
} 
```

将有 3 个匹配项`"ab"`、`"aab"`和`"aaab"`。在每个周期中，我希望它们的变量分别`continued`为`false`、`true`和 ，`false`因为`"ab"`是第一个匹配周期，`"aab"`与它相邻，并`"c"`在下一个匹配之前中断`"aaab"`。

```
"ab" #=> continued = false
"aab" #=> continued = true
"aaab" #=> continued = false 
```

origuruma 中是否有一个锚点是指上一个匹配位置的结尾？如果是这样，那可以在正则表达式中使用。如果没有，我可能需要使用`MatchData#offset`. 并在循环中进行一些计算。

顺便说一句，`\G`origuruma 正则表达式中有什么？我的印象是它可能是我想要的锚，但我不确定它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:28:34.043

StringScanner 非常适合这项任务：[http ://corelib.rubyonrails.org/classes/StringScanner.html](http://corelib.rubyonrails.org/classes/StringScanner.html)

```
require 'strscan'
s = StringScanner.new('abaabcaaab')

begin
        puts s.pos
        s.scan_until(/a+b/)
        puts s.matched
end while !s.matched.nil? 
```

输出

```
0
ab
2
aab
5
aaab
10
nil 
```

因此，您可以跟踪最后一场比赛的长度和位置，并进行数学运算以查看它们是否相邻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:38:29.793

我不相信使用这些方法可以获得偏移数据。您可能必须使用[`Regexp#match`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-match), 每次传递该位置。返回的[`MatchData`](http://www.ruby-doc.org/core-1.9.3/MatchData.html)对象还包含进行任何替换等所需的所有信息。

当然，如果你在增加偏移量的同时进行字符串替换，如果替换的长度与匹配的长度不同，你必须小心。这里的一个常见模式是向后移动字符串，但我认为您无法使用这些方法遵循该模式，因此您需要调整偏移量。

编辑 | 实际上，如果您在完全独立的步骤中进行替换，您将能够向后移动字符串。首先找到您需要替换的所有内容以及偏移量。接下来，以相反的顺序迭代该列表，进行替换。

# c# - 显示带有图像细节的图像

> ID：12119066
> 
> 赞同：1
> 
> 时间：2012-08-25T04:04:35.153
> 
> 标签：c#, database, visual-studio-2010, image, repeater

我正在 Visual Studios 2010 上做一个项目，以显示已添加到数据库中的所有最新图像。我目前正在使用中继器控件来允许用户从数据库中获取所有最新图像。我正在使用图像按钮来显示图像。一旦用户单击图像按钮，它应该将他们带到另一个页面，该页面在具有图像名称的图像控件中显示图像。我不确定如何执行此操作，因为我是使用中继器控件的新手。有人能帮我吗？请为我提供示例代码。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:18:42.717

你可以从 ExiF 开始，谷歌一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:27:31.883

您需要定义转发器的 ItemCommand，您可以在其上将用户重定向到另一个控件。以下链接可能对您有所帮助：

[MSDN 中继器项命令](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcommand.aspx?ppud=4)

[中继器项目命令](http://www.ezineasp.net/post/ASP-Net-Repeater-OnItemCommand-Event-using-C-sharp.aspx)

# c#-4.0 - 异步记录器。我可以丢失/延迟日志条目吗？

> ID：12119070
> 
> 赞同：0
> 
> 时间：2012-08-25T04:05:43.837
> 
> 标签：c#-4.0, thread-safety, task-parallel-library

我正在实现我自己的日志框架。以下是我的`BaseLogger`，它接收日志条目并将其推送到实现该`abstract Log`方法的实际 Logger。

~~我使用 C# TPL 以异步方式登录。~~我使用线程而不是 TPL。（TPL 任务没有真正的线程。因此，如果应用程序的所有线程都结束，任务也会停止，这将导致所有“等待”的日志条目丢失。）

```
public abstract class BaseLogger
{
    // ... Omitted properties constructor .etc. ... //

public virtual void AddLogEntry(LogEntry entry)
{
    if (!AsyncSupported)
    {
        // the underlying logger doesn't support Async.
        // Simply call the log method and return.
        Log(entry);
        return;
    }
    // Logger supports Async.
    LogAsync(entry);
}

private void LogAsync(LogEntry entry)
{
    lock (LogQueueSyncRoot) // Make sure we ave a lock before accessing the queue.
    {
        LogQueue.Enqueue(entry);
    }

    if (LogThread == null || LogThread.ThreadState == ThreadState.Stopped)
    { // either the thread is completed, or this is the first time we're logging to this logger.
        LogTask = new  new Thread(new ThreadStart(() =>
        {
            while (true)
            {
                LogEntry logEntry;
                lock (LogQueueSyncRoot)
                {
                    if (LogQueue.Count > 0)
                    {
                        logEntry = LogQueue.Dequeue();
                    }
                    else
                    {
                        break; 
                        // is it possible for a message to be added,
                        // right after the break and I leanve the lock {} but 
                        // before I exit the loop and task gets 'completed' ??
                    }
                }
                Log(logEntry);
             }
        }));
        LogThread.Start();
    }
}

// Actual logger implimentations will impliment this method.
protected abstract void Log(LogEntry entry);
} 
```

注意`AddLogEntry`可以同时从多个线程调用。

我的问题是，这个实现是否有可能丢失日志条目？我担心，是否可以在我的线程存在带有 break 语句的循环并退出锁定块之后，在 else 子句中，并且线程仍在“运行”状态。

我确实意识到，因为我正在使用队列，即使我错过了一个条目，下一个记录请求也会推送错过的条目。但这是不可接受的，特别是如果这发生在应用程序的最后一个日志条目中。

另外，请让我知道是否以及如何实现相同的功能，但使用新的 C# 5.0`async`和`await`关键字以及更简洁的代码。我不介意需要 .NET 4.5。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T05:14:20.323

虽然您可能会使其工作，但根据我的经验，如果可能的话，我建议使用现有的日志框架:) 例如，使用 log4net 的异步日志/附加器有多种选项，例如[这个异步附加器包装器 thingy](http://cjbhaines.wordpress.com/2012/02/13/asynchronous-log4net-appenders/) .

否则，恕我直言，因为无论如何您将在日志记录操作期间阻塞线程池线程，我将改为为您的日志记录启动一个专用线程。您似乎已经开始采用这种方法，只需通过 Task ，这样您就不会在没有任何日志记录时持有线程池线程。但是，我认为实现的简化只有拥有专用线程才有好处。

一旦你有了一个专用的日志线程，你就只需要一个中间的[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265)。那时，您的日志方法只是添加到队列中，而您的专用日志线程只是执行您已经拥有的 while 循环。如果需要阻塞/有界行为，可以使用[BlockingCollection进行包装。](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

通过将专用线程作为唯一写入内容，它消除了多个线程/任务拉出队列条目并尝试同时写入日志条目的任何可能性（痛苦的竞争条件）。由于 log 方法现在只是添加到一个集合中，它不需要是异步的，你根本不需要处理 TPL，使其更简单、更容易推理（并且希望在 ' 的类别中显然是正确的'或附近:)

这种“专用日志记录线程”方法是我认为我链接到的 log4net appender 也可以做到的，FWIW，以防它作为示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T10:43:17.963

我突然想到了两个比赛条件：

1.  如果多个`Thread`线程调用`AddLogEntry`. 这不会导致丢失事件，但效率低下。
2.  是的，一个事件可以在`Thread`退出时排队，在这种情况下它会“丢失”。

此外，这里还有一个严重的性能问题：除非您不断地记录（每秒数千次），否则您`Thread`将为每个日志条目旋转一个新条目。那会很快变得昂贵。

像 James 一样，我同意您应该使用已建立的日志库。日志记录并不像看起来那么简单，并且已经有很多解决方案。

也就是说，如果您想要一个基于 .NET 4.5 的好方法，这很容易：

```
public abstract class BaseLogger
{
  private readonly ActionBlock<LogEntry> block;

  protected BaseLogger(int maxDegreeOfParallelism = 1)
  {
    block = new ActionBlock<LogEntry>(
        entry =>
        {
          Log(entry);
        },
        new ExecutionDataflowBlockOptions
        {
          MaxDegreeOfParallelism = maxDegreeOfParallelism,
        });
  }

  public virtual void AddLogEntry(LogEntry entry)
  {
    block.Post(entry);
  }

  protected abstract void Log(LogEntry entry);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T05:46:53.287

关于由于未处理的异常而导致应用程序迷恋的等待消息丢失，我已将处理程序绑定到 event `AppDomain.CurrentDomain.DomainUnload`。像这样：

```
protected ManualResetEvent flushing = new ManualResetEvent(true);
protected AsyncLogger()  // ctor of logger
{
    AppDomain.CurrentDomain.DomainUnload += CurrentDomain_DomainUnload;
}

protected void CurrentDomain_DomainUnload(object sender, EventArgs e)
{
    if (!IsEmpty)
    {
        flushing.WaitOne();
    }
} 
```

也许不是太干净，但有效。

# sql - 在sql server cte中得到“没有为'd'的第2列指定列”？

> ID：12119073
> 
> 赞同：41
> 
> 时间：2012-08-25T04:06:11.293
> 
> 标签：sql, sql-server, group-by, common-table-expression, calculated-columns

我有这个查询，但它不能正常工作，

```
with c as (select 
               month(bookingdate) as duration, 
               count(*) as totalbookings 
           from 
               entbookings
           group by month(bookingdate)
          ),
     d as (SELECT 
               duration, 
               sum(totalitems) 
           FROM 
               [DrySoftBranch].[dbo].[mnthItemWiseTotalQty] ('1') AS BkdQty
           group by duration
          )

select 
    c.duration, 
    c.totalbookings, 
    d.bkdqty 
from
    c 
    inner join d 
    on c.duration = d.duration 
```

当我运行这个时，我得到

> *消息 8155，级别 16，状态 2，第 1 行
> 没有为“d”的第 2 列指定列。*

谁能告诉我我做错了什么？

另外，当我运行这个时，

```
with c as (select 
               month(bookingdate) as duration, 
               count(*) as totalbookings 
           from 
               entbookings
           group by month(bookingdate)
          ),
     d as (select 
               month(clothdeliverydate), 
               SUM(CONVERT(INT, deliveredqty)) 
           FROM 
               barcodetable
           where 
               month(clothdeliverydate) is not null
               group by month(clothdeliverydate)
          )

select 
    c.duration, 
    c.totalbookings, 
    d.bkdqty 
from
    c 
    inner join d 
    on c.duration = d.duration 
```

我明白了

> *消息 8155，级别 16，状态 2，第 1 行
> 没有为“d”的第 1 列指定列。
> 消息 8155，级别 16，状态 2，第 1 行
> 没有为“d”的第 2 列指定列。*

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-25T04:23:28.000

您只需为 CTE 中的聚合列提供别名

```
d as (SELECT 
   duration, 
   sum(totalitems) as sumtotalitems
FROM 
   [DrySoftBranch].[dbo].[mnthItemWiseTotalQty] ('1') AS BkdQty
group by duration
) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-08-25T04:14:47.897

[编辑]

我试图重写您的查询，但是一旦您将别名与定义“d”的查询中的聚合列相关联，即使您的查询也将起作用。

* * *

我认为您正在寻找以下内容：

第一：

```
select 
    c.duration, 
    c.totalbookings, 
    d.bkdqty 
from
    (select 
               month(bookingdate) as duration, 
               count(*) as totalbookings 
           from 
               entbookings
           group by month(bookingdate)
    ) AS c 
    inner join 
    (SELECT 
               duration, 
               sum(totalitems) 'bkdqty'
           FROM 
               [DrySoftBranch].[dbo].[mnthItemWiseTotalQty] ('1') AS BkdQty
           group by duration
    ) AS d 
    on c.duration = d.duration 
```

第二个：

```
select 
    c.duration, 
    c.totalbookings, 
    d.bkdqty 
from
    (select 
               month(bookingdate) as duration, 
               count(*) as totalbookings 
           from 
               entbookings
           group by month(bookingdate)
    ) AS c 
    inner join 
    (select 
               month(clothdeliverydate) 'clothdeliverydatemonth', 
               SUM(CONVERT(INT, deliveredqty)) 'bkdqty'
           FROM 
               barcodetable
           where 
               month(clothdeliverydate) is not null
               group by month(clothdeliverydate)
    ) AS d 
    on c.duration = d.duration 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-03-02T04:02:07.133

我有一个类似的查询和类似的问题。

```
SELECT
    *
FROM
    Users ru
    LEFT OUTER JOIN 
    (
        SELECT ru1.UserID, COUNT(*)
        FROM Referral r
        LEFT OUTER JOIN Users ru1 ON r.ReferredUserId = ru1.UserID
        GROUP BY ru1.UserID
    ) ReferralTotalCount ON ru.UserID = ReferralTotalCount.UserID 
```

我发现 SQL Server 在`COUNT(*)`列上阻塞，并给我错误*No column was specified for column 2*。

在列上添加别名`COUNT(*)`解决了这个问题。

```
 SELECT
        *
    FROM
        Users ru
        LEFT OUTER JOIN 
        (
            SELECT ru1.UserID, COUNT(*) AS -->MyCount<--
            FROM Referral r
            LEFT OUTER JOIN Users ru1 ON r.ReferredUserId = ru1.UserID
            GROUP BY ru1.UserID
        ) ReferralTotalCount ON ru.UserID = ReferralTotalCount.UserID 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-25T04:37:25.270

因为您正在创建一个表表达式，所以您必须指定该表的结构，您可以通过两种方式实现：

1：在选择中，您可以使用原始列名（如在第一个示例中），但对于聚合，您必须使用别名（也在冲突的名称中）。喜欢

```
sum(totalitems) as bkdqty 
```

2：您需要在表格名称之后指定列名，然后您只需注意名称的数量应该与查询中选择的库尔数相匹配。喜欢：

```
d (duration, bkdqty) 
AS (Select.... ) 
```

使用第二种解决方案，您的两个查询都将起作用！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-25T10:49:55.123

很直观的错误信息——只需要给出 d 名称中的列

更改为此

```
d as 
 (
  select                 
     [duration] = month(clothdeliverydate),                 
     [bkdqty] = SUM(CONVERT(INT, deliveredqty))             
  FROM                 
     barcodetable            
  where                 
     month(clothdeliverydate) is not null                
  group by month(clothdeliverydate)           
 ) 
```

或者您可以在 cte 的定义中显式声明字段：

```
d ([duration], [bkdqty]) as 
 (
  select                 
     month(clothdeliverydate),                 
     SUM(CONVERT(INT, deliveredqty))             
  FROM                 
     barcodetable            
  where                 
     month(clothdeliverydate) is not null                
  group by month(clothdeliverydate)           
 ) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-22T07:34:21.503

只需添加一个别名，如下
sum(totalitems) 作为 totalitems。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-08-15T01:21:56.353

单个 with 子句可以通过用逗号分隔多个查询名称来引入多个查询名称，**但每个列都必须有一个名称**

在这种情况下，第二个查询有一列没有：

```
 as (SELECT 
               duration, 
               sum(totalitems) --**HERE IS A MISSING NAME**
 FROM ... 
```

就这样。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-24T12:28:18.130

显然，如解析器响应中所述，两种情况都需要列名。在任何一个版本中，“d”的列都没有命名。

情况 1：您的 d 的第 2 列`sum(totalitems)`未命名。`duration`将保留名称“duration”

情况2：两者`month(clothdeliverydate)`都`SUM(CONVERT(INT, deliveredqty))`必须命名

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-08-25T06:41:06.050

消息 8155，级别 16，状态 2，第 1 行没有为“d”的第 1 列指定列。消息 8155，级别 16，状态 2，第 1 行没有为“d”的第 2 列指定列。回答：

ROUND(AVG(CAST(column_name AS FLOAT)), 2) as column_name

# database - 显示 redis 中的所有键 - 在一行中

> ID：12119075
> 
> 赞同：27
> 
> 时间：2012-08-25T04:06:28.250
> 
> 标签：database, linux, redis

我需要查看 Redis 中的所有可用密钥。这个问题：

[Redis命令获取所有可用密钥？](https://stackoverflow.com/questions/5252099/redis-command-to-get-all-available-keys)

充分涵盖了我`redis-cli`不带参数运行的情况，然后键入`keys *`.

但是，如何使用单个命令获取所有键？

`redis-cli keys *`返回：

> （错误）ERR 错误的“keys”命令的参数数量

即使设置了键，也可以检查您是否使用双命令解决方案。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-25T04:25:31.753

你需要做

```
redis-cli keys '*' 
```

以避免您的外壳扩展`*`为文件名列表。

# javascript - 如何保存 iframe (scrollto) 的 x 和 y？是否可以？

> ID：12119078
> 
> 赞同：1
> 
> 时间：2012-08-25T04:07:53.910
> 
> 标签：javascript, iframe, scroll

在寻找了几个小时并没有找到答案之后，我决定来找你，哦，我一直在寻求帮助的伟大社区。我有一个 iframe，当我的用户滚动时，他们离开，然后回来，我们想使用 scrollto 来回到正确的位置。那么如何保存/导出/添加到变量这个 iframe 的 x 和 y 或者那是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:25:41.767

您需要采取的第一步是获取 x/y 分量。`elem.scrollTop`您可以通过使用和来实现这一点`elem.scrollLeft`。将这些记录到本地存储，使用`onscroll`事件检测滚动。然后，下一页加载，将记录的 x/y 组件分配给 iframe 的`elem.scrolLTop`和`elem.scrollLeft`。

```
var frame = document.getElementById("frame");

frame.contentWindow.addEventListener("scroll", function(){
    sessionStorage.setItem("coordinates", this.scrollLeft + "," + this.scrollTop);
}, false);

window.addEventListener("load", function(){
    if(sessionStorage.getItem("coordinates")){
        var coordinates = sessionStorage.getItem("coordinate").split(",");
        frame.scrollLeft = coordinates[0];
        frame.scrollTop = coordinates[1];
    }
}, false); 
```

注意：未经测试，很可能保证在不修改以清除错误的情况下无法工作。

**编辑：我意识到 iframe 不能处理`onscroll`，所以你必须找到一个解决方法......**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:09:34.677

您可以使用此 jquery 插件将 x,y 变量保存到 cookie：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

例子：

```
$(window).unload(function() {
    //save scroll on unload
    $.cookie('scroll_x',$("#yourElementId").scrollLeft());
    $.cookie('scroll_y',$("#yourElementId").scrollTop());
});
$(document).ready(function() {
    //restore scroll when the dom is ready
    var x = $.cookie('scroll_x');
    var y = $.cookie('scroll_y');
    if( x != null ) $("#yourElementId").scrollLeft(x);
    if( y != null ) $("#yourElementId").scrollTop(y);
}); 
```

您要滚动的元素的 id 是“yourElementId”。

# c# - 泛型中值和引用类型的接口

> ID：12119080
> 
> 赞同：0
> 
> 时间：2012-08-25T04:08:39.870
> 
> 标签：c#, generics

我正在创建一个接口，该接口将由将用作过滤器以创建查询字符串的类实现。每个过滤器将负责在查询中构造一个参数。用户可以定义是否包含运算符以及运算符应该是什么以及值。值的表达方式取决于数据类型。

**布尔值：** “= 0”

**整数：** “ >= 2”

**日期时间：** “ <> '2012-01-10'”

**字符串：** “='一些字符串'”

```
public interface IFilter<T> 
{
    Nullable<T> Value { get; set; }
    String Operator { get; set; }
    Boolean IncludeOperator { get; set; }
} 
```

该接口将由一个抽象类实现，该类定义基本字段、属性并覆盖 ToString 方法；以及一个抽象的 GetValueAsString() 方法，应该重写该方法以执行从过滤器构造适当字符串所需的任何逻辑。

```
public abstract class Filter<T> : IFilter<T> 
{
    Nullable<T> _value;
    String _operator = "=";
    Boolean _includeOperator = false;

    public Nullable<T> Value { get { return this._value; } set { this._value = value; } }

    public String Operator { get { return this._operator; } set { this._operator = value; } }

    public Boolean IncludeOperator { get { return this._includeOperator; } set { this._includeOperator = value; } }

    public override string ToString()
    {
        String param = GetValueAsString();
        if (param != null && this.IncludeOperator)
            return this.Operator + " " + param;
        else if (param != null && !this.IncludeOperator)
            return param.Trim();
        else
            return null;
    }

    protected abstract String GetValueAsString();
} 
```

我想创建从接口和抽象类派生的类型化过滤器。每个过滤器都知道如何将特定类型转换为字符串以包含在查询中，但每个过滤器都需要遵守 IFilter 接口，它可以通过继承 Filter 基类来做到这一点。

```
public class IntFilter: Filter<Int64>
{
    protected override string GetValueAsString()
    {
        // Convert the integer to a string
        return this.Value.Value.ToString();
    }
}

public class BooleanFilter : Filter<Boolean>
{
    protected override string GetValueAsString()
    {
        // convert the Boolean to a BIT value 1=True / 0=False
        return (this.Value.HasValue && this.Value.Value) ? "1" : "0";
    }
}

public class DateTimeFilter : Filter<DateTime>
{
    protected override string GetValueAsString()
    {
        // Convert the DateTime to a dateTime string in the following format - 2/27/2009 12:12:22 PM
        return (this.Value.HasValue) ? this.Value.Value.ToString("G") : null;
    }
} 
```

这就是它变得棘手的地方......我需要为字符串类型创建一个过滤器，但使用相同的接口和抽象类。

```
public class StringFilter : Filter<String>
{
    protected override string GetValueAsString()
    {
        // Convert the integer to a string
        return this.Value.Value.ToString();
    }
} 
```

我需要能够将这些过滤器中的任何一个传递到以下方法中......

```
ExecuteQuery( IFilter filter ); 
```

您可以看到对 Reference 和 Value 类型都使用泛型类型存在问题。有谁知道我如何为所有类型的过滤器类使用相同的接口？***这***可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:35:18.490

您可以将 Nullable<> 从定义中提取出来，然后将它们传递给实现。这是一个例子：

```
public interface IFilter<T>
{
    T Value { get; set; }
    String Operator { get; set; }
    Boolean IncludeOperator { get; set; }
}

public abstract class Filter<T> : IFilter<T>
{
    T _value;
    String _operator = "=";
    Boolean _includeOperator = false;

    public T Value { get { return this._value; } set { this._value = value; } }

    public String Operator { get { return this._operator; } set { this._operator = value; } }

    public Boolean IncludeOperator { get { return this._includeOperator; } set { this._includeOperator = value; } }

    public override string ToString()
    {
        String param = GetValueAsString();
        if (param != null && this.IncludeOperator)
            return this.Operator + " " + param;
        else if (param != null && !this.IncludeOperator)
            return param.Trim();
        else
            return null;
    }

    protected abstract String GetValueAsString();
}

public class IntFilter : Filter<Nullable<Int64>>
{
    protected override string GetValueAsString()
    {
        // Convert the integer to a string
        return this.Value.HasValue ? this.Value.ToString() : "0";
    }
}

public class BooleanFilter : Filter<Nullable<Boolean>>
{
    protected override string GetValueAsString()
    {
        // convert the Boolean to a BIT value 1=True / 0=False
        return (this.Value.HasValue && this.Value.Value) ? "1" : "0";
    }
}

public class DateTimeFilter : Filter<Nullable<DateTime>>
{
    protected override string GetValueAsString()
    {
        // Convert the DateTime to a dateTime string in the following format - 2/27/2009 12:12:22 PM
        return (this.Value.HasValue) ? this.Value.Value.ToString("G") : null;
    }
}

public class StringFilter : Filter<String>
{
    protected override string GetValueAsString()
    {
        return string.IsNullOrWhiteSpace(Value) ? "" : Value;
    }
} 
```

# android - 活动不会通过本地数据库进行身份验证

> ID：12119081
> 
> 赞同：0
> 
> 时间：2012-08-25T04:08:52.163
> 
> 标签：android, sqlite, nullpointerexception, logcat, onclicklistener

我遇到问题的程序是一个登录页面，它使用 sqlite db 进行身份验证，并使用注册页面将数据插入到 db 中。我能够将数据插入数据库，但我的登录类没有从 dn 中提取信息进行身份验证，而且我没有收到任何错误。

我在我的登录类中放了一个 printstackrtace() 但不确定信息实际上在说什么。

数据库类：

```
 public class LoginDB extends SQLiteOpenHelper {

//Table attributes
public static final String DATABASE_NAME = "logindatadb";
public static final int DATABASE_VERSION = 1;
public static final String TABLE_NAME_CREDENTIALS = "credentials";

// Data attributes
public static final String COLUMN_NAME_USERNAME = "username";
public static final String COLUMN_NAME_PASSWORD = "passcode";

private static SQLiteOpenHelper DBHelper;
private static SQLiteDatabase db;

public LoginDB(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub      

        String sqlDataStore = "create table if not exists " +
        TABLE_NAME_CREDENTIALS + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null);";

        db.execSQL(sqlDataStore);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        if(oldVersion == 1 && newVersion == 2){
            //Upgrade the database
    }   

}

    public static boolean Login(String username, String password) {
        Cursor c =  db.rawQuery(
                "SELECT * FROM " + DATABASE_NAME + " WHERE "
                        + COLUMN_NAME_USERNAME + " = '" + username +"' AND "+ COLUMN_NAME_PASSWORD +" = '"+ password +"'" ,  null);
       if (c.getCount()>0)
          return true;
          return false;
    }

    public void open() {
        // TODO Auto-generated method stub
        db = DBHelper.getWritableDatabase();
    }
    public void close() {
        db.close();
    } 
```

}

登记：

```
 private void insertCredentials(RegDetails regDetails){

        LoginDB androidOpenDBHelper = new LoginDB(this);

        SQLiteDatabase sqliteDB = androidOpenDBHelper.getWritableDatabase();

        ContentValues contentValues = new ContentValues();

        contentValues.put(LoginDB.COLUMN_NAME_USERNAME, rUsername);
        contentValues.put(LoginDB.COLUMN_NAME_PASSWORD, rPasscode);

        long affectedColumnid = sqliteDB.insert(LoginDB.TABLE_NAME_CREDENTIALS, null, contentValues);

        Toast.makeText(getApplicationContext(), "Credentials Saved! Please login" + affectedColumnid, Toast.LENGTH_SHORT).show();

        sqliteDB.close();
        finish();
    }   

  } 
```

登录：

```
 lsLogin.setOnClickListener (new OnClickListener() {

                @Override
                public void onClick(View v) {
                    //check login
                    String username = lsUsername.getText().toString();
                    String password = lsPassword.getText().toString();
                    try{
                        if(username.length()>0 && password.length()>0)
                        {
                            LoginDB dbUser = new LoginDB(LoginScrExample.this);
                            dbUser.open();

                        if(LoginDB.Login(username, password)) {
                            Intent goToNextActivity = new Intent(getApplicationContext(), menu.class);
                            startActivity(goToNextActivity);

                                Toast.makeText(LoginScrExample.this,"Login Sucessful",Toast.LENGTH_LONG).show();
                            }else{
                                Toast.makeText(LoginScrExample.this,"Invalid Username/Password",Toast.LENGTH_LONG).show();
                            }
                        dbUser.close();
                            }
                    }
                    catch(Exception err){
                        err.printStackTrace();
                        Toast.makeText(LoginScrExample.this," Something is wrong " ,Toast.LENGTH_LONG).show();

                    }

                    }
                       {

                       }    

                                            }
                            ); 
```

尝试身份验证时的 Logcat：

```
 08-23 14:34:58.713: W/System.err(1396): java.lang.NullPointerException
     08-23 14:34:58.733: W/System.err(1396):    at com.LoginScr.Example.LoginDB.open(LoginDB.java:68)
     08-23 14:34:58.733: W/System.err(1396):    at com.LoginScr.Example.LoginScrExample$1.onClick(LoginScrExample.java:53)
     08-23 14:34:58.733: W/System.err(1396):    at android.view.View.performClick(View.java:3511)
     08-23 14:34:58.733: W/System.err(1396):    at android.view.View$PerformClick.run(View.java:14105)
     08-23 14:34:58.753: W/System.err(1396):    at android.os.Handler.handleCallback(Handler.java:605)
     08-23 14:34:58.753: W/System.err(1396):    at android.os.Handler.dispatchMessage(Handler.java:92)
     08-23 14:34:58.763: W/System.err(1396):    at android.os.Looper.loop(Looper.java:137)
     08-23 14:34:58.775: W/System.err(1396):    at android.app.ActivityThread.main(ActivityThread.java:4424)
     08-23 14:34:58.775: W/System.err(1396):    at java.lang.reflect.Method.invokeNative(Native Method)
     08-23 14:34:58.775: W/System.err(1396):    at java.lang.reflect.Method.invoke(Method.java:511)
     08-23 14:34:58.783: W/System.err(1396):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
     08-23 14:34:58.783: W/System.err(1396):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
     08-23 14:34:58.783: W/System.err(1396):    at dalvik.system.NativeStart.main(Native Method)
     08-23 14:35:20.533: W/IInputConnectionWrapper(1396): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:49:52.130

```
 db = DBHelper.getWritableDatabase(); 
```

尝试将其更改为

```
 db = this.getWritableDatabase(); 
```

因为您的助手类名称不是 db helper 并且您刚刚声明了 DBHelper 这就是它不显示编译错误的原因

# java - 迄今为止最好的 Java 反混淆工具 - [ques Closed]

> ID：12119082
> 
> 赞同：2
> 
> 时间：2012-08-25T04:09:14.443
> 
> 标签：java, obfuscation, deobfuscation

我们已经混淆了我们的 java 源代码并且目前正在处理它，所以让我们的源代码傻瓜证明混淆时要做什么？，如何防止去混淆？和

目前可用的所有去混淆开源工具有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T04:53:50.583

没有反混淆工具这样的东西。您实际上在谈论的是反编译器。

一个好的混淆器将消除反编译器生成可读源代码所需的大部分线索。但是，无论如何，它不会阻止具有足够技能和决心的人对您的代码进行逆向工程。事实上，您无能为力。

如果您想判断它的难易程度，那么最好的答案是尝试自己进行逆向工程……使用您可以掌握的**所有反编译器。**（我想你真的很担心有人攻击关键部分......比如许可证密钥检查。所以专注于逆向工程/规避它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:13:57.107

对于 Java，我过去曾成功使用过这个混淆工具：http: [//proguard.sourceforge.net/#](http://proguard.sourceforge.net/#)

作为奖励，它还缩小了代码。

我从未尝试过混淆我的 c/c++ 代码。这是我知道的用于 c/c++ 的混淆器之一，尽管我从未使用过它： http: [//freecode.com/projects/cxx-obfus](http://freecode.com/projects/cxx-obfus)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T04:15:39.900

我们在公司使用[Proguard](http://proguard.sourceforge.net/)。

# .htaccess - 在 .htaccess 中使用正则表达式进行 301 重定向

> ID：12119083
> 
> 赞同：0
> 
> 时间：2012-08-25T04:09:15.067
> 
> 标签：.htaccess, redirect

我突然被数百个 404 抓取错误击中，这些错误必须是在以前的网站上的页面（尽管我认为我已经得到了所有......）。这有点奇怪，因为我从未见过任何包含 index.php 的页面，但所有错误都以 index.php/xxxxx 开头。

所以，我想做以下事情：

> 重定向 301 index.php/ `<wildcard>` [http://www.example.com](http://www.example.com)

在`.htaccess`文件中。

有人可以告诉我这是否正确，`<wildcard>`如果是，我必须放在哪里？如果这是不正确的，那么完成此操作的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:28:27.303

您可以在 htaccess 文件中使用 Redirect 指令并执行一个简单的正则表达式，假设您的站点不像某些 PHP 框架那样使用 /index.php/query/parameters。

```
Redirect 301 /index.php/(.+) http://www.mysite.com 
```

# graph-databases - 在 OrientDB 中对来自不同边缘的属性进行计算

> ID：12119084
> 
> 赞同：1
> 
> 时间：2012-08-25T04:09:45.727
> 
> 标签：graph-databases, orientdb

我有这个独特的问题，我想根据不同边缘返回的值进行计算，但它似乎对我不起作用。

我的图表功能是跟踪人们收藏的万智牌：收集卡。请使用图表作为我的问题的说明。

![图形](../Images/865eb05ef63c65696f4bc3b327881a0d.png)

我想以此`#8:0`为起点，看看哪些牌组 ( `MDeck`) 有`MCard`我拥有的牌 ( )，并计算我收藏中已有牌组的百分比。我的查询是这样开始的：

```
SELECT FROM (SELECT FLATTEN(out[label="has"]) FROM #8:0) WHERE in.in.size() > 1 
```

这是为了得到我拥有的属于套牌的卡片。接下来，如果我的某张牌比甲板上所需的多，我只会计算所需的数量，所以我必须使用 MIN()。这就是问题出现的地方：

```
SELECT
MIN(UNION(in.in[label="includes"].qty, qty))
FROM (
    SELECT
    FLATTEN(out[label="has"])
    FROM #8:0
)
WHERE in.in.size() > 1 
```

我认为这可以解决问题，但它只是返回 null。我确保所有 qty 字段都是整数。我错过了什么吗？

谢谢，

拉蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T11:15:34.000

您是否有一个公共数据库可以在其中使用 OrientDB 控制台或 Studio 执行查询？

如果不能，您可以在此处报告最后一个查询的中间结果吗？例如：

```
SELECT
in.in[label="includes"].qty
FROM (
    SELECT
    FLATTEN(out[label="has"])
    FROM #8:0
)
WHERE in.in.size() > 1 
```

接着：

```
SELECT
UNION(in.in[label="includes"].qty, qty)
FROM (
    SELECT
    FLATTEN(out[label="has"])
    FROM #8:0
)
WHERE in.in.size() > 1 
```

# html5-canvas - 让 HTML5 画布像 TclTK 画布一样进行缩放/翻译？

> ID：12119085
> 
> 赞同：0
> 
> 时间：2012-08-25T04:09:47.890
> 
> 标签：html5-canvas

我正在尝试将我 20 年前编写的 TclTK 程序移植到 HTML5。

经过数小时的挫折，我了解到当您“缩放”或“翻译”HTML5 的画布元素时，它仅适用于未来的绘图，而不适用于画布上已有的项目。

这与 TclTK 相反，其中已经在画布上的项目被缩放/翻译。

没有创建一个绘制/重绘循环（当我想缩放/翻译时，我自己清除画布并重绘所有对象），是否有办法让 HTML5 的画布元素表现得像 TclTK 的一样？

还是我错过了一些大事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:11:04.520

Canvas 2D 上下文基于像素级图像处理——它不是您显然熟悉的“保留模式”图形界面。从字面上看，您的图形没有记录可以重绘。如果你想改变图形，你必须以某种方式重新绘制它们。

最后，一切都在重绘（尽管重绘可能隐藏在您的代码中），但有一些方法可以减少您必须做的工作量。以下是一些选项，大致按照您必须对代码进行的更改量排序（大致按照提高质量/性能的顺序）：

*   在画布上绘制图形，然后使用 CSS 属性缩放和平移画布本身（*而不是*画布的宽度和高度属性，这将清除它）。这将重新缩放图像，可能会降低质量，因为您没有针对当前比例重新绘制它。

*   在画布上绘制图形，然后将它们导出到一个`ImageData`或数据 URL，然后在需要时将其重新绘制到画布上。再次，可能会失去质量。

以上两个本质上是继续使用您已经编写的画布代码的工具。要获得像您描述的 TK 那样的适当系统，您需要：

*   构建您自己的场景图：创建一组表示图形的对象，如`Circle`、`Line`等，以及用于存储比例和位置等变换属性的容器。然后编写例程来遍历此图并在需要重绘时执行适当的绘图命令。

*   请改用[SVG](http://www.w3.org/Graphics/SVG/)。SVG 是一种矢量图形语言，在现代浏览器中，您可以直接将其嵌入到 HTML 中，并像处理页面的其余部分一样在 JavaScript 中进行操作。在 SVG 中，您可以简单地更改比例属性并获得您期望看到的更改。

    （之前的选择基本上是重新发明了少量的 SVG。）

# android - 如何使用 Ant 自动化复杂的构建，包括多个项目和 jar 创建 + 混淆 Android？

> ID：12119091
> 
> 赞同：1
> 
> 时间：2012-08-25T04:11:50.393
> 
> 标签：android, ant, jar, obfuscation, apk

我确信这已经被问过很多次了（因为我发现了很多类似的问题和答案）但是，不知何故，我仍然无法解决这个问题。基本上，我在网上找到了教程，但没有一个对我有用->它们要么过时，而且我的 Ant 安装不喜欢这些教程中存在的 build.xml 文件，或者其他教程只是不给我所有我需要完成此操作的信息（天哪，事情真的应该变得更容易）。

所以，假设我有 3 个项目 -> 项目“Initial”、项目“DependsOnInitial”和项目“FinalDependsOnBoth”。因此，我需要创建一个脚本来自动执行“构建依赖于位于其 libs 目录中的其他第 3 方 jar 文件并创建混淆 jar 文件”（来自第 3 方的 .class 文件）的过程的脚本jars 不一定需要混淆），然后可以将其复制到“DependsOnInitial”项目的“libs”文件夹中。然后，该脚本将“为 'DependsOnInitial' 项目构建另一个 jar 文件，该项目也依赖于从 'Initial' 创建的 jar 文件以及其他 3rd 方 jar，然后对结果进行混淆并将其打包到一个 jar 中”。最后，脚本将“

实际上，我现在可以使用我拥有的脚本来执行此操作，但是当我的应用程序崩溃时，在引用混淆项目时似乎存在一些问题。

另外，请记住我使用的是最新的 Android 工具（我使用的是 SDK 工具的 Rev. 20.0.3 和 SDK Platform-tools 的 Rev. 14）；我在网上找到的许多 ant build.xml 示例都使用较旧的 ant 系统（我的 ant 系统将使用 ant.properties 和 local.properties 来设置它的许多内部值等）。

最好您的回复将包括一个完整的 build.xml，或者，一个在相关项目的 build.xml 文件（或某种组合）上调用 ant 的 bash 脚本。

（我这样做的原因是中间 jar 文件需要分发给其他合作伙伴，因此除了将进入市场的最终应用程序之外，还需要对其自身进行混淆）

# android - 在应用程序开始时应用检查以在不同的活动之间进行选择？

> ID：12119092
> 
> 赞同：1
> 
> 时间：2012-08-25T04:11:54.223
> 
> 标签：android, android-activity

我有两个活动，但我想在应用程序启动时应用一个条件，如果一个为真，则启动第一个活动，否则启动第二个活动。现在我正在通过启动第三个活动来显示一些受欢迎的内容并检查背景中的值......然后调用适当的活动。我认为必须有一些标准的方法来做到这一点。和平。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T04:40:47.197

由于您需要在清单中指定启动活动，因此您始终可以启动第一个活动，检查您的条件`onCreate()`以及是否需要启动第二个 - 启动第二个并调用`finish()`第一个活动。

否则通常人们使用启动活动来检查启动时的所有条件（这是您当前的解决方案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T19:37:32.230

不需要第三`Activity`个人来检查情况。

如果您只是让您的 MAIN/LAUNCHER`Activity`检查条件作为它所做的第一件事`onCreate(...)`（但在调用 之后`super.onCreate(...)`），它可以继续或调用`startActivity(...)`另一个`Activity`并立即调用`finish()`自我终止。

这样，`Activity`如果条件要求启动第二个，则永远不会看到第一个`Activity`。

例子..

```
public class FirstActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Don't even set the content view at this point
        // we want to be invisible for the moment

        // Pseudo-code check for condition
        if (!runMe) {
            Intent i = new Intent(this, SecondActivity.class);
            startActivity(i);
            finish();
        }
        else {
            // Continue as normal
            setContentView(R.layout.main);
            ...
        }
    }
} 
```

# iphone - 强制使用 NavigationController？

> ID：12119094
> 
> 赞同：1
> 
> 时间：2012-08-25T04:12:57.443
> 
> 标签：iphone, ios5, ios4

我是 iOS 新手。我已经阅读了很多教程，并且我看到大多数在多个视图中使用 NavigationController 的示例。我们总是强制使用 NavigationController？

如果我有一个视图，在我的视图上我有一个 button1，当我单击该按钮时，它将打开一个新视图。我还有另一个 button2，当我单击 button2 时，原始视图上会显示一个对话框。那么在这种情况下，我还得使用 NavigationController 吗？我可以使用另一个控制器？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:33:06.773

导航控制器不是唯一的选择...如果您以需要导航的方式制作应用程序的流程，那么只有您应该使用导航控制器..否则还有另一个选项，例如 presentModalViewController，您也可以使用在原始视图中显示对话框时隐藏/显示视图。如果你能详细说明你的问题，那么我可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:22:06.680

您使用导航控制器主要是出于审美原因和用户体验的连续性。你当然可以使用按钮，但导航控制器更像是多视图的标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T05:40:51.417

没有必要使用导航控制器。您可以使用 Quartz 核心动画效果提供类似的侧面过渡（从左到右或从右到左）。

```
Home *homeObject=[[Home alloc] init];
CATransition *animation = [CATransition animation];
[self presentModalViewController:homeObject animated:NO];
[animation setDuration:0.40];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];
[[homeObject.view layer] addAnimation:animation forKey:@"SwitchToView1"];
[homeObject release]; 
```

# c# - 传入函数

> ID：12119095
> 
> 赞同：0
> 
> 时间：2012-08-25T04:13:50.650
> 
> 标签：c#

我想重载一个函数而不使用可选参数。当我使用泛型时，我遇到了问题；但是，它适用于简单类型。我很困惑，所以感谢您的帮助。B 类使用 int 来验证我的语法；而C类是我想要完成的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace X
{
    class A
    {
    }
    class B
    {

        public static int f(int i1, int i2)
        {
            return i1 + 12;
        }
        public int ix(Func<int,int,int> f1,int v1)
        {
            return 1;
        }
        public void iy(Func<int, int, int> f1, int v1)
        {
            int i = ix(f1, 1);
        }
        public void iz()
        {
            int i = ix(f, 1);
        }
    }

    class C
    {
        public static List<A> f(List<A> a, int v)
        {
            return new List<A>();
        }
        public int ax(Func<List<A>, List<A>, int> f1, int v1)
        {
            return 1;
        }
        public void ay(Func<List<A>, List<A>, int> f1, int c)
        {
            int i = ax(f1, c);
        }
        public void az()
        {
            int i = ax(f, 1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:24:53.277

你有一个小错误。您的方法签名不匹配。

您需要更改 CF(..) 的定义，它应该是：

```
public static int f(List<A> a, List<A> b)
{
    return 1; //List<A>();
} 
```

# php - SOAP WSDL 错误：没有与

> ID：12119099
> 
> 赞同：0
> 
> 时间：2012-08-25T04:14:12.813
> 
> 标签：php, soap

我是肥皂新手，这是我第一次研究它。在通过网络上的各种教程后，我已经能够创建我的第一个肥皂服务。我还被要求为其创建 wsdl 文件。我已经这样做了，但它给了我错误。

```
 <?xml version='1.0' encoding='UTF-8'?>
    <definitions name="FistMobileTest" targetNamespace="urn:FistMobileTest" xmlns:typens="urn:FistMobileTest" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/"><message name="describe"><part name="geonameId" type="xsd:anyType"></part></message><message name="describeResponse"></message><message name="geolocate"><part name="lat" type="xsd:anyType"></part><part name="lng" type="xsd:anyType"></part></message><message name="geolocateResponse"></message>

    <portType name="my_geo_soap_wrapperPortType"><operation name="describe"><input message="typens:describe"></input><output message="typens:describeResponse"></output></operation><operation name="geolocate"><input message="typens:geolocate"></input><output message="typens:geolocateResponse"></output></operation></portType>

    <binding name="my_geo_soap_wrapperBinding" type="typens:my_geo_soap_wrapperPortType"><soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"></soap:binding>

    <operation name="describe">
        <soap:operation soapAction="urn:my_geo_soap_wrapperAction"></soap:operation>
        <input><soap:body namespace="urn:FistMobileTest" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"></soap:body></input>
        <output><soap:body namespace="urn:FistMobileTest" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"></soap:body></output></operation><operation name="geolocate"><soap:operation soapAction="urn:my_geo_soap_wrapperAction"></soap:operation><input><soap:body namespace="urn:FistMobileTest" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"></soap:body></input><output><soap:body namespace="urn:FistMobileTest" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"></soap:body></output></operation></binding>

    <service name="FistMobileTestService">
    <port name="my_geo_soap_wrapperPort" binding="typens:my_geo_soap_wrapperBinding">
    <soap:address></soap:address></port>
    </service>

    </definitions> 
```

这是我的类文件的样子：

```
 <?php
class my_geo_soap_wrapper
{
    private $my_geo_app;

    public function set_geo_app($tmp_my_geo_app)
    {
        $this->my_geo_app = $tmp_my_geo_app;
    }

    //should return long
    public function geolocate(double $lat, double $lng)
    {
        return $this->my_geo_app->geolocate($lat,$lng);
    }

    //should return array
    public function describe(long $geonameId)
    {
        return $this->my_geo_app->describe($geonameId);
    }

    public function initiate()
    {

        //start server

        $server = new SoapServer('firstmobile.wsdl', array('uri' => "urn://localhost/firstmobile"));
        $server->setObject($this);
        $server->handle();

    }

}
?> 
```

**我得到的错误：**

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Body>
<SOAP-ENV:Fault>
<faultcode>WSDL</faultcode>
<faultstring>
SOAP-ERROR: Parsing WSDL: No location associated with <port>
</faultstring>
</SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:39:33.190

您是否尝试设置具有正确端口的端点？

```
<service name="FistMobileTestService">
<port name="my_geo_soap_wrapperPort" binding="typens:my_geo_soap_wrapperBinding">
<soap:address location="http://localhost:8080/test.wsdl></soap:address></port>
</service> 
```

# java - Java 异常处理 无效输入

> ID：12119100
> 
> 赞同：6
> 
> 时间：2012-08-25T04:14:14.797
> 
> 标签：java, exception, input, exception-handling

我正在尝试 Java 的异常处理。

我无法从文档中理解如何执行此操作，但我想要做的是检测无效输入，以便我的开关在激活默认情况时引发错误。这对我来说可能是不正确的逻辑，但我想知道是否有人可以用简单的英语将我推向正确的方向。

```
char choice = '0';
while (choice != 'q'){
     printMenu();
     System.in.read(choice);

     case '1': DisplayNumAlbums();
     case '2': ListAllTitles();
     case '3': DisplayAlbumDetail();
     case 'q': System.out.println("Invalid input...");
     return;
     default: System.out.println("Invalid input...");
     //Exception handling here
     //Incorrect input
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T04:22:46.470

我假设您的错误是经过深思熟虑的，因此我将使用您自己的代码来制作您要求的用法示例。因此，拥有一个正在运行的程序仍然是您的责任。

完成异常处理机制是为了让您在遇到某些错误条件时抛出异常，就像您的情况一样。假设您的方法被调用`choiceOption`，您应该这样做：

```
public void choiceOption() throws InvalidInputException {
    char choice = "0";

    while (choice != "q"){
        printMenu();

        System.in.read(choice);
        switch(choice){
        case "1": DisplayNumAlbums();
        case "2": ListAllTitles();
        case "3": DisplayAlbumDetail();
        case "q": System.out.println("Invalid input...");
                  return;
        default: System.out.println("Invalid input...");
                 throw new InvalidInputException();
        }
    }
} 
```

这使您可以在客户端捕获抛出的异常（您拥有的任何客户端：文本、胖客户端、Web 等）并让您采取自己的客户端操作，即如果您正在使用摇摆，则显示 JOptionPane 或添加面孔消息，如果您正在使用 JSF 作为您的视图技术。

请记住，这`InvalidInputException`是一个必须扩展异常的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T04:28:44.533

如果您的代码在方法内，您可以声明该方法抛出异常，

```
void method throws Exception(...){} 
```

并且方法的调用必须在 try-catch 块中

```
try{
 method(...);
}catch(SomeException e){
 //stuff to do
} 
```

或者你可以

```
while(){
 ...
 try{
  case...
  default:
   throw new IllegalArgumentException("Invalid input...");
 }catch(IllegalArgumentException iae){
  //do stuff like print stack trace or exit
  System.exit(0);
 }
} 
```

# ios - Objective-C For-In 循环获取索引

> ID：12119103
> 
> 赞同：25
> 
> 时间：2012-08-25T04:14:59.617
> 
> 标签：ios, objective-c, for-loop, nsarray

考虑以下语句：

```
for (NSString *string in anArray) {

    NSLog(@"%@", string);
} 
```

如何`string`在`anArray`不使用传统`for`循环且不检查`string`in 中每个对象的值的情况下获取 in 的索引`anArray`？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-25T04:16:37.493

数组保证按对象顺序迭代。所以：

```
NSUInteger index = 0;
for(NSString *string in anArray)
{
    NSLog(@"%@ is at index %d", string, index);

    index++;
} 
```

或者，使用块枚举器：

```
[anArray
    enumerateObjectsUsingBlock:
       ^(NSString *string, NSUInteger index, BOOL *stop)
       {
           NSLog(@"%@ is at index %d", string, index);
       }]; 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2014-02-03T10:38:58.967

试试这个。

```
for (NSString *string in anArray)
{
  NSUInteger index = [anArray indexOfObject:string];
} 
```

# ruby-on-rails - 为什么 rspec 告诉我这个用户是有效的

> ID：12119105
> 
> 赞同：1
> 
> 时间：2012-08-25T04:15:29.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rspec

我在 Rails 中有以下课程，并且正在编写一些 rspec 测试（任何批评都非常受欢迎，因为我是 rspec 的 noOOb）。

类用户.rb

```
class User < ActiveRecord::Base

email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

validates :email, :presence   => true ,
                  :format     => { :with => email_regex },
                  :uniqueness => { :case_sensitive => true },
                  :on => :create
end 
```

在 factory.rb 中

```
FactoryGirl.define do
  factory :user do
    sequence(:name) { |n| "my-name#{n}" }
    sequence(:email) { |n| "blue#{n}@12blue.com" }
  end
end 
```

在我的 rspec (users_spec.rb) 中：

```
require 'spec_helper'

describe User do
  let(:user) { FactoryGirl.build(:user) }
  it { user.should be_valid }
  it { user.should be_a(User) }
  it { user.should respond_to(:email) }

  it { user.email = " " }
  it { user.should_not be_valid } # this is causing the error 
end 
```

并得到

```
1) User 
     Failure/Error: it { user.should_not be_valid }
       expected valid? to return false, got true 
```

但是根据验证，用户应该是无效的。这里发生了什么？我没有得到什么（我知道这是我的错）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:29:36.383

我假设测试失败让您感到惊讶，因为您认为用户电子邮件应该是`" "`.

在 rspec 中，每个示例都是独立的。这意味着您在前面的示例中所做的任何事情都会被遗忘。

在您的情况下，您的倒数第二个示例运行，构建一个新的有效 activerecord 用户，其电子邮件为`"blue4@12blue.com"`，覆盖该电子邮件，`" "`然后通过，因为它没有做出任何断言。

然后您的最后一个示例运行，构建一个新的、有效的 activerecord 用户，该用户的电子邮件是`"blue5@12blue.com"`并且失败，因为用户是有效的，它的电子邮件没有被覆盖。

你可能想要这样的东西：

```
it 'should validate the email' do
  user.email = " "
  user.should_not be_valid
end 
```

# javascript - 防止 Javascript 函数多次触发

> ID：12119107
> 
> 赞同：0
> 
> 时间：2012-08-25T04:15:35.937
> 
> 标签：javascript, jquery, javascript-events

[jsFiddle](http://jsfiddle.net/u7Qpj/)
我使用了一个自定义的下拉菜单，它在 jquery 事件和动画上运行。
当我通过 mouseenter 多次激活下拉菜单时会出现问题，这导致菜单向下滑动然后向上滑动几次。我尝试通过添加 .stop(true) 来修复它，这很成功，但它导致了类似[这样的其他问题。](https://stackoverflow.com/questions/12020534/drop-down-menu-cut-off-after-slideout/12020685#12020685) 我遵循了该建议（[此处为 jsFiddle](http://jsfiddle.net/fuABW/)），但它会导致更多没有吸引力的问题。

我需要一种方法来阻止函数冗余触发，但如果用户触发 .mouseleave 我仍然能够立即停止“向下滑动”然后“向上滑动”

我与自定义队列纠缠了 5 个小时，没有成功:(
欢迎任何想法、建议和批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:54:36.247

基本上它归结为延迟事件处理程序的执行。

```
var mouseoverTimer = null;    

$('.elem').mouseover(function(){

   clearTimeout(mouseoverTimer); //ignore previous trigger

   mouseoverTimer  = setTimeout(function(){ //wait to execute handler again
     //execute actual handler here
   }, 10);
}); 
```

如果在指定的时间间隔内调用了相同的处理程序，则挂起的执行将被取消并再次排队等待 10 毫秒后执行，希望在该时间间隔内没有后续触发器。

# php - 如何在codeigniter ci中加载javascript css文件

> ID：12119111
> 
> 赞同：7
> 
> 时间：2012-08-25T04:17:28.137
> 
> 标签：php, codeigniter

我想将我的网站迁移到 CI。我只是简单地从 index() 函数中的 ci 示例文件 welcome.php 修改，我加载要显示的视图。但是，我在头文件中放了许多 javascripts 和 css 文件。并调用它，`$this->load->view('header');` 但我无法正确加载 javascript 文件！谁能给我一些提示？很难配置如何设置正确的路径。

```
<script type="text/javascript" src="/assets/javascripts/order.js"></script> 
<script type="text/javascript" src="../assets/javascripts/order.js"></script>   
<script type="text/javascript" src="../../assets/javascripts/order.js"></script> 
```

我的控制器代码如下

```
 class Welcome extends CI_Controller {

public function index()
{
    $this->load->helper('url');     
    $this->base = $this->config->item('base_url');

    $this->load->view('header');
    $this->load->view('welcome_message');

} 
```

}

以下是我的文件夹结构

![在此处输入图像描述](../Images/5c23500f324e67eb7b678455279c94d1.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T04:25:57.370

将您的资产文件夹与`applications, system, assets`

不在应用程序中，而是在控制器中简单地加载`url`帮助程序类，在该控制器中调用标题视图部分，例如

```
$this->load->helper('url');
$this->load->view('header'); 
```

并简单地在你的头文件中使用这样的东西..
因为`$this->base_url()`返回`/`文件夹..

```
<script src="<?php echo $this->base_url();?>assets/javascript/jquery.js"></script> 
```

更改文件夹结构，因为应用程序文件夹中的访问仅适用于我所知道的核心部分..

如果您想了解有关[URL Helper的更多信息，请点击此处的链接](http://codeigniter.com/nightly_user_guide/helpers/url_helper.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T06:18:39.700

这是使用最少代码的最佳方式

```
<script src="<?php echo base_url('assets/javascript/jquery.js');?>"></script>
<script src="<?php echo base_url('assets/css/bootstrap.min.js');?>"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:18:52.323

Jogesh_p 的回答肯定会解决您遇到的资产加载问题。我想跟进你提出的这个问题

> 谢谢你或你的支持。顺便说一句，如果我想使用像 phpMailler 或 zend 框架这样的库。

您可以放入应用程序/库/

然后使用库的类名称将其加载到控制器中

```
$this->load->library('phpmailer'); 
```

您可以选择在构造函数或单个方法上加载。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T19:22:05.920

为了解决我的问题，我创建了辅助函数来加载资产。这是部署在我的应用程序中的代码。 *PS：首先我规划了一个好的/灵活的目录结构*

[ **some_helper.php** ]

```
/*
 * Created: 2017/12/14 00:28:30
 * Updated: 2017/12/14 00:28:39
 * @params
 * $url_structure = 'assets/js/%s.js'
 * $files = ['main.min', 'social']
 * $echo = FALSE
 *
 */

function load_js($files = [], $url_structure = NULL, $version = '1.0', $echo = FALSE){
    $html = "";
    foreach ($files as $file) {
        if($url_structure){
            $file = sprintf($url_structure, $file);
        }
        $file_url = base_url($file);
        $html .= "<script src=\"{$file_url}?v={$version}\"></script>";
    }
    if($echo) {
        echo $html;
    }
    return $html;
}

/*
 * Created: 2017/12/14 00:28:48
 * Updated: 2017/12/14 00:28:51
 * @params
 * $version = '1.0' // Later load from configuration
 * $url_structure = 'assets/js/%s.css'
 * $files = ['main.min', 'social']
 * $echo = FALSE
 *
 */

function load_css($files = [], $url_structure = NULL, $version = '1.0', $echo = FALSE){
    $html = "";
    foreach ($files as $file) {
        if($url_structure){
            $file = sprintf($url_structure, $file);
        }
        $file_url = base_url($file);
        echo "<link rel=\"stylesheet\" href=\"{$file_url}?v={$version}\">";
    }
    if($echo) {
        echo $html;
    }
    return $html;
} 
```

然后在视图中调用

[ **some_view.php** ]

```
$css = [
    'path' => 'assets/css/%s.css',
    'files' => ['bootstrap.min','style']
];
load_css($css['files'], $css['path'], '1.0', TRUE); 
```

希望它可以帮助某人。在 OP 的情况下`$css['path'] = 'application/assets/css/%s.css';`会成功。

更新了[Github](https://github.com/DrVishalKumarSahu/Codeigniter-Utilities-and-Tricks)上的代码，我将继续更新。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-07-14T17:49:00.273

资产/css/bootstrap.min.css"

```
 <!-- Include JS -->
    <script src="<?php echo base_url();?>assets/js/jquery.js"></script>
    <script src="<?php echo base_url();?>assets/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-07-15T05:10:24.830

```
function addcategory()
{
    //alert("<?php echo base_url();?>")
     $.ajax({
                complete: function() {}, //Hide spinner
                url : '<?php echo base_url();?>category/search',
                data:$('#add_category').serialize(),
                type : "POST",
                dataType : 'json',
                success : function(data) {
                    if(data.code == "200")
                    {
                        alert("category added successfully");
                    }

                        },
                beforeSend: function(XMLHttpRequest){}, //$.blockUI();
                        cache: false,
                        error : function(data) {
                            }
            });

} 
```

# delphi - 如何访问为子类中的另一个属性隐藏的属性？

> ID：12119112
> 
> 赞同：6
> 
> 时间：2012-08-25T04:17:32.783
> 
> 标签：delphi, oop

我正在编写一个[`TCustomDBGrid`](http://docwiki.embarcadero.com/Libraries/en/Vcl.DBGrids.TCustomDBGrid)后代组件，它需要访问受保护的属性 Options( )，它是[TCustomDBGrid](http://docwiki.embarcadero.com/Libraries/en/Vcl.DBGrids.TCustomDBGrid)对象[`TGridOptions`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Grids.TGridOptions)的父类 ( [`TCustomGrid`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Grids.TCustomGrid)) 的一部分。问题是在类中*重新引入*了具有相同名称但具有另一种类型（[TDBGridOptions](http://docwiki.embarcadero.com/Libraries/en/Vcl.DBGrids.TDBGridOptions)）的属性。*`TCustomDBGrid`*

 *检查简化此声明

```
 TCustomGrid=  = class(TCustomControl)
 protected
  //I need to access this property
  property Options: TGridOptions read FOptions write SetOptions
      default [goFixedVertLine, goFixedHorzLine, goVertLine, goHorzLine,
      goRangeSelect];
 end;

  TCustomDBGrid = class(TCustomGrid)
  protected
    //a property with the same name is reintroduced in this class
    property Options: TDBGridOptions read FOptions write SetOptions
      default [dgEditing, dgTitles, dgIndicator, dgColumnResize, dgColLines,
      dgRowLines, dgTabs, dgConfirmDelete, dgCancelOnExit, dgTitleClick, dgTitleHotTrack];   
  end;

  TDBGridEx = class(TCustomDBGrid)
  protected
    //inside of this method I need to access the property TCustomGrid.Options
    procedure FastDraw(ACol, ARow: Longint; ARect: TRect; AState: TGridDrawState);
  end; 
```

我想出了如何使用饼干类访问这个属性。

```
type
  TCustomGridClass=class(TCustomGrid);

{ TDBGridEx }
procedure TDBGridEx.FastDraw(ACol, ARow: Integer; ARect: TRect; AState: TGridDrawState);
var
 LOptions: TGridOptions;
 LRect : TRect;
begin
  ......
  LOptions := TCustomGridClass(Self).Options; //works fine
  LRect := ARect;
  if not (goFixedVertLine in LOptions) then
    Inc(LRect.Right);
  if not (goFixedHorzLine in LOptions) then
    Inc(LRect.Bottom);
  .....
end; 
```

但**出于好奇**，我想知道是否存在另一种解决方法或解决此问题的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:17:08.297

这是另一个使用`class helpers`. 它不像你的那样好，但有效。

```
type
  TCustomGridHelper = class helper for TCustomGrid
    function GetGridOptions: TGridOptions;
  end;

function TCustomGridHelper.GetGridOptions: TGridOptions;
begin
  Result := Self.Options;
end;

procedure TDBGridEx.FastDraw(ACol, ARow: Integer; ARect: TRect;
  AState: TGridDrawState);
var
 LOptions: TGridOptions;
 LRect : TRect;
begin
  ...
  LOptions := Self.GetGridOptions; //works fine
  ...
end; 
```*

# android - 我将如何更改操作栏的颜色？

> ID：12119117
> 
> 赞同：-1
> 
> 时间：2012-08-25T04:19:12.500
> 
> 标签：android

我将如何更改操作栏的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:25:27.993

试试下面的代码。

从 Android 资源中获取 id（就像我们从 R.java 中获取 id 一样）

```
int titleId = Resources.getSystem().getIdentifier("action_bar_title", "id", "android"); 
```

现在你使用`TextView`我们获取的 id。

```
TextView textView = (TextView)findViewById(titleId);
textView.setTextColor(colorId); 
```

看看 Android 中的[高级样式](http://developer.android.com/guide/topics/ui/actionbar.html#AdvancedStyles)。

# javascript - 如何防止 nicEditor 中的 html 标签？

> ID：12119122
> 
> 赞同：1
> 
> 时间：2012-08-25T04:21:03.623
> 
> 标签：javascript, html, textarea, nicedit

我想防止在 nicEditor 中编写 html 标签。

```
<div id="sample">
  <script  type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script> <script type="text/javascript">
//<![CDATA[
        bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });
  //]]>
  </script>
  <textarea onblur="this.value = this.value.replace(/<\/?[^>]+>/gi, '')" name="process" style="width: 300px; height: 100px;" id="process">
         hello <b>world</b>
  </textarea>
</div> 
```

我已经尝试过上面的正则表达式..但它不起作用..我`onblur="this.value = this.value.replace(/<\/?[^>]+>/gi, '')"`对简单的文本框使用相同的正则表达式。它工作正常。

我也想知道，出于安全目的，它是否是防止用户输入 html 标签的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:59:44.653

尝试测试事件的优先级顺序。附加两个处理程序`form.submit`和`textarea.blur`内部`e.preventDefault`。`submit`并在它们两个内部使用`console.log('submit')`，`console.log('blur')`看看哪个先着火。导致问题可能出在`submit`which fires 之前`blur`

# ruby - 设置可选参数，将其他参数设置为 nil

> ID：12119123
> 
> 赞同：0
> 
> 时间：2012-08-25T04:21:10.287
> 
> 标签：ruby

我在 ruby​​ 中遇到了一个与可选参数有关的奇怪问题。这是我的代码：

```
def foo options={:test => true}
    puts options[:test]
end

foo # => puts true
foo :lol => 42 # => puts nil 
```

我不明白为什么第二个电话为零。似乎将另一个参数集 :test 设置为 nil。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:26:16.850

发生这种情况是因为如果它是默认参数，则传递哈希参数将完全覆盖它（即它设置`options = {:lol => 42}`），因此`options[:test]`键不再存在。

要为特定的哈希键提供默认值，请尝试：

```
def foo options={}
  options = {:test => true}.merge options
  puts options[:test]
end 
```

在这种情况下，我们将带有某些键 ( ) 的默认值的哈希`{:test => true}`与另一个哈希（包含参数中的 key=>values）合并。如果一个键出现在两个散列对象中，则传递给`merge`函数的散列值将优先。

# objective-c - 澄清 Objective-C 单例示例

> ID：12119127
> 
> 赞同：1
> 
> 时间：2012-08-25T04:22:03.873
> 
> 标签：objective-c, singleton

我刚刚开始使用 Objective-C，并且在创建单例时遇到了这个示例：

```
 + (BNRItemStore *) sharedStore
 {
       static BNRItemStore *sharedStore = nil;
       if (!sharedStore)
            sharedStore = [[super allocWithZone:nil] init];

      return sharedStore;
 } 
```

我理解他想要做什么——如果它存在则返回相同的实例，如果不存在则创建一个新实例。令我困扰的是这一行：

```
 static BNRItemStore *sharedStore = nil; 
```

每次调用该方法时，此行不会将 sharedStore 重置为 nil 值吗？如果此行始终将其设置为 nil，我看不到该方法将如何返回先前存在的实例。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T04:33:47.047

这是 Objective-C 从标准 C 继承的一个元素。任何具有*静态存储持续时间*的变量（`static`类型说明符显式声明）只初始化一次，并且[c 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)说这发生在程序启动之前。

> **6.2.4** 3) 使用外部或内部链接或存储类说明符 static 声明其标识符的对象具有静态存储持续时间。它的生命周期是程序的整个执行过程，它的存储值只在程序启动之前初始化一次。

请注意，它还提到，如果具有静态存储持续时间的变量是“指针类型”，那么它会自动设置为 NULL 指针（这就是 nil ），所以如果你愿意，你可以省略`= nil`声明的部分如果您认为它可以提高函数的可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:27:04.840

> 每次调用该方法时，此行不会将 sharedStore 重置为 nil 值吗？

因为`sharedStore`is `static`，它会`= nil`在第一次被调用时被初始化（位）。后续调用将跳过这些说明。

> 如果此行始终将其设置为 nil，我看不到该方法将如何返回先前存在的实例。

因为它是`static`变量，它的值在方法退出后会保留在内存中。

基本上，您可以将其视为全局变量，但只有`+sharedStore`.

# c - ftello/fseeko vs fgetpos/fsetpos

> ID：12119132
> 
> 赞同：14
> 
> 时间：2012-08-25T04:23:45.527
> 
> 标签：c, file-io, fseek, ftell, fgetpos

`ftello`/`fseeko`和`fgetpos`/和有什么不一样`fsetpos`？两者似乎都是使用不透明偏移类型的文件指针获取/设置函数，有时允许 64 位偏移。

它们是否在不同的平台或不同的标准上得到支持？它使用的偏移类型是否更灵活？

而且，顺便说一句，我知道[fgetpos/fsetpos 和 ftell/fseek 之间有什么区别](https://stackoverflow.com/questions/3348637/fgetpos-fsetpos-and-ftell-fseek)，但这**不是**重复的。该问题询问有关 ftell/fseek 的问题，而答案*不适*用于 ftello/fseeko。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T04:33:39.433

有关差异的详细信息，请参阅[便携式定位](http://www.gnu.org/software/libc/manual/html_node/Portable-Positioning.html)。摘录：

> 在文本流与二进制流真正不同的某些系统上，不可能将文本流的文件位置表示为从文件开头开始的字符数。例如，某些系统上的文件位置必须同时编码文件内的记录偏移量和记录内的字符偏移量。
> 
> 因此，如果您希望您的程序可移植到这些系统，您必须遵守某些规则：
> 
> *   从文本流上的 ftell 返回的值与您目前已阅读的字符数没有可预测的关系。您唯一可以依赖的是，您可以随后将其用作 fseek 或 fseeko 的偏移参数以移回相同的文件位置。
> *   在对文本流调用 fseek 或 fseeko 时，偏移量必须为零，或者 wherece 必须是 SEEK_SET，并且偏移量必须是先前在同一流上调用 ftell 的结果。
> *   文本流的文件位置指示符的值是未定义的，而有些字符已被 ungetc 推回，但尚未被读取或丢弃。请参阅未读。

简而言之：fgetpos/fsetpos 使用更灵活的结构来存储有关文件位置状态的附加元数据，从而实现更大的可移植性（理论上）。

# ruby - 安装 RedCloth-4.2.9 安装 Linux 时无法构建 gem 原生扩展

> ID：12119138
> 
> 赞同：20
> 
> 时间：2012-08-25T04:25:32.187
> 
> 标签：ruby, redcloth, octopress

我想安装`Octopress`在我的电脑上。我试着这样做

[八达通文档。](http://octopress.org/docs/setup/)

当我跑

```
bundle install 
```

我收到错误消息

```
An error occured while installing RedCloth (4.2.9), and Bundler cannot continue.
Make sure that `gem install RedCloth -v '4.2.9'` succeeds before bundling. 
```

所以，我跑

```
sudo gem install RedCloth -v '4.2.9' 
```

然后，我再次收到一条错误消息：

```
ERROR:  Error installing RedCloth:
ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb
    /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:1:in `<main>' 
```

我没有学到任何关于红宝石的知识。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-16T08:12:20.943

我的 ubuntu 12.04 解决方案是安装 ruby​​1.9.1-full 版本，可以解决这个问题。

```
sudo apt-get install ruby1.9.1-full 
```

你可以执行命令：

```
sudo update-alternatives --config ruby 
```

选择您已安装的替代红宝石。然后，执行以下命令完成 octopress 部署：

```
git clone https://github.com/erizhang/octopress.git octopress
cd octopress/
sudo gem install bundler
sudo gem install RedCloth -v '4.2.9'
bundle install
rake install 
```

您可以从 octopress 部署指南页面找到以下命令：

```
rake setup_github_pages
sudo rake setup_github_pages
sudo rake generate
sudo rake deploy 
```

希望对你有帮助，谢谢

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-28T15:53:23.823

我也在安装 Octopress，遇到了和你一样的问题。检查`mkmf.log`文件后，我发现没有找到 gcc-4.2。我什至用命令行工具安装了 xcode。当我制作这样的符号链接时它起作用了：

```
$ sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2
$ bundle install 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-05-15T16:37:19.407

我通过运行解决了这个问题

```
sudo apt-get install ruby-dev 
```

如[本博文](http://tarashish.com/blog/2013/02/02/fixing-mkmf-load-error-ubuntu/)所述。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-28T14:08:50.697

您可能已经升级到`Mountain Lion`并且`ruby-1.9.2`尚未使用新的开发包重新构建您的安装。

```
rvm --force install 1.9.2
gem install bundle --no-ri --no-rdoc
bundle install 
```

如果您没有`Mountain Lion`正确安装开发包，请使用[ThoughtBot](http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion)说明。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-06-03T17:47:53.543

对于**Ubuntu 14.04**，只需执行以下操作：

```
sudo apt-get install ruby1.9.3 
```

也应该适用于 13.10 和 13.04。（未测试）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-28T07:33:53.240

看来您没有使用 rvm 来管理您的 ruby​​ 安装。我认为最好尝试 rvm，这是一个非常好的指南，您可以在不安装 rails 的情况下停止：[ruby with rvm](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

然后简单

```
$gem install RedCloth 
```

未管理的红宝石很痛苦，我尽量避免使用它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-15T13:15:30.093

没有一个答案适用于我的 Ubuntu 14.04.1 LTS。升级到 ruby​​ 2.0 为我解决了这个问题：

```
sudo apt-get install ruby2.0 ruby2.0-dev
sudo ln -s /usr/bin/ruby2.0 /usr/bin/ruby
sudo ln -s /usr/bin/gem2.0 /usr/bin/gem
sudo gem install bundler 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-29T02:14:33.170

确保您还安装了该`build-essential`软件包。您可以检查使用

> `dpkg -l | grep build-essential`

或者直接安装而不检查

> `sudo apt-get install build-essential`

对我来说，在 Ubuntu 14.04.1 LTS 上，确保`build-essential`安装后，该`bundle install`命令在 Ruby 1.9.3 上也可以正常工作/构建。

# jammit - Jammit gem 正在扩展字体文件的路径

> ID：12119143
> 
> 赞同：0
> 
> 时间：2012-08-25T04:26:19.100
> 
> 标签：jammit

运行 jammit -c assets.yml -o assets 命令后，Jammit 会检查我所有的 CSS 文件并在连接所有内容之前更改它们。出于某种原因，它会将我的所有@font-face url 路径的 URL() 路径扩展为位于我计算机上的文件的绝对路径。有什么办法可以把它说成公共目录中的绝对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:43:13.223

我发现了问题。原来字体文件不在公共目录中，所以 jammit 确保该路径存在于该目录之外。

# windows-phone-7 - Windows 手机模拟器

> ID：12119150
> 
> 赞同：1
> 
> 时间：2012-08-25T04:27:35.877
> 
> 标签：windows-phone-7

我想为 windows phone 开发应用程序，但我遇到了一个大问题，我的笔记本电脑无法运行模拟器，在检查了要求后我知道我的 vga 驱动程序不支持它。我的问题是，是否有任何替代 Windows 手机模拟器的替代品，而不是微软的官方模拟器？或者任何其他方式来调整它以在我的笔记本电脑上运行？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:54:08.063

据我了解，没有任何其他 Windows Phone 模拟器。如果你能拿到windows phone 7，就可以对其进行测试。您可以尝试联系您所在地区的 Microsoft Windows Phone 传道员，我所在地区的一位帮助我获得了一部手机进行测试。

我不确定是否要调整您的笔记本电脑以使模拟器正常工作。你的显卡驱动是最新的吗？如果不是，请尝试更新它。我知道要顺利运行模拟器需要相当多的计算机能力。

如果您愿意，可以尝试注册一个虚拟实验室，在这里您可以远程进入 Windows 机器，并能够在远程机器上构建和测试，但时间有限，通常需要全班学习。[https://msevents.microsoft.com/CUI/EventDetail.aspx?culture=en-US&EventID=1032485600&%3bculture=en-US](https://msevents.microsoft.com/CUI/EventDetail.aspx?culture=en-US&EventID=1032485600&amp%3bculture=en-US)

# python - 加速python中的一系列正则表达式替换

> ID：12119151
> 
> 赞同：0
> 
> 时间：2012-08-25T04:27:38.630
> 
> 标签：python, regex

我的 python 脚本将读取文件中的每一行并在每一行中进行许多正则表达式替换。

如果正则表达式成功，请跳到下一行

有什么方法可以加快这种脚本的速度吗？
是否值得调用 subn 并检查替换是否完成然后跳到剩下的？
如果我编译正则表达式，是否可以将所有编译的正则表达式存储在内存中？

```
for file in files:  
     for line in file:  
         re.sub() # <--- ~ 100 re.sub 
```

PS：每个正则表达式的替换变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:53:52.827

你可能应该做三件事：

1.  减少正则表达式的数量。根据替换部分的不同，您可以将它们全部组合成一个。使用仔细的交替，您可以确定匹配正则表达式部分的顺序。
2.  如果可能（取决于文件大小），将文件完全读入内存。
3.  编译你的正则表达式（仅是为了可读性；只要正则表达式的数量保持在 100 以下，速度就无关紧要）。

这给了你类似的东西：

```
regex = re.compile(r"My big honking regex")
for datafile in files:
    content = datafile.read()
    result = regex.sub("Replacement", content) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T01:26:15.507

正如@Tim Pietzcker 所说，您可以通过使它们成为替代品来减少正则表达式的数量。您可以通过使用匹配对象的“lastindex”属性来确定哪个替代匹配。

这是您可以执行的操作的示例：

```
>>> import re
>>> replacements = {1: "<UPPERCASE LETTERS>", 2: "<lowercase letters>", 3: "<Digits>"}
>>> def replace(m):
...     return replacements[m.lastindex]
...
>>> re.sub(r"([A-Z]+)|([a-z]+)|([0-9]+)", replace, "ABC def 789")
'<UPPERCASE LETTERS> <lowercase letters> <Digits>' 
```

# javascript - Jquery 数据下拉菜单

> ID：12119152
> 
> 赞同：0
> 
> 时间：2012-08-25T04:27:38.410
> 
> 标签：javascript, jquery, drop-down-menu, backbone.js, coffeescript

所以我像这样以编程方式填写了一个下拉列表-

```
optionStringToAppend = "<option id="  + searchTime + ">"+ pastResult.searchDate+ "," + purpose + "</option>"
$("#searchHistoryDropDownId").append(optionStringToAppend)
optionId= "#" + searchTime
console.log(optionId)
$(optionId).data("storedSearch", {searchPurpose: pastResult.searchPurpose, licensePlate:pastResult.licensePlate, startDate:pastResult.startDate,endDate:pastResult.endDate,longitude:pastResult.longitude,latitude:pastResult.latitude}) 
```

其中，过去的结果被传入。

然后我有一个主干更改事件`"#searchHistoryDropDown"`，我有这个代码

```
populateForm:(event)=>
  selectedOption= $("#searchHistoryDropDownId option:selected")
  store = $(selectedOption).data("storedSearch")
  console.log(store) 
```

我在那个控制台日志中得到一个未定义的，我不知道为什么。我如何使用错误的 .data 命令？

# android - android中的xml文件错误

> ID：12119153
> 
> 赞同：0
> 
> 时间：2012-08-25T04:27:45.110
> 
> 标签：android, xml

嗨，当我查看此文件的 graphics.layout 时遇到问题

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="this is main text" />

</LinearLayout> 
```

当我查看此 xml 文件的图形布局时，此警告显示 [I18N] 硬编码字符串“这是正文”，应该使用 @string 资源，但我不想声明字符串有效我想显示此“这是正文” " 不声明字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:09:26.600

关于“应该使用@string 资源”的警告只是提醒您应该将特定于语言环境的信息放在“资源包”（例如/res/values/strings.xml）中，以便可以以不同的语言提供标签和其他文本无需为每种语言重新编码和重新编译整个应用程序。

如果您只是在测试，您可以放心地忽略该警告，但最好养成在外部文件中将字符串作为资源引用的习惯，而不是直接在应用程序本身中硬编码它们。

将字符串硬编码到布局文件中并不是一个好习惯。您应该将它们添加到字符串资源文件中，然后从您的布局中引用它们。

参考这个[答案](https://stackoverflow.com/a/8743887/1364120)和[这个](https://stackoverflow.com/a/9272792/1364120)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:13:07.677

```
You must declare your text using `@string` resource that 
 is a good programming format.You should prefer using 
 `string.xml` in value folder in res folder if you want
 to use texts. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:09:16.473

如果你想抑制特定的警告使用工具：ignore="HardcodedText"

更多详情 [http://tools.android.com/recent/ignoringlintwarnings](http://tools.android.com/recent/ignoringlintwarnings)

# php - 如何从 cake 查询数组中获取正常的 SQL 查询？

> ID：12119154
> 
> 赞同：1
> 
> 时间：2012-08-25T04:28:02.253
> 
> 标签：php, mysql, sql, cakephp

我有这样的数组

```
$conditions = array("Post.title" => "This is a post"); 
```

并在此方法中使用**$conditions**数组。

```
$this->Post->find('first', array('conditions' => $conditions)); 
```

我想将 $conditions 数组转换为普通的 sql 查询。我要使用

```
$this->Post->query($converted_query); 
```

代替

```
$this->Post->find('first', array('conditions' => $conditions)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:47:38.977

```
 $null=null;
 echo  $this->getDataSource()->generateAssociationQuery($this, NULL, NULL, NULL, NULL, $query_array, false,$null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:29:55.763

要做你想做的事，你可以做两件事：

1) 组合你的`$conditions` 数组，让 CakePHP 构建你的新查询，这样你就可以简单地`$this->Model->find()`再次使用。

2）使用[这个](http://bakery.cakephp.org/articles/grant_cox/2008/06/23/get-the-find-query-sql-rather-than-query-result)。它是 mysql 数据源的扩展，添加了`$this->Model->find('sql', array('conditions' => $conditions))`将返回 SQL 查询的选项。这个选项*可能会*引起麻烦，因为对于某些 find 调用（尤其是当您获取关联模型时）CakePHP 使用多个查询来获取关联模型（尤其是在 hasMany-associations 的情况下）。

如果可能的话，选项 1 可能会造成最少的麻烦。使用 2 的另一个问题是，如果您尝试组合两个条件冲突的查询（例如查询 1 中的“name = Hansel”和查询 2 中的“name = Gretel”），除非您打算编写，否则您将一无所获解析结果查询并查找冲突的额外代码。使用 1 可能会简单得多，并且可能会避免很多问题。

# android - 如何从 Android 客户端连接 REST Web 服务

> ID：12119165
> 
> 赞同：3
> 
> 时间：2012-08-25T04:31:51.513
> 
> 标签：android, web-services, rest

我有一个简单的 REST Web 服务，我在我的 android 客户端中调用它。但是该服务没有触发。mu代码有什么问题？请帮帮我！

---------------我的调用网络服务的方法------------

```
 private static  void getSelectedCoordinates() {
    Log.d("getrespond()", "service calling");

    String block_coordinates = Store_Identified_Block.GetBlock();

 //Wireless port    
//  String url ="http://192.168.43.73:84/NewPS/MobileService.svc/GetSelectedCoordinates?input=285,27-524,77";
 //Local Host
    String url ="http://10.0.2.2:4266/NewPS/MobileService.svc/GetSelectedCoordinates?input=285,27-524,77";

                RestClient client = new RestClient(url);

                try{
                    client.Execute(RestClient.RequestMethod.GET);
                }
                catch (Exception e) {

                    String error = String.valueOf(e);
                         Log.d("**********client.Execute(RequestMethod.GET);***********",error);    

                }

                try {

                    if(client.getResponseCode() == 200) {

                        Log.d("Response is 200", String.valueOf(client.getResponse()));
                        result = String.valueOf(client.getResponse());
                        //Toast.makeText(ctx, "Responce is "+String.valueOf(client.getResponseCode()), 2000).show();                            

                }
                    else {
                        String error = String.valueOf(client.getResponse());
                        Log.d("Response*********** not 200 ************", String.valueOf(client.getResponse()));

                    }
                }catch (Exception e) {
                    e.printStackTrace();
                     Log.d("EXCEPTIONI IS 3", e.toString());
                    // TODO: handle exception
                }
            } 
```

## 这是我的 REST 客户端类

```
package rubs.a;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URLEncoder;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;

import android.util.Log;

public class RestClient {

public enum RequestMethod
{
    GET,
    POST
}
private ArrayList <NameValuePair> params;
private ArrayList <NameValuePair> headers;

private String url;

private int responseCode;
private String message;

private String response;

public String getResponse() {
    return response;
}

public String getErrorMessage() {
    return message;
}

public int getResponseCode() {
    return responseCode;
}

public RestClient(String url)
{
    this.url = url;
    params = new ArrayList<NameValuePair>();
    headers = new ArrayList<NameValuePair>();
}

public void AddParam(String name, String value)
{
    params.add(new BasicNameValuePair(name, value));
}

public void AddHeader(String name, String value)
{
    headers.add(new BasicNameValuePair(name, value));
}

public void Execute(RequestMethod method) throws Exception
{
    switch(method) {
        case GET:
        {
            //add parameters
            String combinedParams = "";
            if(!params.isEmpty()){
                combinedParams += "?";
                for(NameValuePair p : params)
                {
                    String paramString = p.getName() + "=" + URLEncoder.encode(p.getValue(),"UTF-8");
                    if(combinedParams.length() > 1)
                    {
                        combinedParams  +=  "&" + paramString;
                    }
                    else
                    {
                        combinedParams += paramString;
                    }
                }
            }

            HttpGet request = new HttpGet(url + combinedParams);

            //add headers
            for(NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            executeRequest(request, url);
            break;
        }
        case POST:
        {
            HttpPost request = new HttpPost(url);

            //add headers
            for(NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
                Log.d("aaa", h.getValue());
            }

            if(!params.isEmpty()){
                request.setEntity((HttpEntity) new UrlEncodedFormEntity(params, HTTP.UTF_8));
            }

            executeRequest(request, url);
            break;
        }
    }
}

private void executeRequest(HttpUriRequest request, String url)
{
    HttpClient client = new DefaultHttpClient();

    HttpResponse httpResponse;

    try {
        httpResponse = client.execute(request);
        responseCode = httpResponse.getStatusLine().getStatusCode();
        message = httpResponse.getStatusLine().getReasonPhrase();

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {

            InputStream instream = entity.getContent();
            response = convertStreamToString(instream);

            // Closing the input stream will trigger connection release
            instream.close();
        }

    } catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    } catch (IOException e) {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    }
}

private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}
} 
```

# android - android的SharedPreference是如何保存的？

> ID：12119170
> 
> 赞同：0
> 
> 时间：2012-08-25T04:33:02.340
> 
> 标签：android

> **可能重复：**
> [SharedPreferences 文件](https://stackoverflow.com/questions/2566430/sharedpreferences-file)

你能告诉我android应用程序的sharePreference保存在哪里吗？如何将其下载到我的电脑并查看它？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T04:57:30.917

SharedPreferences 存储在 app 数据文件夹中的一个 xml 文件中，即

> /data/data/YOUR_PACKAGE_NAME/shared_prefs/YOUR_PREFS_NAME.xml

或默认首选项：

> /data/data/YOUR_PACKAGE_NAME/shared_prefs/YOUR_PACKAGE_NAME_preferences.xml

# python - 从不同长度的字典中弹出项目时的时间差异

> ID：12119171
> 
> 赞同：0
> 
> 时间：2012-08-25T04:33:23.197
> 
> 标签：python, python-3.x, python-2.7

我正在用 Python 设计一个软件，我对从长度非常小的字典中弹出项目和从长度非常大的字典中弹出项目时是否有任何时间差异感到好奇，或者在所有情况下都相同.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T04:40:47.063

`timeit`您可以使用该模块轻松地为自己回答这个问题。但是字典的整个要点是通过键近乎即时地访问任何所需的元素，所以我不*希望*这两种情况之间有很大的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:41:04.350

查看这篇关于 Python [TimeComplexity](http://wiki.python.org/moin/TimeComplexity)的文章：

> 为 dict 对象列出的平均案例时间假定对象的散列函数足够健壮以使冲突不常见。平均情况假设参数中使用的键是从所有键的集合中均匀随机选择的。
> 
> 请注意，（在实践中）仅处理 str 键的 dicts 有一条快速路径；这不会影响算法的复杂性，但会显着影响常数因素：典型程序完成的速度。

根据这篇文章，对于“获取项目”操作，平均情况是 O(1)，更糟糕的情况是 O(n)。换句话说，最坏的情况是时间随着大小线性增加。有关更多信息，请参阅Wikipedia 上的[Big O 表示法。](http://en.wikipedia.org/wiki/Big_O_notation)

# xsl-fo - XSL-FO 工作台中心

> ID：12119172
> 
> 赞同：4
> 
> 时间：2012-08-25T04:33:30.170
> 
> 标签：xsl-fo, apache-fop

目前我正在研究用于生成 PDF 文件的 XSL-FO。事实上，我是直接编写 FO 对象，而不是分离 XML 和 XSL。这是我们目前的要求。我们能够正确对齐文本。但是，当我们制作表格时，将其保持在中心不会显示完整的表格。可能是什么问题呢。在这里，我发布了我尝试过的代码：

```
<fo:block>
            <fo:table width="80%"
                border-style="solid"
                border-width="1pt"
                border-color="#69468D"
                table-layout="fixed"
                space-before="10px"
                space-after="10px"
                text-align="start">
                <fo:table-header line-height="10pt"
                    font-size="6pt"
                    background-color="#69468D"
                    color="white"
                    padding-top="3pt">
                    <fo:table-row>
                        <fo:table-cell border-top-color="solid pruple" border-left-color="solid pruple" border="1pt solid white">
                            <fo:block>text</fo:block>
                        </fo:table-cell>
                        <fo:table-cell border="0.5pt solid pruple" padding="4pt">
                            <fo:block>text</fo:block>
                        </fo:table-cell>
                        <fo:table-cell border="0.5pt solid pruple" padding="4pt">
                            <fo:block>text</fo:block>
                        </fo:table-cell>
                        <fo:table-cell border="0.5pt solid pruple" padding="4pt">
                            <fo:block>text</fo:block>
                        </fo:table-cell>
                        <fo:table-cell border="0.5pt solid pruple" padding="4pt">
                            <fo:block>text</fo:block>
                        </fo:table-cell>
                        <fo:table-cell border="0.5pt solid pruple" padding="4pt">
                            <fo:block>Text</fo:block>
                        </fo:table-cell>
                    </fo:table-row>
                </fo:table-header>
                <fo:table-body line-height="5pt"
                    font-size="6pt">
                    <fo:table-row padding-top="3pt">
                        <fo:table-cell text-align="center">
                            <fo:block> 
                                hi
                            </fo:block>
                        </fo:table-cell>
                        <fo:table-cell text-align="center">
                            <fo:block> 
                            hi
                            </fo:block>
                        </fo:table-cell>
                    </fo:table-row>
                </fo:table-body>
            </fo:table>
        </fo:block> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T08:59:31.487

我相信解决方案将是绝对测量而不是百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T07:09:04.780

如果我们有五列，那么我们可以将表格居中如下

```
<fo:table width="100%">
    <fo:table-column column-width="20%"/>
    <fo:table-column column-width="20%"/>
    <fo:table-column column-width="20%"/>
    <fo:table-column column-width="20%"/>
    <fo:table-column column-width="20%"/>
</fo:table> 
```

# iphone - IBOutlet 应该弱吧？

> ID：12119176
> 
> 赞同：4
> 
> 时间：2012-08-25T04:34:07.547
> 
> 标签：iphone, ios, automatic-ref-counting, iboutlet

> **可能重复：**
> [在 ARC 下，IBOutlets 应该强还是弱？](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc)

我简要地阅读了关于 ARC 的内容并认为好吧，一切都很强大，代表很弱。

现在我在界面生成器中创建一个视图并制作 IBOutlets，Xcode 的默认设置设置为弱。

这个建议似乎是有原因的，大多数 IBOutlets 想要弱属性是否有原因？

那是因为这些视图（IBOutlets）已经被保留，因为它们附加到它的超级视图？而且我们很少替换 IBOutlet 视图？

但是我认为将其设置为强没有什么害处，它有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T04:59:25.083

有关为什么`IBOutlet`引用应该是弱的讨论，请参阅[资源编程指南：Nib 文件](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4)。我从指南中引用：

> 出口通常应该是弱的，除了从文件所有者到 nib 文件中的顶级对象（或者，在 iOS 中，故事板场景）应该是强的。因此，您创建的 Outlets 通常应该很弱，因为：
> 
> *   例如，您为视图控制器的视图或窗口控制器的窗口的子视图创建的出口是对象之间的任意引用，并不暗示所有权。
> *   强大的出口经常由框架类指定（例如，`UIViewController`的视图出口，或`NSWindowController`的窗口出口）。

对于我自己的两分钱，`strong`如果我拥有它，我就会制作东西，或者我需要一个强有力的参考，以防所有者离开并且我需要保留它，这两者都不适用。所以，与其问“为什么我不能成功`strong`？”，我会问“我为什么要成功`strong`？” 如果没有充分的理由这样做，我会让 Interface Builder 做这件事并成功`weak`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:38:16.847

这只是偏好。weak 或 assign 的基本原理是超级视图、控制器等将在该图中的对象生命周期内持有强引用。

就个人而言，我是老派，并且喜欢强有力的参考——即使在这种情况下也是如此。有时，使用强引用意味着您可能需要显式破坏对象子图的组件（例如，在拆除时必须“打破”所有循环依赖关系）。我只在非常特殊的情况下使用弱，因为我喜欢一致性；当/如果出现问题以及阅读程序时，变量会更少。

# java - 从 Spring 应用程序运行 PhantomJS 以获取网页缩略图

> ID：12119177
> 
> 赞同：1
> 
> 时间：2012-08-25T04:34:18.667
> 
> 标签：java, javascript, spring, spring-mvc, phantomjs

我的用例有两个选择

1.  用户提交一个 URL，我捕获该网页的屏幕截图，将其保存在数据库中并在需要时呈现它

**或者**

1.  每次服务器发送 URL 列表时，浏览器都会生成这些 URL 的屏幕截图

对于这两种情况，我都考虑过使用[PhantomJS](http://phantomjs.org/)。有很多从控制台调用的 PhantomJS 函数的示例，但还没有找到任何关于如何从**服务器端**执行它的示例（java，除了我无法工作的[这个](https://gist.github.com/1401944)（第 51 行，等待套接字连接)）或**客户端**（使用javascript，我认为这对浏览器来说是一个开销）。如果有人可以帮助我，那就太好了。

[我曾考虑过像websnapr](http://www.websnapr.com/)这样的第三方提供商，但我不知道它们有多可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:49:06.583

哦！我从来没有这么简单。它适用于两行代码：

```
ProcessBuilder builder = new ProcessBuilder(command);
Process process = builder.start(); 
```

但我想输入哪种方法更好，服务器端还是客户端？什么是头顶！

# php - 如何只缓存部分页面

> ID：12119179
> 
> 赞同：0
> 
> 时间：2012-08-25T04:34:43.913
> 
> 标签：php, caching

我需要一个代码来缓存页面的一部分，实际上我想缓存一个函数的结果。

**例子 ：**

```
CODE HTML

<? my php code ?> <!- I want to cache this only -->

CODE HTML 
```

我发现了一些不完整的代码，但缺少功能并且无法正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:44:20.153

我假设您的意思是服务器端缓存的功能需要一段时间才能运行但对许多用户具有相同的输出。

如果是这样，请查看 Memcached。 [http://memcached.org/](http://memcached.org/)

[http://php.net/manual/en/book.memcached.php](http://php.net/manual/en/book.memcached.php)

散列函数的参数，将其用作键。然后将结果粘贴到 memcached 中，并在下次调用该函数时检查它。

# xcode - XCode 不导入 OS X 崩溃日志

> ID：12119183
> 
> 赞同：5
> 
> 时间：2012-08-25T04:35:50.583
> 
> 标签：xcode, xcode4

我有一个测试人员发送给我的应用程序崩溃日志。根据文档，我应该可以将其放入管理器中库的“设备日志”部分（或使用窗口底部的“导入”按钮）。

不幸的是，两者都什么都不做。没有错误，没有警告，没有导入。

我的 .crash 文件是通过复制电子邮件的内容手动创建的，因此格式可能不正确，但将其与其他崩溃文件进行比较似乎是正确的。

我的存档中也有崩溃日志引用的构建，因为我知道这对于显示符号很重要。

知道如何调试吗？这是使用 Xcode 4.4.1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T18:17:46.617

当我尝试导入由 PLCrashReporter 生成的崩溃日志时，我遇到了同样的问题。然后我注意到崩溃报告中的事件标识符和 CrashReporter 关键字段填充了“[TODO]”字符串而不是正确的值。我将事件标识符替换为任意 UUID，并将崩溃报告器密钥替换为我的一台设备的 UDID，之后 XCode 能够导入报告。我使用 XCode 4.5

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T23:35:43.250

我崩溃了，并使用了我在 Apple 的支持积分之一来试图弄清楚这一点。

底线很简单。截至目前（Xcode 4.6），OS X 崩溃日志无法导入 Xcode。只有 iOS 的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:57:52.373

我怀疑是 Xcode 错误。
我对 Xcode 4.4.1 有同样的问题。甚至尝试了最新的 4.5.2 开发者版本。

我使用了早期版本的 Xcode，它有点工作（一次只导入一个崩溃，需要多次重新启动 Xcode，但我设法做我需要的）。

[您可以在此处](https://developer.apple.com/downloads/index.action?name=Xcode)下载旧版本的 Xcode 。

* * *

当 Xcode 拒绝合作时，我在删除方面取得了*一些*成功。`~/Library/Developer/Xcode/iOS Device Logs`继续需要您自担风险。

# iis - 提交按钮调用从 localhost 转到 locahost/default.aspx

> ID：12119184
> 
> 赞同：-1
> 
> 时间：2012-08-25T04:36:46.733
> 
> 标签：iis, localhost

在 Windows 7 机器中：- 当我在 localhost 页面上并单击任何提交按钮时，它会 POST 到 localhost。

在 Windows XP 机器中：- 当我在 localhost 页面上并单击任何提交按钮时，它会 POST 到 localhost/default.aspx。

是与操作系统相关的问题还是与 IIS 相关的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:56:22.893

确保您在 Windows 机器上设置。请转到开始按钮，然后找到 iis（Internet 信息系统管理器），然后检查默认文档。我有屏幕截图，所以请找到它。这可能会对你有所帮助 ![在此处输入图像描述](../Images/c55463e23fd6d243abda82116fd3f104.png)

# python - 如何在python中更改对象的方法

> ID：12119188
> 
> 赞同：2
> 
> 时间：2012-08-25T04:37:50.683
> 
> 标签：python

我写了一个python文件，如：

```
class A(object):
    def update(self, str):
        pass

    def say(self, str):
        print "I update: " + str

def fun(obj, str):
    obj.say(str)

a = A()
import types
setattr(A, "update", types.MethodType(fun, None, A))
a.update("hello")

b = A()
b.update("world?") 
```

它改变了类的行为，对象 b 已经改变。但是，我只想更改对象 a。如何在python中更改对象的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:53:25.643

这是一种方法：

```
 a.update = lambda x: fun(a, x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:18:56.330

您正在设置类方法，而您只想设置绑定到某个实例的方法。

```
>>> class MyClass(object):
...     def a(self): pass
... 
>>> MyClass.a = lambda x: x
>>> MyClass.a
<unbound method MyClass.<lambda>>
>>> a = MyClass()
>>> a.a
<bound method MyClass.<lambda> of <__main__.MyClass object at 0x1d7fed0>> 
```

`a`在类级别更改方法也会更改所有实例的方法`a`。

```
>>> class MyClass(object):
...     def a(self): pass
... 
>>> b = MyClass()
>>> b.a = lambda x: x
>>> MyClass.a
<unbound method MyClass.a>
>>> b.a
<function <lambda> at 0x1d88938>
>>> c = MyClass()
>>> c.a
<bound method MyClass.a of <__main__.MyClass object at 0x1d8d110>> 
```

更改`a`实例的方法不会更改类或其他实例的方法。

# android - 如何为 guice 3.0 配置我的 ivy.xml 以使用 no aop jar？

> ID：12119190
> 
> 赞同：4
> 
> 时间：2012-08-25T04:37:58.947
> 
> 标签：android, guice, ivy, roboguice, aopalliance

Guice 3.0 的 ivy 文件包括一个`guice-3.0-no_aop.jar`. 由于我正在创建一个 Android 应用程序，因此我想配置我的 ivy 文件以使用该 jar 而不是`guice-3.0.jar`.

```
<ivy-module version="1.0">
    <info organisation="com.myapp.android" module="appname"/>
    <dependencies>
        <!-- other dependencies -->
        <dependency org="org.roboguice" name="roboguice" rev="2.0"
          transitive="false" />
        <dependency org="com.google.inject" name="guice" rev="3.0"
          transitive="false">
            <artifact name="guice-3.0-no_aop" type="jar" />
        </dependency>
    </dependencies>
</ivy-module> 
```

当我使用上述配置及其派生时，我收到此错误或类似错误：

```
Some projects fail to be resolved
 Impossible to resolve dependencies of com.mystuff.android#myapp;working@computer
  download failed: com.google.inject#guice;3.0!guice-3.0-no_aop.jar 
```

我的配置有什么问题？我应该如何配置我的依赖项以使用
`guice-3.0-no_aop.jar`？

**编辑**
要清楚，我尝试以最简单的方式配置 Guice 3.0：

```
<dependency org="com.google.inject" name="guice" rev="3.0"
              transitive="false"> 
```

不幸的是，这导致常春藤只使用`guice-3.0.jar`. 我需要将其配置为使用下载但未使用的`guice-3.0-no_aop.jar`.

**编辑**
这里要求的是 Guice 3.0 的 ivy.xml 的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0" xmlns:m="http://ant.apache.org/ivy/maven">
    <info organisation="com.google.inject"
        module="guice"
        revision="3.0"
        status="release"
        publication="20110325121947"
    >
        <description homepage="" />
        <m:properties__guice.with.no_aop>true</m:properties__guice.with.no_aop>
        <m:properties__project.build.sourceEncoding>UTF-8</m:properties__project.build.sourceEncoding>
        <m:properties__guice.api.version>1.3</m:properties__guice.api.version>
        <m:properties__cglib.version>2.2.1-v20090111</m:properties__cglib.version>
        <m:properties__guice.with.jarjar>true</m:properties__guice.with.jarjar>
        <m:maven.plugins>null__maven-remote-resources-plugin__null|org.codehaus.mojo__animal-sniffer-maven-plugin__null|null__maven-surefire-plugin__null|org.apache.felix__maven-bundle-plugin__null|null__maven-jar-plugin__null</m:maven.plugins>
    </info>
    <configurations>
        <conf name="default" visibility="public" description="runtime dependencies and master artifact can be used with this conf" extends="runtime,master"/>
        <conf name="master" visibility="public" description="contains only the artifact published by this module itself, with no transitive dependencies"/>
        <conf name="compile" visibility="public" description="this is the default scope, used if none is specified. Compile dependencies are available in all classpaths."/>
        <conf name="provided" visibility="public" description="this is much like compile, but indicates you expect the JDK or a container to provide it. It is only available on the compilation classpath, and is not transitive."/>
        <conf name="runtime" visibility="public" description="this scope indicates that the dependency is not required for compilation, but is for execution. It is in the runtime and test classpaths, but not the compile classpath." extends="compile"/>
        <conf name="test" visibility="private" description="this scope indicates that the dependency is not required for normal use of the application, and is only available for the test compilation and execution phases." extends="runtime"/>
        <conf name="system" visibility="public" description="this scope is similar to provided except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository."/>
        <conf name="sources" visibility="public" description="this configuration contains the source artifact of this module, if any."/>
        <conf name="javadoc" visibility="public" description="this configuration contains the javadoc artifact of this module, if any."/>
        <conf name="optional" visibility="public" description="contains all optional dependencies"/>
    </configurations>
    <publications>
        <artifact name="guice" type="jar" ext="jar" conf="master"/>
        <artifact name="guice" type="source" ext="jar" conf="sources" m:classifier="sources"/>
        <artifact name="guice" type="javadoc" ext="jar" conf="javadoc" m:classifier="javadoc"/>
    </publications>
    <dependencies>
        <dependency org="javax.inject" name="javax.inject" rev="1" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)"/>
        <dependency org="aopalliance" name="aopalliance" rev="1.0" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)"/>
        <dependency org="org.sonatype.sisu.inject" name="cglib" rev="2.2.1-v20090111" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)"/>
        <dependency org="javax.inject" name="javax.inject-tck" rev="1" force="true" conf="test->runtime(*),master(*)"/>
        <dependency org="org.springframework" name="spring-beans" rev="3.0.5.RELEASE" force="true" conf="test->runtime(*),master(*)"/>
        <dependency org="biz.aQute" name="bnd" rev="0.0.384" force="true" conf="test->runtime(*),master(*)"/>
        <dependency org="org.apache.felix" name="org.apache.felix.framework" rev="3.0.5" force="true" conf="test->runtime(*),master(*)"/>
        <dependency org="org.testng" name="testng" rev="5.11" force="true" conf="test->runtime(*),master(*)">
            <artifact name="testng" type="jar" ext="jar" conf="" m:classifier="jdk15"/>
        </dependency>
    </dependencies>
</ivy-module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:33:13.063

在修改了很多帖子和大量试验和错误之后，我得到了这个工作：

```
<dependency org="com.google.inject" name="guice" rev="3.0">
   <artifact name="guice"  m:classifier="no_aop" type="jar" />
</dependency> 
```

您可以使用 AOP 检查下载的文件大小以确认它小于默认 jar。此外，您可以更改检索模式以包含可选的分类器属性，因此您将看到文件名更改：

```
<ivy:retrieve 
    pattern="lib/[artifact]-[revision](-[classifier]).[ext]" /> 
```

一个相关的 SO 问题[如何使用不同的分类器在 Ivy 中下载多个 Maven 依赖项？](https://stackoverflow.com/questions/7804253/how-to-dowload-multiple-maven-dependencies-in-ivy-with-different-classifiers/12965727)

这也可能有效：http: [//mail-archives.apache.org/mod_mbox/ant-ivy-user/200905.mbox/%3CCAD31248BE809F4A869854C597A558EE0AC62344@TROUX-EX01.hq.troux.com%3E](http://mail-archives.apache.org/mod_mbox/ant-ivy-user/200905.mbox/%3CCAD31248BE809F4A869854C597A558EE0AC62344@TROUX-EX01.hq.troux.com%3E)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:30:27.130

似乎 ivy 文件包含一些 Maven 属性，其中一个说：

```
<m:properties__guice.with.no_aop>true</m:properties__guice.with.no_aop> 
```

所以这个神器已经没有aop了。

所以你可以省略：

```
<artifact name="guice-3.0-no_aop" type="jar" /> 
```

并通过以下方式解决guice：

```
<dependency org="com.google.inject" name="guice" rev="3.0"
          transitive="false"/> 
```

# macos - GNU 查找所有可执行文件：在 OS X 上等效？

> ID：12119196
> 
> 赞同：15
> 
> 时间：2012-08-25T04:38:39.497
> 
> 标签：macos, find

我需要获取在文件系统上标记为可执行的所有内容的列表。在 linux 上，我会这样做：

```
find . -executable -type f 
```

但在 OS X 上，发现抱怨：

```
find: -executable: unknown primary or operator 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T04:41:04.130

您可以使用`perm`运算符：

```
find . -perm +0111 -type f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T23:42:38.950

您还可以使用[mdfind](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/mdfind.1.html)：

```
mdfind "kMDItemKind == 'Unix Executable File'" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-03T15:08:29.657

或者你可以从 Homebrew 安装 GNU findutils 并使用 gfind 而不是 find。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-25T04:45:39.353

mac没有-executable。如果你想要所有的 .exe 文件，你可以这样做：

寻找 。-name "*.exe" -type f

# javascript - 客户端机器中的 javascript zip 文件夹和子文件夹

> ID：12119198
> 
> 赞同：0
> 
> 时间：2012-08-25T04:38:52.803
> 
> 标签：javascript, zip, directory, subdirectory

我想压缩一个文件夹，其中包含客户端计算机上文件夹中的子文件夹文件。我正在使用 JavaScript 和 JSP/HTML，我尝试使用[JSzip](http://stuartk.com/jszip/)但没有成功

```
function zipFolder(){
  var path = "D:/work/poc"; // client machine folder path which has to be zipped 
  var zip = new JSZip();
  zip.folder(path);
  zip.folder(/proj/); // array of size 2
  zip.folder(path).folder(/^vid/); // array of 1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T04:47:16.023

由于安全限制，您不能。如果可以的话，您会对一些严重的安全问题持开放态度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:49:04.703

你**不能**用 JavaScript 做到这一点。可用的插件为此使用嵌入式 Flash/SWF。

# java - Web 服务自动生成的文件

> ID：12119199
> 
> 赞同：4
> 
> 时间：2012-08-25T04:39:09.430
> 
> 标签：java, web-services, soap, service, web

当我使用 RSA 7.5 IDE 和 Web Sphere 7.0 服务器从 Web 应用程序创建新的 Web 服务时，我可以看到由该过程创建的一些自动生成的文件，即：

1）对于服务，创建一个SEI文件

2) 对于模型，创建 ser、deser 和 helper 文件。

但我无法理解所有这些 SEI、ser、deser 和 helper 文件的用途。

对此的任何有效解释将不胜感激。

赏金编辑：

**赏金编辑：**

由于我没有得到任何回应，我想再次问这个问题 - 提供赏金以鼓励深入回答。我很想知道这些文件是如何以及何时在内部使用的？

问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T09:10:45.327

**服务端点接口 (SEI)：**

> SEI 是与正在实现的 Web 服务端口类型对应的 Java 接口。它由 JAX-RPC 定义，它指定从 WSDL 1.1 到 Java 的语言映射。[参考](http://publib.boulder.ibm.com/infocenter/radhelp/v7r0m0/index.jsp?topic=/com.ibm.etools.webservice.was.creation.ui.doc/concepts/cwebsptover.html)
> 
> 或者
> 
> 服务端点接口 ( **SEI** ) 是一个 Java 接口，它声明了客户端可以在服务上调用的方法。[参考](http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXRPC3.html)

这些`ser`, `dser`,`helper`是帮助将 XML 文档转换为 java 对象，反之亦然 (WebServices)。[参考](http://websphere.sys-con.com/node/43345)

**服务器项目中生成的文件：**（[WebSphere Application Server 6.1 Ref](http://www.redbooks.ibm.com/redbooks/SG247257/wwhelp/wwhimpl/js/html/wwhelp.htm)）

根据运行向导时所做的设置，`WeatherJavaBeanWeb`项目中已创建以下文件：

**服务端点接口 (SEI)：** `itso.bean.WeatherJavaBean_SEI.java`是定义 Web 服务中公开的方法的接口。

**WSDL 文件：** `/WebContent/WEB-INF/wsdl/WeatherJavaBean.wsdl`描述 Web 服务。

**部署描述符** `webservices.xml`：`ibm-webservices-ext.xml`和`ibm-webservices-bnd.xml`。这些文件根据`J2EE`样式 ( `JSR 109`) 的 Web 服务描述 Web 服务。`JAX-RPC`映射在文件`WeatherJavaBean_mapping.xml`中进行了描述。

**数据映射文件：** itso.objects 包中的帮助 bean 执行从 XML 到 Java 对象的数据转换并返回。

在 Web 部署描述符中定义了一个 servlet 来调用 JavaBean。

![在此处输入图像描述](../Images/7367f0bc5cfb2050d516f9463ab2e4c5.png)

希望这些信息对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:29:41.287

这些文件与 Java、WSDL 和 XML 之间的 WebSphere 映射相关。它们是自动生成的，不需要编辑。您应该假装它们不存在（除非它们不存在，否则您可能无法部署......）。

*   SEI - 服务端点接口
*   ser - 序列化
*   deser - 反序列化
*   帮手——？

以下是一些伪有用的链接，可能会为您的问题提供更多见解：

*   [IBM 技术说明](http://www-01.ibm.com/support/docview.wss?uid=swg21289115)
*   [WebSphere v6.1 手册](http://www.redbooks.ibm.com/redbooks/SG247257/wwhelp/wwhimpl/js/html/wwhelp.htm)（查看第 15 章 -> 创建 Web 服务 -> 生成的文件）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:14:37.103

所有这些文件基本上都是为 web 服务生成的。

Web 服务基本上是两个独立于框架或语言的正在运行的应用程序之间的端口。

假设如果您从 Web 服务的一侧使用 java，那么为了完成编译，java 端将需要一些类文件，这些文件具有您希望在服务上调用的那些方法。

为此会生成一个存根。这个存根基本上是一个接口（SEI）。

websphere 还需要额外的文件来实现 web 服务功能，因此需要 tge 帮助文件。

这基本上是它的摘要。

# styles - 如果我们在两层添加不同的样式，融合表无法显示两层

> ID：12119207
> 
> 赞同：0
> 
> 时间：2012-08-25T04:40:23.283
> 
> 标签：styles, google-fusion-tables

由于一个融合表层有5个融合表层和5个样式的限制，我必须尝试如下：使用5个融合表层，每个融合表层使用两种样式，然后我可以达到我的目的：显示10种不同的样式一张地图。

但是在我实现之后，我发现它只显示了第一个融合表层。

然后我写了一个测试用例来检查原因。发现：如果我们在两层设置样式，只能显示第一层，第二层就没了。如果我为一层设置样式，效果很好。

下面是我的代码，有人可以帮忙吗？现在只显示一层。如果我们为它们或其中一个注释样式设置，则可以显示两个图层。

提前致谢！

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0px; padding: 0px }
#top-box {padding: 10px; background-color:#336699;}
.para-line {font-weight:bold;}
#map_canvas { height: 100% }
</style>
<script type="text/javascript"src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">

    var map;

    function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"));
        map.setMapTypeId('roadmap');
        map.setCenter(new google.maps.LatLng(38.4985464, -98.3834298));
        map.setZoom(4);

        var tableid1 =  4436842;

        var style = [{
            where: "State in('IL','PA')",
            polygonOptions: 
            {
                fillColor: "#rrggbb",
                fillOpacity: 0.7  
            }
        },{
            where: "State in('AL')",
            polygonOptions: 
            {
                fillColor: "#006400",
                fillOpacity: 0.7
            }
        }
        ];

        var query1 = {
            select: ['geometry','name'],
            from: tableid1,
            where: "State in('IL','PA')"
        }

        var query2 = {
                select: ['geometry','name'],
                from: tableid1,
                where: "State in('AL')"   
            }

        var layer1 = new google.maps.FusionTablesLayer({
            query:query1,
            styles: style,
            suppressInfoWindows: false,
            clickable:true
        }); 

        layer1.setMap(map);

        var layer2 = new google.maps.FusionTablesLayer({
            query:query2,
            styles:style,
            suppressInfoWindows: false,
            clickable:true
        }); 
        layer2.setMap(map);

        return;

    } 
</script>
</head>
<body onload="initialize()">    
<div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:09:33.370

限制是（来自[文档](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)“您可以使用 Maps API 最多向地图添加五个 Fusion Tables 图层，其中一个可以使用最多五个样式规则设置样式。”

您可以使用 FusionTable 用户界面对图层进行样式设置，但只能动态设置一个样式，并且该样式只能有 5 个样式规则。

# javascript - Cufon...简单的渐变文本...不起作用

> ID：12119209
> 
> 赞同：0
> 
> 时间：2012-08-25T04:40:46.237
> 
> 标签：javascript, css, text, gradient, cufon

我已经尝试了几个小时来弄清楚为什么这不起作用......我不明白，它一点也不复杂，我已经把它完全剥离了。为什么它不起作用？

我正在尝试将 h1 文本转换为渐变文本...

[http://jsfiddle.net/aZsUh/1/](http://jsfiddle.net/aZsUh/1/)

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />

<title>TITLE</title>

<!-- StyleSheet -->  
<link id="stylesheet" type="text/css" href="css/style.css" rel="stylesheet" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/cufon-yui.js"></script>

<script type="text/javascript">
Cufon.replace('h1', {
color: '-linear-gradient(#999, 0.45=#666, 0.45=#555, #999)'
});
</script>

</head>

<body>
<h1>Lorem ipsum dolor seiti alpo...</h1>

<script type="text/javascript"> Cufon.now(); </script>
</body>
</html> 
```

​</p>

但我得到的只是纯黑色文本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:06:14.233

这是您的`Source_Sans_Pro_400.font.js`文件有问题。如果我添加`Vegur.font.js`，渐变效果很好。

[演示](http://jsfiddle.net/aZsUh/2/)

# ios - 无法将此 NSString 转换为 NSDate

> ID：12119219
> 
> 赞同：0
> 
> 时间：2012-08-25T04:43:00.033
> 
> 标签：ios, nsdate, iso8601

> **可能重复：**
> [是否有将 ISO8601 时间戳转换为格式化的 NSDate 的简单方法？](https://stackoverflow.com/questions/2201216/is-there-a-simple-way-of-converting-an-iso8601-timestamp-to-a-formatted-nsdate)

我无法将此 NSString 转换为 NSDate： `2010-03-06T10:06:00-05:00`

老实说，我无法破译 Unicode 文档，他们在其中谈论通用挂钟时间、标准/夏令时间、作为后备的 GMT 偏移量等。

为了表明我已经做出了不错的努力，以下是我作为 dateformatter 的内容： `yyyy-MM-dd'T'HH:mm:ssZZ:ZZ"`

如果我去掉时区以使日期变为，`2010-03-06T10:06:00`那么我知道该怎么做。但是我需要多少个字母“Z”，它们是大写的吗？我应该从 -05:00 中删除冒号吗？时区是这些转换的致命弱点。

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:54:35.210

看看这个[ISO 8601 日期格式化程序](http://boredzo.org/iso8601unparser/)，看看它是否适合你。

# haskell - 在 Haskell 中处理来自外部文件的标准准引用

> ID：12119222
> 
> 赞同：4
> 
> 时间：2012-08-25T04:43:36.677
> 
> 标签：haskell, template-meta-programming, template-haskell

我想读取一个外部 Haskell 源文件以进行编译时 AST 操作。我怎样才能做到这一点？我尝试了类似以下的方法，但编译时出现错误消息“TH.hs:15:12：声明括号内不允许声明拼接”。

```
--------
-- TH.hs

{-# LANGUAGE TemplateHaskell, QuasiQuotes #-}

module TH where

import Language.Haskell.TH  
import Language.Haskell.TH.Quote  

dd :: QuasiQuoter  
dd = QuasiQuoter undefined undefined undefined ddDec  
ddDec file_name = do  
    file_cts <- runIO (readFile file_name)  
--  runQ [d| dummy = 0 |]  -- This can compile.  
    runQ [d| file_cts |]     -- This does not compile.  

--------
-- main.hs

{-# LANGUAGE TemplateHaskell, QuasiQuotes #-}

import Language.Haskell.TH  
import Language.Haskell.TH.Quote  
import TH  

[dd|input.hs|]  

--------
-- input.hs

test = putStrLn "Hello."

-------- 
```

我也尝试过 haskell-src-exts 包，但是这个包似乎只解析并且不解析标识符和类型检查。所以我认为TH是一个更好的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T05:29:29.213

```
导入Language.Haskell.Exts.QQ
导入Language.Haskell.TH.Quote

dd :: QuasiQuoter 
dd = quoteFile  dec

```

# jsf - 如何使用 adf faces 打开弹出窗口

> ID：12119225
> 
> 赞同：0
> 
> 时间：2012-08-25T04:44:21.400
> 
> 标签：jsf, jsf-1.2, oracle-adf

如何使用 adf faces 打开弹出窗口？我正在为 UI 使用 adf-faces-api-10_1_3_0_4.jar 和 adf-faces-impl-10_1_3_0_4.jar 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:18:28.647

在 JDeveloper 10.1.3（或 ADF Faces 10.1.3）中，没有特定的弹出组件。您可以通过导航到前缀为“dialog:”的导航案例名称来打开一个窗口。例如，dialog:name 将在一个对话框窗口中打开视图，其中指定了 dialog:name 的导航案例。“对话框：”指示 ADF Faces 对话框框架打开一个模态窗口。您可以在调用命令项（在其操作属性中具有 dialog:name 的命令项）上配置返回侦听器，以便您可以处理返回值。

这是一个示例：[使用 ADF Faces 和 JHeadstart 10.1.3 在弹出（对话框）窗口中显示查找详细信息](http://technology.amis.nl/2006/07/25/show-lookup-details-in-popup-dialog-window-using-adf-faces-jheadstart-1013/)

坦率

# c++ - 用户定义的线程库构造函数只被调用一次

> ID：12119231
> 
> 赞同：0
> 
> 时间：2012-08-25T04:46:22.263
> 
> 标签：c++, multithreading, schedule

我创建了自己的线程库......当然，它是一个简单的**非抢占式**库，其中线程按照它们被调用的顺序执行。该程序的简要大纲如下：

```
class Thread
{
static Thread sched;
/*called only once*/
static void init()
{
*create a context for sched thread* 
static void schedule()
{ 
....
setcontext(current thread from the queue);
return if empty
}
Thread(function)
{
intializes the context via getcontext and sets the uc_link to the context of sched
and pushed into the queue and calls schedule function
} 
```

单线程似乎一切都很好。但是当我初始化两个线程对象时，只有其中一个正在执行。我怀疑当第一个线程完成其工作时，它会返回到调度函数，而当调度函数看到队列为空时......它也会返回。

但是我观察到第一个线程只调用了一次构造函数！！为什么呢？

如果我不从构造函数调用调度函数，而是定义一个函数，如

```
void start()
{
 schedule();
} 
```

并在所有线程都初始化后调用它，它正在正确执行。但我不想使用这种方法..

请解释一下执行路径和上述问题的解决方案。
这是它的实际代码

```
class thread
{

static queue<thread> Q;

    ucontext_t con;
    int u_p;
    int c_p;
static void init()
{
    flag=0;
    getcontext(&schd.con);
    //cout<<"fgh\n";
    schd.con.uc_link=0;
    schd.con.uc_stack.ss_sp=malloc(ST_S);
    schd.con.uc_stack.ss_size=ST_S;
    makecontext(&schd.con, schd.schedule, 0);

}
static thread main, schd;
static int flag;
public:

thread()
    {   }   
thread(int i){ init(); }

    static  void schedule()
    {
        //cout<<"ii\n";
        if(Q.empty()){
        flag=0;
        return;
        }
            main=Q.front();
            Q.pop();
            setcontext(&main.con);
    init();
    //cout<<"yea\n";    

    }   

    thread(void (*fn)(), int u_p=15)
    {

        getcontext(&con);
        con.uc_link=&schd.con;
        con.uc_stack.ss_sp=malloc(ST_S);  
        con.uc_stack.ss_flags=0;        
        con.uc_stack.ss_size=ST_S;
        makecontext(&con, fn, 0);
        //cout<<"hjkl\n";
        Q.push(*this);
    if(flag==0){
    flag=1;
    schedule();
    }           
    }
static void start(){ schedule(); }

    };
queue<thread> thread::Q;
thread thread::main;
thread thread::schd;
int thread::flag; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:07:22.563

似乎正在发生这种情况：

1.  你创建一个新线程
2.  `Thread::Thread()`来电`Thread::shedule()`
3.  `Thread::shedule()`来电`setcontext()`
4.  控制流切换到`function`新`Thread`对象
5.  这个新线程执行，而不是切换回其父上下文，因此无法创建另一个线程

我认为我见过的所有线程库和 OS API 要么创建挂起的线程，要么提供一个标志来创建处于挂起状态的线程。所以这是一个很好的方法，否则你会在创建另一个线程时丢失停止当前线程。此外，由于您使用轻量级线程，您几乎被迫创建没有任何标志的挂起线程，以便能够从主线程创建多个线程。

# c# - 访问名称存储在另一个变量中的变量的值

> ID：12119232
> 
> 赞同：0
> 
> 时间：2012-08-25T04:46:30.343
> 
> 标签：c#, variables, variable-assignment

使用 C#，我可以访问名称存储在另一个字符串变量中的变量的内容吗

例如。

```
string str ="ABCDEFG";
string variable = "str"; 
```

在这里我可以使用 var 访问字符串 str 的值吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T04:51:19.923

你可能可以，但这太复杂了。你有没有想过使用 Dictionary 类？

```
Dictionary<string,string> myDictionary = new Dictionary<string,string>();

myDictionary["str"] = "ABCDEF";

var valueinstr = myDictionary["str"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:55:49.927

是的，您可以使用反射。

```
var fieldInfo = this.GetType().GetField(var);
string theValue = (string) fieldInfo.GetValue(this); 
```

请注意，在您的示例`var`中是关键字，因此您不能将其用作变量的名称。

使用反射方法，您可以获得一个描述属性的对象，然后使用它从类的特定实例中检索值。如果您的属性不是公开的，那么您必须在获取[PropertyInfo时指定正确的](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo)[BindingFlags](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)。如果您使用示例中的变量，则需要检索[FieldInfo](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.aspx#Y2430)对象（[另一个示例](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx#Y0)）。

# ios - orderingValue 的主要目的是什么？（参考：iOS 编程 - 大书呆子牧场）

> ID：12119236
> 
> 赞同：0
> 
> 时间：2012-08-25T04:48:02.713
> 
> 标签：ios, core-data

orderingValue 的目的是什么？是否只是重新排序 BNRItemStore 和数据库中的字段？

如果是这样，在创建的所有其他实体中是否需要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:49:00.277

orderValuing 只是这个特定练习订购项目的一个步骤

# objective-c - 保留计数总是-1？

> ID：12119237
> 
> 赞同：1
> 
> 时间：2012-08-25T04:48:46.220
> 
> 标签：objective-c, ios, macos, foundation, reference-counting

谁能帮忙，我有一些代码，我正在检查retainCount，但它总是-1，至少应该是1？

这是我的代码，我做错了什么？

```
 NSNumber* n = [[NSNumber alloc] initWithInt:100];

    NSLog(@"Count of   n : %i",[n retainCount]);

    NSNumber* n1 = n;

    NSLog(@"Count of   n : %i",[n retainCount]);
    NSLog(@"Count of   n1: %i",[n1 retainCount]);
    NSLog(@"Address of n : %p", n);
    NSLog(@"Address of n1: %p", n1); 
```

我得到的另一个奇怪的事情是关于 %i，说它实际上返回一个 uint，所以我将 %i 替换为 %u，现在我得到了一个非常长的 retainCount 数字 - 4294967295

有点迷茫，有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T04:54:26.110

的结果`-retainCount`在您的抽象级别上毫无价值，这是另一个原因。

…但是继续你的问题：`NSUIntegerMax`表示一个不朽的对象。

您可以在一些文档中找到对此的引用：

> 你可以在一个类中重写这个方法来实现你自己的引用计数方案。对于永远不会被释放的对象（即它们的释放方法什么都不做），这个方法应该返回 UINT_MAX，如`<limits.h>`.

# java - 为什么 if 语句中的表达式顺序很重要

> ID：12119240
> 
> 赞同：8
> 
> 时间：2012-08-25T04:49:04.813
> 
> 标签：java, c++, c, if-statement

假设我有一个`IF`条件：

```
if (A || B) 
    ∧
    |
    |
   left
{ 
   // do something  
} 
```

现在假设它`A`更有可能收到一个真实的价值`B`，那么我为什么要关心左边的哪一个呢？

如果我将它们都放在`IF`括号中，那么我知道（作为代码的程序员）需要双方。

问题是，我的教授在他的讲义上写道，我应该把“更可能的变量接受一个真实的”放在左边。

有人可以解释一下好处吗？好吧，我把它放在左边……我得到了什么？运行 ？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-25T07:56:15.653

它不仅仅是选择左边最可能的条件。您还可以在左侧设置安全卫士，这意味着您只能下一个订单。考虑

```
if (s == null || s.length() == 0) // if the String is null or empty. 
```

您不能在此处交换顺序，因为第一个条件可以保护第二个条件免于抛出 NPE。

同样，您可以拥有

```
if (s != null && s.length() > 0) // if the String is not empty 
```

选择最可能为真`||`或假的`&&`原因是微优化，以避免在第二个表达式中进行评估的成本。这是否会转化为可衡量的性能差异是值得商榷的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-25T04:52:28.963

> **我把它放在左边......我得到了什么？运行时间**？

因为`||`C++ 中的运算符使用***[短路求值](http://en.wikipedia.org/wiki/Short-circuit_evaluation)***。
ie:`B`仅当`A`被评估为 a时才被评估`false`。

*但是，请注意，在 C++ 中，保证“内置”*数据类型而不是自定义数据类型的短路评估。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-25T04:51:33.683

根据[javadoc](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

> && 和 || 运算符对两个布尔表达式执行条件与和条件或运算。这些运算符表现出“短路”行为，这意味着仅在需要时才评估第二个操作数

因此，如果真正的语句在顺序中排在第一位，它会在运行时将第二个操作数短路。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T04:51:36.677

如果左边的表达式为真，则不需要计算右边的表达式，因此可以在运行时对其进行优化。这是一种称为短路的技术。因此，通过将表达式更可能为真放置在左侧，我们可以期望我们的程序执行得更好，而不是相反。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-25T04:51:51.187

您应该首先放置更有可能为真的条件，因为这会导致 if 语句短路。这意味着它不会评估 if 语句的其余部分，因为它已经知道答案是正确的。这使代码更有效率。

当您的 if 语句评估昂贵的东西时，这尤其有用：

```
if(doExpensiveCheck1() || doExpensiveCheck2()) { } 
```

在这种情况下，由于支票价格昂贵，首先放置最有可能的支票对您有利。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-25T05:05:08.707

在许多情况下，除了微小的性能改进外，没有任何实际区别。如果您的检查是非常昂贵的函数调用（不太可能），或者您需要按顺序检查，这变得有用。例如，假设您想检查某物的属性并首先检查某物是否为 nil，您可能会执行以下操作：

如果 (a != nil && a.attribute == 有效) {}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-25T05:52:22.130

是的，您正在获得运行时间，对于一次操作来说似乎并不多，但您必须记住，操作将重复数百万次

为什么要在一个足够的情况下执行两个评估是逻辑

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-03T06:39:36.180

在运行时 if(a||b) 将首先测试 a，如果 a 为真，则不会浪费时间测试 b，因此编译器将提前执行​​ 1 次。因此，如果 a 比 b 更可能为真，则此测试也可能削减 1 条线。单行上未执行的总行数很小，但如果语句嵌套在某种循环中（for、while、recession 或与数据库相关的查询），则它是巨大的。例如，我们有 100 万分钟来测试数据库中的数据，每条记录 1 分钟（条件 A 为 30 秒，条件 B 为 30 秒）。假设 A 有 80% 的机会是真的，B 有 20% 的机会是真的。如果你先放 A 所需的总时间是 600-000 小时，但如果你先放 B 则需要 900-000 小时。如果先测试 A [(0,8*1 百万小时)*0,5 分钟+(0,2*1 百万小时) *1min]===6000-000hrs : 如果 B 先测试 [(0,2*1million hours)*0,5mins+(0, 2*100 万小时）*1 分钟]===9000-000 小时。但是，如果 A 变为真的概率更接近 B 的概率，您会注意到差异不那么显着。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-15T22:17:59.603

```
public class Main
{
    public static void main(String[] args) {
        System.out.println("Hello World");
        Integer a = null;
        Integer b = 3;
        Integer c = 5;

        if(a != null && a == 2){
            System.out.println("both");
        }else{
            System.out.println("false");
        }
    }
} 
```

你好世界
假

# c# - 在 C# 中实现函数

> ID：12119241
> 
> 赞同：2
> 
> 时间：2012-08-25T04:49:06.193
> 
> 标签：c#, android, xamarin.android

嘿伙计们，幸运的是我已经成功地为 android 安装了单声道。我试图创建一个按钮，一旦点击就会显示吐司。但是，C# 似乎没有实现功能。

你如何在 C# 中定义它？

```
public class helloworld extends Activity implements OnclickListener{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T04:55:03.983

您使用与扩展类相同的语法来实现[接口：](http://msdn.microsoft.com/en-us/library/ms173156.aspx)

```
public class helloworld : Activity, OnclickListener
{

} 
```

请务必在您正在实现的接口[之前列出您继承的类。](http://en.csharp-online.net/ECMA-334%3a_17.1.2_Class_base_specification)

# android - OpenGL缓冲区交换刷新率，如何计算理想

> ID：12119250
> 
> 赞同：2
> 
> 时间：2012-08-25T04:50:49.397
> 
> 标签：android, linux, opengl-es

我正在计时我的 OpenGL 帧速率，打开垂直同步，并注意我的计时不是显示器设置的精确频率。也就是说，在我的桌面上我有 60Hz 刷新，但 FPS 稳定在 59.88，而在我的平板电脑上它也是 60Hz，但 FPS 可以是 61/62 FPS。我很好奇究竟是什么导致了这些轻微的偏差。

这些是我到目前为止的想法：

1.  丢帧：这是显而易见的答案：我只是缺少一些帧。然而，这不是原因，因为我可以验证我没有丢帧，如果发生这种情况，FPS 的下降会更高。我计算了超过 120 帧的时间，因此如果丢失 1 帧，桌面上的 FPS 将降至 59.5 以下。
2.  时间不准确：我使用 clock_gettime 来获取我的时间。在 Linux 上，我知道这已经足够准确了（正如我之前使用它进行基于纳秒的计时，但在这里我们甚至可以忍受 +/- 几百微秒）。但是在 Android 上，我不确定这个的准确性。
3.  API 奇怪：我在桌面上使用 glXSwapBuffers，在 Android 上使用 eglSwapBuffers。这里可能有点奇怪，但我不明白这会如何微妙地影响帧速率。
4.  近似赫兹：这是我最大的猜测，显卡/显示器实际上并未以 60Hz 运行。这可能与显示器的确切速度和视频卡频率有关。这似乎可以具体确定，但我不知道可以使用哪些工具来做到这一点。（更新：我当前在 Linux 中的视频模式显示 59.93Hz，如此接近，但仍然不存在）

如果答案确实是#4，那么这可能不是该问题的最佳交换站点。但在所有情况下，我的最终目标是以编程方式找出理想的刷新率实际是多少。所以我希望有人可以确认/否认我的想法，并可能为我指明正确的方向以获取我需要的信息。

# ubuntu - 删除 /var/lib/dpkg 后无法获取 debconf 版本

> ID：12119251
> 
> 赞同：4
> 
> 时间：2012-08-25T04:50:50.053
> 
> 标签：ubuntu, ubuntu-12.04

作为一个新的ubuntu用户，我只是犯了一个错误。我删除了一个文件夹 /var/lib/dpkg/ 而不是 /var/lib/dpkg/lock。

现在，当我执行 apt-get -f install 时，它将显示错误消息：

```
...
E: Cannot get debconf version. Is debconf installed?
debconf: apt-extracttemplates failed: No such file or directory
... 
```

我试过这个教程： http: [//people.adams.edu/~cdmiller/posts/Ubuntu-dpkg-recovery/](http://people.adams.edu/~cdmiller/posts/Ubuntu-dpkg-recovery/)但仍然没有运气。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T05:05:41.657

Ubuntu真的需要解决这个小问题，有很多人遇到同样的问题，有没有尝试过这些解决方案？

[http://www.linuxquestions.org/questions/linux-mint-84/dpkg-directory-re-create-862558/](http://www.linuxquestions.org/questions/linux-mint-84/dpkg-directory-re-create-862558/) [https://answers.launchpad.net/ubuntu/+question/70504](https://answers.launchpad.net/ubuntu/+question/70504)

# php - 使用 PHP 返回 JSON 数据的安全性

> ID：12119265
> 
> 赞同：0
> 
> 时间：2012-08-25T04:53:43.063
> 
> 标签：php, xcode, json

我有一个 PHP 和 MySQL 服务器来检索数据，目前我将它与 Xcode 实现一起使用。我目前担心这方面的安全问题。我没有 SSL 连接。

我让它有点安全的方式：

*   使用 POST
*   通过 JSON_decode 返回
*   并使用一个唯一的字符串，如 - $_POST['security_code']，如果不相同则返回 0

这两种方法是否还可以或对此有任何建议，因为我担心恶意客户端对我的应用程序进行 http 调用（由 ctrahey 引用）

谢谢

# c# - 存储 IEnumerable 以外的 XML 值

> ID：12119268
> 
> 赞同：0
> 
> 时间：2012-08-25T04:54:06.800
> 
> 标签：c#, linq-to-xml

我像这样在 IEnumerable 中存储 XML 值

```
 public static IEnumerable bindstate()
    {
        var states = from b in getdata().Descendants("state").SelectMany(state => state.Elements("text"))
        orderby (string)  b
        select  (string) b;

        return states;

    } 
```

除了 IEnumerable 之外，还有其他存储值的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:11:43.407

通过将值存储到其他类型的 IEnumerable 中，不确定您的意思。我想如果你改变返回类型

```
IEnumerable 
```

至

```
IEnumerable<string> 
```

这将帮助你。

如果你想我也可以返回一个`List<string>`并添加

```
return states.ToList(); 
```

到 return 语句以返回 List os 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:41:55.110

是的，您可以“实现”`IEnumerable<T>`到：

1.  `List<T>`：使用`IEnumerable<T>.ToList()`：`return states.ToList();`。
2.  `ReadOnlyCollection<T>`（实现`IList<T>`接口）：使用`IEnumerable<T>.AsReadOnly()`: `return states.AsReadOnly();`。由于它来自其名称，因此返回的列表是只读的。

在这两种情况下，方法的首选返回类型`bindstate`是`IList<T>`或`ICollection<T>`。

# android - DialogFragments 和 Gallery App 使用 Android 支持库 (rev.10) “Compability Package”，API 7 到 API 16 的 V4 包

> ID：12119276
> 
> 赞同：1
> 
> 时间：2012-08-25T04:54:56.523
> 
> 标签：android, android-emulator, android-fragments, android-gallery

我已将 AOSP“Launcher2”WallpaperChooser 和 WallpaperChooserDialogFragment 中的代码改编为独立的图库应用程序，我希望它可以在 API 级别 7 到 API 16 上运行。

为了使其适用于 API 级别 < 11，我添加了 Android 支持库 (rev.10) “Compability Package”，V4 包。

我在兼容性包（android.support.v4.app.DialogFragment.java）中的更改基于此处的建议： [DialogFragments with devices api level < 11](https://stackoverflow.com/questions/5637894/dialogfragments-with-devices-api-level-11)。

否则应用程序会因错误而崩溃（“DialogFragment 无法附加到容器视图”）。

但是，当部署到实际的 Jelly Bean 4.1.1 设备 (Nexus S) 时，该应用程序拒绝按预期工作，但它在模拟器上运行良好。

经过测试和工作：

> *   Android 2.1 模拟器 (API 7)
> *   Android 2.2 模拟器 (API 8)
> *   Android 2.3.3 模拟器 (API 10)
> *   Android 4.0.3 模拟器 (API 15)
> *   Android 4.1 模拟器 (API 16)
>     
>     
> *   Android 2.3.7 设备 (API 10)

已测试且不适用于：

> *   Android 4.1.1 设备 (API 16)

在 4.1.1 设备上运行时，在水平视图中点击画廊图像时，它永远不会加载/显示画廊图像。

选择并旋转设备后才显示每张图片，然后再次选择新图片，再次旋转，即可正常显示。

我还没有设法弄清楚为什么它不能在真实设备上工作的问题，所以任何帮助表示赞赏。如果我删除了兼容性包并且只针对 API 级别 +11，则该应用程序可以在真正的 4.1.1 设备上运行。

这是应用程序的代码：

GalleryDemo.java:

```
package gallery.android.demo;

import android.support.v4.app.DialogFragment;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;

import android.os.Bundle;

public class GalleryDemo extends FragmentActivity {

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.wallpaper_chooser_base);

    Fragment fragmentView = getSupportFragmentManager().findFragmentById(R.id.wallpaper_chooser_fragment);
    if (fragmentView == null) {
        DialogFragment fragment = GalleryDemoDialogFragment.newInstance();
        fragment.show(getSupportFragmentManager(), "dialog");
    }
}
} 
```

GalleryDemoDialogFragment.java:

```
package gallery.android.demo;

import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;

import android.annotation.TargetApi;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.ColorFilter;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.SpinnerAdapter;
import android.widget.Toast;

import java.util.ArrayList;

@SuppressWarnings("deprecation")
@TargetApi(16)
public class GalleryDemoDialogFragment extends DialogFragment implements AdapterView.OnItemSelectedListener, AdapterView.OnItemClickListener {

private static final String TAG = "GalleryDemoDialogFragment";
private static final String EMBEDDED_KEY = "gallery.android.demo.GalleryDemoDialogFragment.EMBEDDED_KEY";

private boolean mEmbedded;
private Bitmap mBitmap = null;

private ArrayList<Integer> mThumbs;
private ArrayList<Integer> mImages;
private WallpaperLoader mLoader;
private WallpaperDrawable mWallpaperDrawable = new WallpaperDrawable();

public static GalleryDemoDialogFragment newInstance() {
    GalleryDemoDialogFragment fragment = new GalleryDemoDialogFragment();
    fragment.setCancelable(true);
    return fragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null && savedInstanceState.containsKey(EMBEDDED_KEY)) {
        mEmbedded = savedInstanceState.getBoolean(EMBEDDED_KEY);
    } else {
        mEmbedded = isInLayout();
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    outState.putBoolean(EMBEDDED_KEY, mEmbedded);
}

private void cancelLoader() {
    if (mLoader != null && mLoader.getStatus() != WallpaperLoader.Status.FINISHED) {
        mLoader.cancel(true);
        mLoader = null;
    }
}

@Override
public void onDetach() {
    super.onDetach();
    cancelLoader();
}

@Override
public void onDestroy() {
    super.onDestroy();
    cancelLoader();
}

@Override
public void onDismiss(DialogInterface dialog) {
    super.onDismiss(dialog);
    FragmentActivity activity = getActivity();
    if (activity != null) {
        activity.finish();
    }
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    findWallpapers();
    return null;
}

@TargetApi(16)
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    findWallpapers();
    if (mEmbedded) {
        View view = inflater.inflate(R.layout.wallpaper_chooser, container, false);
        switch (Build.VERSION.SDK_INT) {
        case Build.VERSION_CODES.ICE_CREAM_SANDWICH :
            view.setBackgroundDrawable(mWallpaperDrawable);
            break;
        case Build.VERSION_CODES.JELLY_BEAN :
            view.setBackground(mWallpaperDrawable);
            break;
        default:
            view.setBackgroundDrawable(mWallpaperDrawable);
            break;
        }

        final Gallery gallery = (Gallery) view.findViewById(R.id.gallery);
        gallery.setCallbackDuringFling(false);
        gallery.setOnItemSelectedListener(this);
        gallery.setAdapter(new ImageAdapter(getActivity()));

        View setButton = view.findViewById(R.id.set);
        setButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                int position = gallery.getSelectedItemPosition();
                String[] wallpaperArray = getResources().getStringArray(R.array.wallpapers);
                String name = wallpaperArray[position]+".jpg";

                Log.i(TAG, "Position="+position);
                Log.i(TAG, "Filename="+name);
                Toast.makeText(getActivity().getApplicationContext(), "(Save2SD)\n"+
                                                                      "Position="+position+"\n"+
                                                                      "Filename="+name+
                                                                      "", Toast.LENGTH_SHORT).show();
            }
        });
        return view;
    }
    return null;
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    if (mLoader != null && mLoader.getStatus() != WallpaperLoader.Status.FINISHED) {
        mLoader.cancel();
    }
    Log.d(TAG, "onItemSelected()");
    mLoader = (WallpaperLoader) new WallpaperLoader().execute(position);
}

@Override
public void onNothingSelected(AdapterView<?> parent) {
}

private void findWallpapers() {
    mThumbs = new ArrayList<Integer>(24);
    mImages = new ArrayList<Integer>(24);

    final Resources resources = getResources();
    final String packageName = resources.getResourcePackageName(R.array.wallpapers);

    addWallpapers(resources, packageName, R.array.wallpapers);
    addWallpapers(resources, packageName, R.array.extra_wallpapers);
}

private void addWallpapers(Resources resources, String packageName, int list) {
    final String[] extras = resources.getStringArray(list);
    for (String extra : extras) {
        int res = resources.getIdentifier(extra, "drawable", packageName);
        if (res != 0) {
            final int thumbRes = resources.getIdentifier(extra + "_small", "drawable", packageName);
            if (thumbRes != 0) {
                mThumbs.add(thumbRes);
                mImages.add(res);
            }
        }
    }
}

private class ImageAdapter extends BaseAdapter implements ListAdapter, SpinnerAdapter {
    private LayoutInflater mLayoutInflater;

    ImageAdapter(FragmentActivity activity) {
        mLayoutInflater = activity.getLayoutInflater();
    }

    public int getCount() {
        return mThumbs.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view;

        if (convertView == null) {
            view = mLayoutInflater.inflate(R.layout.wallpaper_item, parent, false);
        } else {
            view = convertView;
        }

        ImageView iv = (ImageView) view.findViewById(R.id.wallpaper_image);

        int thumbRes = mThumbs.get(position);
        iv.setImageResource(thumbRes);

        Drawable thumbDrawable = iv.getDrawable();
        if (thumbDrawable != null) {
            thumbDrawable.setDither(true);
        } else {
            Log.e(TAG, "Error decoding thumbnail resId=" + thumbRes + " for wallpaper #" + position);
        }
        return view;
    }
}

private class WallpaperLoader extends AsyncTask<Integer, Void, Bitmap> {
    BitmapFactory.Options mOptions;

    WallpaperLoader() {
        mOptions = new BitmapFactory.Options();
        mOptions.inDither = false;
        mOptions.inPreferredConfig = Bitmap.Config.ARGB_8888;
    }

    @Override
    protected Bitmap doInBackground(Integer... params) {
        if (isCancelled()) return null;
        try {
            return BitmapFactory.decodeResource(getResources(), mImages.get(params[0]), mOptions);
        } catch (OutOfMemoryError e) {
            return null;
        }
    }

    @Override
    protected void onPostExecute(Bitmap b) {
        if (b == null) return;
        if (!isCancelled() && !mOptions.mCancel) {
            if (mBitmap != null) {
                mBitmap.recycle();
            }

            View v = getView();
            if (v != null) {
                Log.d(TAG, "WallpaperLoader.onPostExecute() getView != null");
                mBitmap = b;
                mWallpaperDrawable.setBitmap(b); // Doesn't appear to work on (physical) device with Jelly Bean (4.1.1)?
                v.postInvalidate();
            } else {
                Log.d(TAG, "WallpaperLoader.onPostExecute(Bitmap b) getView == null");
                mBitmap = null;
                mWallpaperDrawable.setBitmap(null);
            }
            mLoader = null;
        } else {
           b.recycle();
        }
    }

    void cancel() {
        mOptions.requestCancelDecode();
        super.cancel(true);
    }
}

private static class WallpaperDrawable extends Drawable {

    Bitmap mBitmap;
    int mIntrinsicWidth;
    int mIntrinsicHeight;

    void setBitmap(Bitmap bitmap) {
        Log.d(TAG, "WallpaperDrawable.setBitmap(Bitmap)");
        mBitmap = bitmap;
        if (mBitmap == null) {
            Log.d(TAG, "WallpaperDrawable.setBitmap(Bitmap) mBitmap == null");
            return;
        }
        mIntrinsicWidth = mBitmap.getWidth();
        mIntrinsicHeight = mBitmap.getHeight();
    }

    @Override
    public void draw(Canvas canvas) {
        if (mBitmap == null) {
            Log.d(TAG, "WallpaperDrawable.draw(Canvas) mBitmap == null");
            return;
        }
        Log.d(TAG, "WallpaperDrawable.draw(Canvas)");
        int width = canvas.getWidth();
        int height = canvas.getHeight();
        int x = (width - mIntrinsicWidth) / 2;
        int y = (height - mIntrinsicHeight) / 2;
        canvas.drawBitmap(mBitmap, x, y, null);
    }

    @Override
    public int getOpacity() {
        return android.graphics.PixelFormat.OPAQUE;
    }

    @Override
    public void setAlpha(int alpha) {
    }

    @Override
    public void setColorFilter(ColorFilter cf) {
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:02:40.247

运行 API 16 的真实设备是唯一具有硬件加速渲染的设备，这就是它表现不同的原因。您可以尝试在 Activity 的清单条目中设置 android:hardwareAccelerated="false" 来进行试验。

如果在更改 Drawable 的内容时调用 invalidateSelf()，则可以保持加速：

```
private static class WallpaperDrawable extends Drawable {
    void setBitmap(Bitmap bitmap) {
        . . .            
        invalidateSelf();
    }
} 
```

# xcode - 如何在 sqlite 上保存和阅读 AVAudioRecordings？

> ID：12119278
> 
> 赞同：1
> 
> 时间：2012-08-25T04:55:09.263
> 
> 标签：xcode, sqlite, avaudiorecorder

我正在开发一个应用程序，该应用程序需要我将录音保存在数据库中并稍后检索它们。但是，虽然我对如何使用 sqlite 有所了解，但我不确定在保存录音时是否使用了正确的方法，因为我很难让它工作。下面列出了我用来保存录音的当前代码，如果收到有关我的代码的任何反馈，我将不胜感激。

```
 self.renameString =[NSString stringWithFormat:@"%@/%@.caf",DOCUMENTS_FOLDER,self.soundName.text];
        NSLog(@"%@",self.renameString);

        self.soundFileURL2 = [NSURL fileURLWithPath:self.renameString];
        NSLog(@"%@",self.soundFileURL2);

        NSFileManager *fm = [NSFileManager defaultManager];
        NSError *renameError;

        [fm moveItemAtURL:self.soundFileURL toURL:self.soundFileURL2 error:&renameError];

        [self checkAndCreateDatabase];

        self.soundName.text = @"";

        BOOL checkQuery;
        NSData *blob;
        blob = self.voiceData;

    sqlite3_stmt *statement;
        const char *insert = [self.renameString UTF8String];
            if(sqlite3_prepare_v2(soundDB, insert, -1, &statement, NULL)!= SQLITE_OK) {
                checkQuery=NO;  
            }
            else {
                sqlite3_bind_blob(statement, 1, [blob bytes], [blob length], NULL);

                if(SQLITE_DONE != sqlite3_step(statement)) {
                    checkQuery=NO;
                }
                else {
                    // NSLog(@"Query Working nicely");
                    checkQuery=YES; 

                    sqlite3_reset(statement);
                }
            }
        //}
        sqlite3_finalize(statement);    
        sqlite3_close(soundDB); 
```

我还知道，为了检索保存的文件，您必须声明一个新的 NSData 变量并将读数分配给该变量。之后，您必须提取 NSData 并将其放入另一个变量本身。问题是，虽然我知道如何提取 NSString 和 UIImage 数据，但我不确定提取 AVAudioRecorder 数据的规则。有人可以帮我吗？谢谢。

# python - 为什么这个装饰器不能用“from module import *”从模块中导入？

> ID：12119281
> 
> 赞同：3
> 
> 时间：2012-08-25T04:55:49.577
> 
> 标签：python, properties, import, decorator

我在模块中有以下装饰器：

```
class CachedProperty(object):
    """Decorator that lazy-loads the value of a property.

    The first time the property is accessed, the original property function is
    executed. The value it returns is set as the new value of that instance's
    property, replacing the original method.
    """

    def __init__(self, wrapped):
        self.wrapped = wrapped
        try:
            self.__doc__ = wrapped.__doc__
        except:
            pass

    def __get__(self, instance, instance_type=None):
        if instance is None:
            return self

        value = self.wrapped(instance)
        setattr(instance, self.wrapped.__name__, value)

        return value 
```

我想从模块中导入这个装饰器和其他东西，如下所示：

```
from clang.cindex import * 
```

但是我无法以这种方式导入那个单一的装饰器，如果我这样做，它就可以工作：

```
from clang.cindex import CachedProperty 
```

然后我可以使用`@CachedProperty`.

为什么我不能导入这个类，`*`而我可以导入其他类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T06:18:56.307

`__all__`查看模块顶部附近是否有一个名为定义的变量。如果是这样，它将分配给它的字符串名称序列（列表或元组）。这些是`from ... import *`语句导入的模块的公共名称。

如果没有定义名称，则`__all__`模块中定义的所有名称（以及从其他模块导入的名称）不以下划线开头，都被认为是公共的。

确保`__all__`序列包含字符串“CachedProperty”。

# objective-c - 构建自定义 NSArchiver 序列化为字符串

> ID：12119282
> 
> 赞同：0
> 
> 时间：2012-08-25T04:56:06.057
> 
> 标签：objective-c, nsarchiving

NSArchiver 如何序列化到文件？我假设它是以二进制格式序列化的，对吗？如果我想将它存储在字符串中以便存储到 SQLite 数据库中怎么办？我需要编写自己的自定义 NSArchiver 吗？如果是这样，我该怎么做？那里有教程吗？

ps 我确实意识到 Core Data 可以做到这一点，但让我暂时取消该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:11:43.617

如果需要，您可以`NSData`使用[`+archivedDataWithRootObject:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArchiver_Class/Reference/Reference.html#//apple_ref/occ/clm/NSArchiver/archivedDataWithRootObject%3a). 它不会是“字符串”，但这很好，因为`NSString`Cocoa 中的 an 表示 Unicode 字符序列，而 an`NSData`表示字节序列（您可以轻松地将其存储在您想要的任何位置，包括在数据库中）。

请注意，您确实应该`NSKeyedArchiver`改用：

> [`+ (NSData *)archivedDataWithRootObject:(id)rootObject`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html#//apple_ref/occ/clm/NSKeyedArchiver/archivedDataWithRootObject%3a)
> 
> [`+ (id)unarchiveObjectWithData:(NSData *)data`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html#//apple_ref/occ/clm/NSKeyedUnarchiver/unarchiveObjectWithData%3a)

# objective-c - Xcode 4 在使用@property 时会自动生成 iVars，我在哪里可以找到该功能的官方文档？

> ID：12119284
> 
> 赞同：3
> 
> 时间：2012-08-25T04:56:45.287
> 
> 标签：objective-c, ios, xcode, properties, llvm

我已阅读“Xcode 中的新功能”，但我找不到此功能的官方解释。我在哪里可以找到官方的解释？哪个文档？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-25T05:13:34.863

假设您的意思是它会为您自动生成 ivar 以及 getter 和 setter 方法，即使您省略`@synthesize`: 这也称为默认属性合成、自动属性合成和属性自动合成。

没有很多文档。据我所知，**没有**关于它如何工作的官方文档，只是它存在的事实。

这确实是一个 clang 功能，而不是 Xcode 功能。它在 Xcode 4.0 DP 4 附带的 clang 版本中短暂出现，但不久后由于错误而被删除。它重新出现在 Xcode 4.4 附带的 clang 版本中。 我认为这是添加它[的提交。](http://llvm.org/viewvc/llvm-project?view=rev&revision=138913)

您可以在[Objective-C 功能可用性索引](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html#//apple_ref/doc/uid/TP40012243)中找到它。

[Clang Language Extensions](http://clang.llvm.org/docs/LanguageExtensions.html#objc_default_synthesize_properties)中也提到了它。

从实验：

*   如果您没有显式地`@synthesize`生成一个属性并且它生成一个实例变量，它将自动生成一个与声明的属性具有相同类型（并且在 ARC 下，所有权资格）的 ivar。ivar 名称将是一个下划线 ( `_`)，后跟声明的属性名称。

*   如果你**没有**显式地定义`@synthesize`一个`readonly`属性，并且你**确实**包含了一个显式的 getter 方法，那么 clang 将**不会**自动为你生成一个 ivar。

*   如果你**没有**显式地定义`@synthesize`一个`readwrite`属性，并且你**确实**包含**了**一个显式的 getter 和一个显式的 setter，那么 clang 也**不会**自动为你生成一个 ivar。

但我不知道这些行为的任何官方文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-25T05:18:24.877

您可以在 Apple 文档中的[Objective-C 编程语言：](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html) “Property Implementation Directives”下的 Declared Properties 中找到它。是否自动合成 ivar 取决于您使用的运行时：

> 存取器综合的行为因运行时而异（另请参阅“运行时差异”）：
> 
> *   对于旧版运行时，实例变量必须已经在当前类的 @interface 块中声明。如果存在与属性同名的实例变量，并且它的类型与属性的类型兼容，则使用它——否则，会出现编译器错误。
> *   对于现代运行时（参见 Objective-C 运行时编程指南中的“运行时版本和平台”），实例变量是根据需要合成的。如果同名的实例变量已经存在，则使用它。

iOS 始终使用现代运行时，因此您无需显式声明 ivars。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T05:00:37.083

实际上，这是编译器的一部分。

您可以在`LLVM` [规范网站](http://clang.llvm.org)中阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T05:12:54.250

我还要提请您注意[Cocoa 编码指南，](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html)该指南建议：

> *   避免显式声明公共实例变量。
>     
>     
>     
>     开发人员应该关注对象的接口，而不是它如何存储数据的细节。您可以通过使用已声明的属性并合成相应的实例变量来避免显式声明实例变量。

# ruby-on-rails - attribute.present 和有什么区别？和属性？

> ID：12119289
> 
> 赞同：2
> 
> 时间：2012-08-25T04:58:42.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在学习 Rails，并且正在开发一个非常基本的 RSVP 应用程序，如果用户同时输入了姓名和电子邮件地址，则`rsvp?`在我的 User 模型中调用的方法返回`true`.

如果我的方法定义为：

```
def rsvp?
  name.present? && email.present?
end 
```

我得到的结果与以下结果相同：

```
def rsvp?
  name? && email?
end 
```

`name.present?`就像我`name?` 被告知的那样，`name.present?`不仅会检查`nil`值，还会检查空字符串值。但似乎`name?`完成了同样的事情（测试了姓名和电子邮件、姓名但没有电子邮件等的所有四种排列）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T05:32:45.223

[`present?`](https://github.com/rails/rails/blob/2a371368c91789a4d689d6a84eb20b238c37678a/activesupport/lib/active_support/core_ext/object/blank.rb#L19)返回 的相反数[`blank?`](https://github.com/rails/rails/blob/2a371368c91789a4d689d6a84eb20b238c37678a/activesupport/lib/active_support/core_ext/object/blank.rb#L14)。它们是 Ruby 核心的 Rails 扩展[`Object`](http://ruby-doc.org/core-1.9.3/Object.html)。如果正在测试的值是, , , , , etc...`.present?`将返回，基于扩展的类型*(* *,* *, ,* *, 等...)*。`false``nil``""``{}``false``[]`*`Array``Hash``String`*`Object`

诸如`name?`基于模型属性的方法`:name`实际上是通过该[`method_missing`](https://github.com/rails/rails/blob/2a371368c91789a4d689d6a84eb20b238c37678a/activerecord/lib/active_record/attribute_methods.rb#L51)方法传递的`ActiveRecord::AttributeMethods`，然后由此类处理`ActiveModel::AttributeMethods`并最终**[由此类](https://github.com/rails/rails/blob/2a371368c91789a4d689d6a84eb20b238c37678a/activerecord/lib/active_record/attribute_methods/query.rb)**处理。

所以，**是**的，它们大部分是相同的（*实际上调用**了某些列类型；与上面相同）`blank?``blank?``present?`*，但它们并不**相同**，因为`?`后缀方法会根据列类型进行一些额外的检查。

# jquery - 在wordpress中调用一个js文件

> ID：12119290
> 
> 赞同：0
> 
> 时间：2012-08-25T04:58:42.777
> 
> 标签：jquery, wordpress

我有一个 wordpress 网站，我正在尝试将 .js 文件加载到其中。出于某种原因，我无法让它工作。

js 文件位于[http://www.leadcomm.net/pricequotejs.js](http://www.leadcomm.net/pricequotejs.js)

我把它放在页脚：

```
 <script type="text/javascript">
 if (window.location.href == 'http://www.leadcomm.net/cost-estimate/') {    
     var js = document.createElement('script');
     js.setAttribute("type","text/javascript");
     js.setAttribute("src", "pricequotejs.js");
     document.getElementsByTagName("head")[0].appendChild(js);
 } 
 </script> 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:23:42.730

这不是在 wordpress 中使用 js 文件的正确方式。首先，您需要将 js 文件保存在主题文件夹中名为 js 的文件夹中。然后打开你的 header.php 文件并使用这个添加这一行：

```
<script language="javascript" type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/your_file.js"></script> 
```

这会将您的 js 文件加载到 wordpress 网站。快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:02:58.213

我离开了文件onload函数。傻我...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T05:03:00.767

有什么特殊原因不能使用标准的 HTML 脚本标签吗？

```
<head>
    ...
    <script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/pricequotejs.js"></script>
</head> 
```

# ajax - ASP Menu 4.0 AJAX 客户端加载失败

> ID：12119294
> 
> 赞同：1
> 
> 时间：2012-08-25T04:59:20.033
> 
> 标签：ajax, asp.net-4.0, client-side, aspmenu-control

我有一个简单的 ASP.NET 4.0 站点（没有 MVC）。只是一个包含页眉、菜单和页脚的母版页。我也在母版页中添加了脚本管理器。该菜单是一个 ASP.NET 菜单控件。在我的开发机器上一切正常，但是一旦我将它移动到 GoDaddy 服务器，菜单就会停止工作。这是从站点地图加载的动态菜单。

我的问题是我第一次加载它时，它不起作用。我总是收到“AJAX 客户端框架无法加载错误”并且“悬停”不起作用。但是，只要我单击一个菜单项，它就会更改页面，之后一切正常。

我尝试了很多我在互联网上到处找到的东西。我在 ScriptManager 中添加了 EnablePartialRendering="True"，并添加了一些代码来管理“.axd”html 处理程序。但这些似乎都不起作用。

这是菜单的代码（测试不是最终的，所以仍然很乱）：

```
<asp:Menu ID="mnuGauche" runat="server" DataSourceID="sitemap" BackColor="Transparent" RenderingMode="Table"
                    DynamicHorizontalOffset="0"  Font-Names="Arial Black" Font-Size="small" 
                    ForeColor="#7C6F57" Width="100%" Height="20px"
                    style="margin-left: 0px" Orientation="Horizontal" StaticEnableDefaultPopOutImage="false">
                    <StaticSelectedStyle BackColor="#5D7B9D" ForeColor="White" />
                    <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
                    <DynamicHoverStyle BackColor="#7C6F57" ForeColor="White" />
                    <DynamicMenuStyle CssClass="MenuDynamique" />
                    <DynamicSelectedStyle BackColor="#5D7B9D" ForeColor="White" />
                    <DynamicMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" Font-Size="small" />
                    <StaticHoverStyle BackColor="#7C6F57" ForeColor="White" />
                </asp:Menu> 
```

在我的 Web.config 文件中，我唯一的特别之处是：

```
<system.webServer>
      <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer> 
```

尽管网络上有很多东西，但似乎没有什么能真正适用于这个菜单控件。Wich 有点奇怪，因为它来自微软自己。谁能帮我解决这个问题？

# java - 为什么使用抽象类而不是接口？

> ID：12119295
> 
> 赞同：8
> 
> 时间：2012-08-25T04:59:21.713
> 
> 标签：java, oop, interface, abstract-class

例如，一个房地产建筑商正在建造一个带有许多公寓的公寓。除卧室外，公寓中的所有房间都具有相同的设计。卧室设计留给拥有公寓的人，即；床 房间可以针对不同的公寓进行不同的设计。

`abstract`我可以通过下面的类来实现这一点：

```
public abstract class Flat
{
    //some properties

    public void livingRoom(){
       //some code
    }

    public void kitchen(){
       //some code
    }

    public abstract void bedRoom();

    }
} 
```

一个`implementation`类如下：

```
public class Flat101 extends Flat
{
    public void bedRoom() {
        System.out.println("This flat has a customized bedroom");
   }        

} 
```

或者，我可以使用 an`interface`而不是`abstract`类来实现相同的目的，如下所示：

```
class Flat
{
  public void livingRoom(){ 
       System.out.println("This flat has a living room");
  }

  public void kitchen(){
     System.out.println("This flat has a kitchen");
  } 
}

interface BedRoomInterface
{
  public abstract void bedRoom();
}

public class Flat101 extends Flat implements BedRoomInterface
{
   public void bedRoom() {
    System.out.println("This flat has a customized bedroom");
   }
} 
```

现在的问题是：为此为什么要选择使用一个`interface`（或）我为什么要选择使用一个`abstract`类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T05:14:51.347

这取决于您的意图或用例。但总的来说，您应该**更喜欢接口而不是抽象类**（Bloch 的 Effective Java 中的第 18 条）。抽象类更脆弱，因为有人可能会修改抽象类，从而改变从它扩展的其他类的行为（这是一般性陈述）。

使用接口更灵活，因为如果你有 BedroomInterface 和 LivingRoomInterface，那么你可以让 FlatInterface 实现这两个接口，然后 Flat101 实现类实现 FlatInterface（而不是从 Flat 扩展然后实现一个接口）。这看起来更清楚了，以后你可以有ExecutiveFlatInterface，它不仅有卧室和客厅，还有猜测空间，然后Flat102可以从中实现。

选项 2 是让 Flat101 从 Flat 扩展，然后 Flat 实现 BedroomInterface 和 LivingRoomInterface。这实际上取决于您想要做什么以及可能需要什么方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T04:59:12.403

如果您正在设计一个将被广泛使用的 API，您将同时使用：一个接口来表达要通过实现类来实现的合同，以及一个抽象类，它部分实现该接口并因此允许代码重用.

例如，考虑 Java 的 List：Collections 框架中的方法（例如 Collections.sort()）是根据 List 接口编写的，该接口部分由抽象类 AbstractList 实现，而抽象类又被扩展为具体实现 LinkedList和数组列表。LinkedList 和 ArrayList 重用来自 AbstractList 的代码，但这并不妨碍人们编写自己完全独立的 List 实现，然后使用 Collections.sort() 对其进行排序。

也就是说，在很多情况下，这种方法可能有点矫枉过正。如果您正在构建的类型层次结构仅在相对较小的范围内使用，则通常只使用抽象类就可以了。如果您稍后决定以后需要一个接口，那么它是一项非常轻松的重构任务来改变事物。

抽象类确实有一些优点：

*   它们允许您使用 package/protected 修饰符指定抽象方法
*   它们促进代码重用
*   通过在超类上使用抽象方法和最终方法，它们允许您限制类子类化的方式，这在各种情况下都很有用（另请参见：模板模式）
*   引用类的代码通常更容易在 IDE 中遵循（在抽象类类型参数上单击“打开声明”通常比在接口类型参数上更有用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:13:01.113

如果您有一个类提供派生类所需的某些功能，但每个派生类还需要其他功能的不同实现，那么抽象类提供了一种定义通用实现的方法，同时保留了派生类所需的特定行为特定于每个派生类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T09:36:17.163

我觉得是泛化手段；如果类的属性和行为在给定的包或模块中是通用的，则抽象类是最有用的。一个很好的例子是鼓式制动器。由于所有鼓式制动器的工作方式与在轮鼓内保持制动器的方式相同，因此这种行为可以在所有使用鼓式制动器的汽车中继承。

用于接口；它更像是规范或合同，迫使您实施其物种形成。让我们以建筑物模型为例，它具有门、窗、电梯等所有形态……但是当您将模型实施到实际建筑物中时，我们需要保留窗户，但内部行为由（因为寡妇可以是一个简单的寡妇或滑块窗口，颜色和材料......）

希望这可以帮助！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-18T06:13:10.347

我觉得当我们需要为多个类实现一些通用功能和一些抽象功能时，我们应该使用抽象类。如果我们看到 Flat 的例子，我们有一些通用设计和一些自定义设计，在这种用例中最好使用抽象而不是再次使用接口来实现自定义功能，并且使用抽象作为派生类不会创建作为普通派生类的额外实例。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-25T05:19:39.427

**你不能扩展一个以上的类，但你可以实现多个接口**

如果您需要经常更改设计，那么抽象类会更好，因为任何更改都发生在抽象类中，不需要在子类中强制实现。但是如果接口有任何变化，你必须实现实现类。

# python - 如何在 Python 中生成昨天和今天午夜的 POSIX 值？

> ID：12119299
> 
> 赞同：1
> 
> 时间：2012-08-25T05:00:39.707
> 
> 标签：python, datetime, posix

我一直在努力确定如何通过 Python 生成今天和昨天（午夜）的 POSIX (UNIX) 时间值。我创建了这段代码，但一直在纠结如何将它们转换为 POSIX 值：

```
from datetime import datetime, timedelta
import time
today_string = datetime.now().strftime('%Y-%m-%d 00:00:00')
yesterday_string = (datetime.now() - timedelta(0)).strftime('%Y-%m-%d 00:00:00')

today = datetime.strptime(today_string, '%Y-%m-%d %H:%M:%S')
yesterday = datetime.strptime(yesterday_string, '%Y-%m-%d %H:%M:%S')

print time.mktime(today).timetuple() 
```

此代码产生异常：

```
TypeError: argument must be 9-item sequence, not datetime.datetime 
```

在这一点上，我已经束手无策了。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:11:05.520

您应该将该`timetuple()`方法应用于`today`对象，而不是应用于以下结果`time.mktime(today)`：

```
>>> time.mktime(today.timetuple())
1345845600.0 
```

顺便说一句，我错了还是`yesterday`会等于`today`你的代码？

**编辑：** 要获得今天的 POSIX 时间，您只需执行以下操作：

```
time.mktime(datetime.date.today().timetuple()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:24:37.207

@Bakuriu 就在这里。但是你让这个过于复杂了。

看看这个：

```
from datetime import date, timedelta
import time

today = date.today()
today_unix = time.mktime(today.timetuple())

yesterday = today - timedelta(1)
yesterday_unix = time.mktime(yesterday.timetuple()) 
```

由于该`date`对象不保持时间，它会将其重置为午夜。

您还可以将最后一部分替换为：

```
yesterday_unix = today_unix - 86400 
```

但请注意，它在夏令时切换时无法正常工作（即您最终会在凌晨 1 点或下午 23 点结束）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:58:20.037

从 datetime 对象获取 unix 时间戳作为字符串和浮点数：

```
datetime.now().strftime('%s')
'1345884732'

time.mktime(datetime.now().timetuple())
1345884732.0 
```

# javascript - 谷歌地图加载后隐藏加载图像

> ID：12119300
> 
> 赞同：0
> 
> 时间：2012-08-25T05:00:40.377
> 
> 标签：javascript, jquery, google-maps-api-3

我向 Google map api v3 添加了加载图像。单击按钮时，会显示加载图像，但加载地图后我无法隐藏加载图像。请帮我一些提示。

Google 地图位于 div id 下：map_canvas

加载图像存在于 div id: 内

我正在使用代码： $('div.inner').show(); 单击按钮后显示加载图像。

我试过这段代码来隐藏加载图像，但它没有用：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(window).load(function(){
      $("#inner").hide();
})
</script> 
```

我也尝试使用 $(map_canvas).load(function()...

我还尝试添加 $("#inner").hide(); 在地图代码的最后一行。但没有任何效果。

请帮我在谷歌地图完全加载后隐藏加载图像。

编辑：................................................ …………………………………………………………………………………………………………………………

我得到了它。

创建一个这样的函数：

```
function hide()
    {
        $('div.inner').hide();
    } 
```

并在地图代码的最后一行调用它，它起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:33:20.470

我不使用 jQuery，所以我会这样做：

```
var loadingDiv = document.getElementById('inner');
loadingDiv.style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:26:33.270

您可以在 google map api v3 中查看 tilesloaded 事件。查看 [示例页面](http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html)

# django - 夹层的管理“添加页面类型”页面中显示自定义内容类型，其中包含一个空选项

> ID：12119303
> 
> 赞同：0
> 
> 时间：2012-08-25T05:02:28.713
> 
> 标签：django, mezzanine

我在 Mezzanine 中写了一个小型博客以用于学习目的，并希望通过子类化“mezzanine.pages.models.Page”并在管理员中注册此模型来添加自定义内容类型。我的课程看起来像这样：

*模型.py：*

```
from django.db import models
from mezzanine.pages.models import Page

class Student(Page):
    dob = models.DateField("Date of birth")
    name = models.CharField("Name", max_length=30)
    gender = models.CharField("Gender", max_length = 5, choices=(('M','Male'),           
                                              ('F','Female')), default = 'M')
    image = models.ImageField(upload_to='Students')

class Project(models.Model):
    student = models.ForeignKey("Student")
    project_image = models.ImageField(upload_to="StudentProjects") 
```

*管理员.py：*

```
from copy import deepcopy
from django.contrib import admin
from mezzanine.pages.admin import PageAdmin
from .models import Student, Project

student_extra_fieldsets = ((None, {"fields": ("dob","name","gender","image")}),)

class ProjectInline(admin.TabularInline):
    model = Project

class StudentAdmin(PageAdmin):
    inlines = (ProjectInline,)
    fieldsets = deepcopy(PageAdmin.fieldsets) + student_extra_fieldsets

admin.site.register(Student, StudentAdmin) 
```

现在，当我访问“http://localhost:8000/admin/pages/page/”添加我新注册的内容类型时，我得到一个没有名称的空选项，但是当我选择自定义内容类型“学生" 要添加和编辑的页面。

由于我刚刚开始使用 Django 和 Mezzanine，所以我不能简单地弄清楚。

我使用“ **sqlite** ”作为后端，而不是使用“ **South** ”

对此有任何指示吗？

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:09:19.590

我在 models.py 中删除了“ ***name = models.CharField("Name", max_length=30)*** ”，并将其替换为：

```
first_name = models.CharField("First Name", max_length=30)
last_name = models.CharField("Last Name", max_length=30) 
```

现在一切似乎都很好！（只有当我使用“**南**”

# php - 使用 OPENDIR() 选择随机文件

> ID：12119304
> 
> 赞同：-4
> 
> 时间：2012-08-25T05:02:43.370
> 
> 标签：php, opendir

我努力了：

```
function random_pic($dir = '../myfolder') {
    $files = opendir($dir . '/*.*');
    $file = array_rand($files);
    return $files[$file];
} 
```

此功能使用`glob()`但不能使用 opendir。

这将返回打开目录失败错误。我猜 opendir 不能接受类似的东西`*.*`？是否可以选择文件夹中的所有文件并随机选择一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T05:26:16.293

该`opendir()`函数不会返回文件/文件夹列表。它只会打开一个可供`closedir()`,`readdir()`或使用的句柄`rewinddir()`。这里的正确用法是`glob()`，但我看到你不希望这样，你也可以`scandir()`像下面这样使用：

```
<?php
$path = "./";

$files = scandir($path);
shuffle($files);

for($i = 0; ($i < count($files)) && (!is_file($files[$i])); $i++);

echo $files[$i];
?> 
```

`glob()`在您承认我没有“错误”之后，我很乐意确定这是否需要更长的时间或是否需要更长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T21:25:13.957

> 以下 2 种方法`opendir`用于快速读取目录并返回随机文件或目录。

* * *

> *   完成的所有基准测试都使用 CI3 并且是 100 个脉冲的平均值。
>     在带 16GB RAM 的 Win10 Intel i54460 上使用 WAMP

## 获取随机文件：

```
function getRandomFile($path, $type=NULL, $contents=TRUE) {
    if (strpos($path, $_SERVER['DOCUMENT_ROOT']) === FALSE) $path = $_SERVER['DOCUMENT_ROOT'] . '/' . $path;
    if (is_dir($path)) {
        if ($dh = opendir($path)) {
            $arr = [];
            while (false !== ($file = readdir($dh))) {
                //  not a directory
                if (!is_dir("$path/$file") && !preg_match('/^\.{1,2}$/', $file)) {
                    //  fits file type
                    if(is_null($type)) $arr[] = $file;
                    elseif (is_string($type) && preg_match("/\.($type)$/", $file)) $arr[] = $file;
                    elseif (is_array($type)) {
                        $type = implode('|', $type);
                        if (preg_match("/\.($type)$/", $file)) $arr[] = $file;
                    }
                }
            }
            closedir($dh);
            if (!empty($arr)) {
                shuffle($arr);
                $file = $arr[mt_rand(0, count($arr)-1)];
                return empty($contents) ? $file : ($contents == 'path' ? "$path/$file" : file_get_contents($file));
            }
        }
    }
    return NULL;
} 
```

* * *

使用简单：

```
//  Benchmark 0.0018 seconds *
$this->getRandomFile('directoryName');
//  would pull random contents of file from given directory

//  Benchmark 0.0017 seconds *
$this->getRandomFile('directoryName', 'php');
//  |OR|
$this->getRandomFile('directoryName', ['php', 'htm']);
//  one gets a random php file 
//  OR gets random php OR htm file contents

//  Benchmark 0.0018 seconds *
$this->getRandomFile('directoryName', NULL, FALSE);
//  returns random file name

//  Benchmark 0.0019 seconds *
$this->getRandomFile('directoryName', NULL, 'path');
//  returns random full file path 
```

# 获取随机目录：

```
function getRandomDir($path, $full=TRUE, $indexOf=NULL) {
    if (strpos($path, $_SERVER['DOCUMENT_ROOT']) === FALSE) $path = $_SERVER['DOCUMENT_ROOT'] . '/' . $path;
    if (is_dir($path)) {
        if ($dh = opendir($path)) {
            $arr = [];
            while (false !== ($dir = readdir($dh))) {
                if (is_dir("$path/$dir") && !preg_match('/^\.{1,2}$/', $dir)) {
                    if(is_null($indexOf)) $arr[] = $file;
                    if (is_string($indexOf) && strpos($dir, $indexOf) !== FALSE) $arr[] = $dir;
                    elseif (is_array($indexOf)) {
                        $indexOf = implode('|', $indexOf);
                        if (preg_match("/$indexOf/", $dir)) $arr[] = $dir;
                    }
                }
            }
            closedir($dh);
            if (!empty($arr)) {
                shuffle($arr);
                $dir = $arr[mt_rand(0, count($arr)-1)];
                return $full ? "$path/$dir" : $dir;
            }
        }
    }
    return NULL;
} 
```

* * *

使用简单：

```
//  Benchmark 0.0013 seconds *
$this->getRandomDir('parentDirectoryName');
//  returns random full directory path of dirs found in given directory

//  Benchmark 0.0015 seconds *
$this->getRandomDir('parentDirectoryName', FALSE);
//  returns random directory name

//  Benchmark 0.0015 seconds *
$this->getRandomDir('parentDirectoryName', FALSE, 'dirNameContains');
//  returns random directory name 
```

### 在组合中使用，例如：

```
$dir = $this->getRandomDir('dirName');
$file = $this->getRandomFile($dir, 'mp3', FALSE);
//  returns a random mp3 file name. 
//  Could be used to load random song via ajax. 
```

* * *

[`[single line]`](http://www.digitalcoding.com/tools/compress-php-template.html)

```
/** getRandomFile(String)
 *  Simple method for retrieving a random file from a directory
 **/
function getRandomFile($path, $type=NULL, $contents=TRUE) { if (strpos($path, $_SERVER['DOCUMENT_ROOT']) === FALSE) $path = $_SERVER['DOCUMENT_ROOT'] . '/' . $path; if (is_dir($path)) { if ($dh = opendir($path)) { $arr = []; while (false !== ($file = readdir($dh))) { if (!is_dir("$path/$file") && !preg_match('/^\.{1,2}$/', $file)) { if(is_null($type)) $arr[] = $file; elseif (is_string($type) && preg_match("/\.($type)$/", $file)) $arr[] = $file; elseif (is_array($type)) { $type = implode('|', $type); if (preg_match("/\.($type)$/", $file)) $arr[] = $file; } } } closedir($dh); if (!empty($arr)) { shuffle($arr); $file = $arr[mt_rand(0, count($arr)-1)]; return empty($contents) ? $file : ($contents == 'path' ? "$path/$file" : file_get_contents($file)); } } } return NULL; }

/** getRandomDir(String)
 *  Simple method for retrieving a random directory
 **/
function getRandomDir($path, $full=TRUE, $indexOf=NULL) { if (strpos($path, $_SERVER['DOCUMENT_ROOT']) === FALSE) $path = $_SERVER['DOCUMENT_ROOT'] . '/' . $path; if (is_dir($path)) { if ($dh = opendir($path)) { $arr = []; while (false !== ($dir = readdir($dh))) { if (is_dir("$path/$dir") && !preg_match('/^\.{1,2}$/', $dir)) { if(is_null($indexOf)) $arr[] = $file; if (is_string($indexOf) && strpos($dir, $indexOf) !== FALSE) $arr[] = $dir; elseif (is_array($indexOf)) { $indexOf = implode('|', $indexOf); if (preg_match("/$indexOf/", $dir)) $arr[] = $dir; } } } closedir($dh); if (!empty($arr)) { shuffle($arr); $dir = $arr[mt_rand(0, count($arr)-1)]; return $full ? "$path/$dir" : $dir; } } } return NULL; }

/*  This is only here to make copying easier.   */ 
```

* * *

> 只是关于`glob`&&的注释`scandir`。我制作了使用 each
> 的替代版本。使用在基准测试中几乎没有差异（从 -.001 到 +.003）使用非常明显慢！每次通话的差异从 +.5 到 +1.100 不等。`getRandomDir`
> `scandir`
> `glob`

# ios - iOS模拟器显示尺寸配置？

> ID：12119311
> 
> 赞同：1
> 
> 时间：2012-08-25T05:03:35.140
> 
> 标签：ios, simulator

iOS 模拟器在启动运行应用程序时使用的显示大小（iOS 主窗口高度和宽度，以 iOS 点为单位）是否有设置或配置选项？（当前默认的 480 和 1024 号码除外）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:52:26.827

除了“硬件”>“设备”菜单中提供的四种屏幕尺寸（iPad、iPad Retina、iPhone、iPhone Retina）之外，没有官方支持的方式来选择屏幕尺寸。

[Cédric Luthi 发布了一种](http://0xced.blogspot.com/2012/08/prepare-your-apps-for-new-iphone.html)使模拟器使用 640x1136 大小的视网膜屏幕的方法。我不知道他的 hack 是否可以用于在其他分辨率下运行。

# php - 有没有办法通过在 SQL 中执行 DELETE 指令来返回一些东西？

> ID：12119312
> 
> 赞同：3
> 
> 时间：2012-08-25T05:04:12.920
> 
> 标签：php, mysql, sql, sql-delete

基本上，我有两个`DELETE`由 PHP 脚本处理的 SQL 查询。但是，我希望仅当第一个查询成功删除指定表中的一行时才执行第二个查询。那么，在执行第一个查询之后，
无论如何要让函数返回 true 或 false 或其他东西吗？`mysql_query()`

如果没有办法这样做，那么我已经想出了一个方法来达到我想要的结果。但是，能够以这种方式做到这一点会更简单，并且就我的代码逻辑而言更有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:06:55.977

你可以做：

```
delete ....
select row_count() 
```

这将为您提供删除的行数（如果没有，则为 0）。欲了解更多信息：[http ://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:25:17.447

我认为您正在寻找更正式的东西，例如与 mySQL 的事务。

[堆栈](https://stackoverflow.com/a/2708247/892792)上有一篇关于这种情况的有用帖子。

# android - 如何更改Android中循环进度的颜色和图案？

> ID：12119313
> 
> 赞同：1
> 
> 时间：2012-08-25T05:04:44.697
> 
> 标签：android, android-layout, android-progressbar

我使用下面的代码来生成循环进度。但我不知道如何改变它的图案和颜色。

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:pivotX="10%" android:pivotY="10%" android:fromDegrees="0"
    android:toDegrees="360">
    <shape android:shape="ring" android:innerRadiusRatio="0"
        android:thicknessRatio="6" android:useLevel="false">

        <size android:width="10dip" android:height="10dip" />
        <gradient android:type="linear" android:useLevel="false"
            android:startColor="#000000" 
            android:endColor="#000000"
            android:angle="0"
             />
    </shape>
</rotate> 
```

它产生了如下的循环进度：

![在此处输入图像描述](../Images/16faaffbd9ac799459acca17dee26003.png)

但我需要改变颜色和图案，如下所示：

![在此处输入图像描述](../Images/130459b8b1239cd3dc8c4f370664caa8.png)

我不想实现音乐图标。我只希望进度模式和颜色看起来像第二张图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:20:56.277

您需要使用[AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)类来满足您的要求，

在 res/drawable/ 文件夹中创建 spin_animation.xml 文件：

```
<!-- Animation frames are wheel0.png -- wheel5.png files inside the
 res/drawable/ folder -->
 <animation-list android:id="@+id/selected" android:oneshot="false">
    <item android:drawable="@drawable/wheel0" android:duration="50" />
    <item android:drawable="@drawable/wheel1" android:duration="50" />
    <item android:drawable="@drawable/wheel2" android:duration="50" />
    <item android:drawable="@drawable/wheel3" android:duration="50" />
    <item android:drawable="@drawable/wheel4" android:duration="50" />
    <item android:drawable="@drawable/wheel5" android:duration="50" />
 </animation-list> 
```

使用以下代码执行，

```
 // Load the ImageView that will host the animation and
 // set its background to our AnimationDrawable XML resource.
 ImageView img = (ImageView)findViewById(R.id.spinning_wheel_image);
 img.setBackgroundResource(R.drawable.spin_animation);

 // Get the background, which has been compiled to an AnimationDrawable object.
 AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

 // Start the animation (looped playback by default).
 frameAnimation.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:11:30.153

您可以做的是创建具有所需形状和颜色的图像，然后旋转它。[`Here`](http://www.hrupin.com/2011/09/how-to-make-custom-indeterminate-progressbar-in-android-or-how-to-change-progressbar-style-or-color)是一个例子，展示了如何做到这一点。

# intellij-idea - 代码完整列表中的 Intellij 实时模板

> ID：12119323
> 
> 赞同：17
> 
> 时间：2012-08-25T05:06:35.850
> 
> 标签：intellij-idea

如果您熟悉 Visual Studio，您可以从自动完成列表中选择代码片段。这在 IntelliJ 中可能吗

例如，如果我输入

```
for 
```

它会在代码完整下拉列表中显示“for”和实时模板“fori”

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-25T08:37:47.713

原来它是可能的（除非我错过了什么）通过注册表编辑器：

![注册表屏幕截图](../Images/d5b0d3d80c8f3b76a65a6a126f2dd3fa.png)

有关如何访问此编辑器的信息，请参阅[此答案。](https://stackoverflow.com/a/11829639/579828)

# php - 使用 Array Walk 更改数组

> ID：12119325
> 
> 赞同：0
> 
> 时间：2012-08-25T05:06:48.087
> 
> 标签：php, arrays

我有一个要更改的数组。我认为 array_walk 将是要走的路，但我无法弄清楚如何从中收集数据`array_walk`、从旧数组中删除数据以及插入新数据。我该怎么做呢？这是代码。

```
$width_array = array(

"2.5%",

"2.6%",

"2.7%",

"2.8%",

);

function adjust_the_width($value) 

{

$value = $value * 2;

}

array_walk($width_array, "adjust_the_width"); 
```

$random_width = array_rand($width_array, 10);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:26:05.580

您可能会在哪里寻找 array_map，示例如下：

```
<?
$width_array = array(
    "2.5%",
    "2.6%",
    "2.7%",
    "2.8%",
);

function adjust_the_width($value) {
    return $value * 2;
}

$width_array = array_map("adjust_the_width", $width_array);
$random_width = array_rand($width_array, count($width_array));

var_dump($width_array); 
```

注意：百分比从计算中删除，因为 PHP 在乘以 2 时将字符串“2.5%”解释为浮点值。

此外，array_map 将每个元素作为参数提供给所提供的函数，并使用它的返回值填充 array_map 构建的新数组中的相同位置。

这也是我赋值的原因`$width_array = array_map(...`，array_map 构建了一个新数组，默认不会替换旧数组。

如果您不想构建中间数组，也可以这样做：

```
foreach($width_array as &$width) {
    $width = $width * 2;
}

var_dump($width_array); 
```

这会遍历数组并将每个元素修改为对其位置的引用（这就是 &$width 的含义）。

如果没有 '&'，这个 foreach 循环只会咀嚼 cpu 循环。

# java - 将 JLabel 放置在 JPanel 上的特定 x,y 坐标处

> ID：12119327
> 
> 赞同：11
> 
> 时间：2012-08-25T05:07:02.730
> 
> 标签：java, swing, layout, jcomponent, null-layout-manager

我试图在 JPanel 上的特定 X 和 Y 坐标处放置一系列 JLabel（并设置它的高度和宽度）。无论我做什么，每个标签都会立即在前一个标签的右侧结束，并且与所有其他标签的大小完全相同。

现在，我的 Jpanel 处于网格布局中。我尝试过 Absolute Layout（非法参数异常结果）、Free Design（没有标签出现）、Flow Layout（一切都被挤压到中心）和其他一些。

不知道我需要做什么才能完成这项工作。任何人都可以帮忙吗？谢谢！

```
JLabel lbl1 = new JLabel("label 1");
JLabel lbl2 = new JLabel("label 2");
JLabel lbl3 = new JLabel("label 3");
JLabel lbl4 = new JLabel("label 4");
JLabel lbl5 = new JLabel("label 5");

myPanel.add(lbl1);
myPanel.add(lbl2);
myPanel.add(lbl3);
myPanel.add(lbl4);
myPanel.add(lbl5);

lbl1.setLocation(27, 20);
lbl2.setLocation(123, 20);
lbl3.setLocation(273, 20);
lbl4.setLocation(363, 20);
lbl5.setLocation(453, 20);

lbl1.setSize(86, 14);
lbl2.setSize(140, 14);
lbl3.setSize(80, 14);
lbl4.setSize(80, 14);
lbl5.setSize(130, 14); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T05:27:00.727

您必须将容器的 Layout 设置为 null：

```
myPanel.setLayout(null); 
```

但是，最好还是看看 Matisse Layout Manager，我猜它现在被称为 GroupLayout。绝对定位的主要问题是当窗口改变其大小时会发生什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T05:15:49.363

1.  通过调用将容器的布局管理器设置为空`setLayout(null)`。

2.  为容器的每个子级调用 Component 类的`setbounds`方法。

3.  调用 Component 类的重绘方法。

笔记：

如果调整包含容器的窗口大小，创建具有绝对定位容器的容器可能会导致问题。

参考这个链接： [http ://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T05:15:07.187

布局管理器用于自动确定容器中组件的布局。如果您想将组件放置在特定的坐标位置，那么您根本不应该使用布局管理器。

```
myPanel = new JPanel(null); 
```

*或者*

```
myPanel.setLayout(null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T05:19:38.847

我的建议是使用带有 GUI 编辑器的[NetBeans之类的 IDE。](http://netbeans.org)检查代码，因为有很多方法：

设置布局管理器，或为绝对定位执行 myPanel.setLayout(null)，有几个影响。

通常，假设您在 JFrame 的构造函数中进行调用，则可以调用`pack()`以开始布局。

然后，每个布局管理器都使用自己的`add(Component)`or实现`add(Component, Constraint)`。BorderLayout 的用法是与 add(label, BorderLayout.CENTER) 等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-10T03:46:27.097

```
 // Best solution!!

import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Main {

  public static void main(String args[]) {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel panel = (JPanel) frame.getContentPane();
    panel.setLayout(null);

    JLabel label = new JLabel("aaa");
    panel.add(label);
    Dimension size = label.getPreferredSize();
    label.setBounds(100, 100, size.width, size.height);

    frame.setSize(300, 200);
    frame.setVisible(true);

  }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-06-11T18:54:31.017

您可以使用自己的方法，通过 setSize、setLocation 值直接调用......！` 我还向您展示了如何使用 JProgress Bar

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class installComp{
    void install(Component comp, int w, int h, int x, int y){
        comp.setSize(w,h);
        comp.setLocation(x,y);
    }
}
class MyFrame extends JFrame{
    int cur_val = 0;
    JButton btn = new JButton("Mouse Over");
    JProgressBar progress = new JProgressBar(0,100);
    MyFrame (){
        installComp comp=new installComp();

        comp.install(btn,150,30,175,20);
        comp.install(progress,400,20,50,70);

        btn.addMouseListener(new MouseAdapter(){
            public void mouseEntered(MouseEvent evt){
                cur_val+=2;
                progress.setValue(cur_val);
                progress.setStringPainted(true);
                progress.setString(null);
            }
        }); 
        add(btn);
        add(progress);
        setLayout(null);    
        setSize(500,150); 
        setResizable(false);
        setDefaultCloseOperation(3);
        setLocationRelativeTo(null);
        setVisible(true);
    }
}
class Demo{
    public static void main(String args[]){
        MyFrame f1=new MyFrame();   
    }
} 
```

# linux - linux mint 上的 sublime text 2

> ID：12119330
> 
> 赞同：0
> 
> 时间：2012-08-25T05:07:23.767
> 
> 标签：linux, sublimetext2

我已经开始在 linux mint 上使用 sublime text 2。它安装在

~/.config/sublime-text-2/

此目录中有一个 Packages 文件夹。我下载了 Package Control 的 zip 文件并在 Packages 目录中解压缩。现在我可以使用 install 命令安装新包。但我不知道这些软件包安装在哪里。我无法使用新安装的软件包。我也没有在 ~/.config/sublime-text-2/Packages 下看到它们。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:42:22.223

我也在使用 Linux Mint，可以告诉你它将所有内容都存储在 ~/.Sublime Text 2 中。

[此外，我会使用复制粘贴Package Control](http://wbond.net/sublime_packages/package_control/installation)网站上的代码片段来启动和运行 Package Control。我从来没有尝试过你描述的安装包控制的方法，因为复制粘贴方法一直对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:52:33.543

确切地说，Package Control 文件夹下的`~/.config/sublime-text-2/Packages`.

如果您是 root，它将是`/.config/sublime-text-2/Packages`，但是当您是用户时，它将是`/home/[user_name]/.config/sublime-text-2/Packages`.

因此，通过其他方式：

1.  打开你的 Sublime

2.  打开`Preferences > Package Settings > Package Control > Settings - User`

3.  并查看 Sublime 标题中的路径或`Ctrl + O`

# regex - javascript正则表达式提取中间部分

> ID：12119332
> 
> 赞同：0
> 
> 时间：2012-08-25T05:07:46.193
> 
> 标签：regex

我有一个看起来像这样的字符串：（`"http://www.example.com/hello/world/ab/c/d.html"`或这个`"http://www.example.com/hello/world/ab/d.html"`：）

我想提取 和 之间的`http://www.example.com/hello/world/`内容`d.html`。通用正则表达式应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:23:00.493

你可能想要

```
/^http:\/\/[^\/]*\/[^\/]*\/[^\/]*\/(.*)\/[^\/]*$/ 
```

这个（看起来很复杂）表达式跳过了域和前两个路径分量，然后提取了最终路径分量之前的所有位。

例子：

```
>>> 'http://www.google.com/hello/world/ab/c/d.html'.match(/^http:\/\/[^\/]*\/[^\/]*\/[^\/]*\/(.*)\/[^\/]*$/)
["http://www.google.com/hello/world/ab/c/d.html", "ab/c"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:16:04.453

您正在寻找的正则表达式是：/^http\://www.google.com/hello/world/(.*/)d.htm$/

[http://jsfiddle.net/rDvJK/](http://jsfiddle.net/rDvJK/)

```
function getIt(fromWhat) {
    var matches = fromWhat.match(/^http\:\/\/www\.google\.com\/hello\/world\/(.*\/)d.htm$/);
    console.log(matches);
    return matches[1];
}
getIt("http://www.google.com/hello/world/ab/c/d.htm"); 
```

# c++ - Visual Studio 2010 无法启动程序 .dll

> ID：12119333
> 
> 赞同：17
> 
> 时间：2012-08-25T05:07:49.937
> 
> 标签：c++, visual-studio-2010, debugging, dll

我的 Visual Studio 2010 有问题。当我单击开始调试按钮并开始调试时。

似乎没有错误“我只是在上面创建一个”按钮“

但它会显示`Unable to start program 'c:\users\.....\xx.dll'`

有人现在如何解决它？

第二个问题是：当我单击左键查看“按钮”源代码时，为什么会显示所有这些项目代码？我应该修改一些设置吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-25T05:16:38.667

Visual Studio 不会自行运行 .dll。您的解决方案是否有 .exe 项目？如果是这样，右键单击它并选择“设置为启动项目”。如果没有，您将需要创建一个，并指示它在您的 dll 中加载表单。

至于左键单击按钮，我不太确定您在描述什么。你能发张照片吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-18T09:38:23.220

在早期版本的 MSVC 中运行 .dll 时，会出现一个对话框，询问 .exe 文件的路径

但在 MSVC 2010 及更高版本中没有这样的选项。要解决这个问题

> 1.  右键单击您的 dll 项目
> 2.  特性
> 3.  配置属性 > 调试。在这里，在 Command -> 添加路径到您的 exe。

添加命令参数（如果有）。

你已准备好出发！

# symlink - vxworks 支持符号链接吗？

> ID：12119336
> 
> 赞同：3
> 
> 时间：2012-08-25T05:08:17.457
> 
> 标签：symlink, vxworks

Vxworks 不支持 symlink()。
有没有其他方法可以在 Vxworks 中创建符号链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:12:17.133

大多数 VxWorks 文件系统甚至不支持符号链接，因此 VxWorks 不提供任何创建它们的方法。如果你有一个支持符号链接的文件系统（并且已经包含一些），那么 VxWorks 可以读取并跟踪这些链接。

# asp.net - GridView1.HeaderRow.Cells[4].Text 和 GridView1.Columns[4].HeaderText 有什么区别？

> ID：12119338
> 
> 赞同：3
> 
> 时间：2012-08-25T05:08:34.280
> 
> 标签：asp.net, gridview, headertext

我在 aspx 页面上放置了占位符服务器控件。

在后面的代码中创建一个 Grid-view 实例。

为其设置数据源

现在我想改变它的标题文本。所以首先我尝试如下：

```
GridView1.Columns[4].HeaderText = "ABC"; 
```

标题文本未更改。

然后我尝试了：

```
GridView1.HeaderRow.Cells[4].Text="ABC"; 
```

标题文本现在已更改。

将 GridView 控件添加到 PlaceHolder 服务器控件：

```
plhGridView.Controls.Add(GridView1); 
```

我想知道为什么我第一次尝试时标题文本没有改变？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:24:52.987

如果您想尝试第一次代码。您必须`GridView1.AllowSorting="true";`为 GridView 设置和编写 OnSorting 事件。

```
GridView1.Columns[4].HeaderText = "ABC"; 
```

如果你想要的是：

```
GridView1.HeaderRow.Cells[4].Text="ABC"; 
```

这将保持**排序**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:29:41.850

可能是您没有在以前的代码中将列与您的行绑定

```
GridView1.Columns[4].HeaderText = "ABC"; 
```

您可以使用 RowDataBound 处理程序从以前的代码中执行此操作，有关详细信息，请使用以下链接：

[ASP.NET：何时以及如何在代码后面动态更改 Gridview 的 headerText？](https://stackoverflow.com/questions/6300963/asp-net-when-and-how-to-dynamically-change-gridviews-headertexts-in-code-behi)

# android - 如何创建支持和运行完美的所有屏幕尺寸的移动设备和平板电脑的 android 应用程序？

> ID：12119344
> 
> 赞同：-1
> 
> 时间：2012-08-25T05:09:37.600
> 
> 标签：android, icons, android-screen-support

在这里，我开发了一个应用程序，它的菜单屏幕上有 8 个图标，根据大小我有两组图标。1套图标大小为197 * 253 2套图标大小为184 * 236

当我在平板电脑上运行这个应用程序时看起来很不错，但是当我在手机上运行这个应用程序时它看起来很奇怪，看起来不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:34:40.417

您需要为支持多个屏幕创建不同的布局文件夹。

> 布局-小
> 布局-正常
> 布局-大

最好参考[android 中的多屏幕支持。](http://developer.android.com/guide/practices/screens_support.html)

# php - Javascript代码中的PHP函数调用和数组传递

> ID：12119347
> 
> 赞同：0
> 
> 时间：2012-08-25T05:10:29.693
> 
> 标签：php, javascript, call

请帮忙..

我有一个动态表格，其中没有。元素的数量不固定，我需要在表单上执行 JS 验证。我有一个 PHP 函数，它将返回一个包含当前以表单显示的所有元素的数组。我想在 JS 代码中使用它..

我正在尝试一些 lyk dis::

```
function checkValidation() {

  <?php echo  
    // php function call
    $arrColumnsInfo = $this->fetch_fields_info();
    print('<pre>');
    print_r($arrColumnsInfo);
    print('</pre>');
  ?>
} 
```

不适合我..抛出JS错误..或者这个..

```
function checkValidation() {
  <?php=
    // php function call 
    $arrColumnsInfo = $this->fetch_fields_info();?>
    alert(<?=$arrColumnsInfo?>);
} 
```

再次..不起作用..

我的 PHP 数组输出：

```
Array
(
[client_code] => Client Code::1::Basic company Info::desc::TB
[entity_name] => Entity Name::1::Basic company Info::::TB
[type_of_entity] => Type of entity::1::Basic company Info::Type of entity,Sole trader,Partnership,Australian Private Company, other::DD
[fixed_fees] => fixed fees::8::Fees Related::yes,no::RD
[billing_time] => Billing time::8::Fees Related::Weekly,Fortnightly,Monthly,Yearly::DD
) 
```

这里使用的关键是表单元素的名称.. 例如。我正在构建我的表单 lyk dis..

```
<input type="text" name="client_code" value="">... 
```

依此类推......所有表单元素都是以同样的方式动态创建的。现在我想验证这个表单，所以我再次需要这个数组在 javascript 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:28:57.597

您可以使用[json_encode](http://de.php.net/manual/en/function.json-encode.php)将您的 PHP 数组转换为 JavaScript 可以使用的 from。

```
function checkValidation() {
  var data = <?php echo json_encode($this->fetch_fields_info()) ?>;
  // ... run your client-side checks
  alert(data);
} 
```

请记住，您始终必须提供有效的 JavaScript 代码。如果您坚持使用内联 PHP 编写 JavaScript 代码，这有时会非常棘手。

您至少应该考虑在服务器端（在 PHP 中）进行验证，并且只将结果传递给您的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:17:25.870

您的 php 代码必须生成如下结果：

```
var arr = <?php echo $arr; // result: [1,2,3,4,5,6,7] ?> 
```

或 JavaScript 中支持的其他`array()`格式..

这只是一个例子。

看看给出的链接：[Javascript中的数组](http://www.hunlock.com/blogs/Mastering_Javascript_Arrays) 这个链接告诉你使用数组需要什么格式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-25T05:19:20.953

数据不足以帮助您@disha。请提供更多并编辑它。在你的第一行php中这个'='是什么？提供一些可以真正帮助您的更多细节。快乐编码！

# html - 可点击的图片页脚，html

> ID：12119354
> 
> 赞同：0
> 
> 时间：2012-08-25T05:12:08.110
> 
> 标签：html, css, image, footer

我有一个 2000*300px 的图像，打算用作页脚。中间有四个部分，每个部分都需要可点击——它们应该是链接。我现在正在使用图像映射。

我在网站底部有一个页脚。它的宽度为 100%，高度为 300px。我需要做的是将图像居中放在 div 的中间，隐藏任何溢出。它必须保持可点击 - 这就是为什么我不能只调整图像大小。

所以！

*   如何在页脚 div 中将元素居中并隐藏溢出？
*   或者，如何动态调整页脚图像的大小但仍然可以点击？
*   或者，我怎样才能实现相同的效果 - 一个带有可点击部分作为页脚的连续出现的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:23:53.390

如果允许图像在侧面被切断是可以的，那么您可以通过在 CSS 中将图像位置设置为居中来使图像居中。

```
.footer {background: transparent url(path/to/image) no-repeat bottom center;} 
```

要获得其他可点击元素，只需在页脚 div 中嵌套新的 div 或段落或链接。

它看起来像这样。

```
<div class="footer">
    <a>Clickable Content</a>
    <a>Clickable Content</a>
    <a>Clickable Content</a>
    <a>Clickable Content</a>
</div> 
```

然后你可以为每一个设置高度和宽度。然后设置链接。或者使用 div 并在其中设置链接。

```
.footer a {height: 300px; width: 25%;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:56:52.937

你可以试试这个：

***CSS 代码***

```
 .footer {background: transparent url(path/to/image) no-repeat bottom center;} 
```

*代码*

```
 <div class="footer">
        <a>Clickable Content</a>
        <a>Clickable Content</a>
        <a>Clickable Content</a>
        <a>Clickable Content</a>
    </div> 
```

也可以使用这个：

```
 .footer a {height: 300px; width: 25%;} 
```

# .net - 我知道未来的 WeekOfDay 和 Hour。如何在 .Net 中获取 DateTime 对象？

> ID：12119355
> 
> 赞同：2
> 
> 时间：2012-08-25T05:12:13.450
> 
> 标签：.net, datetime

我有来自用户输入的 timezoneid、DayOfWeek(Sunday. Monday..) 和 Hour(int)。

如何在 .net 中获取最近的未来 DateTime 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:33:09.853

代码未经测试，但你会明白：

```
DayOfWeek _userDOW = DayOfWeek.Sunday;
int _userHOUR = 7;
DateTime _dt = new DateTime.Now;
while (_dt.DayOfWeek != _userDOW) {
    _dt = _dt.AddDays(1);
}

// remove hours, mins and secs
_dt = new DateTime(_dt.Year, _dt.Minute, _dt.Second);

// add user hour
_dt = _dt.AddHours(_userHOUR); 
```

# android - 如何在 xml dom 解析器中获取节点列表的值？

> ID：12119356
> 
> 赞同：1
> 
> 时间：2012-08-25T05:12:15.673
> 
> 标签：android, xml, xml-parsing, xmlnodelist

我有一个看起来像这样的 XML::

```
<Channels>
       <Channel Id="511" Title="Test" ChannelDescription="This is Test Channel./>
</Channels> 
```

我成功解析了这种 XML。我的问题是，当我触发 web 服务时，如果没有来自服务器的身份验证，那么 web 服务响应如下：

```
<AuthenticationError>An Active Session Already Exists For This User.</AuthenticationError> 
```

那么我如何检查根节点是“身份验证错误”或“注释”。如果我得到身份验证错误标签，那么我怎样才能得到它的节点值，即“此用户的活动会话已经存在。”？？

XML 解析的代码是这样的::

```
NodeList node =null;
node= (NodeList)result.getElementsByTagName("Channels");

for(int j=0;j<node.getLength();j++)
{                             
Node aNode=node.item(j);  
Element fstElmnt = (Element) aNode;

NodeList websiteList = fstElmnt.getElementsByTagName("Channel");
int check=websiteList.getLength();

for(int k=0;k<check;k++)
{
    DatabaseConstant myChannels = new DatabaseConstant();
    Node checkNode=websiteList.item(k);

    Element websiteElement = (Element) checkNode;                                                                               
    myChannels.id=websiteElement.getAttribute("Id");
    myChannels.title=websiteElement.getAttribute("Title");

    channel .add(myChannels);
    }
}
} 
```

我希望我的问题很清楚......请尽快提供解决方案。提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:43:46.907

用于`getDocumentElement()`获取 root `Element`，然后用于`getTagName()`获取标签名称。

例子：

```
 Element root = result.getDocumentElement();
    String name = root.getTagName();

    if(name.equalsIgnoreCase("AuthenticationError") )
    {
        String value = myDocument.getDocumentElement().getTextContent();
        System.out.println("Error:" + value);
    }
    else if(name.equalsIgnoreCase("Notes") )
    {
       NodeList nodes = root.getElementsByTagName("Channels");

       for(int i = 0 ; i < nodes.getLength() ; i ++)
       {
           //-----do something with channels nodes--
       }
    } 
```

# django - 如何将请求从一台 django 服务器发送到另一台服务器

> ID：12119363
> 
> 赞同：4
> 
> 时间：2012-08-25T05:14:17.007
> 
> 标签：django

我有一个 django 问题。我想将来自浏览器或我的 django 服务器上的业务逻辑的数据发送到另一个 django 服务器或只是相同的服务器但不同的端口，以处理请求。我能怎么做？我曾尝试使用套接字来实现，但似乎没有用。

```
以下是我的代码：
接受客户的请求：
def im（请求）：
    userp = 无
    尝试：
        userp = UserProfile.objects.get(user = request.user)
    除了：
        经过
    如果不是用户：
        返回 HttpResponse("错误")
    打印'111'
    如果 request.method == "GET":
        导入json
        msg = json.loads(request.GET.get('msg'))
        尝试：
            msg['from_id'] = userp.id
            if msg.get('type', '') == 'sync': #页面同步消息
                msg['to_id'] = userp.id
            push_msg(味精)
            返回 HttpResponse("成功")
        除了：
            返回 HttpResponse("错误")
        #return HttpResponseRedirect("http://127.0.0.1:9000/on_message")
    返回 HttpResponse("错误")

helper.py:push_msg:
def push_msg（味精）：
    打印'111'
    参数 = str(msg)
    headers = {"Content-type":"application/x-www-form-urlencoded", "Accept":"text/plain"}
    conn = httplib.HTTPConnection("http://127.0.0.1:9000/push_msg/")
    conn.request("POST", "/cgi-bin/query", params, headers)

url(r'^push_msg/$', 'chat.events.on_message')
events.py:on_message
def on_message（请求）：
    msg = request.POST.get('msg')
    味精=评估（味精）
    尝试：
        打印'处理消息'
        from_id = int(msg['from_id'])
        to_id = int(msg['to_id'])
        user_to = UserProfile.objects.get(id = msg['to_id'])
        django_socketio.broadcast_channel(msg, user_to.channel)
        如果 msg.get('type', '') == 'chat':
            ct = Chat.objects.send_msg(from_id=from_id,to_id=to_id,content=data['content'],type=1)
            ct.read = 1
            ct.save()
    除了：
        经过

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:55:31.923

使用 python requests 模块来做这个请求比 httplib2 有更多的功能，而且很容易使用[http://docs.python-requests.org/](http://docs.python-requests.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:28:09.000

我已经使用 httplib2 来完成类似的事情。从[httplib2](http://bitworking.org/projects/httplib2/doc/html/libhttplib2.html)文档尝试：

```
import httplib2
import urllib
data = {'name': 'fred', 'address': '123 shady lane'}
body = urllib.urlencode(data)
h = httplib2.Http()
resp, content = h.request("http://example.com", method="POST", body=body) 
```

然后，您应该能够在您的第二个 django 服务器中处理**POST**，并将适当的结果返回给第一个 django 服务器。

# sql - SQL：在 VB.net 中从按属性 2 分组的结果中查找属性 1 的最大值

> ID：12119364
> 
> 赞同：0
> 
> 时间：2012-08-25T05:14:17.853
> 
> 标签：sql, database, vb.net, sqlite

我正在尝试按 sqlite 数据库的属性 2 [pos] 分组，然后获取属性 1 [tagcount] 的最大值。这在 cygwin 上的 sqlite3 中运行良好。

```
 sqlite> 
     select max(tagcount),pos 
     from (
          select tagcount,pos 
          from sense,synset 
          where sense.synsetid=synset.synsetid 
            and wordid in(
                      select wordid 
                      from word 
                      where lemma="run"
                         )
           ) 
      group by pos 
      order by tagcount DESC; 
```

导致以下输出

> 106|v
> 
> 18|n

但是当我在 VB.net 中复制确切的查询时，它给了我以下错误

> 您尝试执行的查询不包含特定表达式“tagcount”作为聚合函数的一部分

应该在查询中进行哪些更改，以便 VB.net 不会抱怨它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:21:11.750

它可能是您的 order by，因为它不是汇总值，也不包含在您的 group by 中。

# html - 有什么方法可以在 iframe 中从另一个网站读取元素？

> ID：12119366
> 
> 赞同：0
> 
> 时间：2012-08-25T05:14:47.063
> 
> 标签：html, iframe, element, postmessage

我正在玩一些东西，并试图辨别在使用跨域 iframe(post_message) 时是否可以读取 iframe 中的元素：div-tag p-tag 等站点？我还没有看到任何其他关于此的帖子，所以希望有人可以提供一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:09:12.280

`postMessage`允许您与合作的 iframe 进行通信。要使用它，一个窗口必须发送一条消息，`postMessage`而另一个窗口必须有一个事件侦听器来侦听该消息，并且它必须处理该消息并执行您想做的任何事情。

因此，可以使用`postMessage`从 iframe 中检索内容，甚至是跨域 iframe，但它要求 iframe 中有可以接收消息的代码，了解所要求的内容并`postMessage`返回原始内容带有所请求信息的框架。

因此，这意味着如果您同时控制窗口和 iframe javascript，您可以按照您的要求进行操作，但如果您不控制两者之一，并且它们还没有正确的 javascript 代码来获取数据你想要，那么你就无法完成工作`postMessage`。它所做的只是传递消息。处理这些消息的代码必须由该特定网页的所有者放置在那里。

# json - jqGrid 不显示有效的 json

> ID：12119372
> 
> 赞同：0
> 
> 时间：2012-08-25T05:15:46.267
> 
> 标签：json, jqgrid, jsonp

在阅读了大部分问题并试图找到答案之后，我想我放弃了。

所以我遇到的问题就像其他人遇到的一样，即 jqGrid 不显示从 spring mvc servlet 接收到的有效 json。

这是我的json：

```
{
    "firstRecordIndex": 0,
    "pageSize": 20,
    "sortDirection": {
        "name": "descending",
        "code": 1
    },
    "sortCriterion": "id",
    "pageNumber": 1,
    "objectsPerPage": 20,
    "fullListSize": 1,
    "searchId": null,
    "totalPages": 1,
    "index": 0,
    "list": [
        {
            "issueNumber": "ABC-6799",
            "entryDate": 1345763592879,
            "billingType": "Non-Billable",
            "notes": "Hello",
            "customer": "XYZ",
            "id": 1,
            "hours": 5,
            "userName": "John Doe"
         }
    ]
} 
```

这是我的 jqGrid：

```
jQuery(function(){ 
  jQuery("#list").jqGrid({
    url:"http://localhost:8080/worktime/timesheet.html?type=list&ajax=true",
    datatype: "json",
    colNames:["User", "Hours", "Date", "Billing Type", "Notes"],
    colModel :[ 
      {name:"userName", width:90, editable:false, jsonmap:"userName", editoptions:{readonly:true,size:10}},
      {name:"hours",  width:55, editable:true, jsonmap:"hours", editoptions:{size:10}}, 
      {name:"entryDate", width:90, editable:true, jsonmap:"entryDate", formatter:"date", "formatoptions":{"srcformat":"m/d/Y", "newformat":"m/d/Y"}, 
          editoptions:{size:12, dataInit:function(el){jQuery(el).datepicker({dateFormat:"m/d/y"});},defaultValue: "m/d/y"}
      },
      {name:"billingType", width:100, editable:true, jsonmap:"billingType", edittype:"select", editoptions:{value:"INV:Billable-Invoice;TSA:Billable-TSA;NON:Non-Billable;OH:Overhead"}},
      {name:"notes", width:150, sortable:false, editable: true, jsonmap:"notes", edittype:"textarea", editoptions:{rows:"2",cols:"20"}} 
    ],
    pager: "#pager",
    rowNum:10,
    rowList:[10,20,30],
    sortname: "entryDate",
    sortorder: "asc",
    jsonReader: {
    root: "list",
    total: "totalPages",
    page: "pageNumber",
    records: "fullListSize",
    repeatitems: false,
    id: "0"
    },
    caption: "Timesheet History",
    viewrecords: true,
    gridview: true,
  }); 
```

什么是正确的 jqGrid 配置？我正在使用 jqGrid 4.4.0 和 jQuery 1.7.2。非常感谢您的帮助。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:16:02.210

为什么你有这个：`id: "0"`？

你`jsonReader`可能应该是：

```
jsonReader: {
  root: "list",
  total: "totalPages",
  page: "pageNumber",
  records: "fullListSize",
  repeatitems: false,
  id: "id"
} 
```

# android - 在 Android 上添加新联系人没有活动来处理意图错误

> ID：12119376
> 
> 赞同：1
> 
> 时间：2012-08-25T05:16:49.213
> 
> 标签：android

我正在尝试向 android 添加新联系人并收到此 ActivityNotFoundException: No Activity to handle intent。我很确定我需要使用意图过滤器来解决这个问题，但不知道如何。

```
Intent addContactIntent = new Intent(ContactsContract.Intents.SHOW_OR_CREATE_CONTACT);
addContactIntent.setType(ContactsContract.Contacts.CONTENT_ITEM_TYPE);
addContactIntent.putExtra(ContactsContract.Intents.Insert.NAME, "My Name");
addContactIntent.putExtra(ContactsContract.Intents.Insert.PHONE, "123456789");
startActivity(addContactIntent); 
```

这是我的清单文件：

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:mimeType="application/com.example.android.beam"></data>
    </intent-filter>
    <intent-filter>
        <action android:name="com.android.contacts.action.SHOW_OR_CREATE_CONTACT" />
        <data android:scheme="mailto" />
        <data android:scheme="tel" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:20:29.353

尝试将这些更改为

```
Intent intent = new Intent(Intent.ACTION_INSERT);
intent.setType(ContactsContract.Contacts.CONTENT_TYPE); 
```

// 您可以发送两个信息示例，以便为 // 用户预先填写数据。请参阅 android.provider.ContactsContract.Intents.Insert 以获取完整的 // 列表。

```
intent.putExtra(ContactsContract.Intents.Insert.NAME, "some Contact Name");
intent.putExtra(ContactsContract.Intents.Insert.PHONE, "some Phone Number"); 
```

您还必须添加此权限

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

# sql-server - 用不同的值更新一列的存储过程

> ID：12119379
> 
> 赞同：0
> 
> 时间：2012-08-25T05:17:12.203
> 
> 标签：sql-server, stored-procedures, time-and-attendance

我在创建将基于 和 更新行的存储过程时遇到`employeeno`了`checktime`困难`id`。

这是我的桌子：

![在此处输入图像描述](../Images/7411effc0fcd6266166d62a20d66f5f6.png)

我正在创建一个员工考勤系统。基本上，我们有生物识别指纹扫描设备来跟踪时间并将其存储到数据库中，但该设备无法存储时间作为结账它只能签入，如`CheckType`列中所示。

现在我想做的是将`Checktype`列从更改`I`为`O`

例子 ：

如果员工 465-04-01 早上 7 点 46 分登录应该被记录为`I`，当同一员工在同一天早上 7 点 47 分再次尝试登录时，应该记录为`O`现在，`employeeno, id`即应该包括自动编号因为它将是更新记录的基础。

如果员工在同一天下午 4 点登录，则应将其记录为`I`下一次登录应`O`在同一天。

你能帮我么？我需要一个存储过程来执行此操作，因为我对此没有足够的经验..请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:06:39.643

每次员工登录时检查当前时间之前的 CHECKTIME

在 SP 中使用这种类型的查询

```
 IF((SELECT(SELECT * FROM TBL_NAME
    WHERE CHECKTIME < CURRENT_TIMESTAMP and CHECKTIME > (select CONVERT(date,CURRENT_TIMESTAMP)))%2)=0)
    BEGIN
    --//HERE WRITE YOUR CODE SETTING CHECKTYPE AS 1 (EMPLOYEE ENTER)
    END
    ELSE
    BEGIN
    --//HERE WRITE YOUR CODE SETTING CHECKTYPE AS 0 (EMPLOYEE EXIT)
    END 
```

它检查 recoeds 出现的次数是偶数还是奇数。如果计数为偶数，则返回为`1`。这意味着该员工已进入。否则，如果计数为奇数，则返回为`0`。这意味着该员工已退出。（这里 0 是偶数）

该值将是`1`第一次输入值时（也是第三次、第五次、第七次、...次），并且`0`是第二次输入值时（也是第四次、第六次、第八次、...次）

# ios - 如何使用图像和按钮调整和自定义 AlertView

> ID：12119383
> 
> 赞同：1
> 
> 时间：2012-08-25T05:17:59.210
> 
> 标签：ios, image, button, alertview

我首先使用“ `[UIAlertView alloc] initWithTitle:`”来调整`AlertView`图像大小和自定义，但失败了。

然后我使用以下代码，一切正常（alertView 调整大小并带有图像），但只是不能有一个按钮来关闭 alertView。在这里卡了半天。请帮忙，谢谢！

```
UIAlertView* find = [[[UIAlertView alloc] init]initWithFrame:CGRectMake(0,0,300,420)];
    [find setDelegate:self];
    [find setTitle:@"Sample Alert"];
    [find setNeedsLayout];

UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(220, 10, 80, 80)];

NSString *path = [[NSString alloc] initWithString:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"111.png"]];
UIImage *bkgImg = [[UIImage alloc] initWithContentsOfFile:path];
[imageView setImage:bkgImg];
[bkgImg release];
[path release];

 [find addSubview:imageView];
[imageView release];

[find show];
find.frame = CGRectMake(0,0,300,200);

[find release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:26:43.383

`UIAlertView`没有以这种方式进行初始化。通常你初始化一个`UIAlertView`using `initWithTitle:message:delegate:cancelButtonTitle:otherButtonTitles:`。

您可以尝试使用`[find addButtonWithTitle:@"button 1"];`. 您还需要实现[UIAlertView 委托](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/occ/intf/UIAlertViewDelegate)以与按钮进行交互。

如果这不起作用，如果您正在寻找经过大量修改的外观，我建议您实现自己的自定义视图。

希望这可以帮助。

# c# - 读取文本文件并保持格式

> ID：12119393
> 
> 赞同：1
> 
> 时间：2012-08-25T05:20:06.463
> 
> 标签：c#, .net, stream, formatting

我正在尝试读取文件并将richTextBox 的文本设置为等于它，但是在我这样做之后格式正在消失。文本文件本身中的“ENTER”在richTextBox 中不可见。这是我正在使用的代码：

```
try
{
    using (StreamReader sr = new StreamReader(directory + filePath))
    {
        while (!sr.EndOfStream)
        {
            initialText += sr.ReadLine();
        }

    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T05:21:50.163

当您使用时`sr.ReadLine()`，从字符串中删除回车符（因为它是行终止符）。
尝试在您阅读的任何行之后添加 CR：

```
initialText += sr.ReadLine() + Environment.NewLine; 
```

无论如何，您最好使用这个更简单快捷的代码：

```
initialText = File.ReadAllText(directory + filePath) 
```

# java - Java位操作错误（转换为字节并转换回来）

> ID：12119396
> 
> 赞同：0
> 
> 时间：2012-08-25T05:20:50.080
> 
> 标签：java, bit, operations

我正在尝试将出生日期（三个整数）转换为字节并将其转换回来，但我遇到了问题。我必须使用位操作对其进行转换，并通过多播服务器发送数据并接收它并改回 int。服务器工作正常，但位操作对我来说很难。代码有什么问题：

兑换：

```
 int D=12; 
      int M=9; 
      int Y=1983;
      short DMY=0; 
      DMY = (short)(DMY | (D << 19));
      DMY = (short)(DMY | (M << 15));
      DMY = (short)(DMY | Y); 
      byte[] data = new byte[3];
      data[0] = (byte)(DMY >>> 8 );
      data[1] = (byte)(DMY >>> 16 );
      data[2] = (byte)(DMY & 0xffff); 
```

转换回来：

```
 byte[] rec_data = new byte[3];
           rec_data = dp.getData();
           short Rec_dmy;

           Rec_dmy = (short)(rec_data[0] & 0xff);
           Rec_dmy = (short) (Rec_dmy << 8);
           Rec_dmy = (short)(Rec_dmy | (rec_data[1] & 0xff));
           Rec_dmy = (short) (Rec_dmy << 8);
           Rec_dmy = (short)(Rec_dmy | (rec_data[2] & 0xffff));

           byte tmp = (byte) ((Rec_dmy  >>> 19) & 0x1F);
           byte tmp2 = (byte) ((Rec_dmy >>> 15) & 0x1FF);
           byte tmp3 = (byte) (Rec_dmy & 0x7F);       

            System.out.println(tmp);
            System.out.println(tmp2);
            System.out.println(tmp3); 
```

Println 给出以下答案：31 -1 63

它不接近原始的 12 9 1983

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:26:25.343

Shorts 只能容纳 16 位；您正在尝试打包更多（例如，将日期左移 19，一旦转换为空头，将导致全零值）。您需要使用 int 或 long 来保存所有字段。

事实上，你有几件事情发生在不正确的位操作上。

我的建议是放弃位操作，只将日、月和年作为单独的字段发送：日和月各一个字节，年两个（短）字节。这需要 4 个字节（只有一个额外的字节），但需要更少的摆弄才能正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:15:16.890

Its not easy, but you have to work systematically to ensure your operations don't a) lose information b) decode the reverse of how you have encoded.

```
int D = 12;
int M = 9;
int Y = 1983;
int DMY = (D << 19) | (M << 15) | Y;
byte[] data = new byte[3];
data[0] = (byte) (DMY >>> 16);
data[1] = (byte) (DMY >>> 8);
data[2] = (byte) DMY;

int DMY2 = ((data[0]&0xFF) << 16) | ((data[1]&0xFF) << 8) | (data[2]&0xFF);
int D2 = DMY2 >>> 19;          // no mask required
int M2 = (DMY2 >>> 15) & 0x0F; // 4 bits mask
int Y2 = DMY2 & 0x7FFF;        // 15 bit mask
System.out.println(D2 + "/" + M2 + "/" + Y2); 
```

prints

```
12/9/1983 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T05:40:54.377

首先，您需要至少 14 位来表示最大值为 9999 的年份，因为`2^14 > 9999` `&& 2 ^ 13 < 9999`. 月的最少位数是 4（最大 12），日是 5（最大 31）。因此，您可以使用一个短整数（16 位）来表示每一天和每一个月的年份和字节（8 位）。所以你得到一个 32 位的 int。

```
public int encoded(short year, byte month, byte day){
    int data =0;
    data = year & 0xFFFF;
    data =(data << 8)|(month & 0xFF)
    data =(data << 8)|(day & 0xFF)
    return data;
}

public void decode(int data){
    int day = data & 0xFF;
    int month = (data >> 8) & 0xFF;
    int year = (data >> 16) & 0xFFFF;
} 
```

# c++ - 如何修改 Qt 样式表？

> ID：12119398
> 
> 赞同：1
> 
> 时间：2012-08-25T05:21:00.680
> 
> 标签：c++, qt, stylesheet

如何修改现有样式表？

例如：如果我想创建按钮，当按下每个按钮时会修改样式表的一个方面。一个按钮可以插入 10 的 margin-left 属性。另一个按钮可以使背景颜色变为蓝色。最后，另一个按钮可以圆角。不过这里的诀窍是我不想存储所有变量并在每次按下按钮时重建样式表。我想有一个简单`this->setStyleSheet(this->getStylesheet()+"margin-left: 10px:")`的例子。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:41:31.740

这是 main.cpp 中的代码

```
 QWidget wdg;
    QHBoxLayout hlay;
    wdg.setStyleSheet("border:2px solid rgb(74, 74, 74);");
    QPushButton btn;
    btn.setStyleSheet("border-radius:5px;");
    btn.setText("Hello");
    QPushButton btn2;
    btn2.setStyleSheet("background-color: rgb(190, 190, 190);");
    btn2.setText("Hello");
    hlay.addWidget(&btn);
    hlay.addWidget(&btn2);
    qDebug()<<btn.styleSheet();
    wdg.setLayout(&hlay);
    wdg.show(); 
```

设置和获取样式表适用于 QString，因此您可以使用 + 运算符。

# objective-c - 如何在 Objective-C 中播种 rand() 函数？

> ID：12119399
> 
> 赞同：6
> 
> 时间：2012-08-25T05:21:04.237
> 
> 标签：objective-c, ios, c, random, srand

我正在开发的部分内容是一个随机的公司名称生成器。它从几个名称部分数组中提取。我使用该`rand()`函数来绘制随机名称部分。但是，**每次**启动应用程序时，总是以相同的顺序生成相同的“随机”数字，因此总是出现相同的名称。

所以我搜索了 SO，在 C 中有一个`srand()`函数可以用类似于当前时间的东西“播种”随机函数，使其更随机`srand(time(NULL))`。Objective-C 是否有类似的东西可以用于 iOS 开发？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-25T05:33:13.527

你为什么不使用`arc4random`不需要种子的？你像这样使用它：

```
int r = arc4random(); 
```

[这](http://iphonedevelopment.blogspot.com/2008/10/random-thoughts-rand-vs-arc4random.html)是一篇比较它的文章`rand()`。与`arc4random()`以下内容相比，手册页对此进行了说明`rand()`：

> arc4random() 函数使用 arc4 密码使用的密钥流生成器，它使用 8*8 8 位 S-Box。S-Box 可以处于大约 (2 **1700) 个状态。arc4random() 函数返回 0 到 (2** 32)-1 范围内的伪随机数，因此具有**rand(3)**和 random(3) 范围的两倍。

如果你想要一个范围内的随机数，你可以使用该`arc4random_uniform()`函数。例如，要生成 0 到 10 之间的随机数，您可以这样做：

```
int i = arc4random_uniform(11); 
```

以下是手册页中的一些信息：

> arc4random_uniform(upper_bound) 将返回一个小于upper_bound 的均匀分布的随机数。建议使用 arc4random_uniform()，而不是像 ``arc4random() % upper_bound'' 这样的结构，因为当上限不是 2 的幂时，它可以避免“模偏差”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-25T05:32:02.577

这些函数`rand()`和`srand()`是标准 C 库的一部分，与 C 库的其余部分一样，我们在使用 Objective-C 进行 iOS 开发时完全可以使用它们。请注意，这些例程已被`random()`and取代`srandom()`，它们具有几乎相同的调用约定`rand()`，`srand()`但在更长的周期内产生更好的结果。还有一个`srandomdev()`使用随机数设备初始化随机数发生器状态的例程。这些也是标准 C 库的一部分，可用于 iOS 中的 Objective-C。

# css - 图像精灵大小是否重要

> ID：12119403
> 
> 赞同：1
> 
> 时间：2012-08-25T05:21:42.470
> 
> 标签：css, image, html, sprite

目前我正在使用大小为 200K 的图像精灵，其加载时间为 4.9 秒。

我的问题是，

1.  加载时精灵图像大小是否重要？
2.  如果尺寸在增加，我们可以把它分成两个或三个图像精灵吗？
3.  增加 HTTP 请求或进行一些压缩的最佳选择是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:25:09.023

1.  如果您希望某些图像出现在其他图像之前，这一点很重要。显然，在整个加载之前无法显示任何图像。如果有特别重要的元素，则将它们分解为单独的文件。

2.  是的

3.  压缩不会给您带来太多好处，因为您可能已经在使用压缩图像格式，例如 jpeg 或 png。

如果您需要优化页面加载速度，我会在第一点提出我的建议，并可能对剩余图像使用异步请求。

# iphone - 使用 xcode 来检测/分析第三方应用程序

> ID：12119407
> 
> 赞同：1
> 
> 时间：2012-08-25T05:22:33.590
> 
> 标签：iphone, ios, xcode-instruments

是否可以使用 Xcode Instruments 来分析第三方应用程序？现在，每当我尝试分析设备上安装的任何第三方应用程序时，我都会收到错误消息

'目标运行失败：遇到远程异常：无法为 pid 获取任务'

有什么需要配置的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:33:56.410

来自 Apple 文档：为了保护您，该仪器不允许您处理任何未使用您的配置文件进行代码签名的应用程序。这包括从 iTunes App Store 下载的任何副本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T05:46:09.050

## 更新

在更新的 iOS 版本中，您只能将分析器附加到您自己的开发人员签名的应用程序中。

## 原来的

使用 Xcode 4.4.1 和运行 iOS 5.1.1 的 iPad 3，我可以在第三方应用程序上使用 Core Animation 和 Time Profiler 工具。我用 Twitter 和 Minecraft PE 进行了尝试。

配置文件相当没用，因为我没有应用程序的符号。我只是得到了很多十六进制的地址。Instruments 甚至不会向我展示应用程序的反汇编。我相信这是因为 iOS 出于安全考虑，不允许 Instruments （或`gdb`或`lldb`）查看从 App Store 安装的应用程序的地址空间。

# javascript - 浏览器中的javascript初始大写函数错误

> ID：12119415
> 
> 赞同：0
> 
> 时间：2012-08-25T05:23:45.747
> 
> 标签：javascript, function, replace

我有以下功能来控制初始资本的价值。

```
ctrl.value = ctrl.value.toLowerCase().replace( /\b[a-z]/g , function { 
                                              return arguments[0].toUpperCase();
                                              }); 
```

当我在浏览器中运行它时，我在控制台中收到以下错误

**SyntaxError：缺少（在形式参数之前**

语法有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T05:33:55.970

您的函数定义缺少`()`括号。

```
// -------------------------------------------------------------- vv
ctrl.value = ctrl.value.toLowerCase().replace(/\b[a-z]/g, function() { 
   return arguments[0].toUpperCase();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:36:18.783

将function {改为function **()** {即可解决

# php - 在 PHP 中添加到未标记的 HTML 文本

> ID：12119419
> 
> 赞同：2
> 
> 时间：2012-08-25T05:23:59.087
> 
> 标签：php, domdocument, html-manipulation

我有这种 HTML 文档。

```
<span class="class1">text1</span>
<a href="">link1</a>
<font color=""><b>text2</b></font>
<a href="">link2</a>
text3
<span class="class2">text4</span> 
```

我想用`&nbsp;`s 包围 text1、text2 和 text3。最好的方法是什么？DomDocument 无法捕获未标记的字符串。对于 text1 和 text2， `getElementByTagName('tagname')->item(0)`可以使用，但对于 text 3，我不知道该怎么做。

有任何想法吗？

[编辑]

正如 Musa 建议的那样，我尝试使用 nextSibling。

```
<?php
$html = <<<STR
    <span class="class1">text1</span>
    <a href="">link1</a>
    <font color=""><b>text2</b></font>
    <a href="">link2</a>
    text3
    <span class="class2">text4</span>
STR;

$doc = new DOMDocument;
$doc->loadHTML($html);
foreach ($doc->getElementsByTagName('a') as $nodeA) {
    $nodeA->nextSibling->nodeValue = '&nbsp;' . $nodeA->nextSibling->nodeValue . '&nbsp;';
}
echo $doc->saveHtml();
?> 
```

但是，`&nbsp;`被转义并转换为`&amp;nbsp;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T21:19:50.853

由于设置值似乎将其设置为文本而不是 html，因此您可以使用不间断空格字符而不是 html 实体。

```
<?php
$html = <<<STR
    <span class="class1">text1</span>
    <a href="">link1</a>
    <font color=""><b>text2</b></font>
    <a href="">link2</a>
    text3
    <span class="class2">text4</span>
STR;
$nbsp = "\xc2\xa0";
$doc = new DOMDocument;
$doc->loadHTML('<div>' . $html . '</div>');

foreach( $doc->getElementsByTagName('div')->item(0)->childNodes as $node ) {
    if ($node->nodeType == 3) {     // nodeType:3 TEXT_NODE
        $node->nodeValue = $nbsp . $node->nodeValue . $nbsp;
    }
}
echo $doc->saveHtml();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T05:59:07.020

您应该能够使用`getElementsByTagName`然后迭代节点列表，并`&nbsp;`根据需要添加。

```
getElementsByTagName('body') 
```

[http://php.net/manual/en/domdocument.getelementsbytagname.php](http://php.net/manual/en/domdocument.getelementsbytagname.php)

将返回一个`nodelist`

[http://www.php.net/manual/en/class.domnodelist.php](http://www.php.net/manual/en/class.domnodelist.php)

然后您可以遍历各个项目

[http://www.php.net/manual/en/domnodelist.item.php](http://www.php.net/manual/en/domnodelist.item.php)

nodeType 会让你知道你在处理什么。Text3 是一个 TEXT_NODE，其值为`3`

[https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType?redirectlocale=en-US&redirectslug=nodeType](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType?redirectlocale=en-US&redirectslug=nodeType)

希望这能让你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T07:20:56.550

我想出了一个解决方案：

```
<?php
$html = <<<STR
    <span class="class1">text1</span>
    <a href="">link1</a>
    <font color=""><b>text2</b></font>
    <a href="">link2</a>
    text3
    <span class="class2">text4</span>
STR;

$doc = new DOMDocument;
$doc->loadHTML('<div>' . $html . '</div>');

foreach( $doc->getElementsByTagName('div')->item(0)->childNodes as $node ) {
    if ($node->nodeType == 3) {     // nodeType:3 TEXT_NODE
        $node->nodeValue = '[identical_replacement_string]' . $node->nodeValue . '[identical_replacement_string]';
    }
}
$output = str_replace("[identical_replacement_string]", "&nbsp;", $doc->saveHtml());
echo $output;
?> 
```

请随时发布更好的解决方案。

# haskell - Haskell GHCi - 在标准输入上使用 EOF 字符和 getContents

> ID：12119420
> 
> 赞同：6
> 
> 时间：2012-08-25T05:23:59.983
> 
> 标签：haskell, multiline, ghci

我喜欢通过粘贴到解释器中来临时解析 Python 中的字符串。

```
>>> s = """Adams, John
... Washington,George
... Lincoln,Abraham
... Jefferson, Thomas
... """
>>> print "\n".join(x.split(",")[1].replace(" ", "")
                    for x in s.strip().split("\n"))
John
George
Abraham
Thomas 
```

这在使用 Python 解释器时效果很好，但我想用 Haskell/GHCi 来做这件事。问题是，我不能粘贴多行字符串。我可以将 getContents 与 EOF 字符一起使用，但我只能执行一次，因为 EOF 字符会关闭标准输入。

```
Prelude> s <- getContents
Prelude> s
"Adams, John
Adams, John\nWashington,George
Washington,George\nLincoln,Abraham
Lincoln,Abraham\nJefferson, Thomas
Jefferson, Thomas\n^Z
"
Prelude> :{
Prelude| putStr $ unlines $ map ((filter (`notElem` ", "))
Prelude|                         . snd . (break (==','))) $ lines s
Prelude| :}
John
George
Abraham
Thomas
Prelude> x <- getContents
*** Exception: <stdin>: hGetContents: illegal operation (handle is closed) 
```

有没有更好的方法来用 GHCi 做到这一点？注意 - 我对 getContents （以及一般的 Haskell IO）的理解可能被严重破坏。

**更新**

我会玩弄我收到的答案。这是我制作（抄袭）的一些辅助函数，它们模拟 Python从 ehemient 的答案中`"""`引用（以 结尾，而不是开头）。`"""`

```
getLinesWhile :: (String -> Bool) -> IO String
getLinesWhile p = liftM unlines $ takeWhileM p (repeat getLine)

getLines :: IO String
getLines = getLinesWhile (/="\"\"\"") 
```

要在 GHCi 中使用 AndrewC 的答案 -

```
C:\...\code\haskell> ghci HereDoc.hs -XQuasiQuotes
ghci> :{
*HereDoc| let s = [heredoc|
*HereDoc| Adams, John
*HereDoc| Washington,George
*HereDoc| Lincoln,Abraham
*HereDoc| Jefferson, Thomas
*HereDoc| |]
*HereDoc| :}
ghci> putStrLn s
Adams, John
Washington,George
Lincoln,Abraham
Jefferson, Thomas
ghci> :{
*HereDoc| putStr $ unlines $ map ((filter (`notElem` ", "))
*HereDoc|                         . snd . (break (==','))) $ lines s
*HereDoc| :}
John
George
Abraham
Thomas 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T06:33:00.513

`getContents` == `hGetContents stdin`. Unfortunately, `hGetContents` marks its handle as (semi-)closed, which means anything attempting to read from `stdin` ever again will fail.

Does it suffice to simply read up to an empty line or some other marker, never closing `stdin`?

```
takeWhileM :: Monad m => (a -> Bool) -> [m a] -> m [a]
takeWhileM p (ma : mas) = do
    a <- ma
    if p a
      then liftM (a :) $ takeWhileM p mas
      else return []
takeWhileM _ _ = return [] 
```

```
ghci> liftM unlines $ takeWhileM (not . null) (repeat getLine)
Adams, John
Washington, George
Lincoln, Abraham
Jefferson, Thomas

"Adams, John\nWashington, George\nLincoln, Abraham\nJefferson, Thomas\n"
ghci>

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T17:44:53.067

If you do this a lot, and you're writing helper functions in some module anyway, why not go the whole hog and use your editor for the raw data too:

```
{-# LANGUAGE TemplateHaskell, QuasiQuotes #-}
module ParseAdHoc where
import HereDoc
import Data.Char (isSpace)
import Data.List (intercalate,intersperse)  -- other handy helpers

-- ------------------------------------------------------
-- edit this bit every time you do your ad-hoc parsing

adhoc :: String -> String
adhoc = head . splitOn ',' . rmspace

input = [heredoc|
Adams, John
Washington,George
Lincoln,Abraham
Jefferson, Thomas
|]

-- ------------------------------------------------------
-- add other helpers you'll reuse here

main = mapM_ putStrLn.map adhoc.lines $ input

rmspace = filter (not.isSpace)

splitWith :: (a -> Bool) -> [a] -> [[a]]   -- splits using a function that tells you when
splitWith isSplitter list =  case dropWhile isSplitter list of
  [] -> []
  thisbit -> firstchunk : splitWith isSplitter therest
    where (firstchunk, therest) = break isSplitter thisbit

splitOn :: Eq a => a -> [a] -> [[a]]       -- splits on the given item
splitOn c = splitWith (== c)

splitsOn :: Eq a => [a] -> [a] -> [[a]]    -- splits on any of the given items
splitsOn chars = splitWith (`elem` chars) 
```

It would be easier to use `takeWhile (/=',')` instead of `head . splitOn ','`, but I thought that `splitOn` will be more useful to you in the future.

This uses a helper module, HereDoc, that lets you paste multiline string literals into your code (like perl's `<<"EOF"` or python's `"""`). I can't remember how I found how to do this, but I've tweaked it to remove whitespace first and last lines, so I can start and end my data with a newline.

```
module HereDoc where
import Language.Haskell.TH
import Language.Haskell.TH.Quote
import Data.Char (isSpace)

{-
example1 = [heredoc|Hi.
This is a multi-line string.
It should appear as an ordinary string literal.

Remember you can only use a QuasiQuoter
in a different module, so import this HereDoc module 
into something else and don't forget the
{-# LANGUAGE TemplateHaskell, QuasiQuotes #-}|]

example2 = [heredoc|         
This heredoc has no newline characters in it because empty or whitespace-only first and last lines are ignored
                   |]
-}

heredoc = QuasiQuoter {quoteExp = stringE.topAndTail,
                       quotePat = litP . stringL,
                       quoteType = undefined,
                       quoteDec = undefined}

topAndTail = myunlines.tidyend.tidyfront.lines

tidyfront :: [String] -> [String]
tidyfront [] = []
tidyfront (xs:xss) | all isSpace xs = xss
                   | otherwise      = xs:xss

tidyend :: [String] -> [String]
tidyend [] = []
tidyend [xs]     | all isSpace xs = []
                 | otherwise = [xs]
tidyend (xs:xss) = xs:tidyend xss

myunlines :: [String] -> String
myunlines [] = ""
myunlines (l:ls) = l ++ concatMap ('\n':) ls 
```

You might find Data.Text a good source of (inspiration for) helper functions: [http://hackage.haskell.org/packages/archive/text/latest/doc/html/Data-Text.html](http://hackage.haskell.org/packages/archive/text/latest/doc/html/Data-Text.html)

# php - 在php中注销后更改会话ID

> ID：12119421
> 
> 赞同：0
> 
> 时间：2012-08-25T05:24:01.397
> 
> 标签：php, session, session-cookies

我想在用户注销到登录前的会话 ID 后恢复会话 ID。我在用户登录时存储会话 ID，但我不知道必须在用户浏览器上存储的 cookie 中更改它。

我怎样才能改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:36:49.063

```
//before loggin 
        $_SESSION['old_session'] = $_SESSION;
        //During logout
        $old_session  = $_SESSION['old_session'];
        session_destroy();
        $_SESSION = $old_session; 
```

# python - 'dropwhile' 是静态的吗？我可以让它动态吗？

> ID：12119422
> 
> 赞同：2
> 
> 时间：2012-08-25T05:24:13.237
> 
> 标签：python, itertools

**介绍**

我想出了一个狡猾的解决方案来解决我的问题，但并不那么狡猾，它不起作用：-/

经过几个小时的点击调试器我*认为*，所以也许你可以验证这一点，它不起作用的原因是`itertools.dropwhile`，在初始声明之后，是固定的 - 而我希望我可以将输入参数更改为谓词每个循环。

下面的任务尝试选择一个开始日期，然后是一个结束日期，然后是一个开始日期，最后一个结束日期......等等，所以我们最终得到一系列日期间隔重叠。startdates 来自一个列表，enddates 来自另一个列表。

以下解决方案循环遍历开始日期，然后遍历`dropwhile`结束日期，用于传递“*过去*”中的日期。它在第一次通过时完美运行。但在第二次通过时，结束日期卡在“2009-12-14”。我打破了“isbefore”例程，以便我可以看到它什么时候被测试，什么时候没有。不确定，但我认为正在发生的事情是整个`dropwhile`测试在第一遍时就固定下来了，并且不会在每次通过时重新编译自己？就像我希望/期望的那样。

为了完成它，我希望将它全部包装在 a 中`while True`并通过`StopIteration`异常退出，从而提取完整的间隔序列。但它永远不会着火。当我尝试时，两个迭代器实际上都不会“下一个”一直到结束。

**问题**

1.  对于正在发生的事情，这（一成不变的结论）是否正确？
2.  有没有一种简短、干净、优雅的方式让它表现得像我希望的那样？我是否必须编写自己的 dropwhile 以按照我想要的方式运行？

**代码**

```
import itertools
import datetime

startdates = [
    datetime.date(2009, 11, 5), datetime.date(2009, 11, 13),
    datetime.date(2009, 12, 4), datetime.date(2009, 12, 7),
    datetime.date(2009, 12, 29), datetime.date(2009, 12, 30)]

enddates = [
    datetime.date(2009, 10, 1), datetime.date(2009, 10, 2),
    datetime.date(2009, 11, 4), datetime.date(2009, 12, 14),
    datetime.date(2009, 12, 15),datetime.date(2009, 12, 30)]

enddate = datetime.date(1900, 1, 1)
startdate = datetime.date(1900, 1, 1)

def isbefore(a, b):
    return a <= b

for startdate in itertools.dropwhile(lambda date: isbefore(date, enddate), startdates):
    for enddate in itertools.dropwhile(lambda date: isbefore(date, startdate), enddates):
        print startdate, enddate
        break 
```

**电流输出**

```
2009-11-05 2009-12-14
2009-11-13 2009-12-14
2009-12-04 2009-12-14
2009-12-07 2009-12-14 
```

**期望的输出**

```
2009-11-05 2009-12-14
2009-12-29 2009-12-30 
```

更细心的类型会注意到我昨天问了[这个问题](https://stackoverflow.com/questions/12102751)，它提出了同样的问题，但是需要一个通用的解决方案，而这次我专门询问 dropwhile 的工作原理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T05:39:02.473

一旦`dropwhile`删除了满足谓词的项目，它就会产生其余未修改的可迭代项。在它的位置使用`itertools.ifilterfalse`会提供您想要的输出，因为即使在初始运行之后它也会继续处理谓词。

# perl - 如何在 Perl 脚本中调用 C# 应用程序

> ID：12119423
> 
> 赞同：-1
> 
> 时间：2012-08-25T05:24:19.593
> 
> 标签：perl

我想在 Perl 脚本中捕获 C# 应用程序的输出，进行相同的处理，然后发送电子邮件通知。我知道电子邮件通知部分只是寻找从 C# 应用程序到我的 Perl 脚本的数据检索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:29:19.867

C# 应用程序仍然是一个应用程序，因此只要它是一个控制台应用程序并支持标准输出和标准错误，那么将输出捕获到标准输出应该不会有任何特别的问题。查看此线程以获取详细信息： [如何运行外部命令并在 Perl 中捕获其输出？](https://stackoverflow.com/questions/2461472/how-can-i-run-an-external-command-and-capture-its-output-in-perl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:33:43.370

`Console.WriteLine`在 C# 程序中使用。这将写入 STDOUT。在 Perl 脚本中，使用反引号来捕获 C# 程序的 STDOUT。

# ios - 在应用重新进入时恢复 UIView 动画？

> ID：12119432
> 
> 赞同：0
> 
> 时间：2012-08-25T05:25:55.497
> 
> 标签：ios, animation, uiview, uiimageview, resume

我的应用程序的主视图控制器中有 2 个 UIImageView。他们总是通过 UIView 动画制作动画。我想要实现的是当用户单击主页按钮时，暂停 UIView 动画，当用户返回应用程序时，恢复动画。

所以要暂停，我从我的应用程序委托调用一个方法到我的 ViewController 来暂停 applicationWillResignActive 调用。

为了恢复，我还从应用程序委托调用了一个方法到我的 ViewController 以在 applicationDidBecomeActive 方法中恢复。

这是我用来暂停或恢复动画的代码：

```
-(void)pauseLayer:(CALayer*)layer {
    CFTimeInterval paused_time = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = paused_time;
}

-(void)resumeLayer:(CALayer*)layer {
    CFTimeInterval paused_time = [layer timeOffset];
    layer.speed = 1.0f;
    layer.timeOffset = 0.0f;
    layer.beginTime = 0.0f;
    CFTimeInterval time_since_pause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - paused_time;
    layer.beginTime = time_since_pause;
}

- (void)pause:(BOOL)theBool {
    if (theBool) {
        [self pauseLayer:self.myImageView.layer];
        [self pauseLayer:self.myImageViewleft.layer];
    } else {
        [self resumeLayer:self.myImageView.layer];
        [self resumeLayer:self.myImageViewleft.layer];
    }
} 
```

因此，我对所有内容进行了 NSLogged，并且相应地调用了这些方法，但是当我恢复动画时，图像视图不会从它们停止的位置恢复，并且很可能位于我将它们放置在 XIB 中的位置（屏幕外）。

所以当我重新进入我的应用程序时，我的 XIB 会重新加载还是什么？绝对没有什么应该改变那些 UIImageView 的位置，这就是为什么我真的很困惑为什么会发生这种情况。

编辑：我也尝试过以编程方式创建我的图像，没有运气同样的问题。如果我在运行时通过我的应用程序中的按钮进行暂停和恢复，则它可以成功运行，看来问题出在应用程序委托方法或其他东西上。

如果有人看到有什么问题，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:59:06.273

我发现这非常复杂和棘手，所以现在我将只使用 Cocos2D 并利用 CCDirector 的暂停功能。

***编辑***：刚刚尝试了 CCDirector 的暂停功能，效果很好。一定要走这条路！！！

# c# - 水晶报表打印动态页面大小

> ID：12119442
> 
> 赞同：0
> 
> 时间：2012-08-25T05:27:35.167
> 
> 标签：c#, .net, crystal-reports, crystal-reports-2008

我希望根据报告连续打印水晶报告，例如如果报告完成使用点阵打印机（例如百货商店比尔）停止打印而没有空白页。我提到了报告 A4 尺寸的设计，但是我想打印没有空白页的报告。

目前我的输出如下图所示：

![在此处输入图像描述](../Images/058a65d11056541616c499d490b58496.png)

我想要如下图所示的输出：

![在此处输入图像描述](../Images/f0d0d981074b476700914f89ff62f979.png)

我正在使用 C#.net，使用 Crystal Report Viewer 查看和打印。我没有使用 Crystal Report 的经验，任何人都可以帮助我如何做到这一点？

感谢您阅读我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:10:18.310

首先，通过使用可从上下文菜单访问的“适​​合部分”命令，确保避免每个部分中出现空白。还要确保页面底部的范围部分也未选中报告和页脚。

# apache - Mediawiki 页面未正确显示

> ID：12119443
> 
> 赞同：0
> 
> 时间：2012-08-25T05:27:42.973
> 
> 标签：apache, xampp, mediawiki

我在本地 Mediawiki 上遇到了一个独特的问题（可能）。它已安装在 Windows XP（XAMPP 服务器，Mediawiki 1.19.1）上。我已经将它安装为一个私人 wiki 并添加了一些稳定的扩展（如 Cite、TitleKey 等）。

问题是这个 wiki 使用默认**矢量**皮肤在我的电脑（本地主机服务器）中正确显示，但其他人无法正确查看它。页面样式/格式根本没有出现。我曾尝试使用**monobook**皮肤，但没有帮助。我既没有使用短 URL（如附加链接中提到的），也没有在 LocalSettings.php 中进行太多更改。为了更清楚，我附上了一个快照。任何帮助将非常感激。

[Stackoverflow 答案](https://stackoverflow.com/questions/11218873/mediawiki-cant-display-images-or-styles)

[图像快照](http://flic.kr/p/cY8HSs)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T13:22:50.887

在我将`$wgServer`in `LocalSettings.php`from更改`localhost`为 machine Static后，它起作用了`IP`。可能域名配置错误[如@Tgr建议的那样]

# c# - 为什么 DllImport 需要标识符？

> ID：12119444
> 
> 赞同：1
> 
> 时间：2012-08-25T05:27:45.330
> 
> 标签：c#, dllimport

我有点困惑。

在代码中：

```
[DllImport("library.dll")]
public static extern void function(int x); 
```

为什么需要 x？int 不应该足够吗，因为这只是一个定义而不是声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:28:56.713

它是 C# 语法，接口中的方法也是如此。

可能最大的原因是，它增加了代码的清晰度。参数名称可能会告诉方法中的预期值

# iphone - 在 xcode 的情节提要中添加和控制视图控制器

> ID：12119451
> 
> 赞同：1
> 
> 时间：2012-08-25T05:29:06.217
> 
> 标签：iphone, ios, xcode, xcode4.2

我是 iphone 编程的新手，我创建了一个特殊的场景。我很确定它会回答我创建应用程序的大部分问题。这里是。（我有`Xcode 4.2`）

我创建了一个带有故事板和单一视图的通用应用程序。

我有`appDelegate`，`storyboard files`还有一个类文件`ViewController.h/m`作为我的初始`ViewController`.

假设我`progress View`在视图控制器上添加了一个（以图形方式）。我`viewController`还在情节提要上添加了另一个并将其背景设为黑色。

当我运行应用程序时，我的第一个`viewController`进度视图会出现

现在我的问题是

1-如何在类文件中链接我的进度视图以及如何将其设置为 5 秒。

2- 在 5 秒内显示进度后，它应该切换到具有黑色背景的其他视图控制器。

3-我已经创建了一个类文件“ `MySecondController`”我如何将这个类链接到我的黑屏viewController。

这些都是简单的问题。我希望我能得到这些答案。如果有人有链接到这些问题的教程，请发布。我已经尝试过，但没有发现有用。

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:31:03.427

1a) 在 xcode 窗口的右上角，有一个燕尾服图标。这是助理编辑。选择故事板，选择 ViewController，然后选择助手编辑器。将出现第二个编辑器。确保它正在编辑 ViewController.h。按下控制并从情节提要中的进度视图拖动到 ViewController 接口定义内的某个点。（就在如下所示的行之后：）`@interface ViewController : UIViewController`您将被提示输入一个出口名称。键入类似“progressView”（不带引号）的内容。

1b）见下文将进度视图设置为一个值。

2）见下文，在延迟后呈现第二个视图控制器。

3) 在情节提要中，将一个新的视图控制器拖到画布上。在身份检查器上（尝试燕尾服图标下的图标，左起第三个是身份），将其类设置为 MySecondController。选择原来的 ViewController，按下 control 并从它的状态栏（它的顶部）拖到你刚刚添加的 viewcontroller。这将创建一个转场。将出现一个菜单，询问您想要什么样的 segue。现在制作 segue 模态。单击新的 segue 将其选中，然后单击属性检查器（在身份检查器旁边）给 segue 一个标识符，称之为“MySecondControllerSegue”。

回到问题 1b 和 2) 转到 ViewController.m 并添加此代码...

```
@synthesize progressView;
// this creates methods on self to access the progress view

// this is called after the view appears
- (void)viewDidAppear:(BOOL)animated {

    // do inherited behavior
    [super viewDidAppear:animated];

    // set the progress view value to a number between 0.0-1.0, representing percentage
    // notice how we used the synthesized getter: self.progressView
    self.progressView.progress = 0.5;  

    // call another method with no parameters after five seconds
    [self performSelector:@selector(doSegue) withObject:nil afterDelay:5.0];
}

- (void)doSegue {
    // run the segue that you created in IB
    [self performSegueWithIdentifier:@"MySecondControllerSegue" sender:self];
} 
```

构建并运行。

完成此操作后，您可能希望显示在 5 秒内从 0.0 位置前进到 1.0 的进度视图。为此，您需要阅读有关 NSTimer 的信息。可以设置一个定时给你发消息，每次可以调整progressView。

# php - 是否可以使用脚本创建 FB 应用程序？

> ID：12119455
> 
> 赞同：0
> 
> 时间：2012-08-25T05:29:35.123
> 
> 标签：php, facebook, facebook-apps

我正在构建一个产品，涉及客户将他们的 FB 应用程序数据添加到我产品的仪表板中。

在这种情况下，每个客户都必须先访问developers.facebook.com/apps 并创建一个应用程序。

我希望在我的网站上有一个显示“创建应用程序”的按钮，单击该按钮会立即为客户创建应用程序。

那么是否可以从我的网站创建一个 FB 应用程序（使用脚本，而不是手动）？

在此先感谢，阿尔廷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:32:28.433

几年前是可能的，现在它已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:46:36.683

# android - 如何让 Android Test Instrumentation 测试用例等待一段时间才能得到一些结果？

> ID：12119457
> 
> 赞同：0
> 
> 时间：2012-08-25T05:30:09.863
> 
> 标签：android, instrumentation, activityunittestcase

任何人都可以帮助我。我想让我的测试用例休眠以等待 textview 文本更改，但似乎 Thread.sleep() 无法正常工作！

背景：我使用 ActivityUnitTestCase 来测试我的一项活动。下面是测试用例，从日志中我无法获得更改后的文本。

```
public void testCanStartup() throws Exception{
    m_activty = startActivity(m_intent, null, null);
    assertNotNull(m_activty);

                //get textview to check the view text's changes when oncreate and onresume
    TextView mem_percentview= (TextView) m_activty.findViewById(cn.opda.a.phonoalbumshoushou.R.id.mem_percent);

    Thread.sleep(50000);
    getInstrumentation().callActivityOnResume(m_activty);
    Log.v(DEBUGTAG,"mem text result is : " + mem_percentview.getText().toString());
    TextView actual_mempercentview = (TextView) m_activty.findViewById(cn.opda.a.phonoalbumshoushou.R.id.mem_percent);
    assertEquals(mem_percentview.getText().toString(),actual_mempercentview.getText().toString() );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:54:06.020

怎么样：

```
 mem_percentview.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
            Log.v(DEBUGTAG,"mem text result is : " + charSequence;
        }

        @Override
        public void afterTextChanged(Editable editable) {
        }
    }); 
```

# java - 如何更新 rt.jar 文件？

> ID：12119465
> 
> 赞同：1
> 
> 时间：2012-08-25T05:32:54.230
> 
> 标签：java, jar

我想将一些类文件添加到`rt.jar`. 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T05:41:32.723

您的问题表明您对java平台有一些误解。

首先，您需要知道 rt.jar 是什么以及它的作用：

rt.jar 是包含 java 运行时所需的所有类的 jar。因此它的名字是**rt** .jar

现在您知道了，您需要知道您的 java 程序是如何运行的：

您的 java 程序、所有 jar 和类都由 java 虚拟机执行。

因此，您可以看到您编写的代码和 java 运行时使用的 rt.jar 是完全独立的，应该保持如此。

如果你需要一些功能，你应该把它添加到你的 jar 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:06:14.040

更新的最佳方法`rt.jar`是安装 Java 的较新版本。;)

如果要在新包中添加自己的类，可以将它们添加到类路径中的 jar 中。这比更改现有类更可取。

如果唯一的选择是更改现有类，您可以在 jar 中创建一个“补丁”，将其添加到引导类路径之前，或者您可以将 jar 添加到`lib/endorsed`目录中。我不会为生产代码执行此操作，仅用于您自己的测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T05:36:53.167

不要更新它。为什么要更新它？

无论如何，如果你想更新它，我知道一种方法，你可以在 winrar 中打开 jar 文件并将更新的 .class 文件粘贴到存档中。但是您的 jar 可能会处于不一致的状态。风险自负。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T05:41:23.563

你可以使用这个命令：

```
jar uf jar-file input-file(s) 
```

详情请参考链接：

[java.sun.com/docs/books/tutorial/deployment/jar/update.html](http://java.sun.com/docs/books/tutorial/deployment/jar/update.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-11T23:32:15.053

我已经尝试了带有 u 和 0（即零）选项的 jar.exe，它看起来最接近原始 rt.jar 文件，但是如果我更新了 JDK 的 JRE 的 rt.jar，我在编译和震动时会遇到问题更新后。不知道为什么！简单地使用 JRE 运行程序似乎可以工作。

我也试过 -Xbootclasspath/p 但无法让它工作。

查看[用自定义版本替换 Java 类库中的类时，](https://stackoverflow.com/questions/33631419/replace-a-class-within-the-java-class-library-with-a-custom-version)我发现将更改的 rt.jar 分发给您的客户存在法律问题，即使您可以弄清楚如何正确执行。因此，我计划在该页面中接受建议并创建一个 java 代理。这显然是合法且有效的。

人们可能想要修改 rt.jar 的一个原因是在使用 -g 选项编译 JDK 附带的源代码后添加调试信息。人们可能还想修补一些东西。这些当然是供自己使用的。

# java - redis pub sub 与 jedis ， sub 崩溃并出现错误

> ID：12119471
> 
> 赞同：4
> 
> 时间：2012-08-25T05:33:49.870
> 
> 标签：java, redis, publish-subscribe, jedis

全部

我已经安装了最新的 Redis 2.4.16 并尝试将其 Pub/Sub 系统与 java 一起使用。我每秒都在向频道发送一条消息。发布者没有问题，但订阅者因消息而崩溃

**例外：**

```
redis.clients.jedis.exceptions.JedisDataException: ERR only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context
at redis.clients.jedis.Protocol.processError(Protocol.java:59)
at redis.clients.jedis.Protocol.process(Protocol.java:66)
at redis.clients.jedis.Protocol.read(Protocol.java:131)
at redis.clients.jedis.Connection.getObjectMultiBulkReply(Connection.java:206)
at redis.clients.jedis.JedisPubSub.process(JedisPubSub.java:88)
at redis.clients.jedis.JedisPubSub.proceed(JedisPubSub.java:83)
at redis.clients.jedis.Jedis.subscribe(Jedis.java:1971)
at com.jedis.test.JedisSub$1.run(JedisSub.java:22)
at java.lang.Thread.run(Thread.java:680) 
```

***这是我的代码：***

**出版商：**

```
 final Jedis jedis = new Jedis("localhost");

        ExecutorService newFixedThreadPool = Executors.newFixedThreadPool(10);
        newFixedThreadPool.submit(new Runnable() {

            @Override
            public void run() {
                while(true){
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    jedis.publish("CC", new Date().toString());
                }

            }
        }); 
```

**订户：**

```
 JedisPool jedisPool = new JedisPool(poolConfig,"localhost", 6379, 100);
        final Jedis subscriberJedis = jedisPool.getResource();

        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    subscriberJedis.subscribe(new JedisPubSub() …..,"CC");
                } catch (Exception e) {
                   e.printStackTrace();
                }
            }
        }).start();

        jedisPool.returnResource(subscriberJedis); 
```

**池配置：**

```
 JedisPoolConfig poolConfig = new JedisPoolConfig();
    poolConfig.maxActive = 10;
    poolConfig.maxIdle = 5;
    poolConfig.minIdle = 1;
    poolConfig.testOnBorrow = true;
    poolConfig.numTestsPerEvictionRun = 10;
    poolConfig.timeBetweenEvictionRunsMillis = 60000;
    poolConfig.maxWait = 3000;
    poolConfig.whenExhaustedAction = org.apache.commons.pool.impl.GenericObjectPool.WHEN_EXHAUSTED_FAIL; 
```

为了安装 Redis，我只是使用了命令

```
make PREFIX=/Users/ggg/dev/dist/redis/ install 
```

在此之后我没有使用`./install_server.sh`

Jedis版本为2.1.0，平台为Mac OS X。

> 注意：我注意到订阅者在启动后大约 30 秒崩溃。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T08:02:44.220

发布者和订阅者的代码都有各自的错误。

该错误来自无法在发布者和订阅者之间共享 Redis 连接的事实。实际上，发布者需要一个连接（或一个连接池），而订阅者线程只需要一个专用连接。每个进程运行一个订阅者线程通常就足够了。

在这里，在订阅者线程完成之前，您过早地将订阅者Jedis 连接返回到池中，因此连接是共享的。

**在发布者中：**

由于您有一个包含 10 个线程的池，因此您不应在这些线程之间共享唯一的连接。这是使用连接池的最佳场所，并且必须在每个线程中抓取和释放连接。

```
 // This should be a global singleton
    JedisPool jedisPool = new JedisPool(poolConfig,"localhost", 6379, 100);

    ExecutorService newFixedThreadPool = Executors.newFixedThreadPool(10);
    newFixedThreadPool.submit(new Runnable() {

        @Override
        public void run() {
            while(true){
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                Jedis jedis = jedisPool.getResource();
                try {
                   jedis.publish("CC", new Date().toString());
                } catch (Exception e) {
                   e.printStackTrace();
                } finally {
                   jedisPool.returnResource(jedis);
                }
            }

        }
    }); 
```

**在订阅者中：**

在订阅者中，您需要一个专用连接。

```
 new Thread(new Runnable() {
        @Override
        public void run() {
            Jedis subscriberJedis = new Jedis("localhost");
            try {
                subscriberJedis.subscribe(new JedisPubSub() …..,"CC");
            } catch (Exception e) {
               e.printStackTrace();
            }
        }
    }).start(); 
```

如果您需要订阅不同的频道或模式，最好将其他订阅设置在同一个线程中，并为同一个连接。

# html - ie8 + CSS：在内联样式中使用-ms-filter

> ID：12119477
> 
> 赞同：2
> 
> 时间：2012-08-25T05:34:58.247
> 
> 标签：html, css, internet-explorer-8, inline-styles

```
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')"; 
```

我想将上面的代码用作内联样式，例如：

```
<div style='-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')";'> 
```

但我认为到处都是引号有些古怪。这可以做到吗？如何？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:44:06.673

就个人而言，我鼓励您只使用外部样式表。这将完全避免您在尝试使用内联样式时遇到的“引用中的引用”困境。

但 ...

我相信您*可以*根据需要简单地使用`&quot;`和/或`\"`。

请试一试——然后发回你发现的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T14:55:49.403

旧帖子，但解决方案是排除括号内的引号。以下语法可以在 IE 的好战中幸存下来：

```
<div style="-ms-filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=myBackground.jpg, sizingMethod=scale)';"> 
```

文件可能应该使用网络安全约定命名。

# ruby-on-rails - 发送到 series.data 的字符串值，预期数字

> ID：12119486
> 
> 赞同：0
> 
> 时间：2012-08-25T05:37:51.810
> 
> 标签：ruby-on-rails, heroku, highcharts

使用 Highcharts 将我的 rails 应用程序发布到 Heroku 时出现错误（[错误 14](http://highcharts.com/errors/14)）。在开发中一切正常，并且值不会转换为字符串。

基本上，当我的视图加载到 Heroku 上时，我得到以下代码：

```
 <script type="text/javascript" charset="UTF-8">
    $(function () {
        var chart;
        $(document).ready(function() {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'visualization',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Receipts by Gender'
                },
                tooltip: {
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Receipts by gender',
                    data: [["M", "432854518.0"]]
                }]
            });
        });

    });
    </script> 
```

如果我们查看 series.data，我们会看到 [["M", "432854518.0"]]，这就是问题所在。右边的值应该是浮点数或至少是整数。

我的控制器：

```
 @pie_gender_total = Receipt.group_by_gender_pie(current_user, :total)
    @pie_gender = @pie_gender_total 
```

我的观点 ：

```
<script type="text/javascript" charset="UTF-8">
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
        ...
            series: [{
                ...
                data: <%=raw @pie_gender %>
            }]
        });
    });

});
</script> 
```

我的模型方法：

```
def self.group_by_gender_pie(user, dim, begin_date=nil, end_date=nil)
    arr=[]
    self.group_by_gender(user).each do |item| arr.push([item.gender, dim == :count ? item.number_of_receipts : item.total]) end
    arr
  end 
```

关于为什么相同的解决方案在开发中有效的任何想法，但对于我的 heroku 环境却不是这样？和解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:22:45.653

最后，我发现问题可以追溯到模型。

这是解决方案（基本上将数字转换为浮点数）：

```
 def self.group_by_gender_pie(user, dim, begin_date=nil, end_date=nil)
    arr=[]
    self.group_by_gender(user).each do |item| arr.push([item.gender, dim == :count ? item.number_of_receipts.to_f : item.total.to_f]) end
    arr
  end 
```

我仍然不明白为什么 development 和 heroku 之间的行为不同。

# php - 通过使用 jquery 数据表进行 ajax 调用从 mysql 表中检索数据

> ID：12119491
> 
> 赞同：1
> 
> 时间：2012-08-25T05:39:14.690
> 
> 标签：php, jquery, datatables

我在从 mysql 表中检索数据进行 ajax 调用时遇到问题。我正在使用 jquery 数据表来显示数据。代码如下

```
var oTable;

/* Formating function for row details */
function fnFormatDetails ( nTr )
{
var aData = oTable.fnGetData( nTr );
var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';
sOut += '<tr><td>'+aData[0]+'</td></tr>';
sOut += '</table>';

return sOut;
}

$(document).ready(function() {
oTable = $('#datatables').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "../getproducts.php",
    "aData" : "POST","getproducts.php?c_name_mfac="+c_name_mfac
    "aoColumns": [
        { "sClass": "center", "bSortable": false },
        null,
        { "sClass": "center" },
    ]
} );

$('#datatables tbody tr td img').live( 'click', function () {
    var nTr = this.parentNode.parentNode;
    if ( this.src.match('details_close') )
    {
        /* This row is already open - close it */
        this.src = "../images/details_open.png";
        oTable.fnClose( nTr );
    }
    else
    {
        /* Open this row */
        this.src = "../images/details_close.png";
        oTable.fnOpen( nTr, fnFormatDetails(nTr), 'details' );
    }
} );
} ); 
```

代码的HTML部分如下：

```
<div>                          
<table id = "datatables" class="display">
<thead>
<tr>
    <th></th>
    <th>Company Name</th>
</tr>
<thead>
<tbody>
    <?while($row=mysql_fetch_array($result)){               
            <tr>
                <td><img src="images/details_open.png"/></td>
        <td class="center" value="c_name_mfac"><?= $row['c_name_mfac']?></td>
    </tr>
    <?}}?>
</tbody>
</table>
</div> 
```

对文件 getproducts.php 进行 AJAX 调用，代码如下所示：

```
<?php
   include('config.php');
   $cname = $_POST['c_name_mfac'];

   $sql = mysql_query("SELECT * FROM items where c_name_mfac = $cname ");

?> 
```

我没有收到任何语法错误，但也没有得到输出。

我是 AJAX 和 JQUERY 的初学者。基本上我需要的是基于我需要在 jquery 数据表中显示其所有产品的公司名称。我正在使用[DataTables 隐藏行详细信息示例](http://www.datatables.net/examples/api/row_details.html)，但这似乎对我有用.. 任何人都可以帮忙吗？

谢谢，数控

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:36:03.567

PHP 文件没有返回任何值，您应该生成一些 JSON 输出，如下所示：

```
<?php
   include('config.php');
   $cname = $_POST['c_name_mfac'];

   $sql = mysql_query("SELECT * FROM items where c_name_mfac = $cname ");}

   $result = new stdObject;
   $result->aaData = array();

   while($row = mysql_fetch_assoc($sql)) {
       array_push($result->aaData, $row);
   }

   header('Cache-Control: no-cache, must-revalidate');
   header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
   header('Content-type: application/json');

   echo json_encode($result);
?> 
```

# apache-zookeeper - ZooKeeper 断开与单个主机的多个连接

> ID：12119495
> 
> 赞同：2
> 
> 时间：2012-08-25T05:39:24.313
> 
> 标签：apache-zookeeper, disconnected

我在我的 web 应用程序中使用 ZooKeeper，发现了一个非常奇怪的问题：如果我将两个应用程序（都使用 zookeeper）部署到同一个 tomcat，一个应用程序中的 ZooKeeper 在 tomcat 启动时会莫名其妙地断开连接。

以下是我的代码，非常简单：

```
public class ZKTester implements InitializingBean, Watcher {

    private ZooKeeper hZooKeeper;

    public void afterPropertiesSet() throws Exception {
        hZooKeeper = new ZooKeeper("localhost:2181", 300000, this);
    }

    public void process(WatchedEvent event) {
        System.out.println("**************" + event);
    } 
```

和弹簧配置文件：

```
<bean id="zooTester" class="com.abc.framework.cluster.ZKTester"/> 
```

这是tomcat的启动日志：

```
...
**************WatchedEvent state:Disconnected type:None path:null
**************WatchedEvent state:Expired type:None path:null
... 
```

我的使用有什么错误吗？

谢谢

LJW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:44:54.993

从 ZooKeeper 的角度来看，用法是正确的。您可以创建到服务器的多个连接。

问题可能是服务器上存在的一个名为的属性`maxClientCnxns`，它限制了来自单个 IP 地址的连接。有关更多详细信息，请参阅[maxClientCnxns 上的 Zookeeper 文档](http://zookeeper.apache.org/doc/r3.4.3/zookeeperAdmin.html#sc_advancedConfiguration)。

问候， 克里斯蒂安

# python - 在 mac os x 上安装 MySQLdb

> ID：12119497
> 
> 赞同：1
> 
> 时间：2012-08-25T05:39:49.263
> 
> 标签：python

我正在尝试在 Mac OS X 上安装 MySQldb。但是当我运行 python setup.py build

终端向我显示此消息。

```
sh: mysql_config: command not found
sh: mysql_config: command not found
sh: mysql_config: command not found
sh: mysql_config: command not found
running build
running build_py
creating build/lib.macosx-10.6-intel-2.7
copying _mysql_exceptions.py -> build/lib.macosx-10.6-intel-2.7
creating build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/__init__.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/converters.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/connections.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/cursors.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/release.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
copying MySQLdb/times.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb
creating build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/__init__.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/CR.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/FIELD_TYPE.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/ER.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/FLAG.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/REFRESH.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
copying MySQLdb/constants/CLIENT.py -> build/lib.macosx-10.6-intel-2.7/MySQLdb/constants
running build_ext
gcc-4.2 not found, using clang instead
building '_mysql' extension
creating build/temp.macosx-10.6-intel-2.7
clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o build/temp.macosx-10.6-intel-2.7/_mysql.o -Dversion_info="(1,2,1,'final',1)" -D__version__="1.2.1"
_mysql.c:39:10: fatal error: 'mysql.h' file not found
#include "mysql.h"
         ^
1 error generated.
error: command 'clang' failed with exit status 1 
```

我已经在我的系统上安装了 MySQL。但我不明白为什么会这样。请有人帮助我。

# javascript - 如何使用 javascript 在 html 中查找日期时间格式？

> ID：12119501
> 
> 赞同：0
> 
> 时间：2012-08-25T05:40:28.877
> 
> 标签：javascript, asp.net, html

我有一个页面，我想在其中查找所有日期时间值。

我想找到所有日期时间值并将它们从[回历日期](http://en.wikipedia.org/wiki/Hijri_year)时间转换为标准日期时间。

如何使用 javascript 找到日期时间值并进行更改？

例如：

我想要这段代码在 html 中

```
<td class="ms-vb2"><nobr>18/02/1391 14:07</nobr></td> 
```

我想找到日期时间值 (18/02/1391 14:07)，然后使用 javascript 将其更改为 (14/08/2012 10:15)。

**编辑**

我使用此代码并找到所有日期值

```
var re =  /[0-3]\d\/[01]\d\/\d{4}/g;
var dates = $("body").text().match(re); 
```

如何将其替换为新日期？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:25:20.430

由于 DOM 的工作方式，我建议将您的日期时间值包装在一个特定的标签中（可能带有一个特定的类名）。因此`<nobr>08/02/1391 14:07</nobr>`，您可以拥有`<span class="datetime">8/02/1391 14:07</span>`. 这将使您更容易找到您的日期，因为您可以使用 DOM 来识别带有日期时间的标签。

您可以使用 jQuery 的选择器来获取值....

```
$('.datetime').html() 
```

...或者你可以使用 vanilla Javascript。

```
document.getElementsByClassName('datetime') 
```

这是查找所有日期时间的第一步。之后，对于每个日期时间，您需要通过调用`split()`函数将其转换为可用格式，该函数应根据分隔符将字符串拆分为数组。默认分隔符是空格，因此您可能必须重复此操作以删除斜杠。所以对于 jQuery，你有...

```
var mydate = $('.datetime').html()
var mydateArray = mydate.split(); // This doesn't deal with nested elements, since it's an example. 
```

...在 vanilla Javascript（javanillascript ???）中，您将拥有：

```
var mydate = document.getElementsByClassName('datetime')
var mydateArray = mydate.split(); // This doesn't deal with nested elements, since it's an example. 
```

将日期时间字符串拆分为可用块后，您需要将数学应用于所有这些块。这是此解决方案中最复杂的部分。

但是，一旦您计算了日期并重新格式化以供显示，您就可以简单地在 HTML 中设置它们。在 jQuery 中：

```
var myNewDate = convertHijriToStandard(date);
$('.datetime').html(myNewDate); 
```

请注意，如果您正在寻找最大的浏览器支持，我建议您使用 jQuery。您的日期转换可能不使用 jQuery，但如果您支持旧浏览器，则处理 DOM 元素可能会容易得多。

祝你好运。我知道这不是一个完整的解决方案，但希望它可以帮助您入门。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:22:17.313

查看[http://www.regular-expressions.info/dates.html](http://www.regular-expressions.info/dates.html)我们可以这样做来查找从 1300 到包括 1400 的所有日期：

```
var reg = /^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](13|14)\d\d$/g 
```

所以你可以做

```
var dates = document.body.innerHTML.match(reg); 
```

但是如何从中转换：[http](http://en.wikipedia.org/wiki/List_of_Islamic_years#Modern) ://en.wikipedia.org/wiki/List_of_Islamic_years#Modern我将留给塔木德学者

reg 并不完美 - 似乎有人需要让它更好地工作。如果它有效，您可以在 jQuery ( [DEMO](http://jsfiddle.net/mplungjan/4gHLh/) )中执行此操作

```
var reg = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](13|14)\d\d \d\d:\d\d/g;
$(function() {
  var dates = $("body").text().match(reg);
  console.log(dates);  
  $.each(dates,function(date) {
      console.log(date);
      $("td:contains("+date+")").each(function() {
          $(this).text($(this).text().replace(date,"new date"));
      });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:43:35.340

您将从使用以下特定元素的特定元素开始递归所有文本节点（使用~~mplungjan 的~~简单正则表达式）：

```
// Recursively replace text in text nodes of elements
function replaceText(el) {

  var node, nodes = el.childNodes;
  var re = /[0-3]\d\/[01]\d\/\d{4} [012]\d:[012]\d/g;
  var t;

  for (var i=0, iLen=nodes.length; i < iLen; i++) {
    node = nodes[i];

    // Replace content of text nodes
    if (node.nodeType == 3) {
      t = node.data.match(re);

      // See if has a date
      if (t) {

        // Iterate over members of t, replacing Hijri dates with Gregorian dates
        // convertDate should be a function to do the conversion
        for (var j=0, jLen=t.length; j<jLen; j++) {
          node.data = node.data.replace(t[j], convertDate(t[j])); 
        }
      }

    // Recurse over elements to get at child text nodes
    } else if (node.childNodes) {
      replaceText(node);
    }
  }
} 
```

如果打算完成整个文档，请将 body 元素传递给它。

# web-services - 调用 web 服务时传递参数

> ID：12119509
> 
> 赞同：0
> 
> 时间：2012-08-25T05:41:32.073
> 
> 标签：web-services, windows-phone-7

调用Web服务时如何传递参数？

我的 C# 代码是：

```
public partial class CityBlog : PhoneApplicationPage
{

     string str = "";
    public CityBlog()
    {
        InitializeComponent();

        WebClient wc = new WebClient();
        wc.DownloadStringAsync(new Uri("http://kcspl.in/nadalapp.asmx/GetCityBlog"));
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
    }
    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {

        str = e.Result.Replace("</string>", "");
        str = str.Replace("<?xml version=\"1.0\" encoding=\"utf-8\"?>", "");
        str = str.Replace("<string xmlns=\"http://tempuri.org/\">", "");

    } 
```

请参见上面的 Uri 语句。那个 Uri 是我的网络服务链接，`GetCityBlog`也是我的网络服务类，但在这个网络服务中，我想添加类似`id=1`. 如何添加此类参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:41:46.010

您可以在 URL 本身中添加参数，也可以将参数添加为发布参数或标题信息。您的 Web 服务应该能够在收到此类请求时读取此类信息。您可以在 Google 上搜索有关将参数传递到 URL 的 GET、POST 或 HEADERS。然后你会找到一个简单的方法。希望这可以帮助您完成任务

# php - Codeigniter 查看未定义的变量

> ID：12119513
> 
> 赞同：0
> 
> 时间：2012-08-25T05:42:40.780
> 
> 标签：php, codeigniter

我收到以下错误：未定义的变量：我的 home_view 控制器中的部分。我在 home_view.php 中包含了第 17 行，我很确定我正确地传递了所有变量。为什么它给我这个错误？

* * *

```
 <?php

    class Student extends CI_Controller  {

    function index()
          {
            $this->load->model('student_model');
            $data['section']= $this->student_model->browse_section();
            $this->load->view('home_view',$data);
          }

       } 
```

## 学生模型.php

```
<?php

Class Student_Model extends CI_Model 
{

function browse_section() 
    {

    $q = $this->db->get('section');

        if($q->num_rows > 0 )
        {
        foreach ($q ->result() as $row )
                {
                $data[] = $row ;
                }
        }

        return $data;
    }

} 
```

## Home_view.php

```
 <?php foreach($section as $r){
    echo '<h1>' . $r->Time . '</h1>' ; 
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:15:31.200

让我向您解释您遇到的错误并稍后更正

让我们从模型上的查询开始

```
<?php

Class Student_Model extends CI_Model 
{

function browse_section() 
    {

    $q = $this->db->get('section');

        if($q->num_rows > 0 )
        {
        foreach ($q ->result() as $row )
                {
                $data[] = $row ;
                }
        }

        return $data;
    }

} 
```

很明显，如果来自数据库的结果集是 EMPTY，那么 $data 将不会被提供任何值，并且返回给控制器`function browse_section()`的值为`return $data;`NULL，如果传递给视图，它将 100% 创建一个错误，因为没有什么可以环形。

这里有一些解决问题的建议 1.) 在将返回值分配给函数之前，请确保它具有默认值，因此分配此行将`$data = array(); on the first line in browse_section model function will do.`确保您返回一个空数组，该数组可以传递给控制器​​，然后在视图中如果不返回任何值。2.) 我建议您使用 result_array() 来提取数据库记录 w/c 更好地用于数组操作。

* * *

关于控制器没有什么需要修改的。

__ 关于视图，如果您决定`result_array()`在模型上使用，您可以将 foreach 更改为，但这是可选的

```
 <?php foreach($section as $key => $value){
    echo '<h1>' . $value['Time'] . '</h1>' ; 
}
?> 
```

但一定要放

```
if(!is_null($section) && count($section) > 0) { 
//foreach here
} 
```

这条线一定会救你！

快乐编码我的朋友！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:33:57.580

问题是这一行：

```
$data['section']= $this->student_model->browse_section(); 
```

不仅您没有`$data`定义，而且您也没有`section`定义键。请查看[数组的文档](http://php.net/manual/en/language.types.array.php#example-87)：

> **笔记：**
> 
> **尝试访问尚未定义的数组键与访问任何其他未定义变量相同**：将发出 E_NOTICE 级别的错误消息，结果将为 NULL。

我不确定您要实现什么，但这可能足以修复您在`Student`控制器中的代码：

```
$this->load->model('student_model');
$data = array();
$data['section']= $this->student_model->browse_section();
$this->load->view('home_view',$data); 
```

要修复模型中的零件，请遵循 KDaker 的提示。

另请阅读 PHP 中的未定义变量，并可能熟悉面向对象的编程。这可能会帮助您避免将来出现类似和更重要的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T05:53:04.447

你的`$data`变量是未定义的。您需要在模型中的 if 函数之前定义它：

```
function browse_section() 
{

$q = $this->db->get('section');
$data = array(); //define the data array.

    if($q->num_rows > 0 )
    {
    foreach ($q ->result() as $row )
            {
            $data[] = $row ;
            }
    }

    return $data;
} 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T06:13:36.480

*   不需要模型中的那个 foreach 循环。只需返回 $q->result()。
*   num_rows 是一种方法，因此您的代码应如下所示： $q->num_rows() 而不是 $q->num_rows
*   尝试在您的开发环境中启用 php 显示错误，这将帮助您在几分钟内修复此类错误。

我希望这些要点对您有进一步的帮助。

# mysql - 使用 mysql 或 bash 仅打印最近 30 天

> ID：12119521
> 
> 赞同：0
> 
> 时间：2012-08-25T05:43:38.530
> 
> 标签：mysql, bash

我不是这方面的专家，但我花了一些时间来打印这个命令

```
echo "SELECT datetime(last_visit_date/1000000,'unixepoch'),
url FROM moz_places WHERE last_visit_date NOT NULL AND url NOT NULL 
ORDER BY last_visit_date DESC;"  | sqlite3 places.sqlite >> SOMEFILE 
```

输出：

```
2012-08-10 11:26:00|http://support.mozilla.org/questions/835204
2012-08-10 11:25:46|http://support.mozilla.org/en-US/questions/867052
2012-08-09 23:58:43|http://joecristianospizza.com/locations.htm
2012-08-09 23:56:14|http://joecristianospizza.com/ 
```

（注意我也可以在 unixtimestamp 中打印）

我不知道如何只打印 30 天...试过：

```
WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY). etc. no luck! 
```

帮助！我也可以用 bash 来做，这些列表将在一个临时文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T05:47:42.977

尝试

```
WHERE datetime(last_visit_date/1000000,'unixepoch') >= 
                      DATETIME('now', '-30 DAY') 
```

# ios - PDF 和 MFMailComposeViewController

> ID：12119524
> 
> 赞同：4
> 
> 时间：2012-08-25T05:44:11.860
> 
> 标签：ios, pdf, mime-types, mfmailcomposeviewcontroller, email-attachments

编写允许用户生成 pdf 并发送的应用程序部分。似乎工作正常。发送的 PDF 在 MAC 上可以正常打开，但在 iPhone 上它只是不断加载并且永远不会打开。在 Ray Wenderlich 教程的帮助下创建了一个 pdf 文档，并通过带有 MFMailComposeViewController 实例的模态视图控制器将其发送出去。WTF我做错了吗。

更新：PDF 也可以在 Ipad 上正常打开。问题可能出在创建 PDF 的代码中吗？我也有点不清楚我是否真的在创建一个持续存在的 PDF，然后在同名文件的每个新版本之后被替换，或者我是否以某种方式欺骗编译器认为文档正在被存储以便我可以发送它尽可能少的代码。

对此的任何想法将不胜感激。

查看代码：

```
if ([MFMailComposeViewController canSendMail])

{
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"mail test"];

NSString* fileName = @"Invoice.PDF";
NSArray *arrayPaths =
NSSearchPathForDirectoriesInDomains(
                                    NSDocumentDirectory,
                                    NSUserDomainMask,
                                    YES);
NSString *path = [arrayPaths objectAtIndex:0];
NSString* pdfFileName = [path stringByAppendingPathComponent:fileName];
NSData *myData = [NSData dataWithContentsOfFile:pdfFileName];

[picker addAttachmentData:myData mimeType:@"application/pdf" fileName:@"the PDF"];
[self presentModalViewController:picker animated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T06:44:51.680

试试这个方法

```
 [picker addAttachmentData:myData mimeType:@"application/pdf" fileName:@"thePDF.pdf"]; 
```

顺便说一句，如果您在发送之前生成 PDF 内容，则无需保存为真正的 pdf 文件，只需发送 PDF 数据即可

# c# - 在我的 asp.net 中只使用一次代码

> ID：12119525
> 
> 赞同：3
> 
> 时间：2012-08-25T05:44:46.287
> 
> 标签：c#, asp.net

我有一个类，有一个代码，每次网站启动时都会执行这个类。

我想在我的网站启动时只使用一次运行类。

我能做些什么...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T05:45:58.403

您可以将代码放入`Application_Start`事件中`global.asax`。在你的`global.asax`文件中

```
void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        //Yourclass.YourMethod();

    } 
```

该代码只会在应用程序启动时执行一次。

您可能想查看：[ASP.NET 应用程序生命周期](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)

# android - 更新我的安卓应用程序

> ID：12119527
> 
> 赞同：2
> 
> 时间：2012-08-25T05:44:58.217
> 
> 标签：android

> **可能重复：**
> [有没有办法在 Android 上自动更新应用程序？](https://stackoverflow.com/questions/3057771/is-there-a-way-to-automatically-update-application-on-android)

如何让 android 应用程序检查更新并在现有应用程序上安装更新版本而无需卸载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:54:41.607

在您的清单中，您需要提及

版本代码可以说 1

以及更高版本，您将其更新为大于 1 的数字，表示其为更新

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.package.name"
      android:versionCode="2"
      android:versionName="1.1"> 
```

在这里阅读更多[http://developer.android.com/tools/publishing/versioning.html](http://developer.android.com/tools/publishing/versioning.html)

如果它在市场上，您无需担心检查部分。只需在市场上上传带有更新版本代码的新 apk 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:55:52.050

当您向其发布应用程序时，Google Play 会自动为您执行此操作。

用户将获得“有新更新可用”的通知，并在他/她准备好时安装更新，或者他们将配置 Google Play 以自动安装新更新。

并且无需卸载旧应用程序。

# java - 如何在应用程序中查看上一个屏幕

> ID：12119528
> 
> 赞同：0
> 
> 时间：2012-08-25T05:44:57.657
> 
> 标签：java, swing, jframe, jcomponent, cardlayout

我的应用程序包含许多屏幕。我想查看之前加载的同一个屏幕。如果我已经在该屏幕中输入了一些数据，那么也应该显示相同的数据。请告诉我如何处理这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T06:44:05.307

> ..屏幕先前加载

*   将一个屏幕的每一组组件放入一个`JPanel`
*   给一个`JFrame`a`CardLayout`并将每个屏幕添加到它。

然后在每个屏幕上向后或向前翻转很简单。

# iphone - 如何验证 UITextView 以使其不允许像“&”这样的特殊字符？

> ID：12119532
> 
> 赞同：1
> 
> 时间：2012-08-25T05:46:00.903
> 
> 标签：iphone, objective-c

我有一些 UITextViews。用户将在哪里输入数据，该数据将使用 Web 服务提交到数据库。数据库显示错误，带有特殊字符，如“&”。因此，当用户尝试使用此特殊字符提交数据时，我想阻止用户，或者应该在提交数据时出现消息“我的意思是如何验证该文本视图？如果有人知道，请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T05:57:06.833

第一种方式，提到所有接受的字符，如下面的示例代码，如果发现超出范围的字符，则显示消息。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLKMNOPQRSTUVWXYZ0123456789"] 反转集];
    if ([textField.text rangeOfCharacterFromSet:set].location != NSNotFound)
    {
        NSLog(@"这个字符串包含非法字符");
        返回错误；
    }
    返回真；
}

```

或者，使用正则表达式并以另一种方式做同样的事情......

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if ([textField.text isMatchedByRegex:@"[^a-zA-Z0-9]"])
    {
        NSLog(@"这个字符串包含非法字符");
        返回错误；
    }
    返回真；
}

```

# php - php登录脚本不起作用并在脚本中停止

> ID：12119536
> 
> 赞同：0
> 
> 时间：2012-08-25T05:46:20.863
> 
> 标签：php, phpmyadmin

嗨，我是 php 和 mysql 的新手，我正在使用一个网站，我正在阅读一些关于如何创建登录页面的教程，当我尝试创建自己的登录页面时，似乎它在脚本中停止并且没有继续登录成功后的下一页

这是代码

```
master1.php
<form action="loginscript.php" method="post" name="loginform">
<table class="logintable">
<!-- username-->
<tr>
<td class="tdalignright"><strong>
Username:</strong>
</td>
<td>
<input type="text" name="uname" id="uname"/>
</td>
</tr>
<!-- password -->
<tr>
<td class="tdalignright"><strong>
Password:</strong>
</td>
<td>
<input type="password" name="pword" id="pword"/>
</td>
</tr>
<!-- login button -->
<tr>
<td>
</td>
<td class="tdalignright">
<input type="submit" name="Submit" value="Login" />
</td>
</tr>

</table> 
</form> 
```

这是登录脚本

```
loginscript.php
<?php

$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="seelsdb"; // Database name 
$tbl_name="tblteacher"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$uname=$_POST['uname']; 
$pword=$_POST['pword']; 
// To protect MySQL injection (more detail about MySQL injection)
$uname = stripslashes($uname);
$pword = stripslashes($pword);
$uname = mysql_real_escape_string($uname);
$pword = mysql_real_escape_string($pword);
$sql="SELECT * FROM $tbl_name WHERE teacherEmail='$uname' and teacherPass='$pword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("uname");
session_register("pword"); 
header("location:schedule.php");
}
else {
echo "Wrong Username or Password";
}

?> 
```

这是成功登录后的下一页

```
schedule.php

<?php
session_start();
if(!session_is_registered(uname)){
header("location:master1.php");
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
LOGIN SUCCESSFUL
</body>
</html> 
```

我似乎无法追踪错误，希望你们能帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:59:52.687

您的登录脚本应该是：

```
$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="seelsdb"; // Database name 
$tbl_name="tblteacher"; // Table name 

// Connect to server and select databse.
mysql_connect($host, $username, $password) or die("cannot connect"); 
mysql_select_db($db_name)or die("cannot select DB");

// username and password sent from form 
$uname=$_POST['uname']; 
$pword=$_POST['pword']; 
// To protect MySQL injection (more detail about MySQL injection)
$uname = stripslashes($uname);
$pword = stripslashes($pword);
$uname = mysql_real_escape_string($uname);
$pword = mysql_real_escape_string($pword);
$sql="SELECT * FROM $tbl_name WHERE teacherEmail='".$uname."' and teacherPass='".$pword."'";
$result=mysql_query($sql);
if(!$result)
{
 echo 'Mysql did not respond to query'.mysql_error();
}
// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("uname");
session_register("pword"); 
header("location:schedule.php");
}
else {
echo "Wrong Username or Password";
}

?> 
```

但是，我强烈建议您选择[MySQLi](http://php.net/manual/en/book.mysqli.php)而不是 mysql_* 函数。如果您觉得舒服，也请参阅[PDO](http://php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:30:40.300

我已经解决了...我只是用 $_SESSION($uname)=$uname 和 $_SESSION($pword)=$pword 替换了 session_register("uname") 和 session_register("pword")

# ios - 使用 arc 使 NSTimer 无效的麻烦 - IOS

> ID：12119538
> 
> 赞同：2
> 
> 时间：2012-08-25T05:46:47.813
> 
> 标签：ios, nstimer

这个问题已经在堆栈溢出时被问死了，我已经看到了很多答案，但不知何故我仍然遇到了麻烦。

无论如何，我分配了一个 NSTimer，因为在我看来确实加载了：

```
NSTimer *oneSecondTicker = [[NSTimer alloc] init]; 
oneSecondTicker = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabelsWithOneSecondTicker) userInfo:nil repeats:YES]; 
self.dateForTimeLabel = [NSDate date]; 
```

作为选择器的方法是：

```
-(void) updateLabelsWithOneSecondTicker {
    if(self.dateForTimeLabel != nil)  
    {
        self.lblTime.text = [NSString stringWithFormat:@"%f", fabs([self.dateForTimeLabel timeIntervalSinceNow])];
    }
} 
```

这种方法基本上每秒更新一个标签，给我一个计时器/秒表之类的东西。

我还有一个开始/暂停按钮，当按下它暂停时：

```
[oneSecondTicker invalidate];
oneSecondTicker = nil; 
```

如果按下按钮重新开始，方法是：

```
NSTimer *oneSecondTicker = [[NSTimer alloc] init];
oneSecondTicker = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabelsWithOneSecondTicker) userInfo:nil repeats:YES];    

self.dateForTimeLabel = [NSDate date]; 
```

我不给计时器调用保留，它没有属性，也没有合成。然而，它在接口中被声明。

为了解决这个问题，每次按下暂停/开始按钮都会发生什么，计时器不会失效，时间标签会越来越快地更新，让我相信由于某种原因存在多个计时器。（显然，在这些方法中还没有找到真正的计时器的功能，这只是让我的 NSTimer 工作的测试）。

怎么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T05:59:39.003

你写了这个：

```
NSTimer *oneSecondTicker = [[NSTimer alloc] init]; 
```

该行创建了一个**局部**变量。它不会**设置**您在界面中声明的属性。`oneSecondTicker`该行还创建了一个计时器，当您重新分配指向您创建的计时器时，您会立即在下一行中将其销毁`scheduledTimerWithTimeInterval:`。这是一个初学者错误，表明您需要了解指针的工作原理。

无论如何，您正在使用`scheduledTimerWithTimeInterval:...`. 这意味着计时器在运行循环中自动调度自身。当一个定时器被安排在一个运行循环中时，运行循环会保留这个定时器。这就是为什么（假设您使用 ARC）即使您发布了对它的引用，计时器仍然存在。

您需要将计时器存储在实例变量中。我假设您使用的是 Xcode 4.4 或更高版本，因此该属性正在自动合成。如果您声明了 like 属性`@property (nonatomic, strong) NSTimer *oneSecondTicker`，那么您可以像这样创建计时器：

```
self.oneSecondTicker = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabelsWithOneSecondTicker) userInfo:nil repeats:YES]; 
```

当你想使它失效时，你可以这样说：

```
[self.oneSecondTicker invalidate];
self.oneSecondTicker = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T05:59:40.973

您没有保留 timer 变量。

删除这个：

```
NSTimer *oneSecondTicker = [[NSTimer alloc] init]; 
```

将您的计时器移至类属性为`@property (strong)NSTimer *oneSecondTicker;`

用这个：

```
self.oneSecondTicker = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabelsWithOneSecondTicker) userInfo:nil repeats:YES]; 
```

重新启动计时器时再次使用 self.oneSecondTicker。

# mysql - MySql 存储日期，如 YYYY/MM/DD

> ID：12119540
> 
> 赞同：1
> 
> 时间：2012-08-25T05:47:02.033
> 
> 标签：mysql

我有这样的数据库结构

```
name          |   birthdate
---------------------------------
varcahr(255)  |    date 
```

我正在使用 jquery date pickeer '1985/08/22' 像这样在 (yyyy/mm/dd) 中插入日期

但 Mysql 将其存储为 '1985-08-22'

有什么方法可以存储像“1985/08/22”这样的日期，我想存储斜杠而不是“-”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:52:17.763

您应该以本机日期格式存储数据，以提高计算效率等。您可以控制进入表格的日期格式并在查询器中从中选择。例如，您可以使用 str_to_date 函数插入数据：

```
INSERT into table1(birthdate) 
VALUES STR_TO_DATE('2009/01/01','%m/%d/%y') 
```

要选择日期，您可以使用

```
SELECT DATE_FORMAT(birthdate, '%m/%d/%y') 
FROM table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T05:54:05.903

MySQL 不会**将**日期存储为特定字符串。它**只代表**这样的日期。请参阅[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)以显示特定的日期表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T05:49:15.797

```
INSERT INTO table (name, birthdate) VALUES(
            'mit', STR_TO_DATE('2009/03/08', '%Y/%m/%d')); 
```

# java - Android 版 Facebook 集成无法始终如一地工作

> ID：12119546
> 
> 赞同：1
> 
> 时间：2012-08-25T05:48:00.230
> 
> 标签：java, android, facebook, race-condition, facebook-android-sdk

我正在尝试将 Facebook 登录与我的应用程序集成。这很简单：用户在我的登录屏幕上单击一个按钮，我从 Facebook 获取他们的电子邮件和其他信息，然后我将这些信息提交到我的网站并让他们成为一个帐户（我不使用密码，所以这是可行的）。

但是，登录按钮的工作时间只有 1/3。其他时候它启动 Facebook 活动，我在 Facebook 屏幕上看到一个加载微调器，然后应用程序退出到我的主屏幕。没有强制关闭通知，没有 logcat 错误，什么都没有。

这是我的登录活动的代码（与 Facebook 相关的部分）：

```
package com.taptag.beta;

/** IMPORTS REMOVED FOR BREVITY **/

public class FacebookLogInActivity extends NetworkActivity {
    public static final String APP_ID = "OMITTED FOR PRIVACY";
    public static final String LOG_OUT = "Log Out";

    Facebook facebook = new Facebook(APP_ID);

    private AsyncFacebookRunner mAsyncRunner;
    private Handler mHandler;
    private SharedPreferences mPrefs;
    private Button mLoginButton;
    private static final String[] PERMISSIONS = { "email" };

    private EditText firstName;
    private EditText lastName;
    private EditText email;
    private Button signupButton;

    private TextView errorView;
    private ProgressBar facebookSpinner;
    private ProgressBar signupSpinner;

    //Taken from mkyong
    private static final String EMAIL_PATTERN = "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";
    private Pattern emailPattern;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.facebook_main);

        mPrefs = getSharedPreferences("TapTag", MODE_PRIVATE);
        Integer userId = mPrefs.getInt("user_id", -1);

        mLoginButton = (Button) findViewById(R.id.loginButton);

        // Facebook properties
        mAsyncRunner = new AsyncFacebookRunner(facebook);
        mHandler = new Handler();
        // Get existing saved session information
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        errorView = (TextView) findViewById(R.id.signupError);
        facebookSpinner = (ProgressBar) findViewById(R.id.facebookSpinner);
        signupSpinner = (ProgressBar) findViewById(R.id.signupSpinner);

        hideSpinners();
        errorView.setVisibility(View.GONE);

        emailPattern = Pattern.compile(EMAIL_PATTERN);
        firstName = (EditText) findViewById(R.id.signupFirstName);
        lastName = (EditText) findViewById(R.id.signupLastName);
        email = (EditText) findViewById(R.id.signupEmail);
        signupButton = (Button) findViewById(R.id.signupButton);

        signupButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                boolean isValid = validateInputs();
                if (isValid) {
                    SignupTask signupTask = new SignupTask();
                    signupTask.execute(null, null);
                }
            }
        });

        mLoginButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (!facebook.isSessionValid()) {
                    logIn();
                } else {
                    logOut();
                }
            }
        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    @Override
    public void onResume() {
        super.onResume();
        // Extend the session information if it is needed
        //if (facebook != null && !facebook.isSessionValid()) {
            facebook.extendAccessTokenIfNeeded(this, null);
        //}
        if (LOG_OUT.equals(getIntent().getAction())) {
            logOut();
        } else  {
            Integer userId = mPrefs.getInt("user_id", -1);
            if (userId > 0) {
                continueToHomeScreen();
            }
        }
    }

    @Override
    public void onBackPressed() {
        //Do nothing, don't want people getting back into the app
    }

    /**
     * Validate the signup form.  True if valid, false otherwise.
     * @return
     */
    public boolean validateInputs() {
        /** NOT RELEVANT **/
    }

    private FacebookUserInfo userFromForm() {
        /** NOT RELEVANT **/
    }

    private boolean validateFirstName() {
        /** NOT RELEVANT **/
    }

    private boolean validateLastName() {
        /** NOT RELEVANT **/
    }

    private boolean validateEmail() {
        /** NOT RELEVANT **/
    }

    public void hideSpinners() {
        facebookSpinner.setVisibility(View.GONE);
        signupSpinner.setVisibility(View.GONE);
    }

    public void continueToHomeScreen() {
        Intent toHomeScreen = new Intent(FacebookLogInActivity.this, HomeScreenActivity.class);
        FacebookLogInActivity.this.startActivity(toHomeScreen);
    }

    public void logIn() {
        facebookSpinner.setVisibility(View.VISIBLE);
        mLoginButton.setVisibility(View.GONE);
        facebook.authorize(FacebookLogInActivity.this, PERMISSIONS, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();
                requestUserData();
            }

            @Override
            public void onFacebookError(FacebookError e) {
                mLoginButton.setVisibility(View.VISIBLE);
                hideSpinners();

            }
            @Override
            public void onError(DialogError e) {
                mLoginButton.setVisibility(View.VISIBLE);
                hideSpinners();
            }
            @Override
            public void onCancel() {
                mLoginButton.setVisibility(View.VISIBLE);
                hideSpinners();
            }
        });
    }

    public void logOut() {
        /** NOT RELEVANT **/
    }

    public void requestUserData() {
        Bundle params = new Bundle();
        params.putString("field name", "name");
        params.putString("field email", "email");

        mAsyncRunner.request("me", params, new BaseRequestListener() {
            @Override
            public void onComplete(final String response, final Object state) {
                FacebookUserInfo facebookUserInfo = TapTagAPI.userInfoFromFacebook(response);
                UserFetchResponse userFetchResponse = TapTagAPI.fetchUser(facebookUserInfo);
                if (!userFetchResponse.hasError()) {
                    commitUserInfo(userFetchResponse);
                    continueToHomeScreen();
                } else {
                    mHandler.post(new Runnable() {
                        @Override
                        public void run() {
                            hideSpinners();
                            mLoginButton.setVisibility(View.VISIBLE);
                        }
                    });
                }
            }
        });
    }

    public void commitUserInfo(UserFetchResponse userFetchResponse) {
        SharedPreferences.Editor editor = mPrefs.edit();
        editor.putInt("user_id", userFetchResponse.getId());
        editor.putString("user_name", userFetchResponse.getFirst() + " " + userFetchResponse.getLast());
        editor.commit();
    }

    public class SignupTask extends AsyncTask<Void, Void, UserFetchResponse> {
        @Override
        protected void onPreExecute() {
            signupSpinner.setVisibility(View.VISIBLE);
            signupButton.setVisibility(View.GONE);
        }

        @Override
        protected UserFetchResponse doInBackground(Void... arg0) {
            FacebookUserInfo user = userFromForm();
            UserFetchResponse response = TapTagAPI.fetchUser(user);
            return response;
        }

        @Override
        protected void onPostExecute(UserFetchResponse response) {
            if (response.success()) {
                commitUserInfo(response);
                continueToHomeScreen();
            } else {
                errorView.setVisibility(View.VISIBLE);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:33:56.937

在下面写登录功能而不是您的登录功能，它将解决您的问题。

```
public void logIn() {
    facebookSpinner.setVisibility(View.VISIBLE);
    mLoginButton.setVisibility(View.GONE);
    facebook.authorize(FacebookLogInActivity.this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString("access_token", facebook.getAccessToken());
            editor.putLong("access_expires", facebook.getAccessExpires());
            editor.commit();
            requestUserData();
        }

        @Override
        public void onFacebookError(FacebookError e) {
            mLoginButton.setVisibility(View.VISIBLE);
            hideSpinners();
        }

        @Override
        public void onError(DialogError e) {
            mLoginButton.setVisibility(View.VISIBLE);
            hideSpinners();
        }

        @Override
        public void onCancel() {
            mLoginButton.setVisibility(View.VISIBLE);
            hideSpinners();
        }
    });
} 
```

# visual-studio-2010 - C# 通过代码而不是 app.config 配置 LoadFromRemoteSources？

> ID：12119548
> 
> 赞同：2
> 
> 时间：2012-08-25T05:48:25.633
> 
> 标签：visual-studio-2010, c#-4.0, app-config, remoteobject

我目前有一个 app.config 具有以下配置值：

```
<configuration>
 <runtime>
  <loadFromRemoteSources enabled="true" />
 </runtime>
</configuration> 
```

到目前为止，我已经能够从我的 app.config 中删除所有其他内容，并仅使用纯 C# 代码进行配置，除了`loadFromRemoteSources`.

有没有办法`loadFromRemoteSources`通过 C# 代码启用？

我了解拥有 app.config 的利弊，但我不想拥有一个。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T07:29:50.690

我找不到任何`loadFromRemoteSources`在代码中启用的方法，如果有，我怀疑它是否允许您在创建应用程序域后将其应用到应用程序域。但我可能是错的！

您可以改为使用“ [CAS 策略的更多隐式使用：loadFromRemoteSources](http://blogs.msdn.com/b/shawnfa/archive/2009/06/08/more-implicit-uses-of-cas-policy-loadfromremotesources.aspx) ”中描述的技术。他们建议创建一个新的应用程序域`PermissionState.Unrestricted`，并将远程程序集加载到那里。`NotSupportedException`当您尝试加载远程程序集时，不会抛出以这种方式创建的应用程序域。

他们将这种技术描述为当您只想加载完全信任的*一些*远程程序集，因此不想`loadFromRemoteSources`在您的 app.config 中启用时的解决方案。您可以使用相同的技术，但将*整个程序*加载到新的应用程序域中。

这是一个示例程序，它在执行时会立即创建一个新的应用程序域`PermissionState.Unrestricted`并在其中运行：

```
public class Program : MarshalByRefObject
{
    public Program()
    {
        Console.WriteLine("Program is running.");
        Assembly remoteAssembly = Assembly.LoadFrom(
            @"\\server\MyRemoteAssembly.dll");
        IAddIn addIn = (IAddIn)remoteAssembly.CreateInstance("MyAddIn");
        addIn.Initialize();
    }

    static void Main()
    {
        // This program needs to run in an application domain with
        // PermissionState.Unrestricted, so that remote assemblies can be loaded
        // with full trust. Instantiate Program in a new application domain.
        PermissionSet permissionSet =
            new PermissionSet(PermissionState.Unrestricted);
        AppDomainSetup setup = new AppDomainSetup();
        setup.ApplicationBase =
            AppDomain.CurrentDomain.SetupInformation.ApplicationBase;
        AppDomain appDomain = AppDomain.CreateDomain(
            "Trusted Domain", null, setup, permissionSet);
        appDomain.CreateInstance(
            Assembly.GetExecutingAssembly().FullName, "Program");
    }
}

public interface IAddIn
{
    void Initialize();
} 
```

这是**MyRemoteAssembly.dll**的源代码，您可以将其放在网络共享中：

```
public class MyAddIn : IAddIn
{
    public void Initialize()
    {
        Console.WriteLine("Hello from a remote assembly!");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-11-17T10:56:59.370

我认为解决问题的最佳方法是编辑 app.config 文件

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <runtime>
    <loadFromRemoteSources enabled="true"/>
  </runtime>
</configuration> 
```

你必须添加

```
 <runtime>
    <loadFromRemoteSources enabled="true"/>
  </runtime> 
```

问题就解决了。此解决方案记录在 MSDN

# dart - 如何在 Dart 中使用 CompositeView 创建可滚动的 div？

> ID：12119550
> 
> 赞同：1
> 
> 时间：2012-08-25T05:49:09.860
> 
> 标签：dart

我正在尝试使用 Dart 中的 ui_lib 中的 CompositeView。我想在可以上下滚动的 div 中显示内容。到目前为止，我没有运气，也没有太多的样本。

提前致谢，user864555

**编辑：**

我走得更远。现在，我显示了滚动条，但内容的大小被视为窗口的大小。所以，是的，我可以看到上下滑动并看到更多内容，但它会弹回开始时的原始位置。

```
var v = new CompositeView('example', true, true, true, true);
for (var i = 0; i < 20; i++) {
    v.addchild(new View.html("<div><h1>Some text</h1></div>"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:36:30.780

诀窍是确保内容的容器具有窗口的大小。为此，您需要添加一些 CSS：

```
html {
  height: 100%;
  width: 100%;
}

body {
  margin: 0 0 0 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
} 
```

这是重要的一点，你必须给你的容器 div 这个：

```
.example {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
} 
```

# php - 比较对象中的值与PHP中的字符串

> ID：12119552
> 
> 赞同：0
> 
> 时间：2012-08-25T05:49:42.137
> 
> 标签：php, string, object, compare

我将对象中的字符串与标准变量中的字符串进行比较，即使它们在回显它们时“看起来”相同，但 if 语句永远不会发现它们匹配。此外，这两个值都是没有数字的文本字符串。

```
if($users[$x]->get_employee_id() == strtolower($employee_id)) {
    $found = true;
} 
```

我在这里想念什么？

（我也试过这个`strcmp`功能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:58:37.773

```
Object: "abensouj " 
String: "abensouj" 
```

对象的 id 末尾有那个字符......摆脱它。如果您无法编辑对象，调用[`trim()`](http://php.net/manual/en/function.trim.php)可能会起作用。

```
if (trim($users[$x]->get_employee_id()) == strtolower($employee_id)) { ... 
```

# ruby - Textmate 不使用最新版本运行 ruby

> ID：12119556
> 
> 赞同：2
> 
> 时间：2012-08-25T05:50:24.410
> 
> 标签：ruby, textmate

我已将我的 ruby​​ 更新到 1.9.3。

但是，当我在 Textmate 中运行我的 ruby​​ 代码时，它仍然运行 1.8.7 版本。

更具体地说，这是我的测试代码，只有一行：

```
#!/usr/bin/env ruby -v 
```

在 Textmate (command + R) 中运行时，结果为：

```
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

在命令行（./test.rb）中运行时，结果为：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.0.0] 
```

那么如何编辑我的 Textmate 以支持最新的 ruby​​？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:54:14.807

尝试编辑 TM_RUBY shell 变量以指向您新安装的版本。根据文档，它应该在 /usr/local 下的某个地方（很可能是 /usr/local/bin/ruby）。

您可以通过在终端窗口中键入以下内容来查找 ruby​​ 安装的位置：

```
$ which ruby
/usr/local/bin/ruby 
```

然后执行以下操作以验证版本

```
$ ruby -v 
```

一旦你有了正确的 ruby​​ 路径，在 Textmate 中，双击 TM_RUBY shell 变量的“值”并输入 1.9.3 安装的路径。

# ember.js - 如何在重新渲染 Ember 视图的一部分时运行代码？

> ID：12119561
> 
> 赞同：4
> 
> 时间：2012-08-25T05:51:49.910
> 
> 标签：ember.js

我的目标是有一个 Facebook like 按钮，可以有条件地出现在 Ember 视图中。我的模板是：

```
{{#if condition}}
    Click Like: <div class="fb-like fb_edge_widget_with_comment fb_iframe_widget" data-href="http://www.facebook.com/obnob" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div>
{{else}}
    Nothing to like here!
{{/if}} 
```

如果`condition`在页面生命周期内发生更改，则类似按钮的 HTML 代码将相应地插入和删除。问题是如果在页面加载后插入like按钮的div，Facebook JavaScript库将不会解析它并将其变成like按钮。为此，您必须调用`FB.XFBML.parse()`.

我尝试使用 的`didInsertElement()`钩子`Ember.View`，但这仅在视图第一次插入 DOM 时运行，而不是在它已经存在之后运行。

我试图通过在模板中添加一个脚本标签来解决这个问题：

```
<script>FB.XFBML.parse();</script> 
```

这失败了，因为脚本标签干扰了 Metamorph 的脚本标签。

## 问题

1.  每当 Metamorph 更改已渲染的 Ember 视图时，Ember 是否有运行代码的挂钩？
2.  如何在 Ember 模板中编写脚本标签而不破坏 Metamorph 的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:36:21.117

您可以在视图中观察变量。所以你会做

```
App.View = Ember.View.extend({
    conditional: null,

    _conditionalChanged: function() {
        console.log('conditional changed');
    }.observes('conditional')
}) 
```

这将允许您在条件更改时触发代码。

也就是说，根据您最初的问题，我认为您不应该使用条件来管理状态。您应该考虑在视图中使用[StateManager 。](http://docs.emberjs.com/#doc=Ember.StateManager&src=false)这样，随着您的 facebook 按钮状态发生变化，可以触发不同的操作/事件。事实上，您应该有一个完全独立的视图来负责设置 facebook 按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T20:08:12.470

您可以为按钮定义视图，并在`didInsertElement`函数中执行任何自定义逻辑。例子：

```
{{#if condition}}
    {{view App.LikeButton}} 
```

...

```
App.LikeButton = Em.View.extend({
    templateName: 'like-button',
    didInsertElement: function() {
        //apply you custom logic here
    }
}) 
```

`didInsertElement`每次渲染视图并将其添加到 DOM 后都会调用该函数。

# javascript - Bootstrap Typeahead 不适用于某些 Div Id

> ID：12119563
> 
> 赞同：0
> 
> 时间：2012-08-25T05:52:03.567
> 
> 标签：javascript, twitter-bootstrap

这是我的 HTML

```
<input data-provide="typeahead" type="text"  id="actor" name="actor" autofocus="autofocus" maxlength="30" value="" required="required"> 
```

我正在使用 Ajax 作为源代码：

```
actors = getActors();
$('#actor').typeahead({
    source: actors,
    items: 10
}); 
```

如果我保留我的输入`div`id，`actor`那么一切都会正常工作，但如果将`DIV`id 从更改`actor`为`actor[]`then`typeahead`则不起作用。

对于`actor[]`id 我的代码是：

```
<input data-provide="typeahead" type="text"  id="actor[]" name="actor" autofocus="autofocus" maxlength="30" value="" required="required" >

actors = getActors();
    $('#actor[]').typeahead({
        source: actors,
        items: 10
    }); 
```

如果有人知道这种类型输入的解决方案，`ID`请提供您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:40:52.480

大概 jQuery 的选择器引擎试图解释`'#actor[]'`为一个由属性的存在限定的元素并且不匹配。为什么一定要使用那种ID（一对空方括号通常用作表单元素*名称*的后缀，以便PHP或类似代码将多个同名元素的值转换为数组，但ID根据定义在一个页面中是唯一的）？

# mysql - mysql2 gem 安装失败

> ID：12119567
> 
> 赞同：2
> 
> 时间：2012-08-25T05:52:57.717
> 
> 标签：mysql, ruby-on-rails, ruby, mysql2

我的堆栈如下：

*   CentOS 6.3
*   [安装 MySQL 5.5（在http://www.if-not-true-then-false.com/2010/install-mysql-on-fedora-centos-red-hat-rhel/](http://www.if-not-true-then-false.com/2010/install-mysql-on-fedora-centos-red-hat-rhel/)执行步骤，因为 yum 仍然有 MySQL 5.1 和如果我尝试 yum 安装任何与 mysql 相关的软件包，它当然会像 yum 预期的那样中断 5.1）

    $> mysql --version mysql Ver 14.14 Distrib 5.5.27，适用于使用 readline 5.1 的 Linux (x86_64)

    $> ruby​​ --version ruby​​ 1.9.3p194 (2012-04-20 修订版 35410) [x86_64-linux]

    $> rvm --version rvm 1.14.6 (stable) by Wayne E. Seguin，Michal Papis [https://rvm.io/]

    $> uname -a Linux localhost.mkf 2.6.32-279.5.1.el6.x86_64 #1 SMP Tue Aug 14 23:54:45 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

    $> nginx -v nginx版本：nginx/1.2.2

    $> 导轨 -v 导轨 3.2.6

当我尝试安装 mysql2 gem 时，出现以下错误：

```
$> gem install mysql2
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
        ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql.h... no
checking for mysql/mysql.h... no
-----
mysql.h is missing.  please check your installation of mysql and try again.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
--with-mysql-config
--without-mysql-config

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11       for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mysql2-    0.3.11/ext/mysql2/gem_make.out 
```

当我做

```
$> find / -name mysql.h 
```

我什么都得不到

Mysql 运行正常，我已经在其中创建了数据库和表，并且 sql 运行没有任何问题。

是否可以在我的堆栈中安装 mysql2 gem？如果是这样，那么知道我缺少什么吗？

**更新**：我试过`yum install mysql-devel` 它会抛出错误，因为我安装了 mysql5.5，使用 Remi 存储库。虽然 Yum 期待 mySql 5.1

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T06:13:21.763

你安装了`mysql`吗？如果不这样做，您还需要安装 mysql dev 文件以进行 gem 的本机编译

```
sudo yum install mysql-devel 
```

检查这个已经解释[的错误通过捆绑器安装mysql2 gem](https://stackoverflow.com/questions/3754662/errors-installing-mysql2-gem-via-the-bundler)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T12:32:18.727

我得到了这个工作：

```
 wget http://cdn.mysql.com/Downloads/MySQL-5.5/MySQL-devel-5.5.27-1.el6.x86_64.rpm 

 rpm -Uvh MySQL-devel-5.5.27-1.el6.x86_64.rpm 

 gem install mysql 

 gem install mysql2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-24T23:48:36.557

如果得到这样的错误

```
$ sudo yum install mysql-devel

Loaded plugins: fastestmirror, presto
Loading mirror speeds from cached hostfile
10gen                                                                                                                                                      | 2.5 kB     00:00
base                                                                                                                                                       | 3.7 kB     00:00
centosplus                                                                                                                                                 | 3.4 kB     00:00
Not using downloaded repomd.xml because it is older than what we have:
  Current   : Wed Feb 12 07:03:25 2014
  Downloaded: Sat Jan  4 21:29:15 2014
contrib                                                                                                                                                    | 2.9 kB     00:00
epel                                                                                                                                                       | 4.2 kB     00:00
epel/primary_db                                                                                                                                            | 5.9 MB     00:00
extras                                                                                                                                                     | 3.4 kB     00:00
newrelic                                                                                                                                                   |  951 B     00:00
rpmforge                                                                                                                                                   | 1.9 kB     00:00
rpmforge-extras                                                                                                                                            | 1.9 kB     00:00
ucloud                                                                                                                                                     | 1.3 kB     00:00
updates                                                                                                                                                    | 3.4 kB     00:00
updates/primary_db                                                                                                                                         | 2.0 MB     00:00
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package mysql-devel.x86_64 0:5.1.73-3.el6_5 will be installed
--> Processing Dependency: mysql = 5.1.73-3.el6_5 for package: mysql-devel-5.1.73-3.el6_5.x86_64
--> Finished Dependency Resolution
Error: Package: mysql-devel-5.1.73-3.el6_5.x86_64 (updates)
           Requires: mysql = 5.1.73-3.el6_5
           Installed: mysql-5.5.34-1.el6.remi.x86_64 (@remi)
               mysql = 5.5.34-1.el6.remi
           Available: mysql-5.1.71-1.el6.x86_64 (base)
               mysql = 5.1.71-1.el6
           Available: mysql-5.1.73-3.el6_5.x86_64 (updates)
               mysql = 5.1.73-3.el6_5
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

试试这个

```
sudo yum --enablerepo=remi -y install mysql-devel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T06:13:38.367

要获取任何软件的头文件，您需要安装`-dev`or`-devel`变体。由于您使用的是非标准 RPM，因此您可能想查看同一个源是否具有该版本。

一旦安装了这些，您应该没有任何问题。

# unsatisfiedlinkerror - java.lang.UnsatisfiedLinkError: org.hyperic.sigar.Sigar.getNativeVersion()Ljava/lang/String; 西格

> ID：12119569
> 
> 赞同：1
> 
> 时间：2012-08-25T05:53:05.010
> 
> 标签：unsatisfiedlinkerror, sigar

实例化 Sigar 时出现异常

Redhat linux enterprise x86_64上存在问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:38:43.397

在带有 JBoss 服务器的 Redhat linux 上，将 sigar jar 添加到 LDPATH 已经解决了这个问题。

# cookies - 如果清除 cookie/缓存，“在这台计算机上记住我”的技术？

> ID：12119570
> 
> 赞同：0
> 
> 时间：2012-08-25T05:53:06.013
> 
> 标签：cookies, remember-me, fingerprinting

通常，“在这台计算机上记住我”会在浏览器 cookie 中存储用户标识符的散列值。即使清除了 cookie，我也希望能够记住设备。我们尝试存储在缓存、window.event 甚至本地存储和数据库中（如果 HTML5 兼容）。所有这些都容易被用户清除。有没有更好的技术来识别设备而不依赖这些存储？还是比上面列出的更好的存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:57:57.963

不，因为用户的计算机完全是他们自己的，您存储的任何东西都不安全。作为最后的手段，他们可以重新安装整个操作系统。

由于网络上发生的所有网络地址转换，即使 IP 地址也不足。

我没有尝试技术解决方案，而是简单地依赖 cookie 并在某处放置一个微妙的消息，如果他们想要“记住我”功能，则需要 cookie。

一个知识渊博的用户可以在第一种情况下摆脱 cookie，可能会知道如何选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:04:02.993

试试看[http://samy.pl/evercookie/](http://samy.pl/evercookie/)

# json - 在 javascript 中按名称访问 JSONArray

> ID：12119571
> 
> 赞同：0
> 
> 时间：2012-08-25T05:53:23.087
> 
> 标签：json

我有一个返回 JSONObject 的应用程序，如下所示：

```
Result:
{
status: "200", 
data: {
exposedItemsList: [
{
type: "process", 
itemID: "25.22982aaf-aff7-4e03-9c7c-a8475bf48354", 
itemReference: "/25.22982aaf-aff7-4e03-9c7c-a8475bf48354", 
processAppID: "2066.18beb803-e14e-4f6f-9d08-a807091aea7e", 
snapshotID: "2064.c0d236be-b5c8-463a-a38d-7267af836918", 
snapshotName: "SP20", 
snapshotCreatedOn: "2012-08-22T09:28:22Z", 
display: "Access Request", }
] 
} 
} 
```

我使用以下函数来获取 Json：

```
$.get("url of my application", function (data) {
                   alert("Data Loaded: " + data);
                   ;
               }); 
```

这有效并返回整个 JSONObject。但是，我想访问“exposedItemsList”JSONArray 和其中的元素。我试过了

```
alert("Data Loaded: " + data.exposedItemsList[0].type); 
```

但是id没有用...

请指示。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:01:07.270

两个可能的答案：

1.  data 是一个字符串，而不是一个对象（在这种情况下你必须解析/评估它），
2.  你必须写`data.data.exposedListItems[0].type`，因为 data 包含最顶层的对象，它有一个 data 字段：

    $.get("我的应用程序的 URL", function (result) { alert("Data Loaded: " + result.data.exposedListItems[0].type); });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:47:04.620

我可以通过添加来解决这个问题

```
var obj = JSON.parse(data); 
```

# jquery-mobile - 如何根据所选选项控制jquery mobile选择菜单标题的宽度

> ID：12119572
> 
> 赞同：0
> 
> 时间：2012-08-25T05:53:30.990
> 
> 标签：jquery-mobile

我正在为我的网络应用程序使用 Jquery Mobile 1.2.0 Alpha。我正在使用 JQM 选择下拉菜单来填充时区选项列表。对于小的选项文本 JQM 根据设备屏幕大小调整选择菜单标题以及其他字段宽度。但是对于大的选项文本，选择菜单标题变得太宽，超出了屏幕大小，并且还破坏了其他字段的宽度。

我尝试设置 min-width 和 max-width 来选择菜单标题，但它不起作用。我在这里添加了屏幕截图以供参考。

```
<select id="TimeZoneId" name="TimeZoneId" data-mini="true"> 
```

![JQM 选择菜单](../Images/2509e045c3838b65252cbb901771ea34.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-30T16:04:07.710

聚会迟到了，但这也将解决自动换行问题。（jQuery Mobile 版本 1.4.3）

**CSS：**

```
.ui-select .ui-btn>span:not(.ui-li-count) {
    white-space: normal !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:50:09.907

使用目标元素，并将其添加到您的 CSS 文件中：

```
#TimeZoneId {
     white-space:normal !important
} 
```

这应该使文本换行

# c# - C# <===> VB.Net 关键字映射

> ID：12119573
> 
> 赞同：1
> 
> 时间：2012-08-25T05:53:51.240
> 
> 标签：c#, .net, vb.net

我精通 C# 编码，但现在我必须在 VB.Net 中编码。因此，为了学习起见，是否有任何文章/列表可以告诉我

```
 C#          |       VB.Net 
```

* * *

```
abstract      |     MustInherit
 sealed       |    NotInheritable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T06:12:26.243

[http://www.harding.edu/fmccown/vbnet_csharp_comparison.html](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html) --> 不错的对比图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:14:13.743

这是 2005 年的一篇，但写得很好：http: [//www.codeproject.com/Articles/9978/Complete-Comparison-for-VB-NET-and-C](http://www.codeproject.com/Articles/9978/Complete-Comparison-for-VB-NET-and-C)

这是另一个： [http ://www.harding.edu/fmccown/vbnet_csharp_comparison.html](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)

我建议两种选择：

*   使用允许您选择目标语言的反编译器，例如[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)。
*   有像[这样](http://www.carlosag.net/tools/codetranslator/)的代码翻译器。

无论如何，您都必须选择一本关于 VB.NET 的好书来了解两种语言之间的细微差别。

# asp.net-mvc-3 - kendoui树视图中的复选框

> ID：12119582
> 
> 赞同：0
> 
> 时间：2012-08-25T05:54:51.863
> 
> 标签：asp.net-mvc-3

是否可以在 kendoui 树视图中具有带有复选框的树结构。我在演示中没有找到任何东西。

我想要类似这张我上传图片的图片：有没有其他方法可以实现这一目标？

我正在使用 Kendoui 树视图，我需要父母和孩子的复选框，

当我点击父母时，孩子也应该被选中，

如果我点击孩子它应该显示它的节点ID和父ID，

如果我单击多个复选框，它们应该显示它们的 ID，并且当我单击删除按钮时，应动态删除所有选定的选中节点。

请您提供任何示例代码（或）相关示例。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:44:43.630

它已经由 Kendo UI 团队实现：

[http://demos.kendoui.c​​om/web/treeview/checkboxes.html](http://demos.kendoui.com/web/treeview/checkboxes.html)

至于id显示，可以查看：

[http://demos.kendoui.c​​om/web/treeview/events.html](http://demos.kendoui.com/web/treeview/events.html)

并在选择时添加警报。

# java - 支持多个xsd版本

> ID：12119585
> 
> 赞同：3
> 
> 时间：2012-08-25T05:55:10.990
> 
> 标签：java, design-patterns, xsd, jaxb

让我解释一下我的场景，我有一个接受 xml 请求并做出响应的 Web 应用程序。我使用 jaxb 解析请求，将其转换为我的应用程序 dao 对象，处理请求，然后将 dao 结果重新转换为 jaxb 对象并返回。现在我必须支持多个版本（不同的 xml 版本可以作为请求，我必须用合适的 xml 响应来响应）。我为 jaxb 对象生成 java 文件-> dao 对象转换器和反向。问题是在转换为我的 dao 对象之前，会创建 jaxb 对象，然后在将其传递给我的转换器之前对其进行验证。我不确定在这里应用什么设计模式。可能是适配器模式。请建议？如果我也可能必须生成 jaxb 编组和非编组代码，还要抛出灯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:54:42.600

希望我能很好地理解你的问题。所以你已经有：

```
xml 1 ---> jaxb objects 1 ---> converter 1 ---> entity objects 
```

现在您需要适应一种新的 xml 格式。

为此，您可以编写一个新的转换器来支持新格式：

```
xml 2 ---> jaxb objects 2 ---> converter 2 ---> entity objects 
```

或编写一些 xml 适配器以使新的 jaxb 对象适应第一种格式：

```
xml 2 ---> jaxb objects 2 ---> adapter ---> jaxb objects 1 ---> converter 1 ---> entity objects 
```

我建议**第一种**方法：编写一个新的转换器，以便新格式不依赖于第一个格式（以防可能需要停用第一种格式）。

转换器将自身与 jaxb 对象混合，作为实体对象的包装器以及`@XmlJavaTypeAdapter`复杂类型。一个非常简单的例子：

```
public class XmlPerson {
    private Person person;

    public XmlPerson(Person person) {
        this.person = person;
    }

    public XmlPerson() {
        this.person = new Person();
    }

    public Person getPerson() {
    }

    public String getFirstName() {
        return person.getFristname();
    }

    public void setFirstname(String firstName) {
        person.setFirstName(firstName);
    }

    ....

    @XmlJavaTypeAdapter(XmlAddressAdapter.class)
    public Address getAddress() {
        return person.getAddress();
    }

    public void setAddress(Address address) {
        person.setAddress(address);
    }
} 
```

应该本身从a`@XmlJavaTypeAdapter`适应（转换）`Address`到 a `XmlAddress`。

```
public class XmlAddressAdapter extends XmlAdapter<XmlAddress, Address> {
    @Override
    public Address unmarshal(XmlAddress xmlAddress) throws Exception {
        return xmlAddress.getAddress();
    }

    @Override
    public XmlAddress marshal(Address address) throws Exception {
        return address != null ? new XmlAddress(address) : null;
    }
} 
```

> 如果我也可能必须生成 jaxb 编组和非编组代码，还要抛出灯吗？

您只需将 xml 对象传递给编组器并`xsd`使用解组器验证您可能已经在做的事情：

元帅：

```
 JAXBContext jaxbContext = JAXBContext.newInstance(XmlPerson.class);
   Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
   jaxbMarshaller.marshal(xmlPerson, output); 
```

解组：

```
JAXBContext jaxbContext = JAXBContext.newInstance(targetClass);
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

SchemaFactory sf = SchemaFactory.newInstance(
                    javax.xml.XMLConstants.W3C_XML_SCHEMA_NS_URI);
Schema schema = sf.newSchema(XmlInvoice.class.getResource("/yourXsd.xsd"));
jaxbUnmarshaller.setSchema(schema);

Object unmarshalResult = jaxbUnmarshaller.unmarshal(inputStream); 
```

# android - xml文件中的错误

> ID：12119588
> 
> 赞同：0
> 
> 时间：2012-08-25T05:55:40.703
> 
> 标签：android, android-layout

当我编译此文件时，我收到以下错误错误：解析 XML 时出错：格式不正确（无效令牌）R 无法解析为变量

这是android xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:orientation="vertical"
         android:background="@drawable/ic_launcher"
        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        />
      <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="this is main text"
        android:gravity="center"
        />
     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/title"
        />

     <Button
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Tutorials"
         android:textSize="25px"
         android:textStyle="bold" />

/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:01:52.730

使用下面的 XML 文件而不是您的文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/ic_launcher">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="this is main text"
        android:gravity="center" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/title" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Tutorials"
        android:textSize="25px"
        android:textStyle="bold" />

</LinearLayout> 
```

# django - Twython updateStatus - 未经授权：无效/过期令牌

> ID：12119590
> 
> 赞同：4
> 
> 时间：2012-08-25T05:56:07.693
> 
> 标签：django, oauth, twitter, python-twitter, twython

我正在尝试使用来自 Django 支持的站点的 Twython 发布推文。但是，“twitter.updateStatus(status=tweet_text)”行会导致以下错误：

```
TwythonError: u'Unauthorized: Authentication credentials were missing or incorrect. -- Invalid / expired Token' 
```

我确实有请求版本 0.13.9，所以这应该不是问题：

```
>>>import pkg_resources
>>>pkg_resources.get_distribution("requests").version
'0.13.9'
>>>pkg_resources.get_distribution("twython").version
'2.3.4' 
```

**知道如何解决这个问题吗？提前致谢！**

这是python方法本身：

```
def tweet_link(request, tweet_text):
    try:
        c = RequestContext(request)
        twitter = Twython(
            twitter_token = TWITTER_KEY,
            twitter_secret = TWITTER_SECRET,
            oauth_token = request.session['request_token']['oauth_token'],
            oauth_token_secret = request.session['request_token']['oauth_token_secret']
        )
        twitter.updateStatus(status=tweet_text)
    except Exception, e:
        print traceback.print_exc()
    return HttpResponse('') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:18:05.203

我是 Twython 的作者。

此错误是由于我们拥有的依赖项（请求）的问题而发生的，该问题已在请求 v0.13.9 中得到修复。现在应该没问题；如果没有，请随时与我联系。

# javascript - 全局变量不起作用

> ID：12119591
> 
> 赞同：1
> 
> 时间：2012-08-25T05:56:12.033
> 
> 标签：javascript, jquery

我一直在用这个把头撞到墙上。有人可以告诉我我做错了什么吗？

```
var foo = 100;

function loadData() {
   // this pops up a window that says it's 100
   alert(foo);  

   $.getJSON(myvars.constants.ajaxpath + "getsettings", function(data) {
      foo = 200;
      // this pops up a window that says it's 200
      alert(foo);
   });
   // this pops up a window that says it's 100
   alert(foo); 
} 
```

我在 getJSON() 调用中设置全局变量的任何值仅在 getJSON() 调用中有效。一旦函数退出，全局变量就会恢复到之前的值。

如何在 getJSON() 调用中设置这个全局变量？我也尝试过使用 .success()、.complete() 等。我希望它保持设置为 200，而不是恢复到 100。

谢谢！

PS 显然我在 getJSON() 调用中使用全局变量做其他事情，但简单的变量设置是为了说明问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:04:19.900

您的...

```
foo = 200 
```

...一旦 ajax 请求返回，就会被调用。所以这是在“最后一个”之后`alert(foo)`。完成此脚本的执行后，如果您弹出开发者控制台 (F12) 并输入`foo`，您应该会看到 200。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:06:41.973

变量*没有*被设置，第三个也是最后`alert`一个只是在设置之前调用。

因为您使用的是异步 JSON 调用，所以执行不会是线性的。在大多数情况下，该代码将类似于：

```
var foo = 100;

function loadData() {
   // this pops up a window that says it's 100
   alert(foo);  

   // The call is sent at this point
   $.getJSON(myvars.constants.ajaxpath + "getsettings");

   // this pops up a window that says it's 100
   alert(foo); 
}

// Some time later, after the server responds, this function is actually run

function(data) {
   foo = 200;
   // this pops up a window that says it's 200
   alert(foo);
}); 
```

您可以简单地通过调用 alert 或`foo`在调用返回后显示来测试这一点，或者将 JSON 调用设置为同步，这将强制执行按照您的预期进行（但这是非常糟糕的做法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T06:42:36.957

尝试这个

```
var foo = 100;

function loadData() {

   alert(foo);  
   $.ajax({
      async: false,
      url: myvars.constants.ajaxpath + "getsettings",
      dataType: "json",
      success: function(data) {
      foo = 200;
      alert(foo);
   }
 });
  alert(foo); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T06:01:22.157

这里你设置了成功事件的回调，当ajax请求成功完成时会调用这个回调。

```
$.getJSON(myvars.constants.ajaxpath + "getsettings", function(data) {
  foo = 200;
  alert(foo);
}); 
```

警告 foo 的最后一行是较早执行的。所以在ajax请求之后你的变量将是200。

# jquery - 使用 jQuery、MVC3 将 Layout InnerHtml 读入视图

> ID：12119592
> 
> 赞同：0
> 
> 时间：2012-08-25T05:56:20.420
> 
> 标签：jquery, asp.net-mvc-3, view, load, innerhtml

我正在使用 ASP.NET MVC 3，

我有一个`AdminController`和`EditLayout`行动。

**我需要的是：**
当我请求时，`/Admin/EditLayout`我需要将存储的布局的 InnerHtml 加载`/Views/Shared/_Layout.cshtml`到视图 EditLayout 的 TextArea

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:16:09.693

好的，您可以从这里开始...

在`EditLayout`操作中，您可以将`/Views/Shared/_Layout.cshtml`视图作为部分视图获取，并使用 jquery 将生成的 html 转储到 textArea 中。

请参阅这篇文章：[Asp.net mvc razor 使用 jquery Ajax 渲染部分视图](http://mazharkaunain.blogspot.in/2011/04/aspnet-mvc-render-partial-view-using.html)

# php - 结合两个 MySQL 查询？

> ID：12119597
> 
> 赞同：0
> 
> 时间：2012-08-25T05:56:56.103
> 
> 标签：php, mysql

```
$query1 = 'select DATE_FORMAT(time, "%Y-%m-%d") as date,
        count(*) as phone_TotalPerDay
        from numrequest
        where id_usr = "'.$id_user.'"
        AND id_re ="'.$id_re.'"
        AND request="ph"
        group by id_usr, year(time), DAYOFYEAR(time)
        order by year(time) DESC, DAYOFYEAR(time) DESC';  

$query2 = 'select DATE_FORMAT(time, "%Y-%m-%d") as date,
        count(*) as fax_TotalPerDay
        from numrequest
        where id_usr = "'.$id_user.'"
        AND id_re ="'.$id_re.'"
        AND request="fx"
        group by id_usr, year(time), DAYOFYEAR(time)
        order by year(time) DESC, DAYOFYEAR(time) DESC'; 
```

有没有办法结合这两个查询。我真的需要它们在一个资源中。目前每一个都显示每天的*号码请求数。*我想将它们组合起来，以便每个`date`都有`phone_TotalPerDay`和`fax_TotalPerDay`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:05:30.550

您可以使用条件总和，例如

```
$query1 = 'select DATE_FORMAT(time, "%Y-%m-%d") as date,
    sum(if(request = "ph", 1, 0)) phone_TotalPerDay,
    sum(if(request = "fx", 1, 0)) fax_TotalPerDay
    from numrequest
    where id_usr = "'.$id_user.'"
    AND id_re ="'.$id_re.'"
    group by id_usr, year(time), DAYOFYEAR(time)
    order by year(time) DESC, DAYOFYEAR(time) DESC'; 
```

如果请求类型匹配，`if`则语句返回 1，否则返回 0，因此将这些相加有效地计算匹配此条件的行，并且我已从 where 子句中删除了请求条件。

# java - JTextField 变成一个单独的类

> ID：12119598
> 
> 赞同：1
> 
> 时间：2012-08-25T05:56:58.053
> 
> 标签：java, swing, actionlistener, jtextfield

下面的问题

JtextField，事件处理在其类中完成。修改一个新类 Question2 以便按钮侦听器不会更改，但文本事件由名为 Q2textHandler 的单独 TextHandler 类处理。您可以使用 PowerPoint 中的 ButtonHandler 类作为指南，但您应该创建自己的 TextHandler 类并将其与 JTextField 相关联。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

 public class Question4 extends JFrame implements ActionListener{

    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 200;
    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN = 250;

    private JButton cancelButton;
    private JButton okButton;

    public Question4() {

        setTitle("My Button and Frame Handler");
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        setLocation(FRAME_X_ORIGIN, FRAME_Y_ORIGIN);

        setDefaultCloseOperation( EXIT_ON_CLOSE );

        Container contentPane = getContentPane();
        contentPane.setLayout(new FlowLayout() );

        cancelButton = new JButton("CANCEL");
        okButton = new JButton("OK");

        JTextField inputLine = new JTextField();
        inputLine.setColumns(22);
        contentPane.add(inputLine);
        inputLine.addActionListener(this);

        contentPane.add(okButton);
        contentPane.add(cancelButton);

        okButton.addActionListener(this);
        cancelButton.addActionListener(this);
    }

    public void actionPerformed(ActionEvent event) {
        if (event.getSource() instanceof JButton)
        {
            JButton clickedButton = (JButton) event.getSource();
            String buttonText = clickedButton.getText();
            setTitle("You clicked " + buttonText);
        }
        else 
        {
            JTextField textField = (JTextField) event.getSource();
            setTitle("You entered ' " + textField.getText() + "'");
        }
    }

    public static void main(String[] args){
        Question4 window = new Question4();
        window.setVisible(true);
    }
} 
```

我的问题是：

1.  我不知道他在问什么。我有一个粗略的想法，并认为只是为 setTitle 做一个返回声明。
2.  我不知道我是否必须在我正在制作的类中实现 ActionListener。

这是我到目前为止所拥有的

```
public class Q2textHandler extends JFrame implements ActionListener{

    private String text;
    public void actionPerformed(ActionEvent event) {
    { 
        JTextField textField = (JTextField) event.getSource();
        String text = textField.getText();
        setTitle("You've entered" + text);
    }
} 
```

# asp.net - 如何在 asp.net c# 中隐藏 datalist 中的特定行？

> ID：12119602
> 
> 赞同：0
> 
> 时间：2012-08-25T05:57:10.957
> 
> 标签：asp.net

在我的项目中，我有一个请求页面，其中包含一个数据列表，其中包含四个模板 Image(profilepic)、Label(firstname) 和 Button1(accept)、button2(deny) 和一个包含请求者地址的隐藏字段并编写了代码 protected void DataList1_ItemCommand（对象源，DataListCommandEventArgs e）{

```
 if (e.CommandName == "Accept")
    {
        SqlConnection con = new System.Data.SqlClient.SqlConnection();
        con.ConnectionString = ConfigurationManager.ConnectionStrings["Con"].ConnectionString;
        con.Open();
        if (con.State == ConnectionState.Open)
        {
            HiddenField hd = (HiddenField)e.Item.FindControl("HiddenField1");
            string str = hd.Value;
            SqlCommand cmd = new System.Data.SqlClient.SqlCommand();
            cmd.CommandText = "Update requests set frnshpstatus='Y' where Email='" + Session["UserName"] + "' And frnemail='" + str + "'";
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;
            cmd.ExecuteNonQuery();

        }
    }
    else if (e.CommandName == "Deny")
    {
        SqlConnection con = new System.Data.SqlClient.SqlConnection();
        con.ConnectionString = ConfigurationManager.ConnectionStrings["Con"].ConnectionString;
        con.Open();
        if (con.State == ConnectionState.Open)
        {
            HiddenField hd = (HiddenField)e.Item.FindControl("HiddenField1");
            string str = hd.Value;
            SqlCommand cmd = new System.Data.SqlClient.SqlCommand();
            cmd.CommandText = "Update requests set frnshpstatus='N' where Email='" + Session["UserName"] + "' And frnemail='" + str + "'";
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;
            cmd.ExecuteNonQuery();
        }
    }

} 
```

单击接受按钮时，请求表中的 frnshpstatus 已更新为“Y”，但仍显示数据列表中已接受或拒绝的请求。我希望他们只从数据列表中删除，但在数据库中保留请求记录。使用 c# 在 asp.net 中回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:18:01.823

您需要在“DataList1_ItemCommand”中再次绑定 DataList 并在“DataList1_ItemDataBound”事件中编写以下代码。我假设您在绑定到 DataList 的 DataSource 中有“frnshpstatus”...

```
void  DataList1_ItemDataBound(Object sender, DataListItemEventArgs e)
  {

     if (e.Item.ItemType == ListItemType.Item || 
         e.Item.ItemType == ListItemType.AlternatingItem)
     {
           DataRowView drv = (DataRowView)(e.Item.DataItem);        
           string frnshpstatus= drv.Row["frnshpstatus"].ToString(); 
           if(frnshpstatus="Y")
           {
             // Retrieve the Button control in the current DataListItem.
             Button Button1  = (Label)e.Item.FindControl("Button1");
             Button Button2  = (Label)e.Item.FindControl("Button2");
             Button1.Visible=False;
             Button2.Visible=False;

             //You Can Also Hide Row but for that you need to set it an ID and set it attribute "runat=server" 

             HtmlTableRow row=(HtmlTableRow)e.Item.FindControl("trId");
             row.Visible=False;   
           }                        

     }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:51:44.977

我是否认为您希望在单击接受或拒绝后将该行从数据列表中完全删除？如果是这种情况，只需在填充数据列表的查询中添加 where 子句

```
where frnshpstatus is null 
```

或任何默认值（如果不为空）。然后，在 ItemCommand 事件处理程序结束时完成接受/拒绝过程后，您需要再次手动对数据列表进行数据绑定

```
DataList1.DataBind(); 
```

# asp.net-mvc-3 - Visual Studio 2010 中的 SSRS

> ID：12119605
> 
> 赞同：0
> 
> 时间：2012-08-25T05:57:59.987
> 
> 标签：asp.net-mvc-3, reporting-services

我试图在 Visual Studio 2010 中实现 SSRS 报告。我已经搜索了很多关于这种情况的网站。但我对此没有任何解决方案。有什么办法可以在 VS2010 中开发 SSRS 报告？请帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:17:32.817

是的，您现在可以在 Visual Studio 2010/2012 中开发 .rdl 报告。

它需要带有 SP1 的 VS 10、SQL Server Data Tools 安装（VS 10/12 的一些解决方法），然后是用于 Reporting Services 和 Data Tools 的 SQL Server 2012。

[Visual Studio 2010 或 2012 是否支持 SSRS 报告？](https://stackoverflow.com/questions/14333459/is-there-any-inbuilt-localization-resources-support-in-ssrs-using-visual-studio)

# python - Python：像石英一样的事件调度

> ID：12119608
> 
> 赞同：3
> 
> 时间：2012-08-25T05:58:17.320
> 
> 标签：python

我正在为我的 python 项目寻找一个事件调度程序，如 java 中的quartz。

请给我推荐一些好的 Python 调度器

我的要求

1) 间隔一段时间后向用户发送电子邮件或短信

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:55:30.210

也许[APScheduler](http://packages.python.org/APScheduler/)是你想要的。

这是一个例子：

```
from apscheduler.scheduler import Scheduler

sched = Scheduler()

@sched.interval_schedule(hours=3)
def some_job():
    print "Decorated job"

sched.configure(options_from_ini_file)
sched.start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:54:24.433

[`celery`](http://celery.readthedocs.org/en/latest/userguide/calling.html)可能是一个矫枉过正以及`quartz`任务：

```
@celery.task
def sendmail(from_addr, to_addrs, msg):
    "send mail here"

sendmail.apply_async(args, countdown=n) # send email in `n` seconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T22:55:42.573

一个简单的解决方案是：

```
from aqcron import At
from time import sleep
from datetime import datetime

# Event scheduling
event_1 = At( second=5 )
event_2 = At( second=[0,20,40] )

while True:
    now = datetime.now()

    # Event check
    if now in event_1: print "event_1"
    if now in event_2: print "event_2"

    sleep(1) 
```

类 aqcron.At 是：

```
# aqcron.py

class At(object):
    def __init__(self, year=None,    month=None,
                 day=None,     weekday=None,
                 hour=None,    minute=None,
                 second=None):
        loc = locals()
        loc.pop("self")
        self.at = dict((k, v) for k, v in loc.iteritems() if v != None)

    def __contains__(self, now):
        for k in self.at.keys():
            try:
                if not getattr(now, k) in self.at[k]: return False
            except TypeError:
                if self.at[k] != getattr(now, k): return False
        return True 
```

# javascript - 使用 htmlunit 抓取动态网页

> ID：12119610
> 
> 赞同：12
> 
> 时间：2012-08-25T05:58:21.813
> 
> 标签：javascript, ajax, web-crawler, htmlunit, infinite-scroll

我正在使用 HtmlUnit 从动态网页中抓取数据，该网页使用无限滚动来动态获取数据，就像 facebook 的新闻提要一样。我用下面这句话来模拟向下滚动事件：

```
webclient.setJavaScriptEnabled(true);
webclient.setAjaxController(new NicelyResynchronizingAjaxController());
ScriptResult sr=myHtmlPage.executeJavaScript("window.scrollBy(0,600)");
webclient.waitForBackgroundJavaScript(10000);
myHtmlPage=(HtmlPage)sr.getNewPage(); 
```

但是myHtmlPage似乎和之前的一样，即myHtmlPage中没有追加新数据，因此只能抓取网页上的前几条数据。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:40:09.947

我正在寻找同样的东西。我只能发现它不是滚动事件（90% 肯定）。JS 上有一个[链接，它是加载页面的责任，也许可以帮助你。](https://stackoverflow.com/questions/3423671/get-the-friends-of-my-friend-using-the-graph-api)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-08T06:37:26.107

我在页面滚动期间后加载内容时遇到了类似的问题。我使用以下方法解决了它：

`webClient.getCurrentWindow().setInnerHeight(Integer.MAX_VALUE);`

# python - 在python中迭代字典以避免许多嵌套for循环的更好方法

> ID：12119612
> 
> 赞同：7
> 
> 时间：2012-08-25T05:59:11.700
> 
> 标签：python, python-2.6

有没有更好的方法来迭代我的字典数据而不使用 3 嵌套`for loops`，就像我目前在给定下面的数据所做的那样？顺便说一句，我使用的是 python 2.6。

```
data = {'08132012': 
           {
            'id01': [{'code': '02343','status': 'P'},{'code': '03343','status': 'F'}],
            'id02': [{'code': '18141','status': 'F'},{'code': '07777','status': 'F'}]
           }
        } 
```

这是3个`for`循环当前代码：

```
 for date in data:
      for id in data[date]:
          for trans in data[date][id]:
              print "Date: %s" % date
              print "Processing id: %s" % id
              print trans['code']
              print trans['status']

              //query to database 
```

**已编辑**：有效数据值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T06:03:36.417

鉴于数据的嵌套性质，我认为没有任何方法可以避免某处的一些嵌套循环。

但是，您可以通过为数据编写扁平化生成器来避免嵌套大部分程序逻辑，如下所示：

```
def flatten(data):
    for date in data:
        for id in data[date]:
            for trans in data[date][id]:
                yield (date, id, trans)

def process(data):
    for date, id, trans in flatten(data):
        # do stuff with date, id, trans 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T06:28:13.440

在不了解数据来源的更多细节的情况下，我可能会考虑使用[**`namedtuple`**](http://docs.python.org/library/collections.html#collections.namedtuple)是否可以更改`data`存储方式的结构。它将使事情变得更干净，更具可读性。

这是一个例子：

```
>>> from collections import namedtuple
>>> Record = namedtuple('Record', ['date', 'id', 'code', 'status'])
>>> records = []
>>> records.append(Record('08132012', 'id01', '02343','P'))
>>> records.append(Record('08132012', 'id01', '03343','F'))
>>> records.append(Record('08132012', 'id02', '18131','F'))
>>> records.append(Record('08132012', 'id02', '07777','F'))
>>> for record in records:
...     print "Date: %s" %record.date
...     print "Processing id: %s" %record.id
...     print record.code
...     print record.status
... 
Date: 08132012
Processing id: id01
02343
P
Date: 08132012
Processing id: id01
03343
F
Date: 08132012
Processing id: id02
18131
F
Date: 08132012
Processing id: id02
07777
F 
```

* * *

更多乐趣：

获取`status`'F' 所在的记录列表：

```
>>> Fs = [record for record in records if record.status == 'F']
>>> Fs
[Record(date='08132012', id='id01', code='03343', status='F'),
Record(date='08132012', id='id02', code='18131', status='F'),
Record(date='08132012', id='id02', code='07777', status='F')] 
```

排序方式`code`：

```
>>> records.append(Record('08122012', 'id03', '00001', 'P'))
>>> records.sort(key=lambda x:x.code)
>>> records
[Record(date='08122012', id='id03', code='00001', status='P'),
 Record(date='08132012', id='id01', code='02343', status='P'),
 Record(date='08132012', id='id01', code='03343', status='F'),
 Record(date='08132012', id='id02', code='07777', status='F'),
 Record(date='08132012', id='id02', code='18131', status='F')] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T09:20:46.300

生成器相当简单：

```
>>> flat = ((d, id, t) for d in data for id in data[d] for t in data[d][id])
>>> for date, id, trans in flat:
...     print date, id, trans
...
08132012 id02 {'status': 'F', 'code': '18141'}
08132012 id02 {'status': 'F', 'code': '07777'}
08132012 id01 {'status': 'P', 'code': '02343'}
08132012 id01 {'status': 'F', 'code': '03343'}
>>> 
```

# eclipse - 有没有办法告诉 Dropbox 不要上传某个文件？（Eclipse 相关）

> ID：12119613
> 
> 赞同：28
> 
> 时间：2012-08-25T05:59:23.667
> 
> 标签：eclipse, dropbox

我正在尝试在两台计算机之间同步一个代码项目，一台运行 Windows，另一台运行 Ubuntu 12.04。我在两台机器上都使用 Eclipse，但是 Eclipse 生成的*.metadata*文件夹导致 Eclipse 由于操作系统不兼容而崩溃。

我想知道是否有办法告诉 Dropbox“忽略此文件夹”或类似的东西。或者让它忽略所有隐藏文件。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-04T04:54:02.417

**使用官方 Dropbox 命令行界面 (CLI)**

```
PROMPT$ dropbox help exclude
dropbox exclude [list]
dropbox exclude add [DIRECTORY] [DIRECTORY] ...
dropbox exclude remove [DIRECTORY] [DIRECTORY] ...

"list" prints a list of directories currently excluded from syncing.
"add" adds one or more directories to the exclusion list, then resynchronizes Dropbox.
"remove" removes one or more directories from the exclusion list, then resynchronizes Dropbox.
With no arguments, executes "list".
Any specified path must be within Dropbox. 
```

[http://www.dropboxwiki.com/tips-and-tricks/using-the-official-dropbox-command-line-interface-cli](http://www.dropboxwiki.com/tips-and-tricks/using-the-official-dropbox-command-line-interface-cli)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-25T08:23:06.923

右键单击任务栏图标，选择首选项，然后选择高级选项卡并设置选择性同步。启用高级视图也会有所帮助。
一般来说，您应该考虑使用版本控制系统，如[Subversion](http://subversion.apache.org/)、[Mercurial](https://www.mercurial-scm.org/)或[git](http://git-scm.com/)。您可以使用免费的托管服务（[Assembla](https://www.assembla.com/home)、[Github](http://github.com)、[Bitbucket](http://bitbucket.org)仅举几例）或在 USB 驱动器上设置存储库（非常适合个人项目）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-12-28T20:21:18.697

**如果您在 2020 年或之后签入此文件，则可以按照官方方式忽略文件/文件夹从您的计算机同步到保管箱。**

尽管在撰写本文时，该功能仍处于测试阶段。

[https://help.dropbox.com/files-folders/restore-delete/ignored-files](https://help.dropbox.com/files-folders/restore-delete/ignored-files)

**`ignoring`不同于`excluding`.**

*   Dropbox`exclude`会从您的计算机中完全删除该文件夹。但是，文件/文件夹确实保留在 Dropbox 的服务器上。每当您通过 Dropbox 应用程序的设置进行选择时，可以将排除的文件夹重新包含到您的计算机上。
*   `ignore`让您将文件或文件夹保留在您的机器上，但根本不会将文件或文件夹同步到 Dropbox。这意味着该文件夹仅位于您当前的计算机上，而不位于 Dropbox 上。

**例如：**

1.  您可以选择`dropbox exclude`排除计算机上没有空间或不需要的大备份文件。该文件/文件夹仍将存在于 Dropbox 上。

2.  `ignore`当您的文件夹包含数千或数百万个不需要备份的临时文件时，您可以选择将文件夹从同步到保管箱。备份此类文件夹可能会导致 Dropbox 使用计算机上的大量 CPU 周期和 RAM 来跟踪文件的所有更改。这可能会降低您的计算机速度。

    *   这种文件夹的一个示例是`node_modules`安装在节点项目目录中。`node_modules`其中有相当多的文件可以安全地忽略同步到 Dropbox 并`npm install`在任何时间点通过执行重新创建。

    *   您也可以选择忽略包含 Web 服务器密钥或 ssh 私钥的环境变量文件。在 Dropbox 上跨团队共享文件夹时，这可能很有用。

**如何排除**： - 要排除文件从保管箱同步到您的计算机，您需要：

*   **所有平台：**`selective sync`在 Dropbox 应用的设置中更改要同步的文件夹。
*   **Linux Dropbox CLI：**或者`dropbox exclude add "FULL_PATH_TO_FILE_OR_FOLDER_TO_EXCLUDE"`在终端中运行命令。

**如何忽略**

要忽略文件从您的计算机同步到 Dropbox，您需要在终端中运行以下命令，同时将以下命令中的更改为`FULL_OR_RELATIVE_PATH_TO_FILE_IN_DROPBOX`您需要排除的文件/文件夹：

**麦克**：

1.  `alias dropboxignore="xattr -w com.dropbox.ignored 1"`
2.  `dropboxignore "FULL_OR_RELATIVE_PATH_TO_FILE_IN_DROPBOX"`

**Linux**：

1.  `alias dropboxignore="attr -s com.dropbox.ignored -V 1"`
2.  `dropboxignore "FULL_OR_RELATIVE_PATH_TO_FILE_IN_DROPBOX"`

**Windows-Powershell**：

```
Set-Content -Path "FULL_OR_RELATIVE_PATH_TO_FILE_IN_DROPBOX"
    -Stream com.dropbox.ignored -Value 1 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-21T14:18:19.613

您可以以 Dropbox 将其视为*临时*文件的方式命名文件，这将阻止其同步。

例如。`.~myfile.foo`

根据他们的帮助：[https](https://www.dropbox.com/en/help/145) ://www.dropbox.com/en/help/145 -

> **临时文件**
> 
> 当某些应用程序（如 Microsoft Word、Excel 或 PowerPoint）打开文件时，它们通常会在同一目录中保存一个临时文件，并以下列方式之一命名：
> 
> 名称以 ~$（波浪号和美元符号）或 .~（句号和波浪号）开头
> 
> *   名称以波浪号开头并以 .tmp 结尾，例如 ~myfile.tmp
> *   Dropbox 不会在任何操作系统上同步这些临时文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-04T13:03:54.893

这是一个脚本，它将使用 Powershell 在 Windows 上的当前文件夹和子文件夹中将 dropbox ignore 与 .gitignore 同步。它需要安装 git 命令行。

```
Get-ChildItem -Recurse | `
Where-Object { $_.Name -eq '.gitignore' } | `
ForEach-Object { `
    Write-Host $_.DirectoryName; `
    Push-Location $_.DirectoryName; `
    git status --ignored --short | `
      Where-Object { $_.StartsWith('!! ') } | `
      ForEach-Object { `
          $ignore = $_.Split(' ')[1].Trim('/'); `
          Write-Host $ignore; `
          Set-Content -Path $ignore -Stream com.dropbox.ignored -Value 1 `
      }; `
    Pop-Location `
 } 
```

# iphone - 另一个应用内购买 - 恢复购买

> ID：12119619
> 
> 赞同：1
> 
> 时间：2012-08-25T06:00:38.693
> 
> 标签：iphone, ios, ios4, in-app-purchase

我正在我的应用程序中实施恢复购买。我的应用由非消耗品组成。

我已经放置了一个按钮，例如“恢复您以前的购买”。点击该按钮，我正在调用一个函数。

这是我为恢复购买而包含的代码。

```
-（无效）恢复购买
{    
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}

```

这是否足够，或者我是否需要包含其他任何内容来恢复之前的交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:42:40.430

我发现的关于恢复功能的最好的博客，我曾经在我的应用程序中使用过的最好的博客是 [在应用程序购买中恢复](http://www.mindfiresolutions.com/To-restore-the-previously-done-transactions-in-InApp-purchase-in-iPhone--1412.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:18:07.157

你现在完成重新提交给苹果。

# typo3 - 在 ext_table.php 中获取打字稿值

> ID：12119620
> 
> 赞同：0
> 
> 时间：2012-08-25T06:00:47.223
> 
> 标签：typo3, typoscript, typo3-tca

我是typo3 扩展开发的新手，我想在 ext_table.php 中获取typoscript 值。实现这个有什么好的价值吗？这是我的 ext_tables.php 文件。我想在这里获取打字稿值。`

```
 <?php
    if (!defined('TYPO3_MODE')) {
    die ('Access denied.');
   }

    // get extension confArr
    $confArr = unserialize($GLOBALS['TYPO3_CONF_VARS']['EXT']['extConf']['pits_documents']);

$tempColumns = array (
    'tx_pitsdocuments_languages' => array (     
        'exclude' => 0,     
        'label' => 'LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_languages',     
        'config' => array (
            'type' => 'select',
                'foreign_table' => 'tx_dam_cat',    
            'foreign_table_where' => ' AND tx_dam_cat.parent_id='.$confArr['langcat'].' AND tx_dam_cat.sys_language_uid=0 ORDER BY tx_dam_cat.uid', 
            'size' => 5,    
            'minitems' => 0,
            'maxitems' => 99,   
            'wizards' => array(
                '_PADDING'  => 2,
                '_VERTICAL' => 1,
                'list' => array(
                    'type'   => 'script',
                    'title'  => 'List',
                    'icon'   => 'list.gif',
                    'params' => array(
                        'table' => 'tx_dam_cat',
                        'pid'   => '###CURRENT_PID###',
                    ),
                    'script' => 'wizard_list.php',
                ),
            ),
        )
    ),
    'tx_pitsdocuments_supplier' => array (      
        'exclude' => 0,     
        'label' => 'LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_supplier',      
        'config' => array (
            'type' => 'select',
      'foreign_table' => 'tx_dam_cat',  
            'foreign_table_where' => ' AND tx_dam_cat.parent_id='.$confArr['supplycat'].' AND tx_dam_cat.sys_language_uid=0 ORDER BY tx_dam_cat.uid',   
            'size' => 8,    
            'minitems' => 0,
            'maxitems' => 1,    
            'wizards' => array(
                '_PADDING'  => 2,
                '_VERTICAL' => 1,
                'list' => array(
                    'type'   => 'script',
                    'title'  => 'List',
                    'icon'   => 'list.gif',
                    'params' => array(
                        'table' => 'tx_dam_cat',
                        'pid'   => '###CURRENT_PID###',
                    ),
                    'script' => 'wizard_list.php',
                ),
            ),
        )
    ),
    'tx_pitsdocuments_businessunit' => array (      
        'exclude' => 0,     
        'label' => 'LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_businessunit',      
        'config' => array (
            'type' => 'select',
      /* 'items' => array (
                array('',0),
            ), */   
            'foreign_table' => 'tx_dam_cat',    
            'foreign_table_where' => ' AND tx_dam_cat.parent_id='.$confArr['businesscat'].' AND tx_dam_cat.sys_language_uid=0 ORDER BY tx_dam_cat.uid', 
            'size' => 8,    
            'minitems' => 0,
            'maxitems' => 1,    
            'wizards' => array(
                '_PADDING'  => 2,
                '_VERTICAL' => 1,
                'list' => array(
                    'type'   => 'script',
                    'title'  => 'List',
                    'icon'   => 'list.gif',
                    'params' => array(
                        'table' => 'tx_dam_cat',
                        'pid'   => '###CURRENT_PID###',
                    ),
                    'script' => 'wizard_list.php',
                ),
            ),
        )
    ),
    'tx_pitsdocuments_foldertype' => array (        
        'exclude' => 0,     
        'label' => 'LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_foldertype',        
        'config' => array (
            'type' => 'check',
            'cols' => 4,
            'items' => array (
                array('LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_foldertype.I.0', '1'),
                array('LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_foldertype.I.1', '2'),
                array('LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_foldertype.I.2', '3'),
            ),
        )
    ),
    'tx_pitsdocuments_doctypes' => array (      
        'exclude' => 0,     
        'label' => 'LLL:EXT:pits_documents/locallang_db.xml:tx_dam.tx_pitsdocuments_doctypes',      
        'config' => array (
            'type' => 'select',
      /* 'items' => array (
                array('',0),
            ), */   
            'foreign_table' => 'tx_dam_cat',    
            'foreign_table_where' => ' AND tx_dam_cat.parent_id='.$confArr['doctypecat'].' AND tx_dam_cat.sys_language_uid=0 ORDER BY tx_dam_cat.uid',  
            'size' => 8,    
            'minitems' => 0,
            'maxitems' => 1,    
            'wizards' => array(
                '_PADDING'  => 2,
                '_VERTICAL' => 1,
                'list' => array(
                    'type'   => 'script',
                    'title'  => 'List',
                    'icon'   => 'list.gif',
                    'params' => array(
                        'table' => 'tx_dam_cat',
                        'pid'   => '###CURRENT_PID###',
                    ),
                    'script' => 'wizard_list.php',
                ),
            ),
        )
    ),
);

t3lib_div::loadTCA('tx_dam');
t3lib_extMgm::addTCAcolumns('tx_dam',$tempColumns,1);
t3lib_extMgm::addToAllTCAtypes('tx_dam','--div--;LLL:EXT:pits_documents/locallang_db.xml:tx_dam.div_overview,tx_pitsdocuments_foldertype;;;;1-1-1, tx_pitsdocuments_languages, tx_pitsdocuments_supplier, tx_pitsdocuments_businessunit, tx_pitsdocuments_doctypes');

$tempColumnscat = array (
      'global_id' => array(
            'l10n_mode' => 'exclude',
            'l10n_display' => 'defaultAsReadonly',
            'label' => 'LLL:EXT:pits_documents/locallang_db.xml:tx_dam_cat.global_id',
            'config' => $GLOBALS['T3_VAR']['ext']['dam']['TCA']['category_config'],
        ),
);

t3lib_div::loadTCA('tx_dam_cat');
t3lib_extMgm::addTCAcolumns('tx_dam_cat',$tempColumnscat,1);
t3lib_extMgm::addToAllTCAtypes('tx_dam_cat','global_id','','after:parent_id');

t3lib_extMgm::addPlugin(array(
    'LLL:EXT:pits_documents/locallang_db.xml:tt_content.list_type_pi1',
    $_EXTKEY . '_pi1',
    t3lib_extMgm::extRelPath($_EXTKEY) . 'ext_icon.gif'
),'list_type');

?>
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:12:14.927

在向导中，您应该能够获取已编辑页面的 id（$this-id ？查看[API](http://api.typo3.org/typo3v4/current/html/classt3lib___s_cbase.html)）。您不需要将其作为配置中的参数发送。

您可以在 foreign_table_where 中使用标记，但不能在向导本身中使用标记 - 查看[TCA](http://typo3.org/documentation/document-library/core-documentation/doc_core_tca/4.7.1/view/1/3/)。

# c++ - 在 mingw 2.95 编译器中使用 sstream

> ID：12119621
> 
> 赞同：0
> 
> 时间：2012-08-25T06:00:51.987
> 
> 标签：c++, header, mingw, sstream

是否可以在 mingw 2.95 编译器中使用 sstream 标头？如果是，那么如何？我使用的是 C-Free 4.0，它带有默认的 mingw2.95 和 cygwin 编译器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:05:22.133

sstream 是 C++ 标准库的一部分的头文件。它不是可选的或特定于 gcc 编译器的。您应该能够像这样简单地包含它：

```
#include <sstream> 
```

确保您使用 g++ 而不是 gcc 进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:42:02.453

g++ 2.95 真的来自石器时代。当时没有`<sstream>`。（很多其他的东西也丢失了，或者不像它们在最近的编译器中那样工作。）它只带有`<strstream>`基于`char*`.

您的选择是：

*   获取更新的编译器。几乎任何更新的东西都可以。
*   如果你真的因为某种原因被迫使用这个，你可以`sstream`从 gcc 3.x复制。当时这对我有用。但要为更多惊喜做好准备。
*   坚持，`strstream`但那很丑...

# forms - MachForm 3.3 + 漂亮照片

> ID：12119625
> 
> 赞同：0
> 
> 时间：2012-08-25T06:01:33.700
> 
> 标签：forms, iframe, prettyphoto

我的网站上运行着 prettyPhoto 和 MachForm。两者都可以单独工作。我想做的是在 prettyPhoto 的弹出窗口中运行 MachForm ......除了我的 machform 有 3 页时，它工作得很好。因此，当用户在prettyPhoto 中填写machform 的第1 页并单击next 以前进到表单的下一页时，而不是在prettyphoto 中加载machform 的第2 页，而是加载到自己的页面上。

我该如何解决这个问题，以便 machform 的第 2 页和第 3 页仅在 prettyPhoto 中加载？

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
  });
</script>

<li><a href="/contact?q=prettyphoto&iframe=true&width=50%&height=87%" rel="prettyPhoto[iframe]">General Inquiries</a></li> 
```

/contact 页面是 machform。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:30:57.667

使用模态！prettyPhoto 非常适合照片，但它对于表单来说很糟糕，即使它们做得正确，即使是基本的 html 表单也太麻烦了。

我使用引导程序中包含的模式。它对我有用。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

还使用 iframe 嵌入而不是 js 嵌入。使用 js 嵌入我遇到了问题。

# ruby-on-rails - Rails 3.2.6 路由错误

> ID：12119626
> 
> 赞同：0
> 
> 时间：2012-08-25T06:01:49.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing

我已经把头撞在墙上太久了。我确定我遗漏了一些明显的东西，但是这里有。我将以下行添加到我的 routes.rb 文件中：

```
get '/:location_or_budget.:format' => 'listings#search_by_location_or_budget', as: :search 
```

当我运行“rake routes”时，我在输出中看到了这条路线：

```
search GET    /:location_or_budget.:format     listings#search_by_location_or_budget 
```

当我尝试在我的代码中使用这样的路由时：

```
link_to name, search_path(:location_or_budget => 'boston') 
```

我得到以下信息：

```
ActionController::RoutingError (No route matches {:controller=>"listings", :action=>"search_by_location_or_budget", :location_or_budget=>"boston"}): 
```

我觉得我设置正确。我已经验证了“search_by_location_or_budget”方法存在并且是公开的。有谁知道可能出了什么问题或我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:23:47.450

这是因为您需要 :format 部分。试试这个：

```
get '/:location_or_budget.:format' => 'listings#search_by_location_or_budget', :as => :search, :defaults => { :format => 'html' } 
```

或者

```
get '/:location_or_budget(.:format)' => 'listings#search_by_location_or_budget', :as => :search 
```

# php - 平均每秒间隔的两个日期之间的Mysql日期

> ID：12119628
> 
> 赞同：0
> 
> 时间：2012-08-25T06:02:16.023
> 
> 标签：php, mysql

我有一张表，其中包含在字段 add_date 中的确切时间输入的记录数。add_date 可能有

```
"2012-08-25 01:10:12" 
"2012-08-25 01:10:13"
"2012-08-25 01:20:13"
"2012-08-25 01:21:12"
"2012-08-25 01:23:52"
"2012-08-25 01:23:56" 
```

所以，我只想要那些在搜索中没有相同分钟的记录，我的 sql 查询是

```
$sdate = date("Y-m-d H:i:s", strtotime($date." ".$stime));
$edate = date("Y-m-d H:i:s", strtotime($date." ".$etime));
select add_date, speed from tbl_track where DATEadd_date BETWEEN '".$sdate."' AND '".$edate."' and item=(some item) 
```

日期部分将相同，但时间部分在早上 10 到晚上 8 我想要的范围内

```
"2012-08-25 01:10:13"
"2012-08-25 01:20:13"
"2012-08-25 01:21:12"
"2012-08-25 01:23:56" 
```

分钟不同但同一分钟不能在结果中分钟必须是唯一的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:11:09.503

尝试类似的东西

```
 select distinct(date_format(add_date, "%Y-%m-%d %H:%i")) ... 
```

或者

```
 selec date_format(add_date, "%Y-%m-%d %H:%i") as datemins ... group by datemins 
```

# geolocation - GeoCode - 获取选定建筑物的多边形坐标

> ID：12119631
> 
> 赞同：0
> 
> 时间：2012-08-25T06:02:34.370
> 
> 标签：geolocation

我正在尝试检索地图上所选建筑物的多边形坐标。例如，我们有一座建筑物，例如

[https://maps.google.com.au/maps?oe=utf-8&client=firefox-a&q=49+STAFFORD+ST+ABBOTSFORD&ie=UTF-8&hq=&hnear=0x6ad64303493368df:0xfb752bd3456411,49+Stafford+St,+Abbotsford +VIC+3067&gl=au&ei=CWo4UJfgBMWjiQeZ2oDADQ&ved=0CCIQ8gEwAA](https://maps.google.com.au/maps?oe=utf-8&client=firefox-a&q=49+STAFFORD+ST+ABBOTSFORD&ie=UTF-8&hq=&hnear=0x6ad64303493368df:0xfb752bd3456411,49+Stafford+St,+Abbotsford+VIC+3067&gl=au&ei=CWo4UJfgBMWjiQeZ2oDADQ&ved=0CCIQ8gEwAA)

49+Stafford+St，+Abbotsford+VIC+3067 澳大利亚。

采用以下格式

多边形 ((144.994479667 -37.80101375, 144.9946515 -37.80103, 144.994690608 -37.800771417, 144.99451885 -37.8007547, 144.9941019667 -37.8)

这将帮助我绘制多边形并为选定的建筑物着色。

从 API 检索这些数据的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:31:53.783

回答我自己的问题：是的，它是可行的，不是的，它不是免费的。

这个地籍数据库在澳大利亚的大约价格是每两年 40,000 美元。

**2016 年 5 月 29 日更新** 澳大利亚政府已将该数据库公开。Google GNAF，您不再需要每年支付 40,000 美元

# python - Django-检查上传文件的文件类型，然后更改模板

> ID：12119633
> 
> 赞同：0
> 
> 时间：2012-08-25T06:02:44.997
> 
> 标签：python, django

我想编写一个函数来检查上传文件的扩展名，并根据它为变量分配一个值。
我希望这是有道理的。我基本上想检查上传文件的文件类型，然后相应地更改模板。
我正在考虑实现的代码是这样的，但我有点困惑

# 模型.py

```
class ScribbleMedia(models.Model):
         media = models.FileField(upload_to=get_file_path)
         typecheck=find_typecheck
         def __unicode__(self):
          return self.media 
```

# 但我不知道在哪里写这个函数

```
def find_typecheck(instance, filename):
        label=filename
        ext = filename.split('.')[-1]
        if ext == 'jpeg':
            a=1
        else:
            a=2
        return a 
```

# 在 html 模板中我应该能够做到这一点

```
{% if ScribbleMedia.typecheck ==1 %}
    do something
{% else %}
    do something else
{% endif %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:13:22.593

您可以将该方法放在模型类中并在模板中使用该方法来获取文件类型。您可以使用 的实例调用此方法`ScribbleMedia`。

例如

```
class ScribbleMedia(models.Model):
     media = models.FileField(upload_to=get_file_path)

     def __unicode__(self):
        return self.media
     def find_typecheck(self):
        filename = self.media.name
        try:
           ext = filename.split('.')[-1]
           if ext == 'jpeg':
              a=1
           else:
              a=2
        except Exception:
           a=-1 #couldn't determine
        return a 
```

在模板中：

```
{% if sc_media_obj.find_typecheck ==1 %}
    do something
{% else %}
    do something else
{% endif %} 
```

附带说明：仅检查文件扩展名可能还不够。

# c++ - 智能指针与参考

> ID：12119637
> 
> 赞同：7
> 
> 时间：2012-08-25T06:03:56.947
> 
> 标签：c++, memory, pointers, reference, smart-pointers

我敢打赌这可能以前被问过，但是由于参考（int＆name）与搜索者的参考计数相同，因此找不到任何东西。

为什么从来没有提到引用作为智能指针的替代品？它只是针对空情况，还是有别的？使用其中一个有什么优点/缺点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T06:14:16.513

我认为您的术语混淆了。引用和术语引用计数并不是真正谈论同一件事。

引用和智能指针，甚至与此相关的指针是非常不同的并且不可互换。

无法重新安装引用。这意味着一旦您有了引用，它就只能引用它最初引用的东西。引用只是一个内存地址。

另一方面，指针指向内存地址；它可以更改为指向不同的内存地址。

当有人说智能指针进行引用计数时，他们的意思是智能指针正在计算有多少对象引用了智能指针所指向的内存。这与参考不同。

我希望这会有所帮助。

# android - 检查安卓手机是否有特定的语言环境

> ID：12119642
> 
> 赞同：4
> 
> 时间：2012-08-25T06:04:44.490
> 
> 标签：android, localization

如何以编程方式检查手机是否具有特定的语言环境？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:13:55.547

`Locale`您可以通过 using获取一个 s 数组[`getAvailableLocales()`](http://developer.android.com/reference/java/util/Locale.html#getAvailableLocales%28%29)，然后遍历它以查看它是否可用。

```
boolean hasLocale = false;
String myLocale = "en";
Locale[] locales = Locale.getAvailableLocales();
for (Locale locale : locales) {
    if (locale.getLanguage().equals(myLocale)) {
        hasLocale = true;
    }
}
// Value of `hasLocale` is what you want here! 
```

# c++ - c++ 中的 sizeof 显示字符串大小减一

> ID：12119645
> 
> 赞同：1
> 
> 时间：2012-08-25T06:05:33.917
> 
> 标签：c++, string

在 C++ 中，我试图获得一个`string`说“gibbs”的大小；

当我使用`sizeof`函数时，它返回的尺寸小于实际尺寸之一。

我有以下代码：

```
 string s = "gibbs";
 cout << sizeof(s) <<endl; 
```

输出是：4。我想应该是 5。

如何解决这个问题。我们可以始终将 +1 添加到 sizeof 的返回，但这会是完美的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T06:09:10.220

`sizeof(s)`给你对象的大小`s`，而不是对象中存储的字符串的长度`s`。

你需要这样写：

```
cout << s.size() << endl; 
```

请注意`std::basic_string`（并且通过扩展`std::string`）具有`size()`成员函数。`std::basic_string`还有一个`length`成员函数，它返回与 . 相同的值`size()`。所以你也可以这样写：

```
cout << s.length() << endl; 
```

我个人更喜欢`size()`成员函数，因为标准库中的其他容器，如`std::vector`、`std::list`、`std::map`等，都有`size()`成员函数，但没有`length()`。也就是说，`size()`是标准库容器类模板的统一接口。我不需要专门为`std::string`（或任何其他容器类模板）记住它。从这个意义上说，成员函数`std::string::length()`是一种偏差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T06:10:45.213

`sizeof(s)`在您的示例中返回 的大小`std::string`，与其成员指向的内容无关。

> 如何解决这个问题。我们总是可以在 sizeof 的返回值上加上 +1，但这会是完美的解决方案吗？

不，这不会解决任何问题，因为该值是恒定的，并且`sizeof`没有提供您期望的值。

如果您想知道字符串的字符序列所需的字符数，您可以使用`s.length()`或`s.size()`-- 在该值上加 1 以了解终止字符串所需的大小。

另请注意，`sizeof`跨库和平台的值不会保持一致。`std::string`实现可能会有很大差异。特别是，您可能会看到指针大小的差异，并且您可能会看到小的字符串优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T06:09:06.443

因为这是系统上字符串类型的大小，而不是基础数据的大小。例如：

```
#include <iostream>

int main (void) {
    std::string s1 = "gibbs";
    std::string s2 = "a much longer string";
    std::cout << sizeof(s1) << '\n';
    std::cout << sizeof(s2) << '\n';

    std::cout << s1.length() << '\n';
    std::cout << s2.length() << '\n';

    return 0;
} 
```

产生：

```
4
4
5
20 
```

换句话说，您应该使用它`std::string::length()`来获取字符串的长度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T06:21:22.693

`sizeof`返回对象类型的大小`std::string`，它恰好`4`在您的系统上。这*可能*是因为`std::string`您正在处理的实现使用[*pimpl 习惯用法*](http://c2.com/cgi/wiki?PimplIdiom)- 即它仅包含指向您正在寻找的**实际实现的指针，并且指针在您的主机环境中***恰好*是 32 位的。不过，您更有可能使用的是[的写时复制实现](http://en.wikipedia.org/wiki/Copy-on-write#Other_applications_of_copy-on-write)，`std::string`它不再符合 C++11 标准的规范。

`std::string`被定义为`std::basic_string`模板类的特化，特别是`std::basic_string<char>`; 您应该在[`std::basic_string`](http://en.cppreference.com/w/cpp/string/basic_string). 看一下[`std::basic_string::size`](http://en.cppreference.com/w/cpp/string/basic_string/size)和[`std::basic_string::length`](http://en.cppreference.com/w/cpp/string/basic_string/length)。

```
std::string s = "stackoverflow";
std::assert(s.size() == 13); 
```

# json - Jackson Json序列化多个Hibernate对象

> ID：12119646
> 
> 赞同：0
> 
> 时间：2012-08-25T06:05:37.897
> 
> 标签：json, hibernate, serialization, jackson, deserialization

我有以下使用 Hibernate3 的代码。

```
List queryResult = session.createQuery("SELECT A, B from A, B where A.id = B.id");
for (Object o: queryResult) {
     Object[] array = (Objec[]) o;
     A a = (A) array[0];
     B b = (B) array[1];
     //do work
} 
```

这很好用，因为我直接对休眠查询结果进行操作。但是，我也想将 queryResult 序列化为字符串，以便以后使用。我使用杰克逊的 json 库尝试了以下操作：

```
ObjectMapper m = new ObjectMapper()
final String queryResultString = m.writeValueAsString(queryResult); 
```

然后我尝试从 Json 读取字符串并将其反序列化回 Hibernate 查询结果，这就是我遇到麻烦的时候。读取代码：

```
List r = m.readValue(queryResultString, List.class);
for (Object o: r) {
     Object[] array = (Objec[]) o;
     A a = (A) array[0];
     B b = (B) array[1];
     //do work
} 
```

Object[] 的演员抱怨不能将 ArrayList 转换为对象数组。

我尝试使用 jackson hibernate 模块，但这也无济于事。所以我的问题是：a）使用 JSON 序列化执行此操作的正确方法是什么？b）为什么杰克逊将其反序列化为数组列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:32:29.227

**假设**

当使用 jackson 进行序列化时，您的列表将类似于： [[A_item, B_item], [A_item2, B_item2], ... [A_itemn, B_itemn]] 为什么？因为如果您愿意，您有一个列表列表或数组数组（第二个列表总是有两个元素，A 和 B）。

**问题**

您的列表没有类型。所以杰克逊会将 json 流反序列化为列表列表。因为当jackson遇到数组结构不知道要反序列化到哪种类型时，它会反序列化为List而不是数组。

**解决方案**

1）你使用列表而不是使用数组，因为杰克逊默认反序列化为列表而不是数组（这就是你有classcast异常的原因）。

2）如果您在**java 5+**下（这意味着您可以使用泛型），那么您可以使用 jackson TypeReference 类。

```
List listOfLists = mapper.readValue(queryResultString, new TypeReference<List<Object[]>>() {}); 
```

3）您从 Jackson 切换到 Genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)，默认情况下将反序列化为数组而不是列表。Genson 提供了很多 jackson 没有的其他不错的功能，请查看 wiki [http://code.google.com/p/genson/wiki/GettingStarted](http://code.google.com/p/genson/wiki/GettingStarted)。Genson 需要**java 6+**。

```
List r = new Genson().deserialize(queryResultString, List.class);
for (Object o: r) {
 Object[] array = (Objec[]) o;
    // it works!
    A a = (A) array[0];
 } 
```

**编辑** 你有一个 forEach 循环，我断定你在 java 6+ 下，然后切换到 Genson ;)

# c++ - 唤醒 asio 截止时间计时器

> ID：12119649
> 
> 赞同：0
> 
> 时间：2012-08-25T06:06:40.773
> 
> 标签：c++, boost, boost-asio, threadpool

我有以下线程池。

```
#include <queue>
#include <map>

#include <boost/shared_ptr.hpp>
#include <boost/asio/io_service.hpp>
#include <boost/thread/thread.hpp>
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp> // remove me (only for io)

class ThreadPool
{
    void run() {
        // get some work from a task queue and then work on it
    }
public:
    void work_as_mainthread(void) { m_io_service.run(); }

    ThreadPool(int poolSize = 4) : timer(m_io_service)
    {
        timer.expires_from_now(boost::posix_time::seconds(1));
        m_pWork.reset( new boost::asio::io_service::work(m_io_service) );

        for ( int i = 0; i < poolSize; ++i)
            m_threadGroup.create_thread( boost::bind(&boost::asio::io_service::run, &m_io_service) );
    }

private:
    boost::asio::io_service m_io_service;
    boost::asio::deadline_timer timer;
    boost::shared_ptr<boost::asio::io_service::work> m_pWork;
    boost::thread_group m_threadGroup;
};

int main()
{
    int n_threads = 2;
    ThreadPool pool(n_threads);
    // add some tasks here...
    pool.work_as_mainthread();
    return 0;
} 
```

这是一个最小的例子，完整的代码[在这里](http://pastebin.com/jXAg2XRL)。像这样编译：

```
g++ -Wall -g -lboost_thread -lboost_date_time -lboost_system main.cpp -o main 
```

请注意，我没有调用 async_wait() （我不知道为什么需要它，线程池到目前为止工作）。

现在，可能会突然发生一个任务希望在另一个任务超时之前完成另一个任务。告诉 m_io_service 立即执行处理程序的最佳方法是什么（即使计时器还不感兴趣），然后像什么都没发生一样继续？真的，我无法从稀疏的文档中弄清楚。

这不起作用：

```
timer.expires_at(boost::posix_time::microsec_clock::universal_time()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:23:24.903

请注意，`expires_at`仅设置`dealine_timer`过期时间，但不会“启用”计时器，因此没有与计时器关联的异步操作。您应该`async_wait`将其称为完成处理程序：当超时到期或取消计时器时，此处理程序将在关联`io_service`的线程之一中调用。

调用`io_service::post`与 无关`deadline_timer`。它只是将你的仿函数发布到`io_service`队列中，并`io_service`在它的一个线程中尽快调用它。

# java - 为什么 HSSFWorkbook.write 在 HttpServletResponse 中不起作用

> ID：12119652
> 
> 赞同：1
> 
> 时间：2012-08-25T06:06:52.560
> 
> 标签：java, excel, jsf

我使用下面的代码在输出流中编写了一个 excel 文件。但是当我在excel中打开下载的文件时，打开有问题。

```
 HSSFWorkbook workbook = getWorkBook();
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletResponse response = (HttpServletResponse) FacesContext
            .getCurrentInstance().getExternalContext().getResponse();
    response.setHeader("Content-Disposition", "attachment;filename=someName.xls");
    response.setContentLength(workbook.getBytes().length);
    response.setContentType("application/vnd.ms-excel");
    try {
        workbook.write(response.getOutputStream());
        response.getOutputStream().close();
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

当然我把结果写在一个文件中，它是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:11:41.747

我通过删除下面的代码来解决这个问题。

```
response.setContentLength(workbook.getBytes().length); 
```

# vba - Excel宏根据列值将行复制到新工作表

> ID：12119660
> 
> 赞同：1
> 
> 时间：2012-08-25T06:09:18.490
> 
> 标签：vba, excel

我的查询如下：

每个月，我的电信提供商都会给我一份所有订阅者的 Excel 列表，格式如下：

```
GSM number, account num, caller location, called location, units, cost

123456,     abc123456,   loc1,            loc2,            23,    11.231

123456,     abc123456,   loc8,            loc4,            5,     3

123456,     abc123456,   loc1,            loc4,            102,   71.1

789012,     def789012,   loc4,            loc5,            11,    1.43

789012,     def789012,   loc4,            loc5,            1,     0.23

345678,     ghi345678,   loc6,            loc7,            7,     2.23 
```

等等..

我想遍历 A 列（gsm 编号）并将该编号的所有行复制到以该编号命名的工作表中，例如，第 1-3 行将被复制到名为 123456 的工作表中。

我已经设法通过该站点上的[其他一些](https://stackoverflow.com/questions/10627939/create-macro-that-will-convert-excel-rows-from-single-sheet-to-new-sheets) [查询](https://stackoverflow.com/questions/3603911/excel-macro-to-select-and-cut-multiple-rows-to-a-new-worksheet)，并提出了一些可行的方法，但没有。我面临的问题是特定调用者的行数不是固定的（每次调用一行），调用者的数量也不是固定的（零调用意味着没有行）。我正在尝试 OnCellValueChange 类型的解决方案——因为我可以理解和编辑宏——但还没有写过。

谢谢你的时间！

编辑：另外，作为旁注，我还可以在每个电子表格上放置“成本”列的总数吗？

编辑编辑：感谢大家的解决方案。然而，我对 VBA 的不适应一直困扰着我。所以，我只是在 SQL 数据库中按原样使用 Excel 表，并直接在线进行 SQL/ASP 中的所有格式化和查询。所以现在用户只需输入他们的电话号码（和密码），就可以看到他们的通话记录以及动态生成的小计和排序。谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:35:10.737

正如@joseph4tw 所说，您可以使用类似于下面的数据透视表（Excel 2010）来做到这一点......

*   要显示所有项目标签，请选择：*字段设置 -> 布局和打印 -> 重复项目标签*

*   要创建工作表选项卡，只需选择*Pivot Table Options -> Show Report Filter Pages*（如下所示）

![在此处输入图像描述](../Images/baea875678ce84aa8dc97a6c7c5bc153.png)

![在此处输入图像描述](../Images/1735a636208ea6e3973c63f4c5457e1a.png)

**更新**创建工作表选项卡后，您可以根据需要使用组编辑来格式化...

*   通过按住 Shift 键单击最后一个选项卡来选择所有选项卡，
*   选择整个工作表并粘贴特殊值以删除所有数据透视表
*   删除前两行并自动调整列，如图所示

![在此处输入图像描述](../Images/c0642be29b2193956fcd49b556cc387b.png)

# c# - 异步回调和套接字

> ID：12119664
> 
> 赞同：4
> 
> 时间：2012-08-25T06:10:45.943
> 
> 标签：c#, sockets, asynccallback

嗨，我想了解更多关于**Async Callbacks**如何与**Sockets**一起使用的信息。

假设从我的**UI 线程**我调用**BeginRead**方法并传入一个名为**Read**的回调。据我了解，**BeginRead**会产生一个新线程**（线程 A）**，因此 UI 线程中的代码执行仍然可以继续。回调**Read是在****线程 A**中执行的，对吗？它在**EndRead**处阻塞。

那么一旦回调结束，**线程 A会自动关闭吗？**

假设一旦调用回调，**线程 A就会自行关闭:::**

这是否意味着在**线程 A**结束之前调用另一个**BeginRead是安全的？**这个**BeginRead**将产生一个**Thread B**。**线程 B**会无法执行或正确放置它，它是否会在某个时候终止，因为调用线程是**线程 A**已结束？或者线程根本不依赖于调用者？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:27:46.170

你在这里有一些误解。当您调用`BeginRead`您指定的回调时，将从应用程序的内部线程池中调用。通常不会启动新线程，尽管可能有一个 - 它取决于 .NET 的内部调度程序。

如果您在调试器中中断您的程序并转到“线程”视图，您应该会看到一堆名为 Worker 线程的线程。通常他们都在睡觉并等待工作。`BeginRead`这比每次你想阅读时都启动一个线程要快得多。相反，它使用这些在后台准备就绪的工作人员。

回调完成后，工作线程返回池中，为更多操作做好准备。

至于你的其他问题：

*   回调不应阻塞在`EndRead`. 您的应用程序中不会有任何障碍。IO 数据将在缓冲中可用，在这种情况下，回调将几乎立即运行。或者数据将在很久以后才可用。在这种情况下，只有在数据出现后才会执行回调。这一点很重要，因为这意味着当您等待数据时，*没有*线程在等待任何东西。运行时处理等待并在数据出现时产生回调。
*   `BeginRead`是的，从您的回调中调用另一个是安全的。没有依赖关系。事实上，以这种方式进行 IO 是一种很好的方式。
*   线程从不依赖于调用者。它们是完全独立的，只有在自然终止或进程本身终止时才会终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:23:00.797

`BeginRead`通常使用称为异步 IO 的操作系统工具。Windows 内核*不需要*任何线程与 IO 操作相关联。

我再说一遍：您可以调用`BeginRead`1000 次，并且不会再启动或阻塞一个线程。

操作系统将回调的执行排队到线程池，但仅在等待结束时。`EndRead`然后将立即完成而无需等待。

您可以`BeginRead`从回调中安全地调用（通常在调用之后`EndRead`）。******

# php - 单击提交按钮后，我想记住特定输入的值吗？

> ID：12119666
> 
> 赞同：0
> 
> 时间：2012-08-25T06:10:51.997
> 
> 标签：php, html, session, post

单击提交按钮后，我想记住特定输入的值吗？目的是如果在用户注册帐户期间遇到诸如电子邮件存在或密码不匹配之类的错误，我想保留姓名、年龄等值。到目前为止，这是我的代码，我该怎么办？有什么帮助或建议吗？谢谢

```
<?php
        session_start();
        $errflag = false;
        $errmsg = array();
        if(isset($_SESSION['errmsg'])&&is_array($_SESSION['errmsg'])&&count($_SESSION['errmsg'])>0){
            foreach($_SESSION['errmsg'] as $msg){
                echo $msg;
            }
            unset($_SESSION['errmsg']);
        }
        ?>
        <form method="post">
            <table>
            <tr>
                <td>Last Name:</td><td><input id="txtfield" type="text" name="lname" autofocus="autofocus" required="required"></td>
            </tr>
            <tr>
                <td>First Name:</td><td><input id="txtfield" type="text" name="fname" required="required"></td>
            </tr>
            <tr>
                <td>E-mail:</td><td><input id="txtfield" type="email" name="email" required="required"></td>
            </tr>
            <tr>
                <td>Password:</td><td><input id="txtfield" type="password" name="pass" pattern=".{6,}" required="required"></td>
            </tr>
            <tr>
                <td>Re-type:</td><td><input id="txtfield" type="password" name="rpass" pattern=".{6,}" required="required"></td>
            </tr>
            <tr>
                <td></td><td><input id="btn" type="submit" name="register" value="Register"></td>
            </tr>
            </table>
        </form>
        <?php
        include 'functions/functions.php';
        if(isset($_POST['register'])){
            $result=ValidateEmail($_POST['email']);
            if($result){
                $errmsg[] = '<p id="error"><img src="img/error.png" alt="error">This email address is already in use.</p>';
                $errflag = true;
            }
            if($_POST['pass']!=$_POST['rpass']){
                $errmsg[] = '<p id="error"><img src="img/error.png" alt="error">Passwords does not match.</p>';
                $errflag = true;
            }
            if($errflag){
                session_regenerate_id();
                $_SESSION['errmsg'] = $errmsg;
                session_write_close();
                $errflag = false;
                header('location: register.php');
                exit();
            }
            else {
                $user = array('lname'=>$_POST['lname'],'fname'=>$_POST['fname'],'email'=>$_POST['email'],'pass'=>$_POST['pass']);
                RegisterUser($user);
                session_regenerate_id();
                $errmsg[] = '<p id="success"><img src="img/success.png" alt="success">Your account is now active. You may now login.</p>';
                $_SESSION['errmsg'] = $errmsg;
                session_write_close();
                header('location: index.php');
                exit();
            }
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:16:07.003

使用 ajax/javascript 检查密码是否不匹配或用户名是否已存在。这样您就可以在不实际更改页面的情况下查询数据库。

因此，您将填写的字段保留在那里。这是w3schools的一个小[例子](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:23:27.123

```
 <form method="post">
     <input id="txtfield" type="text" name="lname" autofocus="autofocus" required="required" Value=<?php $lname ?>/> 
```

已经发回同一页面。你现在可以做的是：

```
 $lname = ""; //and all the other fields
 $fname = "";
 if ($_POST['lname'] == "")
 {
    $fname = $_POST['fname'];//and all the other fields
    //put all the variables back into the form and display an error text
 }
 else
 {
    //Lets do the whole form processing and submit here
 } 
```

换句话说，使用空白变量为输入字段设置所有值。如果发生错误，请将所有这些变量设置为其原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T06:27:12.957

根据我的理解，您希望提交的变量在提交错误或丢失的情况下再次出现在表单中。

用这个替换 HTML 代码，它应该这样做：

```
 <form method="post">
        <table>
        <tr>
            <td>Last Name:</td><td><input id="txtfield" type="text" name="lname" value="<?=$_POST['lname'];?>" autofocus="autofocus" required="required"></td>
        </tr>
        <tr>
            <td>First Name:</td><td><input id="txtfield" type="text" name="fname" value="<?=$_POST['fname'];?>" required="required"></td>
        </tr>
        <tr>
            <td>E-mail:</td><td><input id="txtfield" type="email" name="email" value="<?=$_POST['email'];?>" required="required"></td>
        </tr>
        <tr>
            <td>Password:</td><td><input id="txtfield" type="password" name="pass" pattern=".{6,}" required="required"></td>
        </tr>
        <tr>
            <td>Re-type:</td><td><input id="txtfield" type="password" name="rpass" pattern=".{6,}" required="required"></td>
        </tr>
        <tr>
            <td></td><td><input id="btn" type="submit" name="register" value="Register"></td>
        </tr>
        </table>
    </form> 
```

# visual-studio - Visual Studio 2012 中的 EnvDTE 替代品

> ID：12119667
> 
> 赞同：8
> 
> 时间：2012-08-25T06:10:52.887
> 
> 标签：visual-studio, visual-studio-2012, envdte

到目前为止，我已经成功地使用[EnvDTE](http://msdn.microsoft.com/en-us/library/1xt0ezx9)来管理 Visual Studio Toolbox。

有定制的 DLL 来处理不同的 Visual Studio 版本：

EnvDTE.dll - 常见的 VS 自动化（可能适用于所有版本）

EnvDTE80.dll - 处理VS 2005

EnvDTE90.dll - 处理VS 2008

EnvDTE100.dll - 处理VS 2010

**但是，VS 2012 没有 EnvDTE110。**这是否意味着这些 VS 自动化的方式与使用这些 COM 包装库不同？

如果是这样，例如，除了使用 EnvDTE 之外，如何远程使用 VS 2012 项目和工具箱？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T10:26:00.853

我认为您误解了 EnvDTE 版本控制的工作原理。

Visual Studio 向后兼容每个版本的 EnvDTE。但是，如果新版本的 Visual Studio 需要或公开额外的可扩展性，则 MS 会发布更新版本的 EnvDTE，通过其接口公开这一点。

因此，例如，您可以使用 EnvDTE80 类与 Visual Studio 2012 进行交互。您仅限于 Visual Studio 2005 中可用的可扩展性。或者您可以使用 EnvDTE90，但仅限于 Visual Studio 2008 中可用的扩展性出来。

如果未使用最新的 VS SDK 发布较新版本的 EnvDTE，则仅限于 EnvDTE100。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-28T12:34:52.257

虽然只有**envdte100.dll**存在于

```
c:\Program Files (x86)\Common Files\microsoft shared\MSEnv\PublicAssemblies\ 
```

以下适用于 Visual Studio 2012：

```
Type typeDTE = typeDTE = Type.GetTypeFromProgID("VisualStudio.DTE.11.0");

DTE objDTE = (DTE)Activator.CreateInstance(typeDTE, true); 
```

# joomla - joomla 在菜单中显示属于同一类别的文章

> ID：12119669
> 
> 赞同：0
> 
> 时间：2012-08-25T06:11:00.793
> 
> 标签：joomla

如果我有一个使用 mod_mainmenu 通过模块显示的垂直菜单，我可以使用菜单编辑器在我的部分中查看类别。

唯一的问题是我也想在该菜单中显示一个类别中的所有文章，并且由于这不是动态的，我必须每次都添加每篇文章，这会令人沮丧。

有没有办法动态地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:28:02.770

您可以使用最新的新闻模块并将其样式设置为与使用 css 的菜单相同的方式。

使用最新的新闻模块，您可以设置要列出的项目数量和类别。

# android - 在 Android 的日期选择器中设置日期的问题

> ID：12119680
> 
> 赞同：2
> 
> 时间：2012-08-25T06:13:20.990
> 
> 标签：android, datepicker, uidatepicker

我对 Android 中的日期选择器有 1 个问题。

我有 2 个日期选择器：

1.  对于开始日期

2.  对于结束日期。

在开始日期，我想设置当月的第一个日期。在结束日期我想设置当前日期（即今天的日期）。我已经设置了它，甚至我得到了类似日期的交易......从第一个日期到当前日期。甚至我可以在控制台日期中看到第一个作为开始日期和 25（即今天的日期）作为结束日期。

但是在日期选择器中，我只能在两者中看到当前日期。作为开始日期和结束日期。这意味着我从第一个日期到当前日期得到输出，但在日期选择器中我只能在两个日期选择器中看到当前日期。

请帮我。

提前致谢。

代码是：

```
Date sDate=new Date(dp_startdate.getYear()-1900,dp_startdate.getMonth(),1);     
Date eDate=new Date(dp_enddate.getYear()-1900,dp_enddate.getMonth(),dp_enddate.getDayOfMonth());        
System.out.println("Sdate:"+sDate.toString());
System.out.println("EDate:"+eDate.toString());

SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
String startDate=formatter.format(sDate);
String endDate=formatter.format(eDate);

System.out.println("start Date is:"+startDate);
System.out.println("end Date is:"+endDate);

Bundle bundle=new Bundle();

bundle.putString("startDate", startDate);
bundle.putString("endDate", endDate);

System.out.println("start Date is:"+startDate);
System.out.println("start Date is:"+endDate); 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:30:28.277

试试这个-->

```
 dp = (DatePicker) findViewById(R.id.datePicker);
    b = (Button) findViewById(R.id.button);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            final Calendar c = Calendar.getInstance();
            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day = 1;

            dp.setVisibility(1);

            dp.init(year, month, day, null);

            StringBuilder s = new StringBuilder();
            s.append(month + 1).append("-").append(day).append("-")
            .append(year).append(" ");

            Toast.makeText(Datepicker.this, s, Toast.LENGTH_LONG).show();

        }
    });

}

   <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
    android:orientation="vertical" >

   <DatePicker
    android:id="@+id/datePicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:visibility="invisible"
    />

    <Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

    </LinearLayout> 
```

编辑：也粘贴了 xml

就像你说你想要一个日期选择器固定到当前月份的第一个日期，所以不要从系统的日历中获取日期的值（这会给你当前的日历，你可以显式地将任何 int 值放在那里。

然后你可以使用这个值，即我在 toast 中使用了自定义日期值。

# c - 我们如何检查我们的程序中的多线程是否在我们的程序中工作？

> ID：12119686
> 
> 赞同：1
> 
> 时间：2012-08-25T06:13:52.190
> 
> 标签：c, linux, multithreading, performance

我有源代码，并且在该代码中启用了多线程。我用 ps -eLf 命令检查了它显示的线程数列表，但我认为加载它没有分布在所有线程中。所以我想知道我们如何检查负载是否分布在所有线程中。

根据我的完整负载将单线程。

其实我想提高我的代码的性能。

我正在使用 RHEL5.4 linux 操作系统。编程语言是C。

如果有人知道，请告诉我......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:20:56.540

运行这个：

```
ps -p PID_OF_YOUR_PROCESS -L -o pid,tid,pcpu,state,nlwp,args 
```

你会看到类似这样的输出：

```
 PID   TID %CPU S NLWP COMMAND
 2305  2305  3.5 S    5 /usr/bin/cinnamon
 2305  2325  0.0 S    5 /usr/bin/cinnamon
 2305  2326  0.0 S    5 /usr/bin/cinnamon
 2305  2327  0.0 S    5 /usr/bin/cinnamon
 2305  2721  0.0 S    5 /usr/bin/cinnamon 
```

TID 是线程 ID。你可以看到每个线程的cpu百分比。

希望能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:28:20.607

使用`top`' 选项`H`会有所帮助。

详情请参阅`man top`。

# tomcat - tomcat CATALINA_HOME 环境变量问题

> ID：12119688
> 
> 赞同：2
> 
> 时间：2012-08-25T06:14:03.173
> 
> 标签：tomcat, environment-variables, catalina

我的服务器上有一个奇怪的问题。我正在尝试构建`OpenGTS`，所以我`ant all`
现在在构建它时使用它会给出一个错误，内容为

```
optjars:

tomcat.home:

BUILD FAILED
/usr/local/OpenGTS_2.4.2/build.xml:111: CATALINA_HOME environment variable has not been defined.
        (make sure CATALINA_HOME is defined and exported to the list of environment variables) 
```

但是我已经定义了`CATALINA_HOME` 当我回显 $CATALINA_HOME 时它给出的`/usr/local/apache-tomcat-7.0.16` 它也显示在环境变量列表的终端中。可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:34:22.513

/usr/local/ 中的 OpenGTS 文件夹的模式是什么？如果 777 以外的任何东西将其更改为 777

# matrix - 如何使给定矩阵在Maxima中对角占优

> ID：12119689
> 
> 赞同：1
> 
> 时间：2012-08-25T06:14:10.163
> 
> 标签：matrix, maxima

（来自讲义参考）为了使 Gauss-Seidel 和 Jacobi 方法收敛，需要检查系数矩阵是否**对角占优**，即对角元素应该在其列中的所有元素中具有最大值. **如果它还不是对角线占优，请使用 pivoting**。对于对角占优的矩阵，应满足以下条件：（这也称为*收敛*）

```
//convergence 
abs(A[i][i]) > summation(abs(A[i][j]),j=1 to n) where j != i for all i...n
//swapping rows in a matrix for partial pivoting
A:rowswap(A,source_index,destination_index) 
```

是否有任何预定义的函数可以在**maxima**中使用来实现收敛，或者我应该使用交换进行循环以及应该使用哪些约束？假设矩阵的大小为 3x3，包含非零元素。

我已经看到了一些相关的问题，但答案在 matlab 中。

链接：[是否有检查矩阵是否对角占优（行占优）的功能](https://stackoverflow.com/questions/2553692/is-there-a-function-for-checking-whether-a-matrix-is-diagonally-dominant-row-do)

那么，我怎样才能做到最大值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:50:22.587

这是一些实现您描述的代码：

```
is_diag_dom_row (mat, i) :=
  is(2*abs(mat[i][i]) - lsum(abs(x), x, mat[i]) > 0)$

is_diag_dom (mat) :=
  every(lambda([i], is_diag_dom_row (mat, i)),
        makelist(i,i,length(mat)))$

swapped_matrix_rows (mat, i1, i2) :=
  makelist (
    mat[if is(i=i1) then i2 elseif is(i=i2) then i1 else i],
    i, makelist(i,i,length(mat)))$

row_swap (mat, i1, i2) := apply(matrix, swapped_matrix_rows(mat, i1, i2))$ 
```

为了更容易编写，我将这两个操作分成逻辑部分。添加一个额外的副本`mat[i][i]`意味着人们可以对列表进行求和，而不是尝试对 i ≠ j 求和。如果您想按列检查对角线优势，最简单的方法可能是转置并按行执行，因为 Maxima 主要将矩阵视为行列表。（虽然有一个`col`功能可以在需要时提取一列）。

# c - 在c中使用后如何释放双指针？

> ID：12119692
> 
> 赞同：0
> 
> 时间：2012-08-25T06:15:03.330
> 
> 标签：c, malloc, free

```
float **tree0;

tree0 = (float**)malloc(255 * sizeof(float*));

for( i = 0; i < 255; i++) 
    tree0[i] = (float*)malloc(M * sizeof(float));
for(i = 0; i < 255; i++)
    for( k = 0; k < M; k++)
        tree0[i][k] = 2; 
```

我应该像这样释放它吗

```
free(tree0); 
```

我在某处出现堆损坏错误，并认为这可能是问题所在......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T06:16:49.617

您需要在.返回的相同地址上`free()`多次拨打电话。因此，您只需按照分配的方式进行操作：`malloc()``malloc()`

```
for( i = 0; i < 255; i++) 
    free(tree0[i])

free(tree0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:17:05.560

对于每个`malloc()`必须有一个`free()`. 您需要以与循环相同的方式进行迭代，但随后`malloc()`调用。`free(tree0[i])``free(tree0)`

请注意，`malloc()`不需要强制转换返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T06:16:45.597

每个都`malloc`需要一个`free`，所以你需要一个类似的`for`循环来释放所有内部 malloc。

# c# - 如果标题没有数据绑定，当单击编辑按钮时，如何在 GridView 行中获取 TextBox？

> ID：12119696
> 
> 赞同：0
> 
> 时间：2012-08-25T06:16:20.183
> 
> 标签：c#, asp.net

我有一个`GridView`, 的标题字段是我程序`GridView`中 a`ListBox`的项目。因此，每次运行时生成的列数都是动态的。基于此，如果我单击我的内部关联的编辑按钮`GridView`，如何`TextBox`为该行的每个单元格生成一个？

我写的.cs代码是：

```
protected void DONE4_Click(object sender, EventArgs e)
{
    Panel7.Visible = true;

    SqlDataAdapter mydat = new SqlDataAdapter("SELECT DISTINCT Profile_Instance FROM Profile_Master", con);
    DataSet dst = new DataSet();
    mydat.Fill(dst, "Table");
    ListBox3.Items.Clear();
    ListBox3.DataSource = dst.Tables[0];
    ListBox3.DataTextField = dst.Tables[0].Columns["Profile_Instance"].ColumnName;
    ListBox3.DataBind();

    int count = ListBox3.Items.Count;

    DataTable dt = new DataTable();
    DataRow rw = default(DataRow);
    for (int i = 0; i < ListBox1.Items.Count; i++)
    {
        dt.Columns.Add(ListBox1.Items[i].ToString(),
                                       System.Type.GetType("System.String"));
    }

    for (int j = 0; j < count; j++)
    {
        rw = dt.NewRow();
        for (int i = 0; i < ListBox1.Items.Count; i++)
        {
            rw[ListBox1.Items[i].ToString()] = " ";
        }
        dt.Rows.Add(rw);
    }

    GridView2.DataSource = dt;
    GridView2.DataBind();

    foreach (GridViewRow grdRow in GridView2.Rows)
    {
        DropDownList bind_dropdownlist = new DropDownList();                                                    // defining the property of the DropDownList as bind_dropdownlist
        bind_dropdownlist = (DropDownList)(GridView2.Rows[grdRow.RowIndex].Cells[0].FindControl("Pro_List"));   // finding the  DropDownList from the gridiew for binding
        SqlDataAdapter mydata = new SqlDataAdapter("SELECT DISTINCT Profile_Instance FROM Profile_Master", con);
        DataSet dset = new DataSet();                                                                           // binding the DropDownList with the dataset ds
        mydata.Fill(dset, "Table");
        bind_dropdownlist.DataSource = dset;
        bind_dropdownlist.DataTextField = "Profile_Instance";                                                   // set the DropDownList's DataTextField as designation which display the designation in the dropdownlist after fetching the data from database
        bind_dropdownlist.DataBind();
        bind_dropdownlist.Items.Insert(0, new ListItem("---Choose Profile---", "-1"));
    }
} 
```

的设计代码`GridView`是：

```
<asp:Panel ID="Panel7" runat="server">
    <asp:GridView ID="GridView2" runat="server" CellPadding="4"
        style="text-align: center; font-size: small" BackColor="White" 
        BorderColor="#CC9966" BorderStyle="None" BorderWidth="1px">

        <Columns>                
        <asp:TemplateField HeaderText="">
            <ItemTemplate>
                <asp:DropDownList ID="Pro_List" runat="server">
                    <asp:ListItem>--Select--</asp:ListItem>                          
                </asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:CommandField ShowEditButton="True" />

        </Columns>
    </asp:GridView>
</asp:Panel> 
```

有人可以帮我吗？我希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:03:06.090

如果您不是 Binding`GridView`并且仍想访问其中的控件，则可以使用该`GridViewRow`属性。

```
protected void grd_RowEditing(object sender, GridViewEditEventArgs e) 
{
     GridViewRow selectRow = grd.Rows[e.NewEditIndex];
     TextBox txtKj=(TextBox)selectRow.Cells[3].FindControl("txtKjId"); 
} 
```

# android - 在活动之间传递点数组并将其保存在 SQLite 中的最佳方法

> ID：12119697
> 
> 赞同：1
> 
> 时间：2012-08-25T06:16:27.277
> 
> 标签：android, android-intent, android-activity

我正在做一个“类似绘图”的项目，它使用户能够在 ActivityB 中绘制路径，然后在返回 ActivityA 时获取剪辑的照片，他们可以在其中选择保存以供下次再次编辑。

应该传递/保存的最重要和唯一的信息是用户绘制的 (x,y) 点。我使用两个浮点数组来存储值，并将它们作为额外的值传递给 ActivityA。（float[] 的大小都是有限的，500。）

```
intent.putExtra("EXTRA_X", xPoints);
intent.putExtra("EXTRA_Y", yPoints); 
```

保存到 SQLite 时，我保存了从 float[] 转换的两个字符串，因为 SQLite 不支持保存数组。

```
private String floatArrToStr(float[] arr) {
    StringBuilder s = new StringBuilder();
    for (int i = 0 ; i < length ; i++) {
        s.append(arr[i]);
        s.append(",");
    }
    return s.toString();
} 
```

我的问题是，这是传递和保存积分的最佳方式吗？使用 Parcelables 会更好（[Android：将 List<GeoPoint> 传递给另一个 Activity](https://stackoverflow.com/questions/4141944/android-pass-listgeopoint-to-another-activity)）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:10:58.587

You can pass a `Serializable` across activities.

```
Class PathPoint implements Serializable {
  public float x;
  public float y;
} 
```

then `ArrayList<PathPoint>` is also Serializable, can be placed into a `Bundle` and sent across.

# c++ - vptr 名称是否在 C++ 中被破坏？

> ID：12119698
> 
> 赞同：1
> 
> 时间：2012-08-25T06:16:28.343
> 
> 标签：c++, virtual-functions

尽管有很多关于如何在 C++ 中处理虚函数的文章，但我无法清除一个基本疑问。派生类的 vptr 变量是否被基类变量覆盖。ptr 变量的名称是否也被破坏了？

```
Class Base
{
public:
    virtual void test();
};

class Derived 
{
public:
     virtual void test();
}; 
```

如果我打电话

```
Base b = new Derived();
b->test(); 
```

它转变为

```
(*b->vptr[<index>])(b); 
```

index 指向 vtable 条目的位置。

我的疑问是这个 vptr 是否也名称损坏？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T06:23:56.937

C++ 标准甚至不承认`vptr`多态类中存在 a，因为它是一个实现细节，因此甚至不需要编译器以这种方式实现虚函数。所以不，`vptr`不是保留关键字（我认为您要问的是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:24:32.420

您无法通过语言方式访问 C++ 中的 vptr，因此请回答“否” - 没有这样的变量和名称，因此没有它的修饰:)

# android - 打开 Google Plus 应用程序的二维码

> ID：12119699
> 
> 赞同：0
> 
> 时间：2012-08-25T06:16:28.250
> 
> 标签：android, ios, qr-code, google-plus

我正在尝试通过可扫描的 QR 码链接我组织的 Google + 页面。当他们扫描代码时，它会将他们带到移动浏览器中的 Google+ 页面。**有没有办法让手机打开 Google+ 应用程序到我们的页面？**我知道你可以使用 Facebook *(fb://page/)*、 Twitter *(twitter://user?screen_name=),* 和 Foursquare *(foursquare://venues/VENUE_ID)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:21:24.317

您可能应该使用适当的 Intent.ACTION_VIEW 启动 Activity。如果用户安装了 Google+，那么应该启动应用程序。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://plus.google.com/yourlink"))); 
```

另请参阅此[页面](https://stackoverflow.com/questions/11867989/open-google-plus-page-via-intent-in-android)或此[页面](https://stackoverflow.com/questions/11327799/open-page-in-facebook-twitter-and-google-plus-app-from-other-app-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:40:39.560

我记得在某处读过适用于 iOS 的 Google+ URL 方案，`Mgc://`但由于某种原因，我似乎找不到任何关于此的文档。

但是，谷歌确实有一个关于如何分享到下面链接的 Google+ 的广泛指南。

[https://developers.google.com/+/mobile/ios/#share_on_google](https://developers.google.com/+/mobile/ios/#share_on_google)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T05:59:55.373

在 iOS 7 的 Safari 地址栏中输入“gplus://”确实会在我正在输入的 iPhone 4S 上启动 Google+ 应用程序，我可以保证。然而，文档是另一个问题......

# php - WordPress 问题？XML Sitemap 生成器查找 1000 个无限循环 URL（总共应该有大约 200 个 URL）

> ID：12119704
> 
> 赞同：0
> 
> 时间：2012-08-25T06:17:42.033
> 
> 标签：php, xml, wordpress, apache, sitemap

我通过[http://www.xml-sitemaps.com](http://www.xml-sitemaps.com)运行我的网站，我知道我的网站有大约 200 个页面，这个生成器在 500 个页面后达到最大值，而其他生成器不断找到数千个 URL（我必须停止爬行，因为它似乎永远不会结束）。

这是因为它正在寻找这样的 URL：

当前页面：blog/index.php/barmah-hats-the-sensible-choice/www.website.co.uk/blog/index.php/barmah-hats-the-great-autralian-hat/www.website.co .uk/blog/index.php/barmah-hats-the-great-autralian-hat/www.website.co.uk/blog/index.php/barmah-hats-the-great-autralian-hat/www.website .co.uk/blog/index.php/barmah-hats-the-great-autralian-hat/www.website.co.uk/blog/index.php/barmah-hats-the-great-autralian-hat/www .website.co.uk/blog/index.php/barmah-hats-the-great-autralian-hat/

显然页面只是

[http://www.website.com/blog/index.php/barmah-hats-the-sensible-choice/](http://www.website.com/blog/index.php/barmah-hats-the-sensible-choice/)

它似乎在末尾附加了另一个文章 URL

这是生成器的错，还是我的 htaccess 规则有问题？我不知道，任何帮助将不胜感激。

我应该注意，这个问题只发生在 /blog/ 目录中，这是一个 wordpress 安装。

我担心这些页面会开始索引。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:53:44.373

修复了它，我在博客页面上有一个指向“www.website.com”而不是“http://www.website.com”的链接，所以它指向 /www.website.com 认为它是目录。

# objective-c - iOS - 将对象传递给视图控制器

> ID：12119707
> 
> 赞同：0
> 
> 时间：2012-08-25T06:18:15.723
> 
> 标签：objective-c, ios, viewcontroller

我想使用 parse.com 将一些对象从 tableview 传递到视图控制器。我试过了，但它不起作用：我做错了什么吗？有任何想法吗？我还添加了我的详细控制器 .m 和 .h 文件，谢谢..

```
-(void) tableView: (UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

   NSInteger row = [indexPath row];
  NSLog(@"%i",row);

 PFObject *object = [self objectAtIndex:indexPath];

//Create a DetailViewController object
MyTableViewDetail * MTD = [[MyTableViewDetail alloc] initWithNibName:@"MyTableViewDetail" bundle:nil];

MTD.label1.text =[object objectForKey:@"columntext"];

//push the detail view controller object onto the stack

[self.navigationController pushViewController:MTD animated:YES];

 //tableView.backgroundColor =[UIColor clearColor];

} 
```

我的细节.h：

```
@interface MyTableViewDetail : UIViewController{

}

@property (strong, nonatomic) IBOutlet UILabel *label1;
@property (strong, nonatomic) IBOutlet UIImageView *imagedetail;

@end 
```

我的 .m 文件：

```
#import "MyTableViewDetail.h"
#import "MyTableController.h"

@interface MyTableViewDetail ()

@end

@implementation MyTableViewDetail
@synthesize label1;
@synthesize imagedetail;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    // Custom initialization
}
return self;
}

-(void)viewDidLoad{

[super viewDidLoad];

}

- (void)viewDidUnload
{
[self setLabel1:nil];
[self setImagedetail:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:12:25.613

根据[Apple 的文档](http://developer.apple.com/Mac/library/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW19)，看起来 NIB/XIB 中的所有插座都应该在该 NIB/XIB 中`awakeFromNib`的任何对象上调用之前连接，但是当在对象上调用等时，插座~~可能~~没有连接`init`. 您必须将值传递给一些强大的属性，并在 awakeFromNib 中完成所有工作。

```
- (void)awakeFromNib
{
    self.label1.text = self.columnText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:58:10.523

解决了。我在 MyTableViewDetail 中创建了一个单独的属性，例如“columntext”，然后

```
set MTD.columntext = [object objectForKey:@"columntext"];,
set self.label1.text = self.columntext; in viewDidLoad of MyTableViewDetail. 
```

# objective-c - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSCFString objectForKey:]：无法识别的选择器已发送到实例

> ID：12119714
> 
> 赞同：2
> 
> 时间：2012-08-25T06:21:35.620
> 
> 标签：objective-c, ios, nsdictionary

我主要有以下代码`header file`

```
NSMutableArray *array;
NSDictionary *dict,*dict1; 
```

`.m`文件包含显示项目名称及其相应价格的字典数组，我已将其显示在`UITableView`

```
 - (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
   {
      return [array count];
   }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   { 
      static NSString *CellIdentifier = @"Cell";

      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
      if (cell == nil) 
        {
           cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        }
      cell.textLabel.text=[NSString stringWithFormat:@"%@ %@",[[array objectAtIndex:indexPath.row]objectForKey:@"name"],[[array objectAtIndex:indexPath.row]objectForKey:@"price"]];
                    return cell;        
   } 
```

当用户选择任何一个项目时，它会将`dictionary`另一个`dictionary`称为通行证发送到`VegQuantityViewController`数量必须乘以价格的地方

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.row==0)
    {           
         VegQuantity *vegetarian1 = [[VegQuantity alloc] initWithNibName:@"VegQuantity" bundle:nil];    
        vegetarian1.pass=dict;
        [self presentModalViewController:vegetarian1 animated:YES];
    }
    if(indexPath.row==1)
    {           
        VegQuantity *vegetarian1 = [[VegQuantity alloc] initWithNibName:@"VegQuantity" bundle:nil];
        vegetarian1.pass=dict1;
        [self presentModalViewController:vegetarian1 animated:YES];
     }
}

- (void)viewDidLoad 
{
    array=[NSMutableArray array];
    dict=[NSDictionary dictionaryWithObjectsAndKeys:@"20.00",@"price",@"tomato soup",@"name",nil];
    [array addObject:dict]; 
    dict1=[NSDictionary dictionaryWithObjectsAndKeys:@"10.00",@"price",@"Veg Manchow soup",@"name",nil];
    [array addObject:dict1];
    NSLog(@"The array of dictionaries contains%@",array);
    [super viewDidLoad];
} 
```

`VegQuantity.h`

```
NSDictionary *pass;
IBOutlet UIButton *done;
IBOutlet UITextField *input,*output;
NSNumber *prices;
float x,y,c; 
```

`VegQuantity.m`

该`done`按钮只是检索该特定菜肴的密钥并将其与用户输入的数量相乘，并将其`textfield`显示在`textfield` 我`NSInvalidArgumentException`在通过`objectForKey`线上面临的输出中，这可能是什么问题？

```
-(IBAction)done:(id)sender
{   
    prices=[pass objectForKey:@"price"];
    x=[input.text floatValue];
    y=[prices floatValue];
    c=x*y;
    output.text=[NSString stringWithFormat:@"%f",c];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:32:57.200

在 viewDidLoad 方法中更改以下代码。

```
array=[[NSMutableArray alloc]init];
dict=[[NSDictionary alloc] initWithObjectsAndKeys:@"20.00",@"price",@"tomato soup",@"name",nil];
[array addObject:dict]; 
dict1=[[NSDictionary alloc]initWithObjectsAndKeys:@"10.00",@"price",@"Veg Manchow soup",@"name",nil];
[array addObject:dict1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T06:30:42.463

在您的案例数组中， dict 和 dict1 是`autoreleased`对象。在方法中保留这些成员变量`viewDidLoad`。或者对这些变量具有保留属性。它正在崩溃，因为 dict 正在被释放。崩溃表明变量 dict 是 type `CFString`，这可能是由于`autoreleasing`该对象引起的。

# java - 替换Java中的静态引用方法

> ID：12119720
> 
> 赞同：4
> 
> 时间：2012-08-25T06:22:54.067
> 
> 标签：java, reflection, methods, static, bcel

我有一个像下面这样的类，它的方法只返回一个字符串，但我想修改它从另一个类返回的内容，而不是自己对其进行硬编码。

```
public class Name {
    public static String getName() {
        return "MyName";
    }
} 
```

有没有办法做到这一点？我尝试了 BCEL，但这似乎并没有改变返回值。

编辑：这是一个模组。我试图通过不修改它使其完全独立于现有代码。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:00:38.413

你*确定*你试过BCEL吗？我在[这里](http://pastie.org/private/p05jdjpxskuj2ede0jsm2w)创建了一个完整的示例。

```
JavaClass target;
try {
  target = Repository.lookupClass("Target");
} catch (final ClassNotFoundException ex) {
  throw new RuntimeException("unable to resolve Target", ex);
}
final ClassGen targetGen = new ClassGen(target);
final ConstantPoolGen pool = targetGen.getConstantPool();
final ConstantMethodref ref = (ConstantMethodref) pool.getConstant(
    pool.lookupMethodref("Name", "getName", "()Ljava/lang/String;"));
ref.setClassIndex(pool.lookupClass("Target"));
ref.setNameAndTypeIndex(pool.addNameAndType("$Name$getName", "()Ljava/lang/String;"));
final InstructionList code = new InstructionList();
final InstructionFactory factory = new InstructionFactory(targetGen, pool);
code.append(factory.createConstant("overriden-name"));
code.append(factory.createReturn(Type.STRING));
code.setPositions();
final MethodGen methodGen = new MethodGen(
    Constants.ACC_PRIVATE | Constants.ACC_SYNTHETIC | Constants.ACC_STATIC,
    Type.STRING, new Type[0], new String[0], "$Name$getName", "Target",
    code, pool);
methodGen.setMaxLocals(0);
methodGen.setMaxStack(1);
targetGen.addMethod(methodGen.getMethod());
try {
  targetGen.getJavaClass().dump("Target.class");
} catch (final IOException ex) {
  throw new RuntimeException("unable to save Target", ex);
} 
```

> ```
> C:\dev\scrap>javac Target.java
> C:\dev\scrap>java Target
> original-name
> C:\dev\scrap>javac -cp .;bcel-6.0.jar Instrumenter.java
> C:\dev\scrap>java -cp .;bcel-6.0.jar Instrumenter
> C:\dev\scrap>java Target
> overriden-name 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:25:35.900

您可以将参数传递给方法

```
 public class Main {
        getName("newName")
    }

public class Name {
    public static String getName(String name) {
        return name;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T06:30:22.167

您可以尝试添加一个`-javaagent`代理，该代理将使用[asm](http://asm.ow2.org/)或[bcel](http://commons.apache.org/bcel/)之类的东西来修改`Name`类的字节码，以便静态方法返回另一个字符串。许多模拟测试框架——例如[powermock](http://code.google.com/p/powermock/)或[jmockit——](http://code.google.com/p/jmockit/)可以做到这一点。

**编辑**：[这里](http://pastie.org/4584980)有一些示例代码可以帮助您入门。这是一个 javaagent，它可以修改给定的公共静态方法，该方法返回 a`String`以返回另一个常量`String`。例如：

```
public class TestMain
{
    public static void main(String[] args)
    {
        System.out.println(Name.getName());
    }
}

class Name
{
    public static String getName()
    {
        return "ORIGINAL";
    }
}

$ java -cp build/libs/bciex.jar mycompany.myapp.TestMain
ORIGINAL
$ java -cp build/libs/bciex.jar -javaagent:build/libs/bciex.jar="mycompany.myapp.TestMain|getName|SOME_STRING" mycompany.myapp.TestMain
Agent loaded; will modify [getName] method of classes in [mycompany.myapp.TestMain] to return [SOME_STRING]
SOME_STRING
$ 
```

# xaml - 如何使用 Prism 和 Unity 在 XAML 中打开一个新窗口？

> ID：12119721
> 
> 赞同：2
> 
> 时间：2012-08-25T06:23:11.523
> 
> 标签：xaml, c#-4.0, unity-container, prism-4

我是 WPF 和 Prism 的新手。目前，我正在使用带有 Unity 的 Prism 进行应用程序，该应用程序要求我打开一个新窗口，在该窗口中我有输入数据并提交数据的字段。我创建了一个视图来输入数据。但无法弄清楚如何调用它。

我在 xaml 中有以下内容：

```
<Button prism:Click.Command="{Binding DataContext.OpenNewWindowCommand}" Grid.Row="2"
ToolTipService.ToolTip="Click to open New Window." Width="75" > 
```

我应该在 xaml 中写什么来完成它，还是我需要在 OpenNewWindow 命令中编写一些代码来打开它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:29:18.263

首先，您应该注册您的视图：

```
container.RegisterType<Object, SupplierEditView>(ModuleViewNames.SupplierEditView, new TransientLifetimeManager()); 
```

然后在 viewmodel 的命令中，您应该编写如下内容：

```
 var regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
            var url = ModuleViewNames.SupplierEditView;
            var q = new UriQuery();
            q.Add("Id", SelectedItem.Id.ToString());

            regionManager.RequestNavigate(PrismRegions.Documents, url + q, (e) =>
            {
                if (e.Error != null)
                    MessageBox.Show(e.Error.ToString());

            }); 
```

`ModuleViewNames.SupplierEditView`是您的视图名称字典中的字符串

# c - realloc 和 malloc 函数

> ID：12119724
> 
> 赞同：-4
> 
> 时间：2012-08-25T06:23:30.790
> 
> 标签：c, memory-management, malloc, realloc

看代码：

```
#include<stdio.h>

 #include<stdlib.h>
void main()
{
  int *p;
  p = malloc(6);
  p = realloc(p, 10);
  if (p == NULL)
  {
    printf("error");
   exit(1);
   }
} 
```

以这个代码为例，假设总内存为 10 个字节，其中 2 个字节被声明为 int 类型的指针使用，另外 6 个字节由 malloc 函数占用，其余 2 个字节被其他程序占用，现在当我运行 realloc 函数时为了扩展指针指向的内存，它将在内存中搜索 10 个字节，当它不可用时，它从堆区域分配 10 个字节的内存并复制 malloc 的内容并将其粘贴到堆区域的新分配内存区域中，并且然后删除存储在malloc中的内存对吗？

realloc() 是否因为内存不可用而返回 NULL 指针？没有权利！？它确实进入堆区域进行内存分配，对吗？它不返回 NULL 指针对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:29:40.260

正确 - 如果`realloc`无法调整您传入的内存块的大小，它会创建一个新的，复制数据并释放旧的。

**然而：**

1.  `malloc`实现通常不在字节粒度上操作。我见过的大多数都将所有内容四舍五入到最接近的 16 个字节，因为它使记帐更容易，而且许多用户无论如何都需要这种对齐方式。在您的情况下，这最终会导致`realloc`无操作，因为两种大小都最多为 16 个字节。

2.  在大多数常见的多任务操作系统中，您的应用程序唯一可以访问的内存是它自己的内存——其他应用程序的内存永远不会妨碍您。但是，库或其他线程分配的内存可能会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:29:37.220

如[realloc 规范中](http://pubs.opengroup.org/onlinepubs/7908799/xsh/realloc.html)所述：

> 如果内存对象的新大小需要移动对象，则释放对象先前实例化的空间。

# iphone - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFType next]：无法识别的选择器已发送到实例”

> ID：12119728
> 
> 赞同：0
> 
> 时间：2012-08-25T06:24:41.560
> 
> 标签：iphone, objective-c, ios

由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[__NSCFType next]：无法识别的选择器发送到实例'发生此错误是因为此行“[self autorelease];” 如果我评论这一行，那么异常不会出现，但应用程序看起来很慢，所以请告诉我，我可以写什么而不是那一行

> ```
> if(sqlite3_step(statement)==SQLITE_ROW)
> {                
>      pagestr = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,0)];
>      //dateLabel.text=previousDate;
>      //textView.text=pagestr;
>      EditorPage* prev= [[EditorPage alloc] initWithNibName:@"EditorPage" bundle:nil];
>      prev.dateString= previousDate;
>      prev.bodyString= pagestr;
>      NSArray* array= [[NSArray alloc] initWithObjects:prev,@"forward",nil];
>      [[NSNotificationCenter defaultCenter] postNotificationName:@"next EditorPage" object:array];
>      [prev autorelease];
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:27:52.577

你什么时候做`[ self autorelease ]`？我认为这很不寻常——它可能是不正确的。

此消息意味着您正在将消息发送到 的对象*旁边*`NSCFType`。

像这样的消息通常是由向已释放的对象发送消息而引起的，该对象的内存随后被重新分配给不同类型的对象。

您可以打开僵尸来追踪此类问题。**此外，您可以将代码移动到 ARC 以帮助避免保留/发布问题。**

# c# - NHibernate 中的 Auditor 事件侦听器实现中的错误调用“OnPreUpdate”

> ID：12119730
> 
> 赞同：0
> 
> 时间：2012-08-25T06:25:14.547
> 
> 标签：c#, nhibernate, nhibernate-3

我有一个使用 NHibernate 3 的项目。我`Auditor Event Listener`在 NHibernate 中用于修剪我的实体中的字符串属性。

我的代码是：

```
public class AuditorEventListener : IPreInsertEventListener, IPreUpdateEventListener
{
    public bool OnPreInsert(PreInsertEvent preInsertEvent)
    {
        Correction(preInsertEvent.Entity);
        return false;
    }

    public bool OnPreUpdate(PreUpdateEvent preUpdateEvent)
    {
        Correction(preUpdateEvent.Entity);
        return false;
    }

    internal static void Correction(object entity)
    {
        var properties = entity.GetType().GetProperties().Where(p =>  p.PropertyType == typeof(String));

        foreach (var item in properties)
        {
            var result = item.GetValue(entity, null).ToString();
            result = result.Trim();
            item.SetValue(entity, result, null);
        }
    }
} 
```

NHibernate 配置是：

```
<event type="pre-insert">
  <listener class="NS.NHibernate.AuditorEventListener, NS.NHibernate" />
</event>
<event type="pre-update">
  <listener class="NS.NHibernate.AuditorEventListener, NS.NHibernate" />
</event> 
```

我使用以下命令来保存和更新实体：

```
SessionInstance.Save(item);
SessionInstance.Update(item); 
```

我的问题在于保存实体。当我调用保存方法时，`OnPreInsert` 方法被调用。当我调用 CommitTransaction() 时`OnPreUpdate`会自动调用。

另外我`Concurrency`在 NHibernate 中使用了这个自动`OnPreUpdate`调用导致`Version`数据库中的属性值`2`不是`1` 到目前为止没有问题但是对于这个实体的下一次更新会发生并发错误，因为这个实体中`1`的版本值是但数据库中的版本值是`2`。

为什么`OnPreUpdate`叫？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:12:55.517

为什么要调用 OnPreUpdate？

它看起来像您在“FlushMode.Auto”或“FlushMode.Commit”中设置的“session.FlushMode”您可以使用“FlushMode.Never”但您必须显式调用“session.Flush()”

你见过使用拦截器的机会吗，它看起来比 EventListener 更强大

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:37:47.237

我不知道它是否有帮助，但无论如何，每当您更新实体中的某些内容时，您也应该在 preInsertEvent.State/preUpdateEvent.State 中更新它。有关更多信息，请查看这篇文章[http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener](http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener) 希望这会有所帮助

# android - 从主要活动更改列表视图字段属性

> ID：12119735
> 
> 赞同：2
> 
> 时间：2012-08-25T06:25:46.967
> 
> 标签：android, listview, android-listview, baseadapter

我正在开发一个 Android 应用程序。在我的主要活动中，我必须实现一个列表。以下是我页面的示例形状

```
|----------------------| \
|  |Button|            |  \
|----------------------|   \                  
|listview row1         | \   \
|listview row1         |  \   \---------Screen
|listview row1         | / --/----- ListView 
|                      |/   /
|                      |  /
|                      | /
|______________________|/ 
```

该按钮在我的活动页面中，listview 行正在baseadapter 中创建。Listview 包含一个 textview。现在，当我从活动中单击按钮时，我必须更改 Textviews 背景颜色，下次单击按钮时，textviews 颜色将保留旧颜色。我该怎么做朋友？我在 getview() 方法中声明了 textview。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:15:57.167

可能还有其他方法，但我会循环浏览按钮的 OnClick 方法中的列表行。就像是：

在您的活动字段定义中：

```
 static final int colourA=Color.argb(255,255,0,0);
    static final int colourB=Color.argb(255,0,255,0);
    int currentColour=colourA; 
```

在您的活动 OnCreate 中：

```
 Button myButton = (Button) findViewById(R.id.myButton); 
        final ListView myListView = (ListView) findViewByID(R.id.myListView);
        //change myButton to your button id, and myListView to your ListView id
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                //This is the code to toggle the colours, you can do pretty much whatever you want here though
                if (currentColour==colourA){
                    currentColour=colourB;
                } else {
                    currentColour=colourA;
                }

                //This cycles through all the root views in the ListView. If you want to change the
                //colour of only one view in the row layout, in the for loop use 
                //rowView.findViewById(R.id.myViewInRow).setBackgroundColor(currentColour);
                //instead, to get the relevant view in the row
                View rowView;
                for (int i=0;i<myListView.getChildCount();i++){
                    rowView=myListView.getChildAt(i);
                    rowView.setBackgroundColor(currentColour);
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:24:46.367

最后我得到了解决方案。它可能对其他人有帮助。但我不是关于我的代码的质量。

第1步）

我在我的活动中创建变量

```
static int hidestate=0; 
```

在点击方法的隐藏按钮中，我写了这个

```
hide_btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if (hidestate==0) {

                hidestate=1;

                sMSConversationAdapter.notifyDataSetChanged();
                hide_btn.setText("Show All");

            }else {
                hidestate=0;

                sMSConversationAdapter.notifyDataSetChanged();
                hide_btn.setText("Hide All");
            }

        }
    }); 
```

步骤 2) 以下是我的 BaseAdapter 类 getView()

```
public View getView(final int position, View convertView, ViewGroup parent) {

    View vi=convertView;
    final TextView message;

    if(convertView==null)
        vi = inflater.inflate(R.layout.smsconversation_row, null);

    RelativeLayout nws=(RelativeLayout)vi.findViewById(R.id.all);
    message=(TextView)vi.findViewById(R.id.snt_txt);

    if (SMSConversationHome.hidestate==1) {
        message.setVisibility(View.INVISIBLE);

    }
    else{

        message.setVisibility(View.VISIBLE);

    }
} 
```

谢谢朋友们的帮助。

# c - 我在哪里可以找到函数“__swtch_pri”的代码？

> ID：12119739
> 
> 赞同：1
> 
> 时间：2012-08-25T06:26:30.960
> 
> 标签：c, unix, kernel

在哪里可以找到函数 __swtch_pri 的实现代码？

```
void
__spin_lock_solid (spin_lock_t *lock)
{
  while (__spin_lock_locked (lock) || ! __spin_try_lock (lock))
    /* Yield to another thread (system call).  */
    __swtch_pri (0);
} 
```

只能在 glibc 中找到声明，见下文。

```
/* Attempt to context switch the current thread off the processor.  Lower
the thread's priority as much as possible.  The thread's priority will
be restored when it runs again.  PRIORITY is currently unused.  Return
true if there are other threads that can be run and false if not.  */

extern boolean_t swtch_pri (int priority);

extern boolean_t __swtch_pri (int priority); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T06:52:47.157

它在马赫内核中。具体来说，请参见[/hurd/gnumach/kern/syscall_subr.c](http://code.metager.de/source/xref/hurd/gnumach/kern/syscall_subr.c#78)。GNU C 库支持除了 Linux 之外的许多操作系统内核，您可能已经在一个特定于操作系统的源文件中找到了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:36:16.597

快速谷歌搜索表明这是一个马赫系统陷阱（系统调用）。因此，函数实现很可能是一个简短的汇编存根，它只是陷入内核；真正的实现将在内核代码中。

来自[http://www.gnu.org/software/hurd/gnumach-doc/Hand_002dOff-Scheduling.html](http://www.gnu.org/software/hurd/gnumach-doc/Hand_002dOff-Scheduling.html)：

> — 函数：boolean_t swtch()
> 
> 系统陷阱 swtch 尝试将当前线程关闭处理器。返回值指示处理器集中是否有超过当前线程正在运行。这对于锁管理例程很有用。
> 
> 如果线程有理由通过继续旋转而成为资源占用者，则该调用返回 FALSE，因为处理器无法做任何其他有用的事情。如果线程应该对锁再做一次检查，然后成为一个好公民并真正挂起，则返回 TRUE。
> 
> — 功能：boolean_t swtch_pri（int 优先级）
> 
> 系统陷阱 swtch_pri 尝试像 swtch 一样将当前线程关闭处理器，但在此期间将线程的优先级降低到可能的最小值。目前没有使用优先级。
> 
> 返回值与 swtch 相同。

# sql-server-2008 - 如何找出在全文搜索中找到搜索关键字的位置

> ID：12119740
> 
> 赞同：1
> 
> 时间：2012-08-25T06:26:53.020
> 
> 标签：sql-server-2008, full-text-search

考虑这个

```
SELECT  * 
FROM Publication a          
INNER JOIN  CONTAINSTABLE(Publication, (Title, Keywords), 
@TitlePartial)TitleSearchPartial ON  a.Id = TitleSearchPartial.[Key] 
```

我在表的 (`Title`和`Keyword`) 列中搜索`Publication`。搜索关键字可以在“标题”或“关键字”中的任何位置找到 如何找到搜索关键字在哪一列中找到？有没有开箱即用的方法来做到这一点？

有任何想法吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:17:35.203

你可以尝试这样的事情：

```
SELECT *,
    CASE
        WHEN b.[Key] IS NOT NULL THEN 'Title'
        WHEN c.[Key] IS NOT NULL THEN 'Keywords'
        END AS MatchColumn
FROM Publication a
    LEFT JOIN CONTAINSTABLE(Publication, Title, @TitlePartial) b
        ON a.Id = b.[Key]
    LEFT JOIN CONTAINSTABLE(Publication, Keywords, @TitlePartial) c
        ON a.Id = c.[Key]
WHERE (b.[Key] IS NOT NULL
        OR c.[Key] IS NOT NULL) 
```

您可能必须添加另一个案例来匹配两列。另外，不幸的是，我现在无法对此进行测试。

# ios - IOS navigationController pushViewController 第一次很慢

> ID：12119742
> 
> 赞同：1
> 
> 时间：2012-08-25T06:27:21.183
> 
> 标签：ios, interface, uinavigationcontroller

第一次使用pushViewController时，速度很慢（界面假死），第二次是正常速度。

控制器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      B *b = [[B alloc] init];//xib which the content is very less
     [self.navigationController pushViewController:b animated:YES];
     [b release];
     NSLog(@"yes\n");
} 
```

B控制器：

```
-(void)viewDidLoad
{
   [super viewDidLoad];
   //i have deleted all code
}
//-(void)viewWillAppear..... 
```

主要的：

```
//https://github.com/ipup/PPRevealSideViewController
A* a = [[A alloc] init];
UINavigationController* n = [[UINavigationController alloc] initWithRootViewController:a];
PPRevealSideViewController*  revealSideViewController = [[PPRevealSideViewController alloc] initWithRootViewController:n];
//tabbar add revealSideViewController 
```

谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:26:35.487

我已经修好了，我的xib文件有800k，我也不知道怎么做。

```
<object class="NSColor" key="IBUINormalTitleColor">
 <int key="NSColorSpace">1</int> 
     <bytes>.................
</object> 
```

# c# - C#.Net 强制转换和实例化内存分配

> ID：12119751
> 
> 赞同：0
> 
> 时间：2012-08-25T06:28:42.193
> 
> 标签：c#, asp.net, .net, memory, casting

有人可以解释一下这种用法与性能副有什么区别吗？这些只是对两个继承类的函数调用。第一个使用继承的优势，第二个丢弃它。

```
class ClassA 
{
    public void X()
    {
        Console.WriteLine("ClassA: X()");
    }
}

class ClassB : ClassA
{
    new public void X()
    {
        Console.WriteLine("ClassB: X()");
    }
}

class CheckMemory
{
    public void testMemory ()
    {  
        //Code block 1
        ClassB bob1 = new ClassB();
        ClassA aob1 = bob1;

        aob1.X();
        bob1.X();

        //Code block 2 
        ClassB bob2 = new ClassB();
        ClassA aob2 = new ClassA();

        aob2.X();
        bob2.X();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:34:03.850

在第一种情况下，我们不是分配一个新对象，而是重用它，即 bob1 和 aob1 都指向堆上对象的同一个实例。

在第二个块中，您正在创建两个不同类的两个不同实例，它们占用堆中的两个内存位置，而不是第一个。

所以第一个是内存效率然后第一个，我希望这个解释有帮助。

# android - View.isHardwareAccelerated() 始终为假

> ID：12119753
> 
> 赞同：12
> 
> 时间：2012-08-25T06:28:51.660
> 
> 标签：android, hardware-acceleration

我有一个在许多设备上进行硬件加速的视图。在该视图中，我需要能够检查是否使用了硬件加速。 [根据 Android SDK 文档](http://developer.android.com/guide/topics/graphics/hardware-accel.html#determining)，这是使用`View.isHardwareAccelerated()`. 有趣的是，在支持硬件加速的设备上进行测试时，此方法总是返回 false，即使 View 本身实际上正在硬件加速。（我已经最终验证了这一点）它变得更加混乱：

如果我打电话给`View.getLayerType()`我，我发现它总是设置为`View.LAYER_TYPE_NONE`. 如果我打电话，`View.setLayerType(View.LAYER_TYPE_SOFTWARE)`我可以有效地禁用硬件加速。`View.setLayerType(View.LAYER_TYPE_HARDWARE)`我可以通过调用OR重新启用它`View.setLayerType(View.LAYER_TYPE_NONE)`。为什么要`View.LAYER_TYPE_NONE`启用硬件加速？？？

继续前进，对于支持硬件加速的设备，我似乎可以通过检查是否`View.LAYER_TYPE_SOFTWARE`设置来检查状态，但是我怀疑这种方法不适用于不支持硬件加速的设备。我想知道我是在滥用`View.isHardwareAccelerated()`还是只是坏了。

编辑：我想我更接近于理解这个问题。这个问题也很有帮助：

[在运行时检测硬件加速：Android](https://stackoverflow.com/questions/6792115/detect-hardware-acceleration-at-runtime-android)

我的工作理论是视图在调用它的构造函数时还不知道它是否是硬件加速的，这就是我正在检查的地方。如果是这种情况，我想知道我可以在扩展 View 的类中覆盖什么，这将使我能够成功检查硬件加速。我怀疑这`View.onSizeChanged(...)`会起作用，但我想避免使用可能被多次调用的东西。

编辑＃2：看起来就是这样。我把我的支票搬进去了`View.onSizeChanged()`，现在它报告正确了。我仍然想知道我的视图中是否有更好的地方可以移动这张支票。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-02T03:00:38.263

我自己一直在思考这个问题。很高兴看到您弄清楚问题所在。该文档确实正确地描述了这一点，但并不是很清楚。“返回：如果视图**附加**到窗口并且窗口是硬件加速的，则为真”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T12:39:26.887

正如 Diane Hackborn 在这篇文章中提到的那样：[https ://groups.google.com/forum/#!topic/android-developers/vAH0HAZg0uU](https://groups.google.com/forum/#!topic/android-developers/vAH0HAZg0uU)

您应该在视图附加到窗口后检查 isHardwareAccelerated() - 例如在 onAttachedToWindow() 中！

# css - 如何让页面内容拉伸并将页脚粘贴到页面底部？

> ID：12119755
> 
> 赞同：0
> 
> 时间：2012-08-25T06:29:33.100
> 
> 标签：css, layout, height, footer, sticky-footer

我一直试图让这个我该死的布局工作这么久，而且它超级令人沮丧。我是 CSS 新手，所以请放轻松，但我查阅了很多关于粘性页脚和拉伸内容等的文章，但我仍然无法让它工作。最小高度对我没有任何帮助！

[这是我希望我的网站在没有足够内容来填充页面时的样子。](http://i.imgur.com/rrAKj.png)

[这就是我希望它在内容让您滚动时的样子。](http://i.imgur.com/pkOOA.png)

这是html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcome to SilmanServer!</title>
<link href="./main.css" rel="stylesheet" type="text/css" />

</head>

<body>

<div id="pageHeader"> 
<h1>SilmanServer</h1>
<p>Aaron Silman's Personal Home Server </p>
</div>

<div id="navigation">
    <ul>
        <li><a href="./index.html">Home</a></li>
        <li><a href="./blog.html">Blog</a></li>
        <li><a href="./projects.html">Projects</a></li>
        <li><a href="./about.html">About Me</a></li>
        <li><a href="./contact.html">Contact</a></li>
    </ul>
</div>

<div id="main">

<div>
<h2>What the hell?</h2>
    <p>
    This the project I embarked on around June of 2012 with an old computer that I had at home. My goal: To transform that old, useless HP Pavilion a6750y into a fully functioning webserver for this website! Along the way I also learned (X)HTML, CSS, Javascript, PHP, MySQL and a bunch of other things needed for designing and developing websites, as well as administrating my own server.
    </p>
</div>

<div>
<h2> Why? </h2>
    <p> As mentioned before, I really wanted to learn how to build websites that function both on the client side and server side. I wanted to just play around and learn. So I started learning, beginning with the basics. I will also use this website as documentation, tracking my progress and noting a lot of important steps so if anyone (including myself - in case I forget) wants a guide to setting up a server and learning web design and development they an refer to <a href="./guide_to_the_web.html">this page </a> for a complete, idiot-proof, guide to the web from scratch.
    </p>
</div>

</div>

<div id="pageFooter">
    <p> This is a footer
    </p>
</div>

</div>
</body>
</html> 
```

这是CSS：

```
/* Eric Meyer's Reset CSS v2.0 - http://cssreset.com */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{border:0;font-size:100%;font:inherit;vertical-align:baseline;margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}

/* Global Styles */

html{
    background: url(./images/sway.jpg);
    background-attachment: fixed;
    background-repeat::no-repeat;
}

body {
    width: 80%;
    margin: 0 auto; 
}
/* pageHeader Styles */

#pageHeader{
    height: 100px;
    background:#999;
}

#pageHeader h1 {
    padding-left: 30px;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 3.5em;
    color:#F93;
}

#pageHeader p{
    padding-left: 40px;
    font-family: "Times New Roman", Times, serif;
    font-size: 2em;
    color: white;
}

/* navigation Styles */

#navigation{
    float:left;
    width:100%;
    background: #0CF;
    overflow: hidden;
    position: relative;
}

#navigation ul{

}

#navigation li{
    float: left;
    margin: 0 20px;
    font-size: 1.5em;
}

#navigation li a:link {color:#F60;}    /* unvisited link */
#navigation li a:visited {color:##89ABFC;} /* visited link */
#navigation li a:hover {color:#3FF;}   /* mouse over link */
#navigation li a:active {color:#009;}  /* selected link */

/* main Styles */

#main{
    width: 80%;
    margin: 0 auto;
    border: 2px solid black;
    background: #999;
    color: #FFF;
}

/* pageFooter Styles */

#pageFooter{
    height: 100px;
    background:#999;
}

#pageFooter h1 {
    padding-left: 30px;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 3.5em;
    color:#F93;
}

#pageFooter p{
    font-family: "Times New Roman", Times, serif;
    font-size: 2em;
    color: white;
} 
```

我该怎么做才能达到这种效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T06:52:44.577

您正在寻找的是“粘性页脚”。

*   较旧的纯 CSS 方法要求您知道页脚的确切高度。我能够通过快速 Google 搜索找到的最佳解决方案是[Ryan Fait 的 Sticky Footer](http://ryanfait.com/sticky-footer/)。Ryan 的教程通过将 100% 的高度放在 wrapper 元素上（其中包含除页脚之外的内容）。这个 100% 的高度是什么让你的内容将页脚推到窗口底部，然后页脚使用负边距蠕虫回到可见区域（这就是为什么你需要知道页脚的高度......负边距必须与页脚元素的高度相同）。有一些额外的部分可以使它在所有浏览器（如`<div class="push"></div>`）中可靠地工作，但这基本上就是正在发生的事情。

*   较新的纯 CSS 解决方案需要使用`display: table;`（IE7 不支持），但允许使用可变高度的页脚（请参阅[Sticky CSS 页脚：灵活的方式](http://pixelsvsbytes.com/blog/2011/09/sticky-css-footers-the-flexible-way/)）。这可能是我推荐的方法。

第二篇文章的作者提到 Javascript 可用于添加 IE7 支持，但没有编写实际的 Javascript。在给出这个答案时，[StatCounter](http://gs.statcounter.com/#browser_version-ww-monthly-201107-201207)将 IE7 列为具有大约 1.28% 的市场渗透率。我会让你决定是否支持 IE7 是否重要，但如果可以的话，我想加我的 0.02 美元：-p 首先，IE7 的所有用户都有到 IE8 的升级路径，拒绝更新的用户是只会让 Web 开发人员的生活变得更加困难（IE7 到 IE8 为许多重要的 CSS2 选择器开辟了可能性，并修复了许多烦人的浮动问题并使`display: table;`可能的）。除了让 Web 开发人员的生活变得更加艰难之外，他们还让自己对大量的浏览器黑客行为开放，这些黑客行为会危及他们的计算机，使他们成为黑客想要扩大僵尸军队的容易目标（这使得[其他人的安全性变得更加困难](http://en.wikipedia.org/wiki/Herd_immunity)） . 其次，[网站是否需要在每个浏览器中看起来都完全相同？](http://www.dowebsitesneedtolookexactlythesameineverybrowser.com/)（当然，答案是“否”）只要在浏览器窗口底部有一个页脚可以被认为是一种渐进增强，您就不必担心。

话虽这么说……我更新了代码，所以它应该在 IE7 中工作：-p 请看一下[jsfiddle](http://jsfiddle.net/thirdender/jrcgz/)，让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T06:34:23.343

使用 Css 位置：固定

您可以参考此链接以获取有关它的更多信息。 [http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

# php - 在表单提交时发送电子邮件

> ID：12119761
> 
> 赞同：-2
> 
> 时间：2012-08-25T06:30:22.847
> 
> 标签：php, html

我希望用户能够以类似于下面的简单表单的形式提交反馈，然后当他们按下提交时，它会将反馈发送到我的电子邮件地址。我的希望是让主题行自动成为“来自[他们在姓名输入中输入的任何内容]的反馈”，并让电子邮件说它是从他们在电子邮件输入中输入的任何内容发送的，如果可能的话。

```
<p>Name<p>
 <input class="text">
<p>Email<p>
 <input class="text">
<p>Feedback<p>
 <textarea rows="12"></textarea>
 <input class="btn" type="submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:34:20.410

```
mail('your@email.com', 'Feedback From ' . $_POST['email'], $_POST['message'], 'From: ' . $_POST['email']); 
```

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# javascript - JavaScript中匿名函数中的参数变量

> ID：12119764
> 
> 赞同：0
> 
> 时间：2012-08-25T06:31:46.490
> 
> 标签：javascript, closures

我在 Mozilla 的 JavaScript 教程中遇到了这个问题，但我似乎无法理解。我阅读了很多 stackoverflow 问题，但找不到问题的答案。下面给出了一个代码片段。

```
var createPet = function(name) {
  var sex;

  return {
    setName: function(newName) {
      name = newName;
    },

    getName: function() {
      return name;
    },

    getSex: function() {
      return sex;
    },

    setSex: function(newSex) {
      if(typeof newSex == "string" && (newSex.toLowerCase() == "male" || newSex.toLowerCase() == "female")) {
        sex = newSex;
      }
    }
  }
}

var pet = createPet("Vivie");
var pet2 = createPet("Sam");
pet.getName();                  // Vivie
pet2.getName();                 // Sam 
```

`createPet`似乎只返回一个函数对象的映射，但在任何地方都没有提到变量`name`，但不知何故，`pet`并且`pet2`表现得像一个类的对象，具有一个名为的成员变量`name`和一堆成员函数`getName()`，`setName()`等等。这是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:34:25.340

`name`是`createPet()`函数的参数。它的工作方式与局部变量相同，`sex`并且表现为私有成员变量，只能由 . 内部声明的函数访问`createPet()`。 `name`被传递给`createPet()`，但它也可以从内部设置，并且由于返回对象中的函数创建的闭包都具有对参数的引用，`createPet()`因此它在执行后仍然存在。`createPet()``name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:23:07.620

被`name`定义为像`function( name /*<-- there it is */)`.

于是想：

```
= function( name ) {
    var sex;
}; 
```

作为：

```
= function() {
    var name = arguments[0];
    var sex;
} 
```

它们确实是完全相同的，或者至少实际上是相同的。

是的，`createPet`返回一个混杂闭包的哑图。事实上，你可以这样做并看到它仍然有效：

```
var a = createPet("Vivie");

var asd = a.setName;

asd("asd");

a.getName() //"asd" 
```

这是因为对象几乎无关紧要，它是携带数据的函数而不是对象。该对象只是函数（闭包）的哑映射。

您也不会处理对象属性而是变量。你不能假装变量是对象属性，除非它是一个全局变量，实际上不是一个变量，而是全局对象的一个​​属性：

*   属性可以被枚举、动态访问、删除和保持不变
*   只要您有对对象的引用，就可以在任何地方访问属性

最重要的是，整个模型是倒退的。你有携带数据的行为，而不是携带行为的数据。

当然，您根本不必这样做，请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)。

# xamarin.android - 使用 monodroid 上传大文件

> ID：12119766
> 
> 赞同：1
> 
> 时间：2012-08-25T06:32:06.090
> 
> 标签：xamarin.android

**我正在使用网络客户端通过UploadFileAsync**方法上传一个*相对*较大的文件（40mb） 。

 **当我在模拟器上进行测试时，连接速度非常快。我可以看到**UploadProgressChanged**被频繁调用，并在大约 20 秒内达到 100%。

但是，**UploadFileCompleted**没有被调用另外**12 分钟！**

如果我上传一个较小的文件（例如 500kb），**UploadFileCompleted**几乎会在上传进度达到 100% 时被调用。

我想知道这是否与线程有关？不过，我无法想象如何。

就 Web 服务器而言，它在**UploadFileCompleted**被调用时正式接收文件，而不是在一分钟之前。所以我的另一个想法是**UploadProgressChanged**是错误的。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T07:29:36.593

在发布之前应该看起来更深入一些。

我认为上传发生得如此之快很奇怪。发生的事情是应用程序说“上传这个！” 和 android 说'好的！'.. 它*认为*它已被上传。但它只是与android排在队列中。

这里有一个修复：

[https://bugzilla.xamarin.com/show_bug.cgi?id=3100](https://bugzilla.xamarin.com/show_bug.cgi?id=3100)

基本上，从 WebClient 继承并覆盖 getwebrequest，并将**AllowWriteStreamBuffering**设置为 false。这是我的简单代码：

```
public class MyWebClient : WebClient
{
    long contentLength;

    protected override WebRequest GetWebRequest(Uri address)
    {
        var req = base.GetWebRequest(address) as HttpWebRequest;
        req.AllowWriteStreamBuffering = false;
        req.ContentLength = contentLength;
        return req;
    }

    public MyWebClient(long contentLength)
    {
        this.contentLength = contentLength;
    }
} 
```**

# php - 在 zend_pdf 中生成全尺寸和高质量的图像

> ID：12119772
> 
> 赞同：3
> 
> 时间：2012-08-25T06:33:58.070
> 
> 标签：php, zend-framework, magento, zend-pdf

我尝试过类似的东西

```
public function getPdf()
{
  $imagePath=C:\Users\Hp\Desktop\image.jpg;
  $image = Zend_Pdf_Image::imageWithPath($imagePath);
  $page->drawImage($image, 40,764,240, 820);
  $pdf->pages[] = $page;
  $pdf->save('new.pdf');
} 
```

它成功生成带有图像的PDF。但它不能保持图像质量。即图像的高度和宽度会失真并显示小图像。

谁能帮我解决这些问题。我希望页面上显示的图像应该是全尺寸的。另请注意，横向或纵向图像应相应地适合页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T16:48:10.937

我怀疑图像变小的另一个原因是因为您使用像素作为绘图的高度和宽度来绘制图像，但是`drawImage`如果使用像素测量值，使用会使图像看起来更小的点。

您可以在绘制图像之前使用以下代码将像素转换为点：

```
$imgWidthPts  = $image->getPixelWidth() * 72 / 96;
$imgHeightPts = $image->getPixelHeight() * 72 / 96;
$x1           = 40;
$y1           = 764;

$page->drawImage($image, $x1, $y1, $x1 + $imgWidthPts, $y1 + $imgHeightPts); 
```

米海关于 300DPI 的观点也是有效的，所以如果你使用 72DPI 的图像，它会显得有点模糊，但这应该注意以实际大小绘制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T08:16:06.977

为此，您应该考虑图像质量，因为 PDF 的 DPI 为 300 或更高，用于网站或屏幕查看的 JPEG 具有 72 DPI。

PDF 引擎将始终尝试将所有数据放在相同的大小。这就是为什么您的图像失真并且质量很差的原因。

您可以尝试更改图像分辨率：

```
$image = substr_replace($image, pack("cnn", 1, 300, 300), 13, 5);
// replace the binary info with a new one, 300 DPI X resolution and 300 DPI Y resolution. 
```

# javascript - 在内部 JavaScript 函数中包含外部对象

> ID：12119774
> 
> 赞同：0
> 
> 时间：2012-08-25T06:34:18.287
> 
> 标签：javascript, html

我发现了一些似乎与此相关的问题，但在我的理解范围内，我的问题有所不同，所以就这样吧。我已经大大简化了我的代码，甚至用注释替换了一行，但概念是一样的......

```
function myFunction(options) {
    var button;
    options.widgets.forEach(function (w) {
        button = document.createElement("button");
        //add button to the DOM
        aListOnMyPage.addEventListener("selectionchanged", function (args) {
            var a = button;
        });
    });
} 
```

因此，对于每个小部件，我将创建一个新对象，然后将事件侦听器添加到页面上的列表中，该列表的函数需要引用我创建的 DOM 元素（按钮）。我看到的行为是我的按钮在我创建事件侦听器的位置正确设置，但是当侦听器的事件触发时，按钮始终是对我创建的最后一个按钮的引用。也许是因为已经晚了，但我无法理解为什么会这样。任何人都可以为我澄清这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:49:06.283

当然可以。

您的问题实际上是范围。让我们看一下您编写的代码：

```
function myFunction(options) {
    var button;
    options.widgets.forEach(function (w) {
        button = document.createElement("button"); // UH-OH...
        //add button to the DOM
        aListOnMyPage.addEventListener("selectionchanged", function (args) {
            var a = button;
        });
    });
} 
```

注意哦？您已经声明了`button`应该等于`document.createElement("button")`，但由于您没有使用`var`关键字，因此您声明了一个全局变量，而不是多个局部变量。这意味着每次您的循环运行时，您的侦听器都会引用一个全局变量，这会导致您的问题。

确保在此处使用局部变量，如下所示：

```
function myFunction(options) {
    options.widgets.forEach(function (w) {
        var button = document.createElement("button"); 
        //add button to the DOM
        aListOnMyPage.addEventListener("selectionchanged", function (args) {
            var a = button;  
        });
    });
} 
```

这应该会大大改善您的情况。至少，我希望它能帮助你更进一步。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:55:16.807

I think you are facing this problem because of closures, the button variable used throughout you’re `myFunction` is same, all changes are reference changes, so I think changing the declaration of the variable to inside the anonymous function should solve this problem.

```
function myFunction(options) {
    //var button;
    options.widgets.forEach(function (w) {
        var button = document.createElement("button");
        //add button to the DOM
        aListOnMyPage.addEventListener("selectionchanged", function (args) {
            var a = button;
        });
    });
} 
```

this change provides the anonymous function in `forEach` with separate `button` variables.

# java - 如何以 % 为单位设置饼图值

> ID：12119780
> 
> 赞同：-1
> 
> 时间：2012-08-25T06:34:34.030
> 
> 标签：java, jfreechart

我正在使用 JFreechart 创建图表。当我创建饼图时，饼图的值以整数格式显示。但我需要百分比中的这些值。

```
My current Output :- 

Service manager (1)
Service Executive (6)
Service co-coordinator (3)

My Expected output :-

Service manager (10%)
Service Executive (60%)
Service co-coordinator (30%) 
```

示例代码：-

```
for(int i=0;i<dataset_bydeglist.size();i+=2){
                        dataset.setValue(dataset_bydeglist.get(i).toString()+" ("+(Integer)dataset_bydeglist.get(i+1)+") ",(Integer)dataset_bydeglist.get(i+1));
                    } 
```

向数据集添加值。所有数据都在数组列表中。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:19:26.353

[`PieChartDemo2`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PiePlot.html)是一个使用 a的[例子](http://www.jfree.org/jfreechart/samples.html)[`StandardPieSectionLabelGenerator`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/labels/StandardPieSectionLabelGenerator.html)。[这里](https://stackoverflow.com/a/3551238/230513)有一个相关的例子。

# spring-mvc - 无法访问 JSTL 中的列表

> ID：12119785
> 
> 赞同：0
> 
> 时间：2012-08-25T06:35:27.117
> 
> 标签：spring-mvc, jstl

我将以下代码用于“项目”对象列表。

```
 @RequestMapping(value="/garageHome", method=RequestMethod.POST)
public ModelAndView displayFilteredItems(@ModelAttribute("command") GarageHomeViewModel model){
    //PERFORM SEARCH AND RETURN
    logger.info("Search submitted: " + model.getSearchFilters().getAllTypes());
    List<Item> list = itemService.findItems(model.getSearchFilters());

    logger.info("Num results: " + list.size());

    model.setItems(list);

    return new ModelAndView("/garageHome", "command", model);
} 
```

下面的代码在 JSTL 中遍历它...

```
<c:forEach var="item" items="${items}" varStatus="status">
                        <c:choose>
                            <c:when test="${status.count % 4 == 0 && status.count >= 4}">
                                </tr>
                                <tr>
                            </c:when>
                        </c:choose>
                        <th>
                            <div>
                                <a href="<c:url value="/productDetails.do?id=${item.getID()}" />"><img class="hotDealImages" src="${item.getImageLink()}" /></a>
                            </div>
                            <div class="hotDealsText">"${item.getDescr()}"</div>
                            <div class="hotDealsText">Bid</div>
                            <div class="hotDealsText">Location</div>
                        </th>
                    </c:forEach> 
```

但是什么都没有打印出来。

我尝试使用以下代码打印出列表中元素的数量并打印 0。

```
<th>Hot Deals ${fn:length($items)}</th> 
```

但是，该行在`logger.info("Num results: " + list.size());` 控制台中打印“2”。

为什么我在 JSTL 中将列表中的元素数设为 0？我的 forEach 循环有什么问题？

任何指导将不胜感激。我对 Spring MVC 3 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:58:20.780

在您的 JSP 中，您不应该调用`${item.getDescr()}`but `${item.descr}`。这将调用`getDescr()`项目类的方法。

# vim - 按文件位置有条件地调用 autocmd

> ID：12119786
> 
> 赞同：4
> 
> 时间：2012-08-25T06:35:28.133
> 
> 标签：vim

在`.vimrc`文件中，如果文件是从特定目录加载的，是否可以仅执行 autocmd？

在 MacVim 中，我的代码中有一行代码`.vimrc`自动 cds 到包含我正在编辑的文件的目录 - 但是当我访问 :Gedit 创建的 git 文件时会导致错误（vim package *fugitive*）。

自动命令是：

```
autocmd BufEnter * execute "chdir ".escape(expand("%:p:h"), ' ') 
```

错误是：

```
Error detected while processing BufEnter Auto commands for "*": 
```

`:echo expand("%")`很明显，Fugitive 创建了以 开头的路径，`fugitive:///`所以我试图弄清楚如何测试文件路径的前 12 个字符是否 ==`fugitive:///`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:23:36.177

嗯，我想我理解错了。您正在更改 shell 中的目录，而不是在 Vim 中，不是吗？在这种情况下， autochdir 是不够的。

`:Gedit`创建一个具有时髦名称的临时文件：

```
:e vimrc
:Gedit ~2
:echo expand("%")
fugitive:///home/romainl/.vim/.git//8aece3dc3c19522c33c997bc82a2487e3bdf013b/vimrc
:echo expand("%:p:h")
fugitive:///home/romainl/.vim/.git//8aece3dc3c19522c33c997bc82a2487e3bdf013b/ 
```

您的外壳无法`cd`进入该“目录”，因为它不是有效路径。

但是，我`set autochdir`告诉 vim`cd`自动到包含当前文件的目录。多亏了这一点，我可以看到临时文件位于：

```
:pwd
/tmp/vGiSmH2 
```

`:pwd`我可以使用`cd`那里的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:58:08.557

这可以使用`strpart`函数来实现。

我最终解决了以下问题：

```
if strpart(expand("%:p:h"), 0, 15) == "/Users/myputer/"
   autocmd BufEnter * execute "chdir ".escape(expand("%:p:h"), ' ')
endif 
```

如果`cd`它以`/Users/myputer/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T02:32:03.480

这个问题有一张[票](https://github.com/tpope/vim-fugitive/issues/3)。

```
autocm BufEnter * if expand('%:p') !~ '://' | :lchdir %:p:h | endif 
```

这很好用。

# regex - 查找包含子字符串 01a 和字母表 {0,1,a} 中偶数个 1 的字符串的正则表达式

> ID：12119795
> 
> 赞同：-3
> 
> 时间：2012-08-25T06:36:23.350
> 
> 标签：regex, regular-language, formal-languages

由其描述给出的常规语言：

{0,1, a} 的所有字符串的集合，其中包含子字符串 '01a' 和偶数个 '1'。例如，“01a1”、“101a”、“101a101”。

如何构造一个指定语言的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:15:26.253

一个单行机，真是太棒了：

```
^([0a]*1[0a]*([0a]*1[0a]*1)*)01a([0a]*1[0a]*1)*|([0a]*1[0a]*1)*01a([0a]*1[0a]*([0a]*1[0a]*1)*)$ 
```

基本上，它检查

奇数个 1 的字符串 + 01a + 偶数个 1 的字符串

或者

偶数个 1 的字符串 + 01a + 奇数个 1 的字符串

# facebook - 在facebook api中接受邀请后重定向到哪里

> ID：12119797
> 
> 赞同：0
> 
> 时间：2012-08-25T06:37:25.510
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

这是我的 facebook api 链接 [http://apps.facebook.com/htglive/](http://apps.facebook.com/htglive/)

在这个应用程序中，当我向我的朋友发送邀请时。它发送请求，但是当朋友点击它（请求）时，重定向 url 显示如下

[https://apps.facebook.com/htglive/?fb_source=notification&request_ids=356816584398026%2C150839391720726%2C313437008754266%2C395992020455270%2C428852643833721%2C359378767471403%2C149260881879612%2C107559709394101%2C493997430629776%2C461324317231628%2C271738296259177%2C503347039680580&ref=notif&app_request_type=user_to_user¬if_t=app_request#!/htglive /？fb_source =通知＆request_ids = 356816584398026％2C150839391720726％2C313437008754266％2C395992020455270％2C428852643833721％2C359378767471403％2C149260881879612％2C107559709394101％2C493997430629776％2C461324317231628％2C271738296259177％2C503347039680580％2C416067418450498％2C135051036639910＆app_request_type = user_to_user＆notif_t = app_request](https://apps.facebook.com/htglive/?fb_source=notification&request_ids=356816584398026,150839391720726,313437008754266,395992020455270,428852643833721,359378767471403,149260881879612,107559709394101,493997430629776,461324317231628,271738296259177,503347039680580&ref=notif&app_request_type=user_to_user&notif_t=app_request#!/htglive/?fb_source=notification&request_ids=356816584398026,150839391720726,313437008754266,395992020455270,428852643833721,359378767471403,149260881879612,107559709394101,493997430629776,461324317231628,271738296259177,503347039680580,416067418450498,135051036639910&app_request_type=user_to_user&notif_t=app_request)

并且不会发生任何事情。我能做些什么有助于解决这个问题

**代码在这里**

```
 FB.init({
        appId: '334798996610530',
        status: true,
        cookie: true,
        oauth: true
    });

    function inviteFriends() {
        FB.ui({
        method: 'apprequests',
        message: 'Check out this application!',
        title: 'Send your friends an application request',
        },
    function (response) {
        alert(response.to);
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:31:36.513

您是在问*我们*在用户接受您/通过*您*发送的应用请求后该怎么做……？你好有趣。

*你*已经发送了请求，所以*你*应该知道如何响应它。向用户显示/提供什么。

当用户接受应用请求时，他们会被重定向到应用的画布页面，并且您会获得作为参数传递的请求 ID。有了它，您可以通过 Graph API 查找请求的详细信息，然后您应该能够决定向用户呈现什么。

基本上有两种方法可以让您决定请求实际上是“为了”什么：

*   您可以保存在将请求发送到数据库时返回的请求 ID，并在其中附加其他信息；或者

*   您可以`data`在请求放置最多 255 个字符的信息时使用该参数，这些信息将由 Facebook 存储，您可以从 API 中检索回来。

请阅读文档，了解基础知识（您似乎还不太了解），以及其他详细信息：[https ://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)

（不要忘记，在请求被接受后*删除请求也是您的责任。）*

# php - PHP从字符串中获取查询字符串

> ID：12119798
> 
> 赞同：0
> 
> 时间：2012-08-25T06:37:38.877
> 
> 标签：php

我有一个带有 URL 的字符串

```
$string = "http://www.yahoo.com/foo.php?bar=201"; 
```

我想要的只是查询字符串，没有其他内容。

显然不能用户 query_string，帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T06:39:18.753

```
$parts = parse_url($string);
echo $parts['query']; 
```

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

# time - 求解递归：T(n)=2T(n/2)+n/logn

> ID：12119799
> 
> 赞同：9
> 
> 时间：2012-08-25T06:37:50.877
> 
> 标签：time, complexity-theory, recurrence

我可以找到每一行的总和，`(n/log n-i)`也可以绘制它的递归树，但我无法计算其行的总和。

```
T(n)=2T(n/2)+n/logn 
```

`T(1) = 1`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-12-15T02:24:05.897

当你开始展开递归时，你会得到：

[![在此处输入图像描述](../Images/add93c59e2b309d164de69d3013667a2.png)](https://i.stack.imgur.com/BUmrz.gif)

你的基本情况是`T(1) = 1`，所以这意味着`n = 2^k`。替换你将得到：

[![在此处输入图像描述](../Images/0d49e2023aebd4fa965b379c9dbf6944.png)](https://i.stack.imgur.com/kj1qh.gif)

第二个和的行为与[调和级数](https://en.wikipedia.org/wiki/Harmonic_series_(mathematics))相同，因此可以近似为`log(k)`。现在`k = log(n)`得到的答案是：

[![在此处输入图像描述](../Images/a7c01cbd81b8f83b87ce897b4b2950f2.png)](https://i.stack.imgur.com/vnLf8.gif)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T06:51:47.157

假设 n = 2^k;

我们知道调和级数（欧拉公式）：

`Sum[i = 1 to n](1/i) ~= log(n) [n -> infinity]`

```
t(n) = 2t(n/2) + n/log(n)
     = 2(2t(n/4) + n/2/log(n/2)) + n/log(n)
     = 4t(n/4) + n/log(n/2) + n/log(n)
     = 4(2t(n/8) + n/4/log(n/4)) + n/log(n/2) + n/log(n)
     = 8t(n/8) + n/log(n/4) + n/log(n/2) + n/log(n)
     = 16t(n/16) + n/log(n/8) + n/log(n/4) + n/log(n/2) + n/log(n)
     = n * t(1) + n/log(2) + n/log(4) + ... + n/log(n/2) + n/log(n)
     = n(1 + Sum[i = 1 to log(n)](1/log(2^i)))
     = n(1 + Sum[i = 1 to log(n)](1/i))
     ~= n(1 + log(log(n)))
     = n + n*log(log(n)))
     ~= n*log(log(n)) [n -> infinity] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-01T13:21:14.947

遵循下面的扩展大师定理。

使用扩展大师定理`T(n)=2T(n/2)+n/logn`可以很容易地解决如下。这里`n/log n`的部分可以重写为`n * (logn)^-1`，有效地使 p=-1 的值。现在扩展大师定理可以很容易地应用，它将涉及扩展大师定理的案例 2b。

```
T(n)= O(nloglogn) 
```

按照这个获得更详细的解释

[https://www.youtube.com/watch?v=Aude2ZqQjUI](https://www.youtube.com/watch?v=Aude2ZqQjUI)

# android - android：在TextView中设置链接

> ID：12119800
> 
> 赞同：19
> 
> 时间：2012-08-25T06:37:57.927
> 
> 标签：android, html, hyperlink, textview

我动态创建一个 TextView 并希望将文本设置为可链接。文本值为“[谷歌](http://google.com)”。我提到了这样的互联网和博客[，](http://jtomlinson.blogspot.in/2010/03/textview-and-html.html)它的显示方式相同，但我无法产生预期的结果。

我尝试了不同的方法，但我看到的输出是只有文本的整个文本。我尝试过的代码是：

```
TextView tv1 = new TextView(this);
tv1.setLayoutParams(textOutLayoutParams);
// Make Linkable
tv1.setMovementMethod(LinkMovementMethod.getInstance());
tv1.setText(Html.fromHtml(l.getLeftString()));

/*SpannableString s = new SpannableString(l.getLeftString());
Linkify.addLinks(s, Linkify.WEB_URLS);
tv1.setText(s);                 
tv1.setMovementMethod(LinkMovementMethod.getInstance());
*/
dialogLayout.addView(tv1); 
```

在我的输出中，我看到“ [Google](http://google.com) ”并且没有链接。我也尝试过清洁项目并再次构建它，但没有成功。我希望只看到带有蓝色下划线的“Google”（默认），点击 Google 时，浏览器会打开[http://google.com](http://google.com)。

我的代码中缺少什么来获取输出？顺便说一句对于 REF：我使用 64 位 Win 7、Java、Eclipse、Android API 8-2.2

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-27T08:41:29.923

我终于用下面的代码让它工作了：

```
TextView tv1 = new TextView(this);
tv1.setLayoutParams(textOutLayoutParams);
tv1.setText(Html.fromHtml("<a href=\""+ l.getRightString() + "\">" + l.getLeftString() + "</a>"));
tv1.setClickable(true);
tv1.setMovementMethod (LinkMovementMethod.getInstance());
dialogLayout.addView(tv1); 
```

l.getRightString() - 包含类似 http:\www.google.com 的网址 l.getLeftString() - 包含类似“Go to Google”的网址文本

结果：在我的对话框上用蓝色和带下划线的文本“Go to Google”，点击它，浏览器打开并显示相应的页面。在返回/退出浏览器时，它会再次从它离开的状态进入应用程序。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-25T09:00:51.573

将您的 html 保存在字符串中

```
<string name="link">&lt;a href="http://www.google.com">Google&lt;/a></string> 
```

将文本视图 ID 设置为

```
textViewLinkable 
```

在主要活动中使用以下代码：

```
((TextView) findViewById(R.id.textViewLinkable)).setMovementMethod(LinkMovementMethod.getInstance());
((TextView) findViewById(R.id.textViewLinkable)).setText(Html.fromHtml(getResources().getString(R.string.link))); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-08T09:51:53.400

我也面临着我使用以下解决的同样问题

```
String str_text = "<a href=http://www.google.com >Google</a>";
TextView link;
link = (TextView) findViewById(R.id.link);
link.setMovementMethod(LinkMovementMethod.getInstance());
link.setText(Html.fromHtml(str_text)); 
```

用于将链接颜色更改为蓝色使用

```
link.setLinkTextColor(Color.BLUE); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-11-25T08:45:50.870

这是我在 Android N 上测试的简单实现。

```
String termsText = "By registering, you are agree to our";
String termsLink = " <a href=https://www.yourdomain.com/terms-conditions.html >Terms of Service</a>";
String privacyLink = " and our <a href=https://www.yourdomain.com/privacy-policy.html >Privacy Policy</a>";
String allText = termsText + termsLink + privacyLink;

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
    ((TextView) findViewById(R.id.text_terms_conditions)).setMovementMethod(LinkMovementMethod.getInstance());
    ((TextView) findViewById(R.id.text_terms_conditions)).setText(Html.fromHtml(allText, Html.FROM_HTML_MODE_LEGACY));
} 
else {
    ((TextView) findViewById(R.id.text_terms_conditions)).setMovementMethod(LinkMovementMethod.getInstance());
    ((TextView) findViewById(R.id.text_terms_conditions)).setText(Html.fromHtml(allText));
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-19T08:00:07.943

```
txtview.setMovementMethod(LinkMovementMethod.getInstance()); 
```

将此语句传递给您的文本视图，并在 string.xml 中将字符串设置为

```
<string name="txtCredits"> <a href="http://www.google.com"></a></string> 
```

现在将这个字符串名称“android:text="@string/txtCredits" 传递给 txtview 所在的 xml 类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-14T04:53:07.923

在 GitHub 上使用此代码[autolink-java](https://github.com/robinst/autolink-java)

像这样

```
private String getLink(String string){

    LinkExtractor linkExtractor = LinkExtractor.builder()
            .linkTypes(EnumSet.of(LinkType.URL)) // limit to URLs
            .build();
    Iterable<Span> spans = linkExtractor.extractSpans(string);

    StringBuilder sb = new StringBuilder();
    for (Span span : spans) {
        String text = string.substring(span.getBeginIndex(), span.getEndIndex());
        if (span instanceof LinkSpan) {
            // span is a URL
            sb.append("<a href=\"");
            sb.append(text);
            sb.append("\">");
            sb.append(text);
            sb.append("</a>");
        } else {
            // span is plain text before/after link
            sb.append(text);
        }
    }

    return sb.toString();  // "wow <a href=\"http://test.com\">http://test.com</a> such linked"
} 
```

# asp.net - 有空值的 CreateMap 错误

> ID：12119808
> 
> 赞同：0
> 
> 时间：2012-08-25T06:39:44.837
> 
> 标签：asp.net, asp.net-mvc, automapper

我有以下映射：

```
 CreateMap<Logo, KeyValuePair<int, string>>()
            .ConvertUsing(s => new KeyValuePair<int, string>(s.LogoID, s.LogoName));

        CreateMap<Project, ProjectDTO>()
            .ForMember(dest => dest.Logo, opt => opt.MapFrom(src => src.Logo)); 
```

以下是模型：

```
public class Project
{
    [Key]
    public int      ProjectID       { get; set; }
    public string   Name            { get; set; }
    public virtual  Logo Logo { get; set; }
}

public class Logo
{
    [Key]
    public int    LogoID { get; set; }
    public string LogoName { get; set; }
    public byte[] LogoContent { get; set; }
    public string LogoContentType { get; set; }
}

public class ProjectDTO : BaseDTO<ProjectDTO, Project>
{
    public int ProjectID { get; set; }
    public string Name { get; set; }
    public KeyValuePair<int, string> Logo { get; set; }
} 
```

如您所见，在我的 ProjectDTO 中，我不需要 Logo 的所有详细信息，而只需要密钥对 logoID、logoName。

当我将徽标附加到我的项目时，它可以工作。但是当没有附加徽标时出现运行时错误。错误在 CreateMap ...ConvertUsing 行上。

知道当我没有任何徽标时如何避免 CreateMap 错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:50:21.940

尝试这个

```
public class Project
{
    [Key]
    public int      ProjectID       { get; set; }
    public string   Name            { get; set; }
    private Logo _logo = new Logo();
    public virtual  Logo Logo 
          { get {return _logo;} set{_logo = value;} }
} 
```

但是，如果您的许多项目没有徽标并且相同的键可能会再次插入到地图中，即 LogoID 为 0，您的代码仍然会失败。

我当然会考虑重新考虑代码，也许可以摆脱 Logo Map。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:53:01.083

我找到了解决问题的方法：

```
 CreateMap<Project, ProjectDTO>()
            .ForMember(dest => dest.Logo, opt => opt.MapFrom(src => src.Logo == null ? null : src.Logo)); 
```

# c - * 和 & 符号的含义

> ID：12119809
> 
> 赞同：5
> 
> 时间：2012-08-25T06:40:25.830
> 
> 标签：c, pointers

`*`和`&`符号在此代码中的含义是什么：

```
#include<stdio.h>
main()
{
  char *p;
  p="hello";
  printf("%s\n",*&*&p);
} 
```

`printf`上述程序中的语句做了什么？具体来说，是什么`*&*&p`意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T06:45:16.070

这些：

```
*&*& 
```

是多余的，你永远不会在实际项目中遇到如此荒谬的代码。& 符号获取 的地址`p`，星号`*`取消引用它以生成原始的`char*`。我们来回走...

把它想象成：

```
*(&(*(&p))) 
```

* * *

顺便说一句，您的无类型签名 for`main`不会在`int`不再假定返回类型的现代编译器上削减它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T06:51:38.857

将`printf`打印字符串`"hello"`，因为`&`is`addressOf`运算符将返回其后跟的指针的地址，并且`*`是`valueOf`将返回存储在其后跟的指针地址中的值的运算符。

因此，从本质上讲，该声明`*&*&p`将显示为

`valueOf(addressOf(valueOf(addressOf(p))))`

这将返回`"hello"`存储在实际位置的字符串。

希望这会对你有所帮助！

# c# - 在 LINQ 中使用国家 DDL 填充国家 DDL

> ID：12119811
> 
> 赞同：0
> 
> 时间：2012-08-25T06:40:43.543
> 
> 标签：c#, linq

我正在使用国家 DDL 填充国家 DDL

```
public static IEnumerable bindcountry()
{
    var countries = from c in getdata().Descendants(("country"))
                    orderby (string)c.Element("name")
                    select (string)c.Element("name");
    return countries;
}

public List<string> GetStatesByCountry(string CountryName)
{

    var query = from user in getdata().Descendants("country")
                where user.Element("name").Value == CountryName
                from t in user.Descendants("text")
                select t.Value;
    return query.ToList();
}

foreach (var VARIABLE in ProfileMasterDAL.bindcountry())
{
    if (VARIABLE.ToString().Contains(DropDownList1.SelectedItem.Text))
    {
        var query = from row in ProfileMasterDAL.bindcountry()
                    where row.(ProfileMasterDAL.GetStatesByCountrys(DropDownList1.SelectedItem.Text))
                    select row;

        DropDownList2.DataSource = query;
        DropDownList2.DataBind();
    }
} 
```

问题是我无法定义 WHERE 子句和 equals 在这里我得到一个错误：

> 找不到源类型“System.Collections.IEnumerable”的查询模式的实现。'哪里' 没有找到。考虑明确指定范围变量“行”的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:25:38.203

您说您正在尝试使用给定国家/地区的州名称填充 DropDownList，看起来该逻辑在您的`foreach`循环中。看起来您的`foreach`循环正在做很多不必要的工作。

当它真的只需要找到其中一个国家名称时，它会遍历所有国家名称。然后它还会再次遍历国家名称以查找州。

您应该能够丢弃整个`foreach`循环，而是使用它：

```
var query = ProfileMasterDAL.GetStatesByCountry(DropDownList1.SelectedItem.Text);
DropDownList2.DataSource = query;   
DropDownList2.DataBind(); 
```

您的`GetStatesByCountry`方法仅返回属于传入的 Country 名称的州，因此您应该能够调用它，获取这些州的名称，然后将它们分配给您的`DropDownList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:47:26.830

尝试改变：

```
public static IEnumerable bindcountry()     
{           
var countries = from c in getdata().Descendants(("country")) orderby (string)c.Element("name") select (string)c.Element("name");

return countries ;       
} 
```

至

```
public static IList<string> bindcountry()     
{           
var countries = from c in getdata().Descendants(("country")) orderby (string)c.Element("name") select (string)c.Element("name");        

return countries.ToList() ;       
} 
```

# c# - 使用字典中的循环在jquery中构建一个数组

> ID：12119817
> 
> 赞同：0
> 
> 时间：2012-08-25T06:42:14.177
> 
> 标签：c#, jquery, asp.net-mvc-3, razor

我想传递数组值来创建 jplot 函数图。在 Layout cshtml 中，它包含用于创建图形的 jquery 函数，并且它具有以下形式的数组：

```
var s1 = [['06/15/2009 16:00:00', 112000], ['06/16/2009 16:00:00', 122000], ['06/17/2009 16:00:00', 104000], ['06/18/2009 16:00:00', 99000], ['06/19/2009 16:00:00', 121000]]; 
```

我已使用 viewbag 将字典值传递给此布局，并使用以下代码循环遍历字典。

```
 @foreach (KeyValuePair<String, int> kvp in ViewBag.dateRange)
                    {  
                        @kvp.Key
                       @kvp.Value          
                    } 
```

如何使用 razor 引擎为 jquery 函数构建上述数组。字典有字符串和整数，其中字符串是日期值，整数是总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:48:25.290

尝试这个

```
@{
    var dic = ViewBag.dateRange as Dictionary<String,int>;
}

var s1 = [@(String.Join(",", dic.Select(d => String.Format("['{0}',{1}]", d.Key, d.Value)));)]; 
```

# codeigniter - 如何开发 Codeigniter 管理面板

> ID：12119818
> 
> 赞同：0
> 
> 时间：2012-08-25T06:42:18.470
> 
> 标签：codeigniter

嗨，我是 Codeigniter 的新手。我使用 CI 开发了这个网站。 [http://maxmovies.in/fattto](http://maxmovies.in/fattto)

现在我想为这个网站创建管理面板。

我希望这样的 url 访问管理面板。 [http://maxmovies.in/fattto/admin/](http://maxmovies.in/fattto/admin/)

首先，我想添加一个管理控制器并继续进行。但我的后端将有大约 25 页。我不认为在单个控制器中添加 25 个功能不是一个好主意。

我搜索并获得了一些教程，但我不清楚。

那么任何人都可以帮助我为我的网站配置管理面板吗？

谢谢大家，如果我的英语不好，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:46:40.217

在控制器视图和模块中创建 fattto/admin 文件夹，并在您编写[http://maxmovies.in/fattto/admin/](http://maxmovies.in/fattto/admin/)时在此文件夹中设置所有代码， 无论您编写什么代码，它都会打开管理面板

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:08:38.030

您可以[将控制器组织到子文件夹](http://codeigniter.com/user_guide/general/controllers.html#subfolders)中，这将为您提供所需的效果。

[路由](http://codeigniter.com/user_guide/general/routing.html)的使用还可以帮助您实现您想要的，这将允许您将 URL 映射到特定的控制器/方法。

# asp.net-mvc - 如何为 nopCommerce 编写一个支付插件，将用户重定向到银行的支付页面？

> ID：12119829
> 
> 赞同：1
> 
> 时间：2012-08-25T06:44:24.820
> 
> 标签：asp.net-mvc, c#-4.0, nopcommerce

我将编写一个必须将用户重定向到银行支付页面的 nopCommerce 支付插件。我知道我必须实现`IPaymentMethod`接口，但我不知道在哪里编写将用户重定向到支付页面的逻辑以及我应该在哪里收到响应.

非常感谢任何帮助。

**编辑：**

为了清楚起见：

```
 public void PostProcessPayment(PostProcessPaymentRequest postProcessPaymentRequest)
    {

    }

    public CapturePaymentResult Capture(CapturePaymentRequest capturePaymentRequest)
    {
        return new CapturePaymentResult();
    }

    public ProcessPaymentResult ProcessPayment(ProcessPaymentRequest processPaymentRequest)
    {
        return new ProcessPaymentResult();
    } 
```

这些方法是什么？谁叫他们？什么时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:55:46.057

通常，对于任何支付网关，发生的情况是使用标准的表单向他们发送发布请求，即 PayPal 将拥有自己的 CCavenue 将拥有自己的。使用这些发布表单有一个可选字段，您可以将其作为重定向发送网址。用户付款完成后，银行将用户发送回重定向网址，该网址将是您的网站。

我倾向于在 url 中附加一个查询字符串，这样我就可以知道这个 url 是针对哪些事务发送的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T18:33:45.577

这些方法是什么？

> > 这些方法来自 IPayment 接口。

谁叫他们？

> > 结帐控制过程称为 IPayment ProcessPayment 方法。

什么时候？

> > 当您在结帐时选择付款方式时，OnePageCheckout 控件会设置它。

# c# - C#中的日期和时间格式转换

> ID：12119830
> 
> 赞同：0
> 
> 时间：2012-08-25T06:44:26.630
> 
> 标签：c#, datetime, iso8601

我有日期/时间格式，例如：

```
"2012-06-28T08:26:57Z" 
```

那是什么样的日期/时间格式以及如何将其转换为以下格式，使用 C# 中的 DateTime 格式。：

```
"8/24/2012 4:09:17 AM" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T06:54:18.007

你可以这样做：

```
string input = "2012-06-28T08:26:57Z";
var dt = DateTime.Parse(input);
string output = dt.ToString(@"MM/dd/yyyy h:mm:ss tt", CultureInfo.InvariantCulture); 
```

有关输入字符串每个部分的含义，请查看此链接：[http ://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T06:50:26.007

这是一个[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)日期/时间字符串。数字是年、月、日、小时、分钟和秒（按此顺序）。

“T”是占位符。这不代表任何意思。

“Z”表示时间相对于 GMT，而不是本地时区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T06:49:26.823

那是通用可排序日期格式

您可以使用以下代码进行转换

```
 var dt = DateTime.Parse("2012-06-28T08:26:57Z");
 var newdt = String.Format("{0:G}", dt);  // "6/28/2012 1:56:57 PM" 
```

**更新**

你也可以试试这个

```
var dt = DateTime.Parse("2012-06-28T08:26:57Z", System.Globalization.CultureInfo.InvariantCulture);
var newdt = String.Format("{0:G}", dt); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T06:50:08.053

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)这是对您问题的回答。在这里，您可以看到如何创建不同的日期格式。根据这个资源，你可以使用这样的东西：

```
String olddate="2012-06-28T08:26:57Z";
DateTime date=Convert.ToDateTime(olddate);
String date1=date.ToString("M/d/yyyy h:m:s tt"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T06:50:08.817

尝试使用类似的东西。

```
var d = DateTime.Parse("2012-08-24T04:09:17Z");
Console.WriteLine (d.ToString("G"), CultureInfo.InvariantCulture); 
```

请注意“一般日期/时间模式（长时间）”。在 .net 中是特定于文化的。来自 msdn：

```
6/15/2009 1:45:30 PM -> 6/15/2009 1:45 PM (en-US)
6/15/2009 1:45:30 PM -> 15/06/2009 13:45 (es-ES)
6/15/2009 1:45:30 PM -> 2009/6/15 13:45 (zh-CN) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-25T06:50:12.460

尝试将日期转换为这样的字符串

```
date.ToString("yyyy-MM-dd HH':'mm':'ss") 
```

这里 date 是一个变量，其中存在日期

或试试这个

```
string timeString = "11/12/2009 13:30:00.000";
IFormatProvider culture = new CultureInfo("en-US", true); 
DateTime dateVal = DateTime.ParseExact(timeString, "dd/MM/yyyy HH:mm:ss.fff", culture); 
```

这些链接也可能对您有所帮助。

[DateTime.ToString() 模式](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

[日期时间的字符串格式 [C#]](http://www.csharp-examples.net/string-format-datetime/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-25T06:59:48.057

试试这个将通用日期时间转换为本地时间

```
 var date = DateTime.ParseExact("2012-08-25T06:57:57Z","yyyy-MM-ddTHH:mm:ssZ",System.Globalization.CultureInfo.CurrentCulture);
var newformat = date.ToString("MM/dd/yyyy HH:mm:ss tt"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-25T07:08:41.167

你可以简单地使用:)

DateTime dt = Convert.ToDateTime("2012-06-28T08:26:57Z");

# java - 如何在 Netbeans 中正确重构？

> ID：12119832
> 
> 赞同：3
> 
> 时间：2012-08-25T06:44:30.343
> 
> 标签：java, netbeans, refactoring

我正在使用 JavaFX，每当我将一个类移动到另一个包时，我都必须更新我的所有 FXML 文件以指向类的正确位置。

在 Eclipse 中，您可以选择对 XML 文件甚至非代码文本文件应用重构更改。然而，Netbeans 只对 Java 代码进行更改，没有其他任何更改。

有解决此问题的方法吗？

# android - 在 Android 上使用 wifi 发送短信

> ID：12119837
> 
> 赞同：0
> 
> 时间：2012-08-25T06:45:45.907
> 
> 标签：android, sockets, android-emulator, android-wifi

如何在 android 上使用 wifi、socket 或 ... 发送短信？我想将消息发送到一个模拟器到第二个模拟器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:41:44.933

这用于从一个模拟器向另一个模拟器发送消息。

```
btnSendSMS.setOnClickListener(new View.OnClickListener()
{
public void onClick(View v)
{
sendSMS("5556", "Hi You got a message!");
}
});

//---sends an SMS message to another device---

private void sendSMS(String phoneNumber, String message)
{
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, null, null);
} 
```

这用于将消息从一个模拟器发送到多个模拟器。

```
btnSendSMS.setOnClickListener(new View.OnClickListener()
   {
     public void onClick(View v)
        {
         Intent i = new
              Intent(android.content.Intent.ACTION_VIEW);
              i.putExtra("address", "5556; 5558; 5560");
              i.putExtra("sms_body", "Hello my friends!");
              i.setType("vnd.android-dir/mms-sms");
              startActivity(i);
         }
    }); 
```

# javascript - 按下按钮时图像一直闪烁？

> ID：12119838
> 
> 赞同：0
> 
> 时间：2012-08-25T06:46:17.303
> 
> 标签：javascript, html, html5-canvas, html5-animation

当我不断按下按钮时，图像闪烁。问题可能出在`ctx.clearRect(0,0,100,500)`. 我该如何解决这个问题？

我正在尝试在 HTML 5 画布中制作动画。我需要画布中的移动对象，当我按下按钮时，另一个移动对象会跟随前一个移动对象而不会闪烁。

```
function draw(x,y){
    var canvas = document.getElementById("canvas"); 
    var ctx = canvas.getContext("2d");
    ctx.save();
    ctx.clearRect(0,0,100,500); // This may be the problem
    var img=document.getElementById("Image");
    ctx.drawImage(img,50,y);
    ctx.restore();
    y -= 10;
    var loopTimer = setTimeout('draw('+x+','+y+')',50);
} 
```

HTML 5

```
<button onclick="draw(0,500)">Draw</button>
<canvas id="canvas" width="600" height="500">
</canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T18:54:31.107

当您多次按下按钮时，图像会闪烁，这意味着您多次启动 setTimeout()。添加一个变量以检查它是否已被按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:53:44.533

看起来问题可能是因为您没有清除整个`canvas`. 尝试这个：

```
function draw(x,y){
    var canvas = document.getElementById("canvas"); 
    var ctx = canvas.getContext("2d");
    ctx.save();
    ctx.clearRect(0,0, canvas.width, canvas.height);
    var img=document.getElementById("Image");
    ctx.drawImage(img,50,y);
    ctx.restore();
    y -= 10;
    var loopTimer = setTimeout('draw('+x+','+y+')',50);
} 
```

[演示](http://jsfiddle.net/uhXCq/)

# clojure - 这个 Clojure 代码中的错误在哪里？

> ID：12119842
> 
> 赞同：3
> 
> 时间：2012-08-25T06:47:17.023
> 
> 标签：clojure

我有这个 Clojure 代码：

```
(defn apply-all-to-arg [& s]
    (let [arg (first s)
          exprs (rest s)]
        (for [condition exprs] (condition arg))))

(defn true-to-all? [& s]
    (every? true? (apply-all-to-arg s))) 
```

这是测试代码：

```
(apply-all-to-arg 2 integer? odd? even?) 
```

=>（真假真）

```
(every? true? (apply-all-to-arg 2 integer? odd? even?) 
```

=> 假的

```
(true-to-all? 2 integer? odd? even?) 
```

=> 真

我的问题是：为什么该功能是真实的？返回 true （它必须返回 false 代替）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:54:56.530

`true-to-all?``apply-all-to-arg`使用单个参数调用`s`。所以你不是在打电话`(every? true? (apply-all-to-arg 2 integer? odd? even?)`，而是：

```
(every? true? (apply-all-to-arg (list 2 integer? odd? even?)) 
```

所以`apply-all-to-arg`的值`arg`将是该列表，而 的值`exprs`将是空列表。因为`every?`无论条件如何，空列表都将为真，因此您将返回真。

要解决此问题，您可以更改`apply-all-to-arg`，以便它接受一个列表而不是可变数量的参数，或者您可以更改`true-to-all?`，以便它`s`作为多个参数而不是单个列表传递的内容（通过使用`apply`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T11:26:57.860

创建一个函数的默认 Clojure 函数将多个函数并行应用于一个参数是 juxt：

```
=> ((juxt integer? odd? even?) 2)
[true false true]

=> (every? true? ((juxt integer? odd? even?) 2))
false

=> (defn true-to-all? [a & fns]
     (every? true? ((apply juxt fns) a)))

=> (true-to-all? 2 integer? odd? even?)
false 
```

如果您与 juxt 组合的函数都采用多个参数，它也可以工作

```
=> ((juxt + - / *) 6 3)
[9 3 2 18] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T06:58:20.657

因为当你调用时`true-to-all?`，参数`s`是一个列表，所以你实际上是在调用`(apply-all-to-arg '(2 integer? odd? even?))`

尝试`true-to-all?`这样定义：

```
(defn true-to-all? [& s]
  (every? true? (apply apply-all-to-arg s)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T07:20:22.380

您还可以像下面这样定义您的函数以使其更清晰。

```
(defn apply-all-to-arg [v & fns] 
       (map #(% v) fns)) 
```

因为这使函数定义清楚，它需要一个值和可选函数来应用于该值。

# ios - 防止游戏中的“时间变化”作弊

> ID：12119845
> 
> 赞同：8
> 
> 时间：2012-08-25T06:47:36.300
> 
> 标签：ios, time, anti-cheat

> **可能重复：**
> [iOS 中是否存在用户无法更改的可以使用的时钟](https://stackoverflow.com/questions/11413616/is-there-a-clock-in-ios-that-can-be-used-that-cannot-be-changed-by-the-user)

我知道在许多 iOS 游戏的任务需要时间（即“动物完成繁殖前 10 小时”）中，可以进入“设置”并更改时间以加快完成任务的速度。在我正在开发的游戏中，我不希望用户这样做，所以我正在尝试实现一个系统来防止这种类型的作弊。我对此进行了很多思考，但无法提出解决方案。基本上，我的问题是如何在不依赖系统时钟（很容易被操纵）的情况下跟踪时间以防止用户作弊？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:08:19.323

将我的评论转化为答案。

与其依靠用户或设备，不如依靠外部资源来提供无偏见的时间。时间服务器，您的服务器等。如果您不信任......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:08:46.797

Instead of "X hours of real-world time", would "Y minutes of in-app time" work for you? You can pause/continue a timer when your app suspends/resumes.

# lua - lua中的chunk和block有什么区别

> ID：12119846
> 
> 赞同：4
> 
> 时间：2012-08-25T06:47:42.770
> 
> 标签：lua

lua中的块和块有什么区别？看不懂什么是块！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T10:39:39.183

块是独立可执行的语句序列。块只是一系列语句。不同之处在于一个块可以独立于其他块执行。

所有块都是块（语句序列），但并非所有块都是块。

块基本上是一个 Lua*函数*；您可以使用一些参数调用它，它会返回 0 个或多个值。这就是我所说的“独立可执行”的意思：块中的语句将按顺序执行。但是一旦你退出一个块，你接下来执行什么块取​​决于你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T18:04:20.450

已在此处询问和解决：http: [//lua-users.org/lists/lua-l/2012-06/threads.html#00723](http://lua-users.org/lists/lua-l/2012-06/threads.html#00723)

从 5.2 手册：

> Lua 的执行单元称为块。从语法上讲，块只是一个块：`chunk ::= block`

从罗伯托的口中：

> 块是块的事实并不意味着任何块都是块。块不嵌套（与块不同）。块是您提供给“加载”的最外层块。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T07:04:05.297

一个块可以是一块代码。然而，一个块通常意味着零个或多个属于例如一个`if`语句或函数的语句。

来自[官方 Lua 参考](http://www.lua.org/manual/5.1/manual.html#2.4.2)的引述：

> *[...] 块是语句的列表；从语法上讲，块与块相同 [...]*

如果您查看[Lua 的语法](http://www.lua.org/manual/5.1/manual.html#8)，您会发现它们是相同的：

```
chunk ::= {stat [`;´]} [laststat [`;´]]

block ::= chunk 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T06:59:30.360

块是块的子部分，它们有时可能与代码示例 02 中的相同：例如 01：

```
 if condition1 then
        block1
    elseif condition2 then
        block2
    elseif condition3 then
        block3
    else
        block4
    end 
```

在这里，我们有一个块，从
if 条件 1 然后到最后一个结束，但是这段代码有四个块，每个条件都有单独的块。这个例子有一个块和四个块。

示例 02：

```
 /////////////////////////// 01 //////////////////////
for variable = beginning, end, step do
        block
    end
   /////////////////////////// 02 //////////////////////
function Name()
        block
    end

   /////////////////////////// 03 //////////////////////
 if condition then
        block
    end 
```

在示例 02 块和块中是相同的，但它们总是不相同。请自己阅读。

[http://www.lua.org/manual/2.5/manual.html](http://www.lua.org/manual/2.5/manual.html)

**4.4.1 - 块**

块是顺序执行的语句列表。任何语句都可以选择后跟分号：

块 := {stat sc} [ret] sc := [';']

**2 - 环境和块**

Lua 的执行单元称为块。块的语法是：

块：= {统计| 函数} [返回]

有用吗？？？？？？

# c++ - VS2005 调试模式和发布模式之间的巨大性能影响

> ID：12119849
> 
> 赞同：2
> 
> 时间：2012-08-25T06:48:35.713
> 
> 标签：c++, performance, debugging, visual-studio-2005, profiling

我遇到了一个问题，即 Win32 应用程序在调试和发布版本之间存在巨大的性能差异。发布需要 20 秒，而调试构建需要 6 分钟来初始化应用程序。这很痛苦，因为在调试时，在开始做任何事情之前进行初始化总是需要 6 分钟。所以我正在寻找一种方法来调整调试构建中的性能。

运行分析器后，我发现下面的代码是热点。

```
class CellList {
    std::vector<CellPtr>* _cells;
    iterator begin() { return (*_cells).begin(); }
    iterator end()   { return (*_cells).end(); }
    reverse_iterator rbegin() { return (*_cells).rbegin(); }
    reverse_iterator rend()   { return (*_cells).rend(); }
    ...
}

CellList _cellList = ...;

for (CellList::iterator itr = _cellList.begin(), end = _cellList.end(); itr < end; ++itr) {
  Cell* cell = *itr;
  if (cell->getFoo()) cell->setBar(true);
  else cell->setBar(false);
}

for (CellList::iterator itr = _cellList.rbegin(), end = _cellList.rend(); itr < end; ++itr) {
  Cell* cell = *itr;
  if (cell->getFoo2()) cell->setBar2(true);
  else cell->setBar2(false);
} 
```

这些是时基剖面结果中的热点。

```
std::operator< <std::_Vector_iterator<Cell *,std::allocator<Cell *> >,std::_Vector_iterator<Cell *,std::allocator<Cell *> > >
std::_Vector_const_iterator<Cell *,std::allocator<Cell *> >::operator<
std::reverse_iterator<std::_Vector_iterator<Cell *,std::allocator<Cell *> > >::operator*
std::reverse_iterator<std::_Vector_const_iterator<Cell *,std::allocator<Cell *> > >::reverse_iterator<std::_Vector_const_iterator<Cell *,std::allocator<Cell *> > ><std::_Vector_iterator<Cell *,std::allocator<Cell *> > > 
```

我猜这是迭代器操作没有被内联并导致这种巨大的差异。有什么办法可以改善这一点吗？只要仍然可以在源代码中逐行检查并检查所有变量值，我就可以在发布模式下进行调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:52:30.543

差异是正常的。我会做的是地方

```
#pragma optimize("",off)

#pragma optimize("",on) 
```

围绕您要检查的方法，并将构建的其余部分保持在发布模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T12:56:49.233

6 分钟与 20 秒的比例为 18:1（为简单起见，将其称为 20:1）。

这意味着调试版本花费了 95% 的时间来做一些发布版本没有的额外事情。

OK，在调试器下运行。点击暂停按钮并查看调用堆栈。您将有 19/20 的机会看到花费了额外时间的原因。做几次以确定。

当我这样做时，它正在执行类验证方法，这些方法在发布模式下被关闭。通常它是通过不同的路径一遍又一遍地重新验证相同的数据。

在您的情况下，很可能是那些迭代器。如果您不做太多其他事情，他们很容易成为主导者。

但不要猜测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T23:16:14.980

一个问题是，在 VC++ 调试版本中默认启用的“快速调试检查”将使您的代码速度降低多达五倍。他们偶尔会发现错误，但不足以证明您所看到的成本是合理的。有关详细信息，请参阅我的博客文章：

[Visual C++ 调试构建——“快速检查”导致 5 倍减速](http://randomascii.wordpress.com/2011/07/22/visual-c-debug-buildsfast-checks-cause-5x-slowdowns/)

关闭它们，每个小功能都会明显加快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T08:24:30.230

如果您的减速仅在于调试器内部的初始化（但如果您将 Debug 构建作为常规应用程序运行则不会），这是由 Visual Studio 为您正在使用的所有库加载调试符号引起的。这是意料之中的，但您可以微调从调试首选项中加载哪些符号。

一般来说，缺乏优化当然会减慢速度，但不会特别是在调试器内部启动时。

# jquery - 根据视口大小动态修改/禁用 javascript

> ID：12119852
> 
> 赞同：1
> 
> 时间：2012-08-25T06:49:54.710
> 
> 标签：jquery, responsive-design, viewport, image-gallery

我在响应式网站设计中使用了 Galleriffic jQuery 图片库插件，可以在[此处](http://tinyurl.com/9rnqxos)查看。正如您通过调整浏览器窗口大小看到的那样，我为 iPad、纵向和横向创建了各种状态——它仍然显示完整的图像库，即缩略图和相邻的全尺寸图像——最后是 iPhone，它仅显示缩略图。

我的问题是，对于 iPhone 布局，缩略图仍然链接到主画廊容器 - 我已经隐藏了 - 而我希望它们简单地链接到更大的 JPEG 以单独打开，即好像画廊脚本是完全禁用。该脚本正在动态删除附加到“ul.thumbs”的“noscript”类——因此画廊将在没有javascript的情况下优雅地降级——我认为通过尝试通过jQuery addclass重新添加类我可以有效地禁用galleriffic初始化，但这没有用。

最终，我希望找到最优雅的解决方案，*仅*在视口为 480 像素或更小时更改/禁用画廊脚本对缩略图链接的修改——这可能吗？

感谢您在这里的任何指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:15:40.027

Inside your `document.ready()` (or alternative), do a conditional check.

```
if($(window).width() > 480){
//create gallery
} 
```

Keep in mind this won't work for people who resize their browsers on the fly - which is pretty much nobody except for web developers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:11:42.157

您最好使用基于 CSS 媒体查询的检测来触发您的 js 函数，在某些浏览器中，媒体查询宽度与 js 中报告的宽度不同。

是的，人们**现在**确实经常合理地调整他们的窗口大小......当有人旋转他们的 iphone/android 时，这是一个窗口调整大小事件。

请参阅包含一些基本代码的相关问题： [How do I get CSS mediaqueries to work with jQuery $(window).innerWidth()?](https://stackoverflow.com/questions/8472566/how-do-i-get-css-mediaqueries-to-work-with-jquery-window-innerwidth)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T08:01:14.673

我对一些必须在移动设备上创建但在桌面上销毁的轮播也有类似的问题......而且我不喜欢以像素为单位检查窗口宽度的解决方案，所以我创建了一个小函数来“收听”媒体查询状态变化。

您可以在每种状态下定义自己的代码（“在进入移动分辨率时”、“在离开桌面时”）...

希望对其他人有用；）
[https://github.com/carloscabo/MQBE](https://github.com/carloscabo/MQBE)

# android - 类型转换为 Long

> ID：12119860
> 
> 赞同：3
> 
> 时间：2012-08-25T06:50:40.923
> 
> 标签：android, string, casting, android-emulator, long-integer

我创建了一个计时器，它将通过编辑文本框接受用户指定的时间值并传递给 CountDownTimer()。这种方法需要一个长值，这就是为什么我将它转换为长但是当我添加这个长转换时，android 模拟器显示错误不幸停止了。这是我的代码

```
EditText ti=(EditText)findViewById(R.id.time);
Editable i = ti.getText();
String p=i.toString();
long x=Long.parseLong(p);

final TextView mCounter1TextField=(TextView)findViewById(R.id.counter1);
final CountDownTimer Counter1 = new CountDownTimer(x, 10) {
    public void onTick(long millisUntilFinished) {
        mCounter1TextField.setText(" " + (millisUntilFinished)/ 1000 + ":");
    }

    public void onFinish() {  
        mp3.start ();      
        Log.d ("Splash", "LauncherActivity.onCreate - created MediaPlayer");
        cancel();
    }    
};

//Start Button1
btnstart.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {
        Counter1.start();
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:54:21.210

没有错误继续，我注意到的第一件事是你没有在上捕获 NumberFormatException`parseLong()`

```
long x=0L;
try {
    x = Long.parseLong(p);
}
catch(NumberFormatException ex) {
    // TODO: error report or something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T09:59:12.213

我希望您正在尝试将字符串转换为整数。首先将其转换为 int，然后将其设为 long。

# php - 递归重命名数组键

> ID：12119861
> 
> 赞同：0
> 
> 时间：2012-08-25T06:50:45.503
> 
> 标签：php, arrays

我一直在尝试自己解决这个问题，但找不到我能理解的解决方案。

当我的应用程序通过读取动态配置文件加载时，我有一个动态创建的数组。

我的问题是我想要一个名为的数组，该数组`alias`将被拾取并重命名其`['@attr']`下的父数组。这是一个例子来说明我的意思。

```
[database] => Array
        (
            [0] => Array // Would be renamed to "production"
                (
                    [host] => test
                    [user] => test
                    [pass] => test
                    [name] => test
                    [port] => test
                    [@attr] => Array
                        (
                            [alias] => production
                            [name] => live
                        )

                )

            [1] => Array // Would be renamed to "development"
                (
                    [user_data] => Array
                        (
                            [0] => Array // Would be renamed to "three"
                                (
                                    [user] => sample
                                    [@attr] => Array
                                        (
                                            [alias] => three
                                        )

                                )

                            [1] => Array // Would be renamed to "two"
                                (
                                    [user] => sample
                                    [@attr] => Array
                                        (
                                            [alias] => two
                                        )

                                )

                        )

                    [host] => test
                    [user] => test
                    [pass] => test
                    [name] => test
                    [port] => test
                    [@attr] => Array
                        (
                            [alias] => development
                        )

                )

        ) 
```

到目前为止，这是我的代码

```
private function _applyXmlAlias($array)
        {
            foreach ($array as $config)
            {
                if (is_array($config))
                {
                    if (isset($config['@attr']['alias']))
                    {
                        $alias = $config['@attr']['alias'];

                        unset($config['@attr']['alias']);

                        if (empty($config['@attr']))
                        {
                            unset($config['@attr']);
                        }

                        $this->_alias[$alias] = $config;

                        break;

                        //$this->_temp = reset();

                    } else {

                        $this->_applyXmlAlias($config);
                    }
                }
            }
        } 
```

如果我对我的`_alias`财产进行 print_r，我会得到这个

```
 Array
(
    [production] => Array
        (
            [host] => test
            [user] => test
            [pass] => test
            [name] => test
            [port] => 3306
            [@attr] => Array
                (
                    [name] => live
                )

        )

    [development] => Array
        (
            [user_data] => Array
                (
                    [0] => Array
                        (
                            [user] => sample
                            [@attr] => Array
                                (
                                    [alias] => three
                                )

                        )

                    [1] => Array
                        (
                            [user] => sample
                            [@attr] => Array
                                (
                                    [alias] => two
                                )

                        )

                )

            [host] => test
            [user] => test
            [pass] => test
            [name] => test
            [port] => 3306
        )

) 
```

注意：我不确定为什么我的循环只捕获带有键的最后一个嵌套数组，`alias`而不是具有值的其他键`production`和`development`

关于如何解决这个问题的任何想法？我觉得我很接近，只需要在正确的道路上得到一点指导。

谢谢

编辑：更新了我的功能以反映当前的尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:16:22.710

您的算法正在执行深度优先搜索。问题是它不知道何时终止。

而不是一个 void 返回类型，尝试这样的事情：

```
 private function _applyXmlAlias($array)
    {
        $found_alias = FALSE;
        foreach ($array as $config)
        {
            if (is_array($config))
            {
                if (isset($config['@attr']['alias']))
                {
                    $this->_alias = reset(array_values($config));
                    $found_alias = TRUE;
                       break;
                } else {
                    if ($this->_applyXmlAlias($config)) {
                       $found_alias = TRUE;
                       break;
                    }
                }
            }
        }
        return $found_alias;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:36:22.243

很可能不是最优雅的解决方案，但有效。

```
function renameArr($arr) {
    foreach($arr as $key=>$val) {
        if(is_array($val)) {
            if(isset($val['@attr']['alias'])) {
                unset($arr[$key]);
                $key = $val['@attr']['alias'];
            }
            $arr[$key] = renameArr($val);
        }
    }
    return $arr;
} 
```

# c# - 如何删除 FileSystemWatcher 对象的特定实例

> ID：12119863
> 
> 赞同：1
> 
> 时间：2012-08-25T06:51:43.900
> 
> 标签：c#, filesystemwatcher, windows-applications

我有一个使用 FileSystemWatcher 来监视文件更改的 Windows 应用程序。可以添加多个文件位置，并为每个位置创建一个新的 FileSystemWatcher 实例，并将该位置添加到列表框中。有一个从列表框中删除位置的选项。删除位置时，我需要删除/处置 FileSystemWatcher 的特定实例。有什么办法可以做到这一点？提前致谢。

```
FileSystemWatcher fsw;

    private void CreateFWInstance(string strLoc)
    {
        if (strLoc != string.Empty)
        {
            fsw = new FileSystemWatcher();
            fsw.Changed += new FileSystemEventHandler(OnChanged);

            fsw.Path = strLoc;
            fsw.SynchronizingObject = this;

            fsw.EnableRaisingEvents = true;

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T07:08:15.717

好吧，您需要保留对实例的引用，例如作为列表框条目中的*值*，或者可能`Dictionary<string, FileSystemWatcher>`从路径映射到观察者。然后只需处理观察者并将其从字典中删除/删除列表项。

# winapi - 将引用对象从 win32 dll 传递给 mfc dll

> ID：12119867
> 
> 赞同：0
> 
> 时间：2012-08-25T06:52:28.973
> 
> 标签：winapi, visual-c++, mfc, hook

我已经使用裸函数挂钩了一个导出的 MFC DLL 函数。

裸函数定义如下：

```
__declspec（裸）
static void __cdecl GenericHook(void* __this,class CScrollViewAccess* objParam1, class CRect& objParam2,unsigned int iParam1, unsigned long iParam2, char* szParam1,
void* vParam1，类 CFont* objParam3，类 CFont* objParam4，
                                类 CBrush* objParam5)
{ /*函数体开始*/

    __asm pushad; /* 第一个“参数”，也用于存储寄存器 */
    __asm 推送 ecx；/* 填充以便 ebp+8 引用第一个“参数” */

    /* 设置标准序言 */
    __asm 推送 ebp;
    __asm mov ebp, esp;
    __asm sub esp, __LOCAL_SIZE;

    如果（flg == 假）
    {

        //RECT* rct = reinterpret_cast(&objParam2);

        hInst = LoadLibrary("C:\\Sample.dll"); /// MFC DLL
        funcPTR = (CMYCLASS_)(((int)hInst)+((int)0x00001032));
        funcPTR(__this,objParam2);

    /* 标准尾声 */
     __asm mov esp, ebp;
     __asm pop ebp;

     __asm pop ecx; /* 清除填充 */
     __asm 流行音乐；/* 清除第一个“参数” */
     __asm jmp [蹦床];

}   

    /*函数体结束*/

```

Mfc dll具有以下功能：

```
    无效 CMyClass::returnRect(类 CRect& objParam)
    {
        int 宽度 = objParam.Width();
        int 高度 = objParam.Height();
        CPoint pt = objParam.TopLeft();

        文件* fp；
        字符 szEnter[6] = {13,0,10,0,0,0};
        fp = fopen("c:\\LogFolder\\log.txt","ab+");
        fprintf(fp,"宽度: %d 高度: %d X坐标: %d Y坐标: %d\n%s",width,height,pt.x,pt.y,szEnter);
        fclose(fp);
    }

```

将 CRect& 参数传递给 MFC DLL 后，记录的值是错误的。

如何处理参考对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:10:34.560

我已经解决了这个挂钩问题，如下所示：

```
    extern "C" __declspec(naked) __declspec(dllexport) void __stdcall GenericHook()
    { /*函数体开始*/
        /* 设置标准序言 */
        __asm 推送 ebp;
        __asm mov ebp, esp;
        __asm pushad;

       // __asm sub esp, __LOCAL_SIZE; // 增加堆栈大小
        __asm mov eax,[ebp+4]; //退货地址
        __asm mov objParam1,eax;
        __asm mov eax,DWORD ptr[ebp+8]; //arg1
        __asm mov objParam2,eax;
        __asm mov eax,DWORD ptr[ebp+12]; //arg2
        __asm mov objParam3,eax;
        __asm mov eax,DWORD ptr[ebp+16]; //arg3
        __asm mov objParam4,eax;
        __asm mov eax,DWORD ptr[ebp+20]; //arg4
        __asm mov objParam5,eax;

        /*-------------处理开始----------*/
        fp = fopen("c:\\LogFolder\\log.txt","ab+");
        fprintf(fp,"arg1: %lu~arg2: %lu~arg3: %lu~arg4: %lu~ar5: %lu\n",objParam1,objParam2,objParam3,objParam4,objParam5);
        fprintf(fp,"============================================== ==============================\n\n");
        fclose(fp);
        /*-------------处理结束-----------*/

        /* 标准尾声    
         __asm add esp, __LOCAL_SIZE;*/
         __asm 流行音乐；
         __asm mov esp, ebp;   
         __asm pop ebp;
         __asm jmp [蹦床];   
    }

```

# javascript - html5画布上下文.fillStyle不起作用

> ID：12119869
> 
> 赞同：4
> 
> 时间：2012-08-25T06:52:38.123
> 
> 标签：javascript, html, html5-canvas

只是第一次尝试画布，目的是创建一个游戏。我有一个图像显示，但奇怪的是 fillStyle 方法似乎没有工作。（至少在谷歌浏览器中画布背景仍然是白色的。）

请注意，在我的代码中，canvas var 实际上是 canvas 元素 2d 上下文，也许这就是我让自己感到困惑的地方？我看不到问题，如果其他人可以，我将不胜感激。

LD24.js：

```
const FPS = 30;
var canvasWidth = 0;
var canvasHeight = 0;
var xPos = 0;
var yPos = 0;
var smiley = new Image();
smiley.src = "http://javascript-tutorials.googlecode.com/files/jsplatformer1-smiley.jpg";

var canvas = null;
window.onload = init; //set init function to be called onload

function init(){
    canvasWidth = document.getElementById('canvas').width;
    canvasHeight = document.getElementById('canvas').height;
    canvas = document.getElementById('canvas').getContext('2d');
    setInterval(function(){
        update();
        draw();
    }, 1000/FPS);
}

function update(){

}
function draw()
{
    canvas.clearRect(0,0,canvasWidth,canvasHeight);
    canvas.fillStyle = "#FFAA33"; //orange fill
    canvas.drawImage(smiley, xPos, yPos);

} 
```

LD24.html：

```
<html>
    <head>
        <script language="javascript" type="text/javascript" src="LD24.js"></script>
    </head>
    <body>

<canvas id="canvas" width="800" height="600">
    <p> Your browser does not support the canvas element needed to play this game :(</p>
</canvas>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:04:34.043

3个注意事项：

1.  `fillStyle`不会导致您的画布被填充。这意味着当您**填充**形状**时**，它将填充该颜色。因此，您需要编写`canvas.fillRect( xPos, yPos, width, height)`.

2.  等到您的图像实际加载，否则渲染可能会不一致或有错误。

3.  注意画布中使用的跨域图像 - 大多数浏览器都会抛出安全异常并停止执行您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:11:13.063

等到图像加载：

```
var img = new Image();
img.onload = function() {
    handleLoadedTexture(img);
};
img.src = "image.png";

function handleLoadedTexture(img) {
    //call loop etc that uses image
}; 
```

# android - 如何维护来自服务器的用户图片？

> ID：12119870
> 
> 赞同：0
> 
> 时间：2012-08-25T06:52:40.590
> 
> 标签：android, web-services

我需要在我的应用程序中显示用户的图片并从服务器检索该图片，因为我的应用程序也可以在离线模式下工作，所以我需要将该图片从服务器保存到我的 SD 卡，当我下次从服务器同步数据时，如果图片已更改，那么我也需要更改 SD 卡中的图片 如何确定特定用户的图片是否已更改

目前我从服务器保存图像如下，尽管我现在使用硬编码的 url 和静态用户 ID

```
public class fetchImage extends Activity implements OnClickListener {
int id;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    id = 1;// declaring static as of now

}

{

    new BackgroundTask().execute();
    File storagePath = Environment.getExternalStorageDirectory();
    File imgFile = new File(storagePath, "/Pictures/" + id + ".jpg");

    if (imgFile.exists()) {
        Bitmap myBitmap = BitmapFactory.decodeFile(imgFile
                .getAbsolutePath());
    }

}

class BackgroundTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog mDialog;

    protected void onPreExecute() {
        mDialog = ProgressDialog.show(fetchImage.this, "",
                getString(R.string.progress_bar_loading), true);
    };

    @Override
    protected Void doInBackground(Void... params) {
        try {

            savesd(id, null);

        } catch (final Exception e) {

        }
        return null;
    }

    private void savesd(int id, URL uri) throws IOException {
        URL url;
        if (uri == null) {
            url = new URL("http://i.zdnet.com/blogs/3-29-androids.jpg");
        } else {
            url = uri;
        }
        InputStream input = url.openStream();
        try {
            File storagePath = Environment.getExternalStorageDirectory();
            OutputStream output = new FileOutputStream(new File(
                    storagePath, "/Pictures/" + id + ".jpg"));
            try {
                byte[] buffer = new byte[20000];
                int bytesRead = 0;
                while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                    output.write(buffer, 0, bytesRead);
                }
            } finally {
                output.close();
            }
        } catch (Exception e) {

            e.printStackTrace();
        } finally {
            input.close();
        }

    }

    protected void onPostExecute(Void result) {
        mDialog.dismiss();
    };
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

} 
```

另外我有一个问题，当我从设备上卸载这个应用程序时，它还应该从 sd 卡中清除这些用户图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:18:16.487

我使用时间戳来保存我上次同步数据的时间，并且仅在该时间戳之后下载文件

# mysql - Sequelize (v1.5) 和节点

> ID：12119874
> 
> 赞同：0
> 
> 时间：2012-08-25T06:52:58.053
> 
> 标签：mysql, node.js, sequelize.js

如何通过 sequelize orm 检查表中是否存在字段。请注意，我已经定义了完整的对象模型。我只需要检查特定字段是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:20:35.683

您可以通过以下方式查看数据库中的内容：

```
sequelize.getQueryInterface().describeTable('nameOfTableHere').success(function(data){}) 
```

如果您想检查特定型号的表格，您也可以这样做：

```
sequelize.getQueryInterface().describeTable(Model.tableName).success(function(data) {}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:42:57.753

由于我已经定义了对象模型，下面的表达式给出了模型中定义的字段名称数组。

```
Object.keys(Model.rawAttributes) 
```

# cordova - phonegap 数据库异步回调函数的最佳实践是什么

> ID：12119876
> 
> 赞同：2
> 
> 时间：2012-08-25T06:53:20.830
> 
> 标签：cordova, sqlite

我在 Phonegap Android 应用程序（如[存储示例](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)）中使用 Sqlite。在我的应用程序中，我有很多查询取决于最后的查询结果。我知道 Phonegap 数据库的 excuteSql 方法是异步的。所以我一个接一个地做了很多回调函数。在大型应用程序中做正确的方法吗？在 Phonegap 中使用异步回调函数的最佳实践是什么？

# iphone - iPhone：动画向上移动视图控制器

> ID：12119879
> 
> 赞同：2
> 
> 时间：2012-08-25T06:53:35.010
> 
> 标签：iphone

我正在开发一个 iPhone 应用程序，我需要在动画中缓慢向上移动第一个视图控制器并移动到第二个视图控制器。我正在考虑使用 CoreAnimation 将第一个视图控制器缓慢向上移动并推送到下一个视图控制器。有人可以帮助提供可用于实现此目的的类/api吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:36:29.303

尝试这个，

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:yourfirstview cache:YES];
    [UIView setAnimationDidStopSelector:@selector(remove_view)];
    //change frame here
    yourfirstview.frame =CGRectMake(0,-480,320,480);
    [UIView commitAnimations];

   -(void)remove_view
    {
       [yourfirstview removeFromSuperview];
       [UIView beginAnimations:nil context:nil];
       [UIView setAnimationDuration:1.0];
       [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:yoursecondview cache:YES];
       //change frame here
       yoursecondview.frame =CGRectMake(0,0,320,480);
       [UIView commitAnimations];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:09:04.113

You can easily achieve this on a single view controller using multiple `UIView`s

As per Apple's documentation:

> In iOS 4 and later, use the block-based animation methods.

So, in order to produce the intended results, using the following code.

```
UIView *mySecondView = [[UIView alloc] initWithFrame:CGRectMake(0, 480, 320, 480)];
[mySecondView setBackgroundColor:[UIColor redColor]];
[self.view addSubview:mySecondView];

[UIView animateWithDuration:2.0 delay:3.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    [mySecondView setTransform:CGAffineTransformMakeTranslation(0, -480)];
}completion:^(BOOL done){

}]; 
```

# javascript - 如何在自定义大小的弹出窗口中打开所有外部链接？

> ID：12119885
> 
> 赞同：-1
> 
> 时间：2012-08-25T06:54:07.647
> 
> 标签：javascript

使用此代码，我可以选择所有外部链接并使其在新选项卡中打开：

```
$.expr[':'].external = function(obj){
    return !obj.href.match(/^mailto\:/)
           && (obj.hostname != location.hostname)
           && !obj.href.match(/^javascript\:/)
           && !obj.href.match(/^$/)
};

$('a:external').attr('target', '_blank'); 
```

有没有办法可以修改它

所以它执行此功能：

```
 var newwindow; function poptastic(url){
  newwindow=window.open(url,'name', 'height=800,width=1020,scrollbars=yes');
    if (window.focus) {newwindow.focus()}} 
```

最终，我希望它只执行底部功能，但对于所有外部链接，而不是必须进入并将其添加到每个外部链接：

```
 <a href="javascript:poptastic('http://www.external-link.com')">External Link</a> 
```

（我知道有些人不喜欢这样，要求用户弹出一个新窗口而不是仅仅执行 target="_blank"，但我已经询问了我客户网站的年龄组中的一小部分用户，他们都非常喜欢这种方法，而不是在新标签中打开它）。

另外，有没有一种方法可以添加到顶部，以便任何 .PDF 文件也可以执行上述命令？它的设置仅适用于外部站点，但是您也可以对任何 .pdf 文件进行例外处理吗？

非常感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:59:00.753

```
$('a:external').click(function(e){
    e.preventDefault();
    poptastic(this.href);
}); 
```

也就是说，单击任何外部链接时都会阻止默认的单击行为（这当然是导航到指定的 url，替换当前页面），而是调用`poptastic()`传递 href 的函数。

（您可以直接将您的主体`poptastic`放入`.click`处理程序中......）

**编辑：**对 PDF 做同样的事情，如果您打算修改`:external`选择器以包含 PDF - 我将“PDF”定义为以 href 结尾`".pdf"`- 你可以这样做：

```
$.expr[':'].external = function(obj){
    return !obj.href.match(/^mailto\:/)
           && (obj.hostname != location.hostname || /.pdf$/.test(obj.href))
           && !obj.href.match(/^javascript\:/)
           && !obj.href.match(/^$/)
}; 
```

演示：http: [//jsfiddle.net/RevXG/4/](http://jsfiddle.net/RevXG/4/)

# sql-server - “没有选择要恢复的备份集”SQL Server 2012

> ID：12119891
> 
> 赞同：164
> 
> 时间：2012-08-25T06:54:57.623
> 
> 标签：sql-server, restore, sql-server-2012

我有一个启用了文件流的 SQL Server 2012 数据库。但是，当我备份它并尝试在另一个 SQL Server 2012 实例（在另一台机器上）上恢复它时，我只是收到以下消息：

> 没有选择要恢复的备份集。

甚至没有更多的解释。这里有什么问题？

没有文件流的每个其他数据库都可以，并且可以成功恢复。它与文件流有关吗？我应该安装一个修补程序或类似的东西。

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-08-28T11:40:40.093

我遇到了这个问题，结果我试图恢复到错误的 SQL 版本。如果您想了解更多信息，请尝试使用以下 SQL 恢复数据库：

```
RESTORE DATABASE <YourDatabase> 
FROM DISK='<the path to your backup file>\<YourDatabase>.bak' 
```

那应该会给您调试此错误所需的错误消息。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-11-09T03:11:34.073

我的问题最终是**权限**。我在开发机器上并通过家庭组复制。不知何故，可能基于我将文件复制到的位置，权限被搞砸了，Management Studio 无法读取文件。由于这是开发人员，我只是**给了每个人对 bak 文件的权限**，然后可以通过 GUI 成功恢复。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-01-05T15:56:26.763

运行时：

```
RESTORE DATABASE <YourDatabase> 
FROM DISK='<the path to your backup file>\<YourDatabase>.bak' 
```

它给了我以下错误：

> 设备“C:\NorthwindDB.bak”上的媒体系列格式不正确。SQL Server 无法处理此媒体系列。RESTORE HEADERONLY 异常终止。（Microsoft SQL Server，错误：3241）块引用

事实证明，即使源数据库和目标数据库的兼容性级别相同，您也无法将数据库从较高的 SQL 版本转移到较低的 SQL 版本。要检查 SQL 版本，请运行：

```
Select @@Version 
```

要查看差异，只需在**源**SQL 服务器上创建一个数据库并尝试从备份文件中进行还原，当您使用 SSMS 执行此操作时，一旦您选择了备份文件，它就会显示一些关于它的信息，当您拒绝从较低版本的服务器打开它，只会说“没有选择要恢复的备份集” [![在此处输入图像描述](../Images/4b6a118c3a1e4a3c264dc48188202dda.png)](https://i.stack.imgur.com/e6okU.jpg)

**因此**，如果您仍需要将数据移动到较低版本的 SQL，请选中[This](https://dba.stackexchange.com/questions/20588/restore-sql-server-2012-backup-to-a-sql-server-2008-database/)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-09-25T20:28:02.407

**以管理员身份**运行 SQL Server Management Studio （右键单击快捷方式/exe，然后选择“以管理员身份运行”），然后尝试恢复。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-09-11T08:21:02.037

我认为我没有愚蠢到混淆版本 - 但是，我没有意识到在我的新服务器上，一个 SQL Server 2005 实例从出生就已经安装了名为**`SQLEXPRESS`**. 尝试将我在 SSMS 2012 中的 SQL Server 2008 R2 备份数据库还原到**`SQLEXPRESS`**实例时，备份集列表为空。

最终我意识到**`SQLEXPRESS`**服务器上的实例不是 2012 实例，而是 2005。我断开连接并连接到*实际*的2012 实例（在我的例子中名为**`SQLEXPRESS2012`**），它（显然）工作。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-05-12T07:09:45.427

我的问题是我的用户在 Builtin-Administrators 组中，并且在 SQL Server 上没有具有 Sysadmin-role 的用户。我刚刚以管理员身份启动了 Management Studio。这样就可以恢复数据库。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-05-22T19:05:17.797

仅供参考：我发现在恢复时，我需要使用相同的（SQL 用户）凭据登录 SSMS。我首先尝试使用 Windows 身份验证帐户进行还原。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-07-04T09:43:42.437

对我来说，这是一个用户权限问题。我用 sa 用户登录，它工作正常。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-01-12T14:41:35.417

就我而言，这是权限以及我使用“恢复文件和文件组...”而不是简单地“恢复数据库...”的事实。

这造成了不同。

[![在此处输入图像描述](../Images/478fe79303aab72deb8df71a4a554c6f.png)](https://i.stack.imgur.com/j7oCS.jpg)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-09-11T22:03:07.240

对我来说，问题在于 .BAK 文件位于服务器上的加密文件夹中。即使拥有完整的管理员权限，我也永远无法让 SSMS 读取文件。将 .BAK 移动到未加密的文件夹解决了我的问题。请注意，移动文件后，您可能还必须更改实际文件的属性以删除加密（右键单击，属性，高级，取消选中“加密内容以保护数据”。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-11-23T10:14:53.787

在我的情况下（新的 sql server 安装，新创建的用户）我的用户根本没有必要的权限。*我以sa*身份登录到 Management Studio ，然后转到 Security/Logins，右键单击我的用户名 Properties，然后在我检查的 Server Roles 部分中`sysadmin`。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-01-16T13:20:18.847

我在 SQL Server 2014 中遇到了同样的问题（Management Studio 在尝试查找备份文件以进行还原操作时看不到它所在的文件夹）。[该线程](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=187704)包含解决我问题的答案。引用：

> SQL Server 服务帐户可以通过开始->控制面板->管理工具->服务找到。双击 SQL Server 服务->登录选项卡。您将使用“本地系统帐户”或“此帐户”来定义特定帐户。如果您使用的是本地系统帐户，您将无法引用非本地服务器的备份。相反，如果您已定义要使用的帐户，则该帐户需要有权访问备份文件位置。您使用个人登录访问备份的能力无关紧要；它是使用的 SQL Server 帐户，即使您正在启动备份。您的 IT 人员应该能够确定授予每个帐户哪些权限。

希望对某人有所帮助。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-08-22T20:05:11.527

对我来说，这是因为备份文件仍然被另一个进程打开。这是事件日志：

BackupDiskFile::OpenMedia：备份设备“X:\Backups\MyDatabase\MyDatabase_backup_2014_08_22_132234_8270986.bak”无法打开。操作系统错误 32（该进程无法访问该文件，因为它正被另一个进程使用。）。

只需关闭并重新打开 Sql Server Management Studio 即可解决它（显然它是 ssms.exe 有句柄..）

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-09-18T00:46:58.880

就我而言，这是一个权限问题。

[![在此处输入图像描述](../Images/1f2b5f00f00d14ddc4bb2bff1d66d318.png)](https://i.stack.imgur.com/zhEiJ.png)

对于 Windows 用户，我使用的是没有`dbcreator`角色。

所以我按照以下步骤

1.  连接`sa`到 SQL 服务器
2.  `Security`在对象资源管理器中展开
3.  扩张`Logins`
4.  右键单击有问题的 Windows 用户
5.  点击属性
6.  `Server Roles`从`Select a page`选项中选择
7.  检查`dbcreator`用户的角色
8.  点击确定

[![在此处输入图像描述](../Images/e0d4db10c5265cb6e4267f6213df6da3.png)](https://i.stack.imgur.com/AfvkA.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-08-15T19:13:15.937

此故障的另一个潜在原因似乎是 Google Drive。Google Drive 正在压缩 bak 文件或其他东西，因此如果您想通过 Google Drive 传输数据库备份，看来您必须先压缩它。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-08-23T11:54:19.463

如果要完全替换现有数据库，请使用**WITH REPLACE**选项：

```
RESTORE DATABASE <YourDatabase> 
FROM DISK='<the path to your backup file>\<YourDatabase>.bak'
WITH REPLACE 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-31T19:20:34.403

即使我在同一台机器上备份和恢复，我也收到了相同的错误消息。

问题出在此处：备份时，我在目标框中有 2 个项目。

所以解决方法是：确保“目的地”框中只有一项。如果有，请删除所有其他人。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-29T07:49:44.160

对我来说，这是一个权限问题。在加入我的公司域之前，我使用本地用户帐户安装了 SQL Server。后来，我尝试使用我的域帐户恢复数据库，该帐户没有恢复 SQL Server 数据库所需的权限。您需要修复您的域帐户的权限，并在您拥有的 SQL Server 实例上为其授予系统管理员权限。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-01-22T15:34:44.520

我想我因最有理由得到这个错误而获奖。在“还原数据库”对话框中，“源”下的数据库下拉菜单是灰色的，我认为它已被禁用。我跳到目的地下的数据库下拉列表，认为它是源并进行了选择。这样做会导致显示此错误消息。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-10-03T18:48:17.950

我遇到了同样的问题。以管理员身份运行 SSMS，然后右键单击并执行数据库还原。应该管用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-10-13T00:16:52.183

使用 SQL Server 2012 Express。

我的错误（来自 SQL 管理器 - 恢复数据库对话框）：

`No backupset selected to be restored`

此外，列表中没有显示可供选择的备份集。

问题是我已将 5 个备份文件中的 1 个移动到 SQL Server 服务登录用户没有权限的文件夹 - 我尝试添加该用户，但无法将 NT Service\MSSQL$SQLEXPRESS 用户加入安全性列表。

我将文件移动到服务用户的 Documents 文件夹下，这使它能够读取我选择的所有文件 - 那时为 4 个 - 错误更改为“缺少媒体集” - 然后我四处寻找另一个备份文件，当我补充说我能够恢复时。

这个问题的答案帮助我找到了正确的地方并找到了解决方案。

# c - glibc 中与本地时间的资源争用，为什么？

> ID：12119893
> 
> 赞同：2
> 
> 时间：2012-08-25T06:55:08.910
> 
> 标签：c

我发现在多线程程序中使用 localtime 函数时存在资源争用。

但是函数中只有一个锁资源？这个错误的根本原因可能是什么？

非常感谢有关此问题的任何建议或想法。

代码如下，从 glibc 中截取，

```
struct tm *
localtime (t)
     const time_t *t;
{
  return __tz_convert (t, 1, &_tmbuf);  //tmbuf temp variable
}

struct tm *
__tz_convert (const time_t *timer, int use_localtime, struct tm *tp)
{
  long int leap_correction;
  int leap_extra_secs;

  if (timer == NULL)
    {
      __set_errno (EINVAL);
      return NULL;
    }

  __libc_lock_lock (tzset_lock);

  /* Update internal database according to current TZ setting.
     POSIX.1 8.3.7.2 says that localtime_r is not required to set tzname.
     This is a good idea since this allows at least a bit more parallelism.  */
  tzset_internal (tp == &_tmbuf && use_localtime, 1);

  if (__use_tzfile)
    __tzfile_compute (*timer, use_localtime, &leap_correction,
              &leap_extra_secs, tp);
  else
    {
      if (! __offtime (timer, 0, tp))
    tp = NULL;
      else
    __tz_compute (*timer, tp, use_localtime);
      leap_correction = 0L;
      leap_extra_secs = 0;
    }

  if (tp)
    {
      if (! use_localtime)
    {
      tp->tm_isdst = 0;
      tp->tm_zone = "GMT";
      tp->tm_gmtoff = 0L;
    }

      if (__offtime (timer, tp->tm_gmtoff - leap_correction, tp))
        tp->tm_sec += leap_extra_secs;
      else
    tp = NULL;
    }

  __libc_lock_unlock (tzset_lock);

  return tp;
} 
```

# c# - 使用正则表达式验证 Unicode 长度

> ID：12119896
> 
> 赞同：3
> 
> 时间：2012-08-25T06:55:44.480
> 
> 标签：c#, regex

如何使用正则表达式验证**1391/00/00**字符串

我希望每个单独斜杠的长度与 {4}/{2}/{2} 完全相同

Unicode 范围是**[\u06F0-\u06F9]**。

我有长度检查的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T08:27:32.587

您可以使用以下正则表达式：

```
"^[\u06F0-\u06F9]{4}/[\u06F0-\u06F9]{2}/[\u06F0-\u06F9]{2}$" 
```

您可能错过了`^`使其在字符串开头开始匹配以及`$`使其在字符串末尾结束匹配的 。如果没有这些更改，则更长但包含您的表达式的字符串将作为匹配项产生。

通过此更改，只有当字符串包含您的模式并且目标模式的左侧或右侧没有任何额外字符时，匹配才会成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:30:18.787

这个正则表达式应该适合你：

```
"(^|[^\u06F0-\u06F9]{1})[\u06F0-\u06F9]{4}/[\u06F0-\u06F9]{2}/[\u06F0-\u06F9]{2}([^\u06F0-\u06F9]{1}|$)" 
```

**在以下两个**条件下匹配日期表达式：

*   条件1：它应该在字符串*的*开头*或*不在字符范围内的单个字符之后*`[\u06F0-\u06F9]`*

**   条件2：它应该在字符串*的*末尾*或*不在字符范围内的单个字符之前*`[\u06F0-\u06F9]`** 

 **这将不匹配此字符串中的表达式：

```
How can I validate ۱۱۳۹۱/۰۹/۰۹ string with Regex
-------------------^5Numbers, not matched 
```

或者这个字符串：

```
How can I validate ۱۱۳۹۱/۰۹/۰۹۹ string with Regex
------------------------------^Three numbers, not matched 
```

但仍将匹配此字符串中的日期表达式：

```
How can I validate۱۳۹۱/۰۹/۰۹string with Regex  
------------------^---------^ No whitespaces above ^, the expression is matched though 
```

如果你想避免这种情况，即只匹配日期表达式，前后有空格（和换行符），请使用以下正则表达式：

```
(^|[ \t\n]{1})[\u06F0-\u06F9]{4}/[\u06F0-\u06F9]{2}/[\u06F0-\u06F9]{2}([ \t\n]{1}|$) 
```

希望这会有所帮助。**

# android - Android 上的单选按钮列表

> ID：12119899
> 
> 赞同：1
> 
> 时间：2012-08-25T06:55:54.313
> 
> 标签：android, radio-button, sharedpreferences, preference, listpreference

我希望在选择 PreferenceActivity 中的首选项时显示一个带有单选按钮的列表（例如在默认图库应用幻灯片中的 HTC 感觉上选择音乐首选项时）。我不想使用片段，因为上面的模型正在运行 Gingerbread 并且不支持片段。该列表的底部也应该有按钮。这是一种 ListPreference。但是，就像自定义的 ListPreference 一样（这样它就比默认的单个按钮更多，并且列表占据了整个屏幕）那么，你如何显示这样的列表呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:58:09.337

对于带有单选按钮的列表首选项，请使用此

```
<ListPreference
    android:entries="@array/scheme_choices"
    android:entryValues="@array/scheme_values"
    android:key="scheme"
    android:title="Scheme" /> 
```

在 string.xml 文件中添加所需的值

```
<string-array name="scheme_values">
    <item>one</item>
    <item>two</item>
</string-array> 
```

价值观

```
<string-array name="scheme_choices">
    <item>One</item>
    <item>Two</item>
</string-array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:54:00.677

将其用作列表项的 TextView：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/radio_text_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" 
    android:paddingLeft="3dip"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
    android:paddingRight="3dip"
    android:padding="10dip"    
    android:singleLine="true"
    android:ellipsize="marquee" /> 
```

# syntax - Ada 中的勾号或撇号字符是什么？

> ID：12119915
> 
> 赞同：7
> 
> 时间：2012-08-25T06:59:13.877
> 
> 标签：syntax, operators, ada

非常基本的问题，但只是阅读源代码并试图说明它的`'`用途以及它与`.`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T09:08:41.417

`'`字符用于引入*属性*。

例如`Integer'Last`是 type 的最大值， 是 type`Integer`的`Float'Digits`小数精度`Float`。

语言定义属性的完整列表在 Ada 参考手册的附录 K 中。

它也是限定表达式语法的一部分，例如`Some_Type'(expression)`.

除其他外，该`.`字符用于引入记录组件名称，例如`Obj.Comp`，其中`Obj`是记录变量并且`Comp`是该记录的组件。

属性由语言或实现定义；定义记录类型时定义组件名称。

撇号也用于分隔字符文字：`'x'`.

# openerp - 使用条件缩进

> ID：12119916
> 
> 赞同：2
> 
> 时间：2012-08-25T06:59:25.640
> 
> 标签：openerp

请帮帮我..怎么了

```
 def _amount_all(self, cr, uid, ids, name, args, context=None):
    res = {}
    for invoice in self.browse(cr, uid, ids, context=context):
        res[invoice.id] = {
            'amount_untaxed': 0.0,
            'amount_tax': 0.0,
            'amount_total': 0.0
        }
        for line in invoice.invoice_line:

            res[invoice.id]['amount_untaxed'] += line.price_subtotal
        for line in invoice.tax_line:
            res[invoice.id]['amount_tax'] += line.amount 
        res[invoice.id]['amount_total'] = res[invoice.id]['amount_tax'] + res[invoice.id]['amount_untaxed']
        cr.execute('select payment from sale_order where name = %s',(invoice.origin,))
        ads = cr.fetchone()
        pay = ads and ads[0] or None
        if pay == 'deposit':
            if invoice.partner_id.avail < 0:
                raise osv.except_osv(_('Invalid action !'), _('Deposit must be recharged')
                    if invoice.amount_total != res[invoice.id]['amount_total']:
                        temp = invoice.partner_id.depot - res[invoice.id]['amount_total']
                        cr.execute('update res_partner set depot=%s where id = %s', (temp, invoice.partner_id.id,))
    return res 
```

我检查了条件，如果他使用押金付款并且如果不是小于零，则可用，则减少押金。我认为..这是正确的..但是当我跑步时，看起来像这样

**if invoice.amount_total != res[invoice.id]['amount_total']:** ***SyntaxError: invalid syntax***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:12:26.763

为什么在行后给出 2tabs(8 个空格)`raise osv.except_osv()` 你的代码应该像

```
def _amount_all(self, cr, uid, ids, name, args, context=None):
    res = {}
    for invoice in self.browse(cr, uid, ids, context=context):
        res[invoice.id] = {
            'amount_untaxed': 0.0,
            'amount_tax': 0.0,
            'amount_total': 0.0
        }
        for line in invoice.invoice_line:

            res[invoice.id]['amount_untaxed'] += line.price_subtotal
        for line in invoice.tax_line:
            res[invoice.id]['amount_tax'] += line.amount 
        res[invoice.id]['amount_total'] = res[invoice.id]['amount_tax'] + res[invoice.id]['amount_untaxed']
        cr.execute('select payment from sale_order where name = %s',(invoice.origin,))
        ads = cr.fetchone()
        pay = ads and ads[0] or None
        if pay == 'deposit':
            if invoice.partner_id.avail < 0:
                raise osv.except_osv(_('Invalid action !'), _('Deposit must be recharged')
            if invoice.amount_total != res[invoice.id]['amount_total']:
                temp = invoice.partner_id.depot - res[invoice.id]['amount_total']
                cr.execute('update res_partner set depot=%s where id = %s', (temp, invoice.partner_id.id,))
    return res 
```

# c# - DNS 设置影响 C# 中的 AD 身份验证

> ID：12119920
> 
> 赞同：0
> 
> 时间：2012-08-25T07:00:21.077
> 
> 标签：c#, asp.net

由于我看到了很多关于下面显示的异常的帖子，而且大多数人都痛苦地坚持了下来。

```
Exception Message: "The server is not operational"
Source: "System.DirectoryServices" 
```

最近它发生在我身上。但最后我想通了。我想我应该在这里分享我的经验，以便将来对与我有同样问题的其他人有所帮助。

我正在使用的程序正在使用 AD 身份验证。它在我属于 AD 域的计算机上运行良好。代码如下。

```
 public static bool IsAuthenticated(string srvr, string usr, string pwd)
        {
            bool authenticated = false;

            try
            {
                DirectoryEntry deRoot = new DirectoryEntry(srvr);

                DirectoryEntry entry = new DirectoryEntry(srvr, usr, pwd);
                object nativeObject = entry.NativeObject;//this will cause exception Until setting the right DNS address.
                authenticated = true;
            }
            catch (DirectoryServicesCOMException cex)
            {
                //not authenticated; reason why is in cex
                HttpContext.Current.Response.Write(cex.Message);
            }
            catch (Exception ex)
            {
                //not authenticated due to some other exception [this is optional]
                HttpContext.Current.Response.Write(ex.Message);
            }

            return authenticated;
        } 
```

有一天，我们的 IT 环境要求发生了变化，我的电脑 IP 从 10.50.70.64 切换到了 169.254.135.249。因为我的网卡IP和DNS总是设置为`Obtain address automatically`.在这种情况下，我可以使用AD帐户成功登录我的电脑。但是程序运行时出现了一个很大的异常。所以我怀疑我的网络适配器设置是否有问题。最后我发现如果我为我们的 IT 环境设置了正确的 DNS 地址。异常消失了。我不知道为什么。所以我也希望有人能解释一下。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:10:18.637

在 AD 域中验证用户和密码之前，需要针对 DSN 服务器解析域路径。

# doctrine-orm - 从 $start 变量中获取结果

> ID：12119923
> 
> 赞同：0
> 
> 时间：2012-08-25T07:00:39.957
> 
> 标签：doctrine-orm

这是一个简单的查询：

```
//...
$query = $this->getEntityManager()
            ->createQuery('
        SELECT r
        FROM AcmeGolferBundle:Golfer g
        LEFT JOIN g.shots r
        WHERE g.id = :id'
        )
            ->setParameter('id',$id);

return $query->getResult(); 
```

**`$start`**有没有办法从to获取结果**`$end`**？例如，如果有**50 个**结果，是否可以从 to 获取**`$start=20`**结果**`$end=30`**？我想我只需要这样做就可以获取总共**10 个对象**：

```
$query->setMaxResults(10); 
```

## **但是，如何从第 20 个结果中获取所有结果？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:11:08.777

采用

```
$query->setFirstResult(20); 
```

更新：请参阅[DQL 查询的文档](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#first-and-max-result-items-dql-query-only)。

# networking - 第三方可以欺骗数据包来干扰已经打开的连接吗？

> ID：12119924
> 
> 赞同：1
> 
> 时间：2012-08-25T07:00:42.270
> 
> 标签：networking, handshake, spoofing

这是我想到的场景。

计算机 A 是客户端连接的服务器，但客户端必须通过禁令检查。计算机 B 是充当禁令聚合器的服务器。来自多个服务器的禁令来自这里，任何服务器都可以通过 API 访问。计算机 C 是一个被禁止的客户端，它想要绕过禁令并连接到计算机 A。

这是登录过程：计算机 C 向计算机 A 发送其用户名和密码组合。计算机 A 接收登录信息并确保其有效。计算机 A 向计算机 B 询问计算机 C 的用户名禁令。计算机 B 向计算机 A 发送禁令记录。计算机 A 收到禁令记录并检查计算机 A 是否应因禁令而断开连接并采取相应措施。

所以，我的问题是计算机 C 是否可以欺骗计算机 B 对计算机 A 询问他的禁令记录的回应。不幸的是，我不太了解套接字以及 TCP 握手的工作原理。

如果计算机 C 知道计算机 B 表示他没有被禁止的响应是什么样的，知道何时需要向计算机 A 发送虚假响应，并且欺骗他的 IP 以类似于计算机 B 的 IP，那么他能否成功欺骗计算机 A认为他没有记录在案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:03:22.207

如果您只需使用只有您知道的私钥对来自 B 的响应进行签名，您就可以很快避免此问题。然后，A 将验证来自 B 的响应，如果签名不匹配，则拒绝它们。您可以将签名密钥的公钥部分包含在公共 API 中。

# php - 即使以管理员身份登录 Yii 也会出现错误 403

> ID：12119926
> 
> 赞同：0
> 
> 时间：2012-08-25T07:01:12.903
> 
> 标签：php, yii

```
public function actionCheckout()
{
     echo "Hello World!";
} 
```

我刚刚在控制器中创建了这个非常简单的代码，但是当我尝试在我的 URL 中浏览它时，它显示了这个错误：

![在此处输入图像描述](../Images/42ebc70363e75c40ebca7f11d7d6722d.png)

即使我目前以管理员身份登录，但为什么我不能访问那个非常简单的代码。

我将发布 CRUD 生成的 accessRules，我不知道这是否相互关联，但是当我尝试删除此行时，我已经可以访问该页面。

```
public function accessRules()
    {
        return array(
            array('allow',  // allow all users to perform 'index' and 'view' actions
                'actions'=>array('index','view'),
                'users'=>array('*'),
            ),
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('create','update'),
                'users'=>array('@'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions'=>array('admin','delete'),
                'users'=>array('admin'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    } 
```

如果您可以看到该代码上没有声明结帐，那么这无关紧要。

你认为这是/是什么原因？您的帮助将不胜感激和奖励！

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T08:03:01.517

如果您的控制器中有访问规则，那么您需要将此“结帐”操作添加到这些规则中。

您需要在 accessRules() 函数中将“结帐”添加到您需要的任何访问级别。如果每个人都可以访问它，您将需要：

```
 array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('index','view', 'checkout'),
            'users'=>array('*'),
        ) 
```

或仅限管理员访问：

```
 array('allow',  // allow admin user access
            'actions'=>array('admin','delete','checkout'),
            'users'=>array('admin'),
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:03:56.303

您必须在一个地方“结帐”指向 accessRules（我设置了所有允许的操作

```
public function accessRules()
{
    array('allow',  // allow all users to perform 'index', 'view' and 'checkout' actions
        'actions'=>array('index','view', 'checkout'),
        'users'=>array('*'),
    ),
    array('allow', // allow authenticated user to perform 'create', 'update' and 'checkout'actions
        'actions'=>array('create','update','checkout'),
        'users'=>array('@'),
    ),
    array('allow', // allow admin user to perform 'admin','delete' and 'checkout' actions
        'actions'=>array('admin','delete','checkout'),
        'users'=>array('admin'),
    ),
    array('deny',  // deny all users
        'users'=>array('*'),
    ),
 } 
```

# android - Nexus 7 支持哪些 NFC 标签？(2012)

> ID：12119933
> 
> 赞同：14
> 
> 时间：2012-08-25T07:03:30.207
> 
> 标签：android, nfc, nexus-7

前几天我在朋友的设备上试用了 Ultralight C，但它不工作。我提出这些担忧是因为我知道 Mifare Classic 标签不适用于 Blackberry，并且我试图找到适用于大多数设备的标签。

我还没有尝试过 Ultralight 标签。

任何人在此问题上的任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-26T10:34:13.960

Nexus 7 包含与 Nexus S、Galaxy Nexus、Nexus Q、三星 Galaxy S3、HTC One X 和许多其他 Android 设备相同的 NFC 芯片（NXP Semiconductors 的 PN544）。因此，所有这些设备原则上都支持标签类型（天线性能可能会有所不同，从而导致结果有所不同）。黑莓包含不同制造商的 NFC 芯片。MIFARE Classic是NXP的技术，所以NXP的NFC芯片支持，其他厂商一般不支持。

在选择适用于所有（或大多数）设备的标签类型时，我会选择一种实现[NFC 论坛标准化标签类型](http://www.nfc-forum.org/specs/spec_list/)之一的标签类型：

*   NFC Forum Tag 1 类型：例如 Broadcom 的 Topaz/Jewel
*   NFC 论坛标签 2 类型：例如 NXP 的 MIFARE Ultralight（包括 Ultralight C）或 NTAG203
*   NFC Forum Tag 3 类型：例如 Sony 的 FeliCa 芯片（例如 FeliCa Lite）
*   NFC 论坛标签 4 类型：例如 NXP 的 MIFARE DESFire

我已经用 Android 设备和黑莓测试了所有这些类型，它们都可以工作。各种类型之间的主要区别在于它们可以存储多少数据以及保护数据不被覆盖的难易程度。上面提到的大多数示例通常可从各种在线供应商处获得。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T13:45:25.240

刚刚测试（使用 Android 4.1.1 的 Nexus 7，仅发现技术，以及使用[此 NXP taginfo 应用程序](https://play.google.com/store/apps/details?id=com.nxp.taginfolite&hl=en)的一些基本信息）。下面的所有标签都对我有用。不幸的是，我没有 UltralightC。

*   Mifare 标准 1K (MF1S50)
*   Mifare 超轻 (MF0ICU1)
*   Mifare Desfire (MF3ICD40)
*   Mifare 经典 4K (MF1S70)
*   黄玉宝石 (IRT5011)

什么不适用于您的 UltralightC？发现？读回 NDEF 信息？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T15:42:34.363

只是添加我们自己的发现：

我们在 zipnfc.com 上销售 NFC 标签，到目前为止，我们发现 NTAG203 适用于市场上的所有手机。我们还发现 Ultralight C IC 适用于所有手机，但读取距离要小得多，因此在使用 Nexus 7 等较大的设备时，您必须在背面的天线上，但使用 NTAG203 您可以靠近。

NTAG203 是目前​​为止最受欢迎的，除非您需要大于 137 个字符的容量。在大多数情况下，使用 NFC 回话到云端 137 已经绰绰有余。

Mifare Classic 1K仍然卖得很好，但主要用于手机已知的私人用途或特定的商业用途，但是当标签用于营销并且需要支持所有手机时，规范已成为NTAG203 ...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-23T03:01:30.013

任何其他人（是的，除了我）在搜索有关*2013 Nexus 7*（FHD 或“全高清”模型）的 NFC 标签支持信息时遇到此答案的人都应该知道这个第二代 Nexus 7 不再使用NXP的NFC芯片，不*支持*MIFARE标签！

# android - 启动时服务强制关闭

> ID：12119935
> 
> 赞同：0
> 
> 时间：2012-08-25T07:03:42.603
> 
> 标签：android, service, broadcastreceiver

我试图在启动时启动服务，但服务被强制关闭

广播接收器的代码如下

```
package com.android.locationservice;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyLocationBroadcastReceiver extends BroadcastReceiver{
    public void onReceive(Context context, Intent intent) {
        Intent startServiceIntent = new Intent();
        startServiceIntent.setAction("com.android.locationservice.LocatonTraceService");
        context.startActivity(startServiceIntent);
    }
} 
```

清单看起来像这样

```
<receiver android:name="com.android.locationservice.MyLocationBroadcastReceiver">  
    <intent-filter>  
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
    </intent-filter>  
</receiver> 

<service android:name=".LocationTraceService">
    <intent-filter>
        <action android:name="com.android.locationservice.LocationTraceService" />
    </intent-filter>    
</service>

</application>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

和这样实现的服务

```
 package com.android.locationservice;

    import android.app.Service;
    import android.content.Intent;
    import android.os.IBinder;
    import android.widget.TextView;
    import android.widget.Toast;

    public class LocationTraceService extends Service
    {

   @Override
   public void onCreate() {
       super.onCreate();
       Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
      // Log.i(tag, "Service created...");
      // new LocationActivity("service created...");

   }

@Override
   public void onStart(Intent intent, int startId) {      
       super.onStart(intent, startId);  

       Toast.makeText(this, "Service started...", Toast.LENGTH_LONG).show();
       //new LocationActivity("service started...");
   }

   @Override
   public int onStartCommand(Intent intent, int flags, int startId)
   {

       return super.onStartCommand(intent, flags, startId);
   }
   @Override
   public void onDestroy() {
       super.onDestroy();
       Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
       //new LocationActivity("service destroyed...");
   }

   @Override
   public IBinder onBind(Intent intent) {
       return null;
   }

} 
```

日志猫是

```
 08-25 07:33:39.021: E/AndroidRuntime(248): FATAL EXCEPTION: main
 08-25 07:33:39.021: E/AndroidRuntime(248): java.lang.RuntimeException: Unable to start                                                     context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
 08-25 07:33:39.021: E/AndroidRuntime(248):     at    android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
 08-25 07:33:39.021: E/AndroidRuntime(248):     at android.app.ActivityThread.access$3200(ActivityThread.java:125)
 08-25 07:33:39.021: E/AndroidRuntime(248):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083) 
```

请帮助我，我是android的新手，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:08:42.483

为什么你开始服务活动，而不是服务？正确的：

```
public class MyLocationBroadcastReceiver extends BroadcastReceiver{
    public void onReceive(Context context, Intent intent) {
        startService(new Intent(context, LocatonTraceService.class));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:07:39.193

我认为您在 AndroidManifest.xml 中缺少 GPS 权限

```
<uses-permission android:name="android.permission.ACCESS_GPS"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission> 
```

# android - 音频流 IOException：准备失败。：状态 = 0xFFFFFFF6

> ID：12119937
> 
> 赞同：0
> 
> 时间：2012-08-25T07:04:21.980
> 
> 标签：android

Android 2.3 Mediaplayer 无法播放任何[音频流](http://radio02-cn03.akadostream.ru:8114/)，导致`W/System.err(19610): java.io.IOException: Prepare failed.: status=0xFFFFFFF6`. 但是，相同的流在 Android 4.0 上运行良好。

我可以为该应用程序提供什么使其在 Android 2.3 平台上运行吗？

谢谢。

我使用的一些代码：

```
 mPlayer = new MediaPlayer();
    mPlayer.setOnErrorListener(mOnErrorListener);

    mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mPlayer.setOnPreparedListener(mOnPreparedListener);
    mPlayer.setOnBufferingUpdateListener(mOnBufferingUpdateListener);
    try {
        mPlayer.setDataSource(
                this,
                Uri.parse("http://radio02-cn03.akadostream.ru:8114/detifm192.mp3"));
        mPlayer.prepare();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

**UPD** 我可以用 MoboPlayer 播放“http://radio02-cn03.akadostream.ru:8114/detifm192.mp3” - 有什么建议吗？它在消息“尝试软解码模式”后播放

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:17:05.580

检查那里的编码。看来硬件解码失败了。

# java - ExpressionLanguage (EL) 未按预期工作

> ID：12119941
> 
> 赞同：0
> 
> 时间：2012-08-25T07:05:26.260
> 
> 标签：java, jsf, jsf-2, el

我正在创建具有以下代码的 Web 应用程序。

```
<p:commandButton ajax="false" 
 style="#{patentInfo.photoType.contains('application')?
 'visibility:visible;width:200px;height:200px;
  background-image: url(DisplayImage?mainID=tempo1&amp;id=#{patentInfo.photoType});
  background-repeat: no-repeat;background-size: 100% 100%;'
 :
 'visibility:hidden;width:2px;height:2px;'}"> 
```

我正在设置背景图像，其中我使用 Java 类 as`DisplayImage`并将参数传递给那些 as `mainID=tempo1&amp;id=#{patentInfo.photoType}`。在 java 中，我正在打印`mainID`&`id`用于测试目的。

**DipalyImage.java**

```
String mainID = request.getParameter("mainID");
String id = request.getParameter("id");
System.out.println("mainID=="+mainID+", id=="+id); 
```

`patentInfo.photoType`将数据保存为`application/pdf`

***问题出在我传递的背景图像参数上。***

1.  当我使用`background-image: url(DisplayImage?mainID=tempo1&amp;id=#{patentInfo.photoType});`& print `mainID`&`id`我得到如下值。

    `mainID=temp1`&`id=`

    我没有得到任何身份证件......

2.  当我使用`background-image: url(DisplayImage?mainID=tempo1&amp;id=patentInfo.photoType);`& print `mainID`&`id`我得到如下值。

    `mainID=temp1`&`id=patentInfo.photoType`

我在这里做错了什么？

我期望输出为`mainID=temp1`&`id=application/pdf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:19:55.503

问题是你`#{ ... #{} ...}`的 el.

尝试这样的事情：

`<p:commandButton ajax="false" style="#{patentInfo.photoType.contains('application')?'visibility:visible;width:200px;height:200px;background-image: url(DisplayImage?mainID=tempo1&amp;id='.concat(patentInfo.photoType).concat(';background-repeat: no-repeat;background-size: 100% 100%;'):'visibility:hidden;width:2px;height:2px;'}">`

# r - 用r中数据框中的颜色替换数字

> ID：12119946
> 
> 赞同：-1
> 
> 时间：2012-08-25T07:06:58.727
> 
> 标签：r, colors, replace

我有以下data.frame

```
df<-data.frame(x=c("A","B","C"),colour=c(0.3,0.6,0.9))

  x colour
1 A    0.3
2 B    0.6
3 C    0.9 
```

我想用这样的颜色替换 df[,"color"] 中的数字

```
< 0.4 = colour 1 
0.4 - 0.7 = colour 2 
< 0.7= colour 3 
```

我尝试了以下替换方案，但之前的颜色分配被后者替换了。有什么建议吗？

```
library(RColorBrewer)

g<-brewer.pal(3,"Greens")

col1<-df[,"colour"] < 0.4
df[col1,"colour"]<-g[1]
col2<-df[,"colour"] < 0.7
df[col2,"colour"]<-g[2]
col3<-df[,"colour"] >= 0.7
df[col3,"colour"]<-g[3] 
```

谢谢你的建议。

解决方案感谢 seacarmody（和 spaceman 的有用评论）

```
v<-c(0.45,0.65,0.75,0.85,0.95)
breaks<-c(0.4,0.5,0.6,0.7,0.8,0.9)

#Create a colour for each section
cols<-brewer.pal(length(breaks)+1,"Greens")
#Replace the gsim values with colours using the breaks
v <- as.character(cut(v, c(-Inf, breaks, Inf),labels=cols))

 > v
[1] "#C7E9C0" "#74C476" "#41AB5D" "#238B45" "#005A32" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:23:50.740

如果您更改订单，您的方法将起作用：

```
col2<-df[,"colour"] < 0.7
df[col2,"colour"]<-g[2]
col1<-df[,"colour"] < 0.4
df[col1,"colour"]<-g[1] 
```

由于小于 0.4 的所有内容也小于 0.7，因此您的方法是覆盖 col1。由于您已经编辑了原始问题，因此上述内容已过时。我只是在这里使用更通用的方法：

```
breaks <- c(0.4, 0.7)  # you can add more cut points here
cols <- brewer.pal(length(breaks) + 1, "Greens")
df$colour <- as.character(cut(df$colour, c(-Inf, breaks, Inf), labels=cols)) 
```

# c - 我们可以将格式说明符字符串的地址传递给 printf

> ID：12119947
> 
> 赞同：-3
> 
> 时间：2012-08-25T07:07:00.650
> 
> 标签：c, pointers, char, printf

我们怎样才能写出这种类型的语法

```
#include<stdio.h>
main()
{
  char *str;
  str="%s";
  printf(str,"K\n");
  return 0;
} 
```

`printf`声明有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T07:11:54.823

Yes, it is valid, since your `str` is of type `char *`. This is the prototype of printf:

```
int printf ( const char * format, ... ); 
```

From the view of the called function, your statement will be the same as:

```
printf("%s","K\n"); 
```

With `"%s"` and `"K\n"` being a constant expressions of the type `char *`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T07:22:28.703

函数调用`printf()`是有效的，因为作为它的第一个参数，它需要一个常量字符串作为格式说明符。不要认为字符串是放在引号之间的东西 - 将其视为字符数组（加上终止的 0 字符）。在 C（以及任何有意义的编程语言）中，只要有一个值，它的类型和实际值/内容就决定了它的行为 - 让它成为文字、变量或任何其他表达式（我们暂时不考虑 const 的正确性为了简单起见）。就像在数学中一样，你是否写作并不重要

```
3 + 2 = 5 
```

或者

```
x = 3
y = 2
x + y = 5 
```

尽管 x 和 y 不是文字，但第二个相等的第三行仍然有效。它们是变量，在使用它们时会使用它们的当前值。

现在关于 const 正确性的一个小问题是其他答案所缺乏的：字符串文字是类型的`const char *`，而不是`char *`因为你不能改变它的内容。所以写起来不太好

```
char *foo = "blah blah"; 
```

改写

```
const char *foo = "blah blah"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T07:12:08.293

Yes, the syntax is valid. The result of this program is the string "K\n"

Where \n means newline.

The %s tells printf that the first arg it will be printing should be printed as a string.

See this: [http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

This is a very simple program. In the time it took you to ask this question, you could have compiled and run the program yourself and seen the answer. You learn best by doing.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T08:41:10.453

`printf("%s","K\n");`- 此语句两个字符串文字`%s`ans `k\n`。这两个字符串文字将在文本段中作为只读数据。现在考虑`1000`的是字符串文字的地址，`%s`并且`2000`是字符串文字的地址`k\n`。`1000`并且`2000`将是两个争论，这将传递给`printf`.

```
printf("%s","K\n"); 
```

这也可以写成下面的方式

```
...
char *a = "%s";  //Address 1000 is stored in a
char *b = "k\n"; //Address 2000 is stored in b
printf(a,b);     //Now we are passing 1000 and 2000 to printf
... 
```

而且我想告诉你，下面的方法也可以打印一个字符串。

```
...
char *a = "hello world"
printf(a); //This will print hello world
... 
```

# android - 用于放大图像的搜索栏

> ID：12119952
> 
> 赞同：0
> 
> 时间：2012-08-25T07:08:02.187
> 
> 标签：android, seekbar, zooming

我想使用搜索栏实现放大和缩小图像。如果我在 Seek Bar 图像中向右走，则应该放大，反之亦然。

帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:18:14.040

你可以看看这里。[http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847)

**编辑：**

查看此[how-can-i-get-zoom-functionality-for-images](https://stackoverflow.com/questions/2537238/how-can-i-get-zoom-functionality-for-images)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T12:21:10.327

这里 pos 是选定的图像，因为我有多个图像可以放大和缩小。

```
public  void zoomImage(int pos)
        {

            if(pos==1) {
                seekbar.setMax((int) 60.0f);
                seekbar.setProgress(seekvalue4 * 10);
                System.out.println("--------seekvalue is :" + seekvalue4 * 10);

                seekbar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

                    @Override
                    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

                        float scale = (progress / 10.0f);
    //                         
                        if (scale <= 0.1f) {
                            return;
                        }
                        iv1.setZoom(scale);

                        seekvalue4 = (int) scale;

                    }

                    @Override
                    public void onStartTrackingTouch(SeekBar seekBar) {

                    }

                    @Override
                    public void onStopTrackingTouch(SeekBar arg0) {
                        // TODO Auto-generated method stub

                    }

                });
            } 
```

# codeigniter - Coginter 清洁网址

> ID：12119956
> 
> 赞同：-1
> 
> 时间：2012-08-25T07:08:23.197
> 
> 标签：codeigniter

我正在使用 Coginter

我想清理网址

我有网址[http://androidsign.com/newarticle//categories/get_categories/electronics](http://androidsign.com/newarticle//categories/get_categories/electronics)

我想要这个网址[http://androidsign.com/newarticle/electronics](http://androidsign.com/newarticle/electronics)

在路由文件中我写代码

```
$route['categories/(:any)'] = "$1"; 
```

但这不起作用

任何人都可以有想法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:02:08.087

这里是，

当前：[http ://androidsign.com/newarticle//categories/get_categories/electronics](http://androidsign.com/newarticle//categories/get_categories/electronics)

所需：[http ://androidsign.com/newarticle/electronics](http://androidsign.com/newarticle/electronics)

然后在 application/config/routes.php 添加这个路由规则

//如果 class = newarticle , method = categories , 3rd seg = get_categories ,4th (:any) 通配符 $route['newarticle/categories/get_categories/:any'] = "newarticle/electronics";

包含段 newaricle/categories/get_categories 的 URL 将被重新映射到类 newarticle 和方法电子

# c# - 如何使用c#在嵌套网格中获取按钮查找控件值

> ID：12119957
> 
> 赞同：2
> 
> 时间：2012-08-25T07:08:28.130
> 
> 标签：c#, asp.net, gridview

我正在使用嵌套网格视图，其中网格视图中的每一行都有子网格视图。我正在使用父 GridView 的 RowDataBound 事件来绑定子 GridView。我的问题是，如何在 Parent gridViews RowDataBound 事件中获取 Child GridView 的 Button findcontrol 值。

这是我的 Aspx 页面

```
 <asp:GridView ID="grdSubClaimOuter" SkinID="GridView" runat="server" Width="100%"
                    AutoGenerateColumns="false" OnRowDataBound="grdSubClaimOuter_RowDataBound" OnRowCommand="grdSubClaimOuter_RowCommand"
                    ShowFooter="false" AllowPaging="true" OnPageIndexChanging="grdSubClaimOuter_PageIndexChanging">
                    <%--<AlternatingRowStyle BackColor="ButtonFace" />--%>
                    <Columns>
                        <asp:TemplateField ItemStyle-Width="5%">
                            <ItemTemplate>
                                <asp:HiddenField ID="hdnClaimNo" runat="server" Value='<%# Eval("ClaimNo") %>' />
                                <asp:Image runat="server" ID="img1" ImageUrl="../images/Collapse_plus.png" />
                            </ItemTemplate>
                            <ItemStyle Width="5%"></ItemStyle>
                        </asp:TemplateField>
              <asp:GridView ID="grdSubClaim" runat="server" SkinID="GridView" CellPadding="4" Width="100%"
                                    AutoGenerateColumns="false" ShowFooter="false" OnRowEditing="grdSubClaim_RowEditing"
                                    OnRowCommand="grdSubClaim_RowCommand" OnRowDeleting="grdSubClaim_RowDeleted" 
                                    AllowPaging="false" >
                                    <%--SkinID="GridView"--%>
                                    <Columns>
                                        <asp:TemplateField FooterStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left">
                                            <HeaderTemplate>
                                                Sub Claim No
                                            </HeaderTemplate>
                                            <ItemTemplate>
                                                <asp:Label ID="lblSubClaimNoValue" Width="" runat="server" Text='<%#Eval("SubClaimNo")%>'></asp:Label>
                                            </ItemTemplate>
                                            <FooterStyle HorizontalAlign="Left" />
                                        </asp:TemplateField>
           <asp:Button ID="btnSubrogation" CssClass="groovybutton" runat="server" CommandName="Subrogation"
                                                    Text="Subrogation" CommandArgument='<%# Eval("ClaimNo") + "~" + Eval("SubClaimNo")%>' />
                                                <asp:Button ID="btnSalvage" CssClass="groovybutton" runat="server" CommandName="Salvage"
                                                    Text="Salvage" CommandArgument='<%# Eval("ClaimNo") + "~" + Eval("SubClaimNo")%>' />
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                    </Columns>
                                    <AlternatingRowStyle CssClass="" />
                                    <RowStyle CssClass="ob_gBody" />
                                    <HeaderStyle CssClass="gridHeader" />
                                </asp:GridView>
                                <asp:Literal runat="server" ID="Literal2" Text="</td></tr>" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView> 
```

这是我的 aspx.cs 文件

```
 protected void grdSubClaimOuter_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (e.Row.Cells[1].Text.ToString() != "&nbsp;")
        {
            Literal ltrChild = (Literal)e.Row.FindControl("ltrChild");
            System.Web.UI.WebControls.Image img = (System.Web.UI.WebControls.Image)e.Row.Cells[0].FindControl("img1");

            ltrChild.Text = ltrChild.Text.Replace("trChildGrid", "trChildGrid" + e.Row.RowIndex.ToString());
            string strChildGrid = "trChildGrid" + e.Row.RowIndex.ToString();
            e.Row.Cells[0].Attributes.Add("OnClick", "OpenTable('" + strChildGrid + "','" + img.ClientID + "')");
            e.Row.Cells[0].RowSpan = 1;
            System.Web.UI.WebControls.GridView gvChild = (System.Web.UI.WebControls.GridView)e.Row.FindControl("grdSubClaim");
            PolicyProcessor.DAL.Claim.ClaimSubClaim objDALClaimSubClaim = new PolicyProcessor.DAL.Claim.ClaimSubClaim();
            PolicyProcessor.BOL.Claim.ClaimSubClaim objInfoClaimSubClaim = new PolicyProcessor.BOL.Claim.ClaimSubClaim();
            HiddenField hdnClaimNo = (HiddenField)e.Row.FindControl("hdnClaimNo");

            if (hdnClaimNo.Value != "")
            {
                objInfoClaimSubClaim.ClaimNo = hdnClaimNo.Value;
            }
            else
            {
                objInfoClaimSubClaim.ClaimNo = "0";
            }

            DataSet dsChild;
            dsChild = objDALClaimSubClaim.ResultSet(objInfoClaimSubClaim, "SelectInnerGrid");
            if (dsChild.Tables[0].Rows.Count > 0)
            {

                Button btn = (Button)gvChild.FindControl("btnSalvage");

           //btn is null how to get text value in btn

                btn.ForeColor = System.Drawing.Color.Red;

                gvChild.DataSource = dsChild;
                gvChild.DataBind();

            }
            else
            {
                Helper.EmptyGrid(gvChild, dsChild.Tables[0]);
            }

        }

    }
} 
```

如果有人知道，请帮我解决这个问题。提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T07:20:51.773

首先获取对子 GridView 的引用，然后使用 FindControl 获取其中的 Button：

```
foreach (GridViewRow row in grdSubClaimOuter.Rows) 
{
if (row.RowType == DataControlRowType.DataRow) 
{
    GridView gvChild = (GridView) row.FindControl("grdSubClaim");
    // Then do the same method for Button control column 
    if (gvChild != null)
    {
        foreach (GridViewRow row in gvChild .Rows) 
        {
            if (row.RowType == DataControlRowType.DataRow) 
            {
                Button btn = (Button ) row.FindControl("buttonID");
                if (btn != null )
                {
                    // do your work
                }
            }
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:45:27.030

如果您想要父网格的数据绑定事件中的值，请使用任何一种方式

1）您还可以使用您的 dsChild（您的数据集）并获取您为按钮绑定的字段值。

2) 绑定子网格后从 gvChild 获取按钮的值。

无需循环进入父子网格。

# java - 使用简单 xml 序列化程序 (v2.6.6) 的文档没有根元素异常

> ID：12119963
> 
> 赞同：8
> 
> 时间：2012-08-25T07:08:43.133
> 
> 标签：java, android, xml, xml-serialization

我正在使用简单的 xml 库[http://simple.sourceforge.net/](http://simple.sourceforge.net/)来反序列化来自套接字输入流的对象。虽然在简单的java应用程序中同样的情况工作正常，但在android中我得到了，之后

```
MyObject obj = serializer.read(MyObject.class,socket.getInputStream()) 
```

> org.simpleframework.xml.stream.NodeException：文档没有根元素

这是为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-15T11:46:13.253

你还没有收到数据。尝试设置日志并检查数据是否存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-30T10:32:50.480

由于我在这里的最后一篇文章被删除了，我的 xml 再次被删除：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<masterclass>
    <question className="Cosmos">
        <body>What year was the first step on the Moon?</body>
        <answer valid="0">1972</answer>
        <answer valid="0">1971</answer>
        <answer valid="0">1970</answer>
        <answer valid="1">1969</answer>
    </question>
    <question className="Cosmos">
        <body>Who were the first men to walk on the Moon?</body>
        <answer valid="1">Neil Armstrong</answer>
        <answer valid="0">Michael Collins</answer>
        <answer valid="0">Eugene Cernan</answer>
        <answer valid="1">Edwin Aldrin</answer>
    </question>
    <question className="History">
        <body>When did Christening of Poland took place?</body>
        <answer valid="0">1025</answer>
        <answer valid="1">966</answer>
        <answer valid="0">866</answer>
        <answer valid="0">916</answer>
    </question>
    <question className="Math">
        <body>Stone weighs 2kg and half stone. How much stone weighs?</body>
        <answer valid="0">2.5kg</answer>
        <answer valid="0">3kg</answer>
        <answer valid="1">4kg</answer>
        <answer valid="0">5kg</answer>
    </question>
</masterclass> 
```

以及解组 xml 文件的代码

```
// download successed
try {
    Serializer xmlSer = new Persister();
    InputStream fis = new FileInputStream(xmlFilePath);
    BufferedReader in = new BufferedReader(new InputStreamReader(fis, "UTF-8"));
    MasterClass mc = xmlSer.read(MasterClass.class, in);
    MasterClass mc = xmlSer.read(MasterClass.class, str);
    Toast.makeText(context.get(), ""+mc.getQuestionList().size(),
        Toast.LENGTH_LONG).show();
} catch (Exception ee) {
    Log.e("MasterClass", "xml serialize problem", ee);
} 
```

错误在这一行：

```
MasterClass mc = xmlSer.read(MasterClass.class, in); 
```

当改为这样：

```
String str = "", s;
while((s = in.readLine()) != null) {
    str += s;
    //Log.d("MasterClass", str);
}
MasterClass mc = xmlSer.read(MasterClass.class, str); 
```

它开始工作了。不知道为什么……但根据我的研究，这可能与文件在设备上的保存方式有关：

```
OutputStream fos = new FileOutputStream(outputFile);
BufferedWriter br = new BufferedWriter(new OutputStreamWriter(fos, "UTF-8"));
br.write(content);
br.flush();
br.close(); 
```

和 xml 文件编码 - 在记事本 ++ 中设置为 UTF-8 而没有 BOM。

致模组：不知道如何删除所以请在下面删除我的问题，tks :)

# python - 是否有模型类型可以在 django 中存储标签？

> ID：12119964
> 
> 赞同：5
> 
> 时间：2012-08-25T07:08:58.650
> 
> 标签：python, django, django-models

我想用Django写一篇博客，在一篇博文中会有一些`tags`，但我不知道哪种模型类型可以实现这个功能。

是否有模型类型可以在 django 中存储标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-24T20:23:54.370

三年过去了，在 Django 1.8 中，如果您使用 Postgres，则有一个可以存储标签的字段类型：[`ArrayField`](https://docs.djangoproject.com/en/1.8/ref/contrib/postgres/fields/#arrayfield).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T08:07:40.943

您可以使用[django-taggit](http://pypi.python.org/pypi/django-taggit) ( [docs](http://django-taggit.readthedocs.org/en/latest/index.html) ) 将标签添加到您的模型（例如，您的`BlogPost`模型）。每个模型都有一个存储这些标签的字段，并且在您的 Django 管理员中还将有一个附加部分用于管理这些标签。

# android - 来自一个文本视图的数据在相对布局中被另一个文本视图覆盖

> ID：12119968
> 
> 赞同：0
> 
> 时间：2012-08-25T07:10:06.040
> 
> 标签：android

我在我的 xml 文件中使用了相对布局和滚动视图。当我单击“获取含义”按钮时，我得到命令的描述，但数据被重叠。请提出一些解决方案。我的布局 xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/img7"
     >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="490dip"
    android:orientation="vertical" >
     <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text=""
        android:background="@drawable/house1" />
     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentLeft="true"
        android:text="Enter Unix Command"
        android:textColor="#FF0000" 
        android:textSize="25sp"
        />

    <AutoCompleteTextView
        android:id="@+id/autoCompleteTextView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="14dp"
        android:ems="10"
        android:hint="Start Typing Here........"
        android:textColor="#FF0000" >

        <requestFocus />
    </AutoCompleteTextView>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/autoCompleteTextView1"
        android:text="Get Meaning"

        android:drawableLeft="@drawable/searchpic1"
        android:textColor="#FF0000"
        android:textSize="20sp" />
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/button2"

        android:src="@drawable/book1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:text=""
        android:textColor="#FF0000"
         />
    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Cympac Software Solutions Pvt Ltd"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#228b22"
        android:background="#FFFFFF" 
        android:textStyle="bold"
        android:textSize="16sp"
        android:drawableLeft="@drawable/smallicon"/>

</RelativeLayout>

</ScrollView> 
```

在模拟器上类似 ![在此处输入图像描述](../Images/6a50ef060b874137cf1c666e6bcd48ef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:27:26.100

正如*Orabig*所说，只`textview2`放在 ScrollView 中，它应该在`textview3`. 并`RelativeLayout`用作父布局。遵循其他两个答案中的代码。我希望它会起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:16:54.587

像这样添加`layout_above`用于 textview 更改代码的属性

```
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1"
    android:layout_above="@+id/textView3"
    android:text=""
    android:textColor="#FF0000"
/> 
```

然后为该文本视图添加可滚动属性

```
yourTextView.setMovementMethod(new ScrollingMovementMethod()); 
```

如果文本需要的空间多于可用空间，它将自动滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T08:17:52.257

只需将您的 TextView 放入 ScrollView

```
 <ScrollView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:layout_below="@+id/imageView1"
   android:layout_above="@+id/textView3"
   >
   <TextView
      android:id="@+id/textView2"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:text=""
      android:textColor="#FF0000"
   />
</ScrollLayout> 
```

# wso2 - how to install Stratos 1.5.2

> ID：12119969
> 
> 赞同：0
> 
> 时间：2012-08-25T07:10:08.557
> 
> 标签：wso2, openstack, wso2stratos

this dated install guide, [http://wso2.org/project/stratos/1.0.0/WSO2StratosInstallationGuide.html](http://wso2.org/project/stratos/1.0.0/WSO2StratosInstallationGuide.html), assumes UEC, but UEC is depreciated ([https://help.ubuntu.com/12.04/serverguide/uec.html](https://help.ubuntu.com/12.04/serverguide/uec.html)).

1.  Where is the most recent install manule for Stratos?
2.  Does Stratos need Eucalyptus or does it support OpenStack?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:52:44.940

您不需要在 ubuntu 上安装它。我在 CentOS 6.0 上安装了它。诀窍是确保您安装了依赖项，这在 centos 上很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:01:04.517

WSO2 Stratos 1.6.0 现在可以在[http://wso2.com/cloud/stratos下载](http://wso2.com/cloud/stratos)

这是预先配置的本地设置。您应该可以毫无问题地将其安装在本地计算机上。

如果您使用的是 mac osx，请按照[这篇文章](http://sencs.blogspot.com/2014/10/how-to-build-apache-stratos-from-source.html)进行操作。

# java - Do unused variables and Methods increase App size?

> ID：12119970
> 
> 赞同：1
> 
> 时间：2012-08-25T07:10:17.863
> 
> 标签：java, android, optimization, compiler-optimization

In my Android application that I'm currently developing, I have variables and methods for debugging purposes. If I don't use any of the variables or methods in the application, will they increase the application's size, or will the compiler notice that this code isn't used and therefore discard it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:12:57.260

I'd better say not compiler, but obfuscation. Yes, it'll remove unused variables and other stuff. Check out [the article about proguard](http://developer.android.com/tools/help/proguard.html), it contains lot of details.

Also, running at least Lint and fix all it's warnings before release will be also useful (haven't made any exact comparisons and tests regarding this, but not sure if obfuscation takes care e.g. about unused resource/redrawing etc. which also affects size and, more important, performance of the app).

# c# - Including Google Analytic tracking code dynamically at bottom of page after tag

> ID：12119977
> 
> 赞同：2
> 
> 时间：2012-08-25T07:11:11.437
> 
> 标签：c#, javascript, google-analytics

I have a web application in which I want to track two different views of the same page from `google analytic`.

From code behind I am managing the two different views..but didn't find the way to manage the below script from code behind.

```
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("XX-XXXXXX-XX");
        pageTracker._setDomainName(".DOMAIN.com");
        pageTracker._trackPageview();
    } catch (err) { }
</script> 
```

So how can I change this script dynamically from code behind...?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:02:57.400

一个技巧是在 aspx 部分放置两个隐藏字段

```
<asp:HiddenField ID="TrackerCode" runat="server" ClientIDMode="Static">
</asp:HiddenField>
<asp:HiddenField ID="DomainName" runat="server" ClientIDMode="Static">
</asp:HiddenField> 
```

然后在页面加载时分配它们

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        TrackerCode.Text = "XX-XXXXXX-XX";
        DomainName.Text = ".DOMAIN.com";
    }
} 
```

最后将您的脚本放在页面底部。（在我们创建的标签之后）

```
<script type="text/javascript">
    try {
        var tcode = document.getElementById("TrackerCode").value;
        var domain = document.getElementById("DomainName").value;
        var pageTracker = _gat._getTracker( tcode );
        pageTracker._setDomainName( domain );
        pageTracker._trackPageview();
    } catch (err) { }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:10:14.933

声明一个函数并在该函数中定义所有逻辑。

并在 DOM 准备好或在 window.onload 时调用该函数。

```
window.onload=function(){
              //your function called it here or right your code here
} 
```

希望它会起作用

# css - CSS - Left align the last row of images in a centered div

> ID：12119978
> 
> 赞同：3
> 
> 时间：2012-08-25T07:11:23.950
> 
> 标签：css, html, alignment

I have multiple rows of images that I am centering on a page. The code below does this and if the user resizes their browser, the images stay centered. I need the last line of images to be left aligned though. How can I do this?

```
<DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<style> 
#outer
{ 
width: 100%; 
text-align: center; 
}
#inner
{ 
display: inline-block;
}
</style>
</head>
<body>
<br /><br />
<div id="outer">
<div id="inner">
<img id="0" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="1" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="2" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="3" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="4" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="5" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="6" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="7" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="8" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="9" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="10" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="11" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="12" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="13" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="14" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="15" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="16" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="17" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="18" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
<img id="19" src="http://cdn.sstatic.net/stackexchange/img/slider/judaism.stackexchange.com.png" style="height:100px;width:100px;" /> 
</div>
</div>
</body>
</html> 
```

Thanks,

~ M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:31:17.517

你可以试试

```
#12{
  float: left;
} 
```

将物品保留在左侧。

# css - twitter-bootstrap max width of input field

> ID：12119981
> 
> 赞同：4
> 
> 时间：2012-08-25T07:12:03.567
> 
> 标签：css, twitter-bootstrap, width

I got a following set up using the lastest twitter bootstrap framework:

[http://jsfiddle.net/hfexR/2/](http://jsfiddle.net/hfexR/2/)

I now want that the input field takes the maximum width when there is no button next to.

How can I do this with pure css or with twitter-bootstrap itself?

Something like inline-block should go, I just don't get it at the moment...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T20:22:10.117

[您可以像在这个小提琴](http://jsfiddle.net/JMKuK/)中一样使用 te 类输入块级别

```
<div class="container">
  <div class="span4 well">
    <form class="form-search">
      <input type="text" class="input-block-level search-query">
    </form>
    <form class="form-search">
      <input type="text" class="input-medium search-query">
      <button type="submit" class="btn">Cancel</button>
    </form>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:26:29.043

编辑：自引导 v3 以来，类已经发展，因此使用 col-xx-X 类来获得下面解释的结果（可能需要进一步更改）

* * *

[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/hfexR/3/)

您可以使用 a`.row-fluid`和 use`.spanX`使输入填充其容器：

```
<form class="form-search">
  <div class="row-fluid">
      <input type="text" class="input-medium search-query span12">
  </div>
</form>
<form class="form-search">
  <div class="row-fluid">
      <input type="text" class="input-medium search-query span8">
      <button type="submit" class="btn span4">Cancel</button>
  </div>
</form> 
```

按钮/输入组合似乎需要一些修复：

```
/* May not be the best way, not sure if BS has a better solution */
/* Fix for combining input and button spans in a row */
.row-fluid > input + button[class*="span"] {
    float: none;           /* Remove the */
    display: inline-block; /* floating   */
    margin-left: 0;        /* Stick it to the left */
} 
```

最后一件事，你不应该结合`.spanX`，`.well`因为`padding`and 边界和其他东西，这里是[一个为什么 (jsfiddle) 的例子](http://jsfiddle.net/Sherbrow/6CVns/embedded/result/)。

# html - CSS float property shows no height?

> ID：12119986
> 
> 赞同：8
> 
> 时间：2012-08-25T07:12:29.833
> 
> 标签：html, css

I'm fairly new to CSS, so, this might look silly:

In CSS, i use the property to `float:left` to position a content left to the neighbouring element, now, i have a container for all the elements that have the float property. how do i make the parenting element adjust it's height according to it's content?

the HTML:

```
<div id="page">
<div id="side">
    <p>my sidebar</p>
</div>
<div id="content">
    <p>my content</p>
    <p>my content1</p>
    <p>my content2</p>
    <p>my content3</p>
</div> 
```

​</p>

the CSS

```
/* the "border:3px solid #000;" are used to make the div border visble*/
#page{
position:relative;
width:400px;
background-color: #F4F0EC;
border:3px solid #000;
}
#side{

border:3px solid #000;
float:left;
}
#content{
float:left;
 border:3px solid #000;
} 
```

with the above, the `<div id="page">` look like it has a height of 0px.... how do i make it warp the content ??

since i'm new to CSS, please explain what am i doing wrong, thanks

Fiddle:[http://jsfiddle.net/AuSmP/](http://jsfiddle.net/AuSmP/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T07:20:16.217

您可以`overflow:hidden`为您添加，`div #page`这将允许它调整大小以适应其内容。

**[请参阅工作演示。](http://jsfiddle.net/AuSmP/1/)**

**[了解有关溢出属性的更多信息。](http://css-tricks.com/the-css-overflow-property/)**

或者，您也可以添加`<div class="clear"></div>`then`CSS` `.clear{clear:both;}`来实现相同的效果。

**[见演示。](http://jsfiddle.net/AuSmP/5/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T07:26:22.180

这是你所期望的吗？[http://jsfiddle.net/AuSmP/4/](http://jsfiddle.net/AuSmP/4/) 只需将 float:left 样式添加到 #page 即可解决问题，或者您也可以在底部使用 clear:both

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T07:24:01.643

将位置从相对更改为绝对也可以帮助您
查看此[**JSFiddle 演示**](http://jsfiddle.net/AuSmP/3/)

# python - Django：在调用 super() 之前保存一个 FileField

> ID：12119988
> 
> 赞同：1
> 
> 时间：2012-08-25T07:13:01.313
> 
> 标签：python, django, filefield

我需要在调用 super() 方法*之前保存上传的文件。*它应该被保存，因为我使用一些外部工具将文件转换为所需的内部格式。以下代码在上传文件“123”时产生错误：

```
OSError: [Errno 36] File name too long: '/var/www/prj/venv/converted/usermedia/-1/uploads/123_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_1_...' 
```

似乎，它试图`super().save()`在无限循环中以相同的名称将其保存两次。此外，它还会创建所有这些文件。

```
def save(self, **kwargs):
    uid = kwargs.pop('uid', -1)
    for field in self._meta.fields:
        if hasattr(field, 'upload_to'):
            field.upload_to = '%s/uploads' % uid

    if self.translation_file:
        self.translation_file.save(self.translation_file.name, self.translation_file)

    #self.mimetype = self.guess_mimetype()
    #self.handle_file(self.translation_file.path)

    super(Resource, self).save(**kwargs) 
```

**编辑：** 这是我想绕过的不优雅的方式（它将双重调用`save()`方法）：

```
def save(self, *args, **kwargs):
    uid = kwargs.pop('uid', -1)
    for field in self._meta.fields:
        if hasattr(field, 'upload_to'):
            field.upload_to = '%s/uploads' % uid

    super(Resource, self).save(*args, **kwargs)

    if self.__orig_translation_file != self.translation_file:
        self.update_mimetype()
        super(Resource, self).save(*args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T21:11:33.037

在你的第一个例子中你有一个无限循环，没错。调用`self.translation_file.save(self.translation_file.name, self.translation_file)`会将上传的文件保存到磁盘并再次调用 Resources 类的 save 方法，因为方法 save 参数默认为 true （看看这里[https://docs.djangoproject.com/en/dev/ref/files/file/# additional-methods-on-files-attached-to-objects](https://docs.djangoproject.com/en/dev/ref/files/file/#additional-methods-on-files-attached-to-objects)）以及您的自定义 FileField 无论如何。

像这样调用它（只需添加 save=False）更有可能工作：

```
self.translation_file.save(self.translation_file.name, self.translation_file, save = False) 
```

我希望这指向正确的方向。

# linux - 即使在linux中设置ACL后文件访问权限也被拒绝

> ID：12119992
> 
> 赞同：1
> 
> 时间：2012-08-25T07:13:20.343
> 
> 标签：linux, shell, permissions, permission-denied

我为 svn 文件夹设置了 ACL，如下所示

```
# file: www
# owner: aks
# group: users
user::rwx
group::rwx    
group:users:rwx
mask::r-x
other::r-x
default:user::rwx
default:group::rwx
default:other::r-x 
```

但尽管如此，当另一个用户执行 svn up 时，他得到

```
svn: Can't open file 'www/.svn/lock': Permission denied 
```

我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:00:58.360

锁定文件的使用需要对所述锁定文件的*写访问权*。

假设您也对锁定文件使用相同的 ACL（您已经列出了父文件夹的 ACL），您的 ACL 不允许除所有者之外的任何用户写入该文件。

来自[`acl(5)`](http://linux.die.net/man/5/acl)：

> ACL_MASK 条目表示 ACL_USER、ACL_GROUP_OBJ 或 ACL_GROUP 类型的条目可以授予的最大访问权限。

`users`从本质上讲，ACL 掩码会影响所有命名用户条目和所有组条目 - 在您的情况下，它会从我假设包含运行的用户的组中删除写访问权限`svn`。

# jsf-2 - primefaces inplace query

> ID：12119993
> 
> 赞同：0
> 
> 时间：2012-08-25T07:13:54.633
> 
> 标签：jsf-2, primefaces

I am using the p:inplace inside a dialog, when i click the dialog for the first time it displays the label (Detail) and on i clicking the label it displays the 2 inputText but if i open the dialog again it displays the 2 inputText without the label (step), how do i ensure that the label is displayed first.

```
<p:dialog widgetVar="Dialog" header="Update Patient Details" showEffect="clip" hideEffect="clip" modal="true" >  
    <h:panelGrid id="Details" columns="2">
        <p:inplace id="selectableInplace" label="Detail" effectSpeed="fast" event="click">  
        <h:panelGrid id="innerDetails1" columns="2">
            <h:outputLabel value="Name:" /> 
            <p:inputText id="someName" />

            <h:outputLabel value="Mobile:" /> 
            <p:inputText id="someMobile" />
        </h:panelGrid>
    </p:inplace>  
</h:panelGrid>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:23:08.333

该`p:inplace`元素从未得到任何关闭指令。如果您希望在`p:inplace`打开对话框时关闭元素，您可以在关闭或显示`hide()`时调用该函数。`p:dialog`

我建议在关闭对话框时这样做。只需将 a 添加`widgetVar`到, 并在中`p:inplace`调用它的`hide()`函数。`onHide``p:dialog`

工作示例：

```
<p:commandButton onclick="Dialog.show()" value="Show" />
<p:dialog widgetVar="Dialog" header="Update Patient Details"
    showEffect="clip" hideEffect="clip" modal="true"
    onHide="inplace.hide();">
    <h:panelGrid id="Details" columns="2">
        <p:inplace id="selectableInplace" label="Detail" effectSpeed="fast"
            event="click" widgetVar="inplace">
            <h:panelGrid id="innerDetails1" columns="2">
                <h:outputLabel value="Name:" />
                <p:inputText id="someName" />

                <h:outputLabel value="Mobile:" />
                <p:inputText id="someMobile" />
            </h:panelGrid>
        </p:inplace>
    </h:panelGrid>
</p:dialog> 
```

# java - SWT modal dialog not modal

> ID：12119997
> 
> 赞同：3
> 
> 时间：2012-08-25T07:15:11.897
> 
> 标签：java, dialog, swt, modal-dialog

According to another discussion here, I try to open a modal view like so:

```
public void widgetSelected(SelectionEvent e) {

    final Shell dialogShell = new Shell(ApplicationRunner.getApp()
            .getShell().getDisplay(), SWT.PRIMARY_MODAL | SWT.SHEET);

    dialogShell.setLayout(new FillLayout());

    Button closeButton = new Button(dialogShell, SWT.PUSH);
    closeButton.setText("Close");
    closeButton.addSelectionListener(new SelectionListener() {

        public void widgetSelected(SelectionEvent e) {
            dialogShell.dispose();
        }

        @Override
        public void widgetDefaultSelected(SelectionEvent arg0) {
            // TODO Auto-generated method stub

        }
    });
    dialogShell.setDefaultButton(closeButton);
    dialogShell.addDisposeListener(new DisposeListener() {

        public void widgetDisposed(DisposeEvent e) {
            System.out.println("Modal dialog closed");
        }
    });
    dialogShell.pack();
    dialogShell.open();
} 
```

It opens the desired window, but it's not modal. I can access the main shell and open another instance of the same modal dialog. Can anybody point me in the right direction?

Thanx, Marcus

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T08:02:46.107

我强烈建议通过扩展`org.eclipse.jface.dialogs.Dialog`而不是使用按钮创建自己的外壳来创建自己的 JFace 对话框。 [这](http://books.gigatux.nl/mirror/eclipseplugins/032142672X/ch11lev1sec1.html)是一个非常好的教程。

如果您使用主外壳作为参数调用构造函数，则可以在构造函数中调用`setShellStyle(SWT.CLOSE | SWT.TITLE | SWT.BORDER | SWT.OK | SWT.APPLICATION_MODAL);`这将使该对话框完全模态化。像这样：

```
public CheckboxDialog(Shell parentShell) {
    super(parentShell);
    setShellStyle(SWT.CLOSE | SWT.TITLE | SWT.BORDER | SWT.OK | SWT.APPLICATION_MODAL);
    setBlockOnOpen(true);
} 
```

`parentShell`GUI 的主外壳在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T13:58:44.330

我今天在创建一个单独的类中定义的弹出窗口时遇到了这个问题。

我`popup_shell = new Shell(Display.getCurrent(), SWT.PRIMARY_MODAL | SWT.DIALOG_TRIM)`在新窗口的构造函数中使用了类似的东西。

相反，如果我从父窗口传入 shell，如下所示：

```
public PopupWindow(Shell main_shell)
{
    popup_shell = new Shell(main_shell, SWT.PRIMARY_MODAL | SWT.DIALOG_TRIM);
} 
```

然后它可以正常工作。

我的猜测是，两者都会`ApplicationRunner.getApp().getShell().getDisplay()`导致`Display.getCurrent()`一个全新的外壳，未连接到父窗口，因此 primary_modal 无效。