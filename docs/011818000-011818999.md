# StackOverflow 问答 11818000-11818999

# java - WindowBuilder 添加了很多不需要的空标签

> ID：11818005
> 
> 赞同：0
> 
> 时间：2012-08-05T16:17:48.047
> 
> 标签：java, eclipse, swt, windowbuilder

我正在使用 Google 的 WindowBuilder 在 Eclipse 中为桌面 Java/SWT 应用程序创建 UI。我正在使用 Mac OS X。

我有这个简单的类（为清楚起见删除了导入）：

```
public class CustomersTab extends Composite {
    CustomersList mCustomersList;
    CustomerBadge mCustomerBadge;
    private final Table mtable;

    public CustomersTab(final Composite parent, final int style) {
        super(parent, style);
        setLayout(new GridLayout(3, false));

        final Composite leftPanel = new Composite(this, SWT.NONE);
        leftPanel.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
        leftPanel.setLayout(new GridLayout(1, false));

        final Label lblRerchercher = new Label(leftPanel, SWT.NONE);
        lblRerchercher.setFont(SWTResourceManager.getFont("Lucida Grande", 13, SWT.BOLD | SWT.ITALIC));
        lblRerchercher.setText("Clients");
        mCustomersList = new CustomersList(leftPanel, SWT.NONE);
        mCustomersList.setLayoutData(new GridData(SWT.LEFT, SWT.TOP, true, true, 1, 1));

        final Label label = new Label(this, SWT.SEPARATOR | SWT.VERTICAL);
        label.setLayoutData(new GridData(SWT.LEFT, SWT.FILL, false, true, 1, 1));

        final Composite rightPanel = new Composite(this, SWT.NONE);
        rightPanel.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, false, 1, 1));
        rightPanel.setLayout(new GridLayout(1, false));

        mCustomerBadge = new CustomerBadge(rightPanel, SWT.NONE);
        mCustomerBadge.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false, 1, 1));

        final Label label_2 = new Label(rightPanel, SWT.NONE);
        label_2.setText("Détails");
        label_2.setFont(SWTResourceManager.getFont("Lucida Grande", 13, SWT.BOLD | SWT.ITALIC));

        mtable = new Table(rightPanel, SWT.BORDER | SWT.FULL_SELECTION);
        mtable.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
        mtable.setHeaderVisible(true);
        mtable.setLinesVisible(true);

        final Label label_1 = new Label(this, SWT.SEPARATOR | SWT.HORIZONTAL);
        label_1.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));
        new Label(this, SWT.NONE);

        final Label label_3 = new Label(this, SWT.SEPARATOR | SWT.HORIZONTAL);
        label_3.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false, 1, 1));

        final Button btnNewButton = new Button(this, SWT.NONE);
        btnNewButton.setImage(SWTResourceManager.getImage(CustomersTab.class, "/img/user_add.png"));
        btnNewButton.setLayoutData(new GridData(SWT.CENTER, SWT.CENTER, false, false, 1, 1));
        btnNewButton.setText("Nouveau client");
        new Label(this, SWT.NONE);

        Composite composite = new Composite(this, SWT.NONE);
        composite.setLayout(new GridLayout(1, false));

        Button btnModifierCeClient = new Button(composite, SWT.NONE);
        btnModifierCeClient.setImage(SWTResourceManager.getImage(CustomersTab.class, "/img/user_edit.png"));
        btnModifierCeClient.setText("Modifier ce client");
    }
} 
```

当我使用 WindowBuilder 构建 UI 时，有时会添加很多未使用`Label`的 s，如下所示：

```
public class CustomersTab extends Composite {
    CustomersList mCustomersList;
    CustomerBadge mCustomerBadge;
    private final Table mtable;

    public CustomersTab(final Composite parent, final int style) {
        super(parent, style);
        setLayout(new GridLayout(3, false));

        final Composite leftPanel = new Composite(this, SWT.NONE);
        leftPanel.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
        leftPanel.setLayout(new GridLayout(1, false));

        final Label lblRerchercher = new Label(leftPanel, SWT.NONE);
        lblRerchercher.setFont(SWTResourceManager.getFont("Lucida Grande", 13, SWT.BOLD | SWT.ITALIC));
        lblRerchercher.setText("Clients");
        mCustomersList = new CustomersList(leftPanel, SWT.NONE);
        mCustomersList.setLayoutData(new GridData(SWT.LEFT, SWT.TOP, true, true, 1, 1));

        final Label label = new Label(this, SWT.SEPARATOR | SWT.VERTICAL);
        label.setLayoutData(new GridData(SWT.LEFT, SWT.FILL, false, true, 1, 1));

        final Composite rightPanel = new Composite(this, SWT.NONE);
        rightPanel.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, false, 1, 1));
        rightPanel.setLayout(new GridLayout(1, false));

        mCustomerBadge = new CustomerBadge(rightPanel, SWT.NONE);
        mCustomerBadge.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false, 1, 1));
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);
        new Label(mCustomerBadge, SWT.NONE);

        final Label label_2 = new Label(rightPanel, SWT.NONE);
        label_2.setText("Détails");
        label_2.setFont(SWTResourceManager.getFont("Lucida Grande", 13, SWT.BOLD | SWT.ITALIC));

        mtable = new Table(rightPanel, SWT.BORDER | SWT.FULL_SELECTION);
        mtable.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
        mtable.setHeaderVisible(true);
        mtable.setLinesVisible(true);

        final Label label_1 = new Label(this, SWT.SEPARATOR | SWT.HORIZONTAL);
        label_1.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));
        new Label(this, SWT.NONE);

        final Label label_3 = new Label(this, SWT.SEPARATOR | SWT.HORIZONTAL);
        label_3.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false, 1, 1));

        final Button btnNewButton = new Button(this, SWT.NONE);
        btnNewButton.setImage(SWTResourceManager.getImage(CustomersTab.class, "/img/user_add.png"));
        btnNewButton.setLayoutData(new GridData(SWT.CENTER, SWT.CENTER, false, false, 1, 1));
        btnNewButton.setText("Nouveau client");
        new Label(this, SWT.NONE);

        Composite composite = new Composite(this, SWT.NONE);
        composite.setLayout(new GridLayout(1, false));

        Button btnModifierCeClient = new Button(composite, SWT.NONE);
        btnModifierCeClient.setImage(SWTResourceManager.getImage(CustomersTab.class, "/img/user_edit.png"));
        btnModifierCeClient.setText("Modifier ce client");
    }
} 
```

我不知道为什么，我想知道如何解决这个问题，因为我必须切换回代码视图并删除很多标签，这让我浪费时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:53:20.867

好吧，Windowbuilder 用空的占位符填充布局。

例如：

您有 3 列并创建了 6 个控件，这意味着前两行填充了您的控件。如果您现在使用 WindowBuilder 添加一个控件，而不是在第 3 行第一列（这将是布局中的下一个“空格”），但例如在第 5 行第 2 列中，Windowbuilder 必须为完整的第 3 行和第 3 列创建这些虚拟标签第 4 行和第 5 行的第一列，因此它将添加 7 个这些虚拟标签。知道了？

# wordpress - LightBox2 产生错误

> ID：11818007
> 
> 赞同：0
> 
> 时间：2012-08-05T16:17:54.330
> 
> 标签：wordpress, lightbox2

网站：[http ://www.onlinetestspace.com/project45/before-after](http://www.onlinetestspace.com/project45/before-after)

我已按照灯箱说明[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)和 chrome 给了我错误：

> 未捕获的类型错误：对象 # 没有方法“lightBox”。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:30:06.977

我只是调查这些事情，我猜你正在使用旧版本的 JQuery 文件（jQuery 1.2.3）。使用最新版本的[JQuery](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)文件，这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:37:39.250

我收到此错误的原因仅仅是因为 2 个冲突的文件。

# algorithm - 多次访问的 TSP

> ID：11818015
> 
> 赞同：0
> 
> 时间：2012-08-05T16:18:30.687
> 
> 标签：algorithm, graph-theory

您能否为以下问题提出可能的方法：找到一条通过图顶点的路径，以便两个顶点 i 出现之间的距离（边权重之和）不超过 Di。它显然是无限的，所以我想为这条路径有一个生成器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:11:13.717

当您的图表满足三角不等式时，christofides 算法保证您在最佳值的 2/3 以内。

# python - python 正则表达式将整行与特定的正则表达式模式匹配

> ID：11818023
> 
> 赞同：3
> 
> 时间：2012-08-05T16:19:43.397
> 
> 标签：python, regex

我有一个包含正则表达式模式列表和包含'\ n's'的字符串的文件，即一个带有单独行的字符串......我需要一个通用正则表达式，它可以将整行与正则表达式文件中的模式匹配，这样我就可以做类似的事情

re.compile(r'generic_regex%s') %regex_pattern from file 它会自动匹配整行，就像 grep 一样。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T16:32:20.283

就像是：

```
>>> re.findall(r"(^.*?%s.*?$)" %expression, text, re.MULTILINE) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:43:05.693

调整任何边界等...

```
import re
import mmap

def find_re(fname, rx): # rx is a compiled re object
    with open(fname) as fin:
        mm = mmap.mmap(fin.fileno(), 0, access=mmap.ACCESS_READ)
        return rx.findall(mm) 
```

对于顺序访问应该很快...如果需要遍历多行，请重新处理正则表达式...

# android - 在手机锁定时开始外部活动

> ID：11818026
> 
> 赞同：6
> 
> 时间：2012-08-05T16:20:37.387
> 
> 标签：android, lockscreen, android-windowmanager

我希望能够在设备被密码锁定时启动不属于我的应用程序的活动。如果可能的话，我怎么能做到这一点？

**注意：**我很清楚我的活动`getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);`范围内`onCreate`。但是，这不起作用，因为我没有开始我自己的活动，而是我的应用程序之外的第 3 方活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:27:34.313

覆盖函数

```
public void onAttachedToWindow() {

    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
} 
```

这将使您的活动在解锁后可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:13:19.133

仅当实际开发人员通过覆盖`onAttachedToWindow()`您尝试从应用程序中打开的活动中的方法来编写代码时，这才有可能。

如果不是，那么，很抱歉，但你没有选择去做你想做的事情（就最近的 API 而言）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:14:28.067

如果您尝试通过锁定屏幕启动任何第三方应用程序，它将不起作用。正如您自己观察到的，您需要设置窗口标志以确保活动在锁定屏幕上启动，无法确保来自其他第三方应用程序的活动也设置相同的标志。

如果您正在构建一个功能包，其中每个功能只不过是一个不同的应用程序，那么您必须确保这些功能的所有入口点都设置了这个窗口标志。最好的办法是声明一个 BaseActivity，它在创建时设置适当的标志，并让所有功能开发团队将其用作入口点的基类。

# file - 为什么我的 .bat 在冗长的命令之后总是丢失它的变量

> ID：11818032
> 
> 赞同：1
> 
> 时间：2012-08-05T16:21:22.760
> 
> 标签：file, variables, batch-file

这是我遭受逆境的 .bat。让我们命名它`b.bat`。

```
set loopnum=%1
set url=%2
del "%TEMP%\selectortemp.txt"
del "%TEMP%\selectortemp2.txt"
for /r %loopnum% %%i in (\*.*) do echo %%~ni%%~xi>>"%TEMP%\selectortemp.txt"

echo %loopnum%
pause

set count=0
for /f "usebackq delims=" %%a in (%TEMP%\selectortemp.txt) do set /a count+=1

set /a count2=1
:looping

for /f "tokens=1,2 delims==" %%a in (%config%) do (if %%a==url set url=%%b)

set /p firstline=<"%TEMP%\selectortemp.txt"

del "%url%\%firstline%"

echo "%firstline%"
pause

for /f "skip=1 tokens=*" %%A in (%TEMP%\selectortemp.txt) do echo %%A>>"%TEMP%\selectortemp2.txt"
del "%TEMP%\selectortemp.txt"
rename "%TEMP%\selectortemp2.txt" "selectortemp.txt"

if %count2%==%count% goto endlooping
set /a count2+=1
goto looping
:endlooping 
```

起初，我这样称呼它：

```
for /l %%i in (0,1,3) do (call b.bat %%i C:\testing) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:45:14.867

你的问题不是很具体。我假设您的意思是您的变量在 for 循环中丢失了它们的内容。

你需要写！a！代替％。但是你不能用 for 循环中使用的变量来做到这一点。!!a 是不可能的。

请务必启用延迟扩展。

以下是有关 enabledelayedexpansion 的一些信息：[SS64](http://ss64.com/nt/delayedexpansion.html)

# javascript - ember.js 将视图附加到之前

> ID：11818034
> 
> 赞同：3
> 
> 时间：2012-08-05T16:21:38.673
> 
> 标签：javascript, ember.js

我开始使用 1.0 预发布版本的 Ember.js，但遇到了麻烦。

在我的 HTML 中，我有这个：

```
<script type="text/x-handlebars" data-template-name="application">
  {{outlet}}
</script>

<script type="text/javascript">
    $(function() {
        console.log("starting Ember app");
        App.initialize();
    });
</script>

<div id="footer">
    ... footer html ...
</div>
</body> 
```

这一切似乎都很好，除了它不是将视图放置在 {{outlet}} 所在的位置，而是将它附加在结束正文标记之前，以便它显示在页脚下方。

这是我正在使用的路由器：

```
App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            redirectsTo: 'portfolios'
        }),
        portfolios: Ember.Route.extend({
            route: '/portfolios',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('portfolios', App.Portfolio.find());
            }
        })
    })
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-05T23:26:56.773

非常感谢上面的所有评论——我在他们的帮助下想通了——

在我的应用程序对象上，我需要指定一个 rootElement ala：

```
App = Ember.Application.create({
    rootElement: '#app',
    ... 
```

然后在 HTML 中添加一个 div 以将带有插座的模板附加到：

```
<div id="app"></div> 
```

# java - Tomcat7 上的 JSF 与 Java6 系统时间显示委内瑞拉时间

> ID：11818038
> 
> 赞同：1
> 
> 时间：2012-08-05T16:22:45.047
> 
> 标签：java, jsf, timezone, tomcat7

编辑：JSF 实施：Mojorra 2.1.9

我的 Web 应用程序行为异常。当我在服务器机器上部署我的应用程序时，它会显示委内瑞拉标准时间的时间。像这样 Sun Aug 05 11:46:26 VET 2012

问题是我不在委内瑞拉。我检查了服务器机器上的时区配置，它是正确的。当我在本地机器上运行该应用程序时，完全没有问题，时间是正确的。但是部署的时候是错误的。

我将下面的上下文参数放入 web.xml，但它无济于事。什么问题我不知道

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:25:24.487

JSF 日期时间转换器默认使用 UTC。仅当您设置该上下文参数时，它才会默认为系统时区（底层服务器平台的时区）。显然，有问题的服务器默认配置为委内瑞拉时区（可能是因为它托管在委内瑞拉并由不知道自己在做什么的服务器管理员维护？）。

删除该上下文参数应该可以解决您的具体问题，假设您**没有**覆盖 JSF 默认日期时间转换器或其设置，例如自定义转换器或设置`timeZone`属性`<f:convertDateTime>`。

如果这不能以某种方式解决您的问题，请尝试升级 JSF 实现（但是我不记得在 Mojarra 中与此相关的任何错误，所以我认为如果您使用 Mojarra，升级不会解决它；我我不确定 MyFaces），或者尝试显式设置页面中每个标签的`timeZone`属性。`<f:convertDateTime>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:19:33.410

我用“-Duser.timezone=Europe/Istanbul”参数启动了tomcat，现在时间到了。不明白为什么默认时间是委内瑞拉时间，但这为我解决了问题。将进一步研究以了解导致此问题的原因。

# asp.net - ASP.NET：Random.Next：NullReferenceException？

> ID：11818039
> 
> 赞同：1
> 
> 时间：2012-08-05T16:23:00.897
> 
> 标签：asp.net, iis, random, null, nullreferenceexception

我试图在页面加载时将两个标签的文本设置为随机数。这段代码

```
 Random random = new Random();

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            LINE 22 Label12.Text = random.Next(99).ToString();
            LINE 23 Label13.Text = random.Next(999).ToString();
        }

        foreach (string s in scr1.Style.Keys)
        {
            Response.Write(s + ",");
        }
    }
    ... 
```

在本地主机上工作，但在我的服务器上运行时会抛出 NullReferenceException。

堆栈跟踪：

[NullReferenceException：对象引用未设置为对象的实例。] ***.apps。***.Page_Load(Object sender, EventArgs e) in C:\Users** *\Documents\Visual Studio 2010\Projects** *** *\apps** *.aspx.cs:22 System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp , 对象 o, 对象 t, EventArgs e) +14 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) +91 System.Web.UI .Control.LoadRecursive() +74 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +2207

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:31:02.620

两种选择：

*   `Label12`可能为空
*   `random`可能已被其他一些代码设置为 null

诊断问题的第一部分是找出其中的情况。简单地拆分作业：

```
string randomText = random.Next(99).ToString();
Label12.Text = randomText; 
```

然后看看它在哪一行失败。一旦您知道哪个表达式为空，您就可以尝试找出它为空的*原因*。

# java - Eclipse 自动缩进错误地缩进文件

> ID：11818041
> 
> 赞同：2
> 
> 时间：2012-08-05T16:23:00.990
> 
> 标签：java, eclipse, indentation, auto-indent

我的 Eclipse 发生了一些我以前从未记得发生过的奇怪事情。基本上，如果我有一个很长的语句并将其分成两行，那么之后的所有内容都会缩进一个比应有的更远的制表符。这是一个例子：

正确的缩进：

```
public static class Shape {

    enum Tetrominoes { NoShape, ZShape, SShape, LineShape, TShape, 
        SquareShape, LShape, MirroredLShape };

    private Tetrominoes pieceShape;
    private int coords[][];
    private int[][][] coordsTable;

    public Shape() {

        coords = new int[4][2];
        setShape(Tetrominoes.NoShape);
    }

    public void setShape(Tetrominoes shape) {

    }

} 
```

使用 Ctrl+A、Ctrl+I 时的样子：

```
public static class Shape {

    enum Tetrominoes { NoShape, ZShape, SShape, LineShape, TShape, 
        SquareShape, LShape, MirroredLShape };

        private Tetrominoes pieceShape;
        private int coords[][];
        private int[][][] coordsTable;

        public Shape() {

            coords = new int[4][2];
            setShape(Tetrominoes.NoShape);
        }

        public void setShape(Tetrominoes shape) {

        }

} 
```

现在，如果我将该枚举保留在一行上并自动缩进它，那么它就可以了。我刚买了一台新笔记本电脑，在上面放了一个新的 Eclipse 副本，没有更改任何设置，所以这就是默认自动缩进的工作方式。但是我记得在我的旧笔记本电脑上，如果我将一个语句分成两行，那么之后的所有其他内容仍然会正确对齐吗？

（同样在这篇文章的开头，我输入了“嘿，伙计们”，但看起来 StackOverflow 自动删除了它？我尝试编辑问题并重新插入它，但发布后它仍然被删除。我尝试输入“嘿”，但得到了也被删除了。难道不相信问候吗？？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:36:08.047

我能够重现该问题。

似乎枚举的结尾括号使 Eclipse 感到困惑。如果将其放在单独的行上，则缩进开始正常工作：

```
public static class Shape {

    enum Tetrominoes { NoShape, ZShape, SShape, LineShape, TShape, 
        SquareShape, LShape, MirroredLShape 
    };

    private Tetrominoes pieceShape;
    private int coords[][];
    private int[][][] coordsTable;

    public Shape() {

        coords = new int[4][2];
        setShape(Tetrominoes.NoShape);
    }

    public void setShape(Tetrominoes shape) {

    }

} 
```

您还可以尝试格式化代码（Ctrl + Shift + F），然后更正缩进（Ctrl + A 和 Ctrl + I）。格式化代码时，您会注意到 Eclipse 还将结束大括号放在下一行而不是 Enum 常量主体旁边。

# c# - mvc3 下拉列表绑定

> ID：11818042
> 
> 赞同：1
> 
> 时间：2012-08-05T16:23:10.343
> 
> 标签：c#, asp.net-mvc-3, binding, html.dropdownlistfor

我是 MVC3 的新手，正在尝试学习一些东西。使用 Razor 视图引擎。mysql数据库。我有一张桌子，用来保存公司（companyID、companyName 等）。我有一个具有相同属性的模型：

```
public class CompanyModel{
    public int companyID;
    public string companyName;
    ......
    ....
} 
```

我想创建一个包含公司的下拉列表，向我显示公司名称，当我选择一个项目时，我需要能够访问 companyID。我可以查询该表并在公司列表中包含所有行：

```
List<Company> companies = new List<Company>();
companies = getCompanies(); 
```

但我不知道如何将此列表与下拉列表绑定，以及如何在从我的控制器调用 post 方法后获取所选值。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:27:04.493

您可以使用视图模型：

```
public class MyViewModel
{
    [DisplayName("Company")]
    public int CompanyId { get; set; }
    public IEnumerable<SelectListItem> Companies { get; set; }
} 
```

然后让您的控制器操作实例化、填充并将此视图模型传递给视图：

```
public class CompaniesController: Controller
{
    public ActionResult Index()
    {
        List<Company> companies = getCompanies();

        var model = new MyViewModel();
        model.Companies = companies.Select(x => new SelectListItem
        {
            Value = x.companyID.ToString(),
            Text = x.companyName
        });
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        // model.CompanyId will contain the selected value here

        return Content(
            string.Format("You have selected company id: {0}", model.CompanyId)
        );
    }
} 
```

最后是一个强类型视图，您可以在其中呈现包含下拉列表的 HTML 表单：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.LabelFor(x => x.CompanyId)
    @Html.DropDownListFor(x => x.CompanyId, Model.Companies)
    <button type="submit">OK</button>
} 
```

# ruby-on-rails - 在 Openshift 上安装 Thinking Sphinx - Rails

> ID：11818044
> 
> 赞同：5
> 
> 时间：2012-08-05T16:23:22.177
> 
> 标签：ruby-on-rails, search, sphinx, openshift

Redhat 的 Openshift 似乎是 Heroku 的一个很酷的 PaaS 替代品，但有谁知道是否可以在 Openshift 上安装 sphinx，以便可以在带有 Thinking Sphinx 的 Rails 应用程序中使用它？任何意见将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:35:41.990

我不知道这是否会有所帮助。但是在 open-shift 上，您可以编译任何源并将其安装到任何前缀。例如 $OPENSHIFT_RUNTIME_DIR。我认为最好的方法是创建一个 DIY（自己动手）应用程序并从源代码编译所有内容，或者创建一个 ruby​​ 应用程序并安装所需的 gem，根据需要修改环境。本文可能会让您了解如何在 open-shift 上从源安装应用程序。[https://openshift.redhat.com/community/blogs/enabling-python-27-on-a-paas-with-the-openshift-diy-app-type](https://openshift.redhat.com/community/blogs/enabling-python-27-on-a-paas-with-the-openshift-diy-app-type)

# css - 改变特异性

> ID：11818047
> 
> 赞同：0
> 
> 时间：2012-08-05T16:23:35.437
> 
> 标签：css, css-specificity, controlling, css-cascade

```
<html>
  <head>
    <style type="text/css">
    #sidebar p {
        font-family: Verdana;
        font-size: .9em; }

        #sidebar .intro {
            font-family: Georgia;
            font-size: 1.25em;
            color:red;
            }

    </style>

  </head>
  <body>
    <div id=”sidebar”&gt;
       <p class=”intro”&gt;
           As you can see, the more CSS styles you create, the greater the potential for formatting
          snafus. For example, you may create a class style specifying a particular
         font and font size, but when you apply the style to a paragraph, nothing happens!
          This kind of problem is usually related to the cascade. Even though you may think
         that directly applying a class to a tag should apply the class’s formatting properties,
          it may not if there’s a style with greater specificity.

        You have a couple of options for dealing with this kind of problem. First, you can
        use !important (as described in the box above) to make sure a property always
        applies. The !important approach is a bit heavy handed, though, since it’s hard to
        predict that you’ll never, ever, want to overrule an !important property someday.
        Read on for two other cascade-tweaking solutions.
    </p>    
</div>

  </body>
</html> 
```

**#sidebar p**样式的特异性**为 101**（ID 为 100，标签选择器为 1），而**.intro 样式**的特异性为**10**（类选择器为 10 分）。由于 101 大于 10，所以 #sidebar p 优先。将 .intro 更改为 #sidebar .intro 会将其特异性更改为 110。

即使我改变了这一点，我的结果也不会到来

谁能给我解释一下。

输出：应该是红色，font-size-1.25em 和 font-family -Georgia

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:38:14.507

# html - 如何仅生成深色 html 颜色代码用作字体颜色？

> ID：11818048
> 
> 赞同：2
> 
> 时间：2012-08-05T16:23:39.780
> 
> 标签：html

对于我的一个 Web 应用程序，我只需要随机选择深色 html 颜色代码，然后将其用作字体颜色。这样每次用户刷新页面时，字体的颜色都会发生变化。但它应该只变成深色调。有什么办法吗？

我使用以下代码：

```
$color = sprintf("#%x%x%x", rand(0,255), rand(0,255), rand(0,255)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T16:26:24.670

不要使用 255，而是使用更低的限制，例如 92。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:26:41.810

这取决于你所说的黑暗是什么意思，一个非常粗略的版本可以只为 rg 和 b 选择 0 到 127 之间的随机颜色值，而不是使用完整的 255 范围。

不过，您可以通过多种方式指定暗色，并且暗色的许多变体可以具有一个或多个高于某个阈值的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:42:02.980

“黑暗”是一个相对术语。在和之间`#FFFFFF`，第二个是“暗”。但一般来说，它们都不会被视为深色。还有一些不同的概念可以翻译为暗/亮，例如亮度、值、光度等。`#FFFFAA``#FFFFFE`

因此，您需要首先定义您感兴趣的黑暗类型以及您正在测量的值的阈值。

[这个关于 RGB 值亮度的问题](https://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color)包含各种亮度计算的算法。感知亮度可能是这个特定问题最合适的公式（尽管可能有更多的算法试图定义感知亮度，而不仅仅是列出的两个，并且您可能想要使用更高级的人类感知色彩空间之一在那里，如 HCL 或 CIECAM02，而不是 RGB），所以只需颠倒公式即可在特定亮度范围内生成颜色。

**编辑：**
拥有像 StackExchange 这样的大型多元化社区的一大好处是，这里有程序员在所有类型的领域工作，很可能其中一个已经问过/回答了与您相关的问题或[有助于解决您的问题正在努力](https://stackoverflow.com/questions/7530627/hcl-color-to-rgb-and-backward)。

# ios - CGAffineTransform 缩放和旋转

> ID：11818053
> 
> 赞同：1
> 
> 时间：2012-08-05T16:24:31.780
> 
> 标签：ios, rotation, scale, cgaffinetransform

我有一个通过 UISliders 缩放和旋转的图像视图。以下是我的做法：

```
- (IBAction)sizeSlider:(UISlider *)sender
{
    int SCALE_MAX = 200;
    int SCALE_MIN = 10;
    CGAffineTransform transform = image.transform;
    float scale = sqrt(transform.a*transform.a + transform.c*transform.c);
    if (scale > SCALE_MAX)
        image.transform = CGAffineTransformScale(transform, SCALE_MAX/scale*sender.value, SCALE_MAX/scale*sender.value);
    else if (scale < SCALE_MIN)
        image.transform = CGAffineTransformScale(transform, SCALE_MIN/scale*sender.value, SCALE_MIN/scale*sender.value);
}

- (IBAction)angleSlider:(UISlider *)sender
{  
    CGAffineTransform t = CGAffineTransformMakeRotation(sender.value);
        image.transform = t;
} 
```

这可行，但是如果图像视图已从其原始大小缩放，则旋转图像会将其重置为其原始大小。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:43:44.320

在您的旋转中使用与您的体重秤类似的方法。含义，使用：

```
CGAffineTransformRotate(image.transform, theAngle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:56:25.770

```
CGAffineTransformMakeRotation 
```

创建一个基于身份的新变换。缩放是转换的一部分——你想使用

```
CGAffineTransformRotate 
```

而是将旋转添加到现有的缩放变换中。

# design-patterns - 窥孔优化模式

> ID：11818055
> 
> 赞同：5
> 
> 时间：2012-08-05T16:24:39.697
> 
> 标签：design-patterns, compiler-construction, vm-implementation, control-flow-graph, peephole-optimization

我一直在阅读本地优化编译器技术，但一直不知道它们是如何实现的。这个想法是优化器每次都会查看代码的“窗口”，并以某种方式检测模式并用更优化的版本替换它们。

我的问题是，如何发现这些模式？（假设您的平台是一个为组装计算机输出汇编代码的 VM，例如 Schocken's Hack）。

人们是否真的手动检查代码（使用控制流图或 DAG 或其他），然后收集所有识别的模式并将它们编码到优化器中？或者有没有自动的方法。

例如，您在分析器中输入要优化的代码，它会喷出所说的模式。如果是这样，一个人如何开始写一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T21:44:35.723

经典的窥视孔优化与强度降低和您提到的其他事情无关。它们是 2-3 个指令序列，例如

```
BRANCH FALSE $1
BRANCH $2
$1: 
```

可以简化为

```
BRANCH TRUE $2 
```

像这样的序列可能出现在简单的代码生成器中，例如带有不生成 AST 的单通道编译器，例如我研究过的一些 COBOL 编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:22:26.350

这取决于您是编写自己的分析器还是使用现有的分析器。在任何一种情况下，您的分析器都会不断检查代码，直到它不再优化为止。**如果您以GCC**为例，它具有特定的优化通道。您的程序的中间代码将提供给这些通道，这些通道一个接一个地执行并优化您的代码。此外，任何传球都可以执行多次。
如果你真的想了解如何编写这些优化，只需通过**GCC中的****pass.h**文件。

# android - 如何再次播放/停止媒体播放器？

> ID：11818056
> 
> 赞同：1
> 
> 时间：2012-08-05T16:24:52.597
> 
> 标签：android, media-player, android-mediaplayer

我正在使用一个带有 PLAY 和 STOP 两个动作的按钮“音乐”，当我第一次点击音乐播放时，当我再次点击它时它就停止了。但是，当我第二次单击时，所有操作 PLAY/STOP 都不起作用。

```
 public class Home extends Activity {
      boolean isMediaOn=false; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

      final ImageButton music=(ImageButton)findViewById(R.id.music);
      final MediaPlayer sound=MediaPlayer.create(Accueil.this,R.raw.star);      

      music.setOnClickListener(new OnClickListener() { 
      public void onClick(View v) { 

                        //  play
              if(isMediaOn==false) 
              { 

              System.out.println("PLAY");

              sound.start();

              music.setImageResource(R.drawable.music);

              isMediaOn=true; 
              } 
                       // stop 
              else 
              { 

                System.out.println("STOP");
                if(sound.isPlaying()){
                    sound.reset();
                    sound.stop();

                }

              music.setImageResource(R.drawable.no_music);

              isMediaOn=false; 
              } 

      } 
      }); 
```

这是我的 logcat 的屏幕截图： ![在此处输入图像描述](../Images/bb1a5d2c61bdde0e6a706320783c7570.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:08:06.553

在[http://developer.android.com/reference/android/media/MediaPlayer.html#stop](http://developer.android.com/reference/android/media/MediaPlayer.html#stop)中明确指出 **'一旦处于停止状态，直到调用 prepare() 或 prepareAsync() 来设置播放才能开始将 MediaPlayer 对象再次变为 Prepared 状态。**

```
public class Home extends Activity {
  boolean isMediaOn=false; 
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  final ImageButton music=(ImageButton)findViewById(R.id.music);
  final MediaPlayer sound=MediaPlayer.create(Accueil.this,R.raw.star);      

  music.setOnClickListener(new OnClickListener() { 
  public void onClick(View v) { 

                    //  play
          if(isMediaOn==false) 
          { 

            System.out.println("PLAY");
            try {
               sound.prepare();
            } catch (Exception e) {
            Log.d(Settings.debug, e.toString());
          }
          sound.start();

          music.setImageResource(R.drawable.music);

          isMediaOn=true; 
          } 
                   // stop 
          else 
          { 

            System.out.println("STOP");
            if(sound.isPlaying()){
                sound.reset();
                sound.stop();

            }

          music.setImageResource(R.drawable.no_music);

          isMediaOn=false; 
          } 

  } 
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:50:32.513

`stop()`只有当玩家处于 、 或 状态时`STARTED`，您`PREPARED`才能调用。您的电话正在使其恢复状态，导致失败。`PAUSED``PLAYBACK_COMPLETE``reset()``IDLE``stop()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:52:08.057

您可能想使用 pause()，如`sound.pause();`

pause() 方法暂停播放并维护所有其他播放器状态（例如正在播放的文件、文件中的位置等）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T05:12:46.237

试试这个，希望对你有帮助。

```
 final ImageButton music=(ImageButton)findViewById(R.id.music);
   final MediaPlayer sound=MediaPlayer.create(Accueil.this,R.raw.star);
   music.setOnClickListener(new OnClickListener() { 

   public void onClick(View v) { 
       if(sound.isPlaying()){
          sound.stop();
          music.setImageResource(R.drawable.no_music);

       } else {
         sound.start();
         music.setImageResource(R.drawable.music);

       }
  }); 
```

# c# - Telerik 组件有错误

> ID：11818058
> 
> 赞同：0
> 
> 时间：2012-08-05T16:25:19.307
> 
> 标签：c#, wpf, telerik

我是 WPF 和 Telerik 组件的初学者。当我尝试打开使用 Telerik 组件的项目时，我收到此消息并且无法运行该应用程序。

> 错误 1 ​​找不到类型“telerik:RadPropertyGrid”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。D:\khodabandeh\Code\WPF Creator\Main Copy\0.8.5\VXML Creator\VXML Creator\MainWindow.xaml 62 30
> 
> 错误 2 XML 命名空间“http://schemas.telerik.com/2008/xaml/presentation”中不存在标记“RadPropertyGrid”。第 62 行位置 30\. D:\khodabandeh\Code\WPF Creator\Main Copy\0.8.5\VXML Creator\VXML Creator\MainWindow.xaml 62 30

你遇到过类似的问题吗？如果你有，请不要隐瞒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:29:11.987

请发布您的 XAML 代码，以便我们为您提供帮助。老实说，您很可能没有在 XAML 中定义 Telerik 标签。

# apache - htaccess 重定向 url 但保留输入的 url

> ID：11818064
> 
> 赞同：1
> 
> 时间：2012-08-05T16:26:16.707
> 
> 标签：apache, .htaccess

我设法使用 .htaccess 将域 url 重定向到站点内的页面。实际上，我什么都没学，我只是使用了服务器上的 Web 表单。

无论如何，它只实现了重定向的效果并显示了新重定向的 URL，而我希望它保持为输入的那个。

是的，这肯定是一个常见问题，但我尝试遵循本网站上另一篇关于此问题的帖子的建议（删除一些标志），但没有帮助。

这是我现在的 .htaccess 文件（或多或少）：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.a-site.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.a-site.com$
RewriteRule ^$ http://www.a-site.com/a-file.html [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:29:04.990

您的条件似乎无关紧要：

```
RewriteCond %{HTTP_HOST} ^a-site.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.a-site.com$ 
```

也可以写成：

```
RewriteCond %{HTTP_HOST} ^(www\.)?a-site.com$ 
```

看起来这是两次相同的主机匹配。但是您`RewriteRule`将始终重定向浏览器，因为它`http://www.a-site.com`前面有一个，它告诉 apache 使用 302 重定向。尝试删除它：

```
RewriteRule ^$ /a-file.html [L] 
```

# iphone - iOS中UIDatePicker的UI设计

> ID：11818066
> 
> 赞同：0
> 
> 时间：2012-08-05T16:26:21.813
> 
> 标签：iphone, objective-c, ios, xcode

我有Android经验，目前开始学习iOS。我创建了一种在 Android 应用程序中选择数据的机制。当我单击日期按钮时，会弹出一个 DatePicker：

![在此处输入图像描述](../Images/2cdc7930b2e89204d15f220cdf13f5b7.png)

如您所见，它有`Cancel`和`Set`按钮。

我的问题是关于我的 iphone 应用程序。我想拥有相同的机制。当我点击按钮时，会弹出日期选择器（可以有类似 Android 日期选择器的按钮）`Set`。`cancel`我怎样才能做到这一点？我不确定这在 iPhone 中是不是一个好方法，如果我们可以设计一个更好的机制，你能帮我吗？

![在此处输入图像描述](../Images/1916b1e8ed0af40c3352d5b2fc5a6f9b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T16:19:06.150

这是 Android 和 iOS 标准小部件之间的 UX 比较，以及相关 Apple / Android 网站上的文档链接。这是开始学习所有技术术语的好方法。

[http://kintek.com.au/blog/portkit-ux-metaphor-equivalents-for-ios-6-and-android-4/](http://kintek.com.au/blog/portkit-ux-metaphor-equivalents-for-ios-6-and-android-4/)

希望这能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:36:01.053

Apple 有一个示例项目来证明这一点。您必须稍微调整一下：您不想显示/隐藏日期选择器本身，而是希望显示/隐藏包含日期选择器和解雇按钮的视图。

它被称为[DateCell](http://developer.apple.com/library/ios/#samplecode/DateCell)。

基本上，它将日期选择器视为包含日期的单元格的键盘。当用户输入文本字段（因此，需要真正的键盘）并滚动以保持日期行可见时，您需要管理隐藏它，但是您需要的所有位都在这个项目中以一种或另一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:41:13.673

一种方法是将自定义按钮添加到包含日期选择器的同一视图中，然后在用户需要时将其弹出。不要使用日期选择器委托，而是使用按钮操作来获取日期选择器值。

# java - Getter、Setter、构造函数及其参数

> ID：11818067
> 
> 赞同：1
> 
> 时间：2012-08-05T16:26:22.447
> 
> 标签：java, constructor, setter, getter

到目前为止，尽管我不善于表达我的问题，但你们一直很有帮助。我想我几乎知道自己在做什么，但我试图弄清楚 getter、setter 和构造函数之间的关系。我有两个类如下 `Student`，`Name`我对getter和setter中的参数与构造函数之间的关系感到困惑

如果我从 Name 构造函数中删除参数，即这个

```
public Name (){
this.firstName = firstName;
this.lastName = lastName; 
```

并编辑了 Student 构造函数以反映这一点

```
public Student(int id, String firstName, String lastName, String street, String area, String city, String country, int age, char gender, String college, String course,  int level, int gradePointAverage){ //This is the list of variables called from the Student class
this.id = id;
this.name = new Name(); //I have removed the parameters here
this.name.setFirstName(firstName);
this.name.setLastName(lastName);
this.address = new Address(street, area, city, country);
this.age = age;
this.gender = gender;
this.college = college;
this.course = course;
this.level = level;
this.gradePointAverage = gradePointAverage; 
```

}

我不确定它会产生什么影响。我会非常感激有人可以向我解释我应该/不应该在哪里有参数，为什么？理解这个概念是目前阻碍我进一步编码的原因。

```
public class Student {
    private Name name; // This is calling from the Name class, giving it the name 'name'
    private Address address; // This calls from Address, giving it the name 'address'

    private char gender;

    private String course, college;

    private int gradePointAverage, id, age, level;

    public Student(int id, String firstName, String lastName, String street, String area, String city, String country, int age, char gender, String college, String course,  int level, int gradePointAverage){ //This is the list of variables called from the Student class
        this.id = id;
        this.name = new Name(firstName, lastName);
        //this.name = new Name();
        this.name.setFirstName(firstName);
        this.name.setLastName(lastName);
        this.address = new Address(street, area, city, country);
        this.age = age;
        this.gender = gender;
        this.college = college;
        this.course = course;
        this.level = level;
        this.gradePointAverage = gradePointAverage;
    }

    public int getId(){
        return id;
    }

    public String getName(){
        return name.toString();
    }

    public String getAddress(){
        return address.toString();
    }

    public int getAge(){
        return age;
    }

    public char getGender(){
        return gender;
    }

    public String getCollege(){
        return college;
    }

    public int getLevel() {
        return level;
    }

     public String getCourse() {
        return course;
    }

    public int getGradePointAverage() {
        return gradePointAverage;
    }

    public void printStudent() {
        System.out.println("The Student " + name.toString() + " is logged under the student ID number " + id + ".");
        System.out.println("They live at " + address.toString() + " and their age is " + age + ".");
        System.out.println("Their gender is " + gender + ".");
        System.out.println("The student studies at " + college + " attending classes in " + course + ".");
        System.out.println("Their level is " + level + " and the student grade average in points is " + gradePointAverage + ".");
        System.out.println();
    }

} 
```

和`Name`

```
public class Name{

private String firstName, lastName;

public Name (String firstName, String lastName){
//public Name (){
    this.firstName = firstName;
    this.lastName = lastName;
}

public void setFirstName(String firstName){
    this.firstName = firstName;
}

public void setLastName(String lastName){
    this.lastName = lastName;
}

//public String getFirstName() {
//  return firstName;
//}

//public String getLastName() {
//  return lastName;
//}

///** Returns first name concatenated to last name */
//public String toString() {
//  return firstName + " " + lastName;
//}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T16:56:49.973

它们用于初始化对象的`constructors`实例，以确保`valid`在创建时提供对象状态所需的所有最小数据量。

在您的情况下，`Name`应该有一个`constructor`要求`firstName`，`lastName`因为这些东西是使`Name`对象完全初始化的原因。这个对象应该像你`Address`展示的对象一样工作。

否则，如果您使用`setXXX`方法，则该`Name`对象是不完整的，两个`String`对象已初始化为`null`或某些其他未定义状态。

# python - 使用 Lighttpd 设置 gevent，奇怪的东西

> ID：11818075
> 
> 赞同：1
> 
> 时间：2012-08-05T16:27:07.813
> 
> 标签：python, fastcgi, lighttpd, gevent

我有一个奇怪的问题。我将 Lighttpd 配置为将 /test 传递给 fastcgi 后端。刚刚在配置中添加了这个

```
fastcgi.server = ("/test" =>
  ("127.0.0.1" =>
    (
      "host" => "127.0.0.1",
      "port" => 7101,
      "docroot" => "/",
      "check-local" => "disable"
    )
  )
) 
```

现在，当我启动 Flup 示例并点击 127.0.0.1:80/test 时，一切正常。测试 uWSGI 到，还是可以的。

翻牌示例：

```
#!/usr/bin/env python
from flup.server.fcgi import WSGIServer

def myapp(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return ['Hello World']

WSGIServer(myapp, bindAddress = ('127.0.0.1',7101)).run() 
```

现在，唯一的问题是当我启动 gevent 时它不起作用。Lighttpd mod_fastcgi 说后端刚刚被阻塞。

有趣的是，当我更改处理程序以仅返回字符串时，导致 WSGI 需要可迭代，并从我的浏览器中点击 127.0.0.1:7101 它按预期工作。这应该是WSGIServer，怎么会这样呢？

这是gevent代码：

```
#!/usr/bin/python
"""WSGI server example"""
from gevent.wsgi import WSGIServer

def app(env, start_response):
    start_response('200 OK', [('Content-Type','text/html')])
    #return ["Hello World", StopIteration]   # this is WSGI test, not working
    return "Hello World"
    # when set like this, frontend :80 still wont work (500 Internal error), 
    # but 127.0.0.1:7101 work like standard http

if __name__ == '__main__':
    WSGIServer(('', 7101), app).serve_forever() 
```

底线是，为什么只有 gevent 在这个设置中不起作用，而 Flup 和 uWSGI 都在起作用？[这里](https://bitbucket.org/denis/gevent/src/tip/examples/wsgiserver.py#cl-4)有没有官方示例中没有提到的一些秘密设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:51:34.417

因为 gevent.wsgi.WSGIServer 不是 fcgi 服务器，它只是 http 服务器。您可以将您的请求从 lighttpd 代理到 gevent 作为 http，或使用 wsgi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:38:43.113

你可以看到，flup[在这里](http://trac.saddi.com/flup/wiki/FlupServers)声明它是 SPEAK FastCGI（**不是 HTTP**），而 uWSGI[在这里](http://projects.unbit.it/uwsgi/)说“作为一个仅 WSGI 的服务器而生”。现在 Gevent[在这里](http://www.gevent.org/)说“基于 libevent-http 的快速 WSGI 服务器”，这让我很困惑，但后来我尝试了 gunicorn，但它失败了。然后我在[这里](http://gunicorn.org/)发现“Gunicorn 'Green Unicorn' is a Python WSGI **HTTP** Server for UNIX”。这意味着 gevent 和 gunicorn WSGI 处理程序是 HTTP 请求**而不是 FastCGI**，但正如 Fedor Gogolev 所说，**对于您的处理程序**，它们是 WSGI 服务器。

因此，对于**Flup**和**uWSGI** ，您可以配置 lighttpd（或任何其他 Web 服务器）以使用**fastcgi**模块，但对于**gunicorn**和**gevent** ，您使用**代理**模块，对于它们，您根本不必使用前端！如果没有静态服务的东西或其他原因你可以省略前端导致**gunicorn**状态它是快速和稳定的。

# android - PreferencesActivity - 自定义 checbkoxes、单选按钮等的样式

> ID：11818076
> 
> 赞同：2
> 
> 时间：2012-08-05T16:27:10.940
> 
> 标签：android, checkbox, preferences, radio, preferencescreen

> **可能重复：**
> [更改 Checkbox for Android](https://stackoverflow.com/questions/3192173/change-icons-of-checked-and-unchecked-for-checkbox-for-android)
> [自定义复选框首选项的选中和未选中图标](https://stackoverflow.com/questions/3569412/customize-check-box-preference)

有什么方法可以自定义元素的样式`PreferencesActivity`吗？

我只能更改颜色文本、背景等。

我还想更改复选标记和单选按钮样式`CheckBoxPreference`等。

我对 API8 或更高版本很感兴趣。

谢谢你的帮助！

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <CheckBoxPreference
        android:defaultValue="true"
        android:key="vibrate"
        android:summary="summary"
        android:title="Some title"
        android:widgetLayout="@layout/custom_checkbox" />
    <CheckBoxPreference
        android:defaultValue="true"
        android:key="autorotate"
        android:summary="summary"
        android:title="auto rotate" />
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:38:52.460

我明白你现在在说什么。我以为你只是`CheckBox`在你的`View`. 您正在使用`CheckBoxPreference`和其他`Preference` `Views`.

好的，这个概念非常相似。

您需要定义自定义小部件布局。在您的`res/layout`目录中执行此操作并调用它**`custom_checkbox.xml`**。我们可以`CheckBox`以 为例。

使用. `CheckBoxPreference`_ `res/layout`_ `CheckBox`例如：

```
<CheckBox
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+android:id/customCheckBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:button="@drawable/android_button"
    android:clickable="false"
    android:focusable="false" /> 
```

您可以替换为您找到或设计`android:button`的任何内容。`drawable`

现在您需要定义您的`CheckBoxPreference`并将其设置`android:widgetLayout`为`CheckBox`您刚刚在`res/layout`. 例如：

```
<CheckBoxPreference
    android:defaultValue="true"
    android:key="@string/Drop_Option"
    android:title="Close after call drop"
    android:widgetLayout="@layout/custom_checkbox" /> 
```

如果你不`xml`用于定义你的`layout`，你可以用这样的代码来做：

```
 CheckBoxPreference checkBoxPreference = new CheckBoxPreference(this);
    checkBoxPreference.setWidgetLayoutResource(R.layout.custom_checkbox); 
```

[发现与此问题类似的资源。](https://stackoverflow.com/questions/3569412/customize-check-box-preference)

**康斯坦丁·布罗夫**

* * *

**评论中扩展问题的相关链接：**

> 另外，如何更改列表项的样式？

[安卓列表视图样式](https://stackoverflow.com/questions/2398380/android-listview-style)

> 另外，我想在列表项中添加一些填充。

[间距-listview-items-android](https://stackoverflow.com/questions/4984313/spacing-between-listview-items-android)

# android - 如何在 Android SDK 中实现这种类型的动画？

> ID：11818078
> 
> 赞同：0
> 
> 时间：2012-08-05T16:27:30.177
> 
> 标签：android, android-animation

看看我为想要在 Android 上开发的游戏界面所做的这个设计： [http ://www.moboing.com/smallshow.jpg](http://www.moboing.com/smallshow.jpg)

当用户触摸气球时，我希望星星/眩光动画随着星星掉落而播放。我很好奇的是在 eclipse/java 中开发应用程序时使该动画成为可能的最佳总体方向/方法。

我正在考虑制作一些星星的变体作为透明的PNG，并让它们在触摸时动画，但我是新手，所以我不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:04:05.450

您可以像一系列图像一样创建动画，然后使用 AnimationDrawable 类使其具有动画效果。让我给你看一个例子：

```
ImageView my_image = (ImageView) findViewById(R.id.my_animation);
AnimationDrawable animation = new AnimationDrawable();

// We need to add each image to our final animation setting time interval between them
animation.addFrame(getResources().getDrawable(R.drawable.img_1), 200);
animation.addFrame(getResources().getDrawable(R.drawable.img_2), 200);
animation.addFrame(getResources().getDrawable(R.drawable.img_3), 200);

animation.setOneShot(false);

my_image.setBackgroundDrawable(animation);    // Set as background to see it
animation.start();    // Start playing the animation 
```

在哪里：

*   `my_animation`: 你的 ImageView 变成你想要的 Layout。
*   `img_1`, `img_2`, `img_3`: 合成动画的图像（您应该创建并将它们保存到`res/drawable`文件夹中）。

我希望它可以帮助你并画出一个自己做的方法:)

PS：这应该是您想要的活动的方法（例如，`onCreate`在用户启动时显示它）。

# java - DocumentListener Java，如何防止 JTextBox 中出现空字符串？

> ID：11818080
> 
> 赞同：3
> 
> 时间：2012-08-05T16:27:55.690
> 
> 标签：java, swing, jtextfield, documentlistener, inputverifier

![在此处输入图像描述](../Images/007048f0eb9695edb993f260b558b4af.png)我一直在从事一个个人项目，以便在编程方面做得更好。我的目标是让它更加健壮，我才刚刚开始。我现在是计算机科学专业的学生。无论如何，我正在制作如图所示的程序的一部分。我计算了小时工资并提供了一些我还没有实现的输出。我正在使用 DocumentListener 所以它会自动计算。当文本从框中完全删除时出现错误。我尝试使用 if 语句修复它：

```
 if (tipMon.equals("") || tipMon == null) {
 tipMon.setText("0");
 } 
```

这是我到目前为止所拥有的。它还没有完成，我为菜鸟代码道歉。我在 2 个月前开始使用实际编码。

```
 import java.awt.GridLayout;
 import java.awt.event.ActionListener;
 import java.awt.event.ActionEvent;
 import java.awt.event.KeyListener;

 import javax.swing.JFrame;
 import javax.swing.JLabel;
 import javax.swing.JTextField;
 import javax.swing.JOptionPane;
 import javax.swing.event.DocumentEvent;
 import javax.swing.event.DocumentListener;
 import javax.swing.text.Document;
 import javax.swing.text.FieldView;

 public class deliveryDocListener extends JFrame implements ActionListener, 
DocumentListener{

private JLabel mon, tues, wed, thurs, fri, sat, sun, hourlyWage, blank, row2, monWage,
    tuesWage,wedWage,thursWage, friWage, satWage, sunWage, total, totalTips, totalHours, 
    totalHourlyEarnings, totalPay, weekPay;

private JTextField hourlyWageInput, tipMon, tipTues, tipWed, tipThurs, tipFri, tipSat, tipSun,
    hourMon, hourTues, hourWed, hourThurs, hourFri, hourSat, hourSun;

public deliveryDocListener(){
    super("Delivery Helper v0.1 Alpha");
    setLayout(new GridLayout(0,4));

    hourlyWage = new JLabel("Hourly Wage: ");
    add(hourlyWage);
    hourlyWageInput = new JTextField("7.25", 5);

    add(hourlyWageInput);
    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);

    row2 = new JLabel("Day of the Week");
    add(row2);
    row2 = new JLabel("Tips");
    add(row2);
    row2 = new JLabel("Hours Worked");
    add(row2);
    row2 = new JLabel("Hourly Earnings");
    add(row2);

    mon = new JLabel("Monday");
    add(mon);

    tipMon = new JTextField("0");

    Document tipMonListener = tipMon.getDocument();
    //Document class doc variable stores what happens in the getDocument()
    //method, getDocument() i think is what checked it real time we shall see
    tipMonListener.addDocumentListener(this);
    //add listener to he text field, this refers to most recent object (tipMon = new JTextField("0");"
    //notice how its purple is the same as new where the object got made?
    add(tipMon);

    hourMon = new JTextField("0");
    Document hourMonListener = hourMon.getDocument();
    hourMonListener.addDocumentListener(this);
    add(hourMon);

    monWage = new JLabel("0");
    add(monWage);

    tues = new JLabel("Tuesday");
    add(tues);
    tipTues = new JTextField("0");
    add(tipTues);
    hourTues = new JTextField("0");
    add(hourTues);
    tuesWage = new JLabel("0");
    add(tuesWage);

    wed = new JLabel("Wednesday");
    add(wed);
    tipWed = new JTextField("0");
    add(tipWed);
    hourWed = new JTextField("0");
    add(hourWed);
    wedWage = new JLabel("0");
    add(wedWage);

    thurs = new JLabel("Thursday");
    add(thurs);
    tipThurs = new JTextField("0");
    add(tipThurs);
    hourThurs = new JTextField("0");
    add(hourThurs);
    thursWage = new JLabel("0");
    add(thursWage);

    fri = new JLabel("Friday");
    add(fri);
    tipFri = new JTextField("0");
    add(tipFri);
    hourFri = new JTextField("0");
    add(hourFri);
    friWage = new JLabel("0");
    add(friWage);

    sat = new JLabel("Saturday");
    add(sat);
    tipSat = new JTextField("0");
    add(tipSat);
    hourSat = new JTextField("0");
    add(hourSat);
    satWage = new JLabel("0");
    add(satWage);

    sun = new JLabel("Sunday");
    add(sun);
    tipSun = new JTextField("0");
    add(tipSun);
    hourSun = new JTextField("0");
    add(hourSun);
    sunWage = new JLabel("0");
    add(sunWage);

    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);

    total = new JLabel("Total: ");
    add(total);
    totalTips = new JLabel("totalTipsOutput");
    add(totalTips);
    totalHours = new JLabel("totalHoursOutput");
    add(totalHours);
    totalHourlyEarnings = new JLabel("totalHourlyEarningsOutput");
    add(totalHourlyEarnings);

    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);

    blank = new JLabel();
    add(blank);
    blank = new JLabel();
    add(blank);
    totalPay = new JLabel("Gross Income: ");
    add(totalPay);
    weekPay = new JLabel("totalPayOutput");
    add(weekPay);

}

@Override
public void changedUpdate(DocumentEvent e) { 
    // TODO Auto-generated method stub

}

@Override
public void insertUpdate(DocumentEvent e) {
    //executes when someone enters text into input
    String tipMonStr = tipMon.getText();
    //monWage.setText(tipMonStr);
    String hourMonStr = hourMon.getText();

    double x = Double.parseDouble(tipMonStr);
    double y = Double.parseDouble(hourMonStr);
    double z = Double.parseDouble(hourlyWageInput.getText());

    if (tipMonStr.length() == 0) {
        tipMon.setText("0");
    }

    if (hourMonStr.length() == 0) {
        y = 0;
        hourMonStr = "0";
    }

    if (hourlyWageInput.getText().length() == 0) {
        z = 0;
        //String z = "0";
    }

    monWage.setText(Double.toString((z*y+x)/y));

    //bug when nothing in cell because no number (0) to use in math
}

@Override
public void removeUpdate(DocumentEvent e) {
    //executes when someone enters text into input
    String tipMonStr = tipMon.getText();
    //monWage.setText(tipMonStr);
    String hourMonStr = hourMon.getText();

    double x = Double.parseDouble(tipMonStr);
    double y = Double.parseDouble(hourMonStr);
    double z = Double.parseDouble(hourlyWageInput.getText());
    monWage.setText(Double.toString((z*y+x)/y));

    if (tipMon.equals("") || tipMon == null) {
        tipMon.setText("0");
    }

}

public void updateLog(DocumentEvent e, String action) {
    monWage.setText(Double.toString(5));
}

@Override
public void actionPerformed(ActionEvent arg0) {
    monWage.setText(Double.toString(5));

} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T18:25:21.597

正如@HFOE 建议的那样，[`InputVerifier`](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)这是正确的选择，但`verify()`“应该没有副作用”。相反，调用`calcProduct()`in `shouldYieldFocus()`。

```
 /**
 * @see http://stackoverflow.com/a/11818946/230513
 */
private class MyInputVerifier extends InputVerifier {

    private JTextField field;
    private double value;

    public MyInputVerifier(JTextField field) {
        this.field = field;
    }

    @Override
    public boolean shouldYieldFocus(JComponent input) {
        if (verify(input)) {
            field.setText(String.valueOf(value));
            calcProduct();
            return true;
        } else {
            field.setText(ZERO);
            field.selectAll();
            return false;
        }

    }

    @Override
    public boolean verify(JComponent input) {
        try {
            value = Double.parseDouble(field.getText());
            return true;
        } catch (NumberFormatException e) {
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-05T16:41:58.957

I'll make this an answer: I wouldn't use a DocumentListener for this purpose as it seems to me the wrong tool for the job. For one, it is continually listening and updating the results while the user is still entering data, data that is as yet incomplete, into the JTextField. Much better would be to use an ActionListener added to a JButton or to your JTextFields.

I suppose you could use a FocusListener, but even that concerns me since it is quite low-level.

Also: consider using an InputVerifier to validate your input.

Also: consider displaying your tabular data in a JTable where the 1st and 2nd columns are editable but the others are not.

**Edit**
I'm not sure if this is kosher, but it could work if you do your calculation from within the verifier. For example, updated for generality:

```
import javax.swing.*;

/**
* @see http://stackoverflow.com/a/11818183/522444
*/
public class VerifierEg {

    private static final String ZERO = "0.0";
    private JTextField field1 = new JTextField(ZERO, 5);
    private JTextField field2 = new JTextField(ZERO, 5);
    private JTextField resultField = new JTextField(ZERO, 10);

    private void createAndShowGui() {
        resultField.setEditable(false);
        resultField.setFocusable(false);

        JPanel mainPanel = new JPanel();
        final JTextField[] fields = {field1, field2};

        mainPanel.add(field1);
        mainPanel.add(new JLabel(" x "));
        mainPanel.add(field2);
        mainPanel.add(new JLabel(" = "));
        mainPanel.add(resultField);

        for (JTextField field : fields) {
            field.setInputVerifier(new MyInputVerifier(field));
        }

        JFrame frame = new JFrame("VerifierEg");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(mainPanel);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    private void calcProduct() {
        double d1 = Double.parseDouble(field1.getText());
        double d2 = Double.parseDouble(field2.getText());
        double prod = d1 * d2;
        resultField.setText(String.valueOf(prod));
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                VerifierEg eg = new VerifierEg();
                eg.createAndShowGui();
            }
        });
    }

    /**
    * @see http://stackoverflow.com/a/11818946/230513
    */
    private class MyInputVerifier extends InputVerifier {

        private JTextField field;
        private double value;

        public MyInputVerifier(JTextField field) {
            this.field = field;
        }

        @Override
        public boolean shouldYieldFocus(JComponent input) {
            if (verify(input)) {
                field.setText(String.valueOf(value));
                calcProduct();
                return true;
            } else {
                field.setText(ZERO);
                field.selectAll();
                return false;
            }

        }

        @Override
        public boolean verify(JComponent input) {
            try {
                value = Double.parseDouble(field.getText());
                return true;
            } catch (NumberFormatException e) {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T16:50:45.960

*   使用`JSpinner`or `JFormattedTextField`，`Number instance`那么`DocumentListener`应该可以正常工作，`no needed to parse String to Number instance`

*   否则你必须使用`DocumentFilter`for`JTextField`过滤`non numeric chars`，其余（计数）保持不变，仍然`required robust parsing String to the Number instance`

# mysql - MYSQL得到两个结果的差异

> ID：11818081
> 
> 赞同：2
> 
> 时间：2012-08-05T16:28:12.290
> 
> 标签：mysql, intersect

好的，所以我的问题是我有一组结果：

```
识别码
1个
1乙
3℃

```

我还有另一张桌子：

```
代码
一个
乙
C

```

我想使用 SQL 获得的是表 1 中的每个结果都缺失的 CODES 查询。所以基本上：

```
识别码
1℃
3个
3乙

```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:51:49.253

您可以使用：

```
SELECT     a.id, b.code
FROM       (SELECT DISTINCT id FROM idcodes) a
CROSS JOIN codes b
LEFT JOIN  idcodes c ON a.id = c.id AND b.code = c.code
WHERE      c.id IS NULL
ORDER BY   a.id, b.code 
```

如果您有另一个存储唯一条目的表，`id`最好只使用该表而不是`DISTINCT`子选择：

```
SELECT     a.id, b.code
FROM       ids a
CROSS JOIN codes b
LEFT JOIN  idcodes c ON a.id = c.id AND b.code = c.code
WHERE      c.id IS NULL
ORDER BY   a.id, b.code 
```

* * *

# [*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/fa8c3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:48:49.380

您可以使用`exists`. 使用笛卡尔连接构建可能变化的完整列表，然后确保您拥有的内容不在此列表中。

```
select id, code
  from idcode_table x
 where not exists ( select 1 
                      from idcode_table a
                     cross join code_table b
                     where b.code = x.code
                       and a.id = x.id ) 
```

这也可以用`not in`.

```
select id, code
  from idcode_table
 where (id, code) not in ( select distinct a.id, b.code
                             from idcode_table a
                            cross join code_table b ) 
```

`distinct`是可选的。它会使构建可能列表的速度变慢，但更快地确定您是否已经拥有其中之一。我会测试它，看看哪个更快。

# java - 为 Apache Derby 使用 LDAP

> ID：11818083
> 
> 赞同：1
> 
> 时间：2012-08-05T16:28:36.537
> 
> 标签：java, derby

我很高兴听到任何其他人分享我的问题，也许有解决方案。

我正在使用 Apache Derby 数据库，它涉及为我的数据库用户使用 LDAP。

当我使用“ij”工具时，一切都应该是这样。如果用户的名称和密码都为 LDAP 所知，则用户只能使用数据库。

但是，当我在纯 Java 中使用相同的代码时，即使使用了错误的密码，也会接受用户。也就是说，使用 LDAP 检查名称，但似乎忽略了密码。

Java 程序编译并运行，因此 PATH 和 CLASSPATH 的设置似乎没有问题。

有任何想法吗？

谢谢，

罗恩·沃茨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:11:04.977

可能是因为 defaultConnectionMode 对每个人都是 fullAccess。您可以在创建数据库并将其连接到第一次后以编程方式在数据库级别设置这些属性。首次连接到数据库后，您应该设置所有其他必需的属性 ex`Derby.database.defaultConnectionMode=noAccess` `Derby.connection.requireAuthentication=true` `Derby.database.user`和`derby.authentication.provider=LDAP`其他 ldap 属性。

这些属性将在重新启动数据库后生效。

[请参阅https://stackoverflow.com/a/9518516/1282907](https://stackoverflow.com/a/9518516/1282907)中提供的链接

这是您正在寻找的 [http://db.apache.org/derby/docs/10.6/devguide/rdevcsecureclientexample.html](http://db.apache.org/derby/docs/10.6/devguide/rdevcsecureclientexample.html)

# xna - XNA 两个方向的投影纹理（一个是相反方向）

> ID：11818090
> 
> 赞同：0
> 
> 时间：2012-08-05T16:29:30.730
> 
> 标签：xna, shader, hlsl, deferred

我创建了投影仪：

Matrix.CreateLookAt(位置, 方向, Vector3.Up); Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45), 1, 1, 2);

我传递给这些矩阵的着色器乘法（在名为 View 的着色器中），然后在着色器中执行：

```
float4 proj(float3 Position)
{
    float4 texCoord = mul(float4(Position, 1.0), View);
    texCoord.x = ( (texCoord.x / texCoord.w)/2) + 0.5;
    texCoord.y = (-(texCoord.y / texCoord.w)/2) + 0.5;
    return tex2D(shape, texCoord.xy);
} 
```

纹理的 uvw 被 Clamped。我在延迟着色的光照阶段使用它。结果图像（红色箭头是正确的方向）： [图像](http://img692.imageshack.us/img692/746/textureproj.jpg)

我应该怎么做才能让它只朝着正确的方向前进？

已解决：问题是反投影，简单地解决了：

```
float4 proj(float3 Position)
{
    float4 texCoord = mul(float4(Position, 1.0), View);
        if(texCoord.z < 0)
            return 0;
    texCoord.x = ( (texCoord.x / texCoord.w)/2) + 0.5;
    texCoord.y = (-(texCoord.y / texCoord.w)/2) + 0.5;
    return tex2D(shape, texCoord.xy);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:05:51.790

问题是反投影，这很容易解决：

```
float4 proj(float3 Position)
{
    float4 texCoord = mul(float4(Position, 1.0), View);
        if(texCoord.z < 0)
            return 0;
    texCoord.x = ( (texCoord.x / texCoord.w)/2) + 0.5;
    texCoord.y = (-(texCoord.y / texCoord.w)/2) + 0.5;
    return tex2D(shape, texCoord.xy);
} 
```

# javascript - 在 Chrome 的控制台中隐藏 __proto__ 属性

> ID：11818091
> 
> 赞同：19
> 
> 时间：2012-08-05T16:29:40.307
> 
> 标签：javascript, debugging, google-chrome, console

每当我`console.log/console.dir`在一个对象上键入时，总是显示的属性之一`__proto__`是构造函数。

有什么办法可以隐藏这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T16:42:35.553

重新定义console.log：

```
console.log = function (arg) {
    var tempObj;

    if (typeof arg === 'object' && !arg.length) {
        tempObj = JSON.parse(JSON.stringify(arg));
        tempObj.__proto__ = null;
        return tempObj;
    }

    return arg;
}; 
```

这不会修改肯定需要 __proto__ 的原始对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-06T18:40:59.717

```
console.debug = function() {
  function clear(o) {

    var obj = JSON.parse(JSON.stringify(o));
    // [!] clone

    if (obj && typeof obj === 'object') {
        obj.__proto__ = null;
        // clear

        for (var j in obj) {
          obj[j] = clear(obj[j]); // recursive
        }
    }
    return obj;
  }
  for (var i = 0, args = Array.prototype.slice.call(arguments, 0); i < args.length; i++) {
    args[i] = clear(args[i]);
  }
  console.log.apply(console, args);
}; 
```

* * *

```
var mixed = [1, [2, 3, 4], {'a': [5, {'b': 6, c: '7'}]}, [null], null, NaN, Infinity];
console.debug(mixed); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T16:47:10.783

使用 Opera 和[Dragonfly](http://www.opera.com/dragonfly/documentation/)。在其设置（脚本选项卡）中，您可以取消选中“显示原型”选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T19:57:08.020

虽然`.__proto__`很重要，但显然有一种方法可以从控制台隐藏东西。这在您尝试执行以下操作时得到证明：

```
 for (var i in function.prototype) {
    console.log(i+": "+function.prototype[i].toString())
    } 
```

会有一些东西没有记录到控制台，我认为这正是整个主题的意义所在（IMO 的答案应该允许所有原型，以便访问该主题的任何人都可以使用它）。

另外： The[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)不是构造函数。它是对象的最高优先级原型对象。重要的是不要删除 proto 并将其置之不理，因为如果那里有 JavaScript 依赖的方法，那么整个事情就会一团糟。对于构造函数来说[`obj.constructor`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor)，它并没有搞砸整个该死的东西，它可能只是它的名字，构造函数，想象一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-23T10:01:16.253

**隐藏`__proto__`是不值得的！** *（见下文为什么）*

```
var old_log = console.log;
console.log = function ()
{
    function clearProto(obj)
    {
        if (obj && typeof(obj) === "object")
        {
            var temp = JSON.parse(JSON.stringify(obj));
            temp.__proto__ = null;
            for (var prop in temp)
                temp[prop] = clearProto(temp[prop]);
            return temp;
        }
        return obj;
    }
    for (var i = 0; i < arguments.length; ++i)
        arguments[i] = clearProto(arguments[i]);
    old_log.apply(console, arguments);
}

var mixed = [1, [2, 3, 4], {'a': [5, {'b': 6, c: {'d': '7'}}]}, [null], null, NaN, Infinity];
console.log([1, 2, 3], mixed);
old_log([1, 2, 3], mixed); // 4 comparison (original mixed has __proto__) 
```

`NaN`并且`Infinity`不能用 JSON 克隆。在 Chrome 中，您还可以在开发工具的右侧获得行号。通过覆盖`console.log`你会失去它。不值得隐藏`__proto__`在那个上面！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-05T16:39:23.877

用于`Object.create(null)`创建对象而不`__proto__`

如果您只想隐藏显示`.__proto__`在控制台中的对象上的原型，则不能。虽然我不明白你为什么想要。

顺便说一句，`.__proto__`不是对象的构造函数，而是它的[[[Prototype]] 链接](http://ecma-international.org/ecma-262/5.1/#sec-8.6.2)。

# mysql - 即使使用 EXISTS 也没有结果

> ID：11818093
> 
> 赞同：0
> 
> 时间：2012-08-05T16:29:46.930
> 
> 标签：mysql, sql, phpmyadmin

我不明白为什么 MySQL 返回“MySQL 没有产生记录”而我使用 EXISTS（我愿意选择一个不产生记录的子查询）：

```
SELECT  page_ID
    FROM ranks_update
    WHERE EXISTS (
    SELECT *
    FROM ranks_update
    WHERE ranking_ID = 3
        AND current_rank = 1
        AND rating_time < '2012-08-05 02:57:59'
        AND rating_time >= '2012-08-05 00:00:00'  
    GROUP BY page_ID
); 
```

根据定义，EXISTS 允许从不返回任何记录的查询中获取结果。到目前为止，在这种情况下我总是得到 NULL 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:39:12.440

它正在返回该消息，因为没有记录匹配。NULL 是列的值。它与空返回集完全不同。

如果您有聚合函数，则空集返回 NULL。因此，以下将返回 NULL 值：

```
select max(Page_ID) 
```

这将返回 0：

```
select count(Page_ID) 
```

# swing - scala.swing 等效的盒子

> ID：11818094
> 
> 赞同：3
> 
> 时间：2012-08-05T16:29:52.417
> 
> 标签：swing, scala

有`scala.swing.BoxPanel`，但似乎没有抓住重点，因为没有工厂`javax.swing.Box`方法、、、`createHorizontalStrut`和的等价物。这些方法也返回 的实例，因此不能提交给.`createHorizontalGlue``createVerticalStrut``createVerticalGlue``java.awt.Component``scala.swing.Component.wrap`

是否有任何简单的解决方法来创建间距和胶水`scala.swing.BoxPanel`？如果没有，是否有任何现有的开源库包装了 的功能`javax.swing.Box`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T18:26:18.450

我一直使用以下胶水和支柱（你可以在 REPL 中运行它来测试）：

```
import swing._
import Swing._ // object with many handy functions and implicits

val panel = new BoxPanel(Orientation.Vertical) {
  contents += new Label("header")
  contents += VStrut(10)
  contents += new Label("aoeu")
  contents += VGlue
  contents += new Label("footer")
}

new Frame { contents = panel; visible = true } 
```

HGlue 和 HStrut 也有一些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:33:14.783

Swing 库中缺少各种功能。

这是我对胶水和支柱的解决方案：

```
import javax.{swing => jsw}
class HorzPanel extends BoxPanel(Orientation.Horizontal) {
  def glue = { peer.add(jsw.Box.createHorizontalGlue); this }
  def strut(n: Int) = { peer.add(jsw.Box.createHorizontalStrut(n)); this }
}
object HorzPanel {
  def apply(cs: Component*) = new HorzPanel { contents ++= cs }
}
class VertPanel extends BoxPanel(Orientation.Vertical) {
  def glue = { peer.add(jsw.Box.createVerticalGlue); this }
  def strut(n: Int) = { peer.add(jsw.Box.createVerticalStrut(n)); this }
}
object VertPanel {
  def apply(cs: Component*) = new VertPanel { contents ++= cs }
} 
```

当你想添加胶水或支柱时，你只需声明“glue”或“strut(n)”内联：

```
new VertPanel {
  contents += new Label("Hi")
  glue
  contents += new Label("there")
} 
```

（假设您正在使用该`contents +=`方法；它实际上并没有为您提供要添加的对象，因此您无法将其与其他项目组合并将它们作为集合添加。）

# sql - 在 WHERE-Clause for INSERT 中重用子查询结果

> ID：11818096
> 
> 赞同：1
> 
> 时间：2012-08-05T16:30:20.300
> 
> 标签：sql, sql-server

我正在使用 Microsoft SQL Server 2008 我想保存子查询的结果以在以下子查询中重用它。这可能吗？这样做的最佳做法是什么？（我对 SQL 很陌生）

我的查询看起来像：

```
INSERT INTO [dbo].[TestTable]
(
[a]
,[b]
)
SELECT 
(
   SELECT TOP 1 MAT_WS_ID  
   FROM #TempTableX AS X_ALIAS 
   WHERE OUTERBASETABLE.LT_ALL_MATERIAL = X_ALIAS.MAT_RM_NAME
)  
,(
    SELECT TOP 1 MAT_WS_NAME
    FROM #TempTableY AS Y_ALIAS
    WHERE Y_ALIAS.MAT_WS_ID = MAT_WS_ID 
    --( 
        --SELECT TOP 1 MAT_WS_ID  
        --FROM #TempTableX AS X_ALIAS 
        --WHERE OUTERBASETABLE.LT_ALL_MATERIAL = X_ALIAS.MAT_RM_NAME
    --)
) 
FROM [dbo].[LASERTECHNO]  AS OUTERBASETABLE 
```

我的问题是：

这是我所做的正确吗。我用 [a] (=MAT_WS_ID) 的第一个 SELECT 语句的结果替换了 [b] 的 WHERE 子句中的第二个 SELECT 语句（已被注释掉并且与 [a] 完全相同）。它似乎给出了正确的结果。但我不明白为什么！

我的意思是 MAT_WS_ID 是临时表 X_ALIAS 和 Y_ALIAS 的一部分。所以在 [b] 的 SELECT 语句中，在 [b]-select-query 的范围内，MAT_WS_ID 只能从 Y_ALIAS 表中获知。（或者我错了，我更像是一个 C++，也许 SQL 和 C++ 中的范围是完全不同的）

我只是想知道在 SQL Server 中重用标量选择结果的最佳方法是什么。或者我应该不关心并复制每一列的选择，而 sql 服务器自己优化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:27:50.400

一种方法是`outer apply`：

```
SELECT  mat.MAT_WS_ID
,       (
        SELECT TOP 1 MAT_WS_NAME
        FROM #TempTableY AS Y_ALIAS
        WHERE Y_ALIAS.MAT_WS_ID = mat.MAT_WS_ID  
        ) 
FROM    [dbo].[LASERTECHNO]  AS OUTERBASETABLE
OUTER APPLY
        (
        SELECT  TOP 1 MAT_WS_ID  
        FROM    #TempTableX AS X_ALIAS 
        WHERE   OUTERBASETABLE.LT_ALL_MATERIAL = X_ALIAS.MAT_RM_NAME
        ) as mat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:32:04.663

您可以在前者和后者中对行进行排名`#TempTableX`和`#TempTableY`分区，然后在两个表中使用常规连接和过滤（作为包含两个表中每个表中的排名数字的列）：`MAT_RM_NAME``MAT_WS_ID``rownum = 1``rownum`

```
WITH x_ranked AS (
  SELECT
    *,
    rownum = ROW_NUMBER() OVER (PARTITION BY MAT_RM_NAME ORDER BY (SELECT 1))
  FROM #TempTableX
),
y_ranked AS (
  SELECT
    *,
    rownum = ROW_NUMBER() OVER (PARTITION BY MAT_WS_ID ORDER BY (SELECT 1))
  FROM #TempTableY
)
INSERT INTO dbo.TestTable (a, b)
SELECT
  x.MAT_WS_ID,
  y.MAT_WS_NAME
FROM dbo.LASERTECHNO t
  LEFT JOIN x_ranked x ON t.LT_ALL_MATERIAL = x.MAT_RM_NAME AND x.rownum = 1
  LEFT JOIN y_ranked y ON x.MAT_WS_ID       = y.MAT_WS_ID   AND y.rownum = 1
; 
```

该`ORDER BY (SELECT 1)`位是指定不确定排序的技巧，因此会导致`rownum = 1`查询选择不确定的行。那就是在没有明确顺序的情况下或多或少地复制您`TOP 1`的内容，但我建议您指定一个更明智的`ORDER BY`子句以使结果更可预测。

# jquery - CSS - 浮动项目矩阵

> ID：11818097
> 
> 赞同：0
> 
> 时间：2012-08-05T16:30:25.837
> 
> 标签：jquery, html, css

![图片形式的问题](../Images/f13c4eb5010aa51153c17d1b7c091329.png)

布局 0 展示了我如何通过简化的 CSS 视图来实现此布局。我需要有关如何创建布局 1 和 2 的帮助/建议/想法。这些块可以按任何顺序呈现，并且它们的宽度是固定的（分别为 25% 或 50% - 如布局 0 所示）...工作中的扳手他们没有预定义的高度吗？

我更喜欢仅使用 css 的解决方案，每个布局都有自己的父/容器 div，所以如果定位最适合一行并且浮动更好，那么就这样吧。

明信片上的答案...谢谢大家

PS 我可以避免将我引向 js 库的答案，例如[http](http://masonry.desandro.com/) ://masonry.desandro.com/ ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:36:47.900

我将 2 列包装在一个 div 中（2 个小 div 在 1 个大的 div 中`width: 25%`）并将它们全部制作`float: left`（除了被包装的 div）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T16:53:53.133

将元素定位在绝对容器中，您可以通过使用 CSS 设置位置来将它们放置在您喜欢的任何位置，如下所示：

[**小提琴**](http://jsfiddle.net/2FeSe/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T20:02:08.823

你也可以只用浮动来做到这一点，虽然在布局 1 中你必须应用一点边距“技巧”（除非我忽略了某些东西）

[小提琴](http://jsfiddle.net/jcHAN/)

乍一看可能有点难以理解。如果不是绝对需要，我只是不喜欢定位绝对。虽然在这种情况下我不得不承认@adeneo 解决方案可能是最干净的方法。

# powershell - 如何通过 powershell 获取所有 tf s 警报订阅的列表（通过 PowerShell 获取 .Net 程序集？）

> ID：11818098
> 
> 赞同：0
> 
> 时间：2012-08-05T16:30:25.720
> 
> 标签：powershell

我正在尝试将我的工具移动到 powershell，[这](http://osnabrugge.wordpress.com/2012/03/29/create-tfs-event-subscription-programmatically-with-tfs-api/ "这个")可以在 PowerShell 中完成吗？我真正感兴趣的是：

```
IEventService es = tfs.GetService(typeof(IEventService)) as IEventService;
List<Subscription> ls = es.GetAllEventSubscriptions().ToList(); 
```

编辑：我真正想做的可能是使用 powershell 中的 .NET 程序集，然后这可能是[Using .NET library from PowerShell的副本](https://stackoverflow.com/questions/1846416/using-net-library-from-powershell)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:19:21.523

这是我很久以前在博客上找到的 PowerShell 函数中的 TFS API，它将帮助您入门。我已将其发布到 GitHub Gist。基本上，您确保已将 TFS 程序集加载到 AppDomain 中，然后您可以将所需的任何 TFS 服务接口添加到对象中，并像在任何 c# 应用程序中一样对它们进行操作，等等。

[https://gist.github.com/3288447](https://gist.github.com/3288447)

一旦你从上面的 Gist 中的方法返回了 TFS 对象，你就可以像这样对加载的服务进行操作：

```
 #use work item service
$tfs = get-tfs $env:TFSSERVERURL -silent
$project = $tfs.wit.Projects | ?{ $_.Name -eq $projectName}
#todo - replace with text for query or file read -- this is deprecated
$query = $project.StoredQueries | ?{ $_.Name -eq 'Active Bugs' }
$queryText = $query.QueryText.Replace("@project","'$projectName'")

$results = $tfs.wit.Query($queryText) 
#do something with the results... 
```

在您上面的请求中，您可以更改 get-tfs 方法以将您的服务接口添加到加载的集合中，然后像我在上面的示例中那样对 .NET 方法进行操作。

# php - PHP 从头到尾取数组键和值

> ID：11818100
> 
> 赞同：3
> 
> 时间：2012-08-05T16:30:40.903
> 
> 标签：php, arrays

我有一个具有 literal_key => 值的 PHP 数组。我需要将键和值从数组的开头移开并将其粘贴在末尾（也保留键）。

我试过了：

```
$f = array_shift($fields);
array_push($fields, $f); 
```

但这失去了关键价值。前任：

```
$fields = array ("hey" => "there", "how are" => "you"); 
```

// 在上面运行

这产生：

```
$fields = array ("how are" => "you", "0" => "there"); 
```

（我需要保持“嘿”而不是0）有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:43:47.167

据我所知，您不能使用 向数组添加关联值`array_push()`，也不能使用 获取键`array_shift()`。（同样适用`pop/push`）。快速破解可能是：

```
$fields = array( "key0" => "value0", "key1" => "value1");
//Get the first key
reset($fields);
$first_key = key($fields);
$first_value = $fields[$first_key];
unset($fields[$first_key]);

$fields[$first_key] = $first_value; 
```

看到它[在这里](http://ideone.com/9otOJ)工作。一些源代码取自[https://stackoverflow.com/a/1028677/1216976](https://stackoverflow.com/a/1028677/1216976)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T16:42:46.010

您可以使用第 0 个键，然后设置`$key`使用，然后设置。`array_keys``$value``array_shift``$fields[$key] = $value`

或者你可以做一些花哨的事情，比如

```
array_merge( array_slice($fields, 1, NULL, true),
             array_slice($fields, 0, 1, true)     ); 
```

这是未经测试但有正确的想法。

# ios - 颜色在 OpenGL ES 中没有正确混合

> ID：11818101
> 
> 赞同：1
> 
> 时间：2012-08-05T16:30:54.807
> 
> 标签：ios, opengl-es, opengl-es-2.0

我正在尝试在 2D 中渲染 OpenGL ES 中的 2 个（浅色）圆圈。中间为白色，边框为黑色。只要它们不重叠，它就可以正常工作：

![在此处输入图像描述](../Images/77c1bd04bdfd2fea723a54fbd916ef79.png)

但是一旦他们这样做，我就会得到这个神器：

![在此处输入图像描述](../Images/3a8996fe79c99766513b330757033a88.png)

当然，我正在使用`glBlendFunc(GL_ONE, GL_ONE)`启用混合。

这可能是什么原因造成的？有没有办法解决它？

我希望它们混合得更像这样：

![在此处输入图像描述](../Images/513f4d204535f823ede694e59f564511.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:59:52.080

你的圈子目前是线性渐变吗？如果你有不同的曲线，你可能会得到更少的伪影。

但是，根据您的示例，您似乎想要两个圆圈的最大强度，而不是强度的总和。Apple 的 OpenGL ES 2.0 实现似乎支持[EXT_blend_minmax](http://www.opengl.org/registry/specs/EXT/blend_minmax.txt)扩展，它允许您指定生成的片段值应该是入站值和现有值的最大值。也许试试看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:28:04.477

您看到的结果正是线性渐变应该出现的结果。提示：打开 Photoshop 或 GIMP 将两个径向渐变绘制成两层并将它们设置为“添加”混合模式。它看起来和你的照片一模一样。

方形渐变可以提供您想要的效果。如果您的渐变在 0…1 范围内，则取该值的平方并绘制它。如果您想线性化单个渐变，您可以稍后应用 sqrt。

并不是说这是使用混合阶段不容易完成的事情；它可以使用多次传递来完成，但实际上使用着色器组合来自两个 FBO 的传递更直接。

# java - 如何命名生成的 wsdl 中的 xs:elements？

> ID：11818102
> 
> 赞同：4
> 
> 时间：2012-08-05T16:30:58.530
> 
> 标签：java, web-services, xsd, jaxb

我最近在我的 Eclipse 中启动了我的 WebServicesExplorer，我刚刚意识到`xs:element`JAXB 生成的名称并不那么冗长。这是序列之一：

```
<xs:sequence>
  <xs:element minOccurs="0" name="arg0" type="xs:string" /> 
  <xs:element minOccurs="0" name="arg1" type="xs:string" /> 
  <xs:element name="arg2" type="xs:int" /> 
</xs:sequence> 
```

从此文件生成：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class User {
    private String firstName;
    private String lastName;
    private int age;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
} 
```

我还不是 JAXB 专家，所以我想知道是否可以将那些 arg* 命名元素更改为合理的东西，比如在 POJO 类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:10:06.707

您没有提及您正在使用什么 Web 服务框架，但行为听起来类似于 JAX-WS 规范，例如[，我生成的 wsdl 中的部分具有“arg0”、“arg1”等形式的名称……为什么不部件（以及从它们生成的 Java）使用我在接口定义中键入的漂亮参数名称？](http://cxf.apache.org/faq.html#FAQ-Thepartsinmygeneratedwsdlhavenamesoftheform%22arg0%22%2C%22arg1%22%2C...Whydon%27ttheparts%28andJavageneratedfromthem%29usetheniceparameternamesItypedintotheinterfacedefinition%3F)

> **官方回答：** JAX-WS 规范（特别是第 3.6.1 节）要求以这种方式生成。要自定义名称，您必须使用 @WebParam(name = "blah") 注释来指定更好的名称。（您可以使用 @WebResult 作为返回值，但只有查看 XML 才能看到结果。）
> 
> **原因：** java 的奥秘之一是抽象方法（以及接口方法）即使有调试信息也不会将它们的参数名称编译到它们中。因此，当从接口构建服务模型时，无法确定原始代码中使用的名称。
> 
> 如果服务是从具体类（而不是接口）构建的，并且该类是使用调试信息编译的，我们可以获得参数名称。简单的前端就是这样做的。但是，这可能会导致潜在的问题。例如，当您从开发转到生产时，您可能会关闭调试信息（从 javac 标志中删除 -g），然后应用程序可能会突然中断，因为生成的 wsdl（并因此预期肥皂消息）会发生变化。因此，JAX-WS 规范编写者采取了安全路线，并要求您必须使用 @WebParam 注释来指定更具描述性的名称。

您可以尝试为每个字段添加一个[XmlElement](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlElement.html)注释并指定一个名称，但您确定这是由 JAXB 引起的吗？如果我使用您的 POJO 代码运行 schemagen，这就是我得到的（名称被正确提取）：

```
<xs:complexType name="user">
    <xs:sequence>
      <xs:element name="age" type="xs:int"/>
      <xs:element name="firstName" type="xs:string" minOccurs="0"/>
      <xs:element name="lastName" type="xs:string" minOccurs="0"/>
    </xs:sequence>
</xs:complexType> 
```

根据您的评论，如果您将 POJO “强制”为以下代码，您还会收到有关重复名称的投诉吗？

```
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlAccessType;

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
public class User {
    @XmlElement(name = "firstName")
    private String firstName;

    @XmlElement(name = "lastName")
    private String lastName;

    @XmlElement(name = "age")
    private int age;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
} 
```

# java - Android：TextView.setLayoutParams 有时有效，有时无效

> ID：11818105
> 
> 赞同：0
> 
> 时间：2012-08-05T16:31:05.003
> 
> 标签：java, android

我有一个 android 应用程序，可以让用户修改一些布局参数。我的功能之一是让用户决定 TextView 是否与图片的顶部或底部对齐。

这是功能：

```
private void setAlign(String align) {

    /* Get Preferences */
    SharedPreferences prefs = getSharedPreferences("prefs", Context.MODE_WORLD_READABLE);
    SharedPreferences.Editor editor = prefs.edit();

    editor.putString("align", align);
    editor.commit();

    Log.d("ALIGN", align);

    paramAlign = align;

    FrameLayout.LayoutParams floLP = new FrameLayout.LayoutParams(
                                            FrameLayout.LayoutParams.WRAP_CONTENT,
                                            FrameLayout.LayoutParams.WRAP_CONTENT,
                                            (align == "TOP") ? Gravity.TOP : Gravity.BOTTOM);

    txtGoal.setLayoutParams(floLP);

    int res = paramAlign == "TOP" ? R.drawable.btn_toolbar_align_top_up : R.drawable.btn_toolbar_align_bottom_up ;
    btnAlign.setImageResource(res);

} 
```

现在一旦活动开始，这个功能就可以正常工作了。但是，当我初始化活动时，我会在检索到对齐首选项后调用 onGlobalLayout 方法中的 setAlign() 函数。

这是相关代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.personalize);

    /* Get Preferences */
    SharedPreferences prefs = getSharedPreferences("prefs", Context.MODE_WORLD_READABLE);

    paramAlign = prefs.getString("align", "BOTTOM");

    Log.d("ALIGN", paramAlign);

    // Get screen dimensions and initialize preview
    ViewTreeObserver vto = rootView.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {

        setAlign(paramAlign);

        ViewTreeObserver obs = rootView.getViewTreeObserver();
            obs.removeGlobalOnLayoutListener(this);
        }

    });

} 
```

现在，如果您注意到日志记录功能，当我开始活动时，它们都会返回“TOP”。setAlign() 函数显然被调用了。然而，TextView 在底部对齐。这是 TextView 的 XML：

```
<TextView
                android:id="@+id/txtGoal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dip"
                android:textColor="@color/color_white"
                android:textSize="8sp"
                android:shadowColor="@color/color_black"
                android:shadowDx="1.2"
                android:shadowDy="1.2"
                android:shadowRadius="1.2"
                /> 
```

知道为什么在创建活动时 setLayoutParams 没有发生吗？绘制完布局后，该函数将被触发，因此这里不应该是问题。并且 XML 没有指定开始的重力。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:49:59.693

所以，这就是我发现的以及我为解决我的问题所做的事情。

显然条件

```
align == "TOP" 
```

活动开始时没有测试真实，尽管日志转储会告诉我当时它实际上是真实的。现在为什么这样做我不知道。这似乎是一个奇怪的错误。一旦活动运行，该条件测试为真。

由于这个参数只能有 2 个值，我将它切换到一个布尔变量，其中 false 现在相当于“BOTTOM”，而 true 相当于“TOP”，它工作得很好。

这实际上可能需要研究，因为在启动时应该测试为真。

** 编辑 **

您不能使用“==”运算符比较 java 中的 2 个字符串。您必须改用 .equals() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:47:58.503

首先，我看到变量 txtGoal 没有初始化（甚至没有声明），所以我假设你在其他地方做了那个（问题中没有发布）。

您遇到的行为非常正常：该功能仅在启动时工作，这是因为一旦您更改了文本视图的布局，您必须通过添加以下内容来表明它将被重绘：

```
txtGoal.invalidate (); 
```

在这之后 ：

```
txtGoal.setLayoutParams(floLP); 
```

* * *

编辑：

~~你也可以尝试用不同的方式改变重力：~~

 ~~```
txtGoal.setGravity ( Gravity.TOP ); 
```~~  ~~* * *

编辑：

抱歉，我的建议（第二种解决方案）是错误的，因为它改变了文本视图内文本的重力（而不是根视图内文本视图的重力）。

请尝试以下方法：

不要尝试使用监听器来修改文本视图的重力，您可以在设置活动的内容视图后直接应用您想要的重力（因为文本视图是这样创建的）。我建议如下：

检索共享首选项后，直接（而不是通过侦听器）将新布局应用于您的文本视图。

您的 onCreate 方法应类似于以下内容：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.personalize);

    /* Get Preferences */
    SharedPreferences prefs = getSharedPreferences("prefs", Context.MODE_WORLD_READABLE);

    paramAlign = prefs.getString("align", "BOTTOM");

    setAlign(paramAlign);

} 
```

* * *

您应该使用 equals 方法比较两个字符串：

替换那个：

```
(align == "TOP") 
```

就这样

```
align.equals ( "TOP" ) 
```

和这个 ：

```
paramAlign == "TOP" 
```

这样 ：

```
paramAlign.equals ( "TOP" ) 
```~~

# c# - AutoMapper 基于枚举映射到不同类型？

> ID：11818106
> 
> 赞同：6
> 
> 时间：2012-08-05T16:31:09.687
> 
> 标签：c#, automapper

我开始实现[AutoMapper](https://github.com/AutoMapper/AutoMapper)，首先我设法将它与我已经在使用的 Castle.Windsor 集成。现在我有一个`Post`实体，我想映射到 a`LinkPostModel`或 a `ImagePostModel`。两者都继承自`PostModel`

**1）**这是我到目前为止所拥有的：

```
public class PostModelFromPostEntityConverter : ITypeConverter<Post, PostModel>
{
    private readonly IPostService postService;

    public PostModelFromPostEntityConverter(IPostService postService)
    {
        if (postService == null)
        {
            throw new ArgumentNullException("postService");
        }
        this.postService = postService;
    }

    public PostModel Convert(ResolutionContext context)
    {
        Post post = (Post)context.SourceValue;
        Link link = post.Link;
        if (link.Type == LinkType.Html)
        {
            return new LinkPostModel
            {
                Description = link.Description,
                PictureUrl = link.Picture,
                PostId = post.Id,
                PostSlug = postService.GetTitleSlug(post),
                Timestamp = post.Created,
                Title = link.Title,
                UserMessage = post.UserMessage,
                UserDisplayName = post.User.DisplayName
            };
        }
        else if (link.Type == LinkType.Image)
        {
            return new ImagePostModel
            {
                PictureUrl = link.Picture,
                PostId = post.Id,
                PostSlug = postService.GetTitleSlug(post),
                Timestamp = post.Created,
                UserMessage = post.UserMessage,
                UserDisplayName = post.User.DisplayName
            };
        }
        return null;
    }
} 
```

显然，实现[AutoMapper](https://github.com/AutoMapper/AutoMapper)的重点是删除这样的重复代码，那么在添加自定义规则（例如 if 子句）之前，我应该如何映射常见的东西

理想情况下，我希望它是这样的：

```
public class PostModelFromPostEntityConverter : ITypeConverter<Post, PostModel>
{
    [...]

    public PostModel Convert(ResolutionContext context)
    {
        Post post = (Post)context.SourceValue;
        Link link = post.Link;
        if (link.Type == LinkType.Html)
        {
            return Mapper.Map<Post, LinkPostModel>(post);
            // and a few ForMember calls?
        }
        else if (link.Type == LinkType.Image)
        {
            return Mapper.Map<Post, ImagePostModel>(post);
            // and a few ForMember calls?
        }
        return null;
    }
} 
```

**2)**映射完成后。我有一个“父”映射，我需要在其中映射`IEnumerable<Post>`以下模型：

```
public class PostListModel : IHasOpenGraphMetadata
{
    public OpenGraphModel OpenGraph { get; set; } // og:model just describes the latest post
    public IList<PostModel> Posts { get; set; }
} 
```

所以基本上我需要另一个`TypeConverter` *（对吗？）*，它允许我首先映射帖子列表，然后创建`og:model`

我有这个，但感觉有点笨拙，我觉得它可能会更好：

```
public class PostListModelFromPostEntityEnumerableConverter : ITypeConverter<IEnumerable<Post>, PostListModel>
{
    public PostListModel Convert(ResolutionContext context)
    {
        IEnumerable<Post> posts = (IEnumerable<Post>)context.SourceValue;
        PostListModel result = new PostListModel
        {
            Posts = posts.Select(Mapper.Map<Post, PostModel>).ToList()
        };
        Post first = posts.FirstOrDefault();
        result.OpenGraph = Mapper.Map<Post, OpenGraphModel>(first);
        return result;
    }
} 
```

**3)**我还没有真正运行代码，所以我想到了另一个问题，那就是为什么在转换器中没有强类型化映射？

```
IEnumerable<Post> posts = (IEnumerable<Post>)context.SourceValue; 
```

它实际上可能在哪里

```
IEnumerable<Post> posts = context.SourceValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-24T19:31:41.037

试图获得死灵法师徽章。
如今，通过使用功能特定字段可以更轻松地解决此任务，`ConstructUsing`应在提供的操作中填写，但所有公共字段都将用于`ForMember`执行映射。在这种情况下，集合不需要任何额外的逻辑/映射配置。也具有类型集合属性的类。

```
cfg.CreateMap<Post, PostModel>()
    .ConstructUsing(p =>
    {
        switch (p.Type)
        {
            case LinkType.Html: return new LinkPostModel
            {
                Title = p.Description
                // other specific fields
            };
            case LinkType.Image: return new ImagePostModel
            {
                // other specific fields
            };
        }
        return null;
    })
    .ForMember(x => x.PostId, m => m.MapFrom(p => p.Id));
cfg.CreateMap<PostList, PostListModel>(); 
```

# c# - Protobuf-Net 扩展方法不断抛出异常

> ID：11818109
> 
> 赞同：1
> 
> 时间：2012-08-05T16:32:00.370
> 
> 标签：c#, serialization, .net-4.0, protobuf-net

我在 VS2010 中使用 .Net 4 设置创建了一个示例应用程序。我正在尝试 ProtoBuf-Net 扩展方法。但是，无论何时，我尝试调用 GetValue 扩展，它都会抛出一个异常说

```
Method or operation is not implemented 
```

堆栈跟踪：

```
 at ProtoBuf.ExtensibleUtil.GetExtendedValues[TValue](IExtensible instance, Int32 tag, DataFormat format, Boolean singleton, Boolean allowDefinedTag)
   at ProtoBuf.Extensible.TryGetValue[TValue](IExtensible instance, Int32 tag, DataFormat format, Boolean allowDefinedTag, TValue& value)
   at ProtoBuf.Extensible.TryGetValue[TValue](IExtensible instance, Int32 tag, DataFormat format, TValue& value)
   at ProtoBuf.Extensible.GetValue[TValue](IExtensible instance, Int32 tag, DataFormat format)
   at ProtoBuf.Extensible.GetValue[TValue](IExtensible instance, Int32 tag)
   at PhoneBookData.PhoneBookSerializer.Serialize(PhoneBookProto phData) in E:\project\PhoneBook\Source\PhoneBookData\PhoneBookSerializer.cs:line 14
   at ConsoleApplication1.Program.Main(String[] args) in E:\project\PhoneBook\Source\ConsoleApplication1\Program.cs:line 23
   at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

下面是我的带有扩展支持的 Proto 类。

```
[ProtoContract]
public class PhoneBookProto : Extensible
{
    [ProtoMember(1, IsRequired=true)]
    public string Name { get; set; }
    [ProtoMember(2)]
    public string Email { get; set; }
    [ProtoMember(3)]
    public AddressProto Address { get; set; }
    [ProtoMember(4,IsRequired=true)]
    public string PhoneNumber { get; set; }
}

[ProtoContract]
public class AddressProto
{
    [ProtoMember(1)]
    public string Line1 { get; set; }
    [ProtoMember(2)]
    public string Line2 { get; set; }
} 
```

我究竟做错了什么。我参考了可供下载的最新 protobuf 版本 (561)。下面是我的代码，它不断崩溃。

```
Extensible.AppendValue<int>(phData, 5, 10);
Extensible.GetValue<int>(phData, 5); 
```

**编辑** 其他旧版本的 protobuf 也给了我同样的例外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:37:23.050

确实。扩展数据是自 v2 重写以来丢失的最后一部分。正如您所看到的，它是[路线图上的下一个](https://trello.com/board/protobuf-net-road-map/500900581f3aedaf06ded6ca)，但实际上（时间可用性等）我必须首先优先考虑最常见的 .NET 方案。扩展数据根本不是最常见的用法。V1 具有完整的扩展数据 API，并且 r280 (IIRC) 仍然可用。

一旦我开始研究这个，我不认为（之前写过一次）它是一项巨大的工作，所以我希望它很快就会在构建中。

* * *

编辑：这应该从 r565 开始可用

# ember.js - Ember.js：Handlebars 不显示任何内容

> ID：11818116
> 
> 赞同：2
> 
> 时间：2012-08-05T16:33:00.890
> 
> 标签：ember.js

```
/app.js    
var Welcome = Ember.Application.create({});

Welcome.person = Ember.View.extend({
    personName: 'Andrew'
}); 
```

这是 index.html 的内容，是视图的一部分：

```
/index.html
<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]--> <!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]--> <!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]--> <!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<script type="text/x-handlebars">
  {{personName}}
</script>

<script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
<script src="js/libs/ember-1.0.pre.min.js"></script>
<script src="js/app.js"></script>
</body>
</html> 
```

我的问题是为什么它不显示任何东西？它不应该渲染的内容`personName`吗？

**更新：**

我正在使用 Ember 的入门套件。它已经定义了一个视图。我刚刚向对象添加了一个属性，但视图仍然看不到它。

```
App.MyView = Em.View.extend({
  mouseDown: function() {
    window.alert("hello world!");
  },
  name: 'Andrew'
}); 
```

.html 中的视图部分是：

```
<script type="text/x-handlebars">
    {{#view App.MyView}}
      <h1>Hello world {{name}}!</h1>
    {{/view}}
  </script> 
```

由于活动有效，该名称不应该是可访问的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T16:39:26.533

从 1.0 开始，视图保留了它们的上下文。

```
VIEW CONTEXT CHANGES

In apps built on earlier version of Ember (before 1.0), the {{#view}} helper
created a new context for the view. This meant that you had to explicitly set the
context on them.

In 1.0, we've  made this a bit simpler. The {{#view}} helper no longer changes
the context, instead  maintaining the parent context by default. Alternatively,
we will use the controller  property if provided. You may also choose to directly
overridethe context property. The order is as follows:

Specified controller
Supplied context (usually by Handlebars)
parentView's context (for a child of a ContainerView)
In the event that you do need to directly refer to a property on the view, you
can use the view keyword, i.e. {{view.myProp}}.

So, for your example, tou have to use {{view.name}}

<script type="text/x-handlebars">
  {{#view App.MyView}}
    <h1>Hello world {{view.name}}!</h1>
  {{/view}}
</script> 
```

# vb.net - VB.NET 属性作为 StringDictionary？

> ID：11818117
> 
> 赞同：2
> 
> 时间：2012-08-05T16:33:17.297
> 
> 标签：vb.net, properties, stringdictionary

我正在尝试创建一个类型为 StringDictionary 的新属性，但是当我使用该属性（如 stringdictionary 变量）时出现错误。目标是不使用变量，我需要为此使用属性。在幕后，我将 stringdictionary 值保存到全局用户 ID 索引集合中。这是创建属性并尝试获取和设置的代码：

```
Public Property MaxLenDict As StringDictionary()
    Get
        Return GetFromCollection("MaxLenDict")
    End Get
    Set(Value As StringDictionary())
        SaveToCollection("MaxLenDict", Value)
    End Set
End Property

Public Sub ExampleSub()
    If MaxLenDict("hello world") = "" Then MaxLenDict.Add("Hello World", "I'm Here")
End Sub 
```

在此代码的 IF 语句中的 ExampleSub "StringDictionary cannot be converted to string" 中出现此错误：

```
MaxLenDict("hello world")="" 
```

那么如何成功地制作和使用属性作为字符串字典呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:46:53.773

您的属性是类型`StringDictionary()`（数组！），而不是`StringDictionary`.

不过，我不确定`StringDictionary`首先建议使用。该类只是 .NET 的前泛型版本的残余。改为使用`Dictionary(Of String, String)`。

# ruby-on-rails - Rails Kaminari - 如何对数组进行排序/分页？

> ID：11818118
> 
> 赞同：7
> 
> 时间：2012-08-05T16:33:18.613
> 
> 标签：ruby-on-rails, pagination, kaminari

我正在关注 Kaminari 的 railscast (http://railscasts.com/episodes/254-pagination-with-kaminari)。但我坚持使用控制器部分。

在我的控制器中，我有这样的东西：

```
def index
  @articles = (params[:mine] == "true") ? current_user.articles : Article.search(params[:search])

  respond_to do |format|
    format.html
    format.json { render json: @articles }
  end
end 
```

现在我不确定如何链接方法、顺序、页面和每个，就像在截屏视频中一样`.order("name").page(params[:page]).per(5)`。我继续在 Array 中获取 no 方法“order”。我知道我不能调用数组上的方法，但我还能如何链接它们？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-05T16:36:24.583

您可以在数组上使用 Kaminari：

```
Kaminari.paginate_array(@articles).page(params[:page]).per(5) 
```

从[文档](https://github.com/amatsuda/kaminari)中：

> Kaminari 提供了一个 Array 包装类，该类将通用 Array 对象适配到`paginate`视图助手。但是，`paginate`帮助程序不会自动处理您的 Array 对象（这是有意和设计的）。`Kaminari::paginate_array`方法将您的 Array 对象转换为接受`page`方法的可分页数组。

# html - 使用 Perl 从目录中的文件中剥离 HTML

> ID：11818123
> 
> 赞同：0
> 
> 时间：2012-08-05T16:34:19.620
> 
> 标签：html, perl

几天前我问了一个关于使用 PERL 从文件中剥离 HTML 的问题。我是 n00b 并且我已经在网站上搜索了我的问题的答案...但不幸的是我找不到任何东西...这可能是因为我是 n00b 并且当我是时我没有看到答案看着它。

所以，情况就是这样。我有一个包含大约 20 GB 文本文件的目录。我想从每个文件中剥离 HTML 并将每个文件输出到一个唯一的文本文件。我已经编写了下面的程序，它似乎可以解决目录中的前 12 个文本文件（总共大约 12,000 个文本文件）......但是......我遇到了一些障碍。第一个问题是，在解析第 12 个文本文件之后，我开始收到有关深度递归的警告……然后不久程序就退出了，因为我的内存不足。我想我的编程效率极低。所以，我想知道你们中是否有人看到我的代码有任何明显的错误，这会导致我内存不足。...一旦我弄清楚了，希望我能做出贡献。

```
#!/usr/bin/perl -w
#use strict;
use Benchmark;
#get the HTML-Format package from the package manager.
use HTML::Formatter;
#get the HTML-TREE from the package manager
use HTML::TreeBuilder;
use HTML::FormatText;
$startTime = new Benchmark;
my $direct="C:\\Directory";
my $slash='\\';

opendir(DIR1,"$direct")||die "Can't open directory";
my @New1=readdir(DIR1);

foreach $file(@New1)
{

if ($file=~/^\./){next;}
#Initialize the variable names.
my $HTML=0;
my $tree="Empty";
my $data="";
#Open the file and put the file in variable called $data

{
    local $/;
    open (SLURP, "$direct$slash"."$file") or die "can't open $file: $!"; 
    #read the contents into data
    $data = <SLURP>; 

    #close the filehandle called SLURP
    close SLURP or die "cannot close $file: $!";
    if($data=~m/<HTML>/i){$HTML=1;}
    if($HTML==1)
        {
            #the following steps strip out any HTML tags, etc.
            $tree=HTML::TreeBuilder->new->parse($data);
            $formatter=HTML::FormatText->new(leftmargin=> 0, rightmargin=>60);
            $Alldata=$formatter->format($tree); 
        }
}
#print
my $outfile = "out_".$file;
open (FOUT, "> $direct\\$outfile");
print FOUT "file: $file\nHTML: $HTML\n$Alldata\n","*" x 40, "\n" ;
close(FOUT);

}

$endTime = new Benchmark;
$runTime = timediff($endTime, $startTime);
print ("Processing files took ", timestr($runTime)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:50:11.160

您在`@New1`.

此外，如果您使用的是旧版本，`HTML::TreeBuilder`则此类的对象可能需要明确删除，因为它们曾经不受自动 Perl 垃圾收集的影响。

这是一个避免这两个问题的程序，通过增量读取目录，并通过使用`HTML::FormatText->format_string`格式化文本，隐式删除`HTML::TreeBuilder`它创建的任何对象。

此外，[`File::Spec`](https://www.metacpan.org/module/File%3a%3aSpec)构建绝对文件路径的工作更加整洁，它是一个核心模块，因此不需要在您的系统上安装

```
use strict;
use warnings;

use File::Spec;
use HTML::FormatText;

my $direct = 'C:\Directory';

opendir my $dh, $direct or die "Can't open directory";

while ( readdir $dh ) {

  next if /^\./;

  my $file = File::Spec->catfile($direct, $_);
  my $outfile = File::Spec->catfile($direct, "out_$_");
  next unless -f $file;

  my $html = do {
    open my $fh, '<', $file or die qq(Unable to open "$file" for reading: $!);
    local $/;
    <$fh>;
  };

  next unless $html =~ /<html/i;

  my $formatted = HTML::FormatText->format_string(
      $html, leftmargin => 0, rightmargin => 60);

  open my $fh, '>', $outfile or die qq(Unable to open "$outfile" for writing: $!);

  print $fh "File: $file\n\n";
  print $fh "$formatted\n";
  print $fh "*" x 40, "\n" ;

  close $fh or die qq(Unable to close "$outfile" after writing: $!);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:29:22.337

*你[上一个](https://stackoverflow.com/a/11780948/1521179)问题的答案有什么问题？*

您在不检查返回码的情况下打开文件进行写入。你确定成功了吗？您在哪个目录中创建文件？

更好的方法是：

*   逐个读取文件
*   剥离 HTML
*   *在正确的目录中*写出新文件并检查*返回码*

就像是：

```
while ( my $file = readdir DIR ) {

    ....process file

    open my $newfile, '>', "$direct/out_$outfile" or die "cannot open $outfile: $!\n";

   ... etc
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:06:21.657

## 如何减少此应用程序的内存占用：

当您添加`$tree = $tree->delete`到循环的末尾时，问题是否仍然存在？

perl 垃圾收集器无法解析循环引用；所以你必须手动销毁树，这样你就不会耗尽内存。

（参见[http://metacpan.org/pod/HTML::TreeBuilder](http://metacpan.org/pod/HTML::TreeBuilder)的模块文档中的第一个示例）

你应该把`readdir`里面的循环。按照您的编码方式，您首先阅读了这个巨大的文件列表。当你说

```
my $file;
while (defined($file = readdir DIR1)) {..} 
```

一次实际上只读取一个条目。应该节省一些额外的内存。

## 关于风格的其他一些评论：

### 默认值

你给`$tree`的默认值`"Empty"`。这是完全没有必要的。如果要显示变量的未定义程度，请将其设置为`undef`，默认情况下为 。Perl 保证这种初始化。

### 反斜杠

您使用反斜杠作为目录分隔符？不用担心，只需使用正常的斜线即可。除非您在 DOS 上，否则您也可以使用普通斜杠，Windows 并不是那么愚蠢。

### 语句修饰符

这条线

```
if ($file=~/^\./){next;} 
```

可以写成更具可读性

```
next if $file =~ /^\./; 
```

### 随后使用括号

您对函数参数列表使用括号是无关紧要的。除非有歧义，否则您可以省略所有内置函数的括号。我更喜欢避开它们，其他人可能会发现它们更容易阅读。但请坚持一种风格！

### 更好的正则表达式

您测试`/<HTML>/i`. 如果我告诉你`html`标签可以有属性怎么办？您应该考虑测试`/<html/i`.

### 简化（删除另一个错误）

你的测试

```
if($data=~m/<HTML>/i){$HTML=1;}
if($HTML==1) {...} 
```

可以写成

```
$HTML = $data =~ /<html/i;
if ($HTML == 1) {...} 
```

可以写成

```
$HTML = $data =~ /<html/i
if ($HTML) {...} 
```

可以折叠成

```
if ($data =~ /<html/i) {...} 
```

您实现它的方式，该`$HTML`变量从未重置为*错误*值。因此，一旦文件包含 html，所有后续文件也将被视为 html。您可以通过在最内部合理的范围内定义您的变量来解决此类问题。

### 使用 HTML::FormatText，致敬@pavel

充分利用您使用的模块。看看我在示例中找到的内容`HTML::FormatText`：

```
my $string = HTML::FormatText->format_file(
           'test.html',
           leftmargin => 0, rightmargin => 50
           ); 
```

您可以轻松地调整它以规避手动构建树。你为什么不尝试这种方法，就像@pavel 在[你的另](https://stackoverflow.com/a/11780948/1521179)一篇文章中告诉你的那样？本来可以为您节省内存问题...

### 使用严格

你为什么评论出来`use strict`？在学习一门语言时，尽可能多地获得致命警告很重要。或者在编写可靠的代码时。这将迫使您`$file`明智地声明所有变量。而`use warnings`不是`-w`开关，这有点过时了。

### 做得好

但是在检查`close`;-) 的返回值方面做得非常好，这非常不合时宜！

# ruby-on-rails - 堆栈级别太深 - 使用 Rake 时

> ID：11818125
> 
> 赞同：0
> 
> 时间：2012-08-05T16:34:52.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, rvm

当我尝试执行耙子时，我得到以下信息。我已经尝试了一些修复，比如内爆和重新安装我的 rvm - ruby​​ (v1.9.3-p125)，但似乎没有任何效果。有任何想法吗？

```
rake db:seed --trace
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
rake aborted!
stack level too deep
/Users/rm/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:162
Tasks: TOP => db:seed 
```

如果我尝试运行 rake db:reset --trace

```
-- initialize_schema_migrations_table()
   -> 0.0025s
-- assume_migrated_upto_version(20120803181844,       ["/Users/rossmcnairn/rails/search/db/migrate"])
   -> 0.0218s
** Invoke db:structure:load_if_sql (first_time)
** Invoke db:create 
** Execute db:structure:load_if_sql
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment 
** Execute db:abort_if_pending_migrations
rake aborted!
stack level too deep
/Users/rossmcnairn/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:162
Tasks: TOP => db:setup => db:seed 
```

我检查了我的 bundle exec 版本和我的常规 rake 版本是否匹配。

```
rake --version
rake, version 0.9.2.2

bundle exec rake --version
rake, version 0.9.2.2 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:37:19.277

更新 OSX 会导致 rubies 出现问题，您应该重新编译所有 rubies：

```
chown -R $USER: $rvm_path
rvm get head
rvm reinstall 1.9.3-p125
rvm all-gesmsets do rvm gemset pristine 
```

另请注意，任何其他编译的东西（如库）都需要重新编译，包括 homebrew、macport`rvm pkg`和您手动编译的任何包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T17:26:52.610

这可能很明显，但我花了几个小时。我无意中为模型创建了一个名为 的类方法`create`，它与 ActiveRecord 相同`create`。所以我的种子文件有循环引用。

我只是一直盯着种子文件，想知道为什么我之前能够运行它两次（在添加类方法之前）却得到错误。故事的寓意：命名很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:12:31.710

```
** Execute db:abort_if_pending_migrations
rake aborted! 
```

您是否尝试运行迁移？

# java - JAXB 内容未实例化

> ID：11818127
> 
> 赞同：2
> 
> 时间：2012-08-05T16:35:21.027
> 
> 标签：java, jaxb

好吧，我不知所措。我在这一行上有一个空指针：

```
 JAXBContext             context         = JAXBContext.newInstance( X3D.class ); 
```

这是输出错误：

```
Exception in thread "main" java.lang.NullPointerException
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.checkOverrideProperties(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.SingleElementNodeProperty.<init>(Unknown Source)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementProperty.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementNodeProperty.<init>(Unknown Source)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.SingleElementNodeProperty.<init>(Unknown Source)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(Unknown Source)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.xml.bind.ContextFinder.newInstance(Unknown Source)
    at javax.xml.bind.ContextFinder.newInstance(Unknown Source)
    at javax.xml.bind.ContextFinder.find(Unknown Source)
    at javax.xml.bind.JAXBContext.newInstance(Unknown Source)
    at javax.xml.bind.JAXBContext.newInstance(Unknown Source)
    at com.prim.esaa.gui.x3d.MyXmlWriter.myWriteFile(MyXmlWriter.java:159)
    at com.prim.esaa.gui.x3d.MyXmlWriter.myWrite(MyXmlWriter.java:199)
    at com.prim.esaa.gui.x3d.Sim3DAnimator.writeXMLoutput(Sim3DAnimator.java:266)
    at com.prim.esaa.gui.x3d.Sim3DAnimator.initModels(Sim3DAnimator.java:212)
    at com.prim.esaa.gui.x3d.Sim3DAnimator.main(Sim3DAnimator.java:141) 
```

我意识到并不是所有的代码都在那里，我可以添加更多，但如果我理解正确，这个命令会设置东西并且完全不依赖于我的任何其他变量。它正在工作，然后就停止了。我不知道为什么。

它一遍又一遍地说“未知来源”，但我包含了路径和 X3D 类，所以它应该没问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:56:59.490

尝试另一个版本的 JAXB，看看[http://java.net/jira/browse/JAXB-860](http://java.net/jira/browse/JAXB-860)

# openafs - 警告：监听端口 52698 的远程端口转发失败

> ID：11818131
> 
> 赞同：50
> 
> 时间：2012-08-05T16:35:50.647
> 
> 标签：openafs

我正在使用 SSH 访问我大学的 afs 系统。我喜欢使用 rmate（远程 TextMate），它需要 SSH 隧道，所以我在我的`.bashrc`.

```
alias sshr=ssh -R 52698:localhost:52698 username@corn.myschool.edu 
```

它一直有效到现在。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-29T23:54:44.877

我有同样的问题。为了找到已经打开的端口，您必须在“corn.myschool.edu”计算机上发出以下命令：

```
sudo netstat -plant  | grep 52698 
```

然后杀死所有提出这个的进程（用进程ID替换xxxx）

```
sudo kill -9 xxxx 
```

（更新：将选项更改`-plant`为很好的助记符）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-05T16:39:14.767

I had another SSH connection open. I just needed to close that connection before I opened my SSH tunnel.

**Further Explanation:** Once one ssh connection has been established, subsequent connections will produce a message:

> Warning: remote port forwarding failed for listen port 52698

This message is harmless, as the forward can only be set up once and one forward will work for all ssh connections to the same machine. The original ssh session that opened the forward will stay open when you exit the shell until all remote editing sessions are finished.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-27T18:28:32.083

这也解决了我在这里报告的问题。为避免此通知，应在 SSH 配置中启用“AllowTcpForwarding”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-18T13:46:10.110

我遇到了这个问题，但它是在连接到我没有 sudo 权限的服务器时，所以建议运行的最高响应`sudo netstat ...`对我来说是不可行的。

我最终发现这是因为仍然有 rmate 的实例在运行，所以我曾经`ps`列出正在运行的进程，然后`kill -9 pid`（其中 pid 是 rmate 的进程 ID）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-26T09:10:15.420

就我而言，问题在于远程系统没有正确设置 DNS，甚至无法解析自己的主机名。确保您在远程系统的 /etc/resolv.conf 中有一个可用的 DNS。

# python - 我可以向 SQLAlchemy 中的模型添加一个在删除项目时触发的事件吗？

> ID：11818135
> 
> 赞同：2
> 
> 时间：2012-08-05T16:36:08.720
> 
> 标签：python, sqlalchemy

在我的应用程序中，可以通过两种方式删除表“文件”中的行。直接，喜欢`session.delete(file)`或作为级联删除的结果。当行被删除时，我想从我的文件系统中删除该文件，即数据库行所代表的文件。有什么办法可以做到吗？

我的模型如下所示：

```
class File(ModelBase):
    """Model for the 'files' table.

    This table holds data about uploaded files.
    """

    __tablename__ = 'files'

    # Columns
    id = Column(INTEGER, primary_key=True)
    uploaded_by_id = Column(INTEGER, ForeignKey(User.__tablename__ + '.id'),
                            nullable=False)
    path = Column(VARCHAR(255), nullable=False) # The file's name on the server
    name = Column(VARCHAR(255), nullable=False) # The original file name
    mime = Column(VARCHAR(75))
    size = Column(INTEGER, nullable=False)   # File size in bytes
    uploaded_at = Column(DATETIME, nullable=False)

    # Relationships
    uploaded_by = relationship('User', backref='files_uploaded')

    def __init__(self, uploaded_by, path, name):

        with ProjectRootContext():
            self.uploaded_by = uploaded_by
            self.path = path
            self.name = name
            self.mime = mimetypes.guess_type(path)[0]
            self.size = os.path.getsize(path)
            self.uploaded_at = datetime.now()

    def __repr__(self):
        return '<File(id=%s,name=%s)>' % (repr(self.id), repr(self.name))

    # Factory function for saving an uploaded file
    @classmethod
    def from_fieldstorage(cls, uploaded_by, fieldstorage):
        # ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:32:38.037

您是否尝试过[after_delete 映射器事件](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=events#sqlalchemy.orm.events.MapperEvents.after_delete)？

# macos - 如何判断用户何时在 NSTextView 中选择文本

> ID：11818139
> 
> 赞同：1
> 
> 时间：2012-08-05T16:36:40.077
> 
> 标签：macos, nstextview

我有一个`NSTextView`并且希望能够知道用户何时突出显示（选择）文本的一部分，以便我可以对其进行更改。该`NSTextViewDelegate`协议似乎没有为此的方法。有没有办法捕捉这个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:38:02.770

你确定`- (void)textViewDidChangeSelection:(NSNotification *)aNotification`不做这个伎俩？它是`NSTextViewDelegate`（[参考](http://developer.apple.com/library/mac/documentation/cocoa/Reference/NSTextViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTextViewDelegate/textViewDidChangeSelection%3a)）的一部分。如果它不能按照您想要的方式工作，您具体在寻找什么？

# .net - Azure Blob 存储引发 StorageClientException：“其中一个请求输入超出范围”

> ID：11818141
> 
> 赞同：1
> 
> 时间：2012-08-05T16:36:55.063
> 
> 标签：.net, azure, azure-blob-storage

尝试从在云服务 Web 角色中运行的 Azure 存储帐户读取会引发

```
[StorageClientException: One of the request inputs is out of range.]
Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result() +96
Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait() +271
Microsoft.WindowsAzure.StorageClient.CloudBlobContainer.SetPermissions(BlobContainerPermissions permissions, BlobRequestOptions options) +229 
```

我在该主题上找到的所有文章都表明问题出在存储连接字符串或 blob 容器名称中的大写字母。

这是代码：

```
var cloudStorageAccount = CloudStorageAccount.FromConfigurationSetting(StorageConnectionStringConfigKey);
var blobClient = cloudStorageAccount.CreateCloudBlobClient();
var blobContainerName = "containername";
var blobContainer = blobClient.GetContainerReference(blobContainerName.ToLower(CultureInfo.InvariantCulture));
var permissions = new BlobContainerPermissions { PublicAccess = BlobContainerPublicAccessType.Container };
blobContainer.SetPermissions(permissions);
var blobName = "SomeXmlFile.xml";
var blob = blobContainer.GetBlobReference(blobName);
var text = blob.DownloadText(); 
```

在 blobContainer.SetPermissions 处引发异常。

当使用来自计算模拟器而不是来自实时 Web 角色的相同代码和相同凭据访问相同容器时，一切正常。从 Neudesic 的 Azure 存储资源管理器中读取 blob 容器也没有问题。

可能相关：我的本地环境只有 2012 年 6 月的 Azure SDK（版本 1.7）。此外，我最近将应用程序从 1.0.8 升级到 Postmark 1.0.14，以及它的依赖项 Newtownsoft Json.NET（从 4.0 升级到 4.5.8）。

我将逐行构建一个应用程序，没有包，只是为了测试连接，然后添加包。

*有没有人在他们绝对确定*所有凭据和标识符字符串都是正确的小写字母时见过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:05:17.600

哇，我是不是傻了。

问题原来是这样的：我有两个设置：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="Cloud" ...>
  <WebRole name="WebRole" vmsize="Small">
    <ConfigurationSettings>
      <Setting name="MessagesConfigurationBlobName" />
      <Setting name="MessagesConfigurationBlobContainerName" />
    </ConfigurationSettings>
  </WebRole>
</ServiceDefinition> 
```

这是本地（模拟器）配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceConfiguration ...>
  <Role name="WebRole">
    <ConfigurationSettings>
      <Setting name="MessagesConfigurationBlobName" value="LocalMessageConfig.xml"/>
      <Setting name="MessagesConfigurationBlobContainerName" value="containername"/>
    </ConfigurationSettings>
  </Role >
</ServiceConfiguration> 
```

这是云文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceConfiguration ...>
  <Role name="WebRole">
    <ConfigurationSettings>
      <Setting name="MessagesConfigurationBlobName" value="containername" />
      <Setting name="MessagesConfigurationBlobContainerName" value="CloudMessageConfig.xml"/>
    </ConfigurationSettings>
  </Role >
</ServiceConfiguration> 
```

现在我会大哭一场，并将我的时间跟踪（周六凌晨 3 点）从“紧急客户工作”调整为“开发人员 PEBCAK”。

这个故事的寓意是，当相同的代码在一个环境中失败而在另一个环境中成功时，不要只是比较环境，而是比较环境之间*您自己的代码中可能不同的所有内容*。

哦，不要尝试在凌晨 3 点部署软件。曾经。

# excel - Excel条形图

> ID：11818142
> 
> 赞同：1
> 
> 时间：2012-08-05T16:36:58.687
> 
> 标签：excel, charts

我正在尝试制作一个堆叠的 100% excel 图表，其中每个系列的填充颜色相同，并且边框（不同颜色）仅位于框的顶部。如果我选择编辑边框，我看到的唯一选项是允许我为系列制作整个边框；即顶部、底部和侧面。谁能建议我如何只在顶部有边框？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:42:33.143

您不能有选择地格式化 Excel 图表中条形的边缘。

您可以添加另一个具有较小值的系列（例如总数的 0.1%）。这不会有一个可填充的矩形，但它仍然有一个可以格式化的边框。

# css - 我的背景怎么是透明的？

> ID：11818145
> 
> 赞同：0
> 
> 时间：2012-08-05T16:37:21.363
> 
> 标签：css

我有 2 个带有容器 div 的 div。我将容器的背景颜色设置为白色，并且没有为其他 2 个 div 设置颜色。由于容器的颜色，期待看到白色背景，但一切都是透明的。正常吗？看起来容器的颜色没有被考虑在内。Tks [http://jsfiddle.net/Grek/svt2s/](http://jsfiddle.net/Grek/svt2s/)

CSS

```
#team-container
{
    width:960px;
    background-color:#FFFFFF;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=83)";
    filter: alpha(opacity=83);
    opacity: 0.83; /* For IE8 and earlier */
    margin-left: auto;
    margin-right: auto;
    background: #fff;
}

#team-left {
color:#000;
padding-left:20px;
padding-top:20px;
/* padding:15px;*/
width: 30%; 
float: left;
position: relative; 
}

#team-right { 
font:12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
font-weight:400;
padding-left:25px;
padding-top:28px;
color:#000;
width: 60%; 
float: left;
position: relative; 
text-align:justify;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:39:56.457

背景颜色和不透明度不是可继承的属性。如果您没有为任何特定元素/选择器定义它，它将不会被设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:07:00.273

父元素必须包含其浮动子元素，否则父元素不会占用布局中的任何空间（出于布局目的，它的高度为 0）。这就是为什么你没有看到父母的白色背景。

您可以通过以下两种方式之一来包含浮动的孩子（两者都完成同样的事情）：

**清除修复**

```
.clearfix {...}   /* Insert standard clearfix code here */
...
<div id="team-container class="clearfix">
    <div id="team-left"></div>
    <div id="team-right"></div>
</div> 
```

**清除 div**

```
.clear {clear:both;}
...
<div id="team-container">
    <div id="team-left"></div>
    <div id="team-right"></div>
    <div class="clear"></div>
</div> 
```

[修改后的演示](http://jsfiddle.net/svt2s/2/)，具有清晰的 div 和浅灰色背景。

使用 clearfix 和浅灰色背景[修改的演示。](http://jsfiddle.net/svt2s/3/)

# java - 从 Hashmap 打印特定记录

> ID：11818148
> 
> 赞同：0
> 
> 时间：2012-08-05T16:38:11.067
> 
> 标签：java, hashmap, tostring, println

我有一个 Hashmap，我正在努力研究如何打印单个键和值。我可以打印所有这些，但想知道如何只打印其中一个谢谢

```
import java.util.HashMap;

public class Coordinate {

static class Coords {
    int x;
    int y;

    public boolean equals(Object o) {
        Coords c = (Coords) o;
        return c.x == x && c.y == y;
    }

    public Coords(int x, int y) {
        super();
        this.x = x;
        this.y = y;
    }

    public int hashCode() {
        return new Integer(x + "0" + y);
    }

    public String toString()
    {
        return x + ";" + y;
    }

}

public static void main(String args[]) {

    HashMap<Coords, String> map = new HashMap<Coords, String>();

    map.put(new Coords(65, 72), "Dan");

    map.put(new Coords(68, 78), "Amn");
    map.put(new Coords(675, 89), "Ann");

    System.out.println(map.size());
    System.out.println(map.toString());

}
} 
```

此刻它显示

```
3
{65;72=Dan, 68;78=Amn, 675;89=Ann} 
```

但希望它只是显示

```
65;72=Dan 
```

谢谢你看

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:42:23.690

该`Map.get(K)`方法允许您检索所需键的值。所以你可以这样做：

```
Coords c = new Coords(65,72);
System.out.println(c + " -> " + map.get(c)); 
```

这适用于任何类型的 Map，包括 HashMap 和 TreeMap。您还可以使用 获取地图中所有键的集合`Map.keySet()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:42:09.263

只需派生`HashMap`并覆盖其`toString`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:42:43.530

您想要调用哈希映射的特定行为。哈希映射的默认和通用行为是打印所有元素。如果您想要特定行为，最好将其包装在您自己的类中并提供自定义 toString 实现。此外，您为什么不考虑在从地图中检索特定元素后将其打印下来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T16:46:57.977

我认为您必须拥有它，看起来更系统（键将是唯一的）：

```
HashMap<String, Coords> map = new HashMap<String, Coords>();    
map.put("Dan", new Coords(65, 72));
map.put("Amn", new Coords(68, 78));
map.put("Ann", new Coords(675, 89)); 
```

然后对于您必须执行的特定值`System.out.println(map.get("Dan").toString());`，它将返回坐标

更新：根据您的代码，它将是：

`System.out.println(new Coords(x, y) + "=" + map.get(new Coords(x, y)));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T16:50:26.017

Map 有一个名为 get() 的方法，它可以接受一个键。对于给定的坐标，将调用 equals 和 hashcode 方法来查找匹配值。使用此方法。

PS：您的 equals 方法始终假定要与之比较的对象是 Coords，但情况可能并非如此。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-16T14:40:45.477

我认为在这里您可以只使用 map.get(key) 方法来提取值。如果您需要正式外观以外的精美外观，请覆盖类中的 toString() 方法。

# ruby-on-rails - 在一页上显示所有结果 (gem kaminari)

> ID：11818158
> 
> 赞同：7
> 
> 时间：2012-08-05T16:39:26.770
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, navigation, kaminari

我有数据，它们在某些页面上被剪切（每页 10 个结果）。

控制器中的代码：

```
@messages = Message.order('id DESC').page params[:page] 
```

如果我愿意，如何在一页上显示所有结果？它类似于`'see all'`页面导航。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T17:09:53.807

如果您仍然希望分页助手在您的视图中工作，您可以在 per_page 选项中设置一个非常高的限制。

```
@messages = Message.order('id DESC').page params[:page]
if params[:all]
  @messages = @messages.per_page(Message.count) # you can also hardcod' it
end 
```

# domain-driven-design - could domain models be aware of repositories?

> ID：11818160
> 
> 赞同：5
> 
> 时间：2012-08-05T16:39:49.687
> 
> 标签：domain-driven-design, ddd-repositories

May be for some domain logic implementation entities need access to repo for update/delete of self or any related entity. Does this sound right ??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:38:58.753

不，它没有，至少对于带有*“领域驱动设计”*标签的问题。当然，Active Record 模式有权存在于某些系统中，并且有些人发现强耦合很有用，但在 DDD 中建议的方式是显式使用存储库：

> *Evans DDD，p.152*：对于需要全局访问的每种类型的对象，创建一个对象，该对象可以提供该类型所有对象的内存集合的错觉。«...» 仅为实际需要直接访问的聚合根提供存储库。让客户专注于模型，委托所有对象存储和对存储库的访问。

因此，在 DDD 中，存储库不仅封装了访问数据库所需的基础架构代码，还封装了必须存储和加载对象的整个想法。

如果您正在执行一些涉及从数据库保存和加载的复合操作，那么具有对*存储库*的引用的*服务*是最佳候选者。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:34:44.427

虽然实体能够访问自己的存储库以存储或删除*自己*肯定听起来很危险（请参阅[持久性无知](https://web.archive.org/web/20120421125944/http://thinkddd.com/glossary/persistence-ignorance/)），但在某些特定情况下，我可以容忍实体异常地从存储库请求*另一个*聚合根，它没有已经持有参考。

但是，请注意，域实体应该只知道存储库的*抽象*（即驻留在域层中的接口），而不是它们的具体实现。因此，不要让域层引用基础设施层，而是在运行时在需要它们的地方注入具体存储库的实例。

无论如何，这不应该成为常态。*

# javascript - Weird offset in jquery ui draggable

> ID：11818164
> 
> 赞同：5
> 
> 时间：2012-08-05T16:40:34.517
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-draggable

I've got a main div, 150px wide by 500px tall, with an overflow of auto (or scroll) which is holding a bunch of images, thus:

```
<div id="images" style="width: 150px; height: 500px; overflow: scroll;">
    <img src="images/swift1.jpg" style="width: 150px; height: 150px;" />
    <img src="images/swift2.jpg" style="width: 150px; height: 150px;" />
    <img src="images/swift3.jpg" style="width: 150px; height: 150px;" />
    <img src="images/swift4.jpg" style="width: 150px; height: 150px;" />
    <img src="images/swift5.png" style="width: 150px; height: 150px;" />
    <img src="images/swift6.JPG" style="width: 150px; height: 150px;" />        
</div> 
```

I've implemented JQuery UI draggable to drag images out of this div into another div and drop them.

```
$('#images img').draggable({  
    revert:true,  
    proxy:'clone',
    snap: true,
    onDrag: function(e, ui) {
        console.log('test');
    }
}); 
$('.drop_image').droppable({  
    onDragEnter:function(){  
        $(this).addClass('over');       
    },  
    onDragLeave:function(){  
        $(this).removeClass('over');  
    },  
    onDrop:function(e,source){  
        $(this).removeClass('over');  
        if ($(source).hasClass('assigned')){  
            $(this).append(source);  
        } else {  
            var c = $(source).clone().addClass('assigned');  
            $(this).empty().append(c);  
            c.draggable({  
            revert:true  
            });  
        $(this).children('img').css('width', '100%').css('height', '100%');
        }  
    }  
    }); 
```

However, because of the scroll on the div, any images which are below the initial bottom border of #images, when dragged, are considerably away from the mouse cursor by whatever offset they had in the original div. They still get dropped correctly when the mouse is placed over the receiving div, but the dragged image displays in a weird place until it is dropped.

Anyone know a way to correct this? I assume I have to do something in the onDrag callback to set the position of the dragged object to be equal with the mouse cursor position, but I'm not sure what the syntax should be.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T17:09:50.273

```
cursorAt: { left: 75, top: 75 }, 
```

[http://jsfiddle.net/E9pQZ/](http://jsfiddle.net/E9pQZ/)

请参阅 API 文档[http://api.jqueryui.com/draggable/#option-cursorAt](http://api.jqueryui.com/draggable/#option-cursorAt)

# c++ - Fastest way to copy c++ vector to Obj-C Float32 array

> ID：11818165
> 
> 赞同：0
> 
> 时间：2012-08-05T16:40:35.200
> 
> 标签：c++, arrays, vector, floating-point, objective-c++

I'm making a function call in my Obj-C++ which returns a C++ float vector:

```
vector<float> mixedFrames = song.getMixedFrames(); 
```

These frames are for audio playback and CoreAudio expects them inside a `Float32` array which was defined like this:

```
Float32 *buffer = (Float32 *)ioData->mBuffers[channel].mData; 
```

My question is which is the fastest way to copy `mixedFrames` to `buffer`. Should I just loop through `mixedFrames` and copy every value to `buffer` or is there a faster way which would take less memory?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:10:30.603

内存布局相同，因此可能根本不需要复制；你可以简单地使用`mixedFrames.data( )`.

如果您出于某种原因确实需要制作副本，您可以简单地使用`memcpy`or `std::copy`。

# csv - Line break in Jade/Express within a conditional

> ID：11818166
> 
> 赞同：0
> 
> 时间：2012-08-05T16:40:50.683
> 
> 标签：csv, express, pug

I need to output plain text in a jade layout (using express) and I need it to appear on separate lines like so -

```
Hello
There
World"0"
World"1"
World"2" 
```

I would have thought I could do it like this - (jade template coming up)

```
|Hello
|There
- for (var i=0; i<3; i++)
  |World"#{i}" 
```

But instead this gives me

```
Hello
ThereWorld"0"World"1"World"2" 
```

For the life of me, I cannot understand how to do a line break within a conditional loop! This is not meant to be HTML text, its plain text for CSV binary output, so the breaks are important and so are the double quotes as well as the escaping to prevent tags.

Is it not possible to do this in Jade? I don't have much experience in Jade, so I'd appreciate any help at all from the experts out there. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:25:11.527

我已经更新了 OP 以包含动态变量和双引号，这是我真正需要的东西。

玩弄了@Amberlamps 的建议并想出了这个答案-

```
|Hello
|There
- for (var i=0; i<3; i++)
  ="\n"
  |World"#{i}" 
```

我确信这个解决方案还有其他变体，但这个对我有用。

如果我需要做更高级的模板，我肯定会检查 Mustache 或 Handlebars - Jade 及其文档只是不适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:49:01.027

Try this:

```
- for(var i = 0; i < 3; i++)
    = World + "\n" 
```

# html - 试图模仿 Lamborghini.com 的布局无济于事

> ID：11818173
> 
> 赞同：0
> 
> 时间：2012-08-05T16:41:26.233
> 
> 标签：html, css

我试图模仿具有固定页眉和页脚的布局，其内容适合两者之间，无需 javascript 或使用表格。[你可以在这里](http://www.lamborghini.com/en/home)看到我在找什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:33:59.013

其实这很简单。这是完整的代码，只需复制并粘贴即可。

感谢 Jeremy (http://stackoverflow.com/questions/206652/how-to-create-div-to-fill-all-space-between-header-and-footer-div)。

```
<style type="text/css">
html, body 
{ 
    height: 100%;
    padding: 0;
    margin: 0; 
} 

#header
{
    height: 100px;
    color: #FFF;
    background: #000;
}

#content
{
    min-height: 100%; 
    height: auto !important; /*Cause footer to stick to bottom in IE 6*/
    height: 100%; 
    margin: 0 auto -100px; /*Allow for footer height*/
    vertical-align:bottom;
    color: #FFF;
    background: #333;
}

#footer
{
    height: 100px; 
    color: #FFF;
    background: #000;   
}

#divider 
{
    height: 100px; /*Divider must be same height as Footer */
}

</style>

<div id="content">
    <div id="header">
        Header
    </div>

    Content Text

    <div id="divider"></div>
</div>
<div id="footer">
    Footer
</div> 
```

# domain-driven-design - Which objects should contain the database access methods in domain driven design

> ID：11818175
> 
> 赞同：1
> 
> 时间：2012-08-05T16:41:30.997
> 
> 标签：domain-driven-design

I thought domain driven design is saying the Get-methods are in the Repositories and the Add/Del/Update are in the business objects?

Can you clarify this please?

When I look at the MVCMusicStore sample all CRUD methods to the database are in the entities ?!

[http://mvcmusicstore.codeplex.com/SourceControl/changeset/view/d9f25c5263ed#MvcMusicStore%2fModels%2fShoppingCart.cs](http://mvcmusicstore.codeplex.com/SourceControl/changeset/view/d9f25c5263ed#MvcMusicStore%2fModels%2fShoppingCart.cs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:41:06.440

您发布的链接不是域驱动设计的示例，它只是说明了 MVC 模式。正如您所提到的，实体包含所有持久性逻辑，而业务逻辑主要位于控制器中。

在同一系统的领域驱动设计中，实体将*不*包含任何持久性逻辑，但它们*将*包含大部分业务逻辑。所有持久性功能都将驻留在存储库中，控制器（也称为服务）将非常薄，并将大部分工作委托给实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T19:11:50.480

我刚刚回答了一个类似的问题[，域模型可以知道存储库吗？](https://stackoverflow.com/questions/11818160/could-domain-models-be-aware-of-repositories)（以及[“保存”方法是否属于业务域实体？](https://stackoverflow.com/questions/11613716/does-save-method-belong-to-the-business-domain-entity/11630606#11630606)） - 似乎许多 DDD 问题都与 Active Record 与 Repository 的选择有关。

我会听从埃里克·埃文斯的建议

> 一般来说，不要与你的框架抗争。寻求方法来保持 DDD 的基本原理，并在框架对立时放弃细节。寻找 DDD 概念与框架概念之间的相似性。这是假设您别无选择，只能使用该框架。

因此，即使 DDD 的创建者意识到一些可能的不便，对我而言，Active Record 和 Repository 之间的选择取决于当前的技术堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:01:46.117

这是典型的存储库的样子：

```
public class OrderRepository {
    public MyClass Load(Guid id); // throws an exception if not found
    public void Save(Order order);
    public void Delete(Guid id); // does not throw an exception if not found (idempotent)
} 
```

# c - 如何将字节内存从内核模块映射到用户空间应用程序？

> ID：11818179
> 
> 赞同：2
> 
> 时间：2012-08-05T16:41:37.060
> 
> 标签：c, memory, linux-kernel, kernel

我想在内核模块中声明一个数组并在用户空间应用程序中访问它。我该怎么做？

如何内存映射它以通过用户空间使用，以便用户可以使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:05:41.083

您很可能需要实现字符设备。然后在您的实例中`struct file_operations`实现[mmap 函数](http://people.ee.ethz.ch/~arkeller/linux/kernel_user_space_howto.html#s8)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T02:32:28.377

我想你在这里拥有一切：[http ://www.scs.ch/~frey/linux/memorymap.html](http://www.scs.ch/~frey/linux/memorymap.html)

顺便说一句，谷歌上的第一个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:34:43.140

[Linux 设备驱动程序第 3](http://www.makelinux.net/ldd3/)章第 15 章。它谈到了 mmap。第 3 章和第 6 章讨论 char 设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:57:54.743

也许用户空间 I/O 系统会帮助你：[https ://www.osadl.org/?id=321](https://www.osadl.org/?id=321)

# ruby - 当 nginx 获取 memcached 机架结果时显示添加的奇怪字符串

> ID：11818180
> 
> 赞同：1
> 
> 时间：2012-08-05T16:41:37.697
> 
> 标签：ruby, nginx, memcached, rack, dalli

我在使用我的机架应用程序生成的页面时遇到了一些问题。

我将机架应用程序生成的页面存储在 memcache 中，并带有以下（ruby）代码：

```
require 'dalli'
memcached = Dalli::Client.new("localhost:11211")
memcached.set(req.path_info, response[2][0]) 
```

（其中 response[2][0] 是生成的 html 代码）

在我的 nginx 服务器配置中，我有以下内容：

```
location @rack {
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header Host $host;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_pass http://127.0.0.1:9292;
}
location @memcached {
  set $memcached_key $request_uri;
  memcached_pass localhost:11211;
  default_type text/html;
  error_page 404 = @rack;
}
location / {try_files @memcached;} 
```

这有点工作，但不完全：传递给我的浏览器的内容现在开始于：

```
I"¯[<!DOCTYPE html><html ... 
```

我的问题是：html 代码前面的多余部分是什么，如何防止它显示在浏览器结果中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:12:41.267

Dalli 用来`Marshal.dump`序列化你设置的值（这样你就可以缓存任意的 ruby​​ 对象），所以 nginx 得到的不仅仅是字符串，而是 ruby​​ 的 marshal 格式的数据。您看到的额外字节包含编组标头（格式版本等）和表示后面的字节是字符串的字节。

您可以告诉 dalli 存储对象的原始值：

```
memcached.set(req.path_info, response[2][0], nil, :raw => true) 
```

# facebook - Facebook open graph image without meta og:image

> ID：11818181
> 
> 赞同：1
> 
> 时间：2012-08-05T16:41:41.673
> 
> 标签：facebook, facebook-opengraph

I found sites which are using like button to specific images from galleries and when you like them on facebook they display proper image buth without even using og meta tags???

How they are doing this???

Here is example:

[http://www.subotica.com/slike/album-62834-omega-disco-subota-vece/](http://www.subotica.com/slike/album-62834-omega-disco-subota-vece/)

Try to like any picture and try to debug them on facebook debuger and you will see that there are no meta tags but crawled picture is proper!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:53:03.667

他们正在使用旧的 sharer.php 端点。

```
http://www.facebook.com/sharer.php?u=URLENCODED_URL_TO_PHOTO 
```

官方不支持该端点。目前它仍然有效，但可以随时删除。您可以使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)或适当的 og:meta 标签完成类似的操作。

# php - PHP / HTML using "../" for subdomains

> ID：11818182
> 
> 赞同：0
> 
> 时间：2012-08-05T16:41:58.187
> 
> 标签：php, html, file, subdomain, subdirectory

I am making a website which has a sub-domain but some of the resources are shared between the main domain and the sub-domain such as the style sheet. Instead of duplicating the file into *http://sub.domain.com* from *http://domain.com*, is there a way to use "../style.css" to obtain it from the folder level up? I know I can if I access the website via *http://domain.com/sub* but not *http://sub.domain.com* because it looks in the folder above.

To clarify, this is not just for stylesheet, something like an include.php file for variables and functions would need to be included in the sub-domain from the main domain. Many thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:46:17.373

为什么不直接使用样式表的完整路径？

无法使用 HTML 离开文档根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:49:40.947

是的，您可以从子域访问主域文件夹的内容。

# android - 在 Android 应用中连接 SQLite

> ID：11818185
> 
> 赞同：0
> 
> 时间：2012-08-05T16:42:15.537
> 
> 标签：android, sqlite, android-sqlite

我是 android 开发的新手，现在我想创建一个使用 SQLite DB 的应用程序。我很难理解关于数据库 PATH 的一件事。我在指南上看到了这一点，以实现我想要的成功，看看：

```
 public class DataBaseHelper extends SQLiteOpenHelper{

        //The Android's default system path of your application database.
        private static String DB_PATH = "/data/data/YOUR_PACKAGE/databases/";

            private static String DB_NAME = "myDBName";

         ...
} 
```

当它说那里的路径时，它是我桌面上 SQLite db 文件的路径吗？那会在我在 AVD 上跑步时使用吗？而且..当我将数据库更改为我的平板电脑（以这种方式数据库的“本地主机”）时，我需要指定我的平板电脑内的路径？我正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:53:27.387

不，该路径是您的数据库在设备上所在位置的路径。数据库通常保存在包含您的包名称的路径中（这是安全的，除非手机已root，否则其他应用程序无法访问）。

如果您的包名称是“com.test.victor”，则设备上数据库的路径为：

```
private static String DB_PATH = "/data/data/com.test.victor/databases/"; 
```

如果您不是通过您的应用程序从头开始创建数据库，而是希望使用预先创建的数据库，则需要将该数据库放在您的资产文件夹中，然后将数据库复制到 Android 启动时使用的正确目录应用程序。

这是我最近回答的另一个问题的[链接，该问题涉及从资产中复制数据库文件以供使用。](https://stackoverflow.com/a/11814575/1105376)

# c++ - OSX10.8 上的 C++ Hello World 问题

> ID：11818189
> 
> 赞同：1
> 
> 时间：2012-08-05T16:42:24.653
> 
> 标签：c++, osx-mountain-lion

我的个人资料已更新以指向我认为正确的位置：

```
 PATH=${PATH}:/Applications/Xcode.app/Contents/Developer/usr/bin:${PATH} 
```

找到编译器

```
[11:39:32] ~: $ which g++
/Applications/Xcode.app/Contents/Developer/usr/bin//g++
[11:39:35] ~: $ which gcc
/Applications/Xcode.app/Contents/Developer/usr/bin//gcc 
```

Hello World 如下所示

```
#include <iostream>
using namespace std;

int main ()
{
  cout << "Hello World!";
  return 0;
} 
```

无法从命令行和 TextMate 执行

```
[11:40:15] Desktop: $ g++ untitled.cpp 
untitled.cpp:1:20: error: iostream: No such file or directory
untitled.cpp: In function ‘int main()’:
untitled.cpp:6: error: ‘cout’ was not declared in this scope 
```

**我还应该在我的路上还有什么遗漏？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T17:21:12.733

答案一如既往地显而易见

安装 Xcode 命令行工具

![在此处输入图像描述](../Images/58db17e37af6bee0d921b5a4b6063fc5.png)

检查您的`/usr/bin`并在那里找到：

![在此处输入图像描述](../Images/859ee46aeae34dd823fb06deac4c5643.png)

再试一次..一切都会自动运行

附带说明一下，从 OSX10.7 升级到 OSX10.8 删除了这些链接很奇怪

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-05T16:54:21.343

此答案适用于 GCC，但其他非 vcc 编译器可能相同。当我使用 GCC 时，iostream 不存在，但 iostream.h 存在，我建议您尝试 iostream.h，如果您再次遇到此问题，使用 STL 标头添加 .h。

# mysql - MySQL 触发器：删除后从表中删除

> ID：11818191
> 
> 赞同：26
> 
> 时间：2012-08-05T16:42:25.903
> 
> 标签：mysql, triggers, mysql-error-1046

范围：两张表。创建新顾客时，他们会将一些关于他们的信息存储到第二张表中（这也是使用触发器完成的，它按预期工作）。这是我的表结构和关系的示例。

表 1->**顾客**

```
+-----+---------+-----+
+  id +   name  + val +
+=====+=========+=====+
+  37 +  george +  x  +
+-----+---------+-----+
+  38 +  sally  +  y  +
+-----+---------+-----+ 
```

表 2 ->**赞助人信息**

```
+----+-----+----------+
+ id + pid +   name   +
+----+-----+----------+
+  1 +  37 +  george  +
+----+-----+----------+
+  2 +  38 +  sally   +
+----+-----+----------+ 
```

管理员可以管理读者。当他们选择移除顾客时，顾客从**桌子 1** `patrons`中移除。此时，**表 2** `patron_info`没有任何反应。

当表 1 删除了一个项目时，我只是试图创建一个触发器以从表 2 中删除。这是我尝试过的...

最初，如果触发器存在，我会尝试放下触发器（只是为了清除空气）......

```
DROP TRIGGER IF EXISTS log_patron_delete; 
```

然后我尝试在之后创建触发器......

```
CREATE TRIGGER log_patron_delete AFTER DELETE on patrons
FOR EACH ROW
BEGIN
DELETE FROM patron_info
    WHERE patron_info.pid = patrons.id
END 
```

此时，我收到一个语法错误`1046: Check syntax near END on line 6`。我不知道此时错误是什么。我尝试了几种不同的变体。另外，我需要在这里使用分隔符吗？

谁能帮助我恢复理智？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-05T17:18:30.820

我认为触发代码中有错误。由于您要删除所有带有已删除读者 ID 的行，您必须使用**old.id**（否则会删除其他 ID）

试试这个作为新的触发器：

```
CREATE TRIGGER log_patron_delete AFTER DELETE on patrons
FOR EACH ROW
BEGIN
DELETE FROM patron_info
    WHERE patron_info.pid = old.id;
END 
```

**不要忘记“;”** 在删除查询上。此外，如果您在控制台窗口中输入 TRIGGER 代码，也请使用分隔符。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-07-19T05:40:59.130

为什么不在外键`patron_info`.pid 上设置 ON CASCADE DELETE？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T14:38:35.187

```
create trigger doct_trigger
after delete on doctor
for each row
delete from patient where patient.PrimaryDoctor_SSN=doctor.SSN ; 
```

# sql - 列出数据库中匹配和不匹配的记录

> ID：11818198
> 
> 赞同：0
> 
> 时间：2012-08-05T16:43:20.413
> 
> 标签：sql, sql-server, multiple-tables

我有一个查询，它将检查一张表中的作废发票，然后检查同一张表以查看作废的发票是否被重新投标。我想知道...是，有没有办法添加一列来查看无效发票是否没有重新投标，并在列中将其列为“N”..

这是我当前的查询：

```
SELECT        t1.Store_Number, t1.Invoice_Number, t1.Invoice_Date, t1.Vehicle_Tag, t1.Void_Reason, t1.Void_Employee_Tax_Payer_Id, t1.Invoice_Total, t1.Void_Flag, 
                         t2.Invoice_Number AS Expr1, t2.Vehicle_Tag AS Expr2, t2.Invoice_Total AS Expr3
FROM            Invoice_Tb AS t1 INNER JOIN
                         Invoice_Tb AS t2 ON t1.Vehicle_Tag = t2.Vehicle_Tag
WHERE        (t1.Void_Flag = 'y') AND (t1.Invoice_Date BETWEEN CONVERT(DATETIME, '2012-08-01 00:00:00', 102) AND CONVERT(DATETIME, '2012-08-02 00:00:00', 102)) AND 
                         (t2.Void_Flag = 'n') AND (t2.Invoice_Date BETWEEN CONVERT(DATETIME, '2012-08-01 00:00:00', 102) AND CONVERT(DATETIME, '2012-08-02 00:00:00', 102)) 
```

这是我当前的输出：

```
Store Number    Invoice Number  Date    Plate Number    Void Reason Employee    Invoice Amount Voided   New Invoice Number  Plate Number    New Invoice Amount  Re-Tendered
1568    3257714 8/1/2012 0:00   BBY1234 WRONG PRICE ENTERED 89556532    21.39   3257714 BBY1234 26.74   Y 
```

我想要的一个示例：假设发票 #123 已作废，并且从未重新投标...我想显示上述内容并添加一个列标题“重新投标”并在发票所在的位置列出“n”没有重新招标。输出将与此类似：

```
Store Number    Invoice Number  Date    Plate Number    Void Reason Employee    Invoice Amount Voided   New Invoice Number  Plate Number    New Invoice Amount  Re-Tendered
1568    3257714 8/1/2012 0:00   BBY1234 WRONG PRICE ENTERED 89556532    21.39   3257714 BBY1234 26.74   Y
1552    123 8/1/2012 0:00   Dwb0534 Wrong Plate number  73215654    15.95               N 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:54:34.990

你需要一个左连接

```
SELECT        t1.Store_Number, t1.Invoice_Number, t1.Invoice_Date, t1.Vehicle_Tag, t1.Void_Reason, t1.Void_Employee_Tax_Payer_Id, t1.Invoice_Total, t1.Void_Flag, 
                         t2.Invoice_Number AS Expr1, t2.Vehicle_Tag AS Expr2, t2.Invoice_Total AS Expr3, case when t2.Vehicle_Tag is null then 'n' else 'y' end as retendered
FROM            Invoice_Tb AS t1 LEFT JOIN
                         Invoice_Tb AS t2 ON t1.Vehicle_Tag = t2.Vehicle_Tag And
                         (t2.Void_Flag = 'n') AND (t2.Invoice_Date BETWEEN CONVERT(DATETIME, '2012-08-01 00:00:00', 102) AND CONVERT(DATETIME, '2012-08-02 00:00:00', 102))
WHERE        (t1.Void_Flag = 'y') AND (t1.Invoice_Date BETWEEN CONVERT(DATETIME, '2012-08-01 00:00:00', 102) AND CONVERT(DATETIME, '2012-08-02 00:00:00', 102)) 
```

# drupal - drupal - 处理匿名用户

> ID：11818202
> 
> 赞同：0
> 
> 时间：2012-08-05T16:44:03.103
> 
> 标签：drupal

我正在做一个drupal项目。我遇到的问题是，应该只允许用户每天观看 3 次特殊节点。对于注册用户来说当然没问题，但是如何处理访客/匿名用户呢？

在我看来，会话或 cookie 太不安全了……我找不到任何用于处理客人的 drupal 模块 - 有模块吗？如果没有模块，那么实现它的最佳方法是什么？我还考虑了一个服务器端的 ip 列表，但我不太确定这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:23:38.187

这就是会话跟踪和 cookie 的用途...

如果您必须避免使用这些，您可以通过从一些环境变量的串联组合创建唯一标识符来跟踪用户服务器端。（例如 20120805-4.4.4.4-w7sp2-chrome-1920x1080-etc-etc...）然后，在服务器端，您可以作为用户进行跟踪。它并不完美，仍然可能错误地排除在同一 IP 内使用完全相同客户端配置的人。

# c++ - 使用变量的动态 MessageBox (c++)

> ID：11818205
> 
> 赞同：0
> 
> 时间：2012-08-05T16:44:39.903
> 
> 标签：c++, messagebox

我想使用 char 数组创建一个动态 MessageBox，但我对 uType (UINT) 有一些问题。

如果你看我的代码，我首先有一个带有 | 的字符字符串 分隔符并将其解析为数组“a”。然后我将我的 char 转换为 UINT 但我无法让它工作，它只是不显示任何消息框。感谢您的帮助:-)

```
char str[] ="Testing message|Title Message|MB_OK|MB_ICONINFORMATION";
char * pch;
char * a[4];
int i = 0;
pch = strtok (str,"|");
while (pch != NULL)
{
    a[i] = pch;
    pch = strtok (NULL, "|");
    //cout << a[i];
    i++;
}
char test[1000] = "";
strcat_s (test,a[2]);
strcat_s (test,"|");
strcat_s (test,a[3]);

UINT y;
stringstream s;
s << test;
s >> y;

MessageBox(0,a[0],a[1],y);
Sleep(10000); 
```

解决方案 ：

```
 UINT x;
                            if(!strcmp(a[3],"MB_ICONERROR")){
                                x = 0x10;
                            }else if(!strcmp(a[3],"MB_ICONEXCLAMATION")){
                                x = 0x30;
                            }else if(!strcmp(a[3],"MB_ICONINFORMATION")){
                                x = 0x40;
                            }else if(!strcmp(a[3],"MB_ICONQUESTION")){
                                x = 0x20;
                            }
                            if(!strcmp(a[2],"MB_OK")){
                                x = x + 0;
                            }else if(!strcmp(a[2],"MB_OKCANCEL")){
                                x = x + 1;
                            }else if(!strcmp(a[2],"MB_YESNO")){
                                x = x + 4;
                            }else if(!strcmp(a[2],"MB_YESNOCANCEL")){
                                x = x + 3;
                            }else if(!strcmp(a[2],"MB_RETRYCANCEL")){
                                x = x + 5;
                            }else if(!strcmp(a[2],"MB_ABORTRETRYIGNORE")){
                                x = x + 2;
                            }
                            MessageBox(0, a[0], a[1], x); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T16:54:12.347

```
MB_OK|MB_ICONINFORMATION 
```

这些是“枚举”，而不是实际的字符串。在您的程序中（在字符串之外），它们将被数字替换。您正在做的是尝试将纯字符串转换为数字，这显然不会产生预期的结果，因为那时系统不再识别枚举。

我建议使用某种掩码，或者将“普通”值输入到字符串中。对于您的示例，这是 0x40，可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)看到。

所以，尝试使用这样的字符串：

```
char str[] ="Testing message|Title Message|0x40"; 
```

并确保最后一个元素被视为整数，而不是“字符串”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:57:39.570

根据[这个页面](http://goo.gl/N2ecA)MB_OK 和 MB_ICONINFORMATION 是#defines，所以如果你要做类似的事情：

```
y = MB_OK | MB_ICONINFORMATION; 
```

你会得到你想要的值到 y 变量中。

但是，您有一个带有#defines*名称的字符串。*stringstream 和我能想到的任何其他简单的东西都不会将它们转换为您需要的数字。

更新：

您在问题中添加了以下 if/else 阶梯作为您的解决方案：

```
UINT x;
if(!strcmp(a[3],"MB_ICONERROR")){
    x = 0x10;
} else if(!strcmp(a[3],"MB_ICONEXCLAMATION")){
    x = 0x30;
... 
```

如果您要这样做，那么用#defines 替换文字常量，它应该更干净，并且不会有过时或出错的可能性。（我意识到，作为 Windows 常量，这些可能不会经常更改，但最好这样练习。）

这看起来像这样：

```
UINT x;
if(!strcmp(a[3],"MB_ICONERROR")){
    x = MB_ICONERROR;
} else if(!strcmp(a[3],"MB_ICONEXCLAMATION")){
    x = MB_ICONEXCLAMATION;
... 
```

# iphone - 如何跨视图共享 iAd 广告？

> ID：11818206
> 
> 赞同：3
> 
> 时间：2012-08-05T16:44:47.693
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我正在制作一个 iPhone 应用程序，我目前在我的视图中使用 iAd。我读过一些关于苹果推荐通过视图共享广告横幅的内容。我怎么能做到这一点，因为我已经阅读了苹果文档并且不够清楚而且我很困惑，请帮助我，如果他们有任何教程，请告诉我或者只是回答并以正确的方式指出我。目前，我为每个视图控制器都有一个广告，它运行良好，但出现错误：活动横幅太多 (10)。新横幅的创建将受到限制。请帮忙，我正在使用故事板和最新的 Xcode :) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T22:03:47.520

我这样做的方法是使用创建 adView 的 Singleton 类，这样你只会得到 1 个 adView。然后在所有 ViewControllers 的 viewDidAppear 方法中，您只需将 adView 添加到您的视图中。

[您可以在此处](https://stackoverflow.com/questions/9422177/is-it-a-good-practice-to-delete-the-adbannerview-on-viewwilldisappear-and-add-it/9422360#9422360)接受的答案中看到我的代码，尽管这是针对 AdWhirl 广告视图，但为 iAd 广告视图更改它应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:45:57.967

这是单身人士的完美案例。许多人只是简单地创建了 的子类`ADBannerView`，然后可以将其添加到您的视图中`-viewDidLoad`（或采取适当的预防措施）并为每个视图控制器`-viewDidAppear`删除。`-viewDidDisappear`

# magento - Magento 海量产品导入缓存和性能问题

> ID：11818208
> 
> 赞同：0
> 
> 时间：2012-08-05T16:45:34.473
> 
> 标签：magento, magento-1.5

我正在导入大约 10.000 种产品，并在常规基础上使用导入自定义脚本更新它们的数据。我使用 Magento 对象来保存产品数据。问题是每个产品的保存过程都比较慢。在 1000 个产品上保存它变得非常慢。当我清除缓存时，一切都正常了。

我现在有几个问题要理解这件事：

1.  有谁知道这是为什么？
2.  我应该禁用“集合数据”缓存，还是也应该禁用任何其他类型的缓存？
3.  或者有什么方法可以告诉 Magento 不要在产品保存时缓存收集数据？
4.  如果没有，禁用集合数据缓存会大大降低页面速度吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:00:38.803

缓慢的原因是您的索引越来越大。除非指定 Magento 将为每个新产品重新索引，您可以通过禁用它来加快导入过程中的速度，但是您需要在某些时候重新索引才能将新导入的产品呈现给前端。

要考虑的解决方案：

*   [Magento API：添加新产品后重建索引](https://stackoverflow.com/questions/4343739/magento-api-rebuild-indexes-after-adding-new-products)

# php - PHP mysql 错误：“mysql_fetch_assoc() 期望参数 1 是资源，给出的布尔值”

> ID：11818209
> 
> 赞同：0
> 
> 时间：2012-08-05T16:45:42.797
> 
> 标签：php, mysql, select, stored-procedures

首先让我说我环顾四周，发现了类似的帖子，但没有一个对我有帮助，所以这就是我请求你帮助的原因。

使用 PHP，我正在尝试执行两个 SQL 查询。第一个查询用 做一个`Select`语句`INNER JOIN`，另一个做一个正常的`select`语句。

这是我的代码：

```
$conn = mysql_connect(DBHOST,DBUSER,DBPASS);

mysql_select_db(DBNAME);
$result = mysql_query("
      SELECT a.`role` AS 'role'
      FROM authme
      INNER JOIN a
      ON `authme`.`username` = `a`.`username`
      WHERE `authme`.`username` = 'vidhu';
", $conn); 
echo mysql_result($result, 0) . "<br />";

mysql_select_db(DBNAME);
$result = mysql_query("SELECT `email` FROM `authme` WHERE `username` = 'vidhu'", $conn); 
echo mysql_result($result, 0) . "<br />"; 
```

所以当我执行这个页面时，我得到的是：

```
Admin   <--- Result from first query

Warning: mysql_result() expects parameter 1 to be resource, boolean given in    C:\Apache24\htdocs\test.php on line 12  <---- second query 
```

分别执行这两个查询，工作正常，但是当两者结合时，我得到了那个错误。有任何想法吗？

感谢您花时间阅读本文！维杜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:49:29.013

`mysql_query`如果失败，该函数将返回布尔值 FALSE。您正在使用结果而不检查它是否失败，因此您传递的是 FALSE 值而不是正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:04:56.553

这样做时，`mysql_query(query,connection)`您应该始终使用`or die(mysql_error());`

所以它看起来像：

```
mysql_query("SELECT * FROM sometable") or die(mysql_error()); 
```

它不仅会返回 false，还会在错误点停止并回显您在 MYSQL 代码中遇到的确切错误。

# cakephp - 会话组件::setFlash

> ID：11818210
> 
> 赞同：0
> 
> 时间：2012-08-05T16:45:45.933
> 
> 标签：cakephp

我正在使用 CakePHP 2。

这是我的控制器。

```
class GroupsController extends AppController {
  public $helper = array('Html', 'Form', 'Session');
  public function edit($id = null) {
    if (empty($this->request->data)) {
      $this->request->data = $this->Group->findByGroupId($id);
    } else {
      if($this->Group->save($this->request->data)) {
        $this->Session.setFlash('Saved!!!');
        $this->redirect(array('action' => 'index'));
      }
    }
  }
} 
```

当我按下页面组/编辑/1 上的保存按钮时，出现错误。“错误：调用未定义的函数 setFlash()”

好在我所做的修改是保存到数据库中的，我真的不明白，因为 setFlash() 是 SessionComponent 的一个方法。

请帮忙，谢谢。孔塔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:51:07.583

试试这个 ：：

```
$this->Session->setFlash('Saved!!!'); 
```

# python - 对矩阵 python 进行二次采样

> ID：11818215
> 
> 赞同：1
> 
> 时间：2012-08-05T16:46:25.730
> 
> 标签：python, random

我有一个列出对的文本文件，例如

```
10,1
2,7
3,1
10,1 
```

然后将其转换为对称矩阵，因此 (1,10) 条目是 (1,10) 对出现在列表中的次数。我现在想对这个矩阵进行二次抽样。我的意思是子样本 - 我想制作一个矩阵，该矩阵将是仅使用原始文本文件中随机 30% 行的结果。所以在这个例子中，如果我删除了 70% 的文本文件，(1,10) 对可能只出现一次而不是两次，因此矩阵中的 (1,10) 条目将是 1 而不是 2。

如果我实际上有原始文本文件，这可以很容易地完成，只需使用 random.sample 来挑选文件中 30% 的行。但是如果我只有矩阵，我怎么能随机抽取 70% 的数据呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:01:19.400

不幸的是，示例二和三没有根据原始文件中出现的行数观察到正确的分布。

~~您可以从矩阵中随机删除计数，而不是从原始数据中删除元组。所以你必须生成随机索引并减少相应的计数。请务必避免减少零计数，而是生成新索引。执行此操作，直到将计数元组的总数减少到 30%。基本上这可能看起来像这样：~~

```
amount_to_decrease = 0.7 * overall_amount

decreased = 0

while decreased < amount_to_decrease:
    x = random.randint(0, n)
    y = random.randint(0, n)
    if matrix[x][y] > 0:
        matrix[x][y]-=1
        decreased+=1
        if x != y:
            matrix[y][x]-=1 
```

~~如果您的矩阵填充良好，这应该会很好。如果不是~~ 您可能想从矩阵中重新创建一个元组列表，然后从中选择一个随机子集。在此之后从剩余的元组重新创建您的矩阵：

```
tuples = []
for y in range(n):
    for x in range(y+1):
        for _ in range(matrix[x][y])
            tuples.append((x,y))
remaining = random.sample(tuples, int(overall_amount*0.7) ) 
```

~~或者，您可以进行组合，首先通过查找所有不为零的索引，然后对这些索引进行采样以减少计数：~~

```
valid_indices = []
for y in range(n):
    for x in range(y+1):
        valid_indices.append((x,y))

amount_to_decrease = 0.7 * overall_amount
decreased = 0
while decreased < amount_to_decrease:
    x,y = random.choice(valid_indices)
    matrix[x][y]-=1
    if x != y:
        matrix[y][x]-=1
    if matrix[y][x] == 0:
        valid_indices.remove((x,y)) 
```

还有另一种方法可以使用正确的可能性，但可能不会给你一个确切的减少。这个想法是设置保持行/计数的概率。如果您的目标是减少到 30%，这可能是 0.3。然后你可以检查矩阵并检查每个计数是否应该保留。

```
keep_chance = 0.3
for y in range(n):
    for x in range(y+1):
        for _ in range(matrix[x][y])
            if random.random() > keep_chance:
                matrix[x][y] -= 1
                if x != y:
                    matrix[y][x]-=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:15:33.910

我想最好的方法取决于你的数据很大：

*   你有一个巨大的矩阵，其中大部分是少量的吗？或者
*   您是否有一个包含大量计数的中等大小的矩阵？

这是一个适用于第二种情况的解决方案，尽管它在第一种情况下也可以正常工作。

基本上，计数恰好在 2D 矩阵中这一事实并不那么重要：这基本上是从已分箱的总体中抽样的问题。所以我们可以做的是直接提取 bin，暂时忘记矩阵：

```
import numpy as np
import random

# Input counts matrix
mat = np.array([
    [5, 5, 2],
    [1, 1, 3],
    [6, 0, 4]
], dtype=np.int64)

# Build a list of (row,col) pairs, and a list of counts
keys, counts = zip(*[
    ((i,j), mat[i,j])
        for i in range(mat.shape[0])
        for j in range(mat.shape[1])
        if mat[i,j] > 0
]) 
```

然后使用累积的计数数组从这些箱中采样：

```
# Make the cumulative counts array
counts = np.array(counts, dtype=np.int64)
sum_counts = np.cumsum(counts)

# Decide how many counts to include in the sample
frac_select = 0.30
count_select = int(sum_counts[-1] * frac_select)

# Choose unique counts
ind_select = sorted(random.sample(xrange(sum_counts[-1]), count_select))

# A vector to hold the new counts
out_counts = np.zeros(counts.shape, dtype=np.int64)

# Perform basically the merge step of merge-sort, finding where
# the counts land in the cumulative array
i = 0
j = 0
while i<len(sum_counts) and j<len(ind_select):
    if ind_select[j] < sum_counts[i]:
        j += 1
        out_counts[i] += 1
    else:
        i += 1

# Rebuild the matrix using the `keys` list from before
out_mat = np.zeros(mat.shape, dtype=np.int64)
for i in range(len(out_counts)):
    out_mat[keys[i]] = out_counts[i] 
```

现在您将在`out_mat`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:59:36.097

假设一对 1,10 和 10,1 不同，那么 mat[1][10] 不一定与 mat[10][1] 相同（如果不是，请阅读以下行）

首先计算矩阵中所有值的总和。

让这个总和为**S**。这会计算文件中的行数。

设**x**和**y**为矩阵的维数。

现在循环从 0 到 [S 的 70%]的**n ：**

*   选择一个介于 1 和 x 之间的随机整数。让它成为**j**
*   在 1 和 y 之间选择一个随机整数。让它成为**k**
*   如果 mat[j][k] > 0，减小 mat[j][k] 并做 n++

由于您为文件中的每一行增加矩阵中的单个值，因此随机减少矩阵中的正值与抽取文件中的行相同。

* * *

如果 10,1 与 1,10 相同，则不需要矩阵的一半，因此您可以像这样更改算法：

循环**n**从 0 到 [S 的 70%]：

*   选择一个介于 1 和 x 之间的随机整数。设这是**j**
*   选择一个介于 1 和 k 之间的随机整数。让这成为**k**
*   如果 mat[j][k] > 0，减小 mat[j][k] 并做 n++

# security - 隐藏 oauth 秘密

> ID：11818217
> 
> 赞同：3
> 
> 时间：2012-08-05T16:46:51.093
> 
> 标签：security, encryption, oauth

我正在构建一个使用 Twitter API 的（业余）应用程序，它支持通过 OAuth 协议进行身份验证。

OAuth 登录过程的一部分涉及为每个应用程序分配一个消费者密钥和消费者秘密（均为字符串），用于生成与 Twitter 服务器通信的签名。

Twitter 开发指南明确指出，应该将“消费者的秘密”保密。此密钥在您的应用程序中永远不应该是人类可读的。'。这显然很重要，就像恶意个人获取了您的凭据一样，他们可以冒充您的应用程序。

但是，我不明白如何实现这一点。为了让应用程序使用该字符串，应用程序必须能够以某种方式访问​​它（直接编码到应用程序中、存储在捆绑的数据库中或通过链接的 Web 服务访问） - 如果应用程序可以访问它，它用户必须可以访问。它可以通过拆分，字符转换等来混淆，但不是（据我所知）以任何无法撤消的方式。

[这个](https://stackoverflow.com/a/1934234/1040915)SO 答案证实了我的怀疑，即这是一个问题 - 我想知道自 09 年 12 月发布以来是否有任何进展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:34:39.670

移动设备的问题在于用户手中。只要有足够的时间/精力，用户就可以从设备中提取任何数据。这不是 OAuth 安全问题，而是真正没有答案的整体安全问题。

# json - 建议的异常 JSON 结构？

> ID：11818221
> 
> 赞同：0
> 
> 时间：2012-08-05T16:47:01.673
> 
> 标签：json, rest, exception-handling

出于好奇，在返回 JSON 的 API 中是否有任何流行的标准来返回服务器端异常（和相应的详细信息）？异常可以是代码中未捕获的异常或开发人员放置的抛出异常。

目前我正在根据他们的[Wiki 定义设置 HTTP 状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

我的 JSON 响应看起来像这样：

```
HTTP Code: 401

{'error': 'Authentication required.', 'message': 'You must be authenticated to perform that action.'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:57:02.347

本机 ECMAScript 错误对象的标准结构是：

```
{
    name: ...,
    message: ...
} 
```

其中“name”是错误的类型（对应构造函数的名称，如“Error”、“SyntaxError”等）。例如，在您的示例中，您可以使用名称“AuthentificationError”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:12:19.450

您可以查看 JSON-RPC (http://en.wikipedia.org/wiki/JSON-RPC)。

在成功的情况下，响应是这样的：

```
{
    "result": ...(returned data)...
    ...
} 
```

如果出现错误，响应是这样的：

```
{
    "error": ...(error details)...
    ...
} 
```

发生错误时，必须存在“error”属性，并且不得返回“result”属性。如果没有错误，则不得设置“错误”属性。这样，您可以仅根据响应的内容来区分错误和成功的响应，而无需检查标头（如响应代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:53:04.853

是的，你也可以这样做。

正如我们所知，Web 服务器允许我们**为 HTTP 错误创建自定义错误页面**，在这些自定义错误页面中，您必须提供 JSON 回复

示例：
将以下内容添加到您的 WEB-INF/web.xml：

```
<error-page>  
       <error-code>401</error-code>  
         <location>/autherror.jsp</location>  
</error-page> 
```

在 autherror.jsp 文件中编码完成所需 JSON 回复所需的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T02:24:05.203

尝试对您发送的错误更详细一点。在某些地方建议使用此结构，以便为使用您的 API 的用户和开发人员提供足够的信息

```
"error":{
       "code":"410",
       "long":"410001",
       "message":"cannot connect to DB",
       "developer":"Connection to the DB was unsuccessful due to ...",
       "documentation": "mysite.com/help/errors/..."
   } 
```

1.  为错误返回正确的 HTTP 代码。错误地返回代码 200 是不好的做法。

2.  使用您自己的错误 ID 扩展代码

3.  提供粗略概述错误原因的短消息。考虑为开发人员添加更详细的消息。请记住，API 错误消息有 99.9% 的时间被开发人员阅读，因此通过提供技术细节（在合理范围内）让他们感到高兴，以便他们能够尽快解决。

4.  如果您保留有关 api 和错误代码的公共文档，只需添加 url。

# python - 在纯python中获取标记位索引

> ID：11818228
> 
> 赞同：3
> 
> 时间：2012-08-05T16:48:02.310
> 
> 标签：python

我在这里涉及两个问题：一个是“如何”，第二个是“这个很棒的解决方案听起来好吗？”
事情是这样的：我有一个具有 int 值的对象，它存储使用该对象的所有人员的 id。它是使用标记技术完成的（个人 ID 为 0-10）。

我遇到了一种情况，如果这个值只用一个 id 标记，我想得到这个 id。

对于我使用的第一个测试`value & (value-1)`，这很好，但至于第二件事，我开始想知道最好的方法是什么（我想知道它的原因是因为这个计算在一秒钟内至少发生了 300 次关键地方）。

所以我想到的第一种方法是使用`math.log(x,2)`，但我对这个解决方案感到有点不舒服，因为它涉及一个值的“硬”数学，而不是非常简单的位操作，我觉得我错过了一些东西。

我想到的第二种方法是计数`value<<1`直到它达到 1，但正如您在基准测试中看到的那样，它只是更糟。

我实现的第三种方式是一种非计算方式，并且是最快的，它使用一个字典，其中包含 ids 0-10 的所有可能值。

所以就像我之前说的：在**纯**python中有没有“正确”的方法？
基于字典的解决方案是“合法”的解决方案吗？（可读性/任何其他原因 - 为什么不？）

```
import math
import time

def find_bit_using_loop(num,_):
    c=0
    while num!=1:
        c+=1
        num=num>>1
    return c

def find_bit_using_dict(num,_):
    return options[num]

def get_bit_idx(num, func):
    t=time.time()
    for i in xrange(100000):
        a=func(num,2)
    t=time.time()-t
    #print a
    return t

options={}
for i in xrange(20):
    options[1<<i]=i

num=256
print "time using log:", get_bit_idx(num, math.log)
print "time using loop:", get_bit_idx(num, find_bit_using_loop)
print "time using dict:", get_bit_idx(num, find_bit_using_dict) 
```

输出：

```
time using log: 0.0450000762939
time using loop: 0.156999826431
time using dict: 0.0199999809265 
```

（这里有一个非常相似的问题：[在 Python 中返回最低有效位的索引](https://stackoverflow.com/questions/5520655/return-index-of-least-significant-bit-in-python)，但首先，在这种情况下，我知道只有 1 个标记位，其次，我想让它保持纯 Python 解决方案）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T17:34:20.930

如果您使用的是 Python 2.7 或 3.1 及更高版本，则可以[`bit_length`](http://docs.python.org/library/stdtypes.html#int.bit_length)对整数使用该方法。它返回表示整数所需的位数，即比最高有效位的索引多一：

```
>>> (1).bit_length()
1
>>> (4).bit_length()
3
>>> (32).bit_length()
6 
```

这可能是最 Pythonic 的解决方案，因为它是标准库的一部分。如果您发现它`dict`的性能更好并且这是一个性能瓶颈，我认为没有理由不使用它。

# c# - 如何为图像设置 NULL 值

> ID：11818229
> 
> 赞同：0
> 
> 时间：2012-08-05T16:48:04.993
> 
> 标签：c#, sql-server, winforms, ado.net

我创建了一个加载图像然后将其保存到数据库中的表单。

如果用户没有选择任何图像，我想将值 NULL 保存到数据库中。

我试过这段代码：

```
drow[1] = string.IsNullOrEmpty(imgData.ToString()) ? DBNull.Value : (object)imgData; 
```

但它给了我这个错误：

> 你调用的对象是空的

这是我用来加载图像的代码：

```
private void simpleButton5_Click_1(object sender, EventArgs e)
{
    try
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            picture.ImageLocation = openFileDialog1.FileName;

            imgData = File.ReadAllBytes(openFileDialog1.FileName);
        }
    }
    catch (Exception ex)
    {
        // Could not load the image - probably related to Windows file system permissions.
        XtraMessageBox.Show(String.Format("Cannot display the image.\n You may not have permission to read the file, or it may be corrupt.\n\nReported error: {0}", ex.Message));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:51:34.080

你在那条线上做了一些不必要的事情。没有必要使用`ToString()`它实际上是有害的，因为你会得到一个`NullReferenceException`if `imgData` *is* `null`。只需将值直接与 进行比较即可`null`。

这会更好，并且对此免疫`NullReferenceException`：

```
drow[1] = imgData == null ? DBNull.Value : (object)imgData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:57:07.857

变量 drow 或 imageData 为空。他们需要引用一个对象才能执行数组取消引用或调用 ToString()。调试器应该能够告诉你哪个变量是罪魁祸首。

# svn - 在 svn 中出现问题的樱桃拾取选项

> ID：11818231
> 
> 赞同：2
> 
> 时间：2012-08-05T16:48:20.080
> 
> 标签：svn

我试图将一个修订从我的分支向上合并到主干。最初，当我尝试将更改应用于主干并且一个文件发生冲突时，在尝试解决冲突时，我犯了一些错误。所以我删除了代码，从存储库中重新检查了主干并再次开始该过程。当我尝试合并修订时，我看到更改没有得到应用。我可以看到文件没有被合并我在做什么有什么问题吗？

同样在樱桃拾取选项中，我可以看到一些修订被跳过。只是想了解 svn 将如何进行更改，如果我在两个版本中修改了一个文件，比如 r1 和 r2，如果我尝试对 r2 进行向上合并，则 r1 更改也会被合并，因为我已经在 r1 之上进行了更改在r2？另外，如果我尝试合并 R1 更改，是否会跳过 R2 更改？另外我在合并中给出两个修订会发生什么？

另外除了比较代码，我怎么知道这个版本是否已经合并到主干？

问候，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T22:43:07.690

当您在 SVN 中进行挑选修订时，您必须小心依赖关系。与您的示例案例类似，让我们假设以下情况：

*   R1：修改文件A.txt
*   R2：修改文件A.txt
*   R3：修改文件B.txt

然后，当您以不同的方式进行樱桃采摘时，如下所示：

*   仅 R2 - 不会工作，因为在它之前有同一个文件的依赖修订
*   R1 + R2 - 将工作，因为所有先前的相关修订（S）也被挑选出来
*   仅 R3 - 将起作用，因为不存在先前的依赖项。

因此，依赖性检查归结为找出哪些修订涉及对另一个先前修订中的相同文件的修改。当您有许多修订版并在您的樱桃挑选中修改了许多文件时，手动检查可能会令人困惑且容易出错。我建议在我们的发布管理软件 ( [http://syncrelease.com/tour](http://syncrelease.com/tour) )中使用算法检查樱桃采摘中的依赖性

# java - 创建自定义 Hashmap()

> ID：11818232
> 
> 赞同：1
> 
> 时间：2012-08-05T16:48:34.793
> 
> 标签：java, collections, hashmap

这个问题是我根据我的研究提出的，因为我正在反编译器中查看 hashmap 的源代码，请告知我是否也可以像 java HashMap 一样创建自己的自定义 HashMap，请告知如何创建自己的自定义 HashMap命名为 MyMap..!1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T17:00:26.947

如果您想编写自己的实现`HashMap`，只需实现[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)接口并按照您想要的方式实现其方法：

```
public class HashMap<K,V> implements Map<K,V>, Cloneable, Serializable {
    @Override
    clear() { // My implementation
    }
    // Other methods
} 
```

您可能还想扩展提供接口框架实现的[AbtractMap](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html)抽象类`Map`，以尽量减少实现此接口所需的工作量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:19:04.090

您可以在 java 中查看 HashMap 的源代码并自己编写。

去检查这个链接[HashMap java doc](http://www.docjar.com/html/api/java/util/HashMap.java.html)

# css - 将 Li 的宽度设置为其容器 div 中剩余的任何内容

> ID：11818233
> 
> 赞同：0
> 
> 时间：2012-08-05T16:48:39.463
> 
> 标签：css, styles

我面临一个`css`问题。我无法`Li`占据a`width`中剩下的任何东西`div`我怎么可能做到这一点？

这是一张供参考的图片： [http ://rhythemaggarwal.heliohost.org/login/css/ques.png](http://rhythemaggarwal.heliohost.org/login/css/ques.png)

链接到我的网页：[http ://rhythemaggarwal.heliohost.org/login/index.html](http://rhythemaggarwal.heliohost.org/login/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:08:49.027

改变你的CSS如下：

```
#menu ul li {
  display: table-cell;
  white-space: nowrap;
} 
```

然后添加

```
#news_link { width: 100%;} 
```

那会做我认为你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:54:15.413

`border-right`从`#menu ul li`（更改为）删除`border: 0;`它对我有用

# javascript - Edit object via modal in AngularJS - use a temporary object?

> ID：11818235
> 
> 赞同：4
> 
> 时间：2012-08-05T16:48:54.793
> 
> 标签：javascript, angularjs

**Scenario:** User clicks on item. Following code runs and opens a modal with a textbox that has the item's name populated.

```
$scope.edit = function (item) {
    $scope.editingItem = { Name: item.Name };
}; 
```

My HTML within the modal:

```
<input type="text" ng-model="editingItem.Name"/> 
```

This works fine, the modal shows (using `ng-show`) and the textbox is populated with the item's name.

*Im using a new object to populate the textbox because I don't want the original object to change (via AngularJS auto data binding) until I press the save button.*

Then this HTML:

```
<a href="" ng-click="update(editingItem)">Save</a> 
```

Leads to:

```
$scope.update = function (item) {
    // What do I put in here to update the original item object that was passed
    // into the edit function at the top of this question?!
}; 
```

My issue though is what to put into the `update` method? I want to update the original `item` (held in an array of items).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T17:18:24.387

我会这样做：

```
$scope.edit = function (item) {
    $scope.editingItem = { Name: item.Name };
    $scope.originalItem = item;//store the instance of the item to edit
};

$scope.update = function (item) {
    $scope.originalItem.Name = item.Name;//copy the attributes you need to update
    //clear temp items to remove any bindings from the input
    $scope.originalItem = undefined;
    $scope.editingItem = undefined;
}; 
```

# javascript - 使用 Objective-C 解析包含不被“”包围的键的 JSON

> ID：11818239
> 
> 赞同：2
> 
> 时间：2012-08-05T16:49:30.127
> 
> 标签：javascript, objective-c, json, nsdictionary, javascript-objects

在进行一些 HTML 报废时，我遇到了这种类型的 JS 对象：

```
[{
  key1: "Hello",
  key2: "There",
}, {
  key1: "Goodbye",
  key2: "See you",
},] 
```

请注意，密钥之间没有包装，`" "`因此它不是有效的 JSON 字符串。`JSON/NSArray/NSDictionary`因此，如果不进行一些处理，我无法将其解析为。

是否存在任何可以将这种字符串转换为适当的 Objective-C 对象的库/内置函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:55:21.263

我终于在[这个 Dimmzy 的博客文章](http://www.dimzzy.com/blog/2011/09/fixing-invalid-json-before-parsing/)中找到了解决方案（感谢[这个几乎相同的问题](https://stackoverflow.com/questions/10664028/how-to-parse-a-json-having-no-quotes-with-its-key-string)）。使用此函数从脏字符串中获取干净的 JSON 字符串：

```
+ (NSString *)fixJSON:(NSString *)s {
  NSRegularExpression *regexp = [NSRegularExpression regularExpressionWithPattern:@"[{,]\\s*(\\w+)\\s*:"
                                                                          options:0
                                                                            error:NULL];
  NSMutableString *b = [NSMutableString stringWithCapacity:([s length] * 1.1)];
  __block NSUInteger offset = 0;
  [regexp enumerateMatchesInString:s
                           options:0
                             range:NSMakeRange(0, [s length])
                        usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                          NSRange r = [result rangeAtIndex:1];
                          [b appendString:[s substringWithRange:NSMakeRange(offset, r.location - offset)]];
                          [b appendString:@"\""];
                          [b appendString:[s substringWithRange:r]];
                          [b appendString:@"\""];
                          offset = r.location + r.length;
                        }];
  [b appendString:[s substringWithRange:NSMakeRange(offset, [s length] - offset)]];
  return b;
} 
```

# iphone - iPhone 编程中属性的使用

> ID：11818241
> 
> 赞同：3
> 
> 时间：2012-08-05T16:49:42.567
> 
> 标签：iphone, objective-c, ios, ios5, uiviewcontroller

> **可能重复：**
> [如果您仅在 Objective-C 中使用属性，是否有任何理由声明 ivars？](https://stackoverflow.com/questions/4903651/is-there-any-reason-to-declare-ivars-if-youre-using-properties-exclusively-in-o)
> [ObjectiveC ivars 或 @property](https://stackoverflow.com/questions/6942439/objectivec-ivars-or-property)

我是 iPhone 编程的新手（以及整个编程场景）。我尝试在各个地方研究属性，发现它们基本上是为其他类创建 getter 和 setter 方法以访问这些对象的快捷方式。

现在，我已经看到程序员在 @interface:UIViewController 之后的花括号中以及之后的属性中定义对象，此时所有访问都将发生在该类的 .m 文件中。

现在，那段多余的（？）代码，有必要吗？这是一个标准吗？期待一些通俗易懂的意见。

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T16:57:34.233

我可以通过多种方式解释您的问题：

**问题：**为什么有的程序员使用属性和实例变量（花括号内定义的变量），而有的只使用属性，有的只使用实例变量？

**答：**如您所知，`@property`声明将为您`@synthesize`生成 getter 和 setter。从历史上看，这就是它为您所做的一切，您还必须手动声明实例变量。后来，编译器得到了改进，如果你没有定义实例变量，`@synthesize`语句也会生成它。首次引入时，通常的做法是同时定义属性和实例变量，但 Apple 最终改变了他们的指导方针并鼓励程序员*不要*定义实例变量，而是让编译器自己从`@property`and`@synthesize`声明中生成它。

因此，回答您的问题： 1\. 为您的属性定义实例变量现在是多余的；2\. 不再需要；3\. 现在的标准是不显式声明实例变量，而是让`@synthesize`语句来做。

顺便说一句，该`@synthesize`语句的约定是使用一个名为 的属性`var`，在实例变量名称之前加上一个下划线，因此`@synthesize var = _var`. 这样做是为了最大限度地减少程序员在预期属性时意外引用 ivar 的可能性（反之亦然）。为了进一步说明这是首选标准，从 Xcode 4.4 开始，即使`@synthesize`语句是可选的（因此，定义`@property`，但没有 ivar 和 no `@synthesize`）并且它将声明和 ivar 与您的属性相同的名称，除了前导下划线。

**问题：**为什么有些程序员会在.m 文件中定义他们的一些属性和实例变量？为什么其他程序员只在类自己的 .m 文件中使用它们的一些实例变量和属性在 .h 文件中声明。

**回答：**在 .m 文件中定义的那些实例变量和属性（在所谓的[类扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)中）只是定义那些未向世界公布的 ivars/属性的便捷方式。在此约定中，您的 .h 文件只是您的公共接口（可以从其他地方调用哪些属性和方法），其他所有内容都放在 .m 文件中。这是一个让你的接口更简洁的好方法，所以当你在将来的某个日期使用你的类时，你可以只查看 .h 文件，而不会迷失在类的实现细节的细节中。

过去，在类扩展流行之前，我们在 .h 文件中定义了所有实例变量和属性，即使它们是私有的并且仅在类自己的 .m 文件中使用。因此，您仍然会看到一些执行此操作的代码。

所以，在回答你的问题时，1.使用类扩展并不是多余的（除非你的类扩展是空的，但即使那样我也倾向于保留它，这样我就可以看到没有私有的 ivars/属性）；2\. 不需要使用类扩展；但是 3\. 对仅在类本身中使用的私有属性/变量使用类扩展是一种新兴标准，并且可能确实代表了最佳实践。

# python - 如何在 Google App Engine 中设置动态 URL，例如 www.abc.com/photos/august/？

> ID：11818243
> 
> 赞同：0
> 
> 时间：2012-08-05T16:50:00.843
> 
> 标签：python, html, google-app-engine, url, templating

例如，我在本地文件夹中有以下文件：

用户/网站/abc/photos/2012/august.html 用户/网站/abc/photos/2012/september.html

我想将这两个 html 页面上传到 GAE 并将 URL 设置为：（假设 www.abc.com 是我拥有的域。）

[http://www.abc.com/photos/august/](http://www.abc.com/photos/august/) http://www.abc.com/photos/september/

我怎样才能做到这一点？

以下是我目前的代码。我还没有找到解决它的方法。

主要.py：

```
import webapp2
from google.appengine.ext.webapp import template
from google.appengine.ext.webapp import util
import os

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {}
        path = os.path.join(os.path.dirname(__file__), 'index.html')
        self.response.out.write(template.render(path, template_values))

class August(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(template.render('august.html',None))        

class September(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(template.render('september.html',None))

def main():
    application = webapp2.WSGIApplication([
        ('/', MainHandler),
                ('august', August),
        ('september', September),
        ])
    util.run_wsgi_app(application)

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

应用程序.yaml

```
application: nienyihotw
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /august
  static_files: august.html
  upload: august.html

- url: /september
  static_files: september.html
  upload: september.html

- url: /rootfolder
  static_dir: rootfolder

- url: /.*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:03:36.573

你可以这样做：

```
class PhotosHandler(webapp2.RequestHandler):
    def get(self, year, month):
        path = os.path.join(os.path.dirname(__file__), 'photos', year, '%s.html' % month)
        self.response.out.write(template.render(path, None))

// delete the main
app = webapp2.WSGIApplication([('/', MainHandler), 
                               ('/photos/(.*)/(.*)', PhotosHandler)
                              ],
                              debug=True)

#app.yaml

handlers:
- url: /photos/.*
  script: main.app 
```

# java - 迭代后检索值

> ID：11818244
> 
> 赞同：1
> 
> 时间：2012-08-05T16:50:06.830
> 
> 标签：java, hashmap

在遍历“哈希图列表”之后，我想将值写入字符串作为“值 1”和“值 2”。我不知道怎么做？有人可以帮我吗！

```
for (Object listItem : (List)value) {
System.out.println(key + ":" + listItem); 
```

我的数据中有 2 个值。上面的代码给了我

骗子：姓名

缺点：ID

现在，我希望 'Name' 的值为 1，而 'ID' 的值为 2，这样我就可以替换它们并将它们写入以下字符串

```
"xxxxxxxxxx"+key+"xxxx"+value 1+"xxxxxxxxx"+value 2+"xxxxxxxxxx"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:53:59.017

尝试：

```
String value1="";
String value2="";
int counter=0;

for (Object listItem : (List)value) {
    System.out.println(key + ":" + listItem);

    if(counter==0) {//first pass assign value to value1
       value1=listItem; 
       counter++;//increment for next pass
    }else if(counter==1) {//second pass assign value to value2
        value2=listItem;
        counter++;//so we dont keep re-assigning listItem for further iterations
    }

}

System.out.println(value1);//should display 'Name'
System.out.println(value2);//should display 'ID' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:54:14.320

使用[`StringBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)类（假设`key`在循环之外定义）

```
StringBuilder sb = new StringBuilder("xxxxxx" + key + "xxxx");
for (Object listItem : (List)value) {
    System.out.println(key + ":" + listItem);
    sb.append(listItem+"xxxxxxxxx");
} 
```

# imagemagick - 使用 ImageMagick 的绿屏色度键

> ID：11818249
> 
> 赞同：6
> 
> 时间：2012-08-05T16:50:31.937
> 
> 标签：imagemagick, chromakey

我一直在寻找使用 ImageMagick 的绿屏色度键的良好算法，但到目前为止还没有令人满意的答案。

我想探索一种简单的方法，使用沿 HSV/HSB 颜色空间的范围选择（类似于 -fuzz）来选择我想要的绿色并使它们透明。-fuzz 似乎只适用于 RGB 空间，这是不希望的。

谁能教我如何为 H、S、V 分量选择不同范围的颜色，例如 115-125 度色调、40%-60% 饱和度和 30-80% 值。

如果还有其他更好的色度键算法，您的建议也将受到高度赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-05T18:37:59.803

Imagemagick 的[FX](http://www.imagemagick.org/script/fx.php)可用于生成 Alpha 通道。, `hue`, `saturation`, `lightness`&`luma`关键字存在，但您需要`value`通过 max(r, g, b) 计算颜色。

```
hueMin=115/360;
hueMax=125/360;
saturationMin=0.40;
saturationMax=0.60;
valueMin=0.30;
valueMax=0.80;
value = max( r, max( g, b ) );
(
  ( hue > hueMin && hue < hueMax ) && (
  ( saturation > saturationMin && saturation < saturationMax ) || 
  ( value > valueMin && value < valueMax ))) ? 0.0 : 1.0 
```

将上述内容保存到一个名为的文件中`hsl-greenscreen.fx`，并使用以下命令对图像执行它：

```
convert source.png -channel alpha -fx @hsl-greenscreen.fx out.png 
```

FX 脚本可能需要额外的调整以匹配预期结果。您还会注意到这将需要一些 CPU 才能完成，但可以改进。

另一种选择是`-fuzz`在每个 HSV 通道上应用相同的选项。只需拆分和克隆每个通道，`-fuzz`针对目标灰色应用，然后合成图像蒙版。

```
convert source.png -colorspace HSV -separate +channel \
  \( -clone 0 -background none -fuzz 5% +transparent grey32 \) \
  \( -clone 1 -background none -fuzz 10% -transparent grey50 \) \
  \( -clone 2 -background none -fuzz 20% -transparent grey60 \) \
  -delete 0,1,2 -alpha extract -compose Multiply -composite \
  -negate mask.png 
```

然后将遮罩指定为图像的 alpha 通道

```
convert source.png mask.png -alpha Off -compose CopyOpacity -composite out.png 
```

# java - 如果浏览器关闭，JSF 会话过期阶段监听器

> ID：11818250
> 
> 赞同：0
> 
> 时间：2012-08-05T16:50:36.210
> 
> 标签：java, session, jsf-2, phaselistener

在用户关闭浏览器并离开的情况下，我想在会话超时时登录。例如，作为系统引起的注销，而不是用户请求（我已经有工作和测试的代码来记录用户请求的注销）。

由于用户没有主动提交请求（特别是如果这只是服务器上现在未使用的会话超时的问题），我认为过滤器是不可能的。这可以通过相位监听器来完成吗？如果是这样，您能否提供一些见解或框架，或者至少为我指出如何做到这一点的正确方向。

我的理解是，服务器上的会话仍然处于活动状态，直到超时或其他机制使其无效。因此，我假设阶段侦听器也能够判断作为登录方法的一部分，您是否在用户使用新视图、其他机器等再次登录之前终止任何现有会话。

我对研究没问题，但至少想在指出正确方向的同时开始。:)

第二点：是否可以区分会话超时和视图过期？

* * *

以为我会根据建议发布我最终得到的解决方案：

```
public class ElsSoulardSessionListener implements HttpSessionListener {

    @EJB
    private SessionLogger sessionLogger = new SessionLogger();
    private SessionLogDTO sessionData = new SessionLogDTO();
    private ElsDateTimeFunctions ts = new ElsDateTimeFunctions();
    private static final Logger logger = Logger.getLogger(ElsSoulardSessionListener.class.getSimpleName());

    @Override
    public void sessionCreated(HttpSessionEvent se) {
        // Nothing to do yet
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        logger.log(Level.FINE, "SESSION DESTROYED LISTENER");

        HttpSession session = se.getSession();
        finalizeUserSessionLog(session);
    }

    /**
     * Utility method to finalize user's session log entry. Returns 
     * early if the session log isn't found or more than one is returned.
     * @param session 
     */
    private void finalizeUserSessionLog(HttpSession session) {

        String sessionId = session.getId();
        LogoutReasonType logoutReason = (LogoutReasonType) session.getAttribute("logoutreason");

        if (logoutReason == null) {
            logoutReason = LogoutReasonType.SESSION_TIMEOUT;
        }

        try {
            sessionData = sessionLogger.findBySessionId(sessionId);
        } catch (NonexistentEntityException | UnexpectedResultSetSizeException ex) {
            logger.log(Level.WARNING, " sessionDestroyed ", ex);
            return;
        }

        Calendar now = ts.getUtcDateTimeAsCalendar();
        sessionData.setLogoutTimestamp(now);
        sessionData.setLogoutReason(logoutReason);
        sessionLogger.update(sessionData);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:05:32.867

如果这对你有帮助...

在我们的应用程序中，我们扩展`HttpSessionListener`并使用`sessionDestroyed`了记录会话超时事件的方法。

并注册`web.xml`为

```
<listener>
    <listener-class>
        com.ourpackage.OurHttpSessionListener
    </listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:20:06.147

我相信您只能通过 ServletFilters 捕获 servlet 容器的事件。PhaseListener 仅存在于 JSF“会话”中，在 servlet 请求之后。检查 JSF 生命周期以确保。之后，您可以在 JSF 中创建另一个使“会话”无效的请求

# python - 如何基于 SQLAlchemy 模型生成 WTForm(s)？

> ID：11818253
> 
> 赞同：2
> 
> 时间：2012-08-05T16:50:46.110
> 
> 标签：python, forms, sqlalchemy, wtforms

我与[WTForms](http://wtforms.simplecodes.com)和[SQLAlchemy](http://www.sqlalchemy.org/)相关联，我想节省一些输入。

我如何检查 SQLA 模型模式（我使用声明性模型），并使用诸如`nullable=False`、`Unicode(50)`、 之类的东西来生成具有基本验证器设置的表单字段（如果可为 null 为 false 则为必需，如果字段为具有最大值的“varchar”则为长度等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:58:19.900

我发现了这个：[WTAlchemy](http://pypi.python.org/pypi/WTAlchemy)可能对某人有用

# android - 按钮还是列表？

> ID：11818257
> 
> 赞同：1
> 
> 时间：2012-08-05T16:51:18.670
> 
> 标签：android, android-listview, android-ui, android-button

我正在编写一个可以录制声音的应用程序。它将有4个类别：单词、句子、段落和故事。单词类别由假设记录的单词列表组成，句子和段落将以相同的方式工作。故事将允许用户记录他自己的故事。我的问题是实现它的最佳方法是什么？我应该使用代表 4 个类别的 4 个按钮还是创建一个 listView？请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:04:47.797

如果您的应用程序只会这样做，那么我建议您实施[Dashboard](http://www.androiduipatterns.com/2011/02/ui-design-pattern-dashboard.html)。这简单而高效，可以非常快速地访问主要功能。

希望这会帮助你。

# html - 添加嵌入式 Flash 时避免使用“GET”方法

> ID：11818258
> 
> 赞同：0
> 
> 时间：2012-08-05T16:51:26.507
> 
> 标签：html, flash, http

出于安全原因，我需要避免在我的应用程序中使用 GET HTTP 方法。我的代码中有以下闪存：

```
<OBJECT 
    style="width:130%;height:100%;position:relative;left:-180;" 
    CLASSID="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" 
    CODEBASE="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" 
    ID="theMovie"> 
<PARAM NAME="FlashVars" VALUE="' + sbImageList.getValue()+'"> 
<param name=Menu VALUE="TRUE">
<param name=METHOD VALUE="POST">
<PARAM NAME="src" VALUE="JPGViewer.swf"></OBJECT> 
```

这个嵌入式闪存使用“GET”方法进入服务器。是否可以强制“POST”方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:02:33.053

我想到的唯一可行的方法是使用 JS 创建手动请求，然后将结果存储在字符串值中并将其转换为**-URL**`data://`。

我从来没有这样做过，也没有在任何地方读过这个。

# macos - 如何检索使用中内存最密集的应用程序的名称？

> ID：11818261
> 
> 赞同：-1
> 
> 时间：2012-08-05T16:51:35.233
> 
> 标签：macos, process-management

我需要在 OS X 上检索内存最密集的应用程序* 的名称。解决方案应该在 Objective-C 中，同时最好避免使用第 3 方 API。解决方案*不能*包含任何解析。

*应用程序的内存强度可以定义为该应用程序使用的实际内存量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:51:45.423

您可以使用它[**`sysctl`**](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sysctl.3.html)来检索可用的进程。SO 问题“[我们可以检索当前在 iPhone 和 iPad 上运行的应用程序吗？](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad) ”有一个应该适用于 macOS 的答案……我试过了，只需将代码放入 Xcode 4.4 新 macOS 项目的答案中，#importing 并执行NSLog 在结果数组上而不是返回它，它整齐地显示收集的进程名称和 ID 数组。

虽然其中有大量信息`struct kinfo_proc`及其嵌套`struct extern_proc`，但不幸的是，我没有看到一种简单的方法来检索各个进程的内存信息。

为此，您可以咨询[`libtop.c`](http://www.opensource.apple.com/source/top/top-73/libtop.c)Apple 的开源产品。链接版本来自[MacOS X 10.8 库](http://www.opensource.apple.com/release/mac-os-x-108/)。

在任何情况下，如果您将 sysctl 中的可用进程与 libtop.c 中的进程信息检索代码结合起来，您最终应该得到一个完全符合您需要的程序化解决方案。

并且……另一方面……如果您不介意与这将需要的工作相比进行少量解析，请尝试 SO 答案[您可以使用 NSTask](https://stackoverflow.com/a/412573/774691)，仅替换`ps aux -m`该问题执行“grep”的位置。您只想从流中获取第一行真正的输出，并且您必须解析空格以获取包含 RSS 信息的列，但这可能比通过 libtop.c 获得所需内容更容易，取决于你需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:23:03.837

```
ps aux -m 
```

将根据内存（顶部的最高内存）为您打印出进程。如果您通过管道传输此命令然后过滤顶行来访问它。

[NSPipe 上的开发人员文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPipe_Class/Reference/Reference.html)

一旦你把它输入管道，你所要做的就是提取你想要的位（NSMutableString）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:03:44.117

Bash 非常适合这样的事情。使用 bash 您可以使用以下命令：

```
ps -p `ps aux | awk '{print $4,$2}' | sort -nr | head -n 1 | awk '{print $2}'` | awk '{print $4}' | tail -n 1 
```

（可能可以优化，但它仍然有效）

然后执行以下操作：

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"ps -p `ps aux | awk '{print $4,$2}' | sort -nr | head -n 1 | awk '{print $2}'` | awk '{print $4}' | tail -n 1"];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
NSLog (@"Command Returned:\n%@", string);

[string release];
[task release]; 
```

bash 命令有效，但目标 c 代码未经测试。

# javascript - SetTimeout 延迟在 jquery 幻灯片中未按预期工作

> ID：11818262
> 
> 赞同：0
> 
> 时间：2012-08-05T16:51:48.670
> 
> 标签：javascript, jquery, html, css

这是我的代码.... [http://jsfiddle.net/KQ8gW/](http://jsfiddle.net/KQ8gW/) 在此我已将 setTimeout 设置为 1 分钟，但在此之前调用了该函数。为什么会这样？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:55:35.733

您正在立即调用该函数，而不是传递对该函数的引用，并且您正在重复设置间隔。因此，您传递给`setInterval()`的是 execution 的返回值`Slide(c,n)`，而不是稍后将调用的函数。因此它会立即被调用，并且只调用一次。

要修复它，请更改此：

```
setInterval(Slide(c,n),60000); 
```

对此：

```
setTimeout(function() {Slide(c,n)},60000); 
```

* * *

如果这是我的代码，我什至不会使用计时器 - 我会像这样使用动画完成功能：

```
var n = $("#slideShow div img").length;
var c = 0;
Slide(c,n);

function Slide(c,n){
    c = ++c % n;
    $("#slideShow div").animate(
        {left:-500*c}, 
        3000, 
        function() {Slide(c,n)}
    );
}​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/nykd3/](http://jsfiddle.net/jfriend00/nykd3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:55:02.050

您设置了一个间隔，而不是超时。尝试使用`setTimeout(function, time)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:59:09.950

你在一个区间内的区间内调用一个区间......等等。

您每隔一分钟定期运行该函数，并且每次运行该函数时，您都会设置一个新的间隔，循环直到无穷大或更长。

将区间放在函数之外，并用函数调用它以避免 eval'ing，如下所示：

```
var n = $("#slideShow div img").length, c = 0;

Slide(c, n);
setInterval(function() { Slide(c, n); }, 60000);

function Slide(c, n) {
    c = ++c % n;
    $("#slideShow div").animate({
        left: -500 * c
    }, 7000);
}​ 
```

# asp.net - 缓存数据直到改变

> ID：11818268
> 
> 赞同：2
> 
> 时间：2012-08-05T16:52:29.370
> 
> 标签：asp.net, sql-server, linq-to-sql, webforms, mvp

我有一个旧网站，由于性能不佳，需要进行一些优化。它是一个以 linq to sql 作为数据层，以 MVP 模式作为 UI 模式的 asp.net 购物网站。

数据库中成本最高的实体是具有一对多关系的产品和类别表。这两个实体可能不会定期更改，除非管理员组的用户决定添加产品或类别……等等。我想知道为每个请求从这两个实体创建和获取所有内容的资源成本是多少！所以如果我有办法让我的数据保持活力……</p>

首先我想好了让我们使用 AJAX 进行数据检索，所以我将只创建那些我需要查询或绑定的实体，但是等等，如果不创建新的 DataContext 实例，我怎么能做到这一点？！！另一方面，由于内存成本，对整个 DataContext 使用缓存被认为是一个错误的决定。那么这里最好的选择是什么？我该如何改进？

**更新**

1）按照@HatSoft 的建议做。

**缺点：**这些方法对您的代码没有帮助，只会对数据库有帮助。除此之外，可能存在内存问题，因为我们将数据放入内存而不是呈现的 html，但是这可能是关于解耦的最佳选择。

2) 使用输出缓存，我们在带有 *.aspx 通配符的 http 处理程序中有此代码：

```
string pagePath = Context.Request.Url.AbsolutePath;
object cacheKey = application[pagePath];
if(cacheKey == null)
  return; //application restarted/first run so cache the stuff
else
  Context.Response.RemoveOutputCacheItem(pagePath); 
```

**缺点：**现在我们应该将 pagePath 链接到页面使用的每个数据库实体，但如果我这样做了，那么我将耦合事物而不是解耦合它们。这种方法也会遇到一些硬编码。

3) 另一种解决方案是在后缓存模式下输出缓存，而不是控制缓存模式。使用 Subsituation 元素并将 OutPutCache Duration 设置为 86400，以便每 24 小时重新创建一次页面。

**缺点：**硬编码用户控件以动态生成 Subsituation 元素的 html 输出。

所以你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:15:56.780

我建议你看看 SqlDependency 类请阅读这篇文章[http://www.asp.net/web-forms/tutorials/data-access/caching-data/using-sql-cache-dependencies-cs](http://www.asp.net/web-forms/tutorials/data-access/caching-data/using-sql-cache-dependencies-cs)

另外，如果适合您的应用程序，我建议您考虑在应用程序启动时将数据加载到缓存中。请在此处查看一个很好的示例[http://www.asp.net/web-forms/tutorials/data-access/caching-data/caching-data-at-application-startup-cs](http://www.asp.net/web-forms/tutorials/data-access/caching-data/caching-data-at-application-startup-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:41:24.990

使用 Linq2SQL，您可以使用[LinqToCache](http://code.google.com/p/linqtocache/)[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx) ，它为您的 LINQ 查询提供强大的缓存。它在第一次访问（底层的第一次迭代）后转换`IQueryable<Products>`into`IEnumerable<Products>`并枚举内存`IQueryable`。根据`SqlDependency`数据更改通知，它会使列表无效，随后的访问将再次从数据库中查询，并缓存结果。

我的建议是将产品列表和类别缓存在内存中，因为它们很少更改，而且我希望它们的大小相当有限。

# macos - 在 XCode 4.4 中正确调试

> ID：11818270
> 
> 赞同：1
> 
> 时间：2012-08-05T16:52:54.357
> 
> 标签：macos, xcode4, cocos2d-iphone

在 XCode 4.2 上，当调试时断点处于活动状态时，如果我将鼠标指针放在变量名称上（进入源代码）并出现黄色工具提示，让我能够查看变量值（对于 int、float 等基本类型，和别的）。

昨天我将 XCode 更新到 4.4（用于在 iOS 5.1.1 上测试我的应用程序），但是当游戏停止到断点时，我将鼠标指针移到一个变量上，没有显示黄色工具提示。

我认为这种“快速调试”太重要了，因为程序员，否则，对于视图类字段，需要： 1\. 选择“Local”而不是“Auto” 2\. 打开“self”对象 3\. 搜索变量以查看值这很慢......

有谁知道如何解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:20:19.007

您可能只需要清理构建文件夹并让 Xcode 重新索引项目。从菜单中选择 Clean 选项时按住 Option 键，它将变为 Clean Build Folder。

# c++ - 模板类中的运算符“()”

> ID：11818271
> 
> 赞同：0
> 
> 时间：2012-08-05T16:52:54.407
> 
> 标签：c++, operator-overloading

我有一个模板类，其中 typename 是指向函数的指针：

`CHook<NTSTATUS(__stdcall*)(PHANDLE,ACCESS_MASK,POBJECT_ATTRIBUTES,HANDLE,PCLIENT_ID,PCONTEXT,PUSER_STACK,BOOLEAN)> hZwCreateThread;`

现在我称它们为 hZwCreateThread.Call()(...params...); 但我想使用 () 运算符重载使其成为 hZwCreateThread(...params...) 。这段代码：

```
const FuncType operator()() { return m_OrigFunc; }; 
```

使其仅以这种方式工作：hZwCreateThread()(...params...)。如何使它像我上面写的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:03:59.117

您可以使用转换运算符。

```
template <typename F>
struct CHook {
    F m_OrigFunc;
    CHook (F func) : m_OrigFunc(func) {}
    operator F () const { return m_OrigFunc; }
}; 
```

这将允许这样的代码：

```
CHook<int(*)(const char *,...)> chook(printf);
chook("%s\n", "Hello world!"); 
```

# asp.net-mvc-3 - MVC3 Ajax显示数组中的所有值

> ID：11818273
> 
> 赞同：0
> 
> 时间：2012-08-05T16:53:06.367
> 
> 标签：asp.net-mvc-3

我从我的行动控制中获得我的价值观，但我想展示我所有的价值观。如何在ajax中使用for循环或foreach来显示数组的所有元素？

这是我的脚本

> $.ajax({ type: "get", url: "Home/Oku", data: {}, dataType: "json", success: function (data) { for (var i = 0; i< data.length; i++) { $("img#myimage").attr("src", data[i]) i++; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:02:53.803

目前还不是很清楚你要做什么。目前尚不清楚您的控制器操作使用什么格式返回数据。从您显示的代码中，我可以假设它返回一个字符串数组。然后我认为这些字符串表示某些图像的 url，因为您似乎试图将它们分配给 img 标签的 src 属性。除了您使用 id 选择器并始终为每个元素覆盖相同的 img 标记。

如果您想拥有多个图像，那么您可以动态创建它们。首先创建一个空占位符：

```
<div id="images"></div> 
```

进而：

```
$.ajax({
    url: 'Home/Oku', 
    type: 'GET', 
    success: function (data) {
        var images = '';
        for (var i = 0; i < data.length; i++) {
            images = images + '<div><img src="' + data[i] + '" /></div>';
        }
        $('#images').html(images);
    }
}); 
```

这假设您的控制器操作返回一个 JSON 编码的字符串数组，表示图像的 url：

```
public ActionResult Oku()
{
    var imageUrls = new[] 
    { 
        "http://example.com/foo.jpg", 
        "http://example.com/bar.jpg" 
    };
    return Json(imageUrls, JsonRequestBehavior.AllowGet);
} 
```

# c# - 如果我有无限循环 while(true) 我如何使用外部标志来停止/继续循环？

> ID：11818275
> 
> 赞同：-3
> 
> 时间：2012-08-05T16:53:11.933
> 
> 标签：c#

我需要做的是添加一个或两个带有标志的按钮，该标志将停止/继续循环。我该怎么做 ？

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    while(true)
    {
        cpuView();
        gpuView();
        Thread.Sleep(1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:59:04.810

我的建议是在这里阅读 MSDN 上的示例代码：[BackgroundWorker Class (MSDN)](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。他们的示例显示了取消工人的正确方法。

* * *

您还可以使用`break`退出循环：

```
bool stop = false;

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    while(true)
    {
        if(stop)
            break; // this will exit the while loop

        cpuView();
        gpuView();
        Thread.Sleep(1000);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T16:59:37.517

创建一个自定义类，该类具有取消和暂停状态的布尔值。在你的 backgroundWorker.DoWork([instance of MyCustomObject here]) 参数中从该类传递一个对象

您可以使用按钮事件从原始线程更新属性。

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    MyCustomObject cancellationStatus = e.Argument as MyCustomObject
    while(!cancellationStatus.Cancelled)
    {
        if(!cancellationStatus.Paused)
        {
            cpuView();
            gpuView();
        }
        Thread.Sleep(1000);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T18:16:25.787

首先，您创建一个执行任务的方法。然后将类的实例声明`Threading`为

```
Threading thrd=new Threading(signature of method defined) 
```

然后在您想要的任何按钮中编写一个事件处理程序。

```
t.start()
t.abort()
t.resume() 
```

是开始停止或恢复线程的方法

# java - Eclipse Juno 上的独立 OSGi (Equinox) 服务器

> ID：11818277
> 
> 赞同：5
> 
> 时间：2012-08-05T16:53:31.007
> 
> 标签：java, eclipse-plugin, osgi

我正在尝试从 Eclipse Juno Release 获取 osgi 服务器并独立运行它。一些旧教程说，只需抓住`org.eclipse.osgi_VERSION.jar`就足以从命令行启动它

```
java -jar  org.eclipse.osgi_VERSION.jar -console 
```

当我尝试这样做时，它没有按预期显示提示，而是静静地坐着，好像在等待某事发生。

但是，我可以通过执行 来轻松地启动和安装包 `./eclipse -console`，这显然不是在服务器上运行时的选项，我想在运行时部署包。

一些谷歌搜索显示我需要从这里和那里收集罐子（甚至是 Apache Felix 的 gogo），但找不到任何具体的东西可以让我以“无头”方式运行这个东西。

有没有办法以一种干净简单的方式做到这一点，或者你会建议转向 Apache Felix？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T06:44:39.140

Juno 中的 Equinox 不再包含开箱即用的控制台。它现在包含在一个单独的包中，该包在 Apache GoGo shell 之上实现了 Equinox 控制台。

*因此，用于运行 Equinox（包括控制台*）的最小捆绑包设置为：

*   org.eclipse.osgi
*   org.eclipse.equinox.console
*   org.apache.felifx.gogo.command
*   org.apache.felifx.gogo.runtime
*   org.apache.felifx.gogo.shell

要运行 SSH 控制台，还需要：

*   org.eclipse.equinox.console.ssh
*   org.apache.mina.core
*   org.apache.sshd.core

此外，您需要使用*不同的配置区域*。Equinox 从 config.ini 读取设置（例如要使用的包、它们的启动级别、要启动的应用程序等）。因此，只要您使用与 Juno 相同的配置区域，您将始终处于 Juno 环境中。直接修改 config.ini 时，您可能会损坏 Juno 安装。

更好的开始是下载 Equinox Juno OSGi 入门套件：

*   [http://download.eclipse.org/equinox/drops/R-3.8-201206081400/index.php](http://download.eclipse.org/equinox/drops/R-3.8-201206081400/index.php)

您还可以尝试其中一种 OSGi Equinox 服务器发行版：

*   [http://www.eclipse.org/virgo/](http://www.eclipse.org/virgo/)
*   [http://www.eclipse.org/gyrex/](http://www.eclipse.org/gyrex/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:46:47.753

试试这个：

```
java -classpath ./plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
    org.eclipse.equinox.launcher.Main -console 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T07:09:47.133

你应该试试 Apache karaf。它可以与 Felix 或 Equinox 一起运行，并包含您所需的一切，以获得一个像样的 OSGi 服务器。见[http://karaf.apache.org/](http://karaf.apache.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T12:54:53.410

此链接提供有关基于 Apache Felix Gogo shell 的新控制台的所有详细信息：[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide% 2Fconsole_shell.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fconsole_shell.htm)

简短的步骤是：

1.  将必要的捆绑包放在一个文件夹中。捆绑包是：org.apache.felix.gogo.command_0.8.0v.jar org.apache.felix.gogo.runtime_0.8.0v.jar org.apache.felix.gogo.shell_0.8.0v.jar org.eclipse。 equinox.console_1.0.0v.jar org.eclipse.osgi.jar

2.  创建配置子文件夹和 config.ini 文件，内容如下

    osgi.bundles=./org.apache.felix.gogo.runtime_0.8.0v.jar@start,\./org.apache.felix.gogo.command_0.8.0v.jar@start,\./org.apache。 felix.gogo.shell_0.8.0v.jar@start,\./org.eclipse.equinox.console.jar@start,\osgi.console.enable.builtin=false

3.  使用以下命令启动 Equinox 框架：java -jar org.eclipse.osgi.jar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-26T19:54:03.737

要使用旧控制台运行，您可以调用：

`java -Dosgi.console.enable.builtin=true -jar org.eclipse.osgi_VERSION.jar -console`

请注意，这是使用旧的（非 Gogo 实现），并且内置控制台可能会在某个时候被删除。但是，您应该考虑使用 Gogo shell 运行，这是未来 Eclipse 和 Felix 版本的事实标准。

# android - Android中的可展开列表视图对点击没有反应，它不会展开

> ID：11818278
> 
> 赞同：21
> 
> 时间：2012-08-05T16:53:34.370
> 
> 标签：android, expandablelistview

我有一个可扩展的列表视图。我放了一些虚拟数据，一切看起来都还可以，但是当我运行应用程序时，所有组都处于折叠模式，当我单击每个组时它们都不会生效。这是屏幕截图：

![在此处输入图像描述](../Images/74bb06541b528b3a6fb8e4bda7cec652.png)

组的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/bg_slider"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tvRecipeName"
        style="@style/normal_text.bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="5dp"
        android:focusable="false"
        android:lines="1"
        android:maxLines="1"
        android:text="@string/dd_title" />

    <ImageButton
        android:id="@+id/ibDeleteRecipe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="15dp"
        android:background="@color/transparent"
        android:contentDescription="@string/cd"
        android:focusable="false"
        android:src="@android:drawable/ic_menu_delete" />

    <View
        android:layout_width="1dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/tvRecipeName"
        android:focusable="false" />

</RelativeLayout> 
```

孩子的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/White"
    android:gravity="left|center_vertical" >

    <View
        android:layout_width="1dp"
        android:layout_height="35dp"
        android:layout_toLeftOf="@+id/tvIngredient"
        android:focusable="false" />

    <TextView
        android:id="@+id/tvIngredient"
        style="@style/normal_text_black"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="30dp"
        android:layout_marginRight="5dp"
        android:lines="1"
        android:maxLines="1"
        android:text="@string/dd_title"
        android:focusable="false" />

    <ImageButton
        android:id="@+id/ibDeleteIngredient"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="15dp"
        android:background="@color/transparent"
        android:contentDescription="@string/cd"
        android:focusable="false"
        android:src="@android:drawable/btn_dialog" />

</RelativeLayout> 
```

在 main.xml 中，可扩展列表的定义是：

```
<ExpandableListView
            android:id="@+id/elv"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /> 
```

我有一个适配器，为此我编写了以下代码：

```
public class ExpAdapter extends BaseExpandableListAdapter {

    private final String TAG = "ExpAdapter";
    private Context context;
    static final String arrGroupelements[] = {"India", "Australia", "England", "South Africa"};
    static final String arrChildelements[][] = { {"Sachin Tendulkar", "Raina", "Dhoni", "Yuvi" },
                                                 {"Ponting", "Adam Gilchrist", "Michael Clarke"},
                                                 {"Andrew Strauss", "kevin Peterson", "Nasser Hussain"},
                                                 {"Graeme Smith", "AB de villiers", "Jacques Kallis"} };

    public ExpAdapter(Context context) {
        this.context = context;

        Log.i(TAG, "Adapter created.");
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {

        return 0;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater =  (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.elv_child, null);
        }

        TextView tvItem = (TextView) convertView.findViewById(R.id.tvIngredient);
        ImageButton ibDelete = (ImageButton) convertView.findViewById(R.id.ibDeleteIngredient);
        ibDelete.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.i(TAG, "******");
            }
        });
        tvItem.setText(arrChildelements[groupPosition][childPosition]);

        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return arrChildelements[groupPosition].length;
    }

    @Override
    public Object getGroup(int groupPosition) {
        return null;
    }

    @Override
    public int getGroupCount() {
        return arrGroupelements.length;
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.elv_group, null);
        }

        TextView tvItem = (TextView) convertView.findViewById(R.id.tvRecipeName);
        ImageButton ibDeleteRcipe = (ImageButton) convertView.findViewById(R.id.ibDeleteRecipe);
        ibDeleteRcipe.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.i(TAG, "%%%%%%");
            }
        });
        tvItem.setText(arrGroupelements[groupPosition]);

        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

} 
```

最后，在片段活动的代码中，我有：

```
public class ShoppingList extends FragmentActivity {    
        ExpAdapter adapter = new ExpAdapter(this);
        //Linking expnadable list view
        expListView = (ExpandableListView) findViewById(R.id.elv);
        expListView.setAdapter(adapter);
        expListView.setOnGroupExpandListener(new OnGroupExpandListener() {
            @Override
            public void onGroupExpand(int groupPosition) {
                Log.i(TAG, "Group " + groupPosition + " expanded.");
            }
        });
        expListView.setOnGroupCollapseListener(new OnGroupCollapseListener() {
            @Override
            public void onGroupCollapse(int groupPosition) {
                Log.i(TAG, "Group " + groupPosition + " collapsed.");
            }
        });
        expListView.setOnChildClickListener(new OnChildClickListener() {
            @Override
            public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
                Log.i(TAG, "item " + childPosition + " of group " + groupPosition + " clicked.");
                return false;
            }
        });

} 
```

当我运行应用程序并单击父母时，没有任何反应。我尝试在购物类末尾添加以下代码行：

```
int count = adapter.getGroupCount();
for (int position = 1; position <= count; position++)
    expListView.expandGroup(position - 1); 
```

现在，当我运行应用程序时，结果是这样的屏幕截图：

![在此处输入图像描述](../Images/06f2843b6377946feff9a395cfa74112.png)

如果我单击删除按钮（父或子），我可以看到它们生效（当我检查 logcat 时），但是当我单击子或父时没有任何反应。所以，我不知道为什么回调不起作用。根据我的研究，我发现我需要将`Focussable`图像按钮设置为`false`. 正如您在 XML 文件中看到的那样，我做到了，但是当我单击父行和子行时，我仍然看不到任何响应。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-08T03:59:40.847

最后我找到了解决方案:)

我不知道是虫子还是疾病还是...

如上所述，根据我的研究，我发现我们需要将图像视图/框的焦点能力设置为“false”。我在 XML 文件中做了它，它没有工作。我在 XML 中将焦点能力设置为“真”，并在代码中将其设置为假。像这样：

```
@Override
    public View getGroupView(final int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.elv_group, null);
        }

        TextView tvItem = (TextView) convertView.findViewById(R.id.tvRecipeName);
        ImageButton ibDeleteRcipe = (ImageButton) convertView.findViewById(R.id.ibDeleteRecipe);
        ibDeleteRcipe.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {               
                ...
            }
        });
        ibDeleteRcipe.setFocusable(false);

        tvItem.setText(arrGroupElements[groupPosition]);

        return convertView;
    } 
```

因此，基于我的成就！它应该在代码而不是 XML 中设置为“false”！现在的问题是有什么区别？-我不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-22T04:31:42.990

有必要`android:focusable="false"`在布局 xml 中为可扩展列表视图项中的可聚焦视图定义，而不是在“ **ExpandableListView** ”属性中定义。

例如：如果自定义父列表项包含一个复选框（它将自动获得焦点），它应该如下所示。

```
<CheckBox
   android:id="@+id/cbkSelectDownload"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:focusable="false"/> 
```

# javascript - 在 Javascript 中搜索和突出显示 - 从 head 部分

> ID：11818280
> 
> 赞同：0
> 
> 时间：2012-08-05T16:53:52.017
> 
> 标签：javascript

我正在尝试在 javascript 中创建一个荧光笔，以捕获选择的文本并突出显示（更改文本颜色和背景）。我能够使用 mouseup/down （使用[http://www.codetoad.com/javascript_get_selected_text.asp](http://www.codetoad.com/javascript_get_selected_text.asp)实现）达到它捕获的地步，但是如果我结合更改颜色（来自[http://www.nsftools.com /misc/SearchAndHighlight.htm](http://www.nsftools.com/misc/SearchAndHighlight.htm)），它不起作用并且页面变得无响应。我认为，由于我正在调用第二个脚本来更改 body 标记内的颜色，因此它无法正常工作。我用谷歌搜索，但找不到任何混合上述两种解决方案的解决方案。

使这有点复杂的是我不希望将动作附加到按钮上，即一旦选择了文本，就应该将其保存在变量中并立即着色，即鼠标一抬起。我尝试使用 CSS，但它只适用于第一个突出显示，即一旦您选择另一个文本，第一个突出显示被删除，新文本被突出显示....

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:04:13.703

您可以使用以下两个答案的组合来执行此操作：

*   [https://stackoverflow.com/a/5887719/96100](https://stackoverflow.com/a/5887719/96100)
*   [https://stackoverflow.com/a/8713757/96100](https://stackoverflow.com/a/8713757/96100)

这是一个演示：http: [//jsfiddle.net/E2bU6/](http://jsfiddle.net/E2bU6/)

# php - 如何检查 Facebook 页面是否对点赞框有效？

> ID：11818288
> 
> 赞同：0
> 
> 时间：2012-08-05T16:54:21.900
> 
> 标签：php, facebook

我正在编写一个代码，允许用户在他们的页面上放置一个like box，所以我需要确保该页面对于一个like box 是有效的，因为个人页面不起作用。我目前正在使用 facebook.php 文件，但是当我使用以下代码时：

```
// $fbexist is the page username in this case "clubcoreme"
function CheckFB($fbexist) {  
        require_once("include/facebook.php");

        $config = array();
        $config['appId'] = 'APP_ID';
        $config['secret'] = 'APP_SECRET';

        $facebook = new Facebook($config);

        try {
            $facebook->api($fbexist);
            if (!$facebook->api($fbexist)) {
                $personal = "No";
            } else {
                $personal = "Yes";
            }

        } catch(FacebookApiException $e) {
            $checked = array(false, $personal);
            return $checked;
        }
            $checked = array(true, $personal);
            return $checked;
    } 
```

它总是以 $personal = "No" 的形式返回，这应该意味着它对类似框无效。但我知道我可以将 clubcoreme 用于类似的盒子。当我尝试“JohnnieWalkerLebanon”而不是 clubcoreme 时，它​​会起作用。我究竟做错了什么？有没有更好的方法呢？

先感谢您，

罗伯特

# eclipse-emf - 动态 XText 模型反序列化

> ID：11818291
> 
> 赞同：1
> 
> 时间：2012-08-05T16:54:41.963
> 
> 标签：eclipse-emf, xtext, acceleo, ocl

我有一个 UML 模型，其中包含符合 XText Grammar/MetaModel 的文本的 OpaqueActions。我正在通过 ACCELEO 转换将 UML 模型转换为文本。我想从 ACCELEO 脚本调用一个 Java 服务，该服务将模型中不透明操作中的文本作为输入，并提供相关模型的根元素作为输出，以便我可以从 ACCELEO 无缝使用它。

为此，我需要使用以下方法定义 Java 类：将字符串作为参数，调用 XTEXT，解析文本，如果正确，则生成相关的 EMF 模型。假设文本是 OCL（不是，但我猜过程是一样的），你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:50:49.297

您可以尝试将 OpaqueActions 作为资源集中的资源内容加载，该资源集中包含当前处理的模型。这将返回该字符串的 AST。

# r - 将 TRUE/FALSE 矩阵合并为一个

> ID：11818295
> 
> 赞同：2
> 
> 时间：2012-08-05T16:55:33.757
> 
> 标签：r

如果我有这个矩阵（我命名为数据）：

```
 [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9]
[1,] FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE
[2,] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE
[3,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[4,] FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE
[5,] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE
[6,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[7,] FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE
[8,] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE
[9,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE 
```

我想将这些列组合成一列，如下所示：（其中行中的一个 TRUE 等于 TRUE）

```
 [,1]   
 [1,] TRUE 
 [2,] TRUE 
 [3,] FALSE 
 [4,] TRUE   
 [5,] TRUE 
 [6,] FALSE  
 [7,] TRUE   
 [8,] TRUE  
 [9,] FALSE 
```

我知道我可以做类似的事情（使用 |）：

```
 data2[1:9,1]<-data[,1]|data[,2]|data[,3]|data[,4]… 
```

然后 data2 将包含单个列，其中组合了不同的列。但如果我有很多列（例如 ncol=100），这不是一个好方法

我想有一些简单的方法可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T17:15:08.153

这是另一个利用 R 如何在逻辑和数字之间转换的答案：

当从逻辑变为数字时，`FALSE`变得`0`和`TRUE`变得`1`如此`rowSums`为您提供`TRUE`每行的数量：

```
rowSums(data)
# [1] 3 3 0 3 3 0 3 3 0 
```

当从数字变为逻辑时，`0`变为`FALSE`，其他任何东西都是`TRUE`，因此您可以提供`rowSums`to的输出，`as.logical`它将指示一行是否至少有一个`TRUE`：

```
as.logical(rowSums(data))
# [1]  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE 
```

不过，我喜欢 Tyler 的回答，它可能效率较低（有待证明），但我发现它更直观。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T17:00:17.477

您可以使用`any`with`apply`如下：

```
mat <- matrix(sample(c(TRUE, FALSE), 100,TRUE), 10)
apply(mat, 1, any) 
```

# haskell - 无法将预期类型“（t1，t2，t0）”与实际类型“[a0]”匹配

> ID：11818303
> 
> 赞同：0
> 
> 时间：2012-08-05T16:56:51.603
> 
> 标签：haskell, types, tuples, knapsack-problem

我正在尝试用输入解决分数背包问题，

```
[("label 1", value, weight), ("label 2", value, weight), ...] 
```

和输出，

```
[("label 1", value, solution_weight), ("label 2", value, solution_weight), ...] 
```

但我不断收到错误`computeKnapsack`：

```
"Couldn't match expected type `(t1, t2, t0)' with actual type `[a0]`" 
```

我无法理解问题可能是什么。我正在尝试创建一个包含 3 项元组的列表。我怎样才能让它停止期待单个 3 条目元组？

```
fst3 (a,b,c) = a
snd3 (a,b,c) = b
trd3 (a,b,c) = c
fst4 (a,b,c,d) = a
snd4 (a,b,c,d) = b
trd4 (a,b,c,d) = c
qud4 (a,b,c,d) = d

sortFrac (a1, b1, c1, d1) (a2, b2, c2, d2)
  | d1 > d2 = GT
  | d1 <= d2 = LT

fracKnap (x:xs) =
    fractionalKnapsack (x:xs) []

fractionalKnapsack (x:xs) fracList =
    if length (x:xs) <= 1
        then computeKnapsack (sortBy sortFrac (((fst3 x),(snd3 x),(trd3 x),(snd3 x) / (trd3 x)):fracList)) 100
        else fractionalKnapsack xs (((fst3 x),(snd3 x),(trd3 x),(snd3 x) / (trd3 x)):fracList)

computeKnapsack (x:xs) weightLeft =
    if length (x:xs) <= 1
        then (fst4 x, snd4 x, ((floor (weightLeft / (qud4 x)))*(qud4 x)))
        else (fst4 x, snd4 x, ((floor (weightLeft / (qud4 x)))*(qud4 x))):(computeKnapsack xs (weightLeft-(floor (weightLeft / (qud4 x))*(qud4 x)))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T17:32:28.850

结果的`then`分支中`computeKnapsack`是单个 3 元组，但在`else`分支中是 3 元组的列表。

* * *

我要`computeKnapsack`为你重写。我将从修复错误的版本开始：

```
computeKnapsack (x:xs) weightLeft =
    if length (x:xs) <= 1
        then [(fst4 x, snd4 x, ((floor (weightLeft / (qud4 x)))*(qud4 x)))]
        else  (fst4 x, snd4 x, ((floor (weightLeft / (qud4 x)))*(qud4 x))) : (computeKnapsack xs (weightLeft-(floor (weightLeft / (qud4 x))*(qud4 x)))) 
```

首先，我要说如果第一个参数`computeKnapsack`是空列表会发生什么：

```
computeKnapsack []     _          = []
computeKnapsack (x:xs) weightLeft =
    (fst4 x, snd4 x, ((floor (weightLeft / (qud4 x)))*(qud4 x))) : (computeKnapsack xs (weightLeft-(floor (weightLeft / (qud4 x))*(qud4 x)))) 
```

它使我们能够摆脱`if`-test，使代码整体更短，更容易理解。

接下来，我将解构`x`：

```
computeKnapsack []             _          = []
computeKnapsack ((a,b,_,d):xs) weightLeft =
    (a, b, ((floor (weightLeft / d))*d)) : (computeKnapsack xs (weightLeft-(floor (weightLeft / d)*d))) 
```

您可能更愿意遵循 leftaroundabout 的建议来创建具有有意义名称的记录类型。但是如果你继续使用一个元组，通过模式匹配来解构它比使用你的`fst4`, `snd4`etc 函数要清楚得多。

同样，代码现在更短且更易于理解，尽管如果我们使用比`a`、`b`和更有意义的名称可能会有所帮助`d`。

我们可以继续这样做：

```
computeKnapsack []             _          = []
computeKnapsack ((a,b,_,d):xs) weightLeft = (a, b, weight) : (computeKnapsack xs (weightLeft - weight))
  where weight = floor (weightLeft / d) * d 
```

在这里，我发现在两个不同的地方计算了相同的值，并将该值提取到它自己的命名变量中。`weight`只需要计算一次而不是两次，因此`computeKnapsack`现在效率略高。更重要的是，我现在明白了`computeKnapsack`在做什么。

我知道您是 Haskell 的新手。请将此作为有关如何编写更清晰的 Haskell 代码的建设性建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:43:32.483

我冒昧地清理了您的`computeKnapsack`功能，以便您可以更清楚地看到问题：

```
computeKnapsack (x:xs) weightLeft =
 let e = (fst4 x, snd4 x, floor (weightLeft / qud4 x) * qud4 x)
  in if length (x:xs) <= 1
     then e
     else e:computeKnapsack xs (weightLeft - floor (weightLeft / qud4 x) * qud4 x) 
```

我的改变纯粹是装饰性的。即使在我更改之后，您的`computeKnapsack`功能仍然会损坏，算法不好，编码风格也不好。

从重写后的版本可以看出，你的`if`语句有两个分支，一个返回一个元组，另一个返回一个元组列表。您可以简单地通过更改第一个分支以返回具有单个元素的列表来修复它：

```
computeKnapsack (x:xs) weightLeft =
 let e = (fst4 x, snd4 x, floor (weightLeft / qud4 x) * qud4 x)
  in if length (x:xs) <= 1
     then [e]
     else e:computeKnapsack xs (weightLeft - floor (weightLeft / qud4 x) * qud4 x) 
```

此外，在向 StackOverflow 提交第三个问题之前，请花时间完成 Haskell 的介绍性教程，例如[http://learnyouahaskell.com/](http://learnyouahaskell.com/)，这将有助于解决您的许多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:07:13.630

一个问题在`fractionalKnapsack`. `computeKnapsack`在该行中，您使用元组而不是作为输入调用函数`list`。

# javascript - 简化复杂的 if 语句

> ID：11818305
> 
> 赞同：1
> 
> 时间：2012-08-05T16:57:04.403
> 
> 标签：javascript, backbone.js

以下代码取自[Backbone.js Events#off()](https://github.com/documentcloud/backbone/blob/master/backbone.js#L118)

如何简化 IF 部分使其易于理解？

```
for (i = list.length - 2; i >= 0; i -= 2) {
    if (!(callback && list[i] !== callback || context && list[i + 1] !== context)) {
        list.splice(i, 2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:59:52.487

```
var noCallback = callback && list[i] !== callback;
var noContext = context && list[i + 1] !== context;
if(! noCallback && ! noContext){...} 
```

或者按照评论中的建议删除否定：

```
var callbackCheck = !callback || list[i] === callback;
var contextCheck = !context || list[i + 1] === context;
if(callbackCheck && contextCheck ){...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:15:31.003

一些布尔数学：

```
!(callback && list[i] !== callback || context && list[i + 1] !== context)
!(!(!callback || list[i] === callback) || !(!context || list[i + 1] === context))
(!callback || list[i] === callback) && (!context || list[i + 1] === context) 
```

我认为[析取范式比否定的](http://en.wikipedia.org/wiki/Disjunctive_normal_form)[联合范式](http://en.wikipedia.org/wiki/Conjunctive_normal_form)更容易理解。

为了使单个部分更容易理解，请使用说出变量名（我不知道这个范围，你可能会找到更好的东西）：

```
var rightCallback = !callback || list[i] === callback;
var rightContext = !context || list[i + 1] === context;
if (rightCallback && rightContext) {…} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:01:17.323

我建议将语句封装成一个具有描述性名称的函数（我不明白你想做什么），然后调用

```
if (true == meaningfulConditionName(list, callback))
{
    list.splice(i, 2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T00:06:04.827

不能比这更简化：

```
for (i = list.length - 2; i >= 0; i -= 2) callback && list[i] !== callback || context && list[i + 1] !== context || list.splice(i, 2) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-05T17:31:09.513

这是我的版本，通过了所有 Backbone.js 测试，并且会比原来的版本慢

```
 if(
      // callback defined, context is null
      // remove callback for all context
      ( callback && list[i] === callback
         && !context)

      // callback defined and context is defined
      // ie remove specified callback for specified context
      || ( callback && list[i] === callback
           && context && list[i+1] === context)

      // callback NOT defined and context is defined
      // ie removed all callback for specific context
      || ( !callback && list[i] !== callback
           && context && list[i+1] === context )

      // callback NOT defined and context NOT defined
      // i.e. removed everything, this is unreachable code
      // as it is caught by 
      // https://github.com/documentcloud/backbone/blob/master/backbone.js#L112
      // and https://github.com/documentcloud/backbone/blob/master/backbone.js#L103
      || ( !callback && !context )

      ) {

            // remove callback and context
            list.splice( i, 2 );
  } 
```

# java - Android 项目无法运行。显示错误

> ID：11818310
> 
> 赞同：1
> 
> 时间：2012-08-05T16:57:46.110
> 
> 标签：java, android, eclipse

一切都安装正确。我正在使用 Windows XP、JDK 7.5、Eclipse 4.2。AVD 也设置正确

当我运行项目时，它不会在虚拟设备中显示。这是我得到的错误：

```
[2012-08-05 11:49:09 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2012-08-05 11:49:09 - Emulator] WARNING: SD Card image already in use: E:\Documents and Settings\chamara\.android\avd\Gingabread1.avd/sdcard.img
[2012-08-05 11:49:09 - Emulator] ko:Snapshot storage already in use: E:\Documents and Settings\chamara\.android\avd\Gingabread1.avd/snapshots.img 
```

[图 1 图](http://imageshack.us/photo/my-images/855/anroidhelp5.jpg) [2](http://img855.imageshack.us/img855/3056/anroidhelp5.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:31:46.133

听起来您的模拟器退出相当不优雅，并且将所有内容都锁定了。

查看您的`E:\Documents and Settings\chamara\.android\avd\Gingabread1.avd`目录并删除以 . 结尾的所有目录`.lock`。这应该允许您再次启动虚拟设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:03:14.723

我不知道确切的问题是什么，但请尝试移除您的 SD 卡并重新启动 Eclipse ......

# c++ - 我正在尝试 [in C++] 实践多态性和 OOD 原则。需要指导和回答几个问题

> ID：11818313
> 
> 赞同：0
> 
> 时间：2012-08-05T16:58:22.750
> 
> 标签：c++, oop, polymorphism, sdl, virtual-functions

我正在编写一个简单的 2D 游戏，以带有 RPG 元素的迷宫为中心。它主要用于学习目的，以练习课程设计、图论算法、数据结构使用和使用 2D 图形。

该计划的简要概述：

游戏本身是基于瓷砖的。它目前在屏幕上生成并绘制迷宫，允许玩家移动和墙壁碰撞检测；此外，它还可以处理较大迷宫的屏幕滚动。

无论如何，现在我正在构建一个对象来处理在地图周围放置对象。首先是金币，然后是心和物品。我认为这将是练习继承和多态的好时机，但我还没有接受过这种设计的任何正式培训。这是头文件：

```
#ifndef MAP_OBJECT_H
#define MAP_OBJECT_H

#include "Common.h"
#include "Utility Functions.h"

const int TILE_SIZE = 80;

class MapObject
{
public:

    MapObject(unsigned int nClips, unsigned int r, unsigned int c, unsigned int cSize)     :
         sheet(0), clips(0), row(r), col(c), numClips(nClips), clipSize(cSize)
    {
        //For those of you who aren't familiar with sprite sheet usage, basically this
        // handles which part of the sprite sheet your on, so it will draw the correct sprite to the screen
        if(numClips > 0) clips = new SDL_Rect[numClips];
        box.h = clipSize;
        box.w = clipSize;
    }

    virtual ~MapObject()  //NOt sure if this is right.  All the derived classes will
                          // behave the same upon deletion, since the only resource 
                          //  that got allocated was for the box SDL_rect
    {
        if(clips) delete[] clips;
    }

    void initBox(int modX, int modY);
    //I think each object will draw a little different, so I made it virtual
    virtual void draw() = 0;
    //Same with interaction--although I'm not sure how my player class is going to be able to handle this yet
    virtual void interact() = 0;

     SDL_Rect getBox() const;

 private:
    SDL_Surface*  sheet;
    SDL_Rect      box;
    SDL_Rect*     clips;
    unsigned int  row, col;
    unsigned int  numClips;
    unsigned int  clipSize;

     MapObject() {}  //Made this private because I want the memory to be allocated, and 
                     // numClips needs to be initialized for that to happen, so 
                     //basically I'm forcing the user to use the constructor with parameters
};

class Coin : public MapObject
{
    enum  CoinFace  //This represents all the different coin facings in the sprite 
                     //sheet, so that is can animate.  Used in the draw function.
    {
        FRONT,
        TURN1,
        TURN2,
        TURN3,
        USED
    };

    CoinFace  active;

public:
    virtual void draw(SDL_Surface* destination);
    virtual void interact();
};

#endif //MAP_OBJECTS 
```

我最大的问题是一个普遍的问题：这是我设计的一个好的开始吗？他们有明显的问题吗？滥用 OOD 原则/惯例？

像这样定义虚拟析构函数会允许所有派生类使用它吗？还是我需要为每个派生类定义它？

我意识到这很多，我感谢任何帮助。我真的很想了解 OOD 以及如何使用多态性，所以一些专业人士的帮助会非常有用。

再次感谢。

编辑：我的大问题也是开始能够修改派生类中的私有数据成员的问题。如果我需要这样做，我听说这是糟糕的类设计，而且我不知道如何编写一个好的接口，我猜。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T17:13:48.373

部分问题取决于意见问题。尽管如此：

1.  我在这里只能说你的方法是可行的，而且你正在努力实现它。只是不要忘记定义 Coin 的构造函数。
2.  虚拟析构函数的全部目的是在我们只有一个基类类型的指针时调用适当的析构函数。此外，派生的析构函数在自动调用基析构函数之前执行，无需显式调用。在这种情况下，a 指向的 Coin`MapObject*`将被正确地销毁，它按顺序`delete`执行`~Coin()`和。`~MapObject()`
3.  这个问题很容易变成关于正确接口构造的辩论，但这里有一些解决方案：
    *   通过构造函数定义私有成员，防止它们被其他类修改。
    *   在基类中创建成员`protected`而不是`private`. 这可能是您希望在这里做的更简单的解决方案。
    *   为私有成员类型创建设置器，例如`setActive(CoinFace)`. 您可以根据需要调整这些功能，例如防止属性的无效定义导致整个对象不一致。与之前的解决方案一样，您可以使这些 setter 受保护，以便只有派生类可以访问它们。
    *   使类 a`friend`成为另一个类（称为 A）。A 的实例可以获取该类的对象并访问其所有私有成员。

# jquery - Twitter Bootstrap 模式对话框关闭后，有没有办法将文档置于“焦点”？

> ID：11818318
> 
> 赞同：2
> 
> 时间：2012-08-05T16:59:29.460
> 
> 标签：jquery, twitter-bootstrap, focus, modal-dialog

我正在使用 Twitter Bootstrap 进行模态对话框： http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals) (bootstrap-modal.js)。

当我点击“esc”时，模态按预期关闭。但是，正如您从该页面上的示例中看到的那样，光标丢失了。用户必须单击浏览器窗口才能使其重新获得焦点。

这对我来说是个问题，因为我有一个主要由键盘快捷键驱动的网站。结果，一旦模态对话框关闭，用户将按下某个键，期望发生某些事情，但它不起作用。他/她首先必须在浏览器窗口中单击才能使键盘快捷键再次起作用。

我试过`$('body').focus()`在模态隐藏后调用（即 after `$('#modalDiv').modal('hide');`，但这并没有改变任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-25T12:30:46.933

这是一个棘手的[问题](https://github.com/twbs/bootstrap/issues/12364)

一个可能成功的解决方法可以基于延迟焦点触发

```
$("#your-modal").on("hidden.bs.modal",function(e){
   setTimeout(function(){
      $('#input-to-focus').focus();         
   },300);  
});` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:56:32.763

尝试使用**隐藏**事件：

```
$('body').on('hidden', '.modal', function (e) {
  e && e.delegateTarget.focus();
}); 
```

### [JSFiddle](http://jsfiddle.net/mmfansler/xKKRu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:44:10.383

另请参阅此评论：

[https://github.com/twitter/bootstrap/issues/2130#issuecomment-7664836](https://github.com/twitter/bootstrap/issues/2130#issuecomment-7664836)

# .net - 多线程访问一个集合

> ID：11818322
> 
> 赞同：0
> 
> 时间：2012-08-05T16:59:45.170
> 
> 标签：.net, multithreading, concurrency

假设有一个由多个线程访问的集合。一个线程需要知道给定项目已被另一个线程添加。任何人都可以提供解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:03:16.603

从线程安全集合开始

[线程安全的集合](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

至于知道哪个线程添加了特定项目，我认为项目不会跟踪胎面。我认为您可以添加一个 Property TheadName 并让线程输入该值。

问题指出“已添加特定项目”。然后在评论中，OP 推断出任何项目。

.NET 没有线程安全的 ObservableCollection。有一些关于 codeplex 或可能重新考虑您的设计。ConcurrentQueue 可能是一种选择。

# algorithm - Codechef PERMUT2 解决方案

> ID：11818325
> 
> 赞同：1
> 
> 时间：2012-08-05T17:00:04.553
> 
> 标签：algorithm

以下网站有问题。

[http://www.codechef.com/problems/PERMUT2](http://www.codechef.com/problems/PERMUT2)

我一直在尝试为PERMUT2编写解决方案。我的以下解决方案在某些测试用例上失败了。请帮助我发现以下代码中的缺陷。

```
#include <stdio.h>

int a[100000];

int main()
{
    int i, j, n, ret;
    while(1)
    {
        scanf("%d", &n);
        if(n == 0)
            break;
        ret = 0;
        for(i = 0; i < n; i++)
            scanf("%d", &a[i]);
        for(i = 0; i < n; i++)
            if(a[i] != i + 1)
                ret++;
        if(ret % 2 == 0)
            printf("ambiguous\n");
        else
            printf("not ambiguous\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:25:24.693

您没有检查正确的属性。`if(a[i] != i + 1) ret++;`是不正确的检查。

您要检查`a[a[i] - 1] == i + 1`数组上的所有元素：

```
bool ambiguous = true;
for(i = 0; i < n; i++) {
    if (a[a[i] - 1] != i + 1) {
        ambiguous = false; 
        break;
    }
}
if(ambiguous)
    printf("ambiguous\n");
else
    printf("not ambiguous\n"); 
```

# android - 按钮处带有 LinearLayout 的 Android ViewPager

> ID：11818331
> 
> 赞同：0
> 
> 时间：2012-08-05T17:01:09.443
> 
> 标签：android, android-layout, android-viewpager, android-listfragment

我有一个 Activity，它使用 ViewPager 对两个 ListFragments 进行分页——这很好用。

我正在尝试在底部添加某种类型的布局，其中包含 EditText、Button 和 TextView。我希望将其固定在屏幕底部，而不是使用 ListFragment 滚动。

我的观点是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white">

    <android.support.v4.view.ViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

但是因为我在我的 onCreate 中使用了它

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
} 
```

这种观点甚至没有被阅读。问题是我不确定如何使用 ViewPager 并指定布局，允许我在底部添加这样的布局.. 谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:28:26.983

看起来您将内容视图设置为`mViewPager`，它没有使用布局。

不要创建新的 ViewPager 对象，而是使用您创建的布局 xml。如果它被称为`activity_main.xml`通过`setContentView(R.layout.activity_main);`

也许是这样的？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white">

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/pager"
    android:orientation="horizontal"
>
<Button... your button here />
<TextView ... your text here />
</LinearLayout>

</RelativeLayout > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:57:58.290

想通了，只需照常使用 setConentView，并通过 id 引用 ViewPager .. 不知道为什么我有这个问题..？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.application);

    mViewPager = (ViewPager) findViewById(R.id.pager);

    mTabsAdapter = new OURSVPTabsAdapter(this, mViewPager);

    ...
} 
```

# symfony - Symfony 2 获取登录用户列表

> ID：11818334
> 
> 赞同：4
> 
> 时间：2012-08-05T17:01:20.927
> 
> 标签：symfony

我正在 symfony 2 中编写一些应用程序。我需要获取登录应用程序的用户列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:36:44.930

你可以...

*   捕获事件“onRequest”并在上次发生这种情况时在您的数据库中存储 user_id 时间戳。（每次用户点击您网站上的链接时都会更新）

*   让您的用户通过 AJAX 将心跳发送到您的服务器（使用 jQuery 很容易），并在上次发生这种情况时将 user_id 作为时间戳存储在您的数据库中。（这会以已知的时间间隔更新）

*   捕获事件“onSecurityInteractiveLogin”并将时间戳保存在您的数据库中，注销时将其删除（许多用户从未明确注销）

# css - 悬停时带有 div 的纯 CSS 下拉菜单

> ID：11818337
> 
> 赞同：2
> 
> 时间：2012-08-05T17:02:10.590
> 
> 标签：css, html, drop-down-menu, block

我要在我的网站上进行非常简约的外观，我想知道如何才能实现这样的外观：

[http://iq.gs/cssdropdown](http://iq.gs/cssdropdown)

图片中的左上角将是透明的或纯色以匹配顶部导航栏。我要做的是将六个不同颜色的框显示为块元素，因此当有人将鼠标悬停在导航部分上时，六个框会下拉并可用作链接。我不知道该怎么做，因为我是 CSS 的新手。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:18:31.347

像这样的东西？：http: [//jsfiddle.net/SpJ5f/](http://jsfiddle.net/SpJ5f/)

我没有费心使用您要求的颜色/字体等，只是它背后的想法

# eclipse - 用于 Eclipse 的 xquery 插件，允许我针对 xml 文档运行 xquery 代码

> ID：11818351
> 
> 赞同：0
> 
> 时间：2012-08-05T17:03:44.620
> 
> 标签：eclipse, xquery

是否有任何用于 Eclipse 的 xquery 插件，我可以使用它针对 XML 文件创建和运行 xquery 代码？到目前为止，我看到的唯一一个是 Oxygen XML，但那是付费的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:12:32.870

您可以安装**[XQDT](http://wiki.eclipse.org/XQDT)**（XQuery 开发工具）。

XQDT 的更新站点在[此处](http://www.xqdt.org/html/index)列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:23:47.860

正如您所提到的，有 Oxygen XML。WTP 中还有一些 XQuery 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T09:40:44.087

为 Xquery (XQDT) 添加一个 Eclipse 插件。参考[https://wiki.eclipse.org/XQDT/Installation](https://wiki.eclipse.org/XQDT/Installation)

# ios - ios无休止的视频录制

> ID：11818352
> 
> 赞同：17
> 
> 时间：2012-08-05T17:03:50.737
> 
> 标签：ios, cocoa-touch, avfoundation, video-capture

我正在尝试开发一个 iPhone 应用程序，该应用程序将使用相机仅记录最后几分钟/秒。例如，您录制了 5 分钟的电影，点击“保存”，只会保存最后 30 秒。我不想实际录制五分钟，然后砍掉最后 30 秒（这对我不起作用）。这个想法被称为[“循环录音”](http://en.wikipedia.org/wiki/Loop_recording)。

这会导致无休止的视频录制，但您只记得最后一部分。Precorder 应用程序做我想做的事。（我想在其他情况下使用此功能）我认为这应该很容易用[Circular buffer](http://en.wikipedia.org/wiki/Circular_buffer)模拟。我用 AVFoundation 开始了一个项目。如果我能以某种方式将视频数据重定向到循环缓冲区（我将实现），那就太棒了。我仅找到有关如何将其写入文件的信息。

我知道我可以将视频分割成间隔并保存它们，但是保存它并重新启动相机以录制另一部分需要时间，并且可能会丢失电影中的一些重要时刻。

任何如何从相机重定向数据的线索将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T18:22:26.117

***重要的！*** 从 iOS 8 开始，您可以使用 VTCompressionSession 并直接访问 NAL 单元，而不必挖掘容器。

* * *

幸运的是你可以做到这一点，我会告诉你怎么做，但你将不得不用 MP4 或 MOV 容器弄脏你的手。一个有用的资源（虽然，更特定于 MOV）是 Apple 的 Quicktime 文件格式介绍手册 [http://developer.apple.com/library/mac/#documentation/QuickTime/QTFF/QTFFPreface/qtffPreface.html#//apple_ref /doc/uid/TP40000939-CH202-TPXREF101](http://developer.apple.com/library/mac/#documentation/QuickTime/QTFF/QTFFPreface/qtffPreface.html#//apple_ref/doc/uid/TP40000939-CH202-TPXREF101)

首先，您将无法在录制结束前 30 秒从任意点开始保存的电影，您必须在大约 30 秒时使用一些 I-Frame。根据您的关键帧间隔，它可能在 30 秒标记之前或之后几秒钟。您可以使用所有 I 帧并从任意点开始，但之后您可能需要重新编码视频，因为它会非常大。

所以知道这一点，让我们继续前进。

第一步是设置 AVAssetWriter 时，您需要将其 AVAssetWriterInput 的 expectsMediaDataInRealTime 属性设置为 YES。

在 captureOutput 回调中，您将能够从您正在写入的文件中执行 fread。第一个 fread 将为您提供一点 MP4/MOV（无论您使用什么格式）标题（即“ftyp”原子、“wide”原子和“mdat”原子的开头）。您想要“mdat”部分中的内容。因此，您将开始保存数据的偏移量将是 36 左右。

每次读取都会获得 0 个或更多 AVC NAL 单元。您可以从 ISO/IEC 14496-10 表 7-1 中找到 NAL 单元类型列表。它们的格式与附件 B 中指定的格式略有不同，但没关系。此外，MP4/MOV 文件中只有 IDR 切片和非 IDR 切片。IDR 将是您想要使用的 I-Frame。

MP4/MOV容器中的NAL单元格式如下：

```
4 bytes - Size
[Size] bytes - NALU Data
data[0] & 0x1F - NALU Type 
```

所以现在你有了你正在寻找的数据。当你去保存这个文件时，你必须用正确的长度、样本数更新 MPV/MOV 容器，你必须用每个样本的正确大小更新“stsz”原子，以及更新具有正确电影持续时间的媒体标题和轨道标题等。我可能会建议做的是在第一次运行时创建一个示例容器，您可以或多或少地使用该特定电影的适当数据覆盖/增强它。您需要这样做，因为各种 iDevice 上的编码器并不都具有相同的设置，并且“avcC”原子包含编码器信息。

在这种情况下，您实际上并不需要对 AVC 流有太多了解，因此您可能希望将您的试验集中在更新您正确选择的容器格式上。祝你好运。

# javascript - FlexSlider 2 在窗口调整大小时调整大小

> ID：11818356
> 
> 赞同：15
> 
> 时间：2012-08-05T17:04:20.620
> 
> 标签：javascript, jquery, css, twitter-bootstrap, responsive-design

我正在为基于 Twitter Bootstrap 的 WordPress 制作一个响应式主题。我在主页上使用[FlexSlider](http://energized.danyduchaine.com/)幻灯片 jquery 插件。

不幸的是，当我调整浏览器的大小时，FlexSlider 并没有优雅地调整大小。当我变窄时，图像很容易被裁剪掉。如果我变宽，下一张图像的一部分可能会出现在侧面。即使我使用 FlexSlider 网站上的演示代码，也会发生这种情况。它甚至发生在 FlexSlider 演示中。但是 Dany Duchaine 的 [Energized theme][3] 设法随着视口的变化很好地调整 FlexSlider 的大小。任何人都可以解释他是如何做到的，或者提出任何可以改善我的版本行为的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-16T14:50:39.627

您可能有解决方案或在此阶段继续前进，但我想我会在 github 上为访问者指出这个问题：[https](https://github.com/woothemes/FlexSlider/issues/391) ://github.com/woothemes/FlexSlider/issues/391 （请注意 patbouche 的回答）。这个解决方案对我有用。我把它放在`after:`回调中。

```
var slider1 = $('#slider1').data('flexslider');
slider1.resize(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-13T18:45:50.133

我结合了其中的几个解决方案，还添加了一个检查以确保滑块首先存在于页面上。

```
$(function() { 
    var resizeEnd;
    $(window).on('resize', function() {
        clearTimeout(resizeEnd);
        resizeEnd = setTimeout(function() {
            flexsliderResize();
        }, 250);
    });
});

function flexsliderResize(){ 
    if ($('.flexslider').length > 0) {
        $('.flexslider').data('flexslider').resize();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T12:20:22.027

我必须绑定窗口调整大小事件才能使其可靠地工作。由于回调*前后*的*FlexSlider*对我不起作用：

```
$(window).bind('resize', function() { 

setTimeout(function(){ 
    var slider = $('#banner').data('flexslider');   
    slider.resize();
}, 1000);

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T10:34:54.607

我认为最好把它放在回调**之前：**

```
$('.flexslider').flexslider({
    // your settings
    before: function(slider){
        $('.flexslider').resize();
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-20T10:10:38.567

我也尝试了很多方法，但没有一个真正有效......然后我手动完成了它，现在它可以工作了：在调整窗口大小时保存滑块数据，然后由 flexslider 更改：销毁 flexslider（[https://stackoverflow.com /a/16334046/7334422](https://stackoverflow.com/a/16334046/7334422)）并完全删除节点，手动添加保存在数据中的原始滑块节点，再次添加并初始化flexslider ...因为这非常昂贵，我还添加了一个调整大小的方法（[https://stackoverflow. com/a/40534918/7334422](https://stackoverflow.com/a/40534918/7334422)），为了在调整大小时不被执行......是的，它是一些代码，它有点hacky，但它正在工作:)

```
$.fn.resized = function (callback, timeout) {
    $(this).resize(function () {
        var $this = $(this);
        if ($this.data('resizeTimeout')) {
            clearTimeout($this.data('resizeTimeout'));
        }
        $this.data('resizeTimeout', setTimeout(callback, timeout));
    });
};

function myFlexInit(slider){
    slider.data("originalslider", slider.parent().html());
    slider.flexslider({
      animation: "slide",
      //... your options here
     });
}

 $(".flexslider").each(function() {
     myFlexInit($(this));
  });

  $(window).resized(function(){
      $(".flexslider").each(function() {
          $(this).removeData("flexslider");
          parent = $(this).parent();
          originalslider = $(this).data("originalslider");
          $(this).remove();
          parent.append(originalslider);
          newslider = parent.children().first();
          myFlexInit(newslider);
      });
  }, 200); 
```

您最好将滑块包装在自己独特的容器中：

```
<div class="sliderparent">
     <div class="flexslider">
        <ul class="slides">

        </ul>
      </div>
 </div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-28T13:57:41.533

我尝试了很多方法，然后我做到了

```
if( jQuery('.iframe').length ){
    var interval =  window.setInterval(function() { jQuery('.flexslider').resize(); }, 100);

    window.setTimeout(function(){
        clearInterval(interval);
    },4000);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-16T13:54:45.610

只是想添加另一种选择，以防有人仍然遇到*“flexslider 调整到更高宽度，但不是更低”的*问题

用户“PCandtheWeb”建议添加以下内容，以防您有一个包装表，这似乎可以完成工作

```
.your-table
{
   table-layout: fixed
} 
```

来源： [https ://github.com/woothemes/FlexSlider/issues/980](https://github.com/woothemes/FlexSlider/issues/980)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-15T08:08:15.427

我在这里尝试了最受欢迎的答案，但似乎陷入了无限循环。我改为强制更改浏览器调整大小时的 flex-viewport 高度和幻灯片宽度，这似乎已经成功了。

```
 $(window).on('resize', function () {

        if ($('.flexslider').length > 0) {

            $('.flexslider').each(function () {

                $(this).find('.flex-viewport').css('height', 'auto');

                $(this).find('>.slides').each(function () {
                    let height = $(this).css('height');
                    $(this).find('> li').css('width', height);
                });

            });
        }
    }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-09T08:56:07.370

```
$(window).load(function(){
    var mainslider;

    $('.flexslider').flexslider({
        animation: "slide",
        start: function(slider){
            mainslider = slider;
        }
    });

    //force resize (carousel mode)
    $(window).on("resize", function() {
        //carousel resize code, around line 569 of query.flexslider.js
        mainslider.update( mainslider.pagingCount); 
        mainslider.newSlides.width(mainslider.computedW);
        mainslider.setProps(mainslider.computedW, "setTotal");
    });
}); 
```

我不确定这个是否适用于所有情况，但对于一个简单的轮播来说，它是有效的！

# python - 如何处理python3中URL中的unicode字符串？

> ID：11818362
> 
> 赞同：17
> 
> 时间：2012-08-05T17:05:31.830
> 
> 标签：python, unicode, python-3.x

```
# -*- coding: utf-8 -*- 
# Python3
import urllib
import urllib.request as url_req
opener = url_req.build_opener()
url='http://zh.wikipedia.org/wiki/'+"毛泽东"
opener.open(url).read()
# opener.open(url.encode("utf-8")).read()
# # doesn't work either 
```

当我运行它时，它抱怨说：

`UnicodeEncodeError: 'ascii' codec can't encode characters in position 10-12: ordinal not in range(128)`

但我不能使用`.encode()`任何一个，因为它会抱怨：

```
Traceback (most recent call last):
  File "t.py", line 8, in <module>
    opener.open(url.encode("utf-8")).read()
  File "/usr/local/Cellar/python3/3.2.2/lib/python3.2/urllib/request.py", line 360, in open
    req.timeout = timeout
AttributeError: 'bytes' object has no attribute 'timeout' 
```

任何人都知道如何处理？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-05T17:26:50.667

您可以使用[urllib.parse.quote()](http://docs.python.org/dev/library/urllib.parse.html#urllib.parse.quote)对 URL 的路径部分进行编码。

```
#!/usr/bin/env python3
from urllib.parse   import quote
from urllib.request import urlopen

url = 'http://zh.wikipedia.org/wiki/' + quote("毛泽东")
content = urlopen(url).read() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-05T17:21:00.183

奇妙的[requests](http://docs.python-requests.org/en/latest/index.html)库为您提供了开箱即用的功能：

```
>>> url='http://zh.wikipedia.org/wiki/'+"毛泽东"
>>> import requests
>>> r = requests.get(url)
>>> len(r.content)
818747 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T17:11:48.230

您不能使用任意 unicode 字符串作为 URL 的一部分。URL 必须正确编码。有关详细信息，请参见此处：

[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

特别是您想使用 Python API 的 urllib.quote() 或 urllib.quote_plus() 方法来正确引用您的 URL。

[http://docs.python.org/library/urllib.html](http://docs.python.org/library/urllib.html)

# c++ - #define 中的一个点

> ID：11818365
> 
> 赞同：1
> 
> 时间：2012-08-05T17:06:02.853
> 
> 标签：c++

我有像下面这样的课

```
#include <iostream>

#define Gb MemorySizeUnit.Gb
#define Mb MemorySizeUnit.Mb
#define Kb MemorySizeUnit.Kb

using namespace std;

enum MemorySizeUnit {Gb, Mb, Kb};

class Test
{
  private:
  MemorySizeUnit memSizeUnit;
  int memorySize;

  public:
  void setMemory(const int memSize, MemorySizeUnit unit);
 } 
```

我希望能够做类似的事情

```
Test test;
test.setMemory(20, Gb);// as opposed to test.setMemory(20, MemorySizeUnit.Gb) 
```

编译器不喜欢#define 中的那个，我有一个“。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T17:08:55.943

在宏扩展中使用点并没有错，错误来自这样一个事实，即当宏在您的枚举定义中展开时，它会导致无效的枚举定义。

```
enum MemorySizeUnit {Gb, Mb, Kb}; 
```

扩展为：

```
enum MemorySizeUnit {MemorySizeUnit.Gb, MemorySizeUnit.Mb, MemorySizeUnit.Kb}; 
```

这不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:09:01.023

只需`#define`完全删除，枚举值就会自动放置在外部命名空间中。与 C# 或 Java 不同，枚举值必须通过枚举名称命名空间访问，absnet 类似`using`声明。

# javascript - 从 Blogger 的评论中删除元素？

> ID：11818367
> 
> 赞同：2
> 
> 时间：2012-08-05T17:06:12.997
> 
> 标签：javascript, html, css, comments, blogs

博客网址： [http ://theforeigntwo.blogspot.com.au](http://theforeigntwo.blogspot.com.au)

关注网址： [http ://theforeigntwo.blogspot.com.au/2012/07/steve-nash-post.html?showComment=1344125682577#c3764506429069823377](http://theforeigntwo.blogspot.com.au/2012/07/steve-nash-post.html?showComment=1344125682577#c3764506429069823377)

在评论中，底部有第二个“回复”按钮，填充大约 400 像素，还有一个大小相同的“添加评论”按钮，我想将其删除。

“添加评论”按钮似乎是多余的，因为已经有一个评论表单 - 单击它会加载一个更大的评论表单。

我不确定要删除/修改哪个代码，因为它太长了。有人可以告诉我如何删除这些额外的按钮吗？

编辑：我不确定共享代码是否合适，因为它太长了，但这里是：

```
/* Comments
----------------------------------------------- */

span#commie {
  margin:0 0;
  font-weight: bold;
  line-height: 1.4em;
  color:#000000;
  font:15pt arial;
  background: #ffffff;
    padding:5px;
-moz-box-shadow: 5px 5px 5px #939393;
-webkit-box-shadow: 5px 5px 5px #939393;
box-shadow: 5px 5px 5px #939393;
-moz-border-radius: 5px;
border-radius: 5px;
  }

.comments {
  width:565px;
  background:none;
  float:right;
  margin:0 25px 0 0;
  font:13pt arial;
}

.comments-content {
  font:13pt arial;
}

.comments .continue a, .comments .comment .comment-actions a {      /* THIS IS THE REPLY AND DELETE BUTTONS*/
    font:13pt arial;
    padding:5px;
    color: #000000;
  margin:0px 30px 20px 0;
  font-weight:bold;
  text-transform:uppercase;
    background: #e9e9e9;
-moz-border-radius: 2px;
border-radius: 2px;
}

.comments .continue a:hover, .comments .comment .comment-actions a:hover {
}

.comments .continue a:active, .comments .comment .comment-actions a:active {
}

.comments .comments-content .comment-thread ol {
    list-style-type: none;
    padding: 0;
    text-align: none;
}

.comments .comments-content .inline-thread {
    padding: 0px 0px 0 50px;
}

.comments .comments-content .comment-thread {
    margin: 8px 0px 0px 0px;  
}

.comments .comments-content .comment-thread:empty {
    display: none;
}

.comments .comments-content .comment-replies {
    margin-top: 1em;
    margin-left: 0px;
    font-size: 12px;
}

.comments .comments-content .comment {
    padding-bottom: 8px;
    margin-bottom: 0px;
}

.comments .comments-content .comment:first-child {
}

.comments .comments-content .comment:last-child {
    border-bottom: 0;
    padding-bottom: 0;
}

.comments .comments-content .comment-body {
    position: relative;
}

.comments .comments-content .comment-content {      /* THIS IS THE BODY OF EACH COMMENT, THE TEXT ITSELF */
  font:13pt arial;
  margin:10px 0 20px 0;
}

.comments .comment-block {      /* THIS IS EACH COMMENT BOX FROM AUTHOR TO DELETE */
  margin:0 0 50px 48px;
    position: relative;
    padding: 5px 5px 10px 5px;
  background:#ffffff;
    overflow: hidden;
-moz-box-shadow: 5px 5px 5px #939393;
-webkit-box-shadow: 5px 5px 5px #939393;
box-shadow: 5px 5px 5px #939393;
-moz-border-radius: 5px;
border-radius: 5px;
}

.comments .comments-content .user {
}

.comments .comments-content .user a {
}

.comments .comments-content .user a:hover {
    text-decoration: none;
    color: #000000;
}

.comments .comments-content .icon.blog-author {
  background:purple;
    width: 18px;
    height: 18px;
    display: inline-block;
    margin: 0 0 -4px 6px;
}

.comments .comments-content .datetime {
  padding:5px;
    margin-left: 6px; 
    font-style: italic;
    font-size: 11px;
    float: right;
}

.comments .comments-content .owner-actions {
    position: absolute;
    right: 0;
    top: 0;
}

.comments .comments-replybox {
    border: none;
    height: 250px;
    width: 100%;
}

.comments .comment-replybox-single {
    margin:5px 0 0 0;
}

.comments .comment-replybox-thread {
    margin-top: 5px;
}

.comments .comments-content .loadmore a {
    display: block;
    padding: 10px 16px;
    text-align: center;
}

.comments .thread-toggle {
    cursor: pointer;
    display: inline-block;
}

.comments .comments-content .loadmore {
    cursor: pointer;
    max-height: 3em;
    margin-top: 3em;
}

.comments .comments-content .loadmore.loaded {
    max-height: 0px;
    opacity: 0;
    overflow: hidden;
}

.comments .thread-chrome.thread-collapsed {
    display: none;
}

.comments .thread-toggle {
    display: inline-block;
}

.comments .thread-toggle .thread-arrow {
    display: inline-block;
    height: 6px;
    width: 7px;
    overflow: visible;
    margin: 0.3em;
    padding-right: 4px;
}

.comments .thread-expanded .thread-arrow {
    data: image/png;
    base64,iVBORw0KGgoAAAANSUhEUgAAAAc AAAAHCAYAAADEUlfTAAAAG0lEQVR42mNgwAfKy8v/48I4FeA0AacVDFQBAP9wJkE/KhUMAAAAAElFTkSuQmCC") no-repeat scroll 0 0 transparent;
}

.comments .thread-collapsed .thread-arrow {
    data: image/png;
    base64,iVBORw0KGgoAAAANSUhEUgAAA AcAAAAHCAYAAADEUlfTAAAAJUlEQVR42mNgAILy8vL/DLgASBKnApgkVgXIkhgKiNKJ005s4gDLbCZBiSxfygAAAAB JRU5ErkJggg==") no-repeat scroll 0 0 transparent;
}

.comments .avatar-image-container {
    float: left;
    overflow: hidden;
}

.comments .avatar-image-container img {
    width: 70px;
}

.deleted-comment {
  font-style:italic;
  color:gray;
  } 
```

* * *

```
 <body>

<b:includable id='threaded_comment_js' var='post'>
  <script async='async' expr:src='data:post.commentSrc' type='text/javascript'/>

  <script type='text/javascript'>
    (function() {
      var items = <data:post.commentJso/>;
      var msgs = <data:post.commentMsgs/>;
      var config = <data:post.commentConfig/>;

// <![CDATA[
      var cursor = null;
      if (items && items.length > 0) {
        cursor = parseInt(items[items.length - 1].timestamp) + 1;
      }

      var bodyFromEntry = function(entry) {
        if (entry.gd$extendedProperty) {
          for (var k in entry.gd$extendedProperty) {
            if (entry.gd$extendedProperty[k].name == 'blogger.contentRemoved') {
              return '<span class="deleted-comment">' + entry.content.$t + '</span>';
            }
          }
        }
        return entry.content.$t;
      }

      var parse = function(data) {
        cursor = null;
        var comments = [];
        if (data && data.feed && data.feed.entry) {
          for (var i = 0, entry; entry = data.feed.entry[i]; i++) {
            var comment = {};
            // comment ID, parsed out of the original id format
            var id = /blog-(\d+).post-(\d+)/.exec(entry.id.$t);
            comment.id = id ? id[2] : null;
            comment.body = bodyFromEntry(entry);
            comment.timestamp = Date.parse(entry.published.$t) + '';
            if (entry.author && entry.author.constructor === Array) {
              var auth = entry.author[0];
              if (auth) {
                comment.author = {
                  name: (auth.name ? auth.name.$t : undefined),
                  profileUrl: (auth.uri ? auth.uri.$t : undefined),
                  avatarUrl: (auth.gd$image ? auth.gd$image.src : undefined)
                };
              }
            }
            if (entry.link) {
              if (entry.link[2]) {
                comment.link = comment.permalink = entry.link[2].href;
              }
              if (entry.link[3]) {
                var pid = /.*comments\/default\/(\d+)\?.*/.exec(entry.link[3].href);
                if (pid && pid[1]) {
                  comment.parentId = pid[1];
                }
              }
            }
            comment.deleteclass = 'item-control blog-admin';
            if (entry.gd$extendedProperty) {
              for (var k in entry.gd$extendedProperty) {
                if (entry.gd$extendedProperty[k].name == 'blogger.itemClass') {
                  comment.deleteclass += ' ' + entry.gd$extendedProperty[k].value;
                } else if (entry.gd$extendedProperty[k].name == 'blogger.displayTime') {
                  comment.displayTime = entry.gd$extendedProperty[k].value;
                }
              }
            }
            comments.push(comment);
          }
        }
        return comments;
      };

      var paginator = function(callback) {
        if (hasMore()) {
          var url = config.feed + '?alt=json&v=2&orderby=published&reverse=false&max-results=50';
          if (cursor) {
            url += '&published-min=' + new Date(cursor).toISOString();
          }
          window.bloggercomments = function(data) {
            var parsed = parse(data);
            cursor = parsed.length < 50 ? null
                : parseInt(parsed[parsed.length - 1].timestamp) + 1
            callback(parsed);
            window.bloggercomments = null;
          }
          url += '&callback=bloggercomments';
          var script = document.createElement('script');
          script.type = 'text/javascript';
          script.src = url;
          document.getElementsByTagName('head')[0].appendChild(script);
        }
      };
      var hasMore = function() {
        return !!cursor;
      };
      var getMeta = function(key, comment) {
        if ('iswriter' == key) {
          var matches = !!comment.author
              && comment.author.name == config.authorName
              && comment.author.profileUrl == config.authorUrl;
          return matches ? 'true' : '';
        } else if ('deletelink' == key) {
          return config.baseUri + '/delete-comment.g?blogID='
               + config.blogId + '&postID=' + comment.id;
        } else if ('deleteclass' == key) {
          return comment.deleteclass;
        }
        return '';
      };

      var replybox = null;
      var replyUrlParts = null;
      var replyParent = undefined;

      var onReply = function(commentId, domId) {
        if (replybox == null) {
          // lazily cache replybox, and adjust to suit this style:
          replybox = document.getElementById('comment-editor');
          if (replybox != null) {
            replybox.height = '250px';
            replybox.style.display = 'block';
            replyUrlParts = replybox.src.split('#');
          }
        }
        if (replybox && (commentId !== replyParent)) {
          document.getElementById(domId).insertBefore(replybox, null);
          replybox.src = replyUrlParts[0]
              + (commentId ? '&parentID=' + commentId : '')
              + '#' + replyUrlParts[1];
          replyParent = commentId;
        }
      };

      var hash = (window.location.hash || '#').substring(1);
      var startThread, targetComment;
      if (/^comment-form_/.test(hash)) {
        startThread = hash.substring('comment-form_'.length);
      } else if (/^c[0-9]+$/.test(hash)) {
        targetComment = hash.substring(1);
      }

      // Configure commenting API:
      var configJso = {
        'maxDepth': config.maxThreadDepth
      };
      var provider = {
        'id': config.postId,
        'data': items,
        'loadNext': paginator,
        'hasMore': hasMore,
        'getMeta': getMeta,
        'onReply': onReply,
        'rendered': true,
        'initComment': targetComment,
        'initReplyThread': startThread,
        'config': configJso,
        'messages': msgs
      };

      var render = function() {
        if (window.goog && window.goog.comments) {
          var holder = document.getElementById('comment-holder');
          window.goog.comments.render(holder, provider);
        }
      };

      // render now, or queue to render when library loads:
      if (window.goog && window.goog.comments) {
        render();
      } else {
        window.goog = window.goog || {};
        window.goog.comments = window.goog.comments || {};
        window.goog.comments.loadQueue = window.goog.comments.loadQueue || [];
        window.goog.comments.loadQueue.push(render);
      }
    })();
// ]]>
  </script>
</b:includable>
<b:includable id='backlinks' var='post'>
  <a name='links'/><h4><data:post.backlinksLabel/></h4>
  <b:if cond='data:post.numBacklinks != 0'>
    <dl class='comments-block' id='comments-block'>
      <b:loop values='data:post.backlinks' var='backlink'>
        <div class='collapsed-backlink backlink-control'>
          <dt class='comment-title'>
            <span class='backlink-toggle-zippy'>&#160;</span>
            <a expr:href='data:backlink.url' rel='nofollow'><data:backlink.title/></a>
            <b:include data='backlink' name='backlinkDeleteIcon'/>
          </dt>
          <dd class='comment-body collapseable'>
            <data:backlink.snippet/>
          </dd>
          <dd class='comment-footer collapseable'>
            <span class='comment-author'><data:post.authorLabel/> <data:backlink.author/></span>
            <span class='comment-timestamp'><data:post.timestampLabel/> <data:backlink.timestamp/></span>
          </dd>
        </div>
      </b:loop>
    </dl>
  </b:if>
  <p class='comment-footer'>
    <a class='comment-link' expr:href='data:post.createLinkUrl' expr:id='data:widget.instanceId + &quot;_backlinks-create-link&quot;' target='_blank'><data:post.createLinkLabel/></a>
  </p>
</b:includable>

</b:includable>
<b:includable id='comment-form' var='post'>
  <div class='comment-form'>
    <a name='comment-form'/>
    <b:if cond='data:mobile'>
      <h4 id='comment-post-message'>
        <a expr:id='data:widget.instanceId + &quot;_comment-editor-toggle-link&quot;' href='javascript:void(0)'><data:postCommentMsg/></a></h4>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' style='display: none' width='100%'/>
    <b:else/>
      <h4 id='comment-post-message'/>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' width='100%'/>
    </b:if>
    <data:post.friendConnectJs/>
    <data:post.cmtfpIframe/>
    <script type='text/javascript'>
      BLOG_CMT_createIframe(&#39;<data:post.appRpcRelayPath/>&#39;, &#39;<data:post.communityId/>&#39;);
    </script>
  </div>
</b:includable>
<b:includable id='threaded_comments' var='post'>
  <div class='comments' id='comments'>
    <a name='comments'/>
    <span id='commie'>
<b:if cond='data:post.numComments == 0'>0 comments yet! </b:if>
<b:if cond='data:post.numComments == 1'>Only 1 comment! </b:if>
<b:if cond='data:post.numComments == 2'>2 comments now! </b:if>
<b:if cond='data:post.numComments == 3'>3 comments today! </b:if>
<b:if cond='data:post.numComments &gt; 3'>More than 3 comments! </b:if>
</span>

    <div class='comments-content'>
      <b:if cond='data:post.embedCommentForm'>
        <b:include data='post' name='threaded_comment_js'/>
      </b:if>
      <div id='comment-holder'>
         <data:post.commentHtml/>
      </div>
    </div>

    <p class='comment-footer'>
      <b:if cond='data:post.allowNewComments'>
        <b:include data='post' name='threaded-comment-form'/>
      <b:else/>
        <data:post.noNewCommentsText/>
      </b:if>
    </p>

    <b:if cond='data:showCmtPopup'>
      <div id='comment-popup'>
        <iframe allowtransparency='true' frameborder='0' id='comment-actions' name='comment-actions' scrolling='no'>
        </iframe>
      </div>
    </b:if>

    <div id='backlinks-container'>
    <div expr:id='data:widget.instanceId + &quot;_backlinks-container&quot;'>
       <b:if cond='data:post.showBacklinks'>
         <b:include data='post' name='backlinks'/>
       </b:if>
    </div>
    </div>
  </div>
</b:includable>
<b:includable id='backlinkDeleteIcon' var='backlink'>
  <span expr:class='&quot;item-control &quot; + data:backlink.adminClass'>
    <a expr:href='data:backlink.deleteUrl' expr:title='data:top.deleteBacklinkMsg'>
      <img src='//www.blogger.com/img/icon_delete13.gif'/>
    </a>
  </span>
</b:includable>
<b:includable id='mobile-nextprev'>
  <div class='blog-pager' id='blog-pager'>
    <b:if cond='data:newerPageUrl'>
      <div class='mobile-link-button' id='blog-pager-newer-link'>
      <a class='blog-pager-newer-link' expr:href='data:newerPageUrl' expr:id='data:widget.instanceId + &quot;_blog-pager-newer-link&quot;' expr:title='data:newerPageTitle'>&amp;lsaquo;</a>
      </div>
    </b:if>

    <b:if cond='data:olderPageUrl'>
      <div class='mobile-link-button' id='blog-pager-older-link'>
      <a class='blog-pager-older-link' expr:href='data:olderPageUrl' expr:id='data:widget.instanceId + &quot;_blog-pager-older-link&quot;' expr:title='data:olderPageTitle'>&amp;rsaquo;</a>
      </div>
    </b:if>

    <div class='mobile-link-button' id='blog-pager-home-link'>
    <a class='home-link' expr:href='data:blog.homepageUrl'><data:homeMsg/></a>
    </div>

    <div class='mobile-desktop-link'>
      <a class='home-link' expr:href='data:desktopLinkUrl'><data:desktopLinkMsg/></a>
    </div>

  </div>
  <div class='clear'/>
</b:includable>
<b:includable id='mobile-post' var='post'>
  <div class='date-outer'>
    <div class='date-posts'>
      <div class='post-outer'>

        <b:if cond='data:blog.pageType == &quot;static_page&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
        <b:if cond='data:blog.pageType == &quot;item&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
      </div>
    </div>
  </div>
</b:includable>
<b:includable id='postQuickEdit' var='post'>
  <b:if cond='data:post.editUrl'>
    <span expr:class='&quot;item-control &quot; + data:post.adminClass'>
      <a expr:href='data:post.editUrl' expr:title='data:top.editPostMsg'>
        <img alt='' class='icon-action' height='18' src='http://img2.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
      </a>
    </span>
  </b:if>
</b:includable>
<b:includable id='main' var='top'>
  <b:if cond='data:mobile == &quot;false&quot;'>

    <!-- posts -->
    <div class='blog-posts hfeed'>

      <b:include data='top' name='status-message'/>

      <data:defaultAdStart/>
      <b:loop values='data:posts' var='post'>

        <b:if cond='data:post.isDateStart'>
          &lt;div class=&quot;date-posts&quot;&gt;
        </b:if>
        <div class='post-outer'>
        <b:include data='post' name='post'/>
        <b:if cond='data:blog.pageType == &quot;static_page&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
        <b:if cond='data:blog.pageType == &quot;item&quot;'>
          <b:if cond='data:post.showThreadedComments'>
            <b:include data='post' name='threaded_comments'/>
          <b:else/>
            <b:include data='post' name='comments'/>
          </b:if>
        </b:if>
        </div>
        <b:if cond='data:post.includeAd'>
          <b:if cond='data:post.isFirstPost'>
            <data:defaultAdEnd/>
          <b:else/>
            <data:adEnd/>
          </b:if>
          <div class='inline-ad'>
            <data:adCode/>
          </div>
          <data:adStart/>
        </b:if>
      </b:loop>
      <b:if cond='data:numPosts != 0'>
        &lt;/div&gt;&lt;/div&gt;
      </b:if>
      <data:adEnd/>
    </div>

    <!-- navigation -->
    <b:include name='nextprev'/>

    <!-- feed links -->
    <b:include name='feedLinks'/>

    <b:if cond='data:top.showStars'>
      <script src='//www.google.com/jsapi' type='text/javascript'/>
      <script type='text/javascript'>
        google.load(&quot;annotations&quot;, &quot;1&quot;, {&quot;locale&quot;: &quot;<data:top.languageCode/>&quot;});
        function initialize() {
          google.annotations.setApplicationId(<data:top.blogspotReviews/>);
          google.annotations.createAll();
          google.annotations.fetch();
        }
        google.setOnLoadCallback(initialize);
      </script>
    </b:if>

  <b:else/>
    <b:include name='mobile-main'/>
  </b:if>

  <b:if cond='data:top.showDummy'>
    <data:top.dummyBootstrap/>
  </b:if>

</b:includable>
<b:includable id='commentDeleteIcon' var='comment'>
  <span expr:class='&quot;item-control &quot; + data:comment.adminClass'>
    <b:if cond='data:showCmtPopup'>
      <div class='goog-toggle-button'>
        <div class='goog-inline-block comment-action-icon'/>
      </div>
    <b:else/>
      <a class='comment-delete' expr:href='data:comment.deleteUrl' expr:title='data:top.deleteCommentMsg'>
        <img src='//www.blogger.com/img/icon_delete13.gif'/>
      </a>
    </b:if>
  </span>
</b:includable>
<b:includable id='feedLinks'>
  <b:if cond='data:blog.pageType != &quot;item&quot;'> <!-- Blog feed links -->
    <b:if cond='data:feedLinks'>
      <div class='blog-feeds'>
        <b:include data='feedLinks' name='feedLinksBody'/>
      </div>
    </b:if>

    <b:else/> <!--Post feed links -->
    <div class='post-feeds'>
      <b:loop values='data:posts' var='post'>
        <b:if cond='data:post.allowComments'>
          <b:if cond='data:post.feedLinks'>
            <b:include data='post.feedLinks' name='feedLinksBody'/>
          </b:if>
        </b:if>
      </b:loop>
    </div>
  </b:if>
</b:includable>
<b:includable id='threaded-comment-form' var='post'>
  <div class='comment-form'>
    <a name='comment-form'/>
    <b:if cond='data:mobile'>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' style='display: none' width='100%'/>
    <b:else/>
      <p><data:blogCommentMessage/></p>
      <data:blogTeamBlogMessage/>
      <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
      <iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' width='100%'/>
    </b:if>
    <data:post.friendConnectJs/>
    <data:post.cmtfpIframe/>
    <script type='text/javascript'>
      BLOG_CMT_createIframe(&#39;<data:post.appRpcRelayPath/>&#39;, &#39;<data:post.communityId/>&#39;);
    </script>
  </div>
</b:includable>
<b:includable id='mobile-index-post' var='post'>
  <div class='mobile-date-outer date-outer'>
    <b:if cond='data:post.dateHeader'>
      <div class='date-header'>
        <span><data:post.dateHeader/></span>
      </div>
    </b:if>

    <div class='mobile-post-outer'>
      <a expr:href='data:post.url'>
        <h3 class='mobile-index-title entry-title' itemprop='name'>
          <data:post.title/>
        </h3>

        <div class='mobile-index-arrow'>&amp;rsaquo;</div>

        <div class='mobile-index-contents'>
          <b:if cond='data:post.thumbnailUrl'>
            <div class='mobile-index-thumbnail'>
              <div class='Image'>
                <img expr:src='data:post.thumbnailUrl'/>
              </div>
            </div>
          </b:if>

          <div class='post-body'>
            <b:if cond='data:post.snippet'><data:post.snippet/></b:if>
          </div>
        </div>

        <div style='clear: both;'/>
      </a>

      <div class='mobile-index-comment'>
        <b:if cond='data:blog.pageType != &quot;static_page&quot;'>
          <b:if cond='data:post.allowComments'>
            <b:if cond='data:post.numComments != 0'>
              <a class='comment-link' expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'>
                <data:post.commentLabelFull/>:
              </a>
            </b:if>
          </b:if>
        </b:if>
      </div>
    </div>
  </div>
</b:includable>
<b:includable id='feedLinksBody' var='links'>
  <div class='feed-links'>
  <data:feedLinksMsg/>
  <b:loop values='data:links' var='f'>
     <a class='feed-link' expr:href='data:f.url' expr:type='data:f.mimeType' target='_blank'><data:f.name/> (<data:f.feedType/>)</a>
  </b:loop>
  </div>
</b:includable>
<b:includable id='comments' var='post'>
  <div class='comments' id='comments'>
    <a name='comments'/>
    <b:if cond='data:post.allowComments'>

    <span id='commie'>
<b:if cond='data:post.numComments == 0'>0 comments yet! </b:if>
<b:if cond='data:post.numComments == 1'>Only 1 comment! </b:if>
<b:if cond='data:post.numComments == 2'>2 comments now! </b:if>
<b:if cond='data:post.numComments == 3'>3 comments today! </b:if>
<b:if cond='data:post.numComments &gt; 3'>More than 3 comments! </b:if>
</span>

      <b:if cond='data:post.commentPagingRequired'>
        <span class='paging-control-container'>
          <b:if cond='data:post.hasOlderLinks'>
            <a expr:class='data:post.oldLinkClass' expr:href='data:post.oldestLinkUrl'><data:post.oldestLinkText/></a>
              &#160;
            <a expr:class='data:post.oldLinkClass' expr:href='data:post.olderLinkUrl'><data:post.olderLinkText/></a>
              &#160;
          </b:if>

          <data:post.commentRangeText/>

          <b:if cond='data:post.hasNewerLinks'>
            &#160;
            <a expr:class='data:post.newLinkClass' expr:href='data:post.newerLinkUrl'><data:post.newerLinkText/></a>
            &#160;
            <a expr:class='data:post.newLinkClass' expr:href='data:post.newestLinkUrl'><data:post.newestLinkText/></a>
          </b:if>
        </span>
      </b:if>

      <div expr:id='data:widget.instanceId + &quot;_comments-block-wrapper&quot;'>
        <dl expr:class='data:post.avatarIndentClass' id='comments-block'>

          <b:loop values='data:post.comments' var='comment'>
            <dt expr:class='&quot;comment-author &quot; + data:comment.authorClass' expr:id='data:comment.anchorName'>
              <b:if cond='data:comment.favicon'>
                <img expr:src='data:comment.favicon' height='16px' style='margin-bottom:-2px;' width='16px'/>
              </b:if>
              <a expr:name='data:comment.anchorName'/>
              <b:if cond='data:blog.enabledCommentProfileImages'>
                <data:comment.authorAvatarImage/>
              </b:if>
              <b:if cond='data:comment.authorUrl'>
                <a expr:href='data:comment.authorUrl' rel='nofollow'><data:comment.author/></a>
              <b:else/>
                <data:comment.author/>
              </b:if>
              just had to say...
            </dt>
            <dd class='comment-body' expr:id='data:widget.instanceId + data:comment.cmtBodyIdPostfix'>
              <b:if cond='data:comment.isDeleted'>
                <span class='deleted-comment'><data:comment.body/></span>
              <b:else/>
                <p>
<span class='comment-timestamp'>
                <a expr:href='data:comment.url' title='comment permalink'>
                  <data:comment.timestamp/>
                </a>
                <b:include data='comment' name='commentDeleteIcon'/>
              </span>

                  <data:comment.body/>
                </p>
              </b:if>
            </dd>
            <dd class='comment-footer'>

            </dd>
          </b:loop>
        </dl>
      </div>

      <b:if cond='data:post.commentPagingRequired'>
        <span class='paging-control-container'>
          <a expr:class='data:post.oldLinkClass' expr:href='data:post.oldestLinkUrl'>
            <data:post.oldestLinkText/>
          </a>
          <a expr:class='data:post.oldLinkClass' expr:href='data:post.olderLinkUrl'>
            <data:post.olderLinkText/>
          </a>
          &#160;
          <data:post.commentRangeText/>
          &#160;
          <a expr:class='data:post.newLinkClass' expr:href='data:post.newerLinkUrl'>
            <data:post.newerLinkText/>
          </a>
          <a expr:class='data:post.newLinkClass' expr:href='data:post.newestLinkUrl'>
            <data:post.newestLinkText/>
          </a>
        </span>
      </b:if>

      <p class='comment-footer'>
        <b:if cond='data:post.embedCommentForm'>
          <b:if cond='data:post.allowNewComments'>
            <b:include data='post' name='comment-form'/>
          <b:else/>
            <data:post.noNewCommentsText/>
          </b:if>
        <b:else/>
          <b:if cond='data:post.allowComments'>
            <a expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'><data:postCommentMsg/></a>
          </b:if>
        </b:if>

      </p>
    </b:if>
    <b:if cond='data:showCmtPopup'>
      <div id='comment-popup'>
        <iframe allowtransparency='true' frameborder='0' id='comment-actions' name='comment-actions' scrolling='no'>
        </iframe>
      </div>
    </b:if>

    <div id='backlinks-container'>
    <div expr:id='data:widget.instanceId + &quot;_backlinks-container&quot;'>
       <b:if cond='data:post.showBacklinks'>
         <b:include data='post' name='backlinks'/>
       </b:if>
    </div>
    </div>
  </div>
</b:includable>
</b:widget>
</b:section>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:35:39.553

要删除“重播”按钮，您可以执行以下几项操作：

```
 #bc_0_0MN {
    display:none !important;
    } 
```

2.

```
 .comment-actions secondary-text {
   display:none !important;
   } 
```

如果您在本节中需要更多帮助，请告诉我。

# android - 在 Android 中定义维度资源 - 需要说明

> ID：11818371
> 
> 赞同：0
> 
> 时间：2012-08-05T17:07:16.250
> 
> 标签：android, android-layout, android-xml

我创建了一个 UI，需要对小屏幕进行一些字体调整。据我了解，为了实现这种缩放，我必须在 values-normal 和 values-small 目录中创建一个“diemen.xml”。语法看起来很简单，但我不明白的是 Android 如何知道从哪里获取正确的值。是否需要添加 Java 代码？

例如：

```
android:layout_height="@dimen/textview_height" 
```

它怎么知道它是正常大小的屏幕还是小屏幕？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:09:15.937

当 Android 在特定设备上启动您的应用程序时，它会自动计算出这一点。如果设备配置很小，它将绑定`@dimen/textview_height`到 中的值`values-small`，等等。您不需要提供任何 Java 代码来实现这一点。有关如何完成此操作的详细信息，请参阅指南主题[提供资源的](http://developer.android.com/guide/topics/resources/providing-resources.html)[Android 如何找到最佳匹配资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)部分。您还应该阅读文档[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)，其中讨论了当设备配置更改时您的应用正在运行时会发生什么。

# delphi - 什么 safearraygetdata 函数在 Delphi 中将 safearray 作为输入参数而不是 vararray

> ID：11818373
> 
> 赞同：1
> 
> 时间：2012-08-05T17:07:35.440
> 
> 标签：delphi, delphi-xe2

在 Delphi 中编程（在 xe2 中）我在 dll 中有一个过程，它返回 a`pSafeArray` 我知道它应该指向一个 double 数组来检索我不能使用的元素`safearraygetelement()`，因为它使用 a`VarArray`作为输入参数。这将导致**incompatible-types-compiler-error**。获取元素的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T17:34:19.870

该`SafeArrayGetElement`函数在`ActiveX`单元中定义为

```
function SafeArrayGetElement(psa: PSafeArray; const rgIndices; out pv): HResult; stdcall; 
```

因此，您可以将此函数与 PSafeArray 一起使用。试试这个样本

```
var
  LArray: PSafeArray;
  rgIndices, LBound, HBound : Integer;
  DoubleValue: Double;
begin
  //LArray:=.....
  SafeArrayGetLBound(LArray, 1, LBound);
  SafeArrayGetUBound(LArray, 1, HBound);
  for rgIndices := LBound to HBound do
  begin
    SafeArrayGetElement(LArray, rgIndices, DoubleValue);
     // do something
  end;

end; 
```

# java - swing应用程序，spring应用程序上下文错误

> ID：11818374
> 
> 赞同：0
> 
> 时间：2012-08-05T17:07:37.030
> 
> 标签：java, xml, spring, hibernate, swing

此 applicationContext.fml 文件中的错误在哪里？

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" abstract="true">
<property name="driverClassName" value="com.mysql.jdbc.Driver"/>
<property name="url" value="jdbc:mysql://localhost/mostra"/>
<property name="username" value="root"/>
<property name="password" value="*****"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
<property name="dataSource" ref="dataSource"/>
<property name="mappingResources">
<list>
<value>./resources/employee.hbm.xml</value>
</list>
</property>
<property name="hibernateProperties">
<value>hibernate.dialect=org.hibernate.dialect.HSQLDialect</value>
</property>
</bean>

<bean id="hibernateTemplate"
class="org.springframework.orm.hibernate3.HibernateTemplate">
<property name="sessionFactory">
<ref bean="sessionFactory"/>
</property>
</bean>
</beans> 
```

我得到“引用的 bean 数据源”无效（抽象或没有 bean 类且没有工厂 bean）....只是为什么 ?????

我在联合国其他应用程序中使用了类似的代码，一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:14:36.403

可能是因为您`abstract="true"`的数据源定义中有

# c# - 错误：26 - 查找指定的服务器/实例时出错。（无法连接到我的本地数据库）

> ID：11818376
> 
> 赞同：0
> 
> 时间：2012-08-05T17:07:50.617
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

我的 web.config 中有以下连接字符串：

```
<add name="ApplicationServices" 
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" 
     providerName="System.Data.SqlClient" /> 
```

当我尝试`aspnetdb.mdf`从本地 iis 服务器连接到本地数据库时，一切正常，但是当我将站点放入另一台服务器时，我收到以下错误消息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）。

（在我安装了 SQL Server 2008 的另一台服务器上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:18:48.217

> （在我安装了 SQL Server 2008 的另一台服务器上）。

看起来安装在其他服务器上的 Sql Server 2008 确实具有相同的实例名称，如`connectionstring data source=.\SQLEXPRESS;`

请使用正确的名称更新数据源，并确保它是否需要用户 ID/密码

# java - GWT PhoneGap RPC - 状态异常 0

> ID：11818381
> 
> 赞同：0
> 
> 时间：2012-08-05T17:08:46.850
> 
> 标签：java, gwt, cordova, mgwt

RPC 调用在我的本地主机中成功运行，当我使用 phonegap 集成推送项目并在 android 模拟器中进行测试时`Rpc call fails and throws status exception 0 or gwt rpc Object not found-404`。我确实参考了[gwt phonegap rpc-Daniel 的](http://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html)教程，并做了上面提到的更改：

```
final ServiceDefTarget serv=(ServiceDefTarget)checkuser;
Window.alert(serv.getServiceEntryPoint());
PhonegapUtil.prepareService(serv,"http://myip:8888/plac/reg","reg"); 
```

`plac`我的项目空间在哪里，它所在的位置是`reg`URLPattern。我最终要么`status code 0`例外，要么`StatusCodeException 404 Notfound`.

请让我知道我错在哪里。

Web.xml：

```
<!-- Servlets -->
<servlet>
<servlet-name>Register</servlet-name>
<servlet-class>com.plac.server.Register</servlet-class>
</servlet>  
<servlet-mapping>
<servlet-name>Register</servlet-name>
<url-pattern>/plac/reg</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>Register</servlet-name>
<url-pattern>/plac/signup</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:35:53.627

您的代码需要如下所示：

```
PhonegapUtil.prepareService(serv,"http://myip:8888/plac/","reg"); 
```

第一个参数是您的模块的网址，在您的情况下，这应该是：

```
"http://myip:8888/plac/" 
```

以及您的服务的相对网址（到您的模块）

```
"reg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T22:34:27.307

我只是遇到了同样的问题，这让我挣扎了好几个小时。在某些时候，我遇到了看起来与上面的解决方案有点不同的解决方案：

当您`http://myip:8888/plac/reg`从浏览器 调用时`HTTP Status 405 - HTTP method GET is not supported by this URL`，如果它引用所需的服务，它应该返回。否则 url 会丢失一些东西 - 查看您提供的资源，我猜您的 GWT Web 应用程序的名称丢失了。

Try `http://myip:8888/YourAppName/plac/reg`while`http://myip:8888/YourAppName`是您用来从浏览器中提取 GWT 应用程序的 url。

因此，代码应如下所示： `PhonegapUtil.prepareService(serv,"http://myip:8888/YourAppName/plac/","reg");`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:00:56.640

尝试添加模式：

```
<!-- Servlets -->
<servlet>
<servlet-name>Register</servlet-name>
<servlet-class>com.plac.server.Register</servlet-class>
</servlet>  
<servlet-mapping>
<servlet-name>Register</servlet-name>
<url-pattern>/plac/reg</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>Register</servlet-name>
<url-pattern>/plac/reg/*</url-pattern>
</servlet-mapping> 
```

您的 URL 可能附加了 / 。在这种情况下，您将获得 404。

您是否在 phonegap 环境中运行？

如果是，请确保允许通配符访问服务器：[PhoneGap external hosts wildcard](https://stackoverflow.com/questions/10328630/phonegap-external-hosts-wildcard)

# java - 如何将 pom.xml 添加到现有的 Eclipse 项目？

> ID：11818384
> 
> 赞同：26
> 
> 时间：2012-08-05T17:09:00.110
> 
> 标签：java, eclipse, maven, m2eclipse, m2e

我是 Maven 新手并使用 Eclipse Juno。我已经为 Eclipse 安装了 Maven 集成。File > New > Other > Maven 中有三个选项：
1\. Checkout Maven Projects from SCM
2\. Maven Module
3\. Maven Project

但是我没有看到[这里](http://www.theserverside.com/news/1363817/Introduction-to-m2eclipse)描述的 Maven2 POM 。我读过添加 pom.xml 是使用 Maven 时要做的第一件事。

我有一个现有的动态 Web 项目，所以我不确定是否需要创建 Maven 项目只是为了使用 Maven。

**如何在这个现有项目中使用 Maven？**

此外，当我尝试添加 Maven 项目并在步骤“选择一个原型”时，所有显示的原型都有版本“RELEASE”。当我在这一步单击 Next 时，Eclipse 变为 Not Responding。它使用的内存甚至没有增加。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-05T17:33:10.933

看看这里：

*   [将现有的 Eclipse 项目转换为 Maven 项目](https://stackoverflow.com/questions/2449461/convert-existing-eclipse-project-to-maven-project)

在 eclipse 的最新版本（包括 Juno）中，有一个更方便的向导：

```
Configure > Convert to maven project 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-05T17:11:41.320

您需要将该项目作为 Maven 项目导入。

```
File -> Import -> Maven -> Import existing Maven project. 
```

# c++ - printf 网络数据

> ID：11818390
> 
> 赞同：0
> 
> 时间：2012-08-05T17:09:27.933
> 
> 标签：c++, linux, sockets, udp

我编写了以下函数并且工作正常：

```
int NetworkSocket::readDatagrams(unsigned char *buffer, string &srcAddress, unsigned short int & srcPort,size_t frameSize)
{

    unsigned int maximumPacketSize = sizeof(buffer);//frameSize ;
    int returnValue ;
    sockaddr_in from;
    socklen_t fromLength = sizeof( from );
    int receivedBytes;

    fromLength = sizeof(this->getSocketAddressStructureOfServer());
    receivedBytes = recvfrom( this->socketFD, buffer, maximumPacketSize, 0, (sockaddr *)&this->getSocketAddressStructureOfServer(), &fromLength     ) ;

    cout << receivedBytes << endl;
    returnValue = receivedBytes;
    if ( receivedBytes <= 0 )
        returnValue = -1;

    /// exporting data
    //
    srcAddress = inet_ntoa(this->getSocketAddressStructureOfServer().sin_addr);
    srcPort = ntohs( ( unsigned short int)this->getSocketAddressStructureOfServer().sin_port );

    return returnValue;
} 
```

当我应用它时，它会在 ref srcAddress 和端口中返回，即使缓冲区已满，但我无法 printf 缓冲区，我该怎么做？wireshakr show 000010001 这意味着 5 个字节，我需要检查它并与我的数据进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:13:05.223

```
unsigned int maximumPacketSize = sizeof(buffer);//frameSize ; 
```

这条线是错误的，因为您正在请求指针变量的大小（在 32 位系统上总是等于 '4'）。您必须手动传递最大缓冲区大小，或者只是“知道”它，这应该不是问题，因为您首先实例化了它。

从本质上讲，你永远不能得到超过 4 个字节。

# svn - 在svn的兄弟分支之间合并

> ID：11818391
> 
> 赞同：3
> 
> 时间：2012-08-05T17:09:36.357
> 
> 标签：svn

我的项目有很大的易变代码库，并且不同的团队正在处理相同的代码，因此每天受到影响的文件总数非常多。我最近遇到了一个问题，因为团队中有两个人必须合并他们的代码。我将解释这个场景。

我的团队已经从主干分支出来，每天从主干进行向下合并，以保持代码库与主干同步。每天至少有 500 个文件受到影响。完成代码后，我们会重新集成到主干，然后只将记录合并回分支，这样我们就可以继续在分支中工作。现在最近由于早期发布我们无法向上合并到主干，所以为了获得不同的团队更改，我们从主干分支出另一个分支，然后决定将我们所有的更改合并到新分支，但是因为我们没有任何合并历史在我的分支和新分支之间，我可以看到，当我尝试从我的团队分支完全合并到新分支时，svn 试图将我们从主干收到的更改作为向下合并的一部分应用到新分支。当我们最近从主干分支时，新分支具有所有更改，这导致了许多树冲突。我也无法重新整合，因为它不是主干。

您能否建议解决此问题或解决此问题的任何方法？

# jenkins - 如何在 Jenkins 中为依赖项目配置电子邮件通知

> ID：11818394
> 
> 赞同：0
> 
> 时间：2012-08-05T17:09:56.293
> 
> 标签：jenkins

我有两个 Maven 项目，位于不同的 Git 存储库：核心、webapp。每个人在 Jenkins 中都有一份工作，它会拉动 git SCM 并运行 Maven 构建。

如果有人向 webapp 提交了错误代码，那么 Jenkins 会向他发送一封构建失败的电子邮件。核心也是如此。

**有问题的场景**

John 向核心提交了错误代码，但它不会破坏核心单元测试/编译，但会破坏 webapp 编译。在这种情况下，Jenkins 不会*发送*电子邮件，因为在 webapp 中没有进行任何提交。由于核心更改并触发了其构建，因此触发了 Webapp 作业。詹金斯的输出是：

```
An attempt to send an e-mail to empty list of recipients, ignored. 
```

如何配置 jenkins 以提取触发此作业正在构建的作业中的提交者列表，并向他们发送电子邮件以及构建失败的电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:18:37.400

使用[**Blame Upstream Committers** Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Blame+Upstream+Committers+Plugin) -
该页面描述了如何使用*指纹*来识别提交者。

# c# - 如何在 Metro App C# 中设置 mediaElement 的来源？

> ID：11818395
> 
> 赞同：0
> 
> 时间：2012-08-05T17:09:55.877
> 
> 标签：c#, windows-8, microsoft-metro, mediaelement

我需要在我的 Metro 应用程序中为 Windows 8 设置 mediaElement 控件的源！

这是我的代码：

```
string requestUrl = "ms-appx://ArcadiaDJ/Musique/test.mp3");
mediaElement_SoundEffect.Source = new Uri(requestUrl);   
mediaElement_SoundEffect.play(); 
```

**我可以设置源，但 mediaElement 不能在播放时工作.. 没有音乐**

**我找到了这个解决方案，但我需要在动态加载页面上设置源**

```
var openPicker = new Windows.Storage.Pickers.FileOpenPicker();

openPicker.SuggestedStartLocation =Windows.Storage.Pickers.PickerLocationId.MusicLibrary;

openPicker.FileTypeFilter.Add(".mp3");
openPicker.FileTypeFilter.Add(".wav");
file = await openPicker.PickSingleFileAsync();

mediaControl.SetSource(stream, file.ContentType); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:37:08.447

您的代码有一些奇怪的地方。在名为 mediaElement_SoundEffect 的对象上设置 Source 属性，然后在名为 mediaElement 的对象上调用 .Play 方法。因此，您应该修复您的代码或修复您的示例以更准确地了解您正在做的事情。

另请查看我不久前写的[这个答案](https://stackoverflow.com/questions/10984038/unable-to-play-sound-in-windows-8)……您应该将 mediaElement 添加到可视树中。

# java - 无法在 Jackson 中使用 JsonParser 反序列化

> ID：11818396
> 
> 赞同：0
> 
> 时间：2012-08-05T17:10:12.163
> 
> 标签：java, json, jetty, jackson, deserialization

我正在尝试使用`org.codehaus.jackson.map.deser.std.StdDeserializer`来执行自定义反序列化。

我的主要目标是能够连接到 Jetty 的 JSON 处理结构并使用 Jackson 而不是默认的 JettyJSON。

所以现在，我正在测试这是否有效。

我有一个测试尝试读取一个简单的 JSON 字符串并将其转换为 Presence 对象。

```
public void testBasicJson() throws JsonParseException,
        JsonMappingException,
        IOException {
    ObjectMapper mapper = new ObjectMapper();
    JsonObjectDeserializer jod = new JsonObjectDeserializer();
    SimpleModule module = new SimpleModule("JsonObjectDeserializer",
        new Version(1, 0, 0, null));
    module.addDeserializer(JsonObject.class, jod);
    mapper.registerModule(module);

    //formatted for easy reading
    String jsonSimple = "{
        \"userEmail\":\"user1@lab.com\",
        \"type\":\"presence\",
        \"domain\":\"lab.com\"
    }";
    JsonObject pres = mapper.readValue(jsonSimple, JsonObject.class);
    System.out.println(pres.toString());
} 
```

存在类是：

```
public class Presence extends JsonObject {
    private static final long serialVersionUID    = 1L;
    protected String userEmail;
    protected String domain;
    protected String type;

    public Presence() {
    }

    //necessary GETTERs and SETTERs are created for userEmail, domain and type

    public String toString() {
        StringBuffer sb = new StringBuffer("\tuser: ");
        sb.append(userEmail);
        sb.append(" - ");
        sb.append(domain);
        return sb.toString();
    }
} 
```

父类是：

```
import org.cometd.server.ServerMessageImpl;

public abstract class JsonObject extends ServerMessageImpl {
    private static final long   serialVersionUID    = 1L;
} 
```

自定义解串器是：

```
import org.codehaus.jackson.JsonParser;
import org.codehaus.jackson.JsonProcessingException;
import org.codehaus.jackson.JsonToken;
import org.codehaus.jackson.map.DeserializationContext;
import org.codehaus.jackson.map.deser.std.StdDeserializer;

public class JsonObjectDeserializer extends StdDeserializer<JsonObject> {
    public JsonObjectDeserializer() {
        super(JsonObject.class);
    }

    @Override
    public JsonObject deserialize(JsonParser jp, DeserializationContext ctxt)
            throws IOException, JsonProcessingException {
        //so I'm at a loss at this point
        //if (jp.nextToken() != JsonToken.START_OBJECT) {
        //    throw new IOException("Invalid");
        //}
    }
} 
```

我面临的问题是反序列化器的部分。尝试使用 JsonParser 读取令牌不起作用，因为它总是返回 null。

我坚信我非常接近解决方案，并且在反序列化器中只缺少一件事。我只需要一些指导来达到最终目标。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T01:25:54.267

好的，经过几天的探索和发布我的问题后的几个小时，我得到了自己问题的答案。

这是正确推进 JsonParser 的问题。

该方法的内容应该是：

```
public JsonObject deserialize(JsonParser jp, DeserializationContext ctxt)
        throws IOException, JsonProcessingException {
    if (jp.getCurrentToken() != JsonToken.START_OBJECT) {
        throw new IOException("invalid start marker");
    }
    Presence p = new Presence();
    while (jp.nextToken() != JsonToken.END_OBJECT) {
        String fieldname = jp.getCurrentName();
        jp.nextToken();  //move to next token in string
        if ("userEmail".equals(fieldname)) {
            p.setUserEmail(jp.getText());
        } else if ("domain".equals(fieldname)) {
            p.setDomain(jp.getText());
        } else if ("type".equals(fieldname)) {
            p.setType(jp.getText());
        }
    }
    jp.close();
    return p;
} 
```

需要更清楚地阅读[http://www.cowtowncoder.com/blog/archives/2009/01/entry_132.html](http://www.cowtowncoder.com/blog/archives/2009/01/entry_132.html)和 Jackson 的 Javadocs 以确定正确的做法。

# mysql - 设置此数据库模型（MySQL）的最佳方法？

> ID：11818399
> 
> 赞同：0
> 
> 时间：2012-08-05T17:10:28.747
> 
> 标签：mysql, database, model, relational-database

我希望在我的网站上建立一个博客数据库。我正在设置一个 MySQL 数据库，其中包含一个带有以下属性的**帖子表：** **post_id、日期时间、内容**（所有这些都非常不言自明）。我希望每个帖子都有标签（可以是任意数量的标签）。显然，这需要一个单独的表，所以我制作了一个带有属性的**标签表：** **tag_id, tag_name**。现在，要链接它们，我想我应该创建第三个表，称为**post_tag**，它将定义帖子和标签之间的链接，因此它将具有属性：**post_id, tag_id**。我对数据库结构有点陌生，所以我想知道我这样做是否正确，或者是否有更有效的方法来解决这个问题？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:16:41.073

如果帖子可以有多个标签，你应该有 3 个表：

> 帖子：post_id，postname ........
> 
> 标签：tag_id,tag_name
> 
> post-tags (链接表) post_id,tag_id

这可能对您感兴趣： http: [//databases.about.com/od/specificproducts/a/normalization.htm](http://databases.about.com/od/specificproducts/a/normalization.htm)

# c++ - 多个文件中的类继承c ++

> ID：11818400
> 
> 赞同：1
> 
> 时间：2012-08-05T17:10:55.423
> 
> 标签：c++, class, inheritance

我正在尝试制作一大类名为“Adresy”的康斯坦斯。一个 .h 文件是不够的。

```
my adresy.h looking like:
#include <Windows.h>
#ifndef __Adresy_H_
#define __Adresy_H_

class Adresy {
    public:
//first part of constances...
};
#endif 
```

我想在第二个文件中添加对此类的扩展（例如 adresy2.h）：

```
#include "adresy.h"
class Items: public Adresy {
    public:
/// NEXT CONSTANCSES
}; 
```

应该如何看待第二类以及如何将它们组合到一个文件中以包含（例如，我不想包含扩展一个类的 5 个文件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:55:49.170

我将您的问题理解为：

1.  一个头文件，包括：**adresy,h**
2.  此文件应包含 Adresy 类，该类具有太多条目，以至于一个文件太多。

我建议这个解决方案：

**地址**

```
#include "ext/adresy_part1.h"
#include "ext/adresy_part2.h"
#include "ext/adresy_part3.h"

class Adresy : public Adresy1, public Adresy2, public Adresy3 {
}; 
```

**分机/adresy_part1.h**

```
class Adresy1 {
public:
   // first bunch of constants
}; 
```

依此类推，您需要多少零件。如您所见 - 我建议也将这些额外的文件放到单独的目录`ext`中。

# ubuntu - 在 Ubuntu 上通过 WebDAV 列出 Box 云存储文件？

> ID：11818401
> 
> 赞同：0
> 
> 时间：2012-08-05T17:10:58.190
> 
> 标签：ubuntu, cloud, webdav, box-api

我尝试通过 WebDAV 在我的 Ubuntu 上安装 Box 云存储，它可以工作。但唯一的事情是我需要将文件（整个文件，所有文件）下载到我的计算机上以查看云中的文件。那是如此的带宽消耗和浪费时间。仅列出文件而不是下载整个文件是否有任何可能的解决方案？喜欢 Dropbox 应用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:30:09.970

我不确定这是否是您要问的，但是您可以使用 WebDAV 的[PROPFIND 方法](http://www.webdav.org/specs/rfc4918.html#METHOD_PROPFIND)查看目录/集合的子项（并因此列出文件） 。

# python - 如何让 Python 使所有相同的字符串使用相同的内存？

> ID：11818402
> 
> 赞同：10
> 
> 时间：2012-08-05T17:11:02.823
> 
> 标签：python, memory-management

> **可能重复：**
> [python*实习生*做什么，什么时候应该使用它？](https://stackoverflow.com/questions/1136826/what-does-python-intern-do-and-when-should-it-be-used)

我正在使用 python 中的一个程序，该程序必须与具有数百万个字符串对象的数组相关联。我发现如果它们都来自同一个带引号的字符串，那么每个附加的“字符串”只是对第一个主字符串的引用。但是，如果从文件中读取字符串，并且字符串都相等，则每个字符串仍需要新的内存分配。

也就是说，这需要大约 14meg 的存储空间：

```
a = ["foo" for a in range(0,1000000)] 
```

虽然这需要超过 65meg 的存储空间：

```
a = ["foo".replace("o","1") for a in range(0,1000000)] 
```

现在我可以用这个来减少内存占用的空间：

```
s = {"f11":"f11"}
a = [s["foo".replace("o","1")] for a in range(0,1000000)] 
```

但这似乎很愚蠢。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T17:31:57.360

只需执行一个`intern()`，它告诉 Python 从内存中存储和获取字符串：

```
a = [intern("foo".replace("o","1")) for a in range(0,1000000)] 
```

这也导致大约 18MB，与第一个示例相同。

如果您使用 python3，还请注意下面的评论。谢谢@Abe Karplus

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:21:20.880

你可以尝试这样的事情：

```
strs=["this is string1","this is string2","this is string1","this is string2",
      "this is string3","this is string4","this is string5","this is string1",
      "this is string5"]
new_strs=[]
for x in strs:
    if x in new_strs:
        new_strs.append(new_strs[new_strs.index(x)]) #find the index of the string
                                                     #and instead of appending the
                                                #string itself, append it's reference.
    else:
        new_strs.append(x)

print [id(y) for y in new_strs] 
```

相同的字符串现在将具有相同的`id()`

**输出：**

```
[18632400, 18632160, 18632400, 18632160, 18651400, 18651440, 18651360, 18632400, 18651360] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T17:29:26.970

保存一个可见字符串的字典应该可以工作

```
new_strs = []
str_record = {}
for x in strs:
    if x not in str_record:
        str_record[x] = x
    new_strs.append(str_record[x]) 
```

（未经测试。）

# linux - 将所有文件扩展名转换为小写

> ID：11818408
> 
> 赞同：48
> 
> 时间：2012-08-05T17:11:57.077
> 
> 标签：linux, bash, file-extension

无论扩展名是什么，我都在尝试小写所有扩展名。到目前为止，据我所见，您必须指定要转换为小写的文件扩展名。但是，我只想将名称中~~第一个~~最后一个点之后的所有内容都小写`.`。

我怎样才能做到这一点`bash`？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-06T08:29:25.000

**解决方案**

您可以在一行中解决任务：

```
find . -name '*.*' -exec sh -c '
  a=$(echo "$0" | sed -r "s/([^.]*)\$/\L\1/");
  [ "$a" != "$0" ] && mv "$0" "$a" ' {} \; 
```

注意：这将破坏包含换行符的文件名。但现在请忍受我。

**使用示例**

```
$ mkdir C; touch 1.TXT a.TXT B.TXT C/D.TXT
$ find .
.
./C
./C/D.TXT
./1.TXT
./a.TXT
./B.TXT

$ find . -name '*.*' -exec sh -c 'a=$(echo "$0" | sed -r "s/([^.]*)\$/\L\1/"); [ "$a" != "$0" ] && mv "$0" "$a" ' {} \;

$ find .
.
./C
./C/D.txt
./a.txt
./B.txt
./1.txt 
```

**解释**

您可以在当前目录 ( `.`) 中找到`.`名称中包含句点 ( ) 的所有文件，`-name '*.*'`并为每个文件运行以下命令：

```
a=$(echo "$0" | sed -r "s/([^.]*)\$/\L\1/");
[ "$a" != "$0" ] && mv "{}" "$a" 
```

该命令意味着：尝试将文件扩展名转换为小写（即`sed`）：

```
$ echo 1.txt | sed -r "s/([^.]*)\$/\L\1/"
1.txt
$ echo 2.TXT | sed -r "s/([^.]*)\$/\L\1/"
2.txt 
```

并将结果保存到`a`变量中。

如果有更改`[ "$a" != "$0" ]`，请重命名文件`mv "$0" "$a"`。

正在处理的文件的名称 ( `{}`) 作为其附加参数传递给`sh -c`它，它在命令行中显示为`$0`. 它使脚本安全，因为在这种情况下，shell 将 {} 作为数据，而不是作为代码部分，就像在命令行中直接指定时那样。（*感谢*@gniourf_gniourf*指出这个非常重要的问题*）。

如您所见，如果您`{}`直接在脚本中使用，则可能在文件名中有一些 shell 注入，例如：

```
; rm -rf * ; 
```

在这种情况下，注入将被 shell 视为代码的一部分，它们将被执行。

**版本**

更清晰但更长一点的脚本版本：

```
find . -name '*.*' | while IFS= read -r f
do
  a=$(echo "$f" | sed -r "s/([^.]*)\$/\L\1/");
  [ "$a" != "$f" ] && mv "$f" "$a"
done 
```

对于包含换行符的文件名，这仍然会中断。要解决此问题，您需要一个`find`支持`-print0`（如 GNU `find`）和 Bash （以便`read`支持`-d`分隔符开关）：

```
find . -name '*.*' -print0 | while IFS= read -r -d '' f
do
  a=$(echo "$f" | sed -r "s/([^.]*)\$/\L\1/");
  [ "$a" != "$f" ] && mv "$f" "$a"
done 
```

对于包含尾随换行符的文件，这仍然会中断（因为它们将`a=$(...)`被子shell吸收。如果你*真的*想要一个万无一失的方法（你应该！），使用支持`,,`参数扩展的最新版本的 Bash (Bash≥4.0) 这里是最终解决方案：

```
find . -name '*.*' -print0 | while IFS= read -r -d '' f
do
  base=${f%.*}
  ext=${f##*.}
  a=$base.${ext,,}
  [ "$a" != "$f" ] && mv -- "$f" "$a"
done 
```

**回到原来的解决方案**

或者`find`一口气（回到原始解决方案，并进行一些修复，使其真正万无一失）：

```
find . -name '*.*' -type f -exec bash -c 'base=${0%.*} ext=${0##*.} a=$base.${ext,,}; [ "$a" != "$0" ] && mv -- "$0" "$a"' {} \; 
```

我添加了`-type f`以便仅重命名常规文件。如果没有这个，如果在文件名之前重命名目录名，您仍然可能会遇到问题。如果您还想重命名目录（以及链接、管道等），您应该使用`-depth`：

```
find . -depth -name '*.*' -type f -exec bash -c 'base=${0%.*} ext=${0##*.} a=$base.${ext,,}; [ "$a" != "$0" ] && mv -- "$0" "$a"' {} \; 
```

以便`find`执行深度优先搜索。

`bash`您可能会争辩说，为找到的每个文件生成一个进程效率不高。那是正确的，以前的循环版本会更好。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-01-07T04:45:25.417

我用这个命令成功了。

```
rename JPG jpg *.JPG 
```

where`rename`是一个命令，它告诉 shell 将当前文件夹中的每个 to 重命名`JPG`，`jpg`所有文件名都具有扩展名`JPG`.

如果您在 (eval 1) 第 1 行使用此方法使用“strict subs”时看到 Bareword “JPG” not allowed，请尝试：

```
rename 's/\.JPG$/.jpg/' *.JPG 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-09-23T01:48:45.670

结合其他人的答案，这更短但更笼统：

```
rename 's/\.([^.]+)$/.\L$1/' * 
```

**模拟**

对于模拟，使用`-n`，即`rename -n 's/\.([^.]+)$/.\L$1/' *`。通过这种方式，您可以在执行实际更改之前查看将要更改的内容。示例输出：

```
Happy.Family.GATHERING.JPG renamed as Happy.Family.GATHERING.jpg
Hero_from_The_Land_Across_the_River.JPG renamed as Hero_from_The_Land_Across_the_River.jpg
rAnD0m.jPg1 renamed as rAnD0m.jpg1 
```

**关于语法的简短说明**

*   语法是`rename OPTIONS 's/WHAT_TO_FIND_IN_THE_NAME/THE_REPLACEMENT/' FILENAMES`
*   `\.([^.]+)$`表示字符串 ( )`[^.]`末尾的点 ( )之外的任何序列，点 ( )之后`$``\.`
*   `.\L$1`表示点 ( `\.`) 后跟`\L`第一组 ( ) 的^(小写)`$1`( )
*   在这种情况下，第一组是扩展名 ( `[^.]+`)
*   您最好使用单引号`'`而不是双引号`"`来包装正则表达式以避免外壳扩展

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-05T18:09:31.860

好吧，您可以将此代码段用作您需要的任何替代方案的核心：

```
#!/bin/bash

# lowerext.sh    

while read f; do
    if [[ "$f" = *.* ]]; then
        # Extract the basename
        b="${f%.*}"

        # Extract the extension
        x="${f##*.}"

        # Convert the extension to lower case
        # Note: this only works in recent versions of Bash
        l="${x,,}"

        if [[ "$x" != "$l" ]]; then
            mv "$f" "$b.$l"
        fi
    else
        continue
    fi
done 
```

之后，您需要做的就是将需要重命名的文件列表提供给其标准输入。例如对于当前目录和任何子目录下的所有文件：

```
find -type f | lowerext.sh 
```

一个小优化：

```
find -type f -name '*.*' | lowerext.sh 
```

如果您需要比这更具体的答案，则必须更具体...

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-20T02:49:58.033

如果您使用的是 ZSH：

```
zmv '(*).(*)' '$1.$2:l' 
```

如果你得到`zsh: command not found: zmv`然后简单地运行：

```
autoload -U zmv 
```

然后再试一次。

感谢这篇关于 zmv 的[原始文章](https://coderwall.com/p/yepegw/mass-renaming-files-with-zmv-zsh)以及关于小写/大写替换语法的[ZSH 文档。](http://zsh.sourceforge.net/Intro/intro_12.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-05T18:22:27.493

这将为您的 '.mp3' 完成这项工作 - 但仅在工作目录中 - 但是能够使用带有空格的文件名：

```
for f in *.[mM][pP]3; do mv "$f" "${f%.*}.mp3"; done 
```

更正：

```
for f in *.[mM][pP]3; do [[ "$f" =~ \.mp3$ ]] || mv "$f" "${f%.*}.mp3"; done 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-30T10:46:26.597

递归地为所有一个好的解决方案：

```
find -name '*.JPG' | sed 's/\(.*\)\.JPG/mv "\1.JPG" "\1.jpg"/' |sh 
```

以上递归将扩展名为“JPG”的文件重命名为扩展名为“jpg”的文件

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-10T15:19:03.140

如果您安装了`mmv`（=移动多个文件）并且您的文件名最多包含一个点，您可以使用

```
mmv -v "*.*" "#1.#l2" 
```

它没有得到超过一个点（因为匹配的算法在`*`中不是贪心的`mmv`），但是，它可以`()`正确处理`'`。例子：

```
$ mmv -v "*.*" "#1.#l2"
FOO.BAR.MP3 -> FOO.bar.mp3 : done
foo bar 'baz' (CD 1).MP3 -> foo bar 'baz' (CD 1).mp3 : done 
```

不完美，但比所有`find/exec/sed`东西更容易使用和记住。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-16T16:47:40.443

如果您只对某些文件扩展名感兴趣，例如将所有大写“JPG”扩展名转换为小写“jpg”，您可以像这样使用命令行实用程序**重命名**。将 CD 放入您要更改的目录。然后

```
rename -n 's/\.JPG$/\.jpg/' * 
```

使用 -n 选项来测试将要更改的内容，然后当您对结果满意时使用，而不是这样

```
rename  's/\.JPG$/\.jpg/' * 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-14T17:25:44.063

我一直在寻找一种简单的方法来做到这一点（无需考虑），但最终我想通了并想出了这个（诚然，在原始帖子之后）

```
find . -name \\*.JPG -print -exec rename s/.JPG/.jpg/ {} \\; 
```

我在大约 60,000 个文件上运行它，它运行良好，但当然，`-n`如果你想先测试它，你可以使用“重命名”选项。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-11-10T06:26:54.517

所以，这些看起来像线路噪声的解决方案都很好，但这很容易从 python REPL 中做到（我知道 OP 要求使用 bash，但是这些天很多系统都安装了 python ...... ):

```
import os
files = os.listdir('.')
for f in files:
    path, ext = os.path.splitext(f)
    if ext.isupper():
        os.rename(f, path + ext.lower()) 
```

# web-applications - 如何更好地控制 Web 应用程序的打印机输出？

> ID：11818416
> 
> 赞同：3
> 
> 时间：2012-08-05T17:13:32.180
> 
> 标签：web-applications, printing

一段时间以来，我们一直在开发基于 Web 的系统。我们的客户通常习惯于桌面应用程序，我们通常会将他们的系统升级到基于 Web 的版本。这对他们有很多好处，但我们经常遇到一个缺点：打印输出。我们开发的系统经常会生成一些需要打印的文档，比如：

*   发票
*   收据
*   订单信息
*   说明书
*   检查

其中许多文档具有预先确定的格式，并且应该以相同或非常相似的方式出现。然而，这往往是一种痛苦。遇到的问题包括：

*   浏览器经常打印页眉和页脚（页码、日期等），只有客户端可以控制。
*   某些打印样式的支持很差（例如`page-break-inside`），这使得很难控制信息在哪里被截断。
*   页边距和纸张大小无法由应用程序控制，并且需要用户在每次需要打印特定文档时更改此设置。
*   根据我的经验，作为普通用户，更改纸张大小和方向甚至是一件痛苦的事情。由于某种原因，浏览器不会立即显示纸张大小的变化，对于许多客户，我不得不指示他们更改纸张大小，然后单击“更改纸张方向”两次（从水平到垂直再返回水平），以便正确预览新的纸张尺寸。
*   网络浏览器不能（可以理解）自动打印文档。因此，要直接从网络应用程序打印收据，我必须在每个客户端上安装本地网络服务器并调用本地网页，作为回报，它使用一种编程语言（在我的情况下为 PHP）运行脚本本地打印。相当的回旋处。

总而言之，事实证明，生成非常专门设计的文档并以同样的方式打印它们需要花费太多时间和精力，而且效果不佳。我的问题是：是否有人也处理过这个问题，并找到了更好的解决方案？我目前的解决方案是投入大量时间，尝试教育用户，记录用户为获得首选打印输出所需采取的所有步骤，并随着人员、计算机和打印机的变化不断重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T18:21:50.923

动态图像的脚本或脚本化的 PDF 生成解决了一些令人头疼的问题。然后在打印时，它们可以缩放以适合页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T14:18:56.827

我们发现最好的方法是老派。我们必须每晚将数千页打印到点阵预印表格打印机上。所以我们发现最好回到使用打印控件并将所有内容都发送到屏幕上，就好像它是一个字符固定的字体大小，如 courier。

所以我们有 print_field($xxxx,10,"right"); 如果超过 10，该函数将填充空格或截断并将其放在屏幕上。右是右垫左垫或中心的功能。然后你可以做 print_spaces(2),print_line(1) 等等...

然后一切都准确定位。同样，这似乎很痛苦，但是如果您为它开发了一些功能，那么它实际上会使自定义表单变得更容易。我们有一个执行所有数据调用的包装程序。并制作了一个 xxx_header.php、xxx_detail、xxx_footer 页面，根据需要包含在内，通常只是循环调用的几行 print_xxx 函数。

如果您这样做，请记住保留 $ln_cnt 行数。因为在您的详细信息结束时，您将不得不采取 $blank_lines_needed=$page_length-$ln_cnt 并为 print_line($blank_lines_needed); 做一个循环。

再次看起来很多，但如果你这样做，它每次都可以正常工作。我们每天通过网络打印更多的点阵表格，可能比大多数公司都要多。在美国各地，我们每晚通过网络打印大约 60,000 页的预印表格。希望这可以帮助。

然后，我们有一个使用 CURL 和 pdf 实用程序的工作，我们可以将精确的副本以电子方式呈现为 pdf。因此，如果客户愿意，我们可以通过电子邮件发送发票。但是，如果我们将它们发送到点阵，它们会打印出准确的尺寸，因此它们看起来总是一样的。

# android - Matrix.setRotateM 和 Matrix.rotateM 之间有什么区别吗

> ID：11818417
> 
> 赞同：2
> 
> 时间：2012-08-05T17:13:35.380
> 
> 标签：android, matrix, opengl-es-2.0

android.opengl.Matrix 类中有两种旋转矩阵的方法，它们是：

1.  `static void rotateM (float[] m, int mOffset, float a, float x, float y, float z)`
    将矩阵 m 围绕轴 (x, y, z) 旋转角度 a（以度为单位）

2.  `static void setRotateM(float[] rm, int rmOffset, float a, float x, float y, float z)`
    围绕轴 (x, y, z) 将矩阵 m 旋转角度 a（以度为单位）

[这是原始文件](http://developer.android.com/reference/android/opengl/Matrix.html)

这些方法有点不同，但我不明白确切的区别。你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T17:24:29.480

假设矩阵 R 是围绕 (x,y,z) 轴旋转角度 a 的矩阵，然后 rotateM 方法修改现有矩阵 m 如下：`m = R * m`，但 setRotateM 覆盖它：`m = R`。

# php - php使用__callStatic函数时出现奇怪的递归结果

> ID：11818418
> 
> 赞同：1
> 
> 时间：2012-08-05T17:13:38.850
> 
> 标签：php, inheritance, static-methods

我得到了一些奇怪的结果，最好通过显示代码来解释。

假设我创建了一个具有 3 个方法的 A 类：
**添加**方法 - 添加其他要在以后使用的 A 类实例
**_*调用****魔术方法 - 添加动态变量和值* ****_callStatic**静态魔法方法 - 这个方法帮助我创建更具可读性的 A 类**

 **所以课程是：

```
class A_Class {

protected $name;
protected $varList;
protected $childs = array();

protected static $tabCount = 0;

public function __construct($name) {
    $this->name = $name;
}

public function add() {
    if (func_num_args()) { 
        $this->childs = array_merge($this->childs, func_get_args());
    }
    return $this;
}

public function __call($name, $arguments) {
    if (count($arguments) > 0) {
        $this->varList[$name] = $arguments[0];
    }
    return $this;
}

public static function __callStatic($name, $arguments) {
    return new A_Class($name);
}

} 
```

现在当我使用它时：

```
$a = A_Class::MyNameA();
$a->someDynamicVar("I am the var data");
$a->add(A_Class::ANotherNameA());
print_r($a); 
```

工作得很好，导致：

```
A_Class Object
(
    [name:protected] => MyNameA
    [varList:protected] => Array
        (
            [someDynamicVar] => I am the var data
        )

    [childs:protected] => Array
        (
        )
) 
```

但是，如果我尝试创建类 B 作为从类 A 的继承，如下所示：

```
class B_Class extends A_Class {

public function __construct($name) {
    parent::__construct($name);
    $this->add(A_Class::NewAClass());
}

} 
```

并尝试以下操作：

```
$b = new B_Class("NewBClassInstance");
print_r($b); 
```

我得到一个递归结果：

```
B_Class Object
(
    [name:protected] => B-MAN
    [varList:protected] => 
    [childs:protected] => Array
        (
            [0] => B_Class Object
 *RECURSION*
        )
) 
```

对我来说这很奇怪。
好像 __callStatic 是从 B 类而不是 A 类运行的

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:24:30.987

也许这个例子会帮助你理解：

```
<?php

class A
{
  public function __call($name, $args)
  {
    echo "__call\n";
  }

  static public function __callStatic($name, $args)
  {
    echo "__callStatic\n";
  }
}

class B extends A
{
  public function __construct()
  {
    A::callMe();
  }
}

new B(); 
```

运行结果如下：

```
__call 
```

它不*调用*静态版本。为什么？因为 B 是 A 的后裔，因此当两者都存在`A::foo()`时是一个模棱两可的调用。`__call``__callStatic`

请记住，在类的成员函数的上下文中，这*并不*`Class::func()` 意味着“调用类中命名的静态方法”。*`func``Class`*

 *它只是意味着“调用`Class`的函数名为`func`”。例如：

```
class A
{
  public function foo() {}
}

class B
{
  public function foo() {}

  public function bar()
  {
    A::foo(); // call A's foo
  }
} 
```

因此，在您的情况下，该`__call`方法在 B 的构造函数中被调用。这正是 PHP 在这种模棱两可的情况下所做的。它返回`$this`传递给 的内容`$this->add()`，有效地为您提供：`$this->add($this)`在 B 的构造函数中。

同样，这些*都不*意味着在类成员函数的上下文中“调用静态函数”：

```
parent::foo();
self::foo();
static::foo();
A::foo();
B::foo(); 
```

它们都只是表示“在类中调用函数 foo，由 :: 左侧的东西引用”。通常你要么有一个显式的实例函数，要么有一个静态函数，所以调用是没有歧义的。但是当你同时拥有`__call`和时`__callStatic`，PHP 无法知道你想调用哪个，它总是选择`__call`.***

# android - 如何建模 HTML 导航？

> ID：11818420
> 
> 赞同：0
> 
> 时间：2012-08-05T17:13:47.150
> 
> 标签：android, cordova, uml

我正在使用 PhoneGap 进行开发，这是我的最后一年项目，我需要记录我的实施计划。大多数人会在他们的项目中使用 UML 图，但我的是使用 HTML 页面和表格来浏览应用程序。我没有使用任何类和对象，我发现使用类图、状态图等 UML 图似乎不合逻辑……遇到有人建议 IFML，我找不到任何官方出版的书（需要适当的项目参考）很少有网站提到它。

我的应用程序用户启动应用程序->菜单->模式1和模式2-选择模式1->显示模式1级别-单击级别1->`pageA`访问数据库并使用as- `pageA`>显示数据行以不同的方式显示-完成后，返回菜单。

所有这些我都使用 HTML 页面进行导航，并且我已经使用了流程图。

如果我的应用程序流主要使用 HTML 页面，我应该如何建模？我的应用程序没有任何课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:09:53.677

WebML 将成为 OMG 中的标准，名为 IFML（交互流建模语言）。您可以在以下网址找到更多信息： [www.ifml.org](http://www.ifml.org) 和： [http ://www.modeldrivenstar.org/search?q=ifml](http://www.modeldrivenstar.org/search?q=ifml)

WebML / IFML 附带一个名为 WebRatio ( [www.webratio.com](http://www.webratio.com) ) 的建模工具，它还提供与 BPMN 模型的绑定、完整的代码生成、基于模型的调试、文档生成以及其他几个基于 MDE 的功能。

[免责声明：我与 Politecnico di Milano 和 WebRatio 合作，也是 WebML/IFML 的发明者之一]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:49:26.443

有一个名为[codiqa](http://codiqa.com/)的网站。该站点将允许您非常快速地为您的应用程序建模，以获得您希望电话应用程序如何工作的一般流程。您甚至可以在完成设计后导出 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:36:49.253

有几种建模语言专门用于对网页之间的导航流进行建模。最受欢迎的之一是[WebML （](https://en.wikipedia.org/wiki/WebML) [wayback machine 中](https://web.archive.org/web/20120418040925/http://webml.org/webml/page1.do)的原始链接），但周围还有其他几个，只需搜索“导航模型”

# php - 你什么时候说你在 OOP 中很完美？

> ID：11818422
> 
> 赞同：0
> 
> 时间：2012-08-05T17:13:51.620
> 
> 标签：php, oop, design-patterns, object, methods

我使用 PHP 编程已经有一年了。我大部分时间都使用过程式编程方法。我发现使用过程式编程既快速又容易实现。

大约 6 个月后，我开始使用 php oop。我喜欢它，因为我节省了很多代码重写，但我发现它具有挑战性且耗时。我仍然在我的类中使用更多的变量而不是数组。我已经看到了一些非常好的 OOP 示例，它们大量使用数组。

我可以做些什么来达到完美或变得更好？你什么时候说你在 OOP 中是完美的？我开始认为我的学习能力正在下降很多。那是因为我已经学会了如何完成任务。例如，我必须使用哪些 php 方法，我可以去 php.net 并获取方法并完成我的任务。所以我不知道我还能从 php 中取出什么。

我也使用过一段时间的 OOP 框架，发现我可以使用他们的方法，我可以理解他们在方法中使用的大部分代码。我可以根据需要调用方法。但问题是我自己不能像他们那样在我自己的课程中编写面向对象的代码。

如果您说检查您的代码并在之后尝试缩短它，那么我可能会浪费时间，或者我的经理会认为我为什么要花这么长时间或其他原因，这就是我大部分时间使用程序方法的原因，因为它既简单又快捷。此外，我认为因为我的经理只需要工作，所以为什么要关心编码约定。

我希望你们大多数有经验的程序员可能都经历过这种情况。请分享任何可以帮助我和其他新程序员的想法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:17:39.587

由于“完美”是主观的，因此您可以做一些事情来接近：

*   看书。不要阅读 PHP 或 OOP 特定的书籍。相反，阅读有关不会过时的编程技术的书籍。我个人最喜欢的是 Code Complete 2
*   阅读代码。在学习更多知识的所有方法中，阅读比你更聪明/更好的人的代码是最有效的，特别是当你尝试更多地了解特定语言时。
*   代码。很多。在编码中，与大多数创造性工作一样，数量比质量更重要，因为如果你创造了很多东西，你最终会学到很多东西，而且你会变得更好。
*   不要害怕尝试新事物。避免编程停滞不前的唯一方法是处理比您认为可以处理的更大的项目。

别忘了，Jeff Atwood 说你[不应该一直在编程。](http://www.codinghorror.com/blog/2007/01/how-to-become-a-better-programmer-by-not-programming.html)

# php - 如何使按钮在插入时自行加载功能

> ID：11818427
> 
> 赞同：1
> 
> 时间：2012-08-05T17:14:42.610
> 
> 标签：php, javascript, jquery, jquery-ui

目前我的剧本是这样分层的......

PHP 回显按钮。

Jquery UI 按钮函数应用于调用该函数的对象。

有没有办法让按钮在插入按钮时执行 MyAddButtonFunction(this) 。（注意有多个按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:22:06.203

你的意思是

```
echo '<input type="button" id="button1" />';
echo '<script>MyAddButtonFunction($("#button1"))</script>' 
```

或者这是ajaxed？

# javascript - 如何制作一个在 html 中完成后消失的 gif？

> ID：11818428
> 
> 赞同：0
> 
> 时间：2012-08-05T17:14:44.610
> 
> 标签：javascript, css, html, gif

我不能让按钮变得透明，因为 gif 下会有按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:19:38.713

Javascript：

```
document.getElementById("idofgif").style.display = "none"; 
```

jQuery：

```
$("#idofgif").hide(); 
```

# visual-studio-2010 - 从 VS 2010 和 Soap 服务器异常更新 SharePoint 2010 中的列表

> ID：11818429
> 
> 赞同：1
> 
> 时间：2012-08-05T17:14:59.573
> 
> 标签：visual-studio-2010, list, exception, service, sharepoint-2010

我的问题是使用 WPF 项目中的 Visual Studio 2010 更新 SharePoint 2010 中的 LIST。我使用 SharePoint Foundation 2010，在装有 Windows 7 64 的笔记本电脑上运行。

这是一个代码片段，我正在尝试这样做并且我有一个期望

```
 WPFSPListApp.MySPWebService.Lists myListService = new MySPWebService.Lists();

        myListService.Credentials = System.Net.CredentialCache.DefaultCredentials;
    myListService.Url = "http://pc_name/_vti_bin/Lists.asmx";

        XmlNode myListView = myListService.GetListAndView("Customers", ""); 
```

在 XmlNode myListView 行我有这个异常：

```
Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown. 
```

在 SharePoint 中，我创建了“客户”列表。

我已经阅读了很多页面，但没有任何帮助。我使用 WebReference，我在 url 中使用我的电脑名称，当我在浏览器中提供此 url 时，我要求我在 Windows 帐户中使用的登录/密码。

我是 SharePoint 的新手，所以如果我的描述不够，请询问我！

非常感谢！

PS 异常说明（如果需要）：

```
 System.Web.Services.Protocols.SoapException was unhandled
  Message=Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown.
  Source=System.Web.Services
  Actor=""
  Lang=""
  Node=""
  Role=""
  StackTrace:
       at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
       at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
       at WPFSPListApp.MySPWebService.Lists.GetListAndView(String listName, String viewName) in c:\users\kot\documents\visual studio 2010\Projects\WPFSPListApp\WPFSPListApp\Web References\MySPWebService\Reference.cs:line 262
       at WPFSPListApp.MainWindow.btnUpdate_Click(Object sender, RoutedEventArgs e) in c:\users\kot\documents\visual studio 2010\Projects\WPFSPListApp\WPFSPListApp\MainWindow.xaml.cs:line 51
       at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
       at System.Windows.Controls.Primitives.ButtonBase.OnClick()
       at System.Windows.Controls.Button.OnClick()
       at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
       at System.Windows.UIElement.OnMouseLeftButtonUpThunk(Object sender, MouseButtonEventArgs e)
       at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
       at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
       at System.Windows.UIElement.OnMouseUpThunk(Object sender, MouseButtonEventArgs e)
       at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
       at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
       at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
       at System.Windows.Input.InputManager.ProcessStagingArea()
       at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
       at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
       at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
       at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.Run()
       at System.Windows.Application.RunDispatcher(Object ignore)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run(Window window)
       at System.Windows.Application.Run()
       at WPFSPListApp.App.Main() in c:\users\kot\documents\visual studio 2010\Projects\WPFSPListApp\WPFSPListApp\obj\x86\Debug\App.g.cs:line 0
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:42:01.333

尝试仅获取列表

```
XmlNode myListView = myListService.GetList("Customers"); 
```

如果它可以工作，那么这意味着您发送了错误的视图名称（它应该是 guid）。

# python - 如何使用 FlaskClient 测试多部分上传（用于单元测试）

> ID：11818434
> 
> 赞同：2
> 
> 时间：2012-08-05T17:15:42.163
> 
> 标签：python, flask, werkzeug, http-method

文档很少谈论这些，只是 PUT/POST/GET/DELETE 的基本参数，但我有一个伴随 PUT 的分段上传，我该如何测试它？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:23:29.100

回答我自己的问题：

```
builder = EnvironBuilder(method='POST', data={'foo': 'this is some text',
...      'file': (StringIO('my file contents'), 'test.txt')}) 
```

由于 TestClient 是 EnvironBuilder 的包装器，因此只需使用文件键、值扩展数据字典，然后将文件对象包装为 StringIO。

# php - JWT 计算签名 SHA256withRSA

> ID：11818441
> 
> 赞同：7
> 
> 时间：2012-08-05T17:16:25.777
> 
> 标签：php, oauth-2.0

我试图

> 使用从 API 控制台获得的私钥，使用 SHA256withRSA（也称为带有 SHA-256 哈希函数的 RSASASA-PKCS1-V1_5-SIGN）对输入的 UTF-8 表示进行签名。输出将是一个字节数组。

所以让我们把 Header 和 Claim 集合放到数组中

```
{"alg":"RS256","typ":"JWT"}.
{
  "iss":"761326798069-r5mljlln1rd4lrbhg75efgigp36m78j5@developer.gserviceaccount.com",
  "scope":"https://www.googleapis.com/auth/prediction",
  "aud":"https://accounts.google.com/o/oauth2/token",
  "exp":1328554385,
  "iat":1328550785
} 
```

就像[服务帐户：计算签名一样](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature)

> JSON Web 签名 (JWS) 是指导为 JWT 生成签名的机制的规范。签名的输入是以下内容**的字节数组：**
> 
> { **Base64url 编码的**标头}。{ **Base64url 编码的**声明集}

所以我建立数组只是为了测试

```
 $seg0 = array(
    "alg" => "RS256",
    "typ" => "JWT"
  );
  $seg1 = array(
    "iss" => "761326798069-r5mljlln1rd4lrbhg75efgigp36m78j5@developer.gserviceaccount.com",
    "scope" => "https://www.googleapis.com/auth/prediction",
    "aud" => "https://accounts.google.com/o/oauth2/token",
    "exp" => 1328554385,
    "iat" => 1328550785
  );

  $segs = array(
    json_encode($seg0),
    stripslashes(json_encode($seg1))
  );
  $segments = array(
    rtrim(strtr(base64_encode($segs[0]), '+/', '-_'), '='),
    rtrim(strtr(base64_encode($segs[1]), '+/', '-_'), '='),
  ); 
```

这里是。前 2 个数组编码成功。

```
Output
eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9
eyJpc3MiOiI3NjEzMjY3OTgwNjktcjVtbGpsbG4xcmQ0bHJiaGc3NWVmZ2lncDM2bTc4ajVAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcHJlZGljdGlvbiIsImF1ZCI6Imh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbiIsImV4cCI6MTMyODU1NDM4NSwiaWF0IjoxMzI4NTUwNzg1fQ 
```

我继续并编码签名

> 然后必须对签名进行 Base64url 编码。然后将签名与“。”连接起来。字符到输入字符串的 Base64url 表示的末尾。结果是 JWT。它应该是：
> { **Base64url 编码**的标头}。{ **Base64url 编码**的声明集}。{ **Base64url 编码**的签名}

```
 $signature = makeSignedJwt($segments);
  //$signature = makeSignedJwt($segs);
  echo $signature .'<br /><br />';
  $segments[] = rtrim(strtr(base64_encode($signature), '+/', '-_'), '=');
  echo '<pre>'; print_r($segments); echo '</pre>';  

function makeSignedJwt($segments)
{
    $data = implode('.', $segments);
    if (!openssl_sign($data, $signature, privateKey, "sha256"))
    {
        exit("Unable to sign data");
    }
    return $signature;
}

Output
    Array
(
    [0] => eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9
    [1] => eyJpc3MiOiI3NjEzMjY3OTgwNjktcjVtbGpsbG4xcmQ0bHJiaGc3NWVmZ2lncDM2bTc4ajVAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcHJlZGljdGlvbiIsImF1ZCI6Imh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbiIsImV4cCI6MTMyODU1NDM4NSwiaWF0IjoxMzI4NTUwNzg1fQ
    [2] => xFS6iZdJku5RKJ5_XdH3W5A8e9V3wsaFeQhAXoJtuxzW-xvqZq1CdEJJAo60VvK1UFONElVf_pthezEyz-eyWsoRGVZFibUQBaKXLI8eR28eFlaCAKH7bKh820uR7IwuRx4xr8MPmnC8so9u9TEY153gkU6Mz9e--pQPlcLlGY
) 
```

一定是少了什么。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-10T02:06:46.327

我不确定您的问题是什么，但以下内容对我有用：

```
//helper function
function base64url_encode($data) { 
    return rtrim(strtr(base64_encode($data), '+/', '-_'), '='); 
}

//Google's Documentation of Creating a JWT: https://developers.google.com/identity/protocols/OAuth2ServiceAccount#authorizingrequests

//{Base64url encoded JSON header}
$jwtHeader = base64url_encode(json_encode(array(
    "alg" => "RS256",
    "typ" => "JWT"
)));
//{Base64url encoded JSON claim set}
$now = time();
$jwtClaim = base64url_encode(json_encode(array(
    "iss" => "761326798069-r5mljlln1rd4lrbhg75efgigp36m78j5@developer.gserviceaccount.com",
    "scope" => "https://www.googleapis.com/auth/prediction",
    "aud" => "https://www.googleapis.com/oauth2/v4/token",
    "exp" => $now + 3600,
    "iat" => $now
)));
//The base string for the signature: {Base64url encoded JSON header}.{Base64url encoded JSON claim set}
openssl_sign(
    $jwtHeader.".".$jwtClaim,
    $jwtSig,
    $your_private_key_from_google_api_console,
    "sha256WithRSAEncryption"
);
$jwtSig = base64url_encode($jwtSig);

//{Base64url encoded JSON header}.{Base64url encoded JSON claim set}.{Base64url encoded signature}
$jwtAssertion = $jwtHeader.".".$jwtClaim.".".$jwtSig; 
```

# php - 使用 mysql 创建子元素的动态菜单

> ID：11818448
> 
> 赞同：0
> 
> 时间：2012-08-05T17:17:50.247
> 
> 标签：php, mysql, html

抱歉，如果我的标题被取消了，我不确定我正在尝试做的技术术语是什么。话虽如此，我想做的是构建一个从 mysql 查询填充的手风琴式菜单。菜单的第一部分将简单地包含团队名称列表，该列表将来自选择所有团队名称并构建菜单的查询：

```
$result = mysql_query("SELECT * FROM SportsByTeam");

<ul class='nav nav-list'>
<?php
while($row = mysql_fetch_array($result))
  {
?>
<li>
<a href="<? echo $row['seo_team']?>"> <?php echo $row['team'] ?> </a>
</li>
<?php
} ?> 
```

这非常适合我正在尝试构建的顶级菜单。我完全坚持的是现在如何合并菜单的手风琴（底层）。我想要发生的是，当有人点击上面查询生成的球队时，属于该球队的球员列表将下拉。需要明确的是，我并不是在问如何从 html/css 的角度创建手风琴菜单，而是在问如何基于 mysql 查询创建动态手风琴菜单。我为这部分提出的查询是：

```
SELECT PlayerByTeam.team_name AS TeamName, SportsByTeam.seo_team, PlayerByTeam.first_name, PlayerByTeam.last_name

FROM PlayerByTeam

inner join SportsByTeam ON PlayerByTeam.team_name = SportsByTeam.team 
```

但这是我能做到的。如何将两个查询的结果合并到一个动态菜单中？看起来像：

```
<ul>
<li> Team Name 1 </li>
<ul>
<li> Player Name 1 </li>
<li> Player Name 2 </li>
</ul>
<li> Team Name 2 </li>
..etc
</ul> 
```

（我非常感谢您的所有帮助。SO 帮助我学到了很多东西。我希望有一天能够尽快回馈社区。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:35:08.623

您可以选择所有球员并按他们的球队排序。然后每次团队名称更改时，都需要完成一个新元素。

一些伪代码：

```
while($row = get_row()) {
    if (team_has_changed($row)) {
        if (there_was_a_previous_team()) {
            end_previous_team();
        }
        start_new_team();
    }
    process_team_member($row);
}    
if (there_was_a_previous_team()) {
    end_previous_team();
} 
```

我在之前的一些答案中概述了这个带有while循环的非常有表现力的代码，你可以在这里找到它：[https ://stackoverflow.com/a/11616884/367456](https://stackoverflow.com/a/11616884/367456)

然后，您可以将这种分组包装到一些允许您进行一些简单使用的迭代器组件中（您应该在此处使用 Mysqli 或 PDO，因为它们具有可以迭代的结果）。我在先前的答案中证明了这一点，该答案已经有一些代码示例：[https ://stackoverflow.com/a/11619281/367456](https://stackoverflow.com/a/11619281/367456)

它通过为每个级别提供一个迭代器来简化问题，而一开始您只需查询数据库并从中获得一个结果。

# winforms - 如何编写在数据网格完成渲染后运行的代码？

> ID：11818451
> 
> 赞同：0
> 
> 时间：2012-08-05T17:18:09.027
> 
> 标签：winforms, user-controls, datagridview, onload

当网格在表单上并且此代码在 form_load 上时，更新自定义列“hello”的以下代码可以完美运行。但是当网格在用户控件上并且代码在 UserControl1_Load 上时，它不会更新网格（除非我在按钮单击等内添加此代码） - 我责怪微软！

我试图找到一种解决方法来在网格完成渲染后运行该代码，因为它可以工作（例如，当我在 button_click 事件上编写它时），有什么想法吗？

```
List<MyClass> all_customers = new List<MyClass>();

   all_customers.Add(new MyClass() { MyProperty = 2, MyProperty2 = "33" });
   all_customers.Add(new MyClass() { MyProperty = 2, MyProperty2 = "33" });
   all_customers.Add(new MyClass() { MyProperty = 2, MyProperty2 = "33" });

   dataGridView1.DataSource = all_customers;

   DataGridViewTextBoxColumn c = new DataGridViewTextBoxColumn();
   c.Name = "hello";
   c.HeaderText = "hello";
   dataGridView1.Columns.Add(c);
   dataGridView1.Rows[0].Cells["hello"].Value = "text2"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:09:13.743

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
  {
   dataGridView1.Rows[0].Cells["hello"].Value = "pp";

  } 
```

这成功了。由于某种原因，它以前对我不起作用，但是当我从所有复杂的代码行中剥离我的代码时，它确实起作用了。那好吧

# java - 如何在循环中添加带有背景图像的 JLabel

> ID：11818454
> 
> 赞同：0
> 
> 时间：2012-08-05T17:18:29.913
> 
> 标签：java, swing, loops, jlabel, imageicon

我需要用背景制作房间 JLabel。这个背景是房间的状态，只是我想把这种颜色更改为循环中的图像我做了一个酒店预订房间和其他一些服务，但我不知道该怎么做

```
private void checkstatus() {
    jPanel2.removeAll();
    int dx = 1; 
    ResultSet Rroom;
    Rroom = DB.RunQuery("Select * From rooms");

    final ImageIcon imageIcon = new ImageIcon("c://Des.jpg");

    try {
        while(Rroom.next()) {
            String Rstatus = Rroom.getString(3);
            rou+=40;

            Label xlabel;
            xlabel = new Label("Label 1",Label.CENTER);
            Font bigFont = new Font("SanSerif", Font.BOLD, 11);
            xlabel.setFont(bigFont);

            if(Rstatus.equals("Busy"))
                xlabel.setBackground(Color.red);
            else if (Rstatus.equals("Test"))
                xlabel.setBackground(Color.CYAN);
            else
                xlabel.setBackground(Color.green);

            jPanel2.add(xlabel);
            xlabel.setForeground(Color.black);
            xlabel.setBounds(new Rectangle(rou, rou2, 35, 35));
            xlabel.setText("1");

            if(rou==365) {
                rou=-35;
                // El 2rtfa3
                rou2 +=40;
            }

            dx++; 
        }  // end of loop

        rou = -35; // for new check
        rou2=10; // for new check   

    }// try 
    catch (SQLException e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:24:47.240

您可以使用

```
setIcon(Icon icon) 
```

JLabel 类的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:26:29.077

要显示带有图标的 JLabel，您应该使用[JLabel#setIcon(Icon)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setIcon%28javax.swing.Icon%29)。

```
xlabel.setIcon(new ImageIcon(yourImage)); 
```

# html - CSS - Div 不会计算子 div

> ID：11818458
> 
> 赞同：0
> 
> 时间：2012-08-05T17:18:46.360
> 
> 标签：html, css

我目前的部分 HTML 看起来有点像这样。这是一个简化版本。

```
<div id="content">
   <div id="screenshot">
      <img src="res/screenshot.png" />
   </div>
   <div id="introduction">
      <p>This is just some text</p>
   </div>
</div> 
```

我的 CSS 看起来像这样。

```
#content {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: blue;
}

#screenshot img {
    padding-top: 10px;
    padding-bottom: 10px;
    float: left;
}

#introduction {
    position: relative;
    top: -100%;
    left: 200px;
    width: 500px;
    height: 100%;
} 
```

我的问题是“背景：蓝色；” 仅选择图像，但不环绕文本。顺便说一句，我知道如何将文本背景设置为蓝色，但我需要通过`#content`. 如果它可以提供帮助，则`#content`' 的父级是 CSS 中的 this。基本上，我需要的是，如果我对此做一些事情`#content`，它会影响两个孩子的 div。它只影响`#screenshots`目前。：/

```
#content-wrapper{
    position: absolute;
    width: 100%;
    height: 340px;
    left: 0;
    top: 50%;
    margin-top: -170px;
} 
```

谢谢， zeokila

编辑：我需要的是，如果我对此做一些事情`#content`，它会影响两个孩子的 div。它只影响`#screenshots`目前。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:27:11.043

尝试为`#content`.

当一个元素被绝对定位时，它的宽度不再默认为 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:26:27.863

难道不应该...

```
background-color:blue; 
```

你也可以继承背景的颜色；

如果它如您所说的那样显示图像，那么也可以在 div 中添加一个宽度 | 高度。

或者你可以试试

```
#content > #introduction > P {
    background-color:blue;
} 
```

# html - 如何在 contentPlaceholder 中引用具有特定 ID 的按钮

> ID：11818460
> 
> 赞同：0
> 
> 时间：2012-08-05T17:19:01.407
> 
> 标签：html, css

我是否必须引用诸如 ctl00$MainContent$send 之类的 ID，或者我可以以某种方式指定 asp.bet，我希望它保持 id 与发送一样简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:31:46.487

您可以选择任何您想要的 ID，只要它**不存在于页面中的任何其他位置**即可。

# ruby - 在 jRuby 中使用“fork”生成进程的替代方法？

> ID：11818463
> 
> 赞同：5
> 
> 时间：2012-08-05T17:19:16.420
> 
> 标签：ruby, jruby

在 MRI Ruby 中，我可以这样做：

```
def transfer
  internal_server = self.init_server
  pid = fork do
    internal_server.run
  end

  # Make the server process run independently.
  Process.detach(pid)

  internal_client = self.init_client
  # Do other stuff with connecting to internal_server...
  internal_client.post('some data')    
ensure
  # Kill server
  Process.kill('KILL', pid) if pid
end 
```

但是上面的代码不会在 jRuby 中运行，因为它不支持 'fork' 方法：

```
NotImplementedError: fork is not available on this platform 
```

在 jRuby 中是否有任何替代解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T23:39:04.350

这是一个很好的问题，但不幸的是，如果你想要的是启动一个与父进程共享状态的新进程，我不相信 JVM 可以安全地给你想要的东西。那是因为分叉只复制当前正在运行的线程。例如，GC 线程不会被复制。您不想在没有 GC 的情况下运行 JVM。

使用 fork 的唯一半安全方式是之后立即执行。

Charles Nutter 在他的[博客](http://blog.headius.com/2009/05/fork-and-exec-on-jvm-jruby-to-rescue.html)上首先说您可以使用 FFI 来分叉和执行，但随后提出了一个警告：

> 以这种方式使用 fork+exec 的最大问题是，您不能保证在 fork 调用和 exec 调用之间*没有发生*。例如，如果 JVM 决定 GC 或移动内存，您可能会在 JVM 进程级别发生致命崩溃。因此，我不建议在 JRuby 中通过 FFI 使用 fork + exec，尽管它非常酷。

我倾向于相信他的建议。

因此，fork 和 exec 会带来一些风险，但保留分叉的 JVM 是自找麻烦。

您应该认真考虑 Sergio 的评论建议的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T03:01:25.177

我找到了解决方案。我们可以使用 JRuby 中的内置库 FFI 来“模拟”MRI 中的 Process.fork。

```
# To mimic the Process.fork in MRI Ruby
module JRubyProcess
  require 'ffi'
  extend FFI::Library
  ffi_lib FFI::Library::LIBC
  attach_function :fork, [], :int
end

pid = JRubyProcess.fork do
  #internal_server.run
end 
```

更多细节：

[https://github.com/ffi/ffi](https://github.com/ffi/ffi)

[http://blog.headius.com/2008/10/ffi-for-ruby-now-available.html](http://blog.headius.com/2008/10/ffi-for-ruby-now-available.html)

# ruby - Jekyll 在 ubuntu 11.10 上安装错误

> ID：11818464
> 
> 赞同：1
> 
> 时间：2012-08-05T17:19:17.203
> 
> 标签：ruby, rubygems, ubuntu-11.10, jekyll

我正在尝试使用[jekyll](https://github.com/mojombo/jekyll)创建博客。我正在使用 Ubuntu 11.10，但是在我安装了 ruby​​ gem 并尝试在我的服务器上本地运行它之后，我收到以下错误：/usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:926:in `report_activate_error'：找不到

```
RubyGem jekyll (>= 0) (Gem::LoadError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:244:in `activate_dep'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:236:in `activate'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:1307:in `gem'
    from /usr/local/bin/jekyll:18 
```

我认为这是 mu ruby​​ gems 路径的问题。我的 gem env 输出如下：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [i686-linux]
  - INSTALLATION DIRECTORY: /home/swaroop/.rvm/gems/ruby-1.9.3-p125@test
  - RUBY EXECUTABLE: /home/swaroop/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
  - EXECUTABLE DIRECTORY: /home/swaroop/.rvm/gems/ruby-1.9.3-p125@test/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/swaroop/.rvm/gems/ruby-1.9.3-p125@test
     - /home/swaroop/.rvm/gems/ruby-1.9.3-p125@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:18:02.533

用 . 调用它不是一个好方法`sudo`。它正在使用`sudo`似乎您没有在您没有的用户下安装 gem `sudo`。

我推荐你

1.  看看[https://github.com/plusjade/jekyll-bootstrap.git](https://github.com/plusjade/jekyll-bootstrap.git)。它可以帮助你做一些事情。

2.  开始使用 Bundler ( [https://github.com/roolo/roolo.github.com/blob/master/Gemfile](https://github.com/roolo/roolo.github.com/blob/master/Gemfile) )。它将帮助您拥有与 Github 上相同的版本，以便将来在那里部署。

    *   尝试克隆我的博客，然后在 repo 的目录中运行 bundle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:02:44.037

我所要做的就是在它前面加上 sudo 即，

```
sudo jekyll --server 
```

# spring - Spring Roo 和 AOP

> ID：11818469
> 
> 赞同：1
> 
> 时间：2012-08-05T17:20:17.490
> 
> 标签：spring, aop, spring-roo

我正在尝试将现有的（网络）项目迁移到 roo。在迁移了一些痛苦的小时后，我的 maven-settings roo 开始喜欢我的项目，并且我能够运行我的单元测试。到现在为止还挺好。

在我的项目中，我使用 spring-aop 来做一些安全性，全部使用代理，没有编译器。在 Eclipse 中启动我的 webapp 时，它告诉我，缺少某些类，例如 org.aspectj.lang.annotation.Aspect。

查看我的类路径时，所有aspectj.jar-stuff 都从类路径中删除。我猜那是因为 Roo 使用 Aspectj-Compiler 来添加 AOP，并且不需要运行时编织。那么迁移我现有的 aop 代码的正确方法是什么？我应该告诉 Roo/Maven 将所有 aspectj-jar 添加到我的 webapp-lib 文件夹还是应该将 aop 迁移到编译时编织？

答案是什么，我该怎么做？

1.  在我的 pom.xml 中有这些依赖项： 代码：

    ```
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${aspectj.version}</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>${aspectj.version}</version>
    </dependency> 
    ```

我真的不知道从 Eclipse 类路径中删除 aspectj 的所有 roo-maven-stuff 中的魔力在哪里。那么我必须改变什么才能将这些罐子留在类路径中？

1.  我的方面看起来像这样，并且在使用运行时编织时有效：代码：

    ```
    @Aspect
    public class SecurityAspect {
        @Around("execution(@AuthorizedMethod public * de.diandan.web.controller.*.*(..))")
        public Object checkRights(ProceedingJoinPoint  jp) throws Throwable {
        } 
    ```

我该怎么做才能告诉aspectj在编译时编织这个方面？

问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:13:38.143

因此，在我花时间分析问题之后，似乎不是 Roo 本身从类路径中删除了 aspectj jar，而是 versin 2.7 中的 eclipse-Plugin（受到 command > roo 项目的尊重）。我不知道那是错误还是功能，但是使用该插件创建一个 eclipse-project 删除了该 jar。切换到 2.8 解决了这个问题。

所以作为答案：->使用进一步的运行时编织->魔术发生在eclipse-plugin中

# javascript - 存储在 HTML5 存储中的引导崩溃的当前状态

> ID：11818470
> 
> 赞同：2
> 
> 时间：2012-08-05T17:20:18.910
> 
> 标签：javascript, jquery, html, twitter-bootstrap, local-storage

我不确定这是否可能，但我希望有人能指引我朝着正确的方向前进，以实现我希望实现的目标。

我正在从 twitter 建立一个围绕 bootstrap 的网站；我在节框上使用引导折叠。默认情况下，此框不折叠，但如果用户按下按钮并折叠该框；即使在页面刷新后，我也希望将此信息存储在客户端的某种缓存中。

假设用户折叠它们，并在明天返回；那么它们仍然会被折叠，直到用户再次按下按钮。

我不会包含我的任何代码，因为我怀疑这不仅仅是添加的类（我还是使用默认的类），我也无法链接到该项目，因为它在我们的 Intranet 之外不可用。

不过，这是 jsfiddle 上的 bootstrap 的副本。

[http://jsfiddle.net/B43hy/](http://jsfiddle.net/B43hy/)

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T17:52:52.033

您可以尝试使用[cookie](http://www.w3schools.com/js/js_cookies.asp)或 HTML5 [LocalStorage](http://diveintohtml5.info/storage.html)。这两种机制都存储客户端数据。您应该选择其中一个（如果是 cookie，请编写一个 get/set 函数）。

然后你需要给每个折叠元素一个在整个站点中唯一的 id，这样它就不会与其他页面上的任何元素发生冲突。每次用户折叠元素时，您都会将 id 保存在客户端上。每次用户取消折叠元素时，您都会从存储中删除 id。您可以使用 Bootstrap 抛出的事件，如下所示：

```
$('.collapse').on('hidden', function() {
      // store this.id
}).on('shown', function() {
      // delete this.id
}); 
```

当你加载一个页面时，`$( document ).ready`你应该在你的函数中添加以下检查：

```
$(document).ready(function(){
    $(".collapse").collapse().each(function(){
        if( isStored( this.id ) ) {
            $( this ).collapse( 'hide' );
        }
    });
});​ 
```

这将检查是否应该关闭任何折叠元素，如果是则隐藏它们。该`isStored`方法应该是检查 cookie 或 LocalStorage 以查看 id 是否存在的方法。

如果您的网站上有很多此类折叠，那么您可能会为它们使用很多 id。在这种情况下，cookie 可能是一个糟糕的选择，因为它们会在每次请求时传输到服务器，从而在没有真正目的的情况下减慢连接速度。LocalStorage 不受此缺陷的影响，并且总体上更易于用户使用，但是（与许多 HTML5 功能一样）它仅适用于较新的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T04:37:58.633

我使用[jQuery storage api 插件](https://github.com/julien-maurel/jQuery-Storage-API)，它允许您放入 cookie、本地存储、命名空间和会话存储。

我记住 Bootstrap 折叠字段状态的代码很简单：

```
 // Open/close the collapse panels based on history
    var storage  = $.localStorage;

    $('.collapse').on('hidden.bs.collapse', function () {
        storage.remove('open_' + this.id);
    });

    $('.collapse').on('shown.bs.collapse', function () {
        storage.set('open_' + this.id, true);
    });

    $('.collapse').each(function () {
        // Default close unless saved as open
        if (storage.get('open_' + this.id) == true) {
            $(this).collapse('show');
        }
    }); 
```

# css - CSS第一个第二个孩子问题

> ID：11818475
> 
> 赞同：0
> 
> 时间：2012-08-05T17:20:58.060
> 
> 标签：css, css-selectors

我正在尝试选择一个 H1 元素，它是其组中的第二个子元素，但它似乎不起作用。CSS如下所示

```
.midLeftIn h1:nth-child(1) {
    color:#f89859;
    text-transform: uppercase;
    font-size: 18px;
    letter-spacing: 3px;
    border-bottom: solid 2px #FFF;

}

.midLeftIn h1:nth-child(2) {
    color:#000;
    text-transform: uppercase;
    font-size: 18px;
    letter-spacing: 3px;
    border-bottom: solid 2px #FFF;

} 
```

WordPress 输出的 HTML 如下所示

```
<div class="midLeftIn">

          <h1>We&#8217;re willing to help</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sed fermentum purus. Integer gravida, neque ac placerat consequat, diam dolor gravida nibh, a venenatis tortor justo non velit. Cras fringilla tincidunt justo eu pulvinar. Phasellus at mauris nec odio sagittis gravida. Etiam bibendum semper libero in dapibus.</p>

<p>Phasellus vulputate, lectus vitae rhoncus dapibus, eros magna bibendum felis, eget placerat neque diam id arcu. Integer vel fringilla erat. Nulla volutpat placerat elit at ornare.Praesent accumsan ultrices mi, sed cursus magna adipiscing eu. Aenean porttitor nisi quis arcu luctus non imperdiet elit porta.  <div style='height:25px; padding:0; margin:0; '  ></div></p>

<h1>Another good thing</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sed fermentum purus. Integer gravida, neque ac placerat consequat, diam dolor gravida nibh, a venenatis tortor justo non velit. Cras fringilla tincidunt justo eu pulvinar. Phasellus at mauris nec odio sagittis gravida. Etiam bibendum semper libero in dapibus.</p>
<p>Phasellus vulputate, lectus vitae rhoncus dapibus, eros magna bibendum felis, eget placerat neque diam id arcu. Integer vel fringilla erat. Nulla volutpat placerat elit at ornare.Praesent accumsan ultrices mi, sed cursus magna adipiscing eu. Aenean porttitor nisi quis arcu luctus non imperdiet elit porta.   <div style='height:25px; padding:0; margin:0; '  ></div></p>

<h1>Something nice goes here</h1>
<p style="text-align: justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sed fermentum purus. Integer gravida, neque ac placerat consequat, diam dolor gravida nibh, a venenatis tortor justo non velit. Cras fringilla tincidunt justo eu pulvinar. Phasellus at mauris nec odio sagittis gravida. Etiam bibendum semper libero in dapibus.</p>

<p style="text-align: justify;">Phasellus vulputate, lectus vitae rhoncus dapibus, eros magna bibendum felis, eget placerat neque diam id arcu. Integer vel fringilla erat. Nulla volutpat placerat elit at ornare.Praesent accumsan ultrices mi, sed cursus magna adipiscing eu. Aenean porttitor nisi quis arcu luctus non imperdiet elit porta. <div style='height:25px; padding:0; margin:0; '  ></div> 
```

```
</div><!-- End MidLeftIn -->

</div><!-- End MidLeftIn --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:23:51.420

您是否要选择每个第 n 个`h1`孩子？

如果是这样，您需要改为使用`:nth-of-type()`将它们`p`与您的 中的任何其他兄弟姐妹区分开来`div`，因为`:nth-child()`仅考虑元素相对*于其所有兄弟姐妹*的位置：

```
.midLeftIn h1:nth-of-type(1)
.midLeftIn h1:nth-of-type(2) 
```

# xml - 爬取 WP7 市场

> ID：11818481
> 
> 赞同：0
> 
> 时间：2012-08-05T17:21:36.220
> 
> 标签：xml, windows-phone-7, xml-parsing

我使用了这个网站的代码：

[http://www.manyniches.com/windows-phone/crawling-the-windows-phone-marketplace/](http://www.manyniches.com/windows-phone/crawling-the-windows-phone-marketplace/)

爬取 Windows Phone 市场。好消息是它有效，我可以获得有关市场上任何应用程序的所有信息......除了描述。

有人知道如何修改代码以获取每个应用程序的描述吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:20:50.873

如果您尝试使用[NotepadXML](http://www.microsoft.com/en-us/download/details.aspx?id=7973)之类的程序来分析 Facebook 应用程序的以下 URL

[http://catalog.zune.net/v3.2/en-US/apps/82a23635-5bd9-df11-a844-00237de2db9e/](http://catalog.zune.net/v3.2/en-US/apps/82a23635-5bd9-df11-a844-00237de2db9e/)

您会注意到描述的标签称为“内容”。

编辑：这是检索“内容”标签的代码：

```
XDocument doc = XDocument.Load("http://catalog.zune.net/v3.2/en-US/apps/82a23635-5bd9-df11-a844-00237de2db9e/");
XNamespace ns = "http://www.w3.org/2005/Atom";
var appDescription = doc.Descendants(ns + "content").FirstOrDefault().Value; 
```

# c - DDK 转为 .sln

> ID：11818486
> 
> 赞同：0
> 
> 时间：2012-08-05T17:22:11.347
> 
> 标签：c, visual-studio-2010, driver

有没有工具可以将 WinDDK make 转换为 VS2010 项目\解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:05:27.150

看看 DDKBuild。

*   [http://www.hollistech.com/Resources/ddkbuild/ddkbuild.htm](http://www.hollistech.com/Resources/ddkbuild/ddkbuild.htm)

我将 Visual Studio 2012 与 DDKBuild 结合使用来编译驱动程序 - 当出现错误时，我可以在错误列表窗口中看到它们，并且可以直接转到驱动程序源中的正确行...节省大量时间！

我已经为我想要的不同驱动程序选项设置了各种解决方案配置，例如运行 PreFast 通道、编译为 32 位、64 位、针对不同的操作系统目标等 - 使得在发布和调试或静态分析工具之间切换非常容易。

基本上，您在 Visual Studio 中创建一个新的 Visual Studio Makefile 项目，然后将 NMAKE|Build 命令行设置为如下所示：

```
ddkbuild -WIN7 -prefast checked . -cZ 
```

或者

```
ddkbuild -WIN7XP checked . -cZ 
```

或者

```
ddkbuild -WIN7XP free . -cZ 
```

等，具体取决于您的目标平台。

我自己没用过，但是为了更强大的方式来利用 Visual Studio 进行驱动程序开发，看看 VisualDDK ......它可以让你通过 VMWare 开发你的驱动程序......这样崩溃就消失了虚拟机，而不是整个机器。它还提供了一种进行内核调试的方法....通常您需要一台辅助机器来执行此操作（以及 USB、Firewire 或以太网链路）。

*   [http://visualddk.sysprogs.org/](http://visualddk.sysprogs.org/)

# c - 动态参数传递给 C 中的 execlp() 函数

> ID：11818491
> 
> 赞同：2
> 
> 时间：2012-08-05T17:22:43.850
> 
> 标签：c, variables, parameters

为了简单起见，我修改了我的程序。我想要做的是在运行时接受任意数量的参数并将其传递给`execlp()`. 我正在使用固定长度的二维数组`m[][]`，这样任何未使用的（剩余的）插槽都可以传递`NULL`给`execlp`（在这种情况下`m[2][]`）。

```
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<string.h>

int main() {
    char m[3][5], name[25];
    int i;
    strcpy(name, "ls");
    strcpy(m[0], "-t");
    strcpy(m[1], "-l");
    //To make a string appear as NULL (not just as an empty string)
    for(i = 0; i < 5; i++)
        m[2][i] = '\0'; // or m[2][i] = 0 (I've tried both)
    execlp(name, m[0], m[1], m[2], '\0', 0, NULL);  
    // Does not execute because m[2] is not recognized as NULL
    return 0;
    } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:57:01.690

由于您想接受任意数量的参数，因此您应该使用的是[`execvp()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html)代替`execlp()`：

```
#include <unistd.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <stdlib.h>

int main(void)
{
    char *argv[] = { "ls", "-l", "-t", 0 };
    execvp(argv[0], argv);
    fprintf(stderr, "Failed to execvp() '%s' (%d: %s)\n", argv[0], errno,
            strerror(errno));
    return(EXIT_FAILURE);
} 
```

该`execvp()`函数采用数组形式的任意长度的参数列表，这与`execlp()`您编写的任何单个调用仅采用固定长度的参数列表不同。如果您想容纳 2、3、4、... 参数，您应该为每个不同数量的参数编写单独的调用。其他任何事情都不完全可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:40:51.193

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

int main() {
    char *args[] = {"ls", "-t", "-l" };
    execlp(args[0], args[0], args[1], args[2], NULL);
    perror( "execlp()" );
    return 0;
    } 
```

为简单起见，我用一个固定的指针数组替换了所有字符串管理的东西。execlp() 只需要一个最终的 NULL 参数，execle() 还需要在 NULL arg*之后的环境指针。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:56:09.920

```
 char m[3][5]; 
```

这是一个二维字符数组。

```
m[2] is a element of the 2D array that is it it a 1D Array of characters. 
```

所以它总是有一个常量地址。它永远不会是 NULL，因为它是一个不能为 NULL 的常量地址。同样它不能分配给 NULL，所以你必须使用 NULL 作为最后一个参数。

execlp() 使用 NULL 作为终止参数，因此您必须提及它。

如果使用命令行参数，则最后一个命令行参数始终为 NULL。所以 char *argv[] 参数的最后一个元素可以用作 execlp() 函数中的终止参数。

# objective-c - 从 NSXMLDocument 节点中获取属性信息

> ID：11818493
> 
> 赞同：1
> 
> 时间：2012-08-05T17:23:04.083
> 
> 标签：objective-c, xml-parsing, nsxmlparser, nsxml, nsxmldocument

几天来，我一直在想办法弄清楚如何在可可和目标 C 中解析这个 xml 文档。我已经将它加载到 NSXMLDocument 中，并且已经能够获取节点。

```
<MediaContainer noHistory="0" replaceParent="0" size="4" identifier="com.plexapp.system">
<Directory key="aHR0cDovLzE5Mi4xNjguMS45OTozMjQwMC9saWJyYXJ5L3NlY3Rpb25zLzI_" art="2/art?updatedAt=1344035442" unique="1" name="3D Movies" title="3D Movies" type="movie" serverVersion="0.9.6.7.204-266f05d" host="192.168.1.99" serverName="Eddard" path="/library/sections/2" machineIdentifier="2dddaaedb46a722cf74695c19a7d3947bbeebfd2" local="1" port="32400"/>
<Directory key="aHR0cDovLzE5Mi4xNjguMS45OTozMjQwMC9saWJyYXJ5L3NlY3Rpb25zLzE_" art="1/art?updatedAt=1344035443" unique="1" name="Movies" title="Movies" type="movie" serverVersion="0.9.6.7.204-266f05d" host="192.168.1.99" serverName="Eddard" path="/library/sections/1" machineIdentifier="2dddaaedb46a722cf74695c19a7d3947bbeebfd2" local="1" port="32400"/>
<Directory key="aHR0cDovLzE5Mi4xNjguMS45OTozMjQwMC9saWJyYXJ5L3NlY3Rpb25zLzQ_" art="4/art?updatedAt=1344035444" unique="1" name="Super Audio CDs" title="Super Audio CDs" type="movie" serverVersion="0.9.6.7.204-266f05d" host="192.168.1.99" serverName="Eddard" path="/library/sections/4" machineIdentifier="2dddaaedb46a722cf74695c19a7d3947bbeebfd2" local="1" port="32400"/>
<Directory key="aHR0cDovLzE5Mi4xNjguMS45OTozMjQwMC9saWJyYXJ5L3NlY3Rpb25zLzM_" art="3/art?updatedAt=1344037454" unique="1" name="TV Shows" title="TV Shows" type="show" serverVersion="0.9.6.7.204-266f05d" host="192.168.1.99" serverName="Eddard" path="/library/sections/3" machineIdentifier="2dddaaedb46a722cf74695c19a7d3947bbeebfd2" local="1" port="32400"/>
</MediaContainer> 
```

XML 文档的棘手之处在于每个节点都有多个属性。所以当我去 [node XMLString] 时，我得到了仍然没有意义的完整字符串。他们是一种从节点中提取单个属性的方法吗，例如类似于名为 getAttribute(String) 的 java XML 方法，它允许我输入字符串参数的属性名称并返回绑定到它的值，例如例如 getAttribute("Size") 将返回一个值为 4 的字符串。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:48:01.690

如果您使用的是 NSXMLParser，则可以使用以下 NSXMLParserDelegate 方法来获取 XML 元素的属性：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
   if ([elementName isEqualToString:@"MediaContainer"]) {
      NSString *size = [attributeDict objectForKey:@"size"];
   }
} 
```

# c# - 试图理解类和结构

> ID：11818494
> 
> 赞同：0
> 
> 时间：2012-08-05T17:23:14.143
> 
> 标签：c#, class, reference, struct, value-type

今天早上我一直在阅读 MSDN “C# classes and struct”，试图更好地理解这两个概念。

> 类是**引用类型**。当创建类的对象时，分配给该对象的变量只保存对该内存的引用。当对象引用分配给新变量时，新变量引用原始对象。通过一个变量所做的更改会反映在另一个变量中，因为它们都引用相同的数据。
> 
> 结构是一种**值类型**。创建结构时，分配给结构的变量保存结构的实际数据。当结构被分配给一个新变量时，它被复制。因此，新变量和原始变量包含相同数据的两个单独副本。对一个副本所做的更改不会影响另一个副本。”--MSDN

有人可以写几行示例代码来说明这个概念，因为我是一个试图掌握 OOP 概念并向我解释的年轻高中女生吗？

参考与价值（场景）：一本书中有一页术语比较难懂，不是所有人都能理解，所以作者决定把术语的定义放在括号里（给不熟悉术语的人） . 这就像按值传递吗？

如果作者将页码引用放在术语后面的括号中，不熟悉该术语的读者可以浏览找到该术语的含义，那么这是否是引用传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:42:12.437

试着简单地说，区别主要在于实例的存储和使用方式。

引用类型——顾名思义——总是通过引用来寻址。这意味着变量不保存对象本身，而只是有关信息在内存中有效存储位置的信息。现在，如果您将此变量分配给另一个值，则不会复制实例，而只会复制引用，这意味着现在两个变量都引用了同一个实例。

另一方面，值类型直接存储在它们所在的位置（例如变量）中。因此，当您对另一个变量进行赋值时，它将复制该实例，并且两者都将保持独立。

假设我们有实例 a 和 b，它们有一个字段 x：

```
a = new MyReferenceType();
a.x = 5;
b = a;
a.x = 10;
// b.x is now also 10, because both a and b reference the same instance

a = new MyValueType();
a.x = 5;
b = a;
a.x = 10;
// b.x is still 5, because both a and b are distinct instances 
```

现在作为参考可以提供更大的灵活性；引用的大小是恒定的，但它引用的对象实例的大小可能会有所不同，这可以实现典型的 OO 原则，尤其是多态性。此外，与值类型相比，引用可以引用“无”，在这种情况下它们是`null`.

注意：这主要是 .NET Framework 的实现细节。值类型（结构）有其用途，它们与原始类型的概念非常吻合，它们与值类型共享相同的语义。但是，它们在支持的 OOP 概念方面受到严格限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:29:55.910

假设我们有一个类 Foo 和一个结构 Bar

```
class Foo
{
  public string Name;
}

struct Bar
{
  public string Name;
}

Foo f = new Foo();
Foo g = f;
f.Name = "Larry";
//Since g and f point to the same object both have a name of "Larry"
//changes to one, change all instances that point (refer) to the same object (memory location)
Bar b = new Bar();
Bar c = b;
b.Name = "Paul";
//Since Bar is a value type, when we set the name of b, c is not altered because 
//b and c do not refer to the same object, they are independent variables
//each allocated their own memory
//and can vary separately after the initial assignment. 
```

# python - 拆分fasta文件并根据第一行重命名

> ID：11818495
> 
> 赞同：1
> 
> 时间：2012-08-05T17:23:20.283
> 
> 标签：python, linux, split, fasta

我有一个包含以下内容的大文件：

文件名：input.txt

```
>chr1
jdlfnhl
dh,ndh
dnh.

dhjl

>chr2
dhfl
dhl
dh;l

>chr3

shgl
sgl

>chr2_random
dgld 
```

我需要以这样的方式拆分此文件，以便获得四个单独的文件，如下所示：

文件 1：chr1.fa

```
>chr1
jdlfnhl
dh,ndh
dnh.

dhjl 
```

文件 2：chr2.fa

```
>chr2
dhfl
dhl
dh;l 
```

文件 3：chr3.fa

```
>chr3

shgl
sgl 
```

文件 4：chr2_random.fa

```
>chr2_random
dgld 
```

我在 linux 中尝试了 csplit，但无法通过“>”之后的文本重命名它们。

```
csplit -z input.txt '/>/' '{*}' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T17:38:53.343

由于您表示您使用的是 Linux 机器，因此“awk”似乎是完成这项工作的正确工具。

**用法：**
`./foo.awk your_input_file`

**foo.awk：**

```
#!/usr/bin/awk -f

/^>chr/ {
    OUT=substr($0,2) ".fa"
}

OUT {
    print >OUT
} 
```

您也可以在一行中做到这一点：

```
awk '/^>chr/ {OUT=substr($0,2) ".fa"}; OUT {print >OUT}' your_input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T18:27:25.693

如果你发现自己想用 FASTA/FASTQ 文件做任何更复杂的事情，你应该考虑 Biopython。

这是一篇关于修改和重写 FASTQ 文件的帖子：http: [//news.open-bio.org/news/2009/09/biopython-fast-fastq/](http://news.open-bio.org/news/2009/09/biopython-fast-fastq/)

另一个关于拆分 FASTA 文件的信息：http: [//lists.open-bio.org/pipermail/biopython/2012-July/008102.html](http://lists.open-bio.org/pipermail/biopython/2012-July/008102.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T17:38:22.893

稍微凌乱的脚本，但应该在一个大文件上工作，因为它一次只能读取一行

要运行，你可以`python thescript.py input.txt`（或者它会从标准输入读取，比如`cat input.txt | python thescript.py`）

```
import sys
import fileinput

in_file = False

for line in fileinput.input():
    if line.startswith(">"):
        # Close current file
        if in_file:
            f.close()

        # Make new filename
        fname = line.rstrip().partition(">")[2]
        fname = "%s.fa" % fname

        # Open new file
        f = open(fname, "w")
        in_file = True

        # Write current line
        f.write(line)

    elif in_file:
        # Write line to currently open file
        f.write(line)

    else:
        # Something went wrong, no ">chr1" found yet
        print >>sys.stderr, "Line %r encountered, but no preceeding > line found" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T02:18:28.220

您最好的选择是使用 exonerate[套件](http://www.animalgenome.org/bioinfo/resources/manuals/exonerate/)中的 fastaexplode 程序：

```
$ fastaexplode -h
fastaexplode from exonerate version 2.2.0
Using glib version 2.30.2
Built on Jan 12 2012
Branch: unnamed branch

fastaexplode: Split a fasta file up into individual sequences
Guy St.C. Slater. guy@ebi.ac.uk. 2000-2003.

Synopsis:
--------
fastaexplode <path>

General Options:
---------------
-h --shorthelp [FALSE] <TRUE>
   --help [FALSE] 
-v --version [FALSE] 

Sequence Input Options:
----------------------
-f --fasta [mandatory]  <*** not set ***>
-d --directory [.] 

-- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T17:32:16.813

```
with open('data.txt') as f:
    lines=f.read()
    lines=lines.split('>')
    lines=['>'+x for x in lines[1:]]
    for x in lines:
        file_name=x.split('\n')[0][1:]  #use this variable to create the new file
        fil=open(file_name+'.fa','w')
        fil.write(x)
        fil.close() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-05T17:36:20.733

如果你特别想用 python 试试这个，你可以使用这个代码

```
f2 = open("/dev/null", "r")
f = open("input.txt", "r")
for line in f:
    if ">" in line:
        f2.close()
        f2 = open(line.split(">")[1]),"w")
    else:
        f2.write(line)

f.close() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-22T18:56:41.417

或者，可以使用 BioPython。在 virtualenv 中安装它很容易：

```
virtualenv biopython_env
source biopython_env/bin/activate
pip install numpy
pip install biopython 
```

一旦完成，拆分 fasta 文件就很容易了。假设您在`fasta_file`变量中有 fasta 文件的路径：

```
from Bio import SeqIO

parser = SeqIO.parse(fasta_file, "fasta")
for entry in parser:
   SeqIO.write(entry, "chr{}.fa".format(entry.id), "fasta") 
```

请注意，此版本的格式适用于 Python2.7，但可能不适用于旧版本。

至于性能，我用它在可忽略不计的时间内从 1000 Genomes 项目中分离出人类基因组参考，但我不知道它如何处理更大的文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-02T18:23:07.613

```
#!/usr/bin/perl-w
use strict;
use warnings;

my %hash =();
my $key = '';
open F, "input.txt", or die $!;
while(<F>){
    chomp;
    if($_ =~ /^(>.+)/){
        $key = $1;
    }else{
       push @{$hash{$key}}, $_ ;
    }   
}

foreach(keys %hash){
    my $key1 = $_;
    my $key2 ='';
    if($key1 =~ /^>(.+)/){
        $key2 = $1;
    }
    open MYOUTPUT, ">","$key2.fa", or die $!;
    print MYOUTPUT join("\n",$_,@{$hash{$_}}),"\n";
    close MYOUTPUT;
} 
```

# jquery - 使用 jQuery 循环重复动画

> ID：11818500
> 
> 赞同：0
> 
> 时间：2012-08-05T17:24:09.887
> 
> 标签：jquery, animation

我正在创建一个 div 来代表一天中从白天到晚上的过去时间；所有这些动画都已完成，但这样做的目的是创建一个不断执行的...

是否有无限执行功能的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:30:58.407

我个人最喜欢的是`while(true){//code}`但`for(;;){//code}`也是可能的。请注意，永远运行代码是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:41:03.100

您可以使用动画结束时触发的函数，然后再次调用动画。

```
$(function() {
  var animate = function() {
    $('#myAnimation').animate({
      left : '+=20'
    }, 1000, 'linear', function() {
      animate();
    });
  }
  animate();
}); 
```

# silverlight - 指定要在 ItemsControl 绑定中使用的对象的属性

> ID：11818501
> 
> 赞同：2
> 
> 时间：2012-08-05T17:24:16.770
> 
> 标签：silverlight, xaml, binding

在我的示例 WP7 应用程序中，我想使用相同的数据模板在所有 ItemsControl 控件中显示水果。

```
<DataTemplate x:Key="fruitDetails" >
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Name}" />
        <TextBlock Text="{Binding Color}" />
    </StackPanel >
</DataTemplate> 
```

对于水果列表，我可以这样绑定：

```
XAML: 
<ItemsControl Name="itemControls1" ItemTemplate="{StaticResource fruitDetails }" >

C#
ObservableCollection<Fruit> fruits = new ObservableCollection <Fruit>();
itemControls1.ItemSource = fruits; 
```

但我的一些清单有水果作为属性：

```
class CargoBox
{
    public int CargoBoxNumber { get; set; }
    public Fruit TypeOfFruit { get; set; }
}

ObservableCollection <CargoBox> boxes = new ObservableCollection <CargoBox>(); 
```

如果我想使用相同的 DataTemplate 显示水果，如何绑定此列表并指定属性“TypeOfFruit”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:48:08.140

您可以使用内容模板：

```
<StackPanel Orientation="Vertical">
    <TextBox Text="{Binding CargoBoxNumber}" />
    <ContentControl Content="{Binding TypeOfFruit}"  ContentTemplate="{StaticResource fruitDetails}" />
</StackPanel> 
```

# javascript - 强制有向图 - 定义节点的颜色，如果节点同时是源和目标

> ID：11818502
> 
> 赞同：0
> 
> 时间：2012-08-05T17:24:26.440
> 
> 标签：javascript, colors, styles, scale, d3.js

我创建了一个像[这样](http://mbostock.github.com/d3/ex/force.html)的力导向图，它适用于类似 miserables.js 的 JSON 文件。可视化显示了相互引用的出版物之间的网络。

以下代码定义了源节点和目标节点的颜色：

```
var color = d3.scale.category10();...

.style("fill", function(d) { return color(d.group); }) 
```

那么，如何定义节点的颜色，它同时是源和目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T22:25:21.120

颜色是根据节点的组来设置的，节点组是从 JSON[数据源](http://mbostock.github.com/d3/ex/miserables.json)加载的。因此，我认为您需要预处理数据以添加其他组。

例如，假设存在三种节点类型：source=1、target=2、both=3。D3 JSON 数据源指定节点和节点之间的链接。

例如：

```
{
    "nodes":[
        {"name":"source","type":"source","group":1},
        {"name":"target","type":"target","group":2},
        {"name":"source & target","type":"both","group":3}
    ],
    "links":[
        {"source":0,"target":1,"value":1},
        {"source":0,"target":2,"value":2},
        {"source":2,"target":1,"value":3}
    ]
} 
```

一个运行的例子，是[here](http://examples.aws.af.cm/static/ex/d3-force/index.html)。如果将鼠标悬停在节点上，您将看到显示每个节点类型的工具提示。

# iphone - 在 dispatch_async 中更新 UIProgressView

> ID：11818507
> 
> 赞同：1
> 
> 时间：2012-08-05T17:25:15.177
> 
> 标签：iphone, ios, uiprogressview, dispatch-async

我让我的应用程序使用 dispatch_async 进行 google API 调用并获取我正在解析的 JSON 结果。我想实现一个进度视图，以便它根据我解析的 JSON 响应的结果数量进行更新。

所以我的 dispatch_async Google API 调用是：

```
dispatch_async(myQueue, ^{

    NSData* data1 = [NSData dataWithContentsOfURL:googleURL];
    [self performSelectorOnMainThread:@selector(fetchResultsForGoogle:) withObject:data1 waitUntilDone:YES];
}); 
```

我的`fetchResultsForGoogle: withObject:`方法解析结果，我想在屏幕上显示处理结果的数量的进度视图。所以在`fetchResultsForGoogle...`方法中，我想要：

```
float percentage = (float)counter/(float)totalItems;
        self.progressView.progress = percentage;
        NSString *percentText = [NSString stringWithFormat:@"%f %% %@", percentage, @" complete"];
        self.progressViewLabel.text = percentText; 
```

但我认为理解当 dispatch_async 在另一个线程上执行时，如果不使用`dispatch_async(dispatch_get_main_queue()`. 为了解决这个问题，我尝试了两种实现方法（如下所示），但这些方法中的任何一种都不适合我（`progressView`并且`progressViewLabel`根本不更新）。

计划A：

```
dispatch_async(myQueue, ^{

        NSData* data1 = [NSData dataWithContentsOfURL:googleURL];
        [self performSelectorOnMainThread:@selector(fetchResultsForGoogle:) withObject:data1 waitUntilDone:YES];

dispatch_async(dispatch_get_main_queue(), ^{

            float percentage = (float)counter/(float)totalItems;
            self.progressView.progress = percentage;
            NSString *percentText = [NSString stringWithFormat:@"%f %% %@", percentage, @"complete"];
            NSLog(@"Percentage: %@", percentText);
            self.progressViewLabel.text = percentText;
        });

    }); 
```

B计划：

```
dispatch_async(myQueue, ^{

            NSData* data1 = [NSData dataWithContentsOfURL:googleURL];
            [self performSelectorOnMainThread:@selector(fetchResultsForGoogle:) withObject:data1 waitUntilDone:YES];

        }); 
```

在`fetchResultsForGoogle...`方法内：

```
dispatch_async(dispatch_get_main_queue(), ^{

                float percentage = (float)counter/(float)totalItems;
                self.progressView.progress = percentage;
                NSString *percentText = [NSString stringWithFormat:@"%f %% %@", percentage, @"complete"];
                NSLog(@"Percentage: %@", percentText);
                self.progressViewLabel.text = percentText;
            }); 
```

因此，非常感谢有关正确实施此方法的任何想法或提示！

***编辑解决它*** 我修复了它。在`dispatch_async`块中，我将它传递给`performSelectorOnMainThread`. 因此，当我尝试在 中更新进度视图时`performSelectorOnMainThread`，UI 将`dispatch_async`在完成之前更新。

因此，我将其更改为块`performSelectorInBackgroundThread`内部`dispatch_async`，现在以`performSelectorOnMainThread`应有的方式更新 UI。

我对这一切都很陌生，但我很高兴我仍在学习新事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:02:19.643

你是对的，你不能以你正在做的方式更新主线程中的东西。您必须像这样在主线程上执行选择器：

我不确定你的百分比在哪里变化，但在下面添加一行。它会在主线程上更新你的 label 和 progressView

```
 [self performSelectorOnMainThread:@selector(updateProgress:) withObject:[NSNumber numberWithFloat:percentage] waitUntilDone:NO];

-(void) updateProgress:(NSNumber *) num {
        float percentage = [num floatValue];
        self.progressView.progress = percentage;
        NSString *percentText = [NSString stringWithFormat:@"%f %% %@", percentage, @" complete"];
        self.progressViewLabel.text = percentText;
 } 
```

# tfs - TFS 高级文件历史查看器

> ID：11818510
> 
> 赞同：1
> 
> 时间：2012-08-05T17:25:59.590
> 
> 标签：tfs

我会发现一个有用的 TFS 工具可以回答这些问题：

一种。当这行代码第一次签入时？湾。哪些变更集已更新此方法/代码块？C。谁修改了这个方法？

我相信你明白了，我的问题是我的文件的平均历史很长，有时不容易发现哪些更改引入了回归。

有没有这样的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:53:02.953

可以使用`tf annotate`（或右键单击 VS 中的项目并选择`Annotate`）检索您请求的许多信息：变更集和用户每个代码更改。对于最近的更改非常实用，但如果您需要从“回溯”追踪某个更改，仍然很困难。您可以使用历史浏览器中的注释。

# javascript - 将对象的方法绑定到元素的事件

> ID：11818512
> 
> 赞同：-1
> 
> 时间：2012-08-05T17:26:20.277
> 
> 标签：javascript, jquery, javascript-events

我想将对象的方法绑定到元素的事件。例如：

```
function ABC()
{
   this.events_list = function() {
   }

   this.events_list.clickElement = function() {
      alert("hello world");
   }

   this.bindEvents() = function() {
       $("#element").click(this.events_list.clickElement);
   }
}

var _abc = ABC();
_abc.bindEvents(); 
```

上面的代码没有将点击事件绑定到`clickElement`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:30:35.473

```
this.bindEvents() = function() { 
```

取出第一组括号，它们没有意义。

```
this.bindEvents = function() { 
```

你还需要用来`new ABC()`构造一个新的`ABC`对象；`ABC()`单独将绑定`this`到全局对象，这绝对不是您想要的。

另外， if`this.events_list`实际上不应该是一个函数，而是其他函数的容器，不要让它成为一个函数。

```
this.events_list = {}; 
```

最后，请记住使用分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:32:21.683

在你`#element`调用之前确实存在`_abc.bindEvents()`。你可以把它全部包起来

```
$(document).ready(function() {
    var _abc = ABC();
    _abc.bindEvents();
});

function ABC()
{
   this.events_list = function() {
   }

   this.events_list.clickElement = function() {
      alert("hello world");
   }

   this.bindEvents() = function() {
       $("#element").click(this.events_list.clickElement);
   }
} 
```

需要查看更多用例才能做更多事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:50:37.883

jQuery 插件会让你头疼，而且它们很容易创作：

```
<input type="checkbox" name="chk1" class="clickable" />check me<br />
<div name="item 2" class="clickable">click me<div> 
```

使上述每个项目都可点击：

```
(function( $ ) {
  $.fn.bindevents = function() {

   events_list = {
    clickElement : function() {
            alert("hello world from " + $(this).attr('name'));
    }
   };

   this.each(function() {
    $(this).bind('click', events_list.clickElement);
   });

 };
})( jQuery );

$('.clickable').bindevents(); 
```

# jsf - 授权过滤器中的 NullPointerException

> ID：11818522
> 
> 赞同：0
> 
> 时间：2012-08-05T17:29:01.193
> 
> 标签：jsf, servlet-filters

我已经[在 J​​SF](https://stackoverflow.com/questions/1470591/basic-security-in-jsf)问题中使用这个基本安全性实现了授权过滤器，如下所示，它为应用程序的每个页面（每个页面）调用，以检查是否允许用户访问该页面。过滤器的 Grunt 代码如下

```
 public void doFilter(ServletRequest request, ServletResponse response,
                FilterChain chain) throws IOException, ServletException
 {

  HttpServletRequest httpRequest = (HttpServletRequest)request;
  HttpServletResponse httpResponse = (HttpServletResponse)response;
  HttpSession session = httpRequest.getSession();

  String requestPath = httpRequest.getPathInfo();
  String sevPath = httpRequest.getServletPath();

    if (sevPath.equals("/pages/login.jsf"))
    chain.doFilter(request, response);

     if (!sevPath.equals("/pages/login.jsf"))
     {
 if (((HttpServletRequest) request).getSession().getAttribute(
        AuthenticationBean.AUTH_USER) == null) 
  {
    ((HttpServletResponse) response).sendRedirect("/pages/login.jsf");
}
    else
{
    //..........................get user
        AuthenticationBean user = null;
        try
         {

        error: user = (AuthenticationBean) FacesContext.getCurrentInstance().
            getExternalContext().getSessionMap().get("authenticationBean");
         }
         catch (Exception ex)
         {
          ex.printStackTrace();
         }
         finally
         {

         }
    //...................................
        if (!user.getCurrentUser().getUserRole().equals("ADMIN"))
    {
        httpResponse.sendError(HttpServletResponse.SC_NOT_FOUND,"Restricted Access");
    }
        else
        {
            chain.doFilter(request, response);
        }

}
}

} 
```

我在上面的代码中以错误为前缀的行得到 NullPointerException。我不能直接在过滤器中引用吗？或者还有什么可能是导致此错误的原因。提前致谢。

# c# - ASP.NET TextBox - 文本属性

> ID：11818526
> 
> 赞同：0
> 
> 时间：2012-08-05T17:29:30.493
> 
> 标签：c#, asp.net, textbox

在我的 ASP.NET 表单中，我有一个文本框，使用 javascript 代码每 10 秒更改一次该值。文本框的初始值为 10，每 10 秒事件增加 5。当我单击提交按钮并尝试访问 myTextBox.Text 属性时，我得到的值为 10，而不是文本框中的当前值。这里有什么问题，为什么我看不到我的文本框中写的当前值<'

我的客户端代码：

```
var d = 0;
    var interval = 0;
    function initializeMe() {
        d = document.getElementById("<%= time.ClientID %>").innerHTML;
        interval = self.setInterval("clock()", 10000);
    }
    function clock() {
        if (d > 0) {
            document.getElementById("<%= time.ClientID %>").innerHTML = d;
            document.getElementById("<%= txtTime.ClientID %>").value = d.toString();
            d = d - 1;
        }
        else {

            d = "Message";
            document.getElementById("<%= vrijeme.ClientID %>").innerHTML = d;
            document.getElementById("<%= txtVrijeme.ClientID %>").value = "0";
        }
    }

<form id="form1" runat="server">

    <div>

        <asp:Label ID="time" runat="server"></asp:Label>
        <asp:TextBox ID="txtTime" runat="server"></asp:TextBox>
        <asp:Button ID="submit" runat="server" Text="Sumbmit" 
            onclick="sumbit_Click"/>

    </div>
</form> 
```

我的服务器代码

```
int value = 700 - Convert.ToInt16(txtTime.Text);//But here server reads wrong value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:50:28.680

尝试这个：

```
 int value = Convert.toInt32(Request.Form["txtTime"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:59:26.557

我猜你的页面比你在这里发布的要多得多。我已经使用您发布的内容制作了一个快速示例，并且效果很好。我在下面包含了完整的示例-我建议您将其与您的进行比较以找出不同之处：

```
<%@ Page Language="C#" AutoEventWireup="true" %>

<script runat="server">

    protected void sumbit_Click(object sender, EventArgs e)
    {
        int value = 700 - Convert.ToInt16(txtTime.Text);
        lblResult.Text = value.ToString();
    }

</script>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Label ID="time" runat="server" Text="100"></asp:Label>
        <asp:TextBox ID="txtTime" runat="server"></asp:TextBox>
        <asp:Button ID="submit" runat="server" Text="Sumbmit"
            OnClick="sumbit_Click" />

        <hr />
        Result: <asp:Label runat="server" ID="lblResult" />
    </div>

    </form>

    <script type="text/javascript">
        var d = 0;
        var interval = 0;

        function initializeMe() {
            d = document.getElementById("<%= time.ClientID %>").innerHTML;
            interval = self.setInterval(function () { clock(); }, 1000);
        }
        function clock() {
            if (d > 0) {
                document.getElementById("<%= time.ClientID %>").innerHTML = d;
                document.getElementById("<%= txtTime.ClientID %>").value = d.toString();
                d = d - 1;
            }
        }

        initializeMe();

    </script>
</body>
</html> 
```

# c# - 为特定控制器操作选择自定义输出缓存提供程序

> ID：11818528
> 
> 赞同：8
> 
> 时间：2012-08-05T17:30:24.820
> 
> 标签：c#, asp.net, caching, asp.net-mvc-4

我正在尝试实现一个 MongoDB / Memory 组合的输出缓存提供程序以与 MVC4 一起使用。这是我的初始实现：

```
public class CustomOutputCacheProvider : OutputCacheProvider
{
    public override object Get(string key)
    {
        FileLogger.Log(key);
        return null;
    }

    public override object Add(string key, object entry, DateTime utcExpiry)
    {
        return entry;
    }

    public override void Set(string key, object entry, DateTime utcExpiry)
    {
    }

    public override void Remove(string key)
    {
    }
} 
```

我的网络配置条目：

```
<caching>
  <outputCache defaultProvider="CustomOutputCacheProvider">
    <providers>
      <add name="CustomOutputCacheProvider" type="MyApp.Base.Mvc.CustomOutputCacheProvider" />
    </providers>
  </outputCache>
</caching> 
```

以及 HomeController 中的用法：

```
[OutputCache(Duration = 15)]
public ActionResult Index()
{
    return Content("Home Page");
} 
```

我的问题是，当我检查日志文件中请求的密钥时，我不仅看到了对家庭控制器的请求，还看到了所有其他路径：

```
a2/  <-- should only log this entry
a2/test
a2/images/test/50115c53/1f37e409/4c7ab27d/50115c531f37e4094c7ab27d.jpg
a2/scripts/jquery-1.7.2.min.js 
```

我认为我不应该将 CustomOutputCacheProvider 设置为 Web.Config 中的 defaultProvider，我不知道如何指定要用于特定控制器操作的缓存提供程序。

使用 Asp.Net 网页，您可以通过`<%@ OutputCache Duration="60" VaryByParam="None" providerName="DiskCache" %>`在页面顶部使用来完成它，但对于 MVC，我能找到的唯一解决方案是覆盖Global.asax 中的[HttpApplication.GetOutputCacheProviderName 方法](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.getoutputcacheprovidername.aspx)。

有没有更优雅的方法通过使用 [OutputCache] 属性来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T15:08:34.187

> 有没有更优雅的方法来使用 [OutputCache] 属性设置 OutputCacheProvider？

我认为答案是否定的（当然不是当前的 mvc4 版本），因为实现自定义和使用属性`OutputCacheProvider`装饰动作之间没有关系。`OutputCache`

正如您通过实现自定义提供程序并*登录*Get 方法所发现的那样，您会看到对 Web 服务器发出的每个请求。如果您`OutputCache`要从所有操作中删除该属性，您仍然会在输出日志文件中看到每个请求。我认为这个[ASP.NET MVC 的每个操作都会命中输出缓存](https://stackoverflow.com/a/10175565/81053)的答案对于确认这一点非常有用。

由于看起来您只想实现一个输出缓存提供程序，那么我认为您唯一的选择是*不*设置默认提供程序并继续覆盖`GetOutputCacheProviderName`实现（正如您已经提到的）。也许像这样排除所有*内容*、*图像*和*脚本*

```
public override string GetOutputCacheProviderName(HttpContext context)
{
    string absolutePath = context.Request.Url.AbsolutePath;

    if (absolutePath.StartsWith("/Content/", StringComparison.CurrentCultureIgnoreCase)
        || absolutePath.StartsWith("/Scripts/", StringComparison.CurrentCultureIgnoreCase)
        || absolutePath.StartsWith("/Images/", StringComparison.CurrentCultureIgnoreCase))
        return base.GetOutputCacheProviderName(context);

    return "CustomOutputCacheProvider";
} 
```

如果您需要实现多个输出缓存提供程序，那么我想您必须实现一个帮助程序来为您提供正确的提供程序名称。但这是一个我为您解析路由数据的示例；如上一个示例直接查看 url。

```
public override string GetOutputCacheProviderName(HttpContext context)
{       
    RouteCollection rc = new RouteCollection();
    MvcApplication.RegisterRoutes(rc);
    RouteData rd = rc.GetRouteData(new HttpContextWrapper(HttpContext.Current));

    if (rd == null)
        return base.GetOutputCacheProviderName(context);

    var controller = rd.Values["controller"].ToString();
    var action = rd.Values["action"].ToString();

    if (controller.Equals("Content", StringComparison.CurrentCultureIgnoreCase) 
        || controller.Equals("Scripts", StringComparison.CurrentCultureIgnoreCase) 
        || controller.Equals("Images", StringComparison.CurrentCultureIgnoreCase))
        return base.GetOutputCacheProviderName(context);

    if (controller.Equals("Account", StringComparison.CurrentCultureIgnoreCase))
        return "AccountOutputCacheProvider";
    if (controller.Equals("Something", StringComparison.CurrentCultureIgnoreCase))
        return controller + "OutputCacheProvider";

    return "CustomOutputCacheProvider";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:15:34.057

如果我在哪里，我会尝试编写从 OutputCachAttribute 继承的 MyOutputCachAttribute，它将通过其参数选择提供者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:18:43.657

查看 MSDN 杂志的这篇文章（源代码和引用 MongoDB 和 Azure 作为分布式缓存提供程序的示例）可能会提供一些见解[http://msdn.microsoft.com/en-us/magazine/gg650661.aspx](http://msdn.microsoft.com/en-us/magazine/gg650661.aspx)

**编辑**

您可以按照此处的建议使用 CacheProfile 设置来指定提供程序吗？

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=665](http://www.dotnetcurry.com/ShowArticle.aspx?ID=665)

# mysql - clojure korma 的 MySQL 数据库驱动程序

> ID：11818531
> 
> 赞同：1
> 
> 时间：2012-08-05T17:30:39.990
> 
> 标签：mysql, clojure, korma

在 clojure 的 korma 数据库库的文档中，它说：

;;您还需要数据库的 JDBC 驱动程序。如果您搜索“my-db jdbc driver maven”，这些很容易找到。这是 postgres 的示例：[postgresql "9.0-801.jdbc4"]

也许我只是不知道如何阅读有关 Maven 的页面（我没有 Java 经验），但是 mysql 的 JDBC 驱动程序是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:34:45.490

mysql驱动程序的maven“坐标”是：

```
 <groupId>mysql</groupId>
 <artifactId>mysql-connector-java</artifactId>
 <version>5.1.6</version> 
```

翻译成 lein 的有：

```
[mysql/mysql-connector-java "5.1.6"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:38:29.070

正如您所推测的，Korma/Closure 使用 Java JDBC，而 JDBC 需要为每个底层数据库使用不同的 JDBC 驱动程序。

MySQL 的 JDBC 驱动程序可以在这里下载：

*   [http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

# ruby-on-rails - 在 Rails 视图中检查零字符串

> ID：11818535
> 
> 赞同：4
> 
> 时间：2012-08-05T17:30:53.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在为 Nil 检查我的 Rails 视图寻找一个很好的捷径。我已经看到关于这个的其他问题，但似乎没有一个像我想要的那样简化这个。我想要的是一个简短的语法，`""`如果特定值为 nil，则返回一个空字符串，否则返回该值。

[这里](http://hobocentral.net/blog/2007/08/25/quiz/)有一个建议，我倾向于尝试。它基本上允许这样的声明：

```
user.photo._?.url 
```

- 或者 -

```
user.photo.url._? 
```

这是个好主意还是充满危险？

我的另一个选择是在我的模型上处理 nils，但这似乎太全球化了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T17:47:16.280

您应该检查`try`在对象上运行提供的方法的方法，如果有问题的对象不为零，则返回该值。否则它只会返回零。

例子

```
# We have a user model with name field
u = User.first

# case 1 : u is not nil
u.try(:name)
=> Foo Bar

# case 2 : u is nil
u.try(:name)
=> nil

# in your case
user.photo.try(:url) 
```

有关详细信息，请查看[此博客文章](http://everydayrails.com/2011/04/28/rails-try-method.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T17:58:02.000

完成此操作的惯用 Ruby 方法是`||`运算符，如果左侧表达式是`nil`(或`false`)，它将返回右侧表达式的值：

```
puts(user.photo.url || '') 
```

任何经验丰富的 Ruby 程序员都会准确地理解它的作用。如果您编写自定义`_?`方法，我现在必须查找该方法的用途并记住它的作用，并希望它总是做正确的事情。我通常发现坚持惯用代码比在这里和那里节省一些击键更有益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T18:12:06.890

试试这个：

```
user && user.photo && user.photo.url.present? 
```

如果 user 为 nil 或 user.photo 为 nil，这不会爆炸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T17:40:24.027

只使用 nil 怎么样？

```
someObject.nil? # true if someOBj is nil 
```

还是我误解了你想要什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T17:45:59.837

我怀疑您的选项有问题，因为如果 photo 为零，则您的两个语句都应返回“未定义方法”。

你甚至不需要检查'.nil?'。由于您暗示您的检查是在视图中，而不是在控制器中，我想您正在检查一个 @instance 变量，如果未定义，它将始终为零。所以就这样做：

```
if @someObject
  ...
else
  ... 
```

如果您将条件放在控制器中，那么再次，只需使用 @instance 变量，如果未定义，您将始终至少有 nil。

# ruby-on-rails-3 - 向未使用 Rails 操作邮件程序登录的其他用户发送电子邮件

> ID：11818539
> 
> 赞同：0
> 
> 时间：2012-08-05T17:31:27.687
> 
> 标签：ruby-on-rails-3, devise, actionmailer

我正在尝试向另一个我未登录的用户发送一封电子邮件，该用户在另一个名为“user2”的设计模型上，他们使用该站点的方式与“用户”不同。当我创建一条新消息时，我可以通过以下方式向 current_user 发送电子邮件：

```
UserMailer.new_message_sent_user(current_user).deliver 
```

然后在 UserMailer 中：

```
def new_message_sent_user(user)
 @user = user
 mail to: @user.email, subject: "New message sent to user2!"
end 
```

但是，我还需要向“user2”发送一封电子邮件，但很难通过他们的 ID 找到他们并将他们的电子邮件传递给操作邮件。我知道我在 user2_id 中有一个值，因为它在创建消息时成功保存。在新动作中，我发现：

```
@user2 = User2.find(:first,:conditions=>["id = ?", @post.user2_id]) 
```

然后在创建中我有

```
UserMailer.new_message_sent_user2(@user2).deliver 
```

然后在 UserMailer 我有：

```
#send to advisor when he has sent a new message to an advisor
def new_message_sent_user2(user2)
     @user2 = user2
     mail to: @user2.email, subject: "You have received a message from user"
end 
```

但是我收到一个错误，我认为它有一个 nil 电子邮件，那么我怎样才能找到并设置 user2 对象来发送电子邮件？：

```
undefined method `email' for nil:NilClass 
```

任何帮助将不胜感激！

使用 create 操作更新：

```
# POST /messages
# POST /messages.json
def create

   @message = current_user.messages.build(params[:message])

   respond_to do |format|
   if @message.save

   UserMailer.new_message_sent_user(current_user).deliver
   UserMailer.new_message_sent_user2(@user2)

   format.html { redirect_to users_path, notice: 'Your message has been sent!' }
    format.json { render json: @message, status: :created, location: @message }

   else
    format.html { render action: "new" }
    format.json { render json: @message.errors, status: :unprocessable_entity }
   end
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:38:28.903

要根据创建操作回答您的问题，您不会为该操作创建 @user2 实例。实例变量不携带来自 new => create 操作或 edit => update。所以你需要添加的是

```
@user2 = User2.find(params[:user2_id]) #assuming you have the user2_id as part of the submitted form. 
```

我不知道您将 :user2_id 与用户相关的确切存储位置，但如果它是一个 has_many/belongs 关联，则在将 @user 设置为设置 user2 之后可能会更容易

```
@user2 = @user.user2 #this will return an array of associated user_2's 
```

最后的动作可能如下所示：

```
def create

   @message = current_user.messages.build(params[:message])
   @user2 = User2.find(params[:user2_id]) #or whatever selector

   respond_to do |format|
   if @message.save

   UserMailer.new_message_sent_user(current_user).deliver
   ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:59:06.473

检查@user2，它似乎为零。

# html - 你用什么工具来整理你的html和css代码？

> ID：11818540
> 
> 赞同：0
> 
> 时间：2012-08-05T17:31:27.473
> 
> 标签：html, css

我正在寻找一种工具来优化/整理我的 CSS 和 HTML（正确对齐代码行、删除空格等）。我在 google 上看到了很多工具，但希望得到有经验的人的反馈。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:36:59.343

如果您使用 Adob​​e Dreamweaver，则有一个叫做

应用源格式

它完成了工作

# android - 在 Eclipse 中更改 EmPubLite 项目的阶段

> ID：11818544
> 
> 赞同：1
> 
> 时间：2012-08-05T17:31:52.243
> 
> 标签：android, commonsware

使用 3.8 版的书，我的 Eclipse EmPubLite 项目处于“片段”级别 (T9)。获得 4.0 书后，我想退回到 T5-Progress，但我不知道该怎么做，也看不到书中关于如何使用 Eclipse 来回切换到各个阶段的任何说明。

我尝试在 Eclipse 之外替换 /src 和 /res 内容，但是在将项目加载回 Eclipse 后，我收到错误消息，提示无法读取 java 源文件。

有没有一种简单而适当的方法来实现这一点？谢谢，加里布莱克利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:40:05.653

> 我想退回到 T5-Progress 但我不知道该怎么做

“回归”的唯一方法是在 Eclipse 中删除当前项目，然后在您希望开始的位置从[GitHub 存储库中导入该项目。](https://github.com/commonsguy/cw-omnibus)您可以通过 Eclipse 主菜单中的 File > Import 来导入项目。您将`EmPubLite/T4-Progress`在存储库中找到 - 您可以克隆存储库或单击存储库主页上的 ZIP 按钮以将内容下载为 ZIP 文件。

# url - 对 Joomla URL 的精细控制

> ID：11818545
> 
> 赞同：1
> 
> 时间：2012-08-05T17:31:56.470
> 
> 标签：url, joomla, joomla-extensions

我想将我现有的网站转换为 Joomla。但是，我需要对 URL 进行更好的控制，而我似乎无法使用 Joomla 进行控制。假设 Joomla 安装在我用户的基本 public_html 目录中，我希望这些页面保留它们的 URL：

*   [http://dotancohen.com/howto/rtl_right_to_left.html](http://dotancohen.com/howto/rtl_right_to_left.html)
*   [http://dotancohen.com/eng/genealogy.php](http://dotancohen.com/eng/genealogy.php)
*   [http://dotancohen.com/heb/contact_info.html](http://dotancohen.com/heb/contact_info.html)

我知道我可以通过 .htaccess 使用 301 重定向，但是我更愿意实际配置页面的规范 URL。这在 Joomla 或扩展中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:58:59.897

毫无疑问，事实上的标准扩展是在[http://extensions.joomla.org/extensions/site-management/sef/10134](http://extensions.joomla.org/extensions/site-management/sef/10134)。它是高度可配置的，得到很好的支持，并且评价很高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:54:31.310

在 Joomla！2.5 您可以使用内置`Redirect`组件来捕获旧 URL 并将它们发送到正确的内容，而无需摆弄`.htaccess`.

您还可以创建与旧路径匹配的菜单和菜单项，然后您只需将 .html 文件的内容放入合适的文章中即可。请记住，您可以创建菜单（以及内容路径），但不能在站点的任何位置显示菜单。

这`genealogy.php`似乎是一个单独的应用程序，因此您可以通过做两件事来解决这个问题，首先`/eng/`在您的新网站上有一个目录，其中包含`genealogy.php`应用程序，这样它将具有相同的 URL。然后，如果您想在 Joomla! 中创建菜单项！菜单，然后您可以使用“外部链接”类型的菜单项链接到它 - 您可以通过单击工具栏中的帮助按钮来阅读[有关菜单类型的更多信息。](http://help.joomla.org/proxy/index.php?option=com_help&keyref=Help16%3aMenus_Menu_Item_Manager_Edit)

**[编辑]** 对于外部页面，如果您想在模板中包装外部应用程序，请使用菜单项类型，`Iframe Wrapper`这会将它们放置在模板的主要组件区域中。用一个好的 Joomla！2.5 模板您可以为该页面使用特定的模板样式（即布局设置）。

# android - 我的应用程序的付费版本未显示在 Google Play 上的所有手机上

> ID：11818554
> 
> 赞同：0
> 
> 时间：2012-08-05T17:32:37.143
> 
> 标签：android

目前，我在 Google Play 商店中有四个版本的 GPS 跟踪应用程序。使用桌面网络浏览器搜索“GPeaSe”时，您可以在 Google Play 商店中查看这四个应用程序。

我有一个免费的 Lite 版本，其他三个版本是付费应用程序。不幸的是，在某些手机上（我还没有发现模式），付费应用程序不会出现在他们的 Google Play 商店中。奇怪的是，我的手机和我女朋友的三星 Galaxy S2 都无法使用。（它们都有自定义 ROM）。

现在，精简版需要手机才能工作（它需要蜂窝数据连接）。专业版没有，因为它还可以用作“查看器”应用程序。现在，我已经在 Lite 和 Pro 版本上运行了 aapt badger 命令来查看差异。基本上它们在所有版本号、支持的屏幕尺寸等方面都是 100% 相同的。唯一的区别是一些权限。

专业版（不会出现在每个人的 Play 商店中）：

```
uses-permission:'android.permission.ACCESS_FINE_LOCATION'
uses-permission:'android.permission.ACCESS_COARSE_LOCATION'
uses-permission:'android.permission.READ_PHONE_STATE'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-permission:'android.permission.RECEIVE_BOOT_COMPLETED'
uses-feature:'android.hardware.location'
uses-feature:'android.hardware.location.gps'
uses-feature:'android.hardware.location.network'
uses-feature:'android.hardware.touchscreen' 
```

精简版（显示在所有手机的 Play 商店中）：

```
uses-permission:'android.permission.ACCESS_FINE_LOCATION'
uses-permission:'android.permission.ACCESS_COARSE_LOCATION'
uses-permission:'android.permission.READ_PHONE_STATE'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-feature:'android.hardware.telephony'
uses-feature:'android.hardware.location'
uses-feature:'android.hardware.location.gps'
uses-feature:'android.hardware.location.network'
uses-feature:'android.hardware.touchscreen' 
```

如您所见，Pro 版本还具有 RECEIVE_BOOT_COMPLETED 权限，因为它能够在设备启动时启动。

那么是什么导致了我的问题？一个应用程序是免费的，另一个是付费的事实？权限的区别？

非常感谢您的帮助。

# node.js - nodejs对全局变量的使用

> ID：11818555
> 
> 赞同：2
> 
> 时间：2012-08-05T17:32:50.153
> 
> 标签：node.js, parameters, lambda

我是 NodeJS 的新手，但是一个非常有经验的程序员。我正在做一个副项目来让我的脚沾上节点。我正在寻找 MongoDB 进行存储。开始我只是想测试在 node.js 中创建一些基本的 CRUD 函数。我在下面包含了我的代码。

我的问题是关于全局变量“更新”。它在“读取”和“更新”函数中用于控制接下来调用哪个函数。我想按以下顺序调用它们：创建、读取、更新、读取、删除。

据我了解，我无法将函数参数传递给“read”以指示接下来要调用哪个函数，因为这是异步调用的，而我定义为 mongojs.read 回调的 lambda 函数将没有父函数参数利用。

这样做的正确方法是什么？使用全局感觉就像是 hack。:)

```
// app.js
//<user>:<password>@<server>/<database>
var connection = "foo:bar@127.0.0.1/blah";
var collections = ["scores"]
var db = require("mongojs").connect(connection, collections);
//console.log(db);

var updated = false;

function my_create()
{
    console.log("my_create");
    db.leaderboard.save({name: "sunder", score: 42}, function(err, result) {
          if(err || !result ) 
          {
              console.log("Score save failed");
              console.log(err);
          }
          else
          {
              console.log("Score save successful");
              my_read();
          }
    });
}

function my_read()
{
    console.log("my_read");
    // app.js
    db.leaderboard.find({name: "sunder"}, function(err, results) {
        if(err || !results)
        {
            console.log("Score read failed");
            console.log(err);
        }
        else 
        {
            results.forEach(function(score) 
            {
                console.log(score);
            });

            // I am sure using globals is a HACK. Need to figure this out. 
            if(updated)
                my_delete();
            else
                my_update();
        }
    });

}

function my_update()
{
    console.log("my_update");
    db.leaderboard.update({name: "sunder"}, {$set: {score: 1337}}, function(err,     result) {
        if(err || !result) 
        {
            console.log("Score update failed");
        }
        else 
        {
            console.log("Score update successful");

            updated = true;
            my_read();
        }
    });
}

function my_delete()
{
    console.log("my_delete");
    db.leaderboard.remove({name: "sunder"}, function(err, result) {
        if(err || !result) 
        {
            console.log("Score delete failed");
        }
        else 
        {
            console.log("Score delete successful");
            process.exit();
        }
    });
}

// kick off the flow of processes
my_create(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:43:46.100

如何将要执行的下一个操作传递给`my_read()`函数，如下所示：

```
// app.js
var connection = "foo:bar@127.0.0.1/blah";
var collections = ["scores"]
var db = require("mongojs").connect(connection, collections);

function my_create()
{
    console.log("my_create");
    db.leaderboard.save({name: "sunder", score: 42}, function(err, result) {
          if(err || !result ) 
          {
              console.log("Score save failed");
              console.log(err);
          }
          else
          {
              console.log("Score save successful");
              my_read("update");
          }
    });
}

function my_read(next_action)
{
    console.log("my_read");
    // app.js
    db.leaderboard.find({name: "sunder"}, function(err, results) {
        if(err || !results)
        {
            console.log("Score read failed");
            console.log(err);
        }
        else 
        {
            results.forEach(function(score) 
            {
                console.log(score);
            });

            // I am sure using globals is a HACK. Need to figure this out. 
            if(next_action === "delete")
                my_delete();
            else
                my_update();
        }
    });

}

function my_update()
{
    console.log("my_update");
    db.leaderboard.update({name: "sunder"}, {$set: {score: 1337}}, function(err,     result) {
        if(err || !result) 
        {
            console.log("Score update failed");
        }
        else 
        {
            console.log("Score update successful");

            updated = true;
            my_read("delete");
        }
    });
}

function my_delete()
{
    console.log("my_delete");
    db.leaderboard.remove({name: "sunder"}, function(err, result) {
        if(err || !result) 
        {
            console.log("Score delete failed");
        }
        else 
        {
            console.log("Score delete successful");
            process.exit();
        }
    });
}

// kick off the flow of processes
my_create(); 
```

# elasticsearch - ElasticSearch 结果的变化

> ID：11818560
> 
> 赞同：0
> 
> 时间：2012-08-05T17:33:44.583
> 
> 标签：elasticsearch

我不确定这是否可能，但我试图在 ElasticSearch 结果中引入变化。类似于谷歌如何限制域名结果，例如它通常会显示来自任何特定域的最多 1 或 2 个结果。

例如，如果我们正在搜索博客评论，则只显示任何特定博客文章的 2 条评论。

我不认为这可以用方面来完成，因为我们限制在一个具有数千个可能值的字段上。但我可能错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:37:14.487

我会说你在谈论分组。关于它有一个未[解决](https://github.com/elasticsearch/elasticsearch/issues/256)的问题。你也可以看看[这个](https://stackoverflow.com/questions/8304418/simulating-field-collapsing-grouping-by-field-in-elastic-search)其他问题，看看你是否可以在你的情况下解决它。

有一个[fork](https://github.com/martijnvg/elasticsearch-with-local-grouping)提供本地分组，但它只在本地工作。这将迫使您只使用一个分片，这对弹性搜索没有多大意义。

鉴于对弹性搜索和分组功能本身的兴趣，以及现在有一家[公司](http://www.elasticsearch.com/)支持该项目的事实，我想这个问题很快就会结束。至少这是我希望的！

# javascript - jQuery UI 选项卡式小部件向多个选项卡添加滚动条

> ID：11818562
> 
> 赞同：0
> 
> 时间：2012-08-05T17:33:54.813
> 
> 标签：javascript, jquery

嗨，我正在使用 jquery UI 选项卡式小部件，我正在尝试为选项卡创建一个水平滚动条。我创建了代码以在选项卡总宽度大于容器时在单击时添加新选项卡。问题是选项卡移动到第二行女巫不是我想要的。我希望它们都留在同一行，稍后我将添加 2 个按钮从左到右滚动。这是我创建的代码：

[jsfiddle](http://jsfiddle.net/edNyk/2/)

正如您从我发布的内容中看到的那样，即使我在容器溢出：滚动中添加了选项卡，标签也会移动到第二行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:42:41.613

无法应用溢出，因为未设置高度。如果您限制高度，那么它将其他选项卡归类为溢出。

只需简单地添加一些样式，就像这样......

```
<style type='text/css'>
    #tabs_container{
        max-height:70px;
        overflow:scroll;
    }
</style> 
```

希望这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:22:00.560

为了让您入门，请查看此[小提琴](http://jsfiddle.net/edNyk/10/)。

这是附加的JS：

```
(function() {
    var $tabsCont = $('#tabs_container'),
        $tabs = $tabsCont.children(),
        widthOffset = 10; // The width calculated below is a bit too large...

    $tabsCont.wrap('<div class="tab_cont_wrapper"></div>');
    $tabsCont.width($tabs.length * $tabs.first().width() - widthOffset);
    $tabsCont.height($tabs.first().height());
})();​ 
```

我会留给你找到更好的标签宽度计算。

CSS：

```
#tabs_container {overflow:hidden !important;}
.tab_cont_wrapper {overflow:auto;} 
```

​</p>

# java - 以 100 毫秒的间隔在 java 中显示图像

> ID：11818568
> 
> 赞同：0
> 
> 时间：2012-08-05T17:34:53.537
> 
> 标签：java, image, timing

我想显示一些间隔时间为 100 毫秒的图像，但是当我在屏幕上显示它们时，其中一些是可见的，而另一些则不可见（随机顺序）。这是我的代码的一部分：

```
panel = new ShowImage(Integer.toString(ImageRand+1),kind); // show random images 
//panel.setIgnoreRepaint(false);
frame.getContentPane().add(panel);
frame.validate();
while(panel.isShowing()!=true );
panel.setVisible(true);
start=System.currentTimeMillis();
while(System.currentTimeMillis()-start < 100); 
```

即使我使用了 nanoTime() 函数，但它不能正常工作

**编辑：**

在我添加这两行之前：

而（面板。isShowing（）！=真）；

```
panel.setVisible(true); 
```

我的代码如下所示：

panel = new ShowImage(Integer.toString(ImageRand+1),kind);

```
frame.getContentPane().add(panel);

frame.validate();

start=System.currentTimeMillis();

while(System.currentTimeMillis()-start < 100); 
```

这意味着只是在屏幕上显示一个图像，然后等待 100 毫秒，然后再次运行此代码（我在主程序的开头只加载每个图像一次），我的问题是：图像之间的间隔不相等，然后我 addwhile (panel.isShowing()!=true ); 确保我的面板在屏幕上（虽然我可以在等待 100 毫秒之前发现面板在屏幕上），但我有同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:00:33.470

你的紧密循环没有做任何事情——看看`;`每个之后。

* * *

无论如何，这其中的逻辑是什么？我假设你的意思是：

```
while (!panel.isShowing()) {
  panel.setVisible(true);
} 
```

根据[Component.isShowing()](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#isShowing%28%29)的文档，

> 确定此组件是否显示在屏幕上。**这意味着组件必须是可见的**，并且它必须位于可见和显示的容器中。

* * *

除此之外，您应该考虑使用[Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。您可以使用`ActionListener`将在*事件调度线程*上运行的一个，从而实现 UI 组件的安全突变。

# php - 使用 OOP 在 PDO 中出错

> ID：11818572
> 
> 赞同：0
> 
> 时间：2012-08-05T17:35:18.547
> 
> 标签：php, mysql, oop, pdo

我绝对是 PDO 和面向对象编程的初学者。

```
class mysql {
    public $db;

    public function connect() {
        $this->db = new PDO(
            "mysql:host=localhost;dbname=mydbname;",
            "root",
            ""
        );
    }
}

class information extends mysql {
    public $customer_count;
    public $statement;
    public $query;

    public function customer_queue($asid = false){
        try{
            if($asid == false){
                $this->query = "SELECT COUNT(*) FROM `customers` WHERE `ready` = '0' ORDER BY `id` ASC";
            }else{
                $this->query = "SELECT COUNT(*) FROM `customers` WHERE `ready` = '0' AND `id` < ':asid' ORDER BY `id` ASC";
            }
            $this->statement = $this->db->prepare($this->query);
            $this->statement->execute(array(
                "asid" =>           $asid
            ));
            $this->customer_count = $this->statement->fetchColumn();
            return $this->customer_count;
        }catch(PDOException $e){
            return "?";
        }
    }
} 
```

这是我桌子的转储：

```
如果不存在 `asiakkaat` 则创建表 (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `firstname` tinytext NOT NULL,
  `lastname` tinytext NOT NULL,
  `密码` tinyblob 不为空，
  `address` tinytext NOT NULL,
  `postalcode` tinytext NOT NULL,
  `city` tinytext NOT NULL,
  `companyid` tinytext NOT NULL,
  `company` tinytext NOT NULL,
  `domain` tinytext NOT NULL,
  `tickets` int(11) NOT NULL DEFAULT '0',
  `project_started` 时间戳 NOT NULL DEFAULT '0000-00-00 00:00:00',
  `ready` tinyint(1) NOT NULL DEFAULT '0',
  `timestamp` 时间戳 NOT NULL DEFAULT CURRENT_TIMESTAMP,
  主键（`id`）
) 引擎=InnoDB 默认字符集=utf8 AUTO_INCREMENT=6 ;

INSERT INTO `customers` (`id`, `firstname`, `lastname`, `password`, `address`, `postalcode`, `city`, `companyid`, `company`, `domain`, `tickets`, `project_started`, `ready`, `timestamp`) 值
（1，'Linus'，'Torvalds'，NULL，'示例地址'，'12345'，'示例'，'1234-1234-12'，'Linux'，'linux.com'，0，'2012-07 -23 20:41:57', 1, '2012-06-28 20:41:57'),
（2，'比尔'，'盖茨'，0x30，'芝麻街'，'12345'，'示例'，'1234-1234-12'，'微软公司'，'microsoft.com'，0，' 2012-07-30 07:47:36', 1, '2012-06-29 07:47:36'),
(3, 'David', 'Axmark', 0x30, 'MySQL''s street 5', '12345', 'MySQL', '1234-1234-12', 'MySQL', 'mysql.com', 0, '2012-08-01 07:54:00', 0, '2012-06-29 07:54:00'),
(4, 'Michael', 'Widenius', 0x30, 'MySQL''s street 6', '12345', 'MySQL', '1234-1234-12', 'MySQL', 'mysql.com', 0, '0000-00-00 00:00:00', 0, '2012-06-29 07:59:48'),
(5, 'Larry', 'Page', 0x30, 'Something way', '12345', 'Nothing', '1234-1234-12', 'Google Inc.', 'google.com', 0, '0000 -00-00 00:00:00', 0, '2012-06-29 07:59:48');

```

我已将 PHP 设置为`display_errors`on，看起来**错误在第 25 行**。但我不明白怎么了？

我用来激活我的脚本的代码是：

```
$mysql = new mysql();
$mysql->connect();
$information = new information();
print $information->queue(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:59:45.290

根据评论：

您的功能的激活码错误。

```
$mysql = new mysql();
$mysql->connect();
$information = new information();
print $information->queue(); 
```

您误解了OOP中的**继承概念。**

因为`information extends mysql`，所有公共/受保护的方法和字段都继承到`information`. 意思是，您应该执行以下操作：

```
$information = new information;
$information->connect();
print $information->queue(); 
```

这将设置`$information`'`$db`字段（而不是不同的对象），每个对象都是它自己的实体。

# php - 致命错误：在非对象 (MySQL/Sessions) 上调用成员函数 prepare()

> ID：11818573
> 
> 赞同：0
> 
> 时间：2012-08-05T17:35:26.623
> 
> 标签：php

我知道这是一个常见的问题，但我已经经历了很多其他的答案，并且无法理解为什么这仍然失败。所以，我很抱歉，但希望有人能指出哪里出了问题！

在**index.php**中，执行以下代码：

```
// Set Database Configuration
$dbconfig = array( 
    'host' => getenv('MYSQL_DB_HOST'),
    'user' => getenv('MYSQL_USERNAME'), 
    'pass' => getenv('MYSQL_PASSWORD'), 
    'name' => getenv('MYSQL_DB_NAME') 
); 

// Start database sessions
$db = oadb::getInstance();
$db->show_errors();
echo $db->prepare("hello");

// Open a new session
$sess = new oasession();
session_start(); 
```

**getInstance()** ; 并且**$db->prepare()**发生没有问题，并且回显“hello”文本以确认这一点。

当调用**新的 oasession()**时，车轮开始脱落。oasessions **()**函数是一个会话处理程序，它接管 PHP 的正常会话处理，并将其放入 MySQL 数据库中。

session.inc.php**包含**一个类如下（我删除了一些不相关的函数）：

```
class oasession {

   var $life_time;

   function oasession() {

      // Read the maxlifetime setting from PHP
      $this->life_time = get_cfg_var("session.gc_maxlifetime");

      // Register this object as the session handler
      session_set_save_handler( 
        array( &$this, "open" ), 
        array( &$this, "close" ),
        array( &$this, "read" ),
        array( &$this, "write"),
        array( &$this, "destroy"),
        array( &$this, "gc" )
      );

   }

   function open( $save_path, $session_name ) {
        global $sess_save_path;
        $sess_save_path = $save_path;
        // Don't need to do anything. Just return TRUE.
        return true;
   }

   function read( $id ) {
       global $db;

           // Set empty result
           $data = '';

           // Fetch session data from the selected database

           $time = time();

           $newid = $db->prepare($id);
           $sql = "SELECT `session_data` FROM `OA-Auth_sessions` WHERE `session_id` = '$newid' AND `expires` > $time";

           $rs = $db->query($sql);                           
           $a = $db->num_rows($rs);

           if($a > 0) {
             $row = $db->fetch_array($rs);
             $data = $row['session_data'];
           }
           return $data;
        }

    function write( $id, $data ) {
        global $db;

         // Build query                
         $time = time() + $this->life_time;

         $newid = $db->prepare($id);
         $newdata = $db->prepare($data);

         $sql = "REPLACE `OA-Auth_sessions` (`session_id`,`session_data`,`expires`) VALUES('$newid', '$newdata', $time)";

         $rs = $db->query($sql);

         return TRUE;

      }
} 
```

它能够毫无问题地使用 read($id) 函数，但是当它尝试使用 write($id, $data) 函数时，它会失败并出现以下错误...

```
Fatal error: Call to a member function prepare() on a non-object in sessions.class.php on line 66 
```

...建议从 $db->prepare() 执行的准备函数不是有效对象。

我已经尝试通过在新的 oasession() 之前和之后放置 print_r() 来测试这一点，并且两者都打印了对象描述，并且在新的之前或之后运行其他 $db->prepare() 调用没有问题oasession() 调用。

关于可能导致此问题的任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:53:40.273

根据php.net，设法解决了这个问题：

> 当使用对象作为会话保存处理程序时，向 PHP 注册关闭函数非常重要，以避免 PHP 在关闭时内部销毁对象的方式产生意外的副作用，并可能阻止调用 write 和 close。通常，您应该使用 register_shutdown_function() 函数注册“session_write_close”。

将以下内容添加到 sessions.class.php oasession() 函数...

```
register_shutdown_function('session_write_close'); 
```

...解决了所有问题:)

# jquery - 根据浏览器宽度杀死或执行javascript

> ID：11818584
> 
> 赞同：0
> 
> 时间：2012-08-05T17:37:32.283
> 
> 标签：jquery, responsive-design, jquery-events, flexslider, browser-detection

简而言之，我只想在浏览器窗口低于特定大小时运行脚本（在本例中为 Flexslider）。

IE

*宽度小于*480 像素（在启动时或调整大小时） - 运行 Flexslider

*超过*480 像素宽（在启动时或调整大小时） - 终止 Flexslider 并将列表项显示为“静态”块/页面元素

目前，我有以下代码（在一定程度上）通过使用 addClass 和 removeClass，基于浏览器宽度。但是，它需要刷新浏览器才能在相关的地方终止或执行脚本。您可能已经猜到了，我不是 JS 专家，但是我很想听听您的想法。

**HTML：**

```
 <div id="foo">
      <ul class="slides">
        <li><img src="images/image1.jpg" width="320" height="320" alt=""></li>
        <li><img src="images/image2.jpg" width="320" height="320" alt=""></li>
        <li><img src="images/image3.jpg" width="320" height="320" alt=""></li>
      </ul>
    </div> 
```

**JS：**

```
        $(文档).ready(函数() {
            var pageWidth = $(window).width();
            如果（页面宽度 <= 480）{
                $("#foo").addClass('flexslider');
                   $('.flexslider').flexslider({
                       动画：“幻灯片”，
                       方向导航：真
                    });
            }
        $(窗口).resize(函数() {
            if ($(window).width() > 480) {
                $("#foo").removeClass('flexslider');
            }
            });
        });

```

* * *

**JS - 修订版 1**

```
 $(window).resize(function(){
        var windowWidth  = $(window).width();
        if (windowWidth  <= 480) {
            $("#foo").addClass('flexslider');
               $('.flexslider').flexslider({
                   animation: "slide",
                   directionNav: true
                });
        }
    $(window).resize(function() {
        if ($(window).width() > 480) {
            $("#foo").removeClass('flexslider');
        }
        });
    }); 
```

* * *

**JS - 修订版 2**

```
$(window).resize(function() {
        if ($(window).width() >= 480) {
            $("#foo").removeClass('flexslider');
        }
        if ($(window).width() < 480) {
            $("#foo").addClass('flexslider');
            $('#foo').flexslider({animation: "slide"});
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:27:33.197

拿

```
 $(window).resize(function() {
        if ($(window).width() >= 480) {
            $("#foo").removeClass('flexslider');
        }
        if ($(window).width() < 480) {
            $("#foo").addClass('flexslider');
        }
    }); 
```

功能失效`$(document).ready`。

发生的事情是 document.ready 仅在页面加载时触发。如果您希望在调整页面大小后触发 window.ready 函数，则必须将其从 document.ready 函数中取出

此外，您需要在这两个函数中执行相同的操作。或者有一个单独的函数来处理添加和删除 flexslider 并拥有`window.resize`和`document.ready`调用该函数。第二种方法可能更好。

希望有帮助。

# php - 即使 PHP 页面回显某些内容，对 PHP 页面的 Ajax 调用也始终不返回任何内容

> ID：11818586
> 
> 赞同：0
> 
> 时间：2012-08-05T17:37:44.110
> 
> 标签：php, javascript, ajax

我用一些同样简单的 AJAX 调用了一个非常简单的 PHP 页面，但调用总是什么都不返回，即使 PHP 很好。也就是说，你可以去 PHP 页面的 URL，看到它回显了“Hello World”，但是当它用 JS 调用时，它什么也不返回。

**以下是带有 Javascript 的 HTML 页面：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Title of the document</title>
</head>

<body>
The content of the document......<br />

Enter your email: <input id="email" type="text" />
<input type="button" onclick="setXMLHttpRequest()" value="Go!" />

<script type='text/javascript'/>

        var http;

        function setXMLHttpRequest()
        {
            if(window.XMLHttpRequest)
                http = new XMLHttpRequest();
            else if(window.ActiveXObject)
                http = new ActiveXObject("Microsoft.XMLHTTP");

                url = "http://www.convolutedconstruct.com /Ajax/checkemail.php?email=" + 
                                   document.getElementById('email').value;
                http.onreadystatechange = display;
                http.open("GET", url, true);
                http.send(null);

        }

        function display()
        {
            if (http.readyState == 4)
            {   
                infostr = http.responseText;
                alert("From the PHP: " + infostr);
            }
        }
</script></body></html> 
```

这是 PHP 页面的内容 [点击这里查看实时 PHP 页面](http://convolutedconstruct.com/Ajax/checkemail.php)

```
<?php
$email = $_GET['email'];
echo "Hello World!";
?> 
```

即使 PHP 页面正确地回显了文本，为什么这不会向 JS 返回任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:06:52.917

正如上面所建议的，AJAX 请求通常只有在调用者和被调用者都在同一个域上时才会起作用，您必须确保包含 javascript 的 html 代码位于同一域[http://www.convolutedconstruct.com](http://www.convolutedconstruct.com) .

如果不是这种情况，您可以使用 CORS 通过在您的 php 输出中发送此标头来允许您的 ajax 从您的 php 页面接收输入

```
<?php
header("Access-Control-Allow-Origin: *");
//rest of your code
?> 
```

见：[http ://enable-cors.org/](http://enable-cors.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:14:14.827

我不喜欢使用 XMLHTTP 请求。相反，我使用jQuery的方法`$.ajax({});`方法。它总是对我有用！

```
$.ajax({
    type: "POST", // or 'GET'
    url: "your-url.php", // url that you are passing the data to
    data: {
        dataName: 'data to pass' // string, variable, object, array, etc
    },
    success: function(output) { // output is what the url is 'echoing' back to the jQuery
        // do something when the ajax method is complete.
    }
}); 
```

**不要忘记导入 jQuery 源代码**- [http://code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js)

这些是 ajax 中最常用的组件。

如果您愿意，我很乐意为您提供更多帮助。

如果您想了解更多信息，请查看相关文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - var self = 此模式的替代方案

> ID：11818590
> 
> 赞同：2
> 
> 时间：2012-08-05T17:38:12.733
> 
> 标签：javascript

我正在寻找 var self = 这个替代计划。

```
var Animal = function(name){
  this.name = name;
  this.arr = [1,2,3,4];
  this.inc = function(num){
      return num + 1;
  };

  this.fireArr = function(){
    var self = this;
    this.arr.forEach(function(item){
      console.log(self.inc(item));
    });

  };

};

var dog = new Animal("dog");
console.log(dog.fireArr()); 
```

我的小提琴在这里。

[http://jsfiddle.net/haradashinya/TtYpc/](http://jsfiddle.net/haradashinya/TtYpc/)

你有什么主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T17:41:39.210

您可以将第二个参数设置为`forEach`，即`this`值。

```
this.arr.forEach(function(item){
  console.log(this.inc(item));
}, this); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T17:40:32.340

您可以使用[`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来确保使用正确的`this`值调用函数：

```
function fireArr() {
    this.arr.forEach(function(item){
        console.log(this.inc(item));
    }.bind(this));
} 
```

但是恕我直言，`self`( `that`, `_this`) 变量更容易理解，因为它直接声明不使用正常值`this`，尽管人们会期望它（例如在事件处理程序中，或 jQuery 的`each()`）。特别是在长函数上，你看不到`bind()`最后，这很重要。此外，一些古老的浏览器不支持`bind()`，您需要对其进行填充。

因此，对于任何就地*函数表达式*，我建议使用解引用变量。

但是，当您在某处定义了一个方法时，它可能会很有用，通常`this`用于指向当前对象，因为它在该上下文中很常见，然后该方法应该在其他地方使用。为了简单明了，您可以而且应该使用而不是`var self`-wrapper `bind`。您的示例提供了一个很好的演示（假设该`inc`方法使用了`this`关键字）：

```
this.arr.forEach( this.inc.bind(this) ); 
```

（虽然[`forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)允许我们传递一个自定义`this`参数 - 例如事件附件不）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T17:49:51.833

在您的示例中，该`inc`函数不使用该`this`值，因此它不需要是一个方法。您可以将其定义为本地函数：

```
var Animal = function ( name ) {
    this.name = name;
    this.arr = [ 1, 2, 3, 4 ];

    var inc = function ( num ) {
        return num + 1;
    };

    this.fireArr = function () {
        this.arr.forEach(function ( item ) {
            console.log( inc( item ) );
        });
    };
}; 
```

# c++ - C++ 分段错误核心转储

> ID：11818594
> 
> 赞同：-3
> 
> 时间：2012-08-05T17:38:55.273
> 
> 标签：c++

不知道为什么我得到这个分段错误..

正常使用是可以的，就像我搜索国家详细信息时一样。但是当我使用列表时，不确定它是否超载或什么，它只是给出了一个分段错误

```
Please enter country > Malaysia

Malaysia's Capital          : Kuala Lumpur
Malaysia's Currency         : Malaysian Ringgit
Malaysia's Currency Code    : MYR
Malaysia's Region           : Southeast Asia
Malaysia's Population       : 22229040.00

Please enter country > russia

Russia's Capital        : Moscow
Russia's Currency       : Russian Ruble
Russia's Currency Code  : RUB
Russia's Region         : Asia
Russia's Population     : 145470197.00

Please enter country > singapore

Singapore's Capital         : Singapore
Singapore's Currency        : Singapore Dollar
Singapore's Currency Code   : SGD
Singapore's Region          : Southeast Asia
Singapore's Population      : 4300419.00

Please enter country > list

Country : Andorra
Country : United Arab Emirates
Country : Afghanistan
Country : Antigua and Barbuda
Country : Anguilla
Country : Albania
Country : Armenia
Country : Netherlands Antilles
Country : Angola
Country : Antarctica
Country : Argentina
Country : American Samoa
Country : Austria
Country : Australia
Country : Aruba
Country : Azerbaijan
Country : Bosnia and Herzegovina
Country : Barbados
Country : Bangladesh
Country : Belgium
Country : Burkina Faso
Country : Bulgaria
Country : Bahrain
Country : Burundi
Country : Benin
Country : Bermuda
Country : Brunei Darussalam
Country : Bolivia
Country : Brazil
Country : The Bahamas
Country : Bhutan
Country : Bouvet Island
Country : Botswana
Country : Belarus
Country : Belize
Country : Canada
Country : Cocos (Keeling) Islands
Country : Congo
Country : Central African Republic
Country : Congo
Country : Switzerland
Country : Cote d'Ivoire
Country : Cook Islands
Country : Chile
Country : Cameroon
Country : China
Country : Colombia
Country : Costa Rica
Country : Cuba
Country : Cape Verde
Country : Christmas Island
Country : Cyprus
Country : Czech Republic
Country : Germany
Country : Djibouti
Country : Denmark
Country : Dominica
Country : Dominican Republic
Country : Algeria
Country : Ecuador
Country : Estonia
Country : Egypt
Country : Western Sahara
Country : Eritrea
Country : Spain
Country : Ethiopia
Country : Finland
Country : Fiji
Country : Falkland Islands (Islas Malvinas)
Country : Micronesia
Country : Faroe Islands
Country : France
Country : France
Country : Gabon
Country : Grenada
Country : Georgia
Country : French Guiana
Country : Guernsey
Country : Ghana
Country : Gibraltar
Country : Greenland
Country : The Gambia
Country : Guinea
Country : Guadeloupe
Country : Equatorial Guinea
Country : Greece
Country : South Georgia and the South Sandwich Islands
Country : Guatemala
Country : Guam
Country : Guinea-Bissau
Country : Guyana
Country : Hong Kong (SAR)
Country : Heard Island and McDonald Islands
Country : Honduras
Country : Croatia
Country : Haiti
Country : Hungary
Country : Indonesia
Country : Ireland
Country : Israel
Country : Man
Country : India
Country : British Indian Ocean Territory
Country : Iraq
Country : Iran
Country : Iceland
Country : Italy
Country : Jersey
Country : Jamaica
Country : Jordan
Country : Japan
Country : Kenya
Country : Kyrgyzstan
Country : Cambodia
Country : Kiribati
Country : Comoros
Country : Saint Kitts and Nevis
Country : Korea
Country : Korea
Country : Kuwait
Country : Cayman Islands
Country : Kazakhstan
Country : Laos
Country : Lebanon
Country : Saint Lucia
Country : Liechtenstein
Country : Sri Lanka
Country : Liberia
Country : Lesotho
Country : Lithuania
Country : Luxembourg
Country : Latvia
Country : Libya
Country : Morocco
Country : Monaco
Country : Moldova
Country : Madagascar
Country : Marshall Islands
Country : Macedonia
Country : Mali
Country : Burma
Country : Mongolia
Country : Macao
Country : Northern Mariana Islands
Country : Martinique
Country : Mauritania
Country : Montserrat
Country : Malta
Country : Mauritius
Country : Maldives
Country : Malawi
Country : Mexico
Country : Malaysia
Country : Mozambique
Country : Namibia
Country : New Caledonia
Country : Niger
Country : Norfolk Island
Country : Nigeria
Country : Nicaragua
Country : Netherlands
Country : Norway
Country : Nepal
Country : Nauru
Country : Niue
Country : New Zealand
Country : Oman
Country : Panama
Country : Peru
Country : French Polynesia
Country : Papua New Guinea
Country : Philippines
Country : Pakistan
Country : Poland
Country : Saint Pierre and Miquelon
Country : Pitcairn Islands
Country : Puerto Rico
Country : Palestinian Territory
Country : Portugal
Country : Palau
Country : Paraguay
Country : Qatar
Country : Romania
Country : Russia
Country : Rwanda
Country : Saudi Arabia
Country : Solomon Islands
Country : Seychelles
Country : Sudan
Country : Sweden
Country : Singapore
Country : Saint Helena
Country : Slovenia
Country : Svalbard
Country : Slovakia
Country : Sierra Leone
Country : San Marino
Country : Senegal
Country : Somalia
Country : Suriname
Country : El Salvador
Country : Syria
Country : Swaziland
Country : Turks and Caicos Islands
Country : Chad
Country : French Southern and Antarctic Lands
Country : Togo
Country : Thailand
Country : Tajikistan
Country : Tokelau
Country : Turkmenistan
Country : Tunisia
Country : Tonga
Country : East Timor
Country : Turkey
Country : Trinidad and Tobago
Country : Tuvalu
Country : Taiwan
Country : Tanzania
Country : Ukraine
Country : Uganda
Country : United Kingdom
Country : United States Minor Outlying Islands
Country : United States
Country : Uruguay
Country : Uzbekistan
Country : Holy See (Vatican City)
Country : Saint Vincent and the Grenadines
Country : Venezuela
Country : British Virgin Islands
Country : Virgin Islands
Country : Vietnam
Country : Vanuatu
Country : Wallis and Futuna
Country : Samoa
Country : Yemen
Country : Mayotte
Country : Yugoslavia
Country : South Africa
Country : Zambia
Country : Zimbabwe

Segmentation fault (core dumped)
root@ubuntu:/home/baoky/05AUG-2012-COMPLETED/shell_assn2# 
```

下面是我的 Client.cpp 代码

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>            /* for sockaddr_un struct*/
#define DEFAULT_PROTOCOL    0

/* POSIX renames "Unix domain" as "local IPC."
    Not all systems define AF_LOCAL and PF_LOCAL (yet). */
#ifndef AF_LOCAL
#define AF_LOCAL    AF_UNIX
#endif
#ifndef PF_LOCAL
#define PF_LOCAL    PF_UNIX
#endif

using namespace std;

int readLine (int fd, char* str)
 {
   int n;
   do /* Read characters until NULL or end-of-input */
     {

     }
   return (n > 0); /* Return false if end-of-input */
 }

void readServer(int fd) //Read Server output
{
    char str[20000];

    while (readLine (fd, str)) //Read lines till end of input
    {
        printf("\n%s\n",str);
        return;
    }
}

/****************************************************************/
 int main  ()
 {
   int clientFd, serverLen, result;
   struct sockaddr_un serverAddress;
   struct sockaddr* serverSockAddrPtr;
   serverSockAddrPtr = (struct sockaddr*) &serverAddress;
   serverLen = sizeof (serverAddress);
   string buffer;

   /* Create a socket, bidirectional, default protocol */
   clientFd = socket (AF_LOCAL, SOCK_STREAM, DEFAULT_PROTOCOL);
   serverAddress.sun_family = AF_LOCAL; /* Server domain */

   do /* Loop until a connection is made with the server */
     {
       result = connect (clientFd, serverSockAddrPtr, serverLen);
       if (result == -1) sleep (1); /* Wait and then try again */
     }
   while (result == -1);

//by here, connection would be established with server
printf("%s\n",'++++++++++++++++++++++++++++++++++++++++++++++++");
printf('\n");

string sendToServer;

while(1)
{
   //null the string sendToServer
   sendToServer = "";
   cin << "Please enter country > ";
   //get user input as sendToServer
   getline(cout, sendToServer);

if(sendToServer!="")
{
//if not blank

   //send to server
   write (clientFd, sendToServer.c_str(), strlen (sendToServer.c_str()) + 1);   

   if ( sendToServer == "END" || sendToServer == "end")
   {
   //break out of while loop
   break;
   }//end if

   readServer (clientFd); /* Read Server Response */
}//end if not blank
else
{
//print error message in bold red
}
}//end inner while

//if client type end, it will run to here.
close (cfentFd); /* Close the socket */
return 0;
 } 
```

调试发现：我意识到如果我将 country.txt 缩短到大约 20 条记录，则不会出现分段错误。我可以做些什么来使用字符串而不是 C 字符串？

我如何使用字符串而不是 char [200]

谢谢！或者我能做些什么来解决这个问题

解决：

将 char 更改为 20000 而不是 2000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:44:34.330

当您通过套接字发送字符串时......您*不一定*会得到空终止符*，除非*您明确地将其写入套接字。

我怀疑这就是正在发生的事情 - 你的字符串没有正确终止。

恕我直言...

强烈建议：

启动调试器，并单步执行“readLine()”中的内部循环。确保它不是*无限*循环；）

# android - Eclipse在学习android时无法导入jtwitter-yamba.jar

> ID：11818596
> 
> 赞同：3
> 
> 时间：2012-08-05T17:39:49.193
> 
> 标签：android

我正在使用 Eclipse Juno 和 ADT 20 v2 我的 Yamba 应用程序没有错误会立即强制关闭它启动我的 Logcat 在 Yamba 应用程序中显示我找不到从方法 com.marakana.yamba.StatusActivity 引用的类“winterwell.jTwitter.Twitter” .onCreate 我知道这里很多人使用 Yamba 来学习 Android 编程，而 Oriellys 网站没有解决方案是“Twitter("student","password") API root..”导致这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:36:51.620

我能够通过在 Eclipse 中执行以下操作来解决此错误：

Project -> Properties -> Java Build Path -> Order and Export 然后选择“[x]jtwitter-yamba.jar - /path/to/jar”

不过，在它起作用之前，我必须这样做： Project -> Clean... 然后 ctrl-F11 重建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:19:41.337

尝试使用最新版本的[普通 JTwitter](http://www.winterwell.com/software/jtwitter.php)。我认为它与 Yamba 兼容。您需要调用 Twitter.setAPIRootUrl() 将其指向 Yamba 而不是 Twitter。

# javascript - 这个正则表达式查找 URL 有什么问题？

> ID：11818602
> 
> 赞同：0
> 
> 时间：2012-08-05T17:40:39.803
> 
> 标签：javascript, regex

我正在使用 JavaScript 从 Google 搜索 URL 中提取 URL，如下所示：

```
http://www.google.com/search?client=safari&rls=en&q=thisisthepartiwanttofind.org&ie=UTF-8&oe=UTF-8 
```

现在，我的代码如下所示：

```
var checkForURL = /[\w\d](.org)/i;
var findTheURL = checkForURL.exec(theURL); 
```

我已经通过几个正则表达式测试器运行了这个，它似乎工作，但实际上我返回的字符串看起来像这样：

```
thisisthepartiwanttofind.org,.org 
```

那么这个尾随`,.org`是从哪里来的呢？

我知道我的模式不是超级健壮，但请不要建议使用更好的模式。我真的很想就我在这个问题上做错了什么提出建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:52:05.560

您实际上得到的是一个包含 2 个结果的数组，第一个是整个匹配，第二个是您使用 parens (.org) 定义的组。

与之比较：

```
/([\w\d]+)\.org/.exec('thisistheurl.org')
→ ["thisistheurl.org", "thisistheurl"]

/[\w\d]+\.org/.exec('thisistheurl.org')
→ [“thisistheurl.org”]

/([\w\d]+)(\.org)/.exec('thisistheurl.org')
→ ["thisistheurl.org", "thisistheurl", ".org"]

```

JS 正则表达式的 .exec 的结果是一个字符串数组，第一个是整个匹配项以及您使用括号定义的后续表示组。如果正则表达式中没有括号，则该数组中将只有一个元素 - 整个匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T17:44:25.967

您应该在正则表达式组中转义`.`(DOT)`(.org)`或它匹配任何字符。所以你的正则表达式会变成：

```
/[\w\d]+(\.org)/ 
```

* * *

要匹配示例中的 url，您可以使用[以下](http://regexr.com?31o67)内容：

```
https?://([0-9a-zA-Z_.?=&\-]+/?)+ 
```

或者像[这样](http://regexr.com?31o6a)更准确的东西（您应该根据需要选择正确的正则表达式）：

```
^https?://([0-9a-zA-Z_\-]+\.)+(com|org|net|WhatEverYouWant)(/[0-9a-zA-Z_\-?=&.]+)$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T17:44:31.250

如果您不处理，请删除正则表达式中的括号`.org`（不太可能，因为它是文字）。根据@Mark 评论，添加一个`+`以匹配 class 的一个或多个字符`[\w\d]`。另外，我会避开点：

```
var checkForURL = /[\w\d]+\.org/i; 
```

# compiler-construction - 64位软件，只是编译问题？

> ID：11818603
> 
> 赞同：1
> 
> 时间：2012-08-05T17:40:45.280
> 
> 标签：compiler-construction, compilation, migration, 64-bit

我正在搜索 Chrome 64 位版本，我发现不发布该版本的核心论点是：“现在，它不会真正为所暗示的努力带来太多好处”。（或类似的东西）。

我的简单问题是：这不是编译器完成的 64 位版本的大部分工作吗？在我看来，“64 位版本”只是相同的逻辑，使用 64 位 CPU 寄存器。

显然，在将某些软件的 32 位版本迁移到 64 位版本时，我遗漏了一些重要的点，我想知道中心点以进行调查。我怀疑主要问题是第三方插件/扩展或类似的，但我不太确定。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:04:45.067

```
'msvs_settings': {
  'VCCLCompilerTool': {
    'WarningLevel': '3',
    'WarnAsError': 'false', # TODO(maruel): Enable it.
    'Detect64BitPortabilityProblems': 'false',           <== here
  },
}, 
```

From the chromium/src/build/common.gpyi file that I downloaded a while ago. Just a hint that the codebase isn't 64-bit clean, not entirely a slamdunk since the option got deprecated in VS2008\. But yes, the codebase for Chromium is humongous and there's a *lot* of code that wasn't written by Google engineers. There are bound to be places where it loads a size_t or ptrdiff_t into an int or long. With the additional headache of Windows and Linux using different type mappings.

That kind of trouble isn't hard to find, just compile it with a 64-bit compiler and see what hits the fan. The comment is otherwise accurate, there isn't any real benefit to baking it in 64-bits as far as the stand-alone browser is concerned. Chrome.exe doesn't consume a lot of VM, having separate processes for the pages in each tab helps a lot. Embedding a browser is a different story, IE was frequently embedded because it is so simple to do so they were pretty forced to provide a 64-bit version of it. If you embed, say, CEF then you've got a fairly big problem right now.

# c++ - ... 未定义对 ... collect2 的引用：ld 返回 1 个退出状态

> ID：11818609
> 
> 赞同：3
> 
> 时间：2012-08-05T17:41:23.400
> 
> 标签：c++, linker, ld, undefined-reference

我有以下 3 个文件：

错误.h

```
#ifndef error_h
#define error_h
#include <string>
#include <iostream>
#include <cstdio>
void Error(std::string msg);
#endif 
```

错误.cpp

```
#ifdef error_h
#include "error.h"
void Error(std::string msg)
{
    std::cerr
     << "\n=========================================================\n"
     << msg
     << "\n=========================================================\n";
    exit(EXIT_FAILURE);
}
#endif 
```

foob​​ar.cpp

```
#include "error.h"
int main()
{
    for(int i=0; i<99; i++)
        if(i==55)
            Error("this works");
    return 0;
} 
```

现在我这样做：

```
$ g++ -c error.cpp foobar.cpp
$ g++ error.o foobar.o -o exampleprogram 
```

我得到：

```
foobar.o: In function `main':
foobar.cpp:(.text+0x4b): undefined reference to `Error(std::basic_string<char,
std::char_traits<char>, std::allocator<char> >)'
collect2: ld returned 1 exit status 
```

我究竟做错了什么？我需要了解什么来解决这个问题，以及将来不提出问题的类似问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T17:47:32.467

为什么你在*error.cpp*中有这些行？

```
#ifdef error_h
  ...
#endif 
```

由于未定义预处理器符号，因此预处理器将省略*error.cpp*`error_h`的全部内容。删除这些行，您的程序将成功链接。

 *您似乎对如何（也许为什么）`#include`使用警卫有误解。有关说明，请参阅[此](https://stackoverflow.com/a/8020211/241631)答案。

此外，没有必要在*error.h中包含**iostream*和*cstdio*，因为该文件没有使用这些头文件中声明的任何内容。这些文件应包含在*error.cpp*中。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:44:45.483

删除这个

```
#ifdef error_h 
```

和相应`#endif`的 from `error.cpp`。否则，在这里：

> $ g++ -c error.cpp foobar.cpp

`error.cpp`本质上是空的。这是因为在那个阶段`error_h`没有定义。所以你没有编译实现（如果你在 之前包含它会起作用，`error.h` *但*`#ifdef`无论如何都没有理由在`.cpp`文件中包含它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T17:45:35.743

`error_h`未在 error.cpp 中定义，因此您的所有文件内容都会被 #ifdef 删除。

本质上，您将 error.cpp 编译为一个空文件。***

# php - 远程设置输入框并发送

> ID：11818610
> 
> 赞同：-3
> 
> 时间：2012-08-05T17:41:34.930
> 
> 标签：php, python, html, bash, input

我有远程网站（不是我的）

```
<input type=text id="num" name="num" size="10" maxlength="10"/> 
<a id="setnum" href="#">Send</a>
<span id="result"></span> 
```

有没有办法设置输入框和发送表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:44:02.440

是的，将`GET`或`POST`（取决于表单的`method=`属性）发送到表单属性中指定的位置，`action=`包括`key=value`成对的数据，其中`key`是`name=`输入元素的属性，并且`value`是想要的值。

如果你想要一些谷歌关键字：

> 如何发送 POST 请求`<insert your favorite programming language here>`

# vim - Windows上的CommandT安装问题

> ID：11818614
> 
> 赞同：4
> 
> 时间：2012-08-05T17:41:53.200
> 
> 标签：vim

完成 CommandT 插件的所有安装步骤后，我`command-t.vim could not load the C extension`在启动它时收到错误消息。ComamndT 故障排除部分给出了以下建议：

```
If a problem occurs the first thing you should do is inspect the output of:

  ruby extconf.rb
  make

During the installation, and:

  vim --version

And compare the compilation and linker flags that were passed to the
extension and to Vim itself when they were built. If the Ruby-related
flags or architecture flags are different then it is likely that something
has changed in your Ruby environment and the extension may not work until
you eliminate the discrepancy. 
```

对我来说确实似乎存在差异。

输出`make`表明 cygwin 的 gcc 正在使用 ruby​​ 1.8：

```
gcc -I. -I/usr/lib/ruby/1.8/i386-cygwin -I/usr/lib/ruby/1.8/i386-cygwin -I. -DHA
VE_RUBY_H    -g -O2    -std=c99 -Wall -Wextra -Wno-unused-parameter -c ext.c
gcc -I. -I/usr/lib/ruby/1.8/i386-cygwin -I/usr/lib/ruby/1.8/i386-cygwin -I. -DHA
VE_RUBY_H    -g -O2    -std=c99 -Wall -Wextra -Wno-unused-parameter -c match.c
gcc -I. -I/usr/lib/ruby/1.8/i386-cygwin -I/usr/lib/ruby/1.8/i386-cygwin -I. -DHA
VE_RUBY_H    -g -O2    -std=c99 -Wall -Wextra -Wno-unused-parameter -c matcher.c

gcc -shared -s -o ext.so ext.o match.o matcher.o -L. -L/usr/lib -L.  -Wl,--enabl
e-auto-image-base,--enable-auto-import,--export-all   -lruby  -ldl -lcrypt 
```

vim 的`:version`输出包含以下输出：

```
-DDYNAMIC_RUBY_VER=191 -DDYNAMIC_RUBY_DLL=\"msvcrt-ruby191.dll\" 
```

故障排除指南建议使用 Vim 7.2、Ruby 1.8.7-p299 和 DevKit 3.4.5r3-20091110 的组合。然而，这对我来说不是一个好的解决方案，原因有很多：

1.  我正在使用 Vim 7.3 并希望继续这样做。
2.  Ruby 1.9.3 已安装在我的系统上，我在 PATH 中需要它用于其他项目。

那么有什么办法可以让它工作，同时保持最新版本的 ruby​​ 和最新版本的 vim？

# 更新

按照 AndrewMarshall 的建议，我根据[本教程](https://github.com/SolutionYogi/VimSetup/blob/master/software/README.txt)安装了 Ruby191 和 DevKit-4.5.0-20100819-1536-sfx.exe并运行`ruby extconf.rb`了该版本。`make`cmd 成功执行，输出如下：

```
gcc -I. -IC:/Ruby191/include/ruby-1.9.1/i386-mingw32 -I/C/Ruby191/include/ruby-1
.9.1/ruby/backward -I/C/Ruby191/include/ruby-1.9.1 -I. -DHAVE_RUBY_H    -O2 -g -
Wall -Wno-parentheses   -std=c99 -Wall -Wextra -Wno-unused-parameter -o ext.o -c
 ext.c
gcc -I. -IC:/Ruby191/include/ruby-1.9.1/i386-mingw32 -I/C/Ruby191/include/ruby-1
.9.1/ruby/backward -I/C/Ruby191/include/ruby-1.9.1 -I. -DHAVE_RUBY_H    -O2 -g -
Wall -Wno-parentheses   -std=c99 -Wall -Wextra -Wno-unused-parameter -o match.o
-c match.c
gcc -I. -IC:/Ruby191/include/ruby-1.9.1/i386-mingw32 -I/C/Ruby191/include/ruby-1
.9.1/ruby/backward -I/C/Ruby191/include/ruby-1.9.1 -I. -DHAVE_RUBY_H    -O2 -g -
Wall -Wno-parentheses   -std=c99 -Wall -Wextra -Wno-unused-parameter -o matcher.
o -c matcher.c
gcc -shared -s -o ext.so ext.o match.o matcher.o -L. -LC:/Ruby191/lib -L.  -Wl,-
-enable-auto-image-base,--enable-auto-import   -lmsvcrt-ruby191  -lshell32 -lws2
_32 
```

并且`:CommandT`在 vim 中运行现在可以工作了，但是一旦我开始输入以搜索文件，然后按 Enter 键选择并打开它，我就会得到以下信息： ![Vim 崩溃](../Images/0dd7fa668d01e39499a8cfba356ad438.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:35:36.927

不是一个真正的答案，但您可能想尝试[ctrlp](http://kien.github.com/ctrlp.vim/)。

*   写入`vimscript`（无依赖，无编译）
*   尽可能快`CommandT`（对我来说是主观的）
*   可能具有比`CommandT`（是否`CommandT`有*最新文件*？）更多的功能

还有我没试过的好旧的[FuzzyFinder 。](http://www.vim.org/scripts/script.php?script_id=1984)似乎它已经有大约 2 年没有更新了，但它可能仍在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T10:18:02.707

我成功地`command-t`在 Windows 10 上的 vim 8.0 上安装了最新版本。我在处理它时发现了这个问题，所以我要发布我的解决方案，虽然有点晚了。

vim 8.0 的 Ruby 版本是 Ruby 2.2。所以下载并安装`Ruby 2.2`and `Ruby Devkit`（记得执行`ruby dk.rb init`and `ruby dk.rb install`for `devkit`）。

然后我按照 command-t 指令执行`ruby extconf.conf`，但它失败了——`You have to install development tools first.`即使我安装了它，它也会输出：

我用谷歌搜索了这个问题，发现[RubyInstaller wiki](https://github.com/OneClick/RubyInstaller/wiki/Development-Kit)说我应该通过 add 执行这​​个命令`-rdevkit`，我做到了。它在我执行时成功，`ruby -rdevkit extconf.rb`但在`make`. 所以我再次谷歌搜索并找到另一种编译方法：

`rake make -rdevkit`

它奏效了。这是我的截图：

[![在此处输入图像描述](../Images/2ba8352db09b7c07d25ebeaad9db51db.png)](https://i.stack.imgur.com/SX6jq.png)

# spring - 如何在 Spring 中将基于 XML 的配置更改为注解配置？

> ID：11818623
> 
> 赞同：0
> 
> 时间：2012-08-05T17:43:05.417
> 
> 标签：spring, configuration, annotations

课程如下：

```
class ReportControllerBase {
    String reportName = "Report";

    public String getReportName() {
        return reportName;
    }

    public void setReportName(String reportName) {
        this.reportName = reportName;
    }

    // ...
}

class AnnualReportController extends ReportControllerBase {
    // ...
}

class SkinCareAnnualReprotController extends AnnualReportController {
    String productName;

    public String getProductName() {
        return productName;
    }

    public void setProductName(String productName) {
        this.productName = productName;
    }
} 
```

基于 XML 的配置如下：

```
<bean id="annualReportController" class="AnnualReportController">
    <property name="reportName" value="Annual Report"/>
</bean>

<bean id="annualSpecialReportController" class="AnnualReportController">
    <property name="reportName" value="Annual Special Report"/>
</bean>

<bean id="skinCareAnnualReprotController" class="SkinCareAnnualReprotController" parent="annualReportController">
    <property name="productName" value="A famous skin care product"/>
</bean> 
```

Bean ***AnnualReportController***和***AnnualSpecialReportController***是同一个 Class 的实例。并且***skinCareAnnualReprotController***继承自 bean ***AnnualReportController***。

如何在 Spring 中基于注解的配置中实现此配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:00:29.437

```
@Configuration
public class ReportConfiguration {
    @Bean public AnnualReportController annualReportController() {
        AnnualReportController annualReportController = new AnnualReportController();
        annualReportController.setReportName("Annual Report");
        return annualReportController;
    }

     @Bean public AnnualReportController annualSpecialReportController() {
        AnnualReportController annualSpecialReportController = new AnnualReportController();
        return withAnnualSpecialReportName(annualSpecialReportController);
    }

     @Bean public SkinCareAnnualReportController skinCareAnnualReportController() {
        SkinCareAnnualReportController skinCareAnnualReportController = new SkinCareAnnualReportController();
        skinCareAnnualReportController.setProductName("A famous skin care product");
        return withAnnualSpecialReportName(skinCareAnnualReportController);
    }

    // in this instance, a helper method is arguably overkill,
    // but I've included it for demonstration
    private <T extends AnnualReportController> T withAnnualSpecialReportName(T report) {
        report.setReportName("Annual Special Report");
        return report;
    }
} 
```

查看[Spring 3.1 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.0.html#new-java-configuration)以获取更多信息。

# php - 如何使用不是来自 html 表单的 PHP 将 POST jpeg 保存到服务器？

> ID：11818626
> 
> 赞同：0
> 
> 时间：2012-08-05T17:43:43.767
> 
> 标签：php, post, upload, jpeg

我必须将发送到我的服务器的 jpeg 保存为带有以下信息的 POST：“图像将使用 POST 方法上传到 URL。字段“data_image”将包含图像/jpeg 数据和“data_device_id " 字段将包含此设备的设备 ID。"

我提供了我服务器的 PHP 脚本的 URL。

我不认为我可以使用这个：来自[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)的 $_FILES因为它不是来自表单，因此我没有表单的“名称”。我到处搜索，但我不知道如何获取这些 jpeg 数据并使用 PHP 脚本将其保存到我服务器上的文件中。我知道如何使用表单中的 $_FILES ，但这让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:50:38.430

听起来好像您只需要将图像数据保存到文件中：

```
file_put_contents('yourFilename.jpg', $_POST['data_image']); 
```

但是，它可能`$_POST['data_image']`包含更多数据，可能是数组或其他某种数据格式（JSON、XML），您可以通过查看数据来了解：

```
var_dump($_POST); 
```

如果数据只能从外部来源发送，您还可以将此输出保存到文件或通过电子邮件发送给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:01:21.453

您可以使用数组访问发送到 PHP 脚本的[变量](http://php.net/manual/en/reserved.variables.post.php)`$_POST`：

```
echo "Device ID: " . $_POST['data_device_id']; 
```

# javascript - 为什么在 Mac 浏览器上按下 metaKey 时 Javascript 会丢弃 keyUp 事件？

> ID：11818637
> 
> 赞同：28
> 
> 时间：2012-08-05T17:45:18.283
> 
> 标签：javascript, macos, events

在 Mac 浏览器上，当元键关闭时，javascript 不会接收大多数键的 keyup 事件（其他修饰键似乎是一个例外）。使用这个 jsfiddle 来演示（关注结果区域并尝试类似 cmd + x，x 不会收到 keyup 事件）：http: [//jsfiddle.net/mUEaV/](http://jsfiddle.net/mUEaV/)

我已经在 Chrome、FF、Safari 和 Opera 的稳定版本中复制了这一点。Windows 7 中的控制键似乎不会发生同样的事情。

操作系统是否劫持了 keyup 事件？这似乎特别奇怪，因为使用元键的命令，如保存、查找、剪切、复制等，都在 keydown 而不是 keyup 上激活，并且可以被 javascript 劫持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-07-22T20:29:24.953

我今天了解到，使用时根本无法获取`onKeyUp`事件。`meta`非常不幸且难以解决。您必须以其他方式模仿它们。

**编辑：**澄清一下，这仅在 Mac 上并且由于事件的操作系统级别处理而发生。**它不能被覆盖。**很抱歉成为坏消息的承担者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T21:06:02.243

Is the browser window retaining the focus when you press those keys? In windows you can get similar result when pressing `windows+R` or `CTRL+ESC` and similar key combinations that make browser to loose focus and that results in missed events.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-06T10:46:33.130

尽管 event.metaKey 返回 false，但 event.keyCode 和 event.key 仍然被填充。

```
document.addEventListener('keyup', function(e) {
    console.log(e.metaKey || e.key);
});
```

```
Click here then press the Command, Control, or Option keys.
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-30T07:15:57.307

您可以通过在最后一个 keydown 事件之后等待一段时间来创建人工 keyup 事件。唯一需要注意的是，人们在他们的操作系统上会有不同的重复率。 [https://jsfiddle.net/u7t43coz/10/](https://jsfiddle.net/u7t43coz/10/)

```
const metaKeyCodes = ["MetaLeft", "MetaRight"];
const shiftKeyCodes = ["ShiftLeft", "ShiftRight"];
const ctrlKeyCodes = ["ControlLeft", "ControlRight"];
const altKeyCodes = ["AltLeft", "AltRight"];
const modifierKeyCodes = [
  ...metaKeyCodes,
  ...shiftKeyCodes,
  ...ctrlKeyCodes,
  ...altKeyCodes
];

// record which keys are down
const downKeys = new Set()
const artificialKeyUpTimes = {}

function onKeydown(e) {
    downKeys.add(e.code);

    // do other keydown stuff here
    console.log("meta", e.metaKey, e.code, "down")

    // check if metaKey is down
    if (metaKeyCodes.some(k => downKeys.has(k))) {
      downKeys.forEach(dk => {
        // we want to exclude modifier keys has they dont repeat
        if (!modifierKeyCodes.includes(dk)) {
          // fire artificial keyup on timeout
          if (!artificialKeyUpTimes[dk])
            setTimeout(
              () => fireArtificialKeyUp(dk, e),
              500
            );
          artificialKeyUpTimes[dk] = Date.now();
        }
      });
    }
  }

 function fireArtificialKeyUp(code, e) {
    // if enough time has passed fire keyup
    if (Date.now() - artificialKeyUpTimes[code] > 100) {
      delete artificialKeyUpTimes[code];
      //if key is still down, fire keyup
      if (downKeys.has(code)) {
        const eCode = isNaN(code) ? { code: code } : { keyCode: code };
        document.dispatchEvent(
          new KeyboardEvent("keyup", { ...e, ...eCode })
        );
      }
    } else {
      setTimeout(() => fireArtificialKeyUp(code, e), 100);
    }
  }

  function onKeyup(e) {
    downKeys.delete(e.code);

    // do keyup stuff here
    console.log("meta", e.metaKey, e.code, "up")
  }

  document.addEventListener("keydown", onKeydown)
  document.addEventListener("keyup", onKeyup) 
```

# tweepy - 如何使用 Tweepy（无分页）获得关注者数量？

> ID：11818638
> 
> 赞同：5
> 
> 时间：2012-08-05T17:45:29.487
> 
> 标签：tweepy

我正在使用此功能从 id 获取所有关注者：

```
def getAllFollowers(id):
    followers = tweepy.Cursor(api.followers, id = id)
    temp = []
    for user in followers.items():
        temp.append(user)

    return temp 
```

有没有办法在不分页的情况下获得关注者、朋友、推文等的数量？**只有号码。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T20:15:17.890

用户对象具有`followers_count`,`friends_count`和`statuses_count`这些属性。请参阅 Twitter API 文档中的示例响应：[https ://dev.twitter.com/overview/api/users](https://dev.twitter.com/overview/api/users)

> 此帐户当前拥有的关注者数量。在某些胁迫条件下，该字段将暂时显示“0”。例子：
> 
> `"followers_count": 21`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T10:42:26.377

试试我的追随者计数解决方案 [https://gist.github.com/3879338](https://gist.github.com/3879338) 在此代码中，您需要粘贴您的数据，例如 consumer_key、c​​onsumer_secret、access_key、access_secret。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T14:49:08.517

使用[用户](https://developer.twitter.com/en/docs/twitter-api/v1/data-dictionary/object-model/user)对象中的“followers_count”：

```
handle = 'justinbieber'

user = api.get_user(handle)
num_followers = user.followers_count
num_friends = user.friends_count 
```

# python - 在 python 脚本中并行运行多个作业

> ID：11818640
> 
> 赞同：4
> 
> 时间：2012-08-05T17:45:39.977
> 
> 标签：python, parallel-processing, bioinformatics

我不是程序员，因此将不胜感激简单的答案。我是一名医学博士，正在参与一个生物信息学项目。

假设我有一个 Python 脚本，`abc.py`并且我有一个文本文件，`commandline.txt`其中包含 113 个命令行，每行 1 个，以便该脚本并行运行。我希望这些作业中的每一个都在其自己的名为 scatter.001、scatter.002、...、scatter.113 的目录中运行（每个作业只有一个唯一编号），并在我正在执行的目录中创建脚本来自。

我正在运行，Windows 7 和 Python 2.7。

执行此操作的命令行是什么？（蟒蛇xyz\abc.py .......）

PS：

```
-p 100 -m 10000000 -e 10 -k I:\Exome\Invex\analyses\PatientSet.load_maf.pkl ,UBE2Q1,RNF17,RNF10,REM1,PMM2,ZNF709,ZNF708,ZNF879,DISC1,RPL37,ZNF700,ZNF707,CAMK4,ZC3H10,ZC3H13,RNF115,ZC3H14,SPN,HMGCLL1,CEACAM5,GRIN1,DHX8,NUP98,XPC,SP4,SP5,CAMKV,SPPL3,RAB40C,RAB40A,COL7A1,GTSE1,OVCH1,FAM183B,KIAA0831,SPPL2B,ITGA8,ITGA9,MYO3B,ATP2A2,ITGA1,ITGA2,ITGA3,ITGA5,RIT1,ITGA7,TRHR,LOC100132288,DENND4A,DENND4B,TAP2,GAP43,PAMR1,HRH2,HRH3,HRH1,FBXL18,FAM169B,GHDC,SDK1,SDK2,THSD4,THSD1,ZFP161,CHST8,COL4A5,COL4A4,COL4A3,COL4A2,COL4A1,CHST1,CHST5,CHST4,ITGAX I:\Exome\Invex\analyses\First7.final_analysis_set.maf I:\Exome\Invex\temp\unzipped_power_files First7 I:\Exome\Invex\analyses\First7.individual_set.txt I:\Exome\Invex\hg19.fasta I:\Exome\Invex\hg19_encoded_by_trinucleotide.fasta I:\Exome\Invex\TCGA.hg19.June2011.gaf I:\Exome\Invex\hg19 I:\Exome\Invex\pph2_whpss_reduced I:\Exome\Invex\cosmic_num_times_each_chr_pos_mutated.tab 
```

这是 commandline.txt 中一行的示例。我在文件中有 113 行这样的行..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T17:52:37.403

如果你走这条路，你就会进入windows shell编程，而没有人这样做。（我的意思是有人这样做，但他们是一个非常小的群体。）

如果您编写第二个 python 脚本循环通过您要传递给第二个脚本的参数，并使用这些参数调用一个函数，那将是最简单的。

```
from subprocess import Popen
from os import mkdir

argfile = open('commandline.txt')
for number, line in enumerate(argfile):    
    newpath = 'scatter.%03i' % number 
    mkdir(newpath)
    cmd = '../abc.py ' + line.strip()
    print 'Running %r in %r' % (cmd, newpath)
    Popen(cmd, shell=True, cwd=newpath) 
```

这将创建一个目录，并将您的命令作为该目录中的单独进程运行。由于在启动另一个子进程之前它不会等待子进程完成，因此这提供了您想要的并行性。

* * *

串联版本只是在启动另一个子进程之前[等待。](http://docs.python.org/library/subprocess#subprocess.Popen.wait)在循环末尾添加一行：

```
 p = Popen(cmd, shell=True, cwd=newpath)
    p.wait() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T18:53:53.867

这个 python 脚本应该并行执行：

```
import os, subprocess
n = 0
for cmd in open('commandline.txt'):
    newpath = 'scatter.%03d' % n 
    os.mkdir(newpath)
    subprocess.Popen("..\\abc.py " + cmd, shell=True, cwd=newpath)
    n += 1 
```

请注意，这假设 abc.py 和 commandline.txt 位于同一目录中。如果不是这种情况，则必须将字符串更新为“C:\\path\\to\\abc.py”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T11:48:47.913

GNU Parallel 正是为此类任务而设计的。因此，如果您一直在 GNU/Linux 上运行，您只需执行以下操作：

```
cat commandline.txt | parallel bash -c "mkdir scatter.{#}; cd scatter.{#}; python ../abc.py {}" 
```

由于您在 Microsoft Windows 7 上运行，因此您需要执行更多步骤才能运行上述程序。

首先安装 CygWin [http://cygwin.com/setup.exe](http://cygwin.com/setup.exe)这将为您提供一个基本的类 UNIX 环境。

然后启动 CygWin 并在 CygWin 下安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel 
```

CygWin 更喜欢 /I/Exome/Invex/... 之类的路径；所以最后你需要在commandline.txt中将\更改为/，并将i：更改为/i，然后再将其并行化。

```
perl -pe 's{(.):}{/$1}g;s{\\}{/}g;' commandline.txt | parallel bash -c "mkdir scatter.{#}; cd scatter.{#}; python ../abc.py {}" 
```

然后你就完成了。

观看 GNU Parallel 的介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T17:50:08.787

重写您的脚本以利用 Python 的多处理模块。

[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

例如，它提供了一个 Pool 类，用于实现典型的工作模式，其中数据由 1..N 个工作人员并行处理。

“不是程序员”在这里毫无意义——与其修补，不如通过重用现有的 Python 模块来考虑更好的实现。写作和修改写在上面的东西通常没有多大帮助。

# sencha-touch-2 - 如何在 Sencha Touch 的 NavigationView 中动态定义标题？

> ID：11818641
> 
> 赞同：0
> 
> 时间：2012-08-05T17:45:48.410
> 
> 标签：sencha-touch-2

我正在使用 SenchaTouch NavigationView 的组件。我遇到的问题是我无法动态定义视图的标题。这是我正在使用的代码

```
onMyList: function(dataview, index, target, record, e, options) {
    var myScreen = this.getMyScreen();
    var model = Ext.getStore('Example').getAt(index);
    dataview.up('navSample').config.title = model.data.Nombre;
    dataview.up('navSample').push(myScreen);
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:53:16.827

首先你必须将 Sencha Touch 升级到至少 2.0.1。比你可以使用：

```
var navbar = navigationView.getNavigationBar();

navbar.setTitle('My cool title'); 
```

干杯，奥列格

# java - 打开url连接时如何处理网站首页重定向

> ID：11818644
> 
> 赞同：2
> 
> 时间：2012-08-05T17:46:07.323
> 
> 标签：java, redirect, timeout, urlconnection

从输出中，我了解到网站主页确实刷新并将请求重定向到在浏览器上正常但在代码上没有的其他页面。那么我该如何与重定向一起前进呢？

```
try {
            URL url = StringUtils.stringToURL(link);
            URLConnection dbGatewayURL = url.openConnection();
            dbGatewayURL.setConnectTimeout(timeout);
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    dbGatewayURL.getInputStream()));
            StringBuffer responseData = new StringBuffer();
            String line = "";
            while ((line = in.readLine()) != null) {
                responseData.append(line + "\n");
            } 
```

输出是：

```
<HEAD>
<META HTTP-EQUIV=REFRESH CONTENT="0;URL=/sites/engbm">
</HEAD> 
```

当我尝试时，这会引发意外的文件结束异常`httpUrlConn.setRequestMethod("HEAD");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:53:45.950

您需要仔细查看 http 标头。重定向的响应代码是 302。每个重定向响应都带有一个位置标头。典型的重定向响应如下

```
HTTP/1.1 301 Moved Permanently
Location: http://www.example.org/
Content-Type: text/html
Content-Length: 174 
```

读取响应代码 ( `HttpURLConnection.getResponseCode()`)，然后读取标头并获取标头的值`Location`并向该 URL 发出新请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T18:02:30.270

您必须解析输出并查找`<META HTTP-EQUIV=REFRESH>`标签。它告诉浏览器响应头等价物包含在内容本身中。在这种情况下，它告诉浏览器在几秒钟`/sites/engbm`后重定向到。`0`只是为了弄清楚它的`META HTTP-EQUIV`用途：[http ://www.w3schools.com/tags/att_meta_http_equiv.asp](http://www.w3schools.com/tags/att_meta_http_equiv.asp)

> http-equiv 属性为内容属性的信息/值提供 HTTP 标头。
> 
> http-equiv 属性可用于模拟 HTTP 响应标头。
> 
> 如果设置了 name 属性，则不应设置 http-equiv 属性。

至于：

> 当我尝试时，这会引发意外的文件结束异常`httpUrlConn.setRequestMethod("HEAD");`

这是因为[`HEAD`请求没有响应正文](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)。

# dynamics-crm-2011 - CrmSvcUtil.exe 引发 401 未经授权的错误

> ID：11818650
> 
> 赞同：1
> 
> 时间：2012-08-05T17:46:30.043
> 
> 标签：dynamics-crm-2011

我有一个在加入域的盒子上运行的 crm 2011 实例。我正在尝试使用以下命令从域外部运行 crmsvcutil。

```
CrmSvcUtil.exe /out:Xrm.cs /url:http://crm.mydomain.com/MSCRMDEV/XRMServices/2011/OrganizationData.svc/ /domain:MYDOMAIN  /u:mydomain\username /p:mypassword /namespace:Xrm /serviceContextName:XrmServiceContext 
```

这会产生以下错误

> CrmSvcUtil.exe 错误：0：由于异常退出程序，退出代码为 2：System.InvalidOperationException：元数据包含无法解析的引用：'http://crm.mydomain.com/XRMServices/2011/OrganizationData.svc/? wsdl'。---> System.Net.WebException：远程服务器返回错误：（401）未经授权。在 System.Net.HttpWebRequest.GetResponse() 在 System.ServiceModel.Description.MetadataExchangeClient.MetadataLocationRetriever.DownloadMetadata(TimeoutHelper timeoutHelper) 在 System.ServiceModel.Description.MetadataExchangeClient.MetadataRetriever.Retrieve(TimeoutHelper timeoutHelper) --- 内部异常堆栈结束跟踪 --- 在 System.ServiceModel.Description.MetadataExchangeClient.MetadataRetriever.Retrieve(TimeoutHelper timeoutHelper) 在 System.ServiceModel.Description。`1..ctor(Uri serviceUri, Boolean checkForSecondary) at Microsoft.Xrm.Sdk.Client.ServiceConfiguration`1..ctor(Uri serviceUri) 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceConfiguration.AdjustServiceEndpoint(Uri serviceUri) 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceConfiguration..ctor(Uri serviceUri) 在 Microsoft.Xrm.Sdk.Client。 ServiceConfigurationFactory.CreateConfiguration[TService](Uri serviceUri) 在 Microsoft.Crm.Services.Utility.SdkMetadataProviderService.CreateOrganizationServiceEndpoint() 在 Microsoft.Crm.Services.Utility.SdkMetadataProviderService.Microsoft.Crm.Services.Utility.IMetadataProviderService.LoadMetadata() 在 Microsoft .Crm.Services.Utility.CrmSvcUtil.Run() 在 Microsoft.Crm.Services.Utility.CrmSvcUtil.Main(String[] args)

Fiddler 的踪迹

> HTTP/1.1 401 未经授权的缓存控制：私有内容长度：0 服务器：Microsoft-IIS/7.5 X-AspNet-Version：4.0.30319 WWW-Authenticate：协商 WWW-Authenticate：NTLM X-Powered-By：ASP.NET日期：星期一，2012 年 8 月 6 日 00:44:07 GMT 代理支持：基于会话的身份验证不存在代理身份验证标头。WWW-Authenticate 标头存在：协商 WWW-Authenticate 标头存在：NTLM

用户/通行证是域管理员的用户/通行证，也是 crm 管理员。我错过了什么？有趣的是，错误消息中的 URL 不包含 ORG 名称

'http://crm.mydomain.com/XRMServices/2011/OrganizationData.svc' <--- 此处缺少组织名称

从 IIS 日志中，我看到 401.5，即“ISAPI 扩展或 CGI 应用程序拒绝了请求”：

2012-08-12 16:50:03 192.168.230.201 GET /MYORGNAME/XRMServices/2011/OrganizationData.svc wsdl+OnBeginRequest:08/12/2012-16:50:03.527+LogEntries:0+SqlCalls:0+SqlCallsMs: 0+GC:1+OnEndRequest:16:50:03.528 80 - 192.168.230.201 - 401 5 0 3 2012-08-12 16:50:03 192.168.230.201 GET /XRMServices/2011/OrganizationData.svc wsdl+OnBeginRequest:08 /12/2012-16:50:03.538+LogEntries:0+SqlCalls:0+SqlCallsMs:0+GC:1+OnEndRequest:16:50:03.538 80 - 192.168.230.201 - 401 5 0 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:08:27.020

我认为您可以按照以下说明轻松解决您的问题：http: [//blog.thinketg.com/blog/ben-klopfer/strongly-typed-code-file-generation-with-crmsvcutilexe-for-crm-2011-ifd -配置代码](http://blog.thinketg.com/blog/ben-klopfer/strongly-typed-code-file-generation-with-crmsvcutilexe-for-crm-2011-ifd-configurations-code)

问候，

凯文

# c++ - 打印 c++ 名称修饰

> ID：11818651
> 
> 赞同：1
> 
> 时间：2012-08-05T17:46:33.663
> 
> 标签：c++

我正在阅读一本 c++ 书籍，其中指出链接器通常传递的是混乱的名称，而不是原始名称。所以，我想看看错位的名字会是什么样子。因此，我创建了一个名为 Test 的类，它只包含函数签名并将其保存到一个名为 name_mangling.cpp 的文件中

然后在 main 方法中，我调用这些函数。我首先将文件编译为 .o，然后尝试将其与命令链接，例如

```
g++ -o name_mangling name_mangling.o 
```

我希望看到损坏的名称，但 g++ 打印了实际名称，例如

```
undefined reference to `Test::Test(char const*)' 
```

但另一方面，当我尝试链接到诸如 .so 之类的共享对象时，我看到了损坏的名称。为什么 g++ 在 .so 而不是上述情况下打印损坏的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:56:08.977

它不会显示损坏的名称，因为它知道用代码编写的实际/真实名称。考虑到您可能只是拼错了一些名称（而且这些名称更难处理），显示错误的名称会适得其反。

如前所述，在 Linux/GCC 下有一个“nm”工具来打印损坏的名称。在 Windows 下，您可以尝试[Dependency Walker](http://www.dependencywalker.com/)，它曾经是 Visual C++ 示例的一部分，对于确保您拥有启动时所需的所有动态链接库也非常有用。

# c# - 将 Texture2d 对象发送到函数

> ID：11818664
> 
> 赞同：1
> 
> 时间：2012-08-05T17:49:21.983
> 
> 标签：c#, function, xna-4.0, texture2d

我尝试将一些对象发送到函数，但似乎 C# 不喜欢那样。这是代码。

```
string[] bkgrSource = new string[12];
Texture2D[] bkgrBANK = new Texture2D[12]; 
```

这`bkgrSource[0]`是一个文件名数组，`bkgrBANK[0]`是一个`Texture2D`.

此功能不起作用。`bkgrBANK[0]`遗嘱仍然是空的。有什么帮助吗？

```
commonImageLoader( bkgrSource[0], bkgrBANK[0] ); 

private void commonImageLoader(string source, Texture2D destination ) {
    if ( !string.IsNullOrEmpty( source ) ) {
        fileName = source;
        using ( fileStream = new FileStream( @fileName, FileMode.Open ) ) {
        destination = Texture2D.FromStream( GraphicsDevice, fileStream );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:00:24.683

我不是 C# 专家，但我认为关键是您按值传递参数（默认方法调用行为），因此函数中的源参数和目标参数是原始参数的副本。

我认为您可以通过[引用](http://msdn.microsoft.com/en-us/library/aa645763%28v=vs.71%29.aspx)传递参数来解决此问题。可能这应该工作：

```
commonImageLoader( ref bkgrSource[0], ref bkgrBANK[0] ); 

private void commonImageLoader(ref string source, ref Texture2D destination ) {
    if ( !string.IsNullOrEmpty( source ) ) {
        fileName = source;
        using ( fileStream = new FileStream( @fileName, FileMode.Open ) ) {
        destination = Texture2D.FromStream( GraphicsDevice, fileStream );
        }
    }
} 
```

# fullscreen - MDM Zinc - 全屏运行桌面应用程序

> ID：11818669
> 
> 赞同：0
> 
> 时间：2012-08-05T17:49:54.170
> 
> 标签：fullscreen, mdm-zinc

是否有允许使用 Zinc 3.0 (Windows XP) 构建的桌面应用程序进入全屏模式的选项？（在 Flash 本身中它可以工作，但不能在编译的 Zinc 桌面应用程序中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:38:41.323

在窗口属性窗格中将窗口状态设置为“最大化”。

或者，您可以将尺寸类型设置为“相对”，并将宽度和高度设置为“100%”

# c# - WCF 异步 CTP Silverlight

> ID：11818674
> 
> 赞同：1
> 
> 时间：2012-08-05T17:50:06.290
> 
> 标签：c#, wcf, silverlight-5.0, async-ctp

简要地，

Visual Studio 2012 RC **Silverlight 5 应用**程序使用通过共享便携式库使用 ChannelFactory 技术托管在**ASP.net 4 应用程序中的***Game* **WCF 4 服务****。NET4/SL5**包含带有**异步 CTP的***iGame*接口

 *********图：**
ASP.NET **<=**类库 (Game) **<=**便携式库 (iGame) **=>** Silverlight

**便携式图书馆**

```
[ServiceContract]
public interface iGame
{
    [OperationContract]
    Task<bool> Request ( string Key );
} 
```

**类库**

```
[ServiceBehavior ( InstanceContextMode = InstanceContextMode . Single , ConcurrencyMode = ConcurrencyMode . Multiple , UseSynchronizationContext = true )]
public class Game : iGame
{
    public async Task<bool> Request ( string Key )
    {
        return await Task . Factory . StartNew ( ( ) => true );
    }
} 
```

**银光**

```
 private async void myButton_Click ( object sender , RoutedEventArgs e )
    {
        if ( await Messenger . Instance . Client . Request ( XXX . Text ) ) // Exception
            NavigationService . Navigate ( new Uri ( "/Views/YYY.xaml" , UriKind . Relative ) );
    } 
```

*   Messenger 是一个单例类，通过 ChannelFactory 启动和存储我的客户端代理。

* * *

```
System.InvalidOperationException: The contract 'iGame' contains synchronous operations, which are not supported in Silverlight. Split the operations into "Begin" and "End" parts and set the AsyncPattern property on the OperationContractAttribute to 'true'. Note that you do not have to make the same change on the server.
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.<ThrowAsync>b__0(Object state) 
```

**怎么**了？o_o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:09:15.893

在您的客户端，您的`iGame`代理是*同步*的，并且您在它周围使用[假异步包装器](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)来*假装*它是异步的。

您需要一个异步代理。您可以通过让 VS2012RC 重新生成代理来做到这一点，或者您可以[使用`TaskWsdlImportExtension`](http://www.larswilhelmsen.com/2010/11/05/taskwsdlimportextensiona-hidden-gem-in-the-c-vnext-async-ctp-samples/). 我不确定这两种解决方案是否可以在便携式库中使用。*******

# android - 当网络视图加载网页时，我如何看到加载的网页？

> ID：11818679
> 
> 赞同：0
> 
> 时间：2012-08-05T17:50:44.573
> 
> 标签：android, android-webview

尝试此代码....

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    WebView browser = new WebView(this);
    browser.setWebViewClient( new WebViewClient() {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Log.d("URL LOADED!!!", url);
            view.loadUrl(url);
            return false;
        };
    });

    setContentView(browser);
    browser.loadUrl("http://www.kinopoisk.ru");
    Log.d("web page loaded", "true");
} 
```

但我还没有看到有关加载页面的调试信息......没有标签“URL LOADED!!!” 在日志猫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:08:55.480

如果您是调用 loadUrl() 的人，它应该在您传递给它的任何 url 上。所以我不明白你的用例是什么，在你手动给它一个 url 之后就需要知道这个 url。但不管你应该能够像这样使用[WebView.getUrl()](http://developer.android.com/reference/android/webkit/WebView.html#getUrl%28%29)来找到它：

```
browser.getUrl(); 
```

# php - PHP MySQL UNION SELECT 未按预期方式工作

> ID：11818683
> 
> 赞同：0
> 
> 时间：2012-08-05T17:50:57.247
> 
> 标签：php, mysql, select, mysqli, union

事情是这样的，如果我只做第一个选择，它就完美了，但是当我做 UNION 时，它会回显警告：mysqli_fetch_assoc() 期望参数 1 是 mysqli_result，布尔值在 C:\bla, bla, bla 中给出。

我搜索了类似的问题和/或问题，但没有一个发现似乎让我知道如何解决这个问题。

```
<?php
$moncols='col1,col2,col3,col4';
$main = "SELECT $moncols FROM table1 WHERE col4 = 'yes'
         UNION
         SELECT $moncols FROM table2 WHERE col4 = 'yes'
         UNION
         SELECT $moncols FROM table3 WHERE col4 = 'yes'
         UNION
         SELECT $moncols FROM table4 WHERE col4 = 'yes'
         UNION
         SELECT $moncols FROM table5 WHERE col4 = 'yes'";
$resoult = $mon -> query($main);
while ($row = mysqli_fetch_assoc($resoult)){
$myStuff=$row['col4'];
$otherStuff=$row['col3'];
echo $myStuff. ' - ' .$otherStuff. '<br>';
}
?> 
```

比:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:39:56.787

您的查询可能有错误。也许您的一张表缺少其中一列。无论如何，`$resoult`都不是有效的 mysqli 结果。尝试添加一些错误检查以查找问题：

```
$resoult = $mon->query($main);
if (! resoult) {
    echo "MySQL error: " . $mon->error);
} 
```

# python - 为什么具有相同密钥的相同字符串的AES加密密码总是不同？

> ID：11818684
> 
> 赞同：3
> 
> 时间：2012-08-05T17:50:59.950
> 
> 标签：python, encryption, openssl, aes

我有一个名为plain.txt 的文件。在我的文件里面：

```
Hello Hello Hello Hello 
```

我正在使用此命令对其进行加密：

```
openssl enc -aes-128-cbc -salt -k "Hello" -in plain.txt -out encrypted.bin 
```

然后我打印这样的加密值：

```
buff = open("encrypted.bin")
cipher = buff.read()
buff.close()
print b64encode(cipher) 
```

但它总是不同的价值。密码不应该总是相同的吗？我使用相同的文件和相同的密码来加密它。这些是我的终端输出：

```
Richard-Knops-MacBook-Pro:python_test richardknop$ openssl enc -aes-128-cbc -salt -k "Hello" -in plain.txt -out encrypted.bin
Richard-Knops-MacBook-Pro:python_test richardknop$ python test.py U2FsdGVkX1+AmoQiIkYAxIYanLr/kbjMfEJPPLfeE/wtyxScvAKzb7K38ZxoI097
Richard-Knops-MacBook-Pro:python_test richardknop$ openssl enc -aes-128-cbc -salt -k "Hello" -in plain.txt -out encrypted.bin
Richard-Knops-MacBook-Pro:python_test richardknop$ python test.py U2FsdGVkX19vPD+OoiK7iSgYJiPMxuKGNWWrLlfBS0c3yCJkuv7QIBGEo2Q86UsV
Richard-Knops-MacBook-Pro:python_test richardknop$ openssl enc -aes-128-cbc -salt -k "Hello" -in plain.txt -out encrypted.bin
Richard-Knops-MacBook-Pro:python_test richardknop$ python test.py U2FsdGVkX1+3I8EC7u3lrcVPyD/JV12NAecWvTPXGga0Nh2cwqLAtGCDhLK6MI9g
Richard-Knops-MacBook-Pro:python_test richardknop$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T17:52:34.157

因为“盐”每次都不一样。例如，这可以防止对加密值的彩虹表类型攻击。见[http://en.wikipedia.org/wiki/Salt_(密码学)](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T13:50:33.003

您获得不同加密字符串的原因是“enc -aes-128-cbc”。CBC 代表密码块链接。因此，对于第二个块，第一个块的加密输出作用为 ac IV，所以每次你得到不同的字符串。更多细节谷歌“CBC模式下的AES”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T15:14:18.180

每次运行都会得到不同的输出，因为每次运行命令时都会生成新的盐。为了为每个连续运行使用`-S salt`选项提供相同的盐，即

```
openssl enc -aes-128-cbc -salt -S "Salt" -k "Hello" -in plain.txt -out encrypted.bin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-27T02:54:48.347

原因是`key`用于加密的实际是由您`passphrase`和`SALT`. 那么即使您仍然使用相同的密码，密文也肯定会有所不同，因为密码`SALT`不同。

Openssl 默认使用 salt 来缓解字典攻击。如果您不想使用它，请使用与其他答案建议的相同的盐，或添加`nosalt`如下选项：

```
openssl enc -aes-128-cbc -nosalt -k "Hello" -in plain.txt -out encrypted.bin 
```

您可以使用十六进制查看密文`xxd`

```
xxd encrypted.bin 
```

# php - PHP排序3维数组

> ID：11818686
> 
> 赞同：1
> 
> 时间：2012-08-05T17:51:26.220
> 
> 标签：php, sorting, multidimensional-array

我知道这很容易，但我不明白。我在网上找到的所有答案都......也许对我来说太复杂了。

这是我的典型数组：

```
array(
(int) 0 => array(
    'Conversation' => array(
        'id' => '1',
        'created' => '2012-08-04 00:00:00'
    ),
    'ConversationUser' => array(
        (int) 0 => array(
            'id' => '1'
        ),
        (int) 1 => array(
            'id' => '2'
        )
    )
),
(int) 1 => array(
    'Conversation' => array(
        'id' => '2',
        'created' => '2012-08-01 00:00:00'
    ),
    'ConversationUser' => array(
        (int) 0 => array(
            'id' => '1'
        ),
        (int) 1 => array(
            'id' => '2'
        )
    )
)); 
```

我想用 ['Conversation']['created'] 日期、asc 或 desc 对我的数据进行排序。

有什么简单的答案吗？:P

PS我不能使用MYSQL排序，我一一检索数据并创建该数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:59:50.660

使用[usort()](http://fr2.php.net/manual/fr/function.usort.php)：

```
usort($your_array, function($a, $b){
    $a = strtotime($a['Conversation']['created']);
    $b = strtotime($b['Conversation']['created']);

    if ($a == $b) {
        return 0;
    }
    return ($a > $b) ? -1 : 1;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T17:59:55.213

您可以使用[array_multisort](http://php.net/manual/en/function.array-multisort.php)来执行此操作：

```
// $data is your array from the example
// first obtain the rows for sorting
$sortkeys = array();
foreach ($data as $row) {
    $sortkeys[] = $row['Conversation']['created'];
}

// sort $data according to $sortkeys
array_multisort($sortkeys, $data);
var_dump($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T17:59:24.840

你应该看看[uksort()](http://php.net/manual/en/function.uksort.php)和[usort()](http://php.net/manual/en/function.usort.php)函数，它们可以让你自定义数组的排序方式。

解决方案是简单的还是复杂的，请记住爱因斯坦曾经说过的一句话：“*事情应该尽可能简单，但永远不要比实际更简单*”。

如果您在使用这些功能时遇到问题，我们可以为您提供进一步的线索 ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T18:01:08.057

您可以使用[`usort()`](http://uk.php.net/usort)（或者，为了维护索引关联，[`uasort()`](http://uk.php.net/uasort)。示例：（假设您的数组是`$arr`）：

```
usort($arr, function($a, $b) {
    return
    preg_replace('/\D/', '', $b['Conversation']['created'])
    >
    preg_replace('/\D/', '', $a['Conversation']['created']);
}); 
```

这将降序排序。更改`>`为`<`上升。

# javascript - Kinectjs 在画布上的 mousedown 位置的准确性和 clearRect 没有按预期工作

> ID：11818688
> 
> 赞同：1
> 
> 时间：2012-08-05T17:52:02.870
> 
> 标签：javascript, html, kineticjs

我正在编写一个用户界面来确定点击对象的准确性。看到 KineticJS 并认为这将是一个很好的工具。

我创建了一个简单的舞台，里面有一个圆圈。我试图在圆圈内有人点击的点上画一个十字。我发现绘制的点偏移到屏幕上光标图标的右下角。另外我不确定为什么我似乎无法清除我绘制一些文本以显示鼠标坐标的区域。目前，我在同一个地方得到了这种奇怪的文本覆盖。

感谢任何输入/建议。

谢谢。

索引.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

    <script type="text/javascript" src="./assets/js/kineticjs/kinetic-v3.10.5.js"></script>

    <script type="text/javascript" src="./assets/js/pointingRender/pointingrender.js"></script> 

    <script type="text/javascript">
        $(document).ready(function(){
            initRender();
        });
    </script>

    <title>Pointing Devices User Interface</title>
</head>
<body>

<div id="container">
    <div id="mouseposition"></div>
</div>
</body>
</html> 
```

指向渲染.js：

```
function initRender() {

    var stage = new Kinetic.Stage({
        container:"container",
        width:1920,
        height:1080
    });

    var layer = new Kinetic.Layer();

    var circle = new Kinetic.Circle({
        x:150,
        y:stage.getHeight() / 2,
        radius:70,
        fill:"red",
        stroke:"black",
        strokeWidth:4
    });

    var oval = new Kinetic.Ellipse({
        x:400,
        y:stage.getHeight() / 2,
        radius:{
            x:100,
            y:50
        },
        fill:"yellow",
        stroke:"black",
        strokeWidth:4,
        draggable:true
    });

    oval.on("mouseover", function () {
        document.body.style.cursor = "pointer";
    });
    oval.on("mouseout", function () {
        document.body.style.cursor = "default";
    });

    circle.on("mousedown", function(evt){

        var x = evt.clientX;
        var y = evt.clientY;
        var crossHorizontal = new Kinetic.Line({
                  points: [x-5, y, x+5, y],
                  stroke: "black",
                  strokeWidth: 1
                });
        var crossVertical = new Kinetic.Line({
                          points: [x, y-5, x, y+5],
                          stroke: "black",
                          strokeWidth: 1
                        });

        var anotherlayer = new Kinetic.Layer();

        anotherlayer.add(crossHorizontal);
        anotherlayer.add(crossVertical);
        stage.add(anotherlayer);
    });

    // add the shapes to the layer
    layer.add(circle);
    layer.add(oval);

    // add the layer to the stage
    stage.add(layer);

    var canvas = layer.getCanvas();
        var context = canvas.getContext('2d');
    var theDiv = document.getElementById('container');

        theDiv.addEventListener('mousemove', function (evt) {
            var mousePos = getMousePos(theDiv, evt);
            var message = "Mouse position: " + mousePos.x + "," + mousePos.y;
            writeMessage(canvas, message);

        }, false);
}

function writeMessage(canvas, message) {
    var context = canvas.getContext('2d');
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.font = '18pt Calibri';
    context.fillStyle = 'black';
    context.fillText(message, 10, 25);
}

function getMousePos(canvas, evt) {
    var rect = canvas.getBoundingClientRect();

    // return relative mouse position
    var mouseX = evt.clientX ;
    var mouseY = evt.clientY ;
    return {
        x:mouseX,
        y:mouseY
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:39:44.083

添加“ **var messagelayer = new Kinetic.Layer();**用于显示消息层并添加” **canvas.clear();** " 在 writeMessage 函数中用于清除消息。

```
function initRender() {

    var stage = new Kinetic.Stage({
        container:"container",
        width:500,
        height:600
    });

    var layer = new Kinetic.Layer();
    var messagelayer = new Kinetic.Layer();

    var circle = new Kinetic.Circle({
        x:150,
        y:stage.getHeight() / 2,
        radius:70,
        fill:"red",
        stroke:"black",
        strokeWidth:4
    });

    var oval = new Kinetic.Ellipse({
        x:400,
        y:stage.getHeight() / 2,
        radius:{
            x:100,
            y:50
        },
        fill:"yellow",
        stroke:"black",
        strokeWidth:4,
        draggable:true
    });

    oval.on("mouseover", function () {
        document.body.style.cursor = "pointer";
    });
    oval.on("mouseout", function () {
        document.body.style.cursor = "default";
    });

    circle.on("mousedown", function(evt){

        var x = evt.clientX;
        var y = evt.clientY;
        var crossHorizontal = new Kinetic.Line({
                  points: [x-5, y, x+5, y],
                  stroke: "black",
                  strokeWidth: 1
                });
        var crossVertical = new Kinetic.Line({
                          points: [x, y-5, x, y+5],
                          stroke: "black",
                          strokeWidth: 1
                        });

        var anotherlayer = new Kinetic.Layer();

        anotherlayer.add(crossHorizontal);
        anotherlayer.add(crossVertical);
        stage.add(anotherlayer);
    });

    // add the shapes to the layer
    layer.add(circle);
    layer.add(oval);

    // add the layer to the stage
    stage.add(layer);
    stage.add(messagelayer);

    var canvas = messagelayer.getCanvas();
        var context = canvas.getContext('2d');
    var theDiv = document.getElementById('container');

        theDiv.addEventListener('mousemove', function (evt) {
            var mousePos = getMousePos(theDiv, evt);
            var message = "Mouse position: " + mousePos.x + "," + mousePos.y;
            writeMessage(canvas, message);

        }, false);
}

function writeMessage(canvas, message) {
    var context = canvas.getContext('2d');
    canvas.clear();
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.font = '18pt Calibri';
    context.fillStyle = 'black';

    context.fillText(message, 10, 25);
}

function getMousePos(canvas, evt) {
    var rect = canvas.getBoundingClientRect();

    // return relative mouse position
    var mouseX = evt.clientX ;
    var mouseY = evt.clientY ;
    return {
        x:mouseX,
        y:mouseY
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:52:44.777

在您的`function getMousePos()`中，您抓取了边界矩形 ( `rect`)，但您从不根据它调整`mouseX`and 。`mouseY`我相信您看到的偏移量与画布的偏移量有关。相反，您应该这样做：

```
 var mouseX = evt.clientX - rect.left;
    var mouseY = evt.clientY - rect.top; 
```

# sockets - 套接字连接无缘无故关闭

> ID：11818690
> 
> 赞同：1
> 
> 时间：2012-08-05T17:52:06.230
> 
> 标签：sockets, tcpclient, networkstream

我正在尝试实现 Facebook X_FACEBOOK_PLATFORM SASL 机制，以便我可以通过 XMPP 将 Facebook Chat 集成到我的应用程序中。

这是代码：

```
 var ak = "my app id";
  var sk = "access token";
  var aps = "my app secret";
  using (var client = new TcpClient())
  {
    client.Connect("chat.facebook.com", 5222);
    using (var writer = new StreamWriter(client.GetStream())) using (var reader = new StreamReader(client.GetStream()))
    {
      // Write for the first time
      writer.Write("<stream:stream xmlns=\"jabber:client\" xmlns:stream=\"http://etherx.jabber.org/streams\" version=\"1.0\" to=\"chat.facebook.com\"><auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"X-FACEBOOK-PLATFORM\" /></stream:stream>");
      writer.Flush();
      Thread.Sleep(500);
      // I am pretty sure following works or at least it's not what causes the error
      var challenge = Encoding.UTF8.GetString(Convert.FromBase64String(XElement.Parse(reader.ReadToEnd()).Elements().Last().Value)).Split('&').Select(s => s.Split('=')).ToDictionary(s => s[0], s => s[1]);
      var response = new SortedDictionary<string, string>() { { "api_key", ak }, { "call_id", DateTime.Now.Ticks.ToString() }, { "method", challenge["method"] }, { "nonce", challenge["nonce"] }, { "session_key", sk }, { "v", "1.0" } };
      var responseString1 = string.Format("{0}{1}", string.Join(string.Empty, response.Select(p => string.Format("{0}={1}", p.Key, p.Value)).ToArray()), aps);
      byte[] hashedResponse1 = null;
      using (var prov = new MD5CryptoServiceProvider()) hashedResponse1 = prov.ComputeHash(Encoding.UTF8.GetBytes(responseString1));
      var builder = new StringBuilder();
      foreach (var item in hashedResponse1) builder.Append(item.ToString("x2"));
      var responseString2 = Convert.ToBase64String(Encoding.UTF8.GetBytes(string.Format("{0}&sig={1}", string.Join("&", response.Select(p => string.Format("{0}={1}", p.Key, p.Value)).ToArray()), builder.ToString().ToLower()))); ;
      // Write for the second time
      writer.Write(string.Format("<response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">{0}</response>", responseString2));
      writer.Flush();
      Thread.Sleep(500);
      MessageBox.Show(reader.ReadToEnd());
    }
  } 
```

我尽可能地缩短和缩小了代码，因为我认为我的 SASL 实现（无论它是否有效，我还没有机会测试它）不是导致错误的原因。

我收到以下异常：无法从传输连接中读取数据：已建立的连接被主机中的软件中止。10053 System.Net.Sockets.SocketError.ConnectionAborted

每次我`client`第二次尝试从 's 流中读取时都会发生这种情况。如您所见，我在这里暂停了一个线程，因此 Facebook 服务器有足够的时间来回答我，但是我之前使用了异步方法并且遇到了完全相同的事情，所以我决定先尝试同步。无论如何，实际的 SASL 机制实现确实不应该导致这种情况，因为如果我不尝试立即进行身份验证，但是我发送请求以查看服务器使用什么机制并在另一轮读写中选择该机制，它会失败，但是当我立即发送机制选择 XML 时，它会在我发送的任何一秒内工作并失败。

所以结论如下：我打开套接字连接，写入它，从中读取（第一次读取同时适用于同步和异步），第二次写入它并尝试第二次从中读取它总是在这里失败。显然，问题出在套接字连接本身。我尝试使用 new`StreamReader`进行第二次阅读，但无济于事。这是相当不愉快的，因为我真的很想`NetworkStream`用“已接收”事件或类似的东西来实现外观，`Send(string data, Action<string> responseProcessor)`以便在使用该流时获得一些安慰，并且我已经有了实现，但是在第二次阅读时它也失败了。

感谢您的建议。

编辑：这是 NetworkStream 上的外观代码。使用这种异步方法时也会发生同样的事情，但几个小时前它起作用了，但是对于第二个响应返回与第一个响应相同的字符串。我无法弄清楚我在此期间改变了什么以及如何改变。

```
public void Send(XElement fragment)
{
  if (Sent != null) Sent(this, new XmppEventArgs(fragment));
  byte[] buffer = new byte[1024];
  AsyncCallback callback = null;
  callback = (a) => 
  {
    var available = NetworkStream.EndRead(a);
    if (available > 0)
    {
      StringBuilder.Append(Encoding.UTF8.GetString(buffer, 0, available));
      NetworkStream.BeginRead(buffer, 0, buffer.Length, callback, buffer);
    }
    else
    {
      var args = new XmppEventArgs(XElement.Parse(StringBuilder.ToString()));
      if (Received != null) Received(this, args);
      StringBuilder = new StringBuilder();
      // NetworkStream.BeginRead(buffer, 0, buffer.Length, callback, buffer);
    }
  };
  NetworkStream.BeginRead(buffer, 0, buffer.Length, callback, buffer);
  NetworkStreamWriter.Write(fragment);
  NetworkStreamWriter.Flush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:13:38.797

该`reader.ReadToEnd()`调用会消耗所有内容，直到流结束，即直到 TCP 连接关闭。

# android - Android SQLite 从 for 循环插入

> ID：11818694
> 
> 赞同：0
> 
> 时间：2012-08-05T17:52:42.097
> 
> 标签：android, database, sqlite, insert, syntax-error

我在考虑 SQLite 插入时遇到问题。我有一个存储 10 个不同行的类。然后当用户单击一个按钮时，这些行应该被插入到数据库中，其中有一个 for 循环执行 10 次，然后应该完成。但是我遇到了一些奇怪的错误。
我使用了与其他项目相同的 SQLite 代码。

使用数据库：

```
 Log.v(LOG_TAG, "\n\n\nSave Clicked");
           for (int i = 0; i < 10; i++) {

            dataSpinner[i] = spinnerList.get(i).getSelectedItem().toString(); // Area
            dataExercise[i] = exerciseList.get(i).getText().toString(); // Exercise
            dataSet[i] = setList.get(i).getText().toString(); // Set
            dataRep[i] = repList.get(i).getText().toString(); // Rep

            // Info box
            // Might not need anything here?

            Log.v(LOG_SAVE,
                    i + ". area: " + dataSpinner[i].toString() + ", ex: "
                            + dataExercise[i].toString() + ", set:"
                            + dataSet[i].toString() + ", rep:"
                            + dataRep[i].toString());

            // Save the current row to db
            boolean diditWork = true;
            try {
                ScheduleDatabase entry = new ScheduleDatabase(Monday.this);
                entry.open();
                entry.createEntry(table, dataSpinner[i].toString(),
                        dataExercise[i].toString(), dataSet[i].toString(),
                        dataRep[i].toString());
                entry.close();
            } catch (Exception e) {
                diditWork = false;
                String error = e.toString();
                Toast.makeText(this, "Something went wrong, " + error,
                        Toast.LENGTH_SHORT);
            } finally {
                if (diditWork) {
                    Toast.makeText(this, "IT WORKED!!!!!!",
                            Toast.LENGTH_SHORT).show();
                }
            }
        } 
```

数据库类中的插入方法：

```
public long createEntry(String table, String area, String exercise,
        String set, String rep) throws SQLException {
    System.out.println("Values: " + table + ", " + area + ", " + exercise
            + ", " + set + ", " + rep);
    ContentValues cv = new ContentValues();
    cv.put(KEY_AREA, area);
    cv.put(KEY_EXERCISE, exercise);
    cv.put(KEY_SET, set);
    cv.put(KEY_REP, rep);
    System.out.println("Done putting");
    return ourDatabase.insert(table, null, cv);
} 
```

这是错误

```
(1) near "set": syntax error<br>
Error inserting exercise=Exercise: 19 area=Abdominals set=5 rep=10
android.database.sqlite.SQLiteException: near "set": syntax error (code 1): , while compiling: INSERT INTO monday(exercise,area,set,rep) VALUES (?,?,?,?)
at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
at com.trainingschedule.days.ScheduleDatabase.createEntry(ScheduleDatabase.java:124)
at com.trainingschedule.days.Monday.onClick(Monday.java:262)
at android.view.View.performClick(View.java:4084)
at android.view.View$PerformClick.run(View.java:16966)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:07:54.503

`set`是一个 SQLite 关键字，将您的列名更改为其他名称，您的问题应该会消失。

# c# - Math.Abs (T value) 泛型 c#

> ID：11818696
> 
> 赞同：2
> 
> 时间：2012-08-05T17:53:04.793
> 
> 标签：c#, generics, math

我想创建通用函数 Math.Abs​​() 但我不知道如何做到这一点。如果我创建一个数学类，我不能为 T 值创建方法 Abs，因为我不知道 T 的类型。

如果有人知道该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T18:00:21.083

六个选项：

*   根据执行时类型使用反射`T`
*   为您关心的每种类型使用重载
*   对您关心的每种类型使用 if/else
*   `Dictionary<Type, Func<object, object>>`为您关心的每种类型创建一个包含委托
*   `dynamic`在 .NET 4 中使用：

    ```
    public T Foo<T>(T value)
    {
        dynamic d = value;
        return Math.Abs(d);
    } 
    ```

*   使用类似 Marc Gravell 的[MiscUtil的](http://pobox.com/~skeet/csharp/miscutil)[通用运算符](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)部分的东西

如果可能的话，我可能会选择重载选项。它将在编译时适当地约束您，并避免任何可能耗时的装箱/反射。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T17:55:25.793

你不能用泛型来做到这一点——没有泛型类型约束可以确保传入的类型是数字类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T17:56:27.730

我认为为本质上表现不同的事物编写一个通用方法是不合逻辑的。Floats 和 doubles 以类似的方式工作，但 int 不以这种方式工作（它们没有小数部分）。

为每个方法编写一个重载应该是处理这个问题的正确方法，否则你最终会做一堆 if typeof 基本上是错误的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-05T18:03:50.437

您可以通过 T.GetType() 获取 T 类型。但它不会帮助你。您不能编写泛型方法，但可以为对象编写 Abs 方法：

```
private static object Abs(object num)
{
    var type = num.GetType();
    if (type == typeof(Int32))
    {
        return Math.Abs((int) num);
    }
    if (type == typeof(Int64))
        return Math.Abs((long)num);
    if (type == typeof(Int16))
        return Math.Abs((short)num);
    if (type == typeof(float))
        return Math.Abs((float)num);
    if (type == typeof(double))
        return Math.Abs((double)num);
    if (type == typeof(decimal))
        return Math.Abs((decimal)num);
    throw new ArgumentException(string.Format("Abs is not defined for type {0}", type.FullName));
} 
```

# ruby-on-rails - 路由错误，未定义的方法“可搜索”# 使用 Sunspot Solr / Rails

> ID：11818698
> 
> 赞同：1
> 
> 时间：2012-08-05T17:53:23.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot, sunspot-rails, sunspot-solr

我已将 Sunsport Solr 添加到我的 Rails 应用程序中。我要搜索的模型抛出`Routing Error`异常，抱怨`undefined method 'searchable' for #<Class..........>`. 我遵循了几个不同的设置指令集，它们都提供了相同的信息，我已经完全匹配了。我似乎无法确定问题所在。下面的相关片段。

```
#dwelling.rb
class Dwelling < ActiveRecord::Base
  attr_accessible :street_address, :city, :state, :zip, :nickname

  searchable do
    text :nickname
  end
... 
```

--

```
#dwellings_controller.rb
class DwellingsController < ApplicationController

  before_filter :signed_in_user

  def index
    @search = Dwelling.search do
      fulltext params[:search]
    end
    @dwellings = @search.results
  end 
```

--

```
#Gemfile
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '~> 3.0.0'
gem 'sunspot_rails', '~> 1.3.0'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
gem 'sqlite3', '1.3.5'
gem 'sunspot_solr'
end 
```

有时，如果我刷新几次，`key?`就会抛出有关方法的单独错误。下面的完整错误。

```
NoMethodError in DwellingsController#index

undefined method `key?' for nil:NilClass 
```

我很困惑——有什么想法吗？

# php - PHP重定向用户并继续处理脚本

> ID：11818702
> 
> 赞同：5
> 
> 时间：2012-08-05T17:53:39.770
> 
> 标签：php

我希望脚本尽可能快地重定向用户，并在用户被重定向后继续处理数据。我在谷歌上找到了这个，但它不起作用。在重定向之前等待 10 秒。似乎用户需要等到脚本完成才能直接浏览器。

```
<?PHP
 store data
 $userAgent = $_SERVER['HTTP_USER_AGENT'];
 $user_ip=$_SERVER['REMOTE_ADDR'];

 //Redirect to google
 header("Location: http://www.google.com");
 //Erase the output buffer
 ob_end_clean();
 //Tell the browser that the connection's closed
 header("Connection: close");

 //Ignore the user's abort (which we caused with the redirect).
 ignore_user_abort(true);

 //Extend time limit to 30 minutes
 set_time_limit(1800);
//Extend memory limit to 10MB
ini_set("memory_limit","10M");
//Start output buffering again
ob_start();

//Tell the browser we're serious... there's really
//nothing else to receive from this page.
header("Content-Length: 0");

//Send the output buffer and turn output buffering off.
ob_end_flush();
//Yes... flush again.
flush();

//Close the session.
session_write_close();

//After redirection no need to send any data to user anymore.
//User would It's seem that user need to wait till script is finish before browser can be direct.
//Do some work 
//sleep(10);
$matched = $wurflObj->getDeviceCapabilitiesFromAgent($userAgent);
$org = geoip_org_by_name($user_ip);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:08:25.817

其他答案似乎没有抓住重点，为什么浏览器在重定向之前等待整个响应完成。

我对此并不肯定，但是浏览器是否会在收到 Location 标头后立即重定向？还是在连接终止时完成？使用 Firebug 查看网络连接在做什么，看看它是在 10 秒之前打印这些标题，还是在 10 秒后出现。

在 Ruby on Rails 世界中，首选的解决方案是将作业发送到“延迟作业”或“resqueue”服务器运行；这避免了尝试在需要可用于处理 Web 请求的 Web 服务器中运行长进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:56:11.503

它等待的原因是因为 line [`sleep(10)`](http://php.net/manual/en/function.sleep.php)。删除它，它应该以您期望的速度运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:56:25.043

`sleep(10)`代码接近尾声***可能*****就是***原因。*

 *如果您希望在后台完成工作，您有多种选择。

可能最好的方法是使用客户端站点的 AJAX 来执行繁重的 PHP 脚本，并在完成后返回结果。

单独的 PHP 不能像你想要的那样做异步工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-05T18:00:43.343

```
 Sleep(10) 
```

导致 10 秒的等待。我不确定它在那里做什么。但是删除它，你会没事的！

我认为 10 秒的等待是“做一些工作”的一个例子。*

# codeigniter - Codeigniter 消息：未定义的变量：infos

> ID：11818705
> 
> 赞同：0
> 
> 时间：2012-08-05T17:53:57.170
> 
> 标签：codeigniter

我是CI的新手。我使用 MY_Controller.php 作为主控制器。我可以将 ajax 作为 div#page 加载器打开。现在，我的问题是虽然我加载了 /about 页面，但我得到了服务模型的数据库条目。如何获取 about 控制器的 about 表？

```
..
    function render_page($view) {
        if( ! $this->input->is_ajax_request() )
        {
          $this->load->view('templates/header', $this->data);
        }
        $this->load->view($view, $this->data);

        if( ! $this->input->is_ajax_request() )
        {
         $this->load->view('templates/menu');
         $this->load->view('templates/footer', $this->data);
        }
      }.. 
```

我的服务模型：

```
class Services_model extends CI_Model {

    function getAll() {
        $q = $this->db->get('services');
        if($q->num_rows() > 0){
        foreach ($q->result() as $row)
        {
            $data[] = $row;

            }
        return $data;
    }
    }
} 
```

我的家庭控制器：

```
public function view($page = 'home')
{
$this->load->helper('text');
$this->data['records']= $this->services_model->getAll();
if ( ! file_exists('application/views/pages/'.$page.'.php'))
{
    // Whoops, we don't have a page for that!
show_404();
}
$data['title'] = ucfirst($page); // Capitalize the first letter
$this->render_page('pages/'.$page,$data);
} 
```

当我在主视图中使用它们时，我可以看到 services_table 没有问题：

```
<ul class="blog-medium">
<?php foreach($records as $row): ?>
<li>    
<div class="blog-medium-text">
<h1><a href="./post.html"><?php echo $row->title; ?></a></h1>
<p class="blog-medium-excerpt"><?php  echo $row->content; ?><br />
<a href="./post.html" class="read_more">Devamını Okumak için &rarr;</a></p>
</div>
<?php endforeach ?> 
```

我想在关于页面中使用相同的方式。关于_型号：

```
class About_model extends CI_Model {
    function getAll() {
        $q = $this->db->get('abouts');
        if($q->num_rows() > 0){
        foreach ($q->result() as $row)
        {
            $data[] = $row;

            }
        return $data;
    }
    }
} 
```

关于控制器：

```
 public function view($page = 'about')
    {
    $this->load->helper('text');
    $this->data['records']= $this->about_model->getAll();
    if ( ! file_exists('application/views/pages/'.$page.'.php'))
    {
        // Whoops, we don't have a page for that!
    show_404();
    }
    $data['title'] = ucfirst($page); // Capitalize the first letter
    $this->render_page('pages/'.$page,$data);
    } 
```

这是我关于的视图文件：

```
<div id="content">
<?php foreach($infos as $row): ?>
<h3 style="text-align: center;"> <?php echo $row->title; ?></h3>
<div class="hr">    </div>
<?php echo $row->content; ?>
<?php endforeach; ?> 
```

我收到错误消息告诉我：

```
Severity: Notice
Message: Undefined variable: infos
Filename: pages/about.php
Line Number: 3 
```

为什么我不能得到 abouts 表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:05:51.857

您正在调用`$infos`中的变量，`foreach`但它永远不会作为变量传递给您的视图。

阅读有关[向视图添加动态数据的文档](http://codeigniter.com/user_guide/general/views.html)

你要么需要设置`$data['infos']`一些东西，要么，我猜这是你想要的，`$records`在你的`foreach`

以上回答了您的具体问题，但是在您为您的来源提供了 repo 之后，您会遇到一些问题。我*强烈*建议您通读整个文档，先阅读[简介：入门](http://codeigniter.com/user_guide/overview/getting_started.html)，然后继续阅读教程，然后阅读一般主题。

您在这里遇到问题的原因是您将 routes.php 设置为所有内容都被路由到`Home`执行该`view`方法的控制器中。此方法在接受您要查看的页面时始终返回服务模型的获取。您的其他控制器根本没有被执行。根据您的控制器设置，如果您只是删除自定义路由，`http://theurl/about`则会路由到`About`控制器。要加载的默认方法是`index`，如果您将视图更改为索引，那么它将默认显示。

# ios - iOS 企业开发者帐户和公开测试版？

> ID：11818708
> 
> 赞同：2
> 
> 时间：2012-08-05T17:54:33.593
> 
> 标签：ios, iphone, enterprise

我看到越来越多的开发人员在企业开发人员帐户下发布他们的应用程序的公开测试版。最后我读到，企业服务条款只允许在内部向员工发布应用程序。Apple 现在是否正式允许使用企业帐户进行公开测试，或者这些开发人员只是希望 Apple 不会以违反合同为由起诉他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:04:01.857

I believe that the legal wording actually insinuates members of your organization. I know of one case where a member-owned organization has released public betas of apps and was deemed to be within the constraints of the contract. IANAL; YMMV

# android - Android AlertDialog 给出错误 java.lang.NullPointerException

> ID：11818709
> 
> 赞同：0
> 
> 时间：2012-08-05T17:54:37.087
> 
> 标签：android, spinner, android-alertdialog

我需要在我的应用程序中显示一个对话框。在此对话框中有一个 Spinner。所以我使用这段代码来显示对话框并填充 Spinner：

```
public class setup4 extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.setup4);
}

//On bottone setup 4
public void onSetup4bottone(View v)
{
    AlertDialog.Builder customDialog = new AlertDialog.Builder(this);
    customDialog.setTitle("Aggiungi ora scolastica");
    LayoutInflater layoutInflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view=layoutInflater.inflate(R.layout.aggiungi_ora,null);
    customDialog.setView(view);

    List<String> materie = new ArrayList<String>();
    materie.add("ADASDASD"); materie.add("LOLOLOL");

    Spinner spinner = (Spinner) findViewById(R.id.aggiungi_ora_materia);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, materie);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    customDialog.show();
}
} 
```

onSetup4bottone 是必须调用对话框的简单按钮的单击事件。我不明白为什么我在这行代码中得到 java.lang.NullPointerException：

```
spinner.setAdapter(adapter); 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:56:37.400

那么显而易见的候选人是`spinner`空的，这表明：

```
Spinner spinner = (Spinner) findViewById(R.id.aggiungi_ora_materia); 
```

正在返回 null。首先要做的是检查 - 记录是否`spinner`为空。

您确定您使用的是正确的 ID 吗？根据[文档](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)，`findViewById`如果您使用错误的 ID，将返回 null：

> 从在 onCreate(Bundle) 中处理的 XML 中查找由 id 属性标识的视图。
> 
> 如果找到则返回
> 视图，否则返回 null。

# python - __slots__、_fields_ 和继承交叉处的异常

> ID：11818711
> 
> 赞同：1
> 
> 时间：2012-08-05T17:55:00.817
> 
> 标签：python, inheritance, field, slots

当我运行这个（2.7.3）时，我得到这个输出：

```
'Slotted1' object has no attribute 'c'
attribute c added to <class '__main__.Slotted2'> 
```

我不明白 Slotted1 和 Slotted2 之间的行为差​​异。谁能解释一下？

```
from ctypes import *

class BracedStructure(Structure):
    def __init__(self, **args):
        super(BracedStructure,self).__init__(**args) 

class Slotted1(Structure):
    __slots__ = ['a','b']
    _fields_ = [('a',c_int8),('b',c_int8)]  
    def __init__(self, **args):
        super(Slotted1,self).__init__(**args)
    def attemptToAddField(self):
        self.c = '?'
        print 'attribute c added to %s' % self.__class__

class Slotted2(BracedStructure):
    __slots__ = ['a','b']
    _fields_ = [('a',c_int8),('b',c_int8)]  
    def __init__(self, **args):
        super(Slotted2,self).__init__(**args)
    def attemptToAddField(self):
        self.c = '?'
        print 'attribute c added to %s' % self.__class__

if '__main__' == __name__:
    s1 = Slotted1(a=1,b=2)
    try:
        s1.attemptToAddField()
    except AttributeError as e:
        print e

    s2 = Slotted2(a=1,b=2)
    try:
        s2.attemptToAddField()
    except AttributeError as e:
        print e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:01:32.487

看看这个：[http ://docs.python.org/reference/datamodel.html#slots](http://docs.python.org/reference/datamodel.html#slots)

> 从没有 的类继承时，该类`__slots__`的`__dict__`属性将始终可访问，因此`__slots__`子类中的定义是没有意义的。

碰巧 BracedStructure 没有`__slots__`，因此它否决了`__slots__`中的声明`Slotted2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:00:57.493

那是因为继承`Slotted2`了. 所以它会接受新的论点，不管`__dict__``BracedStructure``__slots__`

# android - 强制使用 API 14+ 的 getsupport 函数

> ID：11818713
> 
> 赞同：1
> 
> 时间：2012-08-05T17:55:18.437
> 
> 标签：android, android-support-library

我读到 getSupportFragmentManager（和其他 getSupport 函数）是为了 Honeycomb（3.0）下的 Android 版本而创建的。API 11+ 的此类等效函数是 getFragmentManager（以及其他没有 getSupport 的函数）。

我用 minSdkVersion="14" 和 targetSdkVersion="15" 开始了一个新项目。在文件夹库中，我可以看到不应该存在的 android-support-v4.jar，因为最低 SDK 版本是 14。此外，我尝试使用 getFragmentManager 但它根本无法识别（我无法编译）。所以，我别无选择，只能使用 getSupportManagerFragment ...

这是正常的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:42:15.737

如您所述，getFragmentManager() 在 API 级别 11+ 上可用。如果您不需要支持库中的类，则可以从 libs 文件夹中删除 support-v4.jar，并使您的活动扩展 Activity 而不是 FragmentActivity。

如果您不使用支持库，则您的导入不应包含“support.v4.app”。

感谢@Espiandev 的提示，如果您在 Eclipse 中选择“Tab+swipe 应用程序”模板，那么它将自动包含支持库，因为该模板使用仅存在于支持库中的 ViewPager 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:50:57.457

Eclipse 可能会在您创建项目时自动将支持库添加到您的构建路径中，这就是它无法识别`getFragmentManager`. 尽管没有必要，但在`minSdkVersion`大于或等于`11`. 事实上，您甚至可以考虑这样做，因为这将使您以后更容易支持旧设备。

# eclipse-juno - 如何根据选择的 MPart 禁用/启用已处理的工具项？

> ID：11818715
> 
> 赞同：1
> 
> 时间：2012-08-05T17:55:30.233
> 
> 标签：eclipse-juno

我有几个工具项，我想根据用户选择的 MPart 启用/禁用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:05:30.167

您可以将以下代码添加到工具栏项的处理程序中：

```
@CanExecute
public boolean canExecute(@Named(IServiceConstants.ACTIVE_PART) MPart part) {

  // enable item if active part is part with id "my.part.id"
  if ("my.part.id".equals(part.getElementId())) {
    return true;
  }

  // disable item if any other part is active
  return false;
} 
```

@CanExecute 在处理的条目显示在菜单或工具栏中之前被调用。如果一个条目不能被执行，它的状态被设置为“disabled”。在上面的代码中，活动部分被注入，然后可以用来确定处理程序的可执行状态。

# android - 使用现有的 textview 布局参数动态添加 textview

> ID：11818719
> 
> 赞同：0
> 
> 时间：2012-08-05T17:55:59.257
> 
> 标签：android, android-layout, textview

当按下按钮时，我正在尝试从活动中添加 TextView。我发现了如何从活动中添加新的文本视图，但是可以将现有的文本视图参数（在 xml 布局中）复制到新的文本视图，而不是编码所需的布局参数？

我努力了：

```
TextView tv1 = new TextView(this);
TextView tv2 =  (TextView) findViewById(R.id.basetext);;

// its this line below which doesn't work
tv1.setLayoutParams(tv2.getLayoutParams()); 
```

但它不会复制任何布局参数......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:02:03.360

你可以做一件事。

如果您每次都尝试仅设置 Same TextValue 的值，并且该 TextView 的 Layout 属性始终相同，请按照以下步骤操作：

1.  首先使用适当的属性创建仅包含 TextView 布局的 One Layout。（将其命名为 layout_textView.xml）

2.  现在，根据您的要求将该 layout_textView.xml 动态添加到您的主视图中。

它将如何解决您的问题。

如果有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:19:28.163

添加文本视图后是否调用 requestLayout() ？

# asp.net - 来自数据集 asp .net 的下拉列表填充错误

> ID：11818731
> 
> 赞同：0
> 
> 时间：2012-08-05T17:57:59.083
> 
> 标签：asp.net, drop-down-menu, dataset

我在 Dropdownlist 中填充数据集时遇到问题。我想在下拉列表中显示我的数据库表中的用户名列，但只显示最后一行值。我被卡住了，搜索了几个小时后我找不到任何解决方案，每个代码几乎都给了我同样的问题。这是我正在尝试做的事情：

```
Dataset ds = new Dataset();
ds = db.search();

            if(ds.Tables[0].Rows.Count>0)
{
            DropDownList1.DataSource=ds;
            DropDownList1.DataBind();
} 
```

在 ASP 标记中：

```
<asp:DropDownList ID="DropDownList1" runat="server">
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:10:40.630

请设置下拉列表的以下属性，如服务器端代码所示。请将“用户名”和“ID”替换为检索记录集列名称。

```
DropDownList1.DataSource = ds;
DropDownList1.DataTextField = "UserName";
DropDownList1.DataValueField = "ID";
DropDownList1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:44:49.040

```
 Using ds As DataSet = data_readers.data.ExecuteDataSet("LoadSearch", NOTHING)
            If ds.Tables.Count > 0 Then
                If ds.Tables(0).Rows.Count > 0 Then

                    DropDownList1.DataSource = New DataView(ds.Tables("myDataset"))
                    DropDownList1.DataBind

                End If
            End If
  End Using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:53:10.123

您的“ASP 标记”完全是空的！这里看看我的代码，它应该是你源页面的一个很好的例子：

您还需要设置一个对象数据源：我在下拉列表下方提供了该代码。Listitem 值只是我的偏好。在您的情况下，您的列名将替换 TRANS_CD_DESC。

```
<asp:DropDownList ID="ddlTRANS_CD_DESC" DataSourceID="OBJ_TRANS_CD_DESC" DataValueField="TRANS_CD_DESC"
                            DataTextField="TRANS_CD_DESC" AppendDataBoundItems="true" runat="server" Text='<%# bind("TRANS_CD_DESC") %>'>
                            <asp:ListItem Value="">-- Select One --</asp:ListItem>
                        </asp:DropDownList>
                        <asp:ObjectDataSource ID="OBJ_TRANS_CD_DESC" runat="server" TypeName="project1.dbqry"
                            SelectMethod="gProjectCIS"></asp:ObjectDataSource> 
```

# ios - iOS 中是否有高度计 API 和 iDevices 上的相应硬件？

> ID：11818735
> 
> 赞同：0
> 
> 时间：2012-08-05T17:58:50.520
> 
> 标签：ios

我想知道iOS上是否有高度计，如果没有，有没有办法以尽可能高的精度计算高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:00:47.213

iPhone 和支持 3G 的 iPad 中装有 GPS 装置。他们可以使用 GPS 来确定当前高度以及其他位置和速度变量。用于访问此信息的 API 称为 CoreLocation。具体来说，您将使用 CLLocationManager 对象来发送包含“高度”属性的应用程序 CLLocation 对象。

请参阅： [https ://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T18:01:42.390

核心位置有一个`altitude`属性 这里有一个基本[教程](http://www.vellios.com/2010/08/16/core-location-gps-tutorial/)；请注意，它有多个部分。

对于核心位置文档，请在[此处](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)查看 CLLocation 类参考。

# php - 使用 SimpleXML 读取 YouTube XML

> ID：11818737
> 
> 赞同：-2
> 
> 时间：2012-08-05T17:59:10.440
> 
> 标签：php, simplexml, youtube-api

我想使用以下方法从单个 YouTube 视频中读取/检索一些详细信息：

```
$sxml= simplexml_load_file("http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ"); 
```

如何从 XML 文件中读取标签，如标题、描述？我搜索并找到了一些教程，但我找不到显示如何读取特定 XML 数据的教程。任何好的教程链接或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:07:09.947

请参阅本教程：[http](http://www.w3schools.com/php/php_xml_simplexml.asp)
://www.w3schools.com/php/php_xml_simplexml.asp 基本使用将是

```
print $xml->something; 
```

# java - glRotate 更改坐标，以便矩形在旋转的平面上绘制

> ID：11818738
> 
> 赞同：0
> 
> 时间：2012-08-05T17:59:17.057
> 
> 标签：java, android, graphics, opengl-es, matrix

我在这里遇到了一个问题。我设置了一个速度为 x 和 y 的方形射弹，并通过像这样设置顶点位置将实际正方形绘制到该位置。

代码：

```
vertices.put(new float[] { x1, y1, 1, 1, 1, 1, 0.0f, 1.0f,
                     x2, y2, 1, 1, 1, 1, 1.0f, 1.0f,
                     x3, y3, 1, 1, 1, 1, 1.0f, 0.0f,
                     x4, y4, 1, 1, 1, 1, 0.0f, 0.0f });
                 //  x   y   r  g  b  A   u|s  v|t 
```

其中所有的 x 都是我经过的角落的位置。

然后我沿着 x & y 轴移动这个矩形（l2rArrow），并让屏幕跟随它：

```
 boolean hasTranslated = false;
    if (!l2rArrow.isFired) { // if the arrow has not yet been fired we render it thus
        gl.glPushMatrix(); //save our state

            gl.glTranslatef(l2rArrow.GetToOriginX, l2rArrow.GetToOriginY, 0f); // translate to origin 0,0,0
            gl.glRotatef(LBow.getAngle(), 0f, 0f, 1f); //rotate
            gl.glTranslatef(-l2rArrow.GetToOriginX, -l2rArrow.GetToOriginY, 0f); // translate to where we want to draw it

            texture.bind(gl, Texture.TEXTURE_L2RARROW);
            mRect = new MeshRect(l2rArrow.getMyRect());
            mRect.Draw(GL10.GL_TRIANGLES, gl);

        gl.glPopMatrix(); //return to saved state

    } else { // the arrow has been fired so we need to render it like this and have the "camera" follow it

        hasTranslated = true;
        gl.glPushMatrix();
        gl.glLoadIdentity();
            float camX = (float) ((l2rArrow.startX - l2rArrow.PosX));
            float camY = (float) ((l2rArrow.startY - l2rArrow.PosY));
            if (camY > 0) { camY = 0;}
            if (camX < -4800) { camX = -4800;}

            gl.glTranslatef(camX, camY,0f);

                l2rArrow.Update(deltaTime);
                texture.bind(gl, Texture.TEXTURE_L2RARROW);
                mRect = new MeshRect(l2rArrow.getMyRect());
                mRect.Draw(GL10.GL_TRIANGLES, gl);

        if (l2rArrow.hasCollided) {
            //run collision code for detecting a hit and ending turn
        }
    } 
```

这也有效。当射弹发射时，我们将完美地跟随它。现在虽然我希望箭头指向箭头行进的角度。所以我需要将箭头旋转到飞行中。我尝试将此箭头平移回 0,0 旋转它，然后将其放回，但是当我将箭头放回时，它会绘制旋转平面的坐标。

```
 } else {

        hasTranslated = true;
        gl.glPushMatrix();
        gl.glLoadIdentity();
            float camX = (float) ((l2rArrow.startX - l2rArrow.PosX));
            float camY = (float) ((l2rArrow.startY - l2rArrow.PosY));
            if (camY > 0) { camY = 0;}
            if (camX < -4800) { camX = -4800;}

            gl.glTranslatef(camX, camY,0f);

            gl.glPushMatrix();  

                gl.glTranslatef(l2rArrow.GetToOriginX, l2rArrow.GetToOriginY, 0f); // translate to origin 0,0,0
                gl.glRotatef((float) l2rArrow.getAngle(), 0f, 0f, 1f); //rotate
                gl.glTranslatef(-l2rArrow.GetToOriginX, -l2rArrow.GetToOriginY, 0f);

                l2rArrow.Update(deltaTime);
                texture.bind(gl, Texture.TEXTURE_L2RARROW);
                mRect = new MeshRect(l2rArrow.getMyRect());
                mRect.Draw(GL10.GL_TRIANGLES, gl);

            gl.glPopMatrix();

        if (l2rArrow.hasCollided) {
            //run collision code for detecting a hit and ending turn
        }
    } 
```

我明白这一点。如何旋转箭头，然后将其移回非旋转平面上的位置？

当涉及到 Y=0 时，箭头停止，并且截至目前，Y=0 以旋转角度运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:58:27.983

经过大量研究和深思熟虑，我决定改变我在世界中放置对象的方式。我现在使用似乎是正常的方法，将它们glTranslate 到位。

现在一切正常。

显然我之前的做法被搞砸了，因为将顶点直接绘制到你想要的空间中（而不是在原点绘制它然后翻译它）会变得非常混乱。

# android - 计算手机角度（Android）

> ID：11818753
> 
> 赞同：6
> 
> 时间：2012-08-05T18:00:27.740
> 
> 标签：android, accelerometer

我知道以前有人问过这个问题，但我还没有找到我正在寻找的答案。

我想做的就是把手机举到天空中，并知道我拿着它相对于地平线的角度。因此，如果我将它直接放在我的上方（屏幕面向地面），那么它的读数应该是 90 度，如果我把它放在我面前（屏幕面对我），它的读数应该是 0 度。

我摸索了一些从加速度计获取数据的基础知识，我相信我从中得到了 X、Y 和 Y 值。我怎样才能抓住这些点并找到我的角度？下面是我从中收集坐标的 OnSensorChanged 事件。

```
 public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
   mGravity = event.values;
if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
   mGeomagnetic = event.values;
if (mGravity != null && mGeomagnetic != null) {
   float R[] = new float[9];
   float I[] = new float[9];

  boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);
   if (success) {
       float orientation[] = new float[3];
       SensorManager.getOrientation(R, orientation);
       playerAngle = (float) Math.toDegrees(Math.atan2(orientation[1], orientation[0]));

    } 
```

# android - 无法在 android 2.2 上打开图库

> ID：11818755
> 
> 赞同：0
> 
> 时间：2012-08-05T18:00:32.767
> 
> 标签：android, android-intent, gallery, image

我做了两个按钮。一个打开相机，一个打开画廊。相机一个工作正常，但画廊一个没有......它打开但是当我从画廊中选择一张图片时，应用程序意外关闭。

```
package com.example.me;

import android.os.Bundle;
import java.io.IOException;
import java.io.InputStream;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;

public class MainActivity extends Activity implements View.OnClickListener{

Button b;
ImageView iv;
Intent i;
final static int cameraData = 0;
Bitmap bmp;
private static final int SELECT_IMAGE = 1;
Button clickk;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initialize();
    InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
    bmp = BitmapFactory.decodeStream(is);
}

private void initialize() {
    // TODO Auto-generated method stub
    iv = (ImageView) findViewById (R.id.imageView1);
    b = (Button) findViewById (R.id.btakePic);
    clickk = (Button) findViewById (R.id.bChose);
    b.setOnClickListener(this);
    clickk.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){

    case R.id.btakePic:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, cameraData);
        break;
    case R.id.bChose:
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);//
        startActivityForResult(Intent.createChooser(intent, "Select  Picture"),SELECT_IMAGE);
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK){
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
    }

}
} 
```

以下是日志：

```
08-05 11:30:19.455: E/ActivityThread(5576): Activity           com.android.internal.app.ChooserActivity has leaked IntentReceiver   com.android.internal.app.ResolverActivity$1@412fd3e0 that was originally registered here.  Are you missing a call to unregisterReceiver()?
08-05 11:30:19.455: E/ActivityThread(5576): android.app.IntentReceiverLeaked: Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@412fd3e0 that was originally registered here. Are you missing a call to unregisterReceiver()?
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1099)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1086)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1080)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:348)
08-05 11:30:19.455: E/ActivityThread(5576):     at com.android.internal.content.PackageMonitor.register(PackageMonitor.java:65)
08-05 11:30:19.455: E/ActivityThread(5576):     at    com.android.internal.app.ResolverActivity.onCreate(ResolverActivity.java:101)
08-05 11:30:19.455: E/ActivityThread(5576):     at    com.android.internal.app.ChooserActivity.onCreate(ChooserActivity.java:53)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.Activity.performCreate(Activity.java:4465)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.os.Looper.loop(Looper.java:137)
08-05 11:30:19.455: E/ActivityThread(5576):     at android.app.ActivityThread.main(ActivityThread.java:4514)
08-05 11:30:19.455: E/ActivityThread(5576):     at java.lang.reflect.Method.invokeNative(Native Method)
08-05 11:30:19.455: E/ActivityThread(5576):     at java.lang.reflect.Method.invoke(Method.java:511)
08-05 11:30:19.455: E/ActivityThread(5576):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-05 11:30:19.455: E/ActivityThread(5576):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-05 11:30:19.455: E/ActivityThread(5576):     at dalvik.system.NativeStart.main(Native Method)
08-05 11:30:19.471: D/OpenGLRenderer(5576): Flushing caches (mode 1)
08-05 11:30:42.932: D/AndroidRuntime(5576): Shutting down VM
08-05 11:30:42.932: W/dalvikvm(5576): threadid=1: thread exiting with uncaught exception   (group=0x40be41f8)
08-05 11:30:42.932: E/AndroidRuntime(5576): FATAL EXCEPTION: main
08-05 11:30:42.932: E/AndroidRuntime(5576): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/774 }} to activity {com.example.me/com.example.me.MainActivity}: java.lang.NullPointerException
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2994)
08-05 11:30:42.932: E/AndroidRuntime(5576):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3037)
08-05 11:30:42.932: E/AndroidRuntime(5576):     at android.app.ActivityThread.access$1100(ActivityThread.java:128)
08-05 11:30:42.932: E/AndroidRuntime(5576):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1191)
08-05 11:30:42.932: E/AndroidRuntime(5576):     at android.os.Handler.dispatchMessage(Handler.java:99)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at android.os.Looper.loop(Looper.java:137)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at android.app.ActivityThread.main(ActivityThread.java:4514)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at java.lang.reflect.Method.invokeNative(Native Method)
  08-05 11:30:42.932: E/AndroidRuntime(5576):   at java.lang.reflect.Method.invoke(Method.java:511)
  08-05 11:30:42.932: E/AndroidRuntime(5576):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at dalvik.system.NativeStart.main(Native Method)
  08-05 11:30:42.932: E/AndroidRuntime(5576): Caused by: java.lang.NullPointerException
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at com.example.me.MainActivity.onActivityResult(MainActivity.java:72)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at android.app.Activity.dispatchActivityResult(Activity.java:4649)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2990)
 08-05 11:30:42.932: E/AndroidRuntime(5576):    ... 11 more 
```

这就是我现在所拥有的。它仍然不起作用。我猜我应该在相机结果和图库结果之间添加一些东西？

```
 @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     // TODO Auto-generated method stub
     super.onActivityResult(requestCode, resultCode, data);
     if (resultCode == RESULT_OK){
         Bundle extras = data.getExtras();
         bmp = (Bitmap) extras.get("data");
         iv.setImageBitmap(bmp);
         if (requestCode == SELECT_IMAGE) {
            if(resultCode == RESULT_OK){  
                Uri selectedImage = data.getData();
                String[] filePathColumn = {MediaStore.Images.Media.DATA};

                Cursor cursor = getContentResolver().query(selectedImage,   filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                cursor.close();
                Log.i(myTag, filePath); 
                File imgFile = new File(filePath);
                //Get your image out of the file
                //do with it what you will.
                Bundle extras1 = data.getExtras();
                bmp = (Bitmap) extras1.get("data");
                iv.setImageBitmap(bmp); 
```

我的标签也应该是一个字符串吗？

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == cameraData)
    if (resultCode == RESULT_OK)   {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);

        if (requestCode == SELECT_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            ImageView imageView = (ImageView)   findViewById(R.id.imageView1);
               imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:16:12.730

您需要以与 onActivityResult() 中的相机不同的方式处理图库。这是一个粗略的示例，说明您需要执行哪些操作来处理从图库案例中选择的图像。

```
if (requestCode == SELECT_IMAGE) {
    if(resultCode == RESULT_OK){  
        Uri selectedImage = data.getData();
        String[] filePathColumn = {MediaStore.Images.Media.DATA};

        Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String filePath = cursor.getString(columnIndex);
        cursor.close();
        Log.i(myTag, filePath); 
        File imgFile = new File(filePath);
        //Get your image out of the file
        //do with it what you will.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:19:21.263

试试这个代码......

```
 yourGalleryButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                 Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
                                 photoPickerIntent.setType("image/*");
                                startActivityForResult(photoPickerIntent, 1);
            }
        });

     protected void onActivityResult(int requestCode, int resultcode, Intent intent)
      {
          super.onActivityResult(requestCode, resultcode, intent);

          if (requestCode == 1)
          {
              if (intent != null && resultcode == RESULT_OK)
              {             

                    Uri selectedImage = intent.getData();

                    String[] filePathColumn = {MediaStore.Images.Media.DATA};
                    Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
                    cursor.moveToFirst();
                    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                    String filePath = cursor.getString(columnIndex);
                    cursor.close();

                    if(bmp != null && !bmp.isRecycled())
                    {
                        bmp = null;               
                    }

                    bmp = BitmapFactory.decodeFile(filePath);

              }
              else
              {
                  Log.d("Status:", "Photopicker canceled");           
              }
          }
      }
    } 
```

这是简单的代码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:59:47.910

这是有效的代码。我将把--------放在我移动的支架上，以使活动正常进行。下面有 3 个刹车，我只向上移动了一个。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == cameraData)
    if (resultCode == RESULT_OK)   {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
    -----}

        if (requestCode == SELECT_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            ImageView imageView = (ImageView) findViewById(R.id.imageView1);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

            }

    } 
```

# gmail - 电子邮件提供商是否允许“后门”连接到他们的邮件服务器？

> ID：11818756
> 
> 赞同：0
> 
> 时间：2012-08-05T18:00:35.447
> 
> 标签：gmail, email

我想编写一个整合/聚合多个电子邮件帐户（例如 att.net 和 gmail）的应用程序，以便用户可以体验他们所有邮件或至少所有个人电子邮件的“一站式购物”（我认为不可能（甚至可能是非法的）包含工作邮件，例如可能位于公司墙后的 Outlook）。

然而，在我开始之前，我需要知道这是否可能用于个人电子邮件，IOW：对于电子邮件提供商（如 gmail、hotmail、att.net/yahoo 等）来说，这是必要的“连接字符串”。“公共知识”？

显然，用户需要输入他们的用户名和密码，但是要连接到适当的邮件服务器 - 我可以依赖它是持久的和“开放”的访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:10:19.607

所有电子邮件提供商都提供标准 Internet 协议来访问他们的电子邮件。

大多数是 POP3，许多是 IMAP。Gmail 提供这两种服务，大多数提供商也是如此。

POP3 协议规范： http: [//www.faqs.org/rfcs/rfc1939.html#b](http://www.faqs.org/rfcs/rfc1939.html#b) IMAP 协议规范： http: [//www.faqs.org/rfcs/rfc3501.html#b](http://www.faqs.org/rfcs/rfc3501.html#b)

Microsoft 的 ActiveSync (EAS)，由许多主要供应商实施，大多数（所有？）手机是专有协议，需要 Microsoft 的许可才能实施： http: [//www.microsoft.com/about/legal/en /us/intellectualproperty/iplicensing/programs/exchangeactivesyncprotocol.aspx](http://www.microsoft.com/about/legal/en/us/intellectualproperty/iplicensing/programs/exchangeactivesyncprotocol.aspx)

大多数公司允许来自外部客户端的 ActiveSync 访问，但允许 POP3 的不多，有些允许 IMAP。

# c++ - 如何在 C++ 中对三元组进行排序？

> ID：11818757
> 
> 赞同：2
> 
> 时间：2012-08-05T18:00:34.840
> 
> 标签：c++, sorting, stl

我想知道如何使用 C++ 根据第一列对下面的三元组进行排序？我可以使用 std::map 吗？

```
0 0 1
1 2 0
2 0 3
0 1 4 
```

想要的结果是

```
0 0 1
0 1 4
1 2 0
2 0 3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T18:03:27.120

例如，您可以仅在 std::tuple 的向量上使用 std::sort - 默认比较是字典顺序的，因此第一列最重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-05T18:04:28.493

假设您正在排序`std::vector<std::vector<int>>`

C++11：

```
std::sort(begin(vec), end(vec), [](const std::vector<int>& a,
                                   const std::vector<int>& b){
  return a[0] < b[0]; // sorting on the first column only
}); 
```

假设您想要词汇顺序：

```
std::sort(begin(vec), end(vec)); 
```

# payment-gateway - 有没有在支付服务中使用 Facebook 积分的替代方法？

> ID：11818758
> 
> 赞同：0
> 
> 时间：2012-08-05T18:00:39.257
> 
> 标签：payment-gateway, payment, facebook-credits, credits

有没有办法在不使用 Facebook 积分的情况下在 Facebook 应用程序中实施支付服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:39:28.227

如果您指的是狭义的 Facebook 应用程序（在 facebook.com 上运行的应用程序），那么答案是肯定的。

除此之外，如果您指的是具有某种 Facebook 集成的应用程序（在其他平台或网站上），那么您可以在那里使用其他支付系统。

# java - 使用 jnetpcap 删除重复的数据包

> ID：11818762
> 
> 赞同：2
> 
> 时间：2012-08-05T18:00:57.103
> 
> 标签：java, networking, packet-capture, packet-sniffers, jnetpcap

我有一个使用 jnetpcap 库分析 .pcap 文件的 Java 应用程序。我需要删除所有重复的、重传的和乱序的数据包。有什么办法可以使用 jnetpcap 库来做到这一点？至少要删除重复的数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:04:40.857

您可以使用序列号并检查它是否重复。如果现在序列号小于或等于最后一个有效序列号，您可以删除它。您可以使用`seq()`函数获取序列号。

```
Tcp tcp = new Tcp();
tcp.seq(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T19:16:21.213

注意：jnetpcap 库当前不支持 TCP 重组，这是执行您请求的复杂功能所必需的。然而，通过匹配可以相对容易地完成其中的一些或全部。

将请求与响应匹配并删除重复项

请求的源端口将匹配响应的目标端口。请求的 ack 将匹配响应的 seq。这应该有助于将一个请求与一个响应相匹配。

现在重新传输（又名重复）......

重传请求将具有与其对应的相同信息。相同的 src、dst、ack 和 seq 编号。

如果您与我联系，我对 pcap 文件和数据包了解更多。

# c++ - 创建 DLL 导出对象时出现 Stackoverflow 错误

> ID：11818768
> 
> 赞同：1
> 
> 时间：2012-08-05T18:01:24.500
> 
> 标签：c++, dll, dllimport, dllexport

首先我为任何错误道歉，英语不是我的母语。

这是我的问题：我编写了一个导出从 CSocket 派生的类的 DLL，除了隐式加载 DLL 的客户端必须按如下方式实例化对象之外，一切工作正常：

```
// Inside client constructor (client class scope object pointer)
CMyClass *m_lpMyObj = new MyClass; 
```

但是如果对象是这样实例化的：

```
// Inside the client class header file (client class scope object)
CMyClass m_myObj; 
```

当我运行客户端时，我收到错误：

```
Unhandled exception at 0x775015de in MyApp.exe: 0xC00000FD: Stack overflow. 
```

如果在我写的客户端方法中，同样的问题：

```
// Inside a client method (local object)
CMyClass myobj; 
```

唯一的区别是当我调用该方法时（当然）会发生错误。

这里有一些类的细节：

```
// _AFXEXT defined for DLL project

#ifdef __cplusplus
extern "C" {
#endif

class CMyClass : public CSocket
{
  DECLARE_DYNCREATE(CModbusConnector)

public:
  AFX_EXT_CLASS CMyClass();  // Only some methods are exported
  AFX_EXT_CLASS virtual ~CMyClass();

  ....
};

#ifdef __cplusplus
}
#endif 
```

DLL 是 CWinApp 派生的对象（常规 DLL），我将 DLL 编译为扩展 DLL，结果相同。

提前致谢。

问候，

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:21:41.303

我认为正在发生的事情`DECLARE_DYNCREATE`是针对一个在运行时计算大小的对象。

当你说：

```
CMyClass *m_lpMyObj = new MyClass; 
```

它确实可以为实例分配所需的内存，但是当你说：

```
CMyClass m_myObj; 
```

它在编译时没有真正的大小，只有“存根”的大小，所以当它尝试使用对象时，它正在写入超出分配空间的末尾。

# php - 将 WordPress 从本地服务器迁移到主机时遇到问题

> ID：11818770
> 
> 赞同：1
> 
> 时间：2012-08-05T18:01:37.807
> 
> 标签：php, sql, wordpress, import

我在将我一直在处理的 Wordpress 站点从本地计算机迁移到主机时遇到问题。

我已经阅读了文档，据我所知，我必须：

1.  从我的本地服务器导出 wordpress 数据库。
2.  编辑 wp-config.php 文件以适合我的目标服务器。
3.  更改设置中的 URL 以适合我的目标服务器。
4.  在我的目标服务器上导入数据库并将调整后的 wordpress 安装移动到我的目标服务器上。

我可以做到所有这些，但我似乎有一些问题：在我的主机 phpmyadmin 中，我无法查看或编辑任何用户，也无法创建任何数据库（没有选项）。当我尝试导入数据库时​​出现错误：#1046 - 未选择数据库。

我不知道/做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:04:46.130

如果导入数据库，您需要先创建一个同名的数据库，然后选择它，然后将现有数据库导入到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:07:19.857

> 我可以做到所有这些，但我似乎有一些问题：在我的主机 phpmyadmin 中，我无法查看或编辑任何用户，也无法创建任何数据库（没有选项）。

如果您通过 CPanel，您将无法直接通过 PHPMyadmin 添加数据库。你应该去你的主机的主页并寻找一些创建数据库的向导。（它应该在 PHPMyadmin 链接旁边。

或者，对于移动 wordpress，您可以在实时站点上安装 wordpress，然后通过 Wordpress 的仪表板[导出本地主机内容，然后将其](http://codex.wordpress.org/Tools_Export_Screen)[导入](http://codex.wordpress.org/Importing_Content)实时站点。

这篇关于[移动 Wordpress](http://codex.wordpress.org/Moving_WordPress)的文章也会有所帮助。

# c# - 使用来自另一个数据表的数据组合一个数据表中的数据

> ID：11818773
> 
> 赞同：0
> 
> 时间：2012-08-05T18:01:52.530
> 
> 标签：c#, loops, datagridview

我所拥有的基本概念是有两个数据网格。一个填充了我想要作为基线的材料类型和数量。该表具有独特的材料类型。第二个表可能有多个具有不同数量的相同类型材料的条目。

```
Table 1                  Table 2    
F01 20/40  150           F01 20/40     40
F01 30/50  150           F01 20/40     50
F01 50/90  150           F01 20/40     100
F01 70/110 150           F01 30/50     60 
```

由于表 1 中的每种材料类型都是唯一的，因此我将获取每一行（单元格索引 [0]）并循环遍历第二列中的每一行，并将每种匹配材料类型的数量相加。

我被卡住了一段时间，为什么我的循环在成功计算出第一种材料类型后不断中断。这是我的代码：

```
private void combineButton_Click(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();
        DataRow dtrow;
        dt.Columns.Add("Material");
        dt.Columns.Add("OnHand_Qty");
        int x = 0;
        foreach (DataGridViewRow row in baseStockGrid.Rows)
        {
            string material = row.Cells[0].Value.ToString();
            foreach (DataGridViewRow crow in currentOnHandGrid.Rows)
            {
                string check = crow.Cells[0].Value.ToString();
                if (check == material)
                {
                    var y = crow.Cells[1].Value.ToString();
                    x = int.Parse(y) + x;
                }
                if (check != material)
                {
                    continue;
                }
            }
            dtrow = dt.NewRow();
            dtrow[0] = material.ToString();
            dtrow[1] = x;
            dt.Rows.Add(dtrow);
            x = 0;
            currentOnHandGrid.DataSource = dt;
        }
    } 
```

我基本上刷新数据网格以显示组合材料计数，它显示如下：

```
Table1                 Table2
F01 20/40   150        F01 20/40   190
F01 30/50   150        F01 30/50   0  //<---- Should show 60 according to example above. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:16:39.460

您似乎正在覆盖自己的数据源。在代码的开头，您将 a 声明`DataTable dt`为新表并将其设置为存储刷新的数据。在您为您的第一种材料类型提取适当的数据`currentOnHandGrid`并将其存储在表中之后，您用`dt`覆盖。现在，您有一个表格，其中填写了您的第一个材料，没有包含其他材料。当您转到外循环中的下一个材料时，内循环尝试在表中查找该材料，但它不存在，因为您已用新表覆盖了原始表。`currentOnHandGrid``dt`

只需将您用新表覆盖旧表的部分移动到循环外部，它应该可以正确写入。

**编辑：**另外，正如其他回答者指出的那样，您不需要该`Continue`声明。此外，有一个 if 语句来检查条件和另一个 if 语句来检查补语是不好的形式。第二个 if 语句实际上应该是一个 else 语句，因为它是一个布尔语句。“*如果*是这个，那就做这个，*否则*就做那个。” 您甚至也不需要带有`continue`内部的 else 语句。如果第一个 if 语句失败，程序无论如何都应该继续。

# android - 制作 Androidplot 图表以显示图表上每个关键点的值

> ID：11818774
> 
> 赞同：1
> 
> 时间：2012-08-05T18:02:06.240
> 
> 标签：android, androidplot

我正在尝试使 androidplot 图表显示带有图表上每个关键点的相应值的微小文本，但我完全不知道如何实现这一点。

关键点是指此文件中带有圆圈的圆点轮廓[https://dl.dropbox.com/u/9443658/varia/Timeseries.png](https://dl.dropbox.com/u/9443658/varia/Timeseries.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T17:21:15.450

仅供参考，从 0.5.1 版开始，此功能可通过 LineAndPointFormatter 获得。如果与点标签关联的绘制参数不为空或不透明，您将看到在每个点上方打印的值。

这是包含详细信息[的博客文章的链接](http://androidplot.com/point-labeling-tools-in-0-5-1/)。

# sql-server - 将表 dbo.sysschedules 调度到单个记录

> ID：11818776
> 
> 赞同：1
> 
> 时间：2012-08-05T18:02:16.373
> 
> 标签：sql-server, scheduled-tasks, sql-server-agent

我正在寻找一个查询，以将 dbo.sysschedules 表中的记录转换为计划运行的每个场合的单独记录。

例如，计划设置为在 2012 年 8 月每天运行一次。查询将产生一个包含 31 条记录的结果。

上面是一个非常简单的示例，尽管我正在寻找查询以涵盖创建计划时可能发生的所有场景。

是否已经存在查询或存储过程，这是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:16:02.467

在寻找答案时，我发现了以下博客文章：

[http://weblogs.sqlteam.com/peterl/archive/2008/10/10/Keep-track-of-all-your-jobs-schedules.aspx](http://weblogs.sqlteam.com/peterl/archive/2008/10/10/Keep-track-of-all-your-jobs-schedules.aspx)

# android - 每个活动转换上的稳定标签栏

> ID：11818779
> 
> 赞同：1
> 
> 时间：2012-08-05T18:02:33.470
> 
> 标签：android, android-layout

我正在开发一个应用程序，我在屏幕的顶部和底部都有标签栏。这些标签栏包含在每个布局的包含标签中，因此它们每次都会出现。但是当新活动开始时，我的标签栏也会因为活动之间的过渡动​​画而移动。我希望它们稳定。我该怎么做呢。谢谢求建议。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:07:31.740

您首先可能必须禁用活动的默认动画。这应该会有所帮助：[在启动新活动时禁用活动滑入动画？](https://stackoverflow.com/questions/2286315/disable-activity-slide-in-animation-when-launching-new-activity)

然后使用视图动画在已启动活动的 onCreate() 中将您想要的动画应用到（非选项卡）视图。这可能是一个好的开始：http: [//developer.android.com/guide/topics/graphics/view-animation.html](http://developer.android.com/guide/topics/graphics/view-animation.html)

# sockets - Wireshark和数据长度

> ID：11818780
> 
> 赞同：1
> 
> 时间：2012-08-05T18:02:35.483
> 
> 标签：sockets, networking, tcp, wireshark

我使用了wireshark，根据我们的协议，我们在有效负载中发送和接收5个字节，即使wireshark说接收到5个字节，但显示：0000010001：10位。

我怎么读的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:32:22.967

它是[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)的- 每两个数字对应一个字节。

# c# - 项目visual studio 2010中的文件列表

> ID：11818781
> 
> 赞同：3
> 
> 时间：2012-08-05T18:03:22.700
> 
> 标签：c#, visual-studio-2010, visual-studio-sdk

我正在使用 Visual Studio 2010 SDK，开发一个扩展。我正在尝试获取项目中所有文件的列表，但是目前我无法获取过滤器中的文件列表。我可以看到返回的只是过滤器名称，以及该过滤器中的文件数。

我目前正在使用[ProjectItem](http://msdn.microsoft.com/en-us/library/envdte.projectitem)接口，特别是[FileNames](http://msdn.microsoft.com/en-us/library/envdte.projectitem.filenames)属性。但是，在他们的文档中，他们说：

> 当项目项的 ProjectItems 属性有值，并且 ProjectItem 对象表示磁盘上的过滤器文件夹时，FileNames 属性仅返回过滤器文件夹的名称。

是否有另一种方法可以用来列出过滤器中的文件，还是我以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:50:12.203

所以，我已经在这方面取得了足够的进展，可以继续。我只需要在 Visual C++ 项目中使用此扩展，因此我能够使用[VCProject 接口](http://msdn.microsoft.com/en-us/library/ms169441)获取项目列表，并使用[VCProject Files](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vcproject.files)属性从项目中获取文件列表。像这样的东西

```
 VCProject prj;
        int count = _applicationObject.Solution.Projects.Count;
        for(int i = 1; i <= count; i++ )
        {
            //Start counting at one for some reason
            prj = (Microsoft.VisualStudio.VCProjectEngine.VCProject)_applicationObject.Solution.Projects.Item(i).Object;

            foreach (VCFile item in prj.Files)
            {
                //Item is the file, do whatever you want with it here
            }
        } 
```

我仍然想知道是否有办法为所有项目（不仅仅是 VisualC++）做到这一点。

# java - 在liferay中使用ajax

> ID：11818782
> 
> 赞同：1
> 
> 时间：2012-08-05T18:03:23.947
> 
> 标签：java, javascript, ajax, liferay

我有一个带有按钮的portlet。当单击此按钮时，我向项目中的一个控制器发送了一个 ajax 请求，并在正常情况下返回结果，我是这样做的：

***网页.xml***：

```
<servlet>
    <servlet-name>ctrl</servlet-name>
    <servlet-class>controller.Translator_ctrl</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ctrl</servlet-name>
    <url-pattern>/translate</url-pattern>
</servlet-mapping> 
```

***视图.jsp***：

```
function send_form(){
            var xhr=new XMLHttpRequest();
            var base;
            var from=document.getElementById("from").value;
            var to=document.getElementById("to").value;
            var lang_from=document.getElementById("lang_from").value;
            var lang_to=document.getElementById("lang_to").value;
            //alert(":D:D:D"+from+"::::"+to+":::"+lang_from+":::"+lang_to);
            xhr.onreadystatechange=function (){
                if(xhr.readyState==4){
                    base=xhr.responseText;
                    //document.getElementById("to").value=base;
                    alert(base);
                }
            }
            xhr.open("GET","translate?mode=ajax&from="+from+"&to="+to+"&lang_from="+lang_from+"&lang_to="+lang_to,true);
            xhr.send();
        } 
```

现在我不知道如何在Liferay 中做到这一点？我如何在 Liferay 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:06:01.160

利用“资源”生命周期，正是为了这个目的。您将发送请求并`serveResource`在您的 portlet 中实现该方法（使用您使用的任何实现/框架）。那里的代码与您在不使用门户环境时在 servlet 中的代码基本相同

# ruby-on-rails - Rails has_one 嵌套属性，关联不匹配错误

> ID：11818783
> 
> 赞同：0
> 
> 时间：2012-08-05T18:03:23.793
> 
> 标签：ruby-on-rails, ruby, geolocation, ruby-on-rails-3.2, nested-attributes

我正在使用 Rails 3.2 和 Ruby 1.9.3

这是应用程序的外观：

模型

```
Class Location 
belongs_to :answer
attr_accessible :latitude, :longitude, :answer_id
end

Class Answer
attr_accessible :location
has_one :location
accepts_nested_attributes_for :location
end 
```

控制器

```
def answer
   @answer = Answer.new
   @location = @answer.build_location  
end 
```

看法

```
<%= f.fields_for :location do |locator| %>
    <%= locator.hidden_field :longitude, class:'longitude' %>
    <%= locator.hidden_field :latitude, class:'latitude' %>
 <% end %> 
```

发送的哈希（在日志中可见）：

```
"answer"=>{"location"=>{"longitude"=>"2.3422566", "latitude"=>"48.8198344"}, "commit"=>"Send"} 
```

错误：ActiveRecord::AssociationTypeMismatch

有人可以帮我找出问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:46:51.827

这应该是：

"answer"=>{"location_attributes"=>{"longitude"=>"2.3422566", "latitude"=>"48.8198344"}, "commit"=>"Send"}

# php - 使用 cakephp 将整数添加到 mysql 字段

> ID：11818785
> 
> 赞同：1
> 
> 时间：2012-08-05T18:03:32.563
> 
> 标签：php, mysql, cakephp

> **可能重复：**
> [按值递增 Cakephp 数据库字段](https://stackoverflow.com/questions/8689203/incrementing-cakephp-database-field-by-a-value)

我想将一个整数添加到我的数据库中的现有 int （不是另一列，实际上是在数学上将一个数字添加到现有值）。

说我有一个表格条目

```
id | Entry | total 
```

如果我想在特定条目的总数中加 1，我可以这样做吗？

```
$this->Entry->find($id);
$this->Entry->saveField('total' + 1, true); 
```

我也尝试将其添加到 EntriesController 中的函数中，但它不起作用

```
$this->Entry->updateAll(array('Entry.total'=>'Entry.total+1'),array('Entry.id' => $id)); 
```

这是我尝试执行此操作的另一种方法

```
//in the controller
$this->Entry->increaseOne($id);

//function in the model called by the controller
public function increaseOne($id){
    $this->Entry->updateAll(array('Entry.total'=>'Entry.total+1'),array('Entry.id' => $id));
} 
```

**编辑 - 我让它工作**

# c# - 无法直接修改 ID 为“UpdatePanel1”的 UpdatePanel 的 Controls 属性

> ID：11818786
> 
> 赞同：3
> 
> 时间：2012-08-05T18:03:34.623
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

```
popup pn = new popup();
       pn.Title = "New Message";
       pn.Message = "New Study Received";
       pn.ColorStyle = popupColorStyle.Green;
       UpdatePanel1.Controls.Add(pn); 
```

popup 是我的自定义控件，它显示一个弹出窗口，UpdatePanel1 是一个 ajax 控件。我想在不重新加载整个页面的情况下显示弹出窗口。最后一行向我抛出一个错误，因为“不能直接修改 ID 为‘UpdatePanel1’的 UpdatePanel 的 Controls 属性。要更改 UpdatePanel 的内容，请修改 ContentTemplateContainer 属性的子控件。” 我正在使用 ASP.NET 3.5 ... 谁能知道这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T18:09:57.000

错误消息准确地告诉您出了什么问题以及如何解决它。而不是将控件添加到Controls中，您需要将其添加到ContentTemplateContainer.Controls中，即

```
UpdatePanel1.ContentTemplateContainer.Controls.Add(pn); 
```

从[MSDN 文档：](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.contenttemplatecontainer.aspx)

> ContentTemplateContainer 属性使您能够以编程方式将子控件添加到 UpdatePanel 控件，而无需定义从 ITemplate 接口继承的自定义模板。

# facebook - 有没有办法获取用户未订阅好友的数量？

> ID：11818793
> 
> 赞同：0
> 
> 时间：2012-08-05T18:04:14.703
> 
> 标签：facebook, subscription

这就是我需要的，让用户（当然有访问令牌）取消订阅的朋友？我会很高兴得到一个包含所有用户的数组，但是一个简单的计数就可以完成这项工作。

我在这里看到Facebook原生提供了这个选项：在主页，Newsfeed选项有一个编辑按钮，在那里你可以看到取消订阅的朋友的数量，不是在API中吗？

我们可以通过转到“新闻提要”>“编辑设置”在前端访问此设置，然后我们会得到“隐藏帖子”以及列表和计数。我可以通过 API 访问这些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:23:17.097

您可以通过访问“user_subscriptions”和“friends”、使用访问令牌并从“friends”结果中删除“user_subscriptions”结果来完成此操作，这样您就剩下未订阅的朋友了。

我不认为 facebook 提供了一个参数来自己获取未订阅的朋友。

# database - 锁定数据库中的事务

> ID：11818794
> 
> 赞同：0
> 
> 时间：2012-08-05T18:04:17.130
> 
> 标签：database, concurrency

我想知道被另一笔交易阻止的交易会发生什么？

最好通过一个示例来处理，假设我有两个事务 - T1 和 T2 以及以下场景：

T1 .................................................. ....... T2

锁定 DB 对象
读取 Q ............................................. .....锁Q（T2被挡）

写Q 解锁Q

那么 T2 是在 T1 完成后解除阻塞还是永远丢失？我曾经认为 T2 被发送到等待队列并在那里等待轮到它。

谢谢任何愿意向我澄清这个概念的人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:14:44.073

在这种情况下会发生两件常见的事情：

1.  T2 一直等到 T1 释放锁。这是如何实现的取决于数据库软件（可能还有操作系统提供的锁定原语）。
2.  当 T2 尝试锁定 Q 并发现它已被锁定时，它会中止。（例如，对于 Oracle，与选项一起发布的`UPDATE`or`LOCK TABLE`声明`NOWAIT`。）

让 T2 “永远丢失”将是数据库引擎中的一个错误。

关于 Oracle 锁定策略的有趣读物：[Oracle 如何锁定数据](http://docs.oracle.com/cd/B10500_01/server.920/a96524/c21cnsis.htm#2841)。（如果您正在研究这些数据库方面，那么整章*数据并发和一致性*会很有趣。请注意，这些细节*高度*依赖于数据库。您在那里阅读的内容不会直接适用于 SQL Server、DB2 或 MySQL。）

# python-3.x - 检查字符串是否满足模式

> ID：11818795
> 
> 赞同：-1
> 
> 时间：2012-08-05T18:04:23.063
> 
> 标签：python-3.x, python-2.6

我开始学习 Python，但我遇到了正则表达式和 python 的问题。

我想检查单词前缀是否为“aa”和后缀“bb”。但我只能检查前缀。你能写一些简单的正则表达式来检查前缀和后缀是否满足。

```
bool(re.match(regexp, word)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:05:56.947

你可以在没有正则表达式的情况下做到这一点：

```
word.startswith("aa") and word.endswith("bb") 
```

或使用正则表达式：

```
bool(re.match("^aa.+bb$", word)) 
```

# .net - 面向对象编程，如何操作数据

> ID：11818796
> 
> 赞同：2
> 
> 时间：2012-08-05T18:04:23.447
> 
> 标签：.net, oop

我正在构建.net 应用程序，使用 nhibernate 将数据映射到实体。我还是面向对象编程的新手，现在我有这个问题：

我有诸如客户、订单、产品等实体。我可以通过休眠从数据库中的数据中获取对象并列出客户等。但是如果我想列出客户的订单总额怎么办？这些不是客户实体的数据，也不是订单实体的数据。如何获取和列出这样的组合数据？他们应该有自己的数据传输对象还是这里有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:08:36.597

有一个额外的实体 ，`CustomerList`它将**容纳**该`Customer`对象。

将`CustomerList`有一个根据订单总数对列表进行排序的方法，这将通过访问每个成员的订单总数并进行比较来完成。

在 PHP 中，我会这样做（这只是一个示例，在实际代码中，您可能需要考虑其他事情）。

```
<?php

/**
 * Describe a single customer object
 */
class Customer {

    /** @var Order[] List of orders */
    private $orders = array();

    /**
     * Add an order to the order list.
     *
     * @param Order $order
     */
    public function addOrder(Order $order) {
        if (!in_array($order, $this->orders, true)) {
            $this->orders[] = $order;
        }
    }

    /**
     * Get an order by numeric index.
     *
     * @param int $index
     *
     * @return Order
     */
    public function getOrder($index) {
        return $this->orders[$index];
    }

    /**
     * Get total number of orders for customer.
     *
     * @return int
     */
    public function getOrdersTotal() {
        return count($this->orders);
    }
}

/**
 * Describe a single order.
 * I didn't include any information here because it's not relevant.
 */
class Order {

}

/**
 * Describe a list of customers.
 */
class CustomerList {

    /** @var Customer[] List of customers */
    private $customers;

    /**
     * Add a customer to the list
     *
     * @param Customer $customer
     */
    public function addCustomer(Customer $customer) {
        $this->customers[] = $customer;
    }

    /**
     * The sorting function.
     * Compare the orders total and return 1/0/-1 accordingly.
     *
     * @param Customer $a
     * @param Customer $b
     *
     * @return int
     */
    public function sort($a, $b) {
        if ($a->getOrdersTotal() === $b->getOrdersTotal()) {
            return 0;
        }
        return ($a->getOrdersTotal() > $b->getOrdersTotal()) ? 1 : -1;
    }

    /**
     * Call the sorting function on the customer list
     */
    public function sortCustomers() {
        usort($this->customers, array($this, "sort"));
    }

    /**
     * Return the full customer array.
     *
     * @return Customer[]
     */
    public function getCustomers() {
        return $this->customers;
    }
}

//Instantiation
$cList = new CustomerList();

$customer1 = new Customer();
$customer2 = new Customer();
$customer3 = new Customer();

$order1 = new Order();
$order2 = new Order();
$order3 = new Order();
$order4 = new Order();
$order5 = new Order();
$order6 = new Order();

$customer1->addOrder($order1);
$customer1->addOrder($order2);

$customer2->addOrder($order3);

$customer3->addOrder($order4);
$customer3->addOrder($order5);
$customer3->addOrder($order6);

$cList->addCustomer($customer1);
$cList->addCustomer($customer2);
$cList->addCustomer($customer3);

//List customers before sorting
var_dump($cList->getCustomers());

$cList->sortCustomers();

//List customers after sorting
var_dump($cList->getCustomers()); 
```

# java - 如何在 Java 中创建自定义 GUI 组件？（需要开始提示）

> ID：11818798
> 
> 赞同：1
> 
> 时间：2012-08-05T18:04:36.527
> 
> 标签：java, swing, user-interface, components, awt

我想用 Java 创建一个自定义组件。它就像一个文本区域，但它是由网格组成的，当你写的时候，每个字符都放在一个网格单元格中。我不知道从哪里开始。我想象一个具有 value 属性的 Cell 类和一个具有 Cell 数组属性的 Sheet 类和一个在写入时指向当前单元格的指针。我在编写这样的事情时没有太多问题。我最重要的是如何以图形方式向用户显示它。

## 有什么建议或参考吗？

编辑：我阅读了您的出色答案，但这并不是我想要的。当我说“由网格组成的文本区域，并且每个字符都进入网格单元格”时，这只是对我将要做的事情的简化。我会给你进一步的解释：

有一个文本区域。每行由两（或更多）行（上排和下排）组成。每行都包含单元格。在每个单元格中都有一个字符或不同的对象（由字符或图像或其他东西表示）。上排的字符绑定/跟随相应的下单元格。像这样。

```
_ _ _ _ _ _ _ _ _ _ _ _ _
_|_|_|_|_|_|X|_|_|_|_|_|_|
H|E|L|L|O|_|W|O|R|L|D|,|_|
_ _ _ _ _ _ _ _ _ _ _ _ _
_|_|_|_|Y|_|_|_|_|_|_|_|_|
H|O|W|_|A|R|E|_|Y|O|U|?|_|
_ _ _ _ _ _ _ _ _ _ _ _ _
_|_|_|_|_|_|_|_|_|_|_|_|_|
_|_|_|_|_|_|_|_|_|_|_|_|_| 
```

您可以看到 X 绑定到 WORLD 的下部 W，而 Y 绑定到 ARE 的下部 A。我希望现在更清楚一点：-p 在构建、设计、编程这样的自定义工具/组件/编辑器时，正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:11:51.913

创建自定义[JTable](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)怎么样？[在这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)您可以找到一些开始的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:26:12.757

我找到了一个很好的解决方案，非常适合我的目的：我将像我在第一篇文章中解释的那样创建一个自定义 gui 组件的方法是扩展一个 JPanel 并实现一个 KeyboardListener（如果需要，还可以实现一个 MouseListener ）。我也创建了一个 Row 类和一个 Pointer 类，我的主要组件类是由它们组成的。根据我需要的图形，通过重载 JPanel 的paintComponent 方法来完成该图形。显然，为了处理键盘和鼠标操作，您只需实现 KeyboardListener 和 MouseListener 方法（它们都是接口）。

如果有人感兴趣并要求进一步解释，我可以提供类图或其他东西。

# sql - 处理复杂的多重排序数据

> ID：11818799
> 
> 赞同：1
> 
> 时间：2012-08-05T18:04:43.143
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [需要对复杂数据排序 SQL Server 的帮助](https://stackoverflow.com/questions/11683134/need-help-for-complex-data-sort-sql-server)

这是我在 sql server 中的数据，我需要对其进行排序和显示

```
Table : MyTable
------------------
ID  Title
-----------
1   Geo Prism GEO 1995 GEO* - ABS #16213899
2   Excavator JCB - ECU P/N: 728/35700
3   Geo Prism GEO 1995 - ABS #16213899
4   JCB Excavator JCB- ECU P/N: 728/35700
5   Geo Prism GEO,GEO 1995 - ABS #16213899 GEO
6   Maruti gear box #ABS 4587 
```

现在我想根据 GEO 和 JCB 等搜索词对数据进行排序

这些行将首先出现在 GEO 或 JCB 在这里找到最长时间 GEO 在 3 行中找到，JCB 在 2 行中找到。所以所有行都有 GEO 关键字，这些关键字将出现在顶部，下一个与 JCB 相关的行将会出现。不匹配的行终于来了。

再次将进行排序。在与 GEO 相关的行中……那些行将首先出现，其中具有最大的 GEO 关键字。相同的 JCB 相关行将被排序。

在这里，我给出的图像将显示我需要什么样的输出

![在此处输入图像描述](../Images/ff31f0e6375a7ff4b599e239f8c3a2e0.png) 我问了这个问题，得到的答案并没有完全满足我的要求。所以这是我为这个问题得到的sql。

```
CREATE FUNCTION [dbo].[Split] (@String varchar(8000), @Delimiter char(1))     
returns @temptable TABLE (items varchar(8000))       
as       
begin       
declare @idx int       
declare @slice varchar(8000)       

select @idx = 1       
    if len(@String)<1 or @String is null  return       

while @idx!= 0       
begin       
   set @idx = charindex(@Delimiter,@String)       
   if @idx!=0       
       set @slice = left(@String,@idx - 1)       
   else       
      set @slice = @String       

   if(len(@slice)>0)  
       insert into @temptable(Items) values(@slice)       

   set @String = right(@String,len(@String) - @idx)       
   if len(@String) = 0 break       
end   
return       
end

DECLARE @Sterm varchar(MAX) 
SET @Sterm ='GEO JCB'
;WITH SearchResult (rnum, title)
as 
(   
(select 1 as rnum,'Geo Prism GEO 1995 GEO* - ABS #16213899' as title)
union all
(select 2 as rnum,'Excavator JCB - ECU P/N: 728/35700' as title)
union all
(select 3 as rnum,'Geo Prism GEO 1995 - ABS #16213899' as title)
union all
(select 4 as rnum,'JCB Excavator JCB- ECU P/N: 728/35700' as title)
union all
(select 5 as rnum,'Geo Prism GEO,GEO 1995 - ABS #16213899 GEO' as title)
union all
(select 6 as rnum,'dog' as title)
) 

select rnum, title from SearchResult
join 
( select lower(Items) as term 
  from dbo.Split(@Sterm , ' ')
) as search_terms
on lower(SearchResult.title) like '%' + search_terms.term +'%'
order by 
search_terms.term,
(select count(*)
from dbo.Split(lower(SearchResult.title),' ')
where Items = search_terms.term
) desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:55:53.933

```
declare @SearchItem varchar(1000)='GEO,JCB' 
```

在 dbo.split(@SearchItem,', ') exec(' declare @tbl table(id int,title varchar(200)) ; with CTE as ( select 1 as id, ''Geo Prism GEO 1995 GEO* - ABS #16213899'' as Title union select 2 as id , ''Excavator JCB - ECU P/N: 728/35700'' as Title union select 3 as id, ''Geo Prism GEO 1995 - ABS #16213899'' as Title union select 4 as id, ''JCB Excavator JCB- ECU P/N: 728/35700'' as Title union select 5 as id, '' Geo Prism GEO,GEO 1995 - ABS #16213899 GEO'' as Title union select 6 as id, ''Maruti gear box #ABS 4587' ' 如题）

插入@tbl select id,Title from CTE

声明@tbl2 table(id int,T int,title varchar(200),Tl varchar(200),CC int) 插入@tbl2 (id,T,title,Tl) 选择 id,T,title,Tl from(select tb.id,sub.T,tb.title ,Tl from (select case '+@Instring +' else ''Other'' END as Tl ,count(*)T from @tbl group by case '+@Instring +' else ''Other'' END)Sub
join @tbl tb on tb.Title like ''%''+sub.Tl +''%'' )Sub1

声明 @Ttle varchar(max) 声明 @Tl varchar(max) 声明 @id int 声明 @i int=0 声明 @Nbr int=0 声明 Cursr Cursor for select title,id,Tl from @tbl2
open Cursr 从 Cursr 获取下一个到@Ttle,@id,@Tl while @@FETCH_STATUS =0 begin while (@i<=len(@Ttle)) begin if charindex(@Tl,@Ttle)!=0 set @Nbr =@Nbr +1 set @ ttle =stuff(@Ttle,charindex(@Tl,@Ttle),len(@Tl),'''') set @i=@i+1 end

```
 update @tbl2 set cc=@Nbr where id=@id 
     set @Nbr =0 
```

从 Cursr 获取 next 到 @Ttle,@id,@Tl end

select id,T,title,Tl,CC from
(select id,T,title,Tl,CC from @tbl2
union select id,0 as T,title,'''' as Tl,0 as CC from @tbl where id不在 (select id from @tbl2 ))S1 order by T desc,CC desc ' )

# java - 为什么我可以在 Linux 中成功移动正在写入的文件？

> ID：11818802
> 
> 赞同：28
> 
> 时间：2012-08-05T18:04:57.487
> 
> 标签：java, android, linux, filesystems

*我认为这个问题对于 Stack Overflow 来说已经足够技术了，对于Android*来说可能过于面向编程。我对 Android（或 Java 或 Linux，视情况而定）如何处理文件很感兴趣，因为我用我的新智能手机做了一些事情，我很想知道它是如何发生的。

我正在通过蓝牙将文件从笔记本电脑传输到我的 Android 手机。我在文件资源管理器中看到了新文件，假设它已完全传输，因此将其`/sdcard/bluetooth`从`/sdcard/torrents`. 在我这样做之后，我注意到它实际上仍在被转移。令我惊讶的是，它成功完成，通过手机上的通知图标确认，并通过双方的手动 MD5 检查。在大多数系统中，文件移动会导致崩溃。

这次转让成功的原因是什么？我知道，通常，文件路径与文件系统上的文件位置（在本例中为 SD 卡）是分开的。我想蓝牙应用程序已经打开了文件的句柄，当我移动文件时，“打开文件”表被更新为新路径。这个特性在任何 Linux 系统中都普遍存在吗？我可以`mv`对正在写入的文件执行操作并期望副本 - 在其新位置 - 是正确的吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-05T18:47:54.540

当您**在同一个文件系统中移动文件**时，文件本身（*inode*）根本不会移动。唯一改变的是该文件系统中的目录条目。`mv`（在这种情况下调用的系统调用是[`rename(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/rename.2.html)- 检查该页面以获取更多信息和限制。）

当一个进程打开一个文件时，文件名被传递给操作系统以指示哪个文件是指哪个文件，但你得到的文件描述符根本没有链接到那个名字（你不能从中得到一个文件名）——它链接到inode。
由于在重命名文件时（在同一个文件系统中）inode 保持不变，打开它的进程可以愉快地继续读取和写入它——它们没有任何改变，它们的文件描述符仍然有效并指向正确的数据。

如果你删除一个文件，同样的事情。即使文件不再可以通过任何目录条目访问，进程也可以继续从中读取和写入。（这可能会导致令人困惑的情况，即`df`报告您的磁盘已满，但`du`表示您使用的空间比`df`报告的少得多。分配给仍处于打开状态的已删除文件的块在这些进程关闭其文件描述符之前不会被释放。 )

如果`mv`跨文件系统移动文件，则行为会有所不同，因为 inode 特定于每个文件系统。在这种情况下，`mv`实际上将复制数据，在目标文件系统上创建一个新的 inode（和目录条目）。复制结束后，旧文件将被取消链接，*如果*上面没有打开的文件句柄，则将其删除，如上所述。
在您的情况下，如果您跨越了文件系统边界，那么您将在目标中有一个部分文件。并且您的上传过程愉快地写入您无法轻松访问的已删除文件，可能会填满该文件系统，直到上传完成，此时 inode 将被删除。

您可能会发现一些关于[Unix 和 Linux](https://unix.stackexchange.com/)的帖子很有趣：

*   [Unix 文件系统中的目录是如何实现的？](https://unix.stackexchange.com/questions/18605/how-are-directories-implemented-in-unix-filesystems)
*   [什么是超级块、索引节点、Dentry 和文件？](https://unix.stackexchange.com/questions/4402/what-is-a-superblock-inode-dentry-and-a-file)

# eclipse - GNATbench Ada 在 Eclipse 中使用远程系统资源管理器

> ID：11818803
> 
> 赞同：2
> 
> 时间：2012-08-05T18:05:05.017
> 
> 标签：eclipse, ada, gnat, eclipse-rse

我使用 eclipse 的 GNATbench Ada 插件来让 eclipse Ada 在 Windows 上感知。这适用于本地文件，但我的主要开发是在远程 Unix 机器上。我成功地使用 Eclipse 的远程系统资源管理器插件从 Windows 远程编辑 Unix 机器上的 C 文件，但无法为 Ada 工作。

GNATbench 插件似乎无法与远程系统资源管理器 (RSE) 插件一起正常工作。可能是 GNATbench 中的一个错误，它直接使用完整路径寻址文件，而不是从 eclipse 项目的角度解决它们。

有人试过这个吗？

# c - 预处理器宏是如何工作的？

> ID：11818805
> 
> 赞同：6
> 
> 时间：2012-08-05T18:05:10.950
> 
> 标签：c, macros, c-preprocessor

```
#define B 100+B
main()
{
    int i= B;
} 
```

我知道这是错误的，但出于好奇，当我编译它时，我得到了这个奇怪的错误：

> “B 未在此范围内声明”。

为什么会这样？如果此错误是因为编译器在替换宏后删除了宏，那么以下代码如何正常工作，当*B必须在对**A*可用之前被删除时？

```
#define B 100
#define A 100+B
main()
{
    int i= B;
    int j =A;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-05T18:09:32.850

这是预处理器的输出：

```
gcc -E x.c
# 1 "x.c"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "x.c"

main()
{
    int i= 100+B;
} 
```

如您所见，它进行了替换。现在是因为没有`B`声明而失败的编译步骤。

其他代码很好，输出如下：

```
main()
{
    int i= 100;
    int j =100+100;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-05T18:13:41.523

宏扩展不是递归完成的，如果宏名称出现在替换文本中，则不会再次扩展。所以随着

```
#define B 100 + B 
```

替换`B`产生令牌序列`100 + B`并且`B`不会再次扩展（如果是，您将有无限递归）。所以编译器会`B`在预处理器完成后看到对未声明变量的引用。

但在

```
#define B 100
#define A 100 + B 
```

当宏`A`展开时，宏名称会`B`出现在替换文本中。然后`B`展开，编译器看到`100 + 100`哪些不包含对未声明变量的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T18:18:24.897

宏替换是简单的文本操作。您可以通过简单的逐步编译来调试此类问题。

使用 cc -E 文件名.c -O 文件名.i

用于生成扩展的 c 代码

vi filename.i 用于读取纯/扩展的 c 代码

# ruby-on-rails - 如何从应用程序中访问 rails 3 应用程序的环境变量？

> ID：11818807
> 
> 赞同：1
> 
> 时间：2012-08-05T18:05:30.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个需要响应不同网址的应用程序。我正在使用 Nginx 并想为主机设置环境变量，但我不知道如何设置它或在控制器中恢复该环境变量。例如，我想要这样的东西......

```
http://sillyname.com/page_name/home 
```

nginx 设置 ENV['HOST'] = $host

和 rails 路由到页面控制器操作 => 显示，参数 page_name => 主页。然后在控制器中显示动作

```
def show
  @website = Website.find_by_host_name(ENV['HOST'])
  @page = @website.page.where("title",params[:page_name])
  ...
end 
```

我的具体问题是：

1.  我在 nginx 中使用什么指令来设置这个变量，或者它已经可以在 rails 3 应用程序中访问？

2.  如何访问应用程序中的 ENV 变量以正确查询数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:17:05.610

您应该能够从`request`控制器中的对象中获取信息。请具体检查：

```
request.host 
```

或调查

```
request.env 
```

# c# - using 语句在命名空间声明之上还是之下是否重要？

> ID：11818812
> 
> 赞同：0
> 
> 时间：2012-08-05T18:05:56.973
> 
> 标签：c#, visual-studio-2010, resharper, using

> **可能重复：**
> [Usings 应该在命名空间内部还是外部](https://stackoverflow.com/questions/125319/should-usings-be-inside-or-outside-the-namespace)

我注意到，最近有时当我使用 Visual Studio 的“Resolve”功能将 using 语句添加到类或单元时，它一直在将它们添加到命名空间声明*下方。*虽然它似乎没有任何区别，但对我来说它看起来很“奇怪”，所以我将它们复制并粘贴到“它们所属的位置”上方。我应该留下它们，还是它们位于命名空间的哪一侧无关紧要？

# c# - 在添加项目更改对象之前或之后设置 ItemsSource？

> ID：11818816
> 
> 赞同：0
> 
> 时间：2012-08-05T18:07:30.590
> 
> 标签：c#, wpf, data-binding, binding, itemssource

我有一个奇怪的情况，我已经实现了一个*ObservableConcurrentDictionary*（基于 .NET 的*ConcurrentDictionary*），我用它来实现*ObservableConcurrentCollection*（它只是自动在 Dictionary 中设置 Key 属性，并且具有所有 IList、IEnumerable , IQueryable 和 ICollection 方法）。当我执行以下操作时，这一切都很好：

```
ObservableConcurrentCollection<string> items = new ObservableConcurrentCollection<string>();
dataGrid.ItemsSource = items;
items.Add("TEST"); 
```

这在 DataGrid 中得到了完美体现。

但是，当我这样做时：

```
ObservableConcurrentCollection<string> items = new ObservableConcurrentCollection<string>();
items.Add("TEST"); // <-- Notice that this and the line below are swapped.
dataGrid.ItemsSource = items; 
```

它无法正常工作，因为“项目”中的项目突然变成了 KeyValuePair。我可以通过在最后一行中使用 dataGrid.ItemsSource = items.Values 轻松解决此问题，但我宁愿让它像前一个一样工作（而且它也令人困惑）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:23:38.813

由于您的新 ObservableConcurrentDictionary 类基于 ConcurrentDictionary，我怀疑问题出在接口方法之一的实现中。

没有看到该类，很难诊断，但我怀疑问题出在返回整个字典条目而不是键指定的值的检索实现之一中。

例如，当 ItemsSource 在第二种情况下绑定到网格时，它可能会通过 IEnumerable 检索值，而当您在第一种情况下调用 Add 时，它会触发包含正确信息的 observable 事件。

通过在可疑检索方法中放置断点或在分配 ItemsSource 时进入第二种情况的代码，应该相当简单地找出问题发生在哪里。这应该会很快向您显示正在执行的方法，并显示正在返回字典条目而不是值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:04:25.357

对我来说，我总是用这个

```
<DataGrid ItemsSource="{Binding}" x:Name="datagrid" > 
```

然后

```
ObservableConcurrentCollection<string> items = new ObservableConcurrentCollection<string>();
items.Add("TEST"); 
dataGrid.DataContext = items; 
```

你可以试试这个，即使我换了台词，它也对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:45:03.297

通过更改 ObservableConcurrentCollection 解决了这个问题，我删除了继承并为 ObservableConcurrentDictionary 创建了一个字段。现在就像一个魅力。

# javascript - 如何剥离标记并将纯文本仅粘贴到内容可编辑字段中？

> ID：11818821
> 
> 赞同：1
> 
> 时间：2012-08-05T18:08:09.730
> 
> 标签：javascript, html, contenteditable

这里是游乐场：http: [//jsfiddle.net/n6W27/1/](http://jsfiddle.net/n6W27/1/)

尝试 Ctrl+A Ctrl+C Ctrl+V 并查看 contenteditable 节点是否被复制（至少在 Firefox 中对我而言）。最初的问题是我怎么能只将纯文本输入强制到 contenteditable 块中？派生的问题是“为什么 !@#$ 节点在原始节点旁边重复？”

**Edit1：**这个演示中只有一个块，所以我将插入符号放在可编辑块中，然后全选，复制和粘贴

**Edit2：**结果截图![在此处输入图像描述](../Images/895a966f3ff38c153f3c871733e3a885.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:49:47.860

如果可以，请将元素类型更改为 DIV。这将清除您的问题。

```
<div class="edit" contenteditable>ABC</div> 
```

如果您不希望您的字段是块级的，请将 display 属性设置为“inline-block”：

```
.edit {
    display: inline-block;
} 
```

**现场演示：http:** [//jsfiddle.net/n6W27/2/](http://jsfiddle.net/n6W27/2/)

# javascript - 无限 ajax 滚动条未加载

> ID：11818825
> 
> 赞同：1
> 
> 时间：2012-08-05T18:08:44.363
> 
> 标签：javascript, jquery, ajax, jquery-plugins

我正在使用一个名为[Infinite Ajax Scroller](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)的插件。我遇到的问题是让 javascript 在已加载的新内容中工作。我看到其他一些人发布了这个问题，但我似乎找不到答案。据我了解阅读类似问题，您必须在回调中重新触发 js `onRenderComplete`。这似乎对我不起作用。我究竟做错了什么？

```
jQuery.ias({
    container:".posts_container",
    item:".row.home.post",
    pagination:".pagination",
    next:"a[rel*=next]",
    loader:"images/loader.gif",
    onRenderComplete: function() {
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
                fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    }
}) 
```

# android - SQLite：如何根据时间戳限制行数？

> ID：11818828
> 
> 赞同：3
> 
> 时间：2012-08-05T18:09:27.290
> 
> 标签：android, sql, sqlite, triggers, database-trigger

我成功地使用了以下`BEFORE INSERT`触发器来限制存储在 SQLite 数据库表*位置*中的行数。数据库表在 Android 应用程序中充当缓存。

```
CREATE TRIGGER 'trigger_locations_insert'
BEFORE INSERT ON 'locations'
WHEN ( SELECT count(*) FROM  'locations' ) > '100'
  BEGIN
    DELETE FROM 'locations' WHERE '_id' NOT IN
    (
      SELECT '_id' FROM 'locations' ORDER BY 'modified_at' DESC LIMIT '100' 
    );
  END 
```

同时，我添加了第二个触发器，允许我进行`INSERT OR UPDATE`行。- 关于该主题的讨论可以在[另一个线程](https://stackoverflow.com/questions/11686645/android-sqlite-insert-update-table-columns-to-keep-the-identifier)中找到。第二个触发器需要`VIEW`在其上执行每个触发器`INSERT`。

```
CREATE VIEW 'locations_view' AS SELECT * FROM 'locations'; 
```

由于 an`INSERT`不再在位置上执行，*而是*在`TABLE` *locations_view*上执行，因此上述触发器不再起作用。如果我在以下错误消息上应用触发器，则会引发以下错误消息。`VIEW` *`VIEW`*

 *```
Failure 1 (cannot create BEFORE trigger on view: main.locations_view) 
```

**问题：**

如何更改上述触发器以观察每个触发器`INSERT`-`VIEW`或者您是否推荐另一种限制行数的方法？我更愿意在数据库中处理这种操作，而不是在我的客户端上运行前端代码。

* * *

**性能问题：**

虽然，限制器（上述触发器）通常工作 - 它的性能不如最佳！实际上，数据库操作需要很长时间，以至于引发了 ANR。据我所知，原因是**每次**发生时都会调用限制器`INSERT`。为了优化设置，批量`INSERT`应该被包装到一个事务中，并且限制器应该在之后执行。这可能吗？如果您愿意提供帮助，请将有关批量的优化评论`INSERT`放入[原始问题](https://stackoverflow.com/questions/11686645/android-sqlite-insert-update-table-columns-to-keep-the-identifier)中。欢迎对限制器发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:42:16.213

这种类型的触发器应该与另一种触发器一起正常工作。问题似乎是 SQL 不必要地引用了该`_id`字段。它为每一行选择文字字符串“_id”并将其与相同的文字字符串进行比较。

删除周围的引号`'_id'`（在`DELETE`和 sub- 中`SELECT`）应该可以解决问题。*

# java - 判断当前的Javascript实现是否为Rhino

> ID：11818833
> 
> 赞同：2
> 
> 时间：2012-08-05T18:09:59.483
> 
> 标签：java, javascript, rhino, javax.script

我在 Java 中使用 javax.script，我希望能够检测当前的 Javascript 实现是否是 Rhino。我这样做是因为我需要编写脚本才能在网页和 Rhino 中正常工作。

Javascript伪代码：

```
function writeMessage(message) {
    if (implementation is Rhino) {
        print(message);
    }
    else if (script is running in a web browser) {
        document.write(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T18:37:51.567

啊，我们在你的评论中得到了它。只需使用特征检测：

```
var writeMessage = document && document.write
  ? document.write.bind(document)
  : print; 
```

然后`writeMessage(string)`在整个脚本中使用。这是一个[简短](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)的形式

```
if (document && document.write)
    var writeMessage = function(message) { document.write(message); };
else
    var writeMessage = function(message) { print(message); }; 
```

这比您在问题中建议的要好，每次调用函数时都会应用检测：

```
function writeMessage(message) {
    if (document && document.write) { // running in a web browser
        document.write(message);
    } else { // it will be Rhino
        print(message);
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-05T18:35:26.693

如果它只是在 Web 浏览器或 Rhino 上运行，那么它们肯定是互斥的；也就是说，如果脚本*没有*在浏览器中运行，那么它是通过 Rhino 运行的。

# c# - Sql 语句在 Access 中有效，但在我从 C# 运行时无效

> ID：11818834
> 
> 赞同：2
> 
> 时间：2012-08-05T18:09:59.093
> 
> 标签：c#, ms-access

该声明：

```
SELECT [ToWhom] FROM [myChecks] WHERE [ToWhom] like '*e*' 
```

在 Access 中工作正常，但是当我从 C# 运行它时，我会返回并清空数据集。这是代码：

```
string connectionstring = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Checkbook.accdb";
OleDbConnection Conn = new OleDbConnection();
Conn.ConnectionString = connectionstring;
OleDbCommand myCommand = Conn.CreateCommand();
OleDbDataAdapter myDataAdapter = new OleDbDataAdapter();
DataSet myDataset = new DataSet();
DataTable EmptyDataTable = new DataTable();
myCommand.CommandText = SQL;
myDataAdapter.SelectCommand = myCommand;
Conn.Open();
try
{
//This part does not throw an error it just return an empty Dataset
myDataAdapter.Fill(myDataset);
Conn.Close();
return myDataset.Tables[0];
}
catch(SyntaxErrorException e)
{
MessageBox.Show(e.Message, "Database Error", MessageBoxButtons.OK, MessageBoxIcon.Information);
}
Conn.Close();
 return EmptyDataTable;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:12:13.873

在具有上述连接的 C# 中，使用百分比 (%) 作为通配符，而不是星号 (*)

```
SELECT [ToWhom] FROM [myChecks] WHERE [ToWhom] like '%e%' 
```

在 MS Access 内部，在查询设计窗口中，当未设置 ANSI 92 选项（即通常设置）时，通配符为星号 (*)，Access 外部通常为百分比 (%)。

# ajax - 使用 Dojo 对 Ajax 调用的表单字段值

> ID：11818837
> 
> 赞同：1
> 
> 时间：2012-08-05T18:10:31.413
> 
> 标签：ajax, json, dojo

我有这样的表格（来自小部件模板）：

```
 '<div>' +
    '  <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="form" method="POST"> ' +
    '    <label for="${id}_workspace">Workspace name</label>  ' +
    '    <input name="workspace" id="${id}_workspace" data-dojo-attach-point="workspace" data-dojo-type="app.ValidationWorkspace" />' +
    '    <label for="${id}_password1">Password</label>  ' +
    '    <input name="password[0]" id="${id}_password1" data-dojo-attach-point="password1" data-dojo-type="app.ValidationPassword" />' +
    '    <label for="${id}_password1">Confirm password</label>  ' +
    '    <input name="password[1]" id="${id}_password2" data-dojo-attach-point="password2" data-dojo-type="app.ValidationPassword" />' +
    '    <input type="submit" data-dojo-attach-point="button" data-dojo-type="app.BusyButton" label="Create!" />' +
    '  </form>' +
    '</div>', 
```

在代码中，我写道：

```
 data = {};
        data.workspace = that.workspace.get('value');
        data.password = [];
        data.password[0] = that.password1.get('value');
        data.password[1] = that.password2.get('value');

        // Store the data 
        g.stores.workspacesAnon.put(data).then(
          function(res){
            console.log("Jsonrest put(data) returned OK: " + json.toJson(res) );
            that.button.cancel();
          }
        ); 
```

两个实际问题：

1.  如果我使用 that.form.value.email 而不是 that.password1.get('value')，有时会将过时的值提交给表单 (!)。例如，如果我在密码 2 字段中输入一些内容并立即按回车，实际提交会发生在 Dojo 中的预期？怎么会这样？

2.  有没有更好的方法来获取表单的值，以便 'p​​assword[0]' 和 'password[1]' 自动成为一个数组等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:24:28.250

dijit.form 下的每个小部件都确保使用其值更新具有正确名称的一个表单元素，即使这些值类似于过滤选择单击或日历中的日期。

话虽如此，我们知道一个常见的 form.submit() 将按预期工作。

然而，在以 AJAX 请求的形式提交时，我们需要循环表单元素的值，并使其成为 json 键值对象。

你很容易， dojo.xhrPost 如果这样调用，则在内部执行此操作：

```
dojo.xhrPost ( {
   url: 'submiturl.sapi',
   form: dojo.byId('myFormDomId')
} ) 
```

对于更高级别的控制，您可以使用`dojo.formToJson`或`dijit.form.Form.getValues`- 例如这两个变体

```
var values = dojo.formToJson(dojo.byId('myFormDomId'));
// OR
var values = dijit.byId('myFormDijitId').getValues();
// mod or mixin your custom values, examplewise
values = dojo.mixin(values, {   anotherVariable: 'sentAsPostParam'   });

dojo.xhrPost ( {
    url: 'submitUrl.sapi',
    content : values
} ); 
```

关于您的第一个问题 1）
如果验证器附加到小部件电子邮件 - 并且验证呈现无效，则不会相应地设置输入元素。一旦有 1 - keyup 事件或 2 - onblur 事件，设置值就完成了。为确保发送正确的值，`dijit.form.Form.validate`请像这样使用（因为您已经扩展了表单 dojoType）

```
var formWidget = dijit.byId('myFormDijitId');
if(formWidget.validate()) {  // loops all form widgets and 'sums' up their validators
   dojo.xhrPost( { url: 'submiturl.sapi', content: formWidget.getValues() } );
} 
```

编辑：

专门用于在项目中创建嵌套数组，OP 需要 JsonRest 存储 - 必须通过完全相同的名称调用输入元素，例如

```
<input name="password" 
                        id="${id}_password1" data-dojo-attach-point="password1" data-dojo-type="app.ValidationPassword" />
<input name="password" 
                        id="${id}_password2" data-dojo-attach-point="password2" data-dojo-type="app.ValidationPassword" /> 
```

此外，在本机表单元素上使用 dojo.formToJson ，就像这样（**在验证后**执行它以断言正在设置的值）：

```
 g.stores.workspacesAnon.put(
       dojo.formToJson(widgetReference.form.domNode)
    ).then( ... ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T20:40:23.267

您可以使用`dojo.xhrPost()`指定表单，查看[此链接](https://dojotoolkit.org/reference-guide/1.7/dojo/xhrPost.html)并查看发送 dojo.byId("myform") 的示例 1。我猜你可以这样调用它，而不用担心如何将这些参数传递给服务器。这应该可以解决发送过时参数的问题。

如果您需要对此发表任何评论。

运气，

# android - Jtwitter这个元素既没有附加源也没有附加javadoc，因此找不到javadoc

> ID：11818839
> 
> 赞同：0
> 
> 时间：2012-08-05T18:10:50.307
> 
> 标签：android

我为我的 Yamba 应用程序下载了 3 个不同版本的 jtwitter，但是当我将鼠标悬停在任何 jtwitter 功能（如“Twitter”）上时，它显示“此元素既没有附加源也没有附加 javadoc，因此找不到 javadoc”，并且它在运行时强制关闭，我该怎么办...我使用 Eclipse Juno 和 ADT 20v2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:22:09.433

（记录的）源代码可以[在 GitHub 上找到](https://github.com/winterstein/JTwitter)。

您可以使用与 JDK 捆绑在一起的[JavaDoc](http://agile.csc.ncsu.edu/SEMaterials/tutorials/javadoc/#section4_0)工具克隆（或下载）它并“编译”您自己的文档。

# javascript - 在保持比率的同时调整 Div 大小

> ID：11818842
> 
> 赞同：1
> 
> 时间：2012-08-05T18:11:26.697
> 
> 标签：javascript, html, css, position

我正在尝试创建一个页面，其中一个居中放置的 div 调整大小以适应页面水平和垂直，同时保持比例。

目前我正在使用 JS 和 CSS 的组合，虽然我不确定它是否特别有效 - 它也似乎有点 hacky。

我将如何清理此代码或重写它以实现此目的？

Javascript

```
function changesize(){

var $width = $(".aspectwrapper").height();
var $changewidth = $width * 1.5;
var $doc = $(document).width();
var $height;

if ($doc <= $changewidth){ $changewidth = ( $doc - 100 );
$height = ( ($doc - 100) / 1.5 );
$(".aspectwrapper").css('height', "" + $height + "");
};

$(".content").css('width', "" + $changewidth + "");
$(".aspectwrapper").css('width', "" + $changewidth + "");
};

$(document).ready(function(e) {

 $(changesize); 

});

$(window).resize(function(e) {

$(changesize); 

}); 
```

CSS

```
html, body {
width: 100%;
height: 100%;
padding: 0;
margin: 0;
}
.aspectwrapper {
display: inline-block; 
position: relative; 
margin: 0 auto;
height: 90%;
border: #F00 1px solid;
background-color: #F00;
}
.content {
position: absolute;
top: 0;
bottom: 0;
right: 0;
margin-top: 60px;
outline: thin dashed green; 
overflow: hidden;
background-color: #09C;
}
#wrapper {
width: 100%;
height: 100%;
text-align: center;
background-color: #0F3;
float: left;
} 
```

HTML

```
<div id="wrapper">
      <div class="aspectwrapper">
                <div class="content"> CONTENT GOES HERE</div>
      </div>
      <div style="clear:both;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:54:02.047

我个人会使用具有特定液体宽度和高度的定位/边距组合来水平和垂直定位我的中心 div。它会根据页面宽度调整大小而不使用 javascript。这是一个例子。

[http://jsfiddle.net/9Aw2Y/](http://jsfiddle.net/9Aw2Y/)

# java - 在 Spring MVC 中如何处理 Ajax 请求？

> ID：11818844
> 
> 赞同：6
> 
> 时间：2012-08-05T18:11:40.370
> 
> 标签：java, ajax, spring, jsp, spring-mvc

在 Spring MVC（我正在使用 3.0.2）中，两个 HTTP 方法**总是**（或者在我看来大部分是）保留（即使用适当的处理程序映射），它们是[GET 和 POST](http://techforum4u.com/content.php/229-HTTP-Request-GET-HEAD-POST-PUT-DELETE-OPTION-TRACE)，例如

```
@RequestMapping(method=RequestMethod.GET)
public String showForm(Map model)
{
     //Usually retrieve data from the database when the page is loaded.

     return "admin_side/Temp";
} 
```

发出 GET 请求时会调用上述方法。

* * *

```
@RequestMapping(method=RequestMethod.POST)
public String onSubmit(@ModelAttribute("tempBean") @Valid TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response)
{
     //Perform some basic operations with the database like insert, update or delete when the form is submitted (by clicking a submit button or so).

     return "admin_side/Temp";
} 
```

发出 POST 请求时会调用上述方法。假设 Spring 控制器是用`@RequestMapping(value="admin_side/Temp")`注解指定的。

* * *

现在，如果我需要使用 Ajax 并且需要执行与上述方法不同的功能，会发生什么？我既不能使用 GET 方法也不能使用 POST 方法来处理其他方法，因为已经映射了处理程序（HTTP 方法 GET 和 POST 都被保留分别用于处理`showForm()`和`onSubmit()`方法）。

为了演示，我使用了**Ajax**`method=RequestMethod.PUT`的方法，例如

 **```
@RequestMapping(method=RequestMethod.PUT)
public @ResponseBody String getStateList(@ModelAttribute("tempBean") @Valid TempBean tempBean, BindingResult error, HttpServletRequest request, HttpServletResponse response)
{
    return "Message";
} 
```

它按预期工作，但我觉得它**不**应该是最好的解决方案。如果您有这样的场景（实际上，这对我来说似乎很常见），您如何在 Spring MVC 中处理 Ajax 请求？我应该（总是）使用`RequestMethod.PUT`吗？（或者 Spring 中 Ajax 的最佳 HTTP 方法是什么？）

有没有办法在同一个控制器中映射多个具有相同 HTTP 方法的方法（一个明显的答案应该是**no**）？同样，当您需要在 Spring MVC 中使用 Ajax 时，您使用哪种方法？希望你遵循我的意思！由于我的英语还处于初级阶段，我很难表达。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:51:39.253

我们可以在一个控制器中拥有多个 GET 和 POST 方法，为此我们需要使用 value 属性

前任：

```
@RequestMapping(method=RequestMethod.GET, value = "/showForm")
public ModelAndView showForm(){
}

@RequestMapping(method=RequestMethod.GET, value = "/processAjaxRequest")
public ModelAndView processAjax(){

 ModelAndView modelAndView = new ModelAndView("page.jsp");  
 modelAndView.addObject("ajax_response", ajax_response);
     return modelAndView;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T18:31:26.187

我认为真正的问题是：

> 为什么您希望相同的 URL/方法组合根据访问方式而有所不同？

谁在乎您是否通过在前端发出 AJAX 请求来访问它？如果调用的语义不同，请给它一个不同的 URL。您可以直接在方法上而不是在类上指定 URL 模式，以避免重复该类的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T18:26:01.777

AJAX没有*最好的方法*。

至于你应该使用什么方法，这取决于建筑风格。REST 范式及其最常见的实际解释 ROA（面向资源的架构）对 HTTP 方法的语义做出了某些假设。这是一种越来越流行的方法，我认为值得一读。不过，充分利用 REST 的优势可能需要您重新考虑整个应用程序设计。如果您决定这样做，请阅读 REST、ROA 和 JAX-RS，这是 RESTful 应用程序的 Java 标准。它的实现可以与 Spring 集成。

或者，您可以坚持使用 GET 和 POST，这是最广泛支持的方法。至于 Spring 本身，合理的方法是提供一个单独的 bean（或者可能是一组 bean）来处理基于 AJAX 的 API。如果您保持 URL 不同，就不会有方法“*冲突”。***

# java - 从 InputStream 创建 Java 7 zip 文件系统

> ID：11818845
> 
> 赞同：4
> 
> 时间：2012-08-05T18:11:45.190
> 
> 标签：java, zip, java-7

Java 7 引入了一个 zip 文件系统。下面的链接说明了如何从 zip 文件创建 zip 文件系统。

[http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)

但是，我找不到如何从 InputStream 创建 zip 文件系统的示例。那可能吗？如果是这样，怎么做？

注意：我知道我可以将 InputStream 写入磁盘并按照描述创建一个 zip FileSystem。我认为这是一种黑客行为，我宁愿避免它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:32:04.887

不，这是不可能的，因为文件系统需要随机访问 ZIP 文件。

无耻的自插拔：您可能会发现[TrueZIP](http://truezip.java.net)更易于使用且功能更强大。但是，同样的约束也适用于它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T19:18:59.690

只是部分答案，但我希望您需要一个[自定义文件系统提供程序](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/filesystemprovider.html)，[这个关于内存文件系统的问题可能会有所帮助](https://stackoverflow.com/questions/5508601/how-to-create-a-directory-in-memory-pseudo-file-system-virtual-directory)。请注意，[newFileSystem 文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystems.html#newFileSystem%28java.net.URI,%20java.util.Map%29)显示了一个`memory://...`URL 方案，但没有更多详细信息。

正如在另一个答案中指出的那样，文件系统需要对数据进行双向访问，因此这假设有足够的内存来完全加载它。

# sql - 组内的正则表达式捕获

> ID：11818852
> 
> 赞同：1
> 
> 时间：2012-08-05T18:12:24.050
> 
> 标签：sql, regex

我正在研究一种基于 SQL 查询获取所有值的方法，然后在 php 中对它们进行转义。

这个想法是让那些在执行 SQL 查询时不关心安全性的程序员。

因此，当我尝试执行此操作时：

```
INSERT INTO tabla (a, b,c,d) VALUES ('a','b','c',a,b) 
```

正则表达式需要捕获`'a' 'b' 'c' a`和`b`

我为此工作了几天。

到目前为止，我可以使用 2 个正则表达式查询，但我想知道是否有更好的方法：

```
VALUES ?\((([\w'"]+).+?)\) 
```

根据前面的 SQL，这将匹配：

```
VALUES ('a','b','c',a,b) 
```

第二个正则表达式

```
['"]?(\w)['"]? 
```

将匹配

```
a b c a b 
```

以前删除`VALUES`，当然。

这种方式将匹配很多我要插入的值。

但例如不适用于 JSON。

```
{a:b, "asd":"ads" ....} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:44:49.050

首先，我想你应该知道 SQL 支持多种类型的单/双引号字符串：
`'Northwind\'s category name'`
`'Northwind''s category name'`
`"Northwind \"category\" name"`
`"Northwind ""category"" name"`
`"Northwind category's name"`
`'Northwind "category" name'`
`'Northwind \\ category name'`
`'Northwind \ncategory \nname'`

要匹配它们，请尝试以下模式：
`"[^\\"]*(?:(?:\\.|"")[^\\"]*)*"`
`'[^\\']*(?:(?:\\.|'')[^\\']*)*'`

将模式组合在一起：

```
VALUES\s*\(\s*(?:"[^\\"]*(?:(?:\\.|"")[^\\"]*)*"|'[^\\']*(?:(?:\\.|'')[^\\']*)*'|\w+)(?:\s*,\s*(?:"[^\\"]*(?:(?:\\.|"")[^\\"]*)*"|'[^\\']*(?:(?:\\.|'')[^\\']*)*'|\w+))*\) 
```

PHP5.4.5示例代码：

```
 <?php
$pat = '/\bVALUES\s*\((\s*(?:"[^\\"]*(?:(?:\\.|"")[^\\"]*)*"|\'[^\\\']*(?:(?:\\.|\'\')[^\\\']*)*\'|\w+)(?:\s*,\s*(?:"[^\\"]*(?:(?:\\.|"")[^\\"]*)*"|\'[^\\\']*(?:(?:\\.|\'\')[^\\\']*)*\'|\w+))*)\)/';
$sql_sample1 = "INSERT INTO tabla (a, b,c,d) VALUES ('a','b','c',a,b)";
if( preg_match($pat, $sql_sample1, $matches) > 0){
    printf("%s\n", $matches[0]);
    printf("%s\n\n", $matches[1]);    
}

$sql_sample2 = 'INSERT INTO tabla (a, b,c,d) VALUES (\'a\',\'{a:b, "asd":"ads"}\',\'c\',a,b)';
if( preg_match($pat, $sql_sample2, $matches) > 0){
    printf("%s\n", $matches[0]);
    printf("%s\n", $matches[1]);    
}

?> 
```

输出：

```
VALUES ('a','b','c',a,b)
'a','b','c',a,b

VALUES ('a','{a:b, "asd":"ads"}','c',a,b)
'a','{a:b, "asd":"ads"}','c',a,b 
```

如果您需要从结果中获取每个值，请拆分`,`（如解析 CSV）

我希望这能帮到您 ：）

# jquery - 删除 li:first 动画列表的其余部分向上同时改变不透明度

> ID：11818854
> 
> 赞同：0
> 
> 时间：2012-08-05T18:12:24.950
> 
> 标签：jquery, jquery-animate, opacity

在阅读 jq 后，我的问题仍然存在。我会改写这个问题..也许我会得到更多的回应；）

我正在尝试在 UL 中的不同元素上同时运行 2 个动画

删除第一行，动画其余部分，同时改变不透明度。

到目前为止，我得到了这个：

```
$('#NextUp li:first').slideUp( 500 , function() { 
    $('#NextUp li:first').remove();
    $('#NextUp li:first').attr('id', 'regel1');
});
$( ".t > li" ).each(function( intIndex ){
    var i =  1 - ($('li').index ($(this))/5) ;
    $(this).next().animate({ opacity: i }, {duration: 500,  queue: false})
}); 
```

导致2个动画相继出现。

我试图将幻灯片更改为使用动画，但它不想完成。（即动画在完成线没有被删除之前停止）

我怎样才能同时运行这两个动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:23:49.173

这是一种方法：

```
function fadeaway(el) {
    if (!el) {
        return false;
    }
    else {
        el.animate({'height' : 0}, 1000,
                   function(){
                       $(this).remove();
                       fadeaway($('ul.next_up > li:first'));
                   });                            
    }
}

fadeaway($('ul.next_up > li:first'));​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9LFjx/)。

这会将传入元素的高度设置为零，在回调中删除该元素，然后再次调用该函数以作用于下一个元素。

* * *

修改了上面的代码：

```
function fadeaway(el) {
    if (!el) {
        return false;
    }
    else {
        el.delay(500).animate({'height' : 0}, 1000,
                   function(){
                       var next = $(this).next();
                       $(this).remove();
                       fadeaway(next);
                   });                            
    }
}

fadeaway($('ul.next_up > li:first'));​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9LFjx/)。

这与上面的操作大致相同，但在动画之间提供了延迟（500 毫秒），并允许函数计算下一个兄弟应该是什么，而不是显式地对其进行硬编码。

此外，在这种方法中，它为 CSS 转换提供了一个时间来赶上......

参考：

*   [`animate()`](http://api.jquery.com/animate/).
*   [`delay()`](http://api.jquery.com/delay/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`next()`](http://api.jquery.com/next/).
*   [`remove()`](http://api.jquery.com/remove/).

# ssh - ssh 端口隧道有多安全？

> ID：11818857
> 
> 赞同：1
> 
> 时间：2012-08-05T18:13:17.043
> 
> 标签：ssh, port, openssh, forward

我试图弄清楚当我使用 OpenSSH ( `ssh -L <local_port>:<remote_host_2> -fN <remote_host_1>`) 进行端口转发时会发生什么，以及它与简单地 ssh'ing 到远程主机相比如何。

更具体地说，我想知道是否`remote_host_1`被泄露，它可以嗅探我发送到的流量`remote_host_2`吗？从 ssh 的 manfile 看来，这个问题的答案是肯定的，因此链（例如，如果我试图`telnet`通过`remote_host_2`）`remote_host_1`看起来像这样：
**local_host --[secure]--> remote_host_1 --[open ]-> remote_host_2**。

但是，如果我`remote_host_2`通过上述端口转发 ( `ssh <local_host> -p <local_port>`) SSH 到该端口会发生什么？是否正确，即使`remote_host_1`被妥协，也没有危险？换句话说，在这种情况下是否为真：
**local_host --[double encryption]--> remote_host_1 --> [single encryption] --> remote_host_2**。

最后，第二种情况是否仍然不同于 ssh'ing to`remote_host_1`和 ssh'ing to `remote_host_2`from 它，从某种意义上说，如果`remote_host_1`受到损害，它可以记录所有内容？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:30:21.923

您的数据在客户端和 SSH 之间被加密。从 SSH 到目标端口，它当然是纯文本的，或者更确切地说，它正是您通过隧道发送到目标应用程序的内容。只有隧道部分被加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:35:38.313

简而言之，所有问题都应该回答“是”。

回答我所有问题的参考资料是 Daniel J. Barrett 和 Richard Silverman 的“SSH，安全外壳”的第 11 章。可以在[此处](http://oreilly.com/catalog/sshtdg/chapter/ch11.html)找到包含所有相关信息的摘录。

我再次感谢 Simon 和 EJP 的回答。

# android - 包含可点击照片的 Gridview 的片段（类似画廊）

> ID：11818858
> 
> 赞同：0
> 
> 时间：2012-08-05T18:13:21.753
> 
> 标签：android, gridview, android-fragments, gallery

我要创建的是一个由 GridView 组成的片段，该 GridView 充满了可点击的图片。

我已经搜索了很多地方.. [Normal Grid](http://www.mkyong.com/android/android-gridview-example/) [GridView Frag](https://stackoverflow.com/questions/6914627/how-to-bind-data-in-gridview-found-in-fragment-in-android-app)

并以某种方式试图将它们一起工作..但似乎并没有完成这项工作

///// 活动类 /////

```
public static class ChampionFragment extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState){

        System.out.println("Inside onCreateView");

        String[] champList = getResources().getStringArray(R.array.championList);
        System.out.println("Got champList");

        View champView = inflater.inflate(R.layout.champion_menu, container, false);
        System.out.println("inflater");

        /*
        ArrayAdapter<String> arrayAptr = new ArrayAdapter<String>(this.getActivity().getApplicationContext(), R.layout.champion_menu,champList);
        System.out.println("Created array Adapter");

        //GridView grid = (GridView)champView.findViewById(R.id.champView);
        System.out.println("Grided");

        grid.setAdapter(arrayAptr);
        System.out.println("Set Adapter");
        */

        return  champView;
        //ArrayList champList = getChampionList();
    }
} 
```

///// 布局 ////

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/champView"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</GridView> 
```

所以是的，我已经尝试了很多方法......我不知道如何让它发挥作用，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T21:16:55.403

您应该使用不同的方法设置数据和适配器

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState); 
```

然后你需要设置一个onItemClickLister

```
champView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
            Intent intent = new Intent(getActivity(), SomeActivity.class);
            startActivity(intent);
        }
    }); 
```

# macos - Mac OS X / 打开带有指定窗口的终端*在指定的桌面上*

> ID：11818868
> 
> 赞同：4
> 
> 时间：2012-08-05T18:14:46.087
> 
> 标签：macos, terminal

[这个问题](https://stackoverflow.com/questions/1150380/mac-os-x-open-terminal-with-specified-windows)的公认答案解释了如何在 Terminal.app 中创建一个“窗口组”，以便您可以打开一组带有预定义选项卡的窗口，在预定义的位置执行预定义的命令。

这很好，但它似乎与 Mission Control 并没有很好的配合。我保存了我的窗口组，这些窗口分布在任务控制中的不同桌面上，但是当我恢复窗口组时，它们在我当前使用的桌面上都堆叠在一起！

如何让窗口组将窗口恢复到我保存它们的桌面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T18:20:01.947

看起来不再是通过桌面分隔应用程序窗口了；不是根据[这个 MacForums 线程](http://www.mac-forums.com/forums/os-x-operating-system/257121-how-disable-grouping-mission-control.html)。

有一个叫做[TotalSpaces](http://totalspaces.binaryage.com/)的应用程序，声称可以恢复任务控制前的窗口分组，但它是一个付费应用程序，所以我没有尝试过。

你最好在[AskDifferent](https://apple.stackexchange.com/)或[SuperUser](https://superuser.com/)上问这个问题......

# css - Word-wrap : break-word 在文本顶部添加填充

> ID：11818869
> 
> 赞同：5
> 
> 时间：2012-08-05T18:14:50.350
> 
> 标签：css, text

我有许多包含各种用户生成副本的 div。这个div上的css如下：

```
copy {
    width:200px;
    padding:20px 0px 20px 42px;
    line-height:18px;
    color:#555555;
    word-wrap: break-word;
} 
```

当内容是一个没有空格的长字符串时，`word-wrap:break-word`会适当地破坏副本，但会在顶部添加一个“空行”，就好像有返回`</br>`或其他东西一样。

`white-space: pre;`似乎在上述情况下解决了这个问题，但为所有其他文本添加了间距。

我已经成功使用了很多次，但从未见过这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:22:32.280

将填充更改`.copy`为

`padding: 20px 0px 20px 45px;`

[**演示**](http://jsfiddle.net/ZNZjW/)

**从 更改`42px`为`45px`*

# java - 尝试从其他类检索时为空值

> ID：11818871
> 
> 赞同：0
> 
> 时间：2012-08-05T18:14:54.910
> 
> 标签：java, android

不知何故，我的大脑无法正常工作，轻度发烧也无济于事。

我有以下代码，batteryLevel 这里显示了正确的值 - 50。

```
public class AlarmEventService extends Service {    
    static String batteryLevel; 
    ...
    int level = intent.getIntExtra("level", 0); 
    batteryLevel = String.valueOf(level); 
    Log.i(APP_TAG, batteryLevel);
} 
```

为什么当我获得 AlarmEventService.batteryLevel 的值时在我的外部调用中该值为空？

```
public class AlarmEventReceiverWake extends BroadcastReceiver { 
    ...
    Log.i(APP_TAG, "Battery Level " + AlarmEventService.batteryLevel);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:32:24.277

从您提供的代码来看，它没有理由不能按预期工作。可能是：

*   另一个名为 batteryLevel 的变量可以在本地声明，因此不会将值分配给全局版本。
*   初次调用后，可能会重置 batteryLevel 的值。

确保声明：

```
batteryLevel = String.valueOf(level); 
```

实际上之前被调用*过*

```
Log.i(APP_TAG, "Battery Level " + AlarmEventService.batteryLevel); 
```

# ios - 在页面卷曲过渡之前，空表行变得透明

> ID：11818873
> 
> 赞同：0
> 
> 时间：2012-08-05T18:15:28.550
> 
> 标签：ios, uitableview, page-curl

我有一个表格视图。当您向表中添加新项目时，我会显示一个表单供您输入要添加到表中的项目的名称和描述。当您按下 Done 时，模态视图将关闭并推送项目的详细视图。我没有像通常使用导航控制器那样推送详细视图，而是使用页面卷曲过渡。

```
 DetailViewcontroller *detailViewcontroller = [[DetailViewcontroller alloc] initWithStyle:UITableViewStyleGrouped];
        detailViewcontroller.coolObject = collectionOne;

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration: 1.00];
        [UIView setAnimationDelay:.25];
        [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.navigationController.view cache:YES];

        //Start Animation
        [UIView commitAnimations];

[self.navigationController pushViewController:detailViewcontroller animated:NO];

        [detailViewcontroller release]; 
```

当有足够的填充行来填满屏幕时，这非常有效。但是，如果只填充了几行，则表格的其余部分将变得透明，在页面卷曲转换之前没有行的情况下，您可以在页面卷曲转换加载之前看到下方的部分详细信息视图。

看起来详细视图首先显示，然后视图的空壳在事后卷曲。

我已将表格行和表格背景颜色设置为黑色、白色，除了 clearColor 之外的任何颜色，它仍然可以。

是时间问题吗？我是否应该安排时间以确保在模式视图被关闭之前不会推送详细视图？也许告诉 Add item 控制器显示详细视图而不是 tableview 的 addViewDisDimiss 委托方法？

# wordpress - 链接到最新帖子，不包括 2 个类别

> ID：11818877
> 
> 赞同：0
> 
> 时间：2012-08-05T18:15:59.560
> 
> 标签：wordpress, categories

试图在主页上创建一个超链接，将您带到不包括 2 个类别的最新博客文章（在单一视图中，即整个文章）。

我分别链接到排除的类别，如下所示：

```
<?php
    $args = array( 'numberposts' => '1', 'category' => 23 );
    $recent_posts = wp_get_recent_posts( $args );                   
    foreach( $recent_posts as $recent ){
    echo '<a href="' . get_permalink($recent["ID"]) . '">Latest Post</a>';
    }
?> 
```

但不知道如何编写一个链接，将您带到除类别 23 和 24 之外的最新帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:48:09.703

这是罗斯汉尼在 Wordpress 论坛上的回答：

```
<?php
$args = array(
    'posts_per_page'   => 1,
    'category__not_in' => array( 23, 24 )
);

$recent_posts = get_posts( $args );

foreach ( $recent_posts as $recent ) {
    echo '<a href="' . get_permalink( $recent ) . '">Latest Post</a>';
}
?> 
```

# html - 每次调用绘图函数后，如何防止对象位置呈指数增长？

> ID：11818879
> 
> 赞同：0
> 
> 时间：2012-08-05T18:16:12.850
> 
> 标签：html, canvas, draw, setinterval

简单的动画，每次点击都会在画布上创建类似烟花的效果。问题是动画是用 setInterval(draw) 制作的，每次重新绘制画布时，每个粒子的位置都是 +=particle.speed。但随着每次点击，粒子移动得越来越快，因为似乎每个粒子的速度都没有重置。

[正如您在此处的工作示例](http://jsfiddle.net/k74Hj/1/)上单击几下所看到的那样：第一次单击时，粒子移动得非常（正确）缓慢，但随着随后的每次单击，速度都会增加。

使用的 JS 也粘贴在下面，非常感谢任何帮助！

```
 var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    canvas.addEventListener("click", startdraw, false);

    //Lets resize the canvas to occupy the full page
    var W = window.innerWidth;
    var H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;

    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, W, H);

    //global variables
    var radius;
    radius = 10;
    balls_amt = 20;
    balls = [];

    var locX = Math.round(Math.random()*W);
    var locY = Math.round(Math.random()*H);

    //ball constructor
    function ball(positionx,positiony,speedX,speedY)
    {   
        this.r = Math.round(Math.random()*255);
        this.g = Math.round(Math.random()*255);
        this.b = Math.round(Math.random()*255);
        this.a = Math.random();
        this.location = {
            x: positionx,
            y:positiony
        }
        this.speed = {
            x: -2+Math.random()*4, 
            y: -2+Math.random()*4
        };

    }

    function draw(){

        ctx.globalCompositeOperation = "source-over";
        //Lets reduce the opacity of the BG paint to give the final touch
        ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        ctx.fillRect(0, 0, W, H);

        //Lets blend the particle with the BG
        //ctx.globalCompositeOperation = "lighter";

        for(var i = 0; i < balls.length; i++)
        {
            var p = balls[i];
            ctx.beginPath();
            ctx.arc(p.location.x, p.location.y, radius, Math.PI*2, false);
            ctx.fillStyle = "rgba("+p.r+","+p.g+","+p.b+", "+p.a+")";

            ctx.fill(); 
            var consolelogX = p.location.x;
            var consolelogY = p.location.y;
            p.location.x += p.speed.x;  
            p.location.y += p.speed.y;

        }
    }
    function startdraw(e){

        var posX = e.pageX;     //find the x position of the mouse
        var posY = e.pageY;     //find the y position of the mouse
        for(i=0;i<balls_amt;i++){
            balls.push(new ball(posX,posY));
        }

        setInterval(draw,20);
        //ball[1].speed.x;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:22:47.560

在每次单击`startdraw`被调用后，每次都会开始对该方法进行新的定期调用 ( `setInterval`) `draw`。所以在第二次点击之后你有 2 个平行间隔，在第三次点击之后你有 3 个平行间隔。它不是指数级的，只是线性增加:)

一个可能的脏修复：引入一个`interval`全局变量，并替换这一行：

```
 setInterval(draw,20); 
```

有了这个：

```
 if (!interval) interval = setInterval(draw,20); 
```

或者更好的解决方案是在 onLoad 事件开始间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:21:34.280

setInterval 将每 20 毫秒重复一次调用，并返回一个 ID。您可以通过调用 clearInterval(ID) 来停止重复。

```
var id = setInterval("alert('yo!');", 500);
clearInterval(id); 
```

# javascript - 重新启用文本选择（Opera，webkit，ie）

> ID：11818881
> 
> 赞同：1
> 
> 时间：2012-08-05T18:16:15.653
> 
> 标签：javascript, jquery, textselection

如何重新启用 IE、Opera 和 Webkit 上的文本选择？

我这样禁用它：

```
$(this).mousedown(function(){return true;}); //Opera, webkit
$(this).bind('selectstart',function(){return true;}); //IE 
```

（使用 Firefox，我可以轻松地重新启用它`$(this).css('MozUserSelect','text')`；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:18:58.983

我认为最好的办法是[取消绑定](http://api.jquery.com/unbind/)事件侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:18:33.757

不要使用`bind()`和`unbind()`方法。使用`on()`and`off()`代替 — 从 jQuery 1.7 及更高版本开始首选。

# php - PHP用户个人资料图片缓存

> ID：11818882
> 
> 赞同：1
> 
> 时间：2012-08-05T18:16:24.240
> 
> 标签：php, image, caching

好的，所以在我的网站上，用户可以上传个人资料图片。但问题是，如果他们通过上传和覆盖现有的个人资料图片来更新它，他们必须等待浏览器缓存清除，并且网站上的其他人也一样。

我知道我可以通过在图像 URL 的末尾粘贴一个字符串来轻松解决这个问题，例如`?id=22185`，但这会使我的网站加载时间非常慢。

你们中的任何人都可以推荐一种为网站上的每个用户立即更新用户个人资料图片的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:18:11.947

使用文件修改时间作为 URL 变量。这样，图像将被缓存，直到该数字更改，这只会在文件更新时发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:42:15.200

为每个图像设置唯一的名称。当用户更改图像时，文件名也会更改，浏览器将加载新图像而不是提供旧的 FROM 缓存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T18:21:35.197

您可以轻松地为您的文件添加时间戳，或者您可以使用 PHP 的“headers”函数来更改“Expire”参数。

# google-chrome - 现在 chrome 强制使用 webstore 下载扩展，是否有机会迁移我的旧用户？

> ID：11818887
> 
> 赞同：2
> 
> 时间：2012-08-05T18:17:15.310
> 
> 标签：google-chrome

我有一个曾经在我的服务器上托管的扩展程序。我有一个更新 url 指向我的服务器，更新会自动发布给用户。

最新的 chrome 版本不允许通过 3rd 方 url 安装扩展，它们需要托管在 webstore 中。

如果我这样做，是否所有用户都需要重新添加扩展程序，或者他们可以以某种方式无缝迁移以从网络商店接收未来的更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:12:53.347

通过导入现有密钥以相同的 id 发布到网上商店：

将您的私钥作为“key.pem”放在扩展目录的根目录中，然后将其压缩到扩展中。上传后会被删除。

重新发布旧 crx 并将 update_url 设置为：

[http://clients2.google.com/service/update2/crx](http://clients2.google.com/service/update2/crx)

这样，它将是无缝的。

（来源： [https](https://groups.google.com/forum/?fromgroups#!topic/chromium-extensions/3vvygtEajMQ%5B1-25%5D) ://groups.google.com/forum/?fromgroups#!topic/chromium-extensions/3vvygtEajMQ%5B1-25%5D https://groups.google.com/a/chromium.org/forum/ ?fromgroups#!topic/chromium-apps/qZ5PXH2KzPs%5B1-25%5D )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:45:26.350

您仍然可以使用 3rd 方 .crx 扩展、主题、应用等。

但文件必须下载到本地文件夹，然后拖到扩展管理器（chrome://chrome/extensions/）中。

# google-app-engine - GAE No route to host 错误

> ID：11818891
> 
> 赞同：1
> 
> 时间：2012-08-05T18:18:03.327
> 
> 标签：google-app-engine

部署我的 GAE 应用程序时，我收到以下错误：

```
ERROR appcfg.py:2161 An error occurred processing file '': <urlopen error [Errno 65] No route to host>. Aborting. 
```

当我尝试回滚上次更新时，我得到了同样的错误。我可以采取哪些步骤来调试它？

# node.js - Zappa 错误无法找到视图（翡翠模板）

> ID：11818893
> 
> 赞同：3
> 
> 时间：2012-08-05T18:18:18.413
> 
> 标签：node.js, coffeescript, pug, zappa

我正在尝试一个 zappa 节点应用程序，但除了一个简单的例子之外，我无法让它工作。

我有 application.coffee

```
 require('zappajs') ->
       @set views: "#{__dirname}/views"
       @set 'view engine': 'jade'
       @use 'bodyParser', 'methodOverride', @app.router, 'static'

       @configure
         development: => @use errorHandler: {dumpExceptions: on}
         production: => @use 'errorHandler'

       @get '/': -> @render 'index' 
```

我得到一个错误。Zappa 似乎在文件名前面加上了一个 guid。

```
 example/app/views/7b16eeab-de6f-41b0-b196-8f23f4b7237d/index.jade 
```

这是完整的跟踪

```
 Error: ENOENT, no such file or directory   '/Users/irfn/project/example/app/views/7b16eeab-de6f-41b0-b196-8f23f4b7237d/index.jade'
    at Object.fs.openSync (fs.js:338:18)
    at Object.fs.readFileSync (fs.js:182:15)
    at Object.rethrow (/Users/irfn/project/example/node_modules/jade/lib/runtime.js:155:27)
    at parse (/Users/irfn/project/example/node_modules/jade/lib/jade.js:116:13)
    at Object.exports.compile (/Users/irfn/project/example/node_modules/jade/lib/jade.js:163:9)
    at Function.exports.compile (/Users/irfn/project/example/node_modules/zappajs/node_modules/express/lib/view.js:68:33)
    at ServerResponse.res._render (/Users/irfn/project/example/node_modules/zappajs/node_modules/express/lib/view.js:417:18)
    at ServerResponse.res.render (/Users/irfn/project/example/node_modules/zappajs/node_modules/express/lib/view.js:318:17)
    at Object.zappa.app.app.(anonymous function).apply.concat.render (/Users/irfn/project/example/node_modules/zappajs/lib/zappa.js:593:33)
    at Object.zappa.app.app.(anonymous function).apply.concat.ctx.render (/Users/irfn/project/example/node_modules/zappajs/lib/zappa.js:545:31) 
```

这是我的包 json 依赖项的设置方式

```
 "dependencies": {
      "coffee-script": "1.3.3",
      "underscore": ">= 1.3.3",
      "stylus": ">= 0.28.2",
      "zappajs": ">= 0.3.10",
      "jade":   ">= 0.18.0"
    },
     "devDependencies": {
       "watchr": "*",
       "mocha": "*",
       "chai":  "*",
       "request": "*"
     }, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:44:26.773

我自己遇到了这个 - 没有时间追查原因，但有一个简单的解决方法：而不是

```
@get / : ->
    @render index: {key:value} 
```

使用更老派的连接风格

```
@app.get '/', (req,res) -> 
    res.render 'index', {key:value} 
```

希望这可以帮助您克服困难。

PS：想一想，我认为这可能与 zappa 默认评估 coffee(k/c)up 模板的方式有关。在这种情况下，它可能会尝试将该逻辑应用于损坏的翡翠。

# ruby-on-rails - 无法与工头一起启动应用程序

> ID：11818895
> 
> 赞同：1
> 
> 时间：2012-08-05T18:18:27.023
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, foreman

我有一个`Procfile`这样的

```
web: bundle exec puma  
worker: bundle exec sidekiq 
```

当我尝试启动我的应用程序时，我得到了这个

```
15:13:30 web.1    | /usr/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [Ascii85-1.0.1, actionmailer-3.2.6, actionpack-3.2.6, activemodel-3.2.6, activerecord-3.2.6, activeresource-3.2.6, activesupport-3.2.6, archive-tar-minitar-0.5.2, bcrypt-ruby-3.0.1, bigdecimal-1.1.0, bootstrap-will_paginate-0.0.7, bson-1.6.4, bson_ext-1.6.4, cancan-1.6.8, carrierwave-0.6.2, carrierwave-mongoid-0.2.1, carrierwave-mongoid-0.1.0, celluloid-0.11.1, childprocess-0.3.2, chunky_png-1.2.5, ckeditor-3.7.0.rc3, ckeditor-3.6.3, ckeditor-rails-0.0.3, ckeditor_rails-3.6.3.1, ckeditor_rails-3.6.3, ckeditor_rails-3.6.2.2, client_side_validations-3.2.0.beta.6, client_side_validations-3.1.4, client_side_validations-mongoid-2.4.0.beta.2, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.3.3, coffee-script-source-1.3.2, coffee-script-source-1.3.1, commonjs-0.2.5, compass-0.12.2, compass-rails-1.0.3, connection_pool-0.9.2, cookiejar-0.3.0, devise-2.1.2, devise-2.1.1, devise-2.1.0, devise-2.0.4, em-http-request-1.0.2, em-socksify-0.2.0, eventmachine-1.0.0.beta.4, excon-0.14.2, excon-0.14.1, excon-0.13.4, execjs-1.4.0, execjs-1.3.0, fancybox-rails-0.1.4, faye-0.8.2, faye-websocket-0.4.5, ffi-1.0.11, fog-1.4.0, fog-1.3.1, foreman-0.51.0, foreman-0.48.0, formatador-0.2.3, formatador-0.2.2, formatador-0.2.1, fssm-0.2.9, hashr-0.0.21, http_parser.rb-0.5.3, io-console-0.3, ios-checkboxes-0.2.1, journey-1.0.4, jquery-rails-2.0.2, jruby-pageant-1.0.2, json-1.7.3, json-1.5.4, less-2.1.0, less-rails-2.2.3, less-rails-2.2.1, mime-types-1.19, mime-types-1.17.2, minitest-2.5.1, mongoid-3.0.3, mongoid-3.0.0.rc, mongoid-2.4.12, mongoid-2.4.11, mongoid-2.4.10, mongoid_slug-0.10.0, moped-1.2.0, moped-1.0.0, mousetrapjs-0.0.7, mousetrapjs-0.0.6, mousetrapjs-0.0.5, multi_json-1.3.6, multi_json-1.3.5, nested_form-0.2.0, net-scp-1.0.4, net-ssh-2.5.2, net-ssh-2.4.0, net-ssh-2.3.0, nokogiri-1.5.5, nokogiri-1.5.4, nokogiri-1.5.3, nokogiri-1.5.2, origin-1.0.1, orm_adapter-0.4.0, orm_adapter-0.3.0, orm_adapter-0.1.0, orm_adapter-0.0.7, pdf-reader-1.1.0, prawn-0.12.0, prawn_rails-0.0.8, puma-1.5.0, quiet_assets-1.0.1, rabl-0.7.0, rabl-0.6.14, rabl-0.6.13, rabl-0.6.12, rabl-0.6.11, rack-1.2.1, rack-protection-1.2.0, rails-3.2.6, rails-i18n-0.6.3, railties-3.2.6, raindrops-0.10.0, raindrops-0.9.0, raindrops-0.8.1, rake-0.9.2.2, rdiscount-1.6.8, rdoc-3.9.4, redis-namespace-1.0.3, resque-1.20.0, ruby-hmac-0.4.0, ruby-rc4-0.1.5, rubygems-update-1.8.22, sass-3.1.19, sass-3.1.18, sass-3.1.17, sass-3.1.16, sass-rails-3.2.5, sidekiq-2.1.0, sinatra-1.3.2, sinatra-1.0, sprockets-2.1.3, sqlite3-1.3.6, stringex-1.4.0, thin-1.3.1, thor-0.15.4, thor-0.15.3, timers-1.0.1, tire-0.4.2, ttfunk-1.0.3, twitter-bootstrap-rails-2.1.1, uglifier-1.2.7, uglifier-1.2.6, uglifier-1.2.5, uglifier-1.2.4, vanities-0.1.3, vegas-0.1.11, warden-1.2.1, warden-1.1.1, will_paginate-3.0.3, will_paginate_mongoid-1.0.5, yajl-ruby-1.1.0, yajl-ruby-0.7.7, zurb-foundation-2.2.1.2] (Gem::LoadError) 
```

我已经尝试过运行, `bundle`，`bundle install`这 是怎么回事？ 提前致谢`bundle update``gem install bundler`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:43:24.393

尝试这个

```
bundle pack --all
bundle install 
```

# javascript - 如何在 JavaScript 中的字符串中间进行锚定正则表达式匹配

> ID：11818896
> 
> 赞同：4
> 
> 时间：2012-08-05T18:18:29.083
> 
> 标签：javascript, python, regex, perl, parsing

我找不到让 JavaScript 正则表达式在字符串中间开始匹配的方法，*并*用 '^' 绑定它（将正则表达式的开头锚定到我指定的起点）。

Perl 和 Python 有我需要的东西（尽管它们是完全不同的方法）。

在 Perl 我可以这样做：

```
$s = 'foo bar baz';
$r = qr/\Gbar/;
pos($s) = 4;
print 'OK' if $s =~ $r; 
```

在 Python 中，我可以这样做：

```
s = 'foo bar baz'
r = r'bar'             # r'^bar' also works
if re.match(r, s[4:]): # re.match implies '^'
    print 'OK' 
```

在 JavaScript 中（至少在 Node.js 中）我尝试：

```
s = 'foo bar baz';
r = /^bar/g;
r.lastIndex = 4;
if (r.exec(s))
    console.log('OK'); 
```

这是行不通的。如果我将第二行更改为：

```
r = /bar/g; 
```

然后它确实匹配，但它也可以在 4 之后的任何位置匹配（我不想要）。

背景：我正在开发一个名为 Pegex 的多语言解析框架的 JavaScript 端口，其中每个终端都是一个正则表达式，在当前解析的位置（并锚定在它的前面）进行尝试。效率是一个问题。例如，在我的起点使用输入的子字符串副本将是最糟糕的解决方案。

我能想到的一种解决方案是将匹配项的“索引”值与我设置的 lastIndex 值进行比较，以查看它是否在开始时匹配。这会降低 '^' 的效率，但可能不会花费太多，因为 Pegex 正则表达式通常很小且没有回溯。

谁能想到更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:00:25.917

匹配 "^.{4}actualre" 怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:19:33.680

将字符数跳过到要开始匹配的位置是解决此问题的一个非常好的通用解决方案（恕我直言）。

```
s = 'foo bar baz';                                                          
r = 'bar';                                                                  
p = 4;                                                                      
r = new RegExp('^[\\s\\S]{' + p + '}' + r);                 
if (r.exec(s))                                                              
    console.log('OK'); 
```

我将不得不测试它在大数据上的表现，但我想它可能会非常好，具体取决于正则表达式的实现。例如，如果实现知道 [\s\S] 是在 JS 中请求任何字符（包括换行符）的常用方式，那么它可以简单地一次性向前索引。

还有什么好主意吗？:)

# git - 将 Git 存储库与已发布的存储库分开的良好做法？

> ID：11818898
> 
> 赞同：1
> 
> 时间：2012-08-05T18:18:48.413
> 
> 标签：git

我们有一个中央 Git 存储库，开发人员可以从中获取和推送更改。他们在默认的主分支上进行更改。我们的持续集成 (CI) 工具从这个默认的主分支构建工件，并且是负责将我们想要测试的东西提升到“UAT”分支的实体（这实际上是由构建主管人员单击将进行促销的 CI 工具网页）。CI 工具还负责将代码从 UAT 提升到“生产”分支。UAT 和生产分支的目的是捕获提升到 UAT 和生产的内容。UAT 分支上没有开发，生产将仅包含不常见的“热修复”形式的“开发”，因为我们的开发/发布迭代非常快（1 周迭代）。

如果我们可以轻松做到这一点，我们希望设置一个控件，以防止有人错误地直接对 UAT 和生产分支进行开发更改。一种想法是在中央服务器上安装一个挂钩，以确保只有 CI 工具用户才能对 UAT 和生产进行更改。我们还认为我们可以有一个开发人员使用的中央仓库，它只包含主分支，并有一个包含 UAT 和生产分支的第二个仓库。CI 工具将与两个 repos 进行通信——它将查看 repo 的开发以查看何时有更改，并使用第二个 repo 将其推广到 UAT 和 Production 分支。

这是人们通常会做的事情吗（为了开发和推广目的而单独的回购？）它会比服务器挂钩方法更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:28:36.120

出于您订阅的目的，我会说通过钩子防止未经授权的提交和合并是要走的路。您不必特别注意要跟踪的遥控器。你也可以很容易地一直来回合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:42:27.113

我想说克隆一个 git repo 既便宜又易于设置。如果 CI 用户/构建大师能够将某些东西推广到 UAT/生产，为什么不将更改推送到单独的存储库？可能类似于 linux 内核开发模型。每个更改都已由开发人员签入，由 CI 用户测试，然后授权并推送（可能已签名）到发布存储库。

即使可以将某些领域的提交限制为某些人，我不认为这是使用分布式工具的方式。我真的很喜欢开放存储库，并且可能将其他专门的存储库用于某些用途。Git 会保留所有内容，并且您不会通过推入其他存储库而丢失信息。所以作者始终是作者——只有提交者会改变。

这是一篇非常好的文章，其中包含大量信息： [What git branching models 实际上起作用](https://stackoverflow.com/questions/2621610/what-git-branching-models-actually-work "什么 git 分支模型真正起作用")

# php - 如何配置 WebMatrix 以在 *.htm、*.html 文件上运行 PHP？

> ID：11818902
> 
> 赞同：0
> 
> 时间：2012-08-05T18:19:13.783
> 
> 标签：php, webmatrix, iis-express

我正在使用 WebMatrix 在本地运行一个 PHP 网站。该站点在 *.html 文件中使用 PHP。默认情况下，WebMatrix 不允许这样做。如何配置 WebMatrix 以便 PHP 运行？

（请注意，我正在回答我自己的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:19:13.783

您需要编辑文件：

```
%USERPROFILE%\Documents\IISExpress\config\applicationhost.config 
```

（例如，“C:\Users\Marcus\Documents\IISExpress\config\applicationhost.config”）

你会注意到这样一行：

```
<add name="PHP53_via_FastCGI" path="*.php" verb="GET,HEAD,POST" modules="FastCgiModule" scriptProcessor="C:\Program Files (x86)\iis express\PHP\v5.3\php-cgi.exe" resourceType="Either" /> 
```

您可以通过添加新行来添加其他文件扩展名：

```
<add name="PHP53_via_FastCGI_html" path="*.html" verb="GET,HEAD,POST" modules="FastCgiModule" scriptProcessor="C:\Program Files (x86)\iis express\PHP\v5.3\php-cgi.exe" resourceType="Either" />
<add name="PHP53_via_FastCGI_htm" path="*.htm" verb="GET,HEAD,POST" modules="FastCgiModule" scriptProcessor="C:\Program Files (x86)\iis express\PHP\v5.3\php-cgi.exe" resourceType="Either" /> 
```

为每个 <add /> 元素赋予唯一的“名称”属性很重要。

# delphi - 在数据库中申请的信用系统（MyDAC）

> ID：11818904
> 
> 赞同：0
> 
> 时间：2012-08-05T18:19:20.793
> 
> 标签：delphi, mydac

我想做一个**信用系统**。如果有用户积分“**警告：**您有积分！数量：[列中的杰顿值]”，如果没有用户积分“**警告：**您没有积分！” 我使用**了 MyDAC**组件

**Jeton：**用户信用栏。（在数据库中）

我该怎么做？

**我试着做**

```
MyQuery1.Close;
 MyQuery1.SQL.Text :=' select* from uyeler '+
                     'where nick=:0 and jeton=:1';

 MyQuery1.Params[0].AsString:=Edit1.Text;
 MyQuery1.Params[1].AsString:=?must?;

 MyQuery1.open;

 If MyQuery1.RecordCount=0 Then
  Begin

  MessageDlg('warning: you have not credit!', mtWarning,[mbOK],0)

 End
 Else
 Begin

  MessageDlg('warning: you have credit! quantity: (Jeton value in column)', mtWarning,[mbOK],0)

End; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:29:39.480

如果`jeton`字段是信用，你可以写这样的东西。

```
 MyQuery1.Close;
 MyQuery1.SQL.Text :='select jeton from uyeler where nick=:0';
 MyQuery1.Params[0].AsString:=Edit1.Text;
 MyQuery1.open;

 If (MyQuery1.IsEmpty) or (MyQuery1.FieldByName('jeton').AsDouble<=0) Then
  Begin
   MessageDlg('warning: you have not credit!', mtWarning,[mbOK],0)
  End
  Else
  Begin
   MessageDlg(Format('warning: you have credit! quantity: (%n)',[MyQuery1.FieldByName('jeton').AsDouble]), mtWarning,[mbOK],0);
  end; 
```

# objective-c - 如何有效地展平 NSOutlineView？

> ID：11818910
> 
> 赞同：0
> 
> 时间：2012-08-05T18:20:05.930
> 
> 标签：objective-c, macos, cocoa, nsoutlineview, nstreecontroller

我有一个绑定到我的 NSTreeController 的 NSOutlineView。NSTreecontroller (myTreeController) 的内容使用以下命令设置数据： [self.myTreeController setContent:self.myArrayOfFiles]; 数组的内容由使用 NSTreeNode 子类 (TKnode) 添加的 NSTreeNode 父对象和子对象组成：

`[TKnode treeNodeWithRepresentedObject:myRootObject]`.

这很好用，可以正确显示我的 NSoutlineView。但是当我想遍历 NSOutlineView 的内容时，我需要将其展平并将对象存储在一个数组中。这是我需要一些帮助的地方，因为我拥有的解决方案不是最佳的并且可能容易出错。

我首先使用以下方法返回 NSTreeController 的内容：

```
 - (NSArray *)rootNodes;
{
    return [[myTreeController arrangedObjects] childNodes] ;
} 
```

这将返回一个包含树结构的大小为 1 的 NSTreeControllerTreeNode 数组。然后我使用 childNodes 方法访问树结构的第一层。

```
- (NSArray *)flattenedNodes
{
    NSMutableArray *mutableArray = [NSMutableArray array]; 
    for (TKnode *rootnode in [self rootNodes]){
        for (TKnode *node in [rootnode childNodes]){

            if (![[node representedObject] isLeaf]){
                [mutableArray addObjectsFromArray:[self descendants:[node representedObject]]];
            }
            else {
                [mutableArray addObject:[[node representedObject] representedObject]];
            }
        }
    }
    DLog(@"My files: %lu",[mutableArray count]);
    return [[mutableArray copy] autorelease];
} 
```

使用以下方法递归访问子项的子项：

```
- (NSArray *)descendants:(TKnode *) node
{
    NSMutableArray *descendantsArray = [NSMutableArray array]; 
    for (TKnode *mynode in [node childNodes]) {

        [descendantsArray addObject:[mynode representedObject]];

        if (!mynode.isLeaf){
            [descendantsArray addObjectsFromArray:[self descendants:mynode]];
        }
    }
    return [[descendantsArray copy] autorelease]; // return immutable
} 
```

这有效并返回一个数组，其中包含我的所有对象，而不是 NSTreeNode，而是我感兴趣的对象。但似乎很容易出错，我有时必须在对象上调用两次代表对象才能访问我的对象。这是我应该使用 NSTReeController 和 NSTreeNodes 的方式吗？有没有更好的办法？我首先想使用 NSTreeNode 和 NSTreeController 的原因是为了免费获得一些已经实现的方法，例如排序和排列对象，我习惯于使用 NSTableView。但是我用来访问 NSTreeController 内容的方法似乎不正确？我应该使用`arrangedObjects`来获取 NSTReeController 的内容还是应该使用不同的方法？非常感谢任何有关如何正确展平 NSOutlineView 的建议。

谢谢！干杯，特隆德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:13:11.017

这个问题原来是一个真正的风滚草（我一个月内的第二个）所以我想跟进一些更多信息。我最终使用上面发布的代码来展平我的 NSOutlineView，因为我找不到更好的选择。当您必须递归地遍历未知数量的子文件夹（在我的情况下）时，这似乎`descendants`是每次达到更深层次时调用该方法的最佳选择。[我在这里](https://wabbit.svn.codeplex.com/svn/Wabbitstudio/Mac/WabbitStudio/WabbitCode/NSTreeController+WCExtensions.m)找到了一个非常有用的网站，其中包含许多有用的 NSTreeController 扩展，它使用的方法与我采用的方法相同。除非有人帮助我找出一种更快更好的算法来扁平化 NSTreeController 的排列对象，否则我相信我会坚持使用这种方法。

干杯，特隆德

**更新：**在对解决方案提出问题后，我决定发布我的方法来展平大纲视图。我希望他能帮助别人。

```
- (void) flattenOutlineview
{
    NSMutableArray *nodeArray = [NSMutableArray array];
    [self.myFlattenedFiles removeAllObjects];
    [self.myFlattenedNodes removeAllObjects];
    [self.myIndexDict removeAllObjects];
    [nodeArray removeAllObjects];

    for (SDNode *rootnode in self.rootNodes)
    {
        [nodeArray addObject:rootnode];

        [self.myIndexDict setObject:[rootnode indexPath]
                             forKey:[[[rootnode representedObject] representedObject] fullpathL]];

        for (SDNode *node in [rootnode childNodes])
        {
            if (node.isLeaf){
                [nodeArray addObject:node];
                 [self.myIndexDict setObject:[node indexPath]
                                 forKey:[[[node representedObject] representedObject] fullPathCopy]];
            }
            else {
                [nodeArray addObjectsFromArray:[self descendants:node]];
                [self descendantsIndex:node];
           }  
       }  
   }
   [self.myFlattenedNodes setArray:[nodeArray copy]];

   for (SDNode *node in self.myFlattenedNodes)
   {
       [self.myFlattenedFiles addObject:[[node representedObject] representedObject]];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T06:15:53.633

从我刚刚写的另一个答案中看到了这个链接。如果您将树中的所有内容展开/显示，这将起作用：

```
for (NSUInteger row = 0; row < [outlineView numberOfRows]; row++)
{
    NSTreeNode* node = [outlineView itemAtRow:row];
    [nodeArray addObject:node];
} 
```

outlineView 的行基本上是一棵扁平的树。您也许可以在迭代时扩展每个项目以获取所有项目。

# javascript - 使用一个 div 来限制另一个 div 的大小

> ID：11818913
> 
> 赞同：0
> 
> 时间：2012-08-05T18:20:23.963
> 
> 标签：javascript, jquery, html, css

我有两个 div，'content-left' 和 'content-right'。content-left div 的高度可以不同。content-right div 具有恒定的高度。

更新： content-left 的大小不仅可以变化，而且它的大小可能会随着时间的推移而变化，具体取决于用户所做的事情。

我希望 content-left 包含一个 div 滚动条。我不希望浏览器窗口本身有滚动条。

我希望内容正确的 div 的内容始终可见。content-right 永远不应该滚出页面。

我想出了下面的代码，但我认为它可能会更好。

我在 Firefox 和 chrome 中对此进行了测试。Internet Explorer 与我无关。

本质上，我只是“隐藏”了左 div，确定了右 div 顶部与窗口大小的差异，并设置了左 div 的 max-height 属性。然后滚动发生溢出：自动

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript">
</script>

<script type="text/javascript">
    $(document).ready(function() {
    processLeftDiv();
});
$(window).resize(function() {
    processLeftDiv();
});

function processLeftDiv()   {
        $('#content-left').hide();
        windowHeight = $(window).height() ;
        positionTop = $('#content-right').position().top ;
        $('#content-left').css('max-height', ( windowHeight - ( positionTop + 20 ) ) );
             // the 20 is padding
        $('#content-left').show();
}
</script>

<title>Test</title>
<style type="text/css">

#header
{
    width: 100%;
    background: red;
}

#content-left
{
    float: left;
    margin-bottom: 5px;
    width: 50%;
    height: 100%;
    max-height: 100%;
    overflow: auto;
    background: blue;
    display:none;
}
#content-right
{
    float: right;
    width: 50%;
    background: green;
}  

</style>
</head>
<body>
    <div id="header">
              Header
             <p>Header stuff</p>
    </div>

    <div id="body">

        <div id="content-left">
                Content left
          <p>Blah Blah</p>
          <p>Blah Blah</p>
          <p>Blah Blah</p>
     repeated 100 times
          <p>Blah Blah</p>
          <p>Blah Blah</p>
          <p>Blah Blah</p>
          <p>Blah Blah</p>
          <p>Blah Blah</p>
        </div><!--close left div-->

        <div id="content-right">
                Content
            <p>Content stuff</p>
        </div><!--close right div-->

    </div><!--close body div-->

</body>
</html> 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:52:45.007

无需使用 javascript 将其复杂化，您可以仅使用 CSS，更简单。这是你如何做到的：

```
 <!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body{
                border: 0;
                margin: 0;
                padding: 0;
                outline: 0;
            }
            .header
            {
                width: 100%;
                height: 100px;
                background: red;
            }
            .wrapper
            {
                position: absolute;
                top: 100px;
                bottom: 0;
                left: 0;
                width: 100%;
            }
            .content-left
            {
                float: left;
                width: 50%;
                height: 100%;
                overflow: auto;
                background: blue;
            }
            .content-right
            {
                float: left;
                width: 50%;
                height: 100%;
                background: green;
            }  
        </style>
    </head>
    <body>
        <div class="header">
            <p>Header stuff</p>
        </div>
        <div class="wrapper">
            <div class="content-left">
                Content left
            </div>
            <div class="content-right">
                Content right
            </div>
</div>
    </body>
</html> 
```

由于您是新手，因此仅提供一些提示：

*   总是尝试在你的 html/css 中使用类而不是 id，从长远来看，你的生活会更加简单（只有当你想将一些 javascript 绑定到一个元素时才应该使用 id，没有其他充分的理由 imo）

*   总是使用一些 CSS 重置块（我在 body 标签上使用了最简单的一个）。我知道这只是一个例子，但在实际应用中这是必须的。谷歌一下，那里有一些很棒的。

# python - 迭代扩展列表/嵌套 for 循环

> ID：11818915
> 
> 赞同：1
> 
> 时间：2012-08-05T18:20:40.387
> 
> 标签：python, for-loop

我正在尝试构建一个脚本来模拟出售股票的策略。考虑到随着时间的推移对股票价格的假设，其目的是以更高的价格出售越来越多的股票。定期（每周）创建多个卖单，并保持打开状态，直到它们以高于限价的价格成交（限价是我愿意卖出股票的价格）。每个卖单都有不同的限价，因此在更高的价格下，更多的订单被执行，更多的股票被卖出。

我的方法是使用列表来反映每周的价格假设，并使用列表列表来反映每周下达的订单。我的意图是每周迭代订单列表并“填充”满足以下条件的订单：

*   他们的限价低于该周的价格假设
*   他们还没有被卖掉

这是脚本的简化版本

```
orders = [] # initalize an empty list of orders.  Append orders to this list each week.
number_of_weeks = 4 # number of weeks to simulate

weekly_order_template = [[100, 5, "", ""],[150, 10, "", ""]] # these are the orders that will be added each week (2 in this example) and each order includes the number of shares, the limit price, the sale price (if sold), the sale week (if sold).

# create a list to store the weekly price assumptions
weekly_price = [] # init a list to store weekly prices
price = 4.90
price_increment = .05
for weeks in range(0,number_of_weeks):
    price = price + price_increment
    weekly_price.append(price)

# each week, add this week's orders to the orders list and then compare all orders in the list to see which should be sold.  Update the orders list elements to reflect sales.
for week in range(0,number_of_weeks):
    print "****This is WEEK ", week, "****"
    this_weeks_price = weekly_price[week]
    print "This week's price: ", this_weeks_price
    for order in weekly_order_template: # add this week's orders to the orders list
        orders.append(order)
    for order in orders: # iterate over the orders list and update orders that are sold
        if (order[2] == "") and (order[1] < this_weeks_price):
            order[2] = this_weeks_price
            order[3] = week
    print "All orders to date: ", orders 
```

这个脚本不工作。在这些订单应该存在之前，它是“销售”订单。例如，这是第四周的输出：

```
****This is WEEK  3 ****
This week's price:  5.1
All orders to date:  [[100, 5, 5.05, 2], [150, 10, '', ''], [100, 5, 5.05, 2], [150, 10,'', ''], [100, 5, 5.05, 2], [150, 10, '', ''], [100, 5, 5.05, 2], [150, 10, '', '']] 
```

为什么第七个元素（第 3 周的第一个订单）以前一周的价格而不是当时的 5.10 美元的价格“出售”？（注意 - “第 3 周”指的是第四周，因为我使用第 0 周作为第一周）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:33:12.187

Python 使用“引用语义”，换句话说，它从不复制某些东西，除非你明确告诉它这样做。

问题在于这一行：

```
orders.append(order) 
```

它将引用的对象附加`order`到列表中，然后在下周再次附加相同的对象。您应该做的是附加它的副本：

```
orders.append(list(order)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:33:45.640

换行

```
orders.append(order) 
```

到

```
orders.append(list(order)) 
```

问题是您需要创建订单的副本`weekly_order_template`（这是做什么`list(order)`的）而不是简单地引用订单模板，这样当您稍后（在`for order in orders:`循环中）更改订单时，您正在更改订单的各个副本模板，而不是订单模板本身。

# android - 以编程方式在 ViewPager.OnPageChangeListener onPageSelected() 中隐藏软键盘？

> ID：11818916
> 
> 赞同：26
> 
> 时间：2012-08-05T18:20:42.310
> 
> 标签：android, android-fragments, android-viewpager, android-softkeyboard

我有一个带有标签的 ViewPager + ActionBar。当我“滑动”到另一个选项卡时，我想隐藏软键盘，但我不知道如何。

我已将 Activity 传递给 FragmentPageAdapter 的构造函数，因此我可以调用

```
 activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

但它没有做任何事情（并且它位于代码的可到达区域）......帮助？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-05T18:31:59.457

在您的活动中，您可以执行以下操作：

```
mViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
    @Override
    public void onPageSelected(int position) {
        final InputMethodManager imm = (InputMethodManager)getSystemService(
            Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(mView.getWindowToken(), 0);
    }

    @Override
    public void onPageScrolled(int position, float offset, int offsetPixels) {
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-14T10:43:23.703

我不使用`onPageSelected()`，因为隐藏键盘动画与滑动动画有关。而是使用`onPageScrollStateChanged()`：

```
@Override
public void onPageScrollStateChanged(int state)
{
    if (state == ViewPager.SCROLL_STATE_IDLE)
    {
        if (mViewPager.getCurrentItem() == 0)
        {
            // Hide the keyboard.
            ((InputMethodManager)getSystemService(INPUT_METHOD_SERVICE))
                .hideSoftInputFromWindow(mViewPager.getWindowToken(), 0);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T13:15:46.620

一般的方法：

```
private void hideVirturalKeyboard(){
View v = getCurrentFocus();
if (v != null && v instanceof EditText) {
InputMethodManager mgr = (InputMethodManager)(v.getContext().getSystemService(Context.INPUT_METHOD_SERVIC
E));
mgr.hideSoftInputFromWindow(v.getWindowToken(), 0);
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T08:39:17.960

就我而言，以下片段活动工作正常。

```
((CommentActivity)getActivity()).pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
     @Override
     public void onPageSelected(int position) {
         final InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
         imm.hideSoftInputFromWindow(txtComment.getWindowToken(), 0);
     }

     @Override
     public void onPageScrolled(int position, float offset, int offsetPixels) {
     }

     @Override
     public void onPageScrollStateChanged(int state) {
     }
}); 
```

**更新：** 这是我的片段活动，其中两个片段（CommentFragment，AnotherFragment）在 ViewPager 中打开

```
public class CommentActivity extends FragmentActivity {
    ViewPager pager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        pager = (ViewPager) findViewById(R.id.viewPager);
        .......
        .......
    }

    private class MyPagerAdapter extends FragmentPagerAdapter {

        public MyPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int pos) {
            switch(pos) {
                case 0: return CommentFragment.newInstance();
                default: return AnotherFragment.newInstance();
            }
        }

        @Override
        public int getCount() {
            return 2;
        }       
    }

} 
```

如果在 CommentFragment 中为 EditText 出现键盘并且想要切换到 AnotherFragment 并且想要在切换时隐藏键盘

```
public class CommentFragment extends Fragment  {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        .........
        .........
        .........
        ((CommentActivity)getActivity()).pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

         @Override
         public void onPageSelected(int position) {
            final InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(txtComment.getWindowToken(), 0);
         }

         @Override
         public void onPageScrolled(int position, float offset, int offsetPixels) {
         }

         @Override
         public void onPageScrollStateChanged(int state) {
         }
   });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-11T07:37:59.877

简单的方法：

```
InputMethodManager imm = (InputMethodManager)    
getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0); 
```

# codeigniter - DOMPDF 没有产生正确的输出

> ID：11818918
> 
> 赞同：0
> 
> 时间：2012-08-05T18:20:54.323
> 
> 标签：codeigniter, dompdf

`DOMPDF`仅在 pdf 文件中生成 html 路径，而不是在 html 路径中生成内容。

```
include_once('dompdf/dompdf_config.inc.php'); 
$html= $this->load->view('view_pdf');
$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->set_paper("a4", "landscape" ); 

$dompdf->render();
$dompdf->stream("my_pdf.pdf", array("Attachment" => 0)); 
```

如果有人有任何想法，请在这里给出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:59:08.533

您需要将 view_pdf 的内容作为字符串加载到 $html 中：

```
$html = $this->load->view('view_pdf', '', true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:34:46.917

来自[codeigniter 文档](http://codeigniter.com/user_guide/general/views.html)：

> **将视图作为数据返回**
> 
> 还有第三个**可选**参数可让您更改函数的行为，以便它以字符串形式返回数据，而不是将其发送到浏览器。如果您想以某种方式处理数据，这可能很有用。如果您将参数设置为`true`(boolean)，它将返回数据。默认行为是`false`，它将它发送到您的浏览器。如果要返回数据，请记住将其分配给变量：
> 
> ```
> $string = $this->load->view('myfile', '', true); 
> ```

所以你的代码应该是：

```
include_once('dompdf/dompdf_config.inc.php');
$html= $this->load->view('view_pdf','',true);
$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->set_paper("a4", "landscape" );

$dompdf->render();
$dompdf->stream("my_pdf.pdf", array("Attachment" => 0)); 
```

# vb.net - 如何编辑 .sdf 文件

> ID：11818919
> 
> 赞同：0
> 
> 时间：2012-08-05T18:21:05.617
> 
> 标签：vb.net, sdf

我有我的应用程序，我安装了一个 .sdf 文件并将列添加到我的数据库中。那么如何在不丢失数据的情况下更新我的数据库呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:32:22.830

您可以在应用程序启动时在代码中执行标准数据定义语言 (DDL) 命令。

例如：

```
myCommand.ExecuteNonQuery("ALTER TABLE MyTable ADD NewColumn1 INT NULL") 
```

多年来，我们在从 PocketPC 到平板电脑的各种设备中都做到了这一点。

我们以前在修改数据库结构之前检查数据库表或列是否存在，但我们发现将当前数据库版本记录在表中然后只需在启动时检查版本然后进行修改就更容易了知道在数据库中的当前版本和应用程序的数据库版本之间是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:42:24.710

您可以通过为新列选择默认值或允许新列接受 Null 来扩展/更新数据库架构。

# ios - 刷新 iOS 指令缓存

> ID：11818928
> 
> 赞同：1
> 
> 时间：2012-08-05T18:22:33.623
> 
> 标签：ios

如何刷新 iOS 上的指令缓存？如果这在未越狱的 iPhone 上是不可能的，你将如何在越狱的 iPhone 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:07:38.143

显然，缓存刷新函数在 libkern/OSCacheControl 进一步的文档可以在这里找到[http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sys_dcache_flush.3.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sys_dcache_flush.3.html)

# sql - Flex / AIR 本地 SQL 是否支持 ON DUPLICATE KEY UPDATE？

> ID：11818930
> 
> 赞同：0
> 
> 时间：2012-08-05T18:22:57.970
> 
> 标签：sql, actionscript-3, apache-flex, air, on-duplicate-key

正如标题所说，Adobe AIR 平台中的 SQL 实现是否支持“ON DUPLICATE KEY UPDATE”？我无法让它工作，但我可能使用了错误的语法，特别是如果它与 MySQL 语法不同。flex 中的 SQL 文档非常稀少，我发现的文档很少提到 ON DUPLICATE KEY UPDATE。我得到的错误毫无意义：“错误 #2044: Unhandled SQLErrorEvent:.errorID=3115, operation=execute , message=Error #3115: SQL Error. , details=near 'ON': syntax error”

如果我收到错误，数据库文件根本不会插入任何值。

```
var insertQuery:String = "INSERT INTO movies(id, title, type, date_added) VALUES('" +
movieData['id'] + "', '" +
movieData['title'] + "', '" +
movieData['type'] + "', '" +
"2012-01-18 06:05:01" +
"') ON DUPLICATE KEY UPDATE title = 'TEST', type = 'movie', date_added = '2011-11-11 08:02:01'"; 
```

没有“ON DUPLICATE KEY UPDATE”，它可以按预期工作；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:47:26.277

AIR 的 SQL 基于[SQLite](http://www.sqlite.org/lang.html)。尽管自动解决冲突解决不适用于外键，但使用`before insert trigger`.

# javascript - 需要帮助才能理解一段代码

> ID：11818933
> 
> 赞同：1
> 
> 时间：2012-08-05T18:23:28.300
> 
> 标签：javascript, jquery

我很难理解以下来自此页面[http://trevordavis.net/play/jquery-one-page-nav/](http://trevordavis.net/play/jquery-one-page-nav/)的代码（一页网站的教程）。尤其是代码中间的 .do 和 Lorem ispum 文本以及对第 4 节的引用。你能不能给它一点光？非常感谢

```
<script src="jquery.js"></script>
<script src="jquery.scrollTo.js"></script>
<script src="jquery.nav.min.js"></script>
<script>
$(document).ready(function() {
  $('#nav').onePageNav();

  $('.do').click(function(e) {
    $('#section-4').append('<p>Lorem ipsum dolor...</p>');
    e.preventDefault();
  });

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T18:26:29.247

```
$('.do').click(function(e) {
    $('#section-4').append('<p>Lorem ipsum dolor...</p>');
    e.preventDefault();
  }); 
```

这是在 do 类的所有元素上创建一个单击事件处理程序。单击该元素时，带有 Lorem ipsum 文本的段落将添加到 id 为 section-4 的元素中。

# iphone - pList 文件中的旧值被覆盖

> ID：11818939
> 
> 赞同：0
> 
> 时间：2012-08-05T18:24:30.123
> 
> 标签：iphone, plist

您好，我正在尝试使用电话号码创建字典，我可以填充字典并将其添加到 plist 但是当我尝试再次添加到 plist 时，我会覆盖文件。

```
#import "FirstViewController.h"

@interface FirstViewController ()
{
    NSMutableDictionary *NameNumberDict;
    NSDictionary *plistDict;
    NSMutableArray *numberArray;
    NSString *filePath;
}

@end

@implementation FirstViewController
@synthesize NameTxtField;
@synthesize FirstNumField;
@synthesize SecNumField;
@synthesize personName;
@synthesize phoneNumbers;

- (void)viewDidLoad
{
    [super viewDidLoad];
    //get some memory 
    plistDict = [[NSDictionary alloc]init];
    NameNumberDict = [[NSMutableDictionary alloc]init];

    //make a file path string 
    NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *path = [pathArray objectAtIndex:0];
    filePath = [path stringByAppendingPathComponent:@"data.plist"];

    NSFileManager *manager = [NSFileManager defaultManager];

    // here i set the Dictionary to the file

    //give the file to my dictonary
    NameNumberDict = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath];
    NSLog(@"The count: %i", [NameNumberDict count]);

    //make sure the file is there
    NSString *err = nil;
    NSData *plist;
    plist = [NSPropertyListSerialization dataFromPropertyList:NameNumberDict format:NSPropertyListBinaryFormat_v1_0 errorDescription:&err];

    if([manager fileExistsAtPath:@"data.plist"] == NO)
    {
        [manager createFileAtPath:[NSString stringWithFormat:@"data.plist"] contents:plist attributes:nil];
    }
}

- (void)viewDidUnload
{
    [self setNameTxtField:nil];
    [self setFirstNumField:nil];
    [self setSecNumField:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

// Populate the dictionary when they dismiss the keyboard if all the data is filled out

-(IBAction)TextFieldReturn:(id)TextField
{
    if(!NameTxtField.text && !FirstNumField.text && !SecNumField.text);
    {
        NSString *name = NameTxtField.text;

        numberArray = [[NSMutableArray alloc]init];
        [numberArray addObject:FirstNumField.text];
        [numberArray addObject:SecNumField.text];

        [NameNumberDict setObject:name forKey:@"Name"];
        [NameNumberDict setObject:numberArray forKey:@"Number"];

        NSLog(@"dicSave: %@",NameNumberDict);
    }

    [TextField resignFirstResponder];
}

// and down here is where im lost Im not sure how to append the data to the Dictionary and write it to file

- (IBAction)AddBtn:(UIButton *)sender
{
    plistDict = [[NSMutableDictionary alloc]initWithDictionary:NameNumberDict];

    [plistDict writeToFile:filePath atomically:YES];

    NSLog (@"File %@ exists on iPhone",filePath);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:32:01.610

在你的 " `TextFieldReturn`" 方法中，我看到你总是在每次调用可变字典时重置 " `Name`" 和 " `Number`" 对象。`NameNumberDict`

我认为您真正想要做的是将一个新字典（对于每个新名称和数字）添加到一个可变数组中，然后将该可变数组写入一个文件（最终将成为您的属性列表文件）。

另外，作为一种风格说明：方法名称和变量名称应始终以小写字母开头（例如“ `textFieldReturn`”、“ `addBtn`”、“ `nameNumberDict`”等），而类名称（例如“ `FirstViewController`”）以大写字母开头。

# sql - Rails 中的 SQL 查询对有序记录进行分组

> ID：11818944
> 
> 赞同：0
> 
> 时间：2012-08-05T18:25:02.220
> 
> 标签：sql, ruby-on-rails

Check 是一个具有**product_line_id**和**date**属性的模型。

我有四个 Check 模型实例。他们都有不同的日期。两个属于产品线 1，另外两个属于产品线 2。

我如何调用 Check 模型上的查询来为每个具有该产品线最大日期的产品线返回一张支票？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:37:55.693

像这样：

```
Check.group(:product_line_id).maximum(:date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:16:03.693

我同意 noodl：您不应该将其`date`用作列的名称。

```
Check.select("id, product_line_id, max(date) as greatest_date").group(:product_line_id) 
```

# java - 健康检查 URL 配置错误 AWS

> ID：11818947
> 
> 赞同：0
> 
> 时间：2012-08-05T18:25:25.317
> 
> 标签：java, servlets, amazon-web-services, javabeans

我正在尝试将我的 java servlet 部署到弹性 beanstalk 并且它总是在运行状况检查 URL 上失败。我有一个运行状况检查器 servlet，其代码如下

公共类 HealthCheck 扩展 HttpServlet { private static final long serialVersionUID = 1L;

```
public HealthCheck() {
    super();
    // TODO Auto-generated constructor stub
}

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    response.setStatus(HttpServletResponse.SC_OK);

} 
```

我认为这会起作用，但我想不会。我正在使用 ecplise EE 并使用它自动生成的 web.xml，并且 url-path 是 /HealthCheck。任何人都知道为什么这对我不起作用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:50:12.647

你应该试试这些：

1.  在 WebContent 文件夹中创建一个 html 文件。你可以只创建一个空的html，就足够了。
2.  使用 Java 6 重建您的项目，因为 AWS Beanstalk 使用 Java 6。

# php - 在另一个变量中调用时数组不显示任何内容

> ID：11818957
> 
> 赞同：1
> 
> 时间：2012-08-05T18:26:34.457
> 
> 标签：php, arrays

我有一个简单的数组，以前使用过，没有问题。现在我试图再次使用它并且它没有显示任何文本（即使在视图源中）。

大批：

```
$month = Array(
    1 => "January",
    2 => "February",
    3 => "March",
    4 => "April",
    5 => "May",
    6 => "June",
    7 => "July",
    8 => "August",
    9 => "September",
    10 => "October",
    11 => "November",
    12 => "December"
); 
```

代码：

```
function getMonthlyStats($comic_id) {
    require "config.php";
    $query = 'SELECT *, SUM(views) AS `views` FROM '.$db_tbl_stats.' WHERE '.$db_fld_stats_comic_id.'="'.$comic_id.'" GROUP BY '.$db_fld_stats_month.' ASC';
    $r_query = mysql_query($query);
    while ($result = mysql_fetch_array($r_query)) {
    $percent = ($result[$db_fld_stats_views]/getTotalStats($comic_id))*100;
    $m = number_format($result['month']);
        echo '<tr>';
        echo '<td width="100">&nbsp;&nbsp;';
        echo $month[$m];
        echo '</td>';
        echo '<td width="400" class="bar"><div style="width: '.$percent.'%"></div>'.$result[$db_fld_stats_views].' Views</td>';
        echo '<td>'.number_format($percent).'%</td>';
        echo '</tr>';
    }

} 
```

$m 返回一个 1-12 的数字，显然代表一个月。

如果您需要更多信息，我将很乐意解释更多。任何帮助是极大的赞赏！写了四个小时，眼睛都累了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:29:44.050

您需要添加`global $month;`到您的功能，或使用`$GLOBALS['month']`而不是`$month`.

这称为“可变范围”。有关详细信息，请参阅[http://php.net/manual/en/language.variables.scope.php 。](http://php.net/manual/en/language.variables.scope.php)

# spring - 在 Spring 中创建表单

> ID：11818959
> 
> 赞同：1
> 
> 时间：2012-08-05T18:26:54.963
> 
> 标签：spring, spring-mvc

我的 spring 项目中有一个简单的联系表单，用于访问支持对象，但出现此错误

“ Bean 名称 'indexBacking' 的 BindingResult 和普通目标对象都不能用作请求属性”

我的表格如下所示：

```
<form:form action="index.htm" enctype="multipart/form-data" method="post" commandName="indexBacking" accept-charset="UTF-8">
    <form:label path="personName">Name</form:label>
    <form:input id="personName" path="personName" autocomplete="false" /><br />
    <form:label path="personEmail">Email</form:label>
    <form:input id="personEmail" path="personEmail" autocomplete="false" /><br />
    <form:label path="personComments">Your Comments</form:label>
    <form:input id="personComments" path="personComments" autocomplete="false" /><br />
    <input type="submit" alt="Submit"/>
</form:form> 
```

这意味着访问我的控制器并将字段“personName”、“personEmail”和“personComments”保存到我的名为“indexBacking”的支持对象中。

我试图访问的控制器方法在这里：

```
@RequestMapping(value = PAGE_NAME, method = RequestMethod.POST)
public String handleContactForm(ModelMap map, HttpServletRequest request, @ModelAttribute("indexBacking") IndexBacking bo, BindingResult result) {  
    return MODEL_NAME;
} 
```

但我不确定它是否与支持对象相关联。任何想法我做错了什么？

谢谢乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:12:24.873

尝试使用`modelAttribute="indexBacking"`on`form:form`而不是`commandName="indexBacking"`.

另外，看看[这个答案](https://stackoverflow.com/a/4335572/248082)；它可能为您的案例提供有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:46:46.590

问题很简单，我只是个白痴。我看到我的一位同事正在处理一个表单，并假设他的一些课程默认是 Spring 的一部分。我所要做的就是正确处理另一端接收到的数据（通过调用控制器中的适当方法），它工作正常。

感谢您的帮助-感谢@nobeh 为我指明了正确的方向。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T19:15:25.413

问题出在你的控制器上！以下内容可能对您的要求有很大帮助[检查此](http://www.dzone.com/tutorials/java/spring/spring-annotation-controller-1.html)

# objective-c - 键盘不会随 UITextField 关闭

> ID：11818960
> 
> 赞同：0
> 
> 时间：2012-08-05T18:27:19.090
> 
> 标签：objective-c, ios, keyboard, uitextfield

在我的代码中，我有：

```
-(BOOL)textFieldShouldReturn:(UITextField*)theTextField{

if (theTextField == ITload)
{
    [ITload resignFirstResponder];
    return  YES;
}

if (theTextField == FacilitiesLoad) {
    [FacilitiesLoad resignFirstResponder];
    return YES;
}
return NO;
} 
```

ITload 和 FacilitiesLoad 都是我的文本字段。我正在使用带有标点符号键盘的数字，并且没有出现完成键。我有一个不会关闭键盘的返回键。

关于如何显示完成键并让 textFieldShouldReturn 正常工作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T18:31:22.910

您似乎还没有将文本字段的委托设置为您的接收者。

```
ITLoad.delegate = self;
FacilitiesLoad.delegate = self; 
```

编辑：您收到警告是因为您的视图控制器（正式）不符合 UITextFieldDelegate 协议。像这样声明它：

```
@interface MyViewController: UIViewController <UITextFieldDelegate> {
} 
```

等等

# database-design - 如何将商品与定价数据正确关联，同时考虑价格变化历史

> ID：11818965
> 
> 赞同：4
> 
> 时间：2012-08-05T18:27:34.577
> 
> 标签：database-design, relational-database

几乎所有 POS 系统都会在销售时将物品的价格直接记录到交易表中，因为该价格可能会在以后发生变化，但它的销售价格应该保持不变。

我想知道您将如何设置保留价格变化历史的定价表，以便您可以根据商品及其出售时间将交易与该表相关联以获得正确的价格？

我认为任何曾经使用过 POS 系统的人都会理解我在这里所说的，但如果我的问题不清楚，请告诉我，我会尝试更好地解释。

我没有标记特定的数据库，因为这个问题显然不是特定于特定的，但因为我知道这是我将被问到的第一个问题：SQL Server 2008。

编辑：

这是我刚刚想到的一个解决方案，我很想得到一些反馈...

我想我可以有一个价格表，其中包含如下字段：PriceId、ItemId、Price、Date

PriceId 将是一个自动编号，并且 ItemId 与 Items 表相关。现在，我不会将实际价格保存到交易表中，而是保存给定项目的最新 PriceId。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:42:15.397

我真的看不出这样做的理由。*您正在为几乎*所有分析目的和大多数查询添加额外的连接，这将影响应用程序的速度。

回答您的问题虽然最简单的方法是创建定价表，就好像您正在创建一个[临时数据库](http://en.wikipedia.org/wiki/Temporal_database)一样。

因此，做一些假设，您的定价表可能包含以下列：

```
id int, pk
product_id, fk into products
price_start_date date
price_end_date date
price number(x, 2) 
```

假设您的“订单”表具有下订单/发布订单的日期等，无论您使用什么来确定价格，*每个*查询来确定价格都会变成

```
select price
  from pricing p
  join orders o
    on o.order_Date between p.price_start_date and p.price_end_date 
```

但是，正如我所说，我不会这样做。我能想到的唯一障碍是，在订单表中而不是在单独的表中包含历史价格是它使历史价格分析在 DB 上稍微重一些。你不会经常这样做，也不想知道有多少单位被售出，因此无论如何都需要使用订单表，所以我认为这不会有很大的不同。

我认为这是一个*非常*轻微的非规范化数据库绝对是积极而不是消极的情况之一。

* * *

好的，关于您的编辑，与我的建议几乎没有什么不同。我将假设您的表是唯一的`itemid` *并且* `date`（不要将其用作*实际*的列名）否则日期可以在您的“项目”表中同样保存。

但是，这确实意味着每当您向交易表中添加一些东西时，您都必须使用聚合查询来计算出每件商品的最新价格。我的建议使更新价格更加困难，但更容易计算价格。由于您计算商品价格的频率比更新价格的频率高，因此我个人会在我建议的地方采取性能打击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-08T22:13:35.750

我在上一个项目中遇到了这个问题，我决定使用价格表来保留历史价格，因为客户想验证他的供应商多久更改一次价格等。对于许多报告，我发现自己做了一个额外的加入只是为了检索感觉很麻烦的当前价格，所以我最终得到了这样的表。

```
product:
    name ...
    quantity ...
    ...
    priceId ... (foreign key to lastest price on prices table)
    price ... (the last updated price, to avoid the prices join) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T02:52:55.180

您必须根据自己的情况进行调整，但在我的情况下，我有一个费用类型的查找表，这就是我将费用更新为新价格并保留原始价格以供参考的方式。此处视图的开销仅与您查询它以生成发票的频率有关。这是我的用例。

您可以在此处使用 vwCharge 获取最新定价列表。当使用 update_charge_rate() 时，它会添加一个新的更新日期，查询 vwCharge 只会显示最近的。

分隔符设置为 //

查找表：

```
CREATE TABLE lkCharge (
  charge_id SMALLINT NOT NULL AUTO_INCREMENT,
  charge_datecreated DATE NOT NULL,
  charge_name VARCHAR(20) NOT NULL,
  charge_rate DECIMAL(10,2) NOT NULL,
  charge_islocked CHAR(1) DEFAULT 'N',
  charge_lockedby VARCHAR(255) DEFAULT NULL,
  charge_lockdate TIMESTAMP NULL,
  charge_isdeleted CHAR(1) DEFAULT 'N',
  CONSTRAINT pkChargeId PRIMARY KEY(charge_id, charge_datecreated)
) ENGINE=InnoDB DEFAULT CHARSET=utf8// 
```

风景：

```
CREATE VIEW vwCharge AS
  SELECT
    charge_id,
    charge_datecreated,
    charge_name,
    charge_rate,
    charge_islocked,
    charge_lockedby,
    charge_lockdate,
    charge_isdeleted
  FROM lkCharge AS o
  WHERE o.charge_id=o.charge_id AND charge_datecreated=(
    SELECT MAX(charge_datecreated)
      FROM lkCharge AS i
        WHERE i.charge_id=o.charge_id
  )// 
```

更新程序：

```
CREATE PROCEDURE update_charge_rate(
  IN p_charge_id SMALLINT,
  IN p_new_charge_rate DECIMAL(10,2)
)
BEGIN
  DECLARE _name VARCHAR(20);

  SELECT charge_name INTO _name
    FROM vwCharge WHERE charge_id=p_charge_id;

  INSERT INTO lkCharge(charge_id, charge_datecreated, charge_name, charge_rate)
    VALUES(p_charge_id, UTC_DATE(), _name, p_new_charge_rate);

  SELECT LAST_INSERT_ID();
END// 
```

# mysql - 停止 MAMP MySQL

> ID：11818968
> 
> 赞同：6
> 
> 时间：2012-08-05T18:27:42.583
> 
> 标签：mysql, mamp, kill

你如何结束所有 MySQL 进程？或者如何解决这个错误？MAMP 不会启动 MySQL 服务器。

```
120805 11:18:24 [ERROR] Can't start server: Bind on TCP/IP port: Address already in use
120805 11:18:24 [ERROR] Do you already have another mysqld server running on port: 8889 ?
120805 11:18:24 [ERROR] Aborting 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T08:29:10.243

您可以使用以下命令关闭 Mysql：

```
/Applications/MAMP/bin/stopMysql.sh 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-05T18:36:40.630

活动监视器中的已终止进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T18:41:00.890

我认为 MAMP 正确安装了 mysql，因此您可以`mysql.server stop`停止服务器的所有实例。再次`mysql.server start`启动它也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T00:58:34.580

通过添加初始 # ... 来编辑 MAMP/bin/start.sh 的第二行

```
# /bin/sh
#/Applications/MAMP/bin/startMysql.sh
/Applications/MAMP/bin/startApache.sh 
```

那么当 MAMP 启动时，MySQL 不会，只有 Apache。

# java - OpenGL ES 2.0 X 轴翻转？

> ID：11818969
> 
> 赞同：4
> 
> 时间：2012-08-05T18:27:49.513
> 
> 标签：java, opengl-es, opengl-es-2.0

我开始画我的四边形，但是当我开始玩顶点时，我注意到 X 坐标被翻转了。这是一张图片来说明我的意思：

![在此处输入图像描述](../Images/f5f309d98ca30141fc23d33e5bd0575f.png)

这是我的顶点 - 索引和纹理坐标，我真的不必显示。

```
static final int COORDS_PER_VERTEX = 3;
static float positionCoords[] = { 
    -0.5f,  0.5f, 0.0f,   // top left
    -0.5f, -0.5f, 0.0f,   // bottom left
     0.5f, -0.5f, 0.0f,   // bottom right
     0.5f,  0.5f, 0.0f }; // top right

static final int COORDS_PER_TEXTURE = 2;
static float textureCoords[] = { 
    0.0f, 0.0f, 
    0.0f, 1.0f,
    1.0f, 1.0f,
    1.0f, 0.0f, };

private final short indices[] = { 0, 1, 2 }; 
```

这就是我更改投影和视图矩阵的地方。

```
public void onSurfaceChanged(GL10 naGl, int width, int height)
{
        Log.d(TAG, "GL Surface Changed - Setting Up View");

    GLES20.glViewport(0, 0, width, height);

    float ratio = (float) width / height;

    Matrix.frustumM(ProjectionMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

    Matrix.setLookAtM(ViewMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
} 
```

为什么它会被“向后”绘制。我还认为我的相机可能在物体后面，所以如果我在物体后面，那么在 3 维空间中剩下的就是正数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:45:40.527

您确实是从反面看对象。

您的 lookAt 函数将眼睛放置在 (0,0,-3) 处，并将lookAt 点放置在 (0, 0, 0) 处。默认情况下，负 z 轴指向屏幕，但您从相反方向（朝向正 z 轴）查看它。

您应该将眼睛注视 (0,0,3) 并朝 (0,0,0) 看，以获得您期望的视图。

您可能会发现红皮书的[这一章内容丰富。](http://www.glprogramming.com/red/chapter03.html)

# elasticsearch - 为我的网站设置 Elastic Search

> ID：11818970
> 
> 赞同：1
> 
> 时间：2012-08-05T18:27:50.837
> 
> 标签：elasticsearch

我对 Web 开发完全陌生，我想在我正在制作的网站上设置一个数据库搜索客户端，因为我不想编写自己的低效 MySQL 查询字符串。我的计划是为此使用 Elastic Search，我的主要问题是：

一旦我的网站在某个地方的专用服务器上，我如何将 Elastic Search 安装到服务器上，和/或我应该在服务器中寻找什么以便能够使用 Elastic Search？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:36:37.377

您将需要一个 JRE，仅此而已。

有关详细信息，请参阅[http://www.elasticsearch.org/guide/reference/setup/installation.html 。](http://www.elasticsearch.org/guide/reference/setup/installation.html)

您可能希望将其作为服务运行，如果您使用 Windows，则可以在此处下载安装程序。 [https://github.com/rgl/elasticsearch-setup/downloads](https://github.com/rgl/elasticsearch-setup/downloads)

如果您需要任何帮助，请联系我。

# flash-cs5 - PHP 代码提示在 Dreamweaver CS5 中不起作用

> ID：11818977
> 
> 赞同：1
> 
> 时间：2012-08-05T18:28:31.720
> 
> 标签：flash-cs5, dreamweaver, code-hinting

我正在使用 Adob​​e Dreamweaver CS5，我已经使用了很长时间，但这是我第一次遇到这样的问题。

一些代码提示被禁用，例如`$_SERVER`,`$_REQUEST`等。

是否有任何选项可以启用这些提示？我尝试了偏好选项，尽管它被禁用了。

我完全错过了这个：

[![](../Images/548f4290ff5fe10d26c98d680b093724.png)](https://i.stack.imgur.com/m5Aup.png)
[（来源：[killersites.com](http://www.killersites.com/dreamweaver/images/dreamweaver-code-hinting.png)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:54:07.277

转到菜单`Edit -> Preferences -> Code Hints`，然后禁用`jquery code 1.7`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:02:13.410

转到“首选项-> 代码提示”并禁用 jquery 代码 1.7 并且它可以工作。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T22:29:59.313

不排除jquery，解决方法就是增加延迟，0.5就好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T01:08:21.133

在 DW 选项中打开 PHP 代码提示是否正确？（抱歉不能发图片作为评论）![Dreamweaver 代码提示选项](../Images/80196f669636f185ec59a49833c58f6d.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T08:45:27.313

您可以通过简单地禁用 jquery 提示来解决该错误。

# ruby-on-rails - 注释 gem：没有要加载的文件？

> ID：11818980
> 
> 赞同：1
> 
> 时间：2012-08-05T18:29:12.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

当我运行[Annotate Model Gem](https://github.com/ctran/annotate_models)的命令来注释我的模型时，我收到以下错误，我使用这两种方法来安装 gem：

```
$ annotate --exclude tests, fixtures
c:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':
        from c:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
        from c:/Ruby192/lib/ruby/gems/1.9.1/gems/annotate-2.5.0/bin/annotate:3:i
        from c:/Ruby192/bin/annotate:19:in `load'
        from c:/Ruby192/bin/annotate:19:in `<main>'

$ bundle exec annotate --exclude tests, fixtures
c:/Ruby192/lib/ruby/gems/1.9.1/gems/annotate-2.5.0/bin/annotate:3:in `require': no such file to load -- rake/dsl_definition (LoadError)
        from c:/Ruby192/lib/ruby/gems/1.9.1/gems/annotate-2.5.0/bin/annotate:3:in `<top (required)>'
        from c:/Ruby192/lib/ruby/gems/1.9.1/bin/annotate:19:in `load'
        from c:/Ruby192/lib/ruby/gems/1.9.1/bin/annotate:19:in `<main>' 
```

**宝石文件**

```
gem "rails", "3.1.0"
gem "rake", "0.8.7"

group :development do
  gem "annotate", "2.5.0"
end 
```

**命令行：**

```
$ gem install annotate
Successfully installed annotate-2.5.0
1 gem installed 
```

我怎样才能让这个宝石工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:39:23.993

请更新耙子。`Rake::DSL`已在**0.9**版本中引入。

```
bundle update rake 
```

# linux - 使用 git 将项目分层

> ID：11818981
> 
> 赞同：2
> 
> 时间：2012-08-05T18:29:13.800
> 
> 标签：linux, git, shell

**让有：**

有不同的存储库 repoA、repoB 和 repoC，每个都遵循相同的目录布局原则，它们将合并到第三个 repoM 的工作目录（“主”项目）中。

repoM 有一个非典型的设置（--work-dir 和--git-dir 是分开的）。repo[AC] 被克隆为裸机，它们被设置为`core.bare = false`and `core.worktree=<--work-dir-of-repoM>`。

**要求：**

我需要始终对 repoM 的工作目录中所有文件的历史有一个概述，这可能源于 repo[AC]。使用这种方法，我会丢失所有这些信息。

**选择：**

我一直在考虑改用 git-subtree ( `git version 1.7.11.2`，所以它已经内置了)，让 repo[AC] 裸露，然后

*   `git pull -s subtree`,**或**
*   `git subtree ...`

使用子树拉策略，我丢失了合并冲突的历史记录（`git blame`这样说）。

我以前从未使用过子树，但据我了解，无法将 repo[AC] 中的文件合并到 repoM 的工作目录中，这些文件必须放入 repo[AC] 的子目录中。这绝对不是我需要的。**为什么？**由于以下...

**问题陈述：**

您有不同的 git 存储库，每个存储库都包含不同的文件集，通常是配置文件和一些 shell 脚本。您希望将所有这些存储库中的所有内容都放在`$HOME`（即`<--work-dir-of-repoM>`）目录中。您应该能够随时查看每个文件的来源、编辑、提交并将更改推送到每个文件的`origin`. 你已经猜到了，它有点像[vundle](https://github.com/gmarik/vundle/)，但它适用于任何程序的任何类型的配置，而不仅仅是*vim bundles*。如果发生冲突，应该能够追踪同一文件的哪两个作者需要相互联系并达成交易（如果需要达成交易）。

这是针对我正在尝试使原型工作的开源项目，因此非常感谢任何帮助。对于以类似方式执行此操作的现有项目的想法也受到高度赞赏。

**注意：** “主目录”不一定是`$HOME`，我用它作为可能解决问题的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:57:01.173

为什么不在“主项目”中简单地使用[Git 子模块？](http://git-scm.com/book/en/Git-Tools-Submodules)

# drupal - Drupal 站点下载：无法按原样安装站点

> ID：11818982
> 
> 赞同：0
> 
> 时间：2012-08-05T18:29:36.473
> 
> 标签：drupal, drupal-6, drupal-modules

我最近使用 FTP 下载了一个功能齐全的 drupal(6) 站点。虽然我安装了 Drupal 实例，但我得到了 sites/all 文件夹中的模块和主题，但无法获得实际的站点配置（这些模块的配置和设置）

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:57:27.433

假设这是一个后续：[Drupal Site install on localhost after download source after using FTP](https://stackoverflow.com/questions/11807752/drupal-site-install-on-localhost-after-downloading-source-using-ftp/11809314#11809314)

如果在访问刚刚迁移到本地主机的站点时出现 Drupal 安装屏幕，可能是因为您尝试使用与远程站点不同的 URI 在本地访问该站点，并且该 URL 不属于目录Drupal 在查找 settings.php 文件时进行搜索（请参阅 sites/default 文件夹的 default.settings.php 文件中从第 20 行开始的注释）。

**你有两个选择：**

**选项 1：**在您的本地主机上创建一个符号链接，将请求指向您的本地 URI，指向托管实时站点的目录。这看起来像这样：

```
ln -s /path/to/webroot/sites/default/ /path/to/webroot/sites/mydevsite.dev 
```

**选项 2：**创建一个 sites/sites.php 文件，将 URI 映射到托管您的 settings.php 文件的正确文件夹。例如，如果您将 settings.php 文件留在 sites/default 文件夹中，您可以将其添加到 sites/sites.php 中：

```
$sites['mysite.dev'] = 'default';
$sites['www.mysite.dev'] = 'default';
$sites['mysite.com'] = 'default';
$sites['www.mysite.com'] = 'default'; 
```

简而言之，这转换为：“从位于 sites/default 的文件夹中提供站点 mysite.dev、www.mysite.dev、mysite.com 和 www.mysite.com。”

我通常使用第二个选项。它更可持续，独立于操作系统，并且可以致力于源代码控制。

* * *

**基于前 5 条评论的更新：**

您需要`.htaccess`在 Drupal 安装中编辑该文件。查找此部分：

```
 # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase / 
```

照它说的做，取消注释该行并将其设置为您的子目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:45:27.040

是的，步骤是正确的。是设计没有出现还是视图的功能缺失？如果它只是没有出现的 css，那么问题可能是您的主题没有得到应用。检查主题文件夹是否正确存在，并禁用/启用主题。

# reportlab - reportlab 设置左表位置

> ID：11818985
> 
> 赞同：3
> 
> 时间：2012-08-05T18:30:28.037
> 
> 标签：reportlab

如何设置表格的左侧位置？

```
response = HttpResponse(mimetype='application/pdf')
response['Content-Disposition'] = 'attachment; filename=%s' % pdf_name
buffer = StringIO()
PAGESIZE = pagesizes.portrait(pagesizes.A4)
doc = SimpleDocTemplate(buffer, pagesize=PAGESIZE, leftMargin=1*cm)
story = []

story.append(Paragraph(header_part2, styleN))
table_row = ['Total Score:','']
data.append(table_row)
ts = [
    #header style    
    ('LINEABOVE', (0,0), (-1,0), 1, colors.gray),
    ('LINEBELOW', (0,0), (-1,0), 1, colors.gray)]
t = Table(data, (6*cm,6*cm), None, style=ts)
    story.append(t)
    doc.build(story)
    pdf = buffer.getvalue()
buffer.close()
response.write(pdf) 
```

段落打印在距左侧 1 厘米的位置，而表格打印时与左侧页面边框几乎没有距离。

我必须在哪里为表格位置设置 leftMargin？

这同样适用于我添加的图像。它们似乎印在某处。

```
story.append(Image(path,35,10)) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-06T08:24:49.633

找到神奇的 hAlign 关键字：

```
t = Table(data, (6*cm,6*cm,2*cm,2*cm,2*cm), None, style=ts, hAlign='LEFT') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-19T14:26:57.193

我想补充一点，您也可以在 TableStyle 中设置对齐方式，就像设置*lineabove*和*linebelow 一样*。

虽然这本身可能不是有价值的信息，但重要的是要知道水平对齐是使用**关键字“ALIGN”而不是“HALIGN”设置的**（因为您很容易假设垂直对齐是使用*“VALIGN”*和上述解决方案设置的在函数调用中也有 hAlign ）。我整天都想把东西和“HALIGN”对齐，我发疯了。

下面是一个代码示例，您可以在其中测试水平对齐 ('ALIGN')。

```
from reportlab.platypus import SimpleDocTemplate
from reportlab.platypus.tables import Table, TableStyle
from reportlab.lib import colors

doc = SimpleDocTemplate('align.pdf', showBoundary=1)

t = Table((('', 'Team A', 'Team B', 'Team C', 'Team D'),
   ('Quarter 1', 100, 200, 300, 400),
   ('Quarter 2', 200, 400, 600, 800),
   ('Total', 300, 600, 900, 1200)),
  (72, 45, 45, 45, 45),
  (25, 15, 15, 15)
  )

t.setStyle(TableStyle([
   ('ALIGN', (0, 0), (-1, -1), 'RIGHT'),
   ('GRID', (0, 0), (-1, -1), 0.25, colors.red, None, (2, 2, 1)),
   ('BOX', (0, 0), (-1, -1), 0.25, colors.blue),
   ]))

story = [t]
doc.build(story) 
```

[![pdf中的结果表](../Images/c6b0b0b4c7be31b5ef667e81df1a9381.png)](https://i.stack.imgur.com/ihQQ8.jpg)

# java - 在 Java 中以编程方式清除控制台

> ID：11818991
> 
> 赞同：3
> 
> 时间：2012-08-05T18:31:51.033
> 
> 标签：java, console

我创建了一个示例 Java 应用程序。我想清除窗口选项，即：

1.  登记
2.  登录
3.  清除

如果用户按 3，我需要以编程方式清除所有选项。像`Console.clear`什么？

有什么办法可以用Java做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T18:34:35.150

您将需要输出一堆空行。即使在 Windows/*nix 中，clear/cls 也不会真正清除屏幕，它只会打印足够多的空白行，以至于您看不到前面的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-03T05:20:23.697

你可以试试 System.out.print("CLS");

或使用循环来清除屏幕，如

```
public static void clearScreen() {  
System.out.print("\033[H\033[2J");  
System.out.flush();  
} 
```

然后调用这个方法 clearScreen(); 如果你想清除。

对不起，我的英语不好。:) 我只是想帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-05T18:35:00.393

您的意思是您创建了一个控制台应用程序并想要清除控制台（不一定是 Eclipse 控制台）？

如果是这样，那么我猜您正在寻找：

```
Runtime.getRuntime().exec("cls"); 
```

但请注意，这将取决于系统。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-02T13:47:48.983

如果您正在使用控制台，那么这些可能会很有用。 [使用“退格”字符。](https://stackoverflow.com/questions/7522022/how-to-delete-stuff-printed-to-console-by-system-out-println) [使用流程构建器。](https://stackoverflow.com/questions/2979383/java-clear-the-console)

# javascript - 如何立即触发事件？

> ID：11818997
> 
> 赞同：0
> 
> 时间：2012-08-05T18:32:32.177
> 
> 标签：javascript, prototypejs

我正在使用原型js绑定这样的事件：

```
$('country').observe('change',function(e) { ... }); 
```

我怎样才能立即触发它？

在 jQuery 中，我会添加一个`.triggerHandler('change')`. 原型中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:41:58.973

使用`load`事件。像这样的东西：

```
// calls addListeners when the document loads
Event.observe(window, 'load', addListeners, false); 

function addListeners() {   

    // called onLoad
    fireOnce();

    // observer for the country dropdown
    $('country').observe('change', function(event) {
        fireOnChange();
    });
}

function fireOnce() {
    // do something
}

function fireOnChange() {
    // do something
} 
```

当文件加载时，`fireOnce()`将执行。我一直使用这种技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:33:14.883

如果使用扩展是一种选择，我过去曾为此目的使用[event.simulate取得了成功。](https://github.com/kangax/protolicious/blob/master/event.simulate.js)

它允许您执行以下操作：

```
$('country').simulate('change'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T19:34:44.323

尝试这个：

```
var handler = function(e) {...};
$("country").observe("change",handler);
handler(); 
```

* * *

或者（可读性较差，避免临时变量）：

```
$("country").observe("change",(function(e) { ... return arguments.callee;})()); 
```

* * *

但是，在这两种情况下，您都无法按`this`预期使用。此解决方案更适合更通用的回调，例如 for`setInterval`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:36:46.250

...如果您知道它存在，并且您知道您不是在等待页面加载或等待脚本加载，为什么不只是：

```
(function (el) {
    if (!el) { return; }
    doSomething(el);
}(document.getElementById("country"))); 
```