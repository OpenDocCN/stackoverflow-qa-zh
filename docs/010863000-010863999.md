# StackOverflow 问答 10863000-10863999

# javascript - 使用 jQuery fadeIn 或 CSS3 动画更好吗？

> ID：10863000
> 
> 赞同：11
> 
> 时间：2012-06-02T14:17:16.970
> 
> 标签：javascript, jquery, css, fadein

我正在使用一些 PHP 和 JavaScript 创建一个简单的画廊，并尝试在图像之间进行淡入淡出转换。然后我想知道使用 CSS 动画是否存在性能差异，例如：

```
@-webkit-keyframes fadeIn {
0%   { opacity: 0; }
100% { opacity: 1; }
} 
```

和一个 jQuery 淡入淡出。

我想使用 fadeIn 的回调，但我也可以只使用带有 CSS 的计时器。

这些中的任何一个都可能更好地处理大图像吗？我看不出有什么区别，但想知道它是否会影响速度较慢的计算机。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-03T06:29:20.720

一个后备到另一个怎么样？尽可能使用 CSS3 过渡，并使用诸如 Modernizr 之类的特征检测库来确定用户的浏览器是否能够进行 CSS3 过渡。

如果且仅当用户的浏览器不支持原生动画时，您才应该使用 jQuery。

原生动画是 GPU 加速的，因此对 CPU 的限制更少，动画更流畅。此外，它不需要 JAVASCRIPT，也不需要额外的请求来完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-04T20:24:07.207

好吧，我认为当有支持的浏览器时使用 CSS 动画会好很多，并且您应该只使用 jQuery 作为不支持的浏览器的备份。正如在[http://dev.opera.com/articles/view/css3-vs-jquery-animations](http://dev.opera.com/articles/view/css3-vs-jquery-animations)上彻底解释的那样，他们用 CSS 和 jQuery 同时对 300 个 div 进行了动画测试，并注意到两者之间的巨大差异性能统计。

使用**CSS**动画的统计数据是：

和使用**jQuery**的统计数据是：

因此，正如您所看到的，性能之间存在很大差异。这是因为浏览器的 CSS 处理器是用 C++ 编写的，本机代码执行速度非常快，而 jQuery (JavaScript) 是一种解释性语言，浏览器无法很好地提前预测 JavaScript，就接下来会发生什么事件而言，这限制浏览器以优化其性能。我希望这能回答你的问题。

# rubymotion - 带有 BubbleWrap 的 RubyMotion

> ID：10863002
> 
> 赞同：1
> 
> 时间：2012-06-02T14:17:41.770
> 
> 标签：rubymotion

我刚刚开始使用 Ruby Motion (v 1.9)，但在我的项目中包含 BubbleWrap (v 0.2.1) 时遇到了一些麻烦。

我的 Rakefile 看起来像：

```
$:.unshift("/Library/RubyMotion/lib")
require 'motion/project'
require 'rubygems'
require 'bubble-wrap'

Motion::Project::App.setup do |app|
  # Use `rake config' to see complete project settings.
  app.name = "Hello"
  app.device_family = :ipad #[:ipad,:iphone]

  app.files += Dir.glob(File.join(app.project_dir, 'vendor/BubbleWrap/lib/**/*.rb'))
end 
```

我也尝试过使用

需要“泡沫包装”

但我一直收到一个看起来像这样的错误：

```
ERROR! Can't resolve dependency `/Library/Ruby/Gems/1.8/gems/bubble-wrap
0.2.1/lib/pollute.rb' because ./Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/pollute.rb 
is not in ["./app/app_delegate.rb", 
"./app/login_controller.rb", "/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/app.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/gestures.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/http.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/json.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/kernel.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/ns_index_path.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/ns_notification_center.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/ns_user_defaults.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/ui_button.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/ui_view_controller.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap/version.rb", 
"/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/pollute.rb"] 
```

较新版本的 RubyMotion 不能与 BubbleWrap 一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:02:05.823

**更新**：这是从气泡包装 0.3.1 开始修复的

这是 gem 中的一个错误`bubble-wrap`，它试图在 gem 的路径前加上`./`. 我打开了一个[拉取请求](https://github.com/mattetti/BubbleWrap/pull/43)。

现在，您可以使用 RVM 或 rbenv 之类的东西来安装一个单独的 Ruby 副本并使用它，或者您可以`/Library/Ruby/Gems/1.8/gems/bubble-wrap-0.2.1/lib/bubble-wrap.rb`通过将第 14 行更改为以下内容来手动修补：

```
path = /^\.|\/Users\/|\/Library\/Ruby\/Gems\//.match(x) ? x : File.join('.', x) 
```

# python - 创建一种从文件中读取正数和负数的方法

> ID：10863005
> 
> 赞同：1
> 
> 时间：2012-06-02T14:17:54.580
> 
> 标签：python, struct

我想创建一个可以从 4 字节十六进制读取正值和负值的方法。我现在的方法只适用于正值。

```
def readtoint(read):
    keynumber = read[::-1]
    hexoffset=''
    for letter in keynumber:
        temp=hex(ord(letter))[2:]
        if len(temp)==1:
            temp="0"+temp
        hexoffset += "\\x"+temp
    #value = int(hexoffset, 16)
    return struct.unpack('<i', value)[0] 
```

上述方法目前不起作用，因为我试图使其与负数一起使用。基本上我的程序所做的是它从文件中读取 4 个字节，反转顺序，将其转换为十六进制，然后将十六进制转换为整数。对于负值，我被告知使用 struct 模块，但它似乎不适用于正值。python中有没有可以同时处理负值和正值的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:24:32.533

下面是一些将 32 位无符号转换为有符号的代码：

```
if value >= 1<<31:
    value -= 1<<32 
```

# html - 流式预签名 Amazon Cloudfront URL 的良好到期时间

> ID：10863007
> 
> 赞同：4
> 
> 时间：2012-06-02T14:18:31.363
> 
> 标签：html, video, amazon-web-services, video-streaming, amazon-cloudfront

如果我在 Cloudfront 上创建流式分发以将视频文件分发到播放器，我应该将预签名 URL 设置为多长时间？换句话说，由于流媒体已经开始，我可以让 20 分钟视频的 URL 在 1 分钟内过期吗？还是我需要将其设置为大于视频的持续时间？

我想让 URL 尽快过期，而不会降低用户体验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:54:34.987

您可以将其设置为 1 分钟。Afaik 它只是意味着该链接在第一次访问时可用，因此如果它是 rmtp，则流可以正常工作。

# javascript - 用不同的颜色为输入文本中的文本着色

> ID：10863010
> 
> 赞同：0
> 
> 时间：2012-06-02T14:18:48.550
> 
> 标签：javascript, jquery

我想根据适当的模式突出显示输入字段中的文本。所以我需要有可能用不同的颜色突出显示部分文本。例如：

```
{pseudo}
    AB{red}CD{/red} 1234{yellow}5678{/yellow}
{/pseudo} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:29:01.920

我进行了一些调查，发现这样的事情与 textarea 和可编辑 iframe 的帮助有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:27:41.010

我可能会创建多个具有零边框和相同背景的输入字段，然后将它们放在一个看起来像输入字段的 div 中。以不同的方式设置它们的颜色，然后有一些 javascript，如果框为空，自动设置焦点到第一个输入字段，并在输入时自动跳转到下一个。

# java - Java：声明一个变量但说它不存在

> ID：10863011
> 
> 赞同：0
> 
> 时间：2012-06-02T14:18:48.967
> 
> 标签：java, action, jframe, listener, handler

我正在尝试制作一个基本的计算器（我没有完成），但我收到一个错误，其中动作侦听器说变量“add”不存在。我已经解析了所有内容等，但变量似乎没有正确声明，代码如下：

```
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JTextField;

public class Gui extends JFrame{

    private JButton reg;
    private JButton reg2;
    private JButton reg3;
    private JButton reg4;
    private JTextField text;
    private JTextField text2;
    private JTextField text3;
    private JTextField text4;
    private JTextField text5;
    private JTextField text6;
    private JTextField text7;
    private JTextField text8;

    public Gui(){
        super("Buttons");
        setLayout(new FlowLayout());

        text = new JTextField("000000000000000000000");
        text2 = new JTextField("000000000000000000000");
        text3 = new JTextField("000000000000000000000");
        text4 = new JTextField("000000000000000000000");
        text5 = new JTextField("000000000000000000000");
        text6 = new JTextField("000000000000000000000");
        text7 = new JTextField("000000000000000000000");
        text8 = new JTextField("000000000000000000000");
        reg = new JButton("Add");
        reg2 = new JButton("Divide");
        reg3 = new JButton("Multiply");
        reg4 = new JButton("Subtract");

        add(text);
        add(text2);
        add(reg);
        add(text3);
        add(text4);
        add(reg2);
        add(text5);
        add(text6);
        add(reg3);
        add(text7);
        add(text8);
        add(reg4);

        String st = text.getText();
        String st2 = text.getText();
        String st3 = text.getText();
        String st4 = text.getText();
        String st5 = text.getText();
        String st6 = text.getText();
        String st7 = text.getText();
        String st8 = text.getText();

        int txt1 = Integer.parseInt(st);
        int txt2 = Integer.parseInt(st2);
        int txt3 = Integer.parseInt(st3);
        int txt4 = Integer.parseInt(st4);
        int txt5 = Integer.parseInt(st5);
        int txt6 = Integer.parseInt(st6);
        int txt7 = Integer.parseInt(st7);
        int txt8 = Integer.parseInt(st8);

        int add=txt1+txt2;
        if(txt4>0){
            int add2=txt3/txt4;
        }
        int add3=txt5*txt6;
        int add4=txt7-txt8;

        handlerClass handler = new handlerClass();
        reg.addActionListener(handler);
        reg2.addActionListener(handler);
        reg3.addActionListener(handler);
        reg4.addActionListener(handler);

    }

    public class handlerClass implements ActionListener{
        public void actionPerformed(ActionEvent event){
            if(event.getActionCommand()=="Add"){
                JOptionPane.showMessageDialog(null, String.format("Answer: %s", add));
            }
        }
    }
} 
```

这是错误代码

```
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problem: 
    add cannot be resolved to a variable

    at Gui$handlerClass.actionPerformed(Gui.java:101)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problem: 
    add cannot be resolved to a variable

    at Gui$handlerClass.actionPerformed(Gui.java:101)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problem: 
    add cannot be resolved to a variable

    at Gui$handlerClass.actionPerformed(Gui.java:101)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:23:14.367

这个：

```
JOptionPane.showMessageDialog(null, String.format("Answer: %s", add)); 
```

尝试`add`用作变量。但是，该方法*中不存在*该变量`actionPerformed`。它是构造函数中的*局部*变量`Gui`。`add`这也是一种*方法*，这有点令人困惑，但基本上问题是您在构造函数中*本地*`add`声明的变量稍后不存在。

 *另请注意，此比较：

```
if(event.getActionCommand()=="Add") 
```

*可能*取决于您提供命令的方式，但它实际上只是比较`String` *引用*。你应该使用：

```
if (event.getActionCommand().equals("Add")) 
```

或者如果操作命令可能为空（并且您不想费心检查）：

```
if ("Add".equals(event.getActionCommand()) 
```

另请注意：

> 线程“AWT-EventQueue-0”java.lang.Error 中的异常：未解决的编译问题：添加无法解析到变量

表示您可能*忽略*了来自 Eclipse 的警告“代码无法编译 - 您真的要尝试运行它吗？”

您不应该尝试运行无法编译的代码 - 您应该在尝试运行之前*修复编译时错误。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T14:23:58.643

确实，在ActionListener里面，`add`是没有定义的。它是 Gui 构造函数的局部变量。

只有在执行操作时（即在`actionPerformed()`方法内部），您才应该从文本字段中读取并执行添加。目前，您的代码会在初始化 Gui 时添加文本字段中的内容，并尝试在执行操作时显示此初始添加的结果。

此外，与在 actionPerformed 方法中比较按钮文本不同，为每个按钮添加特定的 ActionListener 会更简洁。添加一个添加到添加按钮的侦听器；一个监听器，它减去减法按钮等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:23:03.613

亚伦，相信编译器。你的代码错了，错了，错了。

```
public class handlerClass implements ActionListener{
    public void actionPerformed(ActionEvent event){
        if(event.getActionCommand()=="Add"){
            JOptionPane.showMessageDialog(null, String.format("Answer: %s", add));
        }
    }
} 
```

在 actionPerformed 的范围内没有名为 add 的变量。您在构造函数中声明的是一个在此处不可见的局部变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-02T14:23:44.837

如果您要问，`add`那是因为您在构造函数中声明了它

```
public Gui(){
...
    int add=txt1+txt2;
...
} 
```

所以它是本地引用，你不能在其他方法或内部类中使用它。如果您想在那里使用它，请将其设为类字段。

```
public class Gui extends JFrame{
...
    int add;

    public Gui(){
    ...
        int add=txt1+txt2;
    ...
    }
    public class handlerClass implements ActionListener{
        //now add will be accesible here
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T14:32:38.870

您的变量“add”在 Gui 的类构造函数中声明，它从未实例化。这是程序结构和变量范围的基本问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-02T14:22:52.340

它也应该说不`add2`存在。

在`ActionListener`实现内部，您无权访问`add`构造函数中声明的局部变量。它应该是实例变量、静态变量等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-08T06:39:43.243

`add`您已经在构造函数中声明了变量。这意味着这`add`是一个局部变量，仅在构造函数内部可见。

您需要做的就是将变量的声明移到`add`外面。换句话说，如果您希望它对嵌套类可见，请添加一个实例变量。

现在您的实例变量将有一个像这样的变量：

```
private JButton reg;
private JButton reg2;
...
private JTextField text7;
private JTextField text8;

private int add; 
```

和下面的行，您分配值的位置`add`将从：

```
 int add=txt1+txt6; 
```

至

```
 add=txt1+txt2; 
```

请注意，如果您希望其他变量对某些嵌套类可见，则 int 您也必须对其他变量执行相同的操作。*

# objective-c - UITableView 单元格

> ID：10863012
> 
> 赞同：-2
> 
> 时间：2012-06-02T14:18:49.380
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

**你好。我构建了我的应用程序，并在领事馆中查看了此错误：**

> 警告：由于 tableView:accessoryTypeForRowWithIndexPath: in 的委托实现而使用旧版单元格布局。请删除此方法的实现并设置单元格属性附件类型和/或编辑附件类型以移动到新的单元格布局行为。在以后的版本中将不再调用此方法。

**代码是：**

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
     {
    return 1;
      }

     - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
      return [name count];
     }

     // Customize the appearance of table view cells.
     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }

    // Set up the cell...
    NSString *cellValue = [name objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;
    /*NSString *trimmedString = [[listOfItems objectAtIndex:indexPath.row] stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
    NSString *website4 = [NSString stringWithFormat:@"http://shaymargolisapps.x10.mx/send.php?mission=GetImageOfApp&aname=%@", trimmedString]; 
    NSData *dataURL4 = [NSData dataWithContentsOfURL:[NSURL URLWithString:website4]];
    NSString *strResult4 = [[[NSString alloc] initWithData:dataURL4 encoding:NSUTF8StringEncoding]autorelease];
    NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:strResult4]];
    UIImage* image = [[UIImage alloc] initWithContentsOfFile:@"%@PlaceholderApp.png"];
    [cell.imageView setImage:image];*/
    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //Get the selected country
    NSString *selectedCountry = [name objectAtIndex:indexPath.row];

    //Initialize the detail view controller and display it.
    DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];
    dvController.selectedCountry = selectedCountry;
    [self.navigationController pushViewController:dvController animated:YES];
    [dvController release];
    dvController = nil;
         }

          - (UITableViewCellAccessoryType)tableView:(UITableView *)tableView             accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath {

        //return UITableViewCellAccessoryDetailDisclosureButton;
         return UITableViewCellAccessoryDisclosureIndicator;
              }

          - (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath: (NSIndexPath *)indexPath {

            [self tableView:tableView didSelectRowAtIndexPath:indexPath];
                  } 
```

**什么问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:41:26.737

这意味着它所说的。您正在使用已弃用的方法。删除此方法的实现：

```
-(UITableViewCellAccessoryType)tableView:(UITableView *)tableView             accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath 
```

改为在 cellForRowAtIndexPath 中设置附件类型：

```
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator; 
```

我现在看到你已经在做。

# matlab - Matlab在gui中显示动画gif

> ID：10863014
> 
> 赞同：1
> 
> 时间：2012-06-02T14:18:51.993
> 
> 标签：matlab, user-interface, gif

我试图在我的 GUI 中显示 GIF 图像，但它不起作用。它向我显示了一个假图像（不是 GIF，并且具有不同的颜色）。

我知道文件交换中有一个“动画 GIF”，但我更喜欢别的东西：/
我尝试了下一个代码，但它不起作用：

```
function [] = GUI_400()

     hFig = figure('Name','Simulation Plot Window','Menubar','none', 'Resize','off', 'WindowStyle','modal', 'Position',[300 300 1150 600]);
     movegui(hFig, 'center');

     hAxes = axes('Parent',hFig,'Units','pixels','Position',[362 242 424 359]);  %#   so the position is easy to define
     image(imread('loading.gif', 'gif'),'Parent',hAxes);  %# Plot the image
     set(hAxes,'Visible','off', 'handlevisibility', 'off');          %# Turn the axes visibility off

end 
```

这是我的 gif 图片： [http ://desmond.imageshack.us/Himg822/scaled.php?server=822&filename=loadingoz.gif&res=landing](http://desmond.imageshack.us/Himg822/scaled.php?server=822&filename=loadingoz.gif&res=landing)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T21:17:59.890

下面是一个 GIF 播放器的例子：

```
function gifPlayerGUI(fname)
    %# read all GIF frames
    info = imfinfo(fname, 'gif');
    delay = ( info(1).DelayTime ) / 100;
    [img,map] = imread(fname, 'gif', 'frames','all');
    [imgH,imgW,~,numFrames] = size(img);

    %# prepare GUI, and show first frame
    hFig = figure('Menubar','none', 'Resize','off', ...
        'Units','pixels', 'Position',[300 300 imgW imgH]);
    movegui(hFig,'center')
    hAx = axes('Parent',hFig, ...
        'Units','pixels', 'Position',[1 1 imgW imgH]);
    hImg = imshow(img(:,:,:,1), map, 'Parent',hAx);
    pause(delay)

    %# loop over frames continuously
    counter = 1;
    while ishandle(hImg)
        %# increment counter circularly
        counter = rem(counter, numFrames) + 1;

        %# update frame
        set(hImg, 'CData',img(:,:,:,counter))

        %# pause for the specified delay
        pause(delay)
    end
end 
```

* * *

### 编辑

正如我在评论中提到的，您发布的示例 GIF 图像相当奇怪。以下是使其工作的更改。在 while 循环中，在该`set(hImg,'CData',..)`行之后立即添加以下内容：

```
%# update colormap
n = max(max( img(:,:,:,counter) ));
colormap( info(counter).ColorTable(1:n,:) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T15:54:06.413

我建议像这样显示你的 gif。这样，您就不会遇到讨厌的 while 循环阻塞回调和其他代码执行。

```
jLabel = javaObjectEDT('javax.swing.JLabel',javaObjectEDT('javax.swing.ImageIcon',which([fname '.gif'])));
[hJ,hC] = javacomponent(jLabel,getpixelposition(hFig).*[0 0 1 1],hFig);
set(hC,'units','normalized','position',[0 0 1 1]) 
```

# php - 如何在php中制作正确的json数据

> ID：10863018
> 
> 赞同：1
> 
> 时间：2012-06-02T14:19:33.397
> 
> 标签：php, mysql, json, jsonp

我正在尝试使用 json_encode() 函数在 php 中制作 json 数据。然后我将在客户端使用这些数据。我完成了一部分。我当前的代码以这种格式显示 json 数据

```
{
"data":
{
    "tag":"home",
    "success":1,
    "error":0,
    "uid":"4fc8f94f1a51c5.32653037",
    "name":"Zafar Saleem",
    "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile1.jpg",
    "places":
    {
        "place_photo":"http:\/\/example.info\/android\/places_photos\/place1.jpg",
        "created_at":"2012-06-02 00:00:00",
        "seeked":"0"
    }
}
}
{
"data":
{
    "tag":"home",
    "success":1,
    "error":0,
    "uid":"4fc9c413554104.22444656",
    "name":"Name",
    "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile2.jpg",
    "places":
    {
        "place_photo":"http:\/\/example.info\/android\/places_photos\/place2.jpg",
        "created_at":"2012-06-03 00:00:00",
        "seeked":"0"
    }
}
}
{
"data":
{
    "tag":"home",
    "success":1,
    "error":0,
    "uid":"4fc9c48c529675.45551665",
    "name":"Name",
    "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile3.jpg",
    "places":
    {
        "place_photo":"http:\/\/example.info\/android\/places_photos\/place3.jpg",
        "created_at":"2012-06-04 00:00:00",
        "seeked":"20"
    }
}
} 
```

我想以这种形式在上面的数据中显示什么

```
{
"data": 
[
    {
        "tag":"home",
        "success":1,
        "error":0,
        "uid":"4fc8f94f1a51c5.32653037",
        "name":"Zafar Saleem",
        "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile1.jpg",
        "places":
        {
            "place_photo":"http:\/\/example.info\/android\/places_photos\/place1.jpg",
            "created_at":"2012-06-02 00:00:00",
            "seeked":"0"
        }
    },
    {
        "tag":"home",
        "success":1,
        "error":0,
        "uid":"4fc9c413554104.22444656",
        "name":"Name",
        "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile2.jpg",
        "places":
        {
            "place_photo":"http:\/\/example.info\/android\/places_photos\/place2.jpg",
            "created_at":"2012-06-03 00:00:00",
            "seeked":"0"
        }
    },
    {
        "tag":"home",
        "success":1,
        "error":0,
        "uid":"4fc9c48c529675.45551665",
        "name":"Name",
        "profile_photo":"http:\/\/example.info\/android\/profile_photos\/profile3.jpg",
        "places":
        {
            "place_photo":"http:\/\/example.info\/android\/places_photos\/place3.jpg",
            "created_at":"2012-06-04 00:00:00",
            "seeked":"20"
        }
    }
]
} 
```

这是我生成 json 数据的 php 代码

从数据库中获取数据的数据库函数

```
 public function getHome() {
    $result = mysql_query("SELECT * FROM places") or die(mysql_error());
    // check for result
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
            $data[] = $row;
        }
        return $data;
        /*
        $result = mysql_fetch_array($result);
        return $result;
        */
    } else {
        // user not found
        return false;
    }
} 
```

这是我在 php 上制作 json 的地方

```
if($db->getHome()) {
        $data = $db->getHome();
        foreach($data as $r) {
            $response['success'] = 1;
            $response['uid'] = $r['uid'];
            $response['name'] = $r['name'];
            $response['profile_photo'] = $r['profile_photo_path'];
            $response['places']['place_photo'] = $r['place_photo_path'];
            $response['places']['latitude'] = $r['latitude'];
            $response['places']['longitude'] = $r['longitude'];
            $response['places']['created_at'] = $r['created_at'];
            $response['places']['seeked'] = $r['total_completed'];
            echo json_encode(array('data' => $response));
        }
    } else {
        $response['error'] = 1;
        $response['error_msg'] = 'No data available';
        echo json_encode($response);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:16:18.737

考虑使代码看起来像这样：

```
// this function turns a database row into data for frontend use
function convert_to_response($r)
{
  return array(
    'success' => 1,
    'uid' => $r['uid'],
    'name' => $r['name'],
    'profile_photo' => $r['profile_photo_path'],
    'places' => array(
      'place_photo' => $r['place_photo_path'],
      'latitude' => $r['latitude'],
      'longitude' => $r['longitude'],
      'created_at' => $r['created_at'],
      'seeked' => $r['total_completed'],
    ),
  );
}

if($db->getHome()) {
        $data = $db->getHome();
        echo json_encode(array(
            'data' => array_map('convert_to_response', $data) // convert data array
        ));
    } else {
        $response['error'] = 1;
        $response['error_msg'] = 'No data available';
        echo json_encode($response);
    } 
```

您的代码自己回显每个数据行，这就是为什么您没有看到数组（使用方括号）。

通过将响应转换移动到单独的函数中，我还使您的代码更加清晰；这样，它可以被函数使用，例如`array_map`将一种格式的数据数组转换为另一种格式。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:46:53.317

当我需要将 json 数据打印到客户端时，我所做的就是这样做。

```
print_json(array('logged'=>true),true); 
```

print_json 函数将打印传入第一个对象的对象的 json 格式数据。我的第二个论点决定了我通常提供的是否死亡。

```
function print_json($data,$die){
    header('Content-Type: application/json; charset=utf8');
    print_r(json_encode($data));
    if ($die === true) die();
} 
```

小菜一碟。希望你喜欢它，这是我多年来想出的最好的方法。

# iphone - openWithCompletionHandler 没有在我的设备上返回

> ID：10863019
> 
> 赞同：3
> 
> 时间：2012-06-02T14:19:37.050
> 
> 标签：iphone, objective-c, ipad, icloud, uidocument

当我尝试从 iCloud 打开使用另一台设备创建的 UIDocument 时，我遇到了奇怪的行为。当我调用***openWithCompletionHandler***时，它永远不会完成。

这是我重现该行为的方式：

1.  我在 iPad 上创建了一个新的 UIDocument 并将其存储在 iCloud 中
2.  然后我删除了同一个应用程序，但从 iPhone
3.  我在 iPhone 上从 XCode 运行应用程序
4.  到目前为止，iPhone 是干净的，因为该应用程序已被删除
5.  当应用程序第一次在 iPhone 上运行时，它调用***了 openWithCompletionHandler***方法，该方法挂起并且没有任何反应。***在openWithCompletionHandler***操作结束后，它没有到达要执行的代码块。

它仅在我创建一个新的 UIDocument 并将其从 iPhone 存储在 iCloud 中时才有效。然后，如果我执行相同的步骤（1-5），但在 iPad 上我会遇到类似的行为。

这是我拥有的源代码：

```
if ([query resultCount] == 1)
{
    NSMetadataItem *item = [query resultAtIndex:0];
    NSURL *url = [item valueForAttribute:NSMetadataItemURLKey];

    _progressDoc = [[ProgressDocument alloc] initWithFileURL:url];

    [_progressDoc openWithCompletionHandler:^(BOOL success) {
        if (success)
        {
            [[NSNotificationCenter defaultCenter] 
             addObserver:self 
             selector:@selector(progressDocumentHasChanged:) 
             name:UIDocumentStateChangedNotification 
             object:nil];

            NSLog(@"Progress Document opened from iCloud");
        }
        else {
            NSLog(@"failed to open Progress Document from iCloud");
        }
    }];
} 
```

有没有人遇到过类似的问题？

我也尝试使用下面的方法手动下载文件，但仍然是相同的行为......

```
- (BOOL)downloadFileIfNotAvailable:(NSURL*)file {
    NSNumber*  isIniCloud = nil;

    if ([file getResourceValue:&isIniCloud forKey:NSURLIsUbiquitousItemKey error:nil]) {
        // If the item is in iCloud, see if it is downloaded.
        if ([isIniCloud boolValue]) {
            NSNumber*  isDownloaded = nil;
            if ([file getResourceValue:&isDownloaded forKey:NSURLUbiquitousItemIsDownloadedKey error:nil]) {
                if ([isDownloaded boolValue])
                    return YES;

                // Download the file.
                NSError *error;
                NSFileManager*  fm = [NSFileManager defaultManager];
                BOOL success = [fm startDownloadingUbiquitousItemAtURL:file error:&error];
                if (success) {
                    NSLog(@"Started download at URL: %@", file);
                } else {
                    NSLog(@"Failed to start download at URL: %@: %@", file, error.localizedDescription); 
                }                 
                return NO;
            }
        }
    }

    // Return YES as long as an explicit download was not started.
    return YES;
} 
```

非常感谢！

# php - Yii 框架：CPhpAuthManager 错误

> ID：10863020
> 
> 赞同：0
> 
> 时间：2012-06-02T14:19:53.967
> 
> 标签：php, yii, rbac, yii-validation

我尝试使用本 [指南](http://www.yiiframework.com/wiki/65/how-to-setup-rbac-with-a-php-file/) 制作 RBAC，到目前为止，我让它没有错误地工作，但我现在卡住了几个小时，因为我的模型中的规则不起作用。我尝试使用以下代码测试读者角色：

```
<?php if(Yii::app()->user->checkAccess('reader')): ?>
<h1> Grats u are a reader </h1>

<?php endif; ?> 
```

因此，在我登录后，应该会出现这条小消息，但不知何故不会。例如，当我登录并尝试转到我的模型索引时，我可以看到注册用户，它告诉我我没有权限，甚至认为我这样做了：

```
 array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('view','index'),
            'roles'=>array('reader')

        ), 
```

欢迎任何想法，并告诉我是否需要显示更多代码。好的回到思考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:10:25.110

解决它。只需要直接给出访问规则。就像读者可以去 index 和 view page，但不能做 update 和 admin，而管理员角色则相反。

# javascript - 如何在 HTML5 的画布中复制形状？

> ID：10863022
> 
> 赞同：3
> 
> 时间：2012-06-02T14:20:09.040
> 
> 标签：javascript, html, canvas, html5-canvas

我有一个半复杂的水平对称形状，我正在尝试使用 HTML5 构建。当我试图完成它时，我意识到如果我可以复制一半的形状，镜像并移动它以将两个图像连接在一起会更容易。我正在寻找如何镜像和移动形状的示例，而不是如何复制它。

显然，我希望我不需要两个单独的画布元素。

这是我的参考代码：

```
var canvas = document.getElementById(id),
      context = canvas.getContext("2d"),
      color,
      height = 50;
      width = 564;
      arrowWidth = 40,
      arrowHeight = 15,
      arrowStart = height - arrowHeight,
      edgeCurveWidth = 50;

    if (parseInt(id.substr(-1), 10) % 2) {
      color = "#F7E5A5";
    } else {
      color = "#FFF";
    }

    context.beginPath();
    context.lineWidth = 4;
    context.strokeStyle = "#BAAA72";
    context.moveTo(0, 0);
    context.quadraticCurveTo(-10, arrowStart, edgeCurveWidth, arrowStart);
    context.quadraticCurveTo(width/2 - arrowWidth/2 - 15, arrowStart - 15, width/2 - arrowWidth/2, arrowStart);
    context.quadraticCurveTo(width/2, height, width/2, height);
    context.stroke();
    context.lineTo(width/2, 0);
    context.closePath();
    context.fillStyle = color;
    context.fill(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T14:35:29.297

您可以将您的形状移动到一个函数中，调用一次，然后使用另一个状态 ( `save`, `restore`) 添加镜像效果（使用`transform`或`scale`+ `translate`）并再次调用它：

```
function drawHalfShape(context,width, height,arrowWidth,arrowHeight,edgeCurveWidth,color){
    context.beginPath();
    context.lineWidth = 4;
    context.strokeStyle = "#BAAA72";
    context.moveTo(0, 0);
    context.quadraticCurveTo(-10, arrowStart, edgeCurveWidth, arrowStart);
    context.quadraticCurveTo(width/2 - arrowWidth/2 - 15, arrowStart - 15, width/2 - arrowWidth/2, arrowStart);
    context.quadraticCurveTo(width/2, height, width/2, height);
    context.stroke();
    context.lineTo(width/2, 0);
    context.closePath();
    context.fillStyle = color;
    context.fill();
}

var canvas = document.getElementById(id),
      context = canvas.getContext("2d"),
      color,
      height = 50;
      width = 564;
      arrowWidth = 40,
      arrowHeight = 15,
      arrowStart = height - arrowHeight,
      edgeCurveWidth = 50;

    if (parseInt(id.substr(-1), 10) % 2) {
      color = "#F7E5A5";
    } else {
      color = "#FFF";
    }

drawHalfShape(context,width,height,arrowWidth,arrowHeight,edgeCurveWidth,color);

context.save();
context.translate(-width/2,0); // these operations aren't commutative
context.scale(-1,0);           // these values could be wrong
drawHalfShape(context,width,height,arrowWidth,arrowHeight,edgeCurveWidth,color);
context.restore(); 
```

有关示例，请参见[MDN：转换](https://developer.mozilla.org/en/Canvas_tutorial/Transformations)。

# django - Django 1.4 带有参数的 URL 上的另一个反向 NoReverseMatch 错误

> ID：10863025
> 
> 赞同：0
> 
> 时间：2012-06-02T14:20:38.197
> 
> 标签：django, django-1.4

这是另一个反向错误。

URL 按预期工作。我已经制定了基本功能，可以毫无问题地在网站上单击。只有当我尝试反转 URL 时才会引发错误。如果我注释掉对反向的调用，一切都会按预期工作，否则会出错。

> 找不到带有参数“（）”和关键字参数“{'id'：'idvalue'，'title'：'titlevalue'}'的'app_view_list'的反向。
> 
> 无反向匹配

我正在使用开发服务器在 Django 1.4 上进行开发。

这是代码

**网址.py**

```
urlpatterns = patterns('',
    url(r'^list/$', 'app.views.browse_list', name='app_browse_lists'),
    url(r'^list/(?P<id>[0-9]*)/(?P<title>[0-9a-zA-Z-]*)/$', 'app.views.list', name='app_view_list'),
) 
```

我的目标功能

**视图.py**

```
def list(request, id, title):
    print reverse ('app_view_list', kwargs={'id': 'idvalue', 'title': 'titlevalue'})
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:51:11.053

你真的通过了`idvalue`吗？这不匹配，因为该`id`组期待一个数字。

无论如何，您的正则表达式会更好地编写：

```
r'^list/(?P<id>\d+)/(?P<title>[\d\s]+/$ 
```

# android - 检测android是否连接到互联网

> ID：10863030
> 
> 赞同：1
> 
> 时间：2012-06-02T14:21:10.197
> 
> 标签：android, connection

我有一个大问题：我想控制是否激活了**3G**或**WiFi 。**这是我的代码：

```
//controllo se è accesa la connessione 
        ConnectivityManager cm =
                (ConnectivityManager)this.getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
        boolean isConnected = activeNetwork.isConnectedOrConnecting();
        //controllo se sono connesso
        if(isConnected==false){
            final AlertDialog.Builder builder=new AlertDialog.Builder(this);
        builder.setTitle("Attenzione!");
        builder.setMessage("L'applicazione senza la connessione ad internet non può funzionare. La preghiamo di attivarla.");
        builder.setIcon(android.R.drawable.ic_dialog_alert);
        builder.setPositiveButton("OK", new OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {

            }
        });
        builder.show();} 
```

它在 oncreate 中。当我打开活动时，我会强制关闭。原因是这样的：

引起：java.lang.NullPointerException

我不明白问题出在哪里:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:25:24.197

如果没有活动连接，则`getActiveNetworkInfo()`返回`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:27:50.200

您可以检查设备是否有互联网连接：

```
public  boolean CheckConnection() {
    ConnectivityManager cm = (ConnectivityManager) MbridgeApp.getContext().getSystemService(
        Context.CONNECTIVITY_SERVICE);

    NetworkInfo wifiNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    if (wifiNetwork != null && wifiNetwork.isConnected()) {
      return true;
    }

    NetworkInfo mobileNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    if (mobileNetwork != null && mobileNetwork.isConnected()) {
      return true;
    }

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {
      return true;
    }
    return false;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:33:29.603

ConnectivityManager 的 getActiveNetworkInfo() 方法返回一个 NetworkInfo 实例，该实例表示它可以找到的第一个连接的网络接口，如果接口已连接，则返回 null 如果没有。检查此方法是否返回 null 应该足以判断 Internet 连接是否可用。

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

您还需要：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

在你的 android 清单中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T14:36:15.310

```
ConnectivityManager cm = (ConnectivityManager)getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
boolean isConnected = false;
if(activeNetwork!=null)
    isConnected = true;
activeNetwork.isConnectedOrConnecting();
if(!isConnected){
   final AlertDialog.Builder builder=new AlertDialog.Builder(YourActivity.this);
   builder.setTitle("Attenzione!");
   builder.setMessage("L'applicazione senza la connessione ad internet non può funzionare. La preghiamo di attivarla.");
   builder.setIcon(android.R.drawable.ic_dialog_alert);
   builder.setPositiveButton("OK", new OnClickListener() {

   public void onClick(DialogInterface dialog, int which) {
   }
   });
   builder.show();
} 
```

# javascript - 通过jquery创建模态窗口

> ID：10863033
> 
> 赞同：0
> 
> 时间：2012-06-02T14:21:29.383
> 
> 标签：javascript, jquery

我正在尝试在我的整个网站上创建一个掩码（模态），为此我尝试了：

**css**

```
 #mask 
{
  position:absolute;
  z-index:9000;
  background-color:#000;
  display:none;
} 
```

**js**

```
 $('body').append(' <div id="mask"></div> ');
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    $('#mask').css({ 'width': maskWidth, 'height': maskHeight, top: 0, opacity: 1 }); 
```

它工作正常，但面具只在我网站的可见部分，当我`scrolls down`没有面具时。有人能告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:23:22.680

用于`position:fixed`在滚动时使其可用。

```
#mask 
{
  position:fixed;
  z-index:9000;
  background-color:#000;
  display:none;
} 
```

# asp.net - GridView中Modal Popup Extender的解决方案

> ID：10863034
> 
> 赞同：0
> 
> 时间：2012-06-02T14:21:31.297
> 
> 标签：asp.net, modalpopupextender

当用户单击 GridView 中的 LinkBut​​ton 时，我试图显示模态弹出窗口。我放置了一个断点进行测试，但是当我单击 Gridview 中的链接按钮时，它似乎没有通过 ModalPopupExtender.Show() 事件。

```
protected void lnkItemName_Click(object sender, EventArgs e)
{<---Break Point
     ModalPopupExtender.Show();
}

   <asp:GridView ID="grvItem" runat="server" AutoGenerateColumns="False" 
        DataSourceID="SqlDataSourceItem" onrowdatabound="grvItem_RowDataBound" 
        DataKeyNames="ID">                                   
        <Columns>                  
            <asp:TemplateField >                                                        
                <ItemStyle Font-Size="10" />
                <HeaderTemplate>
                    ITEM
                </HeaderTemplate>
                <ItemStyle Wrap="True" />
                <ItemTemplate>                                           
                    <asp:LinkButton ID="lnkItemName" runat="server" Text='<%# Eval("NAME") %>' CssClass="h7" Width="100" OnClick="lnkItemName_Click"></asp:LinkButton>
                    <asp:Panel ID="pnlItem" runat="server" Style="display: none" Width="400px" Height="400px" BackColor="White">
                        <div style="float: right;">
                            <asp:LinkButton ID="lnkClose" runat="server">Close</asp:LinkButton>
                        </div>
                        <asp:TextBox ID="txt" runat="server">asdf</asp:TextBox>
                    </asp:Panel>
                    <asp:ModalPopupExtender ID="extPerson" runat="server" TargetControlID="lnkItemName"
                        PopupControlID="pnlItem" DropShadow="true" CancelControlID="lnkClose" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:36:42.887

“lnkItemName”是“extPerson”的 TargetControlID，因此根本不会调用“lnkItemName_Click”——而是由 ModalPopupExtender 处理，并且“pnlItem”会自动显示。如果您愿意，您可以删除 TargetControlID 属性，然后“lnkItemName_Click”**将**在服务器上被调用，因此您可以手动显示“pnlItem” - 但是，您首先必须以某种方式找到正确的“extPerson”控件（每个行有一个），将其转换为 ModalPopupExtender，然后在其上调用 Show()。

长话短说，只需简单地删除 OnClick 事件，它的用处 - 如果 Modal Popup 没有显示它现在的方式，那么还有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:56:38.850

做这个 ：

```
<ajaxToolkit:ModalPopupExtender runat="server" ID="mdlImageDetails" TargetControlID="mdConfirmbtn"
        PopupControlID="modelDiv" BackgroundCssClass="modalBackground" >
    </ajaxToolkit:ModalPopupExtender>
    <asp:Button runat="server" ID="mdConfirmbtn" Style="display: none;" /> 
```

`.show()`然后在代码中，您可以通过调用和`.hide()`方法手动控制您的 ModalPopUp 。

# php - 提交表单时将数组与表单字段一起提交到数据库

> ID：10863035
> 
> 赞同：0
> 
> 时间：2012-06-02T14:21:40.707
> 
> 标签：php, mysql, arrays, insert

我的网站链接到另一个网站数据库，我有一个表单，其中包含向外部数据库提交查询的字段。查询将类似于

```
SELECT src, timestamp FROM files WHERE uploader_id = 1 
```

该查询将重新运行一个类似于

```
Array (   
[0] => Array ( [src] => http://externaldatabase/0.jpg [created] => 1111111111 ) 
[1] => Array ( [src] => http://externaldatabase/1.jpg [created] => 1111111111 ) 
[2] => Array ( [src] => http://externaldatabase/2.jpg [created] => 1111111111 )
[3] => Array ( [src] => http://externaldatabase/3.jpg [created] => 1111111111 ) 
) 
```

等用于检索的所有文件。

我的网站上有一个数据库，我试图将这些值与从表单中检索到的其他值一起写入。

所以表格列将是

```
fid     uid     uri     timestamp 
```

uri 将是 src，创建时间戳。fid 自动递增 1，而 uid 将是提交表单的用户的 id。

如何将我自己的变量（例如提交表单的用户）添加到从查询返回的原始数组中，以便我可以填充表。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:58:52.577

这是一些伪代码：

```
if $_POST

    if isset($_POST['uploader_id'])

        $image = [SELECT src, timestamp FROM files WHERE uploader_id = 1]

        foreach $images as $uri
            insert into myDatabaseTable (uid, uri, timestamp) values ($_POST['uid'], $uri, date('YYYY-mm-dd H:i:s')
        endforeach

    else

        // however you want to handle form validation

    endif
endif 
```

# web-services - 如何使用 SSL 加密设置 Apache 反向代理？

> ID：10863038
> 
> 赞同：0
> 
> 时间：2012-06-02T14:22:01.527
> 
> 标签：web-services, apache, https

我有一个通过 HTTP 为应用程序提供服务的 Web 应用程序。我想设置一个 HTTPS 代理服务器，它只是镜像该 Web 应用程序。代理和实际 Web 应用服务器之间的连接不需要加密，因为它都在我们的防火墙后面。

为了更详细地解释，现在我有一个应用程序：

```
http://IPAddress:8081/app 
```

我想启用这个：

```
https://app.mycompany.com:8443/app 
```

无需在原始 Web 服务器（“IPAddress”）上实际设置 HTTPS。我需要这样做的原因有些复杂，但我不是一个大的 Apache 人，当我去做这个任务时会立即感到迷茫！如果有帮助，我正在运行 Ubuntu！

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-02T15:59:48.690

想通了。到目前为止，最好的方法是 nginx。我花了 5 分钟来设置一个完美运行的反向代理。您只需创建一个指向内部网络服务器的虚拟主机，其余的由 nginx 完成。它甚至为您提供了一些很酷的功能，例如冗余和负载平衡，可以在核心 Web 应用程序服务器因任何原因出现故障时使用。以防万一有人看到这个并需要同样的东西！

# google-maps-api-3 - 使用 Google Maps v3 在 Mapstraction 中移动标记

> ID：10863042
> 
> 赞同：0
> 
> 时间：2012-06-02T14:22:11.857
> 
> 标签：google-maps-api-3, google-maps-markers, mapstraction

我正在尝试使用 Mapstraction Google Maps v3 放置一个可以移动的标记（可移动标记）。但我找不到正确的设置。

我可以放置一个静态标记。但找不到可移动标记的配置。有人对此有任何想法吗？

干杯，RD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:03:42.517

（我假设您使用的是 3.9 版的 API）

您是否尝试在构造函数中将 draggable 设置为 true？

（需要）：

[https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

您还可以进一步研究鼠标事件类，标记类具有 SetPosition 方法，鼠标事件具有 OnMouseOver 事件或某种程度的事件和 OnMouseClick 事件或类似事件。

现在我以前从未使用过这个 API，我没有做太多的 Javascript，但我尝试制作一些伪代码。

选项 A：

```
var default = new google.maps.MarkerOptions;
//Other setting's go here.//
default.draggable = true;
//For fun.//
default.raiseOnDrag = true;
//Example object.//
var marker = new google.maps.Marker( default ); 
```

我认为这可能会使对象可拖动。

选项 B：

```
/*This function will check if we are going to move our marker and then do it if
the conditions are right.*/
function CheckMoveMarker( var marker )
{
   //Make a new mouse event.//
   mouseStuff = new google.maps.SomePseudoMouseEvent();

   //In the real API this was an event but I dident want to write one... :-P//
   if( mouseStuff.isOver( marker.getRect() ) == true ) {

      //You may want to pop a thread here.//
      while ( mouseStuff.mouseClicked() == true ) {

         /*You may need some clever way to get the position, perhaps through
         the "map" class: https://developers.google.com/maps/documentation
         /javascript/reference#Map .*/

         marker.setPosition( mouseStuff.x, mouseStuff.y );
      }
   }

   //Return the changes to our marker.//
   return marker;
}

//Somewhere in your code.//
myMarker = CheckMoveMarker( myMarker ); 
```

# vb.net - 将控件移动到最大化表单的外边缘？

> ID：10863043
> 
> 赞同：1
> 
> 时间：2012-06-02T14:22:40.467
> 
> 标签：vb.net, vb.net-2010

在过去的几天里，我一直在处理 Windows 窗体，但在尝试移动控件时遇到了砖墙。

我想我对锚定和对接有基本的了解，但我没有得到我希望的结果，所以我附上了一些我正在尝试做的屏幕截图。

当我的表单最大化时，这与将控件移动到外边缘无关。

图片1，

这就是它目前的样子。

[http://i45.tinypic.com/o73toj.jpg](http://i45.tinypic.com/o73toj.jpg)

图2，

这就是我最大化我的表单时的样子。

[http://i45.tinypic.com/ru9t2d.jpg](http://i45.tinypic.com/ru9t2d.jpg)

图3，

这就是我想要达到的目标。

[http://i47.tinypic.com/28gxmoj.jpg](http://i47.tinypic.com/28gxmoj.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:39:17.833

我不是精通 Windows 窗体，而是查看我找到的文档：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)

在这个类中有如下属性：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.right.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.right.aspx)

我还发现：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)

它具有以下属性：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.width.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.width.aspx)

和

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.height.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.height.aspx)

您可以通过存储组件的原始位置，获取表单的高度和宽度，并根据一些移动它们来“缩放”“组件”（文本字段、按钮、标签等）上的位置相对于那个的比率（如果我有道理，如果我不是，我希望你能大致了解我想说的话）。

# php - 打开/关闭或离开页面时php中的访问者计数器

> ID：10863051
> 
> 赞同：0
> 
> 时间：2012-06-02T14:23:16.333
> 
> 标签：php, mysql, counter, visitor-statistic, visitors

> **可能重复：**
> [如何在 php 中制作访客计数器？](https://stackoverflow.com/questions/10862686/how-can-i-make-visitor-counter-in-php)

我想在页面打开/关闭或离开时插入，但不是 onunload .. 下面的代码帮助我在打开页面时插入，但在关闭或离开时不插入

```
session_start();
if (!isset($_SESSION["visits"]))
    $_SESSION["visits"] = 0;
if ($_SESSION["visits"] > 1){
    echo 'visit='.$_SESSION["visits"];
    echo "You hit the refresh button!";}
else{
    mysql_query(
        "INSERT INTO najd_visit( visit_userId, visit_staticId, visit_page,
            visit_enterTime)VALUES ('$userId', '$Sid', '$title', '$date') ");
    $_SESSION["visits"] = $_SESSION["visits"] + 1;
    echo 'visit='.$_SESSION["visits"];
    echo "This is my site";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:26:16.303

当有人“离开”页面时，您不能通过 PHP 运行某些东西 - 因为浏览器从不向您的服务器发送任何内容来触发脚本。

您唯一可能的选择是使用 javascript 并在他们离开时运行它 - 但它充其量是喜怒无常且不可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:07:18.737

您可以使用 Javascript 和 Ajax。Javascript：[拦截页面退出事件](https://stackoverflow.com/questions/1704533/intercept-page-exit-event) Ajax - [http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

编辑：我不认为你可以在没有卸载的情况下做到这一点，php 是一种服务器端语言，而不是用户端。

# ruby-on-rails - 如果表单字段在 ruby on rails 中为空白，如何停止运行 before_save 方法？

> ID：10863054
> 
> 赞同：0
> 
> 时间：2012-06-02T14:23:30.513
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有一种方法可以将用户输入/粘贴的 URL 转换为微博表单。在发布/保存微博之前，他们输入或粘贴的 URL 会转换为适当的 URL。然后我可以在我的应用程序中使用其他一些东西。

问题是，如果已输入/粘贴链接，我只需要运行 before_save 方法。当我的应用程序中断时没有输入或粘贴一些链接时。我想知道要使用的适当条件语句是什么？和可能的例子..

**这是我的模型..**

```
class Micropost < ActiveRecord::Base
    include OgpObjectsHelper

    belongs_to :user
    has_many :comments, :dependent => :destroy
    has_one  :photo, :dependent => :destroy

    accepts_nested_attributes_for :photo, 
    :reject_if => proc { |attributes| attributes['image'].blank? }, 
    :allow_destroy => true

    attr_accessor :username 
    attr_accessible :content, :user_id, :poster_id, :username, :link, :photo_attributes 

    validates :content, :presence => true, :length => { :maximum => 10000 }
    validates :user_id, :presence => true

    default_scope :order => 'microposts.created_at DESC'

    auto_strip_attributes :content,
                          :nullify => true, 
                          :strip => false

    before_save :clean_up_video_link

    protected

    def clean_up_video_link
      self.link = get_video_data(link)
    end

end 
```

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:31:17.223

如果我正确理解问题，那就是你可以使用的

```
def clean_up_video_link
  link = get_video_data(link) if link?
end 
```

# iis-7.5 - IIS：Web 应用程序定期挂起需要系统重新启动

> ID：10863059
> 
> 赞同：21
> 
> 时间：2012-06-02T14:24:07.447
> 
> 标签：iis-7.5, freeze

每 18-24 小时一次，我的 IIS 在特定网站上停止响应。一周前我们升级了我们的网络应用程序，这似乎已经启动了。当它发生时：

1.  对 asp.net 应用程序的任何请求都将永远挂起
2.  重启应用程序池报错**0x80070425**（此时服务无法接受控制消息）
3.  我什至无法从计算机注销，注销挂起。唯一的办法就是重启机器
4.  有时它会被一些未处理的 ado.net 异常触发，有时则没有模式。
5.  检查 IIS 日志文件不会产生任何可识别的模式

机器是**windows server 2008 R2 Standard Edition**。我的应用程序使用**ASP.Net 4.0 经典模式运行**

找到的一些事件日志条目如下：

* * *

处理应用程序池的托管应用程序服务自动启动时出错：“MyApps”。如果管道模式设置为“经典”模式，则不支持加载应用程序服务提供者对象。因此，未完成托管应用程序服务的自动启动。要解决此问题，请将此应用程序池的管道模式更改为“集成”模式。数据字段包含错误代码。

* * *

为应用程序池“MyApps”服务的工作进程“1164”未能在分配的时间内停止协议“http”的侦听器通道。数据字段包含错误号。

* * *

应用程序池 OfficeClip 已被禁用。http 协议创建应用程序池的请求失败。重新启动应用程序池，以便 Windows 进程激活服务 (WAS) 可以确定协议的正确状态。数据字段包含错误号。

* * *

Windows 检测到您的注册表文件仍在被其他应用程序或服务使用。现在将卸载该文件。保存您的注册表文件的应用程序或服务之后可能无法正常运行。

详细信息 - 从 \Registry\User\S-1-5-21-3692684334-282388892-2276244761-500 泄露的 1 个用户注册表句柄：进程 900 (\Device\HarddiskVolume2\Windows\System32\svchost.exe) 已打开密钥 \REGISTRY \USER\S-1-5-21-3692684334-282388892-2276244761-500\Printers\DevModePerUser

* * *

万维网发布服务未能为站点“10”中的应用程序“/”设置应用程序池。数据字段包含错误号。

* * *

*关于如何找出除了重新安装操作系统之外的问题的任何想法？*

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-21T09:53:35.433

你可以试试以下

*   打开服务.msc
*   寻找凭证管理器
*   将启动类型设置为“自动”
*   （重新）启动凭据管理器服务

# jsf-2 - 如何将单个类注释为两个不同的托管 bean？

> ID：10863060
> 
> 赞同：0
> 
> 时间：2012-06-02T14:24:27.960
> 
> 标签：jsf-2

我创建了一个地址 bean，我想使用它两次——一次用于街道地址，一次用于邮寄地址。我可以按照下面的方法使用 faces config 来实现这一点，但我想知道我是否可以通过注释来做到这一点。

例如将@ManagedBean(name="StreetAddress") 和@ManagedBean(name="MailingAddress") 放在同一个类上？我觉得我在这里遗漏了一些明显的东西，但我不确定是什么。

```
<managed-bean>
    <managed-bean-name>MailingAddress</managed-bean-name>
    <managed-bean-class>com.leetb.jsf_ex1.model.AddressBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <map-entries/>
</managed-bean>
<managed-bean>
    <managed-bean-name>StreetAddress</managed-bean-name>
    <managed-bean-class>com.leetb.jsf_ex1.model.AddressBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <map-entries/>
</managed-bean>

public class AddressBean {

    private String line_one;
    private String line_two;
    private String suburb;
    private String state;
    private String postcode;

/* getters and setters snipped */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:37:44.970

你有一个设计错误。这些看起来更像模型类而不是支持 bean 类。模型类根本不应该是托管 bean。使它们成为支持 bean 类的属性并改为管理它。

例如

```
@ManagedBean
@ViewScoped
public class AddressBacking {

    private AddressBean mailingAddress;
    private AddressBean streetAddress;

    @PostConstruct
    public void init() {
        // Prepare them here yourself. For example, when it's for a new entry.
        mailingAddress = new AddressBean();
        streetAddress = new AddressBean();
    }

    public void save() {
        // ...
    }

    // ...
} 
```

*（顺便说一下，我会重命名`AddressBean`为`Address`）*

并按如下方式使用

```
<h:inputText value="#{addressBacking.mailingAddress.line_one}" />
...
<h:inputText value="#{addressBacking.streetAddress.line_one}" />
... 
```

# html - Play 框架作为游戏服务器

> ID：10863063
> 
> 赞同：5
> 
> 时间：2012-06-02T14:24:39.720
> 
> 标签：html, websocket, playframework-2.0

我想尝试使用 websockets 和 HTML-5 技术为 web 编写一个简单的游戏，我正在考虑使用 Play 框架和 Scala 来做这件事。然而，我想要制作的游戏类型是一个具有持久世界的游戏，事情会自行发生，而不仅仅是作为玩家行动的后果，这意味着它不符合 Play 的无状态哲学。我尝试在 Play 应用程序中启动一个单独的线程，它将充当具有运行世界的通常的持久游戏服务器，并且它似乎可以工作。你怎么能对此发表评论？

*   这种方法我会面临一些大问题吗？
*   有没有更好的解决方案和设置？除了独立（非http）游戏服务器之外，ppl 通常用于这些事情吗？
*   考虑到类似的问题，您能分享任何有趣的经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T23:04:22.170

不要将**持久性**与**“始终运行的线程更新信息”搞混**。

大多数情况下，此类游戏只是保存上次更新时间，并根据从现在到上次更新之间经过的时间计算新值。任何 Web 框架或技术都可以做到这一点。即使我是游戏框架的忠实粉丝/瘾君子，我也不认为坚持争论本身就足够了。

但如果你需要：

*   良好的 websockets 集成，
*   支持大流量，
*   没有海量服务器的海量并发

那么确实，Playframework 可能是您的选择。

# c# - 关于在 C# 中交换数组中的项目的考试练习

> ID：10863064
> 
> 赞同：0
> 
> 时间：2012-06-02T14:24:46.973
> 
> 标签：c#, arrays, swap

所以考试题是这样的：

> 使用下面的方法头编写一个方法。
> 
> ```
> public void Reverse( double [] values, int start, int finish){ 
> ```
> 
> 此方法将在较低索引位置和较高索引位置之间反转数组中的元素。
> 
> 所以给出以下数组声明
> 
> ```
> double [] data = {8.5, 12.0, 23.2, 18.0, 15.5, 5.0, 10.5}; 
> ```
> 
> 调用该方法`Reverse(data, 2, 5);`后，数据的内容将是
> 
> ```
> {8.5, 12.0, 5.0, 15.5, 18.0, 23.2, 10.5} 
> ```
> 
> 假设您已经编写了一个名为 swap 的方法，用于交换数组中的两个元素；由作为参数传递的两个索引值标识的元素：
> 
> ```
> Swap(array, oneIndex, otherIndex) 
> ```

我是这样回答的：

```
public void Reverse( double [] values, int start, int finish){  

do {
    Swap(values, int start, int finish);
    }
    start++;
    finish--;
}
while (start < finish) 
```

我认为我的答案不正确，但我想不出其他任何东西。`Swap()`方法已经完成了一切。任何人都可以纠正我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:33:43.817

Swap 接受 oneIndex 和 otherIndex，而不是开始和结束。
你错过的是开始和结束之间的循环，你必须用每个迭代的数字调用交换方法：

```
int iterationsNum = (finish - start) / 2 ;
for(int i=0;i<=iterationsNum;i++)
{
    if(start+i != finish-i)
    {
      swap(values, start+ i, finish-i);
    }
} 
```

可能有一种方法可以删除我检查索引是否相同的不需要的迭代，但这是基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:31:09.160

如果您将在函数内的括号上工作一点并从函数调用中删除整数，它将起作用。

```
public static void Swap(double[] values, int firstIndex, int secondIndex)
{
    double temp = values[start];
    values[start] = values[finish];
    values[finish] = temp;
}

public static void Reverse( double [] values, int start, int finish)
{
    do
    {
        Swap(values, start, finish);
        start++;
        finish--;
    }
    while (start < finish);
}

static void Main(string[] args)
{
    double[] data = { 8.5, 12.0, 23.2, 18.0, 15.5, 5.0, 10.5 };
    Reverse(data, 2, 5);
    foreach (double number in data)
        Console.Write(number.ToString() + ", ");
    Console.ReadKey();
} 
```

给出：

```
8.5, 12, 5, 15.5, 18, 23.2, 10.5, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T05:13:30.187

这里还有两个可能的答案：

```
 static void Reverse(int[] values, int start, int finish)
    {
        int end = finish;
        for (int i = start; i < end ; i++)
        {
            Swap(values, i, end);
            end--;
        }
    }

    static void Reverse2(int[] values, int start, int finish)
    {
        int upper = finish;
        int lower = start;

        while (upper > lower)
        {
            Swap(values, lower, upper);
            lower++;
            upper--;
        }
    } 
```

# asp.net - Asp.net 4.0 url 路由

> ID：10863065
> 
> 赞同：0
> 
> 时间：2012-06-02T14:25:06.197
> 
> 标签：asp.net

我正在使用 .Net 4.0 框架并进行一些 url 路由。这不是一个 MVC 项目，而是一个 webforms 项目。我在 Global.asax 中创建了两条路线，如下所示：

```
 routes.MapPageRoute(
           "review",      // Route name
           "documents/{type}",      // Route URL
           "~/default.aspx" // Web page to handle route
        );

        routes.MapPageRoute(
           "help",      // Route name
           "resource/help",      // Route URL
           "~/help.aspx" // Web page to handle route
        ); 
```

当我单击站点导航中的链接（例如“文档/待定”）时，它将转到正确的位置并显示预期的 URL。如果我再次点击“文档/接受”，网址将如下所示：

```
http://localhost/documents/documents/accepted 
```

也找不到该页面并呈现该页面。如果我单击帮助链接然后单击文档，也会发生同样的事情。网址将如下所示：

```
http://localhost/resource/documents/pending 
```

为什么路由连接url？我怎样才能解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:03:15.370

The problem's to do with how your URLs are being resolved. For ways to guarantee your URLs are always resolved correctly see [http://msdn.microsoft.com/en-us/library/dd329551.aspx](http://msdn.microsoft.com/en-us/library/dd329551.aspx).

Alternatively, I've written a Navigation project that will make your life much easier because it handles all URL building for you, [http://navigation.codeplex.com/](http://navigation.codeplex.com/) . If you're interested and want any help, just let me know.

# list - 模式匹配问题，在scala中实现SplitAt

> ID：10863067
> 
> 赞同：0
> 
> 时间：2012-06-02T14:25:18.800
> 
> 标签：list, scala, split, pattern-matching

我正在尝试使用模式匹配来实现 scala splitAt，这就是我想要做的：

```
def split[T](someIndex:Int,someList:List[T]):(List[T],List[T]) = {
     def splitHelper[T](currentIndex:Int,someList:List[T],headList:List[T]):(List[T],List[T])= {
     (currentIndex,someList) match {
        case (someIndex,x::tail) => (x::headList,tail)
        case (currentIndex,x::y) => splitHelper(currentIndex+1,y,x::headList)
        case _ => (headList,headList)
        }
     }
     splitHelper(0,someList,List[T]())
} 
```

编译器抱怨说：

```
<console>:15: error: unreachable code
 case (currentIndex,x::y) => splitHelper(currentIndex+1,y,x::headList) 
```

有人可以指出我在这里做错了什么以及为什么我会收到无法访问的代码错误。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:36:28.697

您应该在模式匹配中使用 `someIndex` 和 `currentIndex`（常量）。

```
scala> val a = 1
a: Int = 1

scala> 2 match {
     |   case a => println(a)
     | }
2

scala> 2 match {
     |   case `a` => println("a")
     |   case _ => println("Oops")
     | }
Oops 
```

[Scala 编程，第一版的第 15 章。Martin Odersky、Lex Spoon 和 Bill Venners 的“案例类和模式匹配”](http://www.artima.com/pins1ed/case-classes-and-pattern-matching.html)：

> 如果需要，您仍然可以使用小写名称作为模式常量，使用两种技巧之一。首先，如果常量是某个对象的字段，您可以在它前面加上一个限定符。例如，pi 是一个变量模式，但 this.pi 或 obj.pi 是常量，即使它们以小写字母开头。如果这不起作用（例如，因为 pi 是一个局部变量），您也可以将变量名称括在反引号中。

# php - 在表单提交时使用 jquery 发送帖子数据

> ID：10863074
> 
> 赞同：8
> 
> 时间：2012-06-02T14:26:08.017
> 
> 标签：php, javascript, jquery

如果我有这种将帖子数据提交到页面本身的表单：

```
<form method="post">
   <input type="text" name="name"/>
   <input type="submit"/>
</form> 
```

我将如何使用 JavaScript/jQuery 注入额外的 POST 数据。`$.post()`如果我只使用、`$.get()`或等任何函数通过 ajax 提交表单，这将更容易`$.ajax()`。但是我在这里要做的是不通过ajax提交表单。

附加数据在 JavaScript 中。我正在考虑将一个新的隐藏字段注入到 DOM 中，我将在其中传递数据以便它与表单一起提交，但是还有其他方法吗？

如果您需要更多代码/解释，请发表评论。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T14:35:50.207

与其使用提交按钮，不如使用常规按钮并通过 Javascript 控制提交。在您的 javascript 中，您需要序列化表单并将其作为数据与您想要的任何其他内容一起传递。

```
<script>

    $(document).ready(function() {

       var extra_data = "This is more stuff to send";

       $('#submit').click(function() {
          $.ajax({
             type: "POST",
             url: "form.php",
             data: {'form': $("#my_form").serialize(), 'other': extra_data},
             success: function(msg) {
                alert("Form Submitted: " + msg);
             }
          });

       });

    });

</script>

<form id="my_form" method="post">
  <input type="text" name="name" />
  <input type="button" id="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T07:19:00.917

```
<head>
    <script src="jquery/jquery-1.11.1.min.js"></script>
    <script>
    $(function () {
        $('#form_id').on('click','#submit', function(e){
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "get_Ajax.php",
                data: $('#form_id').serialize(),
                success: function(data) {
                    alert(data);
                }
            });
            return false;
        });
    });
    </script>
</head>
<form method="post" id="form_id">
<input type="text" name="ime">
<input type="button" id="submit" name="submit" value="Send">
</form> 
```

** get_ajax.php**

```
<?php
$ime = $_POST['ime'];

echo "Your name is $ime";
?> 
```

# c++ - 模板类中的成员函数指针给出错误：后跟'::'时必须是类或命名空间

> ID：10863075
> 
> 赞同：6
> 
> 时间：2012-06-02T14:26:11.170
> 
> 标签：c++, templates, compiler-errors

我正在尝试在 C++ 中声明一个模板函数指针。

```
template <class T>
class MyClass
{
public:
    typedef const unsigned char* (T::*MyTemplatedEvent)(unsigned long &myParameter);
}; 
```

但由于某种原因，我不断收到此错误：

> 'T': 必须是类或命名空间，后跟 '::'

有人能告诉我我做错了什么吗？
编译器应该知道 T 是一个类。它在 MyClass 声明上方这么说...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:08:27.760

使用`T::*MyTemplatedEvent`，您期望`T`成为类类型，因为只有类类型可以具有成员指针。这意味着如果你传递一个非类类型，比如`int`or `char*`，你会得到指示的错误，因为没有成员，相反，这些类型也没有成员指针。

> 编译器应该知道 T 是一个类。它在 MyClass 声明上方这么说...

错误的。`class T`与模板参数中的相同`typename T`，并且仅告诉编译器这是稍后作为模板参数传递的*任何*`T`类型的占位符。它不*将*类型限制为类类型。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:22:37.130

我猜这是因为我尝试创建模板的“MyClass”，它是编译器知道不能拥有的指针或原语以及与它们关联的函数指针......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T14:53:13.263

首先请注意，在 MyClass 的定义中，两种方式都将类声明为

```
template< class T > class MyClass 
```

和

```
template< typename T > class MyClass 
```

是等效的，您不会通过使用一个关键字而不是另一个关键字来为编译器提供更多信息。

除此之外，我想说编译器是对的， MyClass< int > 将无法工作，因为您不能在 C++ 中编写 int::something ，而例如 MyClass< std::string > 将工作得很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-02T14:32:06.007

尝试执行以下操作：

```
typedef T type;
typedef const unsigned char* (type::*MyTemplatedEvent)(unsigned long &myParameter); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-24T09:25:16.587

我不认为你可以在 C++ 中有一个模板函数指针，你可以检查这个链接 [C++，函数指针指向模板函数指针](https://stackoverflow.com/questions/4573941/c-function-pointer-to-the-template-function-pointer)

“typedef const unsigned char* (T::*MyTemplatedEvent)(unsigned long &myParameter);” 这里 T 是模板参数，不是任何命名空间或类类型，T 是一个数据类型，可以是用户定义的或基本数据类型，如 int 或 char，但它不是命名空间或类，所以这就是你得到编译错误的原因，这是正确的。**

# c# - 搜索列表并显示匹配值

> ID：10863079
> 
> 赞同：-2
> 
> 时间：2012-06-02T14:26:34.090
> 
> 标签：c#, .net, windows

我目前正在使用“.contains”方法来搜索列表并获取匹配值，例如

清单 1：

```
dog bark
cat meow
lion raw 
```

例如

```
if (List1.Contains("dog"))
{
// Return the value of this list item e.g. "dog bark"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:37:32.157

听起来像你想要的：

```
var match = list.FirstOrDefault(x => x.Contains("dog"));
if (match != null)
{
    Console.WriteLine(match);
} 
```

或显示所有匹配项：

```
foreach (var match in list.Where(x => x.Contains("dog"))
{
    Console.WriteLine(match);
} 
```

# android - 在 ActionBarSherlock 中使用自定义布局构建 ActionMode

> ID：10863080
> 
> 赞同：7
> 
> 时间：2012-06-02T14:26:34.943
> 
> 标签：android, actionbarsherlock

我刚开始使用 ActionBarSherlock 构建一些简单的应用程序，在我的第一个屏幕中，我有一个简单的列表，我添加了新的菜单项以将新项目添加到列表中：

```
MenuItem newItem = menu.add("New");
newItem.setIcon(R.drawable.ic_compose_inverse)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM); 
```

现在当用户选择添加一个新项目时，我想启动一个新的操作模式来添加新项目，这个操作模式应该包含一个带有文本框和一个按钮的简单布局，所以我创建了这个布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

        <EditText
            android:id="@+id/text"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:inputType="text" >
        </EditText>
        <Button
            android:id="@+id/addBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/add" />
</LinearLayout> 
```

所以现在我只需要在新的操作模式下将此布局设置为栏：

```
newItem.setOnMenuItemClickListener(new OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem item) {
                actionMode = startActionMode(new MyAction(ListEditor.this));
                return true;
            }
        }); 
```

在我的行动中：

```
private final class MyAction implements ActionMode.Callback {
    ...
    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        View customNav = LayoutInflater.from(context).inflate(R.layout.add_item, null);
        getSupportActionBar().setCustomView(customNav);
        getSupportActionBar().setDisplayShowCustomEnabled(true);
        return true;
    }
} 
```

**所以基本上我需要 Sherlock 示例中的 ActionModes 和 CustomNavigation 之间的一些东西，但问题是它将布局设置为主栏，而不是为打开操作的新栏。**

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T10:52:18.250

您可能想使用 ActionMode 类中名为 "setCustomView" 的方法。

所以是这样的：

```
newItem.setOnMenuItemClickListener(new OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            actionMode = startActionMode(new MyAction(ListEditor.this));
            actionMode.setCustomView(customNav);
            return true;
        }
    }); 
```

# c# - 将用户控件添加到 asp.net 页面

> ID：10863081
> 
> 赞同：2
> 
> 时间：2012-06-02T14:26:43.553
> 
> 标签：c#, asp.net, user-controls, asp-usercontrols

我用这样的事件创建了一个用户控件：

```
public partial class Person : System.Web.UI.UserControl
{
    public delegate void EditPersonHandler(object sender, EditPersonEventArgs e);
    public event EditPersonHandler EditPerson;
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

这是我的 EditPersonEventArgs ：

```
 public  class EditPersonEventArgs:EventArgs
{
    private int id;

    public int ID
    {
        get { return id; }
        set { id = value; }
    }
    public EditPersonEventArgs(int ID)
    {
        id = ID;
    }

} 
```

现在我想将此用户控件添加到我的页面，我这样做：

```
<%@ Register TagPrefix="UControl" TagName="UControlPerson" Src="~/SimpleUC/Person.ascx" %>

<div>
    <UControl:UControlPerson ID="UControlPerson" runat="server"
                             OnEditPerson="UControlPerson_EditPerson" />
</div> 
```

这是我处理的函数`OnSavePerson`：

```
protected void UControlPerson_EditPerson(object sender, EditPersonEventArgs e)
    {

    } 
```

我建立了解决方案。但是当我渲染页面时，我得到了这个错误：

```
Description: An error occurred during the compilation of a resource required to service this
request. Please review the following specific error details and modify your source code 
appropriately. 

Compiler Error Message: CS0426: The type name 'SimpleUC' does not exist in the type 
'System.Web.UI.UserControl' 
```

这是我的名字空间： `namespace UserControl.SimpleUC`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:35:58.087

你有一个命名空间冲突，`UserControl`你的用户控制命名空间的一部分`UserControl.SimpleUC`被解析为命名空间`System.Web.UI.UserControl`。

解决此问题的最简单方法是为您的控件选择另一个命名空间。可能类似的东西`UserControls.SimpleUC`

# ruby-on-rails - Omniauth：关闭浏览器后如何保持用户登录？

> ID：10863084
> 
> 赞同：1
> 
> 时间：2012-06-02T14:27:30.377
> 
> 标签：ruby-on-rails

我正在使用omniauth-github gem，我注意到用户保存在会话cookie中：

会话控制器：

```
def create
  user = User.from_omniauth(env["omniauth.auth"])
  session[:user_id] = user.id
  ...
end 
```

你知道在浏览器关闭后保持会话的简单方法吗？

我知道它可以通过与 Devise 的集成来实现：[https](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview) ://github.com/plataformatec/devise/wiki/OmniAuth:-Overview ...但我希望有一个更简单的解决方案。

谢谢

* * *

**解决方案：**

'token' 列被添加到 User 模型中，然后：

```
class User < ActiveRecord::Base
  before_save :generate_token
  def generate_token
    self.token = SecureRandom.urlsafe_base64
  end
end

class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env["omniauth.auth"])
    cookies.permanent[:token] = user.token
  end
end

class ApplicationController < ActionController::Base
  def current_user
    @current_user ||= User.find_by_token(cookies[:token]) if cookies[:token]
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:30:00.150

您必须使用 cookie。当浏览器关闭时会话结束。即使在那之后cookie仍然存在。

尝试这个：

```
 def create
      ...
      cookies[:user_id] = user.id
      ...
    end 
```

其实[这个答案](https://stackoverflow.com/a/9399146/1242778)就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T21:34:39.607

以下是它对我的工作方式：

```
def google_oauth2
  @user = User.from_google(google_params)

  if @user.persisted?
    @user.remember_me = true
    sign_in @user
    ........
  end
end 
```

[还有另一种方法可以做到](https://github.com/heartcombo/devise/wiki/Omniauthable,-sign-out-action-and-rememberable)

# c# - 从空的datagridview中获取值并将其插入数据库c#

> ID：10863090
> 
> 赞同：0
> 
> 时间：2012-06-02T14:27:57.667
> 
> 标签：c#, database, winforms, datagridview

我想将空 DataGridView 中的数据插入数据库（DataGridView 不会从数据库中加载，但我只取 DataGridView 中的值）。

我试过这段代码：

```
private void vButton12_Click(object sender, EventArgs e)
    {
        MySqlConnection conn = new MySqlConnection("server=localhost;User Id=root;database=sma9");
        DataTable dtable = new DataTable();
        MySqlDataAdapter adp = new MySqlDataAdapter("select * from tdetpinjam", conn);
        adp.Fill(dtable);            
        for (int i = 0; i < dtable.Rows.Count; i++)
        {
            MySqlDataAdapter adp1 = new MySqlDataAdapter("INSERT INTO tdetpinjam (nopinjam,kodebuku,jumlah,tglkembali,status) VALUES ('" + dtable.Rows[i][dtable.Columns.IndexOf("Column1")] + "','" + dtable.Rows[i][dtable.Columns.IndexOf("Column2")] + "','" + dtable.Rows[i][dtable.Columns.IndexOf("Column3")] + "','" + dtable.Rows[i][dtable.Columns.IndexOf("Column4")] + "','" + dtable.Rows[i][dtable.Columns.IndexOf("Column5")] + "')", conn);
            conn.Open();
            adp1.Fill(dtable);
            conn.Close();
        }
    } 
```

但我收到错误“找不到列-1”。

我的代码有什么问题？这样做的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:11:30.223

我猜其中一个返回-1：

```
dtable.Columns.IndexOf("ColumnX") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:50:05.573

您所做的是完全错误的，您的代码中没有与数据网格相关的代码，您只需从数据库表中获取数据并循环返回每一行并尝试再次将相同的数据插入到数据库中的同一张表中。在每个项目中，您尝试从数据库中填充同一张表。

当您获取给定列的索引时会发生实际错误，您需要在插入之前对其进行验证

```
 if(dtable.Columns.IndexOf("Column1") != -1 && 
    dtable.Columns.IndexOf("Column2") != -1 && 
    dtable.Columns.IndexOf("Column3") != -1 && 
    dtable.Columns.IndexOf("Column4") != -1 && 
    dtable.Columns.IndexOf("Column5") != -1)
    {
       // insert related code 
    } 
```

如果需要使用 MySqlDataAdapter 插入记录，首先设置 MySqlDataAdapter 的 select、update 和 insert 命令，那么可以调用 MySqlDataAdapter.Update 方法。

检查[此](http://www.codeproject.com/Articles/71346/Connecting-to-MySQL-Database-using-C-and-NET)以获取更多信息。

## 编辑

```
foreach (DataGridViewRow row in dataGrid.Rows)
{
         foreach (DataGridViewCell cell in row.Cells)
        {
            string value = cell.Value.ToString();

        }
 } 
```

# javascript - 为什么字符串“11”小于字符串“3”？

> ID：10863092
> 
> 赞同：26
> 
> 时间：2012-06-02T14:28:00.527
> 
> 标签：javascript, string, comparison

```
if ('11' < '3') alert('true'); 
```

很明显，它不是通过长度来比较它们，而是通过编码来比较它们。但是，我不明白它是如何工作的。我需要一些解释:-)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-02T14:30:15.760

字符串[按字典顺序](https://en.wikipedia.org/wiki/Lexicographical_order)进行比较。即逐个字符，直到它们不相等或没有任何字符可供比较。“11”的第一个字符小于“3”的第一个字符。

```
> '11' < '3'
true
> '31' < '3'
false
> '31' < '32'
true
> '31' < '30'
false 
```

如果我们使用字母，那么，因为`b`不小于`a`，`abc`不小于`aaa`，但是因为`c`小于`d`，`abc`所以小于`abd`。

```
> 'abc' < 'aaa'
false
> 'abc' < 'abd'
true 
```

您可以将字符串显式转换为数字：

```
> +'11' < '3'
false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T14:37:08.863

默认情况下，JavaScript 会根据每个字符的序数值比较两个字符串；很像`strcmp()`在 C 中的工作方式。

为了使您的比较工作，您可以将任一侧转换为一个数字，以告诉解释器您进行数字比较的意图：

```
Number('11') < '3' // false
+'11' < '3' // false, using + to coerce '11' to a numeric

'11' < Number('3') // false
'11' < +'3' // false 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T14:38:55.743

在许多编程语言中，字符串按[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)进行比较。你可以检查[字母顺序](http://en.wikipedia.org/wiki/Alphabetical_order#Alphabetical_order)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-02T14:30:57.717

它按每个字符进行比较，以下将是`false`：

```
if ('41' < '3') alert('true'); 
```

由于`4`不小于`3`。所以基本上你的比较归结为：

```
if ('1' < '3') alert('true'); // true 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-02T14:30:56.887

`'1' < '3'`并且因为第一个字符是“最重要的字符”（并不是说这个术语有任何意义）。将不再比较任何以下字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T14:40:18.083

它已被视为字符串比较。所以 1 < 3 （两个字符串的第一个字符）然后字符串 11 在字符串 3 之前

# algorithm - 快速选择和二分搜索选择之间的区别

> ID：10863093
> 
> 赞同：5
> 
> 时间：2012-06-02T14:28:03.007
> 
> 标签：algorithm, select, binary-search

我在理解一些更高级的排序、选择、搜索等算法方面取得了一些很好的突破。

然而，这是我坚持的场景。

对于要在其中查找第 k 个最小元素的值数组，如果未排序，则可以使用 quickselect，如果已排序，则可以使用二分查找。

如果我理解正确，通过枢轴/分区系统，快速选择将通过选择枢轴来搜索未排序的数据集，通过将每个元素与枢轴进行比较来创建低点和高点组，然后通过更改递归地将列表分解为子列表枢。

这听起来与二进制搜索的工作方式非常相似，那么为什么快速选择适用于未排序的值而二进制搜索却没有，并且不是快速选择算法中的所有比较（计算出低点和高点）都需要一个很多...成本？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T15:03:21.867

二分搜索不能确定第*k*个最小的元素：它不是选择算法。二进制搜索确定您作为输入提供的值是否在数组中。

选择算法确定第*k*个最小的元素。如果数组已经排序，就像二分查找一样，那么选择第*k*个最小的元素可以在*O(1)*中完成，只需使用*k*作为数组的索引。

回顾一下：使用快速选择，您可以确定例如数组中的第 8 个最小元素，而使用二分搜索，您可以搜索值 15 的元素是否在数组中。

*快速选择可以在预期的O(n)*时间内选择任意顺序统计；*二进制搜索可以在O(log n)*时间内搜索到一个元素，但需要对数组进行排序，否则算法将不正确。正如我告诉你的，选择排序数组中的第*k*个最小元素是微不足道的，需要*O(1)*时间来访问排序数组中的第*k*个元素。

最后，在数组未排序时搜索元素（给定值）在最坏的情况下需要*O(n)*时间，因为您需要对数组执行线性扫描。

# cocoa-touch - 在另一个对象的方法中实例化一个对象的正确 UML 表示法是什么？

> ID：10863097
> 
> 赞同：0
> 
> 时间：2012-06-02T14:28:24.270
> 
> 标签：cocoa-touch, uml

我在 Objective-C/CocoaTouch 中工作，并希望通过我的 AppDelegate 对象（在 applicationDidFinishLaunchingWithOptions: 方法内）来注释 UITabBarController 对象的实例化。

应用程序委托对象没有将 UITabBarController 存储为 ivar；它只是分配和初始化这个对象。该对象将在应用程序的整个生命周期中使用，作为根视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:56:10.350

创建一个从 开始到结束的`<<instantiate>>`依赖关系。[请参阅此处](http://www.uml-diagrams.org/dependency.html?cid=26)提供的示例`AppDelegate``UITabBarController`

# java - SwingUtilities.invokeLater 未按预期工作

> ID：10863098
> 
> 赞同：1
> 
> 时间：2012-06-02T14:28:25.800
> 
> 标签：java, swing, swingutilities, invokelater

我正在开发一个用 Java 编写的并发画布，这将使用户认为他们正在并行绘制画布。

为了实现用户感知的并行性，我让他们创建这些 Runnable 对象，我继续使用 SwingUtilities.invokeLater() 将这些对象放入 EventQueue。

为了测试它，我使用几个线程模拟了用户，并在每次调用 invokeLater() 之间添加了一点延迟（大约 50 毫秒），以便查看它是否真的看起来像并行发生的绘图。

问题是，虽然它可以很好地处理 invokeLater() 调用之间增加的延迟，但消除延迟会导致有时正确绘制绘图，有时会部分绘制并消失，而在其他时间则不绘制。

我很困惑可能出了什么问题，所以如果有人有任何想法，请告诉我。

以下是注释掉延迟的代码：

```
public void run(){
    //add tasks on to the event queue of the EDT 
    for(int i = 0; i<numLines; i++){
        DrawLineTask task = new DrawLineTask(g, x1, y1+i, x2, y2+i, lineColor);
        SwingUtilities.invokeLater(task);
//          try {
//    Thread.sleep(new Double(Math.random()*50).longValue());//random sleeping times to             make it appear more realistic
//          } catch (InterruptedException e) {
//              e.printStackTrace();
//          }
    } 
```

干杯

**编辑：**这是所要求的 DrawLineTask 的代码。它非常简单，因为它只是 Runnable 类的扩展，它使用标准 Java 函数在给定参数处绘制一条线。

```
public class DrawLineTask implements Runnable {
Graphics g;
int x1 = 0;
int y1 = 0;
int x2 = 0;
int y2 = 0;
Color color = Color.BLACK;

public DrawLineTask(Graphics g, int x1, int y1, int x2, int y2){
    this.g = g;
    this.x1 = x1;
    this.y1 = y1;
    this.x2 = x2;
    this.y2 = y2;
}

public DrawLineTask(Graphics g, int x1, int y1, int x2, int y2, Color color){
    this.g = g;
    this.x1 = x1;
    this.y1 = y1;
    this.x2 = x2;
    this.y2 = y2;
    this.color = color;
}

@Override
public void run() {
    g.setColor(color);
    g.drawLine(x1, y1, x2, y2);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T22:13:41.193

AFAIK，您不应该保留对 Graphics 对象的引用并在需要时在其上绘图。相反，您应该等待`paintComponent()`Swing 调用该方法，然后在此方法中进行绘图。

因此，您的任务应该只更改组件的状态，并请求异步或同步重绘（使用`repaint()`or `paintImmediately()`）。Swing 将`paintComponent()`使用 Graphics 对象调用该方法，您可以使用该对象根据组件的状态绘制适当的线条。

有关更多详细信息和说明，请参见[http://java.sun.com/products/jfc/tsc/articles/painting/](http://java.sun.com/products/jfc/tsc/articles/painting/)。

# css - 粘性页眉和页脚

> ID：10863102
> 
> 赞同：0
> 
> 时间：2012-06-02T14:29:12.973
> 
> 标签：css, css-float

我想在我的模板上有一个粘性页眉和页脚，这可以工作，但我有一个问题，即 id="page" 并不总是在页眉下滚动！

这是网站， http: [//zmgc.net/](http://zmgc.net/)

例如，我发现具有 position="relative" 的元素存在问题，例如选项卡和“Patricia signed...”框项。

```
.box ul.supports-list li.last {
   width: 200px;
   position: relative;
   float: left;
} 
```

如何修复 id="page" 以便其中的所有元素始终在页眉和页脚下滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:34:10.287

像这样为标头设置 z-index：

```
#hd{
z-index: 10000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:54:12.937

用于`position:fixed`#header 和#footer，以及`overflow:hidden/auto`用于body/#page。

在我的示例中，您只需要页眉和页脚的固定高度

[jsFiddle](http://jsfiddle.net/samsamX/uNVd8/)

```
body{
  margin:0;
  padding:30px 0 40px 0;
  overflow:hidden;
 }
#header{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:40px;
  background: red;
}
#footer{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:60px;
  background: blue;
}
#page{
  overflow:auto;
  height:100%;
  background: green;
} ​ 
```

# asp.net - 如何在现有的 MasterPage 中创建 Master Page

> ID：10863104
> 
> 赞同：-1
> 
> 时间：2012-06-02T14:29:20.360
> 
> 标签：asp.net, nested, master-pages

该软件包含一个功能母版页，在这些母版页下有许多 ASPX 文件，我想在现有母版页之上添加另一个主母版页，有人帮我怎么做吗？当我尝试通过选择 Previous Masterpage 并运行来添加 Masterpage 时，它​​会生成与内容占位符相关的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:37:35.223

它们被称为“嵌套母版页”，这是一个官方演练，但您可以在谷歌上搜索更多类似的术语：http: [//msdn.microsoft.com/en-us/library/bb547109.aspx](http://msdn.microsoft.com/en-us/library/bb547109.aspx)

# xml - Eclipse：跳转到 XML 元素的匹配标记的快捷方式

> ID：10863107
> 
> 赞同：17
> 
> 时间：2012-06-02T14:29:35.867
> 
> 标签：xml, eclipse, keyboard-shortcuts

我尝试使用 CTRL + SHIFT + P，这适用于代码中的括号，但不适用于 XML（尝试了不同的位置，在开始标记之前，之后等）。

有 CTRL + SHIFT + 向下/向上箭头可以转到下一个/上一个元素，这有助于大多数情况，但我还需要跳转到匹配的标签。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-04T06:01:52.543

@aleroot 是正确的。如果您使用的是 WTP XML 编辑器。您可以在 Navigate -> Go to -> Matching tag 中看到此选项。只是一个提示，对于快捷键的完整列表，您可以使用 Control + Shift + L

![匹配标签](../Images/7cfa619f2260c4a32de187947fd91e05.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-02T17:07:46.837

1.  将光标定位在您感兴趣的开始/结束标签上。它可以在标签中的任何位置。
2.  按`Ctrl`+ `Shift`+ `>`。Eclipse 会将您带到匹配的开始/结束标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T09:48:27.860

`Ctrl`++`Shift`现在`p`正在工作。不记得了，也许我重新安装了 Eclipse 或进行了更新。它现在正在工作。

# javascript - 在 javascript 对象原型中找不到数组长度属性

> ID：10863112
> 
> 赞同：0
> 
> 时间：2012-06-02T14:30:02.297
> 
> 标签：javascript

我正在尝试创建一个简单的 javascript/html5 画布引擎来支持我的动画（这主要用于学习目的。）

引擎：

```
/* BOF GLOBAL REFERENCES*/
var BM = BM || {};
/* EOF GLOBAL REFERENCES */

/* BOF GLOBAL VARIABLES */
/* EOF GLOBAL VARIABLES */

/* BOF FUNCTIONS */
BM.World = function(container,width,height,name){
    this.container = $("#"+container);
    this.width = width;
    this.height = height;
    this.name = name || "DefaultWorld";

    this.layers = new Array();
}

BM.World.prototype.Layer = function(options){
        var options = options || {};
        options.bgcolor = options.bgcolor || "transparent";
        this.container.html( "<canvas id='"+this.name+"_layer_"+this.layers.length+"' style='position:absolute;top:0;left:0;width:"+this.width+";height:"+this.height+";background:"+options.bgcolor+";'>"
                            +"</canvas>");
}
/* EOF FUNCTIONS */ 
```

以及简单的调用者代码：

```
$(function(){
    var World = new BM.World("background_container",400,600);
    var layer1 = new World.Layer({bgcolor:"#ff0000"});
}); 
```

有人可以告诉我我在`Layer`定义中做错了什么吗？我得到的错误是：`Uncaught TypeError: Cannot read property 'length' of undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:33:00.850

当您`World.Layer`使用关键字调用函数时，`new`inside指的是继承自的空对象，而不是继承自的空对象。`World.Layer``this``World.Layer.prototype``World`

一个解决方案可能是定义一个函数，该函数`BM.World.prototype.getLayer`负责将必要的数据从`BM.World`实例传递到`BM.World.prototype.Layer`构造函数。

# certificate - 如何设置多个团队管理员为 TestFlightApp 进行临时分发构建？

> ID：10863116
> 
> 赞同：0
> 
> 时间：2012-06-02T14:30:19.713
> 
> 标签：certificate, ios-provisioning, provisioning-profile, ad-hoc-distribution, testflight

我正在使用 TestFlightApp 将我的应用程序的测试临时构建分发给我的整个团队，我有三个团队管理员需要能够建立新的构建来测试飞行应用程序。不幸的是，Apple 只允许一个团队管理员进行分发构建，所以我的两个团队成员不能构建新的构建——这非常不方便。

如何为团队设置我的分发证书，以便多个团队管理员可以成功设置一个有效的签名系统来生成临时分发版本，然后可以将其提交给 TestFlightApp？

到目前为止，我唯一的想法是共享私人团队密钥，但我还没有成功地让它工作，我还没有找到任何分步说明来帮助我。我所发现的只是 Apple 文档中提到这可能是可能的： [分发应用程序](http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW2)

[配置开发和分发资产](http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW2)的这句话是我迄今为止发现的最有用的东西，但并没有真正谈论如何设置多个管理员：

> > 保护和转移您的签名和供应资产
> 
> 您的签名和配置资产是您用来在开发设备上运行 iOS 应用程序的私钥、证书和配置文件。如果您需要使用包含开发人员资产的 Mac 以外的 Mac 来开发 iOS 应用程序，则必须将资产转移到另一台 Mac。您可以在管理器中执行此操作，方法是从一台 Mac[导出您的签名和配置](http://developer.apple.com/library/ios/recipes/xcode_help-devices_organizer/articles/export_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH8)资产，然后将它们导入另一台 Mac

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:55:00.003

我找到的最佳答案是我已经想出的答案，请使用这些 XCode Organizer 说明：

[将代码签名资产导出到文件系统](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/export_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH8)

创建一个包含相关设置信息的文件。我将文件发送给其他管理员，然后他们使用以下说明将设置导入 XCode Organizer：

[从文件系统导入代码签名资产](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/import_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH9-SW1)

所以每个人都在为同一个团队分发证书使用相同的私有签名密钥。这适用于临时构建，我怀疑它也适用于应用商店构建，尽管我还没有尝试过。

# java - 在客户端-服务器-环境中为用户类建模的最佳实践

> ID：10863117
> 
> 赞同：0
> 
> 时间：2012-06-02T14:30:22.293
> 
> 标签：java, model, client-server, modeling

我们正在为大学图书馆开发客户端和服务器应用程序。除了所有图书管理和借阅功能外，应用程序还必须能够管理用户。

我们决定了**3 种不同的用户类型**：

1.  **客人**（可查看基本信息）
2.  **登录用户**（访问基本功能，如借书）
3.  **管理员**（完全访问权限，包括管理书籍和用户）

这是我的第一个*更大的*项目，尽管我阅读了许多 Java 讲座，但我无法决定在**客户端*对**以下需求建模的好方法：

*   客户端应用程序必须管理当前登录。当前用户可能会更改他们的基本信息。
*   管理员可以更改所有信息

现在我的问题：每个 User 类都应该有 getter 和 setter，即使当前用户可能只是访客？如果调用 setXY() 而没有更改信息的权限，会发生什么情况？授权应该在代码中的什么地方发生？用户等级？服务器 API 类？

像这样的现有模型的示例或链接将非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:32:22.910

一种方法是使用继承，即基本抽象用户类和 AnonymousUser、GuestUser 和 AdminUser。每个类都扩展了其父类的能力。这适用于简单的场景，但它不灵活，并且之后特别难以扩展。

更好的解决方案是创建一个实现所有必需功能的 User 类（在前面的示例中为 AdminClass），并将其包装在一个代理中，该代理知道不同的用户角色并可能限制对单个方法的访问。

这些检查应始终在服务器上进行，因为您无法阻止来自恶意客户端的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:43:55.040

只是好奇-这是家庭作业吗？你不是说你正在为一所真正的大学创建一个真正的系统，它将在生产中运行，对吗？

我认为您需要基于角色的安全解决方案，而不是类层次结构。我建议不要自己滚动并使用 Spring Security 之类的东西。

我要补充一点，你也应该使用 Spring。它将使该应用程序变得更好。

# android - 在共享首选项中保存文本大小

> ID：10863119
> 
> 赞同：1
> 
> 时间：2012-06-02T14:30:43.620
> 
> 标签：android, text-size

我正在尝试将文本大小保存在共享首选项中，在运行项目时我的应用程序意外停止这里是代码：
**SharedPreferenceActivity.class**

```
package com.SharedPreference;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.SeekBar;

public class SharedPreferenceActivity extends Activity 

{

SeekBar seek=(SeekBar)findViewById(R.id.seekBar1);
EditText ed1=(EditText)findViewById(R.id.editText1);
Button b=(Button)findViewById(R.id.button1);
private final String TEXT_VALUE_KEY="textvalue";
private final String FONT_SIZE_KEY="fontsize";
final String MyPref="preference";

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState)
 {

super.onCreate(savedInstanceState);
setContentView(R.layout.main);  
b.setOnClickListener(new View.OnClickListener() {

 @Override
 public void onClick(View arg0) {

SharedPreferences  pref=getSharedPreferences(MyPref,MODE_PRIVATE);              
SharedPreferences.Editor editor=pref.edit();            
editor.putFloat(FONT_SIZE_KEY,ed1.getTextSize());           
editor.putString(TEXT_VALUE_KEY, ed1.getText().toString());         
editor.commit();

}

});

 SharedPreferences prefs=getSharedPreferences(MyPref, MODE_PRIVATE);

 final float fontsize=prefs.getFloat(FONT_SIZE_KEY, 12);

 seek.setProgress((int) fontsize);

 ed1.setText(prefs.getString(TEXT_VALUE_KEY, "")); 

 ed1.setTextSize(seek.getProgress());

 seek.setOnSeekBarChangeListener(new  SeekBar.OnSeekBarChangeListener() {

public void onStopTrackingTouch(SeekBar arg0) {

// TODO Auto-generated method stub

            }

            public void onStartTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub

            }

            public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
                // TODO Auto-generated method stub
                ed1.setTextSize(fontsize);
            }
        });
    }
} 
```

* * *

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"

 android:layout_width="fill_parent"

 android:layout_height="fill_parent"

 android:orientation="vertical" >

<TableRow >

  <SeekBar

     android:id="@+id/seekBar1"

   android:layout_width="match_parent"

   android:layout_height="wrap_content" />

</TableRow>

<TableRow >

<EditText

   android:id="@+id/editText1"

  android:layout_width="match_parent"

  android:layout_height="150dp"

  android:layout_weight="0.6"

  android:ems="10" ></EditText>

</TableRow>

<TableRow >

 <Button

 android:id="@+id/button1"

  android:layout_width="50dp"

 android:layout_height="50dp"

 android:text="Button" />

</TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:36:05.480

`onCreate`在您的方法中找到视图。

```
public void onCreate(Bundle savedInstanceState)
{
 super.onCreate(savedInstanceState);

 setContentView(R.layout.main);
 seek=(SeekBar)findViewById(R.id.seekBar1);
 ed1=(EditText)findViewById(R.id.editText1);
 b=(Button)findViewById(R.id.button1);
 ...
 ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:35:06.903

ed1 未在 Oncreatre 中使用 findviewbyId 进行初始化.....

因为只有在 onCreate 中设置了内容视图时才能获得 ed1

b、ed1、seekbar 都应该在这行“setContentView(R.layout.main);”之后初始化 在 Oncreatre 中使用 findviewbyId .....

# c++ - 每 t 毫秒在 C++ 代码的执行中执行测量

> ID：10863121
> 
> 赞同：0
> 
> 时间：2012-06-02T14:30:50.023
> 
> 标签：c++, c

给定一个while循环和函数排序如下：

```
int k=0;
int total=100;
while(k<total){
   doSomething();
   if(approx. t milliseconds elapsed) { measure(); }
   ++k;
} 
```

我想每 t 毫秒执行一次“测量”。但是，由于“doSomething”可能接近上次执行后的第 t 毫秒，因此可以在距上次测量大约 t 毫秒后执行测量。我的问题是：如何做到这一点？

一种解决方案是将计时器设置为零，并在每次“doSomething”之后对其进行测量。在可以接受的范围内的时候，进行对策，重新设定。但是，我不是我应该为这样的任务使用哪个 c++ 函数。正如我所看到的，有某些功能，但是关于哪个最合适的争论超出了我的理解。请注意，某些函数实际上考虑了其他一些进程所花费的时间，但我希望我的计时器仅测量我的 c++ 代码的执行时间（我希望这很清楚）。另一件事是测量的分辨率，如下所述。假设那些建议的中等选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:35:13.017

高分辨率时序是特定于平台的，您没有在问题中指定。标准库 clock() 函数返回一个以 CLOCKS_PER_SEC 每秒递增的计数。在某些平台上，这可能足够快，可以为您提供所需的分辨率，但您应该检查系统的滴答率，因为它是实现定义的。但是，如果您发现它足够高，那么：

```
#define SAMPLE_PERIOD_MS 100
#define SAMPLE_PERIOD_TICKS ((CLOCKS_PER_SEC * SAMPLE_PERIOD_MS) / 1000)

int k=0;
int total=100;
clock_t measure_time = clock() + SAMPLE_PERIOD_TICKS  ;
while(k<total)
{
   doSomething();
   if( clock() - measure_time > 0 )
   { 
        measure(); 
        measure_time += SAMPLE_PERIOD_TICKS ;
        ++k;
   }
} 
```

如有必要，您可以将 clock() 替换为其他一些高分辨率时钟源。

但是请注意几个问题。这种方法是“忙循环”；除非 doSomething() 或 measure() 产生 CPU，否则该进程将占用所有可能的 CPU 周期。如果这是在目标上运行的唯一代码，那可能无关紧要。另一方面，这是在非实时的通用操作系统（例如 Windows 或 Linux）上运行的，该进程可能会被其他进程抢占，这可能会影响采样周期的准确性。如果您需要准确计时使用 RTOS 并在单独的线程中执行 doSomething() 和 measure() 会更好。即使在 GPOS 中也会更好。例如，一般模式（在没有任何规范的情况下使用虚构的 API）将是：

```
int main()
{
    StartThread( measure_thread, HIGH_PRIORITY ) ;
    for(;;)
    {
        doSomething() ;
    }
}

void measure_thread()
{
    for(;;)
    {
        measure() ;
        sleep( SAMPLE_PERIOD_MS ) ;
    }
} 
```

只有在运行时间可以忽略不计的情况下，代码`measure_thread()`才是准确的。`measure()`如果需要花费大量时间，您可能需要考虑这一点。如果它是不确定的，您甚至可能必须测量它的执行时间才能减去它的睡眠时间。

# java - 如何在 Jasper 报告中动态显示列？

> ID：10863124
> 
> 赞同：5
> 
> 时间：2012-06-02T14:30:59.240
> 
> 标签：java, jasper-reports, conditional-statements

我正在生成一个 Jasper 报告，它有 5 个固定列。客户要求能够在运行时选择列数。

例如，如果他从显示的 JTable 中检查 2 列，那么 Jasper 报告中应该有 2 列，如果他检查 4，那么 jasper 报告中应该有 4 列。为了解决这个问题，我正在考虑在碧玉报告中添加条件。如果客户选择 A 列，BI 会将其设置为报表中的参数，并使用它来确定是否显示该列。

为了做到这些，我需要在 Jasper XML 中使用条件。我应该在哪里设置报告中的条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:57:35.047

您可以尝试以下方法

1.  创建一个`HashMap`并在其中设置所需的属性

    > ```
    > Map params = new HashMap();
    > params.put("DISPLAY_COLUMN_ONE", "Y") 
    > ```

2.  在方法中将此`params`映射传递给 Jasper

    `JasperFillManager.fillReport`

3.  在您的 JRXML 中，创建与上面哈希图中的每个属性集对应的参数：

    `<parameter name="DISPLAY_COLUMN_ONE" class="java.lang.String"/>`

4.  根据参数值显示列

    `<printWhenExpression><![CDATA[$P{DISPLAY_COLUMN_ONE}.equals("Y")]]></printWhenExpression>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:06:10.447

您应该将**columnCount**参数传递给 jasper 并在 Expression 时检查每列的 **Print**中的条件。

**当表达式为时，**第一列打印

```
$P{columnCount} >=1 
```

**当表达式为时，**第二列打印

```
$P{columnCount} >=2 
```

表达式为时的第三列**打印**

```
$P{columnCount} >=3 
```

第四列**Print when Expression** is

```
$P{columnCount} >=4 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:20:16.337

我只会制作您的碧玉报告的多份副本，每个列数的变化各一份。这可能有很多冗余，但只要可能的变化数量不太高，它就很容易。您最终调用的报告取决于用户的选择。

我想不出任何方法可以根据条件改变报告中的列。

# c++ - Dynamically changing the template parameters of a class

> ID：10863126
> 
> 赞同：1
> 
> 时间：2012-06-02T14:31:02.187
> 
> 标签：c++, templates

Is it possible to make it ?

For instance, consider the following code snippet:

```
#include <iostream>
using namespace std;

template <typename T> class A {
public:
  void print() {
    T var;
    cout << sizeof(var) << endl;
  }
};

int main() {
  A<int>* c = new A<int>;
  c->print();

  A<char>* d = reinterpret_cast<A<char>*>(c);
  d->print();
} 
```

Is there a "danger" with this kind of pratice ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:34:15.010

Yes, this would invoke undefined behaviour. `A<char>` and `A<int>` are entirely unrelated types. So it's no different to reinterpret-casting as a `B`.

In practice, it will probably work (at least for something this simple). But that doesn't mean that you can rely on it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:36:06.007

> Is there a "danger" with this kind of pratice ?

This is an **undefined behavior**, as you are converting a pointer to a different type and then calling a function.
Remember that `A<int>` and `A<char>` are different types; don't get confused from the same name `A`.

[Here](http://www2.research.att.com/~bs/bs_faq2.html#conversion) is a good related article from Bjarne Stroustrup's web page.

# javascript - 如何使用 JavaScript 进行这个简单的计算？

> ID：10863127
> 
> 赞同：-1
> 
> 时间：2012-06-02T14:31:09.313
> 
> 标签：javascript, html

如何使用 JavaScript 进行这个简单的计算？因为我是初学者。

我想计算同一输入字段中的值。

例如，在输入字段中，我输入诸如“3+4*2”之类的值，然后单击按钮，**相同的输入字段**将显示类似“11”的结果。

这是我的代码，但不起作用。

我的输入类型 =“文本”和 id =“expr”

我的按钮类型 = “按钮”，值 = “计算”，onclick = “getAnswer();”

这是我的 JavaScript 代码。

```
function getAnswer(){

    val = eval(document.expr.value);
    document.expr.value = val; 

} 
```

但我不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:35:02.610

`document.expr`很可能不存在。

给您的输入标签一个 id 并使用`document.getElementById('blah')`，或者`document.forms.FORMNAME.expr`如果该字段在表单内，则使用。

演示：http: [//jsfiddle.net/ThiefMaster/kRdJH/](http://jsfiddle.net/ThiefMaster/kRdJH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:36:30.597

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
    function calc(){
        //eval('var result = '+document.getElementById('expr').value +';');
        // EDIT:
        var result = eval(document.getElementById('expr').value);
        alert(result);
    }
    </script>
</head>
<body>
<input type="text" id="expr" />
<input type="button" value="click" onclick="calc();" />
</body>
</html> 
```

# javascript - `Uncaught SyntaxError: Unexpected token )` 根据 Chrome 的控制台

> ID：10863129
> 
> 赞同：1
> 
> 时间：2012-06-02T14:31:28.800
> 
> 标签：javascript, jquery, syntax, syntax-error

![](../Images/fd6b2f742bdf4fce4006c66b0d92222e.png)

这个右括号怎么*出乎意料*？

```
function pollCreateOptions_addOption ()
{ // Opening of curly bracket 1
    var highestN = 0;

    $('table#options tr td fieldset').each
    ( // Opening of normal bracket 1
        function (i, option)
        { // Opening of curly bracket 2
            alert (this.attr ('name'));
        { // Closing of curly bracket 2
    ); // Closing of normal bracket 1
} // Closing of curly bracket 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:32:43.730

```
$('table#options tr td fieldset').each
    ( 
        function (i, option)
        { 
            alert (this.attr ('name'));

        } // not {
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:32:57.083

你应该在这里使用关闭`}`而不是打开`{`：`{ // Closing of curly bracket 2`

```
function pollCreateOptions_addOption ()
{ // Opening of curly bracket 1
    var highestN = 0;

    $('table#options tr td fieldset').each
    ( // Opening of normal bracket 1
        function (i, option)
        { // Opening of curly bracket 2
            alert (this.attr ('name'));
        } // Closing of curly bracket 2
    ); // Closing of normal bracket 1
} // Closing of curly bracket 1 
```

# c++ - MPI_REDUCE 一个动态计算的数组

> ID：10863130
> 
> 赞同：1
> 
> 时间：2012-06-02T14:31:41.533
> 
> 标签：c++, c, parallel-processing, mpi, reduce

我正在尝试在 C（或 C++）中使用 MPI_REDUCE 来查找数组中的最小值（和索引）。我有这个适用于常规数组，但现在我想切换到一个动态计算值的数组。即 arr[n] 的值是通过调用 fun(n) 来计算的。由于内存问题，我无法计算所有值并将它们放入常规数组中。

我怎样才能做到这一点？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:01:39.030

您需要使用[MPI_Op_create()](http://www.mpi-forum.org/docs/mpi-11-html/node80.html)创建自定义 MPI 操作：在您的情况下，此操作将比较通过对数组的每个元素调用 fun() 获得的值，并选择最小值。然后，您可以在 MPI_Reduce() 的 Op 参数中使用此自定义操作。

# python - 使用 PyQT/PySide 的类似 Metro 的全屏浏览器

> ID：10863131
> 
> 赞同：3
> 
> 时间：2012-06-02T14:31:42.070
> 
> 标签：python, pyqt, pyside

我已经看到允许使用 PyQT 或 PySide 和 QtWebKit 来启动全屏浏览器的示例代码。我不熟悉 Qt 的工作原理。是否可以创建一个模拟 Windows 8 Metro-like UI 的网络浏览器？

我正在研究以下功能：

*   右键单击任意位置会弹出一个滑动面板
*   热键组合显示透明滑动面板

这可能吗？

除此之外，是否有一个示例 PySide 代码可以创建一个带有相应工具栏、url 栏、菜单等的网络浏览器......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T14:50:56.180

是的，这似乎是可能的。

要让您的应用程序全屏显示：

```
mainwindow.setWindowFlags(QtCore.Qt.FramelessWindowHint)
mainwindow.showFullScreen() 
```

设置热键和鼠标事件处理绝对是可能的，网上有很多教程（[鼠标事件处理示例](http://www.rkblog.rk.edu.pl/w/p/pyqt-events/)）。

对于类似 Metro 的外观，您可以使用 CSS 设置小部件的样式，[示例在这里](http://doc.qt.nokia.com/4.6/stylesheet-examples.html)。

# haskell - 在 haskell 中组合 floor 和 sqrt

> ID：10863132
> 
> 赞同：6
> 
> 时间：2012-06-02T14:32:04.703
> 
> 标签：haskell, sqrt, floor

我只是在学习haskell（我自己，为了好玩）而且我碰壁了。

我的问题：

如何定义函数

```
flrt = (floor . sqrt) 
```

当我在文件中尝试并编译时，GCHi 抱怨以下内容：

```
AKS.hs:11:9:
    No instance for (RealFrac Integer)
      arising from a use of `floor'
    Possible fix: add an instance declaration for (RealFrac Integer)
    In the first argument of `(.)', namely `floor'
    In the expression: (floor . sqrt)
    In an equation for `flrt': flrt = (floor . sqrt)

AKS.hs:11:17:
    No instance for (Floating Integer)
      arising from a use of `sqrt'
    Possible fix: add an instance declaration for (Floating Integer)
    In the second argument of `(.)', namely `sqrt'
    In the expression: (floor . sqrt)
    In an equation for `flrt': flrt = (floor . sqrt) 
```

我不明白为什么生成的函数不仅仅是 Int -> Int。

我刚刚完成了 CS 的第二年并完成了基础 PL 课程。我听说过，但还不太了解类型。我尝试阅读了一些 haskell 教程，但这一切都超出了我的想象。

PS - 我也不明白什么是单子。（我的搜索出现的许多其他问题都谈到了这些）

PPS - 我的完整来源

```
bar = \a b -> if (2^a) > b
                then (a-1)
                else bar (a+1) b
foo = bar 1

flrt :: Integer -> Integer
flrt = (floor . sqrt)

aks target = if (target < 2)
                then putStr "Not a Prime.\n\n"
                else if elem (mod target 10) [0,2,4,5,6,8]
                        then putStr "Composite\n\n"
                        else if (elem target) [a^b | a <- [3,5..(flrt target)], b <- [1.. (foo target)]]

                                then putStr "Composite\n\n"--}
                            else 
                            putStr "filler" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T15:15:00.110

问题是您试图`Integer`用作输入。Haskell 是强类型的，这意味着没有任何类型的隐式强制或转换。查看您尝试编写的函数的签名：

```
sqrt  :: Floating a => a -> a
floor :: (RealFrac a, Integral b) => a -> b 
```

在 GHC 推断的函数签名处：

```
> :t floor . sqrt
floor . sqrt :: (RealFrac b, Integral c, Floating b) => b -> c 
```

因此，要拥有一个从`Integer`（没有`Floating`实例）到的函数`Integer`，您必须首先将您的参数转换为`Floating`，这可以通过使用来完成`fromIntegral`：

```
> :t floor . sqrt . fromIntegral
floor . sqrt . fromIntegral :: (Integral a, Integral c) => a -> c 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T20:11:35.240

正如 copumpkin 所说，在此处转换为浮点实际上可能不是一个好主意，因为这会导致精度损失，因此即使进行舍入，对于足够大的整数输入也可能会产生不正确的结果。

我假设您正在处理的所有数字至少足够小，以至于它们有*一些*浮点表示，例如，所有数字都 < 10 ^(300)。但是，例如

```
Prelude> round(sqrt.fromInteger$10^60 :: Double) ^ 2
1000000000000000039769249677312000395398304974095154031886336
Prelude>  {-   and not   -}     10^60    {-  == (10^30)^2 == (sqrt$10^60) ^ 2  -}
1000000000000000000000000000000000000000000000000000000000000 
```

就绝对差异而言，这是*遥不可及的。**相*对于数字本身，它肯定是一个相当好的近似值，因此您可以将其用作算法快速确定的起点，以找到准确的结果。您可以使用 s 实现 Newton/Raphson（在本例中为 AKA Heron）`Integer`：

```
flrt :: Integer -> Integer  -- flrt x ≈ √x,  with  flrt x^2 ≤ x < flrt(x+1)^2
flrt x = approx (round . (sqrt::Double->Double) . fromInteger $ x)
   where approx r
            | ctrl <= x, (r+1)^2 > x  = r
            | otherwise               = approx $ r - diff
          where ctrl = r^2
                diff = (ctrl - x) // (2*r)    -- ∂/∂x x² = 2x

         a//b = a`div`b + if (a>0)==(b>0) then 1 else 0   -- always away from 0 
```

这现在可以按需要工作：

```
*IntegerSqrt> (flrt $ 10^60) ^ 2
1000000000000000000000000000000000000000000000000000000000000 
```

在 Newton-Raphson 校正中总是远离 0 的除法在这里是必要的，以防止陷入无限递归。

# c# - asp.net 弹出确认窗口

> ID：10863141
> 
> 赞同：1
> 
> 时间：2012-06-02T14:33:13.327
> 
> 标签：c#, asp.net, button, popup

我需要在删除按钮上添加一个“你确定”弹出窗口，我不确定如何获取用户是单击确定还是取消。

这是我的做法：

```
string message = "Are you sure you want to delete this user?";
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            sb.Append("return confirm('");
            sb.Append(message);
            sb.Append("');");
            Type type = this.GetType();
            ClientScript.RegisterOnSubmitStatement(type, "alert", sb.ToString()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T15:45:12.697

您可以将按钮上的 OnClientClick 设置为：

```
return confirm("Are you sure you want to delete this user?"); 
```

如果用户不点击确定，那么提交/回发将不会发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:59:36.180

最简单的方法是将其添加到您的`<input type="button|submit|reset" />`或`<button />`html 标记中（取消时不提交）：`OnClick="if(!confirm('Are you sure?')) return false;"`

将事件重命名为`OnClientClick`for `<asp:Button />`- 它与`CausesValidation="True"`and/or兼容`UseSubmitBehavior="False"`，因为它在 html 标记中添加到它们**之前。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T15:08:22.650

如果您使用的是 ajax 控制工具包，只需使用 confirmextender

如果你想知道用户点击了哪个按钮试试这个

在您的网络表单中添加隐藏字段

并在用户单击确定时使用它来设置他的值

```
 sb.Append("if (confirm(").Append(msg).Append("))")
                .Append("document.getElementById('")
                .Append(confirmResult.ClientID)
                .Append("').value = 'ok';"); 
```

在您后面的代码中读取 confirmResult 的值以了解用户是否单击了确定或取消

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:46:48.590

我同意上述答案，但如果您不想混合服务器和客户端代码/事件，那么我建议您使用 AjaxToolKit 确认按钮[http://bit.ly/NtmpOT](http://bit.ly/NtmpOT)

# jquery - 重用计算输入字段中字符的函数

> ID：10863142
> 
> 赞同：0
> 
> 时间：2012-06-02T14:33:17.163
> 
> 标签：jquery, forms, input, keypress

在我的应用程序中，我有很多要验证的表单。例如，当您输入图像的标题时，您可以输入 10 个字符，剩余的字符数会显示在字段旁边。

这些函数工作正常，但是我想将它用于许多不同形式的输入字段，这些字段具有不同的类和/或 id。下面是功能（我正在使用一个带有 keyup 的功能，如果您按退格键，它会更新剩余的字符数，因为这似乎不适用于按键操作）。

那么，如何将这些函数重用于具有不同类（或 id）名称的输入字段？

```
 $('.imageTitle').keypress(function(e) {
        var value = $(this).val(),
            valueLength = value.length;
            set = 15,
            remain = parseInt(set - valueLength);

        if (remain <= 0 && e.which !== 0 && e.charCode !== 0) {
            $('.imageTitle').val((value).substring(0, valueLength - 1));
        }

        $('#titleCharsLeft').html('&nbsp; ' + remain + ' left');
    });

    $('.imageTitle').keyup(function(e) {

        var value = $(this).val(),
            valueLength = value.length;
            set = 15,
            remain = parseInt(set - valueLength);

        if (e.keyCode == 8) {
            $('.imageTitle').val((value).substring(0, valueLength - 1));
        }

        $('#titleCharsLeft').html('&nbsp; ' + remain + ' left');
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:32:32.677

这是一个替代演示，它通过使委托成为函数来提供一些自定义和非重复代码。在没有实际制作插件的情况下，这是一种替代方法。

[http://jsfiddle.net/lucuma/effAF/2/](http://jsfiddle.net/lucuma/effAF/2/)

HTML：您会注意到我添加了一个 data-length 属性来控制每个单独输入的长度。

```
<div id="titleCharsLeft"></div>

<form>
    <input type="text" class="validateThis" data-length="10" />
    <input type="text" class="validateThis" data-length="15" />
    <input type="text" class="validateThis" data-length="10" />
    <input type="text" class="validateThis" data-length="10" />
</form>​ 
```

JS：我制作了一个函数，它在事件中被调用并更改为`on`.

```
function validateLength(el) {
    console.log('hit');
    var $this = $(el);
    var value = $this.val(),
        valueLength = value.length;
        set = parseInt($this.attr('data-length'));
        remain = parseInt(set - valueLength);

    if (remain <= 0 && e.which !== 0 && e.charCode !== 0) {
        $('.imageTitle').val((value).substring(0, valueLength - 1));
    }

    $('#titleCharsLeft').html('&nbsp; ' + remain + ' left');
}

$(document).on( 'keypress','input.validateThis',function(e){
     validateLength(this);
});

$(document).on( 'keyup', 'input.validateThis',function(e){
     validateLength(this);
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:53:00.960

考虑为您希望验证的每个输入字段添加一个公共类，然后像这样应用 $.delegate()：

**HTML**

```
<form>
    <input class="validateThis" />
</form> 
```

**jQuery**

```
$(document).delegate('input.validateThis', 'keypress', function(e){
    ...
});

$(document).delegate('input.validateThis', 'keyup', function(e){
    ...
}); 
```

**[在这里演示](http://jsfiddle.net/kGfqJ/1/)**

我希望这有帮助！

# c# - 如何为c#桌面应用程序创建exe

> ID：10863149
> 
> 赞同：0
> 
> 时间：2012-06-02T14:33:56.323
> 
> 标签：c#, deployment, sql-server-express

我正在尝试为我的桌面应用程序创建安装文件。我使用 SQL Server Express 作为数据库，使用 c# 作为编程语言。我搜索了有关创建设置文件的信息，但我有一些疑问......我已经编写了代码以在一个类中连接到数据库并在需要的地方调用它。

创建连接的代码是..

```
class dbConnection
{
    SqlConnection con;

    public SqlConnection doConnection()
    {

        try
        {
            String str = "Data Source=Basu-Pc\\SQL;Initial Catalog=PhoenixIS;Integrated Security=True;Pooling=False";
            con = new SqlConnection(str);
            con.Open();

        }
        catch (Exception exc)
        {

            MessageBox.Show(exc.Message);
        }
        return con;
    }
} 
```

我在需要的地方调用这个类......现在我有一些问题：

1.  如何修改连接字符串以将其部署到其他系统？
2.  如何轻松部署 sql express 和系统？

请帮我回答我的问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:39:03.523

您可以在此链接中创建设置项目：

[逐步创建安装项目](http://www.fordevs.com/2009/07/steps-to-create-setup-and-deployment-project-in-dot-net-vs-2008.html)

关于 sql 连接字符串，您只需要创建一个 .ini 文件并在程序中读取该文件，如[链接](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)所示。

如果要部署 sql express，只需在 setup 项目中添加 db 文件作为资源。

HTH。

# scala - 在 scala 中子类化和输入

> ID：10863152
> 
> 赞同：4
> 
> 时间：2012-06-02T14:34:29.563
> 
> 标签：scala, types

我在 Scala 中正确输入时遇到了麻烦——我想做这样的事情，在类层次结构上强加 Ordered，但是子类允许 compare 方法只能使用它们自己类型的参数

```
abstract class Parent extends Ordered
class A extends Parent {
  override def compare(that : A) = 1
}
class B extends Parent {
  override def compare(that : B) = 1
} 
```

以下工作，但我被迫永远将类型特异性强加给 Parent 及其子类。这只会成为正确推理的噩梦。

```
abstract class Parent[T <: Parent[_]] extends Ordered[T]
class A extends Parent[A] {
  override def compare(that : A) = 1
}
class B extends Parent[A] {
  override def compare(that : B) = 1
} 
```

有没有更简单的方法来强制 Ordered[T] 的子类上的类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T21:57:55.110

为什么不只是

```
abstract class Parent
class A extends Parent with Ordered[A] {...}
class B extends Parent with Ordered[B] {...} 
```

正如其他人指出的那样，根据您的比较标准，`Parent`不会对 s 序列进行排序，因为它的子类不可比较。只有它的子类是`Ordered`，所以在那里实现特征。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:26:04.357

我同意这个问题有点烦人，但如果你正在寻找的行为是允许的，那就有点奇怪了。假设你做了

```
trait Parent {
    this: Ordered[ThisType]
}

// Does A need to be Ordered[A]?
trait A extends Parent

// Should B, C be comparable? If A is Ordered, then they
// have to be. But is this what you want?
class B extends A
class C extends A

// Now what?
class D extends B 
```

基本上，使用继承来强制一些这样的属性会有点奇怪......它可能在理论上可以工作，但这将背离继承的含义。相反，您可以`Ordered`在需要时在方法中指定约束：

```
def foo[T <: Ordered[T]](x: T) = ... 
```

或者，如果您想将`Ordered`约束和可能的其他约束分组在一个通用名称下，您可以创建一个类型类样式的特征：

```
trait Parent[A] {
    val order: Ordering[A]
}

def foo[T : Parent](x: T, y: T) {
    println(implicitly[Parent[T]].order.compare(x, y))
} 
```

此解决方案的一个不幸方面是您无法指定`sealed`; 如果有人有办法解决这个问题，我会很感兴趣。否则，您可以使用依赖类型的编程语言，它们在这类事情上要好一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T10:49:47.063

路易吉，我认为这是正确的答案。我想我是从 Java OO 范式来解决这个问题的，在这种范式中，通常需要在不了解其底层类型的情况下订购一组父母。至少在我的小环境中，我开始意识到，如果我正确设置了我的功能方法，我*将*知道集合的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:51:26.767

谢谢，这是一个非常好的见解——以前从未想过。我只是把它作为一个解决方案，但坦率地说，它看起来有点臭，这让我有点紧张。注释？

```
abstract class Parent extends Ordered[Parent] {
  override def compare(that : Parent) : Int = {
    (this, that) match {
      case (x : A, y : A) =>  x.compare(y)
      case (x : B, y : B) =>  x.compare(y)
      case _ =>  throw new ClassCastException
    }
  }
}
class A extends Parent {
  def compare(that : A) = 1
}
class B extends Parent {
  def compare(that : B) = 1
} 
```

# mysql - 为什么我的 Coldfusion 存储过程没有在 MySql 中执行？

> ID：10863153
> 
> 赞同：1
> 
> 时间：2012-06-02T14:34:32.063
> 
> 标签：mysql, stored-procedures, coldfusion

我正在使用 Coldfusion8 并试图获得一个简单的存储过程来运行 MySQL id-lookup。

当我从 MySQL 内部触发该过程时，它正在工作。但是在我的 Coldfusion 页面上，什么也没有发生。

这是我的程序：

```
 CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_select_extern`(IN `iln_to_match` VARCHAR(13))
     LANGUAGE SQL
     NOT DETERMINISTIC
     READS SQL DATA
     SQL SECURITY DEFINER
     COMMENT ''
  BEGIN

      SELECT tn.iln
      FROM   teilnehmer AS tn
      WHERE tn.iln = iln_to_match
      LIMIT 1;
  END 
```

我在 Coldfusion 中调用程序：

```
<cfstoredproc procedure="proc_select_extern" datasource="dns">
   <cfprocparam type="in" value="#Session.Extern#" cfsqltype="cf_sql_varchar" maxlength="13">
   <cfprocresult name="extern">         
</cfstoredproc>
<cfoutput query="extern">
    <p>Hello #extern.username#</p>
</cfoutput> 
```

我想我至少会得到一个*CALL `proc_select_extern`('value');* 在 MySQL 中报告，但我什至没有得到这个。

**编辑：**
所以我让它在一个空页面上作为 CFQUERY 工作，如下所示：

```
 <cfquery datasource="db" NAME="extern">
   SELECT tn.iln
   FROM teilnehmer AS tn
   WHERE tn.iln = #Session.Extern#
   LIMIT 1
 </cfquery>
 <cfdump var="#extern#">
 <cfoutput>#IsDebugMode()#</cfoutput> 
```

现在尝试使用storedProc 进行相同的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:56:13.223

是否有某种形式的 ColdFusion 错误消息？此外，如果您在请求上启用了调试，您是否看到那里正在进行过程调用？

另外，只是一个观察。存储过程中的 SQL 非常基本（单表选择，没有连接）。将其作为存储过程将产生比内联查询更多的 sql 开销。使用存储过程不会提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:56:33.353

我没有在上面看到明确的答案。我遇到了同样的问题，并通过在 CF admin 中编辑数据源并在高级设置下，选中允许的 SQL 部分中的“存储过程”来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T18:37:31.800

这对我有用：

```
<cfquery name ="myQuery" datasource="mydataSource">
call sp_myprocedure();
</cfquery> 
```

我一直在寻找此错误消息的解决方案一段时间，但一无所获。我在 Coldfusion 10 上，我的 MySQL 程序在 MySQL 服务器上运行时运行良好。当我尝试时购买

```
<cfstoredprocedure ..... 
```

它引发以下错误：

> "Error Executing Database Query. User does not have access to metadata required to determine stored procedure parameter types. If rights can not be granted, configure connection with "noAccessToProcedureBodies=true" to have driver generate parameters that represent INOUT strings irregardless of actual parameter types."

I have tried setting up a JDBC connection with the above parameter but it didn't help either. So ended up passing a call to the procedure as a query which seems to work fine. Dropping the solution here for future reference.

# mysql - OpenOffice Calc:- 从 MySQL 表中导入记录

> ID：10863154
> 
> 赞同：2
> 
> 时间：2012-06-02T14:34:44.297
> 
> 标签：mysql, openoffice.org, openoffice-calc

**我的问题的序言：-**

我有一个股票经纪人的桌面应用程序，其中一个 csv 文件在硬盘上不断更新。

我正在尝试将 csv 文件中的实时股票报价附加到 OpenOffice Calc 文件（始终保持打开状态）。
我希望保持文件打开，因为我将在其中包含股票图表。

一个 python 程序，运行时会将新数据从 csv 文件附加到 MySQL 表中。
没有问题。

**我的问题是——**

如何将 MySQL 表中的数据导入 OO Calc，然后不断刷新它。
对于 Excel，我想出了如何去做。
在OO Calc中，我通过“Tools--Options--OO Base--Connections”配置了MySQL连接。
它打开一个窗口并显示表格。
有人可以请。告诉我如何实现从 MySQL 到 OO Calc 的数据导入和刷新？
（复制和粘贴不是一个好的解决方案）。

提前致谢，

维内

*（披露：-我在这个论坛上问过一个类似的问题，但涉及 python 和 xlrd/xlwt 的观点。）*

# matlab - 卡尔曼滤波器，汽车跟踪，Matlab

> ID：10863156
> 
> 赞同：3
> 
> 时间：2012-06-02T14:34:56.210
> 
> 标签：matlab, matlab-cvst, kalman-filter

我有一个移动汽车的小数据集：

```
Data_=[time x,y,z];    %# ONLY THIS DATA 
```

我知道在这种情况下，速度和加速度不是恒定的。

我想估计不同时间的汽车位置。我决定使用卡尔曼滤波器。我搜索了卡尔曼滤波器，但找不到用于在 3D 空间中以速度和加速度跟踪对象的代码。我不知道从哪里开始。卡尔曼滤波器可以自动处理速度和加速度吗？

有人可以帮助我并提供一些链接或指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:58:46.530

我的建议是去[Mathworks 文件交换](http://www.mathworks.com/matlabcentral/fileexchange/)并[搜索卡尔曼滤波器](http://www.mathworks.com/matlabcentral/fileexchange/?term=kalman%20filter)

你会发现这个非常标准的算法的好几段代码。

就卡尔曼滤波器本身而言，它们就是所谓的预测器-估计器。也就是说，他们可以在`n`给定时间的观察结果的情况下对时间的状态进行预测`n-1`。然后，在您收到 time 的观察结果后，`n`您可以对 time 之前的所有时间进行估计（有人称之为平滑）`n`。估计部分是通过所谓的*创新*和当前的卡尔曼增益来完成的。

卡尔曼滤波器通过“状态空间”的概念工作，即您的状态存储有关对象的所有必要信息。不同的*观察向量*是您可以观察到的系统。例如，在恒定加速度模型中，您可能会假设状态仅包含 3 个位置值和 3 个速度值（x、y 和 z）。过滤器的设计者负责决定状态空间和状态转换模型（您希望在没有观察的情况下状态如何变化。）

您必须选择一个状态转换矩阵，您必须了解观察误差的协方差矩阵，状态转换矩阵中误差的协方差矩阵（即，您的状态转换有多好）模型是），以及初始状态估计的协方差矩阵（您还必须选择）。您还必须选择状态向量和观察向量之间的关系。

如果您假设高斯观测噪声、高斯过程噪声和其他一些标准事物，卡尔曼滤波器是*最大似然最优线性估计器。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T10:30:37.063

查看 udacity.com 的 AI 课程，CS373。他们在那里很好地解释了卡尔曼滤波器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T17:22:56.807

`Kalman Filter`在一个循环中是 5-6 行。您不需要任何人的实施。

您需要的是一个描述汽车轨迹的线性系统模型。如果你有系统矩阵`A,B,C`（或`F,G,H`），你实际上已经完成了。

`Kalman Filter`是一种通用的`Bayesian`过滤算法。它适用于任何线性高斯情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T04:28:37.560

计算机视觉系统工具箱现在有一个`vision.KalmanFilter`对象。这是一个如何使用它来跟踪对象的[示例。](http://www.mathworks.com/help/vision/examples/using-kalman-filter-for-object-tracking.html)该示例是 2D 的，但可以很容易地推广到 3D。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-03T11:39:27.993

在您的情况下，（线性）卡尔曼滤波器可能是最好的选择（它的第一个应用实际上是跟踪阿波罗太空船的位置以正确撞击月球！）。所以有很多关于这个问题的教程，例如看[这个可爱的小机器人](https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/)的例子。它实际上是大约 5 行代码（请注意，您应该使用*持久*变量）。协方差矩阵（通常是*P*、*R*、*Q*）的调整是有根据的猜测。将 P 初始化为对角矩阵 P`= eye(length(x))*1e3`并选择噪声矩阵*R*，*Q*大致与状态向量*x*或测量值*y的顺序相同*分别。

如果您不喜欢带噪声矩阵的模糊，可以使用递归拟合：RLS（递归最小二乘法）是一种标准识别方法——但它不使用任何统计数据作为卡尔曼滤波器，即它很容易测量中的噪声。它包含更少的代码行，但也使用持久变量。

```
function [x_est] = RLS(y,x0,mk,fnc)
% (non)linear recursive-least-square
%
% y     measurements
% x0    initial value of the to-be-identified state vector
% mk    measurement matrix, so that y = mk'*x
% fnc   function handle, if the system is non-linear and when mk is the
%       linearized version of this function

persistent  x P 
if isempty(x)

    x = x0;
    P = eye(length(x)) * 1e3;
end

% adaption factor (usually [0.9 1))
AdaptFct = .995;

%% nonlinear prediction
if nargin > 4
    y_sim = fnc(x);
else
    y_sim = mk*x;
end
e = y_sim - y;

%% RLS
% Kalman gain
G = P*mk / (AdaptFct + mk'*P*mk);

% Update
% state
x = x + G*e;
% covarianve matrix
I = eye(length(P));
P_new = (I - G*mk')*P;
P = P_new/AdaptFct;

%% output
x_est = x;

end 
```

请注意，如果要重新启动所有内容，则必须清除函数的持久变量：`clear RLS`

# objective-c - 揭秘 NSOperation：并发与非并发和异步模式

> ID：10863157
> 
> 赞同：5
> 
> 时间：2012-06-02T14:34:59.290
> 
> 标签：objective-c, asynchronous, nsurlconnection, nsoperation, nsoperationqueue

是的，我知道。关于这个世界有很多问题和答案，`NSOperation`但我仍然有一些疑问。我试图用一个两部分的问题来解释我的疑问。它们是相互关联的。

在 SO post [nsoperationqueue-and-concurrent-vs-non-concurrent](https://stackoverflow.com/questions/1646795/nsoperationqueue-and-concurrent-vs-non-concurrent)中，**Darren**写道

> “并发”操作本身是并发的；它不需要 NSOperationQueue 为其创建线程。

但是稍微搜索了一下，我发现 a `NSOperation`，即使它被声明为并发（通过覆盖`isConcurrent`它返回的方法`YES`），也可以添加到`NSOperationQueue`. 这是什么意思？如果我将并发添加`NSOperation`到队列中，幕后发生了什么？相反，如果我按原样使用并发操作（不将其添加到队列中）会发生什么？

从 Apple doc 中获取的注释很清楚：

> ...操作队列忽略 isConcurrent 返回的值，并始终从单独的线程调用操作的 start 方法。...一般来说，如果您总是在操作队列中使用操作，则没有理由使它们并发。

然后，我对在`NSOperation`. 我找到了**Dave Dribin**的一个很好的教程（[并发操作](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)）。我明白了他帖子的整体含义。

*您不能使用异步模式（例如使用异步`NSURLConnection`请求），因为无法调用委托。当`main`完成时，操作被删除。解决方案是重写`start`控制操作生命周期的方法......并且处理运行循环可能会很痛苦。*

现在，试图理解他的帖子，我怀疑是否需要`start`在主线程中运行该方法。

```
- (void)start
{
    if (![NSThread isMainThread])
    {
        [self performSelectorOnMainThread:@selector(start) withObject:nil waitUntilDone:NO];
        return;
    }

    // other code here...
} 
```

> 在处理异步 API 时，我们可以在 start 的主线程上开始异步调用，并保持操作运行直到完成。

你能解释一下为什么吗？

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T15:54:15.180

在我看来，`isConcurrent`属性的`NSOperation`名称令人困惑。它的真正意思是“异步”。也就是说，当它`-start`被调用时，无论操作是否已经运行完成（异步），它是否会快速返回？还是直到操作运行完成（同步）才返回？

正如Apple的文档所述，当操作排队时这并不重要`NSOperationQueue`，因为队列在工作线程上调用它，无论如何。如果它是同步的，那么该工作线程将专门用于该操作，直到它完成。如果是异步的，那么`-start`会在操作完成之前返回，工作线程可以继续做其他工作。

问题是，异步方法如何`-start`确保操作的工作继续进行？这*可能*需要产生一个单独的线程来完成这项工作，但这很愚蠢。最好让`NSOperationQueue`处理线程。

更有可能的是，它使用由外部事件驱动的运行循环源。`NSURLConnection`在它的异步模式中就是这样的事情。但是，在这种情况下，它必须确保它调度运行循环源的线程 a) 将继续存在，并且 b) 将运行它的运行循环。`NSOperationQueue`也不能依赖工作线程来做。

同样，您*可以*为每个此类操作创建自己的线程，专门用于停留并运行其运行循环，但这是不必要的，而且与让操作保持同步并对其进行排队相比，这没有任何优势。

您已经知道将保留并运行其运行循环的一个线程是主线程。因此，通常最好将运行循环源安排在主线程的运行循环上。唯一需要注意的是，为了响应触发运行循环源处理程序的外部事件，您不要在主线程上执行任何长时间运行的工作。因此，例如，当`NSURLConnection`使用接收到的数据调用您的委托方法时，您不会对该数据进行昂贵的计算 - 或者，如果必须，将该昂贵的计算移至另一个线程。

另一种可能性，一种中间立场，是创建一个您自己的线程作为许多异步操作的工作线程。因此，不是使用主线程或每个操作的线程，而是使用单个线程，其工作只是停在其运行循环中。您的所有异步操作都会在该线程的运行循环中自行安排。不过，这种方法并没有太多需要或优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:15:16.737

我认为 Dave 在帖子中解决了他将 start 方法分流到主线程的动机：

> 2009-09-13 更新：从 10.6 起不再适用。从 10.6 开始，总是在后台线程上调用 start 方法。要在仅主线程和依赖运行循环的异步 API 上正常工作，我们需要将工作分流到主线程。更多关于此的后续帖子。

# javascript - jQuery - 使用 .prepend()

> ID：10863168
> 
> 赞同：0
> 
> 时间：2012-06-02T14:35:51.387
> 
> 标签：javascript, jquery, html, css

我在我的项目中使用 jQuery，我遇到了 .prepend() 的一些问题。请访问[http://qlimp.com](http://qlimp.com)并使用此用户名/密码登录：dummy/dummy 然后单击链接**转到信息设置**。单击**添加服务**按钮->然后单击**facebook图标**->只需单击**添加按钮**

您将看到蓝色的**facebook 标签**。当您再次执行该过程时，您将看到**三个**facebook 标签（一次添加两个标签）而不是**两个**. 这就像在前面加两次没有。以前的标签。为什么会这样？

这是jQuery代码：

```
$("#facebook").click(function(){
    $("#facebook-info").fadeIn("slow");
    $("#facebook-button").click(function(){
        a = a+1;
        $("#service-sets").prepend('<div class="tag" id="'+a+'"><span class="blue-tag">Facebook<span class="delete-tag"><i class="icon-cancel-circle-1" id="facebook-del"></i></span></span></div>');
    });
});

$("#service-sets").on('click', '#facebook-del', function() {
    $("#facebook-tag").remove();
}); 
```

HTML

```
<div id="service-sets">
</div> 
```

我刚刚使用示例代码检查了 jsfiddle [http://jsfiddle.net/YVZH5/](http://jsfiddle.net/YVZH5/)，它正在工作（一次添加一个标签）。谁能告诉我我犯的错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:43:53.093

只使用一个`click`事件。您正在为父元素和子元素执行此操作。

```
$("#facebook-button").click(function(){
    $("#facebook-info").fadeIn("slow");   
        a = a+1;
        $("#service-sets").prepend('<div class="tag" id="'+a+'"><span class="blue-tag">Facebook<span class="delete-tag"><i class="icon-cancel-circle-1" id="facebook-del"></i></span></span></div>');      
}); 
```

并确保，如果您将单击事件绑定到父 div 和子 div，则当您单击子 div 时，您将停止父事件事件。您可以使用`stopPropagation`来停止冒泡事件的执行。

# objective-c - 使用计时器检查 if 内的条件

> ID：10863169
> 
> 赞同：0
> 
> 时间：2012-06-02T14:36:03.530
> 
> 标签：objective-c, ios, timer, nstimer

我必须开发一个应用程序来执行以下操作，

1.  开关用于启动加速度计
2.  然后将加速度计数据插入到大小为 5 的数组中
3.  然后使用这些加速度计数据使用方程式计算输出值
4.  每次有新读数出现时，我都会删除数组的最后一个元素并将其添加到数组中（数组在整个循环中保持动态
5.  然后我想比较计算的输出是否大于指定值并更新全局计数器？

我通过使用 if 条件实现了这一点

```
if(output>10){
[[shared sharedInstance].counter++;
} 
```

（以上均已实现，并且运行良好）

但问题是…………

我想检查这个 if 条件，用于更新为激活 5 毫秒并停用 10 毫秒，但“不”停止加速度计数据处理和计算输出也很重要。

所以我认为我可以实现两个全局变量并设置它们的值，如下所示 1\. var_x - 将其值设置为 1 5ms，然后将其设置为 10ms，这个过程应该不断重复，它应该在用户激活加速度计后开始，

因此，通过在我的 if 条件中使用它，我可以确保它在 10ms 后检查条件并继续检查 5ms 像这样......

```
if(output>10 && [[shared sharedInstance].var_x >1){
[[shared sharedInstance].counter++;
} 
```

谁能帮我在全局变量中编写这个计时函数以将变量值设置为 1 和 0 ？(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:13:27.740

```
- (void)turnCheckOn {
    doCheck = YES;
    [self performSelector:@selector(turnCheckOff) withObject:nil afterDelay:0.005];
}

- (void)turnCheckOff {
    doCheck = NO;
    [self performSelector:@selector(turnCheckOn) withObject:nil afterDelay:0.010];
} 
```

然后调用`turnCheckOn`一次。

# html - PrimeFaces 菜单栏选项被隐藏 零件

> ID：10863183
> 
> 赞同：1
> 
> 时间：2012-06-02T14:37:28.583
> 
> 标签：html, css, flash, jsf-2, primefaces

在我的应用程序中，我使用 PrimeFaces 和来组织内容。在其中一个页面中，我使用组件嵌入了一个 YouTube 视频。不幸的是，如下图所示，我的子菜单被 Flash 播放器隐藏了。

![隐藏的子菜单](../Images/1048bebf0b380d5e55feb2cce1feb970.png)

更准确地说，我放在中心布局单元内。顶部菜单栏是独立的，我没有顶部布局单元。

由于我在 CSS 方面的经验很少，如果您能告诉我如何解决这个问题，我将不胜感激。

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:59:57.897

这是由 Flash 播放器引起的[已知问题](https://www.google.com/search?q=flash+z-index)，实际上与 JSF 没有直接关系。您基本上需要将`wmode`Flash 播放器的参数设置为`opaque`. 您可以通过将其嵌入`<f:param>`到`<p:media>`.

```
<p:media ...>
    <f:param name="wmode" value="opaque" />
</p:media> 
```

`wmode`也可以解决这个问题的另一个值是`transparent`。

```
<p:media ...>
    <f:param name="wmode" value="transparent" />
</p:media> 
```

在尽可能多的不同浏览器中尝试一个和另一个，看看在您的特定情况下哪个修复它最好。

# javascript - 在页面渲染时强制浏览器为图像留出空间

> ID：10863190
> 
> 赞同：1
> 
> 时间：2012-06-02T14:37:45.827
> 
> 标签：javascript, css, html

在典型的 html 页面上，我使用 img 标签的图像已经定义了高度和宽度，因此浏览器不需要等到它加载图像并获取它的尺寸。但是，在页面加载时，它不会离开图像中指定的空间，并在图像完全加载后调整页面大小。

即使在页面渲染期间没有完全加载图像，我如何强制浏览器离开空间。

而且，现在假设如果我在页面上破坏了 url，浏览器会留下它的空间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:50:09.667

当您在 HTML 标记或 CSS 中指定图像的宽度和高度时，浏览器将在页面布局中使用这些尺寸，并重新缩放（如果需要）图像以适应这些尺寸。需要分析关于不会发生这种情况的情况的观察结果，首先确保尺寸已正确指定，然后它们没有被更改（在客户端 JavaScript 中）。根据 W3C 标记验证服务，您提到的页面有 986 个标记错误，虽然大多数问题是正式的，但它们可能包含影响渲染的错误。

如果`src`属性值不引用图像，则浏览器应该呈现`alt`属性值来代替图像。他们这样做的方式因浏览器而异。现代浏览器通常使用为图像指定的尺寸（如果不合适，可能会截断文本），因此整体布局与图像在那里一样。

# racket - 为什么 Racket 中缺少单臂“如果”？

> ID：10863192
> 
> 赞同：32
> 
> 时间：2012-06-02T14:37:57.070
> 
> 标签：racket

在[标准方案](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_idx_366)中，可以写

```
(if (> x 2)
    (set! x (- x 1))) 
```

但这在球拍中是不可能的——球拍[`if`](http://docs.racket-lang.org/reference/if.html?q=if#%28form._%28%28quote._~23~25kernel%29._if%29%29)总是需要两条手臂。为什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-02T14:37:57.193

**基本原理**

单臂变种`if`已从 Racket 中删除以防止出现错误。

在功能代码中，一个总是使用`if`.

```
(if test expr-on-true expr-on-false) 
```

忘记第二个手臂`expr-on-false`不会导致语法错误，但会导致运行时错误（表达式将返回`#<void>`）。

为了防止函数代码中经常出现这些错误，决定`when`引入`if`.

```
 (when test expr-on-true) 
```

除了防止意外错误之外，新形式还向代码读者清楚地表明，代码依赖于副作用。

**将代码从标准 Scheme 移植到 Racket**

如果您尝试在 Racket 中运行 Scheme 代码并看到错误消息

```
if: bad syntax (must have an "else" expression) 
```

您必须将`if`表达式重写为`when`or `unless`。

简单地重写：

```
(if test expr1)    to    (when test expr1) 
```

和

```
(if (not test) expr1)   to    (unless test expr1). 
```

# django - Django 和 MPTT - 仅获取叶节点

> ID：10863194
> 
> 赞同：14
> 
> 时间：2012-06-02T14:38:02.170
> 
> 标签：django, django-mptt

我是 Django 和 MPTT 的新手，很难弄清楚如何获取所有叶节点并将它们直接发送到 Form 类。例如，我创建了 MPTT 类别模型，并具有如下层次结构：

*   类别1

*   类别2
*   类别3

*   类别4

*   类别5
*   类别6

所以我只想获取叶子类别（cat2,3,5,6）。我的 Form 类看起来像这样：

```
class UploadForm(forms.Form):
    description = forms.CharField(max_length=50)
    category = mpttform.TreeNodeMultipleChoiceField(queryset=Category.objects.all())
    file = forms.FileField() 
```

并且使用 queryset=Category.objects.all() 我在上面得到完全相同的东西 - 所有类别及其子项。有没有办法我只能获取叶节点（子节点），但来自所有类别的叶节点，而不是来自特定类别实例 ？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-02T14:56:47.990

有一段时间没有使用 django mptt，但鉴于叶节点可能由 标识`right == left + 1`，您应该能够使用[`F()`表达式对此进行过滤](https://docs.djangoproject.com/en/dev/topics/db/queries/#query-expressions)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-08T07:52:33.983

```
Category.objects.filter(children__isnull=True) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-03T09:39:07.700

非最优解：

```
Category.objects.filter(id__in=[category.id for category in Category.objects.all() if category.is_leaf_node()]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-19T00:05:40.113

我的 django mptt 小片段

从 django.db 导入模型

```
class CategoryManager(models.Manager):
    def get_leaf(self, level=2):
        return self.filter(level__lte=level).order_by('tree_id','lft').all()

class Category(models.Model):
     objects = CategoryManager() 
```

利润，使用它：Catalog.objects.get_leaf()

# visual-studio - Visual Studio 消失的菜单

> ID：10863195
> 
> 赞同：2
> 
> 时间：2012-06-02T14:38:04.757
> 
> 标签：visual-studio, menu

当我在 Visual Studio 2010 中开发应用程序时，每隔一段时间，应用程序的主菜单条就会消失。

过去我很恐慌，然后在设计视图中从头开始重建菜单。

这些天，我不再恐慌。相反，我在 [applicationName].Designer.cs 文件中找到了 Main Menu 声明，它通常如下所示：

```
 // mainMenus
    // 
    this.mainMenus.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.fileMenuItem,
        this.viewMenuItem,
        this.helpMenuItem});
    this.mainMenus.Location = new System.Drawing.Point(0, 0);
    this.mainMenus.Name = "mainMenus";
    this.mainMenus.Size = new System.Drawing.Size(1008, 24);
    this.mainMenus.TabIndex = 17;
    this.mainMenus.Text = "menuStrip1"; 
```

相反，它看起来像这样：

```
 // mainMenus
    // 
    this.mainMenus.Location = new System.Drawing.Point(0, 0);
    this.mainMenus.Name = "mainMenus";
    this.mainMenus.Size = new System.Drawing.Size(1008, 24);
    this.mainMenus.TabIndex = 17;
    this.mainMenus.Text = "menuStrip1"; 
```

所以我手动编辑该文件以恢复丢失的

```
 this.mainMenus.Items.AddRange line. 
```

（是的，我知道您不应该编辑 [applicationName].Designer.cs 文件，因为它是由 Visual Studio 生成的。不过，这确实解决了它。）

我的问题是：知道为什么主菜单条一直消失吗？以及如何防止它在未来发生？

# c# - 无法在 Winforms 中捕获未处理的异常

> ID：10863197
> 
> 赞同：4
> 
> 时间：2012-06-02T14:38:14.933
> 
> 标签：c#, .net, winforms, exception

我正在尝试在 C# Windows 窗体应用程序中捕获所有未经处理的异常。我已将以下代码添加到`Program.cs`文件中，但未捕获异常，我得到异常，例如`NullReferenceException`. 我究竟做错了什么？

```
static void Main()
{ 
    System.Windows.Forms.Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
    System.Windows.Forms.Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(OnGuiUnhandedException);
    AppDomain.CurrentDomain.UnhandledException += OnUnhandledException;
    var form = new MainForm();
    form.ShowDialog();
}

private static void HandleUnhandledException(Object o)
{
    // TODO: Log it!
    Exception e = o as Exception;
    if (e != null)
    {
    }
}

private static void OnUnhandledException(Object sender, UnhandledExceptionEventArgs e)
{
    HandleUnhandledException(e.ExceptionObject);
}

private static void OnGuiUnhandedException(object sender, System.Threading.ThreadExceptionEventArgs e)
{
    HandleUnhandledException(e.Exception);
} 
```

**编辑：当程序在 Visual Studio 外部运行时，我能够捕获异常，但是当从 Visual Studio 调试时，我无法捕获异常。我知道调试是为了消除错误。我应该在构建模式下运行程序以捕获异常吗?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:07:34.823

尝试在 VS 中禁用异常捕获，因为它似乎在异常到达您的处理程序之前捕获了它。

调试 > 异常... > 取消选中用户未处理的公共语言运行时异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:57:07.357

如果您在 64 位 Windows 上，您可能需要检查 Debug->Exceptions 并检查是否引发了 CLR 异常。

[C# 中的静默失败，看似未处理的异常，不会使程序崩溃](https://stackoverflow.com/questions/1583351/silent-failures-in-c-seemingly-unhandled-exceptions-that-does-not-crash-the-pr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:57:18.233

您订阅的事件仅提供检查异常的方法；它们并不意味着允许您抑制异常或从异常中恢复。

来自[`AppDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)：

> 此事件提供未捕获异常的通知。它允许应用程序在系统默认处理程序向用户报告异常并终止应用程序之前记录有关异常的信息。

如果您想在记录异常后从异常中恢复，则需要在代码周围使用 try-catch 块。

# jquery - 如何为每个输入标签插入唯一的 id？

> ID：10863200
> 
> 赞同：0
> 
> 时间：2012-06-02T14:38:33.877
> 
> 标签：jquery, html-table

我尝试从生成的表代码中为每个输入标签添加唯一 ID。[演示](http://jsfiddle.net/centerwow/Xt33h/3/) 我想要这样的代码：

```
<table>
<tbody>
<tr>
<td class="tableCell">
<input id="1"> </input>
</td>
<td class="tableCell">
<input id="2"> </input>
</td>
</tr>
<tr>
<td class="tableCell">
<input id="3"> </input>
</td>
<td class="tableCell">
<input id="4"> </input>
</td>
</tr>
</tbody>
</table> 
```

反而

```
<table>
<tbody>
<tr>
<td class="tableCell">
<input>
</td>
<td class="tableCell">
<input>
</td>
</tr>
<tr>
<td class="tableCell">
<input>
</td>
<td class="tableCell">
<input>
</td>
</tr>
</tbody>
</table> 
```

生成代码的函数：

```
function createDynamicTable(tbody, rows, cols) {
    if (tbody == null || tbody.length < 1) return;
    for (var r = 1; r <= rows; r++) {
        var trow = $("<tr>");
        for (var c = 1; c <= cols; c++) {
            var input = $("<input />");
            $("<td>").addClass("tableCell").append(input).appendTo(trow);
        }
        trow.appendTo(tbody);
    }
}

createDynamicTable($("tbody"), 2, 2); 
```

如何进行更改以将 uniq id 插入每个输入标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:40:43.120

函数外：

```
var currentId = 0; 
```

在您的功能中：

```
var input = $("<input />", {id: 'inp-' + ++currentId}); 
```

替换`inp-`为您喜欢的任何内容，但 ID 不能以数字开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:40:34.670

```
for (var c = 1; c <= cols; c++) {
    var input = $("<input />");

    // but don't use only numeric id
    input.attr("id", c);

    // OR
    var input = $("<input />", {id: c});

    $("<td>").addClass("tableCell").append(input).appendTo(trow);

    // better would be
    var input = $("<input />", {id: "id_" + c});

    // OR
    input.attr("id", "id_" + c);

    $("<td>").addClass("tableCell").append(input).appendTo(trow);
} 
```

# eclipse - struts2 入门

> ID：10863201
> 
> 赞同：0
> 
> 时间：2012-06-02T14:38:36.753
> 
> 标签：eclipse, maven, tomcat, struts2

我正在尝试在 Eclipse 中设置 maven 和 struts 2 项目，但我遇到了问题。我选择创建简单的 HelloWorld 示例，然后添加一些其他功能，但我遇到了问题。

* * *

我在项目中有“struts.xml”路径：src/main/resources/struts.xml

在里面：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <package name="default" namespace="/" extends="struts-default">

        <action name="Login">
            <result>/Pages/Login.jsp</result>
        </action>

        <action name="Index">
            <result>/Pages/Index.jsp</result>
        </action>

        <action name="Welcome" class="com.contactweb.main.Contact">
            <result name="SUCCESS">/Pages/Welcome.jsp</result>
        </action>
    </package>

</struts> 
```

* * *

我也有带有路径 src/main/web/WEB-INF/web.xml 和内容的 web.xml：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>ContactWeb</display-name>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

从命令行我使用'mvn clean install'并将.war文件放入目标文件夹，我将在Tomcat下部署该.war文件（也成功部署它）但是当我输入url时出现错误：

> 请求的资源 (/ContactWeb/Pages/Login.jsp) 不可用。

具有不同 url-s 的相同错误仅路径不同（/ContactWeb/Login.jsp、/ContactWeb/Login.action 等）。

在我的项目中，我确实有 Login.jsp、Index.jsp 和 Welcome.jsp。它们位于：src/main/web/Pages

我在struts2中的某个地方读到过，我需要对url进行.action扩展，但它不起作用，为什么struts.xml中是包名和命名空间？到底需要什么？我已经阅读了它要显示的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:00:03.350

还没有足够的信息可以提供帮助，但错误的程度足以使其不适合评论。

*   为什么要使用古老的 servlet 规范（2.3？由于各种原因，至少应该是 2.5。）
*   您为什么使用旧版本的 S2（2.0？我们使用的是 2.3。）
*   操作的结果名称`Welcome`几乎可以肯定是默认名称`"success"`，除非您明确不使用 S2 结果名称。哪个 IMO 将是一个坏主意。
*   我们不知道您要部署到什么上下文，因此我们不知道您的 Web 应用程序的路径。如果您要部署到`ContactWeb`上下文中，那么`Login`操作将在`/ContactWeb/Login.action`（或者无论您的后缀是什么，如果有的话）。
*   您应该 (a) 打开`devMode`，并且 (b)`DEBUG`在故障排除时将日志记录提高到该级别。
*   您的 JSP 页面是否位于该`src/main/webapp/Pages`目录中？请注意，通常通过将 JSP 放在下面来隐藏 JSP 以防止直接访问`WEB-INF`——我建议您遵循这种做法。
*   您的启动日志中是否有任何内容表明应用程序未启动？

我建议阅读一些[S2 指南](http://struts.apache.org/2.x/docs/guides.html)；如果您不知道“包”和“命名空间”属性的含义，那么 IMO 您应该退后一步，尝试了解一些基础知识，然后再将代码和配置随机扔到 Web 容器中。

# javascript - Sencha Touch localstore 代理在删除记录后不删除索引

> ID：10863204
> 
> 赞同：15
> 
> 时间：2012-06-02T14:39:04.943
> 
> 标签：javascript, touch, extjs

我在使用 Sencha Touch 数据存储和本地代理时遇到了一些问题。基本上，当一条记录从 store 中移除时，使用 store.remove(record) 方法，记录本身会从内存中移除，但是 store 中对它的 Id 引用并没有移除，所以当页面刷新时，我收到一个可爱的“未捕获的类型错误：无法读取未定义的属性‘isModel’”

这是商店的代码：

```
Ext.define("App.store.Data", {
    extend: "Ext.data.Store",
    requires: "Ext.data.proxy.LocalStorage",
    config: {
        model: "App.model.Data",
        autoSync: true,
        proxy: {
            type: 'localstorage',
            id: 'app-store'
        }
    }
}); 
```

这是数据编辑器页面上删除按钮的代码

```
onDeleteHomeworkCommand: function () {

    var dataEditor = this.getDataEditor();
    var currentData = dataEditor.getRecord();
    var dataStore = Ext.getStore("Data");

    dataStore.remove(currentData);
    dataStore.sync();

    this.activateDataList();
}, 
```

**编辑：**

这是调用 remove 方法之前数据存储的屏幕截图： ![在此处输入图像描述](../Images/5bf22391c001114dbf9f805a307ef320.png)

这是之后的一个： ![在此处输入图像描述](../Images/502aa3318ace72d7feb0d67f14a66529.png)

请注意，ID 仍然保留在商店的列表中，这在刷新页面时给了我未定义的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:44:51.403

问题在于，当您删除记录时，本地存储代理不会从其内部 ID 列表中删除该 ID。如果您使用 destroy() 显式销毁代理中的记录，则可以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:19:24.680

这是`localstorage`代理和`stores`sencha touch 的一个已知问题，因为默认 sencha 将*id 设为 int*，因此当它们不是时就会出现问题。我在其中一个 sencha 论坛中找到了解决此问题的方法，它对我有用，
这是该线程的链接[http://www.sencha.com/forum/showthread.php?151741-remove-record-from- localstorage](http://www.sencha.com/forum/showthread.php?151741-remove-record-from-localstorage)
和解决方案是在 sencha touch 的源代码中编辑一行代码，就这样

现在我解决了 ID 未被清理的问题。

有一个 getID 的使用，它返回一个 Int 但 ids 列表是一个字符串数组

```
//This line doesn't work circa 32196
Ext.Array.remove(newIds, records[i].getId());

//Replace it with this one works fine.
Ext.Array.remove(ids, records[i].getId().toString()); 
```

这可能是因为我的模型使用了“int”类型的“id”，因为这是我认为文档建议的，但我可能是错的..看看

# php - 在 Perl 程序中使用 linux 命令，并通过 php exec() 使用 Perl

> ID：10863205
> 
> 赞同：1
> 
> 时间：2012-06-02T14:39:08.377
> 
> 标签：php, linux, perl, system, exec

我正在创建一个允许我在题字后自动创建用户的系统。通过这种方式，我制作了一个生成随机密码的 Perl 脚本，使用“mkpasswd”对其进行加密，然后使用“useradd”创建一个用户，然后将用户信息发送到数据库。

我搜索了文档，并尝试使用 php exec 函数来调用 Perl 程序。

```
$command = "/server/backoffice/scripts/usercreation.pl $username";
exec($command, $result);
print_r($result); 
```

usercreation.pl 脚本在终端中运行良好，但由于未知原因，它无法在 php 中运行，没有任何反应，我知道问题来自 useradd 语法，或者如果不是来自 useradd 命令。返回的错误值为 255 <=> 0xff <=> -1 。

我认为问题来自 useradd 的 --password 选项，事实上，这个选项使用 mkpasswd 并且可能会干扰 shell 或其他类似的东西：p

Perl 程序使用的完整 useradd 命令：

```
system("/usr/sbin/useradd $username -m -d $home --expiredate $expire --shell $shell --gid $gid --password $c_password"); 
```

**编辑：** pastebin 上的 usercreation.pl 文件（已被截断为我们正在调查的部分）： [http ://pastebin.com/DgFdndXf](http://pastebin.com/DgFdndXf)

php 一： http: [//pastebin.com/pQhADNzg](http://pastebin.com/pQhADNzg)

使用的 Web 服务器是 nginx/0.7.65。

使用的 php 版本是 PHP 5.3.3-1。

```
uname -a 
```

`Linux openco 2.6.35-32-generic #67-Ubuntu SMP Mon Mar 5 19:35:26 UTC 2012 i686 GNU/Linux`

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:51:30.153

`useradd`必须以 root 身份运行，因此您需要指定`sudo`nginx 可以以 root 身份运行您的脚本。

对这些东西要非常小心；确保您清理用户名并正确转义您的命令以及使用`escapeshellarg()`.

# javascript - 从 Drupal 7 中的模块 .js 文件调用全局 JS 函数

> ID：10863207
> 
> 赞同：0
> 
> 时间：2012-06-02T14:39:24.417
> 
> 标签：javascript, drupal, drupal-7

[在Sk8erPeter](https://stackoverflow.com/questions/10856769/execute-javascript-on-node-creation-of-a-specific-content-type)的大力帮助下，我设法在 Drupal 7 中执行有关节点创建和特定内容类型的节点更新的 Javascript 代码。

我现在的问题是我不能从这个模块的js文件中调用函数FB.api。它与 Javascript 命名空间有关吗？从控制台运行 FB.api() 函数可以正常工作...

提前感谢您的帮助。

尼尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:19:55.883

根据您的评论...我只是在看您的，它甚至与我[在另一个主题中](https://stackoverflow.com/a/10858345/517705)[`testModule.behaviors.js`](http://www.share-a-tear.com/sites/all/modules/testModule/js/testModule.behaviors.js)写给您的功能看起来都不相似。

您当前的代码只是这样的：

```
FB.api(
    '/me/shareatear:share',
    'post',
    { tear: document.URL },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('done. ' + response.id);
       }
    }); 
```

在哪里`Drupal.behaviors`，`attach`我之前向您展示了它的功能？所有其他的东西在哪里？:)
当前代码输出错误甚至不足为奇，因为我认为这个 JavaScript 文件甚至在定义对象**之前**`FB`就已包含在内，这样您就可以直接**在 header 中**调用此代码。

我认为您的`testModule.behaviors.js`文件应该如下所示（基于我们之前讨论的代码）：

```
(function ($) {
    Drupal.behaviors.testModule = {
        doitnow: function () {
            alert("A new \"tear\" content has just been added!");

            // change this code to the appropriate one
            FB.api('/me/shareatear:share', 'post', {
                tear: document.URL
            }, function (response) {
                if (!response || response.error) {
                    alert('Error occured');
                } else {
                    alert('done. ' + response.id);
                }
            });

        },

        attach: function (context, settings) {
            try {
                if (settings.testModule.tear_just_added) {
                    this.doitnow();
                }
            } catch (ex) {}
        }
    };
})(jQuery); 
```

所以替换你的当前内容（你只在`FB.api`没有任何[Drupal 特定行为](http://drupal.org/node/756722#behaviors "Drupal - JS 行为")“包装器”的情况下调用），并将其内容更改为这个。

* * *

编辑：

好的，尝试使用以下命令将这个模块的权重设置为更高一次`db_query()`，这样它的钩子就会比其他模块的钩子更晚被调用。将这些行放入代码后，保存文件，删除 Drupal 缓存，然后注释掉相应的行！它不需要在每个页面加载时一直运行！

```
/**
 * Implements hook_init()
 * @see http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_init/7
 */
function testModule_init() {
    // after putting this in your file, save it, delete cache, then COMMENT OUT THE FOLLOWING LINE!!! It should only RUN ONCE (it's enough).
    db_query("UPDATE {system} SET weight = 111 WHERE type = 'module' AND name = 'testModule'");
} 
```

# actionscript-3 - 如何使用参数制作 MXML 组件构造函数？

> ID：10863209
> 
> 赞同：0
> 
> 时间：2012-06-02T14:39:50.190
> 
> 标签：actionscript-3, apache-flex, mxml, flex-spark

我是 flex 的新手，有人可以帮助我吗？

如何创建一个为 MXML 组件接受参数的构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:56:53.503

你不能；MXML 组件没有可以修改的构造函数。

你有几个选择。首先是重写您的组件以使用 ActionScript。这在某些情况下可能很乏味，而在其他情况下则微不足道。这取决于组件的作用。

第二个选项 os 在组件上使用公共变量。当您创建 MXML 组件的实例时，设置它的属性。您应该能够在预初始化事件处理程序中访问此类属性。prenitinialize 将在构造函数之后、createChildren() 之前调度。

# android - 如何在 ACTIVITY 类中创建更新 [NEWBIE]

> ID：10863211
> 
> 赞同：0
> 
> 时间：2012-06-02T14:40:26.710
> 
> 标签：android, sqlite

我正在尝试在 android 中开发我自己的应用程序，我想将信息更新到 DB 所以这里是我的代码 ////////DB/////////

//--更新记录--

```
public boolean updateRecords(long columnId, String nAME ,String sURNAME,String dateOfBirth, String homeAddress,String emailNO, String phoneNumber, String city,String type_payment, String type_shipping,String cardNumber,String username, String passwords )

     {

        ContentValues args = new ContentValues();

            args.put(COLUMN_NAME,nAME);
            args.put(COLUMN_SURNAME,sURNAME);
            args.put(COLUMN_DATE_OF_BIRTH,dateOfBirth);
            args.put(COLUMN_ADDRESS,homeAddress);
            args.put(COLUMN_EMAIL,emailNO);
            args.put(COLUMN_PHONE_NUMBER,phoneNumber);
            args.put(COLUMN_CITY,city);
            args.put(COLUMN_PTYE_PAYMENT,type_payment);
            args.put(COLUMN_SHIPPING_TYPE,type_shipping);
            args.put(COLUMN_CARD_NUMBER,cardNumber);
            args.put(COLUMN_username,username); 
            args.put(COLUMN_Password,passwords);

    return db.update(USERS_TABLE, args,COLUMN_ID + "= "+ columnId, null) > 0;

            } 
```

而我的 ACTIVITY CLASS 是这样的............

```
public void onClick(View v) {
        if(v.getId() == R.id.btnEditSave){

        Log.d("test", "edited");     

//get data from form

 EditText NAME = (EditText)findViewById(R.id.editTxtname);
   EditText SURNAME = (EditText)findViewById(R.id.editTxtSurname);
   EditText DateOfBirth = (EditText)findViewById(R.id.editTxtID);
    EditText HomeAddress = (EditText)findViewById(R.id.editTxtPAddress);
   EditText EmailNO = (EditText)findViewById(R.id.editTxtEmail);
   EditText PhoneNumber = (EditText)findViewById(R.id.editTxtNumber);
   EditText City = (EditText)findViewById(R.id.editTxtCity);
   EditText type_payment = (EditText)findViewById(R.id.editTextspinnerPayment);
  EditText type_shipping = (EditText)findViewById(R.id.editTextSpinnerShipping);
   EditText CardNumber = (EditText)findViewById(R.id.editTxtCardNumber);

EditText Username = (EditText)findViewById(R.id.editTxtUsername);
   EditText Passwords = (EditText)findViewById(R.id.editTxtPassword);

Cursor value = null ;
    db.open();
    Log.d("test", "opened database"); 

    long columnId = value.getLong(value.getColumnIndex("ID"));
    //boolean
    if( db.updateRecords(columnId, NAME.getText().toString(),
                         SURNAME.getText().toString(),
                         DateOfBirth.getText().toString(),
                         HomeAddress.getText().toString(),
                         EmailNO.getText().toString(),
                         PhoneNumber.getText().toString(), 
                         City.getText().toString(), 
                         type_payment.getText().toString(),
                         type_shipping.getText().toString(),
                         CardNumber.getText().toString(), 
                         Username.getText().toString(),
                         Passwords.getText().toString())); 

              else
              {
    Toast.makeText(this,"Failed",Toast.LENGTH_LONG).show();

              }

db.close(); 
```

而且我在 logcast 中遇到错误.......

```
06-02 16:29:48.518: D/dalvikvm(12573): GC_CONCURRENT freed 6K, 5% free 7179K/7495K, paused 7ms+5ms
06-02 16:30:03.218: D/test(12573): edited
06-02 16:30:03.278: D/test(12573): opened database
06-02 16:30:03.278: D/AndroidRuntime(12573): Shutting down VM
06-02 16:30:03.278: W/dalvikvm(12573): threadid=1: thread exiting with uncaught exception (group=0x40014760)
06-02 16:30:03.320: E/AndroidRuntime(12573): FATAL EXCEPTION: main
06-02 16:30:03.320: E/AndroidRuntime(12573): java.lang.NullPointerException
06-02 16:30:03.320: E/AndroidRuntime(12573):    at com.sdc.editpersonalinfo.onClick(editpersonalinfo.java:119)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at android.view.View.performClick(View.java:3110)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at android.view.View$PerformClick.run(View.java:11928)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at android.os.Handler.handleCallback(Handler.java:587)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at android.os.Looper.loop(Looper.java:132)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at android.app.ActivityThread.main(ActivityThread.java:4025)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at java.lang.reflect.Method.invokeNative(Native Method)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at java.lang.reflect.Method.invoke(Method.java:491)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-02 16:30:03.320: E/AndroidRuntime(12573):    at dalvik.system.NativeStart.main(Native Method)
06-02 16:35:03.524: I/Process(12573): Sending signal. PID: 12573 SIG: 9
06-02 16:35:05.550: V/TLINE(13716): new: android.text.TextLine@40684488
06-02 16:35:06.151: V/TLINE(13716): new: android.text.TextLine@406894b0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:47:00.337

在这里，您将“值”初始化为 null 然后使用它，所以我认为您的 NullPointerException：

```
Cursor value = null ;
db.open();
Log.d("test", "opened database"); 

long columnId = value.getLong(value.getColumnIndex("ID")); 
```

如果您查看本教程，也许这是一个好主意：

[http://developer.android.com/resources/tutorials/notepad/index.html](http://developer.android.com/resources/tutorials/notepad/index.html)

在练习 1 中，他们解释了如何在 Android 中处理 sqlite 数据库。

# c# - 使用特定格式的十进制转换

> ID：10863214
> 
> 赞同：0
> 
> 时间：2012-06-02T14:40:46.073
> 
> 标签：c#, asp.net, c#-4.0, gridview, string-formatting

我在我的数据网格中使用以下格式。我的本地机器给了我想要的结果：

```
105,000.42 
```

但在服务器上，它给了我：

```
1,05,000.42 
```

请帮我解决这个错误。

这是我的部分代码：

```
<asp:Label ID="lblibilling" runat="server" 
     Text='<%#Bind( CultureInfo.InvariantCulture,"pbilling","{0:0,0.00}") %>' >
</asp:Label> 
```

我无法修复此错误。请帮我解决它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:45:55.003

尝试以下操作：

```
<asp:Label ID="lblibilling" runat="server" 
    Text='<%#Bind( CultureInfo.InvariantCulture,"pbilling","{0:#,0,,.00}") %>' >
</asp:Label> 
```

我从我做的一个项目中复制了它

# android - Android：插入行时SQLite没有这样的表

> ID：10863217
> 
> 赞同：0
> 
> 时间：2012-06-02T14:41:40.157
> 
> 标签：android, sql, database

我试图在首次创建数据库时将行插入数据库。

```
@Override
    public void onCreate(SQLiteDatabase db) {
        // Only uses this method when the database is first created.
        //Sets up the database - telling it the table name and all
        //the column names.
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_REPS + " TEXT NOT NULL, " +
                KEY_ABS + " TEXT NOT NULL);"    
        );

        db.execSQL("INSERT INTO DATABASE_TABLE(KEY_REPS, KEY_ABS) VALUES ('25', 'Reverse Crunches' );" );
        db.execSQL("INSERT INTO DATABASE_TABLE(KEY_REPS, KEY_ABS) VALUES ('25', 'Crunches' );" );
        db.execSQL("INSERT INTO DATABASE_TABLE(KEY_REPS, KEY_ABS) VALUES ('1 minutes', 'Plank' );" );
        db.execSQL("INSERT INTO DATABASE_TABLE(KEY_REPS, KEY_ABS) VALUES ('30', 'Toe Touches' );" );
        db.execSQL("INSERT INTO DATABASE_TABLE(KEY_REPS, KEY_ABS) VALUES ('50', 'Russian Twists' );" );

    } 
```

如果我在那里没有插入调用，数据库创建得很好，我可以添加它，查看它等等。但是，由于某种原因，当我尝试在创建时调用插入数据时，我得到一个错误“不这样的表”。

我尝试将插入调用放入一个名为 Populate 的单独方法中，并在我的主要活动中调用它，但这也会产生错误。

不知道我做错了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:45:17.990

而不是使用命名表的字符串（由`DATABASE_TABLE`String 变量表示） ，而是`"DATABASE_TABLE"`直接使用字符串（这对数据库没有任何意义，因为您没有表`DATABASE_TABLE`）。像这样更新您的插入调用：

```
db.execSQL("INSERT INTO " + DATABASE_TABLE + "(" + KEY_REPS +", " + KEY_ABS + ") VALUES ('25', 'Reverse Crunches' );" ); 
```

对于其他插入调用也是如此（看看您如何声明创建 sql 字符串）。进行此修改后，卸载您的应用并重新安装，以便`SQLiteOpenHelper`.

# python - 尝试使用 getp 检索 matplotlib.lines.Line2D 对象属性时出错

> ID：10863219
> 
> 赞同：2
> 
> 时间：2012-06-02T14:42:49.020
> 
> 标签：python

我有一个使用 matplotlib.pyplot 绘制的点的句柄列表，如下所示：

```
import matplotlib.pyplot as plt
...

for i in range(0,len(z)):
    zh[i] = plt.plot(z[i].real, z[i].imag, 'go', ms=10)
    plt.setp(zh[i], markersize=10.0, markeredgewidth=1.0,markeredgecolor='k', markerfacecolor='g') 
```

我还想从代码中其他地方的句柄中提取 XData 和 YData（z[i].real 和 z[i].imag 到那时会改变）。但是，当我这样做时：

```
for i in range(1,len(zh)):
    print zh[i]
    zx = get(zh[i],'XData')
    zy = get(zh[i],'YData') 
```

我明白了（第一行是上面“print zh[i]”的结果）：

```
[<matplotlib.lines.Line2D object at 0x048FDA70>]

Exception in Tkinter callback
Traceback (most recent call last):
File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
  return self.func(*args)
...
File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 1130, in getp
  func = getattr(obj, 'get_' + property)
AttributeError: 'list' object has no attribute 'get_XData' 
```

### 编辑

我将问题简化为：

```
new_handler = plt.plot(0.5, 0, 'go', ms=10)
plt.setp(new_handler, markersize=10.0, markeredgewidth=1.0,markeredgecolor='k',markerfacecolor='g',picker=5)
print plt.getp(new_handler,'xdata') 
```

还是一样的错误：

```
AttributeError: 'list' object has no attribute 'get_xdata' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:05:21.603

这是解决方案：

```
import matplotlib.pyplot as plt

# plot returns a list, therefore we must have a COMMA after new_handler
new_handler, = plt.plot(0.5, 0, 'go', ms=10)

# new_handler now contains a Line2D object
# and the appropriate way to get data from it is therefore:
xdata, ydata = new_handler.get_data()
print xdata

# output:
# [ 0.5] 
```

答案隐藏在[Line2D API 文档](http://matplotlib.sourceforge.net/api/artist_api.html?highlight=line2d#matplotlib.lines.Line2D)中——我希望这会有所帮助。

# android - AdMob 不会展示广告

> ID：10863220
> 
> 赞同：0
> 
> 时间：2012-06-02T14:42:49.660
> 
> 标签：android, networking, ads, logcat, adview

我将 admob 放在应用程序中，并对其进行了测试，它在模拟器和广告显示中运行良好，但是当我尝试检查它是否在我的手机上运行时，广告不显示，并且我在 logcat 中收到以下错误消息：

```
06-02 10:30:58.405: W/Ads(6148): IOException connecting to ad url.
06-02 10:30:58.405: W/Ads(6148): java.net.ConnectException: failed to connect to googleads.g.doubleclick.net/127.0.0.1 (port 80): connect failed: ECONNREFUSED (Connection refused)
06-02 10:30:58.405: W/Ads(6148):    at libcore.io.IoBridge.connect(IoBridge.java:114)
06-02 10:30:58.405: W/Ads(6148):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
06-02 10:30:58.405: W/Ads(6148):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
06-02 10:30:58.405: W/Ads(6148):    at java.net.Socket.connect(Socket.java:842)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
06-02 10:30:58.405: W/Ads(6148):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
06-02 10:30:58.405: W/Ads(6148):    at com.google.ads.internal.f.b(SourceFile:428)
06-02 10:30:58.405: W/Ads(6148):    at com.google.ads.internal.f.run(SourceFile:399)
06-02 10:30:58.405: W/Ads(6148):    at java.lang.Thread.run(Thread.java:856)
06-02 10:30:58.405: W/Ads(6148): Caused by: libcore.io.ErrnoException: connect failed:
.................. 
```

手机已连接到 wifi，并且互联网工作正常。

编辑：它不起作用的原因是因为我正在运行自定义 rom 并且它阻止了所有广告，解决方法是编辑主机文件并从中删除所有广告拦截！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:04:32.013

这是您手机方面的问题，而不是您的代码 IMO，请尝试启用飞行模式几秒钟然后禁用它。

# css - 提交按钮 CSS 样式在 Mac 和 Windows 之间不同

> ID：10863224
> 
> 赞同：1
> 
> 时间：2012-06-02T14:43:17.617
> 
> 标签：css, macos, button, stylesheet, reset

我有一个我正在尝试使用 Ajax 构建的[小型演示联系表。](http://byjakewithlove.com/code/ajax-contact-form/)当我去设置提交按钮的样式时，它会正确地使用填充和字体大小。然而，在我运行 OSX Lion 的 Macbook 上，该按钮仍然看起来是默认的，没有填充，没有更大的字体大小等。

我经历过几次，我不知道如何解决这个问题。CSS 样式通常适用于所有操作系统，这让我陷入了循环......

这是从两台计算机上截取的两个图像屏幕截图，因此您可以了解我的意思。

**Windows 7的**

![WIN7](../Images/1de66e4f4511d5923ffcd2b7814e9648.png)

**OS X 狮子**

![Mac OS X](../Images/830c43fb4e6f572571d4187a9eb00a76.png)

我应该使用特殊的属性规则来重置 Mac 样式吗？我只想编辑提交按钮的字体大小、填充、颜色等。它在所有浏览器中的行为也是如此。

非常感谢您对此的任何帮助！

编辑：这是我的代码

```
<input type="submit" name="submit" value="Send E-mail" id="sendbtn" class="sendbtn"> 
```

**CSS 文件**

```
form .sendbtn { display: block; font-size: 26px; padding: 3px 6px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:58:35.020

目前，您没有指定任何可以使您的按钮在浏览器中相同的样式。操作系统下的每个浏览器都使用按钮的**默认样式**（如果有的话，也会受到主题的影响）。您需要指定更多内容，例如`background`, `color`,`border`等。

例如，这在浏览器中应该看起来相同：

```
form .sendbtn {
  display: block; 
  font-size: 26px; 
  padding: 3px 6px; 
  background:#eee;
  color:blue;
  border:none; /* or whatever */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:56:26.367

如果您将边框或背景属性添加到按钮的 css，它将起作用。

# java - ActionListener 的问题

> ID：10863226
> 
> 赞同：-3
> 
> 时间：2012-06-02T14:43:37.520
> 
> 标签：java, message

我运行此脚本，当我单击添加时，它可以工作并添加 2 个框，但是当我单击任何其他按钮时，它不会打开带有答案的框。我不知道为什么消息框没有打开其中任何一个的答案，但添加的任何人都可以解释并告诉我修复。编码：

```
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JTextField;

public class Gui extends JFrame{

    private JButton reg;
    private JButton reg2;
    private JButton reg3;
    private JButton reg4;
    private JTextField text;
    private JTextField text2;
    private JTextField text3;
    private JTextField text4;
    private JTextField text5;
    private JTextField text6;
    private JTextField text7;
    private JTextField text8;

    public Gui(){
        super("Buttons");
        setLayout(new FlowLayout());

        text = new JTextField(20);
        text2 = new JTextField(20);
        text3 = new JTextField(20);
        text4 = new JTextField(20);
        text5 = new JTextField(20);
        text6 = new JTextField(20);
        text7 = new JTextField(20);
        text8 = new JTextField(20);
        reg = new JButton("Add");
        reg2 = new JButton("Divide");
        reg3 = new JButton("Multiply");
        reg4 = new JButton("Subtract");

        add(text);
        add(text2);
        add(reg);
        add(text3);
        add(text4);
        add(reg2);
        add(text5);
        add(text6);
        add(reg3);
        add(text7);
        add(text8);
        add(reg4);

        handlerClass handler = new handlerClass();
        reg.addActionListener(handler);
        reg2.addActionListener(handler);
        reg3.addActionListener(handler);
        reg4.addActionListener(handler);

    }

    public class handlerClass implements ActionListener{
        public void actionPerformed(ActionEvent event){
            String st = text.getText();
            String st2 = text.getText();
            String st3 = text.getText();
            String st4 = text.getText();
            String st5 = text.getText();
            String st6 = text.getText();
            String st7 = text.getText();
            String st8 = text.getText();

            int txt1 = Integer.parseInt(st);
            int txt2 = Integer.parseInt(st2);
            int txt3 = Integer.parseInt(st3);
            int txt4 = Integer.parseInt(st4);
            int txt5 = Integer.parseInt(st5);
            int txt6 = Integer.parseInt(st6);
            int txt7 = Integer.parseInt(st7);
            int txt8 = Integer.parseInt(st8);

            if(event.getActionCommand()=="Add"){
                int add=txt1+txt2;
                JOptionPane.showMessageDialog(null, String.format("Answer: %s", add));
            }

            if(event.getActionCommand()=="Divide"){
                if(txt4>0){
                    int add2=txt3/txt4;
                        JOptionPane.showMessageDialog(null, String.format("Answer: %s", add2));
                }else{
                JOptionPane.showMessageDialog(null, String.format("Cannot divide by zero"));
                }
            }

            if(event.getActionCommand()=="Multiply"){
                int add3=txt5*txt6;
                JOptionPane.showMessageDialog(null, String.format("Answer: %s", add3));
            }

            if(event.getActionCommand()=="Subtract"){
                int add4=txt7-txt8;
                JOptionPane.showMessageDialog(null, String.format("Answer: %s", add4));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:52:05.123

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:58:48.607

`==`比较引用的相等性。

`.equals()`比较字符串的值。

```
if("Multiply".equals(event.getActionCommand()))
{

} 
```

# python - pkg_resources.DistributionNotFound：金字塔==1.3a7

> ID：10863227
> 
> 赞同：2
> 
> 时间：2012-06-02T14:43:40.097
> 
> 标签：python, pyramid, pkg-resources

所以，几天前，我试图用金字塔启动 Django，并在我的技能之外使用一些网络魔法，结果搞砸了很多重要的事情。有一段时间我什至无法运行 python。我最终通过更改我的系统变量 PYTHONHOME 来解决这个问题。

现在我遇到了 pserve 的问题。当我运行 pserve development.ini --reload 我得到一个回溯：

```
File "C:\env\Scripts\pserve-script.py", line 5, in <module>
   from pkg_resources import load_entry_point
File "build/bdist.linux-i686/egg/pkg_resources.py", line 2607, in <module>
File "build/bdist.linux-i686/egg/pkg_resources.py", line 565, in resolve
pkg_resources.DistributionNotFound: pyramid==1.3a7 
```

关于寻找什么的任何建议？我有两个朋友可以运行一切，所以如果有什么我应该比较的，我可以做到。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:13:41.423

我最终删除了环境变量 PYTHONHOME 和 PYTHONPATH 并且一切都像以前一样工作。

我认为由于这些系统变量，它正在查找一些不正确的目录，因此无法找到我的金字塔版本。

# javascript - XML DOM - for 循环在 IE9 中不起作用

> ID：10863232
> 
> 赞同：1
> 
> 时间：2012-06-02T14:44:08.960
> 
> 标签：javascript, html, xml, for-loop

这在 Chrome 中有效，但在 IE9 中无效。它从服务器上的 XML 文件加载数据。

下面是 index.html 文件中的代码：

```
 <div id="content"> 

            <script type="text/javascript">

            xmlDoc=loadXMLDoc("content.xml"); 
            var x=xmlDoc.getElementsByTagName("slot");
            for ( i=0; i<x.length; i++ ) {  

                 document.write("<div id='tables'>");

                 document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue + "<br />");
                 document.write(x[i].getElementsByTagName("type")[0].childNodes[0].nodeValue + "<br />");
                 document.write(x[i].getElementsByTagName("location")[0].childNodes[0].nodeValue  + "<br />");
                 document.write(x[i].getElementsByTagName("site")[0].childNodes[0].nodeValue  + "<br />"); 
                 document.write(x[i].getElementsByTagName("tot_power")[0].childNodes[0].nodeValue  + "<br />");
                 document.write(x[i].getElementsByTagName("proj_power")[0].childNodes[0].nodeValue  + "<br />");

                 document.write("</div>");

              }

            </script>

        </div> 
```

这是 loadXMLDoc.js：

```
function loadXMLDoc(dname)
{
 if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
 }
 else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
xmlhttp.open("GET",dname,false);
xmlhttp.send();
return xmlhttp.responseXML;
  } 
```

# jquery - 做了一个 AJAX 函数，但 jQuery 似乎没有响应它

> ID：10863234
> 
> 赞同：0
> 
> 时间：2012-06-02T14:44:29.553
> 
> 标签：jquery, ajax

我构建了一个非常基本的动态 AJAX 函数来使用 jQuery 将内容加载到当前页面。

我在一个非常通用的页面上对其进行了测试，并让它顺利运行，但是一旦我将此代码放入实际的生产站点，我就想要它，因为它只是不起作用。

我已经尝试了各种方法来让它工作，所以我不确定现在还能做什么。我有一种琐碎的感觉，我在生产站点中使用了错误的选择器。虽然这可能只是因为缺乏信心（初学者），但我实际上认为 jQuery 根本不起作用。

这是代码：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script> $(document).ready(function(){
        var a = $('article.announce');
        var s = $('#info li a');
        // You only need to change the above two pieces of code.    

            s.click(function(){
                var url = $(this).html(),
                    clicked = $(this).attr('data-id');

                    $(s+'[data-id='+clicked+']').click(function(){
                        a.load(url+'.html')

                    }); 
}); 
});</script> 
```

我试图定位的 HTML 如下：

```
 <aside id="info" class="clearfix">
<h1>About Us &gt;</h1>
<h2>Other Stuff:</h2>
<ul>
    <li><a href="#" data-id="1">About</a></li>
    <li><a href="#" data-id="2">Contact</a></li>
    <li><a href="#" data-id="3">Examples</a></li>

</ul>

</aside>
<article class="announce">
<p>Text to be replaced will be here!</p>

</article> 
```

希望我已经给了你足够的信息来看看这里出了什么问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:49:07.747

```
$(s+'[data-id='+clicked+']').click(function(){ 
                        a.load(url+'.html') 
                     }); 
```

s 在这里是对象，但它应该是字符串**并将其放在 s.click 函数之外**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:49:36.700

您正在使用 click inside click try ：

```
$(document).ready(function(){
   var a = $('article.announce');
   var s = $('#info li a');
   s.click(function(){
        var url = $(this).html();
        a.load(url+'.html')
      }); 
}); 
```

确保你的 html 文件的第一个字母是大写的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:38:52.930

更改 HTML 标记：

```
<aside id="info" class="clearfix">
    <h1>About Us &gt;</h1>
    <h2>Other Stuff:</h2>
    <ul>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="example.html">Examples</a></li>
    </ul>
</aside>

<article class="announce">
    <p>Text to be replaced will be here!</p>
</article> 
```

然后这样做：

```
$(function() {
    var a = $('.announce');
    $('#info li a').on('click', function(e) {
        e.preventDefault();
        a.load($(this).attr('href'));
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-02T14:56:11.533

[http://jsfiddle.net/83V4K/](http://jsfiddle.net/83V4K/)

您只需要 1 次点击事件。

```
var a = $('article.announce');
var s = $('#info li a');

s.click(function(){
    var url = $(this).
    a.load(url+'.html');
}); ​ 
```

# java - Java JTable创建行复选框来创建子表

> ID：10863235
> 
> 赞同：0
> 
> 时间：2012-06-02T14:44:31.737
> 
> 标签：java, swing, jtable, jcheckbox, abstracttablemodel

我有一个`JTable`使用`AbstractTableModel`. 我正在尝试使表格的第一行成为`JCheckboxes`.

编辑：目标是使用选中复选框的列并创建一个新表。这是我第一次尝试这样的事情，所以我愿意接受建议。

这是我在 NetBeans 7.1.1 中尝试的代码：

```
private void selectSourceCBActionPerformed(java.awt.event.ActionEvent evt) {                                           
        int sourceNum = selectSourceCB.getSelectedIndex();

        DataSource currentDS = datSourceArrList.get(sourceNum);
        final ArrayList<Object[]> workArrLst1 = currentDS.getSampSet();

        sourceDetailTable.setAutoResizeMode(sourceDetailTable.AUTO_RESIZE_OFF);
        sourceDetailTable.setColumnSelectionAllowed(true);
        JTableHeader header = sourceDetailTable.getTableHeader();

        AbstractTableModel mytable1 = new AbstractTableModel() {
        Object colNames[] = workArrLst1.get(0);

            @Override
            public int getRowCount() {
                return workArrLst1.size();
            }

            @Override
            public int getColumnCount() {
                return workArrLst1.get(1).length;
            }

            @Override
            public Object getValueAt(int rowIndex, int columnIndex) {
                return workArrLst1.get(rowIndex+1)[columnIndex];
             }

            @Override
            public void setValueAt(Object value, int row, int col) {
                if(row == 1){
                        workArrLst1.get(row)[col] = Boolean(false);
                        fireTableCellUpdated(row, col);
                }
            workArrLst1.get(row)[col] = (String) value;
            fireTableCellUpdated(row, col);
            }

            @Override
            public String getColumnName(int column) {
                return (String) colNames[column];
            }

        };    

    } 
```

我在这里有什么明显的遗漏吗？

# javascript - 谷歌地图 - 如何在数据库中保存位置？

> ID：10863237
> 
> 赞同：3
> 
> 时间：2012-06-02T14:44:42.213
> 
> 标签：javascript, google-maps

我最近开始研究谷歌地图。这是一个示例 html 代码：

```
<div id="locationContainer">
    <input id="startPT" type="text" size="50"/>
    <input id="wayPT" type="text" size="50"/>
    <input id="endPT" type="text" size="50"/>
</div> 
```

我在所有位置输入文本字段上附加了自动完成功能

现在，我有两个问题；

1.  如何将位置保存在 mySQL DB 中？我的意思是，我应该只保存第一次获取坐标然后保存的位置吗？
2.  在保存到数据库之前，我想验证该位置确实存在于 Google 地图中。这样我的系统就不会盲目地在 DB 中保存一些 xyz。

希望我的问题可以理解。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:57:55.247

1.在mysql数据库的2个不同字段中保存纬度经度似乎是最好的可能性。

2.如果该位置存在于世界上，则该位置存在于谷歌地图中。这可能会给你一个答案：[http ://answers.yahoo.com/question/index?qid=20071121075230AATuvo3](http://answers.yahoo.com/question/index?qid=20071121075230AATuvo3)

> 纬度最小值为 -90（南极），最大值为 90（北极）。0度纬度是赤道。
> 
> 经度的最小值为 -180（本初子午线以西），最大值为 180（本初子午线以东）。-180 和 180 是同一条线，从相反的方向接近

祝你好运

# java - 这是内存泄漏还是我刚刚达到我可以保留在内存中的对象的限制？

> ID：10863240
> 
> 赞同：0
> 
> 时间：2012-06-02T14:45:05.267
> 
> 标签：java, memory, substring

我有两个大型 CSV 文件，其中包含 Web 应用程序用户验证某些信息所需的数据。我定义了一个 ArrayList< String[] > 并打算将这两个文件的内容保存在内存中，这样我就不必每次用户登录并使用应用程序时都读取它们。

但是，在初始化应用程序并尝试读取第二个文件时，我得到了 java.lang.OutOfMemoryError: Java heap space。（它很好地完成了第一个文件的读取，但是在读取第二个文件时挂起，过了一会儿我得到了那个异常）

读取文件的代码非常简单：

```
ArrayList<String[]> tokenizedLines = new ArrayList<String[]>();

public void parseTokensFile() throws Exception {
    BufferedReader bRead = null;
    FileReader fRead = null;

    try {
        fRead = new FileReader(this.tokensFile);
        bRead = new BufferedReader(fRead);
        String line;
        while ((line = bRead.readLine()) != null) {
            tokenizedLines.add(StringUtils.split(line, fieldSeparator));
        }
    } catch (Exception e) {
        throw new Exception("Error parsing file.");
    } finally {
        bRead.close();
        fRead.close();
    }
} 
```

我读过Java的split函数在读取大量数据时可能会占用大量内存，因为子字符串函数引用了原始字符串，因此某些字符串的子字符串将占用与原始字符串相同的内存量，即使我们只需要几个字符，所以我做了一个简单的拆分函数来避免这种情况：

```
public String[] split(String inputString, String separator) {
    ArrayList<String> storage = new ArrayList<String>();
    String remainder = new String(inputString);
    int separatorLength = separator.length();
    while (remainder.length() > 0) {
        int nextOccurance = remainder.indexOf(separator);
        if (nextOccurance != -1) {
            storage.add(new String(remainder.substring(0, nextOccurance)));
            remainder = new String(remainder.substring(nextOccurance +  separatorLength));
        } else {
            break;
        }
    }

    storage.add(remainder);
    String[] tokenizedFields = storage.toArray(new String[storage.size()]);
    storage = null;

    return tokenizedFields;

} 
```

不过，这给了我同样的错误，所以我想知道这是否不是内存泄漏，而只是我不能在内存中有这么多对象的结构。一个文件长约 600,000 行，每行 5 个字段，另一个文件长约 900,000 行，每行字段数量大致相同。

完整的堆栈跟踪是：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at xxx.xxx.xxx.StringUtils.split(StringUtils.java:16)
    at xxx.xxx.xxx.GFTokensFile.parseTokensFile(GFTokensFile.java:36) 
```

那么，在长篇文章之后（对不起：P），这是对分配给我的 JVM 的内存量的限制，还是我遗漏了一些明显的东西并在某处浪费了资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:48:09.123

在具有 4GB RAM 的 32 位操作系统上，您的 JVM 不会超过 2GB。这是一个上限。

第二个是您在启动 JVM 时指定的最大堆大小。看看那个 -Xmx 参数。

第三个事实是，您*无法*将 X 单位的任何东西放入 X > Y 的 Y 大小的容器中。您知道文件的大小。尝试单独解析每个并查看它们正在消耗什么样的堆。

我建议你下载[Visual VM](http://visualvm.java.net/)，安装所有可用的插件，并让它在你的应用程序运行时监控它。您将能够看到整个堆、perm gen 空间、GC 收集、哪些对象占用了最多的内存等。

获取数据对于所有问题都是无价的，尤其是像这样的问题。没有它，你只是在猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:59:19.543

我在程序的原始版本中看不到存储泄漏。

类似方法可能泄漏大量存储的情况`split`相当有限：

1.  您不必保留对您拆分的原始字符串的引用。

2.  您需要保留对字符串拆分生成的字符串*子集的引用。*

调用时发生的情况`String.substring()`是它创建了一个新的 String 对象，该对象*共享*原始 String 的支持数组。如果原始 String 引用随后被垃圾回收，则子字符串 String 现在持有一个字符数组，其中包括不在子字符串“中”的字符。这可能是存储泄漏，具体取决于子字符串的保留时间。

在您的示例中，您将包含所有字符的字符串分开作为字段分隔符。很有可能这实际上*节省了*空间......与每个子字符串是独立字符串时使用的空间相比。当然，您的版本`split`不能解决问题也就不足为奇了。

我认为您需要增加堆大小，或者更改您的应用程序，以便它不需要同时将所有数据保存在内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T15:11:36.050

尝试改进您的代码或将数据处理留给数据库。

1.  内存使用量随文件大小而变大，因为代码会生成已处理数据的冗余副本。有一个*要处理*的一个已*处理*的和一些部分数据。String 是不可变的，请参见[此处](http://www.programmersheaven.com/2/FAQ-JAVA-String-Is-Immutable)，无需使用*new String(...)*来存储结果， split 已经完成了该副本。

2.  如果可以，将整个数据存储和搜索委托给数据库。CSV 文件很容易导入/导出到数据库，并且它们完成了所有艰苦的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T15:14:37.317

确保两个文件的总长度小于您的堆大小。您可以使用 JVM 选项设置最大堆大小`-Xmx`。

那么如果你有这么多的内容，也许你不应该把它完全加载到内存中。有一次我遇到了类似的问题，我使用一个将信息索引存储在大文件中的索引文件来修复它。然后我只需要在良好的偏移量处读取一行。

在你的 split 方法中也有一些奇怪的事情。

```
String remainder = new String(inputString); 
```

您不必`inputString`使用副本来保存，String 是不可变的，因此更改仅适用于 split 方法的范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T15:20:23.450

虽然我不建议您对正在做的事情进行实际的字符串实习，但使用该技术背后的想法怎么样？您可以使用 HashSet 或 HashMap 来确保您只使用单个 String 实例，只要您的数据包含相同的字符序列。我的意思是，数据中一定有某种重叠，对吧？

另一方面，您在这里看到的可能是堆碎片的坏情况。我不确定 JVM 是如何处理这些情况的，但是在 Microsoft CLR 中，较大的对象（尤其是数组）将被分配在一个单独的堆上。增长策略，例如 ArrayList 的策略将创建一个更大的数组，然后在释放对它的引用之前复制前一个数组的内容。大对象堆 (LOH) 未在 CLR 中压缩，因此这种增长策略将留下大量可用内存区域，ArrayList 无法再使用。

我不知道其中有多少适用于 Lava VM，但您可以尝试先使用 LinkedList 构建列表，然后将列表内容转储到 ArrayList 或直接转储到数组中。这样，大型行数组将只创建一次，而不会造成任何碎片。

# javascript - 如何获取表单名称Javascript

> ID：10863249
> 
> 赞同：0
> 
> 时间：2012-06-02T14:47:03.973
> 
> 标签：javascript, ajax, html

如何获取输入名称

这是我的代码

```
document.querySelector('input[type="file"]').addEventListener('change', function(e) {
    alert(e.name); //this is giving me undefined
    uploadFiles('upload.php', this.files, e.name);
}, false); 
```

第一个输入文件

```
<input type="file" class="textbox" name="webinar_image" id="webinar_logo" style="margin-top: 20px;" /> 
```

第二个输入文件

```
<input type="file" class="textbox" name="webinar_logo" id="webinar_logo"  style="margin-top: 20px;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:48:56.377

该元素`this`在事件处理程序中可用，因此请使用`this.name`.

# php - Jquery 和 PHP 会话

> ID：10863254
> 
> 赞同：0
> 
> 时间：2012-06-02T14:48:36.960
> 
> 标签：php, javascript, jquery

我在编写代码时正在学习 jquery，我需要对与会话相关的 jquery 做一些事情。html的代码如下：

```
<table class="match_table">
<tr id="10"><td class="timez">20:45</td><td>Valencia</td><td>:</td><td>Fulham</td></tr>
<tr id="11"><td class="timez">20:45</td><td>Crvena Zvezda </td><td>:</td><td>Rad</td></tr>
<tr id="12"><td class="timez">20:45</td><td>Vojvodina </td><td>:</td><td>Elche</td></tr>
<tr id="13"><td class="timez">20:45</td><td>Chelsea </td><td>:</td><td>Tottenham</td></tr>
</table>

<div id="triping">
<form id="triping_form">
<table class="popz">
<tr>
<td>1</td><td><input type="radio" name="opklada" value="1" /></td>
<td>X</td><td><input type="radio" name="opklada" value="2" /></td>
<td>2</td><td><input type="radio" name="opklada" value="3" /></td>
</tr>
<tr>
<td>0-2</td><td><input type="radio" name="opklada" value="4" /></td>
<td>3+</td><td><input type="radio" name="opklada" value="5" /></td>
<td>4+</td><td><input type="radio" name="opklada" value="6" /></td>
</tr>
</table>
<span id="toje" style="display:none"><img src="success.png" /></span>
<input type="hidden" name="match_id" id="hidin" />
<input type="submit" class="button-class" id="grauzame" />
</form>
</div> 
```

这是jQuery：

```
<script type="text/javascript">
      var current_id;
      $('.match_table tr').on('click', function() { 
            $("#triping").slideUp(300);
            $("#triping").slideDown(300);
            current_id = $(this).attr('id');
            $("#hidin").val(current_id);
            $("#toje").hide();
            $("#grauzame").show();
        });

    $("form#triping_form").on("submit", function() { 
        $.post("ajax.php", { match_id: $("#hidin").val() }, function(rez) { 
                    if(rez == 'ok') {
                        $("#grauzame").hide();
                        $("#toje").fadeIn(500);
                    }
        });
        return false;

    });
</script> 
```

现在，我现在将通过打开会话来模拟用户登录：

```
session_start();
$_SESSION['user_id'] = 12;
$_SESSION['username'] = 'eston'; 
```

我知道 jquery 不好，但它现在可以工作。我稍后会改进它。但关键是，登录用户可以点击提交按钮，他会得到确认图像。

当他点击提交时，我需要防止向客人发送消息，例如“您必须登录才能提交”。如何使它与会话一起工作，最好的方法是什么？我可能会弄清楚，但最好看看什么是最佳实践。但是现在欢迎任何解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:51:33.330

只需检查是否`$_SESSION['user_id']`存在。如果是 AJAX 请求，我通常会返回至少一个名为 result 的字段的 json。它可以是您的 jquery 代码可以使用的任何内容，例如“成功”和“失败”。

# jquery - 将 ASP 经典变量返回到 JQuery Ajax

> ID：10863256
> 
> 赞同：1
> 
> 时间：2012-06-02T14:48:50.617
> 
> 标签：jquery, ajax, asp-classic

我试图从下拉菜单中发送一些信息，当它更改为我想要获取信息的经典 Asp 操作页面时，根据需要对其进行格式化，然后返回最终变量值。一切都很好地提交给 Asp，但我得到一个空白值返回。

这是我的 jQuery

```
$.ajax({ 
    type: "POST", 
    url: "newslettercreate_action.asp", 
    data: { newsletter_publication: id_val, func_id: "1" },
    dataType: "html",
    success: function(theSite) {
    alert(theSite);
},
    error: function(){
    alert("fail");
}
           }); 
```

这是处理这些信息的 Asp

```
 thisQuery = ""
    set thisRS = dbAccessObj.DirectQuery("live", thisQuery)
    newsletter_list = thisRS("newsletter_list")
    newsletter_list_vals = Split(newsletter_list,"_")
    UBound(newsletter_list_vals)
    theSite = newsletter_list_vals(0) 
```

我稍微修改了 asp 代码以显示重要部分。我的最终目标是将 theSite 返回到 JQuery Ajax 以供以后使用，但正如我所说，它返回一个空白值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:29:29.770

你写出价值吗？我在您发布的代码中没有看到 Response.Write：

```
Response.Write(theSite) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T20:37:28.440

首先确保您在 ASP 页面上打印响应

```
response.write(some viariable) 
```

我遇到过同样的问题。在您的 Ajax 代码上，确保您设置为 GET 而不是 POST

# javascript - 简单的 Javascript 替换不起作用

> ID：10863257
> 
> 赞同：6
> 
> 时间：2012-06-02T14:48:52.867
> 
> 标签：javascript, replace

这看起来如此简单和微不足道，但它不起作用。这是我的javascript：

```
var url = "/computers/";
console.log(url);
url.replace(/\//gi, " ");
console.log(url); 
```

这是我的浏览器控制台中的输出：

```
/computers/
/computers/ 
```

如您所见，没有任何变化。从代码中可以看出，我正在尝试用空格替换正斜杠。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-02T14:49:56.577

```
url = url.replace(/\//gi, " "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:51:06.513

没有任何变化，因为您没有将替换结果分配给变量。添加`url = url.replace()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:51:23.490

`url.replace(/\//gi, " ");`返回结果字符串（在 javascript 中你不能修改现有字符串），你没有将它分配给任何东西

像这样分配它：

```
url = url.replace(/\//gi, " "); 
```

# mysql - 是否可以在 MySQL 中使用表达式作为默认值创建列？

> ID：10863263
> 
> 赞同：2
> 
> 时间：2012-06-02T14:49:29.040
> 
> 标签：mysql, sql

如何在 MySQL 中实现这一点：

```
CREATE TABLE employee (
  employeemonthly DECIMAL(10,2), 
  employeeyearly DECIMAL(10,2) DEFAULT employeemonthly*12
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:54:03.470

为此使用插入触发器。像这样的东西

```
DELIMITER |

CREATE TRIGGER default_yearly BEFORE INSERT ON employee
  FOR EACH ROW BEGIN   
    SET NEW.employeeyearly = NEW.employeemonthly * 12;
  END;
|

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T14:59:08.173

我会使用一个[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)：

```
CREATE VIEW vemployees AS
  SELECT e.employeemonthly,
         e.employeemonthly * 12 AS employeeyearly
    FROM EMPLOYEE e 
```

...因为几乎不需要专门为易于计算的值分配存储空间。否则，使用函数或简单地将表达式写入您需要的任何查询/存储过程。

真正取决于的是：

*   您需要多久访问一次这些数据
*   获得所需结果的操作有多复杂

我建议从不存储值开始。如果性能成为问题，则专门为值存储列 - 而不是之前。那时，当您可以使用（伪代码）时，触发器对我来说有点矫枉过正：

```
INSERT INTO employee 
  (...employeemonthly, employeeyearly, ...)
VALUES
  (...@employeemonthly, @employeemonthly * 12, ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T14:52:25.733

[为插入事件](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)使用触发器，使用 NEW 访问新记录数据并设置适当的值。

# javascript - PyDev Eclipse 项目中没有 JavaScript 自动完成

> ID：10863264
> 
> 赞同：3
> 
> 时间：2012-06-02T14:49:32.083
> 
> 标签：javascript, eclipse, autocomplete, pydev, jsdt

我有带有 PyDev 和 JavaScript 开发工具 (JSDT) 的 Eclipse。我正在使用这个环境来开发 Web 应用程序。

Python、HTML 和 CSS 编辑器都工作正常：突出显示和自动完成工作。JavaScript 突出显示也有效，**但 JavaScript 自动完成不起作用**。

切换到 JavaScript 透视图没有帮助。

但是，如果我创建一个单独的`JavaScript Project`（而不是将 JavaScript 文件添加到我的 PyDev 项目中），JavaScript 自动完成似乎可以正常工作。

**额外细节**

当我创建一个Eclipse时，默认情况下会向项目`JavaScript Project`添加某些内容。`JavaScript Resources`例如，`ECMAScript Built-In Library`和`ECMA 3 Browser Support Library`。这些在`Script Explorer`窗口中可见，在`Project Properties -> JavaScript -> Libraries`.

问题是，`Project Properties -> JavaScript`在`PyDev Project`.

**问题：**`JavaScript Project`当不在 a 中时（即在 a中时） ，我需要做什么（例如配置）才能在 Eclipse 中自动完成 JavaScript `PyDev Project`？`PyDev Project`是否可以在 Eclipse中添加一个 JavaScript 透视图/（我不确定这到底是什么……） ？

我对 JavaScript 开发非常陌生（2 天），所以如果问题/解决方案微不足道，请先道歉！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:40:13.380

要将 JavaScript 添加到现有项目，请将其转换为“分面项目”类型，然后添加 JavaScript 分面；为此，请转到“项目”>“属性”。

![在此处输入图像描述](../Images/556a4f51bb86919754b97bcd1ae6efa7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T00:18:10.603

您应该先创建一个 javascript 项目，然后将其设为 PyDev 项目（右键单击它 > PyDev > 设置为 PyDev 项目）。

此外，如果您刚开始，您可能需要查看 Aptana Studio 3：[http](http://aptana.org/) ://aptana.org/ （它是一组 Eclipse 插件，具有用于 Web 开发的整个工具链，以及用于 javascript、html、css 的编辑器以及预安装的 PyDev）——请注意，您可以通过下载独立版本并指向现有工作区来检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T20:48:46.050

要将 JavaScript 添加到现有的 PyDev 项目（Daniel Sokolowski 的回答不适用于 Eclipse Neon 中的 PyDev。Facets 仅适用于 J2EE 项目——请参阅[eclipse 的有关项目 facets 的文档](https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.jst.j2ee.doc.user%2Ftopics%2Fcfacets.html "eclipse 在项目方面的文档")）：

1.  关闭日食。
2.  浏览到您的项目文件夹并使用文本编辑器打开 .project 文件。
3.  将以下内容添加`<natures>`到 pydev 性质旁边的标记中：`<nature>org.eclipse.wst.jsdt.core.jsNature</nature>`
4.  保存并重新打开您的项目。

然后我可以进入`Project > Properties > JavaScript > Include Path`并添加库以用于自动完成。自动完成和 JavaScript 编辑器保存操作都是从 PyDev 角度工作的。

这是在 Eclipse Neon 中。

# python - 空的 __init__.py 文件如何正确？

> ID：10863268
> 
> 赞同：38
> 
> 时间：2012-06-02T14:50:03.750
> 
> 标签：python

我的包中有几个空`__init__.py`文件。如果我将它们保持为空是否正确，或者我必须`pass`在其中放置一个？

是否有关于该主题的任何 PEP 或其他指南？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-02T14:51:42.850

空文件[非常好](http://docs.python.org/tutorial/modules.html#packages)：

> 需要这些`__init__.py`文件才能使 Python 将目录视为包含包；这样做是为了防止具有通用名称（例如字符串）的目录无意中隐藏了稍后出现在模块搜索路径上的有效模块。在最简单的情况下，`__init__.py`可以只是一个空文件，但它也可以执行包的初始化代码或设置`__all__`变量，稍后介绍。

根据您的计划，这是一个从包中的模块导入公共内容的好地方，这样人们就可以简单地使用`from yourpackage import whatever`，而不必使用`from yourpackage.somemodule import whatever`.

# ubuntu - 无法在 ubuntu 中使用 nano 和 vi 打开文件

> ID：10863269
> 
> 赞同：-1
> 
> 时间：2012-06-02T14:50:04.147
> 
> 标签：ubuntu

当我尝试在 ubuntu 中使用 nano 或 vi 打开文件时，它们只显示路径中存在的文件。

```
nano conf/hadoop-env.sh 
```

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:07:41.147

你确定你在正确的目录中吗？

运行`ls`。如果它显示一个`conf`文件夹，请运行`ls conf`. 虽然可能有`conf/hadoop-env.sh`某个地方，但它不在当前目录中

你应该在 找到它`<hadoop installation directory>/hadoop/conf/hadoop-env.sh`，但我不知道你在哪里安装了 hadoop。

# algorithm - 选择点变化的启发式

> ID：10863270
> 
> 赞同：0
> 
> 时间：2012-06-02T14:50:35.857
> 
> 标签：algorithm, heuristics

我目前正在尝试计算数据中的 N 个变化点。我已经根据左侧的 k 点和右侧的 k 点计算了要考虑的每个数据点的权重。

现在，我的问题如下：如果我选择例如具有最大权重的前 10 个数据点，它们几乎总是在同一个区域中。这是因为如果 x 具有最高权重，可能 x+1 和 x-1 将具有几乎相同的权重，因为它们分别基于相同的左侧和右侧 k-1 个点。

我在想的是搜索所有权重并在每个 M 点的桶中分析它们。对于每个桶，我会选择领导者，然后我会选择前 10 名领导者。这种启发式方法对您有意义吗？如果是这样，是否有任何快速实施？

谢谢。

# c++ - BreakIterators 的 ICU 实现代码

> ID：10863271
> 
> 赞同：0
> 
> 时间：2012-06-02T14:50:47.200
> 
> 标签：c++, icu

我正在寻找修改 ICU 源代码，但它对我来说非常难以理解，我无法找到我正在寻找的部分。

我希望找到有关 BreakIterators 实现的代码（并希望有一些解释性评论/文档）。有谁知道 ICU C++ 源代码在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:41:52.290

见[http://site.icu-project.org/repository](http://site.icu-project.org/repository)

特别是： [brkiter.cpp](http://source.icu-project.org/repos/icu/icu/trunk/source/common/brkiter.cpp)

# javascript - 延迟一些 jQuery 函数，直到所有图像完全加载

> ID：10863277
> 
> 赞同：1
> 
> 时间：2012-06-02T14:51:27.427
> 
> 标签：javascript, jquery

如何延迟一些 jQuery / JavaScript 函数，直到页面上的所有图像都完成加载？实际上，我所说的 jQuery 函数是用于设置 div 的偏移位置。问题是图像完全加载后页面会调整大小，因此偏移量是错误的。

对于 jQuery 函数，请参考这个问题：[Issues with Fixed div on bottom of page that stop at given place](https://stackoverflow.com/questions/10361143/issues-with-fixed-div-on-bottom-of-page-that-stops-at-given-place)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T14:53:02.260

您可以使用在`onload`加载所有图像或外部资源后运行的事件：

```
$(window).load(function(){
  // your code here, all images loaded
}); 
```

您还可以将`load`事件用于单个图像并在它们加载后运行您的代码：

```
$('img.ImageClass').load(function(){
  // The image loaded....
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T13:51:06.707

只需在变量下编写函数

```
function newfunction(){
//put all the stuff here
} 
```

之后在每个图像加载时调用此函数，例如

```
$('img').load(function(){
newfunction()
}) 
```

从此新函数将在每次加载新图像时调用。

# objective-c - 传递引用并从另一个控制器复制对象。物体不断消失

> ID：10863278
> 
> 赞同：0
> 
> 时间：2012-06-02T14:51:28.513
> 
> 标签：objective-c, xcode, macos

我知道这是一个相对简单的问题，但我就是不知道如何解决这个问题：

我的一个视图将收到一个 dragOperation 并且 performDragOperation 方法应该将 NSURL 传递给我的 AppDelegate ，它将它放在一个 mutArray ...

问题是，我传递了一个引用并且对象在 performDragOperation 完成的那一刻消失了。所以我尝试了几件事：

在执行拖动操作中：

```
//Puts the reference itself in the folderPaths Array
AppDelegate *appDelegate = [NSApp delegate];
[[appDelegate folderPaths] addObject:referenceTotheNSURLObject];
/* tried creating a NSString and putting it in too. Same result because local variables will disappear */ 
```

所以我在 AppDelegate 中创建了一个方法并尝试了不同的方法：

```
- (void)addFilePath:(NSURL *)filePath {
    NSURL *copyOfURL = [filePath copy];
    [[self folderPaths] addObject:copyOfURL];
} 
```

这对我来说是最有意义的，我能想到为什么这不起作用的唯一原因是，因为 copyOfURL 本身是一个指针，它指向一个 localObject，它会在 addFilePath 方法完成时消失？但我不允许使用

```
NSURL copyOfURL = [filePath copy]; 
```

我还尝试再次重新创建一个 NSString 对象。结果相同。

```
- (void)addFilePath:(NSURL *)filePath {
    NSString *pathString = [filePath absoluteString];
    [[self folderPaths] addObject:pathString];
} 
```

我知道这将是一些相对简单的解决方案，但我被卡住了，无法弄清楚。谢谢你的时间！

# .net - NUnit：“夹具”-？

> ID：10863281
> 
> 赞同：1
> 
> 时间：2012-06-02T14:51:41.773
> 
> 标签：.net, nunit

对不起我的英语不好。

我正在学习 NUnit 文档（[v 2.6](http://www.nunit.org/index.php?p=actionAttributes&r=2.6)），并将其翻译成俄语（[这里](http://nunit26.ildasm.com/)）。我无法正确翻译它：

> Assert.Ignore 方法为您提供了在运行时动态地导致测试或套件被忽略的能力。它可以在测试、设置或**夹具**设置方法中调用。

和

> Fixture - 表示用户的对象**fixture**（如果可用）或 null

“夹具”……这个词把翻译的结果变成了无意义的。:((( 可能我翻译错了。“Fixture”这个词的意义同义词是什么？可以有一个“类”？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:20:53.533

[TestFixture] 装饰器只是意味着您的类包含测试代码。

所以回答你的问题；所指的“夹具”是包含您的单元测试的类。

查看[http://www.nunit.org/index.php?p=quickStart&r=2.6.2](http://www.nunit.org/index.php?p=quickStart&r=2.6.2)我们有：

> 关于这个类，首先要注意的是它有一个与之关联的 [TestFixture] 属性——这是表明该类包含测试代码的方式（这个属性可以被继承）。该类必须是公共的，并且对其超类没有限制。该类还必须有一个默认构造函数。

希望这可以帮助 ：）

# c - 在 C 中查找所有头文件和源文件依赖项的工具

> ID：10863285
> 
> 赞同：1
> 
> 时间：2012-06-02T14:51:52.310
> 
> 标签：c, dependencies

[我有一个 C 程序，它使用Gandalf C Machine Vision Library](http://gandalf-library.sourceforge.net/)的一小部分。有成千上万的源文件。有些是包含（.h 和 .c），有些依赖于链接器阶段。

我不想拥有一个单一的库。我想在我的源代码树中只包含所需的包含和源文件。我的测试项目在 VS2010 中，但我对所有选项持开放态度。

是否有可以用来检测包含和源文件依赖项的工具？

这个问题是我能找到的最接近的问题，但它只要求找到所有头文件依赖项：

[自动发现 C 依赖项](https://stackoverflow.com/questions/204823/automatically-discovering-c-dependencies)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:02:11.080

[Klocwork](http://www.klocwork.com/products/insight/?source=feature)有一个 On-the-Fly 源代码分析产品，可以找出冗余和未使用的头文件。看看它是否满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:46:43.183

我过去曾使用[检查头来](http://code.google.com/p/checkheaders/)查找多余的#include，而且它是免费的。

至于源（对象）文件的依赖关系，这是一个很难解决的问题。我已经在互联网的各个角落寻找这样的工具，但无济于事。这个[问题](https://stackoverflow.com/questions/10670409/automatically-generate-object-file-linker-dependencies-for-c-c-executables)总结了一种你可以通过编写自己的工具来做到这一点的方法。

# mysql - 根据表中的另一个字段选择某个字段

> ID：10863286
> 
> 赞同：0
> 
> 时间：2012-06-02T14:51:57.037
> 
> 标签：mysql, sql, sql-server

我使用了三张桌子，这证明这个问题超出了我的范围。

**第一个是看起来像这样的层次表**

```
USER_ID, USER_LEVEL, Store_Manager_ID, Team_Manager_ID
------------------------------------------------------
1, 0, -, -
2, 1, 1, -
3, 2, 1, 2
4, 2, 1, 2
5, 2, 1, 2 
```

这只是显示了用户的层次结构。所以用户 1 的级别为 0，这意味着他是商店经理，所以他上面没有商店经理，所以他的商店经理 id 什么都不是，团队经理显然什么都不是。第二个用户是团队经理，所以 level = 1，store manager 是 1（第一个人） 第三个，第四个和第五个分别是 1 和 2 岁以下的工人。

**第二个是一个看起来像这样的登录表**

```
USER_ID, EMAIL
--------------------------
1, john.smith@gmail.com
2, ron.jones@gmail.com
3, tom.graham@gmail.com
4, bill.small@gmail.com 
```

邮箱是登录名，没有密码。

**第三个是一个别名表，看起来像这样**

```
USER_ID, ALIAS_ID
--------------------
2, 5 
```

别名表显示了用户 5 是用户 2 的别名。所以他是同一个人并且具有相同的登录名。但是，他可以同时在层次结构中的两个位置，即同时是团队经理和工人。

我的问题是。如果我知道用户 2 将以他的别名登录，即登录前的工作人员。当用户2登录时，如何根据级别选择用户帐户的领导者ID。

例如，如果我在我的别名帐户下以 ron.jones@gmail.com（用户 2）身份登录。用户 2 的别名 id 是 5，基于层次结构，用户 5 是 2 级，即工人，所以我应该返回他的团队经理的 id，而不是他的商店经理。所以我会返回 2，即他自己（在这种情况下有点奇怪，但除此之外）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:09:16.060

这将给出您正在寻找的答案（如果我正确理解了这个问题）：

```
SELECT team_manager_id
FROM   hierarchy h
INNER JOIN aliases a ON h.user_id = a.alias_id 
INNER JOIN login l ON a.user_id = l.user_id
WHERE  email = 'ron.jones@gmail.com'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:22:38.077

如果我理解正确，您需要基于用户或用户别名的用户管理员。

以下查询执行两个连接，一个连接到用户表，一个连接到别名表：

```
SELECT team_manager_id
FROM h.user_id = a.alias_id INNER JOIN
     login l
     ON a.user_id = l.user_id join
     hierarchy huser
     on huser.user_id = a.alias_id join
     hierarchy halias
     on halias.user_id = l.user_id
WHERE l.email = 'ron.jones@gmail.com' and
      huser.team_manager_id is not null and
      halias.team_manager_id is not null 
```

它还检查经理是否不为空，只返回别名上的经理。这将返回所有此类管理器。您是否需要一个特定的，例如从最低级别的层次结构？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:03:44.853

```
Select user_ID, User_level, Store_Manager_ID, Team_Manager_ID 
FROM Hierachy H 
INNER JOIN Alias A on A.Alias_ID = H.User_Id
Where A.User_ID = 2 
```

假设：1 个用户的别名不超过 1 个，如果有，您将为同一用户返回多条记录。

假设您不关心层次结构中的记录 2，因为您所追求的只是 5。

# python - 如何在 Python C 扩展中巧妙地将 char[] 传递给 PyObject_CallMethod

> ID：10863288
> 
> 赞同：0
> 
> 时间：2012-06-02T14:52:02.987
> 
> 标签：python, python-c-extension

我有一个名为“m1”的python 对象，它有一个方法“coor()”。我将把它传递给 C"++" 扩展并在里面调用"coor()"。首先我试过：

```
PyArrayObject *coor = (PyArrayObject *) PyObject_CallMethod(m1,"coor","()",NULL); 
```

并发现以下尴尬的代码有效：

```
char t1[]="coor, t3[]="()";
PyArrayObject *coor = (PyArrayObject *) PyObject_CallMethod(m1,t1,t3,NULL); 
```

我相信有一种简单的方法可以做到这一点。对于初学者来说，这可能是一个关于 char[] 的 C 问题，感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:45:23.173

文档说：

> 格式可能是`NULL`，表示不提供任何参数。

此外，不需要数组。使您认为它需要数组的原因可能是字符串未声明为常量：

```
PyObject* PyObject_CallMethod(PyObject *o, char *method, char *format, ...) 
```

但是，它们实际上并没有被修改；[看源头](http://hg.python.org/cpython/file/01ab23aadca3/Objects/abstract.c#l2608)；`method`只传递给[`PyObject_GetAttrString`](http://docs.python.org/c-api/object.html#PyObject_GetAttrString)and [`PyErr_SetString`](http://docs.python.org/c-api/exceptions.html?highlight=pyerr_setstring#PyErr_SetString)，两者都取`const char *`s。`const char *`因此，将文字转换为应该是安全的`char *`，尽管真正的解决方案是 Python[将声明的参数类型更改为`const char *`](http://bugs.python.org/issue6952).

无论如何，话虽如此，这：

```
result = object.method() 
```

将大致转换为：

```
PyObject *result = PyObject_CallMethod(object, (char *)"method", NULL); 
```

# c# - C# 将泛型类型转换为正确的类型

> ID：10863291
> 
> 赞同：0
> 
> 时间：2012-06-02T14:52:09.897
> 
> 标签：c#, generics, casting

我有这些类和接口：

```
public class XContainer
{
    public List<IXAttribute> Attributes { get; set; }
}

public interface IXAttribute
{
    string Name { get; set; }
}

public interface IXAttribute<T> : IXAttribute
{
    T Value { get; set; }
}

public class XAttribute<T> : IXAttribute<T>
{
    public T Value { get; set; }
} 
```

我需要迭代 `XContainer.Attributes`并获取属性`Value`，但我需要转换`IXAttribute`为更正通用表示，例如`XAttribute<string>`or`XAttribute<int>`但我不想使用 if-else if-else 语句来检查它，例如 if `XContainerl.Attributes[0] is XAttribute<string>`then cast ...

这里有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:01:51.980

有更好的方法来做到这一点。

假设您**想**保留当前的整体设计，您可以更改您的非通用接口和实现，如下所示：

```
public interface IXAttribute
{
    string Name { get; set; }
    object GetValue();
}

public class XAttribute<T> : IXAttribute<T>
{
    public T Value { get; set; }

    public object GetValue()
    {
       return Value;
    }
} 
```

然后你的迭代器就可以访问`GetValue()`，不需要强制转换。

也就是说，我认为该设计可能不适合您正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:20:10.683

您还可以定义通用扩展方法

```
public static class XAttributeExtensions
{
    public T GetValueOrDefault<T>(this IXAttribute attr)
    {        
        var typedAttr = attr as IXAttribute<T>;
        if (typedAttr == null) {
            return default(T);
        }
        return typedAttr.Value;
    }
} 
```

然后你可以用（假设`T`是`int`）调用它

```
int value = myAttr.GetValueOrDefault<int>(); 
```

将其实现为扩展方法的原因是它可以与非通用接口的任何实现一起使用`IXAttribute`。

# ios - 如何仅在复合 UIView 的一部分应用 3d 透视变换？

> ID：10863295
> 
> 赞同：2
> 
> 时间：2012-06-02T14:52:44.227
> 
> 标签：ios, core-animation, calayer, cgimage, cabasicanimation

我有 UIView 和 UIImageViews、UILabels、UITextView。

我的目标是改变中间部分，使它看起来像折叠一张纸： - 顶部和底部保持不变，只是它们相互滑动 - 中间部分向屏幕折叠（如 Clear 应用程序：[http://blog .massivehealth.com/post/18563684407/clear?cbe4fc38](http://blog.massivehealth.com/post/18563684407/clear?cbe4fc38) )

我的想法是首先加载整个视图，然后分成 4 个部分，将中间两部分制作成 CGImage 并以某种方式对它们进行透视动画，同时同时变换顶部和底部，因此它们相互滑动（最后，中间两部分应该变成无形的）。

我也应该能够展开这个视图并滚动 UITextView。

我不是在寻找一个现成的答案，只是指向正确的解决方案。我遇到过 CALayer、CABasicAnimation 和 CGI​​mage，但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:59:16.103

我认为你的方法是合理的。由于您无法将转换应用于视图的一部分，因此您必须将容器视图拆分为单独的部分。您可以使用该`CALayer`方法`renderInContext:`将视图渲染为静态图像。然后，您可以将此图像拆分为您需要的部分，将图像部分放在原始视图上（或用图像替换视图）并对图像进行动画处理。动画完成后，以新形式恢复视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:28:10.510

几点建议：

1.  将您的图像转换`UIView`为图像：请参阅此[帖子](https://stackoverflow.com/questions/8192026/how-to-select-only-a-portion-of-uiview-for-converting-to-uiimage)；您可以拍摄 4 张视图的“快照”，或者：

    1.2 你拍一张，然后裁剪得到的图像（裁剪见[这里](https://stackoverflow.com/questions/158914/cropping-a-uiimage)）；

2.  创建一个新视图并添加 4 个 CALayers 作为子层`self.layer`；每一层都将其`contents`属性设置为相应的`UIImage`；

3.  根据需要为视图图层设置动画；查看[Leaves 框架中的这个文件，](https://github.com/brow/leaves/blob/master/Leaves/LeavesView.m)看看如何做到这一点；基本上，此代码使用 CATransaction 和转换来为图层的属性设置动画（在这种情况下，它表示一个图层相对于另一个图层的位置），因此当该属性值更改时，相应地重绘图层。

希望能帮助到你。

# delphi - 如何使用 TEdit 框输入密码而不显示输入的字符且仅显示 *

> ID：10863300
> 
> 赞同：4
> 
> 时间：2012-06-02T14:53:30.537
> 
> 标签：delphi, passwords, delphi-xe2, edit

我想制作一个用户必须输入密码的编辑框。当他们输入密码时，我希望不显示该字符，而是一个 *. 是否可以设置任何属性来执行此操作，我知道如何将 TEdit 设置为在输入时保持空白，但我不希望那样。我正在使用德尔福 XE2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T15:02:45.773

我记得我在 Delphi 的旧时光，TEdit 有一个属性。

在谷歌上搜索，我发现[了这个](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TCustomEdit.PasswordChar)

即：“使用 PasswordChar 属性创建一个编辑控件，该控件显示一个特殊字符来代替任何输入的文本。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T15:11:05.553

我已经看到在 TEdit 中有一个名为 PasswordChar 的属性。我为其分配了 * 值，现在编辑框不显示输入框中的字符

# c# - 是否可以为将在 asp.net 服务器而不是 javascript 块中运行的基本 html 按钮元素编写事件处理程序函数？

> ID：10863303
> 
> 赞同：0
> 
> 时间：2012-06-02T14:54:12.610
> 
> 标签：c#, asp.net

实际上我不需要它。但是我的脑海中浮现出一点好奇心，因为没有调用为在服务器中运行而编写的事件处理函数。我已经拖动了一个 html 按钮元素并将其放在属性 runat="server" 的表单元素中

现在，如果我双击设计视图内的按钮，它会将我重定向到创建事件处理函数的 javascript 块。我删除了它并在文件后面的代码中编写了我自己的。现在，当在服务器上运行页面并单击按钮时，不会调用事件处理函数。

我希望它运行。反正 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:24:00.703

您对两个不同的事件感到困惑：编辑器中提供的 onclick 是客户端点击事件，由 javascript 代码处理。
服务器端，基于 c# 的事件处理程序可以添加到这样的按钮，如果你用

```
runat="server" 
```

，属性并向其添加服务器端处理程序（假设 Button1 是您的按钮的 id）

```
Button1.ServerClick += new EventHandler(Button1_ServerClick); 
```

html 输入的标记不会公开服务器端事件以通过标记添加处理程序，但您可以在 page_load/init 事件中添加我在上面粘贴的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:13:57.637

你的按钮是什么样的？试试这个：

```
<button runat="server" ID="myButton" onClick="YourFunction">My Button</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:55:25.917

ASPX：

```
<button runat="server" id="htmlButton1" name="htmlButt" onserverclick="butt">
        foo</button> 
```

CS/代码隐藏：

```
protected void butt(object sender, EventArgs e)
{
    Response.Write("butt clicked!");
} 
```

您必须（手动）编写处理程序 - IDE 不会自动为您连接它（您自己使用**onserverclick 连接**它）。

# algorithm - 列表中第二大值的算法考试示例

> ID：10863305
> 
> 赞同：0
> 
> 时间：2012-06-02T14:54:57.107
> 
> 标签：algorithm, list, pseudocode

考试题是这样的：

> 对列表的常见操作是查找列表中的“最大”值。编写一个算法，它将在列表中找到“第二大”值。您可以假设该列表将包含至少 2 个值并且没有重复的值。不要将 C# 代码编写为您的答案，但算法的详细程度应适合用 C# 或任何其他编程语言实现。
> 
> 该算法不应使用任何提供的功能，例如 C# Array 类方法，如 Sort 等。还假定该算法将被实现为返回列表第二大值的位置和顺序的方法列表中的值保持不变。这意味着不能简单地按升序对数组进行排序并返回 ( `list.Length-2`)，因为它假定列表将通过引用传递给该方法。

我这样回答：

```
1)  define integer variables as i and j
2)  assume listValues is the list of values
3)  create a new list called values which is equal to listValues
4)  create a new list called largest
5)  i is equal to 0, j is equal to list length of “values” list
6)  a while loop which is:
    a)  while 1 <  j
    b)  if values[0] > values[j-1]:
        1)  new integer k, k = 0
        2)  while k < j - 1
            a)largest = largest + values[k]
            b)k = k + 1
        3)  values = largest
        4)  largest = empty list
    c) else: 
        1)  new integer l, l = j – 1
        2)  while l > 0
            a) largest = largest + values[l] 
            b) l = l – 1
        3)  values = largest
        4)  largest = empty list
7)  a while loop which is :
    a)  while i < j
    b)  if values[0] not equal to listValues[i]
        1)  largest = largest + listValues[i]
    c)  i = i + 1
8)  listValues = largest
9)  values = listValues
10)  largest = empty 
11) a while loop which is:
    a)  while 1 <  j
    b)  if values[0] > values[j-1]:
        1)  new integer k, k = 0
        2)  while k < j - 1
            a)  largest = largest + values[k]
            b)  k = k + 1
        3)  values = largest
        4)  largest = empty list
    c) else: 
        1)  new integer l, l = j – 1
        2)  while l > 0
            a)  largest = largest + values[l] 
            b)  l = l – 1
        3)  values = largest
        4)  largest = empty list
12)  return values[0] 
```

我知道这是低效的，我可以在 6 到 9 之间的循环之外添加另一个循环，但考虑到我的考试将是基于纸质的，因此很难编辑，所以我这样做了。但我担心的是这个答案是否正确。如果有人检查，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:57:49.033

这可以通过`O(n)`与查找最大元素相同的方式完成。只需保留两个变量 - 找到的最大元素和找到的第二大元素。考虑在遍历列表时如何更新这两个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:20:53.110

在 C 中

```
 int second_largest(int *arr, size_t len) {
      int i, j, k;
      assert(len > 1);
      k = (arr[0] > arr[1]) ? 0 : 1;
      i = arr[k];
      j = arr[1 - k];
      for (k = 2; k < len; k++)
      {
         if (arr[k] > i) { j = i;
                           i = arr[k]; }   
         else if (arr[k] > j) { j = arr[k]; }
      }
      return j;
   } 
```

# javascript - 浏览器渲染引擎：哪种策略最适合巨大的图像背景

> ID：10863307
> 
> 赞同：0
> 
> 时间：2012-06-02T14:55:37.440
> 
> 标签：javascript, html, browser, render

我有一个我正在计划的项目，它基于一种“交互式世界”风格的体验，浏览器视口四处移动以显示许多不同的图形环境，它必须都是流畅的，并且没有页面到页面的中断。项目在 js/html5/css3

这带来的问题是整个“世界”可能是 8-15,000 px 的平方（它也会旋转，并且上面有各种 png alpha 覆盖）

我打算进行一些测试，但是有很多方法可以解决这个问题，我正在寻找最流畅的方法。我对浏览器渲染引擎内部工作的了解不是很好，所以我想问问周围的人。

我不能使用谷歌地图使用的“平铺”方法，因为它不够流畅（太块状），当它旋转时也会让人头疼，做数学变换来计算出哪些瓷砖以什么角度加载所以这里是 2我将其归结为：

(1) “巨大”的图像方法 ![在此处输入图像描述](../Images/d713ff07eab95784a0e7af46ba0f4b7a.png)

这样做的好处是一旦加载，一切都很容易，缺点是它会很大，我无法显示增量预加载器，因为图像队列基本上是 2 个图像（叠加和巨大的 img）

(2) 图像片段

![在此处输入图像描述](../Images/b807a26f80bd6f4aa896fa08841f0da4.png)

好处是我可以以 10% 的增量显示带有图像队列的预加载器（10x 图像）

**问题：**

第二种方法是否会对浏览器的渲染引擎产生更痛苦的开销，因为要完成 9 组单独的计算，或者浏览器引擎是否只是在最初渲染后将它们视为一个绘制区域，然后将其作为一个整体进行更新？还是每次更改 dom（旋转等）时，浏览器必须运行相同的转换/重绘过程 9 次？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:58:26.500

后来进行了很多测试：结果：使用大图像，浏览器似乎处理得更少。

# asp.net-mvc-3 - .NET MVC 路由工作，除了一件

> ID：10863309
> 
> 赞同：1
> 
> 时间：2012-06-02T14:55:40.133
> 
> 标签：asp.net-mvc-3, model-view-controller, asp.net-mvc-routing

这里的帮助和建议很少。

在我的第一个 MVC 应用程序上工作，我有一个学生设置实体。
具有基本 CRUD 功能的学生控制器和视图。mysite.com/Student 让我到达那里。

现在我想添加 Payments，所以我添加了一个 Payments 控制器和带有基本 crud 的视图。这给了我 mysite.com/Payments

我希望付款转到如下所示的 URL：mysite.com/Student/Payments

所以我研究了 URL 路由，并且（我认为）我把它倒退了很长时间，因为似乎没有任何效果。但是现在，我创建了这条额外的路线：

```
 routes.MapRoute(
            "Payments",
            "Student/Payments/{action}/{id}",
            new { Controller = "Payments", action = "Index", id = UrlParameter.Optional }
            ); 
```

现在这一切似乎都正常工作。当我向支付控制器中的任何操作发送 ActionLink 时，URL 是正确的。例如：www.mysite.com/Student/Payments/Edit/5 作为 URL 出现。

我遇到的问题是 Payments 仍然是基本 URL 路由。所以我也可以通过访问 www.mysite.com/Payments 进行付款

如何“删除”该路线，以使 mysite.com/Payments 无效？还是我以某种方式做这一切？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:09:34.567

你的想法是扭曲的方式。映射配置只提供一个分层规则列表来指定特定 url 的代码所在的位置。

因此，当您说它仍在访问 mysite.com/Payments 时。那是因为它达到了 Global.asax 中的默认规则

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional} // Parameter defaults
            ); 
```

您可以删除它，但默认规则将不起作用。

或者您可以添加忽略规则。在你的情况下，像

```
 routes.IgnoreRoute("Payments/{action}/{id}"); 
```

确保将其置于默认规则之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:12:55.253

您需要为默认路由使用 MapRoute 方法的重载，即：

```
routes.MapRoute(  
  "Default",  
  "{controller}/{action}/{id}",  
  new { controller = "Home", action = "Index" },
  new { controller = ""}); //there constraints for controller goes 
```

看看[这篇关于创建自定义约束的博客文章](http://stephenwalther.com/blog/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)，有“不等于”的例子

# javascript - jQuery中不触发点击事件

> ID：10863312
> 
> 赞同：1
> 
> 时间：2012-06-02T14:55:59.817
> 
> 标签：javascript, jquery

我正在使用这样的 elementid 绑定 click 事件：

```
 $("#a").bind({click : dosomestuff }); 
```

之后，当我尝试使用如下`.trigger()`功能触发它时：

```
 $("#a").trigger("click"); 
```

该功能未触发。谁能告诉我这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:06:28.720

按可能性顺序可能出错的一些事情：

*   你没有把这段代码放在里面`$(function() { ... });`，所以元素还没有准备好。
*   该元素不存在（您可以通过开发者控制台检查）
*   未加载 jQuery
*   您稍后会故意创建元素；使用`.on()`而不是`.bind()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:06:26.453

如果您尝试将点击事件绑定到锚标记，那么您应该使用

```
 $("a").bind('click',function(){
     //do your stuff here
 } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:09:06.940

你可能不会把你的代码放在里面

```
$(function() {

}); 
```

或者

如果您`#a`处于动态状态，请尝试

```
$('document').on('click', '#a', dosomestuff); // it would be better to 
                                              // replace document with 
                                              // `#a`'s parent 
```

# maven - 如何在从 maven 运行码头之前重建依赖关系

> ID：10863313
> 
> 赞同：3
> 
> 时间：2012-06-02T14:56:01.913
> 
> 标签：maven, maven-jetty-plugin

我有一个多模块 Maven 项目。其中一个模块是一个可重用的部分，它被打包到一个 jar 中，另一个是一个 war web-app，它依赖于第一个模块。当我在第二个模块上使用 jetty:run-exploded 时，打包的 jar 来自本地 maven 存储库，而我希望重建第一个模块并将其打包到生成的战争中。有没有办法强制这种行为而不是默认行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:14:02.680

我认为您可以使用 maven Advanced Reactor Options 来存档它。

[http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-advanced-reactor-options/](http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-advanced-reactor-options/)

> -pl 或 –projects 选项允许您从多模块项目中选择项目列表。如果您正在处理一组特定的项目，并且您不想在开发周期中等待多模块项目的完整构建，则此选项可能很有用。

Maven -amd(also-make-dependents) 也有助于一次构建多模块项目。使用它，您可以构建一个项目以及依赖于该项目的任何项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:39:48.250

从阅读有关 Maven 设计的文档和我自己使用 Maven 所知道的一切，这不能在项目自己的目录中完成。

Maven 不会遵循模块路径向上层次结构。使用 -amd （也使依赖项）仅适用于将所有其他多模块 pom 联系在一起的顶级模块。所以你可以做的是：

在 TOP 级目录

`mvn -amd -pl jetty_module jetty:run-exploded`

# facebook - 我应该在 head 标签中添加什么

> ID：10863314
> 
> 赞同：13
> 
> 时间：2012-06-02T14:56:02.843
> 
> 标签：facebook, html, seo

为了支持尽可能多的浏览器、HTML5、搜索引擎、社交网站等，我还应该在 head 标签中包含什么

```
<title>My Site</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="My Site is cool">
<meta name="viewport" content="width=device-width">

<meta property="og:title" content="My Site"/>
<meta property="og:type" content="website"/>
<meta property="og:image" content="assests/icon_big.png"/>
<meta property="og:url" content="http://url.com"/>
<meta property="og:site_name" content="My Site"/>
<meta property="og:description" content="My Site is cool"/>

<link rel="shortcut icon" href="assests/favicon.ico" />
<link rel="apple-touch-icon" href="base_url();?>assests/icon.png"/>
<link rel="icon" href="assests/icon.png"/> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T15:07:29.453

[取自](https://github.com/h5bp/mobile-boilerplate/blob/master/index.html)Paul Irish 的 Mobile [HTML5 Boilerplate](http://html5boilerplate.com/)：

```
<!-- Mobile viewport optimization h5bp.com/ad -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width">

<!-- Home screen icon  Mathias Bynens mathiasbynens.be/notes/touch-icons --> 
<!-- For third generation iPad Retina Display -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/touch/apple-touch-icon-144x144-precomposed.png" />
<!-- For iPhone 4 with high-resolution Retina display: -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/touch/apple-touch-icon-114x114-precomposed.png" />
<!-- For first-generation iPad: -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/touch/apple-touch-icon-72x72-precomposed.png" />
<!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
<link rel="apple-touch-icon-precomposed" href="img/touch/apple-touch-icon-57x57-precomposed.png" />
<!-- For nokia devices: -->
<link rel="shortcut icon" href="img/touch/apple-touch-icon.png" />

<!-- iOS web app, delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
<!-- <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black"> -->

<!-- The script prevents links from opening in mobile safari. https://gist.github.com/1042026 -->
<!-- <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script> -->

<!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
<meta http-equiv="cleartype" content="on"> 
```

对于[必应搜索引擎优化](http://www.seroundtable.com/archives/020870.html)

```
<meta name="geo.placename" content="United States" />
<meta name="geo.position" content="x;x" />
<meta name="geo.region" content="usa" />
<meta name="ICBM" content="x,x" /> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-30T10:06:34.230

**搜索引擎优化**

```
<meta name='keywords' content='your, tags'>
<meta name='description' content='150 words'>
<meta name='subject' content='your website's subject'>
<meta name='copyright' content='company name'>
<meta name='language' content='ES'>
<meta name='robots' content='index,follow'>
<meta name='abstract' content=''>
<meta name='topic' content=''>
<meta name='summary' content=''>
<meta name='Classification' content='Business'> 
```

**作者**

```
<meta name='author' content='name, email@hotmail.com'>
<meta name='designer' content=''>
<meta name='reply-to' content='email@hotmail.com'>
<meta name='owner' content=''> 
```

**都柏林核心元数据**

```
<meta name="dc.language" CONTENT="UK">
<meta name="dc.source" CONTENT="http://www.your-domain.com/">
<meta name="dc.relation" CONTENT="http://www.second-domain.com/">
<meta name="dc.title" CONTENT="a title">
<meta name="dc.keywords" CONTENT="more keywords">
<meta name="dc.subject" CONTENT="the subject">
<meta name="dc.description" CONTENT="A description of the content"> 
```

**移动的**

```
<meta name='HandheldFriendly' content='True'>
<meta name='MobileOptimized' content='480'>
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width, height=device-height, minimal-ui">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="theme-color" content="#000">
<meta name="apple-mobile-web-app-title" content="title">
<link rel="icon" sizes="192x192" href="img/brand/icon_192.png">
<link rel="apple-touch-icon" href="img/brand/icon_192.png"> 
```

**声明所有权**

```
<meta name='y_key' content='XXXXXXXXXX'> <!-- Yahoo Site Explorer -->
<meta name='verify-v1' content='XXXXXXXXX'> <!-- Google --> 
```

**禁用缓存**

```
<meta http-equiv='Expires' content='0'>
<meta http-equiv='Pragma' content='no-cache'>
<meta http-equiv='Cache-Control' content='no-cache'> 
```

**IE**

```
<meta http-equiv='imagetoolbar' content='no'>
<meta http-equiv="X-UA-Compatible" content="IE=edge> 
```

**打开图表**

```
<meta property="og:title" content="My Site"/>
<meta property="og:type" content="website"/>
<meta property="og:image" content="assests/icon_big.png"/>
<meta property="og:url" content="http://url.com"/>
<meta property="og:site_name" content="My Site"/>
<meta property="og:description" content="My Site is cool"/> 
```

**推特卡**

```
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@flickr" />
<meta name="twitter:title" content="Small Island Developing States Photo Submission" />
<meta name="twitter:description" content="View the album on Flickr." />
<meta name="twitter:image" content="https://farm6.staticflickr.com/5510/14338202952_93595258ff_z.jpg" /> 
```

**杂项**

```
<meta charset='UTF-8'>
<meta name='pageKey' content='guest-home'>
<meta itemprop='name' content='jQTouch'>
<meta name='revised' content='Sunday, July 18th, 2010, 5:15 pm'>
<meta name='search_date' content='2010-09-27'>
<meta name='ResourceLoaderDynamicStyles' content=''>
<meta name='medium' content='blog'>
<meta name='syndication-source' content='https://mashable.com/2008/12/24/free-brand-monitoring-tools/'>
<meta name='original-source' content='https://mashable.com/2008/12/24/free-brand-monitoring-tools/'>
<meta name='url' content='http://www.websiteaddrress.com'>
<meta name='identifier-URL' content='http://www.websiteaddress.com'>
<meta name='directory' content='submission'>
<meta name='pagename' content='jQuery Tools, Tutorials and Resources - O'Reilly Media'>
<meta name='category' content=''>
<meta name='coverage' content='Worldwide'>
<meta name='distribution' content='Global'>
<meta name='rating' content='General'>
<meta name='revisit-after' content='7 days'>
<meta name='subtitle' content='This is my subtitle'>
<meta name='target' content='all'> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-02T15:36:50.893

```
<!DOCTYPE html>
<html lang="en" dir="ltr"><head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Title</title>
<meta name="description" content="Description">
<link href="favicon.ico" rel="icon" type="image/x-icon">
<script src="init.js"></script>
</head> 
```

保持简短和甜蜜。如果您需要为打开的图表包含社交标签，那很好。

# javascript - 是否可以使用 JQuery.Load() 替换整个文档？

> ID：10863315
> 
> 赞同：5
> 
> 时间：2012-06-02T14:56:11.283
> 
> 标签：javascript, jquery, html, ajax

```
 $(document).load("somepage.aspx", function (responseText, textStatus, xhr) {

}); 
```

这是行不通的。
有没有办法使用加载功能来替换整个文档，包括头部？

**编辑：我不想刷新我的页面，我必须使用 AJAX。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T15:03:42.097

```
$.get("somepage.aspx", function (data) {
    document.open();
    document.write(data);
    document.close();
    $.cache = {};
}, "text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:57:38.343

您可以使用 Jquery Ajax 查询从服务器中获取一些 html，然后从文档中删除所有内容并将其替换为内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:59:40.410

您可以添加 iframe 并将新页面加载到其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T14:59:50.767

```
$(function(){
    $.get('my_page.html', function(e){
        $(document).empty().append(e);
    });
}); 
```

试试看。my_page.html 被加载，然后 jQuery 找到文档对象，删除所有内容并将其附加到 my_page.html 内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T15:01:14.770

当页面完全加载时，您应该重定向页面。

```
 $(window).load(function(){
       document.href.location = "your_page";
    }); 
```

# php - 从 URL 获取变量

> ID：10863320
> 
> 赞同：0
> 
> 时间：2012-06-02T14:56:35.733
> 
> 标签：php, javascript, jquery

我有一个 jquery 函数，用于检索用户在数据库表中单击的信息。用户可以选择十行中的任何一行，当鼠标悬停时，当用户单击突出显示的行时，该函数会检索它并将其放入文本框中. 然后，如果用户提交此购买请求，我想在下一页上回显文本框，这是一个订单。

在我尝试从 url 检索信息之前，下面的代码运行良好。我可以看到它在 url 中传递到下一页，但尝试了两天后我无法检索它。我不知道从这里去哪里。有人可以看看这个，看看我是否没有正确编码或做错了什么。我已经复制了适用的代码...

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$(document).ready(function(){
  $("table tr").click(function(){
       $("#txttread").val($.map($(this).children('td:not(:eq(7))'), function (item) { return $(item).text() }).join(' - '));
  });
});

$(document).ready(function() {

    $('.pickme tr').not(':first').hover(
        function() { $(this).addClass('highlight'); },
        function() { $(this).removeClass('highlight'); }
    ).click( function() {
        $('.selected').removeClass('selected');
        $(this).addClass('selected').find('input').attr('checked','checked');
    });
});

</script>
</head>
<body>
<form action="Order.html" method="GET" name="myform2" />

<div>
<div style="text-align:left height:250px;">
<DIV STYLE="font-family: Arial Black;
color: black; font-size: 20pt;">

Select from inventory below:<br/><input type="text" style="width:500px; height:35px;" rows="1" STYLE="font-family: Arial Black;
color: red; font-size: 20pt;" name="txttread" id="txttread" DISABLED /></div></div></div>
<div>
<div style="text-align:center;">

<br/><input type="button" button id="getone" name="getone" value="Submit your request for purchase" onclick="window.location.href = 'http://localhost/order.html?txttread='+ ( $('#txttread').val() )"><br/><hr/>
</body>
</html> 
```

下一页的网址是......

```
 http://localhost/order.html?txttread=Firestone - All Season - FR-710 - 225/60/16 - 4 - 3 - 60.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:02:09.160

这可能无法完全回答您的问题，但请考虑一下：

```
window.location.href = 'http://localhost/order.html?txttread='+ ( $('#txttread').val() ) 
```

传递参数时应该应用适当的转义：

```
window.location.href = 'http://localhost/order.html?txttread=' + encodeURIComponent( $('#txttread').val() ); 
```

`txttread`要从HTML 页面访问 的值：

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

如此处发现：[https ://stackoverflow.com/a/901144/1338292](https://stackoverflow.com/a/901144/1338292)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:05:00.870

我认为这与未正确编码的 URL 有关。在你附加 的最后一行`$('#txttread').val()`，你应该用`encodeURIComponent()`:

```
<input type="button" 
       button id="getone" 
       name="getone" 
       value="Submit your request for purchase" 
       onclick="window.location.href = 'http://localhost/order.html?txttread=' + encodeURIComponent($('#txttread').val());"> 
```

# c# - 处理后台工作人员

> ID：10863321
> 
> 赞同：2
> 
> 时间：2012-06-02T14:56:35.810
> 
> 标签：c#, asynchronous, backgroundworker

在我完成 DoWork 事件中的处理工作之后是否有必要处理后台工作人员，或者作为一个托管对象，它最终会自动被处理？

以前，我在`timer_elapsed`ie 中执行一些功能，每三十秒执行一次任务。现在，我在 BackGround Worker 的`DoWork`事件中进行相同的处理。如何在每 30 秒后循环执行此 bgWorker 事件（例如）`bgworker.RunWorkerAsync();`

如果我把这个`bgWorker.RunWorkerAsync()`独立`timer_elapsed`的，我如何在每个计时器过去后处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:08:33.330

> 是否有必要在...之后处理掉后台工作人员

不，BackgroundWorker 确实实现了 IDisposable 接口，但只是作为从 Component 继承的一个全面特性。它没有任何目的。

> 如果我把这个放进`bgWorker.RunWorkerAsync()`去`timer_elapsed`

你是否应该这样做值得怀疑。但是如果你这样做了，每次只创建一个新的 Backgroundworker。

Backgroundworker 是一个相对“轻量级”的对象，它不包含任何资源。线程是从 ThreadPool 借来的。

如果您是校长的忠实拥护者，您可以在创建新的之前对旧的调用 Dispose()。但这不会有太大的不同。

# facebook - setAutoGrow：其他页面应该再次“缩小”

> ID：10863329
> 
> 赞同：9
> 
> 时间：2012-06-02T14:57:12.507
> 
> 标签：facebook, facebook-javascript-sdk, autogrow

我`FB.Canvas.setAutoGrow(7);`用来增加我的页面（页面=高分表，所以需要增加）。

然而，当我回到其他页面时，画布保持增长，但它应该适应新的内容，当然......基本上，它需要再次缩小。

我尝试了 setSize ，但没​​有奏效。

谁能帮助我？我一直在寻找几个小时......非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T09:04:33.313

试试这个 - 加载新页面时缩小画布，然后调用 setAutoGrow()

```
FB.Canvas.setSize({height:600});
setTimeout("FB.Canvas.setAutoGrow()",500); 
```

这是描述解决方案的完整文章[http://www.twistermc.com/36764/shrink-facebook-tabs/](http://www.twistermc.com/36764/shrink-facebook-tabs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T18:26:37.727

AFAIK FB.Canvas.setAutoGrow() 只会增长 iframe。它永远不会缩小它。我一直在寻找类似的功能，但没有关于缩小 iframe 的文档。如果有人想出一个函数来执行某种 autoShrink()，那就太好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:25:38.393

我遇到了一个问题，SetAutoGrow 计算错误只是因为页面底部的 FB 评论的底部边距，导致出现滚动条。

发现自己在上面写我自己的建筑；

```
var mainContainer = $("#training");

var resizeTimer = setInterval(function () {

  // fix for FF to make setAutoGrow work.
  mainContainer.height('auto');
  var newHeight = mainContainer.height();
  mainContainer.height(newHeight);

  // fixes lack of auto shrink
  FB.Canvas.setSize({ height: newHeight });
}, 500); 
```

# sql-server - 如何更改 Dropbox 文件夹的路径

> ID：10863343
> 
> 赞同：3
> 
> 时间：2012-06-02T14:58:34.590
> 
> 标签：sql-server, permissions, dropbox

我想将我的`.mdf`和移动`.ldf`到我的保管箱文件夹中。

我运行了这个脚本命令：

```
ALTER DATABASE MyDatabase1 MODIFY FILE 
(
   Name = matrix,
   Filename = 'C:\Users\mycomputer\Dropbox\MyDatabase1.mdf'
); 
```

但我得到这个错误：

> 'C:\Users\mycomputer\Dropbox\MyDatabase1.mdf' 指定的路径不在有效目录中。

我很确定这只是一个权限问题，运行我的脚本的 sql 服务没有正确的权限。但我不知道哪个对象授予我的 DropBox 的所有权限。我尝试了 mycomputer\users 但没有奏效。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:27:34.287

据我所知，`Dropbox`不会对其复制的文件进行快照。

这意味着文件可以（并且很可能会）在复制期间被写入，并且它们将以不一致的状态到达，从而使它们无法使用。

我相信你会想[`Log Shipping`](http://msdn.microsoft.com/en-us/library/ms188698%28v=sql.105%29)改用。这是一个`SQL Server`允许事务日志增量备份并发送到另一台服务器（可能通过`Dropbox`）的功能，在那里它们可以被恢复。这将允许您在另一台服务器上拥有数据库的快照。

# android - Android：在 multiTouch 中未调用 OnTouchListener.OnTouch

> ID：10863349
> 
> 赞同：2
> 
> 时间：2012-06-02T14:59:10.107
> 
> 标签：android, multi-touch, ontouchlistener

我在我的应用程序中实现了多点触控按钮，方法是定义我的 OnTouchListener 版本（和 onTouch 方法）并将其附加到我的所有按钮上。一切都完美无缺，除了一件似乎属于听众标准行为的事情。我希望能够在不发布代码的情况下解释它，因为它很长。

如果我单击并按住一个按钮，则会按预期调用 onTouch 方法，并且应用程序会看到单击了按钮。如果我单击并按住第二个按钮，则会按预期调用 onTouch 方法（与第一个按钮相关），并且应用程序会看到按钮被单击。

如果我只释放第二个按钮，如果我在第一个按钮上的手指保持绝对不动，则不会调用 onTouch 事件，并且不会在逻辑上释放第二个按钮。仅当我移动至少一个像素的食指时才会调用 onTouch 方法，并且只有在那一刻第二个按钮才会被释放。

我知道将手指完全保持在同一位置超过一毫秒是非常困难的:-)，但有时它会发生..我不得不花一些时间来了解这种行为的原因，但我没有找不到解决方案，您有解决此问题的建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:48:07.717

在你的 onTouch 里面试试这个

```
PointF curr = new PointF(event.getX(), event.getY());
switch (event.getAction()) {
    case MotionEvent.ACTION_UP:
        float xDiff = Math.abs(curr.x-start.x);
        float yDiff = Math.abs(curr.y-start.y);
        if (xDiff < 5f && yDiff < 5f) {
        //insert here your code when button is click
        }
     break; 
```

这有助于我避免推送不准确。

# android - 从活动中截取屏幕截图

> ID：10863352
> 
> 赞同：1
> 
> 时间：2012-06-02T14:59:32.837
> 
> 标签：android

我正在尝试使用此代码从活动中截取屏幕截图，但在代码行中我得到了 java.lang.nullpointerexception：

```
Bitmap b = Bitmap.createBitmap(view.getDrawingCache(), 0, statusBarHeight, width, height - statusBarHeight) 
```

当我尝试调试时，我发现所有变量都无法解析；即statusBarHeight，宽度，高度。请帮我解决这个问题。

```
Activity av; 
View view;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    view = (View)findViewById(R.id.screen);
    av= HelloAndroidActivity.this;

    try {   
    takeScreenShot(av);
    }
    catch (Exception e) 
    { }
}  

public void takeScreenShot(Activity av) throws Exception 
{ 
    view =this.getWindow().getDecorView();
    //or
    //view =av.getWindow().getDecorView();

    view.setDrawingCacheEnabled(true); 
    view.buildDrawingCache(true);           

    Bitmap b1 = view.getDrawingCache();
    Rect frame = new Rect();
    this.getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);
    int statusBarHeight = frame.top;
    int width = this.getWindowManager().getDefaultDisplay().getWidth();
    int height = this.getWindowManager().getDefaultDisplay().getHeight();

    Bitmap b = Bitmap.createBitmap(view.getDrawingCache(), 0, statusBarHeight, width, height - statusBarHeight);
    view.destroyDrawingCache();

    FileOutputStream fos = null; 

    try 
    { 
        //File sddir = new File(path, name);
        File root = Environment.getExternalStorageDirectory();

        //s= sddir.toString();
        Toast.makeText(this, "path " + root, Toast.LENGTH_LONG).show();

        if (!root.exists()) 
        { 
            root.mkdirs(); 
        }               

        fos = new FileOutputStream(root+ "/Image" + "_" + "4" + ".jpeg");              

        if (fos != null) 
        { 
            b.compress(Bitmap.CompressFormat.JPEG, 90, fos); 
            fos.flush();
            fos.close();                  
        } 
    } 
    catch (Exception e) 
    { 
        Toast.makeText(this, "Exception " + e, Toast.LENGTH_LONG).show();
        Log.e("Exception occurred while moving image: ",  e.toString());
        e.printStackTrace();
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:10:42.893

使用以下代码来避免**空位**图：

* * *

```
public class AndroidWebImage extends Activity {

ImageView bmImage; 
LinearLayout view;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      view = (LinearLayout)findViewById(R.id.screen);
      bmImage = (ImageView)findViewById(R.id.image);

      view.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          

      view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

      view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 

      view.buildDrawingCache(true);
      Bitmap b = Bitmap.createBitmap(view.getDrawingCache());
      view.setDrawingCacheEnabled(false); // clear drawing cache

      bmImage.setImageBitmap(b);   

};

} 
```

* * *

好好看看，你要使用：

```
 view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

 view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight()); 
```

* * *

我使用了以下**main.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
   android:id="@+id/screen"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="@string/hello"
  />
<ImageView
  android:id="@+id/image"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
/>
</LinearLayout> 
```

* * *

## 结果是：

![在此处输入图像描述](../Images/9b5932eb5190f2f1d361a4ca93b57a54.png) [参考](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)

# android - 使用 onKeylistener 时出错

> ID：10863356
> 
> 赞同：0
> 
> 时间：2012-06-02T14:59:55.327
> 
> 标签：android, android-layout

我正在尝试测试如何使用 setOnKeyListener，每次 eclipse 建议使用

```
@Override
    public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) 
```

但我不想使用这个 Listener，我想使用

```
@Override
    public boolean onKey(View v, int keyCode, KeyEvent event) 
```

每次我尝试使用后者时，eclipse都会给我一个错误，我不知道应该如何解决这个问题。

有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:03:54.473

我想你进口了

```
DialogInterface.OnKeyListener 
```

代替

```
View.OnKeyListener 
```

# html - href 指向 HTML 邮件中同一页面中的元素

> ID：10863361
> 
> 赞同：1
> 
> 时间：2012-06-02T15:00:44.310
> 
> 标签：html, email, hyperlink

我试图在同一页面中添加指向元素的链接：

```
 <a href="#someElement">
         .
         .
         .  
    <div id="someElement"> 
```

效果很好。但是当页面在邮件消息中发送时，链接会在浏览器的新选项卡中打开，并且不会简单地跳转到 html 邮件消息中的元素。我尝试使用引号（id 名称）而没有。我试图给出元素的完整路径，但没有任何效果。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:07:19.590

你可以使用锚

```
<a href="#someElement">Link to your element</a> 
```

链接到 id

```
<div id="someElement"> 
```

或姓名

```
<a name="someElement">...</a> 
```

这是可能的，但并非无处不在[http://www.campaignmonitor.com/blog/post/3322/the-trouble-with-anchor-links-in-email-newsletters/](http://www.campaignmonitor.com/blog/post/3322/the-trouble-with-anchor-links-in-email-newsletters/)

# c# - 如何制作字典扩展方法？

> ID：10863363
> 
> 赞同：19
> 
> 时间：2012-06-02T15:01:06.447
> 
> 标签：c#, dictionary, extension-methods

我正在尝试编写一个`Dictionary`独立于键/值数据类型的扩展。我尝试使用`object`数据类型传递它，假设它适用于任何类型。

我的代码：

```
 public static class DictionaryExtensionsClass
    {
        public static void AddFormat(this Dictionary< ?? unknow type/*object*/, ??unknow type/*object*/> Dic, ??unknow type/*object*/ Key, string str, params object[] arglist)
        {
            Dic.Add(Key, String.Format(str, arglist));
        }
    } 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-02T15:03:47.330

您只需使方法通用：

```
public static void AddFormat<TKey>(this Dictionary<TKey, string> dictionary,
    TKey key,
    string formatString,
    params object[] argList)
{
    dictionary.Add(key, string.Format(formatString, argList));
} 
```

请注意，它仅在*键*类型中是通用的，因为如果您要向其添加字符串值，则该值*必须*是`string`（或者可能是实现`object`的接口，我猜）。`string`

不幸的是，您不能`string`在泛型类型约束中真正表达“仅允许有效值的值类型”的约束。

# php - 在 MySQL 数据库中插入大量记录会占用内存

> ID：10863367
> 
> 赞同：1
> 
> 时间：2012-06-02T15:01:30.353
> 
> 标签：php, mysql, memory-leaks

我在我的服务器上运行一个脚本，每分钟插入大约 3000 条记录，每 ~2kB。服务器的内存似乎被此活动的数据堵塞了。（20 分钟 100MB）

最终，我必须终止进程（HTTPD 和 MySQLd）甚至重新启动服务器以取回内存......

插入大量记录时有什么方法可以节省内存？似乎MySQL以某种方式缓存了插入的数据......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:39:52.907

**关闭mysql缓存？** 只是禁用它：（取自[这里](http://dev.mysql.com/doc/refman/5.0/en/query-cache-configuration.html)）

```
SET GLOBAL query_cache_size = 40000;   # minimum as docs says
SET SESSION query_cache_type = OFF; 
```

您可以`SHOW VARIABLES LIKE 'foo';`检查这些值包含的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:50:07.623

有更好的方法可以提高插入性能。

首先，您是否有可能每十秒在一个查询中发送这些插入？或类似的东西。这里的想法是向服务器发送更少的查询。

另外，你使用 InnoDB 吗？该引擎更适合这种类型的 uf 使用。

# php - PHP准备好的语句不起作用

> ID：10863368
> 
> 赞同：2
> 
> 时间：2012-06-02T15:01:32.533
> 
> 标签：php, mysql, pdo

```
<?php
    $current = 0;
    $results = 5;
    $statement = $db->prepare("SELECT title, id FROM mytable LIMIT ?, ?");
    $statement->execute(array($current, $results));
?>

var_dump($statement);
=> public 'queryString' => string 'SELECT title, id FROM mytable LIMIT ?, ?' (length=39) 
```

谁能帮我找出为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:08:15.553

您需要将这些参数绑定为整数，而不是字符串（默认）。将参数绑定为字符串会自动在它们周围添加引号。

```
$statement->bindParam(":current", $current, PDO::PARAM_INT) 
```

此示例使用命名占位符。我建议您无论如何都使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:08:54.590

让您看到一个字符串，其中的占位符被提供的值替换，这不是 pdo 提供的功能。但是，它将使用您的值正确执行准备好的语句。

对于 pdos mysql 驱动程序，如果在值数组上使用 execute()，则在为部分限制子句绑定值时有一个特殊性。请参阅[如何传递一组 PDO 参数但仍指定它们的类型？](https://stackoverflow.com/questions/10437423/how-can-i-pass-an-array-of-pdo-parameters-yet-still-specify-their-types/)

# php - 使用 PDO 设置 sqlite3 数据库路径

> ID：10863369
> 
> 赞同：2
> 
> 时间：2012-06-02T15:01:40.610
> 
> 标签：php, sqlite, pdo

很难找出在 PHP 中使用 PDO 为我的 sqlite3 数据库设置的路径。

我的代码如下：

```
$handle = new PDO('sqlite:/C:/New folder/sqlite/test.db') or die("Could not open 
database");
echo $handle;
$query = "SELECT * FROM student"; 
```

调试结果：

它返回一个空白网页，而不是打印出 $handle。我已经设置了存储我的 sqlite 数据库文件的所需路径。我错过了什么？

好心提醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:37:47.973

首先您需要知道安装了哪些 PDO 驱动程序，在其中创建一个空白文件：

```
<?php phpinfo(); ?> 
```

然后查找 PDO 部分，您应该会看到以下内容：

`PDO drivers mysql, sqlite, sqlite2`

如果你只有`mysql`那么你需要安装 sqlite pdo 驱动程序。为此使用谷歌，不要忘记也检查您的生产服务器，否则您创建的东西可能无法在您的主机上使用。

由于 PDO 驱动程序很像旧的驱动程序，`sqlite_open()`因此如果找不到，它将为您创建数据库文件。

您也可能知道文件路径中的空格不太好，可能会导致问题，

而不是使用： `sqlite:/C:/New folder/sqlite/test.db`您至少应该将您的新文件夹重命名为其他内容：`sqlite:/New_folder/sqlite/test.db`

# objective-c - 点击按钮时无动作；报价不变

> ID：10863372
> 
> 赞同：0
> 
> 时间：2012-06-02T15:02:09.123
> 
> 标签：objective-c, cocoa

我已经组装了一个简单的报价生成器，将报价存储在一个数组中。以下是报价视图控制器接口和实现文件：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property(nonatomic, retain)NSArray *myQuotes;
@property(nonatomic, retain)NSMutableArray *movieQuotes;
@property (nonatomic, retain) IBOutlet UITextView *quote_text;

-(IBAction)quote_btn_touch:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize myQuotes;
@synthesize movieQuotes;
@synthesize quote_text;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
  self.myQuotes = [NSArray arrayWithObjects:
                   @"Live and let live", 
                   @"Don't cry over spilt milk", 
                   @"Always look on the bright side of life", 
                   @"Nobody's perfect", 
                   @"Can't see the woods for the trees",
                   @"Better to have loved and lost than not loved at all",
                   @"The early bird catches the worm",
                   @"As slow as a wet week",
                   nil];

  quote_text = nil;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(IBAction)quote_btn_touch:(id)sender {
  // 1 - Get number of rows in array
  int array_tot = [self.myQuotes count];
  // 2 - Get random index
  int index = (arc4random() % array_tot);
  // 3 - Get the quote string for the index 
  NSString *my_quote = [self.myQuotes objectAtIndex:index];
  // 4 - Display the quote in the text view
  self.quote_text.text = [NSString stringWithFormat:@"Quote:\n\n%@",  my_quote];      
}

@end 
```

在 xib 文件中，我分别使用 quote_text 和 quote_btn_touch 将文本视图和按钮连接到文件所有者。

问题是当我点击按钮时，什么也没有发生。知道我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:09:20.943

您在 viewDidLoad 上将报价文本设置为零。如果您摆脱它，只要您将按钮正确绑定到 viewcontroller 函数，您的代码就应该可以工作

```
quote_text = nil; 
```

# ruby-on-rails-3 - Guard init 命令的问题

> ID：10863381
> 
> 赞同：1
> 
> 时间：2012-06-02T15:03:41.453
> 
> 标签：ruby-on-rails-3, guard

我正在尝试`Guard`使用[本](http://ygamretuta.me/2011/08/10/rails-3-setting-up-guard-with-rspec-and-spork-with-growl-notifications-in-osx/)教程进行设置，但是当我运行`bundle exec guard init`或`bundle exec guard init rspec`

我在 OSX 上，运行 RVM 1.14.1 和 Rails 3.2.5。

我收到以下错误：

```
[myapplication]$ bundle exec guard init rspec
/Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/gems/guard-1.1.0/lib/guard/cli.rb:145:in `init': undefined method `create_guardfile' for Guard:Module (NoMethodError)
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/gems/thor-0.15.2/lib/thor/task.rb:27:in `run'
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/gems/thor-0.15.2/lib/thor/invocation.rb:120:in `invoke_task'
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/gems/thor-0.15.2/lib/thor.rb:275:in `dispatch'
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/gems/thor-0.15.2/lib/thor/base.rb:408:in `start'
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/gems/guard-1.1.0/bin/guard:6:in `<top (required)>'
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/bin/guard:19:in `load'
    from /Users/ash/.rvm/gems/ruby-1.9.2-p290@myapplication/bin/guard:19:in `<main>' 
```

`RSpec`运行良好：

```
[myapplication]$ bundle exec rspec
F

Failures:

  1) StaticPages GET /static_pages works! (now write some real specs)
     Failure/Error: get static_pages_index_path
     NameError:
       undefined local variable or method `static_pages_index_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fd6d176a020>
     # ./spec/requests/static_pages_spec.rb:7:in `block (3 levels) in <top (required)>'

Finished in 0.00887 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:5 # StaticPages GET /static_pages works! (now write some real specs) 
```

还有我的gemfile：

```
source 'https://rubygems.org'
gem 'rails', '3.2.5'
group :development, :test do
  gem 'rspec-rails'
  gem 'guard-rspec'
  gem 'growl'
  gem 'rb-fsevent'
  gem 'spork-rails'
  gem 'guard-spork'
end
gem 'sqlite3'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:32:10.550

我刚刚在 Ubuntu Server 11.10 中遇到了同样的问题。就我而言，宝石的版本存在一些问题。我将 Gemfile 中的保护 gem 版本从 1.1.0 更改为 0.10.0 并且它有效。这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'pg', '0.12.2'

group :development, :test do
  #gem 'sqlite3', '1.3.5'
  gem 'pg', '0.12.2'
  gem 'guard','0.10.0'
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
  gem 'guard-bundler'

end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-inotify', '0.8.8'
  gem 'libnotify', '0.5.9'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:18:17.797

我已报告此问题并已修复：

[https://github.com/guard/guard/issues/283#issuecomment-6078721](https://github.com/guard/guard/issues/283#issuecomment-6078721)

# wordpress - Wordpress wp-post-image 类去除器

> ID：10863391
> 
> 赞同：3
> 
> 时间：2012-06-02T15:04:41.663
> 
> 标签：wordpress

我们用来`the_post_thumbnails`显示我们的图像。

我们想将它们与一个名为“test”的特定类一起使用，但我们无法管理它！

我们使用这段代码：

```
 <?php the_post_thumbnail('pin-photo-large', array('class' => 'test')); ?> 
```

但是图像的输出看起来像这样：

```
 class="test wp-post-image" 
```

我们如何克服这个问题并获得这样的输出？

```
 class="test" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:12:10.820

**更新：**将此添加到您的`functions.php`文件中：

```
remove_action( 'begin_fetch_post_thumbnail_html', '_wp_post_thumbnail_class_filter_add' ); 
```

说明： 在`media.php`中，该`_wp_post_thumbnail_class_filter`函数将`wp-post-image`类添加到发布缩略图。通过移除`begin_fetch_post_thumbnail_html`动作挂钩（位于 中`default-filters.php`），该功能将不再适用于`the_post_thumbnail`。

* * *

**下面的旧答案：**

我还寻找了一种适当的方法来过滤掉这个`wp-post-image`类，可惜无济于事。我想出的唯一解决方案是编辑一个（*喘气！*）核心文件：`media.php`并替换它：

```
function _wp_post_thumbnail_class_filter( $attr ) {
    $attr['class'] .= ' wp-post-image';
    return $attr;
} 
```

这样：

```
function _wp_post_thumbnail_class_filter( $attr ) {
    return $attr;
} 
```

肯定有比修补核心文件更好的方法来做到这一点，但这可能是一个很好的临时解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-08T22:26:07.210

将此添加到您的`functions.php`文件中：

```
function remove_post_image_class($content) {
    $post_string = $content;
    $post_string = preg_replace('/<img class=".*?"/', '<img', $post_string);
    return $post_string;
}

add_filter( 'the_content', 'remove_post_image_class' ); 
```

享受

# c# - 从 DX9 移植到 SlimDX - DeviceLost 位置

> ID：10863393
> 
> 赞同：1
> 
> 时间：2012-06-02T15:04:55.010
> 
> 标签：c#, directx, slimdx

我正在尝试将一些基于 .NET1.1 下的 DX9 的代码转换为 DX9、.NET4 和 SlimDX。

旧代码设置了许多事件处理程序：

```
graphics.DeviceLost     += new EventHandler( this.InvalidateDeviceObjects );
graphics.DeviceReset    += new EventHandler( this.RestoreDeviceObjects );
graphics.Disposing      += new EventHandler( this.DeleteDeviceObjects );
graphics.DeviceResizing += new CancelEventHandler( this.EnvironmentResizing ); 
```

我注意到在 SlimDX.Direct3D9 中，DeviceLost 不再存在。我和其他人有一个类似的问题。

DeviceLost 存在于 SlimDX.Direct3D9.ResultCode 命名空间中，但我不知道这是否有用。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:35:38.347

您需要像在本机 DirectX 中一样使用 TestCooperativeLevel 方法来检查结果代码并采取相应措施。MDX 的事件处理方法有一些不幸的性能缺陷，这就是我们避免实现该系统的原因。

# linux - Arduino IDE 不能在 Arch linux 上运行

> ID：10863394
> 
> 赞同：0
> 
> 时间：2012-06-02T15:04:59.817
> 
> 标签：linux, ide, arduino

当我在控制台中运行 arduino 时，我得到：

```
[lukas@lu arduino]$ arduino
Xlib:  extension "RANDR" missing on display ":0.0".
java.lang.IllegalArgumentException: Illegal pattern character 'r'
    at java.text.SimpleDateFormat.compile(SimpleDateFormat.java:769)
    at java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:576)
    at java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:501)
    at java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:476)
    at processing.app.tools.Archiver.init(Archiver.java:59)
    at processing.app.Editor.createToolMenuItem(Editor.java:859)
    at processing.app.Editor.addInternalTools(Editor.java:885)
    at processing.app.Editor.buildToolsMenu(Editor.java:660)
    at processing.app.Editor.buildMenuBar(Editor.java:476)
    at processing.app.Editor.<init>(Editor.java:205)
    at processing.app.Base.handleOpen(Base.java:704)
    at processing.app.Base.handleOpen(Base.java:669)
    at processing.app.Base.handleNew(Base.java:565)
    at processing.app.Base.<init>(Base.java:305)
    at processing.app.Base.main(Base.java:194)
Exception in thread "main" java.lang.NullPointerException
    at java.awt.Container.addImpl(Container.java:1041)
    at java.awt.Container.add(Container.java:373)
    at javax.swing.JPopupMenu.add(JPopupMenu.java:281)
    at javax.swing.JMenu.add(JMenu.java:579)
    at processing.app.Editor.addInternalTools(Editor.java:885)
    at processing.app.Editor.buildToolsMenu(Editor.java:660)
    at processing.app.Editor.buildMenuBar(Editor.java:476)
    at processing.app.Editor.<init>(Editor.java:205)
    at processing.app.Base.handleOpen(Base.java:704)
    at processing.app.Base.handleOpen(Base.java:669)
    at processing.app.Base.handleNew(Base.java:565)
    at processing.app.Base.<init>(Base.java:305)
    at processing.app.Base.main(Base.java:194) 
```

10分钟后什么也没有发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:59:03.313

在运行 arduino 之前，我必须将语言环境更改为 en_US.UTF-8

```
export LANG=en_US.UTF-8 
```

# jquery - 在视图内呈现时，JQuery 就绪功能未执行

> ID：10863397
> 
> 赞同：1
> 
> 时间：2012-06-02T15:05:17.453
> 
> 标签：jquery, asp.net-mvc-3, .net-4.0

只是一个标准的 MVC 站点，但是我尝试将 JQuery on document ready 处理程序添加到我的主视图而不是我的布局页面，并发现当我这样做时它不会执行它。

布局页面：

```
<!DOCTYPE html>

<html>
    <head lang="en">
        <meta charset="utf-8" />
        <title>@ViewBag.Title</title>
        <link href="@Url.Content("~/Content/Reset.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/modernizr-2.5.3.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
        @RenderSection("Head");
    </head>

    <body>
        <header id="header">
            <h1>Home</h1>

            <nav id ="nav">
                <a href="@Url.Action("Index", "Home")"><div>Home</div></a>
                <a href="@Url.Action("AboutMe", "Home")"><div>About Me</div></a>
                <a href="@Url.Action("Index", "Project")"><div>My Projects</div></a>
                <a href="@Url.Action("Index", "Contact")"><div>Contact Me</div></a>
                <a href="@Url.Action("Index", "Blog")"><div>Blog</div></a>
            </nav>
        </header>

        <section id="content">
            @RenderBody()
        </section>
    </body>
</html> 
```

主页：

```
@{
    ViewBag.Title = "Home";
}

@section Head
{
    <link href="@Url.Content("~/Content/HomeIndex.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Jquery.Tweet.css")" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.tweet.js")"/>

}

<img id="home-image" alt="Home page image" src="..." width="300" />

<section id="introduction">
    <h3>WelcomeLi</h3>
    <p>Text goes here.<p>
</section>

<section id="get-in-touch">
    <h4>Get In Touch</h4>
    <img id="facebook-button" alt="Find me on Facebook." src="@Url.Content("~/Content/Images/FacebookButton.png")" />
    <img id="skype-button" alt="Contact me via Skype." src="@Url.Content("~/Content/Images/SkypeButton.png")" />
    <img id="linkedin-button" alt="Find me on LinkedIn" src="@Url.Content("~/Content/Images/LinkedInButton.png")" />
</section>

<section id="twitter"></section> 
```

所以基本上我所做的是在我的布局页面的头部添加了一个 jquery 文档就绪处理程序，它执行得很好，但是如果我将脚本部分添加到我的主视图的头部部分，它将不会执行。有人可以解释为什么会这样吗？这对我来说没有任何意义。

此外，当我查看源代码时，页面看起来就像在正确的位置使用脚本渲染得很好并且格式正确，这让我很难过，非常感谢任何帮助。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:39:16.167

据我所知，您不能自行关闭**< script >**标签

所以请更正：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.tweet.js")"/> 
```

**到**

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.tweet.js")"></script> 
```

# eclipse - 使用外部应用程序在 Eclipse 中选择文件的 API

> ID：10863401
> 
> 赞同：0
> 
> 时间：2012-06-02T15:05:46.967
> 
> 标签：eclipse

我想从外部应用程序**中选择/打开 Eclipse 中特定项目中的特定文件。**

**Eclipse 是否为此类任务提供 API？**

我想将应用程序结构的可视化表示链接到日食。如果我**单击**外部应用程序中的符号，我想在 Eclipse中**打开相关文件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:25:15.017

您需要创建一个简单的 Eclipse 插件来监听事件以打开文件。我不相信 Eclispe 提供这样的支持，因为您可以同时执行多个 Eclipse，并且除了通过打开的工作区之外没有简单的方法来识别它们。

我建议您创建一个简单的 Eclipse 插件来侦听打开的套接字或管道。它可以等待来自您的外部应用程序的命令。当它接收到这个命令时，它可以使用 Eclipse PDE API 扫描适当的项目，然后打开文件。

# arrays - primefaces dataTable 多选使用 List 而不是 Array

> ID：10863403
> 
> 赞同：1
> 
> 时间：2012-06-02T15:06:06.080
> 
> 标签：arrays, jsf-2, datatable, primefaces, multipleselection

我想得到这个：

```
<h:form id="form">

    <p:dataTable value="#{testBean.allItems}" var="item" selection="#{testBean.category.itemList}" selectionMode="multiple">
        <p:column>#{item.name}</p:column>
    </p:dataTable>

</h:form> 
```

在哪里

```
@ManagedBean
public class TestBean
{
    private static List<Item> itemDB = new ArrayList<Item>();
    static
    {
        itemDB.add(new Item("zero"));
        itemDB.add(new Item("one"));
        itemDB.add(new Item("two"));
        itemDB.add(new Item("three"));
        itemDB.add(new Item("four"));
        itemDB.add(new Item("five"));
    }

    private Category category;

    @PostConstruct
    public void init()
    {
        category = new Category();
        category.setName("root");
        category.getItemList().add(itemDB.get(2));
        category.getItemList().add(itemDB.get(3));
    }

    public List<Item> getAllItems()
    {
        return itemDB;
    }

    public Category getCategory()
    {
        return category;
    }

    public void setCategory(Category category)
    {
        this.category = category;
    }
} 
```

我认为我的选择是：

1.  创建一种从 List 到 Array 的翻译器，反之亦然，但我对让它与 ValueExpressions 一起工作感到头疼......
2.  扩展 PrimeFaces DataTable 和 DataTableRenderer 但搞清楚可能真的很痛苦

有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:30:56.140

对于这种情况，Collections-API 有一些相对简单的方法。

```
Item[] itemArr = itemDB.toArray(new Item[0]); 
```

和

```
itemDB = Arrays.asList(itemArr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:24:49.570

我就是这样做的。到目前为止，我还没有对它进行大量测试，但它似乎确实有效。我认为 Primefaces 的补丁可能是一个更好的解决方案。

这是我想使用的列表方法：

```
 public List<R> getSelectionRecordList() {
        return selectionItems;
    }

    public void setSelectionRecordList(List<R> selectionItems) {
        this.selectionItems = selectionItems;
    } 
```

这是我为访问该列表而添加的两个额外数组方法。

```
 public R[] getSelectionRecordArray() {
           if (null == selectionItems) {
               return null;
           }
            return (R[]) selectionItems.toArray();
        }

        public void setSelectionRecordArray(R[] selectionArray) {
            if (null == selectionArray || selectionArray.length == 0) {
                selectionItems = null;
            } else {
                selectionItems = new ArrayList<R>(selectionArray.length);
                for (R record : selectionArray) {
                    this.selectionItems.add(record);
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T00:24:11.080

我`DataTable`用自己的班级扩展了primefaces。

# c++ - Cpp 中的插件 - 执行外部程序功能

> ID：10863404
> 
> 赞同：0
> 
> 时间：2012-06-02T15:06:07.000
> 
> 标签：c++, plugins

我想知道是否有任何方法可以在 Java 中制作类似插件的东西，所以主程序加载子程序并执行它们的功能。我想过一组返回一些值的小程序，但我想让插件能够修改一些主程序对象（也许以某种方式传递指针？）。

有没有办法做到这一点？

感谢任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:28:48.943

可以在运行时以动态链接库（Windows 中的 DLL:s）的形式动态加载代码。

我使用的方法（至少在处理 Windows 时）是这样的：

*   创建一个带有一些导出函数的 dll（用 __declspec(dllexport) 声明）
*   使用 Windows-API 中的 LoadLibrary 函数在运行时加载创建的文件
*   使用函数名通过函数 GetProcAddress-function 通过函数名获取指向成员函数的函数指针。

最后一部分有时可能有点令人困惑，因为 C++ 使用名称修饰来跟踪返回类型等。这意味着存储在 DLL 中的名称不是函数的名称，而是一个名称，该名称还包含对函数参数类型等的描述。

为防止名称混乱，您可以使用 extern "C" 声明导出的函数，例如

```
extern "C" __declspec(dllexport) int myFunction(...); 
```

但是，这将不允许在函数声明中使用类。

在动态链接库和“主程序”之间传递指向数据结构的指针时要考虑的重要事项是确保两个文件中的类型声明相同（通过共享声明类型的标头轻松完成） , 否则在执行程序时会出现严重错误。

同样，这可能是特定于 Windows 的，但它可能会提示您系统上的正确过程。

# java - 基于访问的重定向

> ID：10863405
> 
> 赞同：1
> 
> 时间：2012-06-02T15:06:08.187
> 
> 标签：java, php, redirect, dns, minecraft

我知道这可能是不可能的。这是我的问题。我有一个域。它适用于我的游戏服务器（Minecraft）。我希望能够在游戏客户端和浏览器 url 中将我的域输入为 example.com，然后转到不同的地方。在浏览器中，它会重定向到网站，而在游戏客户端中，它会重定向到游戏服务器 IP。如果需要，我可以提供更多说明。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:10:36.653

这已经成为可能，因为 Minecraft 服务器的套接字正在侦听与 HTTP 端口不同的端口。

您应该能够在不进行任何修改的情况下运行网络服务器和 Minecraft 服务器，因为 HTTP 侦听端口 80，而 Minecraft 运行在端口 25565。

**注意**：

如果您在家，则还需要将路由器设置为允许这两个端口的端口转发。此外，您的 ISP 可能会阻止端口 80。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:12:30.957

您可以使用[SRV 记录](http://en.wikipedia.org/wiki/SRV_record)，以便游戏服务器请求转到一个位置，而 Web 请求转到另一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:12:44.187

如果您可以控制将域名转发到的服务器，则可以使用。如果您使用的是 linux 服务器，我会推荐 IP Tables。[使用 IP 表进行端口转发的示例](http://fclose.com/b/linux/816/port-forwarding-using-iptables/)

# excel - 如何编写具有多个条件样式的 sumproduct 以避免在 Excel 中添加额外的列

> ID：10863406
> 
> 赞同：1
> 
> 时间：2012-06-02T15:06:20.743
> 
> 标签：excel, excel-formula

上次，我问了一个关于如何针对一种情况执行 sumproductIF 的问题，它效果很好。但是，如果有两个（或更多条件），我想知道如何编写具有多个条件样式的 sumproduct 以避免添加额外的列。

![在此处输入图像描述](../Images/d9cb8e39175b03a1b62d7d2610ce191c.png)

计算的目的是单步求出 T1 的最终总成本（以美元计）

目前，T1 的总成本可以通过*货币转换找到 Price QTY（图中步骤 1），然后通过 SUMIF(TYPE,"T1",Price* QTY)找到 T1 的总成本

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T18:37:38.307

如果您使用 SUMIF 而不是 LOOKUP 那么您不需要对货币表进行排序，即

`=SUMPRODUCT((A10:A24="T1")+0,B10:B24,D10:D24,SUMIF(B$4:$B$6,C10:C24,$C$4:$C$6))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:25:20.320

如果可以订购外汇汇率表（按字母顺序）并包括 USD = 1，您可以使用此数组公式（您需要按 验证它`CTRL+SHIFT+ENTER`）：

```
=SUM((A10:A24="T1")*(B10:B24)*(D10:D24)*(LOOKUP(C10:C24,$B$4:$B$6,$C$4:$C$6))) 
```

这假设：

*   外汇表在 B4:C6 中，欧元、日元和美元按此顺序排列
*   主要数据表在 A9:E24 中（第 9 行的标题）

# android - 我可以在 Android 布局 xml 文件中定义中间行文本吗

> ID：10863415
> 
> 赞同：23
> 
> 时间：2012-06-02T15:07:08.577
> 
> 标签：android, text

如何在 Android 布局 xml 文件中定义中间线（删除线）文本？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-02T15:11:44.710

要删除，您可以使用背景图像来创建删除线效果：

```
 android:background="@drawable/strike_through" 
```

其中，strike_through drawable 是一个 9-patch 图像，它在中间保持一条线。这是实现它的最简单方法。

或者您可以像这样以编程方式进行。

```
TextView t = (TextView) findViewById(R.id.text);
t.setText("Text here");
t.setPaintFlags(t.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-08-30T16:32:46.357

[6 种惊人的方式 - Android TextView 删除线 XML 和 Kotlin/Java 示例](https://androidride.com/android-textview-strikethrough-xml/)

[![Android TextView 删除线 XML](../Images/8ab8a64459036b026f2f1f8895edfc83.png)](https://i.stack.imgur.com/uO7Jq.png)

[屏幕截图 - Android TextView 删除线 XML 和 Kotlin/java 示例 -](https://i.stack.imgur.com/5t6ij.png)

1.  使用罢工元素。

    **字符串.xml**

`<string name="strike_text">1\. <strike>StrikeThrough</strike> Using strike</string>`

```
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/strike_text"
/> 
```

2.  **使用 STRIKE_THRU_TEXT_FLAG**

    *科特林*

    ```
    textview2.paintFlags = textview2.paintFlags or Paint.STRIKE_THRU_TEXT_FLAG
    textview2.text = "2\. StrikeThrough Using Paint Flags 
    ```

    *爪哇*

    `textview2.setPaintFlags(textview2.getPaintFlags()| Paint.STRIKE_THRU_TEXT_FLAG); textview2.setText("2\. StrikeThrough Using Paint Flags");`

3.  **使用 SpannableString**

*科特林*

`val content1 = "3.1 StrikeThrough Using SpannableString" val spannableString1 = SpannableString(content1) spannableString1.setSpan(StrikethroughSpan(),0,content1.length,0) textview31.text = spannableString1`

*爪哇*

```
textview2.setPaintFlags(textview2.getPaintFlags()| Paint.STRIKE_THRU_TEXT_FLAG);
    textview2.setText("2\. StrikeThrough Using Paint Flags");    ` 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-05-07T17:54:11.803

如果你定义一个 BindingAdapter

```
@BindingAdapter("strikeThrough")
public static void strikeThrough(TextView textView, Boolean strikeThrough) {
    if (strikeThrough) {
        textView.setPaintFlags(textView.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
    } else {
        textView.setPaintFlags(textView.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG);
    }
} 
```

只是

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ...
    app:strikeThrough="@{true}"
    .../> 
```

在 XML 布局文件中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-12T07:45:56.087

在 kotlin 中，它可以这样完成：

```
your_textView.paintFlags = Paint.STRIKE_THRU_TEXT_FLAG 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-02T03:45:03.687

仅在 xml 文件中执行此操作，这就是我所做的：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/text_view_original_cash_amount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:textColor="@android:color/darker_gray"
        android:text="$36000"/>

    <View
        android:layout_width="wrap_content"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_centerVertical="true"
        android:layout_alignStart="@id/text_view_original_cash_amount"
        android:layout_alignEnd="@id/text_view_original_cash_amount"/>

</RelativeLayout> 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-02T15:12:15.620

```
textview.setPaintFlags(textview.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

您可以在活动中使用上面的代码来删除文本。

并通过 xml 设置参考[这个](https://stackoverflow.com/questions/3881553/is-there-an-easy-way-to-strike-through-text-in-an-app-widget)

# javascript - 在 selectOneMenu 更改的同一窗口中打开一个对话框

> ID：10863426
> 
> 赞同：3
> 
> 时间：2012-06-02T15:08:29.270
> 
> 标签：javascript, jquery, jsf-2, jquery-selectors, primefaces

我有一个 jsf 页面，其中有一个 selectOneMenu，我想打开一个关于 selectOneMenu 更改的对话框。

> 例如，如果用户从 jsf selectOneMenu 中选择了一个值 =“passive”，它应该在同一页面上打开一个对话框或一个灯箱，我想在其中显示一个小的 jsf 表单，就像这里所做的那样。（请单击那个小图像（是的，就像这个对话框一样，我想在 selectOneMenu 中选择特定值后打开）） [http://www.primefaces.org/showcase-labs/ui/dialogLogin.jsf](http://www.primefaces.org/showcase-labs/ui/dialogLogin.jsf)

而且我还想将提交的数据保存在我的支持bean中的某个地方，以便以后可以将其存储到数据库中。

我不知道如何在同一窗口中从支持 bean 打开对话框或灯箱，因为我们将使用 valueChangeListener 事件或使用 ajax 事件来识别值更改。

我能够识别从 selectOneMenu(DropdownMenu) 中选择了哪个值，但不知道如何打开选择特定值的对话框。

```
<h:outputLabel
            value="* Country: "/>
        <h:selectOneMenu
            id="someSelect"
            value="#{testController.countryName}"
            required="true">
            <f:selectItem
                itemLabel="Select Country"
                itemValue=""/>
            <f:selectItems
                value="#{testController.countryNamesSelectItems}"/>
             </h:selectOneMenu> 
```

假设我们在 selectItems 中有 2 个选项作为印度和澳大利亚，那么如果用户选择印度，则应在同一页面上打开一个对话框，用户需要填写一些信息，如果他来自印度，则需要提交（如示例 [http： //www.primefaces.org/showcase-labs/ui/dialogLogin.jsf](http://www.primefaces.org/showcase-labs/ui/dialogLogin.jsf)（请点击那个小图片（是的，就像我想在selectOneMenu中选择特定值后打开这个对话框））用户将输入他的用户名和密码并提交数据）

希望这可以帮助

> 我们如何使用java脚本（jquery）检查primefaces，selectOneMenu的选定值，就像这里为richfaces [t所做的那样：selectOneMenu 如何使用java脚本获取选定的值？](https://stackoverflow.com/questions/6482959/tselectonemenu-how-to-get-selected-value-using-java-script)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T06:12:38.870

您可以使用 的`onchange`属性`h:selectOneMenu`打开对话框：

```
 <h:selectOneMenu
        id="someSelect"
        value="#{testController.countryName}"
        required="true"
        onchange="dlg.show()"> 
```

使用`dlg`as 的`widgetVar`属性值`p:dialog`。这将在服务器被击中*之前*打开对话框。

如果要在完成 ajax 请求*后*打开对话框，可以使用`p:ajax`以下`oncomplete`属性：

```
<p:ajax update=".." process=".." oncomplete="dlg.show()"/> 
```

或者，如果您想根据所选值打开对话框，您可以使用包装函数：

```
function showDialog() {
 if($('#IdOfYourSelectOneMenu').val() == 'India') {
   dlg.show();
 }
} 
```

和：

```
<p:ajax update=".." process=".." oncomplete="showDialog()"/> 
```

# tfs - Tfs 2012 express RC 试用首日结束

> ID：10863443
> 
> 赞同：4
> 
> 时间：2012-06-02T15:11:11.230
> 
> 标签：tfs

我下载并安装了 VSTFS 2012 Express RC 版本，并在 TFSAdmin 控制台中添加了一些示例项目集合，而我试图通过 Web 访问它显示以下消息来访问该项目。

```
 TF246019: The Team Foundation Server trial period has expired, or the license is not valid. You must update your license in order to continue to use Team Foundation Server. 
```

在RC版中试用期好像是90天，但安装后就过期了。有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:40:25.703

Team Foundation 服务器应用程序池运行 32 位模式

您可以通过打开应用程序池的“高级设置”并将启用 32 位应用程序更改为 False，在 IIS 7 管理器中设置 32 位应用程序设置。

![高级设置](../Images/258c512d811619d1ce07637dbe42c350.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:32:33.187

就我而言，我的审判还剩 58 天 - 根据 Sebastiaan 的案例，“审判期已过”消息完全是在转移注意力。

该问题已通过 Microsoft Team Foundation Server 应用程序池的停止/启动得到解决。

![应用程序池](../Images/44a7ff74edf700e0a0194b6c371772f7.png)

# c++ - 仅针对模板中的某些类型覆盖函数

> ID：10863444
> 
> 赞同：7
> 
> 时间：2012-06-02T15:11:20.980
> 
> 标签：c++, templates, overriding

我有一个带有虚函数的基类：

```
class Base
{
public:
  virtual void Function();
};

void Base::Function()
{
  cout << "default version" << endl;
} 
```

和一个派生的模板类：

```
template <class T> class Derived : public Base
{
public:
  virtual void Function();
}; 
```

有没有办法`Function()`从所有类型的基类中获取，除了一些选择的类型？所以我想要的是能够定义一个覆盖`Function()`，比如说，`int`和`long`：

```
void Derived<int>::Function()
{
  cout << "overriden version 1" << endl;
}

void Derived<long>::Function()
{
  cout << "overriden version 2" << endl;
} 
```

并拥有`Function()`所有其他类型的默认版本，没有明确定义`Function()`它们，所以输出

```
int main ()
{
  Derived<int> derivedInt;
  derivedInt.Function();

  Derived<long> derivedLong;
  derivedLong.Function();

  Derived<double> derivedDouble;
  derivedDouble.Function();
} 
```

将会

```
overriden version 1
overriden version 2
default version 
```

可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T15:29:58.180

类模板的成员函数实际上是函数模板，因此您可以对它们进行专门化：

```
template <typename T> class Foo
{
    void Function();
};

template <typename T> void Foo::Function() { /* ... */ }

template <> void Foo<int>::Function() { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T18:11:01.393

**第一个解决方案**（使用`typeid`运算符）**：**

```
#include <iostream>
#include <typeinfo>

using namespace std;

class Base
{
public:
    virtual void Function();
};

void Base::Function()
{
    cout << "default version\n";
}

template<typename T>
class Derived : Base
{
public:
    virtual void Function();
};

template<typename T>
void Derived<T>::Function()
{
    if(typeid(T) == typeid(int)) // check if T is an int
    {
        cout << "overriden version 1\n";
    }
    else if(typeid(T) == typeid(long)) // check if T is a long int
    {
        cout << "overriden version 2\n";
    }
    else // if T is neither an int nor a long
    {
        Base::Function(); // call default version
    }
}

int main()
{
    Derived<int> di;
    Derived<long> dl;
    Derived<float> df;

    di.Function();
    dl.Function();
    df.Function();

    return 0;
} 
```

我使用`typeid`运算符检查 T 是 an`int`还是 a `long int`，如果是，我打印“覆盖版本 [number]”。如果不是，我调用`Base::Function()`，它将打印“默认版本”

**注意：**要使用`typeid`运算符，您需要包含头文件`typeinfo`

**第二种解决方案**（使用模板专业化）**：**

```
// class declarations as before

template<typename T>
void Derived<T>::Function()
{
    Base::Function(); // call default version
}

template<>
void Derived<int>::Function()
{
    cout << "overriden version 1\n";
}

template<>
void Derived<long>::Function()
{
    cout << "overriden version 2\n";
}

int main()
{
    Derived<int> di;
    Derived<long> dl;
    Derived<float> df;

    di.Function();
    dl.Function();
    df.Function();

    return 0;
} 
```

在这里，我用模板专业化解决了你的问题。如果 T 是 an`int`或 a `long int`，我称其为专用版本。否则，我称之为通用版本，相当于`Base::Function()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T15:14:50.517

是的，通过专业化`Derived`。

*   编写没有它的通用版本（它将继承它`Base`）
*   专门`Derived`覆盖

简单的方案，但它的工作原理。

# javascript - RequireJS 和原型

> ID：10863449
> 
> 赞同：3
> 
> 时间：2012-06-02T15:12:00.527
> 
> 标签：javascript, prototypejs, requirejs

我正在考虑使用 RequireJS 将我的脚本组织成模块。

基本上，我的每个脚本都定义了一个类`var MyScript = Class.create({...})`（`ext/`第三方库中的脚本除外）。

举一个现实世界的例子，我如何能够将这些导入组织为模块？

```
<script type="text/javascript" src="js/ext/prototype.js"></script>
<script type="text/javascript" src="js/ext/scriptaculous.js"></script>
<script type="text/javascript" src="js/ext/effects.js"></script>
<script type="text/javascript" src="js/ext/carousel.js"></script>
<script type="text/javascript" src="js/lib/sanityChecker.js"></script>
<script type="text/javascript" src="js/lib/logger.js"></script>
<script type="text/javascript" src="js/ext/modernizr.js"></script>
<script type="text/javascript" src="js/lib/localStorageChecker.js"></script>
<script type="text/javascript" src="js/lib/domNavigationUtils.js"></script>
<script type="text/javascript" src="js/lib/externalLinkDetector.js"></script>
<script type="text/javascript" src="js/lib/gondola.js"></script>
<script type="text/javascript" src="js/pages/common.js"></script>
<script type="text/javascript" src="js/pages/homepage.js"></script> 
```

我不明白我应该根据原型（基本上，每个模块）作为我的模块的参数传递什么。

在此先感谢您的帮助 ！

罗尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:20:09.817

在您的情况下，这将是一个两步过程：

1.  使用 requirejs`shim`加载不兼容 AMD 的第三方库
2.  修改现有的类以使用`define`

对于不兼容 AMD 的第三方库（例如 Prototype）[，您需要设置`shim`属性](http://requirejs.org/docs/api.html#config-shim)

一个例子可能是：

```
require.config({
    baseUrl: 'scripts/',
    paths: {
        'prototype': 'lib/prototype',
        'scriptaculous': 'lib/scriptaculous'
    },
    shim: {
        'prototype': {
            // Don't actually need to use this object as 
            // Prototype affects native objects and creates global ones too
            // but it's the most sensible object to return
            exports: 'Prototype'
        },
        'scriptaculous': {
            deps: ['prototype'],
            exports: 'Scriptaculous'
        }
        // Add more third party libs/plugins and their dependencies
    }
}); 
```

对于您编写的类，您可以使用如下模式：

**类/SomeClass.js**

```
// Sugar syntax - http://requirejs.org/docs/whyamd.html#sugar
define(function(require){
    require('prototype'); // Ensure Prototype is present

    return Class.create({
        initialize: function(name) {
            console.log('name');    
        }
    })
}); 
```

如果您需要扩展任何现有的类，也只需要这些类并将它们分配给一个变量。

要使用它，只需`require`页面中需要它的类：

**page.js**

```
require(['classes/SomeClass'], function(SomeClass){
    new SomeClass('john'); // logs 'John'
}); 
```

使用`shim`config 选项将允许您使用任何非 AMD 脚本而无需修改它们。

最后一点，Modernizr 不打算用作 AMD 模块，因为该脚本需要同步运行。所以不要包括那个！

# visual-studio - VS 2012 RC 中所有新的 HTML 文档类型是什么？

> ID：10863457
> 
> 赞同：5
> 
> 时间：2012-06-02T15:13:01.000
> 
> 标签：visual-studio, html, visual-studio-2012

我刚刚安装了 VS 2012 RC，在 HTML 工具栏下拉列表中它有很多新选项：

*   文档类型：HTML5
*   HTML5
*   XHTML5

两个 HTML5 选项有什么区别？我认为 HTML5 的建议是不指定 DOCTYPE，所以第一个选项有点像“你想要一些咖啡因和无咖啡因吗？”

我很确定 W3C 放弃了 XHTML，转而支持不断发展的 HTML，那么这个新的 XHTML5 选项是什么？更新：似乎维基百科[对此有答案](http://en.wikipedia.org/wiki/XHTML5#XHTML5)。

提前致谢！

***更新*：为未回答的位发布了一个[新问题](https://stackoverflow.com/questions/10864914/why-does-vs-2012-rc-have-both-doctype-html5-and-html5-in-the-web-toolbar)。**

PS：我不是在寻找下拉菜单用途的解释，而是对选择“DOCTYPE：HTML5”和“HTML5”之间的区别的解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T19:40:19.050

关于 HTML5 vs. DOCTYPE:HTML5 问题，这是我在使用 VS 2012 RTM 时观察到的：

DOCTYPE:{value} 选项告诉 VS 检查您的页面并尝试从 DOCTYPE 和 html 标签中找出要应用的验证级别。例如，如果我创建一个以如下开头的页面：

```
<!DOCTYPE html>
<html>
... 
```

然后 DOCTYPE:{value} 选项变为 DOCTYPE: HTML5。但是，如果我的页面是这样开始的：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
... 
```

然后它变成 DOCTYPE: XHTML5。

没有 DOCTYPE: 前缀的选项强制 VS 使用选定的验证级别，而不管页面的结构/内容可能建议什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T16:04:15.527

XHTML 5.0，通常写成XHTML5，意思是XHTML 序列化中的HTML5。参考： W3C HTML5 草案中的[HTML 与 XHTML](http://www.w3.org/TR/html5/introduction.html#html-vs-xhtml)。所以它是使用符合 XML 的标记编写的 HTML5。是的，“XHTML5”这个名字很奇怪而且令人困惑，但选择它可能是因为它假定的酷因素。

所有 HTML5 草稿都需要使用 DOCTYPE 序言。参见例如[W3C](http://www.w3.org/TR/html5/syntax.html#the-doctype) HTML5 草案中的 DOCTYPE。它甚至不是正式的文档类型声明（HTML5 没有 DTD，而[我尝试编写的尝试](http://www.cs.tut.fi/~jkorpela/html5-dtd.html)表明这将是相当有问题的）。相反，它只是一个魔术字符串，用于使浏览器应用“标准模式”与“<a href="http://www.cs.tut.fi/~jkorpela/quirks-mode.html" rel ="nofollow">怪癖模式"。它很好地完成了这项工作。

要查看“DOCTYPE:HTML5”和“HTML5”之间的区别，请查看它们对结果源代码的影响。我敢打赌，后者意味着没有 DOCTYPE 序言的 HTML5，这是不合逻辑的，因为 HTML5 需要序言。如果是这种情况，“HTML5”会使浏览器进入“怪癖模式”，这通常对任何新页面都是不利的，但对于旧页面来说通常是必要的，如果你想避免重大重写的话。

# visual-studio-2010 - Webkit webBrowser引擎visual basic 2010组件

> ID：10863458
> 
> 赞同：2
> 
> 时间：2012-06-02T15:13:06.963
> 
> 标签：visual-studio-2010, browser, webkit, components

有没有办法将 webkit 引擎浏览器组件导入到 Visual Basic 2010，以便我可以在我的项目中使用它而不是默认的 IE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:20:38.330

是的，你可以，只需使用那个[http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)
我没试过，我一直在 .NET 中使用 Gecko 引擎，从来没有遇到过问题，它更出名：[http://www.geckofx .org/](http://www.geckofx.org/)但他们刚刚破坏了他们的网站

# google-maps - 谷歌地图上的游戏路线

> ID：10863459
> 
> 赞同：0
> 
> 时间：2012-06-02T15:13:08.697
> 
> 标签：google-maps, google-maps-api-3, routes, directions

我正在创建一个小游戏，我将在地图上放置一些对象，它们只能在道路上移动。我已经检查了 API，但是我认为，我需要查询两点之间的路线，并且对象可以使用航路点到达那里吗？但是，从文档中：

> 使用 Google 路线 API 的查询限制为每天 2,500 条路线请求

因此，即使是一小部分观众，我也会很快达到极限。有什么解决方法吗？有没有为游戏实现这种行为的常用方法？我想不出另一种方式，然后只是查询每个运动信息的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:06:25.137

你没有说游戏策略是什么以及如何在游戏中使用方向，但它每天*来自客户端浏览器*的 2500 次查询，所以一个简单的胜利就是让每个玩家做自己的方向请求并发送结果到你的服务器。

请注意，每天 2500 个可能会分成每六个小时 600 个左右。每小时 100 个请求大约是每 40 秒一个，所以如果您可以将您的客户活动平均到这个水平，您可能会没事。

# c++ - 如何为 Qt 而不是 MinGW 设置 Visual Studio 2012 RC 编译器？

> ID：10863466
> 
> 赞同：8
> 
> 时间：2012-06-02T15:13:28.567
> 
> 标签：c++, qt, visual-studio-2012, compiler-construction, mingw

视窗 8 x86；Qt 4.8.2；Visual Studio 终极版 2012 RC

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T06:20:05.813

据我所知，Qt 还不支持 Visual Studio 2012 RC。但是，我自己设法用 Visual Studio 2011 beta（Visual Studio 2012 RC 的前身——他们刚刚决定重命名）构建了 Qt 4.8。它需要在编译之前对 Qt 源代码进行一些更改。以下是我使用的步骤：

*   将 mkspecs/win32-msvc2010 复制到 mkspecs/win32-msvc2012 并编辑 qmake.conf 文件以指定 _MSC_VER=1700。
*   在解压目录中的所有文件中搜索“msvc2010”并修补〜10个地方以也了解“msvc2012”</li>
*   在 Visual Studio 命令 shell 中，cd 到 tools/configure，运行以前版本的 qmake（您需要已经拥有），然后运行 ​​nmake 来更新您的 configure.exe。
*   在所有文件中搜索“make_pair<”并删除模板参数。
    *   这在 VS 2012 中可能不需要；在 VS 2011-beta 中，当指定模板参数时，我使用 make_pair 编译错误。
*   在 src\3rdparty\javascriptcore\JavaScriptCore\runtime\Structure.{h,cpp} 将 make_pair 调用更改为显式 JSC::StructureTransitionTableHash::Key 构造函数调用。
*   编辑 src\3rdparty\clucene\src\CLucene\config\define_std.h 注释掉 _CL_HAVE_HASH_MAP 和 _CL_HAVE_HASH_SET
*   在 Visual Studio 命令外壳中，运行随源安装的配置程序，例如：configure.exe -debug-and-release -platform win32-msvc2012 -opensource
    *   [可选] 将“-nomake demos -nomake examples”添加到命令行以节省构建时间，和/或添加“-mp”以并行构建
*   配置完成后，输入 nmake 开始构建。这将构建所有库的调试和发布版本以及所有工具（设计器等）的发布版本。

这花了一些功夫，但它对我有用，现在我已经启动并运行了几十个 Qt 应用程序，所以我想我会与其他想要在 Visual Studio 11 上构建 Qt 4.8.x（Visual Studio 2011 beta 或Visual Studio 2012 RC。）

如果这看起来太复杂，请稍等；我确信 Qt 很快就会支持 Visual Studio 2012。

# c# - 如何将变量传递给 C# 中的事件？

> ID：10863471
> 
> 赞同：3
> 
> 时间：2012-06-02T15:13:50.033
> 
> 标签：c#, .net

我在更改事件上使用 FileSystemWatcher，我想传递一个整数变量。

例如

```
int count = someValue;
 FileSystemWatcher watcher = new FileSystemWatcher();
watcher.Path = "C:\temp";
watcher.Changed += new FileSystemEventHandler(fileSystemWatcher_Changed); 
```

在 fileSystemWatcher_Changed 上，我想取计数值然后做一些工作。但是我如何获得该值。

如果我将 count 设为全局变量，它将无效，因为 count 会随着每个文件更改事件而更改，并且它是从用户传递的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T15:15:49.847

最简单的方法是使用 lambda 表达式：

```
watcher.Changed += (sender, args) => HandleWatcherChanged(count); 
```

`count`如果方法想要更新值，听起来你可能想要通过引用传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T15:15:09.503

你为什么不子类`FileSystemWatcher`化并将你的计数传递给子类的构造函数？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T15:30:47.813

您可以维护一个全局字典，将每个文件（路径）映射到其计数：

```
readonly Dictionary<string, int> filesChangeCount= 
    new Dictionary<string, int>(); 
```

然后，在您的事件处理程序中，只需在字典中增加适当的计数：

```
void fileSystemWatcher_Changed(object sender, FileSystemEventArgs e)
{
    lock (filesChangeCount)
    {
        int count;
        filesChangeCount.TryGetValue(e.FullPath, out count);
        filesChangeCount[e.FullPath] = count++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T15:31:27.727

如果您想知道`fileSystemWatcher_Changed`全局调用的频率，您也可以使用静态变量。如果您想知道该类的一个特定实例中的调用次数，请删除`static`关键字。

```
private static int _count;

private void fileSystemWatcher_Changed(object sender, EventArgs e)
{
    Console.WriteLine("fileSystemWatcher_Changed was called {0} times",
                      ++_count);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-20T03:17:20.120

请注意，如果您在更改的处理程序中使用全局变量，您应该用锁包围对变量的任何使用，因为您的更改事件将被多个线程调用。

```
private static int _count;
private object lockerObject = new object();
private void fileSystemWatcher_Changed(object sender, EventArgs e)
{
    lock(lockerObject)
    {
        Console.WriteLine("fileSystemWatcher_Changed was called {0} times",
                  ++_count);
    }
} 
```

# ruby-on-rails - Mongoid - 具有引用数组的字段

> ID：10863474
> 
> 赞同：2
> 
> 时间：2012-06-02T15:14:12.327
> 
> 标签：ruby-on-rails, ruby, mongoid

我是 mongoid 的新手，我有两个基本（我认为）问题。什么是在 Mongoid 中存储引用数组的最佳方法。这是我需要的一个简短示例（简单投票）：

```
{
  "_id" : ObjectId("postid"),
  "title": "Dummy title",
  "text": "Dummy text",
  "positive_voters": [{"_id": ObjectId("user1id")}, "_id": ObjectId("user2id")],
  "negative_voters": [{"_id": ObjectId("user3id")}]
} 
```

它是正确的方法吗？

```
class Person
  include Mongoid::Document
  field :title, type: String
  field :text, type: String

  embeds_many :users, as: :positive_voters
  embeds_many :users, as: :negative_voters
end 
```

还是它错了？

我也不确定，对于这种情况，它可能是一个糟糕的文档结构？如果用户已经投票并且不允许用户投票两次，我该如何优雅地获得？也许我应该使用另一种文档结构？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T03:04:21.327

您可以使用 has_many 而不是 embeds_many，因为您只想将选民的参考保存在文档中，而不是亲自保存整个用户文档

```
class Person
    include Mongoid::Document
    field :title, type: String
    field :text, type: String

    has_many :users, as: :positive_voters
    has_many :users, as: :negative_voters

    validate :unique_user

    def unique_user
       return self.positive_voter_ids.include?(new_user.id) || self.negative_voter_ids.include?(new_user.id)         
    end

end 
```

# symfony - 资产生成链接但没有文件

> ID：10863475
> 
> 赞同：25
> 
> 时间：2012-06-02T15:14:29.220
> 
> 标签：symfony, assetic

我正在尝试在 symfony2 中使用资产来管理我的 css。链接生成良好。但是，不会生成任何文件。

这是我的配置：

**布局.html.twig**

```
 {% stylesheets
      '@FooBundle/Resources/public/css/main.css'
      filter='cssrewrite'
    %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %} 
```

**配置.yml**

```
assetic:
debug:          %kernel.debug%
use_controller: false
bundles:        [ FooBundle ]
filters:
    cssrewrite: ~ 
```

**Config_dev.yml**

```
assetic:
use_controller: true 
```

Assetic 生成链接`foo.foo/app_dev.php/css/957d3aa_main_1.css`。但是，该文件不存在（或其他任何地方）。我尝试过使用权限并查看（nginx）日志，但到目前为止还没有。

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-06T11:42:22.450

在处理资产时，您有**2 个选项。**您在计算机中看不到资产的原因是您选择了选项 1。

* * *

## **选项 1：SYMFONY 可以为您动态处理文件**

这意味着开发环境中生成的每个资产路径都由 Symfony 动态处理。因此，Assetic 会生成您计算机上实际不存在的 CSS 和 JavaScript 文件的路径。这是一个内部 Symfony 控制器，它打开文件并为您返回内容。

***优点：*** - 对资产所做的更改会立即生效 - 这在开发模式下非常有用，因为 Symfony 会为您动态生成文件

***缺点：*** - 这在 prod 模式下是不可能的，因为动态渲染每个资产会太慢 - 资产将无法在您的计算机上直接访问（这就是您找不到文件的原因） - 如果您正在使用可能会很慢很多过滤器等...

要在开发模式下执行此操作，只需在 config_dev.yml 中编辑资产配置：

```
assetic:
    use_controller: true 
```

* * *

## **选项 2：转储资产文件**

如果您不想动态处理资产，您可以手动转储您的资产，这意味着实际上将您的资产以物理方式写入您的计算机上。

***优点：*** - Symfony 不需要动态生成文件，因此运行速度会更快 - 因此，这在 prod 模式下是完美的 - 文件可以在 web/ 目录中物理访问（或您选择输出它们的任何位置）

***缺点：*** - 每次更改某些内容时都需要转储资产..或者您可以使用 --watch 命令转储资产，如果您在开发模式下工作，这可能会有点烦人。

去做这个：

**将 use_controller 设置为 false (config_dev.yml)：**

```
assetic:
    debug:          %kernel.debug%
    use_controller: false 
```

如有必要，您甚至可以选择在哪里读取和输出您的资产

```
 assetic:
        read_from:      %kernel.root_dir%/Resources/views/
        write_to:       %kernel.root_dir%/../web/thefolderyouwant/ 
```

输出现在从资产中的*write_to*配置开始

```
{% stylesheets
  '@FooBundle/Resources/public/css/main.css'
  output='css/main.css'
%}
<link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %} 
```

继续的话会出现[资源错误](https://stackoverflow.com/questions/7861030/symfony2-assetic-route-and-resource-errors)，所以在config_dev.yml中注释掉或者删除这些资产路由：

```
_assetic:
    resource: .
    type:     assetic 
```

最后，您可以自动生成资产，以便您所做的更改立即生效：

```
php app/console assetic:dump --watch 
```

在这种情况下，该文件现在应该可用：

*/web/thefolderyouwant/css/main.css*

有关更多信息，请参阅食谱：[如何使用 Assetic 进行资产管理？](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T21:45:59.870

It also doesn't generate files when `use_controller: true` is on if you're using SASS to compile SCSS but `ruby` or the ruby gem `sass` not installed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T14:45:38.723

我有同样的问题，我只需要安装java

```
sudo apt-get install default-jre 
```

您还可以查看输出的开头，这可能会有所帮助：

```
app/console assetic:dump > outfile 2>&1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-03T18:40:51.920

我终于找到了解决方案！我在这个问题上工作了几个小时！你写了：

```
'@FooBundle/Resources/public/css/main.css' filter='cssrewrite' 
```

但是“cssrewrite”过滤器不接受@FooBundle 语法！你所要做的：

```
php app/console assets:install 
```

Symfony 将创建：

```
web/bundles/yourbundle/css/main.css 
```

现在，在您的树枝模板中，替换：

```
'@FooBundle/Resources/public/css/main.css' filter='cssrewrite' 
```

和：

```
'bundles/yourbundle/css/main.css' filter='cssrewrite' 
```

希望它会帮助别人！（它是在 Symfony 文档中编写的.. ^^）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-01T12:34:20.337

我有一个与此非常相似的错误。突然，资产停止工作。我唯一添加的是[FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)。也许您也在使用其余捆绑包。

这是我的解决方案：

```
fos_rest:
    routing_loader:
        default_format: json

    param_fetcher_listener: true
    body_listener: true

    format_listener:
        rules:
            # render "/api" requests as json
            - { path: ^/api, priorities: [ json ], fallback_format: json, prefer_extension: true }
            # default, fallback rendering twig templates
            - { path: ^/, priorities: ['html', 'application/javascript', 'text/css', '*/*'], fallback_format: html, prefer_extension: true } 
```

我改为`priorities: ['html', '*/*']`现在`priorities: ['html', 'application/javascript', 'text/css', '*/*']`一切正常。

# javascript - 有没有办法在我的单元测试中测试一个对象是否“是”Backbone.Model？

> ID：10863483
> 
> 赞同：22
> 
> 时间：2012-06-02T15:15:25.913
> 
> 标签：javascript, backbone.js

作为我对骨干项目的单元测试（使用 QUnit）的一部分，我测试了一些返回骨干模型数组的集合操作函数。

有没有办法直接测试（为了理智起见）我的数组中的对象是否扩展 Backbone.Model 或者我应该只做一个鸭子类型检查（如果是这样，如何以及在哪个唯一属性上）？

由于 javascript 中没有真正的“类”构造，`typeof`因此显然不会在这里解决问题。

我可以看到这在我的 Collections 的其他测试中很有用，或者检查事物是否是我的特定 Backbone 类的实例等。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-02T15:18:03.200

如何使用[`instanceof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/instanceof)：

```
console.log(yourObject instanceof Backbone.Model); 
```

> instanceof 运算符测试对象的原型链中是否具有构造函数的原型属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T20:15:45.517

对对象类型的检查是 JavaScript 等语言中的代码异味。

如果您需要在调用特定方法时知道您的集合正在返回特定模型，请使用已知模型填充集合并与这些模型进行比较。

```
MyModel = Backbone.Model.extend({});

MyCollection = Backbone.Collection.extend({
  model: MyModel,

  getThatOne: function(){
    return this.at[0];
  }
});

m1 = new MyModel();
m2 = new MyModel();

col = new MyCollection([m1, m2]);

retrieved = col.getThatOne();

retrieved === m1 //=> true 
```

# android - 秒表构造函数需要 URL scxmlDocument

> ID：10863490
> 
> 赞同：1
> 
> 时间：2012-06-02T15:15:45.087
> 
> 标签：android, scxml

我有个问题。我想在我的应用程序中添加秒表显示。我用这个[页面](http://commons.apache.org/scxml/usecases/scxml-stopwatch-on-android.html)作为参考。我下载并添加了必要的 commons-scxml-0.9.jar 库（带有源代码）。Eclipse 中没有错误，但是当我调试它时，在这个[类](http://commons.apache.org/scxml/usecases/scxml-stopwatch-on-android/StopWatchActivity.java.txt)的超类（AbstractStateMachine）的构造函数中使用以下命令调用：

*super(StopWatch.class.getClassLoader().getResource("org/apache/commons/scxml/env/stopwatch.xml"));*

但是超类构造函数没有任何属性。它需要*最终 URL scxmlDocument*，但只出现*null*。

我知道 stopwatch.xml 的外观，但我应该把它放在哪里，以及如何从中创建*最终 URL scxmlDocument*？

我尝试了一切，但没有任何效果。

谢谢你们 ！！

这是 stopwatch.xml，如果我添加它，eclipse 会因为*id*属性而报告错误：

```
`<?xml version="1.0" ?> 
```

```
 <transition event="watch.start" target="running" /> 
    </state>
    <state id="running">
            <transition event="watch.split" target="paused" /> 
            <transition event="watch.stop" target="stopped" />
    </state>
    <state id="paused">
            <transition event="watch.unsplit" target="running" /> 
            <transition event="watch.stop" target="stopped" /> 
    </state>
    <state id="stopped">
            <transition event="watch.reset" target="reset" /> 
    </state> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T19:57:37.993

你的代码看起来不错。如果您在运行时遇到异常，则应该将其包含在您的问题中。XML 看起来也很好，除了您排除了前几行和最后一行（这是故意的还是您的 XML 真的缺少这些行？）。这是我的 XML：

```
<?xml version="1.0"?>
<!--
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->
<scxml xmlns="http://www.w3.org/2005/07/scxml"
       version="1.0"
       initial="reset">

    <state id="reset">
        <transition event="watch.start"   target="running"/>
    </state>

    <state id="running">
        <transition event="watch.split"   target="paused"/>
        <transition event="watch.stop"    target="stopped"/>
    </state>

    <state id="paused">
        <transition event="watch.unsplit" target="running"/>
        <transition event="watch.stop"    target="stopped"/>
    </state>

    <state id="stopped">
        <transition event="watch.reset"   target="reset"/>
    </state>

</scxml> 
```

至于将 XML 文件放在哪里，通常您会将其放在 SRC 目录中。当 Eclipse 进行构建时，它不知道如何处理 XML 文件，因此它的默认行为是将其复制到编译代码所在的 BIN 目录。你可能需要做一个`Project > Clean...`来实现这一点。这是运行时环境通常期望找到这样的资源的地方。

这里有一个非常好的技巧：如果您在任何版本的 Windows 上进行开发，您可以访问 Microsoft 非常棒的 Sysinternals 站点 ( [http://technet.microsoft.com/en-US/sysinternals](http://technet.microsoft.com/en-US/sysinternals) )。在这里您可以找到出色的 Process Monitor 实用程序。下载、安装和运行这个免费的实用程序。在实用程序中，创建一个进程监视器过滤器：`Path | contains | stopwatch.xml` 确保启用此过滤器并禁用所有其他（预定义）过滤器。

然后运行你编译的秒表程序。该实用程序将显示应用程序（以及其中包含的所有类加载器）查找的每个位置`stopwatch.xml`。

然后，您可以移动/复制/任何文件，以确保它位于应用程序查找文件的位置。此实用程序对于编写 J2EE 应用程序（例如 Tomcat、Websphere 等）时出现的类似“我找不到资源”问题特别方便。

最后，虽然您没有提及任何有关依赖 jar 文件的内容，但请确保它们位于类路径中：

```
commons-beanutils-1.9.2.jar
commons-digester-2.1.jar
commons-jexl-1.1.jar
commons-logging-1.2.jar
commons-scxml-0.9.jar
log4j-1.2.17.jar
xalan.jar 
```

# xml - 使用 Muenchian 方法对多个键进行 XSLT 分组

> ID：10863491
> 
> 赞同：2
> 
> 时间：2012-06-02T15:15:45.833
> 
> 标签：xml, xslt, xslt-1.0, xslt-grouping, muenchian-grouping

这是输入文件。

所有这些块都包裹在一个`<allocfile>`没有出现的标签中，不知道为什么？所有这些块都包裹在顶级元素`<xml>`中。

```
<XML>
  <AllocFile>
    <alc>1</alc>
    <No>11/10</No>
    <DT>20090401</DT> 
    <G_H>147</G_H>
    <FUN>125487</FUN>
    <oH>11</oH>
    <y>9</y>
    <AMOUNT>8000000</AMOUNT>
    <Code>033195</Code>
    <hd1>1234</hd1>
  </AllocFile>
  <AllocFile>
    <alc>2</alc>
    <No>14/10</No>
    <DT>20090401</DT>
    <G_H>147</G_H>
    <FUN>125487</FUN>
    <oH>11</oH>
    <y>9</y>
    <AMOUNT>8400000</AMOUNT>
    <Code>033195</Code>
    <hd1>1234</hd1>
  </AllocFile>
  <AllocFile>
    <alc>3</alc>
    <No>74/10</No>
    <DT>20090401</DT>
    <G_H>147</G_H>
    <FUN>125487</FUN>
    <oH>11</oH>
    <y>9</y>
    <AMOUNT>8740000</AMOUNT>
    <Code>033195</Code>
    <hd1>1234</hd1>
  </AllocFile>
  <AllocFile>
    <alc>2</alc>
    <No>74/10</No>
    <DT>20090401</DT>
    <G_H>117</G_H>
    <FUN>125487</FUN>
    <oH>19</oH>
    <y>9</y>
    <AMOUNT>74512</AMOUNT>
    <Code>033118</Code>
    <hd1>1234</hd1>
  </AllocFile>
  <AllocFile>
    <alc>3</alc>
    <No>14/10</No>
    <DT>20090401</DT>
    <G_H>117</G_H>
    <FUN>125487</FUN>
    <oH>19</oH>
    <y>9</y>
    <AMOUNT>986541</AMOUNT>
    <Code>033147</Code>
    <hd1>1234</hd1>
  </AllocFile> 
</XML> 
```

输出是

```
<Header1>
  <Hd1>1234</Hd1>
  <CodeHeader>
    <Code>033195</Code>
    <Header2>
      <G_H>147</G_H>
      <FUN>125487</FUN>
      <oH>11</oH>
      <y>9</y>
      <allocheader>
        <alc>1</alc>
        <No>11/10</No>
        <DT>20090401</DT>
        <AMOUNT>8000000</AMOUNT>
      </allocheader>
      <allocheader>
        <alc>2</alc>
        <No>14/10</No>
        <DT>20090401</DT>
        <AMOUNT>8400000</AMOUNT>
      </allocheader>
      <allocheader>
        <alc>3</alc>
        <No>74/10</No>
        <DT>20090401</DT>
        <AMOUNT>8740000</AMOUNT>
      </allocheader>
    </Header2>
  </CodeHeader>
  <CodeHeader>
        <Code>033118</Code>
        <Header2>
      <G_H>117</G_H>
      <FUN>125487</FUN>
         <oH>19</oH>
            <y>9</y>
             <allocheader>
             <alc>2</alc>
             <No>74/10</No>
             <DT>20090401</DT>
             <AMOUNT>74512</AMOUNT>
           </allocheader>
       </Header2>
    </codeHeader>
   <CodeHeader>
        <Code>033147</Code>
           <Header2>
          <G_H>117</G_H>
          <FUN>125487</FUN>
          <oH>19</oH>
          <y>9</y>
         <allocheader>
           <alc>3</alc>
            <No>14/10</No>
            <DT>20090401</DT>
            <AMOUNT>986541</AMOUNT>
          </allocheader>
         </Header2>
      </CodeHeader>
</Header1> 
```

输入文件需要在多个key的基础上进行排序和分组。我继续使用该`concat`函数和 Muenchian 方法，但并没有从网上获得太多帮助。我正在使用 XSLT 1.0。

分组规则

*   文件中的所有节点都将具有`<hd1>`值，`1234..`这将成为键的第一组，并在输出中显示为`<Header1>`

    *   分组的第二个关键是节点代码。具有相同值的节点被组合在一起。显示为。代码头
*   第二个键是节点组`G_H`, `FUN`, `oH`, `y`。如果所有这些都具有相同的节点值，则它们将组合在一起。它在输出中显示为`<Header2>`

*   `<alc>`在节点, `<No>`, `<DT>`,上不会发生分组`<AMOUNT>`。它们在每个组中都有不同的值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T19:16:16.253

如果**hd1**元素始终为“1234”，那么您并没有真正按它们分组，但如果您是这样，您将定义一个简单的键

```
<xsl:key name="header1" match="AllocFile" use="hd1" /> 
```

对于第二个键，您需要考虑**Code**元素

```
<xsl:key name="header2" match="AllocFile" use="concat(hd1, '|', Code)" /> 
```

然后对于最后一个键，您将定义一个更复杂的键来处理所有元素

```
<xsl:key name="header3" 
   match="AllocFile" 
   use="concat(hd1 '|', Code, '|', G_H, '|', FUN, '|', oH, '|', y)" /> 
```

请注意使用“管道”字符作为分隔符。选择一个在任何选定元素中都不会出现的分隔符很重要。

然后，要查找不同的**header1**元素，您将查找首先出现在**header1**键中的元素

```
<xsl:apply-templates 
   select="AllocFile[generate-id() = generate-id(key('header1', hd1)[1])]" 
   mode="header1" /> 
```

要在每个**header1**元素中查找不同的**Code**元素，您可以执行以下操作

 **```
<xsl:apply-templates 
   select="key('header1', hd1)
     [generate-id() = generate-id(key('header2', concat(hd1, '|', Code))[1])]" 
   mode="header2" /> 
```

最后，在每个代码组中，要找到不同的“header3”元素，您将在第三个键中查找第一个元素

```
<xsl:apply-templates 
 select="key('header2', concat(hd1, '|', Code))
    [generate-id() = 
     generate-id(key('header3', concat(hd1, '|', Code, '|', G_H, '|', FUN, '|', oH, '|', y))[1])]" 
 mode="header3" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="header1" match="AllocFile" use="hd1"/>
   <xsl:key name="header2" match="AllocFile" use="concat(hd1, '|', Code)"/>
   <xsl:key name="header3" match="AllocFile" use="concat(hd1, '|', Code, '|', G_H, '|', FUN, '|', oH, '|', y)"/>

   <xsl:template match="/XML">
      <xsl:apply-templates select="AllocFile[generate-id() = generate-id(key('header1', hd1)[1])]" mode="header1"/>
   </xsl:template>

   <xsl:template match="AllocFile" mode="header1">
      <Header1>
         <Hd1>
            <xsl:value-of select="hd1"/>
         </Hd1>
         <xsl:apply-templates select="key('header1', hd1)[generate-id() = generate-id(key('header2', concat(hd1, '|', Code))[1])]" mode="header2"/>
      </Header1>
   </xsl:template>

   <xsl:template match="AllocFile" mode="header2">
      <CodeHeader>
         <xsl:copy-of select="Code"/>
         <xsl:apply-templates select="key('header2', concat(hd1, '|', Code))[generate-id() = generate-id(key('header3', concat(hd1, '|', Code, '|', G_H, '|', FUN, '|', oH, '|', y))[1])]" mode="header3"/>
      </CodeHeader>
   </xsl:template>

   <xsl:template match="AllocFile" mode="header3">
      <Header2>
         <xsl:copy-of select="G_H|FUN|oH|y"/>
         <xsl:apply-templates select="key('header3', concat(hd1, '|', Code, '|', G_H, '|', FUN, '|', oH, '|', y))"/>
      </Header2>
   </xsl:template>

   <xsl:template match="AllocFile">
      <allocheader>
         <xsl:copy-of select="alc|No|DT|AMOUNT"/>
      </allocheader>
   </xsl:template>
</xsl:stylesheet> 
```

请注意在模板匹配上使用**mode**属性来区分所有匹配**AllocFile**元素的多个模板。

应用于您的示例 XML 时，将输出以下内容

```
<Header1>
   <Hd1>1234</Hd1>
   <CodeHeader>
      <Code>033195</Code>
      <Header2>
         <G_H>147</G_H>
         <FUN>125487</FUN>
         <oH>11</oH>
         <y>9</y>
         <allocheader>
            <alc>1</alc>
            <No>11/10</No>
            <DT>20090401</DT>
            <AMOUNT>8000000</AMOUNT>
         </allocheader>
         <allocheader>
            <alc>2</alc>
            <No>14/10</No>
            <DT>20090401</DT>
            <AMOUNT>8400000</AMOUNT>
         </allocheader>
         <allocheader>
            <alc>3</alc>
            <No>74/10</No>
            <DT>20090401</DT>
            <AMOUNT>8740000</AMOUNT>
         </allocheader>
      </Header2>
   </CodeHeader>
   <CodeHeader>
      <Code>033118</Code>
      <Header2>
         <G_H>117</G_H>
         <FUN>125487</FUN>
         <oH>19</oH>
         <y>9</y>
         <allocheader>
            <alc>2</alc>
            <No>74/10</No>
            <DT>20090401</DT>
            <AMOUNT>74512</AMOUNT>
         </allocheader>
      </Header2>
   </CodeHeader>
   <CodeHeader>
      <Code>033147</Code>
      <Header2>
         <G_H>117</G_H>
         <FUN>125487</FUN>
         <oH>19</oH>
         <y>9</y>
         <allocheader>
            <alc>3</alc>
            <No>14/10</No>
            <DT>20090401</DT>
            <AMOUNT>986541</AMOUNT>
         </allocheader>
      </Header2>
   </CodeHeader>
</Header1> 
```

如果您确实有不同的**hd1**元素，而不是“1234”，那么您最终会得到多个**Header1**元素，因此您的输出将不是格式正确的 XML。通过修改与文档元素匹配的初始模板，将它们包装在根元素中就足够简单了。

```
<xsl:template match="/XML">
   <Root>
      <xsl:apply-templates select="AllocFile[generate-id() = generate-id(key('header1', hd1)[1])]" mode="header1" />
   </Root>
</xsl:template> 
```**

# backbone.js - 在主干js中的只读视图和编辑视图之间切换

> ID：10863497
> 
> 赞同：8
> 
> 时间：2012-06-02T15:16:18.457
> 
> 标签：backbone.js

我正在寻找 Backbone js 中的模式以在只读视图和编辑视图之间切换。如果视图的触发器在视图外部，那么没问题我可以创建适当的视图（只读或编辑）并渲染它，但在我的情况下，编辑视图的触发器将在只读视图内。

例如，假设我正在显示一个处方，默认情况下它处于只读模式，并且在悬停时会显示一个编辑图标。单击此编辑图标时，只读视图现在应替换为编辑视图。实现这一目标的最佳方法是什么。以下是我正在考虑的几个选项

1.  有一个带有编辑图标的 PrescriptionView 以及其中编辑模式所需的所有表单字段。它还将具有基于编辑触发器将视图从只读模式更改为编辑模式的逻辑。
2.  有两个视图 PrescriptionReadView 和 PrescriptionEditView。ReadView 将具有编辑图标，并且单击时将 readview 替换为 editview。

我倾向于＃2，但不确定如何以优雅的方式实现它。对此的任何想法都会有所帮助。

谢谢扎弗

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T19:59:58.510

如果您将漂亮的视图与编辑视图分开，您的生活将大大减轻痛苦，因为从所有意图和目的来看，它们是相同数据的两个*不同视图，具有不同的事件处理需求和不同的行为。*所以，引导你走向#2 的直觉是*正确的*。

我能想到的最简洁的实现是制作一个可以处理模式交换事件的容器视图（比如 PrescriptionView）。容器将拥有对当前活动处方视图的引用，并将处理该视图的创建以及非活动视图的清理（删除和解除绑定）。这使所有这些逻辑保持良好和独立。

# asp.net-web-api - ASP.Net Web API 模型绑定不像在 MVC 3 中那样工作

> ID：10863499
> 
> 赞同：25
> 
> 时间：2012-06-02T15:16:19.677
> 
> 标签：asp.net-web-api, model-binding, custom-model-binder, jquery-datatables-editor

我的印象是，ASP.Net Web API 中的模型绑定应该支持与 MVC 支持的最低功能级别的绑定。

采取以下控制器：

```
public class WordsController : ApiController
{
    private string[] _words = new [] { "apple", "ball", "cat", "dog" };

    public IEnumerable<string> Get(SearchModel searchSearchModel)
    {
        return _words
            .Where(w => w.Contains(searchSearchModel.Search))
            .Take(searchSearchModel.Max);
    }
}

public class SearchModel
{
    public string Search { get; set; }
    public int Max { get; set; }
} 
```

我要求它：

```
http://localhost:62855/api/words?search=a&max=2 
```

不幸的是，模型没有像在 MVC 中那样绑定。为什么这不像我期望的那样具有约束力？我的应用程序中将有很多不同的模型类型。如果绑定能正常工作就好了，就像在 MVC 中一样。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-02T17:17:49.643

看看这个：[WebAPI如何做参数绑定](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

您需要像这样装饰您的复杂参数：

```
public IEnumerable<string> Get([FromUri] SearchModel searchSearchModel) 
```

或者

```
public IEnumerable<string> Get([ModelBinder] SearchModel searchSearchModel) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T20:49:05.660

我发现整个 Web API 2 是一个困难的学习曲线，有很多“陷阱”。我已经阅读了一些关键书籍，这些书籍涵盖了这个丰富的产品提供的许多奥秘的细微差别。但基本上，我认为必须有一些核心功能可以利用最好的功能。所以，我着手做四项直截了当的任务。1\. 接受来自浏览器的查询字符串到 Api2 客户端并填充一个简单的 .NET 模型。2\. 让客户端向 Api2 服务器提交一个**异步**Post，该 Api2 服务器以从先前模型 3 中提取的 JSON 编码。让服务器对来自客户端的 Post 请求进行简单的转换。4\. 将其全部传回浏览器。就是这个。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using System.Threading.Tasks;
using Newtonsoft.Json;

namespace Combined.Controllers  // This is an ASP.NET Web Api 2 Story
{
    //  Paste the following string in your browser -- the goal is to convert the last name to lower case 
    //  The return the result to the browser--You cant click on this one. This is all Model based. No Primitives.
    //  It is on the Local IIS--not IIS Express. This can be set in Project->Properties=>Web http://localhost/Combined with a "Create Virtual Directory"
    //  http://localhost/Combined/api/Combined?FirstName=JIM&LastName=LENNANE  // Paste this in your browser After the Default Page it displayed
    //
    public class CombinedController : ApiController
    {
        // GET: api/Combined   This handels a simple Query String request from a Browser
        // What is important here is that populating the model is from the URI values NOT the body which is hidden
        public Task<HttpResponseMessage> Get([FromUri]FromBrowserModel fromBrowser)
        {
            //
            //  The Client looks at the query string pairs from the Browser
            //  Then gets them ready to send to the server
            //
            RequestToServerModel requestToServerModel = new RequestToServerModel();
            requestToServerModel.FirstName = fromBrowser.FirstName;
            requestToServerModel.LastName = fromBrowser.LastName;
            //  Now the Client send the Request to the Server async and everyone awaits the Response
            Task<HttpResponseMessage> response = PostAsyncToApi2Server("http://localhost/Combined/api/Combined", requestToServerModel );
            return response;    // The response from the Server should be sent back to the Browser from here.
        }
        async Task<HttpResponseMessage> PostAsyncToApi2Server(string uri, RequestToServerModel requestToServerModel)
        {
            using (var client = new HttpClient())
            {
                //  Here the Method waits for the Request to the Server to complete
                return await client.PostAsJsonAsync(uri, requestToServerModel)
                    .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode());
            }
        }
        //  POST: api/Combined    This Handles the Inbound Post Request from the Client
        //  NOTICE THE [FromBody] Annotation. This is the key to extraction the model from the Body of the Post Request-- not the Uri ae in [FromUri]
        //  Also notice that there are no Async methods here. Not required, async would probably work also.
        //
        public HttpResponseMessage Post([FromBody]RequestToServerModel fromClient)
        {
            //
            //  Respond to an HttpClient request Synchronously
            //  The model is serialised into Json by specifying the Formatter Configuration.Formatters.JsonFormatter
            //  Prep the outbound response
            ResponseToClientModel responseToClient = new ResponseToClientModel();
            //
            //  The conversion to lower case is done here using the Request Body Data Model
            //            
            responseToClient.FirstName = fromClient.FirstName.ToLower();
            responseToClient.LastName = fromClient.LastName.ToLower();
            //
            //  The Client should be waiting patiently for this result
            //
            using (HttpResponseMessage response = new HttpResponseMessage())
            {
                return this.Request.CreateResponse(HttpStatusCode.Created, responseToClient, Configuration.Formatters.JsonFormatter);    // Respond only with the Status and the Model
            }
        }
        public class FromBrowserModel
        {
            public string FirstName { get; set; }
            public string LastName { get; set; }
        }
        public class RequestToServerModel
        {
            public string FirstName { get; set; }
            public string LastName { get; set; }
        }

        public class ResponseToClientModel
        {
            public string FirstName { get; set; }
            public string LastName { get; set; }
        }

    }
}
```

# symfony - Symfony2 中的唯一验证器

> ID：10863505
> 
> 赞同：5
> 
> 时间：2012-06-02T15:17:41.497
> 
> 标签：symfony

我有一个用户注册表单。此表单必须做的一件事是强制新用户电子邮件地址的唯一性。换句话说，新用户的电子邮件地址不能是其他人已经使用的电子邮件地址。

我还没有找到一个可接受的解决方案来解决这个问题，考虑到这种需求是多么简单和普遍（以及解决方案在 Rails 中是多么简单和容易！），这有点令人惊讶。

我已经看过[这个问题/答案](https://stackoverflow.com/questions/7600379/symfony-2-unique-validator)，但该解决方案的问题在于，它似乎不仅在创建记录时验证“唯一性”，而且在每次您尝试更新记录时也是如此。因此，一旦保存记录，您就无法再次更新它，因为它会告诉您该电子邮件地址已被使用。（也许我执行他们的解决方案是错误的，但看起来我不是。）

有没有人有一个实体/表单上的唯一性验证器的工作示例（不仅仅是[文档](http://symfony.com/doc/current/book/validation.html)的链接，请，我已经阅读过）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-05T15:33:10.870

好的，我有它的工作。无论我是否希望在所有用户表单上“验证”电子邮件唯一性，我一直遇到的问题是我能够通过验证组解决的问题。`User`这是我实体的相关部分。注意注释`groups={"registration"}`部分：`@UniqueEntity`

```
/**
 * VNN\PressboxBundle\Entity\User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity
 * @UniqueEntity(fields="email", message="Sorry, this email address is already in use.", groups={"registration"})
 * @UniqueEntity(fields="username", message="Sorry, this username is already taken.", groups={"registration"})
 */
class User implements AdvancedUserInterface, \Serializable
{
    /** 
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /** 
     * @var string $email
     * @Assert\NotBlank()
     * @Assert\Email()
     *
     * @ORM\Column(name="email", type="string", length=255, unique=true)
     */
    private $email;

    /**
     * @var string $username
     * @Assert\NotBlank()
     *
     * @ORM\Column(name="username", type="string", length=255, unique=true)
     */
    private $username; 
```

还有我的表单类（注意最后一个函数）：

```
<?php

namespace VNN\PressboxBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class UserType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {   
        $builder
            ->add('first_name')
            ->add('last_name')
            ->add('email')
            ->add('username')
            ->add('password', 'password')
            ->add('athletic_director_email')
            ->add('school')
            ->add('active', 'hidden')
            ->add('transition_key', 'hidden')
        ;   
    }   

    public function getName()
    {   
        return 'vnn_pressboxbundle_usertype';
    }   

    // The following function is what's important here.
    // This tells this form to use the "registration" validation group.
    public function getDefaultOptions(array $options)
    {   
        return array(
            'validation_groups' => array('registration')
        );  
    }   
} 
```

我相信就是这样。我不认为我必须在其他任何地方做任何特别的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T17:52:15.060

您可以对其进行硬编码，例如

```
$form->handleRequest($request);

if ($form->isSubmitted()) {
    if ($existingUser = $this->getDoctrine()->getRepository('AppBundle:User')->findOneBy(['email' => trim($form->getData()->getEmail())])) {
          $form->get('email')->addError(new FormError('Email already used'));
     }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T15:34:47.660

如果您使用的是 Doctrine，您可以尝试直接在实体中设置唯一标志吗？

```
/**
 * @ORM\Column(type="string", unique="true")
 */
protected $email; 
```

# c - 在节头精灵文件中获取 sh_name 成员

> ID：10863510
> 
> 赞同：15
> 
> 时间：2012-06-02T15:18:48.443
> 
> 标签：c, linux, unix, elf

我正在尝试通过访问`sh_name`elf 文件的成员来获得节名称的正确偏移量，但它一直给我零或 null ......

我应该只使用`mmap()`和`elf.h`没有辅助功能

所以我做了：

```
void* map_start = mmap(0, fd_stat.st_size, PROT_READ | PROT_WRITE , MAP_SHARED, fd, 0))
header = (Elf32_Ehdr *) map_start;  
secoff = header->e_shoff;    
section = (Elf32_Shdr *)(map_start + secoff); 
```

但是当我这样做时：

```
printf("name offset = %d\n", (section->sh_name)); 
```

它一直给我0 ...我做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-02T20:05:47.873

> 当我这样做时，`printf("name offset = %d\n", (section->sh_name));`它一直给我0 ...我做错了什么？

你没有做错*任何*事。

`sh_name`不是指针，它是节的偏移量，`.shstrtab`其中包含实际的节名称。

您可以从 中找到该`.shstrtab`部分`header->e_shstrndx`。

更新：

> 不是假设将偏移量打印为 int 吗？

它打印`0`。是什么让你相信这`0`不是一个 int？

> 但是我要打印名字吗？

也许这个例子会解释？

```
#include <sys/stat.h>
#include <sys/mman.h>
#include <elf.h>
#include <stdio.h>
#include <fcntl.h>

int print_shdr(const char *const fname, size_t size) {
  int fd = open(fname, O_RDONLY);
  char *p = mmap(0, size, PROT_READ, MAP_PRIVATE, fd, 0);

  Elf32_Ehdr *ehdr = (Elf32_Ehdr*)p;
  Elf32_Shdr *shdr = (Elf32_Shdr *)(p + ehdr->e_shoff);
  int shnum = ehdr->e_shnum;

  Elf32_Shdr *sh_strtab = &shdr[ehdr->e_shstrndx];
  const char *const sh_strtab_p = p + sh_strtab->sh_offset;

  for (int i = 0; i < shnum; ++i) {
    printf("%2d: %4d '%s'\n", i, shdr[i].sh_name,
           sh_strtab_p + shdr[i].sh_name);
  }

  return 0;
}

int main(int argc, char *argv[])
{
  struct stat st;
  const char *fname = "/proc/self/exe";

  if (argc > 1)
    fname = argv[1];

  if (stat(fname, &st) != 0) {
    perror("stat");
    return 1;
  }
  return print_shdr(fname, st.st_size);
}

$ gcc -g dump_shdr.c -m32 -std=c99
$ ./a.out
 0:    0 ''
 1:   27 '.interp'
 2:   35 '.note.ABI-tag'
 3:   49 '.note.gnu.build-id'
 4:   72 '.hash'
 5:   68 '.gnu.hash'
 6:   78 '.dynsym'
 7:   86 '.dynstr'
 8:   94 '.gnu.version'
 9:  107 '.gnu.version_r'
10:  122 '.rel.dyn'
11:  131 '.rel.plt'
12:  140 '.init'
13:  135 '.plt'
14:  146 '.text'
15:  152 '.fini'
16:  158 '.rodata'
17:  166 '.eh_frame'
18:  176 '.ctors'
19:  183 '.dtors'
20:  190 '.jcr'
21:  195 '.dynamic'
22:  204 '.got'
23:  209 '.got.plt'
24:  218 '.data'
25:  224 '.bss'
26:  229 '.comment'
27:  238 '.debug_aranges'
28:  253 '.debug_pubnames'
29:  269 '.debug_info'
30:  281 '.debug_abbrev'
31:  295 '.debug_line'
32:  307 '.debug_frame'
33:  320 '.debug_str'
34:  331 '.debug_loc'
35:   17 '.shstrtab'
36:    1 '.symtab'
37:    9 '.strtab' 
```

# objective-c - NSLocalizedString 不起作用

> ID：10863513
> 
> 赞同：3
> 
> 时间：2012-06-02T15:18:58.330
> 
> 标签：objective-c, ios, xcode, cocoa-touch, localization

我想在我的应用程序中使用 NSLocalizedString 但它总是失败。我要做的是：

*   在项目属性中定义 3 个本地化（参见下面的屏幕截图）
*   创建一个新文件：资源字符串文件
*   如果存在 file.strings，请签入应用程序包

然后我使用 NSLocalizedStrings 如下，但它不起作用！

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    NSString *v1 = NSLocalizedString(@"MyWindow", nil);

    //NSString *v1 = [[NSBundle mainBundle] localizedStringForKey:(@"MyWindow") value:@"" table:nil];
    [label setStringValue:v1];
} 
```

在我的 3 个 .strings 文件中，我定义了以下键/值： "MyWindow" = "Ma Fenetre";

通常，我的标签应该显示“Ma Fenetre”而不是“MyWindows”。您可以[在此处下载示例项目并告诉我问题出在哪里](http://dl.free.fr/mon.pl?i=115818&h=e5n8Q7dn)。

在我的应用程序包中查看 Resources 文件夹的内容：

```
DerivedData om$ find test/Build/Products/Debug/test.app/Contents/Resources/
test/Build/Products/Debug/test.app/Contents/Resources/
test/Build/Products/Debug/test.app/Contents/Resources//de.lproj
test/Build/Products/Debug/test.app/Contents/Resources//de.lproj/File.strings
test/Build/Products/Debug/test.app/Contents/Resources//en.lproj
test/Build/Products/Debug/test.app/Contents/Resources//en.lproj/File.strings
test/Build/Products/Debug/test.app/Contents/Resources//fr.lproj
test/Build/Products/Debug/test.app/Contents/Resources//fr.lproj/File.strings
test/Build/Products/Debug/test.app/Contents/Resources//MainMenu.nib 
```

谢谢 Elfoiros

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-02T15:27:07.253

`NSLocalizedString`默认使用`Localizable.strings`文件。更改您的`File.strings`姓名，然后重试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-23T05:56:47.687

每次您在 .Strings 文件中进行更改时，您都需要清理您的项目并从设备和模拟器中删除应用程序。这是开发本地化应用程序的唯一方法。祝你编码愉快。！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-02T15:30:43.560

正如亚当所说，`NSLocalizedString`用于`Localizable.strings`查找表。要指定自定义表，请使用：

`NSLocalizedStringFromTable(@"MyWindow", @"File");`

[文档](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/localizedStringForKey%3avalue%3atable%3a)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-29T06:30:54.980

需要注意区分大小写的文件名：Localizable.strings 不是 localizable.strings。只需在 Finder 中重命名，删除 Xcode 项目中的引用并将 Localizable 字符串添加回项目。然后确保在文件检查器中选择了适当的本地化框。不知道是否有更好的光滑工艺。

# big-theta - 用大 theta 表示法表示 (x^3)/1000 - 100*x^2 - 100*x + 3

> ID：10863514
> 
> 赞同：2
> 
> 时间：2012-06-02T15:18:58.923
> 
> 标签：big-theta

你好，有人可以帮我`(x^3)/1000 - 100*x^2 - 100*x + 3`用大θ符号表达。在我看来`x^3`，但显然`x = 0`这个多项式给出的值是 3。乘以`x^3`任何常数根本无济于事。是否有解决此类问题的标准方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:42:52.613

它不会低于 3。对于任何常数 c，它最终也不会低于 c*x 或 c*x^2 **。**所以肯定是 Θ(x^3)。

# version-control - 替换现有 Mercurial 提交数据中的电子邮件地址

> ID：10863517
> 
> 赞同：2
> 
> 时间：2012-06-02T15:20:15.143
> 
> 标签：version-control, mercurial

我有一个 Mercurial (hg) 存储库，其中包含错误（格式错误）的电子邮件地址附加到我推送的所有提交中。我可以直接访问远程服务器上的存储库文件（通过 ssh）。有什么方法可以直接修改存储库文件以更正提交历史记录中格式错误的电子邮件的每个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:05:43.347

如果不重写历史记录，您将无法做到这一点。Mercurial 存储库中的每个变更集 ID 都是根据变更集数据计算的加密哈希。从本质上讲，更改电子邮件地址与更改其中一个文件的内容相同——在每个受影响的变更集中。

你真的需要修复那封电子邮件吗？如果你通过重写历史来做到这一点，你最终会得到一个本质上是一个新的存储库的东西。您的开发伙伴将不得不放弃他的代表副本，转而使用重新创建的代表。

我相信，要进行实际转换，带有[地图](http://mercurial.selenic.com/wiki/ConvertExtension#A--authors)的内置[`convert`扩展应该可以帮助您。](http://mercurial.selenic.com/wiki/ConvertExtension)它将创建具有固定作者姓名的存储库副本。[`--authors`](http://mercurial.selenic.com/wiki/ConvertExtension#A--authors)

# c# - C#和数据库：获取和设置数据库中的多选下拉列表

> ID：10863520
> 
> 赞同：0
> 
> 时间：2012-06-02T15:20:30.133
> 
> 标签：c#, database

我有一个访问数据库，其中一个字段是复选框列表，允许我们的管理员选择作业。由于该垃圾邮件预防机制，我无法发布图片，请允许我将此字段描述如下：

工作

（复选框）园艺

（复选框）地毯清洁

（勾选）厕所清洁

（复选框）窗户清洁

管理员应该能够选择多个工作或根本没有工作，这取决于他的心情。

我必须使用 C# 创建一个 UI，那么如何以编程方式从 C# 访问此字段，修改后如何将其放回数据库？

编辑：此字段在 Access 2010 中如下所示：http: [//i48.tinypic.com/9k1204.jpg](http://i48.tinypic.com/9k1204.jpg)

编辑：

下面是我用来从数据库中获取行的代码

```
public List<Contractor> GetContractors()
    {
        //connect to local database file and read everything from contractor table
        OleDbConnection myConnection = new OleDbConnection(/*local database file*/);
        myConnection.Open();
        string sql = "SELECT * FROM Contractors";
        OleDbCommand myCommand = new OleDbCommand(sql, myConnection);
        OleDbDataReader myReader = myCommand.ExecuteReader();

        //contractor lists that to be returned
        List<Contractor> contractors = new List<Contractor>();

        //raw data from database
        ArrayList records = new ArrayList();
        while (myReader.Read())
        {
            Hashtable row = new Hashtable();
            for (int i = 0; i < myReader.FieldCount; i++)
            {
                row.Add(myReader.GetName(i), myReader[i]);
            }
            records.Add(row);
        }

        //fetch rows, and construct a temp Contractor based on rows
        for (int i = 0; i < records.Count; i++)
        {
            Contractor tempContractor = new Contractor();
            Hashtable row = (Hashtable)records[i];
            tempContractor.ID = Convert.ToInt32(row["ID"]);
            tempContractor.FamilyName = Convert.ToString(row["FamilyName"]);
            tempContractor.GivenNames = Convert.ToString(row["GivenNames"]);
            tempContractor.Address = Convert.ToString(row["Address"]);
            tempContractor.Phone = Convert.ToString(row["Phone"]);
            tempContractor.Mobile = Convert.ToString(row["Mobile"]);
            tempContractor.Email = Convert.ToString(row["Email"]);
            tempContractor.DateOfBirth = Convert.ToDateTime(row["DOB"]);
            tempContractor.Status = this.getTableItem(contractorStatus, Convert.ToInt32(row["Status"]));
            tempContractor.Comments = Convert.ToString(row["Comments"]);

            //+++++++++++++++++++++++++++++++++++
            tempContractor.Jobs = Convert.ToString(row["Jobs"]); //<------ this is how I try to fetch the dropdown list field in database, it doesn't work
            //++++++++++++++++++++++++++++++++++++
            contractors.Add(tempContractor);
        }

        return contractors;
    } 
```

# java - Java：逐行从 .txt 文件中读取字节

> ID：10863522
> 
> 赞同：2
> 
> 时间：2012-06-02T15:20:36.930
> 
> 标签：java, file, io, bytearray, byte

请看下面的代码

```
 import java.io.*;
import java.util.ArrayList;
import java.util.List;

public class FileCopy2
{    public static void main(String[]args) 
    {        
        try
        {

              //First in here, we are trying to get the bytes from the file

        File file = new File("D:/burn/preview.mp3"); //The File you need to get

        byte bufferFile[] = new byte[(int)file.length()]; //Creating a byte array, which has the exact size of the file

        BufferedInputStream bi = new BufferedInputStream(new FileInputStream(file));// Creating Buffers for IO

        bi.read(bufferFile, 0, bufferFile.length);//Reading the file

        bi.close();//Closing Buffer

        //Then in here, we are writing those bytes to a text file

        BufferedOutputStream bu = new BufferedOutputStream(new FileOutputStream("C:/Users/Yohan/Desktop/test.txt")); //The output Location
        bu.write(bufferFile, 0, bufferFile.length);//Writing the file
        bu.flush();//Flushing the buffer
        bu.close();//Closing the Buffer

        System.out.println("Done Copieng");

        //Here we are trying to WRITE number of .txt files containing the byte details..In other words, I am breaking the file into peaces

        BufferedReader br = new BufferedReader(new FileReader("C:/Users/Yohan/Desktop/test.txt"));
        BufferedWriter bw = null;

        String content = "";
        int count = 1;
        while((content = br.readLine())!=null)
        {

            bw = new BufferedWriter(new FileWriter("C:/Users/Yohan/Desktop/output4/file"+count+".txt"));
            bw.write(content);
            bw.flush();
            bw.close();

            count++;
            System.out.println("Running");

        }
        System.out.println("-----------------------Done-----------------------------");

            //NOW I NEED TO read all the generated .txt file and create the original file back. How to do it? //
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

在那里，首先我得到一个文件的字节，并将它们写入一个文本文件。然后我读取该文本文件，逐行读取，并为每一行生成一个单独的 .txt 文件。**现在原程序被分割成数千个文件**。现在我需要读取所有的 .txt 文件并重新生成 .txt 文件。我不知道怎么做最后一件事。我怎样才能做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T19:05:22.720

如果您想操作任何类型的文件，永远不要认为它们包含文本数据，而应将它们视为包含字节的二进制文件。使用输入和输出流读取和写入二进制文件。

这是一个读取文件并将其拆分为 1024 字节的片段写入 N 个输出文件的方法示例：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class FileSplit {
    public static void main(String[] args) throws IOException {
        new FileSplit().splitFile(new File(args[0]));
    }

    private void splitFile(File file) throws IOException {
        FileInputStream fis = new FileInputStream(file);
        try {
            byte[] buffer = new byte[1024];
            // remaining is the number of bytes to read to fill the buffer
            int remaining = buffer.length; 
            // block number is incremented each time a block of 1024 bytes is read 
            //and written
            int blockNumber = 1;
            while (true) {
                int read = fis.read(buffer, buffer.length - remaining, remaining);
                if (read >= 0) { // some bytes were read
                    remaining -= read;
                    if (remaining == 0) { // the buffer is full
                        writeBlock(blockNumber, buffer, buffer.length - remaining);
                        blockNumber++;
                        remaining = buffer.length;
                    }
                }
                else { 
                    // the end of the file was reached. If some bytes are in the buffer
                    // they are written to the last output file
                    if (remaining < buffer.length) {
                        writeBlock(blockNumber, buffer, buffer.length - remaining);
                    }
                    break;
                }
            }
        }
        finally {
            fis.close();
        }
    }

    private void writeBlock(int blockNumber, byte[] buffer, int length) throws IOException {
        FileOutputStream fos = new FileOutputStream("output_" + blockNumber + ".dat");
        try {
            fos.write(buffer, 0, length);
        }
        finally {
            fos.close();
        }
    }
} 
```

# c# - 将特定数据网格单元格设置为超链接

> ID：10863524
> 
> 赞同：0
> 
> 时间：2012-06-02T15:21:00.440
> 
> 标签：c#, wpf, datagrid

我正在使用带有 2 个文本列的 WPF 本机数据网格，我的表中的一些值是本地文件的路径。我正在寻找一种使特定单元格（根据它们的值）显示为超链接的方法，单击这些单元格将在与其文件类型关联的默认应用程序中打开它们的内容。

我发现了这个[Using WPF DataGridHyperLinkColumn Items to open Windows Explorer and open files](https://stackoverflow.com/questions/5764951/using-wpf-datagridhyperlinkcolumn-items-to-open-windows-explorer-and-open-files)以完成第二个任务，但我无法找到一种方法来仅更改特定单元格而不更改整个列类型。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:42:29.467

嗯，我不是 Core-WPF 开发人员，但我可以建议您添加 Click 事件，并在 click 事件上检查所选单元格的 ref，如果它与您的然后调用该超链接匹配，否则什么也不做。

例如，你 dgv 就像

```
姓名年龄
错误 20
罗恩 23
港币 99
小块 00

```

并且您希望用户在单击名称时应该转到各自的个人资料页面，所以您应该 *在点击事件内部*

`switch(dgv.SelectedCell.index){`
`case 0: //go to Err's page;`
`case 1: //go to Ron's page`
`case default: //go to hell :-p;`
`}`

# emacs - Windows 上的 Emacs 禁用 cmd

> ID：10863526
> 
> 赞同：0
> 
> 时间：2012-06-02T15:21:19.237
> 
> 标签：emacs

我一直在Linux下使用Emacs，但现在我得到了一台Windows机器并安装了它。

但是，每次我打开 Emacs 时，它也会打开一个终端（我认为在 Windows 上称为 cmd.exe）。有没有办法可以禁用该终端？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:33:56.823

如果您从这里获得了适用于 Windows 的 GNU 版本的 emacs：http: [//ftp.gnu.org/gnu/emacs/windows/](http://ftp.gnu.org/gnu/emacs/windows/)，则有一个名为 runemacs.exe 的 .exe。使用它代替 emacs.exe。"runemacs" 不会弹出烦人的 cmd 窗口。

# google-maps - 从谷歌地图 KmlLayers 中删除填充

> ID：10863528
> 
> 赞同：0
> 
> 时间：2012-06-02T15:21:27.453
> 
> 标签：google-maps

今天早上我注意到，我用来识别肯塔基州布利特县边界的 KmlLayers 现在被填充为蓝色。示例位于[http://bullittcountyhistory.org/if/andersonx.html](http://bullittcountyhistory.org/if/andersonx.html)。有没有办法关闭填充？我想要的只是蓝色的县界。

kml 文件位于[http://bullittcountyhistory.org/places/bullittboundary.kml](http://bullittcountyhistory.org/places/bullittboundary.kml)，填充设置为 0，轮廓设置为 1。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:10:10.850

请参阅[http://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/17afaa377a5abc25#](http://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/17afaa377a5abc25#)

对此问题加注星标： [http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4187](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4187)

# html - 如何使用 z 值？

> ID：10863535
> 
> 赞同：-1
> 
> 时间：2012-06-02T15:23:05.563
> 
> 标签：html, css, z-index

我想在除此示例的顶部之外的任何地方使用 box-shadow：

[http://jsfiddle.net/KquxS/2/](http://jsfiddle.net/KquxS/2/)

我很确定它可以用 z 值来完成，但我不确定如何，正如你所看到的，我尝试了一些游戏但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:42:03.507

如果使用`position: absolute`，则还必须提供位置（`top`、`left`等）。否则无效，元素将按照它们在 DOM 中出现的顺序绘制`position`。`z-index`

见[http://www.w3.org/wiki/CSS/Properties/z-index](http://www.w3.org/wiki/CSS/Properties/z-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:55:16.720

我不建议使用 z-index。

考虑使用以下样式：

```
ul:not(:first-child) {
    box-shadow:0 0 40px black;
} 
```

我要离开这个，但我认为你刚刚发布的评论有助于澄清你在寻找什么。

# .net - 将浮点值插入mysql数据库不一致

> ID：10863536
> 
> 赞同：0
> 
> 时间：2012-06-02T15:23:26.600
> 
> 标签：.net, mysql, entity-framework

我正在使用实体框架和 mysql 作为后端。

我有一个具有 lat 和 long 类型的 float 实体。

假设值是 lat:45.50818 和 long:-73.55409

在数据库中插入后，数据库中的值是 lat:45.508183 和 long:-73.554092

在 db 中，类型是 float (10,6)

额外的 3 和 2 来自哪里？

此外，当我查询数据库时，我的实体包含正确的纬度/经度......

任何帮助表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:25:12.187

您应该改用十进制数据类型

```
decimal(10,6) 
```

[浮点数](http://dev.mysql.com/doc/refman/5.5/en/floating-point-types.html)只是近似数字。定义`float(10,6)`仅意味着您可以存储该精度，但在该精度之后数字可能不准确。定点数没有这个问题。

# jquery - jQuery 悬停/延迟/淡入 div

> ID：10863537
> 
> 赞同：0
> 
> 时间：2012-06-02T15:23:32.263
> 
> 标签：jquery, hover, delay, fadein, fadeout

我偶然发现了这个 jQuery 片段：

```
 $(".faded").each(function(i) {
   $(this).delay(i * 400).fadeIn();
 });​ 
```

在行动中看到它：http: [//jsfiddle.net/RExZs/](http://jsfiddle.net/RExZs/)

无论如何，我正在尝试将其变成悬停功能，因此当您将鼠标悬停在导航菜单按钮上时，div 会以这种很酷的延迟效果淡入。然后当鼠标离开时，div应该消失。这是一个“STORE”按钮（锚），所以当他们悬停它时，这将用于显示产品列表。

到目前为止，我想出的是：

```
 $(".products").hover(function(){   // I added THIS line
   $(".products-list").hide().each(function(i) { 
   $(this).delay(i * 400).fadeIn();  
    }); 
 });   // and of course, THIS line 
```

问题是它在页面加载后立即开始显示 div，哈哈。

现在，当我悬停“STORE”按钮时，效果是*完美*的，但是当鼠标离开时，它会重新开始，重新加载那些 div。

要么帮助我，要么告诉我可以去哪里摆脱我该死的 jQuery 成瘾。:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:28:27.373

您需要单独的鼠标移入和鼠标移出行为。

您还需要在切换时停止任何现有动画，并使用额外`true`参数告诉它清空动画队列并跳转到当前动画的末尾。

```
$(".products").hover(function() {
   $(".products-list").stop(true).each(function(i) { 
       $(this).delay(i * 200).fadeIn();  
   }); 
}, function() {
    $(".products-list").stop(true, true).fadeOut();
}); 
```

有关演示，请参见[http://jsfiddle.net/alnitak/tvCBq/](http://jsfiddle.net/alnitak/tvCBq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:32:38.927

这取决于你想要你的“mouseout”效果是什么。[jsFiddle](http://jsfiddle.net/RExZs/558/)

```
$(".products").hover(
function(){
   $(".products-list").each(function(i) { 
       $(this).delay(i * 400).fadeIn();  
   }); 
},
function(){
    $(".products-list").stop(true).show().hide();
});​ 
```

PS：您应该始终尝试使用最新版本的 jQuery。您会看到，通过`.products`快速进出鼠标，您可以更改项目淡入的顺序。但是，如果您使用 jquery 1.7 而不是 1.4，它们将始终以正确的顺序淡出。看起来 jQuery 已经改变了动画在过渡期间的排队方式。 [jQuery 1.7.2 小提琴](http://jsfiddle.net/RExZs/559/)

# touchscreen - 触摸屏校准

> ID：10863540
> 
> 赞同：3
> 
> 时间：2012-06-02T15:24:19.830
> 
> 标签：touchscreen, calibration

有没有一种简单的方法来校准触摸屏，而无需使用更高的数学？

我已经编写了自己的 LCD 库和自己的触摸板库，两者都工作得很好，但当然我需要在触摸板获得可用结果之前对其进行校准。我发现的唯一一件事就是这个，这对我来说太数学了。我也不需要非常准确的结果。只是能够获得 +- 10 像素。

我使用带有 SSD1289 控制器和 ADS7843 触摸板控制器的 TFT 3.2" LCD 320x240 模块。

[http://www.eetimes.com/design/embedded/4023968/How-To-Calibrate-Touch-Screens](http://www.eetimes.com/design/embedded/4023968/How-To-Calibrate-Touch-Screens)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:11:44.583

我想出了一个简单的解决方案。它使用简单的线性代数。只有当触摸板贴膜与屏幕平行且与屏幕不成小角度时（这在大多数情况下是正确的），这才有效。

[校准源代码](https://github.com/Tectu/ChibiOS-GFX/blob/master/src/touchpad.c#L197)

# android - 动作按钮进入 quickActionBar GreenDroid

> ID：10863541
> 
> 赞同：0
> 
> 时间：2012-06-02T15:24:21.093
> 
> 标签：android, greendroid

我正在使用 greendroid 创建一个操作栏。我设法创建了操作栏，然后采取了快速行动。我的问题只是关于快速操作，因为我不知道如何为每个按钮快速操作插入操作。有人可以帮我吗？这张图片更好地解释了我的工作：

[http://s7.postimage.org/iavbl44mj/greendroid09.png](http://s7.postimage.org/iavbl44mj/greendroid09.png)

这是我的 quickActionBar 代码

```
private void initQuickActionBar() {
        quickActions = new QuickActionBar(this);

        quickActions.addQuickAction(new QuickAction(this, R.drawable.buscar, "Buscar"));
        quickActions.addQuickAction(new QuickAction(this, R.drawable.tags, "Tags"));
        quickActions.addQuickAction(new QuickAction(this, R.drawable.mail, "Email"));

        quickActions.setOnQuickActionClickListener(new OnQuickActionClickListener() {

            @Override
            public void onQuickActionClicked(QuickActionWidget widget, int position) {

            }
        }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:25:27.147

您必须使用**onHandleActionBarItemClick方法**

```
@Override
    public boolean onHandleActionBarItemClick(ActionBarItem item, int position) {
    switch (item.getItemId()) {
    case LOCATE:
          //show toast
        Toast.makeText(getApplicationContext(),
            "Vous avez cliquez sur le bouton LOCATE",
            Toast.LENGTH_SHORT).show();
        break;

    case REFRESH:
          //show toast
        Toast.makeText(getApplicationContext(),
            "Vous avez cliquez sur le bouton REFRESH",
            Toast.LENGTH_SHORT).show();
        break;

    case SHARE:
         // show quicAction and then a toas
         quickActions.show(item.getItemView());
        Toast.makeText(getApplicationContext(),
            "Vous avez cliquez sur le bouton SHARE",
            Toast.LENGTH_SHORT).show();
        break;
    default:
        return super.onHandleActionBarItemClick(item, position);
    }

    return true;
    } 
```

在您的活动中，您应该有与此类似的东西

```
import greendroid.app.GDActivity;
import android.os.Bundle;

public class GDIntroActivity extends GDActivity {

   private QuickActionWidget quickActions;

    /** Called when the activity is first created. */
@Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   setActionBarContentView(R.layout.main);
   initActionBar();
   initQuickActionBar();
   }

private void initQuickActionBar() {
    quickActions = new QuickActionBar(this);
    quickActions.addQuickAction(new QuickAction(this, R.drawable.facebook,
        "Facebook"));
    quickActions.addQuickAction(new QuickAction(this, R.drawable.twitter, "Twitter"));
    quickActions.addQuickAction(new QuickAction(this, R.drawable.mail, "Email"));
    quickActions.setOnQuickActionClickListener(new OnQuickActionClickListener() {
        public void onQuickActionClicked(QuickActionWidget widget,
            int position) {
         Toast.makeText(GDIntroActivity.this,
         "Item " + position + " clicked", Toast.LENGTH_SHORT)
         .show();
        }
    });
    }
} 
```

如果您想吃午饭，请检查此[链接facebook 登录您可以使用此链接](http://www.tutos-android.com/introduction-greendroid)

```
Intent intent = new Intent("android.intent.category.LAUNCHER");
intent.setClassName("com.facebook.katana", "com.facebook.katana.LoginActivity");
startActivity(intent); 
```

但是必须在您的设备或模拟器上安装 facebook 应用程序才能触发它

您可以像这样在 QuickAction 中使用它

```
private void initQuickActionBar() {
        quickActions = new QuickActionBar(this);
        quickActions.addQuickAction(new QuickAction(this, R.drawable.facebook,
            "Facebook"));
        quickActions.addQuickAction(new QuickAction(this, R.drawable.twitter, "Twitter"));
        quickActions.addQuickAction(new QuickAction(this, R.drawable.mail, "Email"));
        quickActions.setOnQuickActionClickListener(new OnQuickActionClickListener() {
            public void onQuickActionClicked(QuickActionWidget widget,
                int position) {
             switch(position){
              case facebook_position:
                   Intent intent = new Intent("android.intent.category.LAUNCHER");
                   intent.setClassName("com.facebook.katana", "com.facebook.katana.LoginActivity");
                   startActivity(intent);
                   break;
              case twitter_position:
                //do stuff

             }
            }
    });
    } 
```

# iphone - 在 Core Data 应用程序中更新预加载数据和用户数据

> ID：10863545
> 
> 赞同：1
> 
> 时间：2012-06-02T15:25:22.617
> 
> 标签：iphone, ios, core-data, preload

简单的问题，但对我来说，执行起来很艰难。我只在开发一个处于 alpha 阶段的应用程序，但我的测试人员需要拥有最新的数据库。我有一个包含两个实体的核心数据模型：服装和服装记录。

**Clothing**是一个“静态”模型，它具有预加载的数据（如帽子、衬衫、裤子等），只有在我更新模型时才会更改。

**ClothingRecord**是用户填充的实体，与实体**Clothing**有关系。

![在此处输入图像描述](../Images/3c3ae984f86610d0753ca33c6cfe81ec.png)

我刚刚遇到的是我想更改**Clothing**中的数据。不仅更改 Clothing 的属性（例如将名称从“Hat”更改为“Cap”），而且我还想添加和删除项目。

我对 Core Data 相当陌生，所以我使用了 Ray Wenderlich 的关于如何预加载数据的教程： [http ://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)

这第一次效果很好。我有一个数据库正在运行。但是，现在我已经更改了它，我不确定如何正确更新**Clothing**实体。我是否遍历所有对象并进行比较？我只是添加新东西吗？由于现有关系，我不能去删除对象，对吗？

是否有关于如何使用预加载数据更新 Core Data 驱动的应用程序的指南或教程？我想这一直在发生，但我找不到任何可靠的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:47:01.487

> 我是否遍历所有对象并进行比较？我只是添加新东西吗？由于现有关系，我不能去删除对象，对吗？

这取决于。我会尽力给你一些建议。

*我是否遍历所有对象并进行比较？*

为了遍历和比较，首先，我将插入一个用作标识符的属性（例如[guid](http://en.wikipedia.org/wiki/Globally_unique_identifier)）。拥有标识符可以让您将检索到的对象与 Core Data 进行比较。例如，如果“Hat”有一个 guid，`1234`而“Cap”有相同的 guid，您可以简单地通过标识符获取并使用新名称更新该对象。这可以通过设置`NSPredicate`（[how-to-update-existing-object-in-core-data](https://stackoverflow.com/questions/10571786/how-to-update-existing-object-in-core-data)）来实现。

*我只是添加新东西吗？*

如果您与第二个实体没有关系，您可以这样做。相反，您需要将新对象与原始关系链接起来。

*由于现有关系，我不能去删除对象*

和以前一样，您需要重新创建这些关系，然后删除您感兴趣的对象。

如果您刚开始使用 CD，我将尝试第一个解决方案。我还建议了一个旧答案，这是我在之前关于 Core Data 的 SO 帖子中写的（[mapping-business-objects-with-core-data-in-ios](https://stackoverflow.com/questions/10619613/mapping-business-objects-with-core-data-in-ios)）。

希望能帮助到你。

**编辑**

关于最后两个选项，您可以执行两步操作。

首先，创建一个请求，让您获取预填充的`Clothing`对象。

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Clothing" inManagedObjectContext:moc]];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:request error:&error]; 
```

该数组`results`包含检索到的对象，现在具有`for-loop`创建新对象并设置正确的关系。

```
for(Clothing* clothing in results) {

    Clothing* newClothing = [NSEntityDescription insertNewObjectForEntityForName:@"Clothing" inManagedObjectContext:moc];
    newClothing.name = @"Cap";
    newClothing.relationshipToWhatYouWant = clothing.relationshipToWhatYouWant;
} 
```

最后，如果需要，删除旧对象。

PS检查代码，因为我是手写的。

# c++ - 在 Visual Studio 中运行应用程序时如何访问资源？

> ID：10863547
> 
> 赞同：1
> 
> 时间：2012-06-02T15:25:25.617
> 
> 标签：c++, visual-studio-2010, resources, pre-build-event

在我的应用程序中，我使用各种资源。我指定了预构建事件以将我的资源复制到输出目录。我的目录结构如下所示：

```
/Debug/Models/
/Debug/Shaders/
/Debug/Textures/
/Debug/sfero.exe
/Debug/... 
```

我想访问相对于 .exe 文件的这些资源，并且当我直接从 Debug 文件夹运行可执行文件时效果很好，但是当我在 Visual Studio 中运行它时，它正在不同的目录中启动，因此我无法访问我的资源。显然，我不想将我的资源复制到 Visual Studio 运行我的应用程序的位置。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:29:12.007

您可以使您的应用程序逻辑更智能地搜索资源，或者您可以在从 Visual Studio 启动时传递命令行参数（请参阅项目属性的调试区域），传递要查找的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T15:42:19.590

Visual Studio 中的默认当前目录定义为`$(ProjectDir)`- 默认情况下是 vcproj 文件的位置。

转到您项目的`Properties`-> `Configuration Properties`-> `Debugging`->`Working Directory`并将其更改为`$(SolutionDir)$(Configuration)\`或您所指的任何内容`Output Directory`。

# email - 从我的虚拟邮箱发送电子邮件

> ID：10863550
> 
> 赞同：1
> 
> 时间：2012-06-02T15:25:36.560
> 
> 标签：email, localhost, send, virtualbox

我从我的 ubuntu 服务器进行 Web 开发，ubuntu 在我的 Windows 7 的 virtualbox 中运行。我需要在 ubuntu 内部配置什么才能将电子邮件发送到任何公共域，例如 gmail.com？我需要这个设置来测试电子邮件模板等......谢谢，Jaro。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:34:15.760

要在 ubuntu 机器上测试电子邮件，最好的方法是创建一个本地帐户并使用 account@localhost 之类的电子邮件。如果您想直接从您的系统发送邮件，这不是一个很好的测试，因为许多 ISP 不允许通过宽带 DSL 进行 SMTP 流量，例如我在英国的提供商 THREE 不允许它，以及许多大型电子邮件公司会拒绝发送的电子邮件从宽带子网。另一种方法是部署邮件服务器，这很复杂，您也可以在任何免费托管服务提供商处测试您的应用程序。基本上，测试电子邮件绝非易事，要正确测试它，您需要一个生产系统，该系统具有完整的邮件设置和工作，列入白名单，不在 DSL 上等等。

# javascript - 将样式更改添加到 ajax 函数内的 DIV ...？

> ID：10863553
> 
> 赞同：0
> 
> 时间：2012-06-02T15:26:17.223
> 
> 标签：javascript, html, styles

我有一个更大的 javascript 和一些 ajax，它基本上检查一个条件，成功：

`success: function(){ document.getElementById('res-cancel-message').style.color = "#008000"; $("#res-cancel-message").html('<a>Your reservation has been cancelled and a confirmation has been sent to your email address.</a>');`

目前，此脚本更改 res-cancel-message div 的颜色，然后用一些文本填充它。我想要做的是将文本的大小也更改为 10pt。不幸的是，我尝试了各种简单的样式更改，例如我在上面代码中使用的颜色更改，但无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:28:24.647

如果您尝试使用：

```
document.getElementById('res-cancel-message').style.font-size = 'something'; 
```

它不起作用，您需要`-`像这样删除并大写以下单词的第一个字母：

```
document.getElementById('res-cancel-message').style.fontSize = '10pt'; 
```

# java - 迭代器是如何创建的？

> ID：10863557
> 
> 赞同：3
> 
> 时间：2012-06-02T15:26:59.620
> 
> 标签：java, collections, iterator

创建一个常见的方法`Iterator`是：

```
Iterator iter = myarray.iterator(); 
```

谁能告诉我在没有 new 运算符的情况下如何创建 iter ？我知道`Iterator`是一个接口，那么谁来实现它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:29:26.277

你还没有展示它是什么`myarray`，但这是找到实现的关键。例如，如果在执行时`myarray`引用一个`ArrayList`，那么它将调用`ArrayList.iterator()`它将返回一个私有`ArrayList.Itr`类的实例。（至少在我碰巧看到的 JRE 实现中。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T15:30:31.643

[这是该部分的ArrayList](http://www.docjar.com/html/api/java/util/ArrayList.java.html)类的代码片段。如您所见，有一个内部私有类实现了该接口`Iterator`，并返回了该类的一个实例。

```
 766       /**
  767        * Returns an iterator over the elements in this list in proper sequence.
  768        *
  769        * <p>The returned iterator is <a href="#fail-fast"><i>fail-fast</i></a>.
  770        *
  771        * @return an iterator over the elements in this list in proper sequence
  772        */
  773       public Iterator<E> iterator() {
  774           return new Itr();
  775       }
  776   
  777       /**
  778        * An optimized version of AbstractList.Itr
  779        */
  780       private class Itr implements Iterator<E> {
  781           int cursor;       // index of next element to return
  782           int lastRet = -1; // index of last element returned; -1 if no such
  783           int expectedModCount = modCount;
  784   
  785           public boolean hasNext() {
  786               return cursor != size;
  787           }
  788   
  789           @SuppressWarnings("unchecked")
  790           public E next() {
  791               checkForComodification();
  792               int i = cursor;
  793               if (i >= size)
  794                   throw new NoSuchElementException();
  795               Object[] elementData = ArrayList.this.elementData;
  796               if (i >= elementData.length)
  797                   throw new ConcurrentModificationException();
  798               cursor = i + 1;
  799               return (E) elementData[lastRet = i];
  800           }
  801   
  802           public void remove() {
  803               if (lastRet < 0)
  804                   throw new IllegalStateException();
  805               checkForComodification();
  806   
  807               try {
  808                   ArrayList.this.remove(lastRet);
  809                   cursor = lastRet;
  810                   lastRet = -1;
  811                   expectedModCount = modCount;
  812               } catch (IndexOutOfBoundsException ex) {
  813                   throw new ConcurrentModificationException();
  814               }
  815           }
  816   
  817           final void checkForComodification() {
  818               if (modCount != expectedModCount)
  819                   throw new ConcurrentModificationException();
  820           }
  821       } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T15:29:19.130

如果您查看 的实现内部`iterator()`，就会在`new`某个地方有一个内部。例如，这是`iterator()`来自 OpenJDK 的方法[`ArrayList`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/00cd9dc3c2b5/src/share/classes/java/util/ArrayList.java)：

```
public Iterator<E> iterator() {
    return new Itr();
} 
```

反过来，`Itr`指的是实现`Iterator`接口的私有内部类：

```
private class Itr implements Iterator<E> {
    // implementation details
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T15:33:18.303

`myarray.iterator`是一个函数。`new`运算符仅适用于类型。正如[斯基特先生在他的回答](https://stackoverflow.com/a/10863578/41747)中所说，返回值很可能是一个实现的内部类，`Iterator`并且该`iterator()`方法的实现调用`new`了内部类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T15:35:05.290

迭代器通常被实现为数据结构的私有内部类，以便可以编写其方法以适当地迭代该结构的数据。因此，在您的情况下，只能通过数据结构类提供的方法访问迭代器

```
myarray.iterator(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T16:07:32.047

首先，来自`myarray`引用的对象类必须实现接口`Iterable`。这意味着类必须向`Iterator iterator()`方法添加实现。

为方便起见，iterator() 方法返回私有内部类实现`Iterator`接口的对象。这样做是因为*内部类可以访问外部类的所有字段*（甚至是私有的）。

这是反向数组迭代器的示例

```
class ReverseArray implements Iterable{
    private Object[] data;// some data to iterate
    public ReverseArray(Object[] data) {
        this.data=data;
    }
    private class ReverseIterator implements Iterator {
        int counter = data.length;

        public boolean hasNext() {
            if(counter>0)
                return true;
            else
                return false;
        }

        public Object next() {
            return data[--counter];
        }

        public void remove() {
            //TODO Auto-generated method stub
        }
    }

    public Iterator<Integer> iterator() {
        return new ReverseIterator();
    }
} 
```

让我们测试一下

```
 public static void main(String[] args) {
        ReverseArray reverseArray=new ReverseArray(new Integer[]{1,2,3,4,5});
        for(Object i:reverseArray)
            System.out.print(i+"; ");
        //OUT: 5; 4; 3; 2; 1;  
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-02T16:52:41.513

Iterator 是一个接口，它已经实现了**List**接口的每个实现，如**ArrayList、Vector、LinkedList**和其他你不需要担心它的实现只需使用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-02T19:42:38.710

标准库中实现`Iterable`接口的集合类通常有一个可以扩展的内部类`Iterator`，但这不是必需的。您可以在任何您想要的地方进行子类化和实例化`Iterator`，就像任何其他类一样。

这是我的 utils 中的一个示例，我在其中编写了一个`Iterable`为给定数组提供实例的方法。

```
public static Iterable<A> asIterable(final A[] xs) {
  return new Iterable<A>() {
    @Override
    public Iterator<A> iterator() {
      return new Iterator<A>() {
        private int i = 0;

        @Override
        public boolean hasNext() {
          return i < xs.length;
        }

        @Override
        public A next() {
          A x = xs[i];
          i++;
          return x;
        }

        @Override
        public void remove() {
          throw new UnsupportedOperationException(
            "Cannot remove an element from an array.");
        }
      };
    }
  };
} 
```

# c++ - haar 训练 OpenCV 断言失败

> ID：10863560
> 
> 赞同：6
> 
> 时间：2012-06-02T15:27:10.323
> 
> 标签：c++, image-processing, opencv, computer-vision, haar-wavelet

我正在尝试使用 3340 个正图像和 1224 个负图像在 OpenCV 中为行人训练一个类似 haar 的分类器。（在 .txt 文件中，我保留负图像名称，即底片（1）.bmp，在 txt 文件中，我保留正图像名称，即图片（1）.bmp 1 0 0 64 128。实际上，正面示例已经被裁剪图像行人，所以我只需要为每张图像指定一个正样本）。

在训练过程中的某个时刻，它会停下来并说：

> “Opencv 错误：未知函数中的断言失败 (elements_read==1)，文件 c:\path\cvhaartraining.cpp，第 1858 行”

关于造成这种情况的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T00:52:02.617

[2012 年 6 月](http://code.opencv.org/issues/1834)，OpenCV DevZone 站点上的实用程序的创建者回答了这个问题。

引用玛丽亚的话：

> 问题是您的 vec 文件具有与您在命令行中传递的完全相同的样本数 -numPos 979。训练应用程序使用 vec 文件中的所有样本来训练 0 阶段，它无法为下一个阶段获得新的正样本阶段训练，因为 vec 文件已经结束。traincascade 的错误在于它在这种情况下具有 assert() ，但它必须为用户抛出带有错误消息的异常。它已在 r8913 中修复。-numPose 是用于训练每个阶段的样本计数。一些已经使用的样本可以被每个前一个阶段过滤（即识别为背景），但每个阶段不超过 (1 - minHitRate) * numPose。因此 vec 文件必须包含 >= (numPose + (numStages-1) * (1 - minHitRate) * numPose) + S，其中 S 是 vec 文件中可以立即识别为背景的样本数。

它对我有用。我也有同样的问题，我正在关注[关于 HAAR 培训的著名教程，](http://note.sonots.com/SciSoftware/haartraining.html)但想尝试使用 -npos 7000 -nneg 2973 的新培训实用程序

所以我做了以下计算：

vec 文件必须包含 >= (numPos + (numStages-1) * (1 - minHitRate) * numPos) + S

> 7000 >= (numPos + (20-1) * (1 - 0.999) * numPos) + 2973
> 
> (7000 - 2973)/(1 + 19*0.001) >= numPos
> 
> numPos <= 4027/1.019
> 
> numPos <= 3951 ~~ 3950

并使用：

> -npos 3950 -neg 2973

有用。我还注意到其他人在减少 numPos 方面也取得了成功：[这里](https://stackoverflow.com/a/12271213/1201501)

# python - 为什么 DuplicateKeyError: E11000 重复键错误索引：test.test.$notification_1 dup key: { : null }

> ID：10863561
> 
> 赞同：3
> 
> 时间：2012-06-02T15:27:23.620
> 
> 标签：python, mongodb, pymongo

我创建这样的唯一索引：

```
self.db_database[co_name].ensure_index([('src_md5',-1),('src_time',-1),('src_size',-1)],unique=True)
self.db_database[co_name].ensure_index(('notification'),unique=True)
self.db_database[co_name].ensure_index(('version'),unique=True)` 
```

在插入之前，我创建一条记录如下：

```
self.db_database[co_name].insert({"notification":"yes","file_md5":-1,"file_size":-1,"file_time":-1,"bypass":0,"server_list":[],"ok_to_download":0,"force_to_download":-1,"idx":0},safe=True)` 
```

然后我插入一些这样的信息：

```
collection.insert({"src_host":src_host,"src_path":src_path,"src_name":src_name,"src_md5":src_md5,"src_time":src_time,"src_size":src_size,"version":idx},safe=True)` 
```

它引发了一个错误：

```
DuplicateKeyError: E11000 duplicate key error index: data_transfer.nova_mon_test.log.small_20120517202918765432.$notification_1  dup key: { : null } 
```

为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T16:30:57.573

您的集合中可能已经有一个文档，该文档具有`notification: NULL`或没有设置通知字段。如果未设置字段，则将其视为空。因为唯一索引每个字段只允许一个值，所以不能有两个没有字段集的文档。您可以通过`sparse`在创建索引时也使用该选项来解决此问题。这样的事情应该可以工作（在删除已经存在的索引之后`notification`：

```
self.db_database[co_name].ensure_index(('notification'),unique=True,sparse=True) 
```

另请参阅：[mongo 中的稀疏索引和空值](https://stackoverflow.com/questions/8608567/sparse-indexes-and-null-values-in-mongo)

# javascript - 需要 js 主干 js jquery 模板 标记 依赖

> ID：10863564
> 
> 赞同：0
> 
> 时间：2012-06-02T15:28:08.983
> 
> 标签：javascript, jquery, backbone.js, requirejs

我有一个***下划线 JS***模板和一个**jQuery 插件，**它依赖于在模板可见后呈现的标记，但问题是当我准备好使用**jQuery**文档时，它没有得到呈现的 HTML。

我用过`domReady`但还是不行，我怎么可能做到这一点？这是我到目前为止得到的：

**main.js**

```
requirejs.config({
    baseUrl: 'js/modules',
    shim: {
        // 'jquery.colorize': ['jquery'],
        // 'jquery.scroll': {
        //  deps: ['jquery'],
        //  exports: 'jQuery.fn.colorize'
        // },
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        'underscore': {
            deps: ['jquery'],
            exports: '_'
        }
    },
    paths: {
        'jquery': '../libs/jquery',
        'underscore': '../libs/underscore',
        'backbone': '../libs/backbone',
        'text': '../libs/text',
        'views': '../views',
        'templates': '../../templates',
        'domReady': '../libs/domReady',
        'ui': '../ui'
    }
});

requirejs(['homeView', 'ui/placeholder'], function(Main){
    Main.initialize();
}); 
```

**homeView.js**

```
define(['jquery', 'underscore', 'backbone', 'text!templates/home.html'], function($, _, Backbone, homeTemplate){
    var HomeView = Backbone.View.extend({
        el: $("#application"),
        events: function(){
            // Empty.
        },
        initialize: function(){
            // Empty.
        },
        render: function(){
            $('body').addClass('pt-dark');
            $(this.el).html(_.template(homeTemplate, {}));
        }
    });

    return new HomeView;
}); 
```

**ui/placeholder.js**

```
requirejs(['domReady', 'jquery'], function(doc, $){
  doc(function(){
    // Empty should contain the template html at this point.
    console.log($('body').html()); 
  });
}); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:54:01.983

尝试这个：

```
define(['jquery', 'underscore', 'backbone', 'text!templates/home.html'], function($, _, Backbone, homeTemplate){
    var HomeView = Backbone.View.extend({
        el: $("#application"),
        template: _.template(homeTemplate),
        events: function(){
            // Empty.
        },
        initialize: function(){
            // Empty.
        },
        render: function(){
            $('body').addClass('pt-dark');
            this.$el.html(this.template({})));
            jQuery('#the_thing_you_need', this.$el).theFunctionYouNeed();
        }
    });

    return new HomeView;
}); 
```

请注意，您应该为视图定义一个名为“模板”的本地属性或类似的东西来存储您的模板，而不是每次需要时都重新调用 _.template。

此外，您可以使用 this.$el 代替 jQuery(this.el)。

# google-app-engine - 用户照片 google appengine

> ID：10863566
> 
> 赞同：0
> 
> 时间：2012-06-02T15:28:13.833
> 
> 标签：google-app-engine, google-contacts-api

我想在我的网络应用程序中显示来自用户联系人的用户图像。我有以下内容：

```
qry = gdata.contacts.client.ContactsQuery(max_results=10)
feed = gd_client.get_contacts(query=qry)

for cont in feed.entry:
    self.response.out.write(cont.name)                                                
    photo =  cont.GetPhotoLink().href

    self.response.out.write("<img src='"+photo+"'>") 
```

我不知道为什么这不起作用，因为根据本指南 [https://developers.google.com/google-apps/contacts/v3/#retrieving_a_contacts_photo它生成的链接似乎正确](https://developers.google.com/google-apps/contacts/v3/#retrieving_a_contacts_photo)

[https://www.google.com/m8/feeds/photos/media/currentlyautheduser%40gmail.com/27e1e1d70bb51465](https://www.google.com/m8/feeds/photos/media/currentlyautheduser%40gmail.com/27e1e1d70bb51465)

并且 gd_client 似乎已正确验证（我可以看到联系人的其他详细信息...）

我的联系人客户端的代码如下

```
def AuthedContactsClient():
    current_user = users.GetCurrentUser()
    gd_client = gdata.contacts.client.ContactsClient(source=SETTINGS['APP_NAME'])
    gd_client.ssl=True
    access_token_key = 'access_token_%s' % current_user.user_id()
    gd_client.auth_token = gdata.gauth.ae_load(access_token_key)
    return gd_client 
```

有任何想法吗？谢谢！

# .net - 在服务中的 .net 环境中使用 MSChart

> ID：10863567
> 
> 赞同：0
> 
> 时间：2012-06-02T15:28:23.017
> 
> 标签：.net, wcf, rest, service, mschart

有什么方法可以在服务（WCF/restful 服务）中使用 .NET 的 MSChart 吗？要求是应该托管一个生成图表并将图表图像返回给调用应用程序的服务。调用应用程序应调用 Web 服务方法。没有网页可以嵌入 MSCHART 控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:20:27.393

VB版..

```
<WebMethod()> _
       Public Function GetChart(ByVal param1 As String, ByVal width As Integer) As String
          Dim ch As New Charting
          Dim ds As DataSet = blablabla
          Dim page As New Page()
          Dim form As New HtmlForm()
          form.Controls.Add(ch.buildChart(param1, ds, width))
          page.Controls.Add(form)
          Dim textWriter As New IO.StringWriter()
          HttpContext.Current.Server.Execute(page, textWriter, False)
          Dim htmltxt As String = textWriter.ToString
          Return Regex.Replace(htmltxt, "<[/]?(form)[^>]*?>", "", RegexOptions.IgnoreCase)
    End Function 
```

像（jquery）一样使用：

```
function GetChart(param1) {
      var params = new Object();
      params.param1 = param1;
      params.width = $(window).width() - 115;
      $.ajax(
      {
         type: "POST",
         data: $.toJSON(params),
         url: "WebService.asmx/GetChart",
         dataType: "json",
         contentType: "application/json",
         complete: function (response) {
         },
         success: function (response) {
        $(divChart).html(response.d);
         .
         .
         . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:12:46.927

您可以在代码中生成图表，然后将图表保存到流中。然后将流返回给调用者。请参阅[http://msdn.microsoft.com/en-us/library/dd456181.aspx](http://msdn.microsoft.com/en-us/library/dd456181.aspx)

# android - 以编程方式返回到 backstack 中的上一个片段

> ID：10863572
> 
> 赞同：250
> 
> 时间：2012-06-02T15:28:53.187
> 
> 标签：android, android-fragments, back-stack

假设我有一个以编程方式添加片段的活动：

```
private void animateToFragment(Fragment newFragment, String tag) {
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.fragment_container, newFragment, tag);
    ft.addToBackStack(null);
    ft.commit();
} 
```

返回上一个可见片段的最佳方法是什么？

我发现[在 Android 中单击按钮时触发后退按钮功能，](https://stackoverflow.com/questions/4649508/back-functionality-on-button-click-in-android)但我认为模拟后退键事件不是正确的方法（我也无法让它工作）：

```
dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK)); 
```

调用`finish()`只是关闭我不感兴趣的活动。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：392
> 
> 时间：2012-06-02T15:49:30.273

看`getFragmentManager().popBackStack()`方法（有几种可供选择）

[http://developer.android.com/reference/android/app/FragmentManager.html#popBackStack()](http://developer.android.com/reference/android/app/FragmentManager.html#popBackStack())

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2013-06-28T16:24:33.993

为了详细说明提供的其他答案，这是我的解决方案（放置在活动中）：

```
@Override
public void onBackPressed(){
    FragmentManager fm = getFragmentManager();
    if (fm.getBackStackEntryCount() > 0) {
        Log.i("MainActivity", "popping backstack");
        fm.popBackStack();
    } else {
        Log.i("MainActivity", "nothing on backstack, calling super");
        super.onBackPressed();  
    }
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-07-13T10:52:31.760

当我们更新/添加片段时，

应包括`.addToBackStack()`.

```
getSupportFragmentManager().beginTransaction()
    .add(detailFragment, "detail") // Add this transaction to the back stack (name is an optional name for this back stack state, or null).
    .addToBackStack(null)
    .commit(); 
```

之后，如果`getFragments.popBackStackImmediate()`我们添加/更新片段，则返回 true，然后返回当前屏幕。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2020-09-30T06:49:29.697

**Android 导航架构组件。**

以下代码适用于我：

```
findNavController().popBackStack() 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-10-02T02:26:59.830

如果我没有将 addToBackStack() 添加到我的片段事务中，这些答案将不起作用，但是您可以使用：

```
getActivity().onBackPressed(); 
```

从你的任何一个片段往后退一步；

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-03-23T10:23:47.537

将这些行添加到您的 onBackPressed() 方法中。popBackStackImmediate() 方法会让你回到前一个片段，如果你在后栈上有任何片段`

```
if(getFragmentManager().getBackStackEntryCount() > 0){
     getFragmentManager().popBackStackImmediate();
}
else{
    super.onBackPressed();
} 
```

`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-11-14T13:52:41.617

当您想要在主片段中按下时关闭应用程序时，此解决方案非常适用于基于底部栏的片段导航。

另一方面，当您打开在我的代码中定义为“DetailedPizza”的辅助片段（片段中的片段）时，它将返回主片段的先前状态。干杯！

背面的内部活动放了这个：

```
Fragment home = getSupportFragmentManager().findFragmentByTag("DetailedPizza");

if (home instanceof FragmentDetailedPizza && home.isVisible()) {
    if (getFragmentManager().getBackStackEntryCount() != 0) {
        getFragmentManager().popBackStack();
    } else {
        super.onBackPressed();
    }
} else {
    //Primary fragment
    moveTaskToBack(true);
} 
```

并像这样启动另一个片段：

```
Fragment someFragment = new FragmentDetailedPizza();
FragmentTransaction transaction = getFragmentManager().beginTransaction();
transaction.replace(R.id.container_body, someFragment, "DetailedPizza");
transaction.addToBackStack("DetailedPizza");
transaction.commit(); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-07-16T14:20:46.140

**科特林答案**

1.  首先，调用*Fragment Manager*。
2.  之后，使用*onBackPressed()* 方法。

使用 Kotlin 在 Android Studio 4.0 中编码：

```
fragmentManager?.popBackStack() 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-23T13:06:10.043

使用以下代码以编程方式返回上一个片段。

```
if ( getFragmentManager().getBackStackEntryCount() > 0) 
{
          getFragmentManager().popBackStack();
          return;
}
super.onBackPressed(); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-01-25T12:07:32.140

要使该片段再次出现，只需将该片段添加到您想要返回的 backstack 中，例如：

```
button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Fragment fragment = new LoginFragment();
        //replacing the fragment
        if (fragment != null) {
            FragmentTransaction ft = ((FragmentActivity)getContext()).getSupportFragmentManager().beginTransaction();
            ft.replace(R.id.content_frame, fragment);
            ft.addToBackStack("SignupFragment");
            ft.commit();
        }
    }
}); 
```

在上述情况下，我在按下时打开`LoginFragment`，`Button button`现在用户在`SignupFragment`. 所以如果`addToBackStack(TAG)`调用了 where `TAG = "SignupFragment"`，那么当按下后退按钮时`LoginFragment`，我们会回到`SignUpFragment`。

快乐编码！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-02-20T11:12:20.573

通过添加`fragment_tran.addToBackStack(null)`最后一个片段，我可以返回最后一个片段。

*添加新片段*：

```
view.findViewById(R.id.changepass).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            FragmentTransaction transaction = getActivity().getSupportFragmentManager().beginTransaction();
            transaction.replace(R.id.container, new ChangePassword());
            transaction.addToBackStack(null);
            transaction.commit();
        }
    }); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-07T00:30:17.743

我来到这里寻找或相同的想法，同时我想出了自己的想法，我相信这还不错，如果与 ViewPager 一起使用。

所以我所做的是重写包含 viewPager 的父活动中的 onBackPressed 方法，并将其设置为始终返回负 1 位置，直到它到达第一个片段，然后关闭活动。

```
@Override
public void onBackPressed() {
    if(viewPager.getCurrentItem()>0){
        viewPager.setCurrentItem(viewPager.getCurrentItem()-1);
    } else {
        super.onBackPressed();
        this.close();
    }
}

private void close(){
    this.finish();
} 
```

这可能有一个缺点，就像它每次只返回一个方向，所以如果有标签并且你切换位置并跳过片段，它可能不会很好用，（从 0 到 2，然后按回会让你1，而不是 0)

对于我的情况，viewPager 中有 2 个片段没有标签，它可以很好地完成工作。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-07-22T10:45:00.977

遵循对我有用的**Kotlin**代码

*1.在使用多个片段的简单活动类中添加*

```
override fun onBackPressed() {
    if (supportFragmentManager.backStackEntryCount > 0) {
        Log.i(TAG, "=============onBackPressed - Popping backstack====")
        supportFragmentManager.popBackStack()
    } else {
        Log.i(TAG, "=============onBackPressed called because nothing on backstack====")
        super.onBackPressed()
    }
} 
```

*2.在**BottomNavigationView** Activity类中添加了多个片段*

```
override fun onBackPressed() {

    Log.e(TAG, "=============onBackPressed")
    val navController = findNavController(R.id.nav_host_fragment)
    when (navController.currentDestination!!.id) {
        R.id.navigation_comments, R.id.navigation_my_posts -> {
            menuItemPosition = 0
            navController.navigate(R.id.navigation_home)
            Log.i(TAG, "=============onBackPressed - Popping backstack with First fragment ====")
        }
        else -> {
            Log.i(TAG, "=============onBackPressed called because nothing on backstack====")
            super.onBackPressed()
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-25T09:45:19.907

试试下面的代码：

```
@Override
    public void onBackPressed() {
        Fragment myFragment = getSupportFragmentManager().findFragmentById(R.id.container);
        if (myFragment != null && myFragment instanceof StepOneFragment) {
            finish();
        } else {
            if (getSupportFragmentManager().getBackStackEntryCount() > 0) {
                getSupportFragmentManager().popBackStack();
            } else {
                super.onBackPressed();
            }
        }
    } 
```

# css - 自己使用 Google 字体或宿主字体

> ID：10863575
> 
> 赞同：1
> 
> 时间：2012-06-02T15:29:17.740
> 
> 标签：css, fonts, font-face

在我当前的项目中，我使用的是当前托管在 googleapis.com 上的字体。字体是“免费的”，所以我可以得到一份副本并将其放在我的服务器上。

我的问题是；在 Google 上托管它与在我自己的服务器上托管它有什么好处？我已经在自己的服务器上托管了另外两种付费字体（使用 @font-face 和后备）。所以我想把另一种字体放在一个地方。

但我不确定是否有什么我不考虑的？谷歌字体是否明显更快/更好的性能等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:33:31.073

根据您服务器的带宽和负载，Google 可能比您的服务器更快。然而，在谷歌上托管的一些负面因素是：

*   该项目可能会被删除，从而导致您的网站出现问题
*   googleapis.com 可能是额外的 DNS 查找，增加了站点加载过程的时间
*   我个人讨厌盗链

正面：

*   如果 dns 条目缓存可能更快的性能
*   减少对服务器的数据使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T05:24:55.180

我在使用自托管 google 字体时遇到的一个问题是，google 为不同的操作系统和浏览器提供不同的 woff 文件，有时甚至使用相同的名称。这是由于 Windows 和 OS 中不同类型的渲染引擎会在字体宽度上产生明显的差异，例如 Windows 中的 Chrome 和 Mac 中的 Chrome。假设跨浏览器和操作系统自托管字体更复杂。[这](http://typerendering.com/)是一个有趣的项目，专注于这类微妙的问题。

另一方面，在安全相关站点中自托管字体可能很重要。

也许这应该只值得评论，但我还不能这样做。

# ruby - 执行 gem 时，未知命令

> ID：10863576
> 
> 赞同：16
> 
> 时间：2012-06-02T15:29:17.737
> 
> 标签：ruby, rubygems, gem

每当我输入 gem 命令时，例如

```
gem "tilt" 
```

或者

```
gem "mysql" 
```

我收到此错误：

```
While executing gem ... <RuntimeError>
Unknown command tilt 
```

当我运行`gem list`时，tilt 和 mysql 都显示在列表中，因此它们已安装。事实上，我对列表中的每个项目都收到了这个错误。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-02T15:36:34.837

`gem`不是在骗你，它们不是有效的`gem`命令。

也许您将命令行与 Bundler 混淆了？例如，添加

```
gem "tilt" 
```

到 Gemfile 并运行`bundle install`将安装倾斜。但是 Bundler 使用自己的语法，而不是 shell 脚本。要直接使用二进制文件安装倾斜，`gem`您必须执行以下操作：

```
gem install tilt 
```

运行`gem help`会给你一个`gem`命令行参数的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:18:00.873

您正在使用 Gemfile 语法，您应该使用命令行语法。试试这个：

```
gem install mysql2 -v 0.2.7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-09T19:08:28.407

确保您的语法正确，以便您可以键入更多指南

`gem help`

要查看 ruby​​ 可接受的语法，

如果您收到此错误“您没有 /Library 的写入权限”

您可以随时添加`sudo`以提升权限。

例如。`sudo gem install <gemname>`

在您的代码之前使用`sudo`，这将为您提供管理访问权限（在您输入计算机密码之后）。

之后，您可能必须运行`bundle install`才能安装 gem。

# silverlight - 如何以编程方式更改手机主题

> ID：10863580
> 
> 赞同：3
> 
> 时间：2012-06-02T15:29:57.150
> 
> 标签：silverlight, windows-phone-7, themes

我一直在寻找这个问题的答案，但看到市场上不允许这样做，我已经被关于如何制作主题感知应用程序的答案淹没了。我只是在寻找可以在个人应用程序中使用的代码片段。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:35:58.183

不，在当前版本的 API 中是不可能的。

# css - 使用 firefox 时，border-style:dashed 显示错误

> ID：10863582
> 
> 赞同：1
> 
> 时间：2012-06-02T15:30:26.407
> 
> 标签：css

我已经定义了以下 insdie 我的 .css 文件以在我的页脚中显示虚线：-

```
.dash{
border-style:dashed ;
border-width:2px;
border-color:#322f32;
} 
```

然后在页脚上我添加了以下内容：-

```
<hr/ class="dash"> 
```

虚线在 Internet Explorer 上可以很好地显示，但在 firefox 上却不能很好地显示，那么这背后的原因是什么，，将这条虚线作为图像放在里面是否更安全？BR

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T15:37:06.643

也许您正在尝试实现以下目标：

![在此处输入图像描述](../Images/4b33055075efc140803a71d4cd0bffce.png)

请参阅此[小提琴示例](http://jsfiddle.net/zuul/uNPLs/)！

**CSS**

```
.dash{
  border: 0 none;
  border-top: 2px dashed #322f32;
  background: none;
  height:0;
} 
```

**HTML**

```
<hr class="dash" /> 
```

让它在所有浏览器上都是平等的。

根据`<hr />`浏览器的不同，它带有一些默认值，为了在所有浏览器上进行相同的呈现，您需要重置这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:32:12.913

替换：

```
<hr/ class="dash"> 
```

和：

```
<hr class="dash" /> 
```

# model-view-controller - MVC 设计问题 - 每个组件的角色

> ID：10863583
> 
> 赞同：2
> 
> 时间：2012-06-02T15:30:27.690
> 
> 标签：model-view-controller

这是我们第一次使用这种模式（我们甚至不确定这种模式是否适合这个项目），我和我的小伙伴有几个问题。我们正在设计一个简单的应用程序来显示有关权限的文件。

1.  假设“Joe”当前登录到系统，将“Joe”保存为活动用户的正确位置在哪里？
2.  在这种情况下，控制器的作用是什么？假设“Joe”想要登录系统。他输入他的密码并单击登录，视图是否应该直接使用模型验证详细信息？还是应该要求控制器为他做这件事？

3.  假设登录成功，现在应该发生什么？视图是否应该作为观察者来监听模型并等待登录正确的响应然后切换窗口？或者控制器应该有一个被调用的方法`boolean ValidateLogin()`，视图调用并相应地采取行动？

如您所见，我们非常困惑，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:43:07.807

1.  会话/数据库/配置文件（这是单用户系统还是多用户系统？）
2.  在某些 Web 框架中*：视图将登录数据传递给控制器​​，传递给模型进行验证，将结果返回给控制器，并给出正确的视图作为响应。当然，如果视图想要直接验证模型的数据也很好，但是 IMO 视图模型通信不应该涉及任何逻辑，只有数据更新通知。
3.  我认为它在上面的答案 2 中得到了部分回答。控制器应该能够销毁/更改登录视图（当登录成功时，通常视图应该相应地更改）。

*这是因为在 Web 应用程序中，通常视图不能直接与模型对话，而在桌面应用程序中则相反。这仍然是一个 MVC，只是一种称为 MVA 的变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:38:15.583

1.  Store it in session
2.  Any client side validation can be done by the view directly with the model(Through [DataAnnotations](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)). And for database calls it goes through the contoller
3.  On successful login, controller will render the corresponding view

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:38:17.193

对于您的要求，我建议您使用此项目[MembershipStarterKit](https://github.com/TroyGoode/MembershipStarterKit)开始。

它具有执行基本身份验证和角色管理的示例。

它还使用 .Net 会员提供程序，这样您就不会重新发明轮子。

# c++ - 如何使用矢量 在 OCCI 中设置数据缓冲区？

> ID：10863588
> 
> 赞同：2
> 
> 时间：2012-06-02T15:31:01.300
> 
> 标签：c++, oracle, occi

我有一个名为 mytable2 的简单表，只有一列，名称为 varchar2(20)。我现在有一个存储为 std::string 向量的名称列表，要插入到表中。我想使用 executeArrayUpdate，所以我必须先执行 setDataBuffer。但是，正如我所见，人们总是使用 char[][20] 来设置数据缓冲区。

这让我很头疼，因为我这里有两个问题，第一个是将向量转换为数组，第二是将字符串转换为字符。

第一，我厌倦了使用 char[20] 的向量，这不能编译。谷歌搜索，他们说向量不能接受 char[]，所以我将 std::string 的向量更改为 char* 的向量。

第二，我尝试使用“void* p=&names[0]”将向量转换为数组，正如有些人所说的那样，我们可以将向量用作数组。

我使用了stmt->setDataBuffer(1,mystring,OCCI_SQLT_STR,20,NULL)，程序编译执行正常，但是当我“从mytable2中选择名称”时，它只显示了一些奇怪的字符。

以前有人遇到过类似的问题吗？我该怎么办？

我的代码很简单，如下所示：

```
 count=2;
    vector<char*> mystring;
    for(int i=0;i<count;i++)
    {
        char my[20];
        strcpy_s(my,"Michael");
        mystring.insert(mystring.end(),my);
             }
    stmt->setDataBuffer(1,&mystring[0],OCCI_SQLT_STR,20,NULL);

    stmt->setBatchErrorMode (true);

    stmt->executeArrayUpdate(count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:47:00.943

您需要动态创建要放入向量中的 char 数组，以便它有机会正常工作。

我没有使用过 OCCI，但如果我必须使用要求 char[][20] 的 API，我会给它 char[][20]

如果您有向量中的现有数据，为什么不直接将其复制到 2D char 数组中呢？例如。

```
// intialise vector with nonsense
unsigned int const VEC_SIZE = 2 ;
vector<string> v;
for (unsigned int i = 0; i < VEC_SIZE; ++i) {
    stringstream s;
    s << "Jon Paul " << i << endl;
    v.push_back ( s.str() ) ;
}

// create the required 2D char array
unsigned int const STR_LEN = 20 ;
char c [VEC_SIZE][STR_LEN];

// copy the data from the vector of strings to the 2D char array
for (unsigned int i = 0; i < VEC_SIZE; ++i) {
    string s = v[i].substr(0,STR_LEN);
    char const * const cc = s.c_str();      
    unsigned int j = 0;
    for (; j < STR_LEN && j < s.size(); ++j) {
        c[i][j] = cc[j];
    }
    c[i][ j==STR_LEN ? 20 : j ] = 0; // write NULL character
} 
```

我认为您已将示例简化为固定大小的向量，因此我的回答将简化为，将 2D 数组的动态分配的棘手问题留给读者作为练习...

# android - 使用 Eclipse 将 zxing 条码扫描器本地集成到您的 Android 应用程序中时出错

> ID：10863589
> 
> 赞同：0
> 
> 时间：2012-06-02T15:31:06.027
> 
> 标签：android, eclipse, zxing

我正在逐步遵循本教程中所做的事情（[使用 Eclipse 将 zxing 条码扫描仪本地集成到您的 Android 应用程序中](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)`Android_Manifest.xml`），但是库项目有不止一个错误.. 例如在代码中的文件中：

```
 <supports-screens android:xlargeScreens="true"
                    android:largeScreens="true"
                    android:normalScreens="true"
                    android:smallScreens="true"
                    android:anyDensity="true"/> 
```

我得到错误：

```
error: No resource identifier found for attribute 'xlargeScreens' in package 'android' 
```

安卓构建目标在哪里`android 2.2`

问题是什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:36:42.517

您应该将 project.properties 中的“target=”版本设置为更高级的版本，即使您的目标是 2.2 - 如果我没记错的话，2.3 中引入了超大屏幕。

# php - MySQL PHP PDO 准备好的语句 - 性能问题与安全性

> ID：10863598
> 
> 赞同：7
> 
> 时间：2012-06-02T15:32:46.713
> 
> 标签：php, mysql, pdo, prepared-statement

我正在考虑使用 InnoDB（现在的 mysql_query 和 MyISAM）将一些开源应用程序重写为 PDO 和事务。

我的问题是：哪些情况下使用准备好的语句是合理的？

因为在我阅读的所有地方（甚至在此处的许多帖子中）都指出，由于 1\. 安全性和 2\. 性能，我应该随时随地使用准备好的语句。甚至 PHP 手册也建议使用准备好的语句，而不是提及转义的东西。

你不能否认安全机制。但是一遍又一遍地思考它会想到每次都必须准备语句然后使用它一次......这没有任何意义。虽然必须在单个语句中插入 1000 次一些变量，但这是有道理的，但很明显。但这不是普通 eshop 或 board 的基础。

那么如何克服呢？我可以在整个应用程序范围内准备我的陈述并具体命名吗？我可以准备几个不同的语句并按名称使用它们吗？因为这是我想到的唯一合理的解决方案（除了 1000x 的东西）。

我发现有一个名为 $pdo->quote 的 mysql_real_escape 也用于单个查询。为什么不使用这个？为什么要费心准备？

您如何看待这篇出色的文章？ [http://blog.ulf-wendel.de/2008/pdo_mysqlnd-prepared-statements-again/](http://blog.ulf-wendel.de/2008/pdo_mysqlnd-prepared-statements-again/)

您同意准备报表所造成的开销吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T15:48:34.130

我认为这属于“过早优化”类别。

开销有多大？你量过吗？它会影响您的服务器性能吗？

很可能不是。

* * *

从好的方面来说，您在安全性方面获得了不可否认的收益（这应该是任何基于互联网的商店的主要关注点）。

不利的一面是，您有可能影响性能的风险。在您提供的链接中，它表明在某些情况下，执行不良的 PDO 准备会导致性能略低于未准备好的语句。5000 次运行的性能差异为 0.298 秒。

微不足道。当您意识到“未准备好”的查询在*没有*输入清理例程的情况下运行时更是如此，而这些例程是使它们在实时环境中安全所需的。如果你不使用准备好的查询，你需要某种形式的输入清理来防止 SQL 攻击，并且根据它是如何完成的，你可能需要对结果集进行按摩。

最重要的是，没有显着的性能问题，但有显着的安全优势。因此官方建议使用准备好的语句。

在您的问题中，您谈到了“普通电子商店”。“普通eshop”永远不会有足够的流量来担心性能问题，如果有的话。另一端的安全问题...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T15:35:23.317

> 我的问题是：哪些情况下使用准备好的语句是合理的？

他们全部。社区公开反对`mysql_*`功能的使用。

注意：建议的替代品

不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 以获取更多信息。

此功能的替代方案包括：

*   [`mysqli_connect()`](http://www.php.net/mysqli_connect)
*   [`PDO::__construct()`](http://www.php.net/manual/en/pdo.construct.php)

[资源](http://www.php.net/mysql_connect)

> 但是一遍又一遍地思考它会想到每次都必须准备语句然后使用它一次..这没有意义

您正在用 Geo 换 Jaguar，并抱怨您不喜欢 Jaguar，因为您并不总是使用座椅加热器。您不必始终如一地使用库的每个功能就意味着它很好。

> 我发现有一个名为 $pdo->quote 的 mysql_real_escape 也用于单个查询。为什么不使用这个？为什么要费心准备？

如果您使用此函数构建 SQL 语句，强烈建议您使用 PDO::prepare() 来准备带有绑定参数的 SQL 语句，而不是使用 PDO::quote() 将用户输入插入到 SQL 语句中。带有绑定参数的预处理语句不仅更便携、更方便、不受 SQL 注入的影响，而且执行起来通常比插值查询快得多，因为服务器端和客户端都可以缓存查询的编译形式。[资源](http://www.php.net/manual/en/pdo.quote.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T23:54:12.997

> 我的问题是：哪些情况下使用准备好的语句是合理的？

实际上，这很难说。特别是因为您甚至没有说出您在这里谈论的是哪个开源应用程序。

举个例子：对于一个超级蹩脚的留言簿应用程序，带有准备好的语句的 PDO 将是完美的选择，对于 99% 的所有其他开源应用程序也是如此。但对于某些人来说，这实际上可以有所作为。这里重要的部分是：你没有告诉任何关于应用程序的事情。

由于数据库对应用程序而言并非不重要，反之亦然：应用程序对数据库而言并非不重要。

因此，您要么需要分享更多有关您询问的“神秘”开源应用程序的信息，*要么*需要告诉我们您究竟想知道什么。因为一般来说，很简单：拿 PDO。但具体来说，还是有区别的，所以你需要告诉我们具体的应用是什么，否则你的问题已经回答了。

顺便说一句，如果应用程序是 mysql_* 风格的，用 mysqli_* 接口替换会容易得多。如果你做了一些真正的重写，即使只是为了好玩，你也会看到的。

所以最好在这里添加更多的肉，或者接受一些不太精确的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T20:08:41.850

虽然这个问题相当古老，但有些主题并没有真正讨论，应该在这里概述，以供其他研究与 OP 相同的人使用。

总结以下所有内容：

*   是的，总是使用准备语句
*   是的，通过 mysqli 在 mysql 上使用 PDO。*这样，如果您切换数据库系统，您只需更新查询而不是查询、函数调用和参数，因为它支持准备好的语句。*
*   尽管使用带参数的准备好的语句，但始终清理用户提供的数据
*   研究 DBAL（数据库抽象层）以轻松处理所有这些因素并操纵查询以满足您的需求。

有一个主题 PDO::ATTR_EMULATE_PREPARES 将提高在 MySQL >= 5.1.21 中调用缓存查询的性能，当仿真关闭时，默认情况下是启用的。这意味着 PHP 将在执行之前模拟准备将其发送到实际数据库。模拟和非模拟之间的时间通常可以忽略不计，除非使用外部数据库（不是本地主机），例如在云上，它可能具有异常高的 ping 率。

缓存也取决于 my.cnf 中的 MySQL 设置，但 MySQL 优化超出了本文的范围。

```
<?php
$pdo = new \PDO($connection_string); 
$pdo->setAttribute( \PDO::ATTR_EMULATE_PREPARES, false );
?> 
```

所以请记住这一点，因为 mysqli_ 不提供用于客户端仿真的 API，并且总是使用 MySQL 来准备语句。 [http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)

尽管具有相似的功能，但还是存在差异，您可能需要一个 API 提供而另一个 API 不提供的功能。请参阅 PHP 关于选择一种 API 的参考：[http ://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

因此，这几乎与您在应用程序范围内定义语句的要求一致，因为可缓存查询将被缓存在 MySQL 服务器上，并且不需要在应用程序范围内进行准备。另一个好处是您的查询中的异常将在prepare() 而不是execute() 中抛出，这有助于开发以确保您的查询是正确的。

不管是否使用准备都没有现实世界的性能优势。

如果您使用 InnoDB for MySQL，准备好的语句的另一个好处是使用事务。您可以启动一个事务、插入一条记录、获取最后一个插入 id、更新另一个表、从另一个表中删除，如果在此过程中出现任何故障，您可以 rollBack() 到事务发生之前。否则，如果您选择提交更改。例如处理一个新订单并将用户的最后一个订单列设置为新订单 ID，并删除一个挂单，但提供的付款类型不符合从 order_flags 表下订单的条件，因此您可以 rollBack()并向用户显示友好的错误消息。

至于安全性，我很困惑没有人提到这一点。将任何用户提供的数据发送到包括 PHP 和 MySQL 在内的任何系统时，对其进行清理和标准化。是的，准备好的语句在转义数据时确实提供了一些安全性，但它不是 100% 的防弹。

因此，始终使用准备好的语句比没有真正的性能损失要好得多，并且缓存有一些好处，但您仍然应该清理用户提供的数据。第一步是将变量类型转换为您正在使用的所需数据类型。使用对象将进一步简化这一点，因为您在数据类型的单个模型中工作，而不是每次使用相同数据时都必须记住它。

要添加到上述内容，您应该查看使用 PDO 的数据库抽象层。例如 Doctrine DBAL：[http ://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/query-builder.html](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/query-builder.html)

使用 DBAL+PDO 的额外好处是

*   您可以标准化并缩短您必须完成的工作量。
*   帮助清理用户提供的数据
*   轻松操作复杂的查询
*   使用嵌套事务
*   在数据库之间轻松切换
*   您的代码在其他项目中变得更加可移植和可用

例如，我扩展了 PDO 并覆盖了 query()、fetchAll() 和 fetch() 方法，以便它们始终使用准备好的语句，这样我就可以在 fetch() 或 fetchAll() 中编写 SQL 语句，而不必编写一切都出来了。例如：

```
<?php
$pdo = new PDOEnhanced( $connection );
$pdo->fetchAll( "SELECT * FROM foo WHERE bar = 'hi'", PDO::FETCH_OBJ ); 

//would automatically provide
$stmt = $pdo->prepare( "SELECT * FROM foo WHERE bar=?" );
$stmt->execute( array( 'hi' ) );
$resultSet = $stmt->fetchAll( PDO::FETCH_OBJ )
?> 
```

至于建议 mysql_* 风格的人，用 mysqli_* API 替换要容易得多。事实并非如此。大部分 mysql_* 函数被遗漏或与 mysqli_* 有参数更改参见：[http ://php.net/manual/en/mysqli.summary.php](http://php.net/manual/en/mysqli.summary.php)

但是，您可以获得 Oracle 发布的转换器以简化流程：[https ://wikis.oracle.com/display/mysql/Converting+to+MySQLi](https://wikis.oracle.com/display/mysql/Converting+to+MySQLi)

请记住，它是一个文件源文本解析器，并非 100% 准确，因此请在合并之前验证更改。它还将为其创建的全局变量增加大量开销。

# php - 如何在提交 php 表单时向用户发送电子邮件

> ID：10863600
> 
> 赞同：0
> 
> 时间：2012-06-02T15:32:53.687
> 
> 标签：php, html, forms

如何向用户发送一封电子邮件，其中包含他们在表单中提交的数据，其中包括一条使用那里的名称的小消息，并在提交 php 表单时感谢他们。

这是我当前的 php 代码。它目前只向他们显示一条消息，上面写着名称并且消息已发送，然后向我发送一封电子邮件到我的电子邮件地址。

```
<?php
    if(isset($_POST['submit'])){

        $to = "benlevygraphics@gmail.com";
        $headers = "From: " . $_POST['email'];
        $subject = "Ben, you have been contacted...";
        $body = "Name: " . $_POST['name'] . "\nEmail: " . $_POST['email'] . "\nWebsite: " . $_POST['web'] . "\nMessage: " . $_POST['message'];

        if(mail($to, $subject, $body, $headers)){

        echo("<p class=contactformsent>".$_POST['name'].", your message has been sent!</p>");

        }
        else{
           echo("<p class=contactformnotsent>".$_POST['name'].", Message delivery failed...</p>");
        }
   }
?> 
```

我是 php 新手，我已经在网上阅读了一些东西，但我仍然不明白，所以如果你能清楚地说明你的例子或提供帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:37:30.223

查看您的 php.ini，因为您必须输入 SMTP 服务器。在我的文件中，它从第 1087 行开始，以“[邮件功能]”开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:46:48.730

假设您当前的代码已经正常工作，您可以这样做与收件人一起向自己发送电子邮件：

1.  设置`$to`为`$_POST['email']`
2.  设置`$headers`为`"From: {$_POST['email']}\r\nBcc: benlevygraphics@gmail.com"`
3.  调整`$body`并`$subject`满足您的需求。

顺便说一句，我不能经常这么说；确保您的页面具有某种形式的 CSRF 保护。

[如何使用 PHP 正确添加 CSRF 令牌](https://stackoverflow.com/questions/6287903/how-to-properly-add-csrf-token-using-php)

以上只是一种方式，还有其他的，随便搜吧：）

# javascript - （函数表达式）{使用分组运算符包围函数表达式}真的有效吗？

> ID：10863601
> 
> 赞同：1
> 
> 时间：2012-06-02T15:33:11.827
> 
> 标签：javascript

基于官方[ECMA-262 版本 5.1 June 2011 标准](http://www.ecma-international.org/publications/standards/Ecma-262.htm)：

[语法摘要定义分组运算符（括号）只能包含一个表达式](http://es5.github.com/#A.3)：

```
PrimaryExpression :

this
Identifier
Literal
ArrayLiteral
ObjectLiteral
( Expression ) 
```

并且一个表达式只能是一个赋值表达式（或这些表达式的序列）（滚动到[第 A.3 节](http://es5.github.com/#A.3)的末尾）

```
Expression :

AssignmentExpression
Expression , AssignmentExpression 
```

因此，根据 ECMA-262 5.1 版，以下内容应该是不正确的：`(FunctionExpression)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:24:00.467

经过一番挖掘，我发现它实际上是有效的。这是完整的推导（要回溯到[第 A.3 节](http://es5.github.com/#A.3)的末尾，然后从以下开始向上推导`Expression`：

```
Expression -> AssignmentExpression -> ConditionalExpression ->
LogicalORExpression -> LogicalANDExpression -> 
BitwiseORExpression -> BitwiseXORExpression -> 
BitwiseANDExpression -> EqualityExpression -> 
RelationalExpression -> ShiftExpression -> AdditiveExpression -> 
MultiplicativeExpression -> UnaryExpression -> 
PostfixExpression -> LeftHandSideExpression -> NewExpression -> 
MemberExpression -> FunctionExpression 
```

# weka - 在 Weka 中加载管道分隔文件

> ID：10863603
> 
> 赞同：3
> 
> 时间：2012-06-02T15:33:19.457
> 
> 标签：weka

您好我正在尝试使用 java CSVLoader 在 weka 中加载管道分隔文件。看起来 CSVLoader 只加载逗号和制表符。有没有办法可以更改这些加载器上的分隔符？

有人在 Weka 中加载了管道分隔文件吗？

谢谢，阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:46:20.177

新版本允许您使用选项`-F`选项输入分隔符或分隔符。见：[http ://weka.sourceforge.net/doc.dev/weka/core/converters/CSVLoader.html](http://weka.sourceforge.net/doc.dev/weka/core/converters/CSVLoader.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:33:27.837

看起来没有任何选项可以提供不同的分隔符。只需先阅读文件并用逗号替换管道？

# javascript - 如何根据用户输入 HTML 更新几个 span 元素

> ID：10863604
> 
> 赞同：1
> 
> 时间：2012-06-02T15:33:23.460
> 
> 标签：javascript, html, jquery

我有一个包含至少 200 个输入字段的巨大表单- `text/radio/checkboxes`.

我把它分成几个部分来很好地构造它**，每个**部分都有一个更新按钮，它接受用户输入并将其保存到数据库中。这是由**Ajax**完成的，因此我不必重新加载页面。

如何`<span>`在不重新加载页面的情况下使用用户输入的任何内容轻松更新与输入字段对应的 s？`$("#spanid").html($("#input1").val())`我必须对每个项目都做一个`<span>`吗？还是有一种简单的方法可以做到这一点？

这是表单的一小部分的代码。

HTML

```
 <form id="history" name="history" action="" method="post"> 
 <table class="normal">
        <tr><th colspan="8">HISTORY</th>
        </tr>
        <tr><td style="width:200px"><b>Chief Complaint Location</b></td>
        <td style="width:450px"><b>Comment</b></td>
        <td><b> Previous</b> </td>
        </tr>
        <tr><td>Head</td>
            <td ><input type="text" maxlength="100" name="headH" id="headH" ></td>
            <td class="data2"><span id="headSpan"><%=msmtCommentHead%></span></td>
        </tr>
        <tr><td>Neck</td>
            <td><input type="text" maxlength="100" name="neckH" id="neckH" ></td>
            <td class="data2"><span id="neckSpan"><%=msmtCommentNeck%></span></td>
        </tr>
        <tr><td>Upper Extremeties</td>
            <td><input type="text" maxlength="100" name="upperExtremetiesH" id="upperExtremetiesH"></td>
            <td class="data2"><span id="ueSpan"><%=msmtCommentUpperExtremeties%></span></td>
        </tr>
        <tr><td>Thoracic Spine</td>
            <td><input type="text" maxlength="100" name="thoracicSpineH" id="thoracicSpineH"></td>
            <td class="data2"><span id="tsSpan"><%=msmtCommentThoracicSpine%></span></td>
        </tr>
   <tr><td><input type="button" id="submitHistory" value="Update"/></td></tr>
   </table>
   </form> 
```

Javascript：

```
 $(function(){
$("#submitHistory").click(function() {
    var query = $("#history").serialize();
        $.ajax( {
          type: "POST",      
          url: "/oscar/cmcc/History.do",
          dataType: "json",
          data: query  
         }); 
        document.getElementById('history_cmcc').reset();
        var date = new String("<%=date%>");
        $("#headSpan").innerHTML = $("#headH").val()+ "," + date; 

        $("#neckSpan").innerHTML = $("#neckH").val() + ","+ date; 

        $("#tsSpan").innerHTML = $("#thoracicSpineH").val() + ","+ date; 

        $("#lsSpan").innerHTML = $("#lumbarSpineH").val() + ","+ date; 

        $("#leSpan").innerHTML = $("#lowerExtremetiesH").val() + ","+ date; 

        $("#chSpan").innerHTML = $("#chestHeartH").val() + ","+ date; 
   } 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T15:42:53.757

一般来说，您可以这样做：

```
$('input[type=text]').each(function() {
  $(this).closest('tr').find('span').html($(this).val());
});

$('input:checked').each(function() {

         $(this).closest('tr').find('span').html($(this).val());
}); 
```

**根据 OP 评论更新：**

在您的示例中，如果您想将单选按钮左侧的标签放在跨度内，您可以这样做。这取决于您的具体要求。

```
$('input[type=radio]:checked').each(function() {  
     $(this).closest('tr').find('span').html($(this).closest('tr').find('td:eq(0)').text());    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:46:55.703

```
$(':input').each(function() {
  $(this).closest('tr').find('span').html(this.value);
}); 
```

`:input`适用于所有输入。也可以使用`input`。

# html5-canvas - 在 HTML Canvas 中使用 javascript 修改形状

> ID：10863605
> 
> 赞同：0
> 
> 时间：2012-06-02T15:33:24.963
> 
> 标签：html5-canvas

我已经开始学习画布了。在我开始绘制一些基本形状后，我想对它们进行一些修改。例如，我对如何修改矩形的长度和宽度感到困惑。我是否必须清除画布并重绘，或者我可以像 java 脚本中的对象一样捕获该矩形的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:28:33.960

画布是[光栅](http://en.wikipedia.org/wiki/Raster_graphics)图形表面。修改矩形的长度和宽度是一个[矢量](http://en.wikipedia.org/wiki/Vector_graphics)动作。可以缩放栅格，但可能/将会发生质量损失。[您可以使用SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)形式的矢量图形。但如果它只是一个矩形，请在画布上使用带有边框覆盖的 div。

# mysql - 除了 SQL Server 之外，其他 DBMS 中是否使用了模式？

> ID：10863607
> 
> 赞同：2
> 
> 时间：2012-06-02T15:33:37.913
> 
> 标签：mysql, sql-server, sqlite, postgresql, schema

从 SQL Server 2005 开始，[模式](http://msdn.microsoft.com/en-us/library/dd283095%28v=sql.100%29.aspx)充当对象（表、视图等）的根命名空间。

我的问题是：其他 DBMS 中是否有等价物？我特别感兴趣：

*   [PostgreSQL](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html)、甲骨文、SQL Server
    *   支持模式
*   MySQL：
    *   不支持模式；[`create schema ...`是 的同义词`create database ...`](https://stackoverflow.com/questions/1219711/mysql-create-schema-and-create-database-is-there-any-difference)。
*   SQLite
    *   不支持模式；`create schema ...`导致错误。

**编辑**：我使用 OMG Ponies 的回答来更新上面的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:39:21.853

是的，[PostgreSQL 支持模式](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html)，虽然我不知道什么时候开始支持。Oracle 也支持模式。

MySQL 没有—— [CREATE SCHEMA 是 CREATE DATABASE 的别名](https://stackoverflow.com/questions/1219711/mysql-create-schema-and-create-database-is-there-any-difference)。我不了解 SQLite，但鉴于其有限的支持，我不这么认为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T15:57:21.867

其他支持模式的 DBMS

*   [DB2](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.intro/src/tpc/db2z_schemaqualifiers.htm)
*   H2 数据库
*   数据库
*   阿帕奇德比
*   LucidDB
*   模拟 SQL
*   垂直

*不*支持模式的 DBMS ：

*   火鸟
*   立方体
*   Teradata（CREATE SCHEMA 是 CREATE DATABASE 的同义词）

# debian - 如何在 Debian 上将 glibc 从版本 2.13 升级到 2.15？

> ID：10863613
> 
> 赞同：65
> 
> 时间：2012-06-02T15:34:04.167
> 
> 标签：debian, glibc

我听说我可以使用**apt-get install libc6**来做到这一点，但是我需要在 /etc/apt/sources.list 中添加一些东西来接收最新的 glibc 版本。我应该怎么办？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-10-30T00:01:45.573

我可以通过编辑[perror 答案](https://stackoverflow.com/a/15766756/945863)`libc6 2.17`中的建议来安装：`Debian Wheezy`

**重要**
您需要按`CTRL`- `ALT`-退出显示管理器`F1`。然后你可以停止 x ( `slim`)`sudo /etc/init.d/slim stop`

（将 slim 替换为`mdm`or`lightdm`或其他）

将以下行添加到文件中`/etc/apt/sources.list`：

> deb [http://ftp.debian.org/debian](http://ftp.debian.org/debian)实验主要

应改为：

> deb [http://ftp.debian.org/debian](http://ftp.debian.org/debian) sid main

然后按照 perror 帖子的其余部分：

更新您的包裹数据库：

> apt-get 更新

安装`glibc`包：

> apt-get -t sid install libc6-amd64 libc6-dev libc6-dbg

**重要**
更新完成后`libc6`，重新启动计算机，您应该注释掉或删除您刚刚添加的 sid 源 ( `deb http://ftp.debian.org/debian sid main`)，否则您将面临将整个发行版升级到 sid 的风险。

希望这可以帮助。我花了一段时间才弄清楚。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-04-02T14:28:11.757

事实上，你现在不能轻易做到（在我写这篇信息的时候）。我将尝试解释原因。

首先，[glibc](http://lwn.net/Articles/488778/)已不复存在，它已被[eglibc 项目](http://www.eglibc.org/home)所包含。而且，Debian 发行版在不久前切换到 eglibc（参见[此处](http://blog.aurel32.net/47)和[此处](http://lwn.net/Articles/332000/)，甚至在[glibc 源包页面上](http://packages.qa.debian.org/g/glibc.html)）。所以，你应该考虑通过这种命令安装[eglibc 包：](http://packages.qa.debian.org/e/eglibc.html)

```
apt-get install libc6-amd64 libc6-dev libc6-dbg 
```

替换`amd64`为您想要的架构类型（查看[这里](http://packages.qa.debian.org/e/eglibc.html)的包列表）。

不幸的是，eglibc 包版本在`unstable`和`testing`. 仅`experimental`提供此库的 2.17 版本。所以，如果你真的想在 2.15 或更高版本中拥有它，你需要从实验版本开始安装包（不推荐）。以下是以root身份实现的步骤：

1.  将以下行添加到文件中`/etc/apt/sources.list`：

    ```
    deb http://ftp.debian.org/debian experimental main 
    ```

2.  更新您的包裹数据库：

    ```
    apt-get update 
    ```

3.  安装 eglibc 包：

    ```
    apt-get -t experimental install libc6-amd64 libc6-dev libc6-dbg 
    ```

4.  祈祷...

嗯，这就是所有的人。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-01-21T09:53:24.603

您的脚本也包含错误，例如，如果您安装了 dos2unix，您的安装工作但如果您不喜欢我这样做，那么它将因依赖问题而失败。

我偶然发现了这个，因为我正在制作一个脚本文件给我刚接触 Linux 的朋友，因为我在 windows 上制作了脚本，所以我指示他安装它，当时我没有安装 dos2unix，因此我有错误。

这是我为您的解决方案制作的脚本的副本，但安装了 dos2unix。

```
#!/bin/sh
echo "deb http://ftp.debian.org/debian sid main" >> /etc/apt/sources.list
apt-get update
apt-get -t sid install libc6 libc6-dev libc6-dbg
echo "Please remember to hash out sid main from your sources list. /etc/apt/sources.list" 
```

这个脚本已经在 3 台机器上测试过，没有任何错误。

# python - Python 用十六进制 \x00 删除空格后的所有内容

> ID：10863617
> 
> 赞同：1
> 
> 时间：2012-06-02T15:34:38.660
> 
> 标签：python, string

我有一个长度未知的变量字符串，左侧有重要字符串，右侧有不重要的内容，由一个空格分隔。如何删除右侧不重要的信息？

我试过rstrip，但没有成功。

**编辑**：我将放置需要修复的实际值。

```
"NPC_tester_contact() ) ntact()                                                                                                                                                                                                                 " 
```

第一个空格（右括号左侧的空格）应该将包括自身在内的所有内容标记为不重要。

**编辑**：输出应该是“ `NPC_tester_contact()`”！

仔细看看我放在上面的绳子。后面还有很多空格。我认为这是导致打嗝的原因。

我在这里尝试了大多数解决方案，它们要么不做任何事情，要么只产生空格。

`repr(s)`给我。

```
'NPC_me_lvup_event_contact()\x00t()\x00act()\x00act()\x00ntact()\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

应该是“ `NPC_me_lvup_event_contact()`”。

谢谢！

也许这是一个更好的问题。有没有办法删除字符串中出现的第一个 \x00 十六进制之后的所有字符？

出于某种原因，它有时有效，但并不总是有效。上面的示例是使用 Levon 发布的方法完成的。

解决方案：问题解决了。这更像是一个空字节而不是一个空格字节。解决方案可以是以下任何一种，使用“\x00”作为标识符而不是“”。

谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T15:35:08.723

**基于*新*字符串数据的**更新：****

 **假设`s`包含您的字符串：

```
s.split('\x00')[0] 
```

产量

```
'NPC_me_lvup_event_contact()' 
```

[split()](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)将为您提供由您指定的字符分隔的字符串列表`split`。如果没有指定使用空格，在这种情况下我们使用您感兴趣的十六进制字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T15:37:04.750

使用拆分（''）[0]

```
 >>> a = 'aaa bbb'
    >>> a.split(' ')[0]
    'aaa'
    >>> > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T15:39:12.563

```
>>> mystring = 'important useless'
>>> mystring[:mystring.find(' ')]
'important' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T15:39:48.197

split() w/o delimiter 按任何空格分割：

```
>>> "asdasd         xyz".split()[0]
'asdasd' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T15:37:48.923

使用 split() 函数，并获取它返回的第一项：

```
raw_string = 'NPC_tester_contact() ) ntact()  '
important = raw_string.split(' ')[0] 
```

将返回：

```
NPC_tester_contact() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T15:39:17.487

```
str = "important unimportant"
important = str.split(' ')[0] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-02T15:39:26.233

试试这个：

```
lhs,rhs=s.split()  #lhs is what you want. 
```

这仅在确实只有一个空间时才有效。

否则，您可以`lhs`通过（但您会失去 rhs）：

```
lhs=s.split()[0] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-02T15:52:09.683

试试这个， *会假设你的字符串存储在`str`*
`print str[0:str.index(" ")]`

如果它不起作用，请发表评论，将解决它..

这是

```
我的代码
str = "NPC_tester_contact() ) ntact() "

打印 str[0:str.index(" ")]

输出
NPC_tester_contact()

关联
http://ideone.com/i9haI

```

如果您希望输出用双引号括起来，那么 `print '"',str[0:str.index(" ")],'"'

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-02T16:32:53.750

您也可以使用正则表达式类型的解决方案。就像是：

```
import re

input_string = 'NPC_me_lvup_event_contact()\x00t()\x00act()\x00act()\x00ntact()\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'

string_pat = re.compile(r'[a-zA-Z0-9\(\)_]+')
try:
    first_part = string_pat.findall(input_string)[0]
except IndexError:
    # There is nothing of interest for you in this string
    first_part = '' 
```**

# ubuntu - 改变亮度 ubuntu12.04LTS

> ID：10863622
> 
> 赞同：2
> 
> 时间：2012-06-02T15:35:34.273
> 
> 标签：ubuntu, screen-brightness

如何在 Ubuntu 12.04 中更改亮度？我在Ubuntu中无法更改，屏幕始终以最高亮度工作，我试图在系统设置中更改它但徒劳无功，没有任何变化。请给我一个简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:51:39.093

看这里： [http ://ubuntuforums.org/showthread.php?t=1802755&page=3](http://ubuntuforums.org/showthread.php?t=1802755&page=3)

# c++ - 查找网络中的所有客户端

> ID：10863625
> 
> 赞同：0
> 
> 时间：2012-06-02T15:35:58.443
> 
> 标签：c++, c, windows, tcp

我正在编写客户端-服务器应用程序，我需要我的服务器来查找某个网络中的所有客户端。我已经在这里找到了一些信息：[Discovering clients on a wifi network](https://stackoverflow.com/questions/1158721/discovering-clients-on-a-wifi-network)，但我仍然不明白如何实现这一点。也许有人可以说我在哪里可以找到一些代码示例。

提前致谢。

PS。在 c++、windows 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:14:00.577

通常 TCP/IP 用作客户端和服务器之间的通信协议。对于 Windows 平台，Winsock 库用于实现 TCP/IP。服务器绑定并在端口上侦听传入连接。就像像 stackoverflow 这样的网络服务器默认侦听端口 80，然后客户端（浏览器）连接到它。

这是一个[开始的链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738545%28v=vs.85%29.aspx)。[这是样本](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737889%28v=vs.85%29.aspx)

通常，所有客户端都连接到侦听明确定义的端口的服务器。服务器只是一个，因此所有客户端都知道 IP 地址和端口，因此他们可以连接到它。

在您的情况下，您希望您的服务器能够发现网络中的所有客户端。为此，服务器需要向网络广播一些消息。客户端将收到此消息，并将向服务器响应它们在此类 IP 上可用，并且它们可以连接到服务器或向服务器提供附加信息。通常使用多播而不是广播，这是有限广播。所有的客户端和服务器都会订阅多播组，这是一种特殊的 IP 地址。当服务器向该多播地址发送消息时，所有作为该地址订阅者的客户端都会收到该消息并可以回复。这是一个[示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms739173%28v=vs.85%29.aspx)

**编辑：**您还可以使用 boost lib 来实现多播：[发件人，例如。](http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio/example/multicast/sender.cpp)，[接收器，例如。](http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio/example/multicast/receiver.cpp)

# javascript - Javascript存储数据

> ID：10863626
> 
> 赞同：1
> 
> 时间：2012-06-02T15:36:16.527
> 
> 标签：javascript, jquery

嗨，我是一名初学者 Web 开发人员，正在尝试将一个简单的电子商务网站的界面构建为个人项目。该网站有**多个带有复选框的页面**。

当有人检查一个元素时

*   它检索元素的价格和
*   将其存储在变量中。

但是当我转到下一页并**单击新复选框**产品时，变量会自动**重置**为其原始状态。

如何在 Javascript 中保存该变量的值？我正在使用**jQuery**库。

编辑：这是我使用 sessionStorage 编写的代码，但是当我移动到下一页时它仍然不起作用，值被重置。

我怎样才能编写此代码，以便我不会在每次页面更改时重置。我网站上的所有页面都使用相同的脚本。

```
$(document).ready(function(){
         var total = 0;

            $('input.check').click(function(){
                if($(this).attr('checked')){
                    var check = parseInt($(this).parent().children('span').text().substr(1 , 3));
                    total+=check;
                    sessionStorage.var_name=0 + total;
                    alert(sessionStorage.var_name);

                }else{
                    var uncheck = parseInt($(this).parent().children('span').text().substr(1 , 3));
                    total-=uncheck;

                }
            }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:38:56.510

for 的语法`sessionStorage`很简单，它会保留它的数据，直到浏览器窗口关闭。它的行为与任何其他 javascript 对象完全一样。您可以使用点表示法或方括号表示法（带空格的键需要）来访问存储的值。

**使用存储值`sessionStorage`**

```
sessionStorage['value key'] = 'value to store'; 
```

**使用存储值**

```
alert(sessionStorage['value key']);  // Alerts "value to store". 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T16:17:03.870

您可以使用 localStorage 来完成此操作。您需要为它设置一个后备，使用 localStorage 但是可以这样做：

从存储中读取：

```
if (localStorage['valueName'] !== undefined) {
    input.value = localStorage['valueName'];
} 
```

写入存储：

```
localStorage['valueName'] = input.value; 
```

这是一个 jsfiddle 示例：http: [//jsfiddle.net/yJjLe/](http://jsfiddle.net/yJjLe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T16:34:57.523

如上所述，您可以使用`sessionStorage`或`localStorage`。另一个可用的选项是[`HTML5 Web Databases`](http://www.tutorialspoint.com/html5/html5_web_sql.htm) 并查看[此演示文稿](http://html5-demos.appspot.com/static/html5storage/index.html)。

还要记住，html5 网络存储并不安全，因为任何人都可以从控制台看到您存储的数据。

# c# - 如何重复选定单元格或单元格的内容？

> ID：10863628
> 
> 赞同：0
> 
> 时间：2012-06-02T15:36:23.807
> 
> 标签：c#, winforms, datagridview

如何复制（重复） selectedCellsValue - 直到行尾。

一行中的单元格（即列）数 - 变化（约 30）。

Excel 有一个名为 - 自动填充 - 复制的选项。

这是我的尝试：

```
int x = dgv.SelectedCells.Count;

foreach (DataGridViewCell c in dgv.CurrentRow.Cells)
{
    if (c.Selected == true)
    {
        string a = c.Value.ToString();

         x = x+1;

         dgvRasp.CurrentRow.Cells[x].Value = a;
    }
} 
```

但它只复制一次 selectedCells 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:35:34.963

例如，如果为给定行选择了多个列中的单元格，这会出现一些明显的问题，但它至少应该为您提供一些可以构建的基础：

```
foreach (DataGridViewCell selectedCell in dataGridView1.SelectedCells)
{
    foreach (DataGridViewCell cell in selectedCell.OwningRow.Cells)
    {
        if (cell.ColumnIndex > selectedCell.ColumnIndex)
            cell.Value = selectedCell.Value;
    }
} 
```

# c# - 带有正则表达式的折扣掩码

> ID：10863640
> 
> 赞同：0
> 
> 时间：2012-06-02T15:37:48.360
> 
> 标签：c#, regex

是否可以创建一个将 % 或数字作为折扣值的“动态”折扣掩码？这样做的简单方法是什么？验证输入的样本：-25% 或 0.25 或 -5$ 不是 0 和点后的两位数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:10:40.530

如果我理解你的问题是正确的，你想要这样的东西：

```
@"^[+-]?(?:\d*\.)?\d+[%$]?$" 
```

这部分基于您的`-5$`. 不过，通常情况下，`$`会排在前面，所以你会想要这样的东西：

```
@"^(?:\$(?!.*%))?[+-]?(?:\d*\.)?\d+%?$" 
```

这将允许`$-5.00`,`10`或`+20%`, 但阻止`$5%`.

## 编辑：

遵循**Olivier**允许逗号的想法：

```
@"^(\$(?!.*%))?[+-]?(\d{1,3}((,\d{3})*|\d*))?(\.\d+)?\b%?$" 
```

扩展以使其更易于理解：

```
@"^               #Require matching from the beginning of the line
(\$(?!.*%))?      #Optionally allow a $ here, but only if there's no % later on.
[+-]?             #Optionally allow + or - at the beginning
(
  \d{1,3}         #Covers the first three numerals
  ((,\d{3})*|\d*) #Allow numbers in 1,234,567 format, or simply a long string of numerals with no commas
)?                #Allow for a decimal with no leading digits    
(\.\d+)?          #Optionally allow a period, but only with numerals behind it
\b                #Word break (a sneaky way to require at least one numeral before this position, thus preventing an empty string)
%?                #Optionally allow %
$"                #End of line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:44:09.603

尝试

```
@"(\+|-)?(\d+(\.\d*)?|\.\d+)%?" 
```

它会发现：

```
123.23
12.4%
.34
.34%
45.
45.%
8
7%
34
34%
+2.55%
-1.75%

```

* * *

**更新**

与 ...

```
@"(\+|-)?(\d+(,\d{3})*(?!\d)(\.\d*)?|\.\d+)%?" 
```

...您也可以包含数千个分隔符。

* * *

我必须承认，我的第二个正则表达式看起来就像一只猫从我的键盘上走过。这里的解释

`(\+|-)?`可选`?`的加号或减号。

`\d+(,\d{3})*(?!\d)(\.\d*)?`一位或多位数字`\d+`后跟任意数量的千位分隔符加上三位数字`(,\d{3})*`，后面不跟任何数字`(?!\d)`，以禁止连续四位数字，可选地后跟小数点和任意数量的数字`(\.\d*)?`。

`|\.\d+`或者一个小数点后跟至少一位数字。

`%?`最后是一个可选的百分号。

# java - 未调用 JSF 动作侦听器

> ID：10863645
> 
> 赞同：1
> 
> 时间：2012-06-02T15:38:26.180
> 
> 标签：java, jsf, jakarta-ee, richfaces

我正在使用`JSF 1.2`and `RichFaces 3.3.3`，我有一个非常奇怪的问题，代码所做的是获取要搜索的媒体项的名称并将其放入支持 bean 属性 searcTitle 中，当用户单击搜索按钮时，`onSearch`动作侦听器会填充结果列表。

这是代码

```
<rich:panelBar>
   <rich:panelBarItem>
       <rich:tabPanel>
           <rich:tab label="Media">
              <h:panelGrid columns="1">
                 <h:panelGrid columns="2">
                   <h:inputText value="#{media.searchTitle}"/>
                   <a4j:commandButton value="Search" actionListener="#{media.onSearch}"/>
                 </h:panelGrid>
                 <a4j:outputPanel id="mediaSearchResults" ajaxRendered="true">
                    <rich:dataTable value="#{media.results}" var="item">
                       <h:column>
                          <h:outputText value="#{item.title}"/>
                       </h:column>
                    </rich:dataTable>
                 </a4j:outputPanel>
              </h:panelGrid>
           </rich:tab>
       </rich:tabPanel>
   </rich:panelBarItem>
</rich:panelBar> 
```

和支持 bean 代码

```
private String searchTitle="";
private List<MediaItem> results;

public void setSearchTitle(String title){
    getLogger().log(Level.INFO,"At the setter of the search title string"); 
    this.searchTitle = title;
}

public String getSearchTitle(){
    return searchTitle;
}
//Setter and getter for the results list;

//Action Listener
public void onSearch(ActionEvent evt){
   getLogger().log(Level.INFO,"At the actionListener"); 
   //Some function that searches and populates the results list
   populateResults();
} 
```

现在的问题是，每当我单击搜索按钮时，都不会调用动作侦听器，尽管在检查带有火错误的页面时，每次单击它都会向服务器发送请求，但不会触发动作侦听器本身。

有谁知道我为什么会遇到这个问题？我是这方面的初学者，所以请保持你的语言简单。

提前致谢。

这是来自 firebug 的 Reposne/Request 标头

响应标头

```
Ajax-Response   true
Cache-Control   no-cache, must-revalidate, max_age=0, no-store
Content-Type    text/xml;charset=UTF-8
Date    Sat, 02 Jun 2012 16:03:13 GMT
Expires 0
Pragma  no-cache
Server  Sun GlassFish Enterprise Server v2.1.1
Transfer-Encoding   chunked
X-Powered-By    Servlet/2.5, JSF/1.2 
```

请求标头

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en,ar;q=0.7,en-us;q=0.3
Connection  keep-alive
Content-Length  17986
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  JSESSIONID=de975352b3adc4f59d57006755ea; JSESSIONID=de682f835c0fa928413ba7e5f59d; form:tree-hi=form:tree:applications:enterpriseApplications
Host    localhost:8080
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 
```

以及响应[http://justpaste.it/10uh的 xml 有效负载的链接](http://justpaste.it/10uh)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:54:57.737

您应该尝试使用`f:form`或`a4j:form`围绕您的`a4j:commandButton`.

# javascript - javascript .file 问题

> ID：10863650
> 
> 赞同：0
> 
> 时间：2012-06-02T15:39:02.243
> 
> 标签：javascript, html

当我提醒这一点时，我变得不确定

```
document.getElementById('imgtype').files[0]; 
```

从这个输入

```
<input type="file" name='imgtype' id='imgtype'  style="margin-top: 20px;" /> 
```

我用错文件了吗？？？

这是整个功能

```
function fileUp(imgtype) {
  var fdata = new FormData();
  alert(document.getElementById(imgtype).files);
  fdata.append("Upload", document.getElementById(imgtype).files[0]);
  fdata.append("type", imgtype);
  fdata.append("reg_id", document.getElementById('reg_id').value);

  var xhr = new XMLHttpRequest();
  xhr.upload.addEventListener("progress", uploadProgress, false);
  xhr.addEventListener("load", uploadComplete, false);
  xhr.addEventListener("error", uploadFailed, false);
  xhr.addEventListener("abort", uploadCanceled, false);
  xhr.open("POST", "upload.php");
  xhr.send(fdata);
} 
```

imgtype 是输入文件的 ID 和名称

# javascript - 使用 jQuery 加载图像并将其附加到 DOM

> ID：10863658
> 
> 赞同：40
> 
> 时间：2012-06-02T15:39:36.553
> 
> 标签：javascript, jquery, image

我正在尝试从给定链接加载图像

`var imgPath = $(imgLink).attr('href');`

并将其附加到页面，因此我可以**将其插入到**图像查看器的给定元素中。即使我无休止地搜索了*Stackoverflow*和*jQuery*文档，我也无法弄清楚。

加载图像后，我想为**它设置不同的值，如宽度、高度**等。

**更新：**

这就是我得到的。我遇到的问题是我无法在`img`元素上运行 jQuery 函数。

```
function imagePostition(imgLink) {

// Load the image we want to display from the given <a> link       
// Load the image path form the link
var imgPath = $(imgLink).attr('href');

// Add image to html
$('<img src="'+ imgPath +'" class="original">').load(function() {

    $(imgLink).append(this);

    var img = this;

    // Resize the image to the window width
    // http://stackoverflow.com/questions/1143517/jquery-resizing-image

    var maxWidth = $(window).width();       // window width
    var maxHeight = $(window).height();     // window height
    var imgWidth = img.width;               // image width
    var imgHeight = img.height;             // image height
    var ratio = 0;                          // resize ration
    var topPosition = 0;                    // top image position
    var leftPostition = 0;                  // left image postiton

    // calculate image dimension

    if (imgWidth > maxWidth) {
        ratio = imgHeight / imgWidth;
        imgWidth = maxWidth;
        imgHeight = (maxWidth * ratio);
    }
    else if (imgHeight > maxHeight) {
        ratio = imgWidth / imgHeight;
        imgWidth = (maxHeight * ratio);
        imgHeight = maxHeight;
    }

    // calculate image position

    // check if the window is larger than the image
    // y position
    if(maxHeight > imgHeight) {
        topPosition = (maxHeight / 2) - (imgHeight / 2);
    }
    // x position
    if(maxWidth > imgWidth) {
        leftPostition = (maxWidth / 2) - (imgWidth / 2);
    }

    $(imgLink).append(img);

    // Set absolute image position
    img.css("top", topPosition);
    img.css("left", leftPostition);

    // Set image width and height
    img.attr('width', imgWidth);
    img.attr('height', imgHeight);  

    // Add backdrop
    $('body').prepend('<div id="backdrop"></div>');

    // Set backdrop size
    $("#backdrop").css("width", maxWidth);
    $("#backdrop").css("height", maxHeight);

    // reveal image
    img.animate({opacity: 1}, 100)
    img.show()

});

}; 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-02T15:42:07.527

```
$('<img src="'+ imgPath +'">').load(function() {
  $(this).width(some).height(some).appendTo('#some_target');
}); 
```

如果你想为几个图像做，那么：

```
function loadImage(path, width, height, target) {
    $('<img src="'+ path +'">').load(function() {
      $(this).width(width).height(height).appendTo(target);
    });
} 
```

采用：

```
loadImage(imgPath, 800, 800, '#some_target'); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-30T18:29:43.900

这是我想在将图像附加到页面之前预加载图像时使用的代码。

检查图像是否已经从缓存中加载（对于 IE）也很重要。

```
 //create image to preload:
    var imgPreload = new Image();
    $(imgPreload).attr({
        src: photoUrl
    });

    //check if the image is already loaded (cached):
    if (imgPreload.complete || imgPreload.readyState === 4) {

        //image loaded:
        //your code here to insert image into page

    } else {
        //go fetch the image:
        $(imgPreload).load(function (response, status, xhr) {
            if (status == 'error') {

                //image could not be loaded:

            } else {

                //image loaded:
                //your code here to insert image into page

            }
        });
    } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-02T15:57:55.160

```
var img = new Image();

$(img).load(function(){

  $('.container').append($(this));

}).attr({

  src: someRemoteImage

}).error(function(){
  //do something if image cannot load
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-02T15:45:47.487

获取图片路径后，尝试以下任一方式

1.  （因为您需要设置比 src 更多的属性）构建 html 并替换到目标区域

    ```
    $('#target_div').html('<img src="'+ imgPaht +'" width=100 height=100 alt="Hello Image" />'); 
    ```

2.  如果更改“SRC”属性，您可能需要添加一些延迟

    ```
    setTimeout(function(){///this function fire after 1ms delay
          $('#target_img_tag_id').attr('src',imgPaht);
    }, 1); 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-02T15:49:25.813

我想你定义你的形象是这样的：

```
<img id="image_portrait" src="" alt="chef etat"  width="120" height="135"  /> 
```

您可以简单地为此标签加载/更新图像并更改/设置 atts（宽度、高度）：

```
var imagelink;
var height;
var width;
$("#image_portrait").attr("src", imagelink);
$("#image_portrait").attr("width", width);
$("#image_portrait").attr("height", height); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-09T14:38:37.590

使用 jQuery 3.x 使用类似的东西：

```
$('<img src="'+ imgPath +'">').on('load', function() {
  $(this).width(some).height(some).appendTo('#some_target');
}); 
```

# c# - EAZfuscator 无法自动工作

> ID：10863663
> 
> 赞同：4
> 
> 时间：2012-06-02T15:39:58.097
> 
> 标签：c#, .net, eazfuscator

我有一个使用 .Net Framework 4 的 C# 2010 WinForms 应用程序。

我正在使用[Eazfuscator.NET](http://www.foss.kharkov.ua/g1/projects/eazfuscator/dotnet/Default.aspx)来混淆这个应用程序。如果我手动混淆可执行文件，一切正常。

当我尝试通过将项目拖到绿色部分来使程序在每个构建中混淆自己时，一切正常，这是输出：

> 保护项目 'Roster Manager.csproj'... 完成
> 
> 受保护的项目将在 Release 配置中构建期间自动混淆
> 请重新启动 Visual Studio 以完成 Eazfuscator.NET 的安装

之后，我关闭 VS，重新启动它，清理解决方案，重新构建并运行它。该程序可以工作，但**它没有被混淆**，正如使用[Reflector 7](http://www.reflector.net/about/)对其进行反编译所证明的那样。

我正在按照程序的要求在 Release 中构建它。

搜索网络并没有帮助，所以如果有人之前遇到过这个问题，可能会解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:23:04.560

Eazfuscator 将此行添加到项目的 PostBuildEvent（Word Wrapped 为易读性，但它是一行）。（右键单击项目 -> 属性 -> 构建事件。）

```
if /I "$(ConfigurationName)" == "Release" Eazfuscator.NET.exe "$(TargetPath)" 
--msbuild-project-path "$(ProjectPath)" --msbuild-project-configuration "$(ConfigurationName)" 
--msbuild-project-platform "$(PlatformName)" --msbuild-solution-path 
"$(SolutionPath)" -n --newline-flush -v 3.2 
```

检查它是否存在以及您的发布配置是否真的称为“发布”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T21:32:44.347

终于设法修复它。似乎禁用用户帐户控制可以解决问题。

快速的 Google 搜索将提供有关如何执行此操作的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T13:20:47.617

如果您使用的是 TFS 等版本控制系统，.csproj 文件可能会被锁定。因此，您必须通过从文件属性中签出或取消选中“只读”框来解锁文件。

# lwuit - 树不会在没有导航键的触摸屏设备上滚动

> ID：10863664
> 
> 赞同：0
> 
> 时间：2012-06-02T15:40:01.723
> 
> 标签：lwuit

我在我的文件浏览器中使用 LWUIT FileTree，但在触摸屏移动设备上，树不会滚动。只有在我使用导航键时才会滚动。如何使用触摸使其滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:10:59.247

我刚刚在[Codename One](http://www.codenameone.com/)中尝试过，效果很好。我认为我们在这方面没有做出任何重大改变。我唯一的猜测是您可能已经在 EDT 之外对树进行了变异，或者将其放置在不适合滚动的可滚动容器中。例如边框布局。

确保将树放置在边框布局的中心区域并将表单设置为可滚动的 false。

# c# - 如何使用 C#.NET 将视频文件从 YouTube 下载到硬盘？

> ID：10863667
> 
> 赞同：-1
> 
> 时间：2012-06-02T15:40:19.193
> 
> 标签：c#, .net, youtube

如何使用 .NET 从 YouTube 将 .FLV 或 .MP4 格式的视频文件下载到硬盘？我想创建一个小型 YouTube 下载器应用程序，它要求用户提供特定链接，当我单击下载按钮时，下载过程开始将视频作为 FLV 文件直接从 YouTube 服务器下载到硬盘。

`I'm not asking here for the detailed procedure but i want to know only how to start ? is there a YouTube c# api which handle this process.`

如何使用 C# 将 Flv 视频文件从 YouTube 下载到硬盘？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:03:32.750

我觉得这个项目很有趣

[https://github.com/flagbug/YoutubeExtractor](https://github.com/flagbug/YoutubeExtractor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:50:49.073

尝试运行嵌入浏览器并将事件处理程序添加到网页上所有资源的 grep URL，然后您可以研究 youtube 使用的协议。

*   更改 HTML 请求标头以模拟 iOS 设备可能会强制 youtube 使用 HTML5 播放器，而不是 Flash 播放器（如果上述方法无法跟踪 Flash 播放器内的网络活动）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:57:22.570

找到可以执行此操作的开源程序，并阅读构成 youtube 请求的源代码部分。

例如，[gPodder](http://gpodder.org/)是我最喜欢的此类应用程序，如果您阅读 python 代码，它将是一个不错的选择。但我相信你可以找到其他人。

一旦找到正确的请求格式，就可以使用 C# 的 HTTP 类，例如[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)。最后，将数据保存到文件中。

[Google 还提供了一些从 .NET 访问 YouTube 的文档](https://developers.google.com/youtube/2.0/developers_guide_dotnet)，但这更多地与网站的社交网络方面相关，而不是视频内容。

# python - 在 Python C 扩展中处理 PyList_Append 时丢失 Py_DECREF/INCREF

> ID：10863669
> 
> 赞同：3
> 
> 时间：2012-06-02T15:40:38.827
> 
> 标签：python, python-c-extension

在处理 PyList_Append 时，我迷失了 Py_DECREF/INCREF。任何人都可以对以下代码发表评论吗？

```
PyObject * bugmaybe(PyObject *self, PyObject *args)
{
   PyObject * trio=PyList_New(0);
   PyObject * trio_tmp;
   PyObject * otmp = PyFloat_FromDouble(1.2);
   PyList_Append(trio_tmp,otmp);
   //Py_DECREF(otmp);
   otmp = PyFloat_FromDouble(2.3);
   PyList_Append(trio_tmp,otmp);
   //Py_DECREF(otmp);
   PyList_Append(trio,trio_tmp);
   Py_INCREF(trio_tmp);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T15:58:54.810

如果您预先知道列表的大小，通常可以更快地创建具有正确大小的列表并使用`PyList_SetItem()`.

您的代码完全错误，`trio_tmp`未初始化。

试试这个：

```
PyObject * bugmaybe(PyObject *self, PyObject *args)
{
  PyObject * trio=PyList_New(3);
  PyObject * otmp = PyFloat_FromDouble(1.2);
  PyList_SetItem(trio,0,otmp);
  otmp = PyFloat_FromDouble(2.3);
  PyList_SetItem(trio,1,otmp);
  PyList_Append(trio,2, PyList_New(0));
  return trio;
} 
```

如果您真的想使用`PyList_Append`，您的代码大部分都可以，只是缺少初始化 for`trio_tmp`和最后多余的 Py_INCREF 。

```
PyObject * bugmaybe(PyObject *self, PyObject *args)
{
  PyObject * trio=PyList_New(0);
  // trio has refcount 1
  PyObject * trio_tmp = PyList_New(0);
  // trio_tmp has recount 1
  PyObject * otmp = PyFloat_FromDouble(1.2);
  // otmp has recount 1
  PyList_Append(trio_tmp,otmp);
  // Append does not steal a reference, so otmp refcoun = 2
  Py_DECREF(otmp);
  // otmp refcount = 1, but stored in the list so the pointer var
  // can be reused
  otmp = PyFloat_FromDouble(2.3);
  PyList_Append(trio_tmp,otmp);
  Py_DECREF(otmp);
  // as above
  PyList_Append(trio,trio_tmp);
  // decrement refcount for trio_tmp, as it has recount 2 now.
  Py_DECREF(trio_tmp);
  return trio;
} 
```

上面的代码相当于：

```
 trio = []
 trio_tmp = []
 otmp = 1.2
 trio_tmp.append(otmp)
 otmp = 2.3
 trio_tmp.append(otmp)
 trio.append(trio_tmp) 
```

希望能帮助到你。主要提示在文档中，如果它说“窃取引用”，那么该函数基本上拥有所有权，如果它说“新引用”，那么它为你做了一个 INCREF，如果没有说它可能会做一个 INCREF 和 DECREF 对如所须。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:58:22.673

`PyList_Append()`不会“窃取”引用，因此如果您不打算在之后使用附加值，请删除它。

另外，不要忘记`PyObject*`从函数中返回 a ，否则系统会认为发生了异常。

# ruby-on-rails - 路由错误 - 新路由没有匹配 [POST]

> ID：10863673
> 
> 赞同：2
> 
> 时间：2012-06-02T15:40:53.503
> 
> 标签：ruby-on-rails, model-view-controller

我遇到了路由错误，我找不到问题出在哪里，我正在创建一个简单的 CRUD 并使用 create 方法遇到了这个问题。

### 错误

> 没有路线匹配 [POST] "/usuarios/new"

### 控制器

```
def new
  @usuario = Usuarios.new
end 

def create
  @usuario = Usuarios.new(params[:usuario])

  if @usuario.save
    redirect_to usuario_path, :notice => "Cadastrado realizado com sucesso!"
  else
    render "new"
  end
end 
```

### 新的.html.erb

```
<h1>Add new user</h1>

<%= form_for (:usuario) do |f| %>

<p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
</p>
<p>
    <%= f.label :idade %><br />
    <%= f.text_field :idade %>
</p>
<p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
</p>

<p>
    <%= f.submit "send" %>
</p>

<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:01:26.153

正如 Flexoid 所指出的，您可能尚未`new`在控制器中添加该方法。

所以，把这个

```
def new
  @usuario = Usuario.new
end 
```

**编辑**

你必须多加注意。

看一看：

```
def new
  @usuario = Usuario.new # not Usuarios.new, that's wrong.
end  

def create
    @usuario = Usuario.new(params[:usuario]) # not usuarios, first letter should be capital

    if @usuario.save
        redirect_to usuarios_path, :notice => "Cadastrado realizado com sucesso!" # usuario_path requires an id parameter like `usuario_path(@usuario)` or you could redirect to the `index` with `usuarios_path` 
    else
        render "new"
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:54:56.860

改变

```
<%= form_for (:usuario) do |f| %> 
```

到

```
<%= form_for (@usuario) do |f| %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:46:08.797

好像您忘记了配置 Rails 路由器。

尝试将此添加到您的`config/routes.rb`文件中：

```
resources :usuarios 
```

作为参考，您可以阅读 rails guide [Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html)。

# java - 通过查找对象的类来获取对象属性

> ID：10863674
> 
> 赞同：0
> 
> 时间：2012-06-02T15:41:00.307
> 
> 标签：java, android

我在数组集合中有游戏对象，但它们可以是不同的类。我可以通过它的坐标找到对象：

```
Object obb = grid.getCellContent(insertObjectX, insertObjectY); 
```

我需要做的是查找是否 obb.canBeSubmerged == true ，然后简单地将其移动到另一个数组。

问题是我无法获得该对象“canBeSubmerged”的属性，因为编译器不知道我使用了哪个类。

我想知道是否有一种更快的方法来完成`"obb.getClass() == myClass.class"`每个可能的对象类的语句。

. .

编辑：基于**无卡住**的建议，这里是一个可行的解决方案：

```
try {    
   java.lang.reflect.Field f1 = obb.getClass().getField("canBeSubmerged");
   java.lang.reflect.Field f2 = obb.getClass().getField("subObject"); 
   if (f1 != null) {       
      canBeSubmerged = f1.getBoolean(obb); 
      f2.setBoolean(obb, canBeSubmerged);
   } 
}catch (Exception e) { } 

//enter it into the submerged grid level and remove from the top grid level
if (canBeSubmerged){
    grid.removeObject(insertObjectX, insertObjectY);
    grid.putSubObjectInCell(insertObjectX, insertObjectY, obb);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:54:27.890

如果`obb`包含该`canBeSubmerged`属性的对象始终属于特定的类类型，例如`MyOBB.class`，那么您可以这样做...

```
if (obb instanceof MyOBB.class) {
    if (((MyOBB)obb).canBeSubmerged) {
       // do your work
    }
} 
```

========= 或 ============

使用反射（会更慢）

```
try {
   Field f = obb.getClass().getField("canBeSubmerged");
   if (f!=null && f.getBoolean(obb)) {
      // do your work
   }
} catch (Exception e) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:54:28.830

您的对象可能都应该扩展一个公共超类或实现一个定义方法的公共接口

```
public boolean canBeSubmerged(); 
```

您不应该使用公共字段。还要注意

```
if (obb.canBeSubmerged() == true) 
```

可以写成

```
if (obb.canBeSubmerged()) 
```

这更具逻辑性和可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T16:03:00.803

如果您只对对象的一个​​属性感兴趣，您可以将其提取到接口
public interface Submergable {
boolean isSubmerged();
}

并让所有可能淹没的物体实现它。

然后你可以做`Object instanceof Submergable`

# ruby-on-rails - 在 Rails 中测试范围链的最佳方法

> ID：10863675
> 
> 赞同：2
> 
> 时间：2012-06-02T15:41:10.130
> 
> 标签：ruby-on-rails, testing, scope, mocking, stub

在我所有的 ruby​​ on rails 应用程序中，我尽量不在控制器中使用数据库，因为它们应该独立于持久性类。我用嘲笑代替。

这是 rspec 和 rspec-mock 的示例：

```
class CouponsController < ApplicationController
  def index
    @coupons = Coupon.all
  end
end

require 'spec_helper'
describe CouponsController do
  let(:all_coupons) { mock } 
  it 'should return all coupons' do
    Coupon.should_receive(:all).and_return(all_coupons)
    get :index
    assigns(:coupons).should == all_coupons
    response.should be_success
  end
end 
```

但是如果控制器包含更复杂的范围怎么办，比如：

```
class CouponsController < ApplicationController
  def index
    @coupons = Coupon.unredeemed.by_shop(shop).by_country(country)
  end
end 
```

你知道测试类似作用域链的好方法吗？

我认为以下测试看起来不太好：

```
require 'spec_helper'
describe CouponsController do
  it 'should return all coupons' do
    Coupon.should_receive(:unredeemed).and_return(result = mock)
    result.should_receive(:by_shop).with(shop).and_return(result)
    result.should_receive(:by_country).with(country).and_return(result)
    get :index
    assigns(:coupons).should == result
    response.should be_success
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T15:49:45.377

你可以使用`stub_chain`方法。

就像是：

```
Coupon.stub_chain(:unredeemed, :by_shop, :by_country).and_return(result) 
```

只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T17:11:31.577

使用`rspec > 3`此语法：

```
expect(Converter).to receive_message_chain("new.update_value").with('test').with(no_args) 
```

而不是`stub_chain`.

[在文档中](https://relishapp.com/rspec/rspec-mocks/docs/working-with-legacy-code/message-chains)阅读有关消息链的更多信息。

# unity3d - 预制件的比例正在恢复到原来的样子

> ID：10863677
> 
> 赞同：1
> 
> 时间：2012-06-02T15:41:32.767
> 
> 标签：unity3d

我有一个问题，在 orthello 包中，我创建了精灵图集并将精灵导入其中。然后我从这些精灵创建了预制件，并在预制件中更改了这些精灵的比例。不幸的是，当我把这个预制件放到场景中时，旧的比例正在恢复。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:09:29.927

我在脚本中自动恢复变量时遇到了类似的问题。我建议做同样的事情。附加到在 Start 或 Awake 函数中设置所需比例的预制脚本。

# php - 使用 id 从数组中获取标题

> ID：10863678
> 
> 赞同：1
> 
> 时间：2012-06-02T15:41:45.443
> 
> 标签：php

对你来说可能很简单，但我有以下数组，其中包含数据库中的所有类别：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Fitness News
            [description] => Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin tincidunt tempor nunc, sit amet facilisis metus molestie nec. Nulla varius justo et felis euismod bibendum. Vestibulum suscipit tempus viverra. Mauris eros lorem, posuere eget mattis et, euismod id metus. In ac dignissim ligula. fdsfdsfdsfds fdsf fsd
            [image1] => test
            [image1_title] => test
            [created] => 2012-03-26
        )

    [1] => Array
        (
            [id] => 2
            [title] => Recommended Products
            [description] => Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin tincidunt tempor nunc, sit amet facilisis metus molestie nec. Nulla varius justo et felis euismod bibendum. Vestibulum suscipit tempus viverra. Mauris eros lorem, posuere eget mattis et, euismod id metus. In ac dignissim ligula.gdsfdsfdsfdsfds
            [image1] => H
            [image1_title] => H
            [created] => 2012-03-25
        )

    [2] => Array
        (
            [id] => 3
            [title] => New Category
            [description] => This is a new category
            [image1] => 
            [image1_title] => 
            [created] => 2012-03-13
        )

) 
```

现在我拥有的基本上是一个类别 ID，但我想从上面的数组中获取类别标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:46:01.723

```
$key = array_search ($category_id, $array);
echo $array [$key] ['title']; 
```

或者

```
$category_id = 1;
foreach ($array as $val) {
    if ($val ['id'] == $category_id) {
        $title = $val ['title'];
        break;
    }
}
echo $title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T15:46:09.840

```
$key = array_search($categoryId, $array);
$title = $array[$key]['title']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:46:50.193

**我不会搜索旧数组**，而是重新格式化旧数组，这样它就更有用了：

```
$categories = array();

foreach( $old_categories as $item)
    $categories[ $item['id'] ] = $item; 
```

现在您可以根据 ID 访问任何想要的内容。例如：

```
$id = 2;
echo $categories[ $id ]['title'];
echo $categories[ $id ]['description']; 
```

# perl - 在不确定性下找到函数的最大值

> ID：10863679
> 
> 赞同：1
> 
> 时间：2012-06-02T15:41:51.527
> 
> 标签：perl, artificial-intelligence, max

我有三个值 X、Y 和 Z。这些值的值范围介于 0 和 1 之间（包括 0 和 1）。当我调用函数 f(X,Y,Z) 时，它返回一个值 V（0 到 1 之间的值）。我的目标是选择 X,Y,Z 使返回值 V 尽可能接近 1。

选择过程应该是自动化的，并且 X、Y、Z 的正确值是未知的。

由于我的用例，可以将 Y 和 Z 设置为 1（值 1 对输出没有任何影响）并搜索 X 的最佳值。之后我可以用该值替换 X 并执行相同的操作对于 Y。对于 Z 的程序相同。

如何找到“函数的最大值”？是否有某种“梯度下降”或爬山算法或类似的东西？整个模块是用 perl 编写的，所以也许有一个 perl 包可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:16:37.723

您可以使用**模拟退火**。它是一种多变量优化技术。它还用于获得 Traveling Salesperson 问题的部分解决方案。它也是 Peter Norvig 的 Intro to AI 书中提到的搜索算法之一。

它是一种依赖于随机变量的爬山算法。此外，它不一定会给您“最佳”答案。您还可以根据您的计算/时间需求改变它所需的迭代。

[http://en.wikipedia.org/wiki/Simulated_annealing](http://en.wikipedia.org/wiki/Simulated_annealing) http://www1bpt.bridgeport.edu/sed/projects/449/Fall_2000/fangmin/chapter2.htm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T17:11:33.037

我建议你看看[`Math::Amoeba`](https://metacpan.org/module/Math%3a%3aAmoeba)哪个实现了*Nelder-Mead 方法*来查找函数上的驻点。

# emacs - 如何在emacs dired中为M命令（更改文件mod）提供recusive选项（-R）？

> ID：10863682
> 
> 赞同：2
> 
> 时间：2012-06-02T15:42:14.270
> 
> 标签：emacs, dired

当我输入“-R 777”时，我得到：file-modes-symbolic-to-number：“R 777”附近模式中的解析错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:18:27.060

不支持递归操作`dired-do-chmod`。

不过，作为 shell 命令很容易做到这一点：
`M-!` `chmod -R 777 (files)` `RET`

或者，[Dired+](http://www.emacswiki.org/emacs/dired%2B.el)库`diredp-do-chmod-recursive`为此提供了一个命令，绑定到`M-+``M`（显然是几天前才添加的，所以这是一个适时的问题）。

# testing - RSpec 功能测试重定向到错误的地方

> ID：10863684
> 
> 赞同：1
> 
> 时间：2012-06-02T15:42:23.447
> 
> 标签：testing, rspec, mocking, bdd, stub

我需要一些帮助，试图通过这个测试但没有运气。

```
describe 'PUT posts/:id' do 

  describe 'with valid attributes' do

    let(:mock_post) { mock_model('Post', title: 'hey! iam a mock!', description: 'a sexy model', location: 'everywhere') }

    login_user

    it 'should update the object and redirect to the post' do 
      Post.stub!(:find).with(mock_post.id).and_return(mock_post)

      Post.any_instance.should_receive(:update_attributes).with({"these" => "params"}).and_return(true)

      response.should redirect_to post_path(mock_post)

      put :update, id: mock_post.id, post: { these: 'params' }
    end

    it 'should have a current_user' do 
      subject.current_user.should_not be_nil
    end

  end 
```

现在，我有类似上述测试的内容并收到以下错误：

```
1) PostsController PUT posts/:id with valid attributes should update the object and redirect to the post
     Failure/Error: response.should redirect_to post_path(mock_post)
       Expected response to be a <:redirect>, but was <200>
     # ./spec/controllers/posts_controller_spec.rb:200:in `block (4 levels) in <top (required)>' 
```

帖子控制器：

```
class PostsController < ApplicationController
  load_and_authorize_resource except: [:index, :show]
  before_filter :authenticate_user!, except: [:index, :show, :tags]
  before_filter :find_post, only: [:show, :edit, :update, :suspend, :suspend_alert]

def update
  if @post.update_attributes(params[:post])
    flash[:success] = 'Cool.'
    redirect_to post_path(@post)
  else
    render :edit
  end
end

protected
  def find_post
    @post = Post.find(params[:id])
  end
end 
```

另外，我应该如何编写`render :edit`零件的测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:43:47.720

您的规范从不调用控制器操作。尝试添加：

```
Post.any_instance.
  should_receive(:update_attributes).
  with({"these" => "params"})
put :update, :id => "1", :post => {"these" => "params"} 
```

要测试调用 产生的两条路径，请`update_attributes`替换期望中的值：

```
it "should redirect when successful" do
  Post.any_instance.
    should_receive(:update_attributes).
    with({"these" => "params"}).
    and_return(true)`
  response.should_redirect_to(post_path(@mock_post))
  put :update, :id => "1", :post => {"these" => "params"}
end

it "should render the edit page when unsuccessful" do
  Post.any_instance.
    should_receive(:update_attributes).
    with({"these" => "params"}).
    and_return(false)`
  response.should render_template("edit")
  put :update, :id => "1", :post => {"these" => "params"}
end 
```

# c# - 为什么 TaskFactory.StartNew 会收到 CancellationToken

> ID：10863693
> 
> 赞同：4
> 
> 时间：2012-06-02T15:43:30.980
> 
> 标签：c#, .net, task-parallel-library, task, cancellation-token

> **可能重复：**
> [任务构造函数中的取消标记：为什么？](https://stackoverflow.com/questions/3712939/cancellation-token-in-task-constructor-why)

此方法接收 CancellationToken：

```
CancellationTokenSource cts = new CancellationTokenSource(4);
var t = Task.Factory.StartNew(() => { // code }, cts.Token); 
```

既然取消是合作的（实际工作的代码需要观察取消令牌），那么将 this 作为参数传递给 StartNew 方法的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:52:29.187

它允许将任务本身标记为已取消，这可以允许任何正在等待第一个任务的任务被触发（即任何使用 task.ContinueWith() 方法排队的任务）。当然，如果主要任务被取消，这些后续任务很可能也需要取消。

而且您绝对正确，正在执行的实际代码也需要遵守取消令牌。

# css - :300 对这个谷歌字体意味着什么？

> ID：10863697
> 
> 赞同：4
> 
> 时间：2012-06-02T15:44:18.183
> 
> 标签：css, fonts, font-face

我从 Web 模板在我的 HTML 中加载了字体：

```
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'> 
```

“：300”是什么意思和作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T15:47:46.133

它主要`font-weight`为生成的 CSS 设置。但它也改变了源字体系列。

前任。

*   300 - 打开无灯
*   600 - Open Sans Semibold
*   800 - Open Sans Extrabold

比较您的链接与[http://fonts.googleapis.com/css?family=Open+Sans:800](http://fonts.googleapis.com/css?family=Open+Sans:800)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T15:53:45.553

### 字体粗细可以定义为：

*   **普通的**

正常字体粗细。与 400 相同。

*   **胆大**

粗体字重。和700一样。

*   **打火机**

比父元素轻的一种字体粗细（在字体的可用粗细中）。

*   **更大胆**

比父元素暗的一种字体粗细（在字体的可用粗细中）。

* * *

### 或者它可以用数字表示来定义：

*   **100、200、300、400、500、600、700、800、900**

提供不仅仅是普通和粗体的字体的数字字体粗细。

如果给出的确切重量不可用，则 600-900 使用最接近的可用深色重量（或者，如果没有，则使用最接近的可用较轻重量），而 100-500 使用最接近的可用较轻重量（或者，如果没有，最接近的可用深色权重）。

这意味着对于只提供普通和粗体的字体，100-500 是普通的，600-900 是粗体。

* * *

对于这种特殊情况，字体被设置为比正常粗体更轻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:46:50.403

这是一个字体重量。300是正常体重。

它在 CSS2 中：http: [//www.devguru.com/technologies/css/quickref/css_fontweight.html](http://www.devguru.com/technologies/css/quickref/css_fontweight.html)

# macports - 尝试升级时 Macports ncurses 错误

> ID：10863698
> 
> 赞同：20
> 
> 时间：2012-06-02T15:44:25.373
> 
> 标签：macports

当我`sudo port upgrade outdated`在我的 os x (lion) 系统上运行命令时，我得到以下输出。

```
--->  Computing dependencies for gettext
--->  Dependencies to be installed: ncurses
--->  Activating ncurses @5.9_1
Error: org.macports.activate for port ncurses returned: Image error: /opt/local/bin/captoinfo is being used by the active ncursesw port.  Please deactivate this port first, or use 'port -f activate ncurses' to force the activation.
Error: Failed to install ncurses
Please see the log file for port ncurses for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_devel_ncurses/ncurses/main.log
Error: The following dependencies were not installed: ncurses
Error: Unable to upgrade port: 1
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets 
```

我应该怎么做才能更新？我试图强制激活，但没有成功。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-06T20:09:48.463

我自己也有类似的东西 - 不确定它是否相关。看到这个（[来源](http://comments.gmane.org/gmane.os.apple.macports.user/28039)）：

> ncursesw 很久以前就被 ncurses 取代了。您必须在一年内没有更新此 MacPorts 安装；如果您更早升级，这应该会更自动地为您处理，但我们已经删除了这些升级路径，因为它是很久以前的，我们认为现在每个人都会升级。您可以强制 ncursesw 卸载，因为它不再需要： sudo port -f uninstall ncursesw

也一定要跑

```
sudo port selfupdate 
```

预先。这可能导致了我的问题 - 安装 macports 并没有带来最新的包树。

# php - google checkout html api - 多个项目？

> ID：10863699
> 
> 赞同：1
> 
> 时间：2012-06-02T15:44:42.233
> 
> 标签：php, html, forms, google-checkout

google checkout api 指南给出了这个示例，其中包含 1 个项目和 2 个运输选项：

```
<input type="hidden" name="item_name_1" value="5 lbs. Dog Food"/>
<input type="hidden" name="item_description_1"
  value="5 lb. bag of nutritious Dog Food"/>
<input type="hidden" name="item_price_1" value="35.00"/>
<input type="hidden" name="item_currency_1" value="USD"/>
<input type="hidden" name="item_quantity_1" value="1"/>
<input type="hidden" name="item_merchant_id_1" value="5LBDOGCHOW"/>

// shipping options irrelevant here 
```

**（我的想法可能错了：）**因为我有一个自定义购物车，所以我必须用我的购物车生成这个表单，并使用结帐按钮将其显示给用户。

如果我的购物车中有多个项目，将其发送到谷歌的正确方法是这样的：

```
<input type="hidden" name="item_name_#" value="5 lbs. Dog Food"/>
<input type="hidden" name="item_description_#"
  value="5 lb. bag of nutritious Dog Food"/>
<input type="hidden" name="item_price_#" value="35.00"/>
<input type="hidden" name="item_currency_#" value="USD"/>
<input type="hidden" name="item_quantity_#" value="1"/>
<input type="hidden" name="item_merchant_id_#" value="XXXXXX"/> 
```

# 购物车中每件商品的数量在哪里（item_name_1、item_name_2 等）？

如果这不正确，我如何生成包含多个项目的结帐表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:58:40.920

对我来说看起来不错（当然名称、描述、价格等也将是变量）

```
<input type="hidden" name="item_name_#" value="#foo#"/> 
```

# iphone - initial-scale=1.0 在特定服务器上不适用于 iphone

> ID：10863701
> 
> 赞同：0
> 
> 时间：2012-06-02T15:45:05.420
> 
> 标签：iphone, html, meta-tags

我正在为自己做一个小项目。这是一个小型网络应用程序。我想通过使用一些 css 媒体查询使其对 iPhone 做出响应。这一切都很好，但我对一个问题感到困惑。initial-scale=1.0 元标记在我的生产服务器上不起作用。它在我的开发服务器上工作得很好，它也在我可用的另一台生产服务器上工作。它也发生在多部手机上。

我真的不明白为什么元标记会在特定服务器上失败。就我而言，这些应该与托管代码的服务器有关。

如果您查看 labs.wooltown.nl/split，您会发现问题所在。如果您查看 kuacha.net/split，您会看到它应该是怎样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:51:50.167

我认为这与有框架有关。我尚未测试/阅读有关缩放如何在框架中工作的信息，但请尝试在框架集页面上添加元标记。

# sql - SQL触发器限制用户数

> ID：10863706
> 
> 赞同：0
> 
> 时间：2012-06-02T15:45:48.597
> 
> 标签：sql, oracle, triggers, limit

我还在学习如何使用 SQL，我需要一些帮助来创建这个数据库。

我创建了以下表格：

```
create table Worker
(Num_Worker number(20) PRIMARY KEY,
Name varchar2(30),
ID number(8),
Password varchar2(20));

create table Area
(Code_Area number(10) PRIMARY KEY,
Name varchar2(30),
Current_workers number(2)
Max_workers number(2));

create table Timetable
(ID_Timetable number(10) PRIMARY KEY, 
Time_Entrance date,
Time_Exit date,
Code_Area number(10),
Num_Worker number(20),
Foreign Key (Num_Worker) references Worker(Num_Worker),
Foreign Key (Code_Area) references Area(Code_Area)); 
```

假设每个工人可以选择一个区域工作，但每个区域同时有一个限制或工人。

会发生的情况是工人会创建一个新的时间表，但在创建时间表之前，它应该检查他选择的区域，检查“Current_workers”是否与“Max_workers”的值相同，如果是则不应该让它发生。

我一直在尝试为此创建一个触发器，但我没有找到正确的语法，我也不知道该怎么做，或者是否有比使用更好的方法一个触发器。这就是我到目前为止所做的一切：

```
create trigger limit_worker_per_zone
before insert
on Timetable
for each row
as
 BEGIN
  if (select Current_Workers from Area) >= (select Max_workers from Area) <-Not sure...
  BEGIN
    ???
  END
 END 
```

如果您能在这方面帮助我，我将不胜感激。与此同时，我仍然会自己寻找更多信息，但帮助越多越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:37:07.260

```
CREATE TRIGGER limit_worker_per_zone
BEFORE INSERT
ON Timetable
FOR EACH ROW
DECLARE
 v_total NUMBER;
 BEGIN
   BEGIN 
    SELECT max_workers - current_workers
    INTO v_total
    FROM Area
    WHERE Code_Area = :NEW.Code_Area;
    exception when no_data_found then
       v_total := 1;
    END;
 IF v_total <= 0 THEN
   raise_application_error(990000, 'workers full for this area');
 END IF;
END limit_worker_per_zone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:35:25.950

试试这个作为起点：

```
CREATE OR REPLACE TRIGGER LIMIT_WORKER_PER_ZONE
  BEFORE INSERT ON TIMETABLE
  FOR EACH ROW
AS
  nCurrent_workers  NUMBER;
  nMax_workers      NUMBER;
BEGIN
  SELECT CURRENT_WORKERS,
         MAX_WORKERS
    INTO nCurrent_workers,
         nMax_workers
    FROM AREA
    WHERE CODE_AREA = :NEW.CODE_AREA;

  IF nCurrent_workers = nMax_workers THEN
    NULL;  -- add code here to do the appropriate thing when the area is already full
  ELSE
    NULL;  -- add code here to to the appropriate thing if the area is not full
  END IF;
END LIMIT_WORKER_PER_ZONE; 
```

我会把它留给你来充实这一点。

分享和享受。

# c# - 如何限制列的宽度并使其文本换行

> ID：10863708
> 
> 赞同：1
> 
> 时间：2012-06-02T15:46:07.130
> 
> 标签：c#, asp.net

我的应用程序中有一个 RadGrid，发生的情况是，如果网格列中的文本太长，它将不会换行，因此网格容器将展开并离开框架，所以我想这样做，以便当列中的文本太长而无法换行，我该怎么做？这是其中一列的示例。

```
 <telerik:GridBoundColumn DataField="clientnum" 
 HeaderText="Client Number" HeaderStyle-HorizontalAlign="Left" 
 AllowSorting="false" /> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:57:38.720

试试下面的 aspx 代码。

ASPX：

```
<MasterTableView   > 
<ItemStyle   Wrap="True" /> 
```

将列的宽度设置为固定宽度，以便在越界后将文本换行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:06:02.117

您是否尝试过添加 HeaderStyle-Width 标签？所以像这样：

```
 <telerik:GridBoundColumn DataField="clientnum" 
    HeaderText="Client Number" HeaderStyle-HorizontalAlign="Left" 
    AllowSorting="false" HeaderStyle-Width="100"/> 
```

您将 100 替换为所需宽度的位置。

让我知道它是否有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:04:33.497

我认为，最好的方法是通过 firebug 查看生成表的 id，然后您可以通过 css 设置宽度。在css文件中你应该写这样的东西

```
#table_id td{
 width: 50px;/*for example*/
} 
```

# email - joomla sendmail 的 HTML 格式

> ID：10863711
> 
> 赞同：1
> 
> 时间：2012-06-02T15:46:14.350
> 
> 标签：email, joomla

我想将 joomla 纯文本电子邮件格式更改为 HTML 格式，因此当用户从我的 joomla 站点收到电子邮件时，将收到一封漂亮的 html 格式的电子邮件。任何人都可以帮助我如何做到这一点？任何核心黑客都可以。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:45:35.827

这是你需要做的，有一个平面告诉 joomla 邮件程序内容在 html 中

```
jimport('joomla.mail.mail');
$user = JFactory::getUser();
$user_email = $user->email;

$mailer = JMail::getInstance();
$mailer->setSender('no-replay');
$mailer->addRecipient($user_email);
$mailer->isHTML(TRUE); <--- here is flag
$mailer->setSubject('subject');
$html= array();
$html[] = '<div style="background: red"> hello world</div>';
$mailer->setBody(implode("\n", $html));
$mailer->Send(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:11:55.183

如果您指的是 Joomla 后端中的 Mass Mail 系统，那么有一个选项说“以 HTML 模式发送”。否则我会推荐使用不同的组件。

# ruby-on-rails - 未找到 Capistrano/RVM 耙

> ID：10863717
> 
> 赞同：0
> 
> 时间：2012-06-02T15:46:56.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm, capistrano

我正在尝试使用 Capistrano 部署第一个 rails 应用程序。

capistrano 尝试运行时出现错误`rake db:migrate`。更清楚的是，这是异常的回溯：

```
[ip] executing command
*** [err :: ip] bash: rake: command not found
command finished in 124ms
failed: "env RAILS_ENV=production bash -c 'cd /home/deployer/website/current && rake RAILS_ENV=production  db:migrate'" on ip 
```

这就是`config/deploy.rb`我实际使用的。在服务器上我安装了 RVM（单用户安装）。

```
# config/deploy.rb 
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))

require "rvm/capistrano"

set :scm,             :git
set :repository,      "git@bitbucket.org:user/project.git"
set :branch,          "origin/master"
set :migrate_target,  :current
set :ssh_options,     { :forward_agent => true }
set :rails_env,       "production"
set :deploy_to,       "/home/deployer/website"
set :normalize_asset_timestamps, false
set :rvm_type, :user  # Don't use system-wide RVM
set :rvm_ruby_string, "ruby-1.9.3-p194@global"

set :user,            "deployer"
set :group,           "staff"
set :use_sudo,        false

role :web,    "IP"
role :app,    "IP"
role :db,     "IP2", :primary => true

set(:latest_release)  { fetch(:current_path) }
set(:release_path)    { fetch(:current_path) }
set(:current_release) { fetch(:current_path) }

set(:current_revision)  { capture("cd #{current_path}; git rev-parse --short HEAD").strip }
set(:latest_revision)   { capture("cd #{current_path}; git rev-parse --short HEAD").strip }
set(:previous_revision) { capture("cd #{current_path}; git rev-parse --short HEAD@{1}").strip }

default_environment["RAILS_ENV"] = 'production'

default_run_options[:shell] = 'bash'

namespace :deploy do
  desc "Deploy your application"
  task :default do
    update
    restart
  end

  desc "Setup your git-based deployment app"
  task :setup, :except => { :no_release => true } do
    dirs = [deploy_to, shared_path]
    dirs += shared_children.map { |d| File.join(shared_path, d) }
    run "#{try_sudo} mkdir -p #{dirs.join(' ')} && #{try_sudo} chmod g+w #{dirs.join(' ')}"
    run "git clone #{repository} #{current_path}"
  end

  task :cold do
    update
    migrate
  end

  task :update do
    transaction do
      update_code
    end
  end

  desc "Update the deployed code."
  task :update_code, :except => { :no_release => true } do
    run "cd #{current_path}; git fetch origin; git reset --hard #{branch}"
    finalize_update
  end

  desc "Update the database (overwritten to avoid symlink)"
  task :migrations do
    transaction do
      update_code
    end
    migrate
    restart
  end

  task :finalize_update, :except => { :no_release => true } do
    run "chmod -R g+w #{latest_release}" if fetch(:group_writable, true)

    # mkdir -p is making sure that the directories are there for some SCM's that don't
    # save empty folders
    run <<-CMD
      rm -rf #{latest_release}/log #{latest_release}/public/system #{latest_release}/tmp/pids &&
      mkdir -p #{latest_release}/public &&
      mkdir -p #{latest_release}/tmp &&
      ln -s #{shared_path}/log #{latest_release}/log &&
      ln -s #{shared_path}/system #{latest_release}/public/system &&
      ln -s #{shared_path}/pids #{latest_release}/tmp/pids &&
      ln -sf #{shared_path}/database.yml #{latest_release}/config/database.yml
    CMD

    if fetch(:normalize_asset_timestamps, true)
      stamp = Time.now.utc.strftime("%Y%m%d%H%M.%S")
      asset_paths = fetch(:public_children, %w(images stylesheets javascripts)).map { |p| "#{latest_release}/public/#{p}" }.join(" ")
      run "find #{asset_paths} -exec touch -t #{stamp} {} ';'; true", :env => { "TZ" => "UTC" }
    end
  end

  desc "Zero-downtime restart of Unicorn"
  task :restart, :except => { :no_release => true } do
    run "kill -s USR2 `cat /tmp/unicorn.my_site.pid`"
  end

  desc "Start unicorn"
  task :start, :except => { :no_release => true } do
    run "cd #{current_path} ; bundle exec unicorn_rails -c config/unicorn.rb -D"
  end

  desc "Stop unicorn"
  task :stop, :except => { :no_release => true } do
    run "kill -s QUIT `cat /tmp/unicorn.my_site.pid`"
  end  

  namespace :rollback do
    desc "Moves the repo back to the previous version of HEAD"
    task :repo, :except => { :no_release => true } do
      set :branch, "HEAD@{1}"
      deploy.default
    end

    desc "Rewrite reflog so HEAD@{1} will continue to point to at the next previous release."
    task :cleanup, :except => { :no_release => true } do
      run "cd #{current_path}; git reflog delete --rewrite HEAD@{1}; git reflog delete --rewrite HEAD@{1}"
    end

    desc "Rolls back to the previously deployed version."
    task :default do
      rollback.repo
      rollback.cleanup
    end
  end
end

def run_rake(cmd)
  run "cd #{current_path}; #{rake} #{cmd}"
end 
```

我怎样才能使它正常运行？

当然我已经尝试`rake`在服务器上运行，并且找到正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:49:37.440

您通过添加以下行来打破`rvm/capistrano`集成：

```
default_run_options[:shell] = 'bash' 
```

您需要将其删除。

此外，我在您的脚本中看到了很多过度工程，请检查我不时运行的示例脚本以确认 RVM 按预期工作： [https ://github.com/mpapis/ad/blob/master/config/部署.rb](https://github.com/mpapis/ad/blob/master/config/deploy.rb)

# java - 使用日历类 injava 同步服务器时间

> ID：10863718
> 
> 赞同：0
> 
> 时间：2012-06-02T15:47:00.100
> 
> 标签：java, web-services, calendar

我已经使用 java 在 Web 服务中构建了两台服务器。我的问题是我无法弄清楚如何使用 java 中的日历类来同步服务器时间。如果你能帮助我，我会很高兴，至少它会很好给我一个例子，我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:50:25.900

我认为您不应该使用 Java 在它们之间同步系统时间。有一个成熟且广泛传播的协议可用于此问题：[网络时间协议](http://www.ntp.org/)

否则你必须处理

*   网络延迟
*   内部 CMOS 时钟的时间漂移
*   获取正确的参考日期
*   系统权限：通常需要 root 才能更改时间......而且您不希望您的 Web 服务以 root 身份运行？

当然，所有这些问题都在 NTP 中得到解决。

# extjs - extjs 向动态表单添加附加字段

> ID：10863722
> 
> 赞同：2
> 
> 时间：2012-06-02T15:47:13.570
> 
> 标签：extjs, extjs4

我需要允许我的用户通过单击一个按钮来提交多个属性地址，该按钮将插入一个带有额外文本字段的字段集。我可以简单地使用 form.insert(index, component); 但是，该索引将在用户添加其他属性后发生变化。例如，添加额外属性的索引在第 7 个组件之后，使索引为 7。但是当您在 7 处插入它时，它的索引现在是 7，并且将在其上方插入下一个属性。当您尝试使用相同形式的联系电子邮件和号码来执行此操作时，这种效果会更加复杂。所以我的问题是，如何以我希望在之后插入额外字段的形式获取组件的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T23:01:20.307

```
fieldset.items.getCount() 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:07:14.693

不完全直截了当，但也不算太糟糕。看看下面的代码：第一部分是添加一组字段的按钮处理程序，第二部分是创建索引字段的实际函数。

```
 handler:function () {
        var parts = this.up('fieldset'),
        index = parts.query('fieldcontainer').length, //calculate existing Part line items
        fields = this.up('window').createPartFieldContainer(index);
        parts.add(fields);
    }

createPartFieldContainer:function (index) {
    index = index || 0;
    return {
        xtype:'fieldcontainer',
        items:[
            { 
                xtype:'textfield', fieldLabel:'Item',
                name:'lineItem[' + index + '].itemNumber', width:100,
                emptyText:'Part Number'
            }
        ]
    }
} 
```

# flash - 更改彩色图像的阴影。线程中的示例。[闪光; as3]

> ID：10863724
> 
> 赞同：0
> 
> 时间：2012-06-02T15:47:28.143
> 
> 标签：flash

我尝试用 ColorTransform 做到这一点，但它改变了透明像素：[http ://savepic.su/2068100.png](http://savepic.su/2068100.png)

建议如何快速更改图像中颜色的色调并保存透明像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:24:14.500

您可以改用它，它对每个像素的向量`[ColorMatrixFilter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filters/ColorMatrixFilter.html)`执行矩阵变换。`[R, G, B, A]`

例如，下面的过滤器将每个像素的红色分量乘以`1.2`并加上`25`。每个像素的绿色分量乘以`0.8`.

```
var filter:* = new ColorMatrixFilter( [
    1.2, 0  , 0  , 0, 25,
    0  , 0.8, 0  , 0,  0,
    0  , 0  , 1  , 0,  0,
    0  , 0  , 0  , 1,  0
] ); 
```

如果你想做一个实际的*色调偏移*，你必须构建一个矩阵来围绕向量旋转`[R, G, B]`3D`[1, 1, 1]`向量。但我猜这比你所追求的更复杂。

# php - 使用 jquery 操作 JSON 数组

> ID：10863728
> 
> 赞同：1
> 
> 时间：2012-06-02T15:47:46.877
> 
> 标签：php, javascript, jquery, json

我正在用 PHP 打印一个`<ul>`数组`$_SESSION['words']`。

```
 // PHP print new words as links
    echo '<ul id="wordlist">';
    foreach($_SESSION['words'] as $word => $description) {
        echo '<li id="wordlist"><a href="#">' . $word . '</a></li>';
    } 
```

数组很简单 - 单词被存储为键，单词的描述将是值，例如 `array(5) { ["word1"]=> int(1) ["word2"]=> int(2) ["word3"]=> int(3) ["word4"]=> int(4) ["word5"]=> int(5) }`

我计划通过选择 a`$word`并添加 a`$description`并将其添加到数组中来操作数组中的项目，所以我想我会使用 jQuery 来完成它。

我的问题是：如果我从这个 PHP 数组创建一个 JSON 数组，我可以用同样的方式打印出来并对其进行操作吗？我对其进行了编码，`$myJSON = json_encode($_SESSION['words']);`但我已经尝试从 JSON 中打印出键/值！谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:53:50.580

您可以使用[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)：

```
var json = $.parseJSON('your json');
alert(json.word1);
alert(json.word2); 
```

如果您的 JSON 数据可通过 URL 获得，您可以使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:10:38.723

您的描述向我表明，除了使用 PHP 的 JSON 编码功能之外，您没有以任何方式使用 JSON。听起来您正在将 PHP 关联数组编码为 JSON 字符串，然后将该字符串写入 HTML 输出。如果是这种情况，那么您的 JSON 确实是一个 JavaScript 对象。

所以让我们假设你得到的标记是这样的：

```
<script>
  // Using a global here, which is not good,
  // but this is an example.
  var myWordList = {"word1":1,"word2":2,"word3":3};
</script>
<ul id="wordlist">
  <li id="word1">1</li>
  <li id="word2">2</li>
  <li id="word3">3</li>
</ul> 
```

请注意，我的 id 属性值是唯一的。您多次使用相同的 id 属性值；那是无效的标记。此外，对于这个示例，我使每个列表元素中的标记保持简单（只是文本）。

因此，鉴于此标记，我们可以编写以下 JavaScript：

```
<script>
// Update our wordlist object with some descriptions
myWordList.word1 = {
  "value": myWordList.word1,
  "description": "This is word 1."
};

myWordList.word2 = {
  "value": myWordList.word2,
  "description": "This is word 2."
};

myWordList.word3 = {
  "value": myWordList.word3,
  "description": "This is word 3."
};

// Now lets update the unordered list with jQuery
for (var i = 1; i < 4; i += 1) {
  $('#word' + i).html(myWordList['word' + i].description);
}
</script> 
```

在这个 JavaScript 中，我首先`myWordList`通过为每个值分配一个新对象来更新这些值。这些新对象有两个属性：一个`value`分配了旧`myWordList.word#`值的属性，以及一个`description`描述单词的新属性。接下来，我通过将单词值替换为单词描述来更新无序列表。

**编辑：**

如果要遍历对象中的属性，可以这样做：

```
for (var key in myWordList) {
  if (myWordList.hasOwnProperty(key)) {
    console.dir(myWordList[key]);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T16:00:50.707

1.  如果不习惯 $.each 方法，也可以尝试旧的数组循环：

    ```
    $.ajax({ 
      url: '',
      dataType: 'json', 
      success: function(arrayData) { 
        var i,max=arrayData.length; 
        for(i=0;i<max;i++){ 
           var rowItem = arrayData[i];
           try{
           console.log(rowItem.attr1);
           }catch(ex){
           alert(ex);///in case data is not complete
           }
        }); 
      } 
    }); 
    ```

2.  如果您已经有了 JSON 字符串，请说 strJson = '[{attr1:"hello"},{attr1:"world"}]';

    ```
    var tmp = 'var data = '+strJson; 
    ///so you got : var data = [{attr1:"hello"},{attr1:"world"}]
    eval(tmp);/// execute the above line
    alert(data.length + "first item:"+data[0].attr1); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T15:50:23.643

您需要通过 AJAX 和

```
$.ajax({
  url: '',
  dataType: 'json',
  success: function(response) {
    $.each(response, function(key, val) {
       console.log(key); // word1, word2, word3...
       console.log(val); // 1, 2, 3...
       ....
    });
  }
}); 
```

# objective-c - Objective-C 中的线性回归

> ID：10863732
> 
> 赞同：4
> 
> 时间：2012-06-02T15:48:10.403
> 
> 标签：objective-c, linear-regression, least-squares, data-fitting

我正在尝试实现一种将线拟合到 2D 中的一组点的方法。我编写了以下代码，它从两个数组（X，Y 坐标）中读取数据，并应使用最小二乘法计算最佳拟合线的参数。我使用了这里给出的公式： [mathworld.wolfram](http://mathworld.wolfram.com/LeastSquaresFitting.html)

```
- (void) linearRegressionOfUserAcceleration 
{
     double avgX = [[_accelBufferX valueForKeyPath:@"@avg.doubleValue"] doubleValue];
     double avgY = [[_accelBufferY valueForKeyPath:@"@avg.doubleValue"] doubleValue];
     int n = _accelBufferX.count;

     double ssX, ssY, ssXY;
     ssX = ssY = ssXY = 0;
     int i;

     // Sum of squares X, Y & X*Y
     for (i = 0; i < n; i++)
     {
         ssX += pow([[_accelBufferX objectAtIndex:i] doubleValue],2);
         ssY += pow([[_accelBufferY objectAtIndex:i] doubleValue],2);
         ssXY += [[_accelBufferX objectAtIndex:i] doubleValue] * [[_accelBufferY objectAtIndex:i] doubleValue];
     }

     ssX = ssX - n * pow(avgX,2);
     ssY = ssY - n * pow(avgY,2);
     ssXY = ssXY - n * avgX * avgY;

     // Best fit of line y_i = a + b * x_i 
     b = ssXY / ssX;
     a = avgY - b * avgX;

     // Correlationcoefficent gives the quality of the estimate: 1 = perfect to 0 = no fit
     corCoeff = pow(ssXY,2) / ssX * ssY;

     NSLog(@"n: %d, a: %f --- b: %f --- cor: %f --- avgX: %f --- avgY: %f --- ssX: %f - ssY: %f - ssXY: %f", n, a, b, corCoeff, avgX, avgY, ssX, ssY, ssXY);
} 
```

我得到这样的输出：

```
 n: 15, a: -0.095204 --- b: 0.929245 --- cor: 3.567163   --- avgX: -0.017827 -- avgY: -0.111770 --- ssX: 2.176048 - ssY: 1.898429 - ssXY: 2.022081 
```

结果线根本不适合数据，尽管 corelationCoefficient 有时大于一，恕我直言，如果一切正常，则永远不会发生这种情况。

有人在我的实施中看到任何错误吗？

**- 编辑 -**

这是更正的代码，遵循 CRD 的提示。我用它来提取两个步骤之间水平面上采样的用户加速度的方向向量，以获得步骤方向。

这对我有用：

```
- (void) linearRegressionOfUserAcceleration
{
    NSUInteger n = _accelBufferX.count;
    double ax, ay, sX, sY, ssX, ssY, ssXY, avgX, avgY;

    // Sum of squares X, Y & X*Y
    for (NSUInteger i = 0; i < n; i++)
    {
        @synchronized(self) {
            ax = [[_accelBufferX objectAtIndex:i] doubleValue];
            ay = [[_accelBufferY objectAtIndex:i] doubleValue];
        }
        sX += ax;
        sY += ay;
        ssX += ax * ax;
        ssY += ay * ay;
        ssXY += ax * ay;
    }

    avgX = sX / n;
    avgY = sY / n;
    radius = hypot(avgX, avgY);
    ssX = ssX - n * (avgX * avgX);
    ssY = ssY - n * (avgY * avgY);
    ssXY = ssXY - n * avgX * avgY;

    // Best fit of line y_i = a + b * x_i
    b = ssXY / ssX;
    a = (avgY - b * avgX);
    theta = atan2(1, b);

    // Correlationcoefficent gives the quality of the estimate: 1 = perfect to 0 = no fit
    corCoeff = (ssXY * ssXY) / (ssX * ssY);

    NSLog(@"n: %d, a: %f --- b: %f --- cor: %f   --- avgX: %f -- avgY: %f --- ssX: %f - ssY: %f - ssXY: %f", n, a, b, corCoeff, avgX, avgY, ssX, ssY, ssXY);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:03:32.780

Put in some known data you can check by hand, e.g. {1,1}, {2,2}, {3,3}. Are the averages correct? If so move on to the sums, etc. The error will reveal itself.

On the code itself you can make it clearer, and incidentally more efficient, by dropping the calls to @"avg.doubleValue" and producing all your sums in a single loop:

```
// Sum of X, Y, X^2, Y^2 & X*Y
for (NSUInteger i = 0; i < n; i++)
{
   double x = [[_accelBufferX objectAtIndex:i] doubleValue];
   double y = [[_accelBufferY objectAtIndex:i] doubleValue];
   sX += x;
   sY += y;
   ssX += x * x;
   ssY += y * y;
   ssXY += x * y;
} 
```

# algorithm - MATLAB中的图像处理算法

> ID：10863734
> 
> 赞同：18
> 
> 时间：2012-06-02T15:48:33.757
> 
> 标签：algorithm, matlab, image-processing, filter

我正在尝试实现本文中描述的算法：

> [在临时光谱带中分解生物散斑图像](http://www.opticsinfobase.org/ol/abstract.cfm?uri=OL-30-13-1641)

下面是对算法的解释：

> 我们以采样频率记录了一系列`N`连续的散斑图像`fs`。通过这种方式，可以观察像素如何通过`N`图像演变。这种演变可以被视为一个时间序列，并且可以按以下方式处理：与每个像素的演变相对应的每个信号都被用作一组滤波器的输入。强度值之前除以它们的时间平均值，以最小化物体反射率或照明的局部差异。可以充分分析的最大频率由采样定理和采样频率的一半决定`fs`。后者由 CCD 相机、图像大小和图像采集卡设置。滤波器组如图 1 所示。
> 
> ![过滤器库](../Images/64652a01788df74fd28d9a91e7e165c4.png)
> 
> 在我们的案例中，使用了 10 个 5° 阶巴特沃斯滤波器，但这个数字可以根据所需的区分而变化。该银行是在使用 MATLAB 软件的计算机中实现的。我们选择了 Butter-worth 滤波器，因为除了简单之外，它还具有最大的平坦度。可以使用其他滤波器、无限脉冲响应或有限脉冲响应。
> 
> 通过这组滤波器，获得每个临时像素演化的每个滤波器的十个对应信号作为输出。然后计算每个信号中的平均能量 Eb：
> 
> ![能量方程](../Images/85a923430861793b056c7299e6bdc0c5.png)
> 
> 其中`pb(n)`是第 n 个过滤器图像中过滤像素的强度`b`除以其平均值，并且`N`是图像总数。通过这种方式，`En`获得了每个像素的能量值，每个下摆都属于图 1 中的一个频带。
> 
> 有了这些值，就可以构建十幅活动物体的图像，每幅图像都显示了在某个频带内有多少随时间变化的散斑能量。结果中灰度级的错误颜色分配将有助于区分。

这是我基于此的 MATLAB 代码：

```
for i=1:520
    for j=1:368
        ts = [];
        for k=1:600
            ts = [ts D{k}(i,j)]; %%% kth image pixel i,j --- ts is time series
        end
        ts = double(ts);
          temp = mean(ts);        
           if (temp==0)
                for l=1:10
                    filtImag1{l}(i,j)=0;
                end
                continue;
           end

         ts = ts-temp;          
         ts = ts/temp;    
        N = 5; % filter order
        W = [0.0 0.10;0.10 0.20;0.20 0.30;0.30 0.40;0.40 0.50;0.50 0.60 ;0.60 0.70;0.70 0.80 ;0.80 0.90;0.90 1.0];      
        [B,A]=butter(N,0.10,'low');
        ts_f(1,:) = filter(B,A,ts);         
        N1 = 5;                        
        for ind = 2:9           
            Wn = W(ind,:);
            [B,A] = butter(N1,Wn);            
            ts_f(ind,:) = filter(B,A,ts);            
        end        
        [B,A]=butter(N,0.90,'high');
        ts_f(10,:) = filter(B,A,ts); 

        for ind=1:10
          %Following Paper Suggestion          
           filtImag1{ind}(i,j) =sum(ts_f(ind,:).^2);
        end                 
    end
end

for i=1:10
  figure,imshow(filtImag1{i});  
  colorbar
end

pre_max = max(filtImag1{1}(:));
for i=1:10
   new_max = max(filtImag1{i}(:));
    if (pre_max<new_max)
        pre_max=max(filtImag1{i}(:));
    end
end
new_max = pre_max;

pre_min = min(filtImag1{1}(:));
for i=1:10
   new_min = min(filtImag1{i}(:));
    if (pre_min>new_min)
        pre_min = min(filtImag1{i}(:));
    end
end

new_min = pre_min;

%normalize
 for i=1:10
 temp_imag = filtImag1{i}(:,:);
 x=isnan(temp_imag);
 temp_imag(x)=0;
 t_max = max(max(temp_imag));
 t_min = min(min(temp_imag));
 temp_imag = (double(temp_imag-t_min)).*((double(new_max)-double(new_min))/double(t_max-t_min))+(double(new_min));

 %median filter
 %temp_imag = medfilt2(temp_imag);
 imag_test2{i}(:,:) = temp_imag;
 end

for i=1:10
  figure,imshow(imag_test2{i});
  colorbar
 end

for i=1:10
    A=imag_test2{i}(:,:);
    B=A/max(max(A));
    B=histeq(A);
 figure,imshow(B); 
 colorbar
 imag_test2{i}(:,:)=B;
end 
```

但我没有得到与纸相同的结果。有人知道为什么吗？或者我哪里出错了？

**通过从@Amro** 获得帮助并使用他的代码进行编辑，我最终得到以下图像：这是我 72 小时发芽扁豆的原始图像（400 张图像，每秒 5 帧）： ![在此处输入图像描述](../Images/c6d673fd07b18cee6a2fa45f03db45e8.png)

这是 10 个不同波段的结果图像：

![乐队1](../Images/58e2291b0193430b569c94d5c232f36d.png) ![带2](../Images/062662a78ec463e414ec55be4aecc217.png) ![乐队3](../Images/a358dd22e4d28ac6aaca8388499ad7aa.png) ![带4](../Images/b7ba3cc0e4519a4fff7047e464973dc8.png) ![乐队5](../Images/0ce1f90711cea5dc692a3295fe8edf1e.png) ![带6](../Images/70cb65c3a86beba743dafa4b7913c79d.png) ![乐队7](../Images/9793c6d36bb834f30d8cbb349ff1333e.png) ![带8](../Images/694796f63a881b905c66074c7d33e2bc.png) ![乐队 9](../Images/c5b91324253a7f1fd7982af5325b762b.png) ![乐队 10](../Images/b0026b683475c197e9f23732a3a3e134.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T17:29:08.873

我可以发现几个问题：

*   当您将信号除以平均值时，您需要检查它是否不为零。否则结果将是`NaN`。

*   作者（我正在关注[这篇文章](http://wheat.pw.usda.gov/ggpages/BarleyNewsletter/50/ARGBNL50.htm)）使用了一组滤波器，其频带覆盖了直到奈奎斯特频率的整个范围。你做了一半。您传递的归一化频率`butter`应该一直上升到`1`（对应于`fs/2`）

*   在计算每个滤波信号的能量时，我认为你不应该除以它的平均值（你之前已经考虑过了）。而是简单地做：`E = sum(sig.^2);`对于每个过滤的信号

*   在最后的后处理步骤中，您应该归一化到范围 [0,1]，然后应用中值滤波算法`medfilt2`。计算看起来不正确，它应该是这样的：

    ```
    img = ( img - min(img(:)) ) ./ ( max(img(:)) - min(img(:)) ); 
    ```

* * *

### 编辑：

考虑到以上几点，我尝试以矢量化的方式重写代码。由于您没有发布示例输入图像，因此我无法测试结果是否符合预期......另外我不确定如何解释最终图像:)

```
%# read biospeckle images
fnames = dir( fullfile('folder','myimages*.jpg') );
fnames = {fnames.name};
N = numel(fnames);                    %# number of images
Fs = 1;                               %# sampling frequency in Hz
sz = [209 278];                       %# image sizes
T = zeros([sz N],'uint8');            %# store all images
for i=1:N
    T(:,:,i) = imread( fullfile('folder',fnames{i}) );
end

%# timeseries corresponding to every pixel
T = reshape(T, [prod(sz) N])';        %# columns are the signals
T = double(T);                        %# work with double class

%# normalize signals before filtering (avoid division by zero)
mn = mean(T,1);
T = bsxfun(@rdivide, T, mn+(mn==0));  %# divide by temporal mean

%# bank of filters
numBanks = 10;
order = 5;                                       % butterworth filter order
fCutoff = linspace(0, Fs/2, numBanks+1)';        % lower/upper cutoff freqs
W = [fCutoff(1:end-1) fCutoff(2:end)] ./ (Fs/2); % normalized frequency bands
W(1,1) = W(1,1) + 1e-5;                          % adjust first freq
W(end,end) = W(end,end) - 1e-5;                  % adjust last freq

%# filter signals using the bank of filters
Tf = cell(numBanks,1);                %# filtered signals using each filter
for i=1:numBanks
    [b,a] = butter(order, W(i,:));    %# bandpass filter
    Tf{i} = filter(b,a,T);            %# apply filter to all signals
end
clear T                               %# cleanup unnecessary stuff

%# compute average energy in each signal across frequency bands
Tf = cellfun(@(x)sum(x.^2,1), Tf, 'Uniform',false);

%# normalize each to [0,1], and build corresponding images
Tf = cellfun(@(x)reshape((x-min(x))./range(x),sz), Tf, 'Uniform',false);

%# show images
for i=1:numBanks
    subplot(4,3,i), imshow(Tf{i})
    title( sprintf('%g - %g Hz',W(i,:).*Fs/2) )
end
colormap(gray) 
```

![截屏](../Images/e76688eb7ed660442c1f04ff07d99a79.png)

*（我使用[这里](http://lissi.fr/eric-delechelle/research/speckle/start)的图像来获得上述结果）*

### 编辑#2

做了一些更改并稍微简化了上面的代码。这将减少内存占用。例如，我使用元胞数组而不是单个多维矩阵来存储结果。这样我们就不会分配一大块连续的内存。我还重用了相同的变量，而不是在每个中间步骤中引入新的变量......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T16:37:41.167

论文没有提到减去时间序列的平均值，你确定有必要吗？此外，您只需从最后一张图像计算一次 new_max 和 new_min。

# debugging - 在 Visual Studio 2005 中检查 std::stringstream 的值

> ID：10863736
> 
> 赞同：2
> 
> 时间：2012-06-02T15:48:33.897
> 
> 标签：debugging, visual-studio-2005, debuggervisualizer

在 VS2005 中调试时，有没有办法检查`.str()`std::ostringstream 的值（）？就像修改 autoexp.dat 文件以使 stringstream 值可视化一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:25:03.730

您必须更深入地研究 stringstream 的基类。

在 VS9 中调试时，这通常对我有用：

```
(*(((*(std::basic_ios<char,std::char_traits<char> >*)(&(*(std::basic_istream<char,std::char_traits<char> >*)(&(*(std::basic_iostream<char,std::char_traits<char> >*)(&YOUR_STRINGSTREAM_INSTANCE)))))))._Mystrbuf))._Gfirst 
```

# javascript - 谷歌地图标记的循环问题

> ID：10863740
> 
> 赞同：0
> 
> 时间：2012-06-02T15:49:13.527
> 
> 标签：javascript, ajax, google-maps-api-3

尝试使用每个对象的 lat 和 long 将标记从 Django 后端放置在 Google Map 上。这样做非常令人沮丧。我相信问题出在 for 循环中，但我无法准确确定问题所在（我可能只需要第二个循环）。任何帮助或见解将不胜感激。

```
var stories = [{% for story in stories %}
        {latitude:{{story.latitude}},longitude:{{story.longitude}}}, {% endfor %}];

function loadMarkers(stories){
    for (i=0;i<stories.length;i++) {
        var story = stories[i];
        var point = new google.maps.LatLng(story.latitude, story.longitude);
        var marker = new google.maps.Marker({position: point, map: map});
    }
}

loadMarkers(stories); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:12:32.787

我对 Django 不熟悉，但如果您的问题是纯 JavaScript 代码，我可以提供我想看的第一个位置。

检查以确保您循环的是数组而不是对象。javascript 中的每个对象都有一个长度属性。

在 FF 或 chrome 等调试器中执行以下操作。

```
function loadMarkers(stories){
for (i=0;i<stories.length;i++) {
    var story = stories[i];
    var point = new google.maps.LatLng(story.latitude, story.longitude);
    var marker = new google.maps.Marker({position: point, map: map});

console.log(i);
console.log(stories);
console.log(stories[i]);
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:13:57.570

我建议你检查两点：

1)django => {{ 和 }} 可能有问题

2）js =>最后一个'，'导致错误，你不能像这样：{lat：1，lng：2，}

# android - 用于 LibXtract 的 Android.mk

> ID：10863741
> 
> 赞同：2
> 
> 时间：2012-06-02T15:49:24.097
> 
> 标签：android, linux, audio, android-ndk

有人可以帮我为 LibXtract 编写 Android.mk 或指出正确的方向吗？

这是 lib 的来源 - [https://github.com/jamiebullock/LibXtract.git](https://github.com/jamiebullock/LibXtract.git)

或者也许有一种方法可以在 Android 中使用 linux 生成的共享对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:20:42.697

特别是对于较大的已建立项目，制作`Android.mk`文件是一项相当大的工作。更重要的是，如果您不熟悉 Android NDK 构建架构，其理解需要深入研究文档和 Android NDK make 文件。我建议尝试通过设置`CC`指向您的 NDK 工具链和`CFLAGS += -sysroot $(SYSROOT)`位置`SYSROOT=${NDK_INSTALL_DIR}/platforms/android-<level>/arch-<arch>/`（取决于目标 Android API 版本和架构）来使用现有的 make 文件。即使不知道你的图书馆，我敢打赌你应该有很大的成功机会。Android NDK 文档 ( `${NDK_INSTALL_DIR}/doc/STANDALONE-TOOLCHAIN.html`) 详细介绍了独立工具链的使用，还说明了如何创建不需要使用`-sysroot`参数的独立工具链`xxx-gcc`。

如果您决定`Android.mk`改用，您可能会检查现有项目 -我想到了 CSipSimple（[从](http://code.google.com/p/csipsimple/)标准形式的 GNU make 文件转换的 PJSIP）[。](http://www.pjsip.org/)

重要的是使用 Android 工具链创建共享对象。可以在应用程序源代码树之外构建它们，然后将共享对象复制到包源`libs/<architecture>/`目录中。

与您的构建系统的集成取决于未知的细节（包括您希望整个集成有多顺利，例如因为其他人在同一个项目中工作）。如果您从命令行创建应用程序，最简单的方法是在包根目录中使用 GNU make 文件或 shell 脚本，通过调用 libXtract make file ant 来构建和打包 Java，确保`libXtract.so`您的应用程序包是最新的`and`应用。如果您正在使用`ant`应该有一种方法来指定使用`make`来照顾`libXtract.so`. 我不确定 Eclipse 是否完全依赖于`ant`构建应用程序来了解这是否足以通过在 Eclipse 中单击鼠标按钮来启用完整构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:48:48.123

[这个问题的答案](https://stackoverflow.com/questions/6853568/tool-to-generate-an-android-mk)说你可以使用 cmake 脚本来构建`Android.mk`文件——我没有尝试过这种方法。

# java - Jackrabbit 存储库位置

> ID：10863750
> 
> 赞同：1
> 
> 时间：2012-06-02T15:50:20.127
> 
> 标签：java, jackrabbit, jcr

我尝试使用 2 种方式在 jackrabbit 存储库中创建和检索节点。

[1) this](http://jackrabbit.apache.org/first-hops.html)的第二跳。它是关于通过 Java API 创建、检索和删除内容

2)[本文](http://jukkaz.wordpress.com/2009/11/24/jackrabbit-over-http/)介绍了如何通过 WebDAV 与 Jackrabbit 进行交互。

但我能想到的是，这两种方法处理 2 个存储库（位置），因此我无法检索通过另一种方法添加的数据。我想使用这两种方法访问一个存储库。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:24:07.100

这两种方法也可以使用相同的存储库。所描述的两种方法之间的区别更多地在于客户端与 Jackrabbit 交互的方式。第一个只是 Java API，第二个是通过 WebDAV/HTTP。

在上面的示例中，`http://localhost:8080/server/default/jcr:root/`通过 GET 请求进行请求与以下 Java 代码相同。

```
public static void main(String[] args) throws Exception {
    Repository repository = new TransientRepository();
    Session session = repository.login(
            new SimpleCredentials("username", "password".toCharArray()));
    try {
        Node root = session.getRootNode();
        System.out.println(root.getPath());
    } finally {
        session.logout();
    }
} 
```

# php - 使用 Zend Search Lucene 和通配符

> ID：10863753
> 
> 赞同：0
> 
> 时间：2012-06-02T15:50:33.687
> 
> 标签：php, zend-search-lucene

我正在尝试使用 Zend 搜索 Lucene 对字段进行通配符。

```
$index = Zend_Search_Lucene::open("/data/my_index1");

$doc = new Zend_Search_Lucene_Document();

$doc->addField(Zend_Search_Lucene_Field::Text('date',$date->format('dmY')));

$index->addDocument($doc);

$index->updateIndex();

$hits  = $index->find('2012*'); 
```

最后一行不起作用，因为我的日期类似于`02062012`. 如果我尝试`$hits = $index->find('*2012*');`也不行。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:01:38.080

您还应该验证您的搜索配置是否允许前导“*”，因为这不是 Lucene 中的默认设置。

# delphi - 使用delphi通过互联网在两台计算机之间发送短信？

> ID：10863756
> 
> 赞同：3
> 
> 时间：2012-06-02T15:51:19.417
> 
> 标签：delphi, p2p

我想编写一个可以在不同计算机上运行的应用程序，并且需要像“utorrent”（点对点）一样相互通信。这个应用程序只会发送短信。

我怎样才能做到这一点？我的意思是向互联网上的远程计算机发送一条消息？

我有一个网站，开始时每个应用程序都可以向它发送一些信息，并在其他计算机上查找其他应用程序的信息（使用 PHP），但我不知道如何通过互联网寻址一台计算机并将数据直接发送到该计算机。我可以用 PHP 找到 IP 地址，但它是路由器（ISP）的 IP 地址。

消息如何到达计算机？我想知道如何寻址每台计算机？

我的大脑真的卡在这里，我真的很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:05:59.327

在对等网络中，没有用于将数据从一个客户端传输到另一个客户端的集中式服务器，在这种情况下，客户端必须能够同时充当服务器和客户端。这意味着您要么必须像大多数现代 Torrent 客户端一样使用 UPnP，它处理路由器中的端口转发，要么您必须手动将端口转发到路由器中的计算机。

中央服务器（如种子跟踪器）通常用于使客户端知道彼此的存在并告诉他们在哪里连接。这就是您的 PHP 脚本的用武之地，尽管 PHP 可能无法提供最有效的方法，假设您将它与网络服务器结合使用以通过 http 协议提供数据。

至于实际的文本通信，您可以使用 Indy 套接字库。我找到了这个例子，基本上它展示了如何做到这一点：[http ://www.ciuly.com/delphi/indy/indy-10-client-server-basic-demo/](http://www.ciuly.com/delphi/indy/indy-10-client-server-basic-demo/)

# android - IllegalArgumentException：列 x 无效

> ID：10863758
> 
> 赞同：0
> 
> 时间：2012-06-02T15:51:40.430
> 
> 标签：android, sqlite, illegalargumentexception

我有一个从 sqlite 数据库填充的 Listview。数据库是通过以下方式创建的： `egrohDB.execSQL("CREATE TABLE IF NOT EXISTS " + EGROH_DB_TABLE_ITEMS + " (ident integer primary key AUTOINCREMENT, " + "id integer(15), " +`...

要从我使用的数据库中获取数据`rawQueries`并插入我正在使用的数据`InsertHelper`。我在表格中添加了一行。现在我得到一个`IllegalArgumentException`mit id 行是无效的。

```
06-02 17:48:24.340: E/AndroidRuntime(23200): FATAL EXCEPTION: main
06-02 17:48:24.340: E/AndroidRuntime(23200): java.lang.IllegalArgumentException: column 'id' is invalid
06-02 17:48:24.340: E/AndroidRuntime(23200):    at android.database.DatabaseUtils$InsertHelper.getColumnIndex(DatabaseUtils.java:1078)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at com.y5apps.DatabaseController.insertData(DatabaseController.java:273)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at com.y5apps.EgrohCatalogue.parseData(EgrohCatalogue.java:149)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at com.y5apps.EgrohCatalogue$3.onClick(EgrohCatalogue.java:319)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at android.os.Looper.loop(Looper.java:137)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at java.lang.reflect.Method.invokeNative(Native Method)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at java.lang.reflect.Method.invoke(Method.java:511)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-02 17:48:24.340: E/AndroidRuntime(23200):    at dalvik.system.NativeStart.main(Native Method) 
```

错误出现在这一行：

```
final int id_c = ih.getColumnIndex("id"); 
```

我不知道这个例外是什么意思。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:00:24.903

您创建列“id”并要求列“item_id”......不是在您显示的代码中，而是在某处......

它在您的插入中。

# c# - c#的UML图列表

> ID：10863760
> 
> 赞同：0
> 
> 时间：2012-06-02T15:52:06.530
> 
> 标签：c#, uml

我将很快参加 C# 考试。但是我找不到任何足够的图表来研究我的考试。比如我不知道怎么写

> +里程：双{属性}

或者

> +GetBillingType():BillingType {摘要}

是否有任何 C# 的 UML 扩展列表可以显示所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:33:51.237

[像这样](http://msdn.microsoft.com/en-us/library/dd409437.aspx)的东西可能有用。

# drupal - 关于修改模块的建议

> ID：10863761
> 
> 赞同：0
> 
> 时间：2012-06-02T15:52:06.630
> 
> 标签：drupal

我几乎被困在这里。我正在查看这个模块，我正在查看一个又一个文件，但我仍然迷路了。

我是 Drupal 的新手，但不是编程新手。

但与我从事的较小项目相比，这对我来说是一个档次。

我正在查看测验模块，但很难弄清楚如何根据自己的喜好对其进行修改。

关于如何绕开它的任何提示或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:19:16.647

[Module Developer's Guide](http://drupal.org/node/508)应该告诉您期望什么以及在哪里期望它。阅读[hooks](http://drupal.org/node/292)尤其重要。您可能还想[解密 .info 文件](http://drupal.org/node/542202)。

# datatable - YUI 分页器 totalRecords 的设置不起作用

> ID：10863762
> 
> 赞同：0
> 
> 时间：2012-06-02T15:52:08.137
> 
> 标签：datatable, pagination, yui

我对 YUI 分页组件有疑问。我有使用分页的数据表。从服务器返回 10 条记录（例如）和“haseMorePages”元字段。如果此字段为真，那么我将 oPayload.totalRecords 设置为 11（用于激活“下一步”分页器按钮）

```
 dataTable = new YAHOO.widget.DataTable(me.id + "-datatable", columnDefs, dataSource,
    {dynamicData: false,
    initialLoad: true,
    initialRequest: generateRequest(),
    paginator: timelinePaginator});
 timelinePaginator = new YAHOO.widget.Paginator({
                         rowsPerPage: 10,
                         alwaysVisible: true,
                         containers: me.id + "-paginator"
                         });
dataTable.handleDataReturnPayload = function (oRequest, oResponse, oPayload) {
  var resultLength = oResponse.results.length;
  oPayload = oPayload || {};
  oPayload.totalRecords = (oResponse.meta.hasMorePage) ? (resultLength + 1) :       resultLength;
return oPayload;
}; 
```

但它不起作用！我尝试了很多变种，但没有。如果有人知道如何使它工作，请回答。谢谢！

# c - 多个 fork()。main怎么知道pid？

> ID：10863765
> 
> 赞同：0
> 
> 时间：2012-06-02T15:52:44.643
> 
> 标签：c, process, fork, pipe

我正在编写一个创建 #childs 的 C 程序，让他们执行一项任务并将结果报告回主程序。写入管道后，他们必须等待另一个请求。

我在一个方向上使用管道进行通信，但我无法知道数据来自哪里（或者更好的是，来自谁）。

当无法知道哪个孩子在管道上写的时候，有没有办法知道孩子在父母中的PID？

**编辑** 我有一个包含所有 PID 的数组，但是在读取管道时，我无法知道数据来自哪里。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:55:59.157

为每个孩子创建一个管道，然后一次使用`select`或`poll`收听所有孩子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T16:25:15.890

要么像 Zack 所说的那样（每个孩子一个管道），要么改变你的协议，让孩子将其 pid 作为消息的一部分报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T15:56:05.343

fork() 将子进程的pid返回给父进程，将0返回给子进程，您可以将它们存储在数组或链接列表中以跟踪它们

# ios - 如何在加载的早期阶段在 iOS 中使用故事板实例化特定的视图控制器？

> ID：10863766
> 
> 赞同：1
> 
> 时间：2012-06-02T15:52:56.657
> 
> 标签：ios, ios5, uiviewcontroller, storyboard, delay

在 iOS 5 中使用带有情节提要的选项卡时，其中一些在切换到它时可能需要很长时间才能初始化（例如，包含 GLKViewController 的选项卡）。

发生这种情况是因为此控制器中 viewDidLoad 方法的工作量可能非常大。

有没有办法在早期阶段初始化故事板中定义的特定视图控制器（并将其称为 viewDidLoad 方法） - 当应用程序启动时？完成此操作后，应消除延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:05:12.650

您确定这是视图控制器的实例化而不是`viewDidLoad`方法吗？视图控制器可能都是在情节提要解包时创建的，但是视图控制器会尝试尽可能长时间地延迟加载其实际视图对象；在访问子类的属性`viewDidLoad`之前不会调用。`view``UIViewController`

所以解决这个问题的方法可能是手动访问视图属性：

```
__unused CGRect frame = [[tabBarController.viewControllers objectAtIndex:index] view].frame; 
```

如果减速实际上是在实例化中，并且在您切换到该选项卡之前没有创建视图控制器，那么您将不得不通过以编程方式访问它来强制实例化视图控制器，就像在上面的示例中一样.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:11:40.607

调用 vewcontroller 的框架或 .view 属性很可能会起作用，但我不建议您搞乱 viewcontroller 初始化和视图设置

由于以下原因

*   您所做的更改将不是标准的，它们将是稍后会失控的技巧和技巧
*   您所做的更改不会轻易带到您创建的其他项目中

如果我遇到这样的问题，我会例如在应用程序委托中单独创建 GLKViewController 并将其保存在那里，直到在 viewController 中调用 viewDidLoad，然后我会将这个初始化的 GLKViewController 移动到 viewController

# ruby-on-rails - 尽管视图渲染得很好，但控制器方法永远不会被执行

> ID：10863769
> 
> 赞同：1
> 
> 时间：2012-06-02T15:53:19.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, controllers

我的 Rails 路由有一个奇怪的问题。我有一个名为 Page 的控制器和一个名为 Page#dashboard 的方法

当我尝试访问 /dashboard/1 时，页面控制器的仪表板方法永远不会被执行。但令人惊讶的是 /pages/dashboard.html.erb 渲染得很好。

有人可以解释一下为什么吗？

代码详情如下。谢谢

试图访问 -`/dashboard/1`

路由.rb

```
match '/dashboard/:id' => 'page#dashboard' 
```

Page_Controller.rb

```
class PageController < ApplicationController

  before_filter :init

  private

  def init

    puts "init getting executed !!!!!!!!!"  #this gets printed on console

  end

  def dashboard

     puts "dashboard getting executed !!!!!!!!!" #this doesnt get printed on console

  end

end 
```

viewPage - 页面/dashboard.html.erb

日志如下所示 -

```
init getting executed !!!!!!!!!
Started GET "/dashboard/8" for 127.0.0.1 at 2012-06-03 00:04:40 +0800
Processing by PageController#dashboard as HTML
  Parameters: {"id"=>"8"}
  Rendered page/dashboard.html.erb within layouts/page (45.9ms)
Completed 200 OK in 180ms (Views: 133.6ms | ActiveRecord: 3.1ms) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:10:26.557

首先，您不必定义操作方法。如果您只想渲染一个模板，那么只要模板`foo`存在，rails 就会很高兴地允许您路由到 SomeController#foo。

其次，要成为一种行为的方法必须是公开的。您的仪表板方法是私有的，因此它不算作操作并且不会被执行。由于您有一个 dashboard.html.erb 模板，因此 rails 会渲染它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-09T18:46:50.113

如果您正在升级 Rails 应用程序并在控制器中有旧式的“before_filter”调用，则需要将它们更改为“before_action”。'before_filter' 调用将崩溃并绕过控制器，但模板仍将无错误地呈现。

# javascript - 将闪烁的图像从左向右移动 jquery

> ID：10863774
> 
> 赞同：0
> 
> 时间：2012-06-02T15:54:08.793
> 
> 标签：javascript, jquery

我正在做一个项目，我被分配了一项任务，使闪烁图像在网页上从左到右移动。图像应该每秒移动（向上）并闪烁。我知道如何让它闪烁，我的代码如下：

```
function blink(time, interval){
    var timer = window.setInterval(function(){
        $("#img").css("opacity", "0.1");
        window.setTimeout(function(){
            $("#img").css("opacity", "1");
        }, 100);
    }, interval);
    window.setTimeout(function(){clearInterval(timer);}, time);
}
 blink(5000, 1000); 
```

但我不知道如何在第二次移动它的同时闪烁它。

请帮帮我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:17:04.107

尝试这个：

```
function blink() {
    $('div').fadeTo(1000, 0.1, function(){
        $(this).animate({opacity: '1', top: '+=20px'}, 500);
      blink()  
    })
}     
blink() 
```

[http://jsfiddle.net/AJSk3/3/](http://jsfiddle.net/AJSk3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:01:12.990

如何使用 jquery 动画？

```
$("#img").animate({marginLeft:'500px'},1000); 
```

这是一个仅使用动画功能的演示：http:
[//jsfiddle.net/vtZd5/](http://jsfiddle.net/vtZd5/)

# java - hql 从多对一关系表中选择表记录

> ID：10863777
> 
> 赞同：1
> 
> 时间：2012-06-02T15:54:19.527
> 
> 标签：java, hibernate, hql

我有这三张桌子。

```
UserTrackRecord -> id, profile_id(fk), object_profile_id(int)
Profile and -> id
ProfilePersonalInfo-> id, profile_id(fk), firstname, lastname 
```

profile_id 和 object_profile_id 的目的是当有人向我发送友谊请求时，object_profile_id 是我的个人资料 ID，外键是发件人的个人资料 ID。

一个配置文件有许多用户跟踪记录。一个配置文件有一个profilepersonalinfo（还有两个表，就像profilepersonalinfo一样，它们是basicinfo和backgroundinfo，profileid为fk）。

我有自己的个人资料 id(objecct_profile_id) 说 1。现在，我想获取请求发送者的名字、姓氏以及其他两个表中的信息。

我所做的 sql 查询是

```
select utr.profile_profile_id, ppi.dob, ppi.first_name, ppi.last_name, "
                + "pbi.religion, pbi.city_birth, pbi.country_birth from "
                + "user_track_record utr "
                + "inner join profile_personnel_info ppi on ppi.profile_profile_id=utr.profile_profile_id "
                + "inner join profile_background_info pbi on pbi.profile_profile_id=utr.profile_profile_id "
                + "where utr.object_profile_id=1 
```

这工作正常。

在 hql 中，当我最多简化查询时，它变成了

```
Select * from UserTrackRecord utr inner join ProfilePersonalInfo ppi 
```

但是 id 没有用，它给了我外部或完全连接必须后跟路径表达式查询异常。

我之前发布了同样的问题，但有人反对它:(所以我做了更多的研发，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:52:31.500

我明白为什么这之前被否决了。在发布问题之前，请仔细阅读休眠文档。

如上所述，hibernate 与实体一起使用，当您在 hibernate 中加入表时，您需要提及别名。

```
Select utr from UserTrackRecord utr inner join utr.profilePersonalInfo ppi and so on...... 
```

由于您没有提供实体，我假设 UserTrackRecord 有一个名为 profilePersonalInfo 的属性，该属性的类型为 ProfilePersonalInfo。如果没有，请通过 Hibernate 关联。

# ruby-on-rails-3 - Haml Bootstrap 搜索表单

> ID：10863783
> 
> 赞同：2
> 
> 时间：2012-06-02T15:55:01.743
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, haml

我的导航栏代码如下所示：

```
%header.navbar.navbar-fixed-top
  %div.navbar-inner
    %div.container
      %nav
        %ul.nav.pull-right
          - if user_signed_in?
            %li= link_to "Sign out", '#'
          - else
            %li= link_to "Sign in", '#' 
```

我试图让我的导航栏在 Bootstrap 导航栏页面中看起来像[这里](http://twitter.github.com/bootstrap/components.html#navbar)显示的那样，但是我不知道如何翻译

```
<form class="navbar-search pull-left">
  <input type="text" class="search-query" placeholder="Search">
</form> 
```

进入哈姆尔。我的最后一次尝试看起来像：

```
%header.navbar.navbar-fixed-top
  %div.navbar-inner
    %div.container
      %nav
        %ul.nav.pull-right
         %form.navbar-search
           %input.search-query
             - { :type => "text", :placeholder => "Search" }
         - if user_signed_in?
            %li= link_to "Sign out", '#'
          - else
            %li= link_to "Sign in", '#' 
```

虽然搜索栏出现了正确的 CSS 类，但当我检查它时，我的 html 中不存在`:type => "text"`和部分。`:placeholder => "Search"`我怎样才能解决这个问题？谢谢！

== 编辑 ==

也许为了让这一点更清楚 - 我在 rails 3 应用程序中使用它，我意识到我可能应该使用`form_tag`，但我不确定如何继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T17:58:26.907

它应该像这样工作：

```
%header.navbar.navbar-fixed-top
  %nav.navbar-inner
    .container
      %ul.nav
        - if user_signed_in?
          %li= link_to "Sign out", '#'
        - else
          %li= link_to "Sign in", '#'
      = form_tag some_path, :class => "navbar-search pull-left", :method => :get do
        = text_field_tag :name, nil, :class => "search-query span3", :placeholder => "Search" 
```

小心压痕。

I also advise you to try to start with rails app template and tutorial: [http://railsapps.github.com/](http://railsapps.github.com/). As for a beginner it would be an excellent example of what and how to set up and how it should look like.

# oop - 在 lisp 中为类定义自定义 setf

> ID：10863784
> 
> 赞同：3
> 
> 时间：2012-06-02T15:55:05.907
> 
> 标签：oop, common-lisp

假设我有一个名为 board 的类：

```
(defclass board ()
 ((blocker    :accessor blocker    :initarg :blocker    :initform  0)) 
```

根据这[本书](https://rads.stackoverflow.com/amzn/click/com/0201175894)，我可以通过以下方式为拦截器定义一个自定义 setf：

```
(defmethod (setf blocker) (new-blocker (b board))
  (setf (slot-value b 'blocker) new-blocker)) 
```

然而，steel bank common lisp 会说函数未定义，即使我已经评估过了。有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:33:20.150

这看起来是正确的。请注意，您正在重新定义您通过指定创建的现有 setf 方法`:accessor blocker`。SBCL 会给你一个`style-warning`关于那个的。

你的错误在别的地方。也许你在不同的包裹里？尝试显示您在 IDE 中编译和加载这些表单并尝试运行该方法调用的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:28:39.657

在定义任何方法之前，您必须声明一个泛型函数。

```
(defgeneric (setf blocker) (new-blocker board)) 
```

有关示例，请参阅Practical Common Lisp 中的[这一章。](http://www.gigamonkeys.com/book/object-reorientation-classes.html)

# android - 如何拥有一个 ListView 的多个页面？

> ID：10863786
> 
> 赞同：1
> 
> 时间：2012-06-02T15:55:13.863
> 
> 标签：android, android-listview

我目前在我的 android 应用程序中有一个长 ListView，我想将那个 ListView 分成多个页面，这样当用户选择下一个按钮时，它将位于操作栏中，它会转到下一组 ListView 项目。

我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:16:09.637

您可以编写自己的 ListAdapter/ArrayAdapter 并让它只加载您想要的项目。arrayadapter 很好用，也很容易使用。

[ArrayAdapter 示例](http://anujarosha.wordpress.com/2011/11/17/how-to-create-a-listview-using-arrayadapter-in-android/)， [这是另一个示例](http://www.ezzylearning.com/tutorial.aspx?tid=1659127&q=binding-android-listview-with-string-array-using-arrayadapter)

# c# - DateTime AddYears() 数组未按预期工作

> ID：10863795
> 
> 赞同：0
> 
> 时间：2012-06-02T15:56:34.863
> 
> 标签：c#, arrays, datetime

我对日期有疑问。我无法使该`.AddYears()`方法起作用。有人可以看看我在这里做错了什么。

```
MySqlConnection myMySqlConnection = new MySqlConnection(connectionString);
MySqlDataAdapter da = new MySqlDataAdapter();
MySqlCommand cmd1;
cmd1 = new MySqlCommand("SELECT INITIAL_DATE FROM USERS WHERE ID = @id1", myMySqlConnection);
cmd1.Parameters.AddWithValue("@id1", id);
myMySqlConnection.Open();
da.SelectCommand = cmd1;
DateTime initial_date = (DateTime)cmd1.ExecuteScalar();
myMySqlConnection.Close(); 
```

从这一点及以下是问题：

```
DateTime[] dates = new DateTime[20];
dates[0] = Convert.ToDateTime(initial_date);

for (int i = 1; i < 20; i++)
{
     dates[i] = initial_date.AddYears(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:03:20.153

正如 Mark M 指出的那样，您的问题可能在于通过for 循环中的方法添加`1`，而不是。`i``AddYears`

这是 LINQ 中更正后的代码：

```
DateTime[] dates = Enumerable.Range(0, 20).Select(initial_date.AddYears).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:08:31.033

1.  `initial_date.AddYears(1);`重复地将 1 添加到相同的值，因此在初始值之后的所有 DateTimes 都具有相同的值。DateTime 是不可变的，因此对其方法的调用不会更改其值，而是返回具有所需值的新实例。您需要将其更改为`initial_date.AddYears(i);`
2.  如果您希望年份范围为 2012 - 2032，您实际上需要 21 个值，而不是 20 - 因此您需要相应地调整数组长度和 for 循环条件

将您的问题代码更改为：

```
DateTime[] dates = new DateTime[21];
dates[0] = Convert.ToDateTime(initial_date);

for (int i = 1; i <= 20; i++)
{
     dates[i] = initial_date.AddYears(i);
} 
```

它会给你你需要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:03:00.413

我会稍微简化代码，正如 Mark M 在他的评论中所说，将`1`in替换`AddYears`为`i`

```
DateTime[] dates = new DateTime[20];
for (int i = 0; i < 20; i++) {
    dates[i] = initial_date.AddYears(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:05:57.550

如果您的意图是设置一个具有不同年份的数组，那么您将希望`AddYears(i)`而不是仅添加 1 年

```
DateTime initial_date = DateTime.Now;
DateTime[] dates = new DateTime[20];
dates[0] = Convert.ToDateTime(initial_date);

for (int i = 1; i < 20; i++)
{
    dates[i] = initial_date.AddYears(i);
    Console.WriteLine(dates[i]);
} 
```

那将打印出：

2013 年 6 月 2 日下午 12:01:48

2014 年 6 月 2 日下午 12:01:48

2015 年 6 月 2 日下午 12:01:48

2016 年 6 月 2 日下午 12:01:48

2017 年 6 月 2 日下午 12:01:48

2018 年 6 月 2 日下午 12:01:48

2019 年 6 月 2 日下午 12:01:48

2020 年 6 月 2 日下午 12:01:48

2021 年 6 月 2 日下午 12:01:48

2022 年 6 月 2 日下午 12:01:48

2023 年 6 月 2 日下午 12:01:48

2024 年 6 月 2 日下午 12:01:48

2025 年 6 月 2 日下午 12:01:48

2026 年 6 月 2 日下午 12:01:48

2027 年 6 月 2 日下午 12:01:48

2028 年 6 月 2 日下午 12:01:48

2029 年 6 月 2 日下午 12:01:48

2030 年 6 月 2 日下午 12:01:48

2031 年 6 月 2 日下午 12:01:48

# c# - 单击按钮后访问数据列表中的单元格？

> ID：10863796
> 
> 赞同：-1
> 
> 时间：2012-06-02T15:56:35.827
> 
> 标签：c#, asp.net

单击按钮和传输到变量后如何访问数据列表中的单元格...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:41:48.417

```
 <ItemTemplate>
    <asp:Label ID="ProductNameLabel" runat="server" Text='<%# Eval("Name") %>' /><br />        

     <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl='<%# Eval("ImageURL","~/Images/{0}") %>'  />

        <asp:Label ID="PriceLabel" runat="server" Text='<%# Eval("Price", "{0:C}") %>'></asp:Label><br />

        <asp:Button ID="buyNowBtn" runat="server" Text="buy Now" OnClick="buyNowBtn_Click" />                     
    </ItemTemplate>

    </asp:DataList> 
```

下面我还有 2 个 Label 控件将显示 ProductName 和 Price

```
 <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    <br />
    <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label> 
```

```
protected void BuyNowButton_Click(object sender, EventArgs e)
        {
                Button BuyNowButton = (Button)sender;
                DataListItem item = (DataListItem)BuyNowButton.NamingContainer;
                标签 NameLabel = (Label)item.FindControl("NameLabel");
                标签 ValueLabel = (Label)item.FindControl("ValueLabel");
                ResultsLabel.Text += String.Format("点击：{0} - {1} 
", NameLabel.Text, ValueLabel.Text);
        }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:40:22.900

上面的代码看起来很简洁，但是当您单击位于 DataGrid 内的任何控件时，第一个触发的事件将是 `protected void DataListName_ItemCommand(object source, DataListCommandEventArgs e)`，因此将代码放入事件中会很精确。

然后你可以用同样的方法找到物品

```
ImageButton img = (ImageButton)e.Item.FindControl("ImageButton1");
img.(property that you wanna access) 
```

# java - 小程序中的 Jena + Pellet + Slick

> ID：10863798
> 
> 赞同：0
> 
> 时间：2012-06-02T15:57:14.303
> 
> 标签：java, applet, jena, pellet

我正在尝试将 Jena 库、Pellet 和一些 RPG 2d 库 Slick 集成到一个小程序中。所以基本上当我在浏览器中运行小程序时，我得到这个文件权限错误（我使用的罐子都是签名的）：

```
 Exception in thread "Thread-15" java.lang.ExceptionInInitializerError
    at org.mindswap.pellet.ABox.<init>(ABox.java:208)
    at org.mindswap.pellet.KnowledgeBase.clear(KnowledgeBase.java:540)
    at org.mindswap.pellet.KnowledgeBase.<init>(KnowledgeBase.java:418)
    at org.mindswap.pellet.jena.PelletInfGraph.<init>(PelletInfGraph.java:99)
    at org.mindswap.pellet.jena.PelletReasoner.bind(PelletReasoner.java:95)
    at org.mindswap.pellet.jena.PelletReasoner.bind(PelletReasoner.java:53)
    at com.hp.hpl.jena.ontology.impl.OntModelImpl.generateGraph(OntModelImpl.java:2744)
    at com.hp.hpl.jena.ontology.impl.OntModelImpl.<init>(OntModelImpl.java:139)
    at com.hp.hpl.jena.ontology.impl.OntModelImpl.<init>(OntModelImpl.java:128)
    at com.hp.hpl.jena.rdf.model.ModelFactory.createOntologyModel(ModelFactory.java:410)
    at RPGGame.GameSelectionScreen.init(GameSelectionScreen.java:170)
    at RPGGame.RPGGame.initStatesList(RPGGame.java:39)
    at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)
    at org.newdawn.slick.AppletGameContainer$Container.initApplet(AppletGameContainer.java:272)
    at org.newdawn.slick.AppletGameContainer$ContainerPanel.initGL(AppletGameContainer.java:229)
    at org.newdawn.slick.AppletGameContainer$ContainerPanel.start(AppletGameContainer.java:216)
    at org.newdawn.slick.AppletGameContainer$1.run(AppletGameContainer.java:92)
    Caused by: java.security.AccessControlException: access denied      ("java.util.PropertyPermission"     "pellet.configuration" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at org.mindswap.pellet.PelletOptions.<clinit>(PelletOptions.java:805) 
```

提前致谢， 约阿娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:03:09.197

该错误是因为 ABox 试图从 PelletOptions 中读取信息，这需要加载 Pellet 配置。它通常会尝试从 jar 中读取它，但首先，它会仔细检查用户在系统属性中指定的位置是否与默认位置不同。正是这个检查导致了错误。

您可以修改 PelletOptions 以始终检查 jar 并避免系统属性检查，或者您可以调整小程序安全性内容以使其正常（我不知道这是否可能，以前从未使用过小程序）。

# java - 如何使用 Windows Builder Pro 创建数据库绑定？

> ID：10863799
> 
> 赞同：0
> 
> 时间：2012-06-02T15:57:16.943
> 
> 标签：java, mysql, swing

第一次，我正在创建一个 Java Swing 应用程序。

我在 Eclipse 中使用 Windows Builder Pro，以及一个 MySQL 数据库（已经设置好了）。

假设我有一个组合框，我希望（例如）出现“特定”表中的所有“名称”字段。

如何设置该绑定？我知道如何以编程方式处理连接和查询代码，我想知道的是如何在 Eclipse 中进行绑定。

关键是要避免手动填充组合框（或其他任何东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:41:40.890

此[示例](https://stackoverflow.com/a/2531942/230513)使用由 NetBeans/TopLink 生成的 JPA 实体和控制器，但应该可以使用 Eclipse/EclipseLlink 生成类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:12:31.233

这是一个涉及面很广的问题。简短的回答将是快速和肮脏的，不优雅并且违反软件工程中的所有模式：使用[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)获取*名称*字段

```
Statement stmt = null;
String query = "SELECT name FROM tableXX";

stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(query);
while (rs.next())
{
   String name = rs.getString("name");
   //Fill your combo box
} 
```

更好的答案将涵盖

*   [模型-视图-控制器](http://www.oracle.com/technetwork/articles/javase/index-142890.html)(MVC)
*   [Java 持久性 API](http://www.oracle.com/technetwork/articles/javaee/jpa-137156.html) (JPA)

但不幸的是过于宽泛，不适合stackoverflow的QA结构。但是通过链接和关键字，您会发现很多优秀的文章。

# random - 组合随机生成器的不同实例，但仍保持低差异

> ID：10863813
> 
> 赞同：0
> 
> 时间：2012-06-02T15:58:41.400
> 
> 标签：random, generator, prng

我正在生成大约 1 亿个随机数来从 300 件事情中挑选。我需要设置它，以便我有 1000 万个独立实例（不同的种子），每个实例选择 10 次。目标是使汇总结果具有非常低的差异，例如，每个项目被选中的次数大致相同。

问题在于常规 prng，某些数字比其他数字更容易选择。（尝试了lcg和mersenne twister）最多和最少的差异可能是几千到一万）使用线性一致性生成器和mersenne twister，我也尝试用1个实例选择1亿次，也没有产生统一的结果。我猜这是因为周期很长，可能一亿还不够大。从理论上讲，如果我选择足够多的数字，结果应该会达到一致。（应按预期值结算）

我改用了准随机生成器 Sobol，并通过 1 实例测试中的 1 亿得到了更好的结果。（最多选择和最少选择之间的差异约为 5）但是将它们分成 1000 万个实例，每个实例 10 次，失去了一致性，我得到了与 prng 相似的结果。Sobol 似乎对序列非常敏感——随机向前跳过会降低一致性。

是否有一类随机生成器即使在组合 1000 万个独立实例时也能保持类随机的低差异？还是理论上不可能？我现在能想到的一种解决方案是使用 1 个 Sobol 生成器，它在 1000 万个实例之间共享，因此它实际上与 1 个实例测试中的 1 亿个相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:05:05.953

Sobol 的改组和正确使用都应该为您提供所需的一致性。洗牌需要在聚合级别进行（从具有所需聚合频率的全局 100M 样本开始，然后对其进行洗牌以引入随机性，最后拆分为 10 个值实例；正如您所指出的，在每个实例中进行洗牌不会有帮助） .

但这是一种额外的统一性，你可能并不真正需要它：随机性可能就足够了。首先，我会检查检查本身，因为如果有足够的样本，你真的会得到显着的偏差，这听起来很奇怪（检查“卡方检验”来限定这种显着性，或者等效地有多少是“足够”的样本）。因此，对于第一次安全检查：如果您要选择独立值，则以不同的方式简化为 1000 万个实例，从 2 个类别中选择 10 个：您是否得到近似二项分布？对于独家采摘，它是不同的分布（超几何 iirc，但需要检查）。然后推广到更多类别（多项分布），然后才可以安全地继续处理您的问题。

# mysql - 在 mysql Id 列中设置默认值？

> ID：10863816
> 
> 赞同：0
> 
> 时间：2012-06-02T15:59:10.910
> 
> 标签：mysql

我想以 todaysdate+000001 开始我的 mysql 表 ID，例如 20120602000001 或 20120602/000001，并且当输入下一个条目时，ID 应该是 20120602000002 或 20120602/000002（意味着它也应该得到 auto_incremented）。我们应该怎么做？

我的表结构是

```
table abc(id int auto_increment,name varchar(50),company varchar(50),contact varchar(10),persontomeet varchar(30),intime TIMESTAMP CURRENT_TIMESTAMP,primary key(id)); 
```

但 id 显然以 1 开头.. 我想将它作为 20120602000001 开始，当下次 INSERT 触发器触发时，它应该设置为 20120602000002 请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:01:32.587

利用：

```
ALTER TABLE tableName AUTO_INCREMENT = 20120602000001 
```

# c# - 从错误的玩家发射的弹丸

> ID：10863817
> 
> 赞同：1
> 
> 时间：2012-06-02T15:59:21.147
> 
> 标签：c#, networking, xna

我正在为我的朋友开发一款小游戏。到目前为止，我已经获得了正确的网络，两个玩家都可以飞来飞去，而且一切都是同步的。

现在我添加了像这样生成的射弹（激光）：

```
if (_mou.LeftButton == ButtonState.Pressed 
         && oldState.LeftButton 
         != ButtonState.Released)               
         {
             if (timeSinceShot > timePerShot)
            {
                timeSinceShot = 0;
                bulletRotation = rotation; //Rotation of the players ship
                laser.addLaser(myID, bulletRotation, localPosition);
            }
         } 
```

这很好用，它从我的船上发射激光，但还没有显示出来。

现在当我开火时，我称之为：

```
om.Write(bulletRotation); //Sends the rotation to the server 
```

当服务器收到它时，它会将它发送回所有玩家，包括射击的玩家。

以下是我在客户端接收数据并将其写入激光器列表的方式：

```
if (who != myID)
{
   try
   {
      float laserR = msg.ReadFloat();
      laser.addLaser(who, laserR, player.players[i].position);
   }
   catch { }
} 
```

现在，当我在 2 个客户端上对其进行测试并开火时，我可以看到自己在第二个客户端上开火，这很好。然而，它不仅会在第二个客户端上触发，还会在我的客户端的第二个播放器上触发。

编辑：谁是 RemoteUniqueIdentifier，myID 是客户 RemoteUniqueIdentifier

这是我的问题的图片。 [http://i.stack.imgur.com/CYJyW.png](http://i.stack.imgur.com/CYJyW.png) （还不能上传，因为我没有 10 个代表。）

编辑2：

这是服务器将其数据发送给所有玩家的方式：

```
foreach (NetConnection player in server.Connections)
                    {
                        // ... send information about every other player (actually including self)
                        foreach (NetConnection otherPlayer in server.Connections)
                        {
                            // send position update about 'otherPlayer' to 'player'
                            NetOutgoingMessage om = server.CreateMessage();

                            // write who this position is for
                            om.Write(player.RemoteUniqueIdentifier);
                            om.Write(otherPlayer.RemoteUniqueIdentifier);

                            if (otherPlayer.Tag == null)
                                otherPlayer.Tag = new float[4];

                            float[] pos = otherPlayer.Tag as float[];

                            om.Write(pos[0]); // velocity X
                            om.Write(pos[1]); // velocity X
                            om.Write(pos[2]); // rotation

                            if (!noLasers)
                            {
                                om.Write(pos[3]); // bullet rotation
                            }

                            // send message
                            server.SendMessage(om, player, NetDeliveryMethod.Unreliable);
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:17:45.400

如果`RemoteUniqueIdentifier`是某个类的对象，而您试图天真地通过网络传递它，您将永远无法测试本地版本和从服务器获得的版本是否相等。

“另一边”的重建对象将始终具有无法与原始对象进行比较的引用。

在这种情况下，您可能可以选择切换`RemoteUniqueIdentifier`到某些不可变类型，例如`int`or `Guid`，甚至`string`可以工作。

# html - 从孩子改变父母？

> ID：10863819
> 
> 赞同：2
> 
> 时间：2012-06-02T15:59:31.837
> 
> 标签：html, css

在 CSS 中，您可以这样做：

`nav:hover a {`

但是有没有办法改变`nav`什么时候`a`悬停？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:01:19.273

使用 javascript 事件`onHover`

在 jquery 中，它是这样的：

```
$("a").hover(function () {
    $('#nav').css("color","red");
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:25:46.707

### 即将到来，到 CSS

选择器中的显式主题*将出现*在 CSS 中，但我们将不得不等待更长的时间。很快您将能够显式声明哪个元素是主题，例如使用您的代码：

```
$nav a:hover {
    background: red;
} 
```

这将更改导航的背景以在其任何锚后代悬停时读取。

资料来源：Selectors Level 4 »[确定选择器的主题](http://www.w3.org/TR/2011/WD-selectors4-20110929/#subject)

在实现这一点之前，您必须使用 JavaScript（或使用它构建的工具之一，例如 jQuery、Mootools 等）来完成这样的任务。

### 用 jQuery 来做

您可以使用 jQuery 完成此操作，方法是在任何嵌套锚点悬停或退出的元素时添加和删除一个类：

```
$("nav").on("mouseenter mouseleave", "a", function(e){
    $(e.delegateTarget).toggleClass("hovered", e.type === "mouseenter" );
});​ 
```

演示：http: [//jsfiddle.net/jonathansampson/EPRRy/1/](http://jsfiddle.net/jonathansampson/EPRRy/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:08:13.077

这是最兼容的方式

```
 $("a").hover(function () { 
    $(this).parent().css({color:"red"}); 
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:11:03.220

不，没有办法使用 CSS 提升元素。要明确执行您所描述的操作，需要一些 JS。

@ssx 很接近，但不完全是，用 JS 做你所要求的（我将简化并使用 jQuery）。

```
$("nav a:hover").hover(function() {
  $(this).parent().css({'color': 'red'});
}), function() {
  $(this).parent().css({'color': 'black'})
}); 
```

这会更改要读取的颜色，然后在悬停失去焦点时返回黑色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T16:46:43.983

CSS 2 中没有解决方案（不知道 CSS 3）。

Javascript 解决方案很简单，并由其他成员回答。

你可以试试LESS。使用 LESS 你可以在 DOM 上做一些条件样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T17:46:25.300

它很快就会在 CSS 4 中引入。这是我今天看到的第 5 或第 6 个问题。我认为它应该很快由浏览器供应商实施。

# javascript - 引导下拉菜单在单击时关闭

> ID：10863821
> 
> 赞同：76
> 
> 时间：2012-06-02T15:59:54.097
> 
> 标签：javascript, html, drop-down-menu, twitter-bootstrap

我在引导下拉列表中放置了一个表单，但是当我单击表单中的任何字段时，下拉列表消失了。我有这段代码，但我不知道把它放在哪里以防止下拉菜单消失。

```
$(function test() {
  // Setup drop down menu
  $('.dropdown-toggle').dropdown();

  // Fix input element click problem
  $('.dropdown input, .dropdown label').click(function(e) {
    e.stopPropagation();
  });
}); 
```

有人可以告诉我我应该把这个放在哪里吗？我在引导下拉菜单中尝试过，我在 HTML 中尝试过，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-06-02T16:59:17.527

您可以一起省略下拉调用，引导下拉菜单在没有它的情况下工作。确保正确包装脚本，可以将其包含在页面的标题或正文中，尽管我个人更喜欢将其放在页面的正文中。

**JS**

```
<script type="text/javascript">
    $('.dropdown-menu input, .dropdown-menu label').click(function(e) {
        e.stopPropagation();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-12-29T20:57:51.760

如果你想停止只关闭一些下拉菜单，而不是全部，那么只需在你的 ul 块中添加一个额外的类：

```
<ul class="dropdown-menu keep-open-on-click"> 
```

并使用此代码：

```
$(document).on('click', '.dropdown-menu', function(e) {
    if ($(this).hasClass('keep-open-on-click')) { e.stopPropagation(); }
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-18T08:18:24.343

自答案被接受以来已经过去了一段时间，但如果你想保持下拉菜单打开，如果它像一种对话框一样，我认为最好的方法是：

```
$('.dropdown').dropdown().on("hide.bs.dropdown", function(e) {
            if ($.contains(dropdown, e.target)) {
                e.preventDefault();
            //or return false;
            }
        }); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-24T11:02:10.990

您需要阻止事件冒泡 DOM 树：

```
$('.dropdown-menu').click(function(e) {
    e.stopPropagation();
}); 
```

event.stopPropagation 防止事件到达最终由 Bootstrap 隐藏菜单处理的节点。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-02T21:48:22.130

这适用于我的（侧边栏打开一个带有引导切换的简单链接）

```
$('.dropdown').find("a").not('.dropdown-toggle').on("click",function(e){
    e.stopImmediatePropagation();
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-12-12T08:07:16.697

放

```
<script type="text/javascript">
    $('.dropdown-menu').click(function(e) {
          e.stopPropagation();
    });
</script> 
```

在原始答案上，删除所有类，然后放入“.dropdown-menu”类，它对我有用。我在下拉菜单中有一个输入字段。

![菜单截图](../Images/789196543c418bacc403f1cfa3c21534.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-25T16:12:38.330

感谢您的上述回答，我在下拉菜单下的子菜单中遇到了同样的问题。使用上述解决方案，我也能够解决这个问题。

```
$('.dropdown-menu .dropdown-submenu a[data-toggle="dropdown-submenu"]').click(function (e)
{                   
    e.stopPropagation();
}); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-04-02T15:35:50.913

只需使用此示例。此解决方案对我有用。

```
<script type="text/javascript">
window.addEvent('domready',function() {    
   Element.prototype.hide = function() {
      $(function () { 
        // replace your tab id with myTab
        //<ul id="myTab" class="nav nav-tabs">
        $('#myTab li:eq(1) a').tab('show');
      });      
   };
});
</script> 
```

希望它会有所帮助。谢谢。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-02-03T03:30:12.503

如果您查看下拉小部件来源的底部，您将看到：

```
$(document)
  .on('click.bs.dropdown.data-api', '.dropdown form', function(e) {
    e.stopPropagation()
  }) 
```

所以你有以下选择：

> 1.  **只需用表单**包裹你的下拉菜单
> ***   *或者您可以为.dropdown YOUR_SELECTOR*的点击事件添加事件监听器**

 ***```
$(document)
  .on('click.my', '.dropdown some_selector', function(e) {
    e.stopPropagation()
  }) 
```***

# actionscript-3 - Actionscript 3：类内的 hitTestObject

> ID：10863822
> 
> 赞同：0
> 
> 时间：2012-06-02T15:59:58.857
> 
> 标签：actionscript-3, flash, class, hittest

当我单击汽车 (MouseEvent.MOUSE_DOWN) 时，汽车消失并执行功能 verlaagLevens()。这有效（但我在其中发表了评论）

现在，我想检测我的 Ship 和同一辆车之间的 hitTestObject 而不是 clickevent，但它似乎不起作用。这是我的汽车级：

```
package {
import flash.display.*;
import flash.events.*;

public class Car extends MovieClip
{
    //private var hit:uint = 0;
    private var mySpeed:uint = 0;
    private var target:Ship;
    private var stageRef:Stage;
    public static var instance2:Car;

    public function Car(stageRef:Stage, target:Ship) {
        instance2 = this;
        this.x = x;
        this.stageRef = stageRef;
        this.target = target;
        mySpeed = 10;
        addEventListener(Event.ENTER_FRAME, beweeg);
        reset();

    }
    public function reset() {
        if(Main.end_def == 0){
        this.y =0-100/Math.random();
        this.x = Math.random()*(1+300-60)+60;
        }
        //hit = 0;

    }
    public function getroffen() {

        Main.instance.verlaagLevens();
        this.parent.removeChild(this);

    }

    public function beweeg(evt:Event):void {
        if (hitTestObject(target.hit))
        {
            trace("hitTest");
            getroffen();
            reset();
        }
        this.y += mySpeed;
        if (this.y>480) {
            reset();
        }

    }

} 
```

}

这是我的主要课程：

```
package {

    import flash.display.*;
    import flash.display.Stage;
    import flash.events.*;
    import flash.utils.*;

    public class Main extends MovieClip
    {

        private var aantaltegenliggers:uint = 5;
        private var _levens:uint = 3;
        var ourShip:Ship = new Ship(stage);
        public static var instance:Main;
        var car:MovieClip;
        var end = 0;
        public static var end_def:uint;

        public function Main()
        {
            stop();
            instance = this;
        }

        public function initGame():void
        {
            //add it to the display list
            stage.addChild(ourShip);
            ourShip.x = stage.stageWidth / 2;
            ourShip.y = stage.stageHeight / 1.3;

            _levens=3;
            end_def=0;
            teken_levens();

            for (var i:uint=0; i<aantaltegenliggers; i++) 
                {
                    var myTimer:Timer = new Timer(5000, 1);
                    myTimer.start();
                    myTimer.addEventListener(TimerEvent.TIMER_COMPLETE, function(e:TimerEvent){

                    if (end==0){
                    car = new Car(stage, ourShip);
                    car.name = "car"+i;
                    //car.addEventListener(Event.ENTER_FRAME,getroffen);
                    car.addEventListener(Event.ENTER_FRAME,gameover);
                    stage.addChild(car);

                    }
                    });

            }

        }
            public function verlaagLevens():void 
            {
                verwijder_een_leven(_levens);
                _levens--;
            }
            // één leven tekenen
            public function teken_een_leven(levenIndex:uint):void 
            {
                var leven:MovieClip = new Leven(); // linkage - export voor Actionscript
                leven.x = levenIndex*35; // positie leven in de x as, 35 pixels opschuiven
                leven.y = 10; // positie leven in de y as
                leven.name = "leven"+levenIndex;
                addChild(leven);    // één leven tonen op het scherm
            }
            // alle levens tekenen
            public function teken_levens():void 
            {
                verwijder_levens(); // verwijder één leven als je de missile niet hebt kunnen raken
                for (var i:uint=1; i<=_levens; i++) 
                {
                    teken_een_leven(i);
                }
            }
            // een leven van het scherm verwijderen
            public function verwijder_een_leven(levenIndex:uint):void 
            {
                if (!(getChildByName("leven"+levenIndex)==null) ) 
                {  // ! is negatie = logische operator
                    removeChild(getChildByName("leven"+levenIndex));
                }
            }
            // alle levens verwijderen
            public function verwijder_levens():void 
            {
                for (var i:uint=1; i<=_levens; i++) 
                {
                    verwijder_een_leven(i);
                }
            }

            public function gameover(evt:Event):void 
            {
                if(_levens==0)
                {   
                    if(end_def == 0){
                    end = 1;
                    stage.removeChild(ourShip);
                    gotoAndStop("gameover");
                    }
                    end_def=1;
                }
            }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:47:32.000

您正在 Car 的构造函数中执行命中测试，该构造函数只调用一次。您可能想要的（因为汽车移动）是在您的开始功能中检查每一帧是否发生碰撞。（这也是假设 target.hit 是正确的，我无法确定，因为我无法访问您的船，但我会给您带来疑问）。

# android - 模拟器键盘应用程序上的 ANR

> ID：10863829
> 
> 赞同：0
> 
> 时间：2012-06-02T16:01:24.283
> 
> 标签：android, android-emulator, android-anr-dialog

我有一个应用程序，我正在尝试在模拟器上对其进行测试，但大多数时候我得到了 ANR。但是，它不在我的应用程序上，而是在键盘应用程序上。我可能做错了什么导致这种情况，还是模拟器的问题不影响实际设备，我可以忽略它？谢谢。

# silverstripe - 如何使用 Silverstripe 3 beta UploadField

> ID：10863831
> 
> 赞同：1
> 
> 时间：2012-06-02T16:01:27.173
> 
> 标签：silverstripe

我正在尝试在前端使用 UploadField 供用户上传他们的公司徽标。

UploadField 上还没有太多文档。我已经尝试过了，但到目前为止还没有运气。

谁能指导我如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:51:05.317

这有点旧，但如果其他人像我一样偶然发现这个。

UploadField 确实在前端工作。我无法使用 saveInto 函数保存到 many_many 关系中。但我错过的最大的事情是 DataObject/Page 需要首先存在，因为它需要先保存，然后才能附加相关对象（如图像）。

```
static $has_one = array(
    "Photo" => "Image"
);

$fields = new FieldList(
    new UploadField( 'Photo', 'Upload' )
);

function saveForm( $data, $form ) {
    $object = new DataObject();
    // for a new object write before saveinto
    $object->write();
    $form->saveInto($object);
    $object->write();
    Director::redirectBack();
} 
```

使用 ss 3.0.1

或者，您可以手动循环参数并将它们附加到对象上，而不是使用 saveinto 函数，以获取 many_many 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:23:05.940

上传字段通过对象中的 can*() 方法检查权限。

为了允许前端编辑 - 您可能必须在您的自定义对象中重载 File::canEdit（或 Image::canEdit）来处理这个问题。

# python - 当前命名空间中的 Python 字符串格式

> ID：10863837
> 
> 赞同：1
> 
> 时间：2012-06-02T16:02:02.760
> 
> 标签：python

我发现自己写了很多这样的东西：

```
s = "{v1}_{v2}_{v3}_{v4}_{v5}".format(v1="foo", v2=v2, v3=v3, v4=v4, v5=v5) 
```

是否可以让 Python`string.format`使用当前命名空间中的变量？然后可以将上述调用简化为：

```
s = "{v1}_{v2}_{v3}_{v4}_{v5}".format(v1="foo") 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-02T16:04:10.600

你想过这样的事情吗？

```
>>> v1 = "foo"
>>> v2,v3,v4,v5 = 1,2,3,4
>>> s = "{v1}_{v2}_{v3}_{v4}_{v5}".format(v1="foo", v2=v2, v3=v3, v4=v4, v5=v5)
>>> s
'foo_1_2_3_4'
>>> s = "{v1}_{v2}_{v3}_{v4}_{v5}".format(**locals())
>>> s
'foo_1_2_3_4' 
```

不过，为了记录，我会避免这样做。如果变量是同一种东西，那么它们应该在某种结构中在一起，不使用 . 就可以从中获得值`locals()`。即使他们不是，我想我更愿意手动将它们拉到一个单独的字典中，然后在使用`locals()`这种方式之前使用它。

[ *Ed：你真是个伪君子。您一直使用这种方式来生成用于模拟的参数文件套件`string.Template`。`locals()`不要假装你没有。*

我：是的，但我不想鼓励其他人学习我的坏习惯。

*Ed：至少你应该承认你发现它很有用，如果你要假装是比你更明确的编码器。*

我： ...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T18:14:05.267

[Python 3.6](https://docs.python.org/3/whatsnew/3.6.html#whatsnew36-pep498)中有一个新特性直接赋予了这种能力：

```
>>> name = "Fred"
>>> f"He said his name is {name}."
'He said his name is Fred.' 
```

# python - 如何将gettext .mo文件转换为.po文件

> ID：10863840
> 
> 赞同：32
> 
> 时间：2012-06-02T16:02:20.947
> 
> 标签：python, translation, gettext

当 .po 文件不再可用时，有什么方法可以将 .mo 文件转换为 .po 文件源？我需要编辑 .mo 文件的内容，但我没有 .po 文件。可能吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-10T14:59:39.027

```
msgunfmt [path_to_file.mo] > [path_to_file.po] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-03T15:42:29.387

在 Windows 下并安装了最新的[Poedit](https://poedit.net) 2.2.4：

`"C:\Program Files (x86)\Poedit\GettextTools\bin\msgunfmt.exe" file.mo -o file.po`

要重新创建 .mo 文件：

`"C:\Program Files (x86)\Poedit\GettextTools\bin\msgfmt.exe" file_edited.po -o file_new.mo`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-02T16:09:46.727

[您可以通过使用polib](http://pypi.python.org/pypi/polib)反编译 .mo 文件来解决此问题 。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-11T13:50:49.317

使用已安装[的 poedit](http://www.poedit.net/download.php)，您可以使用：

开始 -> 运行 (cmd)

/程序文件/poedit/bin/msgunfmt ab_AB.mo > ab_AB.po

# c# - 视线范围，玩家位置更新

> ID：10863841
> 
> 赞同：1
> 
> 时间：2012-06-02T16:02:22.693
> 
> 标签：c#, synchronization, multiplayer

我正在为多人 RPG 编写服务器，目前正在努力实现视线范围。由于有些地图相当大，我必须限制客户看到的内容。我的做法：

如果我从客户端获得新坐标，我会将它们保存为目的地，以及移动开始时间。每隔 x 毫秒，我会遍历世界上的所有生物，并在保存它们上次更新它们时的位置后更新它们的当前位置。基本上，我根据移动开始时间和速度计算新位置，并将它们写入当前位置变量，同时保存新的开始时间。更新完成后，我将检查所有移动的生物，也就是那些位置与上次更新不同的生物。在一个子循环中，我再次遍历所有生物/客户，以检查我是否必须通知他们有关（消失）出现的生物。目前，我每 100 毫秒运行一次此更新。

这种方法很有效，但我觉得这不是最好的方法。而且我不确定一旦世界上有几千个生物（玩家、怪物等）会发生什么，这些生物必须更新和检查。

由于我无法找到有关此特定问题的资源，因此我在这里询问。这种方法好吗？我会很快遇到问题吗？这样做的标准是什么？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:18:20.637

[Eric Lippert 有一系列关于阴影投射的非常好的帖子](http://blogs.msdn.com/b/ericlippert/archive/2011/12/12/shadowcasting-in-c-part-one.aspx)，可能有助于解决/解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:23:41.580

您可能需要考虑使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)根据玩家角色可以看到的区域将游戏世界划分为多个部分。这样你就不需要一直循环遍历游戏中的每个生物；您只需要遍历有问题的玩家角色所在的部分中的那些，以及任何相邻的，以防有东西越过边界。

我自己并没有亲自编写过这种编码，但我确实与在我正在为其开发 GUI 的太空战斗游戏中这样做的人合作过！

# php - android-php，有时会触发两次响应

> ID：10863842
> 
> 赞同：0
> 
> 时间：2012-06-02T16:02:23.270
> 
> 标签：php, android

我正在使用连接到[http://example.com/test.php](http://example.com/test.php)的 json 响应我在 listview 中收到响应并且一切都很好，但有时 php 被触发两次，例如：如果里面有 mail() 函数发送一次但很少发送两次，我无法预测何时发生，是因为它不包含 session_start() 还是其他原因？php 仅有 mail() 函数。

提前致谢。

# javascript - jQuery on/delegate 正确的语法

> ID：10863843
> 
> 赞同：3
> 
> 时间：2012-06-02T16:02:37.173
> 
> 标签：javascript, javascript-events, jquery

由于 jQuery API 目前已关闭，是否有人可以帮助我解决以下问题？我正在将无序列表加载到网页中，并且需要能够将悬停和单击事件附加到列表项。

```
<ul>
  <li class="option">Item 1</li>
  <li class="option">Item 1</li>
  <li class="option">Item 1</li>
</ul> 
```

到目前为止，我已经尝试了以下 jQuery 代码的一些变体，使用 .on 版本 1.7+

```
$("ul").on("click", "li .option", function(){
alert($(this).text());
}); 
```

谁能指出我正确的方向？我知道 .live 已被贬值并且 .delegate 已被取代，所以真的只是在寻找一个允许我使用 .on 的解决方案。

一如既往的感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:03:12.103

不是`li .option`，因为它在`li`类中找到元素`option`，但是你有这个类`li`，所以它会是`li.option`or `.option`。

所以对于[`.on()`](http://api.jquery.com/on)，它看起来像：

```
$("ul").on("click", "li.option", function(){
   alert($(this).text());
}); 
```

但是对于[`.delegate()`](http://api.jquery.com/delegate)，它看起来像：

```
$("ul").delegate("li.option", "click", function(){
   alert($(this).text());
}); 
```

### 根据你编辑

您正在尝试使用容器引用绑定`click`到，它也附加到 DOM 更改。所以你可以去 for ，它已经存在于 DOM 中，你可以在其中附加整个列表。`li.option``ul``#content`

所以委托事件将如下所示：

```
$("#content").delegate("ul > li.option", "click", function(){
   alert($(this).text());
}); 
```

# php - 将元素添加到数组的最后一个元素

> ID：10863849
> 
> 赞同：8
> 
> 时间：2012-06-02T16:03:19.373
> 
> 标签：php, arrays

如果我有以下数组。`list[]`为 的最后一个元素添加元素的最佳方法是`$myArray[]`什么？请注意，`list[]`具有数字索引（即不关联）。谢谢！

```
$myArray[] = array( 'name' => 'hello', 'list' => array() ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:05:57.993

如果 $myArray 不是关联的

```
array_push($myArray[count($myArray)-1]['list'], 'new element'); 
```

或者

```
$myArray[count($myArray)-1]['list'][] = 'new element'; 
```

使用此方法可以更改数组指针的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T16:05:49.210

你可以这样做：

```
$last = array_pop($myArray); // remove last element of array
$last['list'][] = "new element"; // add element to array
$myArray[] = $last; // add changed last element again 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T16:06:34.333

```
$myArray[count($myArray)-1]['list'][]="something to go in 'list' array";//this shall append 
//to the second dimension array with keyname 'list' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T20:24:34.503

实际上有一个更漂亮的方式（在我看来）：

```
$ref = &$myArray[];
$ref['list'][] = 'new item' 
```

如您所见，$ref - 是对 $myArray 的最后一个元素的引用，因此您可以通过更改 $ref; 来更改最后一个元素；

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-02T16:05:54.853

`array_push`功能做到这一点。

```
array_push() 
```

# c++ - OPENCV：从图像的左边缘计算像素

> ID：10863856
> 
> 赞同：0
> 
> 时间：2012-06-02T16:04:19.053
> 
> 标签：c++, opencv

我想知道如何制作一个循环来计算图像像素从图像的左边缘开始计算像素

如何使用 c++ opencv 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:10:01.580

您不需要自己构建循环，这一切都已经为您完成了。

```
cv::Mat img = cv::imread("img.jpg");
std::cout << img.total() << std::endl; 
```

第一行将您的图像加载到标准 C++ OpenCV 容器中`Mat`。第二行打印 的底层数组中的元素数，`Mat`对于图像，这等于该图像的像素总数。

如果这些构造对您来说是新的，您应该从阅读[这些](http://docs.opencv.org/doc/tutorials/core/table_of_content_core/table_of_content_core.html)教程开始。

# php - 装饰器模式有什么用处？我的例子不起作用

> ID：10863857
> 
> 赞同：3
> 
> 时间：2012-06-02T16:04:19.340
> 
> 标签：php, design-patterns, decorator

书上说：

> 装饰器模式可用于扩展（装饰）某个对象的功能

我有一只兔子动物。例如，我希望我的兔子有爬行动物的皮肤。只想用爬行动物的皮肤装饰一只普通的兔子。

我有代码。首先，我有`Animal`任何动物共有的所有抽象类：

```
abstract class Animal {
    abstract public function setSleep($hours);
    abstract public function setEat($food);
    abstract public function getSkinType();

    /* and more methods which for sure will be implemented in any concrete animal */
} 
```

我为我的兔子创建课程：

```
class Rabbit extends Animal {
    private $rest;
    private $stomach;
    private $skinType = "hair";

    public function setSleep($hours) {
        $this->rest    = $hours;
    }

    public function setFood($food) {
        $this->stomach = $food;
    }

    public function getSkinType() {
        return $this->$skinType;
    }

} 
```

到目前为止一切正常。然后我创建扩展的抽象`AnimalDecorator`类`Animal`：

```
abstract class AnimalDecorator extends Animal {
    protected $animal;

    public function __construct(Animal $animal) {
        $this->animal = $animal;
    }
} 
```

问题来了。注意`AnimalDecorator`也从类中获取所有抽象方法`Animal`（在这个例子中只有两个，但实际上可以有更多）。

然后我创建`ReptileSkinDecorator`扩展的具体类`AnimalDecorator`。它还具有相同的两个抽象方法`Animal`：

```
class ReptileSkinDecorator extends AnimalDecorator {
    public function getSkinColor() {
        $skin = $this->animal->getSkinType();
        $skin = "reptile";
        return $skin;
    }
} 
```

最后我想用爬行动物的皮肤装饰我的兔子：

```
$reptileSkinRabbit = ReptileSkinDecorator(new Rabbit()); 
```

但我不能这样做，因为我在`ReptileSkinDecorator`课堂上有两个抽象方法。他们是：

```
abstract public function setSleep($hours);
abstract public function setEat($food); 
```

所以，我不仅要重新装饰皮肤，还必须重新装饰`setSleep()`和`setEat();`方法。但我不需要。

在所有书籍示例中，类中始终只有一个抽象方法`Animal`。当然它会起作用。但是在这里我只是做了一个非常简单的现实生活示例并尝试使用装饰器模式，如果不在类中实现这些抽象方法，它就无法工作`ReptileSkinDecorator`。

这意味着如果我想使用我的示例，我必须创建一个全新的兔子并为其实现自己的方法`setSleep()`和`setEat()`方法。好吧，就这样吧。但是后来这个全新的兔子有`Rabbit`我传递给的 commont 实例`ReptileSkinDecorator`：

```
$reptileSkinRabbit = ReptileSkinDecorator(new Rabbit()); 
```

我有一个普通的兔子实例，它在 reptileSkinRabbit 实例中有自己的方法，而它又具有自己的 reptileSkinRabbit 方法。我有兔子在兔子。但我想我不必有这种可能。

我不正确地理解 Decarator 模式。在我对这种模式的理解中，请您指出我的示例中的任何错误。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T16:28:42.830

> *我不知道我是否完全理解你的问题。我是这样读的：*

您的装饰器尚未完成。正如它所显示的，它仍然是抽象和不完整的：

```
abstract class AnimalDecorator extends Animal {
    protected $animal;

    public function __construct(Animal $animal) {
        $this->animal = $animal;
    }
} 
```

如果你想让它轻松工作，你也应该装饰所有方法，所以当你从`AnimalDecorator`. 这里是众多方法中的两种示例：

```
abstract class AnimalDecorator extends Animal {

    ...

    public function getSkinColor() {
        return $this->animal->getSkinColor();
    }

    public function setSleep($hours) {
        $this->animal->setSleep($hours);
    }

    ... 
```

委派所有方法后，您可以像已经做的那样在具体装饰器中覆盖您想要的方法：

```
class ReptileSkinDecorator extends AnimalDecorator {
    public function getSkinColor() {
        return "reptile";
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T20:45:19.060

听起来您正试图强制使用不适合问题的特定模式。装饰者通常会聚合一些额外的东西（在头发上添加辫子），而不是完全改变它，就像你试图对皮肤做的那样（头发到鳞片）。

[Builder 模式](http://en.wikipedia.org/wiki/Builder_pattern)（您可以在其中指定您希望***如何***构建对象）可能更适合该问题。在您的情况下，您想构建一个用爬行动物皮肤构建的兔子。（我来自哪里，而不是爬行动物的皮肤，做一只有角的兔子并称之为[鹿角](http://en.wikipedia.org/wiki/Jackalope)兔会很有趣：）

我认为在这里使用 Builder（或任何模式）实际上可能是矫枉过正。对于这个特定问题，您绝对必须使用模式吗？不如只定义如下代码并暂时将模式排除在外：

```
class Animal {
    private $rest;
    private $stomach;
    private $skinType;

    public function setSleep($hours) {
        $this->rest    = $hours;
    }

    public function setFood($food) {
        $this->stomach = $food;
    }

    public function setSkinType($skin) {
        $this->skinType = $skin;
    }

    // define the other getters too

    public function getSkinType() {
        return $this->$skinType;
    }
}

class Rabbit extends Animal {
    public function __construct() {
        $this->rest = "rabbitRest";        // put whatever a rabbit rest is
        $this->stomach = "rabbitStomach";  // put whatever a rabbit stomach is
        $this->skinType = "hair";
    }
} 
```

**免责声明：**我是一个 c++ 人，我的 php 真的很糟糕，我确定这段代码有几个问题，但我希望你明白。

所以 Rabbit 只会扩展 Animal 并相应地设置它的属性。然后，如果有人想要 RabbitReptile，他们可以扩展 Rabbit（可能是矫枉过正）或者只制作 Rabbit 并相应地设置皮肤类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T16:27:03.387

装饰器模式必须将其基类或实现的接口中定义的所有成员委托给它正在扩展的对象。换句话说，ReptileSkinDecorator 的 setSleep、setEat 和 getSkinType 方法必须调用 Rabbit（或您选择用爬行动物皮肤装饰的任何其他动物后代）的 setSleep 和 setEat 方法。

另外，我刚刚注意到，在您的示例中，您正在尝试更改 Animal 基类中定义的方法的使用（尝试定义皮肤类型，我假设您希望它是不可变的）。您不应该使用装饰器模式真正做到这一点（隐藏对象的不可变属性），因为如果该对象在装饰器范围之外可用，它将提供不同的皮肤类型（如您所定义的那样）。装饰器通常不会更改它们正在装饰的对象的现有属性。

也许一个更好的例子是 HibernationDecorator。由于您的基类与休眠没有任何关系，您可能希望制作该装饰器，以便您可以为您的兔子提供休眠功能。这就是装饰器的意义所在——提供基类或接口契约中不存在的附加功能，同时仍遵守基类的契约。

# c# - 旋转一个字符数组

> ID：10863858
> 
> 赞同：1
> 
> 时间：2012-06-02T16:04:29.223
> 
> 标签：c#, arrays, rotation

这种方法有什么替代方法

```
 tmp = c[0];
c[0] = c[1];
c[1] = c[2];
c[2] = c[3];
c[3] = tmp; 
```

向左旋转具有 4 个元素的 char 数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:08:57.967

使用泛型并就地旋转（感谢 Jon Skeet 的建议）：

```
static void Rotate<T>(T[] source)
{
    var temp = source[0];
    Array.Copy(source, 1, source, 0, source.Length - 1);
    source[source.Length - 1] = temp;
} 
```

这些应该适用于任何长度至少为 2 的数组，并且适用于任何数组。

如果性能很关键并且数组总是很小，使用这个：

```
static void Rotate<T>(T[] source)
{
    var temp = source[0];
    for (int i = 0; i < source.Length - 1; i++)
        source[i] = source[i + 1];
    source[source.Length - 1] = temp;
} 
```

第一种方法对于大型数组来说是最快的，但是对于 4 个项目，这几乎与您的示例方法一样快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:19:14.220

旋转数组的另一种方法是在访问数组时旋转索引，即您正在创建一个虚拟环

```
int origin = someValue;
int x = c[(i + origin) % c.Length]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T16:10:06.907

一步完成工作。

```
Using System.Linq;

 int[]  ar = { 1,2,3,4,5};
 int k = 1; //
 int[] ar1=  ar.Skip(k)            // Start with the last elements
             .Concat(ar.Take(k)) // Then the first elements
             .ToArray(); 
```

输出——2,3,4,5,1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:10:48.527

我不确定您是在要求更有效的方法还是更简单的输入方法，但我会尝试回答您，假设您想要一种更简单的方法

所以试试：

```
int temp = c[0]
for(int i = 0; i < c.count; i++)
{
    if (i == (c.count - 1))
    {
        c[i] = temp;
        break;
    }
    c[i] = c[i + 1];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T09:57:53.293

在 ruby​​ 中旋转阵列可以在一行中完成。

```
def array_rotate(arr)
    i, j = arr.length - 1, 0
    arr[j],arr[i], i, j = arr[i], arr[j], i - 1, j + 1 while(j<arr.length/2)
    puts "#{arr}"
end 
```

# android - 安装的平台不在 SDK 文件夹中，也不显示为目标平台

> ID：10863862
> 
> 赞同：0
> 
> 时间：2012-06-02T16:00:04.697
> 
> 标签：android, eclipse-adt

我刚刚开始在我的 Win 7 机器上进行 Android 开发。我已经从 SDK 管理器安装了所有平台。 ![SDK 管理器](../Images/119805ae140f40a0e7d6f7aec153fadc.png)

但是当我从 Eclipse 中转到首选项添加它们时，它只显示其中两个。

![Eclipse 首选项](../Images/b9b2637b6cbfdd3e122dfdd0c7cc9f30.png)

即使在 SDK 文件夹中，也只有这两个平台。

![SDK 文件夹](../Images/370aeccf58521cac77625fa2dec5211a.png)

我已经删除并重新安装了一些平台（如 2.2）以查看它们是否会再次出现但无济于事。

谁能告诉我我是否在这里忽略了一个步骤或什么？如何也添加其他平台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:36:48.220

将 Eclipse 中的 SDK 位置更改为`C:\Program Files\Android\android-sdk`. 这就是 SDK 所在的位置，您可以`SDK Path`在 SDK Manager 中看到。

# java - 在 Eclipse 中导出我的 Java 程序

> ID：10863865
> 
> 赞同：0
> 
> 时间：2012-06-02T16:04:58.633
> 
> 标签：java, deployment, executable, executable-jar

我在 Eclipse 中制作了一个 hello world 程序，我想知道如何从 Eclipse 中运行它（而不是在控制台上）。我想像使用`.exe`. 这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:12:48.583

如果您将程序导出为 .exe，您将只能在 Windows 上本地运行它（Java 的重点在于它是跨平台的）。您想将其导出为*Runnable JAR File*，这应该是 Eclipse 中的导出选项之一：

![在此处输入图像描述](../Images/e3bc660729f526c3a15a238524d65206.png)

默认情况下，当您尝试打开 JAR 文件时，不会打开任何控制台窗口，因此对`System.out`或的任何调用`System.err`都是不可见的。您可以通过命令提示符 ( `java -jar YourJarFile.jar`) 运行您的 JAR 文件，也可以创建一个 GUI 供您的用户进行交互。

# php - 如何为连接到数据库的 PHP 代码提供结构

> ID：10863866
> 
> 赞同：1
> 
> 时间：2012-06-02T16:05:01.427
> 
> 标签：php, database, connection

我有一个需要来自数据库的一些查询的 php 页面。所以我开始写下一些函数，我注意到我需要确保连接是活动的，并在数据检索完成时关闭连接。但并不需要天才就认为这不是处理这个问题的最聪明的方法：

```
function getConnection() {
//it connects
}

function killConection() {
//it closes connection
}

function getData() {
getConnection();
//it gets data
killConnection();
}

function getVeryImportantData() {
getConnection();
//it gets data
killConnection();
}

//... and so on ... 
```

我当然不想为我需要发出的每个请求建立一个新的数据库连接，所以我想知道是否有一种方法可以组织我的代码，在我需要它时保持连接处于活动状态，以防万一它重新连接因任何原因关闭，并在完成所有必需的操作后断开连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:07:28.470

您的问题的解决方案很简单：

1.  仅在需要时才打开与数据库的连接（并且尚未打开）
2.  如果您知道，请仅关闭与数据库的连接，您不需要额外的连接。

这将导致仅在完成数据库查询时才打开数据库连接的处理。

数据库连接——如果没有特别关闭——将在脚本完成后自动关闭。

数以百万计的网站使用这个原则，他们或多或少的工作！所以我认为这并没有那么糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:26:39.800

我会做什么：

1.  创建一个应用程序类，这是您的实际页面
2.  向这个类添加一个方法来初始化数据库连接并将其保存到`$this->databaseConnection`属性中，这样你以后可以检查你是否已经有一个数据库连接。
3.  您提到的其余功能可以设置为应用程序类的方法。

这比简单的脚本要复杂一些，但我认为值得一试。它将帮助您以正确的方式规划您的应用程序，它还将有助于正确构建您的应用程序。

此外，使用 PDO 是个好主意。

如果您需要这种方法的帮助，请告诉我。

# java - Gridworld 在列表中找到最近的位置

> ID：10863875
> 
> 赞同：0
> 
> 时间：2012-06-02T16:05:51.017
> 
> 标签：java, gridworld

你好，我正在制作一个去最近的宝箱的 PirateShip Actor。使用箱子的 ArrayList 我将如何在网格上找到离我的海盗船最近的箱子。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:20:51.863

如果您有 PirateShip 的位置和箱子的 ArrayList，那么我首先建议将箱子列表转换为箱子位置列表。然后：

```
Location loc = getLocation();
int lowest = Integer.MAX_VALUE;
Location closest = null;
for(Location l : locs)
{
    double dis = Math.sqrt(Math.pow(l.getRow() - loc.getRow(), 2) + Math.pow(l.getCol() - loc.getCol(), 2)); // Distance Formula
    if(dis < lowest)
    {
        lowest = dis;
        closest = l;
    }
} 
```

这将设置为最接近列表中最近的位置，您可以使用 /* 在此处插入网格名称 */.get(closest) 来获取该位置的箱子

# javascript - 抓取用户输入

> ID：10863885
> 
> 赞同：-1
> 
> 时间：2012-06-02T16:06:35.963
> 
> 标签：javascript, html, forms, input

```
First name: <input type="text" name="firstname"></input>
<input type="submit" value="Submit" /> 
```

假设我有上面的简单表格。我将如何获取用户在 JS 的名字字段中输入的内容。我试过了：

```
document.getElementsByTagName("input")[1].onclick = function() {
    inputted = document.getElementsByTagName("input")[0].innerHTML;
} 
```

但这不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:07:47.687

用于`value`文本输入：

```
 inputted = document.getElementsByTagName("input")[0].value; 
```

还要确保将`var`关键字添加到变量中，以免创建全局变量：

```
var inputted = document.getElementsByTagName("input")[0].value; 
```

您也不应该放置结束`</input>`标签，因为它是**自结束**标签：

```
<input type="text" name="firstname" /> 
```

* * *

顺便说一句，您还可以使用以下语法获取元素值：

```
formName.elementName.value; 
```

或者

```
document.forms['formName'].elementName.value; 
```

在您的情况下，它将是：

```
var inputted = formName.firstname.value; 
```

或者

```
var inputted = document.forms['formName'].firstname.value; 
```

替换`formName`为您的`<form>`元素的任何名称。

* * *

`value`最后，如果您申请它，您还可以获得元素`id`：

```
<input type="text" name="firstname" id="firstname" /> 
```

然后使用`getElementById`：

```
var inputted = document.getElementById('firstname'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:24:47.943

```
 var inputs=document.getElementsByTagName("input"),
      i=inputs.length;
 //
    while(i--){
               inputs[i].onclick=myClickEventHandler;
     };
//
 function myClickEventHandler(evt){
    var myVal;
     switch (this.name) {

        case 'firstname':

             myVal = this.value;
            break;
    };
 }; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T16:10:52.700

如果您使用的是表单，则可以尝试这样的事情：

```
var input = document.forms["formName"]["fieldName"].value; 
```

否则，使用`.value`属性：

```
var input = document.getElementsByTagName("input")[0].value; 
```

# http - 需要 Android HTTP POST 帮助

> ID：10863886
> 
> 赞同：-1
> 
> 时间：2012-06-02T16:06:39.317
> 
> 标签：http

向 stackoverflow 的所有成员致敬。

我是 Android 开发新手，谁能告诉我如何在网站上发布数据或给我一个采样器？

我想将哈希发布到在线破解者并将结果作为字符串返回。

```
edit_box = enter the hash 
```

sendbutton = 发送哈希 text_view = 结果

[http://xdecrypt.com/#](http://xdecrypt.com/#) 谢谢

编辑：我看一下@ Live headers，发现这个结果 [http://xdecrypt.com/ajax/liste.php?hash=759fdfa1a99563aa6309bb6ae27537c564547f62](http://xdecrypt.com/ajax/liste.php?hash=759fdfa1a99563aa6309bb6ae27537c564547f62)

在这里，我们可以将哈希添加到 Url，结果是。

```
document.getElementById('hashresult').value="";document.getElementById('hashresult').value+="759fdfa1a99563aa6309bb6ae27537c564547f62(MySQL)=amande1975 "; 
```

现在我想把它读成字符串有人可以帮忙吗？

我想显示 Hashtype MySQL 和密码 amande1975。并在 ui 上显示为 text_view。

再次感谢。

编辑：2 它的作品，但现在如何分割字符串？有人可以帮忙吗？

```
 try {
            String webPage = "http://xdecrypt.com/ajax/liste.php?hash="+hashedit.getText().toString();
            URL url = new URL(webPage);
            URLConnection urlConnection = url.openConnection();
            InputStream is = urlConnection.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);

            int numCharsRead;
            char[] charArray = new char[1024];
            StringBuffer sb = new StringBuffer();
            while ((numCharsRead = isr.read(charArray)) > 0) {
                sb.append(charArray, 0, numCharsRead);
            }
            String result = sb.toString();

            System.out.println("*** BEGIN ***");
            System.out.println(result);
            System.out.println("*** END ***");

            TextView tv2 = (TextView) findViewById(R.id.textView2);
            tv2.setText("HashResuld="+sb.toString()); 
```

EDIT3：它的作品；）

再次感谢没有帮助;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:08:41.517

我之前做过一些研究，并且 ksoap2 能够使用 web 服务 url 进行数据传输，我相信它还有其他可以使用的 http 功能。

[http://ksoap2.sourceforge.net/](http://ksoap2.sourceforge.net/)

下载 ksoap2 并导入您的项目并创建您的服务访问层，如下所示：

```
import java.util.ArrayList;
import java.util.List;

import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;

import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.SoapEnvelope;

public class ServiceAccess {

private static String Namespace;
private static String MethodName;
private static String URL;
private SoapSerializationEnvelope Envelope;
private SoapObject SoapRequest;
private SoapPrimitive Response;
private List<PropertyInfo> methodParamList; 

public ServiceAccess(String webserviceUrl, String methodName) throws Exception
{
    setUrl(webserviceUrl);
    setMethodName(methodName);
    setNamespace("http://tempuri.org/");
    SoapRequest = new SoapObject(this.getNamespace(), this.getMethodName());
    methodParamList = new ArrayList<PropertyInfo>();
}
protected String getUrl()
{
    return URL;
}
protected void setUrl(String url)
{
    URL = url;
}
protected String getMethodName()
{
    return MethodName;
}
protected void setMethodName(String methodName)
{
    MethodName = methodName;
}
protected String getNamespace()
{
    return Namespace;
}
protected void setNamespace(String namespace)
{
    Namespace = namespace;
}
protected String SoapAction()
{
    String SOAP_ACTION = this.getNamespace() + this.getMethodName();
    return SOAP_ACTION;
}
protected void CreateSoapRequest() throws Exception
{
    try
    {
        if(methodParamList.size()>0){
            for(PropertyInfo propInfo : methodParamList)
            {
        SoapRequest.addProperty(propInfo.getName(), propInfo.getValue());
            }
        }
    }catch(Exception ex){
        throw ex;
    }

}
public <T> void addMethodParameters(String paramName, T val)
{
    PropertyInfo prop = new PropertyInfo();
    prop.setName(paramName);
    prop.setValue(val);
    prop.setType(val.getClass());
    methodParamList.add(prop);
}
protected SoapSerializationEnvelope createEnvelope() throws Exception
{
    this.CreateSoapRequest();
    try{

        Envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        Envelope.dotNet = true;
        Envelope.setOutputSoapObject(SoapRequest);

    }catch(Exception ex){
        throw ex;
    }
    return Envelope;
}
public String getResponse() throws Exception
{
    try{

        this.createEnvelope();

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

           androidHttpTransport.call(this.SoapAction(), Envelope);

           Response = (SoapPrimitive) Envelope.getResponse();

    }catch(Exception ex){
        throw ex;
    }
    return Response.toString();
}

} 
```

您可以调整它以使用各种网页 url 而不是 web 服务 url。

# java - JME：如何在没有按钮等的情况下获得白色的完整屏幕

> ID：10863901
> 
> 赞同：1
> 
> 时间：2012-06-02T16:08:52.880
> 
> 标签：java, java-me, midp, lcdui

请看下面的代码

首先，请注意我是 Java Mobile 的 100% 新手。

在这里，当用户单击按钮时，我正在点亮并振动。但是，我真的很想创建一个 SOS 应用程序，将整个屏幕变成白色，然后在线程中变成黑色，就像那样。我想我没有通过这个应用程序实现这一点，因为即使灯亮着，按钮仍然存在。我试图将“表单”颜色变为“白色”，但 JME 似乎没有“颜色”类。

```
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;

public class Midlet extends MIDlet{

    private Form f;
    private Display d;
    private Command start,stop;
    private Thread t;

    public Midlet()
    {
        t = new Thread(new TurnLightOn());

    }

    public void startApp() 
    {
        f = new Form("Back Light On");

       d = Display.getDisplay(this);
       d.setCurrent(f);        

       start = new Command("Turn On",Command.OK,0);
       stop = new Command("Turn Off",Command.OK,1);

       f.addCommand(start);
       f.setCommandListener(new Action());

    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional)
    {
        this.notifyDestroyed();
    }

    private class Action implements CommandListener
    {

        public void commandAction(Command c, Displayable dis) 
        {
            f.append("Light is Turnning On");

            t.start();

        }

    }

     private class ActionOff implements CommandListener
    {

        public void commandAction(Command c, Displayable dis) 
        {

        }

    }

    private class TurnLightOn implements Runnable
    {

        public void run() 
        {
            f.append("Working");
            for(int i=0;i<100;i++)
            {

                try 
                {

                    d.flashBacklight(200);
                    d.vibrate(200);

                    Thread.sleep(1000);

                } 
                catch (InterruptedException ex)
                {
                    ex.printStackTrace();
                }
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:36:26.263

使用`javax.microedition.lcdui.Canvas`代替表格。[这个例子](http://www.developer.nokia.com/Resources/Library/Java/developers-guides/ui-and-graphics/lcdui/example-creating-a-simple-test-midlet/implementation/implementing-the-canvas.html)可以让你开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:28:40.867

```
 public void startApp() 
        {
            f = new Form("Back Light On");

           d = Display.getDisplay(this);

           start = new Command("Turn On",Command.OK,0);
           stop = new Command("Turn Off",Command.OK,1);

           f.addCommand(start);
           f.setCommandListener(new Action());

    myCanvas = new MyCanvas();
     d.setCurrent(myCanvas);   
            myCanvas.repaint();

} 
```

现在创建一个画布并实现如下绘制方法：

```
 class MyCanvas extends Canvas {
            public void paint(Graphics g) {
                // create a 20x20 black square in the center

                // clear the screen first
                g.setColor(0xffffff);
                g.fillRect(0, 0, getWidth(), getHeight());

                g.setColor(0xffffff); // make sure it is white color

                // draw the square, <b>changed to rely on instance variables</b>
                <b>g.fillRect(x, y, getWidth(), getHeight());</b>
            }
        } 
```

# jquery - 复选框选中jquery时更新总和

> ID：10863905
> 
> 赞同：0
> 
> 时间：2012-06-02T16:09:30.440
> 
> 标签：jquery, checkbox, sum

在这里： http: [//jsfiddle.net/justeric/AWC4U/4/](http://jsfiddle.net/justeric/AWC4U/4/)选中一个框将对文本字段列中的所有条目求和，并从 100 中减去该总和，然后它将差值放在相应的文本字段中。因此，如果 20 是文本字段列中所有条目的总和，则选中复选框将导致 80 (100-20) 填充到相应的文本字段中。此功能正常工作，但这是我的问题：

如果我取消选中复选框，则相应的文本字段应返回零值而不影响任何其他文本字段。因此，在上面的示例中，80 应该返回 0 而不会更改 20。此外，选中的每个附加复选框都应该返回文本字段的新总和，包括从上次检查中填充的任何内容，现在，第一个计算只是不断重新填充对于选中的每个附加复选框。因此，如果复选框的总和为 20，并且我检查了一个复选框 80 填充在相应的文本字段中，那是正确的，但如果我检查另一个复选框 80 再次填充但这是错误的，现在应该填充 0，因为 100-20-80 = 0。

编辑：

因此，要清除与复选框对应的文本字段而不影响其他字段，需要以下内容：

```
$('.textfield').val(function() {
    if($('#' + this.id.replace(/textfield/,'checkbox')).is(':unchecked')){
return 0;} 
```

这会影响所有未选中的复选框，但我希望它仅在选中的复选框更改为未选中时才起作用。因此，该值以直观的方式恢复为 0，而不会影响与未选中复选框关联的任何其他文本字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T17:19:40.013

假设您在复选框上有一个类，您可以执行以下操作：

`$('.checkbox').not(':checked');`

因此，在更改或单击处理程序中，您可以执行以下操作：

```
$('.checkbox').click(function() {
   if ($(this).not(':checked')) {
     // it is unchecked so do your uncheck function
     doUncheckSumFunction();  // you'd define this do what you need it to do

     } 
}); 
```

你也可以像这样定义一个 uncheck 函数：

```
$('table').on('unchecked', '.checkboxes', function() {
// do the code you want done
}); 
```

然后在第一个示例中，`doUnCheckSumFunction()`您现在可以执行以下操作：

```
$(this).trigger('unchecked'); 
```

更新：

要遍历一组元素并做一些事情，你可以这样做：

```
var $textareas = $('.textclass');

var sum = 0;
$('.checkbox').each(function(i) {
   if ($(this).not(':checked')) {
     sum = sum + 1;
     // or
     $textareas[i].val(0); //etc
   }
}); 
```

等等

# cuda - 是否可以在 GPU 和 CPU 之间拆分 Cuda 作业？

> ID：10863907
> 
> 赞同：3
> 
> 时间：2012-06-02T16:09:43.730
> 
> 标签：cuda

我在理解如何或是否可以在 gpu 和 cpu 之间分担工作负载时遇到了一些问题。我有一个大日志文件，我需要读取每一行然后运行大约 500 万次操作（测试各种场景）。我目前的方法是读取几百行，将其添加到数组中，然后将其发送到每个 GPU，这工作正常，但因为每行工作量很大，而且行数很多，所以需要很长时间。我注意到，虽然这正在发生，但我的 CPU 内核基本上什么也没做。我正在使用 EC2，所以我有 2 个四核 Xeon 和 2 个 Tesla GPU，一个 cpu 核心读取文件（运行主程序）并且 GPU 完成工作，所以我想知道如何或可以做些什么来参与其他 7 个核心进入进程？

我对如何设计一个程序来平衡 GPU/CPU 之间的任务感到有点困惑，因为它们都会在不同的时间完成工作，所以我不能同时将它发送给他们。我考虑过设置一个队列（我是 c 新手，所以不确定这是否可能）但是有没有办法知道 GPU 作业何时完成（因为我认为向 Cuda 发送作业是异步的）？I 内核与普通的 c 函数非常相似，因此将其转换为 cpu 使用不是问题，只是平衡工作似乎是问题。我再次浏览了“Cuda by example”，但实际上找不到任何涉及这种平衡的东西。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T17:25:42.010

我认为关键是创建一个多线程应用程序，遵循所有常见做法，并拥有两种类型的工作线程。一种适用于 GPU，另一种适用于 CPU。所以基本上，你需要一个线程池和一个队列。

[http://en.wikipedia.org/wiki/Thread_pool_pattern](http://en.wikipedia.org/wiki/Thread_pool_pattern)

队列可以非常简单。您可以拥有一个共享整数，它是日志文件中当前行的索引。当一个线程准备好检索更多工作时，它会锁定该索引，从日志文件中获取一些行数，从索引指定的行开始，然后将索引增加它检索到的行数，然后解锁.

当工作线程处理完日志文件的一个块时，它会将其结果发送回主线程并获取另一个块（如果没有更多行要处理，则退出）。

该应用程序启动 GPU 和 CPU 工作线程的某种组合，以利用所有可用的 GPU 和 CPU 内核。

您可能会遇到的一个问题是，如果 CPU 很忙，GPU 的性能可能会受到影响，因为在提交新工作或来自 GPU 的处理结果时会出现轻微延迟。您可能需要试验线程数及其亲和性。例如，您可能需要通过操作线程关联性为每个 GPU 保留一个 CPU 内核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:04:11.600

既然您说逐行可能是您可以将作业拆分为 2 个不同的进程 - 一个 CPU + GPU 进程 一个 CPU 进程使用剩余的 7 个内核

您可以使用不同的偏移量启动每个进程 - 例如第一个进程读取 1-50、101-150 等行，而第二个进程读取 51-100、151-200 等行

这将避免您为优化 CPU-GPU 交互而头疼的问题

# colors - C#/XNA/HLSL - 在 2D 精灵上应用像素着色器会影响同一渲染目标上的其他精灵

> ID：10863909
> 
> 赞同：3
> 
> 时间：2012-06-02T16:09:57.743
> 
> 标签：colors, xna, 2d, xna-4.0, hlsl

**背景资料**

我刚刚开始学习 HLSL，并决定通过编写一个简单的 2D XNA 4.0 弹幕游戏来测试我从互联网上学到的东西。

我写了一个像素着色器来改变子弹的颜色。

这里的想法是：子弹的原始纹理主要是黑色、白色和红色。在我的像素着色器的帮助下，子弹可以变得更加丰富多彩。

![主意](../Images/787faa6232f5223e1195b1673b200920.png)

但是，我不确定着色器如何以及何时应用于 XNA 4.0 中的 spriteBatch，以及何时结束。这可能是问题的原因。XNA 3.x 中有 pass.begin() 和 pass.end()，但是 XNA 4.0 中的 pass.apply() 让我很困惑。

另外，我是第一次使用renderTarget。它可能会导致问题。

**症状**

它有效，但前提是项目符号列表中有相同颜色的项目符号。如果渲染不同颜色的子弹，则会产生错误的颜色。

似乎像素着色器没有应用在子弹纹理上，而是应用在 renderTarget 上，它包含了所有渲染过的子弹。

例如： ![截屏](../Images/917ab5ee46b4f68f8d50d0af44556f56.png) 这里我有一些红色子弹和蓝色子弹。最后创建的子弹是蓝色的。像素着色器似乎在红色上添加了蓝色，使它们成为蓝紫色。

如果我不断地制造子弹，红色子弹会出现在红色和蓝紫色之间切换。（我相信蓝色的也在切换，但不明显。）

**代码**

由于我是 HLSL 的新手，我真的不知道我必须提供什么。以下是我相信或不知道是否与问题有关的所有事情。

C# - 敌人子弹（或只是子弹）：

```
protected SpriteBatch spriteBatch;
protected Texture2D texture;
protected Effect colorEffect;
protected Color bulletColor;
... // And some unrelated variables

public EnemyBullet(SpriteBatch spriteBatch, Texture2D texture, Effect colorEffect, BulletType bulletType, (and other data, like velocity)
{
    this.spriteBatch = spriteBatch;
    this.texture = texture;
    this.colorEffect = colorEffect;
    if(bulletType == BulletType.ARROW_S)
    {
        bulletColor = Color.Red;   // The bullet will be either red
    }
    else
    {
        bulletColor = Color.Blue;  // or blue.
    }
}

public void Update()
{
    ... // Update positions and other properties, but not the color.
}

public void Draw()
{
    colorEffect.Parameters["DestColor"].SetValue(bulletColor.ToVector4());
    int l = colorEffect.CurrentTechnique.Passes.Count();
    for (int i = 0; i < l; i++)
    {
        colorEffect.CurrentTechnique.Passes[i].Apply();
        spriteBatch.Draw(texture, Position, sourceRectangle, Color.White, (float)Math.PI - rotation_randian, origin, Scale, SpriteEffects.None, 0.0f);
    }
} 
```

C# - 子弹管理器：

```
private Texture2D bulletTexture;

private List<EnemyBullet> enemyBullets;
private const int ENEMY_BULLET_CAPACITY = 10000;

private RenderTarget2D bulletsRenderTarget;

private Effect colorEffect;

...

public EnemyBulletManager()
{
    enemyBullets = new List<EnemyBullet>(ENEMY_BULLET_CAPACITY);
}

public void LoadContent(ContentManager content, SpriteBatch spriteBatch)
{
    bulletTexture = content.Load<Texture2D>(@"Textures\arrow_red2");

    bulletsRenderTarget = new RenderTarget2D(spriteBatch.GraphicsDevice, spriteBatch.GraphicsDevice.PresentationParameters.BackBufferWidth, spriteBatch.GraphicsDevice.PresentationParameters.BackBufferHeight, false, SurfaceFormat.Color, DepthFormat.None);

    colorEffect = content.Load<Effect>(@"Effects\ColorTransform");
    colorEffect.Parameters["ColorMap"].SetValue(bulletTexture);
}

public void Update()
{
    int l = enemyBullets.Count();
    for (int i = 0; i < l; i++)
    {
        if (enemyBullets[i].IsAlive)
        {
            enemyBullets[i].Update();
        }
        else
        {
            enemyBullets.RemoveAt(i);
            i--;
            l--;
        }
    }
}

// This function is called before Draw()
public void PreDraw()
{
    // spriteBatch.Begin() is called outside this class, for reference:
    // spriteBatch.Begin(SpriteSortMode.Immediate, null);

    spriteBatch.GraphicsDevice.SetRenderTarget(bulletsRenderTarget);
    spriteBatch.GraphicsDevice.Clear(Color.Transparent);

    int l = enemyBullets.Count();
    for (int i = 0; i < l; i++)
    {
        if (enemyBullets[i].IsAlive)
        {
            enemyBullets[i].Draw();
        }
    }

    spriteBatch.GraphicsDevice.SetRenderTarget(null);
}

public void Draw()
{
    // Before this function is called,
    // GraphicsDevice.Clear(Color.Black);
    // is called outside.

    spriteBatch.Draw(bulletsRenderTarget, Vector2.Zero, Color.White);

    // spriteBatch.End();
}

// This function will be responsible for creating new bullets.
public EnemyBullet CreateBullet(EnemyBullet.BulletType bulletType, ...)
{
    EnemyBullet eb = new EnemyBullet(spriteBatch, bulletTexture, colorEffect, bulletType, ...);
    enemyBullets.Add(eb);
    return eb;
} 
```

HLSL - 效果\ColorTransform.fx

```
float4 DestColor;

texture2D ColorMap;
sampler2D ColorMapSampler = sampler_state
{
    Texture = <ColorMap>;
};

struct PixelShaderInput
{
    float2 TexCoord : TEXCOORD0;
};

float4 PixelShaderFunction(PixelShaderInput input) : COLOR0
{
    float4 srcRGBA = tex2D(ColorMapSampler, input.TexCoord);

    float fmax = max(srcRGBA.r, max(srcRGBA.g, srcRGBA.b));
    float fmin = min(srcRGBA.r, min(srcRGBA.g, srcRGBA.b));
    float delta = fmax - fmin;

    float4 originalDestColor = float4(1, 0, 0, 1);
    float4 deltaDestColor = originalDestColor - DestColor;

    float4 finalRGBA = srcRGBA - (deltaDestColor * delta);

    return finalRGBA;
}

technique Technique1
{
    pass ColorTransform
    {
        PixelShader = compile ps_2_0 PixelShaderFunction();
    }
} 
```

如果有人可以帮助解决问题，我将不胜感激。（或者优化我的着色器。我对 HLSL 真的知之甚少。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:10:24.667

在 XNA 4 中，您应该将效果直接传递给 SpriteBatch，如[Shawn Hargreaves 的博客](http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritebatch-and-custom-shaders-in-xna-game-studio-4-0.aspx)中所述。

也就是说，在我看来，问题在于，在将子弹渲染到 之后`bulletsRenderTarget`，然后使用相同的 spriteBatch 绘制 RenderTarget，最后一个效果仍在运行。这可以解释为什么整个图像被涂成蓝色。

一种解决方案是使用 SpriteBatch 的两个 Begin()/End() 通道，一个有效果，另一个没有。或者只是不使用单独的 RenderTarget 开始，这在这种情况下似乎毫无意义。

我也是像素着色器的初学者，所以只有我的 2c。

# iphone - 子视图外的 UIButton 可点击区域

> ID：10863913
> 
> 赞同：1
> 
> 时间：2012-06-02T16:10:09.173
> 
> 标签：iphone, objective-c, ios, ipad

所以我有一个 UIView，我称之为 ctrView，这个 ctrView 被添加到我的 UIViewController 的视图中。它基本上只是一个较小的矩形框架。我在这个容器视图的右上角添加了一个 UIButton，但是似乎在单击 ctrView 之外的 UIButton 区域时不会触发与按钮相关的操作。只有容器视图内的 UIButton 区域会触发操作。我该如何解决这个奇怪的问题？

```
UIButton *closeButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [closeButton setImage:[UIImage imageNamed:@"close.png"] forState:UIControlStateNormal];
    [closeButton setBackgroundColor:[UIColor clearColor]];
    [closeButton addTarget:self action:@selector(closeZoomedImageView) forControlEvents:UIControlEventTouchUpInside];
    [closeButton setCenter:CGPointMake(ctrView.frameX + ctrView.frameWidth - 30, ctrView.frameY - 15)];
    [ctrView addSubview:closeButton];
    [closeButton release]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:17:16.087

这是正常行为，父级边界之外的视图将不会收到触摸动作为了解决此问题，请重新排列视图，如下所示

*   主视图将足够大以容纳内部视图和关闭按钮，此视图的背景颜色将是清晰的颜色
*   内部视图将是具有普通视图的图像和/或内容的内部视图的视图

主视图将同时具有内部视图和关闭按钮作为其子视图主视图将足够大以容纳按钮主视图将具有清晰的颜色背景，这样它就不会影响布局

因此，您将在内部视图中添加当前拥有的所有视图，内部视图和按钮视图都将添加到主视图中

然后将主视图呈现给视图控制器

# jquery - 在多个 div 上组合 jquery .on()

> ID：10863914
> 
> 赞同：1
> 
> 时间：2012-06-02T16:10:13.947
> 
> 标签：jquery

**我有这个：**

```
$('#MyDiv1').on({

   mouseenter: function () { SomeFunction(); },
   mouseleave: function () { SomeOtherFunction(); }

}, '.SomeClass');

$('#MyDiv2').on({

   mouseenter: function () { SomeFunction(); },
   mouseleave: function () { SomeOtherFunction(); }

}, '.SomeClass'); 
```

`MyDiv1`基本上，处理程序对于和都是相同的`MyDiv2`。

我如何将它们合并到一个处理程序中？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:10:40.140

```
$('#MyDiv1, #MyDiv2').on({

   mouseenter: function () { SomeFunction(); },
   mouseleave: function () { SomeOtherFunction(); },

}, '.SomeClass'); 
```

# wpf - 列表框绑定

> ID：10863925
> 
> 赞同：1
> 
> 时间：2012-06-02T16:10:55.867
> 
> 标签：wpf, windows-phone-7

您好，我在将数据绑定到 Listbox 时遇到问题。简而言之……我想列出我所有的 Skydrive 文件。

我的 XAML

```
 <TextBlock Height="35" HorizontalAlignment="Left" Margin="9,6,0,0" Name="infoTextBlock" Text="" VerticalAlignment="Top" Width="Auto" />
            <my:SignInButton Name="signInButton1" ClientId="<correct ClientId>" Scopes="wl.signin wl.basic wl.skydrive" Branding="Windows" TextType="SignIn" SessionChanged="signInButton1_SessionChanged" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="198,-6,0,0" />
            <StackPanel Height="578" HorizontalAlignment="Left" Margin="10,50,0,0" Name="StackContentPanel" VerticalAlignment="Top" Width="440">
                <ListBox Height="465" Name="FileList" Width="380" ItemsSource="{Binding Files}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel> 
```

我的班级和cs。

```
 namespace EReader.ViewModel
    {
        public class File
        {
            public File()
            {}

            private string name;
            public string Name
            {
                get { return this.name; }
                set { this.name = value; }
            }

        }
    }

    public class FilesManager
    {
        public ObservableCollection<string> Files;

        public FilesManager()
        {
            Files = new ObservableCollection<string>();
        }

    }

namespace EReader
{
    public partial class MainPage : PhoneApplicationPage
    {
        private LiveConnectClient client;
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void signInButton1_SessionChanged(object sender, LiveConnectSessionChangedEventArgs e)
        {

            if (e.Status == LiveConnectSessionStatus.Connected)
            {

                client = new LiveConnectClient(e.Session);
                infoTextBlock.Text = "Signed in.";
                client.GetCompleted +=
                    new EventHandler<LiveOperationCompletedEventArgs>(OnGetCompleted);
                client.GetAsync("/me/skydrive/files/");
            }
            else
            {
                infoTextBlock.Text = "Not signed in.";
                client = null;
            }
        }

        void OnGetCompleted(object sender, LiveOperationCompletedEventArgs e)
        {
            //Gdy uda nam się podłaczyc do konta skydrive
            if (e.Error == null)
            {
                signInButton1.Visibility = System.Windows.Visibility.Collapsed;

                #region Nazwa użytkownika
                string firstName = "";
                string lastName = "";
                if (e.Result.ContainsKey("first_name") ||
                    e.Result.ContainsKey("last_name"))
                {
                    if (e.Result.ContainsKey("first_name"))
                    {
                        if (e.Result["first_name"] != null)
                        {
                            firstName = e.Result["first_name"].ToString();
                        }
                    }
                    if (e.Result.ContainsKey("last_name"))
                    {
                        if (e.Result["last_name"] != null)
                        {
                            lastName = e.Result["last_name"].ToString();
                        }
                    }
                    infoTextBlock.Text =
                        "Hello, " + firstName +" "+ lastName + "!";
                }
                else
                {
                    infoTextBlock.Text = "Hello, signed-in user!";
                }
                #endregion

                #region Wszyskite pliki

                List<object> data = (List<object>)e.Result["data"];

                FilesManager fileManager = new FilesManager();

                foreach (IDictionary<string,object> items in data)
                {
                    File file = new File();

                    file.Name= items["name"].ToString();

                    fileManager.Files.Add(file.Name);
                }

                FileList.ItemsSource = fileManager.Files;
                #endregion
            }
            else
            {
                infoTextBlock.Text = "Error calling API: " +
                    e.Error.ToString();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:22:20.847

`Files`必须是属性，而不是字段。

此外`{Binding Name}`必须`{Binding}`改为，因为字符串没有`Name`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:20:54.457

这必须是公共财产：

```
 public ObservableCollection<string> Files; 
```

应该

```
 public ObservableCollection<string> Files {get;set;} 
```

然后您的绑定将起作用

# python - python相对导入

> ID：10863929
> 
> 赞同：4
> 
> 时间：2012-06-02T16:12:24.103
> 
> 标签：python, import

我正在尝试在 python 中进行相对导入。但我无法理解语法，每次我在这里搜索它时，我都无法得到答案：

这是我的文件夹结构：

```
Root
    libraries
        mylibrary
        __init__
    projects
        project
            myproject.py 
```

我想使用相对路径导入“mylibrary”，这样做的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:20:27.917

您必须将目录添加到您的 python 路径。

```
import sys
sys.path.append("/libraries") 
```

但我认为最好将库放在需要它的项目的文件夹中，或者将它们安装到 sys.path 中已经存在的标准位置之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T16:20:35.827

我不认为它可以用一个简单的`import`声明来完成。我要做的是将相对路径附加到您的库文件夹中，`sys.path`如下所示：

```
import sys
sys.path.append('../../')
from libraries import mylibrary 
```

请注意，这仅在您从`projects/project`目录启动 python 解释器时才有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T18:25:33.027

不幸的是，相对进口存在混淆的根源。当您第一次了解它们时，您认为它们允许您使用一般的相对文件/目录路径来引用将要导入的单个文件。（或者至少，我是这么认为的。）事实上，它们只允许您*在 package*中使用相对路径。这意味着包中的某些模块在需要从同一个包中导入其他模块时可以使用相对导入语法。

在您的示例中， myproject.py 与 mylibrary 不在同一个包中，实际上不在任何包中，因此无法使用 myproject.py 内部的相对导入。相对导入不适用于这种情况。

你可以做几件事来获得你想要的效果。一种是将您的库放在系统站点包目录的子目录中。另一种是将 .PTH 文件放在系统站点包目录中，这些 .PTH 文件包含存储库的位置的路径。另一种方法是使用 PYTHONPATH 指向存储库的目录。

# opencv - 能够将 Mat 对象用作 IplImage 对象的最佳方法是什么，反之亦然？

> ID：10863933
> 
> 赞同：0
> 
> 时间：2012-06-02T16:12:44.040
> 
> 标签：opencv, iplimage

我对在 OpenCV 中使用 Mat 和 IplImage 对象感到非常困惑。我在这里阅读了很多问题和答案，但这两种类型我仍然遇到麻烦。

很多时候，我需要将它们相互转换，这就是让我迷失在这些转换中的原因。我知道和使用的函数有时会使用 IplImage 对象，有时会使用 Mat 对象。

例如，“cvThreshold”方法采用 IplImages，“threshold”方法采用 Mat 对象，这里没问题但“cvSmooth”方法仅适用于 IplImages，我找不到 Mat 对象的专用方法（有吗？），然后我不情愿地将 Mat 转换为 IplImage，然后在“cvSmooth”中使用，然后再次转换为 Mat。此时，如何将 Mat 对象与 cvSmooth 一起使用？我确信这不是处理此问题的正常方法，并且有更好的方法。也许我在理解这些类型时遗漏了一些东西。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:26:01.293

来电`cvSmooth`：

```
void callCvSmooth(cv::Mat srcmtx, cv::Mat dstmtx, int smooth_type,
      int param1, int param2, double param3, double param4 )
{
   IplImage src = srcmtx;
   IplImage dst = dstmtx;
   cvSmooth( &src, &dst, smooth_type, param1, param2, param3, param4 );
} 
```

但是，如果您查看`cvSmooth`实现，您会很容易找到 C++ 类似物：

```
CV_IMPL void
cvSmooth( const void* srcarr, void* dstarr, int smooth_type,
          int param1, int param2, double param3, double param4 )
{
    cv::Mat src = cv::cvarrToMat(srcarr), dst0 = cv::cvarrToMat(dstarr), dst = dst0;

    CV_Assert( dst.size() == src.size() &&
        (smooth_type == CV_BLUR_NO_SCALE || dst.type() == src.type()) );

    if( param2 <= 0 )
        param2 = param1;

    if( smooth_type == CV_BLUR || smooth_type == CV_BLUR_NO_SCALE )
        cv::boxFilter( src, dst, dst.depth(), cv::Size(param1, param2), cv::Point(-1,-1),
            smooth_type == CV_BLUR, cv::BORDER_REPLICATE );
    else if( smooth_type == CV_GAUSSIAN )
        cv::GaussianBlur( src, dst, cv::Size(param1, param2), param3, param4, cv::BORDER_REPLICATE );
    else if( smooth_type == CV_MEDIAN )
        cv::medianBlur( src, dst, param1 );
    else
        cv::bilateralFilter( src, dst, param1, param3, param4, cv::BORDER_REPLICATE );

    if( dst.data != dst0.data )
        CV_Error( CV_StsUnmatchedFormats, "The destination image does not have the proper type" );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:33:52.267

坚持两者之一。`cv::Mat`是 C++ 的方式。该类具有引用计数机制并处理所有垃圾收集过程。每个`cv*`函数都有对应`cv::*`的 C++ 版本（主要是 IMO）。

* * *

对于 cvSmooth 等效项，您可以使用`cv::GaussianBlur(..)`or`cv::medianBlur(..)`或`cv::blur(..)`。有很多变化。最好一如既往地查阅文档。`cvSmooth(..)`只是分为各种功能。

# ruby-on-rails - 将参数从控制器传递到模型条件

> ID：10863935
> 
> 赞同：0
> 
> 时间：2012-06-02T16:13:06.503
> 
> 标签：ruby-on-rails, activerecord

我正在尝试通过命名范围将参数绑定到联接。但出现错误。

这样做的正确方法是什么？

```
class Idea < ActiveRecord::Base

    #relations
    has_many :votes, :inverse_of => :idea
    has_one :has_voted, :class_name => 'Vote', :conditions => ['ip = :ip']

    # named scopes
    scope :with_vote, lambda {|ip| {
        :include => [:has_voted],
        # like this ??
        :conditions => [:has_voted => {:conditions => {:userIp => ip}} ] 
    }}

end 
```

`Idea.with_vote(request.ip).all`

我相信我需要模型中的条件定义才能出现在**JOIN的****ON**子句中，而不是出现在**WHERE 子句**中。

 ***** * *

**编辑**我正在尝试获取以下查询

```
select Ideas.*, Votes.* from Ideas 
left outer join Votes 
on Votes.Idea_id = Idea.id AND Votes.ip = {request.ip} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:32:51.573

我认为您不能在关联中使用不完全条件。如果我理解正确，你需要Idea有很多票并且投票记录request.ip和idea id。您希望范围检索您当前请求 ip 投票支持的所有想法。

```
class Idea
  has_many :votes

  scope :with_vote_from_ip, lambda {|ip| {
    :include => [:votes],
    :conditions => ['votes.ip = ?', ip] 
  }}
end 
```

但是如果你想要所有的想法，包括只从当前开始的投票，你需要在外部连接上附加额外的条件。我认为没有 sql 片段这是不可能的：

```
class Idea
  has_many :votes

  scope :with_vote_from_ip, lambda {|ip| {
    :joins => 'left outer join Votes on Votes.Idea_id = Idea.id AND Votes.ip = #{ip}' 
  }}
end 
```

现在`Idea.with_vote_from_ip(request.ip).all`应该可以工作了。****

# sql - 使用分组依据计数（属性）和计数（*）之间的差异

> ID：10863936
> 
> 赞同：3
> 
> 时间：2012-06-02T16:13:22.150
> 
> 标签：sql

我不明白将`count(*)`属性作为参数与计数之间的区别。
这里我举个例子：有两种关系：

```
project (id, name, number);
employee (ssn, name, surname);
working_on (employee_ssn,   project_id); 
```

与`employee_ssn`哪些引用`employee(ssn)`和`project_id`引用`project(id)`。
主键：`project(id)`, `employee(ssn)`, working_on ( `employee_ssn`, `project_id`)。
现在我必须为每个项目查找项目的 ID、名称和从事该项目的员工人数。
一个正确的解决方案（在书中找到）是这个：

```
select id, name, count (*)
from working_on join project on id=project_id
group by name, id 
```

我有，不明白为什么这个解决方案是有效的，不应该`count (*)`计算所有的元组？为什么以这种方式获得工作的确切员工数量？
我已经写了这个解决方案：

```
select id, name, count (employee_ssn)
from working_on join project on id=project_id
group by name, id 
```

解决方案是否等效？一般来说，使用and
有区别吗？您能否提供一个示例，说明这两种语法会产生不同的结果？`count (*)``count(attribute)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T16:20:53.987

从[文档](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count)中：

> *计数(expr)*
> 
> 返回语句检索的行*中非 expr*`NULL`值的计数。*`SELECT`*

 ** * *

> *COUNT(*)*有点不同，它返回检索到的行数的计数，无论它们是否包含`NULL`值。

换句话说：

`COUNT(expr)`将返回没有*expr*`NULL`值的行数。

 *`COUNT(*)`将返回返回的总行数。

您是否使用`GROUP BY`子句无关紧要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T16:16:42.523

`count(*)`将计算一个 NULL 并且`count(attribute)`不会。因此，当列中有 NULL 值时，将出现唯一的区别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T16:27:11.960

到目前为止，我发现了两个不同之处-

1.  正如上面提到的 eric，count(col) 不计算空值，而 count (*) 计算。

2.  它在连接查询中的行为不同。

考虑一个我需要加入员工和部门表的情况，我需要找到每个部门的员工数量。

2.a.

```
SELECT     DPT.ID 
,          COUNT(*) EMP_COUNT
FROM       DEPARTMENT DPT
INNER JOIN EMPLOYEE E
ON         DPT.ID = E.DEPARTMENT_ID
GROUP BY   DPT.ID; 
```

在上面的查询中，它不会返回那些雇员表 count=0 的记录。

2.b。

```
SELECT     DPT.ID 
,          COUNT(E.DEPARTMENT_ID) EMP_COUNT
FROM       DEPARTMENT DPT
INNER JOIN EMPLOYEE E
ON         DPT.ID = E.DEPARTMENT_ID
GROUP BY   DPT.ID; 
```

如果使用 count(E.DEPARTMENT_ID) 而不是 count(*)，这一次即使员工表 count=0 也会给出记录。

2.c。

```
SELECT     DPT.ID 
,          COUNT(DPT.ID) EMP_COUNT
FROM       DEPARTMENT DPT
INNER JOIN EMPLOYEE E
ON         DPT.ID = E.DEPARTMENT_ID
GROUP BY   DPT.ID; 
```

这是有趣的部分，当您使用 COUNT(DPT.ID) 时，由于 DPT.ID 是部门的列，这里再次记录员工表 count=0 的情况将不被考虑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-19T14:27:20.937

正如其他人所说，`COUNT(*)`将计算检索到的总行数，但是，`COUNT(attribute_name)`只会计算非空值的数量。实际上，它们都计算非空值的数量，但是，因为在关系数据库中不应该有行 - 元组 - 其所有值都为 NULL（它应该有一个不能为 NULL 的主键），所以`COUNT(*)`总是返回表的总行数-relation-构成，主键列的值个数-attribute-**

# javascript - JavaScript 动画卡住了，只会显示最终结果

> ID：10863941
> 
> 赞同：0
> 
> 时间：2012-06-02T16:14:18.643
> 
> 标签：javascript, performance

我试图摆弄并在 JavaScript 中创建一个小淡出函数，这就是我想出的：

```
function fadeOut(id, time){
  var elem = document.getElementById(id);
   elem.style.opacity = 1;
   var opc = 1;
   while(opc >= (1/time)){
      opc -= (1/time);
      console.log(opc);
      elem.style.opacity = opc;
   }
   elem.style.opacity = 0;
} 
```

但这不会“实时”显示 div 的不透明度，而是显示最终结果，即 opacity = 0;
我在这里测试过：

```
fadeOut("hello",10000);
document.getElementById("hello").style.opacity = 1;
fadeOut("hello",10000);
document.getElementById("hello").style.opacity = 1;
fadeOut("hello",10000);
document.getElementById("hello").style.opacity = 1; 
```

计算需要很长时间，只有当它完成时才会转储结果，
而不是无缝显示，在计算时，
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:16:37.000

您需要设置计时器，因为在您的函数完成并且事件处理程序可以运行之前，UI 不会更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T16:16:59.233

这是因为您没有“让出”线程以允许浏览器应用更改。

像这样使用 setTimeout(..) 代替：

```
function fadeOut(id, time){
   var elem = document.getElementById(id);
   if(opc >= (1/time)){
      opc -= (1/time);
      console.log(opc);
      elem.style.opacity = opc;
      setTimeout(function(){fadeOut(id,time);}, 100);
   }
   else
      elem.style.opacity = 0;
} 
```

不是一个很好的代码，但它给了你这个想法。

也许你可以使用[jQuery](http://jquery.com/)库。在这种情况下，您将使用[fadeOut](http://api.jquery.com/fadeOut/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T16:27:10.300

导致此问题的一种可能是事件冒泡。尝试使用 event.stopPropagation() 来防止事件（如果您使用 FadeOut 函数来响应事件）冒泡。

代码是

```
function StopBubble(e)
{   
    if (!e)
        e = window.event;

    e.cancelBubble = true; /* Microsoft */
    if (e.stopPropagation)
        e.stopPropagation(); /* W3C */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:25:46.707

为什么不使用像 jQuery 这样的 JavaScript 库？因为某些 JavaScript 代码与不同类型的浏览器不兼容。

在 jQuery 中，你可以使用这个：

```
$(".id").css("background","blue").fadeOut("slow"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T11:05:42.363

您必须在对 DOM 进行的每次修改之间指定延迟才能看到效果。javascript 中没有添加暂停功能的选项，因此您必须依赖计时器。有两种方法可以实现这一点。最常用的方法是 setInterval(fn,sec)。但是 setInterval 不好，因为它在每个指定的时间间隔执行回调，而不管之前的执行是否完成。

我个人建议使用库而不是重新发明轮子。但是对图书馆在幕后的工作有一个基本的了解总是好的。

下面是一个示例片段，无需 setInterval 即可实现此目的。

注意：这只是为了演示。不跨浏览器兼容。扩展它以实现可重用性和跨浏览器兼容性。

```
<div id="mydiv"></div>

function fadeOut() {

    var _timeOut,
        _proceed = true,
        _elm = document.getElementById( "mydiv" ),
        _opacity;

    function addOpacity() {

        // _elm.style.opacity will return empty string
        // see https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle
        // getComputedStyle() not cross broswer

        _opacity = +window.getComputedStyle( _elm, null ).getPropertyValue( "opacity" );
        if( _opacity > 0.1 ) {
            // a simple algorithm for basic animation
            _elm.style.opacity = _opacity / 2;
        } else {
            _elm.style.opacity = 0;
            _proceed = false;
        }
    }

    (function animate() {
        if( !_proceed ) {
            clearTimeout( _timeOut );
            return;
        }

        addOpacity();

        // unlike setInterval(), this approach waits for addOpacity() to complete before its executed again
        _timeOut = setTimeout( animate, 1000 );

    }());   

} 
```

# python - 在 Python 3 中识别某物的索引

> ID：10863946
> 
> 赞同：0
> 
> 时间：2012-06-02T16:15:52.550
> 
> 标签：python, string, indexing

我是python的新手，我想知道是否有办法识别python中某些东西的索引位置？

例如，如果我有一个由字母 az 组成的字符串，并且我要求用户输入一个字母，有没有办法让程序识别字母“f”在字母字符串中的索引为 5？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:17:06.840

你的意思是这样吗？

```
alpha = "abcdefghijkl..."
alpha.index("f") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T16:17:28.020

```
>>> 'asdfsadg'.index('f')
3 
```

# mysql - mysql替换字符串的一部分

> ID：10863948
> 
> 赞同：1
> 
> 时间：2012-06-02T16:16:04.130
> 
> 标签：mysql

我正在尝试在 mysql 中执行此操作。如何用 1000 条记录替换 MYSQL 中列中的部分字符串。将所有记录从 .JPG 更改为 .gif

例如。DC3444.JPG 到 DC3444.gif

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T16:18:09.227

```
update your_table 
set some_column = replace(some_column, '.JPG', '.gif') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T16:18:27.343

```
UPDATE table1 SET col1 = REPLACE(col1, '.JPG','.gif') 
```

将此用作参考：[http ://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)

# c# - 找不到类型或命名空间名称 GridViewHelper

> ID：10863950
> 
> 赞同：1
> 
> 时间：2012-06-02T16:16:12.697
> 
> 标签：c#, asp.net

拳头，我对 ASP.NET 和 Visual Web Developer Express 非常陌生。

我有一个数据网格，我想在其中显示小计并进行分组。

我发现这个[http://www.agrinei.com/gridviewhelper/gridviewhelper_en.htm](http://www.agrinei.com/gridviewhelper/gridviewhelper_en.htm)看起来很棒。我已将类文件添加到我的项目 App_code 文件夹并重新构建了项目。

但是当我尝试使用 GridViewHelper 时，我收到错误“找不到类型或命名空间名称 GridViewHelper”

尝试使用 GridViewHelper 添加；到我的页面顶部，但也有下划线和同样的错误。

那么如何告诉我的项目使用我添加的类？我认为这是一个非常愚蠢的问题，但我找不到答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:25:44.057

我从您提供的链接下载了源代码，我相信您无法添加它的原因是因为它不是实际的命名空间。

但是，在 app_code 中，他们提供了一个 GridViewHelper.cs，只要确保它在您自己的 app_code 文件中并且它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:58:59.377

在这里找到答案：[App_Code 文件夹在 VS 2010 中丢失](https://stackoverflow.com/questions/2277742/app-code-folder-is-missing-in-vs-2010)

> 因此，对于 Web 应用项目，您应该改为添加一个名为“CodeFolder”之类的文件夹，然后在其中添加您的类。然后右键单击该类文件的属性并将其构建配置设置为**compile 而不是 content**。

现在工作正常。

# android - 为 AlertDialog 中设置的布局内的按钮实现 onClick()

> ID：10863956
> 
> 赞同：0
> 
> 时间：2012-06-02T16:16:49.283
> 
> 标签：android, nullpointerexception, android-alertdialog, buttonclick

如果我的 Button 已初始化，我不知道为什么它会得到 NullPointerException。这是我的代码。希望大家能帮忙。谢谢

```
public boolean onOptionsItemSelected(MenuItem item)
{   switch (item.getItemId())
        {   
            case SEARCH:
                inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                AlertDialog.Builder search = new AlertDialog.Builder(this);
                search.setTitle(R.string.search);
                searchDialog = inflater.inflate(R.layout.search,null);
                search.setView(searchDialog);

                   //The problem should be here
                searchButton = (Button) findViewById(R.id.searchButton);
                   //R.id.searchButton is inside the layout, search.xml
                searchButton.setOnClickListener(new OnClickListener()
                {
                    @Override
                    public void onClick(View v)
                    {   //For testing
                        Toast.makeText(getApplicationContext(), 
                                "Search was clicked!", Toast.LENGTH_SHORT).show();
                    }
                });
                AlertDialog searchDialog = search.create();
                searchDialog.show();
                return true;
                .
                .
                . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:20:05.140

```
searchDialog = inflater.inflate(R.layout.search,null); 
```

上面的行已更改，并且要初始化按钮，您必须使用 view 的引用。

```
public boolean onOptionsItemSelected(MenuItem item)
{   switch (item.getItemId())
        {   
            case SEARCH:
                inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                AlertDialog.Builder search = new AlertDialog.Builder(YourActivity.this);
                search.setTitle(R.string.search);
                View view = inflater.inflate(R.layout.search,null);
                search.setView(view);

                   //The problem should be here
                searchButton = (Button)view.findViewById(R.id.searchButton);
                   //R.id.searchButton is inside the layout, search.xml
                searchButton.setOnClickListener(new OnClickListener()
                {
                    @Override
                    public void onClick(View v)
                    {   //For testing
                        Toast.makeText(getApplicationContext(), 
                                "Search was clicked!", Toast.LENGTH_SHORT).show();
                    }
                });
                AlertDialog searchDialog = search.create();
                searchDialog.show();
                return true;
                .
                .
                . 
```

# facebook - file_get_contents 不适用于 facebook graph api

> ID：10863959
> 
> 赞同：3
> 
> 时间：2012-06-02T16:17:02.303
> 
> 标签：facebook, facebook-graph-api, file-get-contents

file_get_contents 无法使用以下网址（无法打开流：HTTP 请求失败！HTTP/1.0 400 错误请求）

`$token_url = "https://graph.facebook.com/oauth/access_token?client_id=235326466577139&redirect_uri=http%3A%2F%2Fapps.facebook.com%2Flikeablephotos%2F&client_secret=CLIENT_SECRET&code=AQDFZbjpAUda8c_gz4wDDuBOVrsn0dApz3s8UA--7hFQIi1wb70-tDE56xXcCtDq-hV5UWzR5YEw_ozuGT24FLfvh9KnqHZ3xdn46P_KxYCf3DHJQA3AAu2ICHBqTk1-6fHTsl6FbagKz83H6dn15kkbKksajA4KcVIoPse5JbuBLlh6V5L1ANe8fzR94iH_SMU"`;

```
$response = file_get_contents($token_url); 
```

但是如果您将上面的 URL 复制并粘贴到浏览器地址栏中，它就可以正常工作！并返回：

```
access_token=AAADWBzZAyUvMBAL2Th6CRtxh2Up5soTCK8N4HJcy0ZBhQgJPxtZArKbuITISMoGLDxNiyeNW4GUZCBvJPeBTH6mx4v83ueUIAAYQJA1WrAZDZD&expires=5112501 
```

但他的类似 URL（对于不同的用户）也适用：

```
$token_url = "https://graph.facebook.com/oauth/access_token?client_id=235326466577139&redirect_uri=http%3A%2F%2Fapps.facebook.com%2Flikeablephotos%2F&client_secret=CLIENT_SECRET&code=AQC2kTEV96-1Cki2oYUhyzjH6yFe6AJRd1Q3G8fbUXW-IsLJUlactzSwCvGVBK6jh1tL-t7v6dOWJZzbkSYhk0n2z6BHQcpljWAdoXFGB5zLC4FgW8fmxT6hwdRIQOr2dZ95CD_q5yJuOUz_2DItUa3_FF9m2_TmFYGEbxPoiaF47YSTUuZp6g-8ffziJcKDAdo"; 
```

使用时`file_get_contents`

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T18:39:30.813

作为 file_get_contents 的替代方案，您是否考虑过使用 cURL。我对很多请求使用 curl 并取得了很好的效果，并且在失败时它不会暴露您的客户端机密。

参考[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

此代码段是我所有应用程序获取应用程序访问令牌的标准。可用于所有 api 调用。

* * *

```
$app_access_token = GetCH();
function GetCH(){
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
if(substr($url,0,8)=='https://'){
    // The following ensures SSL always works. A little detail:
    // SSL does two things at once:
    //  1\. it encrypts communication
    //  2\. it ensures the target party is who it claims to be.
    // In short, if the following code is allowed, CURL won't check if the 
    // certificate is known and valid, however, it still encrypts communication.
    curl_setopt($ch,CURLOPT_HTTPAUTH,CURLAUTH_ANY);
    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
}
$sendCH = curl_exec($ch);
curl_close($ch);
return $sendCH;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T00:47:15.347

终于找到了答案，有同样的问题..问题很可能是因为他们给你的 facebook 代码在参数之间有空格。如果您只是从 Facebook 复制和粘贴，您将收到 HTTP/1.1 400 Bad Request 错误。将所有参数放在一行上并删除所有空格，这应该可以解决它。为我工作。我知道这是一篇较旧的帖子，但如果您遇到此问题，请告诉我它是否适合您！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T13:44:44.953

对于调试：

将 $token_url 中的实际字符串粘贴到浏览器地址字段中，看看会发生什么。

你会得到一些 json 错误代码。

对我来说，这是我的令牌已过期。开始新的请求工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T08:09:20.813

同样的问题发生在我身上，问题是 URL 提供的访问令牌已过期，因为访问令牌有 1 小时的有效期，所以我创建了一个新的访问令牌，它再次工作，希望这个信息有帮助。

# android - Android MediaPlayer 导致无响应错误 - 发布未按预期工作

> ID：10863962
> 
> 赞同：0
> 
> 时间：2012-06-02T16:17:06.037
> 
> 标签：android, resources, media-player, release, android-mediaplayer

我正在制作一个 Android 游戏应用程序，你从小鱼开始，你需要吃小鱼。每次你吃一条小鱼（靠着它们游泳），就会发出声音。这是播放声音的代码：

```
mp = MediaPlayer.create(GobbleFishGame.this, R.raw.bite);
                if (!mPlaySound) {
                    return;
                }
mp.start();
MPRelease(); 
```

这对最初的几条鱼很有效。但是在吃了一些鱼后（数量不同，但大约是 8-11 条鱼），游戏突然停止，我得到“Activity GobbleFish（在应用程序 GobbleFish 中）没有响应”。错误。我认为这与分配给 MediaPlayer 的资源过多有关，因此我创建了一个 sub 来释放 mp 的资源，然后创建一个新的 MediaPlayer mp（每次吃鱼时都会调用这个 sub）。这是子的代码：

```
private void MPRelease(){
        MPReleaseCount += 1;
        if(MPReleaseCount==5){
            mp.release();
            mp = new MediaPlayer();
            //mp = MediaPlayer.create(GobbleFishGame.this, R.raw.bite);

            //mp.reset();

            MPReleaseCount=0;
        }
    } 
```

当 MPReleaseCount 为 5 时，mp 被释放并重新创建（因此在吃掉 5 条鱼后）。我希望这会奏效，但事实并非如此。我仍然有一些鱼被吃掉后的问题（上次是 17 条鱼，所以 MPRelease 应该已经调用了 3 次），我得到“没有响应”错误，我必须强制关闭或等待。

谁能告诉我如何做到这一点来释放资源？因为我认为这就是问题所在。我真的无法判断这是否是问题所在，因为我在 Eclipse 中的 LogCat 中没有收到任何错误消息。由于“未响应”错误，在强制关闭应用程序后，我确实收到了此错误报告：

```
ANR in (my activity)
Reason: keyDispatchingTimedOut 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:11:40.007

不要在每次使用 MediaPlayer 时发布和创建它。使用您的音频源创建一次并`seekTo(0)`在`OnCompletionListener()`. 然后再玩一次。

另请查看`SoundPool` [http://developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)，它是为像您这样的用例而制作的，您必须多次播放相同的音频。它存储音频并按需播放。与 MediaPLayer 相比，您的音频延迟也更低。

# php - 无法重新分配 $this 变量

> ID：10863971
> 
> 赞同：1
> 
> 时间：2012-06-02T16:18:36.767
> 
> 标签：php, codeigniter

我试图弄清楚为什么我会为公共函数 isUsernameAvailable($this->input->post('username')) 行重新分配 $this 错误消息。我查看了我的代码，但找不到我不能这样做的原因。该函数用于将 json 发送到 php 的 post jquery 函数。

```
public function isUsernameAvailable($username)
{
    if ($this->usersmodel->isUsernameAvailable($username))
    {
        echo '{"username":"found"}';
    }
    else
    {
        echo '{"username":"notfound"}';
    }        
} 
```

jQuery

```
$('#username').blur(function(){
    $.post('register/isUsernameAvailable', {"username":$(this).val()}, function(data){if(data.username == "found"){alert('username already in use');}}, 'json');
}); 
```

有任何想法吗？

**更新 ：**

我试图找出这是否真的是 PHP 问题或 jQuery 问题。

在它发出 POST 请求后，它会将其作为参数发送：

用户名 testusername

在回复中，我得到了这个：

遇到 PHP 错误

严重性：警告

消息：Register::isUsernameAvailable() 缺少参数 1

文件名：控制器/register.php

行号：118

遇到 PHP 错误

严重性：通知

消息：未定义变量：用户名

文件名：控制器/register.php

行号：120

{“用户名”：“未找到”}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:20:19.383

`$this`不能被覆盖，它是对您所在对象的引用。如果您可以覆盖它，您将丢失该对象。

在您的代码中，您有一行

```
public function isUsernameAvailable($this->input->post('username')) 
```

这将导致函数的`isUsernameAvailable`第一个参数是 name `$this->input->post('username')`。这将导致`$this`在函数范围内的那将被覆盖。

# objective-c - 如何阻止 UIButton 的 imageView 在按下时发生变化？

> ID：10863973
> 
> 赞同：0
> 
> 时间：2012-06-02T16:19:14.850
> 
> 标签：objective-c, ios, xcode, button, uistoryboard

我有一个方法可以设置故事板放置的 UIButton 的 imageView 属性。设置后，它看起来很好。但是，当点击按钮时，它的高亮状态会将 imageView 的图像属性更改回旧图像。我该如何阻止这种情况发生？这是我的方法：

```
- (void)setThumbButtonPhoto:(UIImage *)image
{
   // profilePhoto is an IBOutlet property of class UIButton pointing to the 
   // UIButton on my storyboard.

   // Button image is changed correctly here
    profilePhoto.imageView.image = image;

    // But then mysteriously changed back to the old image when tapped.
    // The following commented out lines I have all tried (one at a time of course)
    // and none have solved my problem -->

    // [profilePhoto.imageView setHighlightedImage:nil];
    // profilePhoto.imageView.highlightedImage = image;
    // profilePhoto.adjustsImageWhenHighlighted = NO;
    // [profilePhoto setBackgroundImage:image forState:UIControlStateHighlighted];
    // [profilePhoto setImage:image forState:UIControlStateNormal];
    // [profilePhoto setImage:image forState:UIControlStateHighlighted];
    // [profilePhoto setImage:image forState:UIControlStateSelected];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:25:58.297

您应该使用此方法在按钮上正确设置图像： `- (void)setImage:(UIImage *)image forState:(UIControlState)state`

所以：

```
[profilePhoto setImage:image forState:UIControlStateNormal];
[profilePhoto setImage:image forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:21:40.510

使用 UIImageView 来保存图像

并放置一个自定义模式 UIButton，无文字、无图像、无背景；在它下面

# django - 在 Django 中删除并重新创建旧表

> ID：10863975
> 
> 赞同：0
> 
> 时间：2012-06-02T16:19:32.430
> 
> 标签：django, django-models, django-syncdb

我正处于开发的初始阶段，模型正在发生很大变化。
我必须继续删除旧表，然后执行“syncdb”

虽然我很欣赏 syncdb 不改变旧表的原因，

## 是否可以（或有其他选择）自动删除旧表然后运行syncdb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:44:36.307

我通常这样做的方式是在数据库级别。例如，如果您正在使用 postgres，并且只是想吹走整个数据库以重新开始，您可以这样做：

```
dropdb -U postgres "dbname"
createdb -U postgres -O "db_user" "db_name" 
```

对于我正在进行的长期项目，我使用[fabfile](http://fabfile.org)来自动执行上述任务，以及从我的生产服务器获取最新的数据库，并覆盖我的本地开发数据库。

此外，相关的是数据库“迁移”，当您在生产环境中运行一段时间后更改代码时，这将成为一项要求。很多人/应用程序使用[South](http://south.aeracode.org/)，但我更喜欢[Nashvegas](http://paltman.com/2009/02/24/nashvegas-a-simple-django-migration-tool/)作为我的网站。

使用 Nashvegas，我将创建一个 0001_add_field_blah.sql 文件，其中包含用于更改数据库的原始 SQL 命令。例如：

```
ALTER TABLE myapp_model RENAME COLUMN first_name TO given_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:25:53.077

我用`python manage.py reset <app>`. 我不认为有办法在整个项目范围内做到这一点。

# c# - 将一个控件的宽度分配给另一个，asp.net

> ID：10863982
> 
> 赞同：0
> 
> 时间：2012-06-02T16:20:42.457
> 
> 标签：c#, asp.net

假设我们有控件 c1 和 c2

我希望 c2 的宽度为 c1 （c1 没有固定，它应该自动拉伸）。

```
c2.Width = c1.Width;
c2.Width = c1.Width.Value; 
```

这些都行不通。

这可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:25:06.477

你在哪里运行该代码？当您分配宽度时，它将在您运行代码时分配值。这是一个赋值的例子。如果您希望 C2 在 c1 调整大小时调整大小，则需要在每次 C1 更改时分配它。您可以在控件的[调整大小](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resize.aspx)事件中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:48:30.243

你可以按照这种方式

c2.Size = 新尺寸(c1.width, c2.height)

还请确保在设置新大小之前已将 Control.AutoSize 属性设置为 false。如果为“true”，它不会自行调整大小。

此外，像 TextBox 这样的一些控件没有 AutoSize 属性，因此无法根据需要调整大小。只有TextBox的宽度可以成功重置。

具体控件的 AutoSize 属性的更多信息，请参考其 MSDN 文档。

谢谢。

# c - 如果您使用 C 库，D 是否与 C 向后兼容？

> ID：10863988
> 
> 赞同：7
> 
> 时间：2012-06-02T16:21:48.483
> 
> 标签：c, d, backwards-compatibility, phobos

如果我导入 std.c 库而不是将库包含在 C 中，C 代码是否会使用 D 编译器编译，或者是否存在其他后置词兼容性问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T16:27:38.227

D 中的一些细微之处会使 C 代码的行为与您可能希望的不同。例如，整数提升规则并不完全相同（但几乎相同），并且初始化规则不同（例如，浮点值——包括此类数组——被初始化为 NaN）。此外，最近不推荐使用 C 函数指针语法，因此您可能必须将某些 C 类型语法转换为等效的 D 语法。

不过，总的来说，我们非常关注向后兼容性，并且*大多数*C 代码应该在 D 中编译得很好（或只需要很少的更改），其语义与在 C 中相同。

另请注意，`std.c`已弃用；请`core.stdc`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T19:41:53.687

您的问题与您在 OP 正文中提出的问题不同。

Q1：*如果您使用 C 库，D 是否向后兼容 C？*

答：是的。您可以使用 C 库。更多关于[这里](http://dlang.org/interfaceToC.html)的信息。

Q2：*C 代码可以用 D 编译器编译吗？*

答：D 编译器的实现从未打算编译 C 代码。*[但是，由于 D匹配 C 编译器的数据类型、布局和函数调用/返回序列，](http://dlang.org/interfaceToC.html)*因此可以编译大量 C 代码。正如 Zor 指出的[C-style function pointer syntax](http://dlang.org/deprecate#C-style%20function%20pointers)，而[C-style array pointer syntax](http://dlang.org/deprecate#C-style%20array%20pointers)已被弃用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T04:43:06.653

您永远无法获取 C 或 C++ 文件并编译为 D 代码，并且您不能只`#include`在 D 中使用 C 头文件。D*不*向后兼容 C 或 C++。相反，可以`extern(C)`在您的 D 代码中声明函数并调用这些 C 函数，就好像它们是 D 函数一样（自然，您必须与定义它们的 C 库链接）。看

*   [与 C 接口](http://dlang.org/interfaceToC.html)
*   [与 C++ 的接口](http://dlang.org/cpp_interface.html)
*   [将 Ch 文件转换为 D 模块](http://dlang.org/htomodule.html)

有关从 D 调用 C 代码的详细信息。

druntime（其中包含 core.* 模块）声明了相当多的标准 C 和 OS 函数（在 core.stdc.* 和 core.sys.* 模块中），但您必须查看 druntime自己归档以查看它们是什么，因为此时它们没有正确记录。对于您要调用的任何其他 C 函数，您可以轻松地自己为它们创建声明，如上面的链接中所述。

Now, C and D are very similar syntactically, so some sections of C code will compile just fine as D code, but programs as a whole will not. The general rule is that C/C++ code will either compile as valid D code with the same semantics, or it won't compile as D code. There are a few cases where that isn't true (e.g. static arrays are value types in D, unlike C/C++), but it is in almost all cases. This makes *porting* C/C++ code to D fairly easy, but it was never intended that D be backwards compatible with C code in the way that C++ is.

# meteor - 如何处理流星中的关键事件？

> ID：10863990
> 
> 赞同：5
> 
> 时间：2012-06-02T16:22:07.203
> 
> 标签：meteor

根据文档，我应该能够像处理事件一样处理关键事件`keypress`，`click`但我觉得我错过了一些东西。

我做了以下事情：

```
> meteor create keypressTest
> cd keypressTest
> sed -e 's/click input/keypress body/' -i .bak keypressTest.js
> meteor 
```

但是当我按下按键时，控制台中没有任何显示，就像处理单击事件时那样。

有没有在流星中工作密钥处理的例子？我知道我可以在 jquery 中做一个解决方法，但如果可以的话，我更愿意坚持使用干净的模板事件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T23:36:47.997

请注意，[不推荐](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-keypress)使用 keypress ，您可能希望使用[textinput](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-textinput)代替。

但是我确实注意到`keydown`并且`keyup`没有被弃用，因此使用其中之一可能比使用更可靠`keypress`。请注意，文档指定了顺序：

1.  `keydown`
2.  `keypress`
3.  `keyup`

如果你想对媒体采取行动，你可以使用`keydown`; 如果您想对电梯采取行动，请使用`keyup`. 我更喜欢后者，因为它仍然允许您通过在解除按键之前切换到另一个应用程序来取消按键...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T04:51:58.490

我可以找到我的“按键”事件

```
Template.myTemplate.events({
    'keypress input': function(e) { console.log('key', e); }
}); 
```

或者在一个更有用的例子中

```
Template.myTemplate.events({
      'keyup input': function(event) {
      if (event.which === 13) {
         alert('you hit enter');
         event.stopPropagation();
         return false;
      }
   },
    ... 
```

@tom，我在 textinput 上没有得到任何东西 :(

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T13:40:10.477

我错过了在事件映射中使用关键事件的这两个要求：

1.  事件目标必须包含在模板中（与其他事件相同）
2.  事件目标必须是可以输入的输入元素

第二点似乎与单击一致，因为 a`click *`仅在单击按钮时触发，而不是在模板中包含的问候文本上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-26T20:10:54.743

Enter 将返回一个`event.charCode = 0`，而不是使用`event.keyCode`它将返回 13。

```
'keypress input': function(event) {
    if (event.keyCode == 13) {
        alert('you hit enter');
        event.stopPropagation();
        return false;
    }
} 
```

# web-services - 如何使用一些金融 API 获得 x 最有价值的公司？

> ID：10863991
> 
> 赞同：0
> 
> 时间：2012-06-02T16:22:17.530
> 
> 标签：web-services, api, finance

我需要找到一个允许我检索以下类型数据的 Web 服务：

30 家最有价值的公司，以及每家公司的以下信息：

*   公司名称、符号、州和邮政编码
*   股票的当前市场价格
*   自昨天收市以来股票价格的变化。
*   股票的贝塔值

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:06:10.740

我希望从福布斯获得这些信息。正如史蒂夫建议的那样，您应该从[xignite.com](http://xignite.com)获得它。显然，福布斯通过他们提供他们的数据： [http ://www.xignite.com/News/PressRelease.aspx?articleid=86](http://www.xignite.com/News/PressRelease.aspx?articleid=86)

您还可以查看雅虎财经：[http](http://www.gummy-stuff.org/Yahoo-data.htm) ://www.gummy-stuff.org/Yahoo-data.htm 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:25:57.220

这里有一些[例子](http://www.google.com/finance?start=0&num=30&q=%5B%28exchange%20%3D%3D%20%22NASDAQ%22%29%20%26%20%28market_cap%20%3E%3D%2048.99%29%20%26%20%28market_cap%20%3C%3D%20524570000000.00006%29%20%26%20%28last_price%20%3E%3D%200%29%20%26%20%28last_price%20%3C%3D%201157%29%20%26%20%28change_today_percent%20%3E%3D%20-101%29%20%26%20%28change_today_percent%20%3C%3D%20408%29%20%26%20%28beta%20%3E%3D%20-3.19%29%20%26%20%28beta%20%3C%3D%205.36%29%5D&restype=company&output=json&noIL=1&sortas=MarketCap)这不是官方的 API，也没有文档。

# javascript - 更改页面标题的输入框

> ID：10863994
> 
> 赞同：-1
> 
> 时间：2012-06-02T16:23:00.277
> 
> 标签：javascript, html

我希望在 iframe 中创建一个输入框，以更改 iframe 所在页面的标题。谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:32:51.950

```
 <input type="text" name="name" id="title" value="start typeing" />

<script type="text/javascript">
        document.getElementById('title').onkeyup = myFun;
        function myFun() {
            window.parent.document.title = this.value;
        };
    </script> 
```

这对我来说很完美。将输入标签和脚本放入 iFrame 的文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:26:15.517

采用 `window.parent.document.title=$("#textboxId").val()`

# php - CakePHP 2.1 中错误的自定义视图

> ID：10863997
> 
> 赞同：8
> 
> 时间：2012-06-02T16:23:40.603
> 
> 标签：php, cakephp

我正在寻找为 CakePHP 2.1 中的错误创建自定义视图

我一直在这里阅读以下问题：[CakePHP 2.0 - 如何制作自定义错误页面？](https://stackoverflow.com/questions/9620363/cakephp-2-0-how-to-make-custom-error-pages)

但是有些东西不能按预期工作！

1.) 异常和错误似乎不是一回事，就好像我去一个虚假的 url 我得到了内置的 404 页面但是如果我在控制器中手动执行一个未找到的异常，它将调用自定义视图...为什么是这样？我认为 Cake 中的所有错误都经历了异常？

2.）我正在尝试渲染视图而不是实际重定向用户......例如：

```
App::uses('ExceptionRenderer', 'Error');

class AppExceptionRenderer extends ExceptionRenderer {
    public function notFound($error) {
        $this->controller->redirect(array('controller' => 'errors', 'action' => 'error404'));
    }
} 
```

而不是那个重定向我正在尝试：

```
$this->controller->layout = null;
$this->controller->render('/Errors/error404'); 
```

但我最终得到的只是一个空白页......这是为什么呢？这只发生在手动异常时？

请问有人能回答这两个问题吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T21:21:46.663

我终于设法弄清楚了！查看来自[github](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Error/ExceptionRenderer.php)的代码，我设法让它工作。这是我的 AppExceptionRenderer.php：

```
App::uses('ExceptionRenderer', 'Error');

class AppExceptionRenderer extends ExceptionRenderer {
    public function missingController($error) {
        $this->controller->render('/Errors/error404', 'layout');
        $this->controller->response->send();
    }

    public function missingAction($error) {
        $this->missingController($error);
    }
} 
```

如果你想调用你的控制器回调，你必须在 beforeFilter() 之前做这样的事情：

```
$this->controller->beforeFilter(); 
```

那 $this->controller->response->send(); 线是踢球者。希望这对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T04:27:26.210

这很简单，

```
public function notFound($error) {
    $this->_outputMessage('error404');
} 
```

这就是你需要做的一切

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T12:48:33.547

简单地：

```
throw new NotFoundException; 
```

请参阅有关“内置异常”的文档中的[示例代码。](http://book.cakephp.org/2.0/en/development/exceptions.html#built-in-exceptions-for-cakephp)

`App::uses('ExceptionRenderer', 'Error');`不应该是必需的。

对于单个视图编辑`View/Errors/error400.ctp`。

# ruby-on-rails - Rails 3 - 依赖 => :delete_all 不起作用。为什么？

> ID：10863999
> 
> 赞同：1
> 
> 时间：2012-06-02T16:23:54.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql

我的项目中很少有模型。其中有一些：`Qualification`和`Curriculum`。`Qualification`有孩子（课程）。我想确保当我删除时我会`Qualification`删除它的所有孩子。这是我的代码：

```
# Table name: qualifications
#
#  id         :integer         not null, primary key
#  subject_id :integer
#  teacher_id :integer
#  created_at :datetime        not null
#  updated_at :datetime        not null
class Qualification < ActiveRecord::Base
  belongs_to :subject
  belongs_to :teacher

  has_many :curriculums, :dependent => :delete_all
  has_many :school_classes, :through => :curriculums
end

#  id               :integer         not null, primary key
#  school_class_id  :integer
#  qualification_id :integer
#  created_at       :datetime        not null
#  updated_at       :datetime        not null
class Curriculum < ActiveRecord::Base
  belongs_to :school_class
  belongs_to :qualification

  has_one :result

  has_many :timetables
end 
```

如您所见，我尝试`:dependent => :delete_all`在 Qualification 模型中使用。但它不起作用。为什么？

**升级版：**

我在编辑时通过取消选中复选框来删除资格：

```
<div class="control-group"> 
  <%= f.label :subject_ids, "Teacher can teach such subjects in the school", 
              :class => "control-label" %>               

  <div class="controls">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Choose</th>
          <th>Subject</th>
        </tr>
      </thead>
      <tbody>
        <%= hidden_field_tag "teacher[subject_ids][]", nil %>                         <%# We use hidden field because it doesn't submit unchecked fields. So, we pass nil and nothing will be submitted.%>

        <% @subjects.each do |subject| %>                                             
          <tr>                                                                        
            <td>                                                                      
              <%= check_box_tag "teacher[subject_ids][]",                             # [] brackets tells that this is array.
                                subject.id,                                           # Value of checkbox.
                                @teacher.subject_ids.include?(subject.id),            # Here we automatically check checkboxes.
                                id: dom_id( subject ) %>                              <%# Give unique id for each value. 'dom_id' is Rails helper. We will have ids like: 'subject_1', 'subject_2' and etc. %>
            </td>                                                                     
            <td>                                                                      
              <%= label_tag dom_id( subject ), subject.subject_name %>                <%# Put name of subject. %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
 </div> 
```

这是更多信息：

```
class Teacher < ActiveRecord::Base  
  has_many :qualifications
  has_many :subjects, :through => :qualifications
end

class Subject < ActiveRecord::Base
  has_many :qualifications
  has_many :teachers, :through => :qualifications  
end 
```

这是我更新模型时的 SQL 代码：

```
Started PUT "/teachers/2" for 127.0.0.1 at 2012-06-03 18:34:44 +0400
Processing by TeachersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ZJNNV9/TO6k18O1Ar1kpkU+PWbd7btHm9Tc067iMNO4=", "teacher"=>{"teacher_last_name"=>"Last", "teacher_first_name"=>"First", "teacher_middle_name"=>"Middle", "teacher_sex"=>"m", "teacher_birthday"=>"1980-12-01", "teacher_phone_attributes"=>{"teacher_mobile_number"=>"88283686", "teacher_home_number"=>"5112787", "id"=>"2"}, "teacher_education_attributes"=>{"teacher_education_university"=>"Mmm", "teacher_education_year"=>"1970-01-01", "teacher_education_graduation"=>"Graduated", "teacher_education_speciality"=>"Math", "id"=>"2"}, "teacher_category"=>"1st", "subject_ids"=>["", "4", "3", "1"]}, "commit"=>"Update", "id"=>"2"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  Teacher Load (0.4ms)  SELECT "teachers".* FROM "teachers" WHERE "teachers"."id" = $1 LIMIT 1  [["id", "2"]]
   (0.1ms)  BEGIN
  Subject Load (0.5ms)  SELECT "subjects".* FROM "subjects" WHERE "subjects"."id" IN (4, 3, 1)
  Subject Load (0.5ms)  SELECT "subjects".* FROM "subjects" INNER JOIN "qualifications" ON "subjects"."id" = "qualifications"."subject_id" WHERE "qualifications"."teacher_id" = 2
  SQL (0.4ms)  DELETE FROM "qualifications" WHERE "qualifications"."teacher_id" = 2 AND "qualifications"."subject_id" = 2
  TeacherPhone Load (0.4ms)  SELECT "teacher_phones".* FROM "teacher_phones" WHERE "teacher_phones"."teacher_id" = 2 LIMIT 1
  TeacherEducation Load (0.4ms)  SELECT "teacher_educations".* FROM "teacher_educations" WHERE "teacher_educations"."teacher_id" = 2 LIMIT 1
   (24.1ms)  COMMIT
Redirected to http://0.0.0.0:3000/teachers
Completed 302 Found in 57ms (ActiveRecord: 27.2ms) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:34:12.393

尝试：

```
:dependent => :destroy 
```

代替`:dependent => :delete_all`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T04:52:32.363

不确定这是否是您正在做的，但我可以使用 :dependent => :delete_all 删除家属

我没有使用删除，而是在我的控制器中使用了销毁。

示例：而不是：Qualification.delete(params[:id])

```
 Use this:
         Qualification.destroy(params[:id]) 
```

希望这可以帮助。=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T05:09:44.143

“rails 3 way”说 -

（第 187 页）清除

通过清除外键字段以事务方式从该关联中删除所有记录（请参阅删除）。如果关联配置了 :dependent 选项设置为 :delete_all，则它调用 delete_all。同样，如果 :dependent 选项设置为 :destroy_all，则调用 destroy_all 方法。

delete(*records) 和删除—全部

delete 和 delete_all 方法分别用于切断指定的关联或所有关联。这两种方法都是事务性的。值得注意的是，出于性能原因，调用 delete_all 首先将关联对象的整个集合加载到内存中以获取它们的 ID。然后它执行一个 SQL UPDATE 将所有当前关联对象的外键设置为 nil，从而有效地将它们与其父对象解除关联。由于它将整个关联加载到内存中，因此不建议将此方法用于关联对象的极大集合。

笔记

delete 和 delete_all 方法的名称可能会产生误导。默认情况下，它们不会从数据库中删除任何内容——它们只会通过清除关联记录的外键字段来切断关联。此行为与 :dependent 选项有关，该选项默认为 :nullify。如果关联配置的 :dependent 选项设置为 :delete 或 :destroy，那么关联的记录实际上会从数据库中删除。

:dependent => :destroy 或 :delete

根据选项的值，指定关联所有者记录应该被销毁或从数据库中删除的规则。触发时， :destroy 将调用依赖的回调，而 :delete 不会。

在 has_one / belongs_to 配对中使用此选项可能有意义。但是，您不太可能希望在 has_many / belongs_to 关系上出现这种行为；以这种方式编码似乎没有意义。此外，如果所有者记录在相应的 has_many 关联上设置了其 :dependent 选项，则销毁一个关联记录将产生破坏其所有同级记录的连锁反应。