# StackOverflow 问答 12032000-12032999

# android - 将表条目绑定到 SQLite 数据库中的 Spinner

> ID：12032006
> 
> 赞同：3
> 
> 时间：2012-08-20T03:32:54.557
> 
> 标签：android, android-sqlite

我在我的 SQLiteDatabase 中创建了一个名为 Blood Group 的表。我已将表中的所有数据检索到 logcat 但我无法将数据绑定到 Spinner。

```
ArrayAdapter spinnerAdapter = new ArrayAdapter(this,
            android.R.layout.simple_spinner_item, yourListFromDB);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    yourSpinner.setAdapter(spinnerAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:22:04.653

最后我找到了替代答案：

```
 ArrayAdapter spinnerAdapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, yourListFromDB);
    String bloodgroups[]={ "O +ve", "A+ve","B+ve","AB+ve"};
          spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item,bloodgroups);
            yourSpinner.setAdapter(spinnerAdapter); 
```

# actionscript-3 - Detecting Objects in a radius

> ID：12032007
> 
> 赞同：1
> 
> 时间：2012-08-20T03:33:10.473
> 
> 标签：actionscript-3, object, distance, detect

I need to have a point check for objects around it based on distance, and it is not possible to determine what will be on the stage at any given time, so I cannot just trace everything that would near it.

How would I do this so it can also detect what the nearby object is, in addition to detecting the object?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:32:24.963

使用毕达哥拉斯，就像在这个例子中：

[http://www.fepstudio.org/forum/tutorials/501-pythagorean-theorem-actionscript-3-0-a.html](http://www.flepstudio.org/forum/tutorials/501-pythagorean-theorem-actionscript-3-0-a.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:12:04.610

我不确定您将在任何时候在屏幕上显示多少对象，但是如何循环浏览电影剪辑/舞台中的所有孩子并检查每个孩子。就像是-

```
function prox(limit:int):MovieClip{
    for(var i:int = 0; i<stage.numChildren;i++)
        if(Math.abs(MovieClip(stage.getChildAt(i)).x - point.x) < limit && 
           Math.abs(MovieClip(stage.getChildAt(i)).y - point.y) < limit){
            return MovieClip(stage.getChildAt(i));
        }
    }
} 
```

或者您可以通过更改返回类型将其扩展为返回一个 MovieClips 数组

```
function prox(limit:int):Array{ 
```

添加一个数组 var 并将 if 中的代码更改为

```
array.push(MovieClip(stage.getChildAt(i)); 
```

和

```
return array; 
```

# iphone - CCVideoPlayer play movie finished get Screen flicker,what's wrong with it?

> ID：12032011
> 
> 赞同：1
> 
> 时间：2012-08-20T03:34:19.150
> 
> 标签：iphone, ios, ipad, cocos2d-iphone, ccvideoplayer

I use CCVideoPlayer to play video. and when video finished the screen sometime get a Screen flicker. it look like the videoView quit animation.

Does someone know what's wrong with it?

```
- ( void ) moviePlaybackFinished
{
    CCLOG(@ "moviePlaybackFinished" );

    NSString * className =  [PublicApi readSceneClassName];
    id aClass = NSClassFromString(className);
    if(aClass!=nil)
    {
     if([aClass respondsToSelector:@selector(moviePlaybackFinished: ResArr: Menu:      MovieNum:)])
    {

}

self.movieNum++;
} 

- ( void ) movieStartsPlaying
{
    CCLOG(@ "movieStartsPlaying" );
} 

#ifdef __IPHONE_OS_VERSION_MAX_ALLOWED
// Updates orientation of CCVideoPlayer. Called from SharedSources/RootViewController.m
- ( void ) updateOrientationWithOrientation: (UIDeviceOrientation) newOrientation
{
CCLOG(@ "updateOrientationWithOrientation" );
[CCVideoPlayer updateOrientationWithOrientation:newOrientation ];
}
#endif 
```

# html - 我可以在不换行的情况下制作一个与里面的文本大小相同的容器吗

> ID：12032012
> 
> 赞同：5
> 
> 时间：2012-08-20T03:34:28.757
> 
> 标签：html, css

描述我的问题的最好方法是查看我创建的 js-fiddle：http: [//jsfiddle.net/tkY7p/](http://jsfiddle.net/tkY7p/)

我希望嵌套的 ul 成为内部最长 li 的大小，没有换行，所以看起来像：
我们很长很烦人，
而不是：
我们很
长很
烦人

我已经在页面上使用了 jquery，因此可以使用该解决方案，但如果可以使用 css 来实现，则首选此选项。

我不认为这是可能的，但我想我还是会问

任何回应表示赞赏=]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:45:28.357

使用`white-space`CSS 属性：

```
li {  white-space: nowrap; } 
```

[jsfiddle 演示链接](http://jsfiddle.net/krish/tkY7p/8/)

# html - Line breaks are not working

> ID：12032013
> 
> 赞同：3
> 
> 时间：2012-08-20T03:34:44.213
> 
> 标签：html, page-break

My page has `<p></p>` but it still does not have breaks. Any clue? [links is here](http://www.iurecsports.org/node/181)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:36:18.270

`<p>` is a paragraph not a line-break. The line break tag is `<br>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T03:41:15.540

如果您在谈论分页符，那么您想要的元素是`<br />`，是的，空间是必需的，这是让网络浏览器在使用分页符时表现的最佳方式，因为它也符合 XML（自包含标签）。

如果您的意思是您希望段落周围有更多空间，请使用 CSS 更改“p”元素的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T03:42:21.033

在您的 global.css 中，第一行内容如下：

```
p,caption { margin:0; padding:0; border:0; outline:0; font-weight:inherit; font-style:inherit; font-size:100%; font-family:inherit; vertical-align:baseline; } 
```

这就是告诉它不要给你的段落上方或下方的任何间距。

所以你需要进入[http://www.iurecsports.org/pw_files/css/global.css](http://www.iurecsports.org/pw_files/css/global.css)并像这样编辑它：

```
caption { margin:0; padding:0; border:0; outline:0; font-weight:inherit; font-style:inherit; font-size:100%; font-family:inherit; vertical-align:baseline; }

p { margin:ENTER VALUE; padding:ENTER VALUE; border:0; outline:0; font-weight:inherit; font-style:inherit; font-size:100%; font-family:inherit; vertical-align:baseline; } 
```

请记住，如果您将边距`margin:10px`和填充设置为`padding:10px`（例如），您的段落将具有 10px 的顶部、底部、左侧和右侧边距和填充。

只是给它顶部和底部边距/填充，设置为类似`margin:10px 0`and `padding:10px 0`。

你可能需要玩弄它才能让它看起来像你想要的那样。

干杯!

# sql - SQL Server：在行更新时为标识列重新生成值

> ID：12032014
> 
> 赞同：1
> 
> 时间：2012-08-20T03:34:59.043
> 
> 标签：sql, sql-server, database-design

`SequenceId`是一个自动递增的标识列，但不是主键。

我想要发生的是，当更新一行时，`SequenceId`将其设置为下一个可用值，例如：

```
_____________________
| SequenceId | Name |
| 1          | John |
| 2          | Jane |
¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ 
```

将 John 更新为 Jack。`SequenceId`设置为下一个可用的标识值。

```
_____________________
| SequenceId | Name |
| 3          | Jack |
| 2          | Jane |
¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ 
```

SQL Server 可以做到这一点吗？如果没有，还有什么替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T05:06:14.610

我不认为你可以，至少不容易或干净。为什么不使用[ROWVERSION](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.105%29.aspx)列？每次将行更新为数据库中新的唯一递增值时，都会更新 ROWVERSION 列。如果要对其进行索引，可以创建一个计算列，将其转换为 bigint。缺点是时间戳是数据库范围的，因此如果您有多个使用它们的表，则可能会跳过数字。

[小提琴](http://sqlfiddle.com/#!3/6988a/2)

```
create table TestRowVersion (
    Id int primary key,
    Name varchar(20),
    BinaryRowVersion ROWVERSION,
    IntegerRowVersion as convert(BIGINT, BinaryRowVersion)
)   

create index IDX_TestRowVersion on TestRowVersion (IntegerRowVersion)

insert into TestRowVersion (Id, Name) values (1, 'Alvin')
insert into TestRowVersion (Id, Name) values (2, 'Betsy')
insert into TestRowVersion (Id, Name) values (3, 'Charles')
select * From TestRowVersion
update TestRowVersion set Name = 'Frank' where Id = 2
select * From TestRowVersion 
```

*[编辑] - 更新为使用 RowVersion，因为 Timestamp 已弃用*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T16:46:26.557

> 我想要发生的是，当更新一行时，SequenceId 被设置为下一个可用值......

这还不够，您还想更新序列生成器，因此下一个插入的值将是正确的。

如果您使用的是 MS SQL Server 2012，则可以显式使用[序列对象](http://www.databasejournal.com/features/mssql/sequence-object-in-sql-server-2012.html)，而不是隐式 IDENTITY。这允许您在没有 INSERT 的情况下生成下一个序列号，如下所示：

```
CREATE SEQUENCE MySquence AS INT START WITH 0;

CREATE TABLE MyTable (
    SequenceId INT DEFAULT (NEXT VALUE FOR MySquence),
    Name VARCHAR(50) PRIMARY KEY
);

INSERT INTO MyTable (Name) VALUES ('John');
INSERT INTO MyTable (Name) VALUES ('Jane');

SELECT * FROM MyTable;

    SEQUENCEID  NAME
    1           Jane
    0           John

UPDATE
    MyTable SET SequenceId = NEXT VALUE FOR MySquence,
    Name = 'Jack'
WHERE Name = 'John';

SELECT * FROM MyTable;

    SEQUENCEID  NAME
    2           Jack
    1           Jane 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!6/e75f9/1)

* * *

在旧版本中，您可以通过使用单独的表来模拟序列，其中包含单个 IDENTITY 列，然后：

*   在该表中插入一个新行并使用`INSERT..OUTPUT`（或`@@IDENTITY`）获取生成的自动递增数字，
*   然后您可以立即删除该行以节省存储空间。

* * *

或者，如果您不关心任何参照完整性，您可以通过删除和插入来“更新”该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T03:44:00.860

这应该工作...

```
SET IDENTITY_INSERT [table] ON

UPDATE [table]
SET Name = 'some name',
    SequenceId = MAX(SequenceId) + 1
WHERE ID = 123

SET IDENTITY_INSERT [table] OFF 
```

# easyhook - 如何让这个 easyhook 演示运行？

> ID：12032027
> 
> 赞同：1
> 
> 时间：2012-08-20T03:38:37.757
> 
> 标签：easyhook

我正在尝试让这个 easyhook 演示在我的计算机上运行，​​但不知道如何。
我在windows编程方面经验很少。[他们在http://easyhook.codeplex.com/downloads/get/61179](http://easyhook.codeplex.com/downloads/get/61179)
中有一个关于easyhook 的教程。 起初他们提供了一个演示，但我不知道如何构建这个项目。 他们说 我们需要一个主机进程来注入库并显示文件访问。 我不知道这是怎么做到的。我想我需要在 Visual Studio 中打开一个项目？有人可以一步一步教我吗？谢谢！

# android - Android：相机视图与存储图像的比较

> ID：12032028
> 
> 赞同：2
> 
> 时间：2012-08-20T03:39:06.790
> 
> 标签：android, image, image-processing, graphics

已经讨论过如何比较两个图像，“计算”它们之间的差异。这可以看作是图像比较的一种变体，但不完全是。考虑一下：假设我有一支笔的图像，存储在我的手机（Android 手机）的 SD 卡中。而且，我正在用我的相机在家里“寻找”这支笔。让我们忽略我的眼睛可以做同样的事情，让相机进行搜索。所以，我在家里，把相机对准不同的地方，看看我的相机是否能“识别”这支笔，当我把相机对准它时。用模糊的计算机科学术语来说，当我将相机对准东西时，我在后台运行了一个线程，以不断地将这支笔的图像与当前的相机视图进行比较。我把相机对准椅子，该线程将椅子的相机视图与笔的图像进行比较，并且由于椅子不是笔，因此返回“false”。当我最终将它指向放在桌子上的同一支笔时，线程应该确定这是我们在 SD 卡上的图像的笔。因此，相机视图现在显示了笔以及它所在的桌子，但它应该使用图像比较技术来识别笔。

一般来说，这样的事情可能吗？忘记 Android 或智能手机，是否可以用摄像头“识别”一个区域或对象？由于对图像处理库一无所知，我只能假设某些库确实有工具来做这些事情。或者至少，可以有一个“理论”算法，开始研究。

谢谢，

桑吉夫 Mk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:27:44.833

这种事情是可以做到的，但要让它运作良好是非常非常困难的。我在 Android 上处理 OpenCV 的经验是，用当前的移动硬件实时执行此操作是不可能的。（使用静止帧执行此操作可能是可行的）

一个非常简陋（而且最简单的国家英里）的系统将使用模板匹配`cvMatchTemplate`。本质上，您将“模板”（例如您的笔的照片）与搜索图像中每个可能位置的照片进行比较。它是计算密集型的，但在受约束的情况下工作得很好，但是您的应用程序需要完全不受约束的条件。

我的建议是查看 Surf 或类似的东西以及 Hough 变换。您通过从参考图像中在对象上生成一组 SURF 特征来制作对象的“指纹”。您在搜索图像上运行 surf。然后应用广义霍夫变换，其中对象模型是一组特征点。霍夫空间中的峰代表良好的匹配。

我什至从未尝试过第二种方法，但我知道这是可能的。另外我提出的两种方法也绝不是仅有的两种，它们只是我熟悉的两种。

# objective-c - 移动 NSMutableArray 中的所有元素？

> ID：12032033
> 
> 赞同：2
> 
> 时间：2012-08-20T03:39:22.873
> 
> 标签：objective-c, macos

我有一个 NSMutableArray，它将以 0 个对象开始，但随着程序的进行，对象将被添加到其中。添加新元素时，如何将所有元素向下移动？

例如：

1) NSMutableArray 数组 = 0 个元素

2) NSMutableArray 数组 = 1 个元素 { [0,a]}

3) NSMutableArray 数组 = 2 个元素 {[0, b], [1,a]}

4) NSMutableArray 数组 = 3 个元素 {[0,c],[1,b],[2,c]}

从上面的列表可以看出，随着对象被添加到数组中，所有当前元素都向下移动。但是，我不希望我的数组超过一定的大小（比如说 10 个元素）。当一个元素被推到 11 时，我希望它“推”出数组。我该怎么做呢？

类似的问题：[NSMutablearray move object from index to index](https://stackoverflow.com/questions/4349669/nsmutablearray-move-object-from-index-to-index)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T03:41:18.490

你可以这样做：

```
[array insertObject:object atIndex:0];
if ([array count] > 10) {
    [array removeLastObject];
} 
```

第一行将自动将其他元素推开，下一位只是确保数组的长度不超过 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T03:47:57.360

我不确定 an`NSMutableArray`是合适的结构。您正在描述一个大小有限的堆栈；您正在将新元素推到前面，然后元素可能会从后面掉下来。

是否真的有必要将对象的索引值设置为其在堆栈/数组中的索引？

# jquery - MVC 3 将链接值传递到控制器并填充文本框

> ID：12032034
> 
> 赞同：0
> 
> 时间：2012-08-20T03:39:27.377
> 
> 标签：jquery, asp.net-mvc-3

我一直在搜索这个网站和其他来源以寻找答案，但没有发现任何有用的东西。我需要最简单的解决方案，因为我才刚刚开始学习 MVC 和 AJAX。我有一个从数据库中检索它的记录的网格，每一行都包含在单独的列中生成的链接：“编辑”和“删除”。实际的记录名称也以链接的形式出现，其中包含相应记录的 id： .../ItemType/ItemDetails/1 。现在我想获取这个 id 并在单击它时将其传递给 Controller。链接没有用名称包装，所以我想不出我会如何调用它的点击函数？

```
$("#<link I want>").click() 
```

然后传递整个href并获取字符串的最后一个字符？或者可能有其他方法？

然后我想使用这个 id 来查找记录并使用它的值填充文本框和下拉列表

```
$("#txtItemName").val(<value from controller>)
$("#txtItemPrice").val(<value from controller>)
$("#ItemTypes").selected value = <value from controller> 
```

我只是完全不知道如何将信息传递给控制器​​并一次返回，以便我可以更新部分视图。

我对任何有用的信息都感兴趣，无论是关于如何以其他方式实现它的想法、示例或解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:55:40.447

你可以使用一些简单的东西，比如 HTML5`data`属性。例如，假设这是您的链接

```
<a href="ItemType/ItemDetails/1" data-item-id="1">Item Name</a> 
```

使用jQuery的[`data()`](http://api.jquery.com/data/)方法，可以得到ID

```
$('#<link I want>').click(function() {
    var id = $(this).data('item-id');
    // and so on
}); 
```

# python - Python可以像Haskell一样制作字母表吗？

> ID：12032035
> 
> 赞同：9
> 
> 时间：2012-08-20T03:39:47.260
> 
> 标签：python

Haskell 可以：

```
['a'..'z'] 
```

在 Python 中：

```
map(chr, range(97, 123)) 
```

我觉得 Python 有点冗长。Python 有另一种像 Haskell 一样简单的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T03:42:51.947

是的。`from string import ascii_lowercase`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T03:51:34.617

```
from string import ascii_lowercase
L = list(ascii_lowercase) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T06:17:40.377

无需导入任何内容的可读性稍强的版本

```
alphabet = [chr(i) for i in range(ord('a'), ord('z') + 1)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T04:00:59.347

没有通用的方法，因为`[a..b]`haskell 中的语法使用特殊的类型类[Enum](http://www.haskell.org/ghc/docs/7.4-latest/html/libraries/base-4.5.1.0/Prelude.html#t%3aEnum)，但在 python 中没有特殊的魔法方法或特殊的枚举语法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T03:50:17.373

由于您希望将其作为列表，因此您可以执行以下操作：

```
from string import ascii_lowercase
l = [i for i in ascii_lowercase] 
```

# vb.net - 这个 C# 命令的 VB.net 等价物是什么

> ID：12032041
> 
> 赞同：-1
> 
> 时间：2012-08-20T03:41:20.480
> 
> 标签：vb.net, c#-3.0

```
var safeMode = new SafeMode(other) { WMode = "majority" }; 
```

我在[http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-C%23Driverversionv1.4.x中多次看到这个表格](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-C%23Driverversionv1.4.x)

这`{ WMode = "majority" }`是我不熟悉的。它是代码、集合初始化器还是什么？

它所做的是调用 SafeMode 的构造函数。我不知道在那之后您可以添加括号内容。那是“代码”还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T03:46:19.907

它被称为`object`初始化（MSDN - [Visual Basic 9.0 概述 - 对象初始化器](http://msdn.microsoft.com/en-us/library/ms364068%28v=vs.80%29.aspx)）。

```
Dim objSafeMode = New SafeMode(other) With { .WMode = "majority" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T03:47:19.677

这是 C# 语法的一部分。这是编程指南的链接：

[http://msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

例子：

```
Cat cat = new Cat { Age = 10, Name = "Fluffy" }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T03:47:32.523

该语法称为对象初始值设定项。

等效的 vb.net 代码可能是这个完整的代码

```
Dim safeMode as New SafeMode(other)
With safeMode
 .WMode = "Majority"
End With 
```

或使用对象初始化器语法。

```
Dim safeMode as New SafeMode(other) With { .WMode = "Majority" } 
```

[http://blogs.msdn.com/b/wriju/archive/2008/02/05/vb-net-9-0-object-and-array-initializers.aspx](http://blogs.msdn.com/b/wriju/archive/2008/02/05/vb-net-9-0-object-and-array-initializers.aspx)

# cocos2d-iphone - 如何让 cocos2d 检测非标准矩形的触摸？

> ID：12032042
> 
> 赞同：0
> 
> 时间：2012-08-20T03:41:55.923
> 
> 标签：cocos2d-iphone

我花了很多时间在谷歌上搜索，找到了这个问题的很多不同答案——其中大多数都很老了。我尝试了几个——特别是这个（第一个答案是 containsPoint / containsTouch 类别方法): [如何在 cocos2d 中检测旋转精灵的触摸](https://stackoverflow.com/questions/7634330/how-to-detect-touch-on-rotated-sprite-in-cocos2d)

当我实现它时，当我远离它们时，它错误地检测到精灵的触摸 - 最重要的是，我收到了许多警告，例如“不推荐使用 openGLView”。

接下来，我看到了这个帖子： http: [//www.cocos2d-iphone.org/forum/topic/1420](http://www.cocos2d-iphone.org/forum/topic/1420)

并检查了 touchesTest 项目...在我的头文件中添加了“CCTargetedTouchDelegate”协议，然后添加了相关的实现方法（onEnter、onExit、containsTouchLocation 和 ccTouchBegan）...发现这只是不工作，因为精灵我使用的不是矩形...

我的按钮看起来有点类似于：http: [//iphone.appstorm.net/wp-content/uploads/2010/04/ipconvert-1.jpg](http://iphone.appstorm.net/wp-content/uploads/2010/04/ipconvert-1.jpg)

旋转的矩形随着它们向下而变得更窄..

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:07:21.083

我使用了 CGPathRef 并且也工作过。[这是另一个](https://stackoverflow.com/questions/1477909/cocos2d-iphone-non-rectangular-sprite-touch-detection)类似于你的问题的线程。请参阅该解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:21:48.693

您可以实现简单的算法来检测点是否在多边形内。在这种情况下，点将是您的触摸位置，多边形将是您的按钮电路。

或者你可以做一些更复杂的事情。您可以创建自己的菜单和自己的按钮。它将允许您创建这样的方法`containsPoint:`，以检查给定位置的像素是否具有零 alpha 值。

# nuget - NuGet 返回 503 服务器不可用

> ID：12032044
> 
> 赞同：13
> 
> 时间：2012-08-20T03:42:19.567
> 
> 标签：nuget, visual-studio-2012, nuget-package, nuget-server

当 Visual Studio 包管理器 (NuGet) 响应“远程服务器返回错误：(503) 服务器不可用”消息时，有没有办法从备用服务器加载包？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-12T22:34:10.130

这是一个晦涩难懂的情况，可能只发生在“*企业*”网络环境中。如果这些条件适用于您：

*   您需要通过 HTTP 代理服务器访问 Internet

*   HTTP 代理服务器需要有效的用户 ID 和密码（或 AD 身份验证）才能允许请求继续进行

*   您一直在使用从 Linux/Unix 环境移植到 Windows 的酷炫开发工具

*   新的酷工具在添加 HTTP_PROXY（或可能 HTTPS_PROXY 或两者）[环境变量后工作](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682653(v=vs.85).aspx)

*   您可以从浏览器访问 NuGet 服务器**而不会**收到 503 错误

那么很可能你无意中调用[了这个配置特性](https://stackoverflow.com/questions/9232160/nuget-behind-proxy?answertab=votes#tab-top)而破坏了 NuGet 。我不确定环境变量是如何破坏 NuGet 的，但我怀疑 NuGet 正在检测和使用 http_proxy URL，但发送了一个空的用户 ID 和密码，这会导致 HTTP 代理拒绝请求。

**修复：**删除您添加的环境变量，看看是否可以将酷工具配置为在没有它们的情况下使用 HTTP 代理。

**更新：**使用上面“此配置功能”链接中引用的 NuGet 配置文件遇到此问题的一个版本。打开这个文件：

%appdata%\nuget\nuget.config

在你最喜欢的编辑器中。如果它包含带有*http_proxy*或*https_proxy*的元素，那么删除这些元素也可以解决问题。

PS：希望我能得到 Panic 上校的支持 :-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T03:42:19.567

如果您过去使用过该软件包，它可能在您的缓存中。您可以通过进入 Visual Studio 中工具菜单下的库包管理器设置将本地缓存添加为可用包源。对于 Visual Studio 2012，选择工具、库包管理器、包管理器设置，然后单击包源。

在可用的包源部分中，键入类似“Cache”的名称，然后在源中，浏览到**%LocalAppData%\NuGet\Cache**。您可能需要使用 Windows 资源管理器将 %LocalAppData%\NuGet\Cache 转换为完整路径（通常是**C:\Users\YourAccountName\AppData\Local\NuGet\Cache**）。

将缓存作为可用源后，您现在可以使用包管理器控制台（位于其他窗口下的查看菜单下或库包管理器下的工具菜单下）。

在控制台（这是一个带有 NuGet 命令行开关的 PowerShell 窗口）中，您可以键入“get-help NuGet”来查看可用的命令。

然后使用**Get-Package**，您可以获得包 ID 的列表。确保将“包源”设置为“缓存”（或您所称的任何名称），并将默认项目设置为您需要操作的项目，这两个都是位于页面管理器控制台顶部的下拉菜单。您还可以使用 Get-Project 来验证您正在处理解决方案中的正确项目。

最后，您可以键入**Install-Package**，并在出现提示时输入 Get-Package commandlet 输出中的 Package ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-06T16:22:58.807

我也有这个问题，这是因为我的网络。如果您的 Internet 上有任何阻塞（例如在公司 Internet 等中），您可能不允许下载 nuget 包。

尝试在其他网络下载软件包，也许它可以帮助你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T04:17:20.523

Talbott 的回答对我不起作用，因为我的缓存是空的。但是，如果您在另一个解决方案中使用了包，则可以将所需项目从另一个解决方案的“包”文件夹复制到目标解决方案中的包文件夹。

如果您没有在目标解决方案中安装包，您可能需要将以下内容添加到包文件夹中的 repositories.xml 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<repositories>
</repositories> 
```

之后，这些包似乎已安装在我的解决方案中，并且我能够将它们添加到项目中。

附加说明：我必须在解决方案级别使用“管理解决方案的 NuGet 包”选项将包添加到单个项目。即使软件包已安装在解决方案中，从控制台使用 Install-Package 仍会返回 503。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-30T12:21:54.427

如果您使用 VPN 客户端（例如 Cisco AnyConnect）并且您最近更新了 VPN 证书，您也可能会收到此错误。该问题可能会在您更新证书之后但在您重新启动之前发生。重新启动可以解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-25T20:29:33.003

收到 503 的另一个可能原因：如果您使用的是**Azure DevOps 源**，则[NuGet 包限制为 500 MB](https://docs.microsoft.com/en-us/azure/devops/artifacts/reference/limits?view=azure-devops)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-22T01:00:13.993

这是一个很老的问题，但我刚刚遇到了同样的问题。就我而言，这是因为我在 Visual Studio 包管理器中配置了多个 nuget 包源。在我的公司，我们使用 NuGet 来获取主流软件包，并使用 MyGet 来获取我们自己的东西。

当我尝试提取一个非常大的包时，它以 503 代码失败，并且错误链接看起来很奇怪，其中包含 MyGet 而不是 NuGet。事实证明，尽管将 NuGet 选为当前源，Visual Studio 包管理器仍试图从另一个源中提取它。禁用其他来源，然后继续下载修复它。

希望它能帮助像我一样偶然发现这个线程的人。

# php - 检查 Phing 中是否存在目录并提示继续？

> ID：12032048
> 
> 赞同：9
> 
> 时间：2012-08-20T03:42:53.817
> 
> 标签：php, phing

我正在尝试检查 Phing 中是否存在目录或文件，但我什至无法获得基本的工作。

例如：

```
<project name="test" default="help" basedir="./">

<target name="clean" description="Deletes directory">

    <available file="/testy" type="dir" property="dir.Exists" />

        <if>
            <isset property="dir.Exists"/>
                <then>
                    <echo>Yep</echo>
                </then> 
        </if>

</target>

<phingcall target="clean" />

</project> 
```

我收到一个奇怪的错误：

```
Error reading project file [wrapped: \build.xml:22:18: Error initializing nested  
element <echo> [wrapped: phing.tasks.system.IfTask doesn't support the 'echo' 
creator/adder.]] 
```

最终，如果目录存在，我想添加条件是/否以继续。

附言。据我所知，该错误与“嵌套元素回显”无关，因为如果我删除回显它仍然会发送相同的错误，实际上我认为这是与默认语法相关的错误消息或其他东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T19:07:18.747

如果您需要做的就是删除目录，那么只需对其调用 delete 即可。Phing 会自动为您检查它是否存在，因此您无需进行检查：

```
<target name="clean">
    <delete
      dir="${project.basedir}/${source.directory}" quiet='true'
    />
</target> 
```

这里重要的删除属性是： [![Phing 删除属性](../Images/dde5fe94fce9f935f14f71563f95265e.png)](https://i.stack.imgur.com/bhx39.png)

以下在我的系统中工作正常：

```
<target name='test'>
  <if>
    <available file='results' type='dir' />
    <then>
      <echo>Yep</echo>
    </then>
  </if>
</target> 
```

所以我认为您使用 AvailableTask 的方式不正确。

# php - 根据选择选项自动更改 PHP 变量（AJAX？）

> ID：12032049
> 
> 赞同：1
> 
> 时间：2012-08-20T03:42:54.660
> 
> 标签：php, mysql, ajax

现在，我有默认为当前 d/m/y 的变量，然后将其弹出到一个 mySQL 查询中，该查询显示表中的所有数据 WHERE date='$dday' AND month='$dmonth' AND year=' $ 年”。

```
$ddate = date("d");
$dmonth = date("m");
$dyear = date("Y"); 
```

相反，我希望有一个选择框，它将根据所选选项更改变量。因此，Day 选择的默认选项将是当前日期，但如果我将其更改为例如第 12 天，我希望变量在选择选项更改时更改，然后自动重新查询数据库。我假设这将通过 AJAX 完成。

我所说的可能吗？如果查询的自动化增加了很大的复杂性，我只需更改变量并根据提交按钮的按下进行更新就可以了。

我保证会暂停提问并开始回答一些问题，如果低于我的简单水平的问题甚至被问到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T03:53:58.487

是的，这是可能的。[jQuery](http://jquery.com/)甚至使它变得简单。

1.  创建你的`<select>`元素并给它一个 ID，以便它可以在 jQuery 中使用。

2.  `<select>`在 jQuery 中添加一个事件侦听器，该事件侦听器在更改时触发，例如`$("#date").change()`.

3.  在更改事件的事件处理程序中，获取 的当前值`<select>`，然后使用 jQuery 的 AJAX[`$.post()`](http://api.jquery.com/jQuery.post/)函数将该数据发送到 PHP 文件。

4.  在那个 PHP 文件中，清理数据以[防止 MySQL 注入](http://www.addedbytes.com/writing-secure-php/writing-secure-php-1/)，然后在数据库中查询新数据。

5.  使用 PHP 的`echo`函数发回数据。

6.  在 jQuery`$.post()`回调函数（第三个参数）中，接收回显的数据并将其放入变量中。

7.  使用 jQuery 用数据更新您的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T03:49:23.170

您建议的两种解决方案都可以。您可以使用 AJAX 将选择框中的值发送到 php 脚本，或者您可以提交表单并通过`$_POST`或`$_GET`取决于您的表单方法以这种方式访问​​它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T04:32:07.793

下面是一个例子，让你做查询：

```
<?php 
//Some pseudo data kinda as your receive it from your query
$datafromSql = array(
array('id'=>1,'date'=>1,'month'=>1,'year'=>2012,'theData'=>'This is some data when the user select 1/1/2012'),
array('id'=>2,'date'=>2,'month'=>2,'year'=>2012,'theData'=>'This is some data when the user select 2/2/2012'),
array('id'=>3,'date'=>3,'month'=>3,'year'=>2012,'theData'=>'This is some data when the user select 3/3/2012'),
);

//Super simple API to access the data
if($_SERVER['REQUEST_METHOD']=='POST' && isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'){
    header('Content-Type: text/html');
    //pseudo code, really you would just format your query result   
    $return=array();
    foreach($datafromSql as $row){
        //Select all from array which match select choice
        if($row['date']==$_POST['day'] || $row['month']==$_POST['month'] || $row['year']==$_POST['year']){
            $return[]=$row['theData'].'<br />';
        }
    }
    //output, with a fancy horizontal rule
    echo implode('<hr />',$return);
    die;
}?>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" charset="utf-8"></script>
<script type="text/javascript">
function update(){
    $.post('./<?php echo basename(__FILE__)?>',
       {
        day:  $("#day").val(),
        month: $("#month").val(),
        year:  $("#year").val()
       },
    function(data) {
            $('#result').replaceWith('<div id="result"><h1>The Result:</h1>'+ data +'</div>');
    });
}

$(document).ready(function(){
    update();
});
</script>

</head>

<body>

<form id="dateform" >
 <p>Select Date: 
  <select size="1" name="day" id="day" onChange="update()">
  <?php foreach(range(1,31) as $i){echo '<option value="'.$i.'">'.$i.'</option>';} ?>
  </select>
  <select size="1" name="month" id="month" onChange="update()">
  <?php foreach(range(1,12) as $i){echo '<option value="'.$i.'">'.$i.'</option>';} ?>
  </select>
  <select size="1" name="year" id="year" onChange="update()">
  <?php foreach(range(2008,2012) as $i){echo '<option value="'.$i.'">'.$i.'</option>';} ?>
  </select>
 </p>
</form>

<p id='result'></p>

</body>

</html> 
```

# java - Restlet 可以用来近似 CherryPy 的行为吗

> ID：12032050
> 
> 赞同：1
> 
> 时间：2012-08-20T03:43:01.710
> 
> 标签：java, rest, restlet, cherrypy

我已经看了几个小时的 Restlet，似乎无法从中脱颖而出。

我正在寻找一个可以用来近似行为或 CherryPy 的框架。

[我在这里](https://stackoverflow.com/questions/610516/is-there-something-like-cherrypy-or-cerise-in-the-java-world)看到了以前的 StackOverflow 帖子，其中列出了 OOWeb 和 Strips 作为 CherryPy 的可能 Java 等价物——这是一个老问题，我不确定这两个框架的当前状态。

我真正想做的是实现这个接口：

```
public interface ArithmaticResource {

@Get("json")
public int add (int n0, int n1);

@Get("json")
public int add (int n0, int n1, int n2);
} 
```

并且，允许使用类似 cURL 的界面调用它——也许 OOWeb 会更合适？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:49:56.833

你试图实现的看起来像一个 RPC 接口而不是 REST 设计，但你可以用 Restlet 试试这个：

```
public interface ArithmaticResource {

@Get("json?n0&n1")
public int add ();

@Get("json?n0&n1&n2")
public int add ();
} 
```

# java - java.util.Date 和 Joda Time API 之间的区别

> ID：12032051
> 
> 赞同：14
> 
> 时间：2012-08-20T03:43:27.060
> 
> 标签：java, datetime, jodatime

> **可能重复：**
> [我应该使用 Java 日期和时间类还是使用像 Joda Time 这样的 3rd 方库？](https://stackoverflow.com/questions/589870/should-i-use-java-date-and-time-classes-or-go-with-a-3rd-party-library-like-joda)

关于何时值得使用 Joda Time 而不是基本的 java.util.Date 类，我可以使用一些指导。有什么好处？Joda Time 是否允许您执行 Date 类无法执行的任何操作，或者使用它更容易还是什么？

此外，我还看到关于 Joda Time 是否是标准 API 的一部分的相互矛盾的信息。是标准的还是不标准的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-20T08:01:30.403

Java 的标准日期和时间类（主要是`java.util.Date`和`java.util.Calendar`）功能有限，并且存在许多设计问题。许多构造函数和方法`java.util.Date`被弃用的事实就是一个迹象。

Joda Time 的 API 比 Java 标准库中的 API 要好得多。有带或不带时区的时间戳类，只保存日期（年，月，日）或只保存一天中的时间的类，周期，持续时间和间隔的类，它支持 ISO 8601 格式（这是标准XML 文档中的格式）等等。

我会在任何项目中使用 Joda Time 作为我的标准日期和时间库 - 真的没有理由使用`java.util.Date`和`java.util.Calendar`.

请注意，在 Java 的未来版本中，很可能会包含一个新的日期和时间 API，它看起来很像 Joda Time 中当前可用的 API；参见[项目 ThreeTen](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=ThreeTen)。

另请参阅[为什么选择 Joda Time？](http://www.joda.org/joda-time/)在 Joda Time 项目的主页上。

> 此外，我还看到关于 Joda Time 是否是标准 API 的一部分的相互矛盾的信息。是标准的还是不标准的？

不，它不是[标准 API](http://docs.oracle.com/javase/7/docs/api/)的一部分。

**更新（从评论中复制）：**

Java 8 现已推出，它有一个新的日期和时间 API，类似于 Joda Time（请参阅包 java.time）。如果您使用的是 Java 8，请使用新的日期和时间 API。

# windows-phone - 是否有适用于 windows 7 手机市场的数据 api？

> ID：12032056
> 
> 赞同：1
> 
> 时间：2012-08-20T03:44:03.600
> 
> 标签：windows-phone

是否有 api 将 windows 7 市场中的应用程序公开为 odata、rest、soap 或其他以编程方式访问的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:31:44.990

根据@talbottcrowell 的评论，抓取 Windows Phone 市场[http://brandonwatson.sys-con.com/node/1767886](http://brandonwatson.sys-con.com/node/1767886)

它不是官方的 api，但似乎是一种幸运的方式。

[作为 codeplex 项目 zunedata http://zunedata.codeplex.com/wikipage?title=API%20Documentation](http://zunedata.codeplex.com/wikipage?title=API%20Documentation)的一部分，还有很棒的文档

# c# - 服务器应用程序的 GData 身份验证

> ID：12032057
> 
> 赞同：1
> 
> 时间：2012-08-20T03:44:31.517
> 
> 标签：c#, gdata, google-analytics-api, google-oauth

我有一个在服务器上运行的应用程序，它定期从 Google Analytics 中提取数据。它不会发出很多查询，所以我认为任何限制都不是问题。

我有一个原型正在运行，但是我必须提供一个登录密码以进行身份​​验证（在代码中）。

我看到我可以在 Google API 控制台中生成 API 密钥和其他类型的身份验证，但是我不确定如何使用它们以及是否可以使用它们来代替登录名/密码。

使用用户登录名/密码来验证服务器应用程序似乎并不正确。

还有其他方法吗？

（我正在使用 C# 客户端库）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T03:30:07.417

您应该使用 OAuth 2.0。看：

[http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs)

示例 OAuth 工作流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:04:12.693

最好的方法是使用 Google 服务帐户 [https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

但是，我不知道最好的 c# 库是什么，但 Google 库中似乎确实支持它。[http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2#Service_Accounts](http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2#Service_Accounts)

这是一个专门关于 PHP 客户端的答案。 [服务应用程序和 Google Analytics API V3：服务器到服务器 OAuth2 身份验证？](https://stackoverflow.com/questions/9863509/service-applications-and-google-analytics-api-v3-server-to-server-oauth2-authen)

# c++ - unique_ptr 住在哪里？

> ID：12032061
> 
> 赞同：0
> 
> 时间：2012-08-20T03:45:53.117
> 
> 标签：c++, macos, gcc, c++11, macports

我正在尝试在 OSX 10.6.5 上使用 gcc 4.6.2 编译一些代码（如下）。这是微不足道的；但编译器找不到 unique_ptr。

```
#include <memory>

int main(int argc, char** argv)
{
    std::unique_ptr<bar> foo(new bar(0));
} 
```

我这样编译：

```
c++ main.cpp -o ./bin/main -std=gnu++0x -ansi -pedantic -Wall -Wno-long-long -Wno-deprecated -O3 -ansi -DNDEBUG  -I/usr/include -I/opt/local/include 
```

我尝试明确包含 bits/unique_ptr 但这导致我出错，说**GXX_EXPERIMENTAL_CXX0X**未定义。嗯？正如你在上面看到的，我明确要求 gnu++0x。我也尝试过“-std=c++0x”，结果相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T03:53:18.297

您的命令有`-ansi`（相当于`-std=c++98`），这会覆盖`-std=c++0x`. 尝试删除它。

# c - C中不同变量的状态机

> ID：12032067
> 
> 赞同：0
> 
> 时间：2012-08-20T03:46:54.367
> 
> 标签：c, if-statement, hashmap, lookup, state-machine

我有以下代码正在做大量的 if-else 检查并消耗大量时间。

```
 while(i<1000) {

                if ( a == x1)
               {
                     if(b == y1)
                    {
                       array[i] = z1;
                    }
                    else if( b = y2)
                    {
                       array[i] = z2;
                    }
                    else if (b = z3);
                    {
                         array[i] = z3;
                    }
                    -
                    -
                    -
                    -
                    -
                   some 20 else --

                  }/*end of first if*/
                 else if (a == xx1)
                 {

                           if(b == yy1)
                          {
                               array[i] = zz1;
                          }
                          else (b == yyy3)
                         {
                              array[i] = zz2;
                         }
                         else ( b == yy4)
                        {
                           array[i] = zz3;
                        }
                          -
                          -
                          -
                          -
              -
             some 20 else --
        }
        else if(/*more conditions*/)
        {
            /* same as above with too many else loops */
        }
        -
        -
        -
        -
        -
        -
        -some 100 else-ifs
        -
        -
        -
        -
        -
        i++;
 }/*end of while*/ 
```

我怎样才能最大限度地减少时间消耗。我虽然用开关（开关内的开关）替换if else，但我仍然认为我可以用一些表（2d-3d数组）做得更好，但数字x1，y1，z1， zz3,zz1,zz2 不是连续的数字，它们之间没有关系，它们存在于 1 到 10 亿之间，没有重复。实现这个查找表的任何想法。Rgds，软软的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:54:43.897

(1) 如果数字是常量，则将其更改为 case 语句 - 如果可以的话，您的编译器应该输出一个跳转表（鉴于您的约束它不能 - 所以转到第 2 步）。

(2) 如果您的数据不连续，则跳转表将不起作用。您可以使用哈希表使您的数据连续（或足够接近）。现在只需搜索哈希表。这应该是 O(1) （或接近它）。尽管您必须承担创建哈希表的成本

如果您需要哈希表的代码，您可以使用 C++ STL，或者如果您需要 C 编写自己的代码或在网络上找到实现，这个[问题](https://stackoverflow.com/questions/1138742/looking-for-a-good-hash-table-implementation-in-c)可能会有所帮助。

# c# - 检测附加的探查器

> ID：12032070
> 
> 赞同：4
> 
> 时间：2012-08-20T03:47:37.790
> 
> 标签：c#, .net, windows, profiling

我知道您可以使用 确定是否附加了调试器`System.Diagnostics.Debugger.IsAttached`，但是有没有办法确定是否附加了探查器？

我的分析器无法通过线程池跟踪任务，所以我想在分析时自动禁用并行性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T05:59:57.000

对于标准分析器接口，需要设置环境变量。

我想你可以通过`Environment`课堂检查这个。

该变量被调用`COR_ENABLE_PROFILING`，如果启用，将设置为`1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:55:47.923

无论是调试还是发布版本，都包含 Debugger.IsAttached 代码。并且可以将调试器附加到发布版本。

因此 `System.Diagnostics.Debugger.IsAttached`，如果没有附加调试器（或分析器），将返回 False。

注意：我不确定 SlimTune 但您倾向于附加到进程的 Profiler：[如何：将 Profiler 附加和分离到正在运行的进程](http://msdn.microsoft.com/en-us/library/ms182384.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-04T16:49:00.020

`DIAGHUB_SESSION_ID`对于那些感兴趣的人，您似乎可以通过检查环境变量的存在来检测您的进程是否正在由 Visual Studio 的诊断中心（至少在 Visual Studio 2017 中）进行分析。

# c# - 使用 Dapper 对相关实体进行 CRUD

> ID：12032072
> 
> 赞同：1
> 
> 时间：2012-08-20T03:48:03.563
> 
> 标签：c#, .net, orm, dapper

我的应用程序是如下的实体模型并使用 Dapper

```
public class Goal
{
    public string Text { get; set; }
    public List<SubGoal> SubGoals { get; set; }
}

public class SubGoal
{
    public string Text { get; set; }
    public List<Practise> Practices { get; set; }
    public List<Measure> Measures { get; set; }
} 
```

并有一个如下的存储库

```
public interface IGoalPlannerRepository
{
    IEnumerable<Goal> FindAll();
    Goal Get(int id);
    void Save(Goal goal);
} 
```

我遇到了以下两种情况

1.  在检索数据（目标实体）时，它需要检索层次结构中的所有相关对象（所有子目标以及实践和措施）
2.  保存目标后，需要插入和/或更新所有相关数据

请建议是否有更好的方法来处理这些场景，而不是“循环”集合和编写大量的 SQL 查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T05:10:03.020

使用 Dapper 在 SQL 中进行大批量数据更新的最佳方法是使用复合查询。

您可以在一个查询中检索所有对象作为多个结果集，如下所示：

```
CREATE PROCEDURE get_GoalAndAllChildObjects
    @goal_id int
AS
SELECT * FROM goal WHERE goal_id = @goal_id
SELECT * FROM subgoals WHERE goal_id = @goal_id 
```

然后，您编写一个小巧的函数来检索对象，如下所示：

```
using (var multi = connection.QueryMultiple("get_GoalAndAllChildObjects", new {goal_id=m_goal_id})) {
    var goal = multi.Read<Goal>();
    var subgoals = multi.Read<SubGoal>();
} 
```

接下来是批量更新大数据。您可以通过表参数插入来做到这一点（我在这里写了一篇文章：[http](http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/) ://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/ ）。基本上，您为要插入的每种类型的数据创建一个表，然后编写一个将这些表作为参数并将它们写入数据库的过程。

这是超高性能，几乎可以得到优化，而且代码不是太复杂。

但是，我需要问：保持“子目标”和所有其他对象的关系有什么意义吗？一种简单的替代方法是创建一个 XML 或 JSON 文档，其中包含您的目标及其所有序列化为文本的子对象，然后将该对象保存到文件系统中。它具有令人难以置信的高性能，非常简单，非常可扩展，并且只需要很少的代码。唯一的缺点是您不能编写一个 SQL 语句来浏览所有子目标。考虑一下 - 这可能值得考虑；）

# jquery - 从父框架触发 iframe 内元素的事件处理程序

> ID：12032074
> 
> 赞同：12
> 
> 时间：2012-08-20T03:48:34.243
> 
> 标签：jquery, iframe, event-handling

我有一个 html 页面。在其中，我使用 jQuery 在链接上附加点击事件。然后我使用 iframe 从另一个页面引用这个 html 页面。但是我无法使用 js 触发附加在该链接上的事件（当我用鼠标单击链接时，事件被触发没有问题）。如何从父框架触发该事件？我尝试了以下方法，但它不起作用：

```
var frame = $('#mainFrame'); // the iframe I am trying to access
var link = $('a.btn', frame.contents()); // the element is found correctly
link.trigger('click');  // nothing happens. 
var e = link.data('events');  // e is undefined. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-06T12:50:37.353

这是你如何做到的。

```
document.getElementById('ifrmMsg').contentWindow.$('a:first').trigger('click'); 
```

*   **演示：http:** [//jsbin.com/aYijiLe/2](http://jsbin.com/aYijiLe/2)
*   家长：http: [//jsbin.com/aYijiLe/2/edit](http://jsbin.com/aYijiLe/2/edit)
*   iFrame：http: [//jsbin.com/IrogeBi/1/edit](http://jsbin.com/IrogeBi/1/edit)

您也可以[`postMessage()`](https://developer.mozilla.org/en-US/docs/Web/API/Window.postMessage)用于此目的。它也可以**跨域**工作。但是iframe里面的JS必须监听`message`事件，即你需要控制iframe的来源。

*   **演示**：http: [//jsbin.com/ILAsEmE/1](http://jsbin.com/ILAsEmE/1)
*   家长：http: [//jsbin.com/ILAsEmE/1/edit](http://jsbin.com/ILAsEmE/1/edit)
*   iframe：http: [//jsbin.com/uZEQuTa/2/edit](http://jsbin.com/uZEQuTa/2/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-09T19:17:15.057

只需将 onload() 事件放在 iframe 标记内。

```
<iframe src="http://myURL.com" onload="myFunction()"> 
```

# xcode - 找不到 SQLITE 语句调用错误

> ID：12032078
> 
> 赞同：0
> 
> 时间：2012-08-20T03:49:17.580
> 
> 标签：xcode, sqlite

我在定位我的错误时遇到问题。代码可以通过 ID(init)，我知道数据库正在加载。我的问题是 IF(sqlite3_prepare_v2...) 语句。当我运行代码时，这一行不 ==SQLITE_OK 而是跳到最后。任何帮助表示赞赏。谢谢。

```
@implementation CityState

static CityState *WDdatabase;

+(CityState *)WDdatabase {
    if(WDdatabase == nil) {

        WDdatabase = [[CityState alloc] init];
    }
    return WDdatabase;
}

- (id)init {
    self = [super init];
    if (self) {
        NSString *sqliteDB = [[NSBundle mainBundle] pathForResource:@"CityAndState" ofType:@"sqlite"];

        if(sqlite3_open([sqliteDB UTF8String], &WDdatebase) != SQLITE_OK){
            NSLog(@"Failed to open database");
        }
    }
    return self;
}

-(NSArray *)getAllCities {
    NSMutableArray *returnArray = [[NSMutableArray alloc] init];
    NSString *query = @"SELECT * FROM Test_Table";

    sqlite3_stmt *statement;

    if(sqlite3_prepare_v2(WDdatebase, [query UTF8String], -1, &statement, NULL) == SQLITE_OK) {
    while (sqlite3_step(statement) == SQLITE_ROW) {
       }
        sqlite3_finalize(statement);
    }

    return returnArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:04:24.227

据我所知，Objective-C 不会像您尝试的那样执行静态类变量，并且符号`WDatabase`（我假设错字就在 SO 上，而不是在您的代码中）实际上是类标识符而不是您的静态多变的。要实现单例，您将需要一个文件范围变量（在 @implementation 块之外）（我建议您以下划线开头来说明您何时访问它以及何时访问类方法。所以基本上, 你失败的调用很可能是因为你传递的是一个*类对象*而不是你的 var。一旦你正确设置了静态 var。

访问“类变量”（由于Objective-C的C灵魂，最终只是一个文件范围/静态存储的变量）的正确语法是向类对象发送一条消息：

```
sqlite3_prepare_v2([CityState wDdatebase], [query UTF8String], ... 
```

此外，只是为了迂腐；如果你没有使用 NSString 的任何特性并且只需要 UTF8（或“C-style”）字符串，你可以像在 C 中一样使用它们：

```
-(NSArray *)getAllCities {
    NSMutableArray *returnArray = [[NSMutableArray alloc] init];
    char query[] = "SELECT * FROM Test_Table";

    sqlite3_stmt *statement;

    if(sqlite3_prepare_v2([CityState wDdatebase], query, -1, &statement, NULL) == SQLITE_OK) {
    while (sqlite3_step(statement) == SQLITE_ROW) {
       }
        sqlite3_finalize(statement);
    }

    return returnArray;
} 
```

# android - 刷新 Sqlite 数据库中的光标

> ID：12032081
> 
> 赞同：0
> 
> 时间：2012-08-20T03:49:36.053
> 
> 标签：android, sqlite, cursor, android-asynctask

我无法让光标从 SQlite 数据库返回更新的信息。我发现 requery() 已贬值。Android Dev 网站说每次需要新信息时都会创建一个新光标。该网站还说使用线程。

问题 1：我正在使用异步任务从数据库中获取更新的数据。异步任务正在工作，但它检索旧数据。是否有另一种方法可以使游标返回最新数据？还是我错过了什么？

问题 2\. 我需要一个“光标适配器”吗？我希望返回新数据，并且我没有在列表中显示数据，因此拥有一个没有意义。但如果这是返回新数据的唯一方法，请告诉我。

**我在数据库类中使用 cursor.close()。**

我的异步任务：

```
 private class ButtonDataTask extends AsyncTask<Void,Void,Void> {
        String x;
        String time;
        private final ProgressDialog dialog = new ProgressDialog(
                AlertsDetails.this);

        // can use UI thread here
        protected void onPreExecute() {
            this.dialog.setMessage("Selecting data...");
            this.dialog.show();
        }

        // can use UI thread here
        @SuppressWarnings("unused")
        protected void onPostExecute(Void result) {
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }

            if (alertState == 1) {

                mAlertTime.setText("ALERT OFF");
            }

            if (alertState == 0) {

                mAlertTime.setText(x);

            }
        }

        @Override
        protected Void doInBackground(Void... params) {

            DatabaseSqlite updateAlertStatus = new DatabaseSqlite(
                    AlertsDetails.this);

            if (alertState == 0) {

                alertState = 1;

                updateAlertStatus.open();
                updateAlertStatus.updateAlertState(id, alertState);
                alertState = updateAlertStatus.getAlertState(id);

                updateAlertStatus.close();
            }

            else {

                alertState = 0;
                updateAlertStatus.open();
                 x ="ALERT ON "
                        + updateAlertStatus.getAlertTime(id)
                        + " from button";

                updateAlertStatus.updateAlertState(id, alertState);
                alertState = updateAlertStatus.getAlertState(id);
            //mAlertStateDisplay.setText("  ");
                updateAlertStatus.close();

            }

            return null;
        }

    } 
```

数据库：

```
 package com.google.android.gcm.demo.app.sqllite;

import java.util.ArrayList;
import java.util.List;
import java.util.Observable;

import org.json.JSONObject;

import com.google.android.gcm.demo.app.Alerts.AlertAdapter;
import com.google.android.gcm.demo.app.Alerts.Alerts;
import com.google.android.gcm.demo.app.EventList.Item;
import com.google.android.gcm.demo.app.EventList.NewsRowAdapter;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.ListView;

public class DatabaseSqlite extends Observable {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_EVENTNAME = "event_name";
    public static final String KEY_EVENTSTARTTIME = "event_start_time";
    public static final String KEY_EVENTALERTTIME = "event_alert_time";
    public static final String KEY_EVENTALERTSTATE = "event_alert_state";
    public static final String KEY_EVENTSTATE = "event_state";
    public static final String KEY_IDFROMREMOTESERVER = "event_id";
    public static final String KEY_LOCATION = "event_location";
    public static final String KEY_DATE = "date";
    private static final String KEY_ORIGINALALALERTDATE = "original_alert_date";
    private static final String KEY_ALERTMINUTES = "alert_in_minutes";
    private static final String KEY_ALERTINMILLIS = "alert_in_millis";

    // database name:
    private static final String DATABASE_NAME = "Reminders_DB";
    private static final String DATABASE_TABLE = "Alerts";
    private static final int DATABASE_VERSION = 1;

    private DBHelper dbHelper;
    private final Context context;
    private SQLiteDatabase database;
    Cursor cursor = null;

    ArrayList<String> alertList = null;
    List<Alerts> alertsOfList;
    ListView listView;
    AlertAdapter objAdapter;
    // JSONObject json;

    private String name = "First time i have this Text";

    /**
     * @return the value
     */
    public String getValue() {
        return name;
    }

    /**
     * @param value
     *            the value to set
     */
    public void setValue(String name) {
        this.name = name;
        setChanged();
        notifyObservers();
    }

    private static class DBHelper extends SQLiteOpenHelper {

        public DBHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_IDFROMREMOTESERVER + " INTEGER, " + KEY_EVENTNAME
                    + " TEXT, " + KEY_EVENTSTARTTIME + " TEXT, "
                    + KEY_EVENTSTATE + " INTEGER," + KEY_LOCATION + " TEXT, "
                    + KEY_DATE + " TEXT, " + KEY_EVENTALERTTIME + " TEXT, "
                    + KEY_ALERTMINUTES + " TEXT, " + KEY_ALERTINMILLIS
                    + " TEXT, " + KEY_ORIGINALALALERTDATE + " TEXT, "
                    + KEY_EVENTALERTSTATE + " INTEGER);"

            );
            System.out.println("database created ");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
            System.out.println("DROP TABLE IF EXISTS ");
        }

    }

    public DatabaseSqlite(Context c) {
        context = c;
    }

    public DatabaseSqlite open() throws SQLException {
        dbHelper = new DBHelper(context);
        database = dbHelper.getWritableDatabase();
        System.out.println("database opened " + database);
        return this;
    }

    public void close() {
        try {
            if (database != null && database.isOpen()) {

                dbHelper.close();
                System.out.println("database closed ");
                // setValue("penny");
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public long createEntry(int idFromRemoteServer, String eventName,
            String startTime, String alertTime, int alertState,
            String location, int eventState, String date) {

        ContentValues cv = new ContentValues();
        cv.put(KEY_IDFROMREMOTESERVER, idFromRemoteServer);
        cv.put(KEY_EVENTNAME, eventName);
        cv.put(KEY_EVENTSTARTTIME, startTime);
        cv.put(KEY_EVENTALERTTIME, alertTime);
        cv.put(KEY_EVENTSTATE, eventState);
        cv.put(KEY_EVENTALERTSTATE, alertState);
        cv.put(KEY_LOCATION, location);
        cv.put(KEY_DATE, date);
        return database.insert(DATABASE_TABLE, null, cv);

    }

    public List<Alerts> getData() {
        Cursor cursor = null;
        System.out.println("get data is running");
        alertsOfList = new ArrayList<Alerts>();

        try {

            String[] columns = new String[] { KEY_ROWID,
                    KEY_IDFROMREMOTESERVER, KEY_EVENTNAME, KEY_EVENTSTARTTIME,
                    KEY_EVENTALERTTIME, KEY_EVENTALERTSTATE, KEY_LOCATION,
                    KEY_EVENTSTATE, KEY_DATE };
            // information from a database is read thru a cursor

            cursor = database.query(DATABASE_TABLE, columns, null, null, null,
                    null, null);

            int iRow = cursor.getColumnIndex(KEY_ROWID);
            int iIdRemote = cursor.getColumnIndex(KEY_IDFROMREMOTESERVER);
            int iEventState = cursor.getColumnIndex(KEY_EVENTSTATE);
            int iName = cursor.getColumnIndex(KEY_EVENTNAME);
            int iStartTime = cursor.getColumnIndex(KEY_EVENTSTARTTIME);
            int iAlertTime = cursor.getColumnIndex(KEY_EVENTALERTTIME);
            int iAlertState = cursor.getColumnIndex(KEY_EVENTALERTSTATE);
            int iLocation = cursor.getColumnIndex(KEY_LOCATION);
            int iDate = cursor.getColumnIndex(KEY_DATE);

            if (cursor != null) {

                for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor
                        .moveToNext()) {

                    Alerts alertObj = new Alerts();

                    alertObj.setRowId(cursor.getInt(iRow));
                    alertObj.setRemoteServerId(cursor.getInt(iIdRemote));
                    alertObj.setEventState(cursor.getInt(iEventState));
                    alertObj.setAlertState(cursor.getInt(iAlertState));
                    alertObj.setEventName(cursor.getString(iName));
                    alertObj.setLocation(cursor.getString(iLocation));
                    alertObj.setStartTime(cursor.getString(iStartTime));
                    alertObj.setAlertTime(cursor.getString(iAlertTime));
                    alertObj.setDate(cursor.getString(iDate));

                    String result = cursor.getString(iName);
                    System.out.println(result);
                    alertsOfList.add(alertObj);

                }
            }
        } catch (Exception e) {

            e.printStackTrace();
            alertsOfList = null;

        } finally {

            if (cursor != null && !cursor.isClosed()) {

                cursor.deactivate();
                cursor.close();
                cursor = null;

            }

        }

        return alertsOfList;
    }

    public String getAlertTime(long lRow) {

        String result = "";

        try {

            String[] columns = new String[] { KEY_ROWID + "=" + lRow, KEY_EVENTALERTTIME };
            cursor = database.query(DATABASE_TABLE, columns, null, null, null,
                    null, null);

            int iAlertTime = cursor.getColumnIndex(KEY_EVENTALERTTIME);

            if (cursor != null) {
                cursor.moveToFirst();
                result = cursor.getString(iAlertTime);
//              System.out.println(" Alert time pulled from server is "
//                      + result);

            }
        } catch (Exception e) {

            e.printStackTrace();
            // alertsOfList = null;

        } finally {

            if (cursor != null && !cursor.isClosed()) {

                cursor.deactivate();
                cursor.close();
                cursor = null;

            }

        }
        System.out.println("---------get alert Time is " + result );
        System.out.println("row from time is " + lRow);

        return result;

    }

    public int getAlertState(long lRow) {
        Cursor cursor = null;
        int result = 0;

        try {

            String[] columns = new String[] {  KEY_ROWID + "=" + lRow , KEY_EVENTALERTSTATE };

            // information from a database is read thru a cursor

            cursor = database.query(DATABASE_TABLE, columns, null, null, null,
                    null, null);

            int iAlertState = cursor.getColumnIndex(KEY_EVENTALERTSTATE);

            if (cursor != null) {

                cursor.moveToFirst();

                result = cursor.getInt(iAlertState);

            }
        } catch (Exception e) {

            e.printStackTrace();
            // alertsOfList = null;

        } finally {

            if (cursor != null && !cursor.isClosed()) {

                cursor.deactivate();
                cursor.close();
                cursor = null;

            }

        }

        System.out.println("---------get alert state is " + result );
        System.out.println("row from state is " + lRow);

        return result;
    }

    // ////////////
    public List<Alerts> getAlertsforService() {
        Cursor cursor = null;
        System.out.println("get data is running");
        alertsOfList = new ArrayList<Alerts>();

        try {

            String[] columns = new String[] { KEY_ROWID, KEY_EVENTNAME,
                    KEY_EVENTSTARTTIME, KEY_EVENTALERTTIME,
                    KEY_EVENTALERTSTATE, KEY_LOCATION, KEY_EVENTSTATE,
                    KEY_DATE, KEY_ORIGINALALALERTDATE, KEY_ALERTMINUTES,
                    KEY_ALERTINMILLIS };
            // information from a database is read thru a cursor
            cursor = database.query(DATABASE_TABLE, columns, null, null, null,
                    null, null);

            int iRow = cursor.getColumnIndex(KEY_ROWID);
            // int iIdRemote = cursor.getColumnIndex(KEY_IDFROMREMOTESERVER);
            int iEventState = cursor.getColumnIndex(KEY_EVENTSTATE);
            int iName = cursor.getColumnIndex(KEY_EVENTNAME);
            int iStartTime = cursor.getColumnIndex(KEY_EVENTSTARTTIME);
            int iAlertTime = cursor.getColumnIndex(KEY_EVENTALERTTIME);
            int iAlertState = cursor.getColumnIndex(KEY_EVENTALERTSTATE);
            int iLocation = cursor.getColumnIndex(KEY_LOCATION);
            int iDate = cursor.getColumnIndex(KEY_DATE);
            int iOrigAlertDate = cursor.getColumnIndex(KEY_ORIGINALALALERTDATE);
            int iMinutes = cursor.getColumnIndex(KEY_ALERTMINUTES);
            int iAlertInMills = cursor.getColumnIndex(KEY_ALERTINMILLIS);

            if (cursor != null) {

                for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor
                        .moveToNext()) {
                    if (cursor.getInt(iAlertState) == 0
                            && cursor.getString(iAlertInMills) != "") {
                        Alerts alertObj = new Alerts();
                        // iOrigAlertDate
                        //
                        alertObj.setOrgAlertDate(cursor
                                .getString(iOrigAlertDate));
                        alertObj.setAlertMinutes(cursor.getString(iMinutes));
                        alertObj.setEventState(cursor.getInt(iEventState));
                        alertObj.setRowId(cursor.getInt(iRow));
                        alertObj.setAlertInMillis(cursor
                                .getString(iAlertInMills));
                        alertObj.setEventState(cursor.getInt(iEventState));
                        alertObj.setAlertState(cursor.getInt(iAlertState));
                        alertObj.setEventName(cursor.getString(iName));
                        alertObj.setLocation(cursor.getString(iLocation));
                        alertObj.setStartTime(cursor.getString(iStartTime));
                        alertObj.setAlertTime(cursor.getString(iAlertTime));
                        alertObj.setDate(cursor.getString(iDate));

                        alertsOfList.add(alertObj);

                    }
                }
            }
        } catch (Exception e) {

            e.printStackTrace();
            alertsOfList = null;

        } finally {

            if (cursor != null && !cursor.isClosed()) {

                cursor.deactivate();
                cursor.close();
                cursor = null;

            }

        }

        return alertsOfList;
    }

    // //////////

    public void updateEventState(long lRow, int eventState) {
        // is Event running or canceled

        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_EVENTSTATE, eventState);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);

        // setValue("penny");

    }

    public void updateEventStartTime(long lRow, int eventStartTime) {

        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_EVENTSTARTTIME, eventStartTime);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
        // setValue("penny");

    }

    public void updateAlertState(long lRow, int alertState) {
        System.out.println(lRow+"---------update alert state is " + alertState);

        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_EVENTALERTSTATE, alertState);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);

        // setValue("penny");

    }

    // public void updateEventAlertTime(long lRow, String updateAlertTime) {
    // // time update from notification
    // System.out.println("----updateEventAlert time is "+updateAlertTime);
    // ContentValues updateCV = new ContentValues();
    // updateCV.put(KEY_EVENTALERTTIME, updateAlertTime);
    // database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
    //
    //
    // }

    public void updateAlertTime(long lRow, String updateAlertTime) {
        // time update from notification

        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_EVENTALERTTIME, updateAlertTime);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
        // setValue("penny");

    }

    public void updateEventLocation(long lRow, String location) {
        // time update from notification
        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_LOCATION, location);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
        // setValue("penny");

    }

    public void updateEventState(long lRow, String state) {
        // time update from notification
        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_EVENTSTATE, state);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
        // setValue("penny");

    }

    public void updateDate(long lRow, String state) {
        // time update from notification
        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_DATE, state);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
        // setValue("penny");

    }

    public void updateAlertInDB(long lRow, String date, String alertInMillis,
            String minutes, String alertTime) {
        ContentValues updateCV = new ContentValues();
        updateCV.put(KEY_ORIGINALALALERTDATE, date);
        updateCV.put(KEY_EVENTALERTTIME, alertTime);
        updateCV.put(KEY_ALERTMINUTES, minutes);
        updateCV.put(KEY_ALERTINMILLIS, alertInMillis);
        System.out.println("------------------"+alertInMillis + " " + date + " " + minutes);
        database.update(DATABASE_TABLE, updateCV, KEY_ROWID + "=" + lRow, null);
        // setValue("penny");

    }

    public void deleteEntry(long lRow1) {
        // TODO Auto-generated method stub

        database.delete(DATABASE_TABLE, KEY_ROWID + "=" + lRow1, null);
        // setValue("penny");
    }

} 
```

**更新**

当 Activity 被销毁时，游标会更新。还有其他方法可以从 sqlite 数据库中获取最新数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:59:14.837

我需要在 Sql 数据库中的 getAlertState 函数中指定行。

```
 cursor = database.query(DATABASE_TABLE, columns, _id, null, null,
                    null, null); 
```

# nhibernate - 为 NHibernate 3.x 预生成代理？

> ID：12032082
> 
> 赞同：9
> 
> 时间：2012-08-20T03:49:40.560
> 
> 标签：nhibernate, orm, lazy-loading

是否可以在 NHibernate 3 下预生成延迟加载代理？

NHibernate 2 通过[NHPG](http://nhforge.org/wikis/howtonh/pre-generate-lazy-loading-proxies.aspx)支持此功能，但我可以看到 NHPG 尚未针对 NH3 进行更新。下载[NHPG 源](http://sourceforge.net/projects/nhcontrib/files/NHibernate.ProxyGenerators/1.0.0%20Beta%20621/NHibernate.ProxyGenerators-1.0.0.Beta621-src.zip/download)并盲目地将组件参考从 NH2 更改为 NH3 会炸毁；NH3 具有内置的代理生成，并且已经重新组织了一些东西。

人们（预）如何在 NH3 下生成惰性代理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T14:41:22.217

我已更新 NHPG 以支持 NHibernate 3.3.1 GA。

你可以在这里获取来源：[https ://github.com/NHibernate-Contrib/NHibernate.ProxyGenerators](https://github.com/NHibernate-Contrib/NHibernate.ProxyGenerators)

在我们发布正式版本之前，您现在必须手动构建它（下载源代码并运行`package.cmd`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:07:23.397

我不知道这是否回答了您的问题，因为我没有看到任何与您使用的语言相关的标签。

在 .NET 中，我使用[Fluent NHibernate](http://www.fluentnhibernate.org/)和 POCO 对象。不知道是否有工具可以将您的 XML 文件升级为 POCO 类以与 Fluent NHibernate 一起使用。

# jquery - 如何使用jquery获取每一行和每一列的表格单元格的值

> ID：12032085
> 
> 赞同：1
> 
> 时间：2012-08-20T03:50:29.297
> 
> 标签：jquery

HTML：

```
<div id="checkout-review-table-wrapper">
  <table class="data-table" id="checkout-review-table" width="100%">
<colgroup>
<col>
<col width="1">
<col width="1">
<col width="1">
</colgroup>
<thead>
  <tr class="first last">
    <th rowspan="1">Product Name</th>
    <th colspan="1" class="a-center">Price</th>
    <th rowspan="1" class="a-center">Qty</th>
    <th colspan="1" class="a-center">Subtotal</th>
  </tr>
</thead>
<tfoot>
  <tr class="first">
    <td style="" class="a-right" colspan="3"> Subtotal </td>
    <td style="" class="a-right last"><span class="price">AU$891.00</span></td>
  </tr>
  <tr>
    <td style="" class="a-right" colspan="3"> Delivery (Free Shipping - Fixed) </td>
    <td style="" class="a-right last"><span class="price">AU$0.00</span></td>
  </tr>
  <tr class="last">
    <td style="" class="a-right" colspan="3"><strong>Grand Total</strong></td>
    <td style="" class="a-right last"><strong><span class="price">AU$891.00</span></strong></td>
  </tr>
</tfoot>
<tbody>
  <tr class="first odd">
    <td><h3 class="product-name">Portland Polo T</h3>
      <dl class="item-options">
        <dt>Men Tops Size</dt>
        <dd>XL </dd>
      </dl></td>
    <td><span class="cart-price"> <span class="price">AU$99.00</span> </span></td>
    <td class="a-center">3</td>
    <td class="last"><span class="cart-price"> <span class="price">AU$297.00</span> </span></td>
  </tr>
  <tr class="even">
    <td><h3 class="product-name">Graphite Hooded Vest</h3>
      <dl class="item-options">
        <dt>Men Tops Size</dt>
        <dd>XL </dd>
      </dl></td>
    <td><span class="cart-price"> <span class="price">AU$99.00</span> </span></td>
    <td class="a-center">2</td>
    <td class="last"><span class="cart-price"> <span class="price">AU$198.00</span> </span></td>
  </tr>
  <tr class="last odd">
    <td><h3 class="product-name">Radar Low Loose</h3>
      <dl class="item-options">
        <dt>Men Jean Sizing</dt>
        <dd>28/30 </dd>
      </dl></td>
    <td><span class="cart-price"> <span class="price">AU$99.00</span> </span></td>
    <td class="a-center">4</td>
    <td class="last"><span class="cart-price"> <span class="price">AU$396.00</span> </span></td>
  </tr>
</tbody>
  </table>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript"> 
```

JavaScript：

```
var pure = {};
pure = jQuery.noConflict(true);
c=0;
while(c<4)
{
c++;
output='';
pure('#checkout-review-table tbody tr td:nth-child('+c+')').each(function() {
   output += pure(this).text();
});
alert(output);

}

</script> 
```

它一次提供一列的所有数据。我需要一次获取每行的 4 列数据。我的意思是第一行第一列，第一行第二列，第一行第三列，第一行第四列，第二行第一列等等最多12个数据。我无法在上表中进行任何更改更改，也无法添加任何类，因为它是一个自生成的表。我会很感激你的帮助。

# java - 访问枚举常量

> ID：12032088
> 
> 赞同：1
> 
> 时间：2012-08-20T03:51:01.417
> 
> 标签：java, enums, constants

> **可能重复：**
> [Java：访问枚举（枚举）中的常量](https://stackoverflow.com/questions/5206603/java-access-to-the-constants-in-an-enumeration-enum)

我正在通过java中的枚举，我有以下查询..我做了一个枚举让我们说..

```
 public enum Currency {
        PENNY(1), NICKLE(5), DIME(10), QUARTER(25);
        private int value;

        private Currency(int value) {
                this.value = value;
        }
}; 
```

现在假设如果我有一个类 A ，那么请告诉我如何从类 A 访问上面的枚举常量，也请告诉我第二种方法是代替枚举我也可以使用接口方法有什么优点枚举提供以上接口..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:11:42.220

您需要声明一个`getValue()`方法来返回`value`每个枚举常量的属性：

```
public int getValue() {
    return value;
} 
```

像这样使用它：

```
Currency quarter = Currency.QUARTER;
int quarterValue = quarter.getValue();  // it's 25 for the code in the question 
```

请注意，上述值与枚举​​的*序*数值不同，其访问方式如下：

```
int quarterOrdinal = quarter.ordinal(); // it's  3 for the code in the question 
```

关于枚举的优点：它们是一种类型安全的方式来指定数据类型只有一组有限的可能值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T04:12:05.803

枚举为您提供[类型安全](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)

我认为您在这里遇到的问题是将值定义为`private`. 因此，您无法访问常量的值。

`Remove private`从价值声明和使用

```
System.out.println(Currency.DIME.value); 
```

（或）为 value 属性定义 get 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T04:05:41.640

根据 Effective java Interface 常量是不好的做法。接口将定义类型而不是常量。从 A 类中，您可以定义可以保存枚举值的变量，然后您可以为其分配任何枚举值

```
 Currency penny = Currency.PENNY; 
```

# c# - 组合 4 个功能的困惑

> ID：12032093
> 
> 赞同：0
> 
> 时间：2012-08-20T03:51:51.963
> 
> 标签：c#, xml, winforms

如果我的代码凌乱或笨重，请多多包涵，我是一个真正的初学者，一个月前开始编程，完全没有背景。我现在创建了 4 个函数`searchComByAuthor();`、`searchComByStartDate();`和。但问题是，我不知道如何将它们组合起来，使它们像过滤器一样。用户可以选择填充任何文本框，当用户单击“分析”按钮时，组合功能将完成工作。现在它们都是分开工作的，我只是一一调用函数来测试它们是否有效。`searchComByEndDate();``searchComByKeywords();`

截屏：

![过滤器](../Images/992f4383a334d767be01395ebc8d98ed.png)

`searchComByAuthor`：

```
private void searchComByAuthor()
{
    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
        try
        {
            XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

            string docPath = fileName;

            xmlDoc.Load(docPath); //* load the XML document from the specified file.

            XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

            foreach (XmlNode node in nodeList)
            {

                XmlElement itemElement = (XmlElement)node;

                string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;

                if (itemAuthor.ToLower() == txtComAuthor.Text.ToString().ToLower())
                {
                    string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                    string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
                    string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;
                    string itemXMLFile = Path.GetFileNameWithoutExtension(fileName);

                    richComByTemplate.AppendText("SYMBOL: " + itemXMLFile + "\nAUTHOR: " + itemAuthor + "\nDATE: " + itemDate +
                                                "\nTITLE: " + itemTitle + "\nDESCRIPTION: " + itemDescription + "\n\n--------\n\n");

                }
                //else
                //{
                //    richComResults.AppendText("There is no author " + txtComAuthor.Text.ToString().ToLower() + ". Please ensure you are using a correct author name.");
                //}
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    int pointer = 0;
    int index = 0;
    string keyword = txtComAuthor.Text;
    string shadow = richComByTemplate.Text.ToLower();

    while (true)
    {
        //Searching in the copy/shadow
        index = shadow.IndexOf(keyword, pointer);
        //if keyword not found then the loop will break
        if ((index == -1) || (String.IsNullOrEmpty(keyword)))
        {
            break;
        }
        richComByTemplate.Select(index, keyword.Length);
        richComByTemplate.SelectionColor = Color.Red;
        richComByTemplate.SelectionFont = new System.Drawing.Font(richComByTemplate.Font, FontStyle.Bold);
        pointer = index + keyword.Length;
    }
} 
```

`searchComByStartDate`：

```
private void searchComByStartDate()
{

    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
        XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

        string docPath = fileName;

        xmlDoc.Load(docPath); //* load the XML document from the specified file.

        XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

        foreach (XmlNode node in nodeList)
        {

            XmlElement itemElement = (XmlElement)node;

            string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
            CultureInfo provider = CultureInfo.InvariantCulture;
            if (DateTime.Parse(itemDate) >= DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider))
            {
                string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;
                string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;
                string itemXMLFile = Path.GetFileNameWithoutExtension(fileName);

                richComByTemplate.AppendText("SYMBOL: " + itemXMLFile + "\nAUTHOR: " + itemAuthor + "\nDATE: " + itemDate + 
                                            "\nTITLE: " + itemTitle + "\nDESCRIPTION: " + itemDescription + "\n\n--------\n\n");
            }
        }
    }
} 
```

`searchComByEndDate`：

```
private void searchComByEndDate()
{
    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
        XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

        string docPath = fileName;

        xmlDoc.Load(docPath); //* load the XML document from the specified file.

        XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

        foreach (XmlNode node in nodeList)
        {

            XmlElement itemElement = (XmlElement)node;

            string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
            CultureInfo provider = CultureInfo.InvariantCulture;
            if (DateTime.Parse(itemDate) <= DateTime.ParseExact(txtComEndDate.Text, "dd/MM/yy", provider))
            {
                string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;
                string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;
                string itemXMLFile = Path.GetFileNameWithoutExtension(fileName);

                richComByTemplate.AppendText("SYMBOL: " + itemXMLFile + "\nAUTHOR: " + itemAuthor + "\nDATE: " + itemDate + 
                                            "\nTITLE: " + itemTitle + "\nDESCRIPTION: " + itemDescription + "\n\n--------\n\n");
            }
        }
    }
} 
```

`searchComByKeywords`：

```
private void searchComByKeywords()
{
    List<TextBox> boxes = new List<TextBox>();
    boxes.Add(txtComKeyword1);
    boxes.Add(txtComKeyword2);
    boxes.Add(txtComKeyword3);
    boxes.Add(txtComKeyword4);

    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
        try
        {
            XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

            string docPath = fileName;

            xmlDoc.Load(docPath); //* load the XML document from the specified file.

            XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

            foreach (XmlNode node in nodeList)
            {
                XmlElement itemElement = (XmlElement)node;

                string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;

                if (txtComKeyword1.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword1.Text.ToLower()) ||
                    txtComKeyword2.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword2.Text.ToLower()) ||
                    txtComKeyword3.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword3.Text.ToLower()) ||
                    txtComKeyword4.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword4.Text.ToLower()))
                {
                    string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                    string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
                    string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;
                    string itemXMLFile = Path.GetFileNameWithoutExtension(fileName);

                    richComByTemplate.AppendText("SYMBOL: " + itemXMLFile + "\nAUTHOR: " + itemAuthor + "\nDATE: " + itemDate + 
                                                "\nTITLE: " + itemTitle + "\nDESCRIPTION: " + itemDescription + "\n\n--------\n\n");

                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    foreach (TextBox box in boxes)
    {
        int pointer = 0;
        int index = 0;
        string keyword = box.Text;
        string shadow = richComByTemplate.Text.ToLower();

        while (true)
        {
            //Searching in the copy/shadow
            index = shadow.IndexOf(keyword, pointer);
            //if keyword not found then the loop will break
            if ((index == -1) || (String.IsNullOrEmpty(keyword)))
            {
                break;
            }
            //Customising the original data
            richComByTemplate.Select(index, keyword.Length);
            richComByTemplate.SelectionColor = Color.Red;
            richComByTemplate.SelectionFont = new System.Drawing.Font(richComByTemplate.Font, FontStyle.Bold);
            pointer = index + keyword.Length;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T03:54:28.383

您的函数中有大量重复的代码。

通过将四个函数组合成一个函数，您可以在简化代码的同时实现您的目标。为该单个函数提供一个参数，该参数是包含给定记录必须满足的条件列表（假设*所有*条件都必须适用于选择记录）。

在您的情况下，您似乎希望对一个或多个文本字段中输入的任何内容进行直接匹配。将这些文本字段的值传递给您的新组合方法（以便您可以将逻辑与 UI 分离），并且对于每个具有非空、非空值的值，应用适当的逻辑测试。如果传入了 Author 和 StartDate，则应用与 Author 和 StartDate 相关的逻辑。如果两个测试都通过，则包括该记录。

为了“包含该记录”，而不是执行代码当前正在执行的操作：

```
richComByTemplate.AppendText(...) 
```

您可能希望返回结果列表并让调用者执行文本附加（同样，将您的用户界面与搜索逻辑分开）。

# objective-c - UITextField 不允许输入

> ID：12032095
> 
> 赞同：1
> 
> 时间：2012-08-20T03:52:02.557
> 
> 标签：objective-c, ios, uitextfield

我正在以编程方式将 a 添加`UITextField`到`UIImageView`. 当我设置文本属性时，我可以看到文本。

问题是，当我运行应用程序时，它不会让我像输入字段一样输入文本。

这是我初始化 TextField 的代码：

```
UITextField *textField = [[UITextField alloc] init];
textField.frame = CGRectMake(38.0f, 0.0f, self.view.frame.size.width - 38.0f, 40.0f);
textField.text = @"Hello";
textField.background = [[UIImage imageNamed: @"field.png"] stretchableImageWithLeftCapWidth:12 topCapHeight:19];
textField.backgroundColor = [UIColor whiteColor];
textField.userInteractionEnabled = YES;

[bar addSubview: textField]; 
```

我需要做一些特别的事情来允许文本输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:11:39.537

如果 bar 是`UIImageView`, 尝试设置

```
bar.userInteractionEnabled = TRUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:14:22.080

文本字段未添加到 imageview 中。您可以在视图上添加文本字段，以启用用户交互。首先，您可以添加 imageview，然后在视图上添加文本字段。

像这样 -

`[self.view addSubview:imgV]; [self.view addSubview: textField];`

# android - 在Android中的应用程序初始启动时导入数据？

> ID：12032096
> 
> 赞同：0
> 
> 时间：2012-08-20T03:52:07.807
> 
> 标签：android, import-from-csv

我需要一些文本数据（200 万城镇的街道名称）才能进入我的 android 应用程序。我认为最好的方法是在第一次启动时将其存储到只读的 sqlite 数据库中。正如我所读到的，使用预定义的数据库执行此操作非常乏味且不干净，但您必须从外部存储或其他东西复制它，然后将数据复制两次。所以我考虑使用原始资源中的CSV文件并在导入后将其删除，但这也不可能，因为这些数据将内置到sdk文件中，无法再删除。

我的目标是从本地进行某种初始数据传输并删除此数据源。任何想法如何正确地实现这一目标？我不想从服务器下载数据，因为这意味着我的应用程序需要互联网连接的唯一原因是下载初始数据。否则它不需要互联网连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:47:05.303

我想我会压缩初始安装资源中的数据并在安装时扩展它。这个答案参考了一个 7zip 开源 java api。

[Android 上的数据压缩（java.util.zip 除外？）](https://stackoverflow.com/questions/11646025/data-compression-on-android-other-than-java-util-zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:09:47.090

将 .csv 文件放入您的资产文件夹并阅读它怎么样。

```
 String next[] = {};
        List<String[]> list = new ArrayList<String[]>();

   try {
        CSVReader reader = new CSVReader(new InputStreamReader(getAssets().open("test.csv")));
        for(;;) {
            next = reader.readNext();
            if(next != null) {
                list.add(next);
            } else {
                break;
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:28:30.243

同时我知道我将在我的应用程序中使用的数据过于复杂，无法手动填充数据。此外，该应用程序无论如何都需要互联网访问，因此我将使用 Json 字符串来获取数据。

# javascript - 是否可以使用 javascript 从 BlackBerry WiFi 获取地理位置？

> ID：12032097
> 
> 赞同：1
> 
> 时间：2012-08-20T03:52:16.323
> 
> 标签：javascript, blackberry, geolocation

我正在尝试使用我的 javascript 来获取黑莓的当前地理位置，但在那个方法中总是处理错误块。

这是我的 javascript：

```
function getCurrentPosition() {

    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(

            function( position ) {
                alert(position.coords.latitude + ', ' +position.coords.longitude);
            },

            function( error ) {
                alert( "Something went wrong: ", error );
            },

            {
                timeout: (10 * 1000)
            }

        );

    }
    else {
        alert("Geolocation is not supported by this browser.");
    }
} 
```

在该方法中，始终会提示消息“出现问题：”。

**注意**：我只使用带 WiFi 的 Blackberry 9780

谢谢

# macos - NSTextField 问题

> ID：12032098
> 
> 赞同：0
> 
> 时间：2012-08-20T03:52:29.863
> 
> 标签：macos, cocoa, interface-builder, nstextfield, osx-mountain-lion

我的 MainMenu 笔尖中有一个 NSTextField... ![在此处输入图像描述](../Images/3a016a89f499c13c3e90688e88988f4d.png) 此文本字段的选择器已连接到 AppDelegate。我还设置了在编辑结束时发送的操作。像这样...

![在此处输入图像描述](../Images/6bf4836683351fd604584e5d2ee57569.png)

我不知道为什么，但只有当用户点击返回时才会发送操作。“发送结束编辑”以前从未有过这样的表现。任何想法为什么我有这种奇怪的行为？非常感谢你的帮助！

# ruby - 用逗号输出到文件导致ruby文件中的新行

> ID：12032100
> 
> 赞同：0
> 
> 时间：2012-08-20T03:52:47.890
> 
> 标签：ruby

所以我有一个文件，在从用户那里获取用户名、密码和角色以添加到该文件后，我试图写入该文件。一切似乎都运行良好，但是当我打开文件进行写入并输入 puts 命令时，它会在密码部分之后创建一个新行。这是代码片段。

```
File.open("user.file", "a") do |file|
  file.puts "#{userName}=#{passwordEncoded},#{role},enabled" 
```

这是我之后在文件本身中得到的

```
danny=ieSV55Qc+eQOaYDRSha/AjzNTJE=
,ROLE,enabled 
```

它可能与编码密码末尾的 = 有关，但我不确定。密码总是以相同的大小结束，所以这可能会导致问题吗？但我不确定这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T03:54:09.983

您的`passwordEncoded`变量以换行符结尾。变量的实际内容将是

```
"ieSV55Qc+eQOaYDRSha/AjzNTJE=\n" 
```

您的代码没有问题。它的行为完全符合预期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T05:00:24.550

添加对变量的`chomp`调用以`passwordEncoded`删除换行符：

```
File.open("user.file", "a") do |file|
  file.puts "#{userName}=#{passwordEncoded.chomp},#{role},enabled" 
```

# c# - c#asp.net中如何提高包含10000条数据记录的Gridview的性能？

> ID：12032107
> 
> 赞同：1
> 
> 时间：2012-08-20T03:54:01.353
> 
> 标签：c#, asp.net, gridview, datagridview

我有一个面试问题。

Q. 如何`Gridview contains 100000 Records`在 c# asp.net 中提高数据（数据源可能是 XML 或 DB）的性能？

我只是眨眼，因为我对此没有答案。请给我解决方案。如果可能，请提供一个演示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T04:17:48.503

没有 gridview 应该包含 100000 条记录。

您的数据源可能包含 10 倍于该数量的记录，这无关紧要。如果您在屏幕上向用户展示超过 100 条记录，则很难使用这些数据。

为 gridview 选择一个支持分页的数据源，这样您只需处理要在屏幕上显示的记录数。

对于数据库，您可以使用[SqlDataSource 之](http://msdn.microsoft.com/en-us/library/dz12d98w%28v=vs.80%29.aspx)类的东西。默认的[XmlDataSource](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.xmldatasource.aspx)不支持分页，在这种情况下，网格将在内存中保存所有记录并自行处理分页。对于具有大量记录的 xml，请考虑使用[ObjectDataSource](http://msdn.microsoft.com/en-us/library/9a4kyhcx.aspx)，您可以在其中自己实现分页。

如果可以选择，请始终选择支持分页的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:03:35.093

要修复这样的 GridView，我认为一个好的方法是：

*   添加分页（正如其他人已经指出的那样）
*   添加过滤/搜索
*   为显示的最大行数添加上限/限制

结果的过滤+最大限制（在我看来）是保持网格大小可管理的好方法。如果使用某些指定的过滤器集（=搜索词）达到最大限制，您可以向用户显示有关它的消息，并鼓励他/她在必要时指定更具体的搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:25:50.357

如前所述，gridview 不应该包含这么多行。在你的采访中，他们想看看你是否可以说它的实现很糟糕，而不是检查你的编程技能。

但是，如果坚持要获得良好的性能，我会建议使用 Repeater 而不是 Gridview。

干杯，冉

# objective-c - 从 GCD 队列中调用另一个方法

> ID：12032108
> 
> 赞同：0
> 
> 时间：2012-08-20T03:54:01.970
> 
> 标签：objective-c, multithreading, grand-central-dispatch

如果我这样做：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
[self someMethod];
 }); 
```

这`someMethod`是：

```
-(void)someMethod{
  //doing stuff with no mention of GCD
 } 
```

将`someMethod`在调度队列中运行，还是该队列等待`someMethod`在主线程上运行，因为`someMethod`它本身不向其他队列调度任何内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T04:03:17.790

方法在调用它们的线程或队列上执行。因此，如果您想在后台队列上处理数据后更新 UI，则需要在主线程上显式执行 UI 更新。

例如：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
   [self someMethod];
});

- (void) someMethod{
    dispatch_async(dispatch_get_main_queue(), ^{
        // Update UI here
    });
} 
```

# tsql - 如何在动态 TSQL 中格式化操作的 DateTime 字段

> ID：12032117
> 
> 赞同：1
> 
> 时间：2012-08-20T03:55:09.423
> 
> 标签：tsql, date, datetime, dynamic, time

我有一个基本上看起来像这样的查询，它包含在一个动态查询中以适应可以更改的表名。我在中间转换了日期函数，但它不喜欢最后的 LoadedDateTime 和 CallPlacedTime。我已经尝试了引用我能想到的那些行的每一个转换和组合。我怎样才能做到这一点？

```
DECLARE @sql_TotalDialsNewLeads nvarchar(1000) = N'
 SELECT COUNT(*)
   FROM ' + @tbl_CH + ' ch, ' + @tbl_CL + ' cl, ' + @tbl_DA + ' da
  WHERE ch.IDENTITY = cl.IDENTITY
    AND cl.CRMID = da.CRMID
    AND CallPlacedTime BETWEEN ''' +  CONVERT(varchar(30),DATEADD(HOUR,-@TimezoneOffset,@StartDate),126) + '''
                           AND ''' +  CONVERT(varchar(30),DATEADD(HOUR,-@TimezoneOffset,@EndDate),126) + '''
    AND Product = ''' + @Product + '''
    AND Country = ''' + @Country + '''
    AND DATEPART(DayOfYear,DATEADD(HOUR,-@TimezoneOffset,LoadedDateTime))
      = DATEPART(DayOfYear,DATEADD(HOUR,-@TimezoneOffset,CallPlacedTime))'

 EXECUTE(@sql_TotalDialsNewLeads); 
```

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:32:07.543

尝试使用`sp_executesql`with 参数而不是使字符串手动执行：

```
...    
AND CallPlacedTime BETWEEN DATEADD(HOUR,-@TimezoneOffset,@StartDate) 
AND DATEADD(HOUR,-@TimezoneOffset,@EndDate)
... 
```

并使用以下语句执行它：

```
exec sp_executesql @sql_TotalDialsNewLeads, 
N'@StartDate datetime, @EndDate datetime',
@StartDate,@EndDate; 
```

这是一个[MSDN 指南](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。您也可以对 SQL 语句中的其他参数执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:04:18.540

不要在外部使用转换，而是在动态查询中使用它。

像这样的东西。（未测试）

```
DECLARE @sql_TotalDialsNewLeads nvarchar(1000) = N'
 SELECT COUNT(*)
   FROM ' + @tbl_CH + ' ch, ' + @tbl_CL + ' cl, ' + @tbl_DA + ' da
  WHERE ch.IDENTITY = cl.IDENTITY
    AND cl.CRMID = da.CRMID
    AND CallPlacedTime BETWEEN CONVERT(varchar(30),DATEADD(HOUR,'''+ -@TimezoneOffset +''','''+ @StartDate +'''),126)
                           AND CONVERT(varchar(30),DATEADD(HOUR,'''+ -@TimezoneOffset +''','''+ @EndDate +'''),126)
    AND Product = ''' + @Product + '''
    AND Country = ''' + @Country + '''
    AND DATEPART(DayOfYear,DATEADD(HOUR,-@TimezoneOffset,LoadedDateTime))
      = DATEPART(DayOfYear,DATEADD(HOUR,-@TimezoneOffset,CallPlacedTime))'

 EXECUTE(@sql_TotalDialsNewLeads); 
```

# ios - 使用按钮执行一段代码几秒钟/几分钟？

> ID：12032118
> 
> 赞同：0
> 
> 时间：2012-08-20T03:55:19.467
> 
> 标签：ios, xcode, uibutton, nstimer

我只想在用户按下开始按钮并自行停止它而不是使用按钮来执行此操作时运行某个方法 20 秒。但它也应该在用户在下一回合 20 秒后按下开始按钮时触发。我如何使用 NStimer 来实现这个？抱歉没有发布任何代码提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:52:51.003

```
// Assume ARC - otherwise do the proper retains/releases
{
    NSTimer *timer; // keep a reference around so you can cancel the timer if you need to
    NSDate *timerDate;
}

- (IBAction)buttonPressed:(id)sender
{
    // disable button til the time has passed
    [sender setEnabled:NO];

    // make sure its diabled til we're done here
    timerDate = [NSDate date];
    NSTimeInterval interval = 1; // 1 gets you a callback every second. If you just wnat to wait 20 seconds change it
    // schedule it
    timer = [NSTimer ]scheduledTimerWithTimeInterval:time target:self selector:@selector(myTimeRoutine:) userInfo:nil repeats:YES];
}

- (void)myTimeRoutine:(NSTimer *)timer
{
    // do something ...

    NSTimeInterval interval = -[timerDate timeIntervalSinceNow]; // return value will be negative, so change sign
    if(interval >= 20) {
        // I'm done now
        myButton.enabled = YES; // so it can be tapped again
        [timer cancel];         // dont want to get any more messages
        timer = nil;            // ARC way to release it
        timerDate = nil;
    }
} 
```

# javascript - Node.js 可以编辑视频文件吗？

> ID：12032120
> 
> 赞同：1
> 
> 时间：2012-08-20T03:55:35.390
> 
> 标签：javascript, node.js

我想知道 Node.js 与视频的兼容性如何。不是播放它们，而是实际编辑它。我的最终目标是在线反转视频。到目前为止，Java 看起来是我最好的选择，但我确实喜欢 Node.js 的快速、可扩展性等。

有谁知道 node.js 是否可行？至少能够将视频分解成帧，将它们放入某种数组中，然后将它们粘贴回去。

我的猜测可能不是，因为它看起来是基于 JavaScript 的。我可能错了，但我认为 javaScript 更多的是 UI、动画、简单数据作业等。不是大型视频编辑。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T04:04:20.237

ffmpeg/libav 是 Linux 上这类事情的首选库。虽然 node.js 有一些 ffmpeg 绑定（例如，[https](https://github.com/xonecas/ffmpeg-node) ://github.com/xonecas/ffmpeg-node ），但它们并不像您完成此任务所需的那样完整，无论如何 ffmpeg 是它本身并不是异步的，你需要让这对 node.js 有意义。

我首先尝试使用 C 使用 ffmpeg/libav 来实现此任务，然后再考虑其他实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T11:54:00.943

我会从另一端处理这个问题：我可以使用什么工具来反转视频？我确信那里有更好的选择，但至少可以使用 ffmpeg，根据[这个 SO answer](https://stackoverflow.com/questions/2553448/encode-video-is-reverse)。需要注意的是，您必须将其拆分为图像，然后将它们缝合在一起。

如果您选择这条路线（即，以所述方式使用 ffmpeg），您确实可以使用 node.js 来完成它，用于 Web 应用程序和作业处理。我会有某种工人（类似于 resque 或使用例如 node.js 的东西[`child_process.fork`](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)）。

正如@duskwuff 在他的回答中提到的那样，这个解决方案不会是流式传输的，但是使用工作人员，您可能能够完成一些可以接受的事情，具体取决于您的要求。

另一方面，如果你有一个 Java 库，它在反转视频方面非常棒，你应该使用它，也许也可以用 Java 构建 Web 应用程序。

# c - 整数溢出不一致

> ID：12032122
> 
> 赞同：8
> 
> 时间：2012-08-20T03:55:52.777
> 
> 标签：c, integer-overflow, libexif

如果这个问题以前被提出过，请原谅我。我寻找类似问题的答案，但我仍然对我的问题感到困惑。所以无论如何我都会提出这个问题。我正在使用一个名为[libexif](http://libexif.sourceforge.net/)的 C 库来存储图像数据。我在我的 Linux 桌面和 MIPS 板上运行我的应用程序（它使用这个库）。对于特定的图像文件，当我尝试获取创建时间时，我得到一个错误/无效值。在进一步调试时，我发现对于这个特定的图像文件，我没有得到预期的标签（EXIF_TAG_DATE_TIME）。

这个库有几个实用功能。大多数功能的结构如下

```
int16_t 
exif_get_sshort (const unsigned char *buf, ExifByteOrder order)
{
    if (!buf) return 0;
        switch (order) {
        case EXIF_BYTE_ORDER_MOTOROLA:
                return ((buf[0] << 8) | buf[1]);
        case EXIF_BYTE_ORDER_INTEL:
                return ((buf[1] << 8) | buf[0]);
        }

    /* Won't be reached */
    return (0);
}

uint16_t
exif_get_short (const unsigned char *buf, ExifByteOrder order)
{
    return (exif_get_sshort (buf, order) & 0xffff);
} 
```

当库试图调查原始数据中是否存在标签时，它会调用`exif_get_short()`并将返回的值分配给枚举（int）类型的变量。

在错误情况下，`exif_get_short()`应该返回无符号值 (34687) 返回一个负数 (-30871)，这会扰乱从图像数据中提取的整个标签。

34687 超出最大可表示 int16_t 值的范围。因此导致溢出。当我对代码进行这种轻微修改时，一切似乎都正常

```
uint16_t
exif_get_short (const unsigned char *buf, ExifByteOrder order)
{
    int temp = (exif_get_sshort (buf, order) & 0xffff);
        return temp;
} 
```

但是由于这是一个相当稳定的库并且已经使用了很长一段时间，它让我相信我可能在这里遗漏了一些东西。此外，这也是为其他实用程序功能构建代码的一般方式。例如：`exif_get_long()`调用`exif_get_slong()`. 然后我将不得不更改所有实用程序功能。

令我困惑的是，当我在我的 linux 桌面上为错误文件运行这段代码时，我没有发现任何问题，并且原始库代码可以正常工作。这让我相信 UINT16_MAX 和 INT16_MAX 宏在我的桌面和 MIPS 板上可能有不同的值。但不幸的是，事实并非如此。两者都在板上和桌面上打印相同的值。如果这段代码失败，它也应该在我的桌面上失败。

我在这里想念什么？任何提示将不胜感激。

编辑：调用 exif_get_short() 的代码如下所示：

```
ExifTag tag;
...
tag = exif_get_short (d + offset + 12 * i, data->priv->order);
switch (tag) {
...
... 
```

ExifTag 类型如下：

```
typedef enum {
    EXIF_TAG_GPS_VERSION_ID             = 0x0000,
EXIF_TAG_INTEROPERABILITY_INDEX     = 0x0001,
    ...
    ...
    }ExifTag ; 
```

正在使用的交叉编译器是 mipsisa32r2el-timesys-linux-gnu-gcc

```
CFLAGS        = -pipe -mips32r2 -mtune=74kc -mdspr2 -Werror -O3 -Wall -W -D_REENTRANT -fPIC $(DEFINES) 
```

我在 Qt - Qt Media hub 中使用 libexif（实际上 libexif 与 Qt Media hub 一起提供）

EDIT2：一些额外的观察：我观察到一些奇怪的东西。我已将打印语句放入 exif_get_short() 中。就在返回之前

```
printf("return_value %d\n %u\n",exif_get_sshort (buf, order) & 0xffff, exif_get_sshort (buf, order) & 0xffff);
return (exif_get_sshort (buf, order) & 0xffff); 
```

我看到以下 o/p：return_value 34665 34665

然后我还在调用 exif_get_short() 的代码中插入了打印语句

```
....
tag = exif_get_short (d + offset + 12 * i, data->priv->order);
printf("TAG %d %u\n",tag,tag); 
```

我看到以下 o/p：TAG -30871 4294936425

EDIT3：在 MIPS 板上发布 exif_get_short() 和 exif_get_sshort() 的汇编代码

```
 .file   1 "exif-utils.c"
    .section .mdebug.abi32
    .previous
    .gnu_attribute 4, 1
    .abicalls
    .text
    .align  2
    .globl  exif_get_sshort
    .ent    exif_get_sshort
    .type   exif_get_sshort, @function
exif_get_sshort:
    .set    nomips16
    .frame  $sp,0,$31       # vars= 0, regs= 0/0, args= 0, gp= 0
    .mask   0x00000000,0
    .fmask  0x00000000,0
    .set    noreorder
    .set    nomacro

    beq $4,$0,$L2
    nop

    beq $5,$0,$L3
    nop

    li  $2,1            # 0x1
    beq $5,$2,$L8
    nop

$L2:

    j   $31
    move    $2,$0

$L3:

    lbu $2,0($4)
    lbu $3,1($4)
    sll $2,$2,8
    or  $2,$2,$3
    j   $31
    seh $2,$2

$L8:

    lbu $2,1($4)
    lbu $3,0($4)
    sll $2,$2,8
    or  $2,$2,$3
    j   $31
    seh $2,$2

    .set    macro
    .set    reorder
    .end    exif_get_sshort
    .align  2
    .globl  exif_get_short
    .ent    exif_get_short
    .type   exif_get_short, @function

exif_get_short:

    .set    nomips16
    .frame  $sp,0,$31       # vars= 0, regs= 0/0, args= 0, gp= 0
    .mask   0x00000000,0
    .fmask  0x00000000,0
    .set    noreorder
    .cpload $25
    .set    nomacro

    lw  $25,%call16(exif_get_sshort)($28)
    jr  $25
    nop

    .set    macro
    .set    reorder
    .end    exif_get_short 
```

为了完整起见，ASM 代码取自我的 linux 机器

```
 .file   "exif-utils.c"
    .text
    .p2align 4,,15
    .globl  exif_get_sshort
    .type   exif_get_sshort, @function

exif_get_sshort:

.LFB1:

        .cfi_startproc
    xorl    %eax, %eax
    testq   %rdi, %rdi
    je  .L2
    testl   %esi, %esi
    jne .L8
    movzbl  (%rdi), %edx
    movzbl  1(%rdi), %eax
    sall    $8, %edx
    orl %edx, %eax
    ret
    .p2align 4,,10
    .p2align 3

.L8:
    cmpl    $1, %esi
    jne .L2
    movzbl  1(%rdi), %edx
    movzbl  (%rdi), %eax
    sall    $8, %edx
    orl %edx, %eax

.L2:
    rep
    ret
    .cfi_endproc

.LFE1:
    .size   exif_get_sshort, .-exif_get_sshort
    .p2align 4,,15
    .globl  exif_get_short
    .type   exif_get_short, @function

exif_get_short:

.LFB2:
    .cfi_startproc
    jmp exif_get_sshort@PLT
    .cfi_endproc
.LFE2:
    .size   exif_get_short, .-exif_get_short 
```

EDIT4：希望我的最后一次更新 :-) 编译器选项设置为 -O1 的 ASM 代码

exif_get_short：

```
.set    nomips16
.frame  $sp,32,$31      # vars= 0, regs= 1/0, args= 16, gp= 8
.mask   0x80000000,-4
.fmask  0x00000000,0
.set    noreorder
.cpload $25
.set    nomacro

addiu   $sp,$sp,-32
sw  $31,28($sp)
.cprestore  16
lw  $25,%call16(exif_get_sshort)($28)
jalr    $25
nop

lw  $28,16($sp)
andi    $2,$2,0xffff
lw  $31,28($sp)
j   $31
addiu   $sp,$sp,32

.set    macro
.set    reorder
.end    exif_get_short 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:33:45.780

MIPS 程序集显示的一件事（尽管我不是 MIPS 程序集方面的专家，所以我很有可能遗漏了某些东西或其他错误）是该`exif_get_short()`函数只是该函数的别名`exif_get_sshort()`。所做`exif_get_short()`的只是跳转到`exif_get_sshort()`函数的地址。

函数符号将`exif_get_sshort()`它返回的 16 位值扩展为用于返回的完整 32 位寄存器。这并没有错——这实际上可能是 MIPS ABI 指定的（我不确定）。

但是，由于`exif_get_short()`函数只是跳转到`exif_get_sshort()`函数，它没有机会清除寄存器的高 16 位。

所以当从缓冲区返回 16 位值 0x8769 时（无论是从`exif_get_sshort()`还是`exif_get_short()`），`$2`用于返回函数结果的寄存器包含`0xffff8769`，可以有以下解释：

*   作为 32 位`signed int`：-30871
*   作为 32 位 `unsigned int: 4294936425

*   作为 16 位签名`int16_t`：-30871

*   作为 16 位无符号`uint16_t`数：34665

如果编译器应该确保`$2`返回寄存器的返回类型的前 16 位设置为零`uint16_t`，那么它在它发出的代码中有一个错误`exif_get_short()`- 而不是跳转到`exif_get_sshort()`，它应该调用`exif_get_sshort()`并清除上半部分在`$2`返回之前。

从您看到的行为描述来看，代码调用`exif_get_short()`期望`$2`用于返回值的寄存器将清除高 16 位，以便整个 32 位寄存器可以按原样用于 16位`uint16_t`值。

我不确定 MIPS ABI 指定了什么（但我猜它指定`$2`寄存器的高 16 位应由 eb 清除`exif_get_short()`），但似乎存在`exif_get_short()`不能确保`$2`完全的代码生成错误在它返回之前更正或一个错误，即调用者`exif_get_short()`假设`$2`只有 16 位有效时，完整的 32 位有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:30:34.010

这在很多层面上都被打破了，我不知道从哪里开始。看看这里做了什么：

*   从缓冲区中读取无**符号字符。**
*   它们被分配到一个**已登录** `int16_t`的`exif_get_sshort`.
*   这被分配给**未登录** `uint16_t`的`exif_get_short`。
*   这最终被分配给`enum`类型为**signed** `int`的类型。

我会说这是一个奇迹，它完全有效。

首先，从字符到的赋值`int16_t`是用值完成的，而不是用表示：

```
return ((buf[0] << 8) | buf[1]); 
```

当结果实际上是否定的时，这已经将您带入了未定义行为的陷阱。另外，它仅在实现的签名 int 表示与文件格式中使用的表示相同时才有效（我猜是二进制补码）。它会因为一个人的补码和符号大小而失败。因此，请检查 MIPS 实施的情况。

干净的方法是相反的：将缓冲区中的两个字符分配给一个`uint16_t`，这将是定义明确的操作，并使用它返回一个`int16_t`。然后，如有必要，您可以关注不同表示的值的进一步更正。

此外，这里：

```
if (!buf) return 0; 
```

0 是一个非常糟糕的返回值选择，因为它是一个有效的枚举常量：

```
EXIF_TAG_GPS_VERSION_ID             = 0x0000, 
```

如果预计这是无效的默认值，则应返回常量，而不是幻数。虽然这似乎是一个返回 的通用函数`int16_t`，但这里应该使用其他一些错误机制。

对于您的具体问题，请遵循您的 MIPS 实现上的有符号和无符号之间的转换流程，包括完成的默认提升，并检查所有中间值以找到它中断的点。您的 MIPS 使用 32 位整数，而不是 16 位，对吗？检查 INT_MAX 和 UINT_MAX。

# sql-server-2008 - 从字符串转换日期和/或时间时转换失败

> ID：12032125
> 
> 赞同：1
> 
> 时间：2012-08-20T03:56:23.323
> 
> 标签：sql-server-2008, datetime, varchar

我正在使用 SQL Server 2008 R2，并且我选择了使用“将数据作为脚本”->“使用列名插入”将表中的数据导出到 SQL INSERT 脚本的选项。这导致了类似于以下的脚本：

```
INSERT INTO [MyTable] ([Id],[InsertDateTime],[Firstname],[Email]) VALUES (1, '26/06/2012 2:02:25 p.m.', 'Robert', 'robert@test.com');
INSERT INTO [MyTable] ([Id],[InsertDateTime],[Firstname],[Email]) VALUES (2, '28/06/2012 4:17:21 a.m.', 'David', 'david@test.com'); 
```

如果我立即尝试在表的空版本上运行这个生成的脚本，我会收到以下错误：

```
Conversion failed when converting date and/or time from character string. 
```

2个问题：

1.  日期/时间字符串的格式为“dd/mm/yyyy h:mm:ss”。如何告诉 SQL Server 我想要转换日期/时间的字符串表示形式的特定格式？该脚本生成大约 5000 行 INSERT 行，因此我可以在合理的地方进行查找和替换...
2.  为什么 SQL Server 甚至会生成一个它无法运行的脚本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:17:16.783

首先使用[set dateformat](http://msdn.microsoft.com/en-us/library/aa259188%28v=sql.80%29.aspx)设置正确的日期部分顺序。在你的情况下“dmy”。然后将所有语句中的所有“am”替换为“AM”，将“pm”替换为“PM”。以下脚本工作正常：

```
 set dateformat dmy

 INSERT INTO [MyTable] ([Id],[InsertDateTime],[Firstname],[Email]) 
   VALUES (1, '26/06/2012 2:02:25 PM', 'Robert', 'robert@test.com');
 INSERT INTO [MyTable] ([Id],[InsertDateTime],[Firstname],[Email]) 
     VALUES (2, '28/06/2012 4:17:21 AM', 'David', 'david@test.com'); 
```

# ruby-on-rails-3 - 将 Rails 3.2.8 安装到 Solaris 11

> ID：12032129
> 
> 赞同：0
> 
> 时间：2012-08-20T03:57:27.053
> 
> 标签：ruby-on-rails-3, solaris

我正在尝试使用运行 Rails 3.2.8 的 Solaris 11 创建虚拟机。有教程或脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:55:47.990

似乎 Solaris 11 明显缺少一些您几乎可以说是新版本 Ruby 的必需品。我听到了甲骨文的忠实拥护者说他们正在运送 Ruby！嗯 Ruby 1.8 版，它已经有将近 5 年的历史了，距离 EOL 仅几个月的时间。

所以你需要做的是在 Solaris 11 上构建 ruby​​ 1.9.3-p125，显然是通过编译器，我使用的是 Solaris 11 repo 中包含的最新 gcc。不要忘记也安装 libyaml，否则我们会以烦人的消息结束。

从安装 libyaml 开始：

```
wget http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz
tar xzf yaml-0.1.4.tar.gz
cd yaml-0.1.4
./configure
make
sudo make install 
```

很直接没有问题。

安装 Ruby 1.9.3-p125（较新的版本对我有用）

```
wget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p125.tar.gz
tar xzf ruby-1.9.3-p125.tar.gz
cd ruby-1.9.3-p125
./configure --enable-shared --with-opt-dir=/usr/local/lib
make
sudo make install 
```

请注意，如果不指定 ---with-opt-dir，则无法找到 libyaml

```
ruby -v
ruby 1.9.3p125 (2012-02-16) [i386-solaris2.11]
gem -v
1.8.11
sudo install rails 
```

这可能不是解决在 Solaris 上安装 Ruby on Rails 的正确方法我是开发人员而不是系统管理员。

# java - Hibernate 库与日志 jar 中的 jbossall-client 库冲突

> ID：12032132
> 
> 赞同：3
> 
> 时间：2012-08-20T03:58:10.937
> 
> 标签：java, hibernate, jboss, log4j, ejb

我正在开发一个访问本地数据库的项目，然后在 JBoss AP 服务器中调用远程 EJB 服务。

因此，我使用 hibernate-release-4.1.5.Final 作为 hibernate 和 jbossall-client.jar 来调用远程 EJB 服务。

但是，在运行 jndiContext.lookup("xxx") 方法时，出现异常，消息如下所示。

```
Exception in thread "main" java.lang.NoSuchFieldError: TRACE
    at org.jboss.logging.Log4jLogger.translate(Log4jLogger.java:64)
    at org.jboss.logging.Log4jLogger.isEnabled(Log4jLogger.java:39)
    at org.jboss.logging.Logger.isTraceEnabled(Logger.java:98)
    at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:623)
    at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:590)
    at javax.naming.InitialContext.lookup(InitialContext.java:392) 
```

我试过发现Hibernate框架的jboss-logging-3.1.0.GA.jar会和jbossall-client.jar冲突。
如果排除此 jar，则 EJB 可以成功运行，但休眠部分将无法运行。

我很好奇这个异常是否是由 jboss-logging-3.1.0.GA.jar 的 Log4J 和 jbossall-client.jar 之一之间的版本差异引起的。

我在项目中放入的 jars 如下所示。
1.antlr-2.7.7.jar
2.dom4j-1.6.1.jar
3.hibernate-commons-annotations-4.0.1.Final.jar
4.hibernate-core-4.1.5.Final.jar
5.hibernate- jpa-2.0-api-1.0.1.Final.jar
6.javassist-3.15.0-GA.jar
7.jboss-logging-3.1.0.GA.jar
8.jboss-transaction-api_1.1_spec-1.0.0 .Final.jar
9.jbossall-client.jar

JDK：jdk1.6.0_25

任何人都可以给我一个建议或解决方案吗？如果需要任何信息，请随时告诉我。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T06:31:31.637

尝试获取[更新版本的 log4j](http://logging.apache.org/log4j/1.2/download.html)，休眠 4 需要（我认为）1.2.12 或更高版本。您可能需要将它放在服务器的 lib 目录中。如果这不起作用，您可能需要改用 hibernate 3。

# php - 建议在 Yii Framework App 中使用的图像旋转器？

> ID：12032133
> 
> 赞同：0
> 
> 时间：2012-08-20T03:58:32.970
> 
> 标签：php, yii, yii-extensions

我有一个扩展，它显示了从 Yii 小部件类派生的基本用户配置文件。我的扩展定义如下：

```
class BasicProfile extends CWidget
{
public $user_id;
private $userinfo = array();
private $userdetail = array();
private $availibility = array();
private $availabletime = array();
private $usereducation = array();
private $userlanguages = array();
private $userlivingplace = array();

public function init()
{
    $this->userinfo = $users =  Users::model()->findByPk($this->user_id);
    $this->userdetail = $users->profile;
    $this->availibility = $users->user_availibility;
    $this->availabletime = $users->user_availabletime;
    $this->usereducation = $users->user_education;
    $this->userlanguages = $users->user_languagues;
    $this->userlivingplace = $users->user_livingplaces;
}
public function run() {
    $this->getUserDetail();
}
public function getUserDetail(){
    $basic = $this->userinfo;
    $detail = $this->userdetail;
    $availibility = $this->availibility;
    $availabletime = $this->availabletime;
    $usereducation = $this->usereducation;
    $userlanguages = $this->userlanguages;
    $userlivingplaces = $this->userlivingplace;

    $age = getAge(strtotime($detail['date_of_birth']));
    $is_smoker = isSmoker($detail['is_smoker']);

    $education = '';
    foreach ($usereducation as $ue)
    {
        $e = $ue->educ;
        $education .= $e['edu_name']. ', ';
    }
    $education = substr($education, 0, -2);
    $languages = '';
    foreach ($userlanguages as $ul)
    {
        $l = $ul->lang;
        $languages .= $l['language_title']. ', ';
    }
    $languages = substr($languages, 0, -2);

    $condition = array('where_condition'=>'up.user_id=:id AND up.is_currently_own=:own', 'where_data'=>array(':id'=>(int)$this->user_id, ':own'=>'Yes'));
    $user_pets = Users::model()->getUserPets($condition);
    $profile_images = UserProfileImages::model()->getProfileImages( array('select'=>'all'), $this->user_id );

    foreach( $profile_images as $profile_img ) {
        $images[] = $profile_img->profile_image;
    }
    $image = '';
    if( $images ){
        $main_image = HTTP_HOST . PROFILE_IMAGES_THUMB . $images[0];
        $image = '<img src="'. $main_image .'" />';
    }

    $address1 = $basic['address1'];
    if($basic['address2'] != "")
        $address1 .= ", ".$basic['address2'];
    $address2 = $basic['city']." ".$basic['state'].", ". $basic['zip'];

    $editprofile = url('/users/account');
    $editimglink = url('/images/icons/Modify.png');
}
} 
```

我的目标是在我看来简单地将此扩展称为以下内容：

```
 $this->widget('ext.UserProfile.BasicProfile',array('user_id'=>$user_id)); 
```

但是，我想知道我的扩展是否是封装图像旋转器的合适位置？旋转器应该包含在扩展中还是作为视图的一部分？应该使用通用的 JQuery 图像旋转器，还是有一个与 Yii 框架配合得很好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:38:21.303

我喜欢使用 JQuery.Cycle 作为我的图像旋转器。我建议您使用资产构建一个扩展，以将代码保存在一个地方。但是，您可以将您的 css 放在您的主题文件夹中，并在您的扩展程序中构建一个基本 css 以保持它像 yii 的基本寻呼机一样干净。

你可以这样调用你的小部件：

```
$this->widget("application.extensions.rotator", array("images" => array("/path/to/image/1", "/path/to/image/2"), "prevBtn" => "/path/to/prev/button"); 
```

# php - 移动与非移动：提供适当的内容

> ID：12032134
> 
> 赞同：0
> 
> 时间：2012-08-20T03:58:57.030
> 
> 标签：php, mobile

我正在写一个网站的移动版本，我想

1.  使用 WURFL-PHP 在客户端执行移动性检查。
2.  重新使用现有的 .htaccess 文件。我不想手动解析任何东西。这最好留给 Apache。

为简单起见，假设我有两个平面文件：file.d.html 和 file.m.html。在 index.php 中，我考虑根据我们所服务的客户端（移动与非移动）对这些文件之一发出适当的 HTTP 请求，并将响应转发给客户端。一切都将按照 .htaccess 文件的规定进行。

为了发出请求，存在一个名为 pecl_http 的 PHP 库。问题是：我只有一个共享主机计划，所以我的虚拟主机不愿意提供它。

那么，有人可以告诉我这是否合理，还是我只是让事情复杂化？

另外，有没有什么方法可以在没有额外的 HTTP 请求的情况下实现这一点？我想知道 Apache 是否有某种方法来测试移动性。也许我可以在 .htaccess 中添加一些东西，而不是用 PHP 进行编码。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:09:24.183

就我个人而言，我不会在服务器端执行此操作，而是使用 javascript 和 CSS 媒体查询。具体来说，有一个称为“[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)”的过程，您的浏览器会根据屏幕宽度（以像素为单位）选择您的样式。这避免了浏览器嗅探的弊端，因此通常无需任何更改即可支持未来的移动平台。如有必要，您可以使用该`display`样式隐藏整个内容块，或者仅使用不同的值`width`来`float`从水平布局更改为垂直布局。RWD 上的 Wikipedia 页面警告说，一些移动平台不支持媒体查询，但实际上截至 2012 年，这在移动市场中所占份额极小。

# gmail - 如何获取带有内容的gmail内容已被编码

> ID：12032135
> 
> 赞同：0
> 
> 时间：2012-08-20T03:58:59.760
> 
> 标签：gmail, imap

当我尝试获取主题和内容电子邮件时，我总是得到此内容已被编码，例如：

主题：Thư cảmơn

我得到这个主题已被编码：Th=C6=B0_c=E1=BA=A3m_=C6=A1n?=

那么如何解码这个内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:04:41.233

该字符串*看起来*应该以[RFC 2047](http://www.ietf.org/rfc/rfc2047.txt)规定的格式进行编码，但它已损坏：RFC 2047 编码的字符串始终`=?`以`?=`.

假设您可以获得一个未损坏的编码字符串，您应该期望不仅可以看到 ,`Subject`中的显示名称，还`To`可以看到`From`以这种方式编码的其他标头。您可能想研究使用为您完成 MIME 解析的库。适当的可用库将取决于您使用的语言。

# apache-pig - Pig中的布尔到int转换

> ID：12032141
> 
> 赞同：2
> 
> 时间：2012-08-20T04:00:00.643
> 
> 标签：apache-pig

我有一个如下所示的数据集：

```
富,R
富，Y
酒吧,C
富,R
巴兹，Y
富,R
巴兹，Y
巴兹，R
...

```

我想生成一个报告，总结第一列中每个唯一值的“R”、“Y”和“C”记录的数量。对于这个数据集，它看起来像：

```
富,3,1,0
酒吧,0,0,1
baz,1,2,0

```

其中第二列是“R”记录的数量，第三列是“Y”记录的数量，最后是“C”记录的数量。

我知道我可以先按记录类型、组和聚合进行过滤，但这会导致三个子报告的连接成本很高。我宁愿分组一次并生成我组中的每个 {R, Y, C} 列。

如何将比较数据集中第二列与“R”、“Y”或“C”的布尔结果转换为我可以聚合的数值？理想情况下，我希望 1 表示匹配，0 表示三列中的每一列不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:40:05.870

Apache PIG 非常适合此类问题。可以用一个 GROUP BY 和一个嵌套 FOREACH 解决

```
inpt = load '~/pig/data/group_pivot.csv' using PigStorage(',') as (val : chararray, cat : chararray);
grp = group inpt by (val);
final = foreach grp {
    rBag = filter inpt by cat == 'R';
    yBag = filter inpt by cat == 'Y';
    cBag = filter inpt by cat == 'C';
    generate flatten(group) as val, SIZE(rBag) as R, SIZE(yBag) as Y, SIZE(cBag) as C;
};

dump final;
--(bar,0,0,1)
--(baz,1,2,0)
--(foo,3,1,0)

bool = foreach final generate val, (R == 0 ? 0 : 1) as R, (Y == 0 ? 0 : 1) as Y, (C == 0 ? 0 : 1) as C;

dump bool;
--(bar,0,0,1)
--(baz,1,1,0)
--(foo,1,1,0) 
```

我已经在您的示例中进行了尝试，并得到了预期的结果。这个想法是，在 GROUP BY 之后，每个值都有一个 BAG，其中包含所有具有 R、Y、C 类别的行。使用 FOREACH 中的 FILTER，我们创建了 3 个单独的 BAG（每个 R、Y、C 一个），并且 GENERATE 中的 SIZE(bag) 计算每个包中的行数。

您可能遇到的唯一问题是当 val 列中具有相同值的行太多时，因为嵌套的 FOREACH 依赖于内存操作，并且生成的中间 BAG 可能会变得非常大。如果您开始获得与内存相关的异常，那么您可以从[How to handle splash memory in pig 中](https://stackoverflow.com/questions/11999268/how-to-handle-spill-memory-in-pig)获得启发。想法是使用 2 个 GROUP BY 操作，第一个获取每个 (val, cat) 的计数，第二个以 val 为中心旋转 R、Y、C，从而避免昂贵的 JOIN 操作（请参阅[Pivoting in Pig](https://stackoverflow.com/questions/11578815/pivoting-in-pig)）。

关于 BOOLEAN 的问题：我使用了 bincond 运算符。如果您不需要计数，您可以使用 IsEmpty(bag) 而不是 SIZE(bag)，它会稍微快一些并且 bincond 来获得您的 0 和 1 转换。

# database - cakephp 会话数据和表单

> ID：12032143
> 
> 赞同：0
> 
> 时间：2012-08-20T04:00:40.660
> 
> 标签：database, forms, cakephp

大家好，我正在尝试创建一个表单，用户可以在其中创建一个新用户，该用户将具有与创建用户的人相同的 account_id。

目前我的页面在表单中显示了正确的 account_id，但是当我们将表单提交到数据库时，它保存为错误的东西。

这是我的功能

```
 function add_Employee(){

        $accounts=$this->User->find('list', array(
        'fields'=>array('account_id'),
        'conditions' => array(
        'User.id' => $this->Auth->user('id'))));

    if($this->request->is('post')){
    $this->User->create(); 
    if ($this->User->save($this->request->data)) 
    { 
        $this->Session->setFlash('The user has been saved');  
        $this->redirect( array('controller'=>'Users','action' => 'index_admin')); 
    }
    else { $this->Session->setFlash('The user could not be saved. Please, try again.'); } 
    }
    $this->set('accounts',$accounts);

  } 
```

和视图

```
 <h2>Add Employee</h2>
<p>Add a new Employee here, please enter their details below.</p>
<?php
echo $this->Form->create('User', array('action'=>'add_Employee'));
echo $this->Form->input('username',array('label'=>'Username: '));
echo $this->Form->input('password',array('label'=>'Password: '), array('type'=>'password'));
echo $this->Form->input('password_confirmation',array('label'=>'Confirm: '), array('type'=>'password'));
echo $this->Form->input('email',array('label'=>'Email: '));
echo $this->Form->input('title',array('label'=>'Title: '));
echo $this->Form->input('firstname',array('label'=>'First Name: '));
echo $this->Form->input('surname',array('label'=>'Surname: '));
echo $this->Form->input('active', array('default'=>true, 'type'=>'hidden'));
echo $this->Form->input('account_id', array('value'=>$accounts['User']['account_id']));
echo $this->Form->input('access_level', array(
    'label' => 'Access Level:', 
    'options' => array('1'=>'Employee','2'=>'Adminstrator')));
echo $this->Form->end('Submit');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:37:34.400

您必须将帐户 ID 作为值输入表单：

```
In controller:

 $accounts=$this->User->find('first', array(
    'conditions' => array(
    'id' => $this->Auth->user('id'))));
 $this->set('account',$accounts);

In view :
echo $this->Form->input('account_id', array('label'=>'Account','value'=>$account['User']['account_id'])); 
```

# rubygems - Refinery CMS - 导航到 http://localhost:3000/news 后没有路线匹配 {:locale=>:en, :controller=>"refinery/news/items"}

> ID：12032144
> 
> 赞同：2
> 
> 时间：2012-08-20T04:00:55.790
> 
> 标签：rubygems, content-management-system, refinerycms

我经历了安装refinerycms-news引擎的过程；

我将refinerycms-news 添加到我的gemfile 中。

```
gem "refinerycms-news", '~> 2.0.0' 
```

然后跑

```
bundle install
rails generate refinery:news
rake db:migrate
rake db:seed 
```

然后重新启动服务器。

刷新后，“新闻”选项卡显示在我的后端，但是当我在“http://localhost:3000/news”查看前端页面时，我收到此错误。

```
Routing Error

No route matches {:locale=>:en, :controller=>"refinery/news/items"}
Try running rake routes for more information on available routes. 
```

同样的事情发生在我尝试安装refinerycms-inquiries gem 之后。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T17:23:29.440

如果您在视图中的任何地方都做了类似的事情：

```
<%= link_to some_page.title, some_page.url %>
<%= link_to some_page.title, some_page.url_normal %> 
```

将其更改为：

```
<%= link_to some_page.title, refinery.url_for(some_page) %> 
```

如果您设置在路径上，您也可以使用它：

```
<%= link_to some_page.title, some_page.nested_path %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:23:38.067

您可能需要在添加 gem 后运行生成器，以便为 pages 表播种。

`rails g refinery:myextension`

# javascript - jQuery 没有执行一个事件，而是执行了 4 个相同的事件

> ID：12032151
> 
> 赞同：0
> 
> 时间：2012-08-20T04:04:04.210
> 
> 标签：javascript, jquery, html, css, dom

这是一个很大的布局，所以我将只发布链接到 jQuery 和 HTML 的部分（完整站点位于[http://www.gronge.com/index3.php](http://www.gronge.com/index3.php)）。一切正常，除了 About 链接在 Firebug 检查中变回 .navBarActive 但视觉上没有变化。我是网页设计的新手，这是迄今为止我遇到的第一个大问题。

jQuery

```
$(document).ready(function() {
    $("li.navBarNormal").click(function () {
        $("li.navBarActive").removeClass("navBarActive").addClass("navBarNormal");
        $(this).removeClass("navBarNormal").addClass("navBarActive");
    })
}); 
```

HTML

```
<ol id="navLinks"> 
    <li id="navLinkAbout" class="liNav fontWhite navBarActive">About</li>
    <li id="navLinkSubscribe" class="liNav fontWhite navBarNormal">Subscribe</li>
    <li id="navLinkNews" class="liNav fontWhite navBarNormal">News</li>
    <li id="navLinkUpdates" class="liNav fontWhite navBarNormal">Updates</li>
    <li id="navLinkContact" class="liNav fontWhite navBarNormal">Contact</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:11:39.423

这是因为您没有在节点上设置事件侦听`#navLinkAbout`器，因为该节点没有`navBarNormal`开始的类。

我的建议是使用更好的选择器来设置监听器，例如`#navLinks li`.

```
$(document).ready(function() {
    $("#navLinks li").click(function () {
        $("li.navBarActive").removeClass("navBarActive").addClass("navBarNormal");
        $(this).removeClass("navBarNormal").addClass("navBarActive");
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T04:20:13.743

试试这个：http: [//jsfiddle.net/treyeckels/DgQfw/](http://jsfiddle.net/treyeckels/DgQfw/)

将事件触发器更改为“li.liNav”。这会将事件处理程序应用于所有链接。然后对此（单击的）执行添加/删除操作，遍历并找到兄弟姐妹并执行其添加/删除操作。

```
$(document).ready(function() {
$("li.liNav").click(function() {
    $(this).removeClass("navBarNormal").addClass("navBarActive").siblings().removeClass("navBarActive").addClass("navBarNormal");
}) });​ 
```

# scala - 有没有更优雅的方式向 Node 添加属性？

> ID：12032159
> 
> 赞同：1
> 
> 时间：2012-08-20T04:05:38.193
> 
> 标签：scala

我有一个包含许多未知属性的节点的 NodeSeq。必须验证并重新创建 NodeSeq，并将错误（如果遇到）添加为节点中的属性。

下面的解决方案有效，但我想知道是否有更优雅的方式来实现我的目标？

```
def validateErrors (nodes:NodeSeq):NodeSeq={

 var newNodes = new Queue[Node]()
   nodes.foreach ( n => {
     var error:Boolean = false
     var errorMessage:String = ""
     //...do many complex validations
     // and get the error status code and error message
     if (error)
       newNodes += AddError(n,errorMessage)
     else
       newNodes +=n       
   })
   newNodes
}

private def AddError (node:Node, message:String ):Node= node match {  
    case elem : Elem => elem % Attribute(None, "color", Text("red"), Null)  %  Attribute(None, "message", Text(message ), Null) //and many more
    case other => other   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:50:29.843

而不是`error`标志，您可以 bmake errorMessage an`Option[String]`和整个错误消息创建部分方法。

您还可以使用模式匹配更改 addError 方法以处理没有错误的情况：

```
private def AddError (node:Node, message:Option[String] ):Node= (node, message) match {  
    case (elem : Elem, Some(m) => elem % Attribute(None, "color", Text("red"), Null)  %  Attribute(None, "message", Text(m), Null) //and many more
    case (other,_) => other   
} 
```

注意：在没有 scala 编译器的情况下键入它，因此可能无法编译，但我希望这个想法变得清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:13:10.383

可能有帮助的一件事是声明`newNodes`为 a`val`而不是 a`var`并使用`map`or`for`而不是`foreach`迭代`nodes`并构建新值。更改其他`var`声明来使用`val`也很好。使用`Option[String]`错误消息的消息（如 Jens Schauder 的回答中所建议的）消除了对标志的需要。

```
val nodes = for (n <- nodes) yield {
  val errorMsg: Option[String] = {
    //...do many complex validations
    // and get the error status code and error message
  }
  errorMsg match {
    case Some(msg) => AddError(n, msg)
    case None => n
  }
} 
```

使用`foldLeft`(ie `/:`) 添加所有属性也可能会简化`AddError`：

```
private def AddError(node: Node, message: String ): Node = node match {  
  case elem: Elem => {
    val attrs = List("color"->Text("red"), "message"->Text(message) /* , ... */)
    (elem /: attrs) { (acc, x) => acc % Attribute(None, x._1, x._2, Null) }
  }
  case _ => node
} 
```

您可能还想考虑在 Attribute 字段中使用`case object`s 之类的：`enum`

```
Attribute(None, AttColor, "red", Null)
Attribute(None, AttMsg, Text(message), Null) 
```

案例类可能会更好（尽管如果`Text`以多种方式使用，您可能必须添加更多案例）：

```
Attribute(None, Color("red"), Null)
Attribute(None, MsgText(message), Null) 
```

# python - 将十进制数转换为字符串，如 Python 中的 \uxxxx

> ID：12032162
> 
> 赞同：1
> 
> 时间：2012-08-20T04:06:04.603
> 
> 标签：python

我有基于字符串 len 的十进制数。如何将其转换为 \u0030（0030 4 位是字符串的 len）？

例子：

```
char = 'teststring' 
```

有 10 个字符

然后转换为

```
u'\u0010teststring' 
```

我用于

```
char = char.encode('utf-16le') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:09:20.380

你正在寻找[`unichr()`](http://docs.python.org/library/functions.html#unichr).

```
>>> unichr(10)
u'\n'
>>> u'\u000a'
u'\n' 
```

# tapestry - datefield onchange 处理程序，仅限客户端

> ID：12032163
> 
> 赞同：0
> 
> 时间：2012-08-20T04:06:25.437
> 
> 标签：tapestry

我正在使用 Tapestry 5.3.3（其中包括问题 #1844 的补丁）...

有没有一种简单的方法来捕捉和处理“onchange”事件，即用户选择一个新日期（通过弹出窗口）？

我试过了：

```
<t:datefield value="dateValue" onchange="alert('here');" /> 
```

谢谢，保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:07:55.333

您可以在输入字段上捕获更改事件。如果您使用的是原型，请尝试以下操作：

```
$('dateFieldId').observe('change', function(){
    alert('gotcha!');
    ...do whatever you will ...
}); 
```

我发现将此 js 添加到您的页面的最佳方法是使用添加到您的页面/组件的单独 js 文件，您使用[@Import](http://tapestry.apache.org/5.3/apidocs/org/apache/tapestry5/annotations/Import.html)注释为您的页面/组件做出贡献：

```
Tapestry.Initializer.FieldChangeObserver = function (parameters) {
    new FieldChangeObserver (parameters);
};

var FieldChangeObserver  = { };
FieldChangeObserver  = Class.create({
    initialize:function(parameters) {
    $(parameters.dateFieldId).observe('change', function(){
            alert('gotcha!');
            ...do whatever you will ...
        });
    }
}); 
```

然后在您的页面/组件中，您可以：

```
@Inject
private JavaScriptSupport javaScriptSupport;

@Component
private DateField dateField;

@AfterRender
private void afterRender() {
    JSONObject params = new JSONObject()
    params.put("dateFieldId", dateField.getCLientId());
    javaScriptSupport.addInitializerCall("FieldChangeObserver", params);
} 
```

*免责声明*：我很快就写了下来，没有测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:07:51.157

看来我必须结合两种方法来实现我所需要的——这是否应该在挂毯框架内进行改进还有待商榷....

```
<t:datefield t:id="selectedDateElem" id="selectedDateElem" onchange="alert('1 onchange attribute');" />

    $("selectedDateElem").observe("change", function(event)
        {
            alert("2 change observer");
        });

    document.observe(Tapestry.FOCUS_CHANGE_EVENT, function(event)
        {
            if (Tapestry.currentFocusField && Tapestry.currentFocusField.id == "selectedDateElem")
                alert("3 focus change observer");
        }); 
```

测试用例 1：

*   用户点击输入字段
*   用户更改输入字段的值
*   用户点击输入字段
*   --> "1 onchange 属性" & "2 变化观察者"

测试用例 2：

*   用户单击日期选择器图标
*   用户从弹出窗口中选择一个新日期
*   --> "3 焦点变化观察者"

所以 onchange 属性等价于变化观察者，因此唯一完整的解决方案是结合方法 2 和 3：

```
 $("selectedDateElem").observe("change", function(event)
        {
            Page.dateFieldChanged();
        });

    document.observe(Tapestry.FOCUS_CHANGE_EVENT, function(event)
        {
            if (Tapestry.currentFocusField && Tapestry.currentFocusField.id == "selectedDateElem")
                Page.dateFieldChanged();
        }); 
```

# database - 使用 Toad 从现有表创建表脚本

> ID：12032164
> 
> 赞同：3
> 
> 时间：2012-08-20T04:06:38.757
> 
> 标签：database, oracle, toad, create-table

我是蟾蜍新手，如果不是我的工作，我当然是数据库管理。我是 Java 开发人员，我有一个场景可以在测试环境中创建表，这些表是来自另一个数据库的另一个环境的精确副本。

我可以使用所有权限访问这两个表。我需要做的就是，从开发环境表到测试环境中获取 CREATE Table 结构的精确副本。

请指导我这样做。

Db：Oracle Toad 免费软件 11.x

注意：不需要表格数据。只需要表列和约束等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T05:30:36.233

输入您的表名后点击`F4`-> 单击脚本选项卡，您将获得 DDL 语句。

# jquery - Rails 3 - 使用 Ajax 提交表单

> ID：12032168
> 
> 赞同：0
> 
> 时间：2012-08-20T04:07:13.677
> 
> 标签：jquery, ruby-on-rails, ajax

我正在尝试使用 ajax 将我的表单提交给控制器并在我的视图中显示 ajax 响应。表单使用 ajax 提交，但我无法在我的 javascript 中使用 'ajax:success' 或 'ajax:error' 方法。下面是它的代码片段：

form.html.erb

```
 <%= form_for @item, :html => { :class => 'form-horizontal' },:id => 'item_form', :remote => true do |f| %>
  <div class="control-group">
    <div class="controls">
      <%= f.text_field :item_title%>
    </div>
   </div>

   <div class="form-actions">
    <%= f.submit nil%>
   </div>
<% end %>

<%= javascript_tag do%>
jQuery(function($) {
alert ("load")
 $('#item_form')
 .bind('ajax:success', function(xhr, data, status) {alert ("success")})
 .bind('ajax:complete', function(xhr, status) {alert ("complete")})
 .bind('ajax:error', function(xhr, data, status) {alert ("error")})
});
<%end%> 
```

控制器

```
def update
@item = Item.find(params[:id])
respond_to do |format|
  if @item.update_attributes(params[:item])
   format.html { 
      if request.xhr?
        puts "its an ajax req"
        render :json => {
            :location => url_for(:controller => 'items', :action => 'edit'),
        }

      end
   }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @item.errors, status: :unprocessable_entity }
  end

end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:13:16.080

看起来您提供的 id 不在选项中的正确子哈希中。id 必须在 html 选项中，如下所示：

```
 <%= form_for @item, :html => { :class => 'form-horizontal', :id => 'item_form' }, :remote => true do |f| %> 
```

如果表单上没有 html id，则您的事件不会被绑定。

文档参考： [http ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)

# java - 为什么这对 NYT 的 World RSS 有效，但对 Science 却无效？（XPath，Java）

> ID：12032171
> 
> 赞同：0
> 
> 时间：2012-08-20T04:07:31.943
> 
> 标签：java, xpath, rss

这段 Java 代码打印了来自 NYT 世界 RSS 的每个项目的标题、链接和发布日期。但对于 NYT 的 Science RSS，它不会打印链接字段。这里发生了什么？

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();

Document doc = builder.parse( direccion );
XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile("/rss/channel/item");
NodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
for (int i = 0; i < nl.getLength(); i++) {
    Node node = nl.item(i);

    Node nodoTitulo = (Node) xpath.evaluate("title", node, XPathConstants.NODE);
    System.out.println(nodoTitulo.getTextContent());

    Node nodoLink = (Node) xpath.evaluate("link", node, XPathConstants.NODE);
    System.out.println(nodoLink.getTextContent());

    Node nodoFecha = (Node) xpath.evaluate("pubDate", node, XPathConstants.NODE);
    System.out.println(nodoFecha.getTextContent());
    System.out.println();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:46:05.810

这是个`namespace`问题。

在科学 RSS 中，您有

```
<atom:link href="http://www.nytimes.com/2012/08/19/business/new-wave-of-adept-robots-is-changing-global-industry.html?partner=rss&amp;emc=rss" rel="standout"/>
<title>The iEconomy: New Wave of Deft Robots Is Changing Global Industry</title>
<link>http://feeds.nytimes.com/click.phdo?i=5861b5e3f6b66da6ca12beab1e5d8729</link> 
```

在世界 RSS 中，你有

```
<title>Syrian Rebels Claim to Have Brought Down a Jet</title>
<link>http://feeds.nytimes.com/click.phdo?i=314bd32f9d6141a500e76e3076c489c9</link>
.
.
.
<atom:link rel="standout" href="http://www.nytimes.com/2012/08/14/world/middleeast/syrian-rebels-claim-to-have-brought-down-a-jet.html?partner=rss&amp;emc=rss"/> 
```

您的代码首先选择`<atmoic:link>`节点。

添加：

```
factory.setNamespaceAware(true); 
```

创建工厂之后和创建构建器之前，您现在应该获得链接

```
title = The iEconomy: New Wave of Deft Robots Is Changing Global Industry
link = http://feeds.nytimes.com/click.phdo?i=5861b5e3f6b66da6ca12beab1e5d8729
pubDate = Sun, 19 Aug 2012 21:26:33 GMT 
```

如果你真的有兴趣，你可以阅读[这个](http://blog.davber.com/2006/09/17/xpath-with-namespaces-in-java/)以获得更多信息

# asp.net-mvc-3 - 具有唯一条目的 C# 列表

> ID：12032172
> 
> 赞同：0
> 
> 时间：2012-08-20T04:07:42.470
> 
> 标签：asp.net-mvc-3, list

我有一个这样的清单，

```
List A

ItemNum                  FileName

001                      A.txt,B.txt,A.txt,B.txt
002                      A.txt,C.txt,A.txt,C.txt 
```

我需要做一个这样的清单。

```
ItemNum                  FileName

001                      A.txt,B.txt
002                      A.txt,C.txt 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:22:32.527

区分大小写，采用方法格式：

```
public List<string> ToDistinct(IEnumerable<string> input)
{
    List<string> unique = new List<string>();

    foreach (string s in input)
    {
        List<string> files = s.Split(',').ToList();
        unique.Add(String.Join(",", files.Distinct()));
    }

    return unique;
} 
```

这是一个控制台方法，可以像上面一样显示输出，如果您愿意，可以对其进行调整：

```
public static void Main(string[] args)
{
    List<string> input = new List<string>{"A.txt,B.txt,A.txt,B.txt", "A.txt,C.txt,A.txt,C.txt"};

    //Display Input
    Console.WriteLine("Input");
    Console.WriteLine("ItemNum                  FileNames");
    for(int i = 0; i < input.Count(); i++)
    {
        Console.WriteLine(String.Format(" {0,-23:000}{1}", i + 1, input[i]));
    }

    //Build the Unique List
    List<string> unique = new List<string>();

    foreach (string s in input)
    {
        List<string> files = s.Split(',').ToList();
        unique.Add(String.Join(",", files.Distinct()));
    }

    //Display Output
    Console.WriteLine();
    Console.WriteLine("Output");
    Console.WriteLine("ItemNum                  FileNames");
    for(int i = 0; i < unique.Count(); i++)
    {
        Console.WriteLine(String.Format(" {0,-23:000}{1}", i + 1, unique[i]));
    }

    Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:40:00.160

我将建议您将 FileName 转换为 a `List<string>`，那么您所需要的就是：

```
listA.ForEach(x => x.FileNames = x.FileNames.Distinct().ToList()); 
```

如果没有具体原因为什么要存储 - 对于所有意图 - 字符串中的列表..为什么不将其存储为一个？`List<string>`将允许您根据需要添加和删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:08:20.570

```
List<Item> list = new List<Item>();
list.Add(new Item("001", "A.txt,B.txt,A.txt,B.txt"));
list.Add(new Item("002", "A.txt,C.txt,A.txt,C.txt"));
var newList = from l in list
              select new Item() { ItemNum = l.ItemNum, 
                                  FileName = string.Join(",", l.FileName.Split(',').Distinct()) }; 
```

# php - 如何让 onblur 和 onfocus 在 php 脚本中工作？

> ID：12032173
> 
> 赞同：1
> 
> 时间：2012-08-20T04:08:21.897
> 
> 标签：php, javascript

我想向时事通讯脚本添加一个小功能，但是我无法正确完成它，因为它会导致 Dreamweaver 中出现错误：

我的原始代码：

```
 $data.='<input style="float:left; margin-right:10px;" type="text" id="'.$formidreal.'-wysija-to" class="'.$classValidate.'" name="wysija[user][email]" />'; 
```

我想添加以下内容：

```
 value="example@email.com" onblur="if (this.value == ''){this.value = 'example@email.com'; }" onfocus="if (this.value == 'example@email.com') {this.value = ''; }" 
```

我很确定必须采用不同的格式才能在 PHP 中工作，尽管我无法弄清楚。

一些专家的建议将不胜感激。

非常感谢，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:14:38.363

一些建议是不要将完整的 javascript 放入您的 html 属性中。

尝试调用一个函数，然后在函数内部执行您的逻辑。

如果你使用 jQuery 的选择器之类的东西来分隔这两者，那就更整洁了。:)

参考：[http ://api.jquery.com/blur/](http://api.jquery.com/blur/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T04:14:42.933

你应该这样写：

```
value="example@email.com" onblur="if (this.value == \'\'){this.value = \'example@email.com\'; }" onfocus="if (this.value == \'example@email.com\') {this.value = \'\'; }" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T04:28:12.103

我明白你在这里想要做什么。

考虑使用更语义化的[HTML5 Placeholder](http://www.w3schools.com/html5/att_input_placeholder.asp)（或者如果你支持 IE 7.0，也许 JS 就可以了）。

如果您对 JQuery 感到满意，请使用它。

如果没有，请学习它。

如果现在不能学习......那么，PHP代码应该是：

```
$data.='<input style="float:left; margin-right:10px;" type="text" id="'.$formidreal.'-wysija-to" class="'.$classValidate.'" name="wysija[user][email]"." value=\"example@email.com\" onblur=\"if (this.value == ''){this.value = \'example@email.com\'; }\" onfocus=\"if (this.value == \'example@email.com\') {this.value = ''; }\"" />'; 
```

但是，我仍然建议您不要选择 INLINE JS。

PS：我可能在代码中犯了一个错误，但逻辑是使用

```
\ 
```

对于您希望在 HTML 中显示但不编译为字符串的结尾或开头的单引号和双引号。

希望有帮助。:)

# c++ - 自重启以来，mysql++ 连接始终返回 0 行

> ID：12032182
> 
> 赞同：0
> 
> 时间：2012-08-20T04:09:54.000
> 
> 标签：c++, mysql, mysql++

这可能是显而易见的，但我一生都无法弄清楚。自从我们重新启动服务器后，一个使用 mysql++ 连接到我们的数据库的 C++ 程序立即为所有查询返回了 0 行。我的第一个想法是 my.cnf 可能没有正确加载，但在检查显示变量和比较之后似乎是正确的。

有什么建议么？是否有可能某些目录设置无法找到我不知道的 mysqlpp 所需的一些 .so 文件？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:40:12.667

> 有什么建议么？

当然：

1.  如果您已[禁用异常](http://tangentsoft.net/mysql++/doc/html/userman/tutorial.html#exceptions)，请确保检查所有错误代码返回。

    如果您没有禁用异常，请检查`catch`可能涉及的每个块不只是悄悄地吃掉错误。

    MySQL C API 库（以及 MySQL++）可能试图告诉您出了什么问题，而您正在压制它或以某种方式忽略它。

2.  构建并运行[示例](http://tangentsoft.net/mysql++/doc/html/userman/tutorial.html#examples)。如果它们以与您的程序相同的方式失败，则意味着问题本质上是广泛的。这些示例具有良好的诊断功能，因此它们可以指导您解决问题。

    如果示例工作正常，那么问题是特定于您的程序或其数据的。因此，将案例分开：

    *   该程序是否针对与问题机器具有相同结构但内容不同的数据库在不同的机器上运行？

    *   如果是这样，当您将问题数据库的副本加载到第二台机器上时，它是否仍然可以在该机器上工作？

    *   如果这仍然有效，那么当您直接从有效的系统访问远程机器的数据库时它是否有效？（小心这个。你想在 MySQL 数据库连接本身上设置 SSL，或者有某种安全通道，比如 VPN 或 SSH 隧道。）

    如果您成功运行了该挑战，则意味着问题出在原始机器上的程序本身或程序的环境中。正如您所推测的，库或权限是一种可能性。

3.  在调试器下运行您的程序。

    首先尝试`gdb`，因为我们感兴趣的是调试器是否看到任何异常或抛出的信号。例如，该程序可能是核心转储。

    如果`gdb`给程序一个干净的健康证明，请尝试`valgrind`. 如果 Valgrind 抱怨你的程序，很有可能它抱怨的东西是合法的。也许无害，但​​合法。如果您收到投诉，并且您在上面发现问题是特定于一台机器的，我建议您在程序成功运行的系统上重新尝试运行 Valgrind。修复这些问题，或者至少在原始问题机器上继续调试之前排除无害的警告。

> 是否有可能某些目录设置无法找到我不知道的 mysqlpp 所需的一些 .so 文件？

很容易检查：

```
$ ldd myprogram 
```

您应该获得一份报告，其中列出了您的程序链接到的所有共享库，包括它们的完整路径。`ldd`将指示运行的用户丢失或不可读的任何内容。

# mysql - 用 1 个查询更新多个 mysql 行？

> ID：12032184
> 
> 赞同：1
> 
> 时间：2012-08-20T04:10:08.917
> 
> 标签：mysql

我正在将客户端数据库移植到具有不同帖子标题和行 ID 的新数据库，但他希望保留旧网站的点击量，

他在新数据库中有 500 多篇文章，更新一篇对这个查询来说不是问题

```
UPDATE blog_posts 
SET hits=8523 WHERE title LIKE '%slim charger%' AND category = 2 
```

但是我将如何对所有 500 篇带有 1 个查询的文章执行此操作？我已经有来自旧数据库的导出查询，其中包含帖子标题和点击次数，因此我们可以更轻松地找到新数据库

```
INSERT INTO `news_items` (`title`, `hits`) VALUES
('Slim charger- your new friend', 8523 )... 
```

两个表中唯一的参考是标题中的产品名称单词，其他所有内容都不同，id，完整标题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:53:31.967

为旧数据制作`tmp`表格`old_posts`

```
UPDATE new_posts LEFT JOIN old_posts ON new_posts.title = old_posts.title SET new_posts.hits = old_posts.hits; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:21:59.983

我不能 100% 确定您可以一次更新多条记录，但我认为您想要做的是将循环与更新查询结合使用。

但是，如果您有 2 个表，它们之间绝对没有关系或共同的标识符，那么您就有点困难了。在这种情况下，困难的地方意味着您必须手动完成所有操作:(

拯救你的最后一个可能的想法是 id 可能不同，但它们可能仍然具有相同的顺序。如果是这种情况，您仍然可以遍历旧表并更新我上面描述的数字表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T04:22:08.627

不幸的是，这不是它的工作原理，您必须编写一个执行循环的脚本/程序。

```
articles cursor;
selection articlesTable%rowtype;
WHILE(FETCH(cursor into selection)%hasNext)
Insert into newTable selection;
END WHILE 
```

如何桥接它取决于您，但这是基本的伪代码/PLSQL。

从一个 DB 中选择并放入另一个 DB 的 API 因 DBMS 而异，因此您需要一个通用的中间格式。基本上从第一个数据库中获取记录，将其粘贴到您选择的编程语言中的结构中，然后使用其他 DBMS 的 API 使用这些结构值进行插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T07:18:22.323

您可以构建一个为您执行此操作的过程：

```
CREATE PROCEDURE insert_news_items()
BEGIN
DECLARE news_items_cur CURSOR FOR
    SELECT title, hits
    FROM blog_posts
    WHERE title LIKE '%slim charger%' AND category = 2;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN news_items_cur;
LOOP

    IF done THEN
      LEAVE read_loop;
    END IF;

    FETCH  news_items_cur
    INTO   title, hits;

    INSERT INTO `news_items` (`title`, `hits`) VALUES (title, hits);

END LOOP;
CLOSE news_items_cur;
END; 
```

# python - Python 多个 for 循环

> ID：12032185
> 
> 赞同：13
> 
> 时间：2012-08-20T04:10:20.160
> 
> 标签：python

我想知道是否可以以更好的方式编写以下代码中的 3 个 for 循环：

```
 Nc = 10     # number of points for (0, pi)
   cc1 = linspace(0,pi,Nc)
   cc2 = linspace(0,pi/2,Nc/2)
   cc3 = linspace(0,pi/2,Nc/2)
   for c1 in cc1:
       for c2 in cc2:
           for c3 in cc3:
               print c1,c2,c3 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T04:13:00.080

```
import itertools

for a,b,c in itertools.product(cc1, cc2, cc3):
    print a,b,c 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T04:13:06.850

尝试这个 ：）

```
[(c1, c2, c3) for c1 in cc1 for c2 in cc2 for c3 in cc3] 
```

# grails - CVS 在 Intellij IDEA 中导致 Grails 问题

> ID：12032191
> 
> 赞同：1
> 
> 时间：2012-08-20T04:11:15.043
> 
> 标签：grails, intellij-idea, cvs

我使用 Intellij IDEA (11.1.3) 与我的 Grails (2.0.3) 项目有很多奇怪的冲突。我的项目连接到我们的 CVS 存储库。我终于将我的问题追溯到 CVS`CVS\Base`在我编辑文件时创建一个文件夹。

我的问题出现是因为 Grails 发现了我的文件的冲突副本`.groovy`和阻塞。例如，我编辑`MyDomain.groovy`以添加一个新字段，CVS 会创建`CVS\Base\MyDomain.class`该文件的备份。Grails 尝试加载两者并根据更改抛出各种异常。

我在 IDEA 中找不到任何控制这些备份创建的 CVS 设置。*我不想要它们，我只是手动删除它们*。我也不知道如何让 IDEA 将这些添加到排除列表中。我进入了项目设置，但找不到要排除它们的文件夹。我认为因为`.\CVS`默认情况下子文件夹是隐藏的，所以`Base`子文件夹也无法访问。

理想情况下，我想知道如何...

*   ...阻止 CVS 创建此`Base`文件夹
*   ...让 Grails 忽略该文件夹（如果存在）。

* * *

CrazyCoder 正确地指出，这不是 IntelliJ IDEA 的问题，而是[Grails 的一个已知问题](http://jira.grails.org/browse/GRAILS-3336)，但这仍然不能帮助我解决我的问题。

**如果您有类似的问题**，请访问[此问题的 Grails Jira 页面](http://jira.grails.org/browse/GRAILS-3336)并添加您的评论并为此问题投票。**如果您对此有解决方法**，请将解决方法发布为您的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:41:13.830

默认情况下， IDEA 已经忽略`CVS`了文件夹，该[错误在 Grails 中](http://jira.grails.org/browse/GRAILS-3336)。

# asp.net - Asp.net 4 登录控制

> ID：12032197
> 
> 赞同：0
> 
> 时间：2012-08-20T04:12:07.687
> 
> 标签：asp.net, vb.net

我在我的 sql server 2008 中有一个用户管理表，我想从我的数据库而不是 asp.net 预定义的数据库中检查每个用户的特定角色。请帮助我提供相同的代码。还有我需要更改为我的网络配置文件的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:09:47.087

您可能希望实现（滚动您自己的）会员提供程序版本，以使这项工作更容易、更安全且不易出错 - 它还可以节省您编写大量额外的管道代码。

从本质上讲，这意味着实现 IIdentity 和 IPrincipal 接口（听起来很吓人，但实际上并没有那么糟糕）。请在此处查看此博客[http://www.bradygaster.com/custom-authentication-with-mvc-3.0](http://www.bradygaster.com/custom-authentication-with-mvc-3.0)以获取分步指南。此外，值得阅读评论和链接，以通过 Auth Cookie 启用正确的表单身份验证，而不是直接在帖子中引用的基本会话管理！

另请注意，博客上的此示例适用于 MVC 3，但它也同样适用于 Web 窗体项目。

# html - 在 iPad 中禁用定位服务时使用 phonegap 获取 GeoLocation

> ID：12032205
> 
> 赞同：3
> 
> 时间：2012-08-20T04:13:58.147
> 
> 标签：html, cordova, geolocation, w3c-geolocation

我正在使用 phonegap (cordova 1.9.0) 开发 iPad 应用程序。我需要获取用户的当前位置。我使用了以下代码，并且在启用位置服务时工作正常。

```
function onDeviceReady() {  
 navigator.geolocation.getCurrentPosition(onSuccess, onError);   
 }

function onSuccess(position) {
 console.log(position.coords.latitude + "-" + position.coords.longitude);
}

  function onError(error) {   
     alert('code: '    + error.code           
      'message: ' + error.message + '\n');  
  } 
```

我的问题是禁用位置服务时此代码不起作用。如果启用或禁用位置服务，我需要获取当前位置。

有人告诉我如何在这种情况下获得当前位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T04:39:01.567

禁用位置服务时，您无法获取当前位置。这将侵犯用户的隐私。在设备上禁用位置服务的目的是防止应用程序获取当前位置。

我所做的是显示我自己的对话框，并详细解释为什么在调用之前需要位置服务`getCurrentPosition()`。我解释说，没有它，该应用程序将无法运行。我还说：

> 您的设备也可能会征求您的许可。

这增加了有人对 iPhone 对话框说“是”的机会。

# objective-c - 在文本字段中将字符更改为不同的字符

> ID：12032206
> 
> 赞同：1
> 
> 时间：2012-08-20T04:14:03.367
> 
> 标签：objective-c, ios, xcode

我想制作一个解码类型的应用程序，其中您有一个代码“a = z，b = y，c = x”，当用户在文本字段中输入一堆字母时，它会为他们解码. 例如。我输入了“ab c”，当我单击一个按钮时，它将显示在另一个文本字段“zy x”中。

我试过像这样使用正则表达式：

```
NSString *inputFieldContents = inputField.text; // Suppose it's "Hello, zyxw!";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"zyxw" options:NSRegularExpressionCaseInsensitive error:NULL];

NSRange range = NSMakeRange (0, [inputFieldContents length]);
NSString *res = [regex stringByReplacingMatchesInString:inputFieldContents options:0 range:range withTemplate:@"abcd"];
NSLog(@"%@", res); 
```

但这只会在输入字母 zyxw 时给我解码的消息。如果我输入 wxyz，它不会像我希望的那样给我 dcba。

有人对如何做到这一点有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:18:26.863

您可以使用以下方法简单地替换可变字符串中的字符串：

`-[NSMutableString replaceOccurrencesOfString:withString:options:range:]`.

如果您的情况非常基本，您可能会赞成：

`-[NSString stringByReplacingOccurrencesOfString:withString:]`

* * *

更新 - 所以解决这个问题的一种方法是：

```
NSMutableString * str = [inputField.text mutableCopy];

enum { NumSubstitutions = 4 };
NSString * const sought[NumSubstitutions] = { @"z", @"y", @"x", @"w" };
NSString * const replacements[NumSubstitutions] = { @"a", @"b", @"c", @"d" };

for (NSUInteger i = 0; i < NumSubstitutions; ++i) {
    [str replaceOccurrencesOfString:sought[i]
                         withString:replacements[i]
                            options:NSCaseInsensitiveSearch
                              range:NSMakeRange(0, inputFieldContents.length)];
}

return [str copy]; 
```

# playframework - 当浏览器请求 CSS 文件时，应用程序总是返回 304 响应

> ID：12032207
> 
> 赞同：0
> 
> 时间：2012-08-20T04:14:22.343
> 
> 标签：playframework, playframework-2.0

我正在玩一点 Play！2.0.2。

我的项目是新项目，我唯一更改的是 views/ 目录中的 HTML 和 public/ 目录中的 main.css 文件。

问题是即使我对 CSS 文件进行了修改，应用程序仍然会以 304 Not Modified 响应。Ctrl+R 和 F5 不能解决问题。真正刷新页面的唯一方法是进入浏览器的设置并清除缓存。然后 CSS 将更新，但仅针对下一个请求。

玩！似乎认为 public/ 目录中的每个文件都没有变化，即使情况并非如此。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:21:56.217

这是相当合适的情况，每次从服务器刷新页面后都不会下载 CSS 文件。

在浏览器中查找键盘组合，用于重新加载页面并刷新开发周期的缓存（通常是`Shift + F5`或`Shift + Ctrl +R`）。

另一个问题是如何告诉 100 万用户在更改实时站点后按下组合：最简单的方法是在 CSS/JS 文件名中添加一个唯一的字符串：

```
<link rel="stylesheet" href="/assets/css/main/css?12345" /> 
```

你可以通过多种方式做到这一点，

*   首先只需手动添加它，然后在 CSS/JS 中的重要更改也更改`?12345`为`?34567`所有文件之后

    ```
    <link rel="stylesheet" href='@routes.Assets.at("css/main.css")?12345'> 
    ```

*   第二 - 半自动：使用一些控制器的方法来生成时间戳

    ```
    <link href='@routes.Assets.at("css/main.css")?@Application.timestamp()' rel="stylesheet">
    <script src='@routes.Assets.at("js/scripts.js"?@Application.timestamp())' type="text/javascript"></script> 
    ```

*   并在中创建`timestamp()`方法`Application.java`

    ```
    public static String timestamp(){
        // here you can add some more control
        // but DON'T set new timestamp each time, 
        // cause you'll make the browser's cache useless
        return "12345";
    } 
    ```

*   第三种解决方案将是未来实时站点的最佳选择：使用 Application.timestamp() 为每个文件设置自定义时间戳。在这种情况下，您可以在需要时更改/重置它们，而无需重新编译应用程序并将 jars 发送回服务器。当然，在这种情况下，您不应该将 CSS 文件保存在 Play 的`public`文件夹中，相反，最好使用前端 HTTP 服务器从某个 FTP 位置为它们提供服务，并使用 Play 的数据库仅存储路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:02:33.910

根据： [http ://www.playframework.com/documentation/2.1.0/Assets](http://www.playframework.com/documentation/2.1.0/Assets)

> Etag 支持 Assets 控制器自动管理 ETag HTTP 标头。ETag 值是根据资源名称和文件的最后修改日期生成的。（如果资源文件嵌入到文件中，则使用 JAR 文件的最后修改日期。）
> 
> 当 Web 浏览器发出指定此 Etag 的请求时，服务器可以响应 304 NotModified。

不知何故，这不适用于 css 文件（至少在开发模式下玩 java 2.1）

手动设置缓存超时可能是一个临时解决方案

```
"assets.cache./public/stylesheets/main.css"="max-age=1" 
```

# ios - iphone没电了，app死机了

> ID：12032211
> 
> 赞同：0
> 
> 时间：2012-08-20T04:14:48.733
> 
> 标签：ios, fatal-error, battery

我即将完成我的第一个应用程序，我刚刚发现了一个潜在的破坏性问题。当我的 iPhone 上的电池电量耗尽时，我的应用程序在充电后无法打开。不管发生了什么，这似乎是致命的。我也能够在另一部 iPhone 上重现该错误。

谁能帮我？我在互联网上发现的很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:55:15.943

在我看来，您在设备上为您的应用程序存储了一些数据。并且这个数据在充值后处于不正确的状态。尝试弄清楚并重写数据保存代码。

# c# - 不可调用的成员 'TSM.ProxMatchOutputContract.DataField' 不能像方法一样使用

> ID：12032213
> 
> 赞同：0
> 
> 时间：2012-08-20T04:15:20.547
> 
> 标签：c#, asp.net, vb.net

不可调用的成员不能像方法一样使用

我一直在寻找对这个错误的一些回应，但我还没有弄清楚。

这里是我的报关表：

```
 private IEnumerable<string> _dataFields = null;
    [DataMember(Name = "data_fields")]
    public IEnumerable<string> DataFields
    {
        get
        {
            if (_dataFields == null)
            {
                _dataFields = new List<string>();
            }
            return _dataFields;
        }
        set { _dataFields = value; }
    } 
```

这是我使用 Datafields 并得到错误的地方，该错误被抛出 ExpectedDataFields(index) 和 result.DataFields(index)：

```
 internal void OnDeserializedPopulateQueryResults(StreamingContext context)
    {
        if (this.ExpectedDataFields.Count() > 0 && this.QueryResults.Count() > 0)
        {

            foreach (ProxMatchOutputContract result in this.QueryResults)
            {
                for (int index = 0; index <= (int)result.DataFields.Count() - 1; index++)

                {
                    *result.DataField[this.ExpectedDataFields(index)] = result.DataFields(index);*

                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:18:49.143

这段代码

```
result.DataField[this.ExpectedDataFields(index)] 
```

尝试将 DataField 视为具有索引器，但`IEnumerable<string>`实际上并没有。

也许将您的属性的定义更改为具有索引器的内容，例如`List<string>`.

另外，我假设该行周围的星号是一个错字，或者可能是尝试格式化该行斜体（当该行已被格式化为代码时，这不起作用）。

# python - 在同一行打印新输出

> ID：12032214
> 
> 赞同：112
> 
> 时间：2012-08-20T04:15:23.620
> 
> 标签：python, python-3.x, printing

我想将循环输出打印到同一行的屏幕上。

我如何以最简单的方式为 Python 3.x

我知道 Python 2.7 已经通过在行尾使用逗号来询问这个问题，即 print I，但我找不到 Python 3.x 的解决方案。

```
i = 0 
while i <10:
     i += 1 
     ## print (i) # python 2.7 would be print i,
     print (i) # python 2.7 would be 'print i,' 
```

画面输出。

```
1
2
3
4
5
6
7
8
9
10 
```

* * *

我要打印的是：

```
12345678910 
```

新读者也访问此链接[http://docs.python.org/release/3.0.1/whatsnew/3.0.html](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-08-20T04:19:09.250

来自`help(print)`：

```
Help on built-in function print in module builtins:

print(...)
    print(value, ..., sep=' ', end='\n', file=sys.stdout)

    Prints the values to a stream, or to sys.stdout by default.
    Optional keyword arguments:
    file: a file-like object (stream); defaults to the current sys.stdout.
    sep:  string inserted between values, default a space.
    end:  string appended after the last value, default a newline. 
```

您可以使用以下`end`关键字：

```
>>> for i in range(1, 11):
...     print(i, end='')
... 
12345678910>>> 
```

请注意，您必须`print()`自己完成最后的换行符。顺便说一句，在 Python 2 中，您不会得到带有尾随逗号的“12345678910”，`1 2 3 4 5 6 7 8 9 10`而是会得到。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-10-11T17:06:26.323

*** 对于 python 2.x ***

使用尾随逗号来避免换行。

```
print "Hey Guys!",
print "This is how we print on the same line." 
```

上述代码片段的输出将是，

```
Hey Guys! This is how we print on the same line. 
```

*** 对于 python 3.x ***

```
for i in range(10):
    print(i, end="<separator>") # <separator> = \n, <space> etc. 
```

上述代码片段的输出将是 (when `<separator> = " "`),

```
0 1 2 3 4 5 6 7 8 9 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-30T20:12:36.500

与建议的类似，您可以执行以下操作：

```
print(i, end=',') 
```

> 输出：0,1,2,3,

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-07T15:50:11.383

```
print("single",end=" ")
print("line") 
```

这将给出输出

```
single line 
```

对于问的问题使用

```
i = 0 
while i <10:
     i += 1 
     print (i,end="") 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-20T04:23:04.897

您可以执行以下操作：

```
>>> print(''.join(map(str,range(1,11))))
12345678910 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-21T18:00:30.947

```
>>> for i in range(1, 11):
...     print(i, end=' ')
...     if i==len(range(1, 11)): print()
... 
1 2 3 4 5 6 7 8 9 10 
>>> 
```

这是如何做到这一点，以便打印不会在下一行的提示之后运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-25T19:15:34.317

让我们举个例子，你想在同一行打印从 0 到 n 的数字。您可以在以下代码的帮助下做到这一点。

```
n=int(raw_input())
i=0
while(i<n):
    print i,
    i = i+1 
```

> 在输入时，n = 5

```
Output : 0 1 2 3 4 
```

# javascript - 在响应式模板引擎范围之外的 javascript 对象上操作时如何使用 Meteor？

> ID：12032218
> 
> 赞同：0
> 
> 时间：2012-08-20T04:16:01.080
> 
> 标签：javascript, meteor

我有一些我想协作操作的 javascript 对象，但是我很难理解在`Meteor`. 这些对象不绑定到特定的集合，而是与为绑定到集合的 GUI 提供服务的模板一起存在于内存中。

我想到了两件事：

(1) 也许我应该为此绕过 Meteor 的本地 pub/sub 内容，并简单地利用`SockJS`内部现有的基础设施`Meteor`。我[能够从 获取`SockJS`URL`Meteor`](https://stackoverflow.com/questions/12024357/in-meteor-how-can-i-get-a-handle-on-the-underlying-sockjs-server/12024426#12024426)，但尚未成功`SockJS`拨打电话。（如果需要，我可以提供更多细节）

(2) 或者可以利用现有的 pub/sub 选项`Meteor`并使用模板作为 shim 来监听更新。我[在这里](https://stackoverflow.com/questions/10109788/callback-after-the-dom-was-updated-in-meteor-js)寻找，但到目前为止，还无法解决问题。也许我也应该使用一个集合作为垫片？

同样，这些不绑定到集合，我怀疑是香草的`SockJS`，或者`socket.io`在如何广播更改方面相当简单。因此，我正在努力研究如何将协作整合到一个`Meteor`并非源自正在更新的集合的应用程序中。我想追求上述之一，但想知道哪种方法似乎最可行？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:49:07.860

我想有两种情况：

1.  我认为需要合作的事情应该保存在一个集合中。但是，如果有大量此类非常短暂的数据并且使用集合确实没有意义，理论上可以在服务器端连接一个使用 minimongo（在内存 mongo 中）的集合，而不是真正的 mongo 驱动程序。

    开发人员表示它可能可以完成，但 AFAIK 没有人真正尝试过。

2.  我认为不需要协作的东西应该只存储在`Session`客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:47:49.377

我最终使用了`constant`与 Meteor 0.4.0 一起发布的新块帮助程序，以防止我的流星范围外的 javascript 对象被以下操作`Meteor`：

[http://meteor.com/blog/2012/08/31/introducing-spark-a-new-live-page-update-engine](http://meteor.com/blog/2012/08/31/introducing-spark-a-new-live-page-update-engine)

这让我可以通过不同于`Meteor`.

# php - 在 PHP 中加密和解密密码、文件的完美方法？

> ID：12032220
> 
> 赞同：7
> 
> 时间：2012-08-20T04:16:51.450
> 
> 标签：php, file, codeigniter, encryption, blowfish

我对这个主题进行了一系列研究，但遗憾的是我找不到在 PHP 中加密和解密文件的完美方法。这意味着我要做的是找到某种方法来加密和解密我的项目，而不用担心破解者知道我的算法。如果某些需要隐藏和隐藏的算法，一旦逻辑通过任何地方共享，它就无法解决我的问题，或者他们闯入我的服务器并获取源文件，那么它应该是使用相同解密的某种方式来解密它算法。以前我在 StackOverFlow 网站上找到了几篇很棒的帖子，但它仍然无法回答我的问题。

> 加密世界密码的最佳方式，从我通过阅读得出的结论。河豚加密。这是一种1000次迭代的哈希算法，使用相同规格的GPU，破解者需要7年才能解密。

显然，这使得在单向散列时无法解密。

1.  [如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)
2.  [为什么盐使字典攻击“不可能”？](https://stackoverflow.com/questions/3566504/why-do-salts-make-dictionary-attacks-impossible)

> 在 PHP 中加密和解密密码的最佳方法，正如这个问题所引用的那样。参考我在网上查到的，sha1和md5都是crack&broken算法，即使我们把算法从

```
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $string, MCRYPT_MODE_CBC, md5(md5($key)))); 
```

到

```
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, sha1(md5($key)), $string, MCRYPT_MODE_CBC, sha1(md5(md5($key))))); 
```

不是只是增加了解密的难度，但在时间问题上仍然可以破解吗？

1.  [使用 PHP 加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

> 我正在考虑使用我们的服务器处理器/硬盘 GUID 来生成盐和加密密码。

当黑客获得对服务器的访问权限并且他们可以使用 PHP 回显 GUID 并进行解密时，这仍然是一些愚蠢的方法。或者如果它有效，几年后我的网站就会遇到麻烦。原因是硬盘，处理器永远不会永远存在。当我的处理器或硬盘出现故障时，我的网站就会出现故障并丢失所有凭据。

**更新**

> 发现了这个问题，它在 PHP 中使用河豚进行解密。它是否解决了寻找安全的加密方式和其他人难以解密的问题？

1.  [如何在 php 中使用 Blowfish 算法解密？](https://stackoverflow.com/questions/5580960/how-to-decrypt-using-blowfish-algorithm-in-php?rq=1)

谁能建议我应该如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T04:22:04.570

请记住，为了破解密码，黑客首先必须能够访问加密的密码。为了做到这一点，他们将不得不损害服务器的安全性，如果站点编码正确（正确的转义或准备好的语句），这应该是不可能的。

最强大但最简单的加密形式之一是 XOR，但它完全取决于密钥。如果密钥与编码文本的长度相同，那么没有该密钥就完全牢不可破。即使密钥只有文本长度的一半，也极不可能被破坏。

不过，最后，无论您选择什么方法，都由您的 FTP/SSH/任何允许您访问服务器文件的密码保护。如果您自己的密码被泄露，黑客可以看到一切。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T07:06:39.553

查看这篇有据可查的文章[A reversible password encryption routine for PHP](http://www.tonymarston.net/php-mysql/encryption.html)，适用于那些想要一个可逆密码加密例程的 PHP 开发人员。

即使此类用于密码加密，您也可以将其用于任何文本的加密/解密。

```
function encryption_class() {
    $this->errors = array();

    // Each of these two strings must contain the same characters, but in a different order.
    // Use only printable characters from the ASCII table.
    // Do not use single quote, double quote or backslash as these have special meanings in PHP.
    // Each character can only appear once in each string.
    $this->scramble1 = '! #$%&()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~';
    $this->scramble2 = 'f^jAE]okIOzU[2&q1{3`h5w_794p@6s8?BgP>dFV=m D<TcS%Ze|r:lGK/uCy.Jx)HiQ!#$~(;Lt-R}Ma,NvW+Ynb*0X';

    if (strlen($this->scramble1) <> strlen($this->scramble2)) {
        trigger_error('** SCRAMBLE1 is not same length as SCRAMBLE2 **', E_USER_ERROR);
    } // if

    $this->adj = 1.75;  // this value is added to the rolling fudgefactors
    $this->mod = 3;     // if divisible by this the adjustment is made negative
} 
```

**注意**：

如果您使用 PHP 版本 >= 5.3.3，则必须将类名从更改`encryption_class`为`__construct`

**原因：**

`As of PHP 5.3.3, methods with the same name as the last element of a namespaced class name will no longer be treated as constructor.`

**用法：**

```
$crypt = new encryption_class();

$crypt->setAdjustment(1.75); // 1st adjustment value (optional)
$crypt->setModulus(3); // 2nd adjustment value (optional)

/**
 * 
 * @param string $key - Your encryption key
 * @param string $sourceText - The source text to be encrypted
 * @param integer $encLen - positive integer indicating the minimum length of encrypted text
 * @return string - encrypted text
 */
$encrypt_result = $crypt->encrypt($key, $sourceText, $encLen);

/**
 * 
 * @param string $key - Your encryption key (same used for encryption)
 * @param string $encrypt_result - The text to be decrypted
 * @return string - decrypted text
 */
$decrypt_result = $crypt->decrypt($key, $encrypt_result); 
```

**更新：**

上面的类不是用来加密文件的，但是你可以！！！

1.  [`base64_encode`](http://php.net/manual/en/function.base64-encode.php)您的源文本（文件内容）
2.  对于实际加密，将上述 enc/dec 类应用于 base64 编码文本
3.  对于解密，将上面的 enc/dec 类应用于实际加密的文本
4.  [`base64_decode`](http://php.net/manual/en/function.base64-decode.php)将为您提供实际的文件内容（您可以使用此内容保存文件副本）

我已经加密了一张图片，解密回来并保存到一个新文件中！！！签出代码。

```
//class for encrypt/decrypt routines 
require 'class.encryption.php';

//configuring your security levels
$key = 'This is my secret key; with symbols (@$^*&<?>/!#_+), cool eh?!!! :)';
$adjustment = 1.75;
$modulus = 2;

//customizing
$sourceFileName = 'source-image.png';
$destFileName = 'dest-image.png';
$minSpecifiedLength = 512;

//base64 encoding file contents, to get all characters in our range
//binary too!!!
$sourceText = base64_encode(file_get_contents($sourceFileName));

$crypt = new encryption_class();
$crypt->setAdjustment($adjustment); //optional
$crypt->setModulus($modulus); //optional

//encrypted text
$encrypt_result = $crypt->encrypt($key, $sourceText, $minSpecifiedLength);

//receive initial file contents after decryption
$decrypt_result = base64_decode($crypt->decrypt($key, $encrypt_result));

//save as new file!!!
file_put_contents($destFileName, $decrypt_result); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-25T09:16:57.367

你的问题导致两个不同的答案。这是一个重要的区别，您是否需要稍后解密数据（如文件），或者您是否可以使用单向哈希（用于密码）。

## 单向哈希

如果您**不需要解密**数据（密码），则应使用散列函数。这更安全，因为即使攻击者控制了您的服务器和数据库，他也不应该能够检索到原始密码。由于用户经常在多个网站上使用他们的密码，因此至少他也无法访问其他网站。

正如您已经说过的，当今最推荐的哈希函数之一是**bcrypt**。尽管它起源于河豚算法，但它实际上是一个散列函数（不是加密）。Bcrypt 是专门为散列密码而设计的，因此速度很慢（需要计算时间）。建议使用完善的库，如[phpass](http://www.openwall.com/phpass/)，如果您想了解如何实现它，可以阅读这篇[文章](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)，我试图解释最重要的点。

## 加密

如果您**需要**稍后解密您的数据（文件），您无法阻止控制您服务器的攻击者也可以解密文件（毕竟服务器必须能够解密它）。所有这些加起来就是在哪里存储密钥的问题。你唯一能做的就是让获取钥匙变得更加困难。

这意味着，如果您将密钥存储在文件中，它应该**位于**http 根目录之外，因此无论如何都不能从 Internet 访问它。您可以将其存储在不同的服务器上，因此攻击者需要控制两台服务器，但随后您将面临服务器之间安全通信的问题。在任何情况下，您都可以使盗窃更加困难，但您无法完全防止盗窃。

根据您的情况，您可以在计算机上本地加密文件，并且仅将加密文件存储在服务器上。服务器将无法自行解密文件，因此它们是安全的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T19:03:55.643

所以你已经知道了加盐和散列，但你也可以“拉伸”你的密码，而不是只对每个密码进行一次散列，而是对它进行数千次散列。这将减慢蛮力攻击并增加散列算法的寿命。有趣的是，它通过故意减慢您的服务器来工作......

我建议您编写自己的自定义哈希函数。首先，您在密码中添加盐，然后选择一个哈希算法（例如 sha512，或者可能是一种旨在为此目的效率低下的新算法）并将其哈希 10,000 次，然后将其存储在数据库中. 正如您已经知道的那样，当用户登录时，您只需通过相同的算法运行他们的输入并查看它是否匹配，而不是反转哈希值。

编写自己的哈希函数的美妙之处在于，当需要更新哈希算法时，因为旧的哈希算法容易受到暴力攻击，您所要做的就是添加到您的哈希函数中，获取旧哈希的结果算法，重新加盐，并使用您的新算法再次对其进行哈希处理。您可以使用当时认为安全的任何哈希算法。然后，您可以简单地使用散列函数的新部分重新散列已存储在数据库中的每个密码，从而确保向后兼容性。根据您拥有的用户数量和服务器的速度，执行此更新可能只需要几秒钟。

但是，仍然存在一个漏洞。如果黑客拥有您数据库的旧副本并破解它，他仍然知道任何尚未更改密码的用户的密码。解决此问题的唯一方法是要求您的用户偶尔更改他们的密码，这可能适合您的网站，也可能不适合您的网站，具体取决于它包含的信息的性质。一些安全专家建议，用户只有在密码被泄露时才更改密码，因为如果系统使密码管理变得过于困难，他们就会开始做不安全的事情，比如将密码保存在键盘下，这对某些组织来说比拥有更大的威胁从不更改密码的用户。如果您的网站是论坛或评论网站或类似性质的网站，

一种可能的哈希函数：

```
function the_awesomest_hash($password)
{
    $salt1 = "awesomesalt!";
    $password = $salt1 . $password;
    for($i = 0; $i < 10000; $i++)
    {
        $password = hash('sha512', $password);
    }
    // Some time has passed, and you have added to your hash function
    $salt2 = "niftysalt!";
    $password = $salt2 . $password;
    for($i = 0; $i < 10000; $i++)
    {
        $password = hash('futuresuperhash1024', $password);
    }
    return $password;
} 
```

现在，为了更新数据库中已有的所有密码，您可以通过以下函数运行它们：

```
function update_hash($password)
{
    // This is the last part of your the_awesomest_hash() function
    $salt2 = "niftysalt!";
    $password = $salt2 . $password;
    for($i = 0; $i < 10000; $i++)
    {
        $password = hash('futuresuperhash1024', $password);
    }
    return $password;
} 
```

我喜欢编写自己的哈希函数，因为在更新它们时更容易跟踪到底发生了什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T12:38:30.463

经过对 PHP 的一些研究，尤其是随机数生成，使用 PHP 安全加密的唯一方法是使用 OpenSSL 包装器。尤其是 mcrypt 的创建者是一群白痴，看看他们的示例中的 not how to perform cryptography 的例子：

```
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
$key = "This is a very secret key";
$text = "Meet me at 11 o'clock behind the monument.";
echo strlen($text) . "\n";

$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_ECB, $iv);
echo strlen($crypttext) . "\n"; 
```

请注意，默认情况下 MCRYPT_RAND 没有很好地播种。此外，仅上述代码至少有大约 5 个错误，他们不会修复它。

[编辑] 修改后的示例见下文。请注意，此示例也不是很安全（如上所述）。此外，通常你不应该加密密码......

```
# the key should be random binary, use scrypt, bcrypt or PBKDF2 to convert a string into a key
# key is specified using hexadecimals
$key = pack('H*', "bcb04b7e103a0cd8b54763051cef08bc55abe029fdebae5e1d417e2ffb2a00a3");
echo "Key size (in bits): " . $key_size * 8 . "\n";
$plaintext = "This string was AES-256 / CBC / ZeroBytePadding encrypted.";
echo "Plain text: " . $plain_text . "\n";
$ciphertext_base64 = encryptText($key, $plaintext);
echo  $ciphertext_base64 . "\n";

function encryptText(string $key_hex, string $plaintext) {

    # --- ENCRYPTION ---

    # show key size use either 16, 24 or 32 byte keys for AES-128, 192 and 256 respectively
    $key_size =  strlen($key);

    # create a random IV to use with CBC encoding
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    # use an explicit encoding for the plain text
    $plaintext_utf8 = utf8_encode($plaintext);

    # creates a cipher text compatible with AES (Rijndael block size = 128) to keep the text confidential 
    # only suitable for encoded input that never ends with value 00h (because of default zero padding)
    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaintext_utf8, MCRYPT_MODE_CBC, $iv);

    # prepend the IV for it to be available for decryption
    $ciphertext = $iv . $ciphertext;

    # encode the resulting cipher text so it can be represented by a string
    $ciphertext_base64 = base64_encode($ciphertext);

    return $ciphertext_base64;
}

# === WARNING ===

# Resulting cipher text has no integrity or authenticity added
# and is not protected against padding oracle attacks.

# --- DECRYPTION ---

$ciphertext_dec = base64_decode($ciphertext_base64);

# retrieves the IV, iv_size should be created using mcrypt_get_iv_size()
$iv_dec = substr($ciphertext_dec, 0, $iv_size);

# retrieves the cipher text (everything except the $iv_size in the front)
$ciphertext_dec = substr($ciphertext_dec, $iv_size);

# may remove 00h valued characters from end of plain text
$plaintext_utf8_dec = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $ciphertext_dec, MCRYPT_MODE_CBC, $iv_dec);

echo  $plaintext_utf8_dec . "\n"; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-24T21:03:12.140

到目前为止，我知道保存密码的最佳方法是使用 joomla 中使用的加盐哈希。您还可以将额外的密钥与传统的 base64 一起添加到 md5 哈希中。我前段时间写了一个类似的脚本，试图找到它但找不到。

Joomla 使用加盐的 md5 密码。获取您提供的哈希密码：30590cccd0c7fd813ffc724591aea603:WDmIt53GwY2X7TvMqDXaMWJ1mrdZ1sKb

如果您的密码是“密码”，则： md5('passwordWDmIt53GwY2X7TvMqDXaMWJ1mrdZ1sKb') = 30590cccd0c7fd813ffc724591aea603

所以，把你的密码。生成一个随机的 32 个字符的字符串。计算与随机字符串连接的密码的 md5。将 md5 结果加上 : 加上随机的 32 个字符串存储在数据库中。

# c++ - 如何动态增加数组大小？

> ID：12032222
> 
> 赞同：11
> 
> 时间：2012-08-20T04:16:56.960
> 
> 标签：c++

我一直在尝试制作一个添加 2 个不同大小的数组的程序。但我想知道动态增加数组大小容量？例如：array[4] 然后将大小升级为 2 以制作 array[6];？编辑：不使用向量

我尝试创建一个新的 ptr，但它不起作用。我收到错误：只读变量不可分配。

```
int *ptr2 = new int[a2.size];

            // new ptr2 copies ptr1
            for (int i=0; i<(a1.size); i++) {
                ptr2[i] = a1.ptr[i];
            }

            // we want ptr1 to point to ptr2
            for (int i=0; i<(a2.size); i++) {
                ptr2[i] += a2.ptr[i];
            }

            delete [] a1.ptr;

            a1.ptr=ptr2; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T04:19:40.810

你不能改变数组的大小，但你不需要。您可以分配一个更大的新数组，复制要保留的值，删除原始数组，然后更改成员变量以指向新数组。

1.  分配一个 new[] 数组并将其存储在一个临时指针中。

2.  复制您要保留的先前值。

3.  删除[] 旧数组。

4.  更改成员变量，`ptr`并`size`指向新数组并保持新大小。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-19T06:31:21.373

```
 int* newArr = new int[new_size];
   std::copy(oldArr, oldArr + std::min(old_size, new_size), newArr);
   delete[] oldArr;
   oldArr = newArr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-25T02:47:31.963

> 回答可能为时已晚，但我会向您解释一些事情..

由于内存中的内存分配是连续的，因此无法增加数组大小。例如 => 每个位置的地址是

> arr[5] => [2001,2002,2003,2004,2005]

现在，主要问题是如果你将它分配给 arr[10] 所以，因为我们不知道下一个位置 2006 将是 free 。因为数组需要是连续的，所以我们将无法分配内存

> 从我的建议中使用 Vector 或在 Cpp 中使用动态内存分配

```
int *old = new int[5];
int *nw = new int[10];

for (size_t i = 0; i < sizeof(old); i++)
    nw[i] = old[i];

delete []old;
old = nw;
nw = NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T09:36:21.997

```
#include<bits/stdc++.h>
using namespace std;

main(){

    int *p = new int[5]; // locate memory in heap
    int *q = new int[10];// locate memory in heap

    for(int j=0; j<5;j++)
        p[j] = j;

    for(int i=0; i<5;i++)
        q[i] = p[i];

    delete []p;//Delete the old array 'p'
    p = q; // Assign the pointer of 'q' to 'p'
    q = NULL; // delete the location of pointer 'q'

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-09-07T06:48:39.357

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
int *p,*q;
int i;
p=(int *)malloc(5*sizeof(int));
p[0]=3;p[1]=5;p[2]=7;p[3]=9;p[4]=11;
q=(int *)malloc(10*sizeof(int));
for(i=0;i<5;i++)
q[i]=p[i];
free(p);
p=q;
q=NULL;
for(i=0;i<5;i++)
printf("%d \n",p[i]);
return 0;
} 
```

# xcode - 未调用 cellForRowAtIndexPath

> ID：12032223
> 
> 赞同：1
> 
> 时间：2012-08-20T04:16:58.063
> 
> 标签：xcode, uitableview

我有一个**主从**应用程序。当用户在**主表**( `MasterViewController`) 中选择一行时，我想打开另一个`UITableViewController`( `DocumentViewController`) 并在此处显示数据（**不在详细视图中**）。

当我运行应用程序时，会调用**DocumentViewController**`numberOfSectionsInTableView`的“ ”，但不会调用“”。**`cellForRowAtIndexPath`**

 ****DocumentViewController.m**中的代码是：

```
 - (void)viewDidLoad
{
  [super viewDidLoad];
  [docTable setDataSource:self];
  [docTable setDelegate:self];

EDViPadDocSyncService *service = [[EDViPadDocSyncService alloc]init];
EDVCategory *cat = [EDVCategory alloc];
cat.categoryId = [catId intValue];
[service getDocsByCatId:self action:@selector(getDocsByCatIdHandler:) category:cat];

[self.docTable reloadData];
}

 - (void) getDocsByCatIdHandler: (id)value {
      //snip......
      [docTable reloadData];
}

- (void)viewDidUnload
{
   [super viewDidUnload];
}

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return [self.myDocList count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   DocumentCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DocumentCell"];
   if (cell == nil)
   {
      cell = [[[DocumentCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"DocumentCell"] autorelease];
   }
NSLog(@"cell text=%@",[self.myDocList objectAtIndex:indexPath.row]);
cell.lblDocName.text = [self.myDocList objectAtIndex:indexPath.row];
return cell; 
```

}

谢谢您的帮助。

**编辑：-**我已经为表设置了委托和数据源属性。表`@property (nonatomic,retain) IBOutlet UITableView *docTable;`在**DocumentViewController.h**中声明为“” 。我曾尝试使用 ' `viewwillappear`' 和 ' `initwithstyle`'，但这些似乎也不起作用。**

# android - 使用传感器事件侦听器测量与 android 一起行驶的距离

> ID：12032224
> 
> 赞同：1
> 
> 时间：2012-08-20T04:17:10.873
> 
> 标签：android, android-sensors, sensor-fusion

我想测量使用带有传感器的 android 行驶的距离。你能给我一个想法如何开始这个项目吗？或者给我任何可以帮助我做到这一点的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:08:00.883

我认为没有一种**准确**的方法可以使用传感器事件侦听器测量行进距离，因为误差幅度很大。观看 GoogleTechTalks 视频的这一部分：[Android 开发中的传感器融合](http://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=player_detailpage#t=1434s)

相反，您只需尝试使用 GPS 来标记起点和终点，并使用[位置管理器](http://developer.android.com/reference/android/location/LocationManager.html)来测量行驶距离。

# ruby-on-rails - 带有acts_as_votable插件的投票者和投票用户模型？

> ID：12032226
> 
> 赞同：0
> 
> 时间：2012-08-20T04:17:37.637
> 
> 标签：ruby-on-rails

我正在为 Ruby on Rails 使用acts_as_votable 插件。我的应用程序中只有一个 User 模型，并决定不创建 Profile 模型，因为字段有限。有没有办法让用户既可以投票又可以投票？我的用户应该能够创建他们的个人资料，对除他们自己的个人资料之外的其他个人资料进行投票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:51:58.693

乍一看，您应该可以做到

```
class User << ActiveRecord::Base
  acts_as_votable
  acts_as_voter

  # ...
end 
```

然后做

```
user1 = User.find(some_id)
user2 = User.find(some_other_id)

user1.liked_by user2 
```

# google-apps-script - HtmlService 中的应用程序脚本仪表板

> ID：12032228
> 
> 赞同：1
> 
> 时间：2012-08-20T04:18:01.053
> 
> 标签：google-apps-script, dashboard

我看到了仪表板演示，它看起来很棒。是否可以在使用 HtmlService 创建的用户界面中嵌入仪表板甚至图表？大多数演示只使用 UI 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:38:45.303

据我了解，目前您可以使用的唯一库是 JQuery 和 JQuery UI 库，但我相信团队正在添加更多库来支持它。

# emacs - 是否可以在 Emacs 中交替使用两种输入法？

> ID：12032231
> 
> 赞同：5
> 
> 时间：2012-08-20T04:18:30.903
> 
> 标签：emacs

我知道有“C-\”来切换输入法，但它只允许一种额外的输入法——例如，默认情况下我有英文 qwerty 布局，我可以在它和 dvorak 之间切换。

但是有什么方法可以同样轻松地在其他两种语言之间进行交替吗？例如，如果我想交替使用英语-德沃夏克语和我的母语布局？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T17:19:43.427

为了在 2 种或更多替代输入法之间快速切换，我将以下代码添加到我的`init.el`:

```
;; Input method and key binding configuration.
(setq alternative-input-methods
      '(("russian-computer" . [?\C-\\])
        ("chinese-py-punct" . [?\C-|])
        ("german-postfix"   . [?\C-\M-|])))

(setq default-input-method
      (caar alternative-input-methods))

(defun toggle-alternative-input-method (method &optional arg interactive)
  (if arg
      (toggle-input-method arg interactive)
    (let ((previous-input-method current-input-method))
      (when current-input-method
        (deactivate-input-method))
      (unless (and previous-input-method
                   (string= previous-input-method method))
        (activate-input-method method)))))

(defun reload-alternative-input-methods ()
  (dolist (config alternative-input-methods)
    (let ((method (car config)))
      (global-set-key (cdr config)
                      `(lambda (&optional arg interactive)
                         ,(concat "Behaves similar to `toggle-input-method', but uses \""
                                  method "\" instead of `default-input-method'")
                         (interactive "P\np")
                         (toggle-alternative-input-method ,method arg interactive))))))

(reload-alternative-input-methods) 
```

因此，要切换到俄语、中文或德语 IME，我使用,`C-\`相应地。为了切换回英文，我使用与当前 IME 相同的键（即，如果我激活了中文 IME，我将使用 切换回）。`C-|``C-M-|``C-|`

配置使用`alternative-input-methods`变量。它是输入法名称和键绑定的组合列表。

**笔记！**如果您通过调用`M-x toggle-input-method`或 通过激活 IME `C-u C-\`，则按`C-\`将根据变量切换到输入法`alternative-input-methods`（在默认配置中，Emacs 会记住新的 IME 并将其用于`C-\`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:31:24.113

如果我键入`C-u C-\`选择一种输入法，然后再次选择另一种，我发现每次后续调用都使用以前的输入法作为默认输入，因此切换到另一种输入法归结为`C-u C-\ RET`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-11T00:23:46.140

```
(setq my/input-methods '(nil "some-input-method" "japanese" ))
(defvar my/input-method-switch-counts 0 "a count; more than index")
(make-variable-buffer-local 'my/input-method-switch-counts)
(put 'my/input-method-switch-counts 'permanent-local t)
(defun my/switch-input-method () 
  (interactive)
  (setq my/input-method-switch-counts
        (1+ my/input-method-switch-counts))
  (let ((i (nth (% my/input-method-switch-counts
                   (length my/input-methods)
                   )
                my/input-methods
                )))
    (set-input-method i)  ;;interactive use may set any needed
    )
  ;;(message "IME %s on" current-input-method)
  )

(global-set-key (kbd "C-<SPC>") 'my/switch-input-method)
;;also make sure mode-line-mule-info in mode-line-format to show current input-method in mode-line 
```

# android - Api 级别 8 中的 GoogleMaps

> ID：12032236
> 
> 赞同：1
> 
> 时间：2012-08-20T04:19:17.160
> 
> 标签：android, android-mapview, android-maps

```
LinearLayout maplayout = new LinearLayout(this);
maplayout.setGravity(Gravity.BOTTOM);
LinearLayout.LayoutParams params = new   LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,600);
MapView mapView = new MapView(this,mapkey);
MapController mc = mapView.getController();
mc.setZoom(20);
maplayout.addView(mapView,params);
setContentView(maplayout); 
```

我通过使用上面的代码获得了一个具有指定位置的地图视图并且它成功运行但是

当我在地图上滑动时它不动.. 它的 APK 级别 8 项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:47:51.037

将此添加到 xml 中的地图视图中，

```
android:clickable="true" 
```

或者，将其添加到您的 Java 文件中，

```
mapView.setClickable(true); 
```

# android - 如何默认打开目录应用程序android

> ID：12032238
> 
> 赞同：0
> 
> 时间：2012-08-20T04:19:30.903
> 
> 标签：android, android-intent

请帮我解决这个问题。我知道如何默认应用程序打开文件，如下所示：

```
 Intent intent = new Intent();
    intent.setAction(android.content.Intent.ACTION_VIEW);
    File file = ExternalStorageHelper.getFileFromName(fileName);
    MimeTypeMap mime = MimeTypeMap.getSingleton();
    String ext =fileName.substring(fileName.lastIndexOf(".")+1);
    String type = mime.getMimeTypeFromExtension(ext);
    if(type != null){
        if(mime.hasMimeType(type)){
            intent.setDataAndType(Uri.fromFile(file),type);
            containActivity.startActivityForResult(intent,1);
        }else{
            Toast t = Toast.makeText(containActivity, R.string.download_open_file_error_message, Toast.LENGTH_SHORT);
            t.show();
        }
    }else{
        Toast t = Toast.makeText(containActivity, R.string.download_open_file_error_message, Toast.LENGTH_SHORT);
        t.show();
    } 
```

但我无法找到默认应用程序如何打开文件夹。从这段代码中，我如何确定 MimeTypeMap 文件名是一个目录。

我现在真的很需要它，请帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:41:50.720

> 不幸的是，没有内置的方法可以做到这一点。您可以尝试使用 OI FileManager - 它非常好，但用户需要安装应用程序才能使用它。
> 
> 还有一个很好的例子，说明如何在这里制作自己的。

[如何打开文件浏览器？(安卓SDK)](https://stackoverflow.com/questions/5803787/how-do-i-open-the-file-browser-android-sdk)

# iphone - 如何指定每节的行数

> ID：12032240
> 
> 赞同：0
> 
> 时间：2012-08-20T04:19:52.637
> 
> 标签：iphone, ios, uitableview

我有一个 NSDictionary 返回，我希望每个条目都有一行，但是我还希望在此部分上方有一个只有一个 etry 的部分，我正在尝试使用下面的代码执行此操作，但是当我去的时候我一直收到错误输入 if 语句。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // returns the number of rows per section based off each entry in letterDictionary
    NSString *currentLetter = [sectionLetterArray objectAtIndex:section];
    if (section == 1) {
        return 1;
    }
    else
    return [[letterDictionary objectForKey:currentLetter] count];
} 
```

这是我尝试设置表格视图的第一部分时收到的错误。

```
2012-08-20 16:12:11.983 kPad[5681:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'
*** First throw call stack:
(0x3686756b 0x36b4797f 0x367a856d 0x56c11 0x3793f8b7 0x37940c19 0x37940b6d 0x3794075d 0x5826d 0x57dfb 0x5569b 0x55ee9 0x5fd65 0x32d8bead 0x373f3ccb 0x5f6a5 0x61c99 0x5f531 0x5ef6f 0x5b443 0x374105b5 0x37361991 0x373618ad 0x32ccaacf 0x32cca1bb 0x32cf2323 0x367ae2e1 0x32cf2783 0x32c56c65 0x36838143 0x368379a9 0x368366ef 0x367b4c1d 0x367b4aa9 0x3967833b 0x3791e535 0x4edd5 0x3557fb20)
libc++abi.dylib: terminate called throwing an exception 
```

问题是可以有几个部分并且它是动态的..这就是我使用 if else 的原因..我希望这是正确的做法。它只是我不断收到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:34:56.680

首先将 if 语句放入`section == 0`您的 if 语句并检查该`numberOfSectionsInTableView:`方法是否在此方法的语句中**返回 2**`return`？如果是这样，你可以有，`section == 1`否则它只有一个部分，它是**== 0**而不是**== 1**

否则这一切都很好:)

快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:31:13.067

问题是 sectionLetterArray 没有索引 1，所以它崩溃了。您可以删除您的 else 语句（如果该部分为 1 则不会执行，因为您已经返回了某些内容），并将其替换为`NSString *currentLetter = [sectionLetterArray objectAtIndex:section];`

**编辑：**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // returns the number of rows per section based off each entry in letterDictionary

    if (section == 1) {
        return 1;
    }

    NSString *currentLetter = [sectionLetterArray objectAtIndex:section];
    return [[letterDictionary objectForKey:currentLetter] count];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:44:15.937

只需检查您的数组中有多少项目`sectionLetterArray`以及您的行中有多少部分......

# javascript - 为什么我的 JS/jQuery 循环在 2 个循环后停止？

> ID：12032245
> 
> 赞同：0
> 
> 时间：2012-08-20T04:21:01.837
> 
> 标签：javascript, jquery

所以我有一个包含很多重复值的数组。`myArr = ['yeh','yeh','yeh','hey']`. 我有一个 HTML 表单，允许用户输入一个单词，如果该单词在数组中，它将删除所有重复值并打印出没有这些值的新 myArr。但是，我的循环在几个循环后继续停止，而没有完成删除其余重复项。就像我`['yeh','yeh','yeh']`在表格中输入“yeh”一样，它只会删除两个“yeh”。

HTML

```
<form id="remove_user" action="#" method="post">
        <label for="user_num">Remove user:</label>
        <input type="text" id="user_num" name="user_num" placeholder="number">
        <input type="submit" value="(-) remove">
    </form><!-- #remove_user -->

    <ul id="user_list"></ul><!-- #user_list --> 
```

JS：

```
$('#remove_user').submit(function(){
    id = $('#user_num').val();
    $.each(myArr, function(i, value){
        if (value == id){
            myArr.splice(i, 1);
            console.log(myArr);
        }
    });
    console.log(myArr);
    $('#user_list').html('');
    for (var i=0; i < myArr.length; i += 1) {
        console.log(myArr[i]);
        $('#user_list').append('<li>' +myArr[i]+ '</li>');
    };
    return false;
}); 
```

更新的答案（如下所述，我在对其进行循环时对其进行了修改，所以事情被跳过了。我使用 grep 创建了一个新数组，其中包含与提交的值不匹配的所有值，然后只是一个一个地检查 diffValues 元素并打印出来）：

```
$('#remove_user').submit(function(){
    id = $('#user_num').val();
    var diffValues = $.grep(myArr, function(value, i){
        return value != id;
    });
    console.log(diffValues);
    $('#user_list').html('');
    for (var i=0; i < diffValues.length; i += 1) {
        console.log(diffValues[i]);
        $('#user_list').append('<li>' +diffValues[i]+ '</li>');
    };
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:25:39.217

当您`splice`使用数组时，您正在更改该数组。所以基本上你的阵列正在经历这些步骤：

```
['yeh','yeh','yeh','hey']
  ^^^
splice, move iterator forward
['yeh','yeh','hey']
        ^^^
splice, move iterator forward
['yeh','hey']
              ^^^
end loop - one of the 'yeh' is still there 
```

您可能对[`.grep()`](http://api.jquery.com/jQuery.grep/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:29:39.683

如果要删除正在循环使用的数组中的值，则必须向后遍历它（因为以这种方式使数组的长度更短不会使循环无效）。

```
id = $('#user_num').val();
for (var i = myArr.length - 1; i >= 0; i--) {
    if (myArr[i] == id) {
        myArr.splice(i, 1);
    }
} 
```

# sql-server - 主键表的一部分的外键

> ID：12032247
> 
> 赞同：2
> 
> 时间：2012-08-20T04:21:10.930
> 
> 标签：sql-server

我有一个包含此表的数据库**Conversion**和**Client**我想在这些表之间创建关系，
因此 ID_Send 在**转换**参考到**客户端**
中的 ID和 ID_Receive 在**转换**参考到**客户端中的 ID**

```
create table Conversion(ID_Send int ,
                        ID_Receive int ,
                        [Time] datetime,
                        [Message] varchar(2048),
                        primary key(ID_Send,ID_Receive,[Time])
                        )

create table Client (ID int IDENTITY(1,1) primary key,
                    [First name] varchar(500) not null,
                    [Last Name]varchar(500) not null,
                    [Birth day] datetime,
                    Gender bit not null,
                    Country  varchar(200)not null,
                    City varchar(200) ,
                    [Language] varchar(200)not null, 
                    [Chat name] varchar(500)not null ,
                    [Password] varchar (500)not null,
                    --foreign key(ID) REFERENCES Conversion (ID_Send)--there is an error 
                    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:41:28.820

如果您有一个复合主键（由多个列组成），那么您的所有外键也**必须**使用PK 的**所有列**来引用该表。

毕竟：您还能如何从子表到父表的明确、确定性的引用？仅当您使用**唯一标识**父表中的一行的列时，此操作才有效。

`ID_Send`唯一的解决方法是在父表中的和列上放置一个唯一索引`ID_Receive`，然后引用该唯一索引。

但是问题是：如果这些值是唯一的 - 为什么这些列中的一列不是您的主键？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T04:45:33.327

Motazz，表中只能有一个主键，就像您在 Client 表中一样。摆脱错误：

第一次创建客户表，第二次将转换代码替换为：

```
create table Conversion(ID_Send int FOREIGN KEY REFERENCES Client(ID),
                    ID_Receive int FOREIGN KEY REFERENCES Client(ID),
                    [Time] datetime,
                    [Message] varchar(2048),
                    primary key(ID_Send,ID_Receive,[Time])
                    ) 
```

# c# - 如何在我的 Erlang 代码中使用 C# 代码？

> ID：12032248
> 
> 赞同：5
> 
> 时间：2012-08-20T04:21:13.863
> 
> 标签：c#, interface, erlang

我需要在我的 Erlang 代码中使用用 C# 实现的功能。有哪些接口可以将 Erlang 与 C# 联系起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T04:31:58.037

首先，您需要将 C# 导出到非托管代码中，然后使用 COM 接口，例如

*   [向 COM 公开 .NET Framework 组件](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)
*   [如何自动将 .NET 函数导出到非托管程序](http://www.codeproject.com/Articles/16310/How-to-Automate-Exporting-NET-Function-to-Unmanage)

而且我不确定单声道是否有可能。顺便说一句，我建议使用“.NET 代码”而不是“C# 代码”。

*欢迎来到 SO，ymn*

# jquery - Twitter Bootstrap 切换按钮（bootstrap-button.js）不起作用

> ID：12032257
> 
> 赞同：0
> 
> 时间：2012-08-20T04:23:01.543
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, asset-pipeline

我有一个简单的按钮，就像他们在演示中一样：

```
<button id="track" class="btn" data-toggle="button">Track</button> 
```

在我的 application.js 文件中我添加了：

```
$('#track').button();

$('#track').live('click', function(event) {
    alert('hello!');
}); 
```

我添加了警报呼叫作为双重检查 - 它有效。我可以确认`bootstrap-button.js`脚本正在加载并且只加载一次。我玩过 javascript 加载顺序，但这似乎没有什么区别：

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require bootstrap
//= require active_admin 
```

我确实设法通过在按钮后手动插入带有内联的脚本标签来让它工作一次，`bootstrap-button.js`但现在我什至无法重新创建它！

我已经用谷歌搜索并阅读了几乎所有关于这些问题的 SO 帖子，但我认为我必须在这里遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:54:59.653

你应该看看引导开关插件

只需在您的 html 正文中使用它

```
<div class="switch">
    <input type="checkbox" checked />
</div> 
```

有关插件和更高级示例的更多详细信息，请参阅[此链接](http://www.larentis.eu/switch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:26:18.137

+1 @andres-ilich 让我思考。active_admin 是冲突。如果我在 twitter/boorstrap 之前加载它，它会很好用。

# iphone - iphone:-用 UILocalNotification 声音播放录制的声音

> ID：12032259
> 
> 赞同：6
> 
> 时间：2012-08-20T04:23:27.563
> 
> 标签：iphone, ios, xcode

我可以使用 avrecorder 录制语音，但它会将录制的语音保存在文档目录的路径中，我无法找到在 localNotification 声音中使用它的方法，所以任何人都请对这个问题有所了解

录制代码：-

```
-(IBAction)startRecording

{

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];

    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentPath = [searchPaths objectAtIndex:0];
    NSLog(@"ccc...%@",documentPath);

    if(toggle)
    {
        toggle = NO;

        recordSetting = [[NSMutableDictionary alloc] init];

        [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

        strRecordedVoice=[NSString stringWithFormat: @"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"];

        recordedTmpFile = [NSURL fileURLWithPath:[documentPath stringByAppendingPathComponent:strRecordedVoice]];
        NSLog(@"Using Filepath called: %@",recordedTmpFile);
        NSLog(@"Using str: %@",strRecordedVoice);

        recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];

        [recorder setDelegate:self];
                [recorder prepareToRecord];

        [recorder record];

        progressView.progress = 0.0;
        [recorder recordForDuration:(NSTimeInterval) 2];

        lblStatusMsg.text = @"Recording...";
        progressView.progress = 0.0;
        timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(handleTimer) userInfo:nil repeats:YES];

    }
    else
    {
        toggle = YES;

        //Stop the recorder.
        [recorder stop];
    }

} 
```

//本地通知代码

```
-(void) scheduleLocalNotificationWithDate:(NSDate *)fireDate
{   
    UILocalNotification *notification =[[UILocalNotification alloc]init];

    notification.fireDate=fireDate;
    notification.repeatInterval    = 0;
    notification.alertAction       = NSLocalizedString(@"View", @"View");
notification.soundName = UILocalNotificationDefaultSoundName;

    NSDictionary *userDict = [NSDictionary dictionaryWithObject:ap.strAlarmTitle
                                                         forKey:kRemindMeNotificationDataKey];
    notification.userInfo = userDict;

    [[UIApplication sharedApplication] scheduleLocalNotification:notification];
    [notification release];

}

Reference:-you can see it its an alarm application which uses uilocalnotification
    itunes.apple.com/us/app/record-alarm-free/id418511936?mt=8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:27:45.180

您只能将应用程序包中的声音用于本地通知

[资源](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T15:17:45.050

正如 Martin 所说，您只能使用应用程序包中的声音文件。您提到的应用程序“免费录制警报”也无法将录制的声音播放为通知声音（我已经测试过）。

您可以做的是在从本地通知打开应用程序后播放声音。

您需要在`didReceiveLocalNotification` **and** `didFinishLaunchingWithOptions`中实现此功能：

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    [self playSoundWithNotification:notification];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

  if (notification)
  {
      [self playSoundWithNotification:notification];

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:46:43.460

[NSLocalNotification *obj PlaySound];

# python - 分配给未映射到 SQLAlchemy 列的属性时如何引发异常？

> ID：12032260
> 
> 赞同：5
> 
> 时间：2012-08-20T04:23:29.890
> 
> 标签：python, sqlalchemy

使用 SQLAlchemy，我发现有时我错误地键入了映射到列的属性的名称，这导致很难捕获错误：

```
class Thing(Base):
    foo = Column(String)

thing = Thing()
thing.bar = "Hello" # a typo, I actually meant thing.foo
assert thing.bar == "Hello" # works here, as thing.bar is a transient attribute created by the assignment above
session.add(thing)
session.commit() # thing.bar is not saved in the database, obviously
...
# much later
thing = session.query(Thing)...one()
assert thing.foo == "Hello" # fails
assert thing.bar == "Hello" # fails, there's no even such attribute 
```

有没有办法配置映射类，以便分配给未映射到 SQLAlchemy 列的任何内容会引发异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:04:36.067

好的，解决方案似乎是覆盖`__setattr__`基类的方法，这允许我们在设置之前检查属性是否已经存在。

```
class BaseBase(object):
    """
    This class is a superclass of SA-generated Base class,
    which in turn is the superclass of all db-aware classes
    so we can define common functions here
    """

    def __setattr__(self, name, value):
        """
        Raise an exception if attempting to assign to an atribute which does not exist in the model.
        We're not checking if the attribute is an SQLAlchemy-mapped column because we also want it to work with properties etc.
        See http://stackoverflow.com/questions/12032260/ for more details.
        """ 
        if name != "_sa_instance_state" and not hasattr(self, name):
            raise AttributeError("Attribute %s is not a mapped column of object %s" % (name, self))
        super(BaseBase, self).__setattr__(name, value)

Base = declarative_base(cls=BaseBase) 
```

SQLAlchemy 的“严格模式”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:44:45.487

覆盖`__get__`对象的方法，并检查它是否在列中（通过将其与类定义或运行时搜索一起存储）

[SO的](https://stackoverflow.com/questions/3798835/understanding-get-and-set-and-python-descriptors)更多信息。

# javascript - “属性描述必须是对象”错误

> ID：12032262
> 
> 赞同：7
> 
> 时间：2012-08-20T04:24:28.127
> 
> 标签：javascript

使用此代码我有这个问题：

```
$.fn.dxwShow = function (options)
{
    console.log(typeof(options));
    dxwShowSetOptions(options);

    setInterval(function(){
        dxwShowChange();
    }, dxwShowOptions.time);
};

var dxwShowOptions = {
    "transition" : "SlideToggle",
    "time": 1000
};

var dxwShowStatus = {
    current : 0
};

function dxwShowSetOptions(options)
{
    console.dir(typeof(options));

    dxwShowOptions = Object.create(dxwShowOptions, options);
}

function dxwShowChange()
{
    console.log(dxwShowOptions);
};

$(function()
{
    options = {
        "time": 700,
        "debug" : true
    };

    $("#dxwShow").dxwShow(options);
}); 
```

我想更新`dxwShowOptions`，所以我使用`Object.create`首先传递我想要复制的对象以及包含新参数的对象。错误在哪里？

PS :Chrome 说对象`Object.create`在线上。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T04:51:16.603

`Object.create`获取属性描述符的映射。`options`不是这样的清单。

请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

如果您仍想使用`Object.create`，则需要将选项修改为更像

```
var options = {
    time: {
        enumerable: true,
        configurable: true,
        writable: true,
        value: 700
    },
    debug: {
        enumerable: true,
        configurable: true,
        writable: true,
        value: true
    }
}; 
```

但可能你想使用更像[`_.extend`](http://documentcloud.github.com/underscore/#extend).

# ios - 谷歌地图自动完成 - 奇怪的问题 (iOS)

> ID：12032264
> 
> 赞同：1
> 
> 时间：2012-08-20T04:24:59.357
> 
> 标签：ios, google-maps, google-maps-api-3

我们刚刚开发了一个 iPhone 应用程序，该应用程序具有依赖于 Google 地图的自动完成 API 的功能。该功能适用​​于我们所有的设备，除了一个是带有 5.0.1 操作系统的 iPhone 4。

这是来自 XCode 日志的错误消息：

```
Aug 20 11:46:47 unknown HenryContainer[158] <Warning>: autocomplete: https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Nor&types=(cities)&components=country:au&sensor=true&key=KEYGOESHERE
Aug 20 11:46:48 unknown timed[313] <Notice>: (Note ) CoreTime: Want active time in 39.25hrs. Need active time in 122.58hrs.

Aug 20 11:46:48 unknown HenryContainer[158] <Warning>: ASIHTTPRequest request_didFail:
Aug 20 11:46:48 unknown HenryContainer[158] <Warning>: ASIHTTPRequest request.url: https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Nor&types=(cities)&components=country:au&sensor=true&key=KEYGOESHERE
Aug 20 11:46:48 unknown HenryContainer[158] <Warning>: ASIHTTPRequest request.delegate: <GooglePlacesService: 0x7c6fbd0>
Aug 20 11:46:48 unknown HenryContainer[158] <Warning>: ASIHTTPRequest request.error: Error Domain=ASIHTTPRequestErrorDomain Code=1 "A connection failure occurred: SSL problem (Possible causes may include a bad/expired/self-signed certificate, clock set to wrong date)" UserInfo=0x3207a0 {NSUnderlyingError=0x7c7d6f0 "The operation couldn’t be completed. (OSStatus error -9800.)", NSLocalizedDescription=A connection failure occurred: SSL problem (Possible causes may include a bad/expired/self-signed certificate, clock set to wrong date)}
Aug 20 11:46:48 unknown HenryContainer[158] <Warning>: ASIHTTPRequest request.postBody: (null)

Aug 20 11:46:58 unknown timed[313] <Notice>: (Note ) CoreTime: Not setting system time to 08/20/2012 01:46:58 from NTP because time is unchanged
Aug 20 11:46:58 unknown timed[313] <Notice>: (Note ) CoreTime: Not setting time zone to Australia/Sydney from NITZ 
```

我检查了手机上的时钟时间，一切都应该是这样。谷歌地图应用程序在这款手机上运行良好，并且没有越狱。该应用程序将有一个相当大的分布，所以我也想知道这也发生在另一部手机上的可能性。我们还多次重新安装了该应用程序。

非常感激任何的帮助。

更新：这似乎影响了 3GS 上的 iOS 5.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:04:39.377

我们已经解决了这个问题，这与 iOS 处理 SSL 的方式有关。

# c# - 如何使用不是主键的字段在表之间进行映射？

> ID：12032265
> 
> 赞同：0
> 
> 时间：2012-08-20T04:25:12.723
> 
> 标签：c#, entity-framework-4, ef-code-first

我有两个这样定义的表：

```
CREATE TABLE [SomeTable] (
[PrincipalID] [int] IDENTITY(1,1) NOT NULL,
[AnotherUniqueField] [varchar](50) NOT NULL,
[Data] [varchar](50) NOT NULL,
CONSTRAINT [PK_SomeTable] PRIMARY KEY CLUSTERED ([PrincipalID] ASC))

CREATE TABLE [OtherTable] (
[OtherID] [int] NOT NULL,
[UniqueIfNotNullField] [varchar](20) NULL,
[OtherData] [nvarchar](50) NOT NULL,
CONSTRAINT [PK_OtherTable] PRIMARY KEY CLUSTERED ([OtherID] ASC)) 
```

这两个表记录了相同概念对象的信息，我希望能够在我为它们拥有的 EF 实体中创建它们之间的关系，使用`SomeTable.AnotherUniqueField`和`OtherTable.UniqueIfNotNullField`作为“键”。

`SomeTable.AnotherUniqueField`具有唯一索引，但显然不是 PK。 `OtherTable.UniqueIfNotNullField`如所示，当值不为空时是唯一的。（此约束在数据库中未强制执行，但表数据的来源受到保护，以保证存在值时的唯一性。）

以下是 POCO 实体：

```
public class SomeTable
{
    public int PrincipalID { get; set; }
    public int SameField { get; set; }
    public string Data { get; set; }
    public OtherTable Other { get; set; }
}

public class OtherTable
{
    public int OtherID { get; set; }
    public string SameField { get; set; }
    public string OtherData { get; set; }
} 
```

我的`EntityTypeConfiguration`定义相同：

```
public class SomeTableMap : EntityTypeConfiguration<SomeTable>
{
    public SomeTableMap()
    {
        ToTable("SomeTable");
        HasKey(t => t.PrincipalID);
        Property(t => t.Data)
            .IsRequired()
            .HasMaxLength(50);
        Property(t => t.SameField)
            .HasMaxLength(50);
        Property(t => t.PrincipalID).HasColumnName("PrincipalID");
        Property(t => t.SameField).HasColumnName("AnotherUniqueField");
        Property(t => t.Data).HasColumnName("Data");
    }
}

public class OtherTableMap : EntityTypeConfiguration<OtherTable>
{
    public OtherTableMap()
    {
        ToTable("OtherTable");
        HasKey(t => t.OtherID);
        Property(t => t.OtherData)
            .IsRequired()
            .HasMaxLength(50);
        Property(t => t.SameField)
            .HasMaxLength(20);
        Property(t => t.OtherID).HasColumnName("OtherID");
        Property(t => t.SameField).HasColumnName("UniqueIfNotNullField");
        Property(t => t.OtherData).HasColumnName("OtherData");
    }
} 
```

可以这样映射吗？我在 SomeTableMap 的构造函数中尝试了以下操作，但它不起作用。我对自定义映射的理解已经结束。

```
HasOptional<OtherTable>(x => x.Other)
    .WithOptionalPrincipal()
    .Map(
        map =>
            {
                map.MapKey("UniqueIfNotNullField");
                map.MapKey("AnotherUniqueField");
            }); 
```

这不是一个可映射的连接吗？我有另一个选择，因为`OtherTable`它不是真正的可编辑实体；我可以创建一个包含 SomeTable.PrincipalID 的关联值的视图，但我想看看这是否会首先起作用。

**编辑：**我也试过这个：

```
HasOptional(x => x.Other)
    .WithOptionalPrincipal()
    .Map(map => map.MapKey("UniqueIfNotNullField")); 
```

但我得到错误：“ `Each property name in a type must be unique. Property name 'UniqueIfNotNullField' was already defined.`”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:53:43.327

实体框架不支持这种关系。核心问题是缺少对 EF 中唯一约束的支持。因此，主体实体中的键始终必须是主键，如果要建立一对一关系，则依赖实体中的外键也必须是主键。

# c# - 读取 MVC4 WebApi 多部分数据

> ID：12032267
> 
> 赞同：5
> 
> 时间：2012-08-20T04:25:50.713
> 
> 标签：c#, asp.net-web-api

我正在向我的 WebApi 控制器发送多部分表单数据。我感兴趣的内容包括图像和另一个非图像值。我可以读取图像没问题，但无法弄清楚如何读取**用户名**部分（以**andy**作为值）。它不在提供程序的 FormData 属性中。我怎么才能得到它？

**多部分表单数据**

```
------------ei4KM7KM7ae0GI3Ef1gL6ei4ae0ae0
Content-Disposition: form-data; name="Filename"

image.jpg
------------ei4KM7KM7ae0GI3Ef1gL6ei4ae0ae0
Content-Disposition: form-data; name="username"

andy
------------ei4KM7KM7ae0GI3Ef1gL6ei4ae0ae0
Content-Disposition: form-data; name="Filedata"; filename="image.jpg"
Content-Type: application/octet-stream

------------ei4KM7KM7ae0GI3Ef1gL6ei4ae0ae0
Content-Disposition: form-data; name="Upload"

Submit Query
------------ei4KM7KM7ae0GI3Ef1gL6ei4ae0ae0-- 
```

**控制器代码**

```
string root = System.Web.HttpContext.Current.Server.MapPath("~/App_Data");
MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(root);

var task = request.Content.ReadAsMultipartAsync(provider).ContinueWith<HttpResponseMessage>(o =>
{ 
    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T08:03:35.367

[这里](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)有一篇很好的文章

您的`provider`变量应该有一个名为 FormData 的 NameValueCollection 属性。因此，您应该能够执行以下操作：

```
string username = provider.FormData.GetValues("username").SingleOrDefault(); 
```

注意。我必须更新我的引用才能看到 FormData 属性。我的 RC 版本是：Microsoft.AspNet.WebApi.Client.4.0.20505.0 使用 Nuget 更新所有 WebApi 和 MVC 4 引用给了我 Microsoft.AspNet.WebApi.Client.4.0.20710.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:42:17.870

所以我发现我认为可能是一种 hacky 方式来做到这一点：

```
string username = provider.Contents.First(x=>x.Headers.ContentDisposition.Name == "\"username\"").ReadAsStringAsync().Result; 
```

有没有更优选的方法？

# multithreading - Python 3.2 _thread 模块在使用 Ubuntu 12.04 时不产生任何输出，但在 Windows 7 上运行良好

> ID：12032269
> 
> 赞同：0
> 
> 时间：2012-08-20T04:26:29.480
> 
> 标签：multithreading, python-3.x

我希望有人能快速简单地解决我面临的这个问题。我正在阅读 Mark Lutz 编写的 Programming Python 书第 4 版的第 5 章，从第 189 页开始我遇到了一些麻烦。基本上，有一个非常简单的示例：

```
import _thread
def action(i):
    print(i ** 32)

_thread.start_new_thread(action, (2, )) 
```

出于某种原因，这个脚本不会在我运行 Ubuntu 12.04 的电脑上产生任何输出，但会在我的 Windows 7 机器上产生。从终端运行时的输出是：

```
un@homepc:~/Desktop/pp$ python3.2 thread1.py
un@homepc:~/Desktop/pp$ 
```

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T04:11:01.337

感谢 Ramchandra 为我指明了正确的方向。问题是程序正在结束并杀死线程。如果我运行这个：

```
import time, _thread

def print_t(name, delay):
    while True:
        try:
            time.sleep(delay)
            print(name)
        except: pass

_thread.start_new_thread(print_t, ("First Thread", 1,))
_thread.start_new_thread(print_t, ("Second Thread", 2,))

while True:
    try: pass
    except KeyboardInterrupt:
        print("Ending main program")
        break 
```

...然后程序按计划执行。我不知道为什么原始帖子中的代码可以在 Windows 7 上运行，但不能在 ubuntu 12.04 上运行。那好吧。希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:49:29.877

我不是线程专家，但这很可能是问题所在：

运行此代码时，Python 在最后一行之后无事可做；因此它强制结束线程退出（无论它是否完成）。根据线程的运行方式，线程可能会完成，也可能不会。（不可靠的行为）

主线程伪代码指令：

创建新线程

新线程：

行动(2)

主线程下一条指令：

程序结束；退出

固定代码：

```
import _thread
def action(i):
    print(i ** 32)
    action_lock.release() #Now Python will exit

#locks are a part of threaded programming; if you don't know what it is, you can google it.
action_lock = _thread.allocate_lock() #set a lock for the action function thread
action_lock.acquire() #Acquire the lock
_thread.start_new_thread(action, (2, ))
action_lock.acquire() 
```

# java - 使用 JPQL 命名查询调用方法时，.jsp 处出现 NullPointerException

> ID：12032270
> 
> 赞同：3
> 
> 时间：2012-08-20T04:26:47.093
> 
> 标签：java, spring, jsp, nullpointerexception

我正在编写一个`jsp`页面，该页面使用 a`scriptlet`从控制器调用方法，该控制器使用来自 DAO 的方法，该方法执行存储在与该 DAO 对应的模型中的命名查询。我希望这个控制器方法返回一个`ArrayList`我可以迭代的方法来检索它的值以显示在页面上。
当`jsp`到达方法调用时，它给了我一个`NPE`控制器方法，特别是在调用查询方法的行上。更令人烦恼的是，我在页面前面调用了一个类似的方法，并且没有出现异常。我的小组一直在使用带有 hibernate 的 Spring MVC 框架来处理我们的映射。
我试图删除代码的非必要部分，同时保留可能指向解决方案的内容。如果您需要更多信息，请告诉我，我会尽快更新。
（我计划在未来学习避免使用 scriptlet，因为到目前为止我读过的所有问题都告诉我要避免使用它们。）代码如下： ReportingController 方法：

```
public ArrayList<String> weekWorkPrints(User user, CurrentWeek week) {
    ArrayList<UserTime> timeList = userTimeDao
            .getPunchesForUserAscendingByTime(user);
    ArrayList<String> prints = new ArrayList<String>();
    prints.add(utc.convertPeriodToPrint(utc.timeWorkedForADay(
            week.getSunday(), timeList)));
    return prints;
} 
```

调用查询的 UserTimeDao 方法：

```
@SuppressWarnings("unchecked")
@Transactional
public ArrayList<UserTime> getPunchesForUserAscendingByTime(User passedUser) {

    Query loginQuery = em
            .createNamedQuery("fetchAllUserTimesForUserAscend");
    loginQuery.setParameter("user", passedUser);

    return (ArrayList<UserTime>) loginQuery.getResultList();
} 
```

UserTime 模型中的命名查询：

```
 @NamedQueries({
    @NamedQuery(name = "fetchAllUserTimes", query = "SELECT ut FROM UserTime ut"),
    @NamedQuery(name = "fetchAllUserTimesForUserDesc", query = "SELECT ut FROM UserTime ut WHERE ut.user = :user ORDER BY ut.userClockIn DESC"),
    @NamedQuery(name = "fetchAllUserTimesForUserAscend", query = "SELECT ut FROM UserTime ut WHERE ut.user = :user ORDER BY ut.userClockIn")}) 
```

JSP：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@page import="models.*"%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@page import="models.*"%>
<%@page import="java.util.ArrayList"%>
<%@page import="controllers.ReportingController"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<jsp:useBean id="userDao" class="daos.UserDao" scope="request" />
<jsp:useBean id="reportControl" class="controllers.ReportingController"
scope="request" />
<jsp:useBean id="currentWeekControl"
class="controllers.CurrentWeekController" scope="session" />
<jsp:useBean id="userTimeDao" class="daos.UserTimeDao" scope="request" />
<html>
<head>

<link rel="stylesheet" type="text/css" href="css/global.css" />
<link rel="stylesheet" type="text/css" href="css/reporting.css" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Administrator - Reporting</title>
</head>
<body>
<div id="wrapper">
    <div id="header">
        <h1>Administrator Home</h1>
        <%
            User loginUser = (User) session.getAttribute("loginUser");
        %>
        <p>
            Welcome,
            <%=loginUser.getUserName()%>!
        </p>
    </div>
<!-- ---- -->
                <table id="loggedTimeTable">
                    <%
                        CurrentWeek currentWeek = (CurrentWeek) session
                                .getAttribute("currentWeek");
                    %>
                    <!-- --- -->
                    <%
                        for (User iteratedUser : userDao.getAlphabeticalUsers()) {
                            ArrayList<String> weekPrintouts = reportControl.weekWorkPrints(
                                    iteratedUser, currentWeek);
                    %>
                    <tr>
                        <td><%=iteratedUser.getLastName()%>, <%=iteratedUser.getFirstName()%>
                        </td>
                        <td><%=weekPrintouts.get(0)%></td>
                    </tr>
                    <%
                        }
                    %>
                </table> 
```

空指针异常：

```
2012-08-19 21:21:02.315::WARN:  Nested in org.apache.jasper.JasperException: java.lang.NullPointerException: java.lang.NullPointerException
    at controllers.ReportingController.weekWorkPrints(ReportingController.java:106)
    at org.apache.jsp.jsp_002dpages.Reporting_jsp._jspService(org.apache.jsp.jsp_002dpages.Reporting_jsp:196)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:470)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:364)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:285)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1093)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:36:09.053

您的问题是您的 useBean for reportControl 只是创建了一个全新的 ReportingController，它没有注入 UserDao。

您尝试做的事情在 Spring MVC 中根本行不通，也不应该。MVC 的目标是分离模型、视图和控制器，但您试图在视图中创建控制器的实例。

相反，您拥有的返回 JSP 名称的控制器方法应该首先调用您的 weekWorkPrints 方法并将返回的 List 放入模型中，以便 JSP 可以遍历它。

# php - PHP代码块之间的条件嵌入HTML？

> ID：12032271
> 
> 赞同：6
> 
> 时间：2012-08-20T04:26:47.630
> 
> 标签：php, html

我对 PHP 相当陌生。我在 3 周前开始学习它。我在 StackOverflow、Google 或 Youtube 上找不到这个问题的答案。对此的[PHP 文档](http://php.net/manual/en/language.basic-syntax.phpmode.php)让我感到困惑。继续这个问题，PHP 代码与 HTML 混合是如何工作的？

```
<?php if (something) { ?>
    <p>Hello</p>
<?php } ?> 
```

p 元素只会在某些东西具有真实值时显示，这是怎么回事？...我确信 PHP 引擎忽略了代码块外部发生的事情（例如 <?php ?>）并且只解析里面发生了什么。

下面的代码被 PHP 引擎正常解析并发送到浏览器，而不影响任何 HTML 元素（即使它明显位于 2 个代码块之间）。

```
<?php echo $something; ?>
<p>Hello</p>
<?php echo $something; ?> 
```

我希望我不会因为问这个问题而被激怒，因为很多人似乎在十分之一秒内就能理解它是如何工作的。

PS我很早就在聊天中问了这个问题，并认为我理解正确，但是当我去实施它时，我的想法仍然是，这到底是如何工作的？对我来说，这似乎是某种黑客行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T04:30:09.043

现在轻松了。绝对需要一个 php 教程让您从 [http://www.tizag.com/phpT/开始](http://www.tizag.com/phpT/)

这是你在做什么：

```
<?php 
//Anything inside me php processes
if($something)
{
    echo "<p>something</p>";
}
//About to stop processing in php
?>
<p>Anything outside of the php statement above will just be printed to the dom</p> 
```

快速说明：将 PHP 与 HTML 分开是一种很好的做法

```
<?php if ($something) { ?>  <-- where is the other {
<p>Hello</p>
<?php } ?> <-- oh I see it. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T04:35:30.740

在您的第一个示例中，`<p>Hello</p>`当且仅当“某事”返回 true 时，才会呈现确实如此。

如果您使用 ?> 关闭 php 标签，但执行“未关闭” `if (blah) { ...`，则 PHP 引擎会理解您的需求并相应地执行。

为什么？

PHP 引擎一直“等待”，直到使用 } 关闭执行，然后评估最终结果，浏览器继续执行以下行。

显然，如果你省略最后的 }，你会看到一些错误，这告诉你 PHP 期望你完成你开始的事情，而你没有

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T04:32:24.157

php 和 html 都是内联解析的。因此，当它向下移动您的脚本时，它将在标签内运行 php 脚本，并按照它们放置的顺序显示 html。例如：

```
<? $someVar = "someVar string value"; ?>
<h1>This is a title</h1>
<? if(1 == 1){?>
<p>This paragraph will appear in between the header tags because 1 == 1 is true</p>
<? } ?>
<h3>Another header which will follow the paragraph</h3>
<p>The value of someVar is: <?=$someVar;?></p> // <?= is a short hand for echo 
```

这将显示为：

```
<h1>This is a title</h1>
<p>This paragraph will appear in between the header tags because 1 == 1 is true</p>
<h3>Another header which will follow the paragraph</h3>
<p>The value of someVar is: someVar string value</p> 
```

基本上只需将其视为服务器读取您的脚本并解析它所看到的任何内容。如果有 html，它将显示它，如果有 php 进行某种计算然后吐出 html，它将显示吐出的 html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T04:33:28.707

您可以使用 php 代码块在 HTML 中的任何位置编写 php 代码

```
<?php echo "whatever " ?> 
```

或者

```
<?php echo "<h1>Here everything will displayed in h1 </h1> "; ?> 
```

如果您使用控制结构（**if、switch**等），那么它的行为将与所有其他语言一样，这意味着如果某事为**真**，那么它将执行之间编写的部分 `{ }`。

因此，如果您在 if 条件中写入未定义的变量，那么它将不会执行代码块，因为未定义的变量被视为**错误**条件。

另外，您可以通过以下方式检查任何变量值`var_dump($variable)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-10T22:39:50.460

# PHP[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

```
<!DOCTYPE html>
...
<div>
<?php if ( the_thing === true ) : ?>
    <p>The thing is true! \o/</p>
<?php else if ( the_other_thing === true ) : ?>
    <p>The other thing is true! meh</p>
<?php else : ?>
    <p>Nothing is true :-(</p>
<?php endif; ?>
</div>
... 
```

# android - 我的 trigger.io 应用程序的“启动图像”在 Galaxy Nexus 上太小

> ID：12032272
> 
> 赞同：4
> 
> 时间：2012-08-20T04:27:05.353
> 
> 标签：android, galaxy, trigger.io

我已经为我在全新的三星 Galaxy Nexus 上开发的 Android 应用程序设置了启动图像。

```
"launchimage": {
            "android": "images/splash.png",
            "android-landscape": "images/splash.png"
        }, 
```

当我启动应用程序时，图像显示。

但它并没有像它应该的那样填满屏幕。

图像为 720x1280，这是 Galaxy Nexus 的原始分辨率。

如何显示正确全尺寸的启动图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:24:23.060

其原因似乎是由于设备像素比/像素密度而导致的图像缩小。

示例：三星 Galaxy Nexus 的像素比为 2（[来源](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Samsung)）。如果您想在横向模式（1280 x 720 像素）下获得全宽启动图像，您需要一个宽度至少为 1280x2 = **2560 像素**的图像。对于纵向模式下的全宽，您至少需要**720x2 = 1440 像素宽度**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:36:10.773

这是在高像素密度屏幕上加载资源的问题 - 它已在 Trigger.io 平台的 v1.4.24 中修复。

[http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-24](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-24)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T10:21:40.670

您提供的信息非常少，但据我了解，

如果您在图像视图中设置图像，则应该将 Xml 用于启动图像

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/launchimage"
    android:orientation="vertical" >

<ImageView
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:src="@drawable/launchimage"
 android:scaleType="fitXY"
/>

<LinearLayout/>

or alertnativiely
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/launchimage"
    android:orientation="vertical" >

<LinearLayout/> 
```

LinearLayout 不是强制性的，您可以选择您选择的布局

# java - 多个视频视图问题

> ID：12032279
> 
> 赞同：2
> 
> 时间：2012-08-20T04:28:25.970
> 
> 标签：java, android

我的应用程序包含 5 个按钮，每个按钮打开不同的视频视图，当我创建代码时，我在下面有红色标记：（新 MediaController（this）），我尝试了很多解决它但我不能，

请任何建议摆脱它，我是android开发的新手，

谢谢

UPDATE 后应用更改为 : (new MediaController(this)) ，得到另一个错误

**我的代码：**

**多按钮类：**

```
public class MultipleButton extends Activity {
    String night;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

    public void handleClick(View v){
        //Create an intent to start the new activity.
        Intent intent = new Intent();
        intent.setClass(this,My_videos.class);
        intent.putExtra("video",night);
        startActivity(intent);
    }
} 
```

My_videos CLASS :**强文本**

```
 public class My_videos extends Activity {
    private Button button;
    private VideoView vid;
    String night;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video);

    initializeVideoViews(); }

    private void initializeVideoViews() {

        String night = getIntent().getStringExtra("video");

        if(night.equalsIgnoreCase("button1")){
        button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

          public void onClick(View arg0) {

                 vid =(VideoView) findViewById(R.id.videoView1);
                 vid.setVideoURI(Uri.parse("android.resource://" +
                                      getPackageName() +"/"+R.raw.a));
            vid.setMediaController(new MediaController(My_videos.this));
                 vid.requestFocus();
                 vid.start();

                   }
                         });       }

         else if(night.equalsIgnoreCase("button2")){

         button = (Button) findViewById(R.id.button2);

            button.setOnClickListener(new OnClickListener() {

              public void onClick(View arg0) {

              vid = (VideoView) findViewById(R.id.videoView1);
                 vid.setVideoURI(Uri.parse("android.resource://" +
                                       getPackageName() +"/"+R.raw.b));
            vid.setMediaController(new MediaController(My_videos.this));
                 vid.requestFocus();

              }
            });}

         else if(night.equalsIgnoreCase("button3")){

         button = (Button) findViewById(R.id.button3);

            button.setOnClickListener(new OnClickListener() {

              public void onClick(View arg0) {

              vid = (VideoView) findViewById(R.id.videoView1);
                 vid.setVideoURI(Uri.parse("android.resource://" +
                                       getPackageName() +"/"+R.raw.c));
            vid.setMediaController(new MediaController(My_videos.this));
                     vid.requestFocus();

              }
            });}

         else if(night.equalsIgnoreCase("button4")){

         button = (Button) findViewById(R.id.button4);

            button.setOnClickListener(new OnClickListener() {

              public void onClick(View arg0) {

              vid = (VideoView) findViewById(R.id.videoView1);
                 vid.setVideoURI(Uri.parse("android.resource://" +
                                     getPackageName() +"/"+R.raw.d));
            vid.setMediaController(new MediaController(My_videos.this));
                     vid.requestFocus();

              }
            });}
         else if(night.equalsIgnoreCase("button5")){

         button = (Button) findViewById(R.id.button5);

            button.setOnClickListener(new OnClickListener() {

              public void onClick(View arg0) {

              vid = (VideoView) findViewById(R.id.videoView1);
                 vid.setVideoURI(Uri.parse("android.resource://" +
                                    getPackageName() +"/"+R.raw.e));
            vid.setMediaController(new MediaController(My_videos.this));
                     vid.requestFocus();

              }
            });

        }}} 
```

更新： **强文本**

**日志猫：**

```
I/Process(25196): Sending signal. PID: 25196 SIG: 9
D/AndroidRuntime(25447): Shutting down VM
W/dalvikvm(25447): threadid=1: thread exiting with uncaught exception (group=0x40015578)
E/AndroidRuntime(25447): FATAL EXCEPTION: main
E/AndroidRuntime(25447): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tsn.dr/com.tsn.dr.My_videos}: java.lang.NullPointerException
E/AndroidRuntime(25447):at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:1651) 
E/AndroidRuntime(25447):at android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:1667) 
E/AndroidRuntime(25447):at android.app.ActivityThread.access$1500 (ActivityThread.java:117)
E/AndroidRuntime(25447):at android.app.ActivityThread$H.handleMessage (ActivityThread.java:935)
E/AndroidRuntime(25447):at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(25447):at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(25447):at android.app.ActivityThread.main(ActivityThread.java:3687)
E/AndroidRuntime(25447):at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(25447):at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(25447):at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:842)
E/AndroidRuntime(25447):at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:600)
E/AndroidRuntime(25447):at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(25447): Caused by: java.lang.NullPointerException
E/AndroidRuntime(25447):at com.tsn.dr.My_videos.initializeVideoViews (My_videos.java:31)
E/AndroidRuntime(25447):at com.tsn.dr.My_videos.onCreate(My_videos.java:24)
E/AndroidRuntime(25447):at android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1047)
E/AndroidRuntime(25447):at android.app.ActivityThread.performLaunchActivity (ActivityThread.java:1615)
E/AndroidRuntime(25447):    ... 11 more 
```

清单.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tsn.dr"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MultipleButton"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".My_videos"
              android:label="@string/app_name">
    </activity>
</application> 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="handleClick"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="handleClick"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="handleClick"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="handleClick"
        android:text="Button" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="handleClick"
        android:text="Button" />
</LinearLayout> 
```

视频.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:53:13.400

写下任意一行代码

多按钮.java

```
public class MultipleButton extends Activity {

    String night;
    Button mBtn1, mBtn2, mBtn3, mBtn4, mBtn5;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mBtn1=(Button)findViewById(R.id.button1);
        mBtn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                night="button1";
                Intent intent = new Intent();
                intent.setClass(MultipleButton.this, My_videos.class);
                intent.putExtra("video", night);
                startActivity(intent);
            }
        });

        mBtn2=(Button)findViewById(R.id.button2);
        mBtn2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                night="button2";
                Intent intent = new Intent();
                intent.setClass(MultipleButton.this, My_videos.class);
                intent.putExtra("video", night);
                startActivity(intent);
            }
        });

        mBtn3=(Button)findViewById(R.id.button3);
        mBtn3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                night="button3";
                Intent intent = new Intent();
                intent.setClass(MultipleButton.this, My_videos.class);
                intent.putExtra("video", night);
                startActivity(intent);
            }
        });

        mBtn4=(Button)findViewById(R.id.button4);
        mBtn4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                night="button4";
                Intent intent = new Intent();
                intent.setClass(MultipleButton.this, My_videos.class);
                intent.putExtra("video", night);
                startActivity(intent);
            }
        });

        mBtn5=(Button)findViewById(R.id.button5);
        mBtn5.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                night="button5";
                Intent intent = new Intent();
                intent.setClass(MultipleButton.this, My_videos.class);
                intent.putExtra("video", night);
                startActivity(intent);
            }
        });
    }
} 
```

My_videos.java

```
public class My_videos extends Activity {
    private VideoView vid;
    String night;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video);

        Bundle bdl = getIntent().getExtras();
        night = bdl.getString("video");

        vid = (VideoView) findViewById(R.id.videoView1);

        if (night.equalsIgnoreCase("button1")) {
            vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                    + "/" + R.raw.a));
            vid.setMediaController(new MediaController(My_videos.this));
            vid.requestFocus();
            vid.start();
        } else if (night.equalsIgnoreCase("button2")) {
            vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                    + "/" + R.raw.b));
            vid.setMediaController(new MediaController(My_videos.this));
            vid.requestFocus();
            vid.start();
        } else if (night.equalsIgnoreCase("button3")) {
            vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                    + "/" + R.raw.c));
            vid.setMediaController(new MediaController(My_videos.this));
            vid.requestFocus();
            vid.start();
        } else if (night.equalsIgnoreCase("button4")) {
            vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                    + "/" + R.raw.d));
            vid.setMediaController(new MediaController(My_videos.this));
            vid.requestFocus();
            vid.start();
        } else if (night.equalsIgnoreCase("button5")) {
            vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                    + "/" + R.raw.e));
            vid.setMediaController(new MediaController(My_videos.this));
            vid.requestFocus();
            vid.start();
        }
    }
} 
```

main.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Button" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Button" />

</LinearLayout> 
```

而不是你的 My_videos.java 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:43:06.167

在 Button Click 中使用这组线会导致错误，

```
 setMediaController(new MediaController(this)); 
```

因为上面一行中的**this**指的是按钮实例，而不是尝试使用 this

```
 setMediaController(new MediaController(My_videos.this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:55:51.340

尝试在清单文件中添加意图过滤器，用于 My_videos 活动

```
<intent-filter>
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

更新中----

您正在尝试查找 video.xml 中不存在的视图、按钮 1、按钮 2 等。所以它给出了空指针异常。

# asp.net - LightSwitch v2 - 无法加载数据

> ID：12032282
> 
> 赞同：2
> 
> 时间：2012-08-20T04:29:00.273
> 
> 标签：asp.net, iis, visual-studio-lightswitch

我看过很多关于这个问题的帖子，但没有规定的解决方案对我有用，所以我再试一次。

*问题摘要*：使用 Visual Studio 2012 的 LightSwitch 应用程序（浏览器内 3 层） - 来自远程计算机的用户能够进行身份验证（Windows 身份验证），但未显示实际业务数据（我得到“红色 Xs”，显示“无法加载数据...”）。

**更新：问题是使用除 IE 以外的其他浏览器运行它时。在 IE 中一切正常！**

在 Web 服务器上，如果我在 IIS7 中转到“Browse *:80”，一切正常： ![在此处输入图像描述](../Images/9ddccce8f8775ff3c9414b0b213509d8.png)

但是，如果我从 Internet 上的客户端计算机运行（没有 VPN，不同的域），我会收到错误消息（我使用的是 Google Chrome）： ![在此处输入图像描述](../Images/8a043845b6f23283018b3300f7da0848.png)

有趣的是，使用 Fiddler 我可以看到数据实际上正在输入： ![在此处输入图像描述](../Images/d32dc3afa0652f36edf65d4d83646995.png)

服务器信息：

*   带有 .Net 4.5 的 Windows 2008 R2 以及通过 WPI 安装的 LightSwitch 2011 先决条件。
*   SQL Server 2008 Std 在同一台服务器上

灯开关应用程序设置：

*   使用 Windows 身份验证（允许任何经过身份验证的 Windows 用户）
*   应用类型：网络
*   应用服务器配置：IIS

IIS 设置：

*   应用程序池：.Net=4.0.30319，托管管道模式=集成
*   连接字符串：只有 1 个使用 SQL Server 身份验证的 VALID 连接字符串（SQL Server 用户是 SysAdmin）
*   .Net 授权规则：允许 - 所有用户

我确定我错过了一些简单的东西，你能帮我解决这个问题吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:20:29.077

显然这是一个已知的错误。您一定没有见过这种解决方法吗？我不能告诉你它是否有效，因为我还没有开始使用 VS/LS 2012，但我希望它会对你有所帮助。

[解决 VS 2012 RC 中的 Chrome 数据加载错误](http://blogs.msdn.com/b/mattev/archive/2012/06/25/working-around-the-chrome-data-loading-bug-in-lightswitch-2012-rc.aspx)

如果您仍在使用 RC，而不是 RTM 版本（我假设这将在最终版本中得到解决，因为解决方法来自 LS 团队成员），也许解决方法可以解决问题你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:54:10.097

发现了问题 - 在我运行 Chrome 的客户端机器上。一旦我尝试使用 IE，它就起作用了！！！

我不敢相信我花了这么多时间在这上面。:(

# javascript - Javascript 中的 LESS 变量给出语法错误

> ID：12032290
> 
> 赞同：0
> 
> 时间：2012-08-20T04:30:37.397
> 
> 标签：javascript, math, less

我创建了一个 Javascript 表达式来根据我希望我的网格系统具有的一些期望的折叠特性来评估列的宽度，但是我的[LESS](http://lesscss.org/)代码给了我一个“语法错误”。这是我的代码：

```
.setColumnWidths(@maxcolumns, @num_cols, @min_resolution){
    @media screen and(min-width: @min_resolution) {
        .row {
            .onecol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*1/{@maxcolumns})))`;
            }
            .twocol {
            ~ `  Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*2/{@maxcolumns})))  `;
            }
            .threecol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*3/{@maxcolumns})))`;
            }
            .fourcol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*3/{@maxcolumns})))`;
            }
            .fivecol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*5/{@maxcolumns})))`;
            }
            .sixcol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*6/{@maxcolumns})))`;
            }
            .sevencol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*7/{@maxcolumns})))`;
            }
            .eightcol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*8/{@maxcolumns})))`;
            }
            .ninecol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*9/{@maxcolumns})))`;
            }
            .tencol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*10/{@maxcolumns})))`;
            }
            .elevencol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*11/{@maxcolumns})))`;
            }
            .twelvecol {
                width: ~ `Math.min(100%, (100% / {@num_cols}*Math.ceiling({@num_cols}*12/{@maxcolumns})))`;
            }
        }
    }
} 
```

在调用 mixin 时，上面的代码将允许“折叠”：

```
.setColumnWidths(12, 4, 420px); 
```

在这里，我们声明列数应该是 4，最大列数是 12，这应该发生在屏幕宽度为 420px 时。

为什么这会失败，否则我如何使用 javascript 评估这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:58:03.530

这是一个语法错误。在 JavaScript 表达式中引用变量的正确语法是`@{var_name}`. 你有`{@var_name}`你发布的代码。

# ruby - 收益自我和收益之间的区别？

> ID：12032291
> 
> 赞同：12
> 
> 时间：2012-08-20T04:30:48.863
> 
> 标签：ruby, yield, self

谁能帮我理解“屈服自我”和“屈服”之间的区别？

```
class YieldFirstLast
    attr_accessor :first, :last

    def initialize(first = nil, last = nil)
        @first = first
        @last = last
        yield self if block_given?
    end

    def hello
        puts "#{@first} #{@last} says hello!"
    end
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T04:55:41.007

在 的情况下`yield self`，`self`是传递给块的参数。简单地说`yield`，不传递任何参数。 `self`在这里并不特别，任何东西都可以产生，例如

```
class Foo
  def a() yield self end
  def b() yield end
  def c() yield "Bar" end
  def d() yield 1, 2, "scuba" end
  def to_s() "A!" end
end

Foo.new.a {|x| puts x } #=> A!
Foo.new.b {|x| puts x } #=> (a blank line, nil was yielded)
Foo.new.c {|x| puts x } #=> Bar
Foo.new.d {|x, y, z| puts z } #=> scuba 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T04:55:17.453

`yield self`进入块，与方法调用关联，将当前对象作为参数传递给块，plain`yield`只是进入块而不传递任何参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-21T16:23:31.527

将`yield`其视为调用您的块，并`yield self`使用当前实例作为参数调用您的块。

# java - 是否可以找到 Java 本机方法的来源？

> ID：12032292
> 
> 赞同：6
> 
> 时间：2012-08-20T04:31:00.593
> 
> 标签：java, methods, native

我在Java中找到了`clone()`方法：`Object`

```
 protected native Object clone() throws CloneNotSupportedException; 
```

这个方法的来源是否可用？也许在[OpenJDK](http://openjdk.java.net/)中？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-20T04:55:24.007

来自 jdk/src/share/native/java/lang/Object.c

```
static JNINativeMethod methods[] = {
    {"hashCode",    "()I",                    (void *)&JVM_IHashCode},
    {"wait",        "(J)V",                   (void *)&JVM_MonitorWait},
    {"notify",      "()V",                    (void *)&JVM_MonitorNotify},
    {"notifyAll",   "()V",                    (void *)&JVM_MonitorNotifyAll},
    {"clone",       "()Ljava/lang/Object;",   (void *)&JVM_Clone},
}; 
```

意味着它是一个函数指针（可能这样做是为了实现特定于平台的本机代码）

为 JVM_Clone 执行 grep 会产生以下结果：

（来自热点/src/share/vm/prims/jvm.cpp）

```
JVM_ENTRY(jobject, JVM_Clone(JNIEnv* env, jobject handle))
  JVMWrapper("JVM_Clone");
  Handle obj(THREAD, JNIHandles::resolve_non_null(handle));
  const KlassHandle klass (THREAD, obj->klass());
  JvmtiVMObjectAllocEventCollector oam;

#ifdef ASSERT
  // Just checking that the cloneable flag is set correct
  if (obj->is_javaArray()) {
    guarantee(klass->is_cloneable(), "all arrays are cloneable");
  } else {
    guarantee(obj->is_instance(), "should be instanceOop");
    bool cloneable = klass->is_subtype_of(SystemDictionary::Cloneable_klass());
    guarantee(cloneable == klass->is_cloneable(), "incorrect cloneable flag");
  }
#endif

  // Check if class of obj supports the Cloneable interface.
  // All arrays are considered to be cloneable (See JLS 20.1.5)
  if (!klass->is_cloneable()) {
    ResourceMark rm(THREAD);
    THROW_MSG_0(vmSymbols::java_lang_CloneNotSupportedException(), klass->external_name());
  }

  // Make shallow object copy
  const int size = obj->size();
  oop new_obj = NULL;
  if (obj->is_javaArray()) {
    const int length = ((arrayOop)obj())->length();
    new_obj = CollectedHeap::array_allocate(klass, size, length, CHECK_NULL);
  } else {
    new_obj = CollectedHeap::obj_allocate(klass, size, CHECK_NULL);
  }
  // 4839641 (4840070): We must do an oop-atomic copy, because if another thread
  // is modifying a reference field in the clonee, a non-oop-atomic copy might
  // be suspended in the middle of copying the pointer and end up with parts
  // of two different pointers in the field.  Subsequent dereferences will crash.
  // 4846409: an oop-copy of objects with long or double fields or arrays of same
  // won't copy the longs/doubles atomically in 32-bit vm's, so we copy jlongs instead
  // of oops.  We know objects are aligned on a minimum of an jlong boundary.
  // The same is true of StubRoutines::object_copy and the various oop_copy
  // variants, and of the code generated by the inline_native_clone intrinsic.
  assert(MinObjAlignmentInBytes >= BytesPerLong, "objects misaligned");
  Copy::conjoint_jlongs_atomic((jlong*)obj(), (jlong*)new_obj,
                               (size_t)align_object_size(size) / HeapWordsPerLong);
  // Clear the header
  new_obj->init_mark();

  // Store check (mark entire object and let gc sort it out)
  BarrierSet* bs = Universe::heap()->barrier_set();
  assert(bs->has_write_region_opt(), "Barrier set does not have write_region");
  bs->write_region(MemRegion((HeapWord*)new_obj, size));

  // Caution: this involves a java upcall, so the clone should be
  // "gc-robust" by this stage.
  if (klass->has_finalizer()) {
    assert(obj->is_instance(), "should be instanceOop");
    new_obj = instanceKlass::register_finalizer(instanceOop(new_obj), CHECK_NULL);
  }

  return JNIHandles::make_local(env, oop(new_obj));
JVM_END 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T04:47:04.680

我找到了这些文件，但他们所做的只是从其他地方导入函数。我找不到实际来源（尝试询问 Hotspot 开发人员）。

[对象.c](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/272483f6650b/src/share/javavm/export/jvm.h) [jvm.h](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/272483f6650b/src/share/native/java/lang/Object.c)

编辑：[这是在线实际来源的链接](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/share/vm/prims/jvm.cpp)（感谢 user439407 找到它所在的文件）

# r - 将内容存储到所需对象

> ID：12032295
> 
> 赞同：0
> 
> 时间：2012-08-20T04:31:17.567
> 
> 标签：r, get, load, s4

我有一个这样的向量：

```
vec1 <- c("x1","x2","x3","x4") 
```

我有另一个这样的向量：

```
vec2 <- c("X1.RData","X2.RData","X3.RData","X4.RData") 
```

我在这里尝试做的是加载 RData 文件，然后使用相同的文件名将它们保存回来，但对象应该是 vec1 的对象。

```
for (i in 1:length(vec1)){
vec1[i] <- get(load(vec2[i]))
save(vec1[i],file=vec2[i])
} 
```

但它给了我错误，说`"incompatible types"` 我也尝试像这样更改角色对象的类：

```
class(vec1[i]) <- myclass 
```

其中 myclass 是 S4 类型对象的类。

有没有办法在 R 中做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:50:42.410

您需要知道每个 .Rdata 文件中对象的名称。对象名称与对象内容一起保存，并且在使用访问时`load`不会分配存储它们的文件的名称。此外，您需要使用`assign`才能给这些对象一个新名称。假设您当时在工作区中没有其他内容：

未经测试：

```
for (i in 1:length(vec1)){ load(vec2[i])
   assign( vec1[i] , get( ls() )
   save(vec1[i],file=vec2[i])
   rm(list=ls(patt="^x.$") )
} 
```

如果您在工作区中有其他东西，那么您确实需要知道这些 .Rdata 文件中对象的名称。（尽管如果您`load()`将它们编辑到特定环境中，您可能能够将进程与工作区的其余部分隔离/）

# php - 如何从 mongoDB 集合中的特定行（例如第 6 行）获取数据？

> ID：12032300
> 
> 赞同：2
> 
> 时间：2012-08-20T04:32:06.693
> 
> 标签：php, mongodb

如果我在集合 mongo 中的数据是这样的

```
{ "_id" : ObjectId("4fff9946af8c6149aed251ab"), "subject_slug" : "math", "lesson_slug" : "mat01" }
{ "_id" : ObjectId("4fff9946af8c6149aed251ac"), "subject_slug" : "math", "lesson_slug" : "mat02" }
{ "_id" : ObjectId("4fff9946af8c6149aed251ad"), "subject_slug" : "math", "lesson_slug" : "mat03" }
{ "_id" : ObjectId("4fff9946af8c6149aed251ae"), "subject_slug" : "eng", "lesson_slug" : "eng01" }
{ "_id" : ObjectId("4fff9946af8c6149aed251af"), "subject_slug" : "eng", "lesson_slug" : "eng02" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b0"), "subject_slug" : "eng", "lesson_slug" : "eng03" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b1"), "subject_slug" : "phy", "lesson_slug" : "phy01" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b2"), "subject_slug" : "phy", "lesson_slug" : "phy02" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b3"), "subject_slug" : "phy", "lesson_slug" : "phy03" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b4"), "subject_slug" : "chem", "lesson_slug" : "che01" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b5"), "subject_slug" : "chem", "lesson_slug" : "che02" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b6"), "subject_slug" : "chem", "lesson_slug" : "che03" }
{ "_id" : ObjectId("4fff9946af8c6149aed251b7"), "subject_slug" : "chem", "lesson_slug" : "che04" } 
```

如果我想要第 6 行没有循环数据的数据。php中是否有短代码来获取该行中的数据？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T04:58:24.117

为了找到第六条记录，您需要使用一些[MongoCursor 方法](http://php.net/manual/en/class.mongocursor.php#mongocursor.synopsis)：

*   `sort()`所以有一个特定的顺序（例如 by `_id`）
*   `skip()`跳过一些记录（跳过 5 找到第 6 个）
*   `limit()`限制为一个结果

代码示例：

```
<?php
    $mongo = new Mongo();
    $collection = $mongo->mydb->subject;

    $query = array();
    $sort  = array('_id' => 1);

    // Find the 6th record
    $doc = $collection->find($query)->sort($sort)->skip(5)->limit(1)->getNext();

    print_r($doc);
?> 
```

样本输出：

```
Array
(
    [_id] => MongoId Object
        (
            [$id] => 4fff9946af8c6149aed251b0
        )

    [subject_slug] => eng
    [lesson_slug] => eng03
) 
```

请注意，`skip()`如果您需要跳过大量文档，则性能可能会成为问题。如果可能的话，一个性能更高的选项是使用有限制的范围查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:38:11.703

这看起来像一个 json 格式的内容，如何将它们全部读入一个对象，然后将它们 json_decode 成另一个对象，以便稍后您可以读取第 6 行。

# git - 如何使用 Git 签出某个版本？

> ID：12032305
> 
> 赞同：3
> 
> 时间：2012-08-20T04:33:30.500
> 
> 标签：git

有时我想用 Git 做这个简单的事情：

我有一个包含多个提交的 git 存储库。

现在如何签出特定提交的所有目录和文件？

我应该在本地克隆 repo，然后为该特定提交执行 git checkout 吗？

是否有一个更简单的命令可以将特定提交的所有文件和目录检出到本地目录？我只是要使用这些文件，我不会更改它们等，所以我不需要创建一个本地 repo 只是为了签出一些文件并查看它们。正确的 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:40:54.360

我想你正在寻找`git archive`. 也许是这样的：

```
 $ git archive --format=tar --prefix=my-tag-or-commit-id/ my-tag-or-commit-id | (cd /path/to/repo/checkout && tar xf -) 
```

检查`git help archive`其他选项和示例。您也可以使用远程分支名称。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:39:49.707

如果您想将您的 repo 设置为 的状态（即提交）`fa4ef34`，请使用[`git checkout`](http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)：

```
git checkout fa4ef34 
```

这将使您的工作副本进入`fa4ef34`.

如果您想再次结帐`master`，请执行

```
git checkout master 
```

* * *

**但是，如果您对远程**repo的某个提交感兴趣，则必须做一些不同的事情。

首先，初始化一个本地仓库：

```
git init myrepo
cd myrepo 
```

现在，您位于新创建的本地存储库中。要获得远程 repo 的提交（例如蓝牙数据包分析器），您必须执行以下操作：

```
git remote add bluez_hcidump git://git.kernel.org/pub/scm/bluetooth/bluez-hcidump.git
git fetch bluez_hcidump 
```

现在，您的 repo 知道关于`bluez_hcidump`repo 的一切。如果您想访问`fa4ef34`属于该存储库的提交，请执行我的答案开头所述的步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T05:54:09.500

当您拥有存储库时，您拥有所有可用文件的所有修订版。首先，您找到您有兴趣使用的提交`git log`。然后，一旦你找到了[一些引用](http://git-scm.com/book/en/Git-Tools-Revision-Selection)你感兴趣的提交的方法，你可以使用`git branch branch_name <the commit you're interested in>`. 现在您将拥有一个本地分支（`branch_name`在该提交处调用，您可以`git checkout branch_name`查看当时的情况。

# php - 为什么 ini_set('session.gc_maxlifetime',60) 不起作用？

> ID：12032306
> 
> 赞同：2
> 
> 时间：2012-08-20T04:33:38.573
> 
> 标签：php, session, garbage-collection, ini-set

session 的默认过期时间是 1440，我想把这个时间减少到 60 秒，但是当我`ini_set('session.gc_maxlifetime','60')`在第一页使用它时它可以工作，但它在其他页面中不起作用，请告诉我我的问题是什么？

```
 ----------index.php-----------
    <?php
    ini_set('session.gc_maxlifetime','60');
    session_start();       

    $_SESSION['id']='123';

    print('<br/><a href="link.php">link<a/>');
    ?>

    ----------link.php----------
    <?php
    session_start();

    if(isset($_SESSION['id'])){
        ini_set('session.gc_maxlifetime',60);
    }else{
        header('Location:index.php?ERROR');
    }

    print('<br/><a href="link.php?1">menu<a/>');
    ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T04:39:49.663

因为垃圾收集器在会话**之前**启动（如果启动）

所以设置`ini_set('session.gc_maxlifetime',60);`后`session_start()`没有改变

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T04:40:22.217

会话垃圾收集器将作为`session_start()`. 由于您在开始会话**后**更改设置，因此更改设置为时已晚。

# r - 在 R 中获取 data.frame 的样本

> ID：12032307
> 
> 赞同：3
> 
> 时间：2012-08-20T04:33:40.237
> 
> 标签：r, dataframe, subset

我在 R 中有以下数据框：

```
id<-c(1,2,3,4,10,2,4,5,6,8,2,1,5,7,7)
date<-c(19970807,19970902,19971010,19970715,19991212,19961212,19980909,19990910,19980707,19991111,19970203,19990302,19970605,19990808,19990706)
spent<-c(1997,19,199,134,654,37,876,890,873,234,643,567,23,25,576)
df<-data.frame(id,date,spent) 
```

我需要抽取 3 个客户（基于 id）的随机样本，以便提取客户的所有观察结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T04:45:10.160

你想使用`%in%` 和`unique`

```
df[df$id %in% sample(unique(df$id),3),]
##    id     date spent
## 4   4 19970715   134
## 7   4 19980909   876
## 8   5 19990910   890
## 10  8 19991111   234
## 13  5 19970605    23 
```

用于`data.table`避免`$`引用

```
library(data.table)
DT <- data.table(df)

 DT[id %in% sample(unique(id),3)]
##    id     date spent
## 1:  1 19970807  1997
## 2:  4 19970715   134
## 3:  4 19980909   876
## 4:  1 19990302   567
## 5:  7 19990808    25
## 6:  7 19990706   576 
```

这可确保您始终评估 data.table 中的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T04:37:04.823

使用类似的东西：

```
df[sample(df$id, 3), ]
#   id     date spent
# 1  1 19970807  1997
# 5 10 19991212   654
# 8  5 19990910   890 
```

当然，您的样本会有所不同。

# 更新

如果你想要独特的*客户*，你可以`aggregate`先。

```
df2 = aggregate(list(date = df$date, spent = df$spent), list(id = df$id), c)
df2[sample(df2$id, 3), ]
#   id               date    spent
# 4  4 19970715, 19980909 134, 876
# 5  5 19990910, 19970605  890, 23
# 8  8           19991111      234 
```

或 - 不带 out 的选项`aggregate`：

```
df[df$id %in% sample(unique(df$id), 3), ]
#    id     date spent
# 1   1 19970807  1997
# 3   3 19971010   199
# 12  1 19990302   567
# 14  7 19990808    25
# 15  7 19990706   576 
```

# c# - 是否可以创建分层枚举？

> ID：12032309
> 
> 赞同：16
> 
> 时间：2012-08-20T04:33:52.060
> 
> 标签：c#, enums

我想创建一个分层枚举，它代表我可以作为参数传递的类型。

数据结构如下所示：

```
enum Cars
{
   Ford { Corsair, Cortina, Galaxy, GT },
   Ferrari { Testarossa, California, Enzo },
   ...
} 
```

我希望调用具有以下签名的函数：

```
public void BuildCar(Cars car); 
```

像这样：

```
BuildCar(Cars.Ferrari.Enzo); 
```

基本上，我想在类型中强制执行汽车/制造商关系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T06:21:34.513

我想过用扩展和/或`ICustomEnum`东西来回答这个问题。

然后我想-以下内容真的有那么糟糕吗？:-)

```
 enum Cars
    {
       Ford_Corsair,
       Ford_Cortina,
       Ford_Galaxy,
       Ford_GT,

       Ferrari_Testarossa,
       Ferrari_California,
       Ferrari_Enzo,
    } 
```

您的功能仍然如下所示：

```
public void BuildCar(Cars car); 
```

你的电话看起来像：

```
BuildCar(Cars.Ferrari_Enzo); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T04:46:04.183

自己动手解决方案：

```
class Cars
{
    private static int CurrentId = 0;

    private readonly int id;

    private Cars()
    {
        id = CurrentId;
        CurrentId++;
    }

    public static class Ford
    {
        public static Cars Corsair = new Cars();
        public static Cars Cortina = new Cars();
        public static Cars Galaxy = new Cars();
        public static Cars GT = new Cars();
    }

    public static class Ferrari
    {
        public static Cars Testarossa = new Cars();
        public static Cars California = new Cars();
        public static Cars Enzo = new Cars();
    }

    // Add overrides of Equals and GetHash from id
} 
```

这样，您将丢失`Enums`类中包含的所有功能。但这是可以理解的，因为您需要通常不支持的逻辑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T04:43:50.647

是的，你可以得到这个：

```
BuildCar(Cars.Ferrari.Enzo) 
```

但你不会得到这个：

```
enum Cars
{
   Ford { Corsair, Cortina, Galaxy, GT },
   Ferrari { Testarossa, California, Enzo },
   ...
} 
```

你可以做的是一个带有私有构造函数的密封类，它以一种树结构公开实例，你需要一些帮助类。

以下代码有效：

```
using System;

namespace _2DEnum
{
    public class Example
    {
        public void BuildCar(Cars car)
        {
            GC.KeepAlive(car);
        }

        public void ExampleUse()
        {
            BuildCar(Cars.Ferrari.Enzo);
        }
    }

    public sealed class Cars
    {
        private readonly string _value;

        private Cars(string value)
        {
            if (ReferenceEquals(value, null))
            {
                    throw new ArgumentNullException("value");
            }
            else
            {
                _value = value;
            }
        }

        public override string ToString()
        {
            return _value;
        }

        public static class Ferrari
        {
            private static readonly Cars _California = new Cars("California");
            private static readonly Cars _Enzo = new Cars("Enzo");
            private static readonly Cars _Testarossa = new Cars("Testarossa");

            public static Cars California
            {
                get { return Ferrari._California; }
            }

            public static Cars Enzo
            {
                get { return Ferrari._Enzo; }
            }

            public static Cars Testarossa
            {
                get { return Ferrari._Testarossa; }
            }
        }

        public static class Ford
        {
            private static readonly Cars _Corsair = new Cars("Corsair");
            private static readonly Cars _Cortina = new Cars("Cortina");
            private static readonly Cars _Galaxy = new Cars("Galaxy");
            private static readonly Cars _GT = new Cars("GT");

            public static Cars Corsair
            {
                get { return Ford._Corsair; }
            }

            public static Cars Cortina
            {
                get { return Ford._Cortina; }
            }

            public static Cars Galaxy
            {
                get { return Ford._Galaxy; }
            }

            public static Cars GT
            {
                get { return Ford._GT; }
            }
        }
    }
} 
```

再说一次，您可以尝试使用一些文本转换模板来像枚举一样键入它。

感谢@ [Euphoric](https://stackoverflow.com/a/12032387/402022) ...我需要一个过度分析徽章。

* * *

## 文本转换模板！

我为 T4 创建了一个解决方案，该解决方案使用文件 Enum2D.ttinclude 包含生成此 2D 枚举的代码和每个“2D 枚举”的文件，例如 Cars.tt。

第一个 Enum2D.tt 包括：

```
<#@ import namespace="System" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #><#+
    public string BuildEnum2D
    (
        string namespaceName,
        string enumName,
        IEnumerable<Tuple<string, IEnumerable<string>>> items
    )
    {
        string head =
@"
using System;

namespace @namespace
{
    public sealed class @enum
    {
        private readonly string _value;

        private @enum(string value)
        {
            if (ReferenceEquals(value, null))
            {
                throw new ArgumentNullException(""value"");
            }
            else
            {
                _value = value;
            }
        }

        public override string ToString()
        {
            return _value;
        }";
        head = head.Replace("@namespace", namespaceName);
        head = head.Replace("@enum", enumName);
        StringBuilder sb = new StringBuilder();
        sb.Append(head);
        foreach (var item in items)
        {
            sb.Append(
@"

        public static class " + item.Item1 + 
@"
        {"
                    );
            foreach (var entry in item.Item2)
            {
                sb.Append(
@"
            private static readonly Cars _" + entry + @" = new Cars(""" + entry + 
@""");"
                        );
            }

            foreach (var entry in item.Item2)
            {
                sb.Append(
@"

            public static Cars " + entry + @"
            {
                get { return _" + entry + @"; }
            }"
                        );
            }
            sb.Append(
@"
        }"          );

        }
        sb.Append(
@"
    }
}"
                );
        return "// <auto-generated />" + "\r\n" + sb.ToString();
    }
#> 
```

如您所见，该文件定义了一个函数`BuildEnum2D`，该函数的唯一目的是在给定参数的情况下为您的 2D 枚举生成代码。现在我们只需要调用它。为此，我们将使用 Cars.tt，如下所示：

```
<#@ template debug="false" hostspecific="false" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ include file="Enum2D.ttinclude" #>
<#@ output extension=".cs" #><#=
    BuildEnum2D
    (
        "Enum2DTest",
        "Cars",
        new Tuple<string, IEnumerable<string>>[]
        {
            new Tuple<string, IEnumerable<string>>
            (
                "Ferrari",
                new string[]
                {
                    "California",
                    "Enzo",
                    "Testarossa"
                }
            ),
            new Tuple<string, IEnumerable<string>>
            (
                "Ford",
                new string[]
                {
                    "Corsair",
                    "Cortina",
                    "Galaxy",
                    "GT"
                }
            )
        }
    )
#> 
```

如您所见，我们包含文件 Enum2D.ttinclude 然后调用函数 Build2DEnum，参数是命名空间、枚举名称和项目。这样，您将能够创建更多这些 2D 枚举，并希望在 tt 文件中维护不会太痛苦。

干杯!

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T05:25:15.257

You could use an Enum to define all cars, then use static members on a class for each Manufacturer to return the allowed values:

```
enum Car {
  FordCorsair,
  FordCortina,
  FordGalaxy,
  FordGT,
  FerrariTestarossa,
  FerrariCalifornia,
  FerrariEnzo,
  ...
}

public sealed class Ford {
  public const Car Corsair = Car.FordCorsair;
  public const Car Cortina = Car.FordCortina;
  public const Car Galaxy = Car.FordGalaxy;
  public const Car GT = Car.GT;
}

public sealed class Ferrari {
  public const Car Testarossa = Car.FerrariTestarossa;
  public const Car California = Car.FerrariCalifornia;
  public const Car Enzo = Car.FerrariEnzo;
  public const Car GT = Car.GT;
}

...
Car mycar = Ford.Corsair; 
```

Of course, the syntactic sugar benefits of this may not be worth the pain of keeping the actual enum synchronized with the constant class members.

Aside from the above, using string constants is likely your best option. Enums can't be nested or inherited, and they can't share a common interface that would allow values for the same Enum type to be specified in different namespaces or classes.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T04:48:30.687

您可以创建 Cars 类，该类将包含每个 make 的嵌套类，该类将包含每个模型的 const

# linux - ln 使用通配符时出现意外行为

> ID：12032311
> 
> 赞同：0
> 
> 时间：2012-08-20T04:34:26.887
> 
> 标签：linux, bash, ln, gnu-coreutils

我计划为此在 coreutils 上提交一个错误，因为这种行为是出乎意料的，并且在现实世界中没有任何实际用途......虽然它确实让我一开始就笑了，因为我什至不知道可以在文件名中创建带有通配符的文件。带有通配符的文件名有多实用？谁甚至使用这样的功能？

我最近运行了一个类似这样的 bash 命令：

```
ln -s ../../avatars/* ./ 
```

不幸的是，我没有添加正确数量的“../”，因此它没有向我提供信息性错误，而是创建了一个指向不存在的“*”文件的链接。我希望这样做：

```
ln -s "../../avatars/*" ./ 
```

因为这是处理此类文件名的正确方法。

在提交关于 coreutils 的错误之前，我想听听其他人的意见。这种行为是否有任何实际用途，或者 ln 是否应该提供有意义的错误消息？

是的，我知道可以链接到整个目录，而不是其中的每个文件，但我不希望将新创建的文件复制到旧位置。那里只有几个文件现在正在链接。

有些人甚至会说在符号链接中使用通配符是不好的做法。但是，我确切地知道目录的内容，这比手动手动执行每个文件要快得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:35:53.517

这不是错误。

在 shell 中，如果您使用不匹配任何内容的通配符模式，则不会替换该模式。例如，如果您这样做：

```
echo *.c 
```

如果当前目录中没有 .c 文件，它只会打印“*.c”。如果当前目录中有 .c 文件，则 *.c 将替换为该列表。

对于许多命令，如果您指定不存在的文件，则会出现错误，并且您会收到一条看似有意义的消息，例如“无法访问 *.c”。但是对于 ln -s，由于它是符号链接，实际文件不必存在，它会继续进行链接。

# vb.net - Len() 函数与 String.Length 属性；选择哪个？

> ID：12032312
> 
> 赞同：18
> 
> 时间：2012-08-20T04:34:28.353
> 
> 标签：vb.net, string, vb6-migration, string-length

我正在从 VB6 过渡到 VB.Net (VS 2010)，并且对后者有基本的而不是广泛的理解。我显然有相当多的代码......我犹豫使用“升级”这个词，因为“端口”会更合适，因为过去版本的 VS 中的升级向导可能只是注释掉了代码并说“喂，你怎么不从头开始呢？”

在我使用该`Len()`函数的一个过程中，它用于确定字符串变量的长度。这在 VB.Net 中仍然有效（尽管我认为它实际上是对`Strings.Len`方法的调用），但另一种选择是只查询`.Length`变量的属性。

问题是使用哪个以及为什么。我浏览了相关的 MSDN 页面，他们似乎告诉我的只是方法/属性存在。对性能问题只字未提，尤其是在可能涉及大量调用循环时。

那么，我的问题是，是否有人知道使用一种方法比另一种方法有任何经过测试和确认的好处，或者这仅仅是个人偏好的问题。尽管考虑到 Stack Overflow 指南，这只是我有兴趣查看是否有特定答案的一个问题，但我在进行过程中可能遇到的类似情况的任何指示也将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T14:50:46.733

因为您使用的是 VB.NET，所以您`Strings`可以`Nothing`，除非您明确检查，否则大多数 VB 方法，包括`Len`，都会将其视为与`String.Empty`ie相同`""`。

使用 Reflector，您可以看到`Len`它被实现为空检查，返回`0`for`Nothing`或返回`.Length`，并且 JITter 可能会内联调用。

因此，如果您使用其他 VB 方法，我建议您也使用`Len`，除非您知道`String`不是或到处`Nothing`检查。`Nothing`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T04:47:06.650

所以根据[这个](http://vbnotebookfor.net/2007/08/15/string-class-vs-microsoftvisualbasic-namespace-part-iii/)：

> Len，另一个经典的 BASIC 函数，返回字符串的长度。System.String 具有提供相同信息的 Length 属性。这个比那个好吗？
> 
> 在性能方面，这两个函数在 1000 次迭代中几乎没有差异。在这种情况下，似乎没有任何理由偏爱另一种，而且没有功能差异。我倾向于使用属性值而不是 VB 函数，因为它鼓励将 .NET 字符串视为对象。但是，从本质上讲，这实际上只是个人喜好。

如果你相信他们的话，那么这就是你的答案。否则，编写测试代码并进行迭代应该会给你最终的答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T04:40:35.560

我不确定该`Len()`方法的细节（我选择的语言是 C#），但我会说肯定会使用该`Length`属性。 `Length`是`System.String`班级的成员，而`Len()`不是。

我的猜测是这`Len()`只是`Length`属性顶部的 VB 垫片。`Len()`从 VB 的角度来看，有人可能会认为 using更符合习惯。我想我更喜欢使用类中内置的属性，而不是仅仅因为它是由语言提供的而使用不同的机制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T11:55:30.777

提供该`Len`方法是为了向后兼容旧的 VB6（和更早的）非 .NET 代码。使用它在技术上没有任何问题。它会起作用，而且同样有效。但是，最好尽可能使用新的 .NET 做事方式。但是，除了让您更深入地了解“.NET 思维方式”之外，使用它的唯一真正有形的好处`String.Length`是，它使将来更容易将代码移植到其他 .NET 语言。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-20T04:46:59.640

除了@Andrew 的帖子，Len() 是[Visual Basic 运行时库](http://msdn.microsoft.com/en-us/library/c157t28f%28v=vs.80%29.aspx)中的字符串函数，其中 as是.net 框架 API 类的`Length`属性。`System.String`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-11T21:32:08.173

最近我遇到了使用 Len() 函数的旧 VB.Net 代码的问题。我将我的项目升级到引用旧的 VB.net dll 文件的核心，它使用的是 Len() 函数。我遇到运行时兼容性错误 - 找不到方法：'Int32 Microsoft.VisualBasic.Strings.Len(System.String)'

我必须更改 Core 已弃用的所有这些旧功能。所以我坚持使用 Steven Doggart 建议的 String.Length 而不是 Len() 。

# cocoa - 可可：调度设计模式

> ID：12032313
> 
> 赞同：0
> 
> 时间：2012-08-20T04:34:35.200
> 
> 标签：cocoa, dispatch

```
-(void) test{
    for(Person *person in persons){
        __block CGPoint point;
        dispatch_async(dispatch_get_main_queue(), ^{
            point = [self.myview personToPoint:person];
        });
        usePoint(point); // take a long time to run
    }
} 
```

我需要`personToPoint()`在主队列中运行才能明白这一点，并且`usePoint()`方法不需要在主队列中运行并且需要很长时间才能运行。但是，在运行时`usePoint(point)`，由于使用了 dispatch_async，因此尚未为 point 赋值。如果使用 dispatch_sync 方法，程序会被阻塞。分配后如何使用积分？

更新：如何实现以下代码的模式：

```
-(void) test{
    NSMutableArray *points = [NSMutableArray array];
    for(Person *person in persons){
        __block CGPoint point;
        dispatch_async(dispatch_get_main_queue(), ^{
            point = [self.myview personToPoint:person];
            [points addObject:point];
        });
    }
    usePoint(points); // take a long time to run
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:40:21.940

像下面这样的东西会起作用。您也可以将整个 for 循环放在一个 dispatch_async() 中，让主线程一次调度所有 usePoint() 函数。

```
-(void) test{
    for(Person *person in persons){
        dispatch_async(dispatch_get_main_queue(), ^{
            CGPoint point = [self.myview personToPoint:person];
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                usePoint(point); // take a long time to run
            });
        });
    }
} 
```

**更新问题的解决方案：**

您使用与上面建议的相同的基本模式。也就是说，您将需要在主线程上执行的操作分派给主线程，然后将分派嵌套回主线程分派中的默认工作队列。因此，当主线程完成其工作时，它将分派耗时的部分以在其他地方完成。

```
-(void) test{
    dispatch_async(dispatch_get_main_queue(), ^{
        NSMutableArray *points = [NSMutableArray array];
        for (Person *person in persons){
            CGPoint point = [self.myview personToPoint:person];
            [points addObject:[NSValue valueWithCGPoint:point]];
        }
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            usePoint(points); // take a long time to run
        });    
    });
} 
```

请注意，您的代码中有一个错误，因为您不能将`CGPoint`' 添加到 an 中，`NSArray`因为它们不是对象。您必须将它们包装在一个中`NSValue`，然后将它们打开`usePoint()`。我使用了`NSValue`仅适用于 iOS 的扩展。在 Mac OS X 上，您需要将其替换为`[NSValue valueWithPoint:NSPointToCGPoint(point)]`.

# windows-7 - comct332.ocx 的 DllRegisterServer 失败

> ID：12032314
> 
> 赞同：0
> 
> 时间：2012-08-20T04:34:49.257
> 
> 标签：windows-7, vb6, ocx, regsvr32, dllregistration

我有一个 VB6 应用程序，我正在尝试在 Windows 7 环境中工作，但是每次启动应用程序时，都会出现错误：

**“组件'ComCt332.ocx'或其依赖项之一未正确注册：文件丢失或无效”。**

要解决此问题，我尝试通过在管理员模式下的命令提示符中运行 regsvr32 来注册 comct332.ocx 文件，但随后出现错误：

**“模块“comct332.ocx”已加载，但对 DllRegisterServer 的调用失败，错误代码为 0x80004005”**

我尝试过的其他事情包括：

*   删除注册表中存在“comct332.ocx”的所有父节点并在管理员模式下再次运行 regsvr32。结果相同。

*   我在PC上授予另一个用户管理员权限，我可以成功注册文件，应用程序启动并成功运行！但是，当我再次以以前的用户身份登录时，它失败了。

任何帮助、想法、其他尝试的东西都会非常感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:58:05.990

如果您一直在跟上您必须继续成功使用 VB6 的事情，那么您将了解许多事情。

*   其中之一是 UAC 和每用户注册表虚拟化的影响。

*   另一个是 SysWOW 注册表重定向对 64 位系统的影响。

您将了解正确的安装包比以往任何时候都更加重要。Windows 对遗留软件有许多自动修复，但其中一些不会导致应用程序具有所有最初预期的行为。它们中的大多数只会在您的应用程序从安装到第二次运行“遵循正确的路径”时应用。

在这里，我们有一个案例旨在通过使用适当的 Windows Installer 程序包来处理，或者至少是通过 Windows 的“旧版安装程序检测启发式”识别的旧版设置。一般来说，旧的脚本设置已被弃用，但只要它们保持在Windows 努力确保它们成功*的路径上。*

通过复制一堆文件并`regsvr32`在其中一些文件上随机运行来手动部署会降低成功的机会。无论如何，这从来都不是一种被批准的部署方法。

您很可能与注册表虚拟化和重定向的某些组合发生冲突。

该`regsvr32`实用程序是一个开发工具，而不是部署工具。如果您坚持尝试将其用于部署，则必须遵循开发人员必须遵循的相同规则：

*   运行正确的版本。在 64 位系统上，此实用程序有 64 位和 32 位版本。您必须使用的 32 位版本位于 SysWOW64 文件夹中。

*   从提升的命令提示符运行它。一种简单的启动方法是键入`<Winkey>cmd.exe<Ctrl-Shift-Enter>`然后批准 UAC 提示或根据需要提供肩负管理凭据。

为了取得成功，您还需要了解和处理许多其他事情。如果您忽略了其中的大多数，那么它们中的大多数只有在您的程序安装并运行后才会变得明显。其中很多源于文件系统虚拟化。

# php - Codeigniter 扩展原生库

> ID：12032321
> 
> 赞同：3
> 
> 时间：2012-08-20T04:36:05.273
> 
> 标签：php, codeigniter

我在 codeigniter 中扩展本机库时遇到问题。

控制器：

```
function search(){

    $query_array = array(
        'title' => $this->input->post('title'),
        'category' => $this->input->post('category')
    );

    $query_id = $this->input->save_query($query_array); //extends to save_query

    redirect("site/view_games/$query_id");
} 
```

扩展库：

```
<?php
if (!defined('BASEPATH')) exit('No direct access allowed.');
class MY_Input extends CI_Input{

function MY_Input(){
    parent::CI_Input();

}
function save_query($query_array){
    $CI =& get_instance();
    $CI->db->insert('e_queries', array('query_string' => http_build_query($query_array)));

    return $CI->db->insert_id();
}
?> 
```

配置：我的 MY_Input.php 是 application/libraries/MY_Input.php

我哪里搞砸了？呼呼呼。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T07:01:26.930

CI_Input**类**是一个核心库。您必须将**MY_Input.php**文件放在**application/core/下**

# c - 将一个命令的输出作为输入传递给另一个命令

> ID：12032323
> 
> 赞同：2
> 
> 时间：2012-08-20T04:36:17.383
> 
> 标签：c, pipe

我至少知道管道的基础知识。但是，我不明白如何使用 C 管道在 C 中实现此任务。我不知道如何将一个程序的输出作为另一个程序的输入等等。例如：

```
ls | wc | ./add 
```

这里`ls`列出文件，`wc`给出列出文件的计数，并`./add`添加由`wc`.

请帮忙！

*编辑*：这是一项任务。确切的问题陈述如下：

> “编写一个 C 程序来读取两个（或多个）可执行程序的名称，并将第一个程序的输出重定向到第二个程序的输入，将第二个程序的输出重定向到第三个程序的输入，以此类推……”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:56:42.667

当你使用 pipe(pipefd) 创建一个管道时，你会得到两个文件描述符。写入 pipefd[1] 的任何内容都可以从 pipefd[0] 读取。所以你要做的是执行第一个程序，使其stdout与pipefd[1]相同，并执行第二个程序，使其stdin与pipefd[0]相同。在执行命令之前使用 dup()/close() 技巧重新编号文件描述符，使它们变为 0 (stdin) 或 1 (stdout)。

为了将三个程序连接在一起，您将有两个管道。中间程序将从第一个读取并写入第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:38:58.230

看来您需要创建一个程序来执行 shell 工作的一个简单案例：创建并执行命令管道，然后输出结果。

要做到这一点，您需要了解`SIGPIPE`、子进程处理、输入/输出重定向、文件描述符`fork()`和`exec()`、`wait()`等。

[这篇关于创建管道的 Linux 文档项目文章](http://tldp.org/LDP/lpg/node11.html)应该可以帮助您走上正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:16:52.947

Shell 处理所有繁重的工作，包括设置管道和创建进程，因此您根本不必担心这些。从您的程序的角度来看，这是来自 的正常输入`stdin`，这意味着您可以使用正常的输入功能，例如`scanf`或`fread`from `stdin`。

# knockout.js - 使用 KnockoutJS 分组小计

> ID：12032325
> 
> 赞同：1
> 
> 时间：2012-08-20T04:36:22.003
> 
> 标签：knockout.js

我是 knockoutjs 的新手，我遇到了一个我似乎无法深入了解的问题。[我在http://jsfiddle.net/stoberman/72zAq/3/](http://jsfiddle.net/stoberman/72zAq/3/)有我的问题示例。基本上，我有多组问题，每组问题都应该小计到不同的领域。（最终，小计也会总计，但这是另一天的问题。）相反，两个小计字段都显示最后一组（在示例中为第三组）的总计。任何指出我所缺少的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:46:27.667

您忘记了QuestionGroup 构造函数`var`中的`var self = this;`in ，因此重新分配了现有变量。这是一个更新的小提琴：

[http://jsfiddle.net/DFyVz/4/](http://jsfiddle.net/DFyVz/4/)

# flash - Chrome PepperFlash 占用非常高的 CPU 使用率

> ID：12032330
> 
> 赞同：0
> 
> 时间：2012-08-20T04:37:08.180
> 
> 标签：flash, google-chrome, cpu

我有一个 SWF，其中有一个框架显示一个带有变化的发光滤镜的按钮，每帧都会重新计算。

这里的问题是，当在 chrome 中使用 Pepperflash 插件运行这个 SWF 时，CPU 使用率增加到大约 50%。如果我在 Firefox 中运行相同的 SWF，它只需要大约 10% 的 CPU 使用率。

但是，当我在 chrome 中从 Pepperflash 切换到 Flash 调试播放器时，CPU 使用率下降到 20% 左右。

我怎么解决这个问题？我希望普通用户使用chrome和pepperflash插件有更好的体验，至少减少一半的CPU使用率。是否可以？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T00:08:50.520

在某些情况下，PepperFlash 插件会占用大量 CPU。由于AFAIK除了您提到的Debug Flash Player之外没有其他Flash插件选项，我发现避免跳帧/粗放/高CPU使用率的唯一解决方法是启用*禁用硬件加速视频解码。*chrome://flags 中的标志（单击*启用*链接。下图显示启用的开关）。

[![在此处输入图像描述](../Images/7daa1549d0cf37e057fff8751cde18ca.png)](https://i.stack.imgur.com/MSLrU.png)

正如您所期望的那样，这已将使用量降低到以前的一半左右。

**注意 1**：我应该注意到我的笔记本电脑有一个集成的（非专用）GPU，在我的情况下，通过软件加速进行渲染似乎效果更好。

**注意 2**：我还没有测试过这会如何影响非 Flash 和 HTML 5 视频渲染。该开关用于禁用*所有*视频解码的硬件加速。AFAIK 你不能只为 Flash 视频禁用硬件加速 - 没有这样的开关。因此， chrome://gpu 仍然显示 Flash 仍然是硬件加速的，但似乎全局设置优先：

[![在此处输入图像描述](../Images/86be1cb48cddcb5eeb4cc0353870319f.png)](https://i.stack.imgur.com/zb2Wr.png)

# jsf-2 - PrimeFaces p:selectBooleanCheckbox for Spring Security“记住我”更改了复选框输入的名称，导致“记住我”失败

> ID：12032336
> 
> 赞同：2
> 
> 时间：2012-08-20T04:38:21.093
> 
> 标签：jsf-2, spring-security, primefaces

我有一个具有此组件的 JSF 页面：

```
<p:selectBooleanCheckbox id="_spring_security_remember_me" label="Remember Me"/> 
```

`_spring_security_remember_me`Spring Security 需要准确的输入字段 ID/名称。但是，PrimeFaces 使用`_input`后缀生成它，如下所示：

```
<div id="_spring_security_remember_me" class="ui-chkbox ui-widget">
  <div class="ui-helper-hidden-accessible">
    <input id="_spring_security_remember_me_input" name="_spring_security_remember_me_input" type="checkbox" />
  </div>
  <div class="ui-chkbox-box ui-widget ui-corner-all ui-state-default"><span class="ui-chkbox-icon"></span></div>
</div> 
```

因此，“记住我”功能无法找到该参数。我该如何解决？我可以告诉 PrimeFaces 不要使用 后缀`_input`，还是可以告诉 Spring Security 为“记住我”复选框寻找不同的请求参数名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:30:16.220

我的解决方案：

```
<security:remember-me key="remember-me-security" services-ref="rememberMeServices"/>

<bean id="rememberMeServices" class="com.triune.services.CustomTokenBasedRememberMeService">
    <property name="key" value="remember-me-security" />
    <property name="cookieName" value="TRIUNE" />
    <property name="tokenValiditySeconds" value="1209600" />
    <property name="useSecureCookie" value="true" />
    <property name="userDetailsService" ref="customUserDetailsService" />
    <property name="alwaysRemember" value="false" />
    <property name="parameter" value="_spring_security_remember_me_input"/>
</bean> 
```

放置一个名为“参数”的属性，其值等于 primefaces 生成的 ID/名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:23:46.947

~~您可以通过在元素中传递名称来解决您遇到的问题”~~

 ~~```
<p:selectBooleanCheckbox id="_spring_security_remember_me" name="_spring_security_remember_me" label="Remember Me"/> 
```~~ 

~~**编辑：**~~

 ~~由于您无法为输入设置名称，我想您最好的做法是更改记住我服务的参数。有关更多信息，请参阅[此问题答案](https://stackoverflow.com/questions/8653455/spring-security-how-to-customize-remember-me-request-parameter-name)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:57:26.450

这是primefaces中的常见做法。所有组件都放置在一个 div 块中，指定公共 css 属性等。这个 div 块获取 id，因为它是组件的根元素。所有其他必须可识别的重要子元素（例如，在本例中为输入元素）都获得原始 id +`_foo`分配。

如果你想在客户端读取组件的值，你可以使用属性`widgetVar`来指定一个全局 js var 引用组件的支持 jquery 对象。打开你的调试器，看看它有什么属性。这些 js 类大多没有文档记录。

* * *

如果您需要服务器端的 id，尽管它会变得有点复杂。首先，您必须使用属性将组件模型注入您的支持 bean `binding`。现在有了`SelectBooleanCheckbox`可以调用的模型`String clientId = checkbox.getClientId(FacesContext.getCurrentInstance());`来检索客户端 ID。获取输入 id 现在是简单的字符串操作：`String inputId = clientId + "_input";`

* * *

如果您不确定组件在客户端的行为方式，您可以随时查看其模型和渲染器。在这种情况下，两者都位于`org.primefaces.component.selectbooleancheckbox`包装中。~~

# html - “url”、“src”和“href”之间的区别

> ID：12032337
> 
> 赞同：10
> 
> 时间：2012-08-20T04:38:24.170
> 
> 标签：html, css, url, href, src

> **可能重复：**
> [SRC 和 HREF 之间的差异](https://stackoverflow.com/questions/3395359/difference-between-src-and-href)

在编写 html/css 时，似乎这些都在做完全相同的事情。显然情况并非如此，如果你在你应该“src”的时候“href”你会过得很糟糕。但我的问题是，有没有一种简单的方法可以记住哪些是做什么的，以及何时使用它们？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T04:42:40.193

**src——** 我想为自己加载这个资源。

**href** -- 我想为其他人参考这个资源。

**url** -- 脚本想要将此 url 用作变量。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-20T04:44:28.130

1.  在**CSS**中，它总是**`url`**.
2.  在**HTML**中：
    1.  它是（ *Hypertext REFerence***`href`**的缩写）所有类型的**链接**，包括标签和.***`a``link`***
    ****   当它不是链接时，您正在设置**source**，所以它是**`src`**.***

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T04:42:15.900

这很简单

您可以使用`href`如下链接：
`<a href="http://www.google.com/">Click here</a>`
`<link href="mystylesheet.css" type="text/css">`

现在使用`src`将链接放入 html 中，如下所示：
`<img src="mypic.jpg">`
`<script src="script.js"></script>`***

# c++ - 派生类中的受保护成员“未在此范围内声明”

> ID：12032345
> 
> 赞同：32
> 
> 时间：2012-08-20T04:40:26.200
> 
> 标签：c++, templates, inheritance

```
#include <vector>
#include <iostream>

template <class T>
class Base
{
protected:
    std::vector<T> data_;
};

template <class T>
class Derived : public Base<T>
{
public:
    void clear()
    {
        data_.clear();
    }
};

int main(int argc, char *argv[])
{
    Derived<int> derived;
    derived.clear();
    return 0;
} 
```

我无法编译这个程序。我得到：

```
main.cpp:22: error: 'data_' was not declared in this scope 
```

拜托，你能解释一下为什么在课堂上看`data_`不到吗？`Derived`

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-20T04:44:08.613

要解决此问题，您需要指定`Base<T>::data_.clear()`or `this->data_.clear()`。至于为什么会这样，请看[这里](https://isocpp.org/wiki/faq/templates#nondependent-name-lookup-members)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T04:43:51.250

在模板的情况下，编译器无法确定成员是否真的来自基类。所以使用`this`指针，它应该可以工作：

```
void clear()
{
   this->data_.clear();
} 
```

当编译器查看 Derived 类定义时，它不知道哪个`Base<T>`被继承（因为`T`未知）。也不`data_`是任何`template`参数或全局可见变量。因此编译器抱怨它。

# database - ER 图中的超类型和子类型关系如何表示为表格？

> ID：12032348
> 
> 赞同：16
> 
> 时间：2012-08-20T04:41:11.703
> 
> 标签：database, database-design, erd, entity-relationship

我正在学习如何将实体关系图解释为 SQL DDL 语句，但我对符号的差异感到困惑。考虑如下图所示的不相交关系：

![](../Images/2a6fc2be1eb53adb30762eae6e92abc7.png)

这将表示为：

1.  车辆、2WD 和 4WD 表（2WD 和 4WD 将指向车辆的 PK）；或者
2.  只有 2WD 和 4WD 表（和 NO Vehicle 表），这两个表都会复制 Vehicle 所具有的任何属性？

我认为这些是编写关系的其他方式：

![](../Images/a297419c863b580e323bd89fd84decf9.png) ![](../Images/d4c2eac5526f4577955d63a6c351ee00.png)

我正在寻找一个清晰的解释，说明您最终会为每个图表使用哪些表格。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-20T12:10:56.060

## ER 符号

有几种 ER 符号。我不熟悉您正在使用的那个，但很明显您正在尝试表示一个子类型（又名继承、类别、子类、泛化层次结构......）。这是 OOP 继承的关系表亲。

在进行子类型化时，您通常关心以下设计决策：

*   **抽象与具体：**可以实例化父级吗？在您的示例中： a 可以`Vehicle`存在*而不*存在`2WD`or`4WD`吗？¹
*   **包容性 vs. 排斥性：**可以为同一个父母实例化多个孩子吗？在您的示例中，可以`Vehicle`同时*是* `2WD`and`4WD`吗？²
*   **完整与不完整：**您预计未来会添加更多的孩子吗？在您的示例中，您是否希望稍后可以将 a`Bike`或 a `Plane`(etc...) 添加到数据库模型中？

信息工程符号区分包含和排除子类型关系。另一方面，IDEF1X 表示法并没有（直接）识别这种差异，但它确实区分了完整和不完整的子类型（IE 没有）。

[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)（第 5 章，子类型关系）中的下图说明了差异：

![在此处输入图像描述](../Images/b7043f245ca022337bed366b04ef014b.png)

IE 和 IDEF1X 都不允许直接指定抽象与具体父级。

## 物理表示

不幸的是，实际数据库不直接支持继承，因此您需要将此图*转换*为真实表。通常有3种方法可以做到这一点：

1.  将所有类放在同一个表中，并将子字段保留为 NULL。然后，您可以进行 CHECK 以确保正确的字段子集为非 NULL。
    *   优点：没有加入，所以一些查询可以受益。可以强制执行父级密钥（例如，如果您想避免不同`2WD`的`4WD`车辆具有相同的 ID）。可以轻松地强制执行包容性与排他性子项以及抽象与具体父项（只需更改 CHECK）。
    *   缺点：一些查询可能会更慢，因为它们必须过滤掉“无趣”的孩子。根据您的 DBMS，特定于子的约束可能会出现问题。很多 NULL 会浪费存储空间。不太适合不完整的子类型化 - 添加新子项需要更改现有表，这在生产环境中可能会出现问题。
2.  将所有子项放在单独的表中，但没有父项的表（相反，在所有子项中重复父项的字段和约束）。具有 (3) 的大部分特征，同时避免 JOIN，但代价是可维护性较低（由于所有这些字段和约束重复）以及无法强制执行父级键或表示具体父级。
3.  将父母和孩子放在单独的表格中。
    *   优点：干净。不需要人为地重复任何字段/约束。强制执行父级键并轻松添加特定于子级的约束。适用于不完整的子类型（添加更多子表相对容易）。某些查询可以通过仅查看“有趣的”子表来受益。
    *   缺点：一些查询可能是 JOIN-heavy。*可能难以强制执行包容性与排他性子级和抽象与具体父级（如果 DBMS 支持循环和*延迟外键，则可以声明式地强制执行这些，但在应用程序级别强制执行它们通常被认为是一种较小的邪恶）。

如您所见，情况并不理想 - 无论您选择何种方法，您都需要做出妥协。方法 (3) 可能应该是您的起点，并且只有在有令人信服的理由时才选择其中一种方法。

* * *

*¹我猜这就是你的图表中线条的粗细。*

*²我猜这就是您的图表中存在或不存在“不相交”的含义。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:30:18.003

通常当您在数据库设计中进行超类型/子类型关系时，您需要为您的通用实体类型（超类型）创建一个单独的表，并为您的专业实体版本（子类型）创建一个单独的表脱节与否。在您的情况下，您将需要为 VEHICLE 创建一个表和一个主键以及一些常见的或由所有子类型共享的属性。然后，您需要为 2WD 和 4WD 创建单独的表以及仅针对这些表的属性。例如

![](../Images/1c595b961491ed149bbe2bdb6f93c8c5.png)

那么您可以使用 SQL 连接查询这些表

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T17:01:26.933

其他响应者所说的话，以及以下进入子类表的主键的内容。

您的案例看起来像是称为“泛化专业化”或简称 Gen-Spec 的设计模式的一个实例。如何使用数据库表对 gen-spec 建模的问题一直出现在 SO 中。

如果您在 Java 等 OOPL 中对 gen-spec 进行建模，您将使用子类继承工具来为您处理细节。您只需定义一个类来处理通用对象，然后定义一个子类集合，每个子类对应于每种类型的专用对象。每个子类都将扩展通用类。它简单明了。

不幸的是，据我所知，关系数据模型没有内置子类继承，而且 SQL 数据库系统不提供任何此类工具。但你并不是不走运。您可以设计您的表以与 OOP 的类结构相似的方式对 gen-spec 进行建模。当新项目添加到通用类时，您必须安排实现自己的继承机制。详情如下。

类结构相当简单，一个表用于 gen 类，一个表用于每个规范子类。这是一个很好的插图，来自 Martin Fowler 的网站。 [类表继承。](http://martinfowler.com/eaaCatalog/classTableInheritance.html) 请注意，在此图中，Cricketer 既是子类又是超类。您必须选择哪些属性放在哪些表中。该图显示了每个表中的一个示例属性。

棘手的细节是如何为这些表定义主键。gen 类表以通常的方式获取主键（除非该表是另一种泛化的特化，例如 Cricketers）。大多数设计师给主键起一个标准的名字，比如“Id”。他们使用自动编号功能来填充 Id 字段。规格类表有一个主键，可以命名为“Id”，但不使用自动编号功能。相反，每个子类表的主键都被限制为引用通用表的主键。这使得每个专用主键既是外键又是主键。请注意，对于 Cricketers，Id 字段将引用 Players 中的 Id 字段，但 Bowlers 中的 Id 字段将引用 Cricketers 中的 Id 字段。

现在，当您添加新项目时，您必须保持参照完整性，方法如下。
您首先在 gen 表中插入一个新行，为它的所有属性提供数据，但主键除外。自动编号机制生成唯一的主键。接下来，您将新行插入到适当的规范表中，包括其所有属性的数据，包括主键。您使用的主键是刚刚生成的全新主键的副本。这种主键的传播可以称为“穷人的继承”。

现在，当您想要所有通用数据以及来自一个子类的所有专用数据时，您所要做的就是通过公共键连接两个表。所有与相关子类无关的数据都将退出连接。它光滑、简单、快速。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T12:30:23.093

实现任何特定数据模型的方法并不总是只有一种。当您从逻辑模型转移到物理模型时，通常会发生转换。

标准 SQL 没有一种干净的方式来强制执行**不相交**的子类型约束。

如果您的目标是使用模式尽可能多地强制执行模型的规则，那么实现模型的标准方法是为超类型使用一个表，为每个子类型使用一个表。这可确保每个实体仅使用适用的属性。

有一个或多或少标准的 SQL 技巧来执行不相交的约束。它让一些人望而却步，因为它以一种不重要的方式违反了规范化规则。尽管如此，有些人还是觉得这种技术在美学上令人反感，因为它违反了 2NF。

该技术涉及向超类型添加*分区属性*，并在每个子类型中包含此分区属性，将其添加到子类型的主键中。除了为分区属性强加特定值的检查约束外，这确保了每个实体最多可以有一个子类型。该技术在许多地方都有详细记录，例如[这个博客](http://consultingblogs.emc.com/davidportas/archive/2007/01/08/Distributed-Keys-and-Disjoint-Subtypes.aspx)。

# java - 设计并发 HTTP URL 连接

> ID：12032349
> 
> 赞同：1
> 
> 时间：2012-08-20T04:41:13.263
> 
> 标签：java, webservice-client

我们正在设计一个客户端服务器系统。N 个客户端可以连接到服务器发送多条消息。服务器将消息插入数据库中，并将消息发布到外部服务器，并返回一个唯一的 id 给客户端，以便客户端跟踪消息。

为了避免瓶颈和 IO 等待时间，想将此服务拆分为两个任务

1.  在数据库中记录详细信息
2.  将使用发送 20 个 http 帖子的批处理过程

    ```
    Task sendMessage =new Task[20]
    ExecutorService threadExecutor = Executors.newFixedThreadPool( 20 );
    //get the list of message not send from database send them and update the database
    for(int i=0;i<10;i++) {
        threadExecutor.execute( task[i] );//send message via HTTP post
    } 
    ```

这是不是一个好的设计。单独运行第2点以提高性能是否很好。同样在上述情况下，每个线程都将连接到数据库并对其进行更新，这会导致锁定或脏写吗？

# php - 发送 PHP 表单数据

> ID：12032352
> 
> 赞同：0
> 
> 时间：2012-08-20T04:41:40.347
> 
> 标签：php, html

我正在尝试使用 PHP 创建一个在线订单。

我已经使用 PHP Checkboxes 为每个项目工作了。

但现在我想删除复选框 - 将它们替换为每个项目的数量框和消息框。

这是我目前使用复选框设置订单的方式（我从第一项“墨西哥玉米饼”中删除了复选框，并添加了数量和消息框作为示例）。

解决此问题的最佳方法是什么，以便只有在数量框（和消息框）中输入了数据的项目才会发送到我的电子邮件？

**HTML：**

```
<div class ="item_left">
<img src="images/mexicantortas.jpg" border="2" width="200px" height="150px"><br>
Mexican Torta - $8.50<input name="item" type="hidden" value="Mexican Torta"/><br>
How Many? <input name="quantity" type="text" style="width: 20px; height: 12px;"/><br>
<input name="message" type="text" value="Enter special order instructions here..."   style="max-width: 200px; height: 30px;"/>
</div><!-- ITEM_LEFT -->

<div class ="item_center">
<img src="images/fishsandwich.jpg" border="2" width="200px" height="150px"><br/>
Fish Sandwich - $8.50<input name="item" type="hidden" value="Fish Sandwich"/><br>
<input type="checkbox" name="check[]" value="Fish Sandwich"><br/>
</div><!-- ITEM_CENTER -->

<div class ="item_right">
<img src="images/hamburgers.jpg" border="2" width="200px" height="150px"><br/>
Hamburger w/ Fries - $7.00
<input type="checkbox" name="check[]" value="Hamburger"><br/>
</div><!-- ITEM_RIGHT --> 
```

**PHP：**

```
<?php
if(isset($_POST['submit'])) {

$to = "test@websitehere.com"; 
$subject = "Form Tutorial";
$name_field = $_POST['name'];
$email_field = $_POST['email'];
$message = $_POST['message'];
$option = $_POST['radio'];
$dropdown = $_POST['drop_down'];

foreach($_POST['check'] as $value) {
$check_msg .= "Checked: $value\n";
}

$body = "From: $name_field\n E-Mail: $email_field\n $check_msg
    Option:$option\n    Drop-Down: $dropdown\n Message:\n $message\n";

echo "Data has been submitted to $to!";
mail($to, $subject, $body);

 } else {
echo "blarg!";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:51:48.533

首先，你有一堆同名的东西，不允许你在服务器端区分它们。其次，如果他们选择超过 1 个项目，您是否希望每封电子邮件只向您发送 1 个项目或超过 1 个项目？

无论哪种方式，我认为您想要做的是验证并检查值是否等于“”或 0，具体取决于您的选择框。其次，获取这些变量并将它们填充到一个数组中。然后，您可以循环遍历数组，使用 html 将项目附加到 $message 以将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:45:39.977

请注意，这只是我在大约 10 分钟内快速输入的内容，所以我确信有更好的方法可以做到这一点，但是，它可以完成工作。

PHP：

```
if(isset($_POST['submit'])) {
    $to = "test@websitehere.com"; 
    $subject = "Form Tutorial";
    $name_field = $_POST['name'];
    $email_field = $_POST['email'];

    $order = array();
    foreach($_POST['item'] as $item => $name) {
        if ($_POST['quantity_'.$name] > 0) {
            $add_order = array('pretty'=>$_POST['pretty-name_'.$name],'qty'=>$_POST['quantity_'.$name],'message'=>$_POST['message_'.$name]);
            array_push($order,$add_order);
        }
    }

    $body = "From: $name_field\nE-Mail: $email_field\n";

    $body .= "Their Order:\n";
    foreach ($order as $item){
        $body .= "--".$item['qty']."x ".$item['pretty']."\n
        Extra: ".$item['message']."\n\n";
    }

    echo "Data has been submitted to $to!";
    mail($to, $subject, $body);
} 
```

HTML：

```
<form action="test.php" method="post">
<div class ="item_left">

Mexican Torta - $8.50<input name="item[]" type="hidden" value="torta"/>
<input name="pretty-name_torta" type="hidden" value="Mexican Torta"/><br>
How Many? <input name="quantity_torta" type="text" /><br>
<input name="message_torta" type="text" value="Enter special order instructions here..." />
</div><!-- ITEM_LEFT -->
<br />
<div class ="item_center">

Fish Sandwich - $8.50<input name="item[]" type="hidden" value="fish"/>
<input name="pretty-name_fish" type="hidden" value="Fish Sandwhich"/><br>
How Many? <input name="quantity_fish" type="text" /><br>
<input name="message_fish" type="text" value="Enter special order instructions here..." />
</div><!-- ITEM_CENTER -->
<br />
<div class ="item_right">

Hamburger w/ Fries - $7.00<input name="item[]" type="hidden" value="hamburger"/>
<input name="pretty-name_hamburger" type="hidden" value="Hamburger"/><br>
How Many? <input name="quantity_hamburger" type="text" /><br>
<input name="message_hamburger" type="text" value="Enter special order instructions here..." />
</div><!-- ITEM_RIGHT -->
<br /><br />
<input type="submit" name="submit" value="Order" />
</form> 
```

输出：（类似于）

```
Their Order:
--22x Mexican Torta
Extra: Enter special order instructions here...

--1x Fish Sandwhich
Extra: Lots of stuff

--2x Hamburger
Extra: Mmmm Fries 
```

杰瑞德是对的。您需要有一种方法来区分不同的项目。因此，为什么我在那里添加了一个额外的隐藏输入。

长话短说，每个项目都被放入一个数组中。PHP 遍历这个数组并挑选出数量值大于 0 的内容。如果有，则将该项目信息添加到第二个数组中。后半部分，通过那个新数组，让它看起来对你来说很好很漂亮。

如果您需要我澄清或解决任何问题，请让我知道。

编辑：继续并将其添加到邮件功能中（无聊）。

PS：我注意到您使用的是未经处理的变量。我可能不需要，但我还是会说。在对用户输入进行大量操作之前，请确保您正在检查和清理用户输入。在这里可能没什么大不了的，但在某些情况下它仍然可能变坏。

# wix - WiX：如何在默认情况下在 REINSTALL=ALL 中安装创建的补丁？

> ID：12032354
> 
> 赞同：1
> 
> 时间：2012-08-20T04:41:51.513
> 
> 标签：wix, wix3.5

我已经使用 wix 工具生成了一个 patch.msp 文件，当我使用以下命令通过命令行安装它时，我的应用程序的所有组件都会得到更新。

**通过命令行安装 patch.msp 文件完美！**

```
msiexec.exe /p patch.msp /l*vx patch.log /qb REINSTALL=ALL REINSTALLMODE=omusa 
```

但是当用户使用 Windows 浏览器安装 patch.msp 文件时（基本上是双击该文件）。它安装得很好（没有生成错误，也显示在已安装的更新中）但我的 dll 和 .exe 文件**没有得到更新。**

那么我该如何进行安装`REINSTALL=ALL`呢？有没有可以添加到 patch.wxs 文件的命令？

提前致谢

**编辑**

```
<CustomAction Id="PatchInstall" Property="PATCH" Value="REINSTALL" />
<InstallExecuteSequence>
  <Custom Action="PatchInstall" Before="InstallInitialize">REINSTALL="ALL"</Custom>
</InstallExecuteSequence> 
```

**对此进行更新 - 2012/09/27**

建议的方法不起作用，但我的解决方案的问题是文件版本没有更改，因此安装程序显示警告消息，告知文件没有更改。我在安装补丁时在日志中发现了这个：

```
MSI (s) (48:F4) [17:32:34:025]: File: C:\Muzi_Test_Installer\ACME.dll;  Won't Overwrite;    Won't patch;    Existing file is of an equal version 
```

所以我要更新文件版本并重新运行测试。

**最终更新** 可以确认这是一个文件版本问题！只需更新文件版本，MSP 就可以正常安装，没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:15:47.950

如果正在安装补丁，您可以尝试将`REINSTALL`属性设置为。`ALL`

因此，您需要修改新包并添加一个新的自定义操作，该操作会根据属性更改`REINSTALL`值。[`PATCH`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370576%28v=vs.85%29.aspx)

**编辑：**您希望您的自定义操作以这种方式工作：

```
if (PATCH) {
    REINSTALL = "ALL";
} 
```

所以在 WiX 中，它看起来像：

```
<CustomAction Id="PatchInstall" Property="REINSTALL" Value="ALL" />
<InstallExecuteSequence>
    <Custom Action="PatchInstall" Before="InstallInitialize">PATCH</Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T12:38:39.923

发帖是因为我没有看到列出的这个潜在修复——

如果它具有相同的版本号，命令行指令成功地替换了文件，我有点惊讶。REINSTALLMODE 指令“o---”应该意味着只重新安装较低版本的文件。

无论如何，我认为这个问题也可以通过将 MSI 安装程序的内部设置 REINSTALLMODE 更改为“a---”来解决。'a' REINSTALLMODE 属性表示应重新安装所有文件，无论版本或校验和如何。

# c++ - 在代码中实施自定义规则 (C/C++)

> ID：12032360
> 
> 赞同：1
> 
> 时间：2012-08-20T04:42:25.770
> 
> 标签：c++, parsing, compilation, gnu-toolchain

g++ 验证预定的规则和约束集，如果在代码中未满足这些规则和约束，则会引发错误或警告消息。是否可以使用某些工具为自定义规则集创建解析器，例如“需要显式初始化全局变量”（我知道全局变量是隐式初始化的），或者已经调用了名为 init 的函数（我知道构造函数但是不想使用它们）。任何指向快速简单的东西的指针都会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:47:09.570

Coverity 允许您编写这样的自定义规则。它有点贵，所以可能不是为了这个而设置的爱好。不过，它是生产代码的好工具，而且可扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:45:47.480

CLANG 是一种静态代码分析器，用于确保您编写的内容是您的意思，即使您编写的内容无论如何都会编译。它只进行静态代码分析。

否则使用 assert() 或异常在运行时执行规则。

# mysql - Rails 中的间歇性 MySql 错误

> ID：12032363
> 
> 赞同：0
> 
> 时间：2012-08-20T04:42:47.540
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.1

我在不同的表上间歇性地收到以下错误。

> ActiveRecord::StatementInvalid (Mysql::Error: : INSERT INTO `sessions` ( `created_at`, `data`, `session_id`, `updated_at`) VALUES (?, ?, ?, ?)):

这适用于 activerecord 3.1.4。

请让我知道是否有任何其他信息会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:52:36.363

发生这种情况是因为我正在使用

```
reconnect: true 
```

在我的数据库配置中。

删除此内容后，我不再看到此错误。

# javascript - 如何在 iframe 中激活 jquery 功能？

> ID：12032374
> 
> 赞同：1
> 
> 时间：2012-08-20T04:44:10.363
> 
> 标签：javascript, jquery, iframe, jscrollpane

我有一个 iframe，里面有多个 jquery 功能，我无法弄清楚如何正确调用任何函数到 jquery 的工作位置。当我直接访问 iframe 页面时，jquery 可以完美运行，但是当我访问框架的父级时，jquery 不会激活。我已经查看了其他答案，但根本无法弄清楚。

例如，在 iframe 中，我有几个带有 jScrollpane 的 div。通常，要激活 jScrollpane，我必须有以下代码：

```
<script type="text/javascript" src="/scrollpane/jquery.jscrollpane.min.js"></script>
<script>
$(function()
{
$('.scroll-pane').jScrollPane();
});
</script> 
```

但我根本不知道如何从父页面调用这个函数。我真的不知道 jquery，所以如果有人能从字面上说明我如何在 iframe 中激活这个功能，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:31:50.243

您可以使用 jquery 在 iframe 中调用函数：

```
<script type="text/javascript">
 $(document).ready(function(){    
  $("#id_of_your_frame").load(function(){
   $("#id_of_your_frame").contents().find(".scroll-pane").jScrollPane();
  });
 });
</script> 
```

# git-commit - 为什么 GIT 提交需要 30GB 的内存来提交？

> ID：12032375
> 
> 赞同：1
> 
> 时间：2012-08-20T04:44:23.233
> 
> 标签：git-commit

我有一个很大的存储库，大约 80GB

```
git --version
#git version 1.7.12
git init .
#Initialized empty Git repository in /reponame/.git/
git add -A .

git commmit -m "Backup 2012-08-19 03:43:44"
#fatal: Out of memory, malloc failed (tried to allocate 32220431361 bytes)
#[master (root-commit) 8053f0d] Backup 2012-08-19 03:43:44 
```

为什么 GIT 一次提交需要 30GB 内存？

这不符合git的home main home的第一段：

> Git 是一个免费和开源的分布式版本控制系统，旨在以**速度和效率处理从小型到大型项目的所有内容。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:55:58.290

这取决于工作目录中的内容。当你做

```
git add -A
git commit -m "Backup..." 
```

您实际上是在告诉 git “记录对存储库的更改”，在新初始化的 80Gbs 目录中，这可能是很多更改。

[http://www.kernel.org/pub/software/scm/git/docs/git-commit.html](http://www.kernel.org/pub/software/scm/git/docs/git-commit.html)

# asp.net - 在按钮单击中启用和禁用 ajax tabcontainer 中的选项卡

> ID：12032378
> 
> 赞同：4
> 
> 时间：2012-08-20T04:44:39.657
> 
> 标签：asp.net, ajax, tabcontrol, tabcontainer

我在 asp.net 应用程序中使用 ajax 选项卡容器，有 2 个选项卡 1.第一个选项卡有 gridview ，2.第二个选项卡有添加新项目表单。在行命令上单击我在第二个选项卡中获取所有值，在单击编辑时我启用所有控件进行编辑。在此期间，我想限制用户导航到第一个选项卡，直到他单击*GotoGrid*按钮。如何实施？如果我使用

> tab_name.enable=false；

它甚至被禁用所有按钮和控件。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:12:01.760

```
<asp:HiddenField runat="server" ID="disabledPaneIndex" />
<ajaxToolkit:Accordion runat="server" ID="Accordion1" >
     <Panes>
          <ajaxToolkit:AccordionPane runat="server" ID="Pane1" >
               <Header>
                    Pane 1
               </Header>
               <Content>
                    <asp:Button runat="server" ID="SwitchToPane2Button" Text="Go To Pane2" OnClick="SwitchToPane2Button_Click" />
               </Content>
          </ajaxToolkit:AccordionPane>
          <ajaxToolkit:AccordionPane runat="server" ID="Pane2">
               <Header>
                    Pane 2
               </Header>
               <Content>
                    <asp:Button runat="server" ID="SwitchBackButton" Text="Go Back" OnClick="SwitchBackButton_Click" />
               </Content>
          </ajaxToolkit:AccordionPane>
     </Panes>
</ajaxToolkit:Accordion> 
```

服务器代码：

```
protected void SwitchToPane2Button_Click(object sender, EventArgs e)
{
    Accordion1.SelectedIndex = 1;
    disabledPaneIndex.Value = "0";
}

protected void SwitchBackButton_Click(object sender, EventArgs e)
{
    disabledPaneIndex.Value = string.Empty;
    Accordion1.SelectedIndex = 0;
} 
```

JavaScript（放置在`ScriptManager`控件之后

```
function pageLoad() {
     var accordion = $find("<%= Accordion1.ClientID %>_AccordionExtender");
     accordion.remove_selectedIndexChanging(selectedIndexChanging);
     accordion.add_selectedIndexChanging(selectedIndexChanging);
}

function selectedIndexChanging(sender, args) {
     var disabledIndexValue = parseInt($get("<%= disabledPaneIndex.ClientID %>").value);
     if (!isNaN(disabledIndexValue) && args.get_selectedIndex() === disabledIndexValue) {
          args.set_cancel(true);
     }
} 
```

# php - 了解 str_replace 和 strtr 如何在 php 中工作

> ID：12032390
> 
> 赞同：4
> 
> 时间：2012-08-20T04:46:46.660
> 
> 标签：php, string

```
 $search  = array('A', 'B', 'C', 'D', 'E');
 $replace = array('B', 'C', 'D', 'E', 'F');
 $subject = 'A';
 $trans = array('A' => 'B','B'=>'C','C'=>'D','D'=>'E','E'=>'F');
 echo str_replace($search, $replace, $subject);
 echo "<br/>";
 echo strtr($subject,$trans);

 Output: F
         B 
```

当使用 str_replace 我得到 F，使用 strtr 我得到 B

据我所知，对于str_replace：它从左到右替换，所以A被替换为B而没有标记位置已经被替换，所以再次找到被C替换的B，依此类推以获得值F。

对于 strtr：我用 B 替换 A 并记住它已在该位置替换，

我得到这个正确吗？有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:52:33.557

对，那是正确的。`str_replace()`按顺序进行替换，而`strtr()`遍历字符串中的每个字符并且只替换一次。

# android - 在android中添加自定义Facebook Like按钮

> ID：12032392
> 
> 赞同：0
> 
> 时间：2012-08-20T04:46:54.527
> 
> 标签：android, facebook, custom-controls

我想在我的 android 应用程序中使用自定义点赞按钮而不是 Facebook 的点赞按钮。是否可以使用自定义点赞按钮？如何实现这个？我在 StackOverFlow 中搜索，但找不到任何有用的信息。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:00:18.893

根据您可以[在此处](https://www.facebook.com/brandpermissions/logos.php)阅读的我们的品牌许可政策，在 Facebook Like Button 部分下：

> 虽然您可以缩放大小以满足您的需要，但您不能以任何其他方式修改“赞”按钮（例如通过更改设计）。

所以答案是否定的，你不能使用自定义的 Like 按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:08:55.657

你不能。Facebook like 按钮只能是官方按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T09:12:39.580

因为它是 Android，所以您可以自定义所有内容。例如，我创建了示例自定义 LikeView。您可以设置任何您想要的颜色，但请尝试考虑 Facebook 惯例。

[![在此处输入图像描述](../Images/f36cb7e01d04c343660618e8af7ca47a.png)](https://i.stack.imgur.com/2wR8q.png)[![在此处输入图像描述](../Images/4e50f4a9424a425b93d6fa1283b1d798.png)](https://i.stack.imgur.com/nygMJ.png)

### 怎么做？

规则如下：
在 Android 应用程序中，如果您从任何 SDK 重新实现资源，它会将其覆盖为您设置的新值。
我从 FacebookSdk 类中找到了这些变量，并在我自己的应用程序中覆盖了它。你也可以。
1\. 将以下样式添加到您的样式文件并设置您自己的选择器。它将覆盖 LikeButton 选择器

```
<style name="com_facebook_button_like" parent="com_facebook_button">
    <item name="android:background">@drawable/btn_facebook_like_background_selector</item>
</style> 
```

2.将以下颜色添加到您的 color.xml 文件中。设置任何你想要的颜色。

```
<color name="com_facebook_likeboxcountview_text_color">#FFFFFFFF</color>
<color name="com_facebook_likeboxcountview_border_color">#FFFFFFFF</color> 
```

# android - 为Androids ImageViewer编写插件来显示我自己的图片格式

> ID：12032399
> 
> 赞同：1
> 
> 时间：2012-08-20T04:47:39.157
> 
> 标签：android, plugins

是否可以在 Android 中为原生 ImageViewer 应用程序编写一个插件来显示我自己的图片格式的文件（例如 .psd 文件）？如果是这样，有人可以为我指出正确的方向吗？

# c# - 如何在 C# 控制台应用程序中保存数据？

> ID：12032404
> 
> 赞同：-1
> 
> 时间：2012-08-20T04:48:40.813
> 
> 标签：c#, console

嗨朋友们，我是 C# 控制台应用程序的新手，我需要从命令中获取数据以保存数据，并为 Ex 提供一些逻辑。

```
[ In Command Prompt I  have to  Write \] 
```

我必须写这个命令

```
 myfile.exe  -o(parm) MyTable  Xml Filepath 
```

如何在我的代码中获取这些命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:14:54.407

如果我正确理解了您的问题，那么您要使用的是 Main 函数用作参数的 args 字符串数组。

这里有一个基本教程：http: [//www.dotnetperls.com/main](http://www.dotnetperls.com/main)

# java - 不断检查布尔值

> ID：12032407
> 
> 赞同：1
> 
> 时间：2012-08-20T04:49:31.877
> 
> 标签：java

我有2节课。当您单击特定位置时，第一个类将布尔值变为 true，如果第一个类中的布尔值为 true，则第二个类调用 `frame.removeAll()`和 `frame.add(new CanvasSelect())`。似乎只检查布尔值一次。

有什么办法可以让二等舱不断检查一等舱的布尔值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T05:08:56.483

正如评论中所建议的那样，如果您真的想知道发生了什么，您确实需要发布（精简版）代码。我可以想到这可能发生的三个可能原因。

*可能性 1：*您需要将布尔值标记为`volatile`. 如果这里有多个线程在运行，那么如果该字段未标记为易失性字段，则其中一个线程可能会看到陈旧的值。但是，听起来您正在做 GUI 编程（可能使用 Swing），所以所有这些事件都应该发生在 GUI 事件线程中——因此我怀疑这是问题所在。不过，它仍然值得一试。

*可能性 2：*您正在根据布尔值设置事件处理程序，而不是检查事件处理程序中的布尔值。在这种情况下，该值只会被读取一次（当设置 ActionEventHandler 时），而不是在点击事件发生时。

*可能性 3：*当您清除框架时，您也在使用事件处理程序清除项目，并且您没有正确重置它们。我认为这是最有可能的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:15:04.173

以任何形式使用忙等待（如另一个答案中所建议的）是一个*非常*糟糕的主意，它是一种编程[反模式](https://en.wikipedia.org/wiki/Anti-pattern)（它应该只在非常特殊的情况下使用，比如低级 CPU 编程，当然永远不会在 Java 中使用） ：

1.  您只是白白消耗了一个 CPU 的所有可用功率。
2.  使用`sleep`ing 会更好，但是您的代码会延迟对更改做出反应。而且你做的延迟越短，你浪费的 CPU 功率就越多。尽管如此，这是一种糟糕的编程模式。

如果没有代码片段或更详细的解释，则不清楚您到底想要实现什么。一些一般性建议：

*   如果您想在收到用户输入时执行某些操作，您可以在事件处理程序中简单地执行此操作，而无需使用任何标志或变量。但是，这*只有*在您的操作非常短时才有可能，否则您将阻塞[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。
*   如果您需要执行的操作需要更长的时间，您应该从事件处理程序中启动一个新线程，该线程将执行该操作，并在完成时更新 GUI。最直接的方法是使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。最好阅读整个[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)一章以了解所有可能性。
*   如果您通常需要在两个独立线程之间进行通信，例如如果您需要一个线程等待某些标志更改，请使用[Java 的并发机制](http://docs.oracle.com/javase/tutorial/essential/concurrency/)之一，而不是忙于等待。[Guarded Blocks](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)中讨论了如何替换忙等待的最直接方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T04:57:22.383

您可以使用下面给出的代码片段并将它们放入始终与您的主代码并行运行的**线程中**

```
while(true)
{
  if(_val)  //_val is your boolean variable
  {
      // your logic
  }
  Thread.sleep(100);

} 
```

或者可以在单击该特定控件时引发事件，该控件检查值`_val`并执行操作

# jquery - Jquery UI Autocomplete 这不能将 id 作为单独的参数传递

> ID：12032408
> 
> 赞同：2
> 
> 时间：2012-08-20T04:49:40.100
> 
> 标签：jquery, ajax, json, autocomplete

所以我试图传递另一个参数“字段”，它可以让我获取正在输入的输入的 id。这将允许我指示 PHP 向数据库发出正确的 SQL 语句，因为我将有多个输入在需要自动完成功能的页面上。我知道下面缺少响应，那是因为我不确定该放什么。我只想像平常一样返回 json 字符串。我怎样才能获得要传递的 id 以及我为响应输入的内容？

```
('.completeme').autocomplete({    
            source: function(request, response) {
                $.ajax({
                    url: "ajax/ajax_diagnosis.php",
                    datatype: "json",
                    data: {
                        term: request.term,
                        field: $(this).attr("id"),
                        maxRows: 15                     
                }
            },

            minLength: 3,
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:16:02.777

尝试：

```
$(this.element).attr("id") 
```

这可能是最终脚本：

```
$(function() {
        var cache = {},
            lastXhr={};
        $( ".completeme" ).autocomplete({
            minLength: 3,
            source: function( request, response ) {

                    var term = request.term,
                        field=$(this.element).attr('id');
                    if(!field)return;
                    if ( cache[field] && term in cache[field] ) {
                        response( cache[field][ term ] );
                        return;
                    }

                $.extend(request,{field:field,maxRows:15});
                lastXhr[field] = $.getJSON( "ajax/ajax_diagnosis.php", 
                                    request, 
                                    function( data, status, xhr ) {
                                    if(!cache[field])cache[field]={};
                                              cache[field][ term ] = data;
                                              if ( xhr === lastXhr[field] ) {
                                                response( data );
                                             }
                                });
            }
        });
    }); 
```

# android - 如何从文件路径获取内容方案 Uri？

> ID：12032412
> 
> 赞同：2
> 
> 时间：2012-08-20T04:50:39.140
> 
> 标签：android

我有一种情况，我知道文件的路径，并以这种方式解决它：

```
File f = new File(Environment.getExternalStorageDirectory(), "image.jpg"); 
```

然后从中创建一个 Uri：

```
Uri uri = Uri.fromFile(f); 
```

但是，这个 Uri 会打印出如下内容：

```
file://..... 
```

但我想要：

```
content://..... 
```

“为什么？”。因为某些应用程序对方案敏感，例如 Facebook。如果您在附加图像时将文件方案 Uri 传递给 Facebook，它什么也不做。如果您将内容方案 Uri 传递给同一图像，则它可以完美运行。

那么如何通过知道绝对路径或将文件方案 Uri 转换为内容方案 Uri 来获取内容 Uri？

*编辑（2012 年 8 月 24 日）：最新的 Facebook 应用程序更新“解决”了这个问题，只需删除选择器，只显示图库。在 Facebook 中，您根本无法再通过意图进行选择。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:22:02.377

到目前为止，我最好的选择似乎是这种扫描文件的方法，然后返回带有内容方案的 Uri：

```
File f = new File(Environment.getExternalStorageDirectory(), "image.jpg");

MediaScannerConnection.scanFile(this, new String[]{f.toString()}, null, new MediaScannerConnection.OnScanCompletedListener() {
    public void onScanCompleted(String path, Uri contentUri) {
        // TODO: Do something useful with contentUri, which now has content-scheme
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T04:58:22.613

试试这个'

```
Uri uri = Uri.parse(f); 
```

而不是 Uri uri = Uri.fromFile(f);

# python-3.x - python 3：字符串转十六进制，十六进制转格式

> ID：12032414
> 
> 赞同：5
> 
> 时间：2012-08-20T04:51:03.447
> 
> 标签：python-3.x, hex

问题：我需要将字符串转换为十六进制，然后格式化十六进制输出。

```
tmp = b"test"
test = binascii.hexlify(tmp)
print(test) 
```

输出：b'74657374'

* * *

我想将此十六进制输出格式化为：74:65:73:74

我遇到了障碍，不知道从哪里开始。我确实考虑过将输出再次转换为字符串，然后尝试对其进行格式化，但必须有更简单的方法。

任何帮助将不胜感激，谢谢。

==========

操作系统：Windows 7

```
tmp = "test"
hex = str(binascii.hexlify(tmp), 'ascii')
print(hex)

formatted_hex = ':'.join(hex[i:i+2] for i in range(0, len(hex), 2))
print(formatted_hex 
```

[错误] Traceback（最近一次调用最后一次）：文件“C:\pkg\scripts\Hex\hex.py”，第 24 行，十六进制 = str(binascii.hexlify(tmp), 'ascii') TypeError: 'str '不支持缓冲接口

此代码仅在使用 tmp = b'test' 时有效，我需要能够以时尚的方式使用 tmp = importString，因为我从文件顺序中将另一个值传递给它以使我的代码段工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T04:55:39.420

```
hex = str(binascii.hexlify(tmp), 'ascii')
formatted_hex = ':'.join(hex[i:i+2] for i in range(0, len(hex), 2)) 
```

这利用了指定的`step`参数`range()`，而不是给出范围内的每个整数，它应该只给出每个第二个整数（对于`step=2`）。

* * *

```
>>> tmp = "test"
>>> import binascii
>>> hex = str(binascii.hexlify(tmp), 'ascii')
>>> formatted_hex = ':'.join(hex[i:i+2] for i in range(0, len(hex), 2))
>>> formatted_hex
'74:65:73:74' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:14:06.870

```
>>> from itertools import izip_longest, islice
>>> t = b"test".encode('hex')
>>> ':'.join(x[0]+x[1] for x in izip_longest(islice(t,0,None,2),islice(t,1,None,2)))
'74:65:73:74' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T18:28:17.607

从 Python 3.8 开始，标准库中提供了此功能：[`binascii.hexlify`](https://docs.python.org/3/library/binascii.html#binascii.hexlify)有一个新参数`sep`.

```
test = binascii.hexlify(tmp, b':') 
```

如果您想要一个文本 ( `str`) 字符串而不是`bytes`字符串：

```
test = binascii.hexlify(tmp, b':').decode('ascii') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T10:56:50.820

此代码产生预期的输出：

```
tmp='test'

l=[hex(ord(_))[2:] for _ in tmp]

print(*l,sep=':') 
```

-->74:65:73:74

# ios - 如何更新核心数据表中的列

> ID：12032422
> 
> 赞同：-1
> 
> 时间：2012-08-20T04:52:26.863
> 
> 标签：ios, core-data

我正在开发一个使用 Core Data 的 iOS 应用程序。我正在从 Web 服务下载数据。最初我有一个表，其中有一个字段“to”。当一个表的数据完成后，我想用已下载的数据计数更新表的“到”字段。

这是我到目前为止使用的：

```
NSString *str;
NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Resume" inManagedObjectContext:[self managedObjectContext]]; 
NSFetchRequest *request2 = [[NSFetchRequest alloc] init];
[request2 setEntity:entityDesc];
NSError *error;
NSArray *objects=[[self managedObjectContext] executeFetchRequest:request2 error:&error];
for (NSManagedObject *info in objects) { 
   str=[NSString stringWithFormat:@"%@",[info valueForKey:@"to"]]; 
   int tableCount=[str intValue]+countValue;
   NSLog(@"tableCount===%d",tableCount);
   [info setValue:[NSNumber numberWithInt:tableCount] forKey:@"to"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:43:21.353

在 FOR 循环的最后一行或 FOR 循环之后添加以下行以保存您在 Core Data 中的更改：

```
[[self managedObjectContext] save]; 
```

# ruby - 每行有大量列的 Cassandra

> ID：12032427
> 
> 赞同：3
> 
> 时间：2012-08-20T04:53:43.673
> 
> 标签：ruby, cassandra

我在干净的 AWS 实例中使用默认配置设置 cassandra，并将 10000 列插入一行，每列有 1MB 数据。我使用这个 ruby​​（版本 1.9.3）脚本：

```
10000.times do
    key = rand(36**8).to_s(36)
    value = rand(36**1024).to_s(36) * 1024
    Cas_client.insert(TestColumnFamily,TestRow,{key=>value})
end 
```

每次我运行这个脚本时，它都会崩溃：

```
/usr/local/lib/ruby/gems/1.9.1/gems/thrift-0.8.0/lib/thrift/transport/socket.rb:109:in `read': CassandraThrift::Cassandra::Client::TransportException        from /usr/local/lib/ruby/gems/1.9.1/gems/thrift-0.8.0/lib/thrift/transport/base_transport.rb:87:in `read_all'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thrift-0.8.0/lib/thrift/transport/framed_transport.rb:104:in `read_frame'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thrift-0.8.0/lib/thrift/transport/framed_transport.rb:69:in `read_into_buffer'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thrift-0.8.0/lib/thrift/client.rb:45:in `read_message_begin'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thrift-0.8.0/lib/thrift/client.rb:45:in `receive_message'
    from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.15.0/vendor/0.8/gen-rb/cassandra.rb:251:in `recv_batch_mutate'
    from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.15.0/vendor/0.8/gen-rb/cassandra.rb:243:in `batch_mutate'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thrift_client-0.8.1/lib/thrift_client/abstract_thrift_client.rb:150:in `handled_proxy'        from /usr/local/lib/ruby/gems/1.9.1/gems/thrift_client-0.8.1/lib/thrift_client/abstract_thrift_client.rb:60:in `batch_mutate'
    from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.15.0/lib/cassandra/protocol.rb:7:in `_mutate'
    from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.15.0/lib/cassandra/cassandra.rb:463:in `insert'
    from a.rb:6:in `block in <main>'
    from a.rb:3:in `times'
    from a.rb:3:in `<main>' 
```

然而 cassandra 执行正常，然后我运行另一个 ruby​​ 脚本来获取我插入了多少列：

```
p cas_client.count_columns(TestColumnFamily,TestRow) 
```

这个脚本再次崩溃，同样的错误信息。并且 cassandra 进程保持在 100% 的 cpu 使用率。

```
AWS m1.xlarge type instance (15GB mem,800GB harddisk, 4cores cpu)
cassandra-1.1.2
ruby-1.9.3-p194
jdk-7u6-linux-x64
ruby-gems:
    cassandra (0.15.0)
    thrift (0.8.0)
    thrift_client (0.8.1) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T04:37:14.973

10,000 columns at 1mb each is 10 gigs of data.

Cassandra rpc uses thrift, which requires that the entire return value from an rpc call must fit in memory, so trying to read all columns would require you to load a 10 gig thrift object into memory which is not practical, especially in ruby.

# actionscript-3 - 闪存预加载器 as3

> ID：12032428
> 
> 赞同：1
> 
> 时间：2012-08-20T04:54:00.890
> 
> 标签：actionscript-3, flash, actionscript, preloader

是否可以在 as3 预加载器中设置总字节数？我不确定它是否正确，但为了避免无限循环，我已经这样做了。

```
var loadper:Number=0;
var total_bytes:Number = 3484484;
loaderInfo.addEventListener(ProgressEvent.PROGRESS, loader);

function loader(filename:ProgressEvent) { 
   var loaded_bytes:Number = stage.loaderInfo.bytesLoaded;
   _txt.text=String(loadper+"%");
   if(loadper>=100) { 
      preLoader_mc.perct_mc.visible=false;
      loaderInfo.removeEventListener(ProgressEvent.PROGRESS, loader);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:39:41.783

`Event.COMPLETE`文件完全加载后，只需监听哪些触发器即可。连同其他一些调整：

```
loaderInfo.addEventListener(ProgressEvent.PROGRESS, loaderProgress);
loaderInfo.addEventListener(Event.COMPLETE, loaderComplete);

function loaderProgress(event:ProgressEvent) { 
    var percentage:Number = Math.round((stage.loaderInfo.bytesLoaded / stage.loaderInfo.bytesTotal) * 100);
    _txt.text = percentage + "%";
}

function loaderComplete(event:Event):void
{
    loaderInfo.removeEventListener(ProgressEvent.PROGRESS, loaderProgress);
    loaderInfo.removeEventListener(Event.COMPLETE, loaderComplete);

    preLoader_mc.perct_mc.visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T21:36:02.973

在同一事件中，还有关于总字节数的信息。

你可以把它当作

```
filename.bytesTotal 
```

根据您的代码，其中 filename 是您的事件变量。

通过做

```
filename.bytesLoaded / filename.bytesTotal 
```

你有完成百分比。这永远不会进入无限循环。

[您可以在此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)查看有关 adobe 文档和示例的更多详细信息。

# c++ - C++ if 语句编码错误

> ID：12032431
> 
> 赞同：0
> 
> 时间：2012-08-20T04:54:31.587
> 
> 标签：c++, xcode, macos

我试图让这个 if 语句工作，但每次我尝试构建它时，我都会收到这个错误：

```
no matching constructor for initialization of std::string'(aka'basic_string<char>') 
```

我在mac上使用Xcode，如果这有帮助，如果你能解释为什么我需要这样做，这样我下次就可以避免这个问题

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    cout << "               Menu" << endl << endl;
    cout << "   press 1 to play the word game." << endl << endl;
    cout << "  press 2 too see the answer to 2+5." << endl << endl;

    string UserInput;
    cin >> UserInput;

    std::string y('1');
    if (UserInput == y) {

    }
    cout << "Enter A Word";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:58:22.867

`std::string`有默认构造函数和构造函数重载，`const char*`但没有构造函数重载，`char`所以要么做，`y("1")`要么做`std::string y(1, '1')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T04:55:25.257

我想你想要

```
std::string y("1"); 
```

单引号表示一个字符而不是一个字符串，你不能从一个字符构造一个 std::string 。

# python - 如何在python中将unicode字符串转换为十进制数？

> ID：12032433
> 
> 赞同：0
> 
> 时间：2012-08-20T04:54:50.537
> 
> 标签：python

示例我有这个文本字符串：

```
string = 'Vui lòng giúp đỡ tôi' 
```

如何将其转换为整数以与 unichr() 一起使用？

示例结果：

```
\u...\u... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:57:59.980

你不需要，如果你解码它。

```
>>> 'Vui lòng giúp đỡ tôi'
'Vui l\xc3\xb2ng gi\xc3\xbap \xc4\x91\xe1\xbb\xa1 t\xc3\xb4i'
>>> 'Vui lòng giúp đỡ tôi'.decode('utf-8')
u'Vui l\xf2ng gi\xfap \u0111\u1ee1 t\xf4i'
>>> print 'Vui lòng giúp đỡ tôi'.decode('utf-8')
Vui lòng giúp đỡ tôi 
```

# assembly - 在这个程序中，andi 和 ori 做了什么？

> ID：12032437
> 
> 赞同：4
> 
> 时间：2012-08-20T04:55:10.093
> 
> 标签：assembly, mips

```
 .global main            # makes label "main" globally known

        .text                   # Instructions follow
        .align  2               # Align instructions to 4-byte words

main:   movi    r16,0x47        # Load the hexadecimal value 41
                                # to register r16

loop:   mov     r4,r16          # Copy to r4 from r16

        nop                     # (later changed to call hexasc)
        nop                     # (later changed to mov r4,r2)

        movia   r8,putchar      # copy subroutine address to a register
        callr   r8              # call subroutine via register

        addi    r16, r16,1      # Add 1 to register r16
        andi    r16, r16, 0x7f  # mask with 7 bits
        ori     r16, r16, 0x20  # set a bit to avoid control chars

        br      loop            # Branch to loop

        .end                    # The assembler will stop reading here
        foo bar bletch          # comes after .end - ignored 
```

我想我什么都能理解，除了这两个指令在这种情况下是如何工作的`andi`。`ori`ori 似乎是为了打印 ASCII 20 个位置，但为什么以及如何打印？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T05:03:57.900

`andi`with 0x7f 删除最高有效位，ASCII 不使用该位（仅使用 7 位，或 0-128 来映射字符）。0x7f 是二进制的 0111 1111。由于任何 AND 与 0（最高有效位为 0，如您所见）为 0，任何 AND 与 1 保持不变，该操作将删除最高有效位。

`ori`使用 0x20 只会设置第 6 位 (2 ⁵ )。0x20 是二进制的 0010 0000。由于任何与 1 的 OR（如您所见，第 6 位）都是 1，而与 0 的任何 OR 都保持不变，因此会导致设置第 6 位。

正如评论所说，如果 r16 最初小于 32，或者如果 r16 >= 128 且 < 160，它将使数字 >= 0x20。但这并不意味着它总是会添加 0x20（例如 r16 最初是 32 --addi--> 33 --andi--> 33 --ori--> 33）。

作为旁注，与常数（也称为*掩码*）进行与运算通常用于从原始数据中提取某些位。它将提取掩码中对应位为 1 的任何位。

与常量进行或运算通常用于将某些位设置为 1。它将设置掩码中对应位为 1 的位。

顺便说一句，要将某个位设置为 0，您可以与除您要设置的位之外的所有 1 的常量进行与运算。要切换某些位，您可以将常数与相应的位 1 和其余位 0 进行异或。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:55:34.707

在汇编中使用`and`是一种确保位关闭的方法。考虑：

```
1101 and
0111
---------
0101 
```

只有在第二列和最后一列中，1 存在于顶部`AND`底部，有效地确保了第一位被关闭。

在汇编中使用“或”是一种确保位处于打开状态的方法。考虑：

```
1101 or
0111
----------
1111 
```

底行的 1 确保无论第一个数字是什么，最后三位都将打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T05:03:21.180

andi 和 ori 都是按位运算符：

要看到差异，请考虑“

```
and $rd, $rs, $rt
or  $rd, $rs, $rt 
```

相对

```
andi $rt, $rs, immed
ori  $rt, $rs, immed 
```

[http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/bitwise.html](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/bitwise.html)

# javascript - 有什么方法可以找出通过输入字段（类型=文件）选择了多少文件？

> ID：12032440
> 
> 赞同：0
> 
> 时间：2012-08-20T04:55:20.803
> 
> 标签：javascript, jquery, html

我有一个适用于 html5 文件 api 的上传脚本，我想为互联网“代码浪费”资源管理器编写一个后端 iframe 解决方案

所以我有一个通过 iframe 加载的表单，当提交表单时，我将加载模板添加到父文档

这是我的html代码

```
<form enctype="multipart/form-data" method="post" action="<?php echo $action; ?>" >
<input type="file" name="files[]"  id="files" multiple> 
<input name="profile_id" type="hidden" value="<?php echo $profile_id; ?>">
<input name="" type="button" value="Button" onClick="add_loder();">
</form> 
```

这是我的 add_loder 函数

```
<script>
var d = $(window.frameElement).parent(); 

function add_loder()
{
    if($('#files').val().length == 0 )
    return false;

    var template = '<div class="preview">'+
                        '<span class="imageHolder">'+
                            '<img class="prv" src="<?php echo IMAGE_URL; ?>done.png" />'+
                            '<span class="uploaded"></span>'+
                        '</span>'+
                        '<div  class="ph" >'+
                            '<img src="<?php echo IMAGE_URL; ?>load_square.gif" style="margin-right:45%;width:27px;height:27px">'+
                        '</div><div class="area"><textarea  class="picarea"> </textarea><input type="button" value="<?php echo $confirmLable; ?>" class="conf">'+
                        '<input  type="button" value="<?php echo $deleteLable; ?>" class="del"><input class="id" type="hidden" value="0"></div>'+
                    '</div>'; 

    d.append(template);
    $('form').submit();

}
</script> 
```

但这只会向页面添加一次加载

我想为每个选定的文件添加一个加载，所以我必须知道选择了多少个文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:02:04.217

`$('#files')[0].files`它是所选文件的集合，因此请尝试`$('#files')[0].files.length`

# android - android drawable识别资源

> ID：12032445
> 
> 赞同：0
> 
> 时间：2012-08-20T04:55:42.337
> 
> 标签：android, drawable

我将图像拖放到我的“可绘制”文件夹中，

但是我必须等待大约 5 分钟才能让 eclipse 识别新添加的资源，

如何更新 Eclipse 识别的资源？

在它自动执行之前？[需要很长时间]

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:01:23.720

当您不使用刷新按钮时，eclipse 需要一些时间来识别新添加的资源。确保刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:47:44.247

您可以使用`Refresh`Esclipse 或`clean the Project`.

您可以在选项卡处清理项目`project`，并在选项卡处刷新`File`。

我建议您每次触摸 dir 文件夹时清理您的项目 =)

看看这个答案：

```
Eclipse: How do i refresh an entire workspace? F5 doesn't do it 
```

[https://stackoverflow.com/a/2518466/1610949](https://stackoverflow.com/a/2518466/1610949)

# objective-c - 为什么这个 GCD 操作会导致死锁？

> ID：12032449
> 
> 赞同：2
> 
> 时间：2012-08-20T04:56:12.540
> 
> 标签：objective-c, multithreading, asihttprequest, grand-central-dispatch

`sync`我知道如果你从同一个串行队列上的另一个调度调用一个调度，就会发生死锁`sync`，但这是我听说过的 GCD 死锁的唯一“已知”原因。

我正在使用全局并发队列，所以我希望`sync`请求不会导致死锁。我有这段代码，它正在使用`ASIHTTPRequest`：

```
dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

[self.networkQueue cancelAllOperations];

self.networkQueue=nil;

self.networkQueue=[ASINetworkQueue queue];
}); 
```

我们的想法是尝试加速该`cancelAllOperations`部分，因为如果您在`networkQueue`.

但是当我调用这段代码时，就会出现死锁。如果我从 GCD 中取出这个块并在主线程上运行它，运行时会有延迟`cancelAllOperations`，但它确实完成而没有死锁。然而，当在这个 dispatch 内部时，应用程序会冻结，iOS 最终会终止应用程序。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:57:18.650

你这有点不对。

使用`dispatch_sync()`将 Block 排入您已经在其上运行的串行队列可以保证死锁。

使用`dispatch_sync()`将 Block 排入您已经在其上运行的*并发队列**很可能*会死锁。您依赖队列几乎立即将同步块出列，这可能会或可能不会发生，具体取决于可用资源。

您似乎也误解了队列提供的并发性的性质。提交`[self.networkQueue cancelAllOperations];`到并发队列不会加快它的速度——该方法调用不会被分割成队列上的各种工作单元。相反，您提交的整个 Block —— 所有三行—— 是队列的一个单元。它可以与您提交的其他块同时运行，但它*本身*不能利用任何并发性。您必须自己拆分工作并将每个单元作为单独的块提交 - 例如，发送`cancel`到 上的每个操作`NSOperationQueue`。

您很可能应该`dispatch_async()`为此使用。

# javascript - 改进js代码去除全局变量和函数

> ID：12032453
> 
> 赞同：1
> 
> 时间：2012-08-20T04:56:56.003
> 
> 标签：javascript, jquery, internet-explorer-8, refactoring

我有一段 js 代码，我真的很想改进，但不知道如何改进。下面的工作版本有一个全局变量和一个单独的函数声明，我认为可以合并到一个匿名函数中（代码如下：不工作）

任何帮助或指示将不胜感激。

**工作版本**：

```
var Data = {}; // would like to remove the global variable

function callBack() {
    $.ajax({
        url: "http://host/callBacks/script.js",
        //get and execute Script to process json data below
        dataType: "script"
    });
}

$(document).ready(function() {
    $.ajax({
        type: "Get",
        url: "http://host/data/json/",
        success: function(json) {
            Data = json; // Would like to just call the callback here
            callBack(Data);
        },
        error: function() {
            alert("error");
        }
    });
});

// Script which gets loaded from callBack
(function(Data) {
    var json = $.parseJSON(Data);
    $.each(json, function(i, v) {
        alert(v);
    });
})(Data); 
```

**所需代码：不工作**

```
// Error: Length is null or not an object. In jQuery script

var Data = {}; // Ideally would like to remove this from global scope if possible

$(document).ready(function() {
    $.ajax({
        type: "Get",
        url: "http://host//data/json/",
        success: function(Data) {
            $.ajax({
                url: "http://host/callBacks/script.js",
                dataType: "script"
            });
        },
        error: function() {
            alert("error");
        }
    });
// Error: Length is null or not an object. In jQuery script 
```

更新：根据 adeneo 的回答：仍然需要全局 Data = {}; 因为返回的立即执行脚本作为参数我想

```
var Data = {};

$(document).ready(function() {
    function doAjax() {
        return $.ajax({
            type: "GET",
            url: "http://host/data/json/"
        });
    }

    var XHR = doAjax();
    XHR.done(function(data) {
        Data = data; // <--- If I remove this I get Error:'length' is not or not an object
        $.ajax({
            url: "http://host/callBacks/script.js",
            dataType: "script"
        });
    }).fail(function() {
        alert("error");
    });
}); 
```

不过似乎还不错。可能应该提到我正在 IE 8 中对此进行测试。约束。更新的标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T05:04:07.330

```
$(function() {
    function doAjax() { //put inside function
        return $.ajax({ //return deffered object
            type: "GET",
            url: "/data/json/" //X domain not supported
        });
    }

    var XHR = doAjax();  //do ajax call
    XHR.done(function(data) { // use deffered object
        var json = $.parseJSON(data); //why would you need to get an external script just to parse some JSON?
        $.each(json, function(i, v) {
            alert(v);
        });
    }).fail(function() {
        alert("error");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:31:14.347

怎么样：

```
(function () {

    var myData_andMethod = {
        data : {},
        method : function (data) { this.data = JSON.parse(data); }
    };

    $.ajax({success : (function (obj) {
            var callback = obj.method.bind(obj);
            return function (data) {
                callback(data);
            };
        }(myData_andMethod)) //, error : function... url:"".....
    });
    //attach events here.
}()); 
```

你现在有 0 个全局的东西。
除了现在你必须确保你对数据做一些事情，一旦你的回调触发（或者它会永远消失，你永远不能再次访问它），或者你需要将它发送到一些在已知范围内的函数（全局或您的应用程序的一部分或其他...），或将其粘贴在可公开访问的 var 中**，**以便您***可以***在关闭封闭后访问数据，以及所有回调回来。

甚至像将对象发送到将`myData_andMethod`对象存储在其他位置的其他函数一样简单......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:04:46.053

您可以将全局变量和相关函数管理到一个类中，并从中创建一个对象

```
$(document).ready(function(){
    // Your code here !
}); 
```

# html - 只拍一张 网站客户端

> ID：12032456
> 
> 赞同：0
> 
> 时间：2012-08-20T04:57:31.430
> 
> 标签：html, css, parsing, geektool

我正在尝试从我的 Halo 角色中获取一些统计数据到我的桌面上。现在，我有一个 geektool 脚本，可以将[服务记录页面](http://halo.xbox.com/en-us/Career/ServiceRecord?gamertag=Cosssta)转换为 .png，然后将其放在我的桌面上。但是，我希望它只是显示***div class="summary-details"***

最好的方法是什么？我正在考虑编写某种 python 脚本来解析页面，复制必要的样式和内容部分，然后每 15 分钟左右创建一个新的 html 文档。但是，我做了一些研究，了解到不建议使用正则表达式进行解析。我应该用什么来解析页面？我更喜欢为 python 使用一些东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:00:33.240

[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)非常适合解析 HTML。`div`但是，要制作出出现在网站上的图像并不容易。

# c++ - 提升线程开销

> ID：12032457
> 
> 赞同：3
> 
> 时间：2012-08-20T04:57:44.707
> 
> 标签：c++, multithreading, performance, threadpool, boost-thread

在下面这个简单的程序中，我发现 boost 线程开销有三个数量级的时序开销。有没有办法减少这种开销并加快`fooThread()`通话速度？

```
#include <iostream>
#include <time.h>
#include <boost/thread.hpp>
#include <boost/date_time.hpp>
typedef uint64_t tick_t;
#define rdtscll(val) do { \
    unsigned int __a,__d; \
    __asm__ __volatile__("rdtsc" : "=a" (__a), "=d" (__d)); \
        (val) = ((unsigned long long)__a) | (((unsigned long long)__d)<<32); \
    } while(0)

class baseClass {
 public:
   void foo(){
             //Do nothing 
        }
       void threadFoo(){
          threadObjOne = boost::thread(&baseClass::foo, this);
              threadObjOne.join();
   }

 private:
   boost::thread threadObjOne;
 };

int main(){
   std::cout<< "main startup"<<std::endl; 
   baseClass baseObj; 
   tick_t startTime,endTime;
       rdtscll(startTime);
   baseObj.foo();
   rdtscll(endTime);
   std::cout<<"native foo() call takes "<< endTime-startTime <<" clock cycles"<<std::endl;
   rdtscll(startTime);
   baseObj.threadFoo();
       rdtscll(endTime);
       std::cout<<"Thread foo() call takes "<< endTime-startTime <<" clock cycles"<<std::endl;  
  } 
```

您可以编译它，`g++ -lboost_thread-mt main.cpp`这是我机器中的示例输出：

```
main startup
native foo() call takes 2187 clock cycles
Thread foo() call takes 29630434 clock cycles 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T06:26:02.017

你真正想要的是一个线程池：

```
#include "threadpool.hpp"

int main()
{
    boost::threadpool::pool threadpool(8);  // I have 4 cpu's
                                            // Might be overkill need to time
                                            // to get exact numbers but depends on
                                            // blocking and other factors.

    for(int loop = 0;loop < 100000; ++loop)
    {
        // schedule 100,000 small tasks to be run in the 8 threads in the pool
        threadpool.schedule(task(loop));
    }

    // Destructor of threadpool
    // will force the main thread to wait
    // for all tasks to complete before exiting
} 
```

# android - 如何调整与 ScrollView 的交互，以免用户意外滚动到错误的方向？

> ID：12032464
> 
> 赞同：7
> 
> 时间：2012-08-20T04:58:44.473
> 
> 标签：android, scrollview

我们有一个具有滚动视图的应用程序，其中包含可以分页的项目（左+右）。

我们发现用户在尝试滑动（左+右）时会不断滚动（向上+向下），尤其是在单手使用手机并用拇指滑动时。

通过物理实验，向上+向下的动作似乎比我们想要的更早开始，即截止点似乎是

> |dy| > |dx| => 上下动作
> 
> |dy| < |dx| => 左右动作

我想知道是否可以更改滑动动作，以便我们仅在 dy > 1.4*dx 时向上和向下滚动，即使攻角在垂直平面上显着增加。

我希望以上是有道理的。

我在想我可能需要拦截这些手势，并且只通过那些符合我对基础视图的更严格标准的手势。

# c# - 使用 ScriptManager.RegisterStartupScript 从代码后面调用 javascript 方法

> ID：12032466
> 
> 赞同：2
> 
> 时间：2012-08-20T04:59:35.440
> 
> 标签：c#, javascript, asp.net

我在我的内容页面上使用 Ajax Toolkit。我有一个 Javascript 代码，我想从使用`ScriptManager.RegisterStartupScript`.

javaScript 代码是：-

```
<script type="text/javascript">
   function disp_confirm() {
       var r = jConfirm("Your Shift End ! Do you still want to Continue ? ")
       if (r == true) {
           jAlert("You pressed OK!")
       }
       else {
           jAlert("You pressed Cancel!")
       } 
```

如何`disp_confirm()`使用 C# 从后面的代码中调用 javascript 的这种方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T08:27:52.550

试试这个

```
ScriptManager.RegisterStartupScript(Page,GetType(),"disp_confirm","<script>disp_confirm()</script>",false) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-05T09:02:41.190

```
 System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, typeof(System.Web.UI.Page), "Script", "myFun();", true); 
```

这对我有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-25T11:48:49.393

如果使用 ajax 工具包中的 Asp.net UpdatePanel 控件，那么我们需要使用 ScriptManager.RegisterStartupScript

代码：

```
ScriptManager.RegisterStartupScript(GetType(), "Javascript", "javascript:disp_confirm(); ", true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T16:41:14.353

简而言之，如果不先刷新页面以考虑您注入的 javascript 代码，您就无法从代码隐藏中触发 javascript。

基本上，使用RegisterStartupScript，你告诉asp 在页面加载时注入一些javascript。但如果您需要动态调用 javascript 函数或变量，这将无济于事。

您可以从我的示例中获得什么：我有一个 div 覆盖了 ASP 控件，我希望从中运行 javascript 和代码隐藏。div 的 onClick 方法和日历的 OnSelectionChanged 事件都以这种方式触发。

在这个例子中，我使用了一个 ASP 日历控件，并且我通过 javascript 和代码隐藏来控制它：

前端代码：

```
 <div onclick="showHideModal();">
            <asp:Calendar 
                OnSelectionChanged="DatepickerDateChange" ID="DatepickerCalendar" runat="server" 
                BorderWidth="1px" DayNameFormat="Shortest" Font-Names="Verdana" 
                Font-Size="8pt" ShowGridLines="true" BackColor="#B8C9E1" BorderColor="#003E51" Width="100%"> 
                <OtherMonthDayStyle ForeColor="#6C5D34"> </OtherMonthDayStyle> 
                <DayHeaderStyle  ForeColor="black" BackColor="#D19000"> </DayHeaderStyle>
                <TitleStyle BackColor="#B8C9E1" ForeColor="Black"> </TitleStyle> 
                <DayStyle BackColor="White"> </DayStyle> 
                <SelectedDayStyle BackColor="#003E51" Font-Bold="True"> </SelectedDayStyle> 
            </asp:Calendar>
        </div> 
```

代码隐藏：

```
 protected void DatepickerDateChange(object sender, EventArgs e)
        {
            if (toFromPicked.Value == "MainContent_fromDate")
            {
                fromDate.Text = DatepickerCalendar.SelectedDate.ToShortDateString();
            }
            else
            {
                toDate.Text = DatepickerCalendar.SelectedDate.ToShortDateString();
            }
        } 
```

# java - Spring Security 什么时候记得我处理 cookie？

> ID：12032468
> 
> 赞同：1
> 
> 时间：2012-08-20T05:00:19.167
> 
> 标签：java, cookies, spring-security, remember-me

春季安全 3.1.1

所以我做了一个自定义的记住我服务，它扩展了基于默认令牌的记住我服务，只是为了检查它是否被调用。

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices;

public class CustomTokenBasedRememberMeService extends TokenBasedRememberMeServices {

    @Override
    protected int calculateLoginLifetime(HttpServletRequest request, Authentication authentication) {
        System.out.println("COOKIE: Process1!");
        return super.calculateLoginLifetime(request, authentication);
    }

    @Override
    protected boolean isTokenExpired(long tokenExpiryTime) {
        System.out.println("COOKIE: Process2!");
        return super.isTokenExpired(tokenExpiryTime);
    }

    @Override
    protected String makeTokenSignature(long tokenExpiryTime, String username, String password) {
        System.out.println("COOKIE: Process3!");
        return super.makeTokenSignature(tokenExpiryTime, username, password);
    }

    @Override
    protected String retrievePassword(Authentication authentication) {
        System.out.println("COOKIE: Process4!");
        return super.retrievePassword(authentication);
    }

    @Override
    protected String retrieveUserName(Authentication authentication) {
        System.out.println("COOKIE: Process5!");
        return super.retrieveUserName(authentication);
    }

    @Override
    protected UserDetails processAutoLoginCookie(String[] cookieTokens, HttpServletRequest request, HttpServletResponse response) {
        System.out.println("COOKIE: Process6!");
        return super.processAutoLoginCookie(cookieTokens, request, response);
    }    

    @Override
    public void onLoginSuccess(HttpServletRequest request, HttpServletResponse response, Authentication successfulAuthentication) {
        System.out.println("COOKIE: Process7!");
        super.onLoginSuccess(request, response, successfulAuthentication);
    }
} 
```

当我登录时，它会打印出来：

```
INFO: COOKIE: Process7!
INFO: COOKIE: Process5!
INFO: COOKIE: Process4!
INFO: COOKIE: Process1!
INFO: COOKIE: Process3! 
```

这意味着它调用了 onLoginSuccess()、retrieveUserName()、retrievePassword()、calculateLoginLifetime() 和 makeTokenSignature()。

浏览器已接受 cookie，但从未处理过。即使在我删除了会话、重新启动浏览器等之后。它从未被处理过，我认为 processAutoLoginCookie 对此负责，但它也从未被调用过。

Spring Security 处理 cookie 的条件是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:14:02.433

在您的情况下，您使用 TokenBasedRememberMeServices。处理发生在**父级**的**AbstractRememberMeServices**中。它发生在它的 autoLogin() 方法上。

此方法由 RememberMeAuthenticationFilter.doFilter() 调用。过滤器将 rememberServices 保留为成员并调用其 autoLogin()。所以不管你是使用 PersistentTokenBasedRememberMeServices 还是使用 TokenBasedRememberMeServices 都没有关系，Cookie 处理是相同的，由父级处理。

# image - 8位PNG和32位的区别？

> ID：12032473
> 
> 赞同：4
> 
> 时间：2012-08-20T05:01:06.533
> 
> 标签：image, png

我有一个完全相同纹理的 PNG，一个是 8 位，另一个是 32 位。在我看来，它们看起来完全一样，没有质量变化。有人可以告诉我两者之间有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T05:06:05.563

8 位图像每个像素使用 1 个字节，而 32 位图像每个像素使用 4 个字节。颜色位深是指用来表示单个像素颜色的位数。更多位意味着可以表示更多的颜色。

这篇维基百科文章可能会提供更多信息和差异的视觉比较。[http://en.wikipedia.org/wiki/Color_depth](http://en.wikipedia.org/wiki/Color_depth)

PNG 图像还可以指定颜色的调色板，这也可能是 8 位/32 位所指的颜色。在这种情况下，如果它指的是调色板，那么第一张图片和第二张图片之间可能没有视觉差异。同样，维基百科有更多信息： [http ://en.wikipedia.org/wiki/Portable_Network_Graphics#Color_depth](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Color_depth)

如果不使用索引调色板，则图像之间可能存在细微的视觉差异。但是，正如 pst 在下面的评论中所说，它们看起来可能完全相同。

# python - 创建一个装饰器类？

> ID：12032481
> 
> 赞同：0
> 
> 时间：2012-08-20T05:02:26.390
> 
> 标签：python, class, decorator

我一直在阅读和学习装饰器及其在 python 中的使用。我想我会尝试为我一直在研究的 python 脚本创建一个装饰器。根据我的阅读，我知道应该有很多方法可以使用我拥有的特定代码来做到这一点。

至今：

```
#! /usr/bin/env python
import mechanize
from BeautifulSoup import BeautifulSoup
import sys
import sqlite3

## create the Decorator class ##

class Deco:
## initialize function and pass in the function as an argument ##
    def __init__(self,func):
        self.func = func
## use the built in __call__ method to run when the decorator is called ##
## I having issues knowing what the proper to pass the function in as an argument ##
    def __call__(self,func):
## right here I going to call the Vocab().dictionary() method ##
        self.func
## I can have the Vocab method run after I don't have a preference ##
## this decorator is going to find the number of tables and entries in the ##
## database with every call ##
        conn = sqlite3.connect('/home/User/vocab_database/vocab.db')
        with conn:
            cur = conn.cursor()
            cur.execute("SELECT name FROM sqlite_master WHERE type='table'")
            total = cur.fetchall()
            print "You have %d tables " % len(total)
            cur.execute("SELECT * FROM %s" % (total[0][0],))
            ent = cur.fetchall()
            print "You have %d entries" % len(ent)

class Vocab:
    def __init__(self):
        self.word = sys.argv[1] 
        self.def_count = 1
        self.query = {}

    @Deco        
    def dictionary(self,word):
        br = mechanize.Browser()
        response = br.open('http://www.dictionary.reference.com')
        br.select_form(nr=0)
        br.form['q'] = word
        br.submit()
        definition = BeautifulSoup(br.response().read())
        trans = definition.findAll('td',{'class':'td3n2'})
        fin = [i.text for i in trans]
        for i in fin: 
            self.query[fin.index(i)] = i
        self.create_database()
        self.word_database()
        return self.query

    def create_database(self):
        con = sqlite3.connect('/home/oberon/vocab_database/vocab.db')
        with con:
            cur = con.cursor()
            cur.execute("CREATE TABLE IF NOT EXISTS Words(vocab_id INTEGER PRIMARY KEY, vocab TEXT)")
            cur.execute("CREATE TABLE IF NOT EXISTS Definitions(def_id INTEGER, def  TEXT, def_word INTEGER, FOREIGN KEY(def_word) REFERENCES Words(vocab_id))")

    def word_database(self):
        con = sqlite3.connect('/home/User/vocab_database/vocab.db')
        with con:
            spot = con.cursor()
            spot.execute("SELECT * FROM Words")
            rows = spot.fetchall() 
            spot.execute("INSERT INTO Words VALUES(?,?)", (len(rows),self.word))
            spot = con.cursor()
            spot.execute("SELECT * FROM Definitions")
            rows_two = spot.fetchall()
            for row in rows_two:
                self.def_count += 1
            for q in self.query:
                spot.execute("INSERT INTO Definitions VALUES(?,?,?)", (self.def_count,self.query[q],len(rows)))
                self.def_count += 1

print Vocab().dictionary(sys.argv[1]) 
```

在我运行这段代码之后，`Deco`打印出来，运行并在装饰器的方法中执行所有操作，但是，`Vocab().dictionary()`打印出来`None`：

```
You have 2 tables 
You have 4 entries
None 
```

我确信这里的错误不仅仅是让`Vocab().dictionary()`方法运行。如果有人可以帮助阐明是什么阻止了它正常工作，那就太好了，而且我应该与装饰师一起研究的其他任何事情都会更好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T05:16:02.593

`self.func`正如您所期望的那样（从评论来看），它没有调用该函数。要调用它，您需要执行`self.func()`. 此外，如果要包装函数以便将值返回到外部，则需要执行`return self.func()`，或存储该值并稍后返回（在您的`with`块之后）。

但是，您的代码在其他方面似乎有点可疑。例如，您`__call__`接受`func`了一个参数，但它没有被使用，而`dictionary`装饰器应该包装的方法接受一个名为的参数，该参数`word`显然应该是一个字符串。这让我觉得你误解了装饰器的工作原理。

当您`@Deco`用作装饰器时，该类将作为参数传递给要装饰的函数。`Deco`实例本身就是结果，所以在 this之后`Vocab.dictionary`是`Deco`. 当您随后调用时`Vocab().dictionary()`，您正在调用 的`__call__`方法`Deco`。因此，如果您尝试 wrap `dictionary`，您的 Deco`__call__`应该接受与接受相同的参数`dictionary`，并且应该将它们传递给`dictionary`. （这可能是您遇到错误的原因`self.func()`--- 您在`dictionary`没有参数的情况下调用，但它需要一个参数。）

# c# - 通过单击另一个按钮显示字符串集合编辑器

> ID：12032484
> 
> 赞同：1
> 
> 时间：2012-08-20T05:03:10.760
> 
> 标签：c#, winforms, .net-2.0, sharpdevelop

我在属性网格中有一个自定义属性。是否可以通过单击普通按钮而不是按通常的方式单击省略号来显示字符串集合编辑器？

![在此处输入图像描述](../Images/4a4afd680525bd73226706dbd203d676.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:52:11.363

这是一个 Visual Studio 可用性问题。以下步骤应该可以节省您的时间 -

先决条件/假设 -

1.  引脚属性窗口并通过单击“属性”文本选择“属性”属性
2.  滚动“属性窗口”，以便您可以清楚地看到“属性”属性
3.  同一表单上有多个控件。一次只能存储一个属性。

现在按照步骤 -

1.  从 Desiger 中选择要修改的控件
2.  按**F4 + F4（两次）**
3.  字符串集合编辑器将出现
4.  进行更改并单击确定
5.  选择其他控件进行修改并按照上述所有步骤操作所有控件

以上内容将节省您的时间。

让我知道这是否有帮助。

# blackberry - Phonegap 黑莓 Facebook 分享

> ID：12032489
> 
> 赞同：1
> 
> 时间：2012-08-20T05:03:54.563
> 
> 标签：blackberry, cordova, phonegap-plugins

我在 Phonegap 中为 Blackberry 使用 Childbrowser。我可以连接到 Facebook 并通过 childbrowser 分享吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:34:05.107

看看 Facebook javascript SDK：

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:22:10.810

您可以使用 childbrowser 连接到 Facebbok 并在 Facebook 上分享 Blackberry。使用 Blackberry 的 childbrowser 插件并使用链接中提供的源代码进行集成：[https](https://github.com/DrewDahlman/phonegapFacebookApp) ://github.com/DrewDahlman/phonegapFacebookApp 。

# plot - 绘图窗口没有响应

> ID：12032494
> 
> 赞同：74
> 
> 时间：2012-08-20T05:04:46.280
> 
> 标签：plot, octave, freeze

我正在使用 Windows 7 64 位。每次，我使用绘图功能，绘图窗口都会显示并成功绘制，但之后它会停止响应并且必须关闭它。

例如 ：

```
x = linspace(0,1,10)
y = x.^2
plot(x,y); 
```

奇怪的是，当绘图窗口冻结并且我必须关闭八度音阶窗口时，它们也会无响应。如果我不使用绘图功能，这不会发生。

我不知道为什么。是不是因为我使用的是 64 位版本？请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2014-09-08T21:22:46.477

问题可能是您安装 Octave 时使用的图形工具包。

要检查这一点，请输入`graphics_toolkit`Octave 命令行。

如果响应是`fltk`并且您的绘图窗口正在冻结，则将**默认工具包切换为 gnuplot**：`graphics_toolkit('gnuplot')`

测试问题是否已解决：`x=1:10; y=x.^2; plot(x,y)`

在您的 Octave 安装目录中的 octave.rc 文件中进行永久更改：

```
 On Windows:  \Octave\share\octave\site\m\startup\octaverc
    On Linux:     ~/.octaverc 
```

* * *

还是行不通？

*   如果响应为`qt`，请尝试其中一个`fltk`或`gnuplot`（其中一个可能比另一个更快）。

*   如果上述方法不起作用，您可能需要[安装/重新安装 gnuplot](https://sourceforge.net/projects/gnuplot/?source=directory)。（感谢 lukas 和 saurabh 的这种极端情况）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-03T17:14:53.153

正如 Assad Ebrahim 所写，问题出在工具包上。我在 3.8.2 版中遇到了另一个问题。gnuplot 根本不起作用。没有显示绘图窗口，我需要关闭 Octave。如果有人有同样的问题，解决方案是下载 gnuplot 并将其安装到 Octave 文件夹。它取代了旧的 gnuplot 并且新的 gnuplot 正在工作。

我感谢你的建议。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-20T05:12:43.407

哦。我的朋友向我展示了这个命令，它工作正常：

`pkg rebuild -noauto oct2mat`

该命令重新安装包，但将其标记为在启动时默认不加载。此行为现​​已更改，默认情况下不会加载新版本的 Forge 软件包。

问题是永远不应该加载包 oct2mat 。它掩盖了 Octave 核心的几个功能，所以它开始表现得很奇怪。除非您真的需要此软件包，否则最好将其删除。

oct2mat 的目的是为了弥补 Matlab 中缺少的功能，使为 Octave 编写的代码在 Matlab 中运行。如果您不需要 oct2mat，请将其删除。没有人需要安装所有的软件包，它实际上[会使您的 Octave 安装变得更糟](http://wiki.octave.org/FAQ#How_do_I_install_all_octave_packages.3F%20be%20hamrful)，例如 oct2mat。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-01-22T09:03:53.147

所以在 Windows 上，这对我有用：

**第 1 步：** 将 gnuplot 安装到`C:\Program Files (x86)\gnuplot`：

下载链接：

> [https://sourceforge.net/projects/gnuplot/](https://sourceforge.net/projects/gnuplot/)

**第 2 步：** 转到给定目录下面（考虑到您已经在 C:\ root 中安装了 Octave）：

> C:\Octave\share\octave\site\m\startup

在记事本中打开`octaverc`该目录中的文件。

**第 3 步：**

将以下行添加到文件末尾。

```
gnuplot_binary 'C:\Program Files (x86)\gnuplot\bin\gnuplot.exe'
graphics_toolkit('gnuplot') 
```

**第4步：**

保存文件并退出记事本。如果`Octave`打开也请关闭它。

**第 5 步：**

打开`Octave`并在其中输入以下命令进行检查：

```
plot([1,2,3],[4,5,6]); 
```

> **请注意，第一次渲染图表可能需要`gnuplot`5 分钟。因此，请不要尝试关闭应用程序。随后的简单绘图渲染得非常快，通常不到 1 秒。**

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-29T08:53:28.087

[阿萨德给出的答案](https://stackoverflow.com/questions/12032494/plot-window-not-responding/25733323#25733323)是绝对正确的，对我也很有效。

这只是一个例外情况。

在您输入 Octave 命令行后：`graphics_toolkit`

如果答案`qt`不是`fltk`，那么您的 PC 可能需要与 SourceForge 分开安装**gnuplot ，因为 Octave 在 W8/10 中安装时会出现一些错误。**

这是附加的链接。 [https://sourceforge.net/projects/gnuplot/?source=directory](https://sourceforge.net/projects/gnuplot/?source=directory)

您无需更改任何安装文件。

这应该工作

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-04T05:53:31.973

当我第一次测试绘制示例图形时，图形窗口出现但一到两分钟没有响应，然后图形出现了。更多的情节立即出现。操作系统：Windows 7 64 位 Octave 4.0.3 64 位。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-23T10:15:38.850

运行代码时，我使用 octave 4.2 有类似的症状（无法关闭绘图窗口，绘图需要时间才能出现）。当语句不以分号 (;) 结尾时，命令和结果将在命令窗口中打印。在我看来，命令窗口停止解释代码并等待用户按下有效键 (f,b,q) 以继续或中止执行。停止点取决于先前执行的代码和命令窗口的大小，因此这些症状的间歇性。

**解决方案：**

选项 1：转到命令窗口并按住 f（前进）

选项 2：使用分号终止语句

```
x = linspace(0,1,10);
y = x.^2;
plot(x,y); 
```

选项 3：摆弄一些命令窗口设置

希望能帮助到你

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-10T00:12:27.010

[我在 4.0.3 版中遇到了同样的问题，并且正如Assad Ebrahim 所说](https://stackoverflow.com/questions/12032494/plot-window-not-responding/25733323#25733323)，将默认工具包切换到 gnuplot对我不起作用。然后我在[Octave for Microsoft Windows](http://wiki.octave.org/Octave_for_Microsoft_Windows)中找到了一些东西：

> 当前的 octave for windows 提供了一个功能不全的 gnuplot。因此，您不能使用 gnuplot 图形工具包的全部功能

并且有如何下载和安装 gnuplot 的说明。希望对您有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-23T10:31:47.083

以下是**从 Emacs 中运行 Octave**时绘图窗口冻结的解决方案，归功于[John Lawrence](https://stackoverflow.com/users/254837/john-lawrence-aspden) Aspden和[user2699](https://stackoverflow.com/users/5754992/user2699)来自问题[How to get Octave's plot to work under emacs?](https://stackoverflow.com/questions/25436702/how-to-get-octaves-plot-to-work-under-emacs) . 它被带到这里是因为这个问题更容易找到。

该问题可能是由 Emacs octave-mode 的`--no-line-editing`开关引起的，您可以通过将其修复`M-x customize-variable RET inferior-octave-startup-args RET`并更改`--no-line-editing`为`--line-editing`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-16T12:04:05.897

我遇到了同样的问题，有时 linspace 会在命令窗口中向您显示所有结果并等待您的交互。在命令后添加`;`，或`q`在命令窗口中点击退出 `x = linspace(0,10,100);`

[![在此处输入图像描述](../Images/b16cb5043ca002f6934b786c4235601e.png)](https://i.stack.imgur.com/eh64e.png)

## 永久解决方案，已编辑

`more off`通过放入八度命令窗口来禁用屏幕输出的分页。这将防止代码等到您看到所有行。

如果您想重新打开它，请使用`more on`

[文件](https://octave.org/doc/v5.2.0/Paging-Screen-Output.html)

### 相关问题

[防止用户交互命令窗口换八度](https://stackoverflow.com/questions/32286250/prevent-user-interaction-on-command-window-for-octave)

[无法在 gui 命令窗口中停止执行](https://stackoverflow.com/questions/33006266/octave-3-8-1-cant-stop-execution-in-gui-command-window#42761024)

# batch-file - 展平目录

> ID：12032503
> 
> 赞同：2
> 
> 时间：2012-08-20T05:07:13.597
> 
> 标签：batch-file

假设如下目录结构

```
my_script.bat
Dir1
   File1.txt
Dir2
   Dir3
      File1.txt 
```

我想将它展平，以便我只有一个目录，其中每个文件名都以当前目录（我的批处理文件所在的位置）下方的所有父目录为前缀。

所以扁平化上面的列表会产生类似的东西

```
Dir1-File1.txt
Dir2-Dir3-File1.txt 
```

或者只是某种方式来识别它来自哪个文件夹，不一定要连字符。

这可以用windows批处理文件完成吗？或者也许已经有一个命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T06:13:11.767

我必须将原始想法归功于[Jacob Seleznev](https://stackoverflow.com/users/115272/jacob-seleznev)，但这是一个解决方案，其中还包括新文件名中的路径：

```
Setlocal EnableDelayedExpansion
for /r %%F in (*) do (
    set _name=%%~fF

    rem Change the path to a relative path by replacing the current folder with ""
    set _name=!_name:%cd%\=!

    rem Replace slashes with hyphens
    set _name=!_name:\=-!

    copy "%%F" ".\!_name!"
) 
```

输出：

```
Dir1-File1.txt
Dir2-Dir3-File1.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T05:20:38.620

```
for /r %F in (*) do set name=%~pfF
set name=%name:\=-%
echo %name% 
```

# python - 如何从 Python 类中的其他参数初始化字符串属性？

> ID：12032505
> 
> 赞同：0
> 
> 时间：2012-08-20T05:07:56.957
> 
> 标签：python, class

我正在尝试将两个加入 Class args 以制作另一个。下面的代码将`Name`属性输出为 a`tuple`而不是字符串。

```
# Person
class Person(ParentClass):
    def __init__(self,
            Collection = 'People',
            Firstname = '',
            Lastname = '',
            Name = '',
            **kwargs):
        self.Collection = Collection
        self.Firstname = Firstname
        self.Lastname = Lastname
        self.Name = '%s %s' % (self.Firstname, self.Lastname),
        self.__dict__.update(kwargs)

p = Person(Firstname='Foo',Lastname='Bar')  ## tuple, not string

p.Name = ('Foo', 'Bar') 
```

我试图在其中加入名字和姓氏`__init__`而不仅仅是一个属性的原因是因为`__init__`它与继承的`save_to_database`方法相关联。我希望将`Name`属性保存到数据库，但作为字符串，而不是作为元组。

任何线索都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T05:12:26.667

删除结尾的逗号。转这个...

```
self.Name = '%s %s' % (self.Firstname, self.Lastname), 
```

进入这个：

```
self.Name = '%s %s' % (self.Firstname, self.Lastname) 
```

（你实际上是在做`self.Name = 'foo',`而不是`self.Name = 'foo'`，并且`'foo',`是一个单元素元组，唯一的元素是一个字符串，而`'foo'`只是一个字符串。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:22:07.707

现在，您在构造函数运行后将 p.Name 显式设置为元组值。特别是， p.Name 会丢失您在运行时在构造函数中提供的格式

```
p.Name = ("foo", "bar") 
```

现在您的 init 函数几乎可以正确设置 P.name 了。正如 Amber 指出的那样，您需要将逗号放在 self.Name = ... 行上。如果你解决这个问题，并删除你改变 self.Name 值的代码的最后一行，我认为它会做你想做的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:23:21.357

如果你想：

1.  将属性保留`Name`为字符串，
2.  在分配 new `Name`、 set`Firstname`并将`Lastname`更改保存到 db 时，

你应该重载`__setattr()__`类的方法。

这是一个例子：[http ://code.activestate.com/recipes/389916-example-setattr-getattr-overloading/](http://code.activestate.com/recipes/389916-example-setattr-getattr-overloading/)

# app-store - 从通配符应用 ID 升级到显式应用 ID 以允许推送通知

> ID：12032507
> 
> 赞同：1
> 
> 时间：2012-08-20T05:08:04.483
> 
> 标签：app-store, wildcard, explicit, app-id, file-in-use

我有一个拥有大约 300,000 名成员的应用程序，我想向它添加推送通知。不幸的是，我最初使用通配符捆绑 ID 创建了该应用程序，`com.MyCompany.*`当我将它上传到 Apple 并在我的`plist`文件中编辑它时，我让它说`com.MyCompany.MyAppName`

现在我想添加推送通知，我必须创建一个唯一的（或 EXPLICIT）应用程序 ID，所以我尝试创建一个名为`com.MyCompany.MyAppName`...我收到此错误消息：`The bundle identifier you have specified is already in use. Please select another.`

我查看了我的应用程序 ID，我所拥有的只是`com.MyCompany.*`. 所以这不是我可以删除的任何东西。该消息必须指的是我的应用程序的实时版本，该应用程序已经使用通配符应用程序 ID...

如何将通配符应用 ID 转换为显式应用 ID，以便向成员发送推送通知？

我现在已经在网上搜索了大约 2 个小时，每个人似乎都说您所要做的就是创建一个新的应用 ID，该 ID 与您当前的应用版本具有相同的捆绑 ID...所以我猜此错误消息`The bundle identifier you have specified is already in use. Please select another.`是直到最近才存在的新错误消息，因为似乎没有其他人遇到过此问题...

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:36:52.197

2012 年 12 月，Apple 自动将我所有的通配符转换为显式 ID。我不必打电话给他们！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T18:31:32.147

您不能在捆绑标识符中使用“MyCompany”，您需要使用 com.apple.preferences 或 com.apple.maps 之类的东西。公司必须是您自己的名字或公司名称，所以我的名字是 com.oogemaflip100.preferences 或 com.oogemaflip100.maps。

# c++ - 是否可以在为 Solaris SPARC 生成二进制文件的 Intel 机器上编写 QT C++ 项目？

> ID：12032520
> 
> 赞同：1
> 
> 时间：2012-08-20T05:10:42.677
> 
> 标签：c++, solaris, cross-compiling, intel, sparc

是否可以在 Intel 上编写 C++ 应用程序，使用 QT 为 Solaris SPARC 架构生成可执行二进制文件？

我已经下载了 QT 4.7.4 并打开了一些演示项目，例如“地址簿示例”，并在我的 Mac 上执行了构建/执行。它似乎运行没有问题，但是当我尝试将目标更改为“Desktop QT 4.8.1”以外的其他内容时，没有选择 SPARC 目标机器的选项。

我是否完全认为我可以使用 QT 从 intel 交叉编译到 sparc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:13:20.627

是的，您可以交叉编译。google 里有很多资源[http://www.cis.upenn.edu/~milom/cross-compile.html](http://www.cis.upenn.edu/~milom/cross-compile.html)

# jquery - 如何使用 Jquery 在列表的第一个位置附加一个列表项

> ID：12032521
> 
> 赞同：18
> 
> 时间：2012-08-20T05:10:42.927
> 
> 标签：jquery

如何使用 Jquery 在列表的第一个位置附加一个列表项？

```
<ul id="mylist">
  <li>First</li>
  <li>Second</li>
  <li>Third</li>
  <li>Fourth</li>  
</ul> 
```

是否可以在第一次`<li>`使用 jquery 之前附加一个列表项。我尝试`$('#mylist li:eq(1)').before("<li></li>")`。但它不起作用？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-20T05:12:37.150

```
$('#mylist').prepend('<li></li>') 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-20T05:11:53.313

您正在选择第二个`li`元素，试试这个：

```
$('#mylist li:eq(0)').before("<li>first</li>");
//or $('#mylist li:first')... 
```

或者你可以使用`prepend`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-10T09:56:27.430

这个片段将解决这个问题。或者去[链接](http://api.jquery.com/prepend/)了解更多。

```
$('#mylist').prepend('<li>New Item</li>');
//use jQuery's prepend method. 
```

```
$('button').on('click',function(){
  $('#mylist').prepend('<li>New Item 1 added</li>')
  });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<html>

  <body>
  <ul id="mylist">
  <li>First Item</li>
  <li>Second Item</li>
  <li>Third Item</li>
  <li>Fourth Item</li>  
  </ul>  
  <button> click to add first li</button>
  </body>

</html>
```

# c# - 如何在linq中获得最大值

> ID：12032522
> 
> 赞同：-2
> 
> 时间：2012-08-20T05:10:46.383
> 
> 标签：c#, linq, entity-framework

我在数据库中有一些表。`INV`, `LIB`,`TRAN_TT1`数据类型 3 表中的所有字段都是字符串。我写这段代码

```
 var m = new MaterialModelContainer();
            var list = (from inv in m.INVs
                        where inv.NEW_QTY == "000000"
                        join lib in m.LIBs on inv.MESC equals lib.MESC
                        join tt1 in m.TRAN_TT1 on inv.MESC equals tt1.MESC4
                        where tt1.TYPE2 == "60" && tt1.QTY == "000000" 
                       select new
                                   {
                                       inv.MESC,
                                       lib.LINE_NO,
                                       lib.UNIT_LINE,
                                       Description = lib.DES + " " + lib.PART_NO,

                                   }).ToList(); 
```

表`TRAN_TT1`有一个 ACTD 字段，我想获得最大值
我写了这段代码

```
 var m = new MaterialModelContainer();
            var list = (from inv in m.INVs
                        where inv.NEW_QTY == "000000"
                        join lib in m.LIBs on inv.MESC equals lib.MESC
                        join tt1 in m.TRAN_TT1 on inv.MESC equals tt1.MESC4
                        where tt1.TYPE2 == "60" && tt1.QTY == "000000" 
                       select new
                                   {
                                       inv.MESC,
                                       lib.LINE_NO,
                                       lib.UNIT_LINE,
                                       Description = lib.DES + " " + lib.PART_NO,
                                     ACTD=  tt1.ACTD.Max()
                                   }).ToList(); 
```

但没有工作，

请帮助我获得最大 ACTD 字段。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:28:05.880

Max 是一个聚合函数，Linq 中的聚合函数与 SQL 中的聚合函数具有相同的限制 - 如果您对其中一列使用聚合函数 - 所有其他使用列也应该在聚合函数中使用，或者您应该由它们使用 GroupBy。所以你的样本应该是这样的：

```
var m = new MaterialModelContainer();
            var list = (from x in 

                       (from inv in m.INVs
                        where inv.NEW_QTY == "000000"
                        join lib in m.LIBs on inv.MESC equals lib.MESC
                        join tt1 in m.TRAN_TT1 on inv.MESC equals tt1.MESC4
                        where tt1.TYPE2 == "60" && tt1.QTY == "000000" 
                        select new {inv.MESC, lib.LINE_NO, lib.UNIT_LINE, Description = lib.DES + " " + lib.PART_NO, tt1.ACTD})

                        group by new {x.MESC, x.LINE_NO, x.UNIT_LINE, x.Description} into g
                        select new {g.Key.MESC, g.Key.LINE_NO, g.Key.UNIT_LINE, g.Key.Description, ACTDMax = g.Max(tt2 => tt2.ACTD) } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:16:31.167

怎么样

```
ACTD = tt1.ACTD.Max(x => x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:17:24.540

不确定，但从错误尝试

```
ACTD= ((int?) tt1.ACTD).Max() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T06:54:03.637

您可以编写此代码以获取最大 ACTD 值

```
 var m = new MaterialModelContainer();
            var list = (from x in

                            (from inv in m.INVs
                             where inv.NEW_QTY == "000000"
                             join lib in m.LIBs on inv.MESC equals lib.MESC
                             join tt1 in m.TRAN_TT1 on inv.MESC equals tt1.MESC4
                             where tt1.TYPE2 == "60" && tt1.QTY == "000000"
                             select
                                 new
                                     {
                                         inv.MESC,
                                         lib.LINE_NO,
                                         lib.UNIT_LINE,
                                         Description = lib.DES + " " + lib.PART_NO,
                                         tt1.ACTD
                                     })

                        group x by new {x.MESC, x.LINE_NO, x.UNIT_LINE, x.Description}
                        into g
                        select
                            new
                                {
                                    g.Key.MESC,
                                    g.Key.LINE_NO,
                                    g.Key.UNIT_LINE,
                                    g.Key.Description,
                                    ACTDMax = g.Max(tt2 => tt2.ACTD)
                                }
                                ).OrderBy(c=>c.MESC).ToList(); 
```

# linux - 如果服务器先关闭套接字会发生什么？

> ID：12032523
> 
> 赞同：1
> 
> 时间：2012-08-20T05:11:06.467
> 
> 标签：linux, sockets, unix, network-programming

情况如下：我有两台机器，A 和 B。A 监听一个端口 p。B 创建一个套接字 s1 并连接到 p。A 接受套接字 s2 中的连接。目前，A 和 B 可以通过套接字相互通信。

但是，如果我杀死 A 中的程序，然后在一段时间后重新启动该程序，B 不知道，因为在此期间它没有向 A 发送任何数据。现在 B 开始通过 s1 向 A 写入数据。接下来会发生什么？为什么？

实际上我发现`write`呼叫没有失败，但A仍然没有得到数据。更重要的是，如果我把 s1 放在 epoll 设备中，我发现返回的事件`epoll_wait`是`EPOLLERR | EPOLLHUP`在调用`write`. 为什么？

不幸的是，在这种情况下，它似乎丢失了数据，因为“写”调用没有失败，但 A 无法获取数据。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:29:32.380

1.  当您杀死已建立套接字的程序时，它将向所有另一端发送 RST。所以 B 应该在 s1 上收到 RST，并且以后对 s1 的所有调用都将返回错误。但是有些防火墙可能会过滤掉RST包，你可以用tcpdump查看RST包。

2.  如果 B 在步骤 1 中没有收到 RST 数据包，当它继续向 A 发送其他数据包（写入）时，A 将回复 RST 数据包，并且一旦 B 收到此 RST，以后对 B 的所有调用都将返回错误。

3.  如果 B 在 step2 也没有收到 RST 数据包，在一定时间后（写超时），B 将断开连接，并且以后对 B 的所有调用都将返回错误。

可以看到，write调用很少返回错误，如果发送了数据包就返回成功，不关心远端是否收到数据包。

在您的情况下，您不会在调用 epoll_wait 后立即获得 EPOLLHUP，而是在收到 RST 或写入超时后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T05:48:14.043

如果套接字的另一端已关闭，它实际上是可读的，并且`read`（或`recv`）调用将返回零，表示另一端的套接字已正常关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T05:20:31.417

您写入了断开连接的流（即使您的机器不知道它已断开连接。既然您说“接受连接”，我假设您正在两台机器之间建立 TCP 连接。）

如果您在谈论 UDP，则没有 Listen/Connect/Accept，并且数据将被发送到在 addr/port 上侦听的任何内容。但你不是在谈论UDP。[编辑以阐明结论：]您正在将数据写入死连接（并且在某些时候很明显连接已死，现在您已尝试使用它）。写入数据不会告诉你对方是否收到数据，成功告诉你它已经将要发送的数据排队。

# php - 更改 codeigniter 迁移的数据库连接

> ID：12032524
> 
> 赞同：0
> 
> 时间：2012-08-20T05:11:32.363
> 
> 标签：php, codeigniter

我想更改 codeigniter 迁移的数据库连接。

我的默认数据库是 DB1，但我想更改与 DB2 的连接。

我怎样才能做到这一点？默认编码如下。

```
defined('BASEPATH') OR exit('No direct script access allowed');

class Migration_Add_blog extends CI_Migration {

public function up()
{
    $this->dbforge->add_field(array(
        'blog_id' => array(
            'type' => 'INT',
            'constraint' => 5,
            'unsigned' => TRUE,
            'auto_increment' => TRUE
        ),
        'blog_title' => array(
            'type' => 'VARCHAR',
            'constraint' => '100',
        ),
        'blog_description' => array(
            'type' => 'TEXT',
            'null' => TRUE,
        ),
    ));

    $this->dbforge->create_table('blog');
}

public function down()
{
    $this->dbforge->drop_table('blog');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:48:48.880

dbforge 库使用与 CI 的其他数据库部分相同的连接。由于只有一个连接，因此您必须更改该连接的数据库。如果你使用的是 MYSQL，你可以用两个[`use database`调用](http://dev.mysql.com/doc/refman/5.0/en/use.html)来包围你的代码：

```
// switch to the second db
$this->db->query('use DB2');

// put DB2 stuff here

// switch back    
$this->db->query('use DB'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T09:45:06.053

您可以使用

```
$this->load->database(); 
```

用于更改 DB-Connection。在 config/database.php 中，您可以定义多个 DB-Connections。例如，要更改为系统数据库，请使用以下命令：

```
$this->load->database('system'); 
```

我将它用于迁移并将命令放在我的 Migrate-Controller 的构造函数中。

```
class Migrate extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        $this->load->database('system'); //Use the system-Connection for DB-Manipulation
        $this->load->library('migration');
    }

    /**
     * Migrate to latest or current version
     * @return void
     */
    public function index()
    {
        ... 
```

# javascript - 用于绘制工作流程图的 JavaScript 框架

> ID：12032528
> 
> 赞同：6
> 
> 时间：2012-08-20T05:12:23.220
> 
> 标签：javascript, extjs, drawing, uml, relationship

有谁知道用于开发类似工作流的图表的任何 JavaScript 框架？我正在寻找方法来显示对象之间的关系并能够在浏览器中拖动对象。我正在寻找类似于 Microsoft Visio 功能的东西。

有人用 Ext JS 框架做过类似的事情吗？这就是我到目前为止所看到的一切。
[http://kforner.github.com/extjs-dag-drawer/example.html](http://kforner.github.com/extjs-dag-drawer/example.html)

而且我希望能够像这样拖动组件。
[http://raphaeljs.com/graffle.html](http://raphaeljs.com/graffle.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T05:31:20.703

你的意思是像[http://www.draw.io/](http://www.draw.io/)？

这个基于浏览器的工具让您可以绘制 UML 样式图（和工作流程图），然后以您想要的格式导出/保存。

如果不满足您的需要，搜索 UML 工具将帮助您找到其他工具。

对于JS库本身，上面使用[http://www.jgraph.com/mxgraph.html](http://www.jgraph.com/mxgraph.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T10:37:12.043

我可以推荐基于 RaphaelJS 的 Graphiti [。](http://draw2d.org/graphiti/jsdoc/#!/example)在这种情况下，您拥有 raphaelJS API 和社区的强大功能以及比 graffle 演示页面更好的对象/API 处理。

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-24T10:03:43.780

如果您需要 javascript 框架，请查看：http: [//jsplumbtoolkit.com](http://jsplumbtoolkit.com)

# javascript - 如何清除 onpaste 方法中的文本区域？

> ID：12032531
> 
> 赞同：0
> 
> 时间：2012-08-20T05:12:42.217
> 
> 标签：javascript

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function onPasteMe(pObj) 
{     
// validate  pasted text     
var input  = window.clipboardData.getData('Text'); 
document.getElementById("txt1").value = input ;
var m= stripCharacters(input,pObj) ;
    if(m)
    {
 input=input.replace(/[\s]/g,'\r'); 
 var n=input.split(/\r/g).length; 
 alert(n);
    }
  }

function stripCharacters(input,pObj) {
var r = new RegExp("[^\\s\\r\\t\\n0-9]", "g");
var find = input.match(r) ;      
if(find)
   {   
 alert('String contains both alpha-numeric or your pre-defined special characters!');  
 pObj.innerHTML = ""; 
 return false; 
   }
 return true; 
}
</script>
</head>
<body>
<textarea cols=19 id = "txt1" onPaste="onPasteMe(this);"></textarea>
</body>
</html> 
```

如果我在文本区域中粘贴数字，如 1233445，则粘贴的值应显示在文本区域中，但如果我粘贴诸如 assdfsdf 123243' 或 2313adsdad 之类的值，则文本区域应自动清除？？？

```
i used below codes but its not worked for me please help,
pObj.innerHTML = "";
document.getElementById("txt1").value =""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:53:31.840

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function onPasteMe(pObj) 
{     
// validate  pasted text     
var input  = window.clipboardData.getData('Text'); 
document.getElementById("txt1").value = input ;
var m= stripCharacters(input,pObj) ;
    if(m)
    {
 input=input.replace(/[\s]/g,'\r'); 
 var n=input.split(/\r/g).length; 
 alert(n);
    }
    return false;
  }

function stripCharacters(input,pObj) {
var r = new RegExp("[^\\s\\r\\t\\n0-9]", "g");
var find = input.match(r) ;      
if(find)
   {   
 alert('String contains both alpha-numeric or your pre-defined special characters!');  
 pObj.value = ""; 
 return false; 
   }
 return true; 
}
</script>
</head>
<body>
<textarea cols=19 id = "txt1" onPaste="return onPasteMe(this);"></textarea>
</body>
</html> 
```

1.  您应该使用 pObj.value="" 清空文本区域。
2.  您需要为 onPaste() 函数返回 false。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T05:15:31.363

首先，不完全支持 onPaste
参考：[JavaScript get clipboard data on paste event (Cross browser)](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)

# c++ - C++ 子集总和 2^n/递归错误/澄清

> ID：12032536
> 
> 赞同：16
> 
> 时间：2012-08-20T05:13:42.153
> 
> 标签：c++, algorithm, subset

这不是家庭作业，我没有钱上学，所以我一边在高速公路上的收费站轮班工作，一边自学（长夜，顾客很少）。

我正在尝试实现一个简单的子集求和算法，给定一个整数数组，返回它的子集，其总和等于所需的总和，报告找到它需要多少次调用。

我使用 Collections 在 Java 中做了一个实现，但那是非常臃肿的代码，即使我能够返回所有集合加起来达到所需的数字以及告诉函数在第一次匹配时停止或不停止。

我对这段代码的问题如下：而不是在 2^n 时间内运行（当没有找到结果时，这对于这样的实现是正确的，不是吗？）它在 [2^(n+1)]- 中运行1次; O(2^n) 正如评论所指出的那样。我可以明白为什么我检查 (runningTotal == targetTotal) 比我能做的更深层次，本质上是我自己增加了额外的深度，不是吗？我试图尽可能干净地模拟基本案例，如果您检测到任何“代码气味”，请告诉我。我一看到（runningTotal + 考虑）== targetTotal 就应该打破吗？

注意：我认为这不属于“代码审查”，因为我询问的是特定代码行，而不是整体方法（如果我需要更改方法，就这样吧，我这样做是为了学习）。

这是我的尝试（除了上面提到的缺乏优化之外，这是“可以通过”的 C/C++ 吗？）：

```
#include <iostream>
using namespace std;
bool setTotalling(int chooseFrom[], int nChoices, int targetTotal,
    int chooseIndex, int runningTotal, int solutionSet[], int &solutionDigits,
    int &nIterations) {
  nIterations++;
  if (runningTotal == targetTotal) {
    return true;
  }
  if (chooseIndex >= nChoices) {
    return false;
  }
  int consider = chooseFrom[chooseIndex];
  if (setTotalling(chooseFrom, nChoices, targetTotal, chooseIndex + 1,
      runningTotal + consider, solutionSet, solutionDigits, nIterations)) {
    solutionSet[solutionDigits++] = consider;
    return true;
  }
  if (setTotalling(chooseFrom, nChoices, targetTotal, chooseIndex + 1,
      runningTotal, solutionSet, solutionDigits, nIterations)) {
    return true;
  }
  return false;
}
void testSetTotalling() {
  int chooseFrom[] = { 1, 2, 5, 9, 10 };
  int nChoices = 5;
  int targetTotal = 23;
  int chooseIndex = 0;
  int runningTotal = 0;
  int solutionSet[] = { 0, 0, 0, 0, 0 };
  int solutionDigits = 0;
  int nIterations = 0;
  cout << "Looking for a set of numbers totalling" << endl << "--> "
      << targetTotal << endl << "choosing from these:" << endl;
  for (int i = 0; i < nChoices; i++) {
    int n = chooseFrom[i];
    cout << n << ", ";
  }
  cout << endl << endl;
  bool setExists = setTotalling(chooseFrom, nChoices, targetTotal, chooseIndex,
      runningTotal, solutionSet, solutionDigits, nIterations);
  if (setExists) {
    cout << "Found:" << endl;
    for (int i = 0; i < solutionDigits; i++) {
      int n = solutionSet[i];
      cout << n << ", ";
    }
    cout << endl;
  } else {
    cout << "Not found." << endl;
  }
  cout << "Iterations: " << nIterations << endl;
}
int main() {
  testSetTotalling();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:50:58.190

关键是如何计算“迭代”。假设您有一个简单的案例，`n=1`目标总和不为零，而不是您拥有的元素。

您调用该函数，这会立即增加计数器，然后您到达分叉处，该函数调用自身两次（一次考虑元素，一次不考虑元素）。这些调用中的每一个都将计为 1，因此您最终的总计数器为 3。

我看不出这有什么不妥...

如果剩余选择的数量为零，您可以添加特殊检查以重复测试并避免调用，但这需要**重复**检查。仅在递归调用位置进行结束检查不会考虑可以直接使用零选择调用函数。基本上你是“内联”0级......但是为什么停在0级而不内联1级呢？

如果您正在寻找加速，请注意（假设所有元素都是非负数）如果您知道添加所有剩余的可用数字仍然不足以达到目标，那么您可以避免检查所有可能的子集。通过计算一次从给定索引到可用元素列表末尾的所有剩余数字的总数（这是一个`O(n)`计算），您可以节省（2^remaining）次迭代。此外，如果当前的总和已经太大，那么考虑添加其他元素也没有意义。

```
if (targetTotal > runningTotal)
    return false; // We already passed the limit
if (targetTotal - runningTotal > sumOfAllFrom[choseIndex])
    return false; // We're not going to make it 
```

如果您还按降序对元素进行排序，则上述优化可以节省很多。

# html5-canvas - 如何使使用 FileReader 上传到可拖动的 html 画布的图像？

> ID：12032537
> 
> 赞同：0
> 
> 时间：2012-08-20T05:13:41.327
> 
> 标签：html5-canvas

我在这个网站上阅读了一些优秀的帖子和 Simon Sarris 的 [examples][1]，但我碰壁了。我正在修改其中一个示例以拖放我上传的图像。它适用于第一张图像，但不适用于第二张。有没有人见过使用 FileReader 将文件上传到画布，然后拖放到那里的任何示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:24:43.980

有两个不同的问题

使用拖放将文件上传到画布

*   [https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Using_object_URLs_to_display_images](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Using_object_URLs_to_display_images)

在画布周围拖放图像

*   [http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/)

# jquery - 带阴影效果的菜单

> ID：12032543
> 
> 赞同：4
> 
> 时间：2012-08-20T05:14:29.003
> 
> 标签：jquery, html, css

请看下图。我想以以下样式显示一些导航项目。

![风格化的导航项目](../Images/8992967a9b56282a017306a50312dea0.png)

我可以显示纹理框[矩形框]。我无法在顶部和底部显示阴影效果。阴影效果取决于文本大小。这可能吗？关于如何进行的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T05:37:37.337

您可以在伪元素上使用径向渐变来做到这一点 - [**DEMO**](http://dabblet.com/gist/3401346)

CSS：

```
ul {
    margin: 5em auto;
    padding: 0;
    background: silver;
    text-align: center;
}
li {
    display: inline-block;
    position: relative;
    margin: 1em;
    padding: .1em 2em;
    background: #414141;
    color: white;
    text-align: center;
}
li:before {
    position: absolute;
    top: -1.3em;
    right: 0;
    bottom: -1.3em;
    left: 0;    
    background: radial-gradient(at 50% 0, rgba(0,0,0,.35), rgba(255,255,255,0)) 0 85%,
        radial-gradient(at 50% 100%, rgba(0,0,0,.3), rgba(255,255,255,0)) 0 15%;
    background-repeat: no-repeat;
    background-size: 100% .5em;
    content:'';
} 
```

**编辑**：IE9 也支持的第二个版本 - [**DEMO**](http://dabblet.com/gist/3401808)

这个在列表项上使用了两个伪元素，并要求列表项有一个子项。

CSS：

```
ul {
    margin: 5em auto;
    padding: 0;
    background: silver;
    text-align: center;
}
li {
    display: inline-block;
    position: relative;
    margin: 1em;
    text-align: center;
}
li:before, li:after {
    position: absolute;
    top: -.4em;
    bottom: -.4em;
    content:'';
}
li:before {
    z-index: 2;
    right: 0;
    left: 0;
    box-shadow: 0 0 2em -.5em #000;
}
li:after {
    z-index: 3;
    right: -2em;
    left: -2em;
    background: silver;
}
a {
    position: relative;
    display: inline-block;
    padding: .1em 1.5em;
    background: #414141;
    color: white;
    line-height: 1.6;
    text-decoration: none;
    z-index: 4;
} 
```

# search - Solr边缘ngram

> ID：12032551
> 
> 赞同：1
> 
> 时间：2012-08-20T05:16:51.607
> 
> 标签：search, solr, autocomplete, lucene

```
 <fieldType name="autocomplete_edge" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EdgeNGramFilterFactory" minGramSize="1"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType> 
```

这就是我正在做的让自动完成工作。它适用于单个单词的建议。当我输入 wh 时，它给了我所有以***** *8 开头的问题但是当查询有一个像“这样的短语”时它会搞砸什么是”，即使我已经索引了很多以什么开头的句子，也找不到结果？任何指针

# php - php中瓷砖上的卡坦号定居者

> ID：12032553
> 
> 赞同：0
> 
> 时间：2012-08-20T05:17:12.043
> 
> 标签：php, image, random, overlay

我已经开始考虑写一个卡坦克隆的定居者。我希望尽可能多地在 php (+mysql) 中处理这个问题，因为这个想法是一个基于回合制的游戏，适用于刚刚加入他们的网络兄弟的多个玩家。

我已经创建了游戏地图，除了在掷骰子时决定您是否获得资源的图块上的数字。

我认为最好的方法是在游戏开始时选择一个图块并从数据库中为其分配一个随机值（每次我们选择新的选项时都会减少选项的数量）。该值指向覆盖图块的图像。之后将图块的坐标和数据库中的值存储以供将来参考。然后重复下一个瓷砖。

这有意义吗？你们中的任何人会怎么做？正如我所说，我很高兴尽可能地将其保存在 php 中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:19:38.257

更好的做法是生成将出现在棋盘上的所有数字的集合，然后对该集合进行洗牌，然后为每个图块分配集合中的下一个数字。

这样一来，您就不必继续查找集合中还剩下哪些数字，您可以一个一个地浏览它们。

[`shuffle()`](http://www.php.net/manual/en/function.shuffle.php)一旦您创建了数字数组，您就可以使用它来执行顺序的随机化。如果您只是使用基本的 Catan 规则，则可能的数字集将始终相同，因此您可以对其进行硬编码。

# ruby-on-rails - 警告：无法验证 CSRF 令牌的真实性：使用 OmniAuth 设计

> ID：12032554
> 
> 赞同：0
> 
> 时间：2012-08-20T05:17:13.317
> 
> 标签：ruby-on-rails, security, devise, omniauth, helper

突然，我在提交表单时开始收到此错误。我所做的唯一更改是调用在 ApplicationController 中定义的方法，该方法被标记为 helper。

**应用程序/控制器/application_controller.rb**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  helper_method :is_org_admin?

  #Check if current user is Admin in current organization or not
  def is_org_admin?
    session[:current_organization].is_admin?(current_user)
  end
end 
```

是管理员吗？定义为

```
class Organization < ActiveRecord::Base
  has_many :memberships
  has_many :users, through: :memberships

  def is_admin?(user)
    member = memberships.where(user_id: user.id).first
    if member.nil?
      false
    else
      member.is_admin?
    end
  end
end 
```

is_org_admin 呢？正在从视图模板调用方法

**应用程序/视图/用户/index.html.haml**

```
 %h1 Users
    - if is_org_admin?
      %p= link_to 'Invite new user', new_invitation_path 
```

如果我在 ApplicationController 中删除`protect_from_forgery`或调用`if is_org_admin?`index.html.haml 中的辅助方法，它会起作用。但是当我启用`protect_from_forgery`或调用 ApplicationController 中定义的帮助程序的条件时，它会发出警告并显示**您需要登录或注册，然后才能继续**在页面上发送消息。

有人可以建议这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:44:39.643

我没有保存整个组织模型，而是将它的 id 保存在会话中以拥有当前组织的实例。因此，根据需要，我会即时搜索它。

```
Organization.find(session[:current_organization_id]).is_admin?(current_user) 
```

我仍然想知道如果组织 AR 从会话中保存和使用，为什么它会返回 401。

# ios - UITableViewController 不加载数据

> ID：12032555
> 
> 赞同：0
> 
> 时间：2012-08-20T05:17:18.110
> 
> 标签：ios, uitableview

所以我创建了一个子类`UITableViewController`并将委托和数据源设置为自身。但仍然像这样的方法`cellForRowAtIndexPath`永远`numberOfRowsInSection`不会被调用。我`numberOfSectionsInTableView`每次都返回 1。这就是 viewDidLoad() 的样子

```
- (void)viewDidLoad {
[super viewDidLoad];
NSMutableArray* list = [[NSMutableArray alloc] init];
self.tableView = [[UITableView alloc] init];
self.tableView.delegate = self;
self.tableView.dataSource = self;
self.actionList = list;
self.clearsSelectionOnViewWillAppear = NO;
self.contentSizeForViewInPopover = CGSizeMake(320.0, 400.0);
[self.actionList addObject:@"t1"];
[self.actionList addObject:@"t2"];
} 
```

当我尝试在弹出窗口中加载它时，我得到的只是一个空白弹出窗口。 ![这就是我在 UIPopover 中看到的](../Images/6161e4433de263d7b3102c44ca2027f8.png)

我在这方面花了很多时间。请帮帮我。

编辑：.m 文件

// KLActionsViewController.m #import "KLActionsViewController.h"

```
@interface KLActionsViewController ()

@end

@implementation KLActionsViewController
@synthesize actionList,delegate;

//- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
//{
//    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
//    if (self) {
//        // Custom initialization
//    }
//    return self;
//}

//- (void)loadView
//{
//    
//}

- (void)viewDidLoad {
    [super viewDidLoad];
    NSMutableArray* list = [[NSMutableArray alloc] init];
    self.tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320.0, 100.0) style:UITableViewStyleGrouped];
    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    self.actionList = list;
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 200.0);
    [self.actionList addObject:@"t1"];
    [self.actionList addObject:@"t2"];
    [self.tableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"in number of section");
    return 1;
}

- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    NSString* lab = [self.actionList objectAtIndex:indexPath.row];
//    NSLog(lab);
    NSLog(@"here in there");
    cell.textLabel.text = lab;
    return cell;
}

- (NSInteger)numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Total entries : %i ",[self.actionList count]);
    return [self.actionList count];
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (self.delegate != nil) {
        [self.delegate actionSelected:indexPath.row];
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.actionList = nil;
    self.delegate = nil ;
    // Release any retained subviews of the main view.
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

.h 文件

```
#import <UIKit/UIKit.h>

@protocol KLActionsViewControllerDelegate
- (void)actionSelected:(NSInteger)index;
@end

@interface KLActionsViewController : UITableViewController <UITableViewDataSource,UITableViewDelegate>
@property (nonatomic, retain) NSMutableArray* actionList;
@property (nonatomic, assign) id<KLActionsViewControllerDelegate> delegate;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:26:08.517

尝试在 viewDidLoad 末尾添加 [self.tableView reloadData]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:36:49.587

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:17:27.143

在 .h 文件中，添加 `UITableViewDelegate`和`UITableViewDataSource`

像这样的东西：

```
@interface Yourclass : rootClass <UITableViewDelegate, UITableViewDataSource> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:58:40.697

在 .h 文件中试试这个

```
@interface KLActionsViewController:UIView <UITableViewDelegate,UItableViewDataSource> 
```

# java - java中的包问题

> ID：12032557
> 
> 赞同：2
> 
> 时间：2012-08-20T05:17:55.173
> 
> 标签：java

我编写了一个源文件并将该公共类放在一个包中：

```
package abc;
public class Employee
{
    // Constructor
    public Employee(String name, double salary)
    {
        this.name = name;
        this.salary = salary;
    }

    // Methods
    public String getName()
    {
        return this.name;
    }

    public double getSalary()
    {
        return this.salary;
    }

    // instance field
    private String name;
    private double salary;
} 
```

然后我尝试使用命令编译它：**javac Employee.java**，它会在与源文件相同的目录中生成一个 .class 文件

现在我尝试使用这个包，所以我写了一个源文件：

```
import abc.*;
public class HelloWorld
{
    public static void main(String args[]){
        //System.out.println("hello world");

        Employee aEmployee = new Employee("David",1000);
        System.out.println(aEmployee.getName() + aEmployee.getSalary());
    }

} 
```

我尝试使用：**javac HelloWorld.java**编译它，但它有一个错误说：**包 abc 不存在**

我有以下**问题**：
1）为什么会发生这个错误？
2）如何解决这个问题？
3）每次我打包一些类时，我在哪里可以找到之后使用的包

我已经阅读了一些有关此的文档，但这太复杂了，有人可以**简单地**解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T05:30:08.647

> 1）为什么会发生这个错误？

这是因为 java 编译器在尝试加载包时会在类路径或 jar 文件中查找目录树。这意味着对于名为 的包`abc.foo.bar`，它将查找目录树：`/abc/foo/bar`并期望属于该包的类存在。您已经编译了 Employee 类，但是当您导入它时，编译器会`abc`在您的类路径中查找一个目录，但它并不存在。

> 2）如何解决这个问题？

您需要确保在编译 Employee 类时，它的类文件位于`abc`类路径中某处的目录中。最简单的可能是创建一个名为 的目录`abc`，然后*将*Employee.java 文件移动到该`abc`目录中，然后编译：

```
 javac abc/Employee.java 
```

这将在目录中创建一个 Employee.class 文件`abc`。然后你可以编译你的HelloWorld：

```
 javac HelloWorld.java 
```

> 3）每次我打包一些类时，我在哪里可以找到之后使用的包

在您命名包的目录树中。请参阅回复的后半部分`1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:30:47.523

如果您正在使用类文件。**您应该将类​​文件放在与包相同的文件夹结构中。（这是惯例）**例如，如果“abc”是包。那么您的Employees.java 应该在一个“abc”文件夹中。编译后生成的类文件将填充到 abc 文件夹中。在任何情况下，您都应该确保您的类文件位于 abc 文件夹中。

然后，如果您尝试在另一个类中使用 abc.Employees.class。您必须将 abc 文件夹保留在类路径中，例如，如果您的 abc 文件夹位于 d:/java/sources/bin/abc .. 这就是您的员工类。

别的

使用 -d 选项编译

> javac Employee.java -dd:/java/sources/bin
> 
> 设置类路径=d:/java/sources/bin/:%classpath%`。

```
javac HelloWorld.java 
```

在此之后，您将能够编译您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:31:03.647

试试这样。。

`javac -sourcepath /path/to/srcdir -cp /path/to/libraries -d /path/to/outputdir`

**检查此站点以获得良好的教程：**

[http://www.sergiy.ca/how-to-compile-and-launch-java-code-from-command-line/](http://www.sergiy.ca/how-to-compile-and-launch-java-code-from-command-line/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T05:31:17.610

您需要做的几件事：

1.  将 abc 包的类文件放入名为 abc 的文件夹中。例如

    `mkdir abc; mv Employee.class abc`

    请参阅下面的评论/其他答案以改用 -d 选项。

2.  告诉 java 编译器在哪里可以找到类文件。您可以使用 -classpath 选项执行此操作。如果`abc`在您当前的文件夹中，那么您可以告诉 javac 在 . 像这样：

    `javac -classpath . HelloWorld.java`

回答你的第一个问题：错误发生是因为 java 编译器不知道在哪里寻找 abc 包。第二个上面已经回答了。这些步骤在将来应该会有所帮助:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T05:37:02.310

你应该像这样编译

```
 javac -cp d:\yourJavaProject\abc Employee.java
 javac -cp d:\yourJavaProject\abc HelloWorld.java 
```

并像这样运行；

```
 java -cp .;d:\yourJavaProject\abc HelloWorld 
```

请参阅[参考资料](http://shivasoft.in/blog/java/compile-and-run-java-program-in-package-from-command-line/)以了解如何从命令行编译和运行包中的 Java 程序。

# python - 如何将被抓取的 url 分配给项目？

> ID：12032558
> 
> 赞同：0
> 
> 时间：2012-08-20T05:17:54.447
> 
> 标签：python, scrapy

我对 Python 和 Scrapy 还很陌生，到目前为止，这个网站对我的项目来说是一个非常宝贵的资源，但现在我遇到了一个看起来很简单的问题。我可能想错了。我想要做的是在我的输出 CSV 中添加一列，其中列出了每行数据被抓取的 URL。换句话说，我希望表格看起来像这样：

```
item1    item2    item_url
a        1        http://url/a
b        2        http://url/a
c        3        http://url/b
d        4        http://url/b 
```

我正在使用 psycopg2 来获取存储在数据库中的一堆 url，然后我从中抓取。代码如下所示：

```
class MySpider(CrawlSpider):
    name = "spider"

    # querying the database here...

    #getting the urls from the database and assigning them to the rows list
    rows = cur.fetchall()

    allowed_domains = ["www.domain.com"]

    start_urls = []

    for row in rows:

        #adding the urls from rows to start_urls
        start_urls.append(row)

        def parse(self, response):
            hxs = HtmlXPathSelector(response)
            sites = hxs.select("a bunch of xpaths here...")
            items = []
            for site in sites:
                item = SettingsItem()
                # a bunch of items and their xpaths...
                # here is my non-working code
                item['url_item'] = row
                items.append(item)
            return items 
```

如您所见，我想制作一个仅采用解析函数当前所在的 url 的项目。但是当我运行蜘蛛时，它给了我“exceptions.NameError: global name 'row' is not defined”。我认为这是因为 Python 没有将行识别为 XPathSelector 函数中的变量，或者类似的东西？（就像我说的，我是新手。）无论如何，我被困住了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:47:45.820

将开始请求生成不是放在类主体中，而是放在[`start_requests()`](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_requests)：

```
class MySpider(CrawlSpider):

    name = "spider"
    allowed_domains = ["www.domain.com"]

    def start_requests(self):
        # querying the database here...

        #getting the urls from the database and assigning them to the rows list
        rows = cur.fetchall()

        for url, ... in rows:
            yield self.make_requests_from_url(url)

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select("a bunch of xpaths here...")

        for site in sites:
            item = SettingsItem()
            # a bunch of items and their xpaths...
            # here is my non-working code
            item['url_item'] = response.url

            yield item 
```

# sql - 在实体框架中运行搜索查询

> ID：12032561
> 
> 赞同：0
> 
> 时间：2012-08-20T05:18:34.273
> 
> 标签：sql, asp.net-mvc, entity-framework

我在 MVC3 和实体框架上。

是否有直接的方法在实体框架（linq？）中的文本列上运行用户的搜索查询？

就像，如果用户键入 - **(john 或 orders) 和washington**，sql 查询会自动解释表达式并返回结果。

如果没有，还有哪些其他选择？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:52:06.240

否。选项是解析您的查询语言并构造有效的 Linq 查询或 ESQL。

# javascript - 如何在javascript DOM api中获取具有给定条件的子节点？

> ID：12032562
> 
> 赞同：3
> 
> 时间：2012-08-20T05:18:34.273
> 
> 标签：javascript, xml, dom, xpath

xml文件是这样的：

```
<products>
  <product>
   <id>1</id>
   <name>pen</name>
  </product>
  <product>
   <id>2</id>
   <name>pencil</name>
  </product>
</products>
<employees>
  <employee>
   <name>Jack</name>
  <employee>
  <employee>
   <name>Mark</name>
  <employee>
</employees> 
```

我只能得到`<name>`子节点`<product>`吗？`xpath`javascript dom中是否有适应良好 的api？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T06:58:08.373

在现代浏览器中，您可以使用它`querySelector`来遍历 xml-tree。假设您的 xml 位于`div#xmlsample`其中，那么此代码将为您提供`//product/name`in的 nodeList `prodNames`：

```
var xmlDoc = (new DOMParser())
              .parseFromString(document.querySelector('#xmlsample').innerHTML,
              "application/xml"),
    prodNames = xmlDoc.querySelectorAll('product name'); 
```

看到[这个jsfiddle](http://jsfiddle.net/pn3YR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T05:21:35.333

[jQuery 有一个](http://api.jquery.com/jQuery.parseXML/)用于解析和遍历 xml 的 api。

```
var xmlObj = $.parseXML(xmlObj);

var nameNodes = xmlObj.find('product > name'); 
```

* * *

从医生..

> jQuery.parseXML 使用浏览器的原生解析功能来创建一个有效的 XML 文档。然后可以将此文档传递给 jQuery 以创建一个可以遍历和操作的典型 jQuery 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:39:32.717

> 我只能得到`<name>`子节点`<product>`吗？

提供的 XML 不是格式良好的 XML 文档（需要单个顶部元素）。

此外，两个`<employee>`开始标签没有相应`</employee>`的结束标签。

**如果正确的 XML 文档是这样的**：

```
<company>
    <products>
        <product>
            <id>1</id>
            <name>pen</name>
        </product>
        <product>
            <id>2</id>
            <name>pencil</name>
        </product>
    </products>
    <employees>
        <employee>
            <name>Jack</name>
        </employee>
        <employee>
            <name>Mark</name>
        </employee>
    </employees>
</company> 
```

**并且确实需要**一个 XPath 表达式，那么选择所需元素的一个 XPath 表达式是：

```
/*/products/product/name 
```

这将选择作为任何`name`元素的子`product`元素的任何`products`元素，该元素是作为 XML 文档顶部元素的子元素的任何元素的子元素的子元素。

# python - 在我的推特机器人中捕获错误

> ID：12032566
> 
> 赞同：0
> 
> 时间：2012-08-20T05:19:01.363
> 
> 标签：python, twitter, try-catch

所以我写了一个 twitter 机器人，它从某个 subreddit 中提取最高提交并将其发布到 twitter。

它作为 cron 作业运行，如果顶部帖子与上次运行时相同，则 twitter api 会抛出该帖子重复的错误，我希望捕获此错误，然后使用递增的键重新运行函数，以便尝试下一篇文章继承人我的代码（api凭据省略）

```
def pull_reddit_post(key):
    r = reddit.Reddit(user_agent='ghettoTwit')
    submissions = r.get_subreddit('ghettojerk').get_hot(limit=10)
    post = [str(x) for x in submissions]
    post = post[key]
    post = post.lstrip('0123456789: ')
    return post

def tweet_reddit_post(key):
    global api 
    post = pull_reddit_post(key)
    api.PostUpdates(pull_reddit_post(key))

try:
    key = 0
    tweet_reddit_post(key)
except:
    key = key + 1
    continue
else:
    break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:25:05.867

只需编辑 try...except 并将其放入循环中

```
key = 0

while True:
    try:
        tweet_reddit_post(key)
        break
    except:
        key += 1 
```

# c++ - “需要在所有翻译单元中定义内联函数”背后的基本原理是什么？

> ID：12032567
> 
> 赞同：0
> 
> 时间：2012-08-20T05:19:09.770
> 
> 标签：c++, function, inline

我在 Stroustrup 的书中读到这一行： **“内联函数（第 7.1.1 节，第 10.2.9 节）必须通过相同的定义（第 9.2.3 节）在使用它的每个翻译单元中进行定义。”**

“需要在所有翻译单元中定义内联函数”背后的基本原理是什么？我理解错了吗？我知道除了一个（包含定义）之外的所有翻译单元中的其他函数声明都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:20:37.330

从历史上看，C++ 语言编译器是建立在独立翻译原则之上的。每个翻译单元都是完全独立编译的（只有链接器才能看到整个程序）。

在这种情况下，为了执行内联，编译器必须能够在每个调用它的翻译单元中看到函数的*源代码*。为此，必须在每个翻译单元中*定义*（即用正文声明）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:22:11.420

一个内联函数可以在多个翻译单元中多次定义，因此如果在一个未定义的翻译单元中使用它，链接器将不知道要使用哪个定义。（这显然可以解决，但它会导致链接器额外的复杂性，并且不会有任何明显的优势。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:36:32.717

它可以防止用户错误。如果您**打算**编写一个`inline`函数，但编译器会默默地忽略您，因为您仍然将定义放在 .cpp 文件中，那么您将很难发现错误。该程序仍将运行，但速度较慢。

# c++ - C++ 中的隐马尔可夫模型

> ID：12032568
> 
> 赞同：0
> 
> 时间：2012-08-20T05:19:24.350
> 
> 标签：c++, hidden-markov-models

我一直在研究在 linux 环境中使用 Opencv 的活动识别问题。我达到了符号序列（使用k-means聚类）。现在我想使用 C++ 中的隐马尔可夫模型来训练这些不同活动的序列。但我不知道从哪里开始？我浏览了这段[代码](http://sourceforge.net/projects/cvhmm/)，但没有找到如何给出不同的序列并获得训练好的模型？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T22:02:44.593

[这里](https://stats.stackexchange.com/questions/49997/hidden-markov-model-library)回答了一个非常相似的问题。

在那里你可以找到一些 C++ 实现。

# jquery - 我怎样才能制作像方形（squareup.com）这样的图像滑块？

> ID：12032574
> 
> 赞同：2
> 
> 时间：2012-08-20T05:20:22.640
> 
> 标签：jquery, carousel

我想制作一个类似 squareup.com 中的 jquery 图像滑块，有这样的图像滑块插件吗？我的意思是左右两边都没有限制的那个。或者你能给我修改其他插件的方法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:37:14.093

Its a full screen jquery slider with Contents. You can find some good examples on internet with "Jquery Division Sliders". Or have a look at this link :

[**Large Slider**](http://www.musca.se/full-window-width-jquery-tools-content-slider-demo/)

This is not exactly the same thing, but you can customize it on this website. And to integrate it to your website, obviously you have to make some custom changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:11:36.710

有很多图像滑块插件可供免费下载。例如。

1.  [哇塞](http://wowslider.com)
2.  [nivo滑块](http://nivoslider.com)

本文将为您提供帮助：[20 个独特且富有创意的图像滑块](http://tympanus.net/codrops/2011/02/18/20-unique-and-creative-image-sliders/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T19:05:05.067

我想你正在寻找这样的[东西](http://gilbert.pellegrom.me/demo/square-slider/)。它是跨浏览器兼容的，但您必须进行一些修改才能使其在旧浏览器中工作。

# java - Jersey - Spring 3 自动装配（NoClassDefFoundError：EnvironmentAware）

> ID：12032578
> 
> 赞同：2
> 
> 时间：2012-08-20T05:21:05.317
> 
> 标签：java, rest, jersey, autowired

我正在尝试在 Tomcat 7 服务器上使用 Spring 3.1.2.RELEASE 和 Jersey 1.13 实现一个项目。我的问题是，当我尝试将服务自动装配到其余实现中时，服务 bean`null`每次都会转动。

我找到了一个建议，将其设置在`web.xml`

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.mac.rest</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

现在，我收到此错误

```
java.lang.NoClassDefFoundError: org/springframework/context/EnvironmentAware 
```

我不知道怎么了，也许你能帮我解决这个问题

这是我的`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">
    <display-name>localito</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.mac.rest</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是我的`pom.xml`

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project>
        <modelVersion>4.0.0</modelVersion>
        <groupId>localito</groupId>
        <artifactId>localito</artifactId>
        <packaging>war</packaging>
        <version>0.0.1-SNAPSHOT</version>
        <description></description>
        <build>
            <finalName>${project.build.finalName}</finalName>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>2.3.1</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <phase>install</phase>
                            <configuration>
                                <file>${project.build.finalName}.${project.packaging}</file>
                                <generatePom>false</generatePom>
                                <pomFile>pom.xml</pomFile>
                                <version>${my.version}</version>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
        <repositories>
            <repository>
                <id>java.net</id>
                <url>http://download.java.net/maven/2/</url>
            </repository>
            <repository>
                <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url>
                <id>eclipselink</id>
                <layout>default</layout>
                <name>Repository for library Library[eclipselink]</name>
            </repository>
            <repository>
                <id>maven2-repository.java.net</id>
                <name>Java.net Repository for Maven</name>
                <url>http://download.java.net/maven/2/</url>
                <layout>default</layout>
            </repository>
        </repositories>

        <dependencies>
            <dependency>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
                <version>2.5</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
                <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-jdbc</artifactId>
                <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
                <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-webmvc</artifactId>
                <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-orm</artifactId>
                <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
                <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-entitymanager</artifactId>
                <version>3.3.2.ga</version>
                <exclusions>
                    <exclusion>
                        <groupId>cglib</groupId>
                        <artifactId>cglib</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <!-- dependency>
              <groupId>org.slf4j</groupId>
              <artifactId>slf4j-log4j12</artifactId>
              <version>1.4.2</version>
            </dependency -->
            <dependency>
                <groupId>taglibs</groupId>
                <artifactId>standard</artifactId>
                <version>1.1.2</version>
            </dependency>
            <dependency>
                <groupId>javax.servlet</groupId>
                <artifactId>jstl</artifactId>
                <version>1.1.2</version>
            </dependency>
            <dependency>
                <groupId>mysql</groupId>
                <artifactId>mysql-connector-java</artifactId>
                <version>5.1.10</version>
            </dependency>
            <dependency>
                <groupId>commons-dbcp</groupId>
                <artifactId>commons-dbcp</artifactId>
                <version>20030825.184428</version>
            </dependency>
            <dependency>
                <groupId>commons-pool</groupId>
                <artifactId>commons-pool</artifactId>
                <version>20030825.183949</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>eclipselink</artifactId>
                <version>2.3.0</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>javax.persistence</artifactId>
                <version>2.0.3</version>
            </dependency>
            <dependency>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>org.eclipse.persistence.jpa.modelgen.processor</artifactId>
                <version>2.3.0</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>javax.annotation</groupId>
                <artifactId>jsr250-api</artifactId>
                <version>1.0</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>jaxen</groupId>
                <artifactId>jaxen</artifactId>
                <version>1.1.3</version>
            </dependency>

            <!-- Jersey dependency -->
            <dependency>
                <groupId>com.sun.jersey</groupId>
                <artifactId>jersey-server</artifactId>
                <version>1.13</version>
            </dependency>
            <dependency>
                <groupId>com.sun.jersey</groupId>
                <artifactId>jersey-bundle</artifactId>
                <version>1.13</version>
            </dependency>
            <dependency>
                <groupId>com.sun.jersey</groupId>
                <artifactId>jersey-json</artifactId>
                <version>1.13</version>
            </dependency>
            <dependency>
                <groupId>com.sun.jersey.contribs</groupId>
                <artifactId>jersey-multipart</artifactId>
                <version>1.13</version>
            </dependency>
            <dependency>
                <groupId>com.sun.jersey.contribs</groupId>
                <artifactId>jersey-spring</artifactId>
                <version>1.13</version>
            </dependency>
            <dependency>
                <groupId>cglib</groupId>
                <artifactId>cglib-nodep</artifactId>
                <version>2.1_3</version>
            </dependency>
            <!-- Jersey dependency end -->
        </dependencies>
        <properties>
            <org.springframework.version>3.1.2.RELEASE</org.springframework.version>
            <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
            <project.build.finalName>localito</project.build.finalName>
            <project.packaging>war</project.packaging>
            <my.version>1.0</my.version>
        </properties>
        <name>localito</name>
    </project> 
```

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:49:06.637

jersey-spring 引入了旧版本的 Spring。您必须添加排除项：

```
 <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-spring</artifactId>
        <version>1.13</version>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

A`mvn dependency-tree`将显示这些依赖项

# javascript - 这个具有将数字转换为单词的功能的 javascript 代码有什么错误？

> ID：12032581
> 
> 赞同：0
> 
> 时间：2012-08-20T05:21:44.100
> 
> 标签：javascript

所以这是一个简单的 javascript 代码，它将数字中的钱变成了单词。问题是浏览器甚至没有提示窗口。我已经阅读了很多次代码，但我无法找到错误。任何人都可以帮忙吗？

```
<script type="text/javascript">
        document.writeln("hello World");
    var output=new Array("Rs.",null,null,null,null,null,null,null,null,null,null,null,null,null,null);

        str=window.prompt("Enter a number:","0");
        n1=parseFloat(str);
        if(isNaN(n1))
        {
         docucument.writeln("Enter a Valid number");
         return;
        }
        else
        {
            paise=(n1%1)*100;
            rupee=parseInt(str);
            output[14]="paise only";

            output[13]=two_digit(paise);

            output[12]="and";
            x=rupee%100;
            output[11]=two_digit(x);
            rupee=rupee/100;
            //if(rupee<=0) break end;

            output[10]="hundred";
            x=rupee%10;
            output[9]=one_digit(x);
            rupee=rupee/10;
            //if(rupee<=0) break end;

            output[8]="thousand";
            x=rupee%100;
            output[7]=two_digit(x);
            rupee=rupee/100;
            //if(rupee<=0) break end;

            output[6]="lakhs";
            x=rupee%100;
            output[5]=two_digit(x);
            rupee=rupee/100;
            //if(rupee<=0) break end;

            output[4]="crore";
            x=rupee%100;
            output[3]=two_digit(x);
            rupee=rupee/100;
            //if(rupee<=0) break end;

            output[2]="hundred";
            x=rupee%10;
            output[1]=one_digit(x);
            rupee=rupee/10;
            //if(rupee<=0) break end;

            //end:

            document.writeln(output.join(" "));

        }

        function two_digit(n)
        {
         if(n>=11 && n<=19)
         {
          x=eleven(n);
          return x;
         }
         else
         {
          a=n%10;
          y=one_digit(a);
          a=n/10;
          switch(a)
          {
                    case 1: x="ten"; 
                           break;
                    case 2: x="twenty"; 
                           break;
                    case 3: x="thirty"; 
                           break;   
                    case 4: x="forty"; 
                           break;
                    case 5: x="fifty"; 
                           break;
                    case 6: x="sisty"; 
                           break;
                    case 7: x="seventy"; 
                           break;
                    case 8: x="eighty"; 
                           break;
                    case 9: x="ninty"; 
                           break;
                    case 0: x=null; 
                           break;                                  
         }
         return (x+y);
        }
        function one_digit(n)
        {
         switch(n)
         {
                    case 1: x="one"; 
                           break;
                    case 2: x="two"; 
                           break;
                    case 3: x="three"; 
                           break;   
                    case 4: x="four"; 
                           break;
                    case 5: x="five"; 
                           break;
                    case 6: x="six"; 
                           break;
                    case 7: x="seven"; 
                           break;
                    case 8: x="eigh"; 
                           break;
                    case 9: x="nine"; 
                           break;
                    case 0: x=null; 
                           break;                                  
         }
         return (x);
        }
        function eleven(n)
        {
         switch(n)
         {
                    case 11: x="eleven"; 
                           break;
                    case 12: x="twelve"; 
                           break;
                    case 13: x="thirteen"; 
                           break;   
                    case 14: x="fourteen"; 
                           break;
                    case 15: x="fifteen"; 
                           break;
                    case 16: x="sixteen"; 
                           break;
                    case 17: x="seventeen"; 
                           break;
                    case 18: x="eighteen"; 
                           break;
                    case 19: x="nineteen"; 
                           break;

         }
         return (x);
        }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:25:48.203

Get rid of the `else {` in the `two_digit()` function. There is a bracket missing (and the `else` is not necessary in the code since you always return in the `if` before it).

Also get rid of the first `return` in the code. A `return` cannot be used outside of a function (if you want a quick but "wrong" way to exit, you can use `throw 'End';` but that is really only supposed to be used for errors).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:36:04.327

You have two syntax errors that I found:
1\. You have a `return` statement - outside a function, and
2\. You're missing a closing `}`

**Suggestion**:
You should add line-breaks `<br>` in the test that you print to screen.

The following fixed code works for me:

```
 <script type="text/javascript">
            document.writeln("hello World");
            var output=new Array("Rs.",null,null,null,null,null,null,null,null,null,null,null,null,null,null);

            str=window.prompt("Enter a number:","0");
            n1=parseFloat(str);
            if(isNaN(n1))
            {
             docucument.writeln("Enter a Valid number");
            }
            else
            {
                paise=(n1%1)*100;
                rupee=parseInt(str);
                output[14]="paise only";

                output[13]=two_digit(paise);

                output[12]="and";
                x=rupee%100;
                output[11]=two_digit(x);
                rupee=rupee/100;
                //if(rupee<=0) break end;

                output[10]="hundred";
                x=rupee%10;
                output[9]=one_digit(x);
                rupee=rupee/10;
                //if(rupee<=0) break end;

                output[8]="thousand";
                x=rupee%100;
                output[7]=two_digit(x);
                rupee=rupee/100;
                //if(rupee<=0) break end;
                output[6]="lakhs";
                x=rupee%100;
                output[5]=two_digit(x);
                rupee=rupee/100;
                //if(rupee<=0) break end;

                output[4]="crore";
                x=rupee%100;
                output[3]=two_digit(x);
                rupee=rupee/100;
                //if(rupee<=0) break end;

                output[2]="hundred";
                x=rupee%10;
                output[1]=one_digit(x);
                rupee=rupee/10;
                //if(rupee<=0) break end;

                //end:

                document.writeln(output.join(" "));

            }

            function two_digit(n)
            {
             if(n>=11 && n<=19)
             {
              x=eleven(n);
              return x;
             }
             else
             {
              a=n%10;
              y=one_digit(a);
              a=n/10;
              switch(a)
              {
                        case 1: x="ten";
                               break;
                        case 2: x="twenty";
                               break;
                        case 3: x="thirty";
                               break;
                        case 4: x="forty";
                               break;
                        case 5: x="fifty";
                               break;
                        case 6: x="sisty";
                               break;
                        case 7: x="seventy";
                               break;
                        case 8: x="eighty";
                               break;
                        case 9: x="ninty";
                               break;
                        case 0: x=null;
                               break;
             }
             return (x+y);
            }
}
            function one_digit(n)
            {
             switch(n)
             {
                        case 1: x="one";
                               break;
                        case 2: x="two";
                               break;
                        case 3: x="three";
                               break;
                        case 4: x="four";
                               break;
                        case 5: x="five";
                               break;
                        case 6: x="six";
                               break;
                        case 7: x="seven";
                               break;
                        case 8: x="eigh";
                               break;
                        case 9: x="nine";
                               break;
                        case 0: x=null;
                               break;
             }
             return (x);
            }
            function eleven(n)
            {
             switch(n)
             {
                        case 11: x="eleven";
                               break;
                        case 12: x="twelve";
                               break;
                        case 13: x="thirteen";
                               break;
                        case 14: x="fourteen";
                               break;
                        case 15: x="fifteen";
                               break;
                        case 16: x="sixteen";
                               break;
                        case 17: x="seventeen";
                               break;
                        case 18: x="eighteen";
                               break;
                        case 19: x="nineteen";
                               break;

             }
             return (x);
            }    
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:49:32.033

这是我对此的看法

[演示](http://jsfiddle.net/mplungjan/WHLFp/)

```
window.onload=function() {
    document.getElementById("form1").onsubmit=function() {
        return convert(this);
    }
}
var output=["Rs.",null,null,null,null,null,null,null,null,null,null,null,null,null,null];

function convert(theForm) {
  var paise,rupee,x,
    str=theForm.num.value,
    n1=parseFloat(str);
  if (isNaN(n1)) {
    document.getElementById("out").innerHTML="Enter a Valid number";
    return false;
  }
  paise=(n1%1)*100;
  rupee=parseInt(n1);
  output[14]="paise only";
  output[13]=two_digit(paise);
  output[12]="and";
  x=rupee%100;
  output[11]=two_digit(x);
  rupee=parseInt(rupee/100);
  //if(rupee<=0) break end;
  output[10]="hundred";
  x=rupee%10;
  output[9]=num2text(x);
  rupee=parseInt(rupee/10);
  //if(rupee<=0) break end;
  output[8]="thousand";
  x=rupee%100;
  output[7]=two_digit(x);
  rupee=parseInt(rupee/100);
  //if(rupee<=0) break end;
  output[6]="lakhs";
  x=rupee%100;
  output[5]=two_digit(x);
  rupee=parseInt(rupee/100);
  //if(rupee<=0) break end;
  output[4]="crore";
  x=rupee%100;
  output[3]=two_digit(x);
  rupee=parseInt(rupee/100);
  //if(rupee<=0) break end;
  output[2]="hundred";
  x=rupee%10;
  output[1]=num2text(x);
  rupee=parseInt(rupee/10);
  //if(rupee<=0) break end;
  document.getElementById("out").innerHTML=output.join(" ");
  return false;
}
function two_digit(n) {
  if(n>=11 && n<=19) {
    return num2text(n);
  }
  var a=n%10;
  var y=num2text(a);
  a=parseInt(n/10);
  x = ["","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninty"][a];
  return (x+y);
}
function num2text(n) {
  return ["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen",
  "sixteen","seventeen","eighteen","nineteen"][n];
} 
```

# macos - 安装/升级/设置 ZSH 的默认版本的最终方法是什么？

> ID：12032583
> 
> 赞同：26
> 
> 时间：2012-08-20T05:21:47.813
> 
> 标签：macos, terminal, zsh, osx-mountain-lion

OSX Mountain Lion 在 /bin/zsh 中附带 ZSH 4.3.1。下载后，`./configure, make, make check,`-ing`make install`版本5.0.0，

`which zsh`仍然返回`/bin/zsh/`

并且`zsh --version`仍然返回`zsh 4.3.11 (i386-apple-darwin12.0)`

**帮助回答者的注意事项：**
我运行安装命令时没有错误。

在`/usr/local/bin`，我有这 3 个文件：
`-rwxr-xr-x 2 kevinsuttle admin 622K Aug 20 00:59 zsh`
`-rwxr-xr-x 2 kevinsuttle admin 622K Aug 20 00:59 zsh-5.0.0`
`-rwxr-xr-x 1 kevinsuttle admin 622K Aug 20 00:50 zsh.old`

**我的`$PATH`**
`$ echo $PATH`
`/Users/kevinsuttle/.rbenv/shims:/Users/kevinsuttle/.rbenv/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin`

**我需要回答的问题**：
1\. 安装 ZSH 最干净的方法是什么？（来自 git、homebrew、curl-ing 源？）
2\. 在哪里运行安装命令是否重要？
3\. 如何升级或覆盖 Mountain Lion 附带的 ZSH 版本？
4\. 这就是人们最终使用[oh-my-zsh 的](https://github.com/robbyrussell/oh-my-zsh)原因吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-27T12:46:18.957

您必须在 OSX 中设置默认 shell：

```
chsh -s /usr/local/bin/zsh $USER 
```

重新登录到 OSX，它应该可以工作！

# 自制方式

我建议您使用自制软件。它使事情变得容易得多。安装自制软件，如[Link](https://brew.sh/)中所述。

Homebrew 将您的东西安装在 /usr/local/bin 中，因此请确保 /usr/local/bin 位于 /usr/bin 之前。

在 ~/.zshrc 和 ~/.bashrc 中添加以下行：

```
PATH="/usr/local/bin:/usr/local/sbin:$PATH" 
```

安装 zsh：

```
brew install zsh 
```

将默认 shell 设置为 zsh：

```
chsh -s /usr/local/bin/zsh $USER 
```

最后从 brew 安装中设置使用 zsh 的权限。将“/usr/local/bin/zsh”添加到“/etc/shells”文件以允许zsh。否则，您将收到错误消息“您无权运行此应用程序。管理员已将您的 shell 设置为非法值。”

```
echo "/usr/local/bin/zsh" | sudo tee -a /etc/shells 
```

我建议修复 OSX 中的 zsh 环境错误。将 /etc/zshenv 重命名为 /etc/zshrc

```
sudo mv /etc/{zshenv,zshrc} 
```

重新登录到 OSX，它应该可以工作！

如果遇到问题，请键入：

```
brew doctor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T05:40:16.217

我将尝试回答您的问题，但我觉得这更适合[超级用户](http://superuser.com)

> 安装 ZSH 最干净的方法是什么？（来自 git、自制软件、curl-ing 源？）

随心所欲地获取源；但最干净的方法是创建一个私人的`bin`，我喜欢`/Users/burhan/bin/`，并在那里安装东西。在我看来，这是*最干净*和*最简单*的方法，因为您不需要依赖其他库/安装程序/魔术。

> 在哪里运行安装命令是否重要？

不，您给命令提供什么参数并不重要——尤其是目标安装位置和库路径。如果您不提供这些（或事先在环境中设置它们），安装程序会将项目放置在默认系统路径中；为此*，*您需要以提升的权限运行安装程序，即`sudo`以`root`.

> 如何升级或覆盖 Mountain Lion 随附的 ZSH 版本？

我建议不要升级它；仅仅是因为我不确定它会对期望它与广告版本一起发布的各种其他脚本产生什么副作用。为了你的理智，我会避免这种情况。

相反，如果您将其构建并安装到私人垃圾箱中并`PATH`适当地指向您；您可以使用更新后的版本，而无需修改出厂版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T05:42:22.610

好的，所以 Burhan 的评论让我想起了我必须将首选版本的路径显式添加到我的`.bash_profile`. 版本 5.0.0 是 in `/usr/local/bin`，所以现在`$PATH`in 我`.bash_profile`看起来像这样：

`export PATH="$HOME/.rbenv/bin:/usr/local/bin:$PATH"`

现在当我跑步时`which zsh`，我得到`/usr/local/bin/zsh`
并`zsh --version`返回`zsh 5.0.0 (x86_64-apple-darwin12.0.0)`。

哇！希望这可以帮助遇到同样问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T02:14:35.033

过去，我为这种类型的升级提出的解决方案大致如下：

*   在某处安装较新的版本（在我的情况下是 fink /sw/bin 的默认值）
*   在 /bin /bin/zsh => /bin/zsh.moved 中重命名操作系统安装的版本
*   在 /bin 中设置到 /sw/bin/zsh 安装的符号链接

这似乎奏效了。

# macos - PostgreSQL 山狮套接字问题

> ID：12032585
> 
> 赞同：21
> 
> 时间：2012-08-20T05:22:08.097
> 
> 标签：macos, postgresql, osx-mountain-lion

我一直在尝试在我的系统上设置 PostgreSQL（OSX 10.8，全新安装），但是我在使用 , 等时遇到了麻烦`psql`。`createdb`我尝试了各种解决方案，但似乎都没有。

安装成功，我继续使用以下方法修复已知的套接字问题：

```
mkdir /var/pgsql_socket 
sudo chown $USER /var/pgsql_socket 
```

然后我编辑`postgresql.conf`，设置`unix_socket_directory`为

```
unix_socket_directory = '/var/pgsql_socket' 
```

并重新启动 Pg。

这显然应该解决了套接字问题，但我仍然得到：

```
psql: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

另外，我检查了服务器的状态，它似乎正在运行，但我仍然得到“没有这样的文件或目录”

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T10:00:31.623

根据错误消息，`psql`首先出现在 中的命令`$PATH`已`/tmp`作为硬编码的默认 unix 套接字目录。

由于实际目录实际上是`/var/pgsql_socket`，您应该明确告诉它而不是依赖默认值：

```
$ psql -h /var/pgsql_socket [other options] 
```

这同样适用于其他客户端命令，如`createdb`, `dropdb`, `createuser`...

如果不想`-h`每次都指定，可以放到`PGHOST`环境变量中。

有些人还通过使用 TCP 连接`localhost`而不是使用 Unix 套接字目录来解决这个问题。

此问题的根本原因是，在 Mac OS X 上安装 PostgreSQL 后，系统最终拥有两个不同的 postgres 客户端集（`libpq`库`psql`和其他相关实用程序）实例，一个与 MacOS 捆绑在一起，另一个与附带 PostgreSQL 安装程序。

因此，另一种方法是更改​​您的`$PATH`，以便在`psql`安装系统之前选择安装的 PostgreSQL（大概是`/usr/bin/psql`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:38:49.463

通过 Homebrew 安装 PostgreSQL 9.2 时，我遇到了同样的问题。`psql`此构建附带`/tmp`的在没有任何选项的情况下调用时会查找套接字。

我不想添加任何新的环境变量，例如`PGHOST`为`psql`. 做任何这些事情都没有错，但我只是不想增加我环境的混乱。

那么，为什么不直接设置`unix_socket_directory`呢？我做了：`postgresql.conf``/tmp`

```
unix_socket_directory = '/tmp'      # (change requires restart)
#unix_socket_group = ''             # (change requires restart)
#unix_socket_permissions = 0777     # begin with 0 to use octal notation 
```

重新加载后，我可以在`$ psql`没有`-h`选项的情况下运行，而无需添加别名或环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T06:01:21.467

我遇到了同样的问题，在完成你所做的之后，我还必须更改路径，以便 /usr/local/bin（Homebrew 放置所有内容的地方）位于 /usr/bin 之前。我不知道为什么这不再是默认设置，但是很容易更改。

```
sudo vi /etc/paths 
```

然后编辑文件以在顶部添加 /usr/local/bin 行。

或者，如果您只想针对您的特定用户帐户进行此更改，请编辑您的 ~/.bash_profile 文件：

```
touch ~/.bash_profile
vi ~/.bash_profile 
```

并添加这一行：`export PATH="/usr/local/bin:$PATH"`

然后运行`source ~/.bash_profile`以使更改生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T09:35:53.923

请参阅下面的问题/链接的已接受答案。为我工作，但请注意要更改的设置是 unix_socket_directories （复数）而不是 unix_socket_directory 所述。

[https://dba.stackexchange.com/questions/21587/postgresql-is-running-locally-but-i-cannot-connect-why](https://dba.stackexchange.com/questions/21587/postgresql-is-running-locally-but-i-cannot-connect-why)

# python - 在python中访问函数内的函数

> ID：12032587
> 
> 赞同：3
> 
> 时间：2012-08-20T05:23:01.867
> 
> 标签：python

给定函数内的函数，如何从外部函数调用内部函数？

前任。

```
def a():
    print 'a'
    def b():
        print 'b'
        def c():
            print 'c'

def d():
    # how would I now call a, b and c from here?
    def e():
        # how would I call a, b and c from here as well? 
```

是的，我知道这是可怕的代码结构，不应该这样做——但你是怎么做到的？

编辑：有什么方法可以使用装饰器来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T05:25:31.590

你不能。 `b`和`c`是内部的局部变量`a`，除了执行时不存在`a`。

（由于这些是常量，您可以从技术上通过 访问它们`a.__code__.co_consts`，但这不是一个真正的解决方案，即使您对糟糕的代码结构没问题。您必须使用 执行该函数，`exec`并且不能将参数传递给它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T05:25:22.443

你不能，因为这些函数是在调用外部函数时创建的，并在外部函数退出时被销毁。如果您想从其他地方访问它们，则需要在某个地方持久地引用内部函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T05:32:17.407

使用这种结构，您只能`a()`在您指定的两个地方调用。`b()`仅在`a()`运行时定义，并且`c()`仅在`b()`运行时定义。`a()`可以从任何地方调用，因为它是全局定义的。

例如：

```
def a():
    print 'a'
    def b():
        print 'b'
        def c():
            print 'c'

def d():
    # how would I now call a, b and c from here?
    a()
    def e():
        a()
        # how would I call a, b and c from here as well?

d() 
```

结果是

```
a 
```

（类似地，`e()`仅在`d()`运行时定义。`d()`像 一样`a()`，是全局定义的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:06:54.913

你可以改变你的外部功能，所以它会返回你的内部功能

# ios - 了解我的 iPhone 应用程序崩溃日志

> ID：12032593
> 
> 赞同：1
> 
> 时间：2012-08-20T05:23:43.010
> 
> 标签：ios, memory, crash, report, memory-leaks

我无法理解我的崩溃日志。我可以理解它在第 9 个线程上崩溃。所以看着我的第 9 个线程

```
Thread 9 Crashed:
0   libobjc.A.dylib                 0x30da4f78 objc_msgSend + 16
1   APLfree                         0x0009be1c 0x1000 + 634396
2   Foundation                      0x30514a7a -[NSThread main]
3   Foundation                      0x305a858a __NSThread__main__
4   libsystem_c.dylib               0x3763872e _pthread_start
5   libsystem_c.dylib               0x376385e8 thread_start 
```

这是否意味着 libsystem_c.dylib 导致了崩溃或者可能是 libobjc.A.dylib？

我自己没有遇到崩溃，但我是从我的应用程序的真实用户的崩溃日志中获得的。它至少出现在 iOS 5.1、5.0、4.3 和 4.2.6 中。所以这不是最新 iOS 中的新错误。

我怀疑这可能是释放内存的问题，但我不太擅长追踪这些问题，所以如果有任何关于如何修复内存泄漏等的建议也会有所帮助。

任何帮助将不胜感激！

谢谢，

特拉维斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:51:02.267

尝试设置一个僵尸对象启用并重新创建一个错误：

1) 按 cmd + Shift + ,

2) 在左侧面板中选择“运行”-> 在右侧面板中选择“诊断”

3) 在“启用僵尸对象”处设置复选框

并尝试重新创建一个错误，您的 Xcode 将显示错误在哪里。

# c# - GUI Cross Threading issue/Looking for a good example of a WinForm TextBox Autocomplete as you type from database

> ID：12032596
> 
> 赞同：1
> 
> 时间：2012-08-20T05:24:25.460
> 
> 标签：c#, winforms

I'm looking fr a good example of a WinForm Autocomplete textbox that goes to the database for a list of matching items much like Google's AutoSuggest search text box does.

For example, if the user types really fast we need not submit one database search for each keystoke, however, after retriving results, if the user has queued up additional keystokes that have not been searched, do another search.

Update:

For example,

I've never done multi -thread before in a WinForm app but I thought I would start up a new thread every time the contents of the Search Text box changed and I would query the database for matches. If the textbox changed by the time I got the results back, I would disregard the query results.

However, I am getting this error:

```
Cross-thread operation not valid: Control accessed from a thread other than the thread it was created o 
```

Here's my code:

```
 private void txtSearch_TextChanged(object sender, EventArgs e)
        {

            Thread newThread = new Thread(BeginSourceThread);
            newThread.Start(txtSearch.Text);
        }

        private void BeginSourceThread(object value)
        {

            string searchText = (string)value;

            AutoCompleteStringCollection autoCompleteItems = new AutoCompleteStringCollection();

            DataSet ds = MetaData.GetMatchingDatabaseObjects(txtSearch.Text, sqlConnectionStringBuilder.ConnectionString);
            DataTable dtbObjects = ds.Tables[0];

            if (txtSearch.Text != searchText)
            {
                return;
            }

            foreach (DataRow row in dtbObjects.Rows)
            {
                autoCompleteItems.Add(row["ObjectName"].ToString());
            }

            txtSearch.AutoCompleteCustomSource = autoCompleteItems;
            System.Diagnostics.Debug.WriteLine("Done Returning " + autoCompleteItems.Count.ToString() + " items.");

      } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:06:17.037

如果相关，请在[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)的典型示例中自动建议：

*   [动手实验](http://download.microsoft.com/download/C/5/D/C5D669F9-01DF-4FAF-BBA9-29C096C462DB/Rx%20HOL%20.NET.pdf)（见练习 5）
*   [DevCamp 2010 主题演讲](http://channel9.msdn.com/Blogs/codefest/DC2010T0100-Keynote-Rx-curing-your-asynchronous-programming-blues)（autosuggest 是现场演示之一）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:00:37.097

将该`txtSearch.AutoCompleteCustomSource = autoCompleteItems`行放在[`Invoke`](http://msdn.microsoft.com/en-us/library/a1hetckb.aspx)调用中，以确保您仅在主 UI 线程内修改 GUI：

```
Action<AutoCompleteStringCollection> action = items => txtSearch.AutoCompleteCustomSource = items;
Invoke(action, autoCompleteItems); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:43:02.407

以下是使用 Key_Down 事件刷新结果的方法：

[http://www.codeproject.com/Articles/243368/AutoComplete-Textbox](http://www.codeproject.com/Articles/243368/AutoComplete-Textbox)

# oop - Is this considered a good practice in OOP?

> ID：12032601
> 
> 赞同：0
> 
> 时间：2012-08-20T05:25:16.927
> 
> 标签：oop, methods

I am trying to learn the best practices for methods in OOP in general. So lets say I have this code (C# by the way):

```
class Player
{
    private Connection conn;
    public Update(Keyboard key)
    {
        if(key.IsPressedKey("a"))
        {
            // should move
            conn.SendPacketMovement(Movement.Left);
        }
    }
} 
```

If I wanted to call a method inside the Connection class instance, what should I do? I dont want to add a return value to the Update method because it doesn't seem like a really good practice.

What should I do in that case, when I want several classes to do different things? Should I use delegates and events? If so, how do I subscribe to them. Should I subscribe to them when I create the instance of Player?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:34:56.547

最后，一个方法总是在另一个方法的范围内被调用。然而，委托确实是一个很好的做法。例如，如果您的类行为可能由不同的委托以不同方式实现，您可以应用责任链模式来减少耦合[http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

# amazon-ec2 - 将 Amazon EC2 与 Rsync 同步

> ID：12032607
> 
> 赞同：0
> 
> 时间：2012-08-20T05:26:07.050
> 
> 标签：amazon-ec2, amazon-web-services, cloud, rsync

我在 Amazon EC2 中有 3 台带有弹性负载平衡的服务器。

*   服务器 1：主服务器。
*   服务器 2：复制。
*   服务器 3：复制。

“主”服务器存储我的 Ruby On Rails 应用程序，我将其部署到 /var/www 文件夹。

是否可以使用 Rsync 将文件从服务器 1 同步到 2 和 3？如果是，我该怎么做？如果不是，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:13:30.313

[我通过使用Mercurial](http://mercurial.selenic.com/)将其置于版本控制之下来保持某些网络服务器的 /var/www 同步（但任何版本控制系统都应该真正工作）。

比 rsync 为您提供更多跟踪差异和回滚的能力，但它是否合适可能取决于您的内容实际是什么（快速周转的大型二进制文件会很糟糕）。

如果您沿着这条路线走，请不要忘记配置一些重写规则，以便 .hgrc 文件夹（或等效文件夹）不可见。

# iphone - 横向模式 OpenGL ES 1.1

> ID：12032609
> 
> 赞同：1
> 
> 时间：2012-08-20T05:26:10.123
> 
> 标签：iphone, opengl-es

我在 iPhone 上使用 opengl es 1.1。

我最初为肖像写了所有看起来很棒的东西，但是当我切换到横向模式时，图形似乎被拉伸了......

关于如何取消拉伸的任何线索？

我基本上遵循本教程，但添加了正方形并添加了 shouldAutorotateToInterfaceOrientation 但图形仍然被拉伸： [http ://www.71squared.com/2011/03/tutorial-14-moving-to-3d/](http://www.71squared.com/2011/03/tutorial-14-moving-to-3d/)

代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft); 
}

- (void)drawFrame
{
    [(EAGLView *)self.view setFramebuffer];

    // Replace the implementation of this method to do your own custom drawing.
    static const GLfloat squareVertices[] = {
        -0.33f, -0.33f, 0.0f,
        0.33f, -0.33f, 0.0f,
        -0.33f,  0.33f, 0.0f,
        0.33f,  0.33f, 0.0f
    };

    static const GLubyte squareColors[] = {
        255, 255,   0, 255,
        0,   255, 255, 255,
        0,     0,   0,   0,
        255,   0, 255, 255,
    };

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // Position the camera back from the origin and slightly raised i.e. {0, 3, -6}
    static GLfloat z = 0;

    gluLookAt(0, 5, -10, 0, 0, 0, 0, 1, 0);
    z += 0.075f;

   // GL DRAW ARRAYS STUFF GOES HERE

   [(EAGLView *)self.view presentFramebuffer];
}

- (void)initOpenGLES1
{
    // Set the clear color
    glClearColor(0, 0, 0, 1.0f);

    // Projection Matrix config
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    CGSize layerSize = self.view.layer.frame.size;
    gluPerspective(45.0f, (GLfloat)layerSize.width / (GLfloat)layerSize.height, 0.1f, 750.0f);

    // Modelview Matrix config
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // This next line is not really needed as it is the default for OpenGL ES
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glDisable(GL_BLEND);

    // Enable depth testing
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);
    glDepthMask(GL_TRUE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:48:06.383

这是一个有点稀缺的信息。你是如何设置视口的？我最好的猜测是您错过了告诉您应用程序已更改方向的事件。您必须处理其中一个`willRotateToInterfaceOrientation:duration:`或`didRotateFromInterfaceOrientation:`并在那里设置新视口。`glRotate`根本没有必要。

# iphone - [array containsObject:id] 方法是如何工作的？

> ID：12032610
> 
> 赞同：0
> 
> 时间：2012-08-20T05:26:21.653
> 
> 标签：iphone, objective-c

方法是如何`[array containsObject:id]`工作的？是与地址进行比较还是将给定的对象属性与数组元素属性进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:30:12.820

您是否首先尝试查看此方法的[文档？](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BABCEJDI)

> `isEqual:`此方法通过向数组的每个对象发送消息（并将 anObject 作为参数传递给每个`isEqual:`消息）来确定数组中是否存在anObject。

并从[`isEqual:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-BBCCECDG)方法：

> 如果两个对象相等，则它们必须具有相同的哈希值。`isEqual:`如果您在子类中定义并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保你也在`hash`你的子类中定义。

我们可以从中得到的是，除非您正在比较两个预定义类型的对象（例如`NSArray`，无符号整数，对于*您*认为相等的对象，其值将相等。`NSString``- (NSUInteger)hash`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:30:53.373

它使用`isEqual:`.

如果指针比较是您想要的，请使用，如果没有匹配`indexOfObjectIdenticalTo:`，它将返回。`NSNotFound`*

# java - Cannot specify the ID of an Element with Java codes

> ID：12032612
> 
> 赞同：0
> 
> 时间：2012-08-20T05:26:29.173
> 
> 标签：java, html, jsp

I fetched some data from database, including the id of each row, and now I'm creating some elements, the ID's of these elements must contain the ID fetched from the Database.

```
<%
    //Database Codes...I got the rset...
    while (rset.next()) {
%>
<div id="<%=rset.getString(1)%>" class="messageContainer">
</div>
<%
    }
%> 
```

I'm getting the following error

```
Bad value " " for attribute "id" on element "div":An ID must not contain whitespace.
Syntax of id:
An ID consists of at least one character but must not contain whitespace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:33:32.130

ID 需要进行 URL 编码。

# windows - Can Visual Studio 2012 run from a RAM drive?

> ID：12032613
> 
> 赞同：3
> 
> 时间：2012-08-20T05:26:54.697
> 
> 标签：windows, visual-studio-2012

Can Visual Studio 2012 run from a ram drive instead from the boot drive? I would like it to run super fast. I already use an SSD, have 16G RAM and multi core CPU.

**Update:**

For people wondering if it all fits in RAM, I am planning to upgrade to 32G ram (MB supports up to 128GB ram) if needed. Also my Windows temp folder and asp.net temporary folder are already in the RAM drive.

I am looking for the steps where when the system boots, it copies VS, .NET framework and everything VS needs to run to the RAM drive.

Would Windows 8 help in any of this setup?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:30:16.877

将 Visual Studio 文件夹（符号链接）中的所有文件重定向到 RAM 磁盘。还有 .NET 框架文件，因为 Visual Studio 严重依赖 .NET 框架。

# visual-studio-2010 - 通过 VCXproj 将文件名作为编译标志传递

> ID：12032616
> 
> 赞同：0
> 
> 时间：2012-08-20T05:27:47.907
> 
> 标签：visual-studio-2010, msbuild

是否可以在 vcxproj.xml 中将文件名指定为编译时标志。我知道该`__FILE__`指令，但我只想提供文件名而不提供 C 文件的扩展名作为定义。我看不出我们如何为 ClCompile 项目组中包含的不同 C 文件提供不同的标志。我试过这个，但没有奏效： `<PreprocessorDefinitions Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">SRCFILE=%(Compile.Filename);%(PreprocessorDefinitions)</PreprocessorDefinitions>`

有什么建议可以同时使用 VS 2010 和 MSBuild 吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:46:17.827

最简单的方法是为每个 clcompile 标记指定一个预处理器定义，而不是..like..

```
<clcompile include="foo.c> <PreprocessorDefinitions>FILENAME="foo"</PreprocessorDefinitions></clcompile>' 
```

# php - 如何将 Yii 中的 CJuiDatePicker 附加到隐藏字段并在点击链接时显示日历？

> ID：12032621
> 
> 赞同：1
> 
> 时间：2012-08-20T05:28:38.023
> 
> 标签：php, yii

我有一个表格，我需要附上 CJuiDatePicker。
CJuiDatePicker 有`flat`选项，但如果是`true`，日历显示内联。
例如，我想通过单击链接来显示日历，并在检查日历中的值后操作 CJuiDatePicker 中的值。
这是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:49:17.100

您可以将 CJuiDatePicker flat 选项设置为 true，并将其隐藏在 id="HiddenCalendar" 的 div 中。

```
<div id="hiddenCalendar" style="display:none">
  <?php echo $this->widget('zii.widgets.CJuiDatePicker', array('flat'=>true)); ?>
</div>
<div class="row">
  <a href="javascript:$('#hiddenCalendar').toggle();">Show Calendar</a>
</div> 
```

# openssl - About TLS 1.2 support in openssl

> ID：12032623
> 
> 赞同：7
> 
> 时间：2012-08-20T05:28:50.110
> 
> 标签：openssl

Does openssl 1.0.1c (the latest stable version that I can find on the www.openssl.org) fully support TLS 1.2?

I have searched all the changelogs about openssl. Unfortunately, I can not find the information such as "fully support TLS 1.2". It just mentioned "Initial TLS v1.2 support" in the "changes between 1.0.0h and 1.0.1".

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:26:56.650

是的。

“支持 TLS v1.2 和 TLS v1.1。” -- [https://www.openssl.org/news/openssl-notes.html](https://www.openssl.org/news/openssl-notes.html)

# php - 恢复最近的mysql值

> ID：12032624
> 
> 赞同：0
> 
> 时间：2012-08-20T05:28:55.837
> 
> 标签：php, mysql

情况：我对数据库做了一些改动，然后做一些代码，然后返回受影响行的初始值。是否可以在使用某些功能进行更改后将行恢复为最近的值？

正如我现在所看到的：将所有数据读入一个数组，然后执行必要的更改并返回一个包含所有数据的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:32:28.153

简单的方法，在你的表中有一个“original_value”和“current_value”，并保持“original_value”不变。

使用“current_value”解决您的问题，当您需要恢复时，更新表以使“current_value”恢复为“original_value”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:33:35.250

是否可以在您的代码中使用事务？看看这篇文章[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:33:44.193

如果您正在使用`InnoDB`或其他支持事务的引擎，您可以执行以下操作：

```
mysql_query('SET AUTOCOMMIT=0');
mysql_query('START TRANSACTION');
// TODO make some changes...
mysql_query('ROLLBACK');
mysql_query('SET AUTOCOMMIT=1'); 
```

# objective-c - NewiPad to get RGB values of pixels in the logic is very slow

> ID：12032626
> 
> 赞同：0
> 
> 时间：2012-08-20T05:29:16.830
> 
> 标签：objective-c, xcode, ipad, opengl-es

NewiPad to get RGB values ​​of pixels in the logic is very slow but, iPad1, iPad2 is very fast.. Why?

```
- (RGB) getTouchAreaPixelRGB: (CGPoint) point
{
     NSString * str_BackImageName = @ "butterfly_BG.png";
     CGImageRef cgBackImage = CGImageRetain ([UIImage imageNamed: str_BackImageName]. CGImage);
     size_t width = CGImageGetWidth (cgBackImage);
     size_t height = CGImageGetHeight (cgBackImage);
     CGDataProviderRef backProvider = CGImageGetDataProvider (cgBackImage);
     CFDataRef backBitmapData = CGDataProviderCopyData (backProvider);
     const UInt8 * backData CFDataGetBytePtr (backBitmapData);

     RGB rgb;

     if ((point.x <width) && (point.y <height))
     {
         size_t offset = ((width * point.y) + point.x) * 4;
         rgb.nRed = backData [offset];
         rgb.nGreen = backData [offset +1];
         rgb.nBlue = backData [offset +2];
     }

     return rgb;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:37:15.387

只需进行代码优化：

如果此函数仅适用于“butterfly_BG.png”，则不要调用

```
NSString * str_BackImageName = @ "butterfly_BG.png";
 CGImageRef cgBackImage = CGImageRetain ([UIImage imageNamed: str_BackImageName]. CGImage);
 size_t width = CGImageGetWidth (cgBackImage);
 size_t height = CGImageGetHeight (cgBackImage);
 CGDataProviderRef backProvider = CGImageGetDataProvider (cgBackImage);
 CFDataRef backBitmapData = CGDataProviderCopyData (backProvider);
 const UInt8 * backData CFDataGetBytePtr (backBitmapData); 
```

每次。只需在应用程序启动时一次调用它。那么你的新功能将如何：

```
- (RGB) getTouchAreaPixelRGB: (CGPoint) point
{
 RGB rgb;

 if ((point.x <width) && (point.y <height))
 {
     size_t offset = ((width * point.y) + point.x) * 4;
     rgb.nRed = backData [offset];
     rgb.nGreen = backData [offset +1];
     rgb.nBlue = backData [offset +2];
 }

 return rgb;
} 
```

# javascript - HTMl5 电话和短信是否返回任何值？

> ID：12032629
> 
> 赞同：3
> 
> 时间：2012-08-20T05:29:50.690
> 
> 标签：javascript, ipad, html, cordova, sencha-touch

我正在构建一个示例 html5 应用程序，该应用程序旨在在 Iphone、Ipad、Andriod 设备上运行，应用程序包含与我们联系的功能，其中包括“tel”和“sms”功能，如果我在 Iphone 或 Andriod 中运行应用程序，它可以正常工作手机，Ipad 的问题是它不支持 html5 'tel' 或 'sms' ，所以我正在寻找替代解决方案，我想知道 'tel' 或 'sms' 标签是否返回任何值，基于返回值，我可以编写一个函数来避免 Ipad 或 Tab 设备的呼叫和短信功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:17:22.233

您可以使用以下链接：

```
<a href='callto:12345567890'>Click to call</a> 
```

应该可以在任何地方使用（包括在 Android、桌面浏览器等）

我不确定短信，因为我没有可以测试的手机。

# jquery - 如何使用其所在页面的 URL 自动填充表单文本区域？

> ID：12032635
> 
> 赞同：0
> 
> 时间：2012-08-20T05:30:21.453
> 
> 标签：jquery, forms, url, textarea

我在客户的网站上有一个“发送给朋友”表格。除了一件事之外，该表单效果很好 - 我无法将当前页面的 URL 自动填充到表单的文本区域中。

[http://www.litigationbusters.com/expert-witness.shtml](http://www.litigationbusters.com/expert-witness.shtml)

如果您向下滚动到底部，在浅蓝色条中是一个“发送”链接。点击它，表格就会出现。

我希望能够使用 jQuery 或其他同样独立于平台的东西来做到这一点，因为该站点目前位于 Windows 服务器上，但在不久的将来可能会迁移到 Linux 服务器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:44:41.160

要使用 jQuery 获取当前页面的 URL，可以使用

```
$(location).attr('href') 
```

或者只是在没有 jQuery 的情况下读取当前 URL，您可以使用

```
document.URL 
```

在页面加载时使用该值填充文本区域

```
$(document).ready(function() {
    var message = 'check out ' + document.URL;
    $('#message').text(message);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:53:37.080

*在不*使用 jQuery 的情况下，`<textarea />`可以在加载时自动填充。

 *假设您有以下 HTML：

```
<textarea id="my-textarea"></textarea> 
```

使用 vanilla JavaScript，您所要做的就是将以下 JavaScript 放在可以在`document`准备好后执行的地方：

```
document.getElementById('my-textarea').innerHTML = window.location; 
```

[你可以在这里](http://jsbin.com/ojemif/2/edit "在 textarea 中加载当前 URL")找到一个简单的例子。*

# asp.net - Asp.net Ajax Accordion：回传后保持打开 ajax 手风琴盘

> ID：12032636
> 
> 赞同：1
> 
> 时间：2012-08-20T05:30:27.720
> 
> 标签：asp.net, ajax, accordion

我在我的 on事件上使用`Ajax Accordion`了控件，我想设置我在 java 脚本中设置的控件属性。`Master Page``Page_Load``SelectedIndex``Accordion`

我的问题是每次**HiddenField1.Value = " "**`Page_Load`的值都没有。我没有得到我在 java 脚本中设置的隐藏字段的值，而是得到什么或空字符串。

 **下面是隐藏字段

```
<asp:HiddenField ID="HiddenField1" runat="Server"  /> 
```

**注意：（1）**我已经`HiddenField`完成了我的任务。 **(2)**我这样做是因为[Ajax Accordion](https://stackoverflow.com/questions/3574335/ajax-accordion-loses-current-pane?lq=1)在回发后丢失了当前窗格。

```
<script type="text/javascript">
        function pageLoad()
         {
            $find('<%= UserAccordion.ClientID %>' + '_AccordionExtender').add_selectedIndexChanged(onAccordionPaneChanged); 
        }

       function onAccordionPaneChanged(sender, eventArgs) 
         { 
           var selPane = sender.get_SelectedIndex();
           document.getElementById('<%=HiddenField1.ClientID%>').value = selPane;
           //alert("SelectedIndex:" + selPane  ); This message fires nicely so i have confirmed that this event work
         }
    </script> 
```

`.vb`以下是我在文件中的后端代码

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If HiddenField1.Value = "" Then
        Else

            UserAccordion.SelectedIndex = HiddenField1.Value

        End If
End Sub 
```

**编辑：** 手风琴控制代码。

```
<ajax:Accordion ID="UserAccordion" runat="server" SelectedIndex="0" HeaderCssClass="accordionHeader"
                            HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent"
                            FadeTransitions="true" SuppressHeaderPostbacks="true" TransitionDuration="250"
                            FramesPerSecond="40" RequireOpenedPane="false" AutoSize="None"  
                            Width="220px" >
                            <Panes >
                                <ajax:AccordionPane ID="AccordionPane1"  runat="server" >
                                    <Header>
                                        <a href="#" class="href">ST-ERP Modules</a></Header>
                                    <Content>
                                        <asp:Panel ID="UserReg" runat="server">
                                            <asp:TreeView runat="server" ID="treeMainMenu" DataSourceID="SiteMapDataSource1"
                                                NodeIndent="10" Width="150px" OnTreeNodeDataBound="treeMainMenu_TreeNodeDataBound">
                                                <ParentNodeStyle Font-Bold="False"></ParentNodeStyle>
                                                <HoverNodeStyle ForeColor="#447BD4" Font-Underline="True"></HoverNodeStyle>
                                                <SelectedNodeStyle HorizontalPadding="0px" ForeColor="#DD5555" VerticalPadding="0px"
                                                    Font-Bold="True" Font-Underline="True"></SelectedNodeStyle>
                                                <NodeStyle NodeSpacing="0px" HorizontalPadding="0px" ForeColor="#447BD4" VerticalPadding="0px"
                                                    Font-Size="8pt" Font-Names="Verdana"></NodeStyle>
                                            </asp:TreeView>
                                        </asp:Panel>
                                    </Content>
                                </ajax:AccordionPane>
                                <ajax:AccordionPane ID="AccordionPane2" runat="server">
                                    <Header>
                                        <a href="#" class="href">User Detail</a></Header>
                                    <Content>
                                        <asp:Panel ID="Panel1" runat="server">
                                            <asp:TreeView runat="server" ID="TreeView1" DataSourceID="SiteMapDataSource2" NodeIndent="10"
                                                Width="150px">
                                                <ParentNodeStyle Font-Bold="False"></ParentNodeStyle>
                                                <HoverNodeStyle ForeColor="white" Font-Underline="True"></HoverNodeStyle>
                                                <SelectedNodeStyle HorizontalPadding="0px" ForeColor="#DD5555" VerticalPadding="0px"
                                                    Font-Bold="True" Font-Underline="True"></SelectedNodeStyle>
                                                <NodeStyle NodeSpacing="0px" HorizontalPadding="0px" ForeColor="White" VerticalPadding="0px"
                                                    Font-Size="8pt" Font-Names="Verdana"></NodeStyle>
                                            </asp:TreeView>
                                        </asp:Panel>
                                    </Content>
                                </ajax:AccordionPane>
                                <ajax:AccordionPane ID="AccordionPane3" runat="server">
                                    <Header>
                                        <a href="#" class="href">Job Details</a>
                                    </Header>
                                    <Content>
                                        <asp:Panel ID="Panel2" runat="server">
                                            ddddddddddddd</asp:Panel>
                                    </Content>
                                </ajax:AccordionPane>
                            </Panes>
                        </ajax:Accordion> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:01:52.617

尝试在两个树视图的`TreeNodeDataBound`事件处理程序中清除节点的 NavigateUrl 属性：

```
protected void treView_TreeNodeDataBound(object sender, TreeNodeEventArgs e)
{
    e.Node.NavigateUrl = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:19:20.940

我已经解决了这个问题，请参阅我在这篇文章 [Ajax Accordion Loses Current Pane上的回答](https://stackoverflow.com/questions/3574335/ajax-accordion-loses-current-pane?lq=1)

**下面如果链接断开：**

`Query String`我确实通过使用下面的链接来解决这个问题

```
url="~/Opportunity/Indent.aspx?index=1" // replace 1 with your desired index 
```

在页面加载事件中写这样的东西

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 

        Dim selectedindex As String = Request.QueryString("index")
        UserAccordion.SelectedIndex = selectedindex

    End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T19:47:11.310

我使用会话变量（即 Accordion.SelectedIndex = Session("AccordionIndex") 但 QueryString 也可以正常工作（除非您想抑制 URL 中的索引，否则会话状态会更好）**

# php - 日期验证有问题

> ID：12032639
> 
> 赞同：-2
> 
> 时间：2012-08-20T05:30:46.260
> 
> 标签：php, validation, date

我正在进行日期验证，但它一直给我一条错误消息

> 注意：未定义变量：第 15 行 C:\xampp\htdocs\signup.php 中的部分

```
if (empty($_POST['birthday']))
    // the user's date of birth cannot be a null string
    $errors[] = "You must supply a date of birth.";
else if (!strpos("^([0-9]{2})/([0-9]{2})/([0-9]{4})$", $_POST['birthday'], $parts))
    // Check the format
    $errors[] = "The date of birth is not a valid date in the " .
        "format DD/MM/YYYY";
elseif (!checkdate($parts[2],$parts[1],$parts[3]))
    $errors[] = "The date of birth is invalid. " .
        "Please check that the month is between 1 and 12, " .
        "and the day is valid for that month.";
elseif (intval($parts[3]) < 1890)
    // Make sure that the user has a reasonable birth year
    $errors[] = "You must be alive to use this service."; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:58:37.130

我昨晚刚刚回答了一些关于这个的问题。你太辛苦了！

PHP 已经有许多不同的验证器。使用 checkdate 代替 REGEX 进行验证

参考： http: [//php.net/manual/en/function.checkdate.php](http://php.net/manual/en/function.checkdate.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:40:05.607

问题是您为正则表达式匹配使用了错误的函数。

采用`preg_match("/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/", $_POST['birthday'], $parts)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:40:14.653

你的使用`strpos`是错误的。检查[strpos 手册](http://php.net/manual/de/function.strpos.php)。

第三个参数可用于指定从哪里开始，而不是指定用于正则表达式模式匹配的目标数组，您从哪里得到 strpos 可以做到这一点的想法？strpos 根本不支持正则表达式。

您应该改用[preg_match_all](http://www.askaboutphp.com/25/regex-extract-content.html)，例如：

```
preg_match_all("{^([0-9]{2})/([0-9]{2})/([0-9]{4})$}", $_POST['birthday'], $parts); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T05:42:09.320

您有一个致命的错误，即变量 $part 仅在第一个 if 语句中起作用。尝试在第一个 if 语句之后添加：

```
$part = strpos("^([0-9]{2})/([0-9]{2})/([0-9]{4})$", $_POST['birthday']) 
```

您还想尝试：[LiveValidation](http://livevalidation.com/)以获得更好的验证

或使用此功能：[checkdate](http://php.net/manual/en/function.checkdate.php)

# python - 如何在 Rpy2 中使用数据库中的数据进行绘图？

> ID：12032646
> 
> 赞同：0
> 
> 时间：2012-08-20T05:31:18.683
> 
> 标签：python, r, plot, rpy2

数据存储在一个名为“data”的数据库中，其中包含“month”和“traffic”两列。该表如下所示：

```
+-----------+---------+
| month     | traffic |
+-----------+---------+
| January   |    1000 |
| February  |     100 |
| March     |   10430 |
| April     |    1500 |
| May       |     100 |
| June      |    1200 |
| July      |     800 |
| August    |    8000 |
| September |  100000 |
+-----------+---------+ 
```

现在我已经使用 python 从数据库中提取了数据。我希望使用这些数据进行绘图。这是我的代码：

```
#usr/bin/python

import MySQLdb as mdb
import rpy2.robjects as robjects
r = robjects.r

def database():
    """Retrieves the data from the database"""

    #Database Connection
    con = mdb.connect('localhost', 'root', 'devil', 'data');

    with con:
        #Submit statements to SQL server
        cursor = con.cursor()       
        cursor.execute("SELECT * FROM traffic")

        #Retrieves data from SQL
        rows = cursor.fetchall()  
        for row in rows:
            row = list(row)
            x = row[1:]
            y = row[:-1]
            r.plot(x, y)

database() 
```

我想使用变量 x 进行绘图，而 yrplot(x, y) 不起作用。这是错误：

```
 res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in plot.window(...) : need finite 'ylim' values 
```

我该如何绘图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:10:39.533

忘记循环。看看什么是“行”。它是数据库行值的元组列表。大概。打印它并向我们展示什么是“行”。

然后你只需要将这些元组解包到列表 x 和 y 中，将月份映射到整数或有序因子，然后调用 r.plot(x,y)。

# java - 这些 BST 算法中哪一个更实用？

> ID：12032652
> 
> 赞同：0
> 
> 时间：2012-08-20T05:32:00.103
> 
> 标签：java, algorithm, data-structures, recursion, tail-recursion

我这里有两种反映 BST 的算法。它们都工作正常，但据我了解，第二个是递归的，第一个是尾递归的。我知道在 Java 中，编译器不会针对尾递归进行优化，但我的问题是——在任何其他语言中，这两种算法中哪种算法更好？这是一个过于主观的问题吗？

```
public Node mirror(Node root, Node newRoot) {
    newRoot.item = root.item;
    if (root.right != null) {
        newRoot.left = new Node();
        newRoot.left.item = root.right.item;
        mirror(root.right, newRoot.left);
    }
    if (root.left != null) {
        newRoot.right = new Node();
        newRoot.right.item = root.left.item;
        mirror(root.left, newRoot.right);
    }
    return newRoot;
}

///VERSION 2////

public Node mirror(Node currentNode) {
    if (currentNode == null) {
        return null;
    } else {
        Node newnode = new Node();
        newnode.item = currentNode.item;
        newnode.left = mirror(currentNode.right);
        newnode.right = mirror(currentNode.left);
        return newnode;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:09:56.703

一些东西：

首先，许多命令式语言没有针对尾递归进行优化。这对于函数式语言来说是很常见的，如果你想要这个特性，你应该使用其中之一。Scala 可能是一个不错的举措，因为它使用 JVM。此外，使用 Scala，您需要专门注释要使尾递归的内容

其次，第二段代码不是尾递归的。尾递归是一个相当强的要求：如果代码以连续传递方式解释，递归调用必须是最后执行的事情。实际上，这意味着您的 return 语句必须是唯一进行递归的东西。例如，在类 C 的伪代码中：

```
int factorial(int x) {
  if (x == 0) return 1;
  else return x*factorial(x-1);
} 
```

这*不是*尾递归，因为乘法需要在递归调用之后但在 return 语句之前完成。这是一个尾递归版本：

```
int factorial_helper(int acc, int x) {
   if (x == 0) return acc;
   else return factorial_helper(acc*x, x-1);
}

int factorial(int x) { return factorial_helper(1, x); } 
```

您可以在 factorial_helper 中看到递归调用返回的值正是函数返回的值——这就是使尾递归的原因。

在您的第二个算法中，有两个递归调用。在每个递归调用中，镜像树的地址都存储在新节点中。然后返回newnode的地址（Java偷偷有指针）。因此，这不是尾递归编写的，因为您没有返回递归调用的确切结果。

第三：对于这样的事情，查看哪个性能更好的最佳方法是同时运行和基准测试:)。仅靠算法我看不到任何明显的赢家（也许其他人会这样做？）。看起来不会有任何渐近差异，尽管将其重写为实际上是尾递归可能会加快速度。

# objective-c - iOS动画imageView消失

> ID：12032654
> 
> 赞同：0
> 
> 时间：2012-08-20T05:32:17.263
> 
> 标签：objective-c, ios, core-animation, core-graphics

我正在为一个单人作业制作一个简单的游戏，并且我已经完成了所有要求，但是我遇到了以下令人恼火的问题：

我有一个 UIImageView，（显示硬币的图像），当点击屏幕时，它会动画以模拟旋转。我使用以下代码执行此操作（简化为仅显示相关内容）：

```
- (void)spinCoin:(int)times
{
    // Create a block scoped variable to store the amount of spins.
    __block int blockTimes = times;

    // Animate the coin to spin.
    [UIView animateWithDuration:0.1
                          delay:0.0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{
                         coinImageView.transform = CGAffineTransformMakeScale(0.001, 1);
                     }
                     completion:^(BOOL completed){
                         [UIView animateWithDuration:0.1
                                               delay:0.0
                                             options: UIViewAnimationCurveEaseOut
                                          animations:^{
                                              coinImageView.transform = CGAffineTransformMakeScale(1, 1);
                                          }
                                          completion:^(BOOL finished){
                                              if (blockTimes < 4) {
                                                  // Spin 4 times.
                                                  [self spinCoins:blockTimes+1];
                                              }
                                          }];
                     }];
} 
```

此方法在 touchesEnded 中调用。

本质上，它只是将 x 轴上的硬币图像缩放为 0，然后一旦完成，将其缩放回 1（并重复 4 次）。

尽管有点乱（哦，上帝的封锁），但它工作得很好，但是如果我点击主页按钮，然后重新打开应用程序，如果我点击屏幕，硬币翻转 1-3 次，然后 imageView 完全消失。控制台中没有错误等。

有谁知道这可能是什么原因造成的？核心图形/动画和应用程序移出后台是否存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:03:10.813

试试这个：

*   运行动画
*   等待它完成
*   单击顶部的电源按钮，屏幕变黑
*   再次单击电源按钮，滑动解锁按钮
*   点击屏幕

现在乱了吗？如果是这样，那么我猜你收到了一条你没想到的消息，比如“viewDidAppear”，或者“times”被重置了——类似的东西。

我在我的应用程序中使用了大量的核心图形和动画，并且从未遇到过与 iOS 系统相关的问题。可以肯定的是，您的代码中的某些内容与您收到但未预料到的某些消息有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:06:44.747

我不确定为什么您的图像视图会消失，但是您的递归代码没有意义。如果 blockTimes 参数小于 4，则 INCREMENT 它并递归调用该方法。

我会在方法条目、两个动画块和完成方法中添加日志语句以查看发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:09:26.627

问题是，由于我用于硬币图像的 UIImage 引用设置为“弱”，这似乎导致应用程序进入后台后释放图像。

将属性更改为“强”解决了问题。

感谢你的帮助 ：）。

# ruby-on-rails - 如何在 Rails 应用程序中设置 qiwi 支付网关？

> ID：12032656
> 
> 赞同：0
> 
> 时间：2012-08-20T05:32:42.143
> 
> 标签：ruby-on-rails, payment-gateway

是否有任何文件可以在 ruby​​ on rails 上集成支付网关与 qiwi（用于俄罗斯卢布）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:53:04.600

使用此文档： [https ://ishop.qiwi.ru/docs/OnlineStoresProtocols_SOAP.pdf](https://ishop.qiwi.ru/docs/OnlineStoresProtocols_SOAP.pdf)

这个宝石：[http ://savonrb.com/](http://savonrb.com/)

# opencv - OPENCV 中给定矩阵的错误形状

> ID：12032658
> 
> 赞同：2
> 
> 时间：2012-08-20T05:32:54.423
> 
> 标签：opencv

我正在尝试使用 opencv 进行面部识别。为此，训练和测试图像的大小必须相同。所以我使用了这个功能：

```
resize(testing,output, images[0].size(),0,0,INTER_NEAREST); 
```

其中 testing 是我来自网络摄像头的 Mat ， Output 是调整大小的图像 ， images[0].size() 是我的矢量图像数据库。但是我收到以下错误：

```
OpenCV Error: Bad argument (Wrong shapes for given matrices. Was size(src) = (1,921600), 
size(W) = (307200,6).) in subspaceProject,
file /home/someplae/OpenCV-2.4.2/modules/contrib/src/lda.cpp, 
line 187
terminate called after throwing an instance of 'cv::Exception'
what():  /home/someplace/OpenCV-2.4.2/modules/contrib/src/lda.cpp:187: 
error: (-5) Wrong shapes for given matrices. Was size(src) = (1,921600), size(W) = (307200,6). 
in function subspaceProject 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T06:18:10.423

尽管您没有提供足够的代码来验证，但我可以从给定数量的元素中推断出问题所在。你的测试矩阵是`921600 = 3 * 307200`......所以我猜你的输入矩阵不是灰度矩阵，但仍然是 BGR 表示。

在调整矩阵大小之前，您应该使用[cv::cvtColor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#void%20cvtColor%28InputArray%20src,%20OutputArray%20dst,%20int%20code,%20int%20dstCn%29)将矩阵转换为灰度：

*   [http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html)

# java - Java 音频流 (mp3spi 库)，UnsupportedAudioFileException

> ID：12032663
> 
> 赞同：0
> 
> 时间：2012-08-20T05:33:21.307
> 
> 标签：java, audio, stream, classpath

我已经看到了多个关于流 MP3 流（如 Icecast）的 Stack Overflow 问题。他们都说要使用 MP3SPI 库，我就是这样。MP3SPI 用于允许对`audio/mpeg`mime 类型的支持。这就是我的 Icecast 流。我的类路径中的所有三个 jar 文件都正确，但是在使用它们在示例中提供的相同代码时，我仍然得到`UnsupportedAudioFileException`：

```
 javax.sound.sampled.UnsupportedAudioFileException: could not get audio input str
eam from input URL
    at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:
1153)
    at DJUtils.testPlay(DJUtils.java:16)
    at DJ.play(DJ.java:13)
    at DJ.init(DJ.java:4)
    at Loader.main(Loader.java:69) 
```

这是我的代码：

```
public static void testPlay(){
    try {
        AudioInputStream in= AudioSystem.getAudioInputStream(new URL("http://localhost:8000/listen.m3u"));
        AudioInputStream din = null;
        AudioFormat baseFormat = in.getFormat();
        AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                baseFormat.getSampleRate(),
                16,
                baseFormat.getChannels(),
                baseFormat.getChannels() * 2,
                baseFormat.getSampleRate(),
                false);
        din = AudioSystem.getAudioInputStream(decodedFormat, in);
        // Play now.
        rawplay(decodedFormat, din);
        in.close();
    } catch (Exception e){
        e.printStackTrace();
    }
}

private static void rawplay(AudioFormat targetFormat, AudioInputStream din) throws LineUnavailableException, IOException{
    try{
        byte[] data = new byte[4096];
        SourceDataLine line = getLine(targetFormat);
        if (line != null)
        {
            // Start
            line.start();
            int nBytesRead = 0, nBytesWritten = 0;
            while (nBytesRead != -1)
            {
                nBytesRead = din.read(data, 0, data.length);
                if (nBytesRead != -1) nBytesWritten = line.write(data, 0, nBytesRead);
            }
            // Stop
            line.drain();
            line.stop();
            line.close();
            din.close();
        }
    }catch(IOException e){
        e.printStackTrace();
    }
}

private static SourceDataLine getLine(AudioFormat audioFormat) throws LineUnavailableException{
    try{
        SourceDataLine res = null;
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);
        res = (SourceDataLine) AudioSystem.getLine(info);
        res.open(audioFormat);
        return res;
    }catch(LineUnavailableException e){
        e.printStackTrace();
        return null;
    }
} 
```

我这个项目的启动脚本：

```
java -Dfile.encoding=Cp1252 -classpath bin;lib/libs.jar;lib/graphics.jar;lib/mp3spi/mp3spi.jar;lib/mp3spi/jl.jar;lib/mp3spi/tritonus.jar; Loader 
```

我的 Icecast 控制面板说它目前正在流式传输`audio/mpeg`。我可以通过在任何媒体播放器中打开我的代码中的 URL 来访问我的流。有人可以指出我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:13:07.453

mp3spi 库本身不将 m3u 播放列表文件视为受支持的文件。

尝试使用 m3u 文件中使用的真实流 url。即直接指向mp3 文件或流的url。

检查下面的功能。它直接来自 MpegAudioFileReader.java，mp3spi 库用于识别您使用 URL 呈现的数据流的格式。它无法识别 m3u 文件。如果需要，可以从[http://www.javazoom.net/mp3spi/sources.html](http://www.javazoom.net/mp3spi/sources.html)查看源代码。

```
 public AudioFileFormat getAudioFileFormat(InputStream inputStream, long mediaLength) throws UnsupportedAudioFileException, IOException
{
    if (TDebug.TraceAudioFileReader) TDebug.out(">MpegAudioFileReader.getAudioFileFormat(InputStream inputStream, long mediaLength): begin");
    HashMap aff_properties = new HashMap();
    HashMap af_properties = new HashMap();
    int mLength = (int) mediaLength;
    int size = inputStream.available();
    PushbackInputStream pis = new PushbackInputStream(inputStream, MARK_LIMIT);
    byte head[] = new byte[22];
    pis.read(head);
    if (TDebug.TraceAudioFileReader)
    {
        TDebug.out("InputStream : " + inputStream + " =>" + new String(head));
    }

    // Check for WAV, AU, and AIFF, Ogg Vorbis, Flac, MAC file formats.
    // Next check for Shoutcast (supported) and OGG (unsupported) streams.
    if ((head[0] == 'R') && (head[1] == 'I') && (head[2] == 'F') && (head[3] == 'F') && (head[8] == 'W') && (head[9] == 'A') && (head[10] == 'V') && (head[11] == 'E'))
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("RIFF/WAV stream found");
        int isPCM = ((head[21]<<8)&0x0000FF00) | ((head[20])&0x00000FF);
        if (weak == null)
        {
            if (isPCM == 1) throw new UnsupportedAudioFileException("WAV PCM stream found");
        }

    }
    else if ((head[0] == '.') && (head[1] == 's') && (head[2] == 'n') && (head[3] == 'd'))
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("AU stream found");
        if (weak == null) throw new UnsupportedAudioFileException("AU stream found");
    }
    else if ((head[0] == 'F') && (head[1] == 'O') && (head[2] == 'R') && (head[3] == 'M') && (head[8] == 'A') && (head[9] == 'I') && (head[10] == 'F') && (head[11] == 'F'))
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("AIFF stream found");
        if (weak == null) throw new UnsupportedAudioFileException("AIFF stream found");
    }
    else if (((head[0] == 'M') | (head[0] == 'm')) && ((head[1] == 'A') | (head[1] == 'a')) && ((head[2] == 'C') | (head[2] == 'c')))
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("APE stream found");
        if (weak == null) throw new UnsupportedAudioFileException("APE stream found");
    }
    else if (((head[0] == 'F') | (head[0] == 'f')) && ((head[1] == 'L') | (head[1] == 'l')) && ((head[2] == 'A') | (head[2] == 'a')) && ((head[3] == 'C') | (head[3] == 'c')))
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("FLAC stream found");
        if (weak == null) throw new UnsupportedAudioFileException("FLAC stream found");
    }
    // Shoutcast stream ?
    else if (((head[0] == 'I') | (head[0] == 'i')) && ((head[1] == 'C') | (head[1] == 'c')) && ((head[2] == 'Y') | (head[2] == 'y')))
    {
        pis.unread(head);
        // Load shoutcast meta data.
        loadShoutcastInfo(pis, aff_properties);
    }
    // Ogg stream ?
    else if (((head[0] == 'O') | (head[0] == 'o')) && ((head[1] == 'G') | (head[1] == 'g')) && ((head[2] == 'G') | (head[2] == 'g')))
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("Ogg stream found");
        if (weak == null) throw new UnsupportedAudioFileException("Ogg stream found");
    }
    // No, so pushback.
    else
    {
        pis.unread(head);
    }
    // MPEG header info.
    int nVersion = AudioSystem.NOT_SPECIFIED;
    int nLayer = AudioSystem.NOT_SPECIFIED;
    int nSFIndex = AudioSystem.NOT_SPECIFIED;
    int nMode = AudioSystem.NOT_SPECIFIED;
    int FrameSize = AudioSystem.NOT_SPECIFIED;
    int nFrameSize = AudioSystem.NOT_SPECIFIED;
    int nFrequency = AudioSystem.NOT_SPECIFIED;
    int nTotalFrames = AudioSystem.NOT_SPECIFIED;
    float FrameRate = AudioSystem.NOT_SPECIFIED;
    int BitRate = AudioSystem.NOT_SPECIFIED;
    int nChannels = AudioSystem.NOT_SPECIFIED;
    int nHeader = AudioSystem.NOT_SPECIFIED;
    int nTotalMS = AudioSystem.NOT_SPECIFIED;
    boolean nVBR = false;
    AudioFormat.Encoding encoding = null;
    try
    {
        Bitstream m_bitstream = new Bitstream(pis);
        aff_properties.put("mp3.header.pos", new Integer(m_bitstream.header_pos()));
        Header m_header = m_bitstream.readFrame();
        // nVersion = 0 => MPEG2-LSF (Including MPEG2.5), nVersion = 1 => MPEG1
        nVersion = m_header.version();
        if (nVersion == 2) aff_properties.put("mp3.version.mpeg", Float.toString(2.5f));
        else aff_properties.put("mp3.version.mpeg", Integer.toString(2 - nVersion));
        // nLayer = 1,2,3
        nLayer = m_header.layer();
        aff_properties.put("mp3.version.layer", Integer.toString(nLayer));
        nSFIndex = m_header.sample_frequency();
        nMode = m_header.mode();
        aff_properties.put("mp3.mode", new Integer(nMode));
        nChannels = nMode == 3 ? 1 : 2;
        aff_properties.put("mp3.channels", new Integer(nChannels));
        nVBR = m_header.vbr();
        af_properties.put("vbr", new Boolean(nVBR));
        aff_properties.put("mp3.vbr", new Boolean(nVBR));
        aff_properties.put("mp3.vbr.scale", new Integer(m_header.vbr_scale()));
        FrameSize = m_header.calculate_framesize();
        aff_properties.put("mp3.framesize.bytes", new Integer(FrameSize));
        if (FrameSize < 0) throw new UnsupportedAudioFileException("Invalid FrameSize : " + FrameSize);
        nFrequency = m_header.frequency();
        aff_properties.put("mp3.frequency.hz", new Integer(nFrequency));
        FrameRate = (float) ((1.0 / (m_header.ms_per_frame())) * 1000.0);
        aff_properties.put("mp3.framerate.fps", new Float(FrameRate));
        if (FrameRate < 0) throw new UnsupportedAudioFileException("Invalid FrameRate : " + FrameRate);
        if (mLength != AudioSystem.NOT_SPECIFIED)
        {
            aff_properties.put("mp3.length.bytes", new Integer(mLength));
            nTotalFrames = m_header.max_number_of_frames(mLength);
            aff_properties.put("mp3.length.frames", new Integer(nTotalFrames));
        }
        BitRate = m_header.bitrate();
        af_properties.put("bitrate", new Integer(BitRate));
        aff_properties.put("mp3.bitrate.nominal.bps", new Integer(BitRate));
        nHeader = m_header.getSyncHeader();
        encoding = sm_aEncodings[nVersion][nLayer - 1];
        aff_properties.put("mp3.version.encoding", encoding.toString());
        if (mLength != AudioSystem.NOT_SPECIFIED)
        {
            nTotalMS = Math.round(m_header.total_ms(mLength));
            aff_properties.put("duration", new Long((long) nTotalMS * 1000L));
        }
        aff_properties.put("mp3.copyright", new Boolean(m_header.copyright()));
        aff_properties.put("mp3.original", new Boolean(m_header.original()));
        aff_properties.put("mp3.crc", new Boolean(m_header.checksums()));
        aff_properties.put("mp3.padding", new Boolean(m_header.padding()));
        InputStream id3v2 = m_bitstream.getRawID3v2();
        if (id3v2 != null)
        {
            aff_properties.put("mp3.id3tag.v2", id3v2);
            parseID3v2Frames(id3v2, aff_properties);
        }
        if (TDebug.TraceAudioFileReader) TDebug.out(m_header.toString());
    }
    catch (Exception e)
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("not a MPEG stream:" + e.getMessage());
        throw new UnsupportedAudioFileException("not a MPEG stream:" + e.getMessage());
    }
    // Deeper checks ?
    int cVersion = (nHeader >> 19) & 0x3;
    if (cVersion == 1)
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("not a MPEG stream: wrong version");
        throw new UnsupportedAudioFileException("not a MPEG stream: wrong version");
    }
    int cSFIndex = (nHeader >> 10) & 0x3;
    if (cSFIndex == 3)
    {
        if (TDebug.TraceAudioFileReader) TDebug.out("not a MPEG stream: wrong sampling rate");
        throw new UnsupportedAudioFileException("not a MPEG stream: wrong sampling rate");
    }
    // Look up for ID3v1 tag
    if ((size == mediaLength) && (mediaLength != AudioSystem.NOT_SPECIFIED))
    {
        FileInputStream fis = (FileInputStream) inputStream;
        byte[] id3v1 = new byte[128];
        long bytesSkipped = fis.skip(inputStream.available() - id3v1.length);
        int read = fis.read(id3v1, 0, id3v1.length);
        if ((id3v1[0] == 'T') && (id3v1[1] == 'A') && (id3v1[2] == 'G'))
        {
            parseID3v1Frames(id3v1, aff_properties);
        }
    }
    AudioFormat format = new MpegAudioFormat(encoding, (float) nFrequency, AudioSystem.NOT_SPECIFIED // SampleSizeInBits - The size of a sample
            , nChannels // Channels - The number of channels
            , -1 // The number of bytes in each frame
            , FrameRate // FrameRate - The number of frames played or recorded per second
            , true, af_properties);
    return new MpegAudioFileFormat(MpegFileFormatType.MP3, format, nTotalFrames, mLength, aff_properties);
} 
```

# html - 在另一个 HTML 页面中加载一个 HTML 页面

> ID：12032664
> 
> 赞同：24
> 
> 时间：2012-08-20T05:33:24.333
> 
> 标签：html

我需要在单击按钮时在另一个 HTML 页面中显示或加载 HTML 页面。我需要在以主 html 页面为背景的弹出窗口中使用它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-20T05:45:42.843

`iframe`是您可用于将其他 html 页面调用到您的网页中的标签

```
<iframe src="http://www.google.co.in" name="targetframe" allowTransparency="true" scrolling="no" frameborder="0" >
    </iframe> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-07T13:46:32.980

你可以使用 jQuery

```
<html> 
  <head> 
    <script src="jquery.js"></script> 
    <script> 
    $(function(){
      $("#divId").load("b.html"); 
    });
    </script> 
  </head> 

  <body> 
     <div id="divId" style="display:none;"></div>
  </body> 
</html> 
```

在单击事件上，您可以使其显示块。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T05:43:22.327

使用 iframe 在页面中加载页面。以下应该作为一个很好的起点。

```
<body>
  <div>
    <iframe src="page1.html" name="targetframe" allowTransparency="true" scrolling="no" frameborder="0" >
    </iframe>
  </div>

  <br/>

  <div>
    <a href="page2.html" target="targetframe">Link to Page 2</a><br />
    <a href="page3.html" target="targetframe">Link to Page 3</a>
  </div>
</body> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-15T10:30:12.560

你为什么不使用

```
function jsredir() {
  window.location.href = "https://stackoverflow.com";
}
```

```
<button onclick="jsredir()">Click Me!</button>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-20T05:49:00.157

您要问的不是弹出窗口，而是灯箱。为此，诀窍是在后面显示一个半透明层（称为叠加层），并在其上方显示需要 div 的层。

希望你熟悉基本的 javascript。使用以下代码。使用 javascript，将 display:block 更改为 display:none 以显示/隐藏弹出窗口。

```
<div style="background-color: rgba(150, 150, 150, 0.5); overflow: hidden; position: fixed; left: 0px; top: 0px; bottom: 0px; right: 0px; z-index: 1000; display:block;">
    <div style="background-color: rgb(255, 255, 255); width: 600px; position: static; margin: 20px auto; padding: 20px 30px 0px; top: 110px; overflow: hidden; z-index: 1001; box-shadow: 0px 3px 8px rgba(34, 25, 25, 0.4);">
        <iframe src="otherpage.html" width="400px"></iframe>
    </div>
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T06:25:24.483

你可以试试fancybox： http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

你只需要加载 jquery 和 fancybox.css 和 fancybox.js ：

```
<!-- Add jquery -->
<script type="text/javascript" src="jquery.min.js"></script>

<!-- Add fancyBox -->
<link rel="stylesheet" href="jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="jquery.fancybox.pack.js"></script> 
```

并在您的页面中添加 js 代码：

```
$("youBtnSelector").click(function() {
    $.fancybox.open({
        href : 'you html path',
        type : 'iframe',
        padding : 5
    });
}) 
```

这很容易做到

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-20T05:42:05.370

```
<button onclick="window.open('http://www.google.com');">Open popup</button> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-20T05:51:53.853

怎么样

```
<button onclick="window.open('http://www.google.com','name','width=200,height=200');">Open</button> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-20T05:59:55.237

如果您正在页面中寻找一个弹出窗口，那**不是**一个新的浏览器窗口，那么我会看看 Javascript 中的各种“LightBox”实现。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-15T14:00:29.243

iframe 非常适合它的功能，但它不是弹出窗口。我在我的一些页面上使用它，这样浏览器只需要加载新内容，这使得加载速度更快并节省带宽。

使用在当前窗口顶部加载的弹出窗口，这是弹出窗口的真正目的，在不卸载您所在页面的情况下在您所在的页面上显示内容。iFrame 用于在窗口中显示内容时保留主页。拥有带有 < *editable content > 的默认页面的旧方法有些过时了。其他人提供了代码，我将使用 -onclick- 函数添加是否具有 -popup- 透明度。我不会去的！

希望这可以解决问题。

# java - 使用 Scanner 类解析字符串

> ID：12032669
> 
> 赞同：1
> 
> 时间：2012-08-20T05:33:43.937
> 
> 标签：java, regex

我正在尝试解析一些行并检查它们的值，例如在字符串中：

```
 " 1 ON OFF"; 
```

我必须检查是否：

*   第一个字符为空白。
*   第二个字符是 int。
*   第三个字符为空白。
*   第四个字符是 2 个字符并且它是 ON。
*   第五个字符为空白。
*   第 6 个字符为 3 个字符，为 OFF。

我可以使用正则表达式一次性做到这一点，但我想要的是在每次检查后我必须显示是否正确，例如：

```
 System.out.println("1st character is not a blank : incorrect");
   System.out.println("1st character is blank : correct"); 
```

我想过为此使用`Scanner`类，但是当我尝试检测第一个字符时，它显示`1`字符串而不是空白，

```
 " 1 ON OFF";

   public class NewClass {    

    public void StringExample(){
        String str = " 1 ON OFF";

        Scanner sc = new Scanner(str);
        System.out.println(sc.next());
    }

    public static void main(String args[]){
        NewClass nc = new NewClass();
        nc.StringExample();
    }
} 
```

java中是否还有其他可以轻松完成的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:40:50.107

我能想到的最接近的是按字边界分割：

```
String tokens[] = " 1 ON OFF".split("\\b"); 
```

它将给出以下数组：

```
{ " ", "1", " ", "ON", " ", "OFF" } 
```

它符合您的订单和您对第 1-6 个“字符”的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:52:46.880

您可以使用[parboiled](https://github.com/sirthias/parboiled/wiki/Simple-Java-Example)并声明一个小语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T05:54:22.320

另一种选择：

```
public static void main(String[] args) throws IOException
    {

        String patternString = " 1 ON OFF";
        boolean pass = true;

            if (patternString.charAt(0) != ' ' && patternString.charAt(2) != ' ') {
                pass = false;
            }

            int digit = Character.getNumericValue(patternString.charAt(1));

            if (digit < 0 && digit > Integer.MAX_VALUE) {
                pass = false;
            }

            if (patternString.charAt(3) != 'O' && patternString.charAt(4) != 'N') {
                pass = false;
            }

            if (patternString.charAt(5) != ' ' && patternString.charAt(6) != 'O' && patternString.charAt(7) != 'F' && patternString.charAt(8) != 'F') {
                pass = false;
            }

            if (pass) {
                System.out.println("Validation pass");
            }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T05:39:03.847

尝试使用[`String.split(" ")`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29), 来分割空格。您将得到一个数组，如果第一个字符为空，则`String`数组中的第一个字符将是一个空字符串：

```
String strs[] = " 1 ON OFF".split(" "); 
```

通过这个例子，你会得到这个数组：`["", "1", "ON", "OFF"]`。

如果第一个字符是空格，您将获得空字符串作为第一个元素。如果有*2 个*前导空格，那么您将看到空字符串作为前两个元素。剩余的字符串将是原始字符串中以空格分隔的标记，但如果标记之间有额外的空格，那么您将看到额外的空字符串作为数组元素。

循环遍历结果数组，包括一个[`parseInt`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)for 数字，您将能够匹配您所描述的规则。

请注意，您*可以*通过`Scanner`将分隔符设置为空字符串来类似地标记字符串：

```
Scanner sc = new Scanner(str);
sc.useDelimiter("");
System.out.println(sc.next()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T05:46:04.420

值得一看 StringReader，它可以让您逐个字符地扫描字符串。另一种选择是简单地读取每个字符 (String#charAt) 并检查它是否符合您的规则。

# java - 有没有创建时间线程的java api

> ID：12032674
> 
> 赞同：-2
> 
> 时间：2012-08-20T05:34:53.423
> 
> 标签：java, multithreading, thread-safety

> **可能重复：**
> [如何超时](https://stackoverflow.com/questions/2275443/how-to-timeout-a-thread)
> [线程在给定时间后停止java中的线程 - 不起作用](https://stackoverflow.com/questions/4186330/stop-a-thread-in-java-after-a-given-time-doesnt-work)

（某种线程）可以监视特定任务所花费的时间，因此如果时间达到特定限制，它会重试它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:23:07.353

试试这个方法......

**1.**`CountDownLatch`从 java.util.concurrent使用。

**2.** `CountDownLatch cdt = new CountDownLatch(10);`

这将完成您的 10 任务，**每次完成任务时，计数都会减少 1**。使用`countDown()`方法在任务完成时减少计数。使用`await()`方法允许在 10 个任务完成后执行流程。

**3.**运行另一个线程来监控`CountDownLatch`完成任务所用的时间。

**4.**假设时间超过了你想要的时间，那么`Re-initialize the CountDownLatch`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:41:36.200

如果您只需要一个非常粗略的估计，您可以创建一个线程，让它休眠多久，然后检查是否需要重新启动任务。例如，您可以创建一个线程，其 run() 命令的主体如下：

```
Thread.sleep(5000); //5 seconds
while ( needToRestart() )
{
  restart();
  Thread.sleep(5000);
} 
```

这将检查您的任务是否需要每 5 秒重新启动一次，如果有必要的话。重要的是要注意 Thread.sleep对于计时目的*并不*准确，但如果确切的时间量不重要，这是一个便宜的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:43:58.167

如果您为任务定义 starttime 属性。您始终可以启动一个线程，并在 run() 方法中监控您的任务。从某种意义上说，它将测量 currentTime - startTime（可用于任务对象）并检查差异是否已达到阈值。

# c++ - 相同的程序在 Windows 和 Linux 上的行为不同

> ID：12032679
> 
> 赞同：2
> 
> 时间：2012-08-20T05:35:25.217
> 
> 标签：c++, linux, g++

该程序适用于使用模板的链表。

```
 #include<iostream>
using namespace std;
template <class T>
class link
{

   struct node
   {
          T data;
          struct node * next;
   }*p;
public:
   link();
   void addatbeg(T);
   void show();
   void rematbeg();
   void addatmid(T,T);
};
template <class T>
link<T>::link()
{
 p=NULL;
}
template <class T>
void link<T>::show()
{
 node*q=p;
     while(q->next!=NULL)
{
                    cout<<q->data;
                    cout<<"->";
                    q=q->next;
}
cout<<q->data<<"\n";
}
template <class T>
void link<T>::addatbeg(T a)
{
 node *temp;
 temp=(node*)malloc(sizeof(node));
 temp->data=a;
 temp->next=NULL;
 if(p==NULL)
 {
            p=temp;
 }
 else
 {
            temp->next=p;
            p=temp;
 }
 }
 template <class T>
 void link<T>::rematbeg()
 {
 if(p==NULL)
 cout<<"Link List is Empty\n";
 else
 p=p->next;
 }
 template <class T>
 void link<T>::addatmid(T a,T b)
 {
 node* temp,*q;
 temp=(node*)malloc(sizeof(node));
 temp->data=b;
 temp->next=NULL;
 q=p;
 if(p==NULL)
 cout<<"\n Link List is Empty\n"<<endl;
 else
 {
     while(q->data!=a)
     q=q->next;
 }
 temp->next=q->next;
 q->next=temp;    
 }
 int main()
 {
 link<int> l1;
 l1.addatbeg(2);
 l1.addatbeg(3);
 l1.addatbeg(4);
 l1.addatbeg(5);
 l1.addatmid(3,9);
 l1.show();
 l1.rematbeg();
 l1.show();
 } 
```

相同的程序在 windows 7 dev C++ 编译器上运行良好，而在 linux g++ 编译器上它给出了以下错误。

```
 pllab52.cpp:4:7: error: ‘template<class T> struct link’ redeclared as different kind of symbol
 /usr/include/unistd.h:809:12: error: previous declaration of ‘int link(const char*, const char*)’
 pllab52.cpp:20:1: error: ‘link’ does not name a type
 pllab52.cpp:25:10: error: expected initializer before ‘&lt;’ token
 pllab52.cpp:37:10: error: expected initializer before ‘&lt;’ token
 pllab52.cpp:54:10: error: expected initializer before ‘&lt;’ token
 pllab52.cpp:62:10: error: expected initializer before ‘&lt;’ token
 pllab52.cpp: In function ‘int main()’:
 pllab52.cpp:81:10: error: expected primary-expression before ‘int’
 pllab52.cpp:81:10: error: expected ‘;’ before ‘int’
 pllab52.cpp:82:5: error: ‘l1’ was not declared in this scope 
```

两个 C++ 程序的行为都不同。是因为两者都有不同的编译器还是什么？也请告诉解决这个问题的解决方案。请说明这些问题通常何时发生。我也测试了其他程序，但没有遇到这样的问题。请帮我。提前致谢。

**我在程序中的每个地方都将链接更改为link1。现在我收到一个新错误，如下所示。**

```
pllab52.cpp: In member function ‘void link1<T>::addatbeg(T)’:
pllab52.cpp:40:37: error: there are no arguments to ‘malloc’ that depend on a template parameter, so a declaration of ‘malloc’ must be available [-fpermissive]
pllab52.cpp:40:37: note: (if you use ‘-fpermissive’, G++ will accept your code, but allowing the use of an undeclared name is deprecated)
pllab52.cpp: In member function ‘void link1<T>::addatmid(T, T)’:
pllab52.cpp:65:37: error: there are no arguments to ‘malloc’ that depend on a template parameter, so a declaration of ‘malloc’ must be available [-fpermissive]
pllab52.cpp: In member function ‘void link1<T>::addatbeg(T) [with T = int]’:
pllab52.cpp:82:18:   instantiated from here
pllab52.cpp:40:6: error: ‘malloc’ was not declared in this scope
pllab52.cpp: In member function ‘void link1<T>::addatmid(T, T) [with T = int]’:
pllab52.cpp:86:20:   instantiated from here
pllab52.cpp:65:6: error: ‘malloc’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T05:38:03.343

`link(2)`是一个 Linux 系统调用，用于创建到文件的硬链接。重命名您的类型或将其放在命名空间中。

# ios - Displaying Direction on Map in iOS MapKit

> ID：12032683
> 
> 赞同：0
> 
> 时间：2012-08-20T05:35:41.470
> 
> 标签：ios, google-maps, map, mapkit, direction

I am new into using MapKit in iOS. I would like to display an arrow image on the route joining two points in iOS MapKit. I am able to place the arrow's image as an annotation pin at any point in the route, but I am not able to orient it properly. How can I orient the arrow properly to point properly.

Thanks in advance for the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:56:23.790

如果您尝试连接地图上的两个点，您将需要使用叠加层 ( [`MKOverlay`](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKOverlay_protocol/Reference/Reference.html)) 而不是注释。注释用作单个点的地图标记。

如果您只想在指向另一点的一个点上有一个箭头，您可以通过子类化`MKAnnotation`and来实现`MKAnnotationView`。在您的 subclassed`MKAnnotation`中，添加一个额外的类型属性，`CLLocationCoordinate2D`用于定义箭头指向的位置。然后，在`MKAnnotationView`使用这两个坐标来计算箭头的方向并相应地调整图像。

# android - How to catch text message over 80 bytes in Android?

> ID：12032688
> 
> 赞同：3
> 
> 时间：2012-08-20T05:36:18.197
> 
> 标签：android, sms, broadcastreceiver, message, mms

I am trying to make an Android app regarding text messages. I got a source code from googling and it is works fine. However, it does not work with text messages over 80 bytes or MMS. It seems that the `onReceive` method cannot catch those long text messages.

Did I miss something or make any mistakes?

Here are the permissions I added..

```
android.permission.READ_SMS, 
android.permission.RECEIVE_SMS, 
android.permission.SEND_SMS, 
android.permission.WRITE_SMS, 
android.permission.READ_PHONE_STATE, 
android.permission.INTERNET, 
android.permission.ACCESS_NETWORK_STATE, 
android.permission.RECEIVE_MMS, 
android.permission.WRITE_EXTERNAL_STORAGE 
```

This is my code:

```
public class MySMSMonitor extends BroadcastReceiver {   
    private static String ACTIONNAME = "android.provider.Telephony.SMS_RECEIVED";  
    @Override  
    public void onReceive(Context context, Intent intent) {  
        if (intent != null && intent.getAction() != null  
            && ACTIONNAME.compareToIgnoreCase(intent.getAction()) == 0) {   
            Object[] pdu = (Object[]) intent.getExtras().get("pdus");  
            SmsMessage[] msg = new SmsMessage[pdu.length];   
            for (int i = 0; i < msg.length; i++) {  
                msg[i] = SmsMessage.createFromPdu((byte[]) pdu[i]);  
            }   
            StringBuilder sb = new StringBuilder();  
            for(SmsMessage allMsg : msg) {  
                sb.append(allMsg.getDisplayOriginatingAddress() + "&");  
                sb.append(allMsg.getDisplayMessageBody() + "&");  
                sb.append(allMsg.getTimestampMillis() + "&");  
            }  
            android.util.Log.i("SMS monitor", "data received = " + sb.toString());  
        }  
    }  
} 
```

Please give me some advice.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:34:14.077

我看不出你的代码有什么问题。

我实现了一个[带有进度对话框的示例接收器](https://stackoverflow.com/questions/11944567/show-progress-dialog-while-waiting-for-receiving-sms)（查看压缩项目的评论），它可以在我的手机上接收超过 80b 的消息。我建议您查看它并与您的代码进行比较。

# android - Will continuous coarse LocationListener eat batteries?

> ID：12032690
> 
> 赞同：0
> 
> 时间：2012-08-20T05:36:30.197
> 
> 标签：android, wakelock

I want to create an Android app which updates alarm (using AlarmManager) based on user location. As user moves 100 miles away, the alarm will be rescheduled. This app is like a scheduler app.

To solve the problem, I create a location listener which never be removed. My questions are:

1.  Will it eat my battery? I need the alarm is up-to-date with current user location.
2.  Do I have to set my application always in wake mode (wake lock)?
3.  If my solution is not good, what's your suggestion?

Thank you so much!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:43:40.750

> 它会吃我的电池吗？我需要警报与当前用户位置保持同步。

是的，并且不能保证您的应用会及时收到位置更新（例如，如果设备处于睡眠状态）。

> 我是否必须将我的应用程序始终设置为唤醒模式（唤醒锁定）？

持有 a`WakeLock`将有助于保持您的应用程序运行，但它会很快耗尽电池 - 特别是如果您正在跟踪数百英里之外的用户。

> 如果我的解决方案不好，您有什么建议？

请考虑使用 AlarmManager 定期检查设备位置。每 15-30 分钟处理一次警报所消耗的电池电量要比使用全时位置监听器少得多。每次警报触发时，您都可以注册和取消注册位置监听器。只要应用程序`WakeLock`在处理每个警报时获取一个时间（并在之后立即释放锁定），应用程序就会定期接收位置更新并且不会耗尽电池。您可能希望将[WakefulIntentService](https://github.com/commonsguy/cwac-wakeful)视为处理警报和 WakeLock 的解决方案。

# sql - how to convert 1 column value into multiple column

> ID：12032693
> 
> 赞同：1
> 
> 时间：2012-08-20T05:37:06.607
> 
> 标签：sql, sql-server

Suppose if i have one table "Title" In this table there are 4 columns.

```
Bookid, Isbn, TitleName, Description.

1         123  english     this is a english buk.

2        123  english      Its author is "Mr xyz" 
```

Now you see that b'coz of description same book appear 2 times.

Now how can we get the below output.Plese Guide

```
Bookid, Isbn,         TitleName,           Description1,                  Description2

1         123         english              "this is a english buk"         "Its author is Mr xyz" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:44:18.997

根据您的评论，听起来您想要一种动态的方式来产生这些结果。您可以使用动态 SQL 生成[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 使用动态 SQL 将允许您将其他描述自动添加到结果中。

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Description'+cast(row_number() over (partition by bookid, isbn, titlename order by bookid) as varchar(10))) 
                    from title
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT bookid, isbn, titlename,' + @cols + ' from 
         (
            select bookid, isbn, titlename, description,
              ''Description''+ cast(row_number() over (partition by bookid, isbn, titlename order by bookid) as varchar(10)) rn
            from title
         ) x
         pivot 
         (
            min(description)
            for rn in(' + @cols + ')
         ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/cce81/7)。

当您为书籍添加新描述时，执行查询时将在结果中添加一个新列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:40:14.953

您可以使用子查询来计算`BookId`每本书的最小值和最大值。然后你可以加入两个描述：

```
select  min(BookId)
,       Isdn
,       TitleName
,       max(case when rn = 1 then Description end) as Descr1
,       max(case when rn = 2 then Description end) as Descr2
,       max(case when rn = 3 then Description end) as Descr3
from    (
        select  row_number() over (partition by Isdn, TitleName order by BookId) as rn
        ,       BookId
        ,       Isdn
        ,       TitleName
        ,       Description 
        from    Title
        ) as ids
group by
        Isdn
,       TitleName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:34:30.587

Try this

```
 select * 
 from
 (
      select 
           *,
           row_number() over (partition by bookid, isbn, titlename order by description) rn
      from yourtable
 ) src
 pivot
 ( max(description) for rn in ([1],[2],[3])) p 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T18:04:28.730

@bluefeet，我修改了您的查询以允许超过 10 个描述（排序）....

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((select c from (SELECT  ',' + QUOTENAME('Description'+cast(row_number() over (partition by bookid, isbn, titlename order by bookid) as varchar(11))) AS C
                    from title) TBL group by c order by CAST(Replace(REPLACE(C,',[Description',''),']','') as int)
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT bookid, isbn, titlename,' + @cols + ' from 
         (
            select bookid, isbn, titlename, description,
              ''Description''+ cast(row_number() over (partition by bookid, isbn, titlename order by bookid) as varchar(10)) rn
            from title
         ) x
         pivot 
         (
            min(description)
            for rn in(' + @cols + ')
         ) p '

execute(@query) 
```

# vbscript - 批量启动程序并在 Windows 7 中按 Enter

> ID：12032695
> 
> 赞同：3
> 
> 时间：2012-08-20T05:37:09.683
> 
> 标签：vbscript, batch-file, uac, windows-7-x64

我在进行开发时经常打开 4 个程序。一天晚上我不想真正做一些开发，所以我写了这个脚本：

*测试.bat*

```
start /d "C:\eclipse" eclipse.exe
start /d "C:\Program Files (x86)\Pidgin" pidgin.exe
start /d "C:\wamp" wampmanager.exe
start /wait /d "E:\websites\scripts" tunnelier.vbs 
```

*隧道工.vbs*

```
Set WshShell = WScript.CreateObject("WScript.Shell")

WshShell.Run """C:\Program Files (x86)\Bitvise Tunnelier\Tunnelier.exe"""
WshShell.AppActivate "Tunnelier"

WshShell.SendKeys "{ENTER}" 
```

我发现它成功打开了所有程序，但有两个问题。

1.  当 tunnelier 是活动窗口（它没有登录）时，没有发送回车键。如果我只是运行 tunnelier.vbs 它工作正常，但在批处理文件中它不起作用。
2.  wampmanager.exe 必须有一个奇怪的清单文件，因为 Windows 给了我那个烦人且冗长的“你想允许来自未知发布者的以下程序对你的计算机进行更改”的提示。

所以我的问题是双重的；

1.  如何在正确的窗口中注册回车键？
2.  如何摆脱未知发布者 UAC 提示？

我已经尝试研究这两个主题并且都失败了，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:48:11.627

*   您不需要发送回车键。启动 Tunnelier 指定`-profile`and `-loginOnStartup`，这也意味着您不再需要 VBScript 脚本了。

> C:\Program Files (x86)\Bitvise Tunnelier\Tunnelier.exe -profile=profile_file.path -loginOnStartup

另请查看： http: [//www.bitvise.com/files/tunnelier-params.txt](http://www.bitvise.com/files/tunnelier-params.txt)

*   要摆脱 wampmanager 的 UAC，您可以使用[Runas](http://technet.microsoft.com/en-us/library/cc771525%28WS.10%29.aspx)。它会提示每次调用的密码，但不使用**/savecred**参数，但是您必须输入一次密码。

最后，您的脚本可能是这样的：

```
start /d "C:\eclipse" eclipse.exe
start /d "C:\Program Files (x86)\Pidgin" pidgin.exe
start runas /profile /savecred /user:Administrator "c:\wamp\wampmanager.exe"
start /d "C:\Program Files (x86)\Bitvise Tunnelier" Tunnelier.exe -profile=profile_file.path -loginOnStartup 
```

# c++ - How to execute statements only if the preceding statements succeeded

> ID：12032699
> 
> 赞同：0
> 
> 时间：2012-08-20T05:37:27.397
> 
> 标签：c++

So I have something like

```
bSuccess = true;

bSuccess = bSuccess && statement1();
bSuccess = bSuccess && statement2();
bSuccess = bSuccess && statement3();
... 
```

Is there a better or more idiomatic way to write this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T05:39:24.717

您可以将它们链接在一起：

```
bSuccess = statement1() && statement2() && statement3(); 
```

这是“惯用的”，但是这种类型的代码是否清晰尚不完全清楚。您依赖于每个函数调用的副作用，因此至少这些应该有据可查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:40:26.560

假设如果成功，所有 3 个语句都返回 true，我将使用：

```
statement1() && statement2() && statement3(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T05:41:09.973

这取决于您的陈述有多复杂。那些足够简单的，你可以这样做：

```
bSuccess = statement1() && statement2() && statement3(); 
```

但是，对于更复杂的东西，我倾向于执行以下操作：

```
fOk = 1; // true

if (fOk) {
    LotsOfStuffNotSettingError();
    fOk = SomethingSettingError();
}

if (fOk) {
    LotsMoreStuffNotSettingError();
    fOk = (ThisNeedsToReturnOne() == 1);
} 
```

等等。

这样，块可以*任意*复杂，不限于能够用二元逻辑运算符处理的简单语句。

每个块中可能有很多东西根本没有设置`fOk`，但每个块基本上应该以*一个*语句设置结束`fOk`。

# flot - 在 HTML 中水平浮动平铺图

> ID：12032702
> 
> 赞同：1
> 
> 时间：2012-08-20T05:37:43.177
> 
> 标签：flot

我在水平平铺我的图表而不是一个在另一个之下时遇到了很大的麻烦。出于某种原因，`float:left`拒绝工作。这是我目前拥有的：

```
<h2><center>Title1</center></h2>
<div id="flot-graph-1" class="graph-area"></div>
<h2><center>Title2</center></h2>
<div id="flot-graph-2" class="graph-area"></div>
<h2><center>Title3</center></h2>
<div id="flot-graph-3" class="graph-area"></div> 
```

我试过添加`style="float:left"`div，但它不起作用。我还尝试将整个文本包含在另一个 div 容器中，然后添加相同的样式短语。没有骰子。尝试进入 CSS 页面，尝试类似

```
#flot-graph-3
{
    float: left;
} 
```

依然没有。我也试过`display:inline`了，但仍然没有任何效果。而不是水平平铺，它只是擦除左边距并粘在我的地铁应用程序的左侧（但仍然出现在另一个下方）。请帮忙！有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:28:20.497

您可以通过在 CSS 中将图形区域类设置为 display:inline-block 并将父容器的宽度设置为“至少”每个图形宽度的 3 倍来做到这一点，这样它们将彼此相邻一条线。

您也可以使用 float:left，但我怀疑您的父元素不够大，并且图表溢出到下一行

display:inline 不起作用，因为 flot 要求图形是块级元素

如果您想要每个图表上方的 h2 标题，您需要将每个图表和标题包装在其自己的 div 中，因为 h2 元素是一个块

例如。

HTML：

```
<div class="graphWrapper">
    <div class="graph-area">
        <h2><center>Title1</center></h2>
        <div id="flot-graph-1" class="graph-area"></div>
    </div>
    ....etc
</div> 
```

CSS：

```
.graphWrapper{width:1000px} /* at least 3x width of graph */
.graph-area{display:inline-block} 
```

等等

# java - Send chat message via Office Communicator Server (OCS) from Java application

> ID：12032703
> 
> 赞同：2
> 
> 时间：2012-08-20T05:37:47.353
> 
> 标签：java, sip, jain-sip, office-communicator

I am looking for some API to connect to OCS server and send a chat message. I can understand Microsoft uses a modified version of SIP protocol, usually referred to as SIPE.

Pidgin has a plugin to communicate with OCS using the below plugin

```
http://sipe.sourceforge.net/ 
```

But I could not find any Java API to use it directly. Has someone done this before?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:07:44.267

为此有一个简单的 API 库：

[http://jsip.sourceforge.net/](http://jsip.sourceforge.net/)

它已经很久没有更新了，但应该足以让您开始使用。

祝你好运！

# visual-studio-2010 - 以相对方式将文件添加到 Visual Studio 安装程序项目

> ID：12032706
> 
> 赞同：1
> 
> 时间：2012-08-20T05:38:18.333
> 
> 标签：visual-studio-2010, visual-studio, installation

我正在尝试使用 Visual Studio 2010 构建一个新的安装程序项目。问题是安装文件应该相对于项目的位置，所以我想我需要指定一个相对路径，例如：`"..\..\..\some_folder\veryImportant.dll"`

问题是安装程序项目只为我提供了一个`.vdproj`不包含任何手动添加文件的位置/路径的文件（当我右键单击项目并添加新文件时）。

只是为了确保我的问题足够清楚：

假设我的项目位于下面`D:\develop\backend\MainProject\Project\Installer`，我想`D:\develop\backend\MainProject\SDKDLLs`通过指定它们的绝对位置手动添加它们来导入一些 DLL，这对我不利

> (d:\develop\backend\MainProject\SDKDLLs\core.dll)

谢谢你的帮助。

**编辑：**在更深入地查看项目文件后，我意识到路径已经是相对的：

```
 "{1FB2D0AE-D3B9-43D4-B9DD-F88EC61E35DE}:_1E8A546C985F494593B28567414EE00D"
        {
        "SourcePath" = "8:..\\..\\a\\b\\c\\d\\e\\f.dll"
        "TargetName" = "8:f.dll"
        "Tag" = "8:"
        "Folder" = "8:_34476923AC9546E4B47A8B966C915E0B"
        "Condition" = "8:"
        "Transitive" = "11:FALSE"
        "Vital" = "11:TRUE"
        "ReadOnly" = "11:FALSE"
        "Hidden" = "11:FALSE"
        "System" = "11:FALSE"
        "Permanent" = "11:FALSE"
        "SharedLegacy" = "11:FALSE"
        "PackageAs" = "3:1"
        "Register" = "3:1"
        "Exclude" = "11:FALSE"
        "IsDependency" = "11:FALSE"
        "IsolateTo" = "8:"
        } 
```

似乎向导已经自动完成了。有没有办法手动指定相对位置，而不是通过编辑**.vdproj**文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:28:52.443

该项目已经使用相对路径进行了初始化。所以事实上，我不应该做任何改变。

# unix - 这是什么意思“type ant 1>/dev/null”？

> ID：12032707
> 
> 赞同：1
> 
> 时间：2012-08-20T05:38:40.847
> 
> 标签：unix

我是 Unix 中的探针。

我想知道这是什么意思？

```
type ant 1>/dev/null
moduledir=`dirname $0` 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:40:20.570

`1>/dev/null`在第一行中，将`STDOUT`（标准输出）重定向到`/dev/null`. 这意味着运行命令后，屏幕上只会显示**错误（如果存在）。**`type ant`

第二行将`moduledir`变量设置为`dirname $0`命令的输出，`$0`即执行的文件名。

* * *

[`type`](http://en.wikipedia.org/wiki/Type_(Unix))基本上告诉你它的论点的类型。在您的情况下，它会输出如下路径`ant`：`ant is /usr/bin/ant`

`>`用于流重定向。并`1>`重定向标准输出。

[在此处](http://en.wikipedia.org/wiki/Standard_streams)阅读有关标准流的更多信息。

`type ant 1>/dev/null`如果一切正常，finally应该什么都不输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:00:17.047

该`type`命令（在 UNIX 下，不要将其与 MS-DOS/Windows' 混淆`CMD.EXE`）将向您展示如果执行命令将如何解释。

使用这种方式，如果找不到/可执行命令`type`，将打印一条错误消息（例如`ant not found`） 。`ant`正如其他人所说，`1>/dev/null`（或简单地`>/dev/null`）将该命令写入标准输出的消息重定向到“无处”，即它们不会在终端/控制台上打印。写入标准错误流的消息将/仍将发生。看起来，该行是为了检查是否`ant`可以执行/找到，但是没有提供（比如）中止脚本的相应检查，它可能像这样（取决于你的 shell，但它看起来像一个 bourne shell反正味道）：

```
 type ant > /dev/null
 [ $? -ne 0 ] && exit 1 
```

另一个注意事项：使用`bash`type 命令永远不会将任何输出写入标准错误流，即即使消息也会`... not found`写入标准输出。因此，就目前而言，该命令永远不会输出任何内容，即使在出现错误的情况下也是如此（鉴于此片段无论如何都用作检查，因此显示该消息似乎是明智的）。

最后，

```
 moduledir=`dirname $0` 
```

行将当前正在执行的脚本的目录名存储在变量中`moduledir`。您可以稍后引用它`$moduledir`，例如：`echo "The directory is: $moduledir`.

坦率地说，这两个陈述在你的问题中是孤立的，没有什么意义。虽然语法正确，但它们没有更深层次的含义，因此只能推测它们的用途。您可能需要考虑问另一个关于您实际想要实现的目标的问题，而不仅仅是发布（任意）语法。

# javascript - 为什么 apple.com 使用 javascript 来动态加载视网膜图像而不是媒体查询？

> ID：12032713
> 
> 赞同：3
> 
> 时间：2012-08-20T05:39:26.427
> 
> 标签：javascript, css, media-queries, retina-display

如果设备支持视网膜，Apple.com 总是先显示标准图像，然后使用 javascript 加载视网膜图像。

我想知道为什么苹果不直接使用 CSS 媒体查询来减少 HTTP 请求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T06:00:08.483

简短的回答——浏览器预取。

除了使用 JS 之外，他们无能为力：

1.  做媒体查询测试，使用 JS，如果支持的话，填写 HQ-images
2.  如果支持，请进行媒体查询测试，使用 JS 并填写 CSS 样式表（其中包含 url 声明）。

这里的目标不是减少 HTTP 请求。目标是减少***并发***的HTTP 请求，对于大量冗余的数据 - 如果浏览器不支持高分辨率版本，但无论如何都被迫使用该带宽，则更是如此。

做 JS 的好处：

1.  页面加载速度更快，因为它只是正在下载的较轻的媒体
2.  页面加载期间的 HTTP 请求更少。当你请求 HQ 图像时，页面的其余部分已经设置好了，所以“额外请求”会减慢体验一点点（除非他们对 DOM 访问等做了一些愚蠢的事情——但那是普遍真理）

最终，该`<picture>`规范结合元素的`srcset=`和`media=`属性`<source>`，将允许一种无 JS 的方法，允许浏览器智能地处理媒体，基于它们自己的内部查询和页面分析（例如：是 LTE 上的用户连接，或者他们现在在山上的某个地方使用 2G 网络）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T06:11:17.867

为了节省初始加载时间。特别是在无线/3g 等慢速/不稳定的连接上。

如果您查看图像替换代码 ( [https://gist.github.com/2029936](https://gist.github.com/2029936) ) 的美化源，特别是函数 __replaceNextQueue，您会注意到它在实际替换图像之前设置了超时。

这样做是为了确保在开始请求新图像之前浏览器事件队列已经完成，其中包括 UI 的初始绘制。这允许浏览器下载较小（文件大小）的图像，并且用户可以在开始处理较大的图像之前开始执行他们的新操作。

将较大的图像下载推迟到 UI 的初始绘制之后会节省时间，尤其是在连接速度较慢的情况下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T05:43:44.253

因为不是所有的图像都是通过 CSS 加载的，所以有些是 HTML 的。

# c# - EntityFramework 在 App.config 中看不到 ConnectionString

> ID：12032720
> 
> 赞同：9
> 
> 时间：2012-08-20T05:40:15.183
> 
> 标签：c#, asp.net-mvc-3, web-config, ef-code-first, connection-string

我正在与 ASP.Net MVC 3 一起学习 Code First EntityFramework。起初我的琐碎`EFDbContext`类被放在`WebUI`mvc 项目的一个`Concrete`文件夹中。

```
 public class EFDbContext : DbContext
 {
     public DbSet<Product> Products { get; set; }
 } 
```

它被消耗掉了

```
 public class EFProductRepository : IProductRepository
 {
    private EFDbContext context = new EFDbContext();

    public IQueryable<Product> Products
    {
        get
        {
            return context.Products;
        }
    }
 } 
```

在哪里

```
public interface IProductRepository
{
    IQueryable<Product> Products { get; }
} 
```

所以我在根 Web.config 中添加了以下代码：

```
 <connectionStrings>
      <add name="WebUI.Concrete.EFDbContext" connectionString="Data Source=HORGH\SQLSERVER2008;Initial Catalog=SportStore;Integrated Security=True;Pooling=False"
providerName="System.Data.SqlClient"/>
 </connectionStrings> 
```

它**奏效了**。

然后我决定把它放到一个单独的`Domain`类库项目中。我有一个 App.config 文件。所以我决定把我的连接字符串移到那里，它变成了：

```
<connectionStrings>
      <add name="Domain.Concrete.EFDbContext" connectionString="Data Source=HORGH\SQLSERVER2008;Initial Catalog=SportStore;Integrated Security=True;Pooling=False"
providerName="System.Data.SqlClient"/>
 </connectionStrings> 
```

但最终**EF 不再看到它**。

`EFProductRepository`并使用其根文件夹`EFDbContext`移至项目。所以调用构造函数的代码在，即在项目中。`Domain``Concrete``EFProductRepository``Domain`

我试图将 App.config 重命名为 Web.Config；试图将连接字符串返回到`WebUI`项目的 Web.config。它也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T05:44:37.323

*类库项目*和*App.config 文件*不混合。

应用程序的配置文件总是与可执行文件相关联，或者在 web.config 的情况下，与网站相关联。

您的 DLL 项目不能（也不应该）拥有自己的配置文件*。

而是将连接字符串与您的 WebUI 项目一起配置。您可以有多个连接字符串条目。

**实际上有一些方法可以使您的 DLL 实际上拥有自己的配置文件。NLog 就是其中之一。然而，这很少是一个好主意。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T06:52:43.050

不使用连接字符串名称`namespace`

```
<connectionStrings>
    <add name="EFDbContext" connectionString="Data Source=HORGH\SQLSERVER2008;Initial Catalog=SportStore;Integrated Security=True;Pooling=False"
providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

# asp.net-mvc-3 - mvc 3.0 漏洞测试工具

> ID：12032724
> 
> 赞同：0
> 
> 时间：2012-08-20T05:40:38.163
> 
> 标签：asp.net-mvc-3, security

我正在寻找可以对在 MVC 3.0 上开发并部署在 Azure 上的应用程序进行漏洞测试的工具列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:48:29.303

[Mole](http://themole.nasel.com.ar/)是通过 GET、POST 和 Cookie 进行 Sql 注入测试的好工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:25:05.757

Saint、Retina 等是不错的自动化工具，但要花钱。问题是您是在寻找没有应用知识的全自动工具，还是在寻找特定的工具（浏览器利用框架、SQL ninja 等）来自行尝试特定的攻击类型？

# java - 用于在线购物车的 Java cms

> ID：12032733
> 
> 赞同：-1
> 
> 时间：2012-08-20T05:41:42.890
> 
> 标签：java, content-management-system, opencart, shopping

我正在寻找一些 java 中的 cms 系统，例如 opencart(java)。我必须创建一个在线商店，但在 java 中比在 php 中更舒适，所以我正在寻找一些在 jav 中可用的开放式购物车的替代品。请提及java中可用的一些好的cms系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T05:52:33.333

您可能想看看[Alfresco](http://www.alfresco.com/develop)。

> Alfresco 是一个开源内容管理平台。您可以在 Alfresco 平台上自定义、扩展和构建您的应用程序。

根据[维基页面](http://en.wikipedia.org/wiki/Alfresco_%28software%29)：

> 2009 年 10 月，2009 年开源 CMS 市场份额报告将 Alfresco 描述为领先的基于 Java 的开源 Web 内容管理系统。

# ios - UIRotationGestureRecognizer - 围绕锚点旋转

> ID：12032736
> 
> 赞同：5
> 
> 时间：2012-08-20T05:42:05.670
> 
> 标签：ios, uiview, uigesturerecognizer, gesture-recognition

这是我当前的手势识别器实现：

```
- (IBAction)handleRotate:(UIRotationGestureRecognizer *)recognizer {

if([recognizer state] == UIGestureRecognizerStateEnded) {

    _lastRotation = 0.0;
    return;
}

CGFloat rotation = 0.0 - (_lastRotation - [recognizer rotation]);

CGAffineTransform currentTransform = self.container.transform;
CGAffineTransform newTransform = CGAffineTransformRotate(currentTransform,rotation);

[self.container setTransform:newTransform];

_lastRotation = [recognizer rotation];

} 
```

工作正常。问题是 self.container 总是围绕它的中心旋转。我希望它围绕两次触摸的中点旋转，这样如果您放大，您可以围绕您正在触摸的区域旋转。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:22:32.463

我不确定您是否可以将一个点设置在被旋转对象的边界之外，但是您的容器层属性将允许您从变换中指定一个锚点。

它接受从左上角到右下角的 0.0-1.0 值。

```
#import <QuartzCore/QuartzCore.h>

[[container layer] setAnchorPoint:myCGPoint]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:31:36.173

您可以使用代码将中心点放置到任何`CGPoint`类型变量

```
recognizer.view.center = CGPoint(x,y); 
```

有关更多说明，您可以参考[此](https://github.com/AalokParikh/pinch-and-uiguesture)示例

**（在 pangesturerecognizer 处理方法中，它显示了如何设置视图中心）**

快乐编码:)

**编辑 1**

好的，我得到了如何在视图中获取触摸位置的代码（任何），因为首先需要的是为视图启用多点触摸属性。（见下图）

![在 XIB 中启用多点触控](../Images/58ac4e9c90a7c13f067aabf1982fe22d.png)

然后实现委托方法如下

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Began %@",touches);
    NSUInteger touchCount = 0;
    for(UITouch *tu in touches)
    {
        CGPoint pt = [tu locationInView:self.view];
        NSLog(@"pt %f, %f",pt.x,pt.y);
        touchCount ++;
    }
    NSLog(@"touchCount %d",touchCount);
} 
```

此方法显示`NSLog`. 我`self.view`仅用于演示，您可以使用任何视图。

根据您的要求修改此方法，并使用以下计算使用两点坐标获取中心点

p3.x = (p1.x + p2.x)/2；p3.y = (p1.y + p2.y)/2；

这里 p1,p2 是您在上述委托方法中获得的两个接触点，而 p3 是您需要的中心点。

快乐编码:)

# ruby-on-rails-3 - Postgresql 的模式和后台作业

> ID：12032739
> 
> 赞同：1
> 
> 时间：2012-08-20T05:42:19.223
> 
> 标签：ruby-on-rails-3, postgresql, activerecord, nginx, passenger

我在 Phusion Passenger、Nginx 和 Postgres 9.1.4 上运行 Rails 3.2 应用程序。[按照本文](http://blog.jerodsanto.net/2011/07/building-multi-tenant-rails-apps-with-postgresql-schemas/)中描述的方法，我已将多租户应用程序移至[Postgresql 的模式](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html)（正在开发中）：

由于这种方法似乎为每个请求全局设置模式搜索路径（通过 handle_subdomain，见下文），这如何影响后台作业（[通过 Resque](https://github.com/defunkt/resque/)）？

```
class ApplicationController < ActionController::Base
  before_filter :handle_subdomain

  def handle_subdomain
    if @tenant = Tenant.find_by_subdomain(request.subdomain)
      PgTools.set_search_path @tenant.id
    else
      PgTools.restore_default_search_path
    end
  end
end 
```

如果我随后在需要大量时间的 Resque 后台作业中设置搜索路径（例如，删除一堆托管在 S3 上的回形针图像），会发生什么情况？这是否可能会干扰对应用程序的请求，该请求在 handle_subdomain 中设置路径？

我应该修补 ActiveRecord 以硬编码模式搜索路径吗？EG select * from "1"."users" ("1" 是模式路径)

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:13:51.203

如果 ActiveRecord 只是发出“SET search_path = x”命令，那么这就是设置每个会话的值，所以你应该没问题。

事实上，如果您在显式事务中设置它，如果事务回滚*，它将在事务结束时回滚*。

*   澄清以下来自 araqnid 的评论

# java - 无法转发。响应已提交。错误

> ID：12032742
> 
> 赞同：0
> 
> 时间：2012-08-20T05:42:38.223
> 
> 标签：java, jsp, servlets

我正在使用从 jsp 调用 servlet

```
//My servlet code is:
public void doGet(HttpServletRequest request, HttpServletResponse response)
       {
           String template="test";   
           abcViewBean punchOutCan = new abcViewBean();
           punchOutCan.setPunchOutCanonicalRes(template);
           try {
            request.getRequestDispatcher("/PunchOutCanonicalError.jsp").forward(request,response);
        } catch (ServletException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
       } 
```

我的 JSP 代码是：

```
<jsp:include page="/PunchOutCanonicalServlet" flush="true"/>  
<c:out value="${punchOutCan.punchOutCanonicalRes}" /> 
```

请建议，如何摆脱这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:30:54.043

从 servlet 中排除（删除）此语句`doGet`，因为您要在 JSP 中导入响应。

```
request.getRequestDispatcher("/PunchOutCanonicalError.jsp")
    .forward(request,response); 
```

doGet 必须是：

```
@Override
public void doGet(HttpServletRequest request, 
                  HttpServletResponse response)
                    throws ServletException,IOException{
       String template="test";   
       abcViewBean punchOutCan = new abcViewBean();
       punchOutCan.setPunchOutCanonicalRes(template);
       //You can push the bean object into request via setAttribute
       //e.g
       //request.setAttribute("punchOutCan",punchOutCan);
} 
```

和 JSP 代码，

```
<jsp:include page="/PunchOutCanonicalServlet" flush="true"/>  
<c:out value="${punchOutCan.punchOutCanonicalRes}" /> 
```

# android-intent - 如何在 OnTouch 事件中打开一个新的 Intent？

> ID：12032744
> 
> 赞同：0
> 
> 时间：2012-08-20T05:42:41.707
> 
> 标签：android-intent, android-activity, drawrect, touch-event

我有一个自定义的 OnTouch 方法，我检查触摸坐标是否包含一个矩形。检查条件后我想开始一个新的 Activity。但不幸的是它不起作用。有人可以帮我吗？

```
public class custom extends SurfaceView implements SurfaceHolder.Callback{

public boolean onTouchEvent(MotionEvent event) {
    int touchX = (int) event.getX();
    int touchY = (int) event.getY();
    switch(event.getAction()){

    case MotionEvent.ACTION_DOWN:
            System.out.println("Touching down!");

            for(int i =0; i< rectangles.size();i++){

                if(rectangles.get(i).contains(touchX,touchY)){
                    System.out.println("Touched Rectangle, start activity.");
                    rectangles.get(i).describeContents ();
                    Selected_rect = String.valueOf(rectangles.get(i));
                                       }
                Intent intent=new Intent(getContext(), DetectBlock.class);  
                startActivity(intent); //ERROR >> Start activity undefined   

            }
            break;
    case MotionEvent.ACTION_UP:
            System.out.println("Touching up!");
            break;
    case MotionEvent.ACTION_MOVE:
            System.out.println("Sliding your finger around on the screen.");
            break;
    }
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:38:24.223

首先，当您登录时，您不使用`System.out.println(");`. 对于登录 Android，使用`Log`该类，因此您可以像这样简单地登录：`Log.d("className", "This is a test");`

这可能会解决您的问题[该类型的方法 startActivity(Intent) 未定义？](https://stackoverflow.com/questions/7034873/the-method-startactivityintent-is-undefined-for-the-type)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:49:24.927

**我找到了答案:)**

```
private void startActivity() {
    // TODO Auto-generated method stub
    Intent myIntent = new Intent("android.intent.action.DetectBlock");
    myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getContext().startActivity(myIntent);
} 
```

# hibernate - 休眠标准投影不同

> ID：12032748
> 
> 赞同：20
> 
> 时间：2012-08-20T05:43:34.530
> 
> 标签：hibernate, criteria

您好我想使用标准编写查询：必须使用标准创建以下查询：

“从 S2 中选择 Distinct(s2Taxper)，其中 s2Tc='601' AND s2Txcd!=''”

提前致谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-20T05:55:50.873

```
Criteria criteria = 
    session.createCriteria(S2.class)
           .add(Restrictions.eq("s2Tc","601"))
           .add(Restrictions.ne("s2Txcd",""))
           .setProjection(Projections.distinct(Projections.property("s2Taxper"))); 
```

# eclipse - Eclipse PDE：如何通过快速操作添加标记

> ID：12032753
> 
> 赞同：0
> 
> 时间：2012-08-20T05:44:05.150
> 
> 标签：eclipse, marker, pde

我的问题与：[Eclipse PDE：自定义 QuickFix 仅在问题视图中可用？](https://stackoverflow.com/questions/8866688/eclipse-pde-custom-quickfix-only-available-in-problems-view)，但我不能使用 QuickAssistAssistant。我需要为现有的 M2E pom.xml 编辑器添加快速修复标记。

我已经能够做到这一点：

![在文本悬停时显示快速修复](../Images/c484768748465e980a0e78c6d5d5bd72.png)

但我仍然找不到如何更改标记图标（与灯泡变体），也可以在单击注释图标后显示可能的快速修复。

我想要这个图标 ![我想要的是](../Images/1752ed9647be3e5ed6df589284a21929.png)

我目前正在使用此配置

```
 <extension
          id="me.gladwell.eclipse.m2e.android.markers.dependency.apklib"
          point="org.eclipse.core.resources.markers">
          <super type="org.eclipse.core.resources.problemmarker"/>
          <super type="org.eclipse.core.resources.textmarker"/>
          <super type="me.gladwell.eclipse.m2e.android.markers.dependency"/>
          <persistent value="true" />
   </extension>
   <extension
           point="org.eclipse.ui.ide.markerResolution">
           <markerResolutionGenerator
                  markerType="me.gladwell.eclipse.m2e.android.markers.dependency.apklib"
                  class="me.gladwell.eclipse.m2e.android.quickfix.ImportApklibResolutionGenerator"/>
   </extension>   
   <extension
           point="org.eclipse.ui.editors.annotationTypes">
           <type
               name="me.gladwell.eclipse.m2e.android.annotations"
               super="org.eclipse.ui.workbench.texteditor.error"
               markerType="me.gladwell.eclipse.m2e.android.markers.dependency.apklib"
               markerSeverity="2">
         </type>
   </extension> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:41:20.273

可能是我来晚了，但你需要检查[org.eclipse.ui.workbench.texteditor.markerAnnotationSpecification](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_workbench_texteditor_rulerColumns.html&resultof=%22RulerColumnDescriptor%22%20%22rulercolumndescriptor%22)扩展点。

只需使用您的 annotationType 扩展它并使用 quickfix 图标指定“quickFixIcon”属性

# iphone - UILabel 文本错误

> ID：12032755
> 
> 赞同：1
> 
> 时间：2012-08-20T05:44:14.067
> 
> 标签：iphone, objective-c, ios, uilabel

我正在使用 UILabel 来显示我的分数和我的高分，但是当分数标签进入四重摘要时，它会显示“分数：10 ...”但高分标签不会这样做。

这是标签的初始化代码（标签后面带有 1 的标签显示文本。没有 1 的标签显示实际数字）：

> //在这里设置分数标签 scoreLabelWidth = 100; scoreLabelPos = 260；
> 
> ```
> scoreLabel = [[UILabel alloc] init];
> [scoreLabel setFont: [UIFont fontWithName: @"TimesNewRoman" size: 10.0f]];
> [scoreLabel setFrame: CGRectMake(260, scoreLabelPos, scoreLabelWidth, 40)];
> [scoreLabel setBackgroundColor:[UIColor clearColor]];
> [scoreLabel setTextColor: [UIColor clearColor]];
> [scoreLabel setTextColor: [UIColor whiteColor]];
> scoreLabel.transform = CGAffineTransformMakeRotation(89.53);
> [self addSubview: scoreLabel];
> 
> scoreLabel1 = [[UILabel alloc] init];
> [scoreLabel1 setFont: [UIFont fontWithName: @"TimesNewRoman" size: 10.0f]];
> [scoreLabel1 setFrame: CGRectMake(262, 230, 100, 40)];
> [scoreLabel1 setBackgroundColor:[UIColor clearColor]];
> [scoreLabel1 setTextColor: [UIColor clearColor]];
> [scoreLabel1 setTextColor: [UIColor whiteColor]];
> scoreLabel1.transform = CGAffineTransformMakeRotation(89.53);
> [self addSubview: scoreLabel1];
> 
> highScoreLabel = [[UILabel alloc] init];
> [highScoreLabel setFont: [UIFont fontWithName: @"TimesNewRoman" size: 10.0f]];
> [highScoreLabel setFrame: CGRectMake(262, 150, 100, 40)];
> [highScoreLabel setBackgroundColor:[UIColor clearColor]];
> [highScoreLabel setTextColor: [UIColor clearColor]];
> [highScoreLabel setTextColor: [UIColor whiteColor]];
> highScoreLabel.transform = CGAffineTransformMakeRotation(89.53);
> [self addSubview: highScoreLabel];
> 
> highScoreLabel1 = [[UILabel alloc] init];
> [highScoreLabel1 setFont: [UIFont fontWithName: @"TimesNewRoman" size: 10.0f]];
> [highScoreLabel1 setFrame: CGRectMake(262, 50, 100, 40)];
> [highScoreLabel1 setBackgroundColor:[UIColor clearColor]];
> [highScoreLabel1 setTextColor: [UIColor clearColor]];
> [highScoreLabel1 setTextColor: [UIColor whiteColor]];
> highScoreLabel1.transform = CGAffineTransformMakeRotation(89.53);
> [self addSubview: highScoreLabel1]; 
> ```

然后在我的更新部分中，我为标签设置了文本和字符串格式（如果您需要该代码，请告诉我）

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:18:58.960

更改`lineBreakMode`您正在使用的标签的属性。默认情况下，它设置为`UILineBreakModeTailTruncation`您所看到的行为的结果。

或者，您可以将该`adjustsFontSizeToFitWidth`属性设置为 YES 以允许标签自动减小字体大小。如果您这样做，最好将`minimumFontSize`属性设置为合理的值。例如：

```
scoreLabel.adjustsFontSizeToFitWidth = YES;
scoreLabel.minimumFontSize = 6.0f; 
```

# javascript - 单击 TextArea 的向上和向下箭头按钮的文本区域中的属性名称是什么

> ID：12032759
> 
> 赞同：0
> 
> 时间：2012-08-20T05:45:09.380
> 
> 标签：javascript, jquery, html, xhtml

例如..onmousedown 是在TextArea 内按下鼠标按钮时要运行的脚本的属性名称。**同样，我想知道 TextArea 中的属性名称，以便单击 TextArea 的向上和向下箭头按钮**

我想在单击箭头（向上或向下按钮）时编写一个 js 函数。所以我需要属性名称。谢谢。

我的意思是（文本区域的向上和向下箭头）而不是键盘向上和向下箭头。谢谢

例如。我们在 StackOverflow 中在这里输入注释（TextArea）。在这里，我们可以看到向上和向下按钮。当我们单击它时，将执行一些操作。这里的文本区域与我所拥有的相似。谢谢

是否有任何特定的向上滚动和向下滚动功能。“ **onscroll** ” 在向上/向下滚动时触发。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:48:27.370

```
$(document).keydown(function(e){
    if (e.keyCode == CharCodeOfWantedKey){
//do stuff;
}
}); 
```

向上箭头的字符代码是 38，向下箭头是 40。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:49:58.113

```
$('#TextAreaElement').bind('keyup', function(e) { if (e.keyCode == CharCodeOfWantedKey){
//do stuff;
} } ); 
```

# java - Android：使用 Perst Lite 持久化数据，如何持久化已删除的数据？

> ID：12032765
> 
> 赞同：1
> 
> 时间：2012-08-20T05:45:53.800
> 
> 标签：java, android, listview, persistence, persist

我有一个应用程序，它有一个在 strings.xml 中声明为字符串数组的电影 ListView。每个 ListView 行中有 3 个元素对应 3 个字符串数组，即 Title、Gross 和 Date。用户可以通过单击菜单中的添加按钮来添加电影，他/她会被发送到带有 3 个编辑文本的第二个屏幕，他/她可以在其中添加他/她的新电影的详细信息。同样，用户也可以删除和编辑条目。

我使用 PerstLite 作为在我的代码中保留数据更改的一种方式，但是，我只能执行“添加”功能。这是我的代码：

我的创建：

```
 String databasePath = getAbsolutePath("movies.dbs");

    // open the database
    db.open(databasePath, 40 * 1024);

    // check if a root object is present in this file
    Index<Lab8_082588FetchDetails> root = (Index<Lab8_082588FetchDetails>) db
            .getRoot();
    if (root == null) {
        // Root is not yet defined: storage is not initialized
        root = (Index) db.createIndex(String.class, false);
        String[] titleList = getResources().getStringArray(
                R.array.title_array);
        String[] grossList = getResources().getStringArray(
                R.array.gross_array);
        String[] dateList = getResources().getStringArray(
                R.array.date_array);
        for (int i = 0; i < titleList.length; i++) {
            Lab8_082588FetchDetails item1 = new Lab8_082588FetchDetails();
            item1.setTitle(titleList[i]);
            item1.setDate(dateList[i]);
            item1.setGross(grossList[i]);
            root.put(item1.getTitle(), item1);
            db.setRoot(root);
        }

    }

    String filter = "";
    ArrayList<Lab8_082588FetchDetails> items = root.getPrefixList(filter);
    results = new ArrayList<Lab8_082588FetchDetails>();

    for (int i = 0; i < items.size(); i++) {
        Lab8_082588FetchDetails sr = new Lab8_082588FetchDetails();
        sr.setTitle(items.get(i).getTitle());
        sr.setGross(items.get(i).getGross());
        sr.setDate(items.get(i).getDate());
        results.add(sr);
    }

    adapter = new SampleCustomAdapter(results);
    setListAdapter(adapter);

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    registerForContextMenu(lv);
} 
```

我在 OnActivityResult 中的“添加电影”案例：

```
 case ADD_MOVIE:
            Lab8_082588FetchDetails newMovie = new Lab8_082588FetchDetails();
            IgnoreCaseComparator ignoreCaseAdd = new IgnoreCaseComparator();
            NumberFormat formatterAdd = new DecimalFormat("###,###,###");

            newMovie.setTitle(data
                    .getStringExtra(Lab8_082588Add.TITLE_STRING));
            newMovie.setGross("$"
                    + formatterAdd.format(Double.parseDouble(data
                            .getStringExtra(Lab8_082588Add.GROSS_STRING))));
            newMovie.setDate(data
                    .getStringExtra(Lab8_082588Add.DATE_STRING));
            results.add(newMovie);
            adapter.notifyDataSetChanged();
            Collections.sort(results, ignoreCaseAdd);

            Index<Lab8_082588FetchDetails> rootAdd = (Index<Lab8_082588FetchDetails>) db
                    .getRoot();
            rootAdd.put(newMovie.getTitle(), newMovie);
            db.setRoot(rootAdd);

            break; 
```

我的 Perst 的 CustomAdapter 初始化：

```
 Index<Lab8_082588FetchDetails> root = (Index<Lab8_082588FetchDetails>) db
            .getRoot();
    String filter = "";
    ArrayList<Lab8_082588FetchDetails> items = root.getPrefixList(filter); 
```

我的完成（）；和 AbsolutePath 函数：

```
 public void finish() {
    // close the DB so all changes are saved
    db.close();

    Toast.makeText(this, "Saving DB", Toast.LENGTH_SHORT).show();

    super.finish();
}

private String getAbsolutePath(String databasePath) {
    try {
        // MODE_APPEND is needed or else the file will auto-delete
        openFileOutput(databasePath, Context.MODE_APPEND).close();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
    databasePath = getFileStreamPath(databasePath).getAbsolutePath();

    System.out.println("Initializing: " + databasePath);
    return databasePath;
} 
```

我的问题：我设法弄清楚了

```
 rootAdd.put(newMovie.getTitle(), newMovie);
            db.setRoot(rootAdd); 
```

是添加的部分，但是，由于缺乏 Internet 资源，并且没有功能列表，我在找出与删除功能相对应的其他功能时遇到了问题

更新：

我还尝试在 delete 中使用这一行，如下所示：

```
case R.id.contextdelete:
        int pos = info.position;
        String title = results.get(info.position).getTitle();
        results.remove(pos);
        adapter.notifyDataSetChanged();
        Index<Lab8_082588FetchDetails> rootDelete =   (Index<Lab8_082588FetchDetails>) db
                .getRoot();
        rootDelete.remove(title);
        db.setRoot(rootDelete); 
```

然而，它给出了类似于“Key Not Unique”的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:24:56.693

现在才想通。我和我的朋友正在研究这个。我们试着把

```
 case R.id.contextdelete:
        int pos = info.position;
        String title = results.get(info.position).getTitle();
        results.remove(pos);
        adapter.notifyDataSetChanged();

        Index<Lab9_082588FetchDetails> rootDelete = (Index<Lab9_082588FetchDetails>) db
                .getRoot();
        rootDelete.remove(title, results.get(info.position));
        db.setRoot(rootDelete);

        return true; 
```

使用具有 Object 参数的 .remove 函数和您的自定义获取数据类（在本例中为 Lab9_082588FetchDetails）。事实证明，代码中的初始 .remove 函数仅删除了 Key，而不是 Object（在本例中为内容）本身。

[http://docs.huihoo.com/perst/docs/doc11/org/garret/perst/Index.html](http://docs.huihoo.com/perst/docs/doc11/org/garret/perst/Index.html)

是一个有用的网站，展示了可用于此类应用程序的各种 Perst 功能。

# ios - 使用 tibar 的钛 appcelerator iPhone 中的 QR 码扫描不起作用 - Zbar

> ID：12032766
> 
> 赞同：0
> 
> 时间：2012-08-20T05:46:02.533
> 
> 标签：ios, titanium

我正在开发钛中的 QR 码扫描仪类型的应用程序。

我使用了 tibar - 用于 Titanium Mobile 的 Zbar 集成模块，正[如此](http://code.google.com/p/tibar/)链接所指，我的 Titanium SDK 和 iOS SDK 满足此解决方案要求的标准，但不幸的是它无法正常工作。

请为 Titanium Appcelerator 中的 QR 码扫描应用程序推荐其他好的解决方案。

我得到的错误是：

```
[ERROR] 
[ERROR] Error: Traceback (most recent call last):
  File "/Users/myUser/Library/Application Support/Titanium/mobilesdk/osx/1.7.5/iphone/builder.py", line 1222, in main
    execute_xcode("iphonesimulator%s" % link_version,["GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=%s DEPLOYTYPE=development TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=%s %s" % (log_id,sdk_version,debugstr)],False)
  File "/Users/myUser/Library/Application Support/Titanium/mobilesdk/osx/1.7.5/iphone/builder.py", line 1140, in execute_xcode
    output = run.run(args,False,False,o)
  File "/Users/myUser/Library/Application Support/Titanium/mobilesdk/osx/1.7.5/iphone/run.py", line 39, in run
    sys.exit(rc)
SystemExit: 65 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:25:22.420

你可以使用这个模块，这是工作正常的 [QR SCanner](https://marketplace.appcelerator.com/apps/770?1097351001)以获得最佳结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:22:56.737

System Exit 65 经常和 SDK 错误，尝试使用不同的 SDK。

# python - python中网络管理器的最佳数据结构

> ID：12032770
> 
> 赞同：0
> 
> 时间：2012-08-20T05:46:50.163
> 
> 标签：python, python-2.7

哪个是网络管理器中用于处理网络丢包的最佳数据结构？我正在将数据包从一个系统发送到另一个 [server/UDP]。数据包被收集[client/UDP]，然后它们必须被有序使用并写入文件。

客户端系统中有 2 个线程：1）像重复数据包一样处理数据包丢失，在丢失的数据包上发送信号 2）一次获取几个数据包并将其写入文件。

我正在使用python。我应该使用哪种数据结构来存储数据包？，我想为此使用滑动窗口算法。最多 5 个缓冲区，每个缓冲区最多可容纳 10 个数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:53:09.487

如果您想在字节级别创建数据包并自己管理协议，您可能应该使用相当于 C 风格的结构，它由 struct 包提供： http: [//docs.python.org/library/struct。 .html](http://docs.python.org/library/struct.html) _ 这使您可以更好地控制数据包的内存布局。

如果您不关心内存布局，那么您可以创建自己的类来保存您想要的值。

您可能只使用内置的 python 列表来实现滑动窗口。例如，它们可以用作双端队列。

# c++ - 如何检查任意类型是否是迭代器？

> ID：12032771
> 
> 赞同：20
> 
> 时间：2012-08-20T05:47:09.803
> 
> 标签：c++, iterator

这是[这个问题](https://stackoverflow.com/questions/4335962)的完全重复，除了*接受的答案是错误*的，所以我再问一遍：

如何**正确**检查给定类型`T`是否为迭代器？

我尝试解决它：

```
// Assume enable_if and is_same are defined
// (hoping for a solution that works for C++03 too)

template<class T>
class is_iterator
{
    static char (&test(...))[2];
    template<class U>
    static typename std::enable_if<
        !std::is_same<
            typename std::iterator_traits<T>::value_type,
            void
        >::value,
        char
    >::type test(U);
public:
    static bool const value = sizeof(test(0)) == 1;
};

struct Foo { };

int main()
{
    return is_iterator<Foo>::value;
} 
```

在 Visual C++ 上碰巧失败了：

> `...\vc\include\xutility(373)`:
> 错误 C2039: `'iterator_category'`: 不是`'Foo'`

因为`iterator_traits`正在寻找`value_type`in的定义`Foo`，（显然）不存在。

我知道这在 Visual C++ 上**是**`__if_exists`一种可能性，但我正在寻找一种可移植的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T06:08:41.543

这样的事情怎么样？

```
template<typename T, typename = void>
struct is_iterator
{
   static constexpr bool value = false;
};

template<typename T>
struct is_iterator<T, typename std::enable_if<!std::is_same<typename std::iterator_traits<T>::value_type, void>::value>::type>
{
   static constexpr bool value = true;
}; 
```

例子：

```
#include <iostream>
#include <type_traits>
#include <vector>

template<typename T, typename = void>
struct is_iterator
{
   static constexpr bool value = false;
};

template<typename T>
struct is_iterator<T, typename std::enable_if<!std::is_same<typename std::iterator_traits<T>::value_type, void>::value>::type>
{
   static constexpr bool value = true;
};

int main()
{
   static_assert(!is_iterator<int>::value, "ass");
   static_assert(is_iterator<int*>::value, "ass");
   static_assert(is_iterator<std::vector<int>::iterator>::value, "ass");
} 
```

[http://liveworkspace.org/code/7dcf96c97fd0b7a69f12658fc7b2693e](http://liveworkspace.org/code/7dcf96c97fd0b7a69f12658fc7b2693e)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-10T20:10:50.870

我相信这应该是一个完整的解决方案。[在http://gcc.godbolt.org](http://gcc.godbolt.org)上试用它并查看测试功能的生成程序集。

```
#include <type_traits>
#include <iterator>
#include <vector>
#include <utility>

template <typename T>
  struct is_iterator {
  static char test(...);

  template <typename U,
    typename=typename std::iterator_traits<U>::difference_type,
    typename=typename std::iterator_traits<U>::pointer,
    typename=typename std::iterator_traits<U>::reference,
    typename=typename std::iterator_traits<U>::value_type,
    typename=typename std::iterator_traits<U>::iterator_category
  > static long test(U&&);

  constexpr static bool value = std::is_same<decltype(test(std::declval<T>())),long>::value;
};

struct Foo {};

//Returns true
bool f() { return is_iterator<typename std::vector<int>::iterator>::value; }
//Returns true    
bool fc() { return is_iterator<typename std::vector<int>::const_iterator>::value; }
//Returns true
bool fr() { return is_iterator<typename std::vector<int>::reverse_iterator>::value; }
//Returns true
bool fcr() { return is_iterator<typename std::vector<int>::const_reverse_iterator>::value; }
//Returns true
bool g() { return is_iterator<int*>::value; }
//Returns true
bool gc() { return is_iterator<const int*>::value; }
//Returns false
bool h() { return is_iterator<int>::value; }
//Returns false
bool i() { return is_iterator<Foo>::value; } 
```

此实现使用 SFINAE 和重载优先级。`test(U&&)`始终具有更高的优先级，`test(...)`因此如果未被 SFINAE 删除，它将始终被选中。

对于迭代器类型`T`，`std::iterator_traits<T>`所有上述类型定义都存在`test(U&&)`并且`test(...)`都是重载候选者。由于`test(U&&)`具有更高的优先级，因此始终选择它。

对于非迭代器类型`T`，`test(U&&)`SFINAE 失败，因为`std::iterator_traits<T>`没有嵌套的 typedef。因此，唯一剩下的候选人是`test(...)`。

`std::iterator_traits<T>`请注意，如果有人专门研究某种类型`T`并且不提供所有必需的 typedef ，则此 trait 也会失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T06:19:18.360

我前段时间实现了这个：

```
template <typename T>
struct is_iterator {  
    template <typename U>
    static char test(typename std::iterator_traits<U>::pointer* x);

    template <typename U>
    static long test(U* x);

    static const bool value = sizeof(test<T>(nullptr)) == 1;
}; 
```

它使用您的示例编译得很好。我无法在 VC 上测试它。

演示[在这里](http://liveworkspace.org/code/a5cd7357b897e58664d8801ffa5b122a)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-03T13:15:37.427

除了 C++17 的做法之外，没有什么新东西：

```
#include <type_traits>

// default case
template <class T, class = void>
struct is_iterator : std::false_type
{
};

// specialization
template <class T>
struct is_iterator<T,
                   std::void_t<typename std::iterator_traits<T>::difference_type,
                               typename std::iterator_traits<T>::pointer,
                               typename std::iterator_traits<T>::reference,
                               typename std::iterator_traits<T>::value_type,
                               typename std::iterator_traits<T>::iterator_category>> : std::true_type
{
};

template <class T>
constexpr bool is_iterator_v = is_iterator<T>::value; 
```

一些测试：

```
#include <vector>
#include <list>
#include <map>
static_assert(is_iterator_v<std::vector<int>::iterator>);
static_assert(is_iterator_v<std::list<double>::const_iterator>);
static_assert(is_iterator_v<int*>);
static_assert(!is_iterator_v<std::list<double>>);
static_assert(!is_iterator_v<int>); 
```

* * *

这个怎么运作：

1.  一些背景：

*   `std::false_type::value == false`
*   `std::true_type::value == true`
*   `std::void_t<X> <=> void`如果 X 是有效类型。否则会导致替换失败
*   `is_iterator<X>`被视为`is_iterator<X, void>`
*   如果专业匹配，它将被使用

2.  细节：

如果`T`是一个迭代器，那么这些类型存在：

```
std::iterator_traits<T>::difference_type
std::iterator_traits<T>::pointer
std::iterator_traits<T>::reference
std::iterator_traits<T>::value_type
std::iterator_traits<T>::iterator_category 
```

`std::void_t<...>`也是如此`void`。

专业化匹配`is_iterator<T,void>`（以及`is_iterator<T>`）和继承`std::true_type`

如果`T`不是迭代器，则至少有一个先前的类型不存在，因此**不**`std::void_t<...>`命名类型并且整个特化是替换失败。所以唯一匹配的`is_iterator`是继承的默认情况`std::false_type`

# xml - 在 Oracle 中解析 XML 注释

> ID：12032776
> 
> 赞同：1
> 
> 时间：2012-08-20T05:48:26.507
> 
> 标签：xml, oracle, plsql, comments

> **可能重复：**
> [oracle pl/sql 中的 XML 解析](https://stackoverflow.com/questions/12025748/xml-parsing-in-oracle-pl-sql)

在下面的 XML 我需要得到评论“ `ADOR Acknowledgement 2`”

你能帮我弄到这个吗

```
<?xml version="1.0" encoding="utf-8"?> 
<!--ADOR Acknowledgement 2-->  
<AckTransmission xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.irs.gov/efile">
<TransmissionHeader recordCount="1">  
<Jurisdiction>ALABAMA</Jurisdiction>  
<TransmissionId>1946157056</TransmissionId>    
<Timestamp>2012-08-16T01:25:47-05:00</Timestamp> 
<Transmitter>      
  <ETIN>00000</ETIN>     
</Transmitter>  
<ProcessType>T</ProcessType>  
<AgentIdentifier>ACK</AgentIdentifier> 
</TransmissionHeader> 
<Acknowledgement> 
  <SubmissionId>X1684956672</SubmissionId> 
  <EFIN>X16849</EFIN>  
  <GovernmentCode>ALST</GovernmentCode> 
  <SubmissionType>XMLTOM</SubmissionType>
  <TaxYear>9999</TaxYear>  
  <SubmissionCategory>MFET</SubmissionCategory>   
  <AcceptanceStatus>A</AcceptanceStatus>  
  <ContainedAlerts>0</ContainedAlerts>    
  <StatusDate>2012-08-16</StatusDate>   
</Acknowledgement> 
</AckTransmission> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:35:02.787

和 xpath 表达式的组合可以执行以下`replace`操作：`extract`

```
select 
replace(replace(
extract(
xmltype (q'{<?xml version="1.0" encoding="utf-8"?> 
<!--ADOR Acknowledgement 2-->  
<AckTransmission xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.irs.gov/efile">
<TransmissionHeader recordCount="1">  
<Jurisdiction>ALABAMA</Jurisdiction>  
<TransmissionId>1946157056</TransmissionId>    
<Timestamp>2012-08-16T01:25:47-05:00</Timestamp> 
<Transmitter>      
  <ETIN>00000</ETIN>     
</Transmitter>  
<ProcessType>T</ProcessType>  
<AgentIdentifier>ACK</AgentIdentifier> 
</TransmissionHeader> 
<Acknowledgement> 
  <SubmissionId>X1684956672</SubmissionId> 
  <EFIN>X16849</EFIN>  
  <GovernmentCode>ALST</GovernmentCode> 
  <SubmissionType>XMLTOM</SubmissionType>
  <TaxYear>9999</TaxYear>  
  <SubmissionCategory>MFET</SubmissionCategory>   
  <AcceptanceStatus>A</AcceptanceStatus>  
  <ContainedAlerts>0</ContainedAlerts>    
  <StatusDate>2012-08-16</StatusDate>   
</Acknowledgement> 
</AckTransmission>}'),
'/descendant::comment()'
), '<!--'), '-->') as comment_
from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:38:33.330

在文本上应用太多功能`XML`可能会对性能产生不利影响，因此作为替代方案，这样的事情应该可以工作 -

```
SQL> create table my_xml of xmltype;

Table created.

SQL> insert into my_xml values (xmltype('<?xml version="1.0" encoding="utf-8"?> 
                    <!--ADOR Acknowledgement 2-->  
                    <AckTransmission xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.irs.gov/efile">
                    <TransmissionHeader recordCount="1">  
                    <Jurisdiction>ALABAMA</Jurisdiction>  
                    <TransmissionId>1946157056</TransmissionId>    
                    <Timestamp>2012-08-16T01:25:47-05:00</Timestamp> 
                    <Transmitter>      
                      <ETIN>00000</ETIN>     
                    </Transmitter>  
                    <ProcessType>T</ProcessType>  
                    <AgentIdentifier>ACK</AgentIdentifier> 
                    </TransmissionHeader> 
                    <Acknowledgement> 
                      <SubmissionId>X1684956672</SubmissionId> 
                      <EFIN>X16849</EFIN>  
                      <GovernmentCode>ALST</GovernmentCode> 
                      <SubmissionType>XMLTOM</SubmissionType>
                      <TaxYear>9999</TaxYear>  
                      <SubmissionCategory>MFET</SubmissionCategory>   
                      <AcceptanceStatus>A</AcceptanceStatus>  
                      <ContainedAlerts>0</ContainedAlerts>    
                      <StatusDate>2012-08-16</StatusDate>   
                    </Acknowledgement> 
                    </AckTransmission>'));

1 row(s) inserted.      

SQL> select x.comment_text
  from my_xml t
       , xmltable(
         '/descendant::comment()'
          passing t.object_value
          columns comment_text varchar2(200) path '.'
        ) x
   ;

COMMENT_TEXT
----------------------------
ADOR Acknowledgement 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:48:56.747

这是从 xml 解析注释的代码。

```
import java.io.IOException;
import java.io.StringReader;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;

import org.w3c.dom.Element;

import org.w3c.dom.Node;

import org.w3c.dom.NodeList;

import org.xml.sax.InputSource;

import org.xml.sax.SAXException;

public class ParseComment {

public static void xmlParser(String xmlString) {
    DocumentBuilderFactory builderFactory = DocumentBuilderFactory
            .newInstance();
    Document document = null;
    try {
        DocumentBuilder documentBuilder = builderFactory
                .newDocumentBuilder();
        InputSource source = new InputSource();
        source.setCharacterStream(new StringReader(xmlString));
        document = documentBuilder.parse(source);
        NodeList nodes = document.getChildNodes();
        for (int i = 0; i < nodes.getLength(); i++) {
            if (nodes.item(i) instanceof Element) {
                Element element = (Element) nodes.item(i);
                /* add your logic to parse element values here.*/
                System.out.println("Element : " + element.getTextContent());// nodes.item(i).getTextContent());

            }else{
                // This is the comment string.
                String commentString = nodes.item(i).getTextContent();
                System.out.println("Comment: "+commentString);
            }
        }
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

} 
```

# java - Android googleMap 地图不显示，只有网格，有时

> ID：12032780
> 
> 赞同：6
> 
> 时间：2012-08-20T05:48:53.283
> 
> 标签：java, android, google-maps

所以，我一直在努力让它启动并运行一段时间。问题是我在 main.xml 中正确放置了来自 Google 的地图密钥，但我似乎无法获得提供者信息，因为地图根本不显示。我已经运行了几次，但我们都在同一个地方失败了。我尝试调试并注意到返回了一个提供程序字符串，但是之后返回了一个空值。

代码失败于

```
@Override
protected void onResume() {
    super.onResume();
    locationManager
            .requestLocationUpdates(getBestProvider(), 1000, 1, this);
} 
```

带有以下错误消息。

```
08-20 05:14:43.573: E/AndroidRuntime(239): Uncaught handler: thread main exiting due to uncaught exception
08-20 05:14:43.583: E/AndroidRuntime(239): java.lang.RuntimeException: Unable to resume activity {com.shawnbe.mallfinder/com.shawnbe.mallfinder.MallFinderActivity}: java.lang.NullPointerException
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2950)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2965)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2516)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.os.Looper.loop(Looper.java:123)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-20 05:14:43.583: E/AndroidRuntime(239):  at java.lang.reflect.Method.invokeNative(Native Method)
08-20 05:14:43.583: E/AndroidRuntime(239):  at java.lang.reflect.Method.invoke(Method.java:521)
08-20 05:14:43.583: E/AndroidRuntime(239):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-20 05:14:43.583: E/AndroidRuntime(239):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-20 05:14:43.583: E/AndroidRuntime(239):  at dalvik.system.NativeStart.main(Native Method)
08-20 05:14:43.583: E/AndroidRuntime(239): Caused by: java.lang.NullPointerException
08-20 05:14:43.583: E/AndroidRuntime(239):  at com.shawnbe.mallfinder.MallFinderActivity.onResume(MallFinderActivity.java:61)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.Activity.performResume(Activity.java:3763)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2937)
08-20 05:14:43.583: E/AndroidRuntime(239):  ... 12 more 
```

有时，代码似乎启动了网格但没有地图。在其他运行中，它只是失败了。

以下是我的活动代码。

```
package com.shawnbe.mallfinder;

import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.location.Criteria;
import android.location.Location;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class MallFinderActivity extends MapActivity implements
        android.location.LocationListener {
    /** Called when the activity is first created. */

    private MapController mapController;
    private MapView mapView;
    private android.location.LocationManager locationManager;
    private GeoPoint currentPoint;
    private Location currentLocation = null;
    private TextView latituteField;
    private TextView longitudeField;
    private String bestProvider;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        Location location;
        //getBestProvider();
        if(bestProvider !=null)
        location = locationManager.getLastKnownLocation(bestProvider);

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(
                R.drawable.androidmarker);
        MapItemizedOverlay itemizedoverlay = new MapItemizedOverlay(drawable,
                this);
        LocalGeoPoints loc = new LocalGeoPoints();
        for (OverlayItem a : loc.overlayitems) {
            itemizedoverlay.addOverlay(a);
        }
        mapOverlays.add(itemizedoverlay);

    }

    @Override
    protected void onResume() {
        super.onResume();
        locationManager
                .requestLocationUpdates(getBestProvider(), 1000, 1, this);
    }

    public void getLastLocation() {
        String provider = getBestProvider();
        currentLocation = locationManager.getLastKnownLocation(provider);
        if (currentLocation != null) {
            setCurrentLocation(currentLocation);
        } else {
            Toast.makeText(this, "Location not yet acquired", Toast.LENGTH_LONG)
                    .show();
        }
    }

    public void animateToCurrentLocation() {
        if (currentPoint != null) {
            mapController.animateTo(currentPoint);
        }
    }

    public String getBestProvider() {
        locationManager = (android.location.LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setPowerRequirement(Criteria.NO_REQUIREMENT);
        criteria.setAccuracy(Criteria.NO_REQUIREMENT);
        bestProvider = locationManager.getBestProvider(criteria, false);

        return bestProvider;
    }

    public void setCurrentLocation(Location location) {
        int currLatitude = (int) (location.getLatitude() * 1E6);
        int currLongitude = (int) (location.getLongitude() * 1E6);
        currentPoint = new GeoPoint(currLatitude, currLongitude);
        currentLocation = new Location("");
        currentLocation.setLatitude(currentPoint.getLatitudeE6() / 1e6);
        currentLocation.setLongitude(currentPoint.getLongitudeE6() / 1e6);
    }

    @Override
    protected boolean isRouteDisplayed() {

        return false;
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

下面是我的 main.xml ccomplete，其中包含我从谷歌地图注册站点获得的密钥。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <FrameLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
        <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0steid872FeGgae0eO2Dhdyei37sFPHG65t7N6XA"/>
    </FrameLayout>
</LinearLayout> 
```

![下面的图片是我得到的全部](../Images/280b112649a2de54654d804c40463643.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:05:42.813

[https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey) - 官方信息，怎么办。

一步步。

1) 创建密钥库

2) 从您的密钥库生成哈希 MD5

3）在这里登录： [https ://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

4) 将密钥添加到您的应用程序

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T07:02:55.343

在`onCreate`你应该初始化`locationManager`字段。移动

```
locationManager = (android.location.LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

`getBestProvider()`从方法到 onCreate() 的字符串

查看您的堆栈跟踪。您只有一个地方可能发生 NPE

```
. . . 
08-20 05:14:43.583: E/AndroidRuntime(239): Caused by: java.lang.NullPointerException
08-20 05:14:43.583: E/AndroidRuntime(239):  at com.shawnbe.mallfinder.MallFinderActivity.onResume(MallFinderActivity.java:61)
08-20 05:14:43.583: E/AndroidRuntime(239):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T03:49:49.940

您获得 NullPointer 的原因是您`locationManager`在使用它之前从未设置过`onResume()`。

`onCreate()`将在您`getBestProvider()`注释掉的地方被调用。然后`onResume()`被调用并使用 locationManager。虽然你这里还有一个更复杂的情况。我会看看我是否可以在程序上遍历 onResume() 中将执行的代码......

1.  超级.onResume()
2.  locationManager.requestLocationUpdates() <--它可能会查找此方法并为您获取空指针...如果 locationManager 不为空，我们将继续
3.  locationManager = (android.location.LocationManager) getSystemService(Context.LOCATION_SERVICE); <-- 现在您正在更改第 2 步中引用的对象...

如果我是你，我会简化一些事情，只设置 locationManager `onCreate()`（作为一般编程实践，你想限制方法中副作用的数量，我的意思是`getBestProvider()`，你应该只返回最好的提供者，尽量不要对你的状态做任何其他事情，或者你在那个方法之外得到疯狂的意想不到的事情）。如果你还在发疯，我会把第一行`getBestProvider()`放在`onResume()`

```
protected void onResume() 
{
    super.onResume();
    locationManager = (android.location.LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(getBestProvider(), 1000, 1, this);
} 
```

您可能不想这样，但它会确保您的问题是 locationManager 在`onResume()`

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T06:02:07.840

确保在使用之前对其进行初始化。

```
locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T05:05:56.210

NullPointerException 是因为您正在访问 locationmanager 的 null 对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T13:13:23.427

请更新您的 Google 地图 API 密钥，以前的 API 密钥已过期，因此在这种情况下您无法看到 Google 地图。 [https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-27T04:40:04.203

如果您有有效的地图键，那么检查您是否将 locationManager 的实例放入 onResume 我猜您必须在 onResume() 中实例化位置管理器。

```
 locationManager = (android.location.LocationManager)getSystemService(Context.LOCATION_SERVICE); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-29T14:24:48.987

您需要将地图视图居中并设置合理的缩放级别。否则，地图视图可能会显示一些随机区域。

```
mapView.setCenter(
    new GeoPoint((int)(25.76032 * 1E6),  (int)(-80.213928 * 1E6)));
//Set a reasonable zoom level
mapView.setZoom(12); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-30T10:27:49.440

在发布模式下创建apk并运行此apk文件，因为当apk处于发布模式时会显示谷歌地图。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-31T20:33:42.053

locationManager 为空，没有讨论，你在 manifest.xml 中指定了吗？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-31T01:55:10.157

MAP API 需要有效的密钥才能正常工作。

要获取应用程序的 api 密钥，您需要按照以下步骤操作。

1.  使用 keytool 命令生成应用程序的认证指纹。

    keytool -list -keystore ~/.android/debug.keystore 示例：94:1E:43:49:87:73:BB:E6:A6:88:D7:20:F1:8E:B5:98

2.  使用指纹值，您可以从下面给出的链接生成地图 api 密钥

    [https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

笔记：

1.  当你想释放应用程序时，不能使用同一个maps api key。您必须使用发布密钥库而不是调试密钥库 (.android/debug.keystore)。使用上面给出的命令生成指纹，并使用它来生成地图 api 密钥以供生产使用。
2.  keytool 二进制文件可以在您的系统 jre bin 文件夹中找到。

> C:\Program Files\Java\jdk1.7.0_06\jre\bin

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-30T21:03:09.360

可能还有一个mapkey问题：

如果您在调试模式下运行应用程序进行测试，则必须使用默认密钥库创建一个映射键进行调试（例如在 linux 上，您可以在 ~/.android/debug.keystore 找到它）并将此映射键插入代码并使用直到你调试你的应用程序。

如果您想创建一个 apk 并运行它（例如在市场上发布您的 apk），您必须使用您的个人密钥库创建一个新的 mapkey，并在生成 apk 之前从您的代码中更改它

# java - 需要帮助来运行我的挥杆图形代码

> ID：12032784
> 
> 赞同：1
> 
> 时间：2012-08-20T05:49:39.370
> 
> 标签：java, swing

我正在尝试在用户单击 JFrame 的位置绘制类似月亮的形状（或者可能是使用我的代码实现的任何任意形状）。但我得到运行时异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
at java.awt.geom.AffineTransform.<init>(AffineTransform.java:488)
at sun.java2d.SunGraphics2D.clone(SunGraphics2D.java:267)
at sun.java2d.SunGraphics2D.create(SunGraphics2D.java:300)
at javax.swing.JComponent.paint(JComponent.java:1000)
at Shapes$component.paintComponent(Shapes.java:48)
at javax.swing.JComponent.paint(JComponent.java:1054)
at Shapes$component.paintComponent(Shapes.java:48)
at javax.swing.JComponent.paint(JComponent.java:1054)
at Shapes$component.paintComponent(Shapes.java:48)
at javax.swing.JComponent.paint(JComponent.java:1054)
at Shapes$component.paintComponent(Shapes.java:48)
at javax.swing.JComponent.paint(JComponent.java:1054)
at Shapes$component.paintComponent(Shapes.java:48)
at javax.swing.JComponent.paint(JComponent.java:1054)
at Shapes$component.paintComponent(Shapes.java:48)
at javax.swing.JComponent.paint(JComponent.java:1054) 
```

我哪里错了？如何消除这个错误。

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Shape;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Area;
import java.awt.geom.Ellipse2D;
import java.util.ArrayList;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Shapes extends JFrame{
private ArrayList shapes=new ArrayList();
    Shapes()
{
super("Creating moon on mouse clicks");
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setSize(400,400);

addMouseListener(new listener());
add(new component());
setVisible(true);
}
public class listener extends MouseAdapter
{
public void mouseClicked(MouseEvent e)
{
    int x=e.getX();
    int y=e.getY();
    int rand=(int) Math.floor(Math.random()*x);
    int temp;
    Area a1=new Area(new Ellipse2D.Double(x,y,rand,rand));
    temp=(int)rand/3;
    Area a2=new Area(new Ellipse2D.Double(x+temp,y+temp,temp,temp));
    a1.subtract(a2);
    shapes.add(a1);
    repaint();
}
}
public class component extends JComponent
{
public void paintComponent(Graphics g)
{
    super.paint(g);
    Graphics2D g2=(Graphics2D)g.create();
    for(int i=0;i<shapes.size();i++)
    {
        g2.draw((Shape) shapes.get(i));
    }
}
}
public static void main(String[] args) {
// TODO Auto-generated method stub
    SwingUtilities.invokeLater(new Runnable(){public void run(){new Shapes();}});
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T05:52:21.873

当您覆盖时，`paintComponent()`您正在调用`super.paint()`而不是`super.paintComponent()`.

`JComponent.paint()`executes`paintComponent()`和`paintBorder()`的 默认实现`paintChildren()`。因此，执行`super.paint()`from`paintComponent()`会创建无限的执行循环。这就是原因`StackOverflowError`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T05:52:32.617

这是错误的...

```
public void paintComponent(Graphics g)
{
    super.paint(g);
    // ...
} 
```

以防万一你错过了;) - 它应该是

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    // ...
} 
```

# xml - HTML元素和XML元素的区别？

> ID：12032785
> 
> 赞同：0
> 
> 时间：2012-08-20T05:49:41.180
> 
> 标签：xml, dom

```
xmlElement.constructor

ElementConstructor

htmlElement.constructor

HTMLSelectElementConstructor 
```

所以我发现 xmlElement 没有类似的方法`getElementsByTagName()`和其他一些？

如何在 xmlElement 节点中获取具有给定名称的标签？

- - -更新 - - -

实际上它们是相同的，到目前为止没有区别，我只是问题是由于：

```
anyElement = document.getElementsByTagName('div');

anyElement[0].getElementsByTagName('p'); // TypeError: 'undefined' is not a function 
```

但

```
element = anyElement[0];

element.getElementsByTagName('p')// this work 
```

如果我只分配给另一个变量怎么会发生这种情况？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T06:00:25.203

在很大程度上，API 非常相似，但是 HTML 没有 XML 严格，所以我应该想象它有更多的错误处理内容。

# iphone - 向服务器发送数据 - 但服务器获取空白数据

> ID：12032788
> 
> 赞同：0
> 
> 时间：2012-08-20T05:49:57.790
> 
> 标签：iphone, objective-c, json, webserver

我正在尝试将数据发送到服务器。当我发送请求时它发送到服务器但服务器得到它的空白。我不明白为什么会发生它。请帮我解决这个问题。

```
NSArray *keys = [NSArray arrayWithObjects:@"username",@"password",@"email",@"fullname",@"phone",@"status",nil];
NSArray *objects = [NSArray arrayWithObjects:@"test",@"123456",@"test999@test.com",@"name",@"234566343",@"1",nil];

NSDictionary *questionDict = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

NSDictionary *jsonDict = [NSDictionary dictionaryWithDictionary:questionDict];
NSString *jsonRequest = [jsonDict JSONRepresentation];

RequestHandler *handler = [[RequestHandler alloc] init];
handler.method = @"POST";
handler.delegate = self;

   NSLog(@"JSOnRequest -- %@",jsonRequest);
handler.postData = jsonRequest;
handler.requestName = @"registration";
handler.URL =@"http://demo.keshavinfotech.com/edv/user_register.php?";

[handler startRequest];
[handler release];

- (void)startRequest 

{
 NSURL *requestURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@",mRequestURL]];//NSURLRequestReturnCacheDataElseLoad

    NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:requestURL

                                                           cachePolicy:NSURLRequestReturnCacheDataElseLoad

                                                       timeoutInterval:mTimeOut];

    [request setHTTPMethod:@"POST"];

    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];

    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    [request setValue:[NSString stringWithFormat:@"%d", [mPostData length]] forHTTPHeaderField:@"Content-Length"];

    [request setHTTPBody:[mPostData dataUsingEncoding:NSUTF8StringEncoding]];

    self.connection = [[[NSURLConnection alloc]initWithRequest:request delegate:self] autorelease];

} 
```

是服务器编码解码问题还是别的什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:09:29.667

我使用以下参数调用服务器，

```
WebserviceCall[622:f803] {
    email = "test999@test.com";
    fullname = name;
    password = 123456;
    phone = 234566343;
    status = 1;
    username = test;
} 
```

然后像以下明智的那样回复给我。

```
{"responseData":{"result":"failed","msg":"Please fill all the required fields"}} 
```

您能否提供正确的参数格式来发送，我可以检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:03:14.853

尝试这样做：

```
//form you request like you did (I think it's ok), then

NSData *postData = jsonRequest;

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSMutableURLRequest *urlRequest = [[[NSMutableURLRequest alloc] init] autorelease];
[urlRequest setURL:@"http://demo.keshavinfotech.com/edv/user_register.php?"];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
[urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[urlRequest setValue:@"utf-8" forHTTPHeaderField:@"charset"];
[urlRequest setHTTPBody:postData];
[urlRequest setTimeoutInterval:60.0];//or whatever interval you prefer

NSURLConnection *tmpConn = [[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self] autorelease];
self.connectionProperty = tmpConn; 
```

# jquery - 实现类似 Facebook 的内容加载

> ID：12032789
> 
> 赞同：2
> 
> 时间：2012-08-20T05:50:00.517
> 
> 标签：jquery, asp.net

我想在我的网页滚动时实现 Facebook 之类的自动内容加载，我们怎样才能轻松实现这一点？是否有任何 jquery 插件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T05:54:49.540

使用 Jquery Waypoints，它会在滚动到达页面底部时创建一个事件挂钩，然后根据您的使用情况对其进行 ajaxify。[Js 小提琴示例](http://jsfiddle.net/nVLZA/36/)

虽然它在示例中使用了 JqueryMobile，但与此无关。正确使用它应该可以解决问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:41:50.207

这相当容易。首先，您必须注意元素何时滚动到其末尾。如果是 FB 侧边栏代码，或者整个页面，你会看到当它滚动到末尾时，在 AJAX 获取数据的同时显示加载 GIF 图像，然后显示数据和 GIF图像被推到视野之外。要注意用户滚动到底部的时刻，您可以执行以下操作：

```
$(element).bind('scroll',function() {
   if ($(this).outerHeight() + $(this).scrollTop() >= $(this).get(0).scrollHeight) {
   //unbind the 'scroll' event until the data is fetched and displayed
   $(this).unbind('scroll');
   //ajax call to fetch data, display it, and finally rebind the 'scroll' event as a callback function
   }
  }); 
```

# magento - 为什么没有任何搜索结果？

> ID：12032791
> 
> 赞同：0
> 
> 时间：2012-08-20T05:50:27.440
> 
> 标签：magento

```
 <catalogsearch_result_index translate="label">
        <label>Quick Search Form</label>
        <reference name="root">
            <action method="setTemplate"><template>page/3columns.phtml</template></action>
        </reference>
        <reference name="left">

        </reference>
        <reference name="content">
            <block type="catalogsearch/result" name="search.result" template="catalogsearch/result.phtml">
                <block type="catalog/product_list" name="search_result_list" template="catalog/product/list.phtml">
                    <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                        <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    </block>
                    <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                    <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                    <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                    <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                    <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                    <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
                </block>
                <action method="setListOrders"/>
                <action method="setListModes"/>
                <action method="setListCollection"/>
            </block>
        </reference>
    </catalogsearch_result_index> 
```

我想使布局`page/2columns-left.phtml`。并且不显示`<block type="catalogsearch/layer" name="catalogsearch.leftnav" after="currency" template="catalog/layer/view.phtml"/>`

所以我删除了上面的代码。当我测试搜索功能时。表明`Your search returns no results.`

当我保留代码时。搜索功能还可以，但是左边的布局是无序的。如何纠正它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:56:57.253

通过在 xml 文件中再添加一行来删除左侧导航：

```
<remove name="catalogsearch.leftnav" /> 
```

# slickgrid - 表格单元格中的 Slickgrid 太宽

> ID：12032796
> 
> 赞同：3
> 
> 时间：2012-08-20T05:51:20.410
> 
> 标签：slickgrid

当 Slickgrid 添加到*表格单元格*样式的*div*时，网格会变得过宽，除非为该*div*指定最大宽度。网格似乎也获得了右侧的幻列。

是否有可能导致 Slickgrid 仅在该类型的布局中占用必要的空间？

[http://jsfiddle.net/ericjohannsen/uMQH2/3/](http://jsfiddle.net/ericjohannsen/uMQH2/3/)

**更新**

我注意到生成了以下 HTML

```
<div class="slick-header-columns" style="left: -1000px; width: 2978px;" unselectable="on"> 
```

宽度被显式设置为一个太大的值，即使考虑到左侧偏移 -1000px。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:33:28.727

我仍然希望有一个适当的解决方案，但与此同时，我能够通过在渲染网格后包含以下代码来解决这个问题

```
 grid.render();

    // Hack to fix grid width issue http://stackoverflow.com/q/12032796/141172 
    var cols = grid.getColumns();
    var numCols = cols.length;
    var gridW = 0;
    for (var i=0; i<numCols; i++) {
        gridW += cols[i].width;
    }

    $('#gc').width(gridW); // gc is the ID of the div used for SlickGrid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T22:44:52.387

SlickGrid 要求容器具有明确设置的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:16:36.643

将`forceFitColumns`属性设置为`True`

# centos - 在 CentOS 6.0 上安装“正确”的 debuginfo-kernel 软件包

> ID：12032797
> 
> 赞同：0
> 
> 时间：2012-08-20T05:51:26.083
> 
> 标签：centos

我有 CentOS 6.0 服务器，它带有内核 2.6.32-71。当我使用 centos 存储库中的 yum 安装 debuginfo-kernel rpm 软件包（其中包含调试内核）时，安装了内核 2.6.32-279.2.1 的调试内核，我猜这是针对 CentOS 6.3 的。

如何让 yum 为在 CentOS 6.0 中运行的 kerenl 安装 debuginfo-kernel 软件包？

在 CentOS 服务器上，我如何获得完整的内核版本号。“uname -r”只给了我“部分”版本号。

# > unname -r

2.6.32-71.el6.x86_64

我需要“71”后面的另外两个数字，所以我可以手动下载 rpm 包并自己安装它们。

谢谢你，艾哈迈德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:55:04.917

信息以 rpm 为单位：

```
rpm -qa | grep ^kernel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T09:59:32.760

The exact same thing happened to me, please follow the steps in my answer [here](https://serverfault.com/questions/527525/centos-server-rebooted-unexpectedly-and-im-unable-to-process-crash-file-what-a/527553#527553) in order to fix your issue.

# mysql - 使用 phpmyadmin/mysql 创建带密码的数据库

> ID：12032798
> 
> 赞同：0
> 
> 时间：2012-08-20T05:51:25.817
> 
> 标签：mysql, phpmyadmin

每当我尝试执行这个 sql 命令时：

```
create database sitename 
```

我明白了：

> #1044 - 用户 'adwebhst'@'localhost' 拒绝访问数据库 'sitename'

我试过这个：

```
grant all privileges on webcamporn.* to  'adwebhst'@'localhost' identified by '628ff50f63620c1b'; 
```

PHPmyadmin 甚至没有创建数据库的选项..

我该如何处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:03:44.500

在 GRAND ALL 运行这个之后：

```
FLUSH PRIVILEGES; 
```

# ruby-on-rails - 一个凌乱的视图层，我应该离开 MVC 吗？

> ID：12032806
> 
> 赞同：3
> 
> 时间：2012-08-20T05:52:49.843
> 
> 标签：ruby-on-rails, oop, model-view-controller, refactoring, solid-principles

我将问题从 IRC 移到这里。

问题：我已经进入了一个我想要保持良好状态的代码库。我们不总是吗？

本着这种精神，在添加了一些覆盖率（如测试覆盖率）之后，我应用了几个已知的重构/改进来帮助完成这项任务。这是我所做的（实际上我做了更多，但这些是我的问题的相关部分）：

1.  添加了一些 PORO 对象以卸载在模型、控制器甚至视图中执行的一些任务。
2.  使用 *decent_exposure* 来摆脱视图层所在的实例变量地狱。
3.  *使用draper*实现了一些 for-views 装饰器，以避免在视图中包含太多逻辑。
4.  为产生多个模型的操作添加了演示者。

现在，我（乐观地）预计这一切都会得到回报。确实更好，但是除了厨房水槽之外的所有东西都扔了之后，我本以为它会*好得多*。它不是。

由于我有一个视图层，它实际上是在单个操作上呈现 10-15 个部分，所以我担心我在控制器或视图层中更改内容的能力。每当我决定将帐户的成员称为“成员”或仅称为“用户”时，我都不想经历所有这些部分。我很关心这一点，因为模型层计划遭受更重大的变化。

我最初的想法（并且仍然坚持）是有愚蠢的观点。我希望我的大部分视图层完全避免知道他们正在渲染的模型。我想要一个知道如何做两件事的中间对象：从模型中提取它需要的数据，并呈现 HTML。在你告诉我我在这里违反了 SRP 之前，这个对象的真正责任可以理解为“向最终用户显示模型”。

在过度简化的情况下，我希望我的观点（至少上述这些观点）看起来像这样：

```
= some_object.render
= another_object.render 
```

它听起来确实像装饰者模式，也听起来像演示者模式，至少我是这样的。

然后我开始认为我会对 MVC（至少是 rails 公开的 MVC）有很大的争议，所以我想知道这是否是最好的解决方案（除了明显的，在这个时间限制下几乎不可能，重写） ，所以我对投篮更有信心。

因此，在这种情况下，我真正的问题归结为：

a) 切换到 MVP、MVVM、MV 是否是解决这个问题的正确解决方案？

b) 如果是，你能告诉我我可以为这个 some_object.render 视图样式使用的最佳解决方案吗？

c）如果不是，能否告诉您如何避免这些部分和视图之间的硬依赖，而模型层可能需要数小时才能被显着重写？

d) 希望你不要来这里：YAGNI，所以之后修复？我很确定我会需要它。

我想到了另一种选择并带到了 IRC，不是真正的标题精神，而是一个有效的选择（尽管我认为手头的任务有点矫枉过正）：

e) 添加一个服务层，并使我的视图映射到该服务层上的“逻辑”模型，因此我能够独立于视图更改物理模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:34:18.987

这个问题很难回答，主要是因为你的确切问题含糊不清。有趣的是，我认为这也是你觉得需要帮助才能继续前进的原因。

**总结一下：**

您已经重构为：

*   愚蠢的观点
*   干净的景色
*   测试视图

不过，您的主要抱怨是：

> 我有一个视图层，它实际上是在单个操作上呈现 10-15 个部分，我担心我在控制器或视图层中更改内容的能力。我不想经历所有这些部分

**我会做什么：**

我会通过将相关视图合并在一起来解决“我有太多视图文件”。

我会通过组织我的视图以更好地适应代码实际变化的方式来解决“我找不到我的视图代码”。

**笔记：**

听起来您正面临两种反模式：

*   解决方案蔓延（过度分解）
*   过度使用模式

如果 10-15 个分音看起来过多，也许就是这样！每个部分都在代码库中重复使用吗？它们可以更好地分组（所以我可以渲染 1 而不是 3）？我可以发送一个部分数据来调整其渲染而不是创建 2 个部分吗？

听起来你可能在“责任分工”方面走得太远了，而且大量的观点正在阻碍你。也许重组是前进的道路？

寻找 MVP、MVVM 等是错误的方向。沉迷于模式可能会伤害你一点。例如，

```
# how is this:
= some_object.render

# different from this?
= render "some_object" 
```

视图可以确定地负责“向最终用户显示模型”

我感觉到你的痛苦，有时代码量本身就是一个问题。组织和分组虽然技术含量低，但可能是解决它的最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:14:02.860

不是对您的问题的一般答案，但对于您提到的这个*特定*问题：

> 每当我决定将帐户的成员称为“成员”或仅称为“用户”时，我都不想经历所有这些部分。

使用 Rails i18n。它不仅适用于实际的 i18n，它也是一种干掉用户可显示术语和其他语言的好方法，就像这样。

这可能是您问题的一般答案的线索：可能不*只有*一个答案，可能有不同的答案来提高代码不同方面的可维护性和可理解性。

这东西很难，可能不要相信任何说有灵丹妙药的人，如果你只是按照他们说一切都会好的方式去做——尤其是如果他们在不知道更多细节的情况下说的话，那么一般/您给我们的项目/问题的一般描述。

但我不认为演示者/装饰者的方法有什么问题，如果它似乎能让事情变得更好的话。请记住保持简单；如果您可以摆脱纯粹的无魔法 ruby​​ 装饰器/演示器，我认为这比使用一些奇特的神秘实现的 rails 引擎要好。永远记住，我们的目标是让事情尽可能简单（而不是更简单），这样你就走在了正确的道路上。（是的，有时我意识到我为了保持简单而把事情复杂化了。哎呀）。

## 对于我*认为*你的问题的另一部分，

我有时会在我的模型上使用装饰器来提供返回部分名称以用于呈现它们的方法。我不确定当我这样做时我是否对解决方案完全满意，但是，嘿，这与 Rails 自己猜测模型部分名称的神奇方式（可能有 -以某种方式自定义或参数化，但没有人能记住/找到它）。而且我认为它比`some_object.render`. 相反，更像`render :partial => some_object.render_partial_name, :object => some_object`.

或者你可以提供你提到的那个中间对象，它基本上是一个演示者类型的东西，实际上与上面非常相似，尽管具有不同的对象图：

```
PresentWidget.new( some_object ).render 
```

但是你必须使用一些魔法来制作一个能够适当调用 ActionView 渲染的单独对象。一些神奇的 Rails Presenter 引擎可以帮助您做到这一点。但我总是被太多的魔法关闭。

或者你可以看看细胞。我经常认为我想要 Cells 来解决这样的问题，尽管我个人在开始尝试使用它时，总是以“太多魔法，太多与铁轨打架”而告终，然后再次放弃它。

和一个类似的堆栈溢出问题，也没有任何特别令人惊叹的解决方案，但也许它会给你一些想法：[对象的动态部分名称](https://stackoverflow.com/questions/6733549/dynamic-partial-name-for-an-object)

不过，在所有选项中，我个人*不会*为模型本身提供`#render`方法。将独立演示者连接到 ActionView 以便它可以调用`render`是一回事，像这样将模型连接到其中似乎更糟。

## 最后，你确定重写不比重写好？

在您花费所有时间思考并实施这种架构之后——您可能会发现首先重写该东西会更快，您一直说您没有时间去做。如果您很清楚如何将其重写为更清洁，但不明显如何在顶部添加这个奇怪的元 rigamarole 以更清洁......为什么不做显而易见的事情呢？在上面添加这些东西自然也会重写/重构。

# python - 如何为测试目的创建 cgi.FieldStorage？

> ID：12032807
> 
> 赞同：6
> 
> 时间：2012-08-20T05:52:53.930
> 
> 标签：python, unit-testing, file-upload, cgi, webob

我正在创建一个实用程序来处理基于 webob 的应用程序中的文件上传。我想为它写一些单元测试。

我的问题是 - 由于 webob`cgi.FieldStorage`用于上传文件，我想以`FieldStorage`简单的方式创建一个实例（不模拟整个请求）。我需要做的最少代码是什么（没什么花哨的，模拟带有“Lorem ipsum”内容的文本文件的上传就可以了）。还是模拟它是一个更好的主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-16T17:41:36.453

你的答案在 python3 中失败了。这是我的修改。我确信它并不完美，但至少它适用于 python2.7 和 python3.5。

```
from io import BytesIO

def _create_fs(self, mimetype, content, filename='uploaded.txt', name="file"):
    content = content.encode('utf-8')
    headers = {u'content-disposition': u'form-data; name="{}"; filename="{}"'.format(name, filename),
               u'content-length': len(content),
               u'content-type': mimetype}
    environ = {'REQUEST_METHOD': 'POST'}
    fp = BytesIO(content)
    return cgi.FieldStorage(fp=fp, headers=headers, environ=environ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T06:00:46.380

经过一番研究，我想出了这样的事情：

```
def _create_fs(mimetype, content):                                              
    fs = cgi.FieldStorage()                                                     
    fs.file = fs.make_file()                                                    
    fs.type = mimetype                                                          
    fs.file.write(content)                                                      
    fs.file.seek(0)                                                             
    return fs 
```

这对于我的单元测试来说已经足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-09T11:05:01.157

我正在做这样的事情，因为在我的脚本中我正在使用

```
import cgi

form = cgi.FieldStorage()

>>> # which result:
>>> FieldStorage(None, None, []) 
```

当您的 URL 包含查询字符串时，它将如下所示：

```
# URL: https://..../index.cgi?test=only
FieldStorage(None, None, [MiniFieldStorage('test', 'only')]) 
```

所以我只是手动推`MiniFieldStorage`入`form`变量

```
import cgi

fs = cgi.MiniFieldStorage('test', 'only')
>>> fs
MiniFieldStorage('test', 'only')

form = cgi.FieldStorage()
form.list.append(fs)

>>> form
>>> FieldStorage(None, None, [MiniFieldStorage('test', 'only')])

# Now you can call it with same functions
>>> form.getfirst('test')
'only' 
```

# android - 在Android版本的phonegap中不滚动HTML页面内的元素

> ID：12032809
> 
> 赞同：1
> 
> 时间：2012-08-20T05:53:12.917
> 
> 标签：android, cordova, scroll, android-webview

我正在开发phonegap应用程序。

在 iPhone 版本中，我们可以通过将“UIWebViewBounce”设置为 NO 来停止弹跳。

那么我怎样才能停止在 Android 版本中弹跳以进行 web 视图。

因为在 Android 版本中，它的弹跳被认为是滚动。所以我不能滚动html页面中滚动条内的元素。

任何解决方案用于激活滚动条的滚动并停止弹跳主屏幕。？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:35:35.530

好吧，当您尝试在 android 上使用 phonegap 创建应用程序时，您无法获得正常的 html 滚动行为。
您无法获得 android webview 中任何 html 元素的溢出：滚动效果。
您需要使用第三方库，例如[jquerymobile、](http://jquerymobile.com/) [iscroll4 等，](http://cubiq.org/iscroll-4)以获得原生的外观和感觉。
或者您也可以构建自己的逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:44:50.757

这是我的示例，它将显示滚动条。它会帮助你。

```
 public class MyActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {

         super.onCreate(savedInstanceState);

        super.loadUrl("file:///android_asset/www/index.html");

        // Display vertical scrollbar and hide horizontal scrollBar
        super.appView.setVerticalScrollBarEnabled(true);
        super.appView.setHorizontalScrollBarEnabled(false);
        // set scrollbar style
        super.appView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    }

 } 
```

# multithreading - C ++ Qt - 调用插槽时，该函数是否称为新线程？

> ID：12032813
> 
> 赞同：5
> 
> 时间：2012-08-20T05:53:43.907
> 
> 标签：multithreading, qt, slot

我想知道`do_something()`当我单击时该函数是否被视为新线程`my_button`。

```
connect(my_button, SIGNAL(clicked), this, SLOT(do_something)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T06:00:28.467

典型的信号/插槽行为取决于[连接类型](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)。`Qt::AutoConnection`未指定时，如果无法建立直接连接，则默认使用接收者的线程。

从文档：

> 当控制返回到接收者线程的事件循环时调用该槽。插槽在接收者的线程中执行。

您可以在连接时更改[连接类型](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)以更改行为：

```
connect(my_button, SIGNAL(clicked), this, SLOT(do_something),
    Qt::QueuedConnection); // always queue 
```

由于您正在谈论一个发出信号的按钮，因此默认连接类型`Qt::AutoConnection`意味着建立了直接连接，并且`do_something`插槽将立即执行，就像在单击按钮时直接调用它一样。

# android - 我们可以在 android 设备上同时运行 2 个应用程序吗？

> ID：12032817
> 
> 赞同：8
> 
> 时间：2012-08-20T05:54:03.243
> 
> 标签：android

我希望拥有的是，一个应用程序正在 android 主设备上运行并显示在主设备上。第二个应用程序在主 android 设备上运行并显示在连接到主设备的另一个显示设备上。这另一个显示器将具有触摸屏。

** 我的意思是只有一个主要的 android 设备。另一个只是一个显示设备，它是触摸屏（它将作为主设备的附件）。这两个应用程序都将在主要的 android 设备上运行，只是显示会有所不同。一个将显示在主设备上，另一个应用程序将显示在第二个显示设备上。请让我知道，是否可行。如果是，需要做哪些改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:57:45.330

你在想什么是有可能的。基本上，您将运行一个应用程序仅显示在您的主屏幕上，而一个运行的应用程序仅显示在连接的（可能是 hdmi/mhl）显示器/显示器/电视上。

唯一的问题是，您需要的那种 api 并不是所有品牌的 android 设备通用的。

检查此链接，例如摩托罗拉：

[http://developer.motorola.com/docs/motorola-hdmi-status-api/](http://developer.motorola.com/docs/motorola-hdmi-status-api/)

# javascript - 多个 slideToggle div 之间的转换

> ID：12032819
> 
> 赞同：0
> 
> 时间：2012-08-20T05:54:07.527
> 
> 标签：javascript, jquery, transition, slidetoggle

我的网页的基本功能是我会有缩略图，`.thnail`它会显示一个项目，当点击时，一个下拉面板，`.dropdown`将向下滑动以显示与点击的缩略图相关的项目的图像（轮播插件）。功能快到了，但是点击缩略图之间的过渡真的很突然。一旦选择了另一个缩略图，我希望面板向上滑动，然后向下滑动。

问题是我需要`.dropdown`and`.thnail`是分开的，他们不能是父母/孩子，因为我正在为我的轮播使用复杂的插件。

**这是我[的 JSFIDDLE](http://jsfiddle.net/iqab/NPRfM/1/)**

我找到了这个[教程](http://jsfiddle.net/joshnh/SCKhf/) ，但是我在实现它时遇到了麻烦，因为它基于父/子关系，而我的 html 是基于 ID 关系的。

其次，有没有办法将我的 ID 关联起来，`rel="..."`而不是`href="#"`？有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:33:31.623

这是滑动多个元素的[jsfiddle 。](http://jsfiddle.net/NPRfM/3/)您可能会注意到，在下拉菜单之间切换时，下拉菜单下方的元素会“摇晃”。

看看这个[jsfiddle](http://jsfiddle.net/NPRfM/3/)以尽量减少震动。上面的和上面的完全一样，下面的是变化。

# security - 如何验证源代码是从网络复制的

> ID：12032821
> 
> 赞同：6
> 
> 时间：2012-08-20T05:54:17.407
> 
> 标签：security, checksum, sha, code-access-security

我正在构建一个网络工具来检查提交的内容是来自网络还是提交者自己的工作。抄袭检测器。

我有一些想法，我可以生成校验和并将其用作与其他条目进行比较的关键。但是，如果有人进行了一些小的更改，例如包含/删除注释、更改变量/函数名称等，那么校验和将会不同，因此这种方法将不起作用。

有什么更好的方法建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T06:19:34.713

[抄袭检测](http://en.wikipedia.org/wiki/Plagiarism_detection)是相似性检测的一种特殊情况。这是一个与计算机科学本身一样古老的研究领域。有*很多*已发表的研究，但没有一个简单的答案。

例如，参见[Google Scholar 搜索“代码相似性剽窃”](http://scholar.google.com.au/scholar?q=code+similarity+plagiarism&btnG=&hl=en&as_sdt=0%2C5)或[“剽窃检测”](http://scholar.google.com.au/scholar?q=plagiarism+detection&btnG=&hl=en&as_sdt=0%2C5)。定期谷歌搜索[“源代码相似性检测算法”之](https://www.google.com.au/search?q=source+code+similarity+detection+algorithm)类的东西也很有用。

该领域也有很多[现有的工具](http://www.ics.heacademy.ac.uk/resources/assessment/plagiarism/detectiontools_sourcecode.html)，所以我很惊讶您正在尝试编写自己的工具。

正如您所指出的，除非代码完全相同，否则校验和将无法完成这项工作。可以提供帮助的技术包括：

*   构建词频直方图并进行比较

*   提取评论文本并使用文本子字符串匹配查找复制的评论

*   提取变量、类和方法名称并查找使用相同名称的其他代码。您必须对每个人都会选择的“明显”名称以及由问题决定的名称进行大量更正，例如实现特定的接口或 API。私有类成员变量和函数或方法中的局部变量是最有用的比较。您将需要编译器或至少语法解析器的帮助来提取这些语言。

*   寻找缩进风格的差异。除了使用制表符缩进的这一功能外，用户是否使用了所有空格缩进？

*   比较解析树或标记流以去除格式化的影响。您通常必须比较单个函数等，而不仅仅是整个代码。

*   ......还有更多

您需要做的是生成一份报告，权衡所有这些因素和其他因素，并将它们呈现给人类，以便人类做出决定。您的工具应该解释*为什么*它认为两个结果相似，而不仅仅是它们相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:49:06.870

我将如何解决这个问题，最近可以添加自定义增强功能：

删除所有不是字母或数字的内容；

使用`explode()`空格字符作为分隔符并查找所有单词；现在你知道你在那篇文章中有多少字了；

现在，您必须找出该词在该文章中出现的次数，并在每次在文本中找到该词时增加词指示器；

将其存储到数组中，例如：

```
$words['wordX']++; 
```

对您要查看的第二篇文章也执行此操作；

现在，比较它们；你知道原始数据；在这一步可以得出一些结论；

使用约翰的J、Feudalism的F等大字，也可以得出一些结论；

从这里你可能会知道这篇文章是否是关于同一件事的，这可能是真正的步骤#1

现在，您必须以某种方式同时逐字解析两篇文章，并查看它们之间的差异。

学生可以在原始文章中找到的每个句子/段落之后添加自己的“原始”句子。

确保如果您在其中一篇文章的解析过程中取得了很大进展，您会以某种方式保持平衡的解析过程并尝试解析第二篇文章，直到达到该平衡。

我看到 2`for`条指令，可能是 3 条，或者不是 3 条，而是一个试图在解析过程中保持平衡的函数。

Also, you have to use `explode()` and check sentence by sentence, and word by word from each sentence and find the similarity.

I am sure that you get the idea, but i say again, you cant parse the entire WWW.

# c++ - 通过 fstream 读取文件时将损坏的数据存储在变量中...为什么？

> ID：12032822
> 
> 赞同：1
> 
> 时间：2012-08-20T05:54:19.467
> 
> 标签：c++, fstream

当我输出下面看到的 InitialSeedFinder 函数的返回值（也就是存储在种子变量中的值）时，我得到了一些随机的 ascii 字符，这些字符破坏了预期的字符串值。仅当缓冲区超过 2 个字符时才会发生这种情况（即，它适用于 order 变量小于 3 时）。

在下面的代码中看到的while循环中引入了这个错误......

有人可以解释为什么会这样吗？它与 read() 函数的工作方式有关吗？

```
string InitialSeedFinder(int order, string fileName){
    string seed; 
    ifstream inputStream;
    Map<string, int> frequencyMap;
    inputStream.open(fileName.c_str());
    int offset = 0;
    inputStream.clear();
    char* buffer = new char [order];

    //get all k char sequence
    while (inputStream.get() != EOF) {    
        inputStream.seekg(offset);
        inputStream.read(buffer, order);
        string key(buffer);
        if (frequencyMap.containsKey(key)) {
            frequencyMap[key] = frequencyMap[key] + 1;
        }
        else {
            frequencyMap.put(key, 1);
        } 
         offset++;
    }
    inputStream.close();

  //go through and find the most frequent key
    int greatestFrequency = 0;
    int frequency = 0;
    foreach(string key in frequencyMap)
    {
        frequency = frequencyMap[key];
        if (frequency > greatestFrequency) {
            greatestFrequency = frequencyMap[key];
            seed = key;
        }
    }

    return seed;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:01:36.427

如果字符串，read() 不会在末尾添加终止符。但是，当将 char* 转换为字符串时，它需要一个 nul 终止符。当你的缓冲区很短时，你很幸运，最后有一个零，当它更长时，有非零数据。

# ruby-on-rails - 轨道返回对象不是一个列表

> ID：12032827
> 
> 赞同：0
> 
> 时间：2012-08-20T05:55:05.660
> 
> 标签：ruby-on-rails, activerecord

好的，所以我有一个范围可以找到位置等于参数的模型：

```
class EatTile < ActiveRecord::Base
  attr_accessible :category, :link, :map, :name, :num_votes, :position, :price, :rating

  scope :pos, lambda{|position| {:conditions => ["position = ?", position]}}
end 
```

在我的控制器中，我有以下内容来获取我需要的瓷砖：

```
@tiles = EatTile.where("position > 0 AND position < 20") 
```

我在想，如果我想获得位置为 1 的图块的名称，我可以在我的视图中调用这样的东西：

```
@tiles.pos(1).name 
```

相反，我必须在 pos 调用和名称之间包含“first”。这是最好的方法吗？我是 Rails 新手，不想早早做错事。

另外，按照我上面的方式来做是否更快，或者在我看来，这样做会更好：

```
EatTile.pos(1).first.name 
```

我认为我这样做的第一种方法更正确，因为它首先缩小了查询范围，但我不确定。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:13:24.730

您必须输入`first`，因为查询的结果是一个数组（一般来说）。试想一下，您可能有几条符合您的条件的记录，不从数组中检索一个对象并对其调用方法看起来很荒谬，不是吗？

关于数组。当您键入该`@tiles.pos(1)`行时，实际上您已经获得了`ActiveRecord::Relation`. 您可以通过键入来检查它`@tiles.pos(1).class`。拥有 Relation 对象允许我们与另一个查询链接，目的是在最后生成一个 SQL 查询到数据库。

更新：

看起来解决方案可能是这样的：

```
scope :pos, lambda { |position| where(:position => position).first } 
```

但这可能会导致未来的错误，因为作用域的目的是与另一个查询链接，调用该方法`first`将杀死惰性功能。

我认为解决方案可能只是添加方法：

```
def self.get_pos(position)
  pos(position).first
end 
```

所以你可以像这样使用它

```
EatTile.get_pos(1).name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:34:56.857

您可以定义自定义类方法`pos`：

```
class EatTile < ActiveRecord::Base
  def self.pos(position)
    where(:position => position).first
  end
end 
```

这将使使用`@tiles.pos(1).name`.

# winapi - CopyItems 和 MoveItems 在 windows-7 64 位上崩溃

> ID：12032828
> 
> 赞同：4
> 
> 时间：2012-08-20T05:55:07.440
> 
> 标签：winapi, visual-c++, com, api-hook

我正在挂钩函数，即 IFileOperation::CopyItems 来实现文件复制监控。我的代码在 windows-7 32 位机器上运行完美，但在 windows-7 64 位机器上崩溃请帮助我，我的代码如下。

```
PVOID GetInterfaceMethod(PVOID intf, DWORD methodIndex)
{
   return *(PVOID*)(*(DWORD*)intf + methodIndex * 4);
}

typedef HRESULT (WINAPI  *CopyItemsNext)(IFileOperation * pThis, IUnknown *punkItems,IShellItem *psiDestinationFolder);
CopyItemsNext Real_CopyItems = NULL;
CopyItemsNext Actual_CopyItems;

HRESULT WINAPI CopyItemsCallback(IFileOperation * pThis, IUnknown *punkItems,IShellItem *psiDestinationFolder)
{

    MessageBoxW(NULL,L"CopyItems Function Called", L"HookedCopyItemS", MB_OK);
    return Real_CopyItems(pThis, punkItems, psiDestinationFolder);
}

HRESULT WINAPI CoCreateInstanceCallback(REFCLSID rclsid, LPUNKNOWN pUnkOuter, DWORD dwClsContext, REFIID riid, LPVOID *ppv)
{
       const char *IFileOperation_GUID = "{3AD05575-8857-4850-9277-11B85BDB8E09}";
       char GUIDString[64];

       HRESULT HR = Real_CoCreateInstance(rclsid, pUnkOuter, dwClsContext, riid, ppv);

      sprintf_s(GUIDString,64, "{%08X-%04X-%04X-%02X%02X-%02X%02X%02X%02X%02X%02X}\0",
      rclsid.Data1, rclsid.Data2, rclsid.Data3,
      rclsid.Data4[0], rclsid.Data4[1],
      rclsid.Data4[2], rclsid.Data4[3],
      rclsid.Data4[4], rclsid.Data4[5],
      rclsid.Data4[6], rclsid.Data4[7]);

if(strcmp(GUIDString, IFileOperation_GUID) == 0)
{
   MessageBoxA(NULL, "IFileOperation_GUID Found", GUIDString, MB_OK);

   if(Real_CopyItems == NULL)
   {
    Actual_CopyItems = (CopyItemsNext)GetInterfaceMethod(*ppv, 17);
    MessageBoxA(NULL,"AFTER GetInterfaceMethod", "TEST", MB_OK);

    if (MH_CreateHook(Actual_CopyItems, &CopyItemsCallback, reinterpret_cast<void**>(&Real_CopyItems)) != MH_OK)
    {
        MessageBoxW(NULL, L"Failed CreateHook Real_CopyItem", L"Info!", MB_ICONWARNING|MB_OK);
    }
    if (MH_EnableHook(Actual_CopyItems) != MH_OK)
    {
        MessageBoxW(NULL, L"Failed EnableHook Real_CopyItem", L"Info!", MB_ICONWARNING|MB_OK);
    }
  }
}
return HR;
}

  //DllMain Function 
  BOOL APIENTRY DllMain(HMODULE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved)
  {
     switch (ul_reason_for_call)
     {
      case DLL_PROCESS_ATTACH:
      if (MH_Initialize() != MH_OK)
      {
         MessageBoxW(NULL, L"Failed Initialize", L"Info!", MB_ICONWARNING|MB_OK);    
      }
      if (MH_CreateHook(&CoCreateInstance, &CoCreateInstanceCallback, reinterpret_cast<void**>(&Real_CoCreateInstance)) != MH_OK)
      {
          MessageBoxW(NULL,L"Failed MH_CreateHook CoCreateInstance",L"Info!",MB_ICONWARNING|MB_OK);
      }
      if (MH_EnableHook(&CoCreateInstance) != MH_OK)
      {
          MessageBoxW(NULL,L"Failed MH_EnableHook StartDocA",L"Info!",MB_ICONWARNING|MB_OK);
      }
 break;

   case DLL_PROCESS_DETACH:
   if (MH_Uninitialize() != MH_OK)
   {               
   }
   if (MH_DisableHook(Actual_CopyItems) != MH_OK)
   {
   }
   if (MH_DisableHook(&CoCreateInstance) != MH_OK)
   {
   }

   break;
  }
 return TRUE;
} 
```

在为 windows-7 64 位调试时，我得到的是，它在返回时在 GetInterfaceMethod () 函数内部崩溃，请仔细检查并找出我的代码有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:30:51.733

也许您应该`return *(PVOID*)(*(DWORD_PTR*)intf + methodIndex);`在 x64 上使用。指针将按 8 字节的指针大小递增。

# ios - iOS 上的 NetStream 无法播放视频

> ID：12032830
> 
> 赞同：0
> 
> 时间：2012-08-20T05:55:18.810
> 
> 标签：ios, apache-flex, netstream

我在 Flash Builder 4.6 中构建了一个基于视图的移动项目，旨在在远程机器上播放视频。该项目在 Flash Builder 中运行良好。当导出，安装在 iPad 和 iPhone 4S 上时，瞄准失败。我尝试输出相关事件，发现该项目可以接收视频的元数据，但无法播放视频数据。

我被困住了。

代码是这样的：

```
private var netConnection:NetConnection

        private var netStream:NetStream;

        private var video:Video;

        protected function onInit():void{
            netConnection = new NetConnection();
            netConnection.addEventListener(NetStatusEvent.NET_STATUS,netConnectStatus);

            netConnection.connect(null);

            netStream = new NetStream(netConnection);
            netStream.client = new Object();
            netStream.client.onMetaData = function (info:Object):void{
                for(var str:String in info){
                    trace(str + " "+info[str]);
                }
            }
            netStream.bufferTime = 4;
            netStream.addEventListener(NetStatusEvent.NET_STATUS, netStreamStatus);
            netStream.play("http://192.168.0.101/video/video.mp4");

            video = new Video();
            video.attachNetStream(netStream);
            video.width = stage.stageWidth;
            video.height = stage.stageHeight;
            stage.addChild(video);

        }

        public function netConnectStatus(e:NetStatusEvent):void{

        }

        private function netStreamStatus(e:NetStatusEvent):void {
            switch(e.info.code)
            {
                case "NetStream.Buffer.Empty":
                    break;

                case "NetStream.Buffer.Full":
                    break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T10:27:44.280

我必须将我的 MP4 文件转换为 FLV 才能使其正常工作。另一种方法是使用 StageVideo 播放 MP4。

我无法使用它，因为我的应用需要以特定尺寸播放视频。

# apache-flex - 如何在 flex 中使用设计模式？

> ID：12032833
> 
> 赞同：0
> 
> 时间：2012-08-20T05:55:47.020
> 
> 标签：apache-flex, flex4, flex3, flex4.5, flexbuilder

我是弹性开发人员，

我在 flex 中创建了多个应用程序。但我没有在我的应用程序中使用任何设计模式。

如何在我的 flex 应用程序中开始使用设计模式。我知道有 MVC（模型视图控制）模式和许多其他模式

哪种模式更有用，我如何在我的应用程序中开始使用这种模式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:57:02.217

由于大小和复杂性的原因，大多数应用程序都会自然而然地开始使用框架，这些框架将强制或建议使用一些最常见的设计模式。

您的问题表明您可能希望在应用程序中使用更好的结构？

如果是这种情况，我会看看框架是如何在 Flex 中实现和使用的，例如

Parsley Robotlegs Mate 等...

如果您希望总体上改进您的编码，因为设计模式与语言无关，我会阅读“ActionScript 3.0 设计模式 - O'Reilly”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:05:29.987

[我建议您在 youtube http://goo.gl/vmc0e](http://goo.gl/vmc0e)上观看 PatternCraft 视频

还可以下载、调查代码并尝试使用：

*   机器人腿
*   香菜

请阅读[最佳实践](https://github.com/robotlegs/robotlegs-framework/wiki/Best-Practices)

github 上提供的所有源代码。我建议您加入社区并提交您的代码。

# mysql - 从另一个表的一个表中搜索字符串的最佳方法是什么

> ID：12032838
> 
> 赞同：0
> 
> 时间：2012-08-20T05:56:29.307
> 
> 标签：mysql

我有两个表，table1 和 table2。我需要在 col1.table2 中搜索 table1.col1 的出现。我怎样才能做到这一点？

我做了以下语句，但我对mySQL没有经验。我不确定这是否是从两个不同的不相关表中查询的正确方法？col1 和 col2 是字符串。

```
select table1.col1, table2.col1 from table1, table2 where 
STRCMP(table1.col1, table2.col1)=0; 
```

这是否符合我的目的？可以优化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:01:16.330

“最好的方法”是加入两个表。

```
SELECT  a.*, b.*
FROM    table1 a 
            INNER JOIN table2 b
                ON a.col1 = b.col1
-- WHERE   --other condition here 
```

子查询方法（*但我更喜欢加入表*）

```
SELECT  *
FROM    table1
WHERE   col1 IN
   (
     SELECT col1 
     FROM   table2
     -- WHERE -- condition here  
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:00:46.003

正如约翰所说，加入会更好:)，但你总是可以在 WHERE 子句中放置另一个 SELECT 语句

# objective-c - 在 Interface Builder Storyboard 中创建 UIView

> ID：12032839
> 
> 赞同：0
> 
> 时间：2012-08-20T05:56:43.307
> 
> 标签：objective-c, ios, uiview, interface-builder, uistoryboard

我已经搜索了我想要做的事情，但所有答案似乎都早于 iOS 中的故事板，所以我希望有一种新的更简单的方法来做到这一点。

我有一个多次需要相同 UIView 的视图控制器。我可以以编程方式创建和定位它们，但如果我可以在情节提要中设计它们并将它们可视地定位在那里，那将真的对我有帮助。我不希望创建额外的 .xib 文件。

我正在为 iOS 6 开发，并且有一个新的 Container View，但我似乎无法理解它是如何工作的，也许有人可以向我解释一下。我设法使视图出现，但我无法在容器中的 UIView 和父 UIViewController 之间进行通信。我还看到了一种使用 segues 执行此操作的方法，但他们说不应该以这种方式使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T05:21:20.447

# 没有技巧，没有噱头

@Chiquis 解决方案是要走的路。

将 Storyboard 视为一**组 XIB**，所有这些都整齐地组织在一个屋檐下：

1.  复制并粘贴您`UIViewController`认为合适的 UIView
2.  `UIViewController`使用 IBOutlets将每个 UIView 连接到其父级

# android - Phonegap 贝宝插件

> ID：12032840
> 
> 赞同：0
> 
> 时间：2012-08-20T05:57:12.977
> 
> 标签：android, cordova, paypal

我必须实现 2 个支付网关：一个用于印度，另一个用于其他国家在使用 paypal 插件时，我收到以下错误。

> TypeError：“未定义”不是对象（评估“window.plugins.PayPal.invoke”）

尽管相同的插件适用于印度的支付网关，但对于其他国家/地区，它会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:09:43.310

请检查您导入的 jar 文件。开发者站点有两个jar文件，导入正确的解决错误..

# java - 使用mysql函数时Java总内存和内存使用量增加？

> ID：12032845
> 
> 赞同：0
> 
> 时间：2012-08-20T05:58:34.897
> 
> 标签：java, mysql

我们有一段代码，它根据 mysql 定义的函数进行选择。我们发现，一旦启用这部分`runtime.totalMemory()` ，使用的内存就会不断增加。下面是代码片段。问题从`String selectQuery4`. 知道为什么这是一个问题吗？

```
double currentLong = Double.parseDouble(longitude);
double currentLat = Double.parseDouble(latitude); 

Statement stmt6 = null;
stmt6 = dbconn.createStatement(); 

String selectQuery3 = "Select geoFenceID,enterpriseID,clientID,geoFenceString,geoFenceType,geoFenceName,geoFenceDescription,geoFencePreference, geoFenceRadius From tblGeoFence Where ((enterpriseID="+enterpriseID+" And clientID=0) Or (enterpriseID="+enterpriseID+" And clientID="+clientID+")) And geoFenceStatus='a'"; 
ResultSet rs3 = stmt6.executeQuery(selectQuery3);

while(rs3.next()) {
    geoFenceID = rs3.getInt("geoFenceID");
    geoFenceType = rs3.getString("geoFenceType");
    geoFenceString = rs3.getString("geoFenceString");
    geoFenceRadius = rs3.getInt("geoFenceRadius");
    geoFencePreference = rs3.getString("geoFencePreference");
    String polygon  =  "GeomFromText('"+geoFenceString+"')";
    String point    =  "GeomFromText('POINT("+currentLong+"  "+currentLat+")')";

    Statement stmt7 = null;
    stmt7 = dbconn.createStatement();
    String selectQuery4 = "SELECT GISWithin("+point+","+polygon+") As geoFenceStatus";
    ResultSet rs4 = stmt7.executeQuery(selectQuery4);

    if(rs4.next()) {

        if(rs4.getInt("geoFenceStatus")==1) {

            geoFenceIDFound=geoFenceID;
            geoFenceName = rs3.getString("geoFenceName");
            geoFenceDescription = rs3.getString("geoFenceDescription");                                                     
            geoFencePreference = rs3.getString("geoFencePreference");   

            if(lastGeoFenceID==geoFenceID) {
                geoFenceInID = geoFenceID;                  
                break;
            } else {

                if(previousGeoFenceID==geoFenceID &&(previousTimeDifferenceInt<0 || geoFenceArriveTimeDifferenceInt <= 0)) //check the funny problem double entry back into the geo fence
                {
                    lastGeoFenceID=geoFenceID;
                    geoFenceInID = geoFenceID;
                    break;
                } else {
                    geoFenceAlertEmailMessage="\nGeo Fence Alert Arrival\nTime:"+dateTimer+"\nGeo Fence Name :"+geoFenceName+"\nGeo Fence Description :"+geoFenceDescription+"\nGeo Fence Preference:"+geoFencePreference;

                    if(lastGeoFenceEntryStatus.equals("") || lastGeoFenceEntryStatus.equals("Out")) {
                        geoFenceEntryStatus="In";
                    } else {
                        geoFenceEntryStatus="Out";
                    }
                }
            }
        }
    }
}

try {
    if ( rs4 != null ) {
        rs4.close();
    }                                        
    if ( stmt7!= null ) {
        stmt7.close();
    }
} catch(SQLException ex) {
    ex.printStackTrace(System.out);
}             
}           
try {
    if ( rs3 != null ) {
        rs3.close();
    }                              
    if ( stmt6!= null ){
        stmt6.close();
    }                              
} catch(SQLException ex) {
    ex.printStackTrace(System.out);
} 
```

用于打印内存统计信息的代码。

```
int mb = 1024*1024;
System.out.println("##### Heap utilization statistics [MB] #####");

//Print used memory
System.out.println("Used Memory:" + (runtime.totalMemory() - runtime.freeMemory()) / mb);

//Print free memory
System.out.println("Free Memory:" + runtime.freeMemory() / mb);

//Print total available memory
System.out.println("Total Memory:" + runtime.totalMemory() / mb);

//Print Maximum available memory
System.out.println("Max Memory:" + runtime.maxMemory() / mb); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T06:09:45.403

您的代码应该在 try/finally 块中调用 close。您还应该在字符串中使用 PreparedSTatements 而不是参数 concat。

关于您的问题，不确定您是否有问题：

*   你的第一个 while 循环做了多少次迭代？

*   使用 jconsole 连接到您的 jvm 并在循环结束后调用垃圾收集以查看内存是否下降：

*   如果是这样，那么您就没有真正的铅

*   如果没有，那么你有

问候

# android - 在没有 OutOfMemory 的情况下裁剪大位图的一部分 - Android

> ID：12032847
> 
> 赞同：3
> 
> 时间：2012-08-20T05:59:02.990
> 
> 标签：android, bitmap, crop

我正在创建一个编辑照片应用程序，在用户在缩放的图像预览中选择了一个裁剪区域后，我想在原始图像上裁剪一个比例区域。为此，我使用了 BitmapRegionDecoder，如下所示：

```
InputStream in = mContentResolver.openInputStream(this.photoUri);
BitmapRegionDecoder regionDecoder = BitmapRegionDecoder.newInstance(in, false);

BitmapFactory.Options o = new BitmapFactory.Options();
o.inJustDecodeBounds = false;

//The following line causes an OutOfMemory
croppedBitmap = regionDecoder.decodeRegion(new Rect(x, y, destX, destY), o); 
```

但我仍然收到 OutOfMemory 异常。我正在考虑使用 BitmapRegionDecoder 读取小切片并将其缓冲在 byte[] 上，但我不确定这是否是一个好的解决方案。

我认为必须有更好的解决方案，因为我已经使用过其他可以裁剪大图像的编辑工具。任何想法？

在此先感谢，内托。

*** 可能的解决方案！*** 在与很多人交谈后，经过长时间的互联网搜索，我在 Stackoverflow 中找到了其他类似问题的问题，目前似乎是解决此问题的最佳方法：使用 NDK。

[位图/画布使用和 NDK](https://stackoverflow.com/questions/4801347/bitmap-canvas-use-and-the-ndk)

# jquery - 在车把上拿到钥匙

> ID：12032851
> 
> 赞同：2
> 
> 时间：2012-08-20T05:59:52.210
> 
> 标签：jquery, handlebars.js

```
var data = {
   "name": "Jack",    
    "eventlist": {
        "1": {
           "title": "Title1"

    },
        "3": {
            "title": "Title2",

         }
    }
}; 
```

HTML

```
<div class="container">
<ul>
    <script id="list_template" type="text/x-handlebars-template">                                   
                <li>     

                </li>
            </script>   
        </ul>
</div> 
```

我正在使用把手 js 进行模板化。我想知道如何迭代数据对象并打印“标题”以及相应的键“1”、“3”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:32:28.720

您可以注册一个专用`#each`的类似blockhelper，它通过循环的“内部”上下文传递散列/对象上下文的键：

```
// based on the `#each` helper, requires jQuery (for jQuery.extend)
Handlebars.registerHelper('each_hash', function(context, options) {
    var fn = options.fn, inverse = options.inverse;
    var ret = "";

    if(typeof context === "object") {
        for(var key in context) {
            if(context.hasOwnProperty(key)) {
                // clone the context so it's not
                // modified by the template-engine when
                // setting "_key"
                var ctx = jQuery.extend(
                    {"_key":key},
                    context[key]);

                ret = ret + fn(ctx);
            }
        }
    } else {
        ret = inverse(this);
    }
    return ret;
}); 
```

当然，在渲染模板**之前**需要注册助手。

然后在您的模板中，您可以使用`_key`-place 持有者引用密钥：

```
<script id="list_template" type="text/x-handlebars-template">
     {{#each_hash eventlist}}
    <li>
        <span class="evl-key">{{_key}}</span> - 
            <span class="evl-title">{{title}}</span>
    </li>
    {{/each_hash}}
</script> 
```

然后像任何其他车把模板一样渲染模板：

```
var source = $("#list_template").html();
var template = Handlebars.compile(source);

var html = template(data);

$("div.container ul").append(html); 
```

# asp.net - 网站无法接受 Web 服务器 (WebCentral) 上的 SQL Server CE 数据库文件

> ID：12032853
> 
> 赞同：2
> 
> 时间：2012-08-20T05:59:55.487
> 
> 标签：asp.net, .net, iis, exception-handling, sql-server-ce

> 配置错误
> 
> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：此配置部分不能用于此路径。当站点管理员使用继承的配置文件锁定对此部分的访问权限时，就会发生这种情况。
> 
> ```
> Source Error: 
> 
> Line 5:    <system.web>
> Line 6:      <fullTrustAssemblies>
> Line 7:        <add
> Line 8:            assemblyName="System.Data.SqlServerCe" 
> ```

任何的想法？经过几个小时寻找可行的解决方案后，我感到筋疲力尽，但它们都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:14:21.690

Web 服务器的管理员必须启用对全局 Web 配置的信任以支持 SQL Server Compact。请与您的托管服务提供商确认是否属于这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:50:11.247

最后，我想通了。

我用 partialTrustAssembilies 替换了 fullTrustAssembilis，错误就消失了。

但是出现了另一个错误。

这是关于：无法在安全透明方法中执行 CAS 断言。

经过几个小时的研究，我终于知道这不是我的能力。但是 SQL CE 需要使用 System.Security.dll 来序列化数据。因此，要么在服务器上安装 SQLCE 运行时，要么将 trustLevel 提升到完整级别。但它们中的任何一个都不能被允许。

所以我决定迁移到 SQL Server 2008。>_<;

但我真的很想知道能够使用 MS SQL CE 的网络托管服务器，因为如果我只能使用不需要任何其他服务器端组件来存储我的独立文件数据库文件，这对我来说真的很方便数据，无需购买附加服务。

# linux - 重命名包含数字的文件 cygwin

> ID：12032856
> 
> 赞同：0
> 
> 时间：2012-08-20T06:00:10.100
> 
> 标签：linux, file, cygwin, rename

我在我的文件夹中存储了许多图像，其中一些具有像`12412421_3843114_12412412`. 有 200-300 个这样的文件，我希望能够分配一种简单`a-zA-Z`的序列，即没有数字或下划线。我怎样才能在cygwin中做到这一点？

**编辑**我希望文件名看起来像任何东西`abdllwlaslf`，但它们需要**没有下划线**。我知道当我不使用下划线时我的选择是有限的，但就我而言，这就是我所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:36:29.567

它不会产生非常漂亮的文件名，但从技术上讲，这会做你想要的......

`for i in $( find . -regex ".*/[0-9_]+$" ) ; do mv $i $( basename $i | sed 'y/0123456789_/ABCDEFGHIJK/' ) ; done`

一个名为的文件`12412421_3843114_12412412`将成为`BCEBCECBKDIEDBBEKBCEBCEBC`使用上述内容。如果您愿意，您可以调整`sed`替换中的字符。

请注意，上述命令必须从相关文件夹中运行。

在真正的 Linux 系统上，使用该命令可以更有效地完成此操作，但我在 Cygwin 中`rename`使用并没有取得很好的成功。`rename`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:03:16.177

假设只是将 0 替换为 a，将 1 替换为 b 等，您可以使用`tr`：

```
$ echo 42344234_1341264574_2134234 | tr 0123456789_ abcdefghij
ecdeecdejbdebcgefhejcbdecde 
```

而不是`echo`，只需通过管道传输您的文件名并使用结果进行重命名。

# math - 根据wifi信号强度计算距离

> ID：12032858
> 
> 赞同：0
> 
> 时间：2012-08-20T06:00:15.380
> 
> 标签：math

我正在尝试使用 wifi 信号强度在建筑物中获取当前位置。因此，首先尝试获取距离，然后从该距离获取 x,y 坐标。我只有这个想法，但没有数学逻辑。所以需要一些帮助来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:30:10.673

请参阅[室内环境](http://www.cl.cam.ac.uk/research/dtg/www/people/ojw28)博士论文行人定位中第 141 页 **的 7.1 WiFi 辅助定位。**

所以有可能，只是比你想象的要复杂得多...... :(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:38:39.937

您还需要考虑：

*   初始信号强度
*   天线增益
*   天线方向性
*   反思
*   干涉
*   墙壁

祝你好运……

# c++ - 错误检测矩形之间的碰撞

> ID：12032862
> 
> 赞同：0
> 
> 时间：2012-08-20T06:00:38.590
> 
> 标签：c++, c, trigonometry

我正在使用并扩展一个检测两个 2d 旋转矩形是否碰撞的函数。功能来自[这里](http://www.ragestorm.net/tutorial?id=22)。

**我的问题：**该函数错误地检测到以下矩形之间的碰撞。

> Rect1 = centerX=0, centerY=0, width=8, height=4 角度=0
> Rect1 = centerX=16, centerY=0, width=8, height=4 角度=0

我错了还是那些矩形不应该碰撞？我应该如何编辑该函数以检测旋转矩形之间的像素完美碰撞？我感觉我需要编辑最后两行，但我不确定。

```
int RotRectsCollision(_RotRect * rr1, _RotRect * rr2)
{
 _Vector2D A, B,   // vertices of the rotated rr2
       C,      // center of rr2
       BL, TR; // vertices of rr2 (bottom-left, top-right)

 float ang = rr1->ang - rr2->ang, // orientation of rotated rr1
       cosa = cos(ang),           // precalculated trigonometic -
       sina = sin(ang);           // - values for repeated use

 float t, x, a;      // temporary variables for various uses
 float dx;           // deltaX for linear equations
 float ext1, ext2;   // min/max vertical values

 // move rr2 to make rr1 cannonic
 C = rr2->C;
 SubVectors2D(&C, &rr1->C);

 // rotate rr2 clockwise by rr2->ang to make rr2 axis-aligned
 RotateVector2DClockwise(&C, rr2->ang);

 // calculate vertices of (moved and axis-aligned := 'ma') rr2
 BL = TR = C;
 SubVectors2D(&BL, &rr2->S);
 AddVectors2D(&TR, &rr2->S);

 // calculate vertices of (rotated := 'r') rr1
 A.x = -rr1->S.y*sina; B.x = A.x; t = rr1->S.x*cosa; A.x += t; B.x -= t;
 A.y =  rr1->S.y*cosa; B.y = A.y; t = rr1->S.x*sina; A.y += t; B.y -= t;

 t = sina*cosa;

 // verify that A is vertical min/max, B is horizontal min/max
 if (t < 0)
 {
  t = A.x; A.x = B.x; B.x = t;
  t = A.y; A.y = B.y; B.y = t;
 }

 // verify that B is horizontal minimum (leftest-vertex)
 if (sina < 0) { B.x = -B.x; B.y = -B.y; }

 // if rr2(ma) isn't in the horizontal range of
 // colliding with rr1(r), collision is impossible
 if (B.x > TR.x || B.x > -BL.x) return 0;

 // if rr1(r) is axis-aligned, vertical min/max are easy to get
 if (t == 0) {ext1 = A.y; ext2 = -ext1; }
 // else, find vertical min/max in the range [BL.x, TR.x]
 else
 {
  x = BL.x-A.x; a = TR.x-A.x;
  ext1 = A.y;
  // if the first vertical min/max isn't in (BL.x, TR.x), then
  // find the vertical min/max on BL.x or on TR.x
  if (a*x > 0)
  {
   dx = A.x;
   if (x < 0) { dx -= B.x; ext1 -= B.y; x = a; }
   else       { dx += B.x; ext1 += B.y; }
   ext1 *= x; ext1 /= dx; ext1 += A.y;
  }

  x = BL.x+A.x; a = TR.x+A.x;
  ext2 = -A.y;
  // if the second vertical min/max isn't in (BL.x, TR.x), then
  // find the local vertical min/max on BL.x or on TR.x
  if (a*x > 0)
  {
   dx = -A.x;
   if (x < 0) { dx -= B.x; ext2 -= B.y; x = a; }
   else       { dx += B.x; ext2 += B.y; }
   ext2 *= x; ext2 /= dx; ext2 -= A.y;
  }
 }

 // check whether rr2(ma) is in the vertical range of colliding with rr1(r)
 // (for the horizontal range of rr2)
 return !((ext1 < BL.y && ext2 < BL.y) ||
      (ext1 > TR.y && ext2 > TR.y));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:22:19.087

我不认为这些矩形应该碰撞。

第一个的中心在 (0,0) 上，宽度为 8 => 它在 X 轴上从 -4 跨越到 4。

第二个的中心在 (16,0) 上，宽度再次为 8 => 它在 X 轴上从 16 - 4 = 12 跨越到 16 + 4 = 20。

因此，第一个和第二个在 X 轴上不重叠。由于两者都没有旋转，因此它们不会碰撞。

我没有检查代码，但给出了示例矩形，它们似乎没有碰撞。

# android - 波前 obj 模型加载器索引问题

> ID：12032863
> 
> 赞同：2
> 
> 时间：2012-08-20T06:00:42.333
> 
> 标签：android, indexing, buffer, .obj, wavefront

大家好，我很难让 .obj 波前文件使用 IBO 正确渲染。

现在我写了一个解析器，目前它非常简单，但它加载了顶点和法线。如果我绑定解析的顶点和法线，我会得到很好的结果，但如果我将索引绑定为 GL_element... 我会得到一团糟。

现在我已经为此工作了大约一个星期，我在这里检查了至少 20 页，最后决定问一个问题。

我不太确定出了什么问题，所以我带来了我的代码、我写到控制台的一些调试信息、我从程序中写出的文件、屏幕截图和视频。我真的希望这里有人可以帮助我度过这个难关。

粘贴箱：http : [//pastebin.com/uZs74DSn](http://pastebin.com/uZs74DSn)

您可以从 pastebin 中看到，我已经通过从所有索引中减去 1 来说明 .obj 文件不是基于零的。

视频： 1\. [http://www.youtube.com/watch?v=tfqhDEMCjPA&feature=plcp](http://www.youtube.com/watch?v=tfqhDEMCjPA&feature=plcp)猴子用 glarrays 解析和绘制。

1.  [http://www.youtube.com/watch?v=SDeJk7sv2ZA&feature=plcp](http://www.youtube.com/watch?v=SDeJk7sv2ZA&feature=plcp)解析完全相同的模型，但使用 gldrawelements 绘制。

2.  [http://www.youtube.com/watch?v=3_HS8Q7FXsk&feature=plcp](http://www.youtube.com/watch?v=3_HS8Q7FXsk&feature=plcp)球体解析和绘制 wigh gldrawelements

3.  [http://www.youtube.com/watch?v=w6Oqy3JdTRg&feature=plcp](http://www.youtube.com/watch?v=w6Oqy3JdTRg&feature=plcp)我在 opengame 艺术中找到的模型，用 lineloops 渲染，但因为我使用了 glarray，所以它很好。

4.  [http://www.youtube.com/watch?v=xHiCcK5QuE0&feature=plcp](http://www.youtube.com/watch?v=xHiCcK5QuE0&feature=plcp)许多基本的形状被渲染并且光线充足，带有 glarrays。

我真的很茫然，希望有人能帮助我度过这个难关。我想继续学习着色器。这对外面的人来说可能是微不足道的，我希望他们能够停下来并给出指导意见！

蓝蜂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:41:21.597

再看一遍，我认为真正发生的事情是您的偏移量不是您认为的那样。您正在读取数据，并且顶点正在重复，并且您将重复数据多次写入顶点缓冲区。因此，当您稍后想要引用索引 4 时，实际上您在顶点数组的该位置拥有来自顶点 2 的数据。

尝试对顶点数据进行预排序并将其全部写出，以使您的顶点数组不大于 [max_index_number * 3]，然后将索引按原样流式传输。我认为这可能会奏效。

# vb.net - 拆分单词但保留特殊单词

> ID：12032868
> 
> 赞同：2
> 
> 时间：2012-08-20T06:01:16.080
> 
> 标签：vb.net, arrays, visual-studio-2012

我正在使用 VS2012，vb.net。

我想将字符串加载到数组中。字符串是由空格 (" ") 分隔的一系列单词。

目前我正在使用以下代码：

```
Dim stringTempCurrentGameTypes() As String = Split(stringTypeList, " ") 
```

这完美地工作。但是，对于加载到数组中的某些数据，我有一个例外。有时，字符串中的数据（由空格分隔的字符串）有两个单词，我想将它们作为一项加载到数组中，而不是两项。

这是我正在谈论的字符串的示例：

> 锦标赛 FFA 团队 CTF 部落竞技场测试

例外是“氏族竞技场”这两个词。

目前，如果我只使用 split 命令，我会得到一个包含以下元素的数组：

```
item(0) = tourney 
item(1) = ffa
item(2) = team
item(3) = ctf
item(4) = clan
item(5) = arena
item(6) = test 
```

我在以下之后：

```
item(0) = tourney 
item(1) = ffa
item(2) = team
item(3) = ctf
item(4) = clan arena
item(5) = test 
```

如何检测添加到数组中的项目是否是“clan arena”一词，并将其添加为一个条目，而不是两个条目？此外，“clan arena”这个词可能会改变，所以我不需要硬编码“clan arena”这个词，而是需要通过一个字符串变量来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:42:20.200

当然，有几种方法可以做到这一点。

一种方法是用临时字符替换输入字符串中所有*特殊项*的空格，拆分输入字符串，然后将临时字符改回原始空格。

* * *

**例子：**

```
Dim raw = "tourney ffa team ctf clan arena test"
Dim special_words = new String() {"clan arena"}
Dim tmp_char = "$"

For Each word in special_words
    raw = raw.Replace(word, word.Replace(" ", tmp_char))
Next

Dim result = raw.Split(new Char() {" "c})
For i = 0 To result.Count -1 
    result(i) = result(i).Replace(tmp_char, " ")
Next 
```

* * *

作为临时字符，您可以使用不可打印的字符，例如`Chr(31)`（单位分隔符）或任何您知道不会出现在输入字符串中的字符。

这种方法非常简单，并且可以保留项目的顺序。

# sql - 如何在 SQL Server 2008 中对此进行子查询？

> ID：12032874
> 
> 赞同：0
> 
> 时间：2012-08-20T06:01:58.020
> 
> 标签：sql

在 SINGLE SQL 语句中计算豁免员工的最低工资和非豁免员工的平均工资。使用子查询将这两个元素合并到查询中。它应该看起来像：

```
Min Exempt Salary   Average Non-Exempt Salary
47,000                           35,271 
```

我知道如何分开做，但无法像上面所说的那样弄清楚如何做，这是我的陈述。

```
SELECT jobs1.exempt_nonexempt_status,
       Min (employees.salary)AS Minimal_Exempt_Salary
FROM   employees
       LEFT JOIN jobs1
              ON employees.job_title = jobs1.job_title
WHERE  jobs1.exempt_nonexempt_status = 'Exempt'
GROUP  BY jobs1.exempt_nonexempt_status

SELECT jobs1.exempt_nonexempt_status,
       Avg (employees.salary)AS Average_Non_Exempt_Salary
FROM   employees
       LEFT JOIN jobs1
              ON employees.job_title = jobs1.job_title
WHERE  jobs1.exempt_nonexempt_status = 'Non-exempt'
GROUP  BY jobs1.exempt_nonexempt_status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:13:50.847

试试这个：

```
SELECT 
    MIN(CASE WHEN J.exempt_nonexempt_status = 'Exempt'
             THEN E.Salary
             END) AS Minimal_Exempt_Salary,

    SUM(CASE WHEN J.exempt_nonexempt_status = 'Non-exempt'
             THEN E.Salary
             END) AS Average_Non_Exempt_Salary

FROM Employees E
LEFT JOIN JOBS1 J ON J.job_title = E.job_title
WHERE J.exempt_nonexempt_status IN ('Exempt', 'Non-exempt') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:14:23.767

执行此操作的正常方法是：

```
select  j.exempt_nonexempt_status
,       avg(case when j.exempt_nonexempt_status='Non-exempt' then e.salary end) 
            as Average_Non_Exempt_Salary
,       min(case when j.exempt_nonexempt_status='Exempt' then e.salary end)
            as Minimal_Exempt_Salary
from    Employees e 
left join 
        jobs1 j
on      e.job_title = j.job_title
group by 
        j.exempt_nonexempt_status 
```

但这不使用子查询。另一种方法是将您的两个查询包装在外部选择中：

```
select  (
        select MIN (employees.salary)
        from Employees left join jobs1
        on employees.job_title = jobs1.job_title
        where jobs1.exempt_nonexempt_status='Exempt'
        group by jobs1.exempt_nonexempt_status
        ) as MinimalExemptSalary
,       (
        select avg (employees.salary)
        from Employees left join jobs1
        on employees.job_title = jobs1.job_title
        where jobs1.exempt_nonexempt_status='Non-exempt'
        group by jobs1.exempt_nonexempt_status
        ) as AverageNonExemptSalary 
```

# iphone - Objective C中具有已知模数和指数的字符串的RSA加密

> ID：12032878
> 
> 赞同：0
> 
> 时间：2012-08-20T06:02:28.603
> 
> 标签：iphone, objective-c, security, encryption, rsa

我需要使用定义的模数和指数对用户在 iOS 应用程序中输入的用户凭据（主要是密码）实施 RSA 加密。

你能给我提供任何示例代码吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:57:06.253

我想您最终会直接使用 OpenSSL，但请事先查看以下参考：[证书、密钥和信任服务参考](http://developer.apple.com/library/ios/#documentation/Security/Reference/certifkeytrustservices/Reference/reference.html#//apple_ref/doc/uid/TP30000157)

[使用 OpenSSL 和 RSA](http://lists.apple.com/archives/cocoa-dev/2002/Mar/msg01660.html)

# c# - DevExpress 2012 GridControl Coded-ui-tests 问题

> ID：12032879
> 
> 赞同：1
> 
> 时间：2012-08-20T06:02:58.437
> 
> 标签：c#, devexpress, coded-ui-tests, gridcontrol

再会！

我在 VS2010 中发现了一些与 GridControl 编码的 ui 测试相关的问题。在纯状态 GridControl 测试完美，但如果我添加一些额外的功能，那么测试就会失败。

我想`GridView`为多选选项创建可编辑的复选框列。这列绑定到数据表列“B_Checked”对我来说很方便。`DevExpress GridControl`设计使其在行更改时将数据推送到底层数据源。我想改变这种行为。DevExpress 推荐使用 event- `repositoryItemCheckEdit1_EditValueChanged`>`PostEditor()`来解决这种情况

```
 private void repositoryItemCheckEdit1_EditValueChanged(object sender, EventArgs e)
    {
        this.gridView1.PostEditor();
        this.gridView1.UpdateCurrentRow();
    } 
```

在这种情况下，多选列上的所有更改都会立即提交到数据源，但 ui 测试停止工作（（。它无法识别对列状态所做的更改，因此如果您检查所有行，例如，在回放时，您不会看见。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:37:06.747

好的。对我有用的唯一解决方案是覆盖GridView 的**DoChangeFocusedRowInternal**方法，以便它始终抛出 FocusedRowChanged 事件。

# xamarin.ios - 在 MonoDevelop 中覆盖/实现成员

> ID：12032880
> 
> 赞同：1
> 
> 时间：2012-08-20T06:03:01.227
> 
> 标签：xamarin.ios, refactoring, monodevelop

我正在处理 MonoTouch 上的复数视频。有一次，培训师右键单击派生类的名称，在“重构”菜单中，有一个功能可以覆盖/实现该类的成员。但是，当我单击（最新版本）时，我只看到“重命名”。

此链接中的人前段时间也遇到过同样的问题，并附上了屏幕截图——但在 MonoTouch 讨论组中没有人回复他们：

[http://monotouch.2284126.n4.nabble.com/Right-Click-Class-name-gt-Refactor-gt-Override-Implement-members-tt4655504.html#none](http://monotouch.2284126.n4.nabble.com/Right-Click-Class-name-gt-Refactor-gt-Override-Implement-members-tt4655504.html#none)

有没有人经历过（并解决了！）这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T14:44:55.953

在对 MD 3.0 进行的代码代码完成引擎的重写中，一些重构功能被重新组织或删除（目前）。

您仍然可以通过两种方式访问​​此特定功能：

1) 键入“覆盖”关键字后，MD 提供您可以覆盖/实施的成员。选择一个会导致它被剔除。

2) 您可以使用类主体中的“编辑->显示代码生成窗口”命令一次覆盖多个成员。默认情况下，此命令在 Mac 上没有键绑定，但您可以在首选项中指定一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:23:56.943

MonoDevelop 3.0（及更高版本）删除了一些特性（包括一些关于重构的特性），因为它们不够稳定、功能不全（完整）或有缺陷。

相同的功能（或类似的功能）可能会在未来的版本中回归。

# c# - 如何通过 MS Agent 从代码运行 Coded UI 测试？

> ID：12032881
> 
> 赞同：0
> 
> 时间：2012-08-20T06:03:03.097
> 
> 标签：c#, tfs, automated-tests, mstest, coded-ui-tests

我有一个实验室管理环境（2010 年），其中部署了代理和控制器、TFS 等。我已经在我的虚拟环境中成功运行了 Coded UI 测试，并将结果报告给 TFS。

我想要实现的是，能够从我的代码中与测试代理进行通信，基本上代表控制器运行测试。或者，可以指示控制器本身安排运行，但重点是我想从代码中完成。

你知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:47:35.867

您可以使用 3 个不同的可执行文件从命令行运行测试，如此处所述 [http://msdn.microsoft.com/en-us/library/ms182486.aspx](http://msdn.microsoft.com/en-us/library/ms182486.aspx)

# sql-server - 将少量表分离到不同模式时的性能问题

> ID：12032885
> 
> 赞同：1
> 
> 时间：2012-08-20T06:03:26.580
> 
> 标签：sql-server, performance, database-schema

假设我们在 MS SQL Server 2008 上有一个数据库，在我们的分布式系统的核心有 20-30 个表。读取和写入这些表的权限可能因我们系统的每一层而异。例如，我们有三种类型的客户端，它们可以直接或通过一些中间层连接到我们的数据库。为了消除错误操作的可能性，我们必须为每种类型的客户端正确设置权限。显而易见的解决方案是将我们的表分离到不同的 SQL Server 架构，并设置访问整个架构中对象的权限。现在我们必须决定这个解决方案在相对少量的表上的合理性以及它将如何影响性能（似乎我们经常必须连接来自不同模式的表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:10:28.360

连接来自不同模式的表不会影响性能。但是，实际上，最好授予过程而不是表的权限。

# sql-server - SQL Server：存储过程事务

> ID：12032890
> 
> 赞同：25
> 
> 时间：2012-08-20T06:04:29.090
> 
> 标签：sql-server, stored-procedures, transactions

您好，我有一些存储过程可以在我的网站上创建产品和其他内容。现在我必须在事务中运行其中一些。这是可能的还是我必须只为事务创建一个存储过程？

我可以说类似

```
BEGIN TRAN
"1\. stored procedure"
"2\. stored procedure"
COMMIT 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-20T06:53:29.980

要添加到上面的其他答案，您可能需要添加一些错误处理：

```
BEGIN TRAN

BEGIN TRY

   EXEC P1

   EXEC P2

   COMMIT TRAN

END TRY
BEGIN CATCH

  ROLLBACK TRAN

END CATCH 
```

* * *

使用 C# 代码更新（我个人发现将 trans 代码保留在存储过程之外和数据层中要容易得多 - 使得在稍后阶段更容易编写存储过程）：

```
using (var conn = new SqlConnection(...))

    trans = conn.BeginTransaction();

    try
   {
       ...call P1 using transaction
       ...call P2 using transaction

       trans.Commit();
   }
   catch
   {
       trans.RollBack();
       throw;
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T06:18:05.093

是的，存储过程可以在事务中运行。请在下面找到示例查询。

```
create table temp1
(
    id int,
    name varchar(20)
)

create table temp2
(
    id int,
    name varchar(20)
)
go

create proc p1 as
insert temp1 values (1, 'test1')

create proc p2 as 
insert temp2 values (1, 'test2')
go  

begin tran tx
exec p1
exec p2
commit 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T06:17:40.390

从 SQL Server（不确定其他 RDBMS），您可以在事务中调用多个存储过程。

```
BEGIN TRAN
EXEC StoredProc1
EXEC StoredProc2
COMMIT TRAN 
```

您可能需要向存储过程添加返回码，以检查如果存储过程 1 失败，您是否应该运行存储过程 2

编辑：要检查返回码，您可以执行以下操作。这将运行第一个存储过程。如果它返回 0，那么它运行第二个。如果第二个返回 0，则它提交事务。如果其中一个返回非 0，那么它将回滚事务

```
DECLARE @ReturnValue INT
BEGIN TRAN
  EXEC @ReturnValue = StoredProc1
  IF @ReturnValue = 0
  BEGIN
    EXEC @ReturnValue = StoredProc2
    IF @ReturnValue = 0
    BEGIN
      COMMIT
    END
    ELSE
    BEGIN
      ROLLBACK
    END
  END
  ELSE
  BEGIN
    ROLLBACK
  END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-18T14:41:36.147

```
Begin TRAN
BEGIN TRY
  -- your Action
  Commit TRAN
END TRY
BEGIN CATCH
  IF @@TRANCOUNT > 0
  BEGIN
    ROLLBACK TRAN
  END 
END CATCH 
```

# php - 获取表中的相同行

> ID：12032891
> 
> 赞同：0
> 
> 时间：2012-08-20T06:04:40.493
> 
> 标签：php, mysql

好的，我有这种结构的表：

`order_id` `product_id` `price`

`18645` `289` `5.90`

`18644` `219` `1.80`

`18644` `109` `2.30`

`18643` `289` `4.50`

`18642` `180` `9.80`

`18642` `190` `3.40`

我如何能够`product_id's`从`order_id's`每组的总价格中计算出相同的价格`product_ids`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:06:57.163

要获得明智的产品`COUNT`，`SUM`您需要使用[聚合函数](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html) `GROUP BY`product_id：

```
SELECT product_id,
       COUNT(1) AS product_count,
       SUM(price) AS total_price
FROM table_name
WHERE order_id BETWEEN 18642  AND 18645
GROUP BY product_id
ORDER BY product_count ASC, total_price ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:14:56.173

尝试

```
SELECT PRODUCT_ID,
       COUNT(product_id) totalCount,
       SUM(price) totalPrice
FROM tableName
WHERE Order_ID BETWEEN 00001  AND 99999
GROUP BY PRODUCT_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:07:30.743

尝试这个：

您只需按 product_id 分组

```
select product_id,
       count(*) as count ,
       sum(price) as price
from   <table>
where  order_id beteen <val1> and <val2>
group by product_id 
```

# java - 如何为多个 jvm 支持创建单例 java 类？

> ID：12032895
> 
> 赞同：7
> 
> 时间：2012-08-20T06:05:21.540
> 
> 标签：java

例如，我有 DBManager.java 单例类，我必须将其部署在集群环境中。它是一个基于 Web 的应用程序，具有以下部署策略

Apache 负载均衡器 --> Tomcat 6（集群中的 3 个服务器）。

我必须为 3 个 tomcat 实例维护单个 DBManager 实例。

我的代码是

```
package com.db.util;
public class DBManager {
    private static DBManager singleInstance;
    private DBManager () {}
    public static DBManager getSingleInstance() {
        if (singleInstance == null) {
            synchronized (DBManager.class) {
                if (singleInstance == null) {
                    singleInstance = new DBManager ();
                }
            }
        }
        return singleInstance;
    }
} 
```

我一直在寻找这个问题的解决方案，并找到了类似 JGroups API 的东西。这可以使用 JGroups 来实现吗？任何想法，如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T06:44:31.073

Java 在每个实例中为您提供了一个单例，您需要在实例之间进行某种协调，因此在任何给定时间它们中的一个处于活动状态，但如果活动的一个死了，那么另一个实例将变为活动状态。

一些应用服务器已经内置了控制这种协同工作实例的能力，我不知道Tomcat是否有这样的功能。

自己构建这样的功能非常困难，请参阅[此问题](https://stackoverflow.com/questions/1106984/avoiding-split-brain-votes-and-quorum)并注意该问题提供了指向有用库的链接 - 在我看来，使用起来非常复杂。

但是，在您的情况下，您有一个数据库，这为您提供了一个协调点。我没有详细设计这个，但我认为可以使用控制表中的专用行来创建预订方案。有效地做到这一点会有点棘手，平衡检测实例死亡的速度与轮询数据库以查看哪个实例处于活动状态的开销，但这似乎是可行的。

这个想法是记录包含“reservedUntil”时间戳和“processId”。每个进程读取记录，如果它包含它自己的 id 并且时间戳尚未过期，它就知道它可以工作。当时间快要到期时，活动进程使用乐观锁定样式“更新其中时间戳==旧时间戳”来更新时间戳以管理竞争条件。每个非活动进程都会等待，直到它上次读取的时间戳过期，然后尝试通过更新记录来控制，再次使用乐观锁定 Update where。通常，控制权的尝试会失败，但如果成功，我们现在有一个新的活动实例，并且由于乐观锁定，我们只能获得一个活动实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:12:42.660

Singleton 确保在给定的 JVM 中只有一个类的实例。

在您的情况下，多个 DBManager （每个 JVM 一个）有什么问题？

# php - 为什么 PHP 脚本在新服务器上的执行时间很长？

> ID：12032899
> 
> 赞同：2
> 
> 时间：2012-08-20T06:05:45.117
> 
> 标签：php, linux, apache, imagemagick

我有一台具有 2 个四核处理器（2.4 GHz，16GB RAM）的服务器。我有一些在非常重的负载下运行的 PHP 脚本。这些脚本中的大多数都做一些事情：

1.  从数据库中获取数据（只有一行，从一个小表中）
2.  从其他服务器（主要是 Facebook）获取数据
3.  上传一张小照片
4.  更新数据库表（这个表使用量很大，行数增长很快，几乎每秒2行）

问题是，脚本执行时间过长。我以前有一台配置较低的服务器（一个四核处理器，6GB RAM），但脚本需要 4-5 秒才能完成。但是现在，执行时间是 30-40 秒，甚至更多。

我如何衡量执行时间？我`microtime()`在脚本开始和脚本结束时测量并减去它们。我只需要一个粗略的估计。

服务器配置：以下是 apache config 中设置的一些参数：

```
server_limit = 350
max_chlid = 350
keep_alive = off 
```

其他特点： 1\. 当服务器不处于重负载时，执行时间非常短 2\. 以前的服务器执行时间非常短，即使在重负载下也是如此

我不知道我应该包括哪些其他细节。请问我，我会在这里发布。

## 我应该怎么做才能改善这一点？

更新：

我发现问题出在 ImageMagick 库上。我用谷歌搜索并尝试了一些解决方案，例如禁用 OpenMP。但这并没有太大帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:14:56.620

我建议使用xdebug进行分析，然后使用[kcachegrind之类的软件](http://xdebug.org/)[对其](http://kcachegrind.sourceforge.net/html/Home.html)进行分析。然后你就会知道什么需要时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:14:20.727

这可能有很多原因：

1.  您的查询“慢”吗？
2.  服务器配置是否正确？
3.  它的带宽很慢吗？
4.  MySql-Server 配置是否正确？
5.  您插入的表格的格式是什么？
6.  其他东西（例如cronjob）会杀死数据库吗？

我会将其发布为评论，但不幸的是，我无法澄清这些问题并告诉您发现了什么；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T05:39:18.130

我将开始解耦问题。分别测试每个操作（从 db 获取、从 fb 获取、上传等）。

同时检查新服务器环境的所有组件（包、版本、配置等）是否与以前相同。

# actionscript-3 - 如何在 AS3 中将矩形碰撞与基于图块的游戏结合使用？

> ID：12032901
> 
> 赞同：0
> 
> 时间：2012-08-20T06:05:56.580
> 
> 标签：actionscript-3, flash, collision

在我一直从事的这个项目中，玩家在屏幕中心保持静止，而地图根据键盘输入四处移动。-地图是基于瓷砖的；我手动将所有图块放入 1280x896 像素的电影剪辑中，然后脚本将这些图块中的每一个放入一个数组（blockArray）中。从历史上看，我在父脚本和子脚本（Movie Clip tile-holder）之间传递碰撞信息方面一直相当成功，使用点碰撞没有太多麻烦。

- 在更多基于物理的项目中，我在矩形碰撞（getRect 等）方面取得了更大的成功。然而，在这些情况下，我以前从未将它与上述的 Tile Holder/Movie Clip 结合使用。

以下代码作为 MoveBall/Player 脚本的一部分运行，每帧更新一次。当我在测试窗口中运行它时，它总是使程序崩溃 - 也许它无法摆脱“for”循环？

```
public function moveBall (event:Event)
{
    if (lastTime == 0) lastTime = getTimer();
    var timePassed:int = getTimer() -lastTime;
    lastTime += timePassed;

    var newBallX = _Level.x +ballDX*timePassed; //ballDX = ball direction x
    var newBallY = _Level.x+ballDY*timePassed; //ballDY = ball direction y

    var oldBallRect = new Rectangle(_ball.x-ballRadius, _ball.y-ballRadius, ballRadius*2, ballRadius*2);
    var newBallRect = new Rectangle(newBallX-ballRadius, newBallY-ballRadius, ballRadius*2, ballRadius*2); // These correspond to the actual player, which is stationary and 64x64 pixels.

    for(var i:int=blockArray.length-1;i>=0;i--)
    {
            var theBlock = blockArray[i];
            var blockRect:Rectangle = getRect(theBlock);
            if (blockRect.intersects (newBallRect))
            {
                  //collision treatment here
            }
    }
} 
```

下面是我一直用来在构造函数中构建关卡的方法：

```
public function startGame()
{
         //constructor code
         stage.focus = stage;

         if (_Level == null)
         {
                  _Level = new level_obj(); // this Movie Clip, "level_obj",  is where the blocks that are loaded into the blockArray reside.
                  addChild (_Level);

                 for (var i:int = _Level.numChildren-1;i>=0;i--) // this "for" Loop loads the blocks from inside the _Level Movieclip into the blockArray
                 {
                           if (_Level.getChildAt(i) is block_obj)
                           {
                                        blockArray.push(_Level.getChildAt(i));
                           }
                 }
} 
```

我在这里遇到的主要问题`getRect(theBlock)`是没有得到应该与 - 碰撞`Rectangle`的特定块的。根据我的跟踪，它的大小是 1280x896 - 包含所有块的整个电影剪辑的大小- 而不仅仅是块“（i）”中的一个，它是 64x64。`Player/Ball``blockArray(i)``blockRect``blockArray`

奇怪的是，我制作了一种标记电影剪辑，它`_Level`在碰撞/运动脚本的 for 循环期间添加到电影剪辑中；此影片剪辑始终附加到我放置在那里的第一个块的注册点，而不是`_Level`影片剪辑的注册点，它位于 (0,0) 的左上角，并且是`getRect`命令的内容参考。

所以，我的问题是：这是一个失败的原因，还是我可以投入或取出一些东西来完成这项工作？

如果我用这种方法浪费时间，那么这些方法中哪一种听起来最可行？

1.  使用常规`Array`方法 ( `newArray = [Block, Block, Block, Lavapit, Block, etc.]`- 级别的构建完全在`Game/Constructor`Class 中处理。
2.  回点碰撞；不过，不确定这对于基于物理的项目有多好。
3.  或者是否有我不知道的替代方法？

任何状况之下; 非常感谢，所有！晚安/早上/下午/晚上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:27:28.473

您可以考虑使用 Box2d。

如果你有一个跳来跳去的球，我不会称之为基于瓷砖的游戏。基于图块意味着所有对象的移动都是直线和特定位置，如国际象棋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:04:06.353

[受SAT](http://rocketmandevelopment.com/tag/separation-axis-theorem/)理论的启发，做了一些研究并从头开始构建了一个基本的碰撞系统。

# python - 如何在 Rpy2 中等待？

> ID：12032902
> 
> 赞同：0
> 
> 时间：2012-08-20T06:06:07.393
> 
> 标签：python, r, rpy2

我已经使用 rpy2 绘制了一个图表。我正在使用 Eclipse。当我运行代码时，情节只会闪烁 1 秒然后消失。如何使图表保持不变？我的代码是：

```
#!/usr/bin/python

import rpy2.robjects as robjects
r = robjects.r

r('x = c(1, 2, 3)')
r('y = c(6, 7, 8)')

r('plot(x, y)') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:26:53.453

终止 R 进程会关闭打开的交互式绘图窗口......这就是（Python）脚本末尾发生的事情。

如果你必须让你的 Python 进程保持活跃（因为嵌入式 R 依赖于它），有几种策略。最简单的可能是在最后添加：

```
import time
while True:
    time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:49:07.513

您可以使用 Rstudio，这确实会立即杀死窗口。或者，使用例如将绘图转储到文件中`png`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:29:18.163

使用 手动启动程序`python your_program.py`。它必须是使用eclipse的抵押品

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T07:27:30.183

```
from rpy2.robjects.packages import importr
import rpy2.robjects as robjects

grdevices = importr('grDevices')

def mainloop():
    while True:
        if isinstance(grdevices.dev_list(), type(robjects.NULL)):
            break

robjects.r('x = c(1, 2, 3)')
robjects.r('y = c(6, 7, 8)')

robjects.r('plot(x, y)')
mainloop() 
```

# python - 带有 CouchDB OAuth 的 Google UrlFetch 服务

> ID：12032903
> 
> 赞同：1
> 
> 时间：2012-08-20T06:06:16.880
> 
> 标签：python, google-app-engine, oauth, couchdb

据此[，](https://developers.google.com/apps-script/service_urlfetch) Google Apps 可以“获取资源并通过 Internet 与其他主机通信”。我想使用 OAuth 访问我的 couchdb 实例。CouchDB[支持](http://wiki.apache.org/couchdb/Security_Features_Overview#Authentication)OAuth。我打算做的是这样的：

1.  在 CouchDB 配置中启用 OAuth 身份验证处理程序：`{couch_httpd_oauth, oauth_authentication_handler}`
2.  为我想要提供的数据库定义一个*数据库阅读器。*
3.  使用脚本工具测试设置。
4.  设置 Google App 应用程序以使用 CouchDB OAuth 授权用户。

这里有人对这个特定的设置有意见吗？有人可以提供一个简单的测试脚本（最好是 python）来访问 OAuth 1.0 端点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:38:25.157

对于 python 中的 CouchDB OAuth 示例，您可以使用wiki 页面中有关 OAuth 授权的[脚本。](http://wiki.apache.org/couchdb/Link_Collection_Authentication_and_Authorization#couch_httpd_oauth%3a%3aoauth_authentication_handler)

但是，由于它是以单行样式编写的，因此这里是流版本：

```
import oauth
import httplib

URL='http://localhost:5984/_session'
CONSUMER_KEY = 'example.com'
CONSUMER_SECRET = 'sekr1t'
TOKEN='user1'
SECRET='tokensekr1t'

consumer = oauth.OAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET)
token = oauth.OAuthToken(TOKEN, SECRET)
req = oauth.OAuthRequest.from_consumer_and_token(
    consumer, token=token, http_method='GET', http_url=URL, parameters={}
)
req.sign_request(oauth.OAuthSignatureMethod_HMAC_SHA1(), consumer,token)

con = httplib.HTTPConnection('localhost', 5984)
con.request('GET', URL,headers=req.to_header())
print con.getresponse().read() 
```

# android - 在 Android 中读取 Facebook 状态

> ID：12032904
> 
> 赞同：0
> 
> 时间：2012-08-20T06:06:23.040
> 
> 标签：android, facebook

只是好奇如何通过我的 Android 应用程序从特定页面读取 Facebook 状态帖子。

我查看了 Facebook API，但这似乎与制作 Facebook 应用程序更相关，这不是我的意图。

如果有人可以向我指出一个指南或链接的方向，它将向我解释如何做到这一点，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:09:50.730

好吧，Facebook API 的整个想法是让您可以调用它们的函数来访问 Facebook 内容。如果您想将它们合并到您的 Android 应用程序中，请尝试使用他们的[Android SDK](https://developers.facebook.com/docs/reference/androidsdk/)

# c# - WPF应用程序中矩形上的图像上的鼠标单击事件问题

> ID：12032905
> 
> 赞同：0
> 
> 时间：2012-08-20T06:06:29.857
> 
> 标签：c#, wpf, mouseevent, chess

我有一个由矩形和重叠图像组成的网格。

![国际象棋网格](../Images/e5d8c2a1694dc16ccc59b015ac2c60fb.png)

我想要一个矩形的单击事件来识别选定的图块并突出显示它。它适用于没有任何图像的图块，但对于上面有图像的图块，可能会调用 image_click 事件。

现在，我的问题是如何识别所选瓷砖的矩形（带图像）。我有一个 Block 类，它具有矩形和片段对象，片段对象具有图像属性。

是否可以在矩形上显示图像但矩形在图像上的点击行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:10:36.300

如果您不需要对图像本身进行任何命中测试，您可以尝试..

```
image.IsHitTestVisible = false; 
```

如果您需要在图像上捕获事件，这将导致问题，因为现在它将忽略所有鼠标事件。

# javascript - 使用 jQuery 重新调整表格列的大小

> ID：12032914
> 
> 赞同：4
> 
> 时间：2012-08-20T06:07:37.027
> 
> 标签：javascript, jquery, html-table

我正在尝试编写一段代码，以启用对我的数据表进行列重新调整大小的功能。但它无法正常工作。我在互联网上探索了几天，但除了一些插件之外我什么也找不到。但是我不想使用任何插件，因为我的数据表非常复杂，如果我使用它们，可能会破坏表的其他功能。因此我尝试编写自己的。您能否检查并改进我的代码或建议任何其他符合我规范的代码....
**注意：**用户可以将列的大小重新调整为向右到表格宽度，但向左调整，它只到 td 的左侧位置..
**Eidt：**Maxwell 提供了一个很好的选择..它工作正常，但在一种情况下。如果我尝试向左侧调整大小，它不允许，因为 td 宽度固定为其内容宽度......但我想将其重新调整到左侧通过将 td 的样式设置为 overflow:hidden 或其他方式来实现 它的*offset().left*
值....这是我的一段代码....

```
<!DOCTYPE HTML PUBLIC>
<html>
 <head>
  <title> New Document </title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
  <style>
  table{
   border-collapse:collapse;
  }
  table td{
    border:1px solid red;
  }
  .vUiDtColResize{
   width:2px;
   height:20px;
   border:1px solid blue;
   float:right;
   display:block;
   cursor:w-resize;
   position:relative;
   right:-3px;
   float:top;
  }
  </style>
 </head>

 <body>
  <table>
   <thead>
    <tr>
     <td>S.No   <div class="vUiDtColResize"></div></td>
     <td>Name   <div class="vUiDtColResize"></div></td>
     <td>Qualif <div class="vUiDtColResize"></div></td>
    </tr>
   </thead>
   <tbody>
      <tr> <td>1</td><td>Rama Rao</td><td>M.C.A</td></tr>
      <tr> <td>2</td><td>Dushyanth</td><td>B.Tech</td></tr>
      <tr> <td>3</td><td>AnandKumar</td><td>M.C.A</td></tr>
      <tr> <td>4</td><td>Veera Reddy</td><td>B.Tech</td></tr>
   </tbody>
  </table>
  <div id="helper"></div>
 </body>
 <script>
  $('.vUiDtColResize').each(function(){

     var _rsTd = $(this).parent('td');
     var _rsTr = _rsTd.parent('tr');
     var _rsTdRight,_thisLeft,_rsTdWidth;

     $(this).draggable({axis:'x',containment:_rsTd,refreshPositions:true,
         create:function(event,ui){
         },
         start:function(event,ui){
         _rsTdRight = _rsTd.offset().left + _rsTd.outerWidth();
         },
         drag:function(event,ui){
           var _sizeDiff = $(this).offset().left - _rsTdRight;
           _rsTdRight = $(this).offset().left;
          _rsTdWidth = _rsTd.outerWidth() + _sizeDiff;
          _rsTd.outerWidth(_rsTdWidth);
         },
         stop:function(event,ui){
         }
     });
  });

 </script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:58:12.207

我将您的代码与我发现的一些技术合并 - [http://jsfiddle.net/tpqn7/](http://jsfiddle.net/tpqn7/)

恕我直言，仍然存在一些问题。首先，我认为如果可以通过按每个 TH 来调整表头的大小，而不仅仅是小边框，那会更好（也更容易）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:42:25.803

在网上探索了几天后，我得到了一个很好的代码，我对其进行了修改以使其也满足我的要求（当然，我的更改有点小。它可能对其他人有用，所以我我在这里发帖...
***风格***

```
 <link rel="stylesheet" href="E:\Examples\BSP\BSPExtensions\jquery-ui-1.8.18.custom.css"/>
<style>

table {
    table-layout: fixed;
    border-collapse: collapse;
    border: 1px solid black;   
}
tr.last td {
    border-bottom: 1px solid black;
}

td {
    border-right: 1px solid black;
    border-bottom: 1px solid black;
    position: relative;
    white-space:nowrap;
    padding: 2px 5px;
    text-align: left;
    overflow:hidden;
}

td.last {
    border-right: none;
}
thead td div:first-child{
  text-overflow:ellipsis;
  overflow:hidden;
}
tbody td div:first-child{
  overflow:hidden;
}

.scrollContainer {
    overflow:auto;
    width:700px;
    height:auto;
    display:inline-block;
    border:1px solid red;
}
@-moz-document url-prefix() {
  .resizeHelper,.ui-resizable-e {
        position: relative;
        float: right;       
    }
}
</style> 
```

***脚本***

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
<script>
 /**
 * Enables resizable data table columns.
 **/

(function($) {
   $.widget("ih.resizableColumns", {
       _create: function() {
            this._initResizable();
        },

        _initResizable: function() {

            var colElement, colWidth, originalSize;
            var table = this.element;

            this.element.find("thead td").resizable({
                handles: {"e": ".resizeHelper"},
                minWidth: 2, // default min width in case there is no label
                // set correct COL element and original size
                start:function(event, ui) {
                    var colIndex = ui.helper.index() + 1;
                    colElement = table.find("thead > tr > td.ui-resizable:nth-child(" + colIndex + ")");
                    colWidth = parseInt(colElement.get(0).style.width, 10); // faster than width
                    originalSize = ui.size.width;
                },                

                // set COL width
                resize: function(event, ui) {
                    var resizeDelta = ui.size.width - originalSize;                    
                    var newColWidth = colWidth + resizeDelta;
                    colElement.width(newColWidth);

                    // height must be set in order to prevent IE9 to set wrong height
                    $(this).css("height", "auto");
                }
            });
        }

    });

    // init resizable
    $("#MyTable").resizableColumns();
})(jQuery);
</script> 
```

***你的 html 是这样的：*** *****

```
<div class="scrollContainer">
    <table class="resizable" id="MyTable" width="100%">
         <thead>
            <tr>
                <td class="ui-resizable" style="width:100px;">
                <div>
                    <span >Column 1</span>
                    <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </div>
                </td>
                <td class="ui-resizable" style="width:200px;">
                <div>
                    <span >Column 2</span>
                    <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </div>
                </td>
                <td class="ui-resizable" style="width:300px;">
                <div>
                    <span >Column 3</span>
                    <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </div>
                </td>

                <td class="ui-resizable" style="width:150px;">
                <div>
                    <span >Column 4</span>
                    <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </div>
                </td>
                <td class="ui-resizable" style="width:200px;">
                <div>
                    <span >Column 5</span>
                    <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </div>
                </td>
                <td class="ui-resizable last" style="width:100px;">
                <div>
                    <span >Column 6</span>
                    <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </div>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr><td><div>Column 1</div></td><td><div>Column 2</div></td>
                <td><div>Column 3</div></td><td><div>Column 4</div></td>
                <td><div>Column 5</div></td><td><div>Column 6</div></td>
            </tr>

            <tr class="last">
                <td><div>Column 1</div></td><td><div>Column 2</div></td>
                <td><div>Column 3</div></td><td><div>Column 4</div></td>
                <td><div>Column 5</div></td><td><div>Column 6</div></td>
            </tr>
        </tbody>
    </table>
</div> 
```

# php - 使用 PHP 从 Android 向 MySQL 发送古吉拉特语文本

> ID：12032916
> 
> 赞同：1
> 
> 时间：2012-08-20T06:07:54.913
> 
> 标签：php, android, mysql

我正在开发一个示例应用程序，它有两个接受用户输入的文本框。现在，我使用按钮创建了一个古吉拉特语键盘，以便用户以古吉拉特语输入数据。当用户按下保存按钮时，数据应存储在 MySQL 中。这是我的完整代码：

```
public void saveMy(View v)
{
    name=e1.getText().toString();
    no=e2.getText().toString();
    try {
            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://10.0.2.2/GujaratiApp/myPHP.php");

            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("Name",name));
            postParameters.add(new BasicNameValuePair("No",no));
            httppost.setEntity(new UrlEncodedFormEntity(postParameters));

            HttpResponse response = httpclient.execute(httppost);
            Log.i("postData", response.getStatusLine().toString());
        }
    catch(Exception ex)
    {
        Log.e("log_tag", "Error:  "+ex.toString());
    }   

} 
```

我的PHP文件是：

```
<?php 

  mysql_connect("localhost","root","") or die(mysql_error());

  mysql_select_db("newDB");

  $name =   $_POST['Name'];

  $no = $_POST['No'] ;

  print("Name is:   ".$name."             And No is:".$no);

  $query_add="INSERT INTO  myData (`name` ,`no` ) VALUES ('$name','$no')";

  $query_exec=mysql_query($query_add) or die(mysql_error()); 

  mysql_close();

?> 
```

用于创建数据库的查询是：

```
CREATE TABLE myData (name VARCHAR(20) NOT NULL,no VARCHAR(5) NOT NULL) ENGINE=INNODB CHARACTER SET= utf-8; 
```

当我按下保存按钮时我的数据被输入，但在 MySql 中我得到？？？而不是古吉拉特语文本。

当我输入英文数据时，它可以正常工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:56:09.743

只需对您的代码进行一点更改。试试这个。

```
httppost.setEntity(new UrlEncodedFormEntity(postParameters,HTTP.UTF_8)); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:31:48.067

您需要在 PHP 脚本上设置字符编码：

```
ini_set('default_charset', 'utf-8'); 
```

所以把上面的代码行放在你的 php 脚本中。

# php - $this->redirect 在 Cakephp 中显示空白页

> ID：12032917
> 
> 赞同：1
> 
> 时间：2012-08-20T06:08:14.723
> 
> 标签：php, cakephp, cakephp-2.0

我的代码是：

```
public function join_membership() 
{
    $this->layout = 'colorbox';
    $membership_id = $this->Cookie->read('membership_id');
    $membership =  $this->Membership->find('first', array('conditions'=>array('Membership.id'=>$membership_id)));
    $this->set('membership',$membership); 
    if($this->request->is('post'))
    {
        if($this->JoinMembership->save($this->request->data['JoinMembership']))
        {
            $this->redirect(array('action' => 'member_login'));
        }
    }
} 
```

此代码将数据正确保存在数据库中，但之后它显示空白页，它不会重定向到给定函数。提前致谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-13T05:21:49.933

如果有人无法说出他们的空白/输出在哪里（就像我做的那样），请将这个小块放在您的`$this->redirect`电话之前：

```
$file = '';
$line = '';
if (headers_sent($file, $line)) {
    die('Output in ' . $file . ' at line ' . $line);
} 
```

它将停止您的控制器操作并打印出空白/输出所在的确切文件和行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:19:14.437

尝试在您的 if 条件中使用以下代码。

```
$this->redirect(array('controller' => 'Controller_Name', 'action' => 'member_login')); 
```

您也可以尝试将某些内容打印到`if condition`您使用过的内容中。还可以使用 else 部分并将某些内容打印到`else part`. 在调试模式 2 中检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:23:47.177

1) member_login 操作是否与 join_membership 位于同一控制器中？如果不是，则将 Controller => "Some_Controller" 键值对添加到数组中。

2）如果一个不起作用，检查 if 条件是否像这样工作

```
 if($this->JoinMembership->save($this->request->data['JoinMembership']))
            {

                debug("in");exit();

                $this->redirect(array('action' => 'member_login'));
            }
        } 
```

如果 if 条件返回 true，您应该看到“in”消息。

请注意，您可以使用

```
$this->redirect("action_name");
$this->redirect("/controller_name/action_name"); 
```

# android - 将在线流媒体音频缓冲到 sdcard 中的文件，然后播放，例如从链接 (http://81.19.85.204:80/club128.mp3)

> ID：12032919
> 
> 赞同：2
> 
> 时间：2012-08-20T06:08:22.660
> 
> 标签：android

我正在开发一个应用程序，它可以将在线流媒体广播缓冲到一个文件中说，`File downloadingMediaFile = new File("//mnt/sdcard/downloadingMedia.p3");`

然后使用`android's` `MediaPlayer`类玩。这样的流媒体是否可行？如果是这样，建议我一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:24:07.317

本教程在类似的情况下帮助了我[http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)

# java - 在 Hibernate 中多次获取父类

> ID：12032920
> 
> 赞同：1
> 
> 时间：2012-08-20T06:08:24.597
> 
> 标签：java, spring, hibernate

我有 2 个具有 OneToMany 映射的类。有一个问题类和一个答案类。对于每个问题，表中都有 4 个答案。表格中有 10 个问题行和相应的 40 个答案行现在，当我尝试获取列表时，它给了我 40 个问题而不是 10 个问题，每个问题有 4 个重复。

这是我的问题课：

```
@Entity
@Table(name = "QUESTIONS")
public class Question implements Serializable{

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "QUES_ID_SEQ")
    @SequenceGenerator(name = "QUES_ID_SEQ", sequenceName = "QUES_ID_SEQ")
    @Column(name = "QUESTION_ID")
    private Long id;

    @Column(length = 255)
    private String question;

    @OneToMany(targetEntity = Answer.class, fetch = FetchType.EAGER)
    @Cascade(CascadeType.SAVE_UPDATE)
    @JoinTable(name = "QNA",
                joinColumns = @JoinColumn(name = "QUESTION_ID"),
                inverseJoinColumns = @JoinColumn(name = "ANSWER_ID", referencedColumnName = "ANSWER_ID"))
    private List<Answer> answers;

    public Question() {}

// getters and setters ...
} 
```

这是我的答案类：

```
@Entity
@Table(name = "ANSWERS")
public class Answer implements Serializable{

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "ANS_ID_SEQ")
    @SequenceGenerator(name = "ANS_ID_SEQ", sequenceName = "ANS_ID_SEQ")
    @Column(name = "ANSWER_ID")
    private Long id;

    @Column(length = 255)
    private String answer;

    private boolean correct;

    public Answer() {}

// getters and setters ...
} 
```

我正在获取这样的问题：

```
 @Transactional
    public List<Question> retrieveQuestions(){
        Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Question.class);
        return (List<Question>) criteria.list();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:57:55.873

另外，我使用以下代码解决了这个问题：

```
Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Question.class);
        return (List<Question>) criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY).list(); 
```

**Criteria.DISTINCT_ROOT_ENTITY** <- 这段代码帮助我获得独特的问题，而且我使用**了 FetchType.EAGER**。它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:01:51.000

您的映射不正确。如果你有从问题到回答的一对多关联，为什么你有一个连接表？

这个一对多关联的正确映射是：

在回答课上：

```
@ManyToOne
@JoinColumn(name = "question_id")
public Question getQuestion() {
    return question;
} 
```

关于问题类：

```
@OneToMany(mappedBy = "question", fetch = FetchType.EAGER)
public List<Answer> getAnswer() {
    return answers;
} 
```

还有一件事：对于 Question 类中的一个集合映射，可以使用 FetchType.EAGER，但是如果您将另一个集合开关映射到 FetchType.LAZY 以避免获取笛卡尔积。

# css - 为什么不同浏览器的 CSS3 语法不同？

> ID：12032921
> 
> 赞同：2
> 
> 时间：2012-08-20T06:08:31.227
> 
> 标签：css

我是 HTML5 和 CSS3 的新手。我刚刚看到一些 CSS3 代码，如下所示：

```
.box
    {
        border-top-left-radius:5px;
        -webkit-border-bottom-left-radius:5px; 
        -moz-border-top-left-radius:5px;
         border:1px solid #8e8e8e;
         background-color:white;
         height:16px;
         padding:4px;
         padding-left:28px;
         padding-right:10px;
         color:#4a4a4a;
         float:left;

     } 
```

我不明白为什么在 `border-top-left-radius`使用 -moz 和 -webkit 前缀提到边界半径之后？不同浏览器的语法是否不同？现在标准化了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T06:10:28.750

是的，实验属性的语法可能不同。这完全由供应商决定，因为供应商前缀属性被认为是专有的，而不是标准的一部分。

特别是，Mozilla 将其称为`-moz-border-radius-topleft`，而不是`-moz-border-top-left-radius`。您正在查看的代码是错误的（可能是盲目复制和粘贴声明的结果）。

它已经被标准化为`border-top-left-radius`. 前缀属性仅用于支持旧版本的浏览器。就此而言，不带前缀的属性应该排在最后，以确保浏览器对属性的最佳/最稳定的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:24:10.047

澄清 BoltClock 所说的：浏览器创建者 Microsoft、Google、Mozilla 等决定在其浏览器中实现 HTML 和 css 的哪些部分。大多数公司希望人们使用他们品牌的浏览器，因为这意味着他们可以提供更好的体验或将您引导到他们自己的专有网站，因此已经开发了新的 CSS-tags 或其他有用的开发工具等额外功能，试图在其他浏览器供应商中获得优势。

自从 1990:s 推出第一个浏览器以来，这种情况已经持续了很长时间。网景提供了他们自己的功能，而微软进入游戏的时间很晚，很难跟上步伐。在那个时代，浏览器是否是免费的并不确定，为了打造最好的浏览器付出了很多努力，并且出现了不同的功能。后来，当 W3C 出现并开始对 Web 供应商进行标准化的工作时，缓慢但肯定地开始遵守标准。这项工作仍在进行中，很可能需要持续相当长的一段时间。

[coursera](https://class.coursera.org/insidetheinternet-2012-001/class/index)上有一个很棒的课程涉及到这个主题。看看这个！

# c# - 获取系统中的所有用户信息并在C#中备份

> ID：12032924
> 
> 赞同：0
> 
> 时间：2012-08-20T06:08:45.220
> 
> 标签：c#, .net, windows

我是管理员用户，想在 C# 中运行程序以获取当前计算机的所有用户信息，而不考虑域并对其进行备份（如果可能使用密码），因此如果计算机重新格式化，我可以使用 C# 恢复所有用户信息.

感谢您的回答。

阿舒托什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:13:51.080

以下链接将告诉您如何使用 gui 执行此操作。Active Directory 备份和还原 [http://technet.microsoft.com/en-us/library/bb727062.aspx](http://technet.microsoft.com/en-us/library/bb727062.aspx)

如果您想使用 C# 来操作这些步骤，请按照以下步骤操作：

```
Process p = new Process();
p.StartInfo.FileName = " WBADMIN.exe";
p.Start();

p.StandardInput.WriteLine(“START SYSTEMSTATEBACKUP -backupTarget:F:”);
p.StandardInput.WriteLine("exit");

// Display the response message
System.Console.WriteLine(p.StandardOutput.ReadToEnd()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:13:57.543

看看[NirSoft](http://nirsoft.net)，它有很多实用程序可能对您有用，几乎实用程序都有 -export 命令行参数，使您能够将其导出到外部文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:22:50.383

感谢您的回答。

我终于在这里找到了一些帮助：

[http://www.c-sharpcorner.com/UploadFile/iersoy/getting-all-users-in-a-computer/](http://www.c-sharpcorner.com/UploadFile/iersoy/getting-all-users-in-a-computer/)

谢谢

阿舒托什

# knockout.js - 淘汰赛 - 全球化模板 afterRender

> ID：12032925
> 
> 赞同：2
> 
> 时间：2012-08-20T06:08:49.763
> 
> 标签：knockout.js, knockout-2.0

淘汰赛js是否可以在渲染后在每个模板上运行一个函数？

我想应用一些增强功能，但不想单独跟踪每个模板。

淘汰赛可能会派发一个事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:26:25.733

您可以将 afterRender 选项用于模板绑定，但它有点难看，因为您将在视图模型中获得 DOM 依赖项。更好的方法是使用扩展器或自定义绑定。

编辑：如果您仍然想走那条路线，您可以覆盖模板绑定并注入 afterRender 选项

编辑：覆盖

[http://jsfiddle.net/qJcfX/](http://jsfiddle.net/qJcfX/)

# android - 在应用程序android中使用外部Jar

> ID：12032927
> 
> 赞同：0
> 
> 时间：2012-08-20T06:08:54.033
> 
> 标签：android, jar

我在 vendor/xxx/libs/frameworks 中有一个库。我想在位于 packages/apps/ 的单独应用程序中使用该库。当我调用库的类时，我得到了 ClassNotFoundException。所以我应该在我的应用程序 makefile 或清单文件中声明这个 jar。如果是，我该怎么做？

这是罐子的制作文件

LOCAL_PATH := $(调用我的目录)

# ================================================== ===========

包括 $(CLEAR_VARS)

LOCAL_MODULE := xxx_core.jar

LOCAL_MODULE_CLASS := JAVA_LIBRARIES

LOCAL_MODULE_PATH := $(TARGET_OUT_JAVA_LIBRARIES)

LOCAL_SRC_FILES := $(LOCAL_MODULE)

包括 $(BUILD_PREBUILT)

# ==== 权限 =========================

包括 $(CLEAR_VARS)

LOCAL_MODULE := xxx_core.xml

LOCAL_MODULE_CLASS := ETC

LOCAL_MODULE_PATH := $(TARGET_OUT_ETC)/权限

LOCAL_SRC_FILES := $(LOCAL_MODULE)

包括 $(BUILD_PREBUILT)

# ==================================================== ==========

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:45:19.133

您还没有提到是否将 jar 添加到应用程序的构建路径中。为此，请右键单击项目 > 构建路径 > 添加外部档案。

如果这不能解决这个问题，那么你应该看看这个步骤：[Android ClassNotFoundException](https://stackoverflow.com/questions/4880489/android-classnotfoundexception)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:54:07.857

按照此步骤将 jar 文件包含在 android 应用程序中。这将对您有所帮助。

将你的 jar 文件放在 lib 文件夹中。

现在右键单击 jar 文件。转到**构建路径**，然后**配置构建路径。** 现在打开一个对话框。单击**添加 JAR..** 按钮。现在从打开的项目列表中选择要添加到应用程序中的 jar 文件。

现在点击**OK**。您的 jar 文件已添加到您的应用程序中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T00:27:41.910

如果您还没有弄清楚这一点，那么您正在寻找的构建命令是：

```
LOCAL_STATIC_JAVA_LIBRARIES := android-common <YOUR-FRAMEWORK> 
```

假设您在框架中的 makefile 具有类似的指令

```
LOCAL_MODULE:= <YOUR-FRAMEWORK> 
```

祝你好运，我发现 Android 构建系统是一个巨大的无证混乱 - 但他们可能打算这样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-02T14:47:14.240

在应用程序的清单中使用`<uses-library>`以引用此 .jar。

# iphone - 用手指画线，一个物体会沿着这条路走吗？

> ID：12032928
> 
> 赞同：0
> 
> 时间：2012-08-20T06:08:55.360
> 
> 标签：iphone, objective-c, cocos2d-iphone, xcode4.3, gamekit

我是 ios 游戏开发的新手。现在我想做一个类似**“控制空中飞行”**和**“空中交通管制员”**的游戏，

> 用户可以用他们的手指画线，并且一个对象将沿着该路径

所以，任何人都可以指导我最适合这样的开发。Cocos2d**最**适合它吗？或者我必须为此使用的任何其他东西。

另外，如果有人知道已经存在的教程或任何参考链接，请建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:17:45.890

要简单地让对象跟随您的手指，请实现触摸（以及其中一种方法）：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint toPoint = [touch locationInView:self.view];
    [yourObjectOutlet setCenter:toPoint];
} 
```

在这里，您的对象的中心将跟随您的路径，但您可以通过相应对象的框架编辑“toPoint”来调整其锚点。

## 编辑

如果要绘制路径，然后使对象遵循该路径，请执行以下操作：

```
//define an NSMutableArray in your header file (do not forget to alloc and init it in viewDidLoad), then:
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   //you begin a new path, clear the array
   [yourPathArray removeAllObjects];
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint toPoint = [touch locationInView:self.view];
    //now, save each point in order to make the path
    [yourPathArray addObject:[NSValue valueWithCGPoint:toPoint]];
} 
```

现在你想开始移动：

```
- (IBAction)startMoving{
   [self goToPointWithIndex:[NSNumber numberWithInt:0]];
}
- (void)goToPointWithIndex:(NSNumber)indexer{
   int toIndex = [indexer intValue];  

   //extract the value from array
   CGPoint toPoint = [(NSValue *)[yourPathArray objectAtIndex:toIndex] CGPointValue];
   //you will repeat this method so make sure you do not get out of array's bounds
   if(indexer < yourPathArray.count){
       [yourObject setCenter:toPoint];
       toIndex++;
       //repeat the method with a new index
       //this method will stop repeating as soon as this "if" gets FALSE
       [self performSelector:@selector(goToPointWithIndex:) with object:[NSNumber numberWithInt:toIndex] afterDelay:0.2];
   }
} 
```

就这样！

# asp.net - 如何通过我的 IP 地址从远程计算机访问本地托管的 IIS 网站？

> ID：12032940
> 
> 赞同：0
> 
> 时间：2012-08-20T06:10:42.673
> 
> 标签：asp.net, iis

如何通过我的 IP 地址从远程计算机访问我的本地托管 IIS 网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:13:04.120

您必须在[这里检查您的 ip](http://www.whatismyip.com/)，确保您正在[转发端口 80](http://portforward.com/)（特别是如果您在本地家庭网络中），然后您可以通过`http://<server_ip>`例如访问您的服务器`http://192.168.0.6`

请注意，只要您没有固定（静态）IP，您的 IP 地址可能会发生变化，您必须重新检查它。

另一个注意事项 - 默认 HTTP 端口是 80，通过使用端口 80，您可以通过浏览器访问您的服务器，而无需编写端口号。如果出于任何原因您想切换端口，请确保转发该端口号并通过 访问您的站点`http://<server_ip>:<port_number>`，例如`http://192.168.0.6:8080`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:21:43.527

如果您使用其他端口。然后你可以去`http://<ip_address>:<port_no>`

# emacs - 我可以直接在emacs上运行clj文件吗？

> ID：12032941
> 
> 赞同：1
> 
> 时间：2012-08-20T06:11:15.057
> 
> 标签：emacs, clojure

我在 Windows 上使用 clojure-box。

因为 Emacs 对我来说是全新的东西，所以我在使用它时遇到了一些麻烦。

1.  我可以从 Emacs 保存真实代码（没有用户>>和结果等）吗？似乎 Cx Cs 节省了很多东西..

2.  如何直接在 Emacs 上运行 .clj 脚本？我来自python，所以空闲运行脚本的方式很棒（只需按F5，然后执行脚本，然后继续REPL，在脚本中包含变量、函数）有没有像这样简单的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T07:24:07.240

是的！emacs 有几种方法可以做到这一点。查看 emacs 入门工具包

人们倾向于不将 REPL 保存为一个整体。更常见的做法是将其部分粘贴到普通的 Clojure 缓冲区中，然后按 control-c control-l 将缓冲区加载到 REPL 中。这使 REPL 与文件/缓冲区保持同步，并且还将打印脚本生成的任何输出。

尽管 emacs 入门套件是一个很好的起点，但在 Clojure 中使用 emacs 的意义远不止我在一个答案中所能表达的。

# actionscript-3 - eventlistener 不执行其功能

> ID：12032946
> 
> 赞同：0
> 
> 时间：2012-08-20T06:11:54.167
> 
> 标签：actionscript-3, image-gallery

我需要在舞台上放一些缩略图。它们有不同的宽度，我需要在加载它们后获取宽度。我使用监听器来查找宽度，但监听器应该调用的函数没有运行。

为什么我的代码没有进入 loadThumbs 的功能？

```
function makeScroller():void

{

    for (var item:uint = 0; item < 7; item++ )

    {
        var thisOne:MovieClip = new MovieClip();
        var blackBox:Sprite = new Sprite();
        var thisThumb:Sprite = new Sprite();

        var imageLoader:Loader = new Loader();
        imageLoader.load(new URLRequest(thumbList[item]));
        imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,loadThumbs);

        function loadThumbs (e:Event):void
        {
            blackBox.graphics.beginFill(0xFFFFFF);
            blackBox.graphics.drawRect(-1,-1,imageLoader.width,imageLoader.height);
            thisOne.addChild(blackBox);
            thisOne.blackBox = blackBox;
            thisOne.x = tsX;
            thisThumb.addChild(imageLoader);
            thisOne.addChild(thisThumb);
            tsX += imageLoader.width;
            scroller.addChild(thisOne);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:36:18.633

我刚刚尝试了一个更简化的代码版本，没有任何问题，也许试试这个：

注意：最佳做法是在调用 load 之前添加 COMPLETE 侦听器...

```
function makeScroller():void
{
    var imageLoader:Loader = new Loader();
    imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadedHandler);
    imageLoader.load(new URLRequest("http://images.imagecomics.com/c/2012/IMG120350.jpg"));

    function loadedHandler(e:Event):void
    {
        trace("loaded");
    }
}
makeScroller(); 
```

# iphone - 将事件添加到 iPhone 中的默认日历

> ID：12032948
> 
> 赞同：1
> 
> 时间：2012-08-20T06:12:04.557
> 
> 标签：iphone, ios

我正在尝试将事件添加到 iPhone 默认日历，代码如下

NSMutableString *startDateString = [NSMutableString stringWithString:@"11/20/2012 10:00 AM"];

NSMutableString *endtDateString = [NSMutableString stringWithString:@"11/20/2012 5:00 PM"];

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
// this is imporant - we set our input date format to match our input string
// if format doesn't match you'll get nil from your string, so be careful
[dateFormatter setDateFormat:@"MM-dd-yyyy HH:mm a"];

NSDate * startDate = [[NSDate alloc]init];
startDate = [dateFormatter dateFromString:startDateString];

NSDate *endDate = [[NSDate alloc]init];
endDate = [dateFormatter dateFromString:endtDateString];

EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title     = @"TEST";
event.startDate = startDate;
event.endDate   = endDate;
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err];

[startDate release];
[endDate release];

if(!err)
{

    UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"TEST" message:@"Event Added successfully " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [alertview show];
    [alertview release];

}

NSLog(@"error is %@",err); 
```

}

该事件已成功添加，但问题是它没有添加到事件开始日期，它只是添加到 2001 年 1 月 1 日日期，所有事件都仅添加到同一日期。

任何人都可以帮我解决我出错的地方吗？我使用的是 5.1.1 版本的 iPhone 4s 和 iPhone 3gs。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:31:32.640

像这样将 DateFormat 设置为 dateFormatter：

```
[dateFormatter setDateFormat:@"YYYY-MM-dd HH:mm:ss"]; 
```

注意：yourdateString 应根据 dateFormatter

# javascript - 使用 javascript 遍历数组

> ID：12032954
> 
> 赞同：2
> 
> 时间：2012-08-20T06:13:00.513
> 
> 标签：javascript, jquery

如何在 jquery 中使用“for”遍历这样的数组。这个让我完全迷失了。我不知道如何从这样的数组中获取这些值，也无法更改数组的完成方式。

```
//Php
$errors['success']   = false;
$errors['#errOne']   = "Enter a valid username";
$errors['#errTwo']   = "Enter a valid email";
$errors['#errThree'] = "Enter a valid password";
echo json_encode($errors);//

dataType:"json",
cache:false,
success: function(data){
for (i=1; i<?; i++){//Start at 1
//I'm totally lost here.
//Output: "#errOne" "Enter a valid username" ->Loop thru remaining messages
}   
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:24:01.653

由于您将数据作为参数传递，因此您可以访问数据

尝试这样的事情：

```
var $errors = {};
$errors['success']   = false;
$errors['#errOne']   = "Enter a valid username";
$errors['#errTwo']   = "Enter a valid email";
$errors['#errThree'] = "Enter a valid password";
    data : $errors;
    success: function(data){
    for (var i in data ){
       console.log(i + ':' + data[i]);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:24:05.913

可能你需要这个：

```
success: function(data){
    $.each(data, function(key, value) { 
        alert(key + ': ' + value); 
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T06:26:39.673

```
for (var key in data){
   alert(key); // gives keys  success, #errOne, #errTwo, #errThree
   alert(data[key]); // gives values  false, Enter a valid username, Enter a valid email, Enter a valid password
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T06:55:32.220

如果你的 PHP 代码是这样的：

```
// Use $errors = array(...) if your PHP version is < 5.4
$errors = [
    'success' => false, // Why is 'success' part of the $errors array?
    'error_1' => 'Enter a valid username.',
    'error_2' => 'Enter a valid email.',
    'error_3' => 'Enter a valid password.'
];

print json_encode($errors); 
```

，然后在您的 JavaScript 中，您可以执行以下操作：

```
$.ajax({
    'url': 'your.url.com/data.json',
    'dataType': 'json',
    'cache': false, // Why are you doing this?
    'success': function (json_data) {
        var i = json_data.length;
        while (i--) {
            alert(json_data[i]); // Or whatever you want to do with the data.
        }
    }
}); 
```

我很确定这是最好的方法之一。如果我错了，请有人纠正我。

# python - Python：ImportError：无法导入名称调用函数

> ID：12032956
> 
> 赞同：0
> 
> 时间：2012-08-20T06:13:06.430
> 
> 标签：python

我是 Python 新手，我有一个错误消息的问题

'ImportError: 无法导入名称 callfunc'

我制作了两个 python 文件，' `~/a.py`'和' `~/pkg/b.py`'。（另外我的IDE自动创建了' `~/__init__.py`'和' `~/pkg/__init__.py`'）

在 a.py 中，一个函数

```
def callfunc():
    print "Called" 
```

被定义，在pkg/b.py中有两条语句：

```
from a import callfunc
callfunc() 
```

但是在执行 python pkg/b.py 时，会出现错误：

```
ImportError: cannot import name callfunc 
```

我试过 export PYTHONPATH=... ，但它也无效

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:18:31.247

在从您自己的模块导入任何内容之前，在 b.py 中编写：-

```
import sys
sys.path.append(<the directory where a.py is defined>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:21:08.617

PYTHONPATH 的价值是什么？

在您的示例中，参数可以是 $HOME。

# mysql - 从/向大表中获取/插入大量数据

> ID：12032962
> 
> 赞同：0
> 
> 时间：2012-08-20T06:13:26.137
> 
> 标签：mysql

我们有一个在线评委（类似于[SPOJ.pl](http://spoj.pl)），我们在周末进行这些长达 3 小时的比赛，到最后我们有近 1000 份提交。我们将所有这些运行存储在一个表上（包括提交的代码）。该表的当前结构如下：

```
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| rid        | int(11)  | NO   | PRI | NULL    | auto_increment |
| pid        | int(11)  | YES  |     | NULL    |                |
| tid        | int(11)  | YES  |     | NULL    |                |
| language   | tinytext | YES  |     | NULL    |                |
| name       | tinytext | YES  |     | NULL    |                |
| code       | longtext | YES  |     | NULL    |                |
| time       | tinytext | YES  |     | NULL    |                |
| result     | tinytext | YES  |     | NULL    |                |
| error      | text     | YES  |     | NULL    |                |
| access     | tinytext | YES  |     | NULL    |                |
| submittime | int(11)  | YES  |     | NULL    |                |
| output     | longtext | YES  |     | NULL    |                |
+------------+----------+------+-----+---------+----------------+ 
```

现在的问题是，每次我们在`ORDER BY`其中查询时使用该子句，它最终都会对整个表进行排序。如果超过 1000 行，每行都包含大量数据，则所花费的时间很重要。请注意，这是在`OPTIMIZE`表格定期表示对提交内容进行了更改之后。我们确实有两种选择：

1.  在说大约 100 个条目后拆分表格。
2.  将大量数据（提交的代码）存储为文件，而不是将它们作为值插入表中以减少开销。

如果我们实际上可以保持表结构原样，是否还有另一种选择/解决方法？我真的可以在这里使用一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:38:14.520

My recommendation would be to do something called vertical partitioning: split the table into multiple tables, with different columns.

In this case, I would have one table that has all the small data: rid, pid, tid, language, name, time, result, access, submittime.

A second table would have: rid, code, error, output.

This way, you can do the sort on the first table and then join in the other fields after the sort. I put code, error, and output together since they sort of seem to go together.

# objective-c - 为什么这段代码在 Objective-C 中有效？我得到 BAD_ACCESS

> ID：12032963
> 
> 赞同：-1
> 
> 时间：2012-08-20T06:13:39.457
> 
> 标签：objective-c, c

```
int RandomSource_next(int bits, double* seed) {
    *seed = (((long long) *seed * 0x5DEECE66DLL) + 0xBLL) & ((1LL << 48) - 1);
    return (int)((signed long long) *seed >> (48 - bits));
} 
```

我认为这与地址有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:19:19.003

很可能您传递的地址不正确`seed`。也许您传递的不是地址而是值？

以下应该工作

```
double seed = 0;

RandomSource_next(48, &seed); 
```

以下应该崩溃

```
RandomSource_next(48, 0); 
```

# mysql - 通过 SSH 连接 mySQL 错误 2002

> ID：12032971
> 
> 赞同：0
> 
> 时间：2012-08-20T06:14:24.053
> 
> 标签：mysql, c, ssh

我正在尝试通过 SSH 隧道使用 C 接口连接到我的 mySQL 服务器。

我目前做的是打开 SSH 隧道：

```
ssh user@IP -L 10293:127.0.0.1:3306 
```

然后在代码中：

```
 MYSQL *conn = mysql_init(NULL);
    mysql_real_connect(conn, "localhost", "username", "password", "production", 10293, NULL, 0);

    unsigned int error = mysql_errno(conn); 
```

连接后我收到错误 2002。错误 2002 是“无法通过套接字连接到本地 MySQL 服务器”。但是，当我没有在连接中指定任何套接字时，为什么它试图通过套接字连接？

还有什么可能出错的？

用户名、密码和表名当然已经检查了多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:16:13.397

我需要指定“127.0.0.1”而不是“localhost”作为地址，因为我绑定的是 IP 本身，而不是实际的 localhost。

# iphone - 在忽略 RGB 值的同时使用 OpenGL 绘制到帧缓冲区的 alpha 通道？

> ID：12032972
> 
> 赞同：0
> 
> 时间：2012-08-20T06:14:29.703
> 
> 标签：iphone, ios, opengl-es, textures

opaque 属性在我的 OpenGL 视图的 CAEAGLLayer 上设置为 NO。OpenGL 视图（棋盘）后面有一个 UIImageView。最初在 OpenGL 视图（鸸鹋鸟照片）上绘制纹理。现在我想在成名缓冲区的中间绘制另一个纹理。新纹理是完全黑色的，alpha 从上到下从 0 变为 255。

这是我的第二个纹理...

![棋盘指示透明度](../Images/9a26c18d0cd0541cb552571bf869524b.png)

这就是我要的...

![我想要的是](../Images/cde3f8108a60ed648289b7f64171654f.png)

这就是我得到的...

![我得到了什么](../Images/c0b977825c4a1594c80ab5df93b58e43.png)

棋盘纹理是 EAGLView 后面的 UIImageView 中的 UIImage。

我不想干扰帧缓冲区中的 RGB 值，我只想写入 Alpha 通道。我试过了...

1.  glDisable(GL_BLEND) 和 glColorMask(0, 0, 0, 1)
2.  glEnable(GL_BLEND) 和 glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_ONE, GL_ZERO)

似乎没有任何效果。RGB 值总是被修改，像素变得更亮。

如果源 RGBA 是 (r2, g2, b2, a2)，目标是 (r1, g1, b1, a1)。我希望最终值为 (r1, g1, b1, a2) 或最好是 (r1, g1, b1, some_function_of(a1, a2))。我如何实现这一目标？

这是我的代码...

用于绘制第二个纹理的目标 C 代码...

```
- (void) drawTexture {
    GLfloat textureCoordinates[] = {
        0.0f, 1.0f,
        1.0f, 1.0f,
        0.0f,  0.0f,
        1.0f,  0.0f,
    };

    static const GLfloat imageVertices[] = {
        -0.5f, -0.5f,
        0.5f, -0.5f,
        -0.5f,  0.5f,
        0.5f,  0.5f,
    };

    [EAGLContext setCurrentContext:context];

    glViewport(0, 0, backingWidth, backingHeight);

    glUseProgram(program);

    glActiveTexture(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, texture);

    glEnable (GL_BLEND);
    glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_ONE, GL_ZERO);

    glUniform1i(inputImageTexture, 2);

    glVertexAttribPointer(position, 2, GL_FLOAT, 0, 0, imageVertices);
    glVertexAttribPointer(inputTextureCoordinate, 2, GL_FLOAT, 0, 0, textureCoordinates);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    glBindRenderbuffer(GL_RENDERBUFFER, viewRenderbuffer);
    [context presentRenderbuffer:GL_RENDERBUFFER];
} 
```

顶点着色器...

```
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;

 varying vec2 textureCoordinate;

 void main()
 {
    gl_Position = position;
    textureCoordinate = inputTextureCoordinate.xy;
 } 
```

片段着色器...

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;

 void main()
 {
     gl_FragColor = texture2D(inputImageTexture, textureCoordinate);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:29:47.610

`glColorMask`必须工作 - 在我的情况下它对我有用。此外，据我所知`glBlendFuncSeparate`，在 iOS 上工作有问题。

（理论上）您可以执行以下操作：

*   将混合设置为乘法模式（GL_DST_COLOR、GL_ONE_MINUS_SRC_ALPHA）
*   让你的纹理变白
*   设置`glColorMask`为启用所有通道

如果你有 iOS 5+ 的 iDevice，你可以`OpenGL Capture`在 XCode 的窗口中查看 framebuffer alpha。

# c# - 通过 C# 设置 Application.Resources

> ID：12032973
> 
> 赞同：0
> 
> 时间：2012-08-20T06:14:36.093
> 
> 标签：c#, windows-phone-7

我的应用程序的 App.xaml 文件中有此资源。

```
//App.xaml
<Application.Resources>
    <sys:String x:Key="ApplicationTitle">FUEL CONSUMPTION</sys:String>
</Application.Resources> 
```

这非常有效！但我正在尝试通过代码隐藏文件设置资源，如下所示：

```
// MainPage.xaml.cs#PhoneApplicationPage_Loaded event
// To get the assembly version number
var nameHelper = 
           new System.Reflection.AssemblyName
              (System.Reflection.Assembly.GetExecutingAssembly().FullName);
// To change the application title based on the assembly version 
Application.Current.Resources["ApplicationTitle"] = "FUEL CONSUMPTION - v" +
           nameHelper.Version.Major + "." + nameHelper.Version.Minor; 
```

但是每次我尝试分配它时，我都会`NotImplentedException`被抛出。这是可以预料的，因为显然资源的设置器是以这种方式实现的，但是有没有办法解决这个问题？

我想利用这些资源使绑定变得容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:20:11.153

尝试：`App.Current.Resources.Add("Key",Value);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:31:41.590

我找到了解决问题的方法。非常感谢**Milan Aggarwal**为我提供了解决方案。

解决方案是将以下代码放入`Application_Launching`事件处理程序中。

```
var nameHelper = new System.Reflection.AssemblyName
    (System.Reflection.Assembly.GetExecutingAssembly().FullName);

if (Application.Current.Resources.Contains("ApplicationTitle")) 
    Application.Current.Resources.Remove("ApplicationTitle");

Application.Current.Resources.Add("ApplicationTitle", 
    "FUEL CONSUMPTION - v" + nameHelper.Version.Major + "." +
    nameHelper.Version.Minor); 
```

事实证明，如果绑定对象更新，应用程序标题不会更新。资源的更改必须在`PhoneApplicationPage`对象创建之前发生。

# ios - 如何将“自定义 cookie”插入 ASIHTTPRequest？

> ID：12032978
> 
> 赞同：0
> 
> 时间：2012-08-20T06:15:14.390
> 
> 标签：ios, xcode, cookies, asihttprequest

我在使用 ASIHTTPRequest 连接需要我发送“自定义 Cookie”进行检查的站点时遇到问题。

首先，我有时在谷歌上搜索并以某种方式发现，但是，最喜欢将cookie存储为原始“键”的解决方案，例如“域”、“值”等。

我的问题是，如果我想在其中设置“自定义 Cookie 密钥”，如何制作？

例如，我想在cookie中设置一个“ServerId”作为“key”，我该怎么办？

好吧，我使用了以下方法，但它们不起作用。

```
NSDictionary *properties = [[NSMutableDictionary alloc]init];
[properties setValue:@"serveridvalue" forKey:@"serveridKey"];
NSHTTPCookie *cookie = [[NSHTTPCookie alloc]initWithProperties:properties];

[request setUseCookiePersistence:NO];
[request setRequestcookies:[NSMutableArray arrayWithObject:cookie]];//BTW, I got a EXC_BAD_INSTRUCTION here
[request startSynchronous]; 
```

这是我的另一个尝试：

```
NSString *cookie = [[NSString alloc]initWithFormat:@"serverid=%@", serverid];
[request addRequestHeader:@"Cookie" value:cookie];
[request startSynchronous]; 
```

等待你的帮助，伙计们。

PS：“请求”的创建方式如下：

`ASIHTTPRequest *request = [[ASIHTTPRequest alloc]initWithURL:url];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:35:24.203

不知道您是否解决了这个问题，但您可能会收到“EXC_BAD_INSTRUCTION”，因为您的 cookie 可能为零，并且您正在尝试初始化一个数组，然后将其添加到请求中。cookie 需要包含某些字段才能正确初始化。看看这篇文章。

[为 NSURLRequest 创建一个 cookie？](https://stackoverflow.com/questions/691761/create-a-cookie-for-nsurlrequest)

# git - 如何让 Git 忽略作为 git 存储库的子目录？

> ID：12032983
> 
> 赞同：1
> 
> 时间：2012-08-20T06:15:39.130
> 
> 标签：git, version-control, github

我有一个 git 存储库文件夹，我在其中克隆了其他 git 存储库。主仓库如何忽略`git add -A`命令中的子仓库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:43:44.880

默认情况下，嵌套的 git 存储库将被封闭存储库中的任何 git add “忽略”。
实际上，正如“ [git 存储库中的 Git 存储库](https://stackoverflow.com/questions/5980960/git-repository-in-a-git-repository)”中所解释的，父 rpeo 将通过[`gitlink`](http://www.kernel.org/pub/software/scm/git/docs/git-fast-import.html#_tt_filemodify_tt).

`git add -A`但是在执行命令时，您不需要明确忽略任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T06:45:59.213

取消暂存文件

```
git reset HEAD 
```

并清理索引

```
git rm --cached -r repo1 
```

添加 repo1 作为子模块，创建一个文件 .gitmodules 包含在下面

```
[submodule "repo1"]
      path = repo1
      url = git://xx.com/repo1.gitt 
```

更多关于[git 缓存、阶段和索引](http://raflabs.com/blogs/silence-is-foo/2011/04/07/staging-area-index-cache-git/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:21:27.037

对存储库所在的文件夹使用 git ignore

.gitignore 文件：

bin文件夹一张图片.png

例如

# compilation - 在 windows 64 位上编译和安装 openssl

> ID：12032986
> 
> 赞同：2
> 
> 时间：2012-08-20T06:16:01.473
> 
> 标签：compilation, openssl, mingw, msys

我想在 Windows 7 Home Premium 64 位上安装 openssl，我已经下载了 openssl 包并将其解压缩到 c 目录中，但是我找不到显示如何在 Netbeans 7.1.1 中链接 openssl 的内容。我有带 MSYS 的 MinGW(4.6.1) 编译器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:57:30.090

请阅读 OpenSSL 中的 INSTALL.W32 文件，该文件解释了使用不同开发套件的构建过程。

在这个文件中你会发现

```
 GNU C (MinGW/MSYS) 
```

它解释了使用 MinGW 和 MSYS 构建它的过程。

要在 Netbeans 中使用它，您需要提及 OpenSSL 头文件的包含路径（在库编译期间生成）和 OpenSSL 库的路径。我从来没有用过Netbeans，所以我不知道。您需要在项目设置中提及包含和库。

# code-contracts - 是否有任何可用于使用代码合同、Pex 和“假”框架的最佳实践/指南？

> ID：12032988
> 
> 赞同：1
> 
> 时间：2012-08-20T06:16:22.957
> 
> 标签：code-contracts, pex, microsoft-fakes

是否有任何可用于使用代码合同、Pex 和 Fake 框架的最佳实践/指南？无法找到将所有 3 个组合在一起的具体可用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:14:10.393

PEX 站点提供了[一堆有关](http://research.microsoft.com/en-us/projects/pex/documentation.aspx)使用 PEX 和代码合同的文档。

您的切入点可能是 [Getting Started With Microsoft Code Contracts 和 Pex](http://research.microsoft.com/en-us/projects/pex/pexandcontracts.docx)。

他们也有很好的 Moles 文档[Microsoft Moles 参考手册](http://research.microsoft.com/en-us/projects/pex/molesmanual.docx)

Martin Angler 有一篇很棒的关于[代码合同和 Pex 的介绍性文章：断言和假设](http://angler.wordpress.com/2010/02/01/code-contracts-pex-assertions-and-assumptions-for-expressive-tests/)

关于这个主题也有很好的研讨会：

*   [代码合同和 Pex：为您的断言和单元测试充电](http://channel9.msdn.com/Blogs/martinesmann/Code-Contracts-and-Pex-Power-Charge-Your-Assertions-and-Unit-Tests)
*   [Microsoft PEX/MOLES 和高级单元测试方面](http://channel9.msdn.com/blogs/channel9spain/microsoft-pexmoles--advanced-unit-testing-aspects-13)（3 部分）
*   [Manuel Fahndrich 和 Peli de Halleux - 代码合同和 Pex 的协同作用](http://channel9.msdn.com/Blogs/Peli/The-Synergy-of-Code-Contracts-and-Pex)PEX 设计师的 10 分钟说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T22:04:59.067

Visual Studio ALM Rangers 正在为 Microsoft Fakes 制定指南。我很想听听那些采用它、被吓跑、成功故事、技巧、失败......等的用户的来信。给我发邮件至 fakes@freetodev.com

一旦我们开始发货，我将在此处发布指向我们指南的链接。

麦克风

# python - 检查列表是否为空

> ID：12032992
> 
> 赞同：0
> 
> 时间：2012-08-20T06:17:20.747
> 
> 标签：python

```
def gt(nums, n):

    for c in nums:
        if max(nums) > n:
            return True

        elif max(nums) < n:
            return False

        elif not nums:
            return False 
```

最后`elif`，它应该验证 nums 列表是否为空。但不为我工作。有谁知道我可以使用什么代码来检查列表是否为空？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T06:26:18.270

您的方法可以简化为：

```
def gt(nums, n):
  return max(nums) > n if nums else False

>>> gt([],0)
False
>>> gt([1,2,3],6)
False
>>> gt([1,2,3],1)
True 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T06:21:29.440

你需要先检查一下`not nums`。而且你不需要`for`循环。

请注意，这（就像您的代码一样）没有明确检查`max(nums) == n`，在这种情况下返回`False`（我认为这应该是一个名为 的函数的正确行为`gt()`）：

```
def gt(nums, n):
    if not nums:
        return False
    return max(nums) > n 
```

* * *

**编辑：**一些时间（Python 2.7.3）：

```
>>> import timeit
>>> all = """l = list(range(100))
... rl = list(reversed(range(100)))
... """
>>> tim = all + """def gt(nums, n):
...     if not nums:
...         return False
...     return max(nums) > n"""
>>> gnibbler = all + """def gt(nums, n):
...     return any(x>n for x in nums)"""
>>> burhan = all + """def gt(nums, n):
...   return max(nums) > n if nums else False"""
>>> # Test with the condition being False:
... timeit.timeit(setup=tim, stmt="gt(l, 100)")
3.011574096311698
>>> timeit.timeit(setup=gnibbler, stmt="gt(l, 100)")
8.00847921677337
>>> timeit.timeit(setup=burhan, stmt="gt(l, 100)")
2.9805757305956178
>>> timeit.timeit(setup=tim, stmt="gt(rl, 100)")
2.8600606448831307
>>> timeit.timeit(setup=gnibbler, stmt="gt(l, 100)")
7.997938412127745
>>> timeit.timeit(setup=burhan, stmt="gt(l, 100)")
3.032805185133668
>>> # Now what if the condition is True?
... timeit.timeit(setup=tim, stmt="gt(l, 98)")
2.98623750798793
>>> timeit.timeit(setup=gnibbler, stmt="gt(l, 98)")
8.265056412191534
>>> timeit.timeit(setup=burhan, stmt="gt(l, 98)")
2.9731271156252888
>>> timeit.timeit(setup=tim, stmt="gt(rl, 98)")
2.8777295865334764
>>> timeit.timeit(setup=gnibbler, stmt="gt(rl, 98)")
1.0481696827076092
>>> timeit.timeit(setup=burhan, stmt="gt(rl, 98)")
2.8776150752220246 
```

所以 Burhan 和我的解决方案在速度方面是相当的（这并不奇怪，因为它们做的事情完全相同，我的只是有点冗长），*只有当*列表足够长时，gnibbler 的速度才会明显更快（我已经删除了之前的当列表只包含 10 个项目时，它总是变慢的时间），条件评估为`True` *并且* 搜索值在列表中很早就达到了。否则，所有 Python 级别的比较都会大大降低速度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T06:48:09.460

`max()``nums`即使第一个或第二个元素大于，也会强制搜索整个`n`. 当找到`any()`大于的元素时将立即返回`n`

```
def gt(nums, n):
    return any(x>n for x in nums) 
```

### 测试用例

```
>>> gt([],0)
False
>>> gt([1,2,3],6)
False
>>> gt([1,2,3],1)
True 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T06:29:51.983

我认为您将其他语言对数组（Python 中的列表或元组或其他序列）循环的需要与[max](http://docs.python.org/library/functions.html#max)函数混为一谈。

Python 中的 Max() 接受一个列表或序列并返回最大值。注意——无需循环：

```
>>> max([1,2,3])
3
>>> l=[1,2,22]
>>> max(l)
22
>>> max('abc')
'c' 
```

所以你的功能可以这样完成：

```
def gt(nums, n): 
    if nums and max(nums) > n:
        return True
    return False 
```

或者，如果 max 被你拿走，或者你只想看到一个循环：

```
def gt(nums, n): 
    for num in nums:
        if num>n:
            return True   

    return False 
```

现在您不需要检查列表是否为空，因为如果是，则永远不会执行 for 循环。

要考虑的最后一种形式：

```
>>> nums=[1,5,5,1,5,1,1,1]
>>> n=2
>>> [i for i,x in enumerate(nums) if x>n]
[1, 2, 4] 
```

这是使用列表推导和枚举的 nums 的每个元素的索引列表，其中该元素大于 n。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T06:20:13.290

```
>>> plist = []
>>> not plist
True 
```

`not list`为我工作

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-20T06:21:50.763

如果 nums 为空，控件将不会进入循环。因此，您可以忽略该检查（除非您在同一循环中修改 nums，否则不建议这样做）

但是，要回答您的问题，请使用：

```
nums == [] 
```

# c++ - 从两个不同的线程同时访问单例类

> ID：12032999
> 
> 赞同：0
> 
> 时间：2012-08-20T06:17:48.923
> 
> 标签：c++

在我的 C++ 项目中，我有一个单例类。在项目执行期间，有时会同时从两个不同的线程访问同一个单例类。导致产生了两个单例类的实例，这是一个问题。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:20:57.660

那么它就不是单例了:-)

您可能需要向我们展示一些代码，但您的基本问题将与同步区域有关。

如果做得好，两个线程就*不可能*创建类的两个对象。事实上，类本身应该是强制执行单例性质的地方，这样错误的客户端就不会破坏意图。

基本结构将是：

```
lock mutex
if instance doesn't exist:
    instance = new object
unlock mutex 
```

*如果没有诸如互斥锁保护之类的东西（或关键代码部分或您可以在语言/库级别*保证两个线程不能同时运行代码的任何其他方式），则线程一个可能会在检查之间被换出和实例化，导致您的“单例”的两个可能实例。

而且，正如其他人无疑会建议的那样，单身很可能是个坏主意。我并不完全处于*每次*使用都是错误的阵营中，通常的问题是人们将它们视为“上帝”对象。它们*可以*有它们的用途，但通常有更好的方法，尽管我不会假设告诉你你需要改变它，因为我不知道你的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:22:17.217

如果您在不同的线程中获得两个不同的实例，那么您做错了。与进程不同，线程共享它们的内存。因此，在一个线程中分配的内存（例如，用于对象实例）也可以在另一个线程中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T06:23:14.837

如果您的单身人士获得两份副本，则不受互斥锁的保护。在获取/访问/设置内部对象时锁定互斥锁。

我相信您已经完成了这样的事情，`if(!_instance)_instance = new Singleton()`其中​​有一个关键部分。您需要使用互斥锁来保护它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T06:24:25.217

不要使用单例，这是众所周知的**[反模式](http://en.wikipedia.org/wiki/Anti-pattern)**。
一本好书：
[单身人士：解决自 1995 年以来从未遇到过的问题](http://jalf.dk/blog/2010/03/singletons-solving-problems-you-didnt-know-you-never-had-since-1995/)

如果您出于只有您自己知道的原因仍想坚持并继续使用它，您需要的是一个线程安全的单例实现，如下所示：

```
YourClass* YourClass::getInstance()
{
    MutexLocker locker(YourClass::m_mutex);
    if(!m_instanceFlag)
    {
        m_instance = new YourClass();
        m_instanceFlag = true;
    }
    return m_instance;
} 
```

`MutexLocker`通常使用的互斥锁的包装类在哪里，它在创建其实例时锁定互斥锁并解锁函数结束的互斥锁。