# StackOverflow 问答 12352000-12352999

# asp.net-mvc-3 - ASP.NET MVC 3 无法识别 .cshtml 视图文件

> ID：12352001
> 
> 赞同：10
> 
> 时间：2012-09-10T12:44:49.163
> 
> 标签：asp.net-mvc-3, visual-studio-2012

我已将一个 mvc 3 应用程序从 vs 2010 移植到 vs2012。

移植的应用程序使用 .NET 4。

所有旧位都可以工作，但是使用在 vs 2012 中创建的新视图，视图引擎不会为视图寻找 .cshtml 文件。

例如，当用户在 Solicitors 区域的 Welcome 控制器上请求 index 动作时，url 为：

```
mysite.com/solicitors/welcome/gg 
```

（其中 gg 是用户名）。在这种情况下，返回的错误是：

> 未找到视图“索引”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置： ~/Areas/Solicitors/Views/Welcome/Index.aspx ~/Areas/Solicitors/Views/Welcome/Index.ascx ~/Areas/Solicitors/Views/Shared/Index.aspx ~/Areas/Solicitors /Views/Shared/Index.ascx ~/Views/Welcome/Index.aspx ~/Views/Welcome/Index.ascx ~/Views/Shared/Index.aspx ~/Views/Shared/Index.ascx ~/Areas/Solicitors/ Views/Welcome/gg.master ~/Areas/Solicitors/Views/Shared/gg.master ~/Views/Welcome/gg.master ~/Views/Shared/gg.master ~/Areas/Solicitors/Views/Welcome/gg. cshtml ~/Areas/Solicitors/Views/Welcome/gg.vbhtml ~/Areas/Solicitors/Views/Shared/gg.cshtml ~/Areas/Solicitors/Views/Shared/gg.vbhtml ~/Views/Welcome/gg.cshtml ~ /Views/Welcome/gg.vbhtml ~/Views/Shared/gg.cshtml ~/Views/Shared/gg.vbhtml

我已经在 web.config 中的 appsettings 中添加了以下键，但没有任何区别。

```
<add key="webpages:Version" value="1.0" /> 
```

## 编辑：

SolictorAreaRegistration.cs 中的路由：

```
context.MapRoute(
                "Solicitors_Welcome",
                "Solicitors/Welcome/{nameUser}",
                new { controller = "Welcome", action = "Index", nameUser = UrlParameter.Optional }
            ); 
```

## 编辑2：

使用 RouteDebug，我可以看到找到了正确的控制器和操作。

路线数据

核心价值

姓名用户：gg

控制器：欢迎

行动：索引

数据令牌

核心价值

命名空间：System.String[]

领域：律师

UseNamespaceFallback: False

## 编辑 3：

正如我从调试中看到的那样，正确找到了路线：索引操作被命中。

当调用视图的行被调用时，就会出现问题：

```
namespace MyApp.Areas.Solicitors.Controllers
{
    [Authorize]
    public partial class WelcomeController : Controller
    {
        //
        // GET: /Solicitors/Welcome/
        public virtual ActionResult Index(string nameUser)
        {
            return View("Index", nameUser);
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-10T17:51:50.413

好的，深入了解它：

## 问题：

问题是我的视图模型是字符串类型。在我的操作中，我传入了一个字符串作为模型参数：

```
public virtual ActionResult Index(string nameUser)
        {
            return View("Index", nameUser);
        } 
```

这将与 Controller.View(...) 的重载之一发生冲突：

```
View(string, string) 
```

第二个参数需要布局文件的名称。当你这样做时，MVC 会去寻找一个布局文件，其名称与你的字符串的值相同，例如：

“你好，世界。我是个白痴，但如果你给我一个像样的错误信息，我也许可以修复这个错误。”

显然，不存在具有该名称的布局文件。也没有名为“gg”的布局文件（我的（测试）律师的用户名）。

## 解决方案：

解决方案很简单：

指定第二个参数是模型，而不是布局。

```
public virtual ActionResult Index(string nameUser)
        {
            return View("Index", model: nameUser);
        } 
```

## 有用的文章：

要查看对此问题的详细讨论，请参阅以下文章：

[MVC 陷阱：当使用视图的模型是字符串时要小心](http://www.heartysoft.com/aspnet-mvc-gotcha-string-model)

非常感谢 heartysoft.com 的启发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:54:10.917

从错误消息中可以看出：

```
~/Areas/Solicitors/Views/Welcome/gg.cshtml 
```

如果您需要查找 Index 视图，则需要指定它：

```
http://mysite.com/solicitors/welcome/index/gg 
```

# android - 键盘没有在 webview 中推送内容

> ID：12352005
> 
> 赞同：2
> 
> 时间：2012-09-10T12:44:55.977
> 
> 标签：android, webview, keyboard

我有一个在 Android 应用程序的 web 视图中运行的 html/javascript/css/jquery 页面。

当用户点击登录文本框时，键盘显示正常。问题是键盘实际上显示得足够高以完全覆盖文本框。webview 内容没有向上推，并且与键盘没有显示时相比，它不能滚动。

# jquery - jQuery 商店定位器 - 删除谷歌地图及其功能

> ID：12352006
> 
> 赞同：1
> 
> 时间：2012-09-10T12:45:00.097
> 
> 标签：jquery, json, google-maps, google-maps-api-3

我有一个商店定位器，它工作得很好但是我想删除地图功能，所以我可以使用地理定位服务，运行 json 文件并找到最近的商店 - 一切都在那里我只需要一些帮助来剥离地图/标记东西

有人可以帮忙吗？代码开始于： //使用 jQuery 创建地图

我假设大多数都可以删除，但需要为列表数据保留循环（我只想显示 1 是最接近的而不是列表）

```
(function ($) {
    $.fn.storeLocator = function (options) {

        var settings = $.extend({
            'mapDiv': 'map',
            'listDiv': 'list',
            'formID': 'user-location',
            'inputID': 'address',
            'zoomLevel': 12,
            'pinColor': 'fe7569',
            'pinTextColor': '000000',
            'storeLimit': 26,
            'distanceAlert': 60,
            'dataLocation': 'locations.xml',
            'listColor1': 'ffffff',
            'listColor2': 'eeeeee',
            'bounceMarker': true,
            'slideMap': true,
            'modalWindow': false,
            'defaultLoc': false,
            'defaultLat': '',
            'defaultLng': '',
            'jsonData': false,
            'autoGeocode': false
        }, options);

        return this.each(function () {

            var $this = $(this);

            //Add modal window divs if set
            if (settings.modalWindow == true) {
                $this.wrap('<div id="overlay"><div id="modal-window"><div id="modal-content">');
                $('#modal-window').prepend('<div id="close-icon"><\/div>');
                $('#overlay').hide();
            }

            if (settings.slideMap == true) {
                //Let's hide the map container to begin
                $this.hide();
            }

            var userinput, olat, olng, marker, letter, storenum;
            var locationset = new Array();

            //Calculate geocode distance functions - you could use Google's distance service instead
            var GeoCodeCalc = {};
            GeoCodeCalc.EarthRadiusInMiles = 3956.0;
            GeoCodeCalc.EarthRadiusInKilometers = 6367.0;
            GeoCodeCalc.ToRadian = function (v) { return v * (Math.PI / 180); };
            GeoCodeCalc.DiffRadian = function (v1, v2) {
                return GeoCodeCalc.ToRadian(v2) - GeoCodeCalc.ToRadian(v1);
            };
            GeoCodeCalc.CalcDistance = function (lat1, lng1, lat2, lng2, radius) {
                return radius * 2 * Math.asin(Math.min(1, Math.sqrt((Math.pow(Math.sin((GeoCodeCalc.DiffRadian(lat1, lat2)) / 2.0), 2.0) + Math.cos(GeoCodeCalc.ToRadian(lat1)) * Math.cos(GeoCodeCalc.ToRadian(lat2)) * Math.pow(Math.sin((GeoCodeCalc.DiffRadian(lng1, lng2)) / 2.0), 2.0)))));
            };

            //Geocode function for the origin location
            function GoogleGeocode() {
                geocoder = new google.maps.Geocoder();
                this.geocode = function (address, callbackFunction) {
                    geocoder.geocode({ 'address': address }, function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            var result = {};
                            result.latitude = results[0].geometry.location.lat();
                            result.longitude = results[0].geometry.location.lng();
                            callbackFunction(result);
                        } else {
                            alert("Geocode was not successful for the following reason: " + status);
                            callbackFunction(null);
                        }
                    });
                };
            }

            //Reverse geocode to get address for automatic options needed for directions link
            function ReverseGoogleGeocode() {
                geocoder = new google.maps.Geocoder();
                this.geocode = function (latlng, callbackFunction) {
                    geocoder.geocode({ 'latLng': latlng }, function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {
                                var result = {};
                                result.address = results[0].formatted_address;
                                callbackFunction(result);
                            }
                        } else {
                            alert("Geocode was not successful for the following reason: " + status);
                            callbackFunction(null);
                        }
                    });
                };
            }

            //If a default location is set
            if (settings.defaultLoc == true) {
                //The address needs to be determined for the directions link
                var r = new ReverseGoogleGeocode();
                var latlng = new google.maps.LatLng(settings.defaultLat, settings.defaultLng);
                r.geocode(latlng, function (data) {
                    if (data != null) {
                        var originAddress = data.address;
                        mapping(settings.defaultLat, settings.defaultLng, originAddress);
                    } else {
                        //Unable to geocode
                        alert('Unable to find address');
                    }
                });
            }

            //HTML5 geolocation API option
            if (settings.autoGeocode == true) {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(autoGeocode_query, autoGeocode_error);
                }
            }

            //If location is detected automatically
            function autoGeocode_query(position) {
                //The address needs to be determined for the directions link
                var r = new ReverseGoogleGeocode();
                var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                r.geocode(latlng, function (data) {
                    if (data != null) {
                        var originAddress = data.address;
                        mapping(position.coords.latitude, position.coords.longitude, originAddress);
                    } else {
                        //Unable to geocode
                        alert('Unable to find address');
                    }
                });
            }

            function autoGeocode_error(error) {
                //If automatic detection doesn't work show an error
                alert("Automatic location detection failed. Please fill in your address or zip code.");
            }

            //Used to round miles to display
            function roundNumber(num, dec) {
                var result = Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
                return result;
            }

            //Process form input
            $(function () {
                $(document).on('submit', '#' + settings.formID, function (e) {
                    //Stop the form submission
                    e.preventDefault();
                    //Get the user input and use it
                    var userinput = $('#' + settings.formID + ' #' + settings.inputID).val();

                    if (userinput == "") {
                        //Show alert and stop processing
                        alert("The input box was blank.");
                    }
                    else {
                        var g = new GoogleGeocode();
                        var address = userinput;
                        g.geocode(address, function (data) {
                            if (data != null) {
                                olat = data.latitude;
                                olng = data.longitude;
                                mapping(olat, olng, userinput);
                            } else {
                                //Unable to geocode
                                alert('ERROR! Unable to geocode address');
                            }
                        });
                    }

                });
            });

            //Now all the mapping stuff
            function mapping(orig_lat, orig_lng, origin) {
                $(function () {

                    var dataType;

                    //JSON or XML?
                    if (settings.jsonData == true) { dataType = "json"; }
                    else { dataType = "xml"; }

                    $.ajax({
                        type: "GET",
                        url: settings.dataLocation,
                        dataType: dataType,
                        success: function (data) {

                            //After the store locations file has been read successfully
                            var i = 0;

                            //Depending on your data strucutre and what you want to include in the maps, you may need to change the following variables or comment them out
                            if (settings.jsonData == true) {
                                //Process JSON
                                $.each(data, function () {

                                    var name = this.locname;
                                    var lat = this.lat;
                                    var lng = this.lng;

                                    var distance = GeoCodeCalc.CalcDistance(orig_lat, orig_lng, lat, lng, GeoCodeCalc.EarthRadiusInMiles);

                                    //Create the array
                                    locationset[i] = new Array(distance, name, lat, lng);

                                    i++;
                                });
                            }
                            else {
                                //Process XML
                                $(data).find('marker').each(function () {
                                    //Take the lat lng from the user, geocoded above
                                    var name = $(this).attr('name');
                                    var lat = $(this).attr('lat');
                                    var lng = $(this).attr('lng');

                                    var distance = GeoCodeCalc.CalcDistance(orig_lat, orig_lng, lat, lng, GeoCodeCalc.EarthRadiusInMiles);

                                    //Create the array
                                    locationset[i] = new Array(distance, name, lat, lng);

                                    i++;
                                });
                            }

                            //Sort the multi-dimensional array numerically
                            locationset.sort(function (a, b) {
                                var x = a[0];
                                var y = b[0];
                                return ((x < y) ? -1 : ((x > y) ? 1 : 0));
                            });

                            //Check the closest marker
                            if (locationset[0][0] > settings.distanceAlert) {
                                alert("Unfortunately, our closest location is more than " + settings.distanceAlert + " miles away.");
                            }

                            //Create the map with jQuery
                            $(function () {

                                var storeDistance, storeName;

                                //Instead of repeating the same thing twice below
                                function create_store_variables(loopcount) {
                                    storeDistance = locationset[loopcount][0];
                                    storeName = locationset[loopcount][1];

                                    storeDistance = roundNumber(storeDistance, 2);
                                }

                                //Google maps settings
                                var myOptions = {
                                    zoom: settings.zoomLevel,
                                    center: new google.maps.LatLng(orig_lat, orig_lng),
                                    mapTypeId: google.maps.MapTypeId.ROADMAP
                                };

                                if (settings.slideMap == true) {
                                    //Slide in the map container
                                    $this.slideDown();
                                }

                                var map = new google.maps.Map(document.getElementById(settings.mapDiv), myOptions);
                                var markers = new Array();
                                //Create one infowindow to fill later
                                var infowindow = new google.maps.InfoWindow();

                                //Avoid error if number of locations is less than the default of 26
                                if ((locationset.length - 1) < settings.storeLimit - 1) {
                                    storenum = locationset.length - 1;
                                }
                                else {
                                    storenum = settings.storeLimit - 1;
                                }

                                //Add markers and infowindows loop
                                for (var y = 0; y <= storenum; y++) {
                                    var letter = String.fromCharCode("A".charCodeAt(0) + y);
                                    var point = new google.maps.LatLng(locationset[y][2], locationset[y][3]);
                                    marker = createMarker(point, locationset[y][1], locationset[y][4], letter);
                                    markers[y] = marker;
                                    //Pass variables to the pop-up info windows
                                    create_store_variables(y);
                                    create_infowindow(marker, storeName);
                                }

                                //Creat the links that focus on the related marker
                                $("#" + settings.listDiv).empty();
                                $(markers).each(function (x, marker) {
                                    //Let's decleare the store variables again to make it easier to read the html below - there's probably a better way to do this
                                    var letter = String.fromCharCode("A".charCodeAt(0) + x);
                                    create_store_variables(x);
                                    //This needs to happen outside the loop or there will be a closure problem with creating the infowindows attached to the list click
                                    listClick(storeDistance, letter, marker, storeName);

                                });

                                function listClick(distance, letter, marker, name, address1, address2, city, state, zip, phone, web, hours1, hours2, hours3) {
                                    var distLength;
                                    if (distance <= 1) { distLength = "mile"; }
                                    else { distLength = "miles"; }

                                    var fullAddress = address1 + " " + address2 + ", " + city + ", " + state + " " + zip;
                                    var distLink = "<a href=\"http://maps.google.com/maps?saddr=" + origin + "&daddr=" + fullAddress + "\" target=\"_blank\">Directions<\/a>";

                                    $('<li />').html("<div class=\"list-label\">" + letter + "<\/div><div class=\"list-details\"><div class=\"list-content\"><div class=\"loc-name\">" + storeName + "<\/div><div class=\"loc-dist\">" + distance + " " + distLength + "<\/div><\/div><\/div>").click(function () {
                                        map.panTo(marker.getPosition());
                                        var listLoc = "left";
                                        if (settings.bounceMarker == true) {
                                            marker.setAnimation(google.maps.Animation.BOUNCE)
                                            setTimeout(function () { marker.setAnimation(null); create_infowindow(marker, name, address1, address2, city, state, zip, phone, web, hours1, hours2, hours3, listLoc); }, 700);
                                        }
                                        else {
                                            create_infowindow(marker, name, address1, address2, city, state, zip, phone, web, hours1, hours2, hours3, listLoc);
                                        }

                                    }).appendTo("#" + settings.listDiv);
                                }

                                //Add the list li background colors
                                $("#" + settings.listDiv + " li:even .list-details").css('background', "#" + settings.listColor1);
                                $("#" + settings.listDiv + " li:odd .list-details").css('background', "#" + settings.listColor2);

                                //Custom marker function - alphabetical
                                function createMarker(point, name, address, letter) {
                                    //Set up pin icon with the Google Charts API for all of our markers
                                    var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=" + letter + "|" + settings.pinColor + "|" + settings.pinTextColor,
                  new google.maps.Size(21, 34),
                  new google.maps.Point(0, 0),
                  new google.maps.Point(10, 34));
                                    var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
                  new google.maps.Size(40, 37),
                  new google.maps.Point(0, 0),
                  new google.maps.Point(12, 35));

                                    //Create the markers
                                    var marker = new google.maps.Marker({
                                        position: point,
                                        map: map,
                                        icon: pinImage,
                                        shadow: pinShadow,
                                        draggable: false
                                    });

                                    return marker;
                                }

                                //Let's save some space - creates and address line if the variable is set
                                function address_line(addressSegment) {
                                    var addressLine;

                                    if (addressSegment != "") {
                                        addressLine = "<div>" + addressSegment + "<\/div>";
                                    }
                                    else {
                                        addressLine = "";
                                    }

                                    return addressLine;
                                }

                                //Infowindows
                                function create_infowindow(marker, name, address1, address2, city, state, zip, phone, web, hours1, hours2, hours3, location) {

                                    var formattedAddress = "<div class=\"loc-name\">" + name + "<\/div>" + address_line(address1) + address_line(address2) + city + ", " + state + " " + zip + address_line(hours1) + address_line(hours2) + address_line(hours3) + address_line(phone) + "<div><a href=\"http://" + web + "\" target=\"_blank\">" + web + "<\/a><\/div>";

                                    //Opens the infowindow when list item is clicked
                                    if (location == "left") {
                                        infowindow.setContent(formattedAddress);
                                        infowindow.open(marker.get(settings.mapDiv), marker);
                                    }
                                    //Opens the infowindow when the marker is clicked
                                    else {
                                        google.maps.event.addListener(marker, 'click', function () {
                                            infowindow.setContent(formattedAddress);
                                            infowindow.open(marker.get(settings.mapDiv), marker);
                                        })
                                    }
                                }

                            });
                        }
                    });
                });
            }

        });
    };
})(jQuery); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:47:36.893

在不显示地图的情况下使用地理编码违反[Google 的 TOS](https://developers.google.com/maps/terms#section_10_1_g)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:54:57.327

所有的地图内容[除了作为 listClick() 的实用程序函数外，从 //Create the map with jQuery line 开始，并在函数 listClick 之前结束仍然可见的地图 div [里面没有 mapo，但它仍然存在，所以考虑也注释掉那个 HTML 标记

# directx-11 - 如何在 DirectX11 的几何着色器中实例化？

> ID：12352014
> 
> 赞同：0
> 
> 时间：2012-09-10T12:45:43.620
> 
> 标签：directx-11, geometry-shader, geometry-instancing

我知道在顶点着色器中你这样做：

```
PixelInputType TextureVertexShader(VertexInputType input)
{
        PixelInputType output;

// Change the position vector to be 4 units for proper matrix calculations.
        input.position.w = 1.0f;
// Update the position of the vertices based on the data for this particular instance.
        input.position.x += input.instancePosition.x;
        input.position.y += input.instancePosition.y;
        input.position.z += input.instancePosition.z;
// Calculate the position of the vertex against the world, view, and projection matrices.
        output.position = mul(input.position, worldMatrix);
        output.position = mul(output.position, viewMatrix);
        output.position = mul(output.position, projectionMatrix);

// Store the texture coordinates for the pixel shader.
output.tex = input.tex;

        return output;
} 
```

在几何着色器中使用 instancedPosition 的等价物是什么？就像我想实例化一个由 1 个顶点组成的模型并为每个实例在几何着色器中制作一个四边形并将四边形的位置设置为对应的 instancePosition 的位置实例缓冲区中的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:27:02.733

为了在几何着色器中传递数据，您可以简单地从 VS 传递到 GS，因此您的 VS 输出结构如下：

```
struct GS_INPUT
{
    float4 vertexposition :POSITION;
    float4 instanceposition : TEXCOORD0; //Choose any semantic you like here
    float2 tex : TEXCOORD1;
    //Add in any other relevant data your geometry shader is gonna need
}; 
```

然后在您的顶点着色器中，直接在几何着色器中传递数据（未转换）

根据您的输入原始拓扑，您的几何着色器将以点、线或完整三角形的形式接收数据，因为您提到要将点转换为四边形，原型看起来像这样

```
[maxvertexcount(4)]
void GS(point GS_INPUT input[1], inout TriangleStream<PixelInputType> SpriteStream)
{
    PixelInputType output;

    //Prepare your 4 vertices to make a quad, transform them and once they ready, use
    //SpriteStream.Append(output); to emit them, they are triangle strips,
    //So if you need a brand new triangle,
    // you can also use SpriteStream.RestartStrip();       
} 
```

# python - 为什么在分配给局部变量之前立即给它一个初始值？

> ID：12352015
> 
> 赞同：9
> 
> 时间：2012-09-10T12:45:53.370
> 
> 标签：python

在查看[异步模块](http://docs.python.org/library/asyncore.html)的源代码时，我遇到了[这种](http://hg.python.org/cpython/file/88a0792e8ba3/Lib/asyncore.py#l533)方法。我将在没有上下文的情况下将其包含在此处，因为它似乎是完全独立的：

```
def initiate_send(self):
    num_sent = 0
    num_sent = dispatcher.send(self, self.out_buffer[:512])
    self.out_buffer = self.out_buffer[num_sent:] 
```

我的问题：为什么`num_sent`首先设置为`0`，然后立即再次设置为另一个值？

如果我在除 python 源代码之外的任何地方找到它，我会说这行代码是多余的。有什么意义，还是[死代码](http://en.wikipedia.org/wiki/Dead_code)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T12:53:23.087

那是死代码；它是一个局部变量，所以它永远不会影响其他任何东西。

如果它是一个实例变量，那么`dispatcher.send`可以在执行时读取该值，但在这里完全是多余的。

该`asyncore`模块相对古老，自1999 年首次[致力于 python 代码库以来，该行就一直存在。](http://hg.python.org/cpython/annotate/30c1c40cd80f/Lib/asyncore.py)

# seo - 如何克服使用带有 FireBase 的客户端 JS 呈现内容的 SEO 影响？

> ID：12352021
> 
> 赞同：4
> 
> 时间：2012-09-10T12:46:02.650
> 
> 标签：seo, firebase

我有兴趣将 FireBase 用作创建大部分传统的、偶尔更新的网站的数据存储，并且担心使用客户端 JavaScript 呈现内容对 SEO 的影响。

我知道 Google 已经在索引一些 JavaScript 内容方面取得了进展，但我想知道我最好的做法是什么。我知道我有一些选择：

*   使用 100% 客户端 JS 渲染内容，可能会遇到一些索引问题
*   在服务器端构建静态 HTML 文件（最有可能使用 Node）并提供它们

首先，我不确定这个问题实际上对客户端所做的一切有多糟糕（我是否正在解决需要解决的问题？）。其次，我只是想知道我是否遗漏了其他一些明显的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T02:33:23.943

不幸的是，在客户端呈现数据通常会使 SEO 变得困难。Firebase 真正适用于动态数据，例如用户帐户信息、游戏数据等，其中 SEO 不是目标。

话虽如此，您可以做一些事情来优化 SEO。首先，您可以在编译时使用 mustache 之类的模板工具尽可能多地渲染您的网站。这就是我们在 Firebase.com 网站上所做的（整个网站是静态的，除了教程和示例）。

其次，如果您的应用在 URL 中使用哈希片段进行导航（“#！”之后的任何内容），您可以提供一组单独的静态或服务器生成的页面，这些页面对应于您的动态页面，以便爬虫可以读取数据。谷歌有一个这样做的规范，你可以在这里看到： [https ://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

# java - 使用 UUID 作为业务键和 equals/hash 方法

> ID：12352023
> 
> 赞同：4
> 
> 时间：2012-09-10T12:46:08.850
> 
> 标签：java, uuid

我正在开发一个新应用程序，我需要一些关于如何实现 equals 方法和 hashCode 方法的帮助。我一直在阅读关于 SO 的许多问题，并且我还阅读了几篇将我引向这个问题的博客文章。

首先是一点技术信息：我正在使用 JPA (EclipseLink)，并且该应用程序适用于 Java EE。

在我读完之后，你应该对 hashCode 和 equals 使用不可变的值，但由于类中的字段通常是可修改的，你不能使用它们。您也不能使用主键 (JPA)，因为在持久化之前您不会拥有主键。所以我在想的是使用UUID。对于equals和hashCode，但我以前从未这样做过，所以我想知道是否有人认为这很糟糕（为什么？）和可能的缺点（除了获得相同ID的微小机会）？使用 UUID 并在构造函数中分配它将从一开始就为所有对象提供业务 ID。我将使其不可变并将其保存到数据库中。

这种方法不好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:00:10.617

IMO UUID 可以正常工作，我建议这样做。

我找不到这种方法的任何缺点，因为达到 2 个相同值的可能性非常小。

# pdf - SSRS 2005 导出为 PDF 永无止境

> ID：12352025
> 
> 赞同：1
> 
> 时间：2012-09-10T12:46:12.903
> 
> 标签：pdf, service, reporting-services, export, reporting

我有一个案例，报告服务需要无限时间才能将大量页面导出为 PDF；大约1600页。

对于这个数量的页面，导出到 excel 可以正常工作，但对于 pdf，它不会。我试图增加虚拟内存，它仍然没有工作。

我正在使用 Reporting Services 2005。升级到较新版本会解决问题吗？我有什么选择（即使升级是一种解决方案，因为我的客户还没有准备好升级）。

值得注意的是，我的客户端使用的服务器在内存、处理器方面具有非常好的规格……</p>

谢谢你。罗伊·赫拉耶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:53:50.733

这是 SQL Server 2005 Reporting Services 的一个已知问题。SQL Server 2008 为生成大型报告引入了更好的性能（请参阅[此 MSDN 论坛主题](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/e6b8c870-55da-4041-952a-c83a70c5c405)）。如果您的客户需要生成 PDF 格式的大型报告，那么他们应该考虑升级到较新版本的 SQL Server。

# java - 用战斧和 ajsx4jsf 为 jsf1.1 开战

> ID：12352026
> 
> 赞同：0
> 
> 时间：2012-09-10T12:46:16.893
> 
> 标签：java, jsf, jakarta-ee, ear, ajax4jsf

我正在开发一个带有 ejb 和 jsf 的应用程序，带有 tomahawk 和 ajax4jsf 以及 WEB-inf/lib 文件夹中的 jsf-api jsf-impl jars..

我已经将 iText 和 POI jars 等其他 jars 放在耳根处，它在指向耳根的战争清单中运行良好。

我需要将 jsf-api.jar 放在耳根吗？我应该在 WEB-INF/lib 文件夹中放入哪些其他 jars..（我应该将 'commons' jar 放在 WEB-INF/lib 中还是在 EAR 根目录中..？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:36:32.830

这取决于您的运行时环境，您需要什么库。您使用什么网络服务器/容器？由于不同的 Web 和应用程序服务器，供应商提供了不同的库。有时您必须配置自己的 jar，有时则不必。我认为使用 Apache Tomcat 7 您必须将 JSF 文件添加到您的 lib 目录中。但是通过使用 JBoss 或 Glassfish，您不需要它，因为它们已通过 Java EE 6（Web Profile）认证。顺便问一下，JSF、EJB 和 a4j 使用什么版本？它看起来像一些旧东西。我猜你正在使用应用程序服务器，因为 EJB。在这种情况下，您不必添加 JSF 和 Apache Commons 的库，因为 AS 通常会提供它。

我建议创建一个 Maven 项目。这一点都不难，您可以在一个 XML 文件中定义库。

# mysql - 端口如何真正工作？

> ID：12352030
> 
> 赞同：2
> 
> 时间：2012-09-10T12:46:29.830
> 
> 标签：mysql, networking, tcp, port

我对端口的概念有点困惑。可以说我为`3306`（mysql）打开了入站端口`my-ip`。因此`my-ip`将与`3306`. 但我又想知道mysql如何与我的ip对话？

比如说让我的应用程序`my-ip`正在查询 mysql，mysql 如何将数据发送回我的`my-ip`机器？我的意思是它再次使用端口？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:03:44.983

TCP 会话由 4 位信息定义：一对 IP 地址和一对端口。

当您在 Firefox 中打开与 的连接时`stackoverflow.com`，您的操作系统会为该连接分配一个未使用的端口。通常相当高的东西，比如 32012。`stackoverflow.com`正在侦听端口 80，所以那里别无选择。

因此 TCP 会话是`you:32012 - stackoverflow.com:80`. 这种连接是**双向**使用的。因此，您的 HTTP 请求被发送到`stackoverflow.com:80`，而 HTTP 响应被发送到`you:32012`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:53:41.070

MySQL 的默认端口是`3306`，如果您告诉它连接到另一个端口，它会连接，否则默认连接到`3306`.

# java - Android JNI 中的伪造方法描述符

> ID：12352031
> 
> 赞同：1
> 
> 时间：2012-09-10T12:46:32.070
> 
> 标签：java, android, java-native-interface, native

我在Java中有以下课程

```
package com.artifex.mupdf.data;

public class FzTextSpan {

FzRect bbox;
int len, cap;
FzTextChar[] mFzTextChars;
public FzTextSpan(FzRect bbox, int len, int cap, FzTextChar[] mFzTextChars) {
    super();
    this.bbox = bbox;
    this.len = len;
    this.cap = cap;
    this.mFzTextChars = mFzTextChars;
}
} 
```

我正在尝试使用以下代码从 JNI 调用构造函数

```
jclass         jFzSpanClass;
jmethodID      jFzSpanCtor;

jFzSpanClass = (*env)->FindClass(env, "com/artifex/mupdf/data/FzTextSpan");
if (jFzSpanClass==NULL) return NULL;
jFzSpanCtor =  (*env)->GetMethodID(env, jFzSpanClass, "<init>",
   "(Lcom/artifex/mupdf/data/FzRect;II;[Lcom/artifex/mupdf/data/FzTextChar;)V"); 
```

我正进入（状态

```
 Bogus Method Descriptor:        "(Lcom/artifex/mupdf/data/FzRect;II;[Lcom/artifex/mupdf/data/FzTextChar;)V"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T17:45:40.850

您的方法签名字符串错误。不要试图猜测这些：`javap -s`会以 100% 的准确率告诉你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:24:25.397

描述符中多了一个分号：

```
"(Lcom/artifex/mupdf/data/FzRect;II;[Lcom/artifex/mupdf/data/FzTextChar;)V" 
```

正确的字符串是：

```
"(Lcom/artifex/mupdf/data/FzRect;II[Lcom/artifex/mupdf/data/FzTextChar;)V" 
```

# visual-studio-2012 - 什么配置条目删除了 Visual Studio 2012 隔离外壳中的“工具->连接到数据库”菜单

> ID：12352033
> 
> 赞同：1
> 
> 时间：2012-09-10T12:46:42.887
> 
> 标签：visual-studio-2012

我需要删除 Visual Studio 2012 隔离外壳中的“工具->连接到数据库”菜单。根据 MS，我需要在“pkgundef”文件中有这个条目。

```
// Visual Studio Explorers and Designers Package
// This package is responsible for server explorer and "Tools->Connect to Server" and     "Tools->Connect to Database" commands.
[$RootKey$\Packages\{8D8529D3-625D-4496-8354-3DAD630ECC1B}] 
```

这会删除“工具->连接到服务器”，但不会删除“工具->连接到数据库”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:36:40.697

[http://msdn.microsoft.com/en-us/library/cc138579.aspx](http://msdn.microsoft.com/en-us/library/cc138579.aspx)

这是微软从孤立的外壳中删除东西的帮助..

他们给出的例子恰好是有问题的......

> 例如，要删除工具菜单上的连接到数据库和连接到服务器命令，您可以取消注释该行
> 
> ```
>  [$RootKey$\Packages\{8D8529D3-625D-4496-8354-3DAD630ECC1B}] 
> ```
> 
> 在应用程序的 .pkgundef 文件中。

但显然它不起作用。

**编辑：**我在不同的四个人身上发现了这个！

```
// Server Explorer

[$RootKey$\Packages\{198E76C1-34C0-424D-9957-B3EBD80265FB}] 
```

我不知道它来自哪里，但它似乎有效。

# javascript - 是否存在可以在 ajax 请求中调用成功和错误回调函数的场景？

> ID：12352034
> 
> 赞同：0
> 
> 时间：2012-09-10T12:46:44.773
> 
> 标签：javascript, jquery

在下面的伪代码中，即使正在调用错误回调，也会发生重定向错误。如果调用错误回调，则不应调用成功回调？

```
$.ajax({

success : {

redirectPage();
}

error : {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:02:10.547

要么调用成功回调，要么调用错误回调，但不能在同一个 ajax 请求中调用两者。

也就是说，如果您需要伪造这种行为，这可能是一个解决方案：

```
// first solution

$.ajax({
    complete: function() {
        alert("complete() called...");
    }
};

// second solution

function success() {
    alert("success() called...");
}

$.ajax({
    success: success,
    error: function() {
        success();
        // any additional code
    }
}; 
```

# c++ - Vim：公共关键字的对齐方式

> ID：12352036
> 
> 赞同：4
> 
> 时间：2012-09-10T12:46:47.047
> 
> 标签：c++, vim, d

目前，vim`public:`像这样对齐我的 s：

```
class foo {
  public:
     void bar();
} 
```

也就是说，前面有 2 个空格`public:`，然后是一个完整的制表符（在我的情况下是三个空格）。

我将如何使它对齐：

```
class foo {
 public:
   void bar();
} 
```

就像在`void bar();`一个标签处缩进一样（三个空格），并且`public:`是一种“中途”（或一个空格）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T13:55:11.867

C++ 缩进默认为`cindent`，因此可以通过设置`cinoptions`. 要获得您要求的缩进，请执行以下操作：

```
set cinoptions+=g1,h2 
```

见`:help cino-g`和`:help cino-h`。

正如评论中提到的`cino-g`并且`h`并不总是有效，另一种方法是`:help cinoptions-values`导致相同的列表。`:help indent.txt`也很有用。

# c# - 像使用数据表一样调试 gridview 对象

> ID：12352037
> 
> 赞同：0
> 
> 时间：2012-09-10T12:46:50.117
> 
> 标签：c#, .net, vb.net, visual-studio

是否可以像使用数据表一样调试 gridview 对象。我的意思是向对象添加手表然后直观地查看数据？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:21:27.607

是的，你可以调试你的 GridView，你使用`RowDataBound` `Event`

```
 <asp:gridview id="GridView1" 
    datasourceid="...." 
    autogeneratecolumns="true"
    onrowdatabound="GridView1_RowDataBound" 
    runat="server">
  </asp:gridview>

void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
  {

    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        Console.Write(e.Row.Cells[1].Text);
        .....
    }

  } 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

# ruby-on-rails - 自我重置的模拟账户

> ID：12352038
> 
> 赞同：2
> 
> 时间：2012-09-10T12:46:50.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, saas

为访问者提供模拟账户的最佳方法是什么？

模拟账户必须有一些基本的模拟数据，并且必须在一定时间后自行重置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:53:42.480

使用设计，您可以设置来宾用户。或者使用 seed.rb 实现一个测试用户，然后你可以向这个用户添加自定义数据。

[这是设计 wiki 中的示例操作指南](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-a-guest-user)

# shell - 使用 shell 删除最旧的文件

> ID：12352040
> 
> 赞同：2
> 
> 时间：2012-09-10T12:46:51.107
> 
> 标签：shell

我有一个文件夹 /var/backup，cronjob 在其中保存数据库/文件系统的备份。它包含一个 latest.gz.zip 和许多名为 timestamp.gz.zip 的旧转储。该文件夹越来越大，我想创建一个执行以下操作的 bash 脚本：

*   保留最新的.gz.zip
*   保留最年轻的 10 个文件
*   删除所有其他文件

不幸的是，我不是一个好的 bash 脚本编写者，所以我不知道从哪里开始。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:13:43.613

在 zsh 中，您可以使用扩展标志来完成大部分操作：

```
files=(*(.Om))
rm $files[1,-9] 
```

请小心使用此命令，您可以检查使用了哪些匹配项：

```
print -rl -- $files[1,-9] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:50:51.453

您应该学习使用[`find`](http://content.hccfl.edu/pollock/unix/findcmd.htm)命令，可能带有`xargs`，类似于

```
 find /var/backup -type f -name 'foo' -mtime -20 -delete 
```

或者如果您`find`没有`-delete`：

```
 find /var/backup -type f -name 'foo' -mtime -20 -print0 | xargs -0 rm -f 
```

当然你需要改进很多，这只是为了提供想法。

# sql - T-SQL 优化删除多条记录

> ID：12352042
> 
> 赞同：11
> 
> 时间：2012-09-10T12:46:58.780
> 
> 标签：sql, sql-server, tsql, sql-delete

我有一张可以增长到数百万条记录的表（例如 5000 万条记录）。每 20 分钟删除超过 20 分钟的记录。

问题是如果表有这么多记录，这样的删除可能会花费很多时间，我想让它更快。

我不能做“截断表”，因为我只想删除超过 20 分钟的记录。我想在执行“删除”并过滤需要删除的信息时，服务器正在创建日志文件或其他东西，这需要很多时间吗？

我对吗？有没有办法停止任何标志或选项以优化删除，然后打开停止的选项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-10T14:00:35.870

要扩展批量删除建议，我建议您更频繁地执行此操作（也许每 20 秒一次） - 批量删除很容易：

```
WHILE 1 = 1 
    BEGIN 
        DELETE TOP ( 4000 )
        FROM    YOURTABLE
        WHERE   YourIndexedDateColumn < DATEADD(MINUTE, -20, GETDATE()) 
        IF @@ROWCOUNT = 0 
            BREAK    
    END 
```

您的插入在等待锁释放时可能会稍微滞后，但它们应该插入而不是错误。

不过，关于您的表，我希望在非常快的 raid 10 阵列/甚至分区上看到这么多流量的表-您的磁盘是否可以满足要求？**您的事务日志是否与数据文件位于不同的磁盘上？- 他们应该是**

**编辑 1 - 回复您的评论**

将数据库放入 SIMPLE 恢复：

```
ALTER DATABASE Database Name SET RECOVERY='SIMPLE' 
```

这基本上会关闭给定数据库上的事务日志记录。这意味着如果发生数据丢失，您将需要丢失自上次完整备份以来的所有数据。如果您对此感到满意，那么在运行大型事务时这应该可以节省大量时间。（请注意，在事务运行时，日志记录仍以 SIMPLE 进行 - 以启用事务的回滚）。

如果您的数据库中有无法丢失数据的表，您需要让数据库处于完全恢复模式（即记录任何事务（并希望通过您的服务器维护计划刷新到 *.trn 文件）。因为我不过，在我的问题中说，没有什么能阻止你拥有两个数据库，1 个是 FULL，1 个是 SIMPLE。FULL 数据库将是你不能丢失任何数据的前表（即你可以应用事务日志来将数据恢复到一个特定的时间），而 SIMPLE 数据库将用于这些海量的高流量表，您可以在发生故障时允许数据丢失。

假设您每晚创建完整的 (*.bak) 文件并每半小时左右将日志文件刷新到 *.trn 文件，所有这些都是相关的）。

关于您的索引问题，如果您检查执行计划并看到任何“TABLE SCAN”，那么您的日期列必须被索引 - 这将表明缺少索引。

我认为您的日期列是 DATETIME，具有将 DEFAULT 设置为 getdate() 的约束？

您可能会发现通过将其替换为 BIGINT YYYYMMDDHHMMSS 然后将 CLUSTERED 索引应用于该列来获得更好的性能 - 但请注意，每个表只能有 1 个聚集索引，因此如果该表已经有一个，您需要使用非聚集索引。（如果您不知道，聚集索引基本上告诉 SQL 以该顺序存储信息，这意味着当您删除行 > 20 分钟时，SQL 可以按顺序删除内容，而不是从一页跳到另一页。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-10T13:15:32.333

日志问题可能是由于在 trasaction 中删除的记录数，更糟糕的是，引擎可能会请求每条记录的锁（或者按页锁并不是那么糟糕）

这里的一件大事是您如何确定要删除的记录，我假设您使用日期时间字段，如果是这样，请确保您在列上有索引，否则它是对表的顺序扫描，这将真正惩罚您的过程.

根据用户的并发性和删除时间，您可以做两件事

1.  如果可以保证删除的时候没有人去读或者写，可以排他锁表，然后删除（这样只需要引擎一把锁），然后释放锁
2.  您可以使用批量删除，您将使用提供要删除的行的游标创建一个脚本，然后开始事务并提交每 X 条记录（理想情况下为 5000），因此您可以保持事务简短而不占用那么多锁

看一下删除过程的查询计划，看看它显示了什么，对大表的顺序扫描永远不会好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T18:57:29.427

不幸的是，出于这个问题的目的，幸运的是，为了 SQL Server 中数据库的一致性和可恢复性，将数据库置于简单恢复模式不会禁用日志记录。每个事务在将其提交到数据文件之前仍会被记录，唯一的区别是日志中的空间将在事务回滚或以简单恢复模式提交后立即释放（在大多数情况下） ，但这不会以某种方式影响 DELETE 语句的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T21:03:40.590

当我需要从具有 3 个索引和大量外键的大表中删除 70% 以上的行时，我遇到了类似的问题。

对于这种情况，我将所需的行保存在临时表中，截断原始表并重新插入行，例如：

```
SELECT * INTO #tempuser FROM [User] WHERE [Status] >= 600;
TRUNCATE TABLE [User];
INSERT [User] SELECT * FROM #tempuser; 
```

我通过这个链接学习了这项技术，[该链接](http://www.sqlserver-dba.com/2013/01/sql-server-optimize-delete-from-table-delete-in-sql.html)解释了：

> **DELETE**是一个完全记录的操作，如果出现问题可以回滚
> 
> **TRUNCATE**从表中删除所有行而不记录单个行删除

在文章中，您可以探索其他策略来解决删除许多记录的延迟问题，这对我有用

# javascript - 多个带有 (document).ready(function() 的 js

> ID：12352046
> 
> 赞同：0
> 
> 时间：2012-09-10T12:47:02.833
> 
> 标签：javascript, jquery

我的页面上有一个搜索系统、一个幻灯片和一个使用 js 运行的轮播，但轮播没有运行：

搜索开始于：

```
$('document').ready( function() {
            $("#search_query_top") 
```

幻灯片开始于：

```
$(window).load(function()
{
    init_slideshow()
}) 
```

轮播开始于：

```
jQuery(document).ready(function() { 
            $("ul.carruselhome").simplecarousel({ 
```

问题，我认为在这里：

```
$('document').ready( function() 
```

当我从搜索系统中禁用该行时：

```
$('document').ready( function() ; //the carousel works... 
```

我试图更改轮播脚本上的就绪语法，但没有任何反应，我只想在轮播脚本中修复它。
('document') 不会影响任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:56:46.887

它不是

```
$('document').ready( function() { 
```

但它的

```
$(document).ready( function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:51:33.403

.ready() 函数为文档的“就绪”事件附加了一个事件处理程序。这些事件处理程序不会被对寄存器函数（.ready（））的连续调用覆盖。

你的问题是一个错字：'document' 会寻找一个名为 document.. 的标签

尝试

```
$(document).ready() 
```

:)

问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:53:48.393

您应该将所有剩余的处理程序包含在一个[.ready](http://api.jquery.com/ready/)函数中，例如

```
 $(document).ready( function() {
    // 1st handler

    //2nd handler

    }); 
```

# mysql - MySQL创建视图连接两个表

> ID：12352048
> 
> 赞同：16
> 
> 时间：2012-09-10T12:47:15.280
> 
> 标签：mysql, join, view

如何创建将不同列与不同表合并的视图？例如，我有三个表：用户、项目和礼物（在这个例子中，它是一个用户可以向另一个用户赠送礼物的系统）

`users`表包含有关用户的信息，`items`表包含有关项目的信息，`gifts`表显示哪个用户向哪个用户发送了什么礼物。

我想要的是创建如下视图：

```
user_from | user_to | gift_name  | gift_price
sally     | john    | Teddy Bear | 10 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-10T12:53:57.873

您必须先加入这三个表。例子

```
CREATE VIEW GiftsList
AS
SELECT  b.name user_from,
        c.name user_to,
        d.name gift_name,
        d.price gift_price
FROM    gift a
        INNER JOIN users b
            ON a.user_from = b.id
        INNER JOIN users c
            ON a.user_from = c.id
        INNER JOIN items d
            ON a.item = d.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-06T15:09:33.090

您可以创建一个包含两个表的视图，例如：

```
 CREATE VIEW giftList AS
 SELECT users.user_from,users.user_to,gifts.gift_name,gifts.gift_price FROM users,gifts
 WHERE users.user_id = gifts.user_id; 
```

where 子句是为了确保输出不重复。

# git - 始终使用寻呼机进行 git diff

> ID：12352049
> 
> 赞同：40
> 
> 时间：2012-09-10T12:47:27.913
> 
> 标签：git, git-diff, git-config

我使用[less](https://en.wikipedia.org/wiki/Less_(Unix))作为我的 Git 寻呼机。

如果`git diff`输出在一页上可读，我的 Git 会将输出打印到屏幕上。

`Ctrl`有时我输入+ `D`（向下半页）太快，这会杀死我的终端。`git diff`即使输出非常小，是否有启用寻呼机的选项？

这不起作用：

*   `git -p diff`
*   `git --paginate diff`
*   `git`设置：`pager.diff = true`

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-10T12:57:09.733

这是由`-F`( `--quit-if-one-screen`) 选项控制的。

如果or环境变量`FRSX`没有指定，Git 默认使用 for/of less 选项。要更改它，请指定选项并将其设置为：`$LESS``$GIT_PAGER``core.pager``RSX`

```
git config --global core.pager 'less -+F' 
```

* * *

旧版本的 Git 曾经在其文档中推荐以下内容：

```
git config --global core.pager 'less -+$LESS -RSX' 
```

# php - 在整个字符串中随机使用 preg_replace $limit ，而不仅仅是第一个 $limit 匹配？

> ID：12352054
> 
> 赞同：1
> 
> 时间：2012-09-10T12:47:53.210
> 
> 标签：php, preg-replace

我`preg_replace`只查找字符串的某些部分 3 次，但是我不希望它只匹配和替换前 3 个匹配项，而是在整个字符串中更加多样化。这可能吗？

例子：

```
$post ['post_content']=preg_replace ('/ pizza /',' <a href="http://www.example.com">pizza</a> ',$post['post_content'],3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:50:44.823

使用这样的东西（可能需要一些调整）：

```
$p = $post ['post_content'];
    if (preg_match_all('/ pizza /',$p, $matches)) {
    $rand = array_rand($matches[0], 2);
      foreach($rand as $rand_key) {
        $p=replace_num($matches[0][$rand_key], "XXX",$p, $rand_key+1);
      }

    }

    echo $p;

    function replace_num($from, $to, $string,$num) {
      $pos=-1;
      $i=0;
       while($pos!==false && $i<$num) {
            $pos = strpos($string, $from, $pos+1);
             $i++;
       }     
       if ($pos) {
         return substr($string, 0, $pos) . str_replace($from, $to, substr($string,$pos, strlen($from))) .  substr($string, $pos) ;

       }

    return $string;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:53:28.377

我认为你可以做到。但这将是一个多步骤的过程。

第一：做一个`preg_match_all()`而不是替换第二个：做X个array_rands来获得'pizza'字符串的位置并从那个位置开始替换一个（使用子字符串）。

我认为您必须在每次替换后重做匹配，因为字符串的长度每次都会改变。

不要忘记删除从数组 rand 返回的索引，这样它就不会被使用两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:04:44.903

跳过第 4 个参数，即限制 n 先通过[手册](http://php.net/manual/en/function.preg-replace.php)

**$limit：** 每个主题字符串中每个模式的最大可能替换。默认为 -1（无限制）。

# php - Ghostscript 9.06 错误

> ID：12352061
> 
> 赞同：1
> 
> 时间：2012-09-10T12:48:18.967
> 
> 标签：php, pdf, ghostscript

我已将 Ghostscript 从 9.02 版升级到 9.06 版，但出现关于字体的错误：

```
> 找不到（或无法打开）字体文件 /usr/share/ghostscript/9.06/Resource/Font/NimbusSanL-Regu。
> 找不到（或无法打开）字体文件 NimbusSanL-Regu。
> 找不到（或无法打开）字体文件 /usr/share/ghostscript/9.06/Resource/Font/NimbusSanL-Regu。
> 找不到（或无法打开）字体文件 NimbusSanL-Regu。
> 正在查询操作系统的字体文件...
> 从 /usr/share/fonts/default/Type1/n019003l.pfb 加载 NimbusSanL-Regu 字体... 4136044 2757274 2600856 1287906 3 完成。

```

这是我用来缩小 PDF 文件大小的代码：

```
system("/usr/local/bin/gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -dPDFSETTINGS=/screen -dColorImageDownsampleType=/Bicubic -dColorImageResolution=72 -dGrayImageDownsampleType=/Bicubic -dGrayImageResolution=72 -dMonoImageDownsampleType=/Bicubic -dMonoImageResolution=72 -sOutputFile=output2.pdf _document.pdf"); 
```

PDF 文件不是问题，因为我可以使用 9.02 版缩小它，但我不能使用 9.06 版。任何帮助，将不胜感激。

# ruby-on-rails - Rails 载波测试 - 测试后如何删除文件？

> ID：12352062
> 
> 赞同：1
> 
> 时间：2012-09-10T12:48:22.063
> 
> 标签：ruby-on-rails, rspec, capybara, carrierwave

我正在使用 rspec 和 capybara 测试载波上传功能。我有类似的东西：

```
describe "attachment" do
    let(:local_path)  { "my/file/path" }
    before do
      attach_file('Attachment file', local_path)
      click_button "Save changes"       
    end

    specify {user.attachment.should_not be_nil}
    it { should have_link('attachment', href: user.attachment_url) }
end 
```

这很好用。问题是在测试上传的图像后仍然在我的 public/uploads 目录中。测试完成后如何删除它？我试过这样的事情：

```
after do
   user.remove_attachment!
end 
```

但它没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:58:05.187

您不是唯一一个在删除carrierwave 中的文件时遇到问题的人。

我最终做了：

```
user.remove_attachment = true
user.save 
```

我[读到这个](https://github.com/jnicklas/carrierwave/issues/72)提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-11T17:47:08.493

似乎对我有用的更清洁的解决方案如下`spec/support/carrierwave.rb`：

```
uploads_test_path = Rails.root.join('uploads_test')

CarrierWave.configure do |config|
  config.root = uploads_test_path
end

RSpec.configure do |config|
  config.after(:suite) do
    FileUtils.rm_rf(Dir[uploads_test_path])
  end
end 
```

`store_dir`这会将整个根文件夹设置为特定于测试环境，并在套件之后将其全部删除，因此您不必`cache_dir`单独担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T15:07:11.097

哈！我今天找到了这个问题的答案。

下载文件的自动删除是在 after_commit 挂钩中完成的。默认情况下，这些不会在 rails 测试中运行。我永远不会猜到这一点。

然而，它在这里的附注中被随意记录：http: [//api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#method-i-after_commit](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#method-i-after_commit)

我通过使用调试器深入研究载波代码发现了这一点，当我进入它时，恰好在 after_commit 源代码上方的注释中注意到它。

谢天谢地，ruby 库不会像 JS 那样在运行时去掉注释。;)

文档中建议的解决方法是在您的 Gemfile 中包含**“test_after_commit”** gem，但仅在测试环境中。

IE

宝石文件：

```
...
gem 'test_after_commit', :group => :test
... 
```

当我这样做时，它完全解决了我的问题。

现在，我的清理通过后销毁断言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-08T16:48:16.090

该技术的[最新 CarrierWave 文档](https://github.com/carrierwaveuploader/carrierwave/wiki/how-to:-cleanup-after-your-rspec-tests)如下：

```
config.after(:suite) do
  if Rails.env.test? 
    FileUtils.rm_rf(Dir["#{Rails.root}/spec/support/uploads"])
  end 
end 
```

请注意，以上只是假设您使用`spec/support/uploads/`的是图像，并且您不介意删除该目录中的所有内容。如果每个上传者有不同的位置，您可能希望直接从（工厂）模型派生上传和缓存目录：

```
config.after(:suite) do
  # Get rid of the linked images
  if Rails.env.test? || Rails.env.cucumber?
    tmp = Factory(:brand)
    store_path = File.dirname(File.dirname(tmp.logo.url))
    temp_path = tmp.logo.cache_dir
    FileUtils.rm_rf(Dir["#{Rails.root}/public/#{store_path}/[^.]*"])
    FileUtils.rm_rf(Dir["#{temp_path}/[^.]*"])
  end
end 
```

或者，如果您想删除在初始化程序中设置的 CarrierWave 根目录下的所有内容，您可以执行以下操作：

```
config.after(:suite) do
  # Get rid of the linked images
  if Rails.env.test? || Rails.env.cucumber?
    FileUtils.rm_rf(CarrierWave::Uploader::Base.root)
  end
end 
```

# javascript - 我怎样才能结合这些代码？

> ID：12352067
> 
> 赞同：-3
> 
> 时间：2012-09-10T12:48:48.793
> 
> 标签：javascript, jquery, jquery-animate

正如标题所说，我认为这段代码可以用更少的行来简化。有人可以帮我解决这个问题吗？

```
 $('a[href=#over]').click(function(){
    $('html, body').animate({
        scrollTop: $("#over").offset().top - 100
    }, 2000);
});

$('a[href=#diensten]').click(function(){
    $('html, body').animate({
        scrollTop: $("#diensten").offset().top - 100
    }, 2000);
});

$('a[href=#portfolio]').click(function(){
    $('html, body').animate({
        scrollTop: $("#portfolio").offset().top - 100
    }, 2000);
});

$('a[href=#contact]').click(function(){
  $("html, body").animate({ scrollTop: $(document).height() }, 2000);
});

$('a[href=#top]').click(function(){
    $('html, body').animate({scrollTop:0}, 2000);
    return false;
}); 
```

我在想自己离开了 if/elseif 语句，但我有点卡在那里。那你能看看吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:52:30.407

您可以使用`href`锚点的属性通过 ID 选择元素。

```
$('a').click(function(){
    var id = this.href;
    $('html, body').animate({
        scrollTop: $(id).offset().top - 100
    }, 2000);
}); 
```

* * *

```
$('a').click(function(e) {
    e.preventDefault();
    var id = this.href;
    var scroll = '';
    if (id === '#contact') {
       scroll =  $(document).height();
    } else if (id === '#top') {
       scroll = 0;
    } else {
       scroll = $(id).offset().top - 100;
    }
    $('html, body').animate({
           scrollTop: scroll
    }, 2000)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T12:58:23.433

这没有经过测试。我缩小了（并稍微优化了一点）只是您的代码。

```
$('a[href]').click(function(){
    var href = $(this).attr('href');
    var htmlbody = $('html,body');
    if( href == '#over' || href == '#diensten' || href == '#portfolio' )
    htmlbody.animate({ scrollTop: $(href).offset().top - 100 }, 2000);
    if( href == '#contact' )
    htmlbody.animate({ scrollTop: $(document).height() }, 2000);
    if( href == '#top' )
    htmlbody.animate({ scrollTop: 0 }, 2000);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T12:58:41.070

```
$('a').click(function(){

    var id = $(this).attr("href");

    if(id in {"#over": 1, "#diensten": 1, "#portfolio": 1}) {
      $('html, body').animate({ scrollTop: $(this).offset().top - 100 }, 2000);
    } 
    else if(id === "#contact") {
       $("html, body").animate({ scrollTop: $(document).height() }, 2000);
    } 
    else {
      $('html, body').animate({scrollTop:0}, 2000);
      return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:59:35.733

由于您只是在巩固一个流程，因此有无数的答案。但如果您需要对目标进行微观管理，您可以执行以下操作：

```
function reusable_scroll_anchor( q_ids, q_off ) {
    for( var q_id in q_ids )(function(q_id) {
        $("a[href=#" + q_id + "]").click(function(){
            $('html, body').animate({
                scrollTop: $("#" + q_id).offset().top - q_off
            }, 2000);
        });
    })(q_ids[q_id]);
}

reusable_scroll_anchor(
    ['over', 'diensten', 'portfolio', 'contact', 'top' ], 
    100
); 
```

虽然这种方法需要一些人工管理，但它是未来网站的可重复使用的片段。

# javascript - onmouseout 没有正确触发

> ID：12352069
> 
> 赞同：0
> 
> 时间：2012-09-10T12:48:57.407
> 
> 标签：javascript, html, onmouseout

我有这段代码应该在鼠标悬停时触发，而在 onmouseout 上则相反：

```
colinc();

function colinc(){

    var hexnum=number.toString(16);
    var hexcolor="#"+hexnum+hexnum+hexnum;
    document.getElementById("c"+x).style.backgroundColor=hexcolor;
    number=number+8;
    if(number<=184)
        setTimeout(colinc,50);
} 
```

counter部分只有number=number-8的变化；并且数字>=40；问题是我有多个框应该在鼠标悬停时点亮颜色变化并在鼠标悬停时点亮。当我在我的盒子上缓慢移动（大号）时，一切都很好，但是当我快速移动时，有些盒子不会亮起来......如果我很快通过的话，似乎不会发生 onmouseout。有什么帮助吗？

```
function flash(x){
number=0;
var cc = document.getElementById("c"+x);
var cs=document.defaultView.getComputedStyle(cc,null);
var bg=cs.getPropertyValue('background-color');
var str=""+bg;
var n=str.replace("rgb","");
    n=n.replace("(","");
    n=n.replace(")","");
var arr=n.split(",");
number=parseInt(arr[0]);

colinc();

function colinc(){

    var hexnum=number.toString(16);
    var hexcolor="#"+hexnum+hexnum+hexnum;
    document.getElementById("c"+x).style.backgroundColor=hexcolor;
    number=number+8;
    if(number<=184)
        setTimeout(colinc,50);
}
}

function flashe(x){
number=0;
var cc = document.getElementById("c"+x);
var cs=document.defaultView.getComputedStyle(cc,null);
var bg=cs.getPropertyValue('background-color');
var str=""+bg;
var n=str.replace("rgb","");
    n=n.replace("(","");
    n=n.replace(")","");
var arr=n.split(",");
number=parseInt(arr[0]);

colinc();

function colinc(){

    var hexnum=number.toString(16);
    var hexcolor="#"+hexnum+hexnum+hexnum;
    document.getElementById("c"+x).style.backgroundColor=hexcolor;
    number=number-8;
    if(number>=40)
        setTimeout(colinc,40);
} 
```

}

这是我的完整 js 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:56:22.273

通过在控制台中记录事件来检查事件是否正确触发：

```
function MouseOverHandler(event) {
    console.log('mouseover');
}

function MouseOutHandler(event) {
    console.log('mouseout');
} 
```

当相反的事件发生时，您是否也曾停止执行任一处理程序。这将通过获取超时 ID 并取消它来完成。

```
var mouseOverTimeout, mouseOutTimeout;

function colinc(){
    clearTimeout(mouseOutTimeout);
    mouseOverTimeout = setTimeout(colinc,50);
}

function MouseOutHandler(event) {
    clearTimeout(mouseOverTimeout);
    mouseOutTimeout = setTimeout(MouseOutHandler,50);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:58:48.597

在您的代码中：

```
> function colinc(){
> 
>     var hexnum=number.toString(16); 
```

标识*符号*尚未声明或初始化，因此您收到参考错误并且脚本失败。在上述行之前，您可能应该添加：

```
 var number = 0; 
```

或给*number*一些其他值。

```
>     var hexcolor="#"+hexnum+hexnum+hexnum;
>     document.getElementById("c"+x).style.backgroundColor=hexcolor;
>     number=number+8;
>     if(number<=184)
>         setTimeout(colinc,50); 
```

但是在这里您需要访问全局*number*，因此您可以在闭包中保留引用或将*number*设为全局。如果您要这样做，请给它一个更好的名称，例如 *colnic_counter* 或不太可能与其他全局变量发生冲突的名称。

```
> } 
```

就像是：

```
var colinc = (function() {
    var num = 0;
    return function() {
        var hexnum = num.toString(16);
        var hexcolor = "#" + hexnum + hexnum + hexnum;
//        document.getElementById("c"+x).style.backgroundColor=hexcolor;
         console.log(hexcolor);
        num += 8;

        if (num <= 184)
            setTimeout(colinc,50);
    }
}());

colinc(); 
```

请注意，由于函数表达式用于初始化函数，因此您必须在之后调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:49:07.590

我已经解决了cleartimeout的问题。我创建了两个数组来根据它们的 ID 保存每个框的当前 mouseover 和 mouseout setTimeout id。每次调用 mouseout 时，它首先从数组中清除其对应的 mouseover，对于 mouseout 也是如此。

# sql - sql日期时间查询

> ID：12352070
> 
> 赞同：0
> 
> 时间：2012-09-10T12:48:59.223
> 
> 标签：sql, sql-server-2008, datetime

我有这种日期时间类型的表：`2010-09-16 00:32:41.960'`CreatedDate 列。

我需要执行一个查询 ... where [CreatedDate] >= '2010-09-16 00:32:41.960' 但这只是给了我

`The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.`

什么是正确的语法，自从我上次做 SQL 以来已经有一段时间了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:50:47.040

使用明确的日期时间格式，这样 SQL Server 就不必猜测如何转换它：

```
where [CreatedDate] >= '2010-09-16T00:32:41.960' 
```

遗憾的是，根据您的区域设置，它可能会将带有空格分隔符（而不是`T`）的表单解释为`YYYY-DD-MM hh:mm:ss`. 您的示例给出了超出范围的月份（以及月初日期的错误结果，除非天=月）

我通常会将安全格式列为：

*   `YYYYMMDD`
*   `YYYY-MM-DD'T'hh:mm:ss`
*   `YYYY-MM-DD'T'hh:mm:ss.mil`

`datetime2`如果转换为or ，现在还有一些其他格式是安全的`date`，但我不记得它们了，以上通常就足够了。

* * *

另一种选择是[`set dateformat`](http://msdn.microsoft.com/en-us/library/ms189491.aspx)在使用这些日期文字之前运行一条语句：

```
set dateformat mdy
select MONTH('2010-09-16 00:32:41.960') 
```

结果是给出`9`，而您所经历的可以通过以下方式重现：

```
set dateformat dmy
select MONTH('2010-09-16 00:32:41.960') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:50:45.613

尝试：

```
where [CreatedDate] >= CONVERT(datetime,'2010-09-16 00:32:41.960'); 
```

# vb.net - 母版页 asp.net 中的会话变量

> ID：12352071
> 
> 赞同：0
> 
> 时间：2012-09-10T12:49:03.803
> 
> 标签：vb.net, session, webforms, master-pages

我有一个登录页面，我想将用户名设置为会话变量，因为我想在我的 Web 应用程序的右上角显示它，并且我必须在所有内容页面中访问它。

我正在做的是在登录后，在母版页中设置一个会话变量，例如：

```
Session("nameUser") = Request.QueryString("nameUser") 
```

然后，当我第一次访问默认页面时，它工作正常。但是我将页面更改为另一个页面，它也继承了母版页，它崩溃并且错误说： `reference to object isn't established as an object instance`。我该如何解决这个问题？

我只想设置一个会话变量并在所有内容页面中使用它。（或者如果我不能，请将其设置到所有内容页面的母版页中）

编辑：

这是在我的登录页面中。如果登录正常，我会使用用户名作为参数向另一个页面发出请求。

```
Dim SQL As String = "SELECT * FROM Usuarios WHERE Identificacion='" & txtNomUsuario.Text & _
        "' AND Password='" & txtPasswordUsuario.Text & "'"

        Dim da As New SqlDataAdapter(SQL, cnn)
        Dim ds As New DataSet

        da.Fill(ds)

        If ds.Tables(0).Rows.Count() = 1 Then

            Dim nomUsuario As String = txtNomUsuario.Text

            Response.Redirect("Default.aspx?nomUsuario=" & nomUsuario)

        Else
            Response.Redirect("about:blank")

        End If 
```

我在母版页的初始化中这样做

```
Protected Sub Page_Init(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Init

        If Not IsPostBack Then
            If Request.QueryString("nomUsuario") <> Nothing Then
                Session("nomUsuario") = Request.QueryString("nomUsuario")
                lblUsuario.Text = Session("nomUsuario")
            Else
                lblUsuario.Text = Session("nomUsuario")
            End If

        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:32:25.390

这是因为在每个新页面上，MasterPage 都会检查 QueryString 变量“nameUser”。

最好在登录页面中设置 Session("nameUser")，因为它可以跨 Session 访问。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:56:31.430

只需从母版页中**删除**您的会话变量声明并在登录页面中声明它。希望这可以帮助，

```
Session("nameUser") = Request.QueryString("nameUser")

    Dim SQL As String = "SELECT * FROM Usuarios WHERE Identificacion='" & txtNomUsuario.Text & _
            "' AND Password='" & txtPasswordUsuario.Text & "'"

            Dim da As New SqlDataAdapter(SQL, cnn)
            Dim ds As New DataSet

            da.Fill(ds)

            If ds.Tables(0).Rows.Count() = 1 Then

                Dim nomUsuario As String = txtNomUsuario.Text

                Response.Redirect("Default.aspx?nomUsuario=" & nomUsuario)

            Else
                Response.Redirect("about:blank")

            End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:55:34.660

你为什么不尝试使用[HttpContext.User 属性](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

```
HttpContext.Current.User 
```

# ios - 如何在已经存在的模型中添加实体

> ID：12352077
> 
> 赞同：1
> 
> 时间：2012-09-10T12:49:30.597
> 
> 标签：ios, core-data

我有一个集成了核心日期的应用程序。我目前定义了 2 个实体，并且该应用程序已在应用程序商店中发布

在我的下一个版本中，我想在未来版本中再添加一个实体，但是当我在模拟器中运行应用程序时，我收到以下错误

用于开设商店的模型与用于创建商店的模型不兼容。

如果我想在我的模型中添加另一个实体，我应该怎么做。

我应该创建另一个模型对象吗？

注意：我不想丢失存储在现有模型中的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:58:56.700

您需要创建模型的新版本并进行迁移。（听起来可能很轻）。看看这个链接 [Apple Link](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:58:14.673

1.  为自动迁移设置 Persistent Store 选项：

将您的 persistentStoreCoordinator 创建更改为此（替换 YOURDB）：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

  if (persistentStoreCoordinator != nil) {
    return persistentStoreCoordinator;
  }

  NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"YOURDB.sqlite"]];

  // handle db upgrade
  NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
  [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
  [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

  NSError *error = nil;
  persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
  if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
    // Handle error
  }

  return persistentStoreCoordinator;
} 
```

1.  版本化您的数据模型并编辑新文件

    ```
     - (NSManagedObjectModel *)managedObjectModel {

         if (managedObjectModel != nil) {
               return managedObjectModel;
             }

           NSString *path = [[NSBundle mainBundle] pathForResource:@"YOURRESOURCENAME" ofType:@"momd"];
        NSURL *momURL = [NSURL fileURLWithPath:path];
                  managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:momURL];

              return managedObjectModel;
            } 
    ```

# c - 将 C .a 库包装到 xcode 包中

> ID：12352080
> 
> 赞同：1
> 
> 时间：2012-09-10T12:49:37.797
> 
> 标签：c, header, wrapper

我正在尝试将“.a”库的包装器创建到 xcode 包中。除了导入库头之外，一切似乎都运行良好。当在头文件中遇到这样的声明时，编译过程会卡住：

```
 HIK_EXPORT HIKCharacter        * HIK_API HIKCharacterCreate( const HIKCharacterDefinition *pCharacterDefinition, HIKMalloc pMalloc, const char *pValidationString); 
```

我得到的错误是

```
expected '=', ',', ';', 'asm' or '__attribute__' before '*' token 
```

我必须承认这是第一次看到这样的声明，所以我真的不知道该怎么办。希望有人可以帮忙^^谢谢

# android - 适用于 Android 项目的类似 iOS 的故事板工具？

> ID：12352083
> 
> 赞同：22
> 
> 时间：2012-09-10T12:49:51.297
> 
> 标签：android, user-interface, uistoryboard

我们，Android 开发人员，是否有任何像 iOS 开发人员一样的工具可以帮助我们制作所有活动的故事板以及它们之间的链接？

看过iOS故事板工具的人都知道我在说什么。这真的很酷，因为我们将能够可视化 UI 逻辑。

PS。检查我的`storyboard`标签

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T13:09:57.443

iOS[故事板](http://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/Storyboard.html)允许您定义应用程序的流程，而无需（几乎）使用 Interface Builder 编写一行代码。

我认为Android没有类似的工具。您需要单独创建布局，然后将它们粘合调用`startActivity`（或其亲属）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T12:54:51.523

我不太了解该工具，但我认为您正在寻找类似[FluidUI的工具](http://www.fluidui.com)

有几十种类似的工具，其中最好的仍然是笔+纸。

编辑：[Jimu](http://www.androiduipatterns.com/2013/03/could-jimu-be-missing-link-in-android.html)看起来很适合这个角色。

# javascript - Opera中选择的非活动状态

> ID：12352085
> 
> 赞同：0
> 
> 时间：2012-09-10T12:50:10.780
> 
> 标签：javascript, html, input, opera

我在 Opera 中有一个问题：当我`.select()`输入一个输入并单击其他输入后，我也在这样做`.select()`。在所有浏览器中，我都有正确的行为（一个输入选择了内容，但其他 - 没有）。

但在 Opera 我有以下内容：[https ://skitch.com/invis89/e1tue/screen-shot-2012-09-10-at-4.45.34-pm](https://skitch.com/invis89/e1tue/screen-shot-2012-09-10-at-4.45.34-pm)

只有当我试图通过鼠标在字段之间切换时。当我使用 Tab 键切换时 - 一切正常，我假设某些鼠标事件正在这样做......但究竟是什么 - 不知道。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:07:56.373

因此，当脚本创建一个选项时，Opera 会指示一个“非活动”的灰色选项。这是一个问题吗？

# android - 将图像共享到特定应用

> ID：12352086
> 
> 赞同：1
> 
> 时间：2012-09-10T12:50:11.180
> 
> 标签：android, eclipse, android-image

我想显示一个包含特定应用程序列表的对话框，并想与短信一起分享我的图片。

像这样的东西，但我只想添加几个，例如`Facebook`和`Twitter`。

我怎样才能做到这一点？

![我的形象](../Images/bc65204519c7b8d750c75a3ca2aea5a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:56:55.850

我认为要实现这一点，您需要使用特定应用程序创建自己的警报对话框，并在用户单击它时与该特定应用程序共享图片。

**编辑 ：** `sharingIntent.setType("text/plain");` `// for plain text`

```
 sharingIntent.setType("image/jpeg");   // For Jpeg Image 
```

> 可以使用“setType”方法定位特定应用程序，但这可能是一种冒险策略，如果用户没有安装这些特定应用程序，可能会导致问题。通过使共享功能尽可能通用，您可以让用户控制他们希望如何共享您的内容。坚持在 Android 应用程序中共享的标准行为也创造了直观的用户体验。

**编辑：** [看这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:02:18.557

我想你让你的客户对话来分享项目，或者这可能对你有帮助

```
 Intent shareIntent = new Intent();
                shareIntent.setType("application/bluetooth");
                // here use specific type of Application    
                startActivity(Intent.createChooser(shareIntent, "Share with")); 
```

# c# - 找不到类型或命名空间名称（XAML 的新功能）

> ID：12352088
> 
> 赞同：5
> 
> 时间：2012-09-10T12:50:25.723
> 
> 标签：c#, xml, xaml, visual-studio-2012, xml-namespaces

因此，我正在尝试使用 Visual Studio 2012 在 XAML 文档上开发一个非常简单的骰子应用程序，但我不知道如何处理该错误。我尝试使用位图图像添加；但它仍然无法正常工作。

以下是我得到的错误：

```
Error   1   Undefined namespace. The 'using' URI refers to a namespace 'DiceRoll' that could not be found.
Error   2   The type or namespace name 'BitmapImage' could not be found (are you missing a using directive or an assembly reference?) 
```

CS：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;
using BitmapImage;

// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234238

namespace DiceRoll
{
    /// <summary> 
    /// Interaction logic for MainWindow.xaml 
    /// </summary> 
    public partial class MainPage : Page
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Random num = new Random();
            int Number = num.Next(1, 7);
            BitmapImage Img = new BitmapImage(new Uri(@"DiceFaces\" + Number.ToString() + ".bmp", UriKind.Relative));

            textBlock1.Text = Number.ToString() + " Number";
            image1.Source = Img;

        }
    }
} 
```

XAML：

```
<Page
    x:Class="DiceRoll.MainPage"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DiceRoll"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <TextBlock Height="56" HorizontalAlignment="Left" Margin="275,134,0,0" Name="textBlock1"  VerticalAlignment="Top" Width="182" />
        <Button Content="Roll a Dice" Height="23" HorizontalAlignment="Left" Margin="194,151,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
        <Image Height="72" HorizontalAlignment="Left" Margin="195,56,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="74" />
    </Grid>

</Page> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:17:17.297

尝试

```
using System.Windows.Media.Imaging.BitmapImage; 
```

代替

```
using BitmapImage; 
```

一种更简单的方法是让 Visual Studio 为您完成：右键单击代码中的 BitmapImage -> 解析，然后选择正确的命名空间（通常只有一个）

对于 xaml，让 Visual Studio 也为您完成，或者：

```
<Page ...
    xmlns:local="clr-namespace:System.Windows;assembly=DiceRoll"
/> 
```

# linq - LINQ – 嵌套（地址和城市）查询

> ID：12352089
> 
> 赞同：0
> 
> 时间：2012-09-10T12:50:25.917
> 
> 标签：linq, entity-framework

我有一个项目的问题。我正在尝试获取位于特定国家或城市的公司列表。

表结构：

**公司**

```
CompanyID
CompanyName
etc… 
```

**CompanyAddressDetails**（关系表）

```
Company_CompanyID
CorrespondingAddress_AddressID 
```

**对应地址**：

```
AddressID
StreetName
RegionID
etc… 
```

**地区**

```
RegionID
RegionName
RegionRegionTypeID 
```

**RegionDetails**（关系表）

```
RegionParent
RegionChild 
```

因此，要在示例 Stockholm 中找到一个地址（在 Region 表中的 ID 为 1198），我会这样做：

```
var addresses = from c in db.CorrespondingAddress select c;
addresses = addresses.Where(s => s.RegionID.Equals(1198)); 
```

要在斯德哥尔摩找到一家公司，我会这样做：

```
companyModel = from c in db.Company select c;
companyModel =  companyModel.Where(s => s.CorrespondingAddress.Any(x => x.RegionID.Equals(1198))); 
```

但现在我想考虑 RegionDetails 表（它有一个父和子，例如：1（瑞典）是父，1198（斯德哥尔摩）是子等）

如何找到位于瑞典但地址行中 ID 为 1198（斯德哥尔摩）的公司？

在普通的 SQL 中，我可能会做类似的事情：

```
SELECT CompanyName FROM Company
LEFT JOIN CompanyAddressDetails ON (Company.CompanyID = CompanyAddressDetails.Company_CompanyID)
LEFT JOIN CorrespondingAddress ON (CompanyAddressDetails.CorrespondingAddress_AddressID = CorrespondingAddress.AddressID)
LEFT JOIN Region ON (CorrespondingAddress.RegionID = Region.RegionID)
WHERE CorrespondingAddress IN (SELECT RegionChild FROM RegionDetails WHERE RegionParent = 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:40:48.273

由于没有详细信息表（多对多关系表）的模型，因此我使用以下方法解决了它：

```
companyModel = companyModel.Where(s => s.CorrespondingAddress.Any(x => x.Region.RegionParent.Any(d => d.RegionID == region))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:04:33.243

首先，以下代码可以重构为一行：

```
companyModel = from c in db.Company select c;
companyModel =  companyModel.Where(s => s.CorrespondingAddress.Any(x => x.RegionID.Equals(1198))); 
```

你不能再嵌套一个`Any`吗？

```
companyModel = db.Company.Where(s => s.CorrespondingAddress.Any(x => x.Region.Any(r => r.RegionDetails.Any(rd => rd.Parent == 1 && rd.Child == 1198))); 
```

**编辑**

给定 的以下性质`CorrespondingAddress`：

```
public virtual Region Region { get; set; } 
```

并假设`Region`有一个属性 RegionDetails （使 Region -> RegionDetails 一对一）：

```
public virtual RegionDetails RegionDetails{ get; set; } 
```

以下应该有效：

```
companyModel = db.Company.Where(s => s.CorrespondingAddress.Any(x => x.Region.RegionDetails.RegionParent == 1 && x.Region.RegionDetails.RegionChild == 1198))); 
```

# java - Webdriver 错误“驱动程序信息：driver.version：未知”

> ID：12352100
> 
> 赞同：0
> 
> 时间：2012-09-10T12:51:04.647
> 
> 标签：java, webdriver, pageobjects

我正在尝试从[Page-Objects Example运行示例](https://github.com/michal-lipski/page-objects-webdriver.git)

它在 Windows 7 上运行良好，但是当我尝试在 Linux（Fedora 15）上运行它时出现错误：

```
GitHubLoginTest (1)
com.example.test.GitHubLoginTest
should_not_login_with_wrong_credentials(com.example.test.GitHubLoginTest)
org.openqa.selenium.TimeoutException: Timed out after 30 seconds waiting for title to contain "GitHub � Social Coding". Current title: "GitHub · Social Coding"
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.43.5-2.fc15.x86_64', java.version: '1.6.0_35'
Driver info: driver.version: unknown
    at org.openqa.selenium.support.ui.FluentWait.timeoutException(FluentWait.java:255)
    at org.openqa.selenium.support.ui.FluentWait.timeoutException(FluentWait.java:270)
    at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:222)
    at com.example.pageobjects.GitHubPage.waitForPageToLoad(GitHubPage.java:40)
    at com.example.pageobjects.GitHubPage.openPage(GitHubPage.java:30)
    at com.example.pageobjects.GitHubHomePage.open(GitHubHomePage.java:31)
    at com.example.test.GitHubLoginTest.should_not_login_with_wrong_credentials(GitHubLoginTest.java:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我尝试将 System.setProperty 设置为：

```
 System.setProperty("webdriver.chrome.driver", "workspace/libs/chromedriver"); 
```

但是得到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:59:54.760

它实际上是通过在 Eclipse 中设置编码为 UTF-8 来解决的

# jquery - 如何使用 JQuery 显示和隐藏段落？

> ID：12352104
> 
> 赞同：-3
> 
> 时间：2012-09-10T12:51:12.380
> 
> 标签：jquery, hide, show, fadein, fadeout

我想使用 JQuery 方法显示和隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:52:08.440

使用 .show() 和 .hide() 方法

```
$("#id").show("fold",{},1000);
$("#id").hide("fold",{},1000); 
```

参考：http: [//jqueryui.com/demos/hide/](http://jqueryui.com/demos/hide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:53:54.400

使用 .show() 和 .hide()

例如，隐藏它：

```
<p class="myParagraph">This is some paragraph that you want to hide</p>
<script type="text/javascript">
    $(document).ready(function() {
        $('.myParagraph').hide();
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T12:54:41.333

把你的段落放进去

并尝试此代码

```
$(document).ready(function(){
        $('button_hide_show').click(function(){
         $("p").toggle();
  });
}) 
```

# sql - Oracle 11g 无效标识符错误

> ID：12352108
> 
> 赞同：0
> 
> 时间：2012-09-10T12:51:28.410
> 
> 标签：sql, oracle

此查询适用于 Oracle Database 10g Enterprise Edition Release 10.2.0.2.0 - 64bi 但不适用于 Oracle Database 11g Release 11.2.0.1.0 - 64bit Production

```
select * 
  from inb_dosya_turu dosya_turu
 where dosya_turu.adi like 'S%'
   or dosya_turu.id in (select 350 from dual) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:27:53.000

我意识到这个问题是由于语言设置而发生的。语言设置的脚本如下。升级 11.2.0.3 后，脚本开始正常工作。我将查询更改为在 SCOTT 模式中查询

```
alter session set nls_sort = 'TURKISH_AI';
alter session set nls_comp = 'linguistic';

select * from SCOTT.BONUS bonusa
where bonusa.ename like 'S%'
or bonusa.JOB in (select 350 from dual) 
```

# ios - 比较 NSString 和整数？

> ID：12352112
> 
> 赞同：1
> 
> 时间：2012-09-10T12:51:40.360
> 
> 标签：ios, nsstring, integer

我有一个字符串需要与整数值进行比较。

到目前为止我这样做了：

```
NSString *rad = [NSString stringWithFormat: @"%@", combo.selectedText];
srchParam.radius = rad;
if (srchparam.radius > 5)
{
    //code here
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:36:45.250

试试这个：

```
if ([combo.selectedText intValue] > 5) {
   //code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:52:28.783

```
srchParam.radius = [rad intValue]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T12:54:22.627

是的。使用运算符比较 NSString`<`将比较它的内存地址，而不是神奇地比较它的内容（记住：Objective-C 不是 C++，没有运算符重载）。您必须使用将字符串的*数值*与另一个整数进行比较

```
if (([srchparam.radius intValue]) > 5)
{
     // code here
} 
```

另外，请使用空格 - 您的代码会更好，更容易阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T12:54:33.147

我猜半径在这里是一个整数。因此 ：

```
NSString *rad=[NSString stringWithFormat:@"%@",combo.selectedText];
srchParam.radius =[rad intValue];
if((srchparam.radius)>5)
{
 //code here
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T12:55:00.340

```
NSString *rad=[NSString stringWithFormat:@"%@",combo.selectedText];
if([rad intValue]>5)
{
 //code here
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T12:55:14.003

那是对的！

```
if([[srchparam.radius] integerValue] > 5) 
```

如果您仍在使用 Xcode 4.4，则此示例在 Xcode 4.5 和 iOS SDK 6.0 中工作，只需更改**intValue**上的**integerValue 即可**。

# hibernate - HIbernate Annotations - 条件查询 - 加载惰性属性失败

> ID：12352116
> 
> 赞同：0
> 
> 时间：2012-09-10T12:52:02.353
> 
> 标签：hibernate, criteria-api

我正在尝试将 2 个类关联如下

描述的代码示例如下 Bill Class

```
public class Bill {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO )
    private long id;
    private long billNumber;
    private BillType billType;
    @OneToOne
    private Customer billCustomer;

//getter and setter omitted
} 
```

客户类别的定义是

```
public class Customer {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;
    private String customerRef;
    @OneToMany(fetch = FetchType.EAGER)
    private List<Bill> customerBills;} 
```

当我尝试使用标准 API 检索对象时，将检索关联的对象。

```
Bill bill = (Bill) session.createCriteria(Bill.class)
                .add(Restrictions.eq("billNumber", BILL_NUMBER)).uniqueResult(); 
```

当我验证与客户关联的账单大小时，它被检索为空。（但 1 张账单与客户相关联）

```
Assert.assertEquals(1,bill.getBillCustomer().getCustomerBills().size()); 
```

（上述条件失败），但是当我用其他方式验证时，它成功了

```
List<Bill> billList = session.createCriteria(Customer.class)
                .add(Restrictions.eq("customerRef",CUSTOMER_REF)).list();
        Assert.assertEquals(1,billList.size()); 
```

我急切地加载了这些对象。我无法弄清楚我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:01:02.700

你的映射是错误的。如果关联是一对多的双向关联，则一侧必须定义为`OneToMany`，另一侧定义为`ManyToOne`(not `OneToOne`)。

此外，双向关联总是有所有者方和反方。反面是具有`mappedBy`属性的一面。在 OneToMany 的情况下，反面必须是一侧。所以映射应该是：

```
@ManyToOne
private Customer billCustomer;

...

@OneToMany(fetch = FetchType.EAGER, mappedBy = "billCustomer")
private List<Bill> customerBills; 
```

这个映射在[hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-bidirectional)中描述。

# c# - TCP客户端问题

> ID：12352125
> 
> 赞同：2
> 
> 时间：2012-09-10T12:52:21.903
> 
> 标签：c#, sockets, tcpclient, tcpserver

我在 c# 中的 TCP 客户端应用程序返回中面临一个大问题。正常情况下它工作正常，但在某些情况下服务器向特定客户端发送同时响应，所以这种情况下所有同时响应都作为单个消息在客户端接收。所以这种情况下客户端无法识别单个消息。因此，在这种情况下，我的客户端应用程序无法处理特定活动。是否可以在客户端读取单个消息？所以为了解决这个问题，我有一些选择，但我不知道这是否是正确的方法。

1- 在客户端使用固定长度的缓冲区（但我的消息是可变长度的）。

2-为每个响应消息添加分隔符。

如果有人知道解决此类问题的解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:06:32.890

TCP是基于流的，您从客户端获取数据流到服务器。如果您无法构建一个应用程序协议来确保发送的每条消息都是分开的（这对于 TCP 来说通常不是一个明智的想法），那么您需要“反序列化”您对流的期望。

因此，您需要在每条消息中发送一些允许您区分数据的内容。这通常在每条消息的开头使用标记或类型数据来完成。有时一个字节就可以了（取决于你有多少不同的消息类型）。然后，您从流中读取该字节并决定接下来要反序列化什么。例如，如果你想发送一个字符串，你可以序列化 '1'，然后`string`. 如果要发送日期/时间，可以序列化 '2' 然后`DateTime`. 在服务器上，如果这两个对象几乎同时发送，您可以简单地反序列化`byte`，如果是 '1'，反序列化 a `string`，然后继续反序列化：获取下一个`byte`，如果是 '2'，反序列化一个`DateTime`。

重要的是要记住 TCP 是基于流的协议，而不是基于消息的协议。基于消息的需要在应用程序级别实现——例如上面的东西。

“序列化”和“反序列化”是指典型的内置序列化器和反序列化器，如.NET 文档中的[序列化对象中所述。](http://msdn.microsoft.com/en-us/library/7ay27kt9%28VS.71%29.aspx)对于 JSON.NET 等库中包含的 JSON 序列化程序或内置的`DataContractJsonSerializer`和`JavaScriptSerializer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:35:48.543

Just make sure that each message has its length as first few bytes, this way you can split the whole into single messages.

For example, suppose that you receive this 20 bytes message from your server:

```
 (1)                                     (2)
0   1   2   3   4   5   6   7   8   9   0   1   2   3   4   5   6   7   8   9   0

+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 2 | 4 | 6 | 1 | 5 | 3 | 3 | 2 | 6 | 3 | 4 | 1 | 6 | 2 | 3 | 5 | 3 | 0 | 4 | 6 |
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
  ^           ^       ^               ^               ^           ^ 
```

*   The first byte says that the first message has 2 bytes of data, so you can retrieve that message as bytes 1 and 2.
*   Next you read byte 3 which tells you that the second message has only 1 byte of additional data (byte 4).
*   The third and the fourth message have 3 bytes of data (as bytes 5 and 9 indicate), then there's a 2 bytes message and a 3 bytes one.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T13:44:14.230

使用至少包含正文​​长度的固定长度标头是最简单的方法。然后根据正文，您可能需要其他信息（例如类型名称，如果您想使用 JSON 之类的东西来序列化/反序列化实际消息）。

如果您不想自己处理所有事情，您可以使用像[我](http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/)这样的网络库。向下滚动到文章末尾以查看 JSON RPC 示例实现。您可以利用其中的大部分来获得基于 JSON 的通信渠道。

# grails - grails 数据库迁移 - dbm-gorm-diff 未使用 --add 更新 changelog.xml

> ID：12352130
> 
> 赞同：0
> 
> 时间：2012-09-10T12:52:29.977
> 
> 标签：grails

我们希望通过扩展我们的 Jenkins (Hudson) 构建来自动将域对象更改迁移到实时数据库。

我已经通过从域对象生成更改日志、进行更改并生成 difflog 来尝试使用数据库迁移插件。生成 groovy 文件时，它按定义工作，并且 changelog.groovy 被更新以包含 difflog。

但是，我决定生成 liquibase xml 文件，基于 Ant 对 liquibase 的支持。我的结论是，我必须创建一个无头（批处理）Grails 应用程序才能在构建脚本中使用这些 groovy 文件。

但是，当我运行“dbm-gorm-dif difflog.xml --add”时，changelog.xml 不会更新为包含 difflog.xml。然而，文档暗示更新适用于 groovy 和 xml 文件。我可以手动添加它，它可以工作，但我需要自动化这个过程。

我在 Config.groovy grails.plugin.databasemigration.changelogFileName = 'changelog.xml' 中设置了以下内容

有什么我没有做的，还是手册不太正确？

问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:11:01.073

这已在版本 1.2.2 中修复，因此在使用此版本或更高版本时不再是问题。

# javascript - Lawnchair.js - 从“存在”方法中检索布尔值

> ID：12352132
> 
> 赞同：-1
> 
> 时间：2012-09-10T12:52:33.200
> 
> 标签：javascript, jquery, json

对于那些使用或曾经使用过[此](http://brian.io/lawnchair/)代码的人，请告诉我如何从函数中获取`boolean`值。`exists`它返回一个对象，我在其中找不到任何`boolean`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:57:09.383

从来没有用过这个，但在一次点击中找到了这个。

```
searching keys is annoying and tedious. gawd! but wait...

// test for existence of a key
lawnchair(function(){
  this.exists('my-key-name', function(exists) {
    console.log(exists)
  })
}) 
```

这会打印到您的控制台中吗？删除字符串应该有助于调试问题。

**编辑**- 在挖掘之后，该函数有两个定义`exists`。

```
exists: function (key, cb) {
  this.lambda(cb).call(this, !!(store[key]))
  return this
} 
```

和

```
exists: function (key, cb) {
    var exists = this.indexer.find(this.name+'.'+key) === false ? false : true ;
    this.lambda(cb).call(this, exists);
    return this;
} 
```

它们都应该返回布尔值。第一个可能有点可疑。没有把握。尝试在 Lawnchair 函数中包含带有注释和断点的扩展 JS 版本。你很快就会发现发生了什么。

在这里睡觉:) 祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:57:17.783

从未使用过它，但[文档建议](http://brian.io/lawnchair/finding/)您的回调函数`exists`将接收一个布尔参数：

```
// test for existence of a key
lawnchair(function(){
    this.exists('my-key-name', function(exists) {
        console.log('existence is: ' + exists)
    })
}) 
```

# c++ - sscanf : 从出现次数未知的模式中检索 int

> ID：12352134
> 
> 赞同：2
> 
> 时间：2012-09-10T12:53:01.707
> 
> 标签：c++, scanf

我用 fstream 读取了一个 ascii 文件。一行包含以下模式的至少两次重复（最多 128 次）：

```
 %d %llu %d %d %llu %d %d %llu 
```

对于每一行，我需要该行中每个模式的第三个 %d 的最大值

我找不到使用 sscanf 正确执行此操作的方法。

```
myFstreams->getline (buffer, MAX_BUFF-1);
while( ... ){
    sscanf (buffer," %*d %*llu %*d %d %*llu %*d %*d %*llu",&number);
    if(number>max) max=number;
    //modify buffer ???
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:57:06.537

您的方法看起来不错，用于`%*`抑制分配的荣誉。

您需要添加代码来检查 的返回值`sscanf()`，并循环直到它失败（即它不返回`1`）。在循环中，通过将每个转换后的值与您迄今为止看到的最大值进行比较来保持最大值。

**更新**：我意识到我没有考虑同一行方面的重复模式。哦。我认为一种解决方案是`%n`在模式的末尾使用说明符。这将写入（通过和`int *`参数）处理的字符数，从而允许您在下一次调用的行中前进`sscanf()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:14:16.553

类似的东西怎么样：（未经测试的代码）

```
#include <limits>
#include <sstream>
...

std::string line;
while(std::getline(input_stream,line))//delimit by /n
{
    auto line_ss = std::stringstream(line);
    std::string token;
    int number = std::numeric_limits<int>::min();
    int k=0;
    while(std::getline(line_ss,token,' '))//delimit by space
    {
        if(k == 3) // 3rd number
        {
            int i3;
            std::stringstream(token) >> i3; 
            number = std::max(number,i3)
        }

        k = k == 7 ? 0: k+1; //8 numbers in the set
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:28:29.237

有一种“秘密”类型由 使用`scanf`而不被使用`printf`，这就是为什么它经常被遗忘：`%n`

```
while( ... )
{
    //%n gives number of bytes read so far
    int bytesRead =0;
    sscanf (buffer," %*d %*llu %*d %d %*llu %*d %*d %*llu%n",&number, &bytesRead);
    if(number>max)
        max=number;
    buffer +=bytesRead;//be cautious here if using UTF-8 or other MCBS
} 
```

# json - Windows Azure 移动服务时间（mssql）JSON 序列化错误

> ID：12352137
> 
> 赞同：0
> 
> 时间：2012-09-10T12:53:07.753
> 
> 标签：json, azure, windows-runtime, azure-mobile-services

我在 SQL 中遇到时间数据类型的问题。我正在使用这里描述的 TimespanConverter [http://blogs.msdn.com/b/carlosfigueira/archive/2012/08/30/supporting-arbitrary-types-in-azure-mobile-services-managed-client-simple -types.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/08/30/supporting-arbitrary-types-in-azure-mobile-services-managed-client-simple-types.aspx)可以很好地插入数据，但是在检索它时会返回通用格式的 DateTime（没有正确位置的时间）。例如，“14:45:00”的时间将返回“0013-12-31T00:00:00.000Z”，而对于更早的时间，例如“09:00:00”，则返回 null。

还有其他人面临同样的问题吗？

提前致谢！

（也在这里发布：http: [//social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/5110ed4b-7912-49d9-9e6c-9acd9277d52b](http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/5110ed4b-7912-49d9-9e6c-9acd9277d52b)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:55:30.413

这已被确认为 Microsoft 的 Node JS SQL 驱动程序的问题：

> “我能够在 node-sqlserver 本身中重现该问题。我们将进行修复。感谢您引起我们的注意。”
> 
> 来自[http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/5110ed4b-7912-49d9-9e6c-9acd9277d52b](http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/5110ed4b-7912-49d9-9e6c-9acd9277d52b)

# silverlight - 将网格绑定到对象列表列表

> ID：12352142
> 
> 赞同：0
> 
> 时间：2012-09-10T12:53:16.143
> 
> 标签：silverlight, list, binding, grid

我有一个 ObservableCollection> myData

假设 MyObject 有 5 个属性：Prop1、Prop2、Prop3、Prop4、Prop5

我想在网格中显示这些列表，如下所示：

----myData[0] (一个列表)------|----myData[1] (一个列表)-----|

道具1 | 道具2 | 道具3 | 提案 4 | 提案 5 | 道具1 | 道具2 | 道具3 | 提案 4 | 提案 5 |

我应该如何绑定我的列显示正确 List of MyObject 的数据？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:15:46.593

我认为您的问题与此类似： [prism/mvvm: binding Columns to DataGrid](https://stackoverflow.com/questions/4367264/prism-mvvm-binding-columns-to-datagrid)

# javascript - 从 jQuery 1.6.2 升级到 1.8.1 后 jQuery 自动完成定位错误

> ID：12352143
> 
> 赞同：3
> 
> 时间：2012-09-10T12:53:16.503
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete

我使用的是 jQuery 1.6.2，所有带有自动完成功能的东西都很棒。

但是我需要将jQuery升级到最新版本1.8.1，因为其他脚本和自动完成突然开始出现在左边：0; 和顶部：0；位置（在屏幕左上角）

然后我搜索了互联网并在这里关注了这个主题：

[jquery ui自动完成定位错误](https://stackoverflow.com/questions/2560205/jquery-ui-autocomplete-positioning-wrong)

实际上，在将 jQuery UI 升级到最新版本并将 position.js 添加到标题后，左侧位置计算正常，但顶部位置仍然是错误的，并且 0 而不是例如 224px。

如果我切换回 jQuery 1.6.2（只需在我的标题中更改要加载的文件的名称），自动完成功能再次很好，它位于输入框下的正确位置。

但问题是我必须更新我的 jQuery，因为我的网站上还有其他需要最新 jQuery 1.8.1 版本的东西。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:06:18.970

我创建了一个[jsfiddle](http://jsfiddle.net/WpeTf/1/)以显示它正在与 jquery 1.8.2 和 jquery ui 一起使用，没有进一步的错误修复。

# php - Symfony2：自定义配置根

> ID：12352147
> 
> 赞同：5
> 
> 时间：2012-09-10T12:53:29.407
> 
> 标签：php, symfony

我的应用程序由多个名为`HelloWorldAdminBundle`, `HelloWorldUserBundle`,的包组成`HelloWorldDemoBundle`。这会产生一个配置根，如`hello_world_demo`,`hello_world_user`和`hello_world_demo`。我希望我的包的配置根是`helloworld_demo`,`helloworld_user`和`helloworld_admin`. 在这一点上我不得不提到，这并不是一个真正的技术问题，而更多的是一个审美问题。

我试图实现一个自定义扩展并将其注册到 Bundle 中：

```
public function build(ContainerBuilder $container)
{
    parent::build($container);

    $container->registerExtension(new HelloworldDemoExtension());
} 
```

扩展：

```
...
class HelloworldDemoExtension extends Extension
{
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');
    }

    public function getAlias()
    {
        return 'hello_world_demo';
    }
} 
```

最后是配置：

```
...
class Configuration implements ConfigurationInterface
{
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('helloworld_demo');
        ...
        return $treeBuilder;
    }
} 
```

我按照[如何为 Bundle 公开语义配置](http://symfony.com/doc/2.0/cookbook/bundles/extension.html)的说明进行操作，但是当我向其中添加项目时，`config.yml`出现以下错误：

```
There is no extension able to load the configuration for "helloworld_demo" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:33:10.997

我找到了解决我的问题的方法。它的工作原理与我在问题中描述的完全一样，但是，**必须**存在默认扩展名（带有捆绑包的名称）。

我现在有一个空的但现有的扩展名为 HelloWorldDemoExtension （带有别名`hello_world_demo`，另外我添加了 DemoExtension （带有别名`helloworld_demo`）并且它可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-14T15:38:54.330

我通过覆盖解决了这个问题[`Symfony\Component\HttpKernel\Bundle\Bundle#getContainerExtension()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Bundle/Bundle.php#L72)。

此方法自动创建并返回 的实例`ExtensionInterface`，并检查扩展的别名（您可以通过`getAlias`在扩展类中实现来指定，根据[Carlos Granados 的](https://stackoverflow.com/users/1557651/carlos-granados)回答）是否符合命名约定。

因此，通过覆盖`getContainerExtension()`你的包类中的方法，并简单地返回你的扩展类的一个实例，你可以绕过检查和`LogicException`.

这就是你的 bundle 类的样子：

```
<?php

namespace HelloWorld\Bundle\UserBundle;

use HelloWorld\Bundle\UserBundle\DependencyInjection\HelloWorldUserExtension;
use Symfony\Component\HttpKernel\Bundle\Bundle;

class HelloWorldUserBundle extends Bundle
{
    public function getContainerExtension()
    {
        if (null === $this->extension) {
            $this->extension = new HelloWorldUserExtension();
        }

        return $this->extension;
    }
} 
```

而且，当然，不要忘记将其添加到您的扩展类中：

```
/**
 * The extension alias
 *
 * @return string
 */
public function getAlias()
{
    return 'helloworld_user';
} 
```

**警告**：我不确定为什么将此检查添加到`getContainerExtension()`方法中。可能有一个非常正当的理由，并且您在执行上述步骤时可能会遇到问题。但是，到目前为止，我还没有遇到任何问题。

**编辑**：另请参阅：[Symfony2：我不喜欢 Bundles 的一些事情](http://php-and-symfony.matthiasnoback.nl/2013/10/symfony2-some-things-i-dont-like-about-bundles/)。这篇博客文章提供了与我的答案相同的解决方案。此外，请参阅Symfony 文档的[此拉取请求，其中也描述了相同的方法。](https://github.com/symfony/symfony-docs/pull/3894/files#diff-b81c044e869806d3811de25c35bc3fc7R51)这让我相信这样做是安全的，而不必担心副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:01:30.540

正如[文件](http://symfony.com/doc/2.0/cookbook/bundles/extension.html#extension-conventions)所说：

> 创建扩展时，请遵循以下简单约定：
> 
> *   扩展必须存储在 DependencyInjection 子命名空间中；
> *   扩展名必须以bundle名命名，并以Extension为后缀（AcmeHelloExtension for AcmeHelloBundle）；
> *   扩展应提供 XSD 架构。

我真的不知道你是否需要定义自己的`build`和`getAlias`方法。如果您需要它，那么`getAlias`方法应该返回与您在根节点中定义的相同的值。所以它应该是`helloworld_demo`可能而不是`hello_world_demo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T13:22:44.377

从书中“在这种情况下，扩展类还必须实现一个 getAlias() 方法并返回一个以捆绑包命名的唯一别名（例如 acme_hello）。这是必需的，因为类名以 Extension 结尾不符合标准. 此外，只有当用户在至少一个配置文件中指定 acme_hello 别名时，才会调用扩展的 load() 方法。”

因此，此别名是根配置名称。将您的代码更改为

```
public function getAlias()
{
    return 'helloworld_demo';
} 
```

它应该工作

# java - 如何在数组java中找到最大的三个数字？

> ID：12352151
> 
> 赞同：0
> 
> 时间：2012-09-10T12:53:37.020
> 
> 标签：java, arrays

我有一个数字数组，我需要三个具有相应索引值的数字中**最大的一个。**我有一个这样的数组：

```
int [] value = new int[5];
value[0] = 8;
value[1] = 3;
value[2] = 5;
value[3] = 2;
value[4] = 7; 
```

如何找到最大的数字及其索引值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T13:01:15.470

我怀疑这是家庭作业，所以我会提供一些帮助，但不是完整的解决方案。

您需要最大的三个数字，以及它们的索引值吗？

好吧，遍历数组，记录到目前为止你找到的最高的三个数字。还要跟踪他们的索引号。

您可以首先对最大的数字及其索引执行此操作。那应该很容易。它需要两个变量，例如`BiggestNumber`和`indexOfBiggestNumber`。从找到最大的数字（微不足道）开始，然后添加一些代码来记住它的索引。

一旦你有了它，你可以添加更多代码来跟踪第二大数字和它的索引。

在那之后，你对第三大的数字做同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:39:56.097

我已经为你完成了，这很有效。

这是完整的代码：

```
import java.util.Arrays;

class tester {
    public static void main(String[] args) {
        int[] value = new int[5];
        value[0] = 8;
        value[1] = 3;
        value[2] = 5;
        value[3] = 2;
        value[4] = 7;
        int size = value.length;
        int[] temp = (int[]) value.clone();
        Arrays.sort(temp);
        for (int i = 0; i < 3; i++) {
            System.out.println("value: " + temp[size - (i + 1)] +
                    " index " + getIndex(value, temp[size - (i + 1)]));
        }
    }

    static int getIndex(int[] value, int v) {
        int temp = 0;
        for (int i = 0; i < value.length; i++) {
            if (value[i] == v) {
                temp = i;
                break;
            }
        }
        return temp;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:18:28.273

**无需**遍历数组并跟踪这么多变量，您可以利用已经实现的方法，如下所示。

我建议使用 List ，`Map.Entry<key,value >` `(where key=index and value=number)`然后`Comparator`使用重写的`compare`方法实现接口（对值进行排序）。实施后，只需对列表进行排序。

```
public static void main(String[] args) {
    int[] value = {5, 3, 12, 12, 7};
    Map<Integer, Integer> map = new HashMap<Integer, Integer>();
    for (int k = 0; k < value.length; k++)
        map.put(k, value[k]);

    List<Map.Entry<Integer, Integer>> list =
            new LinkedList<Map.Entry<Integer, Integer>>(map.entrySet());

    Collections.sort(list, new Comparator<Map.Entry<Integer, Integer>>() {
        @Override
        public int compare(
                Entry<Integer, Integer> e1,
                Entry<Integer, Integer> e2) {
            return e2.getValue().compareTo(e1.getValue());
        }
    });

    for (Entry<Integer, Integer> lValue : list)
        System.out.println("value = " + lValue.getValue()
                + " , Index = " + lValue.getKey());
} 
```

**结果：**

```
value = 12 , Index = 2
value = 12 , Index = 3
value = 7 , Index = 4
value = 5 , Index = 0
value = 3 , Index = 1 
```

***通过这种方法，您可以获得前 N 个最大的数字及其索引。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:56:17.767

要获得最大的三个，基本上，你排序，然后选择最后三个条目。

获取他们的索引需要更多的工作，但绝对是可行的。只需将数字及其索引捆绑在一个 Comparable 中，其`compareTo`功能只关心数字。排序，得到最后三个项目，现在你有了每个数字*和*它的索引。

```
class IntWithIndex implements Comparable<IntWithIndex> {
    public int number, index;
    public IntWithIndex(number, index) {
        this.number = number;
        this.index  = index;
    }
    public int compareTo(IntWithIndex other) {
        return number - other.number;
    }
}

...
IntWithIndex iwi[] = new IntWithIndex[yourNumbers.length];
for (int i = 0; i < yourNumbers.length; ++i) {
    iwi[i] = new IntWithIndex(yourNumbers[i], i);
}
Arrays.sort(iwi);

int largest      = iwi[iwi.length - 1].number;
int largestIndex = iwi[iwi.length - 1].index;
// and so on 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-10T12:56:36.053

按降序对数组进行排序并显示前 3 个元素。

# delphi - 如何为 TEncoding 类型的函数参数设置默认值？

> ID：12352152
> 
> 赞同：6
> 
> 时间：2012-09-10T12:53:37.147
> 
> 标签：delphi, unicode, encoding, delphi-xe2

从 D2007 转换到 XE2，我转换了这个函数

```
function Add_Line( FileStream : TFileStream; ALine : string) : boolean; 
```

至

```
function Add_Line( FileStream : TFileStream; ALine : string; Enc: TEncoding = nil) : boolean;
var
  AStr: ANSISTring;
begin
  Result := True;
  if Enc = nil then Enc := TEncoding.ANSI;
  try
//Old    FileStream.WriteBuffer( Pointer(ALine)^, Length(ALine) );
    if Enc = TEncoding.UTF8 then
      AStr := UTF8Encode(ALine)
    else
      AStr := ANSIString(ALine);
    FileStream.WriteBuffer( AStr[1], Length(ALine) );
    end;
  except
    Result := False;
  end;
end; 
```

理由：

*   尽可能少地使用 Add_Line 更改代码

*   接受自动更改为 Unicode，仅在最后一刻写入 8 位文本文件（用于 XML 和 CSV）。如果我们愿意，将来我们仍然可以迁移到 UTF-16 文件。

我本来想定义类似的东西：

```
function Add_Line( FileStream : TFileStream; ALine : string; Enc: TEncoding = TEncoding.ANSI) : boolean; 
```

但编译器抱怨;-)

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T12:59:38.860

默认参数必须是编译时常量，但如果你需要更高级的东西，你可以创建重载：

```
function Add_Line( FileStream : TFileStream; ALine : string) : boolean; overload;
function Add_Line( FileStream : TFileStream; ALine : string; Enc: TEncoding) : boolean; overload;

function Add_Line( FileStream : TFileStream; ALine : string) : boolean;
begin
  Result := Add_Line(FileStream, ALine, TEncoding.ANSI);
end; 
```

您甚至可以添加`inline`关键字以获得与默认参数所产生的完全相同的生成代码，如果它有效的话。

注意：您似乎不支持除`TEncoding.ANSI`and以外的任何内容`TEncoding.UTF8`。在这种情况下，`TEncoding`参数似乎有点过头了，您可以改用`UTF8: Boolean`参数（或重新编写代码以使用任意编码`CodePage`）。

注2：`FileStream.WriteBuffer( AStr[1], Length(ALine) );`是错误的，因为`Length(ALine)`和`Length(AStr)`不必相同，应该`Length(AStr)`改用。此外，当为空字符串`AStr[1]`时可能会导致异常，您可以添加一个特殊情况以仅在不为空时调用。`AStr``WriteBuffer``AStr`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T21:23:38.367

其他人评论了如何为`TEncoding`参数指定默认值。我想指出，您的使用`TEncoding`通常是完全错误的。

`TEncoding.UTF8`不是获得 UTF-8 编码对象的唯一方法（`TEncoding.GetEncoding(65001)`是另一种方法），因此`TEncoding.UTF8`专门检查是错误的做法。更糟糕的是，您完全忽略了任何非 UTF8 编码，而只是将其他所有内容编码为 plain `AnsiString`，这完全违背了使用的全部目的`TEncoding`。例如，用户可以传入 ISO-8859-X 编码对象，您的输出不会像用户请求的那样进行 ISO 编码。您也可以将参数更改为`UseUTF8: Boolean = False`参数，因为这就是您有效使用它的方式：

```
function Add_Line( FileStream : TFileStream; ALine : string; UseUTF8: Boolean = False) : boolean;  
var  
  AStr: AnsiString;  
begin  
  Result := True;  
  try  
    if UseUTF8 then  
      AStr := UTF8Encode(ALine)  
    else  
      AStr := AnsiString(ALine);  
    if AStr <> '' then
      FileStream.WriteBuffer( AStr[1], Length(AStr) );  
  except  
    Result := False;  
  end;  
end; 
```

正确的使用方法`TEncoding`是让它做实际的编码，不要自己编码：

```
function Add_Line( FileStream : TFileStream; ALine : string; Enc: TEncoding = nil) : boolean; 
var 
  AStr: TBytes; 
begin 
  if ALine = '' then
  begin
    Result := True;
    Exit;
  end; 
  Result := False;
  try 
    if Enc = nil then Enc := TEncoding.Ansi; 
    AStr := Enc.GetBytes(ALine); 
    // GetBytes() returns 0 bytes if it fails to encode, it does not raise an exception!
    if Length(AStr) = 0 then Exit;
    FileStream.WriteBuffer( AStr[0], Length(AStr) )
  except 
    Exit;
  end; 
  Result := True;
end; 
```

# winapi - 调用系统插件后从结构中获取信息

> ID：12352162
> 
> 赞同：0
> 
> 时间：2012-09-10T12:53:58.357
> 
> 标签：winapi, nsis

我正在尝试通过系统插件和`netapi32`库从 Windows 获取一些信息。

我尝试`NetWkstaGetInfo()`在分配一个适合作为`WKSTA_INFO_100`.

MSDN 中的`NetWkstaGetInfo()`原型状态：

```
NET_API_STATUS NetWkstaGetInfo(
  _In_   LPWSTR servername,
  _In_   DWORD level,
  _Out_  LPBYTE *bufptr
); 
```

虽然`WKSTA_INFO_100`是

```
typedef struct _WKSTA_INFO_100 {
  DWORD wki100_platform_id;
  LMSTR wki100_computername;
  LMSTR wki100_langroup;
  DWORD wki100_ver_major;
  DWORD wki100_ver_minor;
} WKSTA_INFO_100, *PWKSTA_INFO_100, *LPWKSTA_INFO_100; 
```

对于初步测试，我尝试在消息框中显示结构成员。我首先使用虚拟信息初始化结构，以检查 api 调用是否替换了我分配的块的内容。

但是直到现在我在第一个结构成员之后几乎什么都没有，我想结构没有正确定义，或者我有结构对齐问题。不幸的是，系统插件的怪异文档让~~我发疯~~，对我没有多大帮助。

这是我的测试脚本：

```
outfile "hello.exe"

section

System::Call /NOUNLOAD "*(*i11,t 'some',t 'thing',i22,i44)i .r0"
Dumpstate::debug
System::Call /NOUNLOAD "netapi32::NetWkstaGetInfo(i0, i100, i r0) i.r6"
Dumpstate::debug
System::Call /NOUNLOAD "*$0(*i.r1, t.r2, t.r3, i.r4, i.r5)"
Dumpstate::debug
messagebox MB_OK "Hello, to $2 $3 domain (win $1 - $4.$5) !"
System::Free $0

sectionEnd 
```

第一个检索到的值 (500) 是正确的。但其他成员保持其初始值。我错过了什么？

**（编辑）**推论问题：

*   似乎按照文档和MSDN，结构的第一个成员应该是`i`而不是`*i`但我没有设法获得正确的返回值`*`（Dumpstate插件倾向于显示它作为地址返回）
*   `/NOUNLOAD`插件的参数是强制性的吗？我找到了几个例子，但没有找到确切的原因。我担心如果没有参数，分配的结构可能会被过早释放。你能确认/确认吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:19:01.003

> 似乎按照文档和MSDN，结构的第一个成员应该是`i`而不是`*i`但我没有设法获得正确的返回值`*`（Dumpstate插件倾向于显示它作为地址返回）

那是解决方案的线索：我误读了 MSDN 页面，起初并没有注意到它不是传递给**的结构，**`NetWkstaGetInfo` **而是由 api 调用修改的 a 的地址`NetWkstaGetInfo*`**（并且必须在 by 之后释放`NetApiBufferFree`。因此正确的脚本是：

```
outfile "hello.exe"

section

System::Call  "netapi32::NetWkstaGetInfo(i0, i100, *i r0 r0) i.r6"
System::Call  "*$0(i.r1, w.r2, w.r3, i.r4, i.r5)"
messagebox MB_OK "Hello, to $2 $3 domain (win $1 - $4.$5) !"
System::Call  "netapi32::NetApiBufferFree(*i r0) i.r6"

sectionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:28:08.520

bufptr 仅用于将 r0 作为输入传递给 NetWkstaGetInfo 是没有意义的，该函数不需要输入数据。您不应该`*i`与 NetApiBufferFree 一起使用，`i`单独使用就足够了（$0 已经有地址，您不希望系统插件玩指针，只需将其直接传递给 API）

```
!include LogicLib.nsh

System::Call "netapi32::NetWkstaGetInfo(i0, i100, *i 0 r0) i.r1"
${If} 0 = $1
    System::Call "*$0(i.r1, w.r2, w.r3, i.r4, i.r5)"
    DetailPrint "Hello, to $2 $3 domain (win $1 - $4.$5) !"
${EndIf}
System::Call "netapi32::NetApiBufferFree(ir0)" 
```

在前面的示例中，我使用`*i 0 r0`了 bufptr 参数，以便在函数启动之前 $0 为 NULL（如果您不想使用此技巧，您可以`StrCpy $0 0`在系统调用之前执行）。如果你不这样做，那么如果函数失败会发生什么就不清楚了。文档没有指定当函数失败时 bufptr 会发生什么，希望它设置为 NULL 但你不能确定。如果函数失败，我们最终将 NULL 传递给 NetApiBufferFree，这通常是安全的传递给自由函数，但文档并未将其称为 OK。为了超级安全，你应该只释放一个非空指针：

```
System::Call "netapi32::NetWkstaGetInfo(i0, i100, *i 0 r0) i.r1"
${If} 0 = $1
    System::Call "*$0(i.r1, w.r2, w.r3, i.r4, i.r5)"
    DetailPrint "Hello, to $2 $3 domain (win $1 - $4.$5) !"
${EndIf}
${IfThen} $0 <> 0 ${|} System::Call "netapi32::NetApiBufferFree(ir0)" ${|}
SectionEnd 
```

* * *

使用系统插件时不再需要 /NOUNLOAD（自 v2.42 起）。/NOUNLOAD 阻止 NSIS 卸载插件。如果插件具有内部状态，这一点很重要，但在您的情况下，唯一的状态是 Windows 分配的一块内存。

# php - 如果它们具有相同的名称，则回显 fetch_array 行

> ID：12352167
> 
> 赞同：0
> 
> 时间：2012-09-10T12:54:21.020
> 
> 标签：php, mysql, html

已解决：感谢大家的快速解答

我有 3 个表，我加入了它们（在 SQL 中检查并且值是正确的）但问题是它们中的 2 个具有不同值的相同字段“denumire”，我需要回显它们

为了更清楚，这段代码回显了相同的值，但在 mysql 中，ID 是正确的：

```
echo "<td valign='top'>" . nl2br( $row1[`specializare`.'denumire']) . "</td>";  
echo "<td valign='top'>" . nl2br( $row1[`disciplina`.'denumire']) . "</td>"; 
```

mysql表结构：

```
specializare->ID_specializare, denumire 
disciplina->ID_disciplina,denumire 
preda->ID_specializare, ID_disciplina, etc 
```

php 中的 sql_query：

```
$sql1 = mysql_query("SELECT preda.ID_material, prof.ID_prof, prof.nume, prof.prenume, `specializare`.denumire, disciplina.denumire, preda.an_studiu, preda.semestru, preda.material
FROM `prof`
LEFT JOIN `preda` ON `prof`.ID_prof = `preda`.ID_prof
LEFT JOIN `specializare` ON `specializare`.ID_specializare= `preda`.ID_specializare
LEFT JOIN `disciplina` ON `disciplina`.ID_disciplina = `preda`.ID_disciplina
WHERE '".$_SESSION['ID_prof']."'=prof.ID_prof
ORDER BY specializare.denumire;"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:56:28.753

运行 SQL 查询时，应使用别名列名。

例如

```
SELECT t1.id as t1_id , t2.id as t2_id FROM table1 t1 , table2 t2 WHERE t2.id = t1.table_id_match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:57:05.227

在查询中使用别名

```
SELECT specializare.denumire as val1, disciplina.denumire as val2 etc ..... 
```

然后做

```
echo "<td valign='top'>" . nl2br( $row1['val1']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:56:41.327

您应该在表和列上使用别名，如下所示：

```
select
    a.someColumnName as aCol,
    b.someColumnName as bCol
from
    table1 a
        join table2 b
            on a.tableID=b.tableID 
```

并使用 a/b（或您在表上设置的任何别名）来确定在查询中（通过使用 ）将它们引入时哪些列以及如何引用它们`as aCol`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:56:53.770

选择列时，您可以使用别名：

```
SELECT denumire AS specDenumire FROM specializare 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T13:29:26.380

是的，在这里我们需要了解正在发生的 wts。

在 mysql 中，您可能已经通过 tablename.columnname 克服了冲突，但 mysql 给出的结果将是：denumire | denumire 而不是`specializare`.'denumire' | `disciplina`.'denumire'

因此，当使用 mysql_fetch_assoc() 时，php 将结果存储在数组中。因为，关键就像它们被覆盖了，即 $arr['denumire'] = 1 // `specializare`.'denumire' 将被 $arr['denumire'] = 2 // `disciplina`.'denumire' 覆盖。所以，因此你通过别名解决

# javascript - Jquery：不推荐使用属性的指定属性。它总是返回真

> ID：12352171
> 
> 赞同：9
> 
> 时间：2012-09-10T12:54:30.217
> 
> 标签：javascript, jquery, onchange

我有选择元素的集合，当我第一次更改一个选择元素的值时，此功能不起作用，它在我第二次更改值时起作用，并且在控制台中我有![这](../Images/66a725a7c7799603c590070d4a80846d.png)

jQuery代码：

```
$(document).ready(function () {
    var collection = $('select.ddlJ');
    console.log(collection);
    for (var element in collection) {
        $(element).change(function () {

            $('select.ddlJ').change(function (e) {
                $(this).parent().parent().find('td:last').prev().find('span').html(
                    $(this).parent().parent().find('select.ddlJ').filter(function () {
                        return $.trim($(this).val()) == 'm';
                    }).length);

                $(this).parent().parent().find('td:last span').html(
                $(this).parent().parent().find('select.ddlJ').filter(function () {
                    return $.trim($(this).val()) == 'n'; }).length);
            });
        });
    }
}); 
```

HTML 代码：

```
<table cellspacing="0" border="1" style="border-collapse:collapse;" id="grid1"
   rules="all">
        <tbody><tr>
 <th scope="col">Nr de ord</th>
 <th scope="col">StudentId</th>
 <th scope="col">Name LName</th>

 <th scope="col">
      <span id="mondayText">monday<br></span>
      <span id="monday">14.05.2012</span>
  </th>
<th scope="col">
     <span id="thuesdayText">thuesday<br></span>
     <span id="thuesday">15.05.2012</span>
</th>
<th scope="col">
     <span id="wednesdayText">wednesday<br></span>
     <span id="wednesday">16.05.2012</span>
</th>
<th scope="col">
     <span id="thursdayText">thursday<br></span>
     <span id="thursday">17.05.2012</span>
</th>
<th scope="col">
     <span id="fridayText">friday<br></span>
     <span id="friday">18.05.2012</span>
</th>
<th scope="col">
     <span id="saturdayText">saturday<br></span>
     <span id="saturday">19.05.2012</span>
  </th>
   <th scope="col">
   <span id="M">Total1</span>
   </th>
  <th scope="col">
   <span id="N">Total2</span>
   </th>
               </tr><tr>
                <td>  1  </td>
                <td>110001</td>
                <td>Test1 Test1</td><td>
                </td><td>
                </td><td>
                </td><td>
 <select class="ddlJ" id="a1111_0" name="ctl00$contentbody$grid1$ctl02$a1111">
                <option value="a" selected="selected">a</option>
                <option value="m">m</option>
                <option value="n">n</option>
            </select>
 <select class="ddlJ" id="a2222_0" name="ctl00$contentbody$grid1$ctl02$a2222">
                <option value="a" selected="selected">a</option>
                <option value="m">m</option>
                <option value="n">n</option>
            </select>

                          </td><td>
                          </td><td>
                          </td><td>
                          <span class="label" id="totalM"></span>
                          </td><td>
                           <span id="totalN"></span>
                          </td>
        </tr><tr>
        <td> 2   </td>
                <td>110002</td>
                <td>Test2 Test2</td>
                <td></td>
               <td></td>
               <td></td><td>
 <select class="ddlJ" id="a1111_1" name="ctl00$contentbody$grid1$ctl03$a1111">
                <option value="a" selected="selected">a</option>
                <option value="m">m</option>
                <option value="n">n</option>
            </select>

                </td><td>
                </td><td>
                </td><td>
                <span class="label" id="totalM"></span>
                 </td><td>
                 <span id="totalN"></span>
                  </td>
        </tr><tr>
            <td>
                         3                  
                </td><td>110008</td><td>Test3 Test3</td><td>
                </td><td>
                </td><td>
                </td><td>
<select class="ddlJ" id="a1111_2" name="ctl00$contentbody$grid1$ctl04$a1111">
                <option value="a" selected="selected">a</option>
                <option value="m">m</option>
                <option value="n">n</option>
            </select>
                         </td><td>
                </td><td>
                </td><td>
                 <span class="label" id="totalM"></span>
                </td><td>
                  <span id="totalN"></span>
                          </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T10:59:38.997

这是 jQuery 中的一个错误：http: [//bugs.jquery.com/ticket/11397](http://bugs.jquery.com/ticket/11397)

（见：[https](https://stackoverflow.com/a/9460682/1178235) ://stackoverflow.com/a/9460682/1178235 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:20:44.087

尝试改变

```
var collection = $('select.ddlJ') 
```

使用[jQuery.get()](http://api.jquery.com/get/)

```
var collection = $('select.ddlJ').get();    
// BTW, this is similar to $('select.ddlJ')[0] 
```

这为您提供了实际的 DOM 元素，而不是匹配它们的 jQuery 对象。或者（以及我可能会这样做的方式），将改为改变

```
for (var element in collection) 
```

使用[jQuery.each()](http://api.jquery.com/each/)

```
$('select.ddlJ').each(function(i, element) { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T02:50:25.563

尝试将 .val() 更改为 .attr('value')

# jquery - 使用 jQuery 计算文本像素宽度

> ID：12352174
> 
> 赞同：1
> 
> 时间：2012-09-10T12:54:33.373
> 
> 标签：jquery, width, tooltip

我想在我的菜单中添加一个简单的工具提示。如何计算工具提示中的文本有多少像素？

HTML：

```
<nav>
    <ul>
        <li>
            <a href="#" title="Item 1 text">Item 1</a>
        </li>
        <li>
            <a href="#" title="Item 2  longer text" >Item 2</a>
        </li>
        <li>
            <a href="#" title="Item 3 text text text">Item 3</a>
        </li>
    </ul>
</nav> 
```

CSS：

```
nav{
    position: fixed;
    left:0;
    right:0;
    bottom:0;
    height:30px;
    background: grey;
}
ul{
    width: 300px;
    margin:0 auto;
}
li{
    float:left;
    position:relative;
}
span{
    position:absolute;
    left: 50%;
    bottom: 30px;
    background:black;
    border: solid 1px grey;
    border-bottom:none;
    display:none;
    color:white;
}
li:hover span{
    display:block;
}
a{
    display:block;
    text-decoration:none;
    color: white;
    line-height: 30px;
    padding: 0 10px;

}​ 
```

jQuery：

```
$(document).ready(function(){
    $('nav li').each(function(){
        $(this).append('<span>'+$(this).find('a').attr('title')+'</span>');
    });
    $('nav li span').each(function(){
        // var textwidth = ???? 
        // $('nav li span').css("left",-textwidth/2);
        // $('nav li span').css("width",textwidth);
    });
}); 
```

演示： http:
[//jsfiddle.net/vxUTZ/1/](http://jsfiddle.net/vxUTZ/1/) ​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:00:50.920

```
$(this).width(); 
```

使用上面的代码，您将获得跨度的宽度，但在您必须在 css-part 中更改跨度中的空白行为之前：

```
span { white-space: nowrap; } 
```

有了这个，每个空格后不会有换行符，计算出的宽度就是文本的宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:59:58.763

采用

```
$(this).width(); 
```

或者你也可以使用

```
$(this).attr("width"); 
```

在你的函数中。如果你想调整你的文本长度然后

```
$(this).text().length; 
```

# c# - C# ASP 控制面板链接仅对角色管理员可见

> ID：12352186
> 
> 赞同：0
> 
> 时间：2012-09-10T12:55:00.813
> 
> 标签：c#, asp.net

如何使链接仅对管理员可见？因为我想在我的网页上有一个控制面板链接，所以如果用户登录并且他在角色组“管理员”中，链接将变得可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:11:41.577

如果您在 asp.net 下使用 C#，请在 ie 后面的代码中

```
private void Page_Load (object sender, System.EventArgs e)
{
    // ... previous code ...

    // Add the following code:
    if (Context.User.IsInRole("Admin"))
    {
        myLink.Visible = true;
    }
    else
    {
        myLink.Visible = false;
    }

    // ... following code ...
} 
```

你可以看看这个链接，可能对[ASP.NET 2.0 中的Forms Authentication](http://msdn.microsoft.com/en-us/library/ff647070.aspx)有帮助 即使是framework 2.0的链接，操作原理都是一样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:03:38.650

假设您的管理员组在数据库中具有唯一 ID，我使用以下内容：

```
<% If intLoggedInUserGroupID = 1 Then Response.Write "<a href=""nimda.asp"">Admin Page</a>" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:12:05.880

您的问题留下了许多空白...

您使用的是服务器端链接按钮还是 HTML 锚点？您希望它在服务器端还是客户端处理？

无论如何，解决方案的基线是当您接近为链接生成 HTML 的代码时，您必须知道用户登录的角色。这可以通过多种方式完成。

然后，您可以根据需要使用该链接做任何您想做的事情。这可以通过多种方式完成。

# android - 您是否将真实图像（用于启动画面）转换为九个补丁？

> ID：12352187
> 
> 赞同：3
> 
> 时间：2012-09-10T12:55:02.447
> 
> 标签：android, screen-resolution, nine-patch

正如标题所说，当您处理出现在初始屏幕或背景或警报弹出窗口中的真实图像时，您是将它们转换为九个补丁还是简单地将它们调整为多个图像（800x480、960x540、720x1280 等）？ ?

我没有将它们转换为九个补丁，而是调整为最常用的格式，我想知道我这样做是否犯了错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:01:28.207

我会说这绝对取决于您希望图像在不同屏幕尺寸上的表现。

如果您想指定图像的某些区域可以拉伸而其他一些区域不能，那么 9-patch 似乎是相关的。

另一方面，如果您的图像不应该被转换/拉伸，那么您最好提供尽可能多的图像尺寸以覆盖大多数屏幕。

# sugarcrm - 如何从 SugarCRM 中特定列的 listView 中删除排序

> ID：12352191
> 
> 赞同：1
> 
> 时间：2012-09-10T12:55:15.813
> 
> 标签：sugarcrm

如何在 SugarCRM 的特定列中从 listView（例如 Account）中删除排序？

具体：我想删除 Account Module 的 ListView 的 Name 字段（只有一个字段）的排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T22:25:22.217

Set 'sortable' => false for the field in the listviewdefs.php. Edit custom/modules/Accounts/metadata/listviewdefs.php and set such as:

```
'EMAIL1' => 
array (
'width' => '16%',
'label' => 'LBL_LIST_EMAIL_ADDRESS',
'sortable' => false,
'customCode' => '{$EMAIL1_LINK}{$EMAIL1}</a>',
'default' => true,
), 
```

# authentication - 如何让 Google TokenAuth 工作？

> ID：12352197
> 
> 赞同：2
> 
> 时间：2012-09-10T12:55:48.173
> 
> 标签：authentication, youtube, token, google-talk

我正在开发一个 youtube 上传应用程序，并且在身份验证的特定部分遇到了一些问题。ClientLogin 到目前为止，作品和上传都被 Youtube 接收。但是，我必须将登录到 Youtube-Frontpage 的用户重定向。我注意到有可能通过 url 登录到 gmail：accounts.google.com/TokenAuth?auth=.... 这对于 youtube 应该是完全一样的。在“gmail”登录将包括我登录 youtube 所需的 cookie。

但是，我没有让它工作。我必须使用哪个身份验证令牌？我尝试了很多，客户端登录响应中提供的那个。我查询了 www.google.com/accounts/IssueAuthToken url（它给了我一个令牌，但我无法使用它登录）。例如我尝试过的：

[https://accounts.google.com/TokenAuth?auth=token-received-by-issueAuthToken&service=youtube&continue=http://youtube.com&source=googletalk](https://accounts.google.com/TokenAuth?auth=token-received-by-issueAuthToken&service=youtube&continue=http://youtube.com&source=googletalk)

和：

[https://accounts.google.com/TokenAuth?auth=token-received-by-issueAuthToken&service=mail&continue=http://mail.google.com/mail&source=googletalk](https://accounts.google.com/TokenAuth?auth=token-received-by-issueAuthToken&service=mail&continue=http://mail.google.com/mail&source=googletalk)

这些似乎都不起作用。Clientlogin 身份验证是使用“service=youtube”完成的——这是错误吗？

我很感激任何可以澄清我的问题的信息。

问候，丹尼斯·菲舍尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T13:12:24.237

所以 - 好吧 - 我终于得到了这个工作。我花了一些时间，因为没有真正的文档。我将解释请求是如何工作的，您需要执行 3 个请求：

第一：在 google.com/accounts/ClientLogin 上执行默认 clientLogin 提供 Email=emailadress&Passwd=Password&service=gaia 作为数据，以及您要添加到 clientLogin 的任何其他参数。您将收到 3 个令牌、SID、LSID 和 Auth - 您只需要 SID 和 LSID！

第二：向 google.com/accounts/IssueAuthToken 发出请求，将参数 SID="Extracted SID"&LSID="Extracted LSID"&service=gaia 添加到 URL。您将收到一个应以以下字符开头的 AuthToken：“APh-....” 如果不是这种情况，您的此请求由于参数错误（很可能缺少“service=gaia”）而失败。您的第三个请求将需要此令牌。

第三：向 google.com/accounts/TokenAuth?auth="token 在步骤 2 中收到"&service="您要进行身份验证的服务发出请求，例如 mail"&source="例如 googletalk"&continue="您所在的 url '被重定向到，这是服务邮件的[http://mail.google.com/mail](http://mail.google.com/mail) "

这第三个请求很可能是在浏览器中完成的。恭喜，您使用 2-Step Auth 将用户登录到他的 google 帐户。您不需要“真实密码”，应用程序特定密码足以生成这些令牌。

问候，丹尼斯·菲舍尔

# sql - SSRS 组头表达式

> ID：12352198
> 
> 赞同：2
> 
> 时间：2012-09-10T12:55:51.870
> 
> 标签：sql, reporting-services, ssrs-2008

我在 SSRS 中创建了一个报告，并按其货币对结果进行了分组。在组头部分，我希望标题说出分组货币的名称（总共有四种）。我会用什么表达来做到这一点？货币数据集的字段是 [sCcy_Code]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:28:06.950

您可以在没有任何问题或聚合的情况下引用表达式中的分组字段。听起来您是按 sCcy_Code 字段分组的，所以类似于

```
=Switch(
  Fields!sCcy_Code.value = 1, "Dollars"
  Fields!sCcy_Code.value = 2, "Pounds"
  Fields!sCcy_Code.value = 3, "Euro"
  1=1, "Other Currency") 
```

这可以设置为单元格的表达式，或者如果您需要同一单元格中的其他文本，则可以设置为占位符的表达式。

# sql-server - sql server中修改sp后如何获取之前的脚本

> ID：12352199
> 
> 赞同：0
> 
> 时间：2012-09-10T12:55:53.773
> 
> 标签：sql-server, stored-procedures

我已经更改了一个没有备份的程序，现在我想要以前的脚本。有什么办法可以重新获得吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:58:50.387

不，没有，反正不容易。您*可以*尝试查看[事务日志](https://stackoverflow.com/a/6740078/1583)。

如果没有备份或保存存储过程版本的其他位置，您将无法取回它。

检查你的测试/开发系统——你可能很幸运，以前的版本可能还在某个地方徘徊。

将来 - 将所有数据库脚本保存在[源代码管理](http://en.wikipedia.org/wiki/Revision_control)中，这样可以避免此类问题。

# iis-7 - 应用程序池回收

> ID：12352202
> 
> 赞同：0
> 
> 时间：2012-09-10T12:56:01.217
> 
> 标签：iis-7, windows-server-2008-r2

我有一个在 Windows Server 2008 x64 上运行的 Web 应用程序。应用程序使用缓存来保存一些数据，但在工作时这些数据消失了。它接缝应用程序池回收。

我禁用了应用程序池回收（没有重叠回收，privet 内存限制为零，虚拟内存为零并且没有指定间隔限制）。

在这些配置应用程序池回收之后！

是否有任何限制应用程序池工作进程的默认 Windows 配置？

# sql - CakePHP - HABTM find() 不要加入其他表

> ID：12352203
> 
> 赞同：0
> 
> 时间：2012-09-10T12:56:02.180
> 
> 标签：sql, cakephp, model, find, has-and-belongs-to-many

我的标题看起来很幼稚，但我不得不说我已经阅读/搜索/测试了所有可能的东西，但是我的 find() 方法没有在 SQL 查询中实现对相关表的 JOIN。我在其他项目中多次使用它没有问题，但在这里......

这是我的2个模型（没什么特别的，只是相关模型的手动定义）：

```
class Pflanzen extends AppModel {
    public $useTable = 'pflanzen';
    public $hasAndBelongsToMany  = array(
                        'Herbar'  => array(
                                        'order'=>'Herbar.order ASC',
                                        'joinTable' => 'herbar_pflanzen',
                                        'foreignKey' => 'pflanzen_id',
                                        'associationForeignKey' => 'herbar_id') 
            );
}
class Herbar extends AppModel {
    public $useTable = 'herbar';
    public $hasAndBelongsToMany = array(
              'Pflanzen' => array('joinTable' => 'herbar_pflanzen',
                                  'foreignKey' => 'herbar_id',
                                  'associationForeignKey' => 'pflanzen_id')
           )
} 
```

这是我在“Herbar”控制器中的查询（再正常不过了……）：

```
$pflanzen = $this->Herbar->Pflanzen->find('all',array(
                          'fields'=>array('Herbar.name','Pflanzen.linkplatter'),
                          'conditions' => array('Pflanzen.linkplatter' => true),
                          'order' => 'Herbar.name',
                          'limit' => 10,
                          'recursive'=>2)
                         );
$this->set('pflanzen',$pflanzen); 
```

以及视图中产生的错误：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Herbar.name' in 'field list'

SQL Query: SELECT `Herbar`.`name`, `Pflanzen`.`linkplatter`, `Pflanzen`.`id` FROM `burgerbib`.`platter_pflanzen` AS `Pflanzen` WHERE `Pflanzen`.`linkplatter` = '1' ORDER BY `Herbar`.`name` ASC LIMIT 10 
```

可以看到它们在 SQL 中是没有 JOIN 的。为什么 ？？我错了什么？我非常感谢您的帮助，因为我正在寻找几个小时并且不再看到任何解决方案并且没有使用谷歌找到任何东西。提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:26:58.327

HABTM 不会进行联合查询，它会查询所有基本记录，并根据每个关系的需要进行更多查询以填充数组。您的条件假定连接，因此出现错误。

您可以使用参数强制加入`'joins'`。[http://book.cakephp.org/1.2/en/view/872/Joining-tables](http://book.cakephp.org/1.2/en/view/872/Joining-tables)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T07:00:04.337

最后，更好的方法是使用可包含的行为。Force Join 仅在可包含行为不响应需求时才有用：

[http://book.cakephp.org/2.0/fr/core-libraries/behaviors/containable.html#using-containable](http://book.cakephp.org/2.0/fr/core-libraries/behaviors/containable.html#using-containable)

# jquery - 将数据动态添加到数组

> ID：12352204
> 
> 赞同：0
> 
> 时间：2012-09-10T12:56:04.650
> 
> 标签：jquery

我有 3 个动态 div，其中包含一些 json 数据。我需要将这些 div 添加到一个数组中。请解释一下，因为我是数组操作的新手。

提前致谢

我正在使用下面给定的代码

$('body').append(''+ JSON.stringify(data) +'');

通过使用上面的代码，我将 json 处理成一个 div。必须动态创建更多 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:58:24.867

将项目添加到数组中，请使用该`.push()`方法。另见[http://www.w3schools.com/jsref/jsref_push.asp](http://www.w3schools.com/jsref/jsref_push.asp)

# curl - curl 使用证书配置并使用 C 中的特定证书启用

> ID：12352208
> 
> 赞同：0
> 
> 时间：2012-09-10T12:56:19.760
> 
> 标签：curl, openssl

我正在使用 cCURL 与网络服务器通信，现在我需要启用 cCURL 客户端代码中的安全部分，我搜索但无法获得有关如何添加我自己的 CA 证书并启用我的客户端的特定密码套件的信息，例如（ ECC-CCM），...任何信息都会很好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:14:13.323

检查[手册页](http://curl.haxx.se/docs/manpage.html)和[sslcerts](http://curl.haxx.se/docs/sslcerts.html)部分

```
--ciphers <list of ciphers>
--cacert [file] 
```

# php - 后退按钮后切换

> ID：12352210
> 
> 赞同：0
> 
> 时间：2012-09-10T12:56:21.717
> 
> 标签：php, javascript, jquery, html, css

大家好，我有这个代码....

```
<html>
<head>
<script class="jsbin" src="http://ajax.googleapis.com /ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$(function(){
    $(".mytableCol3").click(function(){
        $(this).addClass("on").parent().siblings("tr").find("td").removeClass("on");
    });
});
</script>
<style>
    .on { background-color:red; color:#ffffff; }
</style>
</head>
<body>

<table class="mytable" border=1>
  <tbody>
    <tr>
      <td class="mytableCol3"><a href="google.com">google</a></td>
    </tr>
    <tr>
      <td class="mytableCol3"><a href="yahoo.com">yahoo</a></td>
    </tr>
    <tr>
      <td class="mytableCol3"><a href="bing.com">bing</a></td>
    </tr>
  </tbody>
</table>
<table class="mytable" border=1>
</body>
</html> 
```

上面的代码通过在单元格之间切换红色可以正常工作，并且当点击它时它还会将页面重定向到“特定位置”。请查看[演示](http://jsfiddle.net/UQBHH/2/)，您可以先观察单元格变为红色，然后它将被重定向到 google/yahoo/ bing，但是现在当他们通过单击返回按钮/（我编写的代码）返回时需要做什么，被选中的特定单元格仍应以红色突出显示....我通过会话而不是这样做确切地说..任何人都可以帮我解决这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:04:42.893

你可以用[$.cookie做到这一点](https://github.com/carhartl/jquery-cookie)

为每一行分配一个 ID 并设置 cookie，然后检查该 cookie 是否有可用的 id：

```
<table class="mytable" border=1>
    <tbody>
        <tr>
            <td class="mytableCol3" id="google"><a href="http://google.com">google</a></td>
        </tr>
        <tr>
            <td class="mytableCol3" id="yahoo"><a href="http://yahoo.com">yahoo</a></td>
        </tr>
        <tr>
            <td class="mytableCol3" id="bing"><a href="http://bing.com">bing</a></td>
        </tr>
    </tbody>
</table>​ 
```

和 javascript：

```
$(function(){
    $(".mytableCol3").click(function(){
        $(this).addClass("on").parent().siblings("tr").find("td").removeClass("on");
        $.cookie('clicked', $(this).attr('id'));
    });

    if($('#'+$.cookie('clicked'))){
        $('#'+$.cookie('clicked')).addClass('on');
    }
}); 
```

​ 你可以使用纯 javascript 作为 cookie，例如我使用了[那个](http://jsfiddle.net/n9uGH/)[插件](https://github.com/carhartl/jquery-cookie)。

# windows - 指针对象在 Visual C++ 6.0 中创建 windows 错误

> ID：12352217
> 
> 赞同：0
> 
> 时间：2012-09-10T12:56:47.327
> 
> 标签：windows, visual-c++-6

我将粘贴一个代码片段并解释我面临的问题，

```
void materialPropertiesDlg::OnNext() {
    contiBeam *continousBeamPtr;
    contiBeam contiBeamObj;
    UpdateData(TRUE);
    switch (m_steel_grade) {
        // Do Something
    }   
    continousBeamPtr->setMaterial(m_conc_grade, m_steel_grade);
    OnOK();
} 
```

如您所见，在第 2 行中创建了一个指针对象，在下一行中创建了一个对象。所以，然后我调用`setMaterials()`类的成员函数`contiBeam`。我可以很容易地用对象做到这一点`contiBeamObj`，但是当我使用调用函数时`contiBeamPointer`，windows会抛出一个错误，内容为

> 应用程序已停止工作。

我能够做必要的事情，我只是想知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:00:27.380

您正在使用您的指针`contiBeam *continousBeamPtr;` 而没有分配它。

那是**未定义的行为**，会使您的应用程序崩溃。

您应该使用 分配（保留内存）指针`new`，如下所示：

```
 contiBeam *continousBeamPtr = new contiBeam; 
```

然而，最终的问题是，你*为什么*首先使用指针？你需要一个吗？从您发布的代码看起来不像。

# asp.net-mvc-4 - 如何使用 SimpleMembership 管理个人资料？

> ID：12352218
> 
> 赞同：19
> 
> 时间：2012-09-10T12:56:47.817
> 
> 标签：asp.net-mvc-4, simplemembership

我有一个基于 Internet 模板的 ASP.NET MVC 4 站点。我正在使用使用该模板设置的 SimpleMembership。

我可以修改为我创建的用户表，但我不确定修改我添加的额外字段的“正确”方法。我想要全名、电子邮件等并将它们添加到用户表中，但似乎无法通过 SimpleMembership WebSecurity.* 静态方法进行更新。

您是否应该在 SimpleMembership API 之外使用 EF 自己更新这些属性？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-28T17:45:15.307

1 - 您需要启用迁移，最好使用 EntityFramework 5

2 - 移动你的

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "EmailAddress", autoCreateTables: true); 
```

到 YourMvcApp/Migrations/Configuration.cs 类中的 Seed 方法

```
 protected override void Seed(UsersContext context)
    {
        WebSecurity.InitializeDatabaseConnection(
            "DefaultConnection",
            "UserProfile",
            "UserId",
            "UserName", autoCreateTables: true);

        if (!Roles.RoleExists("Administrator"))
            Roles.CreateRole("Administrator");

        if (!WebSecurity.UserExists("lelong37"))
            WebSecurity.CreateUserAndAccount(
                "lelong37",
                "password",
                new {Mobile = "+19725000000", IsSmsVerified = false});

        if (!Roles.GetRolesForUser("lelong37").Contains("Administrator"))
            Roles.AddUsersToRoles(new[] {"lelong37"}, new[] {"Administrator"});
    } 
```

现在 EF5 将负责创建您的 UserProfile 表，之后您将调用 WebSecurity.InitializeDatabaseConnection 以仅将 SimpleMembershipProvider 注册到已创建的 UserProfile 表中，同时告诉 SimpleMembershipProvider 哪一列是 UserId 和 UserName。我还展示了一个示例，说明如何在 Seed 方法中添加用户、角色并将两者与**自定义 UserProfile 属性/字段相关联，例如用户的 Mobile (number) 和 IsSmsVerified**。

3 - 现在，当您从包管理器控制台运行 update-database 时，EF5 将为您的表提供所有自定义属性

有关其他参考资料，请参阅本文的源代码： **[http ://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom -用户属性/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-10T14:39:38.427

他们使用 SimpleMembership 使修改配置文件变得容易。SimpleMembership 使用代码优先 EF 模型，用户配置文件在文件 AccountModels.cs 中定义，该文件是作为 MVC 4 的 Internet 模板的一部分生成的。只需修改类 UserProfile 并在类定义中添加新字段。例如，为电子邮件添加一个字段将如下所示：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
} 
```

以下是有关如何访问电子邮件字段的示例：

```
var context = new UsersContext();
var username = User.Identity.Name;
var user = context.UserProfiles.SingleOrDefault(u => u.UserName == username);
var email = user.Email; 
```

这是添加电子邮件字段后数据库的样子。

![在此处输入图像描述](../Images/4394f96352bf4538e96b210a9645cab3.png)

有一篇很好的博客描述了[SimpleMembership 的一些变化](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。您还可以在[此处找到有关自定义和播种 SimpleMembership](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)的更多详细信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T13:21:03.727

如果你看一下第 273 行，`accountcontroller`你会发现这条线

```
db.UserProfiles.Add(new UserProfile { UserName = model.UserName }); 
```

看起来他们（MS）正在按照您的建议进行 OOTB 并使用 EF 进行更新。

我也在寻找更新和访问这些属性的“正确”方式。

**编辑：**

这是我的解决方案（如果有人说有一种 OOTB 方法可以做到这一点，我很高兴）。

在会话类中包装`UserProfile`（来自 .net 实体）。`SimpleMembership`

```
public static class sessionHelpers {
     public static UserProfile userProfile
        {
            get
            {
                if (HttpContext.Current.Session["userProfile"] != null)
                {
                    return HttpContext.Current.Session["userProfile"] as UserProfile; 
                }
                else
                {
                    using (UsersContext db = new UsersContext())
                    {
                        HttpContext.Current.Session["userInfo"] =
                        db.UserProfiles.Where(x => x.UserName == 
                            HttpContext.Current.User.Identity.Name).FirstOrDefault();

                   return db.UserProfiles.Where(x => x.UserName == 
                       HttpContext.Current.User.Identity.Name).FirstOrDefault();
                    }
                }
            }
            set { HttpContext.Current.Session["userProfile"] = value; }
        }
} 
```

从这里您可以通过执行访问配置文件表

```
string foo = sessionHelpers.userProfile.FIELDNAME; 
```

`sessionHelpers`我的包装类在哪里。if 块只是确保如果尚未在当前会话中设置它，则访问它将尝试获取它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T20:15:31.387

您需要将它们添加到您的数据库中（根据描述完成）

除非修改，否则将它们添加到视图（编辑、添加、删除和查看）

在 UserProfiles 中将它们添加到您的模型中

然后它将起作用。

# compilation - 更改活动构建目标 xcode 4

> ID：12352227
> 
> 赞同：11
> 
> 时间：2012-09-10T12:57:12.747
> 
> 标签：compilation, xcode4

我无法`TestXcodeColors.app` [在这个项目中运行](https://github.com/robbiehanson/XcodeColors)

![在此处输入图像描述](../Images/1c05200f5ef1df4006f327a8201b3a5f.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T15:46:07.933

**产品**/**编辑方案...**

![编辑方案](../Images/6d81d0d7b6fe7ed9dea4714dedddbbd0.png)

在“Scheme”下拉菜单中选择“Scheme”又名“Target to build”，然后点击“OK”

# javascript - 在不创建附加变量的情况下设置和返回变量值

> ID：12352229
> 
> 赞同：1
> 
> 时间：2012-09-10T12:57:17.847
> 
> 标签：javascript, variables

是否可以压缩下面的函数以便没有创建变量？

```
 var flag=true;
    //...
    my.flagValue=function(){
        var f=flag;
        flag=false;
        return(f);
    }; 
```

基本上，同时设置和返回（前一个）值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:07:32.610

好吧，通常没有办法在设置之前返回一些东西。但在这种*特定*情况下，您可以使用一些魔法来实现它。尽管您的原始代码更具可读性和可维护性：

```
my.flagValue = function () {
    return (flag && !(flag = false));
}; 
```

如果 flag 为真，那么它将执行如下操作：

```
return (true && !(flag = false)); //!(flag = false) is true, so true is returned. 
```

如果 flag 为 false，那么它将执行如下操作：

```
return (false && !(flag = false)); //obviously returns false. 
```

不过，我真的鼓励你不要这样做。它晦涩难懂，需要进行一些逻辑解析才能解决。我只是想证明在这种特定情况下可以做你想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T12:59:45.177

如果您只是翻转`flag`between的值`true`，`false`那么这可能对您有用：

```
my.flagValue=function(){
    return !(flag = newValue);
}; 
```

这将设置`flag`为`newValue`并从函数返回相反的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:04:45.663

你也可以试试这个，如果我正确理解了这个问题:)

```
 my.flagValue=function(){
             return flag ? !flag : flag ;
          }; 
```

# ruby - 使用 aws-sdk 从 s3 下载文件。编码不对

> ID：12352230
> 
> 赞同：1
> 
> 时间：2012-09-10T12:57:18.477
> 
> 标签：ruby, pdf, encoding, amazon-s3

我正在尝试使用 aws-sdk 将 s3 文件加载到本地磁盘，并质疑为什么我的 pdf 文件（其中只有一个文本说 SAMPLE PDF）的内容显然是空的。

我想这与编码有关...但是我该如何解决呢？

这是我的代码：

```
require 'aws-sdk'

bucket_name = "****"
access_key_id = "***"
secret_access_key = "**"

s3=AWS::S3.new(
access_key_id: access_key_id,
secret_access_key: secret_access_key)

b = s3.buckets[bucket_name]
filen = File.basename("Sample.pdf")

path = "original/90/#{filen}"
o = b.objects[path]

require 'tempfile'

ext= File.extname(filen)

file = File.open("test.pdf","w", encoding: "ascii-8bit")
# streaming download from S3 to a file on disk

begin
file.write(o.read) do |chunk|
    file.write(chunk)
end
end
file.close 
```

如果我取出`encoding: "ascii-8bit"`，我只会收到一条错误消息`Encoding::UndefinedConversionError: "\xC3" from ASCII-8BIT to UTF-8`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:11:49.710

经过一些研究和我表弟的提示后，我终于得到了这个工作。

而不是使用 aws 解决方案从亚马逊加载文件并将其写入磁盘（这会生成一个奇怪的 pdf 文件：显然与原始文件相同，但内容为空白，并且 Adob​​e Reader 在打开时“修复”它）而是现在使用 open-uri，忽略 SSL。

这是让我开心的最终代码：

```
require 'open-uri'
open('test.pdf', 'wb') do |file|
  file << open('https://s3.amazon.com/mybucket/Sample.pdf',:ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE).read
end 
```

# ssrs-2008 - Reporting Services 超时和显示问题

> ID：12352233
> 
> 赞同：0
> 
> 时间：2012-09-10T12:57:36.123
> 
> 标签：ssrs-2008

通过电子邮件/文件共享从 SSRS 传递的报告工作正常，但是当我尝试在管理门户 ( [http://reportserver/Reports/Pages/Folder.aspx](http://reportserver/Reports/Pages/Folder.aspx) ) 上从 IE 运行这些相同的报告时，它没有正确响应。有时浏览器在连接报表链接时会超时，甚至不显示报表查看器。其他时候显示报表查看器但不呈现报表。这似乎更多地发生在具有较大数据集的报告上，所以我认为这是一个超时问题，但我已经尝试更改我能找到的设置，但还没有任何效果。我在 Windows 7 机器上使用 SQL Server 2008 R2。我尝试了[此线程](https://stackoverflow.com/questions/1859693/manage-timeouts-in-the-reporting-services-2005)中的建议，但仍然存在查看器在数据集较大时无法呈现报告的问题。

# mysql - 更新连接表中的属性时出现 MySql 错误

> ID：12352234
> 
> 赞同：0
> 
> 时间：2012-09-10T12:57:38.767
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, jointable

我有这个架构

产品.rb：

```
has_many :families_products  
has_many :families, :through => :families_products 
```

家庭.rb：

```
has_many :families_products  
has_many :products, :through => :families_products 
```

家庭产品.rb：

```
belongs_to :product  
belongs_to :family 
```

在`families_product`表中我有一个名为的属性`price`，当我在创建后尝试更新它时会引发错误。

```
1.9.3p0 :027 > family_product = FamiliesProduct.first
  FamiliesProduct Load (0.9ms)  SELECT `families_products`.* FROM `families_products`         LIMIT 1
 => #<FamiliesProduct family_id: 1, product_id: 1, created_at: "2012-09-10 12:31:54",     updated_at: "2012-09-10 12:31:54", points: nil> 
1.9.3p0 :028 > family_product.points = 2
 => 2 
1.9.3p0 :029 > family_product.save
   (0.2ms)  BEGIN
   (0.7ms)  UPDATE `families_products` SET `points` = 2, `updated_at` = '2012-09-10     12:53:05' WHERE `families_products`.`` IS NULL
   (0.1ms)  ROLLBACK
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'families_products.' 
in 'where clause': UPDATE `families_products` SET `points` = 2, 
`updated_at` = '2012-09-10     12:53:05' WHERE `families_products`.`` IS NULL 
```

我看到生成的查询有错误，所以有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:25:08.103

发生这种情况是因为您的“family.rb”至少（可能还有“product.rb:”）配置错误。您是否定义了外键关系？系统如何猜测如何链接表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:26:23.867

我认为您不应该像这样使用连接表模型。尝试这个：

```
 @family = Family.first #or some other family
 families_product = @family.families_products.where({:product_id => Product.first.id})
 families_product.points = 2
 families_product.save 
```

# linux - linux驱动程序的功能已知/对应用程序可见

> ID：12352236
> 
> 赞同：0
> 
> 时间：2012-09-10T12:57:49.647
> 
> 标签：linux, dll, drivers, ioctl

在 Windows 中，我们在驱动程序中创建一个函数，我们可以使用 dll 作为中间人从应用程序调用它。在 Linux 中会发生什么？例如，我们如何创建自定义函数（ioctl）并从主机应用程序调用/使用它？

任何建议、见解、示例、链接都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:13:54.153

[这篇博](http://pete.akeo.ie/2011/08/writing-linux-device-driver-for-kernels.html)文似乎对编写设备驱动程序有一个很好的概括。那篇文章没有特别提到 ioctl，但这篇文章本身指向了一本公开的书“ [Linux 设备驱动程序，第 3 版](http://lwn.net/images/pdf/LDD3/)”，其中还包含有关 ioctl 使用的一章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:06:38.183

头文件足以使驱动程序的功能对应用程序可见

# javascript - 如何使用 Javascript 捕获表单自动完成事件？

> ID：12352238
> 
> 赞同：1
> 
> 时间：2012-09-10T12:58:02.927
> 
> 标签：javascript, autocomplete, dom-events

每次用户按键时，我实际上都在处理字段集的验证：

```
uname = document.getElementById('user_name');
upass = document.getElementById('password');
btn_submit = document.getElementById('btn_submit');

function verif_champs() {
    if(uname.value != "" && upass.value != "")
        btn_submit.disabled = false;
    else
        btn_submit.disabled = true;
}

document.getElementById('fieldset').onkeyup = function() {
    verif_champs();
} 
```

问题是我的表单在使用 Chrome 时会自动填写，所以即使字段的内容不为空，我的提交按钮也会保持禁用状态。我该怎么安排呢？我尝试了`onchange`fieldset 的事件，但 Chrome 的自动完成似乎并没有抛出它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:53:05.710

`onchange`为自动完成数据添加一个事件。

```
document.getElementById('fieldset').onchange = function() {
    verif_champs();
} 
```

# msvcrt - 链接 msvcrt.lib 找不到 __imp__InterlockedCompareExchange@12

> ID：12352243
> 
> 赞同：0
> 
> 时间：2012-09-10T12:58:15.407
> 
> 标签：msvcrt, lnk2001

过去几天我正在尝试解决以下链接错误，但我还不知道。我猜VS和window sdk安装很好，因为还有100个其他项目正在成功构建。我到底做了什么；我制作了一个 VC 控制台项目并在其中导入了遗留代码并将其与许多静态库链接。代码中包含 _tmain 例程并在控制台上执行，我知道这是因为我有以前构建的可执行文件。请让我知道我应该在哪里查看

```
------ Build started: Project: s5kcgm2, Configuration: Release Win32 ------
Linking...
MSVCRT.lib(crtexe.obj) : error LNK2001: unresolved external symbol __imp__InterlockedCompareExchange@12
C:\Ti\convert\s5kcgm\src\lib\Release\s5kcgm2.exe : fatal error LNK1120: 1 unresolved externals
Build log was saved at "file://c:\Ti\convert\s5kcgm\src\image\s5kcgm2\Release\BuildLog.htm"
s5kcgm2 - 2 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 8 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:59:19.557

[您需要与 kernel32.lib 链接（请参阅文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683560%28v=vs.85%29.aspx)底部的“库”条目）。

# eclipse - 从 Eclipse 运行 JUnit 测试会出现 ClassNotFound 错误

> ID：12352248
> 
> 赞同：6
> 
> 时间：2012-09-10T12:58:31.493
> 
> 标签：eclipse, maven-2, junit4, m2eclipse

我正在尝试`JUnit`从 Eclipse 运行测试，但是在运行这些测试时，我得到了`ClassNotFound`异常

完整的堆栈跟踪如下：

> java.lang.NoClassDefFoundError: of Caused by: java.lang.ClassNotFoundException: of at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net。 URLClassLoader.findClass(URLClassLoader.java:190) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:307) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 在 java.lang.ClassLoader.loadClass (ClassLoader.java:248) 线程“main”中的异常

我在谷歌上搜索过这个问题，发现有几个人遇到了这个问题，但他们似乎都没有解决我的问题。这可能是由于平台的差异

我的开发平台如下

```
OS: Windows XP
Eclipse JUNO
JUnit4
Maven2 
```

同时，如果我使用 maven 运行这个项目，它运行得非常好。

对我来说最奇怪的部分`ClassNotFound`是抛出异常的类的名称。类的名称是`of`。

这让我彻底震惊。

此外，我上面列出的堆栈跟踪就是我得到错误时得到的所有内容。

我已经在这个问题上停留了 2 天，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-17T14:54:18.897

我尝试了这里和其他帖子中提到的所有内容。人们提供的一些解决方案是：

1.  更改测试的输出文件夹
2.  为将从 Maven 运行 test-compile 的项目创建自定义构建器
3.  在项目构建路径的 Order and Export 列表中将 Maven 依赖项移到更高的位置

还有很多很多，但我发现可以工作的一个如下：关闭开发环境。从我的本地 Maven 存储库中删除项目使用的 jar。打开 IDE。构建项目。运行测试。

经过数小时的敲击我的键盘并遵循建议的解决方案后，这个成功了！如果这不起作用，您可以尝试搜索我上面列出的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-09T14:57:31.083

在 Eclipse 中右键单击项目名称并选择“Maven --> update project”通常可以解决此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T05:47:32.157

我知道这个问题已经得到解答，但我仍然会在这里分享我的解决方案，

1.  确保 'src/test/java' 的输出文件夹已设置为 'target/test-classes'，这在许多其他帖子中已经说过，所以我在这里不再重复。

2.  如果还是不行，很有可能是你的单元测试类的编译过程中出现了错误。转到“窗口”-> 打开“错误日志”视图，您应该能够看到错误消息的详细信息。

就我而言，由于网络问题，以前下载的依赖 jar 不知何故损坏了，所以只需从本地存储库中删除 jar 并使用 'maven' -> 'update configuration' 再次下载它。

然后一切正常！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-28T07:30:29.477

通常，当我们构建时，我们在“运行配置选项卡”中选中“跳过测试”，而不是取消选中“跳过测试”并构建项目，junit 应该可以正常工作。这个解决方案对我有用。[![运行配置选项卡以构建项目](../Images/3edd6224bf33b791a57a71bae1e76416.png)](https://i.stack.imgur.com/SY6nD.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T08:13:54.173

尝试在 Eclipse 中将透视图切换到 JUnit 并再次运行测试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-08T04:26:23.293

尽管我看到了所有答案和其他帖子。我将总结我的努力：

可能是该项目的配置不适合同一工作区中的其他项目。（如何解决这可能是另一个问题）

所以，关闭这个工作区，单独为这个项目启动一个干净的工作区。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-27T13:43:29.703

您还可以查看 POM.xml 中的信息

我遇到过同样的问题。设置代码时我的项目名称不匹配。

```
<groupId>CucumberTest</groupId>
<artifactId>com.ProjectName</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>jar</packaging>

<name>com.ProjectName</name>
<url>http://maven.apache.org</url> 
```

在 POM.xml 中更改项目名称后，它工作正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-29T11:33:49.173

面临同样的问题。这个简单的步骤为我解决了这个问题。

1.  从项目的构建路径中删除 JUnit 并再次添加。

2.  如果设置为***Build Automatically***，您的工作区将再次构建。如果未设置为*自动*构建，则构建您的项目。你的问题应该得到解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-15T00:36:46.373

您应该添加您使用的类，例如（spring-boot）：

```
@RunWith(SpringRunner.class)
@SpringBootTest(classes = {DataPoint.class})
public class DataPointTest {

    @Test
    public void TestBuilder() {
        DataPoint.Builder builder = new DataPoint.Builder();

        DataPoint dataPoint = builder.withCount(4).withFirst(1).build();

        assert dataPoint.getCount() == 4 && dataPoint.getFirst() == 1;
    }

} 
```

# php - 在循环之外显示当前登录的用户头像？

> ID：12352250
> 
> 赞同：0
> 
> 时间：2012-09-10T12:58:36.940
> 
> 标签：php, wordpress, plugins, avatar

我将著名的用户照片插件用于我的 Wordpress 网站。我想在循环外显示当前登录用户的头像。这怎么可能？

我用来在循环内显示作者头像的当前代码是：

```
<?php userphoto_the_author_thumbnail('', '', array(width => '40', height => '40')); ?> 
```

谷歌没有给我太多继续。一个人提到了这段代码：

```
global $authordata;
$authordata=get_userdata(get_query_var( 'author' ));
userphoto_the_author_thumbnail(); 
```

但它没有用。解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:09:54.993

试试下面的代码。

它将选择当前登录用户的电子邮件，然后显示头像。

```
<?php
    wp_get_current_user();
    $current_user_email = $current_user->user_email;
?>
<?php echo get_avatar( '$current_user_email', 40 ); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:09:33.073

请尝试这两个之一。

```
userphoto($user, $before = '', $after = '', $attributes = array(), $default_src = '') 
```

或者

```
userphoto_thumbnail($user, $before = '', $after = '', $attributes = array(), $default_src = '') 
```

两个功能的工作方式相同`userphoto_the_author_thumbnail`

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:06:30.880

使用 userphoto_thumbnail() 并明确传递用户 ID。

用法：

```
userphoto_thumbnail($user, $before = '', $after = '', $attributes = array(), $default_src = '') 
```

# c# - 如何对齐控件并保持其相对于相当大的表单的大小？

> ID：12352251
> 
> 赞同：2
> 
> 时间：2012-09-10T12:58:38.697
> 
> 标签：c#, controls, alignment

我的表单中有一个`ListView`控件。当表单调整大小时，我希望它`ListView`与表单同时调整大小，因此它保持 12px 右边距。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:02:14.213

您想在控件上使用锚定。如果你将它锚定在左右，它会随着调整大小而增长和缩小：

![在此处输入图像描述](../Images/fa44ce5d681e3800e33474e0222e64d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:02:06.490

使用 Anchor 属性在相关方向设置锚点，因此您的控件将与其容器一起调整大小

# sql-server - mssql表多外键级联

> ID：12352256
> 
> 赞同：3
> 
> 时间：2012-09-10T12:58:48.703
> 
> 标签：sql-server, foreign-keys, cascade

我相信这是可能的，但对于我的生活，我无法弄清楚。

我创建的是一个用户历史 MSSQL 表，用于保存对用户和由谁所做的更改。此表包含两个引用我的另一个表（用户）的外键 - 一个 fkey 用于受影响的用户，另一个 fkey 用于进行更改的用户。

我需要的是对（用户）表的任何更改以级联和更新这个新表中的相应条目。

新表（User_History）中的字段如下（每个用户由两个字段标识）：

```
Affected_User_House_Id  - int
Affected_User_Id - int
Modified_By_User_House_Id - int
Modified_By_User_Id – int
Modification_Date - datetime
ModificationMade - ntext 
```

除了“ModificationMade”之外，每个字段都是一个主键。“Modification_Date”字段精确到 1 秒。我遇到的问题是创建所述级联。我尝试运行以下 T-SQL 代码：

```
ALTER TABLE [User_History] WITH CHECK
ADD CONSTRAINT [FK_User_History_User] FOREIGN KEY([Affected_User_House_Id], [Affected_User_Id])
REFERENCES [User] ([User_House_Id], [User_ID])
ON UPDATE CASCADE
GO

ALTER TABLE [User_History] CHECK CONSTRAINT [FK_User_History_User]
GO

ALTER TABLE [User_History]  WITH CHECK
ADD CONSTRAINT [FK_User_History_User_ModifiedBy] FOREIGN KEY([Modified_By_User_House_Id], [Modified_By_User_Id])
REFERENCES [User] ([User_House_Id], [User_ID])
ON UPDATE CASCADE
GO

ALTER TABLE [User_History] CHECK CONSTRAINT [FK_User_History_User_ModifiedBy]
GO 
```

这个 T-SQL 给了我以下错误：

```
*'User' table saved successfully
'User_History' table
- Unable to create relationship 'FK_User_History_User_ModifiedBy'.  
Introducing FOREIGN KEY constraint 'FK_User_History_User_ModifiedBy' on table 'User_History' may     cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or     modify other FOREIGN KEY constraints.
Could not create constraint. See previous errors.* 
```

如果我删除第二个“ON UPDATE CASCADE”，则代码可以工作，但这意味着“Modified_By_User_House_Id”和“Modified_By_User_Id”字段中的值将不会更新以匹配它们在用户表中的引用值。

我不知道如何实现这个目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:24:34.463

您只能指定一个级联。这是尝试使用两个触发器模拟多个级联：

```
create table TabA (
    ID1 int not null,
    ID2 int not null,
    _RowID int IDENTITY(1,1) not null,
    constraint PK_TabA PRIMARY KEY (ID1,ID2),
    constraint UQ_TabA__RowID UNIQUE (_RowID)
)
go
create table TabB (
    ID1a int not null,
    ID2a int not null,
    ID1b int not null,
    ID2b int not null,
    constraint PK_TabB PRIMARY KEY (ID1a,ID2a,ID1b,ID2b)
) 
```

它们比你的桌子简单，但希望足够接近。我们需要一个不可变的标识符 in `TabA`，显然`ID`s 不是，因为关键是要对它们进行级联更改。所以我添加了`_RowID`.

至少实现一个真正的外键并在此基础上模拟级联行为会很好，但一些简单的反射将证明总有一个点会破坏外键。所以我们模拟一下：

```
create trigger FK_TabB_TabA on TabB
after insert,update
as
    set nocount on
    if exists (
        select
            *
        from
            inserted i
                left join
            TabA a
                on
                    i.ID1a = a.ID1 and
                    i.ID2a = a.ID2
                left join
            TabA b
                on
                    i.ID1b = b.ID1 and
                    i.ID2b = b.ID2
        where
            a._RowID is null or
            b._RowID is null)
    begin
        declare @Error varchar(max)
        set @Error = 'The INSERT statement conflicted with the Foreign Key constraint "FK_TabB_TabA". The conflict occurred in database "'+DB_NAME()+'", table "dbo.TabB".'
        RAISERROR(@Error,16,0)
        rollback
    end 
```

然后是级联更新：

```
create trigger FK_TabB_TabA_Cascade on TabA
after update
as
    set nocount on

    ;with Updates as (
        select
            d.ID1 as OldID1,
            d.ID2 as OldID2,
            i.ID1 as NewID1,
            i.ID2 as NewID2
        from
            inserted i
                inner join
            deleted d
                on
                    i._RowID = d._RowID
    )
    update b
    set
        ID1a = COALESCE(u1.NewID1,ID1a),
        ID2a = COALESCE(u1.NewID2,ID2a),
        ID1b = COALESCE(u2.NewID1,ID1b),
        ID2b = COALESCE(u2.NewID2,ID2b)
    from
        TabB b
            left join
        Updates u1
            on
                b.ID1a = u1.OldID1 and
                b.ID2a = u1.OldID2
            left join
        Updates u2
            on
                b.ID1b = u2.OldID1 and
                b.ID2b = u2.OldID2
    where
        u1.OldID1 is not null or
        u2.OldID1 is not null
go 
```

一些简单的插入：

```
insert into TabA (ID1,ID2)
values (1,1),(1,2),(2,1),(2,2)
go
insert into TabB (ID1a,ID2a,ID1b,ID2b)
values (1,1,2,2) 
```

然后出现以下错误。不太像内置的 FK 违规，但足够接近：

```
insert into TabB (ID1a,ID2a,ID1b,ID2b)
values (1,1,2,3)
--Msg 50000, Level 16, State 0, Procedure FK_TabB_TabA, Line 28
--The INSERT statement conflicted with the Foreign Key constraint "FK_TabB_TabA". The conflict occurred in database "Flange", table "dbo.TabB".
--Msg 3609, Level 16, State 1, Line 1
--The transaction ended in the trigger. The batch has been aborted. 
```

这是我们希望能够执行的更新：

```
update TabA set ID2 = ID2 + 1 
```

我们查询 FK 表：

```
select * from TabB 
```

结果：

```
ID1a        ID2a        ID1b        ID2b
----------- ----------- ----------- -----------
1           2           2           3 
```

所以更新级联。

* * *

为什么你不能使用真正的 FK：

您想要级联更新。这意味着其中的 ID 值`TabA`将更改为当前不存在的新值（警告 - 我们排除了 2n 行交换其标识值的情况） - 否则，主键约束将被此更新打破.

因此，我们知道新的键值还不存在。如果我们要尝试使用`INSTEAD OF`触发器进行级联更新（在父表之前更新子表），那么我们尝试更新到的新值`TabB`还不存在。或者，如果我们尝试使用`AFTER`触发器进行级联更新 - 好吧，我们为时已晚。FK 约束已经阻止了更新。

我想您*可以*实现一个`INSTEAD OF`触发器，将新行作为“重复”插入，更新子行，然后删除旧行。在这种情况下，我认为你可以拥有真正的 FK。但我不想尝试编写该触发器在所有情况下都是正确的（例如，您要更新三行。两个交换它们的 ID 值，另一个创建一个新 ID）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:20:34.640

根据[这篇](http://support.microsoft.com/kb/321843)知识库文章，当“一个表不能多次出现在由 DELETE 或 UPDATE 语句启动的所有级联引用操作的列表中”时，会出现此错误消息。

由于您有来自同一个表的两条路径，因此可能的解决方法可能涉及在父表上创建一个新键并在子表上创建一个外键 ( `[Affected_User_House_Id], [Affected_User_Id], [Modified_By_User_House_Id], [Modified_By_User_Id]`)。但是，这可能会产生大量开销。作为最后的手段，您可以使用触发器来强制执行关系完整性。

# c++ - 将 CGI 中的错误消息重定向到 Apache 日志文件

> ID：12352262
> 
> 赞同：3
> 
> 时间：2012-09-10T12:58:59.890
> 
> 标签：c++, apache, cgi

在 CGI 程序中记录错误消息的标准方法是什么。在由 Apache (/var/www/cgi-bin) 运行的 CGI 程序中使用 cout 或 printf 会中断通信，而不会记录任何消息。如何在不中断通信和应用程序执行的情况下将错误消息重定向到 Apache 日志文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:31:18.820

尝试使用**cerr**或：

```
fprintf(stderr, "log messages"); 
```

# c# - 如果美国被选为另一个下拉列表中的国家，则验证州下拉列表

> ID：12352264
> 
> 赞同：0
> 
> 时间：2012-09-10T12:59:05.223
> 
> 标签：c#, jquery, asp.net-mvc-3, validation, html-select

需要一些建议我正在尝试编写一个仅在选择下拉列表中的特定值时触发的验证器。

我在这个表格上有两个下拉列表，一个用于国家，另一个用于美国，国家下拉列表仅显示从国家下拉列表中选择美国时。

I need a validator that makes the State dropdownlist list a required field only if the United States is selected as a country.

作为背景信息，这个 MVC3 Web 应用程序和状态下拉列表的显示/隐藏代码是 JQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:12:27.413

另一种选择是将规则动态添加到 jQuery 以进行验证。但是，您还需要在服务器端检查此自定义逻辑。您可以在控制器中执行此操作，或者理想情况下，您的 ViewWModel 将实现 IValidateableObject 以检查是否需要 country="usa" 然后县。

使用 jQuery 的 .rules.add 和 .remove：

[http://docs.jquery.com/Plugins/Validation/rules#.22remove.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22remove.22rules)

所以你可以按照以下方式做一些事情：

```
 $(document).ready(function() {
    $("#country").change(function(){
        if($(this).val()=="usa")
        {
          $("#yourCountyDropDown").rules("add", {
           required: true,
           messages: {
             required: "County is required"
           }
          });
        }
        else
        {
          $("#yourCountyDropDown").rules("remove");
        }
    });
}); 

```

并为您的 ViewModel

```
 public class WhateverYourObjectNameCreateViewModel : IValidatableObject
{
       #region Validation
        public IEnumerable Validate(ValidationContext validationContext)
        {
            if (this.Country=="USA" && string.IsNullOrEmpty(this.County))
            {
                yield return new ValidationResult("County is required");
            }
        }
        #endregion
} 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:16:09.677

您可以编写自定义验证属性：

```
public class RequiredIfAttribute : ValidationAttribute
{
    public RequiredIfAttribute(string otherProperty, object otherPropertyValue)
    {
        OtherProperty = otherProperty;
        OtherPropertyValue = otherPropertyValue;
    }

    public string OtherProperty { get; private set; }
    public object OtherPropertyValue { get; private set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var property = validationContext.ObjectType.GetProperty(OtherProperty);
        if (property == null)
        {
            return new ValidationResult(string.Format("Unknown property: {0}", OtherProperty));
        }

        object otherPropertyValue = property.GetValue(validationContext.ObjectInstance, null);
        if (!object.Equals(OtherPropertyValue, otherPropertyValue))
        {
            return null;
        }

        if (value != null)
        {
            return null;
        }

        return new ValidationResult(this.FormatErrorMessage(validationContext.DisplayName));
    }
} 
```

现在你可以有一个视图模型：

```
public class MyViewModel
{
    public string Country { get; set; }
    [RequiredIf("Country", "usa", ErrorMessage = "Please select a state")]
    public string State { get; set; }

    public IEnumerable<SelectListItem> Countries
    {
        get
        {
            return new[]
            {
                new SelectListItem { Value = "fr", Text = "France" },
                new SelectListItem { Value = "usa", Text = "United States" },
                new SelectListItem { Value = "spa", Text = "Spain" },
            };
        }
    }
    public IEnumerable<SelectListItem> States
    {
        get
        {
            return new[]
            {
                new SelectListItem { Value = "al", Text = "Alabama" },
                new SelectListItem { Value = "ak", Text = "Alaska" },
                new SelectListItem { Value = "az", Text = "Arizona" },
            };
        }
    }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

和一个观点：

```
@model MyViewModel
@using (Html.BeginForm())
{
    <div>
        @Html.DropDownListFor(x => x.Country, Model.Countries, "-- Country --")
        @Html.ValidationMessageFor(x => x.Country)
    </div>
    <div>
        @Html.DropDownListFor(x => x.State, Model.States, "-- State --")
        @Html.ValidationMessageFor(x => x.State)
    </div>
    <button type="submit">OK</button>
} 
```

您可能还会发现[Foolproof](http://foolproof.codeplex.com/)验证属性包很有用。

# c++ - 模板 - 可以这样做吗？

> ID：12352265
> 
> 赞同：0
> 
> 时间：2012-09-10T12:59:06.240
> 
> 标签：c++, types

快速的问题（理论真的）。我有一个变量，它的类型根据值交替变化，例如：

```
8, 16, 24, 32 
```

我通过这样做来定义这一点，例如：

```
uint8_t = 10; // example 
```

但是，此刻我正在切换“数字”并重复代码，但以不同的方式声明整数值。如您所知，这是很多浪费的代码，我想更有效地编写代码。

我想知道是否有可能根据值分配变量的模板？（如果这是有道理的）..

```
if value == 8
  uint8_t = foo;
elseif value == 16
  uint32_t
... 
```

有什么想法或建议吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T13:04:28.767

像这样：

```
template <unsigned int N> struct IntN;

template <> struct IntN< 8> { typedef  uint8_t type; };
template <> struct IntN<16> { typedef uint16_t type; };
template <> struct IntN<32> { typedef uint32_t type; };
template <> struct IntN<64> { typedef uint64_t type; };

IntN<8>::type x = 5; 
```

模板参数必须是一个常量表达式。

# objective-c - 重复符号_OBJC_CLASS_$_Facebook

> ID：12352267
> 
> 赞同：2
> 
> 时间：2012-09-10T12:59:10.390
> 
> 标签：objective-c, addthis

我正在构建一个 ARC iphone 应用程序，并即将集成 addThis ios 库。

我收到以下错误：

```
ld: duplicate symbol _OBJC_CLASS_$_Facebook in /Users/mars/Desktop/Pst/trunk/Pst/ThirdPartyLibs/FBConnect/FacebookSDK/FacebookSDK.framework/FacebookSDK(Facebook.o) and /Users/mars/Library/Developer/Xcode/DerivedData/Pst-bqmphjiqldalzsankfvxugsurcdj/Build/Intermediates/Pst.build/Debug-iphonesimulator/Pst.build/Objects-normal/i386/Facebook.o for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我仔细检查了我的编译资源，只有 1 facebook.m 存在。

我还在这些库文件的编译器标志中添加了“-fno-objc-arc”，因为它们是在没有 ARC 的情况下构建的

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:44:26.187

按照说明将 ThirdPartyLibs 拖到我的项目中时，我遇到了同样的错误。它已将 FBConnect 和 FacebookSDK 添加到我的项目中。

如果您打开库附带的 AddThisDemo 项目，您将看到只添加了 FacebookSDK 和 DeprecatedHeaders（而不是整个 FBConnect）。我在我的项目中重新创建了这个结构，这解决了我的问题。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T15:28:01.460

对于遇到此问题但这些答案无济于事的任何人：如果您创建了一个自定义类并将其命名为 Facebook.h/.m，只需更改其名称并在其后更改，就不会再出现链接错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:12:50.347

你有一个`#import "facebook.m"`文件，你应该把`#import "facebook.h"`.

# tidesdk - 潮汐SDK | 在 JavaScript 中访问 Ruby 变量

> ID：12352270
> 
> 赞同：0
> 
> 时间：2012-09-10T12:59:17.983
> 
> 标签：tidesdk

我无法在潮汐SDK 应用程序中从 JavaScript 访问 ruby​​ 变量。我使用的 SDK 版本是当前最新的 1.2.0.RC4 版本。这是一个基本示例：

```
<!DOCTYPE html>
<html>
<head>
  <title>Hello World</title>
  <style type="text/css">
    body {background: #fff;}
  </style>
</head>
<body>
  <h1>Hello World</h1>

  <script type="text/python">
      helloP = "Hello from Python!";
  </script>

  <script type="text/ruby">
      $helloR = "Hello from Ruby!";
  </script>

  <script type="text/php">
      $helloPHP = "Hello from PHP!";
  </script>

  <script type="text/javascript">  
      alert("Hello from JavaScript!");
      alert(helloP);
      alert(helloPHP);
      alert(helloR);
  </script>
</body>
</html> 
```

在这个例子中，我已经为 python、PHP 和 ruby​​ 变量声明并赋值。JavaScript alert() 函数适用于 python 和 PHP 变量，但不适用于 ruby​​ 变量。所以，警报（helloP）；和警报（helloPHP）；工作并显示一个包含这些变量内容的弹出对话框，但警报（helloR）不显示任何内容。

另一方面，Ruby 函数可以被 JavaScript 看到。因此，如果 ruby​​_function 是一个 ruby​​ 函数，则在 JavaScript 中 alert( ruby​​_function() ) 有效。

那么，JavaScript 怎样才能看到 ruby​​ 变量呢？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:17:44.130

这在 1.2 版本中不起作用。

您需要将红宝石放在包含文件中，而不是内联。

然后它按预期工作。

在资源文件夹中：index.html

```
<html>
    <head>
        <script>
         Titanium.include("ruby.rb");
        </script>
    </head>
<body style="background-color:#ccc;margin:0">
</body>
</html>
<script>
  console.log(window.crim);
  console.log(crim);
  alert(crim.foo);
</script> 
```

在资源文件夹中：ruby.rb

```
window.crim = {
  'foo' => 'bar'
} 
```

请参阅[https://wiki.appcelerator.org/display/guides/Using+Titanium+Desktop+with+Ruby - 在](https://wiki.appcelerator.org/display/guides/Using+Titanium+Desktop+with+Ruby)**Titanium Desktop 1.2.0.RC1 SDKs and more recent**标题下查找信息。

# struts2 - Struts 2：为动作添加自定义接口

> ID：12352280
> 
> 赞同：0
> 
> 时间：2012-09-10T12:59:51.857
> 
> 标签：struts2

我正在考虑为 sturts 2 添加一个新接口（如validationAware 等）。接口的方法将是设置特定参数的方法，这些参数必须存在于请求中。

例如，考虑这个接口：

```
 public interface MyCustomInterfaceForActions {

        /**
         * Set a specific parameter into the request 
         */
        public void setMyParameter1InRequest(HttpServletRequest request, String myParameter);

        /**
         * Sets another specific parameter into the request 
         */
        public void setSecondParamInRequest(HttpServletRequest request, String myParameter);

    } 
```

问题是我不想在实现该接口的每个操作的“执行”方法中“调用”方法“setParameterInRequest”。

另外，我想“强制”将特定参数设置到请求中的操作。

有没有办法做到这一点，而不必在我的操作的所有“执行”方法中调用“设置”方法？例如，我是否可以扩展一个 struts 的“actionExecutor”（我起了这个名字）并更改它的行为以检查该类是否实现了“MyCustomInterfaceForActions”并在这种情况下调用“set”方法？

或者更好的是，只需检查接口是否已实现，然后将这些参数添加到请求中，而无需实现方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:04:45.980

为什么不简单地使用[Preparable](http://www.jarvana.com/jarvana/view/org/apache/struts/struts2-core/2.2.1/struts2-core-2.2.1-javadoc.jar!/com/opensymphony/xwork2/Preparable.html)接口。这样你可以在 prepare() 方法中进行初始化吗？

# php - 如何使用相关实体独立设置 Symfony2 Bundle

> ID：12352281
> 
> 赞同：2
> 
> 时间：2012-09-10T12:59:54.023
> 
> 标签：php, symfony, doctrine-orm

我正在尝试找出一种聪明的方法来实现我的捆绑包，并满足以下要求：

1.  我有一个名为的逻辑捆绑包`LogicABundle`
2.  我有一个包含设计和菜单等常见事物的捆绑包 `AppBundle`
3.  `LogicBBundle`我有另一个包含与实体相关的`LogicABundle`实体的逻辑捆绑包

我知道希望能够从此设置中“部署”两个应用程序：

1.  应用程序一使用`LogicABundle`and`AppBundle`
2.  第二个使用`LogicABundle`,`LogicBBundle`和`AppBundle`

问题是，对于第二个应用程序，我需要将一些实体从`LogicABundle`to关联起来`LogicBBundle`，如果我只有一个`LogicABundle`指向的实体，这会导致第一个“部署”选项停止`LogicBBundle`。

是否有一个聪明的解决方案来独立部署这两个不同的应用程序？为了更容易理解，这里举个例子：namespace My\LogicABundle\Entity\Game；

```
use Doctrine\ORM\Mapping as ORM;
/**
 * My\LogicABundle\Entity\Game
 *
 * @ORM\Entity
 * 
 */
class Game
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string")
     */
    private $title;

    /**
     *
     * @var Message
     * @ORM\ManyToOne(targetEntity="\My\LogicBBundle\Entity\Message", inversedBy="games")
     * @ORM\JoinColumn(name="messag_id", referencedColumnName="id", nullable=false)
     * @Assert\NotNull()
     */

    private $message; 
} 
```

我希望能够在我的独立应用程序中仅使用 LogicABundle 使用 Game 类，而在我的第二个应用程序中，我需要具有消息关系的游戏实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T14:07:56.880

我不确定，但我有同样的问题，我刚刚发现：[http ://symfony.com/en/doc/current/cookbook/doctrine/resolve_target_entity.html](http://symfony.com/en/doc/current/cookbook/doctrine/resolve_target_entity.html)

希望不要迟到；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:04:34.810

如果您使用 Git（或 SVN 或其他源控制工具），我建议创建两个单独的 Symfony2 应用程序（每个都在其存储库中）。此外，每个包都有自己的存储库，我会使用 Composer 正确设置依赖项，然后作为供应商安装包（LogicABundle、LogicBBundle、AppBundle）。

**更新：**由于不同的捆绑包需要不同的实体，一种方法是在捆绑包中指定只需要基础实体的基础实体，并使用其他关系扩展另一个捆绑包中的实体（参见[Doctrine Inheritance Mapping](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html)）。

例如，`EntityA`在 LogicABundle 中定义并`EntityA2`在 LogicBBundle 中定义其中`EntityA2`扩展`EntityA`并向实体添加附加关系。

**更新：**由于您没有提供为什么需要这样做的额外信息，我现在只能猜测，但另一个想法是在两个包中简单地使用相同的实体。中的逻辑`LogicABundle`将简单地忽略其他关系。我认为这是大多数开发人员在您的情况下会做的事情。

例如，考虑提供 FOSUserBundle 等通用功能的包。该包定义了一些模型，但并非每个使用 FOSUserBundle 的应用程序都必须使用实体的每个字段（在我目前正在开发的应用程序中，我完全忽略了 FOSUserBundle 的组功能）。

如果可以使用通用实体类并忽略这些附加关系，请提供更多信息。

# haskell - 加密和字节串边界

> ID：12352282
> 
> 赞同：2
> 
> 时间：2012-09-10T12:59:58.607
> 
> 标签：haskell, encryption, aes

我有以下测试应用程序：

```
import Codec.Crypto.AES
import qualified Data.ByteString.Char8 as B

key = B.pack "Thisismykey....."

iv = B.pack "0000000000000001"

main = do 
     let myenc = crypt' CTR key iv Encrypt (B.pack "1234567812345678") 
     print (B.unpack myenc) 
```

打印以下结果：“\250\DC4\DC4\255\223\221C\ETBx\239sF\nuZu”

如果我将明文“1234567812345678”更改为“1234567812345688”，我会得到“\250\DC4\DC4\255\223\221C\ETBx\239sF\nuUu”

如果我将明文更改为“1134567812345678”，我会得到输出“\250\ETB\DC4\255\223\221C\ETBx\239sF\nuZu”

我现在非常惊讶，因为输入和输出之间显然存在可预测的相关性，恕我直言不应该发生。如果我在明文前面更改了某些内容，那么只有输出的前面会受到影响等等。这是否与字节字符串的 8 或 16 字节边界有关，我该如何解决这个问题？有什么东西在误导我吗？

与 CTR 模式无关，应该注意 AES 与 4x4 字节数组一起工作，问题是关于单个数组的加密。据我了解，AES 应该执行四轮混合，单个字节（16 个字节）的变化应该导致至少 50% 的位不同。因此，在我看来，16 字节明文末尾的更改可能不会完全更改密文的末尾，而前面的更改会更改前面等。据我了解，IV 仅作为计数器起作用当涉及多个 4x4 阵列时。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T13:10:10.000

它与haskell无关。

阅读[http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Initialization_vector_.28IV.29](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Initialization_vector_.28IV.29)

由于您在 CTR 模式下使用相同的 IV 对消息进行两次加密，因此不安全。阅读加密算法并尽量避免编写自己的加密代码，因为它更有可能存在安全漏洞。

CTR 模式的要求是 (key,IV) pair 应该是唯一的。简单的解决方案是为您加密的每条新消息生成一个新的 IV。

【CTR模式安全漏洞说明】 [https://crypto.stackexchange.com/questions/2991/why-must-iv-key-pairs-not-be-reused-in-ctr-mode](https://crypto.stackexchange.com/questions/2991/why-must-iv-key-pairs-not-be-reused-in-ctr-mode)

在 CTR 模式下 F(IV+counter,key) XOR Plaintext = CIPHER .. 所以如果 nonce 和 key 保持相同，那么 F 对于纯文本都是相同的 .. 所以如果 $C_1$ 是 $P_1$ 和 $C_2$ 的密码那么是 $P_2$ 的密码

```
xor($C_1$,$C_2$) = xor($P_1$,$P_2$) for same (key,IV) pair 
```

支持代码：

```
import Codec.Crypto.AES
import qualified Data.ByteString.Char8 as B
import qualified Data.ByteString as BS
import Data.Bits (xor) 

key = B.pack "Thisismykey....."

iv = B.pack "1234567891012131"
p1 =  (B.pack "1234567812345678") 
p2 =  (B.pack "1234567812345688") 
x = crypt' CTR key iv Encrypt p1 
y = crypt' CTR key iv Encrypt p2 

main = do 
     print $ BS.zipWith xor x y  
     print $ BS.zipWith xor p1 p2 
```

输出

```
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,0]
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,0] 
```

# objective-c - 如何终止循环/线程

> ID：12352286
> 
> 赞同：1
> 
> 时间：2012-09-10T13:00:04.770
> 
> 标签：objective-c, multithreading, cocoa

这是我的程序的一部分。按下按钮后，findDuplicates 中的循环在后台线程中开始。有没有办法通过按下另一个按钮来停止/杀死线程/循环？

```
- (IBAction)countDups:(id)sender {
   [self performSelectorInBackground:@selector(findDuplicates) withObject:nil];
}

-(void)findDuplicates
{
...
 for(int index=0;index<self.resultList.count;index++)
 { ... }
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:17:35.533

您可以从后台线程返回。创建一个成员变量，用NO初始化它。

```
- (IBAction)countDups:(id)sender {
   mCancel = NO;
   [self performSelectorInBackground:@selector(findDuplicates) withObject:nil];
}

-(IBAction)stop
{
  mCancel = YES; //BOOL member variable;
}

-(void)findDuplicates
{
...
 for(int index=0;index<self.resultList.count;index++)
 { 
   If(mCancel)
   return; // return for thread to end

  ... }
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:02:30.460

阅读**终止线程**下的[线程编程指南](http://developer.apple.com/library/IOs/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)。本质上是创建一个新线程并在其上运行代码。**`performSelectorInBackground:withObject:`**

# random - TYPO3 Extbase 查询中的 Rand()

> ID：12352287
> 
> 赞同：0
> 
> 时间：2012-09-10T13:00:09.937
> 
> 标签：random, typo3, extbase

我在 TYPO3 中使用 Extbase。

我想创建一些可以从数据库中获取随机记录的存储库函数。

有没有办法用 Extbase 查询语言解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:35:00.713

看这个问题： http: [//forge.typo3.org/issues/14026](http://forge.typo3.org/issues/14026)

似乎这仍然是 Extbase 中的一个问题。

但是有一些像这样的解决方法：http: [//typo3blogger.de/random-record-repository/](http://typo3blogger.de/random-record-repository/)

# c# - C# 重新加载表单

> ID：12352294
> 
> 赞同：0
> 
> 时间：2012-09-10T13:00:39.200
> 
> 标签：c#, winforms, forms, reload

例如，当用户更改背景颜色时，会修改 Settings.settings 文件。它有效。

但是在用户单击“确定”后，应用程序不会更改其背景颜色。它仅在我关闭并再次构建应用程序时才有效。

如何在单击按钮时重新加载表单或用户控件？（尝试使用 .Refresh()，但它不起作用）

```
 private void refreshSettings()
    {
        this.BackColor = Properties.Settings.Default.bgdColor;
        this.Font = Properties.Settings.Default.fontType;
        this.ForeColor = Properties.Settings.Default.fontColor;
    }

    private void Settings_Load(object sender, EventArgs e)
    {
        refreshSettings();
        bgdColorLBL.BackColor = Properties.Settings.Default.bgdColor;
        fontColorLBL.BackColor = Properties.Settings.Default.fontColor;
        fontTypeLBL.Font = Properties.Settings.Default.fontType;
        fontTypeLBL.Text = Properties.Settings.Default.fontType.Name;
    }

    private void okBTN_Click(object sender, EventArgs e)
    {
        LeagueUC lg = new LeagueUC();
        InitializeComponent();
        this.Close();
    }

    private void bgdColorLBL_Click(object sender, EventArgs e)
    {
        ColorDialog dlg = new ColorDialog();
        dlg.Color = Properties.Settings.Default.bgdColor;

        if (dlg.ShowDialog() == DialogResult.OK)
        {
            Properties.Settings.Default.bgdColor = dlg.Color;
            Properties.Settings.Default.Save();
            bgdColorLBL.BackColor = dlg.Color;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:06:35.793

在启动时从设置文件运行设置控件属性的任何代码。

例如

```
 private void bgdColorLBL_Click(object sender, EventArgs e) 
{ 
    ColorDialog dlg = new ColorDialog(); 
    dlg.Color = Properties.Settings.Default.bgdColor; 

    if (dlg.ShowDialog() == DialogResult.OK) 
    { 
        Properties.Settings.Default.bgdColor = dlg.Color; 
        Properties.Settings.Default.Save(); 

        Settings_Load(null, null);
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:10:25.477

在按钮单击事件上，只需从设置文件中加载背景色。就像是：

```
this.BackColor = Properties.Settings.Default.Color; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:18:20.070

您可以为其创建[绑定](http://msdn.microsoft.com/en-us/library/ms750612.aspx)。通过一些小技巧，绑定甚至可以允许即时界面语言切换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:00:54.067

试试这个，这会以您从 ColorDialog 中选择的颜色更改表单的背景颜色：

```
 private void button2_Click(object sender, EventArgs e)
    {
        ColorDialog dlg = new ColorDialog();

        if (dlg.ShowDialog() == DialogResult.OK)
        {
            this.BackColor = System.Drawing.Color.FromName(dlg.Color.Name);
        }
    } 
```

# android - 直接设置layoutparams或在addView中设置的区别

> ID：12352297
> 
> 赞同：3
> 
> 时间：2012-09-10T13:00:59.460
> 
> 标签：android

我想知道两者之间是否有区别

```
LinearLayout.LayoutParams separatorParams = new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

TextView separator = new TextView(context);
separator.setLayoutParams(seperatorParams);

this.addView(separator); 
```

或者

```
LinearLayout.LayoutParams separatorParams = new LinearLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

TextView separator = new TextView(context);

this.addView(separator,separatorParams); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:06:39.427

根据源代码，基本上没有区别，因为`addView(View view)`调用`addView(view, view.getLayoutParams())`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:07:02.603

绝对没有。

`this.addView(separator);` 将从孩子那里获取参数或生成它。

其中：`this.addView(separator,separatorParams);` 将使用参数然后将其添加到布局中。

看看[这里的来源](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/view/ViewGroup.java)

# php - 流控制取决于 xml 元素的值

> ID：12352300
> 
> 赞同：5
> 
> 时间：2012-09-10T13:01:07.677
> 
> 标签：php, xml

我有一个包含 500 多个项目的长 xml 数据文件，它采用以下形式：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<CATALOG>
<ITEM>
    <TITLE>ITEM name</TITLE>
    <TYPE>TYPE </TYPE>
    <DESCIPTION>DESCIPTIONiliate Page CPM</DESCIPTION>
    <PRICE>PRICE</PRICE>
    <ITEM>http://mysite.com/item-link</ITEM>
</ITEM>
</CATALOG> 
```

我在 php 页面中使用以下代码从 xml 文件中导入数据：

```
<?php
$ITEMSS = new SimpleXMLElement('ITEMS.xml', null, true);

echo <<<EOF
<table width="100%" align="center" border="1" bordercolor="#0099ff" cellpadding="1" cellspacing="0">

    <tr>
            <th bgcolor="#66ccff"><span class="style4">ITEM Name</span></th>
            <th bgcolor="#66ccff"><span class="style4">item TYPE </span></th>
            <th bgcolor="#66ccff"><span class="style4">item DESCIPTION </span></th>
            <th bgcolor="#66ccff"><span class="style4">item PRICE</span></th>
            <th bgcolor="#66ccff"><span class="style4">link to item</span></th>
    </tr>

EOF;
foreach($ITEMSS as $ITEMS) // loop through our DATAS
{
    echo <<<EOF
    <tr height="30" align=middle>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><span class="STYLE7">{$ITEMS->TITLE}</span></a></td>
            <td><span class="STYLE8">{$ITEMS->TYPE}</span></td>
            <td><span class="STYLE8">{$ITEMS->DESCIPTION}</span></td>
            <td><span class="STYLE8">{$ITEMS->PRICE}</span></td>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><B><span class="STYLE7">cHECK IT OUT</span></B></a></td>
    </tr>

EOF;
}
echo '</table>';
?> 
```

我需要在循环中添加一个“if”语句以仅选择一些数据，如果“TYPE”具有某个值，它将显示该数据，如果没有它将跳过它。

还需要添加分页系统，因为要列出 500 多个项目，所以我希望表格显示混合的项目数，比如 25。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:13:34.067

作为替代方案，您可以通过[xpath](http://www.w3.org/TR/xpath/)仅选择（和处理）在 TYPE 元素中具有特定文本值的那些 ITEM 元素，例如

```
<?php
$doc = new SimpleXmlElement(getData());
foreach($doc->xpath("//ITEM[TYPE='A']") as $item) {
    echo $item->DESCIPTION, "\n";
}

function getData() {
    return <<< eox
<?xml version="1.0" encoding="ISO-8859-1"?>
<CATALOG>
<ITEM>
    <TITLE>item 1</TITLE>
    <TYPE>A</TYPE>
    <DESCIPTION>desc1</DESCIPTION>
    <PRICE>price1</PRICE>
    <ITEM>item1-link</ITEM>
</ITEM>
<ITEM>
    <TITLE>item x</TITLE>
    <TYPE>B</TYPE>
    <DESCIPTION>descx</DESCIPTION>
    <PRICE>pricex</PRICE>
    <ITEM>itemx-link</ITEM>
</ITEM>
<ITEM>
    <TITLE>item y</TITLE>
    <TYPE>B</TYPE>
    <DESCIPTION>descy</DESCIPTION>
    <PRICE>pricey</PRICE>
    <ITEM>itemy-link</ITEM>
</ITEM>
<ITEM>
    <TITLE>item 2</TITLE>
    <TYPE>A</TYPE>
    <DESCIPTION>desc2</DESCIPTION>
    <PRICE>price2</PRICE>
    <ITEM>item2-link</ITEM>
</ITEM>
</CATALOG>
eox;
} 
```

印刷

```
desc1
desc2 
```

-- 编辑：带有一些分页功能 --

```
<?php
define('ITEMS_PER_PAGE', 10);
$page = 1; // =intval($_GET['page']);

$posMin = $page*ITEMS_PER_PAGE;
$posMax = ($page+1)*ITEMS_PER_PAGE;
$doc = new SimpleXmlElement(getData());
foreach($doc->xpath("(//ITEM[TYPE='A'])[position()>=$posMin and position()<$posMax]") as $item) {
    echo $item->DESCIPTION, "\n";
}

function getData() {
    $xml = '<?xml version="1.0" encoding="ISO-8859-1"?>
<CATALOG>';
    for($i=0; $i<100; $i++) {
        $type = 0===$i%2 ? 'A':'B';
        $xml .= "   
        <ITEM>
        <TITLE>item $i</TITLE>
        <TYPE>$type</TYPE>
        <DESCIPTION>desc $i</DESCIPTION>
        <PRICE>price $i</PRICE>
        <ITEM>item{$i}-link</ITEM>
        </ITEM>";
    }
    $xml.='</CATALOG>';
    return $xml;
} 
```

该函数`getData()`只是一些返回一些 xml 数据的样板。
要了解 xpath 查询，请阅读（好的）xpath 教程，请参阅[使用 XPATH 访问 XML 元素（原为：学习 xpath 的好教程）](https://stackoverflow.com/questions/3423920/using-xpath-to-access-xml-elements-was-good-tutorial-to-learn-xpath)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:04:19.563

您可以这样添加循环：

```
foreach($ITEMSS as $ITEMS) // loop through our DATAS
{
    if($ITEMS->TYPE=="BoogeyWoogey")
    {
        echo <<<EOF
        <tr height="30" align=middle>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><span class="STYLE7">{$ITEMS->TITLE}</span></a></td>
            <td><span class="STYLE8">{$ITEMS->TYPE}</span></td>
            <td><span class="STYLE8">{$ITEMS->DESCIPTION}</span></td>
            <td><span class="STYLE8">{$ITEMS->PRICE}</span></td>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><B><span class="STYLE7">cHECK IT OUT</span></B></a></td>
        </tr>

EOF;
    }
} 
```

假设您正在循环，并且只想在属性中有值`foreach`时才显示。`$ITEMS->TYPE``BoogeyWoogey`

分页部分不会*那么*简单。

你可以这样做：

您可以这样添加循环：

```
$myLimit=(!empty($_REQUEST['myLimit']) ? $_REQUEST['myLimit'] : 0;
foreach($ITEMSS as $ITEMS) // loop through our DATAS
{
    for($i=$myLimit;$i<$myLimit+25;$i++)
    {
        if($ITEMS->ITEM=="BoogeyWoogey")
        {
            echo <<<EOF
            <tr height="30" align=middle>
                <td><a href="{$ITEMS->ITEM}" target="_blank"><span class="STYLE7">{$ITEMS->TITLE}</span></a></td>
                <td><span class="STYLE8">{$ITEMS->TYPE}</span></td>
                <td><span class="STYLE8">{$ITEMS->DESCIPTION}</span></td>
                <td><span class="STYLE8">{$ITEMS->PRICE}</span></td>
                <td><a href="{$ITEMS->ITEM}" target="_blank"><B><span class="STYLE7">cHECK IT OUT</span></B></a></td>
            </tr>

            EOF;
        }
    }
} 
```

但是您需要将变量 $myLimit 通过 a`$GET`或`$_POST`传递给页面以在循环中使用它。（随意更改它以使用 a`$_SESSION`或其他任何适合您的东西 - 我认为在链接中使用变量将是最简单的，所以很可能 a`$GET`应该做的伎俩。

# javafx-2 - 当我上下滚动表格视图时，Java FX 2.2 表格视图数据发生变化

> ID：12352305
> 
> 赞同：2
> 
> 时间：2012-09-10T13:01:21.837
> 
> 标签：javafx-2

我在 JavaFX2.2 中使用过 tableView。我有一列，其中保存了用户单击按钮时更新的值。这些值是动态填充的，直到这部分工作正常。但是，当我向下滚动表格以查看表格中的其他值时，单元格数据会发生变化。你能建议我需要做什么来解决这个问题吗？

这是我动态填充的表格单元格的代码，并且在向下滚动表格时会发生变化。

```
 Callback<TableColumn, TableCell> cellFactoryField = new Callback<TableColumn, TableCell>() {                

        @Override
        public TableCell call(final TableColumn param) {
            final Button button = new Button("Select Field");                    
            final TableCell cell = new TableCell() {

                @Override
                public void updateItem(Object item, boolean empty) {
                    super.updateItem(item, empty);
//                                label.setText("Here");                            
                    if (empty) {
//                                System.out.println("table cell inside updateitem = "+item);
//                                setGraphic(null);
                    }
                    else
                    {      

                    }
                }
            };
            button.setOnAction(new EventHandler<ActionEvent>() {
                private CheckBoxTreeItem<String> checkBoxTreeItem;
                private CheckBoxTreeItem<String> nodeFieldName;
                private CheckBoxTreeItem<String> nodeFieldName2;
                private CheckBoxTreeItem<String> nodeFieldName3;
                private Stage stage = new Stage();

                @Override public void handle(ActionEvent e) 
                {
                    CheckBoxTreeItem<String> rootItem = 
                        new CheckBoxTreeItem<String>("Tables");                            
                    rootItem.setExpanded(true);                  

                    final TreeView tree = new TreeView(rootItem);  
                    tree.setEditable(true);

                    tree.setCellFactory(CheckBoxTreeCell.<String>forTreeView());                                                            
                    {
                        checkBoxTreeItem = new CheckBoxTreeItem<String>("Sample Table" );//+ (i+1));                                
                        rootItem.getChildren().add(checkBoxTreeItem);                                                
                        nodeFieldName = new CheckBoxTreeItem<String>("Field Name1");                                
                        nodeFieldName2 = new CheckBoxTreeItem<String>("Field Name2");
                        nodeFieldName3 = new CheckBoxTreeItem<String>("Field Name3");
                        checkBoxTreeItem.getChildren().addAll(nodeFieldName, nodeFieldName2, nodeFieldName3);                    

                    }                                    
                    tree.setRoot(rootItem);
                    tree.setShowRoot(true);                            
                    StackPane root = new StackPane();                                
                    root.getChildren().add(tree);
                    Button selectButton = new Button("Select");
                    HBox hbox = new HBox();
                    hbox.getChildren().add(selectButton);
                    hbox.setAlignment(Pos.CENTER);
                    selectButton.setOnAction(new EventHandler<ActionEvent>(){

                        @Override
                        public void handle(ActionEvent t) {

                            final ArrayList<String> selectedValues = new ArrayList<String>(); 
     //                                    System.out.println("Selected tree items are : ");
                            if(checkBoxTreeItem.isSelected())
                                selectedValues.add(checkBoxTreeItem.getValue());
                            if(nodeFieldName.isSelected())
                                selectedValues.add(nodeFieldName.getValue());
                            if(nodeFieldName2.isSelected())
                                selectedValues.add(nodeFieldName2.getValue());
                            if(nodeFieldName3.isSelected())
                                selectedValues.add(nodeFieldName3.getValue());                               
                            stage.hide();                                
                            for(int i = 0; i<selectedValues.size();i++)
                            {
                                if(i == selectedValues.size()-1)
                                    selectedVals += selectedValues.get(i);    
                                else                                            
                                    selectedVals += selectedValues.get(i)+",";    
                            }
                            fieldNameChosen = true;
                            if(fieldNameChosen)
                                cell.setGraphic(new Label(selectedVals));
                            else
                                cell.setGraphic(button);
                        }
                    });
                    BorderPane borderPane = new BorderPane();
                    borderPane.setCenter(root);
                    borderPane.setBottom(hbox);
                    stage.setScene(new Scene(new Group(borderPane)));                             
                    stage.show();
                }
            });
            if(!(cell.getGraphic() instanceof Label))
                cell.setGraphic(button);
            return cell;
        }
    };
    fieldName.setCellFactory(cellFactoryField); 
```

对于另一个需要动态显示另一个表中的值的字段，我遇到了类似的问题。下面是我使用的代码。

```
 final int k = 0;  
    value.setCellValueFactory(new Callback<CellDataFeatures<ObservableList, String>, ObservableValue<String>>() {
        int noOfDataCells = k;
        public ObservableValue<String> call(CellDataFeatures<ObservableList, String> param) 
        {                    

            TableColumn column = param.getTableColumn();
            int size = 0;
            if(tableView1.getItems()!=null)
                size = ((ObservableList) tableView1.getItems().get(0)).size();
            String valueFromData = "";
            if(noOfDataCells<size)
            {
                valueFromData = String.valueOf(((ObservableList) tableView1.getItems().get(0)).get(noOfDataCells));                                                               
            }
            else if(noOfDataCells == size)
            {
                noOfDataCells = 0;
                valueFromData = String.valueOf(((ObservableList) tableView1.getItems().get(0)).get(noOfDataCells));  
            }
            else if (noOfDataCells>size)
            {
                valueFromData = "";
            }
            noOfDataCells++;
            //TODO SET THE VALUE IN THE MODEL 
```

// ((MetaTag) column.getTableView().getItems().get( // .getIndex())).setFieldName(selectedVals);

```
 return new SimpleStringProperty(valueFromData);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:32:42.553

还有下一个问题：

1.  您正在使用表格编辑功能而没有实现所需的 API
2.  您更新工厂中的单元格，但不会更新 Table 备份的数据
3.  单元格在滚动时被破坏（出于性能原因）并重新创建，因此您的所有更改都会被破坏。

请参阅下一个有关 TableView 编辑正确方法的教程：http: [//docs.oracle.com/javafx/2/ui_controls/table-view.htm](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)

我还创建了一个小程序，它使用 TreeCheckBox 阶段通过双击单元格来更新表格。我已经用评论标记了最重要的地方。

```
public class TableCellEditing extends Application {

    private void init(Stage primaryStage) {
        StackPane root = new StackPane();
        primaryStage.setScene(new Scene(root, 400, 200));
        // you didn't provided data which your Tables use so example will work with Person class
        final ObservableList<Person> data = FXCollections.observableArrayList(
                new Person("click to edit", "Smith"),
                new Person("", "Johnson"),
                new Person("", "Williams1"),
                new Person("", "Williams2"),
                new Person("", "Williams3"),
                new Person("", "Williams4"),
                new Person("", "Williams5"),
                new Person("", "Jones"),
                new Person("", "Brown"),
                new Person("", "Brown2"));

        TableView tableView = new TableView();
        tableView.setItems(data);
        // make table editable
        tableView.setEditable(true);

        TableColumn lastNameCol = new TableColumn();
        lastNameCol.setText("Last");
        lastNameCol.setCellValueFactory(new PropertyValueFactory("lastName"));

        TableColumn firstNameCol = new TableColumn();
        firstNameCol.setText("First");
        // here you connect data list with table column
        firstNameCol.setCellValueFactory(new PropertyValueFactory("firstName"));
        // here you specify that your cells are special and provide editing hooks
        firstNameCol.setCellFactory(new Callback<TableColumn, TableCell>() {
            @Override
            public TableCell call(final TableColumn param) {

                final TableCell cell = new TableCell() {
                    @Override
                    // this method is called on editable tables by double click
                    public void startEdit() {
                        super.startEdit();
                        // here we create new Stage to select items from tree
                        new CheckBoxTreeStage(this).show();
                    }

                    @Override
                    public void updateItem(Object item, boolean empty) {
                        super.updateItem(item, empty);
                        if (empty) {
                            setText(null);
                        } else {
                            if (isEditing()) {
                                setText(null);
                            } else {
                                // this is the place where we update data by chosen value
                                setText(getItem().toString());
                                setGraphic(null);
                            }
                        }
                    }
                };
                return cell;
            }
        });

        tableView.getColumns().addAll(firstNameCol, lastNameCol);
        tableView.setFocusTraversable(false);
        root.getChildren().add(tableView);
    }

    // I've extracted your stage to a separate class for better readability
    private static class CheckBoxTreeStage extends Stage {

        private CheckBoxTreeItem<String> checkBoxTreeItem;
        private CheckBoxTreeItem<String> nodeFieldName;
        private CheckBoxTreeItem<String> nodeFieldName2;
        private CheckBoxTreeItem<String> nodeFieldName3;

        public CheckBoxTreeStage(final TableCell cell) {
            CheckBoxTreeItem<String> rootItem =
                    new CheckBoxTreeItem<String>("Tables");
            rootItem.setExpanded(true);

            final TreeView tree = new TreeView(rootItem);
            tree.setEditable(true);

            tree.setCellFactory(CheckBoxTreeCell.<String>forTreeView());
            {
                checkBoxTreeItem = new CheckBoxTreeItem<String>("Sample Table");//+ (i+1));                                
                rootItem.getChildren().add(checkBoxTreeItem);
                nodeFieldName = new CheckBoxTreeItem<String>("Field Name1");
                nodeFieldName2 = new CheckBoxTreeItem<String>("Field Name2");
                nodeFieldName3 = new CheckBoxTreeItem<String>("Field Name3");
                checkBoxTreeItem.getChildren().addAll(nodeFieldName, nodeFieldName2, nodeFieldName3);

            }
            tree.setRoot(rootItem);
            tree.setShowRoot(true);
            StackPane root = new StackPane();
            root.getChildren().add(tree);
            Button selectButton = new Button("Select");
            HBox hbox = new HBox();
            hbox.getChildren().add(selectButton);
            hbox.setAlignment(Pos.CENTER);
            selectButton.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent t) {

                    final ArrayList<String> selectedValues = new ArrayList<String>();
                    //                                    System.out.println("Selected tree items are : ");
                    if (checkBoxTreeItem.isSelected()) {
                        selectedValues.add(checkBoxTreeItem.getValue());
                    }
                    if (nodeFieldName.isSelected()) {
                        selectedValues.add(nodeFieldName.getValue());
                    }
                    if (nodeFieldName2.isSelected()) {
                        selectedValues.add(nodeFieldName2.getValue());
                    }
                    if (nodeFieldName3.isSelected()) {
                        selectedValues.add(nodeFieldName3.getValue());
                    }
                    hide();
                    String selectedVals = "";
                    for (int i = 0; i < selectedValues.size(); i++) {
                        if (i == selectedValues.size() - 1) {
                            selectedVals += selectedValues.get(i);
                        } else {
                            selectedVals += selectedValues.get(i) + ",";
                        }
                    }
                    boolean fieldNameChosen = true;
                    if (fieldNameChosen) {
                        cell.commitEdit(selectedVals);
                    } else {
                        cell.cancelEdit();
                    }
                }
            });
            BorderPane borderPane = new BorderPane();
            borderPane.setCenter(root);
            borderPane.setBottom(hbox);
            setScene(new Scene(new Group(borderPane)));
        }
    };

    public static class Person {

        private StringProperty firstName;
        private StringProperty lastName;

        private Person(String fName, String lName) {
            this.firstName = new SimpleStringProperty(fName);
            this.lastName = new SimpleStringProperty(lName);
        }

        public StringProperty firstNameProperty() {
            return firstName;
        }

        public StringProperty lastNameProperty() {
            return lastName;
        }
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# .htaccess - 使用 htaccess 将非 SSL 重定向到错误页面

> ID：12352309
> 
> 赞同：0
> 
> 时间：2012-09-10T13:01:32.460
> 
> 标签：.htaccess, ssl

我找到了几种将非 SSL 重定向到 SSL 的解决方案，但我不想出于特定目的这样做。因为它仍然会通过互联网发送未加密的信息。

我想强制用户调用 SSL，否则他们无法使用该页面。

所以我需要将非 SSL 重定向到错误页面（简单的 HTML）。如果页面被 SSL 访问，则什么也不做。

有人对此有很好的htaccess吗？最好与 CodeIgniter 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:08:19.550

> 我找到了几种将非 SSL 重定向到 SSL 的解决方案……它仍然会通过 Internet 发送未加密的信息。

如果您收到非 SSL 请求并立即执行 30X 重定向，则传递的唯一未加密数据是请求的 URL 和重定向标头。我怀疑这有什么害处。

将所有非 SSL 请求发送到一页：

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteRule .* insecure.html [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:06:55.387

如果您想将非 SSL 用户重定向到错误页面，请使用此（请注意，这会将非 SSL 用户重定向到您网站的所有页面）：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTPS} off
RewriteRule . error.php [L] 
```

如果您希望用户看到自己被重定向到错误页面，请将`[R]`标志添加到最后一行：

```
RewriteRule . error.php [L,R] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:06:28.723

您应该能够添加 mod_rewrite 规则来执行此操作，在文档根目录的 htaccess 文件中的任何 CI 规则*之前添加这些规则：*

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteRule ^name-of-protected-page /non-ssl-error-page.html [L,R] 
```

# java - 使用 DynamicJasper API：使用交叉表获取空报告

> ID：12352313
> 
> 赞同：0
> 
> 时间：2012-09-10T13:01:57.093
> 
> 标签：java, jasper-reports, crosstab, dynamic-jasper

我尝试创建动态*交叉表*。当我尝试时，我有一个错误[java.lang.ClassCastException Jasper Report Crosstab](https://stackoverflow.com/questions/12317912/java-lang-classcastexception-jasper-report-crosstab)，而不是我解决它。但是我的报告是空的。我不明白为什么。我检查我的结果集是否为空。但它不为空。

这是我的代码：

```
public class DynamicJasperTemplate{
.....//variables define here    

public void buildReport() throws Exception{
    ....//I create query here and get row column and measure field name
    JRDataSource ds = getDataSource(query,a,b,c);//I get data from db as jrdatasource
    DynamicReport dr = buildReportLayout(a,b,c,ds); // build report layout and add it crosstab in this method.

    params.put("sr",ds);//I set report parameter value

    JasperReport jr = DynamicJasperHelper.generateJasperReport(dr, new ClassicLayoutManager(), params);
    JasperPrint jp = JasperFillManager.fillReport(jr, params, ds);
    JasperExportManager.exportReportToPdfFile(jp,"C:/report-out.pdf");

}

private DynamicReport buildReportLayout(String[] a,String[] b,String[] c, JRDataSource ds) {
    FastReportBuilder drb = new FastReportBuilder();
    drb.setWhenNoDataAllSectionNoDetail();
    initStyles();
    CrosstabBuilder cb = new CrosstabBuilder();

    cb.setHeight(200)
                .setWidth(500)
                .setHeaderStyle(mainHeaderStyle)
                .setDatasource("sr",DJConstants.DATA_SOURCE_ORIGIN_REPORT_DATASOURCE, DJConstants.DATA_SOURCE_TYPE_JRDATASOURCE)
                .setUseFullWidth(true)
                .setColorScheme(4)
                .setAutomaticTitle(true)
                .setCellBorder(Border.PEN_1_POINT());

    Object obj="NUMBER";
    Object obj1="VARCHAR2";
    String type = null;
    for(int i=0; i<a.length; i++) {
        DJCrosstabRow row = new CrosstabRowBuilder().setProperty(a[i],String.class.getName())
                            .setHeaderWidth(100).setHeight(0)
                            .setTitle(a[i])
                            .setShowTotals(true).setTotalStyle(totalStyle)
                            .setTotalHeaderStyle(totalHeader).setHeaderStyle(colAndRowHeaderStyle)
                            .build();
        cb.addRow(row);
    }

    DJCrosstabColumn col =new CrosstabColumnBuilder().setProperty(b.toString(),"java.sql.Timestamp")
                                    .setHeaderHeight(60).setWidth(50)
                                    .setTitle(b.toString()).setShowTotals(true)
                                    .setTotalStyle(totalStyle).setTotalHeaderStyle(totalHeader)
                                    .setHeaderStyle(colAndRowHeaderStyle)
                                    .build();
    cb.addColumn(col);
    cb.addMeasure(c[0],"java.math.BigDecimal", DJCalculation.NOTHING , c[0],measureStyle);      
    djcross = cb.build();
    drb.addHeaderCrosstab(djcross);
    drb.setUseFullPageWidth(true);
    drb.addParameter("sr", "java.util.Collection");

    DynamicReport dr = drb.build();
    return dr;
}

private void initStyles() {
    ....//here ı define styles
}

private JRDataSource getDataSource(String query,String[] a,String[] b,String[] c) throws SQLException, JRException {

    Connection con = new getConnection().conn();
    List<Map<String, ?>> arr = new ArrayList<Map<String, ?>>();
    String columnValue;
    Map data = new HashMap();
    JRResultSetDataSource result = null;
    ResultSet rs = null;
    int i;
    try{
        if(con!=null){
                Statement stmt = con.createStatement();
                rs = stmt.executeQuery(query);  
                JRDataSource ds = new JRResultSetDataSource(rs);
                return ds;
        }
    ...... 
```

我希望你能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:21:48.413

我在这里解决了我的问题解决方案：当我删除`drb.addParameter("sr", "java.util.Collection");`并且`b.toString()`我因为未知列更改它时出错 b[0] 比我的问题解决了。

# iphone - 如何在ios中设置解压文件的密码

> ID：12352318
> 
> 赞同：0
> 
> 时间：2012-09-10T13:02:04.557
> 
> 标签：iphone

> **可能重复：**
> [Obj-C，压缩和解压缩的压缩库，有密码保护？](https://stackoverflow.com/questions/8313571/obj-c-zip-libary-which-will-zip-and-unzip-with-password-protection)

我正在开发一个应用程序。如果我将解压缩文件夹保存在文档目录中，那么用户可以使用 iExplorer 访问该信息。所以我想为该解压缩文件设置密码。所以请告诉我如何设置该解压缩文件的密码文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:58:14.580

如果您要使用[ZipAcrhive](http://code.google.com/p/ziparchive/)。然后，您将使用以下命令保存一个带有密码的 zip 文件：

`-(BOOL) CreateZipFile2:(NSString*) zipFile Password:(NSString*) password;`

然后您可以使用以下命令打开它：

`-(BOOL) UnzipOpenFile:(NSString*) zipFile Password:(NSString*) password;`

和

`-(BOOL) UnzipFileTo:(NSString*) path overWrite:(BOOL) overwrite;`

# jquery - 语法错误：标签无效

> ID：12352320
> 
> 赞同：0
> 
> 时间：2012-09-10T13:02:07.240
> 
> 标签：jquery, ajax

你好现在花了几个小时，我不知道这里发生了什么。当我使用 jquery 1.8 发送 ajax 请求时，我总是收到以下错误：

> “语法错误：标签无效”

这是我的代码...

```
 $(document).ready(function() {

    $("#create-workspace-button").click(function () {
        show_dialog($(this));
    })
    $("#submit-create-workspace").live("click", function(event){
        event.preventDefault();
        category= $("#id_workspace_category").val();
        workspace_name=$("#id_workspace_name").val()
        var json_data = JSON.stringify({
            "cat":category,
            "workspace_name":workspace_name

        })
        $.ajaxSetup({
            headers: {
                'X-CSRFToken': $("input[name=csrfmiddlewaretoken]").val()

            }
        })
        $.ajax({
            type:'POST',
            data:json_data,
            url: '/workspace/create/',
            success: function(data) {
                alert('hi')

            },
            error: function(jqXHR, textStatus, errorThrown)
            {
                //here a label error happens...i dont know why
                console.log(errorThrown)
            }
        })

    });

    $("#close").click(function () {
        close_dialog($(this));
    })

    function close_dialog(thiz){
        $(thiz).fadeOut(function(){
            $('#layer,.form-submit-dialogbox').fadeOut();
        })
    }
    function show_dialog(thiz){

        $('#layer,.form-submit-dialogbox, #close').fadeIn();
    }
}) 
```

编辑“JSON.stringify（”被错过了......但同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:26:38.317

您是在询问语法错误还是参考错误？您已经编辑了代码，但没有编辑标题...

您的引用错误可能是因为您引用的是全局`console`对象，在某些浏览器中，该对象仅在控制台打开时才存在。

您的语法错误可能是因为`)`代码末尾有额外的右括号，但如果没有看到更广泛的上下文，就很难分辨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:46:04.497

当 ajax 部分看起来像这样时，它可以工作......

```
 $.ajax({
            type : 'POST',
            url :  '/workspace/create/',
            async: false,
            dataType : 'json',
            cache:false,
            data: {
                cat:category,
                workspace_name:workspace_name
            },
            success : function(data){
            //alert(data[0].title);

            },
            error: function(){
                console.log('problems with data transfer');
            }

        }); 
```

# iphone - 如何在代码中实现以节省电池寿命但保持 iphone 应用程序运行？

> ID：12352325
> 
> 赞同：0
> 
> 时间：2012-09-10T13:02:13.580
> 
> 标签：iphone, keep-alive, battery, consumption

我有一个用于录音的 iPhone 应用程序。我想要实现的是让应用程序保持活力以进行连续录制，但同时节省电池寿命，即节省功耗

请注意，我使用以下代码使应用程序保持活动状态。

```
[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:11:21.447

我认为没有任何方法可以立即“节省电池寿命”。您可能唯一能做的就是最小化读/写操作、互联网访问等。您必须在代码中手动执行此操作。

# java - 如何在 java 中使用 \\p{Punct} 来检查文本行的开头：{"

> ID：12352327
> 
> 赞同：2
> 
> 时间：2012-09-10T13:02:24.590
> 
> 标签：java, regex

给定一个以符号**{"**开头并以**"}结尾的***字符串*。行之间还存在其他标点符号，例如：、' 或 "" 等。如何使用 java regex 实用程序来了解给定的字符串是否以**{"**开头。我正在尝试使用以下方法返回布尔值：

 ******```
Pattern.matches(begin, string) 
```

在哪里

```
begin = "[\\p{Punct}&&[{]]" 
```

和

```
string = {"name":"Aman"},{"surname":"Gupta"}. 
```

（请建议使用 regex 选项而不是 JSON）我想只使用 regex 来做到这一点。请提出一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:33:11.110

你应该像这样尝试：

```
 Pattern p = Pattern.compile("\{.*?\}");
 Matcher m = p.matcher(/*your string here*/);
 while (m.find()){
     String substringInBraces = m.group();
     /*do smth with your substring*/
 } 
```

这将为您提供可能位于两个最近的花括号之间的任何内容的子字符串。

你可能有兴趣阅读[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html "这个")和[这个](http://www.vogella.com/articles/JavaRegularExpressions/article.html "这个")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:25:16.947

`Pattern.compile("^{").matcher(string).find()`

我不知道你为什么坚持使用`\\p{Punct}`，这里完全没有必要。

请注意，`Pattern.matches()`要匹配整个字符串，因此当您只想匹配字符串开头的某些内容时，它没有用。******

# mercurial - Mercurial 2.3 - 为什么 {latesttag} 为空？

> ID：12352331
> 
> 赞同：2
> 
> 时间：2012-09-10T13:02:45.710
> 
> 标签：mercurial

我用来`hg parents --template {latesttag}+{latesttagdistance}`给我一个版本文件。我明白了`null+78`。

这就是我`hg parents`得到的：

```
changeset:   79:74a86aec9582
tag:         0.8.010
tag:         tip
user:        XYZ
date:        Mon Sep 10 14:48:03 2012 +0200
summary:     jQuery, jQuery UI, and jqGrid updates completed as basis 
```

**为什么我没有得到** `0.8.010 tag+1`？

![水银视觉](../Images/879e317b9bd70da5f2e9093211084298.png)

该`latesttag`方法是标准的，如下所述：

1.  [https://stackoverflow.com/a/4367747/356726](https://stackoverflow.com/a/4367747/356726)
2.  [如何从 Powershell 中获取最新的 Mercurial 标签](https://stackoverflow.com/questions/6180786/how-do-i-get-the-latest-mercurial-tag-from-within-powershell)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T15:01:15.857

[`hg help templates`](https://www.mercurial-scm.org/repo/hg/help/templating)定义`latesttag`为：

> 此变更集的祖先中的最新全局标记。

看来这`0.8.010`只是一个本地标签（没有提交创建全局标签）。本地标签不显示在`{latesttag}`.

# ipad - 激活调试控制台后 Safari 的窗口高度是多少？

> ID：12352333
> 
> 赞同：1
> 
> 时间：2012-09-10T13:02:51.840
> 
> 标签：ipad, safari, viewport

我可能没有找到正确的位置，但是在激活调试控制台后，我无法找出 iPad 的 Safari 窗口高度。

对于简单的宽度，它仍然是标准的横向 1024 像素，纵向 728 像素。

但是，激活控制台后浏览器视口的标准高度是多少？[类似的](https://stackoverflow.com/questions/8449028/height-of-the-ipad-safari-viewport) [问题](https://stackoverflow.com/questions/2880520/how-large-is-the-usable-area-in-ipad-safari?rq=1)没有包含这个看似简单的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:02:51.840

在使用 iOs 5 和 6 对所有 iPad 代（前三代，在撰写本文时）的输出调试 div 进行检查后，我确定了两个方向的 Safari 的高度（显示网站的可见部分），使用并且没有调试控制台。

**纵向**

*   没有控制台：672px
*   使用控制台：622px

**横向**

*   没有控制台：928px
*   使用控制台：878px

所以调试控制台的高度为**50 像素**，导航栏为**96 像素**

# sql - GreenDao 删除联结表中的一行

> ID：12352337
> 
> 赞同：1
> 
> 时间：2012-09-10T13:03:02.460
> 
> 标签：sql, sqlite, greendao

我有一个接线表 | USER_ID | ORDER_ID | 现在，当我试图删除表中的一行时，我遇到了 `does not have a single-column primary key`错误。

现在当然表的两个列都是 FK，我不能在其中添加 PK 列，因为它是一个联结表。

我在用着 ：

```
userJoinOrdersDao.delete(userOrderObj); 
```

有人看到我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:25:07.057

联结表的主键由两列组成。greenDAO 不支持这一点。

[http://greendao-orm.com/documentation/relations/](http://greendao-orm.com/documentation/relations/)说：

> 虽然 greenDAO 目前不直接支持 n:m 关系，但您可以将连接表建模为单独的实体。

...这将需要一个单独的 PK 列。

* * *

一个订单真的需要有多个用户吗？

# web-crawler - nutch 命中率限制

> ID：12352338
> 
> 赞同：0
> 
> 时间：2012-09-10T13:03:04.853
> 
> 标签：web-crawler, nutch, robots.txt

是否可以用 nutch 限制命中率/IP 地址？换句话说，我可以配置 nutch 使其每小时仅命中 IP x 次等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:09:04.607

是的，您可以通过更改 nutch-default.xml 文件中的 fetcher.server.delay、fetcher.server.min.delay、fetcher.threads.per.queue、fetcher.queue.mode 设置值来限制速率。

# ios - 动画 UITableView 替换 - 在动画完成之前不显示数据

> ID：12352339
> 
> 赞同：0
> 
> 时间：2012-09-10T13:03:04.390
> 
> 标签：ios, uitableview, uiviewanimationtransition

我有 UISplitViewController，它在主视图和详细视图中显示 UITableView。

当用户在主视图表中选择一个项目时，我会在详细视图中重新加载该表，并且我想通过页面卷曲来制作动画。

这是我正在使用的代码：

```
UITableView *newTableView = [[UITableView alloc] initWithFrame:self.tableView.frame style:UITableViewStylePlain];

[newTableView reloadData]; // ineffective attempt to load data prior to transition

[UIView transitionFromView:self.tableView
            toView:newTableView
            duration:0.8
            options:UIViewAnimationOptionTransitionCurlUp
            completion:^(BOOL finished)
                {
                    [newTableView reloadData]; // needed
                    [self setTableView:newTableView];
                    [newTableView release];
                }]; 
```

转换发生了，但“显示”的 UITableView 只是一个普通的未填充的 UITableView，除非我强制重新加载完成块中的数据。然后，如果我这样做，我会转换到一个空表，然后重新加载以显示预期的数据 - 不是很好。

我怎样才能使显示的表格已经显示所需的数据？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:08:25.463

我想这应该可行。

```
UITableView *newTableView = [[UITableView alloc] initWithFrame:self.tableView.frame style:UITableViewStylePlain];

[self setTableView:newTableView]; //until the table is set, there is no use reloading it
[newTableView reloadData]; // it should reload now and then animate

[UIView transitionFromView:self.tableView
            toView:newTableView
            duration:0.8
            options:UIViewAnimationOptionTransitionCurlUp
            completion:^(BOOL finished)
                {
                    [newTableView reloadData]; // needed
                    [self setTableView:newTableView];
                    [newTableView release];
                }]; 
```

`[self setTableView:newTableView];`你在上面失踪了`reloadData`。希望能帮助到你。快乐编码:)

# browser - 服务器向客户端浏览器发送推送通知而不使用轮询

> ID：12352341
> 
> 赞同：10
> 
> 时间：2012-09-10T13:03:06.470
> 
> 标签：browser, push-notification, server-push

我正在开发一个 Web 应用程序，我希望当数据库发生某些更改时，服务器向特定客户端发送响应（***如推送通知***）。我希望将此通知发送到客户端的浏览器。我不想使用轮询。

我能做些什么？我认为可以使用[**SSE**](http://www.html5rocks.com/en/tutorials/eventsource/basics/)，但我不清楚。
我想知道

*   是否可以在没有客户请求（没有轮询）的情况下向特定客户发送响应。
*   服务器将如何检测该特定客户端？

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:42:58.813

有[网络通知](http://www.w3.org/TR/notifications/)。在[那里](http://caniuse.com/notifications)你可以看到支持它的浏览器。

# xcode - xcode中的Unity-iPhone和Unity-iPhone-simulator有什么区别

> ID：12352344
> 
> 赞同：-2
> 
> 时间：2012-09-10T13:03:25.640
> 
> 标签：xcode, unity3d, simulator

当我使用xcode编译由unity构建的游戏时，我注意到如果我选择Unity-iPhone-simulator，会有很多错误，我选择Unity-iPhone后，项目运行成功，我想知道对此产生共鸣。谢谢分享者！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:22:29.177

有点相关，来自[Unity IOS Basics](http://docs.unity3d.com/Documentation/Manual/iphone-basic.html)：

> Unity 构建的游戏可以在 iPhone 模拟器中运行吗？
> 
> 答：不可以，但如果您使用最新的 SDK，Unity iOS 可以构建到 iPad 模拟器。然而，模拟器本身对 Unity 不是很有用，因为它不能模拟来自 iOS 的所有输入或正确模拟您在 iPhone/iPad 上获得的性能。您应该在运行 Unity Remote 应用程序时使用 iPhone/iPad 作为遥控器直接在 Unity 内部测试游戏玩法。然后，当您准备好测试性能和优化游戏时，您可以发布到 iOS 设备。

至于 iPhone-Simulator 失败的原因，可能是您使用了不正确的 iPhone SDK。尝试将 SDK 版本设置为 4.1。

整个社区似乎认为 Simulator 构建器已损坏，您应该坚持使用原生构建或使用 Unity 远程进行测试。一些信息[来自这里。](http://forum.unity3d.com/threads/62800-iPhone-Simulator)

# c# - 正则表达式减法未在 asp.net RegularExpressionValidator 类中实现？

> ID：12352350
> 
> 赞同：0
> 
> 时间：2012-09-10T13:03:42.387
> 
> 标签：c#, regex, subtraction

ASP.NET RegularExpressionValidator 类中没有实现正则表达式类减法吗？我一直在努力让一个相当复杂的正则表达式工作，并追踪到这样一个事实，即类减法似乎没有在 ASP.NET 验证器中实现，而是在 Regex 类中。

例如：创建一个带有文本框和该文本框验证器的页面。为验证器提供以下 ValidationExpression：[1-4][0-9-[5]]。无论我输入什么，它都不匹配。根据需要将其更改为 [1-4][0-9] 并且匹配，但不排除 5 作为第二个数字。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:25:24.117

问题似乎是由于使用了javascript正则表达式（可以关闭），请参阅[regularexpressionvalidator-use-other-flavor-than-regex](https://stackoverflow.com/questions/339763/does-regularexpressionvalidator-use-other-flavor-than-regex)

请继续阅读以获取建议的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:11:38.550

你试过`[1-4]([0-4]|[6-9])`吗？

# asp.net-mvc - MVC设计——保存记录前处理文件上传

> ID：12352352
> 
> 赞同：1
> 
> 时间：2012-09-10T13:03:51.827
> 
> 标签：asp.net-mvc, file-upload, web-application-design

我们有一个 MVC Web 应用程序，它有一个索赔管理向导（类似于典型的订单条目）。声明可以有多个项目，每个项目可以有多个与之相关的文件。

> 声明 --> 项目 --> 文件

在添加新声明时 - 我们希望允许用户向其中添加一个或多个项目，并允许为这些项目上传文件。但是我们希望将所有内容都保存在内存中，直到实际保存 Claim - 这样如果用户没有完成 Claim 条目或丢弃它，则不会进行数据库交互。

我们能够通过会话处理数据级别的内存管理。我们在 session 中序列化 Claim 对象（也包括 Claim.Items 属性）。但是如何管理文件？

> 我们将文件存储在 < ClaimID >\< ItemID > 文件夹中，但是在内存中创建新声明时，在将记录保存在数据库中之前，我们没有任何 ID（两者都是自动增量 int）。

目前，我们必须限制用户在保存声明之前上传文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:16:47.403

为什么不与数据库交互？听起来您打算在对应用程序的多个请求之间持久化数据，而数据库对此很有用。

您不必将它与更长期的持久化数据持久保存在同一个表中，甚至是同一个数据库实例中。也许为“瞬态”数据创建表或数据库，或者在达到特定状态之前不打算长期保存的数据。或者可能将其存储在与长期数据相同的表中，但以其他方式跟踪状态以将其标记为“不完整”或以其他方式暂时的。

您可以有一个不时清理旧数据的离线进程。如果删除对长期数据表的成本很高，那么这将是将临时数据移动到它们自己的表的一个很好的理由，随着时间的推移，针对大量写入/删除与大量读取进行了优化。

或者，您可以使用内存中对象的临时 ID 将它们与磁盘上的文件相关联，然后再将它们持久化到数据库中。甚至可能将文件关联 ID 与记录的主 ID 分开。（我假设您使用自动递增整数作为主键，这就是您需要从数据库中获取的 ID。）

例如，您可以在记录上有另一个标识符`Guid`（`uniqueidentifier`在 SQL 中），以便将记录链接到磁盘上的文件。这样，您可以在内存中创建标识符并将其保存到数据库中，而无需最初与数据库交互来生成 ID。这还具有额外的好处，即能够与不同的文件重新关联，或者根据需要更改该标识符，而不会弄乱密钥。

在许多情况下，不应将A`Guid`用作主键，因此您可能不想走那条路。但是拥有一个单独的 ID 可以解决问题。

# java - 什么是在 Java 中制作等高线图的好（免费）库？

> ID：12352355
> 
> 赞同：6
> 
> 时间：2012-09-10T13:04:00.420
> 
> 标签：java, plot, contour

在 Java 中创建等高线图的好库是什么？[JFreeChart 中的ContourPlot](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/ContourPlot.html)类已弃用，并引用了 XYBlockRenderer 类。我想提出一些建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:23:52.440

我能找到的最接近的是[Jzy3D](http://www.jzy3d.org/index.php)。

在他们的[画廊](http://www.jzy3d.org/gallery.php)中有一个标题为“填充轮廓演示（2d 图片）”的图表。

![在此处输入图像描述](../Images/37b2e8fe921283f80744b9c0b9b3e29e.png)

也许这将是一个起点。

# database - 每个 django 站点的不同数据库

> ID：12352360
> 
> 赞同：2
> 
> 时间：2012-09-10T13:04:18.223
> 
> 标签：database, django, django-sites

假设我们有多个站点（使用 Django 的站点框架）在同一个 django 实例上运行。

`MyModel.objects.filter(site_id=request.site, slug=slug)[0]`将来可能是开销。所以我想知道是否可以拆分此模型的数据库以更快地查询。

所以如果`request.site`是1，运行

```
MyModel.objects.get(slug=slug) 
```

将只查询 db1。

如果`request.site`是 2，运行

```
MyModel.objects.get(slug=slug) 
```

将只查询 db2。

我将从视图的请求参数中获取 request.site，因为站点的值将根据使用的子域动态确定：de、fr 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:16:47.260

您可以创建一个自定义路由器来执行此操作：

例子：

```
def get_current_site():
   SITE_ID = getattr(settings, 'SITE_ID', 1)
   site_name = Site.objects.get(id=SITE_ID)
   return site_name

DATABASE_ROUTERS = ['CustomDatabaseRouter',] #a setting that Django understands.

class CustomDatabaseRouter(object):

  def db_for_read(self, model, **hints):
     site_name = get_current_site()
     if site_name  in ['site1']:
         return 'db1'
     if site_name in ['site2']:
        return 'db2'
     return 'default'

  def db_for_write(self, model, **hints):
     site_name = get_current_site()
     if site_name  in ['site1']:
         return 'db1'
     if site_name in ['site2']:
        return 'db2'
     return 'default'

  def allow_syncdb(self, model, **hints):
     site_name = get_current_site()
     if site_name in ['site1'] and db == 'db1':
         return True
     if site_name in ['site2'] and db == 'db2':
        return True
     return False 
```

你可以在这里阅读更多 [https://docs.djangoproject.com/en/dev/topics/db/multi-db/](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)

# html - 在创建 Django 模板之前应该将 psd 文件转换为 html 吗？

> ID：12352363
> 
> 赞同：0
> 
> 时间：2012-09-10T13:04:30.663
> 
> 标签：html, django, django-templates

要将一个好的设计（PSD 文件）转换为一个好看的网站，似乎一种有效的方法是使用 PSD 到 HTML 服务。

对于 Django 站点（我的站点），您通常需要一堆模板来动态定义网页的许多部分。

在我看来，将 PSD 转换为 HTML 与编写 Django 模板的技能不同，后者与 Django 应用程序的其余部分密切相关。虽然可能有开发人员对这两种技能都非常熟练，但数量可能很少。但是有许多优质的 PSD 到 HTML 服务，以及合理数量的 Django 合同开发人员。

我的问题：为了获得最佳结果，我是否应该拆分任务，先完成 PSD 到 HTML，然后将 HTML 文件传递​​给 Django 开发人员？或者这可能是浪费时间和金钱？我是否应该将 PSD 文件传递​​给 Django 开发人员并希望他/她具备必要的 HTML/CSS 技能？

（ps。看过 Django & Django-templates + HTML。找不到问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:27:12.320

老实说 - 让某人手动完成。那些自动 psd 到 html 的生成器要么基于表格（创建大量代码和大量难以阅读的代码）工作，要么基于 div，这意味着很多绝对定位的元素。无论如何，这就是我的经验。这些案例都没有真正产生高质量、流畅、可重用的代码。

您需要的人不一定了解 django（因为后端框架与 psd 到 html/css 技能无关），而是需要（非常）擅长 html(5) 和 css(3) 的人。

此外 - 将 PSD 转换为 HTML/CSS 并不是一项简单的任务，除非您的 PSD 设计包含所有必要的元素。我的意思是所有类似内容区域中的链接可能具有一种设计，其他区域中的链接通常具有不同的设计，与（其他）内容中的链接相比，列表中的链接是否具有不同的设计？您的设计是否具有所有可能的表单元素设计？您的 psd 是否在大多数领域具有所有必要/可能的元素？如果是，那么将您的设计转换为 css/html 是非常容易的任务。如果没有，那么您可能需要在任何时候发现缺少元素 X 的设计时保持选项卡打开并使用您的 html 向导服务，因为您的 django form.as_ul 或 form.as_table 以您的 html 人所做的方式打印出表单没想到。

# c# - 使用 MVVM 在 wpf 选项卡中延迟加载大型数据集

> ID：12352371
> 
> 赞同：1
> 
> 时间：2012-09-10T13:05:12.470
> 
> 标签：c#, wpf, mvvm

我应该首先说我对 MVVM 模式比较陌生。话虽如此，我有两个选项卡正在尝试加载大型数据集。我希望在加载页面时加载第一个选项卡，但是当您单击另一个选项卡时，第一个选项卡将被卸载，第二个选项卡将被加载（也称为延迟加载）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:37:12.870

It's important to keep the UI responsive to the user and loading large amounts of data can have a negative effect on that experience. That's why in situations like yours I have the view-model call a method that uses a BackgroundWorker(s) to load the data. The earlier you do this in the app's lifecycle, the better your user's experience.

So, like mathieu suggested, bind the control's property to your view-model and have your view-model load the data in a non-blocking fashion.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:12:07.410

您可以将 TabControl 的 SelectedValue 属性绑定到视图模型的属性。

这样，您可以在属性值更改时卸载/加载正确的数据。

# sql - 慢存储过程

> ID：12352375
> 
> 赞同：1
> 
> 时间：2012-09-10T13:05:22.077
> 
> 标签：sql, sql-server, networking, stored-procedures

我目前有一个将内容从一个表复制到另一个表的存储过程。

但是，当它尝试仅插入 27 个新行时，它会持续超过 12 分钟（之后我停止了它），它说 4 次影响了 27 行，但是没有进行更改。

您能发现以下 SP 速度慢的任何原因吗？

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER Procedure [dbo].[sp_CopyCompanyContent]
(
        @intCopyFromCompanyID Int,
        @intNewCompanyID Int
)
As
Begin
    /*
        RaisError If any of Odl/New Company ID's are 0
    */

    If (@intCopyFromCompanyID = 0 Or @intNewCompanyID = 0)
        Begin
            RaisError('New Company ID or Old Company ID can not be 0', 16, 1)
            Return
        End

    /*
        Create Temp Table For the Content Sections
    */

    If Object_ID('tempdb..#ContentSections') IS Not Null
        Begin 
            Drop Table dbo.#ContentSections
        End 

    /*
        Have to get all the existing data for the Old company we are copying from.
        Have to also add the Max(ContentSectionID) From ContentSection. Max(ContentSectionID) + 
        The Identity (Added further down due to laziness) will be our seed for the ContentID
    */

    Select      CS.ContentID,
                CS.SectionID,
                CS.MenuOrder,
                @intNewCompanyID NewCompanyID,
                CS.CompanyID OldCompanyID,
                CS.SubMenu,
                CS.Link,
                CS.HeaderMenu,
                CS.ParentContentID,
                CRS.*

    Into        dbo.#ContentSections

    From        dbo.Company COMP
    Join        dbo.ContentSection CS
    On          COMP.Company_id = CS.CompanyID  
    Join        dbo.Content CONT
    On          CONT.ContentID = CS.ContentID

    Cross Join  (
                    Select  MAx(ContentSectionID) MaxContentSectionID
                    From    dbo.ContentSection CONT
                ) crs

    Where       COMP.Company_id  = @intCopyFromCompanyID
    Order By    COMP.Company_id

    /*
        We now need to create a table for the existing content for the old company.
        Also have to create the seed. Same principle as above.
    */

    If Object_ID('tempdb..#Content') IS Not Null
        Begin 
            Drop Table dbo.#Content
        End 

    Select  CONT.*, 
            CRS.*

    Into    dbo.#Content

    From    dbo.Company COMP
    Join    dbo.ContentSection CS
    On      COMP.Company_id = CS.CompanyID  
    Join    dbo.Content CONT
    On      CONT.ContentID = CS.ContentID

    Cross Join  (
                    Select  MAx(ContentID) MaxContentID
                    From    dbo.Content CONT
                ) crs

    Where   COMP.Company_id  = @intCopyFromCompanyID
    Order By COMP.Company_id

    /*  
        Add Identity to each of the tables we have created above. The ID fields will add to 
        the Max of each table to mimic what the future seeds will be.
    */

exec('Alter table #ContentSections Add ID Int Identity(1,1)')
exec('Alter table #Content Add ID Int Identity(1,1)')

    /*
        Add content data from the temp table.
    */

    Insert  Into dbo.Content
    (
            Title,
            Content
    )   
    Select  Title,
            Content 
    From    dbo.#Content

    /*
        Have to the Content table up to the content sections table
        as this contains what ID has been add to the Content Table. 
    */

    Insert Into dbo.ContentSection
    (
            ContentID,
            SectionID,
            MenuOrder,
            CompanyID,
            SubMenu,
            Link,
            HeaderMenu,
            ParentContentID
    )

    Select  C.MaxContentID + C.ID,
            CS.SectionID,
            CS.MenuOrder,
            CS.NewCompanyID,
            CS.Submenu,
            CS.Link,
            CS.HEaderMEnu,
            CS.ParentContentID
    From    dbo.#Content C
    Join    dbo.#ContentSections CS
    On      C.ID = CS.ID

End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:30:36.943

首先要做的是检查选择的查询计划，因为交叉连接是危险的野兽，如果我没有读错，你会在 CRS.* 中显示相同的值，对吗？如果是这样，请在选择之前进行该查询并将结果存储在一个变量中并将其显示在选择中，就像这样。

```
DECLATE @maxValue INTEGER
Select  @maxValue=MAX(ContentID) MaxContentID
                    From    dbo.Content CONT
Select  CONT.*, 
            @maxValue as MaxContentID

    Into    dbo.#Content

    From    dbo.Company COMP
    Join    dbo.ContentSection CS
    On      COMP.Company_id = CS.CompanyID  
    Join    dbo.Content CONT
    On      CONT.ContentID = CS.ContentID
    Where   COMP.Company_id  = @intCopyFromCompanyID
    Order By COMP.Company_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:11:08.873

可能是身份的原因（从 4 次*27 行中是 2 次）

```
exec('Alter table #ContentSections Add ID Int Identity(1,1)')
exec('Alter table #Content Add ID Int Identity(1,1)') 
```

相反，如果您不想创建表，请尝试使用`ROW_NUMBER() OVER()...`子句作为ID，然后您不需要稍后创建标识。

正如我所看到的，您甚至不需要使用临时表，因为这样您就可以简单地将两个 select 用作`INSERT INTO .... SELECT ...`​​ With the `ROW_NUMBER()`.

似乎您没有对 进行任何更改`Temp Tables`，因此您可能不需要它们。（仅当您想在 SP 的范围之外使用它们时）

# r - R 中出现新值的递增计数器

> ID：12352378
> 
> 赞同：2
> 
> 时间：2012-09-10T13:05:46.340
> 
> 标签：r, counter

我正在尝试制作一个计数器，该计数器会随着另一个向量中的每个新变化而增加。例如，我有几个人在几周内被观察，我想知道他们被观察了多少周。所以我最终会得到一个这样的表：

```
 Id   year Week  Weeks observed
      1   2006   10       1
      1   2006   10       1
      1   2006   11       2
      1   2006   11       2
      1   2006   12       3
      1   2006   13       4
      1   2007    1       5
      1   2007    2       6
      1   2007    3       7
      1   2007    4       8
      1   2007    5       9
      1   2007    6      10
      2   2006   10       1
      2   2006   10       1
      2   2006   11       2
      2   2006   11       2
      2   2006   12       3
      2   2006   13       4
      2   2007    1       5
      2   2007    2       6
      2   2007    3       7
      2   2007    4       8
      2   2007    5       9
      2   2007    6      10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:30:17.837

假设您的数据位于名为 的 data.frame 中`dat`，您可以使用`tapply`并转换`Phase`为一个因子，然后将其从其级别中剥离以使用底层整数值：

```
dat$newcounter <- unlist(tapply(dat$Phase, dat$Id,
  function(x) unclass(as.factor(x)))) 
```

强制性`data.table`回答：

```
library(data.table)

dt<-as.data.table(dat)

dt[, newcounter := unclass(as.factor(Phase)), by = Id] 
```

* * *

**编辑**

为了解释新措辞的问题，这里有一种使用`data.table`.

```
dt <- as.data.table(dat[, -4])        # Create data.table
setkeyv(dt, c("Id", "year", "Week"))  # Create key for data.table

dt2 <- unique(dt)                     # Get only unique rows by key

dt3 <- dt2[, Weeks.observed := seq_len(.N), by = "Id"] # Create new variable

dt[dt3]                               # Merge data.tables back together 
```

# java - Junit，Mockito，如何测试回调

> ID：12352380
> 
> 赞同：2
> 
> 时间：2012-09-10T13:06:10.750
> 
> 标签：java, junit, mockito, easymock

> **可能重复：**
> [在使用 Mockito 进行方法调用时拦截对象](https://stackoverflow.com/questions/12244341/intercept-object-on-method-invocation-with-mockito)

我有一个可以从一种格式映射到另一种格式的类。由于这是遗留代码，我不敢重写它，它基本上是一组插件，所以如果我更改一个，我可能不得不更改所有其他。它的开发没有考虑到测试。所以这是我的问题。

```
interface Mapper {
    void handle(ClassA classA);
    void handle(ClassB classB);
}

public interface Publisher {
    public void publish(MappedClass mappedClass);
}

class MyMapper implements Mapper {

    private Publisher publisher;
    public void setPublisher(final Publisher publisher) {
        this.publisher = publisher;
    }

    public handle(ClassA classA) {
        final MappedClass mappedClass = // Map from ClassA to MappedClass
        publisher.publish(mappedClass);
    }

    public handle(ClassB classB) {
        final MappedClass mappedClass = // Map from ClassB to MappedClass
        publisher.publish(mappedClass);
    }
} 
```

好的。因此，根据哪个类被“处理”`MappedClass`将发布不同的值，这是我要验证的值（测试）。问题是我将得到一个测试，我首先必须编写代码来测试该`publish`方法是否被调用，

```
private boolean wasCalled;

@Test
public void testClassAMapped() {
    wasCalled = false;
    final MyMapper myMapper = new MyMapper();
    myMapper.setPublisher(new Publisher() {
        public void publish(final MappedClass mappedClass) {
            wasCalled = true;
           // Code for verifying the fields in mappedClass
        });
    }
    final ClassA classA = // Create classA
    myMapper.handle(classA);
    assertTrue(wasCalled);
} 
```

所以首先我们创建我们的模拟`Publisher`，它首先将状态设置为`wasCalled`，`true`所以我们知道这个方法曾经被调用过（这个例子被简化了，所以代码中实际上有一个调度程序......遗留代码所以我不想改变它)，其次我想验证`MappedClass`具有正确的字段值。我想知道的是，是否有人知道更好的测试方法？对于我的许多测试， `wasCalled`, 和`wasCalled`检查或多或少成为样板代码，但由于我不想添加那么多混乱（自己的黑客、测试基类等），我想知道是否有办法做这是在 Mockito 还是 EasyMock？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:31:35.983

使用[Mockito ArgumentCaptor](http://docs.mockito.googlecode.com/hg/org/mockito/ArgumentCaptor.html)

```
@Test
public void test(){
  Publisher publisher = Mockito.mock(Publisher.class);
  myMapper.setPublisher(publisher);
  ArgumentCaptor<MappedClass> captor = ArgumentCaptor.forClass(MappedClass.class);

  ....
  myMapper.handle(...);
  ...

  verify(publisher).publish(captor.capture());
  MappedClass passedValue = captor.getValue();
  // assert stuff here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T13:17:52.667

我不确定我是否完全理解这个问题，但看起来你正在寻找`Mockito.verify(publisher).publish(Matchers.isA(MappedClass.class));`

为此，您必须模拟`Publisher`通过
`Publisher publisher = Mockito.mock(Publisher.class)`
，然后将其交给`MyMapper`.

如果您需要断言 的状态`MappedClass`，请使用`ArgumentCaptor`. 有关示例，请参[见此答案。](https://stackoverflow.com/questions/12244341/intercept-object-on-method-invocation-with-mockito/12244564#12244564)

Mockito [-API-doc](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html)有许多其他示例。

# sql-server - sql server 2012 CLR 类型安装在哪里？

> ID：12352384
> 
> 赞同：3
> 
> 时间：2012-09-10T13:06:30.613
> 
> 标签：sql-server, sql-server-2012

我已经[为 Microsoft® SQL Server® 2012 安装了 Microsoft® System CLR Types，](http://www.microsoft.com/en-us/download/details.aspx?id=29065)但我找不到它的安装位置。

我**专门寻找**以下库的 64 位版本：

*   **Microsoft.SqlServer.Types.dll**
*   **SqlServerSpatial110.dll**

我已经检查过了`C:\Program Files\Microsoft SQL Server`，但我看到的只有以下内容：

![在此处输入图像描述](../Images/17f1999b02cd9847c674531091d314e8.png)

# 更新

我还在 GAC、windows\system32 和整个 C 盘中进行了搜索。Microsoft.SqlServer.Types.dll 在 C 驱动器上的任何地方都不存在，我只能找到旧版本的 SqlServerSpatial110.dll。我相信它们是旧版本，因为我今天安装了 CLR Types 包，**2012**年 9 月 10 日，但它们的`last modified`日期为`2/11/2012`.

![在此处输入图像描述](../Images/241258a91d254a9e59e4ef4411d69098.png)

* * *

![在此处输入图像描述](../Images/fedcaf50244d05c1386bf2f80d5c4d4e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:31:57.190

Microsoft.SqlServer.Types.dll 在[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)中， SqlServerSpatial110.dll 在 [windows\system32] 目录中。

# c# - 今天创建 COM 组件的最佳方法是什么？

> ID：12352388
> 
> 赞同：5
> 
> 时间：2012-09-10T13:06:44.840
> 
> 标签：c#, c++, visual-c++, com, atl

我想为我的宠物项目创建一个桌带 COM 对象。我对 COM 没有任何经验，快速搜索发现 ATL 会简化事情。我想知道今天是否有更好的方法来创建 COM 组件。在某种意义上更好的样板，使用 C# 而不是 C++ 以及您可能想到的任何其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:40:43.187

如果在客户端计算机上部署或依赖 .NET 框架安装对您来说不是问题，那么 C# 比 C++ 容易得多（尽管您可能必须在 C# 中重新声明接口、IID 等...，使用[P/调用](http://en.wikipedia.org/wiki/P/Invoke)）。如果减少依赖是一个问题，那么使用 ATL 的 C++ 会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:12:51.310

只需在 C# 中创建它并作为 COM 组件公开，请参阅本指南：

[http://msdn.microsoft.com/en-us/library/zsfww439.aspx](http://msdn.microsoft.com/en-us/library/zsfww439.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:13:54.917

我会考虑 C++/ATL 的唯一原因是如果我要连接到任何 C/C++ 库。除了我想不出在 C# 上使用 C++ 的充分理由（假设你的技能水平在两者上是相当的）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-17T23:51:16.560

我只能推荐 C++ 与 Microsoft 的 ATL 库结合使用。

我使用了一些用 C++ 编写的代码生成工具，它帮助我摆脱了很多样板代码。这个工具生成的代码产生了更多的 C++ 友好接口（比如在 Visual Studio 中#import 类型库时在 tlh/tli 文件中生成的代码。我的代码生成器生成类似的代码，仅用于 COM 服务器。

如果您有兴趣，请通过 web dot de 向 DerTopper 发送邮件。在主题行中添加“COM 代码生成器”之类的内容，这样您就不会通过我的垃圾邮件过滤器。

问候，斯图尔特

# javascript - 在 Jquery 中使用变量作为对象名称

> ID：12352395
> 
> 赞同：0
> 
> 时间：2012-09-10T13:07:07.627
> 
> 标签：javascript, jquery

我通过解决方案找到了另一个类似的问题，但它对我不起作用。我是 jquery 的新手，所以提前感谢您帮助我解决我的 noobie 问题。

我正在尝试使用一个变量作为类名。这样我就可以根据这个变量遍历正确的字段。我的变量返回`.reqfields4`但我收到此错误`Error: Syntax error, unrecognized expression: "`，如果我手动输入值，它可以工作。

我怎样才能做到这一点？谢谢。

```
var reqsection='\".reqfields4\"';

$(".reqfields4").each ( function() { 
//$(reqsection).each ( function() {               
          if(( $(this).val())==''){
               some code...
               }
          else{
               some code...
              }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:08:41.720

您不需要在变量的值内加上引号：

```
var reqsection = '.reqfields4';
$(reqsection).each( ... ); 
```

如果你有一个类名——*只是*一个类名——你可以添加`.`：

var reqsection = 'reqfields4';

$('.' + reqsection).each( ... )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:08:52.247

只需更改`var reqsection='\".reqfields4\"';`为`var reqsection='.reqfields4';`- 您不需要内部字符串引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:09:55.767

如果你说`var reqsection= '\".reqfields4\"';` 那 `$(reqsection).each( function() {});`

就像你告诉 jQuery 一样考虑它：

```
$(' ".reqfields4" ').each( function() {}); 
```

换句话说，您说：[请立即选择“.reqfields4”，包括引号]。所有的类选择器都必须以点（.）开头，但是你只是用引号（“）开始你的 jQuery 选择器，所以它当然根本不起作用（它当然不会尝试选择任何类），并且可能会从 jQuery 中抛出一个错误——我认为任何 jQuery 选择器字符串都不能将引号（“）作为选择器的实际第一个字符！。

如果您改为这样做：

```
var reqsection= ".reqfields4";

$(".reqfields4").each( function() {});
$(reqsection).each( function() {}); 
```

上面两行是等价的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T13:11:20.603

您可以尝试如下，

```
var reqsection=".reqfields4";

$(reqsection).each ( function() { 

              if(( $(this).val())==''){
                   some code...
                   }
              else{
                   some code...
                  }
                }); 
```

# android - 如何避免不推荐使用的方法并保持向后兼容性？

> ID：12352397
> 
> 赞同：6
> 
> 时间：2012-09-10T13:07:08.787
> 
> 标签：android, backwards-compatibility, android-support-library

> **可能重复：**
> [如何处理 Android 中已弃用的类以保持兼容性](https://stackoverflow.com/questions/6321649/how-to-deal-with-deprecated-classes-in-android-to-keep-compatibility)

我遇到了不推荐使用的`Display.getWidth()`方法，发现它已被替换为`android.view.getSize()`. 但是`getSize()`，仅在 API 13 之后才可用，并且`View`似乎未包含在 V4 Android 支持库中。

因此，如果我想避免被弃用的调用，我该如何在不为各种 API 级别维护不同的项目/构建的情况下做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:32:02.620

给定一个`Display`名为 的对象`display`，这应该有效：

```
int width=-1;

if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB_MR2) {
    Point size=new Point();
    size=display.getSize(size);
    width=size.x;
}
else {
    width=display.getWidth();
} 
```

IOW，`Build.VERSION.SDK_INT`用于在引入新 API 的“之前”和“之后”案例之间进行分支。

这将要求您的构建目标（Eclipse 中的项目 > 属性 > Android）设置为 API 级别 13+，因此您可以调用`getSize()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T03:17:45.537

有一个官方的 Android 开发者类[Creating Backward-Compatible UIs](http://developer.android.com/training/backward-compatible-ui/index.html)：

> 此类演示如何以向后兼容的方式使用新版本 Android 中可用的 UI 组件和 API，确保您的应用程序仍可在先前版本的平台上运行。

他们提倡将 Java 接口用于未向后移植的库，以获得更加面向对象的解决方案。然后将它们扩展为两个具体的类：一个为不受支持的平台提供替代行为，另一个为支持的平台调用实际 API。

然后有一个工厂类通过检查当前平台与支持的平台范围来实例化正确的类。但最终，它归结为一个有条件的 like `if ( Build.VERSION.SDK_INT >= HONEYCOMB_MR2 )`。

# c# - FormView在插入sql之前更改数据？

> ID：12352400
> 
> 赞同：0
> 
> 时间：2012-09-10T13:07:34.203
> 
> 标签：c#, asp.net

我正在使用 FormView 向 sql server 添加新数据。我尝试更改用户插入的一些数据，例如将“a”替换为“A”

我尝试使用以下代码：

```
protected void FormViewInsertEventHandler(object sender, SqlDataSourceCommandEventArgs e)
{
    e.Values["Institution_fax"] = "33333";
} 
```

和

```
<asp:SqlDataSource ID="SqlDataSourceSP" runat="server" 
  ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
  InsertCommand="usp_limodimInstitution_insert" 
  InsertCommandType="StoredProcedure" 
  SelectCommand="select * from tbl_limodim_Institution"> 
```

但我收到以下错误

> 'FormViewInsertEventHandler' 没有重载匹配委托 'System.Web.UI.WebControls.FormViewInsertEventHandler'

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:12:03.573

您的方法签名对于事件处理程序不正确，它应该是：

```
protected void FormViewInsertEventHandler(object sender, FormViewInsertEventArgs e)
{
    e.Values["Institution_fax"] = "33333";
} 
```

不能将 FormViewInsertEventArgs 替换为 SqlDataSourceCommandEventArgs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:12:47.803

您对事件处理程序的论点不正确

```
protected void FormViewInsertEventHandler(object sender, SqlDataSourceCommandEventArgs e) 
```

应该：

```
protected void FormViewInsertEventHandler(object sender, FormViewInsertEventArgs e) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:56:20.227

您可以尝试将您的代表的签名更改为

```
public delegate void FormViewInsertEventHandler( Object sender, FormViewInsertEventArgs e )
{
   ......
} 
```

# ajax - CodeIgniter Ajax 表单 - 提交表单

> ID：12352404
> 
> 赞同：2
> 
> 时间：2012-09-10T13:07:55.897
> 
> 标签：ajax, codeigniter

我是 stackoverflow 和 CodeIgniter 的新手，我目前正在尝试一些我在 Internet 上找到的简单代码示例，以便开始。我现在正在处理的一个表单使用 CI 和 Ajax (jQuery)，并将表单的输入保存在数据库中，然后在与表单相同的页面上显示它们中的最新输入。如果我让你感到困惑，那就是[这里](http://devsnippets.com/article/getting-started-with-codeigniter-and-how-to-create-all-those-great-apps.html)的 4.7 应用程序示例。初始源代码位于[此处，](http://justalittlebrain.wordpress.com/2008/05/27/codeigniter-and-ajax-using-jquery-tutorial/)但我已对其进行了修改以使用最新版本的 CI，并在下面引用了我的所有 MVC 文件。

**控制器：**

```
<?php
class Message extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        $this->load->helper('form');
        $this->load->helper('url');
        $this->load->helper('security');
        $this->load->model('Message_model');
    }

    function view()
    {
        //get data from database
        $data['messages'] = $this->Message_model->get();

        if ( $this->input->is_ajax_request() ) // load inline view for call from ajax
            $this->load->view('messages_list', $data);
        else // load the default view
            $this->load->view('default', $data);
    }

    //when we pres the submit button from the form
    function add()
    {
        if ($_POST && $_POST['message'] != NULL)
        {
            $message['message'] = $this->security->xss_clean($_POST['message']);
            $this->Message_model->add($message);
        }
        else
        {
            redirect('message/view');
        }
    }
}
?> 
```

**模型：**

```
<?php
class Message_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
        $this->load->database();
    }

    function add($data)
    {
        $this->db->insert('messages', $data);
    }

    function get($limit=5, $offset=0)
    {
        $this->db->order_by('id', 'DESC');
        $this->db->limit($limit, $offset);

        return $this->db->get('messages')->result();
    }
}
?> 
```

**意见**

默认.php：

```
<!-- called using message/view -->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script src="<?php echo base_url('js/jquery-1.8.1.min.js'); ?>" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function()
            {
                $('#submit').click(function(e)
                {
                    e.preventDefault();
                    var msg = $('#message').val();
                    $.post("", {message: msg}, function() {
                        $('#content').load("");
                        $('#message').val('');
                    });
                });
            });
        </script>
    </head>

    <body>
        <?php echo form_open("message/add"); ?>
        <input type="text" name="message" id="message">
        <input type="submit" value="submit" name="submit" id="submit">
        <?php echo form_close(); ?>

        <div id="content"></div>
    </body>
</html> 
```

消息列表.php：

```
<!-- called from ajax call -->

<ol>
<?php foreach ($messages as $cur): ?>
    <li><?php echo $cur->message; ?></li>
<?php endforeach; ?>
</ol> 
```

问题主要在于第一个视图（default.php）。也就是说，如果我`e.preventDefault();`从 javascript 代码中省略该行，那么表单会加载一个不同的页面（消息/添加如表单操作参数所暗示的那样），它是一个空白页面，也以这种方式取消了我的应用程序的 ajax 行为。另一方面，如果我真的添加了这一行，则不会调用我的消息控制器的 add 方法，因此不会将我输入的内容添加到数据库中。

最后，我尝试了以下 js 代码，而不是上面的其他代码：

```
$(document).ready(function()
            {
                $('#submit').click(function(e)
                {
                    e.preventDefault();
                    var msg = $('#message').val();
                    $.post("<?php echo base_url(); ?>message/add", {message: msg}, function() {
                        $('#content').load("");
                        $('#message').val('');
                    });
                });
            }); 
```

但这样看来 $.post() 崩溃了，因为在应该在成功的 post() 调用上运行的函数中没有执行任何操作。

任何帮助都对这篇大文章表示赞赏和抱歉。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:37:12.787

您必须调用是正确的`e.PreventDefault();`，但您还必须处理来自回调函数的响应，而您不是。回调接受一些参数，但第一个是您感兴趣的，它是来自您的服务器的响应。我已将其表示`r`如下：

```
$(document).ready(function(){
    $('#submit').click(function(e){
        e.preventDefault();
        var msg = $('#message').val();
        $.post("<?php echo base_url(); ?>message/add", {message: msg}, function(r) {
            //do something with r... log it for example.
            console.log(r);
        });
    });
}); 
```

我也删除了`$.("#content").load(...);`. 当第一个请求完成时，这实际上会执行*另一个AJAX 请求。*

现在，检查您的控制器...请不要使用 $_POST。`$this->input->post()`CodeIgniter作为[输入库](http://codeigniter.com/user_guide/libraries/input.html)的一部分为您提供。如果您打开全局 XSS 过滤，`config/config.php`您也不必 xss 清理它。您可以使用逐个帖子进行清洁`$this->input->post('name', true);`

我推荐这个：

```
function add(){
    $m = $this->input->post('message', true);
    if($m){
        $this->Message_model->add($m);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:27:46.617

问题不在于 CI，它是错误的 JS，

```
$(document).ready(function()
        {
            $('#submit').click(function(e)
            {
                e.preventDefault();
                var msg = $('#message').val();
                $.post("<?php echo base_url(); ?>message/add", {message: msg}, function() {
                    $('#content').load("<?php echo base_url(); ?>/message/view");
                    $('#message').val('');
                });
            });
        }); 
```

e.preventDefault() 用于停止我们不想要的提交按钮的默认行为（它将带您到消息/添加）。您稍后将 URl 参数添加到 $.post() 函数是正确的，但是在回调函数中，.load 将传递给它的 URL 加载到 #content 中，所以没有传递任何 url，当然赢了没有什么要加载的。

# sql - MS Excel - 现有连接字符串对应于哪个数据表

> ID：12352406
> 
> 赞同：1
> 
> 时间：2012-09-10T13:07:58.350
> 
> 标签：sql, excel, vba

我有一个有 8 个连接的 excel 电子表格。我想知道哪个连接字符串对应于 excel 中的哪个数据表/数据透视表。2007 年或 2010 年方法中的解决方案很好。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:26:59.400

可以使用“数据”选项卡。

尝试这个：

-- 单击**Data**选项卡中的**Connections**以打开**Workbook Connections**对话框。

 ****![Excel 数据 --> 连接](../Images/e15e252aa9cf94bdc3ca0e275499228d.png)

-- 单击列表中的一个连接。

![工作簿连接列表](../Images/3762ea2046ceb865edfb9066f6f4d558.png)

-- 点击链接：**点击此处查看所选连接的使用位置**

![显示工作簿中使用数据连接的位置](../Images/f84800fbc41bb1a927f2ed252d06019b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:12:00.160

这也可以从 VBA 中实现。这个查询只是枚举它们。

`PivotCache.Refresh`您可以使用或轻松修改此示例以刷新查询`QueryTable.Refresh`。

```
Sub ShowAllQueryConnectionStrings()
    Dim oSheet As Excel.Worksheet
    For Each oSheet In Application.ActiveWorkbook.Sheets
        Dim oTable As Excel.QueryTable
        For Each oTable In oSheet.QueryTables
            Debug.Print "QueryTable " & oTable.Name & ": " & oTable.Connection
        Next
        Dim oPivot As Excel.PivotTable
        For Each oPivot In oSheet.PivotTables
            Debug.Print "PivotTable " & oPivot.Name & ": " & oPivot.PivotCache.Connection
        Next
    Next
End Sub 
```****

# thread-synchronization - NXC中如何控制线程的执行顺序？

> ID：12352409
> 
> 赞同：1
> 
> 时间：2012-09-10T13:08:16.307
> 
> 标签：thread-synchronization, nxc

我想在抢占式线程调度环境中编写一个并行程序，我可以使用互斥锁（二进制互斥锁，始终初始化为未使用）、等待指令以及线程协作指令（屈服于线程中的另一个任务）来同步我的线程，但没有任何可用的信号量机制（事实上，我正在为 Lego Mindstorm 用*NXC*编程语言编写程序）。

有没有办法用两个线程*A*和*B*编写程序并生成像 (ABABAB ...) 这样的执行顺序？[这就像一个线程包含一个调用两个函数 A() 和 B() 的循环 - 但在这里，它是多线程方式]

如果我有信号量，我想我会这样做：

```
semaphore SemA = 1, SemB=0;
//in A
{
    while(true)
    {
    down(SemA);
    //Do the things
    up(SemB);
    }
 }
//in B
{
    while(true)
    {
    down(SemB);
    //Do the things
    up(SemA);
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:08:21.117

不确定它是否会起作用，但您可以尝试使用单个互斥锁和`Yield`函数。如果 A 和 B 是唯一的两个任务，我想它总是会按预期从一个切换到另一个，但我无法测试，因为我不再有 NXT。

```
mutex sync;
//in A
{
    while(true)
    {
        Acquire(sync);
        //Do the things
        Release(sync);
        Yield();
    }
}
//in B
{
    while(true)
    {
        Acquire(sync);
        //Do the things
        Release(sync);
        Yield();
    }
} 
```

# javascript - Angularjs：如何在 $routeProvider 中使用“resolve”时显示加载图标？

> ID：12352411
> 
> 赞同：37
> 
> 时间：2012-09-10T13:08:19.487
> 
> 标签：javascript, angularjs

以下代码通过服务读取并在网页上显示特定“页面类别”（字符串）的“页面”对象列表。使用 $routeProvider.when() 中的解析对象属性，我可以推迟更新视图，直到新值准备好。

两个问题：

1.  当要求一个新的页面列表时，我想显示一个加载图标。当从服务器读取开始（并且应该显示加载图标）时，我如何检测（以非黑客方式）事件？我想我可以在服务中做类似 $('.pages-loading-icon').show() 的事情，但是发现太依赖于 gui 太放置在服务中。

2.  当新值准备好时，我希望旧的淡出而新的淡入。这样做的“角度”方式是什么？我曾尝试使用 $watch 在控制器中执行此操作，但这会导致在淡出开始前不久显示新值。

编码：

**应用程序.js：**

```
$routeProvider.when('/:cat', { templateUrl: 'partials/view.html', controller: RouteCtrl, resolve: RouteCtrl.resolve}); 
```

**控制器.js：**

```
function RouteCtrl($scope, $routeParams, pages) {
        $scope.params = $routeParams;
        $scope.pages = pages;
    }

RouteCtrl.resolve={
    pages: function($routeParams, Pages){
        if($routeParams.hasOwnProperty('cat')){
            return Pages.query($routeParams.cat);
        }
    }
} 
```

**services.js：** 最后读取的页面存储在 currentPages 中，其类别存储在 lastCat 中。

```
factory('Pages', function($resource, $q, $timeout){
    return {
        res: $resource('jsonService/cat=:cat', {}, {
            query: {method:'GET', params:{cat:'cat'}, isArray:true}
        }),
        lastCat: null,
        currentPages: null,
        query: function(cat) {
            var res = this.res;
            if(cat != this.lastCat){
                var deferred = $q.defer();
                var p = res.query({'cat':cat}, function(){
                    deferred.resolve(p);
                });
                this.lastCat = cat;
                this.currentPages = deferred.promise;
            }
            return this.currentPages;
        }
    };
}) 
```

**视图.html**

```
<ul >
    <li ng-repeat="page in pages">
        <a href="#{{params.cat}}/{{page.slug}}">{{page.title}}</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-12T05:16:59.547

不确定这是否会在您的代码中起作用，因为您有 $resource 集成。但可能值得研究角度事件：`$routeChangeStart`和`$routeChangeSuccess`.

在 html 中：

```
<span ng-show="isViewLoading"> loading the view... </span> 
```

在控制器中（它定义了上面 html 的范围）：

```
$scope.isViewLoading = false;
$scope.$on('$routeChangeStart', function() {
  $scope.isViewLoading = true;
});
$scope.$on('$routeChangeSuccess', function() {
  $scope.isViewLoading = false;
});
$scope.$on('$routeChangeError', function() {
  $scope.isViewLoading = false;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T14:38:06.280

角度的路由系统似乎有点有限..

这为我解决了这个问题：
[http ://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side -事件.htm](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)

此外，关于触发两次的事件：如果您设置路线映射到“a/b/c”，角度会自动设置另一条路线，“a/b/c/”（带有斜杠）重定向到第一个（和反之亦然），并且都触发事件。我只是测试是否存在路由参数。

关于路由系统的有限条件：有[这种从角度的拉动](https://github.com/angular/angular.js/pull/1198)，以扩展它的能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-05T19:45:14.447

您将需要使用 ，`$rootScope`因为监控控制器`$scope`仅限于控制器，并且碰巧您正在从一个视图（一个控制器）切换到另一个视图（另一个控制器）。因此，有一个适合所有人的代码是有意义的。

```
$rootScope.$on('$stateChangeStart', 
function(event, toState, toParams, fromState, fromParams){ ... }) 
```

在该函数中设置`$rootScope.isLoadingState`将显示您的加载指示器。

然后使用

```
$rootScope.$on('$stateChangeSuccess', 
function(event, toState, toParams, fromState, fromParams){ ... }) 
```

取消设置该变量。

完整参考[这里](https://github.com/angular-ui/ui-router/wiki#state-change-events)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T12:17:15.250

您还可以使用 ng-show 指令。只需检查您的模型是否为空并显示一个 DOM 子集，如下所示：

```
 <!-- model not ready -->
    <div style="width: 200" ng-show="lines == ''">
      <div class="progress progress-striped active">
         <div class="bar" style="width: 0%;"></div>
      </div>
    </div>

    <!-- your model code -->
    <ul class="nav nav-tabs nav-stacked">
      <li ng-repeat="line in lines">
        {{line.Id}}
      </li>
    </ul> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T22:59:04.110

我喜欢`'ng-show'`......但是`'ui-if'`Angular UI 项目的更好恕我直言......因为从 DOM 中删除 HTML 代码......

```
<span ui-if = "isViewLoading"> loading the view... </span> 
```

_e

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-01T21:57:08.923

您可以创建一个指令，该指令将根据您在服务调用之前和之后发送的广播显示，您可以将其放在 $rootScope 上。因此，如果您正在调用工厂来处理发出通用 POST/GET 调用，那么就在调用之前，您可以在 $rootScope 上调用一个函数，例如“$rootScope.startLoading()”，当它完成调用“$rootScope. doneLoading()”，这些方法中的每一个都广播一个事件，供您接收指令。然后你只需处理你的指令来捕获事件，"scope.$on("startLoading", func(..." 并让它在DOM中插入/显示一个加载div模板并运行，然后还有一个catch for完成加载以删除/隐藏它。

这样你就可以有一个很好的一般加载覆盖。

# android - 通过在android中给出两次（开始和结束）来获取所有时间段（1小时间隔）

> ID：12352414
> 
> 赞同：2
> 
> 时间：2012-09-10T13:08:37.240
> 
> 标签：android

我有两次。开始和结束。现在我想以 1 小时的间隔显示它们之间的所有时间。

例如：

我有**00:00-23:55**。

输出：-

12:00 AM - 01:00 AM
01:00 AM - 02:00 AM 等等。

请帮我找到这个。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T09:09:04.213

```
String date1 = "26/02/2011";
String time1 = "00:00 AM";
String date2 = "26/02/2011";
String time2 = "12:00 PM";

String format = "dd/MM/yyyy hh:mm a";

SimpleDateFormat sdf = new SimpleDateFormat(format);

Date dateObj1 = sdf.parse(date1 + " " + time1);
Date dateObj2 = sdf.parse(date2 + " " + time2);
System.out.println("Date Start: "+dateObj1);
System.out.println("Date End: "+dateObj2);

//Date d = new Date(dateObj1.getTime() + 3600000);

long dif = dateObj1.getTime();
while (dif < dateObj2.getTime()) {
    Date slot = new Date(dif);
    System.out.println("Hour Slot --->" + slot);
    dif += 3600000;
} 
```

**输出 ：**

```
Date Start: Sat Feb 26 00:00:00 IST 2011
Date End: Sat Feb 26 12:00:00 IST 2011
Hour Slot --->Sat Feb 26 00:00:00 IST 2011
Hour Slot --->Sat Feb 26 01:00:00 IST 2011
Hour Slot --->Sat Feb 26 02:00:00 IST 2011
Hour Slot --->Sat Feb 26 03:00:00 IST 2011
Hour Slot --->Sat Feb 26 04:00:00 IST 2011
Hour Slot --->Sat Feb 26 05:00:00 IST 2011
Hour Slot --->Sat Feb 26 06:00:00 IST 2011
Hour Slot --->Sat Feb 26 07:00:00 IST 2011
Hour Slot --->Sat Feb 26 08:00:00 IST 2011
Hour Slot --->Sat Feb 26 09:00:00 IST 2011
Hour Slot --->Sat Feb 26 10:00:00 IST 2011
Hour Slot --->Sat Feb 26 11:00:00 IST 2011 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:59:04.427

命名可能不正确，也可以更好地形成，但现在尝试和错误此代码有效。

**关于00:00-23:55，使用'-'解析，第一部分可以是'startTime'，第二部分可以是'endTime'**

```
package demo.orientaion.change.run_cmd;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

public class TimeDiffCalc {

public TimeDiffCalc() {

}

public Calendar addHr(String startTime) {
    SimpleDateFormat df = new SimpleDateFormat("HH:mm");
    Date d;

    Calendar gc = null ;
    try {
        d = df.parse(startTime);

        gc = new GregorianCalendar();
        gc.setTime(d);
        gc.add(Calendar.HOUR, 1);
    } catch (ParseException e) {
        e.printStackTrace();
    } 
    return gc;
}

public void diffCalc(String time1, String time2) {

    long diff=0;
    SimpleDateFormat format = new SimpleDateFormat("HH:mm");
    Date date1 = null;
    try {
        date1 = format.parse(time1);
        Date date2 = format.parse(time2);
        diff = date2.getTime() - date1.getTime();
        Date date3 ;
        String string = time1;
        while(true)
        {
            Calendar gc = addHr(string) ;
            date3 = gc.getTime();
            string = getHrMin(gc.get(Calendar.HOUR_OF_DAY))+":"+getHrMin(gc.get(Calendar.MINUTE));
            if(date2.getTime()-date3.getTime()>=0)
            {
                System.out.println("diff Hours :: "+string);
            }
            else
            {

                break;
            }

        }

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("Difference in Houres:"+getDate(diff));

}

private String getDate(long diff) {
    long hours=diff/(60*60*1000);
    long minutes=(diff%(60*60*1000))/(60*1000);

    long sec=((diff%(60*60*1000))%(60*1000))/1000;
    String formateddate="";
    if(hours<10)
    {
        formateddate="0"+hours;
    }else{
        formateddate=""+hours;
    }
    if(minutes<10)
    {
        formateddate=formateddate+":0"+minutes;
    }else{
        formateddate=formateddate+":"+minutes;
    }
    if(sec<10)
    {
        formateddate=formateddate+":0"+sec;
    }else{
        formateddate=formateddate+":"+sec;
    }

    return formateddate;
}

private String getHrMin(int time) {
    String formatedTime;
    if(time<10)
    {
        formatedTime="0"+time;
    }else{
        formatedTime=""+time;
    }
    return formatedTime;
}

/**
 * @param args
 */
public static void main(String[] args) {
    TimeDiffCalc calc = new TimeDiffCalc();

    String startTime = "00:00:00";
    String endTime = "23:53:00";
    calc.diffCalc(startTime, endTime);
}

} 
```

# php - 多选表单的选项分组

> ID：12352421
> 
> 赞同：1
> 
> 时间：2012-09-10T13:09:11.453
> 
> 标签：php, jquery, html, forms, multi-select

我想知道是否有办法在多选列表中对选项值进行分组。

为了更清晰的视图，我使用以下表单列表--> [http://blog.jeremymartin.name/2008/02/easy-multi-select-transfer-with-jquery.html#](http://blog.jeremymartin.name/2008/02/easy-multi-select-transfer-with-jquery.html#)

我即兴创作了上面的脚本，以便为一定数量的子类别提供一个父类别。所以说例如：**父母**：家具。**儿童**：椅子、桌子、抽屉、橱柜、床。

我可以通过 php 对其进行编码，以显示一个非常漂亮的选择表单列表，其中包含由其父母分隔的类别，但是当我尝试通过 jquery 将它们从选择框 2 中删除回到选择框 1 时，问题就出现了。附加只是将我的子类别返回到列表的底部。

无论如何，当用户单击删除按钮时，该类别将返回到其自己的父级而不是列表的底部。

以下是需要的人的代码。

```
 //GET CATEGORIES SELECT OPTIONS
                                            .
                                            .
                                      Database Query
                                            .
                                            .
                foreach($cat_values as $opt_values){
                                               .
                                               .
                          Database Query to check if Category have parent.
                       $cat_is_parent == "0" means the option value is the parent.
                                               .
                                               .
                    if($cat_is_parent == "0"){
                        echo '<option disabled="disabled" value="'.$opt_values[0].'" style="font-size:15px">'.$opt_values[1].'</option>';  
                    }
                    else{
                        echo '<option value="'.$opt_values[0].'">-->'.$opt_values[1].'</option>';
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:24:06.277

您将不得不使用该`.after()`函数而不是`.append()`. [正如您在 docs 中看到的](http://api.jquery.com/after/)，您可以指定父元素并使用该`.after()`函数将所选元素放在其后面。

看这个例子：http: [//jsfiddle.net/gntGG/1/](http://jsfiddle.net/gntGG/1/)

当您将元素返回到第一个列表时，总是放在第一个选项之后。

# ruby - 在函数中使用用户定义的变量？（鲁比，瓦提尔）

> ID：12352422
> 
> 赞同：0
> 
> 时间：2012-09-10T13:09:14.273
> 
> 标签：ruby, watir

我正在创建依赖于放置 ID 的拖放功能，它工作得非常好，但我需要用户定义任务的状态，以便用户可以控制将拖动的位置，因为每个部分都是唯一命名的.

getID 是指获取一个 Div 的引用 id。

然后我会连接一个“_”以及添加用户设置的词

班级：

```
def addtask
    dropTask = @browser.div(:id => getID+"_"+"@#{statusOfTask}")
    dragTask = @browser.div(:id, "footer").span(:class, "headerDrag")
    dragTask.drag_and_drop_on dropTask 
end 
```

用户脚本：

```
statusOfTask = ["Ready"]
addtask() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:35:36.610

您只需将所需的状态文本传递给 addTask() 方法。

类（添加 statusOfTask 作为参数）：

```
def addtask(statusOfTask)
    dropTask = @browser.div(:id => getID+"_"+"@#{statusOfTask}")
    dragTask = @browser.div(:id, "footer").span(:class, "headerDrag")
    dragTask.drag_and_drop_on dropTask 
end 
```

用户脚本（传入 statusOfTask 的第一个（或期望的）值）：

```
statusOfTask = ["Ready"]
addtask(statusOfTask[0]) 
```

# web-services - API/Web服务方法检查软件

> ID：12352423
> 
> 赞同：0
> 
> 时间：2012-09-10T13:09:16.313
> 
> 标签：web-services, testing

有什么软件可以用来测试API/Web-service方法吗？我正在寻找这样的东西。

1.  我输入网址
2.  输入 POST/GET 参数

作为回报，我得到了回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:29:38.570

好的，我得到了我想要的东西。

[http://hurl.it/](http://hurl.it/)

Hurl 发出 HTTP 请求。输入一个 URL，设置一些标题，查看响应，然后与其他人共享。非常适合演示和调试 API。

# android - Android 忽略 Content-Disposition：Iframe 内的附件

> ID：12352424
> 
> 赞同：3
> 
> 时间：2012-09-10T13:09:19.847
> 
> 标签：android, html, http, http-headers

我有一个 iframe 内下载处理程序的链接。此下载处理程序在标头中有“Content-Disposition: Attachment”以强制用户下载文件。这适用于*除*Android 设备之外的所有浏览器。Android 会忽略该文件，而不会出现任何错误或消息。使用 Fiddler，我可以确认处理程序已成功请求，并且下载似乎成功完成，但浏览器不允许我保存或打开文件。

在您告诉我停止使用 iframe 之前，恐怕目前这不是我的选择。

下面是一些重现此问题的代码。三个文件：

1.  Default.aspx：包含一个指向 DownloadPage.aspx 的 iframe
2.  DownloadPage.aspx：包含对 Download.ashx 的超粉红色
3.  Download.ashx：以 text/plain 内容类型类型响应内容处置：附件

默认.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="AndroidTest.Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <iframe src="DownloadPage.aspx" width="320" height="1000"></iframe>
    </div>
    </form>
</body>
</html> 
```

下载页面.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="DownloadPage.aspx.cs" Inherits="AndroidTest.DownloadPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:HyperLink NavigateUrl="~/Download.ashx" runat="server">Download</asp:HyperLink>
    </div>
    </form>
</body>
</html> 
```

下载.ashx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace AndroidTest {
    /// <summary>
    /// Summary description for Download
    /// </summary>
    public class Download : IHttpHandler {

        public void ProcessRequest(HttpContext context) {
            context.Response.ContentType = "text/plain";
            context.Response.AddHeader("Content-Disposition", "attachment;filename=\"test.txt\"");
            context.Response.Write("Hello World");
        }

        public bool IsReusable {
            get {
                return false;
            }
        }
    }
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T13:39:44.807

大多数浏览器都会这样做作为安全点，以避免恶意嵌入的自动下载。您可能希望向用户显示链接或按钮以完成下载，以便浏览器识别交互并允许下载完成。

# git - Git Mergetool - 自动接受非冲突合并

> ID：12352426
> 
> 赞同：0
> 
> 时间：2012-09-10T13:09:27.240
> 
> 标签：git

当我使用 git mergetool 时，它需要我确认所有合并的文件，而不是简单地接受非冲突的合并并且只提示我解决冲突，这是我的首选行为。

是否有选项/ .switches 来启用它？

- - 编辑 - -

也许这与 git 无关，与我对 mergetool 的选择有关：KDiff？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:32:03.613

我必须以某种方式破坏了配置，因为我安装了 Git4Windows 和 GitExtensions，并且通常只是在破解它。全新安装的 G4W 将其全部整理出来。

# c# - 如何即时创建表达式

> ID：12352431
> 
> 赞同：1
> 
> 时间：2012-09-10T13:09:43.527
> 
> 标签：c#, linq

我有一个示例查询类，其中包含查询参数作为其属性。此类用于 WCF 通信，并在服务器端生成适当的过滤器表达式。

示例代码在哪里。

```
internal interface IExpressionBuilder<T>
{
   Func<T, bool> Build();
} 
```

这是示例实现

```
[DataContract]
public class PersonQuery : IExpressionBuilder<Person>
{
    [DataMember]
    public string IdCardNumber;
    [DataMember]
    public string FirstName { get; set; }
    [DataMember]
    public string LastName { get; set; }
    [DataMember]
    public DateTime? BirthDate { get; set; }

    #region Implementation of IExpressionBuilder<Data>

    public Func<Person, bool> Build()
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

用法：

```
publi List<Person> GetPersonByQuery(PersonQuery query)
{
    (using context = new SampleContext())
    {
        return List<Person> foundPersons = context.people.where(query.build());
    }
} 
```

您可以看到这个想法非常简单，但我的问题是如何在表达式中动态包含 PersonQuery 属性，如果它们已设置，则在调用 build() 方法时，基于

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:38:50.233

Have you looked at [Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)? It seems ideally suited to your problem.

If you want to use functions and build expression trees, [this](http://blogs.msdn.com/b/mitsu/archive/2010/03/02/c-4-expressions-blocks-part-i.aspx) library provides a nice, fluent syntax for creating expression trees.

# asp.net-mvc - 将文本附加到从 DB 填充的下拉选项

> ID：12352436
> 
> 赞同：1
> 
> 时间：2012-09-10T13:10:01.170
> 
> 标签：asp.net-mvc

我正在 MVC 应用程序中构建一个页面，该页面包含一个下拉框，允许用户从多个财务周期中选择一个。

为了让我们的用户更清楚，我想将“（当前）”附加到当前财务期的选项，并可能将“（最新）”附加到上一期以表示最后一个完整期间。我们已经可以确定我们处于哪个财务期，以及随后的上一个财务期，依此类推。

因此，假设我希望附加到的两个选项当前如下所示：

*   第 11 期
*   第 12 期

我希望他们阅读：

*   第 11 期（最新）
*   第 12 期（当前）

下拉列表是从数据库中填充的，但我想在应用程序级别附加此文本。

这是可能的吗？如果是这样，怎么做？我对如何去做有点茫然。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:18:09.117

我假设你在你的模型/视图模型类上使用某种类型`IEnumerable`来填充下拉列表中的项目。当您构建此列表时，只需添加“（当前）”和“（最新）”选项，然后将模型返回到您的视图。如果`FinancialPeriod`是这样的模型/视图模型类：

```
public class FinancialPeriod{
    public int FinancialPeriodId { get; set; }
    public string DisplayText { get; set; }
} 
```

然后您可以在您的控制器中执行此操作，假设您从数据库中检索到的所有财务期间的列表是您模型上的一个属性，称为`FinancialPeriods`：

```
public ActionResult Index(){
    var model = GetTheModel();
    model.FinancialPeriods.Add(new FinancialPeriod{ 
        FinancialPeriodId = <something>, 
        DisplayText = "(Current)"
    };
    model.FinancialPeriods.Add(new FinancialPeriod{
        FinancialPeriodId = <somethingElse>
        DisplayText = "(Latest)"
    };
    return View(model);
} 
```

确保在模型回发到控制器时替换值`<something>`并且`<somethingElse>`可以正确解释。

**编辑 - 根据您的评论和编辑，这样的内容更合适：**

```
public ActionResult Index(){
    var model = GetTheModel();
    var currentMonth = DateTime.Now.Month;
    var previousMonth = currentMonth - 1;
    if (previousMonth == 0)
        previousMonth = 12;
    var currentPeriod = "Period " + currentMonth.ToString();
    var latestPeriod = "Period " + previousMonth.ToString();
    var newList = new List<FinancialPeriod>();
    foreach(var period in model.FinancialPeriods){
        if(period.DisplayText == currentPeriod)
        {
            newList.Add(new FinancialPeriod
                { 
                    FinancialPeriodId = period.FinancialPeriodId,
                    DisplayText = period.DisplayText + " (Current)"
                };
                continue;
        }
        if(period.DisplayText == latestPeriod) 
        {
            newList.Add(new FinancialPeriod
                {
                    FinancialPeriodId = period.FinancialPeriodId, 
                    DisplayText = period.DisplayText + " (Latest)"
                };
            continue;
        }
        newList.Add(period);
    }
    model.FinancialPeriods = newList;
    return View(model);
} 
```

# directory-structure - CAB 文件 MAKECAB.exe 目录结构的存储方式

> ID：12352440
> 
> 赞同：0
> 
> 时间：2012-09-10T13:10:12.717
> 
> 标签：directory-structure, cab

我希望有人能告诉我在使用 makecab.exe 创建 CAB 文件时是否有办法存储我想要的文件的目录结构？

或者是否有其他实用程序可以执行此操作并创建 CAB 文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:39:13.033

我找到了。我正在使用 SDK 之外的 CABARC，并且在目录结构上有一个递归选项。

# android - Android 和 Google Analytics：无法跟踪事件

> ID：12352446
> 
> 赞同：0
> 
> 时间：2012-09-10T13:10:23.667
> 
> 标签：android, google-analytics

我在我的项目中使用谷歌分析，我得到“套接字或流问题”。错误信息。

```
W/GoogleAnalyticsTracker(416): Problem with socket or streams.
W/GoogleAnalyticsTracker(416): java.net.SocketException: Host is unresolved: www.google-analytics.com
W/GoogleAnalyticsTracker(416):  at java.net.Socket.connect(Socket.java:966)
W/GoogleAnalyticsTracker(416):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
W/GoogleAnalyticsTracker(416):  at com.google.android.apps.analytics.PipelinedRequester.maybeOpenConnection(Unknown Source)
W/GoogleAnalyticsTracker(416):  at com.google.android.apps.analytics.PipelinedRequester.addRequest(Unknown Source)
W/GoogleAnalyticsTracker(416):  at com.google.android.apps.analytics.NetworkDispatcher$DispatcherThread$AsyncDispatchTask.dispatchSomePendingHits(Unknown Source)
W/GoogleAnalyticsTracker(416):  at com.google.android.apps.analytics.NetworkDispatcher$DispatcherThread$AsyncDispatchTask.run(Unknown Source)
W/GoogleAnalyticsTracker(416):  at android.os.Handler.handleCallback(Handler.java:587)
W/GoogleAnalyticsTracker(416):  at android.os.Handler.dispatchMessage(Handler.java:92)
W/GoogleAnalyticsTracker(416):  at android.os.Looper.loop(Looper.java:123)
W/GoogleAnalyticsTracker(416):  at android.os.HandlerThread.run(HandlerThread.java:60) 
```

你有这方面的经验吗？

谢谢你。

编辑：

这是我正在使用的代码：

```
GoogleAnalyticsTracker tracker;
tracker = GoogleAnalyticsTracker.getInstance();
tracker.startNewSession("xxxxxxxxxxxxx",context);
tracker.trackPageView("/HomeScreen");
tracker.dispatch(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:23:29.330

问题出在我的自定义 rom 中。在一些自定义 ROM 中，为了增加电池寿命，开发人员正在更改 localhost ip 地址。随着这一变化，一些服务即。谷歌分析被禁用，没有数据自动上传。正如我们所知，超过 90% 的应用程序都在使用 Google Analytics，因此这将起到作用：防止数据传输并延长电池寿命。

# nunit - NUnit 中 Assert.True 和 Assert.IsTrue 的区别？

> ID：12352448
> 
> 赞同：46
> 
> 时间：2012-09-10T13:10:30.173
> 
> 标签：nunit, assert

这两者之间有什么区别吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-10T13:26:01.100

没有不同。自 v2.5 起添加了`Assert.True()`其他（不带）。`Is`

来自版本的文档`2.5`：（[nunit v2.5](http://www.nunit.org/index.php?p=conditionAsserts&r=2.5)）

> 为 True、False、Null 和 NotNull 条件提供了两种形式。“Is”形式与早期版本的 NUnit 框架兼容，而那些没有“Is”的形式是为了与 NUnitLite 兼容而提供的

顺便说一句，反汇编的 nunit.framework.dll（使用 ILSPY）

```
public static void IsTrue(bool condition)
{
    Assert.That(condition, Is.True, null, null);
}

public static void True(bool condition)
{
    Assert.That(condition, Is.True, null, null);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-10T13:24:33.343

似乎没有任何实现差异。[在此处查看](http://bazaar.launchpad.net/~nunit-core/nunitv2/2.6.1/view/head:/src/NUnitFramework/framework/Assert.cs)最新版本的源代码，当参数列表相同时`True`，`IsTrue`和`That`都以相同的方式实现：

```
public static void True(bool condition, string message, params object[] args)
{
    Assert.That(condition, Is.True, message, args);
}
...
public static void IsTrue(bool condition, string message, params object[] args)
{
    Assert.That(condition, Is.True, message, args);
}
...
static public void That(bool condition, string message, params object[] args)
{
    Assert.That(condition, Is.True, message, args);
} 
```

重载方法的实现方式类似。

# wordpress - 如何为 Wordpress 主题集成选项树

> ID：12352451
> 
> 赞同：6
> 
> 时间：2012-09-10T13:10:50.047
> 
> 标签：wordpress

我想在不安装和激活插件的情况下将选项树框架与 Wordpress 主题集成，那么该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T11:26:59.433

从 2.0 版开始，插件开发人员已经包含了许多可以在您的 functions.php 中使用的过滤器。其中包括`Theme Mode`, 和 ot-loader.php 状态中的注释；

```
 * For developers: Theme mode.
   *
   * Run a filter and set to true to enable OptionTree theme mode.
   * You must have this files parent directory inside of 
   * your themes root directory. As well, you must include 
   * a reference to this file in your themes functions.php.
   * @since     2.0
   */
  define( 'OT_THEME_MODE', apply_filters( 'ot_theme_mode', false ) ); 
```

要在您的主题中激活选项树而不是作为插件，您将所有插件文件包含在主题的根目录中，即

/wp-content/themes/my-awesome-theme/options-tree

然后在`functions.php`你运行这个过滤器，然后包含 ot-loader.php 文件。我在下面展示了这个，我还展示了 show_pages 过滤器；

```
add_filter( 'ot_theme_mode', '__return_true' );
add_filter( 'ot_show_pages', '__return_true' );

require_once ('option-tree/ot-loader.php'); 
```

show_pages 过滤器很有用，因为在您设置了主题和选项后，您将进入并将其设置为 false，因此客户端不会获得主选项树管理菜单，因此无法开始“修补”和垃圾一切。您将其更改为；

```
add_filter( 'ot_show_pages', '__return_false' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:55:25.980

对于使用子主题并在主题模式下使用 OptionTree 插件时出现“无法打开流”错误的任何人，请执行以下操作：

ot-loader.php，在第 128 行左右，更改：

```
if ( false == OT_THEME_MODE ) {
        define( 'OT_DIR', plugin_dir_path( __FILE__ ) );
        define( 'OT_URL', plugin_dir_url( __FILE__ ) );
      } else {
        define( 'OT_DIR', trailingslashit( get_template_directory() ) . trailingslashit( basename( dirname( __FILE__ ) ) ) );
        define( 'OT_URL', trailingslashit( get_template_directory_uri() ) . trailingslashit( basename( dirname( __FILE__ ) ) ) );
      } 
```

对此：

```
if ( false == OT_THEME_MODE ) {
        define( 'OT_DIR', plugin_dir_path( __FILE__ ) );
        define( 'OT_URL', plugin_dir_url( __FILE__ ) );
      } elseif ( is_child_theme() ) {
        define( 'OT_DIR', trailingslashit( get_stylesheet_directory() ) . trailingslashit( basename( dirname( __FILE__ ) ) ) );
        define( 'OT_URL', trailingslashit( get_stylesheet_directory_uri() ) . trailingslashit( basename( dirname( __FILE__ ) ) ) );
      } else {
        define( 'OT_DIR', trailingslashit( get_template_directory() ) . trailingslashit( basename( dirname( __FILE__ ) ) ) );
        define( 'OT_URL', trailingslashit( get_template_directory_uri() ) . trailingslashit( basename( dirname( __FILE__ ) ) ) );
      } 
```

代码检查正在使用的主题是否是子主题 (is_child_theme()) 并使用 get_stylesheet_directory() 和 get_stylesheet_directory_uri() 设置 dir 和 url。

希望这可以帮助其他遇到此问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T17:18:48.107

It's really easy to integrate option tree :

Visit link below if you like to use it using same plugin slug:

[Using same plugin slug](http://cyberspacecreator.com/how-to-integrate-option-tree-in-wordpress-theme/)

Or you can ingrate it in custom folder on your WordPress theme:

[Using custom folder](http://cyberspacecreator.com/how-to-integrate-option-tree-in-theme-custom-folder/)

Video Guide here (3:44 Sec):

[Video Guide](http://www.youtube.com/watch?v=YGHQ7mce6Jc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-02T07:45:40.930

```
add_filter('ot_show_pages','__return_false');
include_once('inc/theme-options.php'); 
```

`theme-options.php`在文件中导出设置。

```
add_filter('ot_theme_mode','__return_true');
require( trailingslashit( get_template_directory() ) . 'theme-option/ot-loader.php' );
add_filter('ot_show_new_layout','__return_false'); 
```

# android - Android 网络浏览器主页

> ID：12352452
> 
> 赞同：8
> 
> 时间：2012-09-10T13:10:51.587
> 
> 标签：android, browser, sharedpreferences, android-contentprovider

我见过几个应用程序和广告网络，例如 startapp 通过代码更改 android 网络浏览器主页。这怎么可能？

我已经查看了 startapp sdk，但我没有设法找到他们更改主页的部分。

我也看过`BrowserSettings`了 `com.android.browser.BrowserSettings`

在`BrowserSettings`中，有一个接口叫做`setHomepage(Context, String)`。

```
public void setHomePage(Context context, String url) {
    Editor ed = PreferenceManager.
            getDefaultSharedPreferences(context).edit();
    ed.putString(PREF_HOMEPAGE, url);
    ed.commit();
    homeUrl = url;
} 
```

我不太了解 java/android，所以如果我错了，请纠正我：`setHomepage()`未声明为静态的，因此无法从其他活动中调用它。所以我不能用这个。

我看不到任何应用于共享首选项的模式，因此这意味着默认情况下它将采用私有模式，我无法编辑共享首选项或？

有人说可能与 contentProvider/Resolver 一起做。

[BrowserSettings.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/android/browser/BrowserSettings.java#BrowserSettings.setHomePage%28android.content.Context%2Cjava.lang.String%29 "BrowserSettings.java")的链接

任何帮助或想法将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:52:55.160

我和[Diane HackBorn（谷歌的 Android 工程师）一起讨论这个问题](https://groups.google.com/d/msg/android-developers/HJNUzs5Fu7A/_0ghwZ7fnx0J)：这是不可能的，因为这将是一个平台安全漏洞。

如果它碰巧是可能的，将通过某种黑客攻击（即：具有根访问权限的应用程序可以直接写入浏览器应用程序设置文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:08:16.367

我看到你提到了 startapp。我查看了他们反编译的[SDK](http://www.mediafire.com/?j4bqrguuqha4403)，但我找不到任何关于“更改主页部分”的信息。

我也知道他们这样做，但我无法在 SDK 中找到它。也许对android有更好理解的人可以看看它。我有一部 2.2 版的安卓手机，没有 root 访问权限，他们设法更改了主页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:54:13.050

有了root权限，你可以去/data/app/com.android.browser/shared_prefs

你有共享首选项的 XML 文件。

您只需要编辑`PREF_HOMEPAGE`xml 条目。

没有 root 是不可能的，因为您需要 root 权限才能访问该目录。

# javafx - 从 javaFX 2 开始运行代码

> ID：12352453
> 
> 赞同：0
> 
> 时间：2012-09-10T13:10:52.777
> 
> 标签：javafx

我想知道如何在 JavaFX 2 应用程序启动时运行代码。例如 Netbeans 中的 Hello World 应用程序。如何在开始时设置不可见的元素？我将 JavaFx 与 FXML 和 SceneBuilder 一起使用。

使用 java，我可以在 Netbeans 中使用“编辑代码”来放入我的代码，它会在启动时运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:28:27.297

使用 fxml，您可以附加一个[控制器](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#controllers)，该控制器在加载文档时调用其初始化方法（这将是我在代码中初始化基于 fxml 的 UI 的首选方式）。

JavaFX 应用程序有一个[启动](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#start%28javafx.stage.Stage%29)方法，用于在启动时处理初始化 GUI。

在您的 fxml 中，您可以在节点上设置可见性属性以定义其初始可见状态。

您可以创建一个 CSS 样式表并在该设置中选择一个选择器，该选择器选择您的节点并对其进行初始样式设置，例如使其不可见。

FXML 还允许您在 fxml 文档或外部文件中嵌入脚本语言，这些文件可用于初始化 GUI 并对事件采取行动。

# cakephp - HtmlHelper 将查询字符串添加到静态文件

> ID：12352454
> 
> 赞同：0
> 
> 时间：2012-09-10T13:10:57.737
> 
> 标签：cakephp, html-helper

我想在`version`我的静态文件中添加一个参数（用于处理缓存问题）。

我该怎么做？我认为`HtmlHlper::css`或`HtmlHlper::script`没有得到查询字符串...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:43:28.893

为什么你这么想？你试过了吗？

```
$this->Html->script('/myfile.css?v=123&somequerystring=foo&even=more'); 
```

应该管用

# python - 如何使用 SQLAlchemy 无缝访问多个数据库？

> ID：12352455
> 
> 赞同：19
> 
> 时间：2012-09-10T13:10:57.583
> 
> 标签：python, postgresql, sqlalchemy

假设我为公司的不同部门创建了一个产品数据库系统。由于各种原因，每个部门都有自己的 PostgreSQL 数据库实例。数据库的模式是相同的，但它们中的数据不同。对于这些系统中的每一个，都存在一个执行某些业务逻辑（无关）的 Python 应用程序。每个 Python 应用程序都通过 SQLAlchemy 访问其并且仅访问其数据库。

我想创建一个主管系统，可以访问所有这些数据库中的所有数据（通读功能）。

这是我的想法的一个例子： ![在此处输入图像描述](../Images/870d5536ffb341e0840b2c0d6ba35f8b.png)

我可以用 SQLAlchemy 做到这一点吗？如果是这样，解决这类问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T13:12:53.730

当然你可以用 SQLAlchemy 做到这一点。

您需要做的就是创建不同的连接引擎，每个引擎都有自己的会话生成器。SQLAlchemy 中的任何内容都不会限制您一次只能使用一个数据库。

```
engines = []
sessions = []
for dbconninfo in databases:
    engine = create_engine(dbconninfo)
    engines.append(engine)
    sessions.append(sessionmaker(bind=engine)()) 
```

您可以使用每个会话来运行查询，结果对象附加到生成它们的会话，以便更改流回正确的数据库。一定要详细研究[会话文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html)，看看如果你将一个对象从一个会话合并到另一个会话中会发生什么，例如。

# javascript - 如何使用 jquery 解析具有相同标签名称的 yahoo 天气 api 数据

> ID：12352457
> 
> 赞同：1
> 
> 时间：2012-09-10T13:11:02.433
> 
> 标签：javascript, android, jquery-ui, cordova, xml-parsing

我正在使用 jquery 来解析 yahoo 天气 api xml 响应。

我的 XML 响应在这里： http: [//pastie.org/4695569](http://pastie.org/4695569)

在第 41 和 42 行有两个标签名称`yweather:forecast`，

我解析 XML 的代码在这里[http://pastie.org/4695573](http://pastie.org/4695573)

我能够`yweather:forecast`使用解析标签`forecast_today_day:$(v).find("forecast").attr("day")`

我的问题是：如何使用循环获得两个不同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:30:54.757

你可以用`each()`这个。

```
$(v).find("forecast").each(function(i) {
    alert($(this).attr('day'));
}) 
```

循环并获取值。我已经在这里提醒了。

# javascript - 显式定义控制器参数时，默认模型绑定器崩溃

> ID：12352460
> 
> 赞同：1
> 
> 时间：2012-09-10T13:11:08.860
> 
> 标签：javascript, asp.net-mvc-3

我正在尝试找出 MVC3 中的模型绑定。看看这个例子。

这是控制器代码：

```
public ActionResult Index()
    {
        Person person = new Person{ Name = "Test" };

        return View(person);
    }

    [HttpPost]
    public string Edit(Person personModel)
    {
        return string.Format("From server: {0}", personModel.Name);
    } 
```

这是 html/javascript 位：

```
@model MCV3.Test.Models.Person
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
    $(document).ready(function (){

        var model = @Html.Raw(Json.Encode(Model));

        $.ajax({
            url : "/Person/Edit", 
            type: "Post",
            datatype: "json",
            data :  model, 
            success: function (data) {                   
                $("#result").text(data);                    
            }
        });

    });
</script>
</head>
<body>
    <label id="result"></label>
</body>
</html> 
```

上面的代码有效，但是如果我将 ajax 调用的数据设置更改为：

```
$.ajax({
            url : "/Person/Edit", 
            type: "Post",
            datatype: "json",
             data : {personModel : model},
            success: function (data) {                   
                $("#result").text(data);                    
            }
        }); 
```

它不再起作用：模型的类型正确，但 name 属性为空。

在有效的示例中，post 参数是：

```
Name    Test

Name=Test 
```

但在不起作用的示例中，它们是：

```
personModel[Name]   Test

personModel%5BName%5D=Test 
```

如果看起来像这样，似乎 MVC 无法序列化请求：`personModel[Name] Test`

有没有办法在不编写自定义活页夹的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:37:35.280

当 MVC 绑定尝试创建和填充`Person`对象以传递给您的`Edit`操作时，它会尝试查找`Person`对象上所有可设置属性的值；在这种情况下，`Name`财产。因此，它在表单数据、查询字符串数据（等）中查找具有键“名称”的名称值对。您的工作示例有一个，您的非工作示例没有。

如果您想以这种格式发布数据，您可以创建一个自定义[`ValueProvider`](http://mgolchin.net/posts/19/dive-deep-into-mvc-ivalueprovider)来解析数据并根据它找到的内容返回值。

# php - 会话值设置在一个文件中，无法在其他文件中读取

> ID：12352467
> 
> 赞同：0
> 
> 时间：2012-09-10T13:11:42.823
> 
> 标签：php

我创建了一个会话变量，用于将错误消息从我的 mail.php 文件传递​​到调用它的文件。

```
session_start();
if(something) {
    $_SESSION['error'] = "something went wrong";
} 
```

我尝试在名为 mail.php 的文件中读取它：

```
if(!empty($_SESSION['error'])) {
    echo $_SESSION['error'];
} else {
    echo "Email sent!";
} 
```

但它不起作用。我在两个文件的页面顶部调用 session_start() 。

var_dump 给出了这个：

```
array(1) { ["error"]=> string(41) "Not all fields are filled in." } ­ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:42:18.937

[`session_write_close();`](http://php.net/manual/en/function.session-write-close.php)在会话通话结束时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:15:55.153

只有在重新加载页面时才能访问会话变量。在同一个页面加载中，它将无法访问。我也遇到了这个问题。可能取决于执行顺序或其他东西。

如果未设置会话变量，则尝试使用全局数组作为备份。

```
if(!isset($_SESSION['var'])) $x = $_GLOBALS['var']; 
```

# asp.net - asp.net 删除尾部斜杠

> ID：12352469
> 
> 赞同：0
> 
> 时间：2012-09-10T13:11:48.543
> 
> 标签：asp.net, url-rewriting, web-config

我在我的 web.config 中得到了这个代码

```
<rule source="(.*)/$" destination="$1" /> 
```

当我加载某个页面 www.example.com/page.aspx/ 时，我加载了相同的页面，但样式和图片混乱，并且该页面的每个链接现在都是 www.example.com/page.aspx/somelink.apsx

这条规则有问题吗？

# java - 解析时间时SimpleDateFormat parseexception

> ID：12352470
> 
> 赞同：0
> 
> 时间：2012-09-10T13:11:48.313
> 
> 标签：java, date, date-format, simpledateformat

我已经将一些日期转换为字符串并将它们存储在我的数据库中

```
 DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss"); 
```

当它们以字符串形式出现时，它们看起来像这样：“12-09-2012 02:33:00”

然后我尝试使用

```
 DateFormat formatter = new SimpleDateFormat("hh:mm:ss"); 
```

这给了我一个解析异常，说它是不可解析的日期，这是异常消息：

java.text.ParseException：无法解析的日期：“12-09-2012 02:33:00”（偏移量 2）

这里有一些代码可以更好地理解我在做什么：

```
 String start="";
    String slut="";
    DateFormat formatterday = new SimpleDateFormat("hh:mm:ss");

            start=formatterday.format(formatterday.parse(a.startTime));
            slut=formatterday.format(formatterday.parse(a.endTime)); 
```

我尝试分离我的语句，以便我先解析然后格式化，并且错误似乎在解析过程中出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:33:40.200

@Ken 您的 a.startTime 变量的日期格式应该具有“hh:mm:ss”格式。

如果您的 a.startTime 值类似于 02:33:00 那么您的代码应该可以工作。

因此，请检查您的 a.startTime 值并使用正确的日期格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:37:27.207

简单日期格式接受特定模式，并且您的字符串值“12-09-2012 02:33:00”显然不遵循给定模式“hh:mm:ss”。为了将原始日期字符串转换为日期对象，您需要使用原始模式。

简单的例子：

```
DateFormat formatter1 = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");
DateFormat formatter2 = new SimpleDateFormat("hh:mm:ss");

String originalDateValue = "12-09-2012 02:33:00";
Date originalDate = formatter1.parse( originalDateValue );

String shortDateValue = formatter2.format( originalDate );
Date shortDate = formatter2.parse( shortDateValue );

System.out.println( originalDateValue );
System.out.println( originalDate );

System.out.println( shortDateValue );
System.out.println( shortDate ); 
```

这将打印出：

```
12-09-2012 02:33:00
Wed Sep 12 02:33:00 CEST 2012
02:33:00
Thu Jan 01 02:33:00 CET 1970 
```

请注意，shortDate 的值从时代开始 -> 1.1.1970。

# performance - 从 OFFSET / FETCH NEXT 获取总行数

> ID：12352471
> 
> 赞同：111
> 
> 时间：2012-09-10T13:11:50.873
> 
> 标签：performance, paging, sql-server-2012

所以，我有一个函数可以返回一些我想在我的网站上实现分页的记录。有人建议我使用 SQL Server 2012 中的 Offset/Fetch Next 来完成此操作。在我们的网站上，我们有一个区域列出了记录总数以及您当时所在的页面。

之前，我获得了整个记录集，并且能够以编程方式在其上构建分页。但是使用带有 FETCH NEXT X ROWS ONLY 的 SQL 方式，我只返回 X 行，所以我不知道我的总记录集是多少以及如何计算我的最小和最大页面。我可以告诉这样做的唯一方法是调用该函数两次并在第一个上计算行数，然后使用 FETCH NEXT 运行第二个。有没有更好的方法不会让我运行两次查询？我正在努力提高性能，而不是减慢它。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-11-21T19:37:01.723

我在使用 COUNT( *) OVER() 方法时遇到了一些性能问题。（我不确定它是否是服务器，因为它需要 40 秒才能返回 10 条记录，然后后来没有任何问题。）这种技术在所有条件下都有效，而无需使用 COUNT(* ) OVER() 并完成一样：

```
DECLARE 
    @PageSize INT = 10, 
    @PageNum  INT = 1;

WITH TempResult AS(
    SELECT ID, Name
    FROM Table
), TempCount AS (
    SELECT COUNT(*) AS MaxRows FROM TempResult
)
SELECT *
FROM TempResult, TempCount
ORDER BY TempResult.Name
    OFFSET (@PageNum-1)*@PageSize ROWS
    FETCH NEXT @PageSize ROWS ONLY 
```

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2012-09-18T03:42:56.300

您可以使用`COUNT(*) OVER()`... 这是一个使用的快速示例`sys.all_objects`：

```
DECLARE 
  @PageSize INT = 10, 
  @PageNum  INT = 1;

SELECT 
  name, object_id, 
  overall_count = COUNT(*) OVER()
FROM sys.all_objects
ORDER BY name
  OFFSET (@PageNum-1)*@PageSize ROWS
  FETCH NEXT @PageSize ROWS ONLY; 
```

但是，这应该保留给小数据集；在较大的集合上，性能可能很糟糕。[请参阅此 Paul White 文章以获得更好的替代方案](https://www.sqlservercentral.com/articles/optimising-server-side-paging-part-ii)，包括维护索引视图（仅当结果未过滤或您`WHERE`提前知道子句时才有效）和使用`ROW_NUMBER()`技巧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-29T16:01:45.217

显然，根据查询的不同，结果可能会有很大差异。我用这些结果测试了我的案例：（8 个连接，2 个子查询，5800 行不同的结果，5900 行不不同）：

*   ~0.820 秒使用`COUNT(1) OVER()`（[Aaron Bertrand 的回答](https://stackoverflow.com/q/12352471/659778)，但结果错误*）
*   ~0.850 秒使用`#TEMP`表。
*   ~1.590 秒`WITH .. AS`（[James Moberg 的分析器](https://stackoverflow.com/a/20130331/659778)）
*   ~1.600 秒运行两次（第一次没有订购，只是为了计数）

*在我的情况下， [Aaron Bertrand 的](https://stackoverflow.com/a/12470087/659778)回答没有奏效，因为`COUNT(1) OVER()`似乎包括被过滤掉的行`DISTINCT`。

使用临时表：

```
DECLARE 
  @PageSize INT = 10, 
  @PageNum  INT = 1;

SELECT
  name, object_id
INTO #MY_TEMP
FROM sys.all_objects

SELECT *
FROM #MY_TEMP
ORDER BY name
  OFFSET (@PageNum-1)*@PageSize ROWS
  FETCH NEXT @PageSize ROWS ONLY;

SELECT COUNT(1) FROM #MY_TEMP
-- or
-- SELECT @MY_OUTPUT_PARAM = COUNT(1) FROM #MY_TEMP

DROP TABLE #MY_TEMP 
```

临时表的好处是计数可以分成不同的结果或输出参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-27T23:11:22.857

基于[詹姆斯莫伯格的回答](https://stackoverflow.com/a/20130331/1677912)：

`Row_Number()`如果您没有 SQL Server 2012 并且不能使用 OFFSET，这是使用的替代方法

```
DECLARE 
    @PageNumEnd INT = 10, 
    @PageNum  INT = 1;

WITH TempResult AS(
    SELECT ID, NAME
    FROM Tabla
), TempCount AS (
    SELECT COUNT(*) AS MaxRows FROM TempResult
)

select * 
from
(
    SELECT
     ROW_NUMBER() OVER ( ORDER BY PolizaId DESC) AS 'NumeroRenglon', 
     MaxRows, 
     ID,
     Name
    FROM TempResult, TempCount

)resultados
WHERE   NumeroRenglon >= @PageNum
    AND NumeroRenglon <= @PageNumEnd
ORDER BY NumeroRenglon 
```

# javascript - 小共享点问题（关于列表视图）

> ID：12352476
> 
> 赞同：1
> 
> 时间：2012-09-10T13:12:11.337
> 
> 标签：javascript, jquery, sharepoint, sharepoint-2010

我创建了列表视图并添加了编辑功能

测试时，我输入了新名称'test'并按OK，文件名没有改变，而是像“test+oringnalfilename.aspx”，为什么它追加而不是替换？

这是编辑代码：

```
<a href="javascript: {ddwrt:GenFireServerEvent(concat('__cancel;dvt_1_form_editkey={',$KeyValue,'}'))}">edit</a> 
```

谁能帮我吗？

# nexus - Nexus：我们有多少文物？

> ID：12352477
> 
> 赞同：3
> 
> 时间：2012-09-10T13:12:33.537
> 
> 标签：nexus

在工作中，我们已经使用 Nexus OSS 1.8.0 几年了。最近，我（作为 Nexus 管理员）被问到我们的实例中有多少工件。这是一个非常简单的问题，但我一生都无法在任何地方找到答案：

*   我在 Nexus 的 UI、Google 或这里找不到它；
*   查看 Nexus 的 REST API，有一个搜索端点（[实际上是](https://repository.sonatype.org/nexus-indexer-lucene-plugin/default/docs/rest.data_index.html)[两个](https://repository.sonatype.org/nexus-indexer-lucene-plugin/default/docs/rest.lucene.search.html)，尽管**data_index**现在已弃用），它还返回查询产生了多少结果（字段**totalCount**），除了我还没有弄清楚如何搜索对于*一切*：提供空参数会产生 400 响应。

 *****我对我们拥有的许多人工制品提供了一个合理的估计，现在这已经足够了，但是我的工作比我认为应该做的要多……有人有同样的问题吗？

* * *

**更新：**

我需要知道我们有多少内部工件（而不是来自 Maven Central 等的外部依赖项），所以我最终得到了：

`http://<OUR-NEXUS>/service/local/lucene/search?q=*&repositoryId=<OUR-REPO>`

对于每个托管存储库并添加**totalCount**字段。

对于完整计数，搜索`q=*`产生了太多结果，所以我跑了：

`find $PATH_TO_SONATYPE_HOME | grep sha1 | egrep -v 'nexus-maven-repository-index|repository-metadata|maven-metadata|\.pom\.sha1' | wc -l`

但我仍然很惊讶这种类型的信息不容易获得......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:43:50.757

尝试以下操作：

```
find $PATH_TO_SONATYPE_HOME -name "*.jar" | wc -l 
```

它只会计算 JAR artfacts 但通常占存储在 Nexus 中的大部分文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:34:00.080

Mark 的建议是可以的，但如果你计算 sha1 文件，你会得到更准确的计数，因为 nexus 会在上传每个工件时创建该文件。*****

# powershell - Service Bus 1.0 Beta New-SBFarm：指定的目录服务属性或值不存在

> ID：12352484
> 
> 赞同：0
> 
> 时间：2012-09-10T13:12:57.727
> 
> 标签：powershell, servicebus

我正在尝试按照 [http://msdn.microsoft.com/en-us/library/windowsazure/jj193021(v=azure.10).aspx中的程序注册一个新的 SB Farm](http://msdn.microsoft.com/en-us/library/windowsazure/jj193021(v=azure.10).aspx)

但是，当我尝试执行第一部分 $mycert= ConvertTo-SecureString -AsPlainText -Force -String 'password1' New-SBFarm -FarmMgmtDBConnectionString "data source=.\SQLEXPRESS;Integrated Security=True;" –CertAutoGenerationKey $mycert

我收到以下错误：

New-SBFarm : 指定的目录服务属性或值不存在。在 line:1 char:1 + New-SBFarm -FarmMgmtDBConnectionString "data source=.\SQLEXPRESS;Integrated ... + ~~~~~~~~~~~~~~~~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~ ~~~ + CategoryInfo : NotSpecified: (:) [New-SBFarm], COMException + FullyQualifiedErrorId : System.Runtime.InteropServices.COMException,Micr osoft.ServiceBus.Commands.NewSBFarm

我已确保我的服务器满足应用程序要求，但是我仍然没有运气......

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:48:17.253

该行包含两个单独的 cmdlet 调用，一个用于创建安全字符串，第二个用于创建新场。您是否分别执行每个调用？从粘贴的代码中，您似乎将它们作为一个命令运行，这可能会失败。

此外，New-SBFarm 有一个显示详细跟踪的开关。您可以尝试在最后运行带有 -verbose 的命令并共享输出吗？

# android - Android：使用 AcountManager 访问 Google 文档

> ID：12352485
> 
> 赞同：2
> 
> 时间：2012-09-10T13:12:58.843
> 
> 标签：android, google-docs, google-docs-api

嗨，我正在开发一个必须访问 Google Docs 的项目。例如，我从[这里](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)开始 目前我正在查看“401 无法解析 AuthSub 令牌”：

[https://developers.google.com/google-apps/documents-list/](https://developers.google.com/google-apps/documents-list/)

[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

[使用 Android AccountManager 获取 gdata 的 authtoken](https://stackoverflow.com/questions/3802198/using-android-accountmanager-to-get-authtoken-for-gdata/3977985#3977985)

据我了解，android 返回错误类型的访问令牌。如果有任何方法可以使用 AccountManager 为 android 创建有效的访问令牌，或者我需要使用其他一些身份验证方式？

```
import com.google.api.client.googleapis.extensions.android.accounts.GoogleAccountManager;
import com.google.api.services.docs.DocsClient;
import com.google.api.services.docs.DocsUrl;
import com.google.api.services.docs.model.DocumentListEntry;
import com.google.api.services.docs.model.DocumentListFeed;

public class Main extends ListActivity{
    private static final String AUTH_TOKEN_TYPE = "writely";
    private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
    protected DocsClient client;
    String accountName;

    GoogleAccountManager accountManager;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        client = new DocsClient(HTTP_TRANSPORT.createRequestFactory(credential));
        accountManager = new GoogleAccountManager(this);
        gotAccount();
    }

    void gotAccount() {

        accountManager.getAccountManager().getAuthToken(account, AUTH_TOKEN_TYPE, true, new AccountManagerCallback<Bundle>() {

          public void run(AccountManagerFuture<Bundle> future) {
            try {
              Bundle bundle = future.getResult();
              if (bundle.containsKey(AccountManager.KEY_INTENT)) {
                Intent intent = bundle.getParcelable(AccountManager.KEY_INTENT);
                intent.setFlags(intent.getFlags() & ~Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivityForResult(intent, REQUEST_AUTHENTICATE);
              } else if (bundle.containsKey(AccountManager.KEY_AUTHTOKEN)) {
                setAuthToken(bundle.getString(AccountManager.KEY_AUTHTOKEN));
                onAuthToken();
              }
            } catch (Exception e) {
              Log.e(TAG, e.getMessage(), e);
            }
          }
        }, null);
  }

void setAuthToken(String authToken) {
    credential.setAccessToken(authToken);
  }

 void onAuthToken() {
    List<String> result = new ArrayList<String>();
    DocumentListFeed feed = client.executeGetDocumentListFeed(DocsUrl.forDefaultPrivateFull());
    for (DocumentListEntry doc : feed.docs) {
            result.add(doc.title);
          }
    //DO something with list
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:45:00.783

我已经成功地完成了这项任务。不得不切换到 1.7 版的 google api 客户端并使用

`com.google.api.client.googleapis.auth.clientlogin.ClientLogin.Response`

代替

`com.google.api.client.googleapis.auth.oauth2.GoogleCredential`

# objective-c - 调试时iOS内存管理方式不同

> ID：12352486
> 
> 赞同：0
> 
> 时间：2012-09-10T13:13:02.727
> 
> 标签：objective-c, ipad, debugging, memory-management

我遇到了一些奇怪的行为 - 我在对象的 dealloc 中释放了一个属性“密钥”，当我在 iPad 上调试应用程序时，这工作正常。

但是，当我“正常”启动应用程序时，即没有通过 XCode 运行它，它会立即崩溃，通过查看崩溃日志，我可以看到这是因为“key”属性在它被释放的地方抛出了一个 BAD ACCESS 错误。

有谁知道为什么我的应用程序在这两种情况下的行为可能会有所不同？

我显然可以修复这个错误，但我什至不确定它为什么会发生......

# javascript - D3.js 剪辑路径切断了我图表的边缘

> ID：12352491
> 
> 赞同：1
> 
> 时间：2012-09-10T13:13:22.823
> 
> 标签：javascript, svg, d3.js

我已经在 D3.js 可缩放焦点和上下文图上设置了剪辑路径，但有一个小问题。[http://nestoria.darkgreener.com/v2/](http://nestoria.darkgreener.com/v2/)

剪辑路径从焦点图的边缘切断了一些圆圈 - 您会看到顶部和右侧的圆圈只有一半！

但是，它在缩放时效果很好，如果您单击并拖动上下文图，您会看到。

所以我不确定如何创建一个不切断这些圆圈边缘的剪辑路径。这是我的代码：

```
focus.append("defs")
  .append("clipPath")
  .attr("id", "clip")
  .append("rect")
  .attr("width", width - 200)
  .attr("height", height);
var focus_dots = focus
  .selectAll(".dot")
  .data(mydata[j].data);
focus_dots.enter()
  .append("circle")
  .attr("clip-path", "url(#clip)"); 
```

有任何想法吗？非常感谢您的帮助，因为我完全不知道在这里做什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:26:51.683

如果您不希望在悬停时不应用剪辑，您可以使用如下样式规则：

`circle:hover { clip-path: none; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T17:35:15.453

我遇到了同样的问题并使用

```
.attr("transform", "translate(0,-20)")
.attr("height", height+20) 
```

这个想法有点老套，但如果你只是向上移动剪辑窗口并将相同的数量添加到它的高度，它应该在顶部显示（在上述情况下）20px。（左侧相同；关于右侧和底部：只需在高度/宽度上添加一些像素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T01:07:21.613

我用过“变换”，圆圈被切成四分之一。所以用 cx 和 cy 代替，问题解决了。

# c# - 从对象列表到 SortedList 的方法 使用 LINQ 的两个字段

> ID：12352494
> 
> 赞同：0
> 
> 时间：2012-09-10T13:13:26.937
> 
> 标签：c#, linq, linq-to-objects

我有 5 个领域的课程。

```
public class Test
{
public string name;
public string description;
public int int1;
public int int2;
public int int3;
} 
```

在我的一项功能中，我`List<Test> list`有 10 个项目。在这里，我想要`SortedList<string,string>`两个属性名称和描述。

我知道，我可以使用它来实现这一点，`for each`但我想知道如何使用 LINQ 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:15:46.163

用这个：

```
var result = list.OrderBy(x => x.Name).ThenBy(x => x.Description); 
```

重要的：

1.  不要使用多个调用，`OrderBy`因为它们会相互覆盖。
2.  排序后的结果将在`result`. 原件`list`保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:20:05.500

@HugoRune 的答案非常详尽，但是因为您说要使用 Linq，所以我建议在您的范围内添加一个扩展方法来帮助您实现目标：

```
static class SortedListExtensions
{
    public static SortedList<K, V> ToSortedList<K, V, T>(
        this IEnumerable<T> source, 
        Func<T, K> keySelector, Func<T, V> valueSelector)
    {
        return new SortedList<K,V>(
            source.ToDictionary(
                cur => keySelector(cur), 
                cur => valueSelector(cur)));
    }
} 
```

这样，您的 SortedList 创建可以在 Linq 计算中组合：

```
var sl = list.ToSortedList(f => f.name, f => f.description); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:12:18.317

AC# SortedList 是一种字典，实际上不是列表。如果您确实想要一个包含名称作为键和描述作为值的 SortedList，则可以使用以下命令：

```
SortedList slist = new SortedList(list.ToDictionary(t=>t.name, t=>t.description)) 
```

请注意，如果名称出现两次，这将引发异常，因为字典键必须是唯一的。

然而，对于大多数实际目的，我会使用 Daniel Hilgarth 发布的解决方案，除非您有一个库函数特别需要 SortedList 作为参数。

# c# - 有没有办法对超时错误进行单元测试？

> ID：12352495
> 
> 赞同：3
> 
> 时间：2012-09-10T13:13:27.657
> 
> 标签：c#, unit-testing, http

我创建了一个程序来调用数千个 url，我想做的是确保 url 超时我可以将超时错误追溯到 url。我所拥有的是：

```
 string url = "http://www.google.com";
          HttpWebRequest request = (HttpWebRequest)
                                 WebRequest.Create(url);
        request.Timeout = 5000;
        request.ReadWriteTimeout = 5000;
        request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101        Firefox/14.0.1";
        //From Fiddler
        DateTime giveUp = DateTime.UtcNow.AddSeconds(5);
        if (DateTime.UtcNow > giveUp)
            throw new TimeoutException("The following url could not be reached: " + url); 
```

我想制作一个单元来测试超时异常是否正常工作。如果您需要更多详细信息，请告诉我，但这应该足够了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T13:19:57.373

问题变成了你真正要测试的东西。你可以很容易地在你的测试中启动一个小型 HTTP 服务器并向它发送一个请求，知道它会超时——这将测试你的超时代码。但是，您实际上是在测试是否`HttpWebRequest`正确超时。您并不关心它是否正确超时，只关心它确实超时并且您想确保您的代码处理`TimeoutException`异常。

在这种情况下通常会使用一个测试替身（模拟），它基本上只是抛出一个`TimeoutException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:18:16.717

为 Timeout 周期编写一个 setter 方法，以便您可以从单元测试中对其进行操作，将其设置得如此之短以至于将引发异常，然后使用[ExpectedException 属性或在单元测试的 catch 语句](https://stackoverflow.com/a/12248750/395659)中对其进行测试，以确保这样已抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:44:47.110

你应该有众所周知的结果。所以我看到了两种可能性：1.您信任计时器功能并使用（用于测试）平均持续时间的超时（例如，如果您的持续时间为 40-50 毫秒，则使用 45 毫秒）2.您设置自己的具有模拟延迟的服务器。

# jquery - jquery在src属性更新时自动重新加载图像？

> ID：12352499
> 
> 赞同：1
> 
> 时间：2012-09-10T13:13:42.507
> 
> 标签：jquery

假设我有一个像这样的 html 字符串：

```
var string = '<div><img src="foo/bar" /></div>'; 
```

我选择它的图像部分，如下所示：

```
var $img = $(string).find('img'); 
```

然后我更改'src'属性：

```
$img.attr('src', 'foo2/bar2'); 
```

这会在新的“src”处触发自动 AJAX 获取请求吗？当我注释掉上面的行时，我的代码中出现了一个流氓 GET 错误，但它可能来自其他地方。

如果这实际上来自 Jquery，有没有办法关闭或阻止 AJAX 请求？我试过 .stopPropogation() 没有任何运气......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:33:41.197

如果这`$img`是一个真正的 dom 元素（存在于您的 html 中） - 将触发获取请求。
如果`$img`不是，您将不会触发获取请求，但您仍然可以通过以下方式触发它：

```
$img[0].src = '/foo/bar' 
```

![例子](../Images/70777e3d339df0abb51124b0297c69ad.png)

阻止浏览器渲染图像的唯一方法是停止它：

```
if(window.stop !== undefined)
  window.stop();    
else if(document.execCommand !== undefined)
  document.execCommand("Stop", false); 
```

# javascript - 如何使用 javascript 获取下一个/转发 url？

> ID：12352500
> 
> 赞同：4
> 
> 时间：2012-09-10T13:13:47.470
> 
> 标签：javascript, jquery, google-chrome-extension

我们有可用的函数来获取后退/过去的 url 使用: `document.referrer`，那么有什么方法或函数来获取“转发”url吗？

我只想知道当前页面是否有后向或前向链接。我已经搜索了很多历史和历史会话，但由于一些安全问题，它们非常有限。

有没有办法获得下一个网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:27:16.703

不幸的是，没有从浏览器中提取正向或反向历史的编程方式。这是一个安全预防措施。您只能在历史记录中触发移动，而不能查看任何条目。

一个类似的问题... [您如何访问浏览器历史记录？](https://stackoverflow.com/questions/48805/how-do-you-access-browser-history)

在以下规范[http://dev.w3.org/html5/spec/history.html#the-history-interface中确认“5.5.2 历史接口”下的 W3C 状态](http://dev.w3.org/html5/spec/history.html#the-history-interface)

“无法从脚本访问实际条目。”

**编辑**，我要补充一点，这是唯一可用信息的地方。如果您正在开发扩展程序，您可以通过将当前 url 存储在存储中来自己跟踪 url，否则您将不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:20:10.443

您无法读取历史记录对象。您的脚本无法知道前进按钮将指向哪个 URL，或者它是否可用。

# javascript - Jquery onClick 显示信息？

> ID：12352505
> 
> 赞同：2
> 
> 时间：2012-09-10T13:14:10.720
> 
> 标签：javascript, jquery, html, css, tooltip

我想做像这样的信息窗格。在此站点中，当我将标签悬停时，会打开一个信息窗格。我应该知道哪个主题。你能不能给个提示。或者有什么教程？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:30:12.813

***演示：http: [//jsfiddle.net/h9ShH/](http://jsfiddle.net/h9ShH/)***

***演示 2（带动画）：http: [//jsfiddle.net/h9ShH/1/](http://jsfiddle.net/h9ShH/1/)***

HTML：

```
<ul class="tags">
    <li class="tag" data-notice="notice 1">tag 1</li>
    <li class="tag" data-notice="notice 2">tag 2</li>
    <li class="tag" data-notice="notice 3">tag 3</li>
</ul>​ 
```

CSS：

```
.notice {
  position: fixed;
}​ 
```

JavaScript：

```
$('.tag').hover(function (e) {
    this.notice = $('<div>')
        .addClass('notice')
        .css({
            top: $(this).offset().top + 15, 
            left: $(this).offset().left + 20
        }).text($(this).data('notice'))
        .appendTo(this);
}, function () {
    this.notice.remove();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:17:27.123

我以前使用过[http://craigsworks.com/projects/qtip/demos/](http://craigsworks.com/projects/qtip/demos/)。看看它。但是有一堆插件，你也可以用 jQuery 和 mouseover 编写你自己的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:17:06.313

*   `mouseover`您应该向and添加一个侦听器`mouseout`，而不是`click`.
*   当发生此类悬停时，您可能希望也可能不希望使用 AJAX 获取数据。
*   您可能想要也可能不想要`animate`工具提示的某些属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T13:18:11.527

据我所知，最好的插件是[Qtip](http://craigsworks.com/projects/qtip2/)。它是 MIT 许可的，漂亮，具有您可能需要的所有配置。

它可以在悬停或单击时触发。而且，如果您想使用 Ajax，它也支持：http: [//craigsworks.com/projects/qtip2/demos/ajax](http://craigsworks.com/projects/qtip2/demos/ajax)。

演示：http: [//jsfiddle.net/8tvDU/](http://jsfiddle.net/8tvDU/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T13:19:29.010

你应该看看[JQuery UI](http://jqueryui.com/)尤其是[显示动画](http://jqueryui.com/demos/show/)。

您只需要有一个 div 并`show( effect, [options], [speed], [callback] )`使用正确的参数调用 show 函数 ( )：

```
function runEffect()
{
  var selectedEffect = "scale";
  var options = { percent: 100 };
  $("#effect").show(selectedEffect, options, 500, callback);
};

$( "#button" ).click(function()
  {
    runEffect();
    return false;
  }
); 
```

```
<div class="toggler">
<div id="effect" class="ui-widget-content ui-corner-all">
    <h3 class="ui-widget-header ui-corner-all">Show</h3>
    <p>
        Etiam libero neque, luctus a, eleifend nec, semper at, lorem. Sed pede. Nulla lorem metus, adipiscing ut, luctus sed, hendrerit vitae, mi.
    </p>
</div>
</div>
<a href="#" id="button" class="ui-state-default ui-corner-all">Run Effect</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T13:19:35.460

**[试试这个链接](http://nicolasgallagher.com/pure-css-speech-bubbles/demo/)**

我最喜欢这些，因为它基于纯 CSS，不需要 Javascript 或 jQuery

# objective-c - 是否有用于字符串形式的数学表达式的现成解析器？

> ID：12352509
> 
> 赞同：-3
> 
> 时间：2012-09-10T13:14:27.420
> 
> 标签：objective-c, c, parsing, math

给定字符串：

`"10 + 20 - 5 * 7 + (20 / 5)"`

是否有任何可用的解析器可以对此进行评估，还是我需要自己编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:29:46.617

看看[newacct的](https://stackoverflow.com/users/86989/newacct)[这篇](https://stackoverflow.com/a/1502534/944634)文章。

```
NSString *equation = @"10 + 20 - 5 * 7 + (20 / 5)";

// dummy predicate that contains our expression
NSPredicate *pred = [NSPredicate predicateWithFormat:
                      [equation stringByAppendingString:@" == 42"]];//42 is just a rightExpression to make it an equation
NSExpression *exp = [pred leftExpression];
NSNumber *result = [(NSComparisonPredicate *)exp expressionValueWithObject:nil context:nil];
NSLog(@"%@", result); // logs "-1" 
```

# iphone - iOS 模拟器无缩放选项和无窗口栏

> ID：12352511
> 
> 赞同：1
> 
> 时间：2012-09-10T13:14:40.620
> 
> 标签：iphone, ios, ipad, scale, simulator

我在 Mac 上的 iOS 模拟器有点问题。它设置为大尺寸（我认为是 100%，但我不确定）而且我无法调整它的大小，因为比例选项是灰色的。也没有显示窗口栏，我可以在其中最小化或关闭 iOS 模拟器，但在另一台 Mac 上，我显示了窗口栏，并且大小选项没有变灰。

显示器的比例相同 (1920x1080)。

谢谢，洛基

# php - 使用 PHP 更改 CSS 文件中的样式

> ID：12352512
> 
> 赞同：0
> 
> 时间：2012-09-10T13:14:46.890
> 
> 标签：php, css

这是我遇到的问题：我正在为网站管理员制作一个 CSS 编辑器，但仅限于某些样式。我需要的是一种在 CSS 文件（样式的标题）中查找单词或短语，然后更改其内容的方法。所以，换句话说，如果我有这个代码：

```
.test_style {
font-size:12px;
color:#ffffff;
} 
```

管理员选择样式

> 测试风格

并写道：

```
font-size:16px;
color:#000000;
font-weight:bold;
margin-top:5px; 
```

PHP脚本应该找到相应的样式，并将内容更改为：

```
.test_style {
font-size:16px;
color:#000000;
font-weight:bold;
margin-top:5px;
} 
```

有谁知道我该怎么做？

编辑：我的想法是让管理员从下拉菜单中选择一个选择器，在 textarea 中编写代码，然后将他们编写的代码保存到 CSS 文件中的特定样式中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:16:59.670

如果您相信他们无论如何都会实际编写 CSS，为什么不将他们可以编辑的样式拉到另一个文件中，然后将其导入到邮件 CSS 文件中。这样他们就不会看到所有令人困惑的部分，并且您不必担心每次他们进行更改时处理文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:21:36.070

您可以在此站点上使用相同的想法：[http ://www.barelyfitz.com/projects/csscolor/](http://www.barelyfitz.com/projects/csscolor/)

我从以下位置复制了链接：[Using PHP as a CSS file?](https://stackoverflow.com/questions/9361696/using-php-as-a-css-file)

您所要做的就是使用 db 将实际的 css 内容存储在文本字段中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:21:30.410

@Hawili 有一个很好的答案，但您也可以将各个规则存储在其他地方（平面文件、couchDB 存储等）。这里的问题是界面：您是否希望他们能够添加自己的选择器？您是否希望他们从已经存在的选择器列表中进行选择？如果他们正在选择，为什么不让他们也从常见声明列表中进行选择，或者对它们进行参数化修改？

您应该问的真正问题不仅仅是如何实施此解决方案，而是您应该分析问题并查看此解决方案是否正确。如果确实如此，您还可以使用正则表达式匹配来查找选择器之后的任何代码，并根据用户的输入对其进行修改。但我建议您以更容易修改的其他方式存储离散数据点，然后将该输出保存到您的 css 文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T13:24:17.417

您可以使用数据库执行此操作。用表创建一个数据库`mysql`。为选择器制作一列，为样式制作另一列，使表格看起来像；

```
---------------------------------
| selector   | style            |
---------------------------------
|.test_style | font-size:12px;  |
|            | color:#ffffff;   |
--------------------------------- 
```

您可以`echo`将此数据显示到您的 php 文件中。当管理员更改样式时，您可以更新样式字段，查找`.test_style`作为键。您可以尝试使用 jQuery + AJAX 来发送和接收数据，避免表单或页面重新加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T13:32:22.027

尝试做这样的事情：

```
 <form method="POST" action="admin/settings/css-example">

  <textarea id="css-example" name="css-example" rows="10">
  <?php $template_file = "../css-example.css";
  $file_handle = fopen($template_file, "rb");
  echo fread($file_handle, filesize($template_file));
  fclose($file_handle);
  ?>
  </textarea>

  <div class="form-actions">
  <input type="hidden" name="section" value="css-example">
  <input type="submit" name="updatesettings" value="Update">
  </div>
  </form> 
```

# highcharts - 半径为 1,2 的 Highchart 气泡看起来非常小

> ID：12352515
> 
> 赞同：0
> 
> 时间：2012-09-10T13:15:00.483
> 
> 标签：highcharts

我有基于例如的 highchart 气泡图。[http://www.highcharts.com/cases/bubble.htm](http://www.highcharts.com/cases/bubble.htm) 气泡的半径是根据表格的列值动态设置的。该列的值范围为 0-20000。对于较大的值，我们将取平方根。但是对于像 1,2.. 这样的值，我们希望直接使用这些值，但是气泡显得太小了。

在*任何图表中*，我们可以设置最小和最大气泡大小，并且它也可以相对调整大小。有什么方法可以让气泡在高图中可见*。*

# c - x86 和 ARM 上的 float VS int 性能差异很大吗？

> ID：12352523
> 
> 赞同：8
> 
> 时间：2012-09-10T13:15:40.923
> 
> 标签：c, floating-point, android-ndk, arm, linderdaum

我想知道智能手机上的 ARM 浮点性能与 x86 相比如何。为此，我编写了以下代码：

```
#include "Linderdaum.h"
sEnvironment* Env = NULL;

volatile float af = 1.0f;
volatile float bf = 1.0f;
volatile int a = 1;
volatile int b = 1;

APPLICATION_ENTRY_POINT
{
    Env = new sEnvironment();

    Env->DeployDefaultEnvironment( "", "CommonMedia" );

    double Start = Env->GetSeconds();

    float Sum1 = 0.0f;

    for ( int i = 0; i != 200000000; i++ )    {        Sum1 += af + bf;    }

    double End = Env->GetSeconds();

    Env->Logger->Log( L_DEBUG, LStr::ToStr( Sum1, 4 ) );
    Env->Logger->Log( L_DEBUG, "Float: " + LStr::ToStr( End-Start, 5 ) );

    Start = Env->GetSeconds();

    int Sum2 = 0;

    for ( int i = 0; i != 200000000; i++ )    {       Sum2 += a + b;    }

    End = Env->GetSeconds();

    Env->Logger->Log( L_DEBUG, LStr::ToStr( Sum2, 4 ) );
    Env->Logger->Log( L_DEBUG, "Int: " + LStr::ToStr( End-Start, 5 ) );

    Env->RequestExit();

    APPLICATION_EXIT_POINT( Env );
}

APPLICATION_SHUTDOWN
{} 
```

以下是不同目标和编译器的结果。

**1\. 酷睿 i7 920 上的 Windows PC。**

**VS 2008，调试版本，Win32/x86**

```
(Main):01:30:11.769   Float: 0.72119
(Main):01:30:12.347   Int: 0.57875 
```

`float`比 慢`int`。

**VS 2008，调试版本，Win64/x86-64**

```
(Main):01:43:39.468   Float: 0.72247
(Main):01:43:40.040   Int: 0.57212 
```

**VS 2008，发布版本，Win64/x86-64**

```
(Main):01:39:25.844   Float: 0.21671
(Main):01:39:26.060   Int: 0.21511 
```

**VS 2008，发布版本，Win32/x86**

```
(Main):01:33:27.603   Float: 0.70670
(Main):01:33:27.814   Int: 0.21130 
```

`int`正在取得领先。

**2\. 三星 Galaxy S 智能手机。**

**GCC 4.3.4，armeabi-v7a，-mfpu=vfp -mfloat-abi=softfp -O3**

```
01-27 01:31:01.171 I/LEngine (15364): (Main):01:31:01.177   Float: 6.47994
01-27 01:31:02.257 I/LEngine (15364): (Main):01:31:02.262   Int: 1.08442 
```

`float`严重慢于`int`.

现在让我们在循环中更改乘法的加法：

```
float Sum1 = 2.0f;

for ( int i = 0; i != 200000000; i++ )
{
    Sum1 *= af * bf;
}
...
int Sum2 = 2;

for ( int i = 0; i != 200000000; i++ )
{
    Sum2 *= a * b;
} 
```

**VS 2008，调试版本，Win32/x86**

```
(Main):02:00:39.977   Float: 0.87484
(Main):02:00:40.559   Int: 0.58221 
```

**VS 2008，调试版本，Win64/x86-64**

```
(Main):01:59:27.175   Float: 0.77970
(Main):01:59:27.739   Int: 0.56328 
```

**VS 2008，发布版本，Win32/x86**

```
(Main):02:05:10.413   Float: 0.86724
(Main):02:05:10.631   Int: 0.21741 
```

**VS 2008，发布版本，Win64/x86-64**

```
(Main):02:09:58.355   Float: 0.29311
(Main):02:09:58.571   Int: 0.21595 
```

**GCC 4.3.4，armeabi-v7a，-mfpu=vfp -mfloat-abi=softfp -O3**

```
01-27 02:02:20.152 I/LEngine (15809): (Main):02:02:20.156   Float: 6.97402
01-27 02:02:22.765 I/LEngine (15809): (Main):02:02:22.769   Int: 2.61264 
```

**问题是：**我缺少什么（任何编译器选项）？ARM 设备上的浮点数学真的慢吗（与 int 相比）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:52:44.523

@Seva Alekseyev 该`-mfloat-abi`标志仅控制浮点值如何传递给函数。使用`softfp`值是使用普通寄存器传递的。使用`hardfp`值通过 FPU 寄存器传递。该`-mfloat-abi`标志不控制使用哪些硬件指令。

基本上`softfp`用于保持与没有 FPU 的设备的向后兼容性。使用`softfp`将导致具有 FPU 的设备的一些额外开销。

@Sergey K 比较 x86 和 ARM 就像比较苹果和橘子。它们是两个非常不同的平台。ARM 的主要设计目标是低功耗而非速度。您可以使用`hardfp`. 还有一个 4.6 版本的编译器可用。考虑到架构差异，我认为您的结果是合理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T14:06:26.873

这些结果是可信的。

Exynos 3 SoC 中使用的 Cortex-A8 内核具有非流水线 VFP 实现。我不记得我脑海中的确切数字，但我记得 VFP 加法和乘法的吞吐量在该内核上每 8 个周期执行一次操作。

好消息：这是一个非常老的 SoC，而较新的 ARM SoC 具有更强大的 VFP 实现——加法、减法和乘法完全流水线化，吞吐量大大提高。此外，一些（但不是全部）Cortex-A8 SoC 支持 NEON，它为您提供全流水线单精度浮点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T13:30:12.690

`-mfloat-abi=softfp`明确要求模拟浮点。检查 Galaxy 的规格，如果可能，使用硬件 FP 进行编译。

并非所有 ARM CPU 一开始就支持硬件浮点。NDK 的 ARMEABI 的默认设置需要模拟 FP——它应该与无 FP 的机器兼容。充其量，您可以对 CPU 功能进行一些运行时分支。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T15:25:45.720

见[http://github.com/dwelch67/stm32f4d](http://github.com/dwelch67/stm32f4d) 见 float03 目录

测试比较了这两个函数 fixed 和 float

```
.thumb_func
.globl add
add:
    mov r3,#0
loop:
    add r3,r0,r1
    sub r2,#1
    bne loop
    mov r0,r3
    bx lr

.thumb_func
.globl m4add
m4add:
    vmov s0,r0
    vmov s1,r1
m4loop:
    vadd.f32 s2,s0,s1
    sub r2,#1
    bne m4loop
    vmov r0,s2
    bx lr 
```

结果并不奇怪，0x4E2C 时间是定点，0x4E2E 是浮点数，浮点测试函数中有一些额外的指令可能解释了差异：

```
00004E2C                                                                        
00004E2C                                                                        
00004E2E                                                                        
00004E2E                                                                        
00004E2C                                                                        
00004E2E 
```

stm32f4 中的 fpu 是其兄弟姐妹中的 vfp 的仅限单精度版本。您应该能够在任何带有 vfp 硬件的 armv7 上执行上述测试。

通过链接 __aeabi_fadd 函数并且每次通过循环进行的额外调用，加上内存访问的额外时间，可能在库函数外部或内部 (vmov) 的转换等，可以增加您所看到的内容。答案当然在于拆解。

# caching - 如何在 Internet Explorer 8 中清除本地存储值

> ID：12352524
> 
> 赞同：2
> 
> 时间：2012-09-10T13:15:40.727
> 
> 标签：caching, internet-explorer-8, local-storage

我正在使用 IE8 和 jstorage 库来存储数据来代替 cookie。这一切都很好，直到我想清除存储的值。在 chrome 中，这可以通过导航到内容设置页面来实现。但是在 IE8 中，它只提供了一个清除 cookie 的选项，它不会清除我存储在本地存储中的值。

有什么想法可以清除这些数据吗？我不想显示“清除缓存”按钮

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T21:23:23.573

[在IE Developer 工具栏](http://www.microsoft.com/en-us/download/details.aspx?id=18359)`localStorage.clear()`的 Console 面板中尝试。它返回一个“未定义”，但似乎清除了本地存储。

> 值得一提的是，该函数只清除当前窗口所在域的localStorage，而不是浏览器的所有localStorage值。
> 
> 示例：（IE8 问题）如果您的网站正在 iFrame 中加载外部内容，那么很遗憾，localStorage.clear() 不会清除 iFrame 中的该域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:37:28.620

这是 IE8 中本地存储支持的问题。缓存不会删除本地存储，因此需要从开发人员工具控制台调用以下命令

$.jStorage.flush()

# c# - 已安装 Microsoft ReportViewer 但无法将其添加到工具箱

> ID：12352526
> 
> 赞同：0
> 
> 时间：2012-09-10T13:15:46.547
> 
> 标签：c#, report-viewer2010, reportviewer2008

我正在尝试在**Visual Studio 2010 Express**中使用 C# 构建的应用程序中使用 Microsoft **ReportViewer**。ReportViewer 默认不随 VSE 2010 分发，因此我访问了 Microsoft 网站并下载了**ReportViewer 2010**和**ReportViewer 2008**可再分发包，但是当我右键单击工具箱添加它们时，找不到它们。

 ******关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:19:40.780

我发现以下链接表明 VS2010 Express 不支持 ReportViewer。

[http://connect.microsoft.com/VisualStudio/feedback/details/716777/unable-to-add-reportviewer-2008-2010-neither-to-visual-c-2010-express](http://connect.microsoft.com/VisualStudio/feedback/details/716777/unable-to-add-reportviewer-2008-2010-neither-to-visual-c-2010-express)******

# php - 我可以将 PHP 的内部日期和时间设置为几个月前吗？

> ID：12352527
> 
> 赞同：0
> 
> 时间：2012-09-10T13:15:50.113
> 
> 标签：php, time

我想知道我是否可以**更改 PHP 的总体日期**，认为它实际上是在大约 2 个月前，或者如果我愿意，可以在 2011 年。

如果它是“*不，您必须使用 DateTime 类并将系统设置为在那里运行*”，那将是选择的答案。

原因是因为我有一个使用基于许多时间表的 API 的大型项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:18:30.897

你可以通过设置系统日期来做到这一点，但你*真的*不应该这样做。

只需使用 PHP 的日期时间并进行相应调整。如果您不想在每次要使用日期时间函数时设置月份，只需创建一个包装类，它会为您执行此操作并调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:30:20.443

PHP5 提供了 DateTime 和 DateInterval

从现在开始 2 个月前：

```
$date = new DateTime(); // Time now
$date->sub(new DateInterval('P2M')); // Substract a Period (P) of Two (2) Months (M) 
```

# javascript - 检测滚动意图

> ID：12352530
> 
> 赞同：1
> 
> 时间：2012-09-10T13:15:57.773
> 
> 标签：javascript, jquery

我曾经遇到过关于以下问题的脚本或文章：

想象一个可滚动的页面，其中包含多个元素，这些元素也是可滚动的。向下滚动页面时，光标将遇到可滚动的元素，它们将获得焦点。导致必须从该元素中删除光标，或向下滚动该元素，然后才能再次滚动整个页面。

我看到的演示通过仅在光标移动或某种滚动中断后关注可滚动元素来解决该问题。因此，当您向下滚动页面时，您可以继续滚动（浮动在可滚动元素上）而不会中断。

有谁知道我在说什么脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:54:14.580

很抱歉，但我现在不是您所指的原始文章，但这里有一个想法，我将如何使其工作。

一旦用户开始滚动。（例如来自 jQuery 的 $(window).scroll(function(){...}) ），我会放置一个空 div 从上到下覆盖整个页面。这个元素将高于所有其他可能滚动的 div，防止它们每次捕获滚动事件。必须在几毫秒超时后删除它的元素。

```
$(window).scroll(function(){
var $cover = $('<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: '+ $(document).height() + 'px; z-index: 100000">asdasd</div>')
$cover.appendTo($("body"));
setTimeout(function(){
     $cover.remove();
},200); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:20:51.793

如果我理解好，请告诉我：如果你想检测滚动事件，那么你必须使用jquery 页面中的[scroll()](http://api.jquery.com/scroll/)。

试试这个例子：

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div { color:blue; }
  p { color:green; }
  span { color:red; display:none; }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div>Try scrolling the iframe.</div>
  <p>Paragraph - <span>Scroll happened!</span></p>
<script>
    $("p").clone().appendTo(document.body);
    $("p").clone().appendTo(document.body);
    $("p").clone().appendTo(document.body);
    $(window).scroll(function () { 
      $("span").css("display", "inline").fadeOut("slow"); 
    });

</script>

</body>
</html> 
```

看这里的演示： http: [//jsfiddle.net/4M7XK/](http://jsfiddle.net/4M7XK/)（最小化右下块的高度）

# c++ - openmp：线程数的增加会降低性能

> ID：12352532
> 
> 赞同：3
> 
> 时间：2012-09-10T13:16:04.127
> 
> 标签：c++, c, multithreading, performance, openmp

我有这个 C++ 代码。

循环遍历矩阵，找到每一行中的最小元素，然后从对应行的每个元素中减去它。变量 myr 是所有最小元素的总和

尝试并行：

```
int min = 0;
int myr = 0;  
int temp[SIZE][SIZE];
int size = 0;
...//some initialization

omp_set_num_threads(1);
start_time = omp_get_wtime();
    #ifdef _OPENMP
    #pragma omp parallel for firstprivate(min, size) reduction(+:myr) 
    #endif
    for(int i = 0; i < size; i++){
        min = INFINITY;
        for(int j = 0; j < size; j++){
                if (temp[i][j] < min)                
                    min = temp[i][j];                        
        }
        myr+=min;
        for(int j = 0; j < size; j++) 
                temp[i][j]-=min;
    }
end_time = omp_get_wtime(); 
```

如果我设置`omp_set_num_threads(2);`这部分代码开始工作得更慢。

我的 proc 有 2 个核心

为什么代码在 2 个线程上运行速度较慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:36:53.850

一定有一些混叠或正在发生的事情。让 OpenMP 变得更简单：

```
int const size0 = size;
#ifdef _OPENMP
#pragma omp parallel for reduction(+:myr) 
#endif
for(int i = 0; i < size0; i++){
    int min = INFINITY;
    int * tmp = temp[i];
    for(int j = 0; j < size0; j++){
            if (tmp[j] < min)                
                min = tmp[j];                        
    }
    for(int j = 0; j < size0; j++) 
            tmp[j]-=min;
    myr+=min;
} 
```

也就是说，`const`如果可以的话，将大多数变量放在本地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:54:21.440

并行部分可以重新解释如下（我使用了@jens-gustedt 的片段，但根据我的经验，它并没有太大区别）：

```
#pragma omp parallel private(myr_private) shared(myr)
{
    myr_private = 0;
    #pragma omp for 
    for(int i = 0; i < size; i++){
        int min = INFINITY;
        int * tmp = temp[i];
        for(int j = 0; j < size; j++){
            if (tmp[j] < min)                
                min = tmp[j];                        
        }
        for(int j = 0; j < size; j++) 
            tmp[j]-=min;
        myr_private+=min;
    }
    #pragma omp critical
    {
        myr+=myr_private;
    }
} 
```

（此解释直接来自[http://www.openmp.org/mp-documents/OpenMP3.1.pdf](http://www.openmp.org/mp-documents/OpenMP3.1.pdf)示例 A.36.2c）。如果线程数 n>1，则在`#pragma omp parallel`创建额外线程时会产生开销，然后在临界区中创建所有线程都应等待的开销。

我尝试了不同的矩阵大小，在我有限的测试中，两个线程在大小超过 1000 时要快得多，而在大小低于 500 时开始落后。

# c# - 如何构建 .NET 解释器（或 Powershell 是如何工作的？）

> ID：12352537
> 
> 赞同：5
> 
> 时间：2012-09-10T13:16:38.163
> 
> 标签：c#, powershell, interpreter

我正在考虑为 C# 创建一个小型解释器，我可以在某些应用程序中加载它。可以运行这样的东西的东西：

```
 > var arr = new[] { 1.5,2.0 };
                                 arr = { 1.5, 2.0 }
 > var sum = arr.Sum();
                                 sum = 3.5 
```

所以我想这可以通过创建一个包含所有变量及其类型的字典来实现，然后编译每一行，然后执行函数，获取结果并将其粘贴到变量字典中。

但是，在我看来，这实际上可能很难构建，而且效率可能非常低。

然后我认为Powershell正在做我需要的事情。但它是如何完成的？谁能告诉我Powershell是如何工作的，或者构建一个.Net解释器的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:24:34.030

您如何在应用程序中[托管 PowerShell 引擎](https://msdn.microsoft.com/en-us/library/ee706563(v=vs.85).aspx)并让它为您进行解释？例如：

```
private static void Main(string[] args)
{
  // Call the PowerShell.Create() method to create an 
  // empty pipeline.
  PowerShell ps = PowerShell.Create();

  // Call the PowerShell.AddScript(string) method to add 
  // some PowerShell script to execute.
  ps.AddScript("$arr = 1.5,2.0"); # Execute each line read from prompt

  // Call the PowerShell.Invoke() method to run the 
  // commands of the pipeline.
  foreach (PSObject result in ps.Invoke())
  {
    Console.WriteLine(result.ToString());
  } 
} 
```

如果您的目标是学习如何构建解释器，请查看[解释器模式](http://en.wikipedia.org/wiki/Interpreter_pattern)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:24:46.067

查看 Roslyn [http://msdn.microsoft.com/en-US/roslyn](http://msdn.microsoft.com/en-US/roslyn)或 Mono Compiler [http://www.mono-project.com/CSharp_Compiler](http://www.mono-project.com/CSharp_Compiler)。两者都应该能够做你正在寻找的东西

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T08:15:42.400

像[这样](http://blingcode.blogspot.se/2012/07/snoopshell-marriage-of-snoop-wpf-and.html)的东西？或者也许是罗斯林（http://msdn.microsoft.com/en-gb/roslyn）

添加评论作为答案，因为它似乎比我最初想象的更有用

# r - 使用 for(){} 和 if(){}else{} 出现问题

> ID：12352538
> 
> 赞同：0
> 
> 时间：2012-09-10T13:16:42.370
> 
> 标签：r, if-statement, for-loop

以下代码仅返回结果：“d:/result.txt”中的“0 0”。我已经显示了下面返回的同时错误。我的程序有什么问题？

```
for (i in 2:31)
{
if(i%%5=2)
{cat(i,1,"\n",append=TRUE,file="d:/result.txt")}
else{cat(0,0,"\n",append=TRUE,file="d:/result.txt")}
}

> for (i in 2:31)
+ {
+ if(i%%5=2){
 Error: unexpected '=' in:
 "{
 if(i%%5="
> cat(i,1,"\n",append=TRUE,file="d:/result.txt") 
Error in cat(i, 1, "\n", append = TRUE, file = "d:/result.txt") : 
object 'i' not found
> }
Error: unexpected '}' in "}"
> else    {
 Error: unexpected 'else' in "else"
>      cat(0,0,"\n",append=TRUE,file="d:/result.txt") 
> }
Error: unexpected '}' in "}"
 > }
 Error: unexpected '}' in "}" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T13:19:43.820

你需要`if(i%%5==2)`，因为它是一个比较。

# xpages - 具有确切值的搜索视图

> ID：12352540
> 
> 赞同：0
> 
> 时间：2012-09-10T13:16:46.123
> 
> 标签：xpages

我有一个搜索产品的视图。例如，我正在寻找产品 1234。问题是它们也存在称为 1234A 和 1234 C 等的产品。当我查看下面提到的代码时，我从产品 1234 以及 1234A 和 1234 C 等中获取所有项目。它必须仅限于产品 1234 中的项目

搜索代码（在查看结果中的数据/搜索下）：

```
var tmpArray = new Array("");
var cTerms = 0;
if (sessionScope.SelectedProduct != null & sessionScope.SelectedProduct != "") {
tmpArray[cTerms++] = "(FIELD spareProduct = \"" + sessionScope.SelectedProduct +
"\")";
}
if (sessionScope.Development != null & sessionScope.Development != "") {
tmpArray[cTerms++] = "(FIELD spareStatus = \"*" + sessionScope.Development +
 "*\")";
}
qstring = tmpArray.join(" AND ").trim();
return qstring 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:34:32.597

我使用了 Frantisek 的建议：我使用合并列进行了视图。（结合我搜索的不同“键”）然后我没有使用 data / search ，而是使用具有精确键匹配的 data/keys 。在这个键中，我组合了搜索的项目。由于我有一个字段，有时最后有一个字符 "°" ，并且似乎该字符不适用于查找，因此我将其从视图中取出并使用 @Word(FIELDNAME; " °"; 1). 正如 Frantisek 建议的那样，我也可以使用 @ReplaceSubstring(field; "°"; "" )。

# android - 围绕它的中心旋转图像

> ID：12352542
> 
> 赞同：0
> 
> 时间：2012-09-10T13:16:51.913
> 
> 标签：android

我正在尝试使用运动传感器旋转图像之类的应用程序....我的问题是图像无法正确围绕中心旋转....我的角度范围是 0 到 90 和 0 到 -90 .. 下面是我的代码.....

```
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Bitmap arrow = BitmapFactory.decodeResource(getResources(),R.drawable.arrow);
    int arrowW = arrow.getWidth();
    int arrowH = arrow.getHeight();
    float scaleWidth = 1;
    float scaleHeight = 1;
    int centrex = arrowW/2;
    int centrey = arrowH/2;
    int X=108;
    int Y=100;
    int angle=0;

    Matrix matrix = new Matrix();
    matrix.postScale(scaleWidth, scaleHeight);

    matrix.postRotate(angle, X+centrex , Y+centrey );
    Bitmap resizedBitmap = Bitmap.createBitmap(arrow, 0, 0, arrow.getWidth(), arrow.getHeight(), matrix, true);
    canvas.save();
    canvas.drawBitmap(resizedBitmap, X, Y, null);
    invalidate();
} 
```

我从 onCreate 方法获取角度值.....使用方向传感器（滚动值）..但是当我旋转屏幕时，我的图像正在旋转但不完全围绕图像中心旋转..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:22:49.740

X 和 Y 不应该关注旋转：

matrix.postRotate(角度, centerx , centery );

# javascript - 模态框无法正常工作

> ID：12352549
> 
> 赞同：0
> 
> 时间：2012-09-10T13:17:11.350
> 
> 标签：javascript, modal-dialog

我正在编写一个小型 Web 应用程序，我决定不使用任何框架。我只会写香草javascript。

我遇到的问题是我希望能够使用不同的键盘键打开三种不同类型的模态窗口。例如，`g`将打开一种类型，`d`将打开另一种类型，然后再打开另一种类型`m`。

我试图实现`g`一个，它将包含一个标题和一个输入表单，`d`另一个，一个标题和两个按钮。到目前为止，这是我的代码：

```
var width = 720;
var height = 350;
var modal = document.createElement('div');
modal.className  = "modal";
modal.style.width = width;
modal.style.height = height;
modal.style.position = 'absolute';
modal.style.top = (window.innerHeight - parseInt(modal.style.height)) / 2 +'px';
modal.style.left = (window.innerWidth - parseInt(modal.style.width)) / 2 +'px';

var ngroup = modal;
var title = document.createElement('span');
title.innerHTML = "TYPE GROUP NAME"
var input = document.createElement('input');
input.type = "text";
ngroup.appendChild(title);
ngroup.appendChild(input);

var del = modal;
var dtitle = document.createElement('span');
dtitle.innerHTML = "DO YO WANT TO DELETE SELECTED COLOR(S)"
var dinput = document.createElement('input');
dinput.type = "button";
dinput.value = "yes";
var dinput1 = document.createElement('input');
dinput1.type = "button";
dinput1.value = "no";
del.appendChild(dtitle);
del.appendChild(dinput);
del.appendChild(dinput1);   
function openModal(type) {
  var body = document.getElementsByTagName('body')[0];
  body.appendChild(type);
}
function closeModal() {
  document.body.removeChild(modal);
} 
```

这是*modal.js*，它包含在主页中并由此调用：

```
document.addEventListener('keydown', function(event) {
    if(event.keyCode == 71) {
        openModal(del);
    }
    else if(event.keyCode == 39) {
        closeModal();
    }
}); 
```

当我点击 时`g`，它会打开一个包含每个元素的模式：两个标题、一个文本字段和两个按钮。为什么？我的 Javascript 有什么问题？我知道它仍然没有组织，但我想在开始之前让事情顺利进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:25:04.833

即使您不使用库，我也建议您使用与 jQuery 相同的策略。具体来说，我会在一个隐藏的静态 HTML 中指定所有三个对话框`div`。例如，以下将是“d”对话框：

```
<div id="d_dialog" style="display:none" class="dialog">
    <span>DO YO WANT TO DELETE SELECTED COLOR(S)</span>
    <input type="button" value="yes"/>
    <input type="button" value="no"/>
</div> 
```

然后，当您想要从 JavaScript 打开对话框时，只需显示隐藏的`div`.

```
document.getElementById('d_dialog').style.display = ''; 
```

与从 JavaScript 创建所有 HTML 元素相比，这将使您的工作更易于维护。您可以通过添加一个名为`dialog`CSS 的类来指定对话框的样式。

**您的代码的具体问题**

您的代码的具体问题是您将同一个变量重新分配`modal`给多个其他变量。

```
var del = modal; 
```

这不会复制模态元素。它只是使新变量 del 引用与模态变量相同的对象。因此，当您致电时：

```
del.appendChild(dtitle); 
```

它的行为就像你打电话一样

```
modal.appendChild(dtitle); 
```

因此，所有控件都添加到`modal`元素中。当你显示对话框时

```
opendDialog(del); 
```

它的行为就像你打电话

```
openDialog(modal); 
```

并显示带有所有控件的元素。为了使您的代码正常工作，您应该创建一个`createModal`仅执行以下操作的函数：

```
function createModal()
{
    var width = 720;
    var height = 350;
    var modal = document.createElement('div');
    modal.className  = "modal";
    modal.style.width = width;
    modal.style.height = height;
    modal.style.position = 'absolute';
    modal.style.top = (window.innerHeight - parseInt(modal.style.height)) / 2 +'px';
    modal.style.left = (window.innerWidth - parseInt(modal.style.width)) / 2 +'px';
    return modal;
} 
```

然后，对于每个对话框，而不是

```
var del = modal; 
```

做

```
var del = createModal(); 
```

这将创建一个新元素，而不是创建一个引用同一元素的新变量。

# .htaccess - 使用 htaccess 重定向 URL 替代方案

> ID：12352550
> 
> 赞同：1
> 
> 时间：2012-09-10T13:17:11.897
> 
> 标签：.htaccess

通过使用以下指令，我可以使用 htaccess 将 URL 重定向到另一个 URL：

```
RewriteCond %{REQUEST_URI} ^/example$
RewriteRule (.*) /pages/example [L,R=301]

RewriteCond %{REQUEST_URI} ^/example
RewriteRule (.*) /pages/example [L,R=301] 
```

但是我想在 htaccess 中使用单个指令来实现这一点，并且该指令应涵盖所有替代方案；

```
http://mydomain.com/example -> http://mydomain.com/pages/example
http://mydomain.com/example/ -> http://mydomain.com/pages/example
http://mydomain.com/example/test -> http://mydomain.com/pages/example/test 
```

如何使用单个 .htaccess 执行此操作？有什么想法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:19:14.407

尝试这个 ：

```
RewriteRule ^example(/(test)?)?$ /pages/example$1 [L,R=301] 
```

# jquery - 想要增加锚元素的大小，而不是用jquery增加锚本身的大小

> ID：12352556
> 
> 赞同：1
> 
> 时间：2012-09-10T13:17:26.907
> 
> 标签：jquery

我想增加 a 和 p 元素的字体大小，但它本身，一个增加字体的元素是一个锚元素，所以它会随着按下而增加，但这是错误的，不会发生。

HTML：

```
<div class="fontsize">
<a class="fontSizePlus" href="#">A+</a>
|
<a class="fontReset" href="#" style="font-size: 17px;">Reset</a>
|
<a class="fontSizeMinus" href="#" style="font-size: 17px;">A-</a>
</div> 
```

到目前为止，我尝试了各种定位解决方案，例如：

```
var elm = $('p, a:not("a.fontSizePlus")'); 
```

显然没有运气。

jQuery：

```
<script type="text/javascript">
$(document).ready(function () {

    //min font size
    var min=9;  

    //max font size
    var max=16; 

    //grab the default font size
    var reset = $('p').css('fontSize'); 

    //font resize these elements
    var elm = $('p, a:not("a.fontSizePlus")');  

    //set the default font size and remove px from the value
    var size = str_replace(reset, 'px', ''); 

    //Increase font size
    $('a.fontSizePlus').click(function() {

        //if the font size is lower or equal than the max value
        if (size<=max) {

            //increase the size
            size++;

            //set the font size
            elm.css({'fontSize' : size});
        }

        //cancel a click event
        return false;   

    });

    $('a.fontSizeMinus').click(function() {

        //if the font size is greater or equal than min value
        if (size>=min) {

            //decrease the size
            size--;

            //set the font size
            elm.css({'fontSize' : size});
        }

        //cancel a click event
        return false;   

    });

    //Reset the font size
    $('a.fontReset').click(function () {

        //set the default font size 
         elm.css({'fontSize' : reset});     
    });

});

//A string replace function
function str_replace(haystack, needle, replacement) {
    var temp = haystack.split(needle);
    return temp.join(replacement);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:04:19.960

我不确定我是否完全理解你的要求......

这是一个设置它的小提琴的链接

[http://jsfiddle.net/mkyzP/](http://jsfiddle.net/mkyzP/)

一切似乎都很好。

你只需要确保改变

```
var elm = $('p, a:not("a.fontSizePlus")'); 
```

至

```
var elm = $('p, a:not("a.fontSizePlus, a.fontReset, a.fontSizeMinus")'); 
```

这样任何链接都不会缩小或增长。

或者，您可以将 a 标签更改为 span 标签。

# android - 子视图忽略包含嵌套布局但使用它们的父布局

> ID：12352558
> 
> 赞同：0
> 
> 时间：2012-09-10T13:17:30.013
> 
> 标签：android, xml

我有一个位于父布局中的微调器，它包含微调器和嵌套的相对布局。我遇到的问题是我似乎无法让 Spinner 与此父布局对齐，即使我指定在父布局中对齐，它仍然与嵌套视图对齐。

澄清一下：我的 Spinner 与“relativeone”的左上角对齐，而不是“back_layout”。

有任何想法吗？

相关XML代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/back_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:gravity="center"
    >

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:background="#FFFFFF"
        android:entries="@array/spinner"
        android:layout_alignLeft="@+id/relativeone" />

    <RelativeLayout
        android:id="@+id/relativeone"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:layout_gravity="center" 
        android:gravity="center">

        <RelativeLayout
            android:id="@+id/relativetwo"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:gravity="center" >

            <ImageView
                android:id="@+id/imageview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_gravity="center"
                android:scaleType="fitXY" />

            <Button
                android:id="@+id/buttonone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:text="Take Photo" />
        </RelativeLayout>
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:08:00.310

您需要对属性进行一些小的更改才能使其正常工作。

从 中删除中心对齐`back_layout`，从微调器中删除左对齐，然后在父级中添加中心到`relativeone`。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/back_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000" >
    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />
    <RelativeLayout
        android:id="@+id/relativeone"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:layout_centerInParent="true"
        android:layout_gravity="center"
        android:gravity="center" >
        <RelativeLayout
            android:id="@+id/relativetwo"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:gravity="center" >
            <ImageView
                android:id="@+id/imageview"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_gravity="center"
                android:scaleType="fitXY" />
            <Button
                android:id="@+id/buttonone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:text="Take Photo" />
        </RelativeLayout>
    </RelativeLayout>
</RelativeLayout> 
```

上面的布局会给你这个：

![在此处输入图像描述](../Images/e3a40286d3ed7668b7b4afe284a2c2bd.png)

# java - 你如何使用 Protostuff 序列化 Guava 的不可变集合？

> ID：12352559
> 
> 赞同：1
> 
> 时间：2012-09-10T13:17:33.810
> 
> 标签：java, serialization, protocol-buffers, guava, protostuff

我使用 protostuff-runtime 来序列化对象图。其中一些对象引用了 Guava 不可变集合，例如 ImmutableList 和 ImmutableSet。Protostuff 无法开箱即用地反序列化这些集合，因为它尝试构造一个实例，然后从 inputStream 中“添加”元素（失败，因为集合是不可变的）。

你知道任何开箱即用的库/原型插件吗？如果没有，是否有自己做这件事的最佳做法？

我进行了调查，发现 protostuff 有一个[“委托”](http://code.google.com/p/protostuff/wiki/Delegate)的概念，可以让您控制特定类型的序列化。这似乎是我问题的答案，但我似乎无法让它工作。

这是我现在所拥有的：

```
import com.dyuproject.protostuff.Schema;
import com.dyuproject.protostuff.runtime.RuntimeSchema;
import com.google.common.base.Preconditions;
import com.google.common.collect.ImmutableList;

import javax.annotation.Nonnull;
import javax.annotation.concurrent.Immutable;

/**
 * This is the POJO I want to serialize. Note that the {@code strings} field refers to an {@link ImmutableList}.
 */
@Immutable
public class Foo {

    public static final Schema<Foo> SCHEMA = RuntimeSchema.getSchema(Foo.class);

    @Nonnull
    private final ImmutableList<String> strings;

    public Foo(ImmutableList<String> strings) {
        this.strings = Preconditions.checkNotNull(strings);
    }

    @Nonnull
    public ImmutableList<String> getStrings() {
        return strings;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof Foo) {
            Foo that = (Foo) obj;
            return this.strings.equals(that.strings);
        }
        return false;
    }

    @Override
    public int hashCode() {
        return strings.hashCode();
    }

} 
```

* * *

```
import com.dyuproject.protostuff.*;
import com.dyuproject.protostuff.runtime.Delegate;
import com.dyuproject.protostuff.runtime.RuntimeSchema;
import com.google.common.collect.ImmutableList;
import com.google.common.collect.Lists;

import java.io.IOException;
import java.util.ArrayList;

public class ImmutableListDelegate implements Delegate<ImmutableList<?>> {

    private static final Schema<ArrayList> LIST_SCHEMA = RuntimeSchema.getSchema(ArrayList.class);

    @Override
    public WireFormat.FieldType getFieldType() {
        return WireFormat.FieldType.MESSAGE;
    }

    @Override
    public ImmutableList<?> readFrom(Input input) throws IOException {
        ArrayList<?> list = LIST_SCHEMA.newMessage();
        input.mergeObject(list, LIST_SCHEMA);
        return ImmutableList.copyOf(list);
    }

    @Override
    public void writeTo(Output output, int number, ImmutableList<?> value, boolean repeated) throws IOException {
        ArrayList<?> list = Lists.newArrayList(value);
        output.writeObject(number, list, LIST_SCHEMA, repeated);
        LIST_SCHEMA.writeTo(output, list);
    }

    @Override
    public void transfer(Pipe pipe, Input input, Output output, int number, boolean repeated) throws IOException {
        throw new UnsupportedOperationException("TODO");
    }

    @Override
    public Class<?> typeClass() {
        return ImmutableList.class;
    }
} 
```

* * *

```
import com.dyuproject.protostuff.LinkedBuffer;
import com.dyuproject.protostuff.ProtostuffIOUtil;
import com.dyuproject.protostuff.runtime.DefaultIdStrategy;
import com.dyuproject.protostuff.runtime.RuntimeEnv;
import com.google.common.collect.ImmutableList;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;

public class ImmutableListDelegateTest {

    @Before
    public void before() {
        // registers the delegate
        if (RuntimeEnv.ID_STRATEGY instanceof DefaultIdStrategy) {
            ((DefaultIdStrategy) RuntimeEnv.ID_STRATEGY).registerDelegate(new ImmutableListDelegate());
        }
    }

    @Test
    public void testDelegate() throws IOException {
        Foo foo = new Foo(ImmutableList.of("foo"));

        Assert.assertEquals(foo, serializeThenDeserialize(foo));
    }

    private Foo serializeThenDeserialize(Foo fooToSerialize) throws IOException {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        ProtostuffIOUtil.writeDelimitedTo(out, fooToSerialize, Foo.SCHEMA, buffer());
        ByteArrayInputStream in = new ByteArrayInputStream(out.toByteArray());
        Foo fooDeserialized = Foo.SCHEMA.newMessage();
        ProtostuffIOUtil.mergeDelimitedFrom(in, fooDeserialized, Foo.SCHEMA, buffer());
        return fooDeserialized;
    }

    private LinkedBuffer buffer() {
        return LinkedBuffer.allocate(LinkedBuffer.DEFAULT_BUFFER_SIZE);
    }
} 
```

测试失败，出现以下异常，这似乎意味着我的委托只反序列化空值：

```
java.lang.NullPointerException
    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:191)
    at com.google.common.collect.SingletonImmutableList.<init>(SingletonImmutableList.java:40)
    at com.google.common.collect.ImmutableList.asImmutableList(ImmutableList.java:305)
    at com.google.common.collect.ImmutableList.copyFromCollection(ImmutableList.java:314)
    at com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:253)
    at test.ImmutableListDelegate.readFrom(ImmutableListDelegate.java:25)
    at test.ImmutableListDelegate.readFrom(ImmutableListDelegate.java:12)
    at com.dyuproject.protostuff.runtime.RuntimeUnsafeFieldFactory$19$1.mergeFrom(RuntimeUnsafeFieldFactory.java:1111)
    at com.dyuproject.protostuff.runtime.MappedSchema.mergeFrom(MappedSchema.java:188)
    at com.dyuproject.protostuff.IOUtil.mergeDelimitedFrom(IOUtil.java:109)
    at com.dyuproject.protostuff.ProtostuffIOUtil.mergeDelimitedFrom(ProtostuffIOUtil.java:151)
    at test.ImmutableListDelegateTest.serializeThenDeserialize(ImmutableListDelegateTest.java:38)
    at test.ImmutableListDelegateTest.testDelegate(ImmutableListDelegateTest.java:30) 
```

这是正确的方法吗？我错过了什么？

这不是[什么是空指针异常的副本，我该如何解决？](https://stackoverflow.com/questions/218384/what-is-a-null-pointer-exception-and-how-do-i-fix-it)问题，没有意义。我提到在尝试使用 Protostuff 委托对不可变集合进行反序列化时抛出 NPE 的事实并不意味着这重复了“什么是 NPE？” 以任何方式、形状或形式提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:25:49.417

一切看起来都很好

```
java.lang.NullPointerException
    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:191)
    at com.google.common.collect.SingletonImmutableList.<init>(SingletonImmutableList.java:40) 
```

表示您正在尝试放入`null`，`ImmutableList`这是被禁止的。可以肯定的是，`list`在失败线之前检查你。确保您的输入 json 看起来不像`[null]`.

# multithreading - 异步执行限制并发实例的数量

> ID：12352560
> 
> 赞同：1
> 
> 时间：2012-09-10T13:17:34.877
> 
> 标签：multithreading, c#-4.0

我有一个简单的集合，我正在这样循环：

```
foreach (MyObject mo in myObjects)
{
   myObject.RunAcync();
} 
```

`RunAsync`在单独的线程中执行代码，使用`new Thread(()=>{ .. }).Start()`，我无权更改`RunAsync`. 我需要将`myObject`并发运行的实例数限制为 N（实数为 2..10）。使用`.NET4`and的有效方法是什么`c#`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:38:57.653

如果您可以`RunAsync`使用我们现在拥有的（.NET 4）和即将到来的（现在考虑一下，.NET 4.5）来修改 .NET，我会使用任务并行库（TPL）并`Task`从`RunAsync`. 然后，您可以轻松分辨已完成和正在运行的内容，并使用内置的 TPL 负载平衡来限制正在运行的任务数量。或者，如果您有该方法的非异步版本，您也可以使用 TPL 的[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)来调用该方法，它将处理负载平衡并一次只运行足够的方法以避免性能问题

# delphi - 为什么升级 Delphi 后 TRect 出现“无法分配左侧”？

> ID：12352563
> 
> 赞同：1
> 
> 时间：2012-09-10T13:17:35.897
> 
> 标签：delphi, compiler-errors, delphi-7, delphi-xe2

我正在将代码从 Delphi 7 迁移到图形模块之一的 XE2。我们正在使用`TRect`变量，旧代码在 Delphi 7 中运行没有问题

前任：

```
Var
  Beold : TRect
begin
  Beold.left := Beold.right;
end. 
```

在将代码移植到新 XE2 时，我们面临 E0264 问题：无法将左侧分配给

您能否解释一下 XE2 TRect 和 D7 的变化是什么，我们如何分配值

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T13:49:47.780

您发布的代码在快速 Delphi 测试应用程序中编译并运行良好，因此它不是您的真实代码。

但是，我怀疑您遇到的是`with`与使用属性相关的语句中的更改。以前版本的 Delphi 中存在一个存在多年的错误，最近终于修复了。IIRC，它首先在 D2010 的 README.HTML 文件中的注释中提到。它已被添加到 XE2 的文档中（不是作为行为更改，而是记录了新行为）。该文档位于[docwiki 的此处](http://docwiki.embarcadero.com/RADStudio/en/Declarations_and_Statements#With_Statements)。

（附加信息：它一定是在 2010 年发生了变化；Marco Cantù`Delphi 2010 Handbook`在第 111 页上将其提及为“The With Statement Now Preserves Read-Only Properties”，它描述了这种行为和我在下面指出的解决方案。）

您现在不需要使用语句直接访问类的属性，而是`with`需要声明一个局部变量，并直接读取和写入整个内容（为清楚起见省略了错误处理 - 是的，我知道应该有一个 try..finally 块释放位图）。

```
var
  R: TRect;
  Bmp: TBitmap;

begin
  Bmp := TBitmap.Create;
  Bmp.Width := 100;
  Bmp.Height := 100;
  R := Bmp.Canvas.ClipRect;
  { This block will not compile, with the `Left side cannot be assigned to` error
  with Bmp.Canvas.ClipRect do
  begin
    Left := 100;
    Right := 100;
  end;
  }
  // The next block compiles fine, because of the local variable being used instead
  R := Bmp.Canvas.ClipRect;
  with R do
  begin
    Left := 100;
    Right := 100;
  end;
  Bmp.Canvas.ClipRect := R;
  // Do other stuff with bitmap, and free it when you're done.
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T18:59:48.807

事实证明，使用

```
 with (Bmp.Canvas.ClipRect) do
  begin
    Bottom := 100;
  end; 
```

抛出错误：[无法分配左侧]

然而，

```
 with Bmp.Canvas.ClipRect do
  begin
    Bottom := 100;
  end; 
```

才不是。

Delphi 10.3.3 对括号的要求与旧版本一样。

# css - 服务器上的 wkhtmltopdf unicode 和自定义字体

> ID：12352564
> 
> 赞同：3
> 
> 时间：2012-09-10T13:17:38.243
> 
> 标签：css, pdf, unicode, fonts, wkhtmltopdf

我有一个通过 wkhtmltopdf 转换为 PDF 的 HTML 页面。一切都在我的本地机器上运行良好，阿拉伯字体，PDF 转换到它们，新的自定义字体。我使用了@font-face、本地存储的字体和 utf-8 编码。没问题。

但是在服务器上，不仅 (1) 阿拉伯字符变成黑框，而且 (2) 甚至不那么特别的英文字体（如 Georgia 和 Impact）都停止工作。PDF 以纯无衬线字体呈现。也就是说，如果它完全渲染。有时它甚至不产生输出。我在服务器的 CSS 上添加了@font-face 规则，但 wkhtmltopdf 似乎没有选择它们。我知道这些字体和路径在服务器上很好，因为 HTML 页面使用相同的 CSS 样式表并且呈现完美。

如果我做没有任何奇怪字体的简单纯文本，wkhtmltopdf 工作正常。

有任何想法吗？这与在服务器上有关吗？我的本地机器有 Windows 7，服务器运行的是 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:16:21.103

问题解决了。我确实需要升级我的托管计划，以便可以使用 X11 运行 wkhtmltopdf 静态二进制文件。尽管 Linux 机器上只有一些 Nimbus 字体，但通过添加字体文件和使用 @font-face css 规则，阿拉伯语和其他字体对我来说效果很好。

附加说明：为了使用自定义阿拉伯字体文件正确渲染阿拉伯文本，我使用[FontSquirrel](http://www.fontsquirrel.com/fontface/generator)生成了所需的字体文件和 css 规则，并在“专家”渲染选项下使用“无子集”。

# php - 替换php读取的文件中的变量

> ID：12352566
> 
> 赞同：0
> 
> 时间：2012-09-10T13:17:40.643
> 
> 标签：php

我正在开发一个生成配置文件的小应用程序。因为它可能用于生成一些不同的配置变体，所以我从用户那里收集变量值，然后从文件中读取模板配置。该文件在适当的位置包含其中的变量名称（即$ip_address）。在阅读和打印文件之前，我已经在我的 php 代码中设置了这些变量。但是，会打印出变量名称，而不是变量的值：

```
$hostname = $_POST['username'] . "_891";
$domain = $_POST['username'] . ".local";   
$routerFile = "891.txt";

$file_handle = fopen($routerFile, "r");
while (!feof($file_handle)) {
   $line = fgets($file_handle);
   print $line . "<br />";
} 
```

输出示例：

> `hostname $hostname`
> `ip domain-name $domain`

如何让 php 用它们存储的值替换变量名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:24:23.997

你可以使用`eval()`，但这不是很安全，所以我会写一个超级简单的正则表达式替换。

```
$replaced = preg_replace_callback("/\b$\w+\b/", 
                                  function($match) use $hostname, $domain { 
                                      return $$match
                                  },
                                  $line); 
```

但是，我会将需要替换的术语放在关联数组中，否则您的列表`use`将成为一场噩梦。

如果您真的希望将这些文件视为 PHP 文件并且它们没有安全风险（它们并非来自不受信任的来源），那么只需`include`它们即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:29:08.323

我会这样：

使用如下行创建一个模板`hostname = <?php echo $hostname; ?>`：

```
hostname <?php echo $hostname; ?>
ip domain-name <?php echo $domain; ?> 
```

然后在 PHP 创建一个模板你会这样​​做：

```
ob_start();
include_once($routerFile);
$file_output = ob_get_clean(); 
```

现在您拥有填充了适当变量的文件模板，您可以保存该文件：

```
file_put_contents('my_new_router_file.txt', $file_output); 
```

你应该完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:27:50.197

我第二次回答[亚历克斯。](https://stackoverflow.com/users/31671/alex)另一种可能性是放弃`txt`文件，将其替换为`php`文件并仅包含该文件。

# ios - 在 Core Data 中创建追随者模型

> ID：12352574
> 
> 赞同：1
> 
> 时间：2012-09-10T13:18:02.487
> 
> 标签：ios, core-data, twitter-follow

![试图了解 Core Data 中的追随者模型](../Images/dfb085ecfd6f9fab24e8bc9d4cff61fe.png)

嗨，我正在尝试在 Core Data 中创建一个追随者关注模型（如 Twitter）。也许我太习惯使用 ID，我不确定这是否正确。如果可能的话，有人可以给我一些建议。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T17:14:47.170

如果我正确理解您的问题，您只需要“BDOUser”实体和从“BDOUser”到自身的“多对多”关系。

*   将“追随者”定义为从“BDOUser”到“BDOUser”的一对多关系。
*   将“followings”定义为从“BDOUser”到“BDOUser”的一对多关系。
*   将“followings”设置为与“followers”的反比关系。

现在你可以做类似的事情

```
[userA addFollowersObject:userB]; 
```

那将

*   将“userB”添加到“userA”的关注者中，并自动添加
*   将“userA”添加到“userB”的以下内容中。

# visual-studio-2010 - 想知道为 Visual Studio 编写启动器扩展的可行性

> ID：12352586
> 
> 赞同：0
> 
> 时间：2012-09-10T13:18:25.187
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-extensions

我是一个非常重的[Alfred](http://www.alfredapp.com/)和[Launchy](http://www.launchy.net/)用户，我想知道为 VS（2010 及更高版本）编写类似的扩展程序是多么可行，以便可以通过键入前几个字母然后选择项目来访问程序功能(s) 来自建议的下拉菜单，该下拉菜单将在输入时更新。

我是 C#/Java 人，但我没有编写 VS 扩展的经验。如果有人能提供一些我可以遵循的指示来推动事情发展，或者相反地维尼并给我的想法泼冷水，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:25:47.017

VS 有一个用于搜索类型的内置功能，Ctrl+，它为您提供匹配类型的下拉菜单。它也做骆驼案，真是太棒了。因此，如果您想查找 class `SomeStupidClassNameUsingCamelCaseNamingConvention`，只需按 ctrl+shift+t 并键入 SSCN ，它就会找到您的类型。

如果您安装了 Resharper，它与 Ctrl+Shift+T 具有相同的功能，但是我不太确定差异是什么！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:24:55.803

`Ctrl+Q`Visual Studio 2012 的快捷方式正是您所要求的。

# linux - ImageMagick：如何在调整大量图像文件大小的同时实现低内存使用？

> ID：12352587
> 
> 赞同：8
> 
> 时间：2012-09-10T13:18:24.617
> 
> 标签：linux, image, image-processing, imagemagick, imagemagick-convert

我想调整大量（大约 5200 个）图像文件（PPM 格式，每个大小为 5 MB）并使用`convert`.

**简洁版本：**

`convert``convert`尽管我使用了告诉连续处理图像文件的语法，但会炸毁 24 GB 的内存。

**长版：**

关于超过 25 GB 的图像数据，我认为我不应该同时处理所有文件。我搜索了有关如何连续处理图像文件的 ImageMagick 文档，我[发现](http://www.imagemagick.org/script/command-line-processing.php)：

> 调整读取的每个图像的大小更快且资源消耗更少：
> 
> `$ convert '*.jpg[120x120]' thumbnail%03d.png`

此外，[教程指出](http://www.imagemagick.org/Usage/files/)：

> 例如，而不是...
> 
> `montage '*.tiff' -geometry 100x100+5+5 -frame 4 index.jpg`
> 
> 它首先读取所有 tiff 文件，然后调整它们的大小。你可以改为...
> 
> `montage '*.tiff[100x100]' -geometry 100x100+5+5 -frame 4 index.jpg`
> 
> 这将读取每个图像并调整它们的大小，然后再继续下一个图像。当达到内存限制时，导致内存使用量大大减少，并可能防止磁盘交换（抖动）。

**因此，这就是我正在做的事情：**

```
$ convert '*.ppm[1280x1280]' pngs/%05d.png 
```

根据文档，它应该一个一个地处理每个图像文件：读取、调整大小、写入。我在具有 12 个真实内核和 24 GB RAM 的机器上执行此操作。但是，在前两分钟内，`convert`进程的内存使用率增长到大约 96%。它在那里停留了一段时间。CPU 使用率达到最大值。再长一点，这个过程就结束了，只是说：

> 被杀

此时，尚未生成任何输出文件。我在 Ubuntu 10.04 上`convert --version`说：

```
Version: ImageMagick 6.5.7-8 2012-08-17 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2009 ImageMagick Studio LLC
Features: OpenMP 
```

看起来像是`convert`在开始转换之前尝试读取所有数据。因此，要么存在错误，要么存在`convert`文档问题，要么我没有正确阅读文档。

怎么了？在调整大量图像文件的大小时，如何实现低内存使用？

顺便说一句：一个快速的解决方案是使用外壳循环文件并`convert`独立调用每个文件。但我想了解如何使用纯 ImageMagick 实现相同的目标。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T21:18:02.700

如果无法直接访问您的系统，那么很难帮助您调试它。

但是你可以做三件事来帮助自己缩小这个问题的范围：

1.  添加`-monitor`为第一个命令行参数以查看有关正在发生的事情的更多详细信息。

2.  （可选）添加`-debug all -log "domain: %d +++ event: %e +++ function: %f +++ line: %l +++ module: %m +++ processID: %p +++ realCPUtime: %r +++ wallclocktime: %t +++ userCPUtime: %u \n\r"`

3.  暂时不要使用 '*.ppm[1280x1280]' 作为参数，而是使用 'a*.ppm[1280x1280]'。目的是将您的通配符扩展（或实现相同目的的其他合适方法）限制为仅几个匹配项，而不是所有可能的匹配项。

如果你做'2'。你需要做'3'。否则你会被大量的输出压得喘不过气来。（此外，您的系统似乎无法处理完整的通配符，而无需终止进程......）

如果您没有找到解决方案，那么...

1.  [**...在ImageMagick 官方错误报告论坛上**](http://www.imagemagick.org/discourse-server/viewforum.php?f=3)注册一个用户名。
2.  ...在那里报告您的问题，看看*他们是否*可以帮助您（如果您有礼貌地询问，这些人会非常友好且反应迅速）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T16:50:55.163

遇到了同样的问题，似乎**是因为 ImageMagick 在 /tmp 目录中创建了临时文件**，该目录通常作为 tmpfs 挂载。

只需将您的 tmp 移到其他地方即可。

*例如：*

*   在一个大的外部驱动器上创建一个“tmp”目录

    `mkdir -m777 /media/huge_device/tmp`

*   确保权限设置为 777

    `chmod 777 /media/huge_device/tmp`

*   以 root 身份，将其挂载到您的 /tmp

    `mount -o bind /media/huge_device/tmp /tmp`

*注意：*应该可以使用 TMP 环境变量来执行相同的技巧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-09T22:52:50.540

如果你有 12 个内核，我会选择 GNU Parallel - 类似这样的东西，效果很好。由于它一次只处理 12 张图像，同时仍保留您的输出文件编号，它只使用最少的 RAM。

```
scene=0
for f in *.ppm; do
   echo "$f" $scene
   ((scene++))
done | parallel -j 12 --colsep ' ' --eta convert {1}[1280x1280] -scene {2} pngs/%05d.png 
```

**笔记**

`-scene`让您设置场景计数器，该计数器由您自己决定`%05d`。

`--eta`预测您的工作何时完成（预计到达时间）。

`-j 12`一次并行运行 12 个作业。

# c++ - SFML 库：奇怪的错误

> ID：12352589
> 
> 赞同：2
> 
> 时间：2012-09-10T13:18:28.110
> 
> 标签：c++, sfml

我正在学习 SFML 库，并从教程中挑选了一个代码。它打开一个窗口，它应该让我能够再次关闭它但是当我关闭它时它说

```
Debug Error!
Run-Time Check Failure #2 - stack around variable 'App' was corrupted.

and then the console stops working.
this is my code:

int main()
{
    // Create the main window
    sf::Window App(sf::VideoMode(800, 600, 32), "SFML Events");

    while (App.IsOpened())
    {
        // Process events
        sf::Event Event;
        while (App.GetEvent(Event))
        {
            // Close window : exit
            if (Event.Type == sf::Event::Closed)
                App.Close();

            // Escape key : exit
            if ((Event.Type == sf::Event::KeyPressed) && (Event.Key.Code == sf::Key::Escape))
                App.Close();
        }

        // Display window on screen
        App.Display();
    }

    return EXIT_SUCCESS;// = return 0
} 
```

链接到调试库是

```
sfml-system.lib
sfml-window.lib
sfml-system-d.lib//these are debug files
sfml-window-d.lib 
```

如果我 ramove 前 2 个并构建了我的程序，它不会给出错误，但是当我打开它时它会说：

> 应用程序无法正确启动 (0xc0150002)。单击确定关闭应用程序

我有一台 64 位计算机。在 microsoft vc++ 2010 中，我可以构建解决方案或调试，而且我总是构建解决方案。

我正在发布模式下构建，但我也尝试了两者，但它们都没有工作

有人可以告诉我我能做些什么来防止这种情况发生或这是怎么发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:17:17.280

对于这些应用程序启动问题，检查依赖闭包中的所有 dll 是否都可以访问总是一个好主意——也就是说，它们是否都在搜索 PATH 中？我们通常使用[dependency walker](http://www.dependencywalker.com/)来检查缺少哪些dll，或者使用[gflags](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549609%28v=vs.85%29.aspx)进行运行时诊断

虽然将您的 dll 与您的 exe 放在同一个文件夹中可以工作，但它不能很好地扩展，我通常做的一种方法是将库路径放在 PATH 环境变量中。

需要注意的一件事是，sfml 带有 vs2005 和 vs2008 的预构建二进制文件，当您使用 vs2010 时，底层的 c 运行时库（msvcrt）是不同的，会有潜在的问题 - 您最好使用 vs2010 自己从源代码构建 sfml 或使用 vs2005/vs2008，只是为了保持一致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:23:11.897

如果你不想使用 DLL 并且想将 SFML 编译成 exe，这里是教程：2.0 [http://www.sfml-dev.org/tutorials/2.0/start-vc.php](http://www.sfml-dev.org/tutorials/2.0/start-vc.php) 你需要添加预处理指令 SFML_STATIC ，并将您在程序中使用的其他库包含到链接器 - >输入中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T12:23:22.830

当我第一次使用这个（和等效的库）时，我也遇到了一些相关的问题。这里有几点需要考虑：

1.  不要使用预编译的库/dll。学习如何使用 CMake、boost_build（boost 库）、Scons（mongoDB）等，并根据当前使用的编译器/平台构建库（当然如果有这种可能性）。一段时间后，这个过程变得非常容易和简单，这将为以后的其他项目节省大量时间。
2.  阅读有关制作简单项目的 SFML 教程。它们易于阅读和理解。也可以尝试使用 CMake 生成示例并构建它们以查看它们是如何工作的。另一个很好的教程是关于 SFML 编程的书（它极大地推动了使用 C++11，我认为这很棒）。
3.  正如所指出的，如果不想使用 DLL，请将 SFML_STATIC 添加到“预处理器定义”中，我认为最好在链接器选项中设置“Windows (/SUBSYSTEM:WINDOWS)”（如果我从“然后控制台停止工作”正确理解“ 陈述）。
4.  最好将 libsndfile-1.dll 和 openal32.dll 放在生成应用程序的发布/调试文件夹中，据我所知，VC++ 在从提供的路径中查找 dll 时表现不佳。

# c - 求解稀疏方程组时出现 csparse 错误

> ID：12352590
> 
> 赞同：3
> 
> 时间：2012-09-10T13:18:30.367
> 
> 标签：c, matrix

我有一个任务，我必须解决一个线性方程组 Ax = B，其中 A 是 10000 量级的稀疏矩阵。我正在使用 csparse 来解决它。在我最初的实现中，出于演示目的，A 是 3*3 阶单位矩阵，B ={1,2,3}。下面是代码片段，它在状态中返回 0，这意味着我的实现中有一些错误。我做错了什么？

```
 cs A;
    int  N = 3;
    double b[]={1,2,3};
    double data[]={1,1,1};
    int columnIndices[]={0,1,2};
    int rowIndices[]={0,1,2};
    A.nzmax =3;
    A.m = N;
    A.n = N;
    A.p = &columnIndices[0];
    A.i = &rowIndices[0];
    A.x = &data[0];
    A.nz = 3;
    int status =  cs_cholsol(0,&A,&b[0]);
    NSLog(@"status=%d",status);   // status always returns 0, which means error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:55:45.300

您必须将输入矩阵转换为 CSC。求解器函数检查矩阵格式，如果是坐标格式则返回 0。顺便提一句。使用类似的示例，我无法让“cholsol”工作，但“lsolve”工作正常（转换为 CSC 后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:43:00.930

上面的矩阵 A 是矩阵三元组形式。首先，我们需要将其转换为压缩列格式 (B)，然后应用 cs_chsol 函数来获取结果。

// 将矩阵三元组转换为列压缩形式

```
cs *B = cs_compress(&A);
int status =  cs_cholsol(0,&B,&b[0]); 
```

我在我的程序中实现了它，现在一切都运行得很好。

# jquery - 当我更改 data-bind="delete" Rails 后，为什么我的链接仍会通过 Post 提交

> ID：12352592
> 
> 赞同：1
> 
> 时间：2012-09-10T13:18:31.267
> 
> 标签：jquery, routes, ruby-on-rails-3.2

我有以下链接：

`<a href="/kits?resource_id=536" class="authorize spin" data-method="post" data-remote="true" id="use_it_link_171" rel="nofollow">`

创建套件后，我将链接更改如下：

`<a href="/kits/536" class="authorize spin" data-method="delete" data-remote="true" id="use_it_link_171" rel="nofollow">`

我更改了 href 和 data-method 以便它应该提交到销毁操作。但是它仍然以 POST 的形式提交

为什么会这样，我该如何解决这个问题，以便将其提交为“删除”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:18:23.450

这是因为 Rails 使用不显眼的 javascript 来设置像`<a data-remote="xxx">`or这样的标签的行为`<a data-method="xxx">`（事实上，Rails 在您的页面中创建了一个隐藏的表单，当点击链接时提交该表单）。它由[rails.js](https://stackoverflow.com/questions/6645583/rails-jss-purpose)在页面加载时完成。

因此，当您更改`data-method`链接的属性时，“为时已晚”，它不会更改链接的行为（您应该为此更新隐藏表单）。您可以深入`rails.js`研究代码以找到如何执行此操作，但我建议您在页面中创建 2 个链接（一个带有`data-method="post"`，一个带有`data-method="delete"`），并使用 CSS 仅隐藏/显示有用的链接。

# vba - 创建一个新的 Excel 工作簿

> ID：12352593
> 
> 赞同：3
> 
> 时间：2012-09-10T13:18:36.717
> 
> 标签：vba, excel

有人可以帮助我使用以下代码：

```
Dim NewOutputFile As Workbook
Set NewOutputFile = Workbooks.Add(FileName & ".xls") 
```

在哪里`FileName = "C:\Documents and Settings\me\My Documents\file.xls"`

我想动态创建一个新工作簿，然后添加新选项卡：

```
NewOutputFile.Sheets.Add ("New tab") 
```

编辑当我说“工作簿”时，我的意思是一个新的 excel 文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T13:28:08.870

```
NewOutputFile.Sheets.Add().Name= "New tab" 
```

或者，如果您想添加一个工作表作为最后一个工作表：

```
NewOutputFile.Sheets.Add(After:=NewOutputFile.Sheets(NewOutputFile.Sheets.Count)).Name = "New tab" 
```

# php - php fgets函数卡住了服务器

> ID：12352597
> 
> 赞同：0
> 
> 时间：2012-09-10T13:18:56.130
> 
> 标签：php

我有`build_additional_docs`一个函数，它调用另一个执行少量操作的函数，但首先它调用 function `read_all_file`，它将文件提取到字符串变量并返回它。

`create_file_node`当从另一个函数调用该函数时，它工作得很好。

但是当它被调用时`build_additional_docs`，客户端会等待服务器直到超时......我认为该函数失败了`fgets()`。

**附加评论：**当我`create_file_node`用相同的文件调用函数时，不同的是文件名是静态字符串，并且我没有 foreach 循环，代码再次工作......

这是我的代码：

```
function build_additional_docs($dir_name, $addDocsArr){
foreach ($addDocsArr as $doc) {
    if($summery != ''){
        $fileName = $dir_name . '\\' . $doc;
        create_file_node($fileName);
    }
}

    function create_file_node($fileName){    global $base_url;
try{
        $text = read_all_file($fileName);
}
catch (Exception $ex){
     // some message here
}
return 0;
}

 function read_all_file($file_name){
$file_handle = fopen($file_name, "r");
while (!feof($file_handle)) {
   $line[] = fgets($file_handle);
}
fclose($file_handle);
return implode('',$line);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:12:03.597

发现错误！$addDocsArr 变量是explode() 函数的返回值，用于将字符串拆分为单独的文件名。返回的数组包括文件名字符串，其中包含无法看到 的**空格字符......所以当我添加代码时：**`$fileName = $dir_name . '\\' . substr($doc, 0,strlen($doc) - 1);`

代码有效。

# vb.net - 使用 WebBowser 和 WebClient 的 vb.net 验证码

> ID：12352601
> 
> 赞同：0
> 
> 时间：2012-09-10T13:19:15.023
> 
> 标签：vb.net, browser, webclient, captcha

我需要登录一个使用验证码图像的页面，我要做的是：

1- 使用 WebClient 将验证码图像下载到内存中。

2- 对图像进行 OCR 并提取代码。

3- 使用 WebBrowser 发布登录详细信息和代码。

例子：

```
WebBrowser1.Navigate("URL", "", paramInByte, "Content-Type:application/x-www-form-urlencoded") 
```

我认为 WebBrowser 在登录前需要另一个验证码图像，我得到错误的代码错误。几个月前它还在工作，所以我认为他们改变了网站。我该如何解决这个问题？我可能需要将 WebClient 的 cookie、标头、查询等传递给 WebBrowser，但我不知道如何在它们之间进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:07:23.687

我找到了这个（w 是 WebBrowser 对象）；

首先，我将 WebBrowser 大小设置为验证码图像大小，因为下面的代码将占据 WebBrowser 中的可见部分，但 WebBrowser 本身不必是可见的。

```
'scroll to the picture, so we have a WebBrowser object just like a picture box
For Each i As HtmlElement In w.Document.GetElementsByTagName("img")
    If i.GetAttribute("src").Contains("here string to identify captcha image") Then
        i.ScrollIntoView(True)
    End If
Next

'Create bitmap
Dim bmp As New Bitmap(w.Width, w.Height, Imaging.PixelFormat.Format32bppArgb)
Dim g As System.Drawing.Graphics = System.Drawing.Graphics.FromImage(bmp)
Dim hdc As IntPtr = g.GetHdc

'Do the Drawing
Dim pUnk As IntPtr = System.Runtime.InteropServices.Marshal.GetIUnknownForObject(w.ActiveXInstance)
OLE32.OleDraw(pUnk, 1, hdc, New Rectangle(0, 0, w.Width, w.Height))
System.Runtime.InteropServices.Marshal.Release(pUnk)

'Release DC and dispose
g.ReleaseHdc(hdc)
g.Dispose() 
```

还应声明 OLE32 类

```
Public Class OLE32
    Public Declare Function OleDraw Lib "ole32.dll" (ByVal pUnk As IntPtr, ByVal dwAspect As Integer, ByVal hdcDraw As IntPtr, ByRef lprcBounds As Rectangle) As Integer
End Class 
```

这样我就可以将控件内容作为 bmp 并进行 OCR 而无需请求新页面。

# opencv - 在Opencv中校准后查找点世界坐标

> ID：12352602
> 
> 赞同：1
> 
> 时间：2012-09-10T13:19:18.663
> 
> 标签：opencv, camera-calibration, calibration

OpenCV 是否有这样的功能：

*   图像平面中标记的坐标
*   外在参数
*   内在参数
*   z坐标（标记和凸轮之间的距离，因为我使用传感器kinect）

提供marker对应的世界坐标？

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:02:39.003

要找到标记的世界坐标，您需要它相对于相机的坐标。如果您知道相机相对于原点的姿势 P 和相对于相机的标记姿势 M，要获得相对于原点的标记姿势，只需将它们相乘

```
final = [P]*[M] 
```

听起来你只是在努力寻找 M。你需要做的就是将你的位置乘以相机矩阵的倒数，然后乘以你的 Z 坐标。

```
Z*cam_mat.inv()*[x_image,y_image,1] = [x_world,y_world,z_world]

M = [1,0,0,x_world,
     0,1,0,y_world,
     0,0,1,z_world,
     0,0,0,1] 
```

# ios - 隐藏视图时关闭键盘

> ID：12352603
> 
> 赞同：-3
> 
> 时间：2012-09-10T13:19:19.630
> 
> 标签：ios

> **可能重复：**
> [关闭键盘的简单方法？](https://stackoverflow.com/questions/741185/easy-way-to-dismiss-keyboard)

在`view1`中，显示键盘。`view2`当我移动到另一个视图（ ）时，我想关闭键盘。在`view2`，在显示视图时调用的方法中，我尝试这样做：

```
[self endEditing:YES]; 
```

但这不起作用，所以我想到了在`View1`隐藏视图中捕获事件（在 中）并在移动到`view2`. 这可能吗？

**编辑：**

我想我需要澄清一下，`view2`当显示时并没有完全隐藏`view1`。垂直显示为 50。

只要我在工作`view1`，键盘就会显示并且`view2`也会显示（50%）。`view2`有一个按钮，当我单击该按钮时，我需要关闭键盘（从 中显示`view1`）。

我试图在 view1 中实现一个方法，如下所示：

```
-(void)dismissKeyBoard{

[self endEditing:YES];
} 
```

并在我单击按钮时调用上面的方法，`view2`但它不起作用。

PS：我点击的按钮`view2`将在`view2`上面显示完全（100％）`view1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:16:17.543

要关闭键盘，您只需在它当前所在的输入字段上“resignFirstResponder”。一种简单的方法是在视图中使用所有输入字段的全部捕获方法。

例如，我通常会创建一个这样的方法：

```
-(void)dismissKeyboard {
  [self.textfield1 resignFirstResponder];
  [self.textfield2 resignFirstResponder];
} 
```

然后在过渡之前调用它

```
[self dismissKeyboard] 
```

# javascript - Internet Explorer 8 兼容模式下的 Youtube api 错误

> ID：12352604
> 
> 赞同：2
> 
> 时间：2012-09-10T13:19:22.860
> 
> 标签：javascript, youtube-api

我正在尝试使用 api 加载 youtube 视频。我复制并粘贴了示例代码。但是当兼容模式打开时，我在 Internet Explorer 8 中遇到错误，我想强制使用 8 模式。

这是错误：

```
Message: 'JSON' is undefined
Line: 33
Char: 136
Code: 0
URI: http://s.ytimg.com/yt/jsbin/www-embed_core_module-vflDULhso.js 
```

这是具有示例代码+强制模式8的html：

[http://cdn.radicalislam.org/enriched/test.html](http://cdn.radicalislam.org/enriched/test.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:00:49.850

YouTube iframe API 依赖于一些仅由 IE8+ 在标准模式下提供的功能。

这些在此处的“要求”下有所提及：

[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

特别是（除了您提到的 JSON 依赖项之外）对 postMessage API 有一个要求 - 这是 JavaScript 库无法提供的。最终结果是，YouTube iframe API 不能在兼容模式下的 IE8 上使用，也不能被任何其他不支持 postMessage 的浏览器使用。

虽然 IE8 确实支持标准模式下的要求，但降到兼容模式会破坏这种行为。

查看您发布的链接后，您似乎已经添加了一个文档类型来强制标准模式，因为您发布了这个 - 这是否解决了问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T09:48:40.493

The error is quite surprising as AFAIK JSON support is no longer a problem as almost all browser support it now ([http://caniuse.com/json](http://caniuse.com/json)). However it seems that JSON is not supported in your case, so you will need a polyfill such as `json2`. To load it Modernizr use this:

```
Modernizr.load({
  test: !!window.JSON && !!JSON.parse,
  nope: 'json2.js'
}); 
```

Update: I overlook a note at the bottom of the Can I Use page; to have JSON support in IE8 you will have to use HTML5 doctype as `<!DOCTYPE html>` in the top of your HTML.

# java - Java中的HtmlPage反序列化-ClassNotFound错误

> ID：12352606
> 
> 赞同：0
> 
> 时间：2012-09-10T13:19:25.460
> 
> 标签：java, serialization, htmlunit

我在从 HtmlUnit java 包中反序列化 Htmlpage 时遇到了一些麻烦。

# TL;博士

我得到的错误（发生在线`Object o = in.readObject();`）：

```
java.lang.ClassNotFoundException: com.gargoylesoftware.htmlunit.util.Cookie 
```

完整堆栈跟踪： http: [//pastebin.com/geH7SgWu](http://pastebin.com/geH7SgWu)

## 问题

这个问题的原因可能是什么？我错过了什么还是 SVN 代码有缺陷？

* * *

**我使用的代码：**

*序列化：*

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
ObjectOutput out = null;

try {
  out = new ObjectOutputStream(bos);
  out.writeObject(this.htmlPage);
} catch (Exception ex) {
  ex.printStackTrace(System.out);
} finally {
  out.close();
  bos.close();
}
return bos.toByteArray(); 
```

*反序列化：*

```
ByteArrayInputStream bis = new ByteArrayInputStream(content.getContent());
ObjectInput in = null;
HtmlPage htmlPage2 = null;

try {
  in = new ObjectInputStream(bis);
  Object o = in.readObject();
  htmlPage2 = (HtmlPage) o;
} catch (Exception ex) {
  ex.printStackTrace(System.out);
} finally {
  bis.close();
  in.close();
} 
```

序列化对象作为`content`变量中的字节发送（ Nutch 中的[协议插件](http://nutch.apache.org/apidocs-1.4/org/apache/nutch/protocol/http/api/HttpBase.html#getResponse)）。然后使用`content.getContent()`方法接收它（这发生在 Nutch的[Parsing 插件中）。](http://nutch.apache.org/apidocs-1.4/org/apache/nutch/protocol/Content.html#getContent%28%29)

* * *

我拥有 HtmlUnit 和 HtmlUnit 本身的所有依赖项，可以从代码中访问。

奇怪的是，我什至不在`Cookie`任何地方使用该课程。后来，出于测试目的，我创建了一个 Cookie，一切顺利。

我已经验证它包含在其中一个罐子中：

```
$ jar -tf htmlunit-2.11-SNAPSHOT.jar | grep Cookie
com/gargoylesoftware/htmlunit/HtmlUnitCookieStore.class

com/gargoylesoftware/htmlunit/util/Cookie.class

com/gargoylesoftware/htmlunit/HtmlUnitBrowserCompatCookieSpec.class
com/gargoylesoftware/htmlunit/HtmlUnitBrowserCompatCookieSpec$2.class
com/gargoylesoftware/htmlunit/CookieManager.class
com/gargoylesoftware/htmlunit/HtmlUnitBrowserCompatCookieSpec$1.class
com/gargoylesoftware/htmlunit/HtmlUnitBrowserCompatCookieSpec$3.class 
```

* * *

## 版本：

**可见的 JAR：**

```
commons-codec-1.6.jar
commons-collections-3.2.1.jar
commons-io-2.4.jar
commons-lang3-3.1.jar
commons-logging-1.1.1.jar
cssparser-0.9.7.jar
htmlunit-2.11-SNAPSHOT.jar
htmlunit-core-js-2.11-20120814.002723-22.jar
httpclient-4.2.1.jar
httpcore-4.2.1.jar
httpmime-4.2.1.jar
jetty-http-8.1.5.v20120716.jar
jetty-io-8.1.5.v20120716.jar
jetty-util-8.1.5.v20120716.jar
jetty-websocket-8.1.5.v20120716.jar
nekohtml-1.9.16.jar
sac-1.3.jar
serializer-2.7.1.jar
xalan-2.7.1.jar
xercesImpl-2.10.0.jar
xml-apis-1.4.01.jar 
```

**HtmlUnit** - 2012 年 9 月 10 日的 SVN 快照，按照这个简短的教程[http://htmlunit.sourceforge.net/gettingLatestCode.html编译](http://htmlunit.sourceforge.net/gettingLatestCode.html)

**Nutch 1.4**

* * *

我希望我提供的信息已经足够了。如果没有，请在评论中告诉我，我很乐意更新问题。

在此先感谢和问候，

萨尔斯基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:48:56.743

根据 grepcode.com`com.gargoylesoftware.htmlunit.util.Cookie`存在于以下版本的 htmlunit：2.9、2.8、2.7。

例如，尝试使用 htmunit v2.9。可能是您的类路径中的某些 jar 正在寻找特定版本的 htmlunit

# json - JSON 在数据前返回 291 个空白行

> ID：12352610
> 
> 赞同：3
> 
> 时间：2012-09-10T13:19:43.487
> 
> 标签：json

我已经使用 PHP 创建了一个 JSON 返回（实际上其中有很多），根据 JSONLint，JSON 都是有效的，并且数据在我的小 iPhone 应用程序中确实有效，但是对于每个返回的 JSON 提要，我得到 291 个空白行，包含所有 JSON 数据的 1 行...

JSON 返回的示例是：

```
{"EOF":"1","C":[{"T":"0 min","D":"0sec","MID":"","M":"","ML":"","C":"No comments"}]} 
```

...在此之前有 291 个空白行...空白是指完全空白，没有空格，没有字符，绝对没有。

有没有其他人经历过这种情况，如果有，你是如何与之抗争的？

****更新****这是代码：

基本上，它从 MySQL 数据库中检索结果集，如果没有返回任何内容，则返回上面列出的 JSON……无论 MySQL 查询是否返回数据，我都会得到 291 行空白。对于某些项目在数据库中有 1 或 2 行，而对于其他项目有超过 500 个项目，并且所有数据都已正确返回和验证。

```
$jsonDetails='{"EOF":"'.$EOF.'","C":[';
  while ($commentRow = mysql_fetch_row($allComments)) {
      $commentMakername=get_Username($commentRow[2]);
      $MakerLevel=get_UserLevel($commentRow[2]);
      $jsonDetails.='{';
      $jsonDetails.='"T":"'.strtolower($commentRow[3]).'",';                       $jsonDetails.='"D":"'.human_time_diff( $commentRow[5] ).'",';
      $jsonDetails.='"MID":"'.$commentRow[2].'",';
      $jsonDetails.='"M":"'.ucfirst($commentMakername).'",';
      $jsonDetails.='"ML":"'.$MakerLevel.'",';    $jsonDetails.='"C":"'.$commentRow[6].'"';
      $jsonDetails.='},';
  }
  if(strlen($jsonDetails)>=17){
  $jsonDetails=substr($jsonDetails,0,-1).']}';
  }else{$jsonDetails='{"EOF:"1","C":[{"T":"0 min","D":"0sec","MID":"","M":"","ML":"","C":"No comments"}]}';}
  return $jsonDetails; 
```

# android - 如何在录制视频时显示实时过滤的相机预览？

> ID：12352615
> 
> 赞同：6
> 
> 时间：2012-09-10T13:20:28.860
> 
> 标签：android, camera, frames, video-recording, live-preview

我想在使用媒体录像机录制视频时显示过滤后的相机预览。为了过滤预览，我通常需要帧，我可以从 onPreviewFrame() 函数中获取，但是在使用媒体记录器录制视频时，不会调用 onPreviewFrame() 函数。所以我想知道，有没有其他方法可以让这些帧进行过滤，然后在修改后显示它们？我检查了一些来自 Google Play 的应用程序，例如 Videocam Illusion。它在录制视频期间显示带有效果的预览。我想做类似的事情，但没有提示如何去做。因此，我将不胜感激有关该问题的任何帮助/提示/代码/示例。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:38:52.683

我自己没有做过，但不久前搜索过。StackOverflow 上有一个答案来显示 PreviewFrame 的修改后的缓冲区：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/yF6CmrIJzuo](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/yF6CmrIJzuo)

在这里，关于同一主题的谷歌群组链接。

[如何操作相机预览？](https://stackoverflow.com/questions/6478375/how-can-i-manipulate-the-camera-preview)

希望这会有所帮助，我正在计划一个修改预览帧的应用程序，但不会记录任何内容。

最好的问候。

# php - 防止用户在页面刷新时重新点击“赞”按钮

> ID：12352618
> 
> 赞同：1
> 
> 时间：2012-09-10T13:20:35.853
> 
> 标签：php, jquery

我想阻止用户多次单击“*赞”按钮。*我可以使用 jQuery 在第一次单击时禁用该按钮，但是当页面刷新时，用户可以再次单击该按钮。如何防止用户重新单击页面刷新按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:22:00.077

您可以将用户ID存储在已经喜欢的数据库中并为他们禁用喜欢按钮/链接，这样他们一旦点击按钮或链接就不会再点击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:22:19.457

使用js屏蔽UI

像这样： http: [//www.malsup.com/jquery/block/#demos](http://www.malsup.com/jquery/block/#demos)

谷歌“js块用户界面”

很抱歉简短的回答

编辑：我想没有正确阅读您的问题，请参阅 Mayank swami 的帖子，他有您的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:29:12.380

您应该在服务器端检查它。use 可以为此目的使用 $_SESSION。当用户点击链接集时

```
$_SESSION['liked']=true; 
```

然后检查用户之前是否点击过。页面刷新时会话不会被销毁。

# ms-access - 从 2010 数据宏中运行 vba 代码

> ID：12352620
> 
> 赞同：2
> 
> 时间：2012-09-10T13:20:42.977
> 
> 标签：ms-access, vba

我有一个创建文本文件的函数，需要从数据宏运行它。因此，甚至可以在桌子上使用它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:21:32.660

你没有，根据我们的聊天。数据宏甚至在 MS Access 之外运行，如果它们使用 MS Access 中的代码，则不会发生这种情况。它们与数据库引擎相关联，数据库引擎对 Access 前端一无所知。

您可以从数据宏 AFAIK 运行查询，~~并且可以创建查询以写入文件~~*，但您不能运行 VBA。

* 我对此进行了更多研究，发现：“数据宏中不允许包含链接表、操作查询和数据库引用的查询。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T16:01:12.520

您可以这样做，但不建议这样做。请记住，表触发器和存储过程代码确实独立于 VBA 运行，事实上，即使您没有安装 Access，它也会运行。

但是，假设您将使用 Access 始终编辑数据（一个合理的假设），那么您实际上可以让表宏调用 VBA 代码。有几种方法可以做到这一点，但最常见和最有用的是将 SetLocalVar 设置为 VBA 函数。这有一个额外的好处，就是能够将一些值传递给在大多数情况下可能需要的函数。

因此，请记住，您可以调用 VBA 代码，但随后您将创建从表到 VBA 的依赖关系。

所以只需对一些虚拟变量使用 SetLocalVar，并将 VBA 函数放在表达式中。

# php - PHP url 字符串冲突“？” 和 ”＆”

> ID：12352625
> 
> 赞同：1
> 
> 时间：2012-09-10T13:21:00.950
> 
> 标签：php, string, url

我的网站中有一个语言系统。当人们点击切换到另一种语言时，会在 url 中添加以下内容：`?lang=`. `?p=`问题是，我的网站也被添加到 url的页面划分。所以基本上，如果他们在其中一个页面上更改语言，它将覆盖`?p=`并返回主页。所以会的`index.php?lang=`。

代码是什么，或者我应该如何对其进行编码，以便 php 验证`?`url 中是否已经有一个字符串并切换`?lang=`到`&lang=`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:23:32.220

您可以使用[`http_build_query`](http://www.php.net/manual/en/function.http-build-query.php)来避免此问题：

```
$params = array(
    'p'    => 'foo',
    'lang' => 'bar'
);

echo http_build_query($params); // p=foo&lang=bar

echo '?' . http_build_query($params); // ?p=foo&lang=bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:23:21.830

检查是否`$_SERVER['QUERY_STRING']`为空。

如果是，则添加，`?lang=`否则添加`&lang=`

# python - 如何更改导入库的名称？

> ID：12352626
> 
> 赞同：0
> 
> 时间：2012-09-10T13:21:02.680
> 
> 标签：python, import, jython

我正在将 jython 与第三方应用程序一起使用。第三方应用程序有一些内置库`foo`。为了进行一些（单元）测试，我们希望在应用程序之外运行一些代码。由于`foo`绑定到应用程序，我们决定编写自己的模拟实现。

但是有一个问题，我们在 python 中实现了我们的模拟类，而他们的类是在 java 中。因此，可以使用他们的代码，`import foo`而 foo 是之后的模拟**类**。但是，如果我们像这样导入 python 模块，我们会得到附加到名称的**模块**`foo.foo`，因此必须编写才能进入该类。

为方便起见，我们希望能够**编写**`from ourlib.thirdparty import foo`绑定`foo`到`foo`类。但是，我们希望避免直接导入所有类，因为每个文件的加载时间都需要相当长的时间。**`ourlib.thirdparty`**

 **在python中有什么办法吗？（我在 Import 钩子上没有走多远，我尝试简单地返回类`load_module`或覆盖我写的内容`sys.modules`（我认为这两种方法都很丑陋，尤其是后者））

**编辑**：

好的：这是 ourlib.thirdparty 中的文件简化后的样子（没有魔法）：

foo.py：

```
try:
    import foo
except ImportError:
    class foo
        .... 
```

*实际上*它们看起来像这样：

foo.py：

```
class foo
    ....

__init__.py in ourlib.thirdparty
import sys
import os.path
import imp
#TODO: 3.0 importlib.util abstract base classes could greatly simplify this code or make it prettier.

class Importer(object):
    def __init__(self, path_entry):
        if not path_entry.startswith(os.path.join(os.path.dirname(__file__), 'thirdparty')):
            raise ImportError('Custom importer only for thirdparty objects')

        self._importTuples = {}

    def find_module(self, fullname):
        module = fullname.rpartition('.')[2]

        try:
            if fullname not in self._importTuples:
                fileObj, self._importTuples[fullname] = imp.find_module(module)

                if isinstance(fileObj, file):
                    fileObj.close()
        except:
            print 'backup'
            path = os.path.join(os.path.join(os.path.dirname(__file__), 'thirdparty'), module+'.py')
            if not os.path.isfile(path):
                return None
                raise ImportError("Could not find dummy class for %s (%s)\n(searched:%s)" % (module, fullname, path))

            self._importTuples[fullname] = path, ('.py', 'r', imp.PY_SOURCE)

        return self

    def load_module(self, fullname):
        fp = None
        python = False

        print fullname

        if self._importTuples[fullname][1][2] in (imp.PY_SOURCE, imp.PY_COMPILED, imp.PY_FROZEN):
            fp = open( self._importTuples[fullname][0], self._importTuples[fullname][1][1])
            python = True

        try:
            imp.load_module(fullname, fp, *self._importTuples[fullname])
        finally:
            if python:
                module = fullname.rpartition('.')[2]
                #setattr(sys.modules[fullname], module, getattr(sys.modules[fullname], module))
                #sys.modules[fullname] = getattr(sys.modules[fullname], module)

                if isinstance(fp, file):
                    fp.close()

                return getattr(sys.modules[fullname], module)

sys.path_hooks.append(Importer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:56:09.710

正如其他人所说，在 Python 中这是一件很简单的事情，`import`语句本身就有这样的语法：

`from foo import foo as original_foo`，例如 - 甚至`import foo as module_foo`

值得注意的是，`import`语句将名称绑定到本地上下文上的导入模块或对象 - 但是，字典`sys.modules` （在 moduels `sys of course), is a live reference to all imported modules, using their names as a key. This mechanism plays a key role in avoding that Python re-reads and re-executes and already imported module , when running (that is, if various of yoru modules or sub-modules import the same`foo` 模块上，它只被读取一次 - 后续导入使用存储在 sys.path 中的引用。模块）。

而且——除了“import...as”语法之外，Python 中的模块只是另一个对象：您可以在运行时为它们分配任何其他名称。

因此，以下代码也将非常适合您：

```
import foo
original_foo = foo
class foo(Mock):
   ... 
```**

# android - Android UnsatisfiedLinkError：使用 APV 解析文件

> ID：12352628
> 
> 赞同：0
> 
> 时间：2012-09-10T13:21:07.570
> 
> 标签：android, android-intent, pdfview, apvpdf

我正在使用（APV pdf 查看器），如链接链接 [1](http://code.google.com/p/apv/source/browse/#hg/pdfview)[和](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)链接 2所示

无论如何它工作正常。但是当我通过项目更改包的名称时，它给了我以下异常：

```
09-10 22:02:35.936: E/AndroidRuntime(556): FATAL EXCEPTION: main
09-10 22:02:35.936: E/AndroidRuntime(556): java.lang.UnsatisfiedLinkError: parseFile
09-10 22:02:35.936: E/AndroidRuntime(556):  at cx.hell.android.pdfviewIktab.PDF.parseFile(Native Method)
09-10 22:02:35.936: E/AndroidRuntime(556):  at cx.hell.android.pdfviewIktab.PDF.<init>(PDF.java:87)
09-10 22:02:35.936: E/AndroidRuntime(556):  at cx.hell.android.pdfviewIktab.OpenFileActivity.getPDF(OpenFileActivity.java:569) 
09-10 22:02:35.936: E/AndroidRuntime(556):  at cx.hell.android.pdfviewIktab.OpenFileActivity.startPDF(OpenFileActivity.java:530)
09-10 22:02:35.936: E/AndroidRuntime(556):  at cx.hell.android.pdfviewIktab.OpenFileActivity.onCreate(OpenFileActivity.java:282)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.os.Looper.loop(Looper.java:123)
09-10 22:02:35.936: E/AndroidRuntime(556):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-10 22:02:35.936: E/AndroidRuntime(556):  at java.lang.reflect.Method.invokeNative(Native Method)
09-10 22:02:35.936: E/AndroidRuntime(556):  at java.lang.reflect.Method.invoke(Method.java:521)
09-10 22:02:35.936: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-10 22:02:35.936: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-10 22:02:35.936: E/AndroidRuntime(556):  at dalvik.system.NativeStart.main(Native Method) 
```

这是类（PDF.java）：

```
package cx.hell.android.pdfviewIktab;

import java.io.File;
import java.io.FileDescriptor;
import java.util.List;
import cx.hell.android.lib.pagesview.FindResult;

public class PDF {
static {
    System.loadLibrary("pdfview2");
}

public static class Size implements Cloneable {
    public int width;
    public int height;

    public Size() {
        this.width = 0;
        this.height = 0;
    }

    public Size(int width, int height) {
        this.width = width;
        this.height = height;
    }

    public Size clone() {
        return new Size(this.width, this.height);
    }
}

private int pdf_ptr = -1;
private int invalid_password = 0;

public boolean isValid() {
    return pdf_ptr != 0;
}

public boolean isInvalidPassword() {
    return invalid_password != 0;
}

synchronized private native int parseFile(String fileName, int box, String password);

synchronized private native int parseFileDescriptor(FileDescriptor fd, int box, String password);

public PDF(File file, int box) {

 // this is the line of (cx.hell.android.pdfviewIktab.OpenFileActivity.getPDF(OpenFileActivity.java:569))
    this.parseFile(file.getAbsolutePath(), box, "");
}

public PDF(FileDescriptor file, int box) {
    this.parseFileDescriptor(file, box, "");
}

synchronized public native int getPageCount();

synchronized public native int[] renderPage(int n, int zoom, int left, int top, 
        int rotation, boolean gray, boolean skipImages, PDF.Size rect);

synchronized public native int getPageSize(int n, PDF.Size size);

synchronized public native List<FindResult> find(String text, int page);

synchronized public native void clearFindResult();

synchronized public native List<FindResult> findOnPage(int page, String text);

synchronized private native void freeMemory();

public void finalize() {
    try {
        super.finalize();
    } catch (Throwable e) {
    }
    this.freeMemory();
}
} 
```

请问有什么帮助吗？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:20:06.493

此错误意味着 Android Dalvik 虚拟机找不到给定 Java 类/方法所需的本机库。请正确构建本机库。如果本机库已正确创建并且您确定它应该可以毫无问题地加载，那么它要么是 Android/Dalvik 错误，要么是 NDK 错误……但这极不可能。这个问题在 APV 的用户组上被问过很多次，通常是因为问这个问题的人不了解 JNI 的基础知识。

如果您仍然不知道如何解决此问题，我建议为 Java 和 Android（使用 android-ndk）创建基本的 JNI“hello, world”应用程序并尝试一下。这应该为您解决问题。

抱歉，这个错误与 APV 本身无关，APV 在这里没有做任何特殊的神秘魔法，它只是使用了许多其他应用程序使用的标准成熟技术 (JNI)。

Java 如何查找和调用本机方法的说明：http: [//docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp679](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp679)。

您粘贴的代码已将 pdfview 包名称更改为 pdfviewIktab。确保您已相应地更改了 JNI (C) 函数名称。

# ios - 将 admob sdk 集成到 iOS 应用程序时出现链接器错误

> ID：12352630
> 
> 赞同：5
> 
> 时间：2012-09-10T13:21:09.867
> 
> 标签：ios, admob

我将 Google 的 AdMob SDK 集成到一个工作的 iPhone 应用程序中。我收到 12 个以“Apple Mach-O Linker (Id) Error”开头的错误。错误消息的文本通常是指从谷歌库调用的低级目标 C 对象。例如：

*架构 i386 的未定义符号：“_NSInMemoryStoreType”，引用自：libGoogleAnalytics.a(GAIDataStore.o) 中的 anon +[GAIDataStore memoryContextWithModel:withError:] 在 libGoogleAnalytics_debug.a(GAIDataStore.o) 中*

我想我可能没有链接一个必要的框架，但一切似乎都井井有条。我按照[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)上的说明进行操作，我的链接库选项卡如下所示：

![链接库的屏幕截图](../Images/0667921a5a5b61a7174fc3cbd01869a0.png)

除非我弄错了，否则它包含 AdMob 需要的框架。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T15:57:25.810

您可能只是批发了“附加组件”文件夹。不幸的是，该文件夹还包括 Google Analytics 示例项目和二进制文件。如果您没有从那里使用分析，我会删除整个“GoogleAnalyticsiOS_2.0beta2”文件夹。

# java - Java Servlet 在服务页面之前执行方法

> ID：12352631
> 
> 赞同：0
> 
> 时间：2012-09-10T13:21:14.263
> 
> 标签：java, tomcat, servlets

我希望能够在获取 HTTP 请求和发送网页之间有一种方法。与我想要的最接近的是在每个 jsp 文件之上都有一些代码。

例子：

```
<%
    some.package.staticMethod();
%> 
```

这有意义吗？

我相信 ASP.net 有一个类似于我想要的方法 Page_Load 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:34:47.813

如果这适用于传入 HTTP 请求的所有响应，那么您正在谈论[Servlet Filter](http://www.javaworld.com/jw-06-2001/jw-0622-filters.html)。

# visual-studio-2010 - 在 VS 2010 中调试应用程序

> ID：12352633
> 
> 赞同：0
> 
> 时间：2012-09-10T13:21:16.857
> 
> 标签：visual-studio-2010, debugging

我可能听起来很傻，但我在调试方面很天真。我有一个疑问，为了跟踪程序中的执行流程，放置断点的最佳点应该是什么？是不是无论我们在哪里设置断点，之前的应用程序执行流程都不会被追踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:25:12.930

您可以将断点放置在您想要单步执行的一段代码附近或之前以进行调试，然后当执行在您的断点处暂停时，逐行逐行检查变量的状态并遵循执行路径.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:26:01.470

放置断点的最佳点是您需要中断函数的位置。

如果由于条件而无法达到该确切点，则在条件上中断会导致它跳过并确保可以达到您想要调试的*代码*。

您需要放置断点，您可以在其中以最快的速度访问您希望调试的代码。

# oracle - Oracle版本的Sql Server“sqlcmd.exe”工具部署.sql脚本

> ID：12352634
> 
> 赞同：1
> 
> 时间：2012-09-10T13:21:18.447
> 
> 标签：oracle, command-line

Microsoft Sql Server 有一个名为 sqlcmd.exe 的命令行工具。

您可以使用它来部署 .sql 脚本。

我搜索并搜索并找到了许多 Oracle 命令行工具，但我还没有找到一个可以部署 sql 包的工具。

这是一个简单的例子：

```
sqlcmd.exe -i .\MySqlScript.sql -S "MySqlServerMachine\MyInstancenName"  -E -o ".\MyOutputLogFileName.txt" 
```

命令行将使用集成安全性（“-E”）针对名为“MySqlServerMachine\MyInstancenName”的 Sql Server（实例）运行文件“MySqlScript.sql”，并将结果输出到名为“MyOutputLogFileName.txt”的文件中。

这个工具有 Oracle 版本吗？

* * *

我找到`oradim`了，但如果它运行一个 .sql 脚本，那就不合适了。

* * *

根据 parado 的回复，我找到了以下网址：

[http://docs.oracle.com/cd/B25329_01/doc/appdev.102/b25108/xedev_sqlplus.htm#CJAGIECA](http://docs.oracle.com/cd/B25329_01/doc/appdev.102/b25108/xedev_sqlplus.htm#CJAGIECA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:24:35.900

是的，有一个 Sql*Plus：

```
sqlplus user/pass@connect @scriptname 
```

如果您想要输出文件，请添加到您的脚本中：

```
spool log.out 
```

# php - 使 url 正则表达式全局化

> ID：12352635
> 
> 赞同：2
> 
> 时间：2012-09-10T13:21:20.857
> 
> 标签：php, regex, url

我一直在寻找一个正则表达式来替换字符串中的纯文本 url（该字符串可以包含超过 1 个 url），方法是：

```
 <a href="url">url</a> 
```

我发现了这个： http: [//mathiasbynens.be/demo/url-regex](http://mathiasbynens.be/demo/url-regex)

我想使用diegoperini的正则表达式（根据测试是最好的）：

```
_^(?:(?:https?|ftp)://)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:/[^\s]*)?$_iuS 
```

但我想让它全局替换字符串中的所有 url。当我使用这个时：

```
/_(?:(?:https?|ftp)://)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:/[^\s]*)?_iuS/g 
```

它不起作用，我如何使这个正则表达式全局化，开头的下划线和结尾的“_iuS”是什么意思？

我想将它与 php 一起使用，所以我正在使用：

```
preg_replace($regex, '<a href="$0">$0</a>', $examplestring); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:43:17.120

下划线是正则表达式分隔符，i、u 和 S 是模式修饰符：

> 我（PCRE_CASELESS）
> 
> ```
> If this modifier is set, letters in the pattern match both upper and lower 
> case letters. 
> ```
> 
> U (PCRE_UNGREEDY)
> 
> ```
> This modifier inverts the "greediness" of the quantifiers so that they are 
> not greedy by default, but become greedy if followed by ?. It is not compatible
> with Perl. It can also be set by a (?U) modifier setting within the pattern 
> or by a question mark behind a quantifier (e.g. .*?). 
> ```
> 
> 小号
> 
> ```
> When a pattern is going to be used several times, it is worth spending more 
> time analyzing it in order to speed up the time taken for matching. If this 
> modifier is set, then this extra analysis is performed. At present, studying 
> a pattern is useful only for non-anchored patterns that do not have a single 
> fixed starting character. 
> ```

有关更多信息，请参阅[http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

当您添加 / ... /g 时，您添加了另一个正则表达式分隔符以及 PCRE 中不存在的修饰符 g，这就是它不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:33:38.287

我同意@verdesmarald 并在以下函数中使用了这种模式：

```
$string = preg_replace_callback(
        "_(?:(?:https?|ftp)://)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:/[^\s]*)?_iuS",
        create_function('$match','
            $m = trim(strtolower($match[0]));
            $m = str_replace("http://", "", $m);
            $m = str_replace("https://", "", $m);
            $m = str_replace("ftp://", "", $m);
            $m = str_replace("www.", "", $m);

            if (strlen($m) > 25)
            {
                $m = substr($m, 0, 25) . "...";
            }

            return "<a href=\"$match[0]\">$m</a>";
                '), $string);

    return $string; 
```

它似乎可以解决问题，并解决我遇到的问题。正如@verdesmarald 所说，删除 ^ 和 $ 字符使该模式即使在我的 pre_replace_callback() 中也可以工作。

唯一让我担心的是该模式的效率如何。如果在繁忙/高流量的网络应用程序中使用，它会导致瓶颈吗？

**更新**

如果 url 的路径部分的末尾有一个尾点，则上述正则表达式模式会中断，如下所示`http://www.mydomain.com/page.`。为了解决这个问题，我通过添加`^.`使最终部分看起来像这样来修改正则表达式模式的最后一部分`[^\s^.]`。当我阅读它时，不要匹配尾随空格或点。

到目前为止，在我的测试中，它似乎工作正常。

# php - php循环中的jquery倒数计时器

> ID：12352636
> 
> 赞同：-1
> 
> 时间：2012-09-10T13:21:26.950
> 
> 标签：php, jquery

我想使用 keith woods 倒数计时器 jquery 插件 (http://keith-wood.name/countdown.html) 来显示拍卖拍卖的剩余时间，但我遇到了麻烦。

当用户搜索时，php 会检索多个搜索结果，并将结束时间的时间戳存储为 varchar。

```
while($row = $stmt->fetch(PDO::FETCH_ASSOC)){
        $numrows++;
        $ID = $row['ID'];
        $img = $row['img'];
        $desc = $row['description'];
        $name = $row['name'];
        $owner = $row['owner'];
        $cprice = $row['cprice'];
        $iprice = $row['iprice'];
        $incprice = $row['incprice'];
        $etime = $row['etime'];
        $nextBid = $cprice + $incprice;

$stmt2 = $pdo->prepare("SELECT * FROM user WHERE username = :username");
$stmt2->bindParam(":username", $owner,PDO::PARAM_STR);
$stmt2->execute();

$thisuser = $stmt2->fetch(PDO::FETCH_ASSOC);
$location = $thisuser['location'];

        echo'
        <tr class="resultindex">

        <td class="imgCol"><a href="displayAuct.php?id='.$ID.'"><img src="'.$img.'" alt="'.$name.'" /></a></td>
        <td class="infoCol">

            <div class="nameDiv">
                <a class="nameLink" href="displayAuct.php?id='.$ID.'">'.$name.'</a><br/>
            </div>
            <div class="descDiv">
                <span class="priceLabel2">'.$desc.'</span>
            </div>

            <div class="userdiv">
                <span class="fromuser">Location: </span><br/>
                <span class="location">'.$location.'</span>
            </div>
        </td>
        <td style="width:1px; background-color:#330066;" ></td>
        <td class="priceCol">
            <div class="currentp"><span class="priceLabel">Current Bid: </span><br/><span class="price1">$'.$cprice.'</span></div>
            <div class="instantp"><span class="priceLabel2">Instant Sale: </span><br/><span class="price2">$'.$iprice.'</span></div>
            <div style="height:5px;"></div>
            <div class="incp"><span class="priceLabel2">Next Bid:</span><br/><span class="price2">$'.$nextBid.'</span></div>
        </td>
        <td style="width:1px; background-color:#330066;"></td>
        <td class="timerCol">
            <div id="timeRow">
                <span class="timeleft">Time Left: </span>
            </div>
            <div id="countdownRow"></div>
        </td>
        </tr>
        ';
    } 
```

在代码的底部，我希望基于该特定项目的倒数计时器显示在 countdownRow div 中。

我不知道如何用javascript处理这个，我想出了：

```
var timestamp = <?php echo $etime; ?> * 1000;
    var endTime = new Date();
    endTime.setTime(timestamp);

    $(document).ready(function(e){
        $(".cdtimer").load(function(){
            $(".cdtimer").countdown({until: endTime});
        });
    }); 
```

但这似乎不起作用。有人知道我需要在这里做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:58:52.043

首先说明：html中的id属性必须是唯一的。所以每一行都需要一个唯一的ID。

将`$etime`每一行添加到单独的 div 中，以便在 html 中提供所有结束时间。

使用 jquery 查找所有`timerCol`列并为每个结果启动一个新计时器。

```
$(".timerCol .timeLeft").each(function() {
    endtime = $(this).find(".timeRowValue").val();
    $(this).countdown({until: endTime});
}; 
```

# python - 使用 formset 显示和验证多对多关系

> ID：12352637
> 
> 赞同：0
> 
> 时间：2012-09-10T13:21:27.797
> 
> 标签：python, django, django-models, django-forms

我有以下数据库架构

```
class Ingredient(models.Model):
  title = models.CharField(max_length=255)

class Recipe(models.Model):
  # Many more fields that aren't important
  # ...
  ingredients = models.ManyToManyField(Ingredient, through='Measurement',
                                       blank=True, null=True)

class Measurement(models.Model):
  recipe     = models.ForeignKey(Recipe)
  ingredient = models.ForeignKey(Ingredient)
  amount     = models.CharField(max_length=255) 
```

现在我想将它内联显示为

```
<!-- fields that are not important -->

<input type="text" name="ingredient" value="">
<input type="text" name="amount" value=""> 
```

因此，当用户在文本框中输入成分和数量时，它会在成分表中保存一个新条目，并将其 id 用于测量表。我还需要在配方表中保存一些附加信息，例如程序和配方标题。我如何实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:37:11.930

Learn about [formsets](https://docs.djangoproject.com/en/dev/topics/forms/formsets/) and [modelformsets](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets). You can use something like:

```
formset = modelformset_factory(Measurement) 
```

**Warning** if there is a lot of recipes and ingredients, then rendering the select for ingredient and recipe for each form will be slow. A simple solution is to use an [autocomplete app](http://djangopackages.com/grids/g/auto-complete/).

Example with django-autocomplete-light:

```
autocomplete_light.register(Ingredient, search_fields=['title'])
autocomplete_light.register(Recipe)

formset = modelformset_factory(Measurement, 
    form=autocomplete_light.modelform_factory(Measurement)) 
```

# c# - 控件仅在新页面刷新后绑定到 DataReader

> ID：12352640
> 
> 赞同：0
> 
> 时间：2012-09-10T13:21:34.230
> 
> 标签：c#, asp.net, sql-server

Windows：**7 家庭高级版**
Visual Studio：**2012**
语言：**C#**
SQL：**Server 2008**

我将一些标签和图像绑定到从本地数据库读取的 DataReader。标题标签和图像的图像 URL 正确绑定，但其余标签仅在我刷新页面后才会填充。

第一张图片显示了我单击用户个人资料链接后的页面。请注意，页面中的 3 个标签包含不正确的信息：
![错误信息](../Images/80db89929c50467e79f10adb223f30fe.png)

整页刷新后，数据正​​常显示：
![信息不正确](../Images/0ca598e6dab12cd178fd983eee502a9a.png)

代码如下

```
private static string _acceptingChallenges = "0";
private static string _curUser;
private static string _website = "[None]";
private static string _dateJoined = DateTime.Now.ToString();

protected void Page_Load(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(Request.QueryString["user"]))
    {
        _curUser = (Request.QueryString["user"]);
        pnlProfilePublic.Visible = true;
        pnlProfilePrivate.Visible = false;
        PopulatePublic();
    }
    else
    {
        if (!string.IsNullOrEmpty((string) Session["Nickname"]))
        {
            _curUser = Session["Nickname"].ToString();
            pnlProfilePublic.Visible = false;
            pnlProfilePrivate.Visible = true;
            PopulatePrivate();
        }
        else
        {
            Response.Redirect("~/Default.aspx");
        }
    }

    InitiateData();
}

private void InitiateData()
{
    if (Master == null) return;

    Label lblTitle = (Label)Master.FindControl("lblTitle");

    const string strSql = "SELECT * FROM vwGetProfileDetails WHERE memberNickname=@member";

    var sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text };

    sqlComm.Parameters.Add(new SqlParameter("@member", SqlDbType.VarChar, 20)).Value = _curUser;

    var rdr = sqlComm.ExecuteReader();
    int count = 0;
    while (rdr.Read())
    {
        imgProfile.ImageUrl = rdr["memberAvatarLocation"].ToString();
        lblTitle.Text = _curUser + "'s Profile Page";

        _acceptingChallenges = rdr["memberAcceptingChallenge"].ToString();
        _website = rdr["memberWebsite"].ToString();
        _dateJoined = rdr["dateAdded"].ToString();

        count = count + 1;
    }

    rdr.Close();
    DataConn.Disconnect();
    Response.Write(count);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:26:32.937

第一次调用 _curUser 是否有值`InitiateData`？我不这么认为

此外，您不想在网页上使用静态变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:32:35.257

PopulatePublic 和 PopulatePrivate 在 InitiateData 之前被调用...因此它们将存储在静态字符串中，仅在下次调用页面时才会填充。

如果您使用的是 ASP.Net 控件，则可能会启用自动查看状态，以便在回发时重新填充控件。所以你可以做 lblWebsite.Text = rdr["memberWebsite"].ToString(); 并让 ASP.NET 管理视图状态..不需要静态字符串..

# android - 如何在Java中提取签名包的签名？

> ID：12352654
> 
> 赞同：3
> 
> 时间：2012-09-10T13:22:38.680
> 
> 标签：android

```
PackageManager pm = this.getPackageManager();
PackageInfo info = pm.getPackageInfo("pkgname", PackageManager.GET_SIGNATURES);
Signature[] sig = info.signatures;
String sigstring = new String(sig[0].toChars());
System.out.println(sigstring);` 
```

我编写了以下脚本来提取签名，但它不起作用。

我在网上找到了这个。

我收到一个编译错误，因为“该类的方法 getPackageManager() 未定义”

我也尝试使用上下文类，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:35:25.763

The method `getPackageManager()` belongs to the [android.content.Context](http://developer.android.com/reference/android/content/Context.html) class and is therefore present in all subclasses.

If the code you have posted does not work you have implemented it most likely not in an Activity or Service. Both derive from Context and therefore have this method.

# .net - Microsoft Fakes 和 .Net 4.0

> ID：12352655
> 
> 赞同：5
> 
> 时间：2012-09-10T13:22:39.360
> 
> 标签：.net, moles, microsoft-fakes

我们一直在研究使用新的[Fakes 框架](http://msdn.microsoft.com/en-us/library/hh549175.aspx)来帮助我们增加在 .net 4.0 框架下运行的一些遗留代码的测试覆盖率。不幸的是，我们似乎无法升级到 .net 4.5。我是否正确地说我们不能在 .net 4.0（和 VS2012）中使用 Fakes 框架，而我们需要使用现在不受支持的 Moles 框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:38:17.320

虽然我一般不喜欢鼹鼠，但我理解它们在围绕遗留代码进行测试时可以提供的帮助。以下是您可以考虑的其他一些工具。但说真的，我讨厌这些类型的框架，因为正确的做事方式是编写可测试的代码并重构不可测试的遗留代码（我知道这并不总是容易或可能的）。我认为 moles 摆脱了单元测试的主要好处之一，那就是它迫使你编写好的代码，如下所述：

*   [http://blog.pluralsight.com/2012/05/22/solid-code-for-solid-reasons/](http://blog.pluralsight.com/2012/05/22/solid-code-for-solid-reasons/)

这里有几点需要考虑：

*   [痣（MS Fakes](http://research.microsoft.com/en-us/projects/moles/)框架的前身）
*   [JustMock](http://www.telerik.com/products/mocking.aspx)（比 TypeMock 便宜，但仍然很贵）
*   [TypeMock](http://www.typemock.com/pricing)（贵得离谱！）

还有一个免费的轻量版 JustMock，不确定它包含什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T15:05:07.313

您应该使用 Visual Studio 2012 Ultimate 或 Premium Update 2 才能使用 Microsoft Fakes，并且单元测试可以针对早期版本的 .NET 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T00:08:14.383

我知道这不是您所要求的，但是您是否考虑/评估过非微软模拟框架？

[Rhino.Mocks](http://ayende.com/wiki/Rhino+Mocks+Documentation.ashx)非常受欢迎且功能强大，并且[FakeItEasy](https://github.com/FakeItEasy/FakeItEasy)的采用率正在[增长](http://julianjelfs.wordpress.com/2011/03/30/why-fakeiteasy-beats-rhino-mocks/)。它的文档并不丰富，但非常直观且易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:24:37.737

我正在用假货测试 3.5 程序集，它自己的假货测试是为 4.5 编译的。我没有尝试为 3.5 编译它们，但它们不打算在部署机器上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:02:44.443

Microsoft Fakes 框架支持与 Visual Studio 2012 本身相同的 .NET 版本。这包括版本 4.5、4.0、3.5、3.0 和 2.0。

# java - 无法立即停止 midi 序列

> ID：12352660
> 
> 赞同：0
> 
> 时间：2012-09-10T13:23:08.483
> 
> 标签：java, midi

[我使用了与问题Terminate Java Midi output](https://stackoverflow.com/questions/5972603/terminate-java-midi-output)的查询者相同的 javax.sound.midi 示例。那里的问题是关于在播放一次后终止序列而不是循环它。

我想知道如何“注入”一个命令来告诉音序器（或者更确切地说是合成器？）只需按一下按钮就停止播放。

到目前为止，我已经尝试关闭合成器和音序器，但声音仍在播放。同样，删除轨道或关闭通道中的所有音符（如[Java stop MIDI 播放](https://stackoverflow.com/questions/3779434/java-stop-midi-playback)中所建议的）都不起作用：

```
if (synth != null) {
        javax.sound.midi.MidiChannel[] channels = synth.getChannels();

        channels[0].allNotesOff();
        channels[0].allSoundOff();
    } 
```

我希望能够在停止当前序列后播放另一个序列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:45:20.340

据我了解，Sun JRE 中的 Midi 支持使用完全外部（和本机）的 midi 实现。我自己也遇到了一些问题（音量控制无法正常工作，例如将音量设置为 0 并且仍然可以听到。音质也远低于其他 midi 播放器的音质）。您无法轻松解决的本机绑定可能存在限制。

我通过切换到[Gervill](http://java.net/projects/gervill/downloads)解决了我的问题，这是一个纯 java 实现，旨在替代原生 java midi 支持（存在许可证问题，阻止 midi 部分作为开​​源发布）。AFAIK 他们没有因为任何原因切换，但也许他们仍然会在未来的 Java 版本中。

# java - JComboBox 和 JSpinner 的区别

> ID：12352665
> 
> 赞同：8
> 
> 时间：2012-09-10T13:23:32.877
> 
> 标签：java, swing, jcombobox, jspinner

我正在用 Java swing 编写一个 Java 桌面实用程序，并且其中有一个最小的 GUI 部分，大部分工作都是在服务器端即后端完成的。所以，我不想花很多时间在 GUI 部分，学习不同的控件和小部件。问题是 Swing 有两个控件用于（对我而言）相同的任务，即下拉菜单，它们是`JComboBox`，`JSpinner`我不知道有什么区别，我不希望有任何限制会阻碍我在选择后完成我的任务一。

我必须使用下拉菜单来显示`List<String>`从 DataBase 返回的内容，它可以有多达数千个值。为了防止用户滚动，我将使用起始字母作为输入，否则会有一些类别限制，因此我可能会使用特定的值从`List<String>`. 我希望我的程序尽可能高效，并且在前端花费最少的时间，因为后端有很多操作。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:28:10.317

关键区别在于模型：[`SpinnerModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SpinnerModel.html)实现创建了*一系列*值，而 a[`ComboBoxModel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ComboBoxModel.html)没有。如果 a 中的对象`SpinnerModel`没有合适的自然顺序，则需要强加一个。

实际上，正如@mKorbel 的[回答](https://stackoverflow.com/a/12352869/230513)中所建议的那样，“数千个价值”将受益于辅助方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T13:34:41.617

*   你发出谈论[AutoComplete JComboBox / JTextField](https://stackoverflow.com/search?q=user:714968%20autocomplete)

*   也可以通过一些努力来应用 ( `AutoComplete JTextField`)`JSpinner`

> 我必须使用下拉列表来显示从数据库返回的列表，它可以有多达数千个值。

*   上面提到`JComponents`的都是基于过早的数组，可能需要转换`java.util.List`为`String[]`or `Vector`（取决于你的代码逻辑）

*   没有一个 GUI 被指定用来保存数千个值，看看`Paginations for Databases engine`

*   上面提到`AutoComplete JComboBox / JTextField`的作品在今天的 PC 上没有任何问题，最多 2k 行

*   用于从您查看的最大数组中搜索或选择`Stepped JComboBox`（大约两个或更多`JComboBoxes`）

    1.st 减少选择`[0-9, A-Z]`

    2.nd 用于搜索开始的记录`with A`（例如）

*   将事件重定向`Database`到后台任务并使用`SwingWorker`或`Runnable#Thread`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T13:31:16.467

`JComboBox`适合您的要求。`JComboBox`适用于显示值列表。当您想要在 Spinner 的文本字段上执行一些功能（例如递增/递减）时，可以使用 JSpinner。

本[Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)解释了`JSpinner`关于`JComboBox`. 还有一个演示应用程序。

# javascript - 阻止浏览器对 keydown-event 做出反应，但不取消该事件

> ID：12352667
> 
> 赞同：0
> 
> 时间：2012-09-10T13:23:38.773
> 
> 标签：javascript, events

在我的 JavaScript 中，我需要捕捉键盘事件。
但是，当按下某些键时，浏览器会执行某些操作，例如如果按下退格键则转到上一页，或者如果按下则滚动到页面底部`spacebar`。

我可以通过例如捕获`keydown`事件并调用来停止这些浏览器操作`event.preventDefault()`。但是，如果我调用`event.preventDefault()`事件`keydown`，`keypress`并且`keyup`事件永远不会发生。

我需要能够阻止`keydown`事件的默认浏览器行为，并且在它们被释放时仍然捕获相同的键。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:35:07.483

> However, if I call event.preventDefault() on the keydown event the keypress and keyup events never occur.

You didn't cancel the **events themselves**, you just cancelled the **browser default actions (i.e. the *default registered event handlers*)** with preventDefault - which is exactly what you wanted - but you now want to specify your own keyup and/or keypress ***event handler***, right? The events keyup and keypress are still there, it's just that they probably have no event handlers. Perfect! So now of course "nothing happens" - *you* took the default event handlers out like you wanted to for "keydown" event, and there were probably no other event handlers registered to the keyup and keypress events so there were no more actions (handlers) to fire anymore!

So from your same event keydown handler, right after you call `event.preventdefault()`, you can say `$('#whatever').on('keyup',function(){console.log('key is up now')})` for example. I mean just bind keyup directly now from same keydown handler to whatever function you desire and I believe that when key goes up it should actually fire that function (i.e. event handler) that you bound to that event.

# c# - 比较Word文件和文件夹中的图片？

> ID：12352671
> 
> 赞同：1
> 
> 时间：2012-09-10T13:23:52.330
> 
> 标签：c#, ms-word

所以我使用 Word.Interloop 并且为了比较两张图片，我想我必须将当前图片（在 word 文件中）转换为位图图像，然后将其与桌面上的位图图像对象进行比较？或者也许这是一种更简单的方法？

```
Word.InlineShape x;
x.isEqual( Picture from Desktop/ bitmapImage.Object); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:40:11.830

我制作了一个小样本，展示了如何实现这一点。主要思想是将桌面上的图像表示为一个`Bitmap`实例，然后将其逐个像素地与`Bitmap`文档中的实例进行比较。比较的方法是首先将内联形状复制到剪贴板，然后将其转换为`Bitmap`，然后将其与参考（来自桌面）进行比较 - 首先按大小，然后逐个像素。

该示例使用 .NET 4.5、Microsoft Office 对象库版本 15.0 和 Microsoft Word 对象库版本 15.0 实现为 C# 控制台应用程序。

```
using System;
using System.Drawing;
using System.Threading;
using System.Windows.Forms;
using Application = Microsoft.Office.Interop.Word.Application;

namespace WordDocStats
{
    class Program
    {
        // General idea is based on: https://stackoverflow.com/a/7937590/700926
        static void Main()
        {
            // Open a doc file
            var wordApplication = new Application();
            var document = wordApplication.Documents.Open(@"C:\Users\Username\Documents\document.docx");

            // Load the image to compare against.
            var bitmapToCompareAgainst = new Bitmap(@"C:\Users\Username\Documents\image.png");

            // For each inline shape, do a comparison
            // By inspection you can see that the first inline shape have index 1 ( and not zero as one might expect )
            for (var i = 1; i <= wordApplication.ActiveDocument.InlineShapes.Count; i++)
            {
                // closure
                // http://confluence.jetbrains.net/display/ReSharper/Access+to+modified+closure
                var inlineShapeId = i; 

                // parameterized thread start
                // https://stackoverflow.com/a/1195915/700926
                var thread = new Thread(() => CompareInlineShapeAndBitmap(inlineShapeId, bitmapToCompareAgainst, wordApplication));

                // STA is needed in order to access the clipboard
                // https://stackoverflow.com/a/518724/700926
                thread.SetApartmentState(ApartmentState.STA);
                thread.Start();
                thread.Join();
            }

            // Close word
            wordApplication.Quit();
            Console.ReadLine();
        }

        // General idea is based on: https://stackoverflow.com/a/7937590/700926
        protected static void CompareInlineShapeAndBitmap(int inlineShapeId, Bitmap bitmapToCompareAgainst, Application wordApplication)
        {
            // Get the shape, select, and copy it to the clipboard
            var inlineShape = wordApplication.ActiveDocument.InlineShapes[inlineShapeId];
            inlineShape.Select();
            wordApplication.Selection.Copy();

            // Check data is in the clipboard
            if (Clipboard.GetDataObject() != null)
            {
                var data = Clipboard.GetDataObject();

                // Check if the data conforms to a bitmap format
                if (data != null && data.GetDataPresent(DataFormats.Bitmap))
                {
                    // Fetch the image and convert it to a Bitmap
                    var image = (Image)data.GetData(DataFormats.Bitmap, true);
                    var currentBitmap = new Bitmap(image);
                    var imagesAreEqual = true;

                    // Compare the images - first by size and then pixel by pixel
                    // Based on: http://www.c-sharpcorner.com/uploadfile/prathore/image-comparison-using-C-Sharp/
                    if(currentBitmap.Width == bitmapToCompareAgainst.Width && currentBitmap.Height == bitmapToCompareAgainst.Height)
                    {
                        for (var i = 0; i < currentBitmap.Width; i++)
                        {
                            if(!imagesAreEqual)
                                break;

                            for (var j = 0; j < currentBitmap.Height; j++)
                            {
                                if (currentBitmap.GetPixel(i, j).Equals(bitmapToCompareAgainst.GetPixel(i, j)))
                                    continue;

                                imagesAreEqual = false;
                                break;
                            }
                        }
                    }
                    else
                    {
                        imagesAreEqual = false;
                    }
                    Console.WriteLine("Inline shape #{0} is equal to the 'external' bitmap: {1}", inlineShapeId, imagesAreEqual);
                }
                else
                {
                    Console.WriteLine("Clipboard data is not in an image format");
                }
            }
            else
            {
                Console.WriteLine("Clipboard is empty");
            }
        }
    }
} 
```

参考：

*   带参数的线程开始：[https ://stackoverflow.com/a/1195915/700926](https://stackoverflow.com/a/1195915/700926)
*   从 C# 中的单词中提取内联形状作为图像： [https ://stackoverflow.com/a/7937590/700926](https://stackoverflow.com/a/7937590/700926)
*   比较 C# 中的图像： [http ://www.c-sharpcorner.com/uploadfile/prathore/image-comparison-using-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/prathore/image-comparison-using-C-Sharp/)
*   有关如何在 C# 中从剪贴板中检索图像的详细信息：[https ://stackoverflow.com/a/998825/700926](https://stackoverflow.com/a/998825/700926)
*   有关如何从 C# 访问剪贴板的详细信息：[https ://stackoverflow.com/a/518724/700926](https://stackoverflow.com/a/518724/700926)

# javascript - 仅在页面验证后刷新页面

> ID：12352672
> 
> 赞同：1
> 
> 时间：2012-09-10T13:23:56.183
> 
> 标签：javascript, jquery, validation, page-refresh

嗨，我想知道是否有人可以帮助我。

我已经将这个页面放在一起，[该](http://www.mapmyfinds.co.uk/chris/test.php)页面具有有效的“客户端”和“服务器”端验证。

我现在要做的是在页面通过验证后添加页面刷新和“滚动到顶部”。

在第一个链接中使用的脚本中，我添加了以下代码来尝试调用此功能：

```
setTimeout(function() {
    $('body').fadeOut(400, function() {
        location.reload();
        setTimeout(function() {
            $('body').fadeIn(400);
        }, 500);
        window.scrollTo(x - coord, y - coord);
    });
}, 2000); 
```

我遇到的问题是，无论表单是否通过验证，页面都会刷新，如[本](http://www.mapmyfinds.co.uk/chris/test2.php)页面所示。所以完整的 JavaScript 代码如下所示：

**更新后 - 通过与@rahul 合作，我现在有了一个如下的工作解决方案。注意我只需要更改 JavaScript 代码**

```
 <script type="text/javascript">
        jQuery(document).ready(function(){
            jQuery("#addlocation").validationEngine();
            $("#addlocation").bind("jqv.field.result", function(event, field, errorFound, prompText){ console.log(errorFound) })
        });
    </script>
<script type="text/javascript">
$(document).ready(function(){
    $('#addlocation').submit(function(){

        //check the form is not currently submitting
        if($(this).data('formstatus') !== 'submitting'){

            //setup variables
            var form = $(this),
                formData = form.serialize(),
                formUrl = form.attr('action'),
                formMethod = form.attr('method'), 
                responseMsg = $('#saverecordresponse');

            //add status data to form
            form.data('formstatus','submitting');

            //show response message - waiting
            responseMsg.hide()
                       .addClass('response-waiting')
                       .text('Please Wait...')
                       .fadeIn(200);

            //send data to server for validation
            $.ajax({
                url: formUrl,
                type: formMethod,
                data: formData,
                success:function(data){

                    //setup variables
                    var responseData = jQuery.parseJSON(data), 
                        klass = '';

                    //response conditional
                    switch(responseData.status){
                        case 'error':
                            klass = 'response-error';
                        break;
                        case 'success':
                            klass = 'response-success';
                        break;  
                    }

                    //show reponse message
                    responseMsg.fadeOut(200,function(){
                        $(this).removeClass('response-waiting')
                               .addClass(klass)
                               .text(responseData.message)
                               .fadeIn(200,function(){
                                   //set timeout to hide response message
                                   setTimeout(function(){
                                       responseMsg.fadeOut(200,function(){
                                           $(this).removeClass(klass);
                                           form.data('formstatus','idle');
                                       });
                                   },3000)
                                   if (klass=='response-success')
                               {
                                   setTimeout(function () {
                                   $('body').fadeOut(400, function () {
                                       location.reload();
                                       setTimeout(function () {
                                           $('body').fadeIn(400);
                                       }, 500);
                                       window.scrollTo(x - coord, y - coord);
                                   });
                               }, 2000);
                               }
                                });
                    });
                }
            });
        }

        //prevent form from submitting
        return false;
    });
});
</script> 
```

这是一个精简版本（我已经删除了大部分验证规则以供预览）PHP 代码与 JavaScript 一起工作并将记录保存到 MySQL 数据库。

```
<?php

    //sanitize data
    $userid = mysql_real_escape_string($_POST['userid']);   
    $locationname = mysql_real_escape_string($_POST['locationname']);   
    $returnedaddress = mysql_real_escape_string($_POST['returnedaddress']); 

    if(empty($locationname)){
        $status = "error";
        $message = "You need to enter a name for this location!";
    }

    else{
            $query = mysql_query("INSERT INTO `table` (userid, locationname, returnedaddress) VALUES ('$userid', '$locationname', '$returnedaddress')");  
            if($query){ //if insert is successful
                $status = "success";
                $message = "Location Saved!";   
            }
            else { //if insert fails
                $status = "error";
                $message = "I'm sorry, there has been a technical error!";  
            }

    }

    //return json response
    $data = array(
        'status' => $status,
        'message' => $message
    );

    echo json_encode($data);
    exit;
?> 
```

我必须承认，我不确定问题出在哪里，但我是第一个承认我对 JavaScript 和 jQuery 有点陌生的人。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了，或者甚至可能建议一个更好的替代方案，以便在表单通过验证后刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:27:54.937

你可以很容易地完成它使用`return false`

检查验证是否未通过`return false`

```
if(Yourvalidation!=true)
{
return false;
} 
```

在本节之后

```
 //response conditional
                    switch(responseData.status){
                        case 'error':
                            klass = 'response-error';
                        break;
                        case 'success':
                            klass = 'response-success';
                        break;  
                    } 
```

像这样检查类的值

```
 responseMsg.fadeOut(200, function () {
                            $(this).removeClass('response-waiting')
                           .addClass(klass)
                           .text(responseData.message)
                           .fadeIn(200, function () {
                               //set timeout to hide response message
                               setTimeout(function () {
                                   responseMsg.fadeOut(200, function () {
                                       $(this).removeClass(klass);
                                       form.data('formstatus', 'idle');
                                   });
                               }, 3000)
                               if (klass=='response-success')
                               {
                                   setTimeout(function () {
                                   $('body').fadeOut(400, function () {
                                       location.reload();
                                       setTimeout(function () {
                                           $('body').fadeIn(400);
                                       }, 500);
                                       window.scrollTo(x - coord, y - coord);
                                   });
                               }, 2000);
                               }
                               else
                               {
                                   return false;  //use return false in else condition 
                               }
                           });
                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:34:35.253

您可以使用此检查`client`和侧验证`server`

```
if(Page_ClientValidate()) 
          return true;
    else 
          return false; 
```

# python - Python 无法使用 urllib 或 mechanize 检索表单

> ID：12352674
> 
> 赞同：5
> 
> 时间：2012-09-10T13:24:03.547
> 
> 标签：python, forms, urllib2, mechanize, urllib

我正在尝试使用 Python 填写并提交表单，但我无法检索结果页面。我已经尝试过 mechanize 和 urllib/urllib2 方法来发布表单，但都遇到了问题。

我要检索的表格在这里：http: [//zrs.leideuniv.nl/ul/start.php](http://zrs.leidenuniv.nl/ul/start.php)。该页面是荷兰语，但这与我的问题无关。值得注意的是，表单操作重定向到[http://zrs.leideuniv.nl/ul/query.php](http://zrs.leidenuniv.nl/ul/query.php)。

首先，这是我尝试过的 urllib/urllib2 方法：

```
import urllib, urllib2
import socket, cookielib

url = 'http://zrs.leidenuniv.nl/ul/start.php'
params = {'day': 1, 'month': 5, 'year': 2012, 'quickselect' : "unchecked",
          'res_instantie': '_ALL_', 'selgebouw': '_ALL_', 'zrssort': "locatie",
          'submit' : "Uitvoeren"}
http_header = {  "User-Agent" : "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.46 Safari/535.11",
                 "Accept" : "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
                 "Accept-Language" : "nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4" }

timeout = 15
socket.setdefaulttimeout(timeout)

request = urllib2.Request(url, urllib.urlencode(params), http_header)
response = urllib2.urlopen(request)

cookies = cookielib.CookieJar()
cookies.extract_cookies(response, request)
cookie_handler = urllib2.HTTPCookieProcessor(cookies)
redirect_handler = urllib2.HTTPRedirectHandler()

opener = urllib2.build_opener(redirect_handler, cookie_handler)

response = opener.open(request)
html = response.read() 
```

但是，当我尝试打印检索到的 html 时，我得到的是原始页面，而不是表单操作所指的页面。因此，任何关于为什么不提交表单的提示将不胜感激。

因为上面的不行，我也尝试使用mechanize提交表单。但是，这会导致带有以下代码的 ParseError：

```
import mechanize

url = 'http://zrs.leidenuniv.nl/ul/start.php'
br = mechanize.Browser()
response = br.open(url)
br.select_form(nr = 0) 
```

最后一行以以下内容退出：“ParseError：声明中的意外'-'字符”。现在我意识到这个错误可能表明 DOCTYPE 声明中存在错误，但由于我无法编辑表单页面，我无法尝试不同的声明。对此错误的任何帮助也非常感谢。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:52:59.777

这是因为`DOCTYPE`零件格式不正确。

它还包含一些奇怪的标签，例如：

```
<!Co Dreef / Eelco de Graaff Faculteit der Rechtsgeleerdheid Universiteit Leiden><!e-mail j.dreef@law.leidenuniv.nl > 
```

尝试自己[验证](http://validator.w3.org/)页面...

* * *

尽管如此，你可以去掉垃圾来让 mechanizes html 解析器开心：

```
import mechanize

url = 'http://zrs.leidenuniv.nl/ul/start.php'

br = mechanize.Browser()
response = br.open(url)
response.set_data(response.get_data()[177:])
br.set_response(response)

br.select_form(nr = 0) 
```

# myeclipse - Myeclipse 中删除部署的问题

> ID：12352676
> 
> 赞同：0
> 
> 时间：2012-09-10T13:24:06.753
> 
> 标签：myeclipse

我正在尝试从 Myeclipse 蓝色版中删除部署。我已将 IBM Websphere 6.1 应用程序添加到服务器中。创建了 AppServer1 配置文件，然后我在那里部署了项目。现在，当我想从那里删除项目时，当我这样做时，它显示“在：“删除部署”期间发生内部错误。java.lang.UnsupportedOperationException”

我已经删除了 C:\Data\IBM\WebSphere\AppServer\profiles\AppSrv01\temp 和 C:\Data\IBM\WebSphere\AppServer\profiles\AppSrv01\wstemp 文件夹，但这也对我没有帮助。

请在同一方面提供帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:36:44.963

使用 WebSphere 管理控制台检查应用程序是否仍在部署。如果是，请尝试从管理控制台卸载应用程序。然后从配置文件的 installedApps 文件夹中删除它（如果它没有消失）。现在，当您尝试在 MyEclipse Blue 中删除部署时，我认为它会给您一个错误，说它没有安装在服务器上，但它应该从服务器连接器中删除部署记录。

如果您仍有问题，我建议您在[http://www.myeclipseide.com/forums上的 MyEclipse 论坛发帖](http://www.myeclipseide.com/forums)

# c - 如何在C中创建带有字符X的可变长度字符串

> ID：12352682
> 
> 赞同：7
> 
> 时间：2012-09-10T13:24:24.933
> 
> 标签：c, string, loops, initialization

我是 C 新手，在使用字符串时遇到了一些麻烦。如何在 C 中创建包含指定字符的可变长度字符串？这是我尝试过的，但出现编译器错误：

```
int  cLen     = 8    /* Specified Length    */ 
char chr      = 'a'; /* Specified Character */
char outStr[cLen];
int  tmp      = 0;
while (tmp < cLen-1)
  outStr[tmp++] = chr;

outStr[cLen-1] = '\0';

/* outStr = "aaaaaaaa" */ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T13:26:02.633

你可以试试：

```
char *str = malloc(cLen + 1);
memset(str, 'a', cLen);
str[cLen] = 0; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T13:38:40.240

乍一看，C 中的字符串可能不像您想要的那样灵活。

您对“char outStr[]”所做的是表明您想要一个指向 char 的指针，它可以使用数组语法进行迭代......它不会为字符创建实际存储，因为您从未提及您想要多少储藏。

在 C 中，您可以将存储与这些称为指针的特殊变量分离。想要一个可变长度字符串的例子实际上是一个很好的例子，说明为什么要这样做：*我想要一个知道存储位置的实体；我想要允许我更改存储大小的方法。*

因此，您准备好处理动态内存分配，包括

```
#include <stdlib.h> 
```

声明一个指向字符的指针

```
char *cpString; 
```

您要求分配“n”个字符

```
cpString=malloc(n*sizeof(char)); 
```

现在您可以**strcat, printf**对具有 n-1 个字符的字符串执行任何操作（因为它必须以空字符结尾）。具体来说，您现在可以使用

```
memset(cpString,X,n-1);
cpString[n]=0; 
```

它创建了一个包含 n-1 个字符的 XXXX...XXX\0 字符串。

当您想更改 cpString 存储大小时，这是棘手的部分，您需要在请求新的存储分配之前**释放分配的内存**

```
if (cpString !=0)
{
 free(cpString);
 cpString=0;
}
cpString=malloc(n*sizeof(char)); 
```

否则，动态内存存储区域（称为“堆”）会留下一个旧 n 大小的不可回收块。

有更好的分配器，不需要 free()，但我最好让你学习和练习 malloc() free() 的用法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T13:26:56.823

没有必要使用`strncat()`，字符串只是字符数组，所以直接逐个字符地进行赋值：

```
void repeated_string(char *out, size_t len, char v)
{
  for(; len > 0; --len)
    *out++ = v;
  *out = '\0';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T13:45:31.017

您的代码有两个问题：

1）长度（可能）不是你所期望的。你有：

```
int cLen = 8; /* Specified Length */ 
```

大概你想要一个长度为 8 的字符串。因为你必须添加一个 NULL 终止符，所以你现在只能得到一个长度为 7 的字符串。如果这就是您想要的，您应该更新您的评论以明确表示：

```
int cLen = 9; /* Specified Length (8) + 1 for NULL */ 
```

2）您没有正确分配字符：

```
char chr = "a"; 
```

是不正确的。字符用单引号指定：

```
char chr = 'a'; 
```

之后，您的代码应该可以工作。

# c++ - VS2010 中使用 list_of 的模糊调用

> ID：12352692
> 
> 赞同：2
> 
> 时间：2012-09-10T13:24:46.153
> 
> 标签：c++, visual-c++, boost, compiler-errors

我正在尝试将项目从 VS2008 转换为 2010，但由于添加了移动构造函数（并且可能是这里有嵌套的 list_of 的事实）而遇到了问题。以下代码片段显示了错误（在实际代码中，这些构造用于初始化一些静态）：

```
enum some_enum {R, G, B};

typedef std::pair<some_enum, some_enum> Enum_Pair;
typedef std::vector<some_enum> Enum_list;
typedef std::pair<Enum_Pair, Enum_list> Some_Struct;
typedef std::list<Some_Struct> Full_Struct;

#define MAKEFULLSTRUCT(First_, Second_, some_enums)\
    (Some_Struct(Enum_Pair(First_, Second_), list_of (some_enums) ))

int main()
{
    int i = G;
    Full_Struct test_struct = list_of
        MAKEFULLSTRUCT(R, R, R).to_container(test_struct);
} 
```

这导致

```
error C2668: 'std::vector<_Ty>::vector' : ambiguous call to overloaded function
with  [_Ty=some_enum]
vector(593): could be 'std::vector<_Ty>::vector(std::vector<_Ty> &&)'
with  [ _Ty=some_enum]
vector(515): or       'std::vector<_Ty>::vector(unsigned int)'
with  [ _Ty=some_enum]
while trying to match the argument list '(boost::assign_detail::generic_list<T>)'
with  [ T=some_enum ] 
```

有没有办法在仍然使用 boost::list_of 的同时解决这个问题？还是我必须切换到另一种初始化机制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T03:57:14.813

这看起来像 Boost.Assign 中的一个错误。的返回类型`list_of`具有到类型的通用转换，而根本`T`没有尝试约束`T`。因此，任何一个`std::vector`构造函数——一个接受 a`std::vector &&`的一个和一个接受 a 的`unsigned int`——都同样好，从而导致歧义。

您的解决方法是使用`convert_to_container`，如下所示：

```
#define MAKEFULLSTRUCT(First_, Second_, some_enums)\
    (Some_Struct(Enum_Pair(First_, Second_), \
        list_of(some_enums).convert_to_container<Enum_list>())) 
```

# php - 如何在 PHP 中反序列化 Perl Data::Dumper 输出

> ID：12352695
> 
> 赞同：6
> 
> 时间：2012-09-10T13:24:55.440
> 
> 标签：php, perl, serialization, data-dumper

我在 Perl 中有一个导出变量的结果，如下所示：

```
$VAR1 = {
    'guard' => undef,
    'work_hand' => undef,
    'images' => 
        {'1' => 
            {
            'mini_height' => 150,
            'width' => 150,
            'extension' => 'jpg',
            'filename' => 'object_1.1330907414.96873.jpg',
            'mini_width' => 150,
            'class' => 'Ontico::Image',
            'height' => 150,
            'mini_filename' => 'object_1.1330907414.96873.mini.jpg',
            'size' => 26053,
            'symname' => 'big_logo'
            },
        '2' => 
            {
            'width' => 48,
            'extension' => 'jpg',
            'alt' => 'Даниэле Галлоппа',
            'height' => 48,
            'mini_filename' => 'object_91.1235312905.mini.jpg',
            'size' => 12809,
            'symname' => 'logo',
            'mini_height' => 150,
            'filename' => 'object_91.1235312905.jpg',
            'mini_width' => 150,
            'class' => 'Ontico::Image'
            }
        },
        'show_league_banner' => 0,
        'back_hand' => undef,
        'weight_category' => undef,
        'stick_position' => undef
    }; 
```

如何在 PHP 中反序列化这些数据？

**PS 我已经在 DB 中有这种格式的数据，我不能将其更改为 json 或其他格式。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T14:20:55.500

您有很多建议尝试以一种或另一种方式解析它，但真正的问题是为什么？

为什么不只用一个小的 Perl 程序来加载它，然后输出一个等效的 JSON 字符串。

然后，您可以在 PHP 中调用该 Perl 程序来进行转换；这意味着您正在使用 Perl 来读取 Perl 格式，这将保证正确的转换。

或者（更好的是）对整个数据库批量运行它，以摆脱数据库中特定于 Perl 的数据格式；那么你可以只使用 PHP 的标准 JSON 函数。

这样一来，您的 PHP 代码（或您以后需要用来读取数据的任何其他语言）中的生活就会变得如此简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T14:35:28.230

显而易见且唯一可靠的解决方案是使用 Perl 将输入反序列化并重新序列化为标准格式。可以完成这项任务的 Perl 程序也不需要很大。

```
// receive input in Perl's Data::Dumper format and produce PHP object output
function perl_dd_to_php( $dd_output ) {
    $process = proc_open( "perl -000 -MJSON -e 'print encode_json eval <>'",
                          array( array("pipe","r"), array("pipe","w") ),
                          $pipes );
    fwrite($pipes[0], $dd_output );
    fclose($pipes[0]);

    $json_string = stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    return json_decode($json_string);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T14:08:03.050

由于它不是 JSON，但它看起来像 JSON，您可以尝试修改 JSON 库以使用该格式。我使用了这个[JSON 库](http://pear.php.net/pepr/pepr-proposal-show.php?id=198)，替换`:`为`=>`并添加`undef`，如您[在此处](http://pastie.org/4695861)看到的（第 496、671 和 681 行）。这非常简单，真的，我假设您可以以类似的方式解决其他差异。

结果是：

```
stdClass Object
(
    [guard] => 
    [work_hand] => 
    [images] => stdClass Object
        (
            [1] => stdClass Object
                (
                    [mini_height] => 150
                    [width] => 150
                    [extension] => jpg
                    [filename] => object_1.1330907414.96873.jpg
                    [mini_width] => 150
                    [class] => Ontico::Image
                    [height] => 150
                    [mini_filename] => object_1.1330907414.96873.mini.jpg
                    [size] => 26053
                    [symname] => big_logo
                )

            [2] => stdClass Object
                (
                    [width] => 48
                    [extension] => jpg
                    [alt] => Даниэле Галлоппа
                    [height] => 48
                    [mini_filename] => object_91.1235312905.mini.jpg
                    [size] => 12809
                    [symname] => logo
                    [mini_height] => 150
                    [filename] => object_91.1235312905.jpg
                    [mini_width] => 150
                    [class] => Ontico::Image
                )

        )

    [show_league_banner] => 0
    [back_hand] => 
    [weight_category] => 
    [stick_position] => 
) 
```

那是你要找的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T13:27:36.753

```
use JSON; 
```

（或任何其他数据交换格式，如 XML）

[CPAN](http://search.cpan.org/perldoc?JSON)提供 JSON 文档和示例

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T13:56:39.367

如果您可以更改 Perl 代码，则[按照 amon 的建议](https://stackoverflow.com/a/12352746)进行操作，并使用可以在 PHP 中反序列化的一些标准序列化格式，例如[JSON](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm)、[XML](http://search.cpan.org/~mikewong/XML-Dumper-0.81/Dumper.pm)或[YAML 。](http://search.cpan.org/~mstrout/YAML-0.84/lib/YAML/Any.pm)

如果你真的想要的话，你甚至可以[让 Perl 输出 PHP 的原生序列化格式](http://search.cpan.org/~bobtfish/PHP-Serialization-0.34/lib/PHP/Serialization.pm)，尽管我通常不建议这样做。（当你接下来想在 Python 中反序列化相同的数据时呢？）

如果您*无法*更改 Perl 代码，则只能硬着头皮尝试在 PHP中解析[Data::Dumper输出。](http://perldoc.perl.org/Data/Dumper.html)我找不到任何现有的代码来做到这一点，所以看起来你可能必须自己编写。这可能是[解析器生成器](https://stackoverflow.com/questions/tagged/parser-generator+php)的工作，尽管格式（通常）足够简单，您可能只需手动编码即可。

* * *

**编辑：**既然你说你在数据库中有这个序列化数据，为什么不写一个*Perl*程序来读取数据并将其转换为更标准的序列化格式，如 JSON？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T13:56:45.317

*既然你说你不能改变格式：*

我不喜欢使用 eval，但是因为您的语法与预期的 PHP 数组语法*非常*接近，所以我认为我们可以让它滑动。

设置`$string`等于数据库中符合以下格式的内容。请参阅下面的使用您提供的数据的工作示例。在一天结束时，PHP 会将 perl var 开头的变量设置为新的解析数组。

由于它将是一个文本块/大字符串，请执行以下操作：

```
<?php
$string = "\$VAR1 = {
    'guard' => undef,
    'work_hand' => undef,
    'images' =>
        {'1' =>
            {
            'mini_height' => 150,
            ... // truncated for readability
    };";

$res = str_replace(array("{", "}", 'undef'), array("array(", ")", "''"), $string);

eval($res);

print_r($VAR1); 
```

你的结果是：

```
Array
(
    [guard] =>
    [work_hand] =>
    [images] => Array
        (
            [1] => Array
                (
                    [mini_height] => 150 ... 
```

**注意：**我建议您现在花时间将数据库内容改造和升级为更标准的格式，只是因为将来更容易维护。

您可以遍历数据库，逐行获取所有内容，然后将数据运行到上面的函数中，然后将其包装`json_encode()`并使用新的 JSON 字符串更新数据库行。这将使您在未来免于头疼，并允许您为新标准更新所有数据。

# python - Django 应用程序之间的名称冲突

> ID：12352700
> 
> 赞同：0
> 
> 时间：2012-09-10T13:25:06.883
> 
> 标签：python, django, django-cms

简短的问题...我已经编写了自己的名为 cms 的 Django 应用程序（很久以前），现在我们想开始使用 django-cms。问题是 django-cms 也存在于 cms 命名空间中（例如，表以 开头`cms_`）。两个应用程序都使用至少一个表 ( `cms_page`)。

有什么方法可以让它工作而不涉及重命名其中一个应用程序..？

# ruby-on-rails - 有没有办法捕获所有以某事结尾的 URL？也许正则表达式匹配请求网址，并选择忽略它？

> ID：12352701
> 
> 赞同：2
> 
> 时间：2012-09-10T13:25:07.027
> 
> 标签：ruby-on-rails

我问的原因是因为有一些爬虫用无效请求困扰我的 Rails 服务器。

所以，我想知道是否可以忽略任何匹配正则表达式匹配器的 URL。

比如，wp-admin.php 或 {{.+}} 或类似的东西？

我正在使用导轨 2.3.14

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:30:24.830

您可能不希望此类请求到达 Rails 堆栈，因此我建议将工作卸载到您的 Web 服务器。然而，利用机架中间件可能是另一个可行的选择。您可以使用[3rd 方代码](https://github.com/udzura/rack-block)或编写自己的[自定义处理程序](http://guides.rubyonrails.org/rails_on_rack.html)。

# ruby-on-rails - 如何将字符串更改为方法或字段？

> ID：12352705
> 
> 赞同：0
> 
> 时间：2012-09-10T13:25:14.703
> 
> 标签：ruby-on-rails

我想让一个字符串成为一个属性：

```
Model:
    Author
    attr_accessible :book1, book2, book3 etc... 
```

我想用一个较小的命令检索 20 本书

```
def do_something 
  self.book1     
  self.book2     
  self.book3     
  ....           
end 
```

这是我想出的一个解决方案，但我怎样才能使字符串成为一个属性，以便我可以检索数据。

```
def do_something             
  count = 0                  
  10.times do                
    self."book#{count += 1}"  
  end                        
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:32:24.033

这将起作用：

```
def do_something             
  count = 0                  
  10.times do                
    self.send("book#{count += 1}")  
  end                        
end 
```

也试试这个，它更简单，它应该也可以工作：`self[:book1]`或`self['book1']`

顺便说一句，这是奇怪的设计。考虑改用书籍数组：

```
attr_accessible :books

...

self.books.each { |book| puts book }

self.books[0] # etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:32:26.987

您可以使用`eval`.

```
10.times do
  eval("self.book#{count} = count}")
end 
```

# android - 如何从指定的uri读取图片文件

> ID：12352709
> 
> 赞同：1
> 
> 时间：2012-09-10T13:25:24.957
> 
> 标签：android, android-layout, android-intent, android-widget

我正在尝试使用光标从我这里读取 URI 中指定的文件。但我无法弄清楚错误似乎不是从我指示的路径中读取的

这是代码：

```
 public static Uri getRandomImage(ContentResolver resolver) {

    String[] projection = new String[] {
        BaseColumns._ID,

    };

    Uri uri = Media.getContentUri("/sdcard/DCIM/Wallpaper/");

    String[] selectionArgs = null; // there is no ? in selection so null here

    String sortOrder = null; // unordered
    Cursor cursor = resolver.query(uri, projection, null, selectionArgs, sortOrder);

    if (cursor == null || cursor.getCount() <= 0) {
            return null;
    }

    cursor.moveToPosition(new Random().nextInt(cursor.getCount()));

    return Uri.withAppendedPath(uri, cursor.getString(0));
} 
```

这是出现新错误的代码：

```
ParcelFileDescriptor pfd;

    try {
        pfd = context.getContentResolver().openFileDescriptor(uri, "r"); //line with error
    } catch(FileNotFoundException fnfe) {
        Log.e(LOG_TAG, Log.getStackTraceString(fnfe));
        return null;
    } 
```

这是日志猫：

```
E/it.bisemanuDEV.slidepuzzle.TileView(11188): java.io.FileNotFoundException: No content provider: 
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:464)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.content.ContentResolver.openFileDescriptor(ContentResolver.java:380)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at it.bisemanuDEV.slidepuzzle.TileView.getImageFromUri(TileView.java:560)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at it.bisemanuDEV.slidepuzzle.TileView.onDraw(TileView.java:239)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6741)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6744)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6744)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.View.draw(View.java:6744)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewRoot.draw(ViewRoot.java:1407)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.os.Handler.dispatchMessage(Handler.java:99)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.os.Looper.loop(Looper.java:123)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at android.app.ActivityThread.main(ActivityThread.java:4627)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at java.lang.reflect.Method.invokeNative(Native Method)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at java.lang.reflect.Method.invoke(Method.java:521)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/it.bisemanuDEV.slidepuzzle.TileView(11188):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:00:06.927

您可能误解了方法的`volumeName`参数`getContentUri()`。

它应该是“内部”或“外部”之一（请参阅[MediaStore.Images.Media.getContentUri(String volumeName):Uri 做了什么？](https://stackoverflow.com/questions/8947692/what-does-mediastore-images-media-getcontenturistring-volumenameuri-do)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:29:37.870

该类`MediaStore.Files`仅从 API 级别 11 开始可用（请参阅[http://developer.android.com/reference/android/provider/MediaStore.html](http://developer.android.com/reference/android/provider/MediaStore.html)）。

如果您尝试在具有较低 android 版本的设备上使用它，您将收到此错误。

# regex - 如何将 grep 与正则表达式的交替部分一起使用？

> ID：12352712
> 
> 赞同：0
> 
> 时间：2012-09-10T13:25:31.657
> 
> 标签：regex, grep, regex-alternation

我想 grep 八月或九月的所有日期（`mm/dd/yyyy`带有前导零的日期格式）。

我试过：

```
grep '0\(8\|9\)/[0-9][0-9]/2012' 
```

但命令提示符输出：

> 该系统找不到指定的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:32:56.047

`grep`想要一个正则表达式和一个文件名。错误消息看起来像您以某种方式传递了无效的文件名。假设包含日志条目的文件名为`log`，试试这个；

```
grep '0[89]/[0-9][0-9]/2012' log 
```

（我还稍微调整了你的正则表达式。）

# caching - Solr 缓存和排序

> ID：12352714
> 
> 赞同：1
> 
> 时间：2012-09-10T13:25:57.047
> 
> 标签：caching, solr, lucene

我们的 solr 索引 (Solr 3.4) 拥有超过 1 亿份文档。
我们经常在这个索引上触发一种类型的查询来获取文档，进行一些处理并转储到另一个索引中。

查询格式为 -
*((keyword1 AND keyword2...) OR (keyword3 AND keyword4...) OR ...) AND date:[date1 TO *]*
关键字的数量可以在 100 - 1000 范围内.
我们正在添加排序参数*'date asc'*。
查询的关键字部分很少更改，但日期部分总是更改。

现在主要有2个问题，
1）查询时间太长。
2）有时当'numFound'对于查询来说非常大时，它会给出OOM错误（我猜这是因为排序）。

我们还没有使用任何类型的缓存。
缓存是否有助于解决这些问题？
如果是，什么类型的缓存或缓存配置适合开始？

# ms-access - 使用 SQL 查询更改表中的字段顺序

> ID：12352715
> 
> 赞同：0
> 
> 时间：2012-09-10T13:25:58.047
> 
> 标签：ms-access, ms-access-2010

我正在使用 ALTER TABLE 语句向现有表添加新字段。是否可以通过查询更改字段索引，以便该字段不在设计器模式中的最后一个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:29:47.667

我不相信，不。除了在`SELECT`使用它们的任何语句中重新排序列之外，实际重新排序物理表需要：

*   使用预期的列顺序创建一个新表；
*   将现有表中的所有数据复制到新表中；
*   删除现有表；
*   将新表重命名为前一个表的名称。

自然，在单个原子操作中完成所有这些操作非常重要，这样在第 2 步和第 3 步之间就不会丢失数据。因此，在完成此操作的时间窗口内切断应用程序访问是一个好主意。

# jquery - 复制一个选择元素的内部 html 并将其粘贴到一个新的、动态创建的选择元素中

> ID：12352719
> 
> 赞同：0
> 
> 时间：2012-09-10T13:26:01.890
> 
> 标签：jquery, html, select

当页面第一次加载时，我有一个选择元素填充了多个选项嵌套元素。

旁边是一个“添加”按钮，它动态添加一个新的选择元素，旁边有一个按钮“添加”。

我想知道如何将选项元素从第一个选择元素复制到每个后续使用 jQuery 动态创建的选择元素中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T13:29:11.223

如果我理解您正确，您想将选项从一个选项复制到其他选项吗？如果是这样，这应该有效（未经测试）：

```
(function($) {
    $('a').click(function() {
        var $options = $('.theSelect option').clone();
        $('.otherSelects').append($options);

        $newSelect = $('<select></select>').append($options);

        $('body').append($newSelect);

        return false;
    });
})(jQuery);​ 
```

[http://jsfiddle.net/PeeHaa/twffL/1/](http://jsfiddle.net/PeeHaa/twffL/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:30:07.593

在您的选择所在的位置创建一个 div。为 div 分配一个类。

```
<div class = "select_class">
<select>
<option>blah</option>
<select>    
<div/> 
```

现在

```
var my_var = $('.select_class').html(); 
```

现在创建一个新的 div 并将 my_var 分配给它

```
$('#new_div').html(my_var); 
```

完成 这只是基本概念

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:38:04.747

将要复制的内容放入 id 为 olddiv 的 div 中，并在要将内容复制到的位置创建一个 id 为 newdiv 的新 div。然后在olddiv中点击添加按钮，只需编写以下代码：

```
$("#addbutton").click(function()
{
  $("#newdiv").html($("#olddiv").html());
}); 
```

# javascript - 正文单击删除功能上的输入框宽度

> ID：12352721
> 
> 赞同：0
> 
> 时间：2012-09-10T13:26:03.507
> 
> 标签：javascript, mootools

我是 JavaScript 新手，我正在尝试在我的 Inputbox 上使用它。
我知道如何在单击输入框时添加宽度，但我不知道如何在单击正文时删除该功能。

看看[这个 JSFiddle](http://jsfiddle.net/r4nEv/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:27:59.917

在文本框上使用`blur`事件：

```
var box    = $$('.inputbox');    
box.addEvent('blur', function myfunction(event){    
        box.morph({width:210});
});​ 
```

见演示：http: [//jsfiddle.net/r4nEv/1/](http://jsfiddle.net/r4nEv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:28:23.287

我可能会将点击事件添加到结果中，而不是添加到文档正文中，并使用 blure 确保框已重置。这是一个快速的小提琴来证明这一点。

[http://jsfiddle.net/r4nEv/4/](http://jsfiddle.net/r4nEv/4/)

希望这可以帮助！

# windows-8 - Windows 应用商店应用程序中的设计时间数据

> ID：12352724
> 
> 赞同：0
> 
> 时间：2012-09-10T13:26:24.710
> 
> 标签：windows-8, microsoft-metro, expression-blend

在 WP7 中，我习惯于从 Blend 中的 ViewModel 生成示例数据 (XML) 并在 Visual Studio 中查看它们。

在 Blend 2012 中，我找不到生成设计时数据的选项。Visual Studio 中的模板使用在代码中生成的设计时数据。这是唯一的方法吗？没有更多的 XML 设计时数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:04:54.310

我不认为在 Blend for VS2012 中生成设计时数据是可能的，但仍然可以使用在代码中创建的设计时数据，但即使这比在 WP7 中更复杂。基本上，您必须在 XAML 中使用此构造才能使其工作：

```
<Page.Resources>
    <CollectionViewSource x:Name="imagesSource" Source="{Binding Model.Images}" 
        d:Source="{Binding Model.Images, Source={d:DesignInstance Type=local:MainViewModel, IsDesignTimeCreatable=True}}"/>
</Page.Resources> 
```

这里重要的部分是“d:DesignInstance”和“IsDesignTimeCreatable=True”，其余部分与WP7非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:11:41.713

无法像在 WP7 中那样在 XML 中使用设计时数据

# c# - 如何使用 Windows MediaCapture API 捕获“仅音频”？

> ID：12352725
> 
> 赞同：2
> 
> 时间：2012-09-10T13:26:31.530
> 
> 标签：c#, windows, audio-streaming, audio-recording

我正在尝试通过 Windows MediaCapture API 捕获“仅音频”。我正在使用以下代码，但遇到异常（HRESULT：0xC00D36D5）。

```
 MediaCapture captureMgr = new MediaCapture();   
    MediaCaptureInitializationSettings captureSettings = new MediaCaptureInitializationSettings();
    captureSettings.StreamingCaptureMode = StreamingCaptureMode.Audio;
    await captureMgr.InitializeAsync(captureSettings);
    this.CaptureVideoElement.Source = captureMgr;// exception is thrown here...
    await captureMgr.StartPreviewAsync(); 
```

请告诉我我做错了什么？或者请提出更好的出路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:24:35.083

我正在尝试做类似的事情，这就是我通过 MSDN/Samples 发现的...

```
private async void OnStartRecordingBtnClick(object sender, RoutedEventArgs e)
{
    try
    {
        m_mediaCaptureMgr = new MediaCapture();
        var settings = new MediaCaptureInitializationSettings();
        settings.StreamingCaptureMode = StreamingCaptureMode.Audio;
        await m_mediaCaptureMgr.InitializeAsync(settings);

    }
    catch (Exception exception)
    {
        // Do Exception Handling
    }
}

private async void OnStopRecordingBtnClick(object sender, RoutedEventArgs e)
{
    try
    {
        String fileName;
        if (!m_bRecording)
        {
            fileName = "audio.mp4";
            m_recordStorageFile = await Windows.Storage.KnownFolders.VideosLibrary.CreateFileAsync(fileName, Windows.Storage.CreationCollisionOption.GenerateUniqueName);
            MediaEncodingProfile recordProfile = null;
            recordProfile = MediaEncodingProfile.CreateM4a(Windows.Media.MediaProperties.AudioEncodingQuality.Auto);
            await m_mediaCaptureMgr.StartRecordToStorageFileAsync(recordProfile, this.m_recordStorageFile);
            m_bRecording = true;
        }
        else
        {
            await m_mediaCaptureMgr.StopRecordAsync();
            m_bRecording = false;
            if (!m_bSuspended)
            {
                var stream = await m_recordStorageFile.OpenAsync(Windows.Storage.FileAccessMode.Read);
                playbackElement.AutoPlay = true;
                playbackElement.SetSource(stream, this.m_recordStorageFile.FileType);
            }
        }
    }
    catch (Exception exception)
    {
        // Do Exception Handling...
        m_bRecording = false;
    }
} 
```

希望这可以帮助。这是 MSDN 链接： [在此处输入链接描述](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622/sourcecode?fileId=52175&pathId=607147175)

# objective-c - NSBitmapImageRep 到 NSMutableArray 或 NSMutableDictionary

> ID：12352727
> 
> 赞同：0
> 
> 时间：2012-09-10T13:26:35.270
> 
> 标签：objective-c, opengl, nsmutablearray, nsmutabledictionary, nsbitmapimagerep

是否可以将`NSBitmapImageRep`副本存储到`NSMutableDictionary`or `NSMutableArray`？我需要在某处保存 OpenGL 纹理的副本，以便以后使用。因此，如果我愿意`glReadPixels`，将读取的像素存储到`NSBitmapImageRep`并以某种方式将其存储到`NSMutableDictionary`或者`NSMutableArray`它会工作吗？或者也许还有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:56:52.890

是的，您可以将其存储在数组/字典中。如果您特别想在将位图代表放入数组之前对其进行复制，则可以这样做。

```
[array addObject:[bitmapRep copy]]; 
```

# oauth - 创建应用程序时我从 LinkedId 获得的 OAuth 用户令牌和 OAuth 用户密码的目的是什么

> ID：12352731
> 
> 赞同：4
> 
> 时间：2012-09-10T13:26:46.197
> 
> 标签：oauth, linkedin

在 LinkedIn 中创建新应用程序时，我得到 4 个单独的代码：

1.  API 密钥
2.  密钥
3.  **OAuth 用户令牌**
4.  **OAuth 用户密码**

我在 OAuth 流程中使用前两个。**最后两个**的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:16:05.090

在阅读了更多内容后，我认为这是我自己用户的令牌和秘密。提供它们的原因是为了简化对 LinkedIn API 的初始调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:34:53.280

我找到的最接近文档的是LinkedIn 员工的[这篇论坛帖子](http://developer.linkedin.com/comment/18961#comment-18961)。然而，这篇文章并没有澄清一切，例如：这个令牌会过期吗？此令牌是否具有所有成员权限？

基于一些实验，我怀疑答案是否定的。但我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T19:04:13.187

这基本上用于 API 测试目的，然后再继续实施应用程序，确保linkedin API 工作正常。

有关更多信息，您可以查看此链接[https://github.com/saranpal/linkedin-api-quick-start-php](https://github.com/saranpal/linkedin-api-quick-start-php)，这是获取公司信息的简单示例。

干杯!

# jquery - JQuery Ui：移动 div 元素，奇怪的行为

> ID：12352732
> 
> 赞同：0
> 
> 时间：2012-09-10T13:26:54.647
> 
> 标签：jquery, jquery-ui

请看这个jsfiddle：

[http://jsfiddle.net/5hBQ4/2/](http://jsfiddle.net/5hBQ4/2/)

这应该允许某人将物品放入库存或货架中。如果您将同一对文章移动两次，您会看到目标位置是应有位置的两倍。

我觉得我做的事情不对。必须有一个干净的方法来做到这一点。欢迎任何想法:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:04:49.307

## 概述

通过查看您的代码，您需要找到一种不同的方法。您依赖于元素的相对定位（而不是绝对定位），这意味着您的增量计算将得到非常奇怪的结果。无论如何，我会实施一种不同的方法，因为即使您创建的内容可能会在视觉上做您想要的......您没有很好的方法来检测哪个文章在哪个区域 - 因为您只是在更改文章的坐标。 ..不是他们最终进入的容器。如果您在用户完成他们的安排工作后需要对文章做任何事情，这会给您带来问题。

## 如果是我...

我将实现一个拖放界面，它实际上允许将项目从一个 UL 列表物理移动（即在 DOM 中）到另一个。拖放时您应该立即切换项目，如果您愿意，您可以在两者之间计算出漂亮的动画，但动画应该是次要的。在计算动画时，您应该确保您正在读取绝对坐标而不是相对坐标......这意味着使用`$().offset()`not`$().position()`

我会使用这样的 DOM 结构：

```
<ul class="shelf">
  <li class="article">Article I</li>
  <li class="article">Article II</li>
  <li class="article">Article III</li>
</ul>

<ul class="stock">
  <li class="article">Article IV</li>
  <li class="article">Article V</li>
  <li class="article">Article VI</li>
</ul> 
```

然后，当任何文章发生 drop 事件时，您只需要：

```
/// create a temporary element to hold our reciprocal position
var placeholder = $('<li class="placeholder"></li>');

/// insert the placeholder before the item we dragged
ui.draggable.before(placeholder);

/// now move off our dragged item and place it just before our drop item
ui.draggable.insertBefore(this);

/// now place our drop item in the DOM after our placeholder
placeholder.after(this);

/// get rid of the placeholder
placeholder.remove(); 
```

显然，这意味着切换是即时的......但是使用它作为您的基本模型，您应该能够制作动画 - 使用 .offset() 来计算放置和拖动项目的绝对位置 - 您可以制作动画一个虚假的切换（只是为了视觉上的好处）......或者你可以延迟即时切换，动画项目移动，然后完成项目在dom中交换位置。

## 其他要点

```
event.srcElement 
```

应该：

```
event.target 
```

srcElement 仅适用于 Internet Explorer，并且当您使用 jQuery 时，jQuery 将自动处理为内部资源管理器创建 .target 属性 - 所以最好使用更受支持的属性。更好的是，您不需要访问该`event`对象来获取您的放置目标，因为这应该可以通过`$(this)`

# c# - DevExpress 节点图像不起作用

> ID：12352736
> 
> 赞同：2
> 
> 时间：2012-09-10T13:27:02.087
> 
> 标签：c#, devexpress, treelist

我正在使用`DevExpress TreeList`. 我已阅读[本文](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListTreeList_GetSelectImagetopic)并按照步骤操作。

1.  创建`ImageList`并添加图标 init。
2.  TreeList 属性已设置`SelectImageList = ImageList`
3.  `TreeList.ImageIndexFieldName = "ImageID"`
4.  以下`DataTable`分配给`TreeList.DataSource`

下表给出

```
ID   Name   Parent   ImageID
1    Root     0         0
2    Node1    1         1
3    node2    2         2
4    node3    2         2 
```

问题是`TreeList`每个节点都显示相同的图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:47:19.343

我发现了这个问题，问题出在数据类型上。

在数据表中添加列时，只需提及其类型。

```
dt.Columns.Add("Parent", typeof(decimal));
dt.Columns.Add("ImageID", typeof(decimal)); 
```

# regex - 在matlab中解析文本文件

> ID：12352737
> 
> 赞同：0
> 
> 时间：2012-09-10T13:27:03.647
> 
> 标签：regex, parsing, matlab, text-parsing

我有这个txt文件：

```
BLOCK_START_DATASET

dlcdata                 L:\loads\confidential\000_Loads_Analysis_Environment\Tools\releases\01_Preprocessor\Version_3.0\Parameterfiles\Bladed4.2\DLC-Files\DLCDataFile.txt
simulationdata          L:\loads\confidential\000_Loads_Analysis_Environment\Tools\releases\01_Preprocessor\Version_3.0\Parameterfiles\Bladed4.2\DLC-Files\BladedFile.txt

outputfolder    Pfadangabe\runs_test
windfolder      L:\loads2\WEC\1002_50-2\_calc\50-2_D135_HH95_RB-AB66-0O_GL2005_towerdesign_Bladed_v4-2_revA01\_wind

referenzfile_servesea       L:\loads\confidential\000_Loads_Analysis_Environment\Tools\releases\01_Preprocessor\Version_3.0\Dataset_to_start\Referencefiles\Bladed4.2\DLC\dlc1-1_04a1.$PJ
referenzfile_generalsea     L:\loads\confidential\000_Loads_Analysis_Environment\Tools\releases\01_Preprocessor\Version_3.0\Dataset_to_start\Referencefiles\Bladed4.2\DLC\dlc6-1_000_a_50a_022.$PJ

externalcontrollerdll           L:\loads\confidential\000_Loads_Analysis_Environment\Tools\releases\01_Preprocessor\Version_3.0\Dataset_to_start\external_Controller\DisCon_V3_2_22.dll
externalcontrollerparameter     L:\loads\confidential\000_Loads_Analysis_Environment\Tools\releases\01_Preprocessor\Version_3.0\Dataset_to_start\external_Controller\ext_Ctrl_Data_V3_2_22.txt

BLOCK_END_DATASET

% ------------------------------------

BLOCK_START_WAVE
% a6*x^6 + a5*x^5 + a4*x^4 + a3*x^3 + a2*x^2 + a1*x + a0
factor_hs           0.008105;0.029055;0.153752
factor_tz               -0.029956;1.050777;2.731063
factor_tp               -0.118161;1.809956;3.452903
spectrum_gamma  3.3

BLOCK_END_WAVE

% ------------------------------------

BLOCK_START_EXTREMEWAVE

height_hs1  7.9
period_hs1  11.8

height_hs50 10.8
period_hs50 13.8

height_hred1    10.43
period_hred1    9.9

height_hred50   14.26
period_hred50   11.60

height_hmax1    14.8
period_hmax1    9.9

height_hmax50   20.1
period_hmax50   11.60

BLOCK_END_EXTREMEWAVE

% ------------------------------------

BLOCK_START_TIDE

normal  0.85
yr1 1.7
yr50    2.4

BLOCK_END_TIDE

% ------------------------------------

BLOCK_START_CURRENT

velocity_normal 1.09
velocity_yr1    1.09
velocity_yr50   1.38

BLOCK_END_CURRENT

% ------------------------------------

BLOCK_START_EXTREMEWIND

velocity_v1 29.7
velocity_v50    44.8

velocity_vred1  32.67
velocity_vred50 49.28

velocity_ve1    37.9
velocity_ve50   57

velocity_Vref   50

BLOCK_END_EXTREMEWIND

% ------------------------------------ 
```

目前我正在这样解析它：

```
clc, clear all, close all

%Find all row headers
fid = fopen('test_struct.txt','r');
row_headers = textscan(fid,'%s %*[^\n]','CommentStyle','%','CollectOutput',1);
row_headers = row_headers{1};
fclose(fid);

%Find all attributes
fid1 = fopen('test_struct.txt','r');
attributes = textscan(fid1,'%*s %s','CommentStyle','%','CollectOutput',1);
attributes = attributes{1};
fclose(fid1);

%Collect row headers and attributes in a single cell
parameters = [row_headers,attributes];

%Find all the blocks
startIdx = find(~cellfun(@isempty, regexp(parameters, 'BLOCK_START_', 'match')));
endIdx = find(~cellfun(@isempty, regexp(parameters, 'BLOCK_END_', 'match')));
assert(all(size(startIdx) == size(endIdx)))

%Extract fields between BLOCK_START_ and BLOCK_END_
extract_fields = @(n)(parameters(startIdx(n)+1:endIdx(n)-1,1));
struct_fields = arrayfun(extract_fields, 1:numel(startIdx), 'UniformOutput', false);

%Extract attributes between BLOCK_START_ and BLOCK_END_
extract_attributes = @(n)(parameters(startIdx(n)+1:endIdx(n)-1,2));
struct_attributes = arrayfun(extract_attributes, 1:numel(startIdx), 'UniformOutput', false);

%Get structure names stored after each BLOCK_START_
structures_name = @(n) strrep(parameters{startIdx(n)},'BLOCK_START_','');
structure_names = genvarname(arrayfun(structures_name,1:numel(startIdx),'UniformOutput',false));

%Generate structures
for i=1:numel(structure_names)
    eval([structure_names{i} '=cell2struct(struct_attributes{i},struct_fields{i},1);'])
end 
```

它有效，但不是我想要的。总体思路是将文件读入一个结构（每个块 BLOCK_START / BLOCK_END 一个字段）。此外，我希望将数字读取为 double 而不是 char，以及诸如“空格”“”或“;”之类的分隔符 必须读取为数组分隔符（例如 3;4;5 = [3;4;5] 和类似的）。

为了更好地澄清，我将采取块

```
BLOCK_START_WAVE
% a6*x^6 + a5*x^5 + a4*x^4 + a3*x^3 + a2*x^2 + a1*x + a0
factor_hs           0.008105;0.029055;0.153752
factor_tz               -0.029956;1.050777;2.731063
factor_tp               -0.118161;1.809956;3.452903
spectrum_gamma  3.3

BLOCK_END_WAVE 
```

该结构将被称为 WAVE

```
WAVE.factor_hs = [0.008105;0.029055;0.153752]
WAVE.factor_tz = [-0.029956;1.050777;2.731063]
WAVE.factor_tp = [-0.118161;1.809956;3.452903]
WAVE.spectrum.gamma = 3.3 
```

任何建议将不胜感激。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:04:17.003

你有[这个问题](https://stackoverflow.com/q/12247235/1336150)的答案（这也是你的）作为一个很好的起点！要将所有内容提取到元胞数组中，请执行以下操作：

```
%# Read data from input file
fd = fopen('test_struct.txt', 'rt');
C = textscan(fd, '%s', 'Delimiter', '\r\n', 'CommentStyle', '%');
fclose(fd);

%# Extract indices of start and end lines of each block
start_idx = find(~cellfun(@isempty, regexp(C{1}, 'BLOCK_START', 'match')));
end_idx = find(~cellfun(@isempty, regexp(C{1}, 'BLOCK_END', 'match')));
assert(all(size(start_idx) == size(end_idx)))

%# Extract blocks into a cell array
extract_block = @(n)({C{1}{start_idx(n):end_idx(n) - 1}});
cell_blocks = arrayfun(extract_block, 1:numel(start_idx), 'Uniform', false); 
```

现在，要将其转换为相应的结构，请执行以下操作：

```
%# Iterate over each block and convert it into a struct
for i = 1:length(cell_blocks)

    %# Extract the block
    C = strtrim(cell_blocks{i});
    C(cellfun(@(x)isempty(x), C)) = [];         %# Ignore empty lines

    %# Parse the names and values
    params = cellfun(@(s)textscan(s, '%s%s'), {C{2:end}}, 'Uniform', false);
    name = strrep(C{1}, 'BLOCK_START_', '');    %# Struct name
    fields = cellfun(@(x)x{1}{:}, params, 'Uniform', false);
    values = cellfun(@(x)x{2}{:}, params, 'Uniform', false);

    %# Create a struct
    eval([name, ' = cell2struct({values{idx}}, {fields}, 2)'])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:55:17.717

好吧，我从未使用过 matlab，但您可以使用以下正则表达式来查找块：

```
/BLOCK_START_(\w+).*?BLOCK_END_\1/s 
```

然后对于每个块，找到所有属性：

```
/^(?!BLOCK_END_)(\w+)\s+((?:-?\d+\.?\d*)(?:;(?:-?\d+\.?\d*))*)/m 
```

然后根据第二个子匹配中分号的存在，您可以将其分配为单值或多值变量。不知道如何将其翻译成 matLab，但我希望这会有所帮助！

# java - Android Test Project JUnit Failure Trace Not Showing Expected + Actual

> ID：12352738
> 
> 赞同：1
> 
> 时间：2012-09-10T13:27:06.107
> 
> 标签：java, android, testing, junit

I'm writing some tests for an Android 2.3.3 project, using the Android JUnit Test runner, and I'm seeing some weird results in the failure traces on assertions. Here's a simple example:

```
import junit.framework.TestCase;

public class TU_Test extends TestCase {

    public void testStuff() {
        assertEquals("aft", "af");
    }

} 
```

The assertion obviously fails, and here's the trace copied from Eclipse:

```
junit.framework.ComparisonFailure: expected:<...t> but was:<...>
at com.redprairie.test.TU_Test.testStuff(TU_Test.java:33)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
```

The displayed expected + actual are not very helpful... it seems to display the difference / missing characters between the two, but it would be much more helpful if I could see the full values of each. I'm normally (using JUnit 4 + not using the Android Test Runner) able to double click the failure trace in Eclipse and see a diff of the two results. Is there any way to achieve this using the Android Test Runner and it's JUnit 3 style tests? It's kind of a pain in the ass to always set breakpoints.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:42:30.537

Have you tried catching ComparisonFailure? You can call getActual() and getExpected() on the exception object to find out the values.

Take a look at the following javadoc: [http://kentbeck.github.com/junit/javadoc/4.10/org/junit/ComparisonFailure.html](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/ComparisonFailure.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:02:33.530

Since I couldn't find a real solution to this, I ended up just wrapping the assertion and building the message myself like so:

```
private void _assertEquals(String expected, String actual) {
    assertEquals("expected <" + expected + "> but was <" + actual + ">", expected, actual);
} 
```

# jquery - 列不允许，ajax 提交

> ID：12352742
> 
> 赞同：1
> 
> 时间：2012-09-10T13:27:23.677
> 
> 标签：jquery, ajax, oracle, coldfusion

我拥有的是一个表单，用于管理谁收到有关另一个 Web 应用程序的通知。这很简单：添加和删除谁收到通知。在删除字段上，我有一个 jQuery 自动完成功能，在选择时它要求用户确认删除。如果是，它会对我的coldfusion 文件进行jQuery .ajax() 调用，从Oracle 数据库中删除用户。此功能按应有的方式工作。在添加字段上，我有一个确认添加的 jQuery .change() 事件。如果是，它应该添加用户电子邮件和自动递增的 ID。这就是我的问题所在。我从服务器收到一个数据库错误，我不知道为什么。语法对我来说是正确的。我在我的应用程序的其他地方使用过这种语法并且它有效。有人看到我的问题吗？

```
<cftry>
<cfif IsDefined('URL.theAction') && URL.theAction eq 'delete'>
    <cfquery name="qDeleteUser" datasource="#thedb#">
        DELETE
        FROM notify
        WHERE user_id = <cfqueryparam value="#URL.theID#" cfsqltype="CF_SQL_NUMERIC">
    </cfquery>
<cfelse>
    <cfquery name="qAddUser" datasource="#thedb#">
        INSERT INTO notify (user_id, name)
        VALUES (seq_notifyid,
        <cfqueryparam value="#URL.theName#" cfsqltype="CF_SQL_VARCHAR">)
    </cfquery>
</cfif> 
```

捕获产生了这个：

*错误代码*：984

*消息*：[Macromedia][Oracle JDBC Driver][Oracle]ORA-00984: **column not allowed here**

*列*：0

*线*：9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:46:23.013

我知道这会很愚蠢。如果我真的自动递增自动递增字段会有所帮助。( **.nextVal** )

```
VALUES (seq_notifyid.nextVal, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:34:28.713

`INSERT`语句中缺少的右括号

```
<cfquery name="qAddUser" datasource="#thedb#">
        INSERT INTO notify (user_id, name)
        VALUES (seq_notifyid,
        <cfqueryparam value="#URL.theName#" cfsqltype="CF_SQL_VARCHAR">     
 </cfquery> 
```

# drupal - Drupal 使用自定义内容类型填充第二个自定义内容类型中的字段

> ID：12352747
> 
> 赞同：0
> 
> 时间：2012-09-10T13:27:38.200
> 
> 标签：drupal, drupal-7

使用 Drupal 7 我想创建 2 个自定义内容类型并将它们链接在一起。

例如，如果我在第二个内容类型的事件中创建第一个内容类型的位置，我将有一个使用第一个内容类型的位置标题的位置字段。

理想情况下，我想将其作为带有自动完成功能的文本输入来执行。

如果这不可能，我可以添加类似 selected.js 的内容，以使大型选择更易于管理。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:31:01.003

此模块允许您引用节点，以便您可以选择哪些内容类型是可选的，并具有该内容类型的所有实例的下拉列表：http: [//drupal.org/project/references](http://drupal.org/project/references)

# oracle - 如何获取当前用户的查看对象权限

> ID：12352751
> 
> 赞同：2
> 
> 时间：2012-09-10T13:27:46.303
> 
> 标签：oracle

我想获取当前用户具有选择权限的查看列表。我知道我们无法直接获得与表格不同的视图的特权详细信息。在表格的情况下，我有一个名为“ALL_TAB_PRIVS”的视图。

如何获取当前用户可访问的视图对象列表？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:32:11.490

ALL_TAB_PRIVS 视图在其结果集中包含 VIEWS。事实上，它包括所有对象，因此它还会向您显示您拥有 EXECUTE 权限的过程。

不知道为什么它被称为 ALL_TAB+PRIVS 而不是 ALL_OBJ_PRIVS。我同意这令人困惑。但是，它在[Oracle 参考](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_2098.htm#sthref1475)中得到了正确记录。

顺便说一句，有一个视图 USER_TAB_PRIVS 可以显示当前用户的权限，而不必限制 GRANTEE。

# java - java.text.Normalizer 等效于 Java ME（替换重音字符）

> ID：12352755
> 
> 赞同：3
> 
> 时间：2012-09-10T13:27:53.743
> 
> 标签：java, string, java-me, midp

我想知道是否存在模拟 java.text.Normalizer 所做的 Java ME 的类或库。

我希望能够用相同字符的非重音版本（葡萄牙语）替换重音字符。例如：“coração”===>“coracao”。

使用`Normalizer`类，它将是：

```
Normalizer.normalize(string, Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", "") 
```

我希望能够在 Java ME 中以最有效的方式替换重音字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:57:42.240

[icu4j](http://icu-project.org/apiref/icu4j/)是 IBM 在国际化方面的努力。*com.ibm.icu.text*包似乎是可以找到您的功能的地方。对于 Java ME，您可能需要修剪该库，因为它很大（因为它具有完整的 unicode 和所有语言的性质）。您可能会为此使用代码混淆器。

# c# - 首先使用实体 框架代码与 nosql 数据库

> ID：12352757
> 
> 赞同：25
> 
> 时间：2012-09-10T13:27:58.537
> 
> 标签：c#, asp.net-mvc, entity-framework, nosql

我可以在 NoSql 数据库中使用实体框架代码优先方法吗？以及 NoSql 如何在具有大数据的应用程序中优于 SQL 数据库。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-25T15:55:31.537

过去几个月我一直在使用 BrightstarDb ( [http://www.brightstardb.com/ )，它提供了基于实体框架的代码优先模型生成。](http://www.brightstardb.com/)

BrightstarDb 是一个 NoSql 数据库，也是一个 RDF 三元组，因此它允许实体之间的关系比大多数传统的 NoSql 数据库更复杂。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-10T13:30:05.937

> 我可以将实体框架代码优先方法与 NoSql 数据库一起使用吗？

不，你不能。

> 以及 NoSql 如何在具有大数据的应用程序中优于 SQL 数据库。

[报价](http://en.wikipedia.org/wiki/NoSQL)：

> NoSQL 数据库系统通常针对检索和追加操作进行了高度优化，并且通常提供的除了记录存储之外的功能很少（例如键值存储）。与完整的 SQL 系统相比，运行时灵活性的降低可以通过某些数据模型的可扩展性和性能的显着提升来弥补。
> 
> 简而言之，NoSQL 数据库管理系统在处理大量数据并且数据的性质不需要数据结构的关系模型时很有用。数据可以是结构化的，但它并不重要，真正重要的是存储和检索大量数据的能力，而不是元素之间的关系。例如，将数百万个键值对存储在一个或几个关联数组中，或者存储数百万条数据记录。这对于不断增长的元素列表（例如 Twitter 帖子或来自一大群用户的 Internet 服务器日志）的统计或实时分析特别有用。

# java - 重置工作台时 swtbot 失败

> ID：12352759
> 
> 赞同：0
> 
> 时间：2012-09-10T13:28:00.540
> 
> 标签：java, eclipse, swt, eclipse-rcp, swtbot

我有这样的测试

```
public class TesteSairApp extends GermantechTest {

    @Test
    public void testApp() throws Exception {
        SWTBotMenu file = bot.menu("Arquivo");
        bot.sleep(1000);

        SWTBotMenu clickSair = file.menu("Sair");
        bot.sleep(1000);

        SWTBotMenu menuClicado = clickSair.click();
        System.out.println(menuClicado);
        bot.sleep(1000);

        pass();
    } 
```

刚刚退出应用程序。
应用程序退出后，我得到了这个异常：
`java.lang.NoClassDefFoundError: org/hamcrest/Matchers at org.eclipse.swtbot.eclipse.finder.SWTWorkbenchBot.editors(SWTWorkbenchBot.java:222) at ...`

如果我`bot.resetWorkbench();`从`@After`in 中删除`GermantehcTest`，测试通过......
这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:51:40.947

在我看来，这就像一个依赖问题。您是否包含`org.hamcrest`在测试清单中？如果是这样，请查看`org.hamcrest`捆绑包。作为猜测，类 'org.hamcrest.Matchers' 在那里丢失了。根据您选择的 hamcrest 的分布，这个类可能会丢失（故意）。Afaik 它在`hamcrest-core-xy.jar`. 您可以尝试将[Hamcrest 附加匹配器库](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.hamcrest&version=1.1.0)添加到您的目标和清单中。如果这可行，我建议您烘焙自己的 hamcrest-all 捆绑包，[以此](http://code.google.com/p/hamcrest/downloads/detail?name=hamcrest-all-1.3.jar&can=2&q=)为基础（我没有找到 hamcrest-all 作为捆绑包作为下载包）。

# extjs - 在 extJS 中显示原始数据矩阵（无数据存储）

> ID：12352764
> 
> 赞同：1
> 
> 时间：2012-09-10T13:28:20.983
> 
> 标签：extjs, extjs4

为了节省带宽和代码行，我有一种网络服务：

```
GET /users

[return json data]

{
    "headers": ["Joined", "username", "Age"],
    "data": [["2011-01-01", "alice", 22],["2011-01-01", "bob", 22]] 
} 
```

如何使用 extJS 在网格/表格中显示此对象？

```
username  Joined      Age
alice     2011-01-01  22
bob       2011-01-01  22 
```

**注意**：我不希望在 extJS 中使用数据存储/模型对象（并且必须定义字段等），只需显示服务器**提供的矩阵**

谢谢//大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:45:52.587

如果要使用显示数据，`Ext.grid.Panel`则必须使用商店。时期。如果您直接在商店声明中定义字段，则不一定必须创建模型，但您仍然需要商店。

如果您想使用通用 HTML 表格显示您的数据，您可以使用它`Ext.XTemplate`来执行此操作。它看起来像这样（示例代码）：

```
var matrixTpl = new Ext.XTemplate(
    '<table>',
        '<tr>',
            '<tpl for="headers">',
                '<td>{.}</td>',
            '</tpl>,
        '</tr>',
        '<tpl for="data">',
            '<tr>',
                '<tpl for=".">',
                    '<td>{.}</td>',
                '</tpl>',
            '</tr>',
        '</tpl>',
    '</table>',
    {disableFormats: true}
); 
```

You can modify the look and styles by using the template, but this will let you use a regular JavaScript object to generate your table.

# c++ - 如果其他条件

> ID：12352767
> 
> 赞同：0
> 
> 时间：2012-09-10T13:28:33.580
> 
> 标签：c++, visual-studio-2010

我正在使用 Visual Studio C++ 并在我的程序中使用这些行。
每当我输入 Get status 时，输出都不是“好”。输出将始终是独立于 Cstring strText 的“无效命令”。前两个条件都不行。

请帮助。它应该根据输入 strText 工作。

```
 if ( strText == _T("Get status") )
     { 
                     MessageBox(_T("Good")); 

     }
         else if ( strText == _T("change") )
     {
         MessageBox(_T("Bad")); 
     }
     else 
         {
             MessageBox(_T("Invalid Command")); 
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:12:41.513

`CString::operator==`执行区分大小写的精确匹配。如果大小写或空格不匹配，则字符串将进行不同的比较。我不知道你的情况是什么问题。也许您可以添加`L"[" + strText + L"]"`到您的消息框中，看看是否有一些您忽略的空白。

事实上，尽管 CString 声称支持 Unicode，但它并不支持。形式上相同但规范化不同的两个 Unicode 字符串被认为是不同的。`L"ë"`可能不等于`L"ë"`，根据`CString`一个是否标准化而另一个不是。Windows 有`CompareStringEx`API，它是字符串比较的瑞士军刀，可以处理这些细节。

# objective-c - 粘性uitableview

> ID：12352768
> 
> 赞同：0
> 
> 时间：2012-09-10T13:28:35.083
> 
> 标签：objective-c, xcode, uitableview, sticky

当我向上和向下滚动它多次时，我遇到了 uitableview 的问题，它变得粘滞并且所有包含的视图也变得粘滞。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                      reuseIdentifier:CellIdentifier] ;
    }

    cell.textLabel.text=[NSString stringWithFormat:@"         %@",
                            [SongsNames objectAtIndex:indexPath.row]];

    UIImageView *b=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 35, 34)];
    b.image=[UIImage imageNamed:@"playbuttone.png"];
    [cell.contentView addSubview:b];
    [b release];
    UIButton *b2=[[UIButton alloc] initWithFrame:CGRectMake(260, 0, 50, 35)];
    [b2 setImage:[UIImage imageNamed:@"buye.png"] forState:UIControlStateNormal];
    [cell.contentView addSubview:b2];
    [b2 release];

    cell.textLabel.textColor=[UIColor colorWithWhite:1 alpha:1];
} 
```

更新后：

```
cell.textLabel.text=[NSString stringWithFormat:@"         %@",[SongsNames objectAtIndex:indexPath.row]];

        [cell.contentView addSubview:b];
       // [b release];
        [cell.contentView addSubview:b2];
        //[b2 release];

        cell.textLabel.textColor=[UIColor colorWithWhite:1 alpha:1]; 
```

并在 viewdidload 中：

```
- (void)viewDidLoad{

b=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 35, 34)];
b.image=[UIImage imageNamed:@"playbuttone.png"];

b2=[[UIButton alloc] initWithFrame:CGRectMake(260, 0, 50, 35)];
[b2 setImage:[UIImage imageNamed:@"buye.png"] forState:UIControlStateNormal]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:44:04.637

您正在为该函数的每次调用重新加载图像。滚动时，此函数实际上会被调用很多次，这并不是必需的，特别是因为您的图像是静态的并且对于每个单元格都是相同的。

当视图加载时加载两个图像，在视图控制器中保存一个引用并重用它们。当表格视图请求单元格时。这很可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:00:01.320

好的，对于任何会遇到令人困惑的问题的人来说，停止将 uicontrols 添加到 uitableviewcell 并使用本教程中的自定义单元格

[http://www.youtube.com/watch?v=PwcBdCUZNWs](http://www.youtube.com/watch?v=PwcBdCUZNWs)

# applescript - Filemaker 10 间歇性客户端错误 -1728

> ID：12352772
> 
> 赞同：0
> 
> 时间：2012-09-10T13:28:44.423
> 
> 标签：applescript, filemaker

全部，

在我们的 Filemaker Server 10 数据库应用程序之一上，客户端用户在运行脚本时遇到间歇性 -1728 错误，附加到一个按钮：

**未知错误：-1728**

![在此处输入图像描述](../Images/6dce382b77d882a2c999b6cdf0b0887b.png)

根据我从用户那里了解到的信息，-1728 错误发生在“显示布局”命令之前。（见下文）。我怀疑在错误之前执行的“set theInventoryID”命令：

```
set theDatabaseName to "F&B POs"
set theCellName to "Product ID"
tell application "FileMaker Pro"

  set theInventoryID to contents of cell "ID" of current record
  tell database theDatabaseName
  --  -1728 error happens here!!

  show layout "Inventory - All Quantities"
  show every record
  ... 
```

FM 中防弹的最佳做法是什么？

就像是？

```
tell application "FileMaker Pro"
 try
  set theInventoryID to contents of cell "ID" of current record
  on error
    display dialog ("Make sure all inventory ids are valid")
 end try

tell database theDatabaseName
--  -1728 error happens here
show layout "Inventory - All Quantities"
show every record
... 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:27:18.980

It's an AppleScript error "Can't get (something)". Make sure all the layouts and fields exist. Also, if an AppleScript is run from within FileMaker, it doesn't need `tell application "FileMaker Pro"/end tell` block, as it's already telling the application.

# perl - 需要 perl 一个班轮来获取特定内容并可能对其进行平均

> ID：12352773
> 
> 赞同：3
> 
> 时间：2012-09-10T13:28:54.553
> 
> 标签：perl, shell, unix, command-line

我有一个文件，其中包含许多行，其中包含“x_y = XXXX”，其中 XXXX 可以是从 0 到某个 N 的数字。

现在，a）我想在每个这样的行中只获取该行的 XXXX 部分。b）我想得到平均值

可能这两者都在一个衬里。

我正在尝试类似的东西

```
cat filename.txt | grep x_y | (this need to be filled) 
```

我不确定要归档什么过去我使用过类似的命令

```
perl -pi -e 's/x_y/m_n/g' 
```

替换 x_y 的所有实例。但是现在，我想匹配 x_y=XXXX 并取出 XXXX，然后可能对整个文件进行平均。

对此的任何帮助将不胜感激。我对 perl 和正则表达式相当陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:54:36.623

Timtowtdi（像往常一样）。

```
perl -nE '$s+=$1, ++$n if /x_y=(\d+)/; END { say "avg:", $s/$n }' data.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T13:33:47.433

以下应该做：

```
... | grep 'x_y=' | perl -ne '$x += (split /=/, $_)[1]; $y++ }{ print $x/$y, "\n"' 
```

`}{`通俗地称为*eskimo 运算符*，并且因为`-n`放置在`-e`(参见`perldoc perlrun`) 周围的代码而起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T13:48:45.723

使用 awk：

```
/^[^_]+_[^=]+=[0-9]+$/ {sum=sum+$2; cnt++}
END {
    print "sum:", sum, "items:", cnt, "avg:", sum/cnt
}

$ awk -F= -f cnt.awk data.txt
sum: 55 items: 10 avg: 5.5 
```

纯 bash 解决方案：

```
#!/bin/bash

while IFS='=' read str num
do
    if [[ $str == *_* ]]
    then
        sum=$((sum + num))
        cnt=$((cnt + 1))
    fi

done < data.txt

echo "scale=4; $sum/$cnt" | bc ;exit 
```

输出：

```
$ ./cnt.sh 
5.5000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T17:25:28.683

作为一个单行，与评论分开。

```
perl -nlwe '
    push @a, /x_y=(\d+)/g          # push all matches onto an array
    }{                             # eskimo-operator, is evaluated last
    $sum += $_ for @a;             # get the sum
    print "Average: ", $sum / @a;  # divide by the size of the array
' input.txt 
```

将在一行中提取多个匹配项（如果存在）。

粘贴版本：

```
perl -nlwe 'push @a, /x_y=(\d+)/g }{ $sum += $_ for @a; print "Average: ", $sum / @a;' input.txt 
```

# android - 使用 ORMLite Where Not Exists 时如何通过 id 进行匹配

> ID：12352774
> 
> 赞同：0
> 
> 时间：2012-09-10T13:29:00.653
> 
> 标签：android, ormlite

我正在使用[Does ORMLITE support SQL EXISTS? 中的建议构建我的查询？](https://stackoverflow.com/questions/9294586/does-ormlite-support-sql-exists)

```
public List<Crag> getAllCragsWithLocation() {
    QueryBuilder<Crag, Integer> cragQueryBuilder = _helper.getCragDao().queryBuilder();
    QueryBuilder<CragLocation, Integer> cragLocationQueryBuilder = _helper.getCragLocationDao().queryBuilder();
        try {
            cragLocationQueryBuilder.where().eq("locationType", 0);
            cragQueryBuilder.where().exists(cragLocationQueryBuilder);
            return cragQueryBuilder.query();
        } catch (Exception e) {
            Log.e(TAG,e.toString());
            return new ArrayList<Crag>();
        } 
} 
```

这将返回所有 crags，无论它们是否具有 cragLocation，只要存在 locationType 为 0 的 cragLocation。这是可以理解的......

在上面链接的示例中...

```
QueryBuilder<Visit, Integer> visitQb = visitDao.queryBuilder();
visitQb.where().eq(Visit.CLIENT_ID_FIELD, client.getId());
QueryBuilder<Client, Integer> clientQb = clientDao.queryBuilder();
clientQb.where().exists(visitQb);
List<Client> results = clientQb.query(); 
```

我猜查询链接到特定客户的 id 或者更清楚

```
select * from client c
    where EXISTS (select * from visit v where c._id = v.client_id) 
```

就我而言

```
select * from Crag c
    where EXISTS (select * from CragLocation cl where c.id = cl.crag_id) 
```

所以我的最终查询是：

```
select * from Crag c
    where EXISTS (select * from CragLocation cl where c.id = cl.crag_id and cl.location_type = 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:31:01.287

我认为您不想在这里使用[SQL EXISTS](http://sqltutorials.blogspot.com/2007/06/sql-exists.html)。[ORMLite](http://ormlite.com/)将生成的查询*不*包含任何特殊`WHERE`子句——它不是那么聪明。

```
cragLocationQueryBuilder.where().eq("locationType", 0);
cragQueryBuilder.where().exists(cragLocationQueryBuilder); 
```

这个查询意味着如果有*任何*位置，那么`locationType == 0`它将返回*所有*`Crag`条目。

我建议您使用该[`where().in(QueryBuilder)`方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html#in%28java.lang.String,%20com.j256.ormlite.stmt.QueryBuilder%29)。这样，您可以返回位置类型为 0 的峭壁。

```
cragLocationQueryBuilder.selectColumns("crag_id).where().eq("locationType", 0);
cragQueryBuilder.where().in("id", cragLocationQueryBuilder); 
```

这将生成一个类似的 SQL 查询：

```
select * from Crag
    where id IN (select crag_id from CragLocation cl.location_type = 0) 
```

# ruby-on-rails - 通过 capistrano (& rvm) 部署时出现捆绑安装错误

> ID：12352781
> 
> 赞同：0
> 
> 时间：2012-09-10T13:29:23.853
> 
> 标签：ruby-on-rails, rvm, capistrano, bundler

现在我必须承认，就这个部署云雀而言，我在黑暗中磕磕绊绊。我会尽力解释情况；我已经设置了一个测试部署服务器，并正在尝试使用 capistrano 将我的应用程序部署到它，但是，我遇到了一些围绕我的 gem 及其依赖项的困难，就像鞋子下面的错误一样。

```
[mike-test] executing command
[mike-test] rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3' -c 'cd /home/deploy/myapp/releases/20120910081544 && bundle install --gemfile /home/deploy/myapp/releases/20120910081544/Gemfile --path /home/depoy/myapp/shared/bundle --deployment --quiet --without development test'
 ** [out :: mike-test] Some gems seem to be missing from your vendor/cache directory.
 ** [out :: mike-test] Could not find log4r-1.1.10 in any of the sources
command finished in 9134ms
*** [deploy:update_code] rolling back 
```

`log4r`不在我的 gemfile 中，所以我只能假设它是另一个 gem 的（也许只是生产？）依赖项。我不知道为什么 bundler 没有下载 gem 并在找不到它的情况下安装它？我将 gem 放在我的 gemfile 中，在本地运行 bundle install ，然后再次提交并部署并得到相同的错误，但这次使用了不同的 gem（电子表格），所以似乎只在这种情况下解决了错误，但没有t 识别问题。

还有其他事情可以搅浑水，我正在尝试在生产服务器上使用 RVM，尽管阅读了很多关于它的内容，但我仍然不能 100% 确定我了解它是如何工作的，所以这可能是一个因素。

我的`deploy.rb`：

```
require "bundler/capistrano"
require "rvm/capistrano"

# SCM Settings
set :rvm_ruby_string, '1.9.3' 
set :use_sudo, false

ssh_options[:forward_agent] = true
default_run_options[:pty] = true

set :branch, :mikedev
set :deploy_via, :remote_cache
set :copy_cache, true
set :git_enable_submodules, 0
set :repository, "our_git_repo.git"
set :scm, :git
set :user, :deploy
set :keep_releases, 1

set :application, "myapp"
set :deploy_to, "/home/deploy/myapp"
set :branch, "mikedev"

role :web, "mike-test"                          
role :app, "mike-test"                          
role :db,  "mike-test", :primary => true      

namespace :deploy do

  desc "Restarting mod_rails with restart.txt"
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "touch #{current_path}/tmp/restart.txt"
  end

  [:start, :stop].each do |t|
    desc "#{t} task is a no-op with mod_rails"
    task t, :roles => :app do ; end
  end

end 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:57:01.827

`bundle install --deployment ...``vendor/cache`如果存在，将不会下载任何 gem 。它会在那里寻找宝石。有两种选择：

*   从您的 VCS中删除`vendor/cache`目录（即使它已经是空的）
*   或运行`bundle package`并将所有新文件添加`vendor/cache`到您的 VCS

后者似乎是更好的选择。通过这种方式，您可以保护您的部署免受 ruby​​gems 服务器中断的影响。

# c++ - 如何使用动态大小的结构数组？

> ID：12352783
> 
> 赞同：3
> 
> 时间：2012-09-10T13:29:33.440
> 
> 标签：c++, arrays, dynamic, struct

我必须做作业。它是一个控制台应用程序，它使用一组结构来保存有关计算机的信息（品牌、制造年份、重量和库存编号）。所以我写了一个完全可以工作的程序，但是我想用一个动态数组，因为我不知道用户会输入多少条记录。

有没有办法做到这一点。要在数组中添加新记录，直到用户说 n/N？有什么建议么？

这是我的程序版本：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

struct ComputerInfo
{
    char computerMark[20], invertarNumber[6];
    unsigned int year;
    float weight;
};

ComputerInfo computerArray[300];

ComputerInfo AddComputers(ComputerInfo compterArray[], int counter)
{
    cout << "Enter mark of the computer: ";
    cin >> computerArray[counter].computerMark;

    cout << "Enter year of establish: ";
    cin>> computerArray[counter].year;

    while ((computerArray[counter].year < 1973)
        || (computerArray[counter].year > 2013))
    {
        cout << "INVALID YEAR!!!" << endl;

        cout << "Enter year of establish: ";
        cin>> computerArray[counter].year;
    }

    cout << "Enter computer weidth: ";
    cin >> computerArray[counter].weight;

    cout << "Enter computer invertar number(up to six digits): ";
    cin >> computerArray[counter].invertarNumber;

    return computerArray[counter];
}

void ShowRecords()
{
    int counter = 0;

    while (computerArray[counter].year != 0)
    {
        cout << "Mark: " << computerArray[counter].computerMark << endl;
        cout << "Year: " << computerArray[counter].year << endl;
        cout << "Weidth: " << computerArray[counter].weight << endl;
        cout << "Inv. number: " << computerArray[counter].invertarNumber << endl << endl;

        counter++;
    }
}

void MoreThanTenYearsOld(ComputerInfo computerArray[])
{
    int counter = 0;
    float counterOldComputers = 0;
    float computerPer = 0;

    while (computerArray[counter].year == 0)
    {
        if (computerArray[counter].year <= 2003)
        {
            counterOldComputers++;
        }

        counter++;
    }

    computerPer = counterOldComputers / 3;

    cout << endl;
    cout << "Percantage of old computers is: " << computerPer << endl;
}

int main()
{
    int counter = 0;
    float computerPer = 0;
    char answer = 'y';

    for (int i = 0; i <= 299; i++)
    {
        strcpy(computerArray[i].computerMark,"");
    }

    while((answer == 'Y') || (answer == 'y'))
    {
        computerArray[counter] = AddComputers(computerArray, counter);
        cout << endl;
        cout << "Do you want to enter more records (Y/N): ";
        cin >> answer;
        cout << endl;
        counter++;
    }

    MoreThanTenYearsOld(computerArray);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:33:51.273

是的。而不是你的数组，使用

```
std::vector<ComputerInfo> computerArray; 
```

您可以根据需要添加任意数量的对象：

```
ComputerInfo c;
// read the data
computerArray.push_back(c); 
```

现在，`computerArray[0]`将有信息`c`。

你需要`#include <vector>`。

此外，`char computerMark[20]`您可以使用`std::string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:40:35.160

你有两个选择：

1）使用`std::vector`而不是数组。这是一个非常强大的工具，当然值得学习如何使用。

2）动态分配数组并在添加更多项目时调整其大小。基本上这意味着编写自己的`std::vector`. 这是增强您的编程技能的好方法。您将了解编写标准类和函数的内容。但是，我建议`std::vector`在更严肃的编程中使用它，因为它已经过彻底的测试和调试。

# java - 为什么以“！”开头的 java 属性不起作用？

> ID：12352790
> 
> 赞同：-4
> 
> 时间：2012-09-10T13:29:56.363
> 
> 标签：java, properties

我试过这个属性文件：

```
# test config

# global configuration
!title=Test report
!background=fff

query=...
paramSource=... 
```

但`!param`从来`!background`没有读过。

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:35:09.977

[来自属性](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)的 Javadoc

> 注释行有一个 ASCII '#' 或 '!' 作为它的第一个非空白字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:29:56.363

`!`是创建**评论**的特殊字符，将被忽略。

# html - HTML5 样板图标

> ID：12352800
> 
> 赞同：0
> 
> 时间：2012-09-10T13:30:30.133
> 
> 标签：html, icons, html5boilerplate

我一直在将 H5BP 用于看起来像 Eons 的东西，并发现它真的很有用，但是我从来没有真正理解所有图标的用途。

我知道它们适用于各种设备，但我从来没有真正打扰过你考虑更多...我只是不好意思地用我自己的图标替换了我正在开发的网站的图标。

我刚刚在谷歌上搜索，找不到任何好的解释它们每个人以及在什么情况下使用它们？

我有一部 iPhone 和 iPad，但老实说，我对两者都不太满意，因此我可能不太精通，无法确切知道 H5BP 图标在这些设备上的确切用途......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T06:40:46.980

请参考 HTML5 Boilerplate 文档的这一部分 - [html.md](https://github.com/h5bp/html5-boilerplate/blob/25c1073d13eb49a948d7040525ba656d93aece30/doc/html.md)

您会找到一个链接，指向[您一直想了解的有关触摸图标的所有信息](http://mathiasbynens.be/notes/touch-icons)，该链接将深入解释每个图标的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:35:39.093

在 iPod/iPhone/iPad 上，您可以决定在主屏幕上放置一个网站（将其视为书签）。书签将具有与普通 iOS 应用程序图标相同的外观（一个大图标和一个小文本）。如果有人决定这样保存您的网站，则 H5BP 图标用作应用程序图标。

存在三种不同分辨率的原因仅仅是因为不同的苹果设备在其图标上需要不同的分辨率。新的 iPad（视网膜）需要有一个高分辨率图标，等等。

# unit-testing - 我应该将我的测试课程声明为最终课程吗？

> ID：12352803
> 
> 赞同：1
> 
> 时间：2012-09-10T13:30:51.417
> 
> 标签：unit-testing

单元测试的类和属性可见性的最佳实践是什么？我应该让我的所有测试最终吗？还是只是他们的属性？或者两者都不是？请指出资源（书籍、博客等）以支持您的意见。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:53:49.203

据我所知，没有最佳实践。我的直觉是“这有关系吗？”

我能想到的唯一可能重要的场景是，如果您实际上将单元测试与您的产品一起交付，例如，如果您正在编写一套开发工具或其他东西。在这种情况下，我建议您的单元测试的可访问性模仿您的类的可访问性（在给定代码结构的情况下尽可能多地实现这一点）。

这只是因为如果有人想从您的类派生，他们可能还想从您的单元测试中派生。

但我自己从来没有遇到过这种情况，我不敢相信这是很常见的。例如，我工作过的任何公司都没有对单元测试进行代码审查，理由是这不是将要发布的代码。我想说这同样适用于能见度之类的事情，即这并不重要。

# google-drive-api - 如何在 Google Drive SDK 上设置创建日期

> ID：12352804
> 
> 赞同：2
> 
> 时间：2012-09-10T13:30:52.807
> 
> 标签：google-drive-api

我有一个不久前创建的文件，我想上传到 Google Drive，同时保留它的原始创建日期。

如何使用 Google Drive SDK 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:45:58.943

API 参考说 createdDate JSON 属性不可写。但至少在 JAVA 库中，您有一个方法 setCreatedDate() 可用于设置此属性以方便您使用。

但是，我刚刚尝试使用 API 资源管理器执行此操作，并且 API 向我返回了 400 错误 - 错误请求。所以我认为这是不可能的

杰罗姆

# symfony1 - 如何使用分页和长变量查询字符串修复路由

> ID：12352807
> 
> 赞同：0
> 
> 时间：2012-09-10T13:30:57.333
> 
> 标签：symfony1, symfony-1.4

当使用分页以及长且可变的查询字符串时，我从第一页到第二页、第三页、第四页等时遇到问题。我怀疑它是一个路由问题。我正在使用用户通过一系列下拉菜单选择的自定义查询。结果 url 很长，其中包含所有 post 变量。

例如，工作的首页 url 看起来像（这里用字母表示的 post 变量）：

```
project/web/s/search_results/t/u/v/w/x/y/z 
```

...以及单击第 2 页时无效的第 2 页 url：

```
project/web/s/search_results?page=2 
```

第二页遵循路由规则。如前所述，第二页无法从寻呼机菜单中单击。但是如果我手动输入：

```
project/web/s/search_results/t/u/v/w/x/y/z?page=2 
```

- 它确实有效。重要的代码行如下：

路由规则：

```
search_results:
  url:      /s/search_results
  param:    { module: s, action: search_results } 
```

url_for 分页助手：

```
<?php foreach ($pager->getLinks() as $page): ?>
      <?php if ($page == $pager->getPage()): ?>
        <?php echo $page ?>
      <?php else: ?>
        <a href="<?php echo url_for('@search_results', $object) ?>?page=<?php echo $page ?>"><?php echo $page ?></a>
      <?php endif; ?>
<?php endforeach; ?> 
```

和错误信息：

```
404 | Not Found | sfError404Exception
Unable to find the s object with the following parameters "array ( 'id' => 'search_results', 'sf_format' => 'html',)"). 
```

我应该为路由规则使用集合吗？

编辑： url_for 助手中引用的对象：

```
<?php  foreach ($pager->getResults() as $o => $object):  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:33:14.230

尝试：

```
 <a href="<?php echo url_for(sfContext::getInstance()->getRouting()->getCurrentInternalUri()) ?>?page=<?php echo $page ?>"><?php echo $page ?></a> 
```

# objective-c - 当子视图超出可见区域时自动滚动 UIScrollView

> ID：12352809
> 
> 赞同：2
> 
> 时间：2012-09-10T13:31:01.710
> 
> 标签：objective-c, ios, uipangesturerecognizer

**编辑：**

我将我的实现上传到[github](https://github.com/sebk/AutoScrollTest)。也许最好了解我想要什么以及我的问题是什么。我将 github 项目中的代码比此处发布的代码更改了一些。我认为github项目中的实现更好，但并不完美。

**我想做的事：**

有一个带有可移动 UIView（例如图像）的 UIScrollView。用户可以平移此子视图并放大和缩小。当用户放大并将子视图移动到当前可见区域时，scrollView 应自动滚动。当子视图在边缘时，滚动视图应该滚动。当子视图不再超出可见区域时，滚动视图应该停止移动。

我尽量解释我的问题。

**我设法做到了：**

缩放滚动视图，使用 UIPanGestureRecognizer 移动子视图，识别子视图何时超过可见区域并开始移动（更改 contentOffset）滚动视图。在这里，只要子视图在可见区域上方，我就使用 NSTimer 来移动滚动视图。

**我的问题：**

当子视图在可见区域上方时，将启动 NSTimer，以更改子视图的 contentOffset 和子视图的框架（位置）。之后我不能再平移子视图了。我不知道如何以正确的方式更改子视图框架来实现平移手势。

**我的实现：**

我正在使用三个视图：

*   UIScrollView
*   MyImageContainerView（UIView，作为子视图添加到滚动视图）
*   MyImageView（UIView，作为子视图添加到 MyImageContainerView）

目前 MyImageContainerView 管理工作流。MyImageView 附加了一个 UIPanGestureRecognizer。此识别器的方法在 MyImageContainerView 中实现：

```
- (void)handlePanGesture:(UIPanGestureRecognizer *)gestureRecognizer
{
    //UIView which is moved by the user
    MyImageView *currentView = gestureRecognizer.view;

    switch (gestureRecognizer.state)
    {
        case UIGestureRecognizerStatePossible:
        {
            break;
        }
        case UIGestureRecognizerStateBegan: 
        {
            //save both values in global instance variables
            currentFrameOriginX = currentView.frame.origin.x;
            currentFrameOriginY = currentView.frame.origin.y;

            //global BOOL variable, to check if scrollView movement is performed
            scrolling = NO;        
            break;
        }

        case UIGestureRecognizerStateChanged:
        {            
            CGRect rect = CGRectMake(currentFrameOriginX + [gestureRecognizer translationInView:currentView.superview].x, currentFrameOriginY + [gestureRecognizer translationInView:currentView.superview].y, currentView.frame.size.width, currentView.frame.size.height);

            if (CGRectContainsRect(currentView.superview.frame, rect)) {

                /*PROBLEM: Here is a problem. I need this change of the frame here, to move the UIView along the movement from the user. In my autoScroll-method I have to set the frame of currentView, too. But I can't set the frame of currentView here and in the autoScroll. But as long as the NSTimer runs and is calling autoScroll: this if-statement isn't called, so I can't move the UIView with my finger anymore. */
                if (!scrolling) {
                    //currently the NSTimer method for the automatically scrolling isn't performed, so:
                    //change the frame according to the pan gesture
                    currentView.frame = rect;
                }

                UIScrollView *scrollView = self.myScrollView; //reference to the "root" UIScrollView
                CGRect visibleRect;
                visibleRect.origin = scrollView.contentOffset;
                visibleRect.size = scrollView.bounds.size;

                CGRect frame = currentView.frame;

                CGFloat scale = 1.0 / scrollView.zoomScale;
                visibleRect.origin.x *= scale;
                visibleRect.origin.y *= scale;
                visibleRect.size.width *= scale;
                visibleRect.size.height *= scale;

                CGSize scrollZone = CGSizeMake(10.0f, 10.0f);
                float scrollStep = 3.0f;
                CGPoint scrollAmount = CGPointZero;

                //determine the change of x and y
                if (frame.origin.x+scrollZone.width < visibleRect.origin.x) {
                    scrollAmount.x = -scrollStep;
                }
                else if((frame.origin.x+frame.size.width)-scrollZone.width > visibleRect.origin.x + visibleRect.size.width) {
                    scrollAmount.x = scrollStep;
                }
                else if (frame.origin.y+scrollZone.height < visibleRect.origin.y) {
                    scrollAmount.y = -scrollStep;
                }
                else if((frame.origin.y+frame.size.height)-scrollZone.height > visibleRect.origin.y + visibleRect.size.height) {
                    scrollAmount.y = scrollStep;
                }

                if ((scrollAmount.x != 0) | (scrollAmount.y != 0)) {
                    if (![scrollTimer isValid]) {
                        //scrollTimer is a global NSTimer instance variable
                        [scrollTimer invalidate];
                        scrollTimer = nil;

                        NSString *scrollString = NSStringFromCGPoint(scrollAmount);
                        NSDictionary *info = [NSDictionary dictionaryWithObjectsAndKeys:scrollString, @"scrollString", currentView, @"currentView", nil];

                        scrollTimer = [[NSTimer alloc]initWithFireDate:[NSDate date] interval:0.03f target:self selector:@selector(autoScroll:) userInfo:info repeats:YES];
                        [[NSRunLoop mainRunLoop] addTimer:scrollTimer forMode:NSRunLoopCommonModes];
                    }
                }
                else {
                    [scrollTimer invalidate];
                    scrollTimer = nil;
                    scrolling = NO;
                }
            }
            break;
        }
        case UIGestureRecognizerStateEnded:
        {
            //quite know the scrolling should stop, maybe it would be better when the scrollView scrolls even if the user does nothing when the subview is over the visible area
            [scrollTimer invalidate];
            scrollTimer = nil;
            scrolling = NO;
            break;
        }
        default:
        {
            [scrollTimer invalidate];
            scrollTimer = nil;
            scrolling = NO;
            break;
        }
    }
}

-(void)autoScroll:(NSTimer*)timer {

    scrolling = YES; //the scroll method is executed quite know

    NSDictionary *info = [timer userInfo];

    UIScrollView *scrollView = self.myScrollView;
    CGRect visibleRect;
    visibleRect.origin = scrollView.contentOffset;
    visibleRect.size = scrollView.bounds.size;

    CGPoint scrollAmount = CGPointFromString([info objectForKey:@"scrollString"]);
    MyImageView *currentView = [info objectForKey:@"currentView"];

//stop scrolling when the UIView is at the edge of the containerView (referenced over 'self')
    if ((currentView.frame.origin.x <= 0 | currentView.frame.origin.y <= 0) ||
        ((currentView.frame.origin.x+currentView.frame.size.width) > self.frame.size.width | (currentView.frame.origin.y+currentView.frame.size.height) > self.frame.size.height)
        ) {
        scrolling = NO;
        return;
    }

    //move the UIView 
    CGFloat scale = 1.0 / scrollView.zoomScale;
    if (scrollAmount.x != 0) {
        scrollAmount.x *= scale;
    }
    if (scrollAmount.y != 0) {
        scrollAmount.y *= scale;
    }
    CGRect frame = currentView.frame;
    frame.origin.x += scrollAmount.x; 
    frame.origin.y += scrollAmount.y;
    currentView.frame = frame;
    currentFrameOriginX = currentView.frame.origin.x;
    currentFrameOriginY = currentView.frame.origin.y;

        //move the scrollView
    CGPoint contentOffset = scrollView.contentOffset;
    contentOffset.x += scrollAmount.x;
    contentOffset.y += scrollAmount.y;
    [scrollView setContentOffset:contentOffset animated:NO];
} 
```

# java - 访问 xtext 中的类定义

> ID：12352810
> 
> 赞同：0
> 
> 时间：2012-09-10T13:31:04.647
> 
> 标签：java, xtext, xtend

我正在尝试编写一个 DSL 来进行从一个对象到另一个对象的类型安全转换。

```
src classA
dst classB

map valueA to valueB with ConverterX
map valueC to valueD with ConverterY 
```

结果应该是这样的：

```
class Converter
{
public void convert(ClassA a, ClassB b)
{
 a.setValueA(ConverterX.convert(b.getValueB))
 b.setValueC(ConverterY.convert(b.getValueD))

}
} 
```

我只是想为此生成代码，但我无法访问我已经定义的类。这样做的原因是能够使用默认转换器。只有在我能够获得参数类型的情况下，我才能选择默认转换器的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:24:37.787

您可以按照 Xtext 文档的建议坚持使用 JvmTypeReference。您可以从 jvmTypeRef.getType() 获取 JvmType，其中相关类型可转换为 JvmDeclaredType。这是我使用 JvmTypeReference 获取所有 bean 属性（类成员）列表的辅助方法：

```
public List<String> getFieldNamesForClass(JvmTypeReference jvmTypeRef) {
    List<String> result = new ArrayList<String>();
    if (jvmTypeRef.getType() instanceof JvmDeclaredType) {
        JvmDeclaredType declaredType = (JvmDeclaredType)jvmTypeRef.getType();
        for (JvmField field : declaredType.getDeclaredFields()) {
            result.add(field.getSimpleName());
        }
    }
    return result;
} 
```

输出是字符串列表，即文件名，但可以轻松更改为返回 JvmField/JvmMember 实例。

在 bitbucket.org/espinosa/deepclonedsl 上检查我的 DeepCloneDSL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:05:28.487

我通过使用 JvmDeclaredType 代替 JvmTypeReference 解决了这个问题。JvmTypeReference 不提供对字段和方法的访问，但 JvmDeclaredType 提供。也可以通过知道 JvmDeclaredType 中存在的 QualifiedName 来生成 JvmTypeReference。

# opengl - 如何将纹理应用到球体的一部分

> ID：12352814
> 
> 赞同：1
> 
> 时间：2012-09-10T13:31:30.623
> 
> 标签：opengl

我试图将纹理仅放在球体的一部分中。我有一个代表地球的球体，它的地形和地球一部分的地形纹理，比如意大利的卫星地图。我想展示意大利所在球体部分的地形。

我正在创建我的球体，绘制一组三角形条带。据我了解，如果我想使用纹理，我需要为每个顶点指定纹理坐标（glTexCoord2*）。但我没有对所有这些都有效的纹理。那么我如何告诉 OpenGL 跳过这些顶点的纹理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:00:47.793

我假设您有两个纹理或球体其余部分的颜色属性（“不是意大利”）。

最简单的方法是创建一个覆盖整个球体的纹理，但使用 Alpha 通道。例如，`alpha=1`用于“not italy”和`alpha=0`“italy”。然后你可以在你的片段着色器中做这样的事情（伪代码，我没有测试任何东西）：

```
...
uniform sampler2D extra_texture;
in vec2 texture_coords;
out vec3 final_color;
...
void main() {
    ...
    // Assume color1 to be the base color for the sphere, no matter how you get it (attribute/texture), it has at least 3 components.
    vec4 color2 = texture(extra_texture, texture_coords);
    final_color = mix(vec3(color2), vec3(color1), color2.a);
} 
```

混合中的颜色组合如下，`mix(x,y,a) = x*(1-a)+y*a`对于向量，这是按组件方式完成的。所以你可以看到 if `alpha=1`("not Italy"),`color1`将被选中，反之亦然`alpha=0`。

您可以使用纹理数组或类似的东西将其扩展到多个层，但我会保持简单的 2 层开始。

# algorithm - Power Builder 6.5 中的 SHA 256 算法

> ID：12352815
> 
> 赞同：0
> 
> 时间：2012-09-10T13:31:34.243
> 
> 标签：algorithm, security, powerbuilder, hashalgorithm

我正在尝试以安全的方式将数据存储在数据库中。为此，我尝试在 Powerbuilder 6.5 版中实现 SHA-256 算法。这听起来很老，我在 PowerBuilder（桌面应用程序开发工具）中实现 SHA 256。虽然它已经过时了，但我们需要在 PowerBuilder 中实现这个安全功能，因为很多应用程序都依赖它。

我在谷歌上搜索了 SHA256 的 PB 6.5 的任何库，但没有得到任何东西。所以请任何人告诉我如何在 PowerBuilder 中**实现这个 SHA-256**，或者是否有任何现成的库可用于 PB 6.5 的 SHA256。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:25:30.337

看看这个使用 Microsoft Crypto API 的[PB 库。](http://www.topwizprogramming.com/freecode_crypto.html)

该示例适用于 PB 8+，通过导出 nvo 和 windows 对象并将它们导入新的 PB7 库，我设法让它在 PB7 中运行。

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb931357%28v=vs.85%29.aspx)，您必须使用“Microsoft Enhanced RSA and AES Cryptographic Provider”才能计算 SHA256 哈希。

# asp.net-mvc - 将参数传递给索引操作

> ID：12352817
> 
> 赞同：1
> 
> 时间：2012-09-10T13:31:38.220
> 
> 标签：asp.net-mvc, viewbag

我需要创建一个子视图，允许用户在主网格视图上选择一行后插入相关数据。

子视图必须接收一个 ID，该 ID 将指示哪个是父行。

我怎样才能传递这个参数？查看包？

PS：视图和控制器是不同的，子视图使用 Html.ActionLink 打开到另一个控制器的 Index 动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:34:20.027

将其作为查询字符串传递，因为您正在打开不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:35:37.277

您可以通过多种方式传递参数。

```
ViewBag.MyParam = "1";

ViewData("MyParam") = "1";

TempData("MyParam") = "1"; 
```

注意：这是 VB，所以 C# 会有些不同。

否则，您可以通过 Rob 所述的查询字符串传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:47:20.593

将父 ID 作为参数传递给调用子视图的操作方法。

```
@Html.ActionLink("Add Related Data","Add",new { @id=364}) 
```

*将 364 替换为您认为的动态值*

在您的子操作中，从 ID 获取父对象并在子视图中显示。假设您有一个 ViewModel 喜欢他的子视图。

```
public class ChildDetails
{
  public int ID { set;get;}
  public string Note { set;get;}
  public int ParentID { set;get;}
  public string ParentName { set;get;}
} 
```

获取父详细信息并在您的 ViewModel 中为子视图设置相关属性值。

```
public ActionResult Add(int id)
{
  var parent=yourRepositary.Get(id);
  ChildDetails childViewModel=new ChildDetails();
  childViewModel.ParentID=id;
  childViewModel.Name=parent.Name;
  return View(childViewModel);
} 
```

您的 Child 视图将被强烈绑定到`ChildDetails`类

```
@model ChildDetails

<h2>@Model.ParentName</h2>
@using(Html.BeginForm())
{
  @Html.TextBoxFor(x=>x.Note)
  @Html.HiddenFor(x=>x.ParentId)
  <input type="submit" />
} 
```

# email - 在 shell 中发送邮件失败

> ID：12352829
> 
> 赞同：1
> 
> 时间：2012-09-10T13:32:24.857
> 
> 标签：email, shell, mutt

尝试使用以下命令发送邮件时出现错误。

```
mutt -s "testing message" -a 123.jpeg file.txt abc123@gmail.com < file.txt 
```

错误信息出现在屏幕上。

> 来自 122.161.253.17 的 553 交付被拒绝。

但我知道我的 ip 是 10.127.0.1，这是内部 ip 的类型。你能帮忙解决这个问题吗？

# mongodb - 如何查看mongodb每个分片中的数据？

> ID：12352830
> 
> 赞同：1
> 
> 时间：2012-09-10T13:32:23.720
> 
> 标签：mongodb

我创建了两个分片，关键是年龄，如下所示：

```
db.runCommand({addshard: "localhost:10000", allowLocal: true, maxsize: 0.1, minkey: 1, maxkey: 1})
db.runCommand({addshard: "localhost:10001", allowLocal: true, maxsize: 0.1, minkey: 2, maxkey: 2})

db.runCommand({enablesharding: "foo"})
db.runCommand({shardcollection: "foo.items", key: {"age": 1, "_id":1}, unique: true}) 
```

如何检查 whcih 分片中的数据？或者我如何从指定的分片中获取数据？可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:13:47.550

当你想知道哪个分片保存了多少数据时，你可以使用

```
db.printShardingStatus(); 
```

命令。

我自己没有尝试过，但是我觉得应该可以在使用mongo程序直接连接到shard的mongod进程而不是mongos router进程的时候查询到特定的shard。在任何情况下，您都应该只为进行故障排除而这样做。您的应用程序应该信任 mongos 将查询分发到正确的分片，而不是直接访问分片。

# objective-c - 数据源模式与配置对象时设置属性

> ID：12352832
> 
> 赞同：3
> 
> 时间：2012-09-10T13:32:25.030
> 
> 标签：objective-c, ios, oop

我经常对何时使用数据源模式以及何时使用属性为对象提供配置信息感到困惑。

我有两种方法可以做到这一点，

通常，我在对象的类中保留了许多必须配置的属性，以及重置对象并继续使用新属性的方法。

对于正在配置另一个对象的对象，我保留了一个名为 configureXYZ:WithValues: 的方法，它重置属性并调用要配置的对象的重置方法。

这是我在 MPMoviePlayerController 中看到的，我们必须设置属性。

其他方式是 tableView 的工作方式，所有配置信息都来自数据源方法。

任何人都可以更清楚地说明在哪种情况下首选哪种方式。

因为我经常很想使用设计模式并使代码看起来很时尚，但我想知道我们什么时候真正需要这些。我对委托模式非常清楚，并且必须定期使用它。DataSource 是我一直不清楚的一件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:03:48.817

在设计类时，在决定使用委托或属性时应考虑的关键因素是值的更改频率。如果您将设置一次值并且它们不应再次更改，则属性将发挥最佳作用。如果值可能随时间变化或因条件而变化，则委托（其中数据源只是一个示例）效果最好。

例如，在 中`UITableView`，行数是高度动态的。它可能由于表格视图控制之外的许多原因而改变。行甚至代表的是高度动态的。它们可能是数据；它们可能是菜单选项；它们可能是游戏中的一部分。`UITableView`不会试图猜测或控制任何这些。它将其移动到可以做出可能非常复杂的决策的委托（数据源）。

`MPMoviePlayerController`有一些控件意味着非常具体的事情，几乎永远不会改变（特别是一旦电影开始播放）。基本上你把东西设置好，打到`play`然后走开。在这种情况下，代表可能会矫枉过正。

中间有很多情况，任何一种方式都可能没问题。我会鼓励开发人员首先考虑委托，然后如果没有意义就使用属性。这并不是因为委托总是正确的答案，而是因为大多数受过 C++ 或 Java 教育的开发人员不考虑委托，因此应该有意识地这样做。

沿着这些思路的其他一些想法：

*   使用属性时，如果它们在初始化时配置并且此后是不可变的，那么它们是理想的。这解决了很多问题。

*   如果您发现自己需要很多属性，委托可能会更好，而且通常更简单。

*   委托通知方法 ( `somethingDidHappen:`) 通常更好地实现为块。（块在 ObjC 中相对较新。许多基于委托的 Apple 接口正在转向块，但由于历史原因，您会看到真正的混合。）

*   “委托”和“数据源”之间的区别在于委托管理行为，而数据源提供数据。它们通常以相同的方式实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:45:39.410

这主要取决于班级的动态。UITableView 是一个非常动态的界面元素。它的数据来来去去。您可以添加/删除/编辑/排序。你可以和它互动。如果您将属性分配给 tableView，它会丢失一些使其像它一样健壮的属性。另一方面，MPMoviePlayerController 有不同的用途。我从来没有使用过这个类，但从它的外观来看，它读取一个视频文件并提供播放。它没有太多变化，所以属性很有意义。

如果您正在编写一个类，并且您需要该类尽可能灵活（UIPickerView、UITableView），那么拥有委托可以让您这样做。如果您的类在初始化后仅适用于有限的配置，那么采用属性方法可能会更好。

# sharepoint - 在 SharePoint 中自动构建和部署

> ID：12352842
> 
> 赞同：2
> 
> 时间：2012-09-10T13:33:17.547
> 
> 标签：sharepoint, deployment, visual-studio-2012

为了自动构建和部署 SharePoint 解决方案，我应该如何在 Visual Studio 2012 中指定我的构建定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:48:34.050

虽然不是 VS 2012，但我最喜欢的博主之一的这篇文章系列可能会对您有所帮助：[http ://www.sharepointnutsandbolts.com/2011/06/sp2010-continuous-integrationpt-1.html](http://www.sharepointnutsandbolts.com/2011/06/sp2010-continuous-integrationpt-1.html)

# mysql - Mysql union 子句识别表

> ID：12352846
> 
> 赞同：0
> 
> 时间：2012-09-10T13:33:31.870
> 
> 标签：mysql, select, union

我有一个 mysql 表，其中包含跨多个表的大量数据。因此，为了得到这一切，我认为最好的办法是使用 UNION 子句，但是我也想知道结果来自哪个表，因为有些表有多个值，有些是空的。

以下 sql 似乎不起作用，但我看不出有什么问题。

```
 (SELECT *, `2` AS 'cat' from `2` where `recid` = 'cneta0ld00ah')
  UNION
 (SELECT *, `3` AS 'cat' from `3` where `recid` = 'cneta0ld00ah')
  UNION
 (SELECT *, `4` AS 'cat' from `4` where `recid` = 'cneta0ld00ah')
  UNION
 (SELECT *, `5` AS 'cat' from `5` where `recid` = 'cneta0ld00ah') 
```

所有类似于以下内容的表都被命名为 1、2、3、4 等。

```
 recid         | item
 -------------------------
 cneta0ld00ah  |   1
 cneta0ld00ab  |   1
 cneta0ld00ad  |   3 
```

我无法更改表的名称，因为它是从我们试图转换和提取数据的非常旧的数据库中导入的。

如果我在没有 'table-name' AS 'cat' 的情况下运行它，那么它运行良好，只要我尝试添加表名，它就会抛出一个错误说

```
Unknown column '2' in 'field list' 
```

似乎在想 2 是一个列名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:51:44.833

问题是'table-name' AS 'cat' 周围的反引号。反引号用于引用表和列名，而不是字符串。您应该改用单引号：

```
 (SELECT *, '2' AS 'cat' from `2` where `recid` = 'cneta0ld00ah')
  UNION
 (SELECT *, '3' AS 'cat' from `3` where `recid` = 'cneta0ld00ah')
  UNION
 (SELECT *, '4' AS 'cat' from `4` where `recid` = 'cneta0ld00ah')
  UNION
 (SELECT *, '5' AS 'cat' from `5` where `recid` = 'cneta0ld00ah') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:35:09.277

所有的表都具有相同的结构吗？在 a `Union`, with `select *`, 他们需要。

如果是这样，请尝试删除括号

```
SELECT recid, item, `2` AS `cat` from `2` where `recid` = 'cneta0ld00ah'
UNION 
SELECT recid, item, `3` AS `cat` from `3` where `recid` = 'cneta0ld00ah' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:49:37.270

使用`UNION ALL`而不是`UNION`.

```
(SELECT *, `2` AS 'cat' from `2` where `recid` = 'cneta0ld00ah')
 UNION ALL
(SELECT *, `3` AS 'cat' from `3` where `recid` = 'cneta0ld00ah')
 UNION ALL
(SELECT *, `4` AS 'cat' from `4` where `recid` = 'cneta0ld00ah')
 UNION ALL
(SELECT *, `5` AS 'cat' from `5` where `recid` = 'cneta0ld00ah') 
```

`UNION`应在选择相关信息时使用，类似于`JOIN`，因为只会选择不同的值。`UNION ALL`不会删除重复项，因此也减少了查找不同值所需的时间。

您还应该始终指定列列表，而不是`SELECT *`.

# c# - c#outlook插件，在搜索结果中添加列

> ID：12352850
> 
> 赞同：2
> 
> 时间：2012-09-10T13:33:42.523
> 
> 标签：c#, outlook, outlook-addin

我正在尝试编写一个 Outlook 插件，在搜索结果中添加一个新列，该列显示找到的电子邮件文件夹的完整路径。

是否可以在现有搜索中添加新列，如果可以，如何添加？有没有一些讲授office插件编程基础知识的教程或者电子书？

谢谢你

PS：这似乎是一个非常基础的任务，但我之前没有写过office插件。我的经验仅限于一些小型 WPF 应用程序。

# css - 绝对定位元素内的原生滚动条

> ID：12352851
> 
> 赞同：8
> 
> 时间：2012-09-10T13:33:43.793
> 
> 标签：css

我在元素上的滚动条上遇到了一些问题`position: absolute`。我遇到的行为是 chrome 21 和 firefox 15 在框中显示滚动条，调整其内容的大小从而隐藏了一些文本，但是歌剧 12 和 internet explorer 9 也在内部显示它，但没有调整它的内容大小和调整大小而是盒子（我认为这是正确的，因为盒子没有定义宽度）。有什么解决方案可以让这 4 个浏览器看起来一样吗？

JsFiddle：http: [//jsfiddle.net/Kukkimonsuta/GaMD7/2/](http://jsfiddle.net/Kukkimonsuta/GaMD7/2/)

编辑：正如 Siva Charan 指出的那样，当溢出-y 设置为“滚动”时它可以正常工作，但是总是显示滚动条，这是不需要的

编辑：我基于[Siva Charan](https://stackoverflow.com/users/500725/siva-charan)的回答和[匿名否决投票的最终解决方案是蹩脚的](https://stackoverflow.com/users/144665/anonymous-down-voting-is-lame)

[http://jsfiddle.net/Kukkimonsuta/GaMD7/15/](http://jsfiddle.net/Kukkimonsuta/GaMD7/15/)

```
function updateAutoScroll(element) {
    var $element = $(element);

    if (element.scrollHeight > element.clientHeight) 
        $element.css("overflow-y", "scroll");
    else 
        $element.css("overflow-y", "auto");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:38:42.677

在所有浏览器中动态执行此操作的唯一方法是使用 JavaScript，为简单起见，我使用了 jQuery。

[http://jsfiddle.net/iambriansreed/mYuQx/](http://jsfiddle.net/iambriansreed/mYuQx/)

```
$(function(){

    // loops through each container
    $('.container').each(function(){                
        if(this.scrollHeight>this.clientHeight)
            $(this).children().wrapAll(
                '<div style="padding-right:'+scrollbarWidth()+'px;"/>'
            );
    });

    // gets the browsers current scrollbar width
    function scrollbarWidth() {
        var parent, child, width;    
        if(width===undefined) {
            parent = $('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body');
            child = parent.children();
            width = child.innerWidth() - 
                child.height(99).innerWidth();
            parent.remove();
        }    
        return width;
    };

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:48:06.287

添加`overflow-y: scroll;`到`.container.two`

```
.container.two {
    top: 250px;
    overflow-y: scroll;
} 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/GaMD7/6/)**

## 更新：

如果你觉得舒服，你可以使用`text-overflow: ellipsis;`和更换`&nbsp;`到实际空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:20:07.757

这更像是一种解决方法，而不是实际的解决方案，但它可能已经足够好了。基本上，首先将 的内容包装`container two`在 another`div`中，并为其添加一些正确的填充。确保您还设置`width: 100%`了`.item`.

这是您演示的修改版本：[little link](http://jsfiddle.net/glee/vbmEs/)。

这并不完美，但我希望它有所帮助！

# annotations - 在转到 onMessage() 之前如何处理 MDB 控件中的 RunTimeExceptions

> ID：12352854
> 
> 赞同：1
> 
> 时间：2012-09-10T13:33:48.747
> 
> 标签：annotations, ejb, ejb-3.0, jboss7.x, mdb2

```
I was written a simple MessageListener(MDB) it is working fine.How to handle runtime exceptions in this. 
```

[例如：如果尝试使用错误的队列名称（例如“XXXX”而不是正确的队列名称部署此侦听器，那么它会显示异常并且部署失败也即将到来。）

那么如何避免这种类型的异常是否有可用的注释。

我试图在下面处理`Class(ORANGE_QUEUE_MDB)`。但控制并没有进入里面。请帮助我如何解决此类错误。

```
@MessageDriven(name="WEBSPHERE_MDB",
        activationConfig = {  

                            @ActivationConfigProperty(propertyName="messagingType",propertyValue="javax.jms.MessageListener"),
                            @ActivationConfigProperty(propertyName = "destinationType",propertyValue = "javax.jms.Queue"),
                            @ActivationConfigProperty(propertyName = "destination", propertyValue = "ORANGE.QUEUE"),
                            @ActivationConfigProperty(propertyName = "useJNDI", propertyValue = "false"),
                            @ActivationConfigProperty(propertyName = "channel", propertyValue = "SYSTEM.DEF.CONN"),
                            @ActivationConfigProperty(propertyName = "hostName", propertyValue = "192.168.22.29"),
                            @ActivationConfigProperty(propertyName = "queueManager", propertyValue = "manager"),
                            @ActivationConfigProperty(propertyName = "port", propertyValue = "1414"),
                            @ActivationConfigProperty(propertyName = "transportType", propertyValue = "CLIENT"),
                            @ActivationConfigProperty(propertyName = "username", propertyValue = "mqm"),
                            @ActivationConfigProperty(propertyName = "password", propertyValue = "password")

                            },
                            mappedName = "ORANGE.QUEUE", 
                            messageListenerInterface = MessageListener.class)

@ResourceAdapter(value = "wmq.jmsra.rar")
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
@ApplicationException(rollback = true)

public class ORANGE_QUEUE_MDB extends RuntimeException implements MessageListener 
{
    public void onMessage(Message message) {

     try{
         TextMessage textMessage=(TextMessage) message;

        }
    catch(Exception e)
    {
        e.printStackTrace();
    } 
```

当我在 Jboss 中部署上面的侦听器（队列名称错误）时，它显示在异常下方，异常如下所示：

```
11:17:14,630 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.deployment.unit."WEBSPHERE_MDB.jar".component.WEBSPHERE_MDB.START: 
org.jboss.msc.service.StartException in service jboss.deployment.unit."WEBSPHERE_MDB.jar".component.WEBSPHERE_MDB.START: Failed to start service
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]
Caused by: java.lang.RuntimeException: com.ibm.mq.connector.DetailedResourceException: MQJCA0001: An exception occurred in the JMS layer. 
See the linked exception for details., error code: MQJCA0001 A call to WebSphere MQ classes for JMS caused an exception to be thrown. 
See the linked exception for details of the failure.
        at org.jboss.as.ejb3.component.messagedriven.MessageDrivenComponent.start(MessageDrivenComponent.java:171)
        at org.jboss.as.ee.component.ComponentStartService.start(ComponentStartService.java:44)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        ... 3 more
**Caused by: com.ibm.mq.connector.DetailedResourceException:** MQJCA0001: An exception occurred in the JMS layer. See the linked exception for details., 
error code: MQJCA0001 A call to WebSphere MQ classes for JMS caused an exception to be thrown. See the linked exception for details of the failure.
        at com.ibm.mq.connector.services.JCAExceptionBuilder.buildException(JCAExceptionBuilder.java:124)
        at com.ibm.mq.connector.services.JCAExceptionBuilder.buildException(JCAExceptionBuilder.java:100)
        at com.ibm.mq.connector.inbound.MessageEndpointDeployment.start(MessageEndpointDeployment.java:351)
        at com.ibm.mq.connector.inbound.MessageEndpointDeployment.<init>(MessageEndpointDeployment.java:301)
        at com.ibm.mq.connector.ResourceAdapterImpl.endpointActivation(ResourceAdapterImpl.java:463)
        at org.jboss.jca.core.rar.EndpointImpl.activate(EndpointImpl.java:164)
        at org.jboss.as.ejb3.component.messagedriven.MessageDrivenComponent.start(MessageDrivenComponent.java:169)
        ... 6 more
**Caused by: com.ibm.msg.client.jms.DetailedInvalidDestinationException: JMSWMQ2008: Failed to open MQ queue 'OORANGE.QUEUE'.**
JMS attempted to perform an MQOPEN, but WebSphere MQ reported an error. Use the linked exception to determine the cause of this error. 
Check that the specified queue and queue manager are defined correctly.
        at com.ibm.msg.client.wmq.common.internal.Reason.reasonToException(Reason.java:520)
        at com.ibm.msg.client.wmq.common.internal.Reason.createException(Reason.java:236)
        at com.ibm.msg.client.wmq.internal.WMQMessageConsumer.checkJmqiCallSuccess(WMQMessageConsumer.java:128)
        at com.ibm.msg.client.wmq.internal.WMQConsumerShadow.initialize(WMQConsumerShadow.java:856)
        at com.ibm.msg.client.wmq.internal.WMQAsyncConsumerShadow.initialize(WMQAsyncConsumerShadow.java:724)
        at com.ibm.msg.client.wmq.internal.WMQConnectionBrowser.<init>(WMQConnectionBrowser.java:1230)
        at com.ibm.msg.client.wmq.internal.WMQConnection.createConnectionBrowser(WMQConnection.java:872)
        at com.ibm.msg.client.jms.internal.JmsConnectionImpl.createConnectionBrowser(JmsConnectionImpl.java:922)
        at com.ibm.msg.client.jms.internal.JmsConnectionConsumerImpl.createConnectionBrowser(JmsConnectionConsumerImpl.java:238)
        at com.ibm.msg.client.jms.internal.JmsConnectionConsumerImpl.<init>(JmsConnectionConsumerImpl.java:166)
        at com.ibm.msg.client.jms.internal.JmsConnectionConsumerImpl.<init>(JmsConnectionConsumerImpl.java:116)
        at com.ibm.msg.client.jms.internal.JmsConnectionImpl.createConnectionConsumer(JmsConnectionImpl.java:415)
        at com.ibm.mq.jms.MQConnection.createConnectionConsumer(MQConnection.java:215)
        at com.ibm.mq.connector.inbound.MessageEndpointDeployment.createConnectionConsumer(MessageEndpointDeployment.java:486)
        at com.ibm.mq.connector.inbound.MessageEndpointDeployment.start(MessageEndpointDeployment.java:331)
        ... 10 more
**Caused by: com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ call failed with compcode '2' ('MQCC_FAILED') reason '2085' ('MQRC_UNKNOWN_OBJECT_NAME').**
        at com.ibm.msg.client.wmq.common.internal.Reason.createException(Reason.java:223)
        ... 23 more 
```

如何处理这些异常并替换为`Userdefind`自定义错误消息。像（队列配置错误请检查）等。

# python - 使用工厂通过直通类生成具有 ManyToMany 的模型以进行测试

> ID：12352859
> 
> 赞同：3
> 
> 时间：2012-09-10T13:34:07.750
> 
> 标签：python, django

我有以下模型，我想在我的测试中使用 Factory-boy（或类似的东西）生成：

```
class Questionnaire(models.Model):
    name=models.CharField(max_length=250)
    questiongroup=models.ManyToManyField(QuestionGroup, through='QuestionGroup_order') 
```

QuestionGroup_order 在哪里：

```
class QuestionGroup_order(models.Model):
    questiongroup=models.ForeignKey(QuestionGroup)
    questionnaire=models.ForeignKey(Questionnaire)
    order_info=models.IntegerField(max_length=3) 
```

有谁知道如何使用像 Factory-Boy 这样的东西来做到这一点，或者你能建议一种替代方法（除了使用我目前正在做的固定装置）？

# c# - 在同一页面的网格中显示下拉选择的值

> ID：12352870
> 
> 赞同：0
> 
> 时间：2012-09-10T13:34:43.037
> 
> 标签：c#, asp.net, gridview, drop-down-menu, asprepeater

我有一个下拉列表，其中包含代表列表。当用户选择一个代表时，我使用第一个下拉 Aspx 页面的 selectedindexchange 事件在第二个下拉列表中填充可用的会议时间

```
<asp:DropDownList ID="delegate_ddl" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ddldelegates_SelectedIndexChanged" Width="200px"></asp:DropDownList>
<asp:DropDownList ID="delegatetime_ddl" runat="server" Width="90px"></asp:DropDownList>
<asp:Button ID="adddelegate" runat="server" Text="Add" onclick="adddelegate_Click"/> 
```

.cs 页面

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DataSet ds1 = getdata.getdelegatelist();
                delegate_ddl.DataSource = ds1.Tables[0];
                delegate_ddl.DataTextField = "DELEGATE_NAME";
                delegate_ddl.DataValueField = "DELEGATE_ID";
                delegate_ddl.DataBind();
                delegate_ddl.Items.Insert(0, "--Select--"); 
            }

        }
        protected void ddldelegates_SelectedIndexChanged(object sender, EventArgs e)
        {
            string delselection = delegate_ddl.SelectedValue.ToString();
            DataSet ds2 = getdata.getdelegatetimelist(delselection);
            if (ds2.Tables[0].Rows.Count > 0)
            {
                delegatetime_ddl.DataSource = ds2.Tables[0];
                delegatetime_ddl.DataTextField = "TIMESLOT";
                delegatetime_ddl.DataValueField = "TIMEID";
                delegatetime_ddl.DataBind();
            }
            else
            {
                time_lbl.Text = "No slots Open";
            }
        }
        protected void adddelegate_Click(object sender, EventArgs e)
        {
            string delegateselected = delegate_ddl.SelectedValue.ToString();
            string timeslotselected = delegatetime_ddl.SelectedValue.ToString();
            getdata.delegatemeetinsert(personidd, delegateselected, timeslotselected);
        } 
```

现在数据被插入了——但我的问题是只要用户单击添加按钮，我想在下面的某种网格视图或动态表中显示选择的委托和选择的时隙，并带有删除选项。有人可以提供 C# 中的代码示例来实现上述目标吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:11:58.477

而不是使用 Gridview 来显示数据，而是使用一些基本的控件，如标签，它将减少很多不必要的代码。使用 Asp.net 'Panel' 控件并将所有标签和按钮（用于删除目的）封装到 Panel 中，然后根据需要隐藏/显示。这是可能对您有所帮助的代码大纲，

```
if(!page.IsPostBack) // This goes into Page_Load
{
Panel1.Visible=false;
}

protected void adddelegate_Click(object sender, EventArgs e)   // add this additional code
{
Panel.Visible=True;
GetDelegate()// This method retrieve the delegate you inserted..
Lable1.Text= "Set here Delegate name you just Retrieved"
Label2.Text="Delegate time you retrived"
}

protected void BtnRemovedelegate_Click(object sender, EventArgs e)

{
string Personidd= retrieve person id
string delegateName= Lable1.text;
String timeslot=Label2.Text
SomeDeleteMethod(personidd, delegateName, timeslot); 
Panel1.Visible=false;
} 
```

希望你能明白..

# ios5 - 我们可以在IOS中使用普通打印机打印吗

> ID：12352871
> 
> 赞同：-2
> 
> 时间：2012-09-10T13:34:43.703
> 
> 标签：ios5, ios4

我想知道我是否只能通过 AIRPrint 打印机打印文件。

或者

我可以通过连接到可以通过 WIFI 连接的机器的普通打印机进行打印。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:47:00.907

除了 AirPrint 打印机之外，没有内置的 API 可以打印到任何东西。

如果您付出所有努力编写自己的打印机驱动程序（或移植其他人的驱动程序），您大概可以打印到普通打印机，但这并不简单。

# android - 如何在 WebView 中解码 HTML 引号

> ID：12352873
> 
> 赞同：1
> 
> 时间：2012-09-10T13:34:50.217
> 
> 标签：android, html, android-webview

我有一个使用 WebView 并使用 WebView.LoadData(); 呈现 html 数据的活动；它适用于大多数 html 数据，但如果 Html 包含像 "
& # 6 0 ; p & # 6 2 ; & # 6 0;"这样的引号 WebView 无法正确解码该 html 并在 WebView 中显示 html 标记。

虽然我已经尝试过这段代码：

```
 for(char c: rssFeed.getDescription().toCharArray()){

        switch (c) {
         case '#':  htmlBuffer.append("%23"); break;
         case '%':  htmlBuffer.append("%25"); break;
         case '\'': htmlBuffer.append("%27"); break;
         case '?':  htmlBuffer.append("%3f"); break;     
         case '&':  htmlBuffer.append("%26"); break;
         case ':':  htmlBuffer.append("%3A"); break;
         case ';':  htmlBuffer.append("%3B")  ;break;
         case '/': htmlBuffer.append("%2F"); break;

         default:
           htmlBuffer.append(c);
           break;
        }
    } 
```

但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:27:13.297

尝试使用 Base64 对所有内容进行编码。以下应该有效：

```
String content  = "html content";  // the html data
String base64 = android.util.Base64.encodeToString(data.getBytes("UTF-8"), android.util.Base64.DEFAULT);
webView.loadData(base64, "text/html; charset=utf-8", "base64"); 
```

# php - 将上传值发送到隐藏字段时遇到问题

> ID：12352875
> 
> 赞同：0
> 
> 时间：2012-09-10T13:35:02.113
> 
> 标签：php, javascript, jquery, uploadify

我一直在努力解决我的问题。我查看了谷歌负载并尝试了修复，但我一点运气都没有。

```
$(function() {
    $("#listing_pic").uploadify({
        height        : 30,
        swf           : 'uploadify/uploadify.swf',
        uploader      : 'uploadify/uploadify.php',
        width         : 120,
        fileExt       : '*.jpg; *.jpeg; *.JPG; *.JPEG;',
        checkExisting : 'uploadify/check-exists.php',
        simUploadLimit: 2,
        fileSizeLimit : '4MB',
        auto          : true,
        multi         : true,
        onComplete    : function(event,queueID,fileObj,response,data) {
            $('#hiddenlistingpic').val(response);
        },
    });
}); 
```

我试图让 Uploadify 将我的图像上传到我的服务器（工作正常），然后将文件名发送到隐藏字段，以便我可以将数据发布到我的数据库更新类中。这让我很头疼，而且我非常确定这是一个简单的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:54:39.107

从这里：[https ://stackoverflow.com/a/3466188/1253747](https://stackoverflow.com/a/3466188/1253747)

```
$(function() {
$("#listing_pic").uploadify({
    height        : 30,
    swf           : 'uploadify/uploadify.swf',
    uploader      : 'uploadify/uploadify.php',
    width         : 120,
    fileExt       : '*.jpg; *.jpeg; *.JPG; *.JPEG;',
    checkExisting : 'uploadify/check-exists.php',
    simUploadLimit: 2,
    fileSizeLimit : '4MB',
    auto          : true,
    multi         : true,
    onComplete    : function(event,queueID,fileObj,response,data) {
        $('#hiddenlistingpic').val(fileObj.name);
    },
});
}); 
```

或者从uploadify docs，似乎有很多其他方法可以得到它：

```
'onUploadSuccess' : function(file, data, response) {
        $('#hiddenlistingpic').val(file.name);
    } 
```

同样的事情可以用`onuploadcomplete`. 或者还有什么我想念的吗？

# c++ - 从 C++ 中调用 .NET CLR 时，返回错误

> ID：12352876
> 
> 赞同：1
> 
> 时间：2012-09-10T13:35:02.023
> 
> 标签：c++

我正在从 C++ 调用 .NET 程序集。

这对于我调用的任何测试 .NET 4.0 项目都非常有效。

但是，当调用具有 20 个子程序集的大型项目时，它会失败并出现以下错误：

```
Failed to execute assembly: 0x80004003\. GetLastError=126\. dwReturn=1. 
```

这是生成错误的 C++ 代码：

```
DWORD dwReturn;
hr = pCLR->ExecuteInDefaultAppDomain(szApplication, szEntryType, szEntryMethod, szParameter, &dwReturn);
if (FAILED(hr))
{
    // Fails if I try the production assembly, with 20 subassemblies.
    printf("    Failed to execute assembly: 0x%X. GetLastError=%d. dwReturn=%d.\n", hr, GetLastError(), dwReturn);
}
else
{
    // Works 100% if I plug in a small toy assembly in .NET 4.0.
    wprintf(L"    Assembly returned: %d\n", dwReturn);
} 
```

## 环境

*   视觉工作室 2010 SP1。
*   上面代码的 C++。
*   .NET 4.0 用于目标程序集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:49:57.517

您的托管代码因 NullReferenceException 而死。它的 Exception.HResult 值为 0x80004003，E_POINTER。

显然，这是托管代码死亡的一个非常常见的原因。在从托管代码转换回本机代码的过程中，您将丢失大量异常上下文。这给托管代码带来了一些负担，需要进行一些基本的错误日志记录，至少是全能的 Exception.StackTrace。.NET 4 AppDomain.FirstChanceException 事件可能很有用。

通过启用托管代码调试、项目 + 属性、调试、调试器类型 = 混合来调试问题。并且 Debug + Exceptions, Thrown 复选框用于 CLR 异常，因此调试器会在抛出异常时停止程序。

# linux - 制作 gobject-introspection-1.32.1 期间的 Linux 错误

> ID：12352877
> 
> 赞同：0
> 
> 时间：2012-09-10T13:35:05.270
> 
> 标签：linux, linux-kernel, gobject, udev

我想在我的嵌入式 Linux 上安装 gobject-introspection-1.32.1。但在`make`此期间出现错误消息。

有人现在该怎么办吗？

```
-bash-3.2# make                                                                
[ -d gir ] || /bin/mkdir -p gir ; \
    sed \
    -e s,%CAIRO_SHARED_LIBRARY%,, \
    -e s,%CAIRO_GIR_PACKAGE%,, \
    < gir/cairo-1.0.gir.in > gir/cairo-1.0.gir.tmp && mv gir/cairo-1.0.gir.tmp gir/cairo-1.0.gir
make  all-recursive
make[1]: Entering directory `/root/gobject-introspection-1.32.1'
Making all in .
make[2]: Entering directory `/root/gobject-introspection-1.32.1'
  GEN    g-ir-scanner
  GEN    g-ir-annotation-tool
  GISCAN GLib-2.0.gir
Traceback (most recent call last):
  File "./g-ir-scanner", line 44, in <module>
    from giscanner.scannermain import scanner_main
  File "./giscanner/scannermain.py", line 29, in <module>
    import tempfile
  File "/usr/local/lib/python2.7/tempfile.py", line 34, in <module>
    from random import Random as _Random
  File "/usr/local/lib/python2.7/random.py", line 881, in <module>
    _inst = Random()
  File "/usr/local/lib/python2.7/random.py", line 97, in __init__
    self.seed(x)
  File "/usr/local/lib/python2.7/random.py", line 111, in seed
    a = long(_hexlify(_urandom(16)), 16)
RuntimeError: Failed to read %zi bytes from /dev/urandom

make[2]: *** [GLib-2.0.gir] Error 1
make[2]: Leaving directory `/root/gobject-introspection-1.32.1'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/root/gobject-introspection-1.32.1'
make: *** [all] Error 2 
```

# java - connect to the server util the server startup

> ID：12352878
> 
> 赞同：2
> 
> 时间：2012-09-10T13:35:05.313
> 
> 标签：java, connect

I use the netty3.4.2 connect to the server util the server startup the code is:

```
ThreadPoolExecutor bossExecutor = new ThreadPoolExecutor(1, 5, 20L, TimeUnit.SECONDS,new SynchronousQueue<Runnable>(),new ThreadPoolExecutor.CallerRunsPolicy());

ThreadPoolExecutor workerExecutor = new ThreadPoolExecutor(1, 10, 20L, TimeUnit.SECONDS,new SynchronousQueue<Runnable>(),new ThreadPoolExecutor.CallerRunsPolicy());

NioClientSocketChannelFactory clientSocketChannelFactory = new NioClientSocketChannelFactory(bossExecutor,workerExecutor);

ClientBootstrap clientBootstrap = new ClientBootstrap(clientSocketChannelFactory);

...
...

clientBootstrap.connect(..); 
```

Invoke the connect method, the server is closed. Then reConnect the server ,but result in more threads?

# asp.net-mvc-3 - 带有 ASP.NET MVC 3 的 Wijmo 网格

> ID：12352882
> 
> 赞同：0
> 
> 时间：2012-09-10T13:35:10.463
> 
> 标签：asp.net-mvc-3, wijmo

我正在寻找实施[Wijmo Grid 的示例/教程或指南。](http://wijmo.com/widgets/wijmo-complete/grid/)

我希望在 ASP.NET MVC 3 中实现这一点。我将从我的操作中传递动态数据。

请有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:45:32.010

这是一个完全与服务器端无关的纯客户端网格。该[文档](http://wijmo.com/wiki/index.php/Grid)似乎也很不言自明。我邀请你通过它。

一旦你完成它，事情就会变得非常标准。

您从一个保存动态数据的视图模型开始：

```
public class MyViewModel
{
    public object[] Rows { get; set; }
} 
```

然后是一个控制器，它将将此视图模型提供给视图：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            // This data could of course be dynamic and come from wherever you like it to come
            Rows = new object[] 
            {
                new object[] { 1, "a" },
                new object[] { 2, "b" },
                new object[] { 3, "c" },
            }
        };
        return View(model);
    }
} 
```

最后是一个观点：

```
@model MyViewModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Wijmo grid demo </title>
</head>
<body>
    <table id="mytable"></table>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>

    <!--Theme-->
    <link href="http://cdn.wijmo.com/themes/rocket/jquery-wijmo.css" rel="stylesheet" type="text/css" title="rocket-jqueryui" />

    <!--Wijmo Widgets CSS-->
    <link href="http://cdn.wijmo.com/jquery.wijmo-complete.all.2.2.1.min.css" rel="stylesheet" type="text/css" />

    <!--Wijmo Widgets JavaScript-->
    <script src="http://cdn.wijmo.com/jquery.wijmo-open.all.2.2.1.min.js" type="text/javascript"></script>
    <script src="http://cdn.wijmo.com/jquery.wijmo-complete.all.2.2.1.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $("#mytable").wijgrid({
            data: @Html.Raw(Json.Encode(Model.Rows))
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T06:53:30.613

这是我在@Darin Dimmitrov 的帮助下所做的

```
public ActionResult Index()
{
    var entity = new BloggingEngineDBEntities();
    var result = entity.Users.ToList();

    var model = new MyViewModel();

    var objArray = new object[result.Count];
    int counter = 0;

    foreach (var item in result)
    {
        objArray[counter] = new object[]
                                {
                                    item.UserName,
                                    item.Password,
                                    item.DisplayName,
                                    item.Email,
                                    item.AllowNotifications,
                                    item.ImageFilePath
                                };
        counter++;
    }

    model.Rows = objArray;

    return View(model);
} 
```

它有效:)，希望有人觉得这很有用。

# mysql - 跨应用程序不同部分的文章类别模式，统一还是分开？

> ID：12352883
> 
> 赞同：0
> 
> 时间：2012-09-10T13:35:17.330
> 
> 标签：mysql, database, database-design, schema, database-schema

我需要帮助为自定义 CMS 设计架构，其中包含以下表格：

*   产品/文章
*   消息
*   活动

每个表都有通常的东西（只有 id 和非文本字段，文本字段在多语言表中）......

我的问题来自创建一个 ___CATEGORY 表，每个主表都有一个相关的类别表

我应该为每个“主”表创建两个单独的表（一个用于类别，一个用于关系）

```
ProductCategory ( category_id ... )
ProductCategoryRel ( category_id , product_id )

NewsCategory ( category_id ... )
NewsCategoryRel ( category_id , news_id )

EventCategory ( category_id ... )
EventCategoryRel ( category_id , event_id ) 
```

或者我应该像这样创建一些统一的东西：

```
MainCategory ( category_id, type (Product/News/Event) ... )

ProductCategoryRel ( category_id , product_id )
NewsCategoryRel ( category_id , news_id )
EventCategoryRel ( category_id , event_id ) 
```

我真的无法决定，两种解决方案都不完美......

请注意，产品类别可能具有与新闻/事件类别不同（更多）的字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:43:34.637

如果“请注意产品类别可能具有与新闻/事件类别不同（更多）的字段”，那么您绝对应该选择第一个选项。

请参阅[http://www.simple-talk.com/sql/database-administration/ten-common-database-design-mistakes/](http://www.simple-talk.com/sql/database-administration/ten-common-database-design-mistakes/)（“一环统治所有”）

# google-apps-script - Is getLastRow() deprecated?

> ID：12352891
> 
> 赞同：1
> 
> 时间：2012-09-10T13:35:45.570
> 
> 标签：google-apps-script, google-sheets

The documentation for spreadsheet.appendRow() says that it eliminates the need for getLastRow(). I'd actually like to use getLastRow() or something like it so I can append a block of data. Is it safe to use getLastRow(), or will it be depreciated? Unfortunately the docs don't link to the getLastRow() function and I can't figure out how to search the Google Apps API docs without pulling up a bunch of useless posts from their forum discussions.

[https://developers.google.com/apps-script/class_spreadsheet#appendRow](https://developers.google.com/apps-script/class_spreadsheet#appendRow)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:13:39.410

它没有被弃用。它在电子表格 -> 工作表 -> getLastRow() 下进行了描述。

[https://developers.google.com/apps-script/class_sheet#getLastRow](https://developers.google.com/apps-script/class_sheet#getLastRow)

# android - How to check whether Android "Mobile data" is on

> ID：12352893
> 
> 赞同：7
> 
> 时间：2012-09-10T13:35:59.127
> 
> 标签：android, connection

I want my app to check whether "Data network mode" or "Mobile data" is enabled, even if it is not currently active. In other words I need to check whether the app will potentially incur mobile data charges, even if it the phone is currently connected through WiFi.

By googling I have found the following code which checks whether "Mobile data" is "active".

```
ConnectivityManager cm =
        (ConnectivityManager)this.getSystemService(Context.CONNECTIVITY_SERVICE);

NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
boolean isMobile = activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE; 
```

The problem with this code is that if WiFi is active the Mobile data is not reported as active even if it is switched to on.

Can the code be modified to determine whether mobile data is "enabled" and therefore potentially active, rather than as with this code whether it is the currently active connection mode?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-19T07:33:06.373

试试这个，它在大多数情况下都有效。

```
ConnectivityManager cm =
                (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo activeNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        boolean isConnected = activeNetwork != null &&
                activeNetwork.isConnected();

        if (!isConnected)
        {
            return false;
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:54:35.333

尝试这个

```
 ConnectivityManager cm = (ConnectivityManager) 
            activity.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = cm.getActiveNetworkInfo();
        // if no network is available networkInfo will be null
        // otherwise check if we are connected
        if (networkInfo != null && networkInfo.isConnected()) {
            return true;
        }
        return false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-06T12:56:28.973

我不确定这是否适用于所有设备，但它确实适用于我尝试过的一些设备：

```
private boolean isMobileDataEnabled(Context ctx) {
    int mobileData = Settings.Secure.getInt(ctx.getContentResolver(), "mobile_data", 0);
    return mobileData == 1;
} 
```

即使我有一个活动的 WiFi 连接，它似乎也会返回正确的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:26:46.980

请查看此代码：（我在 Play 商店中发布的应用程序之一的代码）

```
private static boolean isAPNEnabled(Context paramContext) {
    try {
        NetworkInfo networkInfo = ((ConnectivityManager) paramContext.getSystemService("connectivity")).getActiveNetworkInfo();
        return networkInfo.isConnected();
    } catch (Exception e) {
        return false;
    }
} 
```

# php - 不能上传超过 10 个文件

> ID：12352894
> 
> 赞同：2
> 
> 时间：2012-09-10T13:36:19.063
> 
> 标签：php, zend-framework

我正在设置一个表单，以便我可以上传多个文件：

```
<div>
    <input type="hidden" name="MAX_FILE_SIZE" value="" id="MAX_FILE_SIZE">
    <input type="hidden" name="UPLOAD_IDENTIFIER" value="" id="progress_key">
    <input type="file" name="image[]" id="image-0">
</div> 
```

此代码将在单击时克隆，因此我可以选择更多文件。问题是，当我尝试上传超过 10 个文件（例如 20 或 30 个文件）时，脚本就死了，当我打印 $_Files 时，数组只有 10 个项目。

```
Array
(
    [image] => Array
        (
            [name] => Array
                (
                    [0] => Nenufares.jpg
                    [1] => Nenufares.jpg
                    [2] => Nenufares.jpg
                    [3] => Nenufares.jpg
                    [4] => Nenufares.jpg
                    [5] => Nenufares.jpg
                    [6] => Nenufares.jpg
                    [7] => Nenufares.jpg
                    [8] => Nenufares.jpg
                    [9] => Nenufares.jpg
                )

            [type] => Array
                (
                    [0] => image/jpeg
                    [1] => image/jpeg
                    [2] => image/jpeg
                    [3] => image/jpeg
                    [4] => image/jpeg
                    [5] => image/jpeg
                    [6] => image/jpeg
                    [7] => image/jpeg
                    [8] => image/jpeg
                    [9] => image/jpeg
                )

            [tmp_name] => Array
                (
                    [0] => /tmp/phpAKZxze
                    [1] => /tmp/phplRShGv
                    [2] => /tmp/phpJz64SW
                    [3] => /tmp/phpBkfMoz
                    [4] => /tmp/phpraMZBl
                    [5] => /tmp/phpeqaEgk
                    [6] => /tmp/phpVwxvFv
                    [7] => /tmp/phplvYiUS
                    [8] => /tmp/phpPGhqGr
                    [9] => /tmp/php5kMZca
                )

            [error] => Array
                (
                    [0] => 0
                    [1] => 0
                    [2] => 0
                    [3] => 0
                    [4] => 0
                    [5] => 0
                    [6] => 0
                    [7] => 0
                    [8] => 0
                    [9] => 0
                )

            [size] => Array
                (
                    [0] => 83794
                    [1] => 83794
                    [2] => 83794
                    [3] => 83794
                    [4] => 83794
                    [5] => 83794
                    [6] => 83794
                    [7] => 83794
                    [8] => 83794
                    [9] => 83794
                )

        ) 
```

我在 zend 端没有任何带有计数或其他任何东西的验证器来阻止它..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:42:08.757

检查您的[php.ini 配置](http://www.php.net/manual/en/ini.core.php#ini.max-file-uploads)：

```
; Maximum number of files that can be uploaded via a single request
max_file_uploads = 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:54:03.473

max_file_uploads ：允许同时上传的最大文件数。从 PHP 5.3.4 开始，提交时留空的上传字段不计入此限制。

# node.js - Spontaneous page reload

> ID：12352898
> 
> 赞同：1
> 
> 时间：2012-09-10T13:36:38.467
> 
> 标签：node.js, socket.io

I have a chat app built in node.js. On the first message between two clients, one of the clients will spontaneously reload. After the reload, I can reconnect to the server, and all is well - I can continue the chat.

I'm really not sure how to troubleshoot this, or what I should be looking for.

There's only one strange thing I've noted.

The user sockets are stored on the server by username. I've told the server to write `*username* has connected`, or `*username* has disconnected` The strange thing is that I get multiple logs of `undefined has disconnected`, and then one `*username* has disconnected`

Thanks for anything to point me in the right direction

# objective-c - 从 NSURLResponse 完成块中获取数据

> ID：12352901
> 
> 赞同：8
> 
> 时间：2012-09-10T13:36:53.020
> 
> 标签：objective-c, ios, nsurlconnection, objective-c-blocks

看来我还没有完全理解块的概念......

在我的代码中，我必须从 ' ' 方法中取出`asychronous block`要返回的 JSON 数据。`outer`我用谷歌搜索，发现如果定义 a `variable with __block`，则 v̶i̶s̶i̶b̶i̶l̶i̶t̶y̶ `_mutability_ of`该变量扩展为`block`.

但由于某种原因，返回的 json 对象是 nil。我想知道为什么？

```
- (NSMutableDictionary *)executeRequestUrlString:(NSString *)urlString
{
__block NSMutableDictionary *json = nil;
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

[request setHTTPShouldHandleCookies:YES];
[request setHTTPMethod:@"GET"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-type"];

NSString *cookieString = [self.userDefaults objectForKey:SAVED_COOKIE];

[request addValue:cookieString forHTTPHeaderField:@"Cookie"];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue currentQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
                       {

                           NSLog(@"dataAsString %@", [NSString stringWithUTF8String:[data bytes]]);

                           NSError *error1;
                           NSMutableDictionary * innerJson = [NSJSONSerialization
                                   JSONObjectWithData:data
                                              options:kNilOptions
                                                error:&error1];
                           json = innerJson;

                       }];

    return json;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-10T13:46:41.827

首先，回答你的问题：

> 但由于某种原因，返回的 json 对象是`nil`. 我想知道为什么？

您返回的变量在您返回时尚未设置。您不能在`sendAsynchronousRequest:queue:completionHandler:`方法返回后立即收获结果：调用必须在回调您的块和设置`json`变量之前完成往返。

现在快速说明如何处理它：您的方法正在尝试将异步调用转换为同步调用。如果可以的话，尽量保持异步。与其期望一个返回 a 的方法，不如创建一个接受自己的块的方法，并在方法完成`NSMutableDictionary*`时将字典传递给该块：`sendAsynchronousRequest:`

```
- (void)executeRequestUrlString:(NSString *)urlString withBlock:(void (^)(NSDictionary *jsonData))block {
    // Prepare for the call
    ...
    // Make the call
    [NSURLConnection sendAsynchronousRequest:request
                                    queue:[NSOperationQueue currentQueue]
                        completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        NSLog(@"dataAsString %@", [NSString stringWithUTF8String:[data bytes]]);
        NSError *error1;
        NSMutableDictionary * innerJson = [NSJSONSerialization
            JSONObjectWithData:data options:kNilOptions error:&error1
        ];
        block(innerJson); // Call back the block passed into your method
        }];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:46:25.133

当您调用 时`sendAsynchronousRequest:queue:completionHandler:`，您已经请求了一个*异步*请求。因此它将请求和块排队并立即返回。在将来的某个时间发出请求，然后运行完成块。但到了那个时候，`return json`早就跑了。

如果您希望能够同步返回数据，那么您必须发出同步请求。这将挂起这个线程直到它完成，所以它不能是主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-16T07:53:25.587

使用以下代码转换来自服务器的数据时检查字符串：

```
 NSLog(@"dataAsString %@", [NSString stringWithUTF8String:[data bytes]]); 
```

如果字符串是正确的 JSON 格式，那么只有你的 JSON 对象才是正确的。

希望这能帮到你！！

# c++ - any available cross-platform LDAP client library?

> ID：12352903
> 
> 赞同：1
> 
> 时间：2012-09-10T13:37:03.800
> 
> 标签：c++, c, ldap

I wonder if there any available library which hides the OS-dependent LDAP client implementation details, like the idea for JDBC? and the library provides basic CRUD functionality also along with unified SSL API like what has been done in wldap32 in Windows.

Really appreciate!

# opencv - OpenCV2.4.2 unhandled exception on VideoCapture

> ID：12352904
> 
> 赞同：7
> 
> 时间：2012-09-10T13:37:05.877
> 
> 标签：opencv, cmake

I just installed OpenCV2.4.2 and created an OpenCV project using CMake. I don't get any compilation errors. I have several functions for processing images and I have 2 applications:

1- Processes data from a video

2- Processes simulated data.

Both applications are identical except from the data extraction from the video.

**PROBLEM**: The application processing video crashes with

> Unhandled exception at 0x75d8a048 in program.exe Access violation reading location 0x049f08c0.

It crashes in this part of the code, when reading frames:

```
cv::VideoCapture _video;
while(1) 
{       
        // grab the frame
        _video >> frame;  <-------------CRASHES HERE
                processFrame(frame);
} 
```

So I guess there could be a problem with `cv::VideoCapture` class in OpenCV 2.4.2\. How can I detect the problem and solve it?

**EDIT**

With video camera I managed to catch the error message:

```
OpenCV Error: Assertion failed (m.dims >= 2) in unknown function, file ..\..\..\
src\opencv\modules\core\src\matrix.cpp, line 268
OpenCV Error: Assertion failed (0 <= _rowRange.start && _rowRange.start <= _rowR
ange.end && _rowRange.end <= m.rows) in unknown function, file ..\..\..\src\open
cv\modules\core\src\matrix.cpp, line 283 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:44:13.030

您是否正在检查捕获是否实际打开了文件/相机？

```
 if(_video.isOpened()) {  // check if capture succeeded
      // do stuff
    } 
```

默认情况下，并非所有编解码器都受支持。这取决于您在下面用来打开视频的库。（这可能是 ffmpeg 或 quicktime）。

您也可以自己捕获异常，以防将来出现问题

```
try {
    _video >> frame;
} catch (cv::Exception) {
    cout << "An exception has accurred" << endl;
}; 
```

# excel - 使一张纸上的所有数据透视表在行扩展和折叠方面相互模仿

> ID：12352905
> 
> 赞同：4
> 
> 时间：2012-09-10T13:37:08.277
> 
> 标签：excel, vba, excel-2010, pivot-table

好吧，我是 VBA 新手，但我知道这必须是可能的。我花了一段时间编写 android 应用程序，但我不会称自己近乎专家，说实话可能甚至不是中级。然而，唉，excel不使用java。这是我的问题：

我所需要的只是在同一张表上制作 6 个其他数据透视表来模仿我将称之为主数据透视表的内容。它需要模仿的唯一功能（现在我想）是当主要扩展/折叠时，其他应该效仿。

我猜代码将类似于 java 中的 onclicklistener，当代码“听到”主数据透视表中的折叠或展开的点击时，它只是将相同的折叠或展开应用于其他六个。其他 6 个枢轴将始终具有相同的行标签，因此将点击的“位置”从主节点转移到其他节点时出错应该永远不会成为问题。

我尝试在我的数据透视表中记录其中一个行标签的扩展并取回此代码。

```
ActiveSheet.PivotTables("PivotTable1").PivotFields("Year").PivotItems("2005"). _
    ShowDetail = True 
```

不过我知道，这是执行该扩展的编码（并且 ShowDetail = False 会使它崩溃）。我想我需要的就像我说的那样，一个听众“听到”主数据透视表的任何展开/折叠的点击，一种存储/携带有关点击了哪些行标签的信息的方法（“位置”如果您愿意，请单击），然后使用上述代码的通用版本在其他 6 上执行，我猜是一个 for 循环。

我在正确的轨道上削减任何帮助吗？一如既往地感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T18:59:44.420

这应该适合你：

把它放在一个标准模块中（这是效率较低的方法 - 因为它检查所有字段）：

```
Sub LinkPivotTables_ByFieldItemName_ToShowDetail(pt As PivotTable)

Dim wkb As Workbook
Set wkb = ThisWorkbook

Dim wks As Worksheet
Set wks = wkb.Sheets(1)

Dim PivotTableIndex As Integer
Dim PivotFieldIndex As Integer
Dim PivotItemIndex As Integer

Dim PivotFieldIndexName As String
Dim PivotItemIndexName As String

Dim BoolValue As Boolean

Application.ScreenUpdating = False
Application.EnableEvents = False

On Error Resume Next

    For PivotFieldIndex = 1 To pt.PivotFields.Count

    PivotFieldIndexName = pt.PivotFields(PivotFieldIndex).Name

        For PivotItemsIndex = 1 To pt.PivotFields(PivotFieldIndex).PivotItems.Count

        PivotItemIndexName = pt.PivotFields(PivotFieldIndex).PivotItems(PivotItemsIndex).Name
        BoolValue = pt.PivotFields(PivotFieldIndex).PivotItems(PivotItemsIndex).ShowDetail

            For PivotTableIndex = 1 To wks.PivotTables.Count

                ' This If statement will dramatically increase efficiency - because it takes a long long time to set the value but it doesn't take long to check it.
                If wks.PivotTables(PivotTableIndex).PivotFields(PivotFieldIndexName).PivotItems(PivotItemIndexName).ShowDetail <> BoolValue Then
                    wks.PivotTables(PivotTableIndex).PivotFields(PivotFieldIndexName).PivotItems(PivotItemIndexName).ShowDetail = BoolValue
                End If

            Next PivotTableIndex

        Next PivotItemsIndex

    Next PivotFieldIndex

Application.ScreenUpdating = True
Application.EnableEvents = True

End Sub 
```

然后，要在任何数据透视表编辑上自动运行此宏，您需要将其放入 Sheet1 代码中（如果您需要帮助，请告诉我）。

```
Sub Worksheet_PivotTableUpdate(ByVal Target As PivotTable)

    Call LinkPivotTables_ByFieldItemName_ToShowDetail(Target)

End Sub 
```

如果所有数据透视表都在第一张表上，它将起作用。您可能必须先复制/粘贴到写字板或其他文本编辑器中，因为我不担心行长限制（注意自动换行）。

编辑/添加：

这是您将代码放在特定工作表对象上的方式： ![PutCodeOnSheetObject](../Images/108c284796410d7414ddc88c38384eec.png)

**EDIT2/ADDITION2 - 效率方法：**

这种方法将显着提高效率，但您必须具体告诉它您要同步哪个字段（它不会全部同步）：

```
Sub LinkPivotTables_ByFieldItemName_ToShowDetail(pt As PivotTable)  'takes as argument - pt As PivotTable

Dim wkb As Workbook
Set wkb = ThisWorkbook

Dim wks As Worksheet
Set wks = wkb.Sheets(1)

Dim PivotTableIndex As Integer
Dim PivotItemIndex As Integer
Dim PivotFieldIndex As String
Dim BoolValue As Boolean
Dim ItemName As String

Application.ScreenUpdating = False
Application.EnableEvents = False

PivotFieldIndex = "Year"

On Error Resume Next

        For PivotItemsIndex = 1 To pt.PivotFields(PivotFieldIndex).PivotItems.Count

        BoolValue = pt.PivotFields(PivotFieldIndex).PivotItems(PivotItemsIndex).ShowDetail
        ItemName = pt.PivotFields(PivotFieldIndex).PivotItems(PivotItemsIndex).Name

            For PivotTableIndex = 1 To wks.PivotTables.Count

                ' This If statement will dramatically increase efficiency - because it takes a long long time to set the value but it doesn't take long to check it.
                If wks.PivotTables(PivotTableIndex).PivotFields(PivotFieldIndex).PivotItems(PivotItemsIndex).ShowDetail <> BoolValue Then
                    wks.PivotTables(PivotTableIndex).PivotFields(PivotFieldIndex).PivotItems(PivotItemsIndex).ShowDetail = BoolValue
                End If

            Next PivotTableIndex

        Next PivotItemsIndex

Application.ScreenUpdating = True
Application.EnableEvents = True

End Sub 
```

您必须在此行中手动告诉它您要同步哪个字段：

```
PivotFieldIndex = "Year" 
```

我在网上找到了其他几个使用相同循环方法来同步数据透视表的解决方案——问题是当你得到合适大小的数据透视表时，它们都会遇到相同的效率问题。通过包含一个在设置 Item.ShowDetail 值之前检查 Item.ShowDetail 值的 IF 语句，这些在某种程度上解决了这个问题（因为设置值比只检查它需要更长的时间）。祝你好运。

# metadata - Get meta data with path when using Dropbox in a different language

> ID：12352914
> 
> 赞同：1
> 
> 时间：2012-09-10T13:37:32.660
> 
> 标签：metadata, dropbox

I am using Third party SDKs (i.e. Apring-Net-Social-Dropbox). I have a problem when I try to get metadata of path in Hebrew language. In particular, I get the following exception: `DropboxApiException - HttpStatusCode.NotFound`

Can you explain why I get this error?

# android - WebView中的URLSpans？

> ID：12352918
> 
> 赞同：1
> 
> 时间：2012-09-10T13:37:59.013
> 
> 标签：android, android-webview, textview

我需要将文本推送到 WebView。但是这段文本中有很多不同的 HTML 标签，我想先解析一下。

```
Spanned html = Html.fromHtml(texts.get(i)); 
```

但我需要更改文本中的 URL 以在我的活动中调用一个函数。在 TextView 我可以这样做：

```
ClickableSpan[] items = spans.getSpans(0, spans.length(), ClickableSpan.class);
for (ClickableSpan s : items) {
    final String url = ((URLSpan)s).getURL();
    int spanStart = spans.getSpanStart(s);
    int spanEnd = spans.getSpanEnd(s);
    spans.removeSpan(s);
    spans.setSpan(new URLSpan(url) {
        @Override
        public void onClick(View widget) {
            //code for overriding onClick goes here            
        }
    }, spanStart, spanEnd, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
} 
```

是否可以使用 Html.fromHTML() AND 更改文本中的链接以在使用 WebView 而不是 TextView 时调用我的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:41:37.973

不是真的，因为`WebView`理解 HTML，而不是`Spanned`. 欢迎您尝试通过 将`Spanned`返回的内容转换为 HTML `Html.toHtml()`，但是从 HTML 到 HTML 的往返转换`Spanned`可能会对任何复杂的格式进行哈希处理，因为它们不是完整的 HTML 解析器或生成器。

我建议您找到并使用一些旨在解析和帮助您修复 HTML 的 Java 库。

# android - 在片段中测量视图

> ID：12352920
> 
> 赞同：14
> 
> 时间：2012-09-10T13:38:05.457
> 
> 标签：android, android-fragments, android-lifecycle

我需要知道 ImageView 的宽度和高度。有没有办法在片段中测量它？在标准活动中，我使用这个：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    image.getWidth();
    image.getHeight();
} 
```

但是我可以在哪里使用`image.getWidth();`和`image.getHeight();`片段？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-10T13:42:21.410

使用[GlobalLayoutListener](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r)。就像您在链接中的答案中所做的那样，您将侦听器分配给您`ImageView`的 in 。`onCreateView()`它也比`onWindowFocusChanged()`主 Activity 更可靠，所以我建议切换策略。

**编辑**

例子：

```
final View testView = findViewById(R.id.view_id);
ViewTreeObserver vto = testView.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
  @Override
  public void onGlobalLayout() {
    Log.d("TEST", "Height = " + testView.getHeight() + " Width = " + testView.getWidth());
    ViewTreeObserver obs = testView.getViewTreeObserver();
    obs.removeGlobalOnLayoutListener(this);
  }
}); 
```

# mysql - 在查询条件下调用函数

> ID：12352921
> 
> 赞同：-1
> 
> 时间：2012-09-10T13:38:06.893
> 
> 标签：mysql, function, user-defined-functions

我在`MySQL`. 我想在查询条件下调用它

```
SELECT * FROM TABLE_NAME

WHERE (FUNCTION_NAME); 
```

这可能吗？

注意：我的函数像查询一样返回值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:49:29.797

是的，您可以在查询中使用函数...唯一的问题是您的条件，如果您要使用类似的东西， `SELECT * FROM TABLE_NAME WHERE id = FUNCTION_NAME;`请确保 FUNTION_NAME 返回一个数字而不是查询，或者如果您要使用 `where in`， 请`SELECT * FROM TABLE_NAME WHERE id in (FUNCTION_NAME);`确保 FUNCTION_NAME返回一列的查询。关于 function_name 重要的是返回的内容，例如值或查询等

# windows - 在 Windows 中，有没有办法将 errno 转换为 HRESULT？

> ID：12352922
> 
> 赞同：6
> 
> 时间：2012-09-10T13:38:08.370
> 
> 标签：windows, com, errno, hresult

我知道`HRESULT_FROM_WIN32`将 Win32 错误代码转换为 HRESULT 的宏，有没有办法从`errno`错误开始进行转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:45:29.860

简而言之，没有。

截至[http://msdn.microsoft.com/en-us/library/5814770t%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/5814770t%28v=vs.100%29.aspx)

> errno 值是在发生各种错误情况时分配给 errno 的常量。
> 
> ERRNO.H 包含 errno 值的定义。但是，并非 ERRNO.H 中给出的所有定义都用于 32 位 Windows 操作系统。存在 ERRNO.H 中的某些值是为了保持与 UNIX 系列操作系统的兼容性。
> 
> 32 位 Windows 操作系统中的 errno 值是 XENIX 系统中 errno 值的子集。**因此，errno 值不一定与 Windows 操作系统的系统调用返回的实际错误代码相同**。要访问实际的操作系统错误代码，请使用包含此值的 _doserrno 变量。

当然，您可以使用将“翻译”错误代码的 switch-cases 编写自己的函数。

可以看到在 windows 上定义了大约 80 个 errno 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-28T01:06:01.360

Windows CRT 应始终设置 _doserrno 和 errno。_doserrno 将具有 Win32 错误，而 errno 将具有 UNIX errno 值。

Windows CRT 不会设置所有 errno 值，例如 ENODEV 是第一个未使用的值。

要从 Win32 错误转到 errno，_get_errno_from_oserr 将映射它。因为映射是有损的，所以没有人可以选择另一种方式。

_dosmaperr 通常用于设置 CRT 错误并设置两个全局变量。有时 CRT 会手动设置错误。

与其使用全局变量，不如使用*get* / *set*版本，例如。_get_doserrno()，但全局变量应该在正常流程中工作。

```
// this should work in a realistic flow like:
if (_snwprintf(buf, ARRAYSIZE(buf), L"%i", i) == -1) {
    hr = HRESULT_FROM_WIN32(_doserrno);
}

// or, this is a little more robust
unsigned long err = 0;
NTASSERT(!_get_doserrno(&err));
HRESULT hr = HRESULT_FROM_WIN32(err); 
```

# c - 我可以使用 xmlzipio 通过 xmlReadMemory 从内存中读取 xml 吗？

> ID：12352923
> 
> 赞同：1
> 
> 时间：2012-09-10T13:38:15.753
> 
> 标签：c, io, xml-parsing, gzip, libxml2

我想使用[xmlzipio](http://hal.iwr.uni-heidelberg.de/~christi/projects/xmlzipio.html)来读取压缩的 xml 文件，但问题是我必须从内存中读取它们并且不想将它们刷新到文件系统只是为了启用 i/o 功能。xmlio.h 是否影响 xmlReadMemory 行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:44:45.527

如果您在 POSIX（如 Linux 或 Mac OSX）系统上，您可以使用 eg [`shm_open`](http://pubs.opengroup.org/onlinepubs/009695399/functions/shm_open.html)with[`mmap`](http://pubs.opengroup.org/onlinepubs/009695399/functions/mmap.html)来创建内存映射虚拟文件。如果需要`FILE`指针，则将返回的描述符传递`shm_open`给[`fdopen`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fdopen.html).

# winforms - 为什么 DataGridView ComboBox 显示 ValueMember 值？

> ID：12352925
> 
> 赞同：0
> 
> 时间：2012-09-10T13:38:35.980
> 
> 标签：winforms, c#-4.0, datagridview, datagridcomboboxcolumn

我目前正在使用 C# 窗口应用程序。我在 DataGridView 中使用数据网格视图组合框。单击下拉框时会显示名称字段，如果我从下拉框中选择名称字段，则会在 DataGridView ComboBox 中显示值成员值。

为什么我没有在组合框中获得显示成员值？

在 databindindcomplete 函数中，我定义了 ComboBox 的值：

```
((DataGridViewComboBoxColumn)dgvItem_1.Columns["Student"]).DataSource = objDBContext.Stu_student;
((DataGridViewComboBoxColumn)dgvItem_1.Columns["Student"]).DisplayMember = "STUDENT_NAME";
((DataGridViewComboBoxColumn)dgvItem_1.Columns["Student"]).ValueMember = "STUDENT_ID"; 
```

如果我在下拉列表中显示的 ComboBox 以下值中选择一个值

> 姓名
> -----
> 拉贾
> ·拉梅什
> ·拉尼

如果我在列表中选择 Raja，ComboBox 会在 ComboBox 中显示相应的 STUDENT_ID。但我想在组合框中显示学生姓名。

谁能告诉我为什么我在 DataGridView ComboBox 中获得 ValueMember 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:07:40.453

因此，在我的简单示例中，我有一个 Student 类，如下所示：

```
public class Student
{
    public string Name { get; private set; }
    public int StudentId{ get; private set; }
    public Student(string name, int studentId)
    {
        Name = name;
        StudentId= studentId;
    }

    private static readonly List<Student> students = new List<Student>
    {
        { new Student("Chuck", 1) },
        { new Student("Bob", 2) }
    };

    public static List<Student> GetStudents()
    {
        return students ;
    }
} 
```

我为组合框设置了我的绑定，如下所示：

```
 DataGridViewComboBoxColumn comboBoxColumn = (DataGridViewComboBoxColumn)dataGridView1.Columns[0];
        comboBoxColumn .DataSource = Student.GetStudents();
        comboBoxColumn .DisplayMember = "Name";  
        comboBoxColumn .ValueMember = "StudentId"; 
```

我在下拉列表中获取我的学生姓名，当我选择一个时，所选姓名会显示在单元格中。

# jquery - Fancybox：添加标题和其他东西

> ID：12352927
> 
> 赞同：16
> 
> 时间：2012-09-10T13:38:45.690
> 
> 标签：jquery, fancybox

我想知道我怎样才能在fancybox 中添加更多的标题（例如标题或链接）。我知道如果我添加一个 title="Bla" 它会出现在框中。但是，如果我在我的图片链接中添加类似 caption="Blabla" 的内容，我需要在 jquery.fancybox.js 中拥有什么代码来拉取该标题标签？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-10T18:29:05.933

你不需要弄乱原始*的 jquery.fancybox.js*文件，因为你可以在你自己定制的fancybox脚本中添加这个选项。

如果您正在使用`HTML5 DOCTYPE`，则可以为您的`data-*`标题使用该属性，以便您可以拥有以下 HTML：

```
<a class="fancybox" href="images/01.jpg" data-caption="This is the caption" >Open fancybox</a> 
```

然后设置您的自定义fancybox脚本并`data-caption`使用`beforeShow`回调获取

```
$(document).ready(function() {
 $('.fancybox').fancybox({
  beforeShow : function(){
   this.title =  $(this.element).data("caption");
  }
 });
}); // ready 
```

这将覆盖`title`并使用 the `data-caption`。

另一方面，对于这个 HTML ，您可能希望保留`title`属性并构建幻想框的`title`组合`title`和属性`data-caption`

```
<a class="fancybox" href="images/01.jpg" title="This is the title" data-caption="This is the caption">Open fancybox</a> 
```

使用这个脚本

```
$(document).ready(function() {
 $('.fancybox').fancybox({
  beforeShow : function(){
   this.title =  this.title + " - " + $(this.element).data("caption");
  }
 });
}); // ready 
```

此外，您还可以`caption/title`从文档中的另一个 HTML 元素（`<div>`例如）获取链接或其他 HTML 元素。检查这些帖子以获取代码示例：[https](https://stackoverflow.com/a/9611664/1055987) ://stackoverflow.com/a/9611664/1055987和[https://stackoverflow.com/a/8425900/1055987](https://stackoverflow.com/a/8425900/1055987)

**注意**：这是为 fancybox v2.0.6+

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-19T22:23:22.983

老问题，但感谢 JFK 的回答，我发现使用最新版本的`fancybox`您只需在`title=""`属性中输入一个值即可添加标题（默认情况下）。只要确保它包含在类的`<a>`元素中`fancybox`。

# javascript - 在 jquery 对话框中打开一个 jstree

> ID：12352929
> 
> 赞同：1
> 
> 时间：2012-09-10T13:38:56.977
> 
> 标签：javascript, jquery-plugins, jquery-ui-dialog, jstree

我已经寻找了所有可能的示例，但找不到完整的示例。一般来说，我是 jQuery 和 javascript 的新手——我是一名后端开发人员。我正在尝试在对话框中的 jstree 内显示 ajax 调用的 html 结果，并且不知道我在做什么。到目前为止，这就是我想出的-有人可以告诉我我做错了什么吗？（我不得不重新输入这个而不是复制/粘贴，所以可能会有一些小错别字）。

```
success: function(data) {
    $.getScript("js/jquery/jquery.jstree.js", function() {
        var $genericDialog = $("#genericDialog")
        $genericDialog.jstree({"html_data":data});
        $genericDialog.dialog({
            title: "ASDF",
            modal: true,
            width: 450,
            height: 700,
            buttons: {
                "OK": function() {
                         $genericDialog.dialog("close");
                     }
            }
        });
    });
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:15:43.237

从那里文档

```
 "html_data" : {
        "data" : "<li id='root'><a href='#'>Root node</a><ul><li><a href='#'>Child node</a></li></ul></li>"
    }, 
```

因此，请确保您传递给“html_data”的对象采用上述格式。即你的“数据”应该是一个以“数据”为属性的对象。

除此之外，我没有看到您的代码有任何问题。

**更新**

[http://jsfiddle.net/STA3c/7/](http://jsfiddle.net/STA3c/7/)

我用过你的代码。它似乎正在工作。检查是否正确加载了所有正确的 javascript 文件。

# asp.net-mvc - Response.IsAuthenticated 30 秒后为假

> ID：12352931
> 
> 赞同：1
> 
> 时间：2012-09-10T13:38:57.527
> 
> 标签：asp.net-mvc, forms-authentication

我有一个部署到共享托管服务的 ASP.NET MVC3 应用程序。它使用 FormsAuthentication 和 SSL：

```
<authentication mode="Forms">
  <forms loginUrl="~/Home/Index" timeout="240" requireSSL="true" />
</authentication> 
```

问题出在某些 Razor（部分）视图中：我对控制器方法执行回调，出于测试目的，该方法只是休眠并返回 PartialView。我的问题围绕着 Response.IsAuthenticated。在回调和睡眠之前它是正确的，并且只要睡眠时间为 30 秒或更短，它就仍然是正确的。但是，我已经用各种更长的持续时间（例如 55 秒）对其进行了测试，并且 Response.IsAuthenticated 在这些情况下变为错误。这是一个问题，因为在我的原始代码中我需要进行重定向（通过 JS，open.window，在我的部分视图中）。由于 Response.IsAuthenticated 是 false FluentSecurity 立即将用户发送到 loginUrl（我不想要）。

似乎这与某处的超时有关（“KeepAlive”，“ServerTimeout”？），但我已经用谷歌搜索了 response.isauthenticated timeout 并没有提出任何结果。坦率地说，这种行为似乎在整个站点中发生：如果用户离开页面（我正在使用 FF）超过一分钟左右，那么当他们尝试访问页面时，他们会自动被重定向到 loginURL。请注意，我的会话超时设置为“120”。有趣的是，当应用程序部署到 Windows Azure 时，我没有遇到这种行为（不过还有其他问题）；当我切换到其他主机时，它才开始发生。

任何指向有关此主题的信息的指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:59:21.943

也许主机在几秒钟空闲时正在杀死服务器中的 AppPool。

您记录应用程序关闭事件以查看是否是这种情况：[http ://weblogs.asp.net/scottgu/archive/2005/12/14/433194.aspx](http://weblogs.asp.net/scottgu/archive/2005/12/14/433194.aspx)

# mercurial - Mercurial 通知扩展不起作用

> ID：12352933
> 
> 赞同：1
> 
> 时间：2012-09-10T13:39:01.540
> 
> 标签：mercurial, mercurial-extension

我正在尝试在项目中使用通知扩展来在有人从存储库中推送或拉取但未发送通知时获得通知......

我的 hgrc 文件：

```
 [paths]
default = // repo URL
[extensions]
hgext.notify= 

[hooks]
changegroup.notify = python:hgext.notify.hook

[email]
from = my email 

[smtp]
host = smtp

username = my username
password = password
port = 26
tls = true
local_hostname = example.com

[web]

    baseurl = http://hgserver/...

[notify]
sources = serve push pull bundle

test = True

config = ../../../Repos/subscription.conf

template = 
  details:   {baseurl}{webroot}/rev/{node|short}
  branches:  {branches}
  changeset: {rev}:{node|short}
  user:      {author}
  date:      {date|date}
  description:
  {desc}\n

maxdiff = 300 
```

订阅.conf 文件：

```
[reposubs]
* = someone@abc.com 
```

输出日志：

```
 % hg commit --repository D:\Repos\Test Repo --verbose --user mabdelkh@TATTIA_DSKTP1.mgc.mentorg.com --message=vhghg D:\Repos\Test Repo\src/test1.c
src/test1.c
calling hook commit.lfiles: <function checkrequireslfiles at 0x000000000845C2E8>
committed changeset 34:cbecf228369e
[command completed successfully Mon Sep 10 14:53:50 2012]

    % hg --repository D:\Repos\Test Repo push http://svr-hub-rnd-02:8000/Hg/TestRepo1/
    pushing to http://svr-hub-rnd-02:8000/Hg/TestRepo1/

searching for changes
searching for changes
remote: adding changesets
remote: adding manifests
remote: adding file changes
remote: added 1 changesets with 1 changes to 1 files
[command completed successfully Mon Sep 10 14:54:02 2012]
Test Repo% 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:07:39.640

我已经看到了许多可能的问题。

(A) 您的配置文件路径看起来错误。

> ../../../Repos/subscription.conf

如果您想使用绝对路径，请使用类似

> //etc/path/to/file/subscription.conf

请记住，当您不指定双正斜杠时，您将引用配置文件相对于您的存储库的位置。

(B) 另外 - 当一切都说完后，将 test 设置为 False。

(C) 你的 smtp 信息有误。设置为不带引号或正确值的 'localhost'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:25:36.193

我认为您需要为扩展设置值`test`以`False`实际发送通知

# sockets - 在 Windows 7 中，两个进程如何监听同一个端口？

> ID：12352935
> 
> 赞同：8
> 
> 时间：2012-09-10T13:39:08.697
> 
> 标签：sockets, windows-7

我在 Windows 7 中运行了两个 stunnel 实例，配置为侦听同一端口，并且似乎它们都成功地侦听了同一端口（仅使用 socket()/bind()/listen()）。这两个实例似乎都成功调用了所有调用，并且它们显示在 netstat 中：

```
C:\>netstat -ano | grep 8000
  TCP    0.0.0.0:8000           0.0.0.0:0              LISTENING       5828
  TCP    0.0.0.0:8000           0.0.0.0:0              LISTENING       5852 
```

第一个监听的会获取所有传入的请求。

这与我的所有期望完全相反。（我期待 EADDRINUSE 告诉我端口很忙。）所以....

1.  为什么/这是如何工作的？这种行为在某些情况下有用吗？
2.  如果另一个应用程序要捕获传入的请求，我不希望实例成功运行...如何使端口独占？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T15:48:41.873

这可以通过使用[SO_REUSEADDR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621%28v=vs.85%29.aspx)标志打开套接字来完成，这对于 TCP 套接字应用程序并不少见。

通常，SO_REUSEADDR 用于以下两种情况之一：

1.  当一个进程在没有机会关闭其套接字的情况下崩溃、被杀死或强制重新启动时。或者进程退出但socket（或子连接socket）仍处于FIN_WAIT或FIN_WAIT2状态。第二个进程可以打开套接字而不会得到“已经在使用”的错误代码。我已经阅读了一些关于 SO 的帖子，表明这是 TCP 套接字的最佳实践。

2.  同一个服务器程序要么分叉，要么同时运行多次。这允许负载平衡，而无需编写服务器程序以使用线程。通常，侦听套接字的程序的“其他实例”将接受传入连接，而第一个实例正忙于另一个连接。

关于你的第二个问题，最简单的方法是不要使用 SO_REUSEADDR。如果您担心可能有恶意应用尝试使用 SO_REUSADDR，那么您的应用可以使用 SO_EXCLUSIVEADDRUSE。（一个标志，基本上说，“不允许其他应用程序使用 SO_REUSEADDR 打开同一个端口。）

# iphone - IOS 中 glColor4f OpenGL 函数的应用程序崩溃

> ID：12352936
> 
> 赞同：2
> 
> 时间：2012-09-10T13:39:09.430
> 
> 标签：iphone, ios, opencv, opengl-es, qcar-sdk

我正在开发 OpenCV 客户端应用程序，我的应用程序在 IOS 5.1 上运行良好，但是当我在 IOS 4.3 上运行我的应用程序时，它`glColor4f`在类中定义的函数处崩溃`gl.h`，但在崩溃时没有显示任何错误消息。我正在做以下事情：

```
QCAR::Matrix44F modelViewProjection;

                glColor4f(0.5f,0.0f,0.0f,0.0f);
                ShaderUtils::multiplyMatrix(&qUtils.projectionMatrix.data[0], &modelViewMatrix.data[0], &modelViewProjection.data[0]);
                glUseProgram(shaderProgramID);
                glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*) &vbVertices[0]);
                glEnableVertexAttribArray(vertexHandle);
                glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE, (GLfloat*)&modelViewProjection.data[0] );
                glColor4f(0.5f,0.0f,0.0f,0.0f);

                glEnableClientState (GL_VERTEX_ARRAY);
                glEnableClientState (GL_COLOR_ARRAY); 
                glEnableClientState(GL_COLOR_ARRAY);    
              //  glColorPointer(4, GL_FLOAT, 0, triangleColors);  
                glVertexPointer(3, GL_FLOAT, 0, (const GLvoid*) &vbVertices[0]); 
                glDisableClientState(GL_TEXTURE_COORD_ARRAY);
                glDisable(GL_TEXTURE_2D);
                glDrawArrays(GL_LINES, 0, 8);
                //glDisableClientState(GL_TEXTURE_COORD_ARRAY);
                //glDisable(GL_TEXTURE_2D);
                glDisableVertexAttribArray(vertexHandle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:56:06.197

我已经做了一些研究，这里有几件事供您尝试：

*   试验一下`glColor4d()`，它需要 4 个双参数；
*   [您可能正在调用一个空函数指针，因此会发生 crash](http://www.opengl.org/discussion_boards/showthread.php/179026-Application-crash-on-glColor4f)。当加载过程不需要时会发生这种`getProc`情况`glColor4f`；
*   之前尝试调用 glGetError()`glColor4f()`以了解 GL 方面是否存在问题。

[另外，有人在这个帖子](http://www.opengl.org/discussion_boards/showthread.php/179026-Application-crash-on-glColor4f)中回答了你的问题。他可能是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:50:47.167

`glColor4f()`仅与 OpenGL ES 1.1 固定功能管道一起使用。从`glUseProgram()`上述代码中的使用来看，您正在使用 OpenGL ES 2.0，因此`glColor4f()`不受支持。

如果您希望设置材质的颜色，则需要通过着色器程序中的制服来完成。如果您只想设置场景的背景颜色，则可以使用以下内容：

```
 glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT); 
```

# c++ - 如何使用 CAtlComModule 实现 COM 事件接收器？

> ID：12352938
> 
> 赞同：3
> 
> 时间：2012-09-10T13:39:16.080
> 
> 标签：c++, com, atl

我尝试重构现有的和**工作**的COM 事件接收器实现。事件接收器类是用 C++ 编写的，驻留在使用已弃用[`CComModule`](http://msdn.microsoft.com/en-us/library/1300df24.aspx)类的 DLL 中。重构的目标是用`CComModule`新的 ATL 7.0 类[CAtlComModule 替换](http://msdn.microsoft.com/en-us/library/4h4fdwzf.aspx)。

现有实现在 .cpp 文件中的某处声明了一个全局变量：

```
CComModule _Module; 
```

如您所见，该变量具有通常的“魔术”名称`_Module`。但是，缺少常规初始化，DLL 项目中没有任何地方调用`CComModule::Init()`并且也没有 COM 对象映射。事件接收器仍然有效，它的事件处理程序方法被正确调用。

由于缺乏如何从 to 转换的任何文档`CComModule`，`CAtlComModule`我天真地试图将变量声明更改为：

```
CAtlComModule _Module; 
```

但它没有成功：更改后事件接收器停止工作，即不再调用其事件处理程序方法。

有谁知道迁移到应该执行的步骤`CAtlComModule`？到目前为止，我无法在 MSDN 或通过 Google 上找到解决方案，但也许我看起来不太正确......

BTW：如有必要，我可以提供有关事件接收器实现的更多细节，但到目前为止我觉得问题不在这方面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T00:41:40.213

最简单的“新样式”替换`CComModule`如下所示：

```
class MyModule : public CAtlDllModuleT<MyModule> {};
MyModule _Module; 
```

# facebook-javascript-sdk - 使用 JS SDK 在 Facebook 消息中换行

> ID：12352940
> 
> 赞同：1
> 
> 时间：2012-09-10T13:39:26.543
> 
> 标签：facebook-javascript-sdk

我正在使用 Facebook Javascript SDK 在用户的墙上发帖。在描述中我想显示多行文本。我尝试了不同的标签，如 br 或 div。我什至尝试过“\r\n”，但似乎没有任何效果。有标准的解决方案吗？

# c# - 在 C# 中使用数据适配器时重置自动增量

> ID：12352942
> 
> 赞同：1
> 
> 时间：2012-09-10T13:39:34.153
> 
> 标签：c#, datatable, auto-increment, tableadapter

我正在尝试将现有的 Access 数据库文件 (template.mdb) 作为新文件的模板。我想删除一些表的行（但保留其他表）。我通过 Visual Studio 2010 生成的 TableAdapters（通过添加项目 -> 数据 -> 数据集）“访问”表。

在尝试删除一些现有表的内容并重置自动增量计数器时，我无法完成第二个任务。我正在尝试通过

```
var adapter = new MyTableTableAdapter();
var targetTable = adapter.GetData();
// mark each row for deletion
foreach (DataRow row in targetTable.Rows)
  row.Delete(); 
```

[// 在这里](https://stackoverflow.com/questions/5972699/reset-autoincrement-in-datatable)找到以下序列。

```
targetTable.IDProductColumn.AutoIncrement = true;
targetTable.IDProductColumn.AutoIncrementSeed = 0;
targetTable.IDProductColumn.AutoIncrementStep = -1;
targetTable.IDProductColumn.AutoIncrementSeed = -1;

// apply the changes
adapter.Update(targetTable); 
```

这确实会删除现有行，但不会重置自动增量。

如何实现？

* * *

编辑：现在完成工作流程

1.  复制寺庙mdb文件
2.  建立与复制文件的连接
3.  尝试删除某些表的所有行，但不是全部
4.  从外部 xml 文件中读取新数据，其中包含如下引用：

    `<tableARow><id>1</id></tableARow>`// 如果这一行是一个 id <> 1 ...

    `<tableBRow><idRefTableARow>1</idRefTableARow></tableBRow>`// ... 此行将无法正确导入

5.  将此数据添加到“新”数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:52:59.420

您可以在代码中构建一个新的数据表并添加所需的列，而不是加载旧表并删除所有项目。

```
var Table = new DataTable();

var columnA = new DataColumn();
columnA.ColumnName = "Your Column Name";
var columnB = new DataColumn();
columnB.ColumnName = "Your Column Name";
var columnC = new DataColumn();
columnC.ColumnName = "Your Column Name";

Table.Columns.Add(columnA);
Table.Columns.Add(columnB);
Table.Columns.Add(columnC); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:09:41.430

如果要刷新所有数据并重用表，那么

```
dt.Clear();
dt.Column["IDProductColumn"].AutoIncrementStep = -1;  --Change the step value to get around the logic in the set_AutoIncrementSeed
dt.Column["IDProductColumn"].AutoIncrementSeed = -1;  --reset the AutoIncrementSeed

dt.Column["IDProductColumn"].AutoIncrementStep = 1;  -- set the new step
dt.Column["IDProductColumn"].AutoIncrementSeed = 1;  --  set the new seed 
```

# spring - jar 中带有 spring 注释的 bean，无法扫描

> ID：12352943
> 
> 赞同：2
> 
> 时间：2012-09-10T13:39:34.770
> 
> 标签：spring, maven, jar, annotations

我有问题。我们使用注释等声明了一些spring bean：

```
@Controller
public class BookAction{} 
```

它工作得很好。但是当我们把它打包到一个罐子里时，豆子计数不会被扫描，因为我们已经设置了：

```
<context:component-scan base-package="com.xxx.nsm.framework" /> 
```

有人说，在eclipse中，我们可以export-->jar，勾选“Add Directory Entiries”，解决这个问题，就可以了

以下是不同之处：

带有目录条目的 jar：

```
C:\>jar tf test_inside_with_de.jar
META-INF/MANIFEST.MF
net/
net/kyfxbl/
net/kyfxbl/test/
net/kyfxbl/test/inside/
net/kyfxbl/test/inside/action/
net/kyfxbl/test/inside/action/BookAction.class
net/kyfxbl/test/inside/action/BookAction.java
net/kyfxbl/test/inside/service/
net/kyfxbl/test/inside/service/IBookService.class
net/kyfxbl/test/inside/service/IBookService.java
net/kyfxbl/test/inside/service/impl/
net/kyfxbl/test/inside/service/impl/BookService.class
net/kyfxbl/test/inside/service/impl/BookService.java
spring-config.xml
struts.xml 
```

没有目录条目的 jar：

```
C:\>jar tf test_inside.jar
META-INF/MANIFEST.MF
net/kyfxbl/test/inside/action/BookAction.class
net/kyfxbl/test/inside/action/BookAction.java
net/kyfxbl/test/inside/service/IBookService.class
net/kyfxbl/test/inside/service/IBookService.java
net/kyfxbl/test/inside/service/impl/BookService.class
net/kyfxbl/test/inside/service/impl/BookService.java
spring-config.xml
struts.xml 
```

但我们使用的是 maven，所以我的问题是：如何在 MAVEN3 中制作一个带有目录条目的 jar？

多谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:18:26.877

您的组件扫描定义和示例类似乎不匹配。

```
<context:component-scan base-package="net.kyfxbl.test.inside*,com.xxx.nsm.framework" /> 
```

* 表示也应扫描所有子包。

# forms - 如何防止 Internet Explorer 自动完成具有相同值的两个表单字段？

> ID：12352944
> 
> 赞同：1
> 
> 时间：2012-09-10T13:39:49.513
> 
> 标签：forms, internet-explorer, google-chrome, autocomplete

我的一位客户的用户正在使用自动完成来填写地址表格，但由于某种原因，它会自动填写两个具有相同数据的字段 - 地址行 1 和地址行 3 字段。这是HTML：

```
<tr>
    <td>
        <strong>Address 1:</strong>
        <font color="red">
            *
        </font>
    </td>
    <td>
        <input name="addressLine1" id="addressLine1" type="text" maxlength="40" size="40" />
    </td>
</tr>
<tr>
    <td>
        <strong>Address 2:</strong>
    </td>
    <td>
        <input name="addressLine2" type="text" value="" size="40" maxlength="40">
    </td>
</tr>
<tr>
    <td>
        <strong>Address 3:</strong>
    </td>
    <td>
        <input name="addressLine3" type="text" value="" size="35" maxlength="40">
    </td>
</tr> 
```

我对此进行了测试，它做了同样的事情——它用我的地址行 1 保存的值自动填充了“addressLine1”和“addressLine3”：

![在此处输入图像描述](../Images/a500d128a6f92420bfc94220370ed3fd.png)

我怎样才能防止这种情况？

# php - 在 Symfony2 中使用 Pagerfanta 进行分页的正确方法是什么

> ID：12352945
> 
> 赞同：8
> 
> 时间：2012-09-10T13:39:53.037
> 
> 标签：php, symfony, twig, pagerfanta

我已经读过 Pagerfanta 是 Symfony2 的首选分页插件，但我在让它正常工作时遇到了一些麻烦。我已经下载了 pagerfanta 和 PagerfantaBundle 的代码，并按照[WhiteOctober Github 自述文件](https://github.com/whiteoctober/WhiteOctoberPagerfantaBundle/tree/symfony2.0)和[本教程](http://frenchtouch.pro/tutorial/install-and-manage-pagerfanta-in-symfony2./20)中的说明安装了它们。我很确定我的控制器中的代码没问题，但是我的模板文件有问题。

我的控制器代码：

```
public function indexAction($page =  null)
{
    ...
    $query = $em->createQuery('SELECT something FROM some_table');
    $adapter = new DoctrineORMAdapter($query);
    $pager =  new Pagerfanta($adapter);
    $pager->setMaxPerPage(10);
    if (!$page)    $page = 1;
    try  {
        $pager->setCurrentPage($page);
    }
    catch(NotValidCurrentPageException $e) {
      throw new NotFoundHttpException('Illegal page');
    }
    return $this->render('MyBundle:MyEntity:index.html.twig', array(
        'pager' => $pager,
    ));
} 
```

在我的模板中：

```
...
<table>
  {% for object in pager.currentPageResults %}
    <tr>
      <td>{{ object.attribute1 }}</td>
      <td>{{ object.attribute2 }}</td>
      <td>{{ object.attribute3 }}</td>
    </tr>
  {% endfor %}
</table>

{% if pager.haveToPaginate %}
  {{ pagerfanta(pager) }}
{% endif %} 
```

当我转到该页面时，我会得到前 10 个对象的列表。但是，分页器的呈现只是将 PreviousNext 作为一个单词（不是链接，也没有第 1、2、3 页等）。

如果我添加`?page=2`到 URL，它不会显示列表中的下 10 个项目。

在添加分页代码之前，我没有更改路线，因为文档说：

> 使用变量“page”为当前路由自动生成路由以传播页码。

...但我想知道不正确的路由是否是问题的一部分。假设是这种情况，我不确定如何进行。

我无法找到我上面链接到的其他来源的任何说明，所以如果成功实施此操作的人可以分享他们如何做到这一点的详细信息，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T19:41:12.007

我认为您的应用程序不知道如何解析`?page=2`控制器操作。

在您的路线中包含一个 {page} （正如@AdrienBrault 回答的那样），您希望对其进行分页。

像这样：

```
my_index:
  pattern:  /{page}
  defaults: { _controller: MyTestBundle:Object:index, page: 1 }
  requirements:
    _method:  GET
    page: \d+ 
```

PagerFantaBundle 将（我猜）尝试猜测正确的路线。

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T18:42:56.970

我不得不在我的路由中使用'currenPage'而不是'page'，我找到了一种方法来做到这一点：

`{{ pagerfanta(pager, 'my_pager_view', {'pageParameter':'[currentPage]'}) }}`

# excel - Excel VBA - 导出为 UTF-8

> ID：12352958
> 
> 赞同：3
> 
> 时间：2012-09-10T13:40:53.653
> 
> 标签：excel, vba

我创建的宏工作正常，我只需要整理储蓄业务。现在我收到一个弹出窗口，询问我在哪里保存它，但我希望它以默认名称和路径保存并以 UTF-8 编码。

这是我使用的完整代码，底部保存了我假设的文档。

```
Public Sub ExportToTextFile(FName As String, Sep As String, SelectionOnly As Boolean, AppendData As Boolean)
    Dim WholeLine As String
    Dim fnum As Integer
    Dim RowNdx As Long
    Dim ColNdx As Integer
    Dim StartRow As Long
    Dim EndRow As Long
    Dim StartCol As Integer
    Dim EndCol As Integer
    Dim CellValue As String
    Dim teller As Integer
    'Teller aangemaakt ter controle voor het aantal velden
    'teller = 1

    Application.ScreenUpdating = False
On Error GoTo EndMacro:
    fnum = FreeFile
    If SelectionOnly = True Then
        With Selection
            StartRow = .Cells(1).Row
            StartCol = .Cells(26).Column
            EndRow = .Cells(.Cells.Count).Row
            EndCol = .Cells(.Cells.Count).Column
        End With
    Else
        With ActiveSheet.UsedRange
            StartRow = .Cells(1).Row
            StartCol = .Cells(26).Column
            EndRow = .Cells(.Cells.Count).Row
            EndCol = .Cells(26).Column
        End With

    End If
    If AppendData = True Then
        Open FName For Append Access Write As #fnum
    Else
        Open FName For Output Access Write As #fnum
    End If
    For RowNdx = StartRow To EndRow
        WholeLine = ""
        For ColNdx = StartCol To EndCol
            If Cells(RowNdx, ColNdx).Value = "" Then
                CellValue = ""
            Else
                CellValue = Cells(RowNdx, ColNdx).Value
            End If
            WholeLine = WholeLine & CellValue & Sep
        Next ColNdx
        WholeLine = Left(WholeLine, Len(WholeLine) - Len(Sep))
        Print #fnum, WholeLine, ""
        'Print #fnum, teller, WholeLine, ""
        'teller = teller + 1

    Next RowNdx

EndMacro:
    On Error GoTo 0
    Application.ScreenUpdating = True
    Close #fnum
End Sub

Sub Dump4Mini()
    Dim FileName As Variant
    Dim Sep As String

    FileName = Application.GetSaveAsFilename(InitialFileName:=Blank, filefilter:="Text (*.txt),*.txt")

    If FileName = False Then
        Exit Sub
    End If
    Sep = "|"
    If Sep = vbNullString Then
        Exit Sub
    End If
    Debug.Print "FileName: " & FileName, "Separator: " & Sep
    ExportToTextFile FName:=CStr(FileName), Sep:=CStr(Sep), SelectionOnly:=False, AppendData:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:31:18.603

这是我用来传递 http 网页的方法，它返回一个编码正确的字符串

```
Public Function UTF8(ByVal http As Object) As String
Dim BinaryStream

Const adTypeBinary = 1
Const adTypeText = 2
Const adModeReadWrite = 3

 Set BinaryStream = CreateObject("ADODB.Stream")

 With BinaryStream
    .Type = adTypeBinary
    .Open
    .Write http.responseBody

    'Change stream type To binary
    .Position = 0
    .Type = adTypeText

    'Specify charset For the source text
    '.Charset = "iso-8859-1" 'unicode
    .Charset = "utf-8" 'or utf-16

    'Open the stream And get binary data from the object
    UTF8 = .ReadText
End With
End Function 
```

在`http`这种情况下是什么，`Set http = CreateObject("Microsoft.XMLHTTP")`但我相信你可以适应你的需要。

这适用于字符串并直接输出文本文件

```
Option Explicit

Sub test()
Dim filePath As String
Dim fileName As String
Dim charToEncode As String
Dim success As Boolean

    filePath = "C:\Users\ooo\Desktop\"
    fileName = "test.txt"
    charToEncode = "Télécom"

    success = ConvertToUTF8thenSaveToFile(charToEncode, filePath, fileName)

    If success Then
        MsgBox ("Success")
    Else
        MsgBox ("Failed")
    End If
End Sub

Function ConvertToUTF8thenSaveToFile(ByVal charToEncode As String, _
    ByVal filePath As String, ByVal fileName As String) As Boolean

    Dim fsT As Object
    Dim adodbStream  As Object

    On Error GoTo Err:
    Set adodbStream = CreateObject("ADODB.Stream")
    With adodbStream
        .Type = 2 'Stream type
        .Charset = "utf-8" 'or utf-16 etc
        .Open
        .WriteText charToEncode
        .SaveToFile filePath & fileName, 2 'Save binary data To disk
    End With

    ConvertToUTF8thenSaveToFile = True

    On Error GoTo 0

    Exit Function

Err:
ConvertToUTF8thenSaveToFile = False

End Function 
```

更新：以下代码已更新为从范围创建分隔字符串，对字符串进行编码并保存到文件。

```
Option Explicit

Sub test()
Dim filePath As String
Dim fileName As String
Dim charToEncode As String
Dim encodingType As String
Dim success As Boolean
Dim rngArray() As Variant

    filePath = "C:\Users\ooo\Desktop\"
    fileName = "test.csv"
    rngArray = Sheet1.Range("A1:E10000").Value
    encodingType = "utf-8"

    charToEncode = DelimitRange(rngArray)
    success = ConvertToUTF8thenSaveToFile(charToEncode, filePath, fileName, encodingType)

    If success Then
        MsgBox ("Success")
    Else
        MsgBox ("Failed")
    End If
End Sub

Function ConvertToUTF8thenSaveToFile(ByVal charToEncode As String, _
    ByVal filePath As String, ByVal fileName As String, ByVal encodingCharSet As String) As Boolean

    Dim fsT As Object
    Dim adodbStream  As Object

    On Error GoTo Err:
    Set adodbStream = CreateObject("ADODB.Stream")
    With adodbStream
        .Type = 2 'Stream type
        .Charset = encodingCharSet 'or utf-16 etc
        .Open
        .WriteText charToEncode
        .SaveToFile filePath & fileName, 2 'Save binary data To disk
    End With

    ConvertToUTF8thenSaveToFile = True

    On Error GoTo 0

    Exit Function

Err:
ConvertToUTF8thenSaveToFile = False

End Function

Function DelimitRange(ByVal XLArray As Variant) As String
Const delimiter As String = ","
Const lineFeed As String = vbCrLf
Const removeExisitingDelimiter As Boolean = True
Dim rowCount As Long
Dim colCount As Long
Dim tempString As String

    For rowCount = LBound(XLArray, 1) To UBound(XLArray, 1)
        For colCount = LBound(XLArray, 2) To UBound(XLArray, 2)

            If removeExisitingDelimiter Then
                tempString = tempString & Replace(XLArray(rowCount, colCount), delimiter, vbNullString)
            Else
                tempString = tempString & XLArray(rowCount, colCount)
            End If

            'Don't add delimiter to column end
            If colCount < UBound(XLArray, 2) Then tempString = tempString & delimiter

        Next colCount

        'Add linefeed
        If rowCount < UBound(XLArray, 1) Then tempString = tempString & lineFeed

    Next rowCount

    DelimitRange = tempString

End Function 
```

# javascript - 从下拉菜单复制到文本框

> ID：12352959
> 
> 赞同：0
> 
> 时间：2012-09-10T13:40:58.133
> 
> 标签：javascript, html

我有 2 个下拉列表。第一个是部门，第二个是基于第一个显示该部门的员工。现在我只需要将第二个下拉列表中的选定值复制到文本框中。一些onchange函数？或者它是如何工作的？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:47:35.970

根据您提供的信息，这就是您将如何做到的……基本上。

[演示](http://jsfiddle.net/My7D5/)

```
<select id="mydropbox" onchange="copyValue()">
<option>
...
</option>
</select>

function copyValue(){

   var dropboxvalue = document.getElementById('mydropbox').value;
   document.getElementById('mytextbox').value = dropboxvalue;

} 
```

# java - 与 maven 3 对 derby 的依赖冲突

> ID：12352960
> 
> 赞同：0
> 
> 时间：2012-09-10T13:41:11.377
> 
> 标签：java, maven, maven-3, derby

我刚刚在我的项目中添加了对 eclipse birt 的依赖，现在发生了非常奇怪的故障：

```
java.lang.SecurityException: sealing violation: package org.apache.derby.impl.store.raw.xact is sealed 
```

在集成测试或

```
java.sql.SQLException: Catalogs at version level 'null' cannot be upgraded to version level '10.5'.
ERROR XCL20: Catalogs at version level 'null' cannot be upgraded to version level '10.5'. 
```

谷歌搜索第一个点可能是对德比的依赖冲突。

```
mvn dependency:list 
```

正在证明这一点。birt 需要 derby 10.5，我们的一个罐子需要 10.8。所以这两个 derby 依赖都是传递的（birts 依赖更间接——在树中更深一层）。

如何解决这个/这样的冲突？

（更改 pom 中的顺序没有帮助）

与此同时，我尝试了**Dan Matthews-Grout 的答案——现在它起作用了**：

```
 <dependency>
        <groupId>de.stalabw</groupId>
        <artifactId>charts</artifactId>
        <version>0.0.2</version>
        <exclusions>
            <exclusion>
                <!-- does not work<groupId>org.apache.derby</groupId> but this:-->
                <groupId>org.eclipse.birt.runtime.3_7_1</groupId>
                <artifactId>derby</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

错误是相同的，“mvn dependency:list”没有改变。依赖ist charts->birt->derby 树的相关部分：

```
+- <myPackage.myProject>:metaDataService:jar:1.8.0:compile
|  +- org.apache.derby:derby:jar:10.8.1.2:compile
 ...
\- <myPackage>:charts:jar:0.0.2:compile
    \- org.eclipse.birt.runtime:org.eclipse.birt.runtime:jar:4.2.0:compile
      ...
      +- org.eclipse.birt.runtime.3_7_1:derby:jar:10.5.1000001:compile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:47:27.880

您可以使用以下条目从其中一个条目中排除传递依赖：

```
<dependency>
  <groupId>sample.ProjectA</groupId>
  <artifactId>Project-A</artifactId>
  <version>1.0</version>
  <scope>compile</scope>
  <exclusions>
    <exclusion>  <!-- declare the exclusion here -->
      <groupId>sample.ProjectB</groupId>
      <artifactId>Project-B</artifactId>
    </exclusion>
  </exclusions> 
</dependency> 
```

[http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

# html - 垂直对齐奇怪的 Chrome 行为

> ID：12352962
> 
> 赞同：5
> 
> 时间：2012-09-10T13:41:28.823
> 
> 标签：html, css, firefox, google-chrome, cross-browser

我刚刚注意到**Chrome**有一个奇怪的行为。对 div 应用垂直对齐属性，其中的文本节点也会对齐。

使用**Firefox**时，文本节点会按照应有的方式忽略该属性。

是 Chrome 错误吗？ [活生生的例子](http://jsfiddle.net/XqJ6j/2/)

```
<div>
  <input>
   text
</div>

div{
    vertical-align:top;
    font-size: 11px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:50:36.417

这似乎是应用 vertical-align: top 到 div 的预期行为。如果您想要一个简单的修复，只需将 line-height 应用于 div ，即输入框的高度。这将使文本垂直居中于输入的右侧。

```
div {
  vertical-align: top;
  font-size: 11px;
  line-height: 16px;
} 
```

# opencl - 我的开放 cl 内核有什么问题？

> ID：12352963
> 
> 赞同：1
> 
> 时间：2012-09-10T13:42:02.977
> 
> 标签：opencl

代码是将存储在压缩列存储中的稀疏矩阵与列向量相乘。首先是串行代码。其次是打开 cl 内核。让我使用更有意义的名称而不是 inputimage 和 output。

我必须并行化我的代码。串行输出与内核的输出不同。有人可以告诉我我遗漏了什么吗？

序列号是

```
int result[4]={0,0,0,0};
   for(int col=0;col<4;col++)
     {
         for(int j=rowptr[col];j<rowptr[col+1];j++)
         {

         result[index[j]]+=val[j]*colvector[col];

         }
     } 
```

它的输出与并行代码不同。每个内核的工作单元设置为 4 下面给出了并行代码。有人请告诉我我缺少什么。

```
 int col=get_global_id(0);

  for(int j=rowptr[col];j<rowptr[col+1];j++)
         {

         result[index[j]]+=val[j]*colvector[col];

         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:40:03.010

在 OpenCL 中，4 个工作项将并行执行。他们都将尝试同时更新`output2[inputImage4[j]]`。行为是未定义的，但您可能会观察到 4 个工作项中只有一个的贡献。

解决此类问题需要修改算法，或者如果您不经常访问该值，则需要使用原子操作（这将序列化更新）。

# ios - iOS 故事板 UINavigationController 不正确地弹出视图（向下滑动，而不是向右滑动）

> ID：12352967
> 
> 赞同：1
> 
> 时间：2012-09-10T13:42:07.023
> 
> 标签：ios, uinavigationcontroller, segue, uistoryboardsegue

我正在编写一个 iOS 应用程序的故事板。我正处于确保横向在整个应用程序中正常工作的阶段。我还有一个问题，那就是：如果手机是横向模式并且我从堆栈中弹出一个视图控制器，通过后退按钮，动画会通过向下滑动视图而不是向右滑动的一般方法弹出。

这是应用程序结构：

1 `UITabBarController`
   2 `UINavigationController`
      3 `UITableViewController`
   2 `UINavigationController`
      3`UIViewController`

在第一个表（带有 的表`UITableViewController`）上，后退动画按预期工作（向右移动），但在第二个选项卡上，动画无法正常工作。所有的推送和弹出都是通过故事板处理的，而不是代码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:37:23.240

我的错！

我忘了更新`shouldAutorotateToInterfaceOrientation`所有视图控制器中的方法。这是原文：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

以下是允许旋转到所有方向的内容：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

复杂之处在于视图已经旋转到横向，因为超级视图确实正确更新了旋转代码，但子视图没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:59:21.600

模态视图控制器有 4 种基本动画样式，它们都不像导航控制器推送。因此，您的 segue 很可能定义不正确，或者它们是从代码中“呈现”的。

确保情节提要的 segue 是“推送”而不是模态的。您可以在 Interface Builder 中检查这一点 - 转到情节提要并单击 segue 连接线。在标识 segue 名称的对象检查器中，就在它下面应该说“push”而不是“modal”。如果它说“模态”，将其更改为“推”，动画应该会自行纠正。

还要确保在您的代码中使用 preformSeque ... 方法来显示下一个视图控制器，而不是执行类似 presentModalViewController ... 的操作。

# iphone - 如何在 Xcode4 for iPhone 应用程序中添加初始视图

> ID：12352974
> 
> 赞同：0
> 
> 时间：2012-09-10T13:42:22.617
> 
> 标签：iphone, ios, xcode4, uiviewcontroller

我的游戏应用程序目前有一个 ViewController 和 XIB 用于玩游戏。我为初始（启动）视图添加了一个新的 ViewController 和 XIB。

如何让应用程序启动到这个初始视图？我想不通。

仅供参考，初始屏幕用于漂亮的欢迎图形和几个设置控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:53:56.567

在你的 appDelegate 的函数中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

 //DesiredStartUpViewController is the class which u wanna call at start up
 DesiredStartUpViewController * yourDesiredViewController = [[DesiredStartUpViewController alloc]initWithNibName:@"YourDesiredViewController"];

 UINavigationController *navigationController = [[UINavigationController alloc]initWithRootViewController:yourDesiredViewController];

 [self.window setRootViewController:navigationController];
 [self.window makeKeyAndVisible];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:31:15.237

转到项目设置选择目标。然后单击“摘要”，您必须在下面设置启动画面。它将显示为加载屏幕。

# php - 正则表达式 - 匹配 [[[ 和 ]]] 之间任何内容的倍数

> ID：12352977
> 
> 赞同：3
> 
> 时间：2012-09-10T13:42:41.520
> 
> 标签：php, regex

我需要使用正则表达式匹配 [[[ 和 ]]] 之间的任何内容。然后我需要将括号之间的所有值放入一个数组中。

示例文本：

```
here is some 'test text [[[media-2 large right]]], [[[image-0 large left]]] the another token [[[image-1]] 
```

从上面的文本我需要匹配前两个：

```
1, [[[media-2 large right]]]
2, [[[image-0 large left]]] 
```

但不是最后一个，因为它最后只有两个 [。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:57:30.413

这将检查：

1.  `[[[`
2.  其次是：
    1.  除了`]` *- 或 -*
    2.  一到二`]`不跟`]`
3.  其次是`]]]`

```
preg_match_all('/\[\[\[(?:(?:[^\]]*|]{1,2}(?!]))*)]]]/', $string, $matches);
print_r($matches[0]); 
```

此正则表达式具有匹配`]`三方括号包装器内部的好处（例如`[[[foo]bar]]]`.

***注意：** `]`不需要转义，除了在字符类中。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:26:34.023

一个通用的解决方案是这个：

```
\[{3}(?=.*?\]{3}(?!\]))((?:(?!\]{3}(?!\])).)*) 
```

它读到

```
\[{3}         # 3 opening square brackets
(?=           # begin positive look-ahead ("followed by..."
  .*?\]{3}    #   ...3 closing brackets, anywhere ahead (*see explanation below)
  (?!\])      #   negative look-ahead: no more ] after the 3rd one
)             # end positive look-ahead
(             # begin group 1
  (?:         #   begin non-matching group (for atomic grouping)
    (?!       #     begin negative look-ahead ("not followed by"):
      \]{3}   #       ...3 closing square brackets
      (?!\])  #       negative look-ahead: no more ] after the 3rd one
    )         #     end negative look-ahead
    .         #     the next character is valid, match it
  )           #   end non-matching group
)             # end group 1 (will contain the wanted substring) 
```

正向前瞻是一个保障条款，它允许表达式`"]]]"`在长输入字符串中没有任何内容时快速失败。

一旦确定 a`"]]]"` *将*在字符串前面的某个点跟随，否定的前瞻确保表达式正确匹配这样的字符串：

```
[[[foo [some text] bar]]]
                 ^
                 +-------- most of the other solutions would stop at this point 
```

此表达式检查每个字符是否`]`跟随三个，因此在此示例中它将包括`" bar"`.

表达式的`"no more ] after the 3rd one"`一部分确保匹配不会过早结束，因此在这种情况下：

```
[[[foo [some text]]]] 
```

比赛还是会`"foo [some text]"`。
没有它，表达式会过早停止 ( `"foo bar [some text"`)。

副作用是我们不需要实际匹配`"]]]"`，因为积极的前瞻清楚地表明它们在那里。我们只需要匹配它们，负前瞻就可以很好地做到这一点。

请注意，如果您的输入包含换行符，您需要在“dotall”模式下运行表达式。

另见：[http ://rubular.com/r/QFo9jHEh9d](http://rubular.com/r/QFo9jHEh9d)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T13:46:46.180

更安全的解决方案：

```
\[{3}[^\]]+?\]{3} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T13:44:26.197

我认为这有效：

```
\[\[\[(.*)\]\]\] 
```

但这可能是新的方法:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T13:48:22.370

如果您的字符串将始终遵循该格式，`subject`, `size`, `position`，您可以使用：

```
$string = "here is some 'test text [[[media-2 right]]], [[[image-0]]] the another [[[image-1 left large]]] and token [[[image-1]]";

preg_match_all('/[\[]{3}(.*?)(.*?)?(.*?)?[\]]{3}/', $string, $matches);
print_r($matches); 
```

# django - 为什么我们对静态文件使用不同的 Web 服务器？

> ID：12352978
> 
> 赞同：2
> 
> 时间：2012-09-10T13:42:41.783
> 
> 标签：django, web-applications, web

我是网络开发的新手。

**为什么我应该避免让同一个 Web 服务器同时处理 Django 和静态媒体文件，如样式表或 JavaScript？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:08:27.313

作为最佳实践，建议通过 Web 服务器提供静态媒体文件以加快速度。

此外，使用 CDN 可以更有效地向用户交付内容。交付内容的服务器基于最快响应时间的度量 - 网络接近度（最少跃点）、可用性等

你可以在这里阅读更多：

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

# windows - SecurID 代理文档在哪里？

> ID：12352983
> 
> 赞同：5
> 
> 时间：2012-09-10T13:43:22.413
> 
> 标签：windows, two-factor-authentication, securid

显然，在安装了“RSA 身份验证代理”的 Windows 机器上，可以利用它来提供身份验证服务。似乎有一些文档/ SDK可以做到这一点。似乎可以静态链接此功能，或通过调用从“aceclnt.dll”导出的一些函数来动态加载它。

但是，由于 RSA 的网站已移至 emc.com，所有指向旧网站的链接都已失效。我在新网站的任何地方都找不到文档。请帮我谷歌这个！

我们可以通过 PAM 在 UNIX/Linux 上的应用程序中轻松使用 SecurID 身份验证。只有在 Windows 上，我们需要使用一些特殊的 SecurID API 来查询是否接受/拒绝凭据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T15:15:56.003

## 如果您有支持帐户...

这不是那么简单，尤其是使用 C SDK，您将与`aceclnt.dll`. 许多 API 调用是异步的，这意味着您必须调用并轮询答案。大多数/所有流量都是加密的，Wireshark 帮助不大。

但是要获取文件，我必须有一个支持帐户（我有一个并用它与 RSA 确认）。

来自 RSA Authentication Agent API 8.1 SP2 for C 发行说明：

> C 的 RSA Authentication Agent 应用程序编程接口 (API) 使开发人员能够将 RSA SecurID 集成到自定义或第三方应用程序中。该 API 可在 RSA SecurCare Online 上以 .tar 和 .zip 文件的形式下载，网址为[https://knowledge.rsasecurity.com 。](https://knowledge.rsasecurity.com)

C SDK 的确切 URL 是[https://knowledge.rsasecurity.com/scolcms/set.aspx?id=8635](https://knowledge.rsasecurity.com/scolcms/set.aspx?id=8635)

从 Authentication Manager 7.1 开始，有一个新的 Java、Python 和 C# API。使用起来容易得多。我已成功使用 Java 版本进行令牌管理和用户身份验证。

Authentication Manager SDK Python、Java 和 C# SDK 的 URL 是[https://knowledge.rsasecurity.com/scolcms/set.aspx?id=8205](https://knowledge.rsasecurity.com/scolcms/set.aspx?id=8205)。

发布这些文件会使我的支持帐户失效，但其他人已经[发布了示例代码](http://drjohnstechtalk.com/blog/2012/04/adddelete-jython-script-for-rsa-authentication-manager/)。它在 Python 中，但 Java 和 C# 对象名称相同。

## 其他尝试：RADIUS

您的服务器可以是 RADIUS 客户端。将[RADIUS 客户端库](http://sourceforge.net/projects/ace-radius/)集成到您的代码中，并将 PIN 和令牌代码发送到 SecurID 服务器。它将进行验证。作为奖励，您将准备好支持其他基于 RADIUS 的身份验证服务。

请记住，您将验证 PIN 和令牌代码。在大多数/所有配置中，PIN 将不同于 Windows 密码。

您必须使用该信息调用 SecurID 服务器，因为无法分辨哪个部分是 pin，哪个部分是令牌代码。令牌代码并不总是 6 位数字，PIN 也可以是数字。或者用户可能还没有设置 PIN，等等。

您也可以支持 RADIUS 中的通用来回机制。它将用于提示用户输入他的下一个令牌代码、更改他的 PIN 等。作为 RADIUS 客户端的服务器将在客户端和服务器之间来回移动信息，直到满意为止。然后，您可以认为身份验证已完成。您可以使用[NTRadPing](http://www.mastersoft-group.com/download/)进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T16:08:33.533

三年后，答案发生了变化：文档可在 RSA 的网站上免费下载！

[https://community.rsa.com/docs/DOC-36840](https://community.rsa.com/docs/DOC-36840)

在没有任何支持合同的情况下，您现在可以下载并阅读“Authentication Agent API 8.1.1 for C Developers Guide”。

# android - 如何将相机中的图像保存到内存中？

> ID：12352991
> 
> 赞同：1
> 
> 时间：2012-09-10T13:43:53.420
> 
> 标签：android, memory, internal

我有一个 Android 4.0.3 的 AVD。我需要与媒体商店合作。我在 SDCARD 中使用文件夹相机并将其放入我的图像，但我需要使用 DDMS 将图像上传到内存中的文件夹相机。但是，我没有找到任何文件夹来上传我的图片。我尝试拍照，但这些都存储在 sdcard 中，我还没有找到任何方法来更改设置以将照片保存在内部存储器中。

如何将相机中的图像保存到内存中？是否可以创建一个文件夹来存储图像并且图像显示在画廊中？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:22:47.627

从相机拍摄图像并在 ImageView 上捕获。在这里，我正在编写代码以将 ImageView 的图像保存在内存中。

```
 Bitmap bm;

     View v=imageView;
     v.setDrawingCacheEnabled(true);
     bm=Bitmap.createBitmap(v.getDrawingCache());
     v.setDrawingCacheEnabled(false);

     String fileName="image.png";
     File file=new File(fileName);

     try 
     {

        FileOutputStream fOut=openFileOutput(fileName, MODE_PRIVATE);
        bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);

     }
     catch (Exception e) 
     {
        e.printStackTrace();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:54:45.543

Camera的[官方 android 文档](http://developer.android.com/guide/topics/media/camera.html)展示了如何捕获图像并将其保存在某个位置，以使其在图库中也可见。

[这](http://developer.android.com/guide/topics/media/camera.html#saving-media)部分特别展示了如何以最有效的方式（在 SD 卡上）保存捕获的图像。

[在这里](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)您可以找到有关如何将图片存储在内部存储器（而不是 SD 卡）中的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T19:23:36.000

转到设备设置>设备>应用程序>应用程序管理器>“您的应用”>权限>启用存储权限！

显现：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

保存：

```
FileOutputStream outStream = null;
File sdCard = Environment.getExternalStorageDirectory();
File dir = new File(sdCard.getAbsolutePath() + "/YourFolderName");
dir.mkdirs();
String fileName = String.format("%d.jpg", System.currentTimeMillis());
File outFile = new File(dir, fileName);
outStream = new FileOutputStream(outFile);
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
outStream.flush();
outStream.close(); 
```

# java - 在 OSGi 框架中运行基于 SWT 的 GUI

> ID：12352995
> 
> 赞同：0
> 
> 时间：2012-09-10T13:44:04.670
> 
> 标签：java, user-interface, swt, osgi, bundle

我正在关注一个关于 SWT的简单[教程。](http://www.vogella.com/articles/SWT/article.html)当我将它作为 Java 应用程序运行时，它运行良好。如何让它作为 OSGi 包运行？有什么特殊的配置设置要做吗？

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:50:30.650

您不妨将 GUI 构建为[Eclipse 富客户端平台](http://wiki.eclipse.org/index.php/Rich_Client_Platform)(RCP) GUI。

这样，Eclipse 将管理 OSGI 代码，您可以专注于 SWT 或 JFace 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T21:13:01.633

看看 bnd（工具）。SWT 的唯一特殊之处在于 Display 事件循环位于 Mac 的主线程上。bndtools 启动器对此有特殊支持。无论您想在何处运行 Display 事件循环，请使用 main.thread=true 服务属性注册一个 Runnable 服务。然后在主线程上调用此 Runnable。

其余的只是普通的普通旧 OSGi ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T02:46:18.250

确保您的 Activator 类实现`BundleActivator`(osgi) 和 Create Display，打开 Shell(window) 并运行 SWT 事件循环 `start(BundleContext context)` 并在`stop(BundleContext context)`.