# StackOverflow 问答 11887000-11887999

# android - Android：计算 Sprite 在一条线上的旋转和放置

> ID：11887002
> 
> 赞同：0
> 
> 时间：2012-08-09T15:41:56.257
> 
> 标签：android, andengine, trigonometry

我正在尝试将一系列方形精灵放在用户在我的 Android 上绘制的线上。

我有手指向下/手指向上点的 x/y 坐标：

`Vector2[] points = { new Vector2(mFingerStartX, mFingerStartY), new Vector2(mFingerEndX, mFingerEndY) };`

并与以下距离：

`float distance = points[0].dst(points[1]);`

以及该行所需的块数（64x64px）：

`int blockNumber = (int) Math.floor(distance / 64);`

但我不知道从这里去哪里！我的最终目标是让方形精灵排列起来，并沿着线条的方向旋转，这样它们就可以形成一条平滑的线条。

我想象它的方式是针对所需的每个块，将块放置在线上的一个点，将其旋转到正确的方向，沿线向下移动 64px，然后重复直到放置所需数量的块。

**总结**：如何获得旋转度数，以及需要放置精灵的点？

**编辑：**这就是我已经走了多远。我的旋转很好，但我似乎无法让精灵正确排列。任何人都看到我可能会出错的地方吗？

```
 float mFingerEndX = pSceneTouchEvent.getX();
            float mFingerEndY = pSceneTouchEvent.getY();

            Vector2[] points = { new Vector2(mFingerStartX, 800 - mFingerStartY), new Vector2(mFingerEndX, 800 - mFingerEndY) };
            float distance = points[0].dst(points[1]);

            int blockNumber = (int) Math.floor(distance / 64);  //get the number of ice blocks needed to fill the area

            double angle = Math.atan2(points[0].x - points[1].x, points[0].y - points[1].y);
            double degrees = Math.toDegrees(angle);

            Debug.d("Degrees: " + String.valueOf(degrees));

            for (int i = 0; i < blockNumber; i++) {
                double deltaX = Math.cos(degrees) * 32;
                double deltaY = Math.sin(degrees) * 32;

                float xLocation = (float) ((i * deltaX) + mFingerStartX);
                float yLocation = (float) ((i * deltaY) + mFingerStartY);
                final Sprite iceSprite = new Sprite(xLocation, yLocation, this.mIceBlockRegion, this.getVertexBufferObjectManager());
                iceSprite.setRotation((float) (180 - Math.abs(degrees)));
                mScene.attachChild(iceSprite);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:54:25.583

对于每个`blockNumber`，计算从用户绘制的线的该部分的一端到另一端的相对旋转。这是直角三角形的斜边，因为你也有该段的垂直和水平距离，你可以通过一些基本的三角函数来获得远离垂直的角度。将精灵旋转到那个角度，然后放置它（底部中间与底部点对齐）。对线上的每个精灵重复此操作，直到到达顶部。

但是，如果用户绘制的线条不是很平滑，精灵就不会是无缝的，但这是另一个问题。

# .net - vb.net 中初始化列表的语法错误

> ID：11887003
> 
> 赞同：1
> 
> 时间：2012-08-09T15:42:04.173
> 
> 标签：.net, vb.net, c#-to-vb.net

在完成 ASP MVC 3 音乐商店教程时，我正在尝试将 C# 页面翻译成 VB。[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4)

该页面是一堆将被拉入数据库的示例数据。

我要翻译的 C# 如下所示：

```
 new List<Album>  
        {
            new Album { Title = "A Copland Celebration, Vol. I", Genre = genres.Single(g => g.Name == "Classical"), Price = 8.99M, Artist = artists.Single(a => a.Name == "Aaron Copland & London Symphony Orchestra"), AlbumArtUrl = "/Content/Images/placeholder.gif" },

         //lots of albums here... just like examples above and below

            new Album { Title = "Ao Vivo [IMPORT]", Genre = genres.Single(g => g.Name == "Latin"), Price = 8.99M, Artist = artists.Single(a => a.Name == "Zeca Pagodinho"), AlbumArtUrl = "/Content/Images/placeholder.gif" },
        }.ForEach(a => context.Albums.Add(a)); 
```

我转换后的 VB 代码看起来像这样，但编译器说第一行有语法错误...

```
New List(Of Album)() With { _             //Compiler says there is a syntax error here
            New Album() With { _
                 .Title = "A Copland Celebration, Vol. I", _
                 .Genre = genres.[Single](Function(g) g.Name = "Classical"), _
                 .Price = 8.99D, _
                 .Artist = artists.[Single](Function(a) a.Name = "Aaron Copland & London Symphony Orchestra"), _
                 .AlbumArtUrl = "/Content/Images/placeholder.gif" _
            }, _

       //lots of albums here 

            New Album() With { _
                .Title = "Ao Vivo [IMPORT]", _
                 .Genre = genres.[Single](Function(g) g.Name = "Latin"), _
                 .Price = 8.99D, _
                 .Artist = artists.[Single](Function(a) a.Name = "Zeca Pagodinho"), _
                 .AlbumArtUrl = "/Content/Images/placeholder.gif" _
             } _
}.ForEach(Function(a) context.Albums.Add(a)) 
```

如何修复语法错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:44:27.007

您需要（至少）在构造周围加上括号，并且我认为还`Call`需要一个（至少在以前的 VB 版本中需要，如果 VB10 仍然需要它，我现在不需要）；此外，`With`列表构造函数之后[应该是 a`From`](http://msdn.microsoft.com/en-us/library/dd293617.aspx)（但在其他构造函数之后是必需的）：

```
Call (New List(Of Album) From { _
    …
}).ForEach(…) 
```

此外，`ForEach`需要 a `Sub`，而不是 a `Function`。（顺便说一下，行继续下划线在 VB10 中是多余的。）

但在 VB 和 C# 中，这都是非常混乱的代码。只需将表达式分配给其初始化程序中的对象，然后在该对象`ForEach`上*调用*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:50:45.490

在我看来，你像一个额外的`With`和一组额外的花括号。我认为你的语法应该是这样的：

```
 New List(Of SomeThing)(
     {
     New SomeThing With {.name = "foo"}, 
     New SomeThing With {.name = "bar"}
     }
 ) 
```

所以你的例子应该是这样的：

```
 Dim a As New List(Of Album)({
          New Album() With {.Title = "A Copland Celebration, Vol. I"},
          New Album() With {.Title = "Ao Vivo [IMPORT]"}}) 
```

但我同意康拉德的观点——这段代码太可怕了！

# apache - 带有连字符和不同字长的 mod_rewrite

> ID：11887013
> 
> 赞同：1
> 
> 时间：2012-08-09T15:42:41.267
> 
> 标签：apache, mod-rewrite, url-rewriting

我正在尝试将此网址`www.website.com/clients/index.php?display=client-name`转换为`www.website.com/clients/client-name`.

但我遇到了问题，因为客户名称的长度通常不同。它可以是一个词到五个以上的词，但它们总是用**连字符**分隔：

*   客户
*   客户名称
*   客户名的庄园
*   ETC

我已经成功地为这个网站写了几个其他的 url，但不能让这个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:45:48.720

连字符无关紧要，除非您使用的正则表达式与它们不匹配。您可以简单地包含`-`在表达式中。例如，如果你有`([A-Za-z0-9]+)`，那么你只需要添加`-`它就可以了`([A-Za-z0-9-]+)`。您还应该确保您匹配的任何内容都不是现有资源（如 index.php），因为您希望那些只是得到服务。所以像：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^/?clients/([A-Za-z0-9-]+)/?$ /clients/index.php?display=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:52:21.937

1）似乎（对我而言）您正在以其他方式进行操作-第二个应该是您的人类可读链接网址，第一个应该是 mod_rewrite 处理的结果。
2）只要您知道它的起点和终点，您的客户名称有多长并不重要 - 这里的起点应该
`/clients/(.*)$`
并且应该重写为
`/clients/index.php?display=$1`

阅读更多关于正则表达式的内容将对您有所帮助

# java - Google App Engine：数据选项

> ID：11887016
> 
> 赞同：0
> 
> 时间：2012-08-09T15:42:51.673
> 
> 标签：java, google-app-engine, nosql, cloud, bigdata

Google App Engine 为您提供三种持久性解决方案供您选择：

*   **NoSQL 数据存储**- “提供 NoSQL 无模式对象数据存储，带有查询引擎和原子事务”
*   **Cloud SQL** -“为您的 App Engine 应用程序提供关系 SQL 数据库，基于熟悉的 MySQL 数据库”
*   **云存储**- “为大小高达 TB 的对象和文件提供存储服务”

这些名称及其定义让我有些困惑。*NoSQL 数据存储*不是基于云的吗？

它们的性能优势是仅使用标准*NoSQL 数据存储*还是迁移到云？如果有，它们是什么？

*Cloud SQL*和*Cloud Storage*之间的唯一区别是您可以存储的数据量吗？还是这两个完全不同的想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:10:44.310

还有[Blobstore 服务](https://developers.google.com/appengine/docs/python/blobstore/overview)和[Google Big Query](https://developers.google.com/bigquery/)。

对于第一个问题，所有解决方案都是基于云的。

> Datastore 是一个无模式对象数据存储，为您的 Web 应用程序提供健壮、可扩展的存储，没有计划的停机时间、原子事务、读写的高可用性、读取和祖先查询的强一致性以及所有其他查询的最终一致性。

Datastore 和 Cloud SQL 产品的用途相同，但决定使用哪一种将取决于您的项目需求。数据存储区自动扩展并且是一个 No-SQL 数据库，而 Cloud SQL 是一个 SQL 数据库。有关更多详细信息，请参阅[用于企业管理系统的 GAE DataStore 与 Google Cloud SQL 。](https://stackoverflow.com/questions/10905861/gae-datastore-vs-google-cloud-sql-for-enterprise-managment-systems)

Cloud SQL 和 Cloud Storage 是完全不同的产品。第一个可以看作是 Google 基础架构之上的 MySql 数据库。

> Google Cloud SQL 是一项网络服务，可让您创建、配置和使用位于 Google 云中的关系数据库。它是一项完全托管的服务，可维护、管理和管理您的数据库，让您可以专注于您的应用程序和服务。

后者是一种用于存储和提供文件的解决方案，就像 Blobstore 一样，但具有额外的功能（例如 ACL）。

> Google Cloud Storage API 允许您的应用程序将您的数据存储为不透明的 blob，称为“对象”。

一些链接： [https ://developers.google.com/appengine/docs/java/datastore/overview](https://developers.google.com/appengine/docs/java/datastore/overview) [https://developers.google.com/cloud-sql/](https://developers.google.com/cloud-sql/) [https://developers.google.com/appengine/docs/ java/谷歌存储/概述](https://developers.google.com/appengine/docs/java/googlestorage/overview)

# c# - Couchdb 复制--未授权创建或访问数据库

> ID：11887019
> 
> 赞同：0
> 
> 时间：2012-08-09T15:42:54.060
> 
> 标签：c#, .net, couchdb

我正在尝试使用 .NET 类（httpWebRequest）而不是 curl 来复制数据库。不幸的是，cURL 有效，但 .NET 中的（可能）相同的语法失败，出现 404“未授权访问或创建数据库”错误。下面是我的代码。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("sourceURL");
        request.Method = "POST";
        request.ContentType = "application/json";

        long ticks = DateTime.UtcNow.Ticks;

        string json = "{ \"_id\":\"database_replicate" + ticks + "\", \"source\":\"sourceURL/database\", \"target\":\"database\", \"create_target\":true, \"user_ctx\": { \"roles\": [\"_admin\"] } }";

        using (var writer = new StreamWriter(request.GetRequestStream()))
        {
            writer.Write(json);
            writer.Close();
        } 
```

然后它就在这里失败了，在响应中：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

我正在复制到本地主机和从本地主机复制。我尝试使用 request.Credentials 传递凭据，但这并没有改变问题。也没有在 url 中显式传递凭据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:21:53.457

编写代码时，json 字符串将如下所示：

```
{
    "_id":"database_replicate634805792932046092",
    "source":"sourceURL/database",
    "target":"database",
    "create_target":true,
    "user_ctx": {
        "roles": ["_admin"]
    }
} 
```

当你使用 cURL 时，你在发送什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:56:38.770

事实证明，问题在于我的用户名和密码没有被捕获。无论我是尝试将它们作为 url 的一部分还是作为凭证属性传递，它都没有接收到它们。我必须像这样创建一个授权标头

```
$authorization = [System.Convert]::ToBase64String([System.Text.ASCIIEncoding]::ASCII.GetBytes("username" + ":" + "password")) 
$delRequest.Headers.Add("Authorization", "authType " + $authorization) 
```

让它工作。

# c# - 用C#发送邮件的条件

> ID：11887020
> 
> 赞同：0
> 
> 时间：2012-08-09T15:42:55.357
> 
> 标签：c#, email, yahoo, send

我有以下用于发送邮件的代码，如果您有网络连接，它可以完美运行。

```
MailMessage oMail = new MailMessage(new MailAddress("andr3yy.design@yahoo.com"), new MailAddress(setare[0].email));
        oMail.Subject = "Subject";
        oMail.Body = "Body";
        SmtpClient oSmtp = new SmtpClient();
        oSmtp.Host = "smtp.mail.yahoo.com";          
        oSmtp.Credentials = new NetworkCredential("andr3yy.design", "password");
        oSmtp.EnableSsl = false;
        oSmtp.Port = 587;
        oSmtp.Send(oMail); 
```

问题是：如果您没有网络连接并访问此功能，应用程序将崩溃。我不希望这种情况发生。我需要一个条件（如果）来检查你是否连接到互联网，但我是 C# 新手，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:50:02.083

如果这将成为一个问题，您可能应该在启用电子邮件例程之前检查网络连接。

[`System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable()`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable.aspx)

这样，您的用户就不会在发现连接不存在之前浪费时间写一封大电子邮件。

```
if (GetIsNetworkAvailable()) {
  // your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:46:15.197

一个好的方法是为此使用`try`/块：`catch`

```
MailMessage oMail = new MailMessage(new MailAddress("andr3yy.design@yahoo.com"), new MailAddress(setare[0].email)){
   Subject = "Subject",
   Body = "Body"
};

SmtpClient oSmtp = new SmtpClient() {
   Host = "smtp.mail.yahoo.com",          
   Credentials = new NetworkCredential("andr3yy.design", "password"),
   EnableSsl = false,
   Port = 587
};

try{
        oSmtp.Send(oMail);
} 
catch(Exception e) { 

    string message = e.Message;
    // this will handle no connection to the internet, along with other possible exceptions
} 
```

# css - CSS选择器：没有作为孩子

> ID：11887022
> 
> 赞同：6
> 
> 时间：2012-08-09T15:42:58.707
> 
> 标签：css, css-selectors

我正在尝试选择链接到没有子图像标签的外部网站的所有锚标签。如果我有一个图像作为链接，它也会在这些图像旁边添加一个小的外部链接图标，但我不希望这样。

这是我到目前为止所拥有的：

```
a[href^="http://"]{
  background:transparent url(..icon/external.png) center right no-repeat;
  display:inline-block;
  padding-right:18px;
} 
```

作为额外的奖励，我如何让它与“https://”链接一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:52:50.130

这对于纯 CSS 是不可能的。但是，您可以使用一些 jQuery 魔法：

jQuery：

```
$("a[href^='http://']:not(:has(img))").addClass("external"); 
```

CSS：

```
a.external {
  background:transparent url(..icon/external.png) center right no-repeat;
  display:inline-block;
  padding-right:18px;
} 
```

见演示：http: [//jsfiddle.net/hKTBp/](http://jsfiddle.net/hKTBp/)

查看演示（包括 HTTPS）：http: [//jsfiddle.net/hKTBp/1/](http://jsfiddle.net/hKTBp/1/)

# ruby-on-rails - 在 Rails 中搜索不同的模型查询

> ID：11887025
> 
> 赞同：2
> 
> 时间：2012-08-09T15:43:20.517
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

好吧，我有多个模型，我想让客户在客户表和事件表上搜索这是我的模型

```
def self.search(search)
  if search
    Customer.find(:all, :conditions => ['first_name LIKE ?', "%#{search}%"])
    Event.find(:all, :conditions => ['title LIKE ?', "%#{search}%"])
  else
    Customer.find(:all)
    Event.find(:all)
  end
end 
```

哪个返回事件查询，但我想同时返回它们，如何组合查询？

更新：

这正是我想要做的，同时搜索多个模型，例如客户和事件。

我在模型搜索中定义了 def self.search(search) 并且我有一个控制器

```
class SearchesController < ApplicationController
   def query
     #@results = Search.new(params[:search][:query]).results
     @results = Search.search(params[:query])
   end 
```

我想在我的模型中查看客户和事件，不知道该怎么做

这是一个视图示例，不确定它是对还是错

```
<h1>Search Results</h1>
<% @results.each do |result| %>
    <div>
    <%= result.first_name %>
    <% if admin? %>
        <%= link_to 'Show', '#' %>
        <%= link_to 'Edit', '#' %>
        <%= link_to 'Destroy', '#' %>
    <% end %>
    </div>

    <div>
    <%= result.title %>
    <% if admin? %>
        <%= link_to 'Show', '#' %>
        <%= link_to 'Edit', '#' %>
        <%= link_to 'Destroy', '#' %>
    <% end %>
    </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:35:27.900

在我看来，更好的方法是将每种类型的结果存储在实例变量中，而不是组合数据集。我这样说是因为我怀疑您的客户和事件表是相同的。

```
class SearchesController < ApplicationController
   def query
     @customers = Customer.where('first_name LIKE ?', params[:query])
     @events = Event.where('title LIKE ?', params[:query])
   end 
```

在您的视图中，您可以显示在客户中找到的结果和在事件中找到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:27:15.560

在 ruby​​ 方法中返回最后一条语句的值。我不知道你所说的“组合”是什么意思。如果哈希没问题：

```
def self.search(search)
  if search
    {customers: Customer.find(:all, :conditions => ['first_name LIKE ?', "%#{search}%"]),
    events: Event.find(:all, :conditions => ['title LIKE ?', "%#{search}%"])}
   else
     {customers: Customer.find(:all),
     events: Event.find(:all)}
   end
end 
```

# android - 我的意图不适用于安卓

> ID：11887028
> 
> 赞同：0
> 
> 时间：2012-08-09T15:43:28.630
> 
> 标签：android

所以我正在尝试使用 Intents 切换视图，我之前已经能够让它工作，但现在它只是一直关闭，这也是通过菜单按钮，这是我的菜单代码：

```
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.menu, menu);
    return true;
}
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()){
    case R.id.stats:
            Intent i = new Intent("com.mittereder.rockpaper.STATS");
            startActivity(i);
        break;
    }
    return false;
} 
```

这是包含该项目的我的菜单：

```
 <?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/stats"
        android:alphabeticShortcut="s"
        android:title="Stats"/>

</menu> 
```

那么这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mittereder.rockpaper"
    android:versionCode="2"
    android:versionName="1.2" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/stop"
        android:label="@string/app_name" >
        <activity
            android:name=".start"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".stats"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.mittereder.rockpaper.STATS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我一遍又一遍地检查我的代码，但我不知道我错过了什么。

日志猫：

```
08-09 11:51:11.471: E/AndroidRuntime(13384): FATAL EXCEPTION: main
08-09 11:51:11.471: E/AndroidRuntime(13384): android.app.SuperNotCalledException: Activity {com.mittereder.rockpaper/com.mittereder.rockpaper.start} did not call through to super.onPause()
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3103)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3062)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3035)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.app.ActivityThread.access$800(ActivityThread.java:139)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1268)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.os.Looper.loop(Looper.java:154)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at android.app.ActivityThread.main(ActivityThread.java:4945)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at java.lang.reflect.Method.invokeNative(Native Method)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at java.lang.reflect.Method.invoke(Method.java:511)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-09 11:51:11.471: E/AndroidRuntime(13384):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:57:06.810

看起来您的 Start Activity 覆盖了 onPause 并且不调用超类。在启动 stat 活动之前，在 start 活动上调用 onPause。

# javascript - 用于切换类的代码在 Google Chrome 中无法按预期工作

> ID：11887030
> 
> 赞同：0
> 
> 时间：2012-08-09T15:43:37.067
> 
> 标签：javascript, jquery

我正在使用 jQuery 迈出小步，我不想弄乱我创建的内容。

这段代码切换类，可`div`在单个页面上打开和关闭多个标签。我有大约 5 个`div`隐藏的标签，此代码切换类以按顺序打开它们；它们不是同时打开的。

问题是，我刚刚在 Chrome 中测试了该页面，无论我先点击哪个标签，它都不会在第一次点击时打开。我必须点击两次。但是代码在 FF、IE、Safari 中有效。我认为这是索引从 开始的问题`0`，不确定。

这里是：

```
$(document).ready(function() {
    $('.readMore').each(function(i) {
        $(this).on('click', function() {
            $(this).toggleClass('readMore readLess');
            $(this).next().toggle();
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:45:00.640

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/8sXBE/)**

```
$(document).ready(function() {
  $('.readMore').on('click', function() {
    $(this).toggleClass('readLess');            
  });    
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:57:04.300

类似于 Adil 的答案，但更符合您的规范（即切换以下每个 div）：

[http://jsfiddle.net/JBLjh/2/](http://jsfiddle.net/JBLjh/2/)

# .net - 双重继承和抽象方法

> ID：11887033
> 
> 赞同：2
> 
> 时间：2012-08-09T15:43:39.463
> 
> 标签：.net, inheritance, abstract-class, base-class, delphi-prism

我有一个继承了两次的基地。第二个子类没有为方法克隆提供任何签名，但第三个子类提供并定义方法克隆如下。

```
 TControlObject = abstract class
  ...
  public
    method Clone:TControlObject; virtual; abstract;
  end;

  TGateControl = class(TControlObject)
  ...
  public
  ...
  end;

  TAndControl = class(TGateControl)
  public
    method Clone:TControlObject; override;
  end; 
```

但是，编译器会引发错误，即 TGateControl 类不提供克隆方法的实现。由于 TGateControl 是从 TControlObject 继承的，而 TAndControl 类是从 TGateControl 继承的，因此应该自动为基类 clone 方法覆盖方法 clone。我对吗？

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:56:37.953

您在`abstract`中具有 Clone 方法的属性`TControlObject`。这意味着任何直接派生自的类都`TControlObject`必须提供 Clone 方法的实现（请参阅[MSDN 摘要](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.90%29.aspx)）。因此，TGateControl 必须提供克隆的实现。如果`TControlObject`有克隆的具体实现，是的，它不需要被覆盖。

所以一些选择是：

1.  删除`abstract`克隆上的属性。
2.  `Clone`在`TControlObject`或中添加一个实现`TGateControl`。

澄清一下，这些方法永远不会“自动覆盖”。派生类能够调用基类的实现，但是说派生类“自动覆盖”了基类的实现是不正确的。

# php - 查找键的数组值

> ID：11887044
> 
> 赞同：2
> 
> 时间：2012-08-09T15:44:23.143
> 
> 标签：php, arrays

我有一个数组：

```
$countryList = array(
  "GB" => "United Kingdom",
  "US" => "United States",
  "AF" => "Afghanistan",
  "AL" => "Albania",
  "DZ" => "Algeria"
); 
```

它继续...

当我获得一个国家/地区位置时，它会显示为美国，但我需要将该（值）与键匹配，在本例中为“美国”。我该怎么做？当我需要使用值来获取密钥时，我看到的所有示例都与使用密钥获取值有关。理想情况下，输出将只是“US”，而不是数组中的输出。

我尝试过 echo`array_keys('United States', $countryList);`但它希望第一个参数位于数组中，并且它仅以美国的形式出现，如果可能的话，我宁愿不将其更改为数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:47:00.233

您可以使用[`array_search`](http://php.net/manual/en/function.array-search.php)功能：

```
$key = array_search("United States", $countryList); // $key = 'US'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:45:33.890

[`array_search`](http://www.php.net/manual/en/function.array-search.php)将为您提供映射到所提供值的键。

```
$countryCode = array_search('United States', $countryList); 
```

如果您需要多次执行此操作，您可以使用[`array_flip`](http://php.net/manual/en/function.array-flip.php)将键与值交换。这将以一次性翻转成本提供更快的查找。

```
$countriesByName = array_flip($countryList);
$countryCode = $countriesByName['United States']; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T15:47:47.643

```
<?php
$array = array(
    'fruit1' => 'apple',
    'fruit2' => 'orange',
    'fruit3' => 'grape',
    'fruit4' => 'apple',
    'fruit5' => 'apple');

// this cycle echoes all associative array
// key where value equals "apple"
while ($fruit_name = current($array)) {
    if ($fruit_name == 'apple') {
        echo key($array).'<br />';
    }
    next($array);
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T15:46:18.383

试试这个：`array_keys($countryList, "United States");`

# windows - 什么是“双堆栈错误”？

> ID：11887046
> 
> 赞同：7
> 
> 时间：2012-08-09T15:44:26.750
> 
> 标签：windows, exception, stack

我最近阅读了有关 Windows 异常处理的以下内容。

> 在某些未处理的异常中，例如双堆栈错误，操作系统将立即终止应用程序，而无需调用未处理的异常过滤器或 JIT 调试器。

什么是双栈故障？它与常规堆栈故障有何不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:09:56.693

这句话可能来自这篇[Codeproject 文章](http://www.codeproject.com/Articles/1934/Post-Mortem-Debugging-Your-Application-with-Minidu)。该网站在技术审查方面并不出名。“双重故障”的真正含义与操作系统内核有关，当内核的故障处理程序响应用户模式故障本身出现故障时，您就会得到双重故障。这是致命的并引发内核恐慌。Windows 上的蓝屏。同样存在于处理器中的东西是，x86 内核在遇到“三重故障”时会停止执行代码。

这里没什么不好的，他在文章中的*意思*是，程序由于堆栈溢出而崩溃，并且响应崩溃而运行的代码（例如使用 UnhandledExceptionFilter() 注册的代码）消耗了堆栈的最后一位Windows 提供了一个线程来尝试从 SO 中恢复。这并不多，8192 字节（两页）可用不到 7080 字节。如果这样的代码消耗了该储备，那么表演就结束了，不能进行进一步的函数调用。内核引发访问冲突并无条件终止进程。

这个小保留也是托管代码无法在 SO 中生存的原因，CLR 需要太多堆栈空间来反映异常，因此无需尝试就立即终止程序。*保护页面*的通用背景文章，底层机制，[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366549%28v=vs.85%29.aspx)。

# android - 是否可以更改 ListView 项目然后更新 ListView？

> ID：11887057
> 
> 赞同：-3
> 
> 时间：2012-08-09T15:45:05.327
> 
> 标签：android, listview

是否可以更改`ListView`项目（通过索引位置）然后`ListView`有效地更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:53:27.223

将 a与 a`ListView`结合使用[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)。

将[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)更好地处理`ListView`内容的更新。

创建一个[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)然后将其设置在您的`ListView`.

```
myListView.setAdapter(...); 
```

[这是一个应该可以帮助您的教程。](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:54:55.557

因为您在这里没有发布任何代码，仅作为示例来建议您可以使用哪些方法和类：

```
ListAdapter a = myListView.getAdapter();
Object a = a.getItem(YOUR_POSITION); 
```

# mysql - 为第一个表中的每一行从第二个表中选择多行

> ID：11887059
> 
> 赞同：0
> 
> 时间：2012-08-09T15:45:08.800
> 
> 标签：mysql, sql

**想法：** 我有两张表：一张日期表（日历）和一张位置表（总共 6 个位置）。我想做一个选择语句，将两个表连接在一起，这样我每个日期得到 6 行，其中每个日期行对于每个位置都是重复的。例如，如果我从 CALENDAR 中为位置“纽约”、“西班牙”和“密歇根”选择 8 月 21 日、22 日和 23 日，我希望返回的行如下所示：

```
August 21 - New York 
August 21 - Spain
August 21 - Michigan
August 22 - New York
August 22 - Spain
August 22 - Michigan
August 23 - New York
August 23 - Spain
August 23 - Michigan 
```

**问题：**我只有有限的 SQL 经验，所以我不知道如何进行这种连接。任何人都可以提供一个可以复制相同行为的代码示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:47:32.423

您可以使用始终为真的条件进行内部连接

```
select t2.date, t2.city from t1
inner join t2 on 1 = 1 
```

或者做一个交叉连接

```
select t2.date, t2.city from t1, t2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:47:40.723

这根本不是连接——两个表之间没有关系。所以...

```
Select Date, Location
FROM Calendar, Locations 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:55:58.760

我希望这对你有用。

```
mysql> select * from tempcity,tempdate where tempcity.jcity in ('New York','Spai
n','Michigan') and tempdate.jdate in ('Aug 21','Aug 22', 'Aug 23') order by temp
date.jdate; 
```

tempcity 是表，其中有 jcity 列。tempdate 是具有 jdate 列的表。

# css - CSS3 是否适用于 HTML 4 过渡？

> ID：11887063
> 
> 赞同：1
> 
> 时间：2012-08-09T15:45:14.763
> 
> 标签：css, html4

我想知道是否可以在声明为 .html 的 html 页面中使用 CSS3 样式表`DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"`。你知道浏览器是否会接受这个？我确定 IE9 不喜欢圆角：

```
-webkit-border-top-left-radius: 5px;
-moz-border-radius-topleft: 5px;
border-top-left-radius: 5px; 
```

IE9 忽略了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:51:29.690

IE9 确实支持圆角，即使是 doctype 过渡。这里真正的问题是，浏览器是否支持 CSS3，你可以在[这里找到](http://www.quirksmode.org/css/contents.html)

# asp.net-mvc-3 - 确定数据输入是一个有效的 URL

> ID：11887064
> 
> 赞同：1
> 
> 时间：2012-08-09T15:45:19.433
> 
> 标签：asp.net-mvc-3, url, razor

我在 MVC3 项目中有几个视图，允许用户将 Url 输入文本输入并将其保存为实体上的数据。

我们需要验证输入是有效格式的 Url。

我首先使用来自[http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)`[Url]`的注释，但由于某些奇怪的原因，如果用户输入任何大写字符，客户端验证将失败。因此，为了缓解这种情况，我添加了一个 jQuery 事件，该事件在用户键入时强制输入为小写。事实证明这也不是最佳选择，因为用户可以粘贴已被诸如 tinyUrl 等 Url 缩短服务缩短的 Url，并且这些大写字符对于翻译是必需的。

所以我改用正则表达式：

```
[RegularExpression(@"^((ht|f)tp(s?)\:\/\/|~/|/)?([\w]+:\w+@)?([a-zA-Z]{1}([\w\-]+\.)+([\w]{2,5}))(:[\d]{1,5})?((/?\w+/)+|/?)(\w+\.[\w]{3,4})?((\?\w+=\w+)?(&\w+=\w+)*)?", ErrorMessage = "Please enter a valid Url")] 
```

这适用于允许大写字符。但这并不完美。使用这个正则表达式，这些都被认为是有效的：

1.  www.asp
2.  网
3.  [http://asp.net](http://asp.net)
4.  [http://www.asp.net](http://www.asp.net)
5.  [http://www.asp](http://www.asp)

如您所见，其中一些并不是真正有效的。

这些 Url 的最大问题是在 Display View 中显示 Url 时。如果 Url 文本没有`http://`附加到 Url，则在 View 中创建的链接最终看起来像这样：

```
http://www.mydomain.com/controller/action/www.asp 
```

或者

```
http://www.mydomain.com/controller/action/asp.net 
```

这两个显然都是无效的。

例如，如果 Url 没有`http://`预先添加，那么这一段 Razor 代码将创建一个类似上面两个的链接

```
....
<a href="@item.Link" target="blank">@item.LinkName</a>
... 
```

但是如果输入`http://`的Url前面加上了显示视图中生成的Url实际上是一个真实的Url比如

```
http://www.asp.net
http://asp.net
http://www.asp - this is actually an invalid address as well but it renders out correctly. 
```

当然，显示一个保存到数据库中然后在视图上显示的 Url 并不像这样困难，并且还允许用户保存格式良好的 Url，但也可以缩写它，例如：

```
asp.net
www.asp.net 
```

无需包含前置协议。

**更新**

[这是使用来自http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)的注释在我的 ViewModel 中定义我的 Url 字段

```
[Required]
[StringLength(128)]
[Url(false)] // false denotes whether the protocol is required or not
public string URL { get; set; } 
```

所以你不会认为我疯了，这是一个使用大写且没有大写的屏幕截图。到目前为止在 IE8 和 Chrome 中测试，我得到了相同的结果

![截屏](../Images/a7d8db3c3154fc0301be69d0e5e0fac4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:02:36.200

[解决了，我使用的来自http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)的 2 个 DLL DataAnnotationsExtensions.dll 和 DataAnnotationsExtensions.ClientValidation.dll是 1.0 版，并且不允许在`[Url]`注释中使用大写。我都更新到了 1.1 版，因为这是网站上演示的版本，问题现在已经解决。

使用`[Url]`现在将允许我强制执行`http://`，如果我绝对必须以及允许大写字符。

使用`[Url(false)]`将允许用户不必输入`http://`，我可以在代码中添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:54:27.380

`[Url]`来自 [http://dataannotationsextensions.org/](http://dataannotationsextensions.org/)对我来说非常适合使用大写字母。但是如果由于某种原因你不想使用它，你可以抄袭它使用的正则表达式：

```
public class MyViewModel
{
    [RegularExpression(@"^(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$")]
    public string Url { get; set; }
} 
```

# html - 从超链接打开 Chrome://plugins/

> ID：11887072
> 
> 赞同：0
> 
> 时间：2012-08-09T15:45:45.023
> 
> 标签：html, google-chrome, local

自从最近的 Chrome 21 更新以来，我公司用于其业务的大量闪存工具现在对 Chrome 用户不可用（感谢实施得非常好的 Pepper 插件）。为了让 Chrome 用户仍然可以使用我们的工具，我们想告知他们如何禁用 Pepper Flash 并恢复到存储在他们机器上的旧 Flash 插件。

我的问题是如何在我们的网站上创建一个在新窗口中打开插件页面的超链接？通常你会输入“Chrome://plugins/”但是，当在超链接中使用它时，什么都不会显示（我知道这可能是出于安全目的，但我们确实需要让用户尽可能简单做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:47:46.560

正如您在问题中所述，出于安全原因，您无法从超链接打开 chrome://*。

做你想做的另一种方法是制作一个脚本来修改文件 %appdata%\Local\Google\Chrome\User Data\Default\Preferences

这是一个简单的 JSON 文件，易于修改。这些是您可能对此文件感兴趣的行：

```
{
 "enabled": true,
 "name": "Shockwave Flash",
 "path": "C:\\Users\\X\\AppData\\Local\\Google\\Chrome\\Application\\21.0.1180.60\\gcswf32.dll",
 "version": "11,2,202,235"
}, {
 "enabled": false,
 "name": "Shockwave Flash",
 "path": "C:\\Users\\X\\AppData\\Local\\Google\\Chrome\\User Data\\PepperFlash\\11.2.31.144\\pepflashplayer.dll",
 "version": "11.2.31.144" 
```

# css - 使用 SASS 在外部位置进行开发（例如：FTP、远程 PC）

> ID：11887075
> 
> 赞同：2
> 
> 时间：2012-08-09T15:46:05.320
> 
> 标签：css, ftp, editor, stylesheet, sass

我们正在考虑结合 SASS 和 Compass 进行开发（目前），这一切看起来都很有希望。但是，我们这里有一些人对命令行界面不太热衷。当然，我建议使用 Scout 或 Compass.App，但不幸的是，这并不能满足我们的下一个先决条件。

是的，你猜对了。我们需要一个流程友好的远程工具。目前我们使用DreamWeaver、phpStorm、Aptana和Zend Studio等FTP程序来修改和开发.css文件，但是看到我们需要一个.scss SASS文件的解析器，我们无法在线开发。是的，我们可以使用 PhamlP 或 PHPSASS，但这些工具缺乏更新，正如我在 Stack Exchange 上的其他问题中所述，在 SASS 人员修复他们的错误后，您必须等待这些开发人员的错误修复。Alpha、Beta 和候选发布版本也是如此。

那么，基本上，什么是一个好的解决方案？

1.  外部开发 (FTP)
2.  内部开发（本地服务器，因此远程 PC）
3.  没有保存拖放检查，基本上只是保存检查（由程序完成上传）

最后，为什么我们不在本地机器上工作是因为在这种情况下我们没有任何版本控制。我们的服务器具有颠覆控制和每小时备份。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T11:46:38.780

现代方法就是这样。

### 颠覆已成为过去

首先，忘记 Subversion 并使用 Git 进行版本控制。使用 Git，每个开发人员在他的机器上都有自己的存储库。在开发了一个功能后，他将其从本地仓库推送到主仓库。

### 有礼貌地部署

其次，使用部署工具。有许多好的部署方法，FTP 不是其中之一。除非您做最低级网站并将它们托管在共享主机上，否则您应该在服务器上安装 SSH 并使用自定义脚本或工具（[Capistrano](http://www.capistranorb.com/)是最知名的工具之一，还有许多其他不错的工具）来部署来自 Git。

### 源代码控制源，而不是编译的东西

第三，不要将 CSS 和生成的精灵存储在源代码存储库中。将它们放入`.gitignore`. 该项目应在部署期间在服务器上编译。[Bundler](http://bundler.io/)将帮助您自动获取 Sass 依赖项。

**PS**人们不熟悉命令行是一个非常糟糕的借口。这就像一个厨师，呜咽着你不知道如何使用烤箱。与其雇用负责烤箱的人，不如让您的厨师学习如何使用它们。让他们参加在线课程来学习命令行（[这个](http://cli.learncodethehardway.org/book/)或谷歌另一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T10:13:16.817

您可以将 FTP 服务器映射到本地驱动器号。您可以使用具有该设置的任何工具。

例如，这个工具[http://www.webdrive.com/products/webdrive/index.html](http://www.webdrive.com/products/webdrive/index.html)可以将任何 ftp 转换为本地“虚拟驱动器”

# c# - DirectorySearcher 和 PrincipalSearcher 的 Active Directory 不同结果

> ID：11887076
> 
> 赞同：2
> 
> 时间：2012-08-09T15:46:06.070
> 
> 标签：c#, search, active-directory

在 C# 中查询 Active Directory 时出现奇怪的问题。

```
var ctx = new PrincipalContext(ContextType.Domain, "adr", "usr", "pwd");
var entry = new DirectoryEntry("LDAP://" + adr, usr, pwd);

var searcher = new DirectorySearcher(entry) { Filter = "(&(sAMAccountName=user_to_search))", PageSize = 2000 };

foreach (SearchResult searchUser in searcher.FindAll())
{
    // groups
    var groups = searchUser.GetPropertyValues("memberof");
}

var groups = UserPrincipal.FindByIdentity(ctx, "usr_to_search").GetGroups(ctx).ToList(); 
```

但结果不一样：

*   `PrincipalSearcher`返回14组
*   `DirectorySearcher`返回12组

好吧，这是错误还是我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:12:20.780

哦，天哪，我的扩展方法有误（**i < prop.count - 1**）。

```
 public static List<string> GetPropertyValues(this SearchResult searchResult,string property)
        {
            var prop = searchResult.Properties[property];
            var results = new List<string>();

            if (prop != null && prop.Count > 0)
            {
                for (int i = 0; i < prop.Count - 1; i++)
                {
                    results.Add(prop[i].ToString());
                }
            }
            return results;
        } 
```

对不起愚蠢的问题。

# portlet - 我应该在 WAR 中包含多少个 Portlet？

> ID：11887085
> 
> 赞同：0
> 
> 时间：2012-08-09T15:46:49.750
> 
> 标签：portlet, portal

我目前参与的项目需要开发大约 60 个 portlet。我知道一个 portlet WAR 可以包含任何数量，所以我不确定我应该在一个 WAR 中包含多少个 Portlet。

极端情况是只有一个 WAR 的 Portlet。使用这种方法，我将获得 Portlet 独立性，但部署工件的数量将很难管理。另一方面，如果 60 个 Portlet 只有一个或两个 WARS，则部署工件将只有两个，但即使对一个 Portlet 进行的微小更改也意味着要重新部署其中的许多。

是否有任何最佳实践或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:52:04.123

为了提高效率，您希望为每个 WAR 捆绑多个 Portlet。真正重要的是 EAR 的数量，但我假设您正在为每个 WAR 构建一个单独的 EAR。所以原来的说法仍然成立。

正如您所指出的，将所有 60 个 WAR 捆绑到一个 WAR 中是极端的，并且会导致您的部署和重新测试要求出现其他问题。我建议将您的 Portlet 打包成逻辑上相似的功能组。例如，一起协作以提供单一功能的 Portlet 应该打包在一起，因为它们往往会被更改并且无论如何都需要重新部署在一起。当然，每个 WAR 10 个 Portlet 是可管理的，将您的应用程序拆分为 6 个 EAR 也是一个可管理的数字。请记住，每个 EAR 都有一定的开销，因此只要考虑您的开发生命周期，一旦您的 EAR 太多，您的开发服务器上的重新启动时间就会开始变得荒谬。大 EAR 的启动时间不会比小 EAR 长。这也适用于部署时间。

这一切都是为了在构建/部署灵活性（许多 EAR）和运行时内存使用、部署和重启时间（更少的 EAR）之间找到一个快乐的媒介。

# jquery - 如何使用自动填充字段根据用户选择填写整个表单？

> ID：11887092
> 
> 赞同：3
> 
> 时间：2012-08-09T15:47:14.603
> 
> 标签：jquery, ajax, autocomplete, twitter-bootstrap, ruby-on-rails-3.2

我有一个表格，用户可以填写该表格映射到 Rails 中的对象。

表单中的一个字段会自动完成已创建的对象实例。

我正在尝试这样做，以便如果在该字段上选择了自动完成选项，它将根据该实例的数据填写整个表单。

我假设完成此操作的最佳方法是在选择自动完成后通过 ajax 调用获取所有数据并重新呈现表单？这似乎会在字段自动填写和表单自动填写之间产生不希望的延迟。

那么是否可以在自动完成数据中包含所有必要的数据并立即自动填写表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:55:16.293

如果您想即时访问您的数据，则需要预加载它。有很多方法可以做到这一点。但考虑到您正在使用 AJAX 自动完成（我的假设），您似乎已经决定忍受 AJAX 请求往返服务器的那一点延迟。鉴于此，一旦用户选择了自动完成字段值，此时只需通过 AJAX 加载相应的数据。如果延迟对您的口味来说太长，请考虑使用“微调器”图形。这是当今网络上如此普遍的范例，如果它需要 <.5 秒，没有人会三思而后行。

至于正在填写的表单 - 在某些时候，您需要遍历对象或表单字段并使用对象中的相应值填充它们。在此处使用命名约定可以帮助您，例如考虑让表单的输入具有与对象中的实例变量名称相对应的类名称，例如：

```
var instance = {
   name:'chapmand',
   beard:'brown',
   reputation:26
} 
```

然后，您的表单可能包含以下字段：

```
<form id="my-form" ...>
    <input class="name" type="text"></input>
    <input class="beard" type="text"></input>
    <input class="reputation" type="text"></input>
    ...
</form> 
```

最后，一旦您将对象的实例与用户输入的内容相匹配，请执行以下操作：

```
$('#my-form input.data').each(function(){
    $(this).val(instance[$(this).attr('class')]);
}); 
```

当然是人为的例子和很多方法，但这可能会帮助你开始。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:52:14.040

我对 ruby​​ 了解不多，但我假设您可以在表单加载时使用 ajax 提取数据，然后如果他们决定选择自动完成选项，那么它会使用已经提取的数据来填写表单。

只需将 ajax 数据存储在一些变量中以供以后使用。

（如果您需要实际的编码示例，请给我评论并告诉我）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:19:43.043

为此，您可以使用 gon 和 rabl gem。

[https://github.com/gazay/gon](https://github.com/gazay/gon)

[https://github.com/nesquena/rabl/](https://github.com/nesquena/rabl/)

使用 gon 和 rabl，您将存储完整的数据以供 Javascript 使用。在文本字段上附加一个 jquery click 事件，它将从 gon 值中获取数据，并将在那里和那里显示数据，而无需发出任何 AJAX 请求。

# c# - 在 linq 的集合中读取集合

> ID：11887103
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:47:44.723
> 
> 标签：c#, linq, foreach

我需要读取集合中的集合并返回我的 linq 或 feach 的 json 结果？

```
from col1 in collection1 select new{}{col1.field1, col1.field2, } 
```

读取 collection2`col1`并对每行存在的数字字段求和，然后返回`json`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:26:56.910

如果我已正确阅读并解读了您的问题，我认为您正在寻找：

```
var collectionOfSums = from col1 in collection1
                       select new {
                         SumOfField1 = field1.Sum(),
                         SumOfField2 = field2.Sum(),
                         ...
                         SumOfFieldN = fieldN.Sum()
                       }; 
```

我假设`field1`, `field2`, ...`fieldN`是已知集合。然后使用您喜欢的任何技术来`JSON`-ify `collectionOfSums`。

# c++ - 对双倍递增的 OutputIterator 的取消引用分配

> ID：11887104
> 
> 赞同：5
> 
> 时间：2012-08-09T15:47:44.980
> 
> 标签：c++, iterator, increment, language-lawyer, post-increment

根据（优秀）问题[C++ OutputIterator post-increment requirements](https://stackoverflow.com/questions/11876128/c-outputiterator-post-increment-requirements)，我们观察到对于 type 的可取消引用和可递增值`r`以及适当类型的`OutputIterator`值`X`，表达式`o`

```
*r++ = o; 
```

是有效的并且具有等效的语义

```
X a(r);
++r;
*a = o; 
```

但是，如果在中间期间多次增加，是否仍然`a`是可取消引用分配的情况？`r`也就是说，这段代码有效吗？

```
X a(r);
++r;
++r;
*a = o; 
```

很难看出对一个值的操作如何影响对另一个值的操作的有效性，但例如`InputIterator`(24.2.3) 在后置条件下具有`++r`：

> 之前的值的任何副本`r`不再需要是可解引用的或在 的域中`==`。

相关部分：**24.2.2 迭代器**、**24.2.4 输出迭代器**、**17.6.3.1 模板参数要求**。

此外，如果这*不需要*有效，是否存在利用其无效性有助于实现`OutputIterator`类型（效率、简单性）同时仍遵守现有要求的任何情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:06:47.827

这个问题在 2004 年作为[缺陷 485提出，](http://open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#485) [n3066](http://open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3066.html)中的措辞澄清了这个问题，要求输出迭代器只需要支持一系列交替递增和取消引用/分配。因此，在您的示例中，`r`在 first 之后不需要是可递增的`++r`，除非有中间的取消引用/赋值。[SGI 的STL](http://sgi.com/tech/stl/OutputIterator.html)也需要这种行为（见脚注 3）。正如你上面提到的，n3225 出现时没有 n3066 的修复，所以[缺陷 2035](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#2035)被提出；但遗憾的是，该修复程序没有进入 C++11 的已发布版本（ISO/IEC 14882:2011）。

此外，缺陷 2035 表示`a`(from `X a(r++);`) 不能像 一样使用`*a = 0`：

> “在此操作之后 [即`++r`]`r`不需要是可递增的，并且之前的值的任何副本`r`都不再需要是可取消引用或可递增的。”

在某些情况下，这可能有助于实现（就*简单性*而言）：参见例如[this question](https://stackoverflow.com/a/4004035/985943) on `ostream_iterator`，其中此类（无效）双增量被忽略，简单地返回`*this`；只有取消引用/赋值会导致`ostream_iterator`实际增加。

# java - 将 java.awt.geom.Area 与 Rectangle2D 一起使用时的区域结果不正确

> ID：11887107
> 
> 赞同：1
> 
> 时间：2012-08-09T15:47:47.993
> 
> 标签：java, area

我最近使用 Java Area 类来包装一个 Rectangle2D.Double 类型。这样我就可以进行相交、相加等操作。但是，在计算形状面积时，我得到了一个非常奇怪的结果。下面是我用来计算形状面积的代码：

```
private static double polyArea(ArrayList<Point2D.Double> pointList) {
    double area = 0;
    for (int loopi = 1; loopi < pointList.size(); loopi++) {
        Point2D.Double p1 = pointList.get(loopi - 1);
        Point2D.Double p2 = pointList.get(loopi);
        area += (p1.x * p2.y - p2.x * p1.y) / 2.0;
    }
    return area;
}

public  static double coverageArea(Shape s) {
    ArrayList<Point2D.Double> pointList = new ArrayList<Point2D.Double>();
    double[] coords = new double[6];
    int type;
    double totalArea = 0;
    PathIterator it = s.getPathIterator(null);
    while (!it.isDone()) {
        type = it.currentSegment(coords);
        if (type == it.SEG_MOVETO) {
            pointList.clear();
            pointList.add(new Point2D.Double(coords[0], coords[1]));
        } else if (type == it.SEG_LINETO) {
            pointList.add(new Point2D.Double(coords[0], coords[1]));
        } else if (type == it.SEG_CLOSE) {
            totalArea += polyArea(pointList);
            pointList.clear();
        } else {
            System.out.println("calculateShapeArea: Cannot calculate area for shapes with segment type other than SEG_MOVETO, SEG_LINETO, or SEG_CLOSE.  Ignoring segment type=" + type);
        }
        it.next();
    }
    if (totalArea < 0) {
        totalArea = -totalArea;
    }
    return totalArea;
} 
```

如果我有一个`Rectangle2D`r(1.0, 1.0, 6.0, 6.0)，使用上面的代码我会正确地得到面积 36。但是如果我这样做`a = new Area(r)`，那么结果`coverageArea(a)`是 39。有时它可能比正确的大几十倍回答。

任何人都知道为什么会这样？面积计算有问题吗？任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:43:51.910

根据this [Wiki](http://www.wikihow.com/Calculate-the-Area-of-a-Polygon)，您的代码未正确实现该方法。您的 polyArea() 方法忘记*关闭*多边形（它不考虑从*最后*一个顶点到第*一个*顶点的线）。

此外，您的公式版本似乎已经交换了 p1 和 p2，虽然我不确定这是否有问题，但我个人不明白这种方法是*如何*真正起作用的。

# c# - 在常用的实用程序函数中将 void 返回类型更改为其他类型有什么害处吗？

> ID：11887113
> 
> 赞同：5
> 
> 时间：2012-08-09T15:48:20.583
> 
> 标签：c#

如果我有类似的功能

```
public void usefulUtility(parameters...) { 
    string c = "select * from myDB";
    do_a_database_call(c);
} 
```

在很多地方都使用过，将其更改为：

```
public bool usefulUtility(parameters...) { 
   string c = "select * from myDB";
   bool result = do_a_database_call(c);
   return result;
} 
```

这可能会破坏任何代码吗？

我什么都想不出来……但有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:56:25.660

是的，几乎任何你可能做的影响你的公共界面的事情都是一个突破性的变化。它可能足够小以至于您不在乎，并且实际上没有人或几乎没有人会碰巧遇到极端情况，但 Eric Lippert[解释说](http://blogs.msdn.com/b/ericlippert/archive/2012/01/09/every-public-change-is-a-breaking-change.aspx)，有些极端情况（其中许多涉及类型推断）甚至可能导致这些看似无害的变化要打破。

对于您的特定示例，此代码将被该更改破坏。

```
Action a = usefulUtility; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:59:22.837

像这样的改变肯定会破坏一些东西，无论是在二进制兼容性方面还是在源兼容性方面。

You might want to have a look at [this StackOverflow answer](https://stackoverflow.com/a/1472967/184630) and its associated thread, where API-breaking changes are discussed in depth.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:57:11.243

它当然*有可能*破坏其他一些代码。正如 Lippert 指出的那样，几乎[每一次公开的改变都是](http://blogs.msdn.com/b/ericlippert/archive/2012/01/09/every-public-change-is-a-breaking-change.aspx)在一些奇怪的情况下发生的重大改变。

更重要的问题是，它是否*可能*导致任何东西损坏，答案是否定的。做出这种改变应该是相当安全的，因为人们不太可能做他们必须做的奇怪的事情来导致问题。这并不意味着不可能破坏其他代码，但这超出了合理责任范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:52:11.597

您必须实际返回一个 String 或至少为 null 才能编译该方法。您不能再在没有返回的情况下结束该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T15:57:28.793

如果您想绝对确定不会破坏任何内容，请为返回 String 的方法指定一个不同的名称，并保持 void 方法签名相同。

# apache - .htaccess 重写 PDF 从根目录到子目录

> ID：11887114
> 
> 赞同：0
> 
> 时间：2012-08-09T15:48:21.927
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite

我正在尝试将所有 .PDF 和 .pdf 文件从网站根目录自动重定向到名为 docs 的子目录。

请注意，网站根目录上没有任何实际的 PDF，这就是我尝试使用 !-f 位的原因。

到目前为止，这是我想出的，但它不起作用。我将不胜感激任何帮助。

```
# redirect PDF files requested on the root '/' to /docs/<filename>.(pdf|PDF)
Options +SymLinksIfOwnerMatch
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/(.(pdf|PDF))$ /docs/$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:56:59.380

尝试将您的规则更改为：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}/docs%{REQUEST_URI} -f
RewriteRule ^/?(.*\.pdf)$ /docs/$1 [L,NC] 
```

可能不需要第二个条件，以防发出以“.pdf”结尾的请求但 pdf 实际上并不存在，因此第一个条件为真并且存在重写循环（导致 500 服务器错误）。

# resources - 如何将超过 2GB 的资源加载到 Unity3D 资源文件中

> ID：11887119
> 
> 赞同：1
> 
> 时间：2012-08-09T15:48:36.510
> 
> 标签：resources, limit, unity3d

我正在尝试将超过 2GB 的资产加载到我的资源文件中。（是的，我在场景中有很多资产！）

但是，有一个 2GB 的限制，当我超过这个限制时，我的整个场景都会在播放模式下消失。（在编辑器模式下很好。）

如何克服？可以以某种方式使用多个资源文件吗？

我正在运行 32 位。

谢谢！亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:41:04.457

回想一下 32 位 Windows，2gb 是最大支持的内存。我认为 64 位版本不会有这个问题。只是根据经验推测。如果我没有看到您特别声明您正在运行 32 位，我什至不会回答。

# python - Python-numpy：指定复合数据类型的项目大小不起作用

> ID：11887122
> 
> 赞同：3
> 
> 时间：2012-08-09T15:48:39.663
> 
> 标签：python, numpy

我在这里做错了吗？

```
>>> import numpy as np
>>> dt = np.dtype({"names": ["First"], 
                   "formats": [np.uint32], 
                   "offsets": [3], 
                   "itemsize": 8})
>>> dt.itemsize
7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:15:33.400

对我来说它看起来像一个错误。但是，如果您最后只需要 n 字节的填充，那么复合类型可能会有所帮助：

```
import numpy as np
dt = np.dtype({"names": ["First", "_"], 
               "formats": [np.uint32, (np.void,1)], 
               "offsets": [3,7],
})
arr = np.empty( (5,), dtype=dt ) 
```

# c# - 更改任何 svg 文件上所有元素的颜色

> ID：11887125
> 
> 赞同：2
> 
> 时间：2012-08-09T15:48:57.380
> 
> 标签：c#, xml, svg

我可以轻松地在元素 ( ) 上添加填充`<path fill="#FF0000">`，但我的问题是，它并不总是路径元素，它也可以是`<rect>`，`<ellipse>`等等。

但是如果我想改变 svg 文件中所有元素的颜色呢？不管它是什么类型？

我的解决方案：

*   找到所有支持 fill 属性的元素，然后遍历它们。

*   只是在所有东西上加上一个填充标签，不管是什么标签，但不是所有标签都支持它，这不会引起问题吗？

我不喜欢这些解决方案中的任何一个......第一个不是动态的，另一个不是动态的很脏¨

我可以在这里做一些更聪明的事情吗？我可以定义全局颜色吗？还是[svg.codeplex](http://svg.codeplex.com/)有一些我可以使用的功能（我找不到）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:19:04.230

你试过 XPath 吗？（使用 System.Xml.XPath）

```
string newColor = "#123456";
XElement root = XElement.Load(file);
var colors = root.XPathSelectElements("//*[@fill]");
foreach(XElement node in colors)
    node.Attribute("fill").Value = newColor; 
```

PS这是对您的第一个子弹的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:00:09.560

使用 css 设置颜色。如果您从元素本身中删除填充样式，那么您可以添加

```
<style type="text/css">
  <![CDATA[
    * {
      fill: #FF0000;
    }
  ]]>
</style> 
```

或者在外部样式表中，接受填充颜色的所有内容都是红色的。[您可以使用document.styleSheets[1]](http://www.javascriptkit.com/domref/stylesheet.shtml)操作样式

# c# - 重新托管的 WF4 设计器中的参数默认值无法解析

> ID：11887126
> 
> 赞同：2
> 
> 时间：2012-08-09T15:48:59.937
> 
> 标签：c#, .net, xaml, workflow-foundation-4, workflow-rehosting

重新托管的设计器 (WF4) 的结果在向参数添加默认值时存在问题。其他所有情况似乎都可以正常工作。这是（几乎）空工作流的（删节）xaml。

```
<Activity mc:Ignorable="sap" x:Class="{x:Null}" this:_b40c.NewArg="test" xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" 
xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities" xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation" 
xmlns:scg="clr-namespace:System.Collections.Generic;assembly=mscorlib" xmlns:this="clr-namespace:" xmlns:twc="clr-namespace:Telogis.Workflow.CustomerApi;assembly=Telogis.Workflow.Activities" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="AuthenticationHeader" Type="InArgument(twc:AuthenticationHeader)" />
    <x:Property Name="BaseTdeUri" Type="InArgument(x:Uri)" />
    <x:Property Name="NewArg" Type="InArgument(x:String)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>654,676</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces serialized as XML namespaces</mva:VisualBasic.Settings>
  <Flowchart />
</Activity> 
```

特别是当添加默认值时，对定义进行了以下添加：`this:_b40c.NewArg="test"`并且`xmlns:this="clr-namespace:"` `xmlns:this="clr-namespace:"`无效，因为它不指向任何地方并且无法解析`ActivityXamlServices.Load(stream);`（它抛出 XamlObjectWriterException: "'Cannot set unknown member '{clr-namespace: }_b40c.NewArg'.' ...) 无论指定的参数类型是什么，这似乎都会发生。

知道是什么原因造成的吗？

**更新**

我首先使用的`ActivityBuilder`是活动。这很好，但由于我没有为它提供名称，它必须生成一个密钥，在上面的示例中`_b40c`。`ActivityXamlServices.Load`处理这些密钥有一些问题。然而，简单地定义一个名称`ActivityBuilder`似乎就可以解决问题。

这仍然不能回答为什么它在`xmlns:this="clr-namespace:"`没有实际命名空间的情况下创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:38:09.447

您的工作流 xaml 无效。我不确定你从哪里得到它或它是如何进入这种状态的。

我可以这么说，因为

```
<Activity 
    x:Class="{x:Null}" 
    this:_b40c.NewArg="test"
    xmlns:this="clr-namespace:" 
```

clr 样式的命名空间声明无效。它应该读

`clr-namespace:Some.Namespace.In.The.Current.Assembly`

或者

`clr-namespace:Some.Namespace;assembly=SomeAssemblyWithSomeNamespace`

由于您的声明格式错误，因此 XamlObjectWriter 无法解析**此**`_b40c`xml 命名空间以确定您的类型存在于哪个命名空间/程序集。此外，这看起来也很可疑。而且我以前从未见过`x:Class`设置为空。这也让我觉得格式不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T15:39:39.423

如果我理解得很好 - 这是*WF Designer*错误。当我不得不`InArgument<T>`在我的自定义 WF 设计器中支持默认值定义时，我遇到了这个问题。我仍然对缺乏对这个基本程序的支持感到惊讶。

失败的原因有2个：

1.  `{x:Null}`in`x:Class`属性的定义
2.  `xmlns:this`属性定义无效
3.  主要问题是 Argument 的默认值定义无效：this:_effe.MyArgument="asd"。参数默认值的定义应等于：MyXamlClassName.MyArgument="asd"。例如，如果您的 x:Cass 定义为 x:Class="MyNamespace.MyClass"，则参数定义应为：MyClass.MyArgument="asd"。

我通过干预 XAML 保存过程来解决它：调用后 `_workflowDesigner.Save(_editedFile);`

我添加了这两行：

```
 #region x:Class and Argument<T> default value issues solution

            await CreateAttributeValue(_editedFile, ConstXClassAttributeName, typeof(App).Namespace + "." + Path.GetFileNameWithoutExtension(_editedFile));
            //should finish first operation before second operation begins to avoid I/O exception
            await CreateAttributeValue(_editedFile, ConstNamespaceAttributeName, ConstXamlClrNamespace + typeof(App).Namespace);
            await RepairArgsAttributes(_editedFile);
                #endregion

This is the methods definition:

  /// <summary>
    /// Reason of using of this method: bug in workflow designer. When you save your xaml file, WF Designer assign "{x:Null}" to x:Class attribute
    /// Bug: In addition, if you want to set default value for your InArgument<T>, it defines attribute "this" (namespace declaration) with empty value. When you try to open your file, designer fails to parse XAML.
    /// </summary>
    /// <param name="editedFile"></param>
    /// <param name="attribteName"></param>
    /// <param name="attributeValueToReplace"></param>
    private static async Task CreateAttributeValue(string editedFile, string attribteName, string attributeValueToReplace)
    {
        XmlDocument xmlDoc = new XmlDocument();
        await Task.Run(() => xmlDoc.Load(editedFile));

        await Task.Run(() =>
        {
            var attributteToReplace = xmlDoc.FirstChild.Attributes?[attribteName];

            if (null != attributteToReplace)
            {
                xmlDoc.FirstChild.Attributes[attribteName].Value = attributeValueToReplace;
                xmlDoc.Save(editedFile);
            }
        });
    }

 /// <summary>
        /// Bug in Workflow designer: workflow designer saves declaration for In/Out Arguments in invalid format. Means, that it is unable to open the same file it saved itself. This method fixes the Arguments declaration in XAML xmlns
        /// </summary>
        /// <param name="editedFile"></param>
        /// <returns></returns>
        private async Task RepairArgsAttributes(string editedFile)
        {
            XmlDocument xmlDoc = new XmlDocument();
            await Task.Run(() => xmlDoc.Load(editedFile));

            await Task.Run(() =>
            {
                for (int i = 0; i < xmlDoc.FirstChild.Attributes.Count; i++)
                {
                    if (xmlDoc.FirstChild.Attributes[i].Name.StartsWith(ConstInvalidArgStarts))
                    {
                        string innvalidAttrName = xmlDoc.FirstChild.Attributes[i].Name;//extraction of full argument declaration in xmlns
                        string[] oldStrings = innvalidAttrName.Split('.');//extraction of arguemnt name string
                        string localName = Path.GetFileNameWithoutExtension(editedFile) + "." + oldStrings[1];//build valid argment declaration without perfix
                        string valueBackup = xmlDoc.FirstChild.Attributes[i].Value;//saving of default value of Arguemnt<T>
                        xmlDoc.FirstChild.Attributes.RemoveNamedItem(xmlDoc.FirstChild.Attributes[i].Name);//removal of invalid Arguemnt declaration with default value. WARNING: when you remove attribue, at this moment you have another item at the place xmlDoc.FirstChild.Attributes[i]
                        //definition of new valid attribute requries: set separelly attribute prefix, localName (not "name" - it causes invalid attribute definition) and valid namespace url (in our case it's namespace deifinition in "this")
                        XmlAttribute attr = xmlDoc.CreateAttribute(ConstArgPrefix, localName, xmlDoc.FirstChild.Attributes[ConstNamespaceAttributeName].Value);
                        attr.Value = valueBackup;
                        xmlDoc.FirstChild.Attributes.InsertBefore(attr, xmlDoc.FirstChild.Attributes[i]);//define new correct Argument declaration attribute at the same place where was invalid attribute. When you put valid attribute at the same place your recover valid order of attributes that was changed while removal of invalid attribute declaration
                    }
                }
                xmlDoc.Save(editedFile);

            });
        } 
```

常量定义为：

```
 #region Constants
    private const string ConstXClassAttributeName = "x:Class";
    private const string ConstXamlClrNamespace = "clr-namespace:";
    private const string ConstNamespaceAttributeName = "xmlns:this";
    private const string ConstInvalidArgStarts = @"this:_";
    private const string ConstArgPrefix = @"this";

    #endregion 
```

该解决方案也应该可以解决您的问题。

# perl - 如何向 mojolicious 路线添加多个 over 方法？

> ID：11887127
> 
> 赞同：6
> 
> 时间：2012-08-09T15:48:59.407
> 
> 标签：perl, mojolicious

我有以下代码：

```
$r->find('user')->via('post')->over(authenticated => 1); 
```

鉴于该路由，我可以通过使用 Mojolicious::Plugin::Authentication 设置的经过身份验证的检查到达用户路由。

我想在该路线上添加另一个“结束”。

```
$r->find('user')->via('post')->over(authenticated => 1)->over(access => 1); 
```

不过，这似乎覆盖了经过身份验证的“过度”。

我尝试使用以下名称分解路线：

```
 my $auth = $r->route('/')->over(authenticated => 1)
     ->name('Authenticated Route');

 $access = $auth->route('/user')->over(access => 1)->name('USER_ACCESS'); 
```

但这根本不起作用。两个'over'都没有被访问。

我的路由是 /user、/item 之类的东西，使用 MojoX::JSON::RPC::Service 设置。所以，我没有 /user/:id 之类的东西来设置子路由。（不确定是否重要）所有路由都像 /user，用参数发送。

我有这样的条件：

```
$r->add_condition(
    access => sub {
        # do some stuff
    },
); 
```

那就是 $r->route('/user')->over(access => 1); 中的“访问”

简而言之，路线在使用时可以正常工作：

```
$r->find('user')->via('post')->over(authenticated => 1); 
```

但我无法添加第二条路线。

那么，在设置这些具有多个条件的路线时，我缺少什么？是否可以将多个条件添加到单个路由/route_name？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:17:43.473

您可以`over`在此测试中使用这两个条件：

```
use Mojolicious::Lite;

# dummy conditions storing their name and argument in the stash
for my $name (qw(foo bar)) {
    app->routes->add_condition($name => sub {
        my ($route, $controller, $to, @args) = @_;
        $controller->stash($name => $args[0]);
    });
}

# simple foo and bar dump action
sub dump {
    my $self = shift;
    $self->render_text(join ' ' => map {$self->stash($_)} qw(foo bar));
}

# traditional route with multiple 'over'
app->routes->get('/frst')->over(foo => 'yo', bar => 'works')->to(cb => \&dump);

# lite route with multiple 'over'
get '/scnd' => (foo => 'hey', bar => 'cool') => \&dump;

# test the lite app above
use Test::More tests => 4;
use Test::Mojo;

my $t = Test::Mojo->new;

# test first route
$t->get_ok('/frst')->content_is('yo works');
$t->get_ok('/scnd')->content_is('hey cool');

__END__
1..4
ok 1 - get /frst
ok 2 - exact match for content
ok 3 - get /scnd
ok 4 - exact match for content 
```

在 perl 5.12.1 上与 Mojolicious 3.38 一起工作正常 - @DavidO 是对的，也许桥梁可以更好地完成这项工作。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-04T19:03:08.487

就我而言，我使用两种`under`方法：

```
$r =  $app->routes;
$guest =  $r->under->to( 'auth#check_level' );
$user  =  $r->under->to( 'auth#check_level', { required_level => 100 } );
$admin =  $r->under->to( 'auth#check_level', { required_level => 200 } );

$guest->get( '/' )->to( 'main#index' );
$user->get( '/user' )->to( 'user#show' );
$super_admin =  $admin->under->to( 'manage#check_level', { super_admin => 100 } );
$super_admin->get( '/delete_everything' )->to( 'system#shutdown' ); 
```

在此示例中，当任何路由匹配时，`under`将调用一些

```
'/' -> auth#check_level -> main_index
'/user' -> auth#check_level { required_level => 100 } -> 'user#show'
'/delete_everything' -> auth#check_level { required_level => 200 } -> 'manage#check_level', { super_admin => 100 } -> 'system#shutdown' 
```

正如您在 target 之前看到`action`的那样，您`controller`将运行另一个名为：`auth#check_level`和`manage#check_level`

在授权用户时，您只需`stash->{ required_level }`与您设置的每个额外操作进行比较`session->{ required_level }`

```
package YourApp::Controller::Manage;

sub check_level {
    my $self =  shift;

    my $user_have =  $self->session->{ required_level };
    my $we_require =  $self->stash->{ required_level };
    # 'system#shutdown' will be called if user has required level
    return 1   if  $user_have >= $we_require; 

    $self->redirect_to( '/you_have_no_access_rights' );
    return 0; #This route will not match. 'system#shutdown' will not be called
} 
```

**PS**当然我可以使用`cb`或只是`CODEREF`与控制器动作“接近相同”：

```
$r->under({ cb => \&YourApp::Controller::auth::check_level });
$r->under( \&YourApp::Controller::auth::check_level ); # "same" 
```

但我更喜欢`->to( 'controller#action' )`语法。它看起来好多了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T23:01:29.500

如果我们使用这种方法呢？

```
# register condition
$r->add_condition(
    chain => sub {
        my ($route, $controller, $captures, $checkers) = @_; 

        for my $checker (@$checkers) {
            return 0 unless $checker->($route, $controller, $captures);
        }

        return 1;
    },
);

# ...
# example of using
$r->get('/')->over(chain => [\&checker1, \&checker2])->to(cb => \&foo)->name('bar'); 
```

# gradle - 解决与文件系统库（即不是 maven、ivy）的 Gradle 传递依赖冲突

> ID：11887131
> 
> 赞同：3
> 
> 时间：2012-08-09T15:49:06.527
> 
> 标签：gradle

我们有一个 java 项目，其依赖项看起来像这样。

```
A -> B -> httpcore-4.0.1
\         
 C -> httpcore-4.1.3 
```

所以在A中存在传递依赖冲突。gradle docs说解决策略是选择最新的（http://gradle.org/docs/current/userguide/dependency_management.html）。但是，由于函数签名差异，我们会遇到编译错误，因此似乎没有选择最新的。我见过各种排除方法，但不确定当我们使用基于文件系统的依赖库（不是 maven 或 ivy）时它们如何应用。Eclipse 似乎可以解决问题并编译但 gradle barfs。我尝试了各种形式：

```
configurations {
    all*.exclude group:'org.apache', name: 'httpcore', version:'4.0.1'
    all*.exclude group:'org.apache.httpcomponents', name: 'httpcore', version:'4.0.1'
} 
```

我在这里想念什么？

我正在使用 Gradle 1.0-milestone-8a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:57:22.343

它只是没有完成。请参阅[http://forums.gradle.org/gradle/topics/resolve_gradle_transitive_dependency_conflict_with_file_system_libs_ie_not_maven_ivy](http://forums.gradle.org/gradle/topics/resolve_gradle_transitive_dependency_conflict_with_file_system_libs_ie_not_maven_ivy)

您必须使用本地或远程存储库。

# html - 嵌套 ul css 标签

> ID：11887134
> 
> 赞同：-3
> 
> 时间：2012-08-09T15:49:21.163
> 
> 标签：html, css, nested

```
<ul>
  <li>test</li>
  <li>
    <ul>
      <li>another</li>
    </ul>
  </li>
</ul> 
```

我只想设置嵌套 ul 标签的样式……这可能吗？我知道我可以只给 ul 一个 id 或类，但我想知道是否有另一种方式（我认为：first-child、last-child、nth-child，可能在这里玩？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:50:31.763

`ul ul`这意味着任何`ul`是 another 的孩子`ul`，无论它向下多少级。

如果您想针对那个级别，具体来说，您可以使用`ul > li > ul`which 将针对`ul`s 的直接子级的`li`s ，这些子级是 s 的直接子级`ul`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:13:06.670

Tidy.exe 无法识别格式

```
UL
  LI
  /LI
  UL
  /UL
/UL 
```

# magento - MAGENTO：在自定义模块中添加图像字段

> ID：11887139
> 
> 赞同：1
> 
> 时间：2012-08-09T15:49:28.697
> 
> 标签：magento, module, image

我正在创建一个模块，我想在编辑页面（后台）中添加一张图片，我这样做：

```
$fieldset->addField('photo', 'image', array(
'label'     => "image",
'required'  => false,
'name'      => 'image',
)); 
```

输入存在于页面中，但在我的控制器中，我没有关于这张图片的任何信息，有人可以告诉我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:14:16.683

参考图片上传文章

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/admin/how_to_create_pdf_upload_in_backend_for_own_module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/how_to_create_pdf_upload_in_backend_for_own_module)

# c# - 查找给定周数的第一个和最后一个日期

> ID：11887140
> 
> 赞同：0
> 
> 时间：2012-08-09T15:49:28.833
> 
> 标签：c#, wpf

> **可能重复：**
> [根据周数计算日期](https://stackoverflow.com/questions/662379/calculate-date-from-week-number)

我有一个星期数，我正在尝试创建函数来返回本周的第一天和最后一天。

例如，第 29 周的第一天是 2012-07-16，最后一天是 2012-07-22。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:17:56.800

这个怎么样：

```
int year = 2012;
int weekNumber = 29;

var thursdayInWeek01 = Enumerable.Range(1, 7).Select(i => new DateTime(year, 1, i))
  .First(d => d.DayOfWeek == DayOfWeek.Thursday);
var thursdayInCorrectWeek = thursdayInWeek01.AddDays((weekNumber - 1) * 7);

var firstDay = thursdayInCorrectWeek.AddDays(-3);
var lastDay = thursdayInCorrectWeek.AddDays(3); 
```

这是 ISO 风格的周数。

# wpf - 来自 MVVM 应用程序中用户控件的路由事件

> ID：11887141
> 
> 赞同：2
> 
> 时间：2012-08-09T15:49:28.907
> 
> 标签：wpf, c#-4.0, wpf-controls

我坚持将用户控件集成到 mvvm 应用程序中。

用户控件是一个自定义日历，不是使用 MVVM 原则编写的（我不想在 MVVM 中重新编写它）。

我有一个在用户控件中触发的鼠标按下事件（这是三个不同用户控件的组合）。

事件触发代码如下所示：

```
public static readonly RoutedEvent DateEvent = 
    EventManager.RegisterRoutedEvent("dateEvent", RoutingStrategy.Bubble, 
    typeof(RoutedEventHandler), typeof(UserControl2));

public event RoutedEventHandler dateEvent
{
    add{AddHandler(DateEvent, value);}
    remove{ RemoveHandler(DateEvent, value);}
}

private void UserControl_MouseUp(object sender, MouseButtonEventArgs e)
{
    RaiseEvent(new RoutedEventArgs(UserControl2.DateEvent, this));
} 
```

如何在我的主应用程序视图模型中订阅此路由事件？我知道这不是非常 MVVM，但正如我所说，我不能重写我的用户控件。

我知道这个事件会在树上冒泡，直到它被标记为已处理。我知道添加一个公共 void 方法来处理事件 - 我只是不确定如何首先实现对事件的拦截。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:57:37.710

我认为您应该阅读本文的 RelayCommand 部分。

[WPF MVVM 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# c# - 从 C# 中的字符串创建动态类型

> ID：11887142
> 
> 赞同：3
> 
> 时间：2012-08-09T15:49:29.467
> 
> 标签：c#, string, object, dynamic

关于 C#，我的问题非常非常简单：

我们可以使用以下语法创建动态类型：

```
dynamic dObj = new { P1 = "a", P2 = 1, p3 = DateTime.Now }; 
```

对于相同的结果，有没有办法从字符串变量创建该对象？喜欢：

```
string sObj = @"new { P1 = "a", P2 = 1, p3 = DateTime.Now }";
dynamic dObj = [something].fromstring(sObj); 
```

这个想法是从一个由字符串构建的对象中获取一个对象，或者我需要一个序列化器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:01:58.140

这需要一个编译器。ExpandoObject 类几乎可以满足您的需求：

```
 dynamic bag = new ExpandoObject();
    bag.P1 = "a";
    bag.P2 = 1;
    bag.p3 = DateTime.Now; 
```

这也解决了您原始代码的问题，匿名类型的成员仅具有内部可访问性。换句话说，您的 dObj 对象只能在位于同一程序集中的代码中使用。

# iframe - 如何在 Visualforce 中更新 iFrame

> ID：11887144
> 
> 赞同：0
> 
> 时间：2012-08-09T15:49:33.890
> 
> 标签：iframe, visualforce

我有一个类似于以下内容的 iFrame：

```
<apex:iframe src="http://www.salesforce.com" scrolling="true" height="600" width="100%" id="docframe"/> 
```

我想使用父页面（包含 iFrame）上的链接来更新 iFrame 的内容。

我尝试使用类似于此处 iFrame Target 示例中的代码：http: [//www.w3schools.com/html/html_iframe.asp](http://www.w3schools.com/html/html_iframe.asp)但在我的浏览器 (Firefox) 上它会打开一个新选项卡。即使我将前面链接中的示例复制并粘贴到我的 visualForce 页面中，它仍坚持在我的浏览器中打开一个新选项卡。

关于我可能想尝试使其工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:45:10.613

我会这样做

1）首先在apex中定义你的iFrame的SRC并实现reload方法：

```
public with sharing class YourClass {

    // Source var for the iFrame
    public String iframeSource { get; set; }

    // Constructor
    public YourClass() {
        // Default value of the frame source
        iframeSource = 'apex/Page1';
    }

    // The method to reload the iframe with another source page
    public PageReference reloadIframe() {
        iframeSource = 'apex/Page2';
        return null;
    }
} 
```

2) 现在创建一个命令按钮来重新加载 iFrame 和要刷新的面板：

```
<apex:commandButton action="{!reloadIframe}" reRender="theFrame"/>

<apex:outputPanel id="theFrame">
    <apex:iframe src="{!iframeSource}" />
</apex:outputPanel> 
```

# ruby - 检查字符串是否与 ruby 中的正则表达式匹配的最快方法？

> ID：11887145
> 
> 赞同：110
> 
> 时间：2012-08-09T15:49:34.333
> 
> 标签：ruby, regex, performance

检查字符串是否与 Ruby 中的正则表达式匹配的最快方法是什么？

我的问题是我必须通过一个巨大的字符串列表“egrep”来查找哪些与运行时给出的正则表达式匹配。**我只关心字符串是否匹配正则表达式，而不关心匹配的位置，也不关心匹配组的内容是什么。**我希望这个假设可以用来减少我的代码匹配正则表达式所花费的时间。

我加载正则表达式

```
pattern = Regexp.new(ptx).freeze 
```

我发现它`string =~ pattern`比`string.match(pattern)`.

是否有其他技巧或捷径可以让这个测试更快？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2017-03-16T12:30:24.637

从 Ruby 2.4.0 开始，您可以使用`RegExp#match?`：

```
pattern.match?(string) 
```

`Regexp#match?`[在2.4.0 的发行说明](https://www.ruby-lang.org/en/news/2016/12/25/ruby-2-4-0-released/)中明确列为性能增强，因为它避免了由其他方法执行的对象分配，例如`Regexp#match`和`=~`：

> **正则表达式#匹配？**
> 添加`Regexp#match?`，它执行正则表达式匹配而不创建反向引用对象并更改`$~`以减少对象分配。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-08-09T17:03:49.367

这是一个简单的基准：

```
require 'benchmark'

"test123" =~ /1/
=> 4
Benchmark.measure{ 1000000.times { "test123" =~ /1/ } }
=>   0.610000   0.000000   0.610000 (  0.578133)

"test123"[/1/]
=> "1"
Benchmark.measure{ 1000000.times { "test123"[/1/] } }
=>   0.718000   0.000000   0.718000 (  0.750010)

irb(main):019:0> "test123".match(/1/)
=> #<MatchData "1">
Benchmark.measure{ 1000000.times { "test123".match(/1/) } }
=>   1.703000   0.000000   1.703000 (  1.578146) 
```

所以`=~`更快，但这取决于您想要作为返回值的内容。如果您只想检查文本是否包含正则表达式或不使用`=~`

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-08-10T19:41:00.243

这是我在网上找到一些文章后运行的基准。

对于 2.4.0，获胜者是`re.match?(str)`（正如 @wiktor-stribiżew 所建议的那样），在以前的版本中，`re =~ str`似乎是最快的，尽管`str =~ re`几乎一样快。

```
#!/usr/bin/env ruby
require 'benchmark'

str = "aacaabc"
re = Regexp.new('a+b').freeze

N = 4_000_000

Benchmark.bm do |b|
    b.report("str.match re\t") { N.times { str.match re } }
    b.report("str =~ re\t")    { N.times { str =~ re } }
    b.report("str[re]  \t")    { N.times { str[re] } }
    b.report("re =~ str\t")    { N.times { re =~ str } }
    b.report("re.match str\t") { N.times { re.match str } }
    if re.respond_to?(:match?)
        b.report("re.match? str\t") { N.times { re.match? str } }
    end
end 
```

结果 MRI 1.9.3-o551：

```
$ ./bench-re.rb  | sort -t $'\t' -k 2
       user     system      total        real
re =~ str         2.390000   0.000000   2.390000 (  2.397331)
str =~ re         2.450000   0.000000   2.450000 (  2.446893)
str[re]           2.940000   0.010000   2.950000 (  2.941666)
re.match str      3.620000   0.000000   3.620000 (  3.619922)
str.match re      4.180000   0.000000   4.180000 (  4.180083) 
```

结果 MRI 2.1.5：

```
$ ./bench-re.rb  | sort -t $'\t' -k 2
       user     system      total        real
re =~ str         1.150000   0.000000   1.150000 (  1.144880)
str =~ re         1.160000   0.000000   1.160000 (  1.150691)
str[re]           1.330000   0.000000   1.330000 (  1.337064)
re.match str      2.250000   0.000000   2.250000 (  2.255142)
str.match re      2.270000   0.000000   2.270000 (  2.270948) 
```

结果 MRI 2.3.3（似乎正则表达式匹配有回归）：

```
$ ./bench-re.rb  | sort -t $'\t' -k 2
       user     system      total        real
re =~ str         3.540000   0.000000   3.540000 (  3.535881)
str =~ re         3.560000   0.000000   3.560000 (  3.560657)
str[re]           4.300000   0.000000   4.300000 (  4.299403)
re.match str      5.210000   0.010000   5.220000 (  5.213041)
str.match re      6.000000   0.000000   6.000000 (  6.000465) 
```

结果 MRI 2.4.0：

```
$ ./bench-re.rb  | sort -t $'\t' -k 2
       user     system      total        real
re.match? str     0.690000   0.010000   0.700000 (  0.682934)
re =~ str         1.040000   0.000000   1.040000 (  1.035863)
str =~ re         1.040000   0.000000   1.040000 (  1.042963)
str[re]           1.340000   0.000000   1.340000 (  1.339704)
re.match str      2.040000   0.000000   2.040000 (  2.046464)
str.match re      2.180000   0.000000   2.180000 (  2.174691) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-10T21:23:30.067

怎么样`re === str`（案例比较）？

由于它评估为 true 或 false 并且不需要存储匹配项、返回匹配索引和那些东西，我想知道它是否会比`=~`.

* * *

好的，我测试了这个。`=~`即使您有多个捕获组，它仍然更快，但是它比其他选项更快。

顺便说一句，有什么好处`freeze`？我无法衡量它带来的任何性能提升。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-09T15:56:54.240

根据您的正则表达式的复杂程度，您可能只使用简单的字符串切片。我不确定这对您的应用程序的实用性，或者它是否真的会提供任何速度改进。

```
'testsentence'['stsen']
=> 'stsen' # evaluates to true
'testsentence'['koala']
=> nil # evaluates to false 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-03T23:51:43.203

> 我想知道是否有任何奇怪的方法可以使这个检查更快，也许是利用 Regexp 中的一些奇怪的方法或一些奇怪的构造。

正则表达式引擎在实现搜索的方式上有所不同，但一般来说，锚定您的模式以提高速度，并避免贪婪匹配，尤其是在搜索长字符串时。

在您熟悉特定引擎的工作原理之前，最好的做法是进行基准测试并添加/删除锚点，尝试限制搜索，使用通配符与显式匹配等。

[Fruity](https://github.com/marcandre/fruity) gem对于快速进行基准测试非常有用，因为它很聪明。Ruby 的内置[Benchmark](http://www.ruby-doc.org/stdlib-2.1.3/libdoc/benchmark/rdoc/index.html)代码也很有用，尽管您可以编写一些测试来欺骗您，因为您不小心。

我在 Stack Overflow 上的许多答案中都使用了这两种方法，因此您可以搜索我的答案，并会看到很多小技巧和结果，让您了解如何编写更快的代码。

要记住的最重要的事情是，在您知道减速发生的位置之前过早地优化您的代码是不好的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-04T22:08:23.697

要完成*Wiktor Stribiżew*和*Dougui*的答案，我会说`/regex/.match?("string")`大约`"string".match?(/regex/)`.

Ruby 2.4.0（10 000 000 ~2 秒）

```
2.4.0 > require 'benchmark'
 => true 
2.4.0 > Benchmark.measure{ 10000000.times { /^CVE-[0-9]{4}-[0-9]{4,}$/.match?("CVE-2018-1589") } }
 => #<Benchmark::Tms:0x005563da1b1c80 @label="", @real=2.2060338060000504, @cstime=0.0, @cutime=0.0, @stime=0.04000000000000001, @utime=2.17, @total=2.21> 
2.4.0 > Benchmark.measure{ 10000000.times { "CVE-2018-1589".match?(/^CVE-[0-9]{4}-[0-9]{4,}$/) } }
 => #<Benchmark::Tms:0x005563da139eb0 @label="", @real=2.260814556000696, @cstime=0.0, @cutime=0.0, @stime=0.010000000000000009, @utime=2.2500000000000004, @total=2.2600000000000007> 
```

Ruby 2.6.2 (100 000 000 ~20 秒)

```
irb(main):001:0> require 'benchmark'
=> true
irb(main):005:0> Benchmark.measure{ 100000000.times { /^CVE-[0-9]{4}-[0-9]{4,}$/.match?("CVE-2018-1589") } }
=> #<Benchmark::Tms:0x0000562bc83e3768 @label="", @real=24.60139879199778, @cstime=0.0, @cutime=0.0, @stime=0.010000999999999996, @utime=24.565644999999996, @total=24.575645999999995>
irb(main):004:0> Benchmark.measure{ 100000000.times { "CVE-2018-1589".match?(/^CVE-[0-9]{4}-[0-9]{4,}$/) } }
=> #<Benchmark::Tms:0x0000562bc846aee8 @label="", @real=24.634255946999474, @cstime=0.0, @cutime=0.0, @stime=0.010046, @utime=24.598276, @total=24.608321999999998> 
```

注意：时间会有所不同，有时`/regex/.match?("string")`更快，有时`"string".match?(/regex/)`，差异可能只是由于机器活动。

# lucene - 如何使用查询语法在 Lucene 中获得准确的搜索结果

> ID：11887148
> 
> 赞同：1
> 
> 时间：2012-08-09T15:49:55.147
> 
> 标签：lucene, sitecore

到目前为止，我一直在测试使用查询语法在 Sitecore 中输入的关键字，但搜索结果并未将页面排名第一。

例如，如果我将查询语法放在单词 book....(title:book)^1

我希望作为姓名簿的索引页首先出现在搜索结果中，而不是书签。

此外，每次我在 Sitecore 中发布新页面时，单词 Book 的关键字都会下推到最后一个结果，或者不会出现在搜索页面中。

如何在 Lucene 中为搜索引擎页面获得准确的结果？

此外，我一直在关注[http://www.lucenetutorial.com/lucene-query-syntax.html](http://www.lucenetutorial.com/lucene-query-syntax.html)关于如何增加搜索结果的信息，但它不起作用。

有人能解释一下搜索词的提升是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:13:25.530

我建议您利用[Advanced Database Crawler](http://svn.sitecore.net/AdvancedDatabaseCrawler/Branches/v2/)来充分利用 Lucene.NET 和 Sitecore。从那里，有一个用于索引的配置文件，其中有一个名为`<dynamicFields ... >`. 在该部分中，您可以指定单个 Sitecore 字段并调整`boost`属性。`boost`每个字段的默认值`1f`都是`1`浮点数。

更多阅读：

*   [Sitecore 搜索器和高级数据库爬虫](http://sitecoreblog.alexshyba.com/2010/11/sitecore-searcher-and-advanced-database.html)
*   [ADC 的源代码](http://svn.sitecore.net/AdvancedDatabaseCrawler/Branches/v2/)

# android - Android：更新文件上传的进度条

> ID：11887149
> 
> 赞同：8
> 
> 时间：2012-08-09T15:49:56.937
> 
> 标签：android, progress-bar, progressdialog

我已经坚持了一段时间。我有一个将图像上传到 Web 服务器的异步任务。工作正常。

我为此设置了一个进度条对话框。我的问题是如何准确更新进度条。我尝试的一切都会导致它一步从 0 到 100。不管是 5 秒还是 2 分钟。栏挂在 0 上，然后在上传完成后达到 100。

这是我的 doInBackground 代码。任何帮助表示赞赏。

编辑：我更新了下面的代码以包含整个 AsynchTask

```
private class UploadImageTask extends AsyncTask<String,Integer,String> {

        private Context context;   
        private String msg = "";
        private boolean running = true;

        public UploadImageTask(Activity activity) {
            this.context = activity;
            dialog = new ProgressDialog(context);
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMessage("Uploading photo, please wait.");
            dialog.setMax(100);
            dialog.setCancelable(true);
        }

    @Override
    protected void onPreExecute() {
            dialog.show();
            dialog.setOnDismissListener(mOnDismissListener);
    }

    @Override
    protected void onPostExecute(String msg){

         try {
        // prevents crash in rare case where activity finishes before dialog
        if (dialog.isShowing()) {
                dialog.dismiss();
        }
              } catch (Exception e) {
              } 
     }

     @Override
     protected void onProgressUpdate(Integer... progress) {        
      dialog.setProgress(progress[0]);
     }

    @Override
    protected String doInBackground(String... urls) {

                if(running) {

                    // new file upload
                    HttpURLConnection conn = null;
                    DataOutputStream dos = null;
                    DataInputStream inStream = null;

                    String exsistingFileName = savedImagePath;
                    String lineEnd = "\r\n";
                    String twoHyphens = "--";
                    String boundary = "*****";

                    int bytesRead, bytesAvailable, bufferSize;
                    byte[] buffer;
                    int maxBufferSize = 1024 * 1024;

                    String urlString = "https://mysite.com/upload.php";
                    float currentRating = ratingbar.getRating();

                    File file = new File(savedImagePath);
                    int sentBytes = 0;
                    long fileSize = file.length();

                    try {
                        // ------------------ CLIENT REQUEST

                        // open a URL connection to the Servlet
                        URL url = new URL(urlString);
                        // Open a HTTP connection to the URL
                        conn = (HttpURLConnection) url.openConnection();
                        // Allow Inputs
                        conn.setDoInput(true);
                        // Allow Outputs
                        conn.setDoOutput(true);
                        // Don't use a cached copy.
                        conn.setUseCaches(false);
                        // Use a post method.
                        conn.setRequestMethod("POST");
                        conn.setRequestProperty("Connection", "Keep-Alive");
                        conn.setRequestProperty("Content-Type","multipart/form-data;boundary=" + boundary);

                        dos = new DataOutputStream(conn.getOutputStream());

                        dos.writeBytes(twoHyphens + boundary + lineEnd);
                        dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                                        + exsistingFileName + "\"" + lineEnd);

                        dos.writeBytes(lineEnd);

                        FileInputStream fileInputStream = new FileInputStream(new File(exsistingFileName));
                        bytesAvailable = fileInputStream.available();
                        bufferSize = Math.min(bytesAvailable, maxBufferSize);
                        buffer = new byte[bufferSize];

                        // read file and write it into form...
                        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                        while (bytesRead > 0) {
                            dos.write(buffer, 0, bufferSize);

                            // Update progress dialog
                            sentBytes += bufferSize;
                            publishProgress((int)(sentBytes * 100 / fileSize));

                            bytesAvailable = fileInputStream.available();
                            bufferSize = Math.min(bytesAvailable, maxBufferSize);
                            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                        }

                        // send multipart form data necesssary after file data...
                        dos.writeBytes(lineEnd);
                        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
                        dos.flush();
                        dos.close();
                        fileInputStream.close();
                    }catch (MalformedURLException e) {

                    }catch (IOException e) {

                    }

                    // ------------------ read the SERVER RESPONSE
                    try {
                        inStream = new DataInputStream(conn.getInputStream());

                        // try to read input stream
                        // InputStream content = inStream.getContent();
                        BufferedInputStream bis = new BufferedInputStream(inStream);
                        ByteArrayBuffer baf = new ByteArrayBuffer(20);

                        long total  = 0;
                        int current = 0;
                        while ((current = bis.read()) != -1) {
                        baf.append((byte) current);

                        /* Convert the Bytes read to a String. */
                        String mytext = new String(baf.toByteArray());
                        final String newtext = mytext.trim();

                        inStream.close();

                    } catch (Exception e) {

                    }
                }
                return msg;
        }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-01T12:33:58.043

这应该工作！

```
connection = (HttpURLConnection) url_stripped.openConnection();
        connection.setRequestMethod("PUT");
        String boundary = "---------------------------boundary";
        String tail = "\r\n--" + boundary + "--\r\n";
        connection.addRequestProperty("Content-Type", "image/jpeg");
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Length", ""
                + file.length());
        connection.setDoOutput(true);

        String metadataPart = "--"
                + boundary
                + "\r\n"
                + "Content-Disposition: form-data; name=\"metadata\"\r\n\r\n"
                + "" + "\r\n";

        String fileHeader1 = "--"
                + boundary
                + "\r\n"
                + "Content-Disposition: form-data; name=\"uploadfile\"; filename=\""
                + fileName + "\"\r\n"
                + "Content-Type: application/octet-stream\r\n"
                + "Content-Transfer-Encoding: binary\r\n";

        long fileLength = file.length() + tail.length();
        String fileHeader2 = "Content-length: " + fileLength + "\r\n";
        String fileHeader = fileHeader1 + fileHeader2 + "\r\n";
        String stringData = metadataPart + fileHeader;

        long requestLength = stringData.length() + fileLength;
        connection.setRequestProperty("Content-length", ""
                + requestLength);
        connection.setFixedLengthStreamingMode((int) requestLength);
        connection.connect();

        DataOutputStream out = new DataOutputStream(
                connection.getOutputStream());
        out.writeBytes(stringData);
        out.flush();

        int progress = 0;
        int bytesRead = 0;
        byte buf[] = new byte[1024];
        BufferedInputStream bufInput = new BufferedInputStream(
                new FileInputStream(file));
        while ((bytesRead = bufInput.read(buf)) != -1) {
            // write output
            out.write(buf, 0, bytesRead);
            out.flush();
            progress += bytesRead;
            // update progress bar
            publishProgress(progress);
        }

        // Write closing boundary and close stream
        out.writeBytes(tail);
        out.flush();
        out.close();

        // Get server response
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(connection.getInputStream()));
        String line = "";
        StringBuilder builder = new StringBuilder();
        while ((line = reader.readLine()) != null) {
            builder.append(line);
        } 
```

参考：[http ://delimitry.blogspot.in/2011/08/android-upload-progress.html](http://delimitry.blogspot.in/2011/08/android-upload-progress.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-24T06:06:03.723

You need to do the division on float values and convert the result back to int:

```
float progress = ((float)sentBytes/(float)fileSize)*100.0f;
publishProgress((int)progress); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T05:44:48.607

你可以这样做：

```
try { // open a URL connection to the Servlet
            FileInputStream fileInputStream = new FileInputStream(
                    sourceFile);
            URL url = new URL("http://10.0.2.2:9090/plugins/myplugin/upload");
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true); // Allow Inputs
            conn.setDoOutput(true); // Allow Outputs
            conn.setUseCaches(false); // Don't use a Cached Copy
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("ENCTYPE", "multipart/form-data");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            conn.setRequestProperty("uploadedfile", filename);
            // conn.setFixedLengthStreamingMode(1024);
            // conn.setChunkedStreamingMode(1);
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + filename + "\"" + lineEnd);
            dos.writeBytes(lineEnd);
            bytesAvailable = fileInputStream.available();
            bufferSize = (int) sourceFile.length()/200;//suppose you want to write file in 200 chunks
            buffer = new byte[bufferSize];
            int sentBytes=0;
            // read file and write it into form...
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                // Update progress dialog
                sentBytes += bufferSize;
                publishProgress((int)(sentBytes * 100 / bytesAvailable));
                bytesAvailable = fileInputStream.available();
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            // send multipart form data necesssary after file data...
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            // Responses from the server (code and message)
            serverResponseCode = conn.getResponseCode();
            String serverResponseMessage = conn.getResponseMessage();
            // close streams
            fileInputStream.close();
            dos.flush();
            dos.close();
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-19T05:05:54.173

我有同样的问题，这对我有帮助。这也可以帮助你。

在您的 Async 任务类中，编写（粘贴）以下代码。

```
 ProgressDialog dialog;

    protected void onPreExecute(){
        //example of setting up something
        dialog = new ProgressDialog(your_activity.this);
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setMax(100);
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        for (int i = 0; i < 20; i++) {
            publishProgress(5);
            try {
                Thread.sleep(88);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        dialog.dismiss();
        return null;
    }
    protected void onProgressUpdate(Integer...progress){
        dialog.incrementProgressBy(progress[0]);
    } 
```

如果发生错误，`"publishProgress(5);"`请从代码中删除。否则它很好去。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T16:07:50.333

我花了两天时间研究[这个例子](https://stackoverflow.com/a/11826317/4901431)。

一切都在这个字符串中。

```
conn.setRequestProperty("ENCTYPE", "multipart/form-data"); 
```

只有它有帮助。

# joomla - 如何检测 Joomla db 中未发布的内容？

> ID：11887160
> 
> 赞同：9
> 
> 时间：2012-08-09T15:50:30.003
> 
> 标签：joomla

我可能必须从 Joomla 创建导入脚本。

如何检测所选内容未发布？

我在 jos_content 表中看到三列：

*   发布_up
*   发布_下
*   发表

我需要确定这些列的含义，以了解哪些内容已发布。

例如内容项：

publish_up 2008-07-09 11:17:43
publish_down 2008-10-16 00:00:00
发布 2008-07-09 11:17:43

是否发布？

我不能自己在管理面板中签入，因为网站中的某些东西已经坏了，所以现在 db 是我唯一的选择。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T15:59:10.283

您必须在 #_content 表中查找“状态”值。

根据[https://github.com/joomla/joomla-cms/blob/staging/administrator/components/com_content/models/forms/article.xml](https://github.com/joomla/joomla-cms/blob/staging/administrator/components/com_content/models/forms/article.xml)，状态值为：

**0** = 未发表

**1** = 已发布

**2** = 存档

**-2** = 已删除/标记为删除

您还需要检查日期`publish_up`和`publish_down`日期。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-21T11:43:54.937

> “状态”值可以是：-1 = 已归档

不对.. **2** = 存档 (Joomla 3.3.6)

# java - 使用 JMSMessageID 从 MQ 队列中删除 JMS 消息

> ID：11887167
> 
> 赞同：3
> 
> 时间：2012-08-09T15:50:41.043
> 
> 标签：java, jms, ibm-mq, mq

有没有办法使用 Java 应用程序中的 JMSMessageId（不使用工具）从 IBM MQ 队列中删除 JMS 消息？此类操作是否也是特定于供应商的？

查看了用于删除消息的接收操作的 API，但是对于删除特定消息，我们是否需要使用 MessageSelector 进行过滤并适当地删除，还是有更简单的方法？[检查任何可以直接使用的可用方法]

您能否提供教程/示例 [也可以是链接] 以显示此类操作的 API 使用情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:17:42.433

当您`JMSMessageID`用作选择器中的唯一消息属性时，WMQ 将查找优化为与本机 WMQ API 相同，`MQMD.MessageID`后者是队列中的索引字段。有关更多详细信息，请参阅[JMS 消息选择](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/jm25420_.htm)主题。

```
QueueReceiver rcvr = sess.createReceiver(inputQ, "JMSCorrelationID = '"+msgId+"'") 
```

您还可以使用 Java 本机代码使用本机 WMQ API 调用来执行相同的操作。您将执行正常操作，但在结构`GET`中指定消息 ID 。`MQMD`

```
myMsg.messageId = someMsgID; 
MQGetMessageOptions gmo = new MQGetMessageOptions(); 
myQueue.get(myMsg, gmo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T15:11:49.767

**如何使用 messageid 删除特定的消息表单队列？**

我也有喜欢你的问题，我提供了可重复使用的功能。你只需要传递`MessageId`和`Queue`命名。对我来说没问题。

```
private void deleteMessage(String messageId, String queueName) {
    try {
         JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi");
         JMXConnector jmxc = JMXConnectorFactory.connect(url);
         MBeanServerConnection conn = jmxc.getMBeanServerConnection();
         ObjectName name = new ObjectName("org.apache.activemq:type=Broker,brokerName=localhost");
         BrokerViewMBean proxy = (BrokerViewMBean)MBeanServerInvocationHandler.newProxyInstance(conn, name, BrokerViewMBean.class, true);
         for (ObjectName queue : proxy.getQueues()) {  
            QueueViewMBean queueBean = (QueueViewMBean) MBeanServerInvocationHandler.newProxyInstance(conn, queue, QueueViewMBean.class, true);
            if(queueBean.getName().equals(queueName)) {
                System.out.println("Deleted : " + messageId);
                queueBean.removeMessage(messageId);
                return;
            }
         }
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

我用`activemq-all-5.8.0.jar`.

# php - 从数组中提取值并用它创建变量

> ID：11887170
> 
> 赞同：0
> 
> 时间：2012-08-09T15:50:44.117
> 
> 标签：php, multidimensional-array, attributes

具有以下数组：

```
Array
(
    [new] => Array
        (
            [data-title] => Crear grupo
            [class] => test1, test2, test3
            [style] => float:left; border:1px solid red;
        )

    [trash] => Array
        (
            [class] => delete
        )

    [0] => edit
) 
```

我想要实现的是提取`data-title`'s、`class`'s 或任何其他子数组，并将其值转换为包含该值的变量，这样我就可以随时通过像这样回显它来访问它`echo $title`

第一部分很简单，但我想知道是否有任何方法可以**自动翻译`[data-title] => Crear grupo`为`data-title="Crear grupo"`**

```
foreach($buttons as $button => $attribute) {

         $title = $attribute['data-title'];
         $classes = $attribute['class'];

         echo "<li data-title='$title' class='$classes'>"

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:56:07.973

尝试这个：

```
foreach ($buttons as $button => $attribute) {
    $str = "<li ";

    foreach ($attribute as $attr => $val) {
        $str .= $attr . '="' . $val . '" ';
    }
    $str .= ">";
} 
```

# c# - Getter/Setter 使我的代码崩溃，但在函数中很好

> ID：11887171
> 
> 赞同：3
> 
> 时间：2012-08-09T15:50:47.447
> 
> 标签：c#, performance, get, set, globalization

我想返回英国格式的日期，而不是它当前存储的美国格式。

因此，我决定为我的类中的值添加一个 getter 和 setter。

但是，当我使用 getter 和 setter 运行代码时，页面无法加载。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

// Globalisation for converting dates from American to British format
using System.Globalization;

/// <summary>
/// Class to hold the summary of an order take from database TOEHEAD
/// </summary>
public class OrderSummary
{

    public string order_number { get; set; }
    public string order_date
    {
        get
        {
            try
            {
                string ukDateTimeFormat = Convert.ToString(DateTime.Parse(this.order_date, CultureInfo.CreateSpecificCulture("en-US")));

                return ukDateTimeFormat;
            }
            catch (FormatException e)
            {
                return "Error";
            }
        }

        set
        {
            this.order_date = value;
        }
    }
    public string order_total { get; set; }

    public OrderSummary()
    {

    }

} 
```

如果我将此代码放入一个函数并以这种方式返回它，它就可以正常工作。

我是不是格式有问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T15:56:16.297

您通过从获取代码中调用相同的属性来导致堆栈溢出

```
string ukDateTimeFormat = Convert.ToString(DateTime.Parse(**this.order_date**, CultureInfo.CreateSpecificCulture("en-US"))); 
```

您也可以在`set`

```
this.**order_date** = value; 
```

固定代码：

```
private string m_order_date;
public string order_date
{
    get
    {
        try
        {
            string ukDateTimeFormat = Convert.ToString(DateTime.Parse(m_order_date, CultureInfo.CreateSpecificCulture("en-US")));

            return ukDateTimeFormat;
        }
        catch (FormatException e)
        {
            return "Error";
        }
    }

    set
    {
        m_order_date = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:57:30.807

看起来你有一个循环引用。您的 order_date 获取器正在调用 order_date。

# javascript - AngularJS - 为范围内的对象添加快捷方式

> ID：11887172
> 
> 赞同：1
> 
> 时间：2012-08-09T15:50:52.080
> 
> 标签：javascript, angularjs

在我的最高级别范围内，我从服务器获取一些数据以在整个页面中使用，如下所示`$scope.lotsOfData = $http.get("lotsOfData");`：所以现在我的范围拥有一个承诺对象`lotsOfData`。然后，在我的 HTML 中，我有只与一小部分`lotsOfData`对象有关的指令。一个这样的指令可能看起来像这样：

```
<div>
    {{lotsOfData.foo.blah[source].bar[id].someData}}<br>
    {{lotsOfData.foo.blah[source].bar[id].otherData}}<br>
    {{lotsOfData.foo.blah[source].bar[id].differentData}}
</div> 
```

其中 source 和 id 是通过指令上的属性设置的。我的 HTML 页面看起来像这样：

```
<data-subset source="1" id="1" />
<data-subset source="1" id="2" />
<data-subset source="2" id="1" />
<data-subset source="3" id="1" /> 
```

`lotsOfData.foo.blah[source].bar[id]`我讨厌在整个指令中重复。有没有办法在范围内设置，所以我的指令看起来更像这样？

```
<div>
    {{currObj.someData}}<br>
    {{currObj.otherData}}<br>
    {{currObj.differentData}}
</div> 
```

这不仅清理了 HTML，而且如果我们重构该`lotsOfData`对象，只有一个地方可以改变它获取`currObj`对象的方式。在我的指令的链接函数中，我尝试了这个：

```
link: function(scope, element, attrs) {
    scope.currObj = scope.lotsOfData.foo.blah[attrs.source].bar[attrs.id];
} 
```

但是，由于`lotsOfData`它是一个 Promise 对象，它没有名为`foo`. 我不太了解 promise 对象的工作原理，所以也许我只需要知道如何获得所需的属性。

我希望我在这里尝试完成的工作是有意义的，有人可以为我指明正确的方向，以了解如何完成这项工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:23:27.010

```
link: function(scope, element, attrs) {
    scope.$watch('lotsOfData.foo.blah['+attrs.source+'].bar['+attrs.id+']', function(newVal, oldVal) {
        scope.currObj = newVal;
    }
} 
```

这应该可以解决问题，您只需注意数据的更改并`currObj`使用新值设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:08:39.210

我就是这样完成了我想要的。我为上述指令创建了一个外部指令，然后为绑定到我想要的数据的内部指令创建了一个隔离范围。

所以我的外部指令 HTML 看起来像这样：

```
<div>
    <data-subset curr-obj="lotsOfData.foo.blah[source].bar[id]"></data-subset>
</div> 
```

javascript看起来像这样：

```
myModule.directive('outer-data', function() {
        return {
            restrict: 'E',
            replace: true,
            templateUrl: 'outerData.html',
            link: function(scope, element, attrs) {
                scope.id = attrs.id;
                scope.source = attrs.source;
            },
            scope: true
        }
    }); 
```

然后我的 dataSubset 的 javscript 如下所示：

```
myModule.directive('dataSubset', function() {
        return {
            restrict: 'E',
            replace: true,
            templateUrl: 'dataSubset.htm',
            scope: {
                currObj: '='
            }
        }
    }); 
```

那么在我的顶级 HTML 文件中，我有这样的内容：

```
<outer-data source="1" id="1" />
<outer-data source="1" id="2" />
<outer-data source="2" id="1" />
<outer-data source="3" id="1" /> 
```

我可以像我想要的那样在我的 dataSubset 上引用 currObj。

# .htaccess - 使用 htaccess 将任何桌面用户重定向到保留页面

> ID：11887173
> 
> 赞同：1
> 
> 时间：2012-08-09T15:50:53.973
> 
> 标签：.htaccess, redirect, user-agent

我有一个尚未准备好桌面的移动网络应用程序，我不希望用户能够查看应用程序的桌面版本。是否可以通过将用户代理信息附加到 URL 来捕获来自桌面浏览器的任何请求并重定向到保留页面，甚至可能重定向到网站的平板电脑版本？对此的基本尝试如下，但不起作用......

```
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_USER_AGENT} ^.*(MSIE.*Windows\ NT|Lynx|Safari|Opera|Firefox|Konqueror) [NC]
RewriteRule ^$ holding.jpg [L,R] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:21:02.170

尝试更改您`RewriteRule`的正则表达式，使其匹配*任何内容*：

```
RewriteRule .* holding.jpg [L,R] 
```

# c - 在c中将输出流发送到char []

> ID：11887176
> 
> 赞同：2
> 
> 时间：2012-08-09T15:50:57.627
> 
> 标签：c, stdout, freopen

我一直在使用`dup`并`freopen`重新路由`stdout`到如下文件：

```
fflush(stdout);
fgetpos(stdout, &pos);
fd = dup(fileno(stdout));
freopen("stdout.out", "w", stdout); 
```

我想做的是将它重新路由到 a `char[]`，以便我可以操纵它。显然，这在使用 编写时不是很有用`printf`，但是在使用写入到 的库时，`stdout`在代码中获取输出会很有帮助，这样我就可以在必要时对其进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-03T10:15:45.050

不能保证分配给 stdout 工作，但它可能会在您的平台上工作，否则请参阅基于 shmem_open、mmap 和 fmem_open 的答案：[https ://stackoverflow.com/a/25327235/2332068](https://stackoverflow.com/a/25327235/2332068)

# java - 如何获取 RFT 版本号？

> ID：11887180
> 
> 赞同：0
> 
> 时间：2012-08-09T15:51:00.987
> 
> 标签：java, automated-tests, rft

Rational Functional Tester 脚本如何确定它在哪个版本的 RFT 下执行/构建？

我翻阅了文档，发现最接近的是

```
com.rational.test.ft.script.ScriptUtilities.getOperatingSystemVersion() 
```

它返回操作系统版本信息，可能很接近，但仍然不是爸爸正在寻找的；O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:22:41.093

I didn't find anything in the APIs or in the Windows registry.

The only way I can think of is to create a custom method and include it in you helper class. You can find the versione in the file `C:\IBM\SDP\FunctionalTester\properties\version\IBM_Rational_Functional_Tester.*.*.swtag`, change the path to match your installation.

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FilenameFilter;
import java.io.IOException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;

private final static String RFTVersionFolder = "C:\\IBM\\SDP\\FunctionalTester\\properties\\version";

public static String getRFTVersionWithXML() {
        File versionFolder = new File(RFTVersionFolder);
        File[] versionFile = versionFolder.listFiles( new FilenameFilter() {
                public boolean accept(File dir, String name) {
                    return (name.endsWith(".swtag"));
                } } );

        Document versionDocument = null;
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();

        try {
            DocumentBuilder builder = factory.newDocumentBuilder();
            versionDocument = builder.parse(new FileInputStream(versionFile[0]));
        } catch (SAXParseException spe) {
            spe.printStackTrace();
        } catch (SAXException sxe) {
            sxe.printStackTrace();
        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        Node versionNode = versionDocument.getElementsByTagName("ProductVersion").item(0);

        return versionNode.getTextContent();
    } 
```

This is a quite expensive method, because it istantiates a DocumentBuilder for XML parsing. As an alternative, load the file content as a String and parse it with a RegExp, use this matching pattern: [0-9]\.[0-9]\.[0-9]

```
public static String getRFTVersionWithRegexp() {
    File versionFolder = new File(RFTVersionFolder);
    File[] versionFile = versionFolder.listFiles( new FilenameFilter() {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".swtag"));
        } } );

    byte[] buffer = null;
    FileInputStream fin;
    try {
        fin = new FileInputStream(versionFile[0]);
        buffer = new byte[(int) versionFile[0].length()];
        new DataInputStream(fin).readFully(buffer);
        fin.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } 
    String versionFileContent = new String(buffer);
    String version = null;
    Regex r = new Regex("[0-9]\\.[0-9]\\.[0-9]", Regex.MATCH_NORMAL);
    if (r.matches(versionFileContent))
        version = r.getMatch();

    return version;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T21:48:50.767

1) 转到**Help** > **About RFT**，它显示版本。

# scala - 选项的 Scala 命名约定

> ID：11887181
> 
> 赞同：10
> 
> 时间：2012-08-09T15:51:03.807
> 
> 标签：scala, naming-conventions

当我返回 type 的东西时`Option`，在函数名的名称中解释它是一个选项，而不是东西本身似乎很有用。例如，seqs 有`reduceOption`. 有标准的命名约定吗？我见过的东西：

`maybeFunctionName`

`functionNameOption`

- 两者似乎都不是那么好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T16:00:18.107

`reduceOption` and friends (`headOption`, etc.) are only named that way to distinguish them from their unsafe alternatives (which arguably shouldn't exist in the first place—i.e, there should just be a `head` that returns an `Option[A]`).

`whateverOption` isn't the usual practice in the standard library (or most other Scala libraries that I'm aware of), and in general you shouldn't need or want to use this kind of Hungarian notation in Scala.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T16:00:45.267

为什么要使函数名称更长？它没有任何贡献，因为它返回一个 Option 的事实在查看函数的类型时是显而易见的。

reduceOption 是一种特殊情况，因为在大多数情况下，您确实想使用 reduce，但它不适用于空序列。

# mysql - Mysql根据不同列何时最少选择一列

> ID：11887182
> 
> 赞同：0
> 
> 时间：2012-08-09T15:51:03.493
> 
> 标签：mysql

这可能没有任何意义，但我想做的是根据另一列最少的时间来选择一列。例如，我有 3 个 int 列和 3 个 varchar 列

在下面的示例中 Unit = int 和 Link = varchar

```
Unit1|Link1|Unit2|Link2|Unit3|Link3
72|www.google.com|43|www.yahoo.com|9212|www.lycos.com
```

在上面的示例中，Unit2 最少，所以我想选择 Link2。

这就是我选择最少的方式，所以任何帮助都会很棒

```
select Least(
                       Coalesce(myTable.Unit1,
                                myTable.Unit2,
                                myTable.Unit3),
                       Coalesce(myTable.Unit1,
                                myTable.Unit2,
                                myTable.Unit3),
                       Coalesce(myTable.Unit1,
                                myTable.Unit2,
                                myTable.Unit3))
                       AS LowestUnit
from myTable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:01:36.270

一种方法：

```
SELECT CASE WHEN Unit1 = LEAST(Unit1,Unit2,Unit3) THEN Link1 
            WHEN Unit2 = LEAST(Unit1,Unit2,Unit3) THEN Link2
            WHEN Unit3 = LEAST(Unit1,Unit2,Unit3) THEN Link3
       END AS LinkL 
```

（您可以使用 ELSE Link3 代替第三个 WHEN 以获得等效结果，我只是检查了所有三个，并让 ELSE 默认为 NULL。）

等效且更简洁：

```
SELECT CASE LEAST(Unit1,Unit2,Unit3)
            WHEN Unit1 THEN Link1 
            WHEN Unit2 THEN Link2
            WHEN Unit3 THEN Link3
       END AS LinkL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:01:37.953

这可能会有所帮助：

```
drop table if exists myTable;

create table myTable
(Unit1 int unsigned not null,
Link1 varchar(50) not null,
Unit2 int unsigned not null,
Link2 varchar(50) not null,
Unit3 int unsigned not null,
Link3 varchar(50) not null
);

insert into myTable values (72,'www.google.com',43,'www.yahoo.com',9212,'www.lycos.com');

select 
case least(Unit1,Unit2,Unit3)
when Unit1 then Link1
when Unit2 then Link2
when Unit3 then Link3
end as Link
from myTable; 
```

# javascript - 使用 javascript 在 iPhone Safari 浏览器上自动缩小

> ID：11887183
> 
> 赞同：0
> 
> 时间：2012-08-09T15:51:09.213
> 
> 标签：javascript, iphone, mobile-safari, zooming, out

我已经设计了我的网页以完美地适合 Iphone 屏幕。它的顶角有一个小文本框。当用户点击文本框输入文本时，Iphone 浏览器会自动放大到屏幕的上角，非常酷。但是在用户点击搜索后，浏览器仍然放大到顶角。用户必须手动缩小才能看到全屏。

因此，我想知道一种通过调用将自动缩小并显示完整网页的 javascript 来解决此问题的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:27:12.043

我有同样的问题/要求，所以我希望在这里找到答案（我没有）。

这是我到目前为止所得到的：

将“onblur”事件处理程序添加到文本框标记（在 HTML 中，您在其中声明文本框）。

按下“完成”按钮后触发回调。

在这一点上，我不确定如何缩小到以前的缩放级别。

# c# - 日期比较结果

> ID：11887185
> 
> 赞同：1
> 
> 时间：2012-08-09T15:51:10.327
> 
> 标签：c#

为什么下面的代码会导致 (-1)？

当 startDate 设置为*7/9/12 5:00:00 AM 时*， compareValue 返回 1。我希望在下面的场景中为正 1，但得到 (-1)。

```
startDate = "7/16/2012 5:00:00 AM"
endDate = "7/17/2012 5:00:00 AM"

//enter code here
int compareValue =  startDate.CompareTo(endDate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:52:40.793

`-1`表示`startDate`早于`endDate`，在这种情况下是正确的。根据[文档](http://msdn.microsoft.com/en-us/library/x79949f0.aspx) `CompareTo`返回：

*   < 0 实例早于值
*   == 0 实例与值相同
*   > 0 实例晚于值或值为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:39:52.510

你似乎在`strings`这里比较。如果您使用字符串 '7/9/12 5:00:00 AM' 进行比较，您会得到`1`因为`'7/9/12 5:00:00 AM'`在字典上大于`'7/17/2012 5:00:00 AM'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:54:57.493

CompareTo 方法返回 -1：7/16/2012 5:00:00 AM 早于 7/1/2012 5:00:00 AM

```
Link : http://msdn.microsoft.com/fr-fr/library/5ata5aya.aspx 
```

# c++ - 枚举成员的值可以自动递减而不是递增吗？

> ID：11887186
> 
> 赞同：2
> 
> 时间：2012-08-09T15:51:11.723
> 
> 标签：c++, enums

例如：

```
enum ABC
{
  apple =  0xe,
  banana = 0xd,
  orange,
  pineapple
} 
```

可以`orange`自动获取和的值`0xc`吗`pineapple` `0xb`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T15:52:29.673

不，这些值只能自动递增。如果您希望值相反，则可以颠倒名称的顺序。

```
enum ABC
{
   pineapple = 0xb,
   orange,
   banana,
   apple
}; 
```

# javascript - 如何让这些 html 元素正确定位和交错？

> ID：11887187
> 
> 赞同：2
> 
> 时间：2012-08-09T15:51:12.487
> 
> 标签：javascript, jquery, html

我有一个网页，其中有一组平铺元素作为背景。位于此之上，我有另一组瓷砖（两倍大）充当叠加层。这些较大的图块中的每一个都具有等于较小背景图块之一的大小的“右边距”。你可以看到一个例子@ [http://jsfiddle.net/dhx2r/2/](http://jsfiddle.net/dhx2r/2/) *updated

乍一看，这显示正确。问题在于，由于每个较大的瓷砖都有这个右边距，这意味着如果你扩大窗口，除非它大于 3 个小瓷砖宽，否则瓷砖不会向上滑动以填充间隙。（像这样：http: [//img444.imageshack.us/img444/1412/70953496.png](http://img444.imageshack.us/img444/1412/70953496.png)）

理想情况下，我会以某种方式附加到 window.resize 事件并在 3 个小图块的间隙可用时将“margin-right”设置为“0”。我尝试使用 jsfiddle 的 js 面板中的代码来执行此操作，但它没有给出正确的结果。由于我使用的代码依赖于“window.resize”事件，jsfiddle 没有演示实际发生的情况，但它至少显示了我正在使用的代码。

我今天一直在为这个问题苦苦挣扎约 7 个小时，所以我的脑子有点炸了！解决这个初始问题后，我的意图是以某种方式错开奇数行，使它们具有小瓷砖宽度的“左边距”，以产生这种效果：http: [//img507.imageshack.us/img507/3600 /57663338.png](http://img507.imageshack.us/img507/3600/57663338.png)

我设法使用（假设小瓷砖是 150 像素和大 300 像素）计算偶数/奇数行：

```
if ((pos != 0) && (pos % 600 != 0)) {
    // The row is even, stagger the tiles.
}
else {
    // The row is odd, do nothing.
} 
```

..但是我从来没有解决这个最初的问题来处理逻辑。

无论如何，如果有人对我如何使这项工作有解决方案，我将不胜感激！我觉得我浪费了一整天的时间把头撞在墙上。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:40:13.320

我有一个解决方案的开始，但有时颜色设置不正确。我正在寻找解决它。

[小提琴 1](http://jsfiddle.net/charlesjourdan/dhx2r/11/)

最后所有的问题都[在这里](http://jsfiddle.net/charlesjourdan/dhx2r/13/)解决了。

谢谢你，找到解决方案对我来说很有趣。我希望这个解决方案对你有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:59:02.950

Maybe you should ditch the margin and use some hidden filler tiles that collapse just like the large ones?

***[fiddle](http://jsfiddle.net/dhx2r/1/)***

Okay, part 2\. This is a solution needs tweaking, and I've colored even rows orange for testing. I don't have time to fiddle with the exact numbers, but this should get you very close.

***[fiddle 2](http://jsfiddle.net/dhx2r/6/)***

# sharepoint - Sharepoint 2010 和 DispForm.aspx 并添加自定义

> ID：11887188
> 
> 赞同：0
> 
> 时间：2012-08-09T15:51:19.903
> 
> 标签：sharepoint, sharepoint-designer

我正在寻找将按钮添加到功能区或将表单操作按钮控件添加到列表项显示表单。

我希望用户能够通过电子邮件发送当前正在查看的列表项的详细信息。

至今....

我创建了一个新的 DispForm.aspx ...然后添加了表单操作按钮控件。我将操作设置为自定义操作....然后 SP2010 创建了一个新的站点工作流。

我可以编辑此工作流程..但我没有获得“当前项目”的字段。我认为这与它是一个站点工作流程而不是列表工作流程有关。

我还尝试编辑 DispForm.aspx 中的代码以更改工作流的 GUID，以尝试使用按钮启动列表工作流。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:18:37.380

我为获得此设置所做的首先是创建一个列表工作流。

以下所有工作均在 SharePoint Designer 中完成。而且我没有编辑任何页面，只是创建了一个显示在功能区中的自定义操作。

您可以通过从导航中选择列表和库，然后选择要将工作流添加到的列表来执行此操作。选择工作流应该有一个“块”后，只需单击添加新工作流。有了它，您可以设计您的工作流程，并且您将可以访问当前项目。

完成工作流后，在列表页面上找到自定义操作块（它在我的工作流块下方）。单击块中的某个位置，在顶部功能区上，您应该会看到自定义操作。当您打开该菜单时，它会为您提供选择操作类型的选项（Ribbon、DetailView、...）。现在只需将其链接到您刚刚创建的工作流程。（您可能需要刷新列表才能显示工作流。如果仍未显示，请确保已发布）。

# javascript - jQuery 用另一个链接替换给定的链接

> ID：11887190
> 
> 赞同：1
> 
> 时间：2012-08-09T15:51:21.897
> 
> 标签：javascript, jquery, regex

我有很多链接需要修改。我必须用硬编码链接替换它们的每个 url。

例如`path/to/something.html?L`进入`this/is/the/right/path.html?L`

直到**`?L`**必须更换所有东西。第一条路径中的所有内容，直到`?L`参数是动态的。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:56:05.083

你可以这样做，

```
prev = $('a[href^=path/to/something.html]').attr('href')
required = prev.split('?')[1];

$('a[href^=path/to/something.html]').attr('href', 'this/is/the/right/path.html?' + required); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:53:36.203

试试这个

```
$('a[href="path/to/something.html?L"]').attr('href', 'this/is/the/right/path.html?L') 
```

基本上它所说的是找到具有特定href的所有链接并将href替换为新的。

L 是一个常数还是只是一个例子，L 可以是多个东西？

# perl - 在perl中对三列文本文件应用距离公式

> ID：11887197
> 
> 赞同：0
> 
> 时间：2012-08-09T15:51:43.200
> 
> 标签：perl, text-files, distance

**这是我的数据**

```
nodes             x             y         z

1112,         23,       56,       88
2223,         56,       78,       54
3345,         32,       12,       11
4321,         11,       10,       06
5234,         10,       10,       12
6123,         12,       06,       04 
```

现在我想要那些彼此最近的节点..例如：如果节点（1112）和节点（4321）之间的距离小于（让d = 10）节点（1112）和节点（3345）之间的距离（让d=34)，反之亦然，输出应为=

```
 node:1112 and node:4321 are closest
     node:6123 and node:3345 are closest..... 
```

我正在使用这样的距离公式： my $dist = sqrt( ($x-$x2)* *2 + ($y-$y2)* *2 + ($z-$z2)**2 );

```
 i.e:
 d=sqrt( (56-23)**2 + (78-56)**2 + (54-88)**2 )
 d=sqrt( (32-23)**2 + (12-56)**2 + (11-88)**2 )
 d=sqrt( (11-23)**2 + (10-56)**2 + (06-88)**2 )
 d=sqrt( (10-23)**2 + (10-56)**2 + (12-88)**2 )....and so on 
```

对于其他节点及其坐标类似

```
 d=sqrt( (23-56)**2 + (56-78)**2 + (88-54)**2 )
 d=sqrt( (32-56)**2 + (12-78)**2 + (11-54)**2 )
 d=sqrt( (11-56)**2 + (10-78)**2 + (06-54)**2 )
 d=sqrt( (10-56)**2 + (10-78)**2 + (12-54)**2 ).... 
```

我已经这样做了，但一无所获......

```
use strict;
use warnings;
use Data::Dumper;

open(IN , "<" , "1.txt");
#open(OUT , ">" , "out.txt");

my $node_flag=0;
my %node_hash_1;
my %node_hash_2;

my @node_1;
my @node_2;

my @distance_array;
my $i=0;

foreach my $line(<IN>)
{
    if($line=~/^\*node$/i)
    {
        $node_flag=1;
        next;
    }
    if($node_flag==1)
    {
        if($line!~/^\*\*/i)
        {
            my @array=split(",",$line); # or  my @array=(split(",",$line))[1,2,3]
            my $node_id=shift @array;
            $node_hash_1{$node_id}=\@array;

            push(@node_1,[@array]);
            push(@node_2,[@array]);

            foreach my $var1(@node_1)
            {
                my($x,$y,$z)=@{$var1};
                foreach my $var2(@node_2)
                {
                    my($x2,$y2,$z2)=@{$var2};
                    my $dist = sqrt( ($x-$x2)**2 + ($y-$y2)**2 + ($z-$z2)**2 );
#                   print $dist;
                    print"\n";
                    foreach my $value(@{$node_hash_1{$node_id}})
                    {
                        my $vars=join",",@{$node_hash_1{$node_id}};
                        my @arr=split ",",$vars;
#                       print $arr[0];
                        print $vars;
                        if ($x==$value && $y==$value && $z==$value)
                        {
                            push @{$node_hash_1{$node_id}},$dist;
#                           $node_hash_2{x} = $x;
#                           $node_hash_2{y} = $y;
#                           $node_hash_2{z} = $z;
                        }
                    }
                }
            }
        }
        else
        {
            $node_flag=0;
        }
    }
}
#print Dumper(\%node_hash);
#print Dumper(\@distance_array);
#print Dumper(\@node_1);
#print Dumper(\%node_hash_2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:08:48.033

输入行从不匹配`'*node'`，因此`$node_flag`永远不会设置，因此第二个如果完全跳过，则跳过所有内容。

*   由于`'nodes'`带有一个`'s'`并且出现在第一行的开头，我认为您没有正确使用它。
*   此外，由于我在您的输入中没有看到*文字* `'*'`，我认为您不明白这`/\*/`是匹配*文字*星的一种方式。

我将正则表达式修改为 read `m/^nodes\b/`，它至少设置了 $node_flag 并让我进入主体。事情是这样的，但如果您知道文件顶部会出现一定数量的行，并且您不需要该信息，则可以这样做：

```
<IN> foreach 1..2; 
# or just once if that blank line is just a formatting mistake. 
```

如果您想检查标题行：

```
die 'No Header Line!' unless <IN> =~ m/^nodes\b/; 
```

这样，您就不会进入循环（`while`无论如何它应该是一个循环）。

*   您将相同的坐标推入两个数组，表明您过度使用了`foreach`循环。

*   此外，在*收集*数据时进行笛卡尔比较可以以更好的方式完成，如果您*将*当前输入值保留在列表之外，将其与已存储在列表中的成员进行比较。看起来您最终将节点 #1 与节点 #1 进行了尽可能多的比较。

虽然如果我真的关心数据，我可能会将其分解为一组类，但我提供以下更改作为直线 perl 处理器：

```
my ( @node_list, %distance_between, %closest_to );

die 'No Header' unless <IN> =~ m/^nodes\b/;

while ( my $line = <IN> ) {
    my ( $name, $x, $y, $z ) = split /\s*,\s*/, $line;
    foreach my $comp_node ( @node_list ) {
        my ( $name2, $x2, $y2, $z2 ) = @$comp_node;

        # distance_between is a needless structure, if 
        # you don't want to keep the distance. 
        $distance_between{ $name2 }{ $name } 
            = $distance_between{ $name }{ $name2 } 
            = my $dist
            = sqrt( ($x-$x2)**2 + ($y-$y2)**2 + ($z-$z2)**2 )
            ;

        my $closest = $closest_to{ $name2 } ||= [ $name, $dist ];
        if ( $closest->[1] > $dist ) { 
            $closest_to{ $name2 } = [ $name, $dist ];
        }
        $closest = $closest_to{ $name } ||= [ $name2, $dist ];
        if ( $closest->[1] > $dist ) { 
            $closest_to{ $name } = [ $name2, $dist ];
        }
    }
    push @node_list, [ $name, $x, $y, $z ];
}
foreach my $p ( map { [ $_, $closest_to{ $_ }[0] ] } sort keys %closest_to ) {
    say "$p->[0]'s closest neighbor is $p->[1]" ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:01:36.517

```
#!/usr/bin/perl

use strict;
use warnings;

my (@data, @temp, @result);

sub calc {
    my ($a, $b) = @_;
    my $dat = 0;
    $dat += ($a->[$_] - $b->[$_]) ** 2 for (1..3);
    return sqrt $dat;
}

while (<DATA>) {
    push @data, [split /,?\s+/];
}

for my $x (@data) {
    for my $y (@data) {
        push @temp, [calc($x, $y), $x, $y] if ($x->[0] > $y->[0]);
    }
}

@result = sort { $a->[0] <=> $b->[0]; } @temp;

for (@result) {
    print "[", join(', ', @{$_->[1]}), "], [", join(', ', @{$_->[2]}),
        "] => $_->[0]\n";
}

__DATA__
1112,         23,       56,       88
2223,         56,       78,       54
3345,         32,       12,       11
4321,         11,       10,       06
5234,         10,       10,       12
6123,         12,       06,       04 
```

输出：

```
[6123, 12, 06, 04], [4321, 11, 10, 06] => 4.58257569495584
[5234, 10, 10, 12], [4321, 11, 10, 06] => 6.08276253029822
[6123, 12, 06, 04], [5234, 10, 10, 12] => 9.16515138991168
[4321, 11, 10, 06], [3345, 32, 12, 11] => 21.6794833886788
[6123, 12, 06, 04], [3345, 32, 12, 11] => 22.0227155455452
[5234, 10, 10, 12], [3345, 32, 12, 11] => 22.113344387496
[2223, 56, 78, 54], [1112, 23, 56, 88] => 52.2398315464359
[3345, 32, 12, 11], [2223, 56, 78, 54] => 82.3468275041607
[3345, 32, 12, 11], [1112, 23, 56, 88] => 89.1403387922662
[5234, 10, 10, 12], [1112, 23, 56, 88] => 89.7830719011106
[5234, 10, 10, 12], [2223, 56, 78, 54] => 92.217135067188
[4321, 11, 10, 06], [2223, 56, 78, 54] => 94.62029380635
[4321, 11, 10, 06], [1112, 23, 56, 88] => 94.7839648885823
[6123, 12, 06, 04], [2223, 56, 78, 54] => 98.0815986819138
[6123, 12, 06, 04], [1112, 23, 56, 88] => 98.3717439105356 
```

# c# - 验证对象在 Rhino Mocks 中调用自身

> ID：11887199
> 
> 赞同：2
> 
> 时间：2012-08-09T15:51:46.193
> 
> 标签：c#, .net, unit-testing, rhino-mocks

如何将单元测试写入以下代码：

```
public Image Get(BrowserName browser)
{
    // if no screenshot mode specified it means that regular screenshot needed
    return this.Get(browser, ScreenshotMode.Regular);
}

public Image Get(BrowserName browser, ScreenshotMode mode) {            
    // some code omitted here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:01:37.270

这通常是通过部分模拟来完成的，它们可能有点恶心。

首先，您要模拟的方法*必须*是虚拟的。否则 Rhino Mocks 无法拦截该方法。因此，让我们将您的代码更改为：

```
public Image Get(BrowserName browser)
{
    // if no screenshot mode specified it means that regular screenshot needed
    return this.Get(browser, ScreenshotMode.Regular);
}

public virtual Image Get(BrowserName browser, ScreenshotMode mode) {            
    // some code omitted here
} 
```

请注意，第二种方法现在是虚拟的。然后我们可以像这样设置我们的部分模拟：

```
//Arrange
var yourClass = MockRepository.GeneratePartialMock<YourClass>();
var bn = new BrowserName();
yourClass.Expect(m => m.Get(bn, ScreenshotMode.Regular));

//Act
yourClass.Get(bn);

//Assert
yourClass.VerifyAllExpectations(); 
```

这就是 AAA Rhino Mocks 语法。如果您更喜欢使用录制/播放，您也可以使用它。

* * *

所以你会这样做。一个可能更好的解决方案是 if`ScreenshotMode`是一个枚举并且您可以使用 C# 4，只需将其设为可选参数：

```
public Image Get(BrowserName browser, ScreenshotMode mode = ScreenshotMode.Regular)
{
    //Omitted code.
} 
```

现在你没有两个方法，所以没有必要测试一个调用另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:24:19.810

除了使方法虚拟之外还有两种可能性（正如 vcsjones 解释的那样）：

1)

为 Get(browser, mode) 编写一个测试，模式为常规。然后对 Get（浏览器）运行相同的测试。

毕竟两者都应该返回完全相同的结果。

或 2)

将第二个 Get 方法的代码提取到具有接口的类中，并使其可注入到测试的类中。调用它：

```
public Image Get(BrowserName browser) {
  return whatever.Get(browser, ScreenshotMode.Regular);
}

public Image Get(BrowserName browser, ScreenshotMode mode) {   
  return whatever.Get(browser, mode);
} 
```

现在，在测试期间，您可以注入一个模拟并验证第一个 Get 方法是否使用 ScreenshotMode.Regular 调用它，而第二个 Get 方法只是传递模式。

# git - 添加 git 子模块时“你在一个尚未出生的分支上”

> ID：11887203
> 
> 赞同：124
> 
> 时间：2012-08-09T15:51:48.240
> 
> 标签：git, git-submodules

我正在尝试将一些子模块添加到我的`.vim/bundles`目录中，当我尝试添加这个特定的 repo 时，Git 给了我一个我以前从未见过的奇怪错误：

```
$ git submodule add -f git://github.com/derekwyatt/vim-scala.git .vim/bundle/vim-scala
fatal: You are on a branch yet to be born
Unable to checkout submodule '.vim/bundle/vim-scala' 
```

知道什么会导致这种情况吗？

如果我将相同的 repo 克隆到测试目录（不是通过 submodule 命令），它可以正常工作，并创建预期的文件。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-08-22T11:53:21.797

要修复该错误，您应该删除与目录内的子模块具有相同路径的文件夹`.git/modules/`。首次添加子模块时，子模块的 url 不正确时，可能会发生此错误。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-22T09:25:21.430

如果您添加没有`master`分支的子模块，则可能会发生此错误。如果您想在添加子模块时使用另一个分支（`develop`例如），您可以使用以下命令：

```
git submodule add -b <branch> <repository> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-09T17:26:48.273

您需要*在*现有 repo 中添加一个子模块，该 repo 需要处于添加和提交子模块链接的状态，*并且*子模块 repo 本身必须具有提交才能签出。

现在，如果您可以在其他地方创建常规克隆，则子模块 repo 本身必须没问题。`submodule add`但是，如果 repo 是空的而 clone 不是，它看起来会抱怨。[这个人](http://chee-yang.blogspot.co.uk/2011/07/git-submodule.html)建议这可以通过`submodule add`再次运行相同的命令来解决。

如果内部仓库*不*为空，请检查要*包含*子模块的仓库。切换到您运行的同一目录`git submodule add`，然后运行`git status`，并`git branch`验证您的包含 repo 是否已创建至少一个分支并且没有处于奇怪的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T21:33:08.563

正如@drew-noakes 所提到的，这可能是由于尝试使用*.gitignore*文件中列出的目录名称添加子模块造成的。

# java - 如何在java中解决这个问题？

> ID：11887205
> 
> 赞同：3
> 
> 时间：2012-08-09T15:51:49.237
> 
> 标签：java

我的程序将一个包含 IP 地址列表的字符串作为输入参数。每个 IP 地址由换行符分隔。它看起来像这样：

```
10.1.1.1
2.2.2.2
11.1.1.1

```

它看起来像这样

```
10.1.1.1-20
1.1.1.1

```

但它看起来像这样

```
172.16.12.1-20 /24
10.1.1.1

```

我想检查每个 IP 地址并返回两个列表 validAddresses、invalidAddresses。

我已经编写了一个程序来处理第一个最简单的输入类型，即没有 IP 地址范围和网络掩码。

```
private String[] extractIPAddress(String address){
    String[] temp;
    temp = address.split("\\s+");
    return temp;
} 
```

然后我做

```
addressList = extractIPAddress(String.valueOf(value));

for (int i=0; i < addressList.length; i++) {
    if (InetAddresses.isInetAddress(addressList[i]) == true) {
        validAddress = validAddress.concat(addressList[i] + '\n');
    } else {
        invalidAddress = invalidAddress.concat(addressList[i] + '\n');
    }
} 
```

现在我正在思考如何处理最复杂的输入类型，尤其是。

*   当线路附有范围时`1.1.1.1-10`，如何删除`-10`部分以检查主IP地址；如何检查范围部分是否`-10`会生成有效的 IP 地址，即`1.1.1.10`，然后如何将所有内容放在一起，以便我可以将其作为`validAddress`字符串的一行返回，看起来与开头相同，即`1.1.1.1-10`

*   同样的问题适用于网络掩码`/24`

这样的节目会有哪些元素？你能给我概述一下吗？

我以为我会做以下事情，但我不确定这是否是正确的方法以及如何实现某些部分：

*   如果我找到一个`-`然后从直到行尾或“/”的位置切断部分`-`（怎么做？）
*   将该部分保存到`ipRange`变量中
*   如果我找到`/`然后从 的位置开始切断该部分，`/`直到行尾
*   将该部分保存到`netMask`变量中
*   将内容复制到`tmp_ipRange = ipRange`
*   删除变量`-`中的`tem_ipRange`
*   将主 IP 地址的最后一个八位字节替换为`tmp_ipRange`（怎么做？）
*   将新的 IP 地址添加到由创建的数组中`String.split()`（不可能，因为你不能只在 java 中的数组中添加一些东西？我有什么替代方法？所以我不能在这里使用拆分？）
*   循环`addressList`（见上面的代码）并检查IP地址是否是有效的IP地址
*   验证后添加`ipRange`到主`ipAddress`如果`ipRange`不是`null`（我如何找到所属的主`ipAddress`？`ipRange`）
*   验证后添加`netMaske`到主`ipAddress`（和范围）如果`mainAddress`不是`null`（我如何找到主`ipAddress`所属`netMask`的？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:15:44.617

解析部分可以通过正则表达式完成。就像是：

```
final Pattern p = Pattern.compile(
    "(\\d+\\.\\d+\\.\\d+\\.\\d+)(?:-(\\d+))?(?:/(\\d+))?" );
for(String line : new String [] { "172.16.12.1-20/24",
                                  "172.16.12.1-20", 
                                  "172.16.12.1/24", 
                                  "172.16.12.1" })
{
    Matcher m = p.matcher(line);
    if (m.matches()) {
        String address = m.group(1);
        String rangePart = m.group(2); // is null if there is no range part
        String netmask = m.group(3); // is null if there is no netmask
        System.out.println(address + " - " + rangePart + " - " + netmask);
    }
} 
```

**编辑：**如果您需要处理空格，您可以通过添加来扩充正则表达式`\\s*`，例如：

```
"\\s*(\\d+\\.\\d+\\.\\d+\\.\\d+)(?:\\s*-\\s*(\\d+))?(?:\\s*/\\s*(\\d+))?\\s*" 
```

这样，您就不必为空格而烦恼。

您还可以为 IPv6 地址创建类似的正则表达式。当然会更长，但原理是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T20:15:35.883

好的，我编写了以下代码来解决此任务。代码按预期工作。由于这是我的第一个 java 程序之一，我想知道您是否在这段代码中看到任何问题？：

```
import java.util.*;
import java.lang.System;

import com.google.common.net.InetAddresses;

public class IPCheck{

  public static String[] extractLine(String line){
    String[] temp;
    temp = line.split("\\s+");

    return temp;
  }

  public static boolean hasNetMask(String line){
    boolean result = false;
    if(line.indexOf("/") != -1)
    result = true;

    return result;
  }

  public static boolean hasIPRange(String line){
    boolean result = false;
    if(line.indexOf("-") != -1)
    result = true;

    return result;
  }

  public static String extractNetMask(String line){
    String result = "";
    result = line.substring(line.indexOf("/"));

    return result;
  }

  public static String extractIPRange(String line){
    String result = "";
    result = line.substring(line.indexOf("-"));

    return result;
  }

  public static String chop(String line, String piece){
    String result = "";
    result = line.replace(piece, "");

    return result;
  }

  public static boolean validateIPRange(String ipRange){
    int tmpInt = 0;
    ipRange = chop(ipRange, "-");
    tmpInt = Integer.valueOf(ipRange);
    if(tmpInt > 255)
      return false;
    else
      return true;
  }

  public static void main(String args[]){
    String validIPAddress = "";
    String invalidIPAddress = "";
    String str = "10.1.1.1-300\n192.180.0.1-10/16\n192.168.0.1111";
    String[] addressList;
    String netMask = "";
    String ipRange = "";

    addressList = extractLine(str);
    for(int i=0; i<addressList.length; i++){

    if(hasNetMask(addressList[i]) == true){
      netMask = extractNetMask(addressList[i]);
      addressList[i] = chop(addressList[i], netMask);
    }

    if(hasIPRange(addressList[i]) == true){
      ipRange = extractIPRange(addressList[i]);
      addressList[i] = chop(addressList[i], ipRange);

       if(validateIPRange(ipRange) == false){
        /*if the IPRange is not valid, let's attach the ipRange
        to the current IP-Address to make it invalid*/
        addressList[i] = addressList[i].concat(ipRange);
        System.out.println( addressList[i]);
       }
    }

    if(InetAddresses.isInetAddress(addressList[i]) == true){
      validIPAddress = validIPAddress.concat(addressList[i] + ipRange + netMask);
    } else {
      invalidIPAddress = invalidIPAddress.concat(addressList[i] + ipRange + netMask);
    }
  }
 }
} 
```

# c++ - cpp 文件的 osx coretext 标头，10.8 之前？

> ID：11887206
> 
> 赞同：0
> 
> 时间：2012-08-09T15:51:52.537
> 
> 标签：c++, macos, core-text

看起来在 10.8 之前，CoreText 不是一个单独的框架，而是 Cocoa 的一部分。

我正在移植一些想要使用 CTFontRef 等 CoreText 类型的 C++ 代码。当我

```
#include <CoreText/CoreText.h> 
```

我得到一个预处理器错误“CoreText/CoreText.h”未找到。如果我切换到类似的东西

```
#import <Foundation/Foundation.h> 
```

这适用于 .m 或 .mm，但不适用于 .cpp 文件，因为它包含 Obj-C 代码。

有谁知道在这种情况下使用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:44:29.133

使用这个包含，你应该已经准备好了：

```
#include <ApplicationServices/ApplicationServices.h> 
```

您可能还需要在项目中包含“ApplicationServices”框架。

# css - 属性文本溢出：省略号不起作用

> ID：11887208
> 
> 赞同：-1
> 
> 时间：2012-08-09T15:51:55.623
> 
> 标签：css

我有一张桌子，`<td>`其样式如下。

```
table.tvTable td{
  overflow: hidden;
  text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  white-space: nowrap; // with this line i get one erally wide row
  padding: 3px;
} 
```

单独地，它们是带有`width`(px、% 和 *) 的样式。我也尝试设置整个表格的宽度（不想这样做，因为我希望其中一列利用屏幕上可用的最大宽度）。

但是，没有发生剪裁，更不用说省略了。我在Ch和FF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:16:11.617

这是我如何让它工作的[演示。](http://jsfiddle.net/HLhSw/2/)你确实必须使用`table-layout: fixed`前面提到的。设置 via CSS 的宽度`td`似乎也可以，无需在 HTML 中指定。

请让我知道，如果你有任何问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:01:38.530

不幸的是，您必须使用`table-layout: fixed;`并设置表格的宽度。

# javascript - JavaScript 正则表达式返回引用从单个捕获组（多个组）返回匹配数组

> ID：11887222
> 
> 赞同：5
> 
> 时间：2012-08-09T15:52:33.670
> 
> 标签：javascript, arrays, regex, regex-group, capturing-group

在花了一夜试图找到不可能的答案之后，我相当确定，并且我已经开发了一种解决方法-但是，如果有人知道更好的方法，我很想听听...

我在代码上经历了很多迭代，以下只是一个思路。我相信在某些时候我使用了全局标志，以便 match() 工作，我不记得现在是否有必要。

```
var str = "@abc@def@ghi&jkl";
var regex = /^(?:@([a-z]+))?(?:&([a-z]+))?$/; 
```

在这个简化的代码中，这里的想法是可选组 1，其中有一个未指定的数量，将匹配 @abc、@def 和 @ghi。它只会捕获其中有一个或多个的字母字符。第 2 组是相同的，除了匹配 & 符号。它还应该锚定在字符串的开头和结尾。

我希望能够反向引用两组的所有匹配项，即：

```
result = str.match(regex);
alert(result[1]); //abc,def,ghi
alert(result[1][0]); //abc
alert(result[1][1]); //def
alert(result[1][2]); //ghi
alert(result[2]); //jkl 
```

我的伙伴说这在 .net 中对他来说效果很好，不幸的是我根本无法让它工作 - 只有任何组的最后一个匹配项会在反向引用中返回，如下所示：

（此外，使任一组可选会造成混乱，设置全局标志也是如此）

```
var str = "@abc@def@ghi&jkl";
var regex = /(?:@([a-z]+))(?:&([a-z]+))/;

var result = str.match(regex);

alert(result[1]); //ghi
alert(result[1][0]); //g
alert(result[2]); //jkl 
```

* * *

以下是我得到的解决方案，捕获有问题的整个部分，并自己创建数组：

```
var str = "@abc@def@ghi&jkl";
var regex = /^([@a-z]+)?(?:&([a-z]+))?$/;

var result = regex.exec(str);

alert(result[1]); //@abc@def@ghi
alert(result[2]); //jkl

var result1 = result[1].toString();
result[1] = result1.split('@')

alert(result[1][1]); //abc
alert(result[1][2]); //def
alert(result[1][3]); //ghi
alert(result[2]); //jkl 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:55:04.943

这根本不是`.match()`JavaScript 的工作方式。返回的数组是一个简单字符串的数组。捕获组没有“嵌套”；您只需`(`从左到右计算符号。

第一个字符串（在 index 处`[0]`）始终是整体匹配的字符串。然后是捕获组，`null`每个数组元素一个字符串（或）。

您可以按照您的意愿重新排列结果数组。这只是一个数组。

*编辑*- 哦，你`result[1][0]`是“g”的原因是应用于字符串的数组索引表示法让你得到字符串的各个字符。

# android - 防止活动在手机启动时重新启动？

> ID：11887224
> 
> 赞同：0
> 
> 时间：2012-08-09T15:52:38.907
> 
> 标签：android

如果用户在我的活动处于前台时重新启动他们的手机，则在手机重新启动后，活动会再次自动弹出。我不希望发生这种情况，因为我传递给活动的任何额外数据都没有保存，因此活动没有正确的显示。

显然，活动甚至在我的具有意图过滤器的 BroadcastReceiver 开始之前就`android.intent.action.BOOT_COMPLETED`开始了。

我将如何防止活动在手机启动时自动启动？

**编辑：**我将`android.intent.category.HOME`意图过滤器中的类别用于我的活动，这显然是它在重新启动时启动的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:57:44.257

当`ACTION_SHUTDOWN`设备关闭时，广播应该会消失。我说“应该出去”，因为它假设有一个有序的关闭。如果用户最终按住 POWER 按钮约 10 秒，或者弹出电池，我会认为这`ACTION_SHUTDOWN`不是广播。

要控制组件（例如活动）是否可用，您可以使用`PackageManager`和`setComponentEnabledSetting()`。禁用的组件无法运行并且通常是不可见的（例如，禁用的应用小部件`<receiver>`不会显示在应用小部件选择器中）。

理论上，您可以将这两者结合起来。但是，即使在最好的情况下，我也会假设`ACTION_SHUTDOWN`行为是有时间限制的（所以要快点），并且您需要处理“无序”关闭场景。

# php - preg_split() - 管道字符问题

> ID：11887227
> 
> 赞同：2
> 
> 时间：2012-08-09T15:52:42.563
> 
> 标签：php, regex

我正在尝试拆分格式如下的字符串：

> 值1==值1||值2==值2||..."

在 == 和 || 但我的管道有问题。我可以在 == 处轻松拆分它们，但是当我尝试添加管道时，它要么不起作用，要么在每个字符处拆分。我应该使用什么模式？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:54:11.047

`|`是一个特殊字符，应该用反斜杠转义。`\|+`如果管道的数量是可变的，则用于匹配一个或多个管道并在其上拆分，或者在`\|\|`正则表达式中匹配两个管道。

`preg_split('/\|+/', $your_string)`

**但是**，如果*始终*是两个管道，最好使用普通的旧管道`explode("||" $your_string)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:54:04.347

管道 ( `|`) 在正则表达式中具有特殊含义。逃脱它`\`。

# vb.net-2010 - OnCreateMainForm() Sub 内部 Application.Designer.vb 内部错误

> ID：11887232
> 
> 赞同：4
> 
> 时间：2012-08-09T15:53:04.607
> 
> 标签：vb.net-2010, windows-forms-designer

我无法弄清楚这里的问题是什么。我从头开始项目，去调试，并收到错误：

> System.InvalidOperationException 未处理 Message=创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：对象引用未设置为对象的实例。

我不明白为什么在自动生成的文件中会发生此错误。这是完整的代码：

```
 '------------------------------------------------------------------------------
' <auto-generated>
'     This code was generated by a tool.
'     Runtime Version:4.0.30319.269
'
'     Changes to this file may cause incorrect behavior and will be lost if
'     the code is regenerated.
' </auto-generated>
'------------------------------------------------------------------------------

Option Strict On
Option Explicit On

Namespace My

    'NOTE: This file is auto-generated; do not modify it directly.  To make changes,
    ' or if you encounter build errors in this file, go to the Project Designer
    ' (go to Project Properties or double-click the My Project node in
    ' Solution Explorer), and make changes on the Application tab.
    '
    Partial Friend Class MyApplication

        <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
        Public Sub New()
            MyBase.New(Global.Microsoft.VisualBasic.ApplicationServices.AuthenticationMode.Windows)
            Me.IsSingleInstance = false
            Me.EnableVisualStyles = true
            Me.SaveMySettingsOnExit = true
            Me.ShutDownStyle = Global.Microsoft.VisualBasic.ApplicationServices.ShutdownMode.AfterMainFormCloses
        End Sub

        <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
        Protected Overrides Sub OnCreateMainForm()
            Me.MainForm = Global.AccountAndClientFull.frmMain 'HERE IS WHERE THE ERROR OCCURS
        End Sub
    End Class
End Namespace 
```

错误发生在：

> Me.MainForm = Global.AccountAndClientFull.frmMain

有什么建议么？我无法弄清楚需要在项目属性的应用程序选项卡中进行哪些更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T20:09:52.323

我得到了同样的错误，并意识到这是因为我在表单代码中声明了一个私有默认构造函数。如果您创建了一个构造函数并且没有将其公开，请尝试将其公开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T04:02:20.453

确保你有一个名为**frmMain的****表单类**，注意不是文件名而是**类名**。

 ****也许您已将 Form 文件名重命名为**frmMain.vb**，但在文件的代码中，类的签名仍然不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-03T08:33:58.800

此错误的另一个可能原因是初始化期间窗体控件的事件处理程序中是否发生异常。表单的创建失败，因此引发了异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T09:49:24.393

这种症状的另一个可能原因，也是一个特别模糊的原因：

我在 Designer 的子窗体中添加了两个 LineShape 控件，导致 Me.MainForm 错误。

（工具箱/Visual Basic PowerPacks/LineShape）。

文档中的这一点可能会提供一个线索：

“在运行时创建 LineShape 控件时，还必须创建一个 ShapeContainer 并将 LineShape 的 Parent 属性设置为 ShapeContainer。”

我使用设计器添加了 LineShapes，所以它应该自动创建了 ShapeContainer，但这可能失败了，可能是因为我已经将它们添加到了一个容器中，已经有好几层了。我删除了 LineShapes 来解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T11:54:11.090

如果您有任何直接在导致错误的类下的标准，它也会在此错误上中断。
例如：

```
Public Class Form1
    Dim FILE_NAME As String = "C:\Folder\File.txt" '//if this file does not exist
    Dim objReader As New System.IO.StreamReader(FILE_NAME) 
```

最后一行将导致受保护的覆盖错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T09:29:03.463

从字符串回车时，我不喜欢 VB.NET 功能，所以在下面添加了这段代码`Public Class Form1`，希望能消除那个烦人的代码：

```
Dim origString As String
Dim newString As String = origString.Replace(vbCr, "").Replace(vbLf, "") 
```

此代码导致了同样的问题。所以可能的解决方案是评论或删除它：

```
'Dim origString As String 'From Multiline Textbox'
'Dim newString As String = origString.Replace(vbCr, "").Replace(vbLf, "") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-18T17:11:12.240

我遇到了同样的问题...我删除了表单中的所有工具，然后它运行没有任何问题...然后我发现是网络浏览器控件引起了我的问题...我将其删除并添加了再次，程序运行没有任何问题...尝试逐个删除控件并检查导致问题的控件...然后删除特定控件并重新添加以使其正常工作...当您复制您的从一台电脑到另一台电脑的解决方案...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-13T14:03:41.353

```
 Public Sub New()
        InitializeComponent()
 End Sub 
```

*   只需将此代码添加到您的表格 frmMain

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-28T00:34:13.940

当我将以下内容添加到我的表单时，我实际上遇到了这个错误。

```
 Private Sub New()
        InitializeComponent()
    End Sub 
```

很奇怪！****

# ios - 在 iOS 上将 FBConnect SDK 升级到 FacebookSDK 3.0 时缺少 FBRequestDelegate

> ID：11887234
> 
> 赞同：4
> 
> 时间：2012-08-09T15:53:19.497
> 
> 标签：ios, facebook, sdk, facebook-ios-sdk

尝试将使用 FBConnect 的现有应用程序升级到 FacebookSDK 框架 3.0。xcode 编译器无法解析 FBRequestDelegate。在 FBRequest.h 中定义了一个前向引用 @protocol FBRequestDelegate，但在任何地方都没有该协议的匹配定义/实现。还有其他人有这个问题吗？文档表明它应该在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:10:31.897

取自 FBRequest.h

的实例`FBRequest`表示与 Facebook 连接的参数和设置。创建`FBRequest`对象后，它可用于通过该对象建立与 Facebook 的连接。创建该对象是为了管理单个连接。

要取消连接，请使用类中的实例方法。

您需要使用新`FBRequestConnection`类来执行请求。他们使用一个实例`FBRequest`和一个完成处理程序：

```
- (void)addRequest:(FBRequest*)request completionHandler:(FBRequestHandler)handler; 
```

# ajax - MVC 4 - 使用 Ajax 调用通过 JSON 将模型数据发送到嵌套部分

> ID：11887236
> 
> 赞同：0
> 
> 时间：2012-08-09T15:53:29.970
> 
> 标签：ajax, json, asp.net-mvc-4, partial-views

我有一个带有部分视图的 cshtml 页面。我在同一个视图中有一个 ajax 调用，基于单独的 url 检索 json 数据。我需要将 json 数据传入部分。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:01:45.990

您可以有一个控制器操作获取视图模型并将此视图模型传递给局部视图：

```
public ActionResult SomeAction(MyViewModel model)
{
    return View(model);
} 
```

然后，一旦您检索到 JSON 数据，您就可以调用传递模型的此控制器操作：

```
// TODO: The JSON data could come from anywhere
var jsonData = { foo: 'bar' };
$.ajax({
    url: '@Url.Action("SomeAction")',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify(jsonData),
    success: function(result) {
        // Now update the partial:
        $('#someId').html(result);
    }    
}); 
```

# jquery - jQuery UI DatePicker 仅选择日期和月份

> ID：11887238
> 
> 赞同：0
> 
> 时间：2012-08-09T15:53:35.517
> 
> 标签：jquery, datepicker

> **可能重复：**
> [Jquery datepicker - 只有日期和月份](https://stackoverflow.com/questions/6799092/jquery-datepicker-only-day-and-month)

我在我的新网站上使用 Jquery datepicker，但我只需要选择日期和月份......

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:56:06.450

[http://jqueryui.com/demos/datepicker/#option-dateFormat](http://jqueryui.com/demos/datepicker/#option-dateFormat)

```
$( ".selector" ).datepicker({ dateFormat: "mm-dd" }); 
```

# jquery - 如何找到 jQuery 对特定函数的实现

> ID：11887246
> 
> 赞同：2
> 
> 时间：2012-08-09T15:54:00.127
> 
> 标签：jquery, appendto

我正在寻找 jQuery 的 .appendTo 函数实现。
我尝试在以下位置查找函数：[http](http://code.jquery.com/jquery-latest.js) ://code.jquery.com/jquery-latest.js ，但我只能找到 2 次提及它，并且两者都不包含定义。

我可以在哪里找到它的任何想法？

谢谢你，尼夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:57:43.817

It's actually quite cool: `appendTo` is dynamically defined relative to `append`. That's what is going on in these lines:

```
jQuery.each({
    appendTo: "append",
    prependTo: "prepend",
    insertBefore: "before",
    insertAfter: "after",
    replaceAll: "replaceWith"
}, function( name, original ) {
    jQuery.fn[ name ] = function( selector ) {
        var ret = [],
            insert = jQuery( selector ),
            parent = this.length === 1 && this[0].parentNode;
... 
```

Which makes sense, as the two functions are almost the same in functionality, just reversed in which effects which.

Should you include that file, then pass the function `$('html').appendTo` and analyze what it references, you get this:

```
function ( selector ) {
    var ret = [],
        insert = jQuery( selector ),
        parent = this.length === 1 && this[0].parentNode;
... 
```

Do you recognize that code? If you continue down the first code block I mentioned, you'll see they're almost identical. The first block dynamically generates the code for `appendTo`, as well as a few others in the same vein.

# java - 当我添加两个 AuthorFilter 时 Gitective AndCommitFilter 不起作用

> ID：11887254
> 
> 赞同：2
> 
> 时间：2012-08-09T15:54:29.003
> 
> 标签：java, jgit

我在 jGit 中使用带有 gitective 的 RevFilters。我正在寻找列出特定用户的提交，而 AuthorFilter 工作得很好。但是，现在我想做的是获得一个或多个用户的提交。

当我在我的仓库上执行 git log 命令时，我有

> joan@jomaora:~/testGit/testMockito$ git log commit b5a49a83f052f632d78a09238056d4df8ebffb59 作者：Marc Czeck 日期：2012 年 8 月 7 日星期二 17:03:44 +0200
> 
> ```
> Modifying 1. 
> ```
> 
> 提交 8d8dafd5242dbddf34a92ef39661b24167e25b0c 作者：Joan Ortega-Ardila 日期：2012 年 8 月 7 日星期二 17:01:37 +0200
> 
> ```
> Starting repo. 
> ```

我有这两个用户的提交。当我评论我添加的 AuthorFilter 之一时，我的代码有效。AndCommitFilter 不接受列出这个吗？这是我的代码：

```
FileRepositoryBuilder builder = new FileRepositoryBuilder();
Repository repository = builder.setGitDir(new File("/home/joan/testGit/testMockito/.git"))
    .readEnvironment()
    .findGitDir()
    .build();

PersonIdent p1 = new PersonIdent("Joan Ortega-Ardila", "jmortega@gmail.com");
PersonIdent p2 = new PersonIdent("Marc Czeck", "marc.czezk@gmail.com");

CommitListFilter list = new CommitListFilter();
AndCommitFilter filters = new AndCommitFilter();

filters.add(new AuthorFilter( p1 ));
filters.add(new AuthorFilter( p2 ));
filters.add(list);

CommitFinder finder = new CommitFinder(repository);
finder.setFilter(filters).find();

for(RevCommit rev : list.getCommits()){
    System.out.println(rev.getName());
    System.out.println(rev.getAuthorIdent().getName());
    System.out.println(rev.getShortMessage());
} 
```

谢谢

# asp.net - ASP 列表视图。如何使用 CSS 隐藏表格行

> ID：11887257
> 
> 赞同：0
> 
> 时间：2012-08-09T15:54:36.217
> 
> 标签：asp.net, css, listview

如果我对我的 ListView 使用以下标记，它将忽略 div 上的 css 属性。什么是我不明白？

```
<ItemTemplate>
    <tr>
        <td><%# Eval("RowNumber")%></td>
        <td><%# Eval("Desc")%></td>
    </tr>
    <div style="display: none; visibility: hidden">
        <tr>
            <td><%# Eval("RowNumber")%></td>
            <td><%# Eval("Desc")%></td>
        </tr>
    </div>
</ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:59:11.657

为什么不这样做：

```
<ItemTemplate>
    <tr>
        <td><%# Eval("RowNumber")%></td>
        <td><%# Eval("Desc")%></td>
    </tr>
    <tr style="display: none;">
        <td><%# Eval("RowNumber")%></td>
        <td><%# Eval("Desc")%></td>
    </tr>
</ItemTemplate>
</asp:ListView> 
```

# android - 相机在摩托罗拉 Razr 上崩溃 - 内存不足

> ID：11887260
> 
> 赞同：1
> 
> 时间：2012-08-09T15:54:41.097
> 
> 标签：android, android-camera, out-of-memory, motorola-droid

我的应用程序要求我拍照，而我唯一遇到问题的设备是摩托罗拉 Razr。我已经在 Nexus One、Droid X、Droid 2、Sensation 和其他一些设备上进行了尝试。这是我正在使用的代码：

```
public class CameraView extends Activity {
    private static final String TAG = "CameraView";

  private SurfaceView preview=null;
  private SurfaceHolder previewHolder=null;
  public Camera camera=null;
  private boolean inPreview=false;
  private ImageView takePicture;

  private Uri uriTarget;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cameraview);

    takePicture = (ImageView)findViewById(R.id.take_picture);

    preview=(SurfaceView)findViewById(R.id.preview);
    previewHolder=preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder
        .setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    if (savedInstanceState != null)
    {
        uriTarget = savedInstanceState.getParcelable("uriTarget");
    }

    preview.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {
            takePicture.setEnabled(false);
            camera.autoFocus(myAutoFocusCallback);

        }

    });

    takePicture.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {

            //camera.takePicture(null, null, photoCallback);
            camera.takePicture(myShutterCallback, 
                    myPictureCallback_RAW, myPictureCallback_JPG);
            inPreview=false;    
        }

    });

  }

  @Override
  public void onResume() {
    super.onResume();
    try{
        if (camera==null) {
          camera=Camera.open();
          camera.setDisplayOrientation(90);
          Camera.Parameters params = camera.getParameters(); 
          params.set("rotation", 90); 
          params.setJpegQuality(60);
          //params.setPictureSize(32, 32);
          camera.setParameters(params);

        }
    }catch (Exception e){
        finish();
    }
  }

  @Override
  public void onPause() {
    if (inPreview) {
      camera.stopPreview();
    }
    if(camera != null)
        camera.release();
    camera=null;
    inPreview=false;

    super.onPause();
  }

  SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
      try {
        camera.setPreviewDisplay(previewHolder);
      }
      catch (Throwable t) {
        Log.e("PictureDemo-surfaceCallback",
            "Exception in setPreviewDisplay()", t);
        Toast.makeText(CameraView.this, t.getMessage(),
            Toast.LENGTH_LONG).show();
      }
    }

    public void surfaceChanged(SurfaceHolder holder,
        int format, int width, int height) {
        Camera.Parameters parameters=camera.getParameters();
        parameters.setPictureFormat(PixelFormat.JPEG);
        parameters.setJpegQuality(60);
        parameters.set("rotation", 90);
        camera.setParameters(parameters);
        camera.startPreview();

        inPreview=true;
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
      // no-op
    }
  };

  ShutterCallback myShutterCallback = new ShutterCallback(){

        @Override
        public void onShutter() {

        }};

  PictureCallback myPictureCallback_RAW = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {

        }};

    PictureCallback myPictureCallback_JPG = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] data, Camera camera1) {

            Constants.car_image = BitmapFactory.decodeByteArray(data, 0, data.length);  
            Constants.showImage = true;

            FileOutputStream outStream = null;
            try {

                File esd = Environment.getExternalStorageDirectory();

                File newDirectory = new File(esd.getAbsolutePath() + "/DCIM/statefair/");
                if(!newDirectory.exists())
                    newDirectory.mkdirs();
                outStream = new FileOutputStream(esd.getAbsolutePath() + String.format(
                        "/DCIM/statefair/%d.jpg", System.currentTimeMillis()));

                outStream.write(data);
                outStream.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();

            } catch (IOException e) {
                e.printStackTrace();

                  System.out.println("IO exception");
            } finally {
                  System.out.println("Finally");
                  camera.release();
            }

            finish();

        }
        };
        AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback(){

           @Override
           public void onAutoFocus(boolean arg0, Camera arg1) {
            // TODO Auto-generated method stub
            takePicture.setEnabled(true);
            }
         };
       protected void onSaveInstanceState(Bundle outState)
        {
            outState.putParcelable("uriTarget", uriTarget);
        }
} 
```

我在这一行收到 outOfMemory 错误：

```
Constants.car_image = BitmapFactory.decodeByteArray(data, 0, data.length); 
```

即使我将 JPEG 质量设置为 10。还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:19:35.867

检查这个[BitmapFactory.Options](http://developer.android.com/intl/ru/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)

全尺寸图像占用大量内存，您应该重新调整大小。只是为了快速测试，试试这个：

```
Options opts = new Options();
opts.inSampleSize = 4;        
Constants.car_image = BitmapFactory.decodeByteArray(data, 0, data.length, opts); 
```

# android - 未经授权的调用者错误

> ID：11887265
> 
> 赞同：1
> 
> 时间：2012-08-09T15:55:02.030
> 
> 标签：android, root, vpn, avd

我被困在编写一些使用调用 IConnectivityManager.startLegacyVpn 的反射的代码

我得到的错误是 java.lang.SecurityException: Unauthorized Caller

查看android源代码，我看到这是让我挂断的代码：

if (Binder.getCallingUid() != Process.SYSTEM_UID) { 引发上述异常 }

我的问题是，如果我根我的 AVD 并在系统/应用程序中安装我的应用程序，这足以解决这个错误吗？

如果是这样，有关如何执行此操作的任何提示（每次我尝试将我的 apk 移动到系统/应用程序文件夹时，当我单击应用程序图标时，它都会说应用程序未安装。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:35:34.753

我有同样的问题，在 android 4.01 开源之后，我看到了这样的东西：

```
public synchronized LegacyVpnInfo getLegacyVpnInfo() {
    // Only system user can call this method.

    if (Binder.getCallingUid() != Process.SYSTEM_UID) {
        throw new SecurityException("Unauthorized Caller");
    }
    return (mLegacyVpnRunner == null) ? null : mLegacyVpnRunner.getInfo();
} 
```

或者，

```
// Only system user can revoke a package.
if (Binder.getCallingUid() != Process.SYSTEM_UID) {
    throw new SecurityException("Unauthorized Caller");
} 
```

或者，

```
public void protect(ParcelFileDescriptor socket, String interfaze) throws Exception {
    PackageManager pm = mContext.getPackageManager();

    ApplicationInfo app = pm.getApplicationInfo(mPackage, 0);

    if (Binder.getCallingUid() != app.uid) {
        throw new SecurityException("Unauthorized Caller");
    }

    jniProtect(socket.getFd(), interfaze);
} 
```

但是，上面的这些代码块属于 com.android.server.connectivity.Vpn

（Vpn 类），未在 interface 中定义`IConnectivityManager`。

我也在`startLegacyVpnInfo()`功能中找到，但我看不到任何涉及异常的东西

“未经授权的调用者”，所以我想知道为什么`startLegacyVpnInfo()`函数会抛出这个异常？

有什么解决方案吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T08:01:41.780

如果您包含`android: sharedUserId="android.uid.system"`在清单标记中（而不仅仅是清单），那么这应该将应用程序作为系统运行。现在应该可以让您运行代码了。

至于推送到/system/app，你需要运行`adb root`后跟`adb remount`. 现在，这将让您推送到 /system/app。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:46:28.903

我正在尝试打同样的电话。到目前为止，我可以确认 root 设备并将 apk 复制到 /system/app 不起作用，它不会在系统 uid 下启动。

此外，这不起作用：

```
Field uidField = Process.class.getDeclaredField("SYSTEM_UID");
uidField.setAccessible(true);
uidField.set(null, Process.myUid()); 
```

这些调用成功，但它们似乎不会影响 SYSTEM_UID 字段，该字段可能在编译时已优化。

# html - 文本溢出分区

> ID：11887267
> 
> 赞同：0
> 
> 时间：2012-08-09T15:55:12.053
> 
> 标签：html, css, web

我正在尝试构建一个简单的 div，其中包含一段文本。

```
 <div id="bottom-text">
        <span>ONE STOP</span>
    </div> 
```

这是我对“#bottom-text”有效的简单 CSS 样式：

```
 #bottom-text{
        font-weight:700;
        font-size:50px;
        text-align:center;
        margin:auto;
        position:relative;
        padding-top:25px;
        height:65px;
        width:auto;
    } 
```

出于某种原因，文本“ONE STOP”部分显示在#bottom-text 之外。（只有所有字母的顶部......）我尝试使用填充来修复它，但文本随后部分溢出到填充区域！

谁能帮我弄清楚为什么这个文本显示在它应该包含在其中的 div 之外？（我一直在测试 Chrome 和 Firefox）

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:02:45.470

```
.largefont {
   color: #0066FF;
   font-family:arial;
   font-size: 6px;
   display: inline;
} 

<span class="largefont">block level span</span> 
```

为 the 分配一个类`span`并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:01:05.850

看看你的代码，`#bottom-text`是 65px 高度，`font-size`是 50px，`padding-top`是 25px

65-(50+25) = -10 所以你只会看到文本的前 10 个像素。

设置`padding-top`为较小的数量，并以正确的方式进行播放

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:59:43.637

检查你的线高。我能想到的唯一一件事是，您可能在其他地方添加了一些样式。尝试添加“line-height: 1;” 到您现有的#bottom-text CSS，以便您的文本实际上是 50px 高。或者，如果您希望文本在#bottom-text 中垂直居中，请使您的 line-height 与 #bottom-text (65px) 的高度匹配。

# wpf - 在数据绑定更新之前触发事件 - 我如何等待更新？

> ID：11887272
> 
> 赞同：2
> 
> 时间：2012-08-09T15:55:22.810
> 
> 标签：wpf, silverlight, data-binding, microsoft-metro

我目前在编写 Metro 时遇到了这个问题，但我确信它适用于 WPF、Silverlight 甚至可能是 WinForms。

我有一个数据绑定文本框和一个附加到文本框的 LostFocus 事件的方法。当它失去焦点时，我希望后面的代码触发保存功能以保留数据。问题是 LostFocus 事件在通过 TwoWay 数据绑定从 GUI 更新业务对象之前触发。

处理这个问题的最佳方法是什么？有什么方法可以强制从 LostFocus 方法更新数据绑定（可能是特定于平台的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:05:28.540

听起来您想做一些业务逻辑，而不是让 GUI 更新文本框。我会将 设置`Textbox`为 only `BindingMode.OneWay`，以便在更改业务对象时正确更新文本框。

然后在 Lostfocus 事件中（同样是 wpf，但我想你会明白的）：

```
private void EditBoxLostFocus( object sender, KeyboardFocusChangedEventArgs e )
{
   var textbox = sender as TextBox;

   //update your business object w/ textbox.Text value
   //other business logic
} 
```

这样，您就可以完全控制对象何时更新，并且可以应用您的业务规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:22:48.683

在 TextBox 绑定上设置 UpdateSourceTrigger = PropertyChanged。 [http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger(v=vs.100).aspx)

# css - Plone TinyMCE - 创建自定义 CSS

> ID：11887277
> 
> 赞同：1
> 
> 时间：2012-08-09T15:55:35.097
> 
> 标签：css, tinymce, plone

我还处于新手模式。特别阅读“Plone 4 用户指南”的第 213 页 选择 WYSIWYG 编辑器区域中使用的 CSS。有谁知道 TinyMCE 设置设置的此选项的教程/操作方法，因为我仍在寻找通过在可编辑区域内的其他小部件中创建自定义 CSS 来添加线条小部件。TIA

# php - 从 php 脚本设置 cron 作业以运行另一个 php 脚本？

> ID：11887279
> 
> 赞同：1
> 
> 时间：2012-08-09T15:55:44.703
> 
> 标签：php, linux, cron, crontab

是否可以在 LAMP 服务器上的 PHP 脚本中设置 cron 作业以运行另一个 PHP 脚本？我是一个有 cron 工作的新手，但我确实非常了解 php。我是否必须从 PHP 访问 shell 才能设置 cron 作业？例如，如果我想在从 call.php 调用 execute.php 后 5 分钟内自动执行它，我将如何编写代码？

**编辑**：为了清楚起见，我只想在它被调用后 5 分钟运行一次 execute.php，而不是让它每天重复或类似的事情。因此，在 cron 作业执行后，该 cron 作业应该被丢弃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:04:33.757

Cron 的工作方式并不完全一样，但您可以设置一些东西来创建您想要的功能。

我会首先设置一个 cron 条目来每分钟执行一次 execute.php。

然后，当 call.php 运行时，call.php 在数据库表或平面文件中创建一个条目，其中包含应调用 execute.php 的时间。

当 cron 条目运行时，execute 检查数据库表或平面文件以查看它是否应该运行当时文件中的代码，如果是，则运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:04:35.803

在execute.php开头使用sleep

```
sleep(5*60);
//Rest of the code 
```

它应该像这样调用：

```
require_once("execute.php"); 
```

但是，call.php 5 分钟内不会发送任何响应

# code-coverage - NCOVER 没有 NUNIT 测试用例

> ID：11887283
> 
> 赞同：0
> 
> 时间：2012-08-09T15:56:03.277
> 
> 标签：code-coverage, manual, ncover

我知道 NCOVER 是一个很棒的工具来检测 .dll 和运行 Nunit 测试用例。是否可以使用 NCOVER 检测 .dll 并运行手动测试用例？

如果是怎么办？如果没有，那么是否有 .NET 工具可以提供这样的规定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:13:56.853

是的，您可以在手动测试的代码上运行 NCover，就像在单元测试或其他自动化代码上一样。您实际上不必运行单独的检测步骤。仪器在后台自动完成。

在 NCover 4 中，您只需设置一个监控您的应用程序的项目，当它启动时，NCover 将自动开始收集覆盖率。

# ruby - 来自 svn 存储库的构建器

> ID：11887289
> 
> 赞同：0
> 
> 时间：2012-08-09T15:56:22.933
> 
> 标签：ruby, svn, continuous-integration, jruby, buildr

我想在我的 svn 存储库上运行 buildr - 使用用户名和密码从 subversion 存储库中的 \src\main\java 构建文件并将其保存到我光盘上的另一个位置。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:17:57.360

如果我正确理解了您的问题，那么您正在尝试设置一个连续的构建系统。检查源代码是您的 CI 系统的责任。它会轮询您的 svn、git 或任何用于更改的 cvs，然后在您提供的配置上构建它。

免费的构建服务器是 jenkins（又名 hudson）。如果你想要一个托管解决方案，你可以选择 travis-ci（它是免费的）。或者像阿特拉斯竹这样昂贵的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:50:58.000

您将不得不编写一个 Ruby 构建脚本 - 当您执行该脚本时：

1.  查看源代码
2.  做“建设者”
3.  提交构建的文件

[http://www.markdeepwell.com/2010/06/ruby-subversion-bindings/](http://www.markdeepwell.com/2010/06/ruby-subversion-bindings/) http://blog.carlossanchez.eu/2009/08/18/using-subversion-ruby-bindings/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:19:19.900

最简单的方法是运行外部 svn 命令

```
task :checkout do
    system 'svn checkout ..'
end 
```

# python - 如何在python中添加回车？

> ID：11887291
> 
> 赞同：3
> 
> 时间：2012-08-09T15:56:32.767
> 
> 标签：python, jinja2

我有一个简单的例子：

```
test = """test
dsdssd
dsdssd
"""

def html_doc(args):
    return Environment().from_string(test).render(args)

print html_doc({ }) 
```

如何在每个字符串的末尾添加“回车”（\r）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T15:58:59.207

```
test = str.replace(test, '\n', '\r\n') 
```

**EDIT:** Python [automatically tries to take care of newlines](http://docs.python.org/whatsnew/2.3.html#pep-278-universal-newline-support) for reading and writing files, but I assume because the question is tagged as jinja2 that this string isn't being written to a file.

# php - 使用 PHP PDO/MySQL 连接数据库的安全方式？

> ID：11887292
> 
> 赞同：1
> 
> 时间：2012-08-09T15:56:36.797
> 
> 标签：php, mysql, database, pdo

我目前已从各种教程和 PHP 手册中创建了此代码（将个人设置更改为 123）

```
$username = "123"; 
$password = "123"; 
$host = "localhost"; 
$dbname = "123"; 

try {
$dbh = new PDO('mysql:host=localhost;dbname=123', $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
echo "Connected";

}
catch(PDOException $e) {
    echo "I'm sorry Charlie, I'm afraid i cant do that.";
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
    $dbh = null;
} 
```

我只是想知道这是否是连接数据库的最佳/最安全的方式？我看到人们使用类以及私有和公共功能的其他示例？我是 PDO 的新手，下一步是插入、更新和删除数据。我在使用 mysql 之前已经构建了这个，但认为最好对 PDO 有一个全面的了解。任何提示、提示或建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:00:50.617

这是安全的，但是在插入未引用的数据时可能会出现主要问题（尽管可以使用 PDO 来执行此操作）。

我建议您使用另一个数据库层 (ORM)，例如[Zend_Db](http://framework.zend.com/manual/fr/zend.db.html)或[Doctrine](http://www.doctrine-project.org/)，这将使您的生活更轻松，您的开发更安全，因为它们为您处理了一些艰巨的工作。

# c++ - 使用 C++ 从 OSX 中的 HIDManager 获取鼠标事件

> ID：11887304
> 
> 赞同：7
> 
> 时间：2012-08-09T15:57:18.590
> 
> 标签：c++, macos, hid

我正在将游戏从 pc 移植到 osx，但我遇到了输入事件。主游戏窗口是一个与 C++ 后端交互的可可应用程序。pc 代码使用 DirectInput 和 windows 消息来生成游戏可以理解的键盘和鼠标事件。

当我第一次启动端口时，我用 Carbon 事件处理替换了 windows 消息，但后来发现 Cocoa 应用程序不会触发 carbon 事件。我做了更多的阅读，发现了 HIDManager，它似乎可以做我想做的事情，并且可以从 c++ 访问。使用此处的帖子中的信息[使用 IOHIDManager 获取修饰键事件](https://stackoverflow.com/questions/7190852/using-iohidmanager-to-get-modifier-key-events)我设法使键盘输入正常工作，但到目前为止还无法扩展示例代码以生成鼠标事件。代码如下：

```
 void myHIDCallback(void* context, IOReturn result, void* sender, IOHIDValueRef value)
{
    IOHIDElementRef elem = IOHIDValueGetElement(value);
    if (IOHIDElementGetUsagePage(elem) == 0x07)
    {

        // Keyboard events
        card32 scancode = IOHIDElementGetUsage(elem);
        if (scancode >= 4 && scancode <= 231)
        {
            long pressed = IOHIDValueGetIntegerValue(value);

            KEY_EVENT_DETAILS details = { KEY_EVENT_NONE, NUM_KEYS };

            for (card32 n=0; n<NUM_KEYS; ++n)
            {
                if (n_direct_input_mappings[n].direct_input_key == scancode)
                {
                    details.key_type = n_direct_input_mappings[n].key;
                    break;
                }
            }

            switch (pressed)
            {
                case 0:
                    details.event_type = KEY_EVENT_KEY_DOWN;
                    break;
                case 1:
                    details.event_type = KEY_EVENT_KEY_UP;
                    break;    
            } 

            sApplication->handle_key_event(details);
        }
    }
    else                                                                                                                                            
    if (IOHIDElementGetUsagePage(elem) == 0x02)
    {
        // Mouse events
        card32 usage = IOHIDElementGetUsage(elem);
        long pressed = IOHIDValueGetIntegerValue(value);

    }
    else
    {
    }
}

CFMutableDictionaryRef myCreateDeviceMatchingDictionary(UInt32 usagePage, UInt32 usage)
{
    CFMutableDictionaryRef ret = CFDictionaryCreateMutable(kCFAllocatorDefault, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    if (ret)
    {
        CFNumberRef pageNumberRef = CFNumberCreate(kCFAllocatorDefault, kCFNumberIntType, &usagePage);
        if (pageNumberRef)
        {
            CFDictionarySetValue(ret, CFSTR(kIOHIDDeviceUsagePageKey), pageNumberRef);
            CFRelease(pageNumberRef);

            CFNumberRef usageNumberRef = CFNumberCreate(kCFAllocatorDefault, kCFNumberIntType, &usage);
            if (usageNumberRef)
            {
                CFDictionarySetValue(ret, CFSTR(kIOHIDDeviceUsageKey), usageNumberRef);
                CFRelease(usageNumberRef);

                return ret;

            }                
        }
        CFRelease(ret);
    }
    return NULL;
}

bool acquire_hardware_controllers(CA::Application& app, CAWindow& window_handle)
{        
    sApplication = &app;

    // Setup the keyboard event handler
    sHIDManager = IOHIDManagerCreate(kCFAllocatorDefault, kIOHIDOptionsTypeNone);
    IOHIDManagerOpen(sHIDManager, kIOHIDOptionsTypeNone);

    CFMutableDictionaryRef mouse    = myCreateDeviceMatchingDictionary(0x01, 2);
    CFMutableDictionaryRef keyboard = myCreateDeviceMatchingDictionary(0x01, 6);
    CFMutableDictionaryRef keypad   = myCreateDeviceMatchingDictionary(0x01, 7);

    CFMutableDictionaryRef matchesList[] = {
        keyboard,
        keypad,
        mouse
    };

    CFArrayRef matches = CFArrayCreate(kCFAllocatorDefault, (const void**)matchesList, 3, NULL);
    IOHIDManagerSetDeviceMatchingMultiple(sHIDManager, matches);
    IOHIDManagerRegisterInputValueCallback(sHIDManager, myHIDCallback, NULL);
    IOHIDManagerScheduleWithRunLoop(sHIDManager, CFRunLoopGetMain(), kCFRunLoopDefaultMode);

} 
```

如果有人可以帮助我，那就太好了。如果我不能让它工作，那么我想我可以转到 Cocoa 事件处理，但是 pc 代码也有一些我希望实现的键盘和鼠标轮询，我不确定 Cocoa 是否支持轮询键盘状态 - 虽然我很乐意得到纠正。

TIA。

# php - PHP设置cookie生命周期

> ID：11887306
> 
> 赞同：5
> 
> 时间：2012-08-09T15:57:25.150
> 
> 标签：php, session, cookies

我有这个功能来启动一个安全会话：

```
function sec_session_start() {
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = false; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id. 

    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"],     $cookieParams["domain"], $secure, $httponly); 
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one.     
} 
```

当用户离开我的应用程序或关闭浏览器时，如何将我的 cookie 设置为过期？基本上，每次用户访问我的应用程序时，他们都需要再次登录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T16:00:12.730

的生命周期`0`（通常是会话 cookie 的默认值）完全符合您的描述。见[http://us3.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime](http://us3.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

# c - 如何正确释放指针

> ID：11887314
> 
> 赞同：0
> 
> 时间：2012-08-09T15:57:37.303
> 
> 标签：c, function, pointers

这是我编写的一个函数：

```
uint32_t file_list(char *path, char ***ls){
    DIR *dp;
  //uint32_t i;
  struct stat fileStat;
  struct dirent *ep = NULL;
  uint32_t len, count = 0;
  int file = 0;
  *ls = NULL;
  dp = opendir (path);
  if(dp == NULL){
    fprintf(stderr, "no dir: %s\n", path);
    exit(1);
  }

  ep = readdir(dp);
  while(NULL != ep){
    count++;
    ep = readdir(dp);
  }
  rewinddir(dp);

  *ls = calloc(count, sizeof(char *));
  count = 0;
  ep = readdir(dp);
  while(ep != NULL){
    if((file = open(ep->d_name, O_RDONLY)) < 0){
      perror("apertura file");
      exit(1);
    }
    if(fstat(file, &fileStat) != 0){
      perror("filestat");
      free(*ls);
      close(file);
      exit(EXIT_FAILURE);
    }
    close(file);
    if(S_ISDIR(fileStat.st_mode)){
      len = strlen(ep->d_name);
      (*ls)[count] = malloc(len+5); /* lunghezza stringa + "DIR \n" */
      strcpy((*ls)[count], "DIR "); /* copio DIR */
      strcat((*ls)[count++], ep->d_name); /* concateno la stringa DIR con il nome della dir */
      ep = readdir(dp);
    }
    else{
      (*ls)[count++] = strdup(ep->d_name);
      ep = readdir(dp);
    }
  }
  /*for(i=0; i<count; i++){
    free((*ls)[count]);
  }*/
  (void)closedir(dp);
  return count;
} 
```

进入我拥有的主程序`char **files`，然后我得到计数​​的部分`count = file_list("./", &files);`
是我的问题是什么？
每个人都知道**它们（指针）可能引用的动态分配的内存**必须被释放，但如果我释放指针*（使用 for 循环）*然后进入主程序，我在文件列表期间*出现意外行为**（重复的文件名，没有文件名等）*。
实际上，如果我不释放指针，所有指针都可以正常工作。
所以我的问题是：如何释放这些指针？
提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:28:35.727

> 所有人都知道必须释放指针，但如果我释放指针（使用 for 循环）然后进入主程序，我在文件列表期间会出现意外行为（重复文件名、无文件名等）。

你的问题是你在同一个函数中分配和释放，这使得你的函数基本上没用（如果我理解正确的话）。如果你在同一个函数中释放，在它返回之后（即：在“主程序”中），你最终会访问已经释放给操作系统的内存段，这是未定义的行为。

您需要两个函数，一个用于分配（上面的一个），一个用于在完成后释放它，例如：

```
char** files;
uint32_t count = file_list("./", &files);
// do something with files here
file_list_free(&files, count); 
```

请记住，您的自由函数需要知道`count`以防止缓冲区溢出。

您的代码还有其他问题（例如：不检查 的返回值`calloc`等），但是在这里涵盖所有问题会太长（并且不一定与您的实际问题相关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:16:33.417

For starters, your ls parameter is a `char***`, so if that's what you were going for, you need to have an inner loop to free up all of the inner pointers (`**ls`) before freeing up each of the other ones (`*ls`). If you only want double indirection on `ls`, then get rid of one of the *s in your parameter declaration.

(BTW, you needn't use array notation in your loop to free up the pointers (or anywhere else that you access the allocated elements in `ls`). `free(*(ls + count));` is usually the more accepted idiom. Pointer arithmetic works regardless of what the data type is (other than `void`), because the compiler takes that into account.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:28:52.997

您必须定义一个额外的函数，以便调用者在使用完数据后释放数据：

```
void free_file_list(char ***ls, int count) {
    for(int i=0; i<count; i++){
        free((*ls)[i]);
    }
    free(*ls);
} 
```

然后，您的文档必须说明每个调用`file_list`必须与调用匹配`free_file_list`。

不过，我会存储`count`在这样的结构中：

```
struct {
    char ***ls;
    int count;
} FILE_LIST; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:15:41.387

使用完指针后，释放主程序中的指针。

You need to free `*ls` as well (again, after you've finished with it).

# css - How to scale iframe contents on iPad

> ID：11887315
> 
> 赞同：2
> 
> 时间：2012-08-09T15:57:37.693
> 
> 标签：css, iframe, safari

I have successfully implemented the CSS to scale across browsers as previously shown (with add-ons and edits) in this thread:

[How can I scale the content of an iframe?](https://stackoverflow.com/questions/166160/how-can-i-scale-the-content-of-an-iframe)

But now I find that it does not work in Safari on an iPad. Can anyone shed some light here? The working code I have is at [http://gfx.com/example](http://gfx.com/example)

Here is the current CSS...

```
#framewrap { width: 238px; height: 303px; padding: 0; overflow: hidden; }
#myframe { width: 990px; height: 1260px; overflow: hidden; z-index:10; }
#myframe {
    -ms-zoom: 0.24;
    -moz-transform: scale(0.24);
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.24);
    -o-transform-origin: 0 0;
    -webkit-transform: scale(0.24);
    -webkit-transform-origin: 0 0;
} 
```

The goal is to have the loaded webpage (iframe source) scale to the iframe.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:19:22.443

避免在 Mobile Safari 上使用 iframe，因为存在一个 apple/web-kit 尚未修复的渲染错误。

# javascript - 内容=内容。替换

> ID：11887320
> 
> 赞同：0
> 
> 时间：2012-08-09T15:58:03.160
> 
> 标签：javascript, regex, document

如何消除示例中的连字符？只需复制和粘贴：

```
<tt>A-B-C-D-E-F-G</tt> 
```

进入[http://jsfiddle.net/WVUYX/17/](http://jsfiddle.net/WVUYX/17/)中标有进程的文本框，然后单击进程。

我正在寻找的输出只是：ABCDEFG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:02:01.140

只需添加另一个删除连字符的替换：

```
content = content.replace(/(<tt>)(.*?)(<\/tt>)/g, '$2')
content = content.replace(/-/g,''); 
```

示例：http: [//jsfiddle.net/WVUYX/20/](http://jsfiddle.net/WVUYX/20/)

或者您可以通过缩短第一次替换来一步删除它们：

```
content = content.replace(/<\/?tt>|-/g, '') 
```

示例：http: [//jsfiddle.net/WVUYX/21/](http://jsfiddle.net/WVUYX/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:01:06.210

只需更换

`content = content.replace(/(<tt>)(.*?)(<\/tt>)/g, '$2');`

和 `content = content.replace(/(<tt>)(.*?)(<\/tt>)/g, '$2').replace(/-/g, '');`

你会得到你想要的结果。

# java - 在 Linux 和 Windows 上的 Grizzly 上运行 Jersey

> ID：11887321
> 
> 赞同：7
> 
> 时间：2012-08-09T15:58:09.877
> 
> 标签：java, ubuntu, netbeans, jersey, grizzly

我来自 Windows .NET 背景，但我正在努力扩展我的专业知识，因此选择了一些 Java 项目。目前，我正在尝试创建一个 REST API，所以我决定在这里完成泽西岛的演练：http: [//jersey.java.net/nonav/documentation/latest/getting-started.html](http://jersey.java.net/nonav/documentation/latest/getting-started.html)

我已经让 Hello World 项目在 Windows 中正常工作（使用 NetBeans 和 Maven），但是当我尝试在 Ubuntu 中做同样的事情（再次使用 NetBeans 和 Maven）时，我收到以下错误：

```
Starting grizzly...
Aug 09, 2012 11:27:46 AM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.javarest.javarest2
Aug 09, 2012 11:27:47 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class com.javarest.javarest2.HelloWorldResource
Aug 09, 2012 11:27:47 AM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Exception in thread "main" java.lang.IllegalArgumentException: No container provider supports the type class org.glassfish.grizzly.http.server.HttpHandler
    at com.sun.jersey.api.container.ContainerFactory.createContainer(ContainerFactory.java:196)
    at com.sun.jersey.api.container.ContainerFactory.createContainer(ContainerFactory.java:134)
    at com.sun.jersey.api.container.grizzly2.GrizzlyServerFactory.createHttpServer(GrizzlyServerFactory.java:242)
    at Main.startServer(Main.java:25)
    at Main.main(Main.java:29)
Java Result: 1
BUILD SUCCESSFUL (total time: 3 seconds) 
```

我看过这个帖子：[Grizzly 和 Jersey 独立 jar](https://stackoverflow.com/questions/9787265/grizzly-and-jersey-standalone-jar)，并修改了我的 pom.xml 以拥有他拥有的构建部分，但仍然遇到同样的错误。我的代码几乎是从示例中取出的，但我会在这里发布：

HelloWorldResource.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.javarest.javarest2;

import javax.ws.rs.*;

/**
 *
 * @author ryan
 */
// The Java class will be hosted at the URI path "/helloworld"
@Path("/helloworld")
public class HelloWorldResource {

    // The Java method will process HTTP GET requests
    @GET
    // The Java method will produce content identified by the MIME Media
    // type "text/plain"
    @Produces("text/plain")
    public String getClichedMessage() {
        // Return some cliched textual content
        return "Hello World";
    }
} 
```

主.java

```
import com.sun.jersey.api.container.grizzly2.GrizzlyServerFactory;
import com.sun.jersey.api.core.DefaultResourceConfig;
import com.sun.jersey.api.core.PackagesResourceConfig;
import com.sun.jersey.api.core.ResourceConfig;
import org.glassfish.grizzly.http.server.HttpServer;

import javax.ws.rs.core.UriBuilder;
import java.io.IOException;
import java.net.URI;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

public class Main {

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost/").port(9998).build();
    }
    public static final URI BASE_URI = getBaseURI();

    protected static HttpServer startServer() throws IOException {
        System.out.println("Starting grizzly...");
        //ResourceConfig rc = new PackagesResourceConfig("com.sun.jersey.samples.helloworld.resources");
        ResourceConfig rc = new PackagesResourceConfig("com.javarest.javarest2");
        return GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
    }

    public static void main(String[] args) throws IOException {
        HttpServer httpServer = startServer();
        System.out.println(String.format("Jersey app started with WADL available at "
                + "%sapplication.wadl\nTry out %shelloworld\nHit enter to stop it...",
                BASE_URI, BASE_URI));
        System.in.read();
        httpServer.stop();
    }
} 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.javarest</groupId>
    <artifactId>JavaREST2</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>JavaREST2</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-grizzly2</artifactId>
            <version>1.13</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-atom</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-json</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-core</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-client</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-atom-abdera</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-apache-client</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-spring</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-multipart</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-guice</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-simple-server</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs.jersey-oauth</groupId>
            <artifactId>oauth-client</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs.jersey-oauth</groupId>
            <artifactId>oauth-server</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs.jersey-oauth</groupId>
            <artifactId>oauth-signature</artifactId>
            <version>1.8</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>1.5</version>
                <configuration>
                    <transformers>
                        <transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransfor‌mer"/>
                        <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                            <manifestEntries>
                                <Main-Class>com.javarest.javarest2.Main</Main-Class>
                                <Build-Number>1</Build-Number>
                            </manifestEntries>
                        </transformer>
                    </transformers>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T09:14:46.453

我没有使用 Maven。截至今天（2013 年 7 月 26 日），我包括以下 jar 以与我的 Eclipse 中的独立 grizzly 服务器一起使用（项目 | 运行 - 无 web.xml 等）

*   grizzly-framework-2.3.4.jar
*   grizzly-http-2.3.4.jar
*   grizzly-http-server-2.3.4.jar
*   jersey-container-grizzly2-http-2.0.jar

要下载文件：前往[http://grizzly.java.net/dependencies.html](http://grizzly.java.net/dependencies.html)并查找非 Maven 开发人员文件。控制台服务器看起来像

```
package test;

import java.io.IOException;
import java.net.URI;
import org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpServerFactory;
import org.glassfish.jersey.jackson.JacksonFeature;
import org.glassfish.jersey.server.ResourceConfig;
import org.glassfish.grizzly.http.server.HttpServer;

public class GrizzlyServer {

    private static final URI BASE_URI = URI.create("http://localhost:9090/service/");

    @SuppressWarnings("deprecation")
    public static void main(String[] args) throws IOException {

            final HttpServer server = GrizzlyHttpServerFactory.createHttpServer(BASE_URI, createApp());
            System.out.println(String.format("Application started.%nHit enter to stop it..."));
            System.in.read();
            server.stop();
    }

    public static ResourceConfig createApp() {
        ResourceConfig rc = new ResourceConfig()
        .packages("test")
        .register(JacksonFeature.class);

        return rc;

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:58:05.677

好的，所以我现在拥有一台 Mac，并认为我会在那里尝试相同的程序。不出所料，我遇到了与在 linux 环境中相同的问题。我让一位同事在他的机器上尝试了相同的程序，但对他来说效果很好。当我这样做时，我唯一注意到不同的是我得到了以下弹出窗口： ![REST 弹出窗口](../Images/1917d53dd82684b0055eb966a0167df8.png)

我一直只是点击确定。由于我的同事从未收到弹出窗口，我再次尝试，这次单击取消。这似乎成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:43:52.207

您需要使用 maven 转换器来确保正确合并服务文件。参见[Grizzly 和 Jersey 独立罐](https://stackoverflow.com/questions/9787265/grizzly-and-jersey-standalone-jar)

# jquery - bootstrap typeahead ajax select value from data

> ID：11887324
> 
> 赞同：1
> 
> 时间：2012-08-09T15:58:17.893
> 
> 标签：jquery, json, twitter-bootstrap, typeahead

I am using [https://github.com/tcrosen/twitter-bootstrap-typeahead/blob/master/demo/js/demo.js](https://github.com/tcrosen/twitter-bootstrap-typeahead/blob/master/demo/js/demo.js)

my call:

```
$('#SearchUser').typeahead({
                ajax: { 
                    url: '/users/ajax_finduser', 
                        triggerLength: 3, 
                        timeout: 300,
                        method: 'post',

                },
                display: 'name',
                val: 'id',
                itemSelected: updateID
            }); 
```

**My new output:**

```
[
   {"id":"5","name":"Som name"},
   {"id":"6","name":"Another name"}
] 
```

And here is my problem the VAL and NAME the typeahead is expecting should be like this:

```
[
    { id: 1, name: 'Some users name' },
    { id: 2, name: 'Another users name' }
] 
```

So how do I add the extra level to my typeahead function (The USER.name + User.id)? I have no idea what to use (){}[]?

How to fix the quotes? The typeahead does not accept the json output as it is. I read somewhere that my output is correct json. Am I missing something here?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:07:19.080

遵循@RuslanasBalčiūnas 建议的[要点](https://gist.github.com/3694758)
这是我最终得到的：

```
autosep = '####';
$('.autocomplete').typeahead({
    minLength: 3
  , source: function (query, process) {
        if (!finished) {
            return;
        }
        finished = false;
        return $.get(
            'the_action'
          , the_params
          , function (response) {
                var data = new Array(); 
                for (var i in response) {
                    data.push(
                        response[i]['id']
                      + autosep
                      + response[i]['label']
                    );
                }
                finished = true;
                return process(data);
            }
        );
    }
  , highlighter: function(item) {
        var parts = item.split(autosep);
        parts.shift();
        return parts.join(autosep);
    }
  , updater: function(item) {
        var parts = item.split(autosep);
        $('#the_id').val(parts.shift());
        return parts.join(autosep);
    }
}); 
```

# iphone - Program crashes when loading 200+ subview images in the UIScrollView

> ID：11887327
> 
> 赞同：0
> 
> 时间：2012-08-09T15:58:30.827
> 
> 标签：iphone, objective-c, ios

I am developing a similar program like Photos in the iPhone using ALAssetLibrary. I am trying to load the images in a scrollview. Everything works fine when the album has small amount of pictures. But when I trying to load the album with 200+ photos, my program ended without any error message. Anyone know this program? Here is my code for loading scroll view:

```
- (void)loadScrollView
{
for (UIView *v in [scrollview subviews]) {
    [v removeFromSuperview];
}

CGRect scrollFrame = [self frameForPagingScrollView];
scrollview = [[UIScrollView alloc] initWithFrame:scrollFrame];

CGRect workingFrame = scrollview.frame;
workingFrame.origin.y = 0;

photoCount = [info count];
for(NSDictionary *dict in info) {
    UIImageView *imageview = [[UIImageView alloc] initWithImage:[dict objectForKey:UIImagePickerControllerOriginalImage]];
    [imageview setContentMode:UIViewContentModeScaleAspectFit];
    imageview.frame = workingFrame;

    [scrollview addSubview:imageview];
    [imageview release];
    [scrollview setPagingEnabled:YES];
    [scrollview setDelegate:self];
    [scrollview setAutoresizesSubviews:YES];
    [scrollview setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight];
    [scrollview setShowsVerticalScrollIndicator:NO];
    [scrollview setShowsHorizontalScrollIndicator:NO];

    workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;

}

[self setScrollViewContentSize];
[[self view] addSubview:scrollview];
} 
```

Thanks a lot in advance!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:08:19.517

我个人将所有`UIImageView`对象都放在 my 上`UIScrollView`，但仅为当前可见的对象设置图像属性（并为不再可见的对象清除图像属性）。如果您有数千张图像，那可能也太浪费了（也许您甚至不想保留这些`UIImageView`对象，即使没有`image`设置它们的属性），但是如果您要处理数百张图像，我觉得这是一个不错的选择简单的解决方案，解决对象消耗内存的关键问题`UIImage`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView.delegate = self;

    // all of my other viewDidLoad stuff...
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self loadVisibleImages];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self loadVisibleImages];
}

- (void)loadVisibleImages
{
    CGPoint contentOffset = self.scrollView.contentOffset;
    CGRect  contentFrame  = self.scrollView.bounds;
    contentFrame.origin = contentOffset;

    for (UIImageView *imageView in _imageViews) // _imageViews is (obviously) my array of images 
    {
        if (CGRectIntersectsRect(contentFrame, imageView.frame))
        {
            imageView.image = ... // set the image property
        }
        else
        {
            imageView.image = nil;
        }
    }
} 
```

这是一些代码的片段，它正在做很多其他的事情，所以很明显你的实现会有很大的不同，但它显示了你可以如何使用`scrollViewDidScroll`来确定哪些图像是可见的并适当地加载/卸载图像。如果您还想删除/添加`UIImageView`对象，您可能还可以进一步更改，但显然必须更改“此图像视图是否可见”的逻辑，而不是利用`frame`所有`UIImageView`对象。

我不确定我是否正确阅读了您的代码，但是您是否也将所有`UIImage`对象都放在字典中？这本身就是对内存的过度使用。我通常将实际图像保存在一些持久性存储中（例如，我使用`Documents`文件夹，尽管您可以使用`Core Data`or `SQLite`，尽管后两者对大图像造成显着的性能影响）。我保留在内存中的唯一图像是 UI 积极使用的图像，`NSCache`出于性能原因，我将使用一个对象来保留一些图像，但否则我会从持久存储中提取它们，而不是从活动内存中提取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:19:15.057

您应该使用滚动视图委托来确定当前将在屏幕上显示哪些图像，并且仅将那些图像加载到内存中。

此外，如果您显示的图像尺寸远小于实际图像尺寸，则应调整图像大小并使用较小的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T15:21:09.760

为什么不使用`UICollectionView`和`UICollectionViewController`类？ `UICollectionViewController`参考[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html)

示例代码[在这里](http://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012860)。

您的图像最终将成为`UICollectionViewCell`. 数据源和委托协议方法类似于 UITableView 方法。即它们提供了一种机制，`UICollectionViewController`将重用`UICollectionViewCells`.

使用这些类的好处是它们的使用方式类似`UITableViewControllers`，它们可以帮助您解决您遇到的内存压力问题。

祝你好运！

# jquery - Jquery 提交不会触发

> ID：11887330
> 
> 赞同：1
> 
> 时间：2012-08-09T15:58:36.867
> 
> 标签：jquery, submit

我在下面有一些代码：

```
<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>StarTrackr!</title>
        <script src="../../lib/jquery-1.7.1.min.js" type="text/javascript"
        charset="utf-8"></script>
        <script type="text/javascript">
        $(document).ready(function () {

            $('div').load('1.htm');
            // The above function does work

            $("#testform").submit(function () {
                //Code after form submitted and this does not fire
                alert("hi");
            });    
        });         
        </script>
    </head>
    <body>
        <div></div>
        <form id="testform">Email:
            <input type="text" name="email" />
            <br />First Name:
            <input type="text" name="fname" />
            <br />Last Name:
            <input type="text" name="lname" />
            <br />
            <input type="button" name="submit" id="submit" value="Submit" />
        </form>
    </body>    
</html> 
```

当我单击提交按钮时，应该会弹出警报 (hi) 但它不会。有谁知道为什么？假设 Jquery 库已正确加载

谢谢，吉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:00:22.653

`input`需要有，`type="submit"`没有`type="button"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:00:48.340

```
<input type="button" name="submit" id="submit" value="Submit" /> 
```

将 type="button" 更改为 type="submit"

# jquery-mobile - Programmatically clicking a link in jQuery Mobile app

> ID：11887331
> 
> 赞同：2
> 
> 时间：2012-08-09T15:58:38.440
> 
> 标签：jquery-mobile

I am trying to programmatically click a link in jQuery Mobile but its not working. Here is the page code.

```
<section id="welcome" data-role="page">

<div class="content" data-role="content">
<a id="myLink"  href="http://www.google.de" target="_blank">The link</a>
<input type="button" id="launcher" value="Launch the link"/>
</div>
</section> 
```

and here is the correpsonding javascript code:

```
$(document).ready(function()
{
$("#launcher").bind("click",function()
{
    console.log("Inside the button click handler");
    $("#myLink").click();
});
}); 
```

Seems straightforward enough but I can,t seem to make it work.Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:15:59.947

它不起作用的一个可能原因是`<a id="myLink"></a>`DOM 中有另一个，但在活动页面中没有。如果是这种情况，您的代码可能会触发该元素上的点击处理程序，而不是您在屏幕上看到的那个。也许使用`$.mobile.activePage.find("#myLink").click();`会起作用。

此外，[您应该避免在 jQuery Mobile 中使用 $(document).ready()](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:49:13.673

您应该使用触发器，如下所示：

```
$('#mylink').trigger('click'); 
```

另外，请检查您的绑定实际上是否绑定到一个元素。在 JQM 中，您不应该依赖`$(document).ready`. 而是使用`$(document).bind('pageinit')`. 看[这里](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T13:01:29.063

我有同样的问题。对我有用的是在 DOM 对象本身上调用 click()。只需在 jQuery 对象后添加“[0]”即可。

像这样：

```
$(document).ready(function()
{
$("#launcher").bind("click",function()
{
    console.log("Inside the button click handler");
    $("#myLink")[0].click();
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:36:55.950

不是问题的真正答案，但如果您只想实现要启动的链接（并且您不想执行您为链接定义的点击处理程序，如果有的话），这可能是一个解决方案

```
$(document).ready(function()
{
$("#launcher").bind("click",function()
{
    console.log("Inside the button click handler");
    window.open($("#myLink").attr("href"),$("#myLink").attr("target"));
});
}); 
```

# dns - 了解 DNS 查找机制

> ID：11887334
> 
> 赞同：13
> 
> 时间：2012-08-09T15:58:46.630
> 
> 标签：dns, subdomain, resolve, nameservers

导致我尝试取消选择此过程的具体查询是：

如果父域已经解析，DNS 查找子域（例如`assets.example.com`）会更快吗？`example.com`

根据我的（天真）理解，将域名转换为 IP 地址的[基本过程非常简单。](http://en.wikipedia.org/wiki/Domain_Name_System#Address_resolution_mechanism)`com`知道如何解析和等顶级域的 13 个根服务器的地址`net`被硬编码在网络硬件中。在查找 的情况下`example.com`，我们的本地 DNS 服务器（可能是我们的路由器）会询问这些根服务器之一在哪里可以找到 的顶级名称服务器`com`。然后它会询问生成的名称服务器是否知道如何解析`example`。如果是，我们就完成了，如果不是，我们将被传递到另一台服务器。此过程中的每个名称服务器都可能正在缓存，因此有一段时间我们的本地路由器现在会立即知道在哪里查找`com`和`example`，并且`com`服务器将知道在哪里查找`example`.

不过，我真的不明白。

*   我知道还有其他中间 DNS 服务器，例如 ISP 提供的那些。他们在什么时候被询问？
*   如果`com`TLD 名称服务器不知道如何解析`example`，它如何确定要检查的其他名称服务器？或者这只是意味着`example.com`无法解决？
*   当我注册一个域并配置名称服务器时，我是否实际上在为该 TLD 的名称服务器使用的数据库中的特定 TLD 的子域编辑一组 NS 记录？

Wikipedia 解释说，一些 DNS 服务器将缓存与递归查询实现相结合，这允许它们提供缓存命中并可靠地解决缓存未命中问题。我不明白这些服务器是如何被查询的，或者解析算法是如何（甚至广泛地）工作的。

回顾我最初的问题，假设 A 记录都在同一个名称服务器上，我可能会选择“否”。这是准确的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-09T19:47:59.557

首先，误解：

*   根提示（13 个根服务器的名称和 IP 地址）几乎从未“硬编码在网络硬件中”。网络硬件（如路由器）有时可能有一个内置的 DNS 解析器，如果它碰巧也有一个 DHCP 服务器，但如果有，它通常只是一个转发解析器，将查询传递给上游名称服务器（从 ISP 获得) 如果它不知道答案。
*   ISP 提供的名称服务器通常不充当“中间 DNS 服务器”。您可以使用自己的名称服务器（例如公司名称服务器，或者在您的计算机上安装 BIND），或者使用您的 ISP 提供的名称服务器。无论哪种情况，您选择的任何名称服务器都会从头到尾处理递归解析过程。例外是前面提到的转发名称服务器。
*   如果`com`TLD 名称服务器不知道如何解析`example`，则无法确定要检查的其他名称服务器。它*本身*就是要检查的名称服务器。它要么知道`example`，要么`example`不存在。

你的问题的答案是肯定的。如果名称服务器已经解析`example.com`（并且该结果在其缓存中仍然有效），那么它将能够`assets.example.com`更快地解析。

递归解析过程就像您描述的那样：首先找出`.`（根）的名称服务器，然后找出 的名称服务器`com`，等等......只有递归解析器实际上并不要求`.`和`com`和的名称服务器`example.com`。它实际上要求`assets.example.com`每次。根服务器不会给它这个问题的答案（他们`assets.example.com`对`com`. 同样， 的名称服务器`com`不会回答问题（他们也不知道），但他们可以为`example.com`. 名称服务器`example.com`可能知道也可能不知道问题的答案，这取决于是否`assets.example.com`被进一步委托给其他名称服务器或在与`example.com`. 因此，递归解析器将收到最终答案或另一个推荐。

# android - Full screen DialogFragment

> ID：11887340
> 
> 赞同：20
> 
> 时间：2012-08-09T15:58:57.733
> 
> 标签：android, android-dialogfragment

I am trying to create a DialogFragment with a width of MATCH_PARENT so the dialog is nearly full screen (leaving the padding around the edges for the floating look). I have seen this solution [Full Screen DialogFragment in Android](https://stackoverflow.com/questions/7189948/full-screen-dialogfragment-in-android) but am trying to avoid the hack of setting the width to 1000dp. With my current layout, whether I use FILL_PARENT or MATCH_PARENT it seems to be setting the width and height to WRAP_CONTENT.

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
```

I have used this solution for Dialog (not DialogFragment) and it works as expected:

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-03-26T18:19:34.640

这对我来说是完美的。当 extends **DialogFragment** override `onCreateView()`... 实现所有逻辑

对话框让它全屏只是覆盖这个方法

```
 @Override
public Dialog onCreateDialog(final Bundle savedInstanceState) {

    // the content
    final RelativeLayout root = new RelativeLayout(getActivity());
    root.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));

    // creating the fullscreen dialog
    final Dialog dialog = new Dialog(getActivity());
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(root);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.YELLOW));
    dialog.getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);

    return dialog;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-09T16:56:19.653

尝试切换到 RelativeLayout 而不是 LinearLayout。它适用于我的情况

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-22T12:20:07.460

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NO_TITLE,android.R.style.Theme_Holo_Light);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-01T13:56:58.197

这个答案帮助我 [如何设置DialogFragment的宽度和高度？](https://stackoverflow.com/questions/12478520/how-to-set-dialogfragments-width-and-height/18401388#18401388)

```
int width = activity.getResources().getDisplayMetrics().widthPixels;
int height = activity.getResources().getDisplayMetrics().heightPixels;
content.setLayoutParams(new LinearLayout.LayoutParams(width, height)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-12T14:32:00.850

我发现的最佳解决方案是将宽度或 minWidth 设置为任意大的值，以确保它填满屏幕。我不喜欢这个解决方案，但我没有看到更好的解决方案。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-16T22:43:19.437

在我的代码中，我想要一个全屏对话框，但仍然在屏幕顶部显示通知栏，所以我正在使用：

```
setStyle(DialogFragment.STYLE_NORMAL, android.R.style.Theme_Black_NoTitleBar); 
```

这使它成为全屏，但我没有使用全屏样式，以便保留通知栏。

希望它可以帮助某人！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-14T06:24:43.407

你也可以做类似的事情 -

```
@Override
  public void onCreate(@Nullable final Bundle savedInstanceState) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
      setStyle(STYLE_NO_TITLE, android.R.style.Theme_Material_Light_NoActionBar_Fullscreen);
    } else {
      setStyle(STYLE_NO_TITLE, android.R.style.Theme_DeviceDefault_Light_NoActionBar);
    }
    super.onCreate(savedInstanceState);

  } 
```

这样，您还可以看到为版本 >= lollipop 着色的状态栏

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-26T10:58:35.423

我已经用解释回答了这个问题，这是最短和有效的方法。请检查[在这个线程](https://stackoverflow.com/a/44758070/4314323)

希望这可以帮助 ：）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-13T13:50:18.453

在 DialogFragment 上进行以下工作。在`onCreateView()`添加以下

```
getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE); 
```

* * *

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    //…
    getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    //…
    return view;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-09-08T07:53:20.010

要拥有全屏对话框，您需要使用

```
public class CustomDialogFragment extends DialogFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        // Inflate the layout to use as dialog or embedded fragment
        return inflater.inflate(R.layout.purchase_items, container, false);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Dialog dialog = super.onCreateDialog(savedInstanceState);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        return dialog;
    }
} 
```

并显示此对话框：

```
CustomDialogFragment newFragment = new CustomDialogFragment();
FragmentManager fragmentManager = getSupportFragmentManager();
// To make it fullscreen, use the 'content' root view as the container
// for the fragment, which is always the root view for the activity
fragmentManager.beginTransaction().add(android.R.id.content, newFragment).commit(); 
```

**注意**：您不能使用以下代码显示对话框，否则，对话框将显示在屏幕中心，而不是全屏。

```
//don't show dialog like this
newFragment.show(fragmentManager, "dialog"); 
```

# ruby - After Process.wait, $?.exited? is false

> ID：11887342
> 
> 赞同：0
> 
> 时间：2012-08-09T15:59:00.220
> 
> 标签：ruby, process

If I run the following:

```
Process.kill "KILL", pid
Process.wait pid
raise "application did not exit" if not $?.exited?
raise "application failed" if not $?.success? 
```

I get the error "application did not exit". Why is `Process.wait` not waiting? More precisely, why does `Process.wait` set `$?` to a not-exited status?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:18:09.863

进程收到kill信号后立即退出，因此Process.wait立即将相应的Process::Status对象分配给$? 并允许继续执行。进程::状态#已退出？仅当进程正常退出时才返回 true，因此您看到的是预期行为—— SIGKILL 通常不会导致正常终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:18:36.623

从`Process::Status`文档中：

> Posix 系统使用 16 位整数记录有关进程的信息。低位记录进程状态（**已停止、已退出、已发出信号**），高位可能包含附加信息。

状态`exited`将意味着进程自行退出（称为 的进程`exit()`）。但是由于您强行终止了该进程，它将具有`signaled`相反的状态，这意味着该进程由于未捕获的信号而退出（`KILL`在这种情况下）。

# c++ - Delegates and thread: CallbackContext parameter

> ID：11887343
> 
> 赞同：0
> 
> 时间：2012-08-09T15:59:02.537
> 
> 标签：c++, multithreading, delegates, windows-runtime, workitem

I'm implementing threading in Metro mode, I got this example while Googling, but I don't understand `CallbackContext` . What's the use of this? [This](http://msdn.microsoft.com/en-us/library/windows/apps/hh755798%28v=vs.110%29.aspx) explains its use in MTA, but not clear to me. And I'm facing problem when I use `CallbackContext` as `Any` or `Same`. Something work with one but not with other! So first thing first I want to know what's the use of this?! PS: I'm new to WindowsRT programming and C++ too! Thanks!

```
auto workItemHandler = ref new WorkItemHandler([=](IAsyncAction^)
{
    // Run the user callback.
    try
    {
        func(data);
    }
    catch (...)
    { 

    }
    // Signal that the thread has completed.
    SetEvent(completionEvent);
    //CloseHandle(completionEvent);

}, CallbackContext::Same); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:00:53.987

`CallbackContext`确定您的委托（在本例中为 a `WorkItemHandler`）是否聚合自由线程编组器。这将决定您的代表是否可以被偷运到另一个公寓 ( `CallbackContext::Any`)，或者是否必须将其召回原来的公寓 ( `CallbackContext::Same`)。基本上，它告诉调用您的委托的人是否可以直接调用它而不管公寓，或者他们是否需要编组回到创建它的公寓。

例如，在 Windows 应用商店应用程序中，任何修改 UI 的东西都需要在 UI 线程 (STA) 上运行。假设您使用的方法是在 UI 线程上运行的方法（例如事件回调，例如按钮单击处理程序）。某些异步调用会在 UI 线程*以外*`ThreadPool::RunAsync`的线程上运行传入的委托（因为委托的默认值为）。如果您不需要在 UI 线程上执行任何操作，这将很有用，因为它可以释放该线程以继续发送消息（并且您的应用程序继续感觉高性能）。*`CallbackContext::Any`*

 *但是，如果您确实需要修改 UI 或调用回 UI，并且您尝试从非 UI 线程执行此操作，则会收到不正确的线程异常。通过添加参数`CallbackContext::Same`，您可以强制您的委托在原始单元（在本方案中为 STA）中运行，从而避免该问题。

（您还可以通过`Dispatcher->RunAsync`调用进一步的委托在 STA 上运行来回调 UI 线程。整个委托是否更好地在 STA 上运行取决于您的方案。）*

# jquery - 我如何使用从 getJSON 返回的数据

> ID：11887345
> 
> 赞同：1
> 
> 时间：2012-08-09T15:59:02.350
> 
> 标签：jquery, json, api

我是 jquery（和所有编程）的新手，所以我试图通过发出一个请求然后将该请求放在屏幕上来开始简单。

当我在浏览器中查看此文件时，什么也没有发生。我期待它把名字放在我的屏幕上。这就是我想做的，问一个问题并将答案放在我的屏幕上。我可能以完全错误的方式这样做，所以我愿意接受所有建议！

```
<!DOCTYPE html>
<html>
<head>

<script type="application/javascript" src="jquery.js"></script>

<script>
$.getJSON('http://openapi.etsy.com/v2/teams/8787?method=GET&api_key=appkey&fields=name',function (data) {
    $('#TeamName').html(data.results[0].name);
})
</script>

</head>
<body>

<div id="TeamName"></div>

</body>
</html> 
```

我正在使用我的 appkey，上面写着 appkey，我只是不知道我是否应该把它贴在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:01:38.410

您将需要使用`.ajax`而不是`.getJson`与`dataType: 'json'`. 前几天我也遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:13:36.833

服务器必须以 JSON 格式返回数据。可以？

此外，在您的函数中打印出“数据”，看看它是否符合您的预期：

```
var output = '';
for (property in data) {
  output += property + ': ' + data[property]+'; ';
}
alert(output); 
```

看看这个例子： [http ://www.jquery4u.com/json/ajaxjquery-getjson-simple/#.UCPgHqOPZnQ](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/#.UCPgHqOPZnQ)

# xml - 非常简单的 XSL/XPath 完整性检查

> ID：11887355
> 
> 赞同：2
> 
> 时间：2012-08-09T15:59:40.353
> 
> 标签：xml, xslt, xpath

我敢肯定，这将是一个非常简单的问题。我有一个通过 XSL 转换的 xml 文档。此 xml 的重要部分如下所示：

```
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Transaction>
    <EnrollmentModel>
      <FutureContributionsModel>
        <FutureContributionsElectionType>ACertainThirdParty</FutureContributionsElectionType>
      </FutureContributionsModel>
    </EnrollmentModel>
  <Transaction>
</root> 
```

如果值`<FutureContributionsElectionType>`确实等于，我想添加以下内容`ACertainThirdParty`：

```
<fo:table-row>
    <fo:table-cell>
        <fo:block font-family="verdanaPS" font-size="9" padding-bottom="15px" padding-top="10px">
                        The Participant has successfully opted in to use ACertainThirdParty as the managed provider for the account.
        </fo:block>
    </fo:table-cell>
</fo:table-row> 
```

请注意，只有一个第三方，所以我不需要为自定义文本获取节点的值，我可以在那里硬编码它。

如果值`<FutureContributionsElectionType>`不等于`ACertainThirdParty`，我不想添加一大堆其他东西。

***这是我尝试过的：***

所以这似乎是`<xsl:choose>`和`<xsl:when>`/的工作`<xsl:otherwise>`，对吧？这是我得到的：

```
<xsl:choose>
  <xsl:when test="FutureContributionsModel/FutureContributionsElectionType='ACertainThirdParty'">
    <fo:table-row>
      <fo:table-cell>
        <fo:block font-family="verdanaPS" font-size="9" padding-bottom="15px" padding-top="10px">
                        The Participant has successfully opted in to use ACertainThirdParty as the managed provider for the account.
        </fo:block>
      </fo:table-cell>
    </fo:table-row>
  </xsl:when>
  <xsl:otherwise>
    <fo:table-row>
      <fo:table-cell>
          ...
          Lots of stuff
          ...
      </fo:table-cell>
    </fo:table-row>
  </xsl:otherwise>
</xsl:choose> 
```

但是当我转换它时，否则代码会被命中而不是正确的代码（在我的 xml 中，值确实是`ACertainThirdParty`. 我的猜测是我的问题是我不知道 XPath，所以我可能假设我可以做的事情我不能。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:09:03.460

很可能上下文（当前节点）不是`Transaction`.

您可以使用绝对 XPath 表达式：

```
/*/Transaction/EnrollmentModel/FutureContributionsModel/FutureContributionsElectionType='ACertainThirdParty' 
```

**更好的是，避免使用显式条件——使用模板和模板匹配模式**：

```
<xsl:template match="FutureContributionsElectionType[.='ACertainThirdParty']">

  <!-- Specific Processing Here  -->
</xsl:template>

<xsl:template match="FutureContributionsElectionType[not(.='ACertainThirdParty')]">

  <!-- Other Specific Processing Here  -->
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:09:15.357

我不确定这是否可行，因为我不使用 XSL，但我看到了 3 个潜在问题：

1.  您的 XPath 中有一个错字：“FutureContributionElectionType”应该是“FutureContribution `s`ElectionType”
2.  目前尚不清楚您的 XPath 是否应该从“FutureContributionsModel”或更早开始

# php - 使用 Symfony 获取未登录用户的安全令牌

> ID：11887359
> 
> 赞同：3
> 
> 时间：2012-08-09T16:00:04.200
> 
> 标签：php, symfony

如何获得任何用户的安全令牌，而不仅仅是当前登录的用户？

我希望能够对从数据库中获取的用户调用 isGranted()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T01:53:25.493

`isGranted()`来自安全服务，因此在不调整会话状态的情况下使用它来获取角色将是困难/不必要的。

不要误会我的意思，这绝对有可能......这会起作用，例如：

```
public function strangeAction()
{
    // Get your User, however you normally get it
    $user = $userRepository->find($id);
    // Save the current token so you can put it back later
    $previousToken = $this->get("security.context")->getToken();
    // Create a new token
    $token = new UsernamePasswordToken($user, null, "main", $user->getRoles());
    // Update the security context with the new token
    $this->get("security.context")->setToken($token);
    // Now you have access to isGranted()
    if ($this->get("security.context")->isGranted("ROLE_SOMETHING"))
    { /* Do something here */ }
    // Don't forget to reset the token!
    $this->get("security.context")->setToken($previousToken);
} 
```

……但这真的没有意义。

实际上，您不需要令牌。一个更好的方法是在`isGranted()`你的 User 实体中添加一个方法：

```
// Namespace\YourBundle\Entity\User.php

class User
{
    ...
    public function isGranted($role)
    {
    return in_array($role, $this->getRoles());
    }
    ...
} 
```

现在您可以在控制器中获取这些角色：

```
public function notSoStrangeAction()
{
    // Get your User, however you normally get it
    $user = $userRepository->find($id);
    // Find out if that User has a Role associated to it
    if ($user->isGranted("ROLE_SOMETHING"))
    { /* Do something here */ }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-20T08:41:11.533

前段时间我也有同样的要求。所以我自己实现了。由于您需要容器中的层次结构信息，因此不建议~~使用~~此功能扩展用户实体。

```
// first check if the role is inside the user roles of the user
// if not then check for each user role if it is a master role of the check role
public function isGranted($user, $checkrole){
    $userroles = $user->getRoles();
    if (in_array($checkrole, $userroles)){return true;}
    foreach ($userroles as $userrole){
        if ($this->roleOwnsRole($userrole, $checkrole)){return true;}
    }
    return false;
 }

// recursively loop over the subroles of the master to check if any of them are
// the suggested slave role. If yes then the masterrole is a master and has 
// the same grants as the slave.
private function roleOwnsRole($masterRole, $slaveRole, $checkvalidityroles=true, $hierarchy=null)
{
    if ($hierarchy===null){$hierarchy = $this->container->getParameter('security.role_hierarchy.roles');}
    if ($masterRole === $slaveRole){ return false; }
    if($checkvalidityroles && (!array_key_exists($masterRole, $hierarchy) || !array_key_exists($slaveRole, $hierarchy))){ return false; }

    $masterroles = $hierarchy[$masterRole];
    if(in_array($slaveRole, $masterroles)){
        return true;
        }else{
            foreach($masterroles as $masterrolerec){
                if ($this->roleOwnsRole($masterrolerec, $slaveRole, false, $hierarchy)){return true;}
            }
            return false;
        }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-08T08:01:28.087

`AccessDecisionManager`我认为最好的方法是手动调用- 就像`$securityContext->isGranted()`当前登录的用户一样。如果您使用 Symfony Voters 来确定访问权限，这也很好。

```
$token = new UsernamePasswordToken($userObject, 'none', 'main', $userObject->getRoles());
$hasAccess = $this->get('security.access.decision_manager')->decide($token, array('voter'), $optionalObjectToCheckAccessTo); 
```

# android - ListView 加载数据失败

> ID：11887360
> 
> 赞同：0
> 
> 时间：2012-08-09T16:00:04.773
> 
> 标签：android, android-listview

我真的坚持这一点，无法继续前进我试图将谷歌日历事件填充到列表视图中，但没有看到任何结果。我很抱歉发布这么长的代码，但我真的被卡住了！我的活动

```
public class EventListActivity extends Activity {

 private List<Events> events = new ArrayList<Events>();
 private Handler handler = new Handler();
  private ProgressDialog progressBar;
  private SelectableEventsAdapter eventsAdapter;

@Override
public void onCreate(Bundle savedInstance) {
     super.onCreate(savedInstance);
     getAccount();
    setContentView(R.layout.layout_main);
    setEventsListView();
}

private void setEventsListView() {
    Log.i("ReachedsetEvents", "Reached set Events view 1");
     final ListView eventsListView = (ListView) findViewById(R.id.list_main);
     eventsAdapter = new SelectableEventsAdapter(this, events);
     //eventsAdapter.getView(0, eventsListView, eventsListView);
    eventsAdapter.setAdapter(eventsAdapter);
    Log.i("ReachedsetEvents", "Reached set Events view 2");
    eventsAdapter.sort();

     private void retrieveEvents() {
    // Retrieves the attendees on a separate thread.
    new Thread(new Runnable() {

      public void run() {

        EventsRetriever eventsRetriever =
            new EventsRetriever(EventListActivity.this, OAuthManager.getInstance()
                .getAccount());
        final List<Events> newevents = eventsRetriever.getEvents();
        Log.i("reachedRetrieve", "reached retrieve");
        // Update the progress bar
        handler.post(new Runnable() {

          public void run() {
            if (newevents != null) {
              events.clear();
              events.addAll(newevents);

             eventsAdapter.sort();
             eventsAdapter.notifyDataSetChanged();
            }

            Log.d(Constants.TAG, "Got attendees, dismissing progress bar");
            if (progressBar != null) {
              progressBar.dismiss();
              Log.d(Constants.TAG, "Progress bar should have been dismissed");
            }
          }
        });
      }
    }).start();
    // Show a progress bar while the attendees are retrieved from the phone's
    // database.
    progressBar =
        ProgressDialog.show(this, null, getString(R.string.retrieve_contacts_wait_text), true);
  }
           @Override
  protected void onResume() {
    super.onResume();
   // getAccount();
  }

  /**
   * Prompt user to choose an account and retrieve attendees from phone's
   * database.
   */
  private void getAccount() {
    OAuthManager.getInstance().doLogin(false, this, new OAuthManager.AuthHandler() {
      public void handleAuth(Account account, String authToken) {
        if (account != null) {
          retrieveEvents();
        }
      }
    });
  }} 
```

我的自定义适配器

```
public SelectableEventsAdapter(Context context, List<Events> items) {
      super(context, R.layout.layout_main,items);
      inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
   Events item = getItem(position);
    LinearLayout eventsView = getView(convertView);

    setViews(item, eventsView);
    return eventsView;
  }
  private LinearLayout getView(View convertView) {
      Log.i("Reached", "Reached getView long");
      LinearLayout eventsView;
    if (convertView == null) {
         eventsView = new LinearLayout(getContext());
         inflater.inflate(R.layout.layout_main,eventsView,true);

    } else {
        eventsView = (LinearLayout) convertView;
    }
    return eventsView;
  }
  private void setViews(Events item, LinearLayout eventsView) {
        setTitleView(item, eventsView);

      }
     private void setTitleView(Events item, LinearLayout eventsView) {
   ListView titleView = (ListView) eventsView.findViewById(R.id.list_main);
       titleView.setEnabled(true);
    //titleView.setText(item.title);

} 
```

和获取事件的检索器：

```
 public EventsRetriever(Activity activity, Account account) {
    this.activity = activity;
    this.account = account;
  }
  public static final String[] FIELDS = {
      CalendarContract.Events.TITLE,
      CalendarContract.Events.DESCRIPTION,
      CalendarContract.Events.ORGANIZER,
      CalendarContract.Events.STATUS,
      CalendarContract.Events.DTSTART,
      CalendarContract.Events.EVENT_LOCATION,

      };

      public static final Uri CALENDAR_URI = Uri.parse("content://com.android.calendar/calendars");

      String[] selectionArgs = new String[] {CalendarServiceBuilder.ACCOUNT_NAME, Constants.ACCOUNT_TYPE,
                CalendarServiceBuilder.ACCOUNT_NAME};

  /**
   * Get the list of user's contacts.
   * 
   * @return The list of contacts.
   */
  public List<Events> getEvents() {
    List<Events> result = new ArrayList<Events>();
    ContentResolver cr = activity.getContentResolver();
    Cursor cursor =
        cr.query(CalendarContract.Events.CONTENT_URI, FIELDS,null,null, null);

    try {
          if(cursor.getCount() > 0) {
            while (cursor.moveToNext()) {
              String title =cursor.getString(cursor.getColumnIndex(
                      CalendarContract.Events.TITLE));
              String description = cursor.getString(cursor.getColumnIndex(
                      CalendarContract.Events.DESCRIPTION));
              String organizer = cursor.getString(cursor.getColumnIndex(
                      CalendarContract.Events.ORGANIZER));
              String status = cursor.getString(cursor.getColumnIndex(
                      CalendarContract.Events.STATUS));
              String location = cursor.getString(cursor.getColumnIndex(
                      CalendarContract.Events.EVENT_LOCATION));
              result.add(new Events(title,description,organizer,status,location));
              Log.i("Reachedretriever", "Reached retriever");
             }

          }}
            finally {
                  cursor.close();
                }
        return result;

        }} 
```

我无法在屏幕上看到任何内容！也只是为了让您知道我正在使用未经授权的 Oauth 进行 api 访问。layout_main.xml 只包含一个线性布局内的 ListView。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:02:05.113

我认为您的适配器中的事件列表与您的活动中的列表不同。

因此，要么在事件列表已经填充时最后调用 setAdapter()，要么在您的适配器中创建一个 setter

```
setItems(List<Events> events){
     this.events = events
 } 
```

并在调用之前调用它`notifyDataSetChanged()`

您可能还想用更容易阅读和使用更快的 AsyncTask 替换您的线程/处理程序实现（恕我直言）。

# java - 寻找 Java 代码分析框架

> ID：11887364
> 
> 赞同：0
> 
> 时间：2012-08-09T16:00:18.963
> 
> 标签：java, eclipse, frameworks, code-analysis

我正在为 Java 寻找 Java 中的代码分析框架。我想为另一个非常好的开源项目制作一个插件。

我所搜索的只是一个框架，它读取一个 java 文件并返回 java 类中使用的所有对象、函数的模型。（如 Eclipse 大纲）

我已经用谷歌搜索了，但是我找不到有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:46:45.927

您需要的基本上只是一个解析器（您本身不需要代码分析，只是一种适合您需要的中间格式）。像[http://code.google.com/p/javaparser/wiki/UsingThisParser](http://code.google.com/p/javaparser/wiki/UsingThisParser)这样简单的东西已经可以满足您的需要。如果您想要更完整的东西，请查看[antlr](http://www.antlr.org/)。它是一个通用解析器，但默认实现是用 Java 编写的，为它编写的[Java 语法](https://github.com/antlr/grammars-v4/blob/master/java/Java.g4)非常好（由 Antlr 实现者编写）。

# forms - Microsoft Visual C++ 2010 opening another form

> ID：11887366
> 
> 赞同：0
> 
> 时间：2012-08-09T16:00:23.683
> 
> 标签：forms, c++-cli

I'm trying to make it so that when I click a button on my Visual C++ project, it opens another form, kinda acting like a java JOptionPane.showInputDialog, but making it look like the way I want. I'm trying to open it with `Form21^form2=gcnew Form21(); form2->ShowDialog();` but all it says is

```
1>c:\users\steve\documents\visual studio 2010\projects\lesson 2\lesson 2\Form1.h(253): error C2065: 'Form21' : undeclared identifier
1>c:\users\steve\documents\visual studio 2010\projects\lesson 2\lesson 2\Form1.h(253): error C2065: 'form2' : undeclared identifier
1>c:\users\steve\documents\visual studio 2010\projects\lesson 2\lesson 2\Form1.h(253): error C2061: syntax error : identifier 'Form21'
1>c:\users\steve\documents\visual studio 2010\projects\lesson 2\lesson 2\Form1.h(254): error C2065: 'form2' : undeclared identifier
1>c:\users\steve\documents\visual studio 2010\projects\lesson 2\lesson 2\Form1.h(254): error C2227: left of '->ShowDialog' must point to class/struct/union/generic type
1>          type is ''unknown-type'' 
```

Form 2 should be all fine, but here is the code for it anyways

```
#pragma once

namespace Lesson2 {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form2
    /// </summary>
    public ref class Form2 : public System::Windows::Forms::Form
    {
    public:
        Form2(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form2()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Label^  label1;
    private: System::Windows::Forms::TextBox^  textBox1;
    private: System::Windows::Forms::Label^  label2;
    private: System::Windows::Forms::TextBox^  textBox2;
    protected: 

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->label1 = (gcnew System::Windows::Forms::Label());
            this->textBox1 = (gcnew System::Windows::Forms::TextBox());
            this->label2 = (gcnew System::Windows::Forms::Label());
            this->textBox2 = (gcnew System::Windows::Forms::TextBox());
            this->SuspendLayout();
            // 
            // label1
            // 
            this->label1->AutoSize = true;
            this->label1->Location = System::Drawing::Point(12, 9);
            this->label1->Name = L"label1";
            this->label1->Size = System::Drawing::Size(61, 13);
            this->label1->TabIndex = 0;
            this->label1->Text = L"Username :";
            this->label1->Click += gcnew System::EventHandler(this, &Form2::label1_Click);
            // 
            // textBox1
            // 
            this->textBox1->Location = System::Drawing::Point(81, 8);
            this->textBox1->Name = L"textBox1";
            this->textBox1->Size = System::Drawing::Size(108, 20);
            this->textBox1->TabIndex = 1;
            this->textBox1->TextChanged += gcnew System::EventHandler(this, &Form2::textBox1_TextChanged);
            // 
            // label2
            // 
            this->label2->AutoSize = true;
            this->label2->Location = System::Drawing::Point(12, 54);
            this->label2->Name = L"label2";
            this->label2->Size = System::Drawing::Size(59, 13);
            this->label2->TabIndex = 2;
            this->label2->Text = L"Password: ";
            // 
            // textBox2
            // 
            this->textBox2->Location = System::Drawing::Point(81, 47);
            this->textBox2->Name = L"textBox2";
            this->textBox2->Size = System::Drawing::Size(108, 20);
            this->textBox2->TabIndex = 3;
            // 
            // Form2
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(211, 88);
            this->Controls->Add(this->textBox2);
            this->Controls->Add(this->label2);
            this->Controls->Add(this->textBox1);
            this->Controls->Add(this->label1);
            this->DoubleBuffered = true;
            this->FormBorderStyle = System::Windows::Forms::FormBorderStyle::FixedSingle;
            this->MaximizeBox = false;
            this->MinimizeBox = false;
            this->Name = L"Form2";
            this->Text = L"Create an account";
            this->ResumeLayout(false);
            this->PerformLayout();

        }
#pragma endregion
    private: System::Void label1_Click(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void textBox1_TextChanged(System::Object^  sender, System::EventArgs^  e) {
             }
};
} 
```

I know its says its lesson two, but that's just because I was teaching myself some stuff. I pick up this kinda stuff real easy. Except when this happens. Anyone see whats going wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:05:58.483

Form21 很可能在另一个文件中声明，因此编译器找不到 Form21 类型。

在 Form1.h 的顶部，添加`#include "Form21.h"`（或包含 Form21 的类声明的头文件的名称，如果它不同）。

我还建议您阅读有关头文件和 cpp 文件（头文件中似乎有代码）、前向声明和其他一些关于 c++/cli 的基本内容。

编辑：发布`Form2`代码后，错误是该行`Form21^form2=gcnew Form21();`应该是`Form2^form2=gcnew Form2();`. 你声明`Form2`，不是`Form21`。

祝你好运！

# sql-server - Create single XML from SQL Server multiple tables query

> ID：11887369
> 
> 赞同：5
> 
> 时间：2012-08-09T16:00:41.343
> 
> 标签：sql-server, xml

I would like to query multiple tables from SQL Server 2005 and create a single XML document and do this in a stored procedure.

I know that I can query multiple tables within a stored procedure and get a `DataSet` in my .NET application that can be easily saved as XML. However, I'm trying to do something similar within the context of a stored procedure.

Essentially I want to do something like this:

```
declare @x xml
select @x = x.result
from (select y.* from tabley y for xml path('y')
      union
      select a.* from tablea a for xml path('aa')
     ) as x
select @x 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T16:10:55.827

If you want them just one after the other, you can try something like this:

```
SELECT
    (SELECT y.* FROM dbo.TableY FOR XML PATH('y'), TYPE) AS 'YElements',
    (SELECT a.* FROM dbo.TableA FOR XML PATH('aa'), TYPE) AS 'AElements'
FOR XML PATH(''), ROOT('root') 
```

That return an XML something like:

```
<root>
   <YElements>
     <Y>
       ....
     </Y>
     <Y>
       ....
     </Y>
      ......
   </YElements>
   <AElements>
     <A>
       ....
     </A>
     <A>
       ....
     </A>
      ......
   </AElements>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T19:36:38.420

```
SELECT                                                               -- Root Starts
   (SELECT  '1' AS ErrorCode FOR XML PATH(''), TYPE) AS 'Results',   -- Level 1 Starts
       (select                                                       -- Level 2 Starts
             (select      '1'         CustomerID,                    -- Level 2 Detail Starts
                          'John'      CustomerName,
                          'Doe'       CustomerLastname,
                          'Y'         Active
              for xml path('Customers'), type) AS 'Customer'         -- Level 2 Detail Ends
       for xml path(''), TYPE) AS 'Response'                         -- Level 2 Ends
   FOR XML PATH('')                                                  -- Level 1 Ends
,ROOT('BaseXML')                                                     -- Root Ends 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T11:30:29.077

在 sql server 中转换 Table XML。

```
Declare @RESULTXML XML
Declare @SMS_REGISTER TABLE([id] VARCHAR(30),[status] VARCHAR(30))
Declare @EMAIL_REGISTER TABLE([id] VARCHAR(30),[status] VARCHAR(30))
Declare @ODP_REGISTER TABLE([id] VARCHAR(30),[status] VARCHAR(30))

Select @RESULTXML =( 
SELECT (SELECT * FROM @SMS_REGISTER FOR XML PATH('sms'), TYPE) AS 'smss',
         (SELECT * FROM @EMAIL_REGISTER FOR XML PATH('email'), TYPE) AS         'emails',
         (SELECT * FROM @ODP_REGISTER FOR XML PATH('odp'), TYPE) AS 'odps'
    FOR XML PATH('subroot'), ROOT('root') ) 
```

像这样返回 XML

```
    <根>
       <子根>
        <短信>
          <短信>
            <id>NT0000000020</id>
            <status>注册</status>
          </sms>
          <短信>
            <id>NT0000000021</id>
            <status>注册</status>
          </sms>
          <短信>
            <id>NT0000000022</id>
            <status>注册</status>
          </sms>
          <短信>
            <id>NT0000000023</id>
            <status>注册</status>
          </sms>
        </smss>
        <电子邮件>
          <电子邮件>
            <id>NT0000000024</id>
            <status>注册</status>
          </电子邮件>
          <电子邮件>
            <id>NT0000000025</id>
            <status>注册</status>
          </电子邮件>
        </电子邮件>
      </subroot>
     </root>

```

# javascript - javascript onunload 事件行为

> ID：11887370
> 
> 赞同：0
> 
> 时间：2012-08-09T16:00:43.273
> 
> 标签：javascript, android, browser

我们有一个网页（比方说网页 1）有多个 div，根据用户操作显示。

在浏览器返回操作中，页面webpage1 被重定向到另一个页面webpage2。为此，我们正在获取页面 onunload 事件。

此页面多次接收此 onunload 操作，即针对之前加载的所有 div。也就是说，如果在webpage1上，用户之前访问过div1、div2、div3、div4。如果当div4在webpage1上打开时他按下后退按钮，那么我们观察div4-->（后退操作）--> div3-->（后退操作）-->div2-->（后退操作）-->div1- -> （返回操作）--> 收到 div1 的 onunload 事件 --> 收到 div2 的 onunload 事件--> 收到 div3 的 onunload 事件 --> 收到 div4 的 onunload 事件 --> 重定向到网页 1。

为什么会发生？请提供任何线索。此行为适用于 Android 移动浏览器。

# asp.net-mvc - ListViewModel 中的模型或视图模型

> ID：11887373
> 
> 赞同：0
> 
> 时间：2012-08-09T16:00:49.167
> 
> 标签：asp.net-mvc, model, viewmodel

T 应该是例如 Customer 还是 CustomerViewModel ？

绑定到 Mvc 命名空间的注释在 ListViewModel 上，所以实际上我可以传递 Customer 对象。你怎么看？

```
public class ListViewModel<T>
{
        [Required(ErrorMessage="No item selected.")]
        public int[] SelectedIds { get; set; }
        public IEnumerable<T> DisplayList { get; set; }        
} 
```

**更新**

```
[HttpGet]
 public ActionResult Open()
 {
    IEnumerable<Testplan> testplans = _testplanDataProvider.GetTestplans();
    OpenTestplanListViewModel viewModel = new OpenTestplanListViewModel(testplans);         
    return PartialView(viewModel);
 }

public class OpenTestplanListViewModel
{
        public OpenTestplanListViewModel(IEnumerable<Testplan> testplans)
        {
           var testplanViewModels = testplans.Select(t => new TestplanViewModel
           {
             Name = string.Format("{0}-{1}-{2}-{3}", t.Release.Name, t.Template.Name, t.CreatedAt, t.CreatedBy),
              TestplanId = t.TestplanId,
           });

           DisplayList = testplanViewModels;
        }

        [Required(ErrorMessage = "No item selected.")]
        public int[] SelectedIds { get; set; }
        public string Name { get; set; }
        public IEnumerable<TestplanViewModel> DisplayList { get; private set; } 
}

public class TestplanViewModel
{
        public int TestplanId { get; set; }     
        public string Name { get; set; }           
}

 public class Testplan
 {
        public int TestplanId { get; set; }
        public int TemplateId { get; set; }
        public int ReleaseId { get; set; }
        public string CreatedBy { get; set; }       
        public DateTime CreatedAt { get; set; }       
        public Template Template { get; set; }
        public Release Release { get; set; } 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:04:17.317

`T`理想情况下应该是一个视图模型。拥有引用域模型的视图模型是某种混合视图模型，而不是真正的视图模型。但是，如果您认为在这种特定情况下域模型将与视图模型完全相同，那么您也可以保留它。

# javascript - 从 JS 测试驱动程序代码覆盖中排除依赖项

> ID：11887375
> 
> 赞同：2
> 
> 时间：2012-08-09T16:00:54.493
> 
> 标签：javascript, js-test-driver

在我的 JS 测试驱动程序配置文件中，我通过将单元测试放在`test`而不是`load`.

但是，我不能为依赖项执行此操作，例如 Underscore.js 的 jQuery，因为它们需要在我的代码之前加载。

有没有办法解决？还是我只是处理缓慢的代码覆盖运行和统计混乱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:06:24.913

**解决方案1：**

正如格雷格所说，有一种使用“args”参数的方法，但不幸的是，你必须指定完整路径，因为（假设 Windows）：

```
plugin:
- name: "coverage"
  jar: "lib/coverage-1.3.2.jar"
  module: "com.google.jstestdriver.coverage.CoverageModule"
  #Here put the files that have to be ignored by coverage. Non-existent files do not harm.
  args: "
    D:\\apache\\htdocs\\XTIME\\js\\lib\\ext-all.js,
    D:\\apache\\htdocs\\XTIME\\js\\lib\\jquery-1.7.2.min.js,     
  " 
```

对于 linux 文件系统，您不必使用双斜杠。

**解决方案2：**

[此线程](https://code.google.com/p/js-test-driver/issues/detail?id=309)上还有一个 1.3.5 的修补 jar ，允许您排除与正则表达式匹配的文件，因此您将拥有：

```
plugin:
- name: "coverage"
  jar: "lib/coverage-1.3.5.serve-patch.jar"  #this patched jar allows to use excludesRegex
  module: "com.google.jstestdriver.coverage.CoverageModule"
  args: "excludesRegex: /js/lib/.*\\.js$" 
```

正`/js/lib/.*\.js$`则表达式的意思是“排除位于内部的所有 .js 文件`js/lib`”。（有了这个补丁，您不必担心 Windows 反斜杠）

我更喜欢这种方式，因为它是可移植的，因为它不依赖于您的应用程序的特定路径。

[您可以在此处](https://code.google.com/p/js-test-driver/issues/detail?id=309)下载修补版本（在线程中查找评论 11）。

希望这可以帮助。
干杯，来自拉巴斯-玻利维亚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:45:27.670

您可以通过在配置中的“args”下指定库来将库排除在代码覆盖范围之外。但是，请注意路径必须是绝对的。在撰写本文时，最新的 jsTestDriver 代码覆盖插件只会在路径是绝对路径时忽略库。

见[这里](http://code.google.com/p/js-test-driver/issues/detail?id=42#c8)。

# javascript - 如何从内部嵌套函数调用父函数？

> ID：11887378
> 
> 赞同：3
> 
> 时间：2012-08-09T16:01:04.977
> 
> 标签：javascript

我有一个简单的 jQuery`ready`事件，它通过调用对象中的 a 函数来初始化视图`setupView`。

我的问题是，`setSomethingImportant`从`init`函数调用函数的适当方法是什么，如下所示？

`init`由于调用是从与函数不同的执行上下文进行的，`this.setSomethingImportant()`因此不起作用。但是，如果我使用`setupView.setSomethingImportant()`. 我遇到的问题是，如果 var name ( `setupView`) 发生更改，我也必须更改代码主体。

```
 (function() {        
        $(document).ready(function() {              
            setupView.init();               
        });     
         var setupView = {          
            currentState : "CT",            
            init : function () {
               $("#externalProtocol").change( function () {
                    console.log("Changed =" + $(this).val());
                    setSomethingImportant(); 
                               // Question ? how to call a method in the setupView object   
                });         
             },         
             setSomethingImportant : function () {
                 this.currentState="TC";    
                 console.log("Something has changed :" + this.currentState );
             }      
         }  
 }(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:09:31.980

存储`this`到变量中：

```
var setupView = {
    currentState: "CT",
    init: function() {
        // Keep a reference to 'this'
        var self = this;
        $("#externalProtocol").change(function() {
            console.log("Changed =" + $(this).val());

            // Use the old 'this'
            self.setSomethingImportant();
        });
    },
    setSomethingImportant: function() {
        this.currentState = "TC";
        console.log("Something has changed :" + this.currentState);
    }
}; 
```

请参阅[*工作演示*](http://jsfiddle.net/A5K5g/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:09:30.560

只需单独声明该函数，然后像这样调用：

```
function setSomethingImportant(context) {
    context.currentState="TC";    
    console.log("Something has changed :" + context.currentState );
};

(function() {        
        $(document).ready(function() {              
            setupView.init();               
        });     
         var setupView = {          
            currentState : "CT",            
            init : function () {
               $("#externalProtocol").change( function () {
                    console.log("Changed =" + $(this).val());
                    setSomethingImportant(this); 
                               // Question ? how to call a method in the setupView object   
                });         
             },         
             setSomethingImportant : function () {
                 setSomethingImportant(this);
             }      
         }  
}(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:11:34.797

Please note that I changed my original solution. I am now passing data to the event handler using [even.data](http://api.jquery.com/event.data/).

```
(function() {        
    $(document).ready(function() {              
        setupView.init();               
    });     
    var setupView = {          
        currentState : "CT",            
        init : function () {
            $("#externalProtocol").change({ _this: this }, function (event) {
                console.log("Changed =" + $(this).val());
                event.data._this.setSomethingImportant(); 
            });         
        },         
        setSomethingImportant : function () {
            this.currentState="TC";    
            console.log("Something has changed :" + this.currentState );
        }      
    }  
 }(jQuery); 
```

# ruby-on-rails - 使用带有非空白字段的 form_for 创建一个 /new 视图

> ID：11887380
> 
> 赞同：0
> 
> 时间：2012-08-09T16:01:09.447
> 
> 标签：ruby-on-rails

假设我有一个periodic_review 资源。我需要的是，当用户进入新的periodic_review 表单时，表单字段将填充最后一个periodic_review 字段，日期字段除外。（想象一下，从一个daily_review 到另一个，这些字段不会有太大变化）。我在控制器上有这个：

```
 def new
    @periodic_review = PeriodicReview.where(user_id: @user_id).order("revision DESC").first
    @periodic_review.date = nil
  end 
```

这在观点上：

```
<%= form_for(@periodic_review) do |f| %> ... 
```

现在的问题是，因为 form_for 获得了一个非空的@periodic_review，它会生成一个更新表单而不是创建表单，从而在提交时将用户发送到更新。我试过了：

```
@periodic_review.id = nil 
```

低于日期 = nil，但它崩溃了。

如果表单不使用 id 字段，它如何知道它是更新还是创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:31:30.220

我这样做的方法：

```
last_periodic_review = PeriodicReview.where(user_id: @user_id).order("revision DESC").first
options = last_periodic_review.attributes.merge({ date: nil })
@periodic_review = PeriodicReview.build(options) 
```

我认为这比克隆对象更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:14:21.220

```
# rails < 3.1
new_record = old_record.clone

#rails >= 3.1
new_record = old_record.dup 
```

我是你的代码，对于 rails >= 3.1，

```
@periodic_review = PeriodicReview.where(user_id: @user_id).order("revision DESC").first.dup 
```

# javascript - 如何限制 Javascript 加载

> ID：11887382
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:01:18.067
> 
> 标签：javascript, tridion, tridion-2011

我正在尝试按照我们拥有 isAvailable、isEnabled 和 _execute 方法的 js 文件中的以下代码，将超链接添加到 Tridion 功能区。

```
var mydiv = document.getElementById("myDiv");  
var aTag = document.createElement('a');
aTag.setAttribute('href',"yourlink.htm"); 
aTag.innerHTML = "link text"; 
mydiv.appendChild(aTag); 
```

我可以看到功能区上的超链接，但是由于功能区会为我们执行的每个操作而刷新，因此超链接会被创建多次（横向增长）。所以我只需要显示一个超链接。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:46:18.613

你发现自己的问题来自尝试以非标准方式做事。您可以为自定义 UI 控件动态添加元素，而所有其他教程都从扩展配置文件中的按钮声明开始。

*   [如何在 Tridion 的功能区中创建自定义按钮](https://stackoverflow.com/questions/11560300/how-to-create-a-custom-button-in-the-ribbon-of-tridion)

您不是第一个尝试这种“Tridion 上的 jQuery UI 扩展”方法的人。但是您没有找到关于它的教程是有原因的：大多数 Tridion 专家发现***使用***该系统更容易，而不是***反对***它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:17:46.250

虽然我完全同意弗兰克的回答，但对于你的问题，最明显的答案肯定是在你检查它尚未完成之前不要做任何事情。是的，像使用逻辑来确定您的代码是否应该运行这样简单的事情就可以满足您的需要......

# java - 为什么我在 JSF 页面上出现此错误？

> ID：11887383
> 
> 赞同：4
> 
> 时间：2012-08-09T16:01:19.540
> 
> 标签：java, jsf, jakarta-ee, maven, richfaces

我是jsf的新手。我有一个 Maven 项目，它在 websphere 8 上运行。我使用 jsf 和richfaces。我收到此错误：

```
Error Parsing /viewMetadata/index.xhtml: Error Traced[line: 2] The element type "html" must be terminated by the matching end-tagend with '>'. 
```

faces-config.xml 看起来像：（它是 leer。我目前没有 managedbean）

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

</faces-config> 
```

web.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>My project</display-name>
  <welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <context-param>
    <param-name>org.richfaces.skin</param-name>
    <param-value>blueSky</param-value>
  </context-param>
  <context-param>
    <param-name>org.richfaces.enableControlSkinning</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
  </context-param>
  <listener>
    <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
  </listener>

  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>    
  </servlet-mapping>  
</web-app> 
```

最后是我的第一个 jsf 页面.. (index.xhtml)

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
<h:head>
    <title>RichFaces Greeter</title>
</h:head>
<h:body>
    <f:view>
        <h:form>
            <rich:panel header="RichFaces Greeter 5" style="width: 315px">
                <rich:inputNumberSlider minValue="1" maxValue="100"
                    showInput="false" />
                <rich:inputNumberSpinner minValue="1" maxValue="100" />
                <rich:calendar id="date" value="#{bean.dateTest}"
                    oncurrentdateselect="if (!confirm('Are you sure to change month(year)?')){return false;}"
                    oncurrentdateselected="alert('month(year) select:'+event.rich.date.toString());" />

            </rich:panel>

        </h:form>
    </f:view>
</h:body>
</html> 
```

我的 POM.xml 看起来像：（可能缺少一些库？？）

```
<dependencies>
        <dependency>
            <groupId>org.richfaces</groupId>
            <artifactId>richfaces-bom</artifactId>
            <type>pom</type>
            <version>4.2.2.Final</version>
        </dependency>   

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.0.2</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.0.2</version>
        </dependency>
    </dependencies>
    <build>
        <finalName>MyWeb</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:49:55.557

从您的 POM.xml 我判断您正在使用 mojarra JSF 实现。但是您的 web.xml 部分指的是 Apache MyFaces（Mojarra 是 JSF 的参考实现，MyFaces 是 apache 基金会的竞争实现）。让我们坚持使用 mojarra。所以失去了听众。然后您缺少负责处理 JSF 页面的 JSF servlet 的声明，因此必须添加。这是带有建议修改的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>GEm project</display-name>
  <welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <context-param>
    <param-name>org.richfaces.skin</param-name>
    <param-value>blueSky</param-value>
  </context-param>
  <context-param>
    <param-name>org.richfaces.enableControlSkinning</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
  </context-param>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>    
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:07:32.977

错误说它在 index.xhtml 中。你为什么在别处寻找？有时，如果您在不属于它的地方添加了一个额外的标签，它可能会打乱页面的解析。确保所有标签都在正确/预期的位置正确关闭。也就是说，对于每个 <xyz> 标签，都有一个对应的 </xyz> 标签，或者如果不需要结束标签，则使用 <xyz /> 创建它（注意 'z' 和 '/' 之间的空格）。这是 XHTML 而不是 html。所有标签都需要正确关闭。它不像 HTML 那样宽容。并确保结束标签位于正确的位置。

# makefile - 使用 shell 命令 grep 生成文件

> ID：11887384
> 
> 赞同：1
> 
> 时间：2012-08-09T16:01:28.047
> 
> 标签：makefile, grep, conditional

我有一个问题，我整个早上都在敲我的脑袋。我是修改makefile的新手，所以我遇到了一个我不知道如何解决的问题。我正在尝试在目录中搜索以 'Findings.txt' 结尾且具有字符串 'No Findings!' 的任何文件 包含在里面。出于某种原因，我无法让我的条件语句正常工作。我假设它可能与通配符有关，但我尝试过的一切都没有奏效，包括通配符功能。我唯一的想法是外壳可能在路径中存在变量问题。

```
GREP_FINDINGS := $(shell grep 'No Findings'  $(C_DIR)/*Findings.txt) 
```

我想条件化 grep 结果的输出，但我做错了什么。

```
ifeq ($(GREP_FINDINGS), )
    @echo "Nothing was found for current build"    
else  
    @echo "***Found string in Findings.txt***"
endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:24:10.507

Makefile 通常区分大小写，因此您需要使用`ifeq`and `else`，以下内容适用于 GNU Make：

```
ifeq ($(GREP_FINDINGS), )
  @echo true
else
  @echo false
endif 
```

您可能还想检查[一下](http://www.chemie.fu-berlin.de/chemnet/use/info/make/make_7.html)。

# c++ - c ++调用图，但作为文本

> ID：11887400
> 
> 赞同：4
> 
> 时间：2012-08-09T16:02:05.523
> 
> 标签：c++, methods, hierarchy, doxygen, call-graph

对于给定的方法（例如 Settings.cpp getSettingByName()），我想获得调用图的**文本**表示。我听说 doxygen 可以生成调用图的图像，我对文本输出更感兴趣。

例如，如果我给它“Settings.cpp getMethodByName”，它将返回：

```
Settings.cpp getSettingByName();
    SettingsWrapper.cpp getMaximumSpeed();
        ECU.cpp monitorSpeed();
            Operate.cpp runECU();
                Main.cpp run();
        CruiseControl.cpp accelerate();
            Operate.cpp runCruiseControl();
                Main.cpp run();
        Radio.cpp playApplauseThroughSpeakers();
            Operate.cpp runStereo();
                Main.cpp run(); 
```

这可能吗？

非常感谢，菲德尔

附言。不要对代码感到害怕，这只是一个例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T07:47:35.720

我不知道有任何预建的解决方案。

然而，Doxygen 实际上会通过为调用图构建一个 GraphViz 点文件来生成（图像）调用图。Dot 格式是原始文本并且非常简单，因此您可能会发现让 Doxygen 运行并自己解析生成的 .dot 文件最容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-03T19:19:40.483

已经很晚了，但无论如何我还是要提一下。

对于 C 源文件，您绝对可以使用[cflow](https://www.gnu.org/software/cflow/ "流")。它将向您显示您提到的 C 文件的文本输出。

然而，不幸的是，当我尝试使用 C++ 时，输出几乎是垃圾。请记住，我没有彻底研究它的 C++ 特性，我只是想解析 C 文件。它有一个选项标志，`--cpp`尽管它获得了一个 C 预处理器。

# mysql - Magento 获取设定日期之间订单总额的总和

> ID：11887403
> 
> 赞同：4
> 
> 时间：2012-08-09T16:02:15.210
> 
> 标签：mysql, magento, mage

我可以使用常规的 mySQL 来做到这一点，但我希望能够以“magento 方式”做到这一点......

我想做的是运行一个查询，该查询将为我在设定日期之间的订单总额求和（grand_total），即计算出 2012 年 7 月的总收入。

我已经尝试了各种变化，我可能真的很近，或者我可能在一百万英里之外，所以我很感激任何人能给我的帮助！到目前为止，我所拥有的是：

```
$orders = Mage::getModel('sales/order')->getCollection();

$orders->addAttributeToFilter('date_field', array(
'from' => '2011-09-01',
'to' => '2011-09-30',
));
$orders->addExpressionAttributeToSelect('grand_total', 'SUM({{grand_total}})', grand_total);
$orders_total->getSelect()->$orders->grand_total(SUM(grand_total)); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T07:44:31.023

*'magento 方式'*将使用[collections](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)。

您的问题是自 7 月以来的所有订单？如果是这种情况，那么您只需要过滤器中的“发件人”而不是“收件人”...

```
$orderTotals = Mage::getModel('sales/order')->getCollection()
    ->addAttributeToFilter('status', Mage_Sales_Model_Order::STATE_COMPLETE)
    ->addAttributeToFilter('created_at', array('from'  => '2012-07-01'))
    ->addAttributeToSelect('grand_total')
    ->getColumnValues('grand_total')
;
$totalSum = array_sum($orderTotals);

// If you need the value formatted as a price...
$totalSum = Mage::helper('core')->currency($totalSum, true, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:15:24.130

与其尝试通过在查询中添加 mysql 表达式来做到这一点，不如尝试以下操作：

```
$orders = Mage::getModel('sales/order')->getCollection();
$orders->addAttributeToFilter('created_at', array(
'from' => '2011-09-01',
'to' => '2011-09-30',
))
->addAttributeToSelect('grand_total')
->addAttributeToFilter('status', array('eq'=>'complete'))
;
$grandTotal = 0;

foreach($orders as $order)
{
    $grandTotal += $order->getGrand_total();
} 
```

在这里，我们通过集合，然后让 magento 循环遍历它，并将集合中每个订单的总计相加。

请注意，我们更改`'date_field'`为`'created_at'`. 您也可以将所有集合修饰符放在一行上。

我们还添加了过滤器以排除除已完成订单之外的所有内容。如前所述，它也会计算取消订单的总数。如果您想计算取消的订单，只需删除该行。

# visual-studio-2010 - TSQL 调试问题

> ID：11887405
> 
> 赞同：0
> 
> 时间：2012-08-09T16:02:28.237
> 
> 标签：visual-studio-2010, tsql

我正在寻找一种有效的方法来调试复杂而冗长的 T-Sql。我已经找到了这个[http://msdn.microsoft.com/en-us/library/ms241871%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms241871%28v=vs.80%29.aspx)的 MSDN 建议，但是当我设置断点时，它会以“断点不会当前被击中。没有为此文档加载任何符号。” 配置设置为调试而不是发布。我正在运行 Visual Studio 2010 Professional。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:36:36.673

这是一种非最佳建议，但可能会有所帮助。

在proc的顶部声明一个@Debug BIT参数，设置为1，然后添加几个

```
IF @Debug = 1
  SELECT 'Debug statement blahblah' //or report something useful for debugging 
```

这确实会在一定程度上改变 proc，但这种技术在过去一直很有用，尤其是对于冗长而复杂的 proc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:32:28.707

您可以只使用 Management Studio 来调试您的 T-SQL 脚本，除非它涉及自定义 CLR 组件。不要使用 Visual Studio 附加到 sqlservr.exe。

# xna - 我在哪里可以找到 Xna 的免版税游戏资产

> ID：11887406
> 
> 赞同：1
> 
> 时间：2012-08-09T16:02:28.940
> 
> 标签：xna, sprite, textures, texture2d, xnanimation

我目前正在考虑开始使用 xna 来创建一些免费游戏来练习使用该框架进行编程。我正在寻找一些在我的项目中使用的免费游戏美术和音效。它也将帮助我产生想法。它实际上只是为了重新概念并制作具有一些相对良好的纹理和声音效果的基本游戏。我在互联网上看到了一些，但是是否有最好的评论或我能找到的任何评论，因为我访问过的一些网站的版权似乎在其含义上非常优柔寡断。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:12:20.343

好吧，互联网上确实有几个网站，对于我的项目，当我在寻找占位符时，我没有寻找免费艺术，而是寻找网站列表，因为很多网站不包含伟大的艺术，尽管有些人有一些小小的艺术金块。您应该查看其中一些涵盖免费艺术的网站。

[在学习 c#](http://learningcsharp.co.uk/free-game-content/)时可以获得免费的纹理和音效，在[funplosion](http://www.funplosion.com/free-assets.html)中也可以使用。两者都涵盖了许可和相关网站。希望你能找到你要找的东西。

# c# - C# Winforms DateTime - 过滤 XML 文件中的日期

> ID：11887407
> 
> 赞同：0
> 
> 时间：2012-08-09T16:02:38.637
> 
> 标签：c#, xml, winforms, datetime

我的项目想法是创建过滤器，以便我可以过滤掉我希望 XML 文件中的数据出现的内容。我正面临日期时间不一致的问题。我的过滤器目前正在使用文本框。我希望使用 DateTimePicker，但我不知道如何使用它。这是我第一次尝试编程和 C#。基本上只要`<item></item>`标签中的部分数据符合条件（即过滤器），那么整个`<item></item>`将显示在我的 RichTextBox 结果区域中。目前我被困在需要处理日期时间格式的地方。我完全迷路了。

我的部分 XML 文件：

```
<item>
  <title>[alfista] Max</title>
  <author>alfista</author>
  <description>Or was it just populated by non spread betters, so you found it dull and boring??  See where I am coming from?  Puffy just posted general views about direction, and I much prefer them, but then I would wouldnt I.</description>
  <link>http://www.lse.co.uk/shareChat.asp?ShareTicker=BARC&amp;post=5657481</link>
  <pubDate>Tue, 08 Aug 2012 16:08:32 GMT</pubDate>
</item>
<item>
  <title>[Maximillian] F430</title>
  <author>Maximillian</author>
  <description>Ignore the snide comments and please  keep posting in the style you have been. This board was virtually dead until you came along a few weeks ago.  </description>
  <link>http://www.lse.co.uk/shareChat.asp?ShareTicker=BARC&amp;post=5657462</link>
  <pubDate>Tue, 07 Aug 2012 16:05:04 GMT</pubDate>
</item>
<item>
  <title>[colti] divi</title>
  <author>colti</author>
  <description>Does anyone know when the divi is actually paid please</description>
  <link>http://www.lse.co.uk/shareChat.asp?ShareTicker=BARC&amp;post=5658759</link>
  <pubDate>Wed, 06 Aug 2012 06:46:25 GMT</pubDate>
</item>
<item>
  <title>[SamSri] alfista</title>
  <author>SamSri</author>
  <description>Well, sea of knowledge is out there and thus there is always something new to learn. It's better for me to be humble.</description>
  <link>http://www.lse.co.uk/shareChat.asp?ShareTicker=BARC&amp;post=5659714</link>
  <pubDate>Wed, 05 Aug 2012 08:52:35 GMT</pubDate>
</item> 
```

我的功能：

```
private void searchComByStartDate()
{
    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
        XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

        string docPath = fileName;

        xmlDoc.Load(docPath); //* load the XML document from the specified file.

        XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

        foreach (XmlNode node in nodeList)
        {

            XmlElement itemElement = (XmlElement)node;

            string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;

            if (itemDate >= txtComStartDate)
            {
                string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;
                string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;

                richComResults.AppendText("Author: " + itemAuthor + "\nDate: " + itemDate + "\nTitle: " + itemTitle + "\nDescription: " + itemDescription + "\n\n--------\n\n");
            }
        }
    }
} 
```

在这一行`if (itemDate >= txtComStartDate)`中，显然是非常错误的，因为它说“运算符 >= 不能应用于字符串和文本框”。我知道 LINQ to XML 可以让我的生活更轻松，但如果我想坚持使用 XmlDocument，有人可以解决我当前的问题吗？因为我对编程很陌生，所以我对解析 XML 文件只学了很少的东西。

我的 C# winform 中有两个过滤器，它们是`txtComStartDate`和`txtComEndDate`. 用户可以输入`txtComStartDate`或`txtComEndDate`两者都输入。

案例 1：如果`txtComStartDate`- 06/08/12，那么结果将显示在我`richComResults`的仅从`<item></item>`06/08/12 开始到最晚的那个。

* * *

情况 2：如果`txtComEndDate`- 2012 年 7 月 8 日，那么结果将`richComResults`只`<item></item>`显示在 07/08/12 之前出现的那个。

* * *

案例 3：如果`txtComStartDate`- 06/08/12 & `txtComEndDate`- 07/08/12，那么结果将显示在我`richComResults`仅`<item></item>`在这两个日期内发生的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:16:14.680

您需要解析 xml 和文本框值中的日期字符串。看起来你的 xml 日期是`RFC 1123`格式，所以`DateTime.Parse(itemDate)`应该可以工作。至于文本框，这取决于用户，您无法确定他使用的格式是什么。您可以指示他在“dd/MM/yy”（这是您使用的）中输入日期并使用`DateTime.ParseExact`.

```
using System.Globalization;

CultureInfo provider = CultureInfo.InvariantCulture;
if (DateTime.Parse(itemDate) >= DateTime.ParseExact(txtComStartDate.Text, "dd/MM/yy", provider)) 
```

我建议您尝试使用`DateTimePicker`. 有关 DateTime 格式字符串的更多信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# cakephp - 覆盖模型错误消息

> ID：11887412
> 
> 赞同：0
> 
> 时间：2012-08-09T16:02:47.597
> 
> 标签：cakephp

在 CakePHP 2.2.1 上，**我想覆盖视图中的模型错误消息**。我已经使用了这个代码，就像文档说的那样

```
<?php 
echo $this->Form->input('Company.name', 
    array('error' => array('notEmpty' => __('My custom message')))
); ?> 
```

但不知何故它不起作用。

我在模型中的验证是这样的

```
public $validate = array(
    'name' => 'notEmpty',
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:12:36.333

请参阅此示例....您可以在模型中编写这样的自定义消息...

```
'title' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ), 
```

# javascript - 确认视网膜显示图像命名约定和实现

> ID：11887413
> 
> 赞同：1
> 
> 时间：2012-08-09T16:02:49.983
> 
> 标签：javascript, jquery, css, media-queries, retina-display

所以这是我目前所知道的，在具有视网膜显示的 iOS 设备上，它会自动拾取由“@2x”后缀标记的视网膜图像（无需任何编码，假设新的 chrome 也这样做）。如果我错了，请告诉我。我将很快在一个新站点上工作，并将尝试支持 macbook pro 的视网膜显示。我唯一的问题是我不想使用@2x 后缀，而是想使用我定义的东西。我知道我可以用媒体查询或 js 调用图像。@ 符号在命令行中给我们带来了一些麻烦。无论如何，我想避免@2x。

我想确认我是否可以使用不同的后缀命名我的视网膜图像并使用媒体查询或 js 实现它。从理论上讲，它应该像以前对所有设备一样工作，但我不是这个主题的专家，所以我想要一些保证。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:06:58.603

浏览器没有像 iOS 那样通过显示 DPI 进行资产交换的“自动魔法”支持。因此，您可能认为围绕此存在的任何“标准”都不过是松散的约定。如果您想以不同于其他人的方式构建您的多 DPI 支持，那完全取决于您。

# xslt - 从包含 XML 的变量中删除空标签 - XSLT 2.0

> ID：11887415
> 
> 赞同：1
> 
> 时间：2012-08-09T16:03:02.367
> 
> 标签：xslt, xslt-2.0

过去我使用单独的转换删除了空标签，如下所示，但现在我必须在同一个 XSLT 2.0 转换中执行此操作。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*" />
    <xsl:template match="*[not(node()) and not(./@*)]"/>
    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

鉴于此 XML，我想从策略节点中删除所有空标签。XML 最大可达 40 MB 左右：

```
<?xml version="1.0" encoding="UTF-8"?>
<myroot>
    <data>
        <data1>abc</data1>
        <data2>123</data2>
    </data>
    <policy>
        <policydata1>Hello World!</policydata1>
        <policydata2/>
    </policy>
</myroot> 
```

我的想法是使用 XSLT 2.0 我可以将与策略节点相关的转换输出保留在定义为“元素”的变量中，这样我就可以像 XML 一样对待它，然后遍历该变量以删除空标签：

```
 <xsl:variable name="completepolicy" as="element()">
       <policy>
         <policydata1>Hello World!</policydata1>
         <policydata2/>
       </policy>
   </xsl:variable> 
```

如何在变量中合并标签删除而不影响我的转换中的其余模板的答案似乎让我无法理解。你能帮我解决可能很明显的问题吗？

注意我提出围绕“策略”输出的变量的原因是我已经声明了它，因为需要从转换中提取一些消息以在其他地方输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:13:51.637

**只需使用原始转换，但替换**：

```
<xsl:template match="*[not(node()) and not(./@*)]"/> 
```

**与**：

```
<xsl:template match="policy/*[not(node()) and not(@*)]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:57:49.917

我不清楚为什么你不能简单地合并规则

```
<xsl:template match="*[not(node()) and not(./@*)]"/> 
```

在您现有的样式表中，可能具有更高的优先级。我想这取决于其他模板规则在做什么。如果您需要空节点出现在绑定到 $completepolicy 的树中，然后想在处理的第二阶段删除它们，我会使用模式来做到这一点：模板规则适用于每个处理阶段的一种模式。

# codeigniter - Codeigniter：创建类->库->并使用它的过程。非常简单（如果你知道如何）

> ID：11887417
> 
> 赞同：0
> 
> 时间：2012-08-09T16:03:07.660
> 
> 标签：codeigniter

所以，

我想做的是：

我有一个散列密码的代码片段。我想把它放在一个类中，我将从 Controller 调用该类，并在该类中检索操作的返回值并将其转发给 Model。

1.  首先，从控制器我将一个值传递给库的类

    $params = array('pass' => 'pass'); $this->load->library('myblowfish', $params);

    1.  库的类应该返回 2 个值。不知道怎么写。像这样的东西？

    返回数组（$salt，$hashed_pa​​ssword）；

    1.  然后控制器应该选择这些值并将它们转发给模型。我知道如何将它们传递给模型，但不知道如何从它调用的值的类中接收它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:24:03.730

您是否正在尝试实现自己的库？

1.  在库文件夹中创建并实现您的类文件（让我们说 Password_generator.php 与方法 hash(password) ）
2.  在控制器中，通过编写 $this->library->load('Password_generator'); 来导入它
3.  然后在你的控制器中调用它， $hash = $this->password_generator->hash($param);
4.  您现在可以按照习惯的方式将 $hash 传递给模型

如果我想返回两个值，你可以按你说的做：

```
$result = array('salt' => $salt, 'hash' => $hash);
return $result; 
```

它会像这样访问：

```
$result = $this->password_generator->hash($param);
$salt = $result['salt'];
$hash = $result['hash']; 
```

打印可以这样完成：

```
echo 'Salt: '.$salt.'</br>';
echo 'Hash: '.$hash.'</br>';

print_r($result); 
```

您是说您已经尝试了上述方法但没有奏效？

虽然我自己更喜欢这样的标记方法：

```
function hash($password_param, $opCode = "hash"){
   //... body

   if($opCode == "hash")
        return $hash;
   return $salt;
} 
```

这种方式的缺点是如果你想要两个都必须调用它两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:56:41.030

对于这样的事情，我会做：

**应用程序/库/passwords.php**

```
class Passwords {
    public function __construct($pass = null) {
        $this->password = $pass;
    }

    public function hash() {
        $salt = ...;//generate your salt
        $pass = ...;//create your hash
        return array($salt, $pass);
    }
} 
```

**应用程序/控制器/yourController.php**

```
class theControler extends CI_Controller {
    ...

    public function hasher ($pass) {
        include './application/libraries/password.php';

        $pass = new Password($pass);
        list($salt, $hash) = $pass->hash();

        //do what you will with the salt and hash
    }
} 
```

# php - Mindbody API 使用 php SOAP

> ID：11887419
> 
> 赞同：2
> 
> 时间：2012-08-09T16:03:19.080
> 
> 标签：php, soap

一段时间以来，我一直在努力试图弄清楚这个 Mindbody API，并希望这里有人能找到解决方案。因为我要在客户网站上工作，所以我需要一个激活链接来给他们。根据他们拥有的小文档，我需要发送一个带有源名称、密码和站点 ID 的 SOAP xml 请求，它会返回一个包含我需要的信息的 xml 语句。我没有太多使用 SOAP，并且已经阅读了我能找到的所有内容。下面是我现在正在尝试的代码（我已经尝试过其他代码，包括使用 curl）。这是非常基本的，但它是最好的起点。

```
$sourceCredentials = array('SourceName'=>'mysourcename', 'Password'=>"mypassword", 'SiteIDs'=>array('12345'));
    $client = new SoapClient("https://api.mindbodyonline.com/0_5/SiteService.asmx?WSDL"); 
    $result = $client->__soapCall("GetActivationCode", ($sourceCredentials));  
    echo "<pre>"; print_r($result); echo "</pre>"; 
```

我不断收到的错误是

System.NullReferenceException：对象引用未设置为对象的实例。在 mb.API._0_5.SiteService.GetActivationCode（GetActivationCodeRequest 请求）

我也尝试过使用 Githubs 资源，但无法找到我需要的东西。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:48:49.037

如果您仍然遇到问题，我正在写一篇关于[在 30 分钟内开始使用 MINDBODY API](http://blog.devincrossman.com/start-using-the-mindbody-api-in-under-30-minutes-using-php/)的文章，这里还有一个指向我创建[的工具的链接，该工具](http://blog.devincrossman.com/mindbody-api-getactivationcode-tool/)应该为您获取激活码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T01:30:50.023

找到的 API 示例是可悲的。我花了 4-5 个小时试图弄清楚它们，它们有很多错误，没有评论来帮助更好地理解。我的建议是从头开始编写代码。MindBody API 文档真的很模糊，但它们提供了 WSDL url 和方法，这就是你需要知道的。如果您对 PHP 编程和 SOAP 请求有很好的了解。您需要 1-2 小时才能开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:04:22.620

我知道这是一个有点老的问题，但是没有必要手动编写这些请求。MindBody 有一个 PHP API，可以[在 github 上找到](https://github.com/mindbody/API-Examples/tree/master/php)

它不是最好的 API，但你必须做你必须做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T04:16:15.403

您的 SOAP 请求未正确设置，请尝试：

```
$client = new SoapClient("https://api.mindbodyonline.com/0_5/SiteService.asmx?WSDL");
$sourceCredentials = array('SourceName'=>'XXXX', 'Password'=>"XXXX", 'SiteIDs'=>array('XXXX'));
$request = array('SourceCredentials'=>$sourceCredentials);
$result = $client->GetActivationCode(array("Request"=>$request)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-27T10:09:10.177

```
 <?php
/**
 * banarsiamin@gmail.com
 * @author Amin KHAN 
 */
/**
 * Provides route responses for the Example module.
 */
ini_set("user_agent", "FOOBAR");
class MINDBODY_API 
{
    /*
    *WSDL Is xml AND NWSDL simple 
    */
    public $appointmentServiceWSDL = "https://api.mindbodyonline.com/0_5/AppointmentService.asmx?WSDL";
    public $appointmentServiceNWSDL = "https://api.mindbodyonline.com/0_5/AppointmentService.asmx";
    public $classServiceWSDL = "https://api.mindbodyonline.com/0_5/ClassService.asmx?WSDL";
    public $classServiceNWSDL = "https://api.mindbodyonline.com/0_5/ClassService.asmx";
    public $clientServiceWSDL = "https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL";
    public $clientServiceNWSDL = "https://api.mindbodyonline.com/0_5/ClientService.asmx";
    public $dataServiceWSDL = "https://api.mindbodyonline.com/0_5/DataService.asmx?WSDL";
    public $dataServiceNWSDL = "https://api.mindbodyonline.com/0_5/DataService.asmx";
    public $finderServiceWSDL = "https://api.mindbodyonline.com/0_5/FinderService.asmx?WSDL";
    public $finderServiceNWSDL = "https://api.mindbodyonline.com/0_5/FinderService.asmx";
    public $saleServiceWSDL = "https://api.mindbodyonline.com/0_5/SaleService.asmx?WSDL";
    public $saleServiceNWSDL = "https://api.mindbodyonline.com/0_5/SaleService.asmx";
    public $siteServiceWSDL = "https://api.mindbodyonline.com/0_5/SiteService.asmx?WSDL";
    public $siteServiceNWSDL = "https://api.mindbodyonline.com/0_5/SiteService.asmx";
    public $staffServiceWSDL = "https://api.mindbodyonline.com/0_5/StaffService.asmx?WSDL";
    public $staffServiceNWSDL = "https://api.mindbodyonline.com/0_5/StaffService.asmx";

    private $client;
    private $sourceCredentials = array("SourceName"=>'banarsiamin', "Password"=>'123456=', "SiteIDs"=>array('-9999'));
    private $userCredentials = array("Username"=>'Siteowner', "Password"=>'apitest1234', "SiteIDs"=>array('-9999'));

    // CLASS SERVICE //
    function getClasses($params = array()) {
        $this->client = new SoapClient( $this->classServiceWSDL, array("soap_version"=>SOAP_1_1, 'trace'=>true, 
        'exceptions'=>FALSE, "location" => $this->classServiceNWSDL,
       "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {
            $result = $this->client->GetClasses(array("Request"=>$request));
        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }

    //  GetClassSchedules : - Gets a list of class schedules.  //
    function getClassSchedules($params = array()) {
        $this->client = new SoapClient( $this->classServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->classServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {
            $result = $this->client->GetClassSchedules(array("Request"=>$request));
        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }

    function getXMLRequest() {
        return $this->client->__getLastRequest();
    }

    function getXMLResponse() {

        return $this->client->__getLastResponse();
    }

    /*************************************
     *  Staff Service
     *  Provides methods and attributes relating to staff.
     *  The following operations are supported. For a formal definition, please review the Service Description.
     **********************************************************************************************************/

    /*
    *   AddOrUpdateStaff :-  Add or update staff.1712 16894
    */
    function addOrUpdateStaff($params = array()) {
        $this->client = new SoapClient($this->staffServiceWSDL, array('soap_version'=>SOAP_1_1, 'Test'=>FALSE, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->staffServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try { 
                $result = $this->client->AddOrUpdateStaff(array("Request"=>$request)); 
        } 
        catch (SoapFault $s) {  echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;} 
        catch (Exception $e) {  echo 'ERROR: ' . $e->getMessage();  }
        return $result;
    }
    /*
    *   GetStaff :-  Gets a list of staff members.
    */
    function getStaff($params = array()) {
        $this->client = new SoapClient($this->staffServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->staffServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try { 
                $result = $this->client->GetStaff(array("Request"=>$request)); 
        } 
        catch (SoapFault $s) {echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;} 
        catch (Exception $e) {  echo 'ERROR: ' . $e->getMessage();  }
        return $result;
    }
    /*  
    *   GetStaffImgURL :- Gets a staff member's image URL if it exists.
    */
    function getStaffImgURL($params = array()) {
        $this->client = new SoapClient($this->staffServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->staffServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try { 
                $result = $this->client->GetStaffImgURL(array("Request"=>$request)); 
        } 
        catch (SoapFault $s) {echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;} 
        catch (Exception $e) {  echo 'ERROR: ' . $e->getMessage();  }
        return $result;
    }
    /*
    *   GetStaffPermissions :- Gets a list of staff permissions based on the given staff member.
    */
    function getStaffPermissions($params = array()) {
        $this->client = new SoapClient($this->staffServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->staffServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try { 
                $result = $this->client->GetStaffPermissions(array("Request"=>$request)); 
        } 
        catch (SoapFault $s) {echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;} 
        catch (Exception $e) {  echo 'ERROR: ' . $e->getMessage();  }
        return $result;
    }
    /*
    *   ValidateStaffLogin :-  Validates a username and password. This method returns the staff on success. 
    */
    function validateStaffLogin($params = array()) {
        $this->client = new SoapClient($this->staffServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->staffServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try { 
                $result = $this->client->ValidateStaffLogin(array("Request"=>$request)); 
        } 
        catch (SoapFault $s) {echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;} 
        catch (Exception $e) {  echo 'ERROR: ' . $e->getMessage();  }
        return $result;
    }

    /**************END STAFF******************/

    /***************************************************/
    /**************Appointments STAFF******************/
    /*************************************************/

    //  GetStaffAppointments :- Gets a list of appointments that a given staff member is instructing. //
    function GetStaffAppointments($params = array()) {
        $this->client = new soapClient( $this->appointmentServiceWSDL, array("soap_version"=>SOAP_1_1, 'encoding'=>'UTF-8', 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->appointmentServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));

        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);

        try 
        {

            $result = $this->client->GetStaffAppointments(array("Request"=>$request));

        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    //  GetClassSchedules : - Gets a list of class schedules.  //
    function getScheduleItems($params = array()) {
        $this->client = new soapClient( $this->appointmentServiceWSDL, array("soap_version"=>SOAP_1_1, 'encoding'=>'UTF-8', 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->appointmentServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {
            $result = $this->client->GetScheduleItems(array("Request"=>$request));
        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    //  GetBookableItems  : - Gets a list of class schedules.     //
    function getBookableItems($params = array()) {
        $this->client = new soapClient( $this->appointmentServiceWSDL, array("soap_version"=>SOAP_1_1, 'encoding'=>'UTF-8', 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->appointmentServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {  // $client->GetActivationCode(array("Request"=>$request));
            $result = $this->client->GetBookableItems (array("Request"=>$request));
        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /*AddOrUpdateAppointments  :- Adds or updates a list of appointments.*/
    function addUpdateAppointments($params = array()) {
        $this->client = new soapClient( $this->appointmentServiceWSDL, array("soap_version"=>SOAP_1_1, 'encoding'=>'UTF-8', 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->appointmentServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {
            $result = $this->client->AddOrUpdateAppointments(array("Request"=>$request));
        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /* AddOrUpdateAvailabilities :- Adds or updates a list of availabilities.*/
    function addUpdateAvailabilities($params = array()) {
        $this->client = new soapClient( $this->appointmentServiceWSDL, array("soap_version"=>SOAP_1_1, 'encoding'=>'UTF-8', 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->appointmentServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {    
            $result = $this->client->AddOrUpdateAvailabilities(array("Request"=>$request));
        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /************** END Appointments STAFF******************/

    /************** START Service******************/

    /* AddOrUpdateContactLogs   :- Add or update client contact logs..*/
        function AddOrUpdateContactLogs ($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array("soap_version"=>SOAP_1_1,'location'=>$this->clientServiceNWSDL, 'trace'=>true, 'exceptions'=>FALSE, "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try {
            $result = $this->client->AddOrUpdateContactLogs (array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /* GetClients :- Gets a list of clients..*/
    function getClients($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->clientServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        //$result = $client->GetActivationCode(array("Request"=>$request));
        try {
            $result = $this->client->GetClients(array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }

    /* GetClientIndexes  :-Gets a list of currently available client indexes.*/
    function GetClientIndexes ($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->clientServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try {
            $result = $this->client->GetClientIndexes (array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /* GetClientPurchases   :-Get purchases for a client.*/
    function GetClientPurchases ($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->clientServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try {
            $result = $this->client->GetClientPurchases (array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /* GetClientVisits    :-Get purchases for a client.*/
    function GetClientVisits ($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->clientServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try {
            $result = $this->client->GetClientVisits (array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /* GetClientServices     :-Get purchases for a client.*/
    function getClientServices ($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->clientServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try {
            $result = $this->client->GetClientServices (array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /* AddOrUpdateClients     :-Get purchases for a client.*/
    function addOrUpdateClients ($params = array()) {
        $this->client = new SoapClient($this->clientServiceWSDL, array('soap_version'=>SOAP_1_1, 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->clientServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try {
            $result = $this->client->AddOrUpdateClients (array("Request"=>$request));
        } catch (SoapFault $s) {
            echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
            echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }
    /************** END Service******************/

    /***************************************************/
    /**************Site *******************************/
    /*************************************************/

    //  GetSites :- Gets a list of appointments that a given staff member is instructing. //
    function getSites($params = array()) {
        $this->client = new soapClient( $this->siteServiceWSDL, array("soap_version"=>SOAP_1_1, 'encoding'=>'UTF-8', 'trace'=>true, 'exceptions'=>FALSE, "location" => $this->siteServiceNWSDL,
         "stream_context" => stream_context_create( array( 'ssl' => array('verify_peer'=> false,'allow_self_signed' => FALSE)))));
        $request = array_merge(array("SourceCredentials"=>$this->sourceCredentials, "UserCredentials"=>$this->userCredentials),$params);
        try 
        {
            $result = $this->client->GetSites(array("Request"=>$request));

        } catch (SoapFault $s) {
                echo 'ERROR: [' . $s->faultcode . '] ' . $s->faultstring;
        } catch (Exception $e) {
                echo 'ERROR: ' . $e->getMessage();
        }
        return $result;
    }

}
echo "<PRE>";
$mindb              = new MINDBODY_API(); 
$staff          = array('UpdateAction'=>'AddNew',
                    'Clients'=>array( 
                        'Client'=>array(
                        'FirstName'=>'amin',
                        'LastName'=>'khan',
                        'Username'=> 'banarsiamin',
                        'Password'=> 'amin1216$1',
                        'Email'=>'banarsiamin@gmail.com',
                        'MobilePhone'=>'9770534045',
                        'HomePhone'=>'9770534045',
                        'WorkPhone'=>'9770534045',
                        'Address'=>'aminkhanb',
                        'Address2'=>'aminkhanb',
                        'City'=>'aminkhanb',
                        'State'=>'CA',
                        'Country'=>'US',
                        'PostalCode'=>'93401',
                        'ForeignZip'=>'333',
                        'Bio'=>'aminkhanb'
                        )
                    )
                );
    $mail               = 'banarsiamin@gmail.com';
    echo"<BR>";
    //  $addstaff       = $mindb->addOrUpdateClients($staff); // Add Client 
    $result1        = $mindb->getClients(array ('SearchText'=>''));//'SearchText'=>$mail // Get All Cleint
//  print_r($result1);
    $ClientMembers1 = $result1->GetClientsResult;
    //print_r($ClientMembers1);
    $Client1        = $ClientMembers1->Clients;`enter code here`
    //print_r($Client1);
    $getAllClient1  = $Client1->Client;
    print_r($getAllClient1);
?> 
```

# objective-c - 编辑附件类型不显示

> ID：11887421
> 
> 赞同：1
> 
> 时间：2012-08-09T16:03:20.343
> 
> 标签：objective-c, xcode, uitableview

我的一个视图控制器中有一个表格视图，它使用以下方法设置为编辑模式：

`self.navigationItem.rightBarButtonItem = self.editButtonItem;`

我还将单元格的 editingAccessoryType 设置为适当的 UITableViewCellAccessoryType：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  }
  NSString *cellLabel = [cellDetails objectAtIndex:indexPath.row];
  NSString *cellData = [movieDictionary objectForKey:cellLabel];
  cell.textLabel.text = [[NSString alloc] initWithFormat:@"%@ %@", cellLabel, cellData];
  cell.editingAccessoryType = UITableViewCellAccessoryCheckmark;
  cell.accessoryType = UITableViewCellAccessoryNone;
  return cell;
} 
```

内`cellForRowAtIndexPath`。但是，当我点击编辑按钮时，附件不显示。该表正在设置为编辑模式（`setEditing`正在调用）。有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:20:06.383

你实施 setEditing 吗？

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    [self.tableView setEditing:editing animated:animated];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:06:03.473

您正在`UITableViewCellAccessoryCheckmark`使用`editingAccessoryType`. ~~那是行不通的~~。

确保所有其他单元格动画在编辑期间按预期工作。

另外，检查您是否`layoutSubviews`在子类中被覆盖。

如果您无法通过其他方式解决此问题，请考虑设置`editingAccessoryView`为在编辑期间显示您想要显示的内容。

# git - Git - 推送期间文件上传失败

> ID：11887423
> 
> 赞同：0
> 
> 时间：2012-08-09T16:03:28.627
> 
> 标签：git, github, push, tortoisegit

我在这里和谷歌上进行了大量搜索，但找不到这个问题的答案。

我正在使用 GITHUB 和 TORTOISE GIT。

我在 GITHUB 上创建了一个新的存储库，并在我的计算机上克隆了裸存储库，然后将所有文件添加到该项目的目录中，执行 ADD，然后是 COMMIT，然后是 PUSH。

问题是有 1 个文件夹及其所有子目录未能推送到远程存储库，现在我无法将这些文件拉到我的笔记本电脑上。

在我看来，GIT 认为文件在那里，知道它们应该在那里，但是当 PULL 发生时，它不会下载没有被推送的文件。

我不确定在这里做什么？必须有一种方法可以强制 git 重新上传这些文件？我真的必须创建一个新的仓库来推送所有文件吗？

再次感谢您的帮助，如果这个问题已经存在，我非常抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:39:31.903

在 TortoiseGit 中，勾选 Sync Dialog / Push Dialog 中的 force 复选框以执行`git push -f`

# qt - 如何将 QImage 裁剪到其不透明区域？

> ID：11887425
> 
> 赞同：4
> 
> 时间：2012-08-09T16:03:34.500
> 
> 标签：qt, crop, pyside, bounding-box, qimage

如果我有一个带有 alpha 通道的 QImage，如何创建一个新的 QImage，它被裁剪到不透明区域的边界框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:45:21.033

I found another SO answer (in C++) that does this:

[Does Qt have a way to find bounding box of an image?](https://stackoverflow.com/questions/3720947/does-qt-have-a-way-to-find-)

```
def bbox(p):
    bounding-box-of-an-image
    l = p.width()
    t = p.height()
    r = 0
    b = 0

    for y in range(p.height()):
        rowFilled = False
        for x in range(p.width()):
            if qAlpha(p.pixel(x, y)):
                rowFilled = True
                r = max(r, x)
                if l > x:
                    l = x
        if rowFilled:
            t = min(t, y)
            b = y
    return QRect(QPoint(l, t), QPoint(r, b)) 
```

but it would be great if there were a better/faster way to do this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T05:25:37.137

您要实现的是图像处理的一部分。这不是 QImage 中的标准操作。您必须遍历像素并计算边界框。我建议您使用 cv libs 因为它们对此类操作很有用。

# backbone.js - 主干为所有获取设置全局 api url 根

> ID：11887426
> 
> 赞同：3
> 
> 时间：2012-08-09T16:03:36.940
> 
> 标签：backbone.js, backbone-events

我的 API 服务器和我的网站有 2 个不同的 URL！

例如：

```
define([
    'jquery',
    'backbone',
    'underscore',
    'infrastructure/session/session'],
    function($, backbone, _,session){
        var Model = backbone.Model.extend({

            urlRoot: "api/user/"+session.userIdConnected+"/biometrics/motion/scores",

            findFromDate:function (startDate) {
                this.fetch({ data: $.param({ from: startDate}) })
            },
            initialize: function(){

            }
        });

        return Model;
    }); 
```

我的网站 url 上的主干获取是正常的，因为我为我的模型提供了一个相对的 api 调用 url。

有没有什么地方可以为我的所有 API 调用设置全局 url 根？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:59:26.783

我认为[这个链接](https://stackoverflow.com/questions/8217938/backbone-collection-setting-default-api-url-using-requirejs)可以帮助你。

```
define([
    'backbone',
    '../models/communityModel'
], function(Backbone, CommunityModel){
    return Backbone.Collection.extend({
        url: function(){
            return myApp.Settings.DefaultURL + '/communities';
        }, 
        model: CommunityModel,
        initialize: function () {
            // something
        }
    });
}); 
```

使用保存 URL 的 myApp.Settings.DefaultURL 全局变量。

# php - 用于 HTML 的 PHP 包含？

> ID：11887429
> 
> 赞同：27
> 
> 时间：2012-08-09T16:03:58.247
> 
> 标签：php, html, include

我有一个导航栏、一个图像和一个标题，我将在我网站的每个页面中包含它们，所以我想使用 php include 在几个页面中引用此代码。但是，我认为我可能有语法错误或什么，因为当我加载它时它没有呈现任何东西。以下是一些代码片段：

```
<!-- sample page --> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<html>  
<head>  
<?php include ('headings.php'); ?>
</head>
<body>
<?php include ('navbar.php'); ?>
<?php include ('image.php'); ?> 
</body>
</html> 
```

导航栏.php

```
 <?php 

    echo '<ul id="nav">
        <li>
            <a href="Home.html">Home</a>
        </li>
        <li>
            <a>About Me</a>
            <ul>
                <li>
                    <a href="Career.html">Career</a>
                </li>
                <li>
                    <a href="Coding.html">Coding</a>
                </li>
                <li>
                    <a href="Personal.html">Personal</a>
                </li>
            </ul>
        </li>
        <li>
            <a href="Travels.html">Travel</a>
        </li>
        <li>
            <a href="Contact.html">Contact</a>
        </li>
    </ul>';

    ?> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-09T16:07:22.153

You can use `php` code in files with extension `.php` and only there (iff other is not defined in your server settings).

Just rename your file `*.html` to `*.php`

* * *

If you want to allow `php` code processing in files of different format, you have two options to do that:

1) Modifying `httpd.conf` to allow this for all projects on your server, by adding:

```
AddHandler application/x-httpd-php .htm .html 
```

2) Creating `.htaccess` file in your separate project top directory with:

```
<Files />
    AddType application/x-httpd-php .html
</Files> 
```

For second option you need to allow use of `.htaccess` files in your `httpd.conf`, by adding the following settings:

```
AllowOverride All
AccessFileName .htaccess 
```

*that is correct for Apache HTTP Server

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T16:09:55.700

您不需要在 php 文件中回显信息。php`include`将自动在该文件中包含任何 HTML。

确保您实际上使用的是带有`.php`扩展名的索引文件，它`.html`不适用于 php 包含。（除非您告诉您的服务器以其他方式处理 .html 文件）

确保您的路径设置正确。根据您的描述，您设置 header.php/navbar.php/image.php 文件的方式应该在您的根目录中。所以你的根目录应该是这样的：

`index.php
navbar.php
image.php
header.php`

否则，如果这些 PHP 文件位于名为 的文件夹`/includes/`中，则应如下所示：

`<?php include ('includes/headings.php'); ?>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T16:29:16.487

尝试获取一些调试信息，例如文件路径错误。

试试这两件事：- 将此行添加到示例页面的顶部：

```
<?php error_reporting(E_ALL);?> 
```

这将打印页面中的所有错误/警告/通知，因此如果有任何问题，您会收到描述它的文本消息，而不是空白页

此外，您可以将 include() 更改为 require()

```
<?php require ('headings.php'); ?>
<?php require ('navbar.php'); ?>
<?php require ('image.php'); ?> 
```

这将引发致命错误 PHP 无法加载所需的页面，并且应该可以帮助您更好地跟踪问题所在。

您可以在此处发布错误说明，如果您有任何错误说明，但您无法弄清楚它的含义..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T16:16:56.350

第一：别人怎么说。忘记 echo 语句，只需将 navbar.php 编写为常规 HTML 文件。

第二：您的包含路径可能搞砸了。要确保包含与当前文件位于同一目录中的文件，请使用`__DIR__`：

```
include __DIR__.'/navbar.php'; // PHP 5.3 and later
include dirname(__FILE__).'/navbar.php'; // PHP 5.2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-22T14:44:43.653

我想出了一个简单的 PHP 包含东西的解决方案。只需将所有 .html 文件重命名为 .php 即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-26T09:11:32.170

**这是在 html 文件中包含 php 代码的分步过程（已测试）**

如果 PHP 正在工作，那么只需一步即可在具有 *.html 或 *.htm 扩展名的文件中使用 PHP 脚本。神奇的词是“.htaccess”。请参阅 .htaccess 的 Wikipedia 定义以了解更多信息。根据 Wikipedia 的说法，它是“一个目录级配置文件，允许对 Web 服务器配置进行分散管理”。

您可能可以将这样的 .htaccess 配置文件用于您的目的。在我们的例子中，您希望网络服务器解析 HTML 文件，如 PHP 文件。

首先，创建一个空白文本文件并将其命名为“.htaccess”。您可能会问自己为什么文件名以点开头。在类 Unix 系统上，这意味着它是一个点文件，是一个隐藏文件。（注意：如果您的操作系统不允许以点开头的文件名，只需暂时将文件命名为“xyz.htaccess”。在稍后的步骤中将其上传到您的网络服务器后，您可以在线将文件重命名为“. htaccess") 接下来，使用简单的文本编辑器打开文件，例如 MS Windows 中的“编辑器”。将以下行粘贴到文件中： AddType application/x-httpd-php .html .htm 如果这不起作用，请从文件中删除上面的行并将此替代行粘贴到其中，对于 PHP5：AddType application/x- httpd-php5 .html .htm 现在将 .htaccess 文件上传到您的网络服务器的根目录。确保文件名是“.htaccess”。您的网络服务器现在应该解析 *.htm 和 *.html 文件，如 PHP 文件。

您可以通过创建如下所示的 HTML 文件来尝试它是否有效。将其命名为“php-in-html-test.htm”，将以下代码粘贴到其中并将其上传到您的网络服务器的根目录：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
     <HTML>
 <HEAD>
 <TITLE>Use PHP in HTML files</TITLE>
 </HEAD>

   <BODY>
    <h1>
    <?php echo "It works!"; ?>
    </h1>
  </BODY>
 </HTML> 
```

尝试在浏览器中输入以下内容打开该文件：[http](http://www.your-domain.com/php-in-html-test.htm) ://www.your-domain.com/php-in-html-test.htm （再次，请用您自己的域替换 your-domain.com .. .) 如果您的浏览器显示“它有效！” 一切正常，从现在开始，您可以在 .*html 和 *.htm 文件中使用 PHP。但是，如果没有，请尝试使用 .htaccess 文件中的替代行，如上所示。如果仍然无法正常工作，请联系您的托管服务提供商。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-29T04:32:12.837

我有一个类似的问题。似乎 PHP 不喜欢包含文件中的 php 代码。在您的情况下，解决方案非常简单。从 navbar.php 中删除 php 代码，只需在其中保留纯 HTML 即可。

# iphone - 下载后重新组合 NSData 对象

> ID：11887431
> 
> 赞同：0
> 
> 时间：2012-08-09T16:04:05.190
> 
> 标签：iphone, nsdata, nsfilehandle, nsmutabledata

我在服务器端将一个文件分成 50 mb 的数据包，当我在 iPad 上接收它时，我通过 NSURLConnection 作为 NSData 对象接收。要重新拼接数据，我是否创建一个空的 NSMutableData 对象并将数据包按顺序附加在一起？或者我应该使用 NSFileHandle，写入文件，寻找文件结尾，写入下一个文件，寻找文件结尾，冲洗，重复？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:17:06.660

这实际上取决于内存限制。如果 x00M 文件太多而无法在内存中与`NSData`对象一起处理，那么您将不得不采用第二条路线（我认为这是一个很好的方法）。如果您在可接受的范围内，您可以使用 Instruments 进行检查。

看到您想在 iPhone 上执行此操作，您很可能必须通过文件系统执行此操作。

# excel - IF 函数不适用于连接

> ID：11887433
> 
> 赞同：0
> 
> 时间：2012-08-09T16:04:06.723
> 
> 标签：excel, if-statement, concatenation

我有一个比较两个值的 if 函数。

```
=IF(INDIRECT(NextSheetName()&"!A1")&INDIRECT(NextSheetName()&"!B1") = A1&B1, Yes, No) 
```

第一部分：

```
INDIRECT(NextSheetName()&"!A1")&INDIRECT(NextSheetName()&"!B1") 
```

`IF`它自己运行完美，但包含在语句中时它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:15:50.623

更改为 TRUE 和 FALSE 而不是 Yes 和 No。效果很好！

# javascript - Emberjs 调试调用堆栈超出

> ID：11887436
> 
> 赞同：2
> 
> 时间：2012-08-09T16:04:18.453
> 
> 标签：javascript, debugging, ember.js

如何在 Emberjs / js 中有效地调试调用堆栈超出异常或“仅偶尔发生且看似随机的异常”？在过去的一年学习 JavaScript 中，我开发了一堆调试策略，但调用堆栈超过一个特别烦人。

## 调试策略

*   阅读 Emberjs 源代码。不要在开发过程中使用缩小的 Emberjs 库，正常的包含断言语句，帮助您发现错误。了解某事是如何运作的有很大帮助。
*   `console.log(this/variable)`现在您可以查看有关您正在使用的对象的详细信息，并查看其中可用的内容。

*   地方`debugger`陈述

*   更新到最新的 emberjs。
*   **观看[调试 emberjs](http://vimeo.com/37539737)**
*   在编码时使用 jslint，以避免常见的陷阱
*   从错误中吸取教训并重构代码，以免再次发生相同类型的错误。
*   放在`var`所有变量之前，以防止它们成为全局变量并避免很难调试的**名称冲突。**

*   学习分析调用堆栈。

*   学习在出错时将浏览器调试器置于中断状态。您可以通过将 JavaScript 控制台中的中断按钮设置为紫色来做到这一点。

*   使用`ObserveBefore()`in 与 debugger 语句组合来查看绑定 get 的设置时间，以便您可以获得有用的调用堆栈。

*   window.billy 条件设置调试器语句。例子

    ```
    someView = Em.View.extend({
      buggyMethod : function(arguments){
           //only if window.billy is set the debugger is activated.
           //usefull when method is used a lot and only fails sometimes.
           if ( window.billy ) { debugger; }
           ..more code..
      })
    }) 
    ```

*   View 实例有问题？要在控制台中获取视图实例：在视图元素的 dom 树中查找 id：在`<div id="ember667" class=​"ember-view" >`控制台中循环视图实例`Em.view.views[found_id]`

*   当我遇到一些没有提供任何关于为什么我的应用程序崩溃的上下文的错误时，我会禁用越来越多的应用程序，直到我缩小错误代码的范围。

*   使用正确的编码风格、风格指南和**好名字**来避免错误。

*   避免长函数并将它们分解。

*   在车把模板中找出为什么你的东西没有被打印出来。

    *   {{ 日志变量 }}
    *   {{ 调试器 }}

# delphi - 如何通过 Internet 将 Delphi 连接到远程 MS Access 数据库？

> ID：11887440
> 
> 赞同：0
> 
> 时间：2012-08-09T16:04:30.007
> 
> 标签：delphi, ms-access, web-sql

> **可能重复：**
> [如何通过 HTTP 连接到位于 Web 服务器上的 Access 2003 数据库？](https://stackoverflow.com/questions/10167021/how-to-connect-to-an-access-2003-database-located-on-a-web-server-via-http)

我有一个使用 MS Access 数据库来获取报告等的工作 Delphi 程序。现在我想将数据库迁移到运行我的网站的网络服务器。该网站还必须能够连接到数据库，以更新数据（以用户插入联系方式为例）。

我现在如何将我的 Delphi 程序连接到现在位于网络服务器上的数据库，而不会丢失任何功能？这可能吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:33:46.923

其中一种情况是在 ADOConnection.Connectionstring 中提供 DB 计算机 IP 地址：

```
Data Source=X.X.X.X,Port 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:55:30.817

如果您将 Access 数据库迁移到 Web，那么您是在谈论使用 Access 的新 Web 发布功能吗？例如，在下面的视频中途，我切换到在浏览器中 100% 运行 Access 数据库。

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

请注意，不需要 Silverlight 或 ActiveX 下载，这些已发布的 Access 应用程序可在任何符合 Web 标准的浏览器中运行，包括我 iPad 上的 safari。

但是，现在，如果您使用 Delphi 打开该 mdb 文件，请记住您不是连接到该文件，而只是打开一个文件。

我的意思是说我们连接到一个 word 文件，或者我们连接到一个 Power point 文件是愚蠢的。所以在办公套件和那些文件的情况下，我们谈论的是平面简窗口文件。

马是马是马。

文件是文件是文件。

因此，您无需连接到硬盘上的 jpg 文件，而是打开文件。因此，如果您谈论您当前的设置，最好在此处使用正确的术语。您没有连接到该访问文件，但实际上是在打开一个平面 Jane windows 文件。（如果你仔细查看你的连接字符串，它总是有一个完全限定的 Windows 路径名，它解析为位于文件夹中的文件）。

如果您将这样的文件放在 Web 服务器上（而不是使用 Access 的 Web 发布功能），那么您仍然需要打开该 windows 文件。这意味着您需要某种 VPN，并且您还需要适当的 windows 文件和网络系统（因此这意味着如果这是 Linux，您必须运行 samba）。

因此，您无法通过 Web 界面打开文件，即使您使用 FTP 或 http，这些也不是真正的“Windows”网络系统，允许您打开 + 使用平面 Jane Windows 文件。

因此，理论上您可以使用 VPN 将 Windows 网络扩展到服务器，但这不是一种常见的设置，并且在 Internet 上使用 VPN 速度很慢。

因此，请记住您并没有真正连接到某个文件（例如 power point 或某个文件夹中的某个 mdb 文件）的概念——您需要能够打开文件，并且您需要使用 windows 网络系统在 Access 的情况下做这个打开文件。Access实际上对这种打开能力的要求更高，因为使用Excel或Word，可以从服务器上完整下载文件——使用Access，文件不会完整下载，但需要一个真正的工作Windows文件打开命令之前采用。

因此，这里的一个选择是考虑使用 Access 的 Web 发布功能，但在服务器上生成的发布应用程序将不再存储在 accDB 或 mdb 文件中 - 但是从 Delphi 中，您可以使用一组 Web 服务为允许您更新数据的已发布 Access 站点公开 - 没有 oleDB 提供程序，但有 Web 服务，您还可以使用桌面 Access 客户端中的链接表来连接和编辑已发布的 Access Web应用。

# c# - GridView 在 wpf 中占用过多的 CPU

> ID：11887442
> 
> 赞同：0
> 
> 时间：2012-08-09T16:04:33.520
> 
> 标签：c#, wpf, performance, gridview, componentart

我的 wpf 应用程序中有这个 GridView 定义，我也在使用 ComponentArt

```
<my1:GridView Name="gridView1" Theme="ArcticWhite" Indent="40" RowClicked="gridView1_RowClicked_1" AllowColumnFreezing="False" AllowRowFreezing="False" ColumnResizingMode="Normal" AllowColumnReordering="False" AutoGenerateColumns="False" IsHitTestVisible="True" ThemeVariant="Standard" Foreground="#FFDBDBCD">
    <my1:GridView.Columns>
        <my1:GridViewTemplateColumn Binding="{Binding}"  Header="Local">
            <my1:GridViewTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid Margin="-7,-3,-2,-3" Name="grid1">
                        <Grid.Background>
                            <MultiBinding Converter="{StaticResource BackgroundBrushConverter}">
                                <Binding ElementName="r1" Path="Fill"></Binding>
                                <Binding ElementName="cbColores" Path="IsChecked"></Binding>
                            </MultiBinding>
                        </Grid.Background>
                        <Rectangle Name="r1" Fill="{Binding Converter={StaticResource BrushConverter}}" Width="1" Height="1"></Rectangle>
                        <TextBlock Margin="3" Foreground="Black" Text="{Binding Local}" FontFamily="Calibri" FontWeight="Bold" FontSize="13">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="White" BlurRadius="3" ShadowDepth="0" Opacity="5" />
                    </TextBlock.Effect>
                        </TextBlock>
                    </Grid>
                </DataTemplate>
            </my1:GridViewTemplateColumn.CellTemplate>
        </my1:GridViewTemplateColumn>
        <my1:GridViewTemplateColumn Binding="{Binding}"  Header="Linea">
            <my1:GridViewTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid  Margin="-7,-3,-2,-3" Name="grid2">
                        <Grid.Background>
                            <MultiBinding Converter="{StaticResource BackgroundBrushConverter}">
                                <Binding ElementName="r2" Path="Fill"></Binding>
                                <Binding ElementName="cbColores" Path="IsChecked"></Binding>
                            </MultiBinding>
                        </Grid.Background>
                        <Rectangle Name="r2" Fill="{Binding Converter={StaticResource BrushConverter}}" Width="1" Height="1"></Rectangle>
                        <TextBlock Margin="3" Foreground="Black" Text="{Binding Linea}"  FontFamily="Calibri" FontWeight="Bold" FontSize="13">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="White" BlurRadius="3" ShadowDepth="0" Opacity="5" />
                    </TextBlock.Effect>
                        </TextBlock>
                    </Grid>
                </DataTemplate>
            </my1:GridViewTemplateColumn.CellTemplate>
        </my1:GridViewTemplateColumn>
    </my1:GridView.Columns>
</my1:GridView> 
```

当我打开应用程序时，cpu 增加到 50-60%，没有做任何事情；并保持这个速度，直到我关闭应用程序

我可以做些什么来提高性能吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:13:04.007

您可以尝试`DropShadowEffect`从单元格模板中删除 s - 特别是如果您在此网格中有很多单元格并且未启用虚拟化。据我了解，您应该尽量避免同时使用`DropShadowEffect`和`BlurEffect`处理大量目标。

# syncfusion - Syncfusion 许可证和无效的 64 基字符数组。对其他人来说构建得很好

> ID：11887445
> 
> 赞同：2
> 
> 时间：2012-08-09T16:04:59.890
> 
> 标签：syncfusion, licenses.licx

在尝试构建它时，我在不是我自己创建的 Visual Studio 解决方案上收到此错误：

```
System.FormatException: Invalid length for a Base-64 char array.
   at System.Convert.FromBase64String(String s)
   at Syncfusion.Licensing.PublicKeyDecrypt.SyncfusionDecode(String key)
   at Syncfusion.Core.Licensing.UnlockKeyInfo..ctor(String key, String filterVersion)
   at Syncfusion.Core.Licensing.Sweep.GetUnlockKeyInfos()
   at Syncfusion.Core.Licensing.LicenseLog.GetErrorKind()
   at Syncfusion.Core.Licensing.LicenseErrorDialog.GetErrorText()
   at Syncfusion.Core.Licensing.LicenseErrorDialog.InitializeErrorLabel()
   at Syncfusion.Core.Licensing.LicenseErrorDialog.InitializeUI()
   at Syncfusion.Core.Licensing.LicenseErrorDialog..ctor(LicenseLog log)
   at Syncfusion.Core.Licensing.FusionLicenseProvider.GetLicense(LicenseContext context, Type type, Object instance, Boolean allowExceptions)
---------------------------
OK   
--------------------------- 
```

我知道它适用于其他人的事实。我怀疑我的 Syncfusion 安装有问题，尽管 Syncfusion 确实出现在插件列表中，并且在它的许可证管理器中有我在安装它时使用的许可证。

我不知道该去哪里找了……我已经询问过 Syncfusion 的支持，但没有得到答复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:03:55.300

感谢您使用 Syncfusion 产品。

从您的更新中，我们发现您的项目中引用了多个版本的syncfusion.core。

请按照下面提到的步骤解决报告的错误。

1) 在任何文本编辑器中打开您的 Visual Studio 项目文件，并确保您的项目中只存在一个 Syncfusion.Core 引用条目。

2) 如果您的项目中存在多个 Syncfusion.Core 条目，请删除这些条目并确保您的项目中仅存在一个 Syncfusion.Core 条目。

3) 从项目中删除 license.licx 文件（如果存在）并在 Visual Studio 中重新加载项目，因为 Syncfusion 已从版本 8.2 中删除了运行时许可证。因此，无需在使用我们最新版本程序集的项目中添加此文件。

4) 确保项目中所有 Syncfusion 引用的程序集属于相同版本的 Syncfusion，例如 10.3.0.43。

# javascript - $.each() 与 for() 循环 - 和性能

> ID：11887450
> 
> 赞同：75
> 
> 时间：2012-08-09T16:05:27.110
> 
> 标签：javascript, jquery

这些主要只是我一直想知道的一些事情，也许有人可以给我更多的见解，我也会分享我到目前为止所注意到的！

我一直想知道的第一件事......有什么好的或理由使用的区别：

`$('element').each(function (i, el) { });`

- 相对 -

`$.each($('element'), function (i, el) { });`

查看 jQuery 文档，我看不出其中一个有任何押韵或原因（也许你知道一个实例或一个可以做的其他事情。

**但更重要的是我关心这里的*速度***

```
// As opposed to $.each() looping through a jQuery object
// -- 8x faster 
for (var i = 0, $('.whatever').length; i < len; i++) {
    $('.whatever')[i] // do stuff
} 
```

如果你**[在这里查看这个 jsFiddle DEMO](http://jsfiddle.net/3ySng/1/)**，你会发现速度上的差异基本上与它们中的任何一个相同，但更重要的是我觉得我应该*总是*使用`for()`循环......

我只是进行单元测试（循环遍历 5 个不同的场景函数中的每一个，50,000 次），简单地遍历一堆列表项，并设置 a `data-newAttr`，没什么特别的。

* * *

**问题 :: 我想我最大的问题是，为什么在遍历对象时不*总是使用 for 循环？*使用 $.each() 有什么意义吗？即使在浏览 jQuery 对象时，您是否总是使用 for() 循环？**

**[jsFiddle 演示在这里](http://jsfiddle.net/3ySng/1/)**

```
Function type:                  Execution Time:
_testArea.each() + $(this)               1947   <-- using $(this) slows it down tremendously
$.each()         + $(this)               1940
_testArea.each() + el(plain JS)           458   <-- using the Element speeds things up
$.each()         + el(plain JS)           452
for() loop       + plainJS[0] iteration   236   <-- over 8x faster 
```

只是我的2美分。:)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-09T16:11:43.277

允许您执行循环`.each()`无法完成的一件事是**链接**。`for`

 **```
$('.rows').each(function(i, el) {
    // do something with ALL the rows
}).filter('.even').each(function(i, el) {
    // do something with the even rows
}); 
```

* * *

[我玩弄了您的**JSFiddle**](http://jsfiddle.net/3ySng/3/)，以了解在您必须遍历原始匹配元素集的子集的情况下，链接将如何影响性能。

结果并没有那么出乎意料，尽管我认为[`end()`](http://api.jquery.com/end/)这里的开销被夸大了，因为元素少，循环多。除此之外：普通的 JS 循环仍然稍微快一些，但这是否与增加的`.each()`（和链接）的可读性有关还有待商榷。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-09T16:28:53.167

你得到的一件事`.each()`是自动本地范围界定（因为你正在为每个对象调用一个匿名函数），这反过来意味着如果你在每次迭代中创建更多的匿名函数/闭包/事件处理程序/无论什么，你永远不必担心你的处理程序共享一个变量。也就是说，JavaScript 在局部作用域方面的表现与其他语言不同，但是因为您可以在任何地方声明变量，所以它有时会欺骗您。

换句话说，这是错误的：

```
var idx,el;
for (idx = 0; idx <someObjectArray.length; idx++){
   el = someObjectArray[idx]
   el.someEventHandler(function(){  
       alert( "this is element " + idx);
   }); 
} 
```

每当这些对象中的任何一个在此循环之后调用它们的“someEvent”（请注意，这是组成的），警报总是会说出最后分配给 的任何内容`idx`，应该是（截至调用的时间）`someObjectArray.length`；

为了确保保存正确的索引，您必须声明一个本地范围，创建一个变量并分配给该变量以供使用。

```
var idx,el;
for (idx = 0; idx <someObjectArray.length; idx++){
   el = someObjectArray[idx];
   (function(){
       var localidx = idx;
       el.someEventHandler(function(){  
           alert( "this is element " + localidx);
       }); 
   })();
} 
```

如您所见，这非常丑陋，但它应该可以工作。每个事件处理程序都有自己的副本`localidx`

现在将其与`.each()`

```
$(someObjectArray).each(function (idx, el) { 
   el.someEventHandler(function(){  
       alert( "this is element " + idx);
   }); 
}); 
```

简单很多，不是吗？

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-10T22:56:01.013

## jQuery.each 与 for 循环

jQuery.each 的优点：

*   非常适合 jQuery 代码（链接和样式）。
*   不用担心范围（对迭代器和对象的引用将是持久的）。
*   可以通用（用于所有类型的对象和迭代对象键）。

for循环的优点：

*   高性能（用于游戏/动画/大型数据集）。
*   完全控制迭代器（跳过项目、从列表拼接项目等）。
*   for 循环将始终有效，因为它不依赖于 jQuery。
*   与大多数其他类似语言相同的熟悉语法。

## 示例代码

这是我喜欢如何迭代列表的示例代码。

```
var list = ['a', 'b', 'c', 'd', 'e', 'f']; 
```

jQuery.每个：

```
$.each(list, function(i, v)
{
    // code...
}); 
```

没有闭包的for循环：

```
for(var i=0,v,n=list.length;i<n;i+=1)
{
    v = list[i];
    // code...
} 
```

带闭包的 For 循环：

```
for(var i=0,n=list.length;i<n;i+=1)
{
    (function(i, v)
    {
        // code...
    })(i, list[i]);
} 
```

*注意：我建议你只使用标准的 for 循环，并且只在必要时使用闭包。但是，当您的代码看起来更像 jQuery 而不是 Javascript 时，使用`$.each`. 如果出现性能问题，您可以随时查看它。*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-28T20:04:01.243

我之前进行了一些简单的性能测试[http://jsperf.com/forloops3](http://jsperf.com/forloops3)。似乎坚持简单的，旧`for loop`的（可能的）是要走的路:)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-09T16:17:38.540

当我访问您的链接时，我得到了两个数字：

```
$.each() + el(plain JS) 401
for() loop + plainJS[0] iteration   377 
```

如果差异那么小，那么选择最易读的那个，但是，如果您对时间要求很高，那么您可能只需要选择最终最快的那个。

我建议您编写程序以使用三种不同的方法，即上述两种方法，然后使用较新版本的 javascript 中的 foreach，对于不支持它的浏览器，您可以将其添加为原型。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

你知道你的要求是什么，你的程序会做什么，所以只需编写你自己的测试并确保它满足你将支持的浏览器的要求。

对于您的第一个问题，我会选择它，`$('element').each`因为它更容易阅读，但这只是我的意见。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-24T00:26:23.230

实际上 $.each() 和 $().each() 之间有很大的区别。

根据您传入的内容，它们会做些许不同的事情。

[http://api.jquery.com/each/](http://api.jquery.com/each/)与[http://api.jquery.com/jquery.each/](http://api.jquery.com/jquery.each/)

jquery.each 是一个通用迭代器，其中 $().each() 特定于一个 jquery 集合。

另见：http: [//jsperf.com/each-vs-each-vs-for-in/9](http://jsperf.com/each-vs-each-vs-for-in/9)**

# authentication - 以编程方式验证登录名（用户名和密码）

> ID：11887452
> 
> 赞同：0
> 
> 时间：2012-08-09T16:05:48.717
> 
> 标签：authentication, wordpress

我正在编写一个插件，它需要检查给定的用户名和密码是否可以登录用户。我不想让这个用户登录。这`wp_signon()`对我来说是个问题，因为它以编程方式登录拥有凭据的用户。

基本上我需要做什么`wp_signon()`，而是返回 TRUE/FALSE 而不是自动登录。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:51:16.860

我发现这个函数已经存在：`wp_authenticate();`

它根本没有记录在法典中！但是你可以在[这里查一下](http://wpseek.com/wp_authenticate/)。

[更新：您可以在此处](https://wordpress.stackexchange.com/questions/61353/how-to-check-username-password-without-signing-in-the-user)阅读更好的潜在解决方案。

# objective-c - Xcode 4.4.1 & Core Plot：编译 Core Plot 演示应用程序时出现 Apple LLVM 编译器错误

> ID：11887459
> 
> 赞同：1
> 
> 时间：2012-08-09T16:06:20.280
> 
> 标签：objective-c, ios, xcode, core-plot, clang

我刚刚升级到 Xcode 4.4.1 并在尝试编译 Core Plot (`Plot_Gallery_iOS`和`CPTTestApp_iPad`) 中包含的演示应用程序时收到以下错误消息：

```
clang: error: -Z-reserved-lib-stdc++: 'linker' input unused when '-c' is present
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

但是，我能够使用 Xcode 4.4 编译和运行演示应用程序。

我必须更改 Xcode 中的某些设置吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:05:46.327

从存储库中获取最新代码。这已在那里修复。

问题在于一系列较旧的构建设置。在核心框架项目中查找`OTHER_CPTLUSPLUSFLAGS`构建设置并将其删除（您也可以安全地删除出现在 Xcode 列表底部的其他过时的构建设置）。在 Other C Flags 列表中，我相信您也必须删除该`-lsdtc++`设置。

同样，这些已在最新的存储库代码中得到修复，还有一些其他问题，因此您可能应该获取它而不是打包的 1.0 Zip 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:24:31.423

您是否更改了 Xcode 设置

1.  打开您的应用程序目标构建设置，其他链接器标志包括：

-对象

[核心情节设置链接](http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications)

我想可能是对你有用

# java - 让 AnimationDrawable 向前移动

> ID：11887462
> 
> 赞同：0
> 
> 时间：2012-08-09T16:06:24.567
> 
> 标签：java, android, drawable, android-animation

全部- 我有一个简单的应用程序，我希望一个人在屏幕上走过。现在，动画就像一本便签翻书一样发生在一个地方。换句话说，框架在一个地方发生变化，就像纺车一样。我的问题是**如何让动画前进（以我想要的速度）以及改变帧？**这是我关于这个问题的代码：

```
public void start(View v) {  
    ImageView img = (ImageView)findViewById(R.id.imageView); 
    img.setBackgroundResource(R.drawable.animation); 
    AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();                
    frameAnimation.start();
} 
```

感谢您的时间和精力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:56:18.150

你可以做这样的事情，使用你自己的形象（男人的形象）：

主类：

```
package com.android.animation;

import android.app.Activity;
import android.os.Bundle;

public class Main extends Activity 
{

    Animation myView;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myView = new Animation(this);
        setContentView(myView);
    }
} 
```

动画类：

```
package com.android.animation;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.View;

public class Animation extends View
{
Bitmap gBall;
float changingY;

public Animation(Context content)
{
    super(content);

    gBall = BitmapFactory.decodeResource(getResources(), R.drawable.ball);
    changingY = 0;
}

@Override
protected void onDraw(Canvas canvas)
{
    super.onDraw(canvas);
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(gBall, (canvas.getWidth()/2), changingY, null);
    if(changingY < canvas.getHeight())
        changingY += 10;
    else
        changingY = 0;

    invalidate();
}
} 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

</LinearLayout> 
```

事实上，如果你愿意，你可以继续复制粘贴我的代码，看看它是如何工作的（确保将图像放在 drawable-hdpi 文件夹中）......你应该能够将它用作项目的模板. 希望能帮助到你！

P.S You could of course, change the `ChangingY` variable to `ChangingX` (for example; of course you would have to change a couple other things like the `drawBitmap()` method.. not hard though) to make the ball move in a horizontal line... see how it works out for you.

# mysql - MySQL running query with a math function on float with decimal returning wrong result

> ID：11887468
> 
> 赞同：1
> 
> 时间：2012-08-09T16:07:08.280
> 
> 标签：mysql

Ok so I have a weird issue where I am running a query that in the select it is taking the result and multiplying that by 2000 i.e. 0.0025 * 2000 and giving me 4.9999888419121 or something when it should be 5\. I have seen that there are issues with this but I have yet to find if there was a solution. I thought that math was like a basic computing function why would it fail in such a simple request as multiplication.

I am not sure that there is a fix for this, I really have been researching it but I figure that if anyone knew of one it would be here.

thanks again

example:

```
SELECT (table.rate * 2000) as per_ton ... 
```

I have tried the + 0.0000 tricks and all without luck

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:16:11.763

这个问题不是 MySQL 独有的。这是 IEEE 浮点表示的常见问题，它存储十进制值的近似值。（IEEE 浮点类型存储精确的 base 2 表示。）

因此，这不是乘法运算的“失败”。您为 rate 存储的值（显然）是 0.0025 的十进制值。这个值不能用 IEEE 浮点数精确表示，所以存储的是最接近的可能近似值。当该近似值乘以 2000 时，结果也是一个近似值，然后将其转换回十进制以进行显示。

“修复”是使用 DECIMAL 数据类型，而不是浮点类型，并且使用“大十进制”运算而不是浮点运算来执行乘法运算。

在进行乘法之前，您可以尝试通过将其转换回指定精度的小数来反转该近似值：

```
SELECT (CAST(table.rate AS DECIMAL(18,4) * 2000) AS per_ton ... 
```

或者，您可以尝试使用 ROUND() 函数来修剪不需要的精度数字，例如

```
SELECT ROUND((table.rate * 2000),4) AS per_ton ... 
```

这将使结果四舍五入到 5.0000

不过，真正的“修复”是使用 DECIMAL 数据类型定义列，并完全避免使用浮点列。

浮点值的这种行为有据可查，尽管在手册的末尾：

[http://dev.mysql.com/doc/refman/5.1/en/problems-with-float.html](http://dev.mysql.com/doc/refman/5.1/en/problems-with-float.html)

# javascript - Firefox doesn't run my scripts

> ID：11887471
> 
> 赞同：0
> 
> 时间：2012-08-09T16:07:18.603
> 
> 标签：javascript, html, firefox

I have a simple page put together and it works great in IE, and Safari, but Firefox refuses to run the scripts... Can anyone pinpoint why? (Firefox v 3.6.19)

The Script File

```
// JavaScript Document
function spacesToPluses () {
    var resu = myform2.input3.value.replace (/\W/g, '\+');

    myform2.input4.value = resu;
}
function joinFieldsWithSpaces () {
    var first = myform2.inputbox.value;
    var second = myform2.input2.value;
    var third = first+" "+second;

    myform2.input3.value = third;

}

// GeoCoding Script

  var geocoder;
  var map;
  function initialize() {

    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(29.994638, -95.488186);
    var myOptions = {
      zoom: 10,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

  }

  function codeAddress() {

    var sAddress = document.getElementById("inputTextAddress").value;
    var lon;
    var lat;
    var splittingPoint;
    var stoppingPoint;

    geocoder.geocode( { 'address': sAddress}, function(results, status) {

        if (status == google.maps.GeocoderStatus.OK) {

            myform.numberLoc.value = results[0].geometry.location;
                alert(myform.numberLoc.value);

                if (myform.numberLoc.value.indexOf(",")!=-1){
                  alert(myform.numberLoc.value.indexOf(","))
                  splittingPoint = myform.numberLoc.value.indexOf(",");
                }
                if (myform.numberLoc.value.indexOf(")")!=-1){
                  alert(myform.numberLoc.value.indexOf(")"))
                  stoppingPoint = myform.numberLoc.value.indexOf(")");
                }

                lat = myform.numberLoc.value.substring(1, splittingPoint);
                lon = myform.numberLoc.value.substring(splittingPoint+2, stoppingPoint);

                myform.myLat.value = lat;
                myform.myLon.value = lon;

        } else {

            alert("Geocode was not successful for the following reason: " + status);
        }
      });
  } 
```

The HTML file I'm using is here:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="robots" content="noindex/nofollow" />

<title>Test Input</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript"src="StringScripts.js"></script>
</head>
<body onload="initialize()">
<h1>String Manipulation</h1>
<form action="" method="get" name="myform2" id="myform2">Enter something in the box: <br />
<input type="text" name="inputbox" value="" /><br /><br />
<input type="text" name="input2" value="" /><br /><br />

<input type="button" name="button" value="Combine Field 1 and 2" onclick="joinFieldsWithSpaces()" /><br /><br />
<input type="text" name="input3" value="" /><br /><br />

<input type="button" name="button" value="Click to add Plus Signs to Box 3" onclick="spacesToPluses()" />
<br /><br />
<input type="text" name="input4" value="" /><br /><br />
</form>
<hr />
<br />
<h1>Geocoding</h1>

<form name="myform" id="myform">

        <!--Create a text box input for the user to enter the street address-->
        Address: <input type="text" id="inputTextAddress" style=" width:200px" title="Address to Geocode"/>

        <!--Create a button input for the user to click to geocode the address-->
        <input type="button" onclick="codeAddress()" id="inputButtonGeocode" style="width:150px" title="Click to Geocode" value="Click to Geocode" /><br /><br />

        Latitude, Longitude: <input type="text" name="numberLoc" style=" width:200px" id="numberLoc" value="nothing entered yet"  /><br /><br />

        &nbsp;&nbsp;&nbsp;Latitude: <input type="text" name="myLat" style="width:125px" id="myLat" value="Null"  /><br />

        Longitude: <input type="text" name="myLon" style="width:125px" id="myLon" value="Null"  />

        </form>
</body>
</html>​ 
```

Any help would be greatly appreciated. I have never run into this problem before. I checked FF and I have JavaScript enabled, I don't have anything blocked, no plugins that would interfere with it.

I really am confused here, and I'm sure it's going to be one tiny thing I'm missing and will kick myself for not knowing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:15:20.177

好的，我发现出了什么问题。显然 Firefox 要求您首先从文档中处理表单（例如，document.myform2.inputbox.value） 我错过了“文档”。

将其插入列表中，现在可以使用。

# php - PHP associative-esque array with numbers as keys

> ID：11887474
> 
> 赞同：1
> 
> 时间：2012-08-09T16:07:22.587
> 
> 标签：php, arrays

I'm a little new to PHP and I'm not sure if this is used or discouraged or whatever. I'm wondering how PHP handles this kind of array and whether or not I should use it.

The array looks something like this.

```
$arr = [0x00010000 => $valueOne, 0x00020000 => $valueTwo] // and so on 
```

The `value` variables represent a single number that is somewhere between the surrounding keys. E.g. `valueOne` ranges from `0x0001000` to `0x0001FFF`. The array is expanded using the same pattern as more values are needed.

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:08:58.013

There's nothing wrong with what you're doing, you're just using a numerically indexed array, but instead of using decimal notation to define the keys, you're using hex notation. PHP handles both cases (decimal and hex) in the same way.

The following in decimal is equivalent:

```
[ 4096 => $valueOne, 8192 => $value ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:46:03.533

Arrays are always associative in PHP. There's nothing particularly odd about your code, aside from the square bracket initializer (which is PHP 5.4-only syntax so people avoid using it).

One thing to keep in mind is that foreach() will return the items in the order they were put in. If you do $arr[0x00000010] = $valueThree some time later, it will not come before the item with the index 0x00001000\. This lack of order is going to make it impossible to determine whether a key falls between two keys. You would need to use ksort() to keep the items in order.

You're probably better off storing the start and end index of the range as value in an object instead. The logic of determining whether a key falls within a particular range becomes far easier:

```
foreach($ranges as $range) {
   if($value >= $range->start && $value < $range->end) {
      return $range->value;
   }
} 
```

# python - Running python from windows command prompt on many files

> ID：11887475
> 
> 赞同：3
> 
> 时间：2012-08-09T16:07:30.013
> 
> 标签：python, windows, directory, command-prompt

This is a stupid question, and I know it is, but for some reason I can't find any useful tutorials for running python from windows command prompt so I'll have to ask you guys. I have a script I need to run on all files starting FY*.txt or WS*.txt in one directory. I've tried going to the directory through command prompt and doing

```
for file in FY*.txt; do python my_script.py 
```

which just informs me that 'file' is unexpected at this time. I've also tried

```
python my_script.py FY1.txt FY2.txt FY3.txt 
```

with

```
import sys
inputfilenames=sys.argv[1:27]

for name in inputfilenames:
    datafile=open(name,'r') 
```

as the way I open my files in the python script itself. This seems to only run the script on one file, rather than all of them.

I apologise for my ignorance, I really have no clue how to use command prompt to run python things. As well as answers, if anyone has any tutorial recommendations I would be very, very grateful.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:23:09.797

我不太确定最初的示例应该是什么，但要从标准 Windows 命令提示符执行此操作，您可以使用以下内容：

```
for %G in (FY*.txt); do python my_script.py %G 
```

如果你做这样的事情，你的代码中需要类似下面的内容：

```
with open(sys.argv[1], 'r') as f:
    do_something_with(f) 
```

或者，您可以考虑使用该[`fileinput`](http://docs.python.org/library/fileinput.html#module-fileinput)模块来获取第二个示例中的文件列表并处理它们。也就是说，在您的脚本中，您将拥有如下内容：

```
for line in fileinput.input():
    do_something_with(line) 
```

或者您可以将通配符表达式作为参数并使用该[`glob`](http://docs.python.org/library/glob.html)模块，这样您就可以运行：

```
python my_script.py FY*.txt 
```

然后在您的脚本中执行以下操作：

```
for file in glob.glob(sys.argv[1]):
     with open(file, 'r') as f:
         do_something_to(f) 
```

glob 可以在多个参数上运行：

```
for files in([glob.glob(arg) for arg in sys.argv[1:]]):
    for file in files:
        with open(file, 'r') as f:
            do_something_to(f) 
```

这将允许您执行：

```
python my_script FY*.txt WS*.txt 
```

# jquery - jQuery Image Swap with Link and Colorbox

> ID：11887477
> 
> 赞同：1
> 
> 时间：2012-08-09T16:07:41.337
> 
> 标签：jquery, image, gallery, colorbox, swap

I'm trying to make a relatively simple gallery which has 3 sizes for the images: -

1.  fullsize - this is linked to using "colorbox" for a modal display
2.  mediumsize - there is only one of these on the page, it is what's clicked to trigger the colorbox
3.  thumbnail- these are under the medium sized image. Clicking on these replaces the medium sized image with the relevant image (depending on which thumbnail is clicked), and also replaces the href for the colorbox link on the medium image.

Here's what I've got so far, simplified. Note that the filenames / paths will never be this simple, so I can't use manipulation of them as a solution.

```
<script type="text/javascript">
    $(document).ready(function() {

        //gallery image swap
        $("#gallery a").click(function(){
            $('#main-img').attr('href',$(this).attr('href'));

            // swap image with fade in-out
            var src = $(this).attr("rel");
            $("#themediumimage").fadeOut(50, function() {
                $(this).attr("src", src).fadeIn(300);
            });

        });

    });
</script>

<a class="colorbox" href="path/to/mainimage_fullsize.jpg" rel="colorbox-gallery" id="main-img"><img border="0" id="themediumimage" src="path/to/mainimage_mediumsize.jpg" /></a>
<a class="colorbox" href="path/to/extraimage1_fullsize.jpg" rel="colorbox-gallery"></a>
<a class="colorbox" href="path/to/extraimage2_fullsize.jpg" rel="colorbox-gallery"></a>
<a class="colorbox" href="path/to/extraimage3_fullsize.jpg" rel="colorbox-gallery"></a>
<a class="colorbox" href="path/to/extraimage4_fullsize.jpg" rel="colorbox-gallery"></a>
<a class="colorbox" href="path/to/extraimage5_fullsize.jpg" rel="colorbox-gallery"></a>

<div id="gallery">
    <a href="path/to/mainimage.jpg" rel="path/to/mainimage_mediumsize.jpg"><img src="path/to/mainimage_thumbnail.jpg" onclick="javascript: return false;" style="cursor:pointer;" /></a>
    <a href="path/to/extraimage1.jpg" rel="path/to/extraimage1_mediumsize.jpg"><img src="path/to/extraimage1_thumbnail.jpg" onclick="javascript: return false;" style="cursor:pointer;" /></a>
    <a href="path/to/extraimage2.jpg" rel="path/to/extraimage2_mediumsize.jpg"><img src="path/to/extraimage2_thumbnail.jpg" onclick="javascript: return false;" style="cursor:pointer;" /></a>
    <a href="path/to/extraimage3.jpg" rel="path/to/extraimage3_mediumsize.jpg"><img src="path/to/extraimage3_thumbnail.jpg" onclick="javascript: return false;" style="cursor:pointer;" /></a>
    <a href="path/to/extraimage4.jpg" rel="path/to/extraimage4_mediumsize.jpg"><img src="path/to/extraimage4_thumbnail.jpg" onclick="javascript: return false;" style="cursor:pointer;" /></a>
    <a href="path/to/extraimage5.jpg" rel="path/to/extraimage5_mediumsize.jpg"><img src="path/to/extraimage5_thumbnail.jpg" onclick="javascript: return false;" style="cursor:pointer;" /></a>
</div> 
```

This works *pretty* well, the "medium" image is changed by clicking on the thumbnails, and the correct full size image is shown in the colorbox modal if you then click on the new medium image.

The only problem is, if you click on, for example, the 3rd thumbnail, then click on the medium image, the correct fullsize image shows but it is incorrectly referenced as "Image 1 of 6" and then correctly as "Image 3 of 6" when advancing through the colorbox back / forward buttons. In other words, the colorbox sequence is changed to: -

#3 #2 #3 #4 #5 #6

the original number one is gone completely from the sequence. I know why this is happening, the javascript I have is completely replacing image #1's src and href.

I feel I'm really close to what I ideally want, which is as I have but when the "medium" image is changed to #3, clicking on it brings the colorbox up with "Image 3 of 6" and #1 will still be in the right place in the colorbox sequence.

The number of images can change but will always be 2, 3, 4, 5 or 6.

Any help would be greatly appreciated!

EDIT: Using jQuery 1.4.4.

# sql - Symfony2 - CreateBuilder - 在其他查询中查询

> ID：11887478
> 
> 赞同：1
> 
> 时间：2012-08-09T16:07:55.093
> 
> 标签：sql, symfony, doctrine

我们如何在 Symfony 2 中使用教义执行这个查询：

SQL：

```
SELECT p.* FROM messages, (SELECT * from posts ORDER BY created_at DESC) as p GROUP BY p.category_id ORDER BY message.created_at; 
```

问题：每个表都必须是像 MyProjectMyBundle:MyEntity 这样的实体，**（SELECT * from posts ORDER BY created_at DESC）**不是实体...

Symfony 2（不起作用）：

```
$query = $em->createQuery('SELECT p.* 
              FROM MyProjectMyBundle:Messages, 
              (SELECT * from posts ORDER BY created_at DESC) as p 
              GROUP BY p.category_id ORDER BY message.createdAt'); 
```

我们可以包含其他查询，例如 Mysql 吗？一个办法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:33:55.347

我相信 Doctrine 不允许您在 From 语句中进行子查询。但是，您可以在教义中键入常规 sql。

这是一篇关于此的帖子：[将原始 SQL 与 Doctrine 一起使用](https://stackoverflow.com/questions/2774947/using-raw-sql-with-doctrine)

# asp.net - 在解决方案中访问 xml 而不是 bin

> ID：11887480
> 
> 赞同：0
> 
> 时间：2012-08-09T16:08:16.413
> 
> 标签：asp.net

我将如何访问我的解决方案中的 xml？通常我必须将它移动到 bin/Debug/...有没有办法访问它在图像中显示的位置（应用程序根目录）？

![在此处输入图像描述](../Images/66ff817616ca3a753c0d10af7a2bb41c.png)

```
XDocument rssFeed = XDocument.Load("sampleFeed1.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:10:12.877

你试过了`Server.MapPath`吗？

```
string path=Server.MapPath("~/samplefeed1.xml");
XDocument rssFeed = XDocument.Load(path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:19:02.840

这应该适用于 Default.aspx。尝试

```
XDocument rssFeed = XDocument.Load("/sampleFeed1.xml"); 
```

Load() 方法将 uri 作为参数 - 如果路径正确，它应该可以工作。

编辑：Shyju 有它与波浪号（这会为你找到根）

# javascript - jQuery remove array elements if the element value starts with the specified string

> ID：11887481
> 
> 赞同：2
> 
> 时间：2012-08-09T16:08:18.680
> 
> 标签：javascript, jquery

I have a javascript array like

```
["1.A","1.B","1.C","1.D",...,"2.A","2.B",...] 
```

Now I want to remove elements from this array by a specified string. For exm if I specify "1" then it should remove all of "1.A","1.B","1.C","1.D"....How to do this in jQuery.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T16:13:22.340

您可以使用本机[`.filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)功能：

```
var array = ["1.A","1.B","1.C","1.D",...,"2.A","2.B",...];
array = array.filter(function(value) {
    return value.indexOf('1') < 0;
}); 
```

或使用 jQuery 使用以下[`.grep()`](http://api.jquery.com/jQuery.grep/)方法：

```
var array = $.grep(array, function(value) {
    return value.indexOf('1') < 0;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T16:12:50.177

你不需要 jQuery 来做这件事——普通的 JavaScript 就可以了。代码循环遍历 aArray，用 . 查看数组元素的第一个字符`.substring`，检查它是否等于您指定的前缀（在本例中为`1`），如果匹配，则使用 .splice 从数组中删除该元素：

```
var aArray = ["1.A","1.B","1.C","1.D","2.B","2.C"];

var i = aArray.length;
while(i--) {  
    if ((aArray[i].substring(0,1) == "1") {
       var oRemoved = aArray.splice(i,1);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:39:51.677

您似乎想要一个破坏性地修改原始数组的函数。这是一个：

```
Array.prototype.removeElementsWithPrefix = function(prefix) {
  for (var i = this.length - 1; i >= 0; i--) {
    if (this[i].indexOf(prefix) == 0) {
      this.splice(i, 1);
    }
  }
  return this;
}

var a = ["foo", "bar", "baz"];
a.removeElementsWithPrefix("b");
a; // => ["foo"] 
```

但是，我实际上并不建议编写这样的破坏性函数，因为复制原始数组的函数更安全、更灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:16:52.870

您可以使用 jQuery map() 方法来执行此操作：

```
var filter = '1';
origArr = $.map(origArr, function (value, index) {
    if($.inArray(filter, value) != 0) {
        return value;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T16:22:00.807

您不需要 jQuery 来执行此操作。

```
var data = ["1.A", "1.B", "1.C", "1.D", "2.A", "2.B"];

function removeElements(str) {
    return data.filter(function(a) {
        return (a.indexOf(str + ".") < 0);
    });
}

alert(removeElements(1));
alert(removeElements(2)); 
```

# google-maps - 使用 javascript createElement 的谷歌地图加载问题

> ID：11887483
> 
> 赞同：2
> 
> 时间：2012-08-09T16:08:30.730
> 
> 标签：google-maps

我正在开发一个小部件来向其他人显示我网站上的一些数据。为此，我必须通过 javascript createElement 方法动态加载一些脚本文件。这是我的代码。

```
<script language="javascript" type="text/javascript">
var script = document.createElement('script');
script.onload = function() {
//initMap();
};
script.src = "http://maps.google.com/maps/api/js?sensor=false";
document.getElementsByTagName('head')[0].appendChild(script);
function initMap()
{
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
 zoom: 12,
 center: myLatlng,
 mapTypeId: google.maps.MapTypeId.ROADMAP 
```

}; var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

```
var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title:"Hello World!"
});
}
$(document).ready(function(){
initMap();
});
</script> 
```

此代码既不在 script.onload 函数中也不在 document.ready 中初始化映射。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:12:03.710

我不知道为什么，但动态加载时似乎谷歌地图 api 没有完全加载。相反，您可以使用 Google Loader [https://developers.google.com/loader/](https://developers.google.com/loader/) 这很好。

这是您的修改`<script>`：

```
var script = document.createElement('script');
script.src = "https://raw.github.com/getify/LABjs/master/LAB.min.js";
script.onload = function() {
    $LAB
        .script('http://code.jquery.com/jquery-1.8.0.min.js')
        // .script('...') // other scripts which DO NOT depend on maps API

        // if script X depends on jquery for example, it must be loaded like this:
        // .wait() // this makes sure scripts above (jquery) are loaded before continuing
        // .script('X')
        .script('https://www.google.com/jsapi')
        .wait(function() {
            // this is called after everything above is loaded
            google.load("maps", "3", 
                {
                    "callback" : onMapsLoad, // called when maps api loaded
                    "other_params": "sensor=false"
                });
        });
};
document.getElementsByTagName('head')[0].appendChild(script);

function onMapsLoad() {
    $LAB
        // add here scripts which DEPEND on Maps API
        .script('https://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js')
        .wait(
            function() {
                // called when all above is loaded
                $(function() { // makes sure DOM is ready
                    initMap();
                });
            }
        );
}

function initMap()
{
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
 zoom: 12,
 center: myLatlng,
 mapTypeId: google.maps.MapTypeId.ROADMAP
}; var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title:"Hello World!"
});
} 
```

# git - How push config-passwords.txt file to phpfog server from local production with git?

> ID：11887484
> 
> 赞同：0
> 
> 时间：2012-08-09T16:08:34.910
> 
> 标签：git, phpfog

I am working with phpfog. I use git to push my code to phpfog. My problem: I have config-passwords.txt with my local passwords and user names, i have other passwords and user names in production. Usually i upload manually to server the configs files and then change them, but i dont see that phpfog gives such option.What should I do?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:26:55.823

在开发环境和生产环境之间允许使用不同设置或密码的一种方法是使用环境变量。PHP Fog 允许您在应用程序控制台中配置自定义环境变量。然后，您将在您的开发系统上设置相同的 envar。

例子：

本地机器：编辑您的 .bash_profile 或导出以下行。

```
CONFIG_PASSWORD=devpassword1 
```

在 PHP Fog App Console 中设置以下环境变量：

```
CONFIG_PASSWORD=prodpassword1 
```

然后从您的 php 应用程序访问它们：

```
$config_password = getenv("CONFIG_PASSWORD"); 
```

根据需要添加尽可能多的不同环境变量。这种访问密码的方式在开发环境和生产环境中都是一样的，因此您的代码不需要更改。

请参阅我对类似问题的回答：[https ://stackoverflow.com/a/8786086/78685](https://stackoverflow.com/a/8786086/78685)

# iphone - Test private APIs on iPhone

> ID：11887485
> 
> 赞同：1
> 
> 时间：2012-08-09T16:08:40.667
> 
> 标签：iphone, ios, testing, device, iphone-privateapi

I am a newbie to iOS development. I have to develop an app that uses private APIs and I understand the restrictions posed by the App Store for such apps. I just want to know if I can slap the app on a phone to test.. I don't want to distribute the app anyway. Please advise..

Thanks in advance..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:13:00.840

是的，只要您的设备已注册（在配置页面上）并标记为“用于开发”。您可以在您的设备上进行测试，而不会受到苹果的任何干扰。

# asp.net-mvc - MVC html.dropdownlist display selected value after postback

> ID：11887486
> 
> 赞同：0
> 
> 时间：2012-08-09T16:08:40.823
> 
> 标签：asp.net-mvc, postback, retain, html-select

I have an html.dropdownlist that is being populated in the Index action.

```
 public ActionResult Index()
    {
        var maxyear = (from estiamte in dbBudget.Estimates
                       select estiamte.Year).Max();

        var years = (from estimate in dbBudget.Estimates
                     select new { estimate.Year }).Distinct().ToList();

        ViewData["Years"] = new SelectList(years.OrderByDescending(o => o.Year), "Year", "Year");

        var vu_Estimates = dbBudget.vu_Estimates.OrderByDescending(o => o.Expense).ThenBy(o => o.CategoryGroupSortOrder).ThenBy(o => o.SortOrder).Where(o => o.Year == maxyear).ToList();

        return View(vu_Estimates);
    } 
```

I'm defining the html.dropdownlist so that changing the value will trigger a postback:

```
<div>
    <% using (Html.BeginForm()) { %>
        <%= Html.DropDownList("Years", (SelectList)ViewData["Years"], new { onchange = "this.form.submit();" })%> | <%: Html.ActionLink("Create New Year of Estimates", "CreateEstimates", "Estimate") %>
    <%} %>
</div> 
```

I'm capturing the postback and filtering the displayed table. I'm trying to have the dropdown list display the chosen value, but that is not working.

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Index(FormCollection formCollection)
    {
        var years = (from estimate in dbBudget.Estimates
                     select new { estimate.Year }).Distinct().ToList();

        int year = Convert.ToInt32(formCollection["Years"]);

        ViewData["Years"] = new SelectList(years.OrderByDescending(o => o.Year), "Year", "Year", year);

        var vu_Estimates = dbBudget.vu_Estimates.OrderByDescending(o => o.Expense).ThenBy(o => o.CategoryGroupSortOrder).ThenBy(o => o.SortOrder).Where(o => o.Year == year).ToList();

        return View(vu_Estimates);
    } 
```

What do I need to do to have the dropdown list display the selected value after postback instead of the first value in the list?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:21:47.580

我想到了。我需要将 命名`Html.DropdownList`为 以外的东西`Years`，例如`ddlYears`。

# c - IF - Else statement wont work

> ID：11887487
> 
> 赞同：0
> 
> 时间：2012-08-09T16:08:42.470
> 
> 标签：c, if-statement

why my if else if else if statement is not working?

```
 printf ("Enter 1 for midtern1 sorting , 2 for midterm2 sorting , 3 for final sorting\n");
   scanf ("%d",sort);

   if (sort=1){
      midterm1(x);
      for (i=9;i>=0;i--){
      printf ("%s %s %d\n",x[i].name,x[i].surname,x[i].mid1);}}
   else if (sort=2){
        midterm2(x);
        for (i=9;i>=0;i--){
        printf ("%s %s %d\n",x[i].name,x[i].surname,x[i].mid2);}}
   else if (sort=3){
        final(x);
        for (i=9;i>=0;i--){
        printf ("%s %s %d\n",x[i].name,x[i].surname,x[i].final);}} 
```

i tried (sort==1), (sort<=1) but still same result.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T16:09:42.347

两个问题：

**(1)**代替

```
 if (sort=1) 
```

你可能想要

```
 if (sort==1) 
```

您的所有 - 语句都类似`if`。提醒，`'='`是赋值，`'=='`用于布尔比较。

**(2)**

```
scanf ("%d", sort);
             ^ 
```

需要`&`

```
scanf ("%d", &sort);
             ^ 
```

不幸的是，这两个都是常见的问题/错误..如果您提高编译器的警告级别，它可能会帮助您避免其中一些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T16:10:01.940

您应该使用`==`而不是`=`. 第一个是比较，第二个是赋值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T16:10:27.857

```
if (sort=1){ 
```

needs to be

```
if (sort==1){ 
```

In your code, you're just *assigning* `sort` the value of `1` rather than *comparing*.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T16:12:04.660

Multiple else if statements can often be made more readable by replacing them with a switch case statement - see here for syntax [http://msdn.microsoft.com/en-us/library/66k51h7a(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/66k51h7a(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T16:15:39.657

正如其他人所说，您需要使用`==`而不是`=`每个 if/else if 语句。

您还应该查看 bUKaneer 关于`switch`在这种情况下使用语句的建议

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T16:15:48.457

此行不正确

```
scanf ("%d",sort); 
```

`scanf`需要一个*指向*要存储值的变量的指针。将其更改为

```
scanf ("%d",&sort); 
```

此外，您在`if-else if`陈述中的所有比较都是不正确的。使用比较 ( `==`) 而不是赋值 ( `=`)。

考虑用构造替换`if-else if`语句`switch - case`，它会提高可读性。

# c# - 正则表达式 - 替换语法 - 反向引用

> ID：11887491
> 
> 赞同：1
> 
> 时间：2012-08-09T16:08:54.007
> 
> 标签：c#, regex

我正在尝试遍历文件的所有行，并且对于包含“”的每一行，我试图用该行本身替换匹配项，但最后也用一个“”。

我在 .NET/C# 中使用这样的语法：

```
Regex re = new Regex("/\"/"); // without escaping would be /"/
re.Replace(" someAttr=\"some text here", "$0\""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:12:23.453

尝试以下操作：

```
Regex re = new Regex("\".*");
re.Replace(" someAttr=\"some text here", "$&\""); 
```

首先，您需要丢失正则表达式周围的斜线。

根据this [.NET regex reference page](http://www.regular-expressions.info/dotnet.html)，`$&`是对整个匹配项的引用，而不是`$0`.

同样使用您当前的方法，您只需用两个连续的双引号替换一个双引号。由于您想将新的双引号添加到行尾，您需要使您的正则表达式匹配到行尾，这就是它`.*`所做的。

示例：http: [//ideone.com/K5A7D](http://ideone.com/K5A7D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:36:43.017

```
line="some text.d.sd..dsd.";    
Regex r=new Regex("\".*");
r.Replace(line,"$0\""); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T16:22:31.200

这也应该有效：

```
string line = "This is a string";

Regex re = new Regex("[\"].*");
re.Replace(line,"$0\""); 
```

# java - detect Developer Setting 'do not keep activities'

> ID：11887492
> 
> 赞同：2
> 
> 时间：2012-08-09T16:08:55.460
> 
> 标签：java, android

How can I detect if a device has 'do not keep activities' set in developer options. I can't find this value in the settings-class.

I need this setting to know, because when 'do not keep activities' is activated my app gets problem with it. Example : I have a main-activity and a sub-activity. when I switch from main to sub and back from sub to main, then the main-activity will be started again. This is because the mainactivity was killed before. besause I do a lot of loading in my main-activity, the app is not usable when starting over and over.

Or is there any method to solve this problem ? Without this setting activated, there is no problem.

regards

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T22:35:04.537

### 是否可以通过代码检测该标志？

是的。

在 API Doc 中，它被称为[Settings.System.ALWAYS_FINISH_ACTIVITIES](http://developer.android.com/reference/android/provider/Settings.System.html#ALWAYS_FINISH_ACTIVITIES)：

> 如果为 1，活动管理器将在不再需要活动和流程时积极完成它们。如果为 0，则使用正常的延长寿命。
> 
> 常数值：“always_finish_activities”

要获取代码中的值：

```
int value = Settings.System.getInt(getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0); 
```

查看[源代码](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/DevelopmentSettings.java#L624)以了解 Settings.apk 是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:23:15.010

我不确定你能做到，正如我回答别人的那样，你为什么要这样做？您当然不应该使用该标志来更改应用程序的行为。

[不保持活动？](https://stackoverflow.com/questions/11649949/how-to-know-dont-keep-activities-is-enabled-in-ics/11650249#11650249)

# powershell - How do I load a an unregistered ActiveX dll in PowerShell to instantiate the COM objects it defines?

> ID：11887494
> 
> 赞同：1
> 
> 时间：2012-08-09T16:09:00.613
> 
> 标签：powershell, com, activex

I have an application with an API I am trying to reverse engineer to discover the .NET and COM classes it exposes. I am able to load all the .NET Assemblies in PowerShell via

```
ls 'C:\Program Files\MyApp\Bin\*.dll'| %{Add-Type -Path $_.FullName} 
```

I can then use reflection to find out all the types, and instantiate them VIA New-Object. However, what if I have a DLL that exposes COM objects, for example a VB6 ActiveX dll. Will [`Add-Type -Path`](http://ss64.com/ps/add-type.html) expose the COM objects in those DLLs, or do I need to Register them with [Regsvr32](http://technet.microsoft.com/en-us/library/bb490985.aspx)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:37:56.440

自从我做 COM 以来已经有一段时间了，但是...... COM 组件通常将它们的元数据放在类型库中。因此，将 COM dll 加载到 PowerShell 中可能对发现没有多大帮助（除非 PowerShell 自动生成 .NET 包装程序集）。我会使用 .NET 工具[tlbimp.exe](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.80%29.aspx)在 COM 组件周围创建一个 .NET 包装器。然后，您将能够使用[Add-Type](http://ss64.com/ps/add-type.html)加载生成的包装器并检查它。

# jquery - Add jQuery change event to a object that survives (and doesn't fire) on ajax update I'm working on a shipping estimation box as part of a checkout page. I want to bind a .change() jQuery event to my select box, which then reloads the form with an

> ID：11887498
> 
> 赞同：0
> 
> 时间：2012-08-09T16:09:18.507
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:18:31.230

标记选择器怎么样？

又名

```
$('select.shipping-updater').click(function(){
    $(this).addClass("clicked");
}).blur(function(){
    $(this).removeClass("clicked");
});

$('select.shipping-updater.clicked').change(function(){
    $('#shipping_estimation_button').click();
}); 
```

# python - 将秒数添加到 python 日期时间，不包括周末

> ID：11887504
> 
> 赞同：4
> 
> 时间：2012-08-09T16:09:31.947
> 
> 标签：python, datetime, pandas

我正在尝试将秒数添加到 python 日期时间，不包括使用熊猫的周末。下面的代码有效，但我想知道是否有更简单的方法来实现这一点。

```
import datetime
from pandas import *
from pandas.tseries.offsets import *

def add_seconds(start_date, offset_in_seconds):
# get input date in datetime
d = datetime.strptime(start_date, '%Y-%m-%d %H:%M:%S')

# get days, hours, mins, secs
    no_of_days, remainder = divmod(offset_in_seconds, 86400)
    hours, minutes = divmod(remainder, 3600)
    minutes, seconds = divmod(minutes, 60)

# increment the input date  to the appropriate business day
    end_date_pre = d + no_of_days*BDay() 

# dial back to previous evening if hour is under 24
    if 16 + hours < 24:
    end_date = end_date_pre 
    new_end_date = datetime(end_date.year, end_date.month, end_date.day, 16, 0, 0)
    return start_date, end_date, new_end_date.strftime('%Y-%m-%d %H:%M:%S')
# dial forward to the next business day if hour exceeds 24
    elif 16 + hours >= 24:
    end_date = end_date_pre + 1*BDay()
    new_end_date = datetime(end_date.year, end_date.month, end_date.day,9, 0, 0)
    return start_date, end_date, new_end_date.strftime('%Y-%m-%d %H:%M:%S')
    else:
    return start_date, end_date, end_date.strftime('%Y-%m-%d %H:%M:%S') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:41:40.247

dateutil包应该会有所帮助，[例如](http://labix.org/python-dateutil/)

```
from dateutil.rrule import *    

def add_weekday_seconds(start, x):
    rr = rrule(SECONDLY, byweekday=(MO, TU, WE, TH, FR), dtstart=start, interval=x)
    return rr.after(start) 
```

这 (1) 使用`rrule`该类创建一个“重复日期规则”，该规则包括从星期一到星期五开始的所有秒数`start`（即 a `datetime`），每隔一秒跳过一次`x`；然后 (2) 使用`after`在开始时间之后返回与规则匹配的第一个日期时间的方法执行此规则——这应该是你的答案！

将星期五晚上午夜前 10 秒的开始时间加上 5、10 和 15 秒的测试，分别导致星期五午夜前 5 秒、星期一早上午夜和星期一早上午夜后 5 秒：

```
In [131]: friday_night = datetime.datetime(2012, 8, 10, 23, 59, 50)

In [132]: add_weekday_seconds(friday_night, 5)
Out[132]: datetime.datetime(2012, 8, 10, 23, 59, 55)

In [133]: add_weekday_seconds(friday_night, 10)
Out[133]: datetime.datetime(2012, 8, 13, 0, 0)

In [134]: add_weekday_seconds(friday_night, 15)
Out[134]: datetime.datetime(2012, 8, 13, 0, 0, 5) 
```

# android - 如何在物理 Android 设备上构建和运行？

> ID：11887505
> 
> 赞同：1
> 
> 时间：2012-08-09T16:09:35.880
> 
> 标签：android, eclipse, adt, avd

我有一个适用于 Verizon的**三星 Galaxy Nexus LTE**

我下载了最新的 Android SDK 和 eclipse (JUNO) 以及 Android Plug-In for Eclipse (JUNO)。但是，当我单击 RUN 时，eclipse 找不到或找不到该设备。当我尝试使用 AVD 运行它时。这可能无关，但在 AVD 中运行它，我得到错误

```
[2012-08-09 11:41:49 - My First App] res\layout\activity_main.xml:0: error: Resource entry activity_main is already defined.
[2012-08-09 11:41:49 - My First App] res\layout\activity_main.out.xml:0: Originally defined here.
[2012-08-09 11:41:49 - My First App] My First App\res\layout\activity_main.out.xml:1: error: Error parsing XML: no element found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:14:33.807

当您将设备插入计算机并启动 eclipse 时。设备是否出现在eclipse提供的设备列表中？

如果没有，您可能需要在手机上启用**“usb 调试”**并在计算机上安装手机的**驱动程序**。

* * *

**但是**，您发布的错误似乎会阻止该应用程序在手机上运行。这也可能是问题所在。

> *凯文·泰赫*
> 
> 我也遇到了这个。
> 
> 如果您打开了一个 xml 文件并单击“运行”按钮，那么 Eclipse 将尝试对 xml 文件运行转换，而不是运行您的 Android 项目。然后它使用转换的输出创建一个新的 xml 文件并将其添加到您的项目中。那么项目将因为重复的xml文件的存在而根本无法运行。
> 
> 因此，请确保您的项目中没有任何重复的 xml 文件（查看清单文件以及布局文件）。我解决此问题的方法是确保在单击“运行”之前项目树具有焦点（或仅选择带有 java 文件的选项卡）。
> 
> 可能有更好的方法来处理这个问题（也许通过配置更改），但我对 Eclipse 还是很陌生，这就是我想出的解决方法:)。希望有帮助。

[参考](https://stackoverflow.com/questions/1674101/android-project-wont-build-when-editing-a-resource-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:16:09.270

我自己对 Galaxy Nexus 也有同样的问题。[解决方法：从三星官网](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)安装驱动。

# fortran - 在fortran中无替换采样

> ID：11887506
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:09:39.173
> 
> 标签：fortran, random-sample

我必须从人群中抽取一定数量的对象。下面的一段代码给出了带替换的采样。我可以在什么条件下不更换采样？

```
do while(j .lt. w)
   call random_number(u1)
   j1 = 1 + int(population*u1)
   Z = inftime(j1)
   Z1 = X(j1)
   Z2 = Y(j1)
   do t = 1, 10
      if(Z.gt.0 .and. Z.le.10)then
         if(t==Z .and.( my_cnt(t) .lt. k1(t)))then
            my_cnt(t) = my_cnt(t) + 1
            j = j+1
            inftime1(j)= Z 
            X1(j) = Z1
            Y1(j) = z2
         endif
      endif
   enddo
enddo 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:42:47.020

如果我理解正确，您使用这些语句

```
 call random_number(u1)
   j1 = 1 + int(population*u1) 
```

生成整数索引 ( `j1`) 以选择总体*的第 j1 个*元素。我将把它称为*n*人口中的*第 i 个*元素。在循环的每次迭代中，您都会生成一个新的随机数并选择一个新*的第 i 个*元素，该元素很有可能与您在一次（或多次）之前的迭代中选择的元素相同。您宁愿采用一种方法来避免重新选择已选择的*i*。我认为您至少有3种方法。

 *****一：**保留你已经使用过的*i的列表。*如果随机数生成器在以后的迭代中抛出相同的*i*，请再次掷骰子，直到得到一个新的。这需要一些简单的簿记。如果您在编程方面需要帮助，请编辑您的问题。*随着已经选择的i*的比例变大，这种方法开始失去吸引力。一个你已经选择了 50% 的人口成员，你必须为每个新的*i*掷两次骰子（平均） 。您可以决定这对您来说是否是一个严重的问题。

**二：**创建种群的随机排列；在第一次迭代中选择第一个种群（以新的随机顺序），在第二次迭代中选择第二个，依此类推。当然，您不会真正排列总体，而是将索引随机排列到总体中。 [这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Random_permutation)建议您如何创建这样的随机排列。同样，如果您在编码时遇到问题，请编辑您的问题，或提出一个新问题。

**三：**这是对**二**的变体，也是我会做的。首先，在循环之外，创建一个包含*n 个*随机数的数组：

```
real, dimension(n) :: random_array
.
.
call random_number(random_array) 
```

接下来，在循环内部，找到数组中最小值的索引：

```
j1 = minloc(random_array, dim=1) 
```

请注意，我已经回到您的符号并用作`j1`人口的索引。`dim=1`还要注意调用的规范，`minloc`以确保它返回一个标量：我认为这是 Fortran 2003 语义，早期的实现可能会返回一个具有 1 个元素的 rank-1 数组，因此请检查您的编译器文档。

如果`minloc`在数组中找到 2 个（或更多）具有相同值的元素，因为它们是`real`s，所以相对不太可能，它只返回它找到的第一个元素的索引，这对于我们的目的来说是可以的。

接下来，为了确保我们不会在下一次迭代中选择相同的索引，请执行以下操作：

```
random_array(j1) = huge(1.0) 
```

注意确保调用 to 的参数`huge`与.`real``random_array`

这应该在没有替换的情况下随机枚举总体的元素。***

# watin - 使用 Watin 自动化 ContextMenu

> ID：11887508
> 
> 赞同：1
> 
> 时间：2012-08-09T16:09:47.237
> 
> 标签：watin

我正在尝试使右键单击元素时出现的 HTML 上下文菜单自动化。我正在使用 watin & IE 9。我已经尝试了以下方法：

```
 NameValueCollection props = new NameValueCollection();
    props.Add("button", "2");
    tc.FireEvent("click", props);
    tc.FireEvent("mousedown", props);
    tc.FireEvent("mouseup", props); 
```

我只是不断收到这些无效的参数异常。

有关获取上下文菜单或解决此异常的任何其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:10:57.627

您是否尝试过通过 Interop 发送右键单击？

例如[，在 .NET 中使用 SendKeys 右键单击](https://stackoverflow.com/questions/2024088/right-click-with-sendkeys-in-net)

```
using System;
using System.Runtime.InteropServices;

namespace WinApi
{  
    public class Mouse
    { 
        [DllImport("user32.dll")]
        private static extern void mouse_event(UInt32 dwFlags,UInt32 dx,UInt32 dy,UInt32 dwData,IntPtr dwExtraInfo);

        private const UInt32 MouseEventRightDown = 0x0008;
        private const UInt32 MouseEventRightUp = 0x0010;

        public static void SendRightClick(UInt32 posX, UInt32 posY)
        {
            mouse_event(MouseEventRightDown, posX, posY, 0, new System.IntPtr());
            mouse_event(MouseEventRightUp, posX, posY, 0, new System.IntPtr());
        }    
    }
} 
```

# eclipse - Eclipse 无法正确启动

> ID：11887509
> 
> 赞同：1
> 
> 时间：2012-08-09T16:09:52.830
> 
> 标签：eclipse

所以 Eclipse 正在工作，windows 安装了一些更新并重新启动了我的计算机，然后突然 eclipse 不工作了。我已经做了一些尝试，我相信我的 java 类路径是正确的，但 eclipse 仍然只会显示启动画面，然后立即关闭。

除非我使用 -debug -consoleLog 标签运行它，否则它似乎工作正常。知道如何解决这个问题吗？

编辑：

因此，当我使用调试 consoleLog 标签启动它时，日志会这样说

```
Start VM: -Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx512m
-Dsun.lang.ClassLoader.allowArraySyntax=true
-XX:MaxPermSize=256m
-Djava.class.path=C:\eclipse-jboss-tools\eclipse\\plugins/org.eclipse.equinox.la
uncher_1.2.0.v20110502.jar
-os win32
-ws win32
-arch x86
-showsplash C:\eclipse-jboss-tools\eclipse\\plugins\org.eclipse.platform_3.7.0.v
201106131736\splash.bmp
-launcher C:\eclipse-jboss-tools\eclipse\eclipse.exe
-name Eclipse
--launcher.library C:\eclipse-jboss-tools\eclipse\\plugins/org.eclipse.equinox.l
auncher.win32.win32.x86_1.1.100.v20110502\eclipse_1406.dll
-startup C:\eclipse-jboss-tools\eclipse\\plugins/org.eclipse.equinox.launcher_1.
2.0.v20110502.jar
--launcher.overrideVmargs
-product org.eclipse.epp.package.jee.product
-debug
-consoleLog
-vm C:\Program Files (x86)\Java\jdk1.6.0_30\jre\bin\client\jvm.dll
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx512m
-Dsun.lang.ClassLoader.allowArraySyntax=true
-XX:MaxPermSize=256m
-Djava.class.path=C:\eclipse-jboss-tools\eclipse\\plugins/org.eclipse.equinox.la
uncher_1.2.0.v20110502.jar
Install location:
    file:/c:/eclipse-jboss-tools/eclipse/
Configuration file:
    file:/c:/eclipse-jboss-tools/eclipse/configuration/config.ini loaded
Configuration location:
    file:/c:/eclipse-jboss-tools/eclipse/configuration/
Framework located:
    file:/c:/eclipse-jboss-tools/eclipse/plugins/org.eclipse.osgi_3.7.0.v2011061
3.jar
Loading extension: reference:file:javax.transaction_1.1.1.v201105210645.jar
    eclipse.properties not found
Framework classpath:
    file:/c:/eclipse-jboss-tools/eclipse/plugins/org.eclipse.osgi_3.7.0.v2011061
3.jar
    file:/c:/eclipse-jboss-tools/eclipse/plugins/
    file:/c:/eclipse-jboss-tools/eclipse/plugins/javax.transaction_1.1.1.v201105
210645.jar
Splash location:
    C:\eclipse-jboss-tools\eclipse\\plugins\org.eclipse.platform_3.7.0.v20110613
1736\splash.bmp
Debug options:
    file:/C:/eclipse-jboss-tools/eclipse/.options not found
Time to load bundles: 0
Starting application: 1733
!SESSION 2012-08-09 13:41:59.369 -----------------------------------------------

eclipse.buildId=I20110613-1736
java.version=1.6.0_30
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.
package.jee.product -debug -consoleLog

!ENTRY org.eclipse.core.resources 2 10035 2012-08-09 13:42:11.367
!MESSAGE The workspace exited with unsaved changes in the previous session; refr
eshing workspace to recover changes.
Application Started: 21299

!ENTRY edu.hawaii.ics.csdl.jupiter 1 0 2012-08-09 13:42:20.933
!MESSAGE Jupiter Review Plugin is up.
13:42:22.135 [Worker-5] INFO  o.e.m.c.i.i.nexus.NexusIndexManager - Updating ind
ex for repository: central|http://repo1.maven.org/maven2
13:42:22.198 [Worker-5] DEBUG c.n.http.client.RequestBuilderBase - setUrl hasn't
 been invoked. Using http://localhost
13:42:22.432 [Worker-5] DEBUG c.n.h.c.p.n.NettyAsyncHttpProvider -
Non cached request
DefaultHttpRequest(chunked: false)
GET /maven2/.index/nexus-maven-repository-index.properties HTTP/1.1
Host: repo1.maven.org
Accept-Encoding: gzip
Connection: keep-alive
Accept: */*
User-Agent: m2e/3.7.0.v20110613/1.0.200.20111228-1245

using Channel
[id: 0x003293ae, /172.24.143.141:65508 => repo1.maven.org/93.184.215.223:80]

13:42:22.463 [New I/O client worker #1-1] DEBUG c.n.h.c.p.n.NettyAsyncHttpProvid
er -

Request DefaultHttpRequest(chunked: false)
GET /maven2/.index/nexus-maven-repository-index.properties HTTP/1.1
Host: repo1.maven.org
Accept-Encoding: gzip
Connection: keep-alive
Accept: */*
User-Agent: m2e/3.7.0.v20110613/1.0.200.20111228-1245

Response DefaultHttpResponse(chunked: false)
HTTP/1.1 200 OK
Via: 1.1 204.124.139.27 (McAfee Web Gateway 7.1.0.4.0.11515)
Date: Thu, 09 Aug 2012 17:42:22 GMT
Server: ECAcc (dca/536B)
X-Cache: HIT, MISS from 204.124.139.27
Connection: Keep-Alive
Content-Type: application/octet-stream
Accept-Ranges: bytes
Last-Modified: Sun, 15 Jul 2012 10:54:57 GMT
Content-Length: 1130

13:42:22.463 [New I/O client worker #1-1] DEBUG c.n.h.c.p.n.NettyAsyncHttpProvid
er - Adding uri: http://repo1.maven.org:80 for channel [id: 0x003293ae, /172.24.
143.141:65508 => repo1.maven.org/93.184.215.223:80]
13:42:28.303 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Building project
pos_stub
13:42:28.334 [Worker-0] DEBUG o.e.m.c.internal.embedder.MavenImpl - Reading Mave
n project: C:\epcdev\workspaces\fif_frontend\pos_stub\pom.xml
13:42:28.678 [Worker-0] DEBUG o.e.m.c.internal.embedder.MavenImpl - Read Maven p
roject: C:\epcdev\workspaces\fif_frontend\pos_stub\pom.xml in 344 ms
13:42:28.709 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Build participants for MavenProject: com.advancestores.storechannel.stubs:local
PosStub:0.0.1-SNAPSHOT @ C:\epcdev\workspaces\fif_frontend\pos_stub\pom.xml
13:42:28.818 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.jvnet.jaxb2.maven2:maven-jaxb2-plugin:0.7.1:generate (e
xecution: schema1-generate, phase: generate-sources)
13:42:28.818 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-resources-plugin:2.4.3:resou
rces (execution: default-resources, phase: process-resources)
13:42:28.818 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: execute
13:42:29.177 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compil
e (execution: default-compile, phase: compile)
13:42:29.177 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.177 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.eclipse.m2e.jdt.javaConfigurator
13:42:29.177 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.eclipse.m2e.jdt.internal.JavaProjectCo
nfigurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.webfragment.configurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.WebFragmentProje
ctConfigurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.utility.configurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.UtilityProjectCo
nfigurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.java.unsupportedDependencyTypeConfigurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.UnsupportedDepen
dencyTypeProjectConfigurator
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-resources-plugin:2.4.3:testR
esources (execution: default-testResources, phase: process-test-resources)
13:42:29.209 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: execute
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCo
mpile (execution: default-testCompile, phase: test-compile)
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.eclipse.m2e.jdt.javaConfigurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.eclipse.m2e.jdt.internal.JavaProjectCo
nfigurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.webfragment.configurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.WebFragmentProje
ctConfigurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.utility.configurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.UtilityProjectCo
nfigurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.java.unsupportedDependencyTypeConfigurator
13:42:29.224 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.UnsupportedDepen
dencyTypeProjectConfigurator
13:42:29.240 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-surefire-plugin:2.7.1:test (
execution: default-test, phase: test)
13:42:29.240 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-ejb-plugin:2.3:ejb (executio
n: default-ejb, phase: package)
13:42:29.240 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.240 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.configurator
13:42:29.240 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.WTPProjectConfig
urator
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
    Action: configurator
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator id: org.maven.ide.eclipse.configuration.wtp
.ejbmanifest.configurator
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Project configurator: org.maven.ide.eclipse.wtp.mavenarchiver.Ej
bMavenArchiverConfigurator
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
        Build participant: org.sonatype.m2e.mavenarchiver.internal.Abstr
actMavenArchiverConfigurator$1
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-antrun-plugin:1.3:run (execu
tion: default, phase: verify)
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-install-plugin:2.3.1:install
 (execution: default-install, phase: install)
13:42:29.271 [Worker-0] DEBUG o.e.m.c.p.c.AbstractCustomizableLifecycleMapping -
 Mojo execution key: org.apache.maven.plugins:maven-deploy-plugin:2.5:deploy (ex
ecution: default-deploy, phase: deploy)
13:42:29.271 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Executing build p
articipant org.eclipse.m2e.core.project.configurator.MojoExecutionBuildParticipa
nt for plugin execution org.apache.maven.plugins:maven-resources-plugin:2.4.3:re
sources (execution: default-resources, phase: process-resources)
13:42:30.489 [Worker-0] WARN  o.e.m.c.i.embedder.EclipseLogger - Using platform
encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform de
pendent!
13:42:30.489 [Worker-0] INFO  o.e.m.c.i.embedder.EclipseLogger - Copying 17 reso
urces
13:42:30.749 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Finished executin
g build participant org.eclipse.m2e.core.project.configurator.MojoExecutionBuild
Participant for plugin execution org.apache.maven.plugins:maven-resources-plugin
:2.4.3:resources (execution: default-resources, phase: process-resources) in 147
8 ms
13:42:30.749 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Executing build p
articipant org.eclipse.m2e.core.project.configurator.MojoExecutionBuildParticipa
nt for plugin execution org.apache.maven.plugins:maven-resources-plugin:2.4.3:te
stResources (execution: default-testResources, phase: process-test-resources)
13:42:30.751 [Worker-0] WARN  o.e.m.c.i.embedder.EclipseLogger - Using platform
encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform de
pendent!
13:42:30.754 [Worker-0] INFO  o.e.m.c.i.embedder.EclipseLogger - Copying 0 resou
rce
13:42:30.754 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Finished executin
g build participant org.eclipse.m2e.core.project.configurator.MojoExecutionBuild
Participant for plugin execution org.apache.maven.plugins:maven-resources-plugin
:2.4.3:testResources (execution: default-testResources, phase: process-test-reso
urces) in 4 ms
13:42:30.755 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Executing build p
articipant org.sonatype.m2e.mavenarchiver.internal.AbstractMavenArchiverConfigur
ator$1 for plugin execution org.apache.maven.plugins:maven-ejb-plugin:2.3:ejb (e
xecution: default-ejb, phase: package)
13:42:31.880 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Finished executin
g build participant org.sonatype.m2e.mavenarchiver.internal.AbstractMavenArchive
rConfigurator$1 for plugin execution org.apache.maven.plugins:maven-ejb-plugin:2
.3:ejb (execution: default-ejb, phase: package) in 1123 ms
13:42:31.880 [Worker-0] DEBUG o.e.m.c.i.builder.MavenBuilder - Built project pos
_stub in 3577 ms
13:42:32.118 [Worker-5] INFO  o.e.m.c.i.i.nexus.NexusIndexManager - Updated inde
x for repository: central|http://repo1.maven.org/maven2 in 9983 ms 
```

这是我的eclipse.ini

-startup plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar --launcher.library plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502 -product org.eclipse.epp.package .jee.product --launcher.defaultAction openFile --launcher.XXMaxPermSize 256M -showsplash org.eclipse.platform --launcher.XXMaxPermSize 256m --launcher.defaultAction openFile -vmargs -Dosgi.requiredJavaVersion=1.6 -Xms40m -Xmx512m -Dsun。 lang.ClassLoader.allowArraySyntax=true

解决了：

所以我最终想通了。在某些时候，java.exe 被放入我的 Windows 文件夹中，该文件夹也在我的 %PATH% 变量中。一旦我删除了这些，我就几乎没有家了。

如果其他人有类似的问题，这里有更多信息：http: [//geekycoder.wordpress.com/2009/07/08/java-tips-adventure-in-resolving-the-java-error-error-occurred-during-虚拟机初始化/](http://geekycoder.wordpress.com/2009/07/08/java-tips-adventure-in-resolving-the-java-error-error-occurred-during-initialization-of-vm/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:02:59.990

所以我最终想通了。在某些时候，java.exe 被放入我的 Windows 文件夹中，该文件夹也在我的 %PATH% 变量中。一旦我删除了这些，我就几乎没有家了。

如果其他人有类似的问题，这里有更多信息：http: [//geekycoder.wordpress.com/2009/07/08/java-tips-adventure-in-resolving-the-java-error-error-occurred-during-虚拟机初始化/](http://geekycoder.wordpress.com/2009/07/08/java-tips-adventure-in-resolving-the-java-error-error-occurred-during-initialization-of-vm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:49:11.850

转到工作区的 .metadata 目录并删除 .log 文件。再次运行 Eclipse（它仍然会失败）并查看 .log 文件以获取有关所发生情况的线索。您很可能会从一些严重的异常中看到一些堆栈轨迹。文件顶部的那些最有可能让您对发生的事情有最好的了解。这就是为什么在跟踪此类问题时删除 .log 文件的原因。

# algorithm - 在 Java 或任何其他编程语言中将数据放入内存意味着什么？

> ID：11887514
> 
> 赞同：0
> 
> 时间：2012-08-09T16:10:02.990
> 
> 标签：algorithm, memory, memory-management, data-structures

我是一名新手程序员，最近开始学习算法和 DS。我经常在教程和书籍中看到“将数据放入内存”这一术语，例如排序、信息检索。虽然我了解将数据存储到数组或 HashMap（在 IR 的情况下）的过程，但我真的不明白内存在其中扮演什么角色？

谁能指导我了解这些场景中的记忆基础知识或建议我一些相同的教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:27:07.723

在基本级别上，计算机只有两件事：

*   数据片段
*   它可以对一段（或多段）数据执行的操作

所有的数据只包含 1 和 0。

但是，这些数据可以在很多地方，都可以称为内存。

*   **ROM**（只读内存：您的计算机启动时能够与主板和其他东西交互的内存。）

*   **硬盘**（电脑关机后硬盘上保存的数据不会丢失。操作系统、个人文件等）

*   **RAM**（随机存取内存：应用程序可以快速读取和写入 RAM，但是当计算机重新启动时数据会消失。哈希表、对象、程序处理的数据都存储在这里。）

*   **缓存**（存在各种级别的缓存。RAM 内存的频繁访问部分被复制到缓存内存中，因此应用程序可以更快地访问/修改该数据。修改后的数据将被移回 RAM，并且可以将 RAM 中的数据保存到硬盘）。

*   **外部内存**（互联网连接或其他连接可能为您提供更多可以存储数据的地方，但访问该内存需要更长的时间）。

在教程或书籍等以“将数据存入内存”的形式使用“内存”时，通常表示将数据从硬盘内存中取出到 RAM 内存中。

这是因为计算机执行的操作**只能**对存储在 RAM 中的数据执行。（尽管有人肯定会发表评论，但有一些例外）。

# sql - SQL查找哪些成员只有空条目

> ID：11887515
> 
> 赞同：1
> 
> 时间：2012-08-09T16:10:05.613
> 
> 标签：sql, count, distinct

我正在绞尽脑汁想弄清楚什么组和/或不同的组和`count()`形成对此有帮助，但目前还一片空白。

考虑下表：

```
PersonId | PlaceName
---------+----------
    1    |   NULL
    1    |   NULL
    2    |   NULL
    2    | Las Vegas
    3    | London
    4    |   NULL
    4    |   NULL
    4    |   NULL 
```

我正在寻找那些懒得填写“地名”的人，所以我希望我的输出看起来像这样：

```
PersonId
--------
    1
    4 
```

实际上，我将加入其他一些表格以提取每个“不法之徒”的信息，但我的问题的症结在于上面的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:19:23.667

使用以下查询：

```
SELECT PersonId
  FROM TheTable
 GROUP BY PersonId
 HAVING COUNT(PlaceName) = 0 
```

`COUNT()`聚合函数忽略s，因此`NULL`应该返回正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:14:03.013

```
select PersonId
from MyTable
group by PersonId
having count(case when PlaceName is not null then 1 end) = 0 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/99d45/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:16:31.050

```
select distinct t1.id
from test t1
LEFT JOIN
(
  select id, count(name) nm
  from test 
  where name is not null
  group by id
) x
  on t1.id = x.id
where x.nm is null 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/860d2/7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:15:58.673

我会提供以下内容：

```
select distinct a.personid 
  from tablename a
  left outer join tablename b
    on a.personid=b.personid
   and b.placename is not null
 where b.personid is null
order by personid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T16:30:08.240

```
SELECT DISTINCT PersonId
FROM MyTable t
WHERE NOT EXISTS(SELECT 1 FROM MyTable WHERE PersonId = t.PersonId AND PlaceName is not null) 
```

# java - Java 小程序按钮不会显示，直到我将鼠标悬停在它们上面

> ID：11887519
> 
> 赞同：3
> 
> 时间：2012-08-09T16:10:15.787
> 
> 标签：java, swing

所以我的问题是，当我将鼠标悬停在显示它们的按钮上时，小程序午餐时没有任何内容，之后可以完美运行。我认为油漆可能有问题，但我不确定。我尝试了一些更改，但注意到似乎有效。任何帮助都感激不尽。

——拉斐尔

```
 import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class poker extends JApplet implements ActionListener, ListSelectionListener {

    private DefaultListModel listModel = new DefaultListModel();
    JList jList = new JList(listModel);
    JButton dealButton = new JButton("Deal");
    JButton quitButton = new JButton("Quit");
    JButton finishButton = new JButton("finish");
    JPanel panel = new JPanel();
    JPanel jPanel = new JPanel();
    JPanel lPanel = new JPanel();
    JLabel label = new JLabel();
    JLabel balance = new JLabel();

    private String displayDeal = null;
    private String displayFinish = null;
    private poker.Card deck[];
    private int currentCard;
    private double money = 0;
    private poker.Card hand[];
    private boolean nothing;
    private boolean pair;
    private boolean twoPair;
    private boolean threeKind;
    private boolean fourKind;
    private boolean fullHouse;
    private boolean flush;
    private boolean straight;
    private boolean royalStraight;
    private boolean straightFlush;
    private boolean RoyalFlush;

    String faces[] = {"Deuce", "Three", "Four", "Five", "Six", "Seven", "Eight",
        "Nine", "Ten", "Jack", "Queen", "King", "Ace"};
    String suits[] = {"Hearts", "Diamonds", "Clubs", "Spades"};

    @Override
    public void init() {

        this.setSize(500, 500);
        this.setLayout(new BorderLayout());

        jList.addListSelectionListener(this);
        jList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

        hand = new poker.Card[5];
        deck = new poker.Card[52];
        currentCard = -1;

        for (int i = 0; i < deck.length; i++) {
            deck[i] = new poker.Card(faces[i % 13], suits[i / 13]);
        }

        listModel.setSize(5);

        dealButton.addActionListener(this);
        finishButton.addActionListener(this);
        quitButton.addActionListener(this);
        finishButton.setEnabled(false);

        panel.add(dealButton);
        panel.add(finishButton);
        panel.add(quitButton);
        panel.add(label);

        jPanel.add(jList);

        add(balance, BorderLayout.CENTER);
        add(panel, BorderLayout.SOUTH);
        add(jPanel, BorderLayout.NORTH);

        setVisible(true);
    }

    class Card {

        @Override
        public String toString() {
            return face + " of " + suit + "\n";
        }

        public String getFace() {
            return face;
        }

        public String getSuit() {
            return suit;
        }
        private String face;
        private String suit;

        public Card(String s, String s1) {
            face = s;
            suit = s1;
        }
    }

    @Override
    public void valueChanged(ListSelectionEvent event) {

        int[] indices = jList.getSelectedIndices();
        if (indices.length > 4) {
            JOptionPane.showMessageDialog(null, "You may only select four "
                    + "cards.");
            jList.clearSelection();
        }
    }

    @Override
    public void actionPerformed(ActionEvent event) {

        poker.Card card = null;

        if (event.getSource() == dealButton) {////////////////////////////

            finishButton.setEnabled(true);
            dealButton.setEnabled(false);
            label.setText(null);

            shuffle();//  reset deck

            for (int j = 0; j < 5; j++) {
                card = dealCard();
                hand[j] = card;
                listModel.setElementAt(hand[j], j);

            }
            if (money < -1000) {
                JOptionPane.showMessageDialog(null, "GAME OVER. You have no "
                        + "more money. ");
                System.exit(0);
            }
            //evaluate();
            label.setText(displayDeal);
            displayDeal = null;

        } else if (event.getSource() == finishButton) {///////////////////////

            dealButton.setEnabled(true);
            finishButton.setEnabled(false);
            int c = 5;    //to get new card from deck 

            int maxIndex = jList.getMaxSelectionIndex();

            for (int l = 0; l <= maxIndex; l++) {
                if (jList.isSelectedIndex(l)) {
                    listModel.removeElementAt(l);
                    listModel.add(l, deck[c]);
                    c++;
                }
            }
            jList.revalidate();
            jPanel.repaint();

            evaluate();
            giveMoney();

            label.setText(displayFinish);
            balance.setHorizontalAlignment(SwingConstants.CENTER);
            balance.setText("Money: $" + money );

            jList.clearSelection();
            displayFinish = null;

        } else if (event.getSource() == quitButton) {///////////////////////

            label.setText(null);
            balance.setHorizontalAlignment(SwingConstants.CENTER);
            balance.setText("You have won $" + money + " dollars.");

            int confirmed = JOptionPane.showConfirmDialog(null,
                    "Are you sure you want to exit?", "User Confirmation",
                    JOptionPane.YES_NO_OPTION);
            if (confirmed == JOptionPane.YES_OPTION) {

                dealButton.setEnabled(false);
                finishButton.setEnabled(false);
                quitButton.setEnabled(false);
                System.exit(0);
            }
        }
        this.setVisible(true);
        this.validate();
    }
    // giveMoney() keeps track of the money.

    public void giveMoney() {

        if (nothing) {
            money += -20.00;
            nothing = false;
        }
        if (pair) {
            money += 50.00;
            pair = false;
        }
        if (twoPair) {
            money += 100.00;
            twoPair = false;
        }
        if (threeKind) {
            money += 150.00;
            threeKind = false;           
        }
        if (straight) {
            money += 200.00;
            straight = false;
        }
        if (royalStraight) {
            money += 200.00;
            royalStraight = false;
        }
        if (flush) {
            money += 250.00;
            flush = false;
        }
        if (fullHouse) {
            money += 300;
        }
        if (fourKind) {
            money += 400.00;
            fourKind = false;
        }
        if (straightFlush) {
            money += 500.00;
            straightFlush = false;
        }
        if (RoyalFlush) {
            money += 1000.00;
            RoyalFlush = false;
        }

        this.validate();
    }

    // populates deck array 
    public void shuffle() {

        currentCard = -1;
        for (int i = 0; i < deck.length; i++) {
            int j = (int) (Math.random() * 52D);
            poker.Card card = deck[i];
            deck[i] = deck[j];
            deck[j] = card;
        }
        this.validate();
    }

    public poker.Card dealCard() {

        if (++currentCard < deck.length) {
            return deck[currentCard];
        } else {
            dealButton.setEnabled(false);
            return null;
        }
    }

    public void evaluate() {

        int i = 0;
        String setOf = null;

        nothing = false; pair = false; twoPair = false; threeKind = false;
        straight = false; royalStraight = false; flush = false;
        fullHouse = false; fourKind = false; straightFlush = false;
        RoyalFlush = false;

        if (hand[0].getSuit().equals(hand[1].getSuit())
                && hand[1].getSuit().equals(hand[2].getSuit())
                && hand[2].getSuit().equals(hand[3].getSuit())
                && hand[3].getSuit().equals(hand[4].getSuit())) {
            flush = true;
            displayDeal = "You have a flush";
            displayFinish = "Flush. Win $250.00 dollars.";

        }
        if (sort2(hand) && !royalStraight) {
            straight = true;
            displayDeal = "You have a straight";
            displayFinish = "Straight. Win $200.00 dollars.";
        }
        if (straight && flush) {
            straightFlush = true;
            straight = false;
            flush = false;
            displayDeal = "You have a straight Flush";
            displayFinish = "straight Flush. Win $500.00 dollars.";

        }
        if (straightFlush) {
            for (int j = 9; j < 13; j++) {
                if (hand[i].getFace().equals(faces[j])
                        && hand[i + 1].getFace().equals(faces[j])
                        && hand[i + 2].getFace().equals(faces[j])
                        && hand[i + 3].getFace().equals(faces[j])
                        && hand[i + 4].getFace().equals(faces[j])) {
                    straightFlush = false;
                    RoyalFlush = true;
                    displayDeal = "You have a royal Flush";
                    displayFinish = "Royal Flush. Win $1000.00 dollars.";
                }
            }
        }
        if (straight) {
            for (int j = 9; j < 13; j++) {
                if (hand[i].getFace().equals(faces[j])
                        && hand[i + 1].getFace().equals(faces[j])
                        && hand[i + 2].getFace().equals(faces[j])
                        && hand[i + 3].getFace().equals(faces[j])
                        && hand[i + 4].getFace().equals(faces[j])) {
                    straight = false;
                    royalStraight = true;
                    displayDeal = "You have a royal straight";
                    displayFinish = "royal Straight. Win $200.00 dollars.";
                }
            }
        }
        if (hand[0].getFace().equals(hand[1].getFace())
                && hand[0].getFace().equals(hand[2].getFace())
                && hand[0].getFace().equals(hand[3].getFace())
                || hand[1].getFace().equals(hand[2].getFace())
                && hand[1].getFace().equals(hand[3].getFace())
                && hand[1].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[0].getFace().equals(hand[3].getFace())
                && hand[0].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[2].getFace())
                && hand[0].getFace().equals(hand[3].getFace())
                && hand[0].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[0].getFace().equals(hand[2].getFace())
                && hand[0].getFace().equals(hand[4].getFace())) {
            fourKind = true;
            displayDeal = "You have a four of a kind";
            displayFinish = "Four of a kind. Win $400.00 dollars.";
        } else if (hand[0].getFace().equals(hand[1].getFace())
                && hand[2].getFace().equals(hand[3].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                || hand[1].getFace().equals(hand[2].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[2].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[2].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[4].getFace())
                && hand[1].getFace().equals(hand[2].getFace())
                || hand[0].getFace().equals(hand[3].getFace())
                && hand[1].getFace().equals(hand[2].getFace())
                || hand[1].getFace().equals(hand[4].getFace())
                && hand[2].getFace().equals(hand[3].getFace())
                || hand[0].getFace().equals(hand[3].getFace())
                && hand[1].getFace().equals(hand[4].getFace()) && !fullHouse) {
            twoPair = true;
            displayDeal = "You have two pairs. ";
            displayFinish = "Two Pairs. Win $100.00 dollars.";
        } else if (hand[0].getFace().equals(hand[1].getFace())
                && hand[1].getFace().equals(hand[2].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[1].getFace().equals(hand[3].getFace())
                && hand[2].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[1].getFace().equals(hand[4].getFace())
                && hand[2].getFace().equals(hand[3].getFace())
                || hand[0].getFace().equals(hand[3].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                && hand[1].getFace().equals(hand[2].getFace())
                || hand[1].getFace().equals(hand[2].getFace())
                && hand[2].getFace().equals(hand[4].getFace())
                && hand[0].getFace().equals(hand[3].getFace())
                || hand[2].getFace().equals(hand[3].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                && hand[0].getFace().equals(hand[1].getFace())
                || hand[1].getFace().equals(hand[2].getFace())
                && hand[2].getFace().equals(hand[3].getFace())
                && hand[0].getFace().equals(hand[4].getFace()) && !straightFlush) {
            fullHouse = true;
            displayDeal = "You have a full house.";
            displayFinish = "Full House. Win $300.00 dollars.";
        }
        if ((hand[0].getFace().equals(hand[1].getFace())
                && hand[1].getFace().equals(hand[2].getFace())
                || hand[0].getFace().equals(hand[2].getFace())
                && hand[0].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[2].getFace())
                && hand[0].getFace().equals(hand[3].getFace())
                || hand[1].getFace().equals(hand[3].getFace())
                && hand[1].getFace().equals(hand[4].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[1].getFace().equals(hand[3].getFace())
                || hand[0].getFace().equals(hand[1].getFace())
                && hand[1].getFace().equals(hand[4].getFace())
                || hand[1].getFace().equals(hand[2].getFace())
                && hand[2].getFace().equals(hand[4].getFace())
                || hand[2].getFace().equals(hand[3].getFace())
                && hand[3].getFace().equals(hand[4].getFace())
                || hand[1].getFace().equals(hand[2].getFace())
                && hand[2].getFace().equals(hand[3].getFace()))
                && !twoPair && !fullHouse && !fourKind) {
            threeKind = true;          
            displayDeal = "You have three of a kind of " + setOf + "s.";
            displayFinish = "three of a kind of " + setOf + "s. Win $150.00 dollars.";
        } else if ((hand[i].getFace().equals(hand[i + 1].getFace())
                || hand[i].getFace().equals(hand[i + 2].getFace())
                || hand[i].getFace().equals(hand[i + 3].getFace())
                || hand[i].getFace().equals(hand[i + 4].getFace())
                || hand[i + 1].getFace().equals(hand[i + 2].getFace())
                || hand[i + 1].getFace().equals(hand[i + 3].getFace())
                || hand[i + 1].getFace().equals(hand[i + 4].getFace())
                || hand[i + 2].getFace().equals(hand[i + 3].getFace())
                || hand[i + 2].getFace().equals(hand[i + 4].getFace())
                || hand[i + 3].getFace().equals(hand[4].getFace()))
                && !twoPair && !threeKind && !fullHouse) {
            pair = true;
            displayDeal = "You have a pair of " + setOf + "s.";
            displayFinish = "Pair of " + setOf + "s. Win $50.00 dollars.";
        }
        if (!pair && !twoPair && !threeKind && !fullHouse && !fourKind
                && !straight && !flush && !straightFlush && !RoyalFlush
                && !royalStraight) {
            nothing = true;
            displayDeal = "You have nothing.";
            displayFinish = "Nothing. Lose 20.00 dollars.";
        }
        this.validate();

    }

    public int getFaceValue2(poker.Card card) {
        String s = card.getFace();
        byte byte0 = 0;
        if (s.equals(faces[0])) {
            byte0 = 2;
        }
        if (s.equals(faces[1])) {
            byte0 = 3;
        }
        if (s.equals(faces[2])) {
            byte0 = 4;
        }
        if (s.equals(faces[3])) {
            byte0 = 5;
        }
        if (s.equals(faces[4])) {
            byte0 = 6;
        }
        if (s.equals(faces[5])) {
            byte0 = 7;
        }
        if (s.equals(faces[6])) {
            byte0 = 8;
        }
        if (s.equals(faces[7])) {
            byte0 = 9;
        }
        if (s.equals(faces[8])) {
            byte0 = 10;
        }
        if (s.equals(faces[9])) {
            byte0 = 11;
        }
        if (s.equals(faces[10])) {
            byte0 = 12;
        }
        if (s.equals(faces[11])) {
            byte0 = 13;
        }
        if (s.equals(faces[12])) {
            byte0 = 14;
        }
        return byte0;
    }

    public boolean sort2(poker.Card acard[]) {
        boolean flag = false;
        int ai[] = new int[5];
        for (int i = 0; i < 5; i++) {
            ai[i] = getFaceValue2(acard[i]);
        }

        for (int k = 1; k < ai.length; k++) {
            for (int l = 0; l < ai.length - 1; l++) {
                if (ai[l] > ai[l + 1]) {
                    int j = ai[l];
                    ai[l] = ai[l + 1];
                    ai[l + 1] = j;
                }
            }

        }

        for (int i1 = 0; i1 < ai.length - 1; i1++) {
            if (ai[0] + 1 == ai[1] && ai[1] + 1 == ai[2] && ai[2] + 1
                    == ai[3] && ai[3] + 1 == ai[4]) {
                flag = true;
            } else {
                flag = false;
            }
        }

        if (flag) {
            System.out.print(hand[0] + " " + hand[1] + " " + hand[2] + " "
                    + hand[3] + " " + hand[4]);
        }
        System.out.print(ai[0] + " " + ai[1] + " " + ai[2] + " " + ai[3]
                + " " + ai[4]);
        return flag;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:23:34.333

当我使用 eclipse 运行这个小程序时，它运行良好，我可以看到 2 个按钮。一切准备就绪后，您是否尝试过验证小程序？

```
this.validate();
this.repaint(); 
```

来自 Container.class：

> validate 方法用于使容器重新布置其子组件。在容器显示后修改此容器的子组件（添加到容器或从容器中删除，或更改布局相关信息）时，应调用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T16:23:19.150

我花了一些时间修改您的代码，并删除了 paint() 方法及其工作，现在屏幕显示没有任何冻结，并且显示了所有组件。这是我在扩展 JApplet 时发现的关于 paint() 方法的一个重要信息。

注意：根据您的设计移动您在 paint() 方法中的逻辑。

> 然而，JApplets 有很多普通 Applets 所没有的额外结构。由于这种结构，JApplet 的绘制是一个更复杂的事情，由系统处理。因此，当您创建 JApplet 的子类时，您不应该为它编写 paint() 方法。正如我们将看到的，如果您想在 JApplet 上绘图，您应该将一个组件添加到 applet 以用于该目的。另一方面，您可以并且通常应该为 JApplet 的子类编写一个 init() 方法。

下面是修改后的代码，希望对你有帮助！！！

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListModel;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class Poker extends JApplet implements ActionListener, ListSelectionListener {

    private DefaultListModel listModel = new DefaultListModel();
    JList jList = new JList(listModel);
    JButton dealButton = new JButton("Deal card");
    JButton quitButton = new JButton("Quit");  
    JButton finishButton = new JButton("finish");
    JPanel panel = new JPanel();
    JPanel jPanel = new JPanel();

    private Poker.Card deck[];
    private int currentCard;
    private int money;
    String faces[] = {
            "Deuce", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", 
            "Ten", "Jack", 
            "Queen", "King", "Ace"
    };
    String suits[] = {
            "Hearts", "Diamonds", "Clubs", "Spades"
    };
    private boolean card1State;
    private boolean card2State;
    private boolean card3State;
    private boolean card4State;
    private boolean card5State;
    private  Poker.Card hand[];
    private boolean pressed;
    private boolean nothing;
    private boolean pair;
    private boolean twoPair;
    private boolean threeKind;
    private boolean fourKind;
    private boolean fullHouse;
    private boolean flush;
    private boolean straight;
    private boolean royalStraight;
    private boolean straightFlush;
    private boolean RoyalFlush;
    private final int ROYALFLUSH = 8;
    private int value;
    private boolean firstDeal;

    @Override
    public void init(){

        this.setSize(500, 500);

        jList.addListSelectionListener(this);
        jList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

        hand = new Poker.Card[5];
        deck = new Poker.Card[52];
        currentCard = -1;

        for(int i = 0; i < deck.length; i++)
            deck[i] = new Poker.Card(faces[i % 13], suits[i / 13]);

        listModel.setSize(5);

        dealButton.addActionListener(this);
        finishButton.addActionListener(this);
        quitButton.addActionListener(this);

        finishButton.setEnabled(false);

        // c.setLayout(new FlowLayout());
        panel.add(dealButton);         
        panel.add(finishButton); 
        panel.add(quitButton); 

        add(panel, BorderLayout.SOUTH);         

        jPanel.add(jList);
        add(jPanel,  BorderLayout.NORTH);

        setVisible(true);

    }

    class Card 
    {
        @Override
        public String toString()
        {
            return face + " of " + suit + "\n";
        }

        public String getFace()
        {
            return face;
        }

        public String getSuit()
        {
            return suit;
        }

        private String face;
        private String suit;

        public Card(String s, String s1)
        {
            face = s;
            suit = s1;
        }
    }

    @Override
    public void valueChanged(ListSelectionEvent event) {
        JList source = (JList) event.getSource();
        java.util.List values = source.getSelectedValuesList();
        listModel.removeElement(values);
        changeCards();
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        Poker.Card card = null;
        int i = 5;
        if(event.getSource() == dealButton){
            pressed = true;
            dealButton.setEnabled(false);
            finishButton.setEnabled(true);

            for(int j = 0; j < 5; j++){
                card = dealCard();
                hand[j] = card;
                listModel.setElementAt(hand[j], j);
            }
            if(money < -1000){
                JOptionPane.showMessageDialog(null, "GAME OVER. ");
                System.exit(0);
            }
        }else if( event.getSource() == finishButton){

            // still needs implementation

        } else if (event.getSource() == quitButton) {

            pressed = true;

            int confirmed = JOptionPane.showConfirmDialog(null,
                    "Are you sure you want to exit?", "User Confirmation",
                    JOptionPane.YES_NO_OPTION);
            if (confirmed == JOptionPane.YES_OPTION) {

                dealButton.setEnabled(false);
                finishButton.setEnabled(false);
                quitButton.setEnabled(false);
                System.exit(0);
            }
        }
        this.setVisible(true);
        this.validate();
    }

    public void giveMoney() {
        if (nothing)
        {   money -= 20;
        }
        if (pair) {
            money += 50;
        }
        if (twoPair) {
            money += 100;
        }
        if (threeKind) {
            money += 150;
        }
        if (straight) {
            money += 200;
        }
        if (royalStraight)
        {
            money += 200;
        }
        if (flush) {
            money += 250;
        }
        if (fullHouse) {
            money += 300;
        }
        if (fourKind)
        {
            money += 400;
        }
        if (straightFlush) {
            money += 500;
        }
        if (RoyalFlush) {
            money += 1000;
        }
    }

    public void shuffle() {

        for (int i = 0; i < deck.length; i++) {
            int j = (int) (Math.random() * 52D);
            Poker.Card card = deck[i];
            deck[i] = deck[j];
            deck[j] = card;
        }
        dealButton.setEnabled(true);
        this.validate();
    }

    public Poker.Card dealCard() {

        if (++currentCard < deck.length) {
            return deck[currentCard];
        } else {
            dealButton.setEnabled(false);
            return null;
        }
    }

//  public void paint(Graphics g){
//
//      this.setBackground(Color.gray);
//      Font font = new Font("Italic", 3, 14);
//      g.setFont(font);        
//      if(pressed)
//      {          
//          Font font1 = new Font("Card", 1, 24);
//          g.setFont(font1);   
//
//          if(nothing)
//              g.drawString("You got nothing!! You lose $20 ", 50, 125);
//          if(pair)
//              g.drawString("A pair!! Win $50 ", 50, 125);
//          if(twoPair)
//              g.drawString("Two pair!! win $100 ", 50, 125);   
//          if(threeKind)
//              g.drawString("Three of a Kind!! Win $150 ", 50, 125);
//          if(straight)
//              g.drawString("A Straight!! Win $200 ", 50, 125);
//          if (royalStraight)
//              g.drawString("A Royal Straight!! Win $200 ", 50, 125);                
//          if(flush)
//              g.drawString("A Flush!! Win $250 ", 50, 125);
//          if(fullHouse)
//              g.drawString("A Full House!! Win $300 ", 50, 125);            
//          if(straightFlush)
//              g.drawString("A Straight Flush!! Win $500 ", 50, 125);
//          if(RoyalFlush)
//              g.drawString("A Royal Flush!! Win $100 ", 50, 125);            
//      }
//      
//      this.setVisible(true);
//  }

    public void changeCards(){

        System.out.println("change cards");

        firstDeal = true;
        Object obj = null;
        if(!card1State)
        {
            Poker.Card card = dealCard();
            hand[0] = card;
        }
        if(!card2State)
        {
            Poker.Card card6 = dealCard();
            hand[1] = card6;
        }
        if(!card3State)
        {
            Poker.Card card7 = dealCard();
            hand[2] = card7;
        }
        if(!card4State)
        {
            Poker.Card card8 = dealCard();
            hand[3] = card8;
        }
        if(!card5State)
        {
            Poker.Card card9 = dealCard();
            hand[4] = card9;

        }
    }

    public void evaluate() {

        int i = 0;
        if(hand[0].getSuit().equals(hand[1].getSuit()) && 
                hand[1].getSuit().equals(hand[2].getSuit()) && 
                hand[2].getSuit().equals(hand[3].getSuit()) && 
                hand[3].getSuit().equals(hand[4].getSuit()))
        {
            flush = true;
            if (flush == true)
                System.out.println("you got a a flush");
        }
        if(sort2(hand)){
            straight = true;
            if (straight = true)
                System.out.println("you got a a straight");
        }

        if(straight && flush)
        {
            straightFlush = true;
            straight = false;
            flush = false;
            System.out.println("you got a straight flush");
        }
        if(straightFlush)
        {
            for(int j = 9; j < 13; j++)
                if(hand[i].getFace().equals(faces[j]) && 
                        hand[i + 1].getFace().equals(faces[j + 1]) && 
                        hand[i + 2].getFace().equals(faces[j + 2]) && 
                        hand[i + 3].getFace().equals(faces[j + 3]) && 
                        hand[i + 4].getFace().equals(faces[j + 4]))
                {
                    straightFlush = false;
                    RoyalFlush = true;
                }

        }
        if(hand[0].getFace().equals(hand[1].getFace()) && 
                hand[0].getFace().equals(hand[2].getFace()) && 
                hand[0].getFace().equals(hand[3].getFace()) || 
                hand[1].getFace().equals(hand[2].getFace()) && 
                hand[1].getFace().equals(hand[3].getFace()) && 
                hand[1].getFace().equals(hand[4].getFace()) || 
                hand[0].getFace().equals(hand[1].getFace()) && 
                hand[0].getFace().equals(hand[3].getFace()) && 
                hand[0].getFace().equals(hand[4].getFace()) || 
                hand[0].getFace().equals(hand[2].getFace()) && 
                hand[0].getFace().equals(hand[3].getFace()) && 
                hand[0].getFace().equals(hand[4].getFace()) || 
                hand[0].getFace().equals(hand[1].getFace()) && 
                hand[0].getFace().equals(hand[2].getFace()) && 
                hand[0].getFace().equals(hand[4].getFace()))
            fourKind = true;
        else
            if(hand[0].getFace().equals(hand[1].getFace()) && 
                    hand[2].getFace().equals(hand[3].getFace()) || 
                    hand[0].getFace().equals(hand[1].getFace()) && 
                    hand[3].getFace().equals(hand[4].getFace()) || 
                    hand[1].getFace().equals(hand[2].getFace()) && 
                    hand[3].getFace().equals(hand[4].getFace()) || 
                    hand[0].getFace().equals(hand[2].getFace()) && 
                    hand[3].getFace().equals(hand[4].getFace()) || 
                    hand[0].getFace().equals(hand[1].getFace()) && 
                    hand[2].getFace().equals(hand[4].getFace()) || 
                    hand[0].getFace().equals(hand[4].getFace()) && 
                    hand[1].getFace().equals(hand[2].getFace()) || 
                    hand[0].getFace().equals(hand[3].getFace()) && 
                    hand[1].getFace().equals(hand[2].getFace()) || 
                    hand[1].getFace().equals(hand[4].getFace()) && 
                    hand[2].getFace().equals(hand[3].getFace()) || 
                    hand[0].getFace().equals(hand[3].getFace()) && 
                    hand[1].getFace().equals(hand[4].getFace()) && !fullHouse)
            {
                System.out.println("2 pair=true;");
                twoPair = true;
            } else
                if(hand[0].getFace().equals(hand[1].getFace()) && 
                        hand[1].getFace().equals(hand[2].getFace()) && 
                        hand[3].getFace().equals(hand[4].getFace()) || 
                        hand[0].getFace().equals(hand[1].getFace()) && 
                        hand[1].getFace().equals(hand[3].getFace()) && 
                        hand[2].getFace().equals(hand[4].getFace()) || 
                        hand[0].getFace().equals(hand[1].getFace()) && 
                        hand[1].getFace().equals(hand[4].getFace()) && 
                        hand[2].getFace().equals(hand[3].getFace()) || 
                        hand[0].getFace().equals(hand[3].getFace()) && 
                        hand[3].getFace().equals(hand[4].getFace()) && 
                        hand[1].getFace().equals(hand[2].getFace()) || 
                        hand[1].getFace().equals(hand[2].getFace()) && 
                        hand[2].getFace().equals(hand[4].getFace()) && 
                        hand[0].getFace().equals(hand[3].getFace()) || 
                        hand[2].getFace().equals(hand[3].getFace()) && 
                        hand[3].getFace().equals(hand[4].getFace()) && 
                        hand[0].getFace().equals(hand[1].getFace()) || 
                        hand[1].getFace().equals(hand[2].getFace()) && 
                        hand[2].getFace().equals(hand[3].getFace()) && 
                        hand[0].getFace().equals(hand[4].getFace()) && !straightFlush){        
                    fullHouse = true;

                }
        if((hand[0].getFace().equals(hand[1].getFace()) && 
                hand[1].getFace().equals(hand[2].getFace()) || 
                hand[0].getFace().equals(hand[2].getFace()) && 
                hand[0].getFace().equals(hand[4].getFace()) || 
                hand[0].getFace().equals(hand[2].getFace()) && 
                hand[0].getFace().equals(hand[3].getFace()) || 
                hand[1].getFace().equals(hand[3].getFace()) && 
                hand[1].getFace().equals(hand[4].getFace()) || 
                hand[0].getFace().equals(hand[1].getFace()) && 
                hand[1].getFace().equals(hand[3].getFace()) || 
                hand[0].getFace().equals(hand[1].getFace()) &&
                hand[1].getFace().equals(hand[4].getFace()) || 
                hand[1].getFace().equals(hand[2].getFace()) && 
                hand[2].getFace().equals(hand[4].getFace()) || 
                hand[2].getFace().equals(hand[3].getFace()) &&
                hand[3].getFace().equals(hand[4].getFace()) || 
                hand[1].getFace().equals(hand[2].getFace()) &&
                hand[2].getFace().equals(hand[3].getFace())) && 
                !twoPair && !fullHouse && !fourKind){
            threeKind = true;

        }
        else
            if((hand[i].getFace().equals(hand[i + 1].getFace()) || 
                    hand[i].getFace().equals(hand[i + 2].getFace()) ||
                    hand[i].getFace().equals(hand[i + 3].getFace()) ||
                    hand[i].getFace().equals(hand[i + 4].getFace()) ||
                    hand[i + 1].getFace().equals(hand[i + 2].getFace()) ||
                    hand[i + 1].getFace().equals(hand[i + 3].getFace()) || 
                    hand[i + 1].getFace().equals(hand[i + 4].getFace()) || 
                    hand[i + 2].getFace().equals(hand[i + 3].getFace()) || 
                    hand[i + 2].getFace().equals(hand[i + 4].getFace()) ||
                    hand[i + 3].getFace().equals(hand[4].getFace())) && 
                    !twoPair && !threeKind && !fullHouse){
                pair = true;

            }

            else
            {   nothing = true;
            System.out.println("you got nothing");
            }
        this.validate();
        // giveMoney();
    }

    public int getFaceValue2( Poker.Card card) {
        String s = card.getFace();
        byte byte0 = 0;
        if(s.equals(faces[0]))
            byte0 = 2;
        if(s.equals(faces[1]))
            byte0 = 3;
        if(s.equals(faces[2]))
            byte0 = 4;
        if(s.equals(faces[3]))
            byte0 = 5;
        if(s.equals(faces[4]))
            byte0 = 6;
        if(s.equals(faces[5]))
            byte0 = 7;
        if(s.equals(faces[6]))
            byte0 = 8;
        if(s.equals(faces[7]))
            byte0 = 9;
        if(s.equals(faces[8]))
            byte0 = 10;
        if(s.equals(faces[9]))
            byte0 = 11;
        if(s.equals(faces[10]))
            byte0 = 12;
        if(s.equals(faces[11]))
            byte0 = 13;
        if(s.equals(faces[12]))
            byte0 = 14;
        return byte0;
    }

    public boolean sort2( Poker.Card acard[]){
        boolean flag = false;
        int ai[] = new int[5];
        for(int i = 0; i < 5; i++)
            ai[i] = getFaceValue2(acard[i]);

        for(int k = 1; k < ai.length; k++)
        {
            for(int l = 0; l < ai.length - 1; l++)
                if(ai[l] > ai[l + 1])
                {
                    int j = ai[l];
                    ai[l] = ai[l + 1];
                    ai[l + 1] = j;
                }

        }

        for(int i1 = 0; i1 < ai.length - 1; i1++)
            if(ai[0] + 1 == ai[1] && ai[1] + 1 == ai[2] && ai[2] + 1 == 
            ai[3] && ai[3] + 1 == ai[4])
                flag = true;
            else
                flag = false;

        if(flag)
            System.out.print(hand[0] + " " + hand[1] + " " + hand[2] + " " + 
                    hand[3] + " " + hand[4]);
        System.out.print(ai[0] + " " + ai[1] + " " + ai[2] + " " + ai[3] +
                " " + ai[4]);
        return flag;
    }
} 
```

# html - 是 bad practice?

> ID：11887522
> 
> 赞同：3
> 
> 时间：2012-08-09T16:10:24.610
> 
> 标签：html

> **Possible Duplicate:**
> [Are iframes considered 'bad practice'?](https://stackoverflow.com/questions/362730/are-iframes-considered-bad-practice)

As far as practicality of application and what is considered "good" or "proper" practice in modern web development, is using the `<iframe>` tag considered "acceptable"?

I'm aware that HTML5 has implemented some new attributes for this tag, but IIRC, `<iframe>` has gotten some bad rep in the past.

Is this something that should be handled case-by-case, or is it best to try and avoid the usage of this tag despite HTML5s new support for it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:22:02.263

是的，这是不是“是或否”类型答案的情况之一。如今，您可以使用 AJAX 从服务器加载 HTML 并让它为您填充一个 div 来完成很多工作 - 哎呀 jquery 甚至将它内置到他们的 AJAX 函数中。

在求助于 iframe 之前，我通常会尝试弄清楚这是否是解决问题的好方法。然而，有时，iframe 只是做得更好。它维护自己的浏览器历史记录，如果您正在加载的内容存在问题，可以帮助您分离 CSS 样式。

我喜欢 j08691 的评论，即它有时是“必要的邪恶”，但是当 AJAX/Div 解决方案变得太丑陋或需要太多黑客才能开始工作时，不要让它阻止你使用它。

# appharbor - AppHarbor's IIS logs

> ID：11887534
> 
> 赞同：2
> 
> 时间：2012-08-09T16:11:12.137
> 
> 标签：appharbor, iis-logs

Is there a way to get the IIS logs for a website hosted on [AppHarbor](https://appharbor.com/)? I have one site hosted on it and I am getting run time exception. Currently I get a suggestion that I should enable custom errors to view the exception. I don't want to do this since it is a deployed instance which is being used by users.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:16:27.667

IIS 日志当前不可用，但您可以在 AppHarbor[的错误界面中访问未处理的异常。](http://blog.appharbor.com/2011/03/28/application-errors)

您还可以使用[Elmah](http://code.google.com/p/elmah/)（适当锁定）之类的东西来记录和检查错误。

我们也在努力使 HTTP 访问日志可用。

# html - Creating a moving banner

> ID：11887535
> 
> 赞同：0
> 
> 时间：2012-08-09T16:11:18.633
> 
> 标签：html, banner

Currently for my webpage's banner, I'm using [http://workshop.rs/projects/coin-slider/](http://workshop.rs/projects/coin-slider/) to have 4 images sliding. On the office's slower computers the coin slider seems to be very laggy.

My question is, would animating the 4 images into a single GIF file be better/faster? Are there better options to create a 4-image-moving banner?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:22:19.973

尝试使用轻量级图片库，我在[这里](http://blogupstairs.com/10-lightweight-image-gallery-slider-plugins/)找到了一些。硬币滑块是轻量级的 8KB，但也有更轻的 2KB 左右。

从技术上讲，您可以使用 GIF，但我认为存在一些移动兼容性问题，您还可以使用 javascript/jQuery 画廊获得更好的功能。

就慢速计算机而言，您对此无能为力，我不会太担心。只需对如何最小化文件和提供更快的站点进行一些额外的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:26:53.827

Gif 不是滑块的明智替代网络..您可以降低图像的质量并压缩它们..或者如果您使用大图像并在滑块中调整它们的大小，您可以使用任何图像更改工具调整它们的大小。这也会减小图像大小。我希望你不要给图片路径直接的互联网链接，因为这会自动增加加载时间。

# c - Character Array

> ID：11887536
> 
> 赞同：0
> 
> 时间：2012-08-09T16:11:18.593
> 
> 标签：c, arrays

I am trying to build a char array of words using calloc.

What I have:

```
char** word;
word=(char**)calloc(12,sizeof(char*));
for(i=0;i<12;i++){
word[i]=(char*)calloc(50,sizeof(char));
} 
```

Is this correct if I want a char array that has 12 fields each capable of storing 50 characters?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:16:12.557

代码是正确的。几点：

*   无需转换返回值`calloc()`（[我是否转换了 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）
*   `sizeof(char)`保证为1

所以代码可以重写为：

```
char** word;
int i;

word = calloc(12, sizeof(char*));
for (i = 0; i < 12; i++)
    word[i] = calloc(50, 1); 
```

在 C 中，大多数对“字符串”进行操作的函数都要求`char`数组以空值结尾（`printf("%s\n", word[i]);`例如）。如果要求缓冲区包含 50 个字符并用作“字符串”，则为空终止符分配一个附加字符：

```
word[i] = calloc(51, 1); 
```

正如[eq-](https://stackoverflow.com/users/463074/eq)所评论的那样，一种不易出错的使用方法`sizeof`是：

```
word = calloc(12, sizeof(*word)); 
```

# php - Can't connect to excel via odbc but no error messages

> ID：11887538
> 
> 赞同：1
> 
> 时间：2012-08-09T16:11:34.043
> 
> 标签：php, odbc

When I try this code I don't even get an error message but when I do a `var_dump` I get `bool(false)`. So is there a syntax error preventing the connection?

```
 $conn=odbc_connect('sample_db','','');
 echo odbc_error($conn);
 $sql="SELECT * FROM customers";
 $rs=odbc_exec($conn,$sql); 
 echo var_dump($rs); 
```

Or maybe I'm just doing it wrong. I'm trying this in PHP 5.2 and a 2008 server.

UPDATE: After using print_r(error_get_last()); it generates this message:

Array ( [type] => 2048 [message] => odbc_connect() [function.odbc-connect]: It is not safe to rely on the system's timezone settings. Please use the date.timezone setting, the TZ environment variable or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/New_York' for '-4.0/DST' instead [file] => *removed* [line] => 2 )

Can this really prevent the odbc connection?

# ruby-on-rails - Some Instance Methods Are Undefined in acts_as_taggable

> ID：11887540
> 
> 赞同：0
> 
> 时间：2012-08-09T16:11:35.160
> 
> 标签：ruby-on-rails, ruby, acts-as-taggable-on

I am currently getting the following error on my post model which is under act_as_taggable_on for tags and channels.

```
undefined local variable or method `tag_list_on' for #
<ActiveRecord::Relation:0x007f9864675b48> 
```

I seems that rails cannot detect the existence of tag_list_on or set_tag_list_on methods; however, it does detect the tagged_with method, whose source is located in the exact same module as the other files.

RubyMine can detect the existence of all of these methods fine btw.

Here is the section of code that I'm performing all of these operations on.

```
@posts = Post.tagged_with(params[:tags]).paginate(:page => params[:page]|| 1, :per_page => 20)
user_tags = @posts.tag_list_on(:tags)                                                         
custom_tags = user_tags - params[:tags]                                                       
@posts.set_tag_list_on(:customs, custom_tags)                                                 
@tags = @posts.tag_counts_on(:customs, :order => "count desc").limit(10)                      
@channels = @posts.tag_counts_on(:channels, :order => "count desc") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:54:51.180

[`tagged_with`](https://github.com/mbleigh/acts-as-taggable-on/blob/master/lib/acts_as_taggable_on/acts_as_taggable_on/core.rb#L81)是 的类方法`Post`，由`acts_as_taggable_on`gem 添加。

`@posts`在您的代码中是 的实例`ActiveRecord::Relation`，而不是`Post`类本身或它的任何实例。

中没有`tag_list_on`实例方法`ActiveRecord::Relation`，因此出现错误。

`tagged_with`说它回来了

> ...用指定标签标记的对象范围。

[`tag_list_on`](https://github.com/mbleigh/acts-as-taggable-on/blob/master/lib/acts_as_taggable_on/acts_as_taggable_on/core.rb#L226)并且[`set_tag_list_on`](https://github.com/mbleigh/acts-as-taggable-on/blob/master/lib/acts_as_taggable_on/acts_as_taggable_on/core.rb#L267)是类的**实例**方法`Post`，由`acts_as_taggable`gem 添加。

您需要为每个**实例**`tag_list_on`调用and`set_tag_list_on`**`@posts`**

 **```
user_tags = []
@posts.each do |post|
  user_tags = user_tags + post.tag_list_on(:tags) 
end
custom_tags = user_tags.uniq - params[:tags]

# ... 
```**

# ruby-on-rails - Using Named Scopes as Subqueries in Rails

> ID：11887542
> 
> 赞同：3
> 
> 时间：2012-08-09T16:11:43.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

In my Rails app, I want to join one table with a named scope of another table. Is there a way to do this without having to rewrite the named scope in pure SQL for my join statement?

Basically, is there a way to do something like this?

```
class Foo < ActiveRecord::Base
  scope :updated_today, where('updated_at > ?', DateTime.now.prev_day)
end

Bar.joins(Foo.updated_today) 
```

Where Bar.joins generates the following SQL:

```
SELECT * FROM bars
INNER JOIN
  (SELECT * FROM foos WHERE updated_at > 2012-8-9) AS t0
ON bar_id = bars.id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:49:22.550

我不相信有任何专门为此设计的方法。但是，您可以使用 的[`to_sql`](http://apidock.com/rails/v3.2.1/ActiveRecord/Relation/to_sql)方法`ActiveRecord::Relation`将作用域的完整 SQL 查询作为字符串获取，然后您可以将其用作连接语句中的子查询，如下所示：

```
Bar.joins("INNER JOIN (#{Foo.updated_today.to_sql}) as t0 ON bar_id = bars.id") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:18:01.500

您可以使用该`merge`方法将范围连接到另一个模型的查询：

```
Bar.joins(:foos).merge(Foo.updated_today) 
```

我还没有看到关于这方面的大量文档（Rails API 甚至没有关于方法本身的任何文档），但这里有一篇相当不错的[博客文章](http://www.alexrothenberg.com/2011/10/17/chaining-active_record-scopes-from-different-models.html)，给出了一个相当详细的示例。

另外，刚刚注意到这在 RailsCast on [Advanced Queries in Rails 3](http://railscasts.com/episodes/215-advanced-queries-in-rails-3?view=asciicast)中有所提及。

# .htaccess - Third-level domains with .htaccess

> ID：11887544
> 
> 赞同：2
> 
> 时间：2012-08-09T16:11:55.600
> 
> 标签：.htaccess, mod-rewrite

I would like to do a thing like that used in basecamp.com: the name of your company becomes a third-level domain, [http://mycompany.basecamp.com](http://mycompany.basecamp.com) for example. I understand that it is (most likely) made ​​on the basis of .htaccess file and mod_rewrite, but I do not quite understand how exactly. Please advise me how it is implemented? Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-16T05:34:03.587

1.  `/host/users/myaccount/htdocs/mycompany`在 htdocs:或等效项中创建子目录
2.  备份 .htaccess ，总是更好
3.  将以下行添加到`.htaccess`文件中：

> ```
> RewriteCond %{HTTP_HOST} ^mycompany\.basecamp\.com
> RewriteCond %{REQUEST_URI} !^/mycompany/?
> RewriteRule ^(.*)$ /mycompany/$1 [L] 
> ```

这将捕获对第三级域的每次调用并使用子文件夹中的文件进行应答

# objective-c - 在某些条件下，如何在此处使用 AVAudioPlayer 框架循环声音？

> ID：11887556
> 
> 赞同：1
> 
> 时间：2012-08-09T16:12:46.667
> 
> 标签：objective-c, ios, core-audio

**编辑：**现在尝试实施亚当 B 的答案......

我有一个 crashSound.wav 文件，已放入我的 xCode 项目的 Supporting Files 文件夹中

我现在正试图让它在一个 while 循环中播放，但文档并不清楚我如何能做到这一点。我知道我必须在某处创建一个委托对象（我猜是我的 Game 类）并获取有关 stopButtonPressed 是否为假以及文件是否已完成播放的通知，以便它可以在 stopButtonPressed 条件为假时循环并再次播放。我知道我不应该通过调用 [crashSound play] 方法来做到这一点，但我不知道该怎么做......有什么帮助吗？

```
@interface Game()
{
    // code...

    AVAudioPlayer *crashSound;

    // code...
}
@end

@implementation Game

- (id) init 
{ 
    // code...

    NSURL *crashSoundFile = [[NSURL alloc] initWithString:@"crashSound" ];

    crashSound = [[AVAudioPlayer alloc] initWithContentsOfURL:crashSoundFile error:NULL];

    // code...
}
-(void) play // this is my "main" method that will be called once the playButton is pressed
{
   while(!self.stopButonPressed)
   {
      [crashSound play];
   }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:57:25.973

对于大多数多媒体库的工作方式（例如，包括 ），您的代码结构是错误的`AVPlayer`。

您将开始播放声音，而不是使用 while 循环，并在每次完成时检查您的条件是否为真。您可能需要在声音完成时基于计时器或在该回调中触发“下一个”事物，而不是循环。

有关如何设置 AVPlayer 和通知功能的示例，请参阅此问题和好的答案`playerItemDidReachEnd:`：[使用 AVFoundation AVPlayer 循环播放视频？](https://stackoverflow.com/questions/5361145/looping-a-video-with-avfoundation-avplayer)

# java - Java：使用同步集合的经验法则？

> ID：11887558
> 
> 赞同：2
> 
> 时间：2012-08-09T16:12:48.747
> 
> 标签：java, collections, synchronize

我正在阅读有关使用 StringBuilder 与 StringBuffer 的Stackoverflow[线程。](https://stackoverflow.com/questions/355089/stringbuilder-and-stringbuffer-in-java)

底线似乎是这两个集合是相同的东西，除了 StringBuffer 是同步的，是线程安全的，并且与不是那些东西的 StringBuilder 相比，性能稍差。

有人提出 ArrayList 和 Vector 之间存在类似的关系。

除非我有意识地创建多个线程，否则不使用同步集合（或其他任何东西）是一个好的（安全）经验法则吗？

**换句话说，我收到消息“尽可能使用新的 StringBuilder。”，我想知道的是，我如何确定它是可能的？**

只要我不故意创建新线程，我使用非同步集合是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:18:11.777

使用不同步的东西，直到你确定你需要同步。

eg `StringBuffer`and`Vector`的部分问题在于它们并不总是以正确的方式同步。因为`Vector`，您并不总是*需要*单独同步每个操作；通常，您真正想要的是同步操作块……这不一定`Vector`比.`ArrayList``Collections.synchronizedList`

当你知道你正在使用并发和多线程时，然后计算出你需要什么同步的细节，但只是换成`StringBuffer`只会`StringBuilder`给你一种错误的安全感——即使你决定以后使用并发，那不是一定是正确*的*并发。

（如果您当前没有使用线程，那么绝对可以 - 甚至推荐 - 查找并替换`StringBuffer`为`StringBuilder`。上述参数是相反的方向。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:15:56.613

在您知道如何自己回答这个问题之前，我会说总是使用非阻塞的任何东西。同步一切真的很容易，创建和启动线程也很容易。了解何时使用同步以及何时创建线程需要一段时间。

您应该从阅读 Java 并发实践开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:16:42.543

看起来你在这里问了多个问题。因此，首先，除非绝对必要，否则避免同步确实是一个好主意。

在第二个问题上，将 StringBuilder 替换为 StringBuffer 也是安全的，反之亦然，除非它们的值可以从多个线程中更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:24:40.097

> 除非我有意识地创建多个线程，否则不使用同步集合（或其他任何东西）是一个好的（安全）经验法则吗？

不它不是。

在某些情况下会涉及多个线程，即使您没有有意识地创建它们。例如，任何使用 Swing 或 Servlets 的应用程序都有可能在不同线程上的应用程序代码之间进行交互。（你甚至可以争辩说，如果你使用标准的线程池实现，你并没有*显式地创建线程。）*

此外，使用同步集合并不一定能保证线程安全。

但是从某种意义上说，您是正确的，当不可能有多个线程使用数据结构时使用同步数据结构是（有点）浪费。但是没有什么地方比过去互斥量昂贵的时候更浪费了。

* * *

> 换句话说，我收到消息“尽可能使用新的 StringBuilder。”，我想知道的是，我如何确定它是可能的？

通过理解你的代码。`StringBuilder`其他线程可以看到吗？如果没有，那么使用它是安全的。否则，共享的线程`StringBuilder`需要同步。一种方法*可能*是使用 a `StringBuffer`，但这*不一定*会给您正确的同步粒度。

这是一个简单的例子：

```
 public String nTimes(String str, int n) {
      StringBuilder sb = new StringBuilder();
      for (int i = 1; i <= n; i++) sb.append(str);
      return sb.toString();
  } 
```

在上面，`StringBuilder`in`sb`永远不会被另一个线程看到，所以不需要同步它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T16:15:24.080

我们正在使用`StringBuilder`而不是`StringBuffer`因为我们不认为多个线程会导致我们出现问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T16:15:39.767

如果没有进一步分析，自动在整个代码库上执行此操作听起来有点危险，除非您 100% 肯定这些对象（向量、字符串缓冲区）不是跨线程共享的，或者同步对象的选择不是由线程驱动的首先是安全分析。

可以毫无风险地进行交换的一种简单情况是局部变量，显然不能跨线程共享（除非您返回它们）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T16:16:39.330

这个链接说得最好：

> * [http://javahowto.blogspot.com/2006/08/stringbuilder-vs-stringbuffer.html](http://javahowto.blogspot.com/2006/08/stringbuilder-vs-stringbuffer.html)
> 
> StringBuilder 是在 JDK 1.5 中引入的。StringBuilder 和 StringBuffer 有什么区别？根据 javadoc，StringBuilder 被设计为单线程使用中 StringBuffer 的替代品。简单来说，它们的主要区别：
> 
> *   StringBuffer 被设计为线程安全的，并且 StringBuffer 中的所有公共方法都是同步的。StringBuilder 不处理线程安全问题，并且它的所有方法都没有同步。
>     
>     
> *   在大多数情况下，StringBuilder 比 StringBuffer 具有更好的性能。
>     
>     
> *   尽可能使用新的 StringBuilder。

根据我自己的经验：

*   对于任何严重的字符串操作，请始终使用 StringBuilder（从不使用“String”）

*   我从来没有使用过 StringBuffer（我总是只使用“StringBuilder”）。

*   只有当从多个线程同时访问*相同*的正在进行的字符串时，您才应该*考虑*“StringBuffer”。即使这样，您也可能会发现使用自己的锁定更容易/更有效。

恕我直言...

# jquery - 使用 jQuery 从 .serialize 读取以填充表单

> ID：11887561
> 
> 赞同：0
> 
> 时间：2012-08-09T16:12:50.950
> 
> 标签：jquery, forms, serialization

首先，我是一个 JS 新手。我有 form1 询问我正在序列化的用户电子邮件地址。我需要的是获取这个单一的数据字段并将其反序列化到一个更复杂的表单2中的字段中，当用户提交表单1时，该表单在灯箱中生成。

我已经完成了序列化，也完成了灯箱，但我不知道如何获取在 form1 中提交的电子邮件地址并使用该数据预先填充 form2 中的电子邮件字段。任何帮助，将不胜感激。

两种形式的代码如下。（省略灯箱，因为它不适用）。基本上，我需要将'form1'中的'email'放入'form2'中的'email'字段

```
<form action="#" id="form1">
   <label>email:</label> <input type="text" name="email" id="email"/> 
    <input type="submit" value="send" name="submit" />
</form>

<form action="#" id="form2">
   <label>Email:</label> <input type="text" name="email" id="email"/>
   <label>Zip Code:</label> <input type="text" name="zip" id="zip"/>
   <strong>Choose a Newsletter </strong>
   <ul><li><input type="checkbox" value="2" name="Weekly" id="Weekly"><label>Weekly</label></li>
<li><input type="checkbox" value="4" name="Daily" id="Daily"><label>Daily</label></li>
<li><input type="checkbox" value="8" name="Monthly" id="Monthly"><label>Monthly</label></li>
</ul>
<input type="submit" value="Subscribe" name="Subscribe" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:42:03.663

如果您显示更多代码，我可以提供更多帮助，但这本质上是您需要做的。

您拥有`email`原始和序列化形式的价值。由于`form2`位于灯箱中，因此它确实在同一页面上。因此，您可以轻松更改`form2`.

您可以使用`.val()`jQuery 函数执行此操作，如下所示：`$("#form2 #email").val(email);`

现在显然您需要将 jQuery 选择器 ( `#form2 #email`) 替换为实际适合`form2`. 您还需要`email`在`.val()`函数内更改为您分配为电子邮件地址的任何变量`form1`。

## 编辑

通过添加您的代码，我可以提供更多 - 谢谢！

此代码将在您提交第一个表单时运行，并将 form1 的电子邮件值放入 form2。

```
$("#form1").submit(function(sent){

    // Sets the value of emailvalue to the current email address
    var emailValue = $("#form1 #email").val();
    // Places the value of emailValue into the email field in form2
    $("#form2 #email").val(emailValue);

}); 
```

# c# - 同一个小数如何有不同的位并被 ToString() 格式化？

> ID：11887562
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:12:52.063
> 
> 标签：c#, .net, oracle, odp.net

在我们的 Oracle 数据库中，我有一个表（比如 MYTABLE），其中列 VALUE_NUMBER 类型为 NUMBER（NULL，未指定精度）。此表包含一个值`1178.2`

当使用标准 ADO.Net（实际上是 ODP.Net）从该列中检索数据，然后将十进制值转换为字符串时，我得到“1178.20”。显然，将常量转换`1178.2M`为字符串时，输出为`1178.2`.

深入挖掘，我查看了 decimal.GetBits() 的输出，结果证明是不同的，尽管在比较两个数字时它们确实被认为是相等的。

下面的代码示例说明了这种行为：

```
using (var connection = new OracleConnection("my connection string"))
{
    connection.Open();
    var command = connection.CreateCommand();
    command.CommandText = "SELECT VALUE_NUMBER FROM MYTABLE";
    command.CommandType = CommandType.Text;
    using (command)
    {
        var reader = command.ExecuteReader(CommandBehavior.Default);
        reader.Read();
        decimal oracleDecimal = reader.GetDecimal(reader.GetOrdinal("VALUE_NUMBER"));
        Console.WriteLine(oracleDecimal); // output: 1178.20 (NOT expected)
        var bitsFromOracle = decimal.GetBits(oracleDecimal).Select(x => x.ToString());
        var bitsFromOracleString = string.Join(",", bitsFromOracle.ToArray());
        Console.WriteLine(bitsFromOracleString); // 117820,0,0,131072

        // sanity check
        const decimal constantDecimal = 1178.2M;
        Console.WriteLine(constantDecimal); // output: 1178.2 (expected)
        var bitsFromConstant = decimal.GetBits(constantDecimal).Select(x => x.ToString());
        var bitsFromConstantString = string.Join(",", bitsFromConstant.ToArray());
        Console.WriteLine(bitsFromConstantString); // 11782,0,0,65536

        Console.WriteLine(oracleDecimal == constantDecimal); // True 
    }
} 
```

这应该如何解释？

下面是表 CREATE & INSERT 脚本来完成这项工作：

```
CREATE TABLE MYTABLE (
  ID  NUMBER(10)             NOT NULL,
  VALUE_NUMBER           NUMBER
);

INSERT INTO MYTABLE(ID,VALUE_NUMBER) VALUES(1,1178.2); 
```

更新：

@Vash 的回答和他随后的评论得出了正确的结论，即 .Net 十进制类型实际上包含有关其位数的信息，即使它们与相等性无关。`1178.2M`并`1178.20M`因此具有不同的位表示，尽管`.Equals()`方法和`==`运算符显然认为这些数字相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:35:39.640

您遇到的主要问题是您没有对从数据库收到的行数据应用任何格式。

如果你想有特定的格式，你应该指定它。在文档中，您将找到[Formatting Types](http://msdn.microsoft.com/en-us/library/26etazsy)，其中包含如何处理格式的所有信息。

如果你只想有结果

```
Console.WriteLine(valueNumber.ToString("N1", CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:34:14.057

这会导致显示问题或计算问题吗？

如果您只想根据需要显示输出，您可以使用`valueNumber.ToString("G")`?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T16:21:23.417

你不能。如果您想这样做，您必须将其转换为字符串。

```
select 1123.80 num from dual;

select to_char(1123.80, 9999.99) from dual; 
```

即唯一的方法是

```
SQL> INSERT INTO MYTABLE(ID,VALUE_NUMBER) VALUES(1,1178.20);
SQL> SELECT to_char(VALUE_NUMBER, 9999.99) NUM FROM MYTABLE

NUM
-------------------
1178.20 (string/varchar)

SQL> SELECT VALUE_NUMBER NUM FROM MYTABLE

NUM
-------------------
1178.2 (number) 
```

这可能会在稍后对值执行数字（十进制）操作时导致问题，因为它变成了`string`并且需要`number`再次转换/强制转换，这不是一个非常推荐的方式。即使您不关心精度是`NUMBER(10,2)`from `NUMBER(10)`，结果也将是相同的。

# svg - 使用 D3.js 嵌套数据（热图）

> ID：11887566
> 
> 赞同：0
> 
> 时间：2012-08-09T16:13:10.677
> 
> 标签：svg, d3.js, heatmap

所以我是使用 Javascript（尤其是 D3 库）的新手，我正在尝试做一些与以下示例不同的事情：http: [//mbostock.github.com/d3/talk/20111116/iris-splom.html](http://mbostock.github.com/d3/talk/20111116/iris-splom.html)。在我的情况下，虽然每个单元格都是相同的 4 x 4 网格，但比例完全相同。

所以在我的例子中，顶层元素是一个盘子。每个板在行和列的交叉处都有行和列一个值（如果你愿意的话，一个热图）。我能够创建适当的板元素；但是，所有板的数据都存在于每个元素下，而不是正确嵌套。我尝试附上一张图片，以便您可以看到每个“盘子”都是相同的，如果您查看底层文档结构，它是相同的，并且基本上每个矩形都是两个重叠的数据点。

在更仔细地查看 Mike 的示例（上面的链接）时，看起来他使用交叉函数来帮助嵌套数据，我想知道这是否是我的代码失败的地方。感谢您提供的任何帮助。

我在下面发布了我的代码

```
 d3.csv("plateData.csv", function(data) {

  var m = 20,
      w = 400,
      h = 300,
      x_extent = d3.extent(data, function(d){return d.Rows}),
      y_extent = d3.extent(data, function(d){return d.Columns}),
      z_extent = d3.extent(data, function(d){return d.Values});

         var x_scale = d3.scale.linear()
             .range([m, w-m])
             .domain(x_extent)
        var y_scale = d3.scale.linear()
             .range([h-m,m])
             .domain(y_extent)   

        var ramp=d3.scale.linear()
                .domain(z_extent)
                .range(["blue","red"]);

    // Nest data by Plates
  var plates = d3.nest()
      .key(function(d) { return d.Plate; })
      .entries(data);   

  // Insert an svg element (with margin) for each plate in our dataset. 
var svg = d3.select("body").selectAll("svg")
      .data(plates)
        .enter().append("svg:svg")
      .attr("width", w)
      .attr("height", h)
//add grouping and rect 
    .append("svg:g")
    .selectAll('rect')
          .data(data)
          .enter()
     .append('svg:rect')
            .attr('x', function(d){return x_scale(d.Rows)})
            .attr('y', function(d){return y_scale(d.Columns)})
            .attr('width', 10)
            .attr('height', 10)
            .style('fill', function(d){return ramp(d.Values)});
  }
); 
```

和示例数据：

```
Plate,Rows,Columns,Values
12345,1,1,1158.755
12345,1,2,1097.768
12345,1,3,1097.768
12345,1,4,914.807
12345,2,1,1189.249
12345,2,2,1128.261
12345,2,3,1433.197
12345,2,4,701.352
12345,3,1,914.807
12345,3,2,1433.197
12345,3,3,1189.249
12345,3,4,1402.703
12345,4,1,1158.755
12345,4,2,1067.274
12345,4,3,701.352
12345,4,4,1372.21
56987,1,1,20.755
56987,1,2,97.768
56987,1,3,97.768
56987,1,4,14.807
56987,2,1,89.249
56987,2,2,28.261
56987,2,3,33.197
56987,2,4,15.352
56987,3,1,2000.807
56987,3,2,14.197
56987,3,3,89.249
56987,3,4,402.703
56987,4,1,158.755
56987,4,2,3067.274
56987,4,3,701.352
56987,4,4,182.21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:30:00.743

你的问题有两个来源：

1.  您正在为每个嵌套组插入一个 svg 元素，但您没有为每个元素定义一个位置（所有元素都在正文中）。

2.  您正在选择正文中的所有 svg 元素，并为每个数据元素附加一个矩形，而不考虑嵌套结构。

一种解决方案是在主体内创建一个 svg 元素，为每个板创建一个组，为每个板定义一个位置，将组转换到其位置（在 svg 元素中），然后为热图创建矩形。

# c# - 如何在 C# 中隐藏 Windows 系统托盘？

> ID：11887569
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:13:20.367
> 
> 标签：c#, windows, winforms

我有一个可用的 Windows 应用程序，它在 Windows 系统托盘中显示为一个图标。当我单击系统托盘中的图标时，它会打开我的应用程序窗口，但展开的系统托盘并没有消失。启动应用程序后，如何告诉扩展的系统托盘隐藏自己？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:16:43.697

你没有。通知区域（通常称为“系统托盘”）自己管理这些东西，应用程序不应该弄乱它（这就是为什么没有 API 可以显着影响其行为的原因）；[在这里阅读例如](http://blogs.msdn.com/b/oldnewthing/archive/2012/02/22/10270776.aspx)。

# xml - XSD 架构参考完整性 xs:keyref

> ID：11887574
> 
> 赞同：2
> 
> 时间：2012-08-09T16:13:39.597
> 
> 标签：xml, xsd, constraints, unique, keyref

我有一个名为 Event 的 xsd，其中包含两个类型为 AccountStructureItem 和 EventItem 的列表（“AccountStructures”和“Events”）。AccountStructureItem 中有一个属性：SourceId 定义为 unique 和 key。EventItem 类型还有一个 SourceId 属性，它是对 AccountStructureItem 的 SourceId 的引用。

我将 AccountStructureItem 的 ID 声明如下：

```
<xs:unique name="accounts_unique">
<xs:selector xpath="AccountStructureItem"/>
<xs:field xpath="SourceId"/>
</xs:unique>

<xs:key name="accounts_key">
<xs:selector xpath="AccountStructureItem"/>
<xs:field xpath="SourceId"/>
</xs:key> 
```

这种关系是一对多的，可以有很多 EventItem 引用同一个 AccountStructureItem 的 SourceId。因此 EventItem 的键是另一个属性。

我的问题：尝试使用下面的 xs:keyref 创建对 accountstructure 的 accounts_key 的 keyreference 约束时出现错误。

```
<xs:keyref name="events_constraint" refer="accounts_key">
<xs:selector xpath="AccountStructureItem"/>
<xs:field xpath="SourceId"/>
</xs:keyref> 
```

验证中的错误消息如下：“keyref 事件找不到引用的键或范围内唯一”

请参阅下面提供的完整 XSD 和测试 xml 文件：

```
<!-- XSD -->

<xs:element name="Event">
    <xs:complexType>
      <xs:sequence>
        <!--Information Start-->
        <xs:element minOccurs="1" maxOccurs="1" nillable="false" name="Information" type="ct:Information" />
        <!--Information End-->

        <!--AccountStructure Start-->
        <xs:element name="AccountStructures">
          <xs:complexType>
            <xs:sequence>
              <xs:element minOccurs="0" maxOccurs="unbounded" name="AccountStructureItem">
                <xs:complexType>
                  <xs:complexContent mixed="false">
                    <xs:extension base="ct:AccountStructureItem" />
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>

          <xs:unique name="accounts_unique">
            <xs:selector xpath="AccountStructureItem"/>
            <xs:field xpath="SourceId"/>
          </xs:unique>

          <xs:key name="accounts_key" id="accounts_key_id">
            <xs:selector xpath="AccountStructureItem"/>
            <xs:field xpath="SourceId"/>
          </xs:key>

        </xs:element>
        <!--AccountStructure End-->

        <!--Events Start-->
        <xs:element name="Events" minOccurs="1" maxOccurs="1" nillable="false">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="EventItem" minOccurs="1" maxOccurs="10000">
                <xs:complexType>
                  <xs:complexContent mixed="false">
                    <xs:extension base="ct:EventItem" />
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>

          <xs:unique name="events_unique">
            <xs:selector xpath="EventItem"/>
            <xs:field xpath="SourceEventId"/> <!-- events has a different key -->
          </xs:unique>

          <xs:key name="events_key">
            <xs:selector xpath="EventItem"/>
            <xs:field xpath="SourceEventId"/> <!-- events has a different key -->
          </xs:key>

          <xs:keyref name="events_constraint" refer="accounts_key">
            <xs:selector xpath="AccountStructureItem"/>
            <xs:field xpath="SourceId"/>
          </xs:keyref>

        </xs:element>
        <!--Events End-->
      </xs:sequence>
    </xs:complexType>
  </xs:element>

<!-- XML -->

<AccountStructures>

    <AccountStructureItem>
      <SourceId>AC1</SourceId>
      <AccountStructureType>Site</AccountStructureType>
      <ParentSourceId>000017252</ParentSourceId>
      <Name>Oras Isometsän tehdas</Name>
      <Street>Isometsäntie 2</Street>
      <City>RAUMA</City>
    </AccountStructureItem>

    <AccountStructureItem>
      <SourceId>AC2</SourceId>
      <AccountStructureType>Site</AccountStructureType>
      <ParentSourceId>000017252</ParentSourceId>
      <Name>Oras Oy lomamökki</Name>
      <Street>Lomapolku 15</Street>
      <City>RAUMA</City>
    </AccountStructureItem>

  </AccountStructures>

  <Events>

    <EventItem>
      <SourceId>AC1</SourceId>
      <AccountStructureType>SiteLocation</AccountStructureType>
      <SourceEventId>123</SourceEventId>
      <EventDate>2012-06-20T17:57:26</EventDate>
      <EventText>
        <EnglishValue> Oras/Isometsän tehdas Oras Isometsä  </EnglishValue>
        <LocalValue> Oras/Isometsän tehdas Oras Isometsä  </LocalValue>
      </EventText>
      <Objects>
        <Object>
          <EnglishValue>Location</EnglishValue>
          <LocalValue>Location</LocalValue>
        </Object>
      </Objects>
      <Type>
        <EnglishValue>Round</EnglishValue>
        <LocalValue>Round</LocalValue>
      </Type>
      <Solutions>
        <Solution>
          <EnglishValue>On-site</EnglishValue>
          <LocalValue>On-site</LocalValue>
        </Solution>
      </Solutions>
      <EventValue>
        <UnitType>Integer</UnitType>
        <Value>1</Value>
      </EventValue>
      <Notes></Notes>
    </EventItem>

    <EventItem>
      <SourceId>AC1</SourceId>
      <AccountStructureType>SiteLocation</AccountStructureType>
      <SourceEventId>1234</SourceEventId>
      <EventDate>2012-06-20T17:57:26</EventDate>
      <EventText>
        <EnglishValue> Oras/Isometsän tehdas Oras Isometsä  </EnglishValue>
        <LocalValue> Oras/Isometsän tehdas Oras Isometsä  </LocalValue>
      </EventText>
      <Objects>
        <Object>
          <EnglishValue>Location</EnglishValue>
          <LocalValue>Location</LocalValue>
        </Object>
      </Objects>
      <Type>
        <EnglishValue>Round</EnglishValue>
        <LocalValue>Round</LocalValue>
      </Type>
      <Solutions>
        <Solution>
          <EnglishValue>On-site</EnglishValue>
          <LocalValue>On-site</LocalValue>
        </Solution>
      </Solutions>
      <EventValue>
        <UnitType>Integer</UnitType>
        <Value>1</Value>
      </EventValue>
      <Notes></Notes>
    </EventItem>
  </Events> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:39:13.273

我自己得到了解决方案。问题是我在元素列表中声明了键和引用。我现在将 key、unique 和 ref 的声明移到两个列表之外，并使用“list/item”xpath 来访问它们。像这样：

```
 <xs:selector xpath="AccountStructures/AccountStructureItem"/>
  <xs:field xpath="SourceId"/>
</xs:unique>

<xs:key name="accounts_key" id="accounts_key_id">
  <xs:selector xpath="AccountStructures/AccountStructureItem"/>
  <xs:field xpath="SourceId"/>
</xs:key>

<xs:unique name="events_unique">
  <xs:selector xpath="Events/EventItem"/>
  <xs:field xpath="SourceEventId"/>
</xs:unique>

<xs:key name="events_key">
  <xs:selector xpath="Events/EventItem"/>
  <xs:field xpath="SourceEventId"/>
</xs:key>

<xs:keyref name="events_constraint" refer="accounts_key">
  <xs:selector xpath="Events/EventItem"/>
  <xs:field xpath="SourceId"/>
</xs:keyref> 
```

# django - Django 下一个参数重定向 - 添加其他参数

> ID：11887583
> 
> 赞同：0
> 
> 时间：2012-08-09T16:14:08.130
> 
> 标签：django, redirect, get, django-views, parameter-passing

我正在尝试向我的 webapp 添加身份验证。用户通过以下方式开始身份验证过程：

```
/authorization/v1/new?client_id=X&response_type=Y&redirect_uri=Z 
```

如果`request.user`不存在，我使用以下代码重定向：

```
try:
    user_identity = Identity.objects.get(user=request.user)
except:
    resource = '%s?next=/authorization/v1/new' % settings.LOGIN_URL
    return HttpResponseRedirect(resource) 
```

这会将用户带到`/login/?next=/authorization/v1/new`.

用户成功登录，并被重定向回`/authorization/v1/new`.

**但是**，现在我缺少必需的 GET 参数`client_id`、`response_type`和`redirect_uri`，这会导致授权端点因缺少必需的参数而引发错误。

***捕获初始 GET 参数、将它们传递给登录并将它们附加到重定向回身份验证端点的最佳方法是什么？***

我考虑过使用会话或修改`redirect_uri`附加其他参数，但我仍然需要弄清楚如何通过这个过程捕获单个参数。如果可能的话，我不想修改登录代码。非常感谢任何想法/建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:20:23.213

如果您使用的是 Django 的内置`@login_required`装饰器，我相信[从 r2954 开始](https://code.djangoproject.com/ticket/849)就会为您解决这个问题。

鉴于您不是，您只需要复制相同的步骤。只需设置`next`为完整路径的值（就像[Django 在 中所做的那样`@login_required`](https://github.com/django/django/commit/be57a7fd1a)），如下所示：

```
from urllib import quote

...
    try:
        user_identity = Identity.objects.get(user=request.user)
    except Identity.DoesNotExist:   
        return HttpResponseRedirect('%snext=%s' % (settings.LOGIN_URL, quote(request.get_full_path())) 
```

*注意*我还更改了您的代码以避免您的[神奇宝贝异常处理](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)（“必须抓住他们！”）。

# java - Java 类占位符（不同设备上的 OpenGL）

> ID：11887585
> 
> 赞同：1
> 
> 时间：2012-08-09T16:14:15.203
> 
> 标签：java, class, opengl, interface

我想在我的应用程序中使用不同的 openGL 环境。

我正在开发一个游戏应用程序，但在 Windows 上测试它，因为它更容易运行。我在 windows 上使用 GL2，在 android 上使用 GLES。我的想法是限制平台对某些充当“接口”的文件的依赖。从其余代码中，我将使用这些类。我只会使用两个库中都存在的 GL2 和 GLES 的函数。

请注意，GL2 本身就是一个接口，可以由不同的类实现。

我的第一个猜测是简单地创建一个等于 GL2 的接口（PlatformGL）并将 GL2 转换为它。然后，PlatformGL 的定义将存在于每个平台一个版本中的文件中，但它不会将收到的 GL2 转换为 PlatformGL：

```
public interface PlatformGL extends GL2{
} 
```

或者直接基于GL2的实现（非首选）：

```
public class PlatformGL extends jogamp.opengl.gl4.GL4bcImpl{
    public PlatformGL(GLProfile prof, GLContextImpl cont){
        super(prof, cont);
    }
} 
```

在这两种情况下，我都得到：

```
java.lang.ClassCastException: jogamp.opengl.gl4.GL4bcImpl cannot be cast to [...].PlatformGL 
```

一种选择是构建一个新类，将所有函数调用传递给它的底层 GL，但是 GL 有很多函数和变量，我不想把它们都写下来。它可能是最干净的版本，因为某些具有不同名称约定的函数可以传递给正确的函数。

除了使用预处理器来替换类名之外，您还有什么想法吗？

java中有一个类来存储类吗？就像是

```
<class> mygl = GLES;

[...]
mygl gl = (mygl) getGL();
gl.glEnable(mygl.GL_DEPTH_BUFFER_BIT); 
```

我希望你知道如何做到这一点。

# wpf - 如何生成多个相同格式的报表——WPF中的水晶报表

> ID：11887588
> 
> 赞同：0
> 
> 时间：2012-08-09T16:14:25.133
> 
> 标签：wpf, visual-studio-2010, c#-4.0, crystal-reports

场景是：

我有发票报告。

我已输入生成发票的详细信息。但我当时没有生成发票。我只是继续输入细节。

在一天结束时，我通过从数据库中获取当前日期的待处理发票来生成所有发票/账单。取决于编号。数据集中的行，我必须生成多张发票。

我能够生成一张发票。但我无法生成多张发票。

我将 generatereport() 方法保存在 foreach 循环中，以生成多个报告。但这也没有解决我的问题。

基本上，它不是一个累积报告，所以，我不能使用分组。

那么，我应该怎么做才能完成这个任务呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:20:38.410

您可以使用分组。通过将您的发票详细信息移动到组标题中，并在每个（发票编号？）上进行拆分，您将生成一张“新”发票。包括一个新组的休息，你就准备好了。

# matplotlib - wx.boxsizer 中的 Matplotlib 而不是面板

> ID：11887589
> 
> 赞同：0
> 
> 时间：2012-08-09T16:14:29.027
> 
> 标签：matplotlib, wxpython, sizer

我在这里读到： [http](http://wiki.wxpython.org/Getting%20Started#Windows_or_Frames.3F) ://wiki.wxpython.org/Getting%20Started#Windows_or_Frames.3F 使用 Sizer 而不是面板在框架内安排内容有好处；大小更灵活。然而，许多带有 wxpython 的 matplotlib 示例无论如何都使用面板。通常他们为情节定义一个面板。我使用 Sizer 设计了一个 GUI，并希望将我的 matplotlib 画布放入其中一个 Sizer 中，而不受面板的明显限制。有谁知道这是怎么做到的，或者我在哪里可以找到一个非常简单的例子？非常感谢，安德鲁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:00:29.220

我对 matplotlib 不熟悉，但我碰巧遇到了[这个](https://stackoverflow.com/questions/10737459/embedding-a-matplotlib-figure-inside-a-wxpython-panel)关于嵌入 matplotlib 画布的问题。

据我所知，画布实际上是在一个 sizer 里面，但是那个 sizer 然后被包裹在一个面板里。这样做的好处是您可以封装所有相关变量并将它们放在一起。即画布和所有相关变量都保存为可以调用的单个项目。如果您计划拥有多个画布，或者如果您的画布只是更复杂的 GUI 的一部分，这将非常有用。

也就是说，我认为您没有理由需要将其放在面板上。如果您的应用程序非常简单（即它只包含画布而没有其他内容），您可以将其放置在框架的 sizer 中（请参阅上一个问题的答案并更改`wx.Panel`为`wx.Frame`）。

# jquery - 在同一页面上使用多个 datepicker 实例

> ID：11887590
> 
> 赞同：0
> 
> 时间：2012-08-09T16:14:31.217
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

对于重复的问题，我深表歉意，但问题已“关闭”并且我有新信息。

问题是我有两个日期选择器，当您单击一个时，日历工作正常，但随后您单击另一个，除非您单击页面上的其他位置然后返回，否则它不会出现。

这是在 jsfiddle.net 上测试的，并且没有复制该错误，但我复制了该错误，只使用了以下代码：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript" src="jquery.ui.core.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#frompicker").datepicker();
    $("#topicker").datepicker();
});
</script>
</head>
<body>
<input id="frompicker" class="dp" type="text">
<input id="topicker" class="dp" type="text">
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:51:16.633

我发现这很好用：

```
$(document).ready(function(){
   $(".dp").datepicker();
});

<input id="frompicker" class="dp" type="text">
<input id="topicker" class="dp" type="text"> 
```

使用类来调用函数。只记得给他们不同的名字来获得价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:00:52.833

完美运行，[http://jsbin.com/ajapih/1/edit#html,live](http://jsbin.com/ajapih/1/edit#html,live)

确保您`<script ... src="jquery-whatever-files.js"`在正确的位置。您拥有它的方式应该与您的 html 文件位于同一文件夹中。还要打开你的萤火虫控制台并检查 javascript 错误。

# javascript - 如何检查是否存在至少一个 li 元素 attr = something？

> ID：11887592
> 
> 赞同：0
> 
> 时间：2012-08-09T16:14:43.383
> 
> 标签：javascript, jquery

所以我想检查是否有任何 li 元素具有“data-foo”属性并且其值为“bar”。

这行得通吗？：

```
if ($('li[data-foo=bar]'))
{
//exists
}
else
{
//does not exist
} 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T16:15:41.313

获取`length`选择器返回的元素，如果是`greater`，则`zero`意味着您`atleast one`在选择器中有提供条件的元素。

```
if ($('li[data-foo=bar]').length > 0)
{
//exists
}
else
{
//does not exist
} 
```

# git - 如何在我的目录树中搜索 git 托管项目的文件中的内容？

> ID：11887594
> 
> 赞同：8
> 
> 时间：2012-08-09T16:14:58.223
> 
> 标签：git, search, find, grep, directory-tree

我喜欢 unix`find`命令，但是当我想在我的项目中搜索任何目录或子目录中的任何文件中的一段文本时，我总是觉得它太“繁琐”而无法使用。
有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-06T11:45:58.847

试用`grep`实用程序：

1.  **递归**搜索目录树中的字符串：

利用： `grep -rl alvin .`

2.  **搜索多个子目录：**

您的递归`grep`搜索不必仅限于当前目录。下一个示例显示如何递归搜索两个不相关的目录以查找不区分大小写的字符串“alvin”：

```
grep -ril alvin /home/cato /htdocs/zenf 
```

3.  **递归使用 egrep：**

您还可以使用该命令执行递归搜索，该`egrep`命令可让您一次搜索多个模式。

```
egrep -ril 'aja|alvin' . 
```

请注意，在这种情况下，搜索模式周围需要引号。

**摘要： grep -r 注释：**

关于`grep -r`命令的几点说明：

*   这个 grep 命令没有多大意义，除非您也将它与**-l**（小写“L”）标志一起使用。该标志告诉 grep 打印匹配的文件名。

*   不要忘记在 grep 命令的末尾列出一个或多个目录。如果您忘记添加任何目录，grep 将尝试从标准输入中读取（像往常一样）。

*   如图所示，您也可以使用其他普通的 grep 标志，包括 -i 忽略大小写，-v 反转搜索的含义等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:58:22.043

`git grep`是一种方法，但它会忽略未跟踪的文件（所以它不完全等同于你正在做的任何事情`find`）。其他一些避免`find`' 奇怪语法的方法：

```
grep -r "<string>" /path/to/repo 
```

您也可以尝试我个人最喜欢的`grep`替代方案[ack，](http://betterthangrep.com/)它的表现优于我`grep`的`git grep`轶事经验：

```
ack "<string>" /path/to/repo ;# path is unnecessary if you're already in the repo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-06T20:37:04.583

Grep 是最简单的方法。

```
grep -r 'text to find' . 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T16:15:32.107

`git grep`应用程序的基本目录中的“您的文本字符串”是执行此操作的好方法。

正如克里斯托弗指出的那样`ack`是有用的。

他的安装方法对我不起作用。我必须做：

```
sudo apt-get install ack-grep 
```

然后为了方便

```
alias ack='ack-grep '  # So that I can just type ack "string" 
```

我还将添加到我的`~/.bash_aliases`文件中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-19T08:54:31.690

如果您担心在大型项目中搜索缓慢，您应该看看[The Silver Searcher](https://github.com/ggreer/the_silver_searcher)。它非常快。在一个 75 000 行项目中，字符串“TODO”的测试运行时间不到 10 毫秒。

自述文件摘录：

> # Ag有什么了不起的？
> 
> *   它比ack快一个数量级。
> *   它会忽略 .gitignore 和 .hgignore 中的文件模式。
> *   如果源代码库中有您不想搜索的文件，只需将它们的模式添加到 .ignore 文件即可。（*咳嗽**.min.js*咳嗽*）
> *   命令名称比 ack 短 33%，并且所有键都在 home 行！
> 
> Ag现在相当稳定。大多数更改是新功能、小错误修复或性能改进。在我的基准测试中，它比 Ack 快得多：
> 
> ```
> ack test_blah ~/code/  104.66s user 4.82s system 99% cpu 1:50.03 total
> 
> ag test_blah ~/code/  4.67s user 4.58s system 286% cpu 3.227 total 
> ```
> 
> Ack 和 Ag 发现了相同的结果，但 Ag 快了 34 倍（3.2 秒对 110 秒）。我的 ~/code 目录大约是 8GB。感谢 git/hg/ignore，Ag 只搜索了其中的 700MB。

它可以通过大多数包存储库安装，例如：

```
apt-get install silversearcher-ag 
```

[有关更多说明，请参阅自述文件。](https://github.com/ggreer/the_silver_searcher/blob/master/README.md)

# mysql - Mysql：获取一个表中一个城市出现次数最多的问题

> ID：11887598
> 
> 赞同：0
> 
> 时间：2012-08-09T16:15:14.930
> 
> 标签：mysql

我有一个表，其中包含一些数据和相应的城市、州。我想查看一个城市在特定州的出现次数最多。假设如果有 100 次 Denver,CO 和 10 次 Boulder,CO 出现，我只想看到 Denver，因为这是最大的数字。我尝试了以下方法，但它也列出了所有其他城市：

```
select state, city, count(city) 
from tab12 
group by city 
order by state, count(city); 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:10:00.273

```
SELECT A.* FROM
(
    SELECT city,state,COUNT(1) citycount
    FROM tab12 GROUP BY state,city
) A INNER JOIN
(
    SELECT state,MAX(citycount) citycount FROM
    (SELECT state,city,COUNT(1) citycount
    FROM tab12 GROUP BY state,city) C
) B
USING (state,citycount)
ORDER BY A.state,A.city; 
```

此查询应该适用于拥有多个城市且数量相同的州。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:18:51.567

```
SELECT state, city, max(cnt)
FROM
(select state, city, count(city) as cnt
 from tab12 group by city order by state, count(city))
order by state 
```

如果您还想涵盖可能具有相同频率的城市的情况：

```
SELECT state, city, count(*) cnt 
FROM cities GROUP BY state,city  
HAVING cnt = (SELECT max(cnt) 
              FROM 
              (SELECT count(*) cnt FROM cities group by state,city) as tbl) 
ORDER BY state; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:28:10.363

未经测试，在我脑海中浮现：

```
select state as thestate, city as thecity, count(*) as thecount
from tab12
group by state, city
having thecount = (
  select max(subcnt)
  from(
    select count(*) as subcnt
    from tab12 sub
    where sub.state = thestate
    group by sub.city
  )
) 
```

请注意，在平局的情况下，这将返回与最高计数并列的每个城市。

# ruby-on-rails - 蜻蜓如何调整小图像的大小并用一些颜色填充空白？

> ID：11887601
> 
> 赞同：2
> 
> 时间：2012-08-09T16:15:25.713
> 
> 标签：ruby-on-rails, imagemagick, dragonfly-gem

是否可以使用**Dragonfly gem**小图像 70x70 到 160x70 调整大小并用特定颜色填充空白我从这里尝试一些食谱[http://markevans.github.com/dragonfly/file.ImageMagick.html](http://markevans.github.com/dragonfly/file.ImageMagick.html)

像**image.process(:resize, '160x70#', :background_color => 'transparent')**

有什么办法吗？

# jquery - jQuery 属性选择器：[x=y] 或 [x=z]

> ID：11887602
> 
> 赞同：9
> 
> 时间：2012-08-09T16:15:27.607
> 
> 标签：jquery, jquery-selectors

我有以下 jQuery 选择器：

```
$("a[href^='http://'],a[href^='https://']"); 
```

是否可以更改此设置，以便我不需要指定`a[href^=`两次？

例如，类似：

```
$("a[href^='http://'||'https://']"); 
```

* * *

**编辑：**我的例子`http`and`https`不应该从字面上理解。我可能正在寻找以`y`and开头的值`z`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:23:37.330

如果您愿意使用第二个函数调用，那就很简单了：

```
$('a').filter('[href^="http://"],[href^="https://"]'); 
```

或使用令牌：

```
var startsWith = ['http://', 'https://'];
$('a').filter(function () {
    var i;
    for (i = 0; i < startsWith.length; i++) {
        if ($(this).is('[href^="' + startsWith[i] + '"]')) {
            return true;
        }
    }
    return false;
}); 
```

或者使用自定义表达式：

```
$.expr[':']​​​​​​.hrefStartsWith = function (ele, i, info) {
    var tokens;
    tokens = info[3].split(',');
    for (i = 0; i < tokens.length; i++) {
        if ($(ele).is('[href^="' + tokens[i] + '"]')) {
            return true;
        }
    }
    return false;
}; 
```

这将用作：

```
$('a:hrefStartsWith(http://,https://)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:28:19.060

**小提琴**：http: [//jsfiddle.net/X8CYQ/](http://jsfiddle.net/X8CYQ/)

* * *

你应该能够使用这样的东西：

```
$.expr[':'].exturl = function(obj) {
   return (/^https?:\/\//i).test($(obj).attr("href"));
} 
```

然后像这样使用选择器：

```
$("a:exturl") 
```

* * *

**HTML**：

```
<a href="http://www.google.com">External link #1</a><br />
<a href="ftp://www.donotinclude.dk">No match link #1</a><br />
<a href="?nope">No match link #2</a><br />
<a href="https://www.google.dk">External link #2</a><br />
<a href="http://www.google.se">External link #3</a><br />
<a href="ssh://whywouldyouevendothis">No match link #3</a><br />
<a href="https://www.google.co.uk">External link #4</a><br />
<a href="http://www.facebook.com">External link #5</a><br />
<a href="/index.html">No match link #4</a><br />
<a href="https://www.facebook.com">External link #6</a><br />​ 
```

**JS**：

```
$.expr[':'].exturl = function(obj) {
    return (/^https?:\/\//i).test($(obj).attr("href"));
}
$(document).ready(function() {
    $("a:exturl").css("color", "red");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:28:36.853

你可以简单地做

```
$("a[href^='http']") 
```

因为`href^=`just 意味着“开始于”，除非您需要确保`://`也包含在内。

这是具有其他属性和值的示例：

[http://jsbin.com/owehow/2/edit](http://jsbin.com/owehow/2/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:35:39.000

默认情况下，您不能在 jQuery 中执行此操作.. 它没有任何类型的选择器“或”条件（除了逗号，排序，这是您想要避免的）。

如果您愿意，可以创建自定义过滤器：

[http://jsfiddle.net/yJZDg/](http://jsfiddle.net/yJZDg/)

除非您需要经常做这种事情，否则这是非常过分*的*。该示例也仅适用于完全匹配。您必须调整“开始于”或其他类型的匹配，但想法就在那里。

# mongoid - Mongoid 2.2.0 自动保存抛出堆栈级别太深异常

> ID：11887612
> 
> 赞同：1
> 
> 时间：2012-08-09T16:15:55.820
> 
> 标签：mongoid

在 Mongoid 2.2.0 上，从 Mongoid 2.0.0.rc7 迁移，现在当我保存我的模型实例时，我得到一个堆栈级别太深的异常，这在 rc7 上没有发生。

这是我的模型，非常简单：

```
class Firm
  include Mongoid::Document
  references_many :accounts, :autosave => true
end

class Account
  include Mongoid::Document
  field :name, :type => String
  referenced_in :firm, :autosave => true
end 
```

这是一些示例代码：

```
firm = Firm.create! :name=>'XYZ'
acc = Account.create! :name=>"Hello", :firm=>firm 
```

抛出异常`Account.create!`

创建帐户会导致巨大的堆栈跟踪：

```
SystemStackError: stack level too deep
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_67'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_67'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:29:in `_callback_after_103'
    org/jruby/RubyArray.java:1615:in `each'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/relations/auto_save.rb:28:in `_callback_after_103'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:429:in `_run_save_callbacks'
    org/jruby/RubyBasicObject.java:1698:in `__send__'
    org/jruby/RubyKernel.java:2097:in `send'
    /home/x/.rvm/gems/jruby-1.6.7/gems/activesupport-3.0.3/lib/active_support/callbacks.rb:93:in `run_callbacks'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/modification.rb:23:in `prepare'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence/operations/update.rb:43:in `persist'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:86:in `update'
    /home/x/.rvm/gems/jruby-1.6.7/gems/mongoid-2.2.0/lib/mongoid/persistence.rb:151:in `upsert' 
```

我只需要`autosave`在一个模型中定义吗？因为如果我这样做了，那似乎可行。我明白为什么在两个模型中都设置自动保存会导致无限循环，但正确的解决方案是什么？

# linux - 两个不同时钟的 linux 用户

> ID：11887616
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:06.350
> 
> 标签：linux, cron

是否有可能有两个 Linux 用户的时钟略有延迟？

我问的原因是我每分钟都有两个由 cron 执行的脚本（每个用户一个）。一个脚本从另一台机器复制文件，另一个将文件中的数据加载到mysql中。

我们一直发现数据加载在 90% 的情况下会错过第一分钟。我认为这是因为它的调用时间与从另一台机器复制文件的调用完全相同。

如果我可以将其 cron 执行加载脚本的用户时钟延迟 5 秒，我认为这将解决问题。

也许还有另一种方法可以实现这一目标？我错过了一些更容易的事情。我希望每轮分钟调用第一个脚本，每轮分钟后调用第二个脚本 5 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:43:22.800

可能最好的答案是设置`xntp`时钟同步。然后，正如 glglgl 建议的那样，将 a`sleep`放在要延迟的脚本的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:19:36.630

在 cron 条目的开头添加`sleep 5`或。`sleep 10`

# xsd - xsd 中的 ComplexType 限制

> ID：11887617
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:08.363
> 
> 标签：xsd

我正在创建 XSD 并定义 ComplexType，并且想知道如何创建限制。

例如，

```
<xsd:complexType name="MyTestType">
    <xsd:sequence>
        <xsd:element name="Country" type="xsd:string" > 
... 
```

而且，我希望元素“Country”的长度为 1 到 10 个字符。

有没有办法可以在元素上使用 minLength 和 maxLength ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:19:51.923

以下代码可以满足您的要求；

```
<xs:simpleType name="myTestType">
    <xs:restriction base="xs:string">
        <xs:pattern value="([a-z][A-Z])+"/>
        <xs:minLength value="1"/>
        <xs:maxLength value="10" />
    </xs:restriction>
</xs:simpleType> 
```

您可以简化它并编写以下内容；

```
<xs:simpleType name="myTestType">
    <xs:restriction base="xs:string">
        <xs:pattern value="([a-z][A-Z]){1-10}"/>
    </xs:restriction>
</xs:simpleType> 
```

# windows-server-2008 - 如何更改 MailEnable 的每小时发送限制？

> ID：11887622
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:13.120
> 
> 标签：windows-server-2008, mta

似乎 MailEnable 默认限制用户每小时 100 封电子邮件。我想更改该限制，但找不到任何选项。

我挖掘了手册和配置文件，但没有运气。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T10:10:46.890

我相信这在 Mailenable Standard (v6) 中是可行的。

打开Mailenable界面，然后展开

> 服务器 > [您的服务器] > 连接器
> 
> 右键单击 SMTP，然后选择属性 > 安全选项卡

您可以在此处设置每小时发送限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:24:10.553

在标准版本中似乎没有办法做到这一点。

# python - 如何将 cookie 添加到 urllib2 开启程序？

> ID：11887624
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:14.963
> 
> 标签：python, cookies, urllib2, cookielib

我创建了一个`urllib2.build_opener()`包含 a的开瓶器`cookielib.CookieJar()`，现在我希望手动将 cookie 添加到开瓶器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:46:48.777

就像`cookielib`文档的第二个示例所暗示的那样：

```
import os, cookielib, urllib2
cj = cookielib.MozillaCookieJar()
cj.load(os.path.join(os.path.expanduser("~"), ".netscape", "cookies.txt"))
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
r = opener.open("http://example.com/") 
```

这是链接：

[Cookie 示例](http://docs.python.org/library/cookielib.html#examples)

以上示例适用于 Mozilla cookie，但通用算法是相同的。

如果需要手动添加，请进一步阅读文档，您可以使用：

[http://docs.python.org/library/cookie.html#module-Cookie](http://docs.python.org/library/cookie.html#module-Cookie) `Cookie`对象，您可以按照自己认为合适的方式填写它，然后将其添加到`CookieJar`with

> **CookieJar.set_cookie(cookie)**
> 
> 设置一个 Cookie，而不检查是否应该设置它的策略。

# regex - 从 document.write() 中提取 URL

> ID：11887626
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:19.860
> 
> 标签：regex, url, find, extract, document.write

我有一个简单的 html 页面，它提供了一个 javascript 文件。javascript文件的唯一目的是编写以下内容......

```
document.write('<a href="http://www.linktosite.com"><img src="http://www.location.com/image.png"></a>'); 
```

信息写入后，我需要一些 javascript 来提取 url 和图像源并单独返回 url 和图像位置。

任何帮助表示赞赏。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:19:59.453

查看[这个答案](https://stackoverflow.com/questions/4059193/jquery-href-anchor-value)，它向您展示了如何使用 JQuery 或纯 Javascript 来做到这一点

**更新：**

如果您有能力修改 HTML，那么为什么不放入一个 DOM 元素，您可以在插入图像的位置之后直接连接到该元素？然后您可以使用以下 JQuery：

```
var linkDest = $('#Anchor').prev().attr('href');
var imgSrc = $('#Anchor').prev().children().attr('src'); 
```

您可以在[此 JSFiddle 示例中看到](http://jsfiddle.net/htUcC/)

# c# - 页面加载时什么都不显示

> ID：11887628
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:16:27.740
> 
> 标签：c#, asp.net

`Dropdownlist`从数据库中读取其值并显示它们。我希望页面加载时`dropdownlist`什么都不显示（即`selectedindex`= -1）和用户选择值。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:19:46.273

添加一个空的未绑定项

```
<asp:DropDownList runat="server" AppendDataBoundItems="true">
    <asp:ListItem Selected="true" Text="" Value="" />
</asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:21:45.803

您可以从后端或直接从下拉列表中添加一个空数据列表项：

从数据库方面：

```
SELECT
  1 as SortOrder,
  DataValueField,
  DataTextField
FROM
  YourTable
UNION ALL
SELECT
  0 As SortOrder,       --this ensures the empty item is at the top of the list
  0 As DataValueField,
  '' As DataTextField --or 'Select One'
Order By
  SortOrder,
  Value 
```

或者直接作为列表项

`<asp:ListItem Selected="True" Text="Select One" Value="0" AppendDataBoundItems="true" />`

# iphone - 如何使用“FindBarcodesInUIImage”？

> ID：11887632
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:37.367
> 
> 标签：iphone, barcode, barcode-scanner

我正在`Barcode scanner`为 iPhone 开发应用程序。

图书馆：`RedLaser`

只是我想从现有图像中扫描条形码，而不是从相机中。我没有得到任何文档来`FindBarcodesInUIImage`手动调用方法。

我可以获得任何示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:49:15.767

```
void ScanImageForBarcodes(UIImage *inputImage)
{
    NSSet *resultSet = FindBarcodesInUIImage(inputImage);

    // Print the results
    NSLog(@"%@", resultSet);
} 
```

如果 SDK 在图像中没有找到任何条形码，则日志消息将为 (null)。否则，它将类似于：

```
{(
    (0x19e0660) Code 39: 73250110 -- (1 finds)
)} 
```

此日志消息指示包含一个项目的搜索结果，即值为“73250110”的 Code 39 条形码。

请记住，SDK 不能保证在图像中找到条形码。即使图像包含条形码，SDK 也可能无法读取它，您将不会收到任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:36:30.657

[文档中的](http://redlaser.com/developers/documentation/ios/using-the-sdk/)这个片段有帮助吗？

> 此方法分析给定图像并返回有关在图像中发现的任何条形码的信息。它旨在用于用户已经拥有想要解码的条形码图片（例如在他们的照片库中）的情况。此方法对我们支持的所有条码符号进行彻底检查，不适合实时使用。
> 
> 使用此方法扫描条形码时，您不能（也不必）指定扫描方向或活动扫描区域；以所有方向扫描整个图像。您也不能将扫描限制为特定的符号类型。如果这样的特性是绝对必要的，你可以通过过滤结果集来实现它。
> 
> FindBarcodesInUIImage 同步操作，但可以放在一个线程中。根据图像大小和处理器速度，处理图像可能需要几秒钟。

# full-text-search - 优势数据库：全文搜索不返回以搜索字符串开头的结果

> ID：11887639
> 
> 赞同：2
> 
> 时间：2012-08-09T16:16:49.727
> 
> 标签：full-text-search, advantage-database-server

我的全文搜索索引有问题。我有一个字符字段大小为 30 的表。我在该字段上创建了一个全文搜索索引，以便在该字段上进行不区分大小写的快速搜索操作。现在，当我执行如下查询时：`SELECT fieldname FROM tablename WHERE CONTAINS(fieldname, '123')`我得到一些在指定字段名中包含 123 的记录。但是，此表中有以 123 开头的记录，但这些记录未显示在查询结果中。事实上，查询似乎只显示在前一个空格字符后包含 123 的结果。

我的全文搜索索引如下所示：

```
CREATE INDEX idxname ON tablename (fieldname) CONTENT MIN WORD 1 
```

我正在使用 Advantage 数据库服务器 9.1

有什么想法可能是错的吗？

谢谢，

于尔根

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:31:37.587

搜索表单`CONTAINS(fieldname, '123')`将找到具有`123`单个“单词”的条目。它不会找到`1234`或`4123`。您可以使用`CONTAINS(fieldname, '123*')`查找包含以 开头的“单词”的记录`123`。并且`CONTAINS(fieldname, '*123*')`会找到包含`123`任何地方的单词的记录。

请注意，表单的搜索`*123*`效率较低，因为它必须扫描整个索引。

# python - 在 Python 2.7 中编写文件而不会被 Windows 阻止？

> ID：11887640
> 
> 赞同：0
> 
> 时间：2012-08-09T16:16:52.170
> 
> 标签：python, windows-7, permissions

我正在编写一个简单的 fuzzer，用于 Windows 应用程序，它基于 Charlie Miller 的代码，来自一群猴子的保姆谈话。但是我一直收到错误

```
 Traceback (most recent call last):
  File "D:/Python27/fuzzer.py", line 29, in <module>
    process=subprocess.Popen([app_choice,fuzz_output])
  File "D:\Python27\lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "D:\Python27\lib\subprocess.py", line 896, in _execute_child
   startupinfo)
WindowsError: [Error 5] Access is denied 
```

有谁知道如何绕过这个？我真的很难过，因为老实说，我对 Windows 7 权限或 Python 2.7 不太熟悉。完整代码如下

```
#List of file names (all located in the python folder)
fuzz_files=[ "slides_algo-guiding.pdf", "slides_algo-intro-annotated-   final.pdf","slides_algo-merge1.pdf"]
apps=["C:\Program Files (x86)\Adobe\Reader 9.0\Reader"
  ]
#Creates an output file in the Python folder
fuzz_output="fuzz.pdf"
FuzzFactor=50
num_tests=1000
import math
import string
import random
import subprocess
import time

for i in range(num_tests):
    file_choice=random.choice(fuzz_files)
    app_choice=random.choice(apps)
    buf=bytearray(open(file_choice,'rb').read())
    #Charlie Miller code

    numwrites=random.randrange(math.ceil((float(len(buf))/FuzzFactor)))+1
    for j in range(numwrites):
        rbyte=random.randrange(256)
        rn=random.randrange(len(buf))
        buf[rn]="%c"%(rbyte)
     #End Charlie miller code

     #Write code
     open(fuzz_output,'wb').write(buf)
     process=subprocess.Popen([app_choice,fuzz_output])

     time.sleep(1)
     crashed=process.poll()
    if not crashed:
       process.terminate() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:26:59.793

我相信这`C:\Program Files (x86)\Adobe\Reader 9.0\Reader`是*文件夹*的路径，而不是可执行文件。因此，尝试运行它`Popen`是没有意义的。

`r"C:\Program Files (x86)\Adobe\Reader 9.0\Reader\AcroRd32.exe"`此外，在编写 Windows 路径或使用斜杠时，您应该使用原始字符串`"C:/Program Files (x86)/Adobe/Reader 9.0/Reader/AcroRd32.exe"`。您很幸运，路径中没有任何有效的转义序列。

# java - JTable 当前显示多少行？

> ID：11887642
> 
> 赞同：2
> 
> 时间：2012-08-09T16:16:53.387
> 
> 标签：java, swing, jtable

JTable 有一个方法 getVisibleRowCount()，它显示要显示的*首选*行数。

我想确定 JTable 中当前可见的*实际*行数。我怎样才能做到这一点？

我目前的尝试是：

```
int rowsVisible = table.getSize().getHeight()/table.getRowHeight(); 
```

但它给我的价值比我看到的要高得多。

例如，当有 10 或 11 行可见时，这给了我 18 的结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T10:39:29.620

Ask the table, it's doing all the hard work for you:

```
Rectangle vr = table.getVisibleRect ();
int first = table.rowAtPoint(vr.getLocation());
vr.translate(0, vr.height);
int visibleRows = table.rowAtPoint(vr.getLocation()) - first; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T15:51:20.510

这些尝试中没有一个是正确的。只是因为它不关心向下滚动... :-/

我根据我能找到的正确答案编写了代码，这些答案已经过尝试并且是正确的（我希望如此）。

但我只为第 0 列尝试过...

```
public static int getNumberOfVisibleRows(JTable table) {
    Rectangle vr = table.getVisibleRect();
    int first = table.rowAtPoint(vr.getLocation());
    vr.translate(0, vr.height);
    return table.rowAtPoint(vr.getLocation()) - first;
}

public static void scrollToVisible(JTable table, int rowIndex, int columnIndex, int numberOfVisibleRows) {
    Rectangle visibleRect = table.getVisibleRect();
    Rectangle rect1 = table.getCellRect(rowIndex, columnIndex, false);
    if (visibleRect.y > rect1.y) {
        table.scrollRectToVisible(rect1);
    } else {
        Rectangle rect2 = table.getCellRect(rowIndex + numberOfVisibleRows, columnIndex, false);
        int width = rect2.y - rect1.y;
        table.scrollRectToVisible(new Rectangle(rect1.x, rect1.y, rect1.width, rect1.height + width));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:25:27.573

我没有对此进行测试，但我希望当 a`JTable`包含在 a 中时`JScrollPane`，您可以使用 向滚动窗格询问其视口`getViewPort`，并从视口中检索大小。

如果将该高度除以表格的行高，您可能会得到更好的估计

```
final int pageSize = 
    (int) (table.getParent().getSize().getHeight() / table.getRowHeight()); 
```

非常接近

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:22:23.257

**Robin**提供的方式并不完全正确 - 当表格具有不同的行高时，它将不起作用。它也不会检查行间距和其他一些细微差别。

以下是适用于任何 L&F 和表格设置的示例：

```
public static void main ( String args[] )
{
    final JLabel rows = new JLabel ( "Visible rows: ?", JLabel.CENTER );

    final JTable table = new JTable ( new DefaultTableModel ( 30, 3 )
    {
        public String getColumnName ( int column )
        {
            return "title";
        }

        public Object getValueAt ( int row, int column )
        {
            return "cell";
        }
    } );

    JScrollPane scroll = new JScrollPane ( table )
    {
        public Dimension getPreferredSize ()
        {
            Dimension ps = super.getPreferredSize ();
            ps.height = 150;
            return ps;
        }
    };
    scroll.addComponentListener ( new ComponentAdapter ()
    {
        public void componentResized ( ComponentEvent e )
        {
            Rectangle vr = table.getVisibleRect ();
            int visibleRows = 0;
            for ( int i = 0; i < table.getRowCount (); i++ )
            {
                Rectangle cell = table.getCellRect ( i, 0, false );
                if ( cell.y <= vr.y && cell.y + cell.height >= vr.y ||
                        cell.y <= vr.y + vr.height &&
                                cell.y + cell.height >= vr.y + vr.height ||
                        cell.y >= vr.y && cell.y + cell.height <= vr.y + vr.height )
                {
                    visibleRows++;
                }
            }
            rows.setText ( "Visible rows: " + visibleRows );
        }
    } );

    JPanel panel = new JPanel ( new BorderLayout ( 25, 25 ) );
    panel.setBorder ( BorderFactory.createEmptyBorder ( 25, 25, 25, 25 ) );
    panel.add ( rows, BorderLayout.NORTH );
    panel.add ( scroll, BorderLayout.CENTER );

    JFrame frame = new JFrame ();
    frame.add ( panel );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

只需尝试调整表格大小即可查看效果。

您还可以修改“单元格可见”条件以排除（作为示例）可见少于 5 个像素（或其高度的一半）的行。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-08-09T16:20:41.637

尝试：

```
table.getModel().getRowCount(); 
```

# android - 绕过拨号器以使用预定义的电话号码拨打电话

> ID：11887649
> 
> 赞同：0
> 
> 时间：2012-08-09T16:17:23.580
> 
> 标签：android, permissions

我需要弄清楚如何`CALL_PRIVILEGED`在我的应用程序中利用权限的力量。

基本布局是，当我激活代码时，它只会进入预加载号码的拨号器。

我如何绕过拨号器并拨打电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:25:06.497

您希望您的应用直接拨打电话吗？看一下`Intent.ACTION_CALL` （ACTION_DAIL 会在调用前显示号码）。

编辑： ACTION_CALL 不会拨打紧急电话。

实际上，这从一个版本到另一个版本的 Android 发生了变化，所以它可能适用于 2.1 但不适用于 4.0。

沃尔芬

# html - 如何向 jQuery.ajax() 添加按钮以使用 http 删除方法

> ID：11887650
> 
> 赞同：1
> 
> 时间：2012-08-09T16:17:25.710
> 
> 标签：html, http, jquery

我正在尝试将 http DELETE 方法发送到 URI。在意识到我不能用普通的旧 html 表单做到这一点后，我被告知要使用 jQuery.ajax。我在上面找到了一些帖子，这是我发现的应该可以做到的代码：

```
<script type="text/javascript">
    $.ajax({ 
        url: '/groups/dissolve/$org_ID', 
        type: 'DELETE', 
            success: function(result) { 
                    // Do something with the result 
            } 
    });
</script> 
```

请多多包涵，因为我以前没有使用过 jQuery。我想要做的是用上面的代码替换我的 html 表单，但我不知道从哪里开始。如何像在常规形式中那样在其中放置一个按钮？谢谢并请原谅我的无知！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:26:03.453

就像是：

```
$("form").on("submit", function() {
    $.ajax({ 
        url: '/groups/dissolve/$org_ID', 
        type: 'DELETE', 
        success: function(result) { 
                // Do something with the result 
        } 
    });  
}); 
```

这会将 AJAX 方法绑定到表单的提交操作。

另一种选择是使用方法覆盖。这允许您在查询字符串参数或表单中的隐藏字段中指定方法（GET、POST、PUT、DELETE）。您将需要检查您的特定语言和 Web 框架，但大多数都支持这一点。

```
<input type="hidden" name="_method" value="DELETE" /> 
```

# c++ - 在成员函数中使用“删除这个”后，我可以访问其他成员函数。为什么？

> ID：11887651
> 
> 赞同：2
> 
> 时间：2012-08-09T16:17:34.497
> 
> 标签：c++, linux, oop, this-pointer

我刚刚写了一个示例程序来查看**删除这个的行为**

```
class A
 {
   ~A() {cout << "In destructor \n ";}
 public: 
    int a;
    A() {cout << "In constructor \n ";}

    void fun()
     {
       cout << "In fun \n";
       delete this;
       cout << this->a << "\n"; // output is 0
       this->fun_2(); // how m able to call fun_2, if delete this is called first ??
     }

   void fun_2()
    {
      cout << "In fun_2 \n";
    }

main()
{
 A *ptr = new A;
 ptr->a = 100;
 ptr->fun(); //delete this will be executed here
 ptr->fun_2(); //how m able to execute fun_2 when this pointer is deleted ??
 cout<< ptr->a << "\n"; //prints 0
 return 0;
}

> Output
In constructor
In fun
In destructor
0
In fun 2
In fun 2
0 
```

**问题**

1.  在 fun() 中执行**delete this**后，如何使用 fun() 中的指针访问 func_2() ？
2.  现在主要是如何在删除该指针时执行**obj->fun_2 ？**
3.  如果我能够在杀死这个对象后访问函数成员，那么为什么数据成员的值为零'0'？

*m 使用 linux ubuntu 和 g++ 编译器*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T16:21:48.907

1.  您看到的是未定义的行为：它可能会起作用，也可能会崩溃。
2.  指针指向一个已删除的实例——它是一个悬空指针。
3.  这也是一种未定义的行为：您可能会看到零或垃圾值。

[Eric Lippert在](https://stackoverflow.com/users/88656/eric-lippert)[回答](https://stackoverflow.com/a/6445794/335858)有关函数返回后指向局部变量的指针的问题时提供了一个非常好的“酒店房间的桌子抽屉里的书”类比，它在这里同样适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:30:32.187

让我们将其与类似的场景进行比较：

```
A *a= new A();  
func(a);  
delete a;  
func2(a); 
```

在我的示例中，编译器只是将指针 a 传递给 func 和 func2，它并不关心它是否指向有效对象。因此，如果您调用`func2(a)`并且 func2 取消引用指针，这是未定义的行为。如果内存被释放回操作系统并且程序不能再访问*a，程序可能会崩溃。通常 delete 保持分配的内存，不会将其传递回操作系统，因此在 delete 后访问 *a 不会给出异常，而只是返回任何值。这可能是 *a 的先前值，但它也可能是任何其他值，具体取决于 delete 的实现并取决于对 new done 之间的其他调用`delete a`and `*a`。例如，MSVC 在调试模式下将内存设置为预定义的模式，以便您在访问释放的内存时可以轻松发现。

为什么这与您的问题有关？因为编译器`this`作为隐藏的隐式参数传递。

# facebook - Facebook 应用程序 - 移动和画布？

> ID：11887654
> 
> 赞同：3
> 
> 时间：2012-08-09T16:17:40.390
> 
> 标签：facebook

Facebook 中的应用程序能否同时拥有 Facebook Canvas 桌面页面和 Facebook 移动页面？目前我有一个桌面应用程序，但如果我在同一个 URL 上创建移动页面，我是否也可以将 Facebook 应用程序的“移动网络”部分指向该应用程序？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:22:33.493

> Facebook 中的应用程序能否同时拥有 Facebook Canvas 桌面页面和 Facebook 移动页面？

是的，有点。没有*移动画布*，如果这就是你的意思。但是，您可以为同一个应用程序创建一个移动网页和一个桌面画布应用程序。

> 目前我有一个桌面应用程序，但如果我在同一个 URL 上创建移动页面，我是否也可以将 Facebook 应用程序的“移动网络”部分指向该应用程序？

是的，您可以对两者使用相同的 URL，然后只需检测用户代理以确定显示哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T09:08:50.380

用户代理嗅探总是一个坏主意。在应用程序的入口点中，如果用户通过 Facebook 中的页面选项卡（即桌面用户）加载应用程序，则应通过检查 Facebook 发送的“签名请求”变量来确定它是桌面应用程序还是移动应用程序。如果用户在 Facebook 之外的移动设备上访问应用程序，则不会发送此变量。

php:

```
if(isset($_REQUEST['signed_request']))
    //load desktop version
else
    //load mobile version 
```

# generics - 使用标准的 haskell 泛型库进行类型化类型同构

> ID：11887666
> 
> 赞同：18
> 
> 时间：2012-08-09T16:18:21.990
> 
> 标签：generics, haskell, ghc, haskell-platform

仅在 Haskell 平台中就有几个具有许多重叠模块的泛型库（`syb`, `Data.Typeable`, `Data.Data`, `GHC.Generics`），但是我在执行非常基本的泛型编程任务时遇到了麻烦。

我希望能够在相同形状的类型之间进行转换，即我希望在同构类型之间实现多态、类型化的转换函数，本质上是[本文](http://igitur-archive.library.uu.nl/math/2007-0404-200310/jeuring_04_inferringtype.pdf)末尾提供的（PDF），其中提到了索引类型族。

我不关心废弃我的样板，而是能够围绕 sum 和 product 抽象构建新的库。

下面的问题是`GHC.Generic`我认为最接近我需要的问题，但欢迎使用其他解决方案。

* * *

以下两种形状相同

```
data Pair = Pair Char Int deriving (Generic, Show)
data Pair2 = Pair2 Char Int deriving (Generic, Show) 
```

我想使用 GHC.Generics 在它们之间转换值。由于所有幻像参数和其他废话，以下内容无法进行类型检查：

```
f :: Pair -> Pair2
f = to . from 
```

最终，我想要一个类似的函数，它对任何（或任何其他类可以支持这个）实例`fromInteger`都有一个多态返回值。`Generic`我想我正在寻找类似的东西`GHC.Generics`：

```
--class:
type family NormalForm a
class ToGeneric a where
    to :: a -> NormalForm a
class FromGeneric b where
    from :: NormalForm b -> b

--examples:
data A = A Char Int deriving Show
data B = B Char Int deriving Show

type instance NormalForm A = (Char,Int)
instance ToGeneric A where
    to (A a b) = (a,b)
instance FromGeneric A where
    from (a,b) = A a b

type instance NormalForm B = (Char,Int)
instance ToGeneric B where
    to (B a b) = (a,b)
instance FromGeneric B where
    from (a,b) = B a b

-- the function I'm looking for
coerce :: (ToGeneric a, FromGeneric b, NormalForm a ~ NormalForm b)=> a -> b
coerce = from . to 
```

有了上面我们可以做我想做的一切：

```
*Main> (coerce $A 'a' 1) :: B
B 'a' 1
*Main> (coerce $A 'a' 1) :: A
A 'a' 1 
```

**编辑：**实际上，这就是 Nathan Howell 的`f`功能在下面的工作方式。

### 问题

1.  这可能与目前在 haskell 平台上的库有关吗？

2.  如果没有，是否可以定义一个库来利用现有`deriving`机制`Generic`，`Data`而不诉诸 TH？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T21:32:16.717

这是可能的，而且相对无痛。与`unsafeCoerce`直接使用不同，如果类型不对齐，您将获得构建中断。您可能可以依靠等式约束`f`来提供足够的编译时类型安全性来使用`unsafeCoerce`并避免与`Rep`家人一起工作。

```
{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE TypeFamilies #-}

import GHC.Generics

data Pair1 = Pair1 Char Int deriving (Generic, Show)
data Pair2 = Pair2 Char Int deriving (Generic, Show)

data Triple1 = Triple1 Char Int Double deriving (Generic, Show)
data Triple2 = Triple2 Char Int Double deriving (Generic, Show)

f :: (Generic a, Generic c, Rep a ~ D1 da (C1 ca f), Rep c ~ D1 db (C1 cb f))
  => a -> c
f = to . M1 . M1 . unM1 . unM1 . from
-- this might also be acceptable:
-- f = unsafeCoerce

p1 :: Pair1 -> Pair2
p1 = f

p2 :: Pair2 -> Pair1
p2 = f

t1 :: Triple1 -> Triple2
t1 = f

t2 :: Triple2 -> Triple1
t2 = f 
```

运行它会产生预期的结果：

```
*Main> p1 $ Pair1 'x' 1
Pair2 'x' 1
*Main> p2 $ Pair2 'x' 1
Pair1 'x' 1
*Main> t1 $ Triple1 'y' 2 3.0
Triple2 'y' 2 3.0
*Main> t2 $ Triple2 'y' 2 3.0
Triple1 'y' 2 3.0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T05:49:17.497

如果“形状相同”意味着数据类型等于构造函数名称、记录选择器和类型同义词，那么数据类型转换就像遍历表示一样简单。

```
{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE TypeOperators #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FlexibleContexts, FlexibleInstances #-}

import GHC.Generics

conv
  :: (Generic a, Generic b, Conv (Rep a) (Rep b))
  => a -> b
conv = to . cv . from

class Conv a b where
  cv :: a x -> b x

-- skip irrelevant parts: datatype name, constructor name, selector
instance Conv f1 f2 => Conv (M1 i1 c1 f1) (M1 i2 c2 f2) where
  cv = M1 . cv . unM1

instance (Conv a1 a2, Conv b1 b2) => Conv (a1 :*: b1) (a2 :*: b2) where
  cv ~(a :*: b) = cv a :*: cv b

instance (Conv a1 a2, Conv b1 b2) => Conv (a1 :+: b1) (a2 :+: b2) where
  cv (L1 a) = L1 $ cv a
  cv (R1 b) = R1 $ cv b

-- copy values
instance Conv U1 U1 where cv = id
instance Conv (K1 R c) (K1 R c) where cv = id 
```

测试用例：

```
data A = A1 String Int | A2 (Int,Int) deriving (Generic, Show)
data B = B1 [Char] Int | B2 { xy :: (Int,Int) } deriving (Generic, Show)
data X = X Int Int deriving (Generic, Show)

*Main> conv $ X 3 14 :: (Int,Int)
(3,14)
*Main> conv $ A1 "hello" 42 :: B
B1 "hello" 42
*Main> conv $ A2 (13,42) :: B
B2 {xy = (13,42)} 
```

## 更新

更多实例允许更有趣的转换：

```
instance Conv U1 (M1 S s (K1 R ())) where
  cv _ = M1 $ K1 ()
-- *> conv (Nothing :: Maybe Int) :: Either () Int
-- Left ()

instance Conv (M1 S s (K1 R ())) U1 where
  cv _ = U1
-- *> conv (Left () :: Either () Int) :: Maybe Int
-- Nothing

-- this one requires OverlappingInstances
instance (Generic c1, Generic c2, Conv (Rep c1) (Rep c2))
  => Conv (K1 R c1) (K1 R c2)
  where
    cv (K1 x) = K1 $ conv x
 -- *> conv (Right Nothing :: Either () (Maybe Int)) :: Maybe (Either () Int)
 -- Just (Left ())

 -- data List a = Empty | Cons a (List a) deriving (Generic, Show)
 -- *> conv [1,2,3::Int] :: List Int
 -- Cons 1 (Cons 2 (Cons 3 Empty)) 
```

# mysql - Mysql查询优化，EXPLAIN和执行缓慢

> ID：11887667
> 
> 赞同：3
> 
> 时间：2012-08-09T16:18:22.387
> 
> 标签：mysql, optimization, query-optimization, explain

对一些查询有一些实际问题，尤其是这个。信息如下。

tgmp_games，大约 20k 行

```
CREATE TABLE IF NOT EXISTS `tgmp_games` (
  `g_id` int(8) NOT NULL AUTO_INCREMENT,
  `site_id` int(6) NOT NULL,
  `g_name` varchar(255) NOT NULL,
  `g_link` varchar(255) NOT NULL,
  `g_url` varchar(255) NOT NULL,
  `g_platforms` varchar(128) NOT NULL,
  `g_added` datetime NOT NULL,
  `g_cover` varchar(255) NOT NULL,
  `g_impressions` int(8) NOT NULL,
  PRIMARY KEY (`g_id`),
  KEY `g_platforms` (`g_platforms`),
  KEY `site_id` (`site_id`),
  KEY `g_link` (`g_link`),
  KEY `g_release` (`g_release`),
  KEY `g_genre` (`g_genre`),
  KEY `g_name` (`g_name`),
  KEY `g_impressions` (`g_impressions`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

tgmp_reviews - 大约 200k 行

```
CREATE TABLE IF NOT EXISTS `tgmp_reviews` (
  `r_id` int(8) NOT NULL AUTO_INCREMENT,
  `site_id` int(6) NOT NULL,
  `r_source` varchar(128) NOT NULL,
  `r_date` date NOT NULL,
  `r_score` int(3) NOT NULL,
  `r_copy` text NOT NULL,
  `r_link` text NOT NULL,
  `r_int_link` text NOT NULL,
  `r_parent` int(8) NOT NULL,
  `r_platform` varchar(12) NOT NULL,
  `r_impressions` int(8) NOT NULL,
  PRIMARY KEY (`r_id`),
  KEY `site_id` (`site_id`),
  KEY `r_parent` (`r_parent`),
  KEY `r_platform` (`r_platform`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ; 
```

这是查询，需要 3 秒 ish

```
SELECT * FROM tgmp_games g
RIGHT JOIN tgmp_reviews r ON g_id = r.r_parent
WHERE g.site_id = '34'
GROUP BY g_name
ORDER BY g_impressions DESC LIMIT 15 
```

解释

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  r   ALL     r_parent    NULL    NULL    NULL    201133  Using temporary; Using filesort
1   SIMPLE  g   eq_ref  PRIMARY,site_id     PRIMARY     4   engine_comp.r.r_parent  1   Using where 
```

我只是想获取观看次数最多的 15 款游戏，然后为每款游戏获取一条评论（这并不重要，我想最高评分是理想的，r_score）。

有人可以帮我弄清楚为什么这效率如此之低吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:04:45.947

1.  我不明白`GROUP BY g_name`在您的查询中使用 a 的目的是什么，但这会使 MySQL 对所选列或两个表中的所有列执行聚合。所以请尝试排除它并检查它是否有帮助。

2.  另外，`RIGHT JOIN`让数据库先查询`tgmp_reviews`，这不是你想要的。我想`LEFT JOIN`这里是一个更好的选择。请尝试更改连接类型。

3.  如果第一个选项都没有帮助，您需要重新设计查询。由于您需要为该站点获取 15 个观看次数最多的游戏，因此查询将是：

    ```
    SELECT g_id
      FROM tgmp_games g
     WHERE site_id = 34
     ORDER BY g_impressions DESC
     LIMIT 15; 
    ```

    这是应该由数据库执行的第一部分，因为它提供了最好的选择性。然后，您可以获得所需的游戏评论：

    ```
    SELECT r_parent, max(r_score)
      FROM tgmp_reviews r
     WHERE r_parent IN (/*1st query*/)
     GROUP BY r_parent; 
    ```

    这样的构造将强制数据库首先执行第一个查询（对不起重言式），并且会给你每个想要的游戏的最高分数。我希望您能够将获得的结果用于您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:15:32.157

您的 MyISAM 表很小，您可以尝试转换它以查看是否可以解决问题。您是否有理由为该表使用 MyISAM 而不是 InnoDB？

您还可以尝试对每个表运行分析以更新统计信息，以查看优化器是否选择了不同的东西。

# c++ - 排序直到我们得到排序数组的最低一半

> ID：11887668
> 
> 赞同：4
> 
> 时间：2012-08-09T16:18:22.213
> 
> 标签：c++, algorithm, sorting

我目前正在尝试获取位于数据数组下半部分的值。这个数组起初是未排序的。

由此：

```
{4,6,9,3,8,5} 
```

对此：

```
{3,4,5,6,9,8} or {3,4,5} 
```

一个简单的解决方案是对数组进行排序（使用快速排序），然后仅使用存储在排序数组的前半部分中的值。然而，由于快速排序和最有效的排序算法将对整个数组进行排序，而我只需要前 50%，这似乎是对资源的浪费。请注意，性能是该项目中的一个问题。

知道完整排序是 O(n log n) 并且在找到最低元素后停止的排序是 O(n)，我可以轻松构建一个简单的算法，该算法的复杂度为 n/2 * n最低的 50%。但这真的比完整的快速排序更好吗？

需要明确的是，如果我们只想要数组中最低一半的值，最好使用什么排序？如果 50% 更小（如 1%），顺序搜索最低元素当然是最快的解决方案，但它比快速排序慢多少？

我正在用 C++ 编码并使用向量，但是这个问题应该很笼统。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T16:22:18.003

```
#include <algorithm>
std::partial_sort(start, middle, end); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T16:32:11.417

如果您不需要对下半部分进行排序，请使用`std::nth_element`. 如果您需要对下半部分进行排序并且向量包含少于 100,000 个元素，请使用`std::partial_sort`，如果您的向量较大，则使用`std::nth_element`将向量划分为下半部分和上半部分，然后`std::qsort`在下半部分使用。我已经在运行带有 g++ 4.4.3 的 CentOS 的 Intel Xeon X5570 @ 2.93GHz 上确认了这一点，并在此答案的末尾给出了时间安排。Scott Meyers 和其他人发现令人惊讶的是，`std::nth_element`随后的速度比大型向量`std::qsort`要快得多：`std::partial_sort`

[http://www.velocityreviews.com/forums/t745258-nth_element-sort-versus-partial_sort.html](http://www.velocityreviews.com/forums/t745258-nth_element-sort-versus-partial_sort.html)

如果您只想要最低一半的值并且不需要对它们进行排序，那么`std::nth_element`最快（复杂性是线性的）。

[http://www.cplusplus.com/reference/algorithm/nth_element/](http://www.cplusplus.com/reference/algorithm/nth_element/)

```
// nth_element example (modified to partition into lower/upper halves)
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

int main () {
    vector<int> myvector;
    vector<int>::iterator it;

    // set some values:
    for (int i=1; i<10; i++) myvector.push_back(i);   // 1 2 3 4 5 6 7 8 9

    random_shuffle (myvector.begin(), myvector.end());

    // using default comparison (operator <):
    nth_element (myvector.begin(), myvector.begin()+myvector.size()/2, myvector.end());

    // print out content:
    cout << "myvector contains:";
    for (it=myvector.begin(); it!=myvector.end(); ++it)
        cout << " " << *it;

    cout << endl;

    return 0;
} 
```

在运行 CentOS 并使用 g++ 4.4.3 的 Intel Xeon X5570 @ 2.93GHz 上，我测量了以下时间。从数据中可以清楚地看出，它`std::nth_element`是线性的并且比`std::partial_sort`所有尺寸都快，当 N 为 10 亿个元素时，速度快 94 倍。

```
N =       1000 nth_element   0.0000082 sec
N =       1000 nth + qsort   0.0001114 sec
N =       1000 partial_sort  0.0000438 sec

N =      10000 nth_element   0.0000592 sec
N =      10000 nth + qsort   0.0005639 sec
N =      10000 partial_sort  0.0005271 sec

N =     100000 nth_element   0.00095 sec
N =     100000 nth + qsort   0.00683 sec
N =     100000 partial_sort  0.00697 sec

N =    1000000 nth_element   0.0086 sec
N =    1000000 nth + qsort   0.0831 sec
N =    1000000 partial_sort  0.1227 sec

N =   10000000 nth_element   0.0700 sec
N =   10000000 nth + qsort   0.9307 sec
N =   10000000 partial_sort  2.7006 sec

N =  100000000 nth_element   0.8147 sec
N =  100000000 nth + qsort  10.7602 sec
N =  100000000 partial_sort 56.7105 sec

N = 1000000000 nth_element   10.055 sec
N = 1000000000 nth + qsort  123.703 sec
N = 1000000000 partial_sort 947.949 sec 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:22:33.477

您可以使用[基数](http://en.wikipedia.org/wiki/Radix_sort)排序对所有内容进行排序，它可能比快速排序更快。我不确定它是否比部分排序更快。如果您需要对有限范围的数字（例如 32 位表示）进行排序，这很有用 [这](http://infoarena.ro/job_detail/371374?action=view-source)是我前段时间
**编辑的一个实现：**似乎基数排序的[这种](http://infoarena.ro/job_detail/775877?action=view-source)实现更快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:37:14.203

我很确定您可以进行部分快速排序，在算法对您的数组至少一半进行排序后停止该算法。请参阅[此处](http://www.sorting-algorithms.com/quick-sort)以获取视觉表示。

在最坏的情况下，整个数组都会被排序，最好的情况下一半会被排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T16:38:04.820

对于这个问题，我认为没有任何算法的时间复杂度小于 O(log N)。但在一般情况下，这可以得到加强。

您可以针对此特定用例微调快速排序算法，如下所示。

您可能已经知道，快速排序包含一个称为分区的内部算法，它将数组分成两个，中间有一个枢轴元素，使得左侧的值小于枢轴，右侧的值大于枢轴.

因此，您的问题简化为对数组进行分区的问题，以便在枢轴的两侧拥有相等数量的元素。

下面的算法应该可以工作，它将数组分成两部分，这样数组的下半部分的元素小于中值，上半部分的元素大于中值。

```
void split_the_array(int[] array, int a, int b, int m)
{
    p = partition(array, a, b)
    if (p == m) return;
    if (p < m) split_the_array(p+1, b, m)
    else       split_the_array(a, p-1, m)
} 
```

调用此函数为

```
split_the_array(arr, 0, len(arr), len(arr) / 2) 
```

函数执行后，(len(arr) / 2) 左边的所有元素都应该小于它，右边的元素应该大于它。

您应该很容易获得分区算法。

# sql - 逗号分隔值 (CSV) 参数过滤

> ID：11887671
> 
> 赞同：0
> 
> 时间：2012-08-09T16:18:35.457
> 
> 标签：sql, sql-server, performance, csv

需要有关如何改进我的 SQL 脚本以获得更好性能的帮助。`dbo.Products`表有一百万行。我很犹豫是否使用动态 SQL 重写它。谢谢！

```
DECLARE
    @Brand varchar(MAX) = 'Brand 1, Brand 2, Brand 3',
    @ItemCategory varchar(MAX) = 'IC1, IC2, IC3, IC4, IC5'

--will return all records if params where set to @Brand = NULL, @ItemCategory = NULL

SELECT
     [Brand],
     SUM([Amount]) AS [Amount] 
FROM dbo.Products (NOLOCK)
LEFT JOIN [dbo].[Split](@Brand, ',') FilterBrand ON Brand = [FilterBrand].[Items]
LEFT JOIN [dbo].[Split](@ItemCategory, ',') FilterItemCategory ON ItemCategory = [FilterItemCategory].[Items] 
WHERE
    (@Brand IS NULL OR (@Brand IS NOT NULL AND [FilterBrand].[Items]  IS NOT NULL)) AND
    (@ItemCategory IS NULL OR (@ItemCategory IS NOT NULL AND [FilterItemCategory].[Items] IS NOT NULL))
GROUP BY
     [Brand] 
```

下面是我在网上找到的拆分表值函数：

```
CREATE function [dbo].[Split]
(
    @String     varchar(8000),
    @Delimiter  char(1)
)
RETURNS @Results TABLE (Items varchar(4000))
AS
BEGIN
    IF (@String IS NULL OR @String = '') RETURN

    DECLARE @i int, @j int

    SELECT @i = 1

    WHILE @i <= LEN(@String)
        BEGIN
            SELECT  @j = CHARINDEX(@Delimiter, @String, @i)

            IF @j = 0
                BEGIN
                    SELECT  @j = len(@String) + 1
                END

            INSERT  @Results SELECT RTRIM(SUBSTRING(@String, @i, @j - @i))

            SELECT  @i = @j + LEN(@Delimiter)
        END

    RETURN
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:23:53.033

以下解决方案没有使用功能

```
Declare @IDs Varchar(100)
SET @IDs = '2,4,6'

Select IsNull(STUFF((Select ', '+ CAST([Name] As Varchar(100)) From [TableName]
Where CharIndex(','+Convert(Varchar,[ID])+',', ','+@IDs+',')> 0
For XML Path('')),1,1,''),'') As [ColumnName] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:18:08.210

嘿，只需尝试我创建的 split 函数，而无需在此处使用任何 while 循环。只需使用它代替您的 split 函数并使用 col 在 LEFT join 中进行匹配。

```
ALTER function dbo.SplitString(@inputStr varchar(1000),@del varchar(5))
RETURNS @table TABLE(col varchar(100))
As
BEGIN

DECLARE @t table(col1 varchar(100))
INSERT INTO @t
select @inputStr

if CHARINDEX(@del,@inputStr,1) > 0
BEGIN
;WITH CTE as(select ROW_NUMBER() over (order by (select 0)) as id,* from @t)
,CTE1 as (
select id,ltrim(rtrim(LEFT(col1,CHARINDEX(@del,col1,1)-1))) as col,RIGHT(col1,LEN(col1)-CHARINDEX(@del,col1,1)) as rem from CTE
union all
select c.id,ltrim(rtrim(LEFT(rem,CHARINDEX(@del,rem,1)-1))) as col,RIGHT(rem,LEN(rem)-CHARINDEX(@del,rem,1))
from CTE1 c
where CHARINDEX(@del,rem,1)>0
)

INSERT INTO @table 
select col from CTE1
union all
select rem from CTE1 where CHARINDEX(@del,rem,1)=0
END
ELSE
BEGIN
INSERT INTO @table 
select col1 from @t
END

RETURN

END

DECLARE @Brand varchar(MAX) = 'Brand 1,Brand 2,Brand 3',
        @ItemCategory varchar(MAX) = ' IC1 A ,IC2 B , IC3 C, IC4 D' --'IC1, IC2, IC3, IC4, IC5'

select * from dbo.SplitString(@ItemCategory,',') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:22:41.840

这是我使用的功能。我还有另一个包装它以返回数值，我觉得这也很有帮助。

编辑：对不起，至于如何提高查询的性能，我通常将值拆分为表变量并执行我的连接，但这可能不会改变你的性能，只是你的可读性。在性能方面我唯一能看到的是你仔细检查你的连接是否产生任何东西。在两个表上使用两个条件左连接确实无法获得更好的性能。那时它基本上归结为索引。

```
(@Brand IS NULL OR [FilterBrand].[Items] IS NOT NULL) 
```

功能：

```
ALTER FUNCTION [dbo].[fn_SplitDelimittedList]
(
    @DelimittedList varchar(8000),
    @Delimitter varchar(20)
)
RETURNS 
@List TABLE 
(
    Item varchar(100)
)
AS
BEGIN
    DECLARE @DelimitterLength INT
    SET @DelimitterLength = LEN(@Delimitter)

    -- Tack on another delimitter so we get the last item properly
    set @DelimittedList = @DelimittedList + @Delimitter

    declare @Position int
    declare @Item varchar(500)

    set @Position = patindex('%' + @Delimitter + '%' , @DelimittedList)
    while (@Position <> 0)
    begin
        set @Position = @Position - 1
        set @Item = LTRIM(RTRIM(left(@DelimittedList, @Position)))

        INSERT INTO @List (Item) VALUES (@Item)

        set @DelimittedList = stuff(@DelimittedList, 1, @Position + @DelimitterLength, '')
        set @Position = patindex('%' + @Delimitter + '%' , @DelimittedList)
    end

    RETURN
END 
```

# javascript - 带有Android的Jquery mobile无法正确显示

> ID：11887673
> 
> 赞同：1
> 
> 时间：2012-08-09T16:18:36.053
> 
> 标签：javascript, android, jquery, jquery-mobile, cordova

我正在使用带有 android 4.0.3 和 phonegap 的 jquery mobile 1.1.1。一切似乎都运行顺利，在 iOS 和更早的 android 版本上，然而，在这个版本的 android 上，东西显示不正确。我正在动态创建一个无序列表，然后调用`$('#myList ul').listview('refresh');`它。但是，当它显示时，它看起来像这样：

![前](../Images/47f388068cf0b59f7a6adf2b1364b878.png)

然后我单击屏幕，它会闪烁并显示如下（注意我是如何丢失页脚的）：

![后](../Images/68f554cfc8fdc5e2059f542ee12de8b9.png)

这是 android 4.0.3 的错误吗？有没有办法让它立即正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:17:30.443

我今天有它。我不知道你是否和我一样，但我使用 -webkit-backface-visibility:hidden css 属性来“纠正”旧版 jQuery Mobile 的白色闪光。但是在带有PhoneGap 的1.1.1 中，我有和你一样的东西。

因此，如果您使用它，只需将其删除！如果没有，那我对不起你……

# x11 - X11 xscreensaver 如何知道我空闲了多长时间（xprintidle 无用）

> ID：11887679
> 
> 赞同：8
> 
> 时间：2012-08-09T16:18:51.463
> 
> 标签：x11

如果我这样做`xset dpms 600 3600 7200`，它会在 10 分钟不活动后使我的屏幕空白。

### 问题

*   X11 如何知道我空闲了多长时间，以及如何以编程方式访问此空闲时间？
*   我无法`xprintidle`安装，也许是因为 X11 不再有 XIDLE 扩展？

谷歌搜索建议查看“man xscreensaver”，但我在那里找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T20:29:40.610

[屏幕保护程序](http://www.x.org/releases/X11R7.7/doc/scrnsaverproto/saver.pdf)扩展，QueryInfo 请求。如果您使用的是 xlib - 它在[XScreenSaverQueryInfo](http://linux.die.net/man/3/xscreensaverqueryinfo)中（与 Xss 链接）

JavaScript 中的示例，使用[node-x11](http://github.com/sidorares/node-x11)

```
var x11 = require('x11');
x11.createClient(function(err, display) {
    var X = display.client;
    X.require('screen-saver', function(err, SS) {
        SS.QueryInfo(display.screen[0].root, function(err, info) {
            console.log('Idle time', info.idle);
        });
    });
    X.on('error', console.error);
}); 
```

c中的示例：

```
#include <X11/extensions/scrnsaver.h>
#include <stdio.h>

int main() {
    Display *display = XOpenDisplay(0);
    if (display != 0) {
      XScreenSaverInfo *info = XScreenSaverAllocInfo();
      XScreenSaverQueryInfo(display, DefaultRootWindow(display), info);
      if (info)
      {
        printf("%lu\n", info->idle);
        XFree(info);
        return 0;
      }
      return -1;
    }
    return -1;
} 
```

# java - Google App Engine 开发服务器如何存根数据存储区？

> ID：11887680
> 
> 赞同：2
> 
> 时间：2012-08-09T16:18:57.377
> 
> 标签：java, database, google-app-engine

GAE 有一个开发服务器，您可以使用它在本地、非生产环境中模拟“GAE 云”。根据文档，它模仿了所有服务 API 调用。

我很好奇它在 NoSQL Datastore API 方面的工作原理。有没有办法将您的 GAE 开发服务器配置为与本地数据库一起使用（这样您就可以向它提供对您的测试用例有意义的虚拟数据）？如果是这样，这是如何工作的，因为它没有记录在我能告诉的任何地方！提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:34:25.467

开发服务器使用内存中的键值存储在本地模拟数据存储。您可以使用 --use_sqlite 标志使其与本地 sqlite3 db 文件一起使用。

[此处](https://developers.google.com/appengine/docs/java/tools/localunittesting#Writing_Datastore_and_Memcache_Tests)记录了使用数据存储的本地单元测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:50:32.677

您还可以使用 --datastore_path 标志将数据存储到文件中，而不是内存中。

# java - 无法对我的字符串数组列表进行排序

> ID：11887681
> 
> 赞同：0
> 
> 时间：2012-08-09T16:19:00.793
> 
> 标签：java, string, arraylist

我正在尝试按字母顺序对 String 的数组列表进行排序，我尝试了一切，从简单的方式：

```
List<String> theList = new ArrayList<String>();
theList.add("silex");theList.add("soliton");
theList.add("snake");theList.add("supracanon");
Collections.sort(theList); 
```

对于更异国情调的东西：

```
List<String> theList = new ArrayList<String>();
theList.add("silex");theList.add("soliton");
theList.add("snake");theList.add("supracanon");
Collections.sort(
  theList, 
  new Comparator<String>() 
  {
    public int compare(String lhs, String rhs) 
    {
      return lhs.compareTo(rhs);
    }
  }
); 
```

但是没有任何效果，我做错了什么？谢谢。

ps：我正在查看生成的 ArrayList 的内容，如下所示：

```
for (String temp:listeProduitPredit){
            System.out.println(temp);
        } 
```

列表的内容在排序过程之前和之后都不会改变。

==================================================== =========================== 好的，这是实际代码，我有一个 EJB 进行数据库访问，其中一种方法是返回我字符串列表。

字符串列表应该像字典中那样排序（按字母顺序）但是“Collections.sort（rList）”什么都不做（输入=输出）

```
public List<String> rechercherListeDeProduitCommencantPar(Integer gammeId, Integer familleId, String debutProduit) {
    Criteria c = HibernateUtil.getSessionFactory().getCurrentSession().createCriteria(Produit.class, "p");
    c.createAlias("p.famille", "f").createAlias("f.gamme", "g");

    if (gammeId != null) {
        c.add(Restrictions.eq("g.id", gammeId));
    }
    if (familleId != null) {
        c.add(Restrictions.eq("f.id", familleId));
    }
    if (!debutProduit.equals("")) {
        c.add(Restrictions.like("p.designation", debutProduit+"%"));
    }

    //getting only the interesting intels (product's name)
    List<String> rList = new ArrayList<String>();
    List<Produit> pList = c.list();
    for (Produit p : pList){
        rList.add(p.getDesignation());
    }
    Collections.sort(rList);
    return rList;
} 
```

这是在 Jboss AS 5.1 服务器上运行的，我在前后使用 for 对其进行了测试，列表没有按字母顺序排序，但确实做了一些修改：

```
18:44:07,961 INFO  [STDOUT] Before=========
18:44:07,961 INFO  [STDOUT] SUMO VIE
18:44:07,961 INFO  [STDOUT] soliton
18:44:07,961 INFO  [STDOUT] snake
18:44:07,961 INFO  [STDOUT] SupraCanon
18:44:07,961 INFO  [STDOUT] Segolene
18:44:07,961 INFO  [STDOUT] silex
18:44:07,962 INFO  [STDOUT] After=========
18:44:07,962 INFO  [STDOUT] SUMO VIE
18:44:07,962 INFO  [STDOUT] Segolene
18:44:07,962 INFO  [STDOUT] SupraCanon
18:44:07,962 INFO  [STDOUT] silex
18:44:07,962 INFO  [STDOUT] snake
18:44:07,962 INFO  [STDOUT] soliton 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:54:50.967

您的“之后”数组按字母顺序排序：

```
18:44:07,962 INFO  [STDOUT] After=========
18:44:07,962 INFO  [STDOUT] SUMO VIE
18:44:07,962 INFO  [STDOUT] Segolene
18:44:07,962 INFO  [STDOUT] SupraCanon
18:44:07,962 INFO  [STDOUT] silex
18:44:07,962 INFO  [STDOUT] snake
18:44:07,962 INFO  [STDOUT] soliton 
```

只是大写字母优先。

编辑：如果您想要不区分大小写的排序，请使用：

```
theList.add("SUMO VIE");theList.add("soliton");
theList.add("snake");theList.add("supracanon");
Collections.sort(theList, String.CASE_INSENSITIVE_ORDER); 
```

正如下面 Natix 所建议的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:57:31.463

大写字符位于小写字符之前。

```
"SUMO VIE".compareTo("Segolene") < 0 
```

要以不区分大小写的方式对字符串列表进行排序，您可以使用此比较器：

```
Collections.sort(rList, String.CASE_INSENSITIVE_ORDER); 
```

# python - 选择性地从 vrml (wrl) 文件中删除代码

> ID：11887687
> 
> 赞同：0
> 
> 时间：2012-08-09T16:19:17.463
> 
> 标签：python

我有一个 vrml (wrl) 文件，我需要从中删除一些文本。要删除的文本块可以由 match1 和 match2 标识。

要删除的文本块应该来自 match1，直到但不包括 match2。注意 match1 也应该被排除在删除之外。

因此，给定以下内容，其中 match1 是“color [”，而 match2 是“] #color”：

```
...
a
b
color [
0 0 0
0 0 0
0 0 0
] #color
c
d
... 
```

使用 Levon 提供的以下代码：

```
with open('try1a.wrl') as inf:
    ignoreLines = False
    for line in inf:
        if 'color [' in line:
            print line,
            ignoreLines = True
        if '] #color' in line:
            ignoreLines = False            
        if not ignoreLines:
            print line, 
```

我得到以下信息：

```
a
b
color [
] #color
c
d 
```

这正是我想要的。

但是，我发现存在另一组这些文本块，它们分别以 match1 和 match2 开头和结尾，不应删除。我要删除的块和我不想删除的块之间的区别在于 match1 后面的行。

因此，如果代码看到以下内容，它应该越过这个卡盘而不删除任何东西，然后继续下一个：

```
...
a
b
color [
0 0 1     # since this is not "0 0 0" the code should leave this unchanged
0 0 0
0 0 0
] #color
c
d
... 
```

总而言之，如果代码在 match1 之后看到“0 0 0”，则删除 match2 之前的所有行（代码当前可以正常工作），但如果代码没有看到“0 0 0”，请不要理会它并移动到下一个。后一种功能需要添加到 Levon 提供的代码中。顺便感谢 Levon 的代码！

编辑：

这是成品，效果很好，再次感谢所有帮助过我的人：

```
import string
import sys
import re
import subprocess

file_name_in = sys.argv[1]
file_name_out = sys.argv[2]

f = file(file_name_out, 'w')
sys.stdout = f

with open(file_name_in) as inf:
    ignoreLines = False
    for line in inf:
        if 'color [' in line:
            print line,
            line = next(inf, '')
            ignoreLines = all((s == '0' or s == '0,') for s in line.split())
        if '] #color' in line:
            ignoreLines = False            
        if not ignoreLines:
            print line,

sys.stdout = sys.__stdout__
f.close()

# remlns8.py inputFile.wrl outputFile.wrl 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:30:44.077

替换`ignoreLines = True`为：

```
line = next(inf, '') # a file is an iterator over lines
ignoreLines = all((s == '0') for s in line.split()) # ignore if all zeros 
```

# c# - 从 32 位 .NET 应用程序确定 64 位计算机上 SQL Server 实例的安装目录

> ID：11887689
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:19:20.963
> 
> 标签：c#, registry, sql-server-2008-r2, 32bit-64bit

我试图从 32 位 .NET 应用程序中确定 64 位计算机上的 SQL Server 实例的安装目录，但由于我的代码访问的常规注册表正在被虚拟化，我试图让注册表正常工作而被抓住了一段时间或Windows操作系统的其他东西。

我想我有一个答案，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:22:31.480

编写一个小的 64 位程序来解决这个问题，并从您的 32 位应用程序中调用 .exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:18:24.017

我没有完成检查我的第一个答案的正确性，因为有一种更好的方法，即使用此处描述的 WMI： [https ://stackoverflow.com/a/5497319/832705](https://stackoverflow.com/a/5497319/832705)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T16:22:19.590

我的解决方案是询问 SQLServer 注册表的安装目录是什么，因为它是一个 64 位应用程序，可以访问常规的 64 位注册表，并且不会卡在 32 位注册表沙箱中。

这可以使用这个家伙的答案来完成： [https ://stackoverflow.com/a/533592/832705](https://stackoverflow.com/a/533592/832705)

真的很棒，谢谢伊恩先生

# jquery - 使用jQuery更改ID以'change'开头的所有元素的宽度

> ID：11887692
> 
> 赞同：0
> 
> 时间：2012-08-09T16:19:30.170
> 
> 标签：jquery

我在 ASPX 页面上有多个 div 元素。这些 div 元素中的每一个都具有 'changeHeader' 或 'changeFooter' 或 'changeHeaderImg' 等 id。我想编写 jQuery，它将所有此类 div 的宽度更改为 90%。现在每个 div 的宽度都设置为 70%。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:22:33.383

用这个：

```
 $("[id^='change']").css("width","90%"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:21:37.473

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/rWnww/)**

```
$('div[id^="change"]').css('width', '90%'); 
```

对于 div 和 span

```
$('div[id^="change"], span[id^="change"]').css('width', '90%'); 
```

对于任何类型的 id 开头的元素`change`

```
$('[id^="change"]').css('width', '90%'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T16:21:43.743

为此，使用`$('div[id=^"change"]').css('width', '90%');`

# javascript - 用正则表达式替换 " 使用 String.replace()

> ID：11887699
> 
> 赞同：0
> 
> 时间：2012-08-09T16:19:50.490
> 
> 标签：javascript, regex

我有以下字符串

```
"content \" content <tag attr1=\"val1\" attr2=\"val2\">content \" content</tag> content \" content" 
```

我想将`"`标签定义中的所有字符替换为`'`具有使用`String.replace()`功能的字符。`"`标签内容中的字符必须保持其当前形式。

```
"content \" content <tag attr1='val1' attr2='val2'>content \" content</tag> content \" content" 
```

也许可以使用带有一些分组的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:31:27.240

您可以使用`replace()`regex-callback 为您执行此操作：

```
var str = 'content " content <tag attr1="val1" attr2="val2">content " content</tag> content " content';

function replaceCallback(match) {
    return match.replace(/"/g, "'");
}

str = str.replace(/<([^>]*)>/g, replaceCallback); 
```

正则表达式将匹配字符串中的任何中间字符`<`和`>`字符，并将匹配项传递给`replaceCallback()`方法，然后根据需要`"`用`'`字符替换。

**编辑：**正在`replaceCallback()`使用`.replace('"', "'")`，但这只会替换第一个`"`. 我已将其更新为使用正则表达式替换，现在它可以按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:37:14.000

以下代码（取自[该问题](https://stackoverflow.com/questions/857623/how-to-find-quotes-within-a-tag)的已接受答案）也可以工作，无需回调，但使用不太容易理解的正则表达式。

```
var str = 'content " content <tag attr1="val1" attr2="val2">content " content</tag> content " content';
str = str.replace(/"(?=[^<]*>)/g, "'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:38:37.890

```
var str = "content \" content <tag attr1=\"val1\" attr2=\"val2\">content \" content</tag> content \" content";

var replaced = str.replace(/\<.*?\>/g, function(match, index){ 
  return match.replace(/"/g, "'"); // `match` will be each tag , both opening and closing. 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T16:38:41.520

你不能只用一个正则表达式，你必须使用一个组合。这是要走的路：

1.  匹配标签内的文本，这很容易。
2.  使用替换将上一个匹配的输出中的字符替换为您想要的字符，这也很容易，因为您已经完成了上一个匹配。

向你致敬！不管你是谁。

# content-management-system - cq-day如何实现段落系统

> ID：11887700
> 
> 赞同：1
> 
> 时间：2012-08-09T16:19:50.530
> 
> 标签：content-management-system, aem

我需要一个简短的描述如何在日的公报（cq）中实现段落系统。

我在 cq 和 google 的文档中进行了搜索，但没有找到一个简单的解释，这很有效。

谁能给我一个小小的解释？

这将非常有帮助和赞赏。提前致谢。

（我需要 CQ4.2 的描述）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:43:47.470

您可能知道，4.2 是 Communiqué CMS 的一个相对较旧的版本。当前版本是 CQ 5.5。我对5.4最熟悉，所以我的一些信息可能不适用于你的情况。

正如您可能知道的，段落系统是 CMS 提供的基础组件和功能。您可以在页面模板中包含“parsys”作为组件；您可以扩展组件，添加您自己的功能。因此，在这种情况下，我不确定您所说的“实施段落系统”是什么意思。

4.2 的文档仍可在[http://docs.day.com/en/home/communique_4.html 获得](http://docs.day.com/en/home/communique_4.html)。您可能还想查看[http://dev.day.com/content/kb/home/cq5.html上的知识库和](http://dev.day.com/content/kb/home/cq5.html)[http://forums.adobe.com/community/digital_marketing_suite/cq5](http://forums.adobe.com/community/digital_marketing_suite/cq5)上的论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:27:32.580

我需要做的是在包含 parsys 组件之前进行初始化。

我必须在组件 parsys 前面添加的代码是：

```
<%
Style actstyle = null; 
%>
<cfc:initComponent cellId="body" componentId="/libs/Components/body">
<% actstyle = componentContext.getStyle(); %>
</cfc:initComponent>
<cfc:includeComponent cellId="body" componentId="/libs/Components/body" />

<cfc:includeComponent cellId="parsys"
    componentId="/apps/emb/Components/parsys" /> 
```

另外在组件内部我需要一个编辑栏。这也无处描述。

```
<%
ComponentContext cc = (ComponentContext) request.getAttribute("componentContext");
ComponentInfo ci = cc.getComponentInfo();
%>

<cfc:editbar
    parName="<%= cc.getContainerList() %>"
    parNum="<%= cc.getContainerLabel() %>"
    storagePre="<%= cc.getStoragePre() %>"
    dialogAny="<%= ci.getContentDialog() %>"
/> 
```

问候， Seboeh

# xcode - Xcode 4.4 内存（Core Foundation/Objective-C）存储到“navcontrol”中的对象的潜在泄漏

> ID：11887701
> 
> 赞同：1
> 
> 时间：2012-08-09T16:19:57.143
> 
> 标签：xcode, xcode4

我是 Xcode 的新手，如果能帮助我消除这种内存泄漏，我将不胜感激。它显示在线：[window addSubview:navcontrol.view]; 下面是我的代码：

```
#import "ExSignupAppDelegate.h"
#import "SignupTableViewController.h"

@implementation ExSignupAppDelegate

@synthesize window;

@synthesize viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
    UINavigationController* navcontrol;
    navcontrol = [[UINavigationController alloc]init];
    SignupTableViewController* signupVC = [[SignupTableViewController alloc]initWithNibName:@"SignupTableViewController" bundle:nil];
    signupVC.title = NSLocalizedString(@"Title Abstract Search", @"");
    [navcontrol pushViewController:signupVC animated:NO];
    [signupVC release];
    [window addSubview:navcontrol.view];

    return YES;
    }

-(void)applicationDidFinishLaunching:(UIApplication *)application
{
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
}

- (void)dealloc
{

    [window release];
    [viewController release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:02:34.090

您正在使用 alloc/init 创建 navController，因此您有责任释放它。改变你的线路

```
navController = [[UINavigationController alloc]init]; 
```

至

```
navController = [[[UINavigationController alloc]init] autorelease]; 
```

这会将您的 navController 扔到稍后发布的自动释放池中。如果您在其他方法中需要 navController，则应将其存储在属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:34:02.643

```
[window addSubview:navcontrol.view]; 
```

应替换为

```
window.rootViewController = navcontrol; 
```

# java - 在 Java 中，偏移量是否应该受 timeZone 影响？

> ID：11887705
> 
> 赞同：0
> 
> 时间：2012-08-09T16:20:09.047
> 
> 标签：java, time, timezone

我正在使用以下代码来获取偏移量：

```
TimeZone.getDefault().getRawOffset() 
```

在查看文档后，`getRawOffset`我注意到以下内容：

> 因为这个值不受夏令时影响，所以称为原始偏移量。

因此，一般的时间偏移不应受到夏令时的影响，或者时间偏移和原始时间偏移之间存在差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:23:52.530

这取决于您所说的“一般时间偏移”是什么意思。原始偏移量也称为时区的*标准*偏移量 - 未考虑夏令时时 UTC 与本地时间之间的差异。

观察 DST 时，任何特定时间的*墙壁偏移*都不会与原始偏移相同。要获得它，您需要指定您感兴趣的确切时间，例如通过[`TimeZone.getOffset(long)`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getOffset%28long%29)。

如果您需要更具体的答案，则需要知道更具体的问题 - 包括有关您正在谈论的确切偏移量的信息。

# iphone - 以编程方式取消 UIAlertView

> ID：11887709
> 
> 赞同：7
> 
> 时间：2012-08-09T16:20:23.900
> 
> 标签：iphone, objective-c, cocoa, uialertview, alert

如何以`UIAlertView`编程方式取消？这是我用来显示 UIAlertView 的代码

```
UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"Save Background" message:@"Downloading..." delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];
    CGAffineTransform myTransform = CGAffineTransformMakeTranslation(0.0, 70.0);
    [myAlertView setTransform:myTransform];
    [myAlertView show]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T16:23:25.150

尝试`dismissWithClickedButtonIndex:`像这样使用：

这是要使用的代码：

```
[myAlertView dismissWithClickedButtonIndex:-1 animated:YES]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T16:23:33.307

你可以通过

```
- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated 
```

同时调用“取消”按钮索引。

您也可以简单地从超级视图中删除警报视图（即“ `removeFromSuperview`”）。如果您不使用 ARC，请确保“ `release`”分配的视图。

# javascript - 将数据导出到excel的最有效方法？

> ID：11887713
> 
> 赞同：0
> 
> 时间：2012-08-09T16:20:40.247
> 
> 标签：javascript, excel, export, uri

因此，我发现的将数据导出到 excel 的大多数 SO 答案都涉及使用带有`data:`. 这是最好的客户端方式吗（至少在 Windows 上，它似乎不适用于 Mac）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:34:08.087

> 因此，我发现的将数据导出到 excel 的大多数 SO 答案都涉及使用 URI`data:`

呃......你是什么意思，你能提供一些链接吗？

除此之外，您可以通过多种方式进行操作 - 选择最合适的一种。一种方法是您提到的（除非您发布一些链接，否则我无法理解）。

另一种方式：将所有数据排列为多行 csv 字符串：

```
a, b, c, d
e, f, g, h, i
... 
```

并将其发送到服务器。服务器“服务”只接受这个字符串并返回一个可以正确下载的 CSV 表示。也就是说，将字符串粘贴到名为“myfile.csv”的文件中，然后将文件返回给用户。

另一种方式（hacky）：显示一个带有 CSV“in”的文本区域，并要求用户将其复制/粘贴到 Excel 中。CSV 在复制粘贴时很容易分成多列。

如果您使用的是 Google 电子表格 - 那么您可以使用 TSV（选项卡式空间值）填充文本区域，即选项卡`\t`分隔两列而不是逗号。复制/粘贴到 Google 电子表格将跨列

使用最适合您的方法。在选择方法之前了解您的目标（即原因）以及选择之后该方法的价值/价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:56:35.550

如果您不介意 flash 的客户端要求，您可以使用[Downloadify](https://github.com/dcneiner/Downloadify)。

此外，如果博士的答案是您使用的答案，您可能想给他的答案“接受”检查:)

# javascript - Javascript在Mac可可应用程序中向objective-c发送消息

> ID：11887717
> 
> 赞同：3
> 
> 时间：2012-08-09T16:20:45.803
> 
> 标签：javascript, objective-c, xcode, cocoa, webview

我对 Objective-C 还很陌生，所以请不要以为我知道一些东西，因为我可能不会:)。

我有一个带有 webview 的 Mac（不是 iOS）可可应用程序。在 web 视图中，有一个充当迷你消息传递客户端的站点。当收到一条消息时，我希望 javascript 通知 Objective-c 已收到一条消息......然后 Objective-c 将运行一些代码，例如创建一个咆哮弹出窗口。

我在 Apple Developer 网站上查看了[WebView 类参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)，但是我不太确定如何正确实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:04:04.053

您正在寻找的是参考文档“Calling Objective-C Methods From Javascript”（[参考](http://developer.apple.com/library/safari/documentation/appleapplications/Conceptual/SafariJSProgTopics/Tasks/ObjCFromJavaScript.html#//apple_ref/doc/uid/30001215-BBCBFJCD)）

基本上，总而言之，您必须将您的 Objective-C 类显式地暴露给 javascript 脚本环境。非正式协议是您想要实现的`WebScripting`协议，以使您的自定义对象能够做到这一点。

一旦您想要向 javascript 公开的对象（例如您的“通知对象”）实现`+ (BOOL)isSelectorExcludedFromWebScript:(SEL)aSelector;`，并且`+ (BOOL)isKeyExcludedFromWebScript:(const char *)name;`您的 webview 的控制器/委托现在应该使该对象可用于 javascript。

例如，在webView 实例的**Frame Load Delegate中：**

```
- (void)webView:(WebView *)sender didClearWindowObject:(WebScriptObject *)windowObject forFrame:(WebFrame *)frame {
     // Create the Obj-C object you want JS to be able to access
     CustomNotificationCenter *noteCenter = [CustomNotificationCenter sharedNotificationCenter];
     // Get the script object that corresponds to "window" in JS
     id win = [sender windowScriptObject];
     // Add our noteCenter as a property of "window" called "customNotifications"
     [win setValue:noteCenter forKey:@"customNotifications"];
} 
```

如果你做的一切都正确，你应该能够在 Javascript 中使用你的 Objective-C 对象。例如，如果您为您的 公开了一个名为“printNotification:”的方法`noteCenter`，那么在 Javascript 中这应该可以工作：

```
function messageReceived(messageText) {
     window.customNotifications.printNotification_("Notification!" + messageText);
} 
```

当然，您将使用 Growl 在您的自定义 Obj-C 对象中显示通知以及`printNotification`. （如果您在 Mountain Lion 上，新的通知中心也很棒）。希望有帮助。

# android - Android Mediaplayer 错误监听器

> ID：11887726
> 
> 赞同：0
> 
> 时间：2012-08-09T16:21:31.807
> 
> 标签：android, android-mediaplayer, http-live-streaming

您知道有关 Mediaplayer ErrorListener 的更多信息吗？

在我的应用程序中，我收到了这个错误

> 08-09 16:15:43.145: E/MediaPlayer(5972): 错误 (1, -1010)

但我不知道是哪个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:03:07.890

我找到了使用 Android 媒体播放器测试不同用例的解决方案。

当流媒体资源不可用时引发错误（1，-1010）（404 Http 错误）

# asp.net - 两个表单两个按钮 asp 验证

> ID：11887734
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:21:52.090
> 
> 标签：asp.net, vb.net

嗨，像这样在一个页面上有两个表格

```
 <form action="#" class="account_signin">
                    <asp:Literal ID="ltlSignInMessage" runat="server"></asp:Literal>
                        <div class="form_row">
                            <label for="user_email" class="inputlabel">E-mail</label>
                            <asp:Textbox id="txtSignInEmail"  class="inputbox inputlong" runat="server"></asp:Textbox>

                        </div>
                        <div class="form_row">
                            <label for="user_pw" class="inputlabel">Password</label>
                             <asp:Textbox id="txtSignInPassword"  TextMode="password"  class="inputbox inputlong" runat="server"></asp:Textbox>
                        </div>
                        <div class="form_submit">
                         <asp:Button ID="btnSignIn" Text="Submit" runat="server" CssClass="btnBlue" />

                            <br class="clear"/>
                        </div>
                    </form>
  <form action="#" class="create_account">

 <div class="form_row">
                            <label for="name" class="inputlabel">Name</label>
                             <asp:TextBox ID="txtFirstName" class="inputbox" runat="server"></asp:TextBox>
                            <span class="mandatory">Required</span>
                        </div>
                        <div class="form_row">
                            <label for="surname" class="inputlabel">Surname</label>
                            <asp:TextBox ID="txtLastName" class="inputbox" runat="server"></asp:TextBox>
                            <span class="mandatory">Required</span>
                        </div>
  <div class="form_submit_register">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed egestas gravida odio ac scelerisque. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam pharetra mauris et nunc rhoncus tincidunt.</p>
                     <asp:Button ID="btnReg" Text="Register" runat="server" Class="btnBlue" />
                    <br class="clear"/>
                </div>
           </form> 
```

但是在它背后的代码中，它只触发了一个按钮，并且工作正常。

我如何在后面的代码中同时触发？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:28:50.277

好的，我在这里猜测，但您是否尝试注册用户，然后通过尝试调用登录事件处理程序自动登录？如果是这样，那么您需要重构登录方法中的代码以抽象出一个方法并从注册事件的末尾触发该方法，如下所示：

```
public void btnReg_OnClick (object sender, EventArgs e)
{
 // what ever your logic currently is
 SignIn();
}

public void btnSignIn_OnClick(object sender, EventArgs e)
{
  SignIn();
}

private void SignIn()
{
  // place your logic from the sign in event handler into this method.
} 
```

为 C# 语法道歉 - 你应该能够从中得到这个想法 - 你当然需要在你的应用程序中使用 VB.NET 语法来做到这一点！

# twitter - Twitter“查看摘要”按钮

> ID：11887736
> 
> 赞同：6
> 
> 时间：2012-08-09T16:21:59.320
> 
> 标签：twitter, share, social-media

我在好莱坞报道中注意到，在他们的推文中，他们有一个“查看摘要”按钮，点击该按钮后，您可以预览他们网站上的帖子，其中包含标题、摘录和预览图片。

![在此处输入图像描述](../Images/c8c34bd24244e9474f22edd8f230780e.png)

关于如何完成此操作的一些文档在哪里的任何线索？我浏览了[twitter API](https://dev.twitter.com/docs)并没有成功找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:05:17.000

根据 Twitter发布[社交面包师的](http://www.socialbakers.com)[更多互动内容](http://www.socialbakers.com/blog/649-twitter-to-tweet-more-interactive-content/)

*“我们在 Twitter 上关注《华尔街日报》以了解它是如何运作的。当推文包含指向其网站上一篇文章的链接时，您将看到查看摘要选项而不是展开。摘要将为您提供文章的预览, 有时甚至是出版商和作家的 Twitter 帐户。当您单击预览上的任意位置时，您将被导航到网站上的文章。转发和收藏的数量会像以前一样出现。您可以继续阅读文章，像以前一样关注这些帐户、回复、收藏或转发推文。”*

显然，您只需要一个指向您的内容的链接。但是，我敢肯定还有更多，因为它似乎并不*总是*有效。

** 编辑 **

它实际上被称为*Twitter Card*，这里是[Twitter Cards 的文档](https://dev.twitter.com/docs/cards)

# c# - 如何在c#中传递struct中的值列表

> ID：11887739
> 
> 赞同：0
> 
> 时间：2012-08-09T16:22:01.420
> 
> 标签：c#, asp.net, arrays, struct

我知道如何传递数组中的值列表

```
 int[] unit = new int[] {1,-3,3,4};
        string[] letter_grade = new string[] {"a+","B","c","W"};
        double totalGPA;
        GPA get = new GPA();
        get.getgpa(unit, letter_grade ,out totalGPA); 
```

但我想知道如何使用结构传递它我可以发送单个值但不知道如何发送值列表

```
 double totalGPA;
        GPA get = new GPA();
        GPAList[] Val = new GPAList[1];
        Val[0].grade ="d";
        Val[0].unitgrade = 4;
        get.getgpa(Val[0], out totalGPA); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:31:35.977

您只需将结构数组传递`Val`给 getgpa：

```
get.getgpa(Val, out totalGPA); 
```

然后`getgpa`应该接受一个 GPA 结构数组：

```
void getgpa(GPA[] gpas, out double totalGPA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:40:04.280

据我了解您的问题，您想使用 struct 传递一组值。

结构不用于存储集合，对于集合，我们在 c# 中有数组、arraylist、hashtable 等。

结构的目的是将完整的信息表示为单个数据类型。结构只是轻量级的类，它们不能用于集合。

如果您想使用结构来存储值的集合，那么您将不得不再次创建结构数组。

如果你想传递一个结构的数组，那么在形式参数列表中，你应该期望该结构本身的数组，例如。

```
**get.getgpa(Val, out totalGPA);** 
```

要使上述代码正常工作，getgpa 函数的签名应为：

```
**getgpa(GPA[] arr,out double totalGPA)** 
```

希望这可以帮助。

# google-chrome-extension - 在我的 Chrome 扩展程序中更改拼写检查语言

> ID：11887741
> 
> 赞同：1
> 
> 时间：2012-08-09T16:22:10.543
> 
> 标签：google-chrome-extension

我正在尝试编写一个可以切换拼写检查语言的 Chrome 扩展程序。我搜索了 Chrome API，并在[Types](http://developer.chrome.com/extensions/types.html)界面中找到了 ChromeSetting 对象。但是，我找不到任何有关如何使用它的信息 - 例如，“详细信息”对象的选项是什么？

我在这里走向正确的道路吗？如果是这样，是否有人有一些可以帮助我的示例或额外信息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:35:03.157

不幸的是，虽然`chrome.types`存在，但您无能为力。

我们可以运行这段代码来看看：

```
var c = chrome.types;
alert( Object.keys( c ).join(", ") ); 
```

结果：

```
[null] 
```

尽管您链接到的文档说明有一些方法可用。我的猜测是，当 Goog 开始着手时，它会“总有一天”完成。

# c# - 将组合框下拉菜单设置为数据表的最大列

> ID：11887747
> 
> 赞同：0
> 
> 时间：2012-08-09T16:22:20.080
> 
> 标签：c#, .net, combobox, datatable

我正在解析来自 CSV 文件的数据并将其全部保存在数据表中，现在我想做的是创建一个组合框，该组合框的下拉菜单中的数字等于最大列数（或每行中的条目） ，它转换为我相信的每个数组中的元素）在该数据表中。

例如，如果在我的数据表中有 4 行，每行有 10 列，我希望有一个组合框，其中包含项目 1-10 的下拉菜单。

在伪代码中：

```
get datatable max column number
iterate up until max column number, adding items to dropdown list 
```

我敢肯定这是比较简单的，我只是不太了解 C#。

目前我正在对值进行硬编码，如下所示：

```
List<int> colNums1 = new List<int>() { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
comboBox1.Items.AddRange(colNums1.ConvertAll<string>(i => i.ToString()).ToArray()); 
```

而且我想让它具有适应性，因为这显然不适用于真正的 csv，因为它们不会都有 10 列。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:44:00.507

```
 for (int i = 1; i < myDataTable.Columns.Count+1; i++)
   {
      comboBox1.Items.Add(i); 
   } 
```

# cloud - 在 ios 中访问联系人

> ID：11887750
> 
> 赞同：0
> 
> 时间：2012-08-09T16:22:27.393
> 
> 标签：cloud, contacts, icloud, import-contacts

我正在开发一个聚合各种数据源的应用程序。是否可以访问 IOS 联系人/日历/提醒并从应用程序汇总和上传这些数据，或者这会违反应用程序商店的规定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:49:49.787

我想如果用户允许你这样做，你会给他删除你上传的数据的机制，它可以解决。

你为什么把这个问题标记为 iCloud？

# spotify - 我可以按地区过滤 Spotify 搜索吗

> ID：11887759
> 
> 赞同：1
> 
> 时间：2012-08-09T16:22:47.947
> 
> 标签：spotify

我们正在构建一个应用程序，允许用户将歌曲添加到特殊类型的播放列表中，并且我们正在使用[搜索 api](https://developer.spotify.com/technologies/web-api/search/)。目前，我们只针对美国市场，所以如果我们可以传入“美国”的地区参数就更好了。随着时间的推移，我们正在构建的应用程序将推广到多个 Spotify 市场，因此该参数将成为本地化工作的一部分。

过滤搜索区域的功能是否内置在 web api 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:18:01.127

不幸的是，你不能。您必须自己通过检查`territories`每个项目的属性来过滤搜索结果，即以下（对于[麦当娜专辑](http://ws.spotify.com/search/1/album.json?q=Madonna)）。

```
...
{"territories": "AD AI AL AM AT AU AW AX AZ BA BG BM BV BY CA CH CY CZ DE DK EE ES FI FK FO FR GB GE GF GG GI GL GP GR GS HR HU IE IM IO IS IT JE KY LT LU LV MC MD MK MQ MS MT NC NL NO NZ PF PL PM PN PT RE RO RU SE SH SI SJ SK SM TC TF TR UA US VA VG WF YT"}}
... 
```

如果`US`国家代码在那里，它在美国等地可用。

# php - Wordpress - how can I fetch more posts via AJAX?

> ID：11887760
> 
> 赞同：4
> 
> 时间：2012-08-09T16:22:49.173
> 
> 标签：php, jquery, ajax, wordpress

To begin with, I think this is a longshot but hopefully there is someone out there that can help.

To explain the current situation, at the moment I have a custom plugin that grabs various bits of information about a user and their 4 most recent posts.

I am also using the WPBook plugin (so this is on facebook and just just a typical wordpress site)

Ok, so here is my code that is grabbing the 4 most recent posts for a user:

```
// The Query
query_posts('posts_per_page=4&author='.$blogger_id);

// set $more to 0 in order to only get the first part of the post
global $more;
$more = 0;

// the Loop
while (have_posts()) : the_post();
?>
    <div class="oe-grid-box">
        <a href="<?php the_permalink() ?>" <?php the_title()?></a>
        <div class="oe-grid-box-content">
            <?php echo the_content( '...' ); ?>
        </div>
        <div class="oe-grid-pic">
            <a href="<?php the_permalink() ?>">
                <span class="<?php echo strtolower($category); ?>"></span>
            </a>
            <?php echo $image; ?>
        </div>
    </div>
<?php
endwhile;

// Reset Query
wp_reset_query();
?>

<div id="load-more">Load More</div> 
```

I tried following this tutorial but instead of a separate plugin, placing the code in my existing plugin but now my page won't load:

[http://www.problogdesign.com/wordpress/load-next-wordpress-posts-with-ajax/](http://www.problogdesign.com/wordpress/load-next-wordpress-posts-with-ajax/)

Ideally, want I want to is when the load more button is clicked, fetch 4 more posts and show them.

If anybody could help I'd really appreciate it.

**UPDATE**

Ok,

so far I've added in my jQuery to call the php file which should hopefully return posts but it doesn't work.

I am thinking that it's because it doesn't know what the WordPress functions are?

If I put a simple `echo` in my load more script, the jQuery success function shows an alert to say it worked, but if I start doing WordPress stuff I get an internal server error, this is the code in the load-more.php file:

```
// load wordpress into template
$path = $_SERVER['DOCUMENT_ROOT'];
define('WP_USE_THEMES', false);
require($path .'/wp-load.php');

$blogger_id = $_GET['id'];
$firstname  = $_GET['firstname'];
$surname    = $_GET['surname'];
$posts      = $_GET['posts'] + 4;
$category   = $_GET['category'];
$image      = $_GET['image'];

// The Query
query_posts('paged='.get_query_var('paged').'&posts_per_page=' . $posts . '&author='.$blogger_id);

// set $more to 0 in order to only get the first part of the post
global $more;
$more = 0;

// then the same loop as in my page that is making the ajax call. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T14:02:19.503

After a lot of effort, I found the answer, here is a solution for those stuck in the same position.

This goes in your plugin page where you are getting posts for a user etc.

```
<script type="text/javascript">
    $(document).ready(function() {

        posts = 8;
        author_posts = parseInt(<?php echo $author_posts; ?>);

        $("#link_selector").click(function() {

            // alert('posts - ' + posts + 'author posts - ' + author_posts);

            if ((posts - author_posts) > 3) {
                $("#link_selector").text('No more posts!');
            }
            else {

                var category        = '<?php echo strtolower($category); ?>';
                var id              = '<?php echo $blogger_id; ?>';
                var firstname       = '<?php echo $firstname; ?>';
                var surname         = '<?php echo $surname; ?>';

                // alert(posts + category + id + firstname + surname);

                $.ajax({
                    type: "GET",
                    url: "/wordpress/wp-admin/admin-ajax.php",
                    dataType: 'html',
                    data: ({ action: 'loadMore', id: id, firstname: firstname, surname: surname, posts: posts, category: category}),
                    success: function(data){
                        $('#ajax_results_container').hide().fadeIn('slow').html(data);
                        posts = posts + 4;

                        if ((posts - author_posts) > 3) {
                            $("#link_selector").text('No more posts!');
                        }

                    }
                });
            }

        });
    });

    </script> 
```

Then in your theme's functions.php, put your function to do your ajax request:

```
function loadMore() {

    $blogger_id = $_GET['id'];
    // get your $_GET variables sorted out

    // setup your query to get what you want
    query_posts('posts_per_page=' . $posts . '&author='.$blogger_id);

    // initialsise your output
    $output = '';

    // the Loop
    while (have_posts()) : the_post();

        // define the structure of your posts markup

    endwhile;

    // Reset Query
    wp_reset_query();

    die($output);

} 
```

Then, just after the closing of your function, put in the action hooks

```
add_action('wp_ajax_loadMore', 'loadMore');
add_action('wp_ajax_nopriv_loadMore', 'loadMore'); // not really needed 
```

That's it!

# ruby - ruby，sqrt程序上的堆栈太深错误，用于学习

> ID：11887761
> 
> 赞同：0
> 
> 时间：2012-08-09T16:22:50.813
> 
> 标签：ruby

所以我知道`Math.sqrt(number)`Ruby 中的方法，但作为学习语言的一部分，我认为制作一些简单的函数是个好主意。我可能会从根本上找到平方根错误，但这就是我所做的：

```
def negative?(number)
  number < 0
end

@start = 2

def sqrt(number)
  if negative? number
    puts "Can't do negative"
  else
    if @start**2 < number
      @start += 0.01
      sqrt(number)
    else
      puts "Square root of #{number} is #{@start}!"
    end
  end
end

def start_sqrt
  print "Input text: "
  number = Integer(gets.strip)
  sqrt(number)
end

begin
  start_sqrt
rescue ArgumentError
  puts "Need a positive number!"
end 
```

这适用于较小的数字，但是当我输入较大的数字时，如果我想得到答案，我需要更改 @start 的值，否则它会显示“堆栈太深”。我在代码中做错了什么，还是 Ruby 做的一切都很好，我只是要求它以资源密集型的方式找到数字的平方根？我想这可能不是一个编程问题，而是一个数学问题，因为我知道我可以这样做：

```
def sqrt(number)
  if negative? number
    puts "Can't do negative"
  else
    root = number**0.5
    puts "Square root of #{number} is #{root}!"
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:28:58.983

It looks like Ruby is working as expected. You are asking it to find the square root of a number in a resource-intensive way (**recursion**).

In fact, you have created a stack overflow error. :)

# python - 如何比较 Python 中的版本号？

> ID：11887762
> 
> 赞同：339
> 
> 时间：2012-08-09T16:22:50.623
> 
> 标签：python, version, string-comparison

我正在浏览一个包含鸡蛋的目录，以将这些鸡蛋添加到`sys.path`. 如果目录中有同一个 .egg 的两个版本，我只想添加最新的一个。

我有一个正则表达式`r"^(?P<eggName>\w+)-(?P<eggVersion>[\d\.]+)-.+\.egg$`来从文件名中提取名称和版本。问题是比较版本号，它是一个类似`2.3.1`.

由于我正在比较字符串，因此 2 排序高于 10，但这对于版本不正确。

```
>>> "2.3.1" > "10.1.1"
True 
```

我可以做一些拆分、解析、转换为 int 等，我最终会得到一个解决方法。但这是 Python，[而不是 Java](https://stackoverflow.com/questions/6701948/efficient-way-to-compare-version-strings-in-java)。有没有一种比较版本字符串的优雅方法？

* * *

## 回答 #1

> 赞同：536
> 
> 时间：2012-08-09T16:30:03.290

使用[`packaging.version.parse`](https://packaging.pypa.io/en/latest/version.html#packaging.version.parse).

```
>>> from packaging import version
>>> version.parse("2.3.1") < version.parse("10.1.2")
True
>>> version.parse("1.3.a4") < version.parse("10.1.2")
True
>>> isinstance(version.parse("1.3.a4"), version.Version)
True
>>> isinstance(version.parse("1.3.xy123"), version.LegacyVersion)
True
>>> version.Version("1.3.xy123")
Traceback (most recent call last):
...
packaging.version.InvalidVersion: Invalid version: '1.3.xy123' 
```

`packaging.version.parse`是第三方实用程序，但由[setuptools](https://pypi.python.org/pypi/setuptools)使用（因此您可能已经安装了它）并且符合当前[PEP 440](https://www.python.org/dev/peps/pep-0440/)；`packaging.version.Version`如果版本合规，它将返回一个，如果不合规，它将返回一个`packaging.version.LegacyVersion`。后者总是在有效版本之前排序。

*注意*：打包最近被[卖到了 setuptools](https://github.com/pypa/setuptools/tree/a94ccbf404a79d56f9b171024dee361de9a948da/pkg_resources/_vendor/packaging)中。

* * *

您可能会遇到一种古老且[现已弃用](https://www.python.org/dev/peps/pep-0632/)的方法[`distutils.version`](http://docs.python.org/distutils/apiref.html#module-distutils.version)，它没有记录，仅符合被取代的[PEP 386](http://www.python.org/dev/peps/pep-0386/)；

```
>>> from distutils.version import LooseVersion, StrictVersion
>>> LooseVersion("2.3.1") < LooseVersion("10.1.2")
True
>>> StrictVersion("2.3.1") < StrictVersion("10.1.2")
True
>>> StrictVersion("1.3.a4")
Traceback (most recent call last):
...
ValueError: invalid version number '1.3.a4' 
```

如您所见，它将有效的 PEP 440 版本视为“不严格”，因此与现代 Python 的有效版本概念不符。

正如`distutils.version`未记录的那样，[这里](https://github.com/python/cpython/blob/main/Lib/distutils/version.py)是相关的文档字符串。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2014-01-11T17:36:50.983

[打包](https://pypi.org/project/packaging/)库包含用于[处理版本](https://packaging.pypa.io/en/latest/version.html)和其他打包相关功能的实用程序。这实现了[PEP 0440 - 版本标识](https://www.python.org/dev/peps/pep-0440/)，并且还能够解析不遵循 PEP 的版本。pip 和其他常见的 Python 工具使用它来提供版本解析和比较。

```
$ pip install packaging 
```

```
from packaging.version import parse as parse_version
version = parse_version('1.0.3.dev') 
```

这是从 setuptools 和 pkg_resources 中的原始代码中分离出来的，以提供更轻量级和更快的包。

* * *

在打包库存在之前，这个功能已经（并且仍然可以）在 pkg_resources 中找到，pkg_resources 是 setuptools 提供的一个包。但是，这不再是首选，因为不再保证安装 setuptools（存在其他打包工具），而且 pkg_resources 在导入时使用了相当多的资源。但是，所有文档和讨论仍然相关。

从[`parse_version()`文档](https://setuptools.readthedocs.io/en/latest/pkg_resources.html#parsing-utilities)：

> 解析 PEP 440 定义的项目的版本字符串。返回值将是表示版本的对象。这些对象可以相互比较和分类。排序算法由 PEP 440 定义，此外，任何不是有效 PEP 440 版本的版本都将被视为小于任何有效 PEP 440 版本，无效版本将继续使用原始算法进行排序。

在 PEP 440 存在之前，引用的“原始算法”是在旧版本的文档中定义的。

> 从语义上讲，格式是 distutils`StrictVersion`和`LooseVersion`类之间的粗略交叉；如果您给它提供可以使用的版本`StrictVersion`，那么它们将以相同的方式进行比较。否则，比较更像是`LooseVersion`. 可以创建会欺骗此解析器的病态版本编码方案，但在实践中它们应该非常罕见。

该[文档](https://setuptools.readthedocs.io/en/latest/setuptools.html#specifying-your-project-s-version)提供了一些示例：

> 如果您想确定您选择的编号方案是否按照您认为的方式工作，您可以使用该`pkg_resources.parse_version()` 函数来比较不同的版本号：
> 
> ```
> >>> from pkg_resources import parse_version
> >>> parse_version('1.9.a.dev') == parse_version('1.9a0dev')
> True
> >>> parse_version('2.1-rc2') < parse_version('2.1')
> True
> >>> parse_version('0.6a9dev-r41475') < parse_version('0.6a9')
> True 
> ```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-08-09T16:26:40.293

```
def versiontuple(v):
    return tuple(map(int, (v.split("."))))

>>> versiontuple("2.3.1") > versiontuple("10.1.1")
False 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-08-09T16:26:27.943

将版本字符串转换为元组并从那里开始有什么问题？对我来说似乎足够优雅

```
>>> (2,3,1) < (10,1,1)
True
>>> (2,3,1) < (10,1,1,1)
True
>>> (2,3,1,10) < (10,1,1,1)
True
>>> (10,3,1,10) < (10,1,1,1)
False
>>> (10,3,1,10) < (10,4,1,1)
True 
```

@kindall 的解决方案是代码看起来有多好的一个快速示例。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-08-23T23:40:48.267

这样`setuptools`做的方式，它使用`pkg_resources.parse_version`功能。它应该符合**PEP440**。

例子：

```
#! /usr/bin/python
# -*- coding: utf-8 -*-
"""Example comparing two PEP440 formatted versions
"""
import pkg_resources

VERSION_A = pkg_resources.parse_version("1.0.1-beta.1")
VERSION_B = pkg_resources.parse_version("v2.67-rc")
VERSION_C = pkg_resources.parse_version("2.67rc")
VERSION_D = pkg_resources.parse_version("2.67rc1")
VERSION_E = pkg_resources.parse_version("1.0.0")

print(VERSION_A)
print(VERSION_B)
print(VERSION_C)
print(VERSION_D)

print(VERSION_A==VERSION_B) #FALSE
print(VERSION_B==VERSION_C) #TRUE
print(VERSION_C==VERSION_D) #FALSE
print(VERSION_A==VERSION_E) #FALSE 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-02-12T18:38:29.757

有可用的[打](https://pypi.python.org/pypi/packaging)包包，可让您根据[PEP-440](https://www.python.org/dev/peps/pep-0440/)比较版本以及旧版本。

```
>>> from packaging.version import Version, LegacyVersion
>>> Version('1.1') < Version('1.2')
True
>>> Version('1.2.dev4+deadbeef') < Version('1.2')
True
>>> Version('1.2.8.5') <= Version('1.2')
False
>>> Version('1.2.8.5') <= Version('1.2.8.6')
True 
```

旧版本支持：

```
>>> LegacyVersion('1.2.8.5-5-gdeadbeef')
<LegacyVersion('1.2.8.5-5-gdeadbeef')> 
```

将旧版本与 PEP-440 版本进行比较。

```
>>> LegacyVersion('1.2.8.5-5-gdeadbeef') < Version('1.2.8.6')
True 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-02-17T18:00:13.353

根据 Kindall 的解决方案发布我的全部功能。通过用前导零填充每个版本部分，我能够支持与数字混合的任何字母数字字符。

虽然肯定不如他的单行函数漂亮，但它似乎与字母数字版本号配合得很好。`zfill(#)`（如果您的版本控制系统中有长字符串，请务必正确设置该值。）

```
def versiontuple(v):
   filled = []
   for point in v.split("."):
      filled.append(point.zfill(8))
   return tuple(filled) 
```

.

```
>>> versiontuple("10a.4.5.23-alpha") > versiontuple("2a.4.5.23-alpha")
True

>>> "10a.4.5.23-alpha" > "2a.4.5.23-alpha"
False 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-09-26T12:48:43.657

您可以使用[semver](https://pypi.org/project/semver/)包来确定版本是否满足[语义版本](https://semver.org/)要求。这与比较两个实际版本不同，而是一种比较。

例如，版本 3.6.0+1234 应与 3.6.0 相同。

```
import semver
semver.match('3.6.0+1234', '==3.6.0')
# True

from packaging import version
version.parse('3.6.0+1234') == version.parse('3.6.0')
# False

from distutils.version import LooseVersion
LooseVersion('3.6.0+1234') == LooseVersion('3.6.0')
# False 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-02T09:05:13.117

我正在寻找一种不会添加任何新依赖项的解决方案。查看以下（Python 3）解决方案：

```
class VersionManager:

    @staticmethod
    def compare_version_tuples(
            major_a, minor_a, bugfix_a,
            major_b, minor_b, bugfix_b,
    ):

        """
        Compare two versions a and b, each consisting of 3 integers
        (compare these as tuples)

        version_a: major_a, minor_a, bugfix_a
        version_b: major_b, minor_b, bugfix_b

        :param major_a: first part of a
        :param minor_a: second part of a
        :param bugfix_a: third part of a

        :param major_b: first part of b
        :param minor_b: second part of b
        :param bugfix_b: third part of b

        :return:    1 if a  > b
                    0 if a == b
                   -1 if a  < b
        """
        tuple_a = major_a, minor_a, bugfix_a
        tuple_b = major_b, minor_b, bugfix_b
        if tuple_a > tuple_b:
            return 1
        if tuple_b > tuple_a:
            return -1
        return 0

    @staticmethod
    def compare_version_integers(
            major_a, minor_a, bugfix_a,
            major_b, minor_b, bugfix_b,
    ):
        """
        Compare two versions a and b, each consisting of 3 integers
        (compare these as integers)

        version_a: major_a, minor_a, bugfix_a
        version_b: major_b, minor_b, bugfix_b

        :param major_a: first part of a
        :param minor_a: second part of a
        :param bugfix_a: third part of a

        :param major_b: first part of b
        :param minor_b: second part of b
        :param bugfix_b: third part of b

        :return:    1 if a  > b
                    0 if a == b
                   -1 if a  < b
        """
        # --
        if major_a > major_b:
            return 1
        if major_b > major_a:
            return -1
        # --
        if minor_a > minor_b:
            return 1
        if minor_b > minor_a:
            return -1
        # --
        if bugfix_a > bugfix_b:
            return 1
        if bugfix_b > bugfix_a:
            return -1
        # --
        return 0

    @staticmethod
    def test_compare_versions():
        functions = [
            (VersionManager.compare_version_tuples, "VersionManager.compare_version_tuples"),
            (VersionManager.compare_version_integers, "VersionManager.compare_version_integers"),
        ]
        data = [
            # expected result, version a, version b
            (1, 1, 0, 0, 0, 0, 1),
            (1, 1, 5, 5, 0, 5, 5),
            (1, 1, 0, 5, 0, 0, 5),
            (1, 0, 2, 0, 0, 1, 1),
            (1, 2, 0, 0, 1, 1, 0),
            (0, 0, 0, 0, 0, 0, 0),
            (0, -1, -1, -1, -1, -1, -1),  # works even with negative version numbers :)
            (0, 2, 2, 2, 2, 2, 2),
            (-1, 5, 5, 0, 6, 5, 0),
            (-1, 5, 5, 0, 5, 9, 0),
            (-1, 5, 5, 5, 5, 5, 6),
            (-1, 2, 5, 7, 2, 5, 8),
        ]
        count = len(data)
        index = 1
        for expected_result, major_a, minor_a, bugfix_a, major_b, minor_b, bugfix_b in data:
            for function_callback, function_name in functions:
                actual_result = function_callback(
                    major_a=major_a, minor_a=minor_a, bugfix_a=bugfix_a,
                    major_b=major_b, minor_b=minor_b, bugfix_b=bugfix_b,
                )
                outcome = expected_result == actual_result
                message = "{}/{}: {}: {}: a={}.{}.{} b={}.{}.{} expected={} actual={}".format(
                    index, count,
                    "ok" if outcome is True else "fail",
                    function_name,
                    major_a, minor_a, bugfix_a,
                    major_b, minor_b, bugfix_b,
                    expected_result, actual_result
                )
                print(message)
                assert outcome is True
                index += 1
        # test passed!

if __name__ == '__main__':
    VersionManager.test_compare_versions() 
```

编辑：添加了带有元组比较的变体。当然，带有元组比较的变体更好，但我一直在寻找带有整数比较的变体

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-23T22:24:16.673

...回到简单的...对于您可以使用的简单脚本：

```
import sys
needs = (3, 9) # or whatever
pvi = sys.version_info.major, sys.version_info.minor 
```

稍后在您的代码中

```
try:
    assert pvi >= needs
except:
    print("will fail!")
    # etc. 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-24T15:00:09.310

类似于标准[strverscmp](https://man7.org/linux/man-pages/man3/strverscmp.3.html) 和[Mark Byers 的这个解决方案，](https://stackoverflow.com/a/4836734/810282)但使用 findall 而不是 split 来避免空的情况。

```
import re
num_split_re = re.compile(r'([0-9]+|[^0-9]+)')

def try_int(i, fallback=None):
    try:
        return int(i)
    except ValueError:
        pass
    except TypeError:
        pass
    return fallback

def ver_as_list(a):
    return [try_int(i, i) for i in num_split_re.findall(a)]

def strverscmp_lt(a, b):
    a_ls = ver_as_list(a)
    b_ls = ver_as_list(b)
    return a_ls < b_ls 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-08T05:14:11.027

假设您的语义版本是“干净的”（例如`x.x.x`）并且您有一个需要排序的版本列表，那么这将起作用。

```
# Here are some versions
versions = ["1.0.0", "1.10.0", "1.9.0"]

# This does not work
versions.sort() # Result: ['1.0.0', '1.10.0', '1.9.0']

# So make a list of tuple versions
tuple_versions = [tuple(map(int, (version.split(".")))) for version in versions]

# And sort the string list based on the tuple list
versions = [x for _, x in sorted(zip(tuple_versions, versions))] # Result: ['1.0.0', '1.9.0', '1.10.0'] 
```

要获取最新版本，您只需选择列表中的最后一个元素`versions[-1]`或使用 的`reverse`属性进行反向排序`sorted()`，将其设置为`True`，然后获取`[0]`元素。

您当然可以将所有这些包装在一个方便的函数中以供重用。

```
def get_latest_version(versions):
    """
    Get the latest version from a list of versions.
    """
    try:
        tuple_versions = [tuple(map(int, (version.split(".")))) for version in versions]
        versions = [x for _, x in sorted(zip(tuple_versions, versions), reverse=True)]
        latest_version = versions[0]
    except Exception as e:
        print(e)
        latest_version = None

    return latest_version

print(get_latest_version(["1.0.0", "1.10.0", "1.9.0"])) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-01T12:09:56.157

使用 python 增加版本

```
def increment_version(version):
    version = version.split('.')
    if int(version[len(version) - 1]) >= 99:
        version[len(version) - 1] = '0'
        version[len(version) - 2] = str(int(version[len(version) - 2]) + 1)
    else:
        version[len(version) - 1] = str(int(version[len(version) - 1]) + 1)
    return '.'.join(version)

version = "1.0.0"
version_type_2 = "1.0"
print("old version",version ,"new version",increment_version(version))
print("old version",version_type_2 ,"new version",increment_version(version_type_2)) 
```

# c# - 与 Autofac 最相似的 Java IoC 容器

> ID：11887763
> 
> 赞同：5
> 
> 时间：2012-08-09T16:22:55.757
> 
> 标签：c#, java, inversion-of-control, autofac

我主要是 .NET 开发人员，但我希望在 Java 项目中使用 IoC。

我对 Autofac 非常熟悉。是否有 Java 的 IoC 容器在构建、配置等方面与 Autofac 基本相似？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:34:20.633

我不认为有任何类似的东西。Autofac 非常独特，并且强烈依赖于 lambdas。

我只能向您推荐[google guice](http://code.google.com/p/google-guice/)，它与 ninject 更相似。IMO 它非常强大，易于选择且编码有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T20:54:04.770

检查 apache zest [https://zest.apache.org](https://zest.apache.org)

它的应用程序上下文类似于 autofac builder

更新：Apache Zest 在 2017 年初更名为 Apache Polygene，以避免与 Eclipse Zest 混淆。[https://polygene.apache.org](https://polygene.apache.org)

# asp.net - ASP .net 验证技术

> ID：11887765
> 
> 赞同：2
> 
> 时间：2012-08-09T16:22:58.097
> 
> 标签：asp.net, .net, validation, webforms

在过去的 1.5 年里，我在 ASP.net MVC 中工作。我使用企业应用程序块进行服务器端验证的地方。我喜欢视图模型绑定到视图控件和验证以这种方式工作的方式。但现在我正在一个项目中工作，该项目纯粹是没有 MVC 的网络表单。

这里 jQuery 用于客户端验证，根本没有服务器端验证。我强调了服务器端验证的重要性，并计划使用企业库来做同样的事情。

由于某些原因（可能是由于我最近在 ASP.NET MVC 中工作），我在某个点上遇到了困难。

在我的 webforms 应用程序中，我的验证必须包含客户端和服务器端的相同逻辑。或者一般来说，在 ASP .net Web 表单中进行编码验证的最佳实践是什么？

我想遵循被广泛接受的做法。还有比企业库更好的网络表单验证新概念。样本应该可以帮助我理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:31:13.240

您可以将 CustomValidators 用于任何事情，它们是我的最爱！

如果您使用 HTML5 属性，`required="required"`您可以免费获得客户端反馈。

您还可以利用它们来执行服务器端验证，如下所示：

```
<asp:ValidationSummary runat="server" id="vSummary" />

<asp:TextBox runat="server" id="txtReq" required="required" />
<asp:DropDownList runat="server" id="ddlReq" required="required">
    <asp:ListItem text="..." value="" />
    <asp:ListItem text="Yes" value="1" />
    <asp:ListItem text="No" value="0" />
</asp:DropDownList>

<asp:Button runat="server" id="cmdSubmit" text="Submit" /> 
```

函数背后的代码：

```
private void buildRequiredWebControls(List<WebControl> lst, Control c)
{
    if (c is WebControl)
        if (String.Compare((c as WebControl).Attributes["required"] ?? String.Empty, "required", true) == 0)
            lst.Add((c as WebControl));

    foreach (Control ch in c.Controls)
        buildRequiredWebControls(lst, ch);
}

/* --------------------------------------------- */

private Boolean addAllFieldsRequired(List<WebControl> controls)
{
    foreach (WebControl w in controls)
    {
        if (w as TextBox != null)
            if (String.IsNullOrWhiteSpace((w as TextBox).Text)) return false;

        if (w as DropDownList != null)
            if (String.IsNullOrWhiteSpace((w as DropDownList).SelectedValue)) return false;
    }
    return true;
}

/* --------------------------------------------- */

private void cmdSubmit_Click(object sender, EventArgs e)
{
    vSummary.ValidationGroup = "StackOverflow";
    Page.Validate("StackOverflow");

    List<WebControl> requiredFields = new List<WebControl>();
    this.buildRequiredWebControls(requiredFields, this);

    Page.Validators.Add(new CustomValidator()
    {
        IsValid = this.addAllFieldsRequired(requiredFields),
        ErrorMessage = "Please complete all required fields.",
        ValidationGroup = "StackOverflow"
    });

    if (Page.IsValid)
    {
        //Good to Go on Required Fields
    }
} 
```

击败非常单调的替代方案，即在每个控件之后手动将它们插入到 html 中：

```
<asp:ValidationSummary runat="server" id="vSummary" ValidationGroup="StackOverflow" />

<asp:TextBox runat="server" id="txtReq" required="required" />
<asp:RequiredFieldValidator runat="server" ControlToValidate="txtReq" ErrorMessage="Please Fill Out Required Field" Text="*" ValidationGroup="StackOverflow" />

<asp:DropDownList runat="server" id="ddlReq" required="required">
    <asp:ListItem text="..." value="" />
    <asp:ListItem text="Yes" value="1" />
    <asp:ListItem text="No" value="0" />
</asp:DropDownList>
<asp:RequiredFieldValidator runat="server" ControlToValidate="ddlReq" ErrorMessage="Please Fill Out Required Field" Text="*" ValidationGroup="StackOverflow" />

<asp:Button runat="server" id="cmdSubmit" text="Submit" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:33:43.723

我认为您希望验证更多而不是更少......除了客户端检查之外的服务器端检查是一个好主意（特别是对于面向外部的应用程序）。你要特别小心文本框。请记住，用户可以关闭脚本（并完全绕过您的客户端脚本）。

使用触发 ServerValidate 事件的自定义验证器控件来实现服务器端验证很容易。

我没有使用过企业库，所以我无法回答有关它提供的验证例程的任何信息。

# shell - rsync 只创建符号链接

> ID：11887766
> 
> 赞同：8
> 
> 时间：2012-08-09T16:23:04.860
> 
> 标签：shell, unix, rsync

我目前的 rsync 运行良好。它将我的所有文件从一个目录复制到另一个目录。唯一的事情是物理复制文件。

我有很多大文件，我不想复制所有文件。我只想在新目录中创建一个符号链接，以便我可以在网页上提供数据。源目录有一些我不希望公众看到的脚本和文件。我正在将安全数据移动到 Web 根目录（目的地）。

我希望 rsync 做的是源目录中的任何新文件都会创建到目标的链接。这样我就不会像现在这样用尽我的硬盘空间。除了对它进行符号链接方面外，我所拥有的一切都很完美。有没有办法让 rsync 跟踪并创建符号链接？

```
rsync -aP --exclude="file.sql" --exclude="*~" --exclude=".*" --exclude="*.sh" . ${destination} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-02T21:50:57.100

它不是符号链接，但您可以使用`--link-dest=DIR`. 它创建一个硬链接，该链接将为同一文件创建一个新名称。只要满足以下条件，这将类似于软链接：

*   两个文件都在同一个文件系统上
*   您不打算删除原件而不是副本（符号链接会损坏，但硬链接不会）
*   您没有任何明确的检查以查看它是否是软链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:24:30.183

lndir 对你有用吗？根据手册，它创建一个符号链接到另一个目录树的影子目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T03:12:32.830

我认为`master_delivery`这可能是最好的工具。使用已经引入`--link-dest`的 选项`rsync`，将复制不相同的文件。如果您不介意副本和硬链接混合的情况，您可以使用`rsync`，但如果您想完全消除重复，请使用`master_delivery`.

用法是：

```
gem install master_delivery
master_delivery -m <path_to_master> -d <path_to_delivery_root> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-03T08:49:57.497

您可以使用`cp -aR -s`（Linux 或 FreeBSD）或`cp --archive --recursive --symbolic-link`（Linux）在目标目录中创建指向源文件的符号链接，而不是副本。请注意，这`-s`是非标准的。

# javascript - 原型模式和“this”

> ID：11887775
> 
> 赞同：0
> 
> 时间：2012-08-09T16:23:25.887
> 
> 标签：javascript, design-patterns, this, prototype-pattern

我正在尝试使用原型模式为 Web 控件创建客户端 api。但是，我想通过不必管理“这个”来让生活更轻松。

这是一些示例代码（我已经评论了有问题的行）：

```
MyObject = function ()
{
    MyObject.initializeBase(this);

    this._someProperty = null;
};    

MyObject.prototype = {

    initialize: function()
    {
        // Init
    },

    get_someProperty: function()
    {
        return this._someProperty;
    },

    set_someProperty: function(value)
    {
        this._someProperty = value;
    },    

    doSomething: function ()
    {
        $('.some-class').each(function ()
        {
            $(this).click(this.doClick);  // this.doClick is wrong
        });
    },

    doClick: function ()
    {
        alert('Hello World');
    }
}; 
```

通常，使用显示模块模式我会声明一个私有变量：

```
var that = this; 
```

我可以用原型模式做类似的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:27:59.980

你可以做你习惯做的完全相同的事情，只需在`doSomething`方法中做：

```
doSomething: function ()
{
    var instance = this;
    $('.some-class').each(function ()
    {
        $(this).click(instance.doClick);
    });
}, 
```

这种方法与`prototype`与否无关，它只是如何使用嵌套函数管理上下文。因此，当原型（方法）上的函数在 in 中具有嵌套函数时，`this`如果您想在嵌套范围内访问它，则可能必须在任何这些级别保留上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:44:07.560

ES5`Function.prototype.bind()`可能是您的选择。你可以去

```
doSomething: function ()
{
    $('.some-class').each(function(_, node)
    {
        $(node).click(this.doClick);  // this.doClick is right
    }.bind(this));
}, 
```

现在，我们通过调用*代理*每个事件处理程序，`.bind()`因此，我们在原型对象的上下文中调用它。这里需要注意的是，您不再需要`this`引用实际的*DOM 节点*，因此我们需要使用从 jQuery 传入的参数。

# ruby-on-rails-3 - 在我所有的 Rails 视图上注入任意 Javascript

> ID：11887782
> 
> 赞同：0
> 
> 时间：2012-08-09T16:23:49.467
> 
> 标签：ruby-on-rails-3, render

我正在尝试实现一个 javascript 跟踪器，我需要在我的应用程序呈现的所有视图上任意注入，就像 newrelic 客户端工具的工作原理一样。

我的应用程序允许用户编辑他们的液体 html 模板，因此这样做的想法是以用户无法删除它的方式注入脚本（自动添加）

我查看了 newrelic gem 中的代码，但太混乱了，我想知道是否有更简单的方法来做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:09:35.477

好吧，我有一个解决方案，您可以编写一个中间件，您可以在其中检查

如果请求是针对 html 页面或（css 或 javascript）

如果请求是针对 html 页面的

在向服务器发送响应之前将 javascript 附加到 html 页面

在这里你需要非常确定你在做什么我遇到了这个问题

1.  确保您的中间件放置正确，因为开发一切都是单线程的，错误放置会导致死锁错误

2.  当 HTML 页面被考虑时，如果请求是 ajax 请求，那么你必须非常具体

希望这有帮助

# javascript - 仅在 IE8 中使用 highcharts 时会出现什么错误

> ID：11887785
> 
> 赞同：0
> 
> 时间：2012-08-09T16:23:52.397
> 
> 标签：javascript, internet-explorer, internet-explorer-8, highcharts, trim

这些图表在大多数浏览器中都可以正常工作，包括 firefox 和 Opera。但是在 IE 中我得到：

```
Object doesn't support this property or method
report_graph.js
Code: 0
URI: http://10.11.4.92:5000/assets/report_graph.js?body=1 
```

![在此处输入图像描述](../Images/d2134f7e3cf9eee79dcf4d28f3b9804d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:11:44.820

您可能正在调用 javascript 文件以及附加的查询字符串。查看：将[查询字符串样式参数传递到 Javascript 文件](https://stackoverflow.com/questions/3021737/passing-querystring-style-parameters-into-javascript-file)和[将参数传递到 JavaScript 文件](https://stackoverflow.com/questions/2190801/passing-parameters-to-javascript-files)以获得可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:55:42.220

> *这一切都归功于一些代码末尾的 `.trim() ！*

例如我有`$('some selectors).text().trim()`

更改它以`$('some selectors).text().trim()`修复它。

由于它实际上在某些浏览器中运行良好，这似乎表明 IE 中的 javascript 引擎存在实际问题。要么它不支持其他浏览器所做的方法......要么它没有优雅地处理错误，导致其他浏览器忽略错误的运行时异常。

# ios - iOS - 有没有办法以单声道播放 iPod 音乐？

> ID：11887787
> 
> 赞同：1
> 
> 时间：2012-08-09T16:24:04.137
> 
> 标签：ios, audio

我正在尝试从 iPod 播放音乐，它工作正常。问题是，我如何让它在 MONO 而不是 Stereo 中播放？

我唯一的代码是标准

```
- (IBAction)playsong:(id)sender
{
    MPMediaPickerController *c = [[MPMediaPickerController alloc]init];
    [c setDelegate:self];
    [self presentModalViewController:c animated:YES];
    [c autorelease];
}

-(void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection
{
    if(mediaItemCollection)
    {
        [[MPMusicPlayerController iPodMusicPlayer] setQueueWithItemCollection: mediaItemCollection];
        [[MPMusicPlayerController iPodMusicPlayer] play];
    }
    [mediaPicker dismissModalViewControllerAnimated:YES];

} 
```

在 iOS 的设置应用程序中，有一个将声音设置为 MONO 的选项，可以通过其他应用程序以编程方式访问吗？

# perl - CVS 文件位置在 Perl 中是否有效？

> ID：11887789
> 
> 赞同：0
> 
> 时间：2012-08-09T16:24:12.687
> 
> 标签：perl, cvs

有什么方法可以找出 CVS 中是否存在 partiualr 文件？我不想检查该文件，只想通过 Perl 查看该文件是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:46:27.173

You can use `cvs status` command to check. Either

1.  call that directly via a system call

    ```
    my @output = `cvs status $filename`; 
    ```

    you can either heuristically grep the resulting text for `",v"` string (that always is the suffix for CVS repository file), or actually parse the output looking for "Repository revision:" line

    ```
     MISSING: Repository revision: No revision control file
       PRESENT: Repository revision: 10.41   /u1/cvs/dev/myscript.pl,v 
    ```

2.  or use `Cvs` module:

    ```
    use Cvs; 
    my $cvs = new Cvs("/u1/cvs", cvsroot => $ENV{CVSROOT}, password =>"*****") 
        or die $Cvs::ERROR; 
    my $status = $cvs->status("CVS_file"); 
    print $status->status() . "\n";

    ====> Needs Checkout

    my $status = $cvs->status("bogus_file"); 
    print $status->status() . "\n";

    ====> Unknown 
    ```

# jquery - jQuery 验证 - 需要标准但也是一个警告

> ID：11887790
> 
> 赞同：0
> 
> 时间：2012-08-09T16:24:12.587
> 
> 标签：jquery, validation

我有一个网页，其唯一的输入是采购订单。他们必须输入采购订单，并且必须包含字母、数字、破折号、下划线和/或句点，并且长度必须在 2 到 15 个字符之间。我相信我可以使用我继承的代码进行所有这些工作（我是 jQuery 新手）。

但是，如果所有这些测试都通过了，我还需要对我们的数据库进行远程测试，以查看用户的公司是否已经使用了该 PO。如果他们有，我需要警告他们并让他们选择输入不同的值或提交输入的值。这就是我卡住的地方。

```
$(document).ready(function(){
$.validator.addMethod("noSpecialChars", function(value, element) {
    return this.optional(element) || /^[a-zA-Z0-9-_.]+$/i.test(value);
}, "Ignored");

jQuery.validator.messages.required = "";
$("#form1").validate({
    invalidHandler: function(e, validator) {
        var errors = validator.numberOfInvalids();

        if (errors) {
            var message = errors == 1
                ? 'PO must contain only letters, numbers, dashed, underscores or periods and must be between 2 and 15 characters long.'
                : 'You missed ' + errors + ' fields.  They have been highlighted below';
            $("div.productError span").html(message);
            $("div.productError").show();
        } else {
            $("div.productError").hide();
        }
    },

    onkeyup: false,
    submitHandler: function(form) {
        $("div.productError").hide();
        form.submit();
    },

    rules: {
        po_number: {
            required: true,
            noSpecialChars: true,
            rangelength:[2,15]
        }
    },

    messages: {
        po_number: {
            required: 'blah',
            noSpecialChars: 'blah',
            rangelength: 'blah'
        }
    },
    debug:true
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:38:22.150

我现在清楚多了。

考虑到您的评论并阅读一些文档，我建议对`.submitHandler`.

查看文档，仅当表单实际有效时才调用该回调，即在您的检查返回 true 之后。然后，在提交表单之前，您可以执行另一次检查，如果也返回 true，请提交表单。否则弹出您需要对客户说的任何内容。

从文档：

> **表单有效时**处理实际提交的回调。获取表单作为唯一参数。**替换默认提交**。验证后通过 Ajax 提交表单的正确位置。

第二个粗体部分让我对您的代码有点怀疑......您似乎再次重新提交您的表单，从而将其传递给另一个验证。也许我弄错了那部分。如果是这样，我很抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:41:22.207

如果您使用的是 jquery 验证器插件，那么您可以轻松地使用[远程方法](http://docs.jquery.com/Plugins/Validation/Methods/remote)来执行此操作

# java - Google App Engine：并发请求及其处理程序

> ID：11887791
> 
> 赞同：1
> 
> 时间：2012-08-09T16:24:13.477
> 
> 标签：java, google-app-engine, concurrency

您可以使用以下方式配置您的 Java GAE 应用程序：

> <threadsafe>真</threadsafe>

允许您的应用实例同时响应 HTTP 请求以获得更好的性能。我的问题是：将此属性设置为的编码后果是什么`true`？我是否需要通过实现所有 HTTP 请求处理程序`Runnable`并让它们利用最佳并发编程实践来使它们并发？

如果不是，那么使用此选项的真正好处是什么？有 10 个实例处理 10 个不同的 HTTP 请求，或 1 个并行实例处理 10 个并发 HTTP 请求有什么区别？最后，我最终不会被同样收费吗？还是我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:31:22.720

对于具有 10 个实例的初学者，您的成本是单个实例的 10 倍（以实例小时计），您应该尽量减少您的实例使用量。

使用线程安全时您需要注意的主要事情是您的代码将是线程安全的。不要在没有锁的情况下访问全局变量（或者尽量避免全局变量和锁一起使用）。

# java - Scala“对象”变量在java中不可见吗？

> ID：11887792
> 
> 赞同：1
> 
> 时间：2012-08-09T16:24:18.533
> 
> 标签：java, scala, scala-java-interop

> **可能重复：**
> [从java访问scala对象字段](https://stackoverflow.com/questions/7788363/accessing-scala-object-fields-from-java)

我有这个 scala 对象

```
object Foo {
  val TOTAL = 10
  def totalMethod = 10
} 
```

当我在java代码上这样做时：

```
System.out.println(Foo.totalMethod()); 
```

它有效，但是当我这样做时

```
System.out.println(Foo.TOTAL); 
```

它没有：

```
 [error] /Users/pfernand/Projects/foo/Whatever.java:23: cannot find symbol
    [error] symbol  : variable TOTAL
    [error] location: class Foo
    [error]         System.out.println(Foo.TOTAL);
    [error] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:27:27.033

Scala 编译器生成一个带有字段名称的无参数方法。您可以使用

```
System.out.println(Foo.TOTAL()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:26:40.560

尝试

```
System.out.println(Foo.TOTAL()); 
```

Scala 将字段设为私有并提供“getter”方法（使用相同的名称）进行访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:26:57.040

以上将创建一个 getter，您应该可以使用`Foo.TOTAL()`. 无法直接从 Java、AFAIK 访问该字段。

# vba - 在工作簿打开时自动将工作表之间的行复制到最后一行

> ID：11887795
> 
> 赞同：0
> 
> 时间：2012-08-09T16:24:35.747
> 
> 标签：vba, excel

两个星期以来，我一直在尝试编写一个能够执行以下操作的代码：将工作表的前 21 行“时间卡”复制并插入到同一张工作表底部的第一个空白行中“时间卡。” 我还希望，一旦复制了行，包含刚刚复制的选择日期（在工作表底部）的单元格将被选中，这样用户就不必向下滚动 6500 行。

代码必须选择工作表（“时间卡”），复制选择 C3:N23，并将选择粘贴到工作表底部的最后一个和第一个空白行（“时间卡”）。然后必须自动选择包含“日期”的单元格（在刚刚粘贴的选择中）（编写代码来搜索“日期”的范围？）。完成所有操作后，我想要一个链接到宏按钮的代码，用户可以单击该代码以清除数据验证，以便在新粘贴的单元格中仅保留公式，并且所有 VLOOKUPS 和数据验证都有被清除。

拜托，有人可以请帮我写一个代码。我真的做了很多研究，尝试了几种不同的方法，但都没有成功。我不是很精通 VBA，所以任何帮助将不胜感激。

这是我的第一次尝试：

```
Sub CopyInfo()

On Error GoTo Err_Execute

    Sheets("Time Cards").Select
    Cells(Rows.Count, ActiveCell.Column).End(xlUp).Offset(1, 0).Select

    Sheets("TC-Start Here").Select
    Range("C5:N25").Select
    Selection.Copy

    Sheets("Time Cards").Select
    'Range("C5:N25").Select
    Selection.Insert

Err_Execute:
    MsgBox "The Data has been successfully Copied"

End Sub 
```

然后我尝试选择最后一行并粘贴（第二次尝试）：

```
Sub CopyInfo()

On Error GoTo Err_Execute

    Sheets("Time Cards").Select
    Cells(Rows.Count, ActiveCell.Column).End(xlUp).Offset(1, 0).Select

    Sheets("TC-Start Here").Select
    Range("C5:N25").Select
    Selection.Copy

    Sheets("Time Cards").Select
    Cells(Application.Rows.Count, 1).End(xlUp).Offset(1, 0).Select
    Selection.Insert Shift:=xlDown

    Sheets("Time Cards").Select
    'Range("C5:N25").Select
    Selection.Insert

Err_Execute:
    MsgBox "The Data has been successfully Copied"

End Sub 
```

它似乎不起作用，我永远无法让它选择包含日期的单元格，也无法清除验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:50:29.500

我认为这是您想要的，如果不是，请进一步澄清您的问题

```
 Dim lrow as long
    lrow = sheets("time cards").range("C5").end(xlup).row + 1
    sheets("TC-Start Here").range("C5:N25").copy
    sheets("time cards").range("C" & lrow).pastespecial paste:=xlpastevalues, _
                                                        operation:=xlnone, _
                                                        skipblanks:=False, _
                                                        Transpose:=false
    sheets("time cards").range("C5").end(xlup).select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:23:28.330

```
Sub CopyInfo()

    With Sheets("Time Cards")
         .Range("C5:N25").Copy .Cells(Rows.Count,3).End(xlUp).Offset(1, 0)
         .Cells(Rows.Count,3).End(xlUp).Select
    End With
    'need some info on exactly what should be cleared from the copied range...
    MsgBox "The Data has been successfully Copied"

End Sub 
```

# iphone - 在iphone中发布json请求

> ID：11887797
> 
> 赞同：0
> 
> 时间：2012-08-09T16:24:37.597
> 
> 标签：iphone, objective-c, ios, ios5, jersey

我有一个 mySQL 数据库、一个 iPhone 客户端和一个 RESTful Web 服务（使用 jersey）作为它们之间的中间层。我成功连接到数据库并实现了一个`GET`请求。我有问题`POST`。

通过这种方式，我准备 JSON 传输：

```
NSDate *date = self.pickerView.date;
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd"];
NSString *stringFromDate = [formatter stringFromDate:date];
[formatter release];

NSArray *keys = [NSArray arrayWithObjects:@"name", @"mail",@"password",@"mobil", @"birth", @"city" , nil];
NSArray *objects = [NSArray arrayWithObjects:name.text, mail.text, password.text, mobil.text, stringFromDate, city.text, nil];
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

NSError *error; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:&error];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"%@", jsonString); 
```

我尝试了两种方法`POST`，但都没有成功。

**1）**使用JSON NSString：

```
NSURL *url = [NSURL URLWithString:@"http://192.168.1.100:8080/rest/login/post"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

   NSData *requestData = [NSData dataWithBytes:[jsonString UTF8String] length:[jsonString length]];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: requestData];

    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

**2）**使用NSData：

```
NSMutableURLRequest * urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://192.168.1.100:8080/rest/login/post"]];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:jsonData];
NSURLConnection * myConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES]; 
```

我的代码中也有这种方法：

```
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSMutableData *d = [[NSMutableData data] retain];
    [d appendData:data];
    NSString *a = [[NSString alloc] initWithData:d encoding:NSASCIIStringEncoding];
    NSLog(@"Data: %@", a);
} 
```

我在控制台中收到此错误：

```
 Data: <html><head><title>Apache Tomcat/7.0.23 - Error report</title><style><!--
H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-
size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-
color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-
serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-
family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-
family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-
family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color :
 black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status
 406 - Not Acceptable</h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p>
<b>message</b> <u>Not Acceptable</u></p><p><b>description</b> <u>The resource identified by 
this request is only capable of generating responses with characteristics not acceptable 
according to the request "accept" headers (Not Acceptable).</u></p><HR size="1" 
noshade="noshade"><h3>Apache Tomcat/7.0.23</h3></body></html> 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:36:37.090

回复说，它不喜欢这样

```
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"]; 
```

所以它不提供用 json 响应。

Web 服务的文档应该列出所有可能的值。

你可能想试试

```
[request setValue:@"application/xml" forHTTPHeaderField:@"Accept"]; 
```

或者重新配置 tomcat 以接受 json 作为响应格式。

# java - 如何使用 Mockito 在 java 中模拟 new Date()

> ID：11887799
> 
> 赞同：49
> 
> 时间：2012-08-09T16:24:44.603
> 
> 标签：java, unit-testing, junit, mocking, mockito

我有一个使用当前时间进行一些计算的函数。我想用 mockito 来模拟它。

我想测试的类的一个例子：

```
public class ClassToTest {
    public long getDoubleTime(){
        return new Date().getTime()*2;
    }
} 
```

我想要类似的东西：

```
@Test
public void testDoubleTime(){
   mockDateSomeHow(Date.class).when(getTime()).return(30);
   assertEquals(60,new ClassToTest().getDoubleTime());
} 
```

可以嘲笑吗？我不想更改“已测试”代码以便进行测试。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-09T16:34:57.767

正确的做法是重构您的代码，使其更具可测试性，如下所示。重构您的代码以删除对 Date 的直接依赖将允许您为正常运行时和测试运行时注入不同的实现：

```
interface DateTime {
    Date getDate();
}

class DateTimeImpl implements DateTime {
    @Override
    public Date getDate() {
       return new Date();
    }
}

class MyClass {

    private final DateTime dateTime;
    // inject your Mock DateTime when testing other wise inject DateTimeImpl

    public MyClass(final DateTime dateTime) {
        this.dateTime = dateTime;
    }

    public long getDoubleTime(){
        return dateTime.getDate().getTime()*2;
    }
}

public class MyClassTest {
    private MyClass myClassTest;

    @Before
    public void setUp() {
        final Date date = Mockito.mock(Date.class);
        Mockito.when(date.getTime()).thenReturn(30L);

        final DateTime dt = Mockito.mock(DateTime.class);
        Mockito.when(dt.getDate()).thenReturn(date);

        myClassTest = new MyClass(dt);
    }

    @Test
    public void someTest() {
        final long doubleTime = myClassTest.getDoubleTime();
        assertEquals(60, doubleTime);
    }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-05-23T17:06:16.770

如果您有无法重构且不想影响的遗留代码，请`System.currentTimeMillis()`尝试使用`Powermock`和`PowerMockito`

```
//note the static import
import static org.powermock.api.mockito.PowerMockito.whenNew;

@PrepareForTest({ LegacyClassA.class, LegacyClassB.class })

@Before
public void setUp() throws Exception {

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    sdf.setTimeZone(TimeZone.getTimeZone("PST"));

    Date NOW = sdf.parse("2015-05-23 00:00:00");

    // everytime we call new Date() inside a method of any class
    // declared in @PrepareForTest we will get the NOW instance 
    whenNew(Date.class).withNoArguments().thenReturn(NOW);

}

public class LegacyClassA {
  public Date getSomeDate() {
     return new Date(); //returns NOW
  }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-09T20:13:29.390

您*可以*通过使用[PowerMock](http://code.google.com/p/powermock/wiki/MockitoUsage)来做到这一点，它增强了 Mockito 以模拟静态方法。然后你可以[mock`System.currentTimeMillis()`](http://code.google.com/p/powermock/wiki/MockSystem)，这是`new Date()`最终获得时间的地方。

你*可以*。我不会就你是否*应该*提出意见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T16:49:02.920

一种不直接回答问题但可能解决潜在问题（具有可重复测试）的方法是允许`Date`作为测试参数并将委托添加到默认日期。

像这样

```
public class ClassToTest {

    public long getDoubleTime() {
      return getDoubleTime(new Date());
    }

    long getDoubleTime(Date date) {  // package visibility for tests
      return date.getTime() * 2;
    }
} 
```

在生产代码中，您使用`getDoubleTime()`和测试`getDoubleTime(Date date)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-28T03:11:31.137

你也可以使用 jmockit 来模拟 new Date()：

```
 @Test
    public void mockTime() {
        new MockUp<System>() {
            @Mock
            public long currentTimeMillis() {
                // Now is always 11/11/2021
                Date fake = new Date(121, Calendar.DECEMBER, 11);
                return fake.getTime();
            }
        };
        Assert.assertEquals("mock time failed", new Date(121, Calendar.DECEMBER, 11), new Date());
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-02T14:20:24.593

`new Date()`使用和`System.currentTimeMillis()`使用 PowerMockito的工作示例。
这是[Instance](https://stackoverflow.com/questions/2001671/override-java-system-currenttimemillis-for-testing-time-sensitive-code/66920829#66920829)的示例。

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(LegacyClass.class) // prepares byte-code of the LegacyClass
public class SystemTimeTest {

    private final Date fakeNow = Date.from(Instant.parse("2010-12-03T10:15:30.00Z"));

    @Before
    public void init() throws Exception {
        // mock new Date()
        PowerMockito.whenNew(Date.class).withNoArguments().thenReturn(fakeNow);
        System.out.println("Fake now: " + fakeNow);

        // mock System.currentTimeMillis()
        PowerMockito.mockStatic(System.class);
        PowerMockito.when(System.currentTimeMillis()).thenReturn(fakeNow.getTime());
        System.out.println("Fake currentTimeMillis: " + System.currentTimeMillis());
    }

    @Test
    public void legacyClass() {
        LegacyClass legacyClass = new LegacyClass();
        legacyClass.methodWithNewDate();
        legacyClass.methodWithCurrentTimeMillis();
    }

}

class LegacyClass {

    public void methodWithNewDate() {
        Date now = new Date();
        System.out.println("LegacyClass new Date() is " + now);
    }

    public void methodWithCurrentTimeMillis() {
        long now = System.currentTimeMillis();
        System.out.println("LegacyClass System.currentTimeMillis() is " + now);
    }

} 
```

控制台输出

```
Fake now: Fri Dec 03 16:15:30 NOVT 2010
Fake currentTimeMillis: 1291371330000
LegacyClass new Date() is Fri Dec 03 16:15:30 NOVT 2010
LegacyClass System.currentTimeMillis() is 1291371330000 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-04-10T10:14:29.177

```
Date now = new Date();    
now.set(2018, Calendar.FEBRUARY, 15, 1, 0); // set date to 2018-02-15
//set current time to 2018-02-15
mockCurrentTime(now.getTimeInMillis());

private void mockCurrentTime(long currTimeUTC) throws Exception {
    // mock new dates with current time
    PowerMockito.mockStatic(Date.class);
    PowerMockito.whenNew(Date.class).withNoArguments().thenAnswer(new Answer<Date>() {

        @Override
        public Date answer(InvocationOnMock invocation) throws Throwable {
            return new Date(currTimeUTC);
        }
    });

    //do not mock creation of specific dates
    PowerMockito.whenNew(Date.class).withArguments(anyLong()).thenAnswer(new Answer<Date>() {

        @Override
        public Date answer(InvocationOnMock invocation) throws Throwable {
            return new Date((long) invocation.getArguments()[0]);
        }
    });

    // mock new calendars created with time zone
    PowerMockito.mockStatic(Calendar.class);
    Mockito.when(Calendar.getInstance(any(TimeZone.class))).thenAnswer(new Answer<Calendar>() {
        @Override
        public Calendar answer(InvocationOnMock invocation) throws Throwable {
            TimeZone tz = invocation.getArgumentAt(0, TimeZone.class);
            Calendar cal = Calendar.getInstance(tz);
            cal.setTimeInMillis(currTimeUTC);
            return cal;
        }
    });
} 
```

# perl - 匹配一行并打印上面的行

> ID：11887801
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:25:02.070
> 
> 标签：perl, pattern-matching, match

代码 ：

```
#!/usr/bin/perl

my $file = $ARGV[0];
my $position = $ARGV[1]; # POSITION OF THE RESIDUE

open (FILE, $file);

while (<FILE>) {
my @f = split;
if (($f[0] == "ANNOT_RESID_NO") && ($f[1] == $position)){
    push @line, $_;
}
}
print @line;
close(FILE); 
```

输入 ：

```
ANNOT_TYPE[1] 0
ANNOT_TYPE_NAME[1] CATRES
ANNOT_NUMBER[1][1] 1
ANNOT_NAME[1][1] 3.1.3.16
ANNOT_DESC[1][1] Phosphoprotein phosphatase.
ANNOT_RESID_NO[1][1][1] 91
ANNOT_RESID_NAME[1][1][1] ASP
ANNOT_RESID_NUM[1][1][1]   95 
ANNOT_RESID_NO[1][1][2] 92
ANNOT_RESID_NAME[1][1][2] ARG
ANNOT_NRESID[1][1] 6
ANNOT_NUMBER[1][2] 2
ANNOT_NAME[1][2] 3.1.3.53
ANNOT_DESC[1][2] [Myosin-light-chain] phosphatase.
ANNOT_RESID_NO[1][2][1] 91
ANNOT_RESID_NAME[1][2][1] ASP
ANNOT_RESID_NUM[1][2][1]   95 
ANNOT_RESID_NO[1][2][2] 92
ANNOT_RESID_NAME[1][2][2] ARG 
```

问题 ：

对于以“ANNOT_RESID_NO”开头的行，我正在打印带有 $position（例如 91）的行。除了这一行，我还想每次在@line 中打印包含“ANNOT_DESC”的匹配上方的第一行。这个“ANNOT_DESC”行不一定总是刚好在我匹配的行上方的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:48:27.420

尝试（完整代码）：

```
#!/usr/bin/perl

use strict;
use warnings;

my $file = $ARGV[0];
my $position = $ARGV[1];

open (FILE, $file) or die $!;

my $desc;

my @line;

while (<FILE>) {
    my @f = split " ";

    if ( $f[0] =~ /^ANNOT_DESC/ ) {
        $desc = $_;
        next;
    }

    if ( $f[0] =~ /^ANNOT_RESID_NO/  and $f[1] == $position ) {
        push @line, $desc, $_;
    }
} 
```

输出：

```
ANNOT_DESC[1][1] Phosphoprotein phosphatase.
ANNOT_RESID_NO[1][1][1] 91
ANNOT_DESC[1][2] [Myosin-light-chain] phosphatase.
ANNOT_RESID_NO[1][2][1] 91 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:40:50.777

使用这么小的数据集，您可以将文件中的行推送到数组（例如 @file_data），迭代 @file_data 数组并将所需的值推送到 @line 数组中。

# php - 从 Unix 使用 WebDav 协议上传文件

> ID：11887805
> 
> 赞同：0
> 
> 时间：2012-08-09T16:25:26.113
> 
> 标签：php, webdav

我需要将文件从我的 Unix 机器传输到 Windows 机器。问题是我可以将已经在我的机器上创建的文件通过 ftp 从 unix 传输到任何机器。我也可以打开 webdav 连接创建新文件并将其保存在那里。

我无法做的是编写我的代码以使用 webdav 从我的本地位置上传我的文件。

我尝试使用 pear 客户端，但由于缺乏文档，我仍然无法完成任务。

这是我的尝试：

```
include("/usr/share/pear/HTTP/WebDAV/Client.php");
global $filename, $logger;
    try {
     /*   $client = new HTTP_WebDAV_Client();
        $user="username";
        $pass = "pwd";
        $dir = "webdavs://".$user.":".$pass."@hostname/";
        var_dump($client->stream_open($dir."test4.txt","w",null,$path));
        $client->stream_write("HELLO WORLD! , I am great ");
        $client->stream_close();
        $client->dir_opendir($dir,array());
        var_dump($client->dirfiles);

        $req =new HTTP_Request($dir);
        $req->setBasicAuth($user, $pass);
        $req->setMethod(HTTP_REQUEST_METHOD_POST);

        $result = $req->addFile('file_upload_field', $filename);
        if (PEAR::isError($result)) {
            echo $result->getMessage();
        } else {

            $response = $req->sendRequest();

            if (PEAR::isError($response)) {
                echo $response->getMessage();
            } else {
                echo $req->getResponseBody();
            }
        }*/

        $ftp_server = "hostname-ftp";
        //$ftp_server = "hostname-webdav";
        $connection = ftp_connect($ftp_server);
        ftp_login($connection, 'user', 'pwd);
        ftp_put($connection, $filename, $filename, FTP_BINARY);
        unlink($filename);
    } catch(Exception $e){
        $message = "There was a problem while uploading" . $filename;
        $logger->error($message);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:51:18.347

这是一个艰难的电话，但我想通了。我正在添加我的代码片段，因此它可能对某人有所帮助。我没有上传文件，而是将该文件转换为数据流，然后将该数据流复制到我的调用中，该调用在 webdav 服务器上写入流。

```
try {
        $filecsv = file_get_contents($filename);
        $client = new HTTP_WebDAV_Client_Stream();
        $user="user";
        $pass = "pass";
        $dir = "webdavs://".$user.":".$pass."@hostname/";

        $client->stream_open($dir."db_user_exports.csv","w",null,$path);
        $client->stream_write($filecsv);
        $client->stream_close();
        unlink($filename);

    } catch(Exception $e){
        $message = "There was a problem while uploading" . $filename;
        $logger->error($message);
    } 
```

# python - Scapy：伪造数据包时要重新计算的字段

> ID：11887811
> 
> 赞同：2
> 
> 时间：2012-08-09T16:25:43.460
> 
> 标签：python, tcp, udp, ip, scapy

我正在使用 Scapy 伪造我捕获的某些数据包中 IP 标头中的 TTL 值。除了 IP 和传输层标头中的校验和之外，还有什么我应该重新计算的吗？

现在我正在做：

```
for p in myPackets:
    p[IP].ttl = targetTTL
    del(p[IP].chksum)
    del(p[IP].payload.chksum) 

for i in range(len(myPackets)):
    myPackets[i] = myPackets[i].__class__(str(myPackets[i])) 
```

我之所以问这个问题是因为 Scapy 的`sr`函数将数据包与其响应（在我的情况下为 ICMP）相匹配，一直在返回具有几个 RTT > 1 秒的数据，这很荒谬，因为我使用的是 ttl=1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:50:01.427

您是否尝试过仅发送数据包？Scapy 应该自动为您重新计算校验和。您也可以尝试将它们设置为 None，但我认为这没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:17:26.430

如果您在数据包上调用 show2() 命令，我相信 scapy 会自动重新计算校验和。因此，如果您在对象 pckt 的索引 0 处有一个数据包，您应该调用 pckt.show2() 并且校验和应该是正确的。至少这是我的理解。

> pkt.show2() 与 show 相同，但在组装数据包上（例如计算校验和）[来源](http://www.secdev.org/projects/scapy/doc/usage.html)

# java - 强制执行 Maven 皮肤依赖项

> ID：11887812
> 
> 赞同：1
> 
> 时间：2012-08-09T16:25:48.713
> 
> 标签：java, maven, dependencies, maven-3, skin

我想为我的基于 Maven 的项目使用[Fluido 皮肤。](http://maven.apache.org/skins/maven-fluido-skin/)如果我只在失败中添加它，`src/site/site.xml`因为`mvn site`工件丢失了。它要求手动安装工件，但我想为我的同事避免这一步。

我已将以下依赖项添加到我的`pom.xml`：

```
<dependency>
  <groupId>org.apache.maven.skins</groupId>
  <artifactId>maven-fluido-skin</artifactId>
  <version>1.2.2</version>
</dependency> 
```

它似乎有效：当我这样做时，maven 会自动下载皮肤`mvn site`。但是我不希望我的项目被标记为该工件的依赖项；在编译、测试等过程中，我不希望该包位于类路径中。

我没有看到任何会限制依赖的[依赖范围](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html#pom-relationships-sect-dependency-scope)`site:site`。

我错过了一些关于依赖范围的东西吗？对这种关系使用依赖是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:56:16.023

我没有时间自己尝试，但我认为以下应该可行：

```
<project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-site-plugin</artifactId>
        <dependencies>
          <dependency>
            <groupId>org.apache.maven.skins</groupId>
            <artifactId>maven-fluido-skin</artifactId>
            <version>1.2.2</version>
          </dependency>
        </dependencies>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

# django - 将 Django Log 消息存储在数据库中？

> ID：11887816
> 
> 赞同：18
> 
> 时间：2012-08-09T16:26:03.003
> 
> 标签：django, logging

Django（python web 框架）使用 python 的日志系统来存储日志。

有没有一种简单的方法可以将日志消息存储在数据库中，然后允许管理员用户通过网络查看它们？这是我可以自己写的东西，但没有必要重新发明轮子。我不想记录异常，但我已添加到代码中的 info/debug/notice 类型的消息。

理想情况下，我希望能够在完成后存储有关日志消息的元数据（如远程 IP 地址、用户代理、wsgi 进程 ID 等），然后基于此过滤/浏览（即显示所有日志过去 24 小时内来自此 IP 地址的消息）。有人做过吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T16:30:15.483

只需使用[Sentry](https://getsentry.com/for/django/)。[Raven](https://github.com/getsentry/raven-python)是 Django 功能的一部分，它与日志框架挂钩，因此除了从您的应用程序收集错误之外，任何自定义日志消息也应该显示出来。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-25T13:36:52.520

除了 Sentry 的明显选择之外，为了练习，在“James Lin 博客”中有一篇名为“ [Creating custom log handler that logs to database models in django](http://james.lin.net.nz/2012/09/19/creating-custom-log-handler-that-logs-to-database-models-in-django/) ”的不错的博客文章，它简要解释了如何使用第二个数据库，带有代码示例。

代码改编自标准 Python RotatingFileHandler：

> ... RotatingFileHandler 允许您指定要写入和旋转文件的文件，因此我的 DBHandler 还应该允许您指定要插入的模型并在设置中指定到期时间，最重要的是，在独立应用程序上。

这也可以很容易地适应使用单个数据库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-03T08:03:31.897

检查 django-db-logger

整合不到一分钟

[https://github.com/CiCiUi/django-db-logger](https://github.com/CiCiUi/django-db-logger)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-01T18:55:50.443

尝试 django 请求。我已经尝试过了，它基本上只是将请求日志放在一个名为 requests 的表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-28T18:38:19.947

您可以查看我在[此处](https://stackoverflow.com/questions/2314307/python-logging-to-database/67305494#67305494)发布的一个很好的解决方案。您只需要一个字符串连接即可连接到您的数据库。例如，如果您使用 MySQL，则连接字符串应为：

```
# mysqlclient
'mysql+mysqldb://username:password@host:port/database' 
```

或者

```
# PyMySQL
'mysql+pymysql://username:password@host:port/database') 
```

然后您可以使用[PhpMyAdmin](https://www.phpmyadmin.net/)作为“MySQL Web 管理工具”，通过 Web 浏览器或[DataGrip](https://www.jetbrains.com/datagrip/)（我的偏好）查看数据库以远程访问任何数据库。

* * *

要在 Django 中使用处理程序，您只需将处理程序类添加到 setting.py 的 LOGGING 变量中，如下所示：

```
level = 'INFO' if DEBUG else 'WARNING'  # I prefer INFO in debugging mode and WARNING in production
handler = ['log_db_handler', ]  # In production I rarely check the server to see console logs
if DEBUG:
    handler.append('console')

LOGGING = {'version': 1,
           'disable_existing_loggers': False,

           'formatters': {'verbose': {'format': '{levelname} {message}',  # {asctime} {module} {process:d} {thread:d}
                                      'style': '{', }, },

           'handlers': {'log_db_handler': {'level': level,
                                           'class': 'db_logger.handlers.DBHandler',
                                           'formatter': 'verbose', },
                        'console': {'class': 'logging.StreamHandler', }},

           'loggers': {'db_log': {'handlers': handler,
                                  'level': level,
                                  'propagate': False, },
                       'django': {'handlers': handler,
                                  'level': level,
                                  'propagate': True, },
                       'django.request': {'handlers': handler,
                                          'level': level,
                                          'propagate': True, }}} 
```

请注意，“db_logger.handlers.DBHandler”指向处理程序类。

# joomla - 在工具栏按钮 joomla 2.5 中执行操作（任务）

> ID：11887823
> 
> 赞同：0
> 
> 时间：2012-08-09T16:26:32.623
> 
> 标签：joomla, joomla2.5, jtoolbar

我正在尝试修改 com_phocamaps 以添加“复制标记”操作。我已经在 com_phocamaps/views/phocamapsmarkers/view.html.php 中使用这一行创建了按钮修改函数**addToolbar**，**但**我不知道我必须在哪里设置操作以执行 de COPY 任务。当我单击这个新按钮时，Joomla 会抛出 500 错误。`JToolBarHelper::customX( 'phocamapsmarker.copy', 'copy.png', 'copy_f2.png', 'Copy Marker' );`

 **我想实现一个小函数来复制标记并设置**Publish = 0**来更改地图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:58:25.893

您需要在控制器中编写该功能

转到管理员\components\com_phocamaps\controllers\phocamapsmarker.php

并编写此函数

```
function copy(){
    // your code here 
} 
```**

# c# - .NET 数据模型显示为 XML 而不是图表

> ID：11887833
> 
> 赞同：8
> 
> 时间：2012-08-09T16:27:02.547
> 
> 标签：c#, model, entity, diagram, edmx

那是。我格式化我的电脑并重新安装整个环境，但我看不到数据模型图。我的意思是，我打开数据模型（edmx 文件）并在 XML 文件中看到所有数据库表和数据库信息。不是图。

我安装了vs2010 sp1，net framework 4，micro net framework 4.1，entity framework 4.1

我不知道我错过了什么。你能帮助我吗？

没有它，我无法更新模型。

这似乎很容易，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T17:54:18.340

如果您在 Visual Studio 的解决方案资源管理器中使用“鼠标右键单击->打开方式...”打开 EDMX 文件...

![在此处输入图像描述](../Images/f8f6cee2a919d99dda3283d7eccb7479.png)

...您在以下对话框中看到了什么？它应该是这样的：

![在此处输入图像描述](../Images/e3f53f6b740134f816d25091b64a5489.png)

如果在您的情况下看起来像“默认”（= 双击 EDMX 文件时的格式）是 XML 编辑器之一。它应该是“ADO.NET 实体数据模型设计器”。您可以通过选择列表框中的行，然后单击右侧的“设为默认值”将其设为默认值。

# ios - 基于布尔值的 NSThread While 循环 - 音乐播放器启动/停止 - IOS

> ID：11887834
> 
> 赞同：0
> 
> 时间：2012-08-09T16:27:03.007
> 
> 标签：ios, multithreading, playback, nsthread

我正在尝试创建具有启动/停止功能的音乐播放器。我通过启动一个 while 循环来做到这一点，如果布尔值为 true，则该循环会循环。此 while 循环包含在单独的线程中。我在 viewDidLoad 方法中启动这个线程：

```
[[CoreDataHelper getEditableSong].audioPlayer playOrStopSong]; 
```

playOrStopSong 看起来像这样：

```
- (void) playOrStopSong {
NSLog(@"%d --- before switch", playing);
if (playing) {
    playing = NO;
}
else{
    playing = YES;
    [NSThread detachNewThreadSelector:@selector(run) toTarget:self withObject:nil];
}
NSLog(@"%d --- after switch", playing); 
```

}

我的运行方法看起来像这样（其中大部分可能并不重要）：

```
- (void) run {
@autoreleasepool {
    [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(handleTimer:) userInfo:nil repeats:NO];
    xPlayPosition = 0;
    NSLog(@"thread started!");
    while (playing) {
        NSLog(@"lots of playings -- %d", playing);
        NSMutableDictionary *notesAtCurrentX = [song.noteDict objectForKey:[NSNumber numberWithInt:xPlayPosition]];
        if (notesAtCurrentX != nil) {
            NSString *currentTemplate = [song.soundTemplate objectAtIndex:(NSUInteger) (xPlayPosition/NOTES_PER_TEMPLATE)];
            [self playColumnWithTemplate:currentTemplate andNotesAtCurrentX:notesAtCurrentX andCurrentX:xPlayPosition];
        }
        [NSThread sleepForTimeInterval:30/[song.tempo floatValue]];
        xPlayPosition += 1;
        if (xPlayPosition > [song.length intValue]-1) {
            xPlayPosition = 0;
            [myComposeViewController performSelectorOnMainThread: @selector(animatePlaybackLine) withObject:nil waitUntilDone:NO];
        }
    }
    NSLog(@"thread stopped!");
    [NSThread exit];
} 
```

}

该线程像预期的那样分离并运行。日志打印如下：

```
0 --- before switch
thread started!
1 --- after switch 
```

然后继续打印“很多次播放——1次”。

但是当我再次尝试调用 playOrStopSong 方法时，我并没有停止线程，而是得到了一个新的。日志如下所示：

```
lots of playings1 -- 1
lots of playings1 -- 1
0 --- before switch
1 --- after switch
thread started!
lots of playings1 -- 1
after click on stop --- 1
lots of playings1 -- 1
lots of playings1 -- 1 
```

它说它正在播放（很多播放1 - 1），但它说它没有播放（0 --- 在切换之前）。这几乎肯定是问题所在。我哪里做错了？如果它有助于回答这个问题，那么知道我认为我在项目的早期版本中已经完成了这项工作可能会有所帮助。（虽然现在看来不可信……）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:41:49.850

您的跟踪显示旧线程永远不会停止，但会启动一个新线程。这表明您正在新创建的（未运行的）audioPlayer 上调用 playOrStopSong，而不是您之前实际启动的那个。

我无法从问题中的代码中看到 audioPlayer 的生命周期是什么（或打算是什么），但是在 audioPlayer 的初始化程序中放置一个跟踪语句很可能表明您正在创建一个新的当您实际上并不打算这样做时。

# c# - 动画在 Wpf 中不起作用

> ID：11887835
> 
> 赞同：2
> 
> 时间：2012-08-09T16:27:07.337
> 
> 标签：c#, wpf

好吧，我有两个与动画有关的问题。

1) 下面的代码不会为标题和边框设置动画，我像 this.FadeIn() 一样调用下面的代码，这当然是 UIElement 类型。

```
public static void FadeIn(this UIElement targetControl)
    {
        DoubleAnimation fadeInAnimation = new DoubleAnimation(0, 1, new Duration(TimeSpan.FromSeconds(1.5)));
        Storyboard.SetTarget(fadeInAnimation, targetControl);
        Storyboard.SetTargetProperty(fadeInAnimation, new PropertyPath(UIElement.OpacityProperty));
        Storyboard sb = new Storyboard();
        sb.Children.Add(fadeInAnimation);
        sb.Begin();
    } 
```

2）这也不起作用，没有动画显示。

```
public static void SkewAnimation(this UIElement targetControl) 
{ 
   DoubleAnimation skewAnimation = new DoubleAnimation(0, 360, new    Duration(TimeSpan.FromSeconds(3)));
   Storyboard.SetTarget(skewAnimation, targetControl);

   Storyboard.SetTargetProperty(skewAnimation, new  PropertyPath(SkewTransform.AngleXProperty)); 
   Storyboard sb = new Storyboard();
   sb.Children.Add(skewAnimation);
   sb.Begin(); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:08:03.827

为什么不简单地像这样制作动画：

```
public static void FadeIn(this UIElement element)
{
    element.BeginAnimation(
        UIElement.OpacityProperty,
        new DoubleAnimation(0d, 1d, TimeSpan.FromSeconds(1.5)));
} 
```

并且，只要元素的`RenderTransform`属性设置为 SkewTransform：

```
public static void SkewAnimation(this UIElement element)
{
    ((SkewTransform)element.RenderTransform).BeginAnimation(
        SkewTransform.AngleXProperty,
        new DoubleAnimation(0d, 360d, TimeSpan.FromSeconds(3d)));
} 
```

编辑：这需要类似的东西

```
element.RenderTransform = new SkewTransform(); 
```

或在 XAML 中：

```
<SomeElement>
    <SomeElement.RenderTransform>
        <SkewTransform />
    </SomeElement.RenderTransform>
</SomeElement> 
```

* * *

不知道为什么您的 FadeIn 不起作用，但您的 SkewAnimation 由于属性路径而无法工作。`SkewTransform.AngleXProperty`没有为 UIElement 定义。属性路径必须是这样的（再次假设 RenderTransform 设置为 SkewTransform）：

```
new PropertyPath("RenderTransform.(SkewTransform.AngleXProperty)"); 
```

# ember.js - 处理视图而不是路由器的操作

> ID：11887836
> 
> 赞同：7
> 
> 时间：2012-08-09T16:27:11.653
> 
> 标签：ember.js

我有一个包含可展开/可折叠内容的视图，我希望能够通过单击表格行上的 来切换。在 pre1.0 之前，我在模板中有这个：

```
<tr {{action "expand"}}> 
```

在我看来，这是以前处理过的：

```
App.ContentRowView = Em.View.extend({
   templateName: 'ember/templates/content/row',
   expand: function() {
      this.set('isExpanded', !this.get('isExpanded'));
   },
   isExpanded: false
}); 
```

但是，在升级到 pre1.0 之后，该操作现在直接由路由器执行。这在很多情况下都是有意义的，但在这种情况下，扩展确实是一个视图问题。我试过用点击事件处理程序替换它，但没有运气。

是否有关于如何使用 pre1.0 处理这样的视图关注事件的最佳实践？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-09T18:45:04.053

**已弃用的答案**

* * *

即使@outside2344 的答案有效，我认为它也不完全正确。Indeed`parentView`不代表视图，而是其 parentView 的 parentView。从 1.0-pre 开始，视图保留了它们的上下文，因此在模板中，`this`代表 parentView，`parentView`代表`parentView.parentView`和`view`代表当前视图。这是一个小提琴来说明这一点：http: [//jsfiddle.net/Sly7/cnmJa/](http://jsfiddle.net/Sly7/cnmJa/)

对我来说答案是`{{action expand target="view"}}`

**编辑**（回复@Gal Ben-Haim）

动作助手在基于路由器的应用程序中的行为几乎没有什么不同。从文档中引用：

> 在路由器驱动的应用程序中，如果一个动作**没有被视图拦截**，该事件将冒泡到渲染该视图的路由。如果该 Route 是另一个 Route 的子路由，则将在那里一直查找到顶级 Route 定义，即我们的 über-container: root。
> 
> 这种冒泡效果允许某些操作保持私密。如果某些转换应该仅适用于某些子子状态，请将转换放在子状态上，您就已经实现了一种范围界定。

基本上，对我来说，这意味着在**路由器驱动的应用程序**中，如果您没有在动作助手中明确定义目标，它将被发送到路由器。

* * *

**更新的答案**

我认为现在指南很好地回答了这个问题。见[http://emberjs.com/guides/templates/actions/#toc_specifying-a-target](http://emberjs.com/guides/templates/actions/#toc_specifying-a-target)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:30:54.397

在 pre1.0 中，您可以通过将 target="parentView" 添加到操作来使视图字段成为操作：

```
{{action "expand" target="parentView"}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T14:57:11.667

默认情况下，事件不会通过视图层次结构冒泡。你可以改变它（虽然我不能说我会推荐它）：

```
(function() {
    Ember.View.reopen({
        // Let actions bubble to parentView by default.
        target: function() {
            return this.get('parentView');
        }.property('parentView')
    });
})(); 
```

# php - 使用 PHP 脚本为我的网站登录脚本

> ID：11887838
> 
> 赞同：0
> 
> 时间：2012-08-09T16:27:18.903
> 
> 标签：php, http, authentication, login

我想使用 HTTP 身份验证来限制我的网站。我已经在我的 www 目录中编写了 .htaccess 文件，现在我想创建一个 htpasswd.php 文件来创建密码和用户名。我必须将它保存在无法访问的目录中。有谁知道如何为登录和创建 htpasswd.php 脚本？？？

我已经有了这个：

```
<?php
// Password to be encrypted for a .htpasswd file
   $clearTextPassword = 'some password';

// Encrypt password
$password = crypt($clearTextPassword, base64_encode($clearTextPassword));

// Print encrypted password
echo $password;
?> 
```

任何帮助将非常感激。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:47:21.553

您只需按照以下链接中的说明进行操作

[http://tools.dynamicdrive.com/password/](http://tools.dynamicdrive.com/password/)

确保您需要 .htpasswd 文件的绝对路径

你可以通过`echo __FILE__;`

# facebook-graph-api - OAuthException Facebook 和 OSQA

> ID：11887841
> 
> 赞同：0
> 
> 时间：2012-08-09T16:27:28.303
> 
> 标签：facebook-graph-api, oauth-2.0, osqa

我正在使用 OSQA，我只是尝试使用 Facebook 登录（平台代码没有任何更改），只设置“应用程序密码”和“应用程序 ID”。

我的 Facebook 应用程序设置：

```
Site URL: http://localhost:8080/osqa/
Canvas URL: http://localhost:8080/osqa/osqa/account/facebook/done/ 
```

我遇到这个错误：

```
{
   "error": {
      "message": "Invalid redirect_uri: Given URL is not allowed by the Application configuration.",
      "type": "OAuthException",
      "code": 191
   }
} 
```

这是带有redirect_uri的网址

```
https://graph.facebook.com/oauth/authorize?scope=email&redirect_uri=http%3A%2F%2F127.0.0.1%3A8080%2Fosqa%2Fosqa%2Faccount%2Ffacebook%2Fdone%2F&client_id=*** 
```

我在 stackoverflow 和其他论坛上阅读了很多关于这个问题的帖子，我知道有一个简单的解决方案，但还无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:56:24.553

URL 中的重定向转换为：

```
redirect_uri=http://127.0.0.1:8080/osqa/osqa/account/facebook/done/ 
```

Facebook 只是检查字符串，发现它`127.0.0.1`与`localhost`. 因此，在您的应用设置中替换它，重定向应该可以工作。

# pointers - 如何保存一系列范围以多次重用它

> ID：11887845
> 
> 赞同：0
> 
> 时间：2012-08-09T16:27:50.247
> 
> 标签：pointers, orm, scope, yii

我想编写代码的方式：

```
$chain = Articles::model()->visible()->childOf($teleshow_id);
echo $chain->count( $criteria ); 
// 1st echo - will write the amount of visible articles, 
// which are children of $teleshow_id

echo $chain->count( $criteria ); 
// this echo will write the amount of all articles 
```

但我想得到与`echo`s 相同的结果。

是否有任何解决方案可以保持 $chain 持久性（不使用指向 Articles::model()->visible()->childOf($teleshow_id) 的指针）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:37:41.887

您可以尝试以下方法：

```
// in your Articles class
private $_chain;

public function getChain($teleshow_id = false)
{
    if(!isset($this->_chain))
    {
        $chain = Articles::model()->visible()->childOf($teleshow_id);
    }
    return $this->_chain;
} 
```

然后像这样从你的控制器调用它：

```
$model = new Articles();
$chain = $model->getChain($teleshow_id);

$model->chain->count(); 
```

或类似的东西。如果你想让你的调用更容易，你可能需要弄乱 getChain 静态，但你应该能够开始使用它。

# actionscript-3 - 在 ActionScript 中设置对嵌套对象的局部变量的引用是否更快？

> ID：11887847
> 
> 赞同：2
> 
> 时间：2012-08-09T16:27:57.483
> 
> 标签：actionscript-3, flash, bytecode

我有一个嵌套了好几层的对象，我多次引用它。创建和设置对该对象的引用是否更快或是否重要？

上下文我听说创建本地引用会更快。这是多年前的一个 Visual Basic 项目。但这是Flash。并且输出是一个 SWF / 字节码。并且编译器可以查看该引用并执行我正在执行的操作，这样就不必每次都查找该对象。

例如：

```
public function doStuff():void {

    Model.instance.view1.button1 = button1;
    Model.instance.view1.button2 = button2;
    Model.instance.view1.button3 = button3;
    Model.instance.view1.button4 = button4;
    Model.instance.view1.button5 = button5;
    Model.instance.view1.button6 = button6;

    // more fake code referencing more something.something.something like things 

    for (var i:int;i<something.something.something.length;i++) {
        var result:Object = Controller.staticMethod(button1);
        var result2:Object = Controller.staticMethod(button1);
    }
} 
```

对比：

```
public function doStuff():void {
    var view1:View = Model.instance.view1;

    view1.button1 = button1;
    view1.button2 = button2;
    view1.button3 = button3;
    view1.button4 = button4;
    view1.button5 = button5;
    view1.button6 = button6;
} 
```

.
接受 Baris 的建议，我自己测试了它。下面是结果（尽管我不知道如何将它们解释为实际差异，即“方法 1 比方法 2 快 0.000001”）。

**结果**

测试 1

```
 var instance:Model = Model.instance;

            var startTime:int = getTimer();
            for(var i:int = 0; i<10000000; i++){
                instance.url = "";
            }
            trace(getTimer()-startTime); // 826, 929, 823

            var startTime:int = getTimer();
            for(var i:int = 0; i<10000000; i++){
                Model.instance.url = "";
            }
            trace(getTimer()-startTime); // 3483, 3976, 3539 
```

测试 2

```
 var instance:Model = Model.instance;

            var localLogo:BitmapImage = Model.instance.logo;

            var startTime:int = getTimer();
            for(var i:int = 0; i<10000000; i++){
                localLogo = logo;
            }
            trace(getTimer()-startTime); // 2070, 2083, 2110

            var startTime:int = getTimer();
            for(var i:int = 0; i<10000000; i++){
                instance.logo = logo;
            }
            trace(getTimer()-startTime); // 2028, 2509, 2154 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:18:22.500

一般来说，as3 编译器并没有我们想象的那么聪明。我认为这样做是为了减少编译时间。

这个页面[http://upshots.org/actionscript/20-tips-to-optimize-your-actionscript](http://upshots.org/actionscript/20-tips-to-optimize-your-actionscript)给了我们一个规则：

> 5：单点规则 访问嵌套变量时，只要变量需要甚至一级范围转移才能发现，并且被多次引用，则将其保存到局部变量中。在绘图类中，您经常会看到在可能每帧迭代数百次的循环中引用 Math.PI / 2 - 该值应存储在局部变量中。请注意，在引用成员方法时，情况并非如此。将 Math.PI 保存到变量是合适的；将 Math.round 保存到变量不是。

它确实有所作为，但从软件构建的角度来看，更易读的代码将是正确的方法，除非它是关键代码，比如应用程序的物理部分。

除了做时间基准，你也可以检查字节码，使用这个工具[http://www.swfwire.com/](http://www.swfwire.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T01:29:05.847

访问的时间可能无关紧要，因为您似乎在做一些 UI 工作，而且花费的毫秒数无关紧要。但还有其他担忧：

1.  您正在编写重复的代码 - 这总是很糟糕。如果*必须*重复，您应该编写一个程序，在任何地方从单一来源重复它，如果它可能不会重复 - 选择不重复。担心很简单。一旦发现按钮在其中，`ModelB.instance.view1`您将需要多次复制和粘贴相同的代码 - 当然，在重复工作时您会犯错误。

2.  AS3 代码不仅允许，而且还欢迎副作用，在这种情况下可能会产生不良影响。例如，`Model.instance.view1`可能是一个 getter，每次访问它时都会返回一个新的视图副本，或者，当访问时，它可能会更改实例内部状态中的其他内容，无论是什么，并且多次执行此更改是不可取的.

3.  有得墨忒耳的规则。当超出可能的简化时，它表示您不应该连续使用多个点运算符。即一个对象可能只知道它自己的属性（或局部变量）的属性，但永远不会访问该属性的属性，也永远不会更进一步。这对程序的结构施加了不必要的限制。但是，有时看起来很难避免，您应该争取更好的、独立的代码。更多关于得墨忒耳的规则在这里：[http ://en.wikipedia.org/wiki/Law_of_Demeter](http://en.wikipedia.org/wiki/Law_of_Demeter)

“优化”此类代码不是编译器的功能，尤其是因为副作用。编译器将忠实地遵循程序员编写的错误代码并生成大量重复的程序集，因为它相信程序员确实需要这些代码。请注意，我不是在谈论 Adob​​e 编译器，它不是优化编译器，即使静态分析表明，也不会删除此代码。我说的是该语言的一些抽象“理想”编译器，它可以最佳地编译相关代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T16:34:18.897

我更喜欢 ：

```
public function doStuff():void {
    var view1:View = Model.instance.view1;

    view1.button1 = button1;
    view1.button2 = button2;
    view1.button3 = button3;
    view1.button4 = button4;
    view1.button5 = button5;
    view1.button6 = button6;
} 
```

我认为它看起来更干净，您可以分析并查看哪个更快，但如果您没有在某个内部循环中执行大量时间，那么性能并不重要。

```
public function doStuff():void {
    var startTime:int = getTimer();
    for(var i:int = 0; i<1000000; i++){
        Model.instance.view1.button1 = button1;
        Model.instance.view1.button2 = button2;
        Model.instance.view1.button3 = button3;
        Model.instance.view1.button4 = button4;
        Model.instance.view1.button5 = button5;
        Model.instance.view1.button6 = button6;
    }
    trace(getTimer()-startTime);
}

public function doStuff():void {
    var startTime:int = getTimer();
    for(var i:int = 0; i<1000000; i++){
        var view1:View = Model.instance.view1;

        view1.button1 = button1;
        view1.button2 = button2;
        view1.button3 = button3;
        view1.button4 = button4;
        view1.button5 = button5;
        view1.button6 = button6;
    }
    trace(getTimer()-startTime);
} 
```

# xml - 拥有与父元素相关的元素参数是否合适？

> ID：11887851
> 
> 赞同：0
> 
> 时间：2012-08-09T16:28:03.233
> 
> 标签：xml

我正在设计自己的 GUI，并使用 XML 进行存储。它具有对子项具有特殊属性的元素，TabFolder 具有每个子项的选项卡名称，Window 具有每个子项的位置。

示例 1：

```
<tabfolder>
  <stuff tabtitle="Stuff">...</stuff>
  <stuff tabtitle="Stuff2">...</stuff>
</tabfolder>
<window>
  <button position="title_right" id="close"></button>
  <button position="title_right" id="hide"></button>
  <stuff position="content"></stuff>
</window> 
```

示例 2：

```
<tabfolder>
  <tab>
    <title>Stuff</title>
    <content><stuff>...</stuff></content>
  </tab>
  <tab>
    <title>Stuff2</title>
    <content><stuff>...</stuff></content>
  </tab>
</tabfolder>
<window>
  <title_right>
    <button id="close"></button>
    <button id="hide"></button>
  </title_right>
  <content><stuff></stuff></content>
</window> 
```

以下哪个示例显示了正确的方法？

第一个很短。2nd看起来更标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:41:23.313

子级应该具有相对于其父级的属性。

无论是左侧 = 3 在 Panel 内，左侧为 3 内窗，左侧为 26，屏幕位置为 32

或 Font 指向一个子级或一个父级。

否则，每个父母都必须“了解”太多它可能包含的所有类型的子控件，从而导致设计非常混乱且极其脆弱。

当然，这是大多数 GUI 组件库的工作方式，如果不这样做，除非您创建所有自己的组件而不使用内置插件，否则会很快变得痛苦。

如果您需要第一种格式，请从第二种格式中提取，使用它，然后将其装箱。

# clojure - Clojure：resolve 和 var 有什么区别？

> ID：11887852
> 
> 赞同：5
> 
> 时间：2012-08-09T16:28:04.767
> 
> 标签：clojure, symbols, var

`(resolve...)`和 和有什么不一样`(var...)`？它们都采用符号并返回命名空间中的 var。看起来 resolve 是一个将引号语法作为参数的函数，而 var 是一种特殊形式，它采用在 repl 处键入的文字符号，但我不明白这些将如何以不同的方式使用。

```
user> (def my-symbol 2.71828182846)
#'user/my-symbol
user> (resolve 'my-symbol)
#'user/my-symbol
user> (type (resolve 'my-symbol))
clojure.lang.Var
user> (var my-symbol)
#'user/my-symbol
user> (type (var my-symbol))
clojure.lang.Var
user> (= (resolve 'my-symbol) (var my-symbol))
true 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T17:22:35.840

`resolve`查找给定符号的 var（或类），并在运行时操作。`var`只返回一个 var 并在编译时运行。`(var foo)`是同义词`#'foo`

```
(def foo "bar")
=> #'user/foo

(let [sym 'foo]
  (resolve sym))
=> #'user/foo

(let [sym 'foo]
  (var sym)) ;same as typing #'sym - doesn't actually refer to the sym local
=> Exception: Unable to resolve var: sym in this context 
```

# c# - 在内部级别具有多个连接的 IQueryable Linq 查询

> ID：11887856
> 
> 赞同：0
> 
> 时间：2012-08-09T16:28:32.447
> 
> 标签：c#, .net, linq, fluent-nhibernate

编辑：忘了说我正在使用 Fluent NHibernate，尽管标签可能会暗示它。

我有这些实体类：

```
class OuterLevel
{
    ICollection<MidLevel> mid_items;

    ... other properties
}

class MidLevel
{
    OuterLevel parent;
    Inner1 inner1;
    Inner2 inner2;

    ... other properties
}

class Inner1
{
    int id;
    string description;
}

class Inner2
{
    int id;
    string description;
} 
```

我需要构建一个 Linq 查询，该查询返回一个 OuterLevel 对象列表，其中所有子对象都正确填充。假设所有映射都正确且有效，我在这里发现的困难部分是生成的查询应该类似于

```
SELECT * FROM OuterLevelTable OLT INNER JOIN MidLevelTable MLT ON (MLT.parentID = OLT.ID) INNER JOIN
    Inner1Table ON (MLT.Inner1ID = Inner1Table.ID) INNER JOIN
    Inner2Table ON (MLT.Inner2ID = Inner2Table.ID)
 WHERE (Inner1Table.someproperty1 = somevalue1) AND (Inner2Table.someproperty2 = somevalue2) 
```

主要问题是两个连接从层次结构向下的 MidLevel 对象开始，所以我无法确定可以使用哪个 Fetch 和 FetchMany 组合，而不需要将结果查询连接两倍于 MidLevelTable，如下所示：

```
 return All().FetchMany(x => x.mid_items).ThenFetch(x => x.inner1).FetchMany(x => x.mid_items).ThenFetch(x => x.inner2); 
```

我想返回一个可以进一步过滤的 IQueryable，所以我宁愿避免使用 Query 和 QueryOver。

在此先感谢，马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:11:34.397

你想要什么是不可能的，因为当你过滤连接的表时，结果记录无论如何都不足以填充集合。您最好在一个地方构建查询以进一步调整它或设置集合批量大小以降低 SELECT N+1。

# asp.net - SEO：使从数据库中检索到的数据和 URL 可抓取和可索引

> ID：11887860
> 
> 赞同：0
> 
> 时间：2012-08-09T16:28:35.950
> 
> 标签：asp.net, seo, dynamic-url

我有一个 asp.net .aspx 页面（比如 fruits.aspx 页面），其中列出了所有水果（苹果、香蕉、芒果等），并带有一个缩略图、标题和链接，这些链接指向每个水果各自的详细信息页面。现在，借助 XSLT 和用户控件，借助反手代码从 XML 中检索所有这些数据。

现在，由于每个水果的详细信息页面的数据和 URL 不是静态存在于该页面上的，因此据我所知，它不会被抓取和索引。

是否有一种解决方法可以让每个水果的详细信息页面都被抓取和索引。

如果我只有“？var = value”之类的动态URL，我可以使用URL重写通过静态/动态转换来解决它。但是这里的 URL 本身并不存在，而是从后面的代码生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:40:15.430

搜索引擎不会看到该`aspx`文件，因为它位于您的服务器上；相反，他们会看到您的 Web 浏览器所做的相同事情：生成的 HTML 输出。

这意味着您所说的参数*将*被搜索引擎正确查看和索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:09:55.567

那就没有办法了。您要编入索引的每个页面都必须有一个唯一的 URL。生成页面时，只需生成一个唯一的 URL。获取查询参数并将它们粘贴到脚本名称的末尾。

例如，使用 ?fruit=banana 作为查询参数调用 fruits.aspx。您最好的选择是生成具有唯一静态 URL 的页面，例如使香蕉页面的链接看起来像 /fruits.aspx/fruit/banana。

更好的是重写它以删除.aspx。然后该站点看起来像所有静态内容，这对于索引来说甚至更好。如果一个 URL 看起来像是由数据库支持的，那么搜索引擎就不太可能索引所有内容。

# xaml - 将 4 传递数据上下文与导航到混合

> ID：11887863
> 
> 赞同：0
> 
> 时间：2012-08-09T16:28:36.947
> 
> 标签：xaml, prism, expression-blend-4

我有一个包含各种信息的客户列表。我有一个带有他们名字的列表框。当我选择一个条目时，我会在屏幕上看到有关客户的更多信息。当单击用户名及其更多信息时，我想“导航到”另一个屏幕。我不知道如何将有关条目的信息传递到下一个屏幕来完成此操作。

这是用户开始选择的列表框。

```
<ListBox x:Name="scheduleListBox" 
     ItemTemplate="{DynamicResource ItemTemplate}" 
     ItemsSource="{Binding Collection}" 
     Margin="8,8,8,0" 
     Style="{DynamicResource ListBox-Sketch}" 
     Height="154" 
     VerticalAlignment="Top"/> 
```

这是可以单击以转到另一个屏幕的 TextBlock。它根据用户从 ListBox 中选择的内容进行更改。

```
<TextBlock Text="{Binding Customer}" 
     HorizontalAlignment="Left" 
     VerticalAlignment="Top" 
     Width="150" Margin="104,0,0,0"    
     Style="{DynamicResource BasicTextBlock-Sketch}">
     <i:Interaction.Triggers>
         <i:EventTrigger EventName="MouseLeftButtonDown">
             <pi:NavigateToScreenAction  TargetScreen="V02Screens.Customer_Status"/>
         </i:EventTrigger>
     </i:Interaction.Triggers>
</TextBlock> 
```

我有点希望我可以在 Expression Blend 4 或 XAML 中做些什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:14:57.333

在 WPF 中，您可以为`Navigate`命令提供一个对象，该对象包含您想要的任何内容，包括您可能希望在下一页上显示的任何数据。然后在目标页面（您导航到的页面）上，您必须处理加载完成事件。

在您的第一页中，您可能会使用...导航

```
this.NavigationService.Navigate( somePage, someContainerObject ); 
```

然后你可以在 somePage 上检索它...

```
// Don't forget to subscribe to the event!
this.NavigationService.LoadCompleted += new LoadCompletedEventHandler(container_LoadCompleted);
...
void container_LoadCOmpleted( object sender, NavigationEventArgs e)
{
   if( e.ExtraData != null )
      // cast e.ExtraData and use it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:35:26.787

在 Windows 8 中，您可以将整个对象传递给接收页面。

像这样：

```
// main page
private void ListBox_SelectionChanged_1
    (object sender, SelectionChangedEventArgs e)
{
    var _Item = (sender as ListBox).SelectedItem;
    Frame.Navigate(typeof(MainPage), _Item);
}

// detail page
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    this.DataContext = e.Parameter;
} 
```

在 WPF 和 SL 中，您可以在视图模型中保存对 SelectedItem 的引用。

```
// main page
private void ListBox_SelectionChanged_1
    (object sender, SelectionChangedEventArgs e)
{
    var _Item = (sender as ListBox).SelectedItem;
    MyModel.SelectedItem = _Item;
    // TODO: navigate
}

// detail page
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    this.DataContext = MyModel.SelectedItem;
} 
```

我希望这有帮助。

# jquery - MVC3：如何使用或不使用uploadify上传多个文件

> ID：11887864
> 
> 赞同：1
> 
> 时间：2012-08-09T16:28:40.973
> 
> 标签：jquery, asp.net-mvc-3, file-upload, uploadify

我花了几个小时试图让 uploadify 工作，但我看到的只是一个按钮，上面写着 [Select File] 并且什么也没做。发现一些链接，如[MVC 中的 Multiple file upload using Uploadify](http://techblog.edwardting.com/2011/05/20/multiple-file-upload-in-mvc-using-uploadify/)和[Using uploadify with ASP.Net2](http://zootfroot.blogspot.nl/2010/12/mvc-file-upload-using-uploadify-with.html)导致相同的链接。使用uploadify.com 的信息，它也不起作用。所以我被困在uploadify。

我还注意到大多数信息至少有一年的历史。现在我想知道这是否是要走的路，或者你能推荐一个更好的方法吗？目前我正在查看[File upload asp.net mvc3](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc3-0)，它看起来非常漂亮和简单，但一次只能上传 1 个文件......

亲切的问候，

保罗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:49:54.010

**一种方法是：**

根据菲尔·哈克[http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

你可以这样做：

```
<form action="" method="post" enctype="multipart/form-data">

 <label for="file1">Filename:</label>
 <input type="file" name="files" id="file1" />

 <label for="file2">Filename:</label>
 <input type="file" name="files" id="file2" />

 <input type="submit"  />
 </form> 
```

还有控制器..

```
[HttpPost]
public ActionResult Index(IEnumerable<HttpPostedFileBase> files) {
 foreach (var file in files) {
 if (file.ContentLength > 0) {
   var fileName = Path.GetFileName(file.FileName);
   var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
   file.SaveAs(path);
 }
}
return RedirectToAction("Index");
} 
```

**第二种方法：**

使用 KendoUI 的上传。它允许同步和异步上传多个文件。

上传可以用作文件输入元素的替代品。

[http://demos.kendoui.c​​om/web/upload/index.html](http://demos.kendoui.com/web/upload/index.html)

**澄清：**没有任何版本的 IE 支持多文件选择。

# java - 如何使用 jQuery 从回调函数管理数据（HTML）

> ID：11887871
> 
> 赞同：0
> 
> 时间：2012-08-09T16:28:54.807
> 
> 标签：java, jquery, ajax, servlets, post

我不是 Java EE 和 Ajax 的优秀开发人员，当我从 A Servlet 获取信息时遇到问题：

这是我的 JS 文件：

```
 $password = document.getElementById("pass").value;
            $name = document.getElementById("name").value;
            var $hash="";
            if ( $password  != '') {
                $hash = hex_md5($password);
            }
            $.ajax({
                url: 'identification',
                type: 'POST',
                data:{pass:$hash,name:$name},
                dataType: 'html',
                timeout: 1000,
                success: function(data){
                    alert(data);

                    if(data=='no'){
                                    $("#messages").html("Authentication prob ");
                                  }
                    else if(data=='db'){
                        $("#messages").html(" DataBase prob ");
                      }
                    else
                    {
                        $("body").html(data);
                        //or i want to redirect to new page
                    //window.location ="/BookListServlet?nom="+$nom;
                    }
                }
            }); 
```

这是我的 Servlet：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub

    String name= request.getParameter("name");
    String pass=request.getParameter("pass");

    if (name.length()==0)
        {
            response.setContentType("text/html");
            PrintWriter out = response.getWriter();
            out.println("no");
            out.flush();
            out.close();
        }

    else if (name.equals("admin")&&pass.equals("0cc175b9c0f1b6a831c399e269772661"))
    {
        if(bookiml.get_connection()!=null)//db is ok
        {
            getServletContext().getRequestDispatcher("/BookListServlet").forward(request, response);
        }
        else
        {
            response.setContentType("text/html");
            PrintWriter out = response.getWriter();
            out.println("db");
            out.flush();
            out.close();
        }

    }

    else 
    {
     response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("no");
        out.flush();
        out.close();
    }
} 
```

**我有一个大问题：重定向页面并从 Servlet 获取 HTML 内容**

我需要将发送标识的请求转发到此`booklistservlet`，然后从 Servlet 获取页面。

为什么这段代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:54:58.550

好的，这`data`实际上不是您从服务器返回的直接值，而是一个 html 页面。（服务器的响应）。因此，您必须`data`使用 JQuery 来操作，您可以简单地做到这一点

```
var password = $('#pass').val();
var name = $('#name').val();
var hash="";
if ( password  != '') {
    hash = hex_md5(password);
}
$.ajax({
    url: 'identification',
    type: 'POST',
    data:{
        pass:hash,
        name:name
    },
    dataType: 'html',
    timeout: 1000,
    success: function(data){
        alert(data);

        if($(data).find('body').text()=='no'){
            $("#messages").html("Authentication prob ");
        }
        else if($(data).find('body').text()=='db'){
            $("#messages").html(" DataBase prob ");
        }
        else
        {
            $("body").html($(data).find('body').text());
        //or i want to redirect to new page
        //window.location ="/BookListServlet?nom="+$nom;
        }
    }
}); 
```

附言

出于记录目的，我更喜欢使用`console.log();`而不是警报框。

# php - 将图像路径存储在变量中

> ID：11887879
> 
> 赞同：0
> 
> 时间：2012-08-09T16:29:29.453
> 
> 标签：php, database, image, variables, profile

我有一个存储用户图像路径的数据库，例如 images/profile/950baasfaa88c.jpg。现在，当我尝试将它放入一个变量并用图像标签包围它时，只会出现一个空白图像而不是图像本身......

```
 $profile_picture = $row['profile_image'];

<img src="'.$profile_picture.'" width=50 height=50 /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:35:42.157

你还没有回显 PHP

```
<img src="'.$profile_picture.'" width=50 height=50 /> 
```

应该

```
<img src="<?= $profile_picture ?>" width=50 height=50 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:43:57.530

你需要回显值

```
<img src="<?php echo $row['profile_image']; ?>" width=50 height=50 /> 
```

# android - 如何在自定义视图中制作一些背景

> ID：11887886
> 
> 赞同：1
> 
> 时间：2012-08-09T16:30:06.777
> 
> 标签：android, view, background, paint

如何在我的自定义视图中制作一些背景？我制作了视图画家，我需要像在我的视图下的 Photoshop 中一样使用网格制作背景，而不会在我视图的画布上漂浮。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:34:22.097

将图案添加到您想要作为背景的可绘制文件夹中，

并在您的布局中将其称为

**android:background="@drawable/your_pattern"**

# sap-ase - 如何优化 Sybase ASE 数据库？

> ID：11887887
> 
> 赞同：0
> 
> 时间：2012-08-09T16:30:07.103
> 
> 标签：sap-ase, database-optimization

优化sybase数据库有哪些技巧？

做什么和不做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:53:02.587

你的问题似乎相当广泛和开放。

对于整个产品的性能调整指南，我可能会从在线文档中的[几本性能调整书籍开始。](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc20020.1570/html/basics/title.htm)

持续的性能优化通常可以包括由 Confio 的 Ignite 等 3rd 方产品进行监控（我不为他们工作，但它是令人印象深刻的软件）。

# algorithm - 平衡分区 vs 背包 1/0 复杂度

> ID：11887892
> 
> 赞同：1
> 
> 时间：2012-08-09T16:30:33.383
> 
> 标签：algorithm, dynamic-programming, knapsack-problem, data-partitioning

平衡分区： . 您有一组 n 个整数，每个整数都在 0 ... K 范围内。将这些整数分成两个子集，使 |S1 - S2| 最小化，其中 S1 和 S2 表示两个子集中每个子集中元素的总和。背包问题：给定一组项目，每个项目都有一个重量和一个值，确定要包含在集合中的每个项目的数量，使得总重量小于或等于给定的限制，并且总值与可能的。不能两次使用同一个对象。

似乎平衡分区问题的解决方案是简单地应用背包算法，对于背包的大小 S/2，其中 S 是所有输入数字的总和，权重等于每个对象的值。不过，[这里](http://people.csail.mit.edu/bdean/6.046/dp/)说背包问题是 O(nC)，而平衡分区问题是 O(n^2 k)。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:16:14.450

因为如果每个整数都等于 k，C 可以等于 k*n。因此，在这种情况下，整数背包问题的运行时间为 O(k * n^2)。

# insert - SQLAlchemy 原始 sql 与表达式语言语句

> ID：11887895
> 
> 赞同：10
> 
> 时间：2012-08-09T16:30:46.280
> 
> 标签：insert, sqlalchemy, bulkinsert

通过 SQLA-Expression-Language 语句在 MySQL-DB 中插入多行时，fe

```
Foo.__table__.insert().execute([{'bar': 1}, {'bar': 2}, {'bar': 3}]) 
```

与为同一任务执行“原始” sql 语句相比，它非常慢，即

```
engine.execute("insert into foo (bar) values (1),(2),(3)") 
```

这是什么原因？SQLA 不能生成单个批量插入语句并因此执行多个插入吗？由于 orm 的速度限制，我需要一种快速的方法来一次添加几千行，但是 SQLA-Expression-Language-Version 太慢了。那么，我需要自己编写原始 sql 吗？文档对此并不太清楚。

我使用 ORM 插入、带有预分配 PK 的 ORM 和 SQLA 批量插入（参见[SQLA 批量插入速度](https://stackoverflow.com/questions/11769366/why-is-sqlalchemy-insert-with-sqlite-25-times-slower-than-using-sqlite3-directly)）进行了速度测试，如下所示（[https://gist.github.com/3341940](https://gist.github.com/3341940)）：

*   SqlAlchemy ORM：500 条记录的总时间 9.61418914795 秒
*   SqlAlchemy ORM pk 给出：500 条记录的总时间 9.56391906738 秒
*   SqlAlchemy Core：500 条记录的总时间 9.5362598896 秒
*   SQLAlchemy RAW 字符串执行：500 条记录的总时间 1.233677 秒

如您所见，这三个版本之间几乎没有区别。仅执行原始字符串插入，其中所有记录都包含在原始 sql 语句中，速度明显更快。因此，对于快速插入，SQLA 似乎不是最理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:08:06.130

似乎最近才支持具有多个值的特殊 INSERT（0.8 未发布），您可以在本节底部看到关于 executemany（使用列表执行的操作）和多值插入之间的区别的注释：

[http://docs.sqlalchemy.org/ru/latest/core/expression_api.html#sqlalchemy.sql.expression.Insert.values](http://docs.sqlalchemy.org/ru/latest/core/expression_api.html#sqlalchemy.sql.expression.Insert.values)

这应该可以解释您看到的性能差异。您可以尝试安装开发版本并使用链接中提到的更改的调用语法重复测试以确认。

# c++ - 什么是“有效”的 std::function？

> ID：11887896
> 
> 赞同：6
> 
> 时间：2012-08-09T16:30:48.990
> 
> 标签：c++, c++11, std-function

这里：

[http://en.cppreference.com/w/cpp/utility/functional/function](http://en.cppreference.com/w/cpp/utility/functional/function)

`operator bool`描述：“检查存储的可调用对象是否有效”。

大概构造的默认值`std::function`无效，但这是唯一的情况吗？

另外，它如何检查它是否有效？

是否`operator()`会引发`std::bad_function_call`对象无效的情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T16:39:40.093

它写得不好，你的困惑是有道理的。“有效”是指“有目标”。

当`std::function`它被分配一个功能时，“有一个目标”：

```
std::function<void()> x; // no target
std::function<void()> y = some_void_function; // has target

x = some_other_void_function; // has target
y = nullptr; // no target

x = y; // no target 
```

他们应该在使用之前定义“有效”，或者只是坚持使用官方措辞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:39:11.620

语言标准说

> `explicit operator bool() const noexcept;`
> 
> 返回：如果 *this 有一个目标，则返回 true，否则返回 false。

意思是`function`有什么可以打电话的。默认构造`function`显然没有。

# mysql - 大型mysql表的数字类型的快速搜索解决方案？

> ID：11887897
> 
> 赞同：2
> 
> 时间：2012-08-09T16:30:50.903
> 
> 标签：mysql, phone-number

我有大型 mysql 数据库（500 万行），数据是电话号码。我尝试了很多解决方案，但它仍然很慢。现在，我正在使用`INT type and LIKE sql query`商店和搜索电话号码。例如：`SELECT phonenumber FROM tbl_phone WHERE phonenumber LIKE '%4567'` 用于搜索电话号码，例如 170**4567**、249**4567**、...

我需要一个让它运行得更快的解决方案。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:00:41.667

您将数字存储为 INT，但随后查询为 CHAR（LIKE 运算符将 INT 隐式转换为 CHAR），这肯定不是最优的。如果您想将数字保留为 INT （可能是 IO 性能 therms 中的最佳想法），您最好更改查询以使用数字比较：

```
-- instead of CHAR operators 
WHERE phone_number LIKE '%4567'
WHERE phone_number LIKE '1234%'
-- use NUMERIC operators
WHERE phone_number % 10000 = 4567
WHERE phone_number >= 12340000 -- considering 8 digit numbers 
```

除了选择同构的方式来存储和查询数据，你还应该记住创建合适的索引`CREATE INDEX IDX0 ON table (phone_number);`。

不幸的是，即使这样，您的查询也可能不是最佳的，因为与@ron 评论过的效果类似。在这种情况下，您可能需要调整您的表格以将此列拆分为更易于管理的列（如 national_code、area_code 和 phone_number）。例如，这将允许按区域代码进行索引高效查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:35:05.227

在此处查看建议[如何加快 SELECT .. LIKE 在 MySQL 中对多列的查询？](https://stackoverflow.com/questions/2042269/how-to-speed-up-select-like-queries-in-mysql-on-multiple-columns)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:43:05.483

LIKE 谓词对字符串进行操作，因此您已经进行了从 INT 到 VARCHAR 的隐式转换。这意味着 INT 列上的索引无济于事，即使对于具有前导字符的 LIKE 谓词也是如此。（谓词不可分割。）

如果您正在搜索电话号码的*最后一位*数字，那么（我所知道的）快速获得类似内容的唯一方法*是*添加另一个 VARCHAR 列，并将反转的电话号码存储在其中，其中顺序的数字是向后的。

在该 VARCHAR 列上创建一个索引，然后查找以“4567”结尾的电话号码：

```
WHERE reverse_phone LIKE '7654%' 
```

-或者-

```
WHERE reverse_phone LIKE CONCAT(REVERSE('4567'),'%') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:37:07.333

我会尝试使用`REGEXP`，而不是`LIKE`像下面的例子：

```
SELECT `field` WHERE `field` REGEXP '[0-9]'; 
```

除此之外，如果您的电话搜索模式部分具有恒定长度，则确实创建一个索引。

这里也是[MySQL 模式数学](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)文档的链接。

# database-design - 通过 REST Api 让应用程序直接访问 CouchDB 是否安全？

> ID：11887901
> 
> 赞同：2
> 
> 时间：2012-08-09T16:31:03.803
> 
> 标签：database-design, nosql, couchdb, security, database-security

我观看了 DEFCON，它完全致力于 NoSQL，尤其是 CouchDB。他们观察到一些攻击向量，例如访问客户端库（伪 SQL 透明层）、访问 db 和暴力密钥。（以无模式方式）、json/视图注入。如果我直接从 Internet 访问 db，并在 db 验证、身份验证中使用。这样会不会降低我的数据库的安全性？

不幸的是，由于缺乏使用 CouchDB 的经验，因此无法进行准确的分析，亲爱的同事，请相信您的意见。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:31:47.120

不，我不会这样做。

我觉得 CouchDB 的安全性不够精细，不足以使其适合发布在互联网上。没有办法让“一些”数据通过，而不是全部。在普通的 SQL DB 上，您可以限制某些表等。但不能在 Couch 中。作为无模式和文档存储，文档就是文档就是文档，无论它是“秘密”还是“重要”。

这是一个很好的后端，但不是在狂野的互联网上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:22:01.557

直接访问任何基于 Web 的数据库都是自找麻烦，但我想这取决于您的设计......

使用 CouchDB，您可以选择为每个用户提供他们自己的数据库，这将缓解某些问题。您还可以更改“直接”CouchDB 用户的读/写权限。

可以在此处找到这两种技术的详细说明： [基于每个数据库的 CouchDB 授权](https://stackoverflow.com/questions/4055450/couchdb-authorization-on-a-per-database-basis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-15T10:14:57.393

在我看来，任何人都可以直接将 couchDB 与您的前端一起使用，而无需设计中间后端服务。我想强调你至少需要做的事情。虽然我不是专家，但也应该三思而后行。

*   在 couchdb 中为具有所需角色的应用程序的每个用户创建用户。
*   当然，您应该只将此用户作为**成员**添加到数据库中，这样他们就无法修改包含验证数据的设计文档。
*   在我的场景中，我希望用户只能访问他/她自己的文档。为此，我们有[验证文档](https://guide.couchdb.org/draft/validation.html)，以便我可以检查内置 _users 数据库中的用户文档是否具有他/她被授权的 documentId。如果是这样，他可以写入文档或修改它。当然，他只能修改现有的，我可以通过比较文档的_id来验证，它必须与以前相同。

所以，我想，如果用户只能读写自己的文档，那是安全的。但是，您必须自己在数据库中创建此类**用户**，或者使用安全 API 来使用管理员密码修改设计文档并添加到 _users 数据库。另一个想法是创建一个管理仪表板来接受用户创建请求。您当然可以为自己创建一个管理员用户，每当有人创建帐户时，您只需单击“**允许**”即可使用您在 couchDB 中创建的管理员用户对 _users 数据库进行一些更改。

# android - android照片修改时间被改变

> ID：11887907
> 
> 赞同：1
> 
> 时间：2012-08-09T16:31:36.767
> 
> 标签：android, image, file

我注意到照片的修改时间与创建时间不同。它可以是相似的，但大部分是不同的。通常，这是一分钟的差异，但在某些情况下甚至可能是一小时。

我的问题是某些东西导致文件更改/修改，我不知道它是什么。也许是相机应用程序使用创建时间作为时间戳，但实际上在一分钟后完成了写入？（也许在保存位置数据之后？）

我无法解释 1 小时的差异。

任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:08:58.393

您是否也安装了 QuickPic？是 Xperia 手机吗？在这里遇到了同样的问题.. 运行了二进制差异，尽管日期已更改，但文件是相同的。仍然很烦人。fe exif 数据 说

```
Image timestamp : 2012:09:07 23:33:27 
```

但统计给出

```
Modify: 2012-09-07 23:33:28.000000000 +0200 
```

在之前同步的文件上和

```
Modify: 2012-09-08 00:33:28.000000000 +0200 
```

关于手机上的相同文件，这是错误的。这不应该发生。咦？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:33:53.540

我的设备上安装的某个应用程序似乎修改了照片的时间。

在全新出厂重置手机上进行测试时，照片时间与创建时间保持一致。

当我们知道修改照片时间的应用程序时，我会在这里发布。

我只是希望它不会改变照片本身，而只是“轻轻地”触摸它们。

# netbeans - netbeans 6.1 - 将 java 源代码反向工程为 UML 类图

> ID：11887909
> 
> 赞同：1
> 
> 时间：2012-08-09T16:31:38.320
> 
> 标签：netbeans, uml

我使用的是 netbeans 7.1.2，它没有任何 UML 插件功能，现在我不得不求助于 netbeans 6.1，我已经有两个类，我想从中创建 UML 类图，但逆向工程选项产生没有结果。我无法生成任何类图。有谁知道如何利用 UML 插件对源代码进行逆向工程并创建类图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:49:12.427

This isn't possible anymore I think, I looked for it as well and found nothing but that was a year ago. Something might have happened since.

Check out [EIDOS_UML](http://java.net/jira/browse/EIDOS_UML), it's a community effort to recreate the UML capabilities I think, don't know the current status of it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:07:48.627

我希望您已正确按照程序生成类图：

右键单击项目（或选择您想要的特定包或java文件）然后在右键菜单中选择*逆向工程选项，这将根据选择生成模型。*这是创建图表之前的必要步骤。

然后浏览模型并选择您想要类图的包（或所有类），右键单击并选择*Create Diagram from Selected Elements...*

选择图表类型（在本例中为“类图”），命名并单击完成。

我已经在 Netbeans 6.1 和 6.5 中对其进行了测试，并且效果很好。
希望这能解决您的问题。

# php - 为 phpDocumentor 表示数组数据类型的正确方法？

> ID：11887910
> 
> 赞同：9
> 
> 时间：2012-08-09T16:31:40.020
> 
> 标签：php, documentation, phpdoc

以下哪项是为 phpDocumentor 记录此方法的返回类型的正确方法？

**方法一：**

```
/**
 * @return array Foo array.
 */
public function foo() {
    return array(1, 2, 3);
} 
```

**方法二：**

```
/**
 * @return integer[] Foo array.
 */
public function foo() {
    return array(1, 2, 3);
} 
```

此外，这两种方法是否对 IDE 有任何影响？

**编辑：**

PhpStorm 和 Netbeans 7.1+ IDE 似乎都支持第二种方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T16:44:43.223

这两种方法在技术上都是正确的，但这种方法被认为是“更好的”，因为它更具体（`int`并且`integer`可以互换）：

```
@return int[] 
```

记录在这里：

[http://www.phpdoc.org/docs/latest/guides/types.html](http://www.phpdoc.org/docs/latest/guides/types.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-15T14:52:19.760

在编写此答案时，这些是[phpDocumentor](https://docs.phpdoc.org/references/phpdoc/types.html#arrays)（可能还有其他[PHPDoc](https://en.wikipedia.org/wiki/PHPDoc)实现）表示数组的公认方式：

> 1.  **unspecified**，没有给出表示数组内容的定义。例子：`@return array`
>     
>     
> 2.  **指定包含单个类型**，`Type`定义通知读者每个数组元素的类型。然后，只`Type`期望一个作为给定数组的元素。示例：`@return int[]`
>     
>     请注意，`mixed`它也是单一类型，使用此关键字可以指示每个数组元素包含任何可能的类型。
>     
>     
> 3.  **指定包含多种类型**，`Type`定义通知读者每个数组元素的类型。每个元素可以是任何给定类型。例子：`@return (int|string)[]`

# asp.net - 在不使用 await 的情况下调用异步方法时防止死锁

> ID：11887915
> 
> 赞同：13
> 
> 时间：2012-08-09T16:32:00.613
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-4.0, async-await

我需要调用一个`Task`从内部返回 a 的方法

```
public override void OnActionExecuting(ActionExecutingContext filterContext) 
```

它不会让我使这个方法异步它抛出以下

> 异步模块或处理程序已完成，而异步操作仍处于挂起状态。

和打电话的时候

```
 entityStorage.GetCurrentUser().Result 
```

我陷入僵局。我怎样才能避免这种情况？

我一直在玩弄它想出类似的东西

```
entityStorage.GetCurrentUser().Result.ConfigureAwait(false).GetAwaiter().GetResult(); 
```

但这行不通。我该怎么做？我的解决方案需要使用 ASP.NET 4 和 Async Targetting Pack，我不能像部署到 Azure 一样使用 ASP.NET 4.5。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T17:12:45.103

[这里解释](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)了死锁的原因。简而言之，不要阻塞`async`代码。您应该`ConfigureAwait(false)`在您的库`async`代码和`await`结果中使用（不使用`Result`or `Wait`）。

**更新：**请[在此处为 MVC 团队投票](https://aspnet.codeplex.com/workitem/9582)以添加对`async`操作过滤器的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:54:10.050

由于 await 只是编译器为您重写延续的语法糖，因此最“直接”的路径是采用将遵循您的 await 的任何代码并将其设为 ContinueWith 调用。

所以，像：

```
entityStorage.GetCurrentUser().ContinueWith(t =>
{
    // do your other stuff here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-29T15:37:15.750

如果您**必须**将异步转换为同步。

```
public User GetCurrentUserSynch()
    {
        return Task.Run(() =>
        {
            var asyncResult = entityStorage.GetCurrentUser();
            while (!asyncResult.IsCompleted)
            {
                Application.Current.TryFindResource(new object()); // This is for WPF but you can do some other nonsense action of your choosing
            }

            return asyncResult.Result;
        }).Result;
    } 
```

否则使用@Stephen 的答案。

# xslt - 在 XSLT 中计算节点和重复但没有值

> ID：11887919
> 
> 赞同：0
> 
> 时间：2012-08-09T16:32:31.667
> 
> 标签：xslt

我对 XSLT 非常生疏，想知道是否有人可以给我一些指示。

编辑：使用 XSLT 1.0

原始 XML：

```
<gic>
    <application>
        <agent>
           ...child nodes
        </agent>
        <client>
           ...child nodes
        </client>
        <bank>
          ...child nodes
        </bank>
    </application>
</gic> 
```

我需要将给定的 XML **INPUT**转换为具有 5 个客户端节点。输入可以包含 1-5 个填充的客户端节点。我需要确保输出中总是有 5 个。在这种情况下，提供一个，因此我需要插入 4 个客户端节点和所有子节点。所有子节点的值都必须为空。以 XML 格式输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:22:11.203

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema"    
                              xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

<xsl:template match="/">
  <xsl:apply-templates />
</xsl:template>

<xsl:template match="application" as="node()*">
  <xsl:copy>
    <xsl:apply-templates select="agent" />    
    <!-- copy existing cliens --> 
    <xsl:apply-templates select="client" />    
    <!-- add new clients --> 
    <xsl:call-template name="AddClients">
      <xsl:with-param name="times"  select="10 - count(client)" />
    </xsl:call-template>

    <!-- copy banks --> 
    <xsl:apply-templates select="bank" />            
  </xsl:copy>
</xsl:template>

<xsl:template name="AddClients">
  <xsl:param name="times"  select="1" />
  <xsl:if test="number($times) &gt; 0">    
    <!-- new element here -->
    <xsl:element name="client">
      <xsl:attribute name="a1">
        <xsl:value-of select="asas" />
      </xsl:attribute>
    </xsl:element>

    <xsl:call-template name="AddClients">
      <xsl:with-param name="times"  select="$times - 1" />
    </xsl:call-template>
  </xsl:if>
</xsl:template>

<!-- default -->
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
 </xsl:template>

</xsl:stylesheet> 
```

# node.js - 循环异步函数时的节点

> ID：11887921
> 
> 赞同：0
> 
> 时间：2012-08-09T16:32:39.993
> 
> 标签：node.js

我需要执行一系列数据库调用，但我不知道具体多少次。像这样的东西

```
DBcall(params, function(err, result) {
  // doing something with result
  if (//condition)
    return;
  // modify params
  DBcall(params, function(err, result) {
    ........ 
```

我想在while循环中执行此操作，例如

```
while(//condition) {
  DBcall(params, function(err, result) { 
    ........
  }
  //modify params
} 
```

但是 DBcall 立即返回，所以它永远循环，无论如何要解决这个问题？

# sql - OLEDB Jet 4.0 SQL 字符限制

> ID：11887923
> 
> 赞同：1
> 
> 时间：2012-08-09T16:32:57.583
> 
> 标签：sql, oledb, custom-fields

我正在尝试为 SDF（空格分隔文件）生成行。我正在使用具有扩展属性 DBASEIV 的 OLEDB 适配器从 DBASE IV DBF 文件创建这些行，以获取数据。填充后我的数据列输出为 425 个字符，我将其放入 VB.NET 中的 datagridview 中以显示它。

但是，当我运行查询时，虽然它似乎正确执行，但结果字段限制为 256 个字符。我正在阅读的最长的单个字段是 35 个字符，我正在返回一个包含 2 个字段、条形码和 SDF 行的数据集。据我了解，OLEDB Jet 4.0 尝试根据前 8 行猜测类型，但是由于数据列的所有行长度相同（425 个字符），我不明白为什么它选择较小的字段类型。我认为这是因为我的字段是使用字符串连接生成的。我在这个问题的底部包含了可怕的 SQL。所以我的问题是如何获得完整的 425 字符输出？或者有没有办法可以将我自己的字段的数据类型指定为备忘录？

```
SELECT scan, 
RIGHT('0000000000000' + trim(cstr(scan)), 13) + 
LEFT(trim(cstr(name)) + '                                   ', 35) + 
LEFT(trim(cstr(name)) + '                ', 16) + 
'    ' + 
'             ' + 
'      ' + 
'1   ' + 
'0.00     ' + 
'0.00     ' + 
'1' + 
'0.00 ' + 
'0.01     ' + 
'0.00     ' + 
'F' + 
'2' + 
'0.00   ' + 
'0.00   ' + 
'   ' + 
'  ' + 
'  ' +
'SALS' + 
'    ' + 
'    ' +
LEFT(trim(cstr(plof)) + '             ', 13) + 
'             ' + 
'             ' + 
'0.00     ' + 
'0.00     ' + 
'0.00     ' + 
'F' + 
'T' + 
'001' + 
'    ' + 
'T' + 
'01' + 
'    ' + 
'        ' + 
'  ' + 
'    ' + 
'F' + 
'F' + 
'        ' + 
'        ' + 
'0   ' + 
'0.00     ' + 
'             ' + 
'0   ' + 
'0.00     ' + 
'0.00   ' + 
'0.00   ' + 
'0.00   ' + 
'1    ' + 
'1    ' + 
'1    ' + 
'0.00  ' + 
'0.00  ' + 
'0.00  ' + 
'0.00 ' + 
'0.00 ' + 
'0.00 ' + 
'                ' + 
'                ' + 
'  '
as STTEMPLINE
from salus where cstr(scan) in (select distinct cstr(scan) from nonscan) 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:08:18.883

这是一个已知问题，根据前几行中的数据猜测数据类型。

看到这个帖子...

[将 Excel 工作表加载到 DataTable 中，但每个单元格只导入前 256 个字符，](https://stackoverflow.com/q/9800502/1246574)

此外，有关 OLEDB 如何处理混合数据类型的说明，请参阅这篇文章...

[http://social.msdn.microsoft.com/Forums/pl-PL/csharplanguage/thread/0404d003-5bfb-44f9-8e6b-aebdfce24875](http://social.msdn.microsoft.com/Forums/pl-PL/csharplanguage/thread/0404d003-5bfb-44f9-8e6b-aebdfce24875)

# ejb-3.0 - jboss中的ejb3 sfsb激活异常

> ID：11887928
> 
> 赞同：0
> 
> 时间：2012-08-09T16:33:15.190
> 
> 标签：ejb-3.0, jboss6.x, seam3

我在 jboss 6.1 上有一个带有接缝 3 的应用程序。我的 bean 主要是对话范围的 bean（有状态会话 bean）。有时我在一个由对话范围 bean 处理的页面上，我离开页面一段时间（比如几分钟），然后单击一个操作链接，我收到以下错误：

```
11:59:02,313 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] /user/search.xhtml @30,100 value="#{userBean.lazyModel}": javax.ejb.EJBException: Could not activate; failed to restore state: javax.el.ELException: /user/search.xhtml @30,100 value="#{userBean.lazyModel}": javax.ejb.EJBException: Could not activate; failed to restore state
      at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114) [:2.1.7-SNAPSHOT]
      at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [:2.1.7-SNAPSHOT]
      at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIData.getValue(UIData.java:731) [:2.1.7-SNAPSHOT]
      at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:773) [:]
      at javax.faces.component.UIData.getDataModel(UIData.java:1798) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIData.setRowIndex(UIData.java:473) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIData.iterate(UIData.java:1927) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIData.processDecodes(UIData.java:1161) [:2.1.7-SNAPSHOT]
      at org.primefaces.component.datatable.DataTable.processDecodes(DataTable.java:554) [:]
      at javax.faces.component.UIForm.processDecodes(UIForm.java:225) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176) [:2.1.7-SNAPSHOT]
      at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:933) [:2.1.7-SNAPSHOT]
      at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78) [:2.1.7-SNAPSHOT]
      at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [:2.1.7-SNAPSHOT]
      at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [:2.1.7-SNAPSHOT]
      at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [:2.1.7-SNAPSHOT]
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
      at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:67) [:6.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
      at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65) [:3.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
      at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74) [:3.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.1.0.Final]
      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [:6.1.0.Final]
      at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.1.0.Final]
      at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
      at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
      at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
      at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
      at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
      at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
      at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
      at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
      at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
      at java.lang.Thread.run(Thread.java:662) [:1.6.0_31]
Caused by: javax.ejb.EJBException: Could not activate; failed to restore state
      at org.jboss.ejb3.cache.simple.StatefulSessionFilePersistenceManager.activateSession(StatefulSessionFilePersistenceManager.java:318) [:1.7.21]
      at org.jboss.ejb3.cache.simple.SimpleStatefulCache.get(SimpleStatefulCache.java:491) [:1.7.21]
      at org.jboss.ejb3.stateful.StatefulInstanceAssociationInterceptor.invoke(StatefulInstanceAssociationInterceptor.java:50) [:1.7.21]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.core.context.SessionInvocationContextAdapter.proceed(SessionInvocationContextAdapter.java:95) [:1.7.21]
      at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:223) [:0.0.2]
      at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.required(CMTTxInterceptor.java:353) [:0.0.2]
      at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invoke(CMTTxInterceptor.java:209) [:0.0.2]
      at org.jboss.ejb3.tx2.aop.CMTTxInterceptorWrapper.invoke(CMTTxInterceptorWrapper.java:52) [:0.0.2]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76) [:1.0.0.GA]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42) [:1.0.4]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:182) [:1.7.21]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:41) [:1.7.21]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67) [:1.7.21]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47) [:1.7.21]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67) [:1.0.1]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.interceptor.EJB3TCCLInterceptor.invoke(EJB3TCCLInterceptor.java:86) [:1.7.21]
      at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102) [jboss-aop.jar:2.2.2.GA]
      at org.jboss.ejb3.session.SessionSpecContainer.invoke(SessionSpecContainer.java:333) [:1.7.21]
      at org.jboss.ejb3.session.SessionSpecContainer.invoke(SessionSpecContainer.java:158) [:1.7.21]
      at org.jboss.ejb3.nointerface.impl.invocationhandler.NoInterfaceViewInvocationHandler.invokeEndpoint(NoInterfaceViewInvocationHandler.java:143) [:6.1.0.Final]
      at org.jboss.ejb3.nointerface.impl.invocationhandler.NoInterfaceViewInvocationHandler.access$000(NoInterfaceViewInvocationHandler.java:54) [:6.1.0.Final]
      at org.jboss.ejb3.nointerface.impl.invocationhandler.NoInterfaceViewInvocationHandler$1.invoke(NoInterfaceViewInvocationHandler.java:103) [:6.1.0.Final]
      at org.jboss.ejb3.sis.reflect.InterceptorInvocationHandler$1.proceed(InterceptorInvocationHandler.java:84) [:1.0.0-alpha-1]
      at org.jboss.ejb3.sis.InterceptorAssembly$1.proceed(InterceptorAssembly.java:82) [:1.0.0-alpha-1]
      at org.jboss.ejb3.nointerface.impl.async.AsyncClientInterceptor.invoke(AsyncClientInterceptor.java:119) [:6.1.0.Final]
      at org.jboss.ejb3.sis.InterceptorAssembly$1.proceed(InterceptorAssembly.java:74) [:1.0.0-alpha-1]
      at org.jboss.ejb3.nointerface.impl.invocationhandler.ObjectMethodsInterceptor.invoke(ObjectMethodsInterceptor.java:78) [:6.1.0.Final]
      at org.jboss.ejb3.sis.InterceptorAssembly$1.proceed(InterceptorAssembly.java:74) [:1.0.0-alpha-1]
      at org.jboss.ejb3.sis.InterceptorAssembly.invoke(InterceptorAssembly.java:90) [:1.0.0-alpha-1]
      at org.jboss.ejb3.sis.reflect.InterceptorInvocationHandler.invoke(InterceptorInvocationHandler.java:110) [:1.0.0-alpha-1]
      at org.jboss.ejb3.nointerface.impl.invocationhandler.NoInterfaceViewInvocationHandler.invoke(NoInterfaceViewInvocationHandler.java:115) [:6.1.0.Final]
      at org.jboss.ejb3.proxy.javassist.JavassistInvocationHandlerAdapter.invoke(JavassistInvocationHandlerAdapter.java:71) [:1.0.0]
      at com.sample.view.UserBean_$$_javassist_6.getLazyModel(UserBean_$$_javassist_6.java) [:]
      at sun.reflect.GeneratedMethodAccessor351.invoke(Unknown Source) [:1.6.0_31]
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_31]
      at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_31]
      at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:305) [:6.1.0.Final]
      at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:54) [:6.1.0.Final]
      at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:163) [:6.1.0.Final]
      at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:299) [:6.1.0.Final]
      at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:125) [:6.1.0.Final]
      at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:62) [:6.1.0.Final]
      at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:125) [:6.1.0.Final]
      at com.sample.view.UserBean$Proxy$_$$_Weld$Proxy$.getLazyModel(UserBean$Proxy$_$$_Weld$Proxy$.java) [:]
      at com.sample.view.UserBean$Proxy$_$$_WeldClientProxy.getLazyModel(UserBean$Proxy$_$$_WeldClientProxy.java) [:]
      at sun.reflect.GeneratedMethodAccessor357.invoke(Unknown Source) [:1.6.0_31]
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_31]
      at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_31]
      at javax.el.BeanELResolver.getValue(BeanELResolver.java:302) [:1.0.0.Final]
      at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [:2.1.7-SNAPSHOT]
      at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [:2.1.7-SNAPSHOT]
      at org.apache.el.parser.AstValue.getValue(AstValue.java:134) [:6.1.0.Final]
      at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:187) [:6.1.0.Final]
      at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:55) [:6.1.0.Final]
      at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:55) [:6.1.0.Final]
      at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [:2.1.7-SNAPSHOT]
      ... 45 more
Caused by: java.io.EOFException
      at java.io.DataInputStream.readByte(DataInputStream.java:250) [:1.6.0_31]
      at org.jboss.serial.objectmetamodel.DataContainer$DataContainerDirectInput.readByte(DataContainer.java:716) [:6.1.0.Final]
      at org.jboss.serial.objectmetamodel.ObjectDescriptorFactory.objectFromDescription(ObjectDescriptorFactory.java:64) [:6.1.0.Final]
      at org.jboss.serial.objectmetamodel.DataContainer$DataContainerDirectInput.readObject(DataContainer.java:643) [:6.1.0.Final]
      at org.jboss.ejb3.stateful.StatefulBeanContext.readExternal(StatefulBeanContext.java:1087) [:1.7.21]
      at org.jboss.serial.persister.ExternalizePersister.readData(ExternalizePersister.java:72) [:6.1.0.Final]
      at org.jboss.serial.objectmetamodel.ObjectDescriptorFactory.readObjectDescriptionFromStreaming(ObjectDescriptorFactory.java:412) [:6.1.0.Final]
      at org.jboss.serial.objectmetamodel.ObjectDescriptorFactory.objectFromDescription(ObjectDescriptorFactory.java:82) [:6.1.0.Final]
      at org.jboss.serial.objectmetamodel.DataContainer$DataContainerDirectInput.readObject(DataContainer.java:643) [:6.1.0.Final]
      at org.jboss.serial.io.JBossObjectInputStream.readObjectOverride(JBossObjectInputStream.java:163) [:6.1.0.Final]
      at java.io.ObjectInputStream.readObject(ObjectInputStream.java:344) [:1.6.0_31]
      at org.jboss.ejb3.cache.simple.StatefulSessionFilePersistenceManager.activateSession(StatefulSessionFilePersistenceManager.java:304) [:1.7.21]
      ... 109 more 
```

似乎 jboss 正在尝试恢复一些不可用的可序列化对象。但我可以找出是哪一个。

有人可以帮忙吗？

谢谢

凯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:25:00.110

发生这种情况是因为 SFSB 会话已过期，可能是因为您的 HTTP 会话的超时时间高于 SFSB 的超时时间。可能有帮助的一件事是通过使用注释 @StatefulTimeout 或更改 JBoss AS 配置来增加空闲超时。我这里没有 JBoss AS 6，但请看一下“文件钝化存储”。应该有一个更改“空闲超时”的选项（就像 JBoss AS 7 一样）。

# jekyll - 如何循环浏览 jekyll 帖子中的标签？

> ID：11887929
> 
> 赞同：10
> 
> 时间：2012-08-09T16:33:15.590
> 
> 标签：jekyll

在我的帖子中，我的前面有三个标签，我试图遍历这些标签，但它只是将所有三个标签放在一个字符串中。

我正在使用这个：

```
<tr>
{% for tag in post.tags %}
<td>{{ post.tag }}</td>
{% endfor %}
</tr> 
```

我想要一个开箱即用的解决方案，而不是依赖插件，但我自己托管，所以我可以在必要时使用它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T20:13:48.443

您正在引用`page.tags`而不是仅`tag`在循环中。使用以下内容：

```
<tr>
{% for tag in page.tags %}
<td>{{ tag }}</td>
{% endfor %}
</tr> 
```

[在文档](http://jekyllrb.com/docs/variables/#page-variables)中阅读更多内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T07:36:54.083

好的，我终于想通了。文档中并没有很好地涵盖这一点，但一切都不同。Jekyll 支持**BOTH** `tag: x, y, z` **AND** `tags: x, y, z` - *s*非常重要。这会改变 jekyll 是否会解释多个值或单个值 -`category -> categories`在前面的问题中可以找到相同的问题。

我可能错过了它，因为我正在使用：

```
tag:
- x
- y
- z 
```

这也受支持，但不会返回“x，y，z”的字符串文字，这可能是一个赠品。无论如何，感谢 rudolph9 至少验证了我的总体方向是正确的并且语法捕获。我将他的答案标记为正确答案（因为我是个好人），但您也需要阅读这篇文章才能全面了解 McMeal。

# javascript - 将文本范围选择发送到 zeroclipboard

> ID：11887931
> 
> 赞同：2
> 
> 时间：2012-08-09T16:33:32.283
> 
> 标签：javascript, zeroclipboard

我试图允许用户使用 Javascript 复制页面上的“富文本”以粘贴到 Word / 他们的电子邮件程序等中。

为此，我首先使用此函数创建范围选择：

```
function copyHTMLToClipboard($target) {

    var contents = false;

    if (window.getSelection) {
        contents = window.getSelection();
    } else if (document.getSelection) {
        contents = document.getSelection();
    } else if (document.selection) {
        contents = document.selection.createRange().text;
    }

    if (contents && (contents+'').length > 0) {
        return contents;
    }

}

function copy($target) {
    $target.select();
    contents = copyHTMLToClipboard($target);
} 
```

然后我尝试将输出发送到 zeroclipboard，如下所示：

```
$(".zclip").zclip({
    ...
    copy: function() { contents = copy($target); }
    ...
}); 
```

这会引发错误“未捕获 RangeError：超出最大调用堆栈大小”

请注意，我不希望复制文本，例如：

```
<h1>Something</h1>
<strong>Something else</strong> 
```

我希望文本包含可以粘贴到另一个程序（如 Word/Gmail 等）中的富文本（格式化文本）。基本上，如果您手动选择页面上的文本并复制它，您会得到什么。

我究竟做错了什么？我正在尝试的可能吗？

# java - Google App Engine：编排多个应用程序以提供复合服务

> ID：11887932
> 
> 赞同：0
> 
> 时间：2012-08-09T16:33:32.527
> 
> 标签：java, google-app-engine, web-applications, decoupling, multi-tier

据我所知，GAE 不允许您将不同的 Java 应用程序 (WAR) 上传到不同的实例，并使它们都成为同一个“GAE 应用程序”的一部分。

但是，如果有一个模块化的架构会很好，我有一个主要的 Web 应用程序和多个其他应用程序来帮助主要的应用程序完成它的工作。例如，一个监控应用程序，如果在主应用程序中发生重大事件，它会发送电子邮件警报。一个具有通用输入验证和编码服务的安全应用程序，主应用程序以及未来的其他应用程序都可以使用这些服务。

关键是要有一个已部署的 GAE 应用程序的完整架构，但只有其中一个是最终用户与之交互的“主要应用程序”。而且，我并不是要“欺骗”GAE，因为无论我是否将所有内容都放在一个单一应用程序中，或者是否将所有内容解耦到许多较小的应用程序中，传入/传出带宽都是相同的。他们照样向我收费。

问题是我记得在某处读过 GAE 不鼓励（甚至可能禁止）这种用法。我刚刚通读了服务条款，在任何地方都找不到这些限制，但是如果它不允许，我不想承诺构建一个解耦架构！

有谁知道我是否可以进行这种设置，以及这里对开发人员施加了哪些限制/约束（如果有）？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:39:48.970

[这是限制](https://developers.google.com/appengine/terms)：

> 4.3 限制。客户不会也不会允许在其控制下的第三方：(a) 复制、修改、创建衍生作品、逆向工程、反编译、翻译、反汇编或以其他方式尝试提取服务的源代码或任何其中的组成部分（受以下第 4.4 节的约束）；(b) 将服务用于高风险活动；(c) 分许可、转售或分发服务或其任何组件，与任何集成的客户产品分开；(d) 使用服务来创建实质上相似的产品或服务；**(e) 创建多个应用程序以模拟或充当单个应用程序，或以其他方式访问服务以避免产生费用**; (f) 使用服务来运营或启用任何电信服务或与任何允许最终用户拨打或接听来自任何公共交换电话网络的电话的应用程序相关联；(g) 处理或存储任何受国务院维护的国际武器贸易条例约束的客户内容。客户承认该服务不符合 HIPAA，并且客户对任何适用的 HIPAA 合规性负全部责任。

# python - 来自多个目录的多文件对话框

> ID：11887933
> 
> 赞同：0
> 
> 时间：2012-08-09T16:33:33.730
> 
> 标签：python, wxpython

我正在尝试打开一个可以从多个目录中选择多个文件的多文件对话框。我目前正在使用 wx 作为我的多文件对话框，它非常适合在同一目录中打开多个文件，但是当我尝试选择另一个目录时，最后一个文件被取消选中。即：我希望能够打开 c:\directory1 并单击 file1 然后我去打开 c:\directory2 并单击文件 2 所以我的路径列表应该类似于 "c:\directory1\file1""c:\directory2 \file2" 可以这样做吗？
这是我当前的代码

```
app = wx.App(False)
dialog = wx.FileDialog(None, message="Choose File(s)",
                         defaultDir=startDirectory,
                         style=(wx.FD_OPEN | wx.FD_MULTIPLE))
if dialog.ShowModal() == wx.ID_OK:
    paths = dialog.GetPaths()
    log.info('You chose the following Path(s):')
    for path in paths:
        log.debug('{}'.format(  path))
    dialog.Destroy()
    return paths 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:39:25.793

您需要创建自己的文件对话框类来执行此操作...

# javascript - 如何检查 DST（夏令时）是否有效，如果有效，偏移量？

> ID：11887934
> 
> 赞同：186
> 
> 时间：2012-08-09T16:33:34.197
> 
> 标签：javascript, datetime, dst, timezone-offset, datetime-conversion

这是我需要的一些 JS 代码：

```
var secDiff = Math.abs(Math.round((utc_date-this.premiere_date)/1000));
this.years = this.calculateUnit(secDiff,(86400*365));
this.days = this.calculateUnit(secDiff-(this.years*(86400*365)),86400);
this.hours = this.calculateUnit((secDiff-(this.years*(86400*365))-(this.days*86400)),3600);
this.minutes = this.calculateUnit((secDiff-(this.years*(86400*365))-(this.days*86400)-(this.hours*3600)),60);
this.seconds = this.calculateUnit((secDiff-(this.years*(86400*365))-(this.days*86400)-(this.hours*3600)-(this.minutes*60)),1); 
```

我想在“之前”中获取日期时间，但如果 DST 正在使用，那么日期会延迟 1 小时。我不知道如何检查 DST 是否生效。

我怎么知道夏令时开始和结束的时间？

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2012-08-09T17:04:50.903

此代码使用在标准时间与夏令时 (DST) 期间`getTimezoneOffset`返回*更大*值的事实。因此，它确定标准时间期间的预期输出，并比较给定日期的输出是否相同（标准）或更少（DST）。

请注意，对于 UTC*以西*`getTimezoneOffset`的区域，返回*正*数分钟数，通常表示为*负数*（因为它们“落后于”UTC）。例如，洛杉矶是**UTC-8h** Standard，**UTC-7h** DST。在 12 月（冬季，标准时间）返回（正 480 分钟），而不是. 它返回东半球的*负数*（例如冬季的悉尼，尽管这是“领先”（**UTC+10h**）。******`getTimezoneOffset``480``-480`*`-600`*******

 *********```
Date.prototype.stdTimezoneOffset = function () {
    var jan = new Date(this.getFullYear(), 0, 1);
    var jul = new Date(this.getFullYear(), 6, 1);
    return Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());
}

Date.prototype.isDstObserved = function () {
    return this.getTimezoneOffset() < this.stdTimezoneOffset();
}

var today = new Date();
if (today.isDstObserved()) { 
    alert ("Daylight saving time!");
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-05-16T20:50:42.133

这个答案与接受的答案非常相似，但不会覆盖`Date`原型，并且只使用一个函数调用来检查夏令时是否有效，而不是两个。

* * *

这个想法是，由于没有国家遵守持续七个月的 DST ^([[1]](https://www.timeanddate.com/time/dst/2018.html))，因此在遵守 DST 的地区，1 月与 UTC 时间的偏移将不同于 7 月的偏移。

虽然夏令时将时钟*向前*移动，但 JavaScript在标准时间期间总是返回*更大的值。*因此，获取 1 月和 7 月之间的最小偏移量将获得 DST 期间的时区偏移量。

然后我们检查日期时区是否等于该最小值。如果是，那么我们在 DST；否则我们不是。

以下函数使用此算法。如果夏令时对该日期有效，则它需要一个日期对象，如果不是，则`d`返回：`true``false`

```
function isDST(d) {
    let jan = new Date(d.getFullYear(), 0, 1).getTimezoneOffset();
    let jul = new Date(d.getFullYear(), 6, 1).getTimezoneOffset();
    return Math.max(jan, jul) !== d.getTimezoneOffset();    
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-08-09T17:49:19.170

创建两个日期：一个在六月，一个在一月。比较它们的`getTimezoneOffset()`值。

*   如果 1 月偏移量 > 6 月偏移量，则客户端位于北半球
*   如果 1 月偏移量 < 6 月偏移量，则客户端在南半球
*   如果没有差异，则客户端时区不遵守 DST

现在检查`getTimezoneOffset()`当前日期。

*   如果等于北半球六月，则当前时区为 DST（+1 小时）
*   如果等于 1 月，南半球，则当前时区为 DST（+1 小时）

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-13T17:33:19.180

我今天也遇到了同样的问题，但是由于我们的夏令时开始和结束的时间与美国不同（至少根据我的理解），我使用了一条略有不同的路线。

```
var arr = [];
for (var i = 0; i < 365; i++) {
 var d = new Date();
 d.setDate(i);
 newoffset = d.getTimezoneOffset();
 arr.push(newoffset);
}
DST = Math.min.apply(null, arr);
nonDST = Math.max.apply(null, arr); 
```

然后，您只需将当前时区偏移量与 DST 和 nonDST 进行比较，看看哪个匹配。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-06T11:30:28.250

基于 Matt Johanson 对 Sheldon Griffin 提供的解决方案的评论，我创建了以下代码：

```
 Date.prototype.stdTimezoneOffset = function() {
        var fy=this.getFullYear();
        if (!Date.prototype.stdTimezoneOffset.cache.hasOwnProperty(fy)) {

            var maxOffset = new Date(fy, 0, 1).getTimezoneOffset();
            var monthsTestOrder=[6,7,5,8,4,9,3,10,2,11,1];

            for(var mi=0;mi<12;mi++) {
                var offset=new Date(fy, monthsTestOrder[mi], 1).getTimezoneOffset();
                if (offset!=maxOffset) { 
                    maxOffset=Math.max(maxOffset,offset);
                    break;
                }
            }
            Date.prototype.stdTimezoneOffset.cache[fy]=maxOffset;
        }
        return Date.prototype.stdTimezoneOffset.cache[fy];
    };

    Date.prototype.stdTimezoneOffset.cache={};

    Date.prototype.isDST = function() {
        return this.getTimezoneOffset() < this.stdTimezoneOffset(); 
    }; 
```

考虑到所有评论和先前建议的答案，特别是它，它试图获得所有世界中最好的：

1) 缓存每年 stdTimezoneOffset 的结果，以便在同一年测试多个日期时无需重新计算。

2）它并不假设 DST（如果它存在的话）一定是在 7 月，即使它会在某个时间点和某个地方是任何月份，它也会起作用。但是，如果确实 7 月（或接近几个月）确实是 DST，那么在性能方面它会运行得更快。

3) 更糟糕的情况是它会比较每个月第一天的 getTimezoneOffset。[并且每个测试年执行一次]。

它仍然做出的假设是，如果有 DST 期大于一个月。

如果有人想消除这个假设，他可以将循环更改为更像 Aaron Cole 提供的解决方案中的内容 - 但我仍然会提前半年跳出循环，当找到两个不同的偏移量时，我会跳出循环]

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-11-07T23:29:10.523

JavaScript 中的`getTimezoneOffset()`方法在浏览器中返回从 00:00 时区偏移的分钟数。例如，夏令时 (DST) 中的 America/New_York 时区返回数字 300。300 分钟与零相差 5 小时。300 分钟除以 60 分钟等于 5 小时。每个时区都与零时区比较，+00:00 / Etc/GMT / 格林威治时间。

[MDN 网络文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)

您必须知道的下一件事是偏移量与实际时区的符号相反。

有关时区的信息由 Internet 号码分配机构 (iana) 维护

[伊安娜时区](https://www.iana.org/time-zones)

joda.org 提供了格式良好的时区表

[joda-time 时区](http://www.joda.org/joda-time/timezones.html)

+00:00 或 Etc/GMT 是格林威治时间

所有时区均偏离 +00:00 /“Etc/GMT”/格林威治时间

夏令时总是比夏季的“常规”时间更早。你把你的时钟拨回了秋季。（“后退”口号记住该做什么）

因此，夏令时（冬季）中的 America/New_York 时间比常规时间早一小时。因此，例如，夏季纽约市通常下午 5 点，现在是夏令时美国/纽约时间下午 4 点。名称“America/New_York”时间是“长格式”时区名称。美国东海岸通常将其时区称为东部标准时间 (EST)

如果要将今天的时区偏移量与其他日期的时区偏移量进行比较，则需要知道时区偏移量的数学符号（+/-“正/负”）与时区相反。

查看 joda.org 上的时区表，找到“America/New_York”的时区，它的标准偏移前面会有一个负号。

地球绕其轴逆时针旋转。在格林威治看日出的人比纽约市的人看日出早 5 小时。美国东海岸的人看到日出后，美国西海岸的人会看到日出。

你需要知道这一切是有原因的。这样您就可以在逻辑上确定某些 JavaScript 代码是否正确获取 DST 状态，而无需在一年中的不同时间测试每个时区。

想象一下，现在是纽约市的 11 月，时钟拨快了一个小时。在纽约市的夏季，偏移量为 240 分钟或 4 小时。

您可以通过创建一个 7 月的日期然后获取偏移量来测试这一点。

```
var July_Date = new Date(2017, 6, 1);
var july_Timezone_OffSet = July_Date.getTimezoneOffset();

console.log('july_Timezone_OffSet: ' + july_Timezone_OffSet) 
```

浏览器的开发者工具控制台日志会打印什么？

答案是：240

因此，现在您可以在 1 月创建一个日期，然后查看浏览器返回的冬季时区偏移量。

```
var Jan_Date = new Date(2017, 0, 1);//Month is zero indexed - Jan is zero
var jan_Timezone_OffSet = Jan_Date.getTimezoneOffset();

console.log('jan_Timezone_OffSet: ' + jan_Timezone_OffSet) 
```

答案是：300

显然 300 比 240 大。那么，这是什么意思呢？您是否应该编写代码来测试冬季偏移量是否大于夏季偏移量？还是夏季偏移小于冬季偏移？如果夏季和冬季时区偏移之间存在差异，则您可以假设该时区使用 DST。但这并不能告诉您***今天***是否使用 DST 作为浏览器时区。因此，您需要获取今天的时区偏移量。

```
var today = new Date();
var todaysTimeZone = today.getTimezoneOffset();

console.log('todaysTimeZone : ' + todaysTimeZone) 
```

答案是：？- 取决于一年中的时间

如果今天的时区偏移量和夏季时区偏移量相同，*并且*夏季和冬季时区偏移量不同，那么通过逻辑推论，今天一定不是夏令时。

您可以省略比较夏季和冬季时区偏移量（要知道该时区是否使用 DST），而只需将今天的时区偏移量与夏季 TZ 偏移量进行比较，并始终得到正确答案吗？

```
today's TZ Offset !== Summer TZ Offset 
```

那么，今天是冬天还是夏天？如果您知道，那么您可以应用以下逻辑：

```
if ( it_is_winter && ( todays_TZ_Offset !== summer_TZ_Offset) {
  var are_We_In_DST = true;
} 
```

但问题是，你不知道今天的日期是在冬天还是夏天。每个时区都可以有自己的 DST 何时开始和停止的规则。您需要跟踪世界上每个时区的每个时区规则。所以，如果有更好更简单的方法，那么你不妨用更好更简单的方法来做。

我们剩下的就是，你需要知道这个时区是否使用 DST，然后将今天的时区偏移量与夏季时区偏移量进行比较。这总会给你一个可靠的答案。

最后的逻辑是：

```
if ( DST_Is_Used_In_This_Time_Zone && ( todays_TZ_Offset !== summer_TZ_Offset) {
  var are_We_In_DST = true;
} 
```

判断浏览器中时区是否使用夏令时的函数：

```
function is_DST_Used_In_This_TimeZone() {
  var Jan_Date, jan_Timezone_OffSet, July_Date, july_Timezone_OffSet 
      offsetsNotEqual, thisYear, today;

  today = new Date();//Create a date object that is now
  thisYear = today.getFullYear();//Get the year as a number

  Jan_Date = new Date(thisYear, 0, 1);//Month is zero indexed - Jan is zero
  jan_Timezone_OffSet = Jan_Date.getTimezoneOffset();

  console.log('jan_Timezone_OffSet: ' + jan_Timezone_OffSet)

  July_Date = new Date(thisYear, 6, 1);
  july_Timezone_OffSet = July_Date.getTimezoneOffset();

  console.log('july_Timezone_OffSet: ' + july_Timezone_OffSet)

  offsetsNotEqual = july_Timezone_OffSet !== jan_Timezone_OffSet;//True if not equal

  console.log('offsetsNotEqual: ' + offsetsNotEqual);

  return offsetsNotEqual;//If the offsets are not equal for summer and
       //winter then the only possible reason is that DST is used for
       //this time zone
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-10-03T14:49:58.443

moment.js库为其时间对象提供了一个[方法](https://momentjs.com)[`.isDst()`](https://momentjs.com/docs/#/query/is-daylight-saving-time/)。

> moment#isDST 检查当前时刻是否处于夏令时。

```
moment([2011, 2, 12]).isDST(); // false, March 12 2011 is not DST
moment([2011, 2, 14]).isDST(); // true, March 14 2011 is DST 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-06-03T14:14:00.057

# 适用于所有时区的面向未来的解决方案

1.  让我们`x`在不考虑夏令时的情况下进入感兴趣的年份的预期毫秒数。
2.  让我们成为从感兴趣日期开始的[纪元](https://en.wikipedia.org/wiki/Epoch_(computing))`y`以来的毫秒数。
3.  让我们成为自感兴趣的完整日期和时间的[纪元](https://en.wikipedia.org/wiki/Epoch_(computing))`z`以来的毫秒数
4.  让`t`是 和`x`的`y`减法`z`: `z - y - x`。这会产生由于 DST 引起的偏移量。
5.  如果`t`为零，则 DST 无效。如果`t`不为零，则 DST 有效。

```
"use strict";
function dstOffsetAtDate(dateInput) {
    var fullYear = dateInput.getFullYear()|0;
    // "Leap Years are any year that can be exactly divided by 4 (2012, 2016, etc)
    //   except if it can be exactly divided by 100, then it isn't (2100,2200,etc)
    //    except if it can be exactly divided by 400, then it is (2000, 2400)"
    // (https://www.mathsisfun.com/leap-years.html).
    var isLeapYear = ((fullYear & 3) | (fullYear/100 & 3)) === 0 ? 1 : 0;
    // (fullYear & 3) = (fullYear % 4), but faster
    //Alternative:var isLeapYear=(new Date(currentYear,1,29,12)).getDate()===29?1:0
    var fullMonth = dateInput.getMonth()|0;
    return (
        // 1\. We know what the time since the Epoch really is
        (+dateInput) // same as the dateInput.getTime() method
        // 2\. We know what the time since the Epoch at the start of the year is
        - (+new Date(fullYear, 0)) // day defaults to 1 if not explicitly zeroed
        // 3\. Now, subtract what we would expect the time to be if daylight savings
        //      did not exist. This yields the time-offset due to daylight savings.
        - ((
            ((
                // Calculate the day of the year in the Gregorian calendar
                // The code below works based upon the facts of signed right shifts
                //    • (x) >> n: shifts n and fills in the n highest bits with 0s 
                //    • (-x) >> n: shifts n and fills in the n highest bits with 1s
                // (This assumes that x is a positive integer)
                -1 + // first day in the year is day 1
                (31 & ((-fullMonth) >> 4)) + // January // (-11)>>4 = -1
                ((28 + isLeapYear) & ((1-fullMonth) >> 4)) + // February
                (31 & ((2-fullMonth) >> 4)) + // March
                (30 & ((3-fullMonth) >> 4)) + // April
                (31 & ((4-fullMonth) >> 4)) + // May
                (30 & ((5-fullMonth) >> 4)) + // June
                (31 & ((6-fullMonth) >> 4)) + // July
                (31 & ((7-fullMonth) >> 4)) + // August
                (30 & ((8-fullMonth) >> 4)) + // September
                (31 & ((9-fullMonth) >> 4)) + // October
                (30 & ((10-fullMonth) >> 4)) + // November
                // There are no months past December: the year rolls into the next.
                // Thus, fullMonth is 0-based, so it will never be 12 in Javascript

                (dateInput.getDate()|0) // get day of the month

            )&0xffff) * 24 * 60 // 24 hours in a day, 60 minutes in an hour
            + (dateInput.getHours()&0xff) * 60 // 60 minutes in an hour
            + (dateInput.getMinutes()&0xff)
        )|0) * 60 * 1000 // 60 seconds in a minute * 1000 milliseconds in a second
        - (dateInput.getSeconds()&0xff) * 1000 // 1000 milliseconds in a second
        - dateInput.getMilliseconds()
    );
}

// Demonstration:
var date = new Date(2100, 0, 1)
for (var i=0; i<12; i=i+1|0, date.setMonth(date.getMonth()+1|0))
    console.log(date.getMonth()+":\t"+dstOffsetAtDate(date)/60/60/1000+"h\t"+date);
date = new Date(1900, 0, 1);
for (var i=0; i<12; i=i+1|0, date.setMonth(date.getMonth()+1|0))
    console.log(date.getMonth()+":\t"+dstOffsetAtDate(date)/60/60/1000+"h\t"+date);

// Performance Benchmark:
console.time("Speed of processing 16384 dates");
for (var i=0,month=date.getMonth()|0; i<16384; i=i+1|0)
    date.setMonth(month=month+1+(dstOffsetAtDate(date)|0)|0);
console.timeEnd("Speed of processing 16384 dates");
```

我相信，出于多种原因，上述代码片段优于此处发布的所有其他答案。

*   这个答案适用于所有时区，甚至是[Antarctica/Cas​​ey](https://en.wikipedia.org/wiki/Antarctica/Casey)。
*   夏令时非常容易发生变化。可能是从现在开始的 20 年后，某些国家/地区可能有 3 个 DST 周期，而不是正常的 2 个。此代码通过以毫秒为单位返回 DST 偏移量来处理这种情况，而不仅仅是 DST 是否有效。
*   一年中月份的大小和闰年的工作方式非常适合让我们的时间与太阳保持同步。哎呀，它工作得如此完美，以至于我们所做的只是[在这里和那里调整几秒钟](https://en.wikipedia.org/wiki/Leap_second)。我们目前的闰年系统自[1582 年 2 月 24 日](https://en.wikipedia.org/wiki/Gregorian_calendar#Gregorian_reform)起生效，并且在可预见的未来可能会继续有效。
*   此代码适用于不使用 DST 的时区。
*   此代码在实施 DST 之前的历史时期（例如 1900 年代）有效。
*   这段代码最大程度地进行了整数优化，如果在紧密循环中调用，应该不会有任何问题。运行上面的代码片段后，向下滚动到输出的底部以查看性能基准。我的电脑能够在 FireFox 上在 29 毫秒内处理 16384 个日期。

但是，如果您不准备超过 2 个 DST 时段，则可以使用以下代码来确定 DST 是否作为布尔值有效。

```
function isDaylightSavingsInEffect(dateInput) {
    // To satisfy the original question
    return dstOffsetAtDate(dateInput) !== 0;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-03T20:10:33.283

我发现使用[Moment.js](https://momentjs.com/docs/#/query/is-daylight-saving-time/)库和这里描述的一些概念（比较一月到六月）效果很好。

这个简单的函数将返回用户所在的时区是否遵守夏令时：

```
function HasDST() {
    return moment([2017, 1, 1]).isDST() != moment([2017, 6, 1]).isDST();
} 
```

检查这是否有效的一种简单方法（在 Windows 上）是将您的时区更改为非 DST 区域，例如 Arizona 将返回 false，而 EST 或 PST 将返回 true。

[![在此处输入图像描述](../Images/eb856ad7f72d9e867241c0a8a73cc86f.png)](https://i.stack.imgur.com/kkLZp.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-20T11:54:04.997

你很接近，但有点偏离。您永远不需要计算自己的时间，因为它是您自己时钟的结果。它可以检测您是否在您的位置使用夏令时，但不能检测偏移量产生的远程位置：

```
newDateWithOffset = new Date(utc + (3600000*(offset))); 
```

如果他们在 DST，这仍然是错误的并且会关闭一个小时。如果他们当前是否在 DST 内，您需要一个远程时间帐户并进行相应调整。尝试计算这个并将您的时钟更改为 - 比如说 2015 年 2 月 1 日，然后将时钟重新设置一个小时，就像在 DST 之外一样。然后计算一个仍应落后 2 小时的地方的偏移量。它将比两小时窗口提前一小时显示。您仍然需要考虑时间并进行调整。我为纽约和丹佛做了这件事，在丹佛总是走错（提前一小时）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-06T09:46:29.740

使用 Moment.js ( [https://momentjs.com/](https://momentjs.com/) )

`moment().isDST();`如果观察到夏令时会给你。

它还具有帮助功能来为您计算相对时间。您不需要进行手动计算，例如`moment("20200105", "YYYYMMDD").fromNow();`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-30T07:56:46.047

**更新：** 尝试在自定义`datetime`选择器中使用这些功能后，我注意到从 3 月切换到 4 月会按预期切换时区，因为我的区域在 3 月切换 DST。出乎意料的是，它切换到下一个时区，而不是在同一时区的标准和日光之间切换。

原来那是因为我的原始函数总是`new Date()`为当前时间或过去的任意固定时间创建。将其与 3 月和 4 月的相对时间进行比较意味着它会在逻辑上将 DST 切换检测为切换时区。

解决方案是将相对时间传递给效用函数，因此我所有的比较都是针对相对时间而不是现在或任意固定时间。失去了一些紧凑性，但现在逻辑可以根据需要工作。

工作流程更新：

*   `t`参数默认为`new Date()`
    *   对于固定时间，传入现有的`Date`
    *   对于当前时间，传入`null`或不传入
*   `std()`更新以用于`t.setMonth(v);`更改固定时间的月份
    *   `.getTimezoneOffset()`不能链接到`.setMonth()`，因此我们需要从单行表示法转换为使用闭包 ( `{}`)、终止符 ( `;`) 和`return`
*   `console.log()`每个月的示例循环（`0`到`11`）
    *   固定日期对象需要使用相同的时间戳 ( `let ts = +t;`)进行克隆
    *   `+`before`Date`类型将其转换为带有`number`Unix 时间戳的 a
    *   `Date()`也接受 Unix 时间戳来创建固定时间
    *   如果我们不克隆它，每个调用都会传递同一个`Date`对象，并将月份设置为`6`，这违背了目的
    *   好的，我们实际上并没有克隆，只是使用相同的设置创建一个新对象；相同的区别;)

```
let ns = {
  std: (t = new Date()) => Math.max(...[0, 6].map(v => {
    t.setMonth(v);
    return t.getTimezoneOffset();
  })),
  is_dst: (t = new Date()) => t.getTimezoneOffset() < ns.std(t),
  utc: (t, std = 0) => {
    t = t || new Date();
    let z = std ? ns.std(t) : t.getTimezoneOffset(),
      zm = z % 60;
    return 'UTC' + (z > 0 ? '-' : '+') + (z / 60) + (zm ? ':' + zm : '');
  }
};

//current time only
console.log(ns.std(), ns.is_dst(), ns.utc(), ns.utc(null, 1));

//iterate each month
let t = new Date(2021,0,1);
for (let i = 0; i < 12; i++) {
  t.setMonth(i);
  let ts = +t;
  console.log(t.toDateString().split(" ")[1], ns.std(new Date(ts)), ns.is_dst(new Date(ts)), ns.utc(new Date(ts)), ns.utc(new Date(ts), 1));
}
```

* * *

扩展来自 @nkitku 的紧凑和神秘的解决方案，将其变成一组可重用的功能。

工作流程：

*   所有函数都在一个命名空间中`ns`，因此它们不会与代码中可能具有相同名称的其他函数冲突
    *   命名空间还允许紧凑的函数表示法；`std: ()=>Math.max(),`相当于`function std(){ return Math.max(); }`
*   `std()`返回标准时间的时区偏移量
*   `[0, 6]`设置没有 DST 的月份和有 DST 的月份的比较
    *   `0`一月，因为`Date.setMonth()`是零索引
    *   `6`七月
    *   显然，每个人的标准时间都不是在一月，所以我们必须检查一月和七月
*   `...[]`将`Array`月份转换为 a `Set`，以便我们可以应用该`map()`函数
    *   原始数组无法运行`map()`
    *   `map()`在同一个函数上运行一组变量并返回一个结果数组
*   `Date`用年、月、日 创建一个新对象
    *   年份（`95`在示例中）是任意的，因为年份对于此计算并不重要
    *   月份将我们的值`[0, 6]`作为变量插入`v`
    *   日期（`1`在示例中）也是任意的
    *   逻辑上我们可以创建一个`new Date()`, then `.setMonth(v)`，但是使用任意数字更紧凑和更快
*   现在我们有了日期，`getTimezoneOffset()`返回每个月的偏移量并将它们推送到结果数组
*   `Math.max()`从结果中找到最大值，这将是标准时间偏移
*   `is_dst()`检查当前是否为夏令时
    *   `new Date().getTimezoneOffset()`获取当前偏移量，带或不带 DST
    *   `ns.std()`获取标准时间的偏移量
    *   如果当前偏移量较低，则为 DST
*   `utc()`以 UTC 表示法返回一个字符串
    *   该`std`参数默认为关闭
    *   `z = std ? ns.std() : new Date().getTimezoneOffset()`根据标志将时间设置为 DST 或标准
    *   `zm = z % 60`捕获分钟，因为例如某些区域使用 30 分钟
    *   `(z > 0 ? '-' : '+')`根据 UTC 符号分配正确的符号；正偏移值在符号中显示为负偏移
    *   `(z / 60)``.toString().padStart(2,'0`根据符号以单位数格式捕获小时数，因此对于两位数格式无需)`
    *   `(zm ? ':' + zm : '')`如果时区存在分钟，则附加分钟

由于此版本旨在紧凑，因此您可以通过去除多余的空白来节省更多空间。尽管这确实是缩小器的工作。

`std:()=>Math.max(...[0,6].map(v=>new Date(95,v,1).getTimezoneOffset())),`

```
const ns = {
  std: () => Math.max(...[0, 6].map(v => new Date(95, v, 1).getTimezoneOffset())),
  is_dst: () => new Date().getTimezoneOffset() < ns.std(),
  utc: (std = 0) => {
    let z = std ? ns.std() : new Date().getTimezoneOffset(),
      zm = z % 60;
    return 'UTC' + (z > 0 ? '-' : '+') + (z / 60) + (zm ? ':' + zm : '');
  }
};

console.log(ns.std(), ns.is_dst(), ns.utc(), ns.utc(1));
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-09-29T23:49:06.900

我最近需要使用 UTC 和 DST 创建一个日期字符串，并根据 Sheldon 的回答我把它放在一起：

```
Date.prototype.getTimezone = function(showDST) {
    var jan = new Date(this.getFullYear(), 0, 1);
    var jul = new Date(this.getFullYear(), 6, 1);

    var utcOffset = new Date().getTimezoneOffset() / 60 * -1;
    var dstOffset = (jan.getTimezoneOffset() - jul.getTimezoneOffset()) / 60;

    var utc = "UTC" + utcOffset.getSign() + (utcOffset * 100).preFixed(1000);
    var dst = "DST" + dstOffset.getSign() + (dstOffset * 100).preFixed(1000);

    if (showDST) {
        return utc + " (" + dst + ")";
    }

    return utc;
}
Number.prototype.preFixed = function (preCeiling) {
    var num = parseInt(this, 10);
    if (preCeiling && num < preCeiling) {
        num = Math.abs(num);
        var numLength		 = num.toString().length;
        var preCeilingLength = preCeiling.toString().length;
        var preOffset		 = preCeilingLength - numLength;
        for (var i = 0; i < preOffset; i++) {
            num = "0" + num;
        }
    }
    return num;
}
Number.prototype.getSign = function () {
    var num	 = parseInt(this, 10);
    var sign = "+";
    if (num < 0) {
        sign = "-";
    }
    return sign;
}

document.body.innerHTML += new Date().getTimezone() + "<br>";
document.body.innerHTML += new Date().getTimezone(true);
```

```
<p>Output for Turkey (UTC+0200) and currently in DST: &nbsp; UTC+0300 (DST+0100)</p>
<hr>
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-17T11:11:21.553

使用[https://date-fns.org/v2.22.1/docs/Time-Zones](https://date-fns.org/v2.22.1/docs/Time-Zones)可以用一行来解决

new Date().getUTCHours() + getTimezoneOffset('Europe/Amsterdam') / 1000 / 60 / 60;

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-12-10T14:11:52.533

使用有问题吗`Date.toString().indexOf('Daylight Time') > -1`

`"" + new Date()`

> 1 月 1 日星期六 100050 00:00:00 GMT-0500（东部**标准**时间）

`"" + new Date(...)`

> Sun May 01 100033 00:00:00 GMT-0400（东部**夏令**时间）

这似乎与所有浏览器兼容。*********

# c++ - 如何使 QPushButton 可按下回车键？

> ID：11887938
> 
> 赞同：38
> 
> 时间：2012-08-09T16:33:47.510
> 
> 标签：c++, qt, qpushbutton

我想让我的应用程序对笔记本电脑友好。我可以在任何地方使用标签，但是如果我在[QPushButton](http://qt-project.org/doc/qt-4.8/qpushbutton.html)上进行标签，我不能用 按下它`Enter`，只能用`space`.
有什么问题？如何使其可压`Enter`？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-05-31T06:49:56.110

# tl;博士

1.  在 Qt Creator 的 UI 视图中，选择要使其可按下的按钮`Enter`。
2.  在 Property Editor 的右侧向下滚动到标题为 的蓝色部分`QPushButton`。
3.  `autoDefault`通过或选中复选框`default`。

![属性编辑器](../Images/320123fb3876a21d9075b581a65f9eb4.png)

`autoDefault`大多数情况下，两者之间的主要区别在于`default`按钮的呈现方式。但在某些情况下，它可能会导致意想不到的事情，因此有关更多信息，请阅读下文。

* * *

# 全面审查

## 概述

每个`QPushButton`都有 3 个未继承的属性。从这些来看，当我们在 s 上放置按钮时，两个 (`default`和`autoDefault`) 起着主要作用`QDialog`，因为这些设置（以及对其中一个按钮的焦点）决定了如果我们按下 将按下哪个按钮`Enter`。
默认情况下，所有这些属性都设置为 false。`autoDefault`如果按钮有`QDialog`父级，唯一的期望是正确的。

每次按下`space`按钮时，焦点都会被按下。下面将描述如果按 会发生什么`Enter`。

### 默认属性

如果设置为 true，则该按钮将是*默认按钮*。
如果`Enter`在对话框上按下 ，则将按下此按钮，除非焦点位于自动默认按钮上。

应该只有一个默认按钮。如果您添加更多，那么最后添加的将是默认按钮。

### 自动默认属性

如果设置为 true，则该按钮将是一个*autoDefault button*。
如果`Enter`在对话框上按下 ，则如果焦点在其上，则将按下此按钮。

如果焦点不在自动默认按钮上并且没有默认按钮，则将按下下一个自动默认按钮`Enter`。

### 平房

如果设置为 true，那么按钮的边框将不会被提升。

## 示例表

下表显示了在不同焦点上使用不同按钮将按下哪个按钮。按钮是从左到右添加的。

![常规、自动默认和默认按钮](../Images/c22ac6d759a64440897803e0a417e817.png)

![常规和自动默认按钮](../Images/c06b201ef6642550c109e4621c76b700.png)

## 测试代码

以下代码是一种向对话框添加按钮的方法。它可用于通过更改和/或的`boolean`值进行测试。 您只需要创建一个窗口，添加一个被调用和一个被调用（即默认命名）。别忘了。然后将此代码复制到按钮的信号中：`setDefault()``setAutoDefault()`
`QPushButton``pushButton``QLabel``label``#include <QMessageBox>``clicked()`

```
void MainWindow::on_pushButton_clicked()
{
   QMessageBox msgBox;

   QPushButton button("Button");
   button.setDefault(false);
   button.setAutoDefault(false);
   msgBox.addButton(&button, QMessageBox::ActionRole);

   QPushButton autodefaultbutton("AutoDefault Button");
   autodefaultbutton.setDefault(false);
   autodefaultbutton.setAutoDefault(true);
   msgBox.addButton(&autodefaultbutton, QMessageBox::ActionRole);

   QPushButton autodefaultbutton2("AutoDefault Button2");
   autodefaultbutton2.setDefault(false);
   autodefaultbutton2.setAutoDefault(true);
   msgBox.addButton(&autodefaultbutton2, QMessageBox::ActionRole);

   QPushButton defaultbutton("Default Button");
   defaultbutton.setDefault(true);
   defaultbutton.setAutoDefault(false);
   msgBox.addButton(&defaultbutton, QMessageBox::ActionRole);

   msgBox.exec();

   if (msgBox.clickedButton() == &button) {
      ui->label->setText("Button");
   } else if (msgBox.clickedButton() == &defaultbutton) {
      ui->label->setText("Default Button");
   } else if (msgBox.clickedButton() == &autodefaultbutton) {
      ui->label->setText("AutoDefault Button");
   } else if (msgBox.clickedButton() == &autodefaultbutton2) {
      ui->label->setText("AutoDefault Button2");
   }
} 
```

## 展示

如果你编译代码，你可以得到这个窗口。您甚至不必单击按钮，因为操作系统呈现它们的方式显示了如果您按`Enter`或将按下哪个按钮`space`。

![操作系统呈现的按钮](../Images/6a22115c01afc730acfd0cb781fc4ad2.png)

## 官方文档

这个答案大部分是根据官方文档做出的。Qt 制作
的[QPushButton 文档说明了这些：](http://qt-project.org/doc/qt-4.8/qpushbutton.html#autoDefault-prop)

> 默认和自动默认按钮决定当用户在对话框中按下回车时会发生什么。
> 
> 当用户按下回车键时，将自动按下此属性设置为 true 的按钮（即对话框的默认按钮），但有一个例外：如果 autoDefault 按钮当前具有焦点，则按下 autoDefault 按钮。当对话框有 autoDefault 按钮但没有默认按钮时，按 enter 将按下当前具有焦点的 autoDefault 按钮，或者如果没有按钮具有焦点，则按下焦点链中的下一个 autoDefault 按钮。
> 
> 在对话框中，一次只能有一个按钮作为默认按钮。然后，此按钮会显示一个附加框架（取决于 GUI 样式）。
> 
> 默认按钮行为仅在对话框中提供。当按钮具有焦点时，始终可以通过按空格键从键盘单击按钮。
> 
> 如果在对话框可见时当前默认按钮的默认属性设置为 false，则下次对话框中的按钮获得焦点时将自动分配新的默认值。

[检查QDialog](http://qt-project.org/doc/qt-4.8/qdialog.html)和[QMessageBox](http://qt-project.org/doc/qt-4.8/qmessagebox.html)也是值得的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:43:54.560

根据 Qt 的文档 Enter 应该可以工作

> 默认情况下，对话框中的命令按钮是自动默认按钮，即当它们接收到键盘输入焦点时，它们会自动成为默认按钮。默认按钮是当用户在对话框中按下 Enter 或 Return 键时激活的按钮。您可以使用 setAutoDefault() 更改此设置。

[http://qt-project.org/doc/qt-4.8/qpushbutton.html](http://qt-project.org/doc/qt-4.8/qpushbutton.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-30T10:25:00.410

totymedli 的回答很棒。我添加了一个小程序来测试 isDefault、autoDefault、setDefault 和 setAutoDefault 函数的各种组合。

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class Window(QDialog):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        autoDefaultInitialState = True
        defaultInitialState = False

        self.lineEdit1 = QLineEdit(self)
        self.lineEdit2 = QLineEdit(self)
        self.lineEdit3 = QLineEdit(self)

        # if we create a new button (e.g. "Print state"), with the same function,
        # it doesn't work, because adding a new button (apart from our 3 buttons)
        # produces total mess, so we use this lineedit for this purpose
        self.lineEdit1.returnPressed.connect(self.printState)

        #------------------------------------

        self.chkAutoDefaultOk = QCheckBox('OK setAutoDefault', self)
        self.chkAutoDefaultCancel = QCheckBox('Cancel setAutoDefault', self)
        self.chkAutoDefaultApply = QCheckBox('Apply setAutoDefault', self)

        self.chkDefaultOk = QCheckBox('OK setDefault', self)
        self.chkDefaultCancel = QCheckBox('Cancel setDefault', self)
        self.chkDefaultApply = QCheckBox('Apply setDefault', self)

        self.chkAutoDefaultOk.setChecked(autoDefaultInitialState)
        self.chkAutoDefaultCancel.setChecked(autoDefaultInitialState)
        self.chkAutoDefaultApply.setChecked(autoDefaultInitialState)

        self.chkDefaultOk.setChecked(defaultInitialState)
        self.chkDefaultCancel.setChecked(defaultInitialState)
        self.chkDefaultApply.setChecked(defaultInitialState)

        #------------------------------------

        self.pushButtonOk = QPushButton(self)
        self.pushButtonOk.setText("Ok")
        self.pushButtonOk.clicked.connect(lambda : print('ok'))

        self.pushButtonCancel = QPushButton(self)
        self.pushButtonCancel.setText("Cancel")
        self.pushButtonCancel.clicked.connect(lambda : print('cancel'))

        self.pushButtonApply = QPushButton(self)
        self.pushButtonApply.setText("Apply")
        self.pushButtonApply.clicked.connect(lambda : print('apply'))

        #------------------------------------

        self.pushButtonOk.setAutoDefault(autoDefaultInitialState)
        self.pushButtonCancel.setAutoDefault(autoDefaultInitialState)
        self.pushButtonApply.setAutoDefault(autoDefaultInitialState)

        self.pushButtonOk.setDefault(defaultInitialState)
        self.pushButtonCancel.setDefault(defaultInitialState)
        self.pushButtonApply.setDefault(defaultInitialState)

        #------------------------------------

        self.chkAutoDefaultOk.stateChanged.connect(self.chkChangeState)
        self.chkAutoDefaultCancel.stateChanged.connect(self.chkChangeState)
        self.chkAutoDefaultApply.stateChanged.connect(self.chkChangeState)

        self.chkDefaultOk.stateChanged.connect(self.chkChangeState)
        self.chkDefaultCancel.stateChanged.connect(self.chkChangeState)
        self.chkDefaultApply.stateChanged.connect(self.chkChangeState)

        #------------------------------------

        self.layout = QGridLayout(self)
        self.layout.addWidget(self.lineEdit1, 0, 0, 1, 3)
        self.layout.addWidget(self.lineEdit2, 1, 0, 1, 3)
        self.layout.addWidget(self.lineEdit3, 2, 0, 1, 3)

        self.layout.addWidget(self.chkAutoDefaultOk, 3, 0)
        self.layout.addWidget(self.chkAutoDefaultCancel, 3, 1)
        self.layout.addWidget(self.chkAutoDefaultApply, 3, 2)

        self.layout.addWidget(self.chkDefaultOk, 4, 0)
        self.layout.addWidget(self.chkDefaultCancel, 4, 1)
        self.layout.addWidget(self.chkDefaultApply, 4, 2)

        self.layout.addWidget(self.pushButtonOk, 5, 0)
        self.layout.addWidget(self.pushButtonCancel, 5, 1)
        self.layout.addWidget(self.pushButtonApply, 5, 2)

    def chkChangeState(self):
        obj = self.sender()
        if (obj == self.chkAutoDefaultOk):
            self.pushButtonOk.setAutoDefault(self.chkAutoDefaultOk.isChecked())
        elif (obj == self.chkAutoDefaultCancel):
            self.pushButtonCancel.setAutoDefault(self.chkAutoDefaultCancel.isChecked())
        elif (obj == self.chkAutoDefaultApply):
            self.pushButtonApply.setAutoDefault(self.chkAutoDefaultApply.isChecked())
        elif (obj == self.chkDefaultOk):
            self.pushButtonOk.setDefault(self.chkDefaultOk.isChecked())
        elif (obj == self.chkDefaultCancel):
            self.pushButtonCancel.setDefault(self.chkDefaultCancel.isChecked())
        elif (obj == self.chkDefaultApply):
            #print('sender: self.chkDefaultApply')
            #print('before: ', self.pushButtonApply.isDefault())
            self.pushButtonApply.setDefault(self.chkDefaultApply.isChecked())
            #print('after: ', self.pushButtonApply.isDefault())

    def printState(self):
        print(self.pushButtonOk.autoDefault(), self.pushButtonCancel.autoDefault(), self.pushButtonApply.autoDefault())
        print(self.pushButtonOk.isDefault(), self.pushButtonCancel.isDefault(), self.pushButtonApply.isDefault())
        print('-' * 50)

app = QApplication(sys.argv)
main = Window()
main.show()
sys.exit(app.exec_()) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-10T05:21:20.817

设置小部件的标签顺序。这将允许使用返回键进行点击。默认情况下，它在 Qt 中。

# java - ThreadPoolExecutor 限制线程数

> ID：11887939
> 
> 赞同：1
> 
> 时间：2012-08-09T16:33:49.403
> 
> 标签：java, multithreading

我正在尝试创建具有一定数量线程的 ThreadPoolExecutor，但同时，我想控制池队列的大小。所以我使用完整的构造函数创建了执行器：

```
 BlockingQueue<Runnable> pq =
     new ArrayBlockingQueue<Runnable>(MAX_THREADPOOL_SIZE);
 ThreadPoolExecutor threadPoolExecutor =
     new ThreadPoolExecutor(threadSize, threadSize, THREAD_IDLE_WAIT,
          TimeUnit.SECONDS, pq); 
```

但是，这给了我一个`IllegalArgumentException`. 如果我将构造函数更改为

```
new ThreadPoolExecutor(threadSize, **threadSize+1**, THREAD_IDLE_WAIT,
     TimeUnit.SECONDS, pq); 
```

有用。如果我希望理想的线程数和最大线程数相同，为什么它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:48:49.850

来自[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html#ThreadPoolExecutor%28int,%20int,%20long,%20java.util.concurrent.TimeUnit,%20java.util.concurrent.BlockingQueue%29)：如果 corePoolSize 或 keepAliveTime 小于零，或者如果 maximumPoolSize 小于或等于零，或者如果**corePoolSize 大于 maximumPoolSize**。所以它们也可以相等。我也尝试过用相等的值构造并且它有效。也许源代码可以帮助您找出问题所在：

```
if (corePoolSize < 0 ||
    maximumPoolSize <= 0 ||
    maximumPoolSize < corePoolSize ||
    keepAliveTime < 0)
    throw new IllegalArgumentException(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:07:10.090

我看不出你的初始代码应该抛出的原因。如果您将来提供*完整的例外情况，我们可以提供更具体的帮助。*

要记住的一件事是，`BlockingQueue`一旦队列已满，使用有界将引发异常。这很少是你所期望的。如果您看一下我对以下问题的回答，您会发现您需要配置一个`RejectedExecutionHandler`：

> [如果需要处理的数据太多，如何让 ThreadPoolExecutor 命令等待？](https://stackoverflow.com/questions/10353173/how-can-i-make-threadpoolexecutor-command-wait-if-theres-too-much-data-it-needs/10353250#10353250)

要从那里复制，您需要执行以下操作：

```
final BlockingQueue queue = new ArrayBlockingQueue<Runnable>(200);
ThreadPoolExecutor threadPool = new ThreadPoolExecutor(nThreads, nThreads,
           0L, TimeUnit.MILLISECONDS, queue);
// by default (unfortunately) the ThreadPoolExecutor will throw an exception
// when you submit the 201st job, to have it block you do:
threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {
   public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
      // this will block if the queue is full
      executor.getQueue().put(r);
   }
}); 
```

最后，如果您的最大线程大小大于核心线程大小，您必须意识到队列将在分配超过核心大小的任何其他线程*之前填满。*奇怪但真实。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T16:37:21.777

改为使用工厂方法来获取恒定数量的线程。

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool(int](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool(int) )

然后根据需要设置超时。

```
ThreadPoolExecutor exec = (ThreadPoolExecutor)Executors.newFixedThreadPool(threadSize);
exec.setKeepAliveTime(THREAD_IDLE_WAIT, TimeUnit.SECONDS); 
```

# jsf-2 - jsf 2为每个请求创建的会话bean

> ID：11887940
> 
> 赞同：2
> 
> 时间：2012-08-09T16:33:55.607
> 
> 标签：jsf-2

你好

我有 2 个托管 bean，一个 View 范围内，另一个 Session 范围内。View 作用域 bean 定义为

```
@ManagedBean
@ViewScoped
public class InvoiceController implements Serializable {
  private static final long serialVersionUID = 1L;

  @ManagedProperty(value="#{invoiceService}")
  private InvoiceService invoiceService; 
```

会话范围的 bean 为

```
@ManagedBean
@SessionScoped
public class InvoiceService implements Serializable{ 
```

我正在使用会话范围的 bean 来保存一个用于决定是否应该呈现面板的标志，当我通过调试运行它时，我发现每次调用 sesison bean 上的方法时，它都是 bean 的一个新实例因此在请求之间不保留我的标志的值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T16:59:40.327

如果您是从包中导入`@SessionScoped`而[`javax.enterprise.context`](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/SessionScoped.html)不是从包中导入，则可能会发生这种情况[`javax.faces.bean`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/SessionScoped.html)。前者仅适用于 CDI [`@Named`](http://docs.oracle.com/javaee/6/api/javax/inject/Named.html)bean，而后者[`@ManagedBean`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html)仅适用于 JSF bean。

`@ManagedBean`没有任何有效范围的 JSF将默认为[`@NoneScoped`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/NoneScoped.html)这意味着它是在每个引用 bean 的单个 EL 表达式上新建的，例如[`@ManagedProperty`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedProperty.html). 这解释了您所看到的症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:30:50.993

我有一个类似的问题。我在视图范围 bean 中使用了一个保存方法，它调用会话范围 bean 中的一个方法来更新一些值。

这是我通过调试发现的（请原谅我的非 Java 大师英语）：

首次加载页面时，注入的会话 bean 的实例编号例如为 111111。但是在保存方法（以及由命令按钮或操作侦听器等操作调用的所有其他方法）中，会话 bean 突然是另一个实例（比如 222222）。

两个实例 111111 和 222222 包含完全相同的值。我现在调用的所有方法都是在 222222 实例中完成的，并且它在其中更改了我想要的值。但是 111111 实例保持不变。

所以 222222 基本上是 111111 的深层（？）克隆，甚至不是副本。

但是，在保存方法完成并重新加载页面后，原始 111111 实例再次在视图范围 bean 中使用。222222 实例刚刚被扔进了垃圾箱。

**我对这个问题的解决方案：**

我不再使用 ManagedProperty 注入。

相反，我编写了一些帮助代码来在需要的地方获取会话 bean（也就是在视图范围的 bean 方法中）：

```
public Object getSessionBean(String sessionBeanName)
    {
        return FacesContext.getCurrentInstance().getApplication().getELResolver().getValue(FacesContext.getCurrentInstance().getELContext(), null, sessionBeanName);
    } 
```

对于上面的示例，调用将是：

InvoiceService invoiceService = (InvoiceService) helper.getSessionBean("invoiceService");

在您的方法中调用它，不要将其作为字段存储在视图范围的 bean 中。

我希望这能以某种方式帮助您解决问题。

# android - Android：可以向禁用的首选项附加提示吗？

> ID：11887942
> 
> 赞同：0
> 
> 时间：2012-08-09T16:34:05.893
> 
> 标签：android

在我的偏好活动中，假设我有两个复选框偏好。如果我选择第一个，则启用第二个，但如果我取消选择第一个，则禁用第二个。

我的问题是，如果第一个被取消选择并且有人单击禁用的第二个首选项（它是灰色的），是否可以在禁用时附加一个提示，告诉用户他们必须首先选择上述首选项才能启用第二个？

我查看了 Preferences API，但找不到任何符合此要求的内容。

有小费吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:44:17.420

使用首选项的摘要作为提示。这将在复选框下方提供一些文本，并以较小的字体显示其标题。

通过 xml： http: [//developer.android.com/reference/android/preference/Preference.html#attr_android :summary](http://developer.android.com/reference/android/preference/Preference.html#attr_android:summary)

通过代码： http: [//developer.android.com/reference/android/preference/Preference.html#setSummary](http://developer.android.com/reference/android/preference/Preference.html#setSummary(int) (int )

# android - 仅等待输入 X 时间

> ID：11887950
> 
> 赞同：1
> 
> 时间：2012-08-09T16:34:22.263
> 
> 标签：android, io, wait

我正在尝试从输入流中读取数据，但如果程序在 X 时间内没有接收到数据，我想终止尝试并返回一个`-1`. 我以前使用过，`Thread.sleep( X )`但后来意识到那是一种完全错误的方法。如果有人有任何想法，请告诉我。这是我从输入流中读取的代码...

```
 try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer, 0, length);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(MainMenu.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                // Start the service over to restart listening mode
                BluetoothService.this.start();
                //break;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:16:14.377

您可以使用[Future](http://developer.android.com/reference/java/util/concurrent/Future.html)来执行此操作。

首先，您需要一个将作为“未来”值返回的类：

```
public class ReadResult {
    public final int size;
    public final byte[] buffer;

    public ReadResult(int size, byte[] buffer) {
         this.size = size;
         this.buffer = buffer;
    }
} 
```

然后你需要使用执行器服务并使用[get(long timeout, TimeUnit unit)](http://developer.android.com/reference/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)像这样：

```
 ExecutorService service = Executors.newSingleThreadExecutor();
        Future<ReadResult> future = service.submit(new Callable<ReadResult>() {

            @Override
            public ReadResult call() throws Exception {
                bytes = mInStream.read(buffer, 0, length);
                return new ReadResult(bytes, buffer);
            }
        });

        ReadResult result = null;
        try {
            result = future.get(10, TimeUnit.SECONDS);
        } catch (InterruptedException e1) {
            // Thread was interrupted
            e1.printStackTrace();
        } catch (ExecutionException e1) {
            // Something bad happened during reading
            e1.printStackTrace();
        } catch (TimeoutException e1) {
            // read timeout
            e1.printStackTrace();
        }

        if (result != null) {
            // here you can use it
        } 
```

这样，您将能够实现您的目标。请注意，最好将可调用类子类化，该类将接受输入流作为构造函数参数，然后使用类变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:41:23.563

您可以启动一个新线程并在那里等待 x 时间。传递对您的活动的引用，一旦时间结束，您可以从时间线程调用活动中的方法。

例如。

```
Thread time = new Thread() {

Activity foo;

public addActivity(Activity foo) {
this.foo = foo;
}

public void run() {
Thread.sleep(x);
// Once done call method in activity
foo.theTimeHasCome();
}

}.start(); 
```

我希望这有帮助！

# c# - 使用用户控件中的公共属性设置 Web 控件属性

> ID：11887955
> 
> 赞同：0
> 
> 时间：2012-08-09T16:34:47.267
> 
> 标签：c#, asp.net, user-controls

我最近发现在我的用户控件中的 asp:button 上设置可见属性并不总是通过我的用户控件中的公共属性设置它来工作（请参阅[为什么在用户控件中未正确更新 Visible 属性？](https://stackoverflow.com/questions/3780140/why-is-the-visible-property-not-correctly-updated-in-a-usercontrol)）。我习惯于通过公共属性设置我的 webcontrol 属性，但是是否有标准或最佳实践来为我的 usercontrol 设置 webcontrol 属性？

这是我的代码的简化版本：

```
public partial class MyUserControl: System.Web.UI.UserControl
{
    public bool IsVisible
    {
        set{MyButton.Visible = value;}
    }

    protected void Page_PreRender(object sender, EventArgs e)
    {
        if (MyButton.Visible)
        {
            trButtons.Visible = true;
            //do something
            //MyButton.Visible is always false, even when it is assigned true thru the 
            //public property above, when the <tr> element in the form has Visible = "false"
        }
    }
} 
```

设计师

```
 <table>
     <tr runat="server" id="trButtons" visible="true">
         <td>                
            <asp:Button ID="MyButton" runat="server" Text="The Button" /> 
         </td>
     </tr>
 </table> 
```

# java - 在 64 位机器上运行时出现 NoClassDefFoundError

> ID：11887957
> 
> 赞同：1
> 
> 时间：2012-08-09T16:34:56.540
> 
> 标签：java, spring, aspectj

在 64 位机器上启动服务时出现以下异常。但是代码在 32 位机器上运行良好。

```
java.lang.NoClassDefFoundError: org/objectweb/asm/commons/EmptyVisitor
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.springframework.context.support.GenericApplicationContext.<init (GenericApplicationContext.java:103)
    at org.springframework.context.support.GenericApplicationContext.<init>(GenericApplicationContext.java:125)
    at org.springframework.coral.CoralApplicationContext.<init>(CoralApplicationContext.java:41)
    at org.springframework.coral.CoralApplicationContext.<init>(CoralApplicationContext.java:35)
    at org.springframework.coral.DisposableApplicationContext.<init>(DisposableApplicationContext.java:16)
    at com.amazon.coral.spring.Launcher.<init>(Launcher.java:85)
    at com.amazon.coral.spring.Launcher.main(Launcher.java:56)
Caused by: java.lang.ClassNotFoundException: org.objectweb.asm.commons.EmptyVisitor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 19 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:37:42.003

除非您（或您使用的库）使用本机代码，否则底层平台很少会成为 Java 程序中的问题。

来自`NoClassDefFoundError`（http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NoClassDefFoundError.html）的Javadoc：

> 如果 Java 虚拟机或 ClassLoader 实例尝试加载类的定义（作为正常方法调用的一部分或作为使用 new 表达式创建新实例的一部分）并且找不到类的定义，则抛出此异常。
> 
> 搜索到的类定义在编译当前执行的类时已经存在，但无法再找到该定义。

因此，它在编译代码时存在，但当您尝试在其他地方运行它时不再存在。最典型的原因是类路径设置不正确，通常是因为包含相关类的 jar 文件不在类路径中。修改您的类路径定义并重新运行。

如果您不熟悉类路径的工作原理，我强烈建议您阅读 Oracle Java 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:09:04.477

我面临同样的问题。我通过添加以下 2 个 jar 文件解决了这个问题：

*   `asm-all 2.2.3.jar`
*   `cglib-nodep 2.1_3.jar`

`asm.jar`并`cglib.jar`从出现错误的机器（64位）中删除and 。

但我的问题是为什么这个问题存在于那台机器上。我检查了`CLASSPATH`,`PATH`和`JAVA_HOME`环境变量。但在两台机器上都是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T12:00:06.807

我面临同样的问题。我通过添加以下 2 个 jar 文件解决了这个问题：

asm-all 3.3.1.jar cglib-nodep 2.1.3.jar 并删除 lib 中的 asm.jar 和 cglib.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T06:53:46.210

检查您的 JAVA_HOME 环境变量。如果您使用的是 Eclipse IDE，请检查您的 IDE 的 Java 构建路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T17:46:10.380

99% 的可能性是您`CLASSPATH`在运行它的机器上有一个环境变量，而不是在没有它的机器上。如果您是从后者的服务和前者的命令行开始的，则将其设为 99.9%。

# magento - Magento - 从后端创建订单

> ID：11887959
> 
> 赞同：1
> 
> 时间：2012-08-09T16:34:59.370
> 
> 标签：magento

我正在为我的客户创建很多特别优惠，我需要能够从 magento 内部发送这些优惠。这已经可以通过从后端/销售创建订单来实现。但客户只会收到订单确认，无法为他们在邮件中收到的订单付款。

是否有任何模块可以使客户能够通过登录支付挂单？好像找不到？当然，我不是唯一一个为某些客户创建特价订单的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:35:29.570

我们使用高级销售点模块来接受电话订单。它并不完美，但比尝试使用后端要好得多。

还有一个替代付款方式的插件，可让您的电话人员在后端处理付款。我们也有那个。

然后是真正的订单编辑，我们认为这是经营在线业务的必要条件/要求。

# web-services - Spring，来自服务内部的服务调用

> ID：11887961
> 
> 赞同：0
> 
> 时间：2012-08-09T16:35:00.880
> 
> 标签：web-services, spring, spring-mvc, service, web

我有一个提供 Web 服务的 Spring MVC 应用程序设置。它具有身份验证、ACL、缓存等。

关键问题：从其他服务中调用服务。我需要实施一个设置，该设置需要一个完整的周期来进行此类调用，包括访问控制和缓存支持。

有可能实现这一点吗？如果是这样，请指导我完成，因为我一直无法获得解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:14:31.920

> 我需要实施一个设置，这将需要一个完整的周期来进行此类调用，包括访问控制和缓存支持

这两个听起来都像是可以使用 Spring AOP 处理的横切关注点。例如 Spring 3.1 提供了一个缓存抽象，它允许您将服务方法注释为`@Cache`. 然后 Spring 将负责在您配置的缓存提供程序中查找结果。

另外 Spring security 会为你提供`@Secured`注解，可以用来限制谁可以调用服务方法。

如果您使用这些方面，您可以避免创建一个充满代码的服务层，这些代码在许多不同的地方做同样的事情。

有关更多信息，请查看[此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html)和[此处的文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-method-security)

# drupal - 国际 Drupal 6 菜单

> ID：11887964
> 
> 赞同：0
> 
> 时间：2012-08-09T16:35:11.480
> 
> 标签：drupal, drupal-6

我是 Drupal 的新手（3 周），所以如果我不清楚，请问我会澄清。

我有一个英文 Drupal 6 网站。Primary Links 菜单有 4 个项目。A B C D。它们都可以工作等。现在我们通过翻译仪表板等添加了几个语言域和翻译内容。

现在在面向国际用户的菜单中，我们希望菜单为 AZBD。

因此，如果用户访问 mydomain.com，他们会看到 ABCD。如果他们访问 mydomain.com/fr，他们会看到 AZBD。

我们最终做的是让菜单项 C 仅对英语可见。然后我们为不同的语言添加了 1 个菜单项 (Z) 并翻译了菜单文本。菜单为每个域正确显示。

那么有什么问题呢？.....2 件事。

1.  无论域如何，菜单链接都是英文的。我的意思是菜单文本可能是法语，但是当您将鼠标悬停在链接上时，显示的目标网址（左下角）仍然是英语。

2.  我们可以通过添加一个完整的菜单项来纠正 #1，将菜单链接标题设置为该语言的文本，并为所有这些设置显示语言规则......似乎只是等待机会的混乱混乱。 ...

所以我想要的是关于如何拥有最少数量的菜单项的想法，但有完整的翻译，包括菜单链接标题。

TIA JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:45:52.467

您不应该**混合**使用不同语言的菜单。

为每种语言创建新菜单，然后将其放置在同一区域中，但为每个菜单定义语言。

# objective-c - 游戏中心无法识别游戏 - 没有“沙盒”游戏中心登录

> ID：11887965
> 
> 赞同：0
> 
> 时间：2012-08-09T16:35:13.027
> 
> 标签：objective-c

我一直在为我的应用程序实现游戏中心功能，但是当我在实际设备（临时版本）上测试它时，游戏中心登录会弹出，但它不是沙盒版本。

总结一下： 1\. adhoc 版本适用于我的实际设备 2\. 成就适用于我的模拟器，带有“沙盒”游戏中心登录弹出窗口 3\. adhoc 版本有游戏中心登录弹出窗口，但它不是“沙盒” 4\. 所以登录临时版本中的新帐户导致错误：“游戏中心无法识别游戏”

任何帮助将非常感激！

谢谢，火星

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T05:07:38.317

这个问题背后的原因是我的手机被越狱了

# gwt - UiBinder 中的通用小部件

> ID：11887967
> 
> 赞同：5
> 
> 时间：2012-08-09T16:35:32.573
> 
> 标签：gwt, uibinder

我刚刚创建了小部件：

```
public class myWidget<T> extends FlowPanel {
private T value;

public T getValue()
{
    return value;
}

public myWidget(T[] values) {
    for (T value : values)
    {
        //do action
    }
} 
```

如何使用 UiBinder 添加它？有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T06:41:08.947

是的你可以。您必须将包含`myWidget`该类的包导入 XML 命名空间。假设你的包被调用`com.test.widgets`，声明式布局如下所示：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    xmlns:my='urn:import:com.test.widgets'>

  <my:myWidget>
    <g:Label>A label</g:Label>
    <g:Label>A second label</g:Label>
  </my:myWidget>
</ui:UiBinder> 
```

注意导入`xmlns:my='urn:import:com.test.widgets'`和使用`<my:myWidget>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T07:26:01.677

要让您的小部件在 Uibinder 中可用，它必须至少实现 IsWidget 接口。作为一个小部件，它当然已经实现了 IsWidget。

因此，任何非小部件也可以通过实现 IsWidget 来用作 uibinder 中的子小部件元素。

IsWidget 接口需要非小部件来实现方法`asWidget()`。因此，这样的非小部件必须充当小部件容器。

实现 IsWidget 将只允许将该类用作子小部件元素。

假设你的班级是

```
com.zzz.client.ui.HelloKitty 
```

为了能够拥有子小部件元素，它必须实现`HasWidgets`.

```
<ui:UiBinder
  xmlns:ui='urn:ui:com.google.gwt.uibinder'
  xmlns:g='urn:import:com.google.gwt.user.client.ui'
  xmlns:z='urn:import:com.zzz.client.ui'>

  <g:VerticalPanel>
    <z:HelloKitty>
      <g:button ..../>
      <g:textbox>asdf</g:textbox>
    </z:HelloKitty>
  <g:VerticalPanel>

</ui:UiBinder> 
```

或者，它也可以只实现 HasOneWidget。

为了允许类在其 uibinder 标记之间有文本，它必须实现 HasText。

```
<ui:UiBinder
  xmlns:ui='urn:ui:com.google.gwt.uibinder'
  xmlns:g='urn:import:com.google.gwt.user.client.ui'
  xmlns:z='urn:import:com.zzz.client.ui'>

  <g:VerticalPanel>
    <z:HelloKitty>qwerty</z:HelloKitty>
  <g:VerticalPanel>

</ui:UiBinder> 
```

为了在其标签之间接受有效的 HTML，我相信你应该让它实现 HasHTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T23:46:34.770

似乎没有一个答案集中在*通用*部分。正如其他人所提到的，您可以通过省略泛型类型轻松地在 UiBinder 模板中添加泛型小部件：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'
             xmlns:my='urn:import:com.test.widgets'>
    <my:myWidget />
</ui:UiBinder> 
```

但是，如果您想在 Java 代码中引用这个小部件怎么办？您是否也应该在此处省略泛型类型并引起编译器警告的愤怒？

谢天谢地，没有。UiBinder 在类型方面非常松散，因为泛型类型只是提示，您可以在支持上述 UiBinder 模板的 Java 代码中摆脱以下内容：

```
@UiField(provided = true)
myWidget<Date> myWidget = new myWidget(new Date(), new Date()); 
```

或者，您也可以使用[文档](http://www.gwtproject.org/doc/latest/DevGuideUiBinder.html#Using_a_widget)`@UiFactory`中提到的方法。

# php - CodeIgniter 模型未正确加载

> ID：11887972
> 
> 赞同：0
> 
> 时间：2012-08-09T16:35:53.273
> 
> 标签：php, codeigniter, function, model, controller

我正在编写我的第一个 CodeIgniter 脚本，但我无法加载以下模型，如果有人可以帮助我吗？

这是我的控制器文件：

```
public function process(){
// Load the model
$this->load->model('users/login', 'users');

// Validate the user can login
$result = $this->users->validate();

// Now we verify the result
if(!$result){
    // If user did not validate, then show them login page again
    $this->index();
}else{
    // If user did validate,
    // Send them to members area
    redirect('home');
}      
} 
```

这是我的模型

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login_Model extends CI_Model{
    function __construct()
    {
        // Call the Model constructor
        parent::__construct();
    }

    public function validate(){

        // grab user input
        $username = $this->security->xss_clean($this->input->post('username'));
        $password = $this->security->xss_clean($this->input->post('password'));

        // Prep the query
        $this->db->where('username', $username);
        $this->db->where('password', $password);

        // Run the query
        $query = $this->db->get('users');
        // Let's check if there are any results
        if($query->num_rows == 1)
        {
            // If there is a user, then create session data
            $row = $query->row();
            $data = array(
                    'userid' => $row->userid,
                    'fname' => $row->fname,
                    'lname' => $row->lname,
                    'username' => $row->username,
                    'validated' => true
                    );
            $this->session->set_userdata($data);
            return true;
        }
        // If the previous process did not validate
        // then return false.
        return false;
    }
}
?> 
```

我可以确认进程函数正在加载，但是 $results = $result = $this->users->validate(); 下的任何代码；没有出现。模型也在加载，只要我尝试调用一个函数，脚本就会自行终止。

对不起，如果这个问题有点乏味。

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:14:33.020

这一切都归结为我的代码。您的模型类名称必须与模型文件的名称相同。

所以在这种情况下，我应该将我的文件命名为 login_model.php，然后类本身必须命名为 Login_model（第一个字符必须为大写，所有其他字符必须为小写）。在控制器中调用模型时，它必须全部为小写，如：

```
$this->load->model('login_model'); 
```

希望这对将来的任何人都有帮助，感谢所有人的努力和评论:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T23:35:31.043

您尝试将文件名大写？user_model.php 到 User_model.php？

# java - 如何同时接受 multipart 和 application/x-www-form-urlencoded？

> ID：11887974
> 
> 赞同：2
> 
> 时间：2012-08-09T16:35:58.417
> 
> 标签：java, jquery, http, servlets

我构建了一个允许上传文件或上传列表作为输入的 servlet。到目前为止，我已经通过将 servlet 设置为接受 multipart/form-data 来处理它，所以即使没有文件，我也会将列表作为一部分读取。

我现在正在尝试调用此 servlet 以通过 JQuery AJAX 方法而不是通过表单上传列表。如果我尝试通过该方法正常上传列表，我会得到：

```
org.apache.tomcat.util.http.fileupload.FileUploadBase$InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is application/x-www-form-urlencoded; charset=UTF-8 
```

如果我将 contentType 设置为 multipart/form-data ，如下所示：

```
$.ajax({    
    url: someUrl, 
    type: 'POST', 
    contentType: 'multipart/form-data', 
    data: {list: inputList}
}); 
```

我收到了这个错误：

```
org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found 
```

我的问题是，是否有某种方法可以将 servlet 配置为接受两种内容类型，或者是否有某种方法可以编写 ajax 数据以上传多部分/表单数据？

我知道使用 FormData API 上传 multipart/form-data 很简单，但我需要支持 IE9，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:13:59.860

我建议你使用[Apache Commons FileUpload](https://commons.apache.org/fileupload/)库。无论提交哪种类型的表单，它都为您提供统一的界面，并且可以轻松处理上传的文件。请参阅处理[用户指南](https://commons.apache.org/fileupload/using.html)*的上传项目*部分，它应该让您大致了解它是如何工作的。

# java - 关于不可变类

> ID：11887976
> 
> 赞同：1
> 
> 时间：2012-08-09T16:36:06.583
> 
> 标签：java

我有以下查询，我正在研究 Java 不可变类概念并提出以下分析..

*   所有字段必须是私有的，最好是最终的
*   确保类不能被覆盖 - 使类最终，或使用静态工厂并保持构造函数私有
*   必须从构造函数/工厂填充字段
*   不要为字段提供任何设置器
*   注意收藏。使用 Collections.unmodifiable*。
*   此外，集合应该只包含不可变对象
*   所有 getter 必须提供不可变对象或使用防御性复制
*   不要提供任何改变对象内部状态的方法。

现在我有以下课程..

```
public final class Bill {

    private final int amount;
    private final DateTime dateTime;
    private final List<Integers> orders;

} 
```

请告知如何将其制成不可变类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T16:43:09.780

你的类是不可变的。现在您可能想要添加一些方法：

```
public final class Bill {

    private final int amount;
    private final DateTime dateTime;
    private final List<Integers> orders;

    public Bill(int amount, DateTime dateTime, List<Integer> orders) {
        this.amount = amount; //primitive type: ok
        this.dateTime = dateTime; //joda.DateTime is immutable: ok
        this.orders = new ArrayList<Integer> (orders); //make a copy as the caller could modify the list at its end
    }

    // no method that adds or removes from the list

   public List<Integer> getOrders() {
       return Collections.unmodifiableList(orders); //defensive copy
   }
} 
```

或者，您可以`this.orders = Collections.unmodifiableList(orders);`在构造函数中使用并从 getOrders(): 返回它`return orders;`，这强制您不应该修改该列表，即使在您的类中也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:42:38.430

由于`int`是原始的并且`DataTime`（我猜来自 JodaTime）是不可变的，您唯一需要做的就是确保使用不可变列表：

```
public final class Bill {
    ...
    public Bill(int amount, DateTime dateTime, List<Integer> orders) {
        this.amount = amount;
        this.dateTime = dateTime;
        this.orders = Collections.unmodifiableList(orders);
    }
    ...
} 
```

显然，您还需要一个构造函数来初始化`final`字段和一些可以访问该字段的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:42:23.413

由于 amount 是一个值类型，因此 datetime 是不可修改的，如果您在其 getter 中返回您的 orders 属性的 Collections.unmodifiable() 版本，则该类将变为不可变的。

# bash - 用 unix shell 中的值调用函数的结果替换值

> ID：11887979
> 
> 赞同：3
> 
> 时间：2012-08-09T16:36:25.863
> 
> 标签：bash, shell, sed, awk

我有一个看起来像这样的文本流：

```
----------------------------------------
s123456789_9780
  heartbeat:test       @ 1344280205000000: '0'
  heartbeat:test       @ 1344272490000000: '0' 
```

这些长数字是以微秒为单位的时间戳。我想通过某种管道运行此输出，该管道会将这些时间戳更改为更易于人类理解的日期。

我有一个 date 命令可以做到这一点，只给出时间戳（带有以下冒号）：

```
$ date --date=@$(echo 1344272490000000: | sed 's/.......$//') +%Y/%d/%m-%H:%M:%S
2012/06/08-10:01:30 
```

我想结束这样的事情：

```
----------------------------------------
s123456789_9780
  heartbeat:test       @ 2012/06/08-12:10:05: '0'
  heartbeat:test       @ 2012/06/08-10:01:30: '0' 
```

我认为`sed`不允许我匹配时间戳并将其替换为在其上调用 shell 函数的值（尽管我希望被显示错误）。也许`awk`可以做到？我不是很熟悉`awk`。

对我来说似乎很棘手的另一部分是让不匹配的线条不经过修改就通过。

我当然可以编写一个 Python 程序来执行此操作，但如果可能的话，我宁愿将它保存在 shell 中（这是在 shell 脚本中生成的，我宁愿不依赖外部文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:26:20.793

这可能对您有用（GNU sed）：

```
sed '/@ /!b;s//&\n/;h;s/.*\n//;s#\(.\{10\}\)[^:]*\(:.*\)#date --date=@\1 +%Y/%d/%m-%H:%M:%S"\2"#e;H;g;s/\n.*\n//' file 
```

解释：

*   `/@ /!b`退出并打印任何不包含`@`空格的行
*   `s//&\n/`在上述模式后插入换行符
*   `h`将模式空间 (PS) 复制到保持空间 (HS)
*   `s/.*\n//`删除最多并包括`@`后面的空格
*   `s#\(.\{10\}\)[^:]*\(:.*\)#date --date=@\1 +%Y/%d/%m-%H:%M:%S"\2"#e`从 PS 中剩余的内容中，对前 10 个字符以及从`:`字符串的结尾进行反向引用。将这些传递给`date`命令并将结果评估到 PS
*   `H`将 PS 附加到 HS 并同时插入换行符
*   `g`将HS复制到PS中
*   `s/\n.*\n//`删除字符串的原始部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:05:19.190

我也想看看一个`sed`解决方案，但它有点超出我的`sed`-fu。作为`awk`支持`strftime`，这里相当简单：

```
awk '
/^ *heartbeat/ { 
  gsub(".{7}$", "", $3)
  $3 = strftime("%Y/%d/%m-%T", $3)
  print " ", $1, $3
}

$0 !~ /heartbeat/' file 
```

输出：

```
s123456789_9780
heartbeat:test 2012/06/08-21:10:05
heartbeat:test 2012/06/08-19:01:30 
```

`$3`是微秒字段。`gsub`将时间戳转换为秒。

`$0 !~`确保打印非心跳线（隐含`{ print }`地是默认块）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:16:17.800

怎么样：

```
while read s1 at tm s2
do 
    tm=${tm%000000:}
    echo $s1 $at $(date --date @$tm +%Y/%d/%m-%H:%M:%S)
done < yourfile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T17:18:18.373

带有一点 sed 的 Bash，保留输入的空白​​：

```
while read -r; do                                                                                                                                                                                                                                          
    parts=($REPLY)
    if [[ ${parts[0]} == "heartbeat:test" ]]; then
        dateStr=$(date --date=@${parts[2]%000000:} +%Y/%d/%m-%H:%M:%S)
        REPLY=$(echo "$REPLY" | sed "s#[0-9]\+000000:#$dateStr#")
    fi
    printf "%s\n" "$REPLY"
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T17:12:11.233

这主要是在`bash`使用您的`date`命令时完成的：

```
#!/bin/bash
IFS=$
while read a ; do
case "$a" in
*" @ "[0-9]*) pre=${a% @ *}
              a=${a#$pre @ }
              post=${a##*:}
              a=${a%??????:$post}
              echo "$pre$(date --date=@$a +%Y/%d/%m-%H:%M:%S):$post"
              ;;
*)            echo "$a" ;;
esac
done <<.
----------------------------------------
s123456789_9780
  heartbeat:test       @ 1344280205000000: '0'
  heartbeat:test       @ 1344272490000000: '0'
. 
```

# grails - 可以狡猾地监控grails应用程序吗？

> ID：11887982
> 
> 赞同：1
> 
> 时间：2012-08-09T16:36:31.407
> 
> 标签：grails

我们企业使用 CA Wily Introscope 进行生产现场环境。我们想使用 GRAILS 开发一个应用程序，但我在 web/stackoverflow 上找不到任何关于此的文档。有没有人这样做过？这可能吗？否则我们可能不得不回到用java做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:10:42.827

是的。它可以很容易地完成。我们在我们的企业中这样做，Grails 毕竟是在 JVM 上运行的底层 Java，而 Wily 对此没有任何问题。

# c# - 将变量值从 VB6 转换为 C#，以便与 Win32 一起使用

> ID：11887983
> 
> 赞同：1
> 
> 时间：2012-08-09T16:36:32.493
> 
> 标签：c#, vb6

我从[网上](http://groups.google.com/groups?hl=en&lr=&ie=UTF-8&selm=9m116e%24beglg%241%40ID-24932.news.dfncis.de)找到的一些 VB6 代码中获得了一系列值。我需要将此代码转换为 C#。我不知道如何阅读 VB6。如何将此 VB6 转换为等效的 C#？

```
Private Const EM_GETRECT = &HB2;
Private Const EM_SETRECT = &HB3
Private Const EM_SCROLLCARET = &HB7

Private Const ES_AUTOHSCROLL = &H80&
Private Const ES_AUTOVSCROLL = &H40&
Private Const ES_CENTER = &H1& 
```

由一个签名判断

```
[DllImport("coredll.dll")]
private static extern IntPtr SendMessage(IntPtr hWnd, int Msg, IntPtr wParam, IntPtr lParam); 
```

采用这些类型的变量（作为 Msg 参数），我相信这些应该是形式

`const int EM_GETRECT =`

我不知道如何将其更改`&HB2`为 int。我想它会是`0x???`，但是我如何将这个小转换`&HB2`为十六进制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:42:11.097

在 C# 中表示十六进制值的语法只是 0x 后跟数字的十六进制表示。（并且这种表示在 VB6 和 C# 中是相同的）所以你写

```
private const int EM_GETRECT = 0xB2;
Console.WriteLine(EM_GETRECT); 
```

打印出十进制的 178。

最后三个值（带有 & 后缀）是长数据类型的 VB 变量。
在 C# 中，数据类型 int 与 VB long 相同。您仍然可以使用 C# 整数

```
private const int ES_CENTER = 0x1; 
Console.WriteLine(ES_CENTER); 
```

按预期打印 1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:44:27.513

它只是表示以长整数读取数字，格式为十六进制。（在 H 之后）

如果需要，您可以只使用这些值：

```
const int EM_GETRECT = 0xB2;
const int EM_SETRECT = 0xB3;
const int EM_SCROLLCARET = 0xB7;

const int ES_AUTOHSCROLL = 0x80;
const int ES_AUTOVSCROLL = 0x40;
const int ES_CENTER = 0x1; 
```

# c# - 将从反射获得的类传递给泛型方法

> ID：11887984
> 
> 赞同：1
> 
> 时间：2012-08-09T16:36:32.940
> 
> 标签：c#, generics, reflection

这是我正在尝试做的一个虚拟示例：

```
var ass = Assembly.Load("Dummy.Class.FullName");

var yy =
    from t in ass.GetTypes()
    let attributes = t.GetCustomAttributes(typeof(MyTestAttribute), true)
    where attributes != null && attributes.Length > 0
    select new { Type = t, Attributes = attributes.Cast<MyTestAttribute>() };

foreach (var x in yy)
{
    TestOpen<typeof(x.Type)>();
}

private void TestOpen<TEntity>() where TEntity : Entity, new()
{
} 
```

我无法以这种方式获取类定义并传递给泛型方法，我尝试了所有方法，我想我错过了一些特别的东西，即该方法正在等待某个编译的类，并且从反射中我无法得到这个，对吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:39:05.497

您可以使用[MakeGenericMethod](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)生成正确的方法定义，并通过反射调用它。

```
Type thisType = this.GetType();

var mi = thisType.GetMethod("TestOpen");

foreach (var x in yy)
{
    var gmi = mi.MakeGenericMethod(x.Type);
    gmi.Invoke(this, null);
} 
```

# android - 即使启用了 DomStorageEnabled，Twitter 的 Android Webview 问题

> ID：11887986
> 
> 赞同：0
> 
> 时间：2012-08-09T16:36:39.930
> 
> 标签：android, webview, android-webview

我已经在 Galaxy Note 2.3、Sony tablet 3.2 以及 Galaxy Y 2.3 上测试了以下问题，并且该问题 100% 可重现。正如许多线程所建议的那样，`webview.getSettings().setDomStorageEnabled(true);`可以解决问题。但我观察到，当 Webview 第一次加载 twitter.com 时，它会变成空白。然后，如果我说`webview.reload()`或再次调用 load Url，那么 Twitter 每次都会正确加载，直到我退出应用程序（最好从设置中强制停止）。所有出现 WebConsole 错误的网站都会出现此问题。如果我重新加载同一个站点，那么它的加载正确。有没有人有同样的问题？

以下是我使用的一小段代码。

```
webview = new Webview(activity.context);
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setBuiltInZoomControls(true);
webview.getSettings().setDomStorageEnabled(true); 
webview.loadUrl("http://www.twitter.com"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:33:11.463

按照其他线程上的建议对 Useragent 进行硬编码解决了这个问题

```
webview.getSettings().setUserAgentString("Mozilla/5.0 (Linux; U; Android 2.0; en-us; Droid Build/ESD20) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17"); 
```

这种肮脏的伎俩会有什么缺点？它会影响平板电脑上的网站加载吗？如果用户愿意，他们是否能够访问桌面站点？

# c# - TcpClient 重新连接到一个已经打开的连接

> ID：11887988
> 
> 赞同：0
> 
> 时间：2012-08-09T16:36:44.797
> 
> 标签：c#, tcpclient

我正在使用 TcpClient 与硬件设备进行通信。作为测试过程的一部分，与设备的通信可能会中断 30 秒左右的时间。这很好，有时也是有意的。

当我在通信中断时向设备发送数据时，问题就开始了。因为我使用的是 TcpClient，所以我得到一个 IO 异常并且连接被断开。设备端的连接仍然打开。我怎样才能：

*   重新连接到设备上的开放连接？创建一个新的 TcpClient 将在设备端创建一个新的连接并且是不需要的......
*   也许让 TCP 重传时间超过 30 秒？（Windows 7）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:58:51.773

您最好的方法是交换会话标识符或使用其他方式来跟踪连接并使用代码来处理简历。您可以增加[SendTimeout 属性](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.sendtimeout%28v=vs.100%29)的值，但接收端仍可能最终导致连接超时。

一旦关闭，您就无法重新打开与 TcpClient 的特定连接。在我看来，您可能这样做的唯一其他方法（原始套接字代码）似乎比它的价值更麻烦。

# algorithm - 从最小或最大堆中删除根元素的算法

> ID：11887991
> 
> 赞同：1
> 
> 时间：2012-08-09T16:36:55.880
> 
> 标签：algorithm, sorting, heap, binary-tree

我已经阅读了删除堆根元素的算法。1\. 将根元素与堆的最后一个元素交换。2.然后从根元素向下heapify（下移）。

在其他几个地方，我发现它们从最后一个元素的父级向根向上堆积。（即，在此处检查 deleteTop() 函数[http://www.geeksforgeeks.org/archives/14873](http://www.geeksforgeeks.org/archives/14873)）因此与正确的方法混淆：- （这会因情况而异还是文章本身有误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:19:25.477

的代码`deleteTop()`是错误的。

当给定这个最大堆并运行时`deleteTop()`：

```
 10
     8      7
    5 4    3 2
        ||
        ||
        \/ 

        2
     8     7
    5 4   3 10
        ||
        ||
        \/ 

        7
     8     2
    5 4   3 10 
```

结果堆是错误的，因为 2<(3 and 10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:40:30.777

我相信堆排序概念只是识别最大或最小元素并将其从堆中删除......你可以这样做，所以它是算法的不同实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:12:15.867

> 在其他几个地方，我发现它们从最后一个元素的父元素向上堆积到根。（即，在此处检查 deleteTop() 函数 [http://www.geeksforgeeks.org/archives/14873](http://www.geeksforgeeks.org/archives/14873)）

内联评论`heapify()`清楚地表明该实现适用于中值流问题；但是，在通用堆结构实现中，`heapify()`会冒泡。有关堆实现和中值流问题的详细说明，请参阅[此](http://www.youtube.com/watch?v=0qBDzSD4w3Q)算法讲座。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-18T15:23:43.010

基本思想是首先制作最大堆。

堆只不过是对数组元素进行排序，这些元素遵循 a[i] > a[2i+1] 和 a[2i+2] 所以你从叶节点和 swap 开始，所以你向上移动。

但是在构建最大堆时，你也可以向下移动，阅读下面的答案，我之前也有疑问

[给出一个测试用例，其中从算法介绍中的堆排序失败](https://stackoverflow.com/questions/32127063/giving-a-test-case-where-heap-sort-from-introduction-to-algorithm-fails)

在创建最大堆或最小堆之后，您与最后一个元素交换，因此最大元素位于其最后的排序位置。

现在因为它是一个最大堆，每个索引都遵循条件 a[i] > a[2i+1] 和 a[2i+2] 但在第 0 个位置我们不确定它是否仍然遵循条件，因为我们已从最后一个位置交换，并且第 0 位的新元素可以大于或小于其子元素。

所以如果它更小，我们交换，我们继续向下移动，直到堆属性得到满足，然后我们用 n-1 位置交换并继续。

因此，为了回答您的问题，在构建最大堆时，我们向上移动并且我们也必须向下移动，以防交换导致堆属性违规。

但是一旦我们建立了最大堆，并且我们在该过程中与最后一个元素交换，我们只会向下移动，因为除了第 0 个位置之外的每个位置都满足堆属性。

# firebird - FireBird 中的 SELF JOIN 与 LEFT JOIN 性能

> ID：11887993
> 
> 赞同：1
> 
> 时间：2012-08-09T16:37:07.517
> 
> 标签：firebird, firebird2.5

为了提高从 Delphi XE win32 应用程序对 Firebird 2.5 数据库运行的不同查询的速度，这些查询速度更快：

*   自连接 - 例如

    SELECT e1.full_name AS Employee, e2.full_name AS Manager FROM employee e1 JOIN employee e2 ON e1.mng_id = e2.emp_no;

或者

*   与其他表左连接

    SELECT e1.full_name AS Employee, e2.full_name AS Manager FROM employee e1 LEFT JOIN employee_info e2 ON e1.mng_id = e2.emp_no;

考虑到相关表将包含超过 50k 行，我将添加索引以尽可能加快查询速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:40:22.290

为了提高查询速度，您需要根据 WHERE 子句中涉及的所有字段创建索引

# c# - 奇怪的通用约束问题

> ID：11887995
> 
> 赞同：2
> 
> 时间：2012-08-09T16:37:11.743
> 
> 标签：c#, generics

为什么这不起作用？！

```
 public interface IBus
    {
        void Subscribe<T>(ISubscribe<T> subscriber) where T : class, IEvent;
        void Send<T>(IEvent @event) where T : class, IEvent;
    }

    class InMemoryEventBus : IBus
    {
        private readonly IDictionary<ISubscribe<IEvent>, Type> _subscribers;

        public InMemoryEventBus()
        {
            _subscribers= new Dictionary<ISubscribe<IEvent>, Type>();
        }

        public void Subscribe<T>(ISubscribe<T> subscriber) where T : class, IEvent
        {
            _subscribers.Add(subscriber, typeof(T));
        }

        public void Send<T>(IEvent @event) where T : class, IEvent
        {
            foreach (var subscriber in _subscribers.Where(subscriber => subscriber.Value == typeof(T)))
            {
                subscriber.Key.Handle(@event);
            }
        }
    }

    public interface IEvent
    {
        Guid EventId { get; set; }
    }

    public interface ISubscribe<T> where T : IEvent
    {
        void Handle(T @event);
    }

    public class StockLevelDroppedBellowMinimumLevelEvent : IEvent
    {
        public Guid EventId { get; set; }

        public string Message { get; set; }
    } 
```

我得到：

```
cannot convert from 'IHandle<T>' to 'IHandle<IEvent>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:42:47.777

编辑：实际上`ISubscribe`它需要是协变的 - 但现在我们可以看到 的声明`ISubscribe`，你*不能*让它协变 - 只有逆变。

一般来说，类型通常不是变体。例如， an `ICollection<string>`is not an `ICollection<object>`- 这是一项好工作，否则将编译：

```
ICollection<string> strings = new List<string>();
ICollection<object> objects = strings; // Fortunately this isn't valid
objects.Add(new Button()); // This should be fine of course...
string x = strings[0]; // But what would this do?! 
```

在你的情况下，我相信你需要改变你的字典 - 你将能够保证`ISubscribe`在每种情况下都使用“正确”的类型。但是，您以一种*非常*奇怪的方式使用字典 - 您应该反转键和值类型，如下所示：

```
class InMemoryEventBus : IBus
{
    private readonly IDictionary<Type, object> _subscribers;

    public InMemoryEventBus()
    {
        _subscribers = new Dictionary<Type, object>();
    }

    public void Subscribe<T>(ISubscribe<T> subscriber) where T : IEvent
    {
        _subscribers.Add(typeof(T), subscriber);
    }

    public void Send<T>(IEvent @event) where T : class, IEvent
    {
        object value;
        if (_subscribers.TryGetValue(typeof(T), out value))
        {
             ISubscriber<T> subscriber = (ISubscriber<T>) value;
             subscriber.Handle(@event);
        }
    }
} 
```

# ruby-on-rails - 创建一个包含 rails 模型的 gem

> ID：11887999
> 
> 赞同：23
> 
> 时间：2012-08-09T16:37:17.067
> 
> 标签：ruby-on-rails, plugins, model, gem, rails-engines

我已经阅读了很多关于该主题的内容，但似乎没有什么能完全满足我的需求。如果我重复或不清楚我对 ruby​​ 和 rails 以及 stackoverflow 都是新手，我很抱歉。

我有一个现有的 Rails 应用程序，里面有很多基础设施。我想获取其中的一些模型，将它们嵌套在命名空间中，然后将所有这些放入 ruby​​ gem 中，以便在其他 Rails 应用程序中使用。据我了解，导轨的加载路径存在问题，因为它们是一种约定，并且定义另一个引擎时存在问题，因为您有两个并且它们崩溃了。

我一直在寻找指南或教程来学习如何在没有太多运气的情况下做到这一点，但我很肯定如果有人能指出我的话，那里会有一些很棒的东西。

我用引擎制作宝石的尝试因碰撞或缺少铁轨而失败。

我正在运行 rails 3.2.3 和 ruby​​ 1.9.3。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-07-29T13:27:10.920

是的，您可以创建一个包含模型的 gem，并将它们包含在多个 Rails 应用程序中。这是一种方法：

*   创建一个宝石：`bundle gem demo_gem`

*   创建模型或将模型移动到 demo_gem。我更喜欢将它们放在gem 的*lib/*文件夹中，例如*demo_gem/lib/app/models/student.rb*。

    ```
    module DemoGem
      class Student < ActiveRecord::Base
      end
    end 
    ```

*   *需要demo_gem/lib/demo_gem.rb*中的所有模型

     *```
    require "demo_gem/version"
    require "demo_gem/app/models/student.rb"
    module DemoGem
      # Your code goes here...
    end 
    ```* 
**   在您的 Rails 应用程序*Gemfile*中包含 gem （我假设您的代码不是开源的，并且您不打算发布 gem）：

    ```
    gem 'demo_gem', path: '../demo_gem' 
    ```* 

 *现在，您可以在多个 Rails 应用程序中的任何地方使用这些模型，只需使用`DemoGem::Student`.

这里假设您使用的是单个数据库并且表存在。[但是，您可以在 gem 本身中创建迁移并使用Rails 生成器](http://guides.rubyonrails.org/generators.html)将它们复制到应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T01:38:20.020

从本手册开始 - [http://guides.rubyonrails.org/engines.html](http://guides.rubyonrails.org/engines.html)

使用命令创建引擎

```
$ rails plugin new "EngineName" --mountable 
```

比把你需要的所有东西、模型、控制器等都放入你的引擎中。从中生成宝石。将此 gem 添加到您的 MasterApp。所有模型都将在 EngineName 命名空间下可用。*