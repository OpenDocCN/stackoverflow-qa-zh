# StackOverflow 问答 11401000-11401999

# c# - C# 覆盖 CookieContainer 中的现有 Cookie？

> ID：11401002
> 
> 赞同：1
> 
> 时间：2012-07-09T18:34:52.573
> 
> 标签：c#, cookies

我请求使用`HTTPWebRequest`并使用此代码的页面。我添加饼干

```
agent.cookieJar.Add(new Uri("http://www.website.com"),
    new Cookie("brbr", "harta&brbra&=-")); 
```

我最终得到了两个相同的 cookie，每个 cookie 具有不同的值。因为请求有发回的 Javascript cookie。当我需要时，我应该使用什么功能来覆盖/更新“brbr”cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:50:39.387

它们是 C# HttpCookie 类中可用的覆盖方法，但您可以根据需要覆盖 cookie 的值，如下所示

```
Request.Cookies["brbr"] = "Some New Value";

Or

Response.Cookies["brbr"] = "Some New Value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T14:56:20.693

有点老问题，但我想我还是会发布。cookie 集合上的[Set方法应该可以完成这项工作。](http://msdn.microsoft.com/en-us/library/system.web.httpcookiecollection.set%28v=vs.110%29.aspx)

```
agent.cookieJar.Set(new HttpCookie("brbr", "harta&brbra&=-")); 
```

这样您就不必担心 cookie 是否已经存在。

# phpexcel - PHPExcel使用示例

> ID：11401015
> 
> 赞同：0
> 
> 时间：2012-07-09T18:35:37.447
> 
> 标签：phpexcel

我正在尝试使用 PHPExcel 库。我已经阅读了一些 API，但仍然不知道如何正确使用它。

我正在尝试将数组转换为 Excel 表。

如果我有：

```
$Array = array(
              array('key1' => 'Content1', 'key2' => 'Content2'),
              array('key1' => 'Content3', 'key2' => 'Content4')
); 
```

所以excel文件中的输出将是：

```
key1              key2

Content1          Content2
Content3          Content4 
```

`key1`并`key2`作为标题。

你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T10:42:40.480

这里有一些讨论。检查它 [示例](https://phpexcel.codeplex.com/wikipage?title=Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-27T08:16:12.153

这是我的代码我做了什么......但这里的场景有点不同，这里的输入是**excel文件**，而输出是**'key'=>'value'对中的数组数组**（就像你的情况一样反之亦然）这不是一个解决方案，但它可能会帮助你继续前进。

```
 <?php

    include './PHPExcel/IOFactory.php';
    $objPHPExcel = PHPExcel_IOFactory::load('campaign.xlsx');

    foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {

    $highestColumn = $worksheet->getHighestDataColumn();

    //Getting highest column with data
    $highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

    //Getting highest row with data
    $highestRow = $worksheet->getHighestRow(); 

    $header = [];
    //For saving all heading from Excel file.
    for( $i = 0 ; $i <= $highestColumnIndex ; $i++)
    {
        $cell = $worksheet->getCellByColumnAndRow($i,1);
        $val = $cell->getValue();

        $header[] = $val;

    }   

    $completeArray = [];
    $value = [];

    //For saving header and value pairs in a array
    for ($row = 2; $row <= $highestRow; ++ $row) {

        for ($col = 0; $col < $highestColumnIndex; ++ $col) {
            $cell = $worksheet->getCellByColumnAndRow($col, $row);
            $val = $cell->getValue();

            $value[$header[$col]] = $val;
        }

        //Inserting that array... 
        $completeArray[] = $value;

    }

}

echo '<pre>';
print_r($completeArray);
echo '</pre>'; 
```

因此，在您的情况下，您可以使用我的示例中的所有 get 方法，例如 getCellByColumnAndRow

```
setCellValueByColumnAndRow($column, $row, $value); 
```

[您也可以在此处](https://blog.mayflower.de/561-Import-and-export-data-using-PHPExcel.html)获得教程的帮助

备忘单[在这里](http://www.clock.co.uk/blog/phpexcel-cheatsheet)

# css - 更少的百分比不能正常工作

> ID：11401017
> 
> 赞同：2
> 
> 时间：2012-07-09T18:35:39.480
> 
> 标签：css, less

我正在尝试以 2 位精度在 lesscss 文件中获取百分比。在lesscss文件中

```
@w: round(((100-((12-5)*3.8))/(12/5))*100);
width: percentage(@w/10000); 
```

编译为宽度：30.580000000000002%；我做错了什么？

我的逻辑非常简单：
第1步：获得“不正确”数字30.580000000000002
步骤2：30 = 3058.0000000000/302
步骤3 ：
roup
30.58

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:44:34.287

您没有考虑浮点计算是以二进制形式完成的，其中没有 1/10000 的精确表示。所以：

```
/* 30.580000000000002 */
console.log(Math.round(((100 - ((12 - 5) * 3.8))/(12 / 5)) * 100) / 10000 * 100); 
```

（LESS 是否使用像 JavaScript 这样的 ECMAScript 实现并不重要，只要计算基于[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754-2008)双精度浮点数。）

但是，您不应该为此烦恼。

```
width: 30.580000000000002%; 
```

是[完全有效的 CSS](http://www.w3.org/TR/CSS2/syndata.html#percentage-units)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:40:55.050

您需要将方法包装在`round()`方法周围`percentage()`，如下所示：

```
@w: round(((100-((12-5)*3.8))/(12/5))*100);
width: round(percentage(@w/10000)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:49:28.370

在尝试最小化数据流量时，您的问题可能很重要。如今，通过网络发送[尾数](http://mathworld.wolfram.com/Mantissa.html)中超过一两个数字的 CSS 百分比[是没有意义](http://gehrcke.de/2013/02/save-some-css-traffic-round-percentages-with-less/)的。

给定以下 LESS 输入：

```
w: 100 %;
w: round(512 * 1%, 2);
w: 2.0 / 3.0 * 100 * 1%;
w: round(2.0 / 3.0 * 100 * 1%, 2);
w: round(0.19%, 2);
w: round(0.19%, 1);
w: round(10000%, 1);
w: round(10000, 1); 
```

和相应的输出：

```
w: 100 %;
w: 512%;
w: 66.66666666666666%;
w: 66.67%;
w: 0.19%;
w: 0.2%;
w: 10000%;
w: 10000; 
```

我们看到`round(percentage, 2)`非破坏性地实现了我们想要的。

# codenameone - SMS，手电筒，振动不适用于代号一的android版本

> ID：11401022
> 
> 赞同：1
> 
> 时间：2012-07-09T18:36:03.223
> 
> 标签：codenameone

我使用[代号 one制作了一个 android 应用程序](http://www.codenameone.com)

我用代号一尝试了以下操作：

1) Display.getInstance().flashBacklight(10);

2)Display.getInstance().vibrate(100);

3)Display.getInstance().sendsms()；

所有这些 API 都适用于 J2me 构建。

但是，对于 android，它们都不起作用。为什么会发生这种情况？我在motorolla atrix 2上试过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:07:01.233

Android 不支持 flashBacklight，如果我没记错的话，该功能在旧 Android 版本上不可用，它现在可能可用。您可以就此提出问题，我们可以再次调查。

振动应该可以工作，它可能在该特定设备上禁用了振动，但我还没有尝试过。您也可以就此提出问题，我们可以看看。

发送短信对我有用，它在 Android 上打开短信意图并传递短信应该发送到的文本/号码。这与发送 SMS 的 J2ME 版本不同。

# php - 如何使用 php 和 mysql 更新实时数据

> ID：11401023
> 
> 赞同：-4
> 
> 时间：2012-07-09T18:36:05.113
> 
> 标签：php, jquery, mysql

目前我在 Dropbox 中有一个数据文件，每 15 秒上传一次，我想获取这些数据，它有几种不同的数据类型，并绘制用户在网站上选择的实时数据。我有一个数据服务器，但我的数据不在那里。有什么方法可以让我从文件中获取这些数据并绘制图表，同时还有一个控制面板可以选择我想要绘制的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:46:24.790

您可以使用 Ajax 刷新您的网页。请注意，如果您的刷新设置为每 15 秒并且您的数据每 15 秒输入一次，最坏的情况是，如果数据更新和 Ajax 刷新的时间不合适，您将显示几乎 30 秒前的数据。

您可能希望更频繁地使用 Ajax 检查新数据，具体取决于您的特定需求。在服务器端，缓存 Ajax 更新的结果，避免过多的重复处理。

要创建从 Ajax 查询返回的数据，请打开并处理数据文件。不需要 MySQL。您可以使用文件的时间戳来使我在上一段中建议的结果缓存无效。

有许多基于 JavaScript 的图表库可以通过 Ajax 进行更新。这是一个很好的起点：

[图形化 JavaScript 库](https://stackoverflow.com/questions/6426/graphing-javascript-library)

# jquery - 确定浮动元素中的换行位置

> ID：11401024
> 
> 赞同：10
> 
> 时间：2012-07-09T18:36:24.833
> 
> 标签：jquery, resize, css-float, responsive-design

假设我`<div>`在一个容器中有六个元素`<div>`。这六个 div 中的每一个都是一个正方形，并`float: left`应用了 CSS 样式。默认情况下，当它们到达容器的边缘时，`<div>`它们会包裹起来。

现在，我的问题是，使用 Javascript，是否可以确定包装在哪个元素上？

如果它们显示在页面上，例如：

```
 ___   ___
| 1 | | 2 |
----- -----
 ___   ___
| 3 | | 4 |
----- ----- 
```

我试图确定环绕发生在第二个和第三个元素之间。如果您想知道我是否失去了理智，我尝试这样做的原因是如果单击其中一个框，我希望能够使用一些花哨的 shmansy jQuery 在行之间下拉一个信息区域。

```
 ___   ___
| * | | ! |
----- -----
| Someinfo|
 ___   ___
| * | | * |
----- ----- 
```

关于确定中断发生在哪里的任何想法？

PS我浮动并让它自动换行的原因是让它响应。现在，如果我调整浏览器的大小，它会相应地包装这些框。我不想硬编码列宽。

**[编辑]** 感谢 Explosion Pills 提供的答案，我能够想出一个解决方案。

```
// Offset of first element
var first = $(".tool:first").offset().left;
var offset = 0;
var count = 0;

$(".box").each(function () {

   // Get offset            
   offset = $(this).offset().left;

   // If not first box and offset is equal to first box offset
   if(count > 0 && offset == first)
   {
      // Show where break is
  console.log("Breaks on element: " + count);
   }

   // Next box
   count++;
}); 
```

这会在控制台中输出以下内容：

```
Breaks on element: 7 
Breaks on element: 14
Breaks on element: 21
Breaks on element: 28 
```

当我有 30 个盒子时，最终是 7 个盒子宽和 5 排（最后一排只有 2 个盒子）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T18:51:48.787

只需将容器的宽度除以盒子的宽度..
（*假设正方形的宽度相等..*）

这将选择每一行的最后一个元素

```
var wrapper = $('.wrapper'),
    boxes = wrapper.children(),
    boxSize = boxes.first().outerWidth(true);

$(window).resize(function(){
    var w = wrapper.width(),
        breakat = Math.floor( w / boxSize); // this calculates how many items fit in a row 

    last_per_row = boxes.filter(':nth-child('+breakat+'n)') // target the last element of each row
    // do what you want with the last_per_row elements..
}); 
```

**演示在** [http://jsfiddle.net/gaby/kXyqG/](http://jsfiddle.net/gaby/kXyqG/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T19:06:56.453

我建议您遍历元素并比较顶部位置：

```
el.position().top; 
```

如果最高值不同 - 此元素在下一行！

这是小提琴：http: [//jsfiddle.net/J8syA/1/](http://jsfiddle.net/J8syA/1/)

这种解决方案的优点是您不需要知道元素、填充等的确切像素宽度。如果您的 css 将更改，此代码仍会找到行中的最后一个元素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T18:39:51.960

```
var offset = 0;
var last = 0;
$(".wrappable-box").each(function () {
   offset = $(this).offset().left;
   if (offset < last) {
      //this is the first box after a wrap
   }
   last = offset;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T20:49:38.933

示例：http: [//jsfiddle.net/gvL5ybsq/](http://jsfiddle.net/gvL5ybsq/)

```
function getLastElementInRow(el) {

    var top = el.offset().top,
        next = el.next();

    if (next.size() == 0)
        return el;

    var nextTop = next.offset().top;

    if (nextTop > top)
        return el;

    return getLastElementInRow(next);
}; 
```

# php - php有omniauth吗？

> ID：11401026
> 
> 赞同：7
> 
> 时间：2012-07-09T18:36:41.760
> 
> 标签：php, authentication, omniauth

Omniauth 是一个包装器，它通过多个第三方供应商对 Ruby on Rails 应用程序的身份验证进行标准化。

有关更多信息，请参阅 [https://github.com/intridea/omniauth/](https://github.com/intridea/omniauth/)

是否有类似的库可以为 PHP Web 应用程序执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:57:52.500

看起来[HybridAuth](http://hybridauth.sourceforge.net/index.html)是其中一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T09:29:38.523

这个[PHP oAuth API 库](http://www.phpclasses.org/package/7700-PHP-Authorize-and-access-APIs-using-OAuth.html)带有内置支持以集成许多 oAuth 服务器，但它可以配置为访问尚未内置支持的任何其他服务器。它在同一个类 API 下透明地支持 oAuth 1.0、1.0a 和 2.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:30:11.320

查看[Opauth](http://opauth.org)。这是一个受 OmniAuth 启发的 PHP 身份验证框架。

它允许开发人员通过下载和删除策略轻松实现对 3rd 方提供商的身份验证。

免责声明：我是 Opauth 的作者。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-09T18:39:23.597

查看[OpenID](http://openid.net/)，我不熟悉您要询问的框架，但它似乎可以满足您的要求。Stack Exchange 网络也实现了它，这就是我们可以使用 Google 帐户等登录的方式。

# powershell - Powershell remove-snapshot cmdlet

> ID：11401031
> 
> 赞同：1
> 
> 时间：2012-07-09T18:37:02.620
> 
> 标签：powershell, vmware

I'm working on a small script that will get all the snapshots in a VM and remove all snapshots in the VM except for the 6 newest snapshots, based off the description.

Right now my code looks like this:

```
get-snapshot -vm "test" | sort -property description | remove-snapshot ? 
```

I am using get-date to make the description for each VM be the date on which it was created, and want to remove all but the 6 newest snapshots. What am I missing with my script to accomplish this task?

I was thinking of using the -getchildren however I'm unable to figure out how to get it to where it would delete snapshots 7 and on.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:19:51.140

A snapshot has a property called Created so you can sort on this property and skip the first 6\. Test this in a test environment and remove the WhatIf switch to delete the snapshots.

```
Get-Snapshot -VM test | 
Sort-Object Created | 
Select-Object -Skip 6 | 
Remove-Snapshot -Confirm:$false -WhatIf 
```

# css - 使用 max-width & width:100%，正确的方法是什么？

> ID：11401033
> 
> 赞同：0
> 
> 时间：2012-07-09T18:37:12.663
> 
> 标签：css

我正在使用这个 CSS，它适用于除 chrome 之外的所有浏览器。

CSS：

```
#header {
    width: 100%;
    max-width: 1024px;
} 
```

HTML：

```
<table id="header">
    <tr>
        <td>
        </td>
    </tr>
</table> 
```

我希望#header 尽可能地扩展，但最大为 1024px。在 chrome 上它只是扩展了 100%。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:52:50.963

尝试添加`display: block`到 CSS。

```
#header {
    background:red;
    width: 100%;
    max-width: 300px;
    height:100px;
    display: block;
}​ 
```

JS 小提琴：http: [//jsfiddle.net/nvkxR/](http://jsfiddle.net/nvkxR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:56:57.633

您所要做的就是将 设置`table`为`display: block`。

见这里：http: [//jsfiddle.net/SrAwx/2/](http://jsfiddle.net/SrAwx/2/)

# github - 我似乎无法整合youtrack和github

> ID：11401035
> 
> 赞同：0
> 
> 时间：2012-07-09T18:37:19.560
> 
> 标签：github, issue-tracking, youtrack

实际上它看起来很简单。

这是我所做的事情：

*   已经在 Github 上有一个项目
*   在 Youtrack 上创建一个项目
*   在 Youtrack 上创建“MD-Committers”组，授予所有项目的管理员权限。
*   将自己添加到组中。
*   使用以下选项为 Youtrack 创建提交后服务挂钩

.

```
url: http://myusername.myjetbrains.com/youtrack  
committers: MB-Committers  
username: root  
password: ******
active: True 
```

有了这些设置，我`Test Hook`按钮说`Payload sent successfully`这意味着，我想，我已经正确设置了。

然后，

*   创建一个问题：`MD-2 integration test`
*   提交并推送到`dev`带有注释的分支：`#MD-2 Fixed integration-test`

此时，我应该能够看到设置为的问题状态`Fixed`并在历史记录中看到提交。但是，**历史记录中没有状态更新，也没有提交**。

Youtrack 和 Github 上的我的电子邮件地址是相同的，唯一不同的是，在提交时，我使用我的全名而不是我的昵称。

结果如下`git log`：

```
commit 3e91ec7021b2a87a7e4b1b79e0f53e67707e8bf4
Author: Umur Kontacı <fastreload@gmail.com>
Date:   Mon Jul 9 21:10:04 2012 +0300

    #MB-2 Fixed integration-test

commit 48686795be37aa69ca2dd7b2cd176b57945dc229
Author: Umur Kontacı <fastreload@gmail.com>
Date:   Mon Jul 9 21:05:14 2012 +0300

    #MB-2 fixed integration-test

commit 8faa55c0589e3d0f91a9988fa5aa60126651ba69
Author: Umur Kontacı <fastreload@gmail.com>
Date:   Mon Jul 9 21:04:11 2012 +0300

    #MB-2 finished integration-test

commit 4b41acfd17fbeba6b220adaef7b0dd113130a037
Author: Umur Kontacı <fastreload@gmail.com>
Date:   Mon Jul 9 20:55:13 2012 +0300

    [Finished MB-2] integration-test 
```

没有任何提交对`Youtrack`.

我到底在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-24T02:49:48.490

YouTrack 将 GitHub 评论解析`[some comment text] #issueID <command_1> [command_2] ...[command_n]`为该[链接](http://confluence.jetbrains.com/display/YTD5/GitHub+Integration)提到的以下形式。

经验法则是，任何评论都应该放在**前面** ，可确认的`#issueID`YouTrack 命令应该**放在**`#issueID`.

因此，`integration-test`可能无法在 YouTrack 中正确确认，因为`integration-test`只是作为未知的 YouTrack 命令处理。

**一些评论 #MD-2 Fixed**应该可以工作，或者**#MD-2 Fixed tag integration-test**可能会将您的问题更改为 Fixed 状态和`integration-test`标记。

示例命令可以在[http://confluence.jetbrains.com/display/YTD5/Command+Grammar找到](http://confluence.jetbrains.com/display/YTD5/Command+Grammar)

*   注 1：建议您观看演练视频[http://www.youtube.com/watch?v=0iK1J_fWhns](http://www.youtube.com/watch?v=0iK1J_fWhns)
*   注意2：您可能`MB-Committers`在帖子中输入错误。大概`MD`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:56:21.500

尝试使用您的 JetBrains 帐户登录而不是 root。

# php - 使用 php Imagemagick 调整图像大小

> ID：11401039
> 
> 赞同：3
> 
> 时间：2012-07-09T18:37:42.987
> 
> 标签：php, imagemagick

我正在尝试使用 imagemagick 的函数“thumbnailImage”来调整图像的大小。现在，我之后没有对图像做任何事情，只是呼应新的尺寸，看看它是否有效。到目前为止，它不起作用。这是我的代码。注意：它确实与原始尺寸相呼应，而不是新尺寸。

```
$image = $_FILES["file"]["tmp_name"];

//Get original dimensions
list($width, $height, $type, $attr) = getimagesize($image);
echo "<BR>";
echo "ORIGINAL:";
echo "<BR>";
echo "Image width $width";
echo "<BR>";
echo "Image height " .$height;

  $max_height = 200;
    $max_width = 150;

 function thumbnail($image, $max_width, $max_height) {
        $img = new Imagick($image);
        $img->thumbnailImage($max_width, $max_height, TRUE);
        return $img;
    }
thumbnail($image, $max_width, $max_height);

//get new dimensions
    list($width, $height, $type, $attr) = getimagesize($img);
    echo "<BR>";
    echo "NEW:";
    echo "<BR>";
    echo "Image width $width";
    echo "<BR>";
    echo "Image height " .$height; 
```

它甚至没有显示第二组回声。现在有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-03T02:07:31.983

此代码将起作用

```
$image = $_FILES["file"]["tmp_name"]; 
```

从你想要的任何地方获取文件等等。你正在使用一个有返回值的函数，但从来没有设置一个 var 让它返回。您还需要保存文件才能使用 getimagesize。

```
<?
    // $image = $_FILES["file"]["tmp_name"]; // get the file from where ever you want etc
    /*
    you are using a function with a return value but never set up a var for it to return to
    as well you need to save the file in order to use getimagesize

    */
    $image = 'test.png';;

    //Get original dimensions
    list($width, $height, $type, $attr) = getimagesize($image);
    echo "<BR>";
    echo "ORIGINAL:";
    echo "<BR>";
    echo "Image width $width";
    echo "<BR>";
    echo "Image height " .$height;

      $max_height = 200;
        $max_width = 150;

     function thumbnail($image, $max_width, $max_height) {
            $img = new Imagick($image);
            $img->thumbnailImage($max_width, $max_height, TRUE);
            return $img;
        }
     // orginal line    thumbnail($image, $max_width, $max_height);
    $img=thumbnail($image, $max_width, $max_height);
    file_put_contents('testmeResize.png',$img );

    //get new dimensions
        list($width, $height, $type, $attr) = getimagesize('testmeResize.png');
        echo "<BR>";
        echo "NEW:";
        echo "<BR>";
        echo "Image width $width";
        echo "<BR>";
        echo "Image height " .$height;
        // we set it to display the image for proof it works etc
        ?>
        <br>
        <img alt="" src="testmeResize.png"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:27:56.760

通过您的修改，您可以使用以下内容来获取宽度和高度：

```
$img = thumbnail($image, $max_width, $max_height);
$width = $img->getImageWidth();
$height = $img->getImageHeight();

var_dump($width, $height); 
```

[getSize](http://php.net/imagick.getsize)方法没有记录在案，它的返回值也不是人们所期望的，所以要小心！

# java - 登录后重定向到正确的视图

> ID：11401042
> 
> 赞同：0
> 
> 时间：2012-07-09T18:38:03.897
> 
> 标签：java, spring, spring-mvc, velocity

我正在尝试为 webapp 实现登录功能。有一个使用 JQuery 的 Javascript 版本，还有一个非 Javascript 版本。Javascript 版本运行良好，但非 JS 版本有问题：

目前，当用户单击“登录”时，我正在使用导致显示登录表单的参数重新加载同一页面（这意味着我没有明确的登录视图）。

登录后或出现任何输入错误时，我希望 ViewController 返回用户启动登录过程的视图。我不能为此使用重定向，因为特别是当时的rejectedValues 会丢失。我真正需要做的是重定向到打开登录表单的视图名称。

有没有一种优雅的方法可以做到这一点，或者使用单独的登录模板只是一个更好的主意？

提前感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:15:24.060

没有明确需要使用 spring 进行重定向（我猜您正在使用`RedirectView`or `"redirect://"`），您只需将参数传递给同一个视图（使用`ModelAndView`或使用任何您使用的），指示您是否应该显示登录表单。

如果您使用了经典的`#springFormInput`, 并`#springShowErrors`相应地使用了标签，则错误和值将在视图中恢复，并显示在登录表单中，因为您已在控制器中传递了变量来完成此操作。

希望能帮助到你。

# sql-server - SQL - 分区对索引和事务日志的影响

> ID：11401045
> 
> 赞同：1
> 
> 时间：2012-07-09T18:38:08.230
> 
> 标签：sql-server, database-partitioning, transaction-log, reindex

问题：我想知道是否可以在不填写事务日志的情况下对表应用索引。

详细信息：我有一个 800GB 的表。几个月前，我去应用了一个索引并且交易日志填满了（出于显而易见的原因 - 我什至愚蠢地尝试它）。相反，我不得不重新创建表，应用我想要的索引，然后复制记录。

现在我们要在这个表上设置分区。我想知道是否删除聚集索引并在分区布局上应用新的聚集索引，如果它仍然会填满事务日志（假设我每个分区有 1000 万行）？或者 tlog 不会填满，因为索引也会被分区，这将允许 SQL 服务器更快地完成索引并能够检查点？

有人知道吗？否则，我可以再次重新创建表并将分区内容应用于它并重新填充它，但显然这涉及更多。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:44:03.393

应用分区方案将导致巨大的日志，是的。

首先，我建议您看看是否可以（如果可能）实现[最小登录操作](http://msdn.microsoft.com/en-us/library/ms191244%28v=sql.105%29.aspx)。如果数据库处于批量记录模式，则脱机 CREATE INDEX 需要进行最低限度的记录。

如果不可能（例如，需要完全恢复），我会考虑在线移动到分区表。在线操作是小批量操作并且经常提交。只要您经常备份日志，它就不会增长到那么大。

# java - 为什么 setBackgroundColor() 仅在我的自定义主题中失败？

> ID：11401048
> 
> 赞同：0
> 
> 时间：2012-07-09T18:38:21.380
> 
> 标签：java, android, styles, themes

我以为我成功地创建了一个条纹 Android ListView，其中列表项的背景颜色交替出现。当我使用 Theme.Holo.Light 作为我的应用程序的主题（在清单中）时，它可以完美地工作。但是，当我为我的应用程序定义一个自定义主题时，使用自定义背景颜色，条纹消失了，取而代之的是单一背景颜色在我的主题中定义。 **为什么我的自定义主题的背景颜色不能被 getView() 中的 setBackgroundColor() 覆盖？我该如何解决这个问题？** 谢谢！

更新：我已经意识到应用程序背景正在我的视图背景前呈现！（另外，在我的布局中的 ProgressBar 前面，完全遮住它。）如果我将 @color/background_color 设置为完全透明，则条纹会显示出来。那么，问题来了，**为什么我的主题的背景渲染在一些视图/背景前面？**

主题：

```
<style name="Basic">
    <item name="android:textColor">#000000</item>
    <item name="android:background">@color/background_color</item>
</style> 
```

获取视图（）：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LinearLayout itemView;
        Resources res = getResources();
        int[] colors = new int[] {res.getColor(R.color.list_stripe_1),res.getColor(R.color.list_stripe_2)};
        if (convertView == null){
            itemView = new LinearLayout(getContext());
            String inflater = Context.LAYOUT_INFLATER_SERVICE;
            LayoutInflater viewInflater;
            viewInflater = (LayoutInflater)getContext().getSystemService(inflater);
            viewInflater.inflate(resource, itemView, true);
        } else {
            itemView = (LinearLayout) convertView;
        }

        ////Omitting code for populating TextViews..

        itemView.setBackgroundColor(colors[position%colors.length]);
        return itemView;            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:00:29.467

不要在主题中使用设置 android:background，而是设置 android:windowBackground。我还没有完全调查为什么无法用 setBackgroundColor() 覆盖主题集背景，或者为什么使用 android:background 会导致微调器被遮挡，但使用 windowBackground 解决了这个问题。

# javascript - 防止在 php 中缓存 500 内部错误页面的问题

> ID：11401050
> 
> 赞同：0
> 
> 时间：2012-07-09T18:38:32.430
> 
> 标签：javascript, php, error-handling

我在完全正确配置 500 内部服务器错误页面的行为时遇到问题。

我有两个主要用例：

## 未发送标头

修复这里很简单，只需抛出 http 500 错误而不更改 url。

## 部分页面错误

在这种情况下，一些 html 和 http 标头已经发送到客户端。为了防止显示部分损坏的页面，我输出了导致完全重定向到错误页面 URL /error.html 的 javascript。这是为了避免显示正常页面的一部分和错误页面的一部分，并通过移动到专用的错误页面。

不幸的是，当从专用错误页面点击“返回”时，原始错误页面被缓存，并且再次执行 javascript 重定向，即使在此期间错误已得到修复。

例如，如果在 index.php 中发送标头后出现错误，javascript 将输出将用户重定向到 /error.html。在那里，他们可以返回主页（应该没问题），或者回击。当他们回击时，他们可能会得到一个缓存页面，将他们重新重定向到 error.html。index.php > error.html（回击）缓存的 index.php > error.html

避免这种情况的理想方法是什么？

在下面的代码中，我尝试在 url 中添加 #error 哈希以仅在第一次重定向，并在后续访问损坏的部分页面时启动 60 秒的刷新尝试周期。不幸的是，当我设置 #error 哈希和重定向，然后回击时，它转到 index.php，而不是 index.php#error，因此发生了缓存的无限循环。

如何优雅地处理部分页面 500 错误？

这是我的 php 自定义错误处理程序中的代码，它会导致上面列出的行为：

```
function showErrorPage() {
    if (headers_sent()) {
    // This is complicated due to the infastructure tending to have already sent headers, ...
    // ...requiring a tuned javascript redirection in many instances.

        // Output the following as html.
        ?>
        <meta http-equiv="Cache-control" content="no-cache, no-store">
        <script type='text/javascript'>
        var currentHash = location.hash;
            // UNFORTUNATELY, HERE THE HASH NEVER SHOWS AS SET!
        if(!currentHash){ // If hash wasn't already set...
            location.hash = '#error';
            location.href = 'error.html'; // Redirect once.
        } else { // Otherwise, the hash was already set, they were redirected once but came back.
            // So just display this page for a time but refresh on a slow schedule.
            setTimeout(function(){
                location.reload(true); // Non-caching refresh.
            }, 60*1000); // Reload after 1 min delay
        }
        </script>
        <?php
    } else {
        // No headers sent, so set the right headers
        header("HTTP/1.1 500 Internal Server Error");
        header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
        header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
    }
    // Regardless, include the visible error output and throw exit with error.
    include(WEB_ROOT.'error.html');
    exit(1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:07:15.383

我找到了一个有用的解决方案，如下所示：

通过 javascript，隐藏页面的所有部分并将其替换为 div 中的错误消息。具体来说，我直接写出 html，将其设置为隐藏，克隆它，删除 body 元素的所有子元素，并将错误 div 附加到 body，使其成为页面上唯一显示的内容，否则通常有很多网站元素。

# r - R如何在gplots heatmap2的右侧绘制“样本”和顶部的“变量”？

> ID：11401052
> 
> 赞同：1
> 
> 时间：2012-07-09T18:38:37.203
> 
> 标签：r, rotation, heatmap

通过使用命令：

```
heatmap.2(exp, col = greenred(100), scale="none", ColSideColors = Carcolors, 
    # dendrogram = "row",
    key=T, symkey=FALSE, density.info="none", trace="none", cexRow=1, cexCol=0.9) 
```

heatmap2 将“样本”绘制为列，将变量绘制为行。如何将热图逆时针旋转 90 度，以便样本名称列在右侧，变量列在顶部（RowSideColors 也在右侧）？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:56:52.197

我不确定我是否理解正确，但是你的矩阵的转置能完成这项工作吗？

这是一个例子：

```
 require(gplots)
data(mtcars)
x  <- as.matrix(mtcars)
heatmap.2(x) 
```

![在此处输入图像描述](../Images/8c20eca26f10652f2d40f56775118b16.png)

```
# transpose the matrix
heatmap.2(t(x)) 
```

![在此处输入图像描述](../Images/550273cc403ef36c32215c5b758336ec.png)

# java - 按下 UP 键时 Pong Paddle 底部不向上移动

> ID：11401053
> 
> 赞同：0
> 
> 时间：2012-07-09T18:38:38.410
> 
> 标签：java, swing

我正在尝试制作乒乓球游戏，但由于某种原因，我的乒乓球拍无法正常向上移动。

当我按下向下箭头键时，它向下移动就好了。但是当我按下向上箭头键时，整个桨向上变长了……如果我调整窗口大小，桨在那个位置返回到它的正常长度。如果我再次按下 UP 键，它会继续向上延伸。

我不认为这是我的代码逻辑，而是关于清除先前绘制的桨的一些东西......这是我的代码，

桨的代码：

```
import java.awt.*;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.geom.Rectangle2D;

import javax.swing.JPanel;

public class Paddle extends JPanel {

    int x;
    int y;
    int width;
    int height;

    Paddle(){
        this.x = 0;
        this.y = 0;
        this.height = 40;
        this.width = 10;
    }

    Paddle(int x, int y, int width, int height){
        this.x = x;
        this.y = y;
        this.height = height;
        this.width = width;
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.BLACK);
        g.fillRect(x, y, width, height);
    }

    public void moveDown(){
        this.y += 3;
        repaint();
        System.out.println("h: " + height + " x: " + x + " y: " + y + " getW: " + getWidth() + " getH: " + getHeight());
    }

    public void moveUp(){
        this.y -= 3;
        repaint();
        System.out.println("h: " + height + " x: " + x + " y: " + y + " getW: " + getWidth() + " getH: " + getHeight());
    }

    public int getX() {
        return x;
    }

    public void setX(int x) {
        this.x = x;
    }

    public int getY() {
        return y;
    }

    public void setY(int y) {
        this.y = y;
    }

    public int getWidth() {
        return width;
    }

    public void setWidth(int width) {
        this.width = width;
    }

    public int getHeight() {
        return height;
    }

    public void setHeight(int height) {
        this.height = height;
    }

} 
```

整个游戏的代码：

```
import java.awt.*;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Pong extends JFrame {

    Pong() {
        final Paddle p1Paddle = new Paddle();

        Paddle p2Paddle = new Paddle();
        p1Paddle.addKeyListener(new KeyAdapter() {

            @Override
            public void keyPressed(KeyEvent e) {
                // TODO Auto-generated method stub
                //super.keyPressed(arg0);

                switch (e.getKeyCode()) {
                    case KeyEvent.VK_DOWN:
                        p1Paddle.moveDown();
                        break;
                    case KeyEvent.VK_UP:
                        p1Paddle.moveUp();
                        break;
                    default:
                        System.out.println("please press up or down");
                }

            }
        });

        setLayout(new BorderLayout());
        add(p1Paddle, BorderLayout.CENTER);

        //only focused components can recieve key events...
        p1Paddle.setFocusable(true);
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new Pong();
        frame.setTitle("Pong");
        frame.setSize(650, 300);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

对此问题的任何帮助或一般代码建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:32:36.910

从代码片段中有点难以分辨，但是 KeyListeners 不是很可靠。如果按键被消耗（由 UI 和底层实现），您可能不会收到通知。

请尝试查看 InputMap 和 ActionMap。

```
InputMap im = getInputMap(JTable.WHEN_FOCUSED_COMPONENT);
ActionMap am = getActionMap();

KeyStroke downKey = KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0);
KeyStroke upKey = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0);

im.put(downKey, "Action.down");
im.put(upKey, "Action.up");

am.put("Action.down", new DownAction());
am.put("Action.up", new UpAction()); 
```

看看它会把你带到哪里......

**更新：** 啊，现在很明显，您已经覆盖了面板的 x/y 宽度/高度方法，期望布局管理器使用它们来布局组件，但并没有真正提供知道如何处理的布局管理器它。

BorderLayout 不关心你的“大小”或“位置”要求，它会用它认为你的组件应该是什么来覆盖它们。

您想要做的是使用绝对布局管理器（null）。此外，您不想实现 X/Y、宽度/高度管理，因为这已经为您处理好了。

所以。

在乒乓课上。将布局管理器从 BorderLayout 更改为 null（同时更新 add(paddle) 方法以删除 BorderLayout 引用，不是必需的，但可以消除混淆）。

在 Paddle 类中，删除所有对 x/y、宽度/高度的引用，您不需要它们。而是使用 setBounds/setLocation。

```
public class Paddle extends JPanel {

Paddle(){

        this(0, 0, 20, 40);

}

Paddle(int x, int y, int width, int height){

        setBounds(x, y, width, height);

}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.BLACK);
    // The graphics context has already been translated to x/y for use,
    // so we don't need to care about it
    g.fillRect(0, 0, getWidth(), getHeight());
}

public void moveDown(){

        setLocation(getX(), getY() + 3);

}

public void moveUp(){

        setLocation(getX(), getY() - 3);

} 
```

}

和中提琴，它有效。

# iphone - 当数组是两个数组的组合时如何区分项目？

> ID：11401058
> 
> 赞同：-2
> 
> 时间：2012-07-09T18:39:08.903
> 
> 标签：iphone, ios, ipad

我有一个 Iphone 应用程序，我正在尝试将两个数组加载到同一个表中。为此，我组合了两个数组并制作了另一个数组。然后从该数组加载它。工作正常。我需要解决的问题这两个数组项的不同单元格图像。并且详细文本标签对于`是不同的

```
 NSMutableArray *dataArray=[[NSMutableArray alloc] init];
        NSMutableArray *dataArray1=[[NSMutableArray alloc] init];
        NSDictionary *news=[dict objectForKey:@"news"];
        NSDictionary *deals=[dict objectForKey:@"deals"];
        NSLog(@"%@",[news classForCoder]);
        NSLog(@"%@",news);

        for(NSDictionary *key in news)
        { 
            if([key isKindOfClass:[NSDictionary class]])
            {
                [dataArray addObject:key];      
            }
        }

        for(NSDictionary *key in deals)
        {
            if([key isKindOfClass:[NSDictionary class]])
            {
                [dataArray1 addObject:key];        
            }
        }
self.newsarray = [[dataArray arrayByAddingObjectsFromArray:dataArray1] mutableCopy];
        //self.newssarray=dataArray;
        [self.mTableView reloadData]; 
```

` 我需要从两个数组中更改数组元素的单元格图像。如果元素来自第一个元素，那么单元格图像是另一个？有人可以告诉我实现这一点的代码片段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:06:52.077

我会创建一个属性并将其值设置为`[dataArray count]`.

只需`cellForRowAtIndexPath`执行以下操作：

```
if(indexPath.row < dataArraySize)
{
  // current row belongs to an element from the first array
}
else
{
  // second array
} 
```

`dataArraySize`如果大小发生变化，您必须在更新数据源时进行重置。

或者，如果您只想显示数据，您甚至不需要创建新的组合数组。

```
if(indexPath.row < [dataArray count])
{
  // populate row from first array
}
else
{
  // second array
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-09T19:00:43.077

一旦将它们组合在一起，就无法分辨它们来自哪个数组。我相信您需要保留一个设置为 [dataArray1 count] 的变量；然后在做你的单元格时，减少计数器，一旦它的 0 开始使用另一个单元格图像

# jquery - 使 lavalamp 从右侧开始

> ID：11401061
> 
> 赞同：0
> 
> 时间：2012-07-09T18:39:21.337
> 
> 标签：jquery, css, html

我正在使用 lavalamp 脚本进行导航。 [http://jsfiddle.net/ripsraps/cwdJ3/1/](http://jsfiddle.net/ripsraps/cwdJ3/1/) （它在小提琴上没有正确呈现）

lavalamp 从左侧开始。有什么方法可以让它从右侧开始吗？

# java - Java 枚举值子集线程安全

> ID：11401062
> 
> 赞同：0
> 
> 时间：2012-07-09T18:39:21.570
> 
> 标签：java, enums, thread-safety

> **可能重复：**
> [java中的枚举如何线程安全？](https://stackoverflow.com/questions/2531873/how-thread-safe-is-enum-in-java)

让有一个`enum`类

```
public enum Type
{
    ONE, TWO, THREE, FOUR
} 
```

在循环`Type.values()`中访问数组线程是否安全，例如在静态方法中？`for`例如：

```
public static void process()
{
    for (Type type:Type.values())
    {
        // Do something
    }
} 
```

此外，如果使用这些值的任何子集定义一个静态数组变量，那么**读取**是否是线程安全的？例如：

```
public static final Type[] TYPES = new Type[] {TWO, THREE};

public static void process()
{
    for (Type type:TYPES)
    {
        // Do something
    }
} 
```

在这两种情况下，`process()`方法可能属于与`Type` `enum`数组`types`的定义不同的类。

此外，该`TYPES`数组可以在 中定义一次，`Type` `enum`并由 that 的静态方法返回`enum`。

那么，鉴于上述情况，如果多个线程同时运行该`process()`方法，代码是否是线程安全的（至少对于读取`TYPES`数组的值而言）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:44:59.027

该方法`Type.values()`每次都返回一个新数组。这样做是因为数组是可变的，并且每次都必须返回一个新副本以保证线程安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:44:40.430

enum 保证线程安全，它们是不可变的。所以，线程不能修改枚举的状态。

第二种情况，当你定义`final`为时，它也是线程安全的，你不能修改错误的引用。

请记住，您不能只更改“引用”，但可以更改数组的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:47:59.387

其他人已经指出该`values()`方法[每次都返回一个新数组](https://stackoverflow.com/a/1163121/128397)，因此它是线程安全的。

但是，要回答您的第二个问题：

> 如果使用这些值的任何子集定义一个静态数组变量，那将是线程安全的吗？

不 ，**任何** `public static`数组都不安全，因为数组元素总是可变的。也就是说，任何线程都可以更改`TYPES[0]`为任何其他线程`Type`，这在存在多个线程的情况下是不安全的——甚至在单线程程序中也是如此。

更好的是公开 a `List<Type>`，然后可以安全地使其不可变（例如，使用`Collections.unmodifiableList()`）。

# clojure - Noir - 在这种情况下无法解析符号 html5

> ID：11401065
> 
> 赞同：2
> 
> 时间：2012-07-09T18:39:31.170
> 
> 标签：clojure, noir, hiccup

我正在尝试使用 noir 并遵循默认教程中给出的教程并使用此代码

```
(defpage "/my-page" []
  (html5
    [:h1 "This is my first page!"])) 
```

但是，clojure 抛出错误并拒绝工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:04:20.340

What does your namespace declaration look like?

Chances are you're not `use`ing `defpage` and `html5`.

`defpage` is in the `noir.core` namespace and `html5` is either in the `hiccup.page-helpers` (hiccup version < 1) or `hiccup.page` (hiccup version >= 1) namespace.

If you used the noir template, there's a decent chance these were already included.

# c# - c# Datagridview 行计算

> ID：11401069
> 
> 赞同：5
> 
> 时间：2012-07-09T18:39:38.680
> 
> 标签：c#, datagridview, date-arithmetic

我有一个带有 Datagridview 的 Windows 窗体，其中包含来自 xml 文件的数据。DGV 设置如下：日期、产品、价格

有 10 行数据。

我试图计算价格从一行到下一行的变化并且难以找到解决方案。例如：

```
1/1/12, ABC, $2.00
1/1/12, ABC, $2.50

Net Change: .50 
```

跨列我可以使用 Table.Columns.Expression，但我不清楚如何减去先前与当前的计算。

我考虑过遍历列，添加到新表并以这种方式计算，但似乎是一个低于标准的解决方案。一旦我得到更改，我想将其添加到该 Datagridview。

没有测试过，但是是这样的：

```
if (dataGridView1.Rows.Count > 0)
{
    specifier = "###,###.00";

    double tier1Minus = 0;
    double tier2Minus = 0;

    for (int i = 0; i < dataGridView1.Rows.Count; ++i)
    {
        tier1Minus += Convert.ToDouble(dataGridView1.Rows[i].Cells["Price"].Value);

        tier2Minus += Convert.ToDouble(dataGridView1.Rows[i+1].Cells["Price"].Value);
    }

    // then add to dataGridView1
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:45:34.857

为什么不做类似（未经测试）的事情：

```
for(int i = 0; i < dataGridView1.Rows.Count - 1; i++)
    dataGridView1.Rows[i+1].Cells["NetChange"].Value =
        Convert.ToDouble(dataGridView1.Rows[i+1].Cells["Price"].Value) - 
        Convert.ToDouble(dataGridView1.Rows[i].Cells["Price"].Value); 
```

或者更好的是，在您第一次从文件中导入数据并插入行时计算它。

# awk - 使用 awk 在一行上打印特定索引的字符

> ID：11401070
> 
> 赞同：43
> 
> 时间：2012-07-09T18:39:48.420
> 
> 标签：awk

好的，所以我知道使用 $ 打印行的特定参数非常简单：

```
$ cat file
hello world

$ awk '{print $1}' file
hello 
```

但是如果我想打印字符 2 到 8 怎么办？还是 3 到 7？用awk可以吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-09T18:45:14.903

```
awk '{print substr($0,2,6)}' file 
```

substr() 的语法是

`substr(string,start index,length)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T18:53:46.273

是的。您可以使用`substr`功能：

[http://www.starlink.rl.ac.uk/docs/sc4.htx/node38.html](http://www.starlink.rl.ac.uk/docs/sc4.htx/node38.html)

在您的情况下 - 对于从 2 到 8 的打印字符：

```
echo "hello" | awk '{ print substr( $0, 2, 6 ) }' 
```

结果是：

> 你好

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-07T00:47:42.700

如果 Perl 是一个选项：

```
perl -lne 'print substr($_,1,6)' file 
```

输出与@nims 的回答相同

# c - 如何在linux中将ac文件构建到共享对象（库）中

> ID：11401071
> 
> 赞同：0
> 
> 时间：2012-07-09T18:39:50.827
> 
> 标签：c, linux, shared-libraries

我需要将一个 hello world 函数构建到一个动态库中。我在linux上用C语言编码。任何人都可以帮助一些示例代码吗？并且还用于链接生成的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:57:10.760

首先将文件编译为目标代码

```
$gcc -Wall -fPIC -c test1.c test2.c 
```

`-fPIC`意味着它将产生与位置无关的代码。

```
$gcc -shared -o libtest.so test1.o test2.o 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-09T19:17:46.317

挖出一份 libtool 并使用它。它知道如何在大量操作系统上编译和链接共享库的许多（令人不安的变量）细节。

[http://www.gnu.org/software/libtool/manual/html_node/Using-libtool.html](http://www.gnu.org/software/libtool/manual/html_node/Using-libtool.html)

# php - 如何更新数组值然后使用 PHP 将其存储/保存在数组中？

> ID：11401074
> 
> 赞同：1
> 
> 时间：2012-07-09T18:39:58.857
> 
> 标签：php, arrays

我正在使用如下所示的数组进行操作：

```
$pms = array(
    'msg1' => array(
        'status' => 'unread',
        'subject' => 'bla bla'
    ),
    'msg2' => array(
        'status' => 'unread',
        'subject' => 'test..'
    ),
    'msg3' => array(
        'status' => 'unread',
        'subject' => 'moreee..'
    )
); 
```

我想要实现的是能够选择“msg3”，例如，将状态从“未读”更新为“已读”并将其放回数组中的位置。

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:40:47.357

只需像任何其他数组变量一样为其分配新值：

```
$pms['msg3']['status'] = 'read'; 
```

# jquery - Coldfusion 9 JSON解析错误

> ID：11401077
> 
> 赞同：2
> 
> 时间：2012-07-09T18:40:08.057
> 
> 标签：jquery, json, coldfusion, coldfusion-9

我有一个基本上可以做到这一点的功能

```
<cffunction name="foo" access="remote" returnformat="JSON" >

     <cfreturn ["000", "001", "002"]>

<cffunction> 
```

我正在检索这个数组`jQuery.ajax`，在我看到的萤火虫`[000, "001", "002"]`中。

看看零是如何丢失他们的报价的。这导致 jQuery 通过解析错误`SyntaxError: JSON.parse: expected ',' or ']' after array element`，或者这就是我的假设。任何人都可以解释为什么 ColdFusion 没有在零周围加上引号，以及解决它的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:33:38.343

这是一个 Coldfusion 9 错误，已在 Adob​​e Coldfusion 中注册（错误 ID 83638）。您可以将您的coldfusion 升级到ColdFusion 9.0.1 来解决这个问题。您只需要安装热修复程序。

访问以下 URL 以安装热修复程序。

[http://helpx.adobe.com/coldfusion/kb/cumulative-hotfix-1-chf1-coldfusion.html](http://helpx.adobe.com/coldfusion/kb/cumulative-hotfix-1-chf1-coldfusion.html)

# ubuntu - ubuntu 12.04 中缺少 makeinfo 包

> ID：11401079
> 
> 赞同：13
> 
> 时间：2012-07-09T18:40:40.460
> 
> 标签：ubuntu, package, debian, ubuntu-12.04

请问有人可以给我答案吗，我已经尝试过了

```
sudo apt-get install makeinfo textinfo texi2html 
```

但我仍然收到错误“无法找到包裹”。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T08:47:02.820

包名是`texinfo`. 请参阅[http://packages.ubuntu.com/search?searchon=contents&keywords=makeinfo&mode=exactfilename&suite=precise&arch=any](http://packages.ubuntu.com/search?searchon=contents&keywords=makeinfo&mode=exactfilename&suite=precise&arch=any)或在`apt-file`本地安装搜索工具。

# wordpress - WordPress：在模板中插入自定义标记

> ID：11401081
> 
> 赞同：1
> 
> 时间：2012-07-09T18:40:44.937
> 
> 标签：wordpress, wordpress-theming

我有一个 page.php 模板，我希望将第一部分包装起来`<div id="featured">`以不同的样式设置它。我该怎么做？

我不能在我的模板中插入 div，因为`the_content()`它只是输出整个内容。我可以在 HTML 模式下在编辑器中插入额外的标记，但是我必须为每个新页面重复这个过程。此外，编辑器似乎`p`无缘无故地插入了空标签。

标记看起来像这样：

```
<img>
<p>

<p>
<p>
<P>
... 
```

我想要的是：

```
<div id="featured">
 <img>
 <p>
</div>

<p>
<p>
... 
```

最好的方法是什么？

**编辑**：感谢您的回答。经过更多搜索后，我找到了我正在寻找的东西，并不像我希望的那么简单，但这就是生活:)
[http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-内容编辑器/](http://wp.smashingmagazine.com/2011/10/14/advanced-layout-templates-in-wordpress-content-editor/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:47:10.007

精选图片和摘录的经典案例！

你会在你的functions.php中启用这两者

```
add_post_type_support( 'page', 'excerpt' );
add_theme_support( 'post-thumbnails'); 
```

然后在您的模板文件（page.php 用于页面，single.php 用于帖子）中，您将拥有

```
 <div id="featured">

      // This is your excerpt

        <?php if(!empty($post->post_excerpt)) { ?>

            <div class="your-excerpt"><?php the_excerpt(); ?></div>

       <?php } ?>

     // And this is your featured image - pulled in at 960 wide

        <?php if (function_exists('has_post_thumbnail') && has_post_thumbnail()) {

            $img_src = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), array( 960,960 )); ?>

            <div class="the-image">
                <img src="<?php echo $img_src[0]; ?>" /> 
            </div>

    <?php }; ?>

  </div> 
```

为了确保节选和特色图像在后端可见，在您的页面和帖子编辑屏幕中点击右上角的“屏幕选项”选项卡，并从下拉菜单中确保选中这些框。将您的文本添加到摘录输入框中，然后通过右侧的特色图片对话框上传您的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:54:53.977

您可以使用 Wordpress API 过滤 the_content()，不过，我不知道您是否可以自己完成此操作。看看这个插件

[http://wordpress.org/extend/plugins/text-replace/](http://wordpress.org/extend/plugins/text-replace/)

哪个在内容中进行了一些搜索和替换-也许您可以使用它。此处描述了过滤 the_content 的 API

[http://codex.wordpress.org/Plugin_API/Filter_Reference](http://codex.wordpress.org/Plugin_API/Filter_Reference)

# spring - 如何从 CAS 登录页面添加指向新页面的链接

> ID：11401088
> 
> 赞同：1
> 
> 时间：2012-07-09T18:41:24.507
> 
> 标签：spring, jsp, spring-security, cas, jasig

我是 JASIG CAS 的新手，我正在创建一些新页面，这些页面将从 CAS 登录页面链接（例如，密码重置、创建新帐户）。除了为`WEB-INF/view/jsp/default/ui/`. *我已经尝试从casLoginView.jsp*文件中直接链接到新的 JSP 文件，带有和不带有文件扩展名。我还尝试更改*web.xml*为我的新 JSP添加一个新`<servlet-mapping>`的。`<url-pattern>`两种尝试都没有奏效：相反，指向新 JSP 的链接只是重新加载登录页面。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:40:22.750

似乎新链接是安全资源，这是再次显示登录屏幕的原因。您必须在**securityContext.xml**文件中将新 jsps 的访问级别更改为**Ananymous级别。**

 **我已经完成了同样的任务。**securityContext.xml**中有我的一部分

 **```
<sec:intercept-url pattern="/changePassword.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> 
<sec:intercept-url pattern="/resetPassword.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:52:53.377

在四处寻找正确的关键字后，看来我必须将新页面放在外面`/WEB-INF`才能访问该页面。根据[Java Servlet 规范 v2.4，第 70 页](http://download.oracle.com/otndocs/jcp/servlet-2.4-fr-spec-oth-JSpec/ "Java Servlet 规范 v2.4")，Web 服务器无法在`/WEB-INF`. `/webapp`所以我把我的新页面移到了外部的根目录`/WEB-INF`，所以现在我可以链接到新的 JSP 文件，包括它的文件扩展名（例如，`https://localhost:8443/newPage.jsp`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:20:44.190

在上一个 CAS 服务器版本 (3.5.0) 中，可以使用处理密码重置的 LPPE 模块。您可能会对它感兴趣：[https](https://issues.jasig.org/browse/CAS-948) ://issues.jasig.org/browse/CAS-948 。最好的问候，杰罗姆****

# c# - C# 控制台日志记录：它会有内存问题吗？

> ID：11401091
> 
> 赞同：3
> 
> 时间：2012-07-09T18:41:33.893
> 
> 标签：c#, windows, logging, console

所以我正在使用一个控制台应用程序，它一次可以持续数天、数周或数月。

它将有用的信息记录到一个文本文件中，但它也写入控制台。我是否必须担心控制台内存由于某种原因没有被清除。好像没问题。

我写了一个小测试来运行午餐。我添加了一些随机间隔的字母，以便我的同事认为我必须处理一些大的东西并且可以吃更长的午餐。

```
for (Int64 i = 0; i < 1000000000000000000; i++)
            {
                string random = Path.GetRandomFileName();
                random = random.Replace(".", "");
                random = random.Replace("m", "               ");
                random = random.Replace("a", "                                  ");
                random = random.Replace("h", "                         ");

                Console.WriteLine("i " + i + "   " + random);

            } 
```

因此，在不写入文件的情况下，内存看起来很稳定。我只是想确认一下，如果我确实有内存问题，那不是来自控制台...

如果我也将它记录到文本文件中，内存确实会略微攀升。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:44:38.430

> 它将有用的信息记录到一个文本文件中，但它也写入控制台。我是否必须担心控制台内存由于某种原因没有被清除。好像没问题。

除非您将控制台设置为具有*巨大的*缓冲区，或者将其重定向到内存文件系统或类似的东西。在正常情况下，应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:37:36.407

不是问题，任何由 Console.SetBufferSize() 指定的从控制台缓冲区滚动出来的文本都属于位桶。最大缓冲区大小为 64KB，这是 Console 类忘记检查的限制。

# c# - Cache.Get 总是返回 null

> ID：11401092
> 
> 赞同：3
> 
> 时间：2012-07-09T18:41:35.327
> 
> 标签：c#, asp.net, web-services

我正在尝试缓存数据并一直失败。正如您在下面的代码中看到的，我调用 Web 服务返回一个名为“类别”的数组。这个电话是成功的，我得到了信息。在使用结果填充下拉列表后，我使用 Insert 来存储要缓存的信息。页面刷新后（我想我应该说回发以外的任何内容），我检查缓存以查看信息是否存在。从来都不是。在这个问题上抓挠我的头......

```
if (! IsPostBack)
{
    //See if the results have been cached.  With arrays and checking for null, you have to
    //check the array itself before its elements can be checked.
    string[] saveCatList = Cache.Get("Categories" + Session["sessionID"]) as string[];
    if (saveCatList == null || string.IsNullOrEmpty(saveCatList[0]))
    {
        WBDEMOReference.getcatlist_itemcategories[] categories;
        strResult = callWebServ.getcatlist(Session["sessionID"].ToString(),
                    out strResultText, out dNumOfCat, out categories);

        for (int i = 0; i < categories.Length; i++)
        {
            //ddCat is the ID number of the category drop down list
            ddCat.Items.Add(new ListItem(categories[i].categorydesc.ToString(),
                                         categories[i].categorynumber.ToString()));
        }

        //Store the array into cache. 'Cache.Remove' will remove the cache for that key
        Cache.Insert("Categories" + Session["sessionID"], categories, null,
            DateTime.Now.AddMinutes(5), System.Web.Caching.Cache.NoSlidingExpiration);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:17:10.473

我认为 sJhonny 在评论中得到了它。您将`categories`（数组`WBDEMOReference.getcatlist_itemcategories`）放入缓存中，但`as string[]`在将其取出时执行。与 as 关键字不匹配的类型将导致 null 值。尝试更改`as string[]`或`as WBDEMOReference.getcatlist_itemcategories[]`添加检查以查看它是否存在而不使用强制转换`as string[]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:55:00.497

看起来您正在使用未在 webcontext 中使用的 HttpContext Cache 可以为 null，因此建议是 HttpRuntime Cache。运行时缓存将始终在您的应用程序中可用，例如即使在控制台应用程序中

甚至 HttpContext 在后台使用 HttpRuntime Cache 但在您的场景中看起来运行时缓存可能会完成这项工作

如果有人纠正我给出的建议是错误的，我很乐意删除我的答案

# c - 通过网络连接发送 C 中联合的内容

> ID：11401095
> 
> 赞同：1
> 
> 时间：2012-07-09T18:41:54.377
> 
> 标签：c, serialization, unions

我试图`union`在 Linux 环境中理解和使用 C 语言中的 a 。假设我有以下工会

```
union test {
    int one;
    long two;
} t1; 
```

如果我要写入`t1.one`网络文件描述符（socket fd），那么额外的零将被写入 fd，因为联合选择了最大的元素，即 2；结构联合可能会变得更糟。有人可以告诉我如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:22:52.810

An`union`具有最大元素的大小（在这种情况下`long`），不像结构。通过更改`one`，您将覆盖 long 的前 32 位（在 32 位 OS 16 上），通过更改`two`整个空间将被覆盖并`one`丢失。

### `union test`在 64 位操作系统上：

```
-      64 bit      +
│    union test    │
├──────────────────┤
│ long             │
├─────────┬────────┘
│ int     |
└─────────┘ 
```

### `struct test`在 64 位操作系统上：

```
-           96 bit           +
│         struct test        │
├──────────────────┬─────────┤
│ long             │ int     │
└──────────────────┴─────────┘ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:59:10.560

不，如果您写入`test.one`网络 fd，您将准确写入`sizeof (int)`字节。 `test.one`是一个`int`对象；只要您不访问整个工会，它恰好是工会成员的事实是无关紧要的。

如果您编写整个联合，那么您当然会编写联合的完整大小，*至少*是其最大成员的大小。

所以不要那样做。

跟踪工会的哪个成员是当前的（即，您最近为哪个成员分配了值），然后只使用该成员。

再说一次，鉴于您给我们的信息很少，不清楚使用联合是否有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:50:00.127

> 如果我要将 test.one 写入网络 fd，那么额外的零将写入 fd

尽管将写入额外的字节是正确的，但这些字节的内容不一定全为零：它是未定义的。通常，通过其他字段读取属于您已写入某些数据的区域之外的联合字节是未定义的行为。如果要控制写入的数据量，则需要提供要写入的特定类型。

# xamarin.ios - 如何正确终止 MonoTouch 应用程序？

> ID：11401098
> 
> 赞同：2
> 
> 时间：2012-07-09T18:42:18.653
> 
> 标签：xamarin.ios, terminate

我正在使用以下代码，但即使在我调用它之后，我的应用程序仍在 iOS 任务管理器中（双击主页按钮）。

```
UIApplication.SharedApplication.PerformSelector(
     new MonoTouch.ObjCRuntime.Selector("terminateWithSuccess"), null, 0f); 
```

当我从任务管理器中删除应用程序时（在任务管理器中按住应用程序 2 秒钟，然后按红色减号），它会从任务管理器中消失。

如果我使用上面的代码终止它，为什么它还在任务管理器中？如何以编程方式将其杀死以使其从任务管理器中消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:45:20.110

根据 Apple 的[人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html)，这是一个禁忌。这样做可能会导致您的应用被拒绝

> 不要以编程方式退出
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。
> 
> 显示一个有吸引力的屏幕，描述问题并提出更正建议。屏幕提供反馈，让用户确信您的应用程序没有问题。它使用户处于控制之中，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序
> 
> 如果您的应用程序的某些功能无法正常工作，请在人们激活该功能时显示屏幕或警报。仅当人们尝试访问不起作用的功能时才显示警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:50:36.823

您通过 iOS 界面强制关闭应用程序 (http://support.apple.com/kb/ht5137) 不会将其从“任务管理器”中删除。“任务管理器”确实显示了最近的应用程序列表。

以编程方式终止应用程序不会将其从最近的应用程序列表中删除。

# java - Java-Gearman-Service - 处理 GearmanJobEventCallback ::onEvent 和 byte[] 在 GearmanFunction

> ID：11401099
> 
> 赞同：0
> 
> 时间：2012-07-09T18:42:19.743
> 
> 标签：java, callback, client, gearman, worker

我使用 Gearman 来分配不同的任务，因此我使用[java-gearman-service](http://java-gearman-service.googlecode.com/)来实现客户端和工作人员。

但是，我无法弄清楚我收到的数据

*   [`GearmanJobEventCallback<T>::onEvent`](http://java-gearman-service.googlecode.com/svn/javadoc/org/gearman/GearmanJobEventCallback.html#onEvent%28A,%20org.gearman.GearmanJobEvent%29)和
*   [`GearmanFunction::work`](http://java-gearman-service.googlecode.com/svn/javadoc/org/gearman/GearmanFunction.html#work%28java.lang.String,%20byte%5B%5D,%20org.gearman.GearmanFunctionCallback%29)

`GearmanJobEventCallback<T>::onEvent`：

如何将`event.getData()`字节数组转换为我需要的数据？例如状态或返回的数据？当我发送 status(3,10) 它返回一个字节数组 [51,0,49,48] - 这对我的客户来说不是很有用。使用 ObjectInputStream 反序列化似乎并不成功。

与工作方法的返回数据相同，我该如何“解码”呢？

我如何从方法中“解码”`data`参数（字节数组）？`work``GearmanFunction`

任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:36:03.560

好的，看来这个库的创建者似乎让用户有点需要处理......：D

我找到了解决这个问题的方法，希望它可以帮助遇到这个问题的任何人。

```
String numeratorStr = "";
String denominatorStr = "";
boolean writeNumerator = true;
for (byte b : event.getData()) {
    if (b == 0) {
        writeNumerator = false;
        continue;
    }
    if (writeNumerator) {
        numeratorStr += (char) b;
    } else {
        denominatorStr += (char) b;
    }
}
int numerator = Integer.parseInt(numeratorStr);
int denominator = Integer.parseInt(denominatorStr); 
```

字节数组值似乎是 ASCII 表中的条目，并放在一个字节数组中，如下所示：[http ://code.google.com/p/java-gearman-service/source/search?q=GEARMAN_JOB_STATUS&origq=GEARMAN_JOB_STATUS&btnG =搜索+主干](http://code.google.com/p/java-gearman-service/source/search?q=GEARMAN_JOB_STATUS&origq=GEARMAN_JOB_STATUS&btnG=Search+Trunk)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:00:56.170

您的解决方案看起来很适合解码“状态”回调。状态数据包有点奇怪，不太适合 API，不幸的是，没有太多关于如何处理它的文档。

另一个想法可能是使用方法[GearmanFunctionCallback#sendData(byte[])](http://java-gearman-service.googlecode.com/svn/javadoc/org/gearman/GearmanFunctionCallback.html#sendData%28byte%5B%5D%29)。使用 sendData 方法，您可以发送任何格式的任何类型的数据，并允许客户端解码该值。如果您已经在使用“数据”通道，您还可以使用“警告”通道将无类型数据发送回客户端。

# sql-server - 缺少索引 - 执行计划 SQL Server 2008 中的非聚集索引

> ID：11401101
> 
> 赞同：3
> 
> 时间：2012-07-09T18:42:25.953
> 
> 标签：sql-server, sql-server-2008, indexing

![在此处输入图像描述](../Images/e0d6f68d5da06c1d4b01bd8f24403f61.png)

如您所见，我的`tblClaims`桌子上有一个三字段外键。该`id`表的 是一个连续的整数。运行特定查询时，我注意到查询太长而无法运行。所以我包括了执行计划并被告知

`missing index: create nonclustered index on patientid, admissiondate, dischargedate`

我很想做

```
create nonclustered index ix_tblClaims on tblClaims
(patientID asc, admissiondate asc, dischargedate asc) 
```

我在这里和那里阅读了一些关于多列索引或以不同方式索引每列的内容。如果我遵循单独索引每一列的方法，只使用一个索引是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:06:12.117

是的。这样想，如果我给你一张按名称列出所有城镇的地图，你会很快找到你想去的城镇。如果它随后按顺序列出了所有街道地址，那么您可以很快找到“10 london road”地址，但您可能需要一段时间才能找到您正在寻找的城镇中的地址。如果它的后面有一个索引，按城镇排序，然后按街道排序，那么您可以一步找到您要查找的实际地址，非常快。

数据库中的索引也不例外。如果您需要基于多个事物进行查找，那么您需要一个可以涵盖您正在查找的事物的索引。

# asp.net-mvc - 来自服务层的 ASP.NET MVC 客户端验证

> ID：11401103
> 
> 赞同：0
> 
> 时间：2012-07-09T18:42:37.280
> 
> 标签：asp.net-mvc, validation, model-view-controller, service-layer

我在关注这篇文章

[http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs)

在我的 ASP.NET MVC Web 应用程序中包含一个带有业务逻辑的服务层。

我能够将消息从服​​务层传递到`Html.ValidationSummary`使用`ModelState`类中的视图模型。

我在 View Model 上执行基本的验证逻辑（使用`DataAnnotation`属性），`ClientValidation`默认情况下我已启用，它会在**我的表单的每个字段**上显示错误消息。

来自服务层的业务逻辑错误消息`Html.ValidationSummary`仅在将表单发布到服务器后才会显示。

从服务层验证后，我想突出显示一个或多个字段，并在这些字段上显示来自服务层的消息，而不是`Html.ValidationSummary`.

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:13:57.347

以下是验证在服务器上的外观：

```
protected bool ValidateProduct(Product productToValidate)
{
    if (string.IsNullOrEmpty(productToValidate.Name))
        _validatonDictionary.AddError("Name", "Name is required.");
    if (string.IsNullOrEmpty(productToValidate.Description))
        _validatonDictionary.AddError("Description", "Description is required.");
    if (productToValidate.UnitsInStock < 0)
        _validatonDictionary.AddError("UnitsInStock", "Units in stock cannot be less than zero.");
    return _validatonDictionary.IsValid;
} 
```

您所要做的就是`ValidationMessageFor`在视图中为这些字段提供相应的帮助程序，并且来自服务器的错误消息将与相应的字段相关联：

```
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.Name)
        @Html.EditorFor(x => x.Name)
        @Html.ValidationMessageFor(x => x.Name)
    </div>
    <div>
        @Html.LabelFor(x => x.Description)
        @Html.EditorFor(x => x.Description)
        @Html.ValidationMessageFor(x => x.Description)
    </div>
    <button type="submit">Create</button>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:02:49.140

感谢达林，我找到了解决问题的方法。

详细说明：

我可以用

```
 _validatonDictionary.AddError("Name of my field", "Custom message") 
```

所以我可以显示一条消息并突出显示该特定字段（使用 DataAnnotation 非常简单）。

如果我只想在 ValidationSummary 中显示一条消息而不突出显示我使用的特定字段

```
_validatonDictionary.AddError(string.Empty, "Custom message") 
```

请注意`string.Empty`

# php - 如何序列化 svg 使其适合 cookie

> ID：11401104
> 
> 赞同：3
> 
> 时间：2012-07-09T18:42:41.773
> 
> 标签：php, serialization, cookies, image-processing, svg

我需要序列化 ​​svg 图像，以便可以将其存储到 cookie 中。

我需要设置 cookie，然后在它们返回时反序列化 svg 图像。

所以基本上我的问题归结为将 svg 序列化为可以存储在 cookie 中的东西。我怎样才能做到这一点？

我知道 php 中有 serialize() 和 unserialize()，但是 serialize 采用混合值，我不确定 svg 是否属于该类别。

我对混合值进行了一些研究，看起来它可以接受`struct`、`array`s `int`、 等，但不能接受 svg。如果我对此有误，请告诉我，因为使用序列化和反序列化会使事情变得更容易。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:13:25.947

好吧，可缩放矢量图形只是 XML，因此只是文本（通常是 UTF-8 编码，尽管它应该与 ASCII 相同，除非您明确添加任何非 ASCII 字符）。然而 SVG 字符串将包含 cookie 中不允许的特殊字符，因此您需要转义这些（分号、逗号和空格应该转义，如果我没记错的话，您可以使用 php 中的 urlencode 函数）。这就是序列化方面的全部内容。最大的问题可能是大小限制：cookie 不得超过 4096 个字符，包括名称的长度。对于更复杂的 SVG，这可能太少了。

# web-services - 我可以使用 Facebook OAuth 来保护我的 RESTful Web 服务吗？

> ID：11401108
> 
> 赞同：9
> 
> 时间：2012-07-09T18:42:56.480
> 
> 标签：web-services, security, rest, mobile, oauth

我正在编写一个允许用户通过 Facebook 注册的手机应用程序。注册后，用户可以通过我将托管的 RESTful Web 服务访问个性化信息。

我见过各种似乎使用类似设置但只向其用户提供 Facebook（或 Twitter）OAuth 身份验证的移动应用程序。我想知道这是怎么做到的？

我认为，为了保护这个 Web 服务，我可以使用基于 HTTPS 的 HTTP Basic 身份验证，并将用户的 Facebook OAuth 访问令牌作为密码。

这安全吗？其他应用程序仅通过 Facebook 注册用户时如何处理安全问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T20:06:14.217

使用这种格式的应用程序通常执行以下操作：

1.  该应用程序本身是一个在 FB 注册的应用程序 - 这意味着它有一个应用程序密钥
2.  当用户使用 FB 注册时 - 真正发生的是他们正在授予应用程序权限，允许它查看他们的数据、发布到他们的墙上等（无论应用程序请求什么权限）
3.  一旦用户登录 - 应用程序就可以从 FB 请求他们的信息，只要它使用其应用程序密钥对服务进行身份验证。

所以 - 在您的应用程序中，您通常会存储用户的 FB ID，并且当您请求数据（或请求发布到墙上等）时 - 您提交您的应用程序密钥 + 用户的 FB ID，以及您需要提供的任何操作信息。然后，FB 服务会回复您有权查看的数据 - 或执行操作，只要您有权执行它。

在 RESTful 环境中，诀窍是您应该是完全无状态的——这意味着不跟踪任何会话。但是，这很好 - 因为您的应用程序已经有它的应用程序密钥 - 所以您只需要每个请求的用户 FB ID。如果您只是将 ID 插入 cookie 或在客户端管理它，那就很容易了。这个工作怎么样？

当您在 Facebook 注册您的应用程序时，您必须提供一个用于托管该应用程序的 URL。这主要是为了支持跨站点 cookie 和 CORS 请求。换句话说：只要您的请求来自 FB 识别的与您的 App Key 相关联的 URL，FB 就知道您网站上的哪个用户 - 因为它可以完全访问自己的 cookie。

那么这对您尝试使用 FB 来启用您的网站的 OAuth 意味着什么？

它本质上意味着FB成为你的登录系统。您正在断言以下内容：

> “只要 FB 说用户就是他们所说的那样——我也相信它。”

因此 - 当用户到达您的站点并单击“使用 Facebook 登录”按钮时 - 您的站点将返回成功或失败。您可以通过查看[Facebook 开发者](http://developers.facebook.com)网站，特别是以下参考，获得有关如何实现此功能的更多信息：

1.  [Facebook登入](http://developers.facebook.com/docs/concepts/login/)
2.  [API 参考 > 登录](http://developers.facebook.com/docs/reference/login/)
3.  [登录对话框](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)
4.  [访问令牌和类型](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)
5.  [登录架构](https://developers.facebook.com/docs/concepts/login/login-architecture/)

一旦 FB 给你一个指示成功的令牌 - 你可以断言你通过 FB 的 API 获取信息的人就是使用你网站的人。因此 - 例如，如果您将他们的 FB ID 作为主键存储在数据库中 - 您现在可以根据该值从您自己的 API 过滤结果。

往返可能看起来像：

1.  未经身份验证的用户到达您的站点
2.  重定向/提供登录按钮以通过 Facebook 进行身份验证
3.  通过点击 FB Graph API 确定用户现在经过身份验证的身份
4.  您的 UI 脚本现在将从 Graph 收到的 FB ID 连同其请求提交给您的 API 层
5.  您的 API 层根据 FB ID（与您的用户记录相关联）过滤数据 - 并返回正确的数据

希望这会有所帮助。如果您有任何问题 - 请在评论中提问，我会尽力添加更多细节。

# c# - 如何清除 datagridview 中的列名

> ID：11401110
> 
> 赞同：0
> 
> 时间：2012-07-09T18:43:11.290
> 
> 标签：c#, datagridview, columnname

我使用右键菜单命名 datagridview 中的每一列，其中包含用户可以使用的所有名称。在使用每个名称时，我禁用了每个名称的右键单击菜单项，因为它被选中，以便用户不能将两列命名相同。为此，我使用了一个简单的 if 语句来查看该列名是否存在：

```
if (MyDataGridView.Columns["ColName"] != null)
   {
      ColName.Enabled = false;
   } 
```

但是，如果用户想要重命名一个列，我将无法“取消命名”该列，因为在我重命名该列之后，上面的 if 语句对两个名称都返回 true。**有没有办法清除列名，使一列没有多个与之关联的名称？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:53:59.413

[使用DisplayName](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute%28VS.90%29.aspx)属性在 datagridview 中指定列名会更合适......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:47:18.370

这应该有效：

```
MyDataGridView.Columns["ColName"].Name = string.Empty 
```

# c# - 在 2 个不同类型的视图上使用局部视图

> ID：11401111
> 
> 赞同：2
> 
> 时间：2012-07-09T18:43:15.140
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor

我有一个 Partial 视图，我想在 2 个不同的 Stronly-Typed 视图上使用它。传递的数据只是一个简单的 ID 整数，但是当我尝试在 View #2 上呈现数据时，我得到一个

> 传入字典的模型项是 type `CMESurvey.ViewModels.SurveyParticipantViewModel`，但是这个字典需要一个 type 的模型项`CMESurvey.Models.SurveyProgramModel`。

这是错误的部分视图代码：

```
@Html.Partial("SurveyProgramSubNav", new {ProgramId = Model.ProgramId}) 
```

此代码的强类型与我的部分视图强类型不同：

```
@model CMESurvey.Models.SurveyProgramModel 
```

对于局部视图，并且：

```
@model CMESurvey.ViewModels.SurveyParticipantViewModel 
```

对于我遇到问题的观点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:50:08.723

我想你想要：

```
@Html.Partial("SurveyProgramSubNav", 
   new SurveyProgramModel {ProgramId = Model.ProgramId}) 
```

指定模型的强类型而不是自动类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:48:38.997

使用 PartialViews 时，最好避免调用模型，因为不同的视图（大多数情况下）会有不同的模型。我建议您将部分视图更改为`Model.ProgramId`，`ViewBag.ProgramId`然后在操作中填充此属性，例如`ViewBag.ProgramId = whatever;`

为了使事情变得更容易，您可以使用控制器继承并将这个集合放在您的基本控制器中。

问候

# javascript - IE 中的单选按钮执行更改功能，但未显示为选中的 jquery

> ID：11401112
> 
> 赞同：0
> 
> 时间：2012-07-09T18:43:15.373
> 
> 标签：javascript, jquery, internet-explorer

我根据是否检查某些内容来添加/删除类，它在 Firefox 中工作正常，但 IE 不会显示复选框的值。更改/单击事件会触发，但单选按钮实际上并未显示选择，这会导致验证失败。知道发生了什么吗？

这是更改css的js函数的代码：

```
function CheckHandlingUnit() {
    var flag = true;

    //Material Number
    if ($("#ContentPlaceHolder2_MatNum_TB").val() == "") {
        $("#ContentPlaceHolder2_MatNum_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_MatNum_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_MatNum_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_MatNum_TB").removeClass("TBDecoRed");
    }

    //Description
    if ($("#ContentPlaceHolder2_Des_TB").val() == "") {
        $("#ContentPlaceHolder2_Des_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_Des_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_Des_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_Des_TB").removeClass("TBDecoRed");
    }

    //Material Type
    if ($("#ContentPlaceHolder2_MatType_DD").val() == "1") {
        $("#ContentPlaceHolder2_MatType_DD").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_MatType_DD").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_MatType_DD").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_MatType_DD").removeClass("TBDecoRed");
    }

    //Inventory Classification
    if ($("#ContentPlaceHolder2_Inv_DD").val() == "1") {
        $("#ContentPlaceHolder2_Inv_DD").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_Inv_DD").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_Inv_DD").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_Inv_DD").removeClass("TBDecoRed");
    }

    //Shelf Life
    if ($("#ContentPlaceHolder2_SLife_TB").val() == "" && !$("#ContentPlaceHolder2_Unlimit_CB").is(":checked")) {
        $("#ContentPlaceHolder2_SLife_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_SLife_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_SLife_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_SLife_TB").removeClass("TBDecoRed");
    }

    //Charge Number
    if ($("#ContentPlaceHolder2_Charge_TB").val() == "") {
        $("#ContentPlaceHolder2_Charge_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_Charge_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_Charge_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_Charge_TB").removeClass("TBDecoRed");
    }

    //Quantity
    if ($("#ContentPlaceHolder2_Quan_TB").val() == "") {
        $("#ContentPlaceHolder2_Quan_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_Quan_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_Quan_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_Quan_TB").removeClass("TBDecoRed");
    }

    //Serialized Radio Button
    if (!($("#ContentPlaceHolder2_Seri_RB_0").is(':checked')) &&
    !($("#ContentPlaceHolder2_Seri_RB_1").is(':checked'))) {
        $("#seriVal").show();
        flag = false;
    }
    else {
        $("#seriVal").hide();
    }

    //Moisture Sensitive Radio Button
    if (!($("#ContentPlaceHolder2_Moist_RB_0").is(':checked')) &&
    !($("#ContentPlaceHolder2_Moist_RB_1").is(':checked'))) {
        $("#moistureVal").show();
        flag = false;
    }
    else {
        $("#moistureVal").hide();
    }

    //Hazardous Radio Button
    if (!($("#ContentPlaceHolder2_Haz_RB_0").is(':checked')) &&
    !($("#ContentPlaceHolder2_Haz_RB_1").is(':checked'))) {
        $("#hazardVal").show();
        flag = false;
    }
    else {
        $("#hazardVal").hide();
    }

    //Packaging Requirement
    if (!$("#ContentPlaceHolder2_PackingReq_CBL_0").is(':checked') &&
    !$("#ContentPlaceHolder2_PackingReq_CBL_1").is(':checked') &&
    !$("#ContentPlaceHolder2_PackingReq_CBL_2").is(':checked') &&
    !$("#ContentPlaceHolder2_PackingReq_CBL_3").is(':checked') &&
    !$("#ContentPlaceHolder2_PackingReq_CBL_4").is(':checked'))
    {
        $("#packageVal").show();
        flag = false;
    }
    else{
        $("#packageVal").hide();
    }

    //package Other
    if ($("#ContentPlaceHolder2_PackingReq_CBL_2").is(':checked') && $("#ContentPlaceHolder2_OtherPkgRequirent_TB").val() == "") {
        $("#ContentPlaceHolder2_OtherPkgRequirent_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_OtherPkgRequirent_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_OtherPkgRequirent_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_OtherPkgRequirent_TB").removeClass("TBDecoRed");
    }

    //Hazardous Material
    if ($("#ContentPlaceHolder2_Haz_RB_0").is(':checked') && $("#ContentPlaceHolder2_MSDS_TB").val() == "") {
        $("#ContentPlaceHolder2_MSDS_TB").addClass("TBDecoRed");
        $("#ContentPlaceHolder2_MSDS_TB").removeClass("TBDecoNone");
        flag = false;
    }
    else {
        $("#ContentPlaceHolder2_MSDS_TB").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_MSDS_TB").removeClass("TBDecoRed");
    }
    //File upload
    if ($("#ContentPlaceHolder2_Haz_RB_0").is(':checked') && $("#ContentPlaceHolder2_MSDSFileUpload").val() == "") {
        flag = false;
        $("#ContentPlaceHolder2_MSDSFileUpload").addClass("FileUploadRed");
        $("#ContentPlaceHolder2_MSDSFileUpload").removeClass("TBDecoNone");
    }
    else {
        $("#ContentPlaceHolder2_MSDSFileUpload").addClass("TBDecoNone");
        $("#ContentPlaceHolder2_MSDSFileUpload").removeClass("FileUploadRed");
    }

    return flag;
} 
```

# java - Java - 同步对象/块

> ID：11401113
> 
> 赞同：0
> 
> 时间：2012-07-09T18:43:15.763
> 
> 标签：java, synchronization

我正在寻找有关同步块的说明。考虑这个类 -

```
public class A{
Map map;

 public getValue(String key){
  return map.get(key);
 }

 public remove(String key){
  synchronized(map){
   map.remove(key);
  }
 }
} 
```

A 是单例。getValue 在整个应用程序中被多个线程大量访问。我正在添加一个新方法 remove，它从地图中删除一个键。如果按上述方式实现 remove，

1.  当一个线程在 remove 方法的同步块中时，我假设它会在 map 对象上获得一个锁。这是否意味着尝试通过 getValue 方法访问地图的其他线程将被阻止？（我希望他们这样做。）
2.  当remove方法的同步块中没有线程时，访问getValue方法的线程是否会正常运行，即不会互相阻塞？（我也想要）。

我希望 getValue 线程仅在有执行删除操作的线程时才阻塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:46:11.237

> 当一个线程在 remove 方法的同步块中时，我假设它会在 map 对象上获得一个锁。这是否意味着尝试通过 getValue 方法访问地图的其他线程将被阻止？

不，这意味着你遇到了问题，除非你碰巧使用了线程安全的映射实现。

> 当remove方法的同步块中没有线程时，访问getValue方法的线程是否会像往常一样发挥作用，即不会互相阻塞？（我也想要）。

他们不会互相阻挡，不。同样，您需要确保`Map`您正在使用的任何实现都可以，尽管它比同时阅读和写作更有*可能是好的。*

您应该考虑使用[`ConcurrentMap`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html)实现（例如[`ConcurrentHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)），此时您根本不需要任何同步。

如果您不能使用它，我建议您在*两者* `getValue`中同步`remove`- 并*测量*性能。获得一个非竞争锁相当便宜——你真的*需要*去无锁吗？（`ConcurrentHashMap`当然，使用是避免该问题的一种相当简单的方法，但在开始微优化之前，您应该始终考虑是否需要额外的复杂性来实现所需的性能。*）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T18:46:51.597

如果我正确理解了您的需求，您可以查看[ConcurrentMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentMap.html)，当然还有[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html) ，我相信它是随 Java 5.0 引入的，并且支持一定程度的并发性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:46:36.623

您没有显示 Map 实例是如何实例化的，但假设它不是线程安全的集合实例，则此代码*不是*线程安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:47:20.773

**1\. getValue() 是不同步的，当一个线程获得一个对象的锁时，它拥有对所有同步块的控制......不是非同步的......** 所以**其他线程可以访问 getValue() 当 as线程处于同步（映射）块中**

**2.使用HashTable，它是一个同步的MAP**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T18:47:31.787

你有鸡和蛋的问题

> 我希望 getValue 线程仅在有执行删除操作的线程时才阻塞。

如果没有某种线程间交互，您无法确定是否有其他线程执行`remove`.

正确的实现方式`getValue(...)`是在地图上同步。

我建议放弃自己的锁定，并使用 a`ConcurrentHashMap`并利用大量工作来提高并发性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T09:36:11.337

`synchronized(foo)`同步的一个规则是，对于同一个 foo，一次只能有一个线程在一个块中。这是*唯一*的规则`synchronized`。

嗯，有一些关于内存屏障等复杂的东西，一个*线程*可以同时在几个嵌套`synchronized(foo)`块中`foo`：

```
void thing() {
  synchronized(foo) {
    stuff(); // this works fine!
  }
}
void stuff() {
  synchronized(foo) {
    doMoreStuff();
  }
} 
```

……但上面所说的规则基本上是理解的关键`synchronized`。

# java - Servlet 未包含在 Maven 项目中

> ID：11401114
> 
> 赞同：0
> 
> 时间：2012-07-09T18:43:17.777
> 
> 标签：java, jsp, servlets, maven, jetty

有人可以帮我解决这个问题。码头找不到我的 servlet。:(

我收到以下错误-

![在此处输入图像描述](../Images/674b5cf391e67eb340df6a48a61d5e54.png)

这是我的目录结构 -

![在此处输入图像描述](../Images/7ce5908f62fa4dc42af7ae89cbb53895.png)

这是我的 Web.xml -

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
   <display-name>Archetype Created Web Application</display-name>
   <servlet>
   <servlet-name>loginSer</servlet-name>
   <display-name>loginSer</display-name>
   <description></description>
<servlet-class>launchpad.servlets.loginSer</servlet-class>
  </servlet>
  <servlet-mapping>
  <servlet-name>loginSer</servlet-name>
  <url-pattern>/loginSer</url-pattern>
  </servlet-mapping>
 </web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:44:48.690

你把它放在错误的目录下，它应该在

```
src/main/java 
```

不在

```
src/main/resource 
```

Maven 考虑编译

**更新**

> 当我将它添加到 /src/main/java 时，eclipse 无法导入 HttpServlet 类。

这是因为你在 yoru 类路径中没有 servlet-api

将依赖项添加到您的 POM，替换`${servlet-api-version}`为与您的应用程序环境匹配的适当版本

```
dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>${servlet-api-version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:00:37.160

您的异常读取`com.launchpad.servlets.LoginServlet`但您的类是`launchpad.servlets.LoginSer`您确定您正在显示准确的异常和源代码层次结构吗？

# python - 使用 PySide 在 QLabel 中显示视频流

> ID：11401115
> 
> 赞同：5
> 
> 时间：2012-07-09T18:43:27.040
> 
> 标签：python, pyqt, pyside, qpixmap, qlabel

任何人都可以为我指出如何在 PySide 中创建新的 QMovie“提供者”的正确方向吗？

我有一个视频流，我想尽可能简单地显示（没有音频，只有一系列帧速率未知且可变的帧）。[这个例子](http://qt.gitorious.org/pyside/pyside-examples/blobs/04c563f32b8c43f00cc123258295addef3a23cab/examples/widgets/movie/movie.py)看起来很完美，只是我的视频来自非常规来源。它不是文件，而是格式不规范的网络流。我可以轻松编写接收每一帧的代码，我的想法是创建一个“QMovie 提供程序”，这样我就可以在上面示例中的标签上显示此流。

我的第一个想法是继承 QMovie 并在那里覆盖一些函数，但在阅读[文档](http://www.pyside.org/docs/pyside/PySide/QtGui/QMovie.html)时我开始重新考虑这一点，因为我不知道我应该如何处理我的实例将从中读取的“设备”。

我在前面提到的文档中注意到 QMovie 使用 QImageReader 所以我的下一个想法是扩展该类并让它从我的流中读取帧。然而，这提出了类似的问题，例如，我应该如何处理“supportedImageFormats()”函数？

每次收到新帧时，我一直在尝试直接更新 QLabel 上的图像，但随后出现错误“QPixmap：在 GUI 线程之外使用像素图不安全”。

所以基本上我有点难过，非常感谢任何关于如何让 QLabel 在 PySide 应用程序中显示我的视频流的指针或教程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T01:59:18.323

以供将来参考，这是我设法使其工作的方法。

使用信号和槽机制，以下应用程序可以工作。信号/槽机制似乎发现在 up_camera_callback 函数内部创建并发送到 CameraDisplay.updateFrame 函数的图像来自不同的线程并采取了必要的预防措施。

```
class CameraDisplay(QtGui.QLabel):
  def __init__(self):
    super(CameraDisplay, self).__init__()

  def updateFrame(self, image):
    self.setPixmap(QtGui.QPixmap.fromImage(image))

class ControlCenter(QtGui.QWidget):
  up_camera_signal = QtCore.Signal(QtGui.QImage)
  up_camera = None

  def __init__(self):
    super(ControlCenter, self).__init__()
    self.up_camera = CameraDisplay()
    self.up_camera_signal.connect(self.up_camera.updateFrame)

    grid = QtGui.QGridLayout()
    grid.setSpacing(10)

    grid.addWidget(self.up_camera, 0, 0)

    self.setLayout(grid)

    self.setGeometry(300, 300, 350, 300)
    self.setWindowTitle('Control Center')
    self.show()

  def up_camera_callback(self, data):
    '''This function gets called by an external thread'''
    try:
      image = QtGui.QImage(data.data, data.width, data.height, QtGui.QImage.Format_RGB888)
      self.up_camera_signal.emit(image)

    except Exception, e:
      print(e)

if __name__ == "__main__":
  app = QtGui.QApplication(sys.argv)
  ex = ControlCenter()
  sys.exit(app.exec_()) 
```

# ruby-on-rails - Rails：批量分配假阴性和重定向

> ID：11401117
> 
> 赞同：0
> 
> 时间：2012-07-09T18:43:51.447
> 
> 标签：ruby-on-rails, variable-assignment

基于之前关于 StackOverlfow 的问答，我在 application.rb 中添加了以下内容：

```
 config.active_record.whitelist_attributes = false 
```

因为我遇到了 Can't mass-assign protected attributes 类型的错误

在我这样做之后，似乎一切正常。我现在遇到了同样的错误，但这是一个假阴性。请注意，即使我收到错误，该列实际上也已更新。

这是调试器输出：

```
Started PUT "/categories/5" for 127.0.0.1 at 2012-07-09 11:26:40 -0700
Processing by CategoriesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SifcfX29c+mGRIJXvUWGnZ8mBelMm4uZloYsoO317SY=", "admin_selections"=>{"admin1"=>"56", "admin2"=>"55", "admin3"=>"", "admin4"=>"", "admin5"=>"", "admin6"=>"", "admin7"=>"", "admin8"=>""}, "category"=>{"update_admins_field"=>"1"}, "commit"=>"Update Category", "id"=>"5"}
  Category Load (0.2ms)  SELECT `categories`.* FROM `categories` WHERE `categories`.`id` = 5 LIMIT 1
   (0.1ms)  BEGIN
   (0.2ms)  UPDATE `categories` SET `admins` = '[\"56\",\"55\",\"\"]', `updated_at` = '2012-07-09 18:26:40' WHERE `categories`.`id` = 5
   (1.3ms)  COMMIT
   (0.1ms)  BEGIN
   (0.1ms)  ROLLBACK
Completed 500 Internal Server Error in 5ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: utf8, _method, authenticity_token, category, commit, action, controller, id):
  app/controllers/categories_controller.rb:74:in `block in update'
  app/controllers/categories_controller.rb:62:in `update' 
```

似乎 MySQL 代码已正确生成，但随后出现回滚和 500 错误。

以下是 categories_controller.rb 中的相关代码：

```
def update
  @category = Category.find(params[:id])
  respond_to do |format| #this is line 62
    if params[:category][:update_admins_field]
      params['admins'] = return_admins_json (params)
      if @category.update_attribute(:admins,params['admins'])
        format.html { redirect_to @category, notice: 'Category was successfully updated.' } #line 66
        format.json { head :no_content }
      end
    else
      format.html { redirect_to @category, notice: 'Category was not successfully updated.' }
      format.json { head :no_content }
    end

    if @category.update_attributes(params)  #line 74
      format.html { redirect_to @category, notice: 'Category was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @category.errors, status: :unprocessable_entity }
    end
  end
end 
```

为什么会到第 74 行？用户不应该在第 66 行被重定向吗？为什么更新时我也会收到错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:15:14.650

您应该将 whitelist_attributes 设置为 true，并出于安全原因在每个模型中使用 attr_accessible。以下是相关信息：

[http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

另外，请阅读上面 Niiru 的评论。

编辑：

在您的控制流程中，我认为它没有按照您的意愿行事。如果它到达第 74 行，它可能通过了第一个 if 条件

```
if params[:category][:update_admins_field] 
```

然后失败了第二个 if

```
if @category.update_attribute(:admins,params['admins']) 
```

然后退出 if/else/end 并继续执行第 74 行，因为尚未调用 return。为了解决这个问题，我认为你想要这样的东西：

```
if admin category
   if update admin
      return success
   else
      return failure
   end
else
   if update normal
      return success
   else
      return failure
   end
end 
```

# html - 如何在 Sencha touch 的每一行中制作一个包含多列的列表？

> ID：11401121
> 
> 赞同：3
> 
> 时间：2012-07-09T18:44:06.107
> 
> 标签：html, cordova, sencha-touch-2

我想要一个每行包含多列的列表。该行也可以包含图像。我能够从商店获取值。但无法以正确的方式显示它们。我需要如下视图：

![在此处输入图像描述](../Images/5a1f08490382e17aa458caab4605c316.png)

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:16:33.767

以下是我的做法。为列表创建一个视图，如下所示。不确定您是如何创建视图的，因此如果您仍然遇到问题，请添加额外的代码。

```
Ext.define('AppName.view.CustomList', {
  extend: 'Ext.List',
  xtype: 'customlist',
  config: {
    store: 'StoreName',
    itemTpl: Ext.create('Ext.XTemplate',
                '<div style="float:left; width: 50%">{Column1Name}</div>',
                '<div style="float:left; width: 50%">{Column2Name}</div>',
                '<div style="clear:both"></div>'
        )
  }
}); 
```

编辑：以下是您可以使用的布局的更新。它应该很近，你可能需要清除：另一个地方，我相信这可能更干净，但我只是给你一些可以使用的东西。

```
 itemTpl: Ext.create('Ext.XTemplate',
            '<div>',
              '<div style="float:left; width: 30%">{firstName}</div>',
              '<div style="float:left; width: 40%">{feedbackHeading}</div>',
              '<div style="float:left; width: 30%">{date}</div>',
            '</div>',
            '<div>',
              '<div style="float:left; width: 30%">{lastName}</div>',
              '<div style="float:left; width: 40%">{feedbackSummary}</div>',
              '<div style="float:left; width: 30%">{location}</div>',
            '</div>',
            '<div style="clear:both"></div>'
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:51:52.373

根据您的数据，尝试使用 div 结构意味着 div 内的 div。

# java - 如何使用 FTP 目录填充 JTree？

> ID：11401131
> 
> 赞同：1
> 
> 时间：2012-07-09T18:44:40.993
> 
> 标签：java, swing, jtree

我正在使用 FTP4j，我想用 FTP 服务器的根目录填充 JTree。我试过使用 FTP4j 的 currentDirectory() 方法，但它只返回一个没有用的“/”。我还尝试将 ftp:// url 传递给初始化 JTree 的方法，这也不起作用。这是我的第一个 Swing 程序，所以我有点不知道该去哪里。这是代码：

```
package net.emptybox.ui;

import java.awt.EventQueue;

import javax.swing.JFrame;
import net.miginfocom.swing.MigLayout;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JLabel;
import javax.swing.JTextField;
import java.awt.FlowLayout;
import java.awt.BorderLayout;
import javax.swing.BoxLayout;
import javax.swing.JSplitPane;
import javax.swing.JSeparator;
import javax.swing.JTree;
import javax.swing.JTextArea;
import java.awt.Component;
import java.io.File;

import net.emptybox.ui.FTP;

import javax.swing.Box;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.JScrollPane;
import javax.swing.ScrollPaneConstants;

public class GUI {

    static JFrame frame;
    static private JSplitPane splitPane;
    static private JLabel lblServer;
    static private JTextField serverField;
    static private JLabel lblPort;
    static private JTextField portField;
    static private JLabel lblUsername;
    static private JTextField usernameField;
    static private JLabel lblPassword;
    static private JTextField passwordField;
    static private JButton connectButton;
    static private JSeparator separator;
    static private JTextArea detailArea;
    static private JButton downloadButton;
    static private JButton uploadButton;
    static private Component horizontalGlue;
    static private JTextField fileField;
    static private JButton goButton;
    static private Component horizontalGlue_1;

    static FileSystemModel fileSystemModel;
    static JLabel consoleLabel;
    private static Component verticalGlue;
    private static JScrollPane scrollPane;
    static JTree fileTree;

    /**
     * Launch the application.
     */

    /**
     * Create the application.
     */
    public GUI() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    public static void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 648, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(new MigLayout("", "[grow]", "[][][][grow][]"));

        lblServer = new JLabel("Server:");
        frame.getContentPane().add(lblServer, "flowx,cell 0 0");

        consoleLabel = new JLabel("");
        frame.getContentPane().add(consoleLabel, "flowx,cell 0 1");

        separator = new JSeparator();
        frame.getContentPane().add(separator, "cell 0 2");

        splitPane = new JSplitPane();
        splitPane.setOneTouchExpandable(true);
        splitPane.setContinuousLayout(true);
        frame.getContentPane().add(splitPane, "cell 0 3,grow");

        detailArea = new JTextArea();
        detailArea.setEditable(false);
        splitPane.setRightComponent(detailArea);

        scrollPane = new JScrollPane();
        scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        splitPane.setLeftComponent(scrollPane);

        serverField = new JTextField();
        frame.getContentPane().add(serverField, "cell 0 0,growx");

        lblPort = new JLabel("Port:");
        frame.getContentPane().add(lblPort, "cell 0 0");

        portField = new JTextField();
        frame.getContentPane().add(portField, "cell 0 0,growx");

        lblUsername = new JLabel("Username:");
        frame.getContentPane().add(lblUsername, "cell 0 0");

        usernameField = new JTextField();
        frame.getContentPane().add(usernameField, "cell 0 0,growx");

        lblPassword = new JLabel("Password:");
        frame.getContentPane().add(lblPassword, "cell 0 0");

        passwordField = new JTextField();
        frame.getContentPane().add(passwordField, "cell 0 0,growx");

        connectButton = new JButton("Connect");
        frame.getContentPane().add(connectButton, "cell 0 0");

        if (serverField.getText() == null || usernameField.getText() == null || passwordField.getText() == null) {
            connectButton.disable();
        } else {
            connectButton.enable();
        }

        if (portField.getText() == null) {
            portField.setText("21");
        }

        connectButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                FTP.connect(serverField.getText(), portField.getText(), usernameField.getText(), passwordField.getText());
            }
        });

        downloadButton = new JButton("Download");
        frame.getContentPane().add(downloadButton, "flowx,cell 0 4");
        downloadButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });

        uploadButton = new JButton("Upload");
        frame.getContentPane().add(uploadButton, "cell 0 4");
        uploadButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });

        horizontalGlue_1 = Box.createHorizontalGlue();
        frame.getContentPane().add(horizontalGlue_1, "cell 0 4,growx");

        fileField = new JTextField();
        frame.getContentPane().add(fileField, "cell 0 4");
        fileField.setColumns(200);

        goButton = new JButton("Go");
        goButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });
        frame.getContentPane().add(goButton, "cell 0 4");

        horizontalGlue = Box.createHorizontalGlue();
        frame.getContentPane().add(horizontalGlue, "cell 0 4,alignx leading");

        verticalGlue = Box.createVerticalGlue();
        frame.getContentPane().add(verticalGlue, "cell 0 1");
    }

    private String getFileDetails(File file) {
        if (file == null)
          return "";
        StringBuffer buffer = new StringBuffer();
        buffer.append("Name: " + file.getName() + "\n");
        buffer.append("Path: " + file.getPath() + "\n");
        buffer.append("Size: " + file.length() + "\n");
        return buffer.toString();
      }

    public static void populateTree(String directory) {
        fileSystemModel = new FileSystemModel(new File(directory));

        fileTree = new JTree(fileSystemModel);
        scrollPane.setViewportView(fileTree);
    }
} 
```

当与服务器成功建立连接并且用户已登录时，填充树由另一个类调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:22:11.497

You're going to want to create your own TreeModel.

Once the user has connected successfully, you'll need to query the site for more information, there are no models available in the default implementation that will do what you want, you're going have to work for it ;)

Let's start with the FTP side.

```
String current = ftpSite.getCurrentDirectory(); // Just in case you want to come back
ftpSite.changeDirectort("/"); // Move to the root directory
FPTFile[] fileList = ftpSite.list(); // Get the list of files. 
```

Now, how you go about this comes down to you. But basically, I would construct a MutableTreeNode as the root node (for the JTree).

From there you can add new (MutableTreeNode) nodes to the root as you need.

You could check out [http://www.jroller.com/Thierry/entry/swing_lazy_loading_in_a](http://www.jroller.com/Thierry/entry/swing_lazy_loading_in_a) for some more ideas on how to achieve all this.

# css - GWT：为同一个 CSS 字段返回多个样式

> ID：11401133
> 
> 赞同：0
> 
> 时间：2012-07-09T18:44:50.143
> 
> 标签：css, gwt, styles, cssresource

在 CssResource 中，我可以从同一方法返回多个样式类名称吗？

[请原谅代码中的任何错误-我正在尝试根据记忆在家里重新创建]。我有以下库代码（我无法更改）：

```
void render(ClientBundle1 bundle) {
    setInnerHtml("<div class=\" + bundle.css().style() + \"/>");
} 
```

捆绑包是直截了当的：

```
interface ClientBundle1 extends ClientBundle {
    @Source("css1.css")
    CssResource1 css();
} 
```

和CSS资源：

```
interface CssResource1 extends CssResource {
    style1();
} 
```

和 css1.css：

```
.style1 {width=10; height=20} 
```

现在-我想_*部分*_用我自己的css（css2.css）的另一种样式（仅覆盖高度，而不是宽度）覆盖“style1”。但是，我的 css2.css 声明如下：

```
.style2 {height=30} 
```

所以我想用 css2.style2 （不同的类名）部分覆盖 css1.style1 。

如果这是普通的 HTML，我会写：

...导入 css1 然后 css2 ...

```
 <div class="style1 style2"/> 
```

但是，由于这是 GWT，我需要这样的东西：

```
interface ClientBundle2 extends ClientBundle1 {
    @Source("css1.css", "css2.css")
    CssResource2 css();
} 
```

和CSS资源：

```
interface CssResource2 extends CssResource1 {
    @Classname("style1", "style2")
    style();
} 
```

但当然，以上在 GWT 中是不可能的。

有没有一种方法可以为每个样式方法分配两个样式类名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:45:23.143

几个选项，其中没有一个正是您所要求的：

### 添加多个类：

就像您所说的那样，无论您在哪里应用该样式，都可以`<div class="style1 style2"/>`添加两种样式。如果在 UiBinder 中，请执行类似的操作`<g:Widget addStyleNames="{css.style1} {css.style2}" />`，如果在 Java 中，只需添加两个类：

```
widget.addStyleNames(css.style1() + " " + css.style2()); 
```

或者

```
widget.addStyleNames(css.style1());
widget.addStyleNames(css.style2()); 
```

### 仅覆盖该样式：

`style1`为什么不为or设置多个样式规则`style2`？几种方法，取决于你的追求：

css1.css：

```
.style1 {width:10px; height:20px} 
```

和 css2.css：

```
.style1 {height:30px} 
```

在这个 CssResource/ClientBundle 中使用：

```
interface CssResource2 extends CssResource1 {
    String style();
}
interface MyClientBundle extends ClientBundle {
    @Source({"css1.css", "css2.css}) 
    CssResource2 css();
} 
```

将导致（或多或少）这种风格：

```
.style1 {width:10px; height:30px} 
```

因为后来的具有相同权重的 CSS 规则会覆盖早期的规则。

或者，类似：

css1.css：

```
.style1, .style2 {width:10px; height:20px} 
```

css2.css：

```
.style2 {height:30px} 
```

将导致任何内容为 10x20 `style1`，而任何内容`style2`均为 10x30。注释可`@ClassName`用于`CssResource2`或多或少地忽略先前定义的样式。

# javascript - Javascript - 将字符串转换为 Int 返回 NaN 错误

> ID：11401134
> 
> 赞同：-1
> 
> 时间：2012-07-09T18:44:52.240
> 
> 标签：javascript, parseint

这是我的代码。它每次都会提醒（）的NaN。

```
function updateScore(action){
    var cookieArray = document.cookie.split(";");
    var encodedURL = cookieArray[2];
    var decodedURL = decodeURIComponent(encodedURL); 
    //check if cookie exists
    if (decodedURL == "undefined"){ 
        setCookie("rrcookie_score","0",1)
    }
    var oldScore = decodedURL.split('=');
    //alert(oldScore[1]);
    var oldScoreInt = parseInt(oldScore);
    var newScore = oldScoreInt + 1;
    alert(newScore);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:46:04.470

你有没有尝试过

```
var oldScoreInt = parseInt(oldScore[1]); 
```

肯定 parseInt(oldScore) 不会工作，因为 oldScore 是一个数组。此外，如果 URL 中有多个参数会发生什么，整个代码需要重新思考。

T。

# session - AWS Elastic Load Balancing 粘性会话的问题 - 子域由不同的服务器提供服务？

> ID：11401138
> 
> 赞同：1
> 
> 时间：2012-07-09T18:45:04.283
> 
> 标签：session, amazon-web-services, load-balancing, subdomain

我对负载平衡很陌生，我在让亚马逊的弹性负载平衡器与子域很好地配合时遇到了一些问题。

我的负载均衡器后面有两台 EC2 服务器。当我访问*mydomain.com*和*www.mydomain.com*时，这两个 url 由不同的 EC2 服务器提供。我需要从同一台服务器同时提供*www.mydomain.com*和*mydomain.com*，以便会话正常工作。

我将负载均衡器“粘性”设置为 LBCookieStickinessPolicy，如下所示：

![在此处输入图像描述](../Images/2396dad87f3f995fea1d38a335544e75.png)

我的两个 EC2 实例都在我的负载均衡器后面“服务中”：

![在此处输入图像描述](../Images/7366bf40677411904a6745dfd9170437.png)

我不知道它是否对故障排除有用，但我的 apache 配置如下所示：

![在此处输入图像描述](../Images/5be03d1d7f52619e438a340ea9e6dd42.png)

当我在 Firebug 中查看会话时，我看到以下内容......

对于 mydomain.com：

![在此处输入图像描述](../Images/b9d681fd325903063d2571e96554fc8e.png)

对于 www.mydomain.com（请注意附加的“www.”）

![在此处输入图像描述](../Images/22eaf5624ac224f45be5ea5b373fa225.png)

我不知道为什么，但在查看 www.mydomain.com 的 cookie 时实际上设置了两个 AWSELB cookie。

我正在使用 Zend 框架，我正在像这样设置我的 cookie_domain：

```
Zend_Session::start(array('cookie_domain' => '.mydomain.com')); 
```

在将站点移动到两个负载平衡的 EC2 服务器之前，这在过去运行良好。我们的站点使用了一些子域，例如 api.mydomain.com 和 my.mydomain.com，这使得 cookie_domain 很重要。而且，当然，这可能没问题。很有可能一旦我们让负载均衡器会话“粘”在子域之间正常工作，会话变量将按预期工作（希望如此！）。

任何想法为什么我们的网站在“www.”时从不同的服务器提供服务。是添加到域名吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-29T14:35:12.937

Cookies 由域设置，包括子域部分。[当您访问http://example.com](http://example.com)时无法读取 www.example.com cookie ，因此 ELB 设置了一个新 cookie。

为了解决这个问题，您可以将 Apache 设置为 301，将所有传入请求重定向到一个规范域。也就是说，要么所有[http://example.com/](http://example.com/) * 都被重定向到[http://www.example.com/](http://www.example.com/) *，反之亦然。然后，您只需处理规范域上的 cookie，您的会话粘性就会按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T10:17:40.293

请看下面的链接，然后你就明白了。[http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:15:25.643

管理会话的一种方法是利用共享会话存储。不要使用文件系统来存储会话数据（例如 PHP 的默认设置），而是设置 ElastiCache (memcached) 或 DB 之类的东西来处理会话数据的存储。然后你的应用程序就不会关心它在哪个服务器上，它有一个会话数据的中央存储可以从中提取。

关于这个概念的基础，我发现一篇有趣的文章在这里：[http ://shlomoswidler.com/2010/04/elastic-load-balancing-with-sticky-sessions.html](http://shlomoswidler.com/2010/04/elastic-load-balancing-with-sticky-sessions.html)

# .net - Visual Studio 不断向我的 csproj 添加属性。为什么？

> ID：11401141
> 
> 赞同：11
> 
> 时间：2012-07-09T18:45:18.510
> 
> 标签：.net, visual-studio, msbuild, visual-studio-2012, csproj

我正在使用 Visual Studio 2012 RC 来处理我的 C# 解决方案。我的所有特定于配置的设置都存储在一个 .props 文件中，然后我的所有 .csproj 文件都包含该文件。

然而 VS 坚持把它放在 include 前面：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'">
   <IntermediateOutputPath>C:\Users\xyz\AppData\Local\Temp\vs855E.tmp\Debug\</IntermediateOutputPath>
</PropertyGroup>
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Release|AnyCPU'">
   <IntermediateOutputPath>C:\Users\xyz\AppData\Local\Temp\vs855E.tmp\Release\</IntermediateOutputPath>
</PropertyGroup>

<Import Project="$(MSBuildProjectDirectory)\..\Common.props" /> 
```

这是为什么？

仅供参考，我的常用文件如下所示： http: [//pastebin.com/Uued1XY0](http://pastebin.com/Uued1XY0)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-29T18:37:01.787

当 MSBuild 的路径错误时，可以插入这些 IntermediateOutputPath。

在我们的例子中，我们在输出文件夹的 SolutionDir 之后有额外的不必要的斜线。

什么对我们不起作用（注意额外的斜线）：

```
<OutputPath>$(SolutionDir)\out\bin\</OutputPath>
<IntermediateOutputPath>$(SolutionDir)\out\obj\</IntermediateOutputPath> 
```

什么工作：

```
<OutputPath>$(SolutionDir)out\bin</OutputPath>
<IntermediateOutputPath>$(SolutionDir)out\obj</IntermediateOutputPath> 
```

为了帮助解决您的特定情况，请尝试打开诊断 MSBuild 输出并在 Tools->Options->Projects and Solutions->Build and Run->MSBuild project build output verbosity 下进行日志记录。然后，搜索生成的文件夹（例如“Temp”）。

使用通用的 proj/props/targets 文件是一个好主意，但它确实需要与 Visual Studio 稍作斗争。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:45:17.160

您已在项目中指定。属性文件将具有 BaseIntermediateOutputPath。如果您未在其中指定任何值，它将从您的 Base 派生。

如果未指定路径，则从 BaseIntermediateOutputPath 派生的完整中间输出路径。例如，\obj\debug。如果覆盖此属性，则设置 BaseIntermediateOutputPath 无效。

参考：http: [//msdn.microsoft.com/en-us/library/bb629394.aspx](http://msdn.microsoft.com/en-us/library/bb629394.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:45:18.820

因此，如果需要，您可以覆盖这些设置。如果您之前进行了导入，则 Visual Studio 的属性将优先。在 MSBuild 中，最后一个定义获胜并被使用。这是一件好事。它会导致错误吗？或者你只是不喜欢它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T11:14:18.403

如果在加载过程中插入 XML，我怀疑它与 NuGet 相关（假设您使用的是 NuGet）。如果您使用 Directory.Build.props 文件，您可以获得在 .props 文件中设置的 BaseIntermediateOuputPath。阅读这篇 stackoverflow 文章，了解有关搜索顺序及其工作原理的一些重要信息。

[.csproj 文件中自动生成的 IntermediateOutputPath](https://stackoverflow.com/questions/42711214/autogenerated-intermediateoutputpath-in-the-csproj-file)

在项目文件中设置 BaseIntermediateOutputPath 不会重定向 NuGet，因为它的值是在 MSBuild 包含设置 BaseIintermediateOutputPath 的 Sdk.props 之后设置的。这个问题有两种解决方案。设置 Base... 值后，使用 Directory.Build.props 或在项目中导入 SDK。我没有在您的 .csproj 文件中的适当位置尝试过这种方法。）。

这是一个自定义构建的链接，它引用了其中一些技术：

[https://docs.microsoft.com/en-us/visualstudio/msbuild/customize-your-build?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/msbuild/customize-your-build?view=vs-2019)

# python - Python 套接字错误 - recv() 函数

> ID：11401143
> 
> 赞同：2
> 
> 时间：2012-07-09T18:45:27.747
> 
> 标签：python, sockets, python-2.7, recv, python-sockets

我一直在尝试用 Python 编写一个简单的聊天服务器，我的代码如下：

```
import socket
import select

port = 11222
serverSocket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
serverSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1024)
serverSocket.bind(('',port))
serverSocket.listen(5)

sockets=[serverSocket]
print 'Server is started on port' , port,'\n'

def acceptConn():
    newsock, addr = serverSocket.accept()
    sockets.append(newsock)
    newsock.send('You are now connected to the chat server\n')
    msg = 'Client joined',addr.__str__(),
    broadcast(msg, newsock)

def broadcast(msg, sourceSocket):
    for s in sockets:
        if (s != serverSocket and s != sourceSocket):
            s.send(msg)
    print msg,

while True:
    (sread, swrite, sexec)=select.select(sockets,[],[])
    for s in sread:
        if s == serverSocket:
            acceptConn()
        else:
            msg=s.recv(100) 
            if msg.rstrip() == "quit":
                host,port=socket.getpeername()
                msg = 'Client left' , (host,port)
                broadcast(msg,s)
                s.close()
                sockets.remove(s)
                del s
            else:
                host,port=s.getpeername()
                msg = s.recv(1024)
                broadcast(msg,s)
                continue 
```

运行服务器并通过 telnet 连接后，服务器读取单个字符并跳过下一个字符。例如，如果我在 telnet 中键入 Hello，服务器读取 H l o。请问有什么帮助吗？！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:58:56.273

你打电话给 recv 两次。

第一的：

```
msg=s.recv(100) 
```

然后，如果那不是“退出”，您阅读并广播另一条消息：

```
msg = s.recv(1024)
broadcast(msg,s) 
```

所以原始消息丢失了。

因为您使用 telnet 作为客户端，所以您一次获得一个字符，因此您可以看到其他所有字符。如果你使用 nc 代替，你会得到不同的结果——但仍然是每个其他读取都被丢弃的基本问题。

这里还有一些其他问题：

*   您希望客户端在退出之前发送“退出”-您应该处理来自 recv 的 EOF 或错误和/或在 x 和 r 中传递套接字。
*   您假设“退出”将始终出现在单个消息中，并且整个消息都出现在其自身中。这不是 TCP 的合理假设。你可能会读到四个 1 字节的“q”、“u”、“i”和“t”，或者你可能会读到“OK，bye everyone\nquit\n”的大读，两者都不匹配.
*   “客户离开”和“客户加入”消息是元组，而不是字符串，它们的形成方式不同，所以你会看到 ('Client joined', "('127.0.0.1', 56564)") ( '客户离开', ('127.0.0.1', 56564))。
*   您依赖客户端在他们的消息之间发送换行符。首先，如上所述，即使他们这样做了，也不能保证您会收到完整/离散的消息。其次，您的“系统”消息没有换行符。

这是您的示例的修改版本，它修复了大多数问题，除了要求“退出”单独出现在一条消息中并依赖客户端发送换行符：

```
#!/usr/bin/python

import socket
import select
import sys

port = 11222
serverSocket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
serverSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1024)
serverSocket.bind(('',port))
serverSocket.listen(5)

sockets=[serverSocket]
print 'Server is started on port' , port,'\n'

def acceptConn():
    newsock, addr = serverSocket.accept()
    sockets.append(newsock)
    newsock.send('You are now connected to the chat server\n')
    msg = 'Client joined: %s:%d\n' % addr
    broadcast(msg, newsock)

def broadcast(msg, sourceSocket):
    for s in sockets:
        if (s != serverSocket and s != sourceSocket):
            s.send(msg)
    sys.stdout.write(msg)
    sys.stdout.flush()

while True:
    (sread, swrite, sexec)=select.select(sockets,[],[])
    for s in sread:
        if s == serverSocket:
            acceptConn()
        else:
            msg=s.recv(100)
            if not msg or msg.rstrip() == "quit":
                host,port=s.getpeername()
                msg = 'Client left: %s:%d\n' % (host,port)
                broadcast(msg,s)
                s.close()
                sockets.remove(s)
                del s
            else:
                host,port=s.getpeername()
                broadcast(msg,s)
                continue 
```

要解决“退出”问题，您必须为每个客户端保留一个缓冲区，并执行以下操作：

```
buffers[s] += msg
if '\nquit\n' in buffers[s]:
   # do quit stuff
lines = buffers[s].split('\n')[-1]
buffers[s] = ('\n' if len(lines) > 1 else '') + lines[-1] 
```

但是您仍然遇到换行问题。假设 user1 登录并输入“abc\n”，而 user2 登录并输入“def\n”；您可能会得到类似“abClient 加入：127.0.0.1:56881\ndec\nf\n”的信息。

If you want a line-based protocol, you have to rewrite your code to do the echoing on a line-by-line instead of read-by-read basis.

# python - numpy 数组迭代以跟踪迄今为止的最大数量

> ID：11401146
> 
> 赞同：1
> 
> 时间：2012-07-09T18:45:41.867
> 
> 标签：python, numpy

是否有一种简单的方法可以遍历二维数组以存储迄今为止在沿特定维度遍历时获得的最大值。例如，我有一个数组：

```
[[2 ,  1,  5],
[-1, -1,  4],
[4, 3,  2],
[2 , 3, 4]] 
```

我想要以下输出：

```
[[2 ,  2,  5],
[-1, -1,  4],
[4, 4,  4],
[2 , 3, 4]] 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:46:02.040

简单的; 使用[`accumulate`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.accumulate.html)：

```
>>> numpy.maximum.accumulate(a, axis=1)
array([[ 2,  2,  5],
       [-1, -1,  4],
       [ 4,  4,  4],
       [ 2,  3,  4]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:52:38.143

如果计算时间不是问题，您可以执行以下操作：

```
my_new_array = [ [max(my_array[i][:j+1]) for j in range(len(my_array[i]))] for i in range(len(my_array))] 
```

然而，它确实不是计算时间有效的。做2个循环可能会更有效率。

# signal-processing - 零填充 fft

> ID：11401151
> 
> 赞同：1
> 
> 时间：2012-07-09T18:46:05.167
> 
> 标签：signal-processing, fft

我有一个大小为 786*786 的图像，我想将其补零以使其成为 1024*1024，以便我可以使用我的基数 2 算法。在输入端，我基本上会在末尾添加零，以便长度为 1024*1024，而我的 fft 将产生 1024*1024 输出，我的问题是如何检索正确的 786*786 输出？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:53:17.030

即使您对输入进行了零填充，FFT 的输出仍然是*正确的。*不同之处在于输出已在频域中插值，因此您具有更*明显*的分辨率（尽管当然没有神奇地获得更多信息 - 由于插值，您只是看到了额外的点）。如果您执行逆 FFT，您将回到原来的零填充输入。

# git - GIT：如何保护分支不被其他开发者移除？

> ID：11401155
> 
> 赞同：14
> 
> 时间：2012-07-09T18:46:17.557
> 
> 标签：git, github, branch, git-branch, gitlab

在我们的产品首次发布后，我们将切换到不同的分支进行主要开发和功能开发。有没有办法以这种方式创建分支，以便我们可以保护它不被删除（意外或故意），除非您是特定用户（基于角色或用户名）？

我试图在我们的本地 gitlab 机器上创建一个示例 git 存储库，然后保护其中一个分支免受网站上的选项的影响，但后来我能够使用`git push origin :branch_name`. 提前致谢！

该解决方案可以在 github.com 上运行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T18:57:40.277

有很多方法可以解决这个问题：

1.  制作另一个沙盒存储库，并授予对主存储库的只读访问权限。如果他们意外删除，他们可以从主仓库获取分支。这假设您仅将 github 用于您的存储库，而不是本地开发存储库。
2.  在存储库中设置挂钩，除非您是特定用户，否则不允许删除分支。你不能在 github 上这样做，因为他们不允许在他们的服务器上执行任意代码。如果你得到一个本地仓库，你可以这样做。
3.  设置本地 gitolite 安装以管理具有权限的分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T02:44:45.650

你可以在服务器上使用分支权限，方法是添加一个 pre-receive 挂钩来保护你的存储库，并将类似这样的内容添加到裸存储库中的配置文件中：

```
[hooks]
        allowedtomerge = user1,user2,user3
        protectedbranches = master 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-03T19:36:31.193

由于[评论](https://stackoverflow.com/questions/11401155/git-how-to-protect-the-branch-from-being-removed-by-other-developers#comment15033483_11401323)中提到的[OP sheshams](https://stackoverflow.com/users/928001/shershams)

> 我们计划切换到 github，我想知道他们是否为此目的实现了一些东西

事实证明，在 GitHub 中实现了一些东西（并且很快就会提供）：

[受保护的分支和所需的状态检查](https://github.com/blog/2051-protected-branches-and-required-status-checks)（2015 年 9 月 3 日）将允许您保护分支：

*   反对强推
*   **反对删除**
*   反对合并的更改，直到所需的状态检查通过

[![https://cloud.githubusercontent.com/assets/25792/9596474/27db3ce6-502a-11e5-9b19-5b47a8addc65.png](../Images/5e177f46103967fddf488d710c5e47b2.png)](https://i.stack.imgur.com/LBlbk.png)

请注意，[自 2019 年 12 月 4](https://github.blog/changelog/2019-12-04-expanded-branch-protection-rules/)日起，您可以通过启用`Allow deletions`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-02T17:01:41.533

我有一个 git 分支模型，它具有用于分阶段部署的 dev/master/production 分支，因此我希望保护某些分支不被删除。我使用拉取请求和 Visual Studio 团队服务，因此例如在从 dev 到 master 的每个拉取请求之后，VSTS 会询问我是否要删除源分支 (dev)。

我担心开发人员不小心删除了 dev 或另一个用于部署的重要分支，所以我使用了这个 hack：

我创建了一个名为“save”的 dev 分支，进行了一行更改，打开了一个针对 dev 的拉取请求，然后将其保持打开状态。

只要有针对 dev 的公开拉取请求，就无法删除 dev，VSTS 也不会询问我是否要删除分支。

如果这个问题还有其他更官方的解决方案，我很乐意使用它。但就目前而言，这很容易并且有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-09T13:40:03.930

如果您使用的是[Gitlab](https://about.gitlab.com/)，那么您可以[配置受保护的分支](https://docs.gitlab.com/ee/user/project/protected_branches.html#configuring-protected-branches)：

> ## 配置受保护的分支
> 
> 要保护分支，您至少需要拥有 Master 权限级别。请注意，master 分支默认受保护。
> 
> 1.  导航到项目的设置➔存储库
>     
>     
> 2.  滚动找到受保护的分支部分。
>     
>     
> 
> [...]

# c# - 在泛型的情况下使 JSON 反序列化工作？

> ID：11401159
> 
> 赞同：3
> 
> 时间：2012-07-09T18:46:32.110
> 
> 标签：c#, json, json.net

我有以下内容：

```
public class BaseEntity<T> where T: class
{
    public OperationStatus OperationStatus { set; get; }
    public List<T> List { set; get; }

    protected internal BaseEntity()
    {
        if (OperationStatus == null)
        {
            OperationStatus = new OperationStatus();
            OperationStatus.IsSuccess = true;
        }

        this.List = new List<T>();
    }

    internal BaseEntity(IEnumerable<T> list)
    {
        if (OperationStatus == null)
        {
            OperationStatus = new OperationStatus();
            OperationStatus.IsSuccess = true;
        }

        this.List = new List<T>();
        foreach (T k in list)
        {
            this.List.Add(k);
        }
    }

}

public class KeyValuePair
{
    public string key;
    public string value;
}

public class KeyValuePairList : BaseEntity<KeyValuePair>
{
    public KeyValuePairList() { }
    public KeyValuePairList(IEnumerable<KeyValuePair> list)
        : base(list) { }
}

// Multiple other classes like KeyValuePair but all have the
// same behavior so they have been derived from BaseEntity 
```

现在在我的代码中，我正在尝试将 JSON 字符串映射到`KeyValuePair`列表的实例，我目前正在执行以下操作：

```
result = 
@"{
    \"d\": {
        \"OperationStatus\": {
            \"IsSuccess\": true,
            \"ErrorMessage\": null,
            \"ErrorCode\": null,
            \"InnerException\": null
        },
        \"List\": [{
            \"key\": \"Key1\",
            "\value\": \"Value1\"
        }, {
            \"key\": \"Key2\",
            \"value\": \"Value2\"
        }]
    }
}" 
```

**尝试#1**

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
KeyValuePairList output = serializer.Deserialize<KeyValuePairList>(result); 
```

但是，这不起作用，因为`KeyValuePairList`没有使用任何参数调用的构造函数。如果我删除该构造函数，JSON 序列化将失败并出现错误`No parameterless constructor found`。我如何知道在其调用中`KeyValuePairList`用作`KeyValuePair`模板？或者也许我该如何为此目的调整 JSON 序列化程序？

**尝试#2**

我也试过`JSON.net`了，如下：

```
var oo = JsonConvert.DeserializeObject<KeyValuePairList>(result); 
```

关于如何使这项工作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:06:48.517

实际上，解决方案比我想象的要简单。问题是服务器正在返回带有根节点的 JSON 字符串`d`。因此，反序列化失败，因为它不知道如何处理根节点`d`。这可以解决如下：

**第 1 步：**添加一个额外的 JSONWrapper 类来包装传入的 JSON 字符串：

```
public class JSONWrapper<T> where T:class
{
    public T d {set; get;}
} 
```

**第 2 步：**使用这个新类来反序列化

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
var oo = serializer.Deserialize<JsonWrapper<KeyValuePairList>>(result); 
```

更符合我的整个逻辑，因此我不必进行任何重大更改。感谢所有帮助我度过宝贵时间的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:20:48.043

尝试`T[]`代替`List<T>`

你应该有两个属性，

```
public T[] Items{
    get{
        return ItemList.ToArray();
    }
    set{
        ItemList.Clear();
        ItemList.AddRange(value);
    }
}

[ScriptIgnore]
public List<T> ItemList {get;set;} 
```

作为数组的项目将在 JSON 中序列化，您可以使用 ItemList 进行其他操作。

# android - 在不创建自定义列表视图类的情况下为列表视图设置 dispatchTouchEvent。（用于禁用滚动）

> ID：11401164
> 
> 赞同：1
> 
> 时间：2012-07-09T18:46:56.717
> 
> 标签：android, list, listview, android-layout, android-listview

我基本上是在尝试禁用列表视图上的滚动。这可以通过

```
@Override
    public boolean dispatchTouchEvent(MotionEvent ev){
       if(ev.getAction()==MotionEvent.ACTION_MOVE){
            ev.setAction(MotionEvent.ACTION_CANCEL);
       }

       super.dispatchTouchEvent(ev);
       return true;
    } 
```

**但我不想为此创建一个自定义列表视图（小部件）类。**

有什么办法可以做到吗`myListView.dispatchTouchEvent(ev)`？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:31:13.397

试试这个：

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
   return true;
} 
```

# c++ - 使用 static_cast 投射 POD 对象

> ID：11401170
> 
> 赞同：-1
> 
> 时间：2012-07-09T18:47:14.143
> 
> 标签：c++, casting

这就是我的意思

```
class V3
{
public:
float x,y,z;
};

class V3_
{
 public:
float x,y,z;
};

V3_ vec1;
V3 vec2 = static_cast<V3_>(vec1); 
```

我应该怎么做才能使这个演员在编译时工作？

谢谢。

编辑：

似乎对我想要做什么有一些误解。我可以为转换编写一个运算符，但我希望它在编译时完成。

这里有两个允许 static_cast 的 Vector3 实现。我不知道它是如何工作的，但它确实有效。

[http://www.ogre3d.org/docs/api/html/OgreVector3_8h_source.html](http://www.ogre3d.org/docs/api/html/OgreVector3_8h_source.html)

[http://harry-3d-engine.googlecode.com/svn/trunk/NxOgreVec3.h](http://harry-3d-engine.googlecode.com/svn/trunk/NxOgreVec3.h)

我可以做这个演员

```
 void DynamicBody::SetLinearMomentum(const Vector3& vel)
 {
body->setLinearMomentum(static_cast<NxOgre::Vec3>(vel));
 } 
```

我想解释一下我该如何做到这一点。

**编辑：**

经过进一步调查，我发现它实际上是如何做到的，它调用

```
template<class user_xyz_vector_type>
inline user_xyz_vector_type as() const { ... } 
```

这不是一个实际的 static_cast，但编译器接受它作为一个。我真的希望互相投豆荚是一件真实的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:49:45.683

这个演员表在任何时候都不会起作用。您不能`static_cast`完全不相关且不可相互转换的类型。

我不确定你要做什么，所以我不知道在这种情况下工作“工作”是什么意思，但在原始内存级别，转换可以通过`reinterpret_cast`

```
V3 vec2 = reinterpret_cast<V3_&>(vec1); 
```

但这是一个丑陋的 hack，不能保证有效，因为您的类型再次无关。以相同程度（甚至更好）的成功，您可以简单地将`memcpy`一个对象变成另一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:53:24.013

这些类型是不相关的，因此您需要`reinterpret_cast`：

```
V3_ vec1;
V3 vec2 = reinterpret_cast<V3_&>(vec1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:51:08.237

您可以完全避免使用 cast 作为：

```
V3 vec2 = {vec1.x, vec1.y, vec1.z}; 
```

或者写转换函数：

```
V3 to_V3(V3_ const & v)
{
   V3 v3 = {v.x, v.y, v.z};
   return v3;
} 
```

并将其用作：

```
V3 vec2 = to_V3(vec1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:57:21.917

`static_cast` `V3`用于`V3_`类声明 `public:`。_ . 这样您就可以转换对象。如果您想要多态性并且知道自己在做什么，请使用虚拟解构器。`V3``class V3 : public V3_`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T18:50:47.233

```
V3_ vec1;
V3 vec2 = *(V3*)&vec1; 
```

编辑：仍然，你知道这可能不是一件好事吗？

# java - 复制构造函数是否需要复制互斥体？

> ID：11401173
> 
> 赞同：0
> 
> 时间：2012-07-09T18:47:22.007
> 
> 标签：java, mutex, copy-constructor

例如，

```
public Foo{
    private Object mutex = new Object();
    private int bar;

    public Foo(Foo f){
        this.mutex = f.getMutex();
        this.bar = f.getBar();
    }

    public Object getMutex(){
        return mutex;
    }

    public void setBar(int bar){
        synchronized(mutex){
            this.bar = bar;
        }
    }

    public int getBar(){
        synchronized(mutex){
            return bar;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:50:08.787

这取决于 - 您*希望*这两个对象共享一个互斥锁（实际上是一个浅拷贝）还是希望它们独立？在大多数情况下，我希望是后者，在这种情况下，您*不想*复制参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:51:15.560

在这种情况下，应该执行以下所有操作：

1.  制作互斥锁`final`
2.  不复制互斥锁
3.  在复制期间锁定原始实例的互斥锁。

# c# - 全屏应用程序选项（隐藏应用程序标题栏）

> ID：11401174
> 
> 赞同：3
> 
> 时间：2012-07-09T18:47:28.943
> 
> 标签：c#, winforms, titlebar

你好我想知道是否有办法让我的应用程序运行，没有标题栏，基本上最大化，以便在屏幕上只看到正文。我确定我可以使用诸如`menuStrip`打开`mouseOver`或类似的显示/隐藏选项之类的东西，但对于标题栏，我不确定。如果有一种方法可以显示/隐藏它，`mouseOver`有人可以提供一个例子吗？这是针对 WinForms 应用程序的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:51:12.583

在 WinForms 中，您只需设置`FormBorderStyle = FormBorderStyle.None;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:02:19.217

If you want something easy you should work on a panel instead of work directly on the form and set the panel's dock to fill. So:

```
//...
panel.Dock = DockStyle.Fill;

//some stuff here

Controls.Add(panel); 
```

Then when you want to see the full screen application, maximize the form and hide the titlebar like here:

```
WindowState = FormWindowState.Maximized;
FormBorderStyle = FormBorderStyle.None; 
```

# asp.net - 如何将数据列绑定到文本框？

> ID：11401180
> 
> 赞同：1
> 
> 时间：2012-07-09T18:48:13.333
> 
> 标签：asp.net, data-binding, binding

我在表单上有 datagridview 和文本框。当用户单击任何一个单选按钮时，我会从不同的表中加载记录。网格中的数据显示完美。我想在这些文本框中显示行的值。

一种解决方案可以是：从数据集中绑定数据。第二个可以是：将行的每个单元格的值传输到相应的文本框。

请帮我。并且，请告诉我哪个更好，或者有没有比这两个更好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:42:02.943

```
Try using a BindingSource

BindingSource bindingSource = new BindingSource();
DataSet dataSet = new DataSet();
DataAdapter da1 = new DataAdapter("Select * from Customers", conn1);
DataAdapter da2 = new DataAdapter("Select * form Orders", conn1);

da1.Fill(dataSet,"Customers");
da2.Fill(dataSet,"Orders");

//Let we set Customers table as bindiningSource datasource
bindingSource.DataSource = dataSet.Tables["Customers"];

private void RadioButtonCustomers_CheckedChanged(object sender, EventArgs e)
{
     if(radioButtonCustomers.Checked==true)
        bindingSource.DataSource =dataSet.Tables["Customers"];
}
private void RadioButtonOrders_CheckedChanged(object sender, EventArgs e)
{
     if(radioButtonOrders.Checked==true)
        bindingSource.DataSource = dataSet.Tables["Orders"];
}
//First param of Binding is to which prop of TextBox to bind the value
//Second param is the data source
//Third param is the data member or the column name of the table as datasource, so
//we have to get that table from casting the bindingSource datasource prop and casting it
//to DataTable obj and after that to take the ColumnName prop of the desired column

textBox1.DataBindings.Add(new Binding("Text",bindingSource,((DataTable)bindingSource.DataSource).Columns[0].ColumnName));
textBox2.DataBindings.Add(new Binding("Text",bindingSource,((DataTable)bindingSource.DataSource).Columns[1].ColumnName));
etc... 
```

即使您更改了 bindingSource 的数据源属性，文本框仍将绑定到第一列和第二列的行值

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:13:09.640

我尝试了许多选项来在同一表单的文本框中显示值，但它不起作用，因为 datagridview 可以显示两个不同表的记录。

相反，我使用了 datagridview 的以下事件：

```
 private void dataGridView1_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        this.dataGridView1.SelectionChanged += new System.EventHandler(this.DisplayValueinTextBox);
    } 
```

在 DisplayValueinTextBox 中，我根据每个表显示的列数编写了以下代码：

```
 private void DisplayValueinTextBox(object sender, EventArgs e)
    {
        try
        {
            textBox1.Text = dataGridView1.SelectedCells[0].Value.ToString();
            textBox2.Text = dataGridView1.SelectedCells[1].Value.ToString();
            textBox3.Text = dataGridView1.SelectedCells[2].Value.ToString();

            if (tblGrid == "Employee") //name of table which has more columns in grid
            {
                textBox4.Text = dataGridView1.SelectedCells[3].Value.ToString();
                textBox5.Text = dataGridView1.SelectedCells[4].Value.ToString();
                textBox6.Text = dataGridView1.SelectedCells[5].Value.ToString();
            }
            this.dataGridView1.SelectionChanged -= new System.EventHandler(this.DisplayValueinTextBox); //removed it as I was getting error.
        }
        catch (Exception exdisp)
        {
            MessageBox.Show(exdisp.Message);
        }
    } 
```

我还将 dataGridView 的 SelectionMode 属性更改为 FullRowSelect。这将确保 textbox1 显示 SelectedCells[0] 的值，即使用户单击任何单元格也是如此。

我仍然希望有更好的选择，所以我等待对此的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:39:13.320

先生，我用 2 个单选按钮、2 个文本框和 datagridview 制作了一个简单的 WindowsForm，这里是 sln 文件[http://www13.zippyshare.com/v/98590888/file.html](http://www13.zippyshare.com/v/98590888/file.html)，这必须对您有所帮助。

# android - GCM - 不清楚应用程序更新的工作原理？

> ID：11401182
> 
> 赞同：1
> 
> 时间：2012-07-09T18:48:21.320
> 
> 标签：android, google-cloud-messaging

我正在查看 GCM，我不确定在应用程序更新的情况下我们需要做什么。医生说：

“当应用程序更新时，它应该使其现有的注册 ID 失效，因为它不能保证与新版本一起使用。因为在应用程序更新时没有调用生命周期方法，所以实现此验证的最佳方法是存储存储注册ID时的当前应用程序版本。然后在启动应用程序时，将存储的值与当前应用程序版本进行比较。如果不匹配，则使存储的数据无效并重新开始注册过程。

那应该是什么样子？就像是：

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(...) {
        if (we are a new app version) {
            // calling register() force-starts the process of getting a new 
            // gcm token?
            GCMRegistrar.register(context, SENDER_ID);

            saveLastVersionUpdateCodeToDisk();
        }
    } 
```

所以我们只需要确保我们自己再次调用 GCMRegistrar.register() 以防我们是新的应用程序版本？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:17:05.260

这个问题相当古老，但这是我`GCMRegistrar.getRegistrationId(Context context)`在帮助类源代码中找到的代码。

简短回答：GCM 代码检查应用程序是否已更新。只要你调用这个方法，如果这个方法的返回值为空的话，调用GCM注册就可以了。

```
public static String getRegistrationId(Context context) {
    final SharedPreferences prefs = getGCMPreferences(context);
    String registrationId = prefs.getString(PROPERTY_REG_ID, "");
    // check if app was updated; if so, it must clear registration id to
    // avoid a race condition if GCM sends a message
    int oldVersion = prefs.getInt(PROPERTY_APP_VERSION, Integer.MIN_VALUE);
    int newVersion = getAppVersion(context);
    if (oldVersion != Integer.MIN_VALUE && oldVersion != newVersion) {
        Log.v(TAG, "App version changed from " + oldVersion + " to " +
                newVersion + "; resetting registration id");
        clearRegistrationId(context);
        registrationId = "";
    }
    return registrationId;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:08:40.583

是的，您应该再次调用 GCMRegistrar.register 并在您的广播接收器中确保使用新 ID 更新您的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T17:26:49.347

关于官方文档的例子，应该检查当前应用版本是否创建了注册ID。如果应用程序使用旧版本注册，则必须重新注册。

[http://developer.android.com/google/gcm/client.html](http://developer.android.com/google/gcm/client.html)

请注意，如果应用程序更新，则注册 ID 将返回为空，因此应用程序将再次注册：

```
if (checkPlayServices()) {
    gcm = GoogleCloudMessaging.getInstance(this);
    regid = getRegistrationId(context);

    if (regid.isEmpty()) {
        registerInBackground();
    }
} else {
    Log.i(TAG, "No valid Google Play Services APK found.");
}

private String getRegistrationId(Context context) {
    final SharedPreferences prefs = getGCMPreferences(context);
    String registrationId = prefs.getString(PROPERTY_REG_ID, "");
    if (registrationId.isEmpty()) {
        Log.i(TAG, "Registration not found.");
        return "";
    }
    // Check if app was updated; if so, it must clear the registration ID
    // since the existing regID is not guaranteed to work with the new
    // app version.
    int registeredVersion = prefs.getInt(PROPERTY_APP_VERSION, Integer.MIN_VALUE);
    int currentVersion = getAppVersion(context);
    if (registeredVersion != currentVersion) {
        Log.i(TAG, "App version changed.");
        return "";
    }
    return registrationId;
} 
```

# java - 如何仅通过一个方法调用重置所有对象值？

> ID：11401183
> 
> 赞同：5
> 
> 时间：2012-07-09T18:48:26.930
> 
> 标签：java

基本上，我想创建 Counter 对象，它们所要做的就是保存数字值。在我的 resetCounters 方法中，我想重置每个对象的值。这可能很容易，但我是新手。

```
public class Counter
{
    Random number = new Random();

    Counter()
    {
        Random number = new Random();
    }

    public Random getNumber()
    {
        return number;
    }

    public void setNumber(Random number)
    {
        this.number = number;
    }

    public static void main(String[] args) 
    {
        Counter counter1 = new Counter();
        Counter counter2 = new Counter();
        Counter counter3 = new Counter();
        Counter counter4 = new Counter();
        Counter counter5 = new Counter();

    }

    public static void resetCounters()
    {

    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:54:57.900

## 第一个选项：记住`Counter`.

`Counter`收集某个静态集合中的每个实例。要全部重置，只需遍历集合中的所有项目。但是[强引用对于这个来说太强了](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references?force=530)——确保它是[弱引用](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html)的集合。

评论：

1.  使用弱引用将避免`Counter`对象仅因为它们在静态集合中的引用而无限期存在的问题。仅由弱引用引用的对象最终由垃圾收集器收集。
2.  可以通过声明`Counter`构造函数`private`并仅允许通过`static`也将进行注册的成员函数进行构造来实现每个实例的集合。[（或者使用工厂](http://en.wikipedia.org/wiki/Factory)模式的其他化身。）我相信工厂是通往这里的路，因为每个对象的构造都必须执行一个副作用。但也许它可以让`Counter`构造函数注册`this`到静态集合。

## 第二种选择：生成计数器

保留一个`static`类型的生成计数器`long`，并在每个实例中保留此计数器的副本。重置所有计数器时，只需增加`static`生成计数器。然后，该`getNumber()`方法将`static`对照它自己的副本检查生成计数器，如果`static`生成计数器已更改，则重置计数器。

（我真的不知道这个技巧的“官方”名称。 [如何在 O(1) 中将数组归零？](https://stackoverflow.com/questions/10797284/how-to-zero-out-array-in-o1)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T19:09:56.947

由于我们不知道上下文是什么，因此我们无法缩小您应该做的具体事情的范围，但我立即想到的选项是......

1：如果计数器除了“counter1，counter2，counter3”之外还有不同的含义，那么它们可能是静态类变量（具有[更有用的名称](http://thecodelesscode.com/case/34)）。

```
 public class Counter {
       static Counter counter1 = new Counter();
       ...
       public void resetCounters() {
         counter1.clear();
         counter2.clear();
          ...
        }
      } 
```

2：如果你只想要几个不同的计数器，它们本身没有特别的意义，*而且*你知道它们永远只有五个，那么你应该使用一个数组：

```
public class Counter {
  public static void main(String[] args) {
    Counter[] counters = {new Counter(), new Counter(), new Counter(), new Counter(), new Counter()};
    ...
  }
  static void resetCounters(Counter[] counters) {
    for (Counter c : counters) {
      c.reset();
    }
  }
} 
```

或者，如果您打算拥有任意数量的它们，您可以尝试其中一种更高级的工厂模式。这真的取决于上下文是什么，你实际上想要做什么，以及练习的目的是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T18:52:29.427

由于您正在处理大量对象，因此您最好将它们放在某种集合中，例如 ArrayList。

```
List<Counter> counters = new ArrayList<Counter>(); 
```

`.add()`使用该方法将所有计数器插入其中。然后，您可以通过以下方式编写您的`resetCounters()`方法：

```
public static void resetCounters(List<Counter> counters) {
    for(Counter c: counters) {
        // perform some action to reset the counters, as described by you
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T18:57:08.563

**1.**首先不需要将随机数初始化为实例变量，只需有一个对象引用变量，因为您已经在构造函数中对其进行了初始化。

例如：

```
Random number; 
```

**2.**创建一个 ArrayList 并存储所有 Counter 对象。

```
ArrayList<Counter> arr = new ArrayList<Counter>(); 
```

**3.**将每个计数器对象添加到 ArrayList。

**4.**使复位功能非静态..不需要它是静态的。

**5.**迭代和重置...

```
for (Counter c : arr){

      c.reset();
    } 
```

**6.**在 reset() 中执行以下操作..

```
public void reset(){

         this.number = 0;

     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T18:52:18.327

实现您想要的最简单和优雅的方法是在某处保留对所有已创建对象的引用，例如在工厂中，并在需要时重置它们。

```
public class CounterFactory{
      private List<Counter> counters = new ArrayList<Counter>();

      public Counter createCounter(){
          Counter c = new Counter();
          counters.add(c);
          return c;
      }
      public void resetCounters(){
          for(Counter c : counters) c.setNumber(new Random());
      }
} 
```

在 main 方法中，这样使用它：

```
public static void main(String[] args) 
{
    CounterFactory f = new CounterFactory();
    Counter counter1 = f.createCounter();
    Counter counter2 = f.createCounter();
    Counter counter3 = f.createCounter();
    Counter counter4 = f.createCounter();
    Counter counter5 = f.createCounter();

    // Reset all counters
    f.resetCounters();
} 
```

# php - Count/Group By/Order By 仅显示最常见值的计数，而不是字符串本身

> ID：11401188
> 
> 赞同：1
> 
> 时间：2012-07-09T18:48:43.747
> 
> 标签：php, mysql, count, group-by, sql-order-by

我正在查询一个表以查找列中最常见的字符串。但是，它似乎无法正常工作。它应该返回最常见字符串的值，而是返回最常见字符串存在的次数。查询是：

```
SELECT COUNT(field_review_bar_tab_2_value) AS `Rows`
FROM (field_data_field_review_bar_tab_2)
GROUP BY (field_review_bar_tab_2_value)
ORDER BY `Rows` DESC
LIMIT 1 
```

简化后的表结构将具有以下效果：

```
 -----------------------------------
| ID | field_review_bar_tab_2_value |
|----+----------------------------- |
| 1  | Food Drinks                  |
| 2  | Drinks                       |
| 3  | Food Drinks                  |
| 4  | Food                         |
 ----------------------------------- 
```

查询认识到，在上面的示例中，“Food Drinks”是列中最常见的字符串。但是，查询返回“2”而不是“食物饮料”。关于为什么会进行正确查询但返回结果计数而不是字符串值的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:51:08.850

您还需要包含`field_review_bar_tab_2_value`在`SELECT`列表中。我已将聚合切换到`COUNT(*)`此处，并将分组列包含在`SELECT`.

```
SELECT 
 field_review_bar_tab_2_value AS the_most_common_string,
 COUNT(*) AS `Rows`
FROM (field_data_field_review_bar_tab_2)
GROUP BY (field_review_bar_tab_2_value)
ORDER BY `Rows` DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:52:14.507

您选择的是计数，而不是值。我想你的意思是：

```
SELECT field_review_bar_tab_2_value
FROM field_data_field_review_bar_tab_2
GROUP BY field_review_bar_tab_2_value
ORDER BY COUNT(*) DESC
LIMIT 1 
```

由于您已经按相关值进行分组，因此您只需执行 COUNT(*)...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:52:51.540

您将需要修改查询以返回字段本身。目前，查询仅返回 COUNT，因为这是您的 select 语句中指示的内容。修改如下：

```
SELECT field_review_bar_tab_2_value AS `MostCommonString`, COUNT(field_review_bar_tab_2_value) AS `Rows` 
FROM (field_data_field_review_bar_tab_2) 
GROUP BY (field_review_bar_tab_2_value) 
ORDER BY `Rows` DESC 
LIMIT 1 
```

# java - 返回多个日历事件

> ID：11401191
> 
> 赞同：0
> 
> 时间：2012-07-09T18:48:56.727
> 
> 标签：java, android, calendar

[@hmjd这里](https://stackoverflow.com/a/11386687/100747)的答案帮助我设置了多个对象的文本。但是我现在遇到了一个问题。一个日期可以有多个事件，我想在同一个事件详细信息页面上显示所有事件及其详细信息。我怎样才能做到这一点？

代码：

```
public class Event
{
    public final String name;
    public final String title;
    public final String details;

    public Event(final String a_name,
                 final String a_title,
                 final String a_details)
    {
        name = a_name;
        title = a_title;
        details = a_details;
    }
};

final Event e = eventDetails(1, 4);
name.setText(e.name);
title.setText(e.title);
details.setText(e.details);

//event details
public Event eventDetails(int m, int d) {
    switch (m) {
        case 1:
            if (d == 10) {
                return new Event("event1", "my-title1", "mydetails1");
            }
            if (d == 28) {
                 return new Event("event2", "my-title1", "mydetails1");
                 return new Event("event3", "my-title2", "mydetails2"); //add another event on this date; obviously this is not the right way.
            }

            break;

    }

    return new Event("default_my-name2", "default_my-title2", "default_mydetails2");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:52:07.570

要存储 eventDetails 返回的事件，您可以执行以下操作：

```
ArrayList<Event> e = new ArrayList<Event>();
e.add(eventDetails(1, 4)); // This adds one event to the ArrayList 
```

然后访问存储在 ArrayList e 中的事件：

```
Event one = e.get(0); // First Event in the ArrayList
Event two = e.get(1); // Second Event in the ArrayList
...
Event n = e.get(n); // nth Event in the ArrayList 
```

如果你想让这个动态而不是明确地说`e.get(0)`，你可以循环遍历 ArrayList 的大小，如下所示：

```
for (int i = 0; i < e.size(); i++)
{
    Event ev = e.get(i);
    ev.doSomething();
    ev.doSomethingElse();
} 
```

# objective-c - iOS Objective-C - 循环问题

> ID：11401193
> 
> 赞同：0
> 
> 时间：2012-07-09T18:49:06.493
> 
> 标签：objective-c, ios

下面的代码在行中产生和错误，`[myArray objectAtIndex:i];`我似乎无法弄清楚为什么？

有任何想法吗？

```
int total = 0;
    for (int i = 0; i < myArray.count; i++) {
        int tempNumber = [myArray objectAtIndex:i];
        total = total + tempNumber;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:52:22.197

这可能是因为您将对象设置为 int。根据定义，objectAtIndex 返回一个对象。

根据 myArray 中对象的类型，您可以尝试如下操作：

```
int tempNumber = [[myArray objectAtIndex:i] intValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T18:52:10.047

如果您没有将`int`s 放入数组中，那么您需要做一些额外的事情才能将`int`s 取出。如果您在上面的代码中遇到错误，那是因为数组中没有`int`s，您需要

```
int myInteger = [[myArray objectAtIndex:i] intValue]; 
```

或者从数组中取出整数的东西，这取决于你的代码的其余部分。

# pdf - 保存为 pdf 的 Dynamics AX 2009 报告中的图像显示问题

> ID：11401194
> 
> 赞同：1
> 
> 时间：2012-07-09T18:49:11.317
> 
> 标签：pdf, dynamics-ax-2009

当我将本机 Dynamics AX 2009 报告保存为 pdf 或 pdf 嵌入时，它不会正确显示报告中的图像，即标题部分中的公司徽标。图像非常扭曲、发灰和重复。

另一方面，如果我以 HTML 格式导出图像，图像会正确显示。有没有人遇到过类似的问题。

请注意，当报告打印对话框打开时，我使用“文件”选项将报告保存为 pdf。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:08:33.070

```
如果使用的图像格式是以下之一，则会出现问题
1\. 24位位图
2\. TIFF

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T09:34:22.843

我在 AX 2009 中找到了解决此问题的方法：

```
Bitmap getImageBitmap(ItemId _itemId)
{
    HPLInventImages inventImages; // Column HPLInventImages.ItemImage is EDT:BlobData (which is a container)
    Image image;
    ;

    if (!_itemId) return inventImages.ItemImage; // Return null bitmap. The whole AX client crashes if you try to do the resizing code below on a null bitmap.

    select firstonly inventImages where inventImages.ItemId==_itemId;
    //return inventImages.ItemImage; // Would normally just do this, but see comments below.

    // Ok, this next bit is weird!
    // There is a known issue with AX reports with images in, getting saved as PDFs:
    // In some cases, the images appear as garbage on the PDF.
    // I have found that resizing the image before rendering it, causes the image to come out ok on the PDF.
    // So the code below does a token resize (by 1.0 times!) operation on the image before returning it.
    // That is enough to make the image on the PDF turn out ok.
    image=new Image(inventImages.ItemImage);
    image.resize(image.width()*1.0,image.height()*1.0,InterpolationMode::InterpolationModeHighQuality);
    return image.getData();
} 
```

# java - Java ConcurrentHashMap corrupt values

> ID：11401197
> 
> 赞同：3
> 
> 时间：2012-07-09T18:49:31.920
> 
> 标签：java, concurrency, thread-safety, hashmap, concurrenthashmap

I have a ConcurrentHashMap that exhibits strange behavior on occasion.

When my app first starts up, I read a directory from the file system and load contents of each file into the ConcurrentHashMap using the filename as the key. Some files may be empty, in which case I set the value to "empty".

Once all files have been loaded, a pool of worker threads will wait for external requests. When a request comes in, I call the getData() function where I check if the ConcurrentHashMap contains the key. If the key exists I get the value and check if the value is "empty". If value.contains("empty"), I return "file not found". Otherwise, the contents of the file is returned. When the key does not exist, I try to load the file from the file system.

```
private String getData(String name) {
    String reply = null;
    if (map.containsKey(name)) {
        reply = map.get(name);
    } else {
        reply = getDataFromFileSystem(name);
    }

    if (reply != null && !reply.contains("empty")) {
        return reply;
    }

    return "file not found";
} 
```

On occasion, the ConcurrentHashMap will return the contents of a non-empty file (i.e. `value.contains("empty") == false`), however the line:

```
if (reply != null && !reply.contains("empty")) 
```

returns FALSE. I broke down the IF statement into two parts: `if (reply != null)` and `if (!reply.contains("empty"))`. The first part of the IF statement returns TRUE. The second part returns FALSE. So I decided to print out the variable "reply" in order to determine if the contents of the string does in fact contain "empty". This was NOT the case i.e. the contents did not contain the string "empty". Furthermore, I added the line

```
int indexOf = reply.indexOf("empty"); 
```

Since the variable reply did not contain the string "empty" when I printed it out, I was expecting `indexOf` to return -1\. But the function returned a value approx the length of the string i.e. `if reply.length == 15100`, then `reply.indexOf("empty")` was returning 15099.

I experience this issue on a weekly basis, approx 2-3 times a week. This process is restarted on a daily basis therefore the ConcurrentHashMap is re-generated regularly.

Has anyone seen such behavior when using Java's ConcurrentHashMap?

**EDIT**

```
private String getDataFromFileSystem(String name) {
    String contents = "empty";
    try {
        File folder = new File(dir);

        File[] fileList = folder.listFiles();
        for (int i = 0; i < fileList.length; i++) {
            if (fileList[i].isFile() && fileList[i].getName().contains(name)) {
                String fileName = fileList[i].getAbsolutePath();

                FileReader fr = null;
                BufferedReader br = null;

                try {
                    fr = new FileReader(fileName);
                    br = new BufferedReader(fr);
                    String sCurrentLine;
                    while ((sCurrentLine = br.readLine()) != null) {
                        contents += sCurrentLine.trim();
                    }
                    if (contents.equals("")) {
                        contents = "empty";
                    }

                    return contents;
                } catch (Exception e) {
                    e.printStackTrace();

                    if (contents.equals("")) {
                        contents = "empty";
                    }
                    return contents;
                } finally {
                    if (fr != null) {
                        try {
                            fr.close();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }

                    if (br != null) {
                        try {
                            br.close();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }

                    if (map.containsKey(name)) {
                        map.remove(name);
                    }

                    map.put(name, contents);
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();

        if (contents.equals("")) {
            contents = "empty";
        }
        return contents;
    }
    return contents;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T09:53:27.367

I think your problem is that some of your operations should be atomic and they aren't.

For example, one possible thread interleaving scenario is the following:

*   Thread 1 reads this line in the `getData` method:

    ```
    if (map.containsKey(name)) // (1) 
    ```

*   the result is false and Thread 1 goes to

    ```
    reply = getDataFromFileSystem(name); // (2) 
    ```

*   in `getDataFromFileSystem`, you have the following code:

    ```
    if (map.containsKey(name)) { // (3)
        map.remove(name);  // (4)
    }
    map.put(name, contents); // (5) 
    ```

*   imagine that another thread (Thread 2) arrives at `(1)` while Thread 1 is between `(4)` and `(5)`: name is not in the map, so thread 2 goes to `(2)` again

Now that does not explain the specific issue you are observing but it illustrates the fact that when you let many threads run concurrently in a section of code without synchronization, weird things can and do happen.

As it stands, I can't find an explanation for the scenario you describe, unless you call `reply = map.get(name)` more than once in your tests, in which case it is very possible that the 2 calls don't return the same result.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:16:26.723

First off, don't even think that there is a bug in `ConcurrentHashMap`. JDK faults are very rare and even entertaining the idea will pull you away from properly debugging your code.

I think your bug is as follows. Since you are using `contains("empty")` what happens if the line from the file has the word `"empty"` in it? Isn't that going to screw things up?

Instead of using `contains("empty")` I would use `==`. Make the "empty" a `private static final String` then you can use equality on it.

```
private final static String EMPTY_STRING_REFERENCE = "empty";
...
if (reply != null && reply != EMPTY_STRING_REFERENCE) {
    return reply;
}
...
String contents = EMPTY_STRING_REFERENCE;
...
// really this should be if (contents.isEmpty())
if (contents.equals("")) {
    contents = EMPTY_STRING_REFERENCE;
} 
```

This is, btw, the only time you *should* be using `==` to compare strings. In this case you want to test it by reference and *not* by contents since lines from your files could actually contain the magic string.

Here are some other points:

*   In general, whenever you are using the same `String` in multiple places in your program, it should be pulled up to a `static final` field. Java will probably do this for you anyway but it makes the code a lot cleaner as well.
*   @assylias is spot on about race conditions when you make 2 calls to `ConcurrentHashMap`. For example, instead of doing:

    ```
    if (map.containsKey(name)) {
        reply = map.get(name);
    } else { 
    ```

    You should do the following so you do only one.

    ```
    reply = map.get(name);
    if (reply == null) { 
    ```

*   In your code you do this:

    ```
    if (map.containsKey(name)) {
         map.remove(name);
    }
    map.put(name, contents); 
    ```

    That should be rewritten as the following. There is no need to remove before the put which introduces race conditions as @assylias mentioned.

    ```
    map.put(name, contents); 
    ```

*   You said:

    > if reply.length == 15100, then reply.indexOf("empty") was returning 15099.

    This is not possible with the same `reply` String. I suspect that you were looking at different threads or in some other way misinterpreting the output. Again, don't be fooled into thinking that there are bugs in `java.lang.String`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:15:13.930

First, using `ConcurrentHashMap` does not protect you if you call its methods from multiple threads in sequence. If you call `containsKey` and `get` afterwards and another thread calls `remove` in between you will have a null result. Be sure to call only get and check for null instead of containsKey/get. It's also better regarding performance, because both methods nearly have the same cost.

Second, the weird indexOf call result is either due to a programming error, or points to memory corruption. Is there any native code involved in your application? What are you doing in `getDataFromFileSystem`? I observed memory corruption when using `FileChannel` objects from multiple threads.

# ios - iOS中的多模板应用程序

> ID：11401198
> 
> 赞同：0
> 
> 时间：2012-07-09T18:49:32.623
> 
> 标签：ios, templates, user-interface

我是 iOS 开发的新手，这可能是一个非常简单的问题。因此，我想构建一个具有注册屏幕的应用程序，成功登录后，我们转到一个主屏幕，这是一个选项卡式应用程序。

我如何做到这一点？我尝试搜索此内容，但找到了所有其他搜索，但没有找到我正在寻找的内容。请不要投反对票，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:20:42.903

您可以只使用 UINavigationController （在应用程序委托中将其设置为窗口的 rootViewController）。使用您的登录视图控制器初始化导航控制器。用户登录后，只需将您的推`UITabBarController`送到导航堆栈即可。

使您的根视图控制器成为您的应用程序委托的属性，以便您可以轻松访问它

```
@property (nonatomic, strong) UINavigationController *rootNavigationController;

@synthesize rootNavigationController 
```

然后在你的`application: didFinishLaunchingWithOptions:`函数中：

```
self.rootNavigationController = [[UINavigationController alloc] initWithRootViewControler:myLoginViewController]; // assuming myLoginViewController exists

self.window.rootViewController = self.rootNavigationController; 
```

用户成功登录后，将标签栏控制器推入堆栈。

```
[self.rootNavigationController pushViewController:tabBarController animated:YES]; // assuming tabBarController exists 
```

# android - 从我的数据库中填充 ListView

> ID：11401199
> 
> 赞同：0
> 
> 时间：2012-07-09T18:49:41.873
> 
> 标签：android, database, android-listview

我已经阅读了很多关于如何从数据库中填充列表视图的帖子。但我根本无法在我的应用程序上做到这一点！我不知道我做错了什么。我对编程很陌生，所以有很多东西我不明白，但我正在努力学习:)

我在活动中使用此代码将项目添加到数据库中没有任何问题：

```
String selectedstone = (String) stonespinner.getSelectedItem();
String weight = etaddweight.getText().toString();

db.addStone(new MyStonesDatabase(selectedstone, weight)); 
```

在 DatabaseHandler.java 我有这个：

```
// Adding new stone
void addStone(MyStonesDatabase stone) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_STONE, stone.getStone());
    values.put(KEY_WEIGHT, stone.getWeight());

    // Inserting Row
    db.insert(TABLE_MYSTONES, null, values);
    db.close(); // Closing database connection
} 
```

我可以看到通过运行以下命令填充了我的数据库：

```
Log.d("Reading: ", "Reading all items..");
List<MyStonesDatabase> items = db.getAllstones();

for (MyStonesDatabase cn : items) {
String log = "Id: " + cn.getID() + ", Stone: "
+ cn.getStone() + ", Weight: " + cn.getWeight();
// Writing Items to log
Log.d("Name: ", log);
} 
```

但是，当尝试让列表视图显示数据库时，我的应用程序要么崩溃，要么不显示任何内容。在我的 DatabaseHandler.java 我有这个：

```
// Getting All items from database
public List<MyStonesDatabase> getAllstones() {
    List<MyStonesDatabase> stoneList = new ArrayList<MyStonesDatabase>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_MYSTONES;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            MyStonesDatabase stone = new MyStonesDatabase();
            stone.setID(Integer.parseInt(cursor.getString(0)));
            stone.setStone(cursor.getString(1));
            stone.setWeight(cursor.getString(2));

            // Adding stone to list
            stoneList.add(stone);
        } while (cursor.moveToNext());
    }

    // return stonelist
    return stone;
} 
```

我不知道应该在我的活动中添加什么来显示列表视图。

```
public class MyStones extends ListActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

} 
```

}

有人可以帮帮我吗，我要放弃了呵呵 :) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:58:45.057

这是一篇很棒的文章/教程，可能会对您有所帮助。填充你的 listView 并不像在你的 Activity 中做一些事情那么简单。您需要创建一个 listAdapter 和其他一些东西。在本教程中，它们使用数组中的硬编码值。您可以尝试让它工作，然后删除硬编码的数据，并使用您从数据库中获取的数据。

让它工作比你想象的要复杂一些，但并不过分复杂。

希望这可以帮助：

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

# jquery - 从分离的 div 容器中的链接中删除类

> ID：11401203
> 
> 赞同：0
> 
> 时间：2012-07-09T18:50:00.110
> 
> 标签：jquery, addclass, collapse, removeclass, siblings

我在尝试从链接及其兄弟姐妹中添加/删除类时遇到了一些问题。我有 3 组链接包含在`<div class="collapse_content"> ... </div>`. 我能够让 jQuery 从同一个容器中的链接中添加和删除“选定”类，但是如果我选择另一个容器（组）中的链接，那么之前选择的链接不会删除它的类。

组中的每个链接都将页面加载到 iframe 中，因此它们都是静态链接。我在每组链接上方的 jQuery 中也有一个折叠切换功能。

基本上，我想知道是否有人可以帮助我弄清楚为什么 jQuery 不会从与新选择的链接不同的组中的上一个链接中删除“选定”类。

任何帮助/建议表示赞赏。先感谢您。

这是我到目前为止的代码。

--jQuery--

```
$(function() {

 //Add 'selected' class to A tag within class collapse_content
$('.collapse_content a').on('click', function(e){
 $(this).addClass('selected').siblings().removeClass('selected');
 $(this).find('.collapse_content a').removeClass('selected');
});

//toggle the componenet with class collapse_tab
$(".collapse_tab").click(function() {
 $(this).next(".collapse_content").slideToggle(500);
});
});​ 
```

--HTML--

```
<div class="collapse_tab">Group 1</div>
    <div class="collapse_content">
        <a href="Link 1.asp" onclick="return handlelink(this)">Link 1</a><br>
        <a href="Link 2.asp" onclick="return handlelink(this)">Link 2</a><br>
        <a href="Link 3.asp" onclick="return handlelink(this)">Link 3</a><br>
        <a href="Link 4.asp" onclick="return handlelink(this)">Link 4</a><br>
    </div>

<div class="collapse_tab">Group 2</div>
    <div class="collapse_content">
        <a href="Link 1.asp" onclick="return handlelink(this)">Link 1</a><br>
        <a href="Link 2.asp" onclick="return handlelink(this)">Link 2</a><br>
        <a href="Link 3.asp" onclick="return handlelink(this)">Link 3</a><br>
        <a href="Link 4.asp" onclick="return handlelink(this)">Link 4</a><br>
    </div>

<div class="collapse_tab">Group 3</div>
    <div class="collapse_content">
        <a href="Link 1.asp" onclick="return handlelink(this)">Link 1</a><br>
        <a href="Link 2.asp" onclick="return handlelink(this)">Link 2</a><br>
        <a href="Link 3.asp" onclick="return handlelink(this)">Link 3</a><br>
        <a href="Link 4.asp" onclick="return handlelink(this)">Link 4</a><br>
    </div>

<div class="collapse_tab">Group 4</div>
    <div class="collapse_content">
        <a href="Link 1.asp" onclick="return handlelink(this)">Link 1</a><br>
        <a href="Link 2.asp" onclick="return handlelink(this)">Link 2</a><br>
        <a href="Link 3.asp" onclick="return handlelink(this)">Link 3</a><br>
        <a href="Link 4.asp" onclick="return handlelink(this)">Link 4</a><br>
    </div> 
```

--CSS--

```
.collapse_tab {
    text-decoration:none;
    font-weight:bold;
    background-color:#0cf;
    color:#FFF;
    font-size:11px;
    padding: 2px;
    margin:0px;
    text-align:center;
    border:1px solid #09f;
    cursor: pointer;
}

.collapse_content {    
    font:Verdana, Arial, Helvetica, sans-serif;
    margin: 0px;
    padding: 0px;
    font-size: 10px;
    background-color:#0cf;
    border:#fff 1px solid;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:52:59.127

尝试这个

```
$(function() {

 //Add 'selected' class to A tag within class collapse_content
$('.collapse_content a').on('click', function(e){
    $('.collapse_content a').removeClass('selected');
    $(this).addClass('selected');
});

//toggle the componenet with class collapse_tab
$(".collapse_tab").click(function() {
    $(this).next(".collapse_content").slideToggle(500);
});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:58:56.853

这是因为在您的 jQuery 中，您使用的是“this”，它仅代表包含您单击的链接的 div。如果您希望事件处理程序从所有链接中删除该类，而不管它们位于哪个 'collapse_content' div 中，只需使用 $('.collapse_content a') 作为选择器而不是 'this'。

# android - 使用 TCP 在 Android 设备和 python 服务器之间丢失数据

> ID：11401211
> 
> 赞同：0
> 
> 时间：2012-07-09T18:50:17.290
> 
> 标签：android, python, tcp

我对网络编程有点陌生，遇到了一些麻烦。我正在 Android 设备上创建一个 JSON 对象，通过 TCP 连接到 python 服务器，并发送 JSON 字符串。连接被接受，但我一直丢失字符串的结尾，所以

```
json.loads(json_string) 
```

失败了。

这是相关的Android代码：

```
private class Worker implements Runnable
{
    @Override
    public void run()
    {
        //create the network socket
        try
        {
            socket = new Socket(address, 4242);
            Log.i(TAG, "timeout: " + socket.getSoTimeout());
        } 
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        packets = new ArrayList<JSONObject>();
        for (jobs.moveToFirst(); jobs.isAfterLast() == false; jobs.moveToNext())
        {
            String jobName = jobs.getString(jobs.getColumnIndex(JobMetaData.JobTableMetaData.JOB));

            Uri.Builder updated = new Uri.Builder();
            updated.scheme("content");
            updated.authority(JobMetaData.AUTHORITY);
            updated.appendPath(jobName);
            updated.appendPath("member");
            updated.appendPath(JobMetaData.MemberTableMetaData.CHANGED);
            updated.appendPath("true");

            Cursor changed = getContentResolver().query(updated.build(), null, null, null, null);

            Log.d(TAG, "number of members " + changed.getCount());

            //create a JSON object out of the editable properties
            for (changed.moveToFirst(); changed.isAfterLast() == false; changed.moveToNext())
            {
                JSONObject json = new JSONObject();

                for (String att : changed.getColumnNames())
                {
                    if (ListMetaData.validAtts.contains(att))
                    {
                        try
                        {
                            json.put(att, changed.getString(changed.getColumnIndex(att)));
                        } 
                        catch (JSONException e)
                        {
                            // TODO Auto-generated catch block
                            Log.d(TAG, "JSON exception in DatagramService");
                            e.printStackTrace();
                        }
                    }
                }

                //include the GUID and job name
                //for identification
                try
                {
                    json.put(JobMetaData.MemberTableMetaData.GUID,
                            changed.getString(changed.getColumnIndex(JobMetaData.MemberTableMetaData.GUID)));
                    json.put(JobMetaData.JobTableMetaData.JOB, jobName);
                } 
                catch (JSONException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                packets.add(json);
            }
            changed.close();
        }

        Log.d(TAG, "entering send loop");
        try
        {
            out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
            out.flush();
        } 
        catch (IOException e1)
        {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        for (JSONObject packet : packets)
        {   
            Log.d(TAG, "supposedly sending");
            try
            {
                //now write the data
                Log.d(TAG, "packet string: " + packet.toString());
                out.write(packet.toString());
                out.flush();
            }
            catch (IOException e)
            {

            }

        }

        try
        {
            out.write("Done");
            out.flush();
            out.close();
        } catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        stopSelf();
    } 
```

我正在使用的测试服务器（用python编写）：

```
#!/usr/bin/env python

import SocketServer
import json

class MemberUpdateHandler(SocketServer.BaseRequestHandler):
    def setup(self):
        print self.client_address, "connected"

    def handle(self):
        while True:
            self.JSONString = self.request.recv(8192).strip()
            if self.JSONString == "Done":
                return
            self.handleJSON()
            self.update()

    def handleJSON(self):
        JSONMember = json.loads(self.JSONString)
        print "GUID:", JSONMember['ManufacturingGUID']
        print "Weight:", JSONMember['Weight']

    def update(self):
        print "do something here"

if __name__ == "__main__":
    ADDRESS = ''
    PORT = 4242
    HOST = (ADDRESS, PORT)

    s = SocketServer.ThreadingTCPServer(HOST, MemberUpdateHandler)
    s.serve_forever() 
```

这是正在发送的字符串（很长）：

```
{"DetailCheckedBy":"","SketchRight":"","DetailLength":"142.75","DetailedDate":"**NOT SET**","EngineerVerifiedBothConns":"False","HoldStatus":"Not held","RevisionLevel":"No Revision","MemberNumber":"28","RequestVerifySectionSize":"False","TieForcesRight":"False","InputBy":"","IFCFinishDate_4":"**NOT SET**","IFCFinishDate_5":"**NOT SET**","Weight":"438.408","IFCTaskUID_1":"","IFCFinishDate_1":"**NOT SET**","ErectorOrder":"","IFCFinishDate_2":"**NOT SET**","IFCFinishDate_3":"**NOT SET**","IFCTaskUID_4":"","IFCTaskUID_5":"","IFCTaskUID_2":"","SketchLeft":"","IFCTaskUID_3":"","ErectorSequences":"","ReasonRejected":"","MemberCategory":"","EngineerVerifiedLeftConn":"False","BarcodeId":"","ManufacturingGUID":"42bbf9cc-52da-4712-a5fc-e37c5a544c14","aess":"False","FabricationComplete":"**NOT SET**","UserComment2":"","UserComment3":"","LoadNumber":"","UserComment1":"","ErectionBolted":"**NOT SET**","RequestVerifyLength":"False","RequestVerifyGrade":"False","Painted":"False","HeatCertNumber":"","Route1Description":"","IsExisting":"No","ReceivedFromApproval":"**NOT SET**","BackCheckedBy":"","BatchNumber":"","CostCodeReference":"","PONumber":"","Piecemark":"B_25","ReleasedForFabrication":"**NOT SET**","MemberDescription":"BEAM","EngineerVerifiedMemberReady":"False","IFCTaskName_2":"","IFCTaskName_1":"","IFCTaskName_4":"","RequestVerifyMemberPosition":"False","IFCTaskName_3":"","Erected":"**NOT SET**","RevisionCheckedBy_3":"","IFCTaskName_5":"","RevisionCheckedBy_2":"","RevisionCheckedBy_1":"","EngineerVerifiedLeftComments":"","RequestVerifyLeftConnMaterial":"False","RequestEngineerVerify":"False","RevisionCheckedDate_3":"**NOT SET**","RevisionCheckedDate_2":"**NOT SET**","RevisionCheckedDate_1":"**NOT SET**","EngineerVerifiedLength":"False","BackCheckedDate":"**NOT SET**","SubmittedForApproval":"**NOT SET**","EngineerVerifiedSpecial":"False","CostCodeDescription":"","IFCStartDate_5":"**NOT SET**","TieForcesLeft":"False","Fireproofed":"False","ErectorAvailable":"False","RequestVerifyRightConnMaterial":"False","DetailCheckedDate":"**NOT SET**","ErectorNonSteelSupported":"False","BeamPent":"False","StockStatus":"","Sequence":"1","RequestVerifyLeftLoad":"False","DetailFinalCheckDate":"**NOT SET**","ErectorMemberPlaced":"**NOT SET**","InstanceStatus":"","EngineerVerifiedRightConn":"False","DateReceived":"**NOT SET**","MemberType":"Beam","ModelCheckDate":"**NOT SET**","ReasonForHold":"","EngineerVerifiedRightComments":"","ReceivedOnJobSite":"**NOT SET**","RequestVerifyRightLoad":"False","CostCodePrice":"0.0","NestStatus":"","DateDue":"**NOT SET**","ShopSequence":"","EngineerVerifiedSectionSize":"False","ActualLength":"144","InputDate":"**NOT SET**","ErectorCity":"Unknown","EngineerVerifiedSpecial_comments":"","Route4Description":"","EngineerVerifiedGrade":"False","RightLocation":"0.0xx144.0xx156.0xx","IFCFinishTime_2":"","IFCFinishTime_1":"","IFCFinishTime_4":"","Route3Description":"","IFCFinishTime_3":"","LoadStatus":"","ErectorLongitude":"","DateModelCompleted":"61299957600000","Grade":"##SEKRIT KODE!!##","IFCFinishTime_5":"","Route2Description":"","RequestVerifyCamber":"False","ProjectedFabricationComplete":"**NOT SET**","DetailedBy":"","DetailFinalCheckBy":"","Description":"W8x35","ProjectedShippedDate":"**NOT SET**","NestName":"","IFCStartDate_2":"**NOT SET**","IFCStartTime_1":"","IFCStartDate_1":"**NOT SET**","IFCStartDate_4":"**NOT SET**","IFCStartDate_3":"**NOT SET**","IFCStartTime_5":"","IFCStartTime_4":"","IFCStartTime_3":"","DateHeld":"**NOT SET**","IFCStartTime_2":"","LeftLocation":"0.0xx0.0xx156.0xx","Job":"Mobile_x_x_x_x_Demo_x_x_x_x_IN_x_x_x_x_2011","SpecialCutWeld":"False","RejectedBy":"","ErectionWelded":"**NOT SET**","RequestVerifyRightConnConfig":"False","Vendor":"","PackageNumber":"","RejectedByErector":"**NOT SET**","ModelCheckedBy":"","ApprovalStatus":"Not reviewed","RequestVerifyLeftConnConfig":"False","ErectorLatitude":"","LotName":"","ActualShipDate":"**NOT SET**","NestId":""} 
```

这是我从 python 服务器得到的错误：

```
ValueError: Unterminated string starting at: line 1 column 1435 (char 1435) 
```

这意味着字符串已被截断为：

```
{"DetailCheckedBy":"","SketchRight":"","DetailLength":"142.75","DetailedDate":"**NOT SET**","EngineerVerifiedBothConns":"False","HoldStatus":"Not held","RevisionLevel":"No Revision","MemberNumber":"28","RequestVerifySectionSize":"False","TieForcesRight":"False","InputBy":"","IFCFinishDate_4":"**NOT SET**","IFCFinishDate_5":"**NOT SET**","Weight":"438.408","IFCTaskUID_1":"","IFCFinishDate_1":"**NOT SET**","ErectorOrder":"","IFCFinishDate_2":"**NOT SET**","IFCFinishDate_3":"**NOT SET**","IFCTaskUID_4":"","IFCTaskUID_5":"","IFCTaskUID_2":"","SketchLeft":"","IFCTaskUID_3":"","ErectorSequences":"","ReasonRejected":"","MemberCategory":"","EngineerVerifiedLeftConn":"False","BarcodeId":"","ManufacturingGUID":"42bbf9cc-52da-4712-a5fc-e37c5a544c14","aess":"False","FabricationComplete":"**NOT SET**","UserComment2":"","UserComment3":"","LoadNumber":"","UserComment1":"","ErectionBolted":"**NOT SET**","RequestVerifyLength":"False","RequestVerifyGrade":"False","Painted":"False","HeatCertNumber":"","Route1Description":"","IsExisting":"No","ReceivedFromApproval":"**NOT SET**","BackCheckedBy":"","BatchNumber":"","CostCodeReference":"","PONumber":"","Piecemark":"B_25","ReleasedForFabrication":"**NOT SET**","MemberDescription":"BEAM","EngineerVerifiedMemberReady":"False","IFCTaskName_2":"","IFCTaskName_1":"","IFCTaskName_4":"","RequestVerifyMemberPosition":"False","IFCTaskName_3":"","Erected":"**NOT SET**","RevisionCheckedBy_3":"","IFCTaskName_ 
```

任何帮助将不胜感激。提前致谢。

更新：

我已经更新了代码以反映我的修补。服务器收到的字符串现在是

```
{"DetailCheckedBy":"","SketchRight":"","DetailLength":"142.75","DetailedDate":"**NOT SET**","EngineerVerifiedBothConns":"False","HoldStatus":"Not held","RevisionLevel":"No Revision","MemberNumber":"28","RequestVerifySectionSize":"False","TieForcesRight":"False","InputBy":"","IFCFinishDate_4":"**NOT SET**","IFCFinishDate_5":"**NOT SET**","Weight":"438.408","IFCTaskUID_1":"","IFCFinishDate_1":"**NOT SET**","ErectorOrder":"","IFCFinishDate_2":"**NOT SET**","IFCFinishDate_3":"**NOT SET**","IFCTaskUID_4":"","IFCTaskUID_5":"","IFCTaskUID_2":"","SketchLeft":"","IFCTaskUID_3":"","ErectorSequences":"","ReasonRejected":"","MemberCategory":"","EngineerVerifiedLeftConn":"False","BarcodeId":"","ManufacturingGUID":"42bbf9cc-52da-4712-a5fc-e37c5a544c14","aess":"False","FabricationComplete":"**NOT SET**","UserComment2":"","UserComment3":"","LoadNumber":"","UserComment1":"","ErectionBolted":"**NOT SET**","RequestVerifyLength":"False","RequestVerifyGrade":"False","Painted":"False","HeatCertNumber":"","Route1Description":"","IsExisting":"No","ReceivedFromApproval":"**NOT SET**","BackCheckedBy":"","BatchNumber":"","CostCodeReference":"","PONumber":"","Piecemark":"B_25","ReleasedForFabrication":"**NOT SET**","MemberDescription":"BEAM","EngineerVerifiedMemberReady":"False","IFCTaskName_2":"","IFCTaskName_1":"","IFCTaskName_4":"","RequestVerifyMemberPosition":"False","IFCTaskName_3":"","Erected":"**NOT SET**","RevisionCheckedBy_3":"","IFCTaskName_5":"","RevisionCheckedBy_2":"","RevisionCheckedBy_1":"","EngineerVerifiedLeftComments":"","RequestVerifyLeftConnMaterial":"False","RequestEngineerVerify":"False","RevisionCheckedDate_3":"**NOT SET**","RevisionCheckedDate_2":"**NOT SET**","RevisionCheckedDate_1":"**NOT SET**","EngineerVerifiedLength":"False","BackCheckedDate":"**NOT SET**","SubmittedForApproval":"**NOT SET**","EngineerVerifiedSpecial":"False","CostCodeDescription":"","IFCStartDate_5":"**NOT SET**","TieForcesLeft":"False","Fireproofed":"False","ErectorAvailable":"False","RequestVerifyRightConnMaterial":"False","DetailCheckedDate":"**NOT SET**","ErectorNonSteelSupported":"False","BeamPent":"False","StockStatus":"","Sequence":"1","RequestVerifyLeftLoad":"False","DetailFinalCheckDate":"**NOT SET**","ErectorMemberPlaced":"**NOT SET**","InstanceStatus":"","EngineerVerifiedRightConn":"False","DateReceived":"**NOT SET**","MemberType":"Beam","ModelCheckDate":"**NOT SET**","ReasonForHold":"","EngineerVerifiedRightComments":"","ReceivedOnJobSite":"**NOT SET**","RequestVerifyRightLoad":"False","CostCodePrice":"0.0","NestStatus":"","DateDue":"**NOT SET**","ShopSequence":"","EngineerVerifiedSectionSize":"False","ActualLength":"144","InputDate":"**NOT SET**","ErectorCity":"Unknown","EngineerVerifiedSpecial_comments":"","Route4Description":"","EngineerVerifiedGrade":"False","RightLocation":"0.0xx144.0xx156.0xx","IFCFinishTime_2":"","IFCFinishTime_1":"","IFCFinishTime_4":"","Route3Description":"","IFCFinishTime_3":"","LoadStatus":"","ErectorLongitude":"","DateModelCompleted":"61299957600000","Grade":"##SEKRIT KODE!!##","IFCFinishTime_5":"","Route2Description":"","RequestVerifyCamber":"False","ProjectedFabricationComplete":"**NOT SET**","DetailedBy":"","DetailFinalCheckBy":"","Description":"W8x35","ProjectedShippedDate":"**NOT SET**","NestName":"","IFCStartDate_2":"**NOT SET**","IFCStartTime_1":"","IFCStartDate_1":"**NOT SET**","IFCStartDate_4":"**NOT SET**","IFCStartDate_3":"**NOT SET**","IFCStartTime_5":"","IFCStartTime_4":"","IFCStartTime_3":"","DateHeld":"**NOT SET**","IFCStartTime_2":"","LeftLocation":"0.0xx0.0xx156.0xx","Job":"Mobile_x_x_x_x_Demo_x_x_x_x_IN_x_x_x_x_2011","SpecialCutWeld":"False","RejectedBy":"","ErectionWelded":"**NOT SET**","RequestVerifyRightConnConfig":"False","Vendor":"","PackageNumber":"","RejectedByErector":"**NOT SET**","ModelCheckedBy":"","ApprovalStatus":"Not reviewed","RequestVerifyLeftConnConfig":"False","ErectorLatitude":"","LotName":"","ActualShipDate":"**NOT SET**","NestId":""}Done 
```

接着是一堆空白。够了，gedit 无法加载所有内容。前一步后退两步。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:46:26.110

sizeof(int) 在两个设备上可能不一样。所以如果你想传递一个二进制整数，你可能应该硬编码一些东西。

如果你评估 int('\001\002\003\004\005\006\007\010')，你不太可能得到你想要的，我相信这与你在 Python 代码中所做的很接近. 一方面，两个设备的字节序可能不同，另一方面，int() 想要评估 ASCII 或其他编码，而不是原始的字节序相关整数。

在 python 方面，您可能会发现这很有用： [http ://stromberg.dnsalias.org/~strombrg/bufsock.html](http://stromberg.dnsalias.org/~strombrg/bufsock.html)

我不确定您正在使用的 out.write()，但在 send() 的较低级别，不能保证您的整个缓冲区将被写入单个 send() - 它可以提前停止并且只返回发送了多少。希望 java 可以像 bufsock 为 python 所做的那样保护您免受这些细节的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:53:05.037

为什么您“假设”字符串已被截断？`print`看看它到底是什么。

此外，正在发送的字符串（如您发布的那样）未包含在 中`{}`，这意味着它不是正确的 JSON ...我试图将其复制/粘贴到解释器中，这会引发`ValueError`：

```
ValueError: Extra data: line 1 column 17 - line 1 column 3952 (char 17 - 3952) 
```

我把它封闭起来，`{}`它起作用了。您应该尝试查看您在 python 端接收到的字符串实际上是什么，然后您才能真正看到发生了什么。我还假设，既然您看到发送的“完成”，那么内容应该已经完全发送。

# php - 亚马逊 MWS 读取库存 Php

> ID：11401212
> 
> 赞同：1
> 
> 时间：2012-07-09T18:50:20.407
> 
> 标签：php, amazon-mws

我正在尝试获取 sku 产品的可用库存。我搜索了很多，发现一些不适合我的pdf。我被困在我的头上该怎么办，任何人都可以帮助我，我会更加感激。我也试过这段代码，

```
$skus = new FBAInventoryServiceMWS_Model_SellerSkuList();
$skus->setmember( 'sku-111' );

invokeListInventorySupply($service, $request->withSellerSkus( $skus ) ); 
```

但它返回的是 InStockSupplyQuantity is 0 你可以在这个[链接上看到](http://ht.dnsuk.net/amazon/FBAInventoryServiceMWS/Samples/ListInventorySupplySample.php)

这是我正在使用的代码的完整版本，

```
<?php

include_once ('.config.inc.php'); 

$config = array (
  'ServiceURL' => MWS_ENDPOINT_URL,
  'ProxyHost' => null,
  'ProxyPort' => -1,
  'MaxErrorRetry' => 3
);

 $service = new FBAInventoryServiceMWS_Client(
     ACCESS_KEY_ID, 
     SECRET_ACCESS_KEY, 
     $config,
     APPLICATION_NAME,
     APPLICATION_VERSION);

 $request = new FBAInventoryServiceMWS_Model_ListInventorySupplyRequest();
  $request->setSellerId(SELLER_ID);

    $skus = new FBAInventoryServiceMWS_Model_SellerSkuList();
    $skus->setmember( 'sku-111' );

  invokeListInventorySupply($service, $request->withSellerSkus( $skus ) );

  function invokeListInventorySupply(FBAInventoryServiceMWS_Interface $service, $request) 
  {
      try {
              $response = $service->listInventorySupply($request);

                echo ("Service Response<br />");
                echo ("=============================================================================<br />");

                echo("        ListInventorySupplyResponse<br />");
                if ($response->isSetListInventorySupplyResult()) { 
                    echo("            ListInventorySupplyResult<br />");
                    $listInventorySupplyResult = $response->getListInventorySupplyResult();
                    if ($listInventorySupplyResult->isSetInventorySupplyList()) { 
                        echo("                InventorySupplyList<br />");
                        $inventorySupplyList = $listInventorySupplyResult->getInventorySupplyList();
                        $memberList = $inventorySupplyList->getmember();
                        foreach ($memberList as $member) {
                            echo("                    member<br />");
                            echo ("=============================================================================<br />");
                            if ($member->isSetSellerSKU()) 
                            {
                                echo("                        SellerSKU<br />");
                                echo("                            " . $member->getSellerSKU() . "<br /><br />");
                            }
                            if ($member->isSetFNSKU()) 
                            {
                                echo("                        FNSKU<br />");
                                echo("                            " . $member->getFNSKU() . "<br /><br />");
                            }
                            if ($member->isSetASIN()) 
                            {
                                echo("                        ASIN<br />");
                                echo("                            " . $member->getASIN() . "<br /><br />");
                            }
                            if ($member->isSetCondition()) 
                            {
                                echo("                        Condition<br />");
                                echo("                            " . $member->getCondition() . "<br /><br />");
                            }
                            if ($member->isSetTotalSupplyQuantity()) 
                            {
                                echo("                        TotalSupplyQuantity<br />");
                                echo("                            " . $member->getTotalSupplyQuantity() . "<br /><br />");
                            }
                            if ($member->isSetInStockSupplyQuantity()) 
                            {
                                echo("                        InStockSupplyQuantity<br />");
                                echo("                            " . $member->getInStockSupplyQuantity() . "<br /><br />");
                            }
                            if ($member->isSetEarliestAvailability()) { 
                                echo("                        EarliestAvailability<br />");
                                $earliestAvailability = $member->getEarliestAvailability();
                                if ($earliestAvailability->isSetTimepointType()) 
                                {
                                    echo("                            TimepointType<br />");
                                    echo("                                " . $earliestAvailability->getTimepointType() . "<br /><br />");
                                }
                                if ($earliestAvailability->isSetDateTime()) 
                                {
                                    echo("                            DateTime<br />");
                                    echo("                                " . $earliestAvailability->getDateTime() . "<br /><br />");
                                }
                            } 
                            if ($member->isSetSupplyDetail()) { 
                                echo("                        SupplyDetail<br />");
                                $supplyDetail = $member->getSupplyDetail();
                                $member1List = $supplyDetail->getmember();
                                foreach ($member1List as $member1) {
                                    echo("                            member<br />");
                                    if ($member1->isSetQuantity()) 
                                    {
                                        echo("                                Quantity<br />");
                                        echo("                                    " . $member1->getQuantity() . "<br /><br />");
                                    }
                                    if ($member1->isSetSupplyType()) 
                                    {
                                        echo("                                SupplyType<br />");
                                        echo("                                    " . $member1->getSupplyType() . "<br /><br />");
                                    }
                                    if ($member1->isSetEarliestAvailableToPick()) { 
                                        echo("                                EarliestAvailableToPick<br />");
                                        $earliestAvailableToPick = $member1->getEarliestAvailableToPick();
                                        if ($earliestAvailableToPick->isSetTimepointType()) 
                                        {
                                            echo("                                    TimepointType<br />");
                                            echo("                                        " . $earliestAvailableToPick->getTimepointType() . "<br /><br />");
                                        }
                                        if ($earliestAvailableToPick->isSetDateTime()) 
                                        {
                                            echo("                                    DateTime<br />");
                                            echo("                                        " . $earliestAvailableToPick->getDateTime() . "<br /><br />");
                                        }
                                    } 
                                    if ($member1->isSetLatestAvailableToPick()) { 
                                        echo("                                LatestAvailableToPick<br />");
                                        $latestAvailableToPick = $member1->getLatestAvailableToPick();
                                        if ($latestAvailableToPick->isSetTimepointType()) 
                                        {
                                            echo("                                    TimepointType<br />");
                                            echo("                                        " . $latestAvailableToPick->getTimepointType() . "<br /><br />");
                                        }
                                        if ($latestAvailableToPick->isSetDateTime()) 
                                        {
                                            echo("                                    DateTime<br />");
                                            echo("                                        " . $latestAvailableToPick->getDateTime() . "<br /><br />");
                                        }
                                    } 
                                }
                            } 
                        }
                    } 
                    if ($listInventorySupplyResult->isSetNextToken()) 
                    {
                        echo("                NextToken<br />");
                        echo("                    " . $listInventorySupplyResult->getNextToken() . "<br /><br />");
                    }
                } 
                if ($response->isSetResponseMetadata()) { 
                    echo("            ResponseMetadata<br />");
                    $responseMetadata = $response->getResponseMetadata();
                    if ($responseMetadata->isSetRequestId()) 
                    {
                        echo("                RequestId<br />");
                        echo("                    " . $responseMetadata->getRequestId() . "<br /><br />");
                    }
                } 

     } catch (FBAInventoryServiceMWS_Exception $ex) {
         echo("Caught Exception: " . $ex->getMessage() . "<br /><br />");
         echo("Response Status Code: " . $ex->getStatusCode() . "<br /><br />");
         echo("Error Code: " . $ex->getErrorCode() . "<br /><br />");
         echo("Error Type: " . $ex->getErrorType() . "<br /><br />");
         echo("Request ID: " . $ex->getRequestId() . "<br /><br />");
         echo("XML: " . $ex->getXML() . "<br /><br />");
     }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T12:24:45.483

这段代码对我来说很好：

```
...
$skus= new FBAInventoryServiceMWS_Model_SellerSkuList();
$skus->setmember("??-????-????"); // Your SKU
$request = new FBAInventoryServiceMWS_Model_ListInventorySupplyRequest();
$request->setSellerId(SELLER_ID);
$request->setMarketplace(MARKETPLACE_ID);
$request->setSellerSkus($skus);
invokeListInventorySupply($service, $request);
... 
```

我的完整代码基于[PHP Client Library v20101001](https://developer.amazonservices.com/gp/mws/api.html?group=fba&section=inventory&version=v20101001)`\src\FBAInventoryServiceMWS\Samples\ListInventorySupplySample.php`中的文件，上面的代码替换了第 71 行。

输出如下所示： ![在此处输入图像描述](../Images/a65c246f5cf33caa637b7a8869538ea4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:06:52.723

- 编辑 -

由于 PHP 和我不是最好的朋友，我将解释确保您可以获得所需数据所需的步骤：

1.  使用 ListInventorySupply 构建您的请求
2.  通过查看以下 XML 并确保正确调用对象来抓取您的响应：

    ```
    <?xml version="1.0"?>
    <ListInventorySupplyResponse  xmlns="http://mws.amazonaws.com/FulfillmentInventory/2010-10-01">
    <ListInventorySupplyResult>
        <InventorySupplyList>
             <member>
                  <SellerSKU>SampleSKU1</SellerSKU>
                  <ASIN>B00000K3CQ</ASIN>
                  <TotalSupplyQuantity>20</TotalSupplyQuantity>
                  <FNSKU>X0000000FM</FNSKU>
                  <Condition>NewItem</Condition>
                  <SupplyDetail/>
                  <InStockSupplyQuantity>15</InStockSupplyQuantity>
                  <EarliestAvailability>
                      <TimepointType>Immediately</TimepointType>
                  </EarliestAvailability>
             .... 
    ```

3.  在 C# 中，每个响应都可以通过一组对象获得，例如：

    ```
    submitFeedResponse.SubmitFeedResult.FeedSubmissionInfo.FeedType 
    ```

    或者

    ```
    submitFeedResponse.ResponseMetadata.RequestId 
    ```

我发现我的大部分无效响应都是由于没有调用正确的对象，或者如果我确实有正确的对象，我没有正确显示它（例如没有调用 toString() ）。

另一方面，您正在返回您的 sku 名称，那么您是否确保您使用的 sku 应该通过卖家中心返回实际数量？

或者，可以在以下位置获得一些出色的支持：

[https://sellercentral.amazon.com/forums/forum.jspa?forumID=35](https://sellercentral.amazon.com/forums/forum.jspa?forumID=35)

# java - 如何找到边的顶点，如果其中任何一个是 JUNG 图中的叶节点 a？

> ID：11401215
> 
> 赞同：1
> 
> 时间：2012-07-09T18:50:33.830
> 
> 标签：java, jung

我正在使用 JUNG Graph。我正在处理的问题可以定义如下：

> 给定一个 JUNG Graph G={V,E} 和一条边 E1，找到 E1 连接的节点/顶点，如果它是叶节点，则删除该顶点。

所以，有两个部分：

1.  查找由给定边 E1 连接的顶点。
2.  查找给定顶点是否为叶节点？

这两个操作在 JUNG 中是否可以直接进行？如果没有，有人可以提出另一种方法来实现同样的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:43:54.923

(1)`Graph.getIncidentVertices(E e1)`

（2）您没有定义“叶节点”的含义，但假设您指的是有向图和一个具有一条入边且没有出边的顶点，这很容易： `Graph.getIncomingEdges().size() == 1`

`Graph.getOutgoingEdges().isEmpty())`

如果图不是多重图，您也可以这样做： `Graph.getPredecessorCount() == 1`

`Graph.getSuccessorCount() == 0`

JUNG 的 Javadoc 非常好；在提出此类问题之前，您应该考虑浏览它：http: [//jung.sourceforge.net/doc/api/index.html](http://jung.sourceforge.net/doc/api/index.html)

# c# - C：函数指针不安全的示例与 C# 的委托进行比较

> ID：11401216
> 
> 赞同：1
> 
> 时间：2012-07-09T18:50:36.360
> 
> 标签：c#, c, delegates, function-pointers

当我学习 C# 的委托时，我的书说委托与 C 中的函数指针相同，但更安全。读完那行之后，我想：啊，所以C编译器不会检查函数指针指向的原型。我完全错了。

```
int add(int a, int b){ return a + b; }
float add_f(float a, float b){ return a + b; }

int (*f)(int,int);
f = add; // no compile-error
f = add_f; //compile-error 
```

所以，请告诉我为什么，并举一些例子来证明 C 函数指针与 C# 中的委托相比是不安全的。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:53:04.253

在 C++ 中，函数指针是类型安全的。你必须做一些非常愚蠢的事情来打破它们（通常涉及铸造、联合、`memcpy`或类似的东西；它不会偶然发生）。

但是，在 C 中，函数类型没有那么严格。你可以这样做：

```
int add(int a, int b){ return a + b; }
int add_f(float a, float b){ return a + b; }

int (*f)(); // empty argument list does NOT mean zero arguments.
            // for zero arguments, say int (*)(void)
f = &add;
f = &add_f; 
```

[http://ideone.com/Y6mCc](http://ideone.com/Y6mCc)

* * *

我被问到一个非常愚蠢的例子。 [这里是](http://ideone.com/Z8Ryv)：

```
#include <iostream>

int add(int a, int b){ return a + b; }
int add_f(float a, float b){ return a + b; }

union {
    int (*f1)(int, int);
    int (*f2)(float, float);
} fp;

int main(void)
{
    fp.f1 = &add;
    std::cout << "Expected (1): " << add(1, 3) << std::endl;
    std::cout << "Actual   (1): " << (fp.f1)(1, 3) << std::endl;

    std::cout << "Expected (2): " << add(1.0f, 3.0f) << std::endl;
    std::cout << "Actual   (2): " << (fp.f2)(1.0f, 3.0f) << std::endl;

    fp.f2 = &add_f;
    std::cout << "Expected (3): " << add_f(1.0f, 3.0f) << std::endl;
    std::cout << "Actual   (3): " << (fp.f2)(1.0f, 3.0f) << std::endl;

    std::cout << "Expected (4): " << add_f(1, 3) << std::endl;
    std::cout << "Actual   (4): " << (fp.f1)(1, 3) << std::endl;

    return 0;
} 
```

请注意，这种愚蠢在带有`Marshal.Copy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:56:16.237

你不应该把每本书都说成是表面上的东西：C 的函数指针和 C# 的委托之间的相似之处是相当肤浅的。将它们逐个功能进行比较会产生一份差异清单，而“安全性”将远离该清单的顶部。

使用函数指针模拟 C# 委托的最大安全问题是函数指针操作的数据的所有权。回想一下，委托并不局限于静态函数：您可以从成员函数生成委托，在这种情况下，对象将“嵌入”到委托中。C 中没有类似的功能：您需要做很多工作才能将函数指针“绑定”到一段数据。如果稍后数据变得不可用，并且函数尝试使用该数据，则可能会触发崩溃。但这种差异是垃圾收集与手动管理的内存环境的一个属性。

# sql-server-2008 - 多个设置的垂直或水平 t-sql 表？

> ID：11401219
> 
> 赞同：0
> 
> 时间：2012-07-09T18:50:45.280
> 
> 标签：sql-server-2008, tsql

假设您需要一个表来存储设置。例如，我想将车辆设置存储在一个表中，但是有超过 100 个设置，所以最好有一个 100 列的表或一个可能有 2 列的表（1 用于设置名称，1 用于设置值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:10:16.550

我完全赞成正常化。因此，我将创建三个表：Vehicle、Setting 和 VehicleSetting，其中包含车辆 ID、设置 ID 和设置值的三列。实际上我在生产中确实有这个实现。如果用户没有明确指定值，我的设置表也有存储的默认值。

如果您决定将来添加设置，这种方法非常方便。无需修改表并可能面临重构，您只需将另一条记录添加到设置表即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:30:19.083

两者都有其优点和缺点。

为了灵活性，我会选择垂直（每行中的每个设置）方法

如果您每行使用一个设置，

*   在不更改表架构的情况下，将来添加新设置或删除不需要的设置会更容易。
*   您可以有一个用户界面来执行此操作，而无需接触数据库
*   您的客户可以添加/删除设置而无需您注意

但是

*   您可能需要记住设置关键字，没有智能感知
*   循环，光标

100列方法

*   智能感知
*   这只是一个记录，应该更快
*   没有循环，没有光标

但是

*   如果它们不可为空，您可能必须填充所有列
*   更改架构，您可能必须更改所有依赖代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:30:24.837

我不同意 Dimitri 的回答，但提出了另一面。

12 或 100 查看您期望设置更改的频率。

如果每个设置都是一列，那么您有一个新属性的程序更改。更简单的查询语法。如果它们是单值属性，那么我认为您仍然有第 3 范式和更有效的查询。

如果您按照 Dimitri 的建议使用 3 个表格，那么您的设计会稍微复杂一些，但您可以添加和修改属性运行时间。如果有多个连接，查询会更复杂。您可以在设置表上构建一个查询来构建您的真实查询。我肯定会在 tcoder 建议的光标上使用连接。

如果您有 .NET 或其他前端，那么您还可以通过读取设置表来构建查询。如果您绑定到像 GridView 一样，您将无法生成列，但也没有那么多工作。

# sql - 从两个表值更新 sql 查询

> ID：11401221
> 
> 赞同：0
> 
> 时间：2012-07-09T18:50:51.640
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有 2 个表，其值存储如下。

**表格1**

```
ReferranceID   StatusNumber   ServiceType            T2OpenDt          T1OpenDT
162987          399519        Orthopaedic Surgery       NULL           2011-08-19 
162987          399525        Acupuncture               NULL           2011-08-19 
162987          413405        Anesthesiology            NULL           2011-09-28 
162987          517174        Chiropractic              NULL           2012-04-26 
```

**表2**

```
ReferranceID StatusNumber   Status     T2OpenDate
162987       256033         Closed     2010-11-17 
162987       488518         ReOpen     2012-02-22 
```

第一个表应该从第二个表更新如下。（即结果值）

```
ReferranceID   StatusNumber   ServiceType               T2OpenDt          T1OpenDT
162987          399519        Orthopaedic Surgery       2010-11-17         2011-08-19 
162987          399525        Acupuncture               2010-11-17         2011-08-19 
162987          413405        Anesthesiology            2010-11-17         2011-09-28 
162987          517174        Chiropractic              2012-02-22         2012-04-26 
```

**'2010-11-17'**将更新为**3 行**，因为 T2OpenDate 小于 T1Opendate，并且仅出现一次**2012-02-22**，因为此日期略大于其他 3 个顶部 T1OpenDate 并且小于第 4 个 T1OpenDate。

任何人都可以建议我上面的 UPDATE sqlquery。非常感谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:58:50.633

```
UPDATE Table1
    SET T2OpenDate = (SELECT MAX(Table2.T2OpenDate)
                      FROM Table2 
                      WHERE Table2.T2OpenDate < Table1.T1OpenDate)                       
FROM Table1 
```

**根据 Aaron Bertrand 的 commnet 编辑**。****

 **如果您想更好地掌握这项特殊技能，我建议您阅读以下内容：[如何从 SQL Server 中的 SELECT 中进行更新？](https://stackoverflow.com/questions/2334712/sql-server-update-from-select/2334741#2334741)**

# algorithm - 格子行走高分

> ID：11401223
> 
> 赞同：7
> 
> 时间：2012-07-09T18:50:54.947
> 
> 标签：algorithm

有一个有趣的游戏叫单人游戏。它在`m*n`网格上播放。每个网格单元中都有一个非负整数。您从分数 0 开始。您不能输入包含整数 0 的单元格。您可以在任何您想要的单元格开始和结束游戏（当然单元格中的数字不能为0）。在每一步，您都可以向上、向下、向左和向右移动到相邻的网格单元。你最后能得到的分数是你路径上数字的总和。但是每个单元格最多只能输入一次。

游戏的目的是让你的分数尽可能高。

输入：
第一行输入是一个整数`T`，表示测试用例的数量。每个测试用例的第一行是包含 2 个整数的单行`m`，`n`即网格中的行数和列数。接下来的每一`m`行都包含以`n`空格分隔的整数`D`，指示相应单元格中的数字

输出：
对于每个测试用例，在一行中输出一个整数，这是您最终可以获得的最高分。

约束：
`T`小于 7。
`D`小于 60001。
`m`小于`n`8。

样本输入：

```
4
1 1
5911
1 2
10832 0
1 1
0
4 1
0
8955
0
11493 
```

样本输出：

```
5911
10832
0
11493 
```

我试过了，但是对于 7x7 网格，我的方法工作得非常慢。我正在尝试递归访问网格的每条可能路径并比较每条路径的总和。下面是我的代码

```
#include<iostream>
#include <algorithm>
#include <stdio.h>
using namespace std;

int max(int a,int b,int c, int d)
{
int max = a;
if(b>max)
    max = b;
if(c>max)
    max = c;
if(d>max)
    max = d;
return max;
}

int Visit_Component( int (*A)[8], int Visit[8][8], int m,int n , int row, int col)
{

if ( ( row >= m ) || (col >= n )  || (col < 0) || (row < 0)  || A[row][col] == 0         || Visit[row][col] == 1 )
{
    return 0;
}
else
{

    Visit[row][col] = 1;
    int a= 0,b=0,c=0,d=0,result =0;
    a = Visit_Component( A, Visit,m,n, row+1, col);
    b = Visit_Component( A, Visit,m,n, row, col +1);
    c = Visit_Component( A, Visit,m,n, row, col -1);
    d = Visit_Component( A, Visit,m,n, row-1, col );
    Visit[row][col] = 0;
    result  = A[row][col] + max(a,b,c,d);
    return result;
}
}

int main(){

int T;
scanf("%d",&T);
for(int k =0; k<T;k++)
{
    int N ;
    int M;
    int count = 0;
    int maxcount = 0;
    scanf("%d %d",&M,&N);
    int C[8][8];
    int visit[8][8];
    for(int i = 0; i < M; i++)
        for(int j = 0; j < N; j++)
        {
            scanf("%d",&C[i][j]);
            visit[i][j] = 0;
        }
    for( int i= 0 ; i< M ; i++ )
    {
        for( int j =0; j< N ; j++ )
        {

            count  = Visit_Component( C, visit,M,N, i, j);
            if(count > maxcount)
            {
                maxcount  = count;
            }
        }
    }
    printf("%d\n",maxcount);
}
return 0;
} 
```

请建议我如何优化这种方法或更好的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:09:15.453

正如[关于旅行推销员问题的维基百科文章](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms)所暗示的那样，有精确的算法可以快速解决此任务。但很难找到。而且它们很可能很复杂。

至于优化OP的方法，有几种可能。

从简单的微优化开始更容易：条件`Visit[row][col] == 1`以最高概率满足，所以它应该排在第一位。

此外，使用动态规划优化分支定界算法以避免一些重复计算也是合理的。对于多达 19 个已访问单元格的情况，记忆计算结果为简单的哈希表，性能提高了 25% 以上（对于一些改进的哈希表，可能期望更多）。这是修改后的代码片段：

```
#include<iostream>
#include <algorithm>
#include <stdio.h>
using namespace std;

int max(int a,int b,int c, int d)
{
  int max = a;
  if(b>max)
    max = b;
  if(c>max)
    max = c;
  if(d>max)
    max = d;
  return max;
}

typedef unsigned long long ull;
static const int HS = 10000019;
static const int HL = 20;
struct HT {
  ull v;
  int r;
  int c;
};
HT ht[HS] = {0};

int Visit_Component(
  int (*A)[8], ull& Visit, int m,int n , int row, int col, int x)
{

  if ( (Visit & (1ull << (8*row+col))) || ( row >= m ) || (col >= n )  ||
    (col < 0) || (row < 0)  || A[row][col] == 0)
  {
    return 0;
  }
  else
  {
    if (x < HL)
    {
      HT& h = ht[(Visit+4*row+col)%HS];
      if (h.v == Visit && h.r == row && h.c == col)
        return 0;
    }

    Visit |= (1ull << (8*row+col));
    int a= 0,b=0,c=0,d=0,result =0;
    a = Visit_Component( A, Visit,m,n, row+1, col, x+1);
    b = Visit_Component( A, Visit,m,n, row, col +1, x+1);
    c = Visit_Component( A, Visit,m,n, row, col -1, x+1);
    d = Visit_Component( A, Visit,m,n, row-1, col , x+1);
    Visit &= ~(1ull << (8*row+col));
    result  = A[row][col] + max(a,b,c,d);

    if (x < HL)
    {
      HT& h = ht[(Visit+4*row+col)%HS];
      h.v = Visit;
      h.r = row;
      h.c = col;
    }

    return result;
  }
}

int main(){

  int T;
  scanf("%d",&T);
  for(int k =0; k<T;k++)
  {
    int N ;
    int M;
    int count = 0;
    int maxcount = 0;
    scanf("%d %d",&M,&N);
    int C[8][8];
    ull visit = 0;
    for(int i = 0; i < M; i++)
        for(int j = 0; j < N; j++)
        {
            scanf("%d",&C[i][j]);
        }
    for( int i= 0 ; i< M ; i++ )
    {
        for( int j =0; j< N ; j++ )
        {

            count  = Visit_Component( C, visit,M,N, i, j, 0);
            if(count > maxcount)
            {
                maxcount  = count;
            }
        }
    }
    printf("%d\n",maxcount);
  }
  return 0;
} 
```

通过预处理输入矩阵可以进行更多改进。如果矩阵中没有零或角落只有一个零，您可以将所有值相加。

如果只有一个零值（不在角落），则最多应从总和中排除一个非零值。如果您发明了一种算法来确定必须从中删除一个单元格的单元格子集，那么您只需从该子集中选择最小值。

如果有两个或多个零值，则使用分支定界算法：在这种情况下它大约快 20 倍，因为输入矩阵中的每个零值意味着大约五倍的速度增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:30:02.137

我能想到的一种优化是应用[Dijkstra's algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。该算法将为您提供特定源节点到所有目标节点的最小（在您的情况下为最大值）路径。

在此示例中，第一步是构建图表。

而且因为您不知道要从哪个源节点开始，所以您必须对网格中的每个节点应用 Dijkstra 算法。时间复杂度将比您的递归方法更好，因为对于特定的源节点，在找到最大路径时，Dijkstra 的算法不会遍历所有可能的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T20:37:45.953

```
#include<iostream>
#include<vector>

using namespace std;
vector<vector<int> >A;
vector<vector<bool> >test;
vector<vector<bool> >test1;
int sum_max=0;
int m,n;
vector<vector<bool> > stamp;
void color1(int i,int j,vector<vector<bool> >temp_vector,vector<vector<bool> > st,int summ){

   temp_vector[i][j]=false;summ+=A[i][j];st[i][j]=true;
 //1.1
  if(i+1<m && temp_vector[i+1][j]){
   if(test1[i+1][j]){
                     if(sum_max<(summ)){sum_max=summ;stamp=st;}
                     }    
else{color1(i+1,j,temp_vector,st,summ);}
}
   //1.2
   if(i+1<m){if(!temp_vector[i+1][j]){ if(sum_max<(summ)){sum_max=summ;}}} 
   if(i+1>=m){if(sum_max<(summ)){sum_max=summ;}} 

    //2
 if(i-1>=0 && temp_vector[i-1][j]){
          if(test1[i-1][j]){
                     if(sum_max<(summ)){sum_max=summ;}
                     }    
    else{ color1(i-1,j,temp_vector,st,summ);}
     }
   //2.2
   if(i-1>=0){if(!temp_vector[i-1][j]){ if(sum_max<(summ)){sum_max=summ;}}}
      if(i-1<0){if(sum_max<(summ)){sum_max=summ;}} 

     //3
     if(j+1<n && temp_vector[i][j+1]){
        if(test1[i][j+1]){
                         if(sum_max<(summ)){sum_max=summ;}
                     }    
    else{      color1(i,j+1,temp_vector,st,summ);}}
  //3.2
   if(j+1<n){if(!temp_vector[i][j+1]){ if(sum_max<(summ)){sum_max=summ;}}}
      if(j+1>=n){if(sum_max<(summ)){sum_max=summ;}} 

     //4
     if(j-1>=0 && temp_vector[i][j-1]){
        if(test1[i][j-1]){
                     if(sum_max<(summ)){sum_max=summ;}
                     }    
else{       color1(i,j-1,temp_vector,st,summ);}}
//4.2
   if(j-1>=0){if(!temp_vector[i][j-1]){ if(sum_max<(summ)){sum_max=summ;}}}
      if(j+1<0){if(sum_max<(summ)){sum_max=summ;}} 

 }

void color(int i,int j){
   test[i][j]=false;
  if(i+1<m && test[i+1][j]){
    color(i+1,j);}
     if(i-1>=0 && test[i-1][j]){
           color(i-1,j);
 }
 if(j+1<n && test[i][j+1]){
          color(i,j+1);}
 if(j-1>=0 && test[i][j-1]){color(i,j-1);}

}

int main(){
    int tc;cin>>tc;
    for(int i=0;i<tc;i++){
        int mp,np;
        cin>>mp;
        cin>>np;m=mp;n=np;A.resize(m);test.resize(m);test1.resize(m);int sum=0;
        vector<bool> ha1(m,1);
        vector<bool> ha2(n,1);
        for(int i=0;i<m;i++){A[i].resize(n);test[i].resize(n);test1[i].resize(n);
                for(int j=0;j<n;j++){
                        cin>>A[i][j];sum+=A[i][j];
                                                    test[i][j]=true;test1[i][j]=false;
                                                    if(A[i][j]==0){test[i][j]=false;ha1[i]=false;ha2[j]=false;}
                        }
                }cout<<endl;
               for(int i=0;i<m;i++){cout<<"  "<<ha1[i];} cout<<endl;
               for(int i=0;i<n;i++){cout<<"  "<<ha2[i];} cout<<endl;
              cout<<"sum "<<sum<<"\n";
                int temp_sum=0;
                 for(int i=0;i<m;i++){
                                for(int j=0;j<n;j++){//if(A[i][j]<=8845){cout<<"\nk "<<A[i][j]<<"  "<<(8845-A[i][j]);}
                                        if(test[i][j]){
                                                       if((i-1)>=0 && test[i-1][j] && (i+1)<m && test[i+1][j] && (j-1)>=0 && test[i][j-1] && (j+1)<n && test[i][j+1] && test[i-1][j-1] && test[i-1][j+1]&& test[i+1][j-1] && test[i+1][j+1]){
                                                                   temp_sum+=A[i][j];test1[i][j]=true;}

                                                       }
                                                     //  cout<<test1[i][j]<<"    ";
                                        }//cout<<"\n";
                                        }

//         /*
                 for(int i=0;i<m;i++){
                                for(int j=0;j<n;j++){

                                        if(test1[i][j]){if(!((test1[i-1][j]||test1[i+1][j]) && (test1[i][j-1]||test1[i][j+1]))){
                                                                                         temp_sum-=A[i][j];   test1[i][j]=false;}
                                        }

                                                      //
                                                   //    cout<<test1[i][j]<<"    ";
                                        }//
                                       // cout<<"\n";
                                        }
  //              */

               //cout<<"\n temp_sum is "<<temp_sum<<endl;
               vector<vector<bool> > st(m,vector<bool>(n,0));st=test1;
                 for(int i=0;i<m;i++){
                                for(int j=0;j<n;j++){
                                        if(test[i][j] && (!test1[i][j])){
                                                       color1(i,j,test,st,0);

                                                       }}}

            //    cout<<"\nsum is "<<(sum_max+temp_sum)<<endl<<endl;
            cout<<(sum_max+temp_sum)<<endl;
      for(int i=0;i<m;i++){
                              for(int j=0;j<n;j++){cout<<stamp[i][j]<<"  ";}    cout<<endl;}
//            cout<<max<<endl;
        A.clear();
        test.clear();
        test1.clear();
        sum_max=0;
            }

    cout<<endl;system("pause");
return 0;
} 
```

# sql - 如何在 PostgreSQL 中使用 SELECT DISTINCT 和 RANDOM() 函数？

> ID：11401229
> 
> 赞同：9
> 
> 时间：2012-07-09T18:51:11.450
> 
> 标签：sql, postgresql, select

我正在尝试运行 SQL 查询以获取四个随机项目。由于表中`product_filter`有多个 touple in`product`我必须使用`DISTINCT`in `SELECT`，所以我收到此错误：

**对于 SELECT DISTINCT，ORDER BY 表达式必须出现在选择列表中**

但如果我把它放在`RANDOM()`我的`SELECT`它将避免`DISTINCT`结果。

有人知道如何使用`DISTINCT`该`RANDOM()`功能吗？以下是我有问题的查询。

```
SELECT DISTINCT
    p.id, 
    p.title
FROM
    product_filter pf
    JOIN product p ON pf.cod_product = p.cod
    JOIN filters f ON pf.cod_filter = f.cod
WHERE
    p.visible = TRUE
LIMIT 4
ORDER BY RANDOM(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T19:39:18.543

你要么做一个子查询

```
SELECT * FROM (
    SELECT DISTINCT p.cod, p.title ... JOIN... WHERE
    ) ORDER BY RANDOM() LIMIT 4; 
```

或者您尝试对这些相同的字段进行 GROUPing：

```
SELECT p.cod, p.title, MIN(RANDOM()) AS o FROM ... JOIN ...
    WHERE ... GROUP BY p.cod, p.title ORDER BY o LIMIT 4; 
```

这两个表达式中的哪一个计算得更快取决于表结构和索引；通过对 cod 和 title 进行适当的索引，子查询版本将运行得更快（cod 和 title 将从索引基数信息中获取，并且 cod 是 JOIN 所需的唯一键，因此如果您按 title、cod 和可见索引（用于WHERE），很可能根本不会访问物理表。

我不太确定第二个表达式是否也会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:48:24.850

您可以简化查询以避免先验问题：

```
SELECT p.cod, p.title
FROM   product p
WHERE  p.visible
AND    EXISTS (
    SELECT 1
    FROM   product_filter pf
    JOIN   filters f ON f.cod = pf.cod_filter
    WHERE  pf.cod_product = p.cod
    )
ORDER  BY random()
LIMIT  4; 
```

### 要点：

*   结果中只有表中的列`product`，仅检查其他表是否存在匹配行。对于这种情况，**[`EXISTS`半连接](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)**可能是最快和最简单的解决方案。使用它不会使基表中的行相乘`product`，因此您无需再次使用`DISTINCT`.

*   `LIMIT`必须在最后，之后`ORDER BY`。

*   我将 WHERE 简化 `p.visible = 't'`为`p.visible`，因为这*应该*是一个布尔列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-17T04:39:05.177

使用子查询。不要忘记表别名，`t`. `LIMIT`紧随其后`ORDER BY`。

```
 SELECT *
    FROM (SELECT DISTINCT a, b, c
          FROM datatable WHERE a = 'hello'
         ) t
    ORDER BY random()
    LIMIT 10; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:56:34.947

我认为你需要一个子查询：

```
select *
from (select DISTINCT p.cod, p.title
      from product_filter pf  join
           product p
           on pf.cod_product = p.cod
      where p.visible = 't'
     ) t
LIMIT 4
order by RANDOM() 
```

首先计算不同的值，然后进行限制。

请注意，这确实会影响性能，因为在选择您想要的内容之前，此查询对所有内容都做了不同的处理。这是否重要取决于表的大小以及您使用查询的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T18:57:00.550

```
SELECT DISTINCT U.* FROM
(

    SELECT p.cod, p.title FROM product__filter pf

      JOIN product p on pf.cod_product = p.cod
      JOIN filters f on pf.cod_filter = f.cod

    WHERE p.visible = 't' 

    ORDER BY RANDOM()

) AS U

LIMIT 4 
```

这首先执行 RANDOM，然后执行 LIMIT。

# matrix - 使用 CUDA 计算数百个小矩阵的特征值/特征向量

> ID：11401232
> 
> 赞同：14
> 
> 时间：2012-07-09T18:51:19.037
> 
> 标签：matrix, cuda, opencl, linear-algebra, numerical-methods

我有一个关于使用 CUDA 对数百个小矩阵进行特征分解的问题。

我需要同时计算数百个（例如 500 个）小（64×64）实对称矩阵的特征值和特征向量。我尝试通过使用国际象棋锦标赛排序的 Jacobi 方法来实现它（有关更多信息，请参阅[本文 (PDF)](http://saahpc.ncsa.illinois.edu/10/papers/paper_19.pdf)）。

在该算法中，每个块中定义了 32 个线程，而每个块处理一个小矩阵，32 个线程协同工作，对 32 个非对角元素进行膨胀直到收敛。但是，我对它的表现不是很满意。

我想知道我的问题在哪里有更好的算法，即许多 64×64 实对称矩阵的特征分解。我想户主的方法可能是一个更好的选择，但不确定它是否可以在 CUDA 中有效实施。网上有用的信息不多，因为大多数其他程序员更感兴趣的是使用 CUDA/OpenCL 来分解一个大矩阵而不是很多小矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:24:21.450

至少对于特征值，可以在 Cuda SDK 中找到示例

[http://www.nvidia.de/content/cudazone/cuda_sdk/Linear_Algebra.html](http://www.nvidia.de/content/cudazone/cuda_sdk/Linear_Algebra.html)

图像似乎已损坏，但样本下载仍然有效。我建议下载完整的 SDK 并查看该示例。此外，本文可能会有所帮助：

[http://docs.nvidia.com/cuda/samples/6_Advanced/eigenvalues/doc/eigenvalues.pdf](http://docs.nvidia.com/cuda/samples/6_Advanced/eigenvalues/doc/eigenvalues.pdf)

# clojure - 如何在 Clojure 中编译 ClojureScript

> ID：11401233
> 
> 赞同：4
> 
> 时间：2012-07-09T18:51:25.680
> 
> 标签：clojure, clojurescript

我想在 Clojure 中编译 ClojureScript 并且遇到了一些问题。我想做这样的事情：

```
(def x '(map (fn [n] (* n n n)) [1 2 3 4]))
(cljs->js x) 
```

where`cljs->js`返回 JavaScript 代码。我猜[Himera](http://himera.herokuapp.com/index.html)做了类似的事情（首先从字符串中读取 ClojureScript），但我对 ClojureScript 的了解还不够，无法弄清楚。

有没有简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:56:47.670

你看过 Himera 代码吗？[这里](https://github.com/fogus/himera/blob/master/src/clj/himera/server/cljs.clj)是 UI 发送的代码被编译的地方，基本上是从 clojurescript 项目中调用 cljs.compiler。请注意， Himera 可能比您要求的要复杂得多，可能您只需要让“编译”功能正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:42:15.127

一旦你整理了 clojurescript 依赖项（这是它自己的问题），那么你可以调用 clojurescript`emit`函数。这在[Clutch 项目](https://github.com/clojure-clutch/clutch/)中使用（couchdb for clojure+clojurescript）。它基本上看起来像这样：

```
(js/emit (aget doc "_id") nil) 
```

# android - 从手机访问本地主机

> ID：11401235
> 
> 赞同：8
> 
> 时间：2012-07-09T18:51:29.820
> 
> 标签：android, http, mobile, localhost

我正在使用 jquery mobile 开发移动网站，并想使用我的 android 手机浏览器对其进行测试。

我的 Windows 7 机器和安卓手机在同一个无线网络上。

我通常从我的机器访问移动网站：“ **http://localhost/index.php/doctor** ”

我尝试使用手机上的无线网络 IP 地址访问它：“ **http://192.168.1.3/index.php/doctor** ”

但是，我得到网页不可用的错误。

如何从我的 android 手机访问 localhost？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T00:22:43.140

192.168.1.3 是本地网络地址。您需要做的是获取外部 IP 地址，并将其放入电话 URL。您可以通过进入命令行并键入来执行此操作`ipconfig`，这应该会为您提供所有机器的 IP 地址，以及本地网络服务器的外部 IP。我怀疑这与您的防火墙有关。您很可能只需要为您的本地网络服务器找到正确的 IP 地址。

希望这可以帮助。

# google-api - google api javascript 客户端 Drive Api 和对电子表格的访问

> ID：11401237
> 
> 赞同：1
> 
> 时间：2012-07-09T18:51:41.483
> 
> 标签：google-api, google-drive-api, google-spreadsheet-api

如果访问电子表格 API 将支持 Google Drive API

或者它将是像我们一样的新电子表格 API

[https://developers.google.com/apis-explorer/#p/](https://developers.google.com/apis-explorer/#p/)

类似于developers.google.com/google-apps/spreadsheets/

[https://code.google.com/p/google-api-javascript-client/](https://code.google.com/p/google-api-javascript-client/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:56:29.070

[Google Drive API](http://developers.google.com/drive)允许您对 Google Drive 执行 CRUD（创建、读取、更新、删除）功能。这类似于用于 Google Docs 的 Google Documents List API，是最新的演变。要实际编辑或检索电子表格中的内容，您仍然必须使用上面列出的电子表格 API。最新版本的电子表格 api 也使用 Oath2，就像 Drive api 一样。

# php - 1个PHP文件可以连接到2个数据库吗？

> ID：11401242
> 
> 赞同：2
> 
> 时间：2012-07-09T18:52:08.653
> 
> 标签：php, mysql

我正在尝试连接到第一个数据库以提取一些信息，然后使用该信息更新第二个数据库中的表。

但是，如果我不关闭连接，第二个查询总是尝试从第一个数据库中提取。如果我确实关闭了连接，那么它会给我一个套接字错误。

我正在使用 Drupal（所以我的第一个数据库是 Drupal 数据库）。我想从其中一个表中获取一个值，并在加载 3 个不同 PHP 页面中的 1 个时将其放入我的成员信息数据库中。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T18:58:22.027

是的，您可以创建多个连接。您需要将 mysql_query 中的链接指定为第二个参数。

例子 ：

```
$link1 = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link1) {
    die('Not connected : ' . mysql_error());
}

// second foo1
$db_selected_1 = mysql_select_db('foo1', $link1);
if (!$db_selected_1) {
    die ('Can\'t use foo : ' . mysql_error());
}

$link2 = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link2) {
    die('Not connected : ' . mysql_error());
}

// select foo2
$db_selected_2 = mysql_select_db('foo2', $link2);
if (!$db_selected_2) {
    die ('Can\'t use foo : ' . mysql_error());
}

// query on first db
mysql_query('SELECT * FROM 1 WHERE 1', $link1);

// query on second db
mysql_query('SELECT * FROM 1 WHERE 1', $link2); 
```

如果两个数据库在同一台服务器上具有相同的凭据，则可以这样做：

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// select foo1
$db_selected = mysql_select_db('foo1', $link);

// query on first db
mysql_query('SELECT * FROM 1 WHERE 1', $link);

// select foo2
$db_selected = mysql_select_db('foo2', $link);

// query on second db
mysql_query('SELECT * FROM 1 WHERE 1', $link); 
```

但是，我建议您使用`mysqli_`或什至`PDO`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:53:38.987

您可以同时存储多个连接。

PHP 没有任何限制可以阻止您这样做。

如果您对特定代码有疑问，请更新问题。

# javascript - Javascript/Jquery：无法定位表中的兄弟节点

> ID：11401249
> 
> 赞同：0
> 
> 时间：2012-07-09T18:52:21.233
> 
> 标签：javascript, jquery, nodes, siblings

我有一个功能，通过单击包含在 < `thead`> 标记中的表头来隐藏/显示表。单击时表格隐藏，只剩下标题，再次单击可以取消隐藏表格。

我有多个表，并且只想使用函数，而不是为每个表编写一个。为此，我试图传递参数（this，this.lastSibling）。由于某种原因**this.lastSibling**没有针对任何对象。我已经尝试了所有我能想到的导航节点树的方法，但我无法定位 tbody。

**我的 Javascript/Jquery**

```
function ToggleTable(trigger,target){
    $(trigger).click(function(){
      $(target).toggle();
      ToggleTable(trigger,target)
    });
} 
```

**我的 HTML**

```
<table class="format2" >
    <thead onmouseover="ToggleTable(this,this.lastSibling)">
        <!--Title-->
    </thead>
    <tbody>
        <!--Cells with information in here-->
    </tbody>
    <!--Note No TFooter Tag-->
</table>

<--Other tables similar to the one above--> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:57:51.670

假设您所有的表都将具有类 format2 。试试这个：

```
$("table.format2 > thead").click(function(){
    $(this).next("tbody").toggle();
}); 
```

JSFiddle：http: [//jsfiddle.net/KcY4X/](http://jsfiddle.net/KcY4X/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:25:12.900

> 我有一个通过单击包含在`<thead>`标签中的标题来隐藏/显示表格的功能。单击时表格隐藏，只剩下标题，再次单击可以取消隐藏表格。

我迷失在你当前的代码中。但是如果你想切换 tbody 的可见性（或`<table>`标签中的最后一个子元素，你可以试试这个。

```
function ready() {

  $('table > thead')
    .each(function(e){
      $(this).siblings(':last').hide();
    })
    .click(function(e) {
      $(this).siblings(':last').toggle();
    });

}

$(ready); 
```

现场样本：[http ://bl.ocks.org/3078240](http://bl.ocks.org/3078240)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:25:14.047

如果您想尝试使用核心 JavaScript 而不是 jQuery 垫片的解决方案，这可能对您有用。这是我快速编写的一个函数，它返回作为 HTML 元素的最后一个兄弟元素（例如，不是文本节点），尽管您应该能够轻松修改它以接受 DOM 中的任何节点：

```
function getLastSibling(el) {
    var siblings, x, sib;

    siblings = el.parentNode.children;
    x = siblings.length;

    while ((sib = siblings[x - 1]) && x >= 0) {
        console.log(sib);
        console.log(sib.nodeType);
        if (sib.nodeType != 1 || sib.tagName == 'SCRIPT') {
            x--;
        } else {
            return sib;
        }
    }

    return null;
} 
```

# jquery - 如何切换可点击图像的类别

> ID：11401252
> 
> 赞同：0
> 
> 时间：2012-07-09T18:52:37.603
> 
> 标签：jquery

我们的用户有一个表格显示他们的标题。（如果重要，它们包含在数据表中）。这个想法是简单地拥有一张图片，他们可以点击它来切换是否发布。下面的代码*确实按预期更改了图像*，但*没有更改 class*。

我也尝试过 addclass/removeclass，但结果相同。我错过了一些明显的东西，还是我做错了什么？

```
<img class="title_publish" src="IsNotPublished.png">'
<img class="title_unpublish" src="IsPublished.png">

$('.title_publish').live('click', function () {
    this.src="IsPublished.png";
    this.toggleClass("title_publish");
    this.toggleClass("title_unpublish");
} );

$('.title_unpublish').live('click', function () {
    this.src="IsNotPublished.png";
    this.toggleClass="title_publish";
    this.toggleClass="title_unpublish";
} ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:54:29.800

试试这个

```
$('.title_publish').live('click', function () {
    this.src="IsPublished.png";
    $(this).toggleClass("title_publish");
    $(this).toggleClass("title_unpublish");
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:59:18.900

## 您可以在一个函数中处理这两种按钮行为。

这是你如何做到的：

首先toggleClass是一个函数，所以就当做一个；顺便说一句，它可能需要几个空格分隔的类。

其次，为了在整个代码中始终使用 jQuery，请使用`$(this).attr('src', newsrc);`更改图像的来源。我还添加了一个条件来检查是否`Not`应该将其添加到图像名称中。这是我的做法：

```
$('.title_publish, .title_unpublish').live('click', function () {
        $(this).toggleClass("title_publish title_unpublish");
        $(this).attr("src", "Is" + ($(this).hasClass('title_publish') ? '' : 'Not') + "Published.png");
    } ); 
```

使用上面的而不是您在代码中绑定的两次单击 - 这是一个始终处理两种按钮行为的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:04:04.003

如果您想在两个类（title_publish 和 title_unpublish）之间切换，您可以将切换类与这两个类一起使用。例如：

```
$(this).toggleClass('title_publish title_unpublish'); 
```

jquery 将通过单击知道需要显示哪个类。

在此处查看[演示](http://jsfiddle.net/FyPKg/16/)

# python - Python 中的 now() 和 time() 有什么区别？

> ID：11401254
> 
> 赞同：0
> 
> 时间：2012-07-09T18:52:42.403
> 
> 标签：python

我想知道 Python 中这两个函数 time.now() 和 time.time() 之间的区别。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:56:42.850

如果你的意思是`datetime.now()`和`time.time()`：

`datetime.now()`如果可能的话，会更精确。

看：

[http://docs.python.org/library/datetime.html](http://docs.python.org/library/datetime.html)

# javascript - YouTube Fancybox 未加载视频

> ID：11401256
> 
> 赞同：0
> 
> 时间：2012-07-09T18:52:47.867
> 
> 标签：javascript, jquery, youtube, fancybox, fancybox-2

我已经在网站上设置了一个 PHP 视频浏览器（检查视频 pod），当单击视频缩略图时，应该会弹出一个视频并使用 FancyBox 脚本播放，但视频只是没有加载。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:16:36.427

您正在使用 fancybox v2.x 和 fancybox v1.3.x 的选项（它们彼此不兼容。）

你最好的选择是摆脱这个脚本：

```
<script type="text/javascript">
    $(".videobox").click(function () {
        $.fancybox({
            'padding': 0,
            'autoScale': false,
            'transitionIn': 'none',
            'transitionOut': 'none',
            'title': this.title,
            'width': 680,
            'height': 495,
            'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type': 'swf',
            'swf': {
                'wmode': 'transparent',
                'allowfullscreen': 'true'
            }
        });
        return false;
    });
</script> 
```

试试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".videobox").fancybox({
            width: 680,
            height: 495,
            type: "iframe"
        }); // fancybox
    }); // ready
</script> 
```

请注意我们正在使用`type : "iframe"`，因为您使用的是 youtube`embed`模式

**旁注**：当您实际需要单个实例（最好是最新版本）以避免意外错误时，您正在加载两个版本的 jQuery（1.7.1 和 1.7.2）。

# android - GCMBroadcastReceiver 缺少清单中声明的 WAKE_LOCK 权限

> ID：11401264
> 
> 赞同：3
> 
> 时间：2012-07-09T18:53:16.797
> 
> 标签：android, android-manifest, google-cloud-messaging, android-permissions

我已经尽可能接近 Google 的示例来实现 GCM，但默认的 GCMBroadcastReceiver 由于缺少 WAKE_LOCK 权限而抛出 SecurityException。不过，我在我的清单中需要它，所以 AFAIK 它应该在运行时拥有该权限。这是我的清单的相关部分：

```
<permission
    android:name="PACKAGENAME.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="PACKAGENAME.permission.C2D_MESSAGE" />

<permission
    android:name="android.permission.WAKE_LOCK"
    android:protectionLevel="signatureOrSystem" />

<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<application
    android:name=".App"
    android:icon="@drawable/app"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
    <service android:name=".GCMIntentService" />

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="PACKAGENAME" />
        </intent-filter>
    </receiver> 
```

我在日志文件中看到的异常是：

```
07-09 13:32:58.238: E/AndroidRuntime(2723): java.lang.RuntimeException: Unable to start receiver com.google.android.gcm.GCMBroadcastReceiver: java.lang.SecurityException: Neither user 10072 nor current process has android.permission.WAKE_LOCK.
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2126)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.Looper.loop(Looper.java:137)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at java.lang.reflect.Method.invoke(Method.java:511)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at dalvik.system.NativeStart.main(Native Method)
07-09 13:32:58.238: E/AndroidRuntime(2723): Caused by: java.lang.SecurityException: Neither user 10072 nor current process has android.permission.WAKE_LOCK.
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.Parcel.readException(Parcel.java:1327)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.Parcel.readException(Parcel.java:1281)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.IPowerManager$Stub$Proxy.acquireWakeLock(IPowerManager.java:279)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.PowerManager$WakeLock.acquireLocked(PowerManager.java:285)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.os.PowerManager$WakeLock.acquire(PowerManager.java:264)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at com.google.android.gcm.GCMBaseIntentService.runIntentInService(GCMBaseIntentService.java:235)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at com.google.android.gcm.GCMBroadcastReceiver.onReceive(GCMBroadcastReceiver.java:46)
07-09 13:32:58.238: E/AndroidRuntime(2723):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2119)
07-09 13:32:58.238: E/AndroidRuntime(2723):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:37:15.227

我没有在我注册接收消息的活动的 onDestroy() 方法中调用 GCMRegistrar.onDestroy()。由于某种原因，导致它抱怨没有 WAKE_LOCK，但仅在 4.0.4 设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T11:22:00.580

你应该使用：

```
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

代替：

```
<permission
    android:name="android.permission.WAKE_LOCK"
    android:protectionLevel="signatureOrSystem" /> 
```

# tridion - CurrentWorkItem.ID 在工作流脚本编辑器中是否正确？

> ID：11401266
> 
> 赞同：-1
> 
> 时间：2012-07-09T18:53:24.807
> 
> 标签：tridion, tridion-2011

我正在使用 Tridion 2011 SP1，并且我正在创建工作流程，例如开始-->创建-->审阅-->发布--停止。

我创建并注册了类库，并使用 VBscript（WF 选项卡的脚本编辑器）调用 C# 方法，如下所示。

```
Option Explicit
Dim workflowHandler
Set workflowHandler= CreateObject("CoreComponentWorkflow.WorkflowHandler")
If Not workflowHandler Is Nothing Then
Call workflowHandler.PublishComponent(Cstr(CurrentWorkItem.ID))      
     FinishActivity "Published to WIP"
End If
Set workflowHandler= Nothing 
```

上面的代码是否正确？我确信我能够使用下面的行创建对象。

```
Set workflowHandler= CreateObject("CoreComponentWorkflow.WorkflowHandler") 
```

目前我仅使用 C# 代码发布当前项目，正在调用 C# 函数，如下所示。

```
Call workflowHandler.PublishComponent(Cstr(CurrentWorkItem.ID)) 
```

发布项目后，我正在使用以下完成活动。

```
FinishActivity "Published to WIP" 
```

我通过硬编码当前工作项直接在服务器中检查了上面的代码，它工作正常。但是当我将相同的代码放在 vbscript 编辑器中时，该项目没有发布。

有人可以对此提出建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:57:54.973

When you hardcode you might be adding the TCM ID directly so it is working properly, which means that `CurrentWorkItem.ID` is not the correct API call to get the Component ID. See Igor comment below to get the tcm id.

# grails - 如何将包中的服务导入 Grails 中的 gsp 文件

> ID：11401274
> 
> 赞同：0
> 
> 时间：2012-07-09T18:54:03.077
> 
> 标签：grails, service, import, gsp

> **可能重复：**
> [从 gsp 调用 grails 服务时出现问题](https://stackoverflow.com/questions/2510929/problem-calling-grails-service-from-gsp)

我有一个名为 HeaderService 的服务，它位于名为 Portfolio 的项目中的一个名为 application 的包中。如何将此服务导入 gsp？我试过了

```
<%@ page import="com.portfolio.application.HeaderService" %> 
```

和许多变化，但它不起作用。有人有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:34:44.450

`applicationContext`您可以通过视图中隐含的对象访问您的服务。例子：

```
<%= applicationContext.headerService.doSomething() %> 
```

# r - If else 语句比较 0 或 NA

> ID：11401276
> 
> 赞同：1
> 
> 时间：2012-07-09T18:54:15.237
> 
> 标签：r, if-statement

我在数据框 tmp 中有一个元素，它可能包含数字、0 或 NA。如果该元素既不是 0 也不是 NA，我希望发生一些事情。否则，什么都不会发生。我想它看起来像这样：

```
 if ( tmp[2, 19] != (0 || NA) ){  
              do something
              } 
```

我收到此错误： if (tmp[2, 19] == (0 || NA)) { 中的错误：需要 TRUE/FALSE 的缺失值。我不知道在 R 中是否无法将某些内容与 int 和 string 进行比较，或者我是否只是使用了 OR 运算符错误。我在不同的情况下尝试了不同的变体，但无法确定问题所在。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:33:26.243

正如@GSee 在评论中所说，您需要使用`is.na`：

```
if(tmp[2, 19] != 0 || is.na(tmp[2, 19])) {  
  # do stuff
} 
```

`?"if"`您可以通过阅读和自己发现这一点`?NA`。

# objective-c - 在运行循环中调试异步 iOS 代码？

> ID：11401278
> 
> 赞同：1
> 
> 时间：2012-07-09T18:54:17.977
> 
> 标签：objective-c, ios, debugging, asynchronous

我有一个使用 NSRunLoop 进行大量异步 Web 交互的程序。我现在有一个“发送到已释放实例的消息”错误，但由于程序是异步的，我不知道错误发生在哪里，因为我没有得到堆栈跟踪。

是否有任何提示或工具有助于解决此问题？我可以抛出很多调试语句，但这似乎不是正确的答案。

# ios - 在 AudioQueue 的缓冲区之间单击/轻敲

> ID：11401279
> 
> 赞同：3
> 
> 时间：2012-07-09T18:54:21.520
> 
> 标签：ios, audio, audioqueue

正如您从代码中看到的那样，在我的回调中，我提取了音频数据并将其放入 NSData 数据中，然后将其发送到另一个类以将其上传到服务器。这一切都有效，这意味着服务器接收并播放音频数据。但是，缓冲区之间会发出咔哒声或敲击声。我希望有人可以告诉我是什么原因造成的以及如何解决它。我已经阅读了其他相关的帖子，但是它们似乎都指的是只使用 1 个缓冲区，并且添加更多是解决方法，但我使用的是 3 个缓冲区并尝试调整没有修复它的数字

AQRecorder.mm

```
#include "AQRecorder.h"
RestClient * restClient;
NSData* data;

// ____________________________________________________________________________________
// Determine the size, in bytes, of a buffer necessary to represent the supplied number
// of seconds of audio data.
int AQRecorder::ComputeRecordBufferSize(const AudioStreamBasicDescription *format, float seconds)
{
    int packets, frames, bytes = 0;
    try {
        frames = (int)ceil(seconds * format->mSampleRate);

        if (format->mBytesPerFrame > 0)
            bytes = frames * format->mBytesPerFrame;
        else {
            UInt32 maxPacketSize;
            if (format->mBytesPerPacket > 0)
                maxPacketSize = format->mBytesPerPacket;    // constant packet size
            else {
                UInt32 propertySize = sizeof(maxPacketSize);
                XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_MaximumOutputPacketSize, &maxPacketSize,
                                                 &propertySize), "couldn't get queue's maximum output packet size");
            }
            if (format->mFramesPerPacket > 0)
                packets = frames / format->mFramesPerPacket;
            else
                packets = frames;   // worst-case scenario: 1 frame in a packet
            if (packets == 0)       // sanity check
                packets = 1;
            bytes = packets * maxPacketSize;
        }
    } catch (CAXException e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
        return 0;
    }   
    return bytes;
}

// ____________________________________________________________________________________
// AudioQueue callback function, called when an input buffers has been filled.
void AQRecorder::MyInputBufferHandler(  void *                              inUserData,
                                        AudioQueueRef                       inAQ,
                                        AudioQueueBufferRef                 inBuffer,
                                        const AudioTimeStamp *              inStartTime,
                                        UInt32                              inNumPackets,
                                        const AudioStreamPacketDescription* inPacketDesc)
{
    AQRecorder *aqr = (AQRecorder *)inUserData;

    try {
        if (inNumPackets > 0) {
            // write packets to file
//          XThrowIfError(AudioFileWritePackets(aqr->mRecordFile, FALSE, inBuffer->mAudioDataByteSize,
//                                           inPacketDesc, aqr->mRecordPacket, &inNumPackets, inBuffer->mAudioData),
//                     "AudioFileWritePackets failed");
            aqr->mRecordPacket += inNumPackets;

//            int numBytes = inBuffer->mAudioDataByteSize;       
//            SInt8 *testBuffer = (SInt8*)inBuffer->mAudioData;
//            
//            for (int i=0; i < numBytes; i++)
//            {
//                SInt8 currentData = testBuffer[i];
//                printf("Current data in testbuffer is %d", currentData);
//                
//                NSData * temp = [NSData dataWithBytes:currentData length:sizeof(currentData)];
//            }

            data=[[NSData dataWithBytes:inBuffer->mAudioData length:inBuffer->mAudioDataByteSize]retain];

            [restClient uploadAudioData:data url:nil];

        }

        // if we're not stopping, re-enqueue the buffer so that it gets filled again
        if (aqr->IsRunning())
            XThrowIfError(AudioQueueEnqueueBuffer(inAQ, inBuffer, 0, NULL), "AudioQueueEnqueueBuffer failed");
    } catch (CAXException e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
    }

}

AQRecorder::AQRecorder()
{
    mIsRunning = false;
    mRecordPacket = 0;

    data = [[NSData alloc]init];
    restClient = [[RestClient sharedManager]retain];
}

AQRecorder::~AQRecorder()
{
    AudioQueueDispose(mQueue, TRUE);
    AudioFileClose(mRecordFile);

    if (mFileName){
     CFRelease(mFileName);   
    }

    [restClient release];
    [data release];
}

// ____________________________________________________________________________________
// Copy a queue's encoder's magic cookie to an audio file.
void AQRecorder::CopyEncoderCookieToFile()
{
    UInt32 propertySize;
    // get the magic cookie, if any, from the converter     
    OSStatus err = AudioQueueGetPropertySize(mQueue, kAudioQueueProperty_MagicCookie, &propertySize);

    // we can get a noErr result and also a propertySize == 0
    // -- if the file format does support magic cookies, but this file doesn't have one.
    if (err == noErr && propertySize > 0) {
        Byte *magicCookie = new Byte[propertySize];
        UInt32 magicCookieSize;
        XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_MagicCookie, magicCookie, &propertySize), "get audio converter's magic cookie");
        magicCookieSize = propertySize; // the converter lies and tell us the wrong size

        // now set the magic cookie on the output file
        UInt32 willEatTheCookie = false;
        // the converter wants to give us one; will the file take it?
        err = AudioFileGetPropertyInfo(mRecordFile, kAudioFilePropertyMagicCookieData, NULL, &willEatTheCookie);
        if (err == noErr && willEatTheCookie) {
            err = AudioFileSetProperty(mRecordFile, kAudioFilePropertyMagicCookieData, magicCookieSize, magicCookie);
            XThrowIfError(err, "set audio file's magic cookie");
        }
        delete[] magicCookie;
    }
}

void AQRecorder::SetupAudioFormat(UInt32 inFormatID)
{
    memset(&mRecordFormat, 0, sizeof(mRecordFormat));

    UInt32 size = sizeof(mRecordFormat.mSampleRate);
    XThrowIfError(AudioSessionGetProperty(  kAudioSessionProperty_CurrentHardwareSampleRate,
                                        &size, 
                                        &mRecordFormat.mSampleRate), "couldn't get hardware sample rate");

    //override samplearate to 8k from device sample rate

    mRecordFormat.mSampleRate = 8000.0;

    size = sizeof(mRecordFormat.mChannelsPerFrame);
    XThrowIfError(AudioSessionGetProperty(  kAudioSessionProperty_CurrentHardwareInputNumberChannels, 
                                        &size, 
                                        &mRecordFormat.mChannelsPerFrame), "couldn't get input channel count");

//    mRecordFormat.mChannelsPerFrame = 1;

    mRecordFormat.mFormatID = inFormatID;
    if (inFormatID == kAudioFormatLinearPCM)
    {
        // if we want pcm, default to signed 16-bit little-endian
        mRecordFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;
        mRecordFormat.mBitsPerChannel = 16;
        mRecordFormat.mBytesPerPacket = mRecordFormat.mBytesPerFrame = (mRecordFormat.mBitsPerChannel / 8) * mRecordFormat.mChannelsPerFrame;
        mRecordFormat.mFramesPerPacket = 1;
    }

    if (inFormatID == kAudioFormatULaw) {
        NSLog(@"is ulaw");
        mRecordFormat.mSampleRate = 8000.0;
        mRecordFormat.mFormatFlags = 0;
        mRecordFormat.mFramesPerPacket = 1;
        mRecordFormat.mChannelsPerFrame = 1;
        mRecordFormat.mBitsPerChannel = 8;
        mRecordFormat.mBytesPerPacket = 1;
        mRecordFormat.mBytesPerFrame = 1;
    }
}

NSString * GetDocumentDirectory(void)
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
}

void AQRecorder::StartRecord(CFStringRef inRecordFile)
{
    int i, bufferByteSize;
    UInt32 size;
    CFURLRef url;

    try {       
        mFileName = CFStringCreateCopy(kCFAllocatorDefault, inRecordFile);

        // specify the recording format
        SetupAudioFormat(kAudioFormatULaw /*kAudioFormatLinearPCM*/);

        // create the queue
        XThrowIfError(AudioQueueNewInput(
                                      &mRecordFormat,
                                      MyInputBufferHandler,
                                      this /* userData */,
                                      NULL /* run loop */, NULL /* run loop mode */,
                                      0 /* flags */, &mQueue), "AudioQueueNewInput failed");

        // get the record format back from the queue's audio converter --
        // the file may require a more specific stream description than was necessary to create the encoder.
        mRecordPacket = 0;

        size = sizeof(mRecordFormat);
        XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_StreamDescription,  
                                         &mRecordFormat, &size), "couldn't get queue's format");

        NSString *basePath = GetDocumentDirectory();
        NSString *recordFile = [basePath /*NSTemporaryDirectory()*/ stringByAppendingPathComponent: (NSString*)inRecordFile];   

        url = CFURLCreateWithString(kCFAllocatorDefault, (CFStringRef)recordFile, NULL);

        // create the audio file
        XThrowIfError(AudioFileCreateWithURL(url, kAudioFileCAFType, &mRecordFormat, kAudioFileFlags_EraseFile,
                                          &mRecordFile), "AudioFileCreateWithURL failed");
        CFRelease(url);

        // copy the cookie first to give the file object as much info as we can about the data going in
        // not necessary for pcm, but required for some compressed audio
        CopyEncoderCookieToFile();

        // allocate and enqueue buffers
        bufferByteSize = ComputeRecordBufferSize(&mRecordFormat, kBufferDurationSeconds);   // enough bytes for half a second
        for (i = 0; i < kNumberRecordBuffers; ++i) {
            XThrowIfError(AudioQueueAllocateBuffer(mQueue, bufferByteSize, &mBuffers[i]),
                       "AudioQueueAllocateBuffer failed");
            XThrowIfError(AudioQueueEnqueueBuffer(mQueue, mBuffers[i], 0, NULL),
                       "AudioQueueEnqueueBuffer failed");
        }
        // start the queue
        mIsRunning = true;
        XThrowIfError(AudioQueueStart(mQueue, NULL), "AudioQueueStart failed");
    }
    catch (CAXException &e) {
        char buf[256];
        fprintf(stderr, "Error: %s (%s)\n", e.mOperation, e.FormatError(buf));
    }
    catch (...) {
        fprintf(stderr, "An unknown error occurred\n");
    }   

}

void AQRecorder::StopRecord()
{
    // end recording
    mIsRunning = false;
//    XThrowIfError(AudioQueueReset(mQueue), "AudioQueueStop failed");  
    XThrowIfError(AudioQueueStop(mQueue, true), "AudioQueueStop failed");   
    // a codec may update its cookie at the end of an encoding session, so reapply it to the file now
    CopyEncoderCookieToFile();
    if (mFileName)
    {
        CFRelease(mFileName);
        mFileName = NULL;
    }
    AudioQueueDispose(mQueue, true);
    AudioFileClose(mRecordFile);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:27:31.757

我将我`#define kBufferDurationSeconds`的从 .5 更改为 5.0，虽然点击仍然存在，但它不那么明显了。
请如果您有建议/答案仍然发布，因为这不是一个修复，只是一个比以前更好的解决方法

在将数据发送到服务器之前，我还尝试多次将数据附加到数据中。这似乎也有帮助。

# numpy - 等间距数据的 ND 插值

> ID：11401281
> 
> 赞同：0
> 
> 时间：2012-07-09T18:54:25.760
> 
> 标签：numpy, scipy

我正在尝试复制 Scipy Cookbook 功能：

```
from scipy import ogrid, sin, mgrid, ndimage, array
x,y = ogrid[-1:1:5j,-1:1:5j]
fvals = sin(x)*sin(y)
newx,newy = mgrid[-1:1:100j,-1:1:100j]
x0 = x[0,0]
y0 = y[0,0]
dx = x[1,0] - x0
dy = y[0,1] - y0
ivals = (newx - x0)/dx
jvals = (newy - y0)/dy
coords = array([ivals, jvals])
newf = ndimage.map_coordinates(fvals, coords) 
```

通过使用我自己的功能，该功能必须适用于许多场景

```
import scipy
import numpy as np
"""N-D interpolation for equally-spaced data"""                                         
x = np.c_[plist['modx']]                                                                
y = np.transpose(np.c_[plist['mody']])                                                  
pdb.set_trace()                                                                         
#newx,newy = np.meshgrid(plist['newx'],plist['newy'])                                   
newx,newy = scipy.mgrid[plist['modx'][0]:plist['modx'][-1]:-plist['remapto'],               
                     plist['mody'][0]:plist['mody'][-1]:-plist['remapto']]                                                                                        
x0 = x[0,0]                                                                             
y0 = y[0,0]                                                                             
dx = x[1,0] - x0                                                                        
dy = y[0,1] - y0                                                                        
ivals = (newx - x0)/dx                                                                  
jvals = (newy - y0)/dy                                                                  
coords = scipy.array([ivals, jvals])                                                    
for i in np.arange(ivals.shape[0]):                                                     
    nvals[i] = scipy.ndimage.map_coordinates(ivals[i], coords) 
```

我很难让这段代码正常工作。问题区域是： 1.) 重新创建此行：newx,newy = mgrid[-1:1:100j,-1:1:100j]。就我而言，我有一个带有矢量形式网格的字典。我尝试使用 np.meshgrid 重新创建此行，但随后在 coords = scipy.array([ivals, jvals]) 行上出现错误。我正在寻找一些帮助来重新创建此 Cookbook 功能并使其更具动态性，非常感谢任何帮助。

/米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:39:57.623

您应该查看[`map_coordinates`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html). 我看不到您尝试插入的实际数据在代码中的位置。我的意思是，大概你有一些数据`input`是`x`and的函数`y`；即`input = f(x,y)`你想要插值。在您展示的第一个示例中，这是数组`fvals`。这应该是你的第一个论点`map_coordinates`。

例如，如果您尝试插入的数据是`input`，它应该是 shape 的二维数组`(len(x),len(y))`，那么插入的数据将是：

```
interpolated_data = map_coordinates(input, coords) 
```

# java - 编译器问题

> ID：11401284
> 
> 赞同：0
> 
> 时间：2012-07-09T18:54:43.010
> 
> 标签：java, swing, compiler-errors

我在开始开发的 Java 程序中遇到了一些问题。这将是哈利波特名声的 Honeydukes Candy Store 的在线订购系统，并且将是两个独立的程序。客户端程序将在 Swing 中，并接受订单和所有其他内容，并在下订单时将其发送到服务器程序。服务器程序将明显不那么漂亮，它的目标是将订单写入文本文件，然后再为一切顺利的客户端程序开绿灯。

对于客户端程序，我想要三个面板，主面板包含另外两个。左侧是 invntryPanel，包含一个包含商店库存的 JList。右侧将保存 infoPanel，它使用 CardLayout 在各种面板之间切换，使用 JList 中当前选择的项目来确定要显示哪个面板。信息面板也将是用户选择希望购买的数量的地方。

当用户完成订单时，可以点击一个我还没有完全确定位置的按钮，它会打开一个单独的窗口，询问一般信息（姓名等），并显示他们的总数。最后单击该窗口上的按钮会将订单发送到服务器程序，客户端应用程序将在收到来自服务器程序的请求已通过的确认后关闭。

我已经开始了，但是编译器今天似乎心情不好。我究竟做错了什么？

对于这是一个以自我为中心的问题，我深表歉意，但我只是不确定还能去哪里。我检查了多个其他资源，我的代码似乎是有序的，但显然不是。

先感谢您。

来源：

```
import javax.swing.*;
import java.util.*;
import java.awt.*;

public class ClientApp extends JFrame
{
    public static void main(String[] args)
    {
        new ClientApp();
    }

    public ClientApp()
    {
        this.setSize(320,200);
        this.setTitle("Honeydukes Candy Order");
        this.setDefaultCloseOperation(
            JFrame.EXIT_ON_CLOSE);

        ButtonListener bl = new ButtonListener();

        JPanel mainPanel = new JPanel();
        JPanel infoPanel = new JPanel(new CardLayout());
        JPanel invntryPanel = new JPanel();

        String[] candy = {"Acid Pops", "Bat's Blood Soup",
                          "Bertie Bott's Every Flavour Beans",
                          "Blood-flavoured Lollipops",
                          "Cauldron Cakes", "Charm Choc",
                          "Chocoballs", "Chocolate Cauldrons",
                          "Chocolate Frogs", "Chocolate Skeletons",
                          "Chocolate Wands", "Choco-Loco", "Cockroach Clusters",
                          "Nougat", "Crystallised Pineapple",
                          "Drooble's Best Blowing Gum", "Exploding Bonbons",
                          "Toffees", "Fizzing Whizzbees",
                          "Fudge Flies", "Ice Mice",
                          "Jelly Slugs", "Liquourice Wands",
                          "Pepper Imps", "Peppermint Toads",
                          "Pink Coconut Ice", "Pixie Puffs",
                          "Pumpkin Fizz", "Salt Water Taffy",
                          "Shock-o-Choc", "Skeletal Sweets",
                          "Splindle's Lick'O'Rish Spiders",
                          "Sugar Quills", "Sugared Butterfly Wings",
                          "Toothflossing Stringmints", "Tooth-Splintering Strongmints",
                          "Treacle Fudge", "Chocolates", "Wizochoc"};
        JList candyList = new JList(candy);
        candyList.setVisibleRowCount(candy.length);
        candyList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        JScrollPane scroll = new JScrollPane(candyList);
        invntryPanel.add(scroll);
        mainPanel.add(invntryPanel);
        this.setVisible(true);
    }
} 
```

错误：

```
ClientApp.java:20: error: cannot find symbol
                BasicButtonListener bl = new BasicButtonListener();
                ^
  symbol:   class BasicButtonListener
  location: class ClientApp
ClientApp.java:20: error: cannot find symbol
                BasicButtonListener bl = new BasicButtonListener();
                                             ^
  symbol:   class BasicButtonListener
  location: class ClientApp
Note: ClientApp.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
2 errors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:56:20.297

如何开始：

```
String[] candy = new String[38];
String[] candy = {"Acid Pops", "Bat's Blood Soup", /* ... */ }; 
```

您试图在同一范围内两次声明相同的变量。你不能那样做。只需摆脱第一个声明 - 第二个就可以了。

（提示：两次摆脱数字 38 的硬编码。`candy.length`如果您想知道数组有多少元素，请使用...）

编辑：现在我们已经看到编译器错误，您还需要：

*   根据 thegrinner 的回答修复数组元素
*   弄清楚你的意思`ButtonListener`。你的意思是[`BasicButtonListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/basic/BasicButtonListener.html)改用，也许？
*   声明`candyList`变量（目前你只是想分配给它）
*   添加导入`java.awt.CardLayout`

您给出的错误相当清楚-除了 的多个问题之外，这些问题`candyList`都可以通过您缺少声明的事实来解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:07:35.440

你的糖果数组后面缺少一个逗号`"Pixie Puffs"`。我相信这使编译器相信该行应该在那里结束（因此错误期望 a `}`）。这也导致了表达式错误的非法开始。

# vb.net - 使用 HtmlAgilityPack 查找电影链接

> ID：11401294
> 
> 赞同：0
> 
> 时间：2012-07-09T18:55:46.870
> 
> 标签：vb.net, html-agility-pack

嘿，我在这里使用此代码：

```
'WebBrowser1.Navigate("http://0000.org/icampus")

'Do Until Me.WebBrowser1.ReadyState = WebBrowserReadyState.Complete
'    Application.DoEvents()
'Loop

'Dim tmpHTML As String = WebBrowser1.Document.Body.InnerHtml
Dim theWidth As Integer = 500 '1920
Dim theHeight As Integer = 500 '1080
Dim doc As New HtmlDocument()

doc.Load("C:\kathryn\fp.html")
'doc.LoadHtml(tmpHTML)

Dim theVidURL As String = doc.DocumentNode.SelectSingleNode("//OBJECT/PARAM[@NAME='Movie']").Attributes("VALUE").Value 
```

为了在这个 HTML 源中找到电影的 URL：

```
<DIV id=player-wrapper>
<DIV id=lcm_video>
<OBJECT id=player codeBase="http://0000.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" classid=clsid:d27cdb6e-ae6d-11cf-96b8-444553540000 width=480 align=middle height=320 VIEWASTEXT><PARAM NAME="_cx" VALUE="12700"><PARAM NAME="_cy" VALUE="8466"><PARAM NAME="FlashVars" VALUE=""><PARAM NAME="Movie" VALUE="http://0000.lightcastmedia.com/lcplayer_flash112fix.swf?autoStart=1&amp;hidecontrols=1&amp;&amp;noresize=1&amp;file=http%3A%2F%2F%2Fedge2%2F3157%2F070712b&amp;rtmppath=rtmp%3A//chi02.live.lightcastmedia.com%3A1935/mc/_definst_&amp;rtmpfile=fvc/3157/070712b&amp;sec=447"><PARAM NAME="Src" VALUE="http://0000.lightcastmedia.com/lcplayer_flash112fix.swf?autoStart=1&amp;hidecontrols=1&amp;&amp;noresize=1&amp;file=http%3A%2F%2F%2Fedge2%2F3157%2F070712b&amp;rtmppath=rtmp%3A//chi02.live.lightcastmedia.com%3A1935/mc/_definst_&amp;rtmpfile=fvc/3157/070712b&amp;sec=447"><PARAM NAME="WMode" VALUE="Window"><PARAM NAME="Play" VALUE="-1"><PARAM NAME="Loop" VALUE="-1"><PARAM NAME="Quality" VALUE="High"><PARAM NAME="SAlign" VALUE=""><PARAM NAME="Menu" VALUE="-1"><PARAM NAME="Base" VALUE=""><PARAM NAME="AllowScriptAccess" VALUE="sameDomain"><PARAM NAME="Scale" VALUE="ShowAll"><PARAM NAME="DeviceFont" VALUE="0"><PARAM NAME="EmbedMovie" VALUE="0"><PARAM NAME="BGColor" VALUE="000000"><PARAM NAME="SWRemote" VALUE=""><PARAM NAME="MovieData" VALUE=""><PARAM NAME="SeamlessTabbing" VALUE="1"><PARAM NAME="Profile" VALUE="0"><PARAM NAME="ProfileAddress" VALUE=""><PARAM NAME="ProfilePort" VALUE="0"><PARAM NAME="AllowNetworking" VALUE="all"><PARAM NAME="AllowFullScreen" VALUE="true"><PARAM NAME="AllowFullScreenInteractive" VALUE="false">

        <embed src="http://0000.lightcastmedia.com/lcplayer_flash112fix.swf?autoStart=1&hidecontrols=1&&noresize=1&file=http%3A%2F%2F%2Fedge2%2F3157%2F070712b&rtmppath=rtmp%3A//chi02.live.lightcastmedia.com%3A1935/mc/_definst_&rtmpfile=fvc/3157/070712b&sec=447" quality="best" FlashVars="" bgcolor="#000000" width="480" height="320" name="player" align="middle" allowScriptAccess="sameDomain"  allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
    </OBJECT></DIV> 
```

但是由于某种原因，我从**theVidURL**返回了**Nothing**？

 **任何帮助都会很棒！

**更新**

我刚刚结束了使用这段代码来查看 HTML：

```
Dim theElementCollection As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("PARAM")
For Each curElement As HtmlElement In theElementCollection
    If InStr(curElement.GetAttribute("value"), "lightcastmedia.com") <> 0 Then
        tmpMovieURL = curElement.GetAttribute("value")
        Exit For
    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:16:03.187

那么这是你的问题，你加载的html文件错误。该`LoadHtml()`方法用于将包含 HTML 的字符串解析为`HtmlDocument`. 如果你想打开一个 HTML 文件，你可以使用这个`Load()`方法。

```
Dim doc As New HtmlDocument
doc.Load("C:\kathryn\fp.html") ' load the file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:15:12.057

我刚刚结束了使用这段代码来查看 HTML：

```
Dim theElementCollection As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("PARAM")
For Each curElement As HtmlElement In theElementCollection
    If InStr(curElement.GetAttribute("value"), "lightcastmedia.com") <> 0 Then
        tmpMovieURL = curElement.GetAttribute("value")
        Exit For
    End If
Next 
```**

# jquery - GMaps API v3 - jQuery - 数组问题

> ID：11401299
> 
> 赞同：1
> 
> 时间：2012-07-09T18:56:02.437
> 
> 标签：jquery, json, google-maps-api-3

我正在我的网页上构建谷歌地图。这张地图有一些标记。这些标记是使用 json 文件的信息创建的。这一切都很好。但是当我想使用所有标记的列表时，这个 list.length 在其他函数中始终为 0。只有在我将标记放入列表的函数中，列表才不是空的。

我对我的代码做了一个提琴手，所以对你们来说更容易看到。

问题出在数组“位置”和功能按钮上。按钮功能中的警报显示为 0。我不知道为什么..

提前致谢！

这是我的[小提琴](http://jsfiddle.net/cJxcV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:06:59.690

这个想法很简单。您正在调用`Ajax` **asyncronously**。当您尝试提醒`positions.length`值时，您的值`Ajax`尚未交付，并且您的`position`数组未填充值并且为空（`.length=0`）。将`buttons()`call 放在回调中：

```
loadMarkers();
//buttons();
//     |    //.............
//     |    //.............
//     |    //.............
            polyline.setMap(map);
//     ---> 
            buttons();
      }); 
```

# database - 将 SQL Server 2012 发布者复制到 2008 订阅者？

> ID：11401302
> 
> 赞同：1
> 
> 时间：2012-07-09T18:56:21.713
> 
> 标签：database, sql-server-2008, replication, sql-server-2012

微软不会让你拥有 SQL 2012 的网络版，就像他们在 2008 年所做的那样。但 2012 标准版对我的需求来说太过分了。

我能否拥有运行 2012 Enterprise（或 Standard）的数据库服务器并使用事务复制在 2008 Web Edition 机器上填充数据？当然，这只是单向复制。

谢谢...试图在这里节省一大笔许可费用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:42:34.130

是的，复制是可能的，仅作为订阅者。请参阅[本文](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.100%29.aspx)`Replication`中的矩阵。

**基本上，SQL Server 2008 Web 版仅**支持订阅者：

1.  合并复制。
2.  事务复制。
3.  快照复制。

# asp.net - Infragistics webpercenteditor 控制不一致

> ID：11401303
> 
> 赞同：0
> 
> 时间：2012-07-09T18:56:23.623
> 
> 标签：asp.net, infragistics

**这是我在两个不同的 Web 应用程序中的代码：**

```
<ig:WebPercentEditor MaxValue="100" ID="InterchangePlus" 
    runat="server" ValueText="0" MinDecimalPlaces="2" Width="85px">
</ig:WebPercentEditor> 
```

他们都将数据保存到同一个地方并从同一个地方检索它。一个 Web 应用程序中的控件将信息显示为 1.75%，另一个将其显示为 175.00%。同样，两个 Web 应用程序中使用了相同的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:33:01.360

似乎在 web.config 中应用了一个主题，在一个 Web 应用程序中设置了 DisplayFactor="1"，但另一个 Web 应用程序中没有 asp.net 主题

# ios - 物理键盘会阻止 inputAccessoryView 出现吗？

> ID：11401308
> 
> 赞同：3
> 
> 时间：2012-07-09T18:56:48.127
> 
> 标签：ios

我已经为我的应用程序中的某些 UITextFields 添加了一个 inputAccessoryView 到 iOS 键盘。这个附件视图为用户提供了基本的功能（一些按钮在我的应用程序的其他地方没有显示）。我的理解（这可能是完全错误的）是，如果物理（蓝牙）键盘可用，iOS 不会用软件键盘弄乱屏幕。如果是这种情况，使用物理键盘的应用程序的用户将缺少一些功能，我需要考虑到这一点。所以第一个问题是，这是我必须担心的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:51:31.133

如果使用物理键盘，输入附件视图应显示在屏幕底部，因此他们仍然能够访问该功能。如果您想在模拟器中尝试此操作，请选中菜单`Simulate Hardware Keyboard`下的`Hardware`选项。

# iphone - 正确继承 EKEvent 类

> ID：11401309
> 
> 赞同：2
> 
> 时间：2012-07-09T18:56:50.160
> 
> 标签：iphone, objective-c, ios, ios4, eventkit

我在对类进行子类化时遇到了一些麻烦`EKEvent`。场景是这样的，我使用 Web 服务从外部数据库中提取所有事件，因此所有事件都带有一个 ID。然后我想将这些事件放入设备日历中并稍后检索它们。问题是，当我检索事件时，我需要它与服务器上的事件具有相同的 id，以便我可以快速查找以获取有关事件的其他信息。

我知道 的`identifier`属性`EKEvent`是只读的，因此我想创建该类的子类，我可以在其中添加一个称为类似的附加属性`myid`并将事件的 id（来自服务器的）存储在其中事件存储。我试图创建一个子类，一切似乎都可以正常工作并编译，但是在运行时，当我尝试设置我在子类中添加的额外 eventid 比例时出现错误，错误消息是：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[EKEvent setEventId:]: unrecognized selector sent to instance 0x83c0770' 
```

这是我用来从我的`EKEvent`子类创建事件的一些测试代码：

```
 SectureEvent *myEvent  = (SectureEvent*)[EKEvent eventWithEventStore:eventDB];
 myEvent.title     = self.evento;
 myEvent.startDate = [[NSDate alloc] init];
 myEvent.startDate = [NSDate date];
 myEvent.endDate   = [[NSDate alloc] init];
 myEvent.endDate   = [[NSDate alloc] init];
 myEvent.allDay = YES;
 myEvent.eventId = self.eventId; 
```

错误发生在最后一行`myEvent.eventId = self.eventId;` 并且应用程序崩溃。所以我的问题本质上是我是否可以有效地对课程进行子`EKEvent`类化，如果可以，我在这里做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T19:40:27.550

`EKEvent`并不意味着被子类化。Event Kit 对象用于表示数据库记录。创建一个 的 子类`EKEvent`不会神奇地在 Event Kit 数据库中插入新字段，也不会将 a 转换`EKEvent`为其他东西神奇地改变该对象的类。

将额外字段存储到数据库中的唯一方法是直接访问 Apple 为自己保留的该数据库。

由于您无法将新字段添加到 Event Kit 数据库，您可以使用现有字段（例如，在事件的注释中添加事件 ID）或使用应用程序管理的第二个数据库扩展它。

只需创建一个 SQLite 数据库（或属性列表文件，或您想要的任何格式），将您的事件 ID 与`EKEvent`标识符相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:20:43.077

创建 EKEvent 并将其转换为 SectureEvent 与创建 SectureEvent 不同。

试试这个：

`SectureEvent *myEvent = [SectureEvent eventWithEventStore:eventDB];`

# java - 为什么我的 notify() 没有唤醒等待线程？

> ID：11401313
> 
> 赞同：2
> 
> 时间：2012-07-09T18:57:01.033
> 
> 标签：java, multithreading

我有一个简单的多线程算法，旨在在后台线程中加载一系列文件，并让 JPanel 在加载完成后立即显示第一张图像。在 JPanel 的构造函数中，我启动加载器，然后在图像列表上等待，如下所示：

```
//MyPanel.java
public ArrayList<BufferedImage> images = new ArrayList<BufferedImage>();
int frame;    

public MyPanel(String dir){
    Thread loader = new thread (new Loader(dir, this));
    loader.start();

    frame = 0;
    //miscellaneous stuff

    synchronized(images){
        while (images.isEmpty()){
            images.wait();
        }
    }

    this.setPrefferedSize(new Dimension(800,800));
}

@Override
public void paintComponent(Graphics g){
    super.paintComponent(g)

    g.drawImage(images.get(frame), 0, 0, 800, 800, null);
} 
```

我的加载程序线程如下所示：

```
//Loader.java
String dir;
MyPanel caller;

public Loader(String dir, MyPanel caller){
    this.dir = dir;
    this.caller = caller;
}

@Override
public void run(){
    File dirFile = new File(dir);
    File[] files = dirFile.listFiles();
    Arrays.sort(files);

    for (File f : files) {
        try {
            synchronized (caller.images) {
                BufferedImage buffImage = ImageIO.read(f);
                caller.images.add(buffImage);
                caller.images.notifyAll();
            }
        } catch (IOException e) {
        }
    }
} 
```

我已经验证`notifyAll()`在调用线程唤醒并在框架中显示图像之前执行多次（通常> 20）。我还验证了图像对象实际上与正在等待的对象是同一个对象。我尝试添加一个`yield()`，但这没有帮助。为什么调用`notifyAll()`不立即唤醒等待线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:02:18.280

尝试这个..

**1.** `wait()`将**立即**，释放锁。

**2.** `notify() or notifyAll()`不会**立即**释放锁，但会一直拥有它，直到到达同步块的结束大括号..

**3.**用于您`CountDownLatch`的`java.util.concurrent package`上述目的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T19:00:40.090

> 我已经验证在调用线程唤醒并在框架中显示图像之前，执行通过 notifyAll() 多次（通常 > 20 次）。

您的加载程序线程正在循环，*立即*重新获取监视器 on `caller.images`，可能在它放弃其时间片之前。

等待线程必须重新获取监视器才能取得进展——它不能这样做，因为加载程序再次抓取了它。

目前尚不清楚您要在这里实现什么，但是启动一个新线程然后*在构造函数*中等待通常是一个非常糟糕的主意。哎呀，如果在第一个图像加载之前你什么都做不了，为什么不同步做呢？无论如何，这就是你正在*有效地*做的事情......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T19:11:30.553

“一个简单的多线程算法”是矛盾的。线程总是很难的。使用来自 java.util.concurrent 的抽象（它们也很困难，但有些人认为它们可以管理），除非你的名字是 Brian Goetz。

您的代码中的两个大错误是：

*   首先，装载程序有可能在 Swing 之前获得了锁，并且在它完成之前它不会把它还给它（是的，它偶尔会放弃它，但它有可能会抓住它再次）

*   由于您的 JPanel 构造函数是在 EDT 中调用的（如果不是，那么您会遇到更大的错误），因此在构造函数完成之前不会调用paintComponent（在 Swing 中一次只能发生一件事）。所以无论如何你都不会达到你想要的。

还有更多，但如果你修复了上面的两个，剩下的就无关紧要了。

我建议你删除整个等待的东西，然后：

*   使列表同步（使用 images = Collections.synchronizedList(new ArrayList()); ）；
*   在加载器中添加调用 caller.repaint()，而不是 images.notifyAll()

**更新：**我刚刚读到其中一条评论，您的意图是在加载第一张图像之前实际停止 EDT。在这种情况下，您的整个目标都是错误的：阻止 EDT 是一个重大错误。

# heroku - 将 Play 2.0.2 部署到 Heroku

> ID：11401315
> 
> 赞同：1
> 
> 时间：2012-07-09T18:57:02.730
> 
> 标签：heroku, playframework

我试图将我的应用程序推送到 Heroku。我按照[https://github.com/playframework/Play20/wiki/ProductionHeroku](https://github.com/playframework/Play20/wiki/ProductionHeroku)上的说明进行操作。

当我运行时`git push heroku master`，它失败并显示以下消息：

> [错误] {file:/tmp/build_21x20nx2i16sz/}projecttrunk/compile:sources: scala.tools.nsc.interactive.FreshRunReq [错误] 总时间：48 秒，完成时间 2012 年 7 月 9 日下午 6:46:55

我不知道问题出在哪里，因为该应用程序在我的机器上运行良好。

我的`Procfile`：

> 网络：目标/开始 -Dhttp.port=${PORT} ${JAVA_OPTS} -DapplyEvolutions.default=true -Ddb.default.url=${DATABASE_URL} -Ddb.default.driver=org.postgresql.Driver

谢谢你的帮助！

更新 1：

我只是再次推送，现在没有编译错误出现？我不明白...现在应用程序崩溃并显示以下消息：

> 2012-07-09T19:02:55+00:00 app[web.1]：此应用程序已在运行（或删除 RUNNING_PID 文件）。

更新 2：

我删除了 RUNNING_PID 文件，现在出现以下错误`heroku logs`：

> 2012-07-09T19:33:36+00:00 heroku[run.1]：状态从开始变为向上 2012-07-09T19:34:02+00:00 heroku[router]：错误 H10（应用程序崩溃） -> GET radiant-sword-2133.herokuapp.com/dyno= queue= wait= service= status=503 bytes= 2012-07-09T19:38:01+00:00 heroku[web.1]: 状态从 crashed从 2012-07-09T19:38:03+00:00 heroku[web.1] 开始：使用命令启动进程`target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -DapplyEvolutions.default=true -Ddb.default.url=${DATABASE_URL} -Ddb.default.drive r=org.postgresql.Driver` 2012-07-09T19:38:04+00:00 app[web.1]：此应用程序已在运行（或删除 RUNNING_PID 文件）。2012-07-09T19:38:06+00:00 heroku[web.1]：进程退出，状态为 255 2012-07-09T19:38:06+00:00 heroku[web.1]：状态从开始变为崩溃 2012-07-09T19:44:32+00:00 heroku[run.1]：进程退出，状态为 0 2012-07-09T19:44:32+00:00 heroku[run.1]：状态从上改变完成 2012-07-09T19:45:07+00:00 heroku[router]: Error H10 (App crashed) -> GET radiant-sword-2133.herokuapp.com/dyno= queue= wait= service= status=503字节=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:21:54.507

您可以尝试使用以下方法连接到 heroku：

```
heroku run bash 
```

然后，尝试删除该文件：

```
rm RUNNING_PID 
```

请参阅[https://devcenter.heroku.com/articles/ssh-access](https://devcenter.heroku.com/articles/ssh-access)

**编辑**詹姆斯评论

RUNNING_PID 必须从您的 git 存储库中删除。

# sql - 存储过程相对于从数据库中获取数据的其他形式的优势

> ID：11401316
> 
> 赞同：-5
> 
> 时间：2012-07-09T18:57:03.623
> 
> 标签：sql, sql-server, stored-procedures

> **可能的重复：**
> [在存储过程与代码中保留 SQL 的优缺点是什么](https://stackoverflow.com/questions/15142/what-are-the-pros-and-cons-to-keeping-sql-in-stored-procs-versus-code)

只是好奇使用存储过程与从数据库获取数据的其他形式的优缺点。确保速度、准确性和安全性的首选方法是什么（我们不想要 sql 注入！）。

（我应该将此问题发布到另一个堆栈交换站点吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:06:27.067

Stackoverflow 上有几个关于这个问题的问题。我真的不认为你会在这里得到一个“正确”的答案，两者都可以很好地工作，而且都可以工作得非常糟糕。我认为如果您使用的是 Java，那么一般模式是使用像 Hibernate/JPA 这样的 ORM 框架。只要您正确使用该框架，就可以完全避免 SQL 注入攻击。我对 .Net 开发人员的经验是，他们更有可能使用存储过程支持的持久性，但这似乎比以前更加开放。NHibernate 和其他 MS 技术似乎都越来越受欢迎。

我个人的观点是，一般来说，ORM 可以为您节省大量冗长编码的时间，因为它可以自动生成您在典型 CRUD 类型系统中使用的大部分 SQL。要获得这一点，您可能会放弃一点性能和一些灵活性。如果您的系统是中低容量（每天有成千上万个请求），那么 ORM 就可以满足您的需求。如果您开始每天处理数百万个请求，那么您可能需要一些更裸机的东西，例如直接 SQL 或存储过程。请注意，ORM 不会*阻止*您更直接地访问数据库，它通常不是您会使用的。

最后一点，我认为 ORM 持久性使应用程序更易于测试。如果您在大部分持久性中使用存储过程，那么您几乎肯定会开始在这些过程中获得一堆业务逻辑。要测试它们，您必须实际保存数据并与数据库交互，这使得测试变得缓慢而脆弱。使用 ORM 框架，您可以避免大部分测试，或者在您真正想要测试持久性时使用内存数据库。

看：

*   [存储过程和 ORM](https://stackoverflow.com/questions/5346601/stored-procedures-and-orms)
*   [手动 DAL & BLL 与 ORM](https://stackoverflow.com/questions/904870/manual-dal-bll-vs-orm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:09:44.230

这在 Programmers SE 上可能会更好，但我会在这里回答。

CRUD 存储过程曾经是，有时仍然是在 SQL DBMS 上进行数据持久性和检索的最佳实践。每个这样的 DBMS 都有存储过程，因此无论编码语言和 DBMS 是什么，实际上都可以保证您能够使用该解决方案，并且使用该解决方案的代码可以指向任何具有正确存储过程的 DB，它会以最少的代码更改工作（在不同的 DBMS 中调用 SP 时需要进行一些语法更改；这些通常被集成到语言的库支持中以访问特定 DBMS 上的 SP）。也许最大的优势是集中访问表数据；您可以像 Fort Knox 一样锁定表本身，并根据需要将 SP 的访问权限分配给更有限的用户帐户。

但是，它们有一些缺点。首先，SP 很难进行 TDD，因为这些工具实际上并不存在于数据库 IDE 中；您必须在执行 SP 的其他代码中创建测试（因此测试必须使用预期的测试数据设置数据库）。从技术角度来看，这样的测试不是也不可能是“单元测试”，它是对小而窄的功能区域的小而窄的测试，*它没有副作用*（例如读取/写入文件系统） ）。此外，SP 是在对功能进行所需更改时必须更改的另一层。向查询结果添加新字段需要更改表、检索源代码*和 SP*. 添加新方法来搜索特定类型的记录需要创建和测试语句，然后封装在 SP 中，并在 DAO 上创建相应的方法。

可用的新最佳实践 IMO 是一个称为对象关系映射器或 ORM 的库。ORM 抽象了实际的数据层，因此您需要的是代码对象本身，并且您根据这些对象的属性而不是表数据来查询它们。这些查询几乎总是代码可配置的，并根据您在对象模型和数据模型之间定义的一个或多个“映射”转换为 DBMS 的 SQL 风格（类型 A 的对象作为记录保存在表 B 中，该属性 C 被写入字段 D)。

优点是代码更灵活，实际上以这些代码对象的形式查找数据。查询的条件通常可以在代码中自定义；如果需要具有不同 WHERE 子句的新查询，您只需编写查询，ORM 会将其转换为新的 SQL 语句。因为 ORM 是唯一实际使用 SQL 的地方（并且大多数 ORM 使用系统存储的过程来执行可用的参数化查询字符串）注入攻击几乎是不可能的。最后，根据语言和 ORM，可以对查询进行编译器检查；在 .NET 中，可以使用一个名为 Linq 的库，它提供 SQL 风格的关键字语法，然后将其转换为方法调用，然后将其提供给“查询提供程序”，该“查询提供程序”可以将这些方法调用转换为数据存储。s 本机查询语言。这也允许在代码中测试查询；您可以验证所使用的查询是否会在给定代表实际 DBMS 的内存对象集合的情况下产生所需的结果。

ORM 的缺点是 ORM 库通常是特定于语言的；Hibernate 可以在 Java 中使用，NHibernate（以及 L2E 和 L2SQL）在 .NET 中，以及一些类似的库，如 PHP 中的 Pork，但是如果您使用更旧或更深奥的语言进行编码，则根本没有可用的类型。另一个是安全性变得有点棘手。大多数 ORM 需要直接访问表才能查询和更新它们。一些人会容忍被指向用于检索的视图和用于更新的 SP（允许分离视图/SP 和表安全性以及限制可检索字段的能力），但现在您正在混合两全其美；您仍然必须定义映射，但现在您在数据层中也有代码。克服这个问题的最简单方法是在其他地方实施您的安全性；强制应用程序使用 Web 服务获取数据，该服务使用 ORM 提供数据并具有特定的、有限的“前门”。此外，许多 ORM 在以某些方式使用时会出现一些性能问题；大多数设计用于“延迟加载”数据，在实际需要数据的那一刻而不是之前检索数据，当您不需要您要求的每条记录时，这会提高前期性能。但是，当您确实需要您要求的每条记录时，这会产生额外的往返行程。您必须以特定方式构建查询来绕过这种预期的用例行为。在实际需要数据的那一刻而不是之前检索数据的位置，当您不需要您要求的每条记录时，这会提高前期性能。但是，当您确实需要您要求的每条记录时，这会产生额外的往返行程。您必须以特定方式构建查询来绕过这种预期的用例行为。在实际需要数据的那一刻而不是之前检索数据的位置，当您不需要您要求的每条记录时，这会提高前期性能。但是，当您确实需要您要求的每条记录时，这会产生额外的往返行程。您必须以特定方式构建查询来绕过这种预期的用例行为。

哪个更好？你必须做出决定。我现在可以告诉你，使用 ORM 比 SP 更容易设置和正常工作，并且更容易对模式和查询进行更改（并限制范围）。在现代开发公司中，首要任务是使其首先工作，然后使其表现良好和/或防止入侵，这是一个巨大的优势。在大多数情况下，您认为安全是一个问题，其实不是，当安全确实是一个问题时，将解决方案放在 DB 层通常是错误的，因为 DBMS 是*最后一道防线*防止入侵；如果必须依靠 DBMS 本身来阻止不想要的事情发生，那么您在它上面的许多软件和固件层中都没有这样做（甚至鼓励它发生）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:01:46.300

根据所有数据库问题的答案“取决于”。但是，由于计划缓存，存储过程在速度方面肯定会有所帮助（尽管正确参数化的 SQL 也会从中受益）。准确性也不例外——不正确的查询无论是否在存储过程中都是不正确的。在安全性方面，它们可以提供一种有用的方式来限制用户的访问——因为您不需要让他们直接访问基础表——您可以只允许他们执行您想要的存储过程。然而，关于这个话题有很多很多问题，我建议你搜索一下并找出更多。

# python - Codemirror 中的 Python 自动完成功能？

> ID：11401317
> 
> 赞同：3
> 
> 时间：2012-07-09T18:57:04.860
> 
> 标签：python, autocomplete, codemirror

我正在尝试为 Python 语言的 Codemirror 设置自动完成功能。不幸的是，Codemirror 似乎只包含 Javascript 关键字完成所需的文件。

有没有人为 CodeMirror 构建了类似于[JavaScript 版本](http://codemirror.net/lib/util/javascript-hint.js)的 Python 提示文件？

（编辑以供将来参考：[CodeMirror Google Group 上类似问题的链接](https://groups.google.com/forum/?fromgroups#!searchin/codemirror/python/codemirror/KHEb5SCuuCY/VbfMA59toAAJ)）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T20:55:49.377

我是 Codemirror（1 和 2）的 Python 解析器的原作者。您是正确的，Python 解析器没有为自动完成提供足够的信息。当 Codemirror 2 出现时，我尝试将其构建到解析器中，但事实证明这对我当时的 JS 技能来说太难了。

我现在有更多的技能，但时间却少得多。也许有一天我会回到它。或者如果有人想接受它，我很乐意提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-17T10:36:31.853

添加[python-hint.js](https://searchcode.com/codesearch/view/72441467/)、show-hint.js、show-hint.css。然后

```
var editor = CodeMirror.fromTextArea(your editor instance codes here;

editor.on('inputRead', function onChange(editor, input) {
    if (input.text[0] === ';' || input.text[0] === ' ' || input.text[0] === ":") {
        return;
    }
    editor.showHint({
        hint: CodeMirror.pythonHint
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-13T12:14:38.897

```
< script >
    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        mode: {
            name: "python",
            version: 3,
            singleLineStringErrors: false
        },
        lineNumbers: true,
        indentUnit: 4,
        extraKeys: {
            "Ctrl-Space": "autocomplete"
        },
        matchBrackets: true
    });
CodeMirror.commands.autocomplete = function (cm) {
        CodeMirror.simpleHint(cm, CodeMirror.pythonHint);
    } 

 </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:41:25.880

我使用基于 codemirror 3 中 pig-hint 的 js 启动 python 自动完成。

你可以`python-hint.js` [从这里](http://snipt.org/zphb2)得到。

要工作，您需要在 html 中：

1.  包括`simple-hint,js`和`python-hint.js`，`simple-hint.css`加上`codemirror.js`

2.  添加这个脚本：

    ```
    <script>
    CodeMirror.commands.autocomplete = function(cm) {
         CodeMirror.simpleHint(cm, CodeMirror.pythonHint);
       }
    </script> 
    ```

`python-hint.js`是我今天创建的一个基本js，没有深入审查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-07T08:28:56.683

您也可以通过这种方式进行初始化，将 extraKeys 参数添加到 CodeMirror 初始化中：

```
CodeMirror(function(elt) {
        myTextArea.parentNode.replaceChild(elt, myTextArea);
    }, {
        mode: "python",
        lineNumbers: true,
        autofocus: true,
        extraKeys: {"Ctrl-Space": "autocomplete"}
    }); 
```

# android - 关于在 Android 客户端中使用异步的问题

> ID：11401324
> 
> 赞同：0
> 
> 时间：2012-07-09T18:57:40.800
> 
> 标签：android, client, android-asynctask

我目前正在创建一个项目，该项目需要一个简单的异步任务来处理在幕后运行的线程。用户需要登录。我正在使用另一个名为 PVAndroid Client 的类，它提供有用的方法并为我提供了一个 XML 序列化程序表单数据包。我对使用线程或对服务器做任何事情都是全新的，所以这可能是完全错误的或有些正确的。

我得到了用户输入的数据：IP 地址和端口、他们的用户名（我将其分为名字和姓氏）、他们选择的区域。我加密了他们的密码，并尝试使用 IP 地址和端口号连接到 tcp。我正在尝试执行异步任务，但对我应该做什么感到困惑。任何人都可以指导我正确的方向并帮助我吗？

谢谢你，我真的很感激。

```
 private TcpClient myTcpClient = null;
    private UdpClient udpClient;
    private static final String USERNAME_SHARED_PREFS = "username";
    private static final String PASSWORD_SHARED_PREFS = "password";
    private static final String IP_ADDRESS_SHARED_PREFS = "ipAddressPref";
    private static final String PORT_SHARED_PREFS = "portNumberPref";
    private String encryptedNameLoginActivity, encryptPassLoginActivity;
    private EditText userText, passText;
    private String getIpAddressSharedPrefs, getPortNumberPrefs;
    private String getUserNameValue;
    private String getPasswordValue;
    private String fName, lName;
    private SharedPreferences settings;
    private Editor myEditor;
    private boolean getCheckedRemember;
    private boolean resultCheck = false;
    private int portNum;
    private Button submitButton;
    private String userMACVARIABLE = "";
    private String regionSelected, gridSelected;
    private Spinner regSpinner, gridSpinner;
    PVDCAndroidClient client;
    private int userNum;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        client = new PVDCAndroidClient();
    }

    @Override
    protected void onStart() {
        super.onStart();

        // Take care of getting user's login information:
        submitButton = (Button) findViewById(R.id.submitButton);
        userText = (EditText) findViewById(R.id.nameTextBox);
        passText = (EditText) findViewById(R.id.passwordTextBox);
        regSpinner = (Spinner) findViewById(R.id.regionSpinner);

        // grid selected as well? sometime?
        regSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View v,
                    int position, long rowId) {
                regionSelected = regSpinner.getItemAtPosition(position)
                        .toString();

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }
        });
        submitButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                settings = PreferenceManager
                        .getDefaultSharedPreferences(AndroidClientCompnt.this);

                getIpAddressSharedPrefs = settings.getString(
                        IP_ADDRESS_SHARED_PREFS, "");
                portNum = Integer.parseInt(settings.getString(
                        PORT_SHARED_PREFS, ""));

                if (getIpAddressSharedPrefs.length() != 0 && portNum != 0) {
                    if (userText.length() != 0 && passText.length() != 0) {
                        try {

                            try {
                                // encrypting the user's password.
                                encryptPassLoginActivity = Secure.encrypt(passText
                                        .toString());
                            } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                            // first connect attempt.
                            myTcpClient = new TcpClient();
                            myTcpClient.connect(getIpAddressSharedPrefs,
                                    portNum);
                            // here is where I want to call Async to do login
                            // or do whatever else.

                            UploadTask task = new UploadTask();
                            task.execute();

                        } catch (Exception e) {
                            Toast.makeText(getApplicationContext(),
                                    "Could not connect.", Toast.LENGTH_LONG)
                                    .show();
                            e.printStackTrace();
                        }
                    }

                }
            }
        });
    }

    private class UploadTask extends AsyncTask<String, Integer, Void> 
    {
        @Override
        protected void onPreExecute() {
            Toast.makeText(getApplicationContext(), "Loading...",
                    Toast.LENGTH_LONG).show();
                            }

        @Override
        protected Void doInBackground(String... names) {

                    resultCheck = myTcpClient.connect(getIpAddressSharedPrefs,
                            portNum);

                    if (resultCheck == true) {
                        while (myTcpClient.getUserNum() < 0) {
                            // num set? session? with proxy server?
                        }

                        String[] firstAndLast;

                        String spcDelmt = " ";

                        firstAndLast = userText.toString().split(spcDelmt);

                        fName = firstAndLast[0];
                        lName = firstAndLast[1];

                        // set up the tcp client to sent the information to the
                        // server.
                        client.login(fName, lName, encryptPassLoginActivity,regionSelected, 128, 128, 20);

                    } else {
                        Toast.makeText(getApplicationContext(),
                                "Connection not successful", Toast.LENGTH_LONG)
                                .show();
                    }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            Toast.makeText(getApplicationContext(), "Connected",
                    Toast.LENGTH_LONG).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:13:57.070

第一的

```
@Override
protected Void doInBackground(String...params) {
    new Thread (new Runnable() {
       // ...
    }
} 
```

永远不要再这样做了。无需在实际在*后台运行的**doInBackground*方法中创建新`Thread`的。所以删除它。 **`Thread`**

 **给你的建议很棘手，因为你需要阅读`Threads`、使用`Connection`等。所以对你最好的建议是阅读一些`tutorials`基本应用程序的示例和阅读参考资料。所以你可以从这里开始：

[`Android TCP Client and Server Communication Programming–Illustrated with Example`](http://www.roman10.net/android-tcp-client-and-server-communication-programmingillustrated-with-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:17:47.197

我看不到你在哪里执行你的任务，但我看到你在做一些奇怪的事情`doInBackground()`！绝对没有理由在其中创建自己的线程。删除它，你可以像这样使用你的任务：

```
UploadTask task = new UploadTask();
task.execute("someString", "anotherString", "addAsManyStringsYouNeed"); 
```

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档也很有帮助。**

# sql - SQL 更新基于并从同一个表中选择结果

> ID：11401327
> 
> 赞同：0
> 
> 时间：2012-07-09T18:57:56.423
> 
> 标签：sql, select, nested, dbisam

我将尽我所能清楚地描述我正在尝试做的事情。

我正在使用 DBISAM SQL 数据库。

我们出售 T 恤和许多不同种类的 T 恤。我正在尝试使用数据库中其他产品的值更新我们的产品数据库。这是一个示例：

产品表

```
SKU           Product      LongDesc
01-S          01           Great Looking T-Shirt
01-M          01           
01-L          01
02-S          01           
02-M          01           Amazing Ladies T
02-L          01
03-32         03           Long t
03-34         03
03-36         03 
```

我想编写一个更新脚本，该脚本将更新所有没有**LongDesc的****SKU上的****LongDesc**字段，但我希望从其他具有相同**产品的****SKU那里得到****LongDesc**

 ******最后，我希望表格看起来像这样：

```
SKU           Product      LongDesc
01-S          01           Great Looking T-Shirt
01-M          01           Great Looking T-Shirt
01-L          01           Great Looking T-Shirt
02-S          01           Amazing Ladies T          
02-M          01           Amazing Ladies T
02-L          01           Amazing Ladies T
03-32         03           Long t
03-34         03           Long t
03-36         03           Long t 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:09:04.617

尝试这个：

```
UPDATE p
SET p.longdesc = pp.longdesc
FROM products p
INNER JOIN 
(
    SELECT a.sku, MAX(a.longdesc) AS longdesc
    FROM
    (
        SELECT LEFT(sku FOR (POS('-', sku) - 1)) AS sku, longdesc
        FROM products
    ) a
    GROUP BY a.sku
) pp ON LEFT(p.sku FOR (POS('-', p.sku) - 1)) = pp.sku 
```******

# php - php curl上传速度很慢

> ID：11401328
> 
> 赞同：1
> 
> 时间：2012-07-09T18:57:59.590
> 
> 标签：php, curl

我对 curl (php 5.3) 的上传速度有疑问。在我的开发环境（笔记本电脑）上，上传速度非常快。但是当我将它部署在服务器上时，它非常慢。

[编辑]：我正在使用 curl 将一些变量发布到外部服务。然后服务返回 XML。如果我在笔记本电脑上使用 curl，XML 会很快返回。然而，在服务器上，返回 XML 需要几秒钟的时间。我猜这是因为从服务器到外部服务的请求很慢。我的笔记本电脑（快）和服务器（慢）的 curl_getinfo() 函数的输出说明了这一点

这是来自我笔记本电脑上的 curl_getinfo() 函数：

```
[url] => http://mylaptop.com
[content_type] => text/html; charset=ISO-8859-1
[http_code] => 200
[header_size] => 406
[request_size] => 559
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0.203
[namelookup_time] => 0
[connect_time] => 0.031
[pretransfer_time] => 0.031
[size_upload] => 283
[size_download] => 15564
[speed_download] => 76669
[speed_upload] => 1394
[download_content_length] => -1
[upload_content_length] => 0
[starttransfer_time] => 0.172
[redirect_time] => 0
[certinfo] => Array
    (
    ) 
```

这来自服务器。它使卷曲的总时间> 5秒。

```
[url] => http://myserver.com
[content_type] => text/html; charset=ISO-8859-1
[http_code] => 200
[header_size] => 403
[request_size] => 424
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 5.005475
[namelookup_time] => 0.014625
[connect_time] => 0.036776
[pretransfer_time] => 0.036777
[size_upload] => 164
[size_download] => 9690
[speed_download] => 1935
**[speed_upload] => 32**
[download_content_length] => -1
[upload_content_length] => 0
[starttransfer_time] => 0.125857
[redirect_time] => 0
[certinfo] => Array
    (
    ) 
```

这怎么可能？我注意到 curl 版本有所不同（服务器上为 7.19.7，笔记本电脑上为 7.20.0）。

提前感谢您的回复。

# javascript - UIWebView 上的 CSS 加载动画

> ID：11401329
> 
> 赞同：0
> 
> 时间：2012-07-09T18:58:04.050
> 
> 标签：javascript, objective-c, css, ios, uiwebview

我有一个非常简单的`CSS`不透明动画，可以`UIWebView`在 Web 视图加载时为一些文本设置动画。当 HTML 的主体较小且渲染速度快时效果很好，但对于较大的主体，您会发现动画在内容加载时立即运行，但`UIWebView`不会在另一秒钟左右绘制到视图上，这意味着用户完全错过了动画。

所以我的问题是，与其让淡入淡出动画在加载时发生，我希望它在 web 视图实际绘制到我的视图上时发生，而且我不认为有任何 Objective-C 委托方法被调用时绘制了 web 视图，所以我不确定这是否可以在 Objective-C 端完成。

无论如何我可以在我的设备上实际绘制网络视图时立即调用一些Javascript（这样我可以手动添加动画），而不是什么时候`webViewDidload`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:04:51.847

> 无论如何我可以在我的设备上实际绘制 Web 视图时立即调用一些 Javascript（这样我可以手动添加动画），而不是在 webViewDidload 时

`uiwebview`也许您可以在您的和您的 html 内容加载后注入您的 javascript ？`webViewDidFinishLoad`这个委托在`uiwebview`你的 html dom 树创建时被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:05:17.907

页面加载时 uiwebview didfinishload 会为您触发吗？如果是这样，您可以在objectiveC中使用该函数来执行js命令来启动您的CSS动画

# php - jQuery .load() 代码点火器页面

> ID：11401330
> 
> 赞同：0
> 
> 时间：2012-07-09T18:58:09.347
> 
> 标签：php, jquery, ajax, codeigniter

我正在尝试使用 jQuery 在 codeigniter 中构建 Ajax 建议功能。但是，当我在 jQuery 中使用 .load() 函数时，我找不到调用控制器的方法，我这样称呼它：

`$("#sugresultcontain").load('http://localhost/ajaxtest/suggest #loadsuggest');`

但是，内容不会加载。然后我尝试使用：

`$("#sugresultcontain").load('http://localhost/ajaxtest/application/views/ajaxref/suggest.php #loadsuggest');`

正如预期的那样，这再次不起作用，因为我需要调用控制器而不仅仅是视图本身。

所以我的问题是，我如何使用 .load() AJAX 函数来调用输出Suggest.php 的控制器。

如果需要更多详细信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:38:37.503

当您遇到 AJAX 请求问题时，您可以看到服务器的响应

*   在 Google Chrome 和 Internet Explorer 中按 F12 选项卡网络
*   在 Firefox 中按 CTRL+Shift+K

如果您允许显示错误，它将在那里。

# ios - 如何为 segue 呈现的视图控制器实现委托？

> ID：11401333
> 
> 赞同：3
> 
> 时间：2012-07-09T18:58:18.920
> 
> 标签：ios, uiviewcontroller, uistoryboard, segue

在我的主视图控制器中，NSTimer 在指定的延迟后调用以下函数：

```
-(void)showAdView{
    [self performSegueWithIdentifier:@"ShowAdSegue" sender:nil];        
} 
```

这以模态方式呈现`MyAdViewController`，我希望`MyAdViewController`该类有一个`MyAdViewControllerDelegate`协议，以便我可以`adViewDidFinish`在我的主视图控制器中实现一个功能。

`MyAdViewController`是否可以在不在主视图控制器中创建新实例的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:06:44.377

您可以执行以下操作：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender { 
  [segue.destinationViewController setDelegate:self]; 
} 
```

为此，您必须在执行 segue 的视图控制器中包含您的视图控制器头文件，并`MyAdViewController`通过将其添加到类的头文件中来使您的委托属性成为公共的。

# java - Graphviz Graph从java创建noobie图像

> ID：11401335
> 
> 赞同：2
> 
> 时间：2012-07-09T18:58:24.037
> 
> 标签：java, graphviz

我想运行我的 java 程序，它需要制作一堆图形图像。我有一个网站，但我不希望每次有人访问该页面时都运行 graphviz 程序，所以我正在运行一个预定的服务器端 java 程序，它将制作图表，以便网页只拍摄图像。现在我似乎无法弄清楚。我正在使用 spring 查询数据库来为我的图形生成信息，然后我制作了一个 .dot 文件。使用简单的文本编写器。我将整个 graphviz 程序放在我的服务器上，我将如何从这个 .dot 文件中获取图像。我已经完成了我的研究，我需要做一个

```
 $ -Tpng graphic.dot -o graphic.png 
```

键入呼叫，但这是一个终端呼叫。我似乎无法弄清楚。我应该使用像 Grappa 这样的东西吗？我应该怎么做这个问题？我是否应该尝试打开exe并将该行代码作为参数传递，此外将在哪里创建图像文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:24:03.877

如果我理解正确，您想从服务器上定期运行的 java 程序中运行命令行程序。

您可以尝试以下方法：

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("c:\\graphvizbinpath\\dot.exe -Tpng c:\\graphic.dot -o c:\\graphic.png"); 
```

当然，您需要调整路径，并且执行 java 程序的用户应该具有适当的文件系统权限。

# python - Python正则表达式排序问题

> ID：11401336
> 
> 赞同：1
> 
> 时间：2012-07-09T18:58:27.443
> 
> 标签：python, regex

我遇到了 python 的 re 模块的问题。

这是问题的最简单版本

```
import re

print re.findall('a|ab','aab')      # ['a', 'a']
print re.findall('ab|a','aab')      # ['a', 'ab'] 
```

我在运行时从文本文件生成正则表达式，无法确定它们的顺序是否正确。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:00:05.527

按大小排序……先长一点

例如：

```
s_regs = sorted(regexes,key=lambda x:len(x))
s_regs.reverse()
regex = '|'.join(s_regs) 
```

# wordpress - .htaccess 覆盖父 .htaccess

> ID：11401341
> 
> 赞同：3
> 
> 时间：2012-07-09T18:58:40.293
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, url-rewriting

所以我已经为此苦苦挣扎了一整天，到目前为止没有任何帮助。我在域的根目录中安装了 PyroCMS，在同一文件夹 (public_html) 中安装了子域博客。

现在的问题是，在访问[http://dev.iber.co.uk/blog/](http://dev.iber.co.uk/blog/)时，我看到的是 blog.iber.co.uk。显然那是因为 blog 文件夹存在，而不仅仅是 htaccess 重写的 url。

文件夹结构：

```
public_html
   blog
      .htaccess
      .index.php
      etc..
   .htaccess
   index.php
   etc.. 
```

但是，如果我从博客文件夹 dev.iber.co.uk/blog/ 中删除 htaccess，它会被重写为 index.php。

这是 dev.iber.co.uk 的 .htaccess（这个子域实际上指向根 public_html 文件夹）：

```
Options +FollowSymLinks -Indexes
RewriteEngine on
RewriteBase /

RedirectMatch 403 ^/(system\/cms\/cache|system\/codeigniter|\.git|\.hg).*$

RewriteCond %{HTTP_HOST} !^blog\.iber\.co\.uk [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L] 
```

这是来自 wordpress 博客的 .htaccess：

```
Options +FollowSymLinks -Indexes
RewriteEngine on
RewriteCond %{HTTP_HOST} ^blog\.iber\.co\.uk [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L] 
```

我究竟做错了什么？我无权重写日志，因为它是共享服务器。我会给任何帮助我解决它的人50个代表。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:16:52.820

在父 htaccess 中，这会解决您的情况，还是您必须从*dev.domain*访问*/blog/ 路径*？

 *```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST}     ^dev.iber.co.uk$     [NC]
RewriteCond %{REQUEST_URI}   ^/blog/              [NC]
RewriteRule ^/blog/(.*)$     blog.iber.co.uk/$1   [R=302.L]
... other rules 
```*

# php - 如果在 MySQL / PHP 中为空，则隐藏字段

> ID：11401345
> 
> 赞同：0
> 
> 时间：2012-07-09T18:58:48.367
> 
> 标签：php, mysql

我的数据库中有一个字段`urlOne`。如果它有一个 URL 作为值，我希望它只回显 html。这是我的代码：

```
$id = $_REQUEST['id'];
$query = "SELECT * FROM sites WHERE id = $id LIMIT 1";
$result = mysql_query($query);
$url = $row['urlOne'];
while($row = mysql_fetch_assoc($result)){
    echo "<section class='prop-desc'>";
    echo $desc;
    echo "</section>";
    $result = mysql_query("SELECT * FROM sites WHERE $id LIMIT 1");
    if(!empty($row['urlOne'])){
        echo "<h4 class='cta'><a href='$url'>Launch Site</a></h4>"
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:21:57.730

虽然[Rab Nawaz 的回答](https://stackoverflow.com/a/11401396/212940)有效，但它并不真正正确。

`mysql_*`功能不再维护，社区已开始弃用[过程](http://news.php.net/php.internals/53799)。相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。

如果你不能决定，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该可以帮助你选择。虽然，您应该知道，PDO 能够与不同类型的 RDBMS 一起工作，而 MySQLi 是为特定的 RDBMS 设计的。如果您决定使用 PDO，建议您遵循[本教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

对于您的特定情况，您的代码应该看起来更像这样：-

```
$dsn = 'mysql:dbname=dbname;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

try {
    $db = new PDO($dsn, $user, $password);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$id = someMethodOfValidation($_POST['id']); 
```

**注意：-**您应该指定 $_POST 或 $_GET；因为 $_REQUEST 可能来自任何一个，您应该始终知道您的输入来自哪里。

应始终验证用户输入，您的方法使您对 SQL 注入敞开大门，因此`someMethodOfValidation()`您需要编写适合您预期输入的位。在您的情况下，您似乎期望一个整数值，因此您的验证可能像`$id = (int)$_POST['id'];`.

在谈论 SQL 注入时，传统的做法是讲述 Little Bobby Tables 的故事，所以这里是：-

![在此处输入图像描述](../Images/7695279aa0c1c442fae67d3c0fc2d71e.png)

要继续您的代码：-

```
$stmt = $db->prepare("SELECT * FROM sites WHERE id=:id");
$stmt->execute(array(':id' => $id));
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

foreach($rows as $row){
    if(!empty($row['urlone']){
        echo "<h4 class='cta'><a href='{$row['urlone']}'>Launch Site</a></h4>";
} 
```

我不能强调你上面的代码是不安全的，永远不应该在实时服务器上使用。不要费心学习使用 mysql_* 函数，你会浪费你的时间。PDO 并不难学，事实上，一旦你掌握了它，它就非常简单。上面链接的教程将帮助您顺利使用 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:02:43.220

第一的。你错过`;`了 echo 语句的结尾。我不确定，是否是复制粘贴问题。

第二。为什么不检查 $url。如果是关于 $url 打印

```
if(!empty($url)){
echo "<h4 class='cta'><a href='$url'>Launch Site</a></h4>";
} 
```

# eclipse - Eclipse插件开发，在java项目中暴露插件的类

> ID：11401352
> 
> 赞同：1
> 
> 时间：2012-07-09T18:59:09.663
> 
> 标签：eclipse, eclipse-plugin, annotations, apt, annotation-processing

我正在尝试将注释处理器构建为 Eclipse 插件。这是我第一次为 eclipse 编写插件，所以我不确定我是否使用了正确的术语，如果我不是很清楚，我很抱歉。

我的目标是有一个从带注释的Java类生成代码的插件，我希望插件包含所有注释，所以除了安装插件之外，用户的项目不需要额外的依赖项，即安装插件的用户编写一些类，用一些注解（打包在插件内部）对它们进行注解并获取生成的代码。

有可能做我想做的事吗？我见过其他一些添加自己的库的插件（例如 Xtent）。

10倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:39:42.883

有可能的。您需要实现一个自定义的 IClasspathContainer 来动态解析您的插件 jar，并在构建类路径容器时将注释类添加到项目构建路径中。在构建路径 UI 中，IClasspathContainer 的名称为“库”。JRE、用户库等都是通过 IClasspathContainer API 实现的。

要查看示例，请获取 org.eclipse.jdt.core 和 org.eclipse.jdt.ui 插件的源代码。

# c# - 如何将属性添加到我的 app.config 配置集合？

> ID：11401358
> 
> 赞同：1
> 
> 时间：2012-07-09T18:59:29.233
> 
> 标签：c#, app-config

我试图在我的 app.config 中有以下部分结构

```
<MyConfig>
    <NewsFeeds site="abc">
        <add name="first" />
    </NewsFeeds>
    <NewsFeeds site="zyx">
        <add name="another" />
    </NewsFeeds>
</MyConfig> 
```

我已经有该`MyConfig`部分的工作，但我不确定`NewsFeed`应该如何对集合进行编码，或者这种结构是否可行。到目前为止，我现在有以下课程：

```
[ConfigurationCollection(typeof(NewsFeedConfig))]
public class NewsFeedConfigCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new NewsFeedConfig();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((NewsFeedConfig)(element)).Name;
    }

    public NewsFeedConfig this[int idx] { get { return (NewsFeedConfig)BaseGet(idx); } }
}

public class NewsFeedConfig : ConfigurationElement
{
    [ConfigurationProperty("name", IsKey = true, IsRequired = true)]
    public string Name
    {
        get { return (string)base["name"]; }
        set { base["name"] = value; }
    }

    [ConfigurationProperty("source", IsRequired = true)]
    public string Source
    {
        get { return (string)base["source"]; }
        set { base["source"] = value; }
    }
} 
```

但是，这要求所有新闻提要都在一个新闻提要集合下，然后我必须通过向`Site`每个元素添加一个属性来手动解析它们。这很好，但是是否有可能以上面定义的 XML 可以工作的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:18:29.827

我想你会在这里找到答案：[每个配置文件中的部分只能出现一次！为什么？](https://stackoverflow.com/questions/1768362/sections-must-only-appear-once-per-config-file-why)

您可能希望将 xml 重组为更像：

```
<MyConfig>
  <NewsFeed site="abc">
    <Feeds>
      <Feed name="first" />
    </Feeds>
  </NewsFeed>
  <NewsFeed site="zyx">
    <Feeds>
      <Feed name="second" />
      <Feed name="third" />
      <Feed name="fourth" />
    </Feeds>
  </NewsFeed>
</MyConfig> 
```

# tsql - SQL Server T-SQL CASE 错误

> ID：11401361
> 
> 赞同：0
> 
> 时间：2012-07-09T19:00:02.773
> 
> 标签：tsql, sql-server-2000

我在使用 T-SQL (SQL Server 2000) 的 CASE 上遇到错误。非常感谢任何反馈

> 错误是 Msg 156, Level 15, State 1, Line 2 关键字“CASE”附近的语法不正确。

--查询如下：

```
select c.name,c.customerid,c.linkid
      ,case when c.linkid=x.linkid then x.orderitem end as orderitem
      ,case when c.linkid=x.linkid then x.orderdate end as orderdate
from customer as c
Inner join 
(
    Select C.CustomerID, C.LinkID, O.OrderItem,O.OrderDate
    From Customer as C
    JOIN Orders as O 
        ON C.CustomerKey=O.OrderKey
    WHERE O.OrderDate='mm-dd-yyyy'
) as X
    on c.customerid=x.customerid
order by c.customerid
        ,case when c.linkid=x.linkid then 0 else 1 end asc
        ,c.linkid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-23T08:55:26.940

也许它在你的代码之间有一个你看不到的隐形字符，重写你的脚本很方便，无需选择副本或过去。

# iphone - 如何在 UIPopoverController 中更新 UITableViewController

> ID：11401363
> 
> 赞同：0
> 
> 时间：2012-07-09T19:00:06.067
> 
> 标签：iphone, uitableview

我像这样展示我的弹出框：

```
UITableViewController *tbv = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
self.listTableViewController = tbv;
tbv.tableView.delegate = self;
tbv.tableView.dataSource = self;

[self setupPopoverControllerForViewController:tbv];

[self.popover presentPopoverFromBarButtonItem:self.popoverButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
[tbv release]; 
```

当 tableView 中的某些内容被删除时，我想更新它。这两个我都试过了：

```
 [self.listTableViewController.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:self.indexPathToDelete] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self.listTableViewController.tableView reloadData]; 
```

但两者都不起作用。如果我关闭弹出窗口，然后重新打开它。然后我的表被更新。它只是在它像我想要的那样打开时不会更新它。想法？谢谢！

# c# - 导入整个命名空间与在 C# 中使用别名之间的性能？

> ID：11401364
> 
> 赞同：6
> 
> 时间：2012-07-09T19:00:13.700
> 
> 标签：c#, performance, namespaces, alias, using

导入整个命名空间与使用别名仅导入一个类之间是否存在性能差异？如果有，有多大区别？

例子：

导入整个命名空间：

```
using System.Reflection; 
```

别名只导入一个类：

```
using BindingFlags = System.Reflection.BindingFlags; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T19:02:07.237

零。命名空间导入是一个编译时特性，生成的 IL 将完全一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T19:01:53.073

不，它只是对程序员的帮助，编译器生成的 CIL 是完全一样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T19:02:01.427

没有性能差异。有人说“当我指定一个类名时看这里，它可能在这里”。另一个说'当我说这个类或命名空间时，我的意思是使用这个'。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T19:07:57.153

没有，但范围更广。您加载包含 .net 核心的 dll，其中将包含数十个命名空间。在您走出已加载的 dll 之前，您真的不会因为导入命名空间而受到打击。

# android - 在android应用程序的内存中存储数组列表（以稳健的方式）

> ID：11401366
> 
> 赞同：0
> 
> 时间：2012-07-09T19:00:19.310
> 
> 标签：android, android-intent, arraylist, robustness

我正在开发一个 android 应用程序（与旧的 androids 以及新的 androids 一起工作，所以没有 3.0 技巧），我想将提交数据存储在我的应用程序的 arrayList 中，可以跨视图共享。数据首先被实例化存储到一个对象中，然后它将是一个arrayList。我想跨视图访问，（也许是sharedPref？）但我还需要确保应用程序是否崩溃，其余数据不会被删除。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:08:19.457

如果您只是想在同一个活动中共享`Views`，您只需在设置视图时引用`Resource ID`via 。`R.id.yourResourceID`但是，如果您的视图在不同的活动中，您需要一些更健壮的东西。

要跨活动传递对象，您需要`Parcelable`在对象中扩展接口。这将允许您将对象发送到您的每个活动，并从对象中检索数据。

这可能有助于跨活动传递对象： http: [//shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:36:30.377

这是一个非常好的教程，用于设置 SQLite 数据库并了解它是如何工作的，其中还包括一个非常好的帮助类，您可以根据自己的需要进行修改：

[http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

在我的评论中，我试图解释如果你有一个对象的 ArrayList，你可以将每个对象存储在数据库中，然后使用它重新填充你的 ArrayList。

IE。您有一个带有 int ID 和 String 名称的对象 A 和 B。在数据库中存储每个对象的 ID、名称等。当您将它们拉回来时，从存储的值（IE.ID/名称）重新创建您的对象（IE.A/B），然后将它们添加到包含该类型所有对象的 ArrayList 中。

希望我解释得足够好，但无论哪种方式，我提供的链接肯定会为您指明正确的方向

# pyqt - PyQt LineEdit 与 readline 完成器？

> ID：11401367
> 
> 赞同：3
> 
> 时间：2012-07-09T19:00:19.437
> 
> 标签：pyqt, readline, qlineedit, qcompleter

我一直在开发一个命令行工具，现在我正在为它制作一个 PyQT GUI。我想使用 readline 模块获取当前的自动完成实现，并将其放入 QLineEdit 文本框中。这可能吗？你有什么建议？

这是我使用 readline 模块所做的一个示例：

```
import readline

values = ['these','are','my','autocomplete','words']
completions = {}

def completer(text,state):
    try:
        matches = completions[text]
    except KeyError:
        matches = [value for value in values if text.upper() in value.upper()]
        completions[text] = matches
    try:
        return matches[state]
    except IndexError:
        return None

readline.set_completer(completer)
readline.parse_and_bind('tab: menu-complete')

whie 1:
    text = raw_input('> ')
    text.dostuff() 
```

最终，如果我不能让 readline 模块在 QLineEdit 小部件中工作，我最终想要做的是完成一个单词列表，能够让多个单词用 +-*/( ） ETC...

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:51:51.177

我可以告诉你，首先，尝试将 QCompleter 包装在新功能周围是一个巨大的痛苦。您必须能够满足 QCompleter 的所有接口，并围绕该实时代码桥接它。

您必须手动更新 QCompleter 上设置的 QStringListModel，并为给定的搜索前缀提供获取当前完成和完成总数的实现。

这是一个与 PopupCompletion 模式兼容的工作示例：

```
import re

class ReadlineCompleter(QtGui.QCompleter):

    def __init__(self, completeFn, *args, **kwargs):
        super(ReadlineCompleter, self).__init__(*args, **kwargs)
        self._completer = completeFn
        self.setModel(QtGui.QStringListModel())
        self.update()

    def setCompletionPrefix(self, val):
        super(ReadlineCompleter, self).setCompletionPrefix(val)
        self.update()

    def currentCompletion(self):
        state = self.currentRow()
        return self._completionAt(state)

    def completionCount(self):
        state = 0
        while True:
            result = self._completionAt(state)
            if not result:
                break
            state += 1
        return state

    def update(self):
        matches = [self._completionAt(i) for i in xrange(self.completionCount())]
        self.model().setStringList(matches)

    def _completionAt(self, state):
        text = str(self.completionPrefix())

        # regex to split on any whitespace, or the char set +*/^()-
        match = re.match(r'^(.*)([\s+*/^()-]+)(.*)$', text)
        if match:
            prefix, sep, text = match.groups()

        result = self._completer(str(text), state)

        if result and match:
            result = sep.join([prefix, result])

        return '' if result is None else result 
```

请注意，在该`_completionAt()`方法中，我添加了您想要的额外功能，用于检测分隔符模式。你可以很明显地调整它。但它会拆分最后一部分并使用该值来检查完成，然后再次使用前缀重新加入结果。

**用法**

重要的。您需要将`textChanged`来自 QLineEdit 的信号连接到完成器以强制更新。否则，完成程序中不会使用任何功能。

```
line = QtGui.QLineEdit()
comp = ReadlineCompleter(completer)
comp.setCompletionMode(comp.PopupCompletion)
line.setCompleter(comp)
# important
line.textChanged.connect(comp.setCompletionPrefix) 
```

这里有一些[例子](http://www.qtcentre.org/threads/23518-How-to-change-completion-rule-of-QCompleter?p=114269#post114269)展示了其他人如何在自定义行编辑中填写功能，他们完全绕过完成者的标准信号并自己触发它。你可以看到它的一点点努力。

# objective-c - 在Objective c中将指向对象的指针存储在数组中

> ID：11401368
> 
> 赞同：0
> 
> 时间：2012-07-09T19:00:19.487
> 
> 标签：objective-c, nsmutablearray

我正在使用此代码创建一些对象，然后将它们存储在一个数组中

```
for (int iy=0; iy<5; iy++) {
        for (int ix=0; ix<5; ix++) {

            TerrainHex *myObject = [[TerrainHex alloc] initWithName:(@"grassHex instance 10000") width:mGameWidth height:mGameHeight indexX:ix indexY:iy];
            myObject.myImage.y += 100;

            [TerrainHexArray addObject:myObject];

            [self addChild:(id)myObject.myImage];
        }
    }
    NSLog(@"%lu", sizeof(TerrainHexArray)); 
```

几个问题。

1.  日志只显示4，这没有意义，不应该是5x5，即25吗？
2.  我是在那里创建 25 个单独的对象指针，还是只是一遍又一遍地重复使用同一个对象指针？我正在尝试将所有 25 个指针保存到一个数组中。
3.  我正在使用 ARC，但我必须在那里发布任何东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:02:16.257

> 日志只显示4，这没有意义，不应该是5x5，即20吗？

用于`[TerrainHexArray count]`获取数组中对象的数量。`sizeof(TerrainHexArray)`给你一个 的大小，`id *`在你的系统中是 4 个字节。

> 我是在那里创建 20 个单独的对象指针，还是只是一遍又一遍地重复使用同一个对象指针？我正在尝试将所有 20 个指针保存到一个数组中。

您正在创建 25 个对象

> 我正在使用 ARC，但我必须在那里发布任何东西吗？

不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:05:22.453

1.  `sizeof()`告诉您变量的字节大小，该变量`TerrainHexArray`（可能）是指向 NSMutableArray 的指针。假设是 32 位系统，指针是 32 位，即 4 个字节。你应该`[TerrainHexArray count]`改用。这是一个返回数组中对象数量的方法。

2.  您正在创建 25 个对象实例，而不是一遍又一遍。`myObject`只是一个持有指向给定对象的指针的变量。通过赋值更改它并不会消除它之前指向的对象（尽管 ARC 负责释放它）。

3.  不，ARC 会为您处理内存管理。

一个挑剔：假设`TerrainHexArray`是 NSArray 的一个实例，你不应该大写第一个字母。这不是语言的要求，但习惯上将类名大写，但对变量名使用小写首字母。`terrainHexArray`会更合适，并使代码更具可读性。

# .net - .NET 程序集是否缓存对其他程序集的引用？

> ID：11401369
> 
> 赞同：1
> 
> 时间：2012-07-09T19:00:27.113
> 
> 标签：.net, reflection, assemblies, typechecking

这听起来可能是一个奇怪的问题（至少，直到现在我还没有理由考虑它），但让我解释一下我的情况。

我们有一个在客户网络上的服务器上运行的服务应用程序。为了更新应用程序，我们将服务核心程序集的新构建推送到我们的服务器，并向服务应用程序发出软重启，这实际上只是核心的外壳。各个服务应用程序请求核心程序集的字节数组并执行新程序集：

```
Assembly coreAsm = Assembly.Load(coreAsmByteArray);
Type tCoreHelper = GetInterfaceTypeFromAssembly(coreAsm, typeof(ICoreHelper));
_CoreHelper = Activator.CreateInstance(tCoreHelper) as ICoreHelper;

_CoreHelper.Start(); 
```

直到最近，服务执行所需的一切都包含在核心程序集中。

我们刚刚进行了一些更改，以允许服务应用程序请求插件程序集。当服务第一次运行时，它请求核心程序集，核心请求插件并以与核心相同的方式加载它们（假定不同且正确的类型）。程序集被重新加载，一切都很愉快。但是，当我们发出软重启时，核心程序集请求，核心程序集请求插件。核心和插件程序集已成功加载，但是插件和核心类型之间的类型检查开始失败。

加载插件程序集后，我们仔细阅读插件的类型以查找工作类 IWorker，它是在核心程序集中定义的类型（意味着所有插件程序集都引用核心）：

在组装核心：

```
namespace Core
{
    public interface IWorker { ... }
} 
```

在汇编插件测试中：

```
namespace PluginTest
{
    public class PluginA : Core.IWorker { ... }
} 
```

之前在服务应用程序的初始加载中找到的所有工作人员在软重启后不再找到，因为 (new)Core.IWorker 不再可从插件工作人员类型分配。尽管调试器不同意，并以我希望的方式评估对 IsAssignableFrom 的调用，但 CLR 正在做一些不同的事情，导致检查失败：

```
foreach(var t in pluginAsm.GetTypes())
{
    if(otherChecksPass && typeof(IWorker).IsAssignableFrom(t))
        RegisterPluginType(t);
} 
```

我想，当从插件下更改核心程序集时，插件不会获得关于新核心程序集的备忘录，并继续使用对旧程序集的“缓存”引用。但我真的不知道这种情况在记忆中是如何发生的，我也不知道我将如何解决这种情况。

问题？想法？谢谢你们！

# java - httpclient在java中发布xml内容

> ID：11401378
> 
> 赞同：0
> 
> 时间：2012-07-09T19:01:01.950
> 
> 标签：java, xml, apache-commons-httpclient

我正在尝试使用 httpclient 发布 xml 请求，如下所示：

```
String parm1 = MyXml.toString();
PostMethod post = new Postmethod(url);
post.setRequestEntity(new StringRequestEntity(parm1));
... 
```

我在程序中有一个对象，我想将其转换为 xml 表示形式。

我的问题是，在 java 中以 xml 格式创建 Myxml 的最佳方法是什么，然后我可以稍后简单地打印出它的 String 格式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:16:27.983

这是使用**Apache HttpClient 发布 xml 请求的方法。**

*   使用 apache Velocity 创建请求 xml 格式
*   使用 Castor 将响应流（respReader）转换为 java 对象

    ```
    final String request = createXmlRequest(); // helper method to create the xml request
    final HttpClient client = new HttpClient();
    final PostMethod post = new PostMehod(url); // url - www.google.cm/someoperaion

    post.setRequestHeader("Content-Language", "en-US");
    post.setRequestEntity(new StringRequestEntity(request, "text/xml", "ISO-8859-1"));

    final int returnCode = client.executeMethod(post);

    final BufferedReader respReader = new BufferedReader(new InputStreamReader(post.getResponseBodyAsStream())); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:51:21.040

在 Java 中创建 XML 有很多选择。这个答案[如何使用 JAXB 序列化和反序列化对象？](https://stackoverflow.com/questions/5189690/how-to-serialize-and-de-serialize-objects-using-jaxb)提供了一种似乎适合您的用例的常用方法的良好演示。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-09T19:06:02.207

尝试以这种方式使用它...

```
public void postData() throws Exception {

 HttpClient client = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("https://www.xyz.com");

 List<NameValuePair> list = new ArrayList<NameValuePair>(1);

 list.add(new BasicNameValuePair("name","ABC");

 httppost.setEntity(new UrlEncodedFormEntity(list));

 HttpResponse r = client.execute(httppost);

} 
```

# css - 容器 div 内可能的最大宽度

> ID：11401379
> 
> 赞同：0
> 
> 时间：2012-07-09T19:01:03.103
> 
> 标签：css

我正在使用骨架 css 框架，我需要一些 div 来占据可能的最大宽度，就像 SO 在 div 中保存搜索输入框的方式一样。我有这个小提琴[http://jsfiddle.net/pRmus/1/](http://jsfiddle.net/pRmus/1/)显示我制作的简单 div

```
.all-width{
    background-color:pink;
    } 
```

由于我在容器内显示此 div 并且容器宽度为 940 像素，因此宽度无法覆盖浏览器提供的所有宽度。有没有我可以使用的解决方案来获得我想要的东西？我在想 z-index div，但我不太确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:08:58.877

尝试将粉色条移出容器。在单个容器周围制作一个包装器，这样这个包装器就可以真正具有 100% 的宽度。

**JSFiddle** [http://jsfiddle.net/Y5mB6/](http://jsfiddle.net/Y5mB6/)

HTML

```
<div class="container">
    <div class="sixteen columns">
        <h1 class="remove-bottom" style="margin-top: 40px">Skeleton</h1>
        <h5>Version 1.2</h5>
        <hr />
    </div>
</div>
<div class='wrapper'>
    <div class="container">            
        <div class="sixteen columns">
            <p>hello world</p>
        </div>
    </div>
</div>
<div class="container"> 
    <div class="one-third column">
        <h3>About Skeleton?</h3>
... 
```

CSS

```
.wrapper{
    background-color:pink;      
} 
```

# .net - 实体框架 SaveChanges 不更新数据库

> ID：11401383
> 
> 赞同：4
> 
> 时间：2012-07-09T19:01:42.980
> 
> 标签：.net, entity-framework

使用 sql server profiler 我可以看到 AnswerComment 的初始查询将进入数据库，但是当我到达 ef.SaveChanges() 时，没有任何东西进入数据库。我正在使用 sqlexpress 2008 R2。

```
using (TPRDEntities ef = new TPRDEntities())
{
    var ac = ef.AnswerComments.Where(a => a.AnswerCommentID == answercomment.AnswerCommentID).FirstOrDefault();

    if (ac == null)
    {
        ac = new AnswerComment();
        ac.AnswerID = answercomment.AnswerID;
        ac.DisplayText = answercomment.DisplayText;
        ac.InsertDate = answercomment.InsertDate;
        ac.InsertUser = "save test user";
        ef.SaveChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:05:11.050

您创建的新实例

```
ac = new AnswerComment(); 
```

EF 不知道。它是 EF 从未见过的全新对象实例。

您必须将其添加到 ef.AnswerComments

```
ef.AnswerComments.Insert(ac); 
```

此外，确保 ChangeTracking 对`ef`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:07:46.773

我认为您错过了将其添加`AnswerComment`到上下文中，您必须这样做：

```
ac = new AnswerComment();
ac.AnswerID = answercomment.AnswerID;
ac.DisplayText = answercomment.DisplayText;
ac.InsertDate = answercomment.InsertDate;
ac.InsertUser = "save test user";

ef.AnswerComments.Add(ac);
ef.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:07:10.690

您永远不会将新项目插入表中：

```
ef.AnswerComments.Insert(ac);
ef.SaveChanges(); 
```

# java - Android中的调用方法

> ID：11401385
> 
> 赞同：1
> 
> 时间：2012-07-09T19:01:47.437
> 
> 标签：java, android

我正在尝试调用我编写的方法。它编译除了一行...

```
public class http extends Activity {

httpMethod();            //will not compile

public void httpMethod(){
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://site/api/");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        String test = "hello";

        TextView myTextView = (TextView) findViewById(R.id.myTextView);
        myTextView.setText(test);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
}    
} 
```

我不是最好的 java 人，但我认为像这样调用该方法会得到响应。“你好”没有显示但是......

如何正确调用该方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T19:03:45.970

编辑：只是为了让任何人都没有任何疑问，这个答案只解决了为什么你会得到一个编译时错误。它没有*说明*您应该在 Android 的哪个线程和什么时间做什么。

就我个人而言，我建议你暂时放下 Android，在更简单的环境（例如控制台应用程序）中学习 Java，然后，当你对这种语言感到满意时，重新访问 Android 并学习 Android 开发的所有要求——这显然是不仅仅是语言。

* * *

您正在尝试直接在您的类中调用方法作为语句。您不能这样做 - 它必须是构造函数、初始化程序块、其他方法或静态初始化程序的一部分。例如：

```
// TODO: Rename this class to comply with Java naming conventions
public class http extends Activity {
    // Constructor is able to call the method... or you could call
    // it from any other method, e.g. onCreate, onResume
    public http() {
        httpMethod();
    }

    public void httpMethod() {
        ....
    }
} 
```

请注意，我给出这个示例*只是*为了向您展示一个有效的 Java 类。这*并不*意味着您实际上应该从构造函数中调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:03:57.097

```
httpMethod(); 
```

应该在分配给变量的其他方法/构造函数（或）内。我怀疑您的要求可能是调用`httpMethod()`任一`onCreate()`（或）调用，`onResume()`因为您正在扩展 Activity。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:12:36.363

我认为您可能需要了解更多有关 Android[应用程序基础知识](http://developer.android.com/guide/components/fundamentals.html)，尤其是[Activity](http://developer.android.com/reference/android/app/Activity.html)类和`Activity`生命周期的信息。

您的第一个问题与尝试在您的`TextView`.

不要尝试在构造函数调用的任何方法中执行此操作。也许更重要的是，忘记为您创建的任何扩展类定义构造函数（或构造函数）`Activity`。

为了能够操作 的 UI 元素`Activity`，内容视图必须被膨胀。这是通过隐式使用`setContentView(...)`或显式使用来完成的`LayoutInflater`。最常见的做法`onCreate(...)`是在完成此操作之前，尝试使用`findViewById(...)`将返回`null`。这就是为什么尝试从`Activity`构造函数对 UI 执行任何操作都会失败的原因，除非您在构造函数（或由它调用的其他方法）中显式扩展布局。我不确定此时是否可以扩展布局，即使可以，我也不建议这样做。正如我所说，忘记`Activities`.

要做你想做的事（出于测试目的），你需要做类似的事情......

```
public class HttpActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.your_layout);

        httpMethod();
    }

    public void httpMethod() {
        ...
    }
} 
```

您的第二个问题，正如 Maxim 对您的问题的评论，即使我的示例适用于旧版本的 Android，如果您尝试在主线程（又名 UI 线程）上执行网络操作，较新的版本将引发异常，因为它们可能耗时并且可能导致线程被阻塞。正如 Maxim 建议的那样，您应该使用`AsyncTask`或在`Thread`主（UI）线程以外的某个线程上执行此操作。

# android - 预加载和缓存图像，然后从缓存中删除旧图像

> ID：11401386
> 
> 赞同：1
> 
> 时间：2012-07-09T19:01:48.750
> 
> 标签：android

我正在构建一个显示一系列图像的 Android 应用程序。

我想在后台预加载图像并将它们放入缓存中。

当用户看到图像时，无需继续缓存图像，因为用户无法返回图像，因此我想将它们从缓存中删除。

任何人都可以指出与此相关的网站吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:54:36.530

Android Developers 站点中的最佳实践有针对类似情况的解决方案。你可以在[这里查看](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)。唯一的问题是他们使用的`LRU`缓存会删除最近最少使用的图像，而不是您想要的最近使用的图像，但是您可以手动删除它们（作为快速修复解决方案）。希望有帮助。

# php - php从另一个函数中的私有函数返回FALSE

> ID：11401390
> 
> 赞同：0
> 
> 时间：2012-07-09T19:02:09.850
> 
> 标签：php, function, codeigniter

在我的 Codeigniter 控制器中，有以下验证文件上传的私有函数。

```
 private function avatar_file_validation()
     {
        $config['upload_path'] = './uploads/avatars/';
        $config['allowed_types'] = 'jpg|png';
        $config['overwrite'] = TRUE; //overwrite user avatar
        $config['max_size'] = '800'; //in KB

        $this->load->library('upload', $config);

        if (! $this->upload->do_upload('avatar_upload'))
        {
            $error_data = array('error' => $this->upload->display_errors());

            $this->avatar_view($error_data); //loads view

            return FALSE;
        }

     } 
```

如果上传时发生错误，我想停止此功能继续

```
function upload_avatar()
{

    //some code

    if($_FILES['entry_upload']['error'] !== 4) //if file added to file field
    {
        $this->avatar_file_validation(); //if returns FALSE stop code
    }

    //code continues: adds data to database, redirects

} 
```

但是，即使返回 false，该函数也会继续。它仅在我在 1 个函数中使用整个代码时才有效，但我需要将它们分开，因为我将在多个函数中使用上传验证。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:15:58.203

该表达式`return FALSE;`仅适用于函数`avatar_file_validation()`。如果你想在`upload_avatar()`上传失败时停止代码，你应该检查输出，`avatar_file_validation()`如果它等于`FALSE`，也从那个函数返回。

例如：

```
function upload_avatar()
{
    //some code

    if($_FILES['entry_upload']['error'] !== 4) //if file added to file field
    {
        if(!$this->avatar_file_validation()) //if returns FALSE stop code
            return FALSE;
    }

    //code continues: adds data to database, redirects
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:16:30.487

```
function upload_avatar()
{

    //some code

    if(!$_FILES['entry_upload']['error'] !== 4) //if file added to file field
    {
        if($this->avatar_file_validation()){
             return FALSE;
         }
    }

    //code continues: adds data to database, redirects

} 
```

# java - 放置操作的 LinkedBlockingQueue 问题

> ID：11401395
> 
> 赞同：1
> 
> 时间：2012-07-09T19:02:37.090
> 
> 标签：java, multithreading, tomcat, queue, blocking

我将尝试描述我面临的问题并用一些代码示例来支持它。我正在使用如下声明的 LinkedBlockingQueue：

```
private BlockingQueue<OutgoingMessage> outgoingMessageQueue = new LinkedBlockingQueue<OutgoingMessage>(); 
```

OutgoingMessage 表示要发送给客户的文本消息。它通过准备它的 Web 服务调用进入队列，将其保存到数据库并将其放入队列。应用程序部署在 tomcat 上，因此该线程是来自 HTTP 池的线程。

我创建了不同的线程来处理队列并进行实际的消息发送。它无限期地运行并在队列上调用 take() 方法，如下所示：

```
public void processOutgoingMessageQueue() {

             try {

                    OutgoingMessage outgoingMessage = outgoingMessageQueue.take();
                    logger.debug(MessageFormat.format("Took outgoing message with id = [{0}] from queue", outgoingMessage.getId()));

                    this.forwardToCommunicator(outgoingMessage);
             }
             catch (InterruptedException e) {
                     logger.fatal("Interupted while waiting to process outgoing messages ", e);                 }
             catch (Exception e) {
                     exceptionHandler.handle(e);
             }

    } 
```

从线程调用方法 processOutgoingMessageQueue()。

这是一种功能，将消息放入队列并稍后定期发送，但客户端（调用 Web 服务方法的一侧）不会在传出消息放入队列后立即获得响应，而是在线程从队列中取出它完成它的处理。看起来tomcat的HTTP池中的线程正在等待其他线程完成消息处理，然后将Web服务响应返回给客户端。这会导致糟糕的用户体验，因为用户必须等待整个过程完成才能将另一条消息排入队列。

这是一个显示消息已成功放入队列的日志：

```
[DEBUG] 2012-07-08 23:09:51,707 [http-8080-8] SimpleServiceCommunicatorImpl: Received sendMessage request from serviceId = [3], charginId = [3], text [some text]
[DEBUG] 2012-07-08 23:09:51,721 [http-8080-8] SimpleServiceCommunicatorImpl: Request verification succeeded, creating outgoing message.
[INFO ] 2012-07-08 23:09:51,738 [http-8080-8] SimpleMessageCreatorImpl: Created outgoing message with id = [1,366] and payment invoice with id = [1,323]
[INFO ] 2012-07-08 23:09:51,738 [http-8080-8] Core: Enqueued outgoing message with id = [1,366] 
```

这是显示正在执行发送消息请求的客户端日志：

```
DEBUG 2012-07-08 23:09:51,702 CoreAdapter: Sending message with serviceId = [3], chargingId = [3], text = [some text]
INFO  2012-07-08 23:10:06,477 SimpleMessageSenderImpl: Created answer with core id = [1,366]
INFO  2012-07-08 23:10:06,477 SMSChatServiceImpl: Response message with result = 1366 sent to the customer 
```

它表明在传出消息大约 15 秒后返回的请求被放入队列中，尽管线程 HTTP 8080-8 没有更多工作要执行。

**更新**

这是将传出消息放入队列的方法：

```
public void enqueueOutgoingMessage(OutgoingMessage outgoingMessage) {
            try {
                    outgoingMessageQueue.put(outgoingMessage);
                    logger.info(MessageFormat.format("Enqueued outgoing message with id = [{0}]", outgoingMessage.getId()));
            }
            catch (InterruptedException e) {
                    logger.fatal("Interupted while waiting to enqueue outgoing message. ", e);
            }
    } 
```

这是处理队列的线程：

```
 // outgoing message queue
            this.outgoingMessageQueueProcessingThread = new Thread(new Runnable() {

                    public void run() {
                            while (!stopQueueProcessing) {
                                    Core.this.processOutgoingMessageQueue();
                            }

                    }
            });

            this.outgoingMessageQueueProcessingThread.start(); 
```

stopQueueProcessing 是一个在应用关闭时设置为 false 的标志。

这可能是已知的 tomcat 或 LinkedBlockingQueue 问题吗？

有人有想法吗？需要更多细节，我很乐意提供。

# javascript - Javascript Process Kill with pass in name

> ID：11401398
> 
> 赞同：0
> 
> 时间：2012-07-09T19:02:54.963
> 
> 标签：javascript, windows, process, wsh, kill-process

我正在寻找一个简短的 javascript 代码来杀死在我的 windows 机器上运行的进程（我正在 7 上开发程序，但它必须在服务器 2003 上的生产中运行）。我从以下代码开始：

```
w = new ActiveXObject("WScript.Shell");
w.run("taskkill.exe /im iexpore.exe");
return true; 
```

我需要使被杀死的过程成为我传递的东西。有许多不同的东西要杀死，我有另一个程序可以确定要杀死的东西。

我现在有以下代码，但它仍然不起作用：

```
Dim prcid
Dim check
Dim Inp
Set Inp = WScript.Arguments
check=0
Set objService = GetObject("winmgmts:")

For Each Process In objService.InstancesOf("Win32_process")
  If process.name= "Inp" Then
    prcid=process.processid
    check=1
    Exit For
  End If
Next

If check =0 Then
  WScript.Quit [ExitCode]
End if

For Each process In objService.InstancesOf("Win32_process")
  If process.name= "Inp" Then
    If process.processid=prcid Then
        strComputer = "."
        Set objWMIService = GetObject("winmgmts:" _ 
          & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
        Set colProcessList = objWMIService.ExecQuery _
          ("SELECT * FROM Win32_Process WHERE Name = 'Inp'")
        For Each objProcess in colProcessList
            objProcess.Terminate()
        Next
    End If

    Exit For
  End If
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:18:26.993

我假设您使用的是 Windows 脚本主机。

您可以像这样访问脚本的参数：

```
objArgs = WScript.Arguments;
for (i = 0; i < objArgs.length; i++)
{
   WScript.Echo(objArgs(i));
} 
```

我假设您希望将要终止的进程作为参数传递给脚本。

T。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-28T10:35:55.817

您提到了 javascript，但您的代码是 VB 脚本，所以应该有一个 .vbs 扩展名。那会是你的问题吗？

# c++ - 我可以使用数据库查询扩展什么 dns 服务器？

> ID：11401399
> 
> 赞同：0
> 
> 时间：2012-07-09T19:03:00.197
> 
> 标签：c++, dns

基本上我想做以下事情：

```
string resolveDns(string host){
    string rootId = "SOME_ID";
    string id = rootId;
    string []zones = host.split('.');
    for (int i = zones.count() - 1; i >= 0; i--){
        id = getZoneId(id, zones[i]);
    }
    string []ips = getZoneIps(id);
    if (ips.count() == 1){
        return ips[0];
    } else {
        return getLeastLoadedIp(ips);
    }
}

string getZoneId(string rootId, string zoneName){
    return Sql.prepare("SELECT id FROM zones WHERE parent_id=%s AND name=%s", rootId, zoneName);
}

string getZoneIps(string id){
    return Sql.prepare("SELECT ip FROM zones WHERE parent_id=%s", id);
}

string getLeastLoadedIp(string []ips){
    if (inMem){
        int min = INT_MAX;
        string ip = null;
        for (int i = 0; i < ips->count(); i++){
            int count = HashTable.get(queue_length, ips[i]);
            if (count < min){
                ip = ips[i];
                min = count;
            }
        }
        return ip;
    } else {
        return Sql.prepare("SELECT ip FROM zones WHERE ip IN (%a) ORDER BY queue_length ASC LIMIT 1", ips);
    }
}
```

什么 DNS 服务器允许我这样做？（C 或 C++ 都可以）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:53:30.600

我认为（不确定）PowerDNS 支持自定义后端。另一种方法（只是做梦）可能是使用普通的数据库后端，并使用一些 SQL 存储过程，这些过程总是返回负载最少的 IP。此外，许多 DNS 服务器都是开源的，因此您可以根据需要修改代码。此外，BIND10 将是模块化的，并且将支持扩展（不记得如何准确地调用它们），也许这个功能可以作为这样的“扩展”添加。但我认为这个 BIND10 功能还没有准备好。

不要忘记 TTL。可能您的方法仅对低 TTL 有意义。

我认为一些商业解决方案具有此功能，可能 F5 有，但我想这不是你想要的。

# apache-flex - Flex Mobile 处理 XML 数据

> ID：11401400
> 
> 赞同：0
> 
> 时间：2012-07-09T19:03:06.527
> 
> 标签：apache-flex, mobile

我正在冒险使用 Flex 开发移动应用程序。

我正在尝试使用 HttpService 连接到返回 XML 数据的 url。

```
<s:HttpService id="test" url="UrlToConnectTo" /> 
```

在脚本中：

```
private function init() :void
{
  test.send();
} 
```

我绑定到列表的服务的最后一个结果..

```
<s:List id="list" top="0" bottom="0" left="0" right="0"
  dataProvider="{test.lastResult.Item.FiscalYear }" 
        labelField="ItemDescription"/> 
```

是否有其他替代方法来处理服务返回的数据？我想检查数据，但我不确定绑定到列表后是什么类型的数据（数组、数组集合？？）。

旁注：我也可以通过 JSON 获取数据，但我无法将正确检索到的数据绑定到列表控件。

感谢提供的任何链接/见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:13:48.463

```
Are there other alternate means of handling data returned by services? 
```

是的，s，使用[结果事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/HTTPService.html#event%3aresult)处理程序。概念上是这样的：

```
<s:HttpService id="test" url="UrlToConnectTo" result="onResult(event)" /> 
```

还有你的处理方法：

```
protected function onResult(event:ResultEvent):void{
  trace(event.result);
  // convert XML result to XMLListCollection
  var myCollection : XMLListCollection = new XMLListCollection(event.result as XML);
  // convert array result to ARrayCollection
  var myCollection : ArrayCollection = new ArrayCollection(event.result as Array);
} 
```

您很可能希望将返回的数据转换为 Flex 中更有用的数据。XML 到 XMLList 或 Array 到 ArrayCollection，作为两个示例。

# jquery - 不使用邮件形式发送信息？

> ID：11401405
> 
> 赞同：2
> 
> 时间：2012-07-09T19:04:03.080
> 
> 标签：jquery, html, forms, email

我目前正在一个网站上工作...我遇到了一个错误...

我正在使用此邮件表格：

```
jQuery(document).ready(function($){

// hide messages 
$("#error").hide();
$("#sent-form-msg").hide();

// on submit...
$("#contactForm #submit").click(function() {
    $("#error").hide();

    //required:

    //name
    var name = $("input#name").val();
    if(name == ""){
        $("#error").fadeIn().text("Name required.");
        $("input#name").focus();
        return false;
    }

    // email
    var email = $("input#email").val();
    if(email == ""){
        $("#error").fadeIn().text("Email required");
        $("input#email").focus();
        return false;
    }

    // web
    var web = $("input#web").val();
    if(web == ""){
        $("#error").fadeIn().text("Web required");
        $("input#web").focus();
        return false;
    }

    // comments
    var comments = $("#comments").val();

    // send mail php
    var sendMailUrl = $("#sendMailUrl").val();

    //to, from & subject
    var to = $("#to").val();
    var from = $("#from").val();
    var subject = $("#subject").val();

    // data string
    var dataString = 'name='+ name
                    + '&email=' + email        
                    + '&web=' + web
                    + '&comments=' + comments
                    + '&to=' + to
                    + '&from=' + from
                    + '&subject=' + subject;                                 
    // ajax
    $.ajax({
        type:"POST",
        url: sendMailUrl,
        data: dataString,
        success: success()
    });
});  

// on success...
 function success(){
    $("#sent-form-msg").fadeIn();
    $("#contactForm").fadeOut();
 }

return false;
}); 
```

我的页面上有这个：收集信息并将其转发到电子邮件地址。

```
<!-- form -->
            <form id="contactForm" action="#" method="post" />
                <fieldset>

                    <p>
                        <label for="name">Naam</label>
                        <input name="name" id="name" type="text" class="form-poshytip" title="Enter your full name" />
                    </p>

                    <p>
                        <label for="email">Email</label>
                        <input name="email" id="email" type="text" class="form-poshytip" title="Enter your email address" />
                    </p>

                    <p>
                        <label for="comments">Bericht</label>
                        <textarea name="comments" id="comments" rows="5" cols="20" class="form-poshytip" title="Enter your comments"></textarea>
                    </p>

                    <!-- send mail configuration -->
                    <input type="hidden" value="kai.zaper@gmail.com" name="to" id="to" />
                    <input type="hidden" value="Jebike EmailForm mail" name="subject" id="subject" />
                    <input type="hidden" value="send-mail.php" name="sendMailUrl" id="sendMailUrl" />
                    <!-- ENDS send mail configuration -->

                    <p><input type="button" value="Send" name="submit" id="submit" /> <span id="error" class="warning">Oeps, er is iets fout gegaan, probeer opnieuw.</span></p>
                </fieldset>

            </form>
            <p id="sent-form-msg" class="success">Uw email is verzonden.</p>
            <!-- ENDS form --> 
```

但它没有发送任何电子邮件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:09:09.050

它似乎与`$`和冲突`jQuery`。

宣布`$.noConflict();`

## 例子：

```
$.noConflict();
jQuery(document).ready(function($){

   // hide messages 
   $("#error").hide();
   ...
   ...
   ...
}); 
```

**或者**

使用这种方式

```
jQuery(document).ready(function(){
    // hide messages 
    jQuery("#error").hide();
    ...
    ...
    ...
}); 
```

或者这样

```
$(document).ready(function(){
    // hide messages 
    $("#error").hide();
    ...
    ...
    ...
}); 
```

请参阅有关**[jQuery.noConflict()的文档](http://api.jquery.com/jQuery.noConflict/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:16:42.093

尝试检查您的数据是否真的像这样发送到您的 php （只需取消注释成功功能并删除当前...）：

```
 $.ajax({
  type:"POST", //php method
  url:'process.php',//where to send data...
  cache:'false',//IE FIX
  data: data,

 //check is data sent successfuly to your process.php
 //success:function(response){
 //alert(response)
 //}

success: function(){ //on success do something...

$('.success').delay(2000).fadeIn(1000);

//alert('THX for your mail!');
} //end sucess 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-18T22:03:59.303

您必须将按钮的类型“按钮”更改为“提交”。

# php - 加入多个表（关注/活动）

> ID：11401407
> 
> 赞同：1
> 
> 时间：2012-07-09T19:04:07.590
> 
> 标签：php, mysql

我有 2 张桌子

**下列的**

```
id
User_ID
Following_user_ID 
```

正在`User_ID`跟随`Following_user_ID`

**活动**

```
A_ID
User_ID
Shared 
```

（`User_ID`列是将数据插入表中的用户。）

我将如何构建查询以选择当前登录的用户在 Activity 的 User_ID 列中关注用户的所有活动行。

*例子*

**下列的**

```
id = 1
User_ID = 1
Following_user_ID = 2 
```

用户 1 正在关注用户 2

**活动**

```
A_ID = 1
User_ID = 2
Shared = Blah Blah 
```

我怎样才能让用户 1（当前登录）可以看到用户 2 的活动，因为用户 1 正在关注用户 2？

从上面的示例中，用户 1 应该能够看到“用户 2 共享 Blah Blah”。

我试图尽我所能解释这一点，一直试图弄清楚查询，但无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:10:10.957

```
SELECT * FROM Activity A
JOIN Following F ON F.Following_user_ID = A.User_ID 
WHERE F.User_ID = 1 
```

如果登录用户为 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:10:22.947

试试这个：

```
Select * From following as F
join Activity as A 
on F.user_id=A.a_id
where a.user_id=1
group by following_user; 
```

其中 1 是被关注的用户的 id。

# html - 如何使网站上的文本看起来是手写的，但不可读

> ID：11401409
> 
> 赞同：5
> 
> 时间：2012-07-09T19:04:15.487
> 
> 标签：html, css, fonts, webfonts

我的网页上有一个“留言簿”图像，用作登录框。忠实于主题，我显示了每个登录阅读该特定文章的人的姓名，并在登录框之前列出了他们的姓名（试图营造真实留言簿的感觉）。当然，有些用户可能想登录但不显示他们的真实姓名，所以我添加了一个复选框，允许他们标记他们的姓名以进行混淆。

我认为整合它的最流畅的方法，因为在“留言簿”上拥有正确数量的“签名”是有一些价值的，那就是让正常的名字出现在标准的脚本字体中（例如画笔脚本），然后有“隐藏”名称的行看起来像笔迹，但实际上并不可读。

我能想到的唯一方法是找到一个不可读的字体，在 css 中定义它以供浏览器下载，然后将其应用于隐藏的名称。为了更好地衡量，我可以用随机选择的“John Doe”、“Jane Doe”、“Jayne Doe”等替换真实姓名，以防有人查看源代码。然而，经过一个小时的搜索，我一直无法找到符合我标准的字体，我想知道是否有更好的方法来处理这个问题。

所以我希望有人可以建议一种可能适合我需要的字体，或者提出更好的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:40:17.943

我遇到了一个[**免费字体集**](http://www.letterror.com/foundry/goodies/index.html)，您可能对 PC 和 MAC 都感兴趣。

**印刷字字体：**

![在此处输入图像描述](../Images/0eec3b91e2f2e56aa3b7fa3b611240c5.png)

**书面文字字体：**

![在此处输入图像描述](../Images/5a6c35d58901c3691b53d259c940298b.png)

上面的两个样本都在`12px`.

由于图像尺寸小，它们以 100% 无失真质量（双关语）被看到。

使用内置的[**Windows Font Map Viewer**](http://tlt.its.psu.edu/suggestions/international/accents/charmap.html)或[**MAC Font Book**](http://support.apple.com/kb/HT2509)查看字体文件的所有字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:10:08.297

如果名称不可读，请在 Photoshop 中制作一些不可读名称的图像，然后随机加载它们以代替实际名称。这将比使用 CSS 和特殊字体更容易和更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:09:36.177

打乱名字的字母或完全替换它们怎么样？对于不想透露姓名的人，您可以只使用随机字母。例如，“John”可以变成“ojhn”或简单地变成“sghj”。

# ruby - 正则表达式在 pry、rubular 中匹配和捕获，但不是来自脚本

> ID：11401413
> 
> 赞同：0
> 
> 时间：2012-07-09T19:04:52.397
> 
> 标签：ruby, regex

所以，我有一个在 Rubular 和 CLI 上测试过的正则表达式（使用`pry`gem）。这会解析自定义 Apache 日志格式。当我在 pry 中向它提供输入时，它按预期工作（例如`$~`已填充）。Rubular 还报告了各种输入行的正确匹配和分组。从下面的代码运行时，没有匹配项。

我也尝试过弄乱角色`String.chomp!`，`\n`以防万一导致比赛失败，但是各种排列都没有效果。

我敢肯定，更有经验的 Rubyist 可以对此有所了解。

Rubular 链接：[http ://www.rubular.com/r/fycHVYZdZz](http://www.rubular.com/r/fycHVYZdZz)

这是相关的代码、正则表达式和输入——提前致谢：

```
log_regex = %r{
            (?<ip>(([0-9]{1,3}\.){3}[0-9]{1,3}))                                                                   
            \s-\s
            (?<src_ip>.*)
            -\s
            (?<date>\[.*\])
            \s
            (?<url>".+")
            \s
            (?<response>\d{3})
            \s
            (?<length>\d+)
            \s
            (?<referer>".+")
            \s
            (?<useragent>".*")
            \s(?<host>.*)?
            /ix
            }

logfile = ARGV[0]

def process_log(log_regex,logfile)
    IO.foreach(logfile, 'r') do |line|
        line.chomp!
        log_regex.match(line) do |m|
            puts m['ip']
        end
    end
end

process_log(log_regex,logfile) 
```

样本输入：

```
209.123.123.123 - - [05/Jul/2012:11:02:01 -0700] "GET /url/mma/rss2.0.xml HTTP/1.1" 301 0 "-" "FeedBurner/1.0 (http://www.FeedBurner.com)" xml.somewhere.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:09:38.750

您可能想仔细查看正则表达式的定义。您的标志位于模式的定义内，而不是跟随`%r`它们所属位置的关闭：

```
%r{
...
/ix
} 
```

应该：

```
%r{
...
}ix 
```

来自 IRB：

```
irb(main):001:0> %r{foo/ix}
/foo\/ix/
irb(main):002:0> %r{foo}ix
/foo/ix
irb(main):003:0> %r{^foo$}ix =~ 'foo'
0
irb(main):004:0> %r{^foo/ix$} =~ 'foo'
nil 
```

对于上述测试，PRY 和 IRB 都返回相同的结果。

# java - 避免贫血域

> ID：11401420
> 
> 赞同：3
> 
> 时间：2012-07-09T19:05:35.200
> 
> 标签：java, design-patterns

我在数据库中有一个类似于“国家/省/城市”的列，例如“加拿大/安大略/多伦多”。我需要将它们拆分并将它们映射到 3 个单独的 Java Bean 属性中。

我想知道在哪里最好做到这一点？

(1) 检索行时的 DAO (2) 调用域 (Bean) 作为 setter 是 getter (3) 解析查询中的行的 SQL 函数 (4) 使用 ResultSetExtractor

我倾向于#2 或#4，因为“贫血域”反模式似乎表明 Bean 是一个合适的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:23:35.670

我不确定我是否同意你的看法；您可能会争辩说域实体不需要受数据表示的影响。
如果您的数据库布局不同，您会考虑使用带有 setter 和 getter 的 bean 吗？
我你的回答是“不”，那么你可能不想要那个选项。

就个人而言，我认为如果你有一个数据访问层，那是其工作的一部分——将数据表示转换为域表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:28:33.060

恕我直言，最好的地方是数据库。我会将此列拆分为表中的 3 列，并按列存储一个信息。

如果由于遗留原因这确实不是一个选项，我确实会直接在域对象中执行此操作。这种行为可以直接封装在域对象中，而不会对其他实体产生任何影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:35:24.053

如果这是一个 JPA `@Entity`，那么我会将私有 String 直接映射到 DB 列，然后制作公共 getter 来包装对它的访问。这样，您的域模型的消费者与连接字符串的内部/数据库表示隔离。或者，您可以在`@PostLoad`回调中进行翻译。（持久化的反向翻译可以在`@PrePersist`回调中完成。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:02:16.200

您的 1\. 和 4\. 实际上不是相同的解决方案吗？我想你会使用`ResultSetExtractor`你的 DAO 代码。使用 SQL 函数并不是一个坏主意，因为它可以从其他技术中重用，但存在维护问题。

我不建议将解析延迟到有时间，因为从性能方面来看它并不好，并且在使用这些字段执行其他任务时会使您的生活变得复杂。如果你的 bean 已经有了这三个字段，那就更干净了。

# carousel - ADF - 将多个数据控件绑定到轮播项目

> ID：11401428
> 
> 赞同：0
> 
> 时间：2012-07-09T19:06:14.750
> 
> 标签：carousel, oracle-adf, jspx

我目前正在尝试将 3 个不同的图表绑定到轮播中的轮播项目。但我不确定如何将 3 个不同的数据控件绑定到它。

我读过的每一件事都让您将 1 个数据控件绑定到轮播项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:22:27.787

就模型而言，轮播项目基于单个集合，因此基于单个数据控件。您可以将其他数据控件的内容添加到项目中，但这需要您手动将当前显示的轮播项目与其他数据控件为其显示的数据同步。

检查这个类似的解决方案：[http ://www.oracle.com/technetwork/developer-tools/adf/learnmore/81-master-detail-tab-with-graphs-394252.pdf](http://www.oracle.com/technetwork/developer-tools/adf/learnmore/81-master-detail-tab-with-graphs-394252.pdf)

# python - Python关闭Shell而不弹出

> ID：11401433
> 
> 赞同：1
> 
> 时间：2012-07-09T19:06:32.450
> 
> 标签：python

我正在寻找在没有 Kill 的情况下退出 python shell 的方法？弹出窗口

```
print ("Hello")
print ("Press any key to exit")
ex = raw_input ("")
exit 
```

我说的是 Windows 的 python shell，而不是命令提示符。

这是我想在用户按下任意键后忽略并关闭程序的弹出窗口。

![在此处输入图像描述](../Images/1fa2d5ca483e30d0d4514341b83c3281.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:08:24.170

在exit() 后加括号，调用exit 函数。就像现在一样，它没有将其作为函数执行。

以下将退出脚本而不显示命令提示符，但您仍需要自行退出 IDLE。

```
import os

print ("Hello")
print ("Press any key to exit")
ex = raw_input ("")
os._exit(0) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-08T13:09:23.667

=================================重新开始================= ================

我建议您输入以下内容：

`import os`

`ex = input("Press Enter to close to program.")`

`os._exit(0)`

# git - GIT Packfile 声称有更多对象，无法访问

> ID：11401434
> 
> 赞同：7
> 
> 时间：2012-07-09T19:06:34.797
> 
> 标签：git, object, git-pull

我遇到了关于我的包文件的多个错误，这些错误看起来非常隐蔽，这是一个非常可怕的交易，因为这是一个实时站点并且不知道如何处理它，也许有人可以通过它告诉我，这是发生了什么。

看来我有一个丢失的对象，而且我的包文件的计数也不好？

```
remote: Counting objects: 25733, done.
remote: Compressing objects: 100% (12458/12458), done.
remote: Total 19185 (delta 6914), reused 17995 (delta 6535)

Receiving objects: 100% (19185/19185), 1.69 GiB | 465 KiB/s, done.
Resolving deltas: 100% (6914/6914), completed with 1058 local objects.

error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack claims to have 19185 objects while index indicates 20243 objects
error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack cannot be accessed
error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack claims to have 19185 objects while index indicates 20243 objects
error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack cannot be accessed
error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack claims to have 19185 objects while index indicates 20243 objects
error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack cannot be accessed

error: unable to find e17196d88ae91dea07b4d61716b91dac581fb131

error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack claims to have 19185 objects while index indicates 20243 objects
error: packfile .git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack cannot be accessed

fatal: object e17196d88ae91dea07b4d61716b91dac581fb131 not found 
```

**编辑** 另一个似乎已经发芽了，所以现在我有....

```
.git/objects/pack/pack-1f0643b00b9c201338b7f1365ef188ef682a6a9e.pack 
.git/objects/pack/pack-931e28ca404e28040a10085dd1534ef12cf18c6d.pack 
```

我已经尝试将它们复制到 www-root 并删除它们，现在正在运行`git-gc`并尝试使用`git fetch origin`

`git-gc`现在返回

```
bad sha1 file: .git/objects/05/.a2e1939ce5a53d5ec7c3cacc4df97acd09c6af.hdgIVe
bad sha1 file: .git/objects/80/.1a75684e9d869e9ed7c1ded674c55caa17c524.YUr1Yu
bad sha1 file: .git/objects/8c/.7e8381b3e0d0a1f1d4fa328f0dda0a1dbd814a.L0255H
bad sha1 file: .git/objects/c5/.32926ac2d67785cb8580b885ac3d3fd7075f57.rDsW4H
Removing stale temporary file .git/objects/pack/tmp_pack_jnP5qn 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-08T21:26:55.387

如“[损坏的 git repo 的问题](https://stackoverflow.com/q/14569172/6309)”及其[相关讨论中](https://chat.stackoverflow.com/rooms/23528/discussion-between-chronial-and-newben)所述：

> 然后将其中许多对象打包到一个包文件中以节省空间。你通过改变它们的内容破坏了这些包文件——更糟糕的是：改变它们的内容的长度。
> **[`git fsck`](http://git-scm.com/docs/git-fsck)实际上并没有修复关于 git 存储库的任何内容，它只是检查错误并报告它们**。
> [`git unpack-objects`](https://git-scm.com/docs/git-unpack-objects)另一方面，能够从损坏的包文件中尽可能多地解包，但您的 repo 中仍然会出现错误，正如`git fsck --full`将报告的那样。
> 请参阅“[如何修复损坏的存储库？](https://git.wiki.kernel.org/index.php/GitFaq#How_to_fix_a_broken_repository.3F) ”或“[如何从存储库中删除所有损坏的引用？](https://git.wiki.kernel.org/index.php/GitFaq#salvage) ”。

* * *

请注意，对于 Git 2.4.3（2015 年 6 月），不再有警告`packfile .git/objects/pack/pack-xxx.pack cannot be accessed`。
这允许只关注实际错误。

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 319b678](https://github.com/git/git/commit/319b678a7b7c7fd03242b2b91d936f65e798cd06) [2015 年 3 月 31 日] 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 3c91e99](https://github.com/git/git/commit/3c91e9966aae9ad73a27f7066551b2861d8c8849))^(中，2015 年 6 月 5 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

和 Peff 一样，这个解释很有启发性：

> ## `sha1_file`: 静噪 " `packfile cannot be accessed`" 警告

> 当我们在包文件索引中找到一个对象时，我们确保我们仍然可以打开包文件本身（或者它已经打开），因为它可能已被同时重新打包删除。
> 如果我们无法访问包文件，我们会为用户打印一个警告并告诉调用者我们没有该对象（然后我们可以在放弃之前查看其他包文件，或者找到一个松散的版本）。
> 
> **我们打印给用户的警告并没有真正完成任何事情，它可能会让用户感到困惑**。
> 
> 在正常情况下，它是完全噪声；我们在其他地方找到了对象，用户不必关心我们看到了一个过时的包文件索引。完全不影响操作。
> 
> 一个可能更有趣的情况是我们后来找不到对象，并向用户报告失败。在这种情况下，警告可以被认为是最终失败的线索。但这在实践中并不是一个真正有用的线索。我们甚至不会一致地打印它（因为我们正在与另一个进程竞争，我们甚至可能看不到`.idx`文件，或者我们可能赢得比赛并打开包文件，完成操作）。
> 
> 此补丁完全删除警告（不仅来自`fill_pack_entry`站点，还来自相同的使用`pack-objects`）。
> 如果我们确实发现错误情况下的警告很有趣，我们可以把它塞进去并在稍后`die()`由于对象损坏时将其显示给用户。但这种复杂性是不值得的。

* * *

在 Git 2.22.1（2019 年第三季度）中，“ `git update-server-info`”过去常常在其输出中留下陈旧的包文件，这已得到纠正。

请参阅[Eric Wong ( ) 的](https://github.com/ele828)[commit e941c48](https://github.com/git/git/commit/e941c48d49ebe24404515acf258d8003f2374627)（2019 年 5 月 23 日[）](https://github.com/ele828)。 帮助者：[Jeff King (](https://github.com/peff) [)](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 776d668](https://github.com/git/git/commit/776d668142070cd1234bcc9df6661d372cae2e16))^(中，2019 年 7 月 25 日）)[`ele828`](https://github.com/ele828)
[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `server-info`：不列出未链接的包

> 包含不存在的包`objects/info/packs`会导致愚蠢的 HTTP 客户端中止。
> 
> `v2``ALLOC_GROW`：按照 Jeff King 的建议使用单循环

* * *

在 Git 2.35（2022 年第一季度）中，tmp-objdir API 有了新接口，以帮助在核心内使用隔离功能。

请参阅[Neeraj Singh ( ) 的](https://github.com/neerajsi-msft)[提交 ecd81df](https://github.com/git/git/commit/ecd81dfc79cf12cc21fc0340da8ca8fcc5aa58a7)和[提交 b3cecf4](https://github.com/git/git/commit/b3cecf49eac00d62e361bf6e6e81392f5a2fb571)（2021 年 12 月 6 日[）](https://github.com/neerajsi-msft)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 0dc90d9](https://github.com/git/git/commit/0dc90d954db852c6604796b8d817365f94e92a16))^(中，2022 年 1 月 3 日）)[`neerajsi-msft`](https://github.com/neerajsi-msft)
^([`gitster`](https://github.com/gitster))

> ## [`tmp-objdir`](https://github.com/git/git/commit/b3cecf49eac00d62e361bf6e6e81392f5a2fb571)：用于创建临时可写数据库的新 API
> 
> ^(基于补丁程序：Elijah Newren)
> ^(签署人：Neeraj Singh)
> ^(审核人：Elijah Newren)

> `tmp_objdir`API 提供了创建临时对象目录的能力，但其设计目标是让子进程访问这些对象存储，然后主进程将对象从它迁移到主对象存储或只是删除它。
> 子进程会将其视为其主要数据存储并对其进行写入。
> 
> 在这里，我们添加了`tmp_objdir_replace_primary_odb`将当前进程的可写“主”对象目录替换为指定目录的功能。
> 以前的主对象目录在`tmp_objdir_migrate`或中恢复`tmp_objdir_destroy`。
> 
> 对于用例，在 object_database`` 中`--remerge-diff`添加一个新`will_destroy`标志`struct` 来标记不需要 fsync 持久性的临时对象数据库。
> 
> 添加 ' [`git prune`](https://github.com/git/git/blob/b3cecf49eac00d62e361bf6e6e81392f5a2fb571/Documentation/git-prune.txt)' ^(( [man](https://git-scm.com/docs/git-prune) ))支持以删除临时对象数据库，并确保它们的名称以`tmp_`特定于操作的名称开头并包含。

修剪消息来自：

```
Removing stale temporary file ... 
```

到：

```
Removing stale temporary directory ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:17:56.520

看起来另一个回购中有一些腐败。如果它是中央仓库，请从您的仓库中重新克隆它，然后让每个人都推送他们的分支。在那之后你的拉动应该起作用 - 除非你无法传达你正在向所有人修复回购的消息。

# actionscript-3 - DoubleClick Studio V2 AS3

> ID：11401435
> 
> 赞同：0
> 
> 时间：2012-07-09T19:06:34.673
> 
> 标签：actionscript-3, flash

你好 Stack Overflow 社区，

我正在使用 Google 的 DoubleClick Studio 版本 2 AS3。

我正在使用 Flash CS5.5。

我已经阅读了 DoubleClicks 关于如何使用 Rich Media（换句话说，使用视频）制作横幅广告的材料。

我有一个父 swf 和一个子 swf。网页加载完成后，父级加载子级 swf。

我的孩子 swf 是这样组织的：场景 1 和第 1 层。第 1 层在舞台上有一个 MovieClip，其中包含我所有的横幅元素（视频播放器、视频播放器按钮、文本、背景、图像和 CTA 按钮再次这些正在使用DoubleClick Studio 组件）。此影片剪辑的实例名称为“Spread_1”。此影片剪辑包含视频播放器高级组件。

我了解视频播放器高级组件。我知道在组件检查器中放置什么，但有一个例外，当我在“视频结束选项”中时，我有三个单选按钮选项和第四个调用函数的选项。在文本字段中，我放置了这个函数“lastframe()”

在动作层中，我将代码放置到视频播放器高级组件调用的函数中。该函数的代码是这样的：

```
**function lastFrame(){
    gotoAndStop(2, "Spread_1")
}** 
```

该函数位于影片剪辑“Spread_1”的第一帧。我的意图是当视频停止播放时，我想转到第 2 帧。

当我测试横幅时，我得到这个输出：

```
**[0.01] Enabler: Simulating page load.
[2.08] Enabler: Page loaded.
[2.45] Enabler: Video event for: 'cakePlayer': EVENT_VIDEO_PLAY
[2.45] Enabler: Video event for: 'cakePlayer': EVENT_VIDEO_VIEW_TIMER
[7.54] Enabler: Video event for: 'cakePlayer': EVENT_VIDEO_MIDPOINT
[12.83] Enabler: Video event for: 'cakePlayer': EVENT_VIDEO_COMPLETE
[12.83] Enabler: Video event for: 'cakePlayer': EVENT_VIDEO_VIEW_TIMER
ArgumentError: Error #2108: Scene Spread_1 was not found.
    at flash.display::MovieClip/gotoAndStop()
    at H100_fla::Spread_1_1/lastFrame()
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at com.google.ads.studio.utils::FunctionUtils$/invokeStringAsFunction()
    at MethodInfo-37()
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at com.google.ads.studio.video::EnhancedVideoController/completeHandler()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at com.google.ads.studio.video::VideoEventDispatcher/dispatch()
    at com.google.ads.studio.video::VideoEventDispatcher/monitorPlayHead()
    at flash.utils::Timer/_timerDispatch()
    at flash.utils::Timer/tick()** 
```

我不明白这个错误，我是使用 DoubleClick Studio Version2 AS3 的相对新手。

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:44:41.340

gotoAndStop 函数的第二个参数是场景名称，但您传递的是影片剪辑的名称。

```
ArgumentError: Error #2108: Scene Spread_1 was not found. 
```

如果您想继续主时间线的第 2 帧，请尝试以下操作：

```
function lastFrame(){ 
    gotoAndStop(2)
} 
```

或者如果你想在 Spread_1 mc 中进行第 2 帧

```
function lastFrame(){
    Spread_1.gotoAndStop(2);
} 
```

如果您只有一个，则无需将场景名称作为参数发送。

# c# - 我应该在哪里将我的实体转换为 DTO？

> ID：11401447
> 
> 赞同：2
> 
> 时间：2012-07-09T19:07:09.730
> 
> 标签：c#, domain-driven-design

我的架构如下所示：

*   领域
    *   实体
    *   接口
    *   DTO
*   基础设施
    *   甲骨文
    *   存储库
*   服务
    *   网页服务

我想使用 AutoMapper 来转换它。我希望我的服务层只知道 DTO，所以我猜我的接口和存储库会返回转换后的 DTO。至于另一个方向，我会假设我的存储库将采用 DTO 并转换为实体？我是在正确的道路上还是在左侧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:31:28.240

1.  您的存储库应该只处理围绕行为和事务设计的域聚合。

2.  处理命令时，您的应用程序层（Web 服务）应该调用域模型上的逻辑，将聚合保存回存储库。

3.  当客户端需要来自 Web 服务的数据时，您有两种选择：

    *   从存储库中获取聚合并将它们映射到 POCO DTO（可能使用 AutoMapper）。
    *   创建一个精简的数据访问层，专门用于直接向 DTO 查询数据。

后一种方法是我的偏好。正如我所说，域聚合**应该**由行为和事务来设计。它们不是为在屏幕上显示数据而设计的。尝试将数据从正确设计的域实体（即正确封装）映射到数据消费者（例如 UI）的 DTO 始终是一个尴尬的过程。它是圆孔中的方形钉。在我看来，提供一个简单的数据访问层来返回客户端所需的任何数据要容易得多。域模型不需要参与这个过程；这只是数据。这是[CQRS](http://codebetter.com/gregyoung/2010/02/16/cqrs-task-based-uis-event-sourcing-agh/)的基本原理。

在任何情况下，它都应该是应用层（Web 服务）将域实体转换为 DTO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:08:53.540

您的服务层应该返回实体，而您的表示层（控制器驻留恕我直言）应该将实体转换为映射到您的用户界面（DTO）的对象。当然，这也意味着您的存储库将返回正常实体。

不要忘记只创建一次映射。创建一个引导程序或创建所有映射的东西，然后您只需在控制器中调用 Mapper.Map() 。

# xslt - XSL 转换不显示小数

> ID：11401452
> 
> 赞同：0
> 
> 时间：2012-07-09T19:07:21.307
> 
> 标签：xslt, xpath, solr

这样做的背景是我正在使用 Solr 搜索结果。结果以 XML 形式返回。我正在使用 XSL 转换来显示结果。

```
<table>
<thead>
<tr>
<th>Name</th>
<th>Age</th>
<th>Latitude</th>
<th>Longitude</th>
</tr>
</thead>
<xsl:for-each select="response/result/doc">
<xsl:sort select="str[@name='Name']"/>
<xsl:sort select="int[@name='Age']"/>
<xsl:sort select="???[@name='lat']"/>
<xsl:sort select="???[@name='lng']"/>
<tbody>
<tr>
<td><xsl:value-of select="str[@name='Name']"/></td>
<td><xsl:value-of select="int[@name='Age']"/></td>
<td><xsl:value-of select="???[@name='lat']"/></td>
<td><xsl:value-of select="???[@name='lng']"/></td>
</tr>
</tbody>
</xsl:for-each>
</table> 
```

我最初将每个字段索引为字符串。一旦我更改它并将数字索引为整数，它们就不会显示在输出中。我完全猜测并使用 int ，因为我将它们索引为整数并且它有效。;)

以下是我在 Solr 中索引纬度和经度的数据类型：

```
<field name="lat" type="latLongDouble" indexed="true" stored="true"/>
<field name="lng" type="latLongDouble" indexed="true" stored="true"/> 
```

我不确定任何可用于“???”的正确 XSL 数据类型 以上。

1.  你能给我一份清单让我试试吗？
2.  您能给我提供一种替代的 XSL 方法来显示输出吗？

非常感谢！

佩雷斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:33:43.143

好的！花了一些时间，但我想通了。

```
<doc>
<int name="Age">14</int> 
<str name="Name">Jonh Doe</str> 
<double name="lat">45.17614</double> 
<double name="lng">-93.87341</double> 
</doc> 
```

从您的 XML 查看每个元素的数据类型并使用它来代替“？？？” 以上。

在我的例子中，我会这样做：

```
<td><xsl:value-of select="double[@name='lat']"/></td>
<td><xsl:value-of select="double[@name='lng']"/></td> 
```

希望这对将来的人有所帮助！

佩雷斯

# javascript - 将表格设置为在 Javascript 期间不会更改的某个位置

> ID：11401454
> 
> 赞同：1
> 
> 时间：2012-07-09T19:07:33.447
> 
> 标签：javascript, asp.net, html

在 HTML 中，我有一个包含标签和文本框表的 div

![在输入密码文本框之前](../Images/fd8344dbef6e37c8efea14a0e3e3e120.png)

以下 HTML 代码属于包含“密码”的“td”：

```
<asp:TextBox ID="Password" runat="server" TextMode="Password" onkeyup="return passwordChanged();"></asp:TextBox>
<span id="strengthID"></span> 
```

passwordChanged 是一个用于确定密码强度的 javascript 函数。这个函数改变了 span 'strengthID' 的 innerHTML

我的问题很简单：当 'stengthID' 更改其内容时（在 onkeyup 事件上），整个表格向左移动。

![输入密码文本框后](../Images/ed019fd03e8fb5ae299d8301bc55f32e.png)

我的目标是在更改跨度的内部文本时保持一切原样。我无法摆脱这种行为。请您指出我需要使用的一些可能的css属性吗？或任何其他建议？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:11:32.963

您需要为第一列指定 wdith。

例如

```
<td style="width:150px;"> 
```

为任何行的第一列指定宽度将完成这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:11:49.597

您需要在该 td 上设置固定宽度，否则浏览器将根据列的内容调整宽度。

一种方法是在每行的第一个 td 中添加一个类（即使只有一行就足够了）并调用它`label`。

然后添加一些CSS：

```
.label {
   width: 123px; /* Some width of your choice */
} 
```

# android - 是否可以将 Android 安装配置为具有快速启动时间？（<5 秒）

> ID：11401458
> 
> 赞同：3
> 
> 时间：2012-07-09T19:07:55.050
> 
> 标签：android, performance

我正在为一个项目（汽车娱乐*）寻找 Android，其中功耗，尤其是在不使用时，是一个非常重要的问题，但环境受到严格控制和*可预测*。

然而，问题是Android没有休眠模式，并且允许应用程序处理器周期处于待机状态，这使得在设备不使用时很难衡量功耗，所以我想在不需要时完全关闭它，这意味着它需要***快速***启动。

我知道许多 Linux 变体已经实现了[非常快的启动时间](http://www.linuxquestions.org/questions/linux-desktop-74/linux-distro-with-the-fastest-boot-598972/page2.html)，并且在某些版本上不到 10 秒可以被认为是标准的。我还[阅读了有关 Android 的长启动时间](http://elinux.org/Improving_Android_Boot_Time)的信息，并且似乎很多加载延迟，就像在任何操作系统上一样，可以被认为是可选的？

例如，演示文稿指出

> “Android 无需预加载任何类即可启动”

并且这

> “可能会导致糟糕的应用程序加载时间和以后的内存使用”

但这不是问题，只要它是确定性的 - 例如，如果您可以找到 MP3 播放器所需的类，并关闭所有其他类并获得 10 秒，那么其他应用程序需要 20 秒才能加载并不重要因为它永远不会加载它们。

对于不需要的网络堆栈以及许多软件包、证书检查等也是如此。

我知道 50 秒到 5 秒是一个**非常**高的要求，但有什么理由不可行吗？
有没有人尝试过类似的事情？Android 的可定制性是否足以允许这样做？

**如果 Android 要足够“精简”，它能否在 5 秒内启动？**

编辑：这将针对的硬件将是“嵌入式 PC 级别”：想想[http://store.tinygreenpc.com/tiny-green-pcs/trim-slice/h-diskless.html](http://store.tinygreenpc.com/tiny-green-pcs/trim-slice/h-diskless.html)

编辑：我也知道[Ubiquitous QuickBoot](http://www.ubiquitous.co.jp/En/products/middleware/quickboot/)虽然非常令人印象深刻，但绝对超出了我的价格范围！

（*我喜欢 Android 而不是“标准”Linux 发行版，因为整个 UI 设计和生态系统都围绕简单性和可移植性而设计，这使得它非常适合。）

# linux - 如何在 rsh 中获取远程脚本并远程分配变量？

> ID：11401465
> 
> 赞同：0
> 
> 时间：2012-07-09T19:08:05.570
> 
> 标签：linux, bash, hp-ux, rsh

最近有个问题一直困扰着我。

我正在尝试使用 rsh 或 remsh（在 HPUX 中）执行以下操作：

```
#!/bin/sh
rsh myDNS"
  DIRECTORY=/tmp/foo1/foo2
  echo $DIRECTORY
" 
```

但是，当我尝试运行上述脚本时，我得到 $DIRECTORY 的空白输出。因此，当这个问题应用于我正在处理的实际脚本时，bash 声称它找不到我试图获取的指定脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:15:35.193

使用 ssh 比使用 rsh 或 remsh 更好。rsh 和 remsh 非常不安全 - 以明文形式传输数据并且基于 IP 地址验证。

如果你使用这样的双引号，$DIRECTORY 会在启动主机上扩展，然后再启动 rsh/remsh。

如果您改用单引号（撇号），则应在远程主机上扩展 $DIRECTORY。

# java - 如何获取泛型定义实体的 .class？

> ID：11401468
> 
> 赞同：3
> 
> 时间：2012-07-09T19:08:19.033
> 
> 标签：java, jaxb, nested-generics

那么如何在 Java 中执行以下操作？

```
List<String> strings = new ArrayList<String>();       
JAXBElement<List<String>> jax = new JAXBElement<List<String>>(new QName("strings"), List<String>.class, strings); 
```

该问题特别发生在 List.class 中，返回的错误是：

```
Multiple markers at this line
- List cannot be resolved to a variable
- String cannot be resolved to a variable
- Syntax error on token ">", void expected after this token 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:10:52.407

你不能。

最接近您想要的近似值是使用`(Class<List<String>>) List.class`.

这是因为没有`List<String>.class`，因为在运行时，`List<String>`、`List<Banana>`、`List<FruitSalad>`和`List`在 Java 中都是一样的。这是出于各种原因而故意进行的，称为类型擦除。

# java - Jung，大顶点的布局重叠并且图形出现在奇怪的位置

> ID：11401471
> 
> 赞同：3
> 
> 时间：2012-07-09T19:08:23.750
> 
> 标签：java, graph, jung

我正在尝试将 Jung 用于一个项目并获得我想要的外观/行为，我从一些测试数据开始。

这个想法是在 Verticies 形状的顶部有带有标签的非常大的 Vertices。图表的数据将在运行时生成，因此我无法进行静态布局。

如何布局图形以使顶点不重叠，但仍然足够大以使标签适合内部（真实标签将具有更长的字符串 20-30 个字符）。我尝试使用 SpringLayout 但节点仍然重叠，另外布局不断抖动（这很烦人）。

我还尝试了 FRLayout，同时增加了斥力乘数，但是在数字变得足够大后，它只会创建一个顶点重叠的圆圈。

如果我使用鼠标手势放大，节点似乎会分开，我会得到更接近我想要的视图。所以也许解决方案涉及在初始化时放大，只是不确定如何做以及如何决定放大多少，因为它可能取决于节点的数量。

一般来说，我的数据会有少量节点（少于 50 个，更常见的是少于 10 个）。但是它是数据驱动的，所以我无法完全控制这些大小。

最后，当图表确实显示时，它也部分不在屏幕上。理想情况下，它将向可视区域的左上角渲染。有没有办法控制它？

下面是我正在使用的示例类，以更好地说明我的意思（为发布而修剪）。

```
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.graph.util.TestGraphs;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.algorithms.layout.AbstractLayout;
import edu.uci.ics.jung.algorithms.layout.SpringLayout;
import edu.uci.ics.jung.visualization.GraphZoomScrollPane;
import edu.uci.ics.jung.visualization.control.DefaultModalGraphMouse;
import edu.uci.ics.jung.visualization.control.ModalGraphMouse;
import edu.uci.ics.jung.visualization.decorators.AbstractVertexShapeTransformer;
import edu.uci.ics.jung.visualization.decorators.EdgeShape;
import edu.uci.ics.jung.visualization.decorators.ToStringLabeller;
import java.awt.BorderLayout;
import java.awt.Color;
import org.apache.commons.collections15.Transformer;
import org.apache.commons.collections15.functors.ConstantTransformer;
import edu.uci.ics.jung.visualization.picking.PickedState;
import edu.uci.ics.jung.visualization.renderers.DefaultVertexLabelRenderer;
import edu.uci.ics.jung.visualization.renderers.GradientVertexRenderer;
import edu.uci.ics.jung.visualization.renderers.VertexLabelAsShapeRenderer;
import java.awt.*;

    public class IDRelationshipGraphPanel extends javax.swing.JPanel
{
    private final VisualizationViewer<Integer,Number> vv;
    protected Transformer<Integer,String> vs;
    protected DefaultModalGraphMouse<Integer, Number> gm;
    protected AbstractLayout layout;
    protected VertexShapeSizeAspect<Integer,Number> vssa;

    public IDRelationshipGraphPanel()
    {

    Graph<? extends Object, ? extends Object> g = TestGraphs.getOneComponentGraph(); 

    layout = new SpringLayout( g) ;       
    vv= new VisualizationViewer<Integer,Number>(layout);
    GraphZoomScrollPane scrollPane = new GraphZoomScrollPane(vv);

    gm = new DefaultModalGraphMouse<Integer, Number>();
    vv.setGraphMouse(gm);                
    add(scrollPane, BorderLayout.CENTER);

    PickedState<Integer> picked_state = vv.getPickedVertexState();

    VertexLabelAsShapeRenderer<Integer, Number> vlasr = new VertexLabelAsShapeRenderer<Integer, Number>(vv.getRenderContext());

    vv.getRenderContext().setVertexShapeTransformer(vlasr);
    vv.getRenderContext().setVertexLabelRenderer(new DefaultVertexLabelRenderer(Color.red));
    vv.getRenderContext().setEdgeStrokeTransformer(new ConstantTransformer(new BasicStroke(2.5f)));

    // customize the renderer
    vv.getRenderer().setVertexRenderer(new GradientVertexRenderer<Integer, Number>( new Color(175,224,228), new Color(133,170,173), true));
    vv.getRenderer().setVertexLabelRenderer(vlasr);

    vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller<Integer>());
    vv.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line<Integer, Number>());                            

    vssa = new VertexShapeSizeAspect<Integer,Number>();
    vv.getRenderContext().setVertexShapeTransformer(vssa);

    vv.getRenderContext().setArrowFillPaintTransformer(new ConstantTransformer(Color.lightGray));
    vv.getRenderContext().setArrowDrawPaintTransformer(new ConstantTransformer(Color.black));        
    }

    private final static class VertexShapeSizeAspect<V,E>
    extends AbstractVertexShapeTransformer <V>
    implements Transformer<V,Shape>  {

    public VertexShapeSizeAspect()
    {
        setSizeTransformer(new Transformer<V,Integer>()
                {
                    public Integer transform(V v) 
                    {
                    return 150;
                    }
                });
        setAspectRatioTransformer(new Transformer<V,Float>() 
                {
                    public Float transform(V v) 
                    {
                    return 1.0f;
                    }
                });                                                                
    }

    public Shape transform(V v){return factory.getEllipse(v);}
    } 
} 
```

使用 Spring 布局重叠顶点 ![使用 Spring 布局重叠顶点](../Images/bf6f29f7739ccdcf877f55ba2e6e7789.png)

Spring Layout 的放大效果更好 ![Spring Layout 的放大效果更好](../Images/23238d73646c2c69fa7112df79093dc1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-08T19:50:22.740

对于节点间距，有一个 setForceMultiplier 和 setRepulsionRange 将有助于确定节点之间的距离。要摆脱“抖动”，请执行 layout.lock(true) 以将节点保持在您想要的位置。

# c# - 动态修改列DataGrid

> ID：11401473
> 
> 赞同：2
> 
> 时间：2012-07-09T19:08:25.860
> 
> 标签：c#, .net, wpf, datagrid

如果我没有正确大写某些内容，请原谅我。我习惯了 Java，但我正在努力遵守 C# 约定！

我在为 DataGrid 中的列动态设置数据时遇到问题。我成功添加了列动态设置列标题，但我似乎无法设置数据。结果如下： ![没有行的数据网格](../Images/a172a3487438fdf589c19f07ca63cbbf.png)

正如记录器告诉我的那样，正在读取数据，并且 columnData 包含正确的值。（我没有使用 Debug 类，因为我在没有 Visual C# 的机器上进行测试）。

我认为我的 DataGrid 类是问题所在。此外，我认为问题在于我如何使用绑定（我还没有很好地掌握如何做到这一点）

这是我的课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Data;

namespace mdr
{
    class MDRResult : System.Windows.Controls.DataGrid
    {
        private string[] headers;

        private string[][] fields;

        public MDRResult(string[] headers, string[][] fields) : base()
        {

            int columnNumber = 0;
            foreach (string s in headers)
            {
                System.Windows.Controls.DataGridTextColumn column = new System.Windows.Controls.DataGridTextColumn();
                column.Header = s;
                string[] columnData = new string[fields.Length];
                int rowNumber = 0;
                foreach (string[] row in fields)
                {
                    columnData[rowNumber] = row[columnNumber];
                    rowNumber++;
                }
                SurfaceWindow1.logger.WriteLine("Adding column " + s + " with data ");
                foreach (string str in columnData)
                    SurfaceWindow1.logger.WriteLine("\t" + str);
                Binding b = new Binding();
                //b.Mode = BindingMode.OneTime;
                b.Source = columnData;
                column.Binding = b;
                Columns.Add(column);
                columnNumber++;
            }

        }
    }
} 
```

我的 XAML 与另一个类配对。这是 XAML：

```
<s:SurfaceWindow x:Class="mdr.SurfaceWindow1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="http://schemas.microsoft.com/surface/2008"
    Title="SurfaceApplication1" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
    <Grid Background="#FFC7C7C7">
        <s:ScatterView HorizontalAlignment="Left" Margin="248,1,0,0" Name="resultsView" VerticalAlignment="Top" Background="#FFDBDBDB" Grid.RowSpan="2">
        </s:ScatterView>
        <Grid HorizontalAlignment="Left" Width="270">
            <Grid.RowDefinitions>
                <RowDefinition Height="274*" />
                <RowDefinition Height="307*" />
            </Grid.RowDefinitions>
            <Grid HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0, 20, 0, 0">
                <s:SurfaceTextBox Height="37" HorizontalAlignment="Right" Margin="70,0,0,0" Name="fileLocation" VerticalAlignment="Center" Width="173" Background="White" Foreground="Black" BorderBrush="Black" VerticalContentAlignment="Center" Text="http://endeavour.dartmouth.edu/eva/MDR-SampleData.txt" />
                <Label Content="File:" Height="10" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="5,0,0,0" Name="FileLabel" Width="50" Foreground="Black" />
            </Grid>
            <Grid HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0, 70, 0, 0">
                <s:SurfaceTextBox Height="37" HorizontalAlignment="Right" Margin="70,0,0,0" Name="cv" VerticalAlignment="Center" Width="173" Background="White" Foreground="Black" BorderBrush="Black" VerticalContentAlignment="Center" Text="10" />
                <Label Content="CV:" Height="10" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="5,0,0,0" Name="CVLabel" Width="50" Foreground="Black" />
            </Grid>
        </Grid>
        <Grid Height="400" Margin="0, 120, 0, 0" HorizontalAlignment="Left" Width="270">
            <s:SurfaceSlider ValueChanged="minSlider_ValueChanged" Grid.Row="1" Height="300" HorizontalAlignment="Left" Margin="62,6,0,0" Name="minSlider" VerticalAlignment="Top" Width="27" Orientation="Vertical" TickPlacement="BottomRight" IsSnapToTickEnabled="True" Minimum="1" />
            <s:SurfaceSlider ValueChanged="maxSlider_ValueChanged" Height="300" HorizontalAlignment="Right" Margin="0,6,46,0" Name="maxSlider" VerticalAlignment="Top" Width="27" Grid.Row="1" IsDirectionReversed="False" Orientation="Vertical" Value="1" TickPlacement="BottomRight" IsSnapToTickEnabled="True" Minimum="1" />
            <Label Content="Min: 1" Height="26" HorizontalAlignment="Left" Margin="1,133,0,0" Name="minLabel" VerticalAlignment="Top" Width="77" Foreground="Black" />
            <Label Content="Max: 1" Height="26" HorizontalAlignment="Left" Margin="103,133,0,0" Name="maxLabel" VerticalAlignment="Top" Width="88" Foreground="Black" />
            <Label Content="Level" Grid.Row="1" Height="17" HorizontalAlignment="Center" Margin="0,0,0,0" Name="label3" VerticalAlignment="Top" Width="60" Foreground="Black" />
        </Grid>
        <s:SurfaceButton Click="onMDRSubmit" Content="Run" Height="50" HorizontalAlignment="Left" Margin="40,0,0,40" Name="runButton" VerticalAlignment="Bottom" Width="172" FontSize="32" BorderBrush="Black" Grid.Row="1" Background="#FF9A9A9A" HorizontalContentAlignment="Center" />
    </Grid>
</s:SurfaceWindow> 
```

这是课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Surface;
using Microsoft.Surface.Presentation;
using Microsoft.Surface.Presentation.Controls;
using Microsoft.Surface.Presentation.Input;
using System.IO;
using System.Diagnostics;
using System.Data;
using System.Collections;

namespace mdr
{
    /// <summary>
    /// Interaction logic for SurfaceWindow1.xaml
    /// </summary>
    public partial class SurfaceWindow1 : SurfaceWindow
    {
        /// <summary>
        /// Default constructor.
        /// </summary>
        /// 
        MDRInterface mdr;
        public static StreamWriter logger;
        public static String directory;
        public SurfaceWindow1()
        {
            InitializeComponent();

            // Add handlers for window availability events
            AddWindowAvailabilityHandlers();
        }

        /// <summary>
        /// Occurs when the window is about to close. 
        /// </summary>
        /// <param name="e"></param>
        protected override void OnClosed(EventArgs e)
        {
            base.OnClosed(e);

            // Remove handlers for window availability events
            RemoveWindowAvailabilityHandlers();
        }

        /// <summary>
        /// Adds handlers for window availability events.
        /// </summary>
        private void AddWindowAvailabilityHandlers()
        {
            // Subscribe to surface window availability events
            ApplicationServices.WindowInteractive += OnWindowInteractive;
            ApplicationServices.WindowNoninteractive += OnWindowNoninteractive;
            ApplicationServices.WindowUnavailable += OnWindowUnavailable;
        }

        /// <summary>
        /// Removes handlers for window availability events.
        /// </summary>
        private void RemoveWindowAvailabilityHandlers()
        {
            // Unsubscribe from surface window availability events
            ApplicationServices.WindowInteractive -= OnWindowInteractive;
            ApplicationServices.WindowNoninteractive -= OnWindowNoninteractive;
            ApplicationServices.WindowUnavailable -= OnWindowUnavailable;
        }

        /// <summary>
        /// This is called when the user can interact with the application's window.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void OnWindowInteractive(object sender, EventArgs e)
        {
            //TODO: enable audio, animations here
        }

        /// <summary>
        /// This is called when the user can see but not interact with the application's window.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void OnWindowNoninteractive(object sender, EventArgs e)
        {
            //TODO: Disable audio here if it is enabled

            //TODO: optionally enable animations here
        }

        /// <summary>
        /// This is called when the application's window is not visible or interactive.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void OnWindowUnavailable(object sender, EventArgs e)
        {
            //TODO: disable audio, animations here
        }

        private void AddMDRResult(string result)
        {
            DataTable table = new DataTable();
            string[] rows = result.Split('\n');
            foreach (string s in rows[0].Split('\t'))
            {
                if (s.Length == 0) continue;
                logger.WriteLine("Adding header " + s);
                table.Columns.Add(s);
            }

            bool first = true;
            foreach (string s in rows)
            {
                if (first)
                {
                    first = false;
                    continue;
                }
                DataRow row = table.NewRow();
                int i = 0;
                logger.WriteLine("Row " + table.Rows.Count + ": ");
                foreach (string value in s.Split('\t'))
                {
                    if (value.Length == 0)
                        continue;
                    logger.WriteLine("\t element " + i + ": " + value);
                    row[i] = value;
                    i++;
                }
                for (i = 0; i < table.Columns.Count; i++)
                    logger.Write(row[i] + "\t");

                logger.WriteLine();
                table.Rows.Add(row);
            }

            DataView view = table.AsDataView();

            ScatterViewItem item = new ScatterViewItem();
            ArrayList headersList = new ArrayList();
            foreach (string s in rows[0].Split('\t'))
            {
                if (s.Length == 0) continue;
                headersList.Add(s);
            }

            object[] list = headersList.ToArray();
            string[] headers = new string[list.Length];

            for(int i = 0; i < headers.Length; i++)
                headers[i] = list[i].ToString();

            ArrayList fieldList = new ArrayList();
            first = true;
            foreach (string s in rows)
            {
                if (first) {first = false; continue;}
                int i = 0;
                string[] row = new string[headers.Length];
                foreach (string value in s.Split('\t'))
                {
                    if (value.Length == 0)
                        continue;
                    row[i] = value;
                    i++;
                }
                fieldList.Add(row);
            }

            list = fieldList.ToArray();
            string[][] fields = new string[list.Length][];

            for(int i = 0; i < list.Length; i++)
                fields[i] = (string[])(list[i]);

            item.Content = new MDRResult(headers, fields);

            item.Width = 500;
            item.Height = 500;

            resultsView.Items.Add(item);
        }

        private void onMDRSubmit(object sender, RoutedEventArgs args)
        {
            if (logger == null)
            {
                directory = Directory.GetCurrentDirectory();
                if (directory[directory.Length - 1] == '\\')
                    directory = directory.Substring(0, directory.Length - 1);
                String logFile = directory + "\\log\\surface.txt";
                Debug.WriteLine("Creating log file: " + logFile);
                if (File.Exists(logFile))
                    File.Delete(logFile);
                Directory.CreateDirectory("\\log\\");
                FileStream stream = File.Create(logFile);
                logger = new StreamWriter(stream);
                logger.AutoFlush = true;
            }
            if (mdr == null)
            {
                logger.WriteLine("Initializing MDR wrapper...");
                mdr = new MDRInterface();
                logger.WriteLine("Initialized MDR wrapper!");
            }
            logger.WriteLine("Starting MDR...");
            string text = cv.Text;
            string result = mdr.RunMDR(int.Parse(text), (int)minSlider.Value, (int)maxSlider.Value, (long)0, fileLocation.Text);
            logger.WriteLine("Finished MDR! Adding to results list.");
            AddMDRResult(result);
        }

        private void minSlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            try
            {
                if (e.NewValue > maxSlider.Value)
                    minSlider.Value = e.OldValue;
                minLabel.Content = "Min: " + minSlider.Value;
            }
            catch (NullReferenceException ex)
            {
                //ignore
            }
        }

        private void maxSlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            try
            {
                if (e.NewValue < minSlider.Value)
                    maxSlider.Value = e.OldValue;
                maxLabel.Content = "Max: " + maxSlider.Value;
            }
            catch (NullReferenceException ex)
            {
                //ignore
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:25:19.233

试试这样：

```
class MDRResult : DataGrid
{
    public MDRResult(string[] headers, string[][] fields)
        : base()
    {
        for (int i = 0; i < headers.Length; ++i)
            this.Columns.Add(new DataGridTextColumn()
            {
                Header = headers[i],
                Binding = new Binding("[" + i + "]")
            });
        this.AutoGenerateColumns = false;
        this.ItemsSource = fields;
    }
} 
```

# objective-c - 应该对浮点数进行签名，那么为什么减法会导致回绕？

> ID：11401474
> 
> 赞同：3
> 
> 时间：2012-07-09T19:08:30.043
> 
> 标签：objective-c, types, type-conversion

```
float test=-1; 
```

产生一个`float`带有值的`-1`。然而，

```
float test=arc4random()%500-500; 
```

产生巨大的值，这显然是由缓冲区溢出引起的——数字环绕。这不应该发生在`float`; 为了踢球，我试图看看 Xcode 是否会让我做一个“签名的浮点数”，但它告诉我“浮点数不能被签名或未签名”。

我制作了一个解决方法，在其中我做了一个签名`int`，然后将其转换为一个`float`，但我真的很感激知道这是如何/为什么发生的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T19:11:27.457

`arc4random()``u_int32_t`根据手册页返回 a ，所以`arc4random()%500-500`将是一个无符号整数，减去 500 会给你一个非常大的正值。试试这个：

```
float test = ((float)(arc4random() % 500))-500; 
```

> 我制作了一个变通方法，在其中创建了一个带符号的 int，然后将其转换为浮点数，但我真的很感激知道这是如何/为什么发生的。

一次查看整条线。首先，你有：

```
arc4random() 
```

正如我上面所说，它返回一个无符号整数。让我们假设它返回 value `12345`。接下来，您有模数运算符，因此您的表达式类似于：

```
12345 % 500 
```

也就是说`345`。接下来，减去 500：

```
345 - 500 
```

你会认为这会给你 -155，但不——我们仍然在无符号整数领域工作，所以你真的得到`4294967141`了（或类似的东西——我的数学可能不正确）。然后，最后，将其分配给浮点数：

```
float test = 4294967141; 
```

浮点数只有 23 位用于尾数，因此存储的值`test`将在 4294967141 的一般邻域内，但精度较低，如 4294970000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:13:40.840

Objective-C 中的浮点数与 C 中的浮点数完全相同：按照 IEEE-754 的定义进行固有签名。[http://en.wikipedia.org/wiki/Single_precision_floating-point_format](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)

# ios - 将框架添加到现有的 Cocoapods 设置

> ID：11401483
> 
> 赞同：2
> 
> 时间：2012-07-09T19:09:18.567
> 
> 标签：ios, xcode, cocoapods

我正在处理一个使用 Cocoapods 的项目。我找不到任何将框架添加到现有 Cocoapods 设置的文档。我能找到的只是有关如何从头开始设置 Cocoapods 的示例。

有什么帮助吗？我想通过 Cocoapods 添加 ABContactHelper。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:11:58.340

只需将 pod 添加到您的`Podfile`并`pod install`再次运行。

对于`ABContactHelper`，执行：

1.  `edit Podfile`
2.  添加`pod 'ABContactHelper'`到 Podfile
3.  `pod install`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T07:53:11.647

并且不要忘记在执行“pod install”之前关闭 xCode 中的工作区，因为如果不这样做，您可能会丢失所有未保存的更改，因为 xCode 会要求您将工作区恢复为保存在磁盘上的版本。是的，我做过一次；）

# iphone - 视频中有如何播放该视频的数组。苹果手机

> ID：11401484
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:09:27.770
> 
> 标签：iphone, objective-c, ios, video

视频排列整齐。我想播放那些视频。

意味着视频在服务器中。视频以阵列形式出现。我从如何播放视频的字典中存储了数组 ia 字典

下面的代码是对是错，如果错了，请告诉我正确的一个

```
enter code here NSMutableDictionary *dict;

dict =[Videoarray objectAtIndex:0];
NSURL *Movie = [[NSURL alloc] initWithString:[dict valueForKey:@"url"]];
MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc] initWithContentURL:Movie];
theMovie.scalingMode = MPMovieScalingModeAspectFill;
[theMovie play];
MPMoviePlayerController *movie = [[MPMoviePlayerController alloc] initWithContentURL:Movie];
movie.view.frame = CGRectMake(5,5,310, 165);
movie.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight |
UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | 
UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
[scroll addSubview:movie.view];
[movie play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:31:23.227

这是连续播放一系列视频的非常粗略的代码：

```
-(void)viewDidLoad { 
     [self setUpPlayer];
}

-(void)setUpPlayer {
   if(i <= [videoArray count]) {
        player = [[MPMoviePlayerController alloc] initWithContentURL:[videoArray objectAtIndex:i]];
        i++; //use a static integer outside these functions as an index
        [NSNotificationCenter defaultCenter]addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:player];
        [player play];
    }
}

- (void) movieFinishedCallback:(NSNotification*) aNotification {
    player = [aNotification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:player];    
    [self setUpPlayer];
 } 
```

# mysql - MySQL LOAD DATA INFILE 主机查找

> ID：11401491
> 
> 赞同：0
> 
> 时间：2012-07-09T19:09:50.970
> 
> 标签：mysql

我有一个 CSV 文件，每行都有一个时间戳和一个主机 IP 地址。

我想将此文件加载到的表中还有一个主机名列。

我正在尝试使用 LOAD DATA INFILE 加载这些数据。有没有办法在数据加载到表中时查找主机名？

同样作为一个更普遍的问题，例如，我如何在存储过程中查找任何给定 IP 地址的主机名。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:50:26.757

我认为没有任何 MySQL 函数可以查找给定 IP 地址的主机名。我建议先加载数据，然后使用用 PHP、Ruby、Python 或其他语言编写的脚本查找和丢失主机名。

# javascript - Javascript：删除使用“for”迭代的对象上的属性是否安全

> ID：11401492
> 
> 赞同：6
> 
> 时间：2012-07-09T19:09:52.173
> 
> 标签：javascript

我正在做这样的事情：

```
var myObj = {a:1, b:2, c:3, d:4};

for (var key in myObj){
  if (someCondition){
    delete(myObj[key]);
  }
} 
```

它在我尝试过的示例中工作得很好，但我不确定它在某些场景/浏览器中是否会出现意外行为。

修改被迭代的对象可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:13:19.580

[第 12.6.4 节](http://es5.github.com/#x12.6.4)解释了它`for..in`是根据“下一个属性”定义的：

> 令 P 为 obj 的 [[Enumerable]] 属性为 true 的下一个属性的名称。如果没有这样的属性，返回（正常，V，空）。

由于即使存在突变（尽管迭代顺序不是），“下一个属性”的概念也得到了很好的定义，因此`delete`在迭代期间不会引入未定义的行为。

有一个极端情况，其中`delete`取消掩码原型属性，如

```
var obj = Object.create({ x: 1 });
obj.y = 2;
obj.x = 3;
for (var k in obj) {
  if (k == 'y') { delete obj.x; }
  alert(k);
} 
```

在这种情况下，您可能会迭代`y`和删除`x`，您仍然应该`x`从原型中看到 ，但如果您`x`首先迭代，那么`y`您不应该看到第二个`x`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T19:12:27.490

是的，它是安全的。

[http://es5.github.com/#x12.6.4](http://es5.github.com/#x12.6.4)

> **12.6.4 for-in 语句**
> 
> 未指定枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）。**被枚举对象的属性可能在枚举过程中被删除。如果在枚举期间还没有访问过的属性被删除，那么它就不会被访问。**如果在枚举过程中向正在枚举的对象添加了新属性，则不能保证在活动枚举中访问新添加的属性。在任何枚举中不能多次访问属性名称。

# php - 如何加载使用 PHP 生成的 SVG 文件？

> ID：11401500
> 
> 赞同：5
> 
> 时间：2012-07-09T19:10:23.633
> 
> 标签：php, apache, svg, xampp

我想用 PHP 创建一个 SVG 文件，然后将它包含在一个 HTML 文件中。这是我到目前为止所拥有的（按照[本教程](http://www.devx.com/webdev/Article/37004/0/page/1)）

**svg.php：**

```
<?php
header("Content-type: image/svg+xml");
?>
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN"
"http://www.w3.org/TR/2001/
REC-SVG-20010904/DTD/svg10.dtd">

<svg width="310" height="140" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g style="stroke:black;fill:lightgreen" transform="translate(30,30)">
        <rect x="10" y="10" width="100" height="30" style="stroke-width:4"/>
        <circle cx="170" cy="25" r="20" style="stroke-width:4"/>
        <line x1="265" y1="10" x2="200" y2="70" style="stroke-width:4"/>
        <text x="80" y="90" style="font:size: 8">Basic shapes</text>
    </g>
</svg> 
```

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html,body, #MOSVG { 
    height: 100%; 
    width: 100%;
    padding:0;
    margin:0;
}
</style>
</head>
<body>
    <object data="svg.php" type="image/svg+xml" id="MOSVG" />

</body>
</html> 
```

当我看的时候，`index.html`我看到的只是一个空白页。控制台上没有警告/错误。Apache 错误日志（我正在使用 XAMPP）给出`[Mon Jul 09 14:36:15 2012] [error] [client 127.0.0.1] script 'C:/xampp/htdocs/svgtest/public/svg.php' not found or unable to stat, referer: http://localhost/svgtest/public/`. 它们在同一个目录中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T13:56:59.993

GeoPhoenix 在上面回答了，我想我会把它放到一个答案中，这样就有一个官方的答案：

> 如果您删除`<?xml?>`它呈现 svg 的行

PHP 可以`<?`看作是 PHP 代码的开始标签（而不是 XML 声明），这要归功于[short-open-tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)设置（[感谢 fvu](https://stackoverflow.com/questions/11401500/how-do-i-load-a-svg-file-thats-been-generated-with-php#comment15034606_11401500)）。这是一个简单的修复，我刚刚更换

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

和

```
<?php echo '<?xml version="1.0" encoding="iso-8859-1"?>';?> 
```

这具有相同的预期结果并且不会导致语法错误。

# .net - 如果我的计算机上已经安装了 Microsoft System.Web 程序集，如何从 Mono 调试 System.Web 程序集？

> ID：11401502
> 
> 赞同：1
> 
> 时间：2012-07-09T19:10:30.987
> 
> 标签：.net, debugging, mono

我需要在我的 Windows x64 PC 上调试 Mono 程序集。

我的第一个想法是在 .NET 中加载程序集并使用 Visual Studio。大会是`System.Web`。.NET 版本在 GAC 上并且总是从那里加载，也许有办法绕过它？尝试从 GAC 卸载并收到安全/依赖错误。

还尝试了 MonoDevelop，但没有成功。不能为 VS 使用 MonoTools，因为：1- 不会为此付费，2- 我使用 VS Express（没有插件）。

有任何想法吗？

# javascript - Safari 不喜欢某些 Backbone 路由

> ID：11401517
> 
> 赞同：0
> 
> 时间：2012-07-09T19:11:51.823
> 
> 标签：javascript, backbone.js, safari

我有一个有点奇怪的问题。我有以下主干路线：

```
 routes:
    "" : "index"
    "foo" : "index" 
```

我正在使用的 URI 是`/appointments/backbone`. 奇怪的是：

*   `/appointments/backbone`如果我在 Chrome 或 Safari 中导航到，它工作得很好；它击中了第一条路线。
*   如果我在 Chrome 中导航到`/appointments/backbone#/#foo`它可以工作，但在 Safari 中它不会。它将 URI 转换为`/appointments/backbone/#/%23foo`，我在 a 中得到一个错误`show_view.js`，即使我没有做任何与显示视图相关的远程操作。访问`/appointments/backbone#asdf`或任何其他乱码 URI 都会产生相同的错误。

我想我只是在犯一些简单的错误。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:16:08.540

我已经为此苦苦挣扎了几个小时，现在，在我发布问题两分钟后，我已经找到了解决方案。

而不是`/appointments/backbone#/#foo`，我需要`/appointments/backbone#foo`。

# rspec - 使用 Capybara 和 RSPEC 时未清除数据库

> ID：11401518
> 
> 赞同：1
> 
> 时间：2012-07-09T19:11:54.443
> 
> 标签：rspec, capybara, factory-bot

最近我的数据库出现了一些问题。起初我认为这是一个 factorygirl 问题，但后来我意识到 factorygirl （可能）实际上并没有使用未被清除的数据。

无论如何，我首先使用 factorygirl 创建一个新用户。然后，我以用户身份登录并导航到可以使用数据字段“foo_name”和“bar”创建新“foo”的页面。接下来，我填写“”。:with => "" 字段和 click_button "Save" 创建新的 "foo" 对象。之后我检查新对象的索引，它应该是 1，但每次我运行测试，数字都会增加 4。（现在是 72）

另外，我发现我需要在测试开始时删除旧用户，否则 factorygirl 会抱怨用户已经创建。

我几乎可以肯定 RSPEC 应该为我处理测试数据库的删除，我错了吗？如果是这样，有人会对清除数据库的“好”方法有什么好的建议吗？我已经环顾四周好几天了，到目前为止真是太糟糕了。

非常感谢你。

编辑（请求一些示例代码）：

```
...
  context "can create a new FooBar" do
    before {
      find_link('New Foo Bar').click
    }
    it 'has current_path "/foo_bar/new"' do
      current_path.should == '/foo_bar/new'
    end
    context "when the correct information is given" do
      before {
        fill_in 'Name', :with => 'TestFooBar'
        fill_in 'Description', :with => 'A test foo bar'
        click_button 'Save'
      }
      it 'has current_path "/foo_bars"' do
        current_path.should == '/foo_bars'
      end
... 
```

在此之后，我检查有多少 foo_bars

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:00:56.837

对于将来需要此功能的任何人，此问题已得到解决。就像 zetetic 所说，我不能将 Capybara 与事务性装置一起使用。

为了解决这个问题，我使用了 Database Cleaner。

宝石安装 database_cleaner

```
Gemfile:
group :test do
  gem 'database_cleaner'
end 
```

捆绑安装

规范/spec_helper.rb：

```
config.use_transactional_fixtures = false
...
module ::RSpec::Code
  class ExampleGroup
    include Capybara::DSL
    include Capybara::RSpecMatchers
  end
end 
```

foo_bar 文件：

```
before(:all) {
  ...
  DatabaseCleaner.strategy = :truncation
}
after(:all) {
  ...
  DatabaseCleaner.clean
  Capybara.reset_sessions!
  Capybara.use_default_driver
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T23:00:29.010

您的规范不应依赖于将使用 ID==1 创建第一行的假设。

至于清理测试数据库，通常 RSpec 通过在事务中运行每个规范来处理这个问题，并在示例完成时回滚更改。如果您的配置具有以下行，则会发生这种情况：

`config.use_transactional_fixtures = true`

如果您需要将此设置为 false，则可以在每个示例之后使用诸如[Database Cleaner](http://github.com/bmabey/database_cleaner)之类的工具来清除数据库。

# delphi - Delphi DirectX Imgae 未在 OnCreate 上显示

> ID：11401519
> 
> 赞同：1
> 
> 时间：2012-07-09T19:11:55.263
> 
> 标签：delphi, delphi-xe2

我有一个带有“DXDraw01”、“DXDIB01”、“DXDIB02”、“背景”、“BitBtn01”、“BitBtn02”、“DXTimer01”的 Delphi DirectX 项目。我的要求是存储在“背景”中的图像将在应用程序将运行。根据 DelphiX 教程，我实现了以下代码：

```
unit KoushikHalder01;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes,
  Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Winapi.DirectDraw,
  DXClass, DXDraws, DIB, Math, Menus;

type
  TForm01 = class(TDXForm)
    DXDraw01: TDXDraw;
    DXDIB01: TDXDIB;
    DXDIB02: TDXDIB;
    Background: TDXDIB;
    BitBtn01: TBitBtn;
    BitBtn02: TBitBtn;
    DXTimer01: TDXTimer;
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure FormCreate(Sender: TObject);
    procedure DXTimer01Timer(Sender: TObject; LagCount: Integer);
    procedure FormDestroy(Sender: TObject);
    procedure DXDraw01Finalize(Sender: TObject);
    procedure DXDraw01Initialize(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form01: TForm01;
  Closing: Boolean;

implementation

{$R *.dfm}

procedure TForm01.DXDraw01Finalize(Sender: TObject);
begin
  DXTimer01.Enabled := false;
end;

procedure TForm01.DXDraw01Initialize(Sender: TObject);
begin
  DXTimer01.Enabled := true;
end;

procedure TForm01.DXTimer01Timer(Sender: TObject; LagCount: Integer);
begin
  if not DXDraw01.CanDraw then exit;

  DXDraw01.Surface.Fill(0);

  with DXDraw01.Surface.Canvas do
  begin
  DXDraw01.Surface.Assign(Background.DIB);
    Brush.Style := bsClear;
    Font.Color := clWhite;
    Font.Size := 30;
    Textout(130, 30, DateTimeToStr(Now));
    Release; {  Indispensability  }
  end;
  DXDraw01.Flip;
  Application.ProcessMessages;
end;

procedure TForm01.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Closing := True;
end;

procedure TForm01.FormCreate(Sender: TObject);
 begin
  DXTimer01.Enabled := true;
end;

procedure TForm01.FormDestroy(Sender: TObject);
begin
  DXDIB01.Free;
  DXDIB02.Free;
  DXDraw01.Free;
  Background.Free;
end;

end. 
```

但事实并非如此。设置如下： ![DXDraw 设置](../Images/7a978fbd0294f144a9fbd7da00567f9d.png) ![DXTimer 设置](../Images/f95e4e58fa0ac8412236702f1a545b7c.png)

“背景”始终在后缓冲区中，而不是翻转到前缓冲区，并且在关闭应用程序后它显示在“桌面”上，除非我刷新我的“桌面”。请，请帮助我。

# bash - `xdotool type ` - 随机重复字符

> ID：11401520
> 
> 赞同：4
> 
> 时间：2012-07-09T19:12:04.197
> 
> 标签：bash, automation

我正在编写一个脚本来自动化工作环境准备。我需要打开 4 个终端窗口，排列它们并在每个窗口中执行命令。

它有效，但**有时**我会遇到令人讨厌的失败 -`xdotool type` **随机重复一些字符**：

```
rvm use ruby-1.99999999999999999999999999999999.3-p194@ro && rails c
~/my_src/ruby_apps/ro > rvm use ruby-1.99999999999999999999999999999999.3-p194@ro && rails c
ruby-1.99999999999999999999999999999999.3-p194 is not installed.
To install do: 'rvm install ruby-1.99999999999999999999999999999999.3-p194'
~/my_src/ruby_apps/ro > 
```

或在另一个窗口中：

```
tail -fn 100 looooooog/thin.0.log
~/my_src/ruby_apps/ro > tail -fn 100 looooooog/thin.0.log
tail: could not open «looooooog/thin.0.log» for reading: No such file or directory
tail: no more files
~/my_src/ruby_apps/ro > 
```

我想这取决于 CPU 负载，因为我有非常大的 .bashrc 由 ATOM 处理，并且在脚本处理期间它的负载很高。

我在脚本中使用`wait`和`sleep`和特殊顺序的`open_lxterminal_execute_hold()`函数调用来首先执行简单的简单命令。这可以最大限度地减少错误，但根本不会阻止它们。

无论 CPU 负载如何（无论如何），你会建议什么来获得稳定的结果？摆脱`sleep`s 也很棒。

```
#!/bin/bash
#
# prepares work environment for rails project

# Opens lxterminal with title if windows with such title
#   doesn't exist, executes command and stays open. 
#   Otherwise does nothing.
#
function open_lxterminal_execute_hold(){
  local winid=`xwininfo -name $title 2>/dev/null |grep 'Window id:' |cut -d" " -f4`
  if [ -n "$winid" ]; then
    echo "Window for title '$title' exists with '$winid'"
  else
    lxterminal -t $title 
    sleep 1
    wmctrl -i -a "$winid" # bring the window to front, activate
    wait
    xdotool type "$command"
    wait
    xdotool key Return # run the command
    wait
  fi
}

pkill devilspie
cd ~/my_src/ruby_apps/ro # TODO param
title='rails-commandline';     command='ls';                                    open_lxterminal_execute_hold
title='rails-development.log'; command='tail -fn 100 log/development.log';      open_lxterminal_execute_hold
title='rails-user_case';       command='tail -fn 100 log/thin.0.log';           open_lxterminal_execute_hold
sleep 5
title='rails-console';         command='rvm use ruby-1.9.3-p194@ro && rails c'; open_lxterminal_execute_hold
/usr/bin/devilspie -a 2>/dev/null & # arrange windows 
```

**更新** 如何防止 xdotool 重复字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:13:57.067

这是一个完全避免 xdotool 的解决方法。从积极的方面来说，我认为这相当简单。不利的一面是，它似乎不适用于 lxterminal——尽管它确实适用于其他终端，例如 xterm 和 gnome-terminal。

对于它的价值，这是一个想法：

让 bashrc 根据`title`环境变量的值运行相应的命令：

您可以通过在 .bashrc 中添加以下内容来实现：

```
case "$title" in
rails-development.log)
    ls
    ;;
rails-commandline)
    tail -fn 100 /var/log/syslog
    ;;
*)
    ;;
esac 
```

然后在你的脚本中你可以使用

```
function open_terminal_execute_hold() {
  local winid=`xwininfo -name $title 2>/dev/null |grep 'Window id:' |cut -d" " -f4`
  if [ -n "$winid" ]; then
    echo "Window for title '$title' exists with '$winid'"
  else
    gnome-terminal -t "$title" &
  fi
}

cd /tmp # TODO param
export title='rails-commandline' &&  open_terminal_execute_hold &
export title='rails-blah' &&  open_terminal_execute_hold &
export title='rails-development.log' && open_terminal_execute_hold & 
```

出于某种原因， lxterminal 似乎只使用第一个值`title`，而忽略了对其值的后续更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:40:03.460

这是另一个解决方案，在我的 Ubuntu 11.04 系统上测试并运行：

```
#!/bin/bash

function open_lxterminal_execute_hold() {
  xwininfo -name $1 > /dev/null 2>&1
  if [ $? -eq 0 ]; then
    echo "Window for title '$1' already exists"
  else
    t=$(tempfile)
    echo ". ~/.bashrc" > $t
    echo "$2" >> $t
    lxterminal -t $1 -e "$SHELL --rcfile $t" &
  fi
}

#pkill devilspie
#cd ~/my_src/ruby_apps/ro
open_lxterminal_execute_hold 'rails-commandline' 'ls'
open_lxterminal_execute_hold 'rails-development' 'tail -fn 100 log/development.log'
open_lxterminal_execute_hold 'rails-user_case' 'tail -fn 100 log/thin.0.log'
#open_lxterminal_execute_hold 'rails-console' 'rvm use ruby-1.9.3-pl94@ro && rails c'
#devilspie -a 2>/dev/null & 
```

您可能会注意到，我已经注释了一些测试行，因此您应该在系统上运行脚本之前从注释行中删除尾随的“ **# ”。**
我使用的技巧是在每个终端中启动一个带有“ [--rcfile](https://stackoverflow.com/questions/7192575/run-bash-command-in-new-shell-and-stay-in-new-shell-after-this-command-executes) ”选项的新shell。
这样，就不需要使用“xdotool”、“wait”和“sleep”命令了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:05:20.183

其实我找到了另一个解决方案。我发现我使用了 ubuntu deb 包中的 2009 年的旧版本。我从源安装的最新版本`xdotool`允许一个新的命令行参数`--delay <value>`，如果与 0 一起使用，`--delay 0` 可以防止重复字符。所以函数现在看起来如下：

```
function open_lxterminal_execute_hold(){
  local winid=`xwininfo -name $title 2>/dev/null |grep 'Window id:' |cut -d" " -f4`
  if [ -n "$winid" ]; then
    echo "Window for title '$title' exists with '$winid'"
  else
    lxterminal -t "$title" 
    sleep 1
    wmctrl -i -a "$winid" 
    xdotool type --delay 0 "$command"
    xdotool key Return
  fi
} 
```

祝大家好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T05:24:55.307

您可以改用`xte`命令行工具。它做同样的工作，但没有随机密钥粘性。

# javascript - 添加和删 除类无法正常工作

> ID：11401521
> 
> 赞同：0
> 
> 时间：2012-07-09T19:12:04.750
> 
> 标签：javascript, jquery

我有一个 php 代码，它显示来自 AZ 的按钮：

```
 <table id="optionAndAnswer" class="optionAndAnswer">
    <tr class="answer">
    <td>3\. Answer</td>
    <td>
        <?php
            $a = range("A","Z");
        ?>

        <table id="answerSection">
            <tr>

        <?php
            $i = 1;
            foreach($a as $key => $val){
                if($i%7 == 1) echo"<tr><td>";
                echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
                if($i%7 == 0) echo"</td></tr>";
                $i++;
            }
        ?>

... 
```

现在这些按钮应该使用“.answerBtnsOn”和“.answerBtnsOff”打开和关闭

我遇到的问题是它突出显示了应该打开的按钮，但它并没有取消突出显示（关闭）其他按钮。因此，如果按钮 B 被突出显示，但现在答案是 A 和 C，它应该只打开按钮 A 和 C，而所有其他按钮都应该关闭，但这不会发生，因为按钮 B 仍然与 A 和 C 一起打开.

所以我的问题是如何关闭应该关闭的按钮。目前它正在打开正确的按钮，但没有关闭其他按钮。

以下是当前代码：

```
var answers = $.map(btn.split(''),function(chr){   return "#answer"+chr;  }).join(', ');

        $(answers).removeClass('answerBtnsOn').addClass('answerBtnsOff');
        $(answers).addClass("answerBtnsOn").siblings().addClass('answerBtnsOff'); 
```

更新：

这是一个[演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text12.php)，因此您可以看到发生了什么，请按照以下步骤使用演示：

*   第1步：在左侧你会看到一个绿色的加号按钮，点击这个按钮，会出现一个模态窗口。
*   第 2 步：在模式窗口的搜索栏中，您将看到一个搜索栏，输入“AAA”并提交。
*   第 3 步：您会看到一堆结果供您搜索。在第一行中，您将看到一个“Answer”列，该列在该第一行中的该列下显示“B”。单击“添加”按钮以添加该行。
*   第 4 步：您现在将在右侧看到按钮“B”突出显示。

目前这很好，但现在出现了问题：

*   第 5 步：再次单击该行中的绿色加号按钮并执行相同的搜索。
*   第6步：这次添加“Answer”为“A C”的第二行。现在您可以看到按钮 A 和 C 突出显示，但按钮 B 仍然突出显示，它应该被关闭。

所以这就是我的问题，在这个例子中，为什么按钮“B”没有关闭，因为它现在不是答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:17:56.823

`answers`我认为您需要从包含该类的所有项目中删除该类，而不是删除该变量的类`answerBtnsOn`。

```
$( '.answerBtnsOn' ).removeClass( 'answerBtnsOn' ).addClass( 'answerBtnsOff' ); 
```

首先执行此操作，因为它会删除该类的所有实例，然后将该类添加到需要它的答案中。

您可能还希望参考[jQuery 手册，`.toggleClass()`](http://api.jquery.com/toggleClass/)了解如何改进您已有的内容。

# flash - DojoX Flash 流式传输

> ID：11401522
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:12:05.177
> 
> 标签：flash, dojo, wowza

当我将 jwplayer 与以下配置一起使用时，一切正常。

```
jwplayer('someId').setup({
        'flashplayer': '/js/jwplayer/player.swf',
        'file':        'awesome.flv',
        'streamer':    'rtmp://some.server.com:1934/vod',
        'width':       '220',
        'height':      '190'
    }); 
```

当我使用带有以下配置的 dojo 时：

```
new Flash({
    path:   'rtmp://some.server.com:1934/vod?file=awesome.flv' ,
    width:    220,
    height:   190
    }, this.someId); 
```

Flash 占位符可见，但没有播放流的控件，在控制台中我可以看到对我没有意义的错误......

```
Building SWF failed.
[Break On This Error]   

comboPendingTimer = null;

dojo.js (line 648) 
```

dojo flash 配置有什么问题？另一件事是如何告诉dojo使用`object`标签？现在它使用了一些奇怪`embed`的标签......

Dojo 1.7.2 版文档没有那么有用[http://dojotoolkit.org/reference-guide/1.7/dojox/flash.html](http://dojotoolkit.org/reference-guide/1.7/dojox/flash.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:16:16.887

Dojox.embed.Flash 只是一个浏览器嗅探实用程序，它将以最适合用户浏览器的方式呈现`<embed>`或`<object>`。

你做错了路径，Flash 对象不知道如何处理流式 flv 文件，它需要指向一个 swf。

### 可使用的选项

```
var dataurl =    "player.swf"
var flashvars =  {'file':'playlist.xml','autostart':'true'};
var params =     {'allowfullscreen':'true','allowscriptaccess':'always', 'bgcolor':'#ffffff'};
var attributes = {'id': 'player1','name':'player1'};
var expressInstall = "http://www.adobe.com/cfusion/knowledgebase/index.cfm?id=6a253b75" 
```

### 将 swfobject 与 jwplayer 一起使用

这是一个来自 longtail 的示例，展示了如何通过 swfobject 嵌入：

```
swfobject.embedSWF(dataurl, 'flashContent', '300', '250', '9', 'false', flashvars, params, attributes); 
```

因此来自原型 embedSWF 是：

```
swfobject.embedSWF(swfUrlStr, replaceElemIdStr, widthStr, heightStr, 
     swfVersionStr, xiSwfUrlStr, flashvarsObj, parObj,
     attObj, callbackFn) 
```

### 将 dojox.embed.Flash 与 jwplayer 一起使用

有关参数，请参阅[参考指南](http://dojotoolkit.org/reference-guide/1.7/dojox/embed/Flash.html#constructor-parameters)

将以上结果映射到

```
new Flash({
    width: 300,
    height: 250,
    minimumVersion: 9,
    expressInstall : expressInstall,
    allowScriptAccess: true,

    path: dataurl,
    id: 'player1',
    vars: flashvars,
    params: params        

}, 'flashContent'); 
```

# eclipse - 打开资源下拉列表中的eclipse juno粗体文件名

> ID：11401525
> 
> 赞同：2
> 
> 时间：2012-07-09T19:12:16.333
> 
> 标签：eclipse, eclipse-juno

Eclipse Indigo 在打开资源的下拉列表中提供了粗体文件名。粗体文件名表示文件已打开但不是活动选项卡。如果我没记错的话，文件名列表也是按字母顺序排序的。

默认情况下，Eclipse Juno 不会将此列表中的任何文件名加粗，并且它们也按最近打开的方式排序。我认为添加的快速访问搜索栏与此有关。

快速访问栏是一个有用的新功能；但是，有没有办法在下拉列表中重新启用粗体文件名选项并按字母顺序对资源进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:52:15.700

这是 Juno 中的一个错误，仍然存在：[错误 370441 - 允许在“>>”下拉列表中查看所有编辑器](https://bugs.eclipse.org/bugs/show_bug.cgi?id=370441)

# ruby-on-rails - 我如何在 Rails 中构建一个复杂的表单，允许我关联或创建一个新的相关实体？

> ID：11401529
> 
> 赞同：1
> 
> 时间：2012-07-09T19:12:40.517
> 
> 标签：ruby-on-rails, forms

stackoverflow 上有很多关于 rails 复杂表单的问题，它们似乎都指向 Ryan Bates 关于这个主题的不错的 railscast 演示：[part1](http://railscasts.com/episodes/196-nested-model-form-part-1)和[part2](http://railscasts.com/episodes/197-nested-model-form-part-2)。

这对它的作用很好，但我没有看到解决您可能想要创建新的子对象或者您可能想要关联已经存在的对象的情况的问题。

就我而言，我希望用户能够创建一个新事件。作为其中的一部分，他们需要说明谁参与了该事件。大约一半的时间，被添加到事件中的人员已经存在于数据库中。在这种情况下，应该鼓励用户使用那些现有记录而不是创建新记录。

有关如何处理表单中这种复杂性的任何建议？

作为解决方案的一部分，您是否建议，如果用户在提交父对象之前找不到应用程序继续运行并动态创建它的人？我的想法（但有兴趣听取建议）是用户应该使用现有的 Person 记录（如果有的话），但是如果用户需要创建一个 NEW Person 记录，那么这个新记录不会提交到数据库，直到用户提交事件。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:11:41.417

嗨，要完成您需要做的事情，有几个简单的步骤可以遵循： 1）在模型类（在您的情况下为 Incident 和 Person 类）中，确保放置如下内容：

```
class Incident < ActiveRecord::Base
    has_and_belongs_to_many :people
    # Note if you want to be able to remove a person from the Incident form (to de-associate) put true in :allow_destroy => true on the accepts_nested_attributes_for
    accepts_nested_attributes_for :people, :allow_destroy => false, :reject_if => :all_blank
    validates_associated :people #so you won't be able to save invalid people objects
    attr_accessible :date_occur, :location, :people_attributes # note the :people_attributes here
    #do your Incident validations as usual...        
end

class Person < ActiveRecord::Base
    has_and_belongs_to_many :incidents
    #the following line it's to allow mass assignment, basically it will allow you to create people from the Incident form
    attr_accessible :first_name, :last_name, :dob 
    #do your Person validations as usual...
end 
```

2) 在视图方面，最简单的方法是修改事件表单文件 (app/view/incidents/_form.html.erb) 以允许用户将现有人员和创建新人员分配给事件：

```
# app/view/incidents/_form.html.erb

<%= semantic_form_for(@incident) do |f| %>
    <% if @incident.errors.any? %>
    <div id="error_explanation">
        <h2><%= pluralize(@incident.errors.count, "error") %> prohibited this incident from being saved:</h2>
        <ul>
            <% @incident.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
        </ul>
    </div>
    <% end %>

    <div class="field">
        <%= f.label :date_occur %><br />
        <%= f.datetime_select :date_occur %>
    </div>
    <div class="field">
        <%= f.label :location %><br />
        <%= f.text_field :location %>
    </div>

    <%= f.input :people, :as => :select, :collection=>Hash[Person.all.map { |p| [p.first_name + ' - ' + p.last_name, p.id] }] %>

    <%= f.fields_for :people, Person.new() do |new_person_form| %>
        <div class="incident-people new-person">
            <%= new_person_form.inputs    :name=>'Add New person' do %>
                <%= new_person_form.input :first_name, :label=>'First Name: ' %>
                <%= new_person_form.input :last_name, :label=>'Last Name: ' %>
                <%= new_person_form.input :dob, :label=>'Date of birth: ' %>
            <% end %>
        </div>
    <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

3）最后，您需要修改您的更新并为事件控制器创建方法，如下所示：

```
# app/controllers/incident_controller.rb
def create
    selected_people = params[:incident][:person_ids].keep_if{ |v| v.present? }
    params[:incident].delete(:person_ids)
    @incident = Incident.new(params[:incident])
    @incident.people = Person.find( selected_people )

    respond_to do |format|
        if @incident.save
            format.html { redirect_to @incident, notice: 'Incident was successfully created.' }
            format.json { render json: @incident, status: :created, location: @incident }
        else
            format.html { render action: "new" }
            format.json { render json: @incident.errors, status: :unprocessable_entity }
        end
    end
end

def update
    selected_people = params[:incident][:person_ids].keep_if{ |v| v.present? }
    params[:incident].delete(:person_ids)
    @incident = Incident.find(params[:id])
    @incident.people = Person.find( selected_people )
    respond_to do |format|
        if @incident.update_attributes(params[:incident])
            format.html { redirect_to @incident, notice: 'Incident was successfully updated.' }
            format.json { head :no_content }
        else
            format.html { render action: "edit" }
            format.json { render json: @incident.errors, status: :unprocessable_entity }
        end
    end
end 
```

就是这样，如果您需要进一步的帮助，请告诉我。联邦快递

# ios - UIView 默认样式有圆角？

> ID：11401530
> 
> 赞同：2
> 
> 时间：2012-07-09T19:12:41.767
> 
> 标签：ios, uiview, interface-builder, nib

我正在使用 a`UIPopoverController`来显示`UIView`. 布局有点类似于 a`UISplitViewController`所以在“细节视图”上看起来有圆角很奇怪，因为它留下了一个小间隙。我根本找不到与其他人遇到此问题的任何信息，但这些圆角似乎是默认样式。是否可以删除它们？

可能有帮助的事情：

*   我从一个 nib 文件加载我的视图，但我目前没有对默认值进行任何更改`UIView`
*   我尝试`clipsToBound = NO`设置`viewDidLoad`
*   我尝试`layer.cornerRadius = 0`设置`viewDidLoad`

视图的顶部似乎也有阴影，但很难分辨。有什么办法可以摆脱所有这些默认样式？我只想要一个空白的正方形。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T00:30:13.570

没有支持的方法可以使 UIPopoverController 内部的视图没有圆角。UIPopoverController 的内部代码将您的视图添加到带有圆角的视图中，该圆角剪辑到边界。

可能有一种骇人听闻的方式来做到这一点，即等到 UIPopoverController 显示，然后遍历您视图的所有父级并将它们全部设置为 have `cornerRadius = 0;`and `clipsToBounds = NO;`，但即使您找到了解决方案，它也可能不兼容所有iOS 版本，如果 Apple 将来更改 UIPopoverController 的一些内部代码，那么您的解决方案可能会中断。

如果你真的想这样做，那么最好的方法是创建你自己的类来模仿 UIPopoverController 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:11:53.203

UIPopoverController 默认使用带圆角的黑色渐变色框。但是，您可以使用自定义类来设置背景视图。在这里尝试以下链接。

[在弹出窗口中更改颜色导航控制器](https://stackoverflow.com/questions/8490261/change-color-navigation-controller-in-a-popover)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T05:00:11.647

对于使用`UIPopoverPresentationController`的任何人，以下内容应该有效。

```
override open func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    view.superview?.layer.cornerRadius = 0
} 
```

# java - Hadoop 如何拆分和合并其输出数据？

> ID：11401532
> 
> 赞同：0
> 
> 时间：2012-07-09T19:13:00.500
> 
> 标签：java, hadoop, mapreduce

我认为我的问题最好用一个例子来解释。假设您将图像存储在 HDFS 上。该图像足够大，可以在 HDFS 上分成四个独立的较小文件。当您执行返回该图像的操作时，Hadoop 是否会返回这 4 个可以组合回原始图像的小文件？还是 Hadoop 会自动将 4 个小文件重新组合回原始文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:40:36.937

Hadoop 分布式文件系统 (HDFS) 将每个文件存储在一个或多个块中（每个块被复制一次或多次）。

对于每个文件，您可以配置文件块大小和复制因子（如果未提供，则使用默认值）。

当您执行任何基于文件的操作时，您正在处理数据流，名称节点是将文件路径映射到块及其位置（数据节点）的中央存储库。

举个例子，假设您有一个 32 MB 的文件块大小和一个 50MB 的文件 - 这将被分成 2 个块（32 MB 和 18 MB）。如果配置的文件复制因子是 3，那么 NameNode 将尝试并确保每个块被复制到集群中的 3 个数据节点。

当您尝试从该文件中读取数据时，会返回一个 FSInputStream，它与大多数输入流一样，您可以查找文件中的某个字节位置。DFSClient 将您从细节中抽象出来，但它知道特定的字节偏移量，它与哪个块相关并无缝获取字节（即使您在块边界之间跨步）。

因此，总结并解决您的问题 - 对于从 HDFS 读取的客户端，它看起来像一个连续的输入流，但实际上是根据需要拼接在一起的 4 个块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:26:32.173

我不确定该示例是否完全符合 Hadoop 的正常使用方式。

但是，如果您的结果是一个大文件，那么它将作为较小的子文件*存储在 HDFS 中。*如果您通过 HDFS 文件系统操作检索它，那么它将作为单个逻辑文件*返回。*

# sql - 在 sql 表中仅搜索存储为流文档的用户指定文本

> ID：11401534
> 
> 赞同：0
> 
> 时间：2012-07-09T19:13:12.307
> 
> 标签：sql, wpf, richtextbox, flowdocument

我目前正在将富文本框中的信息作为流文档保存到我的 sql 表中，该表的列定义为 nvarchar(MAX)。数据存储如下：

```
<FlowDocument PagePadding="5,0,5,0" AllowDrop="True" NumberSubstitution.CultureSource="User" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><Paragraph>Messages at admin Level.Modified</Paragraph></FlowDocument> 
```

问题是当我使用关键字“user”搜索此列时，我希望它返回段落中包含“user”而不是 Flowdocument 定义中的记录。如何修改我的搜索以反映用户输入的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:42:48.810

where (col like '% user%' or col like '%user %") and col not like '%NumberSubstitution.CultureSource="User"'

或者

其中 CHARINDEX ('user', col , CHARINDEX('com/winfx/2006/xaml/presentation">', col) ) > 0

# jquery - 如何循环 .animate JQuery

> ID：11401535
> 
> 赞同：12
> 
> 时间：2012-07-09T19:13:17.200
> 
> 标签：jquery, animation

我正在使用一个内部带有图像的 div。我需要动画从页面的左右滚动，然后回到右边并继续循环。我在这里查看了很多帖子，但无法让脚本正常工作。

```
'$(document).ready(function(){
    function loop() {

       $('#clouds').animate({left: '+=1400',},50000, 'linear', function(){
           loop();
       }); 
```

HTML

```
< div id="clouds">< img border="0" alt="animated clouds" src="/images/clouds.png" />< /div> 
```

CSS

```
#clouds {
    position:absolute;
    z-index:500;
    right:0px;
    top:10px;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-09T19:24:11.893

尝试这个：

**JSFiddle** [http://jsfiddle.net/2YqH2/](http://jsfiddle.net/2YqH2/)

您不会将云移回右侧。在循环函数内部，我添加了

```
$('#clouds').css({right:0}); 
```

循环将从那里继续。我还更改了您的动画以设置“正确”属性的动画，因为您说您希望云从右向左移动。

此外，您的 javascript 格式不正确。确保你得到那些右括号和括号！这是固定的javascript。

```
$(document).ready(function() {
    function loop() {
        $('#clouds').css({right:0});
        $('#clouds').animate ({
            right: '+=1400',
        }, 5000, 'linear', function() {
            loop();
        });
    }
    loop();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-23T10:45:58.877

以上所有答案都是一些“黑客”解决方案。

根据[jQuery 文档`animate()`](http://api.jquery.com/animate/)，第二个参数是一个`options`有参数的对象`complete`；动画完成时调用的函数。

在 OP 的情况下，该`option`对象将配置如下：

```
function loop() {
    $('#clouds').css({right:0});
    $('#clouds').animate({
        right: '+=1400',
    }, {
        duration: 5000, 
        easing: 'linear', 
        complete: loop
    });
}
loop(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-21T14:22:53.007

只是为了向其他人添加一些信息，如果你不打算使用`animate()`你应该使用一些`setTimeout()`来防止错误**`Uncaught RangeError: Maximum call stack size exceeded`**

示例（**使用 jQuery**）：

**.js**

```
function looping() {
    $('.loader').fadeOut(1000);
    $('.loader').fadeIn(1000);
    setTimeout(function(){
        looping();
    }, 10);
} 
```

**.html**

```
<div class='loader'>Loading...</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T19:18:02.713

JAVASCRIPT：

```
$(document).ready(function() {

    $('#clouds').click(function() {
loop();       
    });

function loop(){
    alert('a');
        $('#clouds').animate({
            opacity: 0.25,
            left: '+=1400',
            height: 'toggle'
        }, 5000, 'linear', function() {
            loop();
        });

}

}); 
```

HTML：

```
<div id="clouds"><img border="0" alt="animated clouds" src="../img/image.png" /></div> 
```

你的错误是你从来没有调用函数循环。看看[它是如何工作的，](http://jsfiddle.net/RYybh/)你可以删除它，`alert('a')`因为它只是一个知道循环重新开始的标志。现在您需要进行反向运动（例如重置 div，以重新开始运动周期）。

# javascript - 用于在 wordpress 编辑器中修改 HTML 源的 javascript 小书签

> ID：11401538
> 
> 赞同：1
> 
> 时间：2012-07-09T19:13:20.340
> 
> 标签：javascript, wordpress, bookmarklet

我正在寻找创建一个书签，它将在创建新帖子时修改使用 wordpress 编辑器创建的任何 URL。此 javascript/bookmarklet 将在帖子中找到的任何 URL 之后添加一串代码，例如 ?=2324。指向 google.com 的链接将变为 google.com?=2324。表单的元素 ID 是 textarea#content.wp-editor-area。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:18:34.787

首先，添加任何书签。然后右键单击它并单击属性。指定名称。

然后对于 url，写：

```
javascript:var toChange=document.getElementById("content");var re=/("|')https?:\/\/*("|')/gi;toChange.value=toChange.replace(re,function($0){return $0+"?=234";});void(0) 
```

如果有错误，请告诉我。

# solidworks - Solidworks 中的消失点在我的安装中被反转了...有解决办法吗？

> ID：11401541
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:13:30.297
> 
> 标签：solidworks

不知何故，消失点在我的solidworks 版本中被否定了......即，一个块在旋转时会在远处扩展并在近距离收缩。因此，在代码的消失点上添加了一个减号。

我在大学网络上使用了一个版本的solidworks，所以很明显，一些工具包可能会切换它......

有没有一种简单的方法可以在设置或其他东西中修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:16:02.843

你确定你在看透视图吗？您可以更改透视量。

# java - 从查询中获取表名

> ID：11401542
> 
> 赞同：2
> 
> 时间：2012-07-09T19:13:40.073
> 
> 标签：java, regex

我的问题对你们中的许多人来说应该很简单假设我有以下 SQL，我想使用正则表达式获取表名：

```
SELECT name, age FROM table1 
```

使用这个表达式我可以得到

```
Pattern p = Pattern.compile(".*FROM\\s+(.*?)($|\\s+[WHERE,JOIN,START\\s+WITH,ORDER\\s+BY,GROUP\\s+BY])", Pattern.CASE_INSENSITIVE);
        Matcher result = p.matcher(pSql);
        if (result.find()) {
            lRetorno = result.group(1);
        } 
```

但是，如果表名包含模式名称 (xyz.table1)，我的表达式会带来一切。我的问题是......我需要对此查询进行什么修改才能只返回没有架构/所有者的表名？

任何帮助都会非常感激

拉斐尔·莫伊塔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:24:26.920

也许试试这种方式

```
String data1="SELECT name, age FROM table1 whatever";
String data2="SELECT name, age FROM schema.table1 whatever";

Pattern p=Pattern.compile("from\\s+(?:\\w+\\.)*(\\w+)($|\\s+[WHERE,JOIN,START\\s+WITH,ORDER\\s+BY,GROUP\\s+BY])",Pattern.CASE_INSENSITIVE);

//test
Matcher m=p.matcher(data1);
while(m.find())
    System.out.println(m.group(1));
m=p.matcher(data2);
while(m.find())
    System.out.println(m.group(1)); 
```

输出：

```
table1 
table1 
```

## 编辑

我刚刚意识到这部分`($|\\s+[WHERE,JOIN,START\\s+WITH,ORDER\\s+BY,GROUP\\s+BY])`不能正常工作，因为在我的输入中，我在表名之后放置了“whatever”，并且无论如何都找到了它。

它不像你那样工作，因为你正在使用`[WHERE,JOIN,START\\s+WITH,ORDER\\s+BY,GROUP\\s+BY]`而不是`(WHERE|JOIN|START\\s+WITH|ORDER\\s+BY|GROUP\\s+BY)`. 例如`[abc]`等于 (a|b|c) 所以它说正则表达式引擎接受该集合中的任何字符，而不是单词`abc`。将您的模式改进为类似

```
Pattern p=Pattern.compile("from\\s+(?:\\w+\\.)*(\\w+)(\\s*$|\\s+(WHERE|JOIN|START\\s+WITH|ORDER\\s+BY|GROUP\\s+BY))",Pattern.CASE_INSENSITIVE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:11:16.630

与其使用正则表达式进行解析，不如使用实际的解析器来进行解析。请参阅此相关问题[需要 java API 来解析](https://stackoverflow.com/questions/5881893/need-java-api-to-parse-sql-statements)推荐[Zql](http://zql.sourceforge.net/)库的 SQL 语句。

它有[它可以解析的查询示例，这些示例](http://zql.sourceforge.net/ztest.html)看起来至少与您要编写的任何正则表达式一样强大。

```
InputStream is = new ByteArrayInputStream(sqlQueryString.getBytes("UTF-8"));
ZqlParser parser = new ZqlParser(is);
ZQuery query = (ZQuery)parser.readStatement();
Vector tables = query.getFrom(); 
```

应该为你做。 `tables`是s 的一个`Vector`，`ZFromItem`你可以`getTable()`在一个没有架构组件的情况下获得它的名字。

# jquery - 在ajax内容中加载ckeditor

> ID：11401544
> 
> 赞同：5
> 
> 时间：2012-07-09T19:13:44.350
> 
> 标签：jquery, ckeditor

我正在使用 CKEditor 将我的 textareas 更改为所见即所得。一切正常，除非我通过 Ajax 调用加载内容。然后我的 CKEditor 没有加载。

我一直在寻找解决方案，但找不到任何对我有用的解决方案。

我的 Ajax 调用基本上是这样的：

```
$.ajax({
    type: "POST",
    url: url,
      success: function(data) {
            $('#content').html(data);
            $('.ckeditor').ckeditor();
      }
}); 
```

如您所见，我尝试使用函数**ckeditor()**以编程方式加载 CKEditor。但这给了我以下错误：

火狐 说：

> $(".ckeditor").ckeditor 不是函数

IE 说：

> 对象不支持属性或方法“ckeditor”

当通过 Ajax 调用加载内容时，还有其他方法可以按类名加载 CKEditor 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-06T08:46:23.657

首先你必须加载 jquery 适配器'/path/to/ckeditor/adapters/jquery.js'

比`$('.ckeditor').ckeditor();`会工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-27T06:29:57.323

你可以使用命令：

```
CKEDITOR.replace( 'editor1' ); 
```

但有一个区别 - editor1 是 textarea 的 id 而不是类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T19:18:47.463

有办法解决这个问题。像往常一样加载你的ckeditor，但保持隐藏。当通过 ajax 加载内容时，填充编辑器 div 并通过 jquery 显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-11T22:07:31.277

有一个类似的问题。在 AJAX + 将元素附加到页面（具有可编辑属性的那些）之后，我需要使用 CKEDITOR 的多个区域。花了很多小时无济于事，然后...

我发现了这个并在这些元素中将 contenteditable 设置为 true 之后添加了它：

`CKEDITOR.inlineAll();`

在 AJAX + 附加到页面之后处理了我所有的 CKEDITOR 区域的初始化。

[https://docs.ckeditor.com/ckeditor4/docs/#!/api/CKEDITOR-method-inline](https://docs.ckeditor.com/ckeditor4/docs/#!/api/CKEDITOR-method-inline)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-29T12:37:07.370

`$('.ckeditor').ckeditor();` 我通过调用我的 ajax 的成功属性来尝试接受的答案 。然而，这给出了一个错误。

然而 StanleyD 的回答确实有效。

使用 ajax 附加内容后，尝试在 ajax 的成功属性中添加以下代码： `CKEDITOR.replace('textareaId');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-02T15:21:16.100

ajax之后可以使用`done()`and方法`then()`

```
$.ajax({
    type: "POST",
    url: url
}).done(function(data){
     $('#content').html(data);
}).then(function(){
     $('.ckeditor').ckeditor();
}); 
```

# sql - 当您不在表之间使用外键时，您如何表达关系

> ID：11401545
> 
> 赞同：0
> 
> 时间：2012-07-09T19:13:47.487
> 
> 标签：sql, foreign-keys, parent-child

我有 2 张桌子。父子表。当我删除父记录时，他们不应该删除子记录。因此我不使用 ON Delete cascade。而且我也根本不想使用外键，因为如果仍然引用了子记录，我将无法删除父记录。使 FKey 可以为空以具有可选关系也是没有选择的，因为只有当存在相关父级时才能存在子级。

OK FKey 完全删除。在我的实体关系图中，这两个表之间没有关系。但事实并非如此。当我在 6 个月后查看图表时，这可能会产生误导。

你现在会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:20:48.203

如果存在子记录，则删除父记录是一种不好的做法。您可能会考虑是否最好使用 is_Active 标志来代替软删除，并通过将记录留在那里以报告历史信息来保持数据完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:24:48.847

假设您有时想删除父行（而不仅仅是标记它们）而不删除子行，那么在我看来您有两个选择。

1.  删除父行时，将子表中的父键设为 NULL。
2.  删除父行时，将父键保留在子表中。

在第一种情况下，使用外键并`ON DELETE SET NULL`执行此操作。（假设您的 dbms 支持该约束。）

在第二种情况下，不使用外键约束。

您对不可为空的外键的要求没有意义。一方面，你说只有有相关的父母，孩子才能存在。另一方面，您想删除父级而不删除子级。这两个要求不能很好地结合在一起。

# .htaccess - 使用 .htaccess 对 www.example.com 或 example.com 进行移动重定向

> ID：11401549
> 
> 赞同：4
> 
> 时间：2012-07-09T19:14:02.033
> 
> 标签：.htaccess, redirect, mobile

我将很快开始使用我的网站的移动版本，已经为其设置了空间，如下所示：

[http://mobile.example.com/](http://mobile.example.com/)

我在这里找到了一个解决方案： [重定向移动设备的最佳方式](https://stackoverflow.com/questions/9421577/best-way-to-redirect-mobile-devices)

^ 这似乎工作得很好，除了当我从我的 iphone4 尝试这个时，它只会在我在 url 中输入 www 时重定向。如果我把它排除在外，我只会得到我的常规站点。

因此，如果用户输入 www.example.com 或 example.com，我需要移动重定向才能工作

我对代码进行了一些修改，几乎可以正常工作。现在它适用于两个版本的网址，但我必须刷新一次才能获得移动网站。显然，我希望重定向在他们第一次访问该站点时起作用。我确定我在这里遗漏了一些东西，让我知道你的想法。顺便说一句，我有 aplus.net 作为我的主机。

```
RewriteCond %{HTTP_HOST} ^(www\.example\.com|example\.com) [NC]
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^(.*)$ http://mobile.example.com/$1 [L,R=302] 
```

回应乔恩·林...

是的，我的 .htaccess 中还有一些其他规则

定义不同的索引页面类型：

```
DirectoryIndex index.html index.htm INDEX.HTML INDEX.HTM Index.html Index.htm default.htm Default.htm index.shtml index.cgi index.php index.php3 index.jsp index.phtml 
```

从 url 中删除 .php 扩展名

```
Options +MultiViews
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

然后这里是从cp自动放入的：

```
# [ CP Global Redirection - Start ]
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{SERVER_PORT} !^443$
RewriteCond %{SERVER_NAME} !^www\..*$
RewriteRule ^(.*)$ http://www.%{SERVER_NAME}/$1 [R]
RewriteCond %{SERVER_PORT} ^443$
RewriteCond %{SERVER_NAME} !^www\..*$
RewriteRule ^(.*)$ https://www.%{SERVER_NAME}/$1 [R]
</IfModule>
# [ CP Global Redirection - End ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:19:36.703

以下是我们在 Aplus.net 平台上为我们的移动应用程序使用的移动重定向代码。应该能够使用它重定向到您自己的自定义站点。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:X-WAP-PROFILE} !^$ [OR]
RewriteCond %{HTTP:PROFILE} !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(Alcatel|Asus|Android|BlackBerry|Ericsson|Fly|Huawei|i-mate|iPAQ|iPhone|iPod|LG-|LGE-|MDS_|MOT-|Nokia|Palm|Panasonic|Pantech|Philips|Sagem|Samsung|Sharp|SIE-|Symbian|Vodafone|Voxtel|WebOS|Windows\s+CE|ZTE-|Zune).*$ [NC,OR]
RewriteCond %{HTTP_ACCEPT} application/vnd.wap.xhtml\+xml [NC,OR]
RewriteCond %{HTTP_ACCEPT} text/vnd.wap.wml [NC]
RewriteCond %{SERVER_PORT} !^443$
RewriteCond %{SERVER_NAME} ^www\.(.*)$
RewriteRule ^(.*) http://mobile.%1/ [L]
RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:X-WAP-PROFILE} !^$ [OR]
RewriteCond %{HTTP:PROFILE} !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(Alcatel|Asus|Android|BlackBerry|Ericsson|Fly|Huawei|i-mate|iPAQ|iPhone|iPod|LG-|LGE-|MDS_|MOT-|Nokia|Palm|Panasonic|Pantech|Philips|Sagem|Samsung|Sharp|SIE-|Symbian|Vodafone|Voxtel|WebOS|Windows\s+CE|ZTE-|Zune).*$ [NC,OR]
RewriteCond %{HTTP_ACCEPT} application/vnd.wap.xhtml\+xml [NC,OR]
RewriteCond %{HTTP_ACCEPT} text/vnd.wap.wml [NC]
RewriteRule ^(.*) http://mobile.%{HTTP_HOST}/ [L] 
```

# ruby-on-rails - 将图像从本地机器上传到 ruby on rails 应用程序的 curl 请求

> ID：11401553
> 
> 赞同：6
> 
> 时间：2012-07-09T19:14:31.093
> 
> 标签：ruby-on-rails, file-upload, curl

我有一个内置于 ruby​​ on rails 的应用程序。我需要向该应用程序发布 curl 请求以从本地计算机上传图像。在我的 ruby​​ on rails 应用程序中，我使用回形针进行图像上传。

现在这个 curl 请求工作得很好，因为这个 curl 请求没有上传图片：

```
 curl -v -H   "Accept: application/json" -H "Content-type: application/json" -X PUT -d '{"user":{"first_name":"John","last_name":"Smith"},"token":"api"}'  http://localhost:3000/users/8 
```

现在我想从我的本地机器上传一张图片。

添加“display_photo”：@test.jpg 不起作用：这是我正在尝试的：（*但它不起作用*。）

```
 curl -v -H  -F "Accept: application/json" -H "Content-type: application/json" -X PUT -d '{"user":{"first_name":"firstname","last_name":"lastname","display_photo":@test.jpg},"token":"api"}'  http://localhost:3000/users/8 
```

所以问题是如何从 curl 请求上传图像/数据文件/视频

**编辑**

这是我的控制器：

```
 def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html {  redirect_to(@user, :notice => 'User was successfully updated.') }
        format.json  { render :file => "users/json/show.json.erb", :content_type => 'application/json' }
      else
        format.html { render :action => "edit" }
        format.json  { 
          @errors_object = @user
          render :file => "shared/json/errors.json.erb", :content_type => 'application/json' }
      end
    end
  end 
```

在我的模型中：

```
class User < ActiveRecord::Base
    has_attached_file :display_photo, :styles => { :medium => "200x200#", :thumb => "100x100#", :very_small=>"24x24#" }
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T07:42:32.580

您通常会上传这样的文件：

```
curl -i -F filedata=@upload.txt http://localhost:5000/ 
```

这样做会模仿您通过网络浏览器文件上传的行为。

如果您查看 rails 对此的响应，它是通过`application/octet-stream`可以作为上传文件正确处理的发送的。据我所知，用 json 请求是不可能做到这一点的：

```
Started POST "/" for 127.0.0.1 at 2012-07-10 09:40:59 +0200
Processing by HomeController#index as */*
  Parameters: {"filedata"=>#<ActionDispatch::Http::UploadedFile:0x007f82d59a3580 @original_filename="upload.txt", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"filedata\"; filename=\"upload.txt\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:/var/folders/f_/wjnrg7cd3d9f1tpy3k5fhrwm0000gn/T/RackMultipart20120710-30471-1t9abns>>} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-15T15:06:46.163

我遇到了同样的问题，我用以下方法解决了它，绕过了 JSON 请求：

```
curl -v -H 'Content-Type: multipart/form-data' -H 'Accept: application/json' -H 'x-api-key:myapikey' -F "user[first_name]=firstname" -F "user[last_name]=lastname" -F "user[display_photo]=@test.jpg" http://localhost:3000/users/8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T06:47:47.837

```
curl -v -include --form "<param>=@/<root>/image_name.png" http://<your url>
**<param>**: The image parameter of the url;
**<root>**: You can use pwd get image root;
**<your url>**: Post url; 
```

# c# - 按钮回发一位用户

> ID：11401554
> 
> 赞同：1
> 
> 时间：2012-07-09T19:14:35.423
> 
> 标签：c#, asp.net

我不确定我是否在正确的区域，但我会尝试一下。

我有一个 asp.net 页面，页面后面有一个 C 尖锐代码，我有一个提交按钮来保存页面上的表单。现在我的问题是我有 500 个用户没有任何问题，而 1 个用户必须点击它 5 或 6 次才能触发它。每次都会回发，但不会保存。

如果需要，我可以发布一些代码，我已经查看了所有内容，她的记录和计算机与其他人只是在寻找想法没有什么不同。

**欢迎所有**和任何帮助谢谢大家。

编辑：

所有用户必须使用 IE7 或更高版本

```
<asp:Button ID="button" runat="server" /> 
```

后面的代码：

```
protected override void OnInit(EventArgs e)
{
    button.EnableViewState = true;

    InitializeComponent();
    base.OnInit(e);
}

private void InitializeComponent()
{
    this.button.Click += new EventHandler(this.button_Click);
}

protected void button_Click(object sender, EventArgs e)
{
    if (((Session["value"] == null) || (Session["value"] == "")))
    {
        Response.Redirect("login.aspx");
    }
    else
    {
        checkNoteValues("Inc");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:29:55.367

你可以：

1.  使用 DIV 锁定屏幕；
2.  点击后禁用按钮；
3.  使用“同步器令牌”模式；

选项 1 和 2 容易受到一个（或多个）页面重新加载 (F5) 的影响。选项 3 更稳健，理论上是万无一失的。

很快我将发布 1 和 3 的示例代码。

编辑：

“同步器令牌”的助手类

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace TestDivLockScreen
{
    /// <summary>
    /// Helper to "Synchronizer Token Pattern".
    /// </summary>
    public class SynchronizerToken
    {
        private static readonly string SESSION_KEY_TOKEN = "TestDivLockScreen.SynchronizedToken.SESSION_KEY_TOKEN";

        /// <summary>
        /// Returns a new token and positions it for validation of next request.
        /// </summary>
        /// <returns></returns>
        public static string NewToken()
        {
            string token = Guid.NewGuid().ToString("N");
            HttpContext.Current.Session.Add(SESSION_KEY_TOKEN, token);
            return token;
        }

        /// <summary>
        /// Returns the value of the current token. Renew if the current token is null.
        /// </summary>
        /// <returns></returns>
        public static string CurrentToken()
        {
            string token = HttpContext.Current.Session[SESSION_KEY_TOKEN] as string;
            if (string.IsNullOrEmpty(token))
            {
                token = NewToken();
            }

            return token;
        }

        /// <summary>
        /// Checks if the token matches the token of last call to NewToken.
        /// The removal of the token is only made after a new call NewToken.
        /// </summary>
        /// <param name="token"></param>
        /// <returns></returns>
        public static bool IsCurrentToken(string token)
        {
            string currentToken = HttpContext.Current.Session[SESSION_KEY_TOKEN] as string;
            if (currentToken == null)
            {
                return false;
            }
            else
            {
                if (currentToken.Equals(token))
                {
                    return true;
                }
                else
                {
                    return false;
                }
            }
        }

        /// <summary>
        /// Do the same as IsCurrentToken. However loads a new "token value"
        /// in the session. Is "Thread Safe"!
        /// </summary>
        /// <param name="token"></param>
        /// <returns></returns>
        public static bool IsCurrentTokenRenew(string token)
        {
            lock (HttpContext.Current.Session)
            {
                string currentToken = CurrentToken();
                NewToken();
                if (currentToken.Equals(token))
                {
                    return true;
                }
                else
                {
                    return false;
                }
            }
        }
    }
} 
```

在页面上定义一个隐藏字段：

```
<asp:HiddenField ID="HdfSyncToken" runat="server" /> 
```

关于后面的代码：

```
protected void Pre_Render(object sender, EventArgs e)
{
    //repositioning token
    this.HdfSyncToken.Value = SynchronizerToken.CurrentToken();

    //Refresh GridView
    this.GrvRecords.DataSource = this.Records;
    this.GrvRecords.DataBind();
}

protected void BtnInsertST_Click(object sender, EventArgs e)
{
    //Abort second execution for the same value of the token
    if (!SynchronizerToken.IsCurrentTokenRenew(this.HdfSyncToken.Value))
    {
        ClientScript.RegisterStartupScript(this.GetType(), "alert", "<script type='text/javascript'>alert('Request has already been answered!');</script>");
    }
    //Insert Record (token validation OK)
    else
    {
        this.InsertRecord();
    }
} 
```

完整源码（VS2005）：[q_11402631.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/q_11402631.7z)

# android - 如何为不同版本的 Android 设置不同的小部件？

> ID：11401555
> 
> 赞同：2
> 
> 时间：2012-07-09T19:14:50.107
> 
> 标签：android, widget, gesture

我有一个应用程序，我想添加一个小部件。

我一直在研究文档，看起来只有 Android 3.0+ 支持小部件中基于手势的视图。例如，我可以在 4.03 的 gmail 小部件上滚动我的电子邮件作为 listView，并且我还看到了一个 GridView 小部件（在 4.03 上）。

因此，这些类型的小部件不能在 2.2 和 2.3 中使用

有什么方法可以让我的应用程序为 4.0 提供一个可手势小部件，如果用户有 2.3，它将加载不同的小部件？

我编写两个小部件都没有问题，它们都可以工作——我只希望 2.2 上的用户使用我的 2.2 小部件，而 3.0+ 上的用户使用我的 3.0+ 小部件。

这可以通过一个应用程序实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:37:18.360

android 有资源和代码来打开版本的设施。不，没有什么比向小部件的 XML 添加版本号更高级的了。

对于布局和其他资源，您可以将资源文件夹命名为，

```
res/values-v11
res/layout-v11 
```

等 android 将在运行时提取最佳匹配资源。在代码中，您可以检查 SDK 版本，

```
if (Build.VERSION < Build.VERSION_CODES.HONEYCOMB) {
  // handle android 2 here
} 
```

# android - 在android中保存fingerpaint图像时应用程序停止

> ID：11401556
> 
> 赞同：0
> 
> 时间：2012-07-09T19:14:49.913
> 
> 标签：android, view

嘿，我想通过保存菜单将用户制作的图像保存在 fingerpaint API 中。
这里是活动课`

```
 public int mImageCount = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button res = (Button) findViewById(R.id.reset);
        res.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method
                TouchEventView touchView = (TouchEventView) findViewById(R.id.mydrawview1);
                touchView.clear();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu_name, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.save:
            save();
            return true;
        case R.id.open:
            open();
            return true;
        default:
            return super.onOptionsItemSelected(item);

        }

    }

    public void save() {
        TouchEventView touchview = (TouchEventView) findViewById(R.id.mydrawview1);

        File myDir = new File("/sdcard/saved_images");
        if (!myDir.exists())
            myDir.mkdirs();
        mImageCount++;
        String fname = "image-" + mImageCount + ".jpg";
        File file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        touchview.saveAsJpg(file);
        Toast.makeText(this, "Image has been saved", 7000).show();
    }

    public void open() {
        TextView tv = new TextView(this);
        tv.setText("Hello, Android");
        setContentView(tv);

    }

} 
```

` 这是视图类

```
 public class TouchEventView extends View {
    private static Bitmap mBitmap;

    private Paint paint = new Paint();
    private Path path = new Path();
    private Canvas mCanvas;
    private Path mPath;
    private Paint mBitmapPaint;

    public TouchEventView(Context context, AttributeSet attrs) {
        super(context, attrs);

        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(5f);
        mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(path, paint);
    }

    public void clear() {
        path = new Path();
        invalidate();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);

            return true;
        case MotionEvent.ACTION_MOVE:
            path.lineTo(eventX, eventY);
            break;
        case MotionEvent.ACTION_UP:
            // nothing to do
            break;
        default:
            return false;
        }

        // Schedules a repaint.
        invalidate();
        return true;
    }

    public void saveAsJpg(File f) {
        String fname = f.getAbsolutePath();
        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream(f);
            // Take the bitmap of the view and write it out as a jpeg.
            mBitmap.compress(CompressFormat.JPEG, 95, fos);

        } catch (Throwable ex) {
            ex.printStackTrace();

        }
    }
} 
```

` 我已经编辑了我的代码。它只保存了一个空白屏幕。为什么没有保存指纹图像？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:33:14.860

您永远不会初始化`touchview`. 插入这一行：

```
TouchEventView touchview = (TouchEventView) findViewById(R.id.mydrawview1); 
```

，`public void save()`并删除第二行的声明。

# php - PHP 停止 ignore_user_abort 进程

> ID：11401560
> 
> 赞同：0
> 
> 时间：2012-07-09T19:14:56.630
> 
> 标签：php, loops, process, abort

我正在测试运行`ignore_user_abort`进程的东西。现在它永远运行，我不知道如何处理或关闭它。是否可以通过终端访问它们？另外，我正在运行 Apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:23:34.757

> 这怎么可能 ？

```
exit; 
```

> 是否可以通过终端访问它们？

不，您可以尝试打开一个套接字或类似的东西，然后间接与进程通信，但通常没有真正的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:25:59.163

如果在网络服务器上运行，则很难找到正确的。重新启动将终止该网络服务器上运行的所有 php 脚本。

如果您在 cli 上运行它们，您可以识别进程 ID 并将其杀死。

检查[http://php.net/manual/en/function.getmypid.php](http://php.net/manual/en/function.getmypid.php)以获取 PHP 的进程 ID

# ios - 师生应用程序；移动设备之间的通信

> ID：11401561
> 
> 赞同：0
> 
> 时间：2012-07-09T19:14:58.657
> 
> 标签：ios, mobile, client-server, communication

一位客户让我为他写一个应用程序（iOS），老师在他的平板电脑上做一些事情，学生们在他们的移动设备上看到实时发生的事情。例：老师提问；学生看到问题并回答；老师看到谁点击了什么

现在，从技术上解决这个问题的最佳方法是什么？到目前为止，我已经想到了这些方法：

*   设置服务器并通过服务器进行通信 -> 问题：客户端设备需要某种推送通知系统
*   将所有客户端设备注册到教师设备，然后直接与他们通信

这两种方式对我来说听起来都不好。你们中有人有这种用例的经验吗？是否有另一种更简单的选择来做到这一点？是否有某种适用于 iOS 的 RMI？

非常感谢您的回答！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:19:05.983

ios和android都内置了推送通知系统

我建议为您的服务器使用某种网络服务（如 REST）

您也可能不需要推送通知。如果客户端连接到服务器，那么它们可以通过该连接接收数据。

# python - 如何访问函数的内部变量并在python中更改其值？

> ID：11401563
> 
> 赞同：3
> 
> 时间：2012-07-09T19:15:04.373
> 
> 标签：python

```
>>> def nil():
...     ss='nil'
...     print ss
... 
>>> nil()
nil
>>> nil.ss='kk'
>>> nil()
nil
>>> print nil.ss
kk 
```

我知道python中的一切都是一个对象，所以函数也是一个对象，现在我想更改存储在函数中的'ss'变量的值，现在我尝试使用nil.ss来更改它的值，但它没有； t改变..两个'ss'之间的区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:17:09.190

第一个`ss`是函数的内部变量；第二个是函数的属性。它们不引用同一个对象。

不过，这是一种方法：

```
>>> def apple():
    if not hasattr(apple, 'ss'):  # This way it'll only be set inside the function once
        apple.ss = 'nil'
    return apple.ss

>>> apple()
'nil'
>>> apple.ss
'nil'
>>> apple.ss = 'kk'
>>> apple.ss
'kk'
>>> apple()
'kk' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T19:18:02.377

该函数是一个对象，但`ss`不是类中的成员变量。它是在函数体中定义的局部变量，外部不可访问。改变它的唯一明智的方法是改变函数的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:19:08.470

```
def nil():
 ss='nil' 
```

这是因为`nil.ss`不指向函数`ss`中定义的变量`nil`。

`nil.ss`手段`ss`现在是`nil`对象的一个​​属性。

`nil.ss`和`ss`里面`nil()`完全不同。

```
>>> def nil():
    ss='foo'
    return ss

>>> nil.ss='bar'
>>> foo=nil()
>>> bar=nil()
>>> nil.ss
'bar'
>>> foo
'foo'
>>> bar
'foo' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T19:22:30.613

`ss`您在函数体内创建的只是一个临时变量；在执行该行代码之前它不存在，并且一旦到达块的末尾它就不再存在。

您在函数上创建的`ss`是函数的属性。现在您有两个不同的变量命名`ss`，但它们彼此没有任何关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T19:47:44.457

您可以使用编译器模块修改代码。它将允许您将任意 python 代码作为文本加载，将其解析为抽象语法树，对其进行更改，然后重新编译。之后，您可以运行带有其他更改的代码。

[http://docs.python.org/library/compiler.html](http://docs.python.org/library/compiler.html)

虽然我不建议使用它，因为它在 Python 3.0 中已被弃用。在 3.0 中可能还有其他方法可以做到这一点，因为否则他们不会弃用该模块。

真的要问了。您试图用您尝试编写的这种方法来解决什么奇怪的场景？很有可能，无论您需要做什么，您都可以用一种更简单的方式来完成它。通过函数的参数，或者您设计以满足您的需求的类结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T19:22:23.267

要回答您问题的另一部分：您不能`ss`从函数外部更改局部变量。除非函数正在执行，否则它不存在。

# python - 来自单个按钮 tkinter 的多项操作

> ID：11401564
> 
> 赞同：1
> 
> 时间：2012-07-09T19:15:12.267
> 
> 标签：python, tkinter

我一直在使用 matplotlib 和 tkinter 为基于 GUI 的绘图仪编写程序。我为一些选项添加了一个顶层窗口。我想在单击按钮后执行一个函数并退出顶层窗口。那可能吗？

* * *

我面临的问题是我使用了一个必须从主窗口调用的顶级窗口。所以我定义了一个包含这个顶层窗口的函数。如果我定义了另一个可以执行多项操作的函数，它就无法识别顶层窗口。我可以在一个类下定义它，但不确定它是否有效。这是我的代码的一部分，其中包含顶层窗口。

```
def plt_options(arg):
    global lg_var,col_var,line_type_var,marker_var

    plt_opt = Toplevel(app)

    lg_var = StringVar(None)
    lg_text = Label(plt_opt,text='Legend').grid(row=0,column=0,sticky=E)
    lg_box = Entry(plt_opt,textvar=lg_var)
    lg_box.grid(row=0,column=1,sticky=W)

    col_var = StringVar(None)
    col_var.set('blue')
    col_text = Label(plt_opt,text='Color').grid(row=1,column=0)
    col_chooser = OptionMenu(plt_opt,col_var,'blue','green','red','cyan',\
           'magneta','yellow','black','white')
    col_chooser.grid(row=1,column=1)

    line_type_var = StringVar(None)
    line_type_var.set('Solid')
    line_type_text = Label(plt_opt,text='Line type').grid(row=2,column=0)
    line_chooser = OptionMenu(plt_opt,line_type_var,'Solid','Dashed',\
                          'Dotted','Dash-Dotted','None')
    line_chooser.grid(row=2,column=1)

    marker_var = StringVar(None)
    marker_var.set('None')
    marker_text = Label(plt_opt,text='Marker').grid(row=3,column=0)
    marker_chooser = OptionMenu(plt_opt,marker_var,'Plus','Dot','Circle',\
        'Star','Pentagon','Square','Cross','Diamond','Hexagon','Triangle')
    marker_chooser.grid(row=3,column=1)    

    ok_btn = Button(plt_opt,text='OK',command=testing).grid() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:20:14.537

按钮正是为此而设计的。通常你会定义一个函数或方法来做任何你想做的事情，然后将该方法分配给`command`按钮的属性：

```
import Tkinter as tk
import tkMessageBox

class SampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        button = tk.Button(text="Press me!", command=self.on_button)
        button.pack()
    def on_button(self):
        tkMessageBox.showinfo(message="Good-bye!")
        self.destroy()

app = SampleApp()
app.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:33:48.163

按钮的`command`选项允许您指定一个函数/方法/可调用对象，当按下按钮时将调用该对象。

```
from Tkinter import *

def buttonClicked(event):
    do_a_thing()
    do_another_thing()
    do_a_third_thing()
    #etc

root = Tk()

myButton = Button(root, text="Do Some Things", command=buttonClicked)
myButton.pack()

root.mainloop() 
```

`destroy`你可以通过调用它的方法来退出一个窗口。

您似乎还有另一个问题，即如果您不在创建窗口的范围内，则无法从回调函数内部销毁顶级窗口。如果你不想定义一个完整的类来保存对窗口的引用，你可以嵌套你的函数定义：

```
from Tkinter import *

def makeMyWindow():
    root = Tk()
    def buttonClicked():
        print "Reticulating Splines..."
        print "Done. Goodbye!"
        #we can access root since we're inside the right scope, 
        #even if this function gets passed somewhere else as a callback
        root.destroy()
    myButton = Button(root, text="Do Some Things", command=buttonClicked)
    myButton.pack()

    root.mainloop()

makeMyWindow() 
```

# php - 在不更改 URL 的情况下优化（过滤）搜索结果

> ID：11401568
> 
> 赞同：0
> 
> 时间：2012-07-09T19:15:29.703
> 
> 标签：php, search, filter

我正在用 php 开发一个旅游网站。用户可以执行搜索以获取特定位置的酒店的价格。

我想找出最适合构建过滤系统的方法。

用户应该能够过滤结果，例如仅查看 5 家带 wifi 设施的酒店或特定区域的 4 家和 5 家酒店。

下面是一个工作示例

[http://www.wego.com/hotels/united-kingdom/london/20120810/20120811/8168849](http://www.wego.com/hotels/united-kingdom/london/20120810/20120811/8168849)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:20:11.940

我希望使用 JavaScript 对结果进行排序或过滤。我在[TinySort](http://tinysort.sjeiti.com/)上运气不错。

编辑：或者，您可以使用 AJAX 调用来刷新页面内容而无需重定向。

# emacs - "Emacs Pinky" :: 包含电池的解决方案？

> ID：11401570
> 
> 赞同：9
> 
> 时间：2012-07-09T19:15:44.793
> 
> 标签：emacs, elisp

我开始获得 RSI，当我读到这篇文章时，我正在四处寻找解决方案：

[避免获得“Emacs Pinky”的最佳方法是什么？](https://stackoverflow.com/questions/52492/what-is-the-best-way-to-avoid-getting-emacs-pinky/8935973#8935973)

我喜欢将空格键映射为空间和控件的解决方案，但问题是：

我经常到处旅行，却没有一台电脑。我在几台没有 root 访问权限的不同计算机上编辑我的文档（哎呀，我什至没有正常访问权限）。

是否有包含电池的方式来实施空格键解决方案？一个小的lisp代码可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T23:47:03.137

*（这对于评论来说太长了，但它可能会对您有所帮助）*

空格键解决方案看起来很有趣，虽然乍一看，对我来说有点太“hackish”，但我可以尝试一下......

无论如何，我会说“Emacs 小指”问题是由于默认的 Emacs 快捷方式造成的，它必须是为程序构思的最痛苦和最容易引发 RSI 的快捷方式之一（这来自一个大 Emacs 粉丝所以不要把它当作 Emacs 的批评）。

有太多需要使用小指的默认快捷方式：（`CTRL-p`上*一行*）浮现在脑海中。这对你来说是两个小指，它应该很聪明，因为'p'代表'previous'。所有这些`C-x something`都`C-c something`需要太多的手指伸展，我发现`M-x`这也是一个非常无效的捷径......

我知道这可能是异端邪说，但相当一部分人乐于使用带有 vim 风格导航的 Emacs，老实说，我不能责怪他们。

就我个人而言，我喜欢在 Emacs 下一切都是可配置的，所以我想出了一个个性化的配置，它试图：

*   尽量减少手/手指和小指的动作
*   最大限度地利用“强壮的手指”
*   最大限度地使用手指已经位于的键（QWERTY 键盘上的 (a)sdf 和 jkl(;)，但 'a' 和 ';' 表示使用小指

我不反对偶尔使用小指：但对我来说，重复使用太多小指可能会伤害你的手。

因此，作为示例，我不`CTRL-{p,n,f,b}`使用移动，而是使用：

*   `ALT-{i,j,k,l}`（将手移到箭头键是一个很大的禁忌）。

*   王牌跳跃模式

如果您从未使用过`ace-jump-mode`，您可能想使用它。这是 Emacs 最大的节省时间的方法之一。我已经将*ace-jump-char-mode*绑定到`M-e`，这意味着我可以在四到五次击键（包括击中我所需的两次）中到达缓冲区中可以看到的任何字符。这节拍使用`CTRL-{p,n,f,b}`任何一天，肯定会帮助保存你的小指。

人们可能会喜欢并修改*ace-jump-mode*以便执行实际的跳转（最后一次击键）而无需按下需要小指的键：查看源代码看起来很容易（但在某些情况下你'将需要使用一个额外的按键：无论如何，这仍然比手动导航要快得多）。

这是关于如何使用*ace-jump-mode*快速跳跃的两分钟演示（但即使是那个很棒的视频也不能做到这种模式正义：你真的必须用它来意识到它有多棒）：

*“Emacs 摇滚！第 10 集：跳来跳去”：*

[http://emacsrocks.com/e10.html](http://emacsrocks.com/e10.html)

然后除了`C-x`and之外`M-x`，我还添加了`C-,`and`M-,`来充当`C-x`and `M-x`。

例如：

```
(define-key global-map [(control ,)] ctl-x-map) 
```

我想说，无论您是否找到将 SPC 用作 CTRL 的便携式方式，您可能*还想*寻找`C-{p,n,f,b}`和`C-x / M-x` ('x'，即使它不需要小指，恕我直言，也不是很方便) .

## tl;博士

要保存您的小指，您可以：

*   打开一些现成的 vim 样式模式

*   或者花时间根据自己的喜好完全（重新）配置您的 Emacs，以便它停止破坏您的小指（这可能意味着但不限于，如果您找到一种可移植的方式来使用 SPC 作为 CTRL 这样做)

除此之外，您可能希望使用 emacs 模式（如*ace-jump-mode*）以节省许多击键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T09:09:45.570

我最近发现了 key-chord 模式：«Key-chord 让您将命令绑定到击键组合。这里的“键和弦”是指同时按下两个键，或一个键快速按下两次。»

好消息是，显然可以定义以空格键开头的键和弦。 [http://www.emacswiki.org/emacs-en/KeyChord](http://www.emacswiki.org/emacs-en/KeyChord)（见`space-chord.el`）

这样就可以解决您的问题，对吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:54:59.837

您可能会考虑[ErgoMacs](http://ergoemacs.org/)，它应该可以解决这个问题。在我发现它之前，我已经使用 Emacs 五年了，所以我没有尝试过。不过，我确实有大量的键盘自定义，包括`C,M-i,j,k,l`移动（不完全是 vi 风格）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T09:21:21.547

即使有一个可以帮助很多人的 Kinesis Advantage 键盘，经过多年的 ctrl-n、ctrl-p 等操作，我仍然遭受手腕和拇指问题的困扰。所以我在探索 vim，并遇到了 emacs 的邪恶包。这很棒。一旦你学习了 vim 绑定并习惯了点击转义，非模态编辑（使用 ctrl-meta 绑定的疯狂组合）从人体工程学的角度来看绝对是疯狂的。

所以我绝对推荐任何 emacs 小指或拇指患者尝试 evil-mode 并学习 vim 绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:45:19.750

这听起来像是一个 hack，但我的建议是从默认的 Emacs 键盘映射切换到 vi 模拟器之一。我使用 Viper，我认为这是一个标准包。我认为您可以通过以下方式按需启用它：

(需要 'viper) Mx 毒蛇模式

这是我能够使用 emacs 的唯一方法，因为我总是发现它的基本键盘映射非常难以理解。

唯一的缺点是，如果您不熟悉 vi，除了可能需要的学习曲线之外，您可以将 'emacs pinky' 替换为 'escape-key-finger'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T08:06:33.960

部分，是的。

有类似的实用程序完全在用户空间中运行，即[Space2Ctrl](https://github.com/r0adrunner/Space2Ctrl)和[Keydouble](https://github.com/baskerville/keydouble)。两者都需要 X。

我是[at-home-modifier](https://gitlab.com/at-home-modifier/at-home-modifier-evdev/wikis/home)的作者，“将空间用作 ctrl”软件。[当我在这里](https://gitorious.org/at-home-modifier/pages/Home#Alternatives++)比较这三个时，Space2Ctrl 和 Keydouble 的选项比在家修改器少，所以可能不是“包括电池”，但代码（C++ / C）很简单，而且很容易破解。

多保重。（我写我的，因为我的小指开始疼痛，但现在很好。但不要过度使用拇指。）在家修饰符的[自述文件还提供了一些关于健康和键盘的更多建议。](http://gitorious.org/at-home-modifier/at-home-modifier/blobs/raw/master/README)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-07T02:32:14.050

重新绘制你的 numpad.AHK 脚本，

```
NumpadIns::^s
NumpadEnd::^c
NumpadDown::^v
NumpadPgDn::^x
NumpadLeft::^+v
NumpadClear::Control
NumpadRight::^a
NumpadHome::q
NumpadUp::Tab
NumpadDel::^f
NumpadEnter::Space 
```

1：复制
2：粘贴
0：保存

购买一个新的小键盘以方便使用。
![](../Images/a5f77b941ca9e3ce6939dbb4737b99b7.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-22T21:10:16.303

在使用 emacs 近 10 年后，我认为避免 emacs pinky 的最佳方法是记住：

**绑定键，这样您就不会用一只手同时按下两个或多个键！**

这完全消除了我以前遇到的任何手部问题。

例如，应始终按如下方式按下 Cx：C（右手）- x（左手）

使用空格或大写锁定来替换控件会延迟但不能完全防止您的手部问题。防止它们的唯一方法是永远不要用一只手同时按下两个键。

# xcode - NSTextField 在文本更改时调用 IBAction

> ID：11401571
> 
> 赞同：3
> 
> 时间：2012-07-09T19:15:47.970
> 
> 标签：xcode, cocoa, events, nstextfield, ibaction

在 Visual Studio 中有一个名为**text_changed**的​​事件用于文本框，如何在 Cocoa 中创建类似的事件/动作？

通常，您如何为表单控件获取这些额外事件？例如，鼠标悬停在 Visual Studio 中，您只需从事件列表中进行选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:53:54.620

您想将自己（即应用程序委托，或您用于管理该视图的任何控制器）设置为您的 NSTextField 的委托。然后实现方法

```
- (void)controlTextDidChange:(NSNotification *)aNotification 
```

每当文本字段中的文本发生更改时，都会调用它。

有关处理鼠标事件（例如鼠标悬停）的介绍，[Cocoa 事件处理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/MouseTrackingEvents/MouseTrackingEvents.html)是一个很好的起点。

# unix - 如何在 UNIX 中将文件和字符串作为单行命令连接到新文件中

> ID：11401572
> 
> 赞同：8
> 
> 时间：2012-07-09T19:15:52.110
> 
> 标签：unix, autosys

我需要一个非常简单（希望如此）的 1 线性命令，它在文件中读取附加一个字符串并输出到一个新文件，而不更改原始数据。

```
file1               string
------              ------
apple               oranges
bananas 
```

魔法指令

```
filel               file2
------              ------
apple               apple
bananas             bananas
                    oranges 
```

基本上， cat file1 + 'oranges' > file2

我正在使用**autosys**运行该命令，并且我很确定它不允许`&&`或`;`作为单个命令的一部分。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-09T19:33:00.733

你可以这样做：

```
(cat file1 ; echo 'oranges') > file2 
```

这将产生一个子shell，它将文件1 到标准输出，然后将橙子回显到标准输出。我们捕获所有输出并将其重定向到一个新文件 file2。

或者这两个命令：

```
cp file1 file2 
echo 'oranges' >> file2 
```

首先将 file1 复制到新的 file2，然后将单词 oranges 附加到 file2

这是另一个不使用的衬里；也不 &&

```
echo oranges | cat file1 - > file2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:34:05.200

然后应该这样做：

```
$cat file1 >> file2; echo "orange" >> file2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:51:14.423

```
awk '1; END{ print "oranges"}' file1 > file2 
```

如果您将其作为字符串传递给 sh，您可能可以使用标准解决方案（由 nos 给出）：

```
sh -c 'cat file1; echo oranges' > file2 
```

# css - 身体高度将页脚向下推得太远

> ID：11401577
> 
> 赞同：0
> 
> 时间：2012-07-09T19:16:04.133
> 
> 标签：css, twitter-bootstrap

我的身体将页脚伸展得太远时遇到了麻烦。

我的 CSS：

```
body{
    background-color:#EDEDED !important;
    background-image:url('http://static.lukepolo.com/public/assets/img/broken_noise.png') !important;
}

body > .container{
    min-height:100%;
}

html, body {
    height: 100%;
 }

footer{
    padding:10px;
    background-image:url('http://static.lukepolo.com/public/assets/img/broken_noise.png') !important;
    color:white;
}
footer p{
    display:inline-block;
} 
```

我的 HTML：

```
<div class="container">

</div>
<footer>
        <?php echo $footer;?>
</footer> 
```

这是我的链接： http: [//lukepolo.com/blog](http://lukepolo.com/blog)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:20:09.117

这是一个相当常见的 css 问题，因此有一个典型的解决方案。

您需要通过向其添加负数来向上拉页脚`margin-top`，这等于它的高度。然后为了确保它不与 .container 中的任何内容重叠，这次添加到 .container，`padding-bottom`它也等于页脚的高度（等于或更高）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:21:20.923

好吧，出现滚动条是因为您向页脚添加了填充。

我您正在尝试实现粘性页脚，那么这可能会对您有所帮助：[http ://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:23:18.487

您可以删除：

```
body > .container{
    min-height:100%;
} 
```

因为这就是导致页脚离开屏幕的原因。

# google-apps-script - 无权调用 getPageByUrl

> ID：11401581
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:16:20.253
> 
> 标签：google-apps-script

我在访问电子表格并将数据显示到现有列表页面的 Google 站点上编写了一个新脚本。站点上的类似脚本运行正常，但是，在此脚本中，这段特定的代码：

```
var page = SitesApp.getPageByUrl("https://sites.google.com/a/domain.com/page-url"); 
```

返回错误消息：“您无权调用 getPageByUrl”。

我是网站和目标页面的所有者。不知道这里发生了什么。任何人都可以伸出援助之手吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:39:42.533

从[文档](https://developers.google.com/apps-script/class_sitesapp#getPageByUrl)中：您不能使用这种格式的 url。它必须采用“规范”网站格式，例如： `https://sites.google.com/a/example.com/examplesite/examplepage`

# jquery - css 和 Jquery 显示隐藏粘性子菜单

> ID：11401582
> 
> 赞同：0
> 
> 时间：2012-07-09T19:16:24.013
> 
> 标签：jquery, hover, hide, show

我有一个带有水平子导航的导航，需要在子页面上保持粘性。

我已经使用 CSS 进行了所有这些工作，但问题是`ul`当我将鼠标悬停在另一个父页面上时，我需要隐藏子页面上的`li`粘性，当我不悬停时返回粘性。我认为 jQuery 是唯一的解决方案。

这是我到目前为止所拥有的：

```
<style type="text/css">
.current-menu-parent ul{
display:block !important;
position:absolute!important;
}
#primary-nav ul li:hover ul {
display:inline;
position:absolute;
}
#primary-nav ul li > ul{
    display:none;
}
</style

<script src="http://code.jquery.com/jquery-latest.min.js"type="text/javascript">    </script>
<script type="text/javascript">
$(document).ready(function(){
 $("#primary-nav ul li").mouseover(function(){
  $('.current-menu-parent ul').hide();
});
 $("#primary-nav ul li").mouseout(function(){
  $(".current-menu-parent ul").show();
});
});
</script>
<body>
<div id="primary-nav">
  <ul>
    <li>item</li>
    <li class="current-menu-parent>This is the current menu parent item
        <ul>
            <li>Current page</li>
            <li>page</li>
            <li>page</li>
        </ul>
     </li>
   <ul>
</div> 
```

抱歉，如果有错字，很快就重新写了。

这是链接，因此您可以直接看到问题。只需尝试单击子页面即可查看问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:30:55.967

删除`important`_`.current-menu-parent ul`

```
.current-menu-parent ul{
    display:block;
    position:absolute;
} 
```

这导致坚持。

下一个问题是由于`.show()`on引起的`.mouseout()`，反之亦然。

```
$("#primary-nav ul li").mouseover(function(){
    $('.current-menu-parent ul').show();
});
$("#primary-nav ul li").mouseout(function(){
    $(".current-menu-parent ul").hide();
});​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/MkqWL/1/)**

# android - 滚动列表视图

> ID：11401586
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:16:37.487
> 
> 标签：android

我有一个列表视图，每次 30 条记录时从数据库加载数据，即第一个命中列表将包含 30 个项目，然后单击查看更多它将包含 60 个项目，依此类推。现在我希望在单击查看后，更多列表位置将从第 31 个开始位置和第二个命中列表位置应该从 61 开始，依此类推。列表将包含所有值，但每次单击查看更多时，起始位置都会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:23:02.400

就个人而言，作为用户，我不太喜欢这种方法。例如，我认为 Google Play 的做法对用户更友好：到达列表末尾时，新项目会自动加载，提供几乎无缝的体验。

您可以通过将 OnScrollListener 添加到 ListView 并检查[ListView.getFirstVisiblePosition()](http://developer.android.com/reference/android/widget/AdapterView.html#getFirstVisiblePosition%28%29)来确定用户是否到达列表末尾以及是否需要加载更多项目。使用 AsyncTask 尽早加载。相应地使用结果更新您的适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:23:40.017

实际上我的感觉并没有那么复杂。今天当我开始工作时，我设法得到了我预期的列表。每次将新行添加到列表时，我只需将列表开始选择设置为新添加的第一项通过使用 resultList.setSelection(limitVal - 29) ..here limitVal 将在每次单击视图时增加 30，因此此操作将使我的列表视图从预期位置开始。

# java - Java Hello World 桌面应用程序

> ID：11401587
> 
> 赞同：2
> 
> 时间：2012-07-09T19:16:40.663
> 
> 标签：java, swing, eclipse-rcp, awt, desktop-application

我想看看如何使用 Eclipse 创建一个 hello world java 桌面应用程序。我非常了解 Java，但我从未创建过 Java 桌面应用程序。如果有人能提供一个例子，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:21:39.863

Swing 应用程序的基本元素是顶层`JFrame`（窗口）。我们将添加一个组件 (a )，以便在, 调用`JLabel`中有一些内容，以便布局组件，然后使框架可见。所有这些都包含在Java 应用程序的标准方法中，但对于真正的应用程序，您可能希望将代码组织到其他方法中，以免过于臃肿。`JFrame``pack()``main()``main()`

```
import javax.swing.JFrame;
import javax.swing.JLabel;

public class HelloWorld
{
    public static void main(String[] args)
    {
        JFrame hello = new JFrame("Hello World");
        hello.add(new JLabel("Hello World"));
        hello.pack();
        hello.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:20:52.150

你的意思是用一个gui？大多数人会使用swing，它有一个eclipse插件来帮助构建swing ui。如果您不需要 gui，则只需创建一个类并在 main 方法中放置

```
 class HelloWorld{

public static void main(String args[]){

System.out.println("Hello World");

}//end main

} 
```

然后编译代码

> javac HelloWorld.java

然后运行你编译的代码

> java HelloWorld

[资源](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)

# java - 如何为 JTextPane 提供与主 JFrame 不同的宽度？

> ID：11401592
> 
> 赞同：0
> 
> 时间：2012-07-09T19:16:57.497
> 
> 标签：java, swing, jframe, jtextpane

因此，当我创建 JTextPane 并将其添加到 JFrame 时，它​​会填满框架，并随之移动。我该如何阻止它，以便我可以做pane.setSize？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:23:57.420

`JFrame`已经`BorderLayout`在 API 中实现了，那么

`JFrame.add(JTextPane)`等于`JFrame.add(JTextPane, BorderLayout.CENTER)`

如果只有一个`JComponent`放入`JFrame`，则（中心区域）填充所有`Dimension`返回容器的可用

不知道你团结起来想做什么

1.  正确使用`LayoutManager`

2.  利用`JScrollPane`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:36:16.490

创建一个新的 gridBagLayout 并相应地设置 GridBagConstraints。

```
Container pane;
pane.setLayout(new GridBagLayout());
    GridBagConstraints c;
    c = new GridBagConstraints();
    c.fill = GridBagConstraints.BOTH;
    c.ipady = 0;
    c.weightx = 1.0;
    c.weighty = 1.0;
    c.insets = new Insets(2, 2, 2, 2);
    c.gridx = 0;
    c.gridy = 0;
    pane.add(jsp, c);
     pane.setBackground(Color.cyan);
    getContentPane().add(pane);
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    setTitle("TITLE");
    setLocation(150, 50);
    pack();
    setSize(600, 800); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:22:00.590

最简单的方法是创建一个 JPanel 并将 JTextPane 添加到面板中。然后您可以将面板添加到框架中。

```
JPanel panel = new JPanel();
panel.setLayout(null);

JTextPane pane = new JTextPane();

panel.add(pane);

this.add(panel); //assuming that this extends JFrame 
```

您现在应该能够适当地调整文本窗格的大小。

# android - 调整位图大小以创建图标

> ID：11401597
> 
> 赞同：0
> 
> 时间：2012-07-09T19:17:27.180
> 
> 标签：android, bitmap

我正在调整我创建的视图的 bimap 图像的大小。

```
Bitmap image = imageCreate( getMeasuredWidth(), getMeasuredHeight() );
image = imageResize( image, 62, 62 );
imageSave(image,"test.png"); 
```

调整大小发生在我的自定义视图中。

```
protected Bitmap imageCreate( int width, int height ) {

    Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(image);
    draw(canvas);
    return image;
}

protected Bitmap imageResize(Bitmap image, int newWidth, int newHeight) {

    int width = image.getWidth();
    int height = image.getHeight();

    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // CREATE A MATRIX FOR THE MANIPULATION
    Matrix matrix = new Matrix();
    // RESIZE THE BIT MAP
    matrix.postScale(scaleWidth, scaleHeight);
    // RECREATE THE NEW BITMAP
    Bitmap resizedImage = Bitmap.createBitmap(image, 0, 0, width, height, matrix, false);

    return resizedImage;
} 
```

最后我保存图像：

```
protected boolean imageSave( Bitmap image, String filename, Context context ) {

    try {
        FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
        image.compress(Bitmap.CompressFormat.PNG, 90, fos);
        fos.close();

        return true;
    } catch (Exception e) {

        e.printStackTrace();
    }

    return false;
} 
```

我的问题是，为什么图像质量如此糟糕！？？？

图像有点像素化。原始图像太棒了。

还有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:30:15.987

这段代码

// 重新创建新的位图位图 resizedImage = Bitmap.createBitmap(image, 0, 0, width, height, matrix, false);

将最后一个参数设置为 true 以启用过滤。

这有帮助吗？

# selenium - Selenium IEDriverServer 由于安全策略而无法配置保护模式

> ID：11401599
> 
> 赞同：1
> 
> 时间：2012-07-09T19:17:33.063
> 
> 标签：selenium, internet-explorer-7, selenium-webdriver, protected-mode, security-policy

IEDriverServer [Wiki 页面](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)列出了以下要求：

> 在 Windows Vista 或 Windows 7 上的 IE 7 或更高版本上，您必须将每个区域的保护模式设置设置为相同的值。该值可以打开或关闭，只要每个区域都相同。

不幸的是，在我工作的地方，公司安全策略已锁定保护模式设置，因此我无法更改设置。

有没有办法解决这个问题并让 IEDriverServer 正常工作？或者 Selenium 不是在 Windows 7 上运行 IE 7+ 的企业环境的选项，在这种环境中用户无法更改保护模式设置？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:23:40.053

我有同样的问题。

我通过直接编辑注册表来解决它。

尽管以下是 Java 的示例，但它也可以类似地用于其他语言。我在创建 IEDriver 实例之前调用此方法。

如果要禁用它，请设置 3 而不是 0。

```
private void enableIEProtectModeOfAllZones() {

    final String[] ZONES = {
        "\"HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Zones\\1\""
        , "\"HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Zones\\2\""
        , "\"HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Zones\\3\""
        , "\"HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Zones\\4\""
    };
    for (String zone : ZONES) {
        ProcessBuilder pb = new ProcessBuilder("cmd", "/c", "reg", "add",
                zone, "/v", "2500", "/t", "REG_DWORD", "/d", "0", "/f");
        try {
            pb.start();
        } catch (IOException ioe) { ioe.printStackTrace(); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:04:15.113

您需要使用参数创建 IE Driver 实例，我假设您使用的是 C#

```
InternetExplorerOptions opts = new InternetExplorerOptions();
opts.IntroduceInstabilityByIgnoringProtectedModeSettings = true;

IWebDriver wDriver =  new InternetExplorerDriver(opts); 
```

这将解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:03:18.567

据我了解，您正在使用 Selenium Webdriver。请添加以下内容：)`capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true`到您的驱动程序设置。

# perl - perl 中的“使用”是可传递的吗？

> ID：11401600
> 
> 赞同：3
> 
> 时间：2012-07-09T19:17:41.247
> 
> 标签：perl, perl-module

```
package AA;

package BB;
use AA;

package CC;
use BB; 
```

我必须加入`use AA`CC，还是隐含的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T21:16:16.827

你可以[使用](https://metacpan.org/pod/perlfunc#use-Module-VERSION-LIST)一个模块，只要它之前被某些东西加载过。这就是为什么您可以使用其他模块创建的对象而不知道它们是什么对象类型的原因。例如，您可以使用[`HTTP::Response`](https://metacpan.org/pod/HTTP::Response)从[`LWP`](https://metacpan.org/pod/LWP)方法中返回的对象，尽管您从未加载过`HTTP::Response`自己或意识到它就是那种对象。但是，`use`唯一导入调用命名空间，因此这些导入不会出现在其他包中（即使您仍然可以使用完整的包规范调用它们）。

您应该`use`使用您的包想要直接使用的任何模块。也就是说`use`，您直接创建的对象的模块。

你也不应该依赖其他包来为你加载模块。如果有人更改了这些模块，您会想知道为什么会出现问题。而且，即便如此，您仍依赖模块加载顺序来确保一切正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T19:30:43.887

[`use`](http://perldoc.perl.org/functions/use.html)`require`做两件事：如果模块尚未加载，则加载模块（就像 by ），并调用模块的`import`方法。不确定加载模块或调用方法如何可以传递。

至于你的第二个问题，主要看AA有没有`import`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:13:36.877

```
package AA;

package BB;
use AA;

package CC;
use BB; 
```

几乎与以下内容相同：

```
package CC;
use BB;
BEGIN{ require AA } 
```

或者

```
package CC;
use BB;
use AA (); 
```

这是因为[`use`](http://perldoc.perl.org/functions/use.html "perldoc -f 使用")做了两件事。它用 加载文件[`require`](http://perldoc.perl.org/functions/require.html "perldoc -f 要求")，然后调用[`import`](http://perldoc.perl.org/functions/import.html "perldoc -f 导入")它的方法。

所以这些是等价的。

```
use Module qw'LIST'; 
```

```
BEGIN { require Module; Module->import( qw'LIST' ); } 
```

* * *

如果包`BB`不再需要该`use AA;`行，您可能会遇到问题，并且它会被删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T21:45:51.057

这主要取决于所涉及的模块是面向对象的模块还是`Exporter`用于使调用包中的符号可用的简单模块。

`use`首先是`require`给定的模块，然后调用它的`import`方法。

`require`首先检查`%INC`模块是否已经成功加载。如果不是，则在中的所有路径中`@INC`搜索匹配的模块文件，并加载第一个匹配的`do`.

modules`import`方法可以做任何作者喜欢写的事情，但通常一个模块将子类化`Exporter`，它提供一种`import`方法，除其他外，将包`@IMPORT`数组中的符号复制到调用包，使符号在那里可用，而无需完全限定它们用他们的包名。

在您的示例中，如果模块 subclass`Exporter`中列出的符号`@BB::IMPORT`将被复制到`CC`命名空间，并且可以从该包中使用。虽然没有导入任何内容`AA`，因此只能通过显式调用它们来调用那里的子例程`AA::subroutine()`等。

另一方面，如果包是面向对象的模块和`BB`子类`AA`，则通常没有`import`可调用的方法，并且可以通过祝福变量或类名（包名）访问这些方法。未定义的方法`BB`可以继承自`AA`，Perl 的面向对象继承系统的实现使用包的`@ISA`数组来确定继续搜索方法的位置。

总而言之，如果您的模块`BB`子类，`Exporter`那么您还必须`use AA`. 但是，如果它是面向对象和子类的，那么两者中的`AA`所有方法都可以通过使用.`BB``AA``CC``use BB`

# html - Turn off textarea resizing

> ID：11401605
> 
> 赞同：126
> 
> 时间：2012-07-09T19:17:52.153
> 
> 标签：html, textarea

I'm trying to turn off textarea resizing in my site; right now I'm using this method:

```
.textarea {
    clear:left;
    min-width: 267px;
    max-width: 267px;
    min-height:150px;
    max-height:150px;
} 
```

I know that my method is not correct and I'm searching for a better one in JavaScript. I'm a beginner, so the best solution for me will be HTML5 or jQuery.

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-07-09T19:21:02.453

**Try this CSS to disable resizing**

The CSS to disable resizing for all textareas looks like this:

```
textarea {
    resize: none;
} 
```

You could instead just assign it to a single textarea by name (where the textarea HTML is ):

```
textarea[name=foo] {
    resize: none;
} 
```

Or by id (where the textarea HTML is ):

```
#foo {
    resize: none;
} 
```

Taken from: [http://www.electrictoolbox.com/disable-textarea-resizing-safari-chrome/](http://www.electrictoolbox.com/disable-textarea-resizing-safari-chrome/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-09T19:23:57.790

this will do your job

```
 textarea{
        resize:none;
    } 
```

![enter image description here](../Images/5d08f79c845e07837313d484c9610f0c.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-10-30T23:24:20.847

CSS3 can solve this problem. Unfortunately it's only supported on [60% of used browsers](http://caniuse.com/#search=resize) nowadays.

For IE and iOS you can't turn off resizing but you can limit the `textarea` dimension by setting its `width` and `height`.

```
/* One can also turn on/off specific axis. Defaults to both on. */
textarea { resize:vertical; } /* none|horizontal|vertical|both */ 
```

[See Demo](http://jsfiddle.net/doxk6Lnq/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-08T20:17:27.063

Just one extra option, if you want to revert the default behaviour for all textareas in the application, you could add the following to your CSS:

```
textarea:not([resize="true"]) {
  resize: none !important;
} 
```

And do the following to enable where you want resizing:

```
<textarea resize="true"></textarea> 
```

Have in mind this solution might not work in all browsers you may want to support. You can check the list of support for `resize` here: [http://caniuse.com/#feat=css-resize](http://caniuse.com/#feat=css-resize)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-23T05:20:36.193

This is works for me

```
<textarea
  type='text'
  style="resize: none"
>
Some text
</textarea>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-06T07:05:52.173

As per the question, i have listed the answers in **javascript**

**By Selecting TagName**

```
document.getElementsByTagName('textarea')[0].style.resize = "none"; 
```

**By Selecting Id**

```
document.getElementById('textArea').style.resize = "none"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-21T05:23:10.170

It can done easy by just using html draggable attribute

```
<textarea name="mytextarea" draggable="false"></textarea> 
```

Default value is true.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-18T18:32:01.517

```
//CSS:
.textarea {
    resize: none;
    min-width: //-> Integer number of pixels
    min-height: //-> Integer number of pixels
    max-width: //-> min-width
    max-height: //-> min-height
} 
```

above code works on most browsers

```
//HTML:
<textarea id='textarea' draggable='false'></textarea> 
```

do both for it to work on the maximum number of browsers

# c - C 中的修剪功能需要 memmove 吗？

> ID：11401609
> 
> 赞同：2
> 
> 时间：2012-07-09T19:18:02.530
> 
> 标签：c, trim, memmove

我正在阅读[有关修剪的维基百科文章，](http://en.wikipedia.org/wiki/Trimming_%28computer_programming%29)并看到了 ltrim 的实现（左修剪）

```
char *
ltrim(char *str)
{
  char *ptr;
  int  len;

  for (ptr = str; *ptr && isspace((int)*ptr); ++ptr);

  len = strlen(ptr);
  memmove(str, ptr, len + 1);

  return str;
} 
```

如果我跳过 memmove 并返回 ptr istead，会发生不好的事情吗？

```
char *
ltrim(char *str)
{
  char *ptr;
  int  len;

  for (ptr = str; *ptr && isspace((int)*ptr); ++ptr);

  return ptr;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T19:19:25.413

如果你返回`ptr`——即一个不同于原始指针的指针值——并且如果该指针是指向原始内存块的唯一指针，那么没有人能够访问`free()`它，并且会发生内存泄漏。您不能调用`free()`指向已分配块中间的指针，而只能调用指向块开头的指针——即，只能调用最初由`malloc()`.

如果由于某种原因您可以确定将保留指向原始块的指针，或者永远不需要释放该块，则`memmove()`不需要；但对于通用实用程序例程来说，这些都是不好的假设。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T19:56:42.660

最大的问题：**这不是`ltrim()`预期的工作方式。**

`ltrim()`预计会有副作用，将字符串更改*到位*。

例如，

```
char *a = " hello";
trim(a);
printf(a); 
```

预计会打印`"hello"`，但没有`memmove()`它不会。

**编辑添加：**

下面的评论合理地问：“预期*谁？* ”

在具有自动垃圾收集功能的语言中，我希望字符串函数返回具有所需转换的*新字符串。*

对于那些没有它的人（这里就是这种情况），我希望他们能*原地*改变字符串，有时会返回一个指向结果的指针，有时不会。

所以也许我应该说：**这不是 C 函数所期望的工作方式。**

# jquery - JQGrid 4.4.0：“日期”格式化程序 srcformat/newformat 现在尝试在源日期的格式与 srcformat 不匹配时格式化日期

> ID：11401612
> 
> 赞同：1
> 
> 时间：2012-07-09T19:18:05.957
> 
> 标签：jquery, jqgrid, formatter, date-formatting

我有一个具有日期列的 JQGrid。我使用日期格式化程序将日期格式化为某种`m/d/Y`格式。`srcformat`以前，如果源日期的格式与我传入的不匹配`formatoptions`，它就不会格式化日期。无论源格式如何，JQGrid v4.4.0 现在都尝试格式化日期，并提出了很远的日期:-)。

我填充到此列中的日期可能已经采用正确的格式 ( `m/d/Y`)，也可能采用我在`srcformat`( `Y-m-dTH:i:s`) 中定义的格式。

JQGrid 4.4.0 中有没有办法不尝试解析不匹配的日期`srcformat`？

* * *

我的 colModel def 列：

```
{name:"date", index:"date", label:"Date", width:85, jsonmap:"date", hidden: false, formatter:'date', sorttype: 'date', formatoptions:{srcformat:'Y-m-dTH:i:s', newformat:'m/d/Y'}, searchrules: { date: true } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:04:21.290

我解决了我自己的问题:)

我创建了一个自定义格式化程序并使用[Datejs](http://www.datejs.com/ "日期") JQuery 库来帮助解析日期。

基本上，格式化程序仅将日期格式化为 m/d/Y 格式（如果它是 Ym-dTH:i:s 格式）；否则，它假定它已经是 m/d/Y 格式并保持不变。

```
/**
 * This function formats the date column for the summary grid.
 * 
 * The grid could be populated with dates that are in m/d/Y format or in Y-m-dTH:i:s format; need
 * to account for this; want the dates to end up being in m/d/Y format always.
 * 
 * @param cellvalue     is the value to be formatted
 * @param options       an object containing the following element
 *                      options : { rowId: rid, colModel: cm} where rowId - is the id of the row colModel is the object of the properties for this column getted from colModel array of jqGrid
 * @param rowObject     is a row data represented in the format determined from datatype option;
 *                      the rowObject is array, provided according to the rules from jsonReader
 * @return              the new formatted cell value html
 */
function summaryGridDateFormatter(cellvalue, options, rowObject) {

    // parseExact just returns 'null' if the date you are trying to 
    // format is not in the exact format specified
    var parsedDate = Date.parseExact(cellvalue, "yyyy-MM-ddTHH:mm:ss"); 

    // if parsed date is null, just used the passed cell value; otherwise, 
    // transform the date to desired format
    var formattedDate = parsedDate ? parsedDate.toString("MM/dd/yyyy") : cellvalue;

    return formattedDate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:20:25.953

@icats：谢谢！它真的很有帮助 - 我开始变得非常沮丧......

实际上，我不得不稍微修改一下您的功能。我从数据库中获取了一个**时间戳**字段，该字段通过 JSON 作为以**毫秒为单位**的值返回（即，实际值类似于：1343314489564）。因此，我添加了对 parsedDate 的第二次检查，如下所示：

```
/**
 * This function formats the date column for the  grid.
 *
 * The grid could be populated with dates that are in m/d/Y format or in Y-m-dTH:i:s format; need
 * to account for this; want the dates to end up being in m/d/Y format always.
 *
 * @param cellvalue     is the value to be formatted
 * @param options       an object containing the following element
 *                      options : { rowId: rid, colModel: cm} where rowId - is the id of the row colModel is the object of the properties for this column getted from colModel array of jqGrid
 * @param rowObject     is a row data represented in the format determined from datatype option;
 *                      the rowObject is array, provided according to the rules from jsonReader
 * @return              the new formatted cell value html
 */
function dateFormatter(cellvalue, options, rowObject) {

    // parseExact just returns 'null' if the date you are trying to
    // format is not in the exact format specified
    var parsedDate = Date.parseExact(cellvalue, "yyyy-MM-ddTHH:mm:ss");
    if(parsedDate == null )
        parsedDate = new Date(cellvalue);

    // if parsed date is null, just used the passed cell value; otherwise,
    // transform the date to desired format
    var formattedDate = parsedDate ? parsedDate.toString("yyyy-MM-dd HH:mm:ss") : cellvalue;

    return formattedDate;
} 
```

# asp.net-mvc-3 - 在javascript asp.net mvc中添加字符串列表

> ID：11401613
> 
> 赞同：0
> 
> 时间：2012-07-09T19:18:14.413
> 
> 标签：asp.net-mvc-3

我的页面中有一个 javascript，它需要这种格式的字符串列表：

```
var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ]; 
```

我在视图中的模型包含一个名为 blogtags 的字符串列表。如何将视图模型中的列表添加到 javascript。

谢谢阿纳布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:43:32.693

我会添加一个字符串类型来将逗号分隔的标签保存到我的视图模型中

```
public class BlogPostViewModel
{
  //Other properties    
  public string Tags { set;get;}    
} 
```

在我的控制中，我将从字符串列表中设置 this 的值

```
public ActionResult View(int id)
{
  var vm=new BlogPostViewModel();

  List<string> tagList=new List<string>(); 
  tagList.Add("PERL");   //get from your DB instead of hardcoding
  tagList.Add("RUBY");

  StringBuilder strTags = new StringBuilder();
  foreach (var item in tagList)
  {
     strTags.Append("\""+item+"\",");
  }
  vm.Tags=strTags.ToString();
  vm.Tags= vm.Tags.TrimEnd(','); //remove last ,
  return View(vm);
} 
```

在视图中

```
$(function () {    
  var items=[@Html.Raw(Model.Tags)]
  alert(items);
}); 
```

# asp.net - 什么方法在html页面中读取大文件并显示数据有效

> ID：11401615
> 
> 赞同：1
> 
> 时间：2012-07-09T19:18:20.417
> 
> 标签：asp.net, file-io

我有一个 Web 服务器，它将读取包含要显示的数据的大型 xml 文件（几个兆）。服务器可能同时读取多个文件（不同的页面请求），因此我正在寻找最优化的方式来执行此操作，而不会过多地占用 CPU。html 页面应以 pagesize = 20 的网格形式显示数据。将有客户端分页来显示每个页面的数据。我一直在考虑以下方法之一：

1.  每个 ajax 请求应该只返回 20 条记录，每个请求应该打开文件、读取数据并只将所需的数据发送回浏览器。值得关注的是文件 I/O 的成本。

2.  在第一个 ajax 请求中，服务器应该读取整个文件并将整个数据发送回浏览器。

该网站将在 asp.net 中开发，会话保存在 proc 之外。请建议有效使用文件数据的最佳方法。

提前非常感谢！

# java - 在 C++ 中使用 JNI 创建 JVM 不返回

> ID：11401616
> 
> 赞同：4
> 
> 时间：2012-07-09T19:18:22.837
> 
> 标签：java, c++, java-native-interface

我正在尝试`jvm`为我的服务器 java 程序启动。服务器 java 程序在内部启动另一个`java`进程，我正在调用的类/方法让`system.exist(0)` 我的程序工作正常，它启动所需的 java 进程，但程序控制不会回到 c++。它只是存在，即父进程死亡。这是我的完整代码。

```
 #include <stdexcept>
#include <windows.h>
#include <tchar.h>
#include <strsafe.h>
#include <include/jni.h>

#include <string>
#include <stdlib.h>
#include <vector>
#include <iostream>
#include <signal.h>

class JVMLauncherException : public std::runtime_error {
public:
    JVMLauncherException(const std::string& message) : std::runtime_error(message) 
    { 
    };
};

class Server_JVMLauncher {
public:
    Server_JVMLauncher();
    void addJars(std::string inJar);
    void LaunchJVM();
    void StartServer_Server();
    void AddServerArguments(std::string);
    void StopServer_Server();
private:
    typedef jint (JNICALL *CreateJavaVM)(JavaVM **pvm, void **penv, void *args);

    HINSTANCE     m_hDllInstance;

    std::string   m_JavaHome;
    std::string   m_ProductLibDir;
    std::string   m_JvmDllLocation;

    CreateJavaVM  m_JVMInstance;
    jclass        m_CacheServerLauncherClass;
    jmethodID     m_MainMethodID;
    JNIEnv       *m_JVMEnv;
    JavaVM       *m_RunningJVMInstance;    

    std::vector<std::string> m_listOfJars;
    std::vector<std::string> m_ServerArguments;

    void CheckForJNIException();
protected:
};

Server_JVMLauncher::Server_JVMLauncher() {
    // Check for JAVA_HOME
    char *pValue;
    size_t len;
    errno_t err = _dupenv_s( &pValue, &len, "JAVA_HOME" );
    if ( err ) {
        throw JVMLauncherException("JAVA_HOME not defined");
    }    
    m_JavaHome       = pValue;
    m_JvmDllLocation = m_JavaHome + "\\jre\\bin\\client\\jvm.dll";

    err = _dupenv_s( &pValue, &len, "Server_" );
    if ( err ) {
        throw JVMLauncherException("Server_ not defined");
    }
    m_ProductLibDir = pValue;

    m_listOfJars.push_back("dep1.jar");
    m_listOfJars.push_back("dep2.jar");
    m_listOfJars.push_back("dep3.jar");
    m_listOfJars.push_back("dep4.jar");
    m_listOfJars.push_back("dep5.jar");    
}
void Server_JVMLauncher::AddServerArguments(std::string inParam) {
    m_ServerArguments.push_back(inParam);
}
void Server_JVMLauncher::LaunchJVM() {
    // Construct the product specific class path.
    std::string strJavaClassPath = "-Djava.class.path=";
    for ( std::size_t idx = 0; idx < m_listOfJars.size() - 1 ; idx++) {
        strJavaClassPath += m_ProductLibDir + "\\lib\\" + m_listOfJars[idx] + ";";
    }
    strJavaClassPath += m_ProductLibDir + "\\lib\\" + m_listOfJars[m_listOfJars.size() - 1] ;

    // consruct java.library.path
    std::string strJavaLibraryPath =  "-Djava.library.path=";
    strJavaLibraryPath             += m_JavaHome + "\\lib" + "," + m_JavaHome + "\\jre\\lib";

    // try loading jvm dll
    m_hDllInstance = LoadLibraryA(m_JvmDllLocation.c_str());
    if( m_hDllInstance == 0) {
        throw JVMLauncherException("Cannot load jvm.dll");
    }
    m_JVMInstance = (CreateJavaVM)GetProcAddress(m_hDllInstance, "JNI_CreateJavaVM");
    if ( m_JVMInstance == NULL )  {
        throw JVMLauncherException("Cannot load jvm.dll");
    }

    JavaVMOption options[2];
    options[0].optionString  = const_cast<char*>(strJavaClassPath.c_str());
    options[1].optionString  = const_cast<char*>(strJavaLibraryPath.c_str());

    JavaVMInitArgs vm_args;
    vm_args.version            = JNI_VERSION_1_6; //JNI Version 1.4 and above
    vm_args.options            = options;    
    vm_args.nOptions           = 2;       
    vm_args.ignoreUnrecognized = JNI_TRUE;

    //Create the JVM

    jint res = m_JVMInstance(&m_RunningJVMInstance, (void **)&m_JVMEnv, &vm_args);
    if (res < 0)  {
        throw JVMLauncherException("Could not launch the JVM");
    }
    //m_RunningJVMInstance->AttachCurrentThread((void **)&m_JVMEnv, &vm_args);

    m_CacheServerLauncherClass = m_JVMEnv->FindClass("com/Server/internal/ServerLauncher");    
    CheckForJNIException();

    m_MainMethodID = m_JVMEnv->GetStaticMethodID(m_CacheServerLauncherClass, "main", "([Ljava/lang/String;)V");
    CheckForJNIException();
}

void Server_JVMLauncher::StartServer_Server() {

    if ( m_RunningJVMInstance->AttachCurrentThread((LPVOID *)&m_JVMEnv, NULL) ) {
        std::cout << "Fail to attach the current thread " << std::endl;
    }

    jclass StringClass = m_JVMEnv->FindClass("java/lang/String");
    int numOfArguments = (int)m_ServerArguments.size() + 2 ;
    int argumentIndex = 0;

    jobjectArray jargs = m_JVMEnv->NewObjectArray(numOfArguments, StringClass, NULL);    

    m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex++, m_JVMEnv->NewStringUTF("start"));

    std::string strJavaClassPath = "-classpath=";
    strJavaClassPath             += "\"";
    for ( std::size_t idx = 0; idx < m_listOfJars.size() - 1 ; idx++) {
        strJavaClassPath += m_ProductLibDir + "\\lib\\" + m_listOfJars[idx] + ";";
    }
    strJavaClassPath      += m_ProductLibDir + "\\lib\\" + m_listOfJars[m_listOfJars.size() - 1] ;
    strJavaClassPath      += "\"";

    m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex++, m_JVMEnv->NewStringUTF(strJavaClassPath.c_str()));

    for ( std::vector<std::string>::iterator iter = m_ServerArguments.begin(); iter != m_ServerArguments.end(); ++iter) {
        std::string argument = *iter;
        m_JVMEnv->SetObjectArrayElement(jargs, argumentIndex++, m_JVMEnv->NewStringUTF(argument.c_str()));
    }

    m_JVMEnv->CallStaticVoidMethod(m_CacheServerLauncherClass, m_MainMethodID, jargs);

    m_RunningJVMInstance->DestroyJavaVM();

    std::cout << "I am done with launching java program" << std::endl;
    CheckForJNIException();
}
void Server_JVMLauncher::StopServer_Server() {
    jclass StringClass = m_JVMEnv->FindClass("java/lang/String");
    int numOfArguments = 2 ;

    jobjectArray jargs = m_JVMEnv->NewObjectArray(numOfArguments, StringClass, NULL);    

    m_JVMEnv->SetObjectArrayElement(jargs, 0, m_JVMEnv->NewStringUTF("stop"));
    m_JVMEnv->SetObjectArrayElement(jargs, 1, m_JVMEnv->NewStringUTF("-dir=E:\\Avinash\\personal\\work\\CreateJvm\\Debug\\gfecs"));    

    m_JVMEnv->CallStaticVoidMethod(m_CacheServerLauncherClass, m_MainMethodID, jargs);
    CheckForJNIException();

}
void Server_JVMLauncher::CheckForJNIException() {
    jthrowable expt = m_JVMEnv->ExceptionOccurred();
    if (expt != NULL) {
        m_JVMEnv->ExceptionClear();
        jmethodID toString = m_JVMEnv->GetMethodID(m_JVMEnv->FindClass("java/lang/Object"), "toString", "()Ljava/lang/String;");
        jstring estring = (jstring) m_JVMEnv->CallObjectMethod(expt, toString);
        jboolean isCopy;
        std::string message = m_JVMEnv->GetStringUTFChars(estring, &isCopy);
        throw JVMLauncherException(message);
    }
}

int main( int argc, char **argv) {
    try {
        Server_JVMLauncher instanceServer_;
      instanceServer_.LaunchJVM();
        instanceServer_.StartServer_Server();
    } catch (JVMLauncherException &excp ) {
        std::cout << excp.what() << std::endl;
    }    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:23:17.653

当你调用`CallStaticVoidMethod()`它时，它不会创建子进程，而是`main()`在调用线程中运行 Java 方法，阻塞调用者直到它完成。如果 Java 程序调用`System.exit()`该进程将立即退出并且不会返回给调用者：**不要调用`System.exit()`**.

# c# - Parallel.For - 几乎可以正常工作

> ID：11401621
> 
> 赞同：0
> 
> 时间：2012-07-09T19:18:49.997
> 
> 标签：c#, parallel-processing

我收集了大约 3500 个产品序列号，我的软件使用这些序列号每周创建大约 10 次报告。

我的代码从一个非常扁平的数据库（想想 Excel 电子表格）中检索，它从一个表中为每个序列号提取 0 到 25+ 条记录。我将此数据传递给`static`生成 my 实例的方法`CustomClass`，并将其存储在集合中，以便在例程结束时传回。

运行此报告通常需要大约 20 分钟。其中很大一部分受到发送到旧*SQL 2000 Server*的数据请求的限制，但是编写静态类是为了尽可能多地减轻字符串操作和数据转换。

我想写一个[Parallel.For](http://msdn.microsoft.com/en-us/library/dd460703.aspx)来尝试让它运行得更快，但我不知道如何完成我的例程。

这是我现在拥有的例程的简化版本：

```
private CustomClass[] Test1(string[] serialNumbers) {
  List<CustomClass> list = new List<CustomClass>();
  for (int i = 0; i < serialNumber.Length; i++) {
    DataTable table = new DataTable();
    using (SqlCommand cmd = new SqlCommand("sp_GetData", m_open_conn)) {
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.Add("@sn", SqlDbType.Char, 20).Value = serialNumber[i];
      table.Load(cmd.ExecuteReader());
    }
    list.Add(CustomClass.CreateSummary(table));
  }
  return list.ToArray();
} 
```

任务是在 Parallel.For 循环中编写上面的代码。到目前为止，我遇到的所有示例都过于简单化，并没有让我了解如何转换我的代码。

这是我到目前为止所拥有的，但第二个`0`值（我的 Action/Func 语句中的那个）说`Cannot implicitly convert type 'int' to 'jp2code.CustomClass'`......而且我真的不太了解，不知道我需要做什么才能完成这项工作。

```
private CustomClass[] Test1(string[] serialNumbers) {
  List<CustomClass> list = new List<CustomClass>();
  Parallel.For<CustomClass>(0, serialNumbers.Length, () => 0, (i, loop, list) => {
      DataTable table = new DataTable();
      using (SqlCommand cmd = new SqlCommand("sp_GetData", m_open_conn)) {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("@sn", SqlDbType.Char, 20).Value = serialNumber[i];
        table.Load(cmd.ExecuteReader());
      }
    }, (x) => list.Add(CustomClass.CreateSummary(table))
  );
  return list.ToArray();
} 
```

显然，我应该用一些东西（不是 a `0`）来初始化数组，但我不知道这里到底要做什么。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:27:16.473

由于您已经有一组固定的序列号，因此您真的不需要`Parallel.For`.

您可以使用 PLINQ。

```
return serialNumbers.AsParallel().Select(number => { ...get table... }).ToArray(); 
```

我不会真的推荐这种`ToArray()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:31:18.743

我发现[这个博客](http://www.lovethedot.net/2009/02/parallelfor-deeper-dive-parallel.html)是一个很好的资源`Parallel.For`

要简单地替换`for`循环，您应该能够这样做：

```
private CustomClass[] Test1(string[] serialNumbers) {
  List<CustomClass> list = new List<CustomClass>();
  Parallel.For(0, serialNumber.Length, (i) => {
    DataTable table = new DataTable();
    using (SqlCommand cmd = new SqlCommand("sp_GetData", m_open_conn)) {
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.Add("@sn", SqlDbType.Char, 20).Value = serialNumber[i];
      table.Load(cmd.ExecuteReader());
    }
    list.Add(CustomClass.CreateSummary(table));
  });
  return list.ToArray();
} 
```

# c# - 按列表行中某个单词的出现次数排序

> ID：11401622
> 
> 赞同：3
> 
> 时间：2012-07-09T19:18:52.330
> 
> 标签：c#, linq

如何按每行 linq 数据中出现的单词对列表进行排序？我从这里得到了一个给出正确输出的人的答案。这是代码：

```
void Main()
{
    List<SearchResult> list = new List<SearchResult>() { 
        new SearchResult(){ID=1,Title="Geo Prism GEO 1995 GEO* - ABS #16213899"},
        new SearchResult(){ID=2,Title="Excavator JCB - ECU P/N: 728/35700"},
        new SearchResult(){ID=3,Title="Geo Prism GEO 1995 - ABS #16213899"},
        new SearchResult(){ID=4,Title="JCB Excavator JCB- ECU P/N: 728/35700"},
        new SearchResult(){ID=5,Title="Geo Prism GEO,GEO 1995 - ABS #16213899 GEO"},
        new SearchResult(){ID=6,Title="dog"},
    };

    var to_search = new[] { "Geo", "JCB" };

    var result = from searchResult in list
         let key_string = to_search.FirstOrDefault(ts =>  searchResult.Title.ToLower().Contains(ts.ToLower()))
         group searchResult by key_string into Group
         orderby Group.Count() descending
         select Group;
         result.ToList().Dump();

 }
// Define other methods and classes here
public class SearchResult
{
    public int ID { get; set; }
    public string Title { get; set; }
} 
```

我得到的输出像

```
ID Title 
-- ------
1  Geo Prism GEO 1995 GEO* - ABS #16213899 
3  Geo Prism GEO 1995 - ABS #16213899 
5  Geo Prism GEO,GEO 1995 - ABS #16213899 GEO 
2  Excavator JCB - ECU P/N: 728/35700 
4  JCB Excavator JCB- ECU P/N: 728/35700 
6  dog 
```

上面的输出没问题。所有具有 ORD GEO 的行都排在第一位，因为它在大多数行中找到了最大时间，这意味着 GEO 是在 3 行中找到的单词，而 JCB 在两行中找到，因此接下来是与 JCB 相关的行。

在获得整个数据的上述输出后，我需要另一种排序。即 GEO 行排在第一位，哪一行具有 GEO 字的最大时间。所以我的输出如下所示：

```
ID Title 
-- ------
5  Geo Prism GEO,GEO 1995 - ABS #16213899 GEO 
1  Geo Prism GEO 1995 GEO* - ABS #16213899 
3  Geo Prism GEO 1995 - ABS #16213899 
4  JCB Excavator JCB- ECU P/N: 728/35700 
2  Excavator JCB - ECU P/N: 728/35700 
6  dog 
```

我发现了一个 linq 查询，它计算字符串中某个单词的出现次数：

```
string text = @"Historically, the world of data and data the world of objects data" ;
string searchTerm = "data";
//Convert the string into an array of words
string[] source = text.Split(new char[] { '.', '?', '!', ' ', ';', ':', ',' },   StringSplitOptions.RemoveEmptyEntries);
var matchQuery = from word in source
             where word.ToLowerInvariant() == searchTerm.ToLowerInvariant()
             select word;
int wordCount = matchQuery.Count(); 
```

我从[这个网址得到它](http://msdn.microsoft.com/en-us/library/bb546166.aspx)

如何使用上面的代码对我的标题进行排序？如何使用第二种排序来计算标题字段中单词的出现次数，结果我的输出如下所示：

```
ID Title 
-- ------
5  Geo Prism GEO,GEO 1995 - ABS #16213899 GEO 
1  Geo Prism GEO 1995 GEO* - ABS #16213899 
3  Geo Prism GEO 1995 - ABS #16213899 
4  JCB Excavator JCB- ECU P/N: 728/35700 
2  Excavator JCB - ECU P/N: 728/35700 
6  dog 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:57:04.263

使用 WordCount 作为字符串的扩展方法，然后可以使用简单的 Lambda 表达式：

```
list.OrderByDescending(sR => sR.Title.WordCount( to_search )) 
```

如果您想省略所有没有任何搜索词的结果，您可以使用该`Where`子句。IE

```
IEnumerable<SearchResult> results = list
                .Where( sR => sR.Title.WordCount( searchTerms ) > 0 )
                .OrderByDescending( sR => sR.Title.WordCount( searchTerms ) ); 
```

**编辑** 如果搜索词具有优先级，您可以像这样对每个项目进行多次排序（首先按优先级最低的元素排序，然后是下一个，直到最终排序在具有最高优先级的项目上）：

```
string[] searchTerms = new string[]{ "GEO","JCB" };
IEnumerable<SearchResult> results = list;
foreach( string s in searchTerms.Reverse() ) {
    results = results
        .OrderByDescending( sR => sR.Title.WordCount( s ) );
} 
```

**扩展方法：**

```
static class StringExtension{
        public static int WordCount( this String text, string searchTerm )
        {
            string[] source = text.Split( new char[] { '.', '?', '!', ' ', ';', ':', ',' }, StringSplitOptions.RemoveEmptyEntries );
            var matchQuery = from word in source
                             where word.ToLowerInvariant() == searchTerm.ToLowerInvariant()
                             select word;
            int wordCount = matchQuery.Count();
            return wordCount;
        }
        public static int WordCount( this String text, IEnumerable<string> searchTerms ) {
            int wordCount = 0;
            foreach( string searchTerm in searchTerms ) {
                wordCount += text.WordCount( searchTerm );
            }
            return wordCount;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:58:47.483

在这一行之后：

```
var result = from searchResult in list
         let key_string = to_search.FirstOrDefault(ts =>  searchResult.Title.ToLower().Contains(ts.ToLower()))
         group searchResult by key_string into Group
         orderby Group.Count() descending
         select Group; 
```

你想要这样的东西：

```
foreach (var group in result) {
      foreach (var item in group.OrderByDescending(theItem => WordCount(theItem.Title, group.Key))) {
          Console.WriteLine(item.Title);
      }
} 
```

使用如下所示的添加方法：

```
public static int WordCount(string haystack, string needle) {
    if (needle == null) {
        return 0;
    }
    string[] source = haystack.Split(new char[] { '.', '?', '!', ' ', ';', ':', ',' }, StringSplitOptions.RemoveEmptyEntries);
    var matchQuery = from word in source
                        where word.ToLowerInvariant() == needle.ToLowerInvariant()
                        select word;
    return matchQuery.Count();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T13:58:31.137

这个怎么样：

```
IEnumerable<SearchResult> result =
    from searchResult in list
    let key_string = to_search.FirstOrDefault(ts => searchResult.Title.ToLower().Contains(ts.ToLower()))
    group searchResult by key_string into Group
    orderby Group.Count() descending
    from item in Group.OrderByDescending(theItem => WordCount(theItem.Title, Group.Key))
    select item; 
```

使用以下`WordCount`方法：

```
public static int WordCount( String text, string searchTerm )
{
    string[] source = text.Split( new char[] { '.', '?', '!', ' ', ';', ':', ',' }, StringSplitOptions.RemoveEmptyEntries );
    var matchQuery = from word in source
                     where word.ToLowerInvariant() == searchTerm.ToLowerInvariant()
                     select word;
    int wordCount = matchQuery.Count();
    return wordCount;
} 
```

我注意到的一个小问题是不包含匹配单词的标题将被组合在一起，因此可以将它们放在匹配单词的标题前面。

# excel - 接受地址（）并给出值的函数

> ID：11401624
> 
> 赞同：13
> 
> 时间：2012-07-09T19:19:06.920
> 
> 标签：excel, excel-2007

我想让一个单元格等于它上面的单元格。

当我写

```
=address(row()-1;column()) 
```

它只写上面单元格的名称（例如对于 B2 它写 $B$1）

是否有输入地址并放置值的函数？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T19:22:12.760

尝试使用[**OFFSET**](http://office.microsoft.com/en-001/excel-help/offset-function-HP010342739.aspx)函数将单元格偏移 -1 行。例如，您可以将以下公式粘贴到单元格 A2 中，它将返回 A1 的值：

```
=OFFSET(A2,-1,0) 
```

但是，如果您真的想保留当前的地址方法，请将其放在[**INDIRECT**](http://office.microsoft.com/en-001/excel-help/indirect-function-HP010062413.aspx)函数中，如下所示：

```
=INDIRECT(ADDRESS(ROW()-1,COLUMN())) 
```

# c - C：未定义的行为事实

> ID：11401627
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:19:12.093
> 
> 标签：c, type-conversion

1）我已经读过很多次关于 C 中未定义行为的内容。那是关于：C 在其定义中没有说明的一些行为，因此每个编译器都会有它们的实现，但不会违反 C 标准。例子是：`x= ++y*4 + ++y*3`。

但是，这里的任何人都可以给我两个给出不同结果的编译器吗？我有兴趣用它来测试。（在我的机器上，我只有 mingw）

2) 而且，C 没有说明`+ - * /`操作顺序。例如：`1*2 + 3 + 4*5`。`* /`将首先计算，但我们不知道它的另一个。

所以根据下面的例子：如果我们有：

```
int a, b, c; 
// assign value for a,b,c
float result = a*b/c; // wrong
float result = (float)a*b/c; // seem true 
```

但是，`b/c`仍然可以先计算，所以答案是错误的。所以，真正的类型转换应该是：

`float result = a*b/(float)c`

但是，几乎所有关于 C 的书籍，所有编写 C 的人，总是使用 : `(float)a*b/c`。总是如此，还是他们相信“普通编译器”会像我们经常想的那样从左到右解决？

请让我更清楚地了解这一点。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:02:45.963

对于 1) 你混淆了未定义的行为和未指定的行为，它们是不一样的。您给出的这个丑陋的表达具有未定义的行为；您认为未定义行为的后果只是非特定行为，即编译器选择了不同的可能性之一，这通常是您可以忍受的。

未定义的行为可能会更糟。如果行为未定义，编译器通常可以根据自己的喜好选择任何东西，吃你的午餐，清空你的银行账户，让你的电脑崩溃。不幸的是，在某些情况下，编译器会做一些你在这些情况下没有预料到的坏事。所以一开始就不要激怒UB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:20:36.917

您不需要两个编译器即可从具有未定义行为的代码中获得不同的结果。在许多（如果不是大多数）情况下，如果您更改优化设置和/或修改周围代码，单个编译器会很乐意为您生成不同的结果。

# java - 创建一个自中断的 ExecutorService

> ID：11401628
> 
> 赞同：3
> 
> 时间：2012-07-09T19:19:15.537
> 
> 标签：java, multithreading, executorservice, runnable, interrupted-exception

我的任务是处理文件目录，如果出现任何问题，需要抛出 IOException。我还需要它跑得更快，所以我将完成的工作分成多个线程并等待它们的终止。它看起来像这样：

```
//Needs to throw IOException so the rest of the framework handles it properly.
public void process(File directory) throws IOException {
    ExecutorService executorService =
        new ThreadPoolExecutor(16, 16, Long.MAX_VALUE, TimeUnit.NANOSECONDS,
            new LinkedBlockingQueue<Runnable>());

    //Convenience class to walk over relevant file types.
    Source source = new SourceImpl(directory);
    while (source.hasNext()) {
        File file = source.next();
        executorService.execute(new Worker(file));
    }

    try {
        executorService.shutdown();
        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
    } catch (InterruptedException e) {
        executorService.shutdownNow();
        throw new IOException("Worker thread had a problem!");
    }
} 
```

而Worker线程基本上是：

```
private class Worker implements Runnable {
    private final File file;
    public Worker(File file) { this.file = file; }

    @Override
    public void run() {
        try {
            //Do work
        } catch (IOException e) {
            Thread.currentThread().interrupt();
        }
    }
} 
```

期望的行为是，如果任何 Worker 有一个 IOException，那么生成线程就会意识到它，并且可以反过来抛出它自己的 IOException。这是我能想到的让 Worker 线程发出错误信号的最好方法，但我仍然不确定我是否设置正确。

那么，首先，这会达到我的预期吗？如果 Worker 线程在 run() 中出现错误，调用是否`Thread.currentThread().interrupt();`会引发 InterruptedException 以使其被阻塞捕获`executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);`？

其次，如果一个正在运行的 Worker 在所有线程都排队之前调用它的中断会发生什么？在阻塞 try/catch 块之前？

最后（也是最重要的），有没有更优雅的方式来实现我的目标？我想让所有无数子线程执行直到完成或直到其中任何一个出现错误，此时我想在生成线程中处理它（通过有效地使整个目录失败）。

* * *

**解决方案**

根据答案，这是我最终使用的实现。它很好地处理了我的异步需求，并在 IOExceptions 上干净且相对快速地失败。

```
public void process(File directory) throws IOException {
    //Set up a thread pool of 16 to do work.
    ExecutorService executorService = Executors.newFixedThreadPool(16);
    //Arbitrary file source.
    Source source = new SourceImpl(directory);
    //List to hold references to all worker threads.
    ArrayList<Callable<IOException>> filesToWork =
        new ArrayList<Callable<IOException>>();
    //Service to manage the running of the threads.
    ExecutorCompletionService<IOException> ecs =
        new ExecutorCompletionService<IOException>(executorService);

    //Queue up all of the file worker threads.
    while (source.hasNext())
        filesToWork.add(new Worker(file));

    //Store the potential results of each worker thread.
    int n = filesToWork.size();
    ArrayList<Future<IOException>> futures =
        new ArrayList<Future<IOException>>(n);

    //Prepare to return an arbitrary worker's exception.
    IOException exception = null;
    try {
        //Add all workers to the ECS and Future collection.
        for (Callable<IOException> callable : filesToWork)
            futures.add(ecs.submit(callable));
        for (int i = 0; i < n; i++) {
            try {
                //Get each result as it's available, sometimes blocking.
                IOException e = ecs.take().get();
                //Stop if an exception is returned.
                if (e != null) {
                    exception = e;
                    break;
                }
            //Also catch our own exceptions.
            } catch (InterruptedException e) {
                exception = new IOException(e);
                break;
            } catch (ExecutionException e) {
                exception = new IOException(e);
                break;
            }
        }
    } finally {
        //Stop any pending tasks if we broke early.
        for (Future<IOException> f : futures)
            f.cancel(true);
        //And kill all of the threads.
        executorService.shutdownNow();
    }

    //If anything went wrong, it was preserved. Throw it now.
    if (exception != null)
        throw exception;
} 
```

和

```
//Does work, and returns (not throws) an IOException object on error.
private class Worker implements Callable<IOException> {
    private final File file;
    public Worker(File file) { this.file = file; }

    @Override
    public IOException call() {
        try {
            //Do work
        } catch (IOException e) {
            return e;
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:47:14.820

`interrupt()`这样调用*不会*影响主线程。

你应该做的是让你的工人 a`Callable`而不是 a`Runnable`并允许失败异常离开`call()`方法。然后，使用[ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)执行所有 Worker 。这将允许您确定每个任务的状态，并在其中一个任务失败时在主线程中采取行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:32:35.077

与往常一样，线程之间最好的通信是队列。让每个工作人员发送一条消息，描述其执行是如何完成的，并让生成线程从队列中读取。此外，由于生成线程知道它生成了多少个工人，它可以只计算消息以了解所有工人何时完成，而不依赖于池关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:16:19.103

让 Worker 实现`Callable<Void>`，你可以这样做：

```
public void process(File directory) throws IOException {
    ExecutorService executorService = new ThreadPoolExecutor(16, 16,
            Long.MAX_VALUE, TimeUnit.NANOSECONDS,
            new LinkedBlockingQueue<Runnable>());

    // Convenience class to walk over relevant file types.
    List<Future<Void>> futures = new ArrayList<Future<Void>>();
    Source source = new SourceImpl(directory);
    while (source.hasNext()) {
        File file = source.next();
        futures.add(executorService.submit(new Worker(file)));
    }

    try {
        for (Future<Void> future : futures) {
            future.get();
        }
    } catch (ExecutionException e) {
        throw new IOException("Worker thread had a problem!", e.getCause());
    } catch (InterruptedException e) {
        throw new IOException("Worker thread had a problem!", e);
    } finally {
        executorService.shutdown();
    }
} 
```

# facebook - 如何启用电子邮件通知？

> ID：11401629
> 
> 赞同：0
> 
> 时间：2012-07-09T19:19:25.230
> 
> 标签：facebook, notifications, email-notifications

我正在 Facebook 上开发一个原型，并希望确保用户可以收到一封电子邮件以及常规的 Facebook 通知。这是我的一些用户特别要求的，他们不会在网站上花费大量时间，并且他们的通知设置非常严格，但请定期检查他们的电子邮件。

我已经启用了所有我能找到的设置， ![应用设置](../Images/c458fb6b4e040c128ec2accd3d596b4d.png)

![通知设置](../Images/a71a5dac9b3edffb80158ef9a013aa46.png)

![电子邮件设置](../Images/9cedc5bb2bbc3ac2ef069b27fb6af287.png)

但还是一无所获。

尽管 Facebook 似乎为您提供了选择，但没有办法做到这一点，因为我看到大多数直接向我发送电子邮件的其他应用程序通常是从他们自己的域/电子邮件帐户中进行的，而不是通过 Facebook 消息系统。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:15:03.937

获得`email`扩展权限（看起来像您拥有）后，只需使用图形 api 或 fql 检索电子邮件地址，然后自己发送电子邮件。这就是它的工作原理。无法使用 Facebook api 发送电子邮件。

# mysql - MySQL WHERE 子句构造问题

> ID：11401632
> 
> 赞同：0
> 
> 时间：2012-07-09T19:19:39.253
> 
> 标签：mysql, where-clause

我用它来按 LocState 过滤记录：（状态作为管道分隔值传递，如下所示，但将是一个参数）

```
INSTR(CONCAT('|','TX|OH','|'),e.LocState) > 0 
```

但是......我怎样才能让它适用于这样的事情？：

```
INSTR(CONCAT('|','AO|WH15','|'),e.ProgramCode) > 0 
```

它还会导致 ProgramCode == 'WH1' 的匹配。

```
POSITION(e.ProgramCode IN CONCAT('|','AO|WH15','|')) > 0 
```

也不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:58:04.653

假设您有这样的数据记录：

```
ID    ProgramCode
1     WH1
2     WH15 
```

并且您想过滤匹配的记录`WH1`。如果您使用此查询：

```
SELECT *
FROM table
WHERE ProgramCode INSTR(CONCAT('|','AO|WH15','|'),e.ProgramCode) > 0 
```

你本质上是在说：

> 选择 ProgramCode 在以下字符串中的记录：`'|A0|WH15|'`

既然`'WH1'`是*在* `'WH15'`你得到一个误报。

您最好使用该`WHERE IN`构造，如下所示：

```
SELECT *
FROM table
WHERE ProgramCode IN ('A0', 'WH15'); 
```

这表示：

> 选择 ProgramCode（整体）在以下字符串集中的记录：`'A0', 'WH15'`

如果您的过滤条件作为管道分隔的字符串传递，您需要先对其进行解析，以便为`IN`参数设置正确的数据集。

您可能还对使用[正则表达式](http://dev.mysql.com/doc/refman/5.5/en/regexp.html)感兴趣，因为 MySQL 支持它们。

# c++ - 为使用 malloc() 分配的对象数组调用构造函数

> ID：11401633
> 
> 赞同：3
> 
> 时间：2012-07-09T19:19:52.600
> 
> 标签：c++, c, oop, memory-management, constructor

> **可能重复：**
> [可以以便携式方式使用新的阵列放置吗？](https://stackoverflow.com/questions/15254/can-placement-new-for-arrays-be-used-in-a-portable-way)

我想分配对象 T 的数组并使用对象构造函数初始化对象。这很容易使用 c++ `new`：

```
T * pointerT = new T [arraySize]; 
```

它将为所有`arraySize`对象调用 T 构造函数。但是，由于某种原因，我必须使用 C`memalign`而不是 new。在这种情况下，我最终使用以下代码

```
T * pointerT = (T*) memalign(64,arraySize * sizeof(T)); 
new (pointerT) T(); 
```

`new (pointerT) T()`只调用一次 T 构造函数。但是，我需要为所有对象调用 T 构造函数，而不仅仅是第一个对象。

我很感激你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:21:28.480

循环执行`new (pointerT) T()`。*请*保留`pointerT`一个对象，其析构函数会破坏对象并调用`free`（例如调用它`aligned_vector`），并在构造函数中执行以下操作：

```
ptrdiff_t k = 0;

try
{
    for (; k < n; k++)
        new (pointerT + k) T();
}

catch (...)
{
    for (; k > 0; k--) (pointerT + k)->~T();
    free(pointerT);
    throw;
} 
```

这样，如果构造失败，您可以通过事务处理而不会泄漏内存或资源。

为此，就可重用性而言，最简单的方法是实现您自己的对齐感知分配器和 use `std::vector`，它为您处理异常安全（和许多其他好东西）。

这是一个示例分配器，C++11，带有编译时对齐规范（请提出增强和更正建议）：

```
template <typename T, size_t align>
struct aligned_allocator
{
    typedef T value_type;
    typedef T* pointer;
    typedef const T* const_pointer;
    typedef T& reference;
    typedef const T& const_reference;
    typedef size_t size_type;
    typedef ptrdiff_t difference_type;

    template <typename U>
    struct rebind { typedef aligned_allocator<U, align> other; };

    T* address(T& t) { return &t; }

    T* allocate(size_t n, const T* = 0) 
    {
        if (T* ans = memalign(align, n * sizeof(T))) return ans;
        else throw std::bad_alloc();
    }

    T* deallocate(T* p, size_t) { free(p); }

    size_t max_size() const 
    {
        return size_t(-align) / sizeof(T); 
    }

    template <typename U, typename... Args>
    void construct(U* p, Args&&... args)
    {
        ::new((void *)p U(std::forward<Args>(args)...);
    }

    template <typename U>
    void destroy(U* p) { p->~U(); }
}; 
```

示例用法：`std::vector<T, aligned_allocator<T, 64>> v(42);`构造一个具有对齐存储和 64 个元素的向量。

你也可以在 C++11 中做

```
template <typename T, size_t align>
using aligned_vector = std::vector<T, aligned_allocator<T, align>>; 
```

你现在可以使用

```
aligned_vector<MyType, 64> v; 
```

并享受异常安全、移动感知、迭代器感知、基于范围的循环感知等，具有对齐存储的向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T21:50:35.603

如果`T`是可复制的，例如：

```
std::uninitialized_fill_n( pointerT, arraySize, T()); // #include <memory> 
```

应该做的伎俩。如果在中途抛出异常，它甚至会为您处理已构造的对象的销毁。

# mysql - 带有计数查询的mysql内部连接

> ID：11401636
> 
> 赞同：0
> 
> 时间：2012-07-09T19:20:09.453
> 
> 标签：mysql, sql, count, inner-join

我有以下查询来提取属性。属性有多个单位。我不知道如何使用至少 1 个单位提取属性。单元通过具有相同的“团队”连接到属性。“团队”是一个 varchar（例如“jkdgsl”）。有什么建议么？

```
SELECT DISTINCT Properties.id, Properties.title, Properties.team
FROM Properties
INNER JOIN Units ON Units.team = Properties.team 
AND Units.rates != '0' 
AND Properties.deleted =  '0000-00-00 00:00:00'
AND Properties.zip_code
IN (
'77808',  '77845'
)
AND Properties.public =  '1'
ORDER BY FIELD( Properties.zip_code,  '77808',  '77845' ) 
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:23:58.297

我认为您已经通过内部连接的性质这样做（即选择具有至少一个单元的属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:28:52.717

我同意@Razvan 如果您还想要单位数，请使用：

 `````
SELECT DISTINCT Properties.id, Properties.title, Properties.team, COUNT(Units.<em>someOTHERcolumn</em>)
FROM Properties
INNER JOIN Units ON Units.team = Properties.team 
AND Units.rates != '0' 
AND Properties.deleted =  '0000-00-00 00:00:00'
AND Properties.zip_code
IN (
'77808',  '77845'
)
AND Properties.public =  '1'
GROUP BY Properties.id ORDER BY FIELD( Properties.zip_code,  '77808',  '77845' ) 
LIMIT 0 , 30 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:34:00.177

如果只是一个或多个，您可以使用`COALESCE`.

```
WHERE COALESCE( Properties.id, Properties.title, Properties.team ) IS NOT NULL 
`````

# entity-framework - Entity Framework，代码优先使用fluent API，避免插入引用表

> ID：11401637
> 
> 赞同：2
> 
> 时间：2012-07-09T19:20:09.760
> 
> 标签：entity-framework, one-to-one

我有一个名为**ServiceProviders**的表，其中包含静态数据。POCO 类如下

```
public class ServiceProvider
    {
         public virtual int Id
        {
            get;
            set;
        }

        public virtual string Name
        {
            get;
            set;
        }
 } 
```

我有一个**客户**表。每个客户端都需要引用“现有”服务提供商之一。

```
 public class Client
        {
         public virtual int Id
        {
            get;
            set;
        }    

        public virtual string FirstName
        {
            get;
            set;
        }

        public virtual string LastName
        {
            get;
            set;
        }

        public virtual ServiceProvider ServiceProvider
        {
            get;
            set;
        }
} 
```

我正在使用 EF 代码优先 fluent API 配置客户端，如下所示

```
public ClientConfiguration(): base()
        {
            HasKey(e => e.Id);
            Property(e => e.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
            ToTable("dbo.Clients");
            Property(e => e.FirstName).IsRequired().HasMaxLength(256).IsVariableLength().HasColumnType("nvarchar");
            Property(e => e.LastName).IsRequired().HasMaxLength(256).IsVariableLength().HasColumnType("nvarchar");
            HasRequired(e => e.ServiceProvider).WithMany().Map(m => m.MapKey("ServiceProviderId")).WillCascadeOnDelete(false);
} 
```

当我想插入新客户的记录时，我会获得现有**ServiceProvider**实例的引用并将其附加到客户的**ServiceProvider**属性

```
Client client = new Client() { FirstName = "John", LastName = "Doe" };
client.ServiceProvider = serviceproviders[0]; //An existing ServiceProvider instance fetched from DB earlier 
```

**当我调用 SaveChanges 时，EF 在我的ServiceProviders**表中插入一条新的（重复的）记录。我想要做的只是在**Client**表中插入一条新记录，并将**ServiceProviderId**列的值设置为现有 ServiceProvider 实例的**Id**。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:33:18.353

您需要将现有内容附加`ServiceProvider`到您保存新内容的上下文`Client`中。`Attach`告诉 EF ServiceProvider 已存在于数据库中并阻止该 ServiceProvider 的 INSERT：

```
Client client = new Client() { FirstName = "John", LastName = "Doe" };
context.ServiceProviders.Attach(serviceproviders[0]);
client.ServiceProvider = serviceproviders[0]; 
```

# c# - 我可以从共享接口继承我的 WCF DataContract 吗？

> ID：11401640
> 
> 赞同：2
> 
> 时间：2012-07-09T19:20:33.060
> 
> 标签：c#, wcf, service, interface, datacontract

我在同一个解决方案（不同的项目）中有一个 WCF 服务和客户端。服务类本身继承自一个接口，并且该接口在客户端和服务器之间共享（通过链接文件）。客户端使用服务工厂来生成代理。事实证明，这是一种非常好的方法，可以在不从客户端引用服务器端项目的情况下链接两端。

其中一个服务方法返回一个包含 DataContract 和 DataMember 属性的对象，直到最近这个**类**也链接到客户端，但是使用编译符号从客户端排除了服务器端逻辑。

我决定把它也变成一个界面会更明智。但是现在每次从客户端调用服务方法时都会出现以下异常：

***底层连接已关闭：服务器关闭了预期保持活动状态的连接。***

其内部异常如下：

***无法从传输连接读取数据：现有连接被远程主机强行关闭。***

因此，通过简化示例，我的服务本质上与客户端共享以下接口：

```
public interface IMyData
{
    [DataMember]
    int Id {get; set;}

    [DataMember]
    string Description {get; set;}
} 
```

接口使用并将返回的实际对象如下所示：

```
[DataContract]
public class MyData : IMyData
{
    [DataMember]
    public int Id {get; set;}

    [DataMember]
    public string Description {get; set;}
} 
```

我的服务界面如下所示：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    IMyData GetData();
} 
```

实现看起来像这样：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.Single)]
public class MyService : IMyService
{
    [OperationContract]
    IMyData GetData()
    {
        // Get data.
    }
} 
```

希望一切都有意义！我只是想知道我是否做错了。如果必须的话，我将返回共享课程并分割仅服务器端的代码......但如果可以的话，我宁愿使用接口。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:25:40.113

将接口放在 a 上没有任何好处，`DataContract`因为它们只表示数据而没有逻辑。您通常将这些 DataContracts 放在同一个程序集中，`ServiceContracts`或者将单独的程序集放在一起。这将防止将业务逻辑暴露给您的客户。

# amazon-ec2 - 为什么我无法从 AWS 管理控制台启动 Java SSH 客户端？

> ID：11401643
> 
> 赞同：9
> 
> 时间：2012-07-09T19:20:42.360
> 
> 标签：amazon-ec2, amazon-web-services

在 AWS 管理控制台中，我选择了一个 EC2 实例，然后从“实例操作”菜单中单击“连接”。我看到以下弹出窗口：

![在此处输入图像描述](../Images/050c977d4fa79bd1910ef3bfdcab238e.png)

我收到的不是我通常应该看到的字段，而是上面关于在浏览器中启用 java 的消息。**但是在我的浏览器中启用**了java 。我用[这个页面](http://www.java.com/en/download/testjava.jsp)对其进行了测试 以确认。我正在运行 Java SE 6 Update 24。

我在 Linux Mint 13 64 位上使用 Google Chrome v20.0。我也尝试过使用 Firefox，结果是一样的。我可以从我的 Windows 机器上毫无问题地访问 Java SSH 客户端，所以这可能是 Linux 特有的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-09T18:44:40.417

使用 Firefox 或 safari，它工作正常。

有关详细信息，请参阅下面的链接。

Chrome 浏览器版本 42 及以上。从 Chrome 版本 42（2015 年 4 月发布）开始，Chrome 已禁用浏览器支持插件的标准方式。 [https://java.com/en/download/help/browser_activate_plugin.xml](https://java.com/en/download/help/browser_activate_plugin.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T03:54:12.737

尝试选项 1，一个独立的 ssh，然后打开终端，使用 chmod 命令更改权限，然后使用 ssh -i.... 命令（示例在 AWS 上的 Launch instance 框中给出）。

完成此操作后，您将在终端上看到位图，这意味着您已进入。

然后使用 cd apps/parse/htdocs。这将带您进入存储大多数解析服务器文件的 htdocs。然后使用 vi filename.js 打开一个 tex 编辑器来编辑你想要的文件。

希望这很有用。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-03-06T11:15:55.830

尝试使用 java 32 位版本.. 大多数浏览器不支持 64 位 java..

# excel - 如何使用 DAX 将属性更改为度量？

> ID：11401646
> 
> 赞同：0
> 
> 时间：2012-07-09T19:20:47.587
> 
> 标签：excel, attributes, powerpivot, dax

我的数据库中有很多数据，我希望使用 Power Pivot 将其显示为数据透视表，但是，我的一些数据是文本（一些标志、月份名称、姓名、姓氏等）。有没有办法可以将这些属性转换为度量值，这样我的数据透视表的整体性能就不会受到影响？

我有一些想法，但还不清楚，这是我的表格示例

```
用户名 | 姓名 | 姓名 | 城市 | 状态 | 已售出数量
 1111 乔恩·史密斯 2 6 459394
 1112 亚历克斯现金 6 2 31232
 1113罗伯亚当斯5 1 12434

```

我只需要在查看 UserID 级别的数据时使用这些属性（如果我在 City、State 看到数据 leven 它不会因为我不关心姓名/姓氏）有没有办法我可以评估上下文并使名称成为衡量标准吗？

就像是

```
=IF(UserID, DisplayLastName, BLANK()) 
```

（检查我是否使用用户 ID 的新措施，如果我使用则显示姓氏，如果不是，则显示空白）

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:00:15.750

哦，看来我找到了我要找的东西

```
LName:=IF(ISFILTERED(Details[UserID]),VALUES(Details[LName]),BLANK()) 
```

只要 UserID 在数据透视表上，LName 度量就可以工作。

# delphi - Delphi 在哪里存储项目的目录和条件定义设置？

> ID：11401648
> 
> 赞同：1
> 
> 时间：2012-07-09T19:20:48.053
> 
> 标签：delphi, delphi-5

“项目-->选项-->目录/条件”详细信息将存储在哪个文件中？它是在 build.dat 中还是在 project_name.dof 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:24:44.913

我不知道您在哪里可以找到 build.dat，但配置详细信息已存储

*   在你的`.dof`文件中
*   在`.cfg`命令行编译中。

[在此处](http://delphi.wikia.com/wiki/Delphi_File_Extensions)查找Delphi 项目中使用的所有扩展的完整列表。

# javascript - jQuery Uncaught TypeError：无法调用未定义的方法“应用”

> ID：11401652
> 
> 赞同：0
> 
> 时间：2012-07-09T19:20:53.350
> 
> 标签：javascript, jquery, exception

我收到标题上的错误。[请参阅http://i49.tinypic.com/s6jc03.png](http://i49.tinypic.com/s6jc03.png)的屏幕截图

错误并不总是存在，有时我刷新并没有错误。

我已经将所有代码放入 $(document).ready(function(){} 以防万一 DOM 没有准备好。

base.js:2453 ->

```
$('#SetList_Close,.fb_close').live('click',function(){
    $.fancybox.close();
    return false;
}); 
```

任何想法发生了什么？该错误发生在 Chrome 上。我没有测试过其他浏览器。

编辑：我正在使用来自 googleapis.com 的 jquery 1.7.2

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:42:55.130

应该怎么`$.fancybox`做？我不认为这是[他们页面上的 api](http://fancybox.net/howto)

您的意思是使用该`$.fn.fancybox`版本吗？

```
$('.some-element').fancybox({
       href: this.href,
       overlayOpacity: 0.2,
       centerOnScroll: true,
       scrolling: false,
       hideOnOverlayClick : false
   }); 
```

这是一个错误，因为您调用 fancybox 的对象不是 jquery 中包装的 DOM 元素。

# c - 如何写出标记化的字符串

> ID：11401657
> 
> 赞同：1
> 
> 时间：2012-07-09T19:21:29.143
> 
> 标签：c, string, split, strtok, scanf

我对 C 很陌生，我发现的任何关于我的问题的例子似乎都不起作用，或者我完全误解了那个解决方案是什么。我有一个大文件，其中包含如下数据：

赖氨酸 24L HB2 45.212 39.585 124.457 SC0 0.145 -0.795 0.585 0.157

在每一行。我已经使用 strtok 对数据进行了标记。我需要的是第二个字段，我希望将 24 存储为整数以进行比较，并将 L 存储为 char 以进行比较。

我尝试使用

```
sscanf(token[1], "%d%s", number, letter); 
```

但我不断收到分段错误错误。同样在进一步尝试使用 sscanf 时，我尝试简单地打印出“LYS”（试图进一步理解我的问题），但是我的程序只会使用以下命令打印 L：

```
sscanf(token[0], "%c", &stemp);
letter = stemp;
printf("%c \n", letter); 
```

但是，如果更改 %c ---> %s （希望获得整个字符串），那么我会再次获得 Segmentation fault 错误......我对 sscanf 命令有什么不明白的地方吗？为什么我不能读完整的字符串？？提前感谢您的时间和帮助！

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:24:53.290

我怀疑问题实际上是`number`并且分别是和`letter`类型。需要存储值的内存位置的地址，而不是变量本身；IE，`int``char``scanf()`

```
int number;
char letter[2];

sscanf(token[1], "%d%s", &number, letter); 
```

我已经制作`letter`了一个由两个字符组成的数组，并且正在传递数组的地址；`%s`与您使用的扫描转换相匹配。

# sql-server - 接受多个 id 值的存储过程（其中参数接受 null）

> ID：11401658
> 
> 赞同：1
> 
> 时间：2012-07-09T19:21:30.643
> 
> 标签：sql-server, tsql, stored-procedures

这个问题将是[接受多个 Id 值的 T-SQL 存储过程中最后一个答案的附录](https://stackoverflow.com/questions/43249/t-sql-stored-procedure-that-accepts-multiple-id-values)

我将一些 id 列表作为参数传递给存储过程。如果没有发送数据，它们中的每一个都默认为 null。例如，我希望我的存储过程返回 id 为 1、2、5、7、20 的食品。我还发送了一份颜色 ID 和生产位置 ID 列表。我正在传递这些 id 的逗号分隔列表。与上面提到的问题中的最后一个答案类似，我使用每个参数的数据创建了一个临时表。然后我想要一个 select 语句，如下所示：

```
SELECT * FROM Candies 
INNER JOIN #TempColors 
    ON Candies.ColorsID = #TempColors.ColorID 
INNER JOIN Locations 
    ON Candies.LocationID = Locations.LocationID 
```

这仅在填充参数并且 LEFT OUTER JOINS 无法正确过滤时才有效。在接受 null 作为有效参数的同时进行过滤的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:50:51.507

你可以使用

```
some join condition OR @param IS NULL 
```

在您的加入中，如果提供了 null ，它将返回所有结果 - 尽管据我所知，您没有指定传递 null 时想要的行为

（当我说参数时，我的意思是临时表列在我的手机上执行此操作，这并不容易；））

编辑：

这个对我有用：

[http://sqlfiddle.com/#!3/c7e85/26](http://sqlfiddle.com/#!3/c7e85/26)

例如

```
-- Assume this is your values string which is populating the table
DECLARE @Values varchar(50)

-- Your code to populate the table here: assume the string is NULL when no values are passed
INSERT INTO #TempColors BLAH BLAH...

-- Select statement
SELECT * FROM Candies  
    LEFT JOIN #TempColors  
        ON Candies.ColorsID = #TempColors.ColorID
WHERE 1 = CASE 
              WHEN Candies.ColorsID IS NULL AND @Values IS NULL THEN 1
              WHEN Candies.ColorsID IS NOT NULL AND @Values IS NOT NULL THEN 1
              ELSE 0
          END 
```

这样，将使用 NON-NULL 参数过滤掉 NULL，但保留 NULL 参数

# maven - maven-ear-plugin - 如何操作 webModule 和 ejbModule 的 Manifest.MF？

> ID：11401660
> 
> 赞同：3
> 
> 时间：2012-07-09T19:21:45.807
> 
> 标签：maven, manifest, ear, manifest.mf, maven-ear-plugin

我有一个具有以下结构的多模块 Maven 项目：

```
 app (parent)
    -- pom.xml
    -- app-ear
       -- pom.xml
    -- app-ejb
       -- src
       -- pom.xml
    -- app-web
       -- src
       -- pom.xml 
```

## 应用程序/pom.xml

这是我的**app/pom.xml**（父项目），我在其中放置了所有应用程序依赖项：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.mycompany</groupId>
    <artifactId>app</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>app</name>
    <url>http://maven.apache.org</url>

    <modules>
        <module>app-ejb</module>
        <module>app-web</module>
        <module>app-ear</module>
    </modules>

    <dependencies>
        <dependency>
            <groupId>javax.ejb</groupId>
            <artifactId>ejb-api</artifactId>
            <version>3.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javaee</groupId>
            <artifactId>javaee-api</artifactId>
            <version>5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish</groupId>
            <artifactId>javax.faces</artifactId>
            <version>2.0.9</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.richfaces.ui</groupId>
            <artifactId>richfaces-components-ui</artifactId>
        </dependency>
        <dependency>
            <groupId>org.richfaces.core</groupId>
            <artifactId>richfaces-core-impl</artifactId>
        </dependency>
    </dependencies>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.richfaces</groupId>
                <artifactId>richfaces-bom</artifactId>
                <version>4.2.0.Final</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

## 应用程序-ejb/pom.xml

这是我的**app-ejb/pom.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>app</artifactId>
        <groupId>com.mycompany</groupId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <artifactId>app-ejb</artifactId>
    <packaging>ejb</packaging>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ejb-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <ejbVersion>3.0</ejbVersion>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是我的**app-web/pom.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>app</artifactId>
        <groupId>com.mycompany</groupId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <artifactId>app-web</artifactId>
    <packaging>war</packaging>

    <dependencies>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>app-ejb</artifactId>
            <version>${project.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>app-web</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
            </plugin>
        </plugins>
    </build>

</project> 
```

## app-ear/pom.xml

最后，这是我的**app-ear/pom.xml**，其中我有关于如何生成我的 app.ear 文件的详细信息：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>app</artifactId>
        <groupId>com.mycompany</groupId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <artifactId>app-ear</artifactId>
    <packaging>ear</packaging>

    <dependencies>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>app-ejb</artifactId>
            <type>ejb</type>
            <version>${project.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>app-web</artifactId>
            <type>war</type>
            <version>${project.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>app</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-ear-plugin</artifactId>
                <version>2.7</version>
                <configuration>
                    <version>5</version>
                    <unpackTypes>war</unpackTypes>
                    <defaultLibBundleDir>lib</defaultLibBundleDir>
                    <skinnyWars>true</skinnyWars>
                    <modules>
                        <webModule>
                            <groupId>com.mycompany</groupId>
                            <artifactId>app-web</artifactId>
                            <bundleFileName>app-web.war</bundleFileName>
                            <contextRoot>/app</contextRoot>
                        </webModule>
                        <ejbModule>
                            <groupId>com.mycompany</groupId>
                            <artifactId>app-ejb</artifactId>
                            <bundleFileName>app-ejb.jar</bundleFileName>
                        </ejbModule>
                        <jarModule>
                            <groupId>org.glassfish</groupId>
                            <artifactId>javax.faces</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>org.richfaces.core</groupId>
                            <artifactId>richfaces-core-api</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>org.richfaces.core</groupId>
                            <artifactId>richfaces-core-impl</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>org.richfaces.ui</groupId>
                            <artifactId>richfaces-components-api</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>org.richfaces.ui</groupId>
                            <artifactId>richfaces-components-ui</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>net.sourceforge.cssparser</groupId>
                            <artifactId>cssparser</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>org.w3c.css</groupId>
                            <artifactId>sac</artifactId>
                        </jarModule>
                        <jarModule>
                            <groupId>com.google.guava</groupId>
                            <artifactId>guava</artifactId>
                        </jarModule>
                    </modules>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我的问题是*app.ear/app-web.war!META-INF/MANIFEST.MF*和*app.ear/app-ejb.jar!META-INF/MANIFEST.MF*看起来像这样：

```
 Manifest-Version: 1.0
    Build-Jdk: 1.6.0_24
    Class-Path: lib/javax.faces-2.0.9.jar lib/richfaces-core-api-4.2.0.Fin
     al.jar lib/richfaces-core-impl-4.2.0.Final.jar lib/richfaces-componen
     ts-api-4.2.0.Final.jar lib/richfaces-components-ui-4.2.0.Final.jar li
     b/cssparser-0.9.5.jar lib/sac-1.3.jar lib/guava-10.0.1.jar lib/jsr305
     -1.3.9.jar
    Created-By: Apache Maven
    Archiver-Version: Plexus Archiver 
```

而且我真的必须从这些清单中删除 Class-Path 条目。

为什么？因为似乎 RichFaces 在我的应用程序的类路径中被加载了两次。（一个来自 app.ear/lib 文件夹，另一个来自 app.ear/app-web.war!META-INF/MANIFEST.MF 类路径条目）。当我尝试在我的应用程序服务器（Oracle Weblogic 10.3.5）中部署 app.ear 时，我得到了一些类似的错误：

```
 INFO: Unsanitized stacktrace from failed start...
    java.lang.IllegalArgumentException: duplicate key: class   javax.faces.validator.RequiredValidator
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:115)
at com.google.common.collect.RegularImmutableMap.<init>(RegularImmutableMap.java:72)
at com.google.common.collect.ImmutableMap$Builder.fromEntryList(ImmutableMap.java:221)
at com.google.common.collect.ImmutableMap$Builder.build(ImmutableMap.java:207)
at org.richfaces.javascript.ClientServiceConfigParser.parseConfig(ClientServiceConfigParser.java:53)
at org.richfaces.application.ValidatorModule.createClientScriptService(ValidatorModule.java:65)
at org.richfaces.application.ValidatorModule.configure(ValidatorModule.java:60)
at org.richfaces.application.ServicesFactoryImpl.init(ServicesFactoryImpl.java:27) 
```

奇怪的是，如果我`mvn package`在我的**app-web**项目中运行，Class-path 条目不会转到 app-web.war/META-INF/MANIFEST.MF。它仅在我`mvn package`在我的**应用**父项目中运行时发生。

那么，如何删除 webModule 和 ejbModule MANIFEST 文件的 Class-path 条目？

[我在这个线程](https://stackoverflow.com/questions/9237485/how-to-set-up-manifest-class-path-properly-in-maven-war-plugin)中发现了类似的问题，但没有解决方案。

我很感激任何帮助。

谢谢，毛里西奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-12T13:19:02.110

您需要在配置标签内的**app-ear/pom.xml中添加以下条目**

```
<archive>
    <manifest>
        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
    </manifest>
    <manifestEntries>
        <Created-On>${build.timestamp}</Created-On>
        <Ant-Version>${ant.version}</Ant-Version>
        <Java-Version>${ant.java.version}</Java-Version>
    </manifestEntries>
</archive> 
```

通常`addDefaultImplementationEntries`，设置为 false 的标签会阻止将所有默认条目（如您想要的条目）写入清单中。之后，您可以添加您想要包含的任何内容。我添加了一些您可以看到的示例。

# arrays - 为什么这个 for 循环不处理数组的所有元素？

> ID：11401667
> 
> 赞同：5
> 
> 时间：2012-07-09T19:22:11.480
> 
> 标签：arrays, bash, for-loop

给定以下脚本：

```
#!/bin/bash

asteriskFiles=("sip.conf" "extensions.conf")

for asteriskFile in $asteriskFiles
do
    # backup current configuration file
    cp somepath/${asteriskFile} test/
    echo "test"
done 
```

这给了我一次输出“测试”，所以循环只运行一次而不是两次（星号文件数组中的两个条目）。我究竟做错了什么？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T19:24:08.783

插图：

```
$ asteriskFiles=("sip.conf" "extensions.conf")
$ echo $asteriskFiles # is equivalent to echo ${asteriskFiles[0]}
sip.conf
$ echo "${asteriskFiles[@]}"
sip.conf extensions.conf 
```

请注意，引号很重要。`echo ${asteriskFiles[@]}`似乎可行，但是如果您的任何文件中包含空格，bash 会在空格上进行单词拆分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:31:51.730

像这样写循环的开头

```
for asteriskFile in "${asteriskFiles[@]}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T19:31:54.163

### 问题

*asteriskFiles*变量包含一个数组。如果你像标量一样取消引用它，你只会得到数组的第一个元素。

### 解决方案

您想使用正确的[shell 参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)来访问所有下标元素。例如：

```
$ echo "${asteriskFiles[@]}"
sip.conf extensions.conf 
```

@ 下标（正确引用时）将扩展为数组中正确标记的元素，然后您的 for 循环将能够对其进行迭代。

# c# - 为 Nullable<> *and* 引用类型实现一元绑定

> ID：11401671
> 
> 赞同：0
> 
> 时间：2012-07-09T19:22:27.193
> 
> 标签：c#, extension-methods, nullable, monads

我有这个功能：

```
public static U? IfNotNull<T, U>(this T? self, Func<T, U?> func)
    where T : struct
    where U : struct
{
    return (self.HasValue) ? func(self.Value) : null;
} 
```

例子：

```
int? maybe = 42;
maybe.IfNotNull(n=>2*n); // 84

maybe = null;
maybe.IfNotNull(n=>2*n); // null 
```

我希望它适用于隐式可为空的引用类型以及显式`Nullable<>`类型。此实现将起作用：

```
public static U IfNotNull<T, U>(this T? self, Func<T, U> func)
    where T : struct
    where U : class
{
    return (self.HasValue) ? func(self.Value) : null;
} 
```

但是，重载决议当然不考虑类型约束，所以你不能同时拥有两者。有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:26:55.407

> 但是当然重载决议不看类型约束

嗯，它确实......但不是方法本身的类型约束。它着眼于*参数*类型的类型约束。

在 C# 4（它有可选参数）中，你*可以*这样做......但我*真的*建议你不要：

```
public class MustBeStruct<T> where T : struct {}
public class MustBeClass<T> where T : class {}

public static U? IfNotNull<T, U>(this T? self, Func<T, U?> func,
                       MustBeStruct<U> ignored = default(MustBeStruct<U>))
    where T : struct
    where U : struct
{
    return (self.HasValue) ? func(self.Value) : null;
}

public static U IfNotNull<T, U>(this T? self, Func<T, U> func,
                                MustBeClass<U> ignored = null)
    where T : struct
    where U : class
{
    return (self.HasValue) ? func(self.Value) : null;
} 
```

请参阅[此博客文章](http://msmvps.com/blogs/jon_skeet/archive/2010/11/02/evil-code-overload-resolution-workaround.aspx)，了解有关这种可怕的骇客攻击的更多详细信息。

就我个人而言，我可能只是以不同的方式命名这两种方法，这样重载解析就不需要那么辛苦了——你的代码的读者也不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:56:06.943

所以我最终得到了这个：

```
public static U IfNotNull<T, U>(this T self, Func<T, U> func)
    where U : class
{
    return (self != null)
        ? func(self)
        : (U)null;
}

public static U? IfNotNull<T, U>(this T self, Func<T, U?> func)
    where U : struct
{
    return (self != null)
        ? (U?)func(self)
        : null;
} 
```

重载解析器似乎对此很满意。`Nullable<>`对于类型来说，这是一点点额外的工作：

```
object o = null;
o.IfNotNull(x => x.ToString());
o.IfNotNull(x => x.GetHashCode() as int?);

int? i = null;
i.IfNotNull(x => Math.Abs(x.Value).ToString());
i.IfNotNull(x => Math.Abs(x.Value) as int?); 
```

# javascript - 从javascript调用jsp方法

> ID：11401674
> 
> 赞同：3
> 
> 时间：2012-07-09T19:22:38.033
> 
> 标签：javascript, jquery, jsp

我在jsp页面中使用这样的方法，页面以new.jsp的名称保存

```
<%!
    public void createXml(String graph) throws Exception
    {
        try
        {
            String str="dinesh"

            DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = builderFactory.newDocumentBuilder();
            Document doc = docBuilder.newDocument();
        }

        catch(Exception e)
        {
            System.out.println(e);
        }
    }
%> 
```

如果我这样称呼这个页面

```
<form method="post" action="new.jsp"> 
```

但是，我只想使用 javascript 或 jquery 编码来调用 createXml 的这个方法，因为我要在 new.jsp 中添加各种方法。任何人都可以帮助这个调用方法而不调用整个jsp页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:29:50.123

您正在寻找的是如何创建 ajax 请求。您可以不[使用 jquery](https://stackoverflow.com/a/8567149/1081941)或使用 jQuery 轻松完成：

```
$.post('new.jsp',{ param1: 'param1value', param2: 'param2value'},function(data){
    if(data){
        console.log(data); // response from your server
    }
  }); 
```

[jQuery 文档](http://api.jquery.com/jQuery.post/)中有更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:21:40.117

这里用这个

```
$.post("new.jsp", { name: "John", time: "2pm" },
function(data){
alert("Data Loaded: " + data);}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:31:57.370

这将帮助您组合 ajax jquery jsp

[http://www.cs.wcupa.edu/~rkline/Java/ajax.html](http://www.cs.wcupa.edu/~rkline/Java/ajax.html)

看一看

检查 **AJAX HTML 数据传输**

```
$(function() {
  $("#button").click(function() {
    $.ajax({
      type: "GET",
      url: "handler/book_table.jsp",
      data: { id: $("#sel").val() },
      success: function(data) {
        $("#out").html( data )
      }
    })
  })
}) 
```

# package - .dtsconfig 文件位置

> ID：11401676
> 
> 赞同：0
> 
> 时间：2012-07-09T19:22:38.500
> 
> 标签：package, scheduled-tasks, config, ssis

我正在尝试用修改后的相同 .dtsx 文件替换运行 .dtsx 文件的计划作业。

我想使用与旧包相同的 .dtsxonfig 文件，但我不知道它的位置。如何找到配置文件的位置？如何确保新包将引用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:32:46.397

如果当前 sql 代理作业为配置提供了显式路径，则作业步骤将列出该路径（从命令行选项卡获取详细信息）。

否则，请查看包装内部。SSIS，包配置...并查找配置类型`XML configuration file`

## 更新

在您的控制流中，右键单击背景并在上下文相关菜单中，选择`Package Configurations...`如果他们已打开配置，我希望选中“启用包配置”复选框，并且该部分下面的部分不会灰显。

使用 XML 配置，您可以获得两个选项。第一个（示例）是所谓的直接配置。您可以看到配置字符串指定了程序包运行时程序包将检查的磁盘上的特定位置。第二个 (XmlEnv) 选项演示了间接配置。这通过在我的示例中使用环境变量 SSIS_CONFIG 来确定 .dtsConfig 文件的位置来工作

![在此处输入图像描述](../Images/383c16381b4b4ee2867d811a0b64f337.png)

如果您没有看到包配置部分中列出的任何内容，那么您可以假设他们正在运行时应用配置。有几种不同的方法可以做到这一点，所以我会要求您的 DBA 提供特定代理的集成服务工作步骤的详细信息。

# hadoop - Mapper 或 Reducer 任务中未处理的异常会使任务失败？

> ID：11401678
> 
> 赞同：0
> 
> 时间：2012-07-09T19:22:46.710
> 
> 标签：hadoop, mapreduce

我想知道映射器任务（或减速器任务）中未处理的异常是否会使任务失败，或者只有时间的特定输入对会被忽略？我猜是前者，但不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:32:19.180

这取决于错误。无论哪种方式，我总是强调用 try-catch 块包装 map 和 reduce 逻辑。出现错误时，我会增加一个名称源自异常类名称的计数器。这不仅可以保护 hadoop 的其余部分免受逻辑错误的影响，而且可以让您仅通过查看日志就知道出了多少问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:32:02.557

如果异常没有重复发生（即重试将成功），那么它将使任务失败但任务将被重试（或并行运行的推测执行可能会继续）。如果异常总是发生（例如输入数据错误），那么重试将继续失败，最终整个作业将失败。

# .net - 具有不同皮肤或主题的多个 RadTileViewItem？

> ID：11401679
> 
> 赞同：1
> 
> 时间：2012-07-09T19:22:49.017
> 
> 标签：.net, wpf, telerik, themes

是否可以在同一个 RadTileView 中有多个具有不同皮肤的 RadTileViewItem？

注意：应用程序通过 VB.NET 中的说明“提交”到大型 Metro Skin 类型：

```
 StyleManager.ApplicationTheme = New MetroTheme
     RadSpellChecker.WindowSettings.Theme = StyleManager.ApplicationTheme 
```

在此先感谢您给我的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T17:02:16.337

您可以将样式应用于**RadTileViewItems**对象并让它们共享相同的样式。但是，如果您想将不同的样式应用于特定的，您所能做的就是更改该 RadTileViewItem 的某些与 UI 相关的属性（例如 HeaderStyle **）**。请参阅[文档](http://www.telerik.com/help/silverlight/allmembers_t_telerik_windows_controls_radtileviewitem.html)完整的属性列表。

此外，Telerik 论坛上的[这个节点可能会有所帮助。](http://www.telerik.com/forums/604424-radtileviewitem-style)

# cocoa - 如何获取 Quartz 用来描边 NSBezierPath 的路径

> ID：11401681
> 
> 赞同：3
> 
> 时间：2012-07-09T19:22:56.360
> 
> 标签：cocoa, cgpath, nsbezierpath

![虚线](../Images/f1193c5c5693a07525347df77e6e3af3.png)

我正在使用此代码用宽的黑色虚线描边 NSBezierPath。

（`c`并且`strForBezier`在其他地方定义）

```
NSGlyph glyph;
for(n = 0; n < len; n++) {
    glyph = [font glyphWithName: [strForBezier substringWithRange:NSMakeRange(n, 1)]];
    [path appendBezierPathWithGlyph: glyph inFont: font];
}

CGFloat pattern2[4]; pattern2[0]=5*c; pattern2[1]=2*c; pattern2[2]=2*c; pattern2[3]=2*c;
[path setLineDash:pattern2 count:4 phase:0];

[path setLineWidth:c];
[path stroke];
[[NSColor blueColor] set ];
[path fill]; 
```

我怎样才能得到黑色的 NSBezierPath ？我假设 NSBezierPath 已构建并填充以描边初始曲线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:07:24.100

您可以通过划线和抚摸现有路径来创建路径，但这需要使用`CGPathRef`而不是`NSBezierPath`.

```
CGMutablePathRef path0 = CGPathCreateMutable();
CGAffineTransform transform = CGAffineTransformMakeTranslation(20, 20);
// initial position is {20, 20}

CGGlyph glyph;
for(n = 0; n < len; n++)
{
    glyph = [font glyphWithName: [strForBezier substringWithRange:NSMakeRange(n, 1)]];
    CGPathRef glyphPath = CTFontCreatePathForGlyph((__bridge CTFontRef) font, glyph, NULL);
    CGPathAddPath(path0, &transform, glyphPath);
    CGPathRelease(glyphPath);

    // append the glyph advance to the transform
    CGSize advance;
    CTFontGetAdvancesForGlyphs((__bridge CTFontRef) font, kCTFontDefaultOrientation, &glyph, &advance, 1);
    transform.tx += advance.width;
    transform.ty += advance.height;
}

CGFloat pattern2[4]; pattern2[0]=5*c; pattern2[1]=2*c; pattern2[2]=2*c; pattern2[3]=2*c;
CGPathRef path1 = CGPathCreateCopyByDashingPath(path0, NULL, 0, pattern2, 4);
CGPathRef path2 = CGPathCreateCopyByStrokingPath(path1, NULL, c, kCGLineCapButt, kCGLineJoinMiter, CGFLOAT_MAX);

CGContextRef context = [NSGraphicsContext currentContext].graphicsPort;
CGContextAddPath(context, path2);
CGContextDrawPath(context, kCGPathFill);

CGPathRelease(path0);
CGPathRelease(path1);
CGPathRelease(path2); 
```

如果您对 不满意`CGPathRef`，您可以创建 a`NSBezierPath`然后使用 Apple 文档[Building a CGPathRef From a NSBezierPath Object](https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CocoaDrawingGuide/Paths/Paths.html#//apple_ref/doc/uid/TP40003290-CH206-SW2)`CGPathRef`中描述的方法将其转换为 a （也可以反过来）。

# jquery - SVG图像比例？对于移动应用

> ID：11401691
> 
> 赞同：1
> 
> 时间：2012-07-09T19:23:43.320
> 
> 标签：jquery, image, jquery-mobile, svg, cross-browser

我阅读了很多资源，但似乎无法让 SVG 图像适合浏览器窗口。

有人告诉我，如果我必须在适合现代移动浏览器的移动应用程序中使用图像，我必须在 html5 页面中使用 SVG 图像。

我似乎无法让 SVG 图像工作！我从 illustrator 中保存它，然后以 100% 宽度的 div 嵌入到 html5 页面中。

这样做的最佳方法是什么？谢谢你的帮助..

顺便说一句，我正在使用 Jquery mobile/HTML5/CSS3

```
<embed src="header.svg" type="image/svg+xml" codebase="http://www.adobe.com/svg/viewer/install" /> 
```

当我希望它适合设备尺寸时，我应该如何在“viewBox”中指定某个宽度和高度？我没有具体尺寸

```
 <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 15.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1 Basic//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-basic.dtd">
<svg version="1.1" baseProfile="basic" id="Layer_1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="253px" height="60px" viewBox="0 0 253 60" xml:space="preserve">
<g>
    <g>
        <defs>............ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:39:29.553

如果您的观众正在使用带有 HTML 5 解析器（[现在得到广泛支持](http://caniuse.com/svg-html5)）的浏览器，那么您不需要任何直接在 svg 标记中的 xml 内容。您不需要对象或嵌入标签标签。在这一点上，那是老派。而且您*当然*不需要 iFrame。另外，为了澄清一点，SVG 本身与 jQuery 无关（事实上，jquery 与 svg 元素的关系非常糟糕）。只需确保您使用的是 html5 文档类型，并编写如下内容：

```
<svg id="mycoolgraphic" viewBox="0 0 253 60" >
<g>
    <g>
        <defs>............
    </g>
</g>
</svg> 
```

确保所有标签都已关闭，并且作为 xml 有效。不要缩进或添加一大堆间距，这只会创建空文本节点。把这一切都丑陋不堪，弄得一团糟。它使以后的任何 javascript 工作变得更加容易。如果您正在使用 illustrator（这很好），您可能想要进入并清除主 svg 标记中的一些 xml 声明。如果您希望元素具有响应性，请忽略任何明确的高度和宽度。您可以通过普通的 CSS 声明来控制高度和宽度：

```
 #mycoolgraphic { height: 10em;width: 10em;} 
```

做响应式 svg 的主要技巧是设置`preserveAspectRatio`属性。这是您需要添加的内容。（从 Illustrator 导出的图形不会包含任何`preserveAspectRatio`.）该属性控制 svg 内容（*viewbox*）在 svg 元素（ svg *viewport*）中的缩放方式。视图框按比例固定。当您在 illustrator 中创建艺术作品时，它是边界矩形。除非您非常确定自己知道自己在做什么，否则不要乱用它。然而，包含视图框的 svg 元素可以像任何 html 元素一样调整大小，并且 preserveAspectRatio 属性描述了两者之间的关系。关于 preserveAspectRatio的[MDN](https://developer.mozilla.org/en/SVG/Attribute/preserveAspectRatio)文章很好。[规格](http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute)_在这一点上也令人惊讶地可读。

希望这可以帮助！

# python - 如何将另一个列表中的列表的值用作Python中函数的参数

> ID：11401692
> 
> 赞同：2
> 
> 时间：2012-07-09T19:23:52.050
> 
> 标签：python, list, function, arguments

我对 Python 很陌生。我有一个`DISTANCE(lat1, long1, lat2, long2)`计算两点之间距离的函数。

然后我有一个名为 的列表`POINTS`，其中每个值都是另一个包含这四个值的列表。

我想获得`DISTANCE`里面所有值的函数结果的总和`POINTS`。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:27:04.273

```
sum(DISTANCE(*p) for p in POINTS) 
```

这`*`是[Unpacking Argument Lists](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)的语法，也称为 splat 运算符。这会将可迭代的内容作为位置参数传递给函数，因此如果`p`是`[1, 2, 3, 4]`,`DISTANCE(*p)`将与 相同`DISTANCE(1, 2, 3, 4)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T19:25:54.423

怎么样：

```
totalDistance = sum(DISTANCE(lat1, long1, lat2, long2) for (lat1, long1, lat2, long2) in POINTS) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T19:29:15.867

```
sum([DISTANCE(*args) for args in POINTS]) 
```

这个单行代码的作用是在 上使用列表推导`POINTS`，将其中的每个项目作为列表应用到`DISTANCE`，如下所示：

```
args = [1, 2, 3, 4]
DISTANCE(*args) == DISTANCE(1, 2, 3, 4) 
```

调用`sum`接受一个列表本身并返回其中所有项目的总和。

一个建议：用所有小写字母命名你的函数。 [PEP 8](http://www.python.org/dev/peps/pep-0008/)有很多很好的风格建议来制作可读的 Python 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T19:30:07.173

`for-in`如果您是 python 新手，请使用循环：

```
result=[]
for item in POINTS:
    res=DISTANCE(*item)  
    result.append(res)
print(sum(result)) 
```

如果你对`*`这里的内容感到困惑，你应该阅读[这个](https://stackoverflow.com/a/11315061/846892)

# php - PHP错误类内函数内类..等待什么？丢失的

> ID：11401693
> 
> 赞同：2
> 
> 时间：2012-07-09T19:23:56.667
> 
> 标签：php, mysql

> **可能重复：**
> [致命错误：在非对象上调用成员函数 query()](https://stackoverflow.com/questions/7258875/fatal-error-call-to-a-member-function-query-on-a-non-object-in)

我有一个类文件，我们称它为“东西”

```
Stuff.class 
```

里面有一堂课

```
class  Stuff { 
```

在那里我有一个公共静态函数

```
 public static function morestuff() {

} 
```

在里面我需要调用另一个函数进行查询

```
$q="Select from contacts where id =". $this->$db->escapeVal($ID)"."; 
```

但我得到错误。

```
$q="Select from contacts where id =". escapeVal($ID)"."; 
```

退货

```
Call to undefined function escapeVal()

$q="Select from contacts where id =". $db->escapeVal($ID)"."; 
```

退货

```
Call to a member function escapeVal() on a non-object

$q="Select from contacts where id =". $this->$db->escapeVal($ID)"."; 
```

退货

```
Using $this when not in object context 
```

那我放什么呢？

编辑：

同一文件中的类似函数具有以下代码

```
'id' = '" . $this->db->escapeVal($this->_Id) . "' 
```

但是，当我尝试在我的 mysql 查询中使用此代码时，我收到以下错误

```
Using $this when not in object context 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:38:16.913

```
$Stuff->db->escapeVal($id) 
```

开始工作。很高兴我让它工作，非常感谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:38:41.573

您不了解 OOP 的概念。`$this`是一个引用当前对象（或**此对象**）的变量。意义：

```
class Test {
    public function __construct() { //Called when object is instantiated
        var_dump($this);
    }
}
$test = new Test(); 
```

你会得到类似的东西

```
object(Test)#1 (0) { } 
```

您不能`$this`在类方法之外使用。它只是不那样工作。

关于您遇到的错误，请尝试找出数据库连接存储在哪里。该连接应该传递给**对象**以存储为字段，或者直接传递给**方法**以在内部使用它。

编程不是复制/粘贴有效的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:39:08.427

因为您的函数是静态的，所以变量`$this`不会存在于其中。

要解决您的问题，有两种解决方案：

1.  制作`$db`一个静态变量，这意味着它在每个实例中都是相同的。
2.  从函数中删除`static`关键字`morestuff()`。在这种情况下，您需要创建该类的实例才能调用`morestuff()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T19:27:04.653

我怀疑这`$db`是一个全局变量，所以试试

```
public static function morestuff() {
      global $db;

      $q="Select from contacts where id =". $db->escapeVal($ID);

} 
```

如果函数在同一个类中并且也是静态的，你会这样称呼它

```
self::escapeVal($ID); 
```

# java - a4j:commandButton 总是执行表单，即使给定了执行 ID

> ID：11401698
> 
> 赞同：1
> 
> 时间：2012-07-09T19:23:59.357
> 
> 标签：java, jsf, richfaces

我有一个`a4j:commandLink`应该`a4j:outputPanel`在点击时执行的。然而，即使我在执行标签中给出了 ID，它也会在点击时执行表单。

```
<a4j:commandLink id="more_message_button" value="Load More Comments"
    action="#{feedbackAction.setFeedbackIdForExpansion(unitfeedback.feedbackId)}"
    execute="expandedList,more_message_button" href="javascript:void(0)"
    limitRender="true" render="expandedList,more_message_button">
</a4j:commandLink>`
<a4j:outputPanel layout="block" id="expandedList">
    <a4j:repeat value="#{feedbackAction.getCommentsForNextHop(unitfeedback)}"
        var="unitComment" rowKeyVar="idx">
    .
    .
    .
</a4j:outputPanel> 
```

对此有任何帮助以覆盖默认行为，或者我在这里遗漏了什么

问候， 南迪什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:33:01.167

才知道原因：

1) 如果命令按钮在嵌套的a4:repeats 中并且引用了外层循环的实例变量，点击时会提交表单解析值。

2) 现在我完全不再使用动作，而是使用 a4 java 脚本函数来异步调用所需的动作

# mysql - 为 MySQL 提供一个手动输入的行列表以左连接？

> ID：11401699
> 
> 赞同：0
> 
> 时间：2012-07-09T19:24:01.553
> 
> 标签：mysql

我的 Google-Fu 在这方面很弱，所以也许你们都可以帮忙。

如果要选择多个列，可以执行...

`SELECT 'something' as userName, 'fooBar' as typicalSaying`

你会得到：

```
+----------------+-----------------+
|    userName    |   typicalSaying |
+----------------+-----------------+
|   something    |    fooBar       |
+----------------+-----------------+ 
```

但是，如何对行进行上述操作？

例如：

```
SELECT someLine, effy.text from table
LEFT JOIN (SELECT 'a' as text UNION 'b' UNION 'c') as effy 
```

**编辑：** 要得到像..

```
+----------------+--------------+
|    someLine    |   effy.text  |
+----------------+--------------+
|   entryA       |    a         |
|   entryA       |    b         |
|   entryA       |    c         |
+----------------+--------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:29:59.617

你几乎在那里：

```
SELECT someLine, effy.text
FROM table
LEFT JOIN (
  SELECT 'a' as text
  UNION ALL
  SELECT 'b'
  UNION ALL
  SELECT 'c'
) as effy 
```

# php - PHP Zip Archive - open 或 extractTo 不起作用

> ID：11401706
> 
> 赞同：6
> 
> 时间：2012-07-09T19:24:17.983
> 
> 标签：php, zip

我完全无法解释为什么这不起作用。帮助！

```
$archive = "x.zip";
$zip = new ZipArchive();
$res = $zip->open($archive);

if ($res === 'TRUE') {
    $unzip_success= $zip->extractTo('/temp/', "inscriptions.txt")

    $zip->close();
} 
```

*   目标目录“temp”是“0777”权限
*   根据 PHP.net 文档的要求，从 $res 获得的代码是“11”而不是“TRUE”
*   注意：必须输入 $archive 的完整 url 和 extractTo 的第一个参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:01:38.613

if nothing works then check if your server is linux. if its linux you can run unzip command to unzip your file via php's system/exec function. i.e

```
system("unzip archive.zip"); 
```

to extract specific file you can check man docs for unzip. many times due to server parameters zip library doesn't work as expected in that cases i switch back to linux commands.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-05T06:23:58.383

我遇到了同样的问题，我已经解决了这个问题:) `$_SERVER['DOCUMENT_ROOT']`用于 url。我的代码（codeigniter）：

```
$this->load->library('unzip');
$file = $this->input->GET('file');
$this->unzip->extract($_SERVER['DOCUMENT_ROOT'].'/TRAS/application/uploads/' .    $file,$_SERVER['DOCUMENT_ROOT'].'/TRAS/application/views/templates/' . $file); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T19:42:38.280

问题是您正在引用`TRUE`，这是一个关键字，应该不带单引号。[另外，您可以在使用locateName](http://php.net/ziparchive.locatename)提取之前检查该文件是否存在于 zip 存档中：

```
$archive = "x.zip";
$zip = new ZipArchive();
$res = $zip->open($archive);

if ($res === true && $zip->locateName('inscriptions.txt') !== false) {
    $unzip_success= $zip->extractTo('/tmp/', "inscriptions.txt");

    $zip->close();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-18T20:20:11.997

ZipArcive::extractTo 区分大小写。如果要提取的文件名与压缩文件名不完全一致，则该方法返回 false。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T19:49:43.410

如果`$res`等于 11，则表示`ZipArchive`无法打开指定的文件。

要对此进行测试：

```
$archive = "x.zip";
$zip = new ZipArchive();
$res = $zip->open($archive);

if($res == ZipArchive::ER_OPEN){
    echo "Unable to open $archive\n";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-19T07:46:38.240

我遇到了同样的问题，但是我可以打开 zip 文件，`true`打开后它会返回。

我的问题是我在`$zip->extractTo()`.

删除zip文件中以中文（非英语）命名的文件后，我终于成功了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-11T06:10:42.427

添加文档根目录也对我有用。这是我的代码

```
$zip = new ZipArchive;
        if ($zip->open($_SERVER['DOCUMENT_ROOT'].'/'.$folder.$file_path) === TRUE) {
            $zip->extractTo($_SERVER['DOCUMENT_ROOT'].'/$folder');
            $zip->close();
            echo 'ok';
        } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-12T14:45:16.197

我在 Windows 10 上遇到了同样的问题。我发现的唯一解决方案是尝试 extractTo 两次，即使 open() 成功：

```
$zip = new ZipArchive;
if ($open === true) {
    $result = $zip->extractTo($destination);
    if ($result === false) {
        $result = $zip->extractTo($destination);
    }
    $zip->close();
} 
```

第二个 extractTo() 有效（没有干预操作）的事实似乎表明存档或目标目录没有任何问题。

# php - 确定 $_POST 的来源

> ID：11401710
> 
> 赞同：3
> 
> 时间：2012-07-09T19:24:44.120
> 
> 标签：php

有没有一种简单的方法可以在 PHP 中找出 post 变量的来源？

### example.com/formone.php 上的表格

```
<form method="post" action="test.php">
<input name="myusername"type="text">
<input name="mypassword" type="password">
<input type="submit">
</form> 
```

### example.com/formtwo.php 上的表格

```
<form method="post" action="test.php">
<input name="myusername"type="text">
<input name="mypassword" type="password">
<input type="submit">
</form> 
```

我知道我可以使用隐藏输入，但我想知道 PHP 是否有方法来测试 POST 的来源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:29:20.937

虽然您可能会使用 HTTP_REFERER 服务器变量，[但它不是很可靠](https://stackoverflow.com/a/166005/1028949)。您最好的选择是使用隐藏字段。

另一种选择是将您的 submit 切换`input`为 submit `button`。这样你就可以传递一个值，保留按钮的标签，并在你的`test.php`页面内测试它：

```
<button name="submit" type="submit" value="form1">Submit</button> 
```

然后在您的 PHP 文件中测试：

```
if( $_POST['submit'] == "form1" )
    // do something 
```

# wpf - WPF 确保转换后的内容可见

> ID：11401712
> 
> 赞同：0
> 
> 时间：2012-07-09T19:24:45.693
> 
> 标签：wpf, transformation, bounding-box

WPF 是否提供自动将包含的内容转换为可见的控件？

我可以手动计算，但我宁愿使用现有的依赖属性。

我想向这个假设的控件添加内容，旋转内容，并让父级执行额外的转换以确保整个内容可见。

（类似于[旋转图像的最小可能边界框](https://stackoverflow.com/questions/4567644/smallest-possible-bounding-box-for-a-rotated-image)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:39:02.957

将整个内容放入[Viewbox](http://msdn.microsoft.com/en-us/library/ms617883)。

# c++ - 指向具有可变参数编号的函数的指针

> ID：11401713
> 
> 赞同：3
> 
> 时间：2012-07-09T19:24:49.473
> 
> 标签：c++, pointers

我已经宣布：

```
class aaa {
public:
    static std::queue<QPair<void (*)( ... ), int> > m_commands;
    static int bbb();
    static void ccc(...);
}; 
```

在 bbb() 方法中我写道：

```
int aaa::bbb() {
    m_commands.push( qMakePair( aaa::ccc, 0 ) );
} 
```

但它抱怨：

```
error C2664: 'void std::queue<_Ty>::push(QPair<T1,T2> &&)' : cannot convert parameter 1 from 'QPair<T1,T2>' to 'QPair<T1,T2> &&' 
```

为什么？当我有这样的功能时：

```
void reg( void ( *invoker )( ... ), int args  ) {
    m_commands.push( qMakePair( invoker, args ) );
} 
```

我可以通过这种方式轻松地将静态函数发送到上述函数：

```
reg( aaa::ccc, 0 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:40:32.523

`qMakePair( aaa::ccc, 0 )`是（大概）返回一个 type 的值`QPair<void (*)(), int>`，因为它不知道你想要一个 type 的值`QPair<void (*)( ... ), int>`。以所需的函数指针类型`qMakePair<void (*)( ... ), int>( aaa::ccc, 0 )`显式调用它。`reinterpret_cast` `aaa::ccc`

更不用说这是（几乎可以肯定）*非法*的，因为`aaa::ccc`没有正确的签名并且不能通过您正在使用的函数指针类型调用。

# c++ - 为什么整数在 NDS 上的处理速度比字节快？

> ID：11401717
> 
> 赞同：6
> 
> 时间：2012-07-09T19:25:09.920
> 
> 标签：c++, c, performance, memory-management, hardware

我注意到当我用整数替换所有字节实例时，我的 nds 应用程序工作得更快一些。所有在线示例都尽可能放置 u8/u16 实例。为什么会这样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T19:28:26.037

Nintendo DS 使用的主处理器是 ARM9，一个 32 位处理器。

**参考**：[http ://en.wikipedia.org/wiki/ARM9](http://en.wikipedia.org/wiki/ARM9)

                    ![](../Images/5e3cadca857cfc9484c117a40b507ca7.png)

通常，CPU 将以[字长](http://en.wikipedia.org/wiki/Word_%28computer_architecture%29#Word_size_choice)（在本例中为 32 位）执行操作。根据您的操作，必须将字节转换为整数或反之亦然可能会给处理器带来额外的压力。这种转换以及可能缺少对 32 位整数以外的值的指令可能会导致速度不足。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T19:42:26.360

作为 Daniel Li 所说的补充，ARM 平台上的内存访问必须是字对齐的，即内存获取必须是 32 位的倍数。从内存中获取字节变量意味着获取包含相关字节的整个字，并执行所需的按位操作以将其放入处理器寄存器的最低有效位。

这些额外的指令由编译器自动发出，因为它知道变量的实际对齐方式。

# html - 如何在没有 Javascript 的情况下实现 HTML/CSS 中内容背景背后的多块页面背景？

> ID：11401718
> 
> 赞同：0
> 
> 时间：2012-07-09T19:25:11.327
> 
> 标签：html, css, background

我在实现这个设计时遇到了麻烦，我被赋予了 HTML/CSS。这是.psd：[http ://www.sendspace.com/file/10wuld](http://www.sendspace.com/file/10wuld)

这是到目前为止的代码：http: [//jsfiddle.net/wezW4/](http://jsfiddle.net/wezW4/)

以下是一些视觉笔记： [http ://screencast.com/t/FMq6JK5weI](http://screencast.com/t/FMq6JK5weI)

我现在在使用位置：相对于#content-background 的地方被卡住了，在我定位它之后它留下了一个很大的空白空间。一位朋友建议在页面背景元素上使用绝对定位来处理它，但没有取得太大进展。

我目前的方法如何做到这一点？或者，如果我的方法是错误的，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:20:32.793

只需执行以下操作：

```
<html>
          <head>
                     <style>
                            #a, #b, #c {background-repeat:repeat-x;}
                            #a {background-image:url(http://dev.enhancetrade.com/prodetails/images/slider-background-5x5.jpg); background-position:center top;}
                            #c {background:white; width: 400px; margin: 0px auto;}
                            #b {background-image:url(http://dev.enhancetrade.com/prodetails/images/slider-background-5x5.jpg); background-position:center bottom;}
                     </style>
          </head>
          <body>
                     <div id="a">
                     <div id="b">
                     <div id="c">
                                adslfijaoifje
                                adslfijaoifje
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                                <p>asdjfoiajoiafeoi</p>
                     </div>
                     </div>
                     </div>
          </body>
</html> 
```

# c++ - 是否可以在不使用 pmap 或 wdb 的情况下确定 HPUX PA-RISC 段故障的原因？

> ID：11401719
> 
> 赞同：0
> 
> 时间：2012-07-09T19:25:11.550
> 
> 标签：c++, hp-ux

我们在使用 HPUX PARISC 编译器和链接器 ACC 编译的 C/C++ HPUX PA-RISC 应用程序 RELEASE 演示中遇到随机发生的分段错误，该程序加载使用 ACC 编译和链接的 HPUX PA_RISC RELEASE 共享对象 sl（即如此）。我们无权访问 pmap 或 HPUX wdb。所以我们使用的是惠普专有的调试器 adb。下面是我们如何使用 use adb：

```
$ adb
PA-32 adb ($h help $q quiit)
adb>!cp mdMUReadWriteExample a.out
!
adb>:r
a.out: running (process 10947)
segmentation violation
stopped at      1E3C:           STW             r3,1416(r1) 
```

在这一点上，违规指令似乎与上述汇编指令有关。我们的第一个问题是`1416`是十进制格式还是十六进制格式。

我们的第二个问题是程序计数器 1E3C 是否准确，可用于获取有关违规 C/C++ 源代码行的更多信息/

我们的第三个问题是假设`1416`是十进制格式，那么如下所示寄存器`1($r1)`包含`0x40015b90`。使用十六进制算术`1416`（以 10 为底（即 hex `0x588`））+`0x40015b90`等于`0x40016118`。接下来，我们使用 nm 来查找与`0x40016118`.

```
$ grep -n "4001611" /home/marc/acc3_pa_32bit/cameron_nm.txt
27808:40016118 ? static___soa_RSA_cpp_
27823:40016110 ? static___soa_cDateTime_cpp_ 
```

接下来我们修改我们的makefile，得到组合反汇编——C++源代码。但是，当我们搜索所有 50 个生成的 *.s 文件时，我们无法神秘地找到`static___soa_RSA_cpp_`. 我们是否在这里跳过了关键步骤？

```
adb>$r
pcoqh 0   1E3F
pcoqt 0   1E43
rp    0   0xC0209793

arg0 0  1         arg1 0   7F7F04FC  arg2 0   7F7F050 4   arg3 0   7F7F0540
sp   0  7F7F05D0  ret0 0   0         ret1 0   1           dp   0   40016390
r1   0  40015B90  r3   0   7F7F0000  r4   0   4001591 8   r5   0   3C
r6   0  20        r7   0   3E        r8   0   7F7F091 0   r9   0   40015918
r10  0  40031918  r11  0   1E800     r12  0   4001611 8   r13  0   400266A4
r14  0  3F        r15  0   3F        r16  0   3D          r17  0   3D
r18  0  3A        r19  0   7B03B764  r20  0   0xA98D4 00  r21  0   7F7F0550
r22  0  0         r31  0   1E2B      sar  0   23          sr0  0   0xA98D400
sr1  0  3848400   sr2  0   0         sr3  0   0           sr4  0   0xA98D400 
```

总之，我们正在尝试确定是否有可能找到导致此随机段错误的有问题的 C/C++ 源代码行。使用 Centos Linux 和 valgrind`--tool=memcheck`我们找不到任何缓冲区溢出。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:54:59.493

晚上好，我想出了如何使用 HPUX PA-RISC 获取分段错误堆栈跟踪。需要 4 个步骤 1) #include "unwind.h" #include "signal.h" 2) 定义一个 extern "C" U_STACK_TRACK(int) 函数原型 3) 在主函数中声明一个 SIGSEGV 处理程序：signal(SIGSEGV,U_STACK_TRACE ）。4) 在 makefile 中，链接到 libcl .Regards ，Frank Tzepu Chang

$ mdMUReadWriteExample (0) 0xc01fef60 _sigreturn [/usr/lib/libc.2] (1) 0xc2f27b90 _ *ct* _7CBigNumFv_2 + 0x88 [./libmdMatchup.sl] (2) 0xc2f3c83c RSADecrypt_ *FPCcN21Pc + 0x24 [./slmdMatch] ) 0xc2f314ec DecryptLicense* _9mdLicenseFPCcPc + 0x44 [./libmdMatchup.sl] ( 4) 0xc2f31280 DecryptDecodeTest_ *9mdLicenseFPCcT1 + 0x40 [./libmdMatchup.s l] ( 5) 0xc2f30c3c TestLicense* _9mdLicenseFPCc + 0xb4 [./libmdMatchup.sl] ( 6) 0xc2d783bc SetLicenseString_ *12cBatchDedupeFPCc + 0x5c [./libmdMatchup. sl] ( 7) 0xc2d6c908 设置许可证字符串*_13mdMUReadWriteFPCc + 0x90 [./libmdMatchup .sl] (8) 0x0000376c main + 0x68 [./mdMUReadWriteExample] (9) 0xc01409f8 _start + 0xa0 [/usr/lib/libc.2] (10) 0x00002008 $START$ + 0x178 /mdMUReadWriteExample] 分段错误（核心转储）

# image-processing - 实现着色图片效果

> ID：11401724
> 
> 赞同：0
> 
> 时间：2012-07-09T19:25:28.283
> 
> 标签：image-processing, opencv, computer-vision

我想在照片上实现着色效果，并寻求计算机视觉技术的帮助，因为我是这方面的新手。我从双边过滤器和最小过滤器开始。但我不知道下一步该做什么。我使用 opencv 和 python 进行原型设计。是否有任何模式可以帮助我实现这一目标？感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:47:01.953

可能的解决方案之一：

*   将图像转换为灰度
*   应用[Canny 边缘检测器](http://opencv.itseez.com/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)或[Sobel 滤波器](http://opencv.itseez.com/doc/tutorials/imgproc/imgtrans/sobel_derivatives/sobel_derivatives.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:47:06.160

您正在寻找的是“非真实感渲染”。以最简单的形式，它是 Astor 建议您的。但是这个领域有很多研究，从自动创建草图到复杂的卡通效果等等。

[这](http://www.mi.auckland.ac.nz/tech-reports/MItech-TR-65.pdf)是一篇关于这个主题的论文，还有一篇[在这里](http://users.cs.cf.ac.uk/Paul.Rosin/npr.html)，但你可以通过谷歌搜索找到更多`"Non photorealistic rendering"`

# java - Java - 泛型与强制转换对象

> ID：11401726
> 
> 赞同：3
> 
> 时间：2012-07-09T19:25:31.030
> 
> 标签：java, generics, casting, gson, type-inference

我有一堂课`Data<T>`

具有通用属性

```
private T value; 
```

有没有更好的方法来做以下事情？
即以不同的形式返回泛型类型？

```
public List<String> getValues() {
    if (value.getClass() != ArrayList.class)
        throw new Exception("Wrong Enum value '%s'", value);
    return (ArrayList<String>) value;
    //ugly
}

public String getStringValue() {
    if (value.getClass() != String.class)
        throw new Exception("Wrong value type '%s'", value);
    return (String) value;
    //ugly
}

public Float getFloatValue() {
    if (value.getClass() != Double.class)
        throw new Exception("Wrong value type '%s'", value);
    return (Float) value;
    //ugly
}

public Long getLongValue() {
    if (value.getClass() != Double.class)
        throw new Exception("Wrong value type '%s'", value);
    return (Long) value;
    //ugly
}
public T getValue() {
    return value;
} 
```

精度，我使用 Gson 作为反序列化器来获取一个列表，然后每个数据对象可以是异构
的也可以注册适配器以进行浮点和长检测，但它不会更快或更好

**编辑**：gson 无法检索多头：

任何一个：

```
 ((Long) d.getValue()) 
```

java.lang.Double 不能转换为 java.lang.Long

或者

```
Long.parseLong( d.getValue().toString()) 
```

java.lang.NumberFormatException：对于输入字符串：“212231.0”

我试图注册一个 LongAdpater

```
gsonBuilder.registerTypeAdapter(Long.class, new LongAdapter());

private static class LongAdapter implements 
    JsonSerializer<Long>, JsonDeserializer<Long> 
{

    @Override public Long deserialize(
            JsonElement json, 
            Type type,
            JsonDeserializationContext arg2) throws JsonParseException 
    {
        return json.getAsLong();
    }

    @Override
    public JsonElement serialize(Long l, Type arg1,
            JsonSerializationContext arg2) {
        return new JsonPrimitive(new Double(l));
    }
} 
```

java.lang.IllegalArgumentException：无法为类 java.lang.Long 注册类型适配器

**tsOverflow 的edit2**：

```
Data<Float> d1 = new Data<Float>( new Float(6.32));
List<String> l = new ArrayList<String>();
    l.add("fr");
    l.add("it");
    l.add("en");
Data<List<String>> d2 = new Data<List<String>>( l);
Data<Long> d3 = new Data<Long>(new Long(212231));

List<Data> data = new ArrayList<Data>();
    data.add(d1);
    data.add(d2);
    data.add(d3)

new Gson().toJson(data); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T20:11:39.027

泛型的重点是**不允许**一个类同时使用不同的类型。

泛型允许您*定义/限制对象**实例*使用的类型。

泛型背后的想法是消除强制转换的需要。

在你的类中使用泛型应该会产生如下结果：

```
Data<String> stringData = new Data<String>();
String someString = stringData.getValue();

Data<Long> longData = new Data<Long>();
Long someLong = longData.getValue();

Data<List<String>> listData = new Data<List<String>>();
List<String> someList = listData.getValue(); 
```

您应该使用*对象*和强制转换——**或者**——使用泛型来避免强制转换。

您似乎相信泛型允许在同一实例中进行异构类型。

这是不正确的。

如果您希望列表包含混合类型的包，那么泛型是不合适的。

* * *

还...

要从 double 创建 long，请使用[Double.longValue()](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#longValue%28%29)。

要从双精度数创建浮点数，请使用[Double.floatValue()](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#floatValue%28%29)。

我建议阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:39:50.927

The design looks suspicious to me, but to answer your actual question:

The case for Long-values looks wrong. Your snippet contains a c&p error

```
public Long getLongValue() {
    if (value.getClass() != Double.class) // <<- should be Long.class
        throw new Exception("Wrong value type '%s'", value);
    return (Long) value;
    //ugly
} 
```

thus it should read:

```
public Long getLongValue() {
    if (value.getClass() != Long.class)
        throw new Exception("Wrong value type '%s'", value);
    return (Long) value;
    //ugly
} 
```

However, in order to reduce code duplication, you could introduce a generic helper method

```
private T getValue() {
    return value;
}

private <V> V castValue(Class<V> type) {
  if (!type.isInstance(value)) {
    // exception handling
  }
  return type.cast(value);
}

public List<String> getValues() {
    return castValue(ArrayList.class);
}

public String getStringValue() {
    return castValue(String.class);
} 
```

If you decide to go for that approach, I'd recommend to de-generify the data class since it's irritating to have a type parameter if there is actually no constraint on the instance itself. I'd use Object instead for the field type:

```
private Object getValue() {
    return value;
}

private <V> V castValue(Class<V> type) {
  if (!type.isInstance(value)) {
    // exception handling
  }
  return type.cast(value);
}

public List<String> getValues() {
    return castValue(ArrayList.class);
}

public String getStringValue() {
    return castValue(String.class);
}
// .. more cases .. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:47:59.017

您可以询问“值”是否可分配给预期的类。

```
private T value;
.
.
.
public Object getValueAsObjectOfClass(Class<?> expectedClass) {
    if(!expectedClass.isAssignableFrom(value.getClass())) {
        // abort gracefully
    }
    return expectedClass.cast(value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T19:44:29.830

您可以直接将类型 T 用于简单的 getter，将[Class.cast](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)方法用于其他类型：

```
public class GenericDataTest
{
    private static class DataTest<T>
    {
        private T value;

        public DataTest(T value)
        {
            this.value = value;
        }

        public T getValue()
        {
            return value;
        }

        public Object getValueAsType(Class<?> type)
        {
            return type.cast(value);
        }
    }

    @Test
    public void testGeneric()
    {
        DataTest<String> stringTest = new DataTest<String>("Test");
        Assert.assertEquals("Test", stringTest.getValue());
        Assert.assertEquals("Test", stringTest.getValueAsType(String.class));

        DataTest<Double> doubleTest = new DataTest<Double>(1.0);
        Assert.assertEquals(1.0, doubleTest.getValue());
        Assert.assertEquals(1.0, doubleTest.getValueAsType(Double.class));
    }

    @Test(expected = ClassCastException.class)
    public void testClassCastFailure()
    {
        DataTest<String> stringTest = new DataTest<String>("Test");
        Assert.assertEquals("Test", stringTest.getValueAsType(Float.class));
    }
} 
```

# autoconf - 脚本中的 autoconf 替换路径

> ID：11401739
> 
> 赞同：0
> 
> 时间：2012-07-09T19:26:49.380
> 
> 标签：autoconf, automake, substitution

我有一个项目，其中有几个帮助脚本使用不同的命令行选项调用主可执行文件。现在，脚本假定可执行文件位于同一目录中，因此脚本中对可执行文件的调用看起来像`./my_program`. 然而，这不是很灵活。如果程序安装在`/usr/bin`目录中，而不是在当前目录中怎么办？

有没有办法使用 automake 或 autoconf 来生成这些脚本，并将对可执行文件的调用替换为`./my_program`or 或 just `my_program`，具体取决于可执行文件是否已安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:17:18.660

当然。*IMO 使用自动工具*最简单的解决方案是：

*   在找到程序路径的文件夹下创建新的*m4*宏`m4/`，并将其设置为变量。

    例如，您创建了一个宏：

    ```
    MY_PROGRAM_PATH_CHECK([action-if-found], [action-if-not-found]) 
    ```

    `MY_PROGRAM_PATH`如果找到路径，此宏将创建变量。

    *配置.ac*

    ```
    MY_PROGRAM_PATH_CHECK(,[AC_MSG_ERROR([my_program path not found, woot?])
    AC_SUBST(MY_PROGRAM_PATH)

    AC_CONFIG_FILES([src/script1.sh], [chmod +x src/script1.sh])
    AC_CONFIG_FILES([src/script2.sh], [chmod +x src/script2.sh]) 
    ```

*   将您的脚本转换为*.in*文件，因此会发生替换：

    *src/Makefile.am*

    ```
    bin_SCRIPTS = script1.sh script2.sh 
    ```

    *src/script1.sh*

    ```
    @MY_PROGRAM_PATH@/my_program --option1 
    ```

    *src/script2.sh*

    ```
    @MY_PROGRAM_PATH@/my_program --option2 
    ```

# c# - 在 SVN 存储库中存储 Visual C# 项目的约定

> ID：11401741
> 
> 赞同：4
> 
> 时间：2012-07-09T19:26:55.300
> 
> 标签：c#, svn, version-control, project

基本上我的问题是您将 C# 的**哪些**部分存储在存储库中？在我去年参加的一堂课中，有人告诉我，您永远不会将生成的文件存储在版本控制中（因此，如果您正在编写 c，请不要存储 .o/.exe 文件）。

但是使用 c 很容易，因为您只需保存 .c、.h 和 makefile，您只需签出 repo，运行 make 文件，一切正常。

但是对于 Visual Studio 中的 C# 项目，我在决定存储什么时遇到了一些问题。

如果我只存储 .cs 文件，则很难将它们添加到其他计算机上的项目中。我也应该存储项目文件吗？

我遇到的问题是我曾经只存储整个项目目录。但是当我将项目放在另一台计算机上时，它会抱怨temporaryKey是错误的（.pfx文件）......

那么我应该存储什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:31:13.713

他们按照我的方式进行操作-我存储了所有内容，除了：

*   `bin`和`obj`解决方案中每个项目的目录
*   `.user`和`.suo`文件 - 它们包含用户特定的项目和解决方案选项
*   Resharper 生成的文件（Resharper 是一个 Visual Studio 扩展，它在解决方案文件夹中创建一些文件）

基本上，经验法则是不存储特定于特定机器或由工具生成的任何内容（无论是编译器还是 Visual Studio 扩展——在我的例子中是 Resharper）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:30:05.023

该建议*不太*适合大多数 C# 项目的工作方式，尤其是 UI - Visual Studio 生成设计器文件，例如，*应该*签入哪个文件（否则，其他获取源代码将无法编译） .

一般来说，不要存储编译的产物——代码生成的程序集。

编译和运行不需要的项目（例如用户特定的设置文件）也不应签入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T19:33:28.923

我同意其他所有人的观点——忽略二进制文件、.suo 和 .user——但是我确实发现使用[AnkhSVN](http://ankhsvn.open.collab.net/)可以大大简化这一点，因为您直接从 VS 提交并且它可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T19:47:26.447

其他人似乎已经涵盖了大部分内容，但我想我会加两分钱。我使用以下全局忽略模式进行 C# 开发。这包括系统文件和不需要的解决方案文件。

*.o *.lo *.la *.al .libs *.so *.so.[0-9]* *.a *.pyc *.pyo *.rej 。*~ *~ #* # .#* .*.swp .DS_Store thumbs.db Thumbs.db *.bak *.class *.dll *.exe *.mine *.obj *.ncb *.lib *.log *.idb * .pdb *.ilk *.msi *.res *.pch *.suo *.exp *。*~ *.~* ~ *.* cvs CVS .CVS .cvs release Release debug Debug ignore Ignore obj Obj *.csproj.user *.user bin BIN

有关 svn 的全局与本地忽略模式的更多信息，请查看此处：

[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)

**一般经验法则**

切勿存储任何生成的输出或用户特定设置。此外，如果可能，请避免存储不必要的二进制文件，因为它们不能使用上下文合并。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T19:31:23.557

我存储了整个解决方案文件夹，但我为 *.user、*.suo 文件添加了例外。我也没有提交任何 bin 和 obj 文件夹。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T19:33:13.540

我们将所有内容存储在解决方案文件夹及其子文件夹中。但是我们通过添加这些排除项

```
`svn:ignore` = 
*.suo
*.ncb
*.user
_ReSharper.*
[Bb]in
[Oo]bj
[Dd]ebug
[Rr]elease 
```

参考
[svn:ignore](http://svnbook.red-bean.com/en/1.1/ch07s02.html)
[TortoiseSVN](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)

# jquery - ajax 调用后，fancybox 未附加到链接

> ID：11401746
> 
> 赞同：0
> 
> 时间：2012-07-09T19:27:06.227
> 
> 标签：jquery, fancybox

我使用fancybox 通过在链接中附上一张较小的照片来显示较大的照片。这工作正常。工具提示 jQuery 应用程序有一个小问题，这就是为什么我得到 var 'title_from_alt' 并用它设置 fancybox 标题。它不是那么相关。

好的，现在我正在通过 AJAX 调用检索页面。在部分方面，有与类“fancyboxfoto”的新链接。但是这些新添加的链接并没有附加花式框。

我读到了 .on 和 .live 等等，但他们似乎想要一个事件（如“点击”），但在下面的代码中我没有看到“点击”事件。该怎么办！？

```
jQuery(document).ready(function($){

//fancybox
var title_from_alt = $("a.fancyboxfoto").attr("alt");
$("a.fancyboxfoto").fancybox({
    'titlePosition'     : 'over',
    'onComplete'    :   function() {
        $("#fancybox-wrap").hover(function() {
            $("#fancybox-title").show();
        }, function() {
            $("#fancybox-title").hide();
        });
    },
    'overlayColor'      : '#000',
    'title'         : title_from_alt,
    'overlayOpacity'    : 0.9,
    'showCloseButton' : 'true',
    'autoScale' : 'true',
    'autoDimensions' : 'true'
});
}); 
```

HTML

```
<a class="fancyboxfoto" title=" Tirzo Martha, Shipwrecked, 2002 " href="/images/Shipwrecked.jpg">
  <img class="tiptip" vspace="12" hspace="12" align="left" title=" Tirzo Martha, Shipwrecked, 2002 " src="/images/Shipwrecked-kl.jpg">
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:31:51.427

在通过 AJAX 检索新的 DOM 元素后，您应该再次初始化 fancybox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:37:48.217

fancybox v1.3.x 不支持动态添加的元素。

您可以在此处找到[解决方法](https://stackoverflow.com/a/9084293/1055987)（包括示例）

顺便说一句，如果使用该方法，则无需“*在通过 AJAX 检索新的 DOM 元素后再次初始化 fancybox* ”

# sql - 将“WHERE”参数传递给 PostgreSQL 视图？

> ID：11401749
> 
> 赞同：64
> 
> 时间：2012-07-09T19:27:27.253
> 
> 标签：sql, postgresql, stored-procedures, view

我对我的 PostgreSQL 数据库有一个相当复杂的查询，它通过一系列嵌套子查询跨越 4 个表。然而，尽管外观和设置看起来有点棘手，但最终它将基于两个外部参数的匹配（两个字符串需要与不同表中的字段匹配）返回两列（来自同一个表，如果这有助于这种情况）。我对 PostgreSQL 中的数据库设计相当陌生，所以我知道这个看似神奇的东西叫做 Views 存在，它似乎可以帮助我，但也许不是。

有什么方法可以将我的复杂查询移动到视图中，并以某种方式将我需要匹配的两个值传递给它？这将大大简化我在前端的代码（通过将复杂性转移到数据库结构）。我可以创建一个包含我的静态示例查询的视图，它工作得很好，但是只适用于一对字符串值。我需要能够将它与各种不同的值一起使用。

因此，我的问题是：是否可以将参数传递给其他静态视图并使其变为“动态”？或者也许视图不是处理它的正确方法。如果还有其他更好的方法，我会全力以赴！

**编辑：**根据评论中的要求，这是我现在的查询：

```
SELECT   param_label, param_graphics_label
  FROM   parameters
 WHERE   param_id IN 
         (SELECT param_id 
            FROM parameter_links
           WHERE region_id = 
                 (SELECT region_id
                    FROM regions
                   WHERE region_label = '%PARAMETER 1%' AND model_id =
                         (SELECT model_id FROM models WHERE model_label = '%PARAMETER 2%')
                 )
         ) AND active = 'TRUE'
ORDER BY param_graphics_label; 
```

参数由上面的百分比符号设置。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-09T19:43:35.123

您可以使用集合返回函数：

```
create or replace function label_params(parm1 text, parm2 text)
  returns table (param_label text, param_graphics_label text)
as
$body$
  select ...
  WHERE region_label = $1 
     AND model_id = (SELECT model_id FROM models WHERE model_label = $2)
  ....
$body$
language sql; 
```

然后你可以这样做：

```
select *
from label_params('foo', 'bar') 
```

顺便说一句：你确定你想要：

```
AND model_id = (SELECT model_id FROM models WHERE model_label = $2) 
```

如果`model_label`不是唯一的（或主键），那么这最终会引发错误。你可能想要：

```
AND model_id IN (SELECT model_id FROM models WHERE model_label = $2) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-09T20:15:38.950

除了 @a_horse 已经清除的内容之外，您还可以通过使用[JOIN 语法](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)而不是嵌套子查询来简化您的 SQL。性能将相似，但语法更短且更易于管理。

```
CREATE OR REPLACE FUNCTION param_labels(_region_label text, _model_label text)
  RETURNS TABLE (param_label text, param_graphics_label text) AS
$func$
    SELECT p.param_label, p.param_graphics_label
    FROM   parameters      p 
    JOIN   parameter_links l USING (param_id)
    JOIN   regions         r USING (region_id)
    JOIN   models          m USING (model_id)
    WHERE  p.active
    AND    r.region_label = $1 
    AND    m.model_label = $2
    ORDER  BY p.param_graphics_label;
$func$ LANGUAGE sql; 
```

*   如果`model_label`不是唯一的或查询中的其他内容产生重复的行，您可能希望`SELECT DISTINCT p.param_graphics_label, p.param_label`使用匹配`ORDER BY`子句以获得最佳性能。或者使用`GROUP BY`从句。

*   `$1`从 Postgres 9.2 开始，您可以使用声明的参数名称来代替`$2`SQL 函数。（长期以来，PL/pgSQL 函数都可以使用）。

*   必须注意避免命名冲突。这就是为什么我习惯在声明中为参数名称添加前缀（这些在函数内部随处可见）并在正文中使用表限定列名称。

*   我简化`WHERE p.active = 'TRUE'`为`WHERE p.active`，因为该列 `active`很可能是类型`boolean`，而不是`text`。

*   `USING`仅当列名在 JOIN 左侧的所有表中都明确时才有效。否则，您必须使用更明确的语法：
    `ON l.param_id = p.param_id`

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-08-12T04:32:42.037

在大多数情况下，set-returning 函数是要走的路，但如果您想同时读取和写入 set，视图可能更合适。视图可以读取会话参数*：*

```
CREATE VIEW widget_sb AS
  SELECT * FROM widget
  WHERE column = cast(current_setting('mydomain.myparam') as int)

SET mydomain.myparam = 0
select * from widget_sb
[results]

SET mydomain.myparam = 1
select * from widget_sb
[distinct results] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T19:40:55.880

我认为您所说的“动态”视图是不可能的。

为什么不编写一个带有 2 个参数的存储过程呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-10T21:29:17.933

我将查询改写如下：

```
SELECT   p.param_label, p.param_graphics_label
  FROM   parameters p
where exists (
    select 1
    from parameter_links pl
    where pl.parameter_id = p.id
    and exists (select 1 from regions r where r.region_id = pl.region_id
) and p.active = 'TRUE'
order by p.param_graphics_label; 
```

假设您在各种 id 列上都有索引，则此查询应该比使用 IN 运算符快得多；这里的exists参数将只使用索引值，甚至不接触数据表，除了从参数表中获取最终数据。

# python - 字符串到二进制python

> ID：11401750
> 
> 赞同：1
> 
> 时间：2012-07-09T19:27:29.060
> 
> 标签：python, networking, byte

对于你们大多数人来说，这可能是一个愚蠢的问题，但我正面临这个问题；

我正在使用 scapy 在网络上捕获一个 mac 地址，我通过这种方式将此 mac 地址转换为“\x00\x21\x23\x24\x25”：

```
...
  b = p.sprintf("%Dot11.addr2%")
  print "Sending to this MAC Address",b
  #Here, the mac address looks like 00:00:00:00:00:00
  dstmac = str('\\x'+b.replace(':','\\x'))
  #Now, the mac address looks like this:
  "\x00\x00\x00\x00\x00\x00"
  sendp(dst=dstmac,blablablabla)
... 
```

当此脚本通过网络发送 mac 时，它会发送以十六进制编码的实际 \x（以及所有后续数字），而不是发送 00 00 00 00 00 00。

通常，您可以这样使用它，这很好："sendp(dst="\x00\x00\x00\x00\x00\x00",blablablabla)

我认为我在进行此字符串操作或编码时做错了。

对此的任何输入都会有所帮助！

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:31:15.950

该`\x`符号用于字符串文字。将字符串解码为十六进制。

```
>>> '123456789abc'.decode('hex')
'\x124Vx\x9a\xbc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:45:12.430

当你这样做时，`replace(':','\\x')`你并没有做你认为你正在做的事情。您将替换为不将数字转换为二进制值`:`的字符。 如果你做了一个你会得到`\x`
`print``dstmac``'\\x00\\x00\\x00\\x00\\x00\\x00'`

您可以通过执行以下操作来获得您正在寻找的效果

如另一个答案中所述，以获得您正在寻找的东西，您应该

`dstmac = b.replace(':','').decode('hex')`

这是删除`:`和解码字符串，就好像它是十六进制

# php - 漂亮的 URL 和动态变量

> ID：11401751
> 
> 赞同：0
> 
> 时间：2012-07-09T19:27:37.550
> 
> 标签：php, mod-rewrite

我正处于为我正在构建的 PHP 框架构建路由系统的概述阶段。

对于漂亮的 url，我需要使用 mod rewrite。我把那部分盖好了。但是说我想用如下网址制作一个页面：

www.domain.com/news/10(News-id)/

我希望这个动态变量（ This news id ）在重写时有一个名字。

我想要实现的是；

框架路由到新闻控制器，并将 10 作为参数传递为： $args = array ( 'news_id' => 10 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:32:25.630

您可以使用`$_SERVER`超级全局来检查请求的 URI。在您的示例中，`$_SERVER['REQUEST_URI']`将设置为：

```
/news/10/ 
```

然后，您可以从该字符串中获取请求的 news-id。

**更新**

```
// Use substr to ignore first forward slash
$request = explode('/', substr($_SERVER['REQUEST_URI'], 1)); 
$count = count($request);

// At this point, $request[0] should == 'news'
if($count > 1 && intval($request[1])) {
    // The second part of the request is an integer that is not 0
} else {
    if( $count == 1) {
        // This is a request for '/news'

    // The second part of the request is either not an integer or is 0
    } else if($request[1] == 'latest') {
        // Show latest news
    } else if($request[1] == 'oldest') {
        // Show oldest news
    } else if($request[1] == 'most-read') {
        // Show most read news
    }
} 
```

请参阅手册[条目](http://php.net/manual/en/reserved.variables.server.php)`$_SERVER`

# wordpress - 标签 + 集群 - 谷歌地图 (gmap3)

> ID：11401752
> 
> 赞同：0
> 
> 时间：2012-07-09T19:27:40.513
> 
> 标签：wordpress, maps, jquery-gmap3

再会。

我为谷歌地图使用 Gmap3 jQuery 插件，我试图让标记与标签一起工作，但是每次我添加标记时，标签（从示例标签中过滤）都不起作用。这是我正在处理的网站上的代码（使用 Wordpress）：

```
 $(function(){
    var data = [], 
        tmp = {}, 
        r, k,
        pubtypes = [],
        $dpts = $("#pubtype"),
    icons = {"Certifikované provozovny":'provozovna',"Tankovny":'tankovna'};

    $.each(villes, function(i, ville){
        data.push({
            lat: ville.lat,
            lng: ville.lng,
            tag: ville.pubtype,
            data: ville,

options: { icon: new google.maps.MarkerImage('<?php bloginfo( 'template_directory' ); ?>/gfx/pin-'+icons[ville.pubtype]+'.png')
                            }
        });
        tmp[ ville.pubtype ] = true;
    });

    for(r in tmp){
        pubtypes.push(r);
    }
    pubtypes = pubtypes.sort();

    for(k in pubtypes){
        $dpts.append('<input id="chk'+k+'" type="checkbox" checked><label for="chk'+k+'">'+pubtypes[k]+'</label><br />');
    }

    $('input', $dpts).change(function(){
        var pubtype = $('label[for='+$(this).attr('id')+']', $dpts).html(),
            checked = $(this).is(':checked'),
            map = $('#test1').gmap3('get'),
            markers;

        markers = $('#test1').gmap3({
            action:'get',
            name:'marker',
            all: true,
            tag:pubtype
        });

        $.each(markers, function(i, marker){
            marker.setMap( checked ? map : null);
        });

    });

    $('#test1').gmap3(
    { action:'init',
        options:{
          center:[49.743341,15.336227],
            zoom: 7,
            streetViewControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
      },{
        action:'addMarkers',
        radius:100,
        markers: data,
        maxZoom:13,
        radius:40,
        clusters:{
            // This style will be used for clusters with more than 0 markers
            0: {
                content: '<div class="cluster cluster-1">CLUSTER_COUNT</div>',
                width: 53,
                height: 52
            },
            // This style will be used for clusters with more than 20 markers
            20: {
                content: '<div class="cluster cluster-2">CLUSTER_COUNT</div>',
                width: 56,
                height: 55
            },
            // This style will be used for clusters with more than 50 markers
            50: {
                content: '<div class="cluster cluster-3">CLUSTER_COUNT</div>',
                width: 66,
                height: 65
            }
        },
        marker: {

            options: {
                //icon: new google.maps.MarkerImage('<?php bloginfo( 'template_directory' ); ?>/gfx/beer.png')
                //icon: new google.maps.MarkerImage('<?php bloginfo( 'template_directory' ); ?>/gfx/'+marker+'.png') 
            },            
            events:{  
                click: function(marker, event, data) { infoWindowOpen($this, marker, data) }
            }
        }
    });

}); 
```

感谢您的每一个小帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:26:43.967

我有同样的问题。我认为不可能结合标签和集群（现在..）我在 gmap3 论坛上找到了这个：

“不，您不能使用聚类功能生成的单个标记” [http://gmap3.net/forum/viewtopic.php?id=71](http://gmap3.net/forum/viewtopic.php?id=71)

# html - IIS 6.0 在我设置后丢失 MIME 类型

> ID：11401753
> 
> 赞同：0
> 
> 时间：2012-07-09T19:27:48.720
> 
> 标签：html, iis-6, video-streaming, mime-types

我在运行 6.0 版的 IIS 服务器上托管了一些视频，并且我已经正确设置了我的 MIME 类型（.mp4、视频/mp4），但是当我尝试流式传输这些视频时，它始终告诉我 MIME 类型不是支持。

由于我正在运行 IIS，我认为我不需要担心 .htaccess 但我可能是错的。

知道我怎么会丢失 MIME 信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:00:26.610

您必须直接在每个单独的站点下设置 MIME 类型。

【右键】站点->属性-> Http Headers-> Mime Types

希望这可以帮助

# php - 如何将 Blue Imp 文件上传集成到 CakePHP？

> ID：11401756
> 
> 赞同：1
> 
> 时间：2012-07-09T19:28:03.233
> 
> 标签：php, cakephp

Wa 使用的是 CakePHP，需要集成 Blue Imp 文件上传库。有没有人成功整合这些？如果是这样，您是否设置了上传以将文件存储在数据库或文件系统上？你能分享这种整合的例子吗？

非常感谢您的帮助和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:34:48.957

是的，我在 php 中集成了 BlueImp 文件上传功能。请找到以下组件和要使用的元素。

```
<?php
/*
 * jQuery File Upload Plugin PHP Class 5.9.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 * Created By: Arun Jain
 */
App::import('Core', 'Inflector');
class UploadComponent extends Component
{

protected $options;

function __construct($options=null) {
    $this->options = array(
        'script_url' => $this->getFullUrl().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/attachments/files/',
        'upload_url' => $this->getFullUrl().'/files/',
        'param_name' => 'files',
        // Set the following option to 'POST', if your server does not support
        // DELETE requests. This is a parameter sent to the client:
        'delete_type' => 'POST',
        // The php.ini settings upload_max_filesize and post_max_size
        // take precedence over the following max_file_size setting:
        'max_file_size' => null,
        'min_file_size' => 1,
        'accept_file_types' => '/.+$/i',
        'max_number_of_files' => null,
        // Set the following option to false to enable resumable uploads:
        'discard_aborted_uploads' => true,
        // Set to true to rotate images based on EXIF meta data, if available:
        'orient_image' => false,
        'image_versions' => array(
            // Uncomment the following version to restrict the size of
            // uploaded images. You can also add additional versions with
            // their own upload directories:
            /*
            'large' => array(
                'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
                'upload_url' => $this->getFullUrl().'/files/',
                'max_width' => 1920,
                'max_height' => 1200,
                'jpeg_quality' => 95
            ),
            */
            'thumbnail' => array(
                'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/attachments/thumbnails/',
                'upload_url' => $this->getFullUrl().'/attachments/thumbnails/',
                'max_width' => 80,
                'max_height' => 80
            )
        )
    );
    if (is_array($options)) {
        $this->options = array_replace_recursive($this->options, $options);
    }
}

protected function getFullUrl() {
    return
        (isset($_SERVER['HTTPS']) ? 'https://' : 'http://').
        (isset($_SERVER['REMOTE_USER']) ? $_SERVER['REMOTE_USER'].'@' : '').
        (isset($_SERVER['HTTP_HOST']) ? $_SERVER['HTTP_HOST'] : ($_SERVER['SERVER_NAME'].
        (isset($_SERVER['HTTPS']) && $_SERVER['SERVER_PORT'] === 443 ||
        $_SERVER['SERVER_PORT'] === 80 ? '' : ':'.$_SERVER['SERVER_PORT']))).
        substr($_SERVER['SCRIPT_NAME'],0, strrpos($_SERVER['SCRIPT_NAME'], '/'));
}

protected function set_file_delete_url($file) {
    $file->delete_url = $this->options['script_url']
        .'?file='.rawurlencode($file->name);
    $file->delete_type = $this->options['delete_type'];
    if ($file->delete_type !== 'DELETE') {
        $file->delete_url .= '&_method=DELETE';
    }
}

protected function get_file_object($file_name) {
    $file_path = $this->options['upload_dir'].$file_name;
    if (is_file($file_path) && $file_name[0] !== '.') {
        $file = new stdClass();
        $file->name = $file_name;
        $file->size = filesize($file_path);
        $file->url = $this->options['upload_url'].rawurlencode($file->name);
        foreach($this->options['image_versions'] as $version => $options) {
            if (is_file($options['upload_dir'].$file_name)) {
                $file->{$version.'_url'} = $options['upload_url']
                    .rawurlencode($file->name);
            }
        }
        $this->set_file_delete_url($file);
        return $file;
    }
    return null;
}

protected function get_file_objects() {
    return array_values(array_filter(array_map(
        array($this, 'get_file_object'),
        scandir($this->options['upload_dir'])
    )));
}

protected function create_scaled_image($file_name, $options) {
    $file_path = $this->options['upload_dir'].$file_name;
    $new_file_path = $options['upload_dir'].$file_name;
    list($img_width, $img_height) = @getimagesize($file_path);
    if (!$img_width || !$img_height) {
        return false;
    }
    $scale = min(
        $options['max_width'] / $img_width,
        $options['max_height'] / $img_height
    );
    if ($scale >= 1) {
        if ($file_path !== $new_file_path) {
            return copy($file_path, $new_file_path);
        }
        return true;
    }
    $new_width = $img_width * $scale;
    $new_height = $img_height * $scale;
    $new_img = @imagecreatetruecolor($new_width, $new_height);
    switch (strtolower(substr(strrchr($file_name, '.'), 1))) {
        case 'jpg':
        case 'jpeg':
            $src_img = @imagecreatefromjpeg($file_path);
            $write_image = 'imagejpeg';
            $image_quality = isset($options['jpeg_quality']) ?
                $options['jpeg_quality'] : 75;
            break;
        case 'gif':
            @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
            $src_img = @imagecreatefromgif ($file_path);
            $write_image = 'imagegif';
            $image_quality = null;
            break;
        case 'png':
            @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
            @imagealphablending($new_img, false);
            @imagesavealpha($new_img, true);
            $src_img = @imagecreatefrompng($file_path);
            $write_image = 'imagepng';
            $image_quality = isset($options['png_quality']) ?
                $options['png_quality'] : 9;
            break;
        default:
            $src_img = null;
    }
    $success = $src_img && @imagecopyresampled(
        $new_img,
        $src_img,
        0, 0, 0, 0,
        $new_width,
        $new_height,
        $img_width,
        $img_height
    ) && $write_image($new_img, $new_file_path, $image_quality);
    // Free up memory (imagedestroy does not delete files):
    @imagedestroy($src_img);
    @imagedestroy($new_img);
    return $success;
}

protected function has_error($uploaded_file, $file, $error) {
    if ($error) {
        return $error;
    }
    if (!preg_match($this->options['accept_file_types'], $file->name)) {
        return 'acceptFileTypes';
    }
    if ($uploaded_file && is_uploaded_file($uploaded_file)) {
        $file_size = filesize($uploaded_file);
    } else {
        $file_size = $_SERVER['CONTENT_LENGTH'];
    }
    if ($this->options['max_file_size'] && (
            $file_size > $this->options['max_file_size'] ||
            $file->size > $this->options['max_file_size'])
        ) {
        return 'maxFileSize';
    }
    if ($this->options['min_file_size'] &&
        $file_size < $this->options['min_file_size']) {
        return 'minFileSize';
    }
    if (is_int($this->options['max_number_of_files']) && (
            count($this->get_file_objects()) >= $this->options['max_number_of_files'])
        ) {
        return 'maxNumberOfFiles';
    }
    return $error;
}

protected function upcount_name_callback($matches) {
    $index = isset($matches[1]) ? intval($matches[1]) + 1 : 1;
    $ext = isset($matches[2]) ? $matches[2] : '';
    return ' ('.$index.')'.$ext;
}

protected function upcount_name($name) {
    return preg_replace_callback(
        '/(?:(?: \(([\d]+)\))?(\.[^.]+))?$/',
        array($this, 'upcount_name_callback'),
        $name,
        1
    );
}

protected function trim_file_name($name, $type) {
    // Remove path information and dots around the filename, to prevent uploading
    // into different directories or replacing hidden system files.
    // Also remove control characters and spaces (\x00..\x20) around the filename:
    $file_name = trim(basename(stripslashes($name)), ".\x00..\x20");
    // Add missing file extension for known image types:
    if (strpos($file_name, '.') === false &&
        preg_match('/^image\/(gif|jpe?g|png)/', $type, $matches)) {
        $file_name .= '.'.$matches[1];
    }
    if ($this->options['discard_aborted_uploads']) {
        while(is_file($this->options['upload_dir'].$file_name)) {
            $file_name = $this->upcount_name($file_name);
        }
    }
    return $file_name;
}

protected function orient_image($file_path) {
    $exif = exif_read_data($file_path);
    $orientation = intval(@$exif['Orientation']);
    if (!in_array($orientation, array(3, 6, 8))) { 
        return false;
    }
    $image = @imagecreatefromjpeg($file_path);
    switch ($orientation) {
          case 3:
            $image = @imagerotate($image, 180, 0);
            break;
          case 6:
            $image = @imagerotate($image, 270, 0);
            break;
          case 8:
            $image = @imagerotate($image, 90, 0);
            break;
        default:
            return false;
    }
    $success = imagejpeg($image, $file_path);
    // Free up memory (imagedestroy does not delete files):
    @imagedestroy($image);
    return $success;
}

protected function handle_file_upload($uploaded_file, $name, $size, $type, $error) {
    $file = new stdClass();
    $file->name = $this->trim_file_name($name, $type);
    $file->size = intval($size);
    $file->type = $type;
    $error = $this->has_error($uploaded_file, $file, $error);
    if (!$error && $file->name) {
        $file_path = $this->options['upload_dir'].$file->name;
        $append_file = !$this->options['discard_aborted_uploads'] &&
            is_file($file_path) && $file->size > filesize($file_path);
        clearstatcache();
        if ($uploaded_file && is_uploaded_file($uploaded_file)) {
            // multipart/formdata uploads (POST method uploads)
            if ($append_file) {
                file_put_contents(
                    $file_path,
                    fopen($uploaded_file, 'r'),
                    FILE_APPEND
                );
            } else {
                move_uploaded_file($uploaded_file, $file_path);
            }
        } else {
            // Non-multipart uploads (PUT method support)
            file_put_contents(
                $file_path,
                fopen('php://input', 'r'),
                $append_file ? FILE_APPEND : 0
            );
        }
        $file_size = filesize($file_path);
        if ($file_size === $file->size) {
            if ($this->options['orient_image']) {
                $this->orient_image($file_path);
            }
            $file->url = $this->options['upload_url'].rawurlencode($file->name);
            foreach($this->options['image_versions'] as $version => $options) {
                if ($this->create_scaled_image($file->name, $options)) {
                    if ($this->options['upload_dir'] !== $options['upload_dir']) {
                        $file->{$version.'_url'} = $options['upload_url']
                            .rawurlencode($file->name);
                    } else {
                        clearstatcache();
                        $file_size = filesize($file_path);
                    }
                }
            }
        } else if ($this->options['discard_aborted_uploads']) {
            unlink($file_path);
            $file->error = 'abort';
        }
        $file->size = $file_size;
        $this->set_file_delete_url($file);
    } else {
        $file->error = $error;
    }
    return $file;
}

public function get() {
    $file_name = isset($_REQUEST['file']) ?
        basename(stripslashes($_REQUEST['file'])) : null;
    if ($file_name) {
        $info = $this->get_file_object($file_name);
    } else {
        $info = $this->get_file_objects();
    }
    header('Content-type: application/json');
    echo json_encode($info);
}

public function post() {
    if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
        return $this->delete();
    }
    $upload = isset($_FILES[$this->options['param_name']]) ?
        $_FILES[$this->options['param_name']] : null;
    $info = array();
    if ($upload && is_array($upload['tmp_name'])) {
        // param_name is an array identifier like "files[]",
        // $_FILES is a multi-dimensional array:
        foreach ($upload['tmp_name'] as $index => $value) {
            $info[] = $this->handle_file_upload(
                $upload['tmp_name'][$index],
                isset($_SERVER['HTTP_X_FILE_NAME']) ?
                    $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'][$index],
                isset($_SERVER['HTTP_X_FILE_SIZE']) ?
                    $_SERVER['HTTP_X_FILE_SIZE'] : $upload['size'][$index],
                isset($_SERVER['HTTP_X_FILE_TYPE']) ?
                    $_SERVER['HTTP_X_FILE_TYPE'] : $upload['type'][$index],
                $upload['error'][$index]
            );
        }
    } elseif ($upload || isset($_SERVER['HTTP_X_FILE_NAME'])) {
        // param_name is a single object identifier like "file",
        // $_FILES is a one-dimensional array:
        $info[] = $this->handle_file_upload(
            isset($upload['tmp_name']) ? $upload['tmp_name'] : null,
            isset($_SERVER['HTTP_X_FILE_NAME']) ?
                $_SERVER['HTTP_X_FILE_NAME'] : (isset($upload['name']) ?
                    $upload['name'] : null),
            isset($_SERVER['HTTP_X_FILE_SIZE']) ?
                $_SERVER['HTTP_X_FILE_SIZE'] : (isset($upload['size']) ?
                    $upload['size'] : null),
            isset($_SERVER['HTTP_X_FILE_TYPE']) ?
                $_SERVER['HTTP_X_FILE_TYPE'] : (isset($upload['type']) ?
                    $upload['type'] : null),
            isset($upload['error']) ? $upload['error'] : null
        );
    }
    header('Vary: Accept');
    $json = json_encode($info);
    $redirect = isset($_REQUEST['redirect']) ?
        stripslashes($_REQUEST['redirect']) : null;
    if ($redirect) {
        header('Location: '.sprintf($redirect, rawurlencode($json)));
        return;
    }
    if (isset($_SERVER['HTTP_ACCEPT']) &&
        (strpos($_SERVER['HTTP_ACCEPT'], 'application/json') !== false)) {
        header('Content-type: application/json');
    } else {
        header('Content-type: text/plain');
    }
    echo $json;
}

public function delete() {
    $file_name = isset($_REQUEST['file']) ?
        basename(stripslashes($_REQUEST['file'])) : null;
    $file_path = $this->options['upload_dir'].$file_name;
    $success = is_file($file_path) && $file_name[0] !== '.' && unlink($file_path);
    if ($success) {
        foreach($this->options['image_versions'] as $version => $options) {
            $file = $options['upload_dir'].$file_name;
            if (is_file($file)) {
                unlink($file);
            }
        }
    }
    header('Content-type: application/json');
    echo json_encode($success);
}

} 
```

你的元素应该是这样的：

```
<!-- Bootstrap CSS Toolkit styles -->
<?php echo $this->Html->css('fileuploads/bootstrap.min');?>
<!-- Bootstrap styles for responsive website layout, supporting different screen sizes     -->
<?php echo $this->Html->css('fileuploads/bootstrap-responsive.min');?>
<!-- Bootstrap CSS fixes for IE6 -->
<!--[if lt IE 7]><?php echo $this->Html->css('fileuploads/bootstrap-ie6.min');?>        <![endif]-->
<!-- Bootstrap Image Gallery styles -->
<?php echo $this->Html->css('fileuploads/bootstrap-image-gallery.min');?>
<!-- CSS to style the file input field as button and adjust the Bootstrap progress      bars -->
<?php echo $this->Html->css('fileuploads/jquery.fileupload-ui');?>
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><?php echo $this->Html->script('html5');?></script><![endif]--> 
```

添加文件... 开始上传 取消上传 删除

```
 </tbody>
    </table>
</form>    
</div>
<!-- modal-gallery is the modal dialog used for the image gallery -->
<div id="modal-gallery" class="modal modal-gallery hide fade">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>
        <h3 class="modal-title"></h3>
    </div>

    <div class="modal-body"><div class="modal-image"></div></div>
<div class="modal-footer">
    <a class="btn modal-download" target="_blank">
        <i class="icon-download"></i>
        <span>Download</span>
    </a>
    <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
        <i class="icon-play icon-white"></i>
        <span>Slideshow</span>
    </a>
    <a class="btn btn-info modal-prev">
        <i class="icon-arrow-left icon-white"></i>
        <span>Previous</span>
    </a>
    <a class="btn btn-primary modal-next">
        <span>Next</span>
        <i class="icon-arrow-right icon-white"></i>
    </a>
</div>
</div>
<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
<tr class="template-upload fade">
    <td class="preview"><span class="fade"></span></td>
    <td class="name"><span>{%=file.name%}</span></td>
    <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
    {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>

        {% } else if (o.files.valid && !i) { %}
        <td>
            <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
        </td>
        <td class="start">{% if (!o.options.autoUpload) { %}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>{%=locale.fileupload.start%}</span>
            </button>
        {% } %}</td>
    {% } else { %}
        <td colspan="2"></td>
    {% } %}
    <td class="cancel">{% if (!i) { %}
        <button class="btn btn-warning">
            <i class="icon-ban-circle icon-white"></i>
            <span>{%=locale.fileupload.cancel%}</span>
        </button>
    {% } %}</td>
</tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
<tr class="template-download fade">
    {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
        {% } %}</td>
        <td class="name">
            <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
    {% } %}
    <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
            <i class="icon-trash icon-white"></i>
            <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
    </td>
</tr>
{% } %} 
```

```
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<?php echo $this->Html->script('fileuploads/vendor/jquery.ui.widget');?>
<!-- The Templates plugin is included to render the upload/download listings -->
<?php echo $this->Html->script('fileuploads/tmpl.min');?>
<!-- The Load Image plugin is included for the preview images and image resizing 
functionality -->
<?php echo $this->Html->script('fileuploads/load-image.min');?>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<?php echo $this->Html->script('fileuploads/canvas-to-blob.min');?>
<!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
<?php echo $this->Html->script(array('fileuploads/bootstrap.min', 'fileuploads/bootstrap-image-gallery.min'));?>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<?php echo $this->Html->script('fileuploads/jquery.iframe-transport');?>
<!-- The basic File Upload plugin -->
<?php echo $this->Html->script('fileuploads/jquery.fileupload');?>
<!-- The File Upload image processing plugin -->
<?php echo $this->Html->script('fileuploads/jquery.fileupload-ip');?>
<!-- The File Upload user interface plugin -->
<?php echo $this->Html->script('fileuploads/jquery.fileupload-ui');?>
<!-- The localization script -->
<?php echo $this->Html->script('fileuploads/locale');?>
<!-- The main application script -->
<?php echo $this->Html->script('fileuploads/main');?>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
<!--[if gte IE 8]><?php echo $this->Html->script('fileuploads/cors/jquery.xdr-transport');?><!  [endif]--> 
```

# parsing - 使用 Haskell 的 Parsec 进行编程语言转换器

> ID：11401766
> 
> 赞同：6
> 
> 时间：2012-07-09T19:28:38.563
> 
> 标签：parsing, haskell, interpreter, parsec

假设我有两种语言（A 和 B）。我的目标是编写某种类型的程序，将 A 中的语法转换为 B 的等价物。目前我的解决方案是使用 Haskell 的 Parsec 来执行此任务。然而，作为一个刚接触 Haskell 和函数式编程的人，在 Parsec 中找到一个简单的例子是相当困难的。我在网上找到的示例要么是不完整的示例（对于新的 Haskell 程序员来说令人沮丧），要么与我的目标相差太多。

那么有人可以为我提供一个非常简单和明确的例子，说明使用 Parsec 来实现与我想要实现的目标相关的事情吗？甚至可能还有一些与我的目标相似的教程。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T20:16:58.823

考虑以下 CSV 文档的简单语法（在 ABNF 中）：

```
csv   = *crow
crow  = *(ccell ',') ccell CR
ccell = "'" *(ALPHA / DIGIT) "'" 
```

我们想编写一个转换器，将该语法转换为 TSV（制表符分隔值）文档：

```
tsv   = *trow
trow  = *(tcell HTAB) tcell CR
tcell = DQUOTE *(ALPHA / DIGIT) DQUOTE 
```

首先，让我们创建一个代数数据类型来描述我们的抽象语法树。包括类型同义词以方便理解：

```
data XSV  = [Row]
type Row  = [Cell]
type Cell = String 
```

为这种语法编写解析器非常简单。我们编写一个解析器，就好像我们要描述 ABNF：

```
csv :: Parser XSV
csv = XSV <$> many crow

crow :: Parser Row
crow = do cells <- ccell `sepBy` (char ',')
          newline
          return cells

ccell :: Parser Cell
ccell = do char '\''
           content <- many (digit <|> letter)
           char '\''
           return content 
```

此解析器使用`do`-notation。在 a 之后`do`，是一系列语句。对于解析器，这些语句只是其他解析器。可以`<-`用来绑定解析器的结果。这样，通过链接多个较小的解析器来构建一个大解析器。为了获得有趣的效果，还可以使用特殊的组合子来组合解析器（例如，`a <|> b`它解析`a`或解析尽可能多的 s）。请注意 Parsec 默认不回溯。如果解析器在使用字符后可能会失败，请为其添加前缀以启用一个实例的回溯。减慢解析速度。`b``many a``a``try``try`

结果是一个解析器`csv`将我们的 CSV 文档解析为抽象语法树。现在很容易将其转换为另一种语言（例如 TSV）：

```
xsvToTSV :: XSV -> String
xsvToTSV xst = unlines (map toLines xst) where
  toLines = intersperse '\t' 
```

将这两件事联系起来，就得到了一个转换函数：

```
csvToTSV :: String -> Maybe String
csvToTSV document = case parse csv "" document of
  Left _    -> Nothing
  Right xsv -> xsvToTSV xsv 
```

仅此而已！Parsec 有许多其他功能来构建极其复杂的解析器。这本书[Real World Haskell](http://book.realworldhaskell.org/read/using-parsec.html)有一个关于解析器的好章节，但它有点过时了。不过，其中大部分仍然是正确的。如果您还有其他问题，请随时提问。

# klout - Klout API 不工作

> ID：11401767
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:28:42.173
> 
> 标签：klout

我试着按照这个：[教程](http://tutorials.jumpstartlab.com/projects/jstwitter.html)——使用 klout api 计算我的追随者的 klout 分数。（在链接页面的底部）这里是说明：

```
First, hop into Terminal and run this line:

1\. gem install klout

Next, open irb so you can experiment with the Klout API. Run the following lines:
API_KEY="your-api-key"
k = Klout::API.new(API_KEY)
k.klout("jack")["users"][0]["kscore"]
=> 74.61 
```

我做了完全相同的事情，但返回“nameError：未初始化的常量 Klout”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:01:12.980

公开发布 API 密钥也是一种不好的形式。他们被许可给你和你一个人。

也就是说，看起来 gem 没有正确安装，或者您需要先要求 Klout。

# iphone - iphone：在导航栏中设置背景图像不合适

> ID：11401768
> 
> 赞同：1
> 
> 时间：2012-07-09T19:28:42.890
> 
> 标签：iphone, uinavigationbar

我有一个表格视图，我想制作一个自定义的 uinavigationn 栏我试过这段代码

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.bounds.size.width, self.view.bounds.size.height)];
//here for v, width= navBar width and height=navBar height
//    
[view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"newsBanner.png"]]];
[self.navigationController.navigationBar addSubview:view]; 
```

问题是图像没有居中，因为它的尺寸是 640 x 72 ......有没有办法让它适合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:06:12.123

您的导航栏应该只有 44 像素高。最重要的是，它的最大宽度为 320 点（Retina 设备上为 640 像素，非高清设备上为 320 像素）。所以你的图片尺寸太大了。制作一个尺寸为 320x44 的图像，然后执行以下操作：

```
UINavigationBar *theBar = self.navigationController.navigationBar;
if ( [theBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
    UIImage *image = [UIImage imageNamed:@"your image here"];
    [theBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
} 
```

当然，这只适用于 iOS 5。您需要找到其他方法来处理在 5.0 以下的操作系统上设置背景。但是有很多堆栈溢出问题可以解决这个问题:)

# asp.net-mvc-3 - MVC 3 _ViewStart.cshtml

> ID：11401774
> 
> 赞同：0
> 
> 时间：2012-07-09T19:29:02.877
> 
> 标签：asp.net-mvc-3, visual-studio-2010, iis-7, razor

我正在创建一个 MVC 3 应用程序并将其托管在 IIS 7 中，因为我厌倦了启动 Cassini 进行调试。我的问题是布局 1) 每当我在单个视图上使用 layout 属性时，我都会收到一个错误页面，指出找不到特定页面，2) 我没有选项来专门添加一个 _ViewStart .cshtml 来自添加新项目。我迷路了，要么我的安装很糟糕，要么我需要升级我的 IIS，或者两者兼而有之。有什么想法可以让我开始使用我的布局吗？

# java - 在不同的JDK上运行java代码，出现不同的结果

> ID：11401776
> 
> 赞同：0
> 
> 时间：2012-07-09T19:29:09.080
> 
> 标签：java

在我的 java 代码中，我使用 LinkedHashMap 来存储数据，最后我删除重复项并对部分数据进行排序，结果很好，这是我需要的。使用 JDK 1.6 但是，使用 JDK 1.5 在不同的 Linux 服务器上运行相同的代码会产生不同的结果。例如，它不会为我对 LinkedHashMap 的元素进行排序，或者 Collections 可能不起作用。我非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:31:01.467

你是怎么排序的？A`LinkedHashMap`不是一个排序的映射，它只是维护插入顺序。如果您需要一个按排序顺序迭代的地图，您应该使用`TreeMap`. 根据您进行排序的方式，如果您使用的是 a，则映射的顺序可能会有所不同，`LinkedHashMap`因为 JDK 对它的排序可能略有不同。

# ruby-on-rails - Ruby On Rails：访问控制器中的 link_to 参数

> ID：11401777
> 
> 赞同：0
> 
> 时间：2012-07-09T19:29:09.403
> 
> 标签：ruby-on-rails

假设我的模型索引视图中有两个按钮，用于创建模型的新实例。我想将变量传递`:number`给我的控制器并在`new`函数中使用它，这样我就可以根据按下的按钮稍微改变我的表单。如何`:number`在控制器中访问？

```
<%= link_to 'New Run 1', new_test_suite_run_path, :class => "btn btn-custom1" , :number => 1 %>

<%= link_to 'New Run 2', new_test_suite_run_path, :class => "btn btn-custom1", :number => 2 %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:31:08.640

改为这样做

`<%= link_to 'New Run 1', new_test_suite_run_path(:number => 1), :class => "btn btn-custom1" %>`

然后在你的控制器中`my_number = params[:number]`

# jquery - jquery 对话框中的 ajax 内容（帖子）在第二次加载对话框时未加载

> ID：11401783
> 
> 赞同：0
> 
> 时间：2012-07-09T19:29:31.323
> 
> 标签：jquery, ajax, dialog

我有一个页面，我在单击按钮时加载一个对话框：

```
function editShowSchedule(emId){
    $(".ui-dialog-content").dialog("close");            
    var url = "inc/ajax/schedule-editShowSchedule.php?emId="+emId+"&stationId="+<?php echo $stationId;?>;   
    var container = '<div id="somediv" title="Modifier l\'horaire d\'une émission"></div>';
    $(container).load(url).dialog({
       //modal:false,
       height: 600,
       width: 600,
       resizable: false,
       buttons: { "Annuler": function() { $(this).dialog("close"); },
               "Sauvegarder": function(){ saveShowSchedule();} }
    });
} 
```

然后，在该对话框中，我在下拉框中触发 .change() 以加载与所选元素相关的信息。

```
<?php 
$emId = $_POST['emId'];
$stationId = $_POST['stationId'];
?> 
```

[...]

```
$(document).ready(function() {  
$("#selectShow").unbind('change');
$("#selectShow").change(function(){
    $("#showTimelines").html('En chargement');
    var emId = $("#selectShow").val();
    var stationId = <?php echo $stationId;?>;
    var params = {emId:emId,
                  stationId:stationId}
    $.post('inc/ajax/schedule-getAllTimelinesByEmId.php',params, function(data){ 
            alert('getTimelineByEmId');
            $("#showTimelines").html(data);             
            $(".button, button, input:submit, input:button").button();  
            enableAddRecurrenceInPeriod();
            enableRecurrenceCloseBox();
        },"html"  
    ); 
})<?php if($emId > 0){?>.change()<?php }?>;
}); 
```

第一次，它工作正常。

但是，如果我关闭对话框并单击以再次打开它，则警报实际上有效，但我看不到 $("#showTimelines").html 中出现任何内容（甚至没有加载消息：$("#showTimelines" ).html('En chargement');)，尽管我确实在 Firefox 中看到了它，而且我只是在加载文档后才发帖...

有人知道为什么和/或如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:11:11.830

啊，我明白了。感谢 Felipe 引导我走上正确的道路：我将 jquery 更改为：

```
function editShowSchedule(emId){
$(".ui-dialog-content").dialog("destroy");  
$("#somediv").remove();     
var url = "inc/ajax/schedule-editShowSchedule.php?emId="+emId+"&stationId="+<?php echo $stationId;?>;   
var container = '<div id="somediv" title="Modifier l\'horaire d\'une émission"></div>';
$(container).load(url).dialog({
    //modal:false,
    height: 600,
    width: 600,
    resizable: false,
    close: function(event, ui){
        $(this).dialog("destroy");
        $("#somediv").remove();
    },
    buttons: { "Annuler": function() { $(this).dialog("destroy"); 
                                       $("#somediv").remove(); },
               "Sauvegarder": function(){ saveShowSchedule();} }
}); 
```

}

基本上，关闭实际上只是隐藏了对话框。现在使用 destroy 会删除它，但它会将容器留在原处，虽然是隐藏的（因此更新了那个容器，而不是用我的 ajax 创建的新对话框），所以我通过调用 $("#somediv").remove( );

现在，一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:05:48.487

如果您拆分这两个步骤，它应该可以工作：创建一次对话框（例如，在文档准备就绪时），然后单击按钮调用“打开”（您仍然可以正常更新对话框的内部 html）。

来自[jquery ui 文档](http://jqueryui.com/demos/dialog/)：

对 $(foo).dialog() 的调用将初始化一个对话框实例，并默认自动打开对话框。如果要**重用对话框，最简单的方法是禁用“自动打开”选项**：

```
$(foo).dialog({ autoOpen: false })
  并打开它
$(foo).dialog('open')。
  要关闭它，请使用
$(foo).dialog('关闭')

```

# mysql - MySQL RAND() 奇怪的行为

> ID：11401784
> 
> 赞同：1
> 
> 时间：2012-07-09T19:29:32.137
> 
> 标签：mysql, sql, database

我正在尝试从 SQL 查询的结果中获取随机行。

我的查询如下

```
SET @rank = 0;
SELECT * FROM(
     SELECT (@rank:=@rank+1) AS num, ...
     FROM ...
     WHERE ....) as raw
WHERE raw.num = FLOOR(1 + (RAND() * @rank)) LIMIT 1 
```

一般的想法是内部查询结果中的表的每一行都被赋予一个唯一的数字（num）。我已经手动检查确实是这种情况，并且每一行都有编号。

最后一行让我很痛苦。就目前而言，`WHERE num = FLOOR(1 + (RAND() * @rank)) LIMIT 1`正在返回我想要的 - 只有一半的时间。它似乎返回正确范围内的随机行（例如，我正在测试查询是 0-1299）。但是，每三个查询中就有一个绝对不会返回任何内容。

好的，所以我认为这可能是一个双精度问题，所以我尝试使用`>=`如下`WHERE num >= FLOOR(1 + (RAND() * @rank)) LIMIT 1`：这种情况下的结果让我感到困惑。使用此代码，我总是得到一个结果，但返回的行数总是 < 100。

因此，如果我们调用 FLOOR(1 + (RAND() * @rank)) `x`。当我使用`=`而不是`>=`它确认`x`必须（在某些情况下）等于大于 1000 的数字时。但是，当使用 时`>=`，满足条件的事实意味着 x 必须始终小于 100？

这是怎么回事？或者我还能如何解决我的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:46:38.003

我认为问题在于`RAND()`查询中的函数被多次调用，对于从`raw`. 如果发生了这种情况，那么它可能找不到任何满足谓词的行，因为它将每一行与不同的目标进行比较。（第一排是第五排吗？第二排是第三排吗？等等）

我会将对 RAND() 的调用和 @rank 的初始分配移到查询的开头，如下所示：

```
SELECT * FROM(
     SELECT (@rank:=@rank+1) AS num, ...
     FROM (SELECT @rand := RAND(), @rank := 0) r
     CROSS JOIN ...
     WHERE ....) as raw
WHERE raw.num = FLOOR(1 + @rand * @rank) LIMIT 1 
```

-- 或者，根据您使用单独 SET 语句的模式 --

```
SET @rand = RAND();
SET @rank = 0;
SELECT * FROM(
     SELECT (@rank:=@rank+1) AS num, ...
     FROM ...
     WHERE ....) as raw
WHERE raw.num = FLOOR(1 + @rand * @rank) LIMIT 1 
```

（我碰巧更喜欢前者，因为它作为单个语句运行；它不依赖于在 SELECT 语句之外设置的用户变量。）

但是其中任何一个都应该确保对`RAND()`函数的调用只发生一次（在查询开始时）。

除此之外，我对您所看到的行为没有很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:35:23.117

为什么不直接使用？：

```
ORDER BY RAND() LIMIT 1 
```

如果没有，您可能想阅读： [http ://akinas.com/pages/en/blog/mysql_random_row/](http://akinas.com/pages/en/blog/mysql_random_row/)

**编辑** 测试了您的查询，我得到了这个 udd 输出：

```
mysql> SET @rank = 0;
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT * FROM(
    ->     SELECT (@rank:=@rank+1) AS num, id
    ->     FROM (
    ->         SELECT 1 AS id UNION SELECT 2 UNION SELECT 3
    ->         ) as abc
    ->     ) as raw
    -> WHERE raw.num = @rownr := FLOOR(1 + (RAND() * @rank)) LIMIT 1;
Empty set (0.00 sec)

mysql> SELECT @rownr;
+--------+
| @rownr |
+--------+
|      1 |
+--------+
1 row in set (0.00 sec) 
```

# mediaelement.js - mediaelement.js 和 WMV 的问题

> ID：11401786
> 
> 赞同：1
> 
> 时间：2012-07-09T19:29:34.010
> 
> 标签：mediaelement.js, wmv

我在使用 mediaelement.js 和 WMV 源时遇到了困难。它说它支持 WMV，但我根本无法让它工作。我将源设置为工作 WMV 文件，但是当我打开网页时，我看到了 mediaelement 屏幕、海报图像、播放按钮和控件，但是当我单击播放按钮时没有任何反应。使用 WMV 源文件的步骤是什么？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T19:39:27.947

在将视频标签转换为 MediaElement 之前，您需要添加两行 JavaScript。

```
mejs.plugins.silverlight[0].types.push('video/x-ms-wmv');
mejs.plugins.silverlight[0].types.push('audio/x-ms-wma'); 
```

这将使 Windows Media 视频和音频在使用 MediaElement 的 Silverlight 插件的计算机上播放。

# c# - 使用 RhinoMocks 测试私有方法

> ID：11401788
> 
> 赞同：4
> 
> 时间：2012-07-09T19:29:40.553
> 
> 标签：c#, tdd, rhino-mocks

我在 TDD 环境中工作，基本上我面临一个困境，我认为这在 TDD 环境中非常重要。作为程序员，您希望您的方法尽可能具有可读性。为了实现这一点，我们也倾向于将我们的方法划分为多个私有方法。在这样做的同时，所有移至私有函数的代码都失去了它的测试能力。

Rhino 测试类看不到所有这些私有方法，我还需要能够针对这些方法运行测试。我不希望他们公开，因为让他们公开是没有意义的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:38:16.470

如果我引用您问题的一部分：

> [...] 我们倾向于将我们的方法划分为多个私有方法 [...]

这是错误的。如果您遵循[单一职责原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)和良好的 OOP 设计，您的方法将更加独立和简单。如果您想提取另一种*私有*方法以使您的*公共*方法看起来更短，请先考虑一下。也许，你可以在一个单独的类中重构它？

你不测试*私有*方法，因为你测试的是*公共*合约而不是实现的细节。如果您想拥有与*私有*方法测试非常相似的东西，请将它们设为*内部*并设置[`InternalsVisibleTo`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性。

另一种方法（由 R. Harvey 指出）是编写一个包装类，将*私有*方法包装成*公共*方法。这种方法的好处是您不需要将*私有*方法设为*internal*。不利的一面是，对于每个*私有*方法，您都将拥有一个包装器*公共*方法。所以方法的数量可能会翻倍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T19:46:35.137

正如其他人所建议的那样，测试非公共方法的一种方法是将它们设为内部并使用`InternalsVisibleTo`属性。但是，我强烈建议不要这样做。

单元测试应该通过测试使用它们的公共方法来覆盖私有方法。当然，随着时间的推移以及您向被测类添加更多功能，设置测试变得越来越复杂。这是一个很好的指标，表明该类承担了太多责任，您应该将其拆分为多个较小的类。然后，您可以使这些较小的类成为原始类的*依赖*项并在您的测试中模拟它们——这将再次简化测试。

这样做时，您不必完全放弃私有方法 - 使用它们来使您的代码更具可读性而不使用注释是一个好主意。

# iphone - 检查您正在运行什么设备并执行操作

> ID：11401795
> 
> 赞同：1
> 
> 时间：2012-07-09T19:30:03.957
> 
> 标签：iphone, ios, shell, if-statement, sysctl

我写了这个脚本：

```
#!/bin/sh

DEVICE=`sysctl hw.machine`

if [ $DEVICE = "hw.machine: iPhone3,1" ]
 then
  echo "Test Done"
 else
  echo "Test failed"
fi 
```

运行它后，我收到一条消息：`./test: line 5: [: too many arguments`为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:01:53.057

You should **always** quote your expansions. `[` is an alias for the test command. Just like any other command it takes arguments. The $DEVICE variable is expanded prior to the command running.

If $DEVICE contained whitespace, the command would look like this:

```
[ foo bar = "hw.machine: iPhone3,1" ] 
```

In this example `test` is getting the arguments "foo" and "bar" before the comparison operator "=".

You need to quote the expansion:

```
if [ "$DEVICE" = "hw.machine: iPhone3,1" ] 
```

Another note is that if using `[[` in bash, this is not an issue as word splitting does not occur inside of `[[`.

See the following for more information on quoting: [http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)

# java - Java 的 getServletContext() 在常规 Java 类中等效吗？

> ID：11401797
> 
> 赞同：0
> 
> 时间：2012-07-09T19:30:05.513
> 
> 标签：java, servlets, path, relative-path

基本上我试图指向 WEB-INF 文件夹中的属性文件，这在我实际使用 servlet 时很容易，但是我有几个普通的 Java 类，我需要指向相同的“相对”路径，我似乎无法找到任何方法来做到这一点。

通常这是我指向文件的方式：

```
InputStream in = getServletContext().getResourceAsStream("/WEB-INF/prop.properties"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:43:04.517

据我所知，唯一的方法是传入`ServletContext`这些类（也许包装到其他类中，以分离不同的抽象级别）。

由于您有一个 Web 应用程序，所有对象图都应该源自`ServletContext`可用的根（servlet、过滤器、侦听器等），以便您可以`ServletContext`从这些根传递图。

# javascript - 如何隐藏/取消隐藏表单？

> ID：11401802
> 
> 赞同：0
> 
> 时间：2012-07-09T19:30:40.347
> 
> 标签：javascript, jquery, html

我正在玩 jquery 并制作了一个无需刷新页面即可提交信息的表单，但在我遵循的[教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)中，它必须首先显示一个供人们编辑的表单，但我想做的略有不同。

我想显示一个用户个人资料页面，然后在每个项目旁边有一个小编辑链接，如果他们单击编辑，则会出现一个文本字段。我相信我可以在不刷新的情况下提交表单，但是当单击“编辑”按钮而不刷新时如何显示表单？

知道如何实现这一点，甚至更好的是我应该寻找什么来学习如何做到这一点？我浏览了 jquery 网站上的示例项目，它们似乎都没有通过单击隐藏/取消隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:41:59.690

不刷新页面就无法提交 HTML 表单。但是，JavaScript（以及扩展的 jQuery）可用于提交类似的 GET 或 POST 请求。您还可以使用 jQuery 的`.append`方法插入必要的标记以即时创建输入。jQuery 也可用于访问已输入到字段中的值（通常由 id 完成）。

我正在做的*事情*与您需要的相似：

（此特定代码从可见表单中获取一些输入，并将其聚合为不可见表单以供以后使用）

```
jQuery('#submitButton').click(function(){

  jQuery('#prev_request').append('<input type="hidden" name="sort_order" value="'+jQuery("input[@name=sort_order]:checked").val()+'" />');
  jQuery('#prev_request').append('<input type="hidden" name="sort_by" value="'+ jQuery("#sort_by option:selected").val() +'" />');

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:49:28.110

我认为最简单的事情是这样的：

HTML

```
<form id="form1" style="display: none;">
</form>
<a id="editButton" href="javascript:void(0)">Edit</a>
<a id="closeButton" href="javascript:void(0)" style="display: none;">Close</a> 
```

JavaScript（一定要在你的页面上包含 jQuery）

```
$(function() {
    $("#editButton").click(function() {
        $("#form1").show();
        $("#editButton").hide();
        $("#closeButton").show();
    });

    $("#closeButton").click(function() {
        $("#form1").hide();
        $("#editButton").show();
        $("#closeButton").hide();
    });
}); 
```

It's also easy to add an expanding transition effect with the `show()` and `hide()` methods. Simply pass the desired transition duration to the function (in milliseconds) like this:

```
$("#form1").show(500); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T19:56:42.660

Here is a quick example of how I'd handle the concept, I'd follow it up with posting and validation and all else a little server-side scripting etc, but this can act as your stepping stone overall. Pretty much all you got to remember is javascript/jquery is all smoke and mirrors since its all handled client-side you essentially need to work with what you have on screen be it hidden or otherwise. In this case you have 2 elements one showing by default while the other hides, you make a logic that hides one over the other when one is chosen, and do what you need to respectively with either.

```
<div id="wrapper">
   <div id="container">
      <div id="storedvalue"><span>Hello</span> [<a href="javascript:void(0);" id="editvalue">edit</a>]</div>
      <div id="altervalue" style="display:none;"><input type="text" name="changevalue" id="changevalue" value="Hello"> [<a href="javascript:void(0);" id="savevalue">save</a>]</div>
   </div>
</div>

<script type="text/javascript">
$('#editvalue').click(function(e){$('#storedvalue').hide();$('#altervalue').show();});
$('#savevalue').click(function(e){
   var showNew = $('#changevalue').val();
   $('#altervalue').hide();
   $('#storedvalue').show();
   $('#storedvalue span').text(showNew);
});
</script> 
```

[DEMO](http://jsfiddle.net/BxpSF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T19:56:43.070

Lostsoul,

I would utilize an asp DataGrid inside of an UpdatePanel control:

.ascx:

```
<asp:UpdatePanel ID="yourUPpanel" runat="server" UpdateMode="Conditional">
<ContentTemplate>
       <asp:DataGrid ID="yourDG" runat="server" AutoGenerateColumns="False" CellPadding="2" AllowSorting="False" AllowPaging="False" EnableViewState="false" onItemCommand="yourDG_CellClick">
          <FooterStyle CssClass="cssFooter"></FooterStyle>
          <AlternatingItemStyle CssClass="CssAltItem"></AlternatingItemStyle>
          <ItemStyle CssClass="cssGridItem"></ItemStyle>
          <HeaderStyle CssClass="GridHeader"></HeaderStyle>
       </asp:DataGrid>
       <asp:Panel ID="yourAdditionalStuff" runat="server" Visible="false">
         <table>
           <tr>
             <td>
               <asp:TextBox ID="yourTXT" runat="server" Width="100px"/>
             </td>
           </tr>
         </table>
       </asp:Panel>
</ContentTemplate>
</asp:UpdatePanel> 
```

.vb

```
Public Sub yourUPpanel_Load(ByVal sender As Object, ByVal e As EventArgs) Handles yourUPpanel.Load

        If cnADO Is Nothing Then blahblah.getConnection("yourserver", cnADO) 'whatever the case may be here
        Try

            Dim da As SqlDataAdapter

            Dim cmd3 As New SqlCommand
            cmd3.Connection = cnADO
            cmd3.CommandType = CommandType.StoredProcedure
            cmd3.CommandText = "SP to populate GRID"     'whatever the case may be here
            daPeople = New SqlClient.SqlDataAdapter
            daPeople.SelectCommand = cmd3

            If yourDG.Columns.Count <= 0 Then
                Dim btnc As New ButtonColumn
                btnc.ButtonType = ButtonColumnType.LinkButton
                btnc.HeaderText = "Edit"
                btnc.DataTextField = "primarykey"
                btnc.DataTextFormatString = "<img border='0' src=" & ResolveUrl("~/images/edit.gif") & ">"         'whatever the case may be here
                btnc.CommandName = "Edit"
                btnc.ItemStyle.HorizontalAlign = HorizontalAlign.Center
                yourDG.Columns.Add(btnc)

                Dim bc As New BoundColumn

                bc = New BoundColumn
                bc.DataField = "sqlColumnName"
                bc.HeaderText = "First"
                yourDG.Columns.Add(bc)

            End If

            Dim dt As New DataTable
            yourDG.Fill(dt)
            yourDG.DataSource = dt
            yourDG.DataBind()

            'lbtnEditAddPerson.Visible = True
        Catch ex As Exception

        Finally
            If Not cnADO Is Nothing Then
                If cnADO.State = ConnectionState.Open Then
                    cnADO.Close()
                End If
            End If
        End Try
    End Sub

 Protected Sub yourDG_CellClick(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.DataGridCommandEventArgs)

        Dim cmd As String = e.CommandName.ToString.ToUpper
        If cmd.ToUpper = "EDIT" Then
            Using cnADO As SqlConnection = New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("yourserver").ToString) 'whatever the case may be here
                Using scmd As New SqlCommand("", cnADO)
                    scmd.CommandText = "YOURTEXTHERE"

                    Using dr As SqlDataReader = scmd.ExecuteReader()
                        If dr.Read Then
                            'fill textbox for load
                        End If
                    End Using
                End Using
            End Using

            yourAdditionalStuff.Visible = True

        ElseIf cmd.ToUpper = "ANOTHERCOMMAND" Then 'if you want to...allows for extensibility (would need another column tho)

        End If
End Sub 
```

Note that this is a *framework*, but should be very close to what you need (or at least give you things to search on). I've actually used this approach, so I can confirm that it does work. If you aren't using a database (i.e. if you won't need to save/load what the user puts in your appearing textbox) then it should simplify down. This should get you Googling though. Hope it helps!

-sf

EDIT: Per Chris' comment, I think:

```
function hideOnClick(){
  var d =  document.getElementById('<% =yourtextbox.ClientID %>');
  if(d.style.display == "none"){
     d.style.display = "inline";
  }else{
     d.style.display = "none";
  }
 } 
```

might help you if all you need is the client-side javascript to toggle show/hide. All you'd need to do is attach it to your edit button.

# objective-c - ModalViewController 没有调光/禁用当前视图控制器

> ID：11401803
> 
> 赞同：0
> 
> 时间：2012-07-09T19:30:41.840
> 
> 标签：objective-c, ios, modalviewcontroller

我在特定帧 CGRectMake(40,50,400,500) 中将 NavController 显示为 modalViewController。哪个工作正常。现在我在 self 中有一个按钮（显示 modalViewController 的视图控制器），按下该按钮时，我需要在 NavController 上显示一些消息。但问题是当我展示 modalViewController 时。整个屏幕区域变暗/禁用。因此，无法在自己中触摸/单击该按钮。

这是我展示视图控制器的代码。我想，我在这里遗漏了一些东西。请帮忙。提前致谢。

```
aNavController.modalPresentationStyle = UIModalPresentationFormSheet;
anavController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentModalViewController:aNavController animated:YES];
aNavController.view.superview.frame = CGRectMake(40,50, 400, 500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:34:51.280

presentModalViewController 创建一个模态对话框。当模态视图控制器启动时，用户不能在父视图上做任何事情，直到模态视图被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:09:25.783

问题是您在实例化 a`UIAlertView`的同时在的委托方法`presentModalViewController`中调用您的模态视图。`UIAlertView``clickedButtonAtIndex`

像这样：

```
- (IBAction)clickedMyButton:(id)sender
{
    UIAlertView *alertView = [[UIAlertView alloc]
                 initWithTitle: @"Title"
                 message: @"Message"
                 delegate:self
                 cancelButtonTitle:@"Close Button"
                 otherButtonTitles:@"Modal Button", @"Some Other Button", nil];
    [alertView show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        NSLog(@"User Selected Cancel");
    }
    else if (buttonIndex == 1) {
        NSLog(@"Modal Button Clicked");
        aNavController.modalPresentationStyle = UIModalPresentationFormSheet;
        anavController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self presentModalViewController:aNavController animated:YES];
        aNavController.view.superview.frame = CGRectMake(40,50, 400, 500);
    }else {
        NSLog(@"Some Other Button Clicked");
    }
} 
```

或者，如果您希望您`UIAlertView`的显示在您的导航控制器之上，请忽略上述内容，只需等待调用您的警报，直到导航控制器`- (void)viewDidAppear:(BOOL)animated`方法。

此外，除非绝对必要，否则我建议您更改框架以保持在屏幕范围内。前任：`CGRectMake(40, 50, 320, 480);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:13:01.480

最后，我能够解决与 UIModalPresentationFormSheet 相同的工作方式。

我将 aNavController 作为子视图添加到 [[UIApplication sharedApplication] keyWindow] 并解决了我的所有问题。

谢谢大家的意见。

# python - 从父模板访问 django 上下文变量

> ID：11401822
> 
> 赞同：1
> 
> 时间：2012-07-09T19:31:28.067
> 
> 标签：python, django

我无法从孩子内部设置 django 模板变量，有什么想法吗？

在我的views.py中：

```
return { 'header_title' : 'my text' } 
```

base.html：

```
{{ header_title }} 
```

主.html：

```
{{ extends "base.html" }} 
```

详细信息.html：

```
{{ extends "main.html" }} 
```

那是行不通的。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:35:19.893

您不能只从视图中返回字典。视图必须返回一个`HttpResponse`对象。请尝试：

Django 1.3+[渲染](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

```
return render(request, 'main.html', { 'header_title': 'my text' }) 
```

Django <1.3[渲染响应](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)

```
return render_to_response('main.html', { 'header_title': 'my_text' }, context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:35:08.187

一个解决方案可能是放入你的 base.html

```
<block title><endblock> 
```

在儿童模板中：

```
<block title>{{ header title}}<endblock> 
```

# apache-flex - flex中组合框的点击事件

> ID：11401825
> 
> 赞同：0
> 
> 时间：2012-07-09T19:31:49.207
> 
> 标签：apache-flex, combobox, actionlistener, mouseclick-event

我发现在 flex 中，组合框有 3 个事件：打开、关闭、更改 [组合框事件示例](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_5.html)

假设我在组合框中选择了 A。然后我可能会做两件事：

*   我打开组合框并再次单击 A 选项
*   我打开组合框并通过单击其他地方将其关闭（不单击 A 选项）

在上述任何一种情况下都没有选择变化。他们都有公开和密切的参与。因此，如果我希望这两个动作具有不同的行为，我无法以编程方式区分它们......是否可以在组合框或组合框选项上有一个点击事件？我正在为我的组合框使用数据提供程序...

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:41:16.647

[ComboBox 事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/ComboBox.html#eventSummary)确实定义了一个单击[事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html#event%3aclick)，尽管它是继承的。

除非 ComboBox 具有单击事件侦听器并调用 preventDefault() 以防止事件冒泡，否则您应该能够在 ComboBox 上侦听单击事件而不会出现任何问题。

# c# - 提高 LINQ 查询的性能

> ID：11401829
> 
> 赞同：1
> 
> 时间：2012-07-09T19:31:56.123
> 
> 标签：c#, asp.net, xml, linq

当我尝试循环遍历结果以创建 Xelement 时，我的 linq 查询变慢，稍后我会根据 XElement 处理 XSLT。

这是我的代码

```
public override XElement Search(SearchCriteria searchCriteria)
    {
        XElement root = new XElement("Root");
        using (ReportOrderLogsDataContext dataContext = DataConnection.GetLinqDataConnection<ReportOrderLogsDataContext>(searchCriteria.GetConnectionString()))
        {
            try
            {

                IQueryable<vw_udisclosedDriverResponsePart> results = from a in dataContext.vw_udisclosedDriverResponseParts
                              where
                                  (a.CreateDt.HasValue &&
                                   a.CreateDt >= Convert.ToDateTime(searchCriteria.BeginDt) &&
                                   a.CreateDt <= Convert.ToDateTime(searchCriteria.EndDt))
                              select a;

                if (!string.IsNullOrEmpty(searchCriteria.AgentNumber))
                {
                    results = results.Where(request => request.LgAgentNumber == searchCriteria.AgentNumber);
                }
                if (!string.IsNullOrEmpty(searchCriteria.AgentTitle))
                {
                    results = results.Where(a => a.LgTitle == searchCriteria.AgentTitle);
                }
                if (!string.IsNullOrEmpty(searchCriteria.QuotePolicyNumber))
                {
                    results = results.Where(a => a.QuotePolicyNumber == searchCriteria.QuotePolicyNumber);
                }
                if (!string.IsNullOrEmpty(searchCriteria.InsuredName))
                {
                    results = results.Where(a => a.LgInsuredName.Contains(searchCriteria.InsuredName));
                }

                foreach (var match in results) // goes slow here, specifically times out before evaluating the first match when results are too large.
                {
                    DateTime date;
                    string strDate = string.Empty;
                    if (DateTime.TryParse(match.CreateDt.ToString(), out date))
                    {
                        strDate = date.ToString("MM/dd/yyyy");
                    }

                    root.Add(new XElement("Record",
                                          new XElement("System", "Not Supported"),
                                          new XElement("Date", strDate),
                                          new XElement("Agent", match.LgAgentNumber),
                                          new XElement("UserId", match.LgUserId),
                                          new XElement("UserTitle", match.LgTitle),
                                          new XElement("QuoteNum", match.QuotePolicyNumber),
                                          new XElement("AddressLine1", match.AddressLine1),
                                          new XElement("AddressLine2", match.AddressLine2),
                                          new XElement("City", match.City),
                                          new XElement("State", match.State),
                                          new XElement("Zip", match.Zip),
                                          new XElement("DriverName", string.Concat(match.GivenName, " ", match.SurName)),
                                          new XElement("DriverLicense", match.LicenseNumber),
                                          new XElement("LicenseState", match.LicenseState)));
                    ;
                }
            }
            catch (Exception es)
            {

                throw es;
            }
        }
        return root;
        // return GetSearchedCriteriaFromStoredPocedure(searchCriteria);
    } 
```

我认为有更好的方法将结果对象转换为 XElement。处理视图本身只需要大约 2 秒。尝试遍历结果对象会导致超时，即使没有返回许多结果。

任何帮助，将不胜感激。

谢谢！

-詹姆士

2012 年 7 月 10 日修订

问题不在于 linq 查询本身，而在于指定日期范围时视图的执行。单独执行视图大约需要 4-6 秒。当使用较小的日期范围（07/05/2012 - 07/10/2012）时，视图大约需要 1:30。有没有人对如何在指定的日期范围内提高查询性能有任何建议。如果我得到所有结果并循环检查日期，它会更快。

IE

```
 IQueryable<vw_udisclosedDriverResponsePart> results = from a in dataContext.vw_udisclosedDriverResponseParts select a;

                foreach (var match in results) //results only takes 3 seconds to enumerate, before would timeout
                {
                    // eval search criteria date here.
                } 
```

我可以像上面建议的那样对其进行编码，但是有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:40:59.007

数据库表现如何？最简单的测试是运行一个示例查询 - 一个将从数据库中检索您需要的数据的查询，只是为了测试数据库索引和性能 - 因为在 99% 的情况下这是导致缓慢的原因。

我猜想这种缓慢正在发生，因为

*   您正在从数据库中迭代，而不是预先检索所有行，并且
*   您在恶劣的`WHERE`条件下选择（您的索引是否正确？）

首先，调用`ToList`获取结果以确定缓慢发生在数据库中，而不是在 XML 构造中

```
if (!string.IsNullOrEmpty(searchCriteria.InsuredName))
{
    //...
}    
var matches = results.ToList();    
foreach (var match in matches) 
{
    //... 
```

假设`var matches = results.ToList()`非常慢，我会看看`WHERE`子句中的函数

```
(a.CreateDt.HasValue &&
a.CreateDt >= Convert.ToDateTime(searchCriteria.BeginDt) &&
a.CreateDt <= Convert.ToDateTime(searchCriteria.EndDt)) 
```

检查它们是否没有为每一行执行。

如果您使用 SQL Server，请运行 Profiler（在工具菜单中）以跟踪 LINQ-to-SQL 的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:16:32.927

当然，在 linq 之外进行转换。条件在 Linq 表达式运行期间不会改变。

根据您发布的内容，我做了这个例子：

```
var begin = Convert.ToDateTime(searchCriteria.BeginDt);
var end = Convert.ToDateTime(searchCriteria.EndDt);

var results = from a in searchList
              where ((a.CreateDt.HasValue &&
                      a.CreateDt >= begin &&
                      a.CreateDt <= end)
                      && (string.IsNullOrEmpty(searchCriteria.AgentNumber) || a.LgAgentNumber == searchCriteria.AgentNumber)
                      && (string.IsNullOrEmpty(searchCriteria.AgentTitle) || a.LgTitle == searchCriteria.AgentTitle)
                      && (string.IsNullOrEmpty(searchCriteria.QuotePolicyNumber) || a.LgTitle == searchCriteria.QuotePolicyNumber)
                      && (string.IsNullOrEmpty(searchCriteria.InsuredName) || a.LgInsuredName.Contains(searchCriteria.InsuredName))
                     )
                        select a; 
```

也许这对你有帮助。

为了测量时间，我使用了以下方法：

```
var watch = new Stopwatch();
watch.Start();
var arr = results.ToArray();  // force evaluation of linq
watch.Stop();
var elapsed = watch.ElapsedTicks; 
```

似乎更改后的查询已经平均快了大约 30-40%，但我只是做了一些运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:47:10.377

我建议做一些实验：

一。
放一个

```
int count = results.Count(); 
```

在*foreach*之前，看看这是否需要很长时间。

二。
离开*Count()*调用，看看*foreach*是否仍然很慢。如果速度很快，则表明与数据库的初始连接很慢。

正如其他人所建议的那样 - 看看您在数据库中的查询执行情况（实际上是在数据库中输入，没有 c#）。

您还可以发布 SHOW TABLE 结果，以便社区可以检查索引并帮助您进行修复。

# javascript - 程序化保存按钮不起作用

> ID：11401832
> 
> 赞同：1
> 
> 时间：2012-07-09T19:32:03.167
> 
> 标签：javascript, jquery, foursquare

我正在一个网站上工作，每页将有多个“保存”按钮，我需要为每个按钮进行回调，以便我可以在自己的系统中注册用户已完成保存操作。我以为我已经知道如何以编程方式执行此操作......但是对于我创建的每个小部件，当我尝试通过 SDK 将其添加到 DOM 时，我收到“无法读取 null 的属性'样式'”错误。

这是我的 Javascript

```
<script type='text/javascript'>
    (function () {
        window.___fourSq = {
            "uid": "31904528",
            "secure": true,
            "explicit": false,
            "onReady": function () {
                $('.fourSquareVenueId').each(function () {
                    var vid = $(this).val();
                    var widget = new fourSq.widget.SaveTo({
                        "vid": vid
                    });
                    var container = $(this).parent().find('.placeholder');
                    widget.replace(container);
                });
            }
        };
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = 'https://platform-s.foursquare.com/js/widgets.js';
        s.async = true;
        var ph = document.getElementsByTagName('script')[0];
        ph.parentNode.insertBefore(s, ph);
    })(); 
```

基本上，当 SDK 被加载时，我会通过并找到所有带有场地 ID 的隐藏输入，然后我尝试创建一个“保存”小部件来替换我作为占位符的空锚标记。

这是 Chrome 控制台中错误屏幕截图的链接：

[http://gyazo.com/f011c25bb88181251e2820e748b41093.png](http://gyazo.com/f011c25bb88181251e2820e748b41093.png)

任何帮助将不胜感激。谢谢。

编辑：这是我正在使用的 Foursquare 文档： [https ://developer.foursquare.com/overview/widgets#programmatic-instantiation](https://developer.foursquare.com/overview/widgets#programmatic-instantiation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:40:32.927

远射，但是您是否更改了 Array 对象的原型？

# mysql - wordpress 的 dbDelta 函数停止工作

> ID：11401835
> 
> 赞同：0
> 
> 时间：2012-07-09T19:32:21.837
> 
> 标签：mysql, wordpress

我正在开发一个需要数据库交互性的 wordpress 插件。我在我的激活钩子中使用 dbDelta 函数将几个表添加到数据库中。该`dbDelta`功能上周工作，但是当我今天去添加另一个表时，什么也没发生*。*我也无法添加列或更改现有表的属性。有人建议在运行 dbDelta 之前分解 sql 命令，但这也不起作用。

在你问之前：是的，我已经阅读了法典页面并遵循了格式说明。

这是代码：

```
<?php
function install ()
{

    global $wpdb; //use the global variable wpdb, a class used to interact with wordpress's database

    //define table names, using the the db's prefix
    $gist_table = $wpdb->prefix . "cookbook_gist";
    $tag_table = $wpdb->prefix . "cookbook_tags";
    $tagKey_table = $wpdb->prefix . "cookbook_tagKeys";
    $comment_table = $wpdb->prefix . "cookbook_comments";
    $blacklist_table = $wpdb->prefix . "cookbook_blacklist";

   //Include the wpdb function

    require_once(ABSPATH . 'wp-admin/includes/upgrade.php'); //the dbDelta function is in this file

    //create the sql statements to add the tables

    $sql = "CREATE TABLE $gist_table (
    gist_id mediumint NOT NULL,
    last_cached datetime DEFAULT '0000-00-00 00:00:00' NOT NULL,
    last_updated datetime DEFAULT '0000-00-00 00:00:00' NOT NULL,
    author tinytext NOT NULL,
    description mediumtext NOT NULL,
    header mediumtext NOT NULL,
    body text NOT NULL,
    footer mediumtext NOT NULL,
    PRIMARY KEY  (gist_id)
    );";

    //Actually add the table
    dbDelta($sql);

    $sql = "CREATE TABLE $tag_table (
    tag_id mediumint NOT NULL AUTO_INCREMENT,
    tag tinytext NOT NULL,
    PRIMARY KEY  (tag_id)
    );";

    dbDelta($sql);

    $sql ="CREATE TABLE $tagKey_table (
    id mediumint NOT NULL AUTO_INCREMENT,
    gist_id mediumint NOT NULL,
    tag_id mediumint NOT NULL,
    PRIMARY KEY  (id)
    );";

    dbDelta($sql);

    $sql = "CREATE TABLE $comment_table (
    id mediumint NOT NULL,
    gist_id mediumint NOT NULL,
    author tinytext NOT NULL,
    date_created datetime NOT NULL,
    comment mediumtext NOT NULL,
    newcol text NOT NULL,
    PRIMARY KEY  (id)
    );";

    dbDelta($sql);

    $sql = "CREATE TABLE $blacklist_table (
    gist_id mediumint NOT NULL,
    PRIMARY KEY  (gist_id)
    );";

    dbDelta($sql); //makes the changes to the wp database    
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:59:30.010

对困惑感到抱歉。几天前，我的托管服务更改了我们托管的服务器；我仍在登录旧服务器来管理数据库。当我登录到正确的服务器时，更改已按预期进行。

# python - python中一个键的多个值

> ID：11401840
> 
> 赞同：0
> 
> 时间：2012-07-09T19:32:38.737
> 
> 标签：python, dictionary

所以我的主要目标很简单，我希望在使用单个键时返回多个值。但是，我遇到了错误和令人困惑的行为。我是 Python 新手，所以我完全希望这个问题有一个简单的原因。

我有一个对象列表，`list`其中仅包含对象的索引。IE

```
1
2
3
4 
etc.. 
```

和一个文件，其中包含每个对象所属的组，以相同的顺序列出。该文件是 n 行的单个值（n 也是对象列表的长度。）即文件如下所示：

```
2
5
2
4
etc.. 
```

这意味着第一个对象属于第 2 组，第 5 组中的第二个对象，第 2 组中的第三个和第 4 组中的第四个。这个文件将根据我的输入文件而改变。我尝试了以下两个建议（我可以找到）。

**编辑：**我的最终目标：拥有一个字典，其中组号作为键，组中的对象作为值。

我首先查看了这个 StackOverflow[问题](https://stackoverflow.com/questions/3199171/append-multiple-values-for-one-key-in-python-dictionary)以寻求帮助，因为它非常相似，最后得到了以下代码：

```
def createdDict(list, file): 

    f = open(file, 'r')
    d={}
    i=0 

    for line in f:
        groupIndex = int(line)
        if groupIndex in d:
            d[groupIndex].append(list[i])
        else:
            d[groupIndex] = list[i]
        i +=1
    print d
    f.close() 
```

而这个错误：

```
AttributeError: 'Element' object has no attribute 'append' 
```

`d[groupIndex]`只是一个字典和它的键，`groupIndex`也应该是一个整数.. 不是我在脚本前面创建的类中的对象。（为什么会出现这个错误？）

[然后我在遇到另一个问题](https://stackoverflow.com/questions/10844282/appending-values-to-a-key-if-key-already-exists-python-jython?rq=1)后修改了我的代码，如下所示，因为我认为这是完成我的任务的另一种方法。然后我的代码如下所示：

```
def createdDict(list, file): 

    f = open(file, 'r')
    d={}
    i=0 

    for line in f:
        groupIndex = int(line)
        if groupIndex in d:
            d.setdefault('groupIndex', []).append(list[i])
        else:
            d[groupIndex] = list[i]
        i +=1
    print d
    f.close() 
```

此代码片段不会以错误或我想要的结尾，而是（我相信）是组中的最后一个对象......所以`print d`给了我钥匙和放在组中的最后一个对象（而不是想要的: 该组中的所有对象），然后终端随机吐出，`groupIndex`然后是`list`.

我的问题：我到底错过了什么？人们对我链接的问题的答案表示赞同，因此它们很可能是正确的，而我很可能错误地实施了它们。我不需要对这两个过程进行更正，但是对于我将多个值附加到一个键的问题的最有效答案。完成这项任务的最蟒蛇方式是什么？

**编辑2：**如果这有帮助，这里是第一个方法也引用错误的类。我不知道它是如何将此代码的任何部分定义为此类的一部分。我还没有真正开发它，但我完全是为了一个答案，所以如果这有助于定位错误：

```
class Element(object):
    def __init__(self, globalIndex):
        self.globalIndex = globalIndex
    def GetGlobalIndex (self):
        return self.globalIndex 
```

`globalIndex`是对象（元素）的单独索引。对于我目前的问题，我正在列出这些元素的列表（这是前面提到的列表）并根据我的文件将它们分组为更小的组（也前面提到过）。为什么我认为这无关紧要，该列表本质上是整数的计数......它会如何与我的代码混淆？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:40:40.997

你的问题的基础是在这一行：

```
d[groupIndex] = list[i] 
```

换句话说，当一个键不在字典中时，您在该键下添加一个*值*（`Element`对象）。下次您看到该键时，您尝试附加到该单个值。但是您不能附加到单个值。您需要一个容器类型（例如列表）来追加。Python 不会神奇地将你的`Element`对象变成一个列表！

解决方案很简单。如果您希望字典的值是列表，*请执行此操作。*添加第一项时，附加一个元素列表：

```
d[groupIndex] = [list[i]] 
```

或者，您可以从原始列表中提取一项。这已经是一个列表了。

```
d[groupIndex] = list[i:i+1] 
```

现在字典的值始终是列表，您可以将第二个和后续值附加到它们而不会出错。

正如**ecatmur**指出的那样，您可以`if`使用`d.setdefault(groupIndex, []).append(list[i])`. 如果键不存在，则该值将被视为一个空列表，您只需始终附加新项目。你也可以使用`collections.defaultdict(list)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:37:13.803

只需使用

```
d.setdefault(groupIndex, []).append(list[i]) 
```

这将检查是否`groupIndex`in `d`，因此您不需要该`if groupIndex in d:`行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T19:40:49.033

```
from itertools import izip
from collections import defaultdict

dd = defaultdict(list)
with open('filename.txt') as fin:
    for idx, line in izip(my_list, fin):
        num = int(line)
        defaultdict[num].append(idx) 
```

这将创建`defaultdict`具有默认类型列表的 a，因此您可以在不使用的情况下追加`setdefault`. `my_list`然后从文件中读取与相应行组合的每个元素，将行转换为整数，然后将`num`相应的索引添加到组（由 表示）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T19:42:12.383

在您的第一次尝试中，您似乎正确理解将第一个元素添加到字典项是一种特殊情况，并且您还不能追加，因为字典项还没有值。

在您的情况下，您将其设置为 list[i]。但是， list[i] 不是列表，因此您不能在以后的迭代中对其运行 append。

我会做类似的事情：

```
for line in f:
    groupIndex = int(line)
    try:
        blah = d[groupIndex] # to check if it exists
    except:
        d[groupIndex] = [] # if not, assign empty list

    d[groupIndex].append(list[i])
print d
f.close() 
```

# java - 类设计的最佳实践（子类 + 覆盖）

> ID：11401847
> 
> 赞同：4
> 
> 时间：2012-07-09T19:33:10.340
> 
> 标签：java, class

我想设计类层次结构。超类有一个抽象方法，子类必须重写这个方法，但我的问题是：这个方法使用超类的数据（实例变量）。

我设计了一些样式来解决这个问题：

**风格一：使用私有实例变量并在子类中创建其他实例变量**

```
class SuperClass {
    private T data;

    public SuperClass(T data) { /* ... */}

    public abstract void doSomething();
}

class SubClass extends SuperClass {
    private T data; // use another variable

    public SubClass(T data) {
        super(data);
        this.data = data;
    }

    public void doSomething() {
        // use 'data'
        int length = data.getLength(); // for example...
    }
} 
```

**样式 2：使用受保护的实例变量：**

```
class SuperClass {
    protected T data;

    public SuperClass(T data) { /* ... */}

    public abstract void doSomething();
}

class SubClass extends SuperClass {
    public void doSomething() {
        // use 'data'
        int length = data.getLength(); // for example...
    }
} 
```

**风格 3：使用私有实例变量和受保护方法：**

```
class SuperClass {
    private T data;

    public SuperClass(T data) { /* ... */}

    public abstract void doSomething();

    protected T getData() {
        return data;
    }
}

class SubClass extends SuperClass {
    public void doSomething() {
        // use 'data'
        int length = getData.getLength(); // for example...
    }
} 
```

他们哪个更好？或者有更多的解决方案来更好地解决我的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T19:39:02.397

第三种方法通常是首选，如果您为**公共**子类设计，则必须这样做。超类希望尽可能多地控制其内部。

另一方面，如果您正在开发一个封闭的层次结构，它都在同一个包中，或者至少都在同一个项目中，如果有任何好处，您可以选择将 var 公开为受保护的。

但是，在子类中复制私有 var 无论如何都是失败的。我想不出任何有帮助的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:39:24.753

恕我直言，解决方案**#1**很差，因为它不必要地复制了引用，导致混淆（甚至与内存消耗或一致性无关）

解决方案**#2**和**#3**同样好。如果你让你的`data`领域`final`：

```
protected final T data; 
```

解决方案**＃2**是你能得到的最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:39:55.787

这取决于实际情况。例如，第一个解决方案可以仅在您需要的数据由构造函数传递时使用。第二个问题是扩展类可以访问字段本身（并且它们可以更改值）。第三种是将数据封装在类中的方法。

1.  如果您需要更改子类上的字段，您可以使用方法 2；
2.  如果您有数据作为构造函数，则方法 1;
3.  如果您只需要公开但保留封装的详细信息，请使用方法 3。

他们不是一回事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T19:40:32.257

我会使用第 2 版，因为它是最简单的。不过，我会尝试使数据最终确定。否则子类可能会在意想不到的时刻改变数据。

但除了个人喜好，这些方法差别不大。而且，如果发生的更改实际上使它们以某种相关方式有所不同，则很容易将其中一个重构为其他。

当然，总有一些更好的设计（可能根本没有继承）潜伏在某个地方的可能性，但我们无法从提供的信息中判断出来。

评论提示更新：

我经常看到的一个例子是：实现某种策略的子类（B 扩展 A）。在这些情况下，将策略对象作为参数实际传递给 A 可能更有意义，A 调用 B 的方法传入参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T19:50:36.997

*   **Style1 :** SuperClass.data 和 SubClass.data 是两个不同的变量，因此不能保证它们会引用同一个对象。
*   **Style2 ：**这会很好，但 SubClass 可以更改 SuperClass 变量的引用 - 例如。可以将变量设置为null。不清楚谁 - 哪些类 - 更新了变量。
*   **Style3 ：**我认为这是最好的方式，因为 SuperClass 真正封装和控制对成员变量的访问。
    我们还可以使 getData() 方法成为最终方法，这样设计就不会被滥用。

# ruby-on-rails - 我正在重构嵌套模型以使用 scope::syntax，如何更新我的 belongs_to 关系？

> ID：11401852
> 
> 赞同：0
> 
> 时间：2012-07-09T19:33:21.510
> 
> 标签：ruby-on-rails, ruby, activerecord

所以，我从这个出发：

```
def Book
 has_many :book_chapters

def BookChapter
 has_many :book_pages
 belongs_to :book

def BookPage
 belongs_to :book_chapters 
```

并将其转换为：

```
def Book
 has_many ?

def Book::Chapter
 has_many ? 
 belongs_to :book

def Book::Page
 belongs_to ? 
```

另外，老方法，我可以`<Book Object>.book_chapters`用新格式做类似的事情吗？

使用导轨 2.3.14

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:45:10.937

您可以明确告诉它要使用的类名，以便您可以根据需要命名关联。

所以：

```
class Book
 has_many :book_chapters, :class_name => "Book::Chapter"
end

class Book::Chapter
 has_many :book_pages, :class_name => "Book::Page"
 belongs_to :book
end

class Book::Page
 belongs_to :book_chapters, :class_name => "Book::Chapter"
end 
```

# ios - 如何以编程方式检查应用商店地区/国家/地区？

> ID：11401853
> 
> 赞同：4
> 
> 时间：2012-07-09T19:33:21.780
> 
> 标签：ios, objective-c, app-store, region, country

有没有办法检查它？我有一个应用程序 URL，如果用户有英国应用商店，我不想打开它。不幸的是，这个应用程序在许多国家都可以使用，所以当我在链接上加上“gb”时，它会被重定向到用户的本地区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-08-28T09:07:54.000

对于 iOS 13+，请查看`SKStoreFront`课程。它有一个`countryCode`返回属于用户当前 App Store 区域的国家代码。

**迅速**

```
if let storefront = SKPaymentQueue.default().storefront {
    print(storefront.countryCode) // Returns an Alpha-3 country code (USA, GBR etc.)
} 
```

**对象 C**

```
[SKPaymentQueue defaultQueue].storefront.countryCode; // Returns an Alpha-3 country code (USA, GBR etc.) 
```

`SKStoreFront`即使您的应用程序不提供任何购买，您也应该能够通过将 StoreKit 框架添加到您的项目来访问该实例。

有关更多信息，请查看：[https ://developer.apple.com/documentation/storekit/skstorefront](https://developer.apple.com/documentation/storekit/skstorefront)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:04:18.443

您可以使用应用内购买[商店套件](http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/StoreKit_Collection/_index.html#//apple_ref/doc/uid/TP40008300)来实现此目的。

使用 SKProductsRequest 请求产品列表，然后检查返回的 SKProduct 的 priceLocale 以查看用户的 AppStore 是否是英国的。

# javabeans - 如何在从 XPage 调用的 Java Bean 中使用 SessionAsSigner？

> ID：11401862
> 
> 赞同：2
> 
> 时间：2012-07-09T19:33:38.767
> 
> 标签：javabeans, xpages, xpages-ssjs

根据 Phillip Riand（参见：[关于 openNTF](http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/7ed6124389b50293862579b6005a3af7!OpenDocument)的讨论）的说法，这是不可能的……他们需要知道设计元素才能找出签名的人。因此，它仅在 SSJS 中可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:33:39.330

我发现解决方案就在眼前:-)

我将 XPage（在本例中为 XAgent）更改为：

```
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" rendered="false">

This is an xAgent returning json data...

<xp:this.afterRenderResponse><![CDATA[#{javascript:Controller.verify(sessionAsSigner)}]]></xp:this.afterRenderResponse> 
```

在bean中，当我需要打开数据库/文档作为签名者时，我只是在参数中使用了会话。有时解决方案是如此简单:-)

/约翰

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T16:50:23.290

我知道有两种方法可以在 Java bean中使用**sessionAsSigner对象：**

1 通过解析 sessionAsSigner 对象：

```
FacesContext context = FacesContext.getCurrentInstance();
Session sessionAsSigner = context.getApplication().getVariableResolver().
        resolveVariable(context, "sessionAsSigner"); 
```

2 通过使用扩展库中**com.ibm.xsp.extlib.util.ExtLibUtil**类的**getCurrentSessionAsSigner()**函数。

 **为了能够使用它（在 Java 和 SSJS 中），您需要确保所有设计元素都由相同的用户 ID 签名。如果不是这种情况，则 sessionAsSigner 对象将不可用（“未定义”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T11:57:30.227

这是一个很老的帖子，我只是偶然发现的。尝试了上面提到的一些解决方案：

1.  `resolveVariable`对我不起作用，至少不是`sessionAsSigner`因为这会引发运行时错误（`session`不过，我可以解决普通的旧问题......）

2.  老实说，我不太了解 Controller.verify(sessionAsSigner) 方法；控制器是 XAgent 特有的东西吗？如果是这样，我这里没有 XAgent，所以不能使用它

3.  不想在这里导入额外的 ExtLib 类...

所以我想出了另一个看起来很简单的解决方案：

在我的 javaBean 中创建了一个将会话对象作为参数的方法；由于 sessionAsSigner 与 session 属于同一类，因此我不必导入新的东西。

Java代码是：

```
public void testSession(Session s) throws Exception{
        System.out.println(" > test effective user for this session = " 
             + s.getEffectiveUserName());
} 
```

这是从 SSJS 调用的

```
mybean.testSession(session); 
```

或者

```
myBean.testSession(sessionAsSigner); 
```

也许也能帮助别人**

# php - 我可以将 VC9 编译的 PHP 与 Apache 一起使用吗？

> ID：11401865
> 
> 赞同：4
> 
> 时间：2012-07-09T19:33:51.880
> 
> 标签：php, apache, visual-c++-6, visual-c++-2008

根据 Windows Binaries 下载页面[http://windows.php.net/download/](http://windows.php.net/download/)

> 不要将**VC9**版本与 apache.org 二进制文件一起使用

这还成立吗？唯一的 VC6 二进制文件适用于 PHP 5.2，我相信 Microsoft 不再支持 VC6？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:43:28.360

使用 VC6 Apache（这是 apache.org 构建的）不适用于 PHP VC9。

PHP.net 建议您使用来自[ApacheLounge](http://apachelounge.com/)的 Apache 二进制文件，它们是用 VC9 构建的并且可以工作。

# android - iOS 和 Android 设备之间的点对点通信

> ID：11401871
> 
> 赞同：6
> 
> 时间：2012-07-09T19:34:36.723
> 
> 标签：android, ios, p2p, gamekit

所以我是一个相对较新的 iOS 开发人员，但由于 Stackoverflow，我设法让我的应用程序在不需要使用 gamekit/GKSessions 的服务器的情况下进行点对点数据通信。基本上，一台 iOS 设备充当服务器，而其他设备只是连接到它以接收特定于应用程序的数据。

现在，该应用程序目前正在 Android 上移植，我想知道是否有一种方法可以让 Android 设备连接到 iOS 应用程序，并以与 ios 应用程序相同的方式运行。Android 开发人员建议 alljoyn 是 android 的最佳解决方案，但似乎还没有适用于 iOS。

如果您对这方面有任何想法，请提出建议。如果有一个解决方案也涉及 iOS 方面的返工，那么我愿意接受！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:39:22.833

如果您或其他在 2013 年 1 月解决相同问题的人需要答案，AllJoyn 现在也已准备好用于 iOS 以及其他平台。

[https://www.alljoyn.org/docs-and-downloads](https://www.alljoyn.org/docs-and-downloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:03:31.270

Venkat 我建议您阅读并获取有关 P2P 的一些详细信息。这是一个[很好的来源](http://www.brynosaurus.com/pub/net/p2pnat/#rfc3027)，因为如果两个设备都落后于多个 Nat，您可能会卡住。但如果你愿意前进，总有办法。我的建议是中继，但您需要有一个服务器，但中继的行为类似于 P2P。查看上面的来源以获得想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:00:53.250

我没有时间等待为 iOS 启动 alljoyn 并且感觉没有其他可行的解决方案适合我的时间线，我在两者之间实现了一个中继服务器来实现这一点。

不过，对于其他人，iOS 绑定现在可用于 alljoyn (www.alljoyn.org)。我还没有尝试过，但我的应用程序的 android 版本可以与 alljoyn 一起使用，而且效果很好，所以我认为它对 iOS 也可以。

使用 alljoyn 要考虑的一个限制是它不能在不同子网后面的设备之间进行通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-29T09:01:22.430

我认为 IOS 和 Android 派生的最大对等连接（最多 8 个对等连接）存在限制，在 IOS 和 Android 设备之间没有使用 alljoyn 测试连接

# javascript - Bootstrap Typeahead 仅显示第一个字母

> ID：11401875
> 
> 赞同：4
> 
> 时间：2012-07-09T19:34:54.687
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个小问题让这个工作。

服务器以正确的 json 请求响应，但是 typeahead 仅显示我返回结果的第一个字母。例如，如果我键入 k，它将显示：
k
k
K
k

你能帮我弄清楚为什么吗？

这是我的js

```
$('.user').typeahead({
source : function(typeahead, query) {
    return $.post('getUser', {
        query : query
    }, function(data) {
        return typeahead.process(data);
    });
}
}); 
```

和我的html

```
<input autocomplete="off" type="text" size="16" id="appendedInputButton" class="user" data-provide="typeahead"> 
```

我正在使用以下代码

[https://gist.github.com/1866577](https://gist.github.com/1866577)

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:38:31.807

如果服务器响应具有属性“联系人”的对象数组，请尝试以下操作：

```
$('.user').typeahead({
  source : function(typeahead, query) {
      return $.post('getUser', {
          query : query
      }, function(data) {
          return typeahead.process(JSON.parse(data));
      });
  },
  property : 'contact'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:26:06.973

今天自己也遇到了同样的问题，发现我需要确定并做

```
data-source="['THING1','THINGS2']" 
```

先加**双引号**，再加**单引号**。我最初对此进行了逆转，只收到了一封信。另外，请确保在数组末尾没有尾随**,**因为这也会导致只出现一个字母。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-31T08:34:44.947

删除类 =“用户”。它将开始显示整个事情。

# iphone - 无法从字符串转换为 NSDate

> ID：11401876
> 
> 赞同：0
> 
> 时间：2012-07-09T19:34:58.933
> 
> 标签：iphone, nsdateformatter

下面是从服务器收到的日期字符串

```
2012-07-05T11:18:00-04:00 or 2012-12-05T10:26:00-05:00 
```

据我所知 04:00 和 05:00 是数字时区偏移量。它们可能是 +04:00 或 +05:00

**我的问题是：**

如果现在时区偏移量不同，`setDateFormat`我该如何设置？`NSDateFormat`

如果您有任何线索，请就这个问题给我建议

欢迎所有评论在这里。

编辑：如果我这样做：

```
NSDateFormatter *format                 =   [[NSDateFormatter alloc] init];
[format setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'-'04':'00"]; 
```

如果日期字符串为 . 则它不起作用`2012-12-05T10:26:00-05:00`。因此我正在寻找一种通用格式，以便它适用于这两种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:37:42.023

尝试`@"yyyy-MM-dd'T'HH:mm:ssZZZ"`或`@"yyyy-MM-dd'T'HH:mm:ss ZZZ"`作为 setDateFormat: 参数。

# javascript - jqGrid：表格格式中复选框的预期行为

> ID：11401878
> 
> 赞同：1
> 
> 时间：2012-07-09T19:35:05.673
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jqGrid 来显示数据列表。每行在最左侧都有一个复选框，顶行用作列标题。列标题最左侧的复选框充当正在显示的所有行的“全选”按钮。在这种情况下，如果用户手动选择每一行的所有复选框，“全选”复选框是否应该自动选择自己？

有关相关复选框，请参见附图。![在此处输入图像描述](../Images/f7a0a9a7fcbaee116de742c1ae5118df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:38:37.377

没有必要。不过会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:44:02.773

你可以这样做： -

```
$("#selectAll").click(function(){
    grid.jqGrid('resetSelection');
    var ids = grid.getDataIDs();
    for (var i=0, il=ids.length; i < il; i++) {
      grid.jqGrid('setSelection',ids[i], true);
    }
});

$("#clear").click(function(){
    grid.jqGrid('resetSelection');
});
​ 
```

*   这个例子取自[这里](http://www.ok-soft-gmbh.com/jqGrid/DataToMultiSelect1.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T06:43:56.493

在我的观点（以及我的客户的要求）看来，**这是必要的**。我想确保在我的网格中选中标题复选框的主要原因是，用户可以下意识地确定是的，网格中的所有行现在都肯定被选中。如果您考虑，jqgrid 中的许多行（某些行不可见），我如何确保选择所有行（？）。

# java - 异步pdf生成播放框架

> ID：11401879
> 
> 赞同：3
> 
> 时间：2012-07-09T19:35:08.187
> 
> 标签：java, pdf, playframework

以前有没有人这样做过。我无法理解提供的示例游戏。

```
Promise<InputStream> pdf = new ReportAsPDFJob(report).now();
InputStream pdfStream = await(pdf);
renderBinary(pdfStream); 
```

我知道如何在播放框架中工作，但是在播放中使用 pdf 模块如何返回输入流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:09:20.903

这个例子只是为了展示一个长时间运行的进程，以及它如何与 Job 一起使用。没有 ReportAsPDFJob 对象。

其次，提供的 PDF 模块用于使用 renderPDF 方法从控制器进行渲染。这会导致抛出 Result，而不是创建 Promise。

为了让它工作，你应该看看 PDF 模块，看看如何将它转换为返回一个 Promise，而不是抛出一个 Result。

# grails - Grails 部署 XAMPP Tomcat

> ID：11401881
> 
> 赞同：1
> 
> 时间：2012-07-09T19:35:14.720
> 
> 标签：grails, xampp, tomcat7

我正准备使用 XAMPP Tomcat 服务器测试我的 grails 应用程序以进行检查。我按照[此处](http://ist.mns.kyutech.ac.jp/miura/inlinelink/warinstall.html)关于如何将`.war`文件部署到 Tomcat 的 web-app 文件夹中的说明进行操作。

该项目确实部署在 Tomcat 的工作区中，但是当我尝试启动项目并重新启动 Tomcat 时，我收到以下错误消息：

> 失败 - 上下文路径/[项目名称] 处的应用程序无法启动

我也尝试使用命令`grails> tomcat deploy`，我在控制台上收到此错误消息：

> Error Error 执行脚本 Tomcat: : java.io.IOException: Server returned HTTP response code: 403 for URL: http://localhost:8080/manager/deploy?path=%2F[Project Name] （使用 --stacktrace 查看完整的跟踪）

我的问题是使用以下 Tomcat 规范部署 Grails 应用程序的正确方法是什么：

*   Tomcat 版本：Apache Tomcat/7.0.21
*   JVM版本：1.6.0_31-b05

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:26:52.743

[创建战争](http://grails.org/doc/latest/ref/Command%20Line/war.html)文件：

```
grails prod war 
```

`target`使用您的应用名称和版本检查文件夹是否存在战争。

然后将文件移动到`webapps`Tomcat的文件夹中。如果 Tomcat[配置为自动部署](http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html#Deployment_on_Tomcat_startup)，您将看到 webapps 中提取的 war 文件的内容。

最后只要打开 localhost:8080/yourapp/

# netbeans - Netbeans - 打开远程文件夹/新项目

> ID：11401882
> 
> 赞同：7
> 
> 时间：2012-07-09T19:35:17.310
> 
> 标签：netbeans, netbeans-7, netbeans-7.1

我已经使用 Netbeans 几个月了，并且非常喜欢它。我正在尝试启用一种方法来创建一个项目，该项目访问我的服务器上的实时文件以进行更改。当我使用远程源创建项目时，它开始将所有服务器文件下载到我的计算机上。这很好，除了（a）服务器上有一些文件和（b）我们两个人将在服务器上进行更改。

过去，我曾使用仅打开 FTP 或 SFTP 连接并下载您要编辑的文件，然后在保存文件时将该文件上传回服务器的 IDE。最好这是我希望 Netbeans 做的事情。

我曾尝试在 Windows 中添加一个 FTP 文件夹，但 Netbeans 不会打开它。我曾尝试使用 Swish 并设置 SFTP 文件夹，但 Netbeans 完全找不到 Swish 文件夹。

顺便说一句，我知道我在做的是可怕的做法，但它是一个小网站，我通常是唯一一个在做这件事的人。过去几周我没有在网站上工作，只是认为直接访问比重新下载整个服务器的代码/图像/视频/等更容易。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:34:21.727

NetBeans 不支持您想做的事情。但是，如果您将您的站点置于 Subversion/Git（修订控制）之下，您可以检查内容，在本地对其进行修改，然后远程将修改推送回来。

当您的朋友也在您的网站上工作时，这也有助于避免代码冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-13T14:59:38.423

实际上 Netbeans 支持 php 项目。只需选择：

> 来自远程服务器的 PHP 应用程序 ![在此处输入图像描述](../Images/0fb13bb365b8a14722b52227c579da2a.png)

（但 git 是最好的解决方案，因为它也为您提供版本控制，但如果您希望在按下 ctr+s 时更新服务器文件，上述方法很有用）

# apache - 跨进程共享的连接池？

> ID：11401888
> 
> 赞同：2
> 
> 时间：2012-07-09T19:35:34.887
> 
> 标签：apache, sqlalchemy

当发生足够多的请求时，我的 Web 应用程序会用完与数据库的连接槽。尽管将其设置为运行似乎是保守大小的连接池，并且我限制了进程和线程的数量。我是否正确地认为连接池是跨线程共享的，而不是进程共享的？选择连接池大小、进程数和线程数的良好组合，同时避免耗尽数据库连接的好策略是什么？

我看到的错误：

> OperationalError: (OperationalError) FATAL: 剩余的连接槽是为非复制超级用户连接保留的

/etc/postgresql/9.1/main/postgresql.conf：

```
 max_connections = 100 
```

应用程序.ini：

```
 sqlalchemy.pool_size = 1
   sqlalchemy.max_overflow = 5 
```

阿帕奇配置：

```
 WSGIDaemonProcess test1 processes=5 threads=10 maximum-requests=10000
   WSGIProcessGroup test1 
```

查看进程： $ ps aux |grep postgres |wc 在合理的负载下，这可以增加到 102 并保持在那里，尽管许多连接处于空闲状态，并且出现错误。

# ruby-on-rails - Rails 3：has_one 的路由和复数问题

> ID：11401889
> 
> 赞同：1
> 
> 时间：2012-07-09T19:35:50.420
> 
> 标签：ruby-on-rails, rails-activerecord, plural

我为 Etho 创建了一个脚手架，我试图让用户获得 1 个单一的“ethos”进行编辑。Ethos 正在工作，但在 User 模型上它只与 has_many 一起工作：ethos

用户应该只得到 1，所以我可以创建更好的关联。但是现在当我改变模型时，它会产生我无法追踪的蜘蛛效应。

用户型号：

```
class User < ActiveRecord::Base
  has_many :jobs
  has_one  :ethos #used to be has_many :ethos 
```

现在在所有页面上，我在 EthosController#edit 上得到未初始化的常量 User::Ethos

请帮忙，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:38:22.337

你有没有尝试过？

```
class User < ActiveRecord::Base
  has_many :jobs
  has_one  :etho 
```

`has_one`应该是单数：http: [//guides.rubyonrails.org/association_basics.html#the-has_one-association](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T17:24:33.370

您可以通过明确指定关联来继续使用*ethos复数名称：*`class_name``has_one`

```
class User < ActiveRecord::Base
  has_many :jobs
  has_one  :ethos, class_name: 'Ethos' 
```

此答案提供了更多详细信息：[https ://stackoverflow.com/a/6604247/37966](https://stackoverflow.com/a/6604247/37966)

# lua - 不区分大小写的 Lua 模式匹配

> ID：11401890
> 
> 赞同：14
> 
> 时间：2012-07-09T19:35:56.260
> 
> 标签：lua, pattern-matching, case-insensitive

我正在为运行 Windows CE 6/7 的移动设备在 Lua 中编写一个 grep 实用程序，但我遇到了一些实现不区分大小写匹配模式的问题。由于字符类，将所有内容转换为大写（或小写）的明显解决方案并不那么简单。

我能想到的唯一另一件事是将模式本身中的文字转换为大写。

这是我到目前为止所拥有的：

```
function toUpperPattern(instr)
    -- Check first character
    if string.find(instr, "^%l") then
        instr = string.upper(string.sub(instr, 1, 1)) .. string.sub(instr, 2)
    end
    -- Check the rest of the pattern
    while 1 do
        local a, b, str = string.find(instr, "[^%%](%l+)")
        if not a then break end
        if str then
            instr = string.sub(instr, 1, a) .. string.upper(string.sub(instr, a+1, b)) .. string.sub(instr, b + 1)
        end
    end
    return instr
end 
```

我不想承认甚至需要多长时间才能走得那么远，而且我仍然可以立即看到诸如逃脱的百分号“%%”之类的问题将会出现

我认为这一定是一个相当普遍的问题，但我似乎找不到太多关于该主题的内容。有没有更简单（或至少完整）的方法来做到这一点？我在这里开始发疯了......希望你们那里的Lua大师能启发我！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T20:19:47.387

尝试这样的事情：

```
function case_insensitive_pattern(pattern)

  -- find an optional '%' (group 1) followed by any character (group 2)
  local p = pattern:gsub("(%%?)(.)", function(percent, letter)

    if percent ~= "" or not letter:match("%a") then
      -- if the '%' matched, or `letter` is not a letter, return "as is"
      return percent .. letter
    else
      -- else, return a case-insensitive character class of the matched letter
      return string.format("[%s%s]", letter:lower(), letter:upper())
    end

  end)

  return p
end

print(case_insensitive_pattern("xyz = %d+ or %% end")) 
```

打印：

```
[xX][yY][zZ] = %d+ [oO][rR] %% [eE][nN][dD]
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-04T06:55:08.653

Lua 5.1，LPeg v0.12

```
do
    local p = re.compile([[
        pattern  <- ( {b} / {escaped} / brackets / other)+
        b        <- "%b" . .
        escaped  <- "%" .
        brackets <- { "[" ([^]%]+ / escaped)* "]" }
        other    <- [^[%]+ -> cases
    ]], {
        cases = function(str) return (str:gsub('%a',function(a) return '['..a:lower()..a:upper()..']' end)) end
    })
    local pb = re.compile([[
        pattern  <- ( {b} / {escaped} / brackets / other)+
        b        <- "%b" . .
        escaped  <- "%" .
        brackets <- {: {"["} ({escaped} / bcases)* {"]"} :}
        bcases   <- [^]%]+ -> bcases
        other    <- [^[%]+ -> cases
    ]], {
        cases = function(str) return (str:gsub('%a',function(a) return '['..a:lower()..a:upper()..']' end)) end
        , bcases = function(str) return (str:gsub('%a',function(a) return a:lower()..a:upper() end)) end
    })
    function iPattern(pattern,brackets)
        ('sanity check'):find(pattern)
        return table.concat({re.match(pattern, brackets and pb or p)})
    end
end

local test                  = '[ab%c%]d%%]+ o%%r %bnm'
print(iPattern(test))       -- [ab%c%]d%%]+ [oO]%%[rR] %bnm
print(iPattern(test,true))  -- [aAbB%c%]dD%%]+ [oO]%%[rR] %bnm
print(('qwe [%D]% O%r n---m asd'):match(iPattern(test, true))) -- %D]% O%r n---m 
```

* * *

纯 Lua 版本：

有必要分析字符串中的所有字符以将其转换为正确的模式，因为 Lua 模式不像正则表达式 (abc|something) 中那样具有交替。

```
function iPattern(pattern, brackets)
    ('sanity check'):find(pattern)
    local tmp = {}
    local i=1
    while i <= #pattern do              -- 'for' don't let change counter
        local char = pattern:sub(i,i)   -- current char
        if char == '%' then
            tmp[#tmp+1] = char          -- add to tmp table
            i=i+1                       -- next char position
            char = pattern:sub(i,i)
            tmp[#tmp+1] = char
            if char == 'b' then         -- '%bxy' - add next 2 chars
                tmp[#tmp+1] = pattern:sub(i+1,i+2)
                i=i+2
            end
        elseif char=='[' then           -- brackets
            tmp[#tmp+1] = char
            i = i+1
            while i <= #pattern do
                char = pattern:sub(i,i)
                if char == '%' then     -- no '%bxy' inside brackets
                    tmp[#tmp+1] = char
                    tmp[#tmp+1] = pattern:sub(i+1,i+1)
                    i = i+1
                elseif char:match("%a") then    -- letter
                    tmp[#tmp+1] = not brackets and char or char:lower()..char:upper()
                else                            -- something else
                    tmp[#tmp+1] = char
                end
                if char==']' then break end -- close bracket
                i = i+1
            end
        elseif char:match("%a") then    -- letter
            tmp[#tmp+1] = '['..char:lower()..char:upper()..']'
        else
            tmp[#tmp+1] = char          -- something else
        end
        i=i+1
    end
    return table.concat(tmp)
end

local test                  = '[ab%c%]d%%]+ o%%r %bnm'
print(iPattern(test))       -- [ab%c%]d%%]+ [oO]%%[rR] %bnm
print(iPattern(test,true))  -- [aAbB%c%]dD%%]+ [oO]%%[rR] %bnm
print(('qwe [%D]% O%r n---m asd'):match(iPattern(test, true))) -- %D]% O%r n---m 
```

# automapper - 使用 AutoMapper for Silverlight 映射到内部类型

> ID：11401891
> 
> 赞同：0
> 
> 时间：2012-07-09T19:35:58.573
> 
> 标签：automapper

如何配置我的应用程序以便 AutoMapper 可以映射到 Silverlight 5 中的内部类型和/或属性？例如，我有以下类型：

```
internal class SomeInfo
{
    public String Value { get; set; }
} 
```

我尝试将此类型作为目标调用 Mapper.DynamicMap，但在运行时收到以下错误：

> 尝试通过安全透明方法“DynamicClass.SetValue(System.Object, System.Object)”访问安全关键类型“Acme.SomeInfo”失败。

我尝试先实例化类，然后将实例传递给 DynamicMap 以及使用属性的内部设置器将类范围更改为公共。我还用 [SecuritySafeCritical] 属性标记了该类。所有这些测试都导致相同的错误消息。

我能够克服这个问题的唯一方法是完全公开具有公共范围和公共设置器的类。当然，这是一个问题，因为我正在开发一个将被其他开发人员使用的类库，并且使用“内部”范围是隐藏实现细节以及确保代码仅按预期使用的深思熟虑的策略（遵循没有来自 DDD 和 CQRS 的公共二传手概念）。

也就是说，我该怎么做才能使 AutoMapper 可以使用内部类型和/或属性？

（注意：该类库是为 SL5 构建的，并用于配置为以提升的信任度在浏览器外运行的客户端应用程序中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:26:57.673

这更像是 Silverlight 的限制 - 它不允许从外部程序集反射私有/受保护/内部成员，请参阅：

[http://msdn.microsoft.com/en-us/library/stfy7tfc(VS.95).aspx](http://msdn.microsoft.com/en-us/library/stfy7tfc%28VS.95%29.aspx)

简而言之 - AutoMapper 无法访问程序集的内部成员。

# jquery - modernizr 脚本序列和 IE9

> ID：11401892
> 
> 赞同：2
> 
> 时间：2012-07-09T19:36:03.370
> 
> 标签：jquery, modernizr

我在我的文档头部加载 jquery 和 modernizr，如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/modernizr-columntest.js"></script> 
```

“columntest.js”有一些直接来自他们的生成器的自定义modernizr代码，在它的末尾粘贴了一个小的yepnope调用，有条件地加载一个插件：

```
Modernizr.load({
  test: Modernizr.csscolumns,
  nope: 'js/jquery.masonry.js'
}); 
```

但是插件在 IE9 中没有正确触发。经过大量的头疼之后，我注意到在 IE9 开发工具中，带有条件加载脚本的脚本标记被动态附加到我放置modernizr 脚本的任何元素中。如果modernizr 脚本在头部，则生成的脚本标记出现在IE 开发工具中的头部。如果我把它放在正文中的modernizr 调用中，生成的脚本就会出现在正文中。

但问题似乎是插件脚本被放置*在*jquery 脚本之前。而且插件需要jquery才能工作。尽管我在标记中的 jquery 脚本标签之后编写了modernizr 脚本标签，但在 jquery 脚本之前将后备“nope”脚本注入到页面中。嗯？

我仍在适应异步的工作。有人可以解释如何解决这个问题吗？（无论如何，我总是需要为页面上的其他元素调用 jquery，所以我不能真正以任何modernizr 测试为条件加载 jquery。）

**更新**

好的，所以现在我（试图）异步调用所有内容。头中的脚本标签声明如下：

```
<script src="js/modernizr-columntest.js"></script>
<script src="js/envision-scriptloader.js"></script> 
```

脚本加载器文件包含以下内容：

```
Modernizr.load([
    'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
    {
        test: Modernizr.csscolumns,
        nope: 'jquery.masonry.min-pluscall.js'
    },
    {
        load: ["js/jquery-smoothscroll.js","js/jquery.colorbox-min.js"],
        complete: function() {
            $.colorbox.settings.fixed = true;
                   // MISCELLANEOUS SETTINGS ETC
            $(document).ready(function() {
                $('.thumbnail').colorbox({
                    innerWidth: 800,
                });
            });
        }
    }
]); 
```

但令人费解的是，砌体插件根本不会触发。在 IE 9 开发工具中，html 检查器中的脚本仍然以相对于 jquery 的相反顺序出现。更奇怪的是，masonry 脚本在生成的代码中出现了两次，一次在 jquery 之前，一次在之后。（！）它看起来像这样：

```
<script src="js/jquery.masonry.min-pluscall.js"></script>
<script src="js/jquery-smoothscroll.js"></script>
<script src="js/jquery.colorbox-min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="jquery.masonry.min-pluscall.js"></script>
<script src="js/modernizr-columntest.js"></script>
<script src="js/envision-scriptloader2.js"></script> 
```

帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:42:42.827

好吧，你已经解决了这个问题。问题是 jQuery 是同步加载的，而你的插件是异步加载的，在 IE 中，插件会先加载，但实际上，这可能发生在任何浏览器的任何时候。解决方案是异步加载 jQuery，然后在`complete`分支中加载你的插件：

```
Modernizr.load({
    load: 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
    complete: function(){
        Modernizr.load({
            test: Modernizr.csscolumns,
            nope: 'js/jquery.masonry.js'
        });
    });
}); 
```

**编辑**

实际上，从技术上讲，您需要做的就是将它们按顺序排列。这也将起作用：

```
Modernizr.load([
    'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
    {
        test: Modernizr.csscolumns,
        nope: 'js/jquery.masonry.js'
    }
 ]); 
```

# javascript - 使用 Javascript 获取当前域名（不是路径等）

> ID：11401897
> 
> 赞同：374
> 
> 时间：2012-07-09T19:36:15.017
> 
> 标签：javascript, domain-name

我计划为同一个站点购买两个域名。根据使用的域，我计划在页面上提供略有不同的数据。有没有办法让我检测到页面加载的实际域名，以便我知道将我的内容更改为什么？

我四处寻找这样的东西，但大多数都没有按照我想要的方式工作。

例如使用时

```
document.write(document.location) 
```

在[JSFiddle](http://jsfiddle.net/LSAP5/)上它返回

> `http://fiddle.jshell.net/_display/`

即实际路径或任何内容。

* * *

## 回答 #1

> 赞同：642
> 
> 时间：2012-07-09T19:38:18.183

怎么样：

```
window.location.hostname 
```

该`location`对象实际上有[许多属性](https://developer.mozilla.org/en-US/docs/Web/API/Location#wikiArticle)引用 URL 的不同部分

* * *

## 回答 #2

> 赞同：447
> 
> 时间：2019-02-14T13:40:56.697

假设你有这个 url 路径：

***http://localhost:4200/landing?query=1#2***

因此，您可以通过**location values**为自己服务，如下所示：

```
window.location.hash: "#2"
​
window.location.host: "localhost:4200"
​
window.location.hostname: "localhost"
​
window.location.href: "http://localhost:4200/landing?query=1#2"
​
window.location.origin: "http://localhost:4200"
​
window.location.pathname: "/landing"
​
window.location.port: "4200"
​
window.location.protocol: "http:"

window.location.search: "?query=1" 
```

现在我们可以得出结论，您正在寻找：

```
window.location.hostname 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-11-12T19:04:23.980

如果您对主机名（例如`www.beta.example.com`）不感兴趣，但对域名（例如 ）感兴趣，则`example.com`这适用于有效的主机名：

```
function getDomainName(hostName)
{
    return hostName.substring(hostName.lastIndexOf(".", hostName.lastIndexOf(".") - 1) + 1);
} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-06-16T20:22:11.517

```
function getDomain(url, subdomain) {
    subdomain = subdomain || false;

    url = url.replace(/(https?:\/\/)?(www.)?/i, '');

    if (!subdomain) {
        url = url.split('.');

        url = url.slice(url.length - 2).join('.');
    }

    if (url.indexOf('/') !== -1) {
        return url.split('/')[0];
    }

    return url;
} 
```

**例子**

*   getDomain(' [http://www.example.com](http://www.example.com) '); //example.com
*   getDomain('www.example.com'); //example.com
*   getDomain(' [http://blog.example.com](http://blog.example.com) ', true); // blog.example.com
*   获取域（位置.href）；// ..

*以前的版本正在获得完整的域（包括子域）。现在它根据偏好确定正确的域。因此，当第二个参数提供为 true 时，它​​将包含子域，否则仅返回“主域”*

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-01-10T14:00:45.427

您可以轻松地从 Javascript 中的位置对象获取它：

例如此页面的 URL 是：

```
http://www.stackoverflow.com/questions/11401897/get-the-current-domain-name-with-javascript-not-the-path-etc 
```

然后我们可以通过位置对象的以下属性获得确切的域：

```
location.host = "www.stackoverflow.com"
location.protocol= "http:" 
```

您可以使用以下方法创建完整域：

```
location.protocol + "//" + location.host 
```

在这个例子中返回`http://www.stackoverflow.com`

我加上这个，我们可以获得完整的 URL 以及具有位置对象其他属性的路径：

```
location.href= "http://www.stackoverflow.com/questions/11401897/get-the-current-domain-name-with-javascript-not-the-path-etc"    
location.pathname= "questions/11401897/get-the-current-domain-name-with-javascript-not-the-path-etc" 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-09T19:53:05.417

如果您只对域名感兴趣并且想忽略子域，那么您需要将其解析出`host`and `hostname`。

以下代码执行此操作：

```
var firstDot = window.location.hostname.indexOf('.');
var tld = ".net";
var isSubdomain = firstDot < window.location.hostname.indexOf(tld);
var domain;

if (isSubdomain) {
    domain = window.location.hostname.substring(firstDot == -1 ? 0 : firstDot + 1);
}
else {
  domain = window.location.hostname;
} 
```

[http://jsfiddle.net/5U366/4/](http://jsfiddle.net/5U366/4/)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-12-11T05:18:30.620

由于这个问题要求的是域名，*而不是*主机名，因此正确答案应该是

```
window.location.hostname.split('.').slice(-2).join('.') 
```

这也适用于像[www.example.com](http://www.example.com)这样的主机名。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-07-09T19:38:23.037

采用

```
document.write(document.location.hostname)​ 
```

`window.location`有一堆属性。有关它们的列表，请参见[此处](https://developer.mozilla.org/en/DOM/window.location)。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-06-25T14:10:39.357

如果你想要一个完整的域来源，你可以使用这个：

```
document.location.origin 
```

如果您只想获得域，请使用 can you just this：

```
document.location.hostname 
```

但是您还有其他选择，请查看以下属性：

```
document.location 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-01-30T12:41:36.660

`window.location.hostname`是一个好的开始。但它包括您可能想要删除的子域。例如，如果主机名是`www.example.com`，您可能只需要`example.com`一点。

与以往一样，有一些极端情况会使这变得繁琐，例如`bbc.co.uk`. 以下正则表达式对我很有效：

```
let hostname = window.location.hostname;
// remove any subdomains, e.g. www.example.com -> example.com
let domain = hostname.match(/^(?:.*?\.)?([a-zA-Z0-9\-_]{3,}\.(?:\w{2,8}|\w{2,4}\.\w{2,4}))$/)[1];
console.log("domain: ", domain);
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-11-06T10:24:21.957

如果要在 JavaScript 中获取域名，只需使用以下代码：

```
var domain_name = document.location.hostname;
alert(domain_name); 
```

如果您需要网页 URL 路径以便可以访问 Web URL 路径，请使用以下示例：

```
var url = document.URL;
alert(url); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-12-16T20:28:08.497

这个功能怎么样？

```
window.location.hostname.match(/\w*\.\w*$/gi)[0] 
```

这将只匹配域名，无论它是子域还是主域

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-09-19T16:10:30.593

我认为它应该像这样简单：

`url.split("/")[2]`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-11-26T15:07:46.383

就我而言，最好的匹配是 window.location.origin

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-04-07T11:03:36.423

结合上面的一些答案，以下内容对我来说非常适合销毁 Cookie：

```
 /**
   * Utility method to obtain the domain URI:
   */
  fetchDomainURI() {
    if (window.location.port.length > 0) {
      return window.location.hostname;
    }
    return `.${window.location.hostname.match(/\w*\.\w*$/gi)[0]}`;
  } 
```

适用于带有端口的 IP 地址，例如 0.0.0.0:8000 等，以及`app.staging.example.com`返回`.example.com`=> 等复杂域，允许跨域 Cookie 设置和销毁。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-01-15T20:06:48.843

我是 JavaScript 新手，但你不能只使用：*document.domain*吗？

例子：

```
<p id="ourdomain"></p>

<script>
var domainstring = document.domain;
document.getElementById("ourdomain").innerHTML = (domainstring);
</script> 
```

输出：

```
domain.com 
```

或者

```
www.domain.com 
```

取决于您在网站上使用的内容。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-09-27T20:34:28.857

即使问题是关于域名的，接受的解决方案也包括子域（例如，你会`blog.example.com`打电话`location.hostname`）。为了将来参考，我建议使用单线仅提取域（例如`https://blog.example.com/index.html`-> `example.com`）作为 Micheal。

```
location.hostname.split('.').filter(( _, i) => i < 2).join('.') 
```

谨防！当 TLD 由两部分（例如`.co.uk`）组成时，它可能会中断。如果这是您的情况，请在上面的代码中将 2 更改为 3。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-09T10:38:06.933

[https://publicsuffix.org/list/](https://publicsuffix.org/list/)

（[https://github.com/publicsuffix/list/blob/master/public_suffix_list.dat](https://github.com/publicsuffix/list/blob/master/public_suffix_list.dat)）

需要正确解析所有没有后缀的域，使用上述答案中的点永远不会完全正确。随意针对公共后缀 dat 文件运行上述代码示例以实现这一点。

您可以基于此滚动您自己的代码或使用像[https://www.npmjs.com/package/tldts这样的包](https://www.npmjs.com/package/tldts)

```
getDomainWithoutSuffix('google.com');        // returns `google`
getDomainWithoutSuffix('fr.google.com');     // returns `google`
getDomainWithoutSuffix('fr.google.google');  // returns `google`
getDomainWithoutSuffix('foo.google.co.uk');  // returns `google`
getDomainWithoutSuffix('t.co');              // returns `t`
getDomainWithoutSuffix('fr.t.co');           // returns `t`
getDomainWithoutSuffix('https://user:password@example.co.uk:8080/some/path?and&query#hash'); // returns `example` 
```

* * *

## 回答 #19

> 赞同：-4
> 
> 时间：2019-11-25T04:02:10.700

随意访问我们的“<a `href="javascript:document.location.href=document.location.origin+'/contact-us'"`title="点击联系我们" class="coded_link" >联系”链接

[确实为我工作，而我不能使用 PHP](https://i.stack.imgur.com/zWYSu.png)

[由于上面在一些答案中提到的方法，刚刚测试它是否有效，如此快速且经过验证，有效](https://i.stack.imgur.com/1i2fg.png)

# json - json无限递归与spring roo

> ID：11401899
> 
> 赞同：1
> 
> 时间：2012-07-09T19:36:22.153
> 
> 标签：json, spring-roo

我正在使用 Spring Roo 1.2.1 和 Jackson 1.9.7。在使用 json 序列化我的类 QueueOut 时，我得到一个 JsonMappingException。

我阅读了以下帖子，但没有找到适合我的解决方案：

[杰克逊的无限递归](https://stackoverflow.com/questions/8051251/infinite-recursion-with-jackson)

[Jackson - 具有双向关系的实体序列化（避免循环）](https://stackoverflow.com/questions/10065002/jackson-serialization-of-entities-with-birectional-relationships-avoiding-cyc)

我不知道为什么 JsonIgnore 不在属性 QueueOuts 的类队列中工作。我也试过 JsonManagedReference 但同样的错误。使用 Jackson 2.0.0 不是解决方案，因为 Spring 3.1 不支持它

有什么建议么？

这是我的堆栈跟踪的一部分：

```
Caused by: org.springframework.amqp.support.converter.MessageConversionException: Failed to convert Message content
  at org.springframework.amqp.support.converter.JsonMessageConverter.createMessage(JsonMessageConverter.java:181)
  at org.springframework.amqp.support.converter.AbstractMessageConverter.toMessage(AbstractMessageConverter.java:51)
  at org.springframework.amqp.rabbit.core.RabbitTemplate.convertMessageIfNecessary(RabbitTemplate.java:482)
  at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:358)
  at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:346)
  at de.company.prs.admin.server.amqp.AdminQueueConsumer.onMessage(AdminQueueConsumer.java:52)
  at org.springframework.amqp.rabbit.listener.adapter.MessageListenerAdapter.onMessage(MessageListenerAdapter.java:328)
  at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:505)
  ... 10 more
 Caused by: org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]->de.company.prs.admin.server.domain.QueueOut["queue"]->de.company.prs.admin.server.domain.Queue["queueOuts"]->org.hibernate.collection.PersistentSet[0]
  at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:164)
  at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
  at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
  at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
  at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 
```

这是我的课：第一

```
 @RooJavaBean
 @RooToString
 public class QueueOut {

   private String name;

   private String description;

   @JsonIgnore
   @ManyToOne
   private GenericQueue genericQueue;

   @ManyToOne (fetch = FetchType.EAGER)
   private Queue queue;

} 
```

第二

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord
public class Queue {

   private String name;

   private String description;

   @JsonIgnore
   @OneToMany(cascade = CascadeType.ALL, mappedBy = "queue",  fetch = FetchType.EAGER)
   private Set<QueueOut> QueueOuts = new HashSet<QueueOut>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:15:52.840

你必须在你的吸气剂上使用@JsonIgnore

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-01T15:52:52.487

不要使用 JsonIgnore，从 1.9 开始，在有问题的属性的 getter 上使用 JsonManagedReference 和 JsonBackReference。您可以在以下位置看到两个很好的示例：

*   [http://vard-lokkur.blogspot.com.es/2010/10/json-jackson-to-rescue.html](http://vard-lokkur.blogspot.com.es/2010/10/json-jackson-to-rescue.html)
*   [http://keenformatics.blogspot.com.es/2013/08/how-to-solve-json-infinite-recursion.html](http://keenformatics.blogspot.com.es/2013/08/how-to-solve-json-infinite-recursion.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:07:04.680

在 getter 上使用 @JsonIgnore 并使用 @JsonIgnoreProperties(value = { "propertyName" }) 完全忽略该属性

# wpf - 让两个控件设置另一个控件的可见性

> ID：11401900
> 
> 赞同：1
> 
> 时间：2012-07-09T19:36:23.130
> 
> 标签：wpf, binding, mvvm

对不起标题，我只是不知道如何用一句话来解释。

所以这是我的目标：我需要在 ViewModel 中有一个布尔值来定义控件（边框）的可见性。

我知道我可以使用 BooleanToVisibilityConverter 来实现这一点，但还有更多内容。如果控件不可见，我希望在我的 UI 上显示一个按钮。按下该按钮后，我希望 ViewModel 中的布尔值为 TRUE，然后我希望控件可见并且刚刚按下的按钮折叠。一旦该控件可见，我希望该最近可见控件中的按钮使控件折叠，然后使原始按钮可见。

基本上，有两个按钮：1 使可见（然后折叠自身），另一个是折叠其容器，然后使第一个按钮可见。

我正在尝试使用 MVVM 来完成所有这些工作，所以如果我可以避免在我的视图中隐藏代码，那将是理想的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:51:24.690

我的[WPF 转换器库](http://wpfconverters.codeplex.com/)有一个[`BooleanToVisibilityConverter`](http://wpfconverters.codeplex.com/SourceControl/changeset/view/66714#1380795)允许反向转换，以及允许使用的`Hidden`代替`Collapsed`：

```
<con:BooleanToVisibilityConverter x:Key="ReverseBooleanToVisibilityConverter" IsReversed="True"/>
<Button Visibility="{Binding SomeProperty, Converter={StaticResource ReverseBooleanToVisibilityConverter}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:11:12.430

由于您在视图模型上使用 ICommands，这应该可以工作...假设您的命令是“ShowBorderCommand”和“HideBorderCommand”，并且您的视图模型上的属性是“ShowBorder”

```
<ConverterNamespace:BooleanToVisibilityConverter x:Key="BoolToVis"/>
<ConverterNamespace:ReverseBooleanToVisibilityConverter x:Key="BoolToCollapse"/>

<Border Visibility="{Binding ShowBorder, Converter={StaticResource BoolToVis}}">
    <Button Command="{Binding HideBorderCommand}"/>
</Border>

<Button Command="{Binding ShowBorderCommand}" Visbility="{Binding ShowBorder, Converter={StaticResource BoolToCollapse}}"/> 
```

# django - Django 评论标志“取消”返回错误的 url

> ID：11401903
> 
> 赞同：0
> 
> 时间：2012-07-09T19:36:45.263
> 
> 标签：django

我已经在我的应用程序中设置了 django 的内置注释，并且我正在使用标记功能。标记工作正常，但模板上显示的“取消”链接返回以下错误：

```
could not find http 
```

模板/表格如下：

```
{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Flag this comment" %}{% endblock %}

{% block content %}
<h3>{% trans "Are you sure you want to flag this comment?" %}</h3>
<br />
 <blockquote>{{ comment|linebreaks }}</blockquote>
 <form action="." method="post">{% csrf_token %}
{% if next %}<div><input type="hidden" name="next" value="{{ next }}" id="next" /></div>{% endif %}
<p class="submit">
<input type="submit" class="btn btn-danger button-left" name="submit" value="{% trans "Flag" %}" /> or <a href="{{ comment.get_absolute_url }}">cancel</a>
</p>
  </form>
 {% endblock %} 
```

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:06:26.940

I suspect it might be that you're site settings aren't correct. Check the sites app and see if you can make some changes there to get it working.

# java - PHP 包含和 Java 导入声明之间的区别

> ID：11401906
> 
> 赞同：3
> 
> 时间：2012-07-09T19:37:04.723
> 
> 标签：java, php, import

在 PHP 中，我们有：

```
<?php include 'external_file.php'; ?> 
```

而在 Java 中，您有导入：

```
import javax.servlet.http.HttpServlet; 
```

据我了解，PHP 包含只是将外部文件的内容转储到包含包含语句的文件中。

我的直觉是 Java 处理这些包含/导入的方式与 PHP 不同。主要区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:40:46.393

PHP 的 include 与在 include() 指令所在的位置逐字剪切/粘贴包含文件的原始内容几乎完全相同。

Java 已编译，因此没有要“包含”的源代码 - JVM 只是加载对象/类定义并使其可供使用。这很像`#include`C 中的指令。您不是加载文字源代码，而是加载函数定义/原型/指纹以供以后使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:43:08.457

在 php 中，它只是将文件的内容转储到当前文件中。在 Java 中，使用了一个导入的类：

1.  用于使用导入的类将源代码编译为字节码。
2.  在运行时，当 JVM 看到您的程序引用了导入的类时，它会加载并使用它（如果是这种情况，则用于方法调用和成员访问）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:46:14.863

Java 中最接近 php 包含的是静态导入。即类似的东西：`import static javax.servlet.http.HttpServlet`。这允许您引用同一个类文件中的方法，就像它们在本地声明一样（这只适用于导入类的静态成员。但是，这很少使用。这是一种更紧密的耦合形式，在大多数情况下应避免使用.我发现它唯一有用的是Junit测试用例。对org.junit.Assert进行静态导入允许您使用较短的形式assertEquals(...)而不是Assert.assertEquals(...)。查看Oracle 关于静态导入的文档在[这里](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T19:46:34.120

与我的经验的主要区别在于 PHP 允许您做任何事情。您可以像对待 Java 使用其导入一样对待 PHP 包含。PHP 文件可以是所有功能，也可以简单地从头到尾执行。

所以你的php文件可能是

```
<?php

echo(1 + 4)

?> 
```

或者它可能包括您稍后调用的函数

```
<?php

function addTwoNumbers()
{
return 1 + 4;
}
?> 
```

如果包含第二个 php 文件，则可以在包含语句下方调用 addTwoNumbers 函数。我喜欢练习指定单个函数，而不是创建许多 PHP 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T19:40:38.990

PHP 只包含该文件中的任何内容。它只是将两个文件合并在一起。

Java 的导入函数使您可以访问该导入中指定的方法。基本上，PHP 只是这两个文件的基本组合，而 Java 使您可以访问该文件的方法和接口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T19:41:07.183

它们非常不同。php 只包含包含文件中的源代码。Java 正在使用 ClassLoader 加载位于 CLASSPATH 中某处的已编译类。导入只是告诉编译器您要引用当前命名空间中的那些类。import 本身不会加载任何东西，只有当你使用 时`new`，JVM 才会加载该类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T19:43:49.393

您`<jsp:include>`在 Java 中拥有类似于 PHP 的包含。Java 导入类似于 PHP 加载模块。

# javascript - 在网格视图中清除/重置文件上传控件

> ID：11401907
> 
> 赞同：0
> 
> 时间：2012-07-09T19:37:05.187
> 
> 标签：javascript, asp.net

我在 asp.net 网格视图中有多个文件上传控件，我想在错误的文件选择时清除/重置文件上传控件。

文件上传1 btnReset1 文件上传2 btnReset2 ...

当我单击 btnReset2 时，只清除 fileupload2 的值

我如何使用 java 脚本来做到这一点。

谢谢大家

我的代码如下。

JS代码：-

```
<script type="text/javascript">
        function hi(ob) {
            debugger;
            var grid = document.getElementById("<%= GridView1.ClientID %>");
            var inputs = grid.getElementsByTagName("input");
            var fileUpload;
            var strRowNo = ob.id.toString().split("_")[3];//get row number
            alert(strRowNo);
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].type == "file") {
                    fileUpload = inputs[i];
                    if (i == strRowNo) {
                        fileUpload.value = "";
                    }
                }
            }
        }
    </script>

//Aspx Code:-
  <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
                <Columns>
                    <asp:BoundField DataField="A" HeaderText="A" />
                    <asp:BoundField DataField="B" HeaderText="B" />
                    <asp:BoundField DataField="C" HeaderText="C" />
                    <asp:TemplateField HeaderText="File">
                        <ItemTemplate>
                            <div id="fuDiv" runat="server">
                                <asp:FileUpload ID="fupFile" runat="server" />
                            </div>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Reset">
                        <ItemTemplate>
                            <asp:Image ID="ibtnReset" runat="server" onClick="javascript:hi(this);" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:14:01.790

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
            <Columns>
                <asp:BoundField DataField="A" HeaderText="A" />
                <asp:BoundField DataField="B" HeaderText="B" />
                <asp:BoundField DataField="C" HeaderText="C" />

                <asp:TemplateField HeaderText="File">
                    <ItemTemplate>
                        <div id="fuDiv" runat="server">
                        <asp:UpdatePanel ID="update_fupFile" runat="server" UpdateMode="Conditional">
                        <ContentTemplate>
                            <asp:FileUpload ID="fupFile" runat="server" />
                        </ContentTemplate>
                        <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="ibtnReset" EventName="Click" />
                        </Triggers>
                            </asp:UpdatePanel>
                        </div>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Reset">
                    <ItemTemplate>
                     <asp:UpdatePanel ID="update_fupFile" runat="server" UpdateMode="Conditional">
                        <ContentTemplate>
                        <asp:Image ID="ibtnReset" runat="server" onClick="javascript:hi(this);" />
                        </ContentTemplate>
                       </asp:UpdatePanel>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

# iphone - 通过导航控制器向下钻取时标签栏消失

> ID：11401911
> 
> 赞同：1
> 
> 时间：2012-07-09T19:37:19.383
> 
> 标签：iphone, xcode, uinavigationcontroller, uitabbarcontroller, storyboard

我已经使用情节提要在导航控制器中设置了一个具有标签栏控制器作为屏幕的应用程序。我可以很好地导航到它，但是当我开始在其中一个选项卡中向下钻取屏幕时，选项卡栏消失了。如果我导航回到标签栏应该打开的第一个屏幕，标签栏将重新出现，但我希望它在子屏幕上可见。这是可能的还是两个视图控制器不能很好地协同工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:54:27.140

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
                    {

        MenuViewController * menuViewController=[[[MenuViewController alloc] initWithNibName:@"MenuViewController_iPhone" bundle:nil] autorelease];

menuViewController.hidesBottomBarWhenPushed=YES;
        //menuViewController You can have your option here 

                     UINavigationController * navigationController;
                     UINavigationController * navigationController2;
                     UINavigationController * navigationController3;

                    viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil] autorelease];

                            viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil] autorelease];

     navigationController=[[UINavigationController alloc] initWithRootViewController:viewController1];

            navigationController2=[[UINavigationController alloc] initWithRootViewController:viewController2];

            navigationController3=[[UINavigationController alloc] initWithRootViewController:menuViewController];

               UITabBarController   * tabBarController = [[[UITabBarController alloc] init] autorelease];
                        self.tabBarController.viewControllers = [NSArray arrayWithObjects:menuViewController,navigationControllerFirst, viewController2, nil];

                        //self.tabBarController.tabBar.tintColor=[UIColor orangeColor];
                        self.window.rootViewController = self.tabBarController;

                        [self.window makeKeyAndVisible];

                return true;
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:43:36.953

标签栏控制器始终需要是根视图控制器。你不能把它放在导航控制器里面。

即使有可能，也不会是良好的用户交互。你到底想做什么（功能性）？

我认为您想要的是将导航控制器作为第一个选项卡放置在选项卡栏控制器内。（不像你描述的那样反过来）

# c# - VBO 最佳方法 OpenGL

> ID：11401912
> 
> 赞同：0
> 
> 时间：2012-07-09T19:37:21.693
> 
> 标签：c#, opengl, vbo

将单个立方体的坐标存储在 VBO 中并使用相机平移/旋转将每个块放置在地图上的适当位置是否更有意义，还是将整个地图存储在 VBO 中更有意义？从中汲取灵感？

这不是我的世界克隆，但它是一个第三人称自上而下的摄像机角度世界，从立方体构建地形

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:47:50.747

简单地从表面上看问题，在我看来，OP 正在考虑多通道渲染方案与使用 VBO 渲染大量几何图形。

如果这是正确的，那么渲染大量几何图形将胜过多通道渲染方案。当然，有效渲染许多立方体的正确方法是按材质对它们进行批处理并执行[实例化渲染](http://sol.gfxile.net/instancing.html)。

# c# - 如何远程检索可执行程序路径

> ID：11401914
> 
> 赞同：0
> 
> 时间：2012-07-09T19:37:28.900
> 
> 标签：c#, .net, wmi

我正在编写一个程序，它需要获取注册表中所有程序的安装日期和版本信息。我能够获得所有程序的列表，但我不知道如何访问有关程序本身的任何信息。如果我能够确定文件所在的文件路径，我将能够访问此信息。我碰巧知道我感兴趣的程序都位于`C:\\Program Files (x86)\`文件夹中，但它们位于我无法指定的子文件夹中。关于如何获取我正在检索的文件的文件路径的任何想法？

这是我的代码：

```
public List<BSAApp> getInstalledApps( string computerName )
        {
            List<BSAApp> appList = new List<BSAApp>();

            ManagementScope ms = new ManagementScope();
            ms.Path.Server = computerName;
            ms.Path.NamespacePath = "root\\cimv2";
            ms.Options.EnablePrivileges = true;
            ms.Connect();

            ManagementClass mc = new ManagementClass( "StdRegProv" );
            mc.Scope = ms;

            ManagementBaseObject mbo;
            mbo = mc.GetMethodParameters( "EnumKey" );

            mbo.SetPropertyValue( "sSubKeyName", "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App Paths" );

            string[] subkeys = (string[])mc.InvokeMethod( "EnumKey", mbo, null ).Properties["sNames"].Value;

            if( subkeys != null )
            {
                foreach( string strKey in subkeys )
                {
                    string path = ?????
                    FileVersionInfo info = FileVersionInfo.GetVersionInfo( path );
                    appList.Add( new BSAApp( strKey, info.ProductVersion ) );                    
                }
            }

            return appList;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:53:45.780

```
ManagementObjectSearcher mos = new ManagementObjectSearcher("SELECT * FROM  Win32_Product");
foreach(ManagementObject mo in mos.Get())
{
  Console.WriteLine(mo["Name"]);
  Console.WriteLine(mo["InstallState"]);
} 
```

[获取系统中已安装的应用程序](https://stackoverflow.com/questions/908850/get-installed-applications-in-a-system)

但正如该线程中提到的，它有其自身的缺点。

# javascript - 阻止嵌入式 iframe 重定向

> ID：11401919
> 
> 赞同：1
> 
> 时间：2012-07-09T19:38:02.057
> 
> 标签：javascript, jquery, html, iframe

有没有办法阻止嵌入式 iframe 可点击或使整个 iframe 可点击？我希望 iframe 提取数据，但我不希望访问者能够单击 iframe 并仅从 iframe 上的一个位置重定向。

那可能吗？这是 iframe 的示例：

```
<iframe src="http://www.indiegogo.com/project/157203/widget?escape=false" width="224px" height="429px" frameborder="0" scrolling="no"></iframe> 
```

[http://jsfiddle.net/qX4fu/](http://jsfiddle.net/qX4fu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:45:26.550

由于您的 iframe 显然由另一个域提供服务，因此无法使用标准解决方案。[您无法读取或修改 iframe 或其文档](https://developer.mozilla.org/en/http_access_control)。

但是你可以像这样在它上面放置一个不可见的 div：http: [//jsfiddle.net/dystroy/Afg3K/](http://jsfiddle.net/dystroy/Afg3K/)

```
<div id=a></div>

#a{
    position:fixed;
    top:0;
    left:0;
    width:224px;
    height:429px;
}​ 
```

但在大多数情况下，这些事情都是 iframe 包含合同所禁止的。在你做之前先看看你的协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:43:12.383

这是可能的，但我不建议这样做。

与默认浏览器行为（例如锚标记点击）混淆通常会使用户感到沮丧并阻止他们返回您的页面。

此外，正如dystroy 在他的回答中所说，在您的页面上放置 iframe 所附带的法律条件通常明确禁止这种行为。

话虽如此，`false`从事件处理程序返回将阻止浏览器接收事件：

```
document.getElementById('yourFrame').contentWindow.document.body.onclick = function () { 
    return false; 
}; 
```

值得一提的是，如果 iframe 与运行脚本的域不同，这将不起作用。如果是这种情况，您将需要构建一个透明的覆盖 div 来吞下点击事件并将其绝对定位在 iframe 上。

这是一个演示这两种方法的小提琴：http: [//jsfiddle.net/qX4fu/1/](http://jsfiddle.net/qX4fu/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T23:04:56.317

如果您使用的是 HTML5，我建议您使用新的“沙盒”属性，但它尚未与所有浏览器兼容。[http://www.w3schools.com/tags/att_iframe_sandbox.asp](http://www.w3schools.com/tags/att_iframe_sandbox.asp)

就我而言，我只是添加了“allow-forms”和“allow-scripts”作为沙盒属性值，并且嵌入式站点不再重定向并且仍然可以运行 JavaScript

前任：`<iframe sandbox="allow-forms allow-scripts" ... /></iframe>`

如果有人知道使用这种方法的任何缺点，我很想知道它。

*其他人有相同的答案：[https](https://stackoverflow.com/a/9880360/1404129) ://stackoverflow.com/a/9880360/1404129 （我后来遇到了这个答案）*

# matlab - 程序运行方式因使用 cos 或 cosd（matlab 函数）而异

> ID：11401928
> 
> 赞同：0
> 
> 时间：2012-07-09T19:38:39.450
> 
> 标签：matlab, trigonometry

当角度为弧度时，我的 Matlab 程序可以正常工作，因此我在下面的代码中调用 cos 和 sin 函数。当角度以度为单位并因此我调用 cosd 和 sind 时，我的程序无法按预期工作。

```
%Initial configuration of robot manipulator
%There are 7DOF( degrees of freedom) - 1 prismatic, 6 revolute
%vector qd represents these DOF
%indexes    : d = gd( 1), q1 = qd( 2), ..., q6 = qd( 7)
qd( 1)      =       1;      % d  = 1 m
qd( 2)      =  pi / 2;      % q1 = 90 degrees
qd( 3 : 6)  =       0;      % q2 = ... = q6 = 0 degrees
qd( 7)      = -pi / 2;
%Initial position of each joint - the tool is manipulated separately
%calculate sinusoids and cosines
[ c, s] = sinCos( qd( 2 : length( qd))); 
```

这是 sinCos 代码

```
function [ c, s] = sinCos( angles)
%takes a row array of angles in degrees and returns all the
%sin( angles( 1) + angles( 2) + ... + angles( i)) and
%cos( angles( 1) + angles( 2) + ... + angles( i)) where
%1 <= i <= length( angles)
sum = 0;
s   = zeros( 1, length( angles));       % preallocate for speed
c   = zeros( 1, length( angles));
for i = 1 : length( angles)
    sum = sum + angles( i);
    s( i) = sin( sum);     % s( i) = sin( angles( 1) + ... + angles( i))
    c( i) = cos( sum);     % c( i) = cos( angles( 1) + ... + angles( i))
end % for
% end function 
```

整个程序大约有 700 行，所以我只显示了上面的部分。我的程序模拟了一个冗余机器人的运动，它试图在避开两个障碍物的同时达到一个目标。

那么，我的问题与 cos 和 cosd 有关吗？cos 和 cosd 有不同的行为会影响我的程序吗？或者我的程序中有一个错误被泄露？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:51:27.723

不同的是，您的意思是小于 0.00001 的量吗？因为极小的错误可以由于浮点算术错误而被忽略。计算机无法准确地计算十进制数，因为它们能够存储它们。正是出于这个原因，您永远不应该直接比较两个浮点数；必须允许一定范围的误差。您可以在此处阅读更多相关信息：[http ://en.wikipedia.org/wiki/Floating_point#Machine_precision_and_backward_error_analysis](http://en.wikipedia.org/wiki/Floating_point#Machine_precision_and_backward_error_analysis)

如果您的错误大于 0.0001 左右，您可能会考虑在程序中搜索错误。如果您还没有使用 matlab 为您转换单位，请考虑这样做，因为我发现它可以消除许多“明显”的错误（并且在某些情况下会提高精度）。

# c - printf() 改变 C 中变量的处理方式

> ID：11401930
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:38:41.570
> 
> 标签：c, variables, loops, printf

我的程序中有一个非常简单的函数，使用割线方法来查找函数的根。它适用于下面所示的 printf()。但是如果我把它注释掉，循环就会无休止地重复。我不知道为什么...

我已经阅读了有关 printf 更改变量的信息，但我没有看到任何内容更改了变量的存储。我错过了什么吗？打印它不是一个很好的解决方案，因为迭代并不重要，并且该函数被调用了数百万次。

```
double guess1=500.;
double y1=estimater(r,volume,guess1,adm,tm,rr[r]);
double guess2=adm/30.;
double y2=estimater(r,volume,guess2,adm,tm,rr[r]);
int i;
double guess3=0.;
double y3;
double tol =heightTOL;
int secmax=SECANTMAX;
for(i=1;i<=secmax;i++){
    guess3=guess2-y2*(guess2-guess1)/(y2-y1);
    if(guess3>adm/2.){
        guess3=adm/2.;
    }
    if(guess3<=0.){
        guess3=0.;
    }
    y3=estimater(r,volume,guess3,adm,tm,rr[r]);
    y1=y2;
    y2=y3;
    guess1=guess2;
    guess2=guess3;
    if(fabs(guess2-guess1)<tol){
        break;
    }
    if(i==secmax){
        printf("\nRan out of iterations in height finder\n");
    }
    printf("%d     %f",i,guess3); //THIS ONE HERE!!!!!!!!
}
return guess3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:45:23.357

`printf`根本不会更改您的数据。`printf`函数族对您的数据产生任何影响的唯一方法是，如果您使用`%n`格式说明符（它写入您传递的地址的变量），或者您正在做一些调用未定义行为的事情，例如传递错误的格式参数. 您在这里没有做任何这些事情（您的格式字符串是正确的），所以您的错误在其他地方。

检查您的所有数组访问是否在界限内。尝试在 Valgrind 或其他验证器中运行您的代码以尝试查找内存错误。

# vim - MacVim 和 Latex：如何快速编译和预览？

> ID：11401933
> 
> 赞同：0
> 
> 时间：2012-07-09T19:39:00.730
> 
> 标签：vim, latex, macvim

latex 包为 MacVim 提供了用于编译和预览的菜单项。

我想通过按键执行这些功能，也许与`\ + something`

这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:17:10.667

尝试自动乳胶插件 - [http://atp-vim.sourceforge.net/](http://atp-vim.sourceforge.net/) 添加到您的`.vimrc`

```
set localleader = "\\" 
```

然后编译`\l`，您可以查看结果`<f3>`，并阅读文档 `:help atp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:40:08.137

轻量级替代品：[TeX-PDF](http://www.vim.org/scripts/script.php?script_id=3230)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T09:10:17.397

在 vim 中编写 LaTeX 时，我真的很喜欢使用[LaTeX Box 。](https://github.com/LaTeX-Box-Team/LaTeX-Box)它包括许多方便的工具，例如后台编译、导航目录以及用于自动完成和导航的有用键映射。如果您打算将 vim 用于 LaTeX，我当然认为值得（短时间）学习。

# c++ - 为什么 VxWorks 中的 sendto() 和 send() 函数中的缓冲区类型不同，如何以相同的方式处理它们？

> ID：11401936
> 
> 赞同：0
> 
> 时间：2012-07-09T19:39:04.427
> 
> 标签：c++, sockets, send, vxworks, sendto

在 VxWorks 中，sendto() 定义为：

```
int sendto
(
  int               s,      /* socket to send data to */
  caddr_t           buf,    /* pointer to data buffer */
  int               bufLen, /* length of buffer */
  int               flags,  /* flags to underlying protocols */
  struct sockaddr * to,     /* recipient's address */
  int               tolen   /* length of to sockaddr */
) 
```

send() 定义为：

```
int send
(
  int          s,           /* socket to send to */
  const char * buf,         /* pointer to buffer to transmit */
  int          bufLen,      /* length of buffer */
  int          flags        /* flags to underlying protocols */
) 
```

我的问题是 sendto() 中的缓冲区不是恒定的，而 send() 中的缓冲区是。这似乎不符合 POSIX 标准。我还在编写我的代码以进行交叉编译，因此缓冲区作为 const void* 而不是 const char* 传入。如果不一样，我可以通过调用以下函数来使函数执行类似的操作：

```
//assuming socket data is already populated

send(fileDescriptor, 
   reinterpret_cast<const char*>(pBuffer),
   bufferLength,
   flags);

sendto(fileDescriptor,
   const_cast<char*>(reinterpret_cast<const char*>(pBuffer)),
   bufferLength,
   flags,
   destinationAddr,
   destAddrlen); 
```

似乎应该有一个更优雅的解决方案来在同一条数据上使用这两个函数。

同样重要的是要注意，虽然这可能有效，但我可能需要从我的代码中删除所有类型转换。有没有办法在没有类型转换、隐式或显式的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:43:52.720

除了更改 pBuffer 本身的数据类型之外，我没有找到更优雅的解决方案。

# javascript - 如何让我的重定向脚本添加随机后缀来选择站点？

> ID：11401939
> 
> 赞同：1
> 
> 时间：2012-07-09T19:39:16.640
> 
> 标签：javascript, redirect, userscripts

我有一个从列表重定向到随机站点的用户脚本。（参考：[如何重定向到给定的一组网站？](https://stackoverflow.com/questions/11346639/how-to-redirect-to-one-out-of-given-set-of-sites)）

如何让脚本添加随机后缀来选择站点，例如 wallbase.cc？

到目前为止，这是我的脚本：

```
// ==UserScript==
// @name        Multipage, MultiSite slideshow of sorts
// @match       http://*.breaktaker.com/*
// @match       http://*.imageshack.us/*
// @match       http://static.tumblr.com/*
// @match       http://withfriendship.com/images/*
// @match       http://failjudge.com/*
// @match       http://wallbase.cc/*
// ==/UserScript==

var urlsToLoad  = [
    'http://www.breaktaker.com/albums/pictures/animals/BigCat.jpg'
    , 'http://img375.imageshack.us/img375/8105/bigcats34ye4.jpg'
    , 'http://withfriendship.com/images/g/33769/1.jpg'
    , 'http://static.tumblr.com/yd0wcto/LXQlx109d/bigcats.jpg'
    , 'http://failjudge.com/'
    , 'http://wallbase.cc/wallpaper/ + [random number suffix from 1- 10000000000]'
];

setTimeout (GotoRandomURL, 4000);

function GotoRandomURL () {
    var numUrls     = urlsToLoad.length;
    var urlIdx      = urlsToLoad.indexOf (location.href);
    if (urlIdx >= 0) {
        urlsToLoad.splice (urlIdx, 1);
        numUrls--;
    }

    urlIdx          = Math.floor (Math.random () * numUrls);
    location.href   = urlsToLoad[urlIdx];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:22:03.357

添加随机后缀意味着脚本必须更改检查站点的方式以及选择新 URL 的方式。因此，对于这些站点，我们必须检查部分匹配。

但是，与其解释每一部分，这里有一大堆代码。;) 它应该有点自我记录。：

```
// ==UserScript==
// @name        Multipage, MultiSite slideshow of sorts
// @match       http://*.breaktaker.com/*
// @match       http://*.imageshack.us/*
// @match       http://static.tumblr.com/*
// @match       http://withfriendship.com/images/*
// @match       http://failjudge.com/*
// @match       http://wallbase.cc/*
// ==/UserScript==

var urlsToLoad  = [
    { url:          'http://www.breaktaker.com/albums/pictures/animals/BigCat.jpg',
      useSuffix:    false
    },
    { url:          'http://img375.imageshack.us/img375/8105/bigcats34ye4.jpg',
      useSuffix:    false
    },
    { url:          'http://withfriendship.com/images/g/33769/1.jpg',
      useSuffix:    false
    },
    { url:          'http://static.tumblr.com/yd0wcto/LXQlx109d/bigcats.jpg',
      useSuffix:    false
    },
    { url:          'http://failjudge.com/',
      useSuffix:    false
    },
    //--- Fur suffix URLs, include everything before the suffix only.
    { url:          'http://wallbase.cc/wallpaper/',
      useSuffix:    true
    }
];

/*--- Since many of these sites load large pictures, Chrome's normal or its
    "document end" injection may fire a good deal before the image(s) finish
    loading.
    So, insure script fires after load:
*/
window.addEventListener (
    "load",
    function () { setTimeout (GotoRandomURL, 4000); },
    false
);
if (document.readyState == "complete") {
    setTimeout (GotoRandomURL, 4000);
}

function GotoRandomURL () {
    var numUrls     = urlsToLoad.length;
    var urlIdx      = -1;

    for (var J = numUrls - 1;  J >= 0;  --J) {
        if (urlsToLoad[J].useSuffix) {
            //--- Check that URL starts with the specified value
            var prefChk = new RegExp ('^' + urlsToLoad[J].url, 'i');
            if (prefChk.test (location.href) ) {
                urlIdx  = J;
                break;
            }
        }
        else {
            if (urlsToLoad[J].url  ==  location.href) {
                urlIdx  = J;
                break;
            }
        }
    }

    if (urlIdx >= 0) {
        urlsToLoad.splice (urlIdx, 1);
        numUrls--;
    }

    urlIdx          = Math.floor (Math.random () * numUrls);
    var targURL     = urlsToLoad[urlIdx].url;

    if (urlsToLoad[urlIdx].useSuffix) {
        //--- Note:  wallbase.cc currently has less than 2-million wallpapers.
        targURL    += Math.ceil (Math.random () * 2000000);
    }                                              
    console.log ('\n\n***\n', targURL, '\n***\n\n');
    location.href   = targURL;
} 
```

# asp.net-mvc-4 - MVC 4 Web Api Routing - 使用相对路径路由 URL

> ID：11401940
> 
> 赞同：1
> 
> 时间：2012-07-09T19:39:17.117
> 
> 标签：asp.net-mvc-4, asp.net-web-api

**问题：** 我试图从 localhost:xxxx/Home/TestPage 调用 ApiController 并得到一个 404 请求的 URL：/Home/api/Test 找不到。

如果我从 Index.cshtml 页面进行此调用，它工作正常，我可以导航到 localhost:xxxx/api/Test 并查看所需的 JSON。我尝试将 ~/ 添加到我的 MapHttpRoute routeTemplate 中，但这会引发异常。

**问题：** 如何从 URL 请求中删除 /Home？

另一个例子是，如果我在页面 localhost:xxxx/People/TestPage 上并且我想点击多个 URI，例如 localhost:xxxx/api/Hobbies、localhost:xxx/api/Pets 和 locahost:xxx/api/Vehicles。我将如何设置自定义路由来处理这个问题？截至目前，使用默认路由时，我收到无法找到 /People/api/Hobbies 等的错误消息。

**解决方案（可能）**：我使用 routeTemplate: "{page}/api/{controller}/{id}" 创建了一个自定义 MapHttpRoute，它可以工作，但我不完全理解为什么以及这是否是好的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:48:59.393

Home 是您的默认**HTTP**控制器。Home/api/Test 不是有效的 Web API 控制器路由，除非您创建了自定义路由。开箱即用的默认 Web api 路由是`api/{controller}/{id}`. 因此，如果您有一个名为 home 的 API 控制器，它的 URL 将是 localhost/api/home/id

# perl - 如何分段而不是预先组装散列散列？

> ID：11401943
> 
> 赞同：1
> 
> 时间：2012-07-09T19:39:32.530
> 
> 标签：perl, perl-data-structures, perl-hash

我想在 Perl 的散列中创建一个散列结构，但是所有教程（如第 9.4 章。[编程 Perl](http://oreilly.com/catalog/9780596004927)中*的散列的散列*）都预先添加了它们。我想最初创建结构，然后在读取文件时使用子例程填充空哈希。

例如，我想在一本书中阅读，并为每一页跟踪单词以及它们出现在页面中的哪些行。

以下结构：

```
%Parent = (
    1 => {
        "the" => [1, 4],
        "and" => [2, 3]
    },
    2 => {
        "but" => [1, 2],
        "as"  => [3, 4]
    }
) 
```

表示单词`the`出现在第 1 页的第 1 行和第 4`but`行，出现在第 2 页的第 1 行和第 2 行，等等。

我怎样才能做到这一点？我尝试这样做的每一种方式，我似乎都无法保留我的哈希值并且正在丢失它们的值等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:04:51.103

```
"the" => (1, 4), "and" => (2, 3) 
```

是一种奇怪的写作方式

```
"the", 1, 4, "and", 2, 3 
```

如果分配给哈希，则相当于

```
%h = ();
$h{"the"} = 1;
$h{4} = "and";
$h{2} = 3; 
```

你要

```
%Parent = (
    1 => {
        "the" => [ 1, 4 ],
        "and" => [ 2, 3 ]
    },
    2 => {
        "but" => [ 1, 2 ],
        "as"  => [ 3, 4 ]
    }
) 
```

就像`{ }`创建一个哈希，将内部表达式的结果（如果有）分配给哈希，并返回对该哈希的引用，`[ ]`创建一个数组，将内部表达式的结果（如果有）分配给数组，然后返回对该数组的引用。

* * *

当然，这些都不能回答你的问题！关于你的问题。

```
my %Parent = (
    1 => {
        "the" => [1, 4],
        "and" => [2, 3]
    },
    2 => {
        "but" => [1, 2],
        "as"  => [3, 4]
    }
); 
```

基本上相当于

```
my %Parent;
$Parent{1}{the}[0] = 1;
$Parent{1}{the}[1] = 4;
$Parent{1}{and}[0] = 2;
$Parent{1}{and}[1] = 3;
$Parent{2}{but}[0] = 1;
$Parent{2}{but}[1] = 2;
$Parent{2}{as }[0] = 3;
$Parent{2}{as }[1] = 4; 
```

`push`通常比填充数组的赋值更方便。那看起来像：

```
my %Parent;
push @{ $Parent{1}{the} }, 1;
push @{ $Parent{1}{the} }, 4;
push @{ $Parent{1}{and} }, 2;
push @{ $Parent{1}{and} }, 3;
push @{ $Parent{2}{but} }, 1;
push @{ $Parent{2}{but} }, 2;
push @{ $Parent{2}{as } }, 3;
push @{ $Parent{2}{as } }, 4; 
```

多亏了自动复活，

```
push @{ $Parent{$k1}{$k2} }, $n; 
```

简称

```
push @{ ( $Parent{$k1} //= {} )->{$k2} //= [] }, $n; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T19:54:22.753

错误在于将列表表达式分配给二级哈希中的单词键。这必须是一个数组引用，例如`"the" => [1, 4]`.

```
# assume $page, $line defined
for my $word (@words) {
    push @{ $Parent{$page}{$word} }, $line;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:08:03.533

在开始时将 $Parent 初始化为 var：

```
my $Parent; # we will use this to store ref of parsed hash 
```

假设您在 $page 中存储页码，在 $word 中存储 word 并在 $line 中存储行当您想要存储新行号时解析文件时，您可以使用如下代码：

```
if(exists $Parent->{$page} and $Parent->{$page}->{$word}){
  push( @{ $Parent->{$page}->{$word} },$line);
}else{
  $Parent->{$page}->{$word} = [$line];
} 
```

在这里，我们确保如果 $Parent->{$page}->{$word} 尚未初始化，则首先使用匿名数组对其进行初始化。如果存在，则只需将行号推入其中。

# javascript - Sencha Touch - HasOne Setter 似乎不起作用

> ID：11401944
> 
> 赞同：2
> 
> 时间：2012-07-09T19:39:34.507
> 
> 标签：javascript, extjs, sencha-touch, extjs4, sencha-touch-2

所以我有一些类似的东西：

```
events: [
 {
    id: 1,
    name: 'Birthday Party',
    organiser: {
        id: 1,
        name: 'Jill'
    },
    attendees: [
        {
            id: 2,
            name: 'Bob'
        },
        {
            id: 3,
            name: 'Jill'
        }
    ]
 }
] 
```

像往常一样：活动有名字，有参加者，但我也在考虑有一个组织者。

所以我已经在事件中将我的 HasOne 代理设置为 HasOne Organizer，我正在尝试创建 Organizer 对象并将其附加到控制台中的事件，但没有运气。

我尝试过这样的事情，因为文档说应该创建一个 setter ......虽然似乎只是给出了设置 ID 的示例（这也不起作用）。

```
var event = Ext.create('App.model.Event', {id: 1, name: 'Birthday Party'});
event.getOrganiser(); // says undefined

event.setOrganiser({
    id: 1,
    name: 'Jill'
}); // says TypeError: Object #<Object> has no method 'get'

event.setOrganiser(1); // As the example but it still says the TypeError message

event.setOrganiser(Ext.create('App.model.Organiser', {
    id: 1,
    name: 'Jill'
}); // says TypeError: Object #<Object> has no method 'get' 
```

所以我很困惑...... Doc 中的示例似乎对我不起作用，但无论如何我都需要传递其余数据。如果不花一整天时间研究源代码、转储和断点一切，不知道如何解决这个问题。

有任何想法吗？我应该能够做上述任何事情还是不应该那样工作？我想通过一次调用同时发布 Event 和 Organizer 对象......所以当我执行 event.save(); 时期待这样的 JSON；

```
{
    id: 1,
    name: 'Birthday Party',
    organiser: {
        id: 1,
        name: 'Jill'
    }
} 
```

对不起，如果您在 ST 论坛上看到过这个，但它似乎是一个鬼城

感谢您的任何指示或帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:30:52.127

更新到 ST 2.0.1.1，这是有效的：

```
event.setOrganiser(Ext.create('App.model.Organiser', {
    id: 1,
    name: 'Jill'
}); 
```

# javascript - 在函数堆栈内的 javascript 中记录函数/对象名称

> ID：11401945
> 
> 赞同：3
> 
> 时间：2012-07-09T19:39:36.143
> 
> 标签：javascript, debugging, logging, console

学习 JS 是一条坎坷的道路……我想了解我的代码中发生了什么，所以`console.log();`似乎是我的朋友。

有时我什至不知道错误来自哪里（或者我可能太笨了）所以我想更好地记录我的应用程序堆栈。我试图为这个简单*而复杂的问题*找到答案：

**怎么做？**除了与`console.log()`

例如，获取被调用的**函数**（构造函数）的**名称**被证明是有问题的：**`console.log`**

 **```
function SomeFunction(argument1,argument2) {
    console.log(this+'> 01 message');
    console.log(this.name+'> 02 message');
    console.log(this.constructor+'> 03 message');
    console.log(this.constructor.name+'> 04 message');
    console.log(this.prototype+'> 05 message');
    console.log(this.constructor.method+'> 06 message');
}

SomeFunction.prototype.sayHello = function(} {
    console.log(this+'> 01 says Hello');
    console.log(this.name+'> 02 says Hello');
    console.log(this.constructor+'> 03 says Hello');
    // and so on... //
} 
```

所以。哪一个是正确的？`SomeFunction.constructor.name`正在工作，但是每次使用这种语法都很长，所以像

`var fn = this.constructor.name`有道理，但这只是效率低下。

有人可以指出我的良好实践方向，我如何从我的代码中提取正确的日志信息？

**仅供参考**：我搜索了几本关于这个简单主题的书，没有人对此一言不发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:49:53.143

使用开发人员工具（F12，control-I）或[获取 firebug](http://getfirebug.com/)，享受单步执行代码、检查和更改变量、编辑 css 的乐趣。它将极大地改善您的 JavaScript 学习体验...**

# c# - 从后面的代码样式化

> ID：11401947
> 
> 赞同：2
> 
> 时间：2012-07-09T19:39:43.457
> 
> 标签：c#, wpf, xaml

我想从后面的代码中设置 WPF 数据网格的样式，因为数据网格是在后面的代码中创建的。

我的应用程序中有一个包含所有样式的资源字典。

在 XAML 中，我会将样式应用于数据网格，如下所示：

```
Style="{StaticResource DataGridStyle}" 
```

如何为在后面的代码中创建的数据网格实现这一点，如下所示：

```
DataGrid dg = new DataGrid(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:42:01.540

```
dg.Style = this.Resources["DataGridStyle"] as Style; 
```

# android - Android：正面、负面和中性按钮之间的区别

> ID：11401951
> 
> 赞同：31
> 
> 时间：2012-07-09T19:40:16.783
> 
> 标签：android, button, android-alertdialog

正面、负面和中性按钮之间是否存在功能差异，尤其是在 AlertDialogs 的上下文中？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-09T19:45:29.597

只是他们在对话中的位置......

*   在 Honeycomb 之前的设备上，按钮顺序（从左到右）是正 - 中性 - 负。
*   在使用 Holo 主题的较新设备上，按钮顺序（从左到右）现在是 NEGATIVE - NEUTRAL - POSITIVE。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-14T09:38:04.433

在 Lolipop 及更高版本上或无论何时使用`Theme.AppCompat.Light`样式，按钮从左到右排列：中性、负性和正性。

注意：Neutral 按钮总是放在最左边，而 Negative 和 Positive 按钮则放在一起向右。[花了我一段时间来解决这个问题。]

![Material Design 对话框按钮位置](../Images/1312ff40cea8b7c28b8639a2363d3902.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-09T19:45:21.047

引用[文档](http://developer.android.com/guide/topics/ui/dialogs.html#AddingButtons)：

> 注意：您只能将每种按钮类型中的一种添加到 AlertDialog。也就是说，您不能拥有多个“肯定”按钮。这将可能的按钮数量限制为三个：正面、中性和负面。这些名称在技术上与按钮的实际功能无关，但应该可以帮助您跟踪哪个按钮做了什么。

所以这完全取决于你想如何使用它。它还会影响从左到右的顺序（请参阅 Devunwired 对顺序的回答）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-24T16:32:49.023

如前所述，它定义了顺序，每种类型只能有一个按钮。但是，在运行 Marshmallow 的手机和配置为 Jelly Bean 的 Android Studio 模拟器上，我得到的顺序（从左到右）是 Neutral、Negative、Positive。我使用 AppCompat 库，所以我观察到的行为对于较新的 Android 版本可能是典型的。无论如何，它不是消极的、中性的、积极的（即不像前面所说的那样）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-18T08:41:08.030

根据 Material Design Style Guide，您不应再使用中性按钮：

[对话框规格](https://material.io/guidelines/components/dialogs.html#dialogs-specs)

# javascript - JQuery 移动显示页面加载消息（）

> ID：11401954
> 
> 赞同：0
> 
> 时间：2012-07-09T19:40:28.070
> 
> 标签：javascript, jquery, jquery-mobile

我有一个登录页面，想在网页调用 ajax 函数来加载数据时显示微调器，完成后它调用 chagePage 并且一切都加载正常，除了没有微调器显示。我从其他问题中得到了超时，如果我正在调试和单步执行但不是实时的，它会起作用。我也试过把它放在 ajax 的 beforeSend 中。

```
$('#loginButton').live('click',function(e){
    $.mobile.showPageLoadingMsg();
    setTimeout(initialLogin(),300);
}); 
```

谢谢！

```
 if(success){
//Load home page
    $.mobile.changePage("#second");
    loadList(); //loads listview
} 
```

仅供参考，这是我正在使用的设置

```
$(document).bind("mobileinit", function(){
$.mobile.defaultPageTransition = 'none';
$.mobile.buttonMarkup.hoverDelay= 250;
$.mobile.allowCrossDomainPages = true;
$.support.cors = true;
$.mobile.pushStateEnabled = false;
$.mobile.orientationChangeEnabled = true;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:45:03.007

您可以像这样在应用程序范围内使用它：

```
$(document).ajaxStart(function () {
    $.mobile.showPageLoadingMsg();
}).ajaxStop(function () {
        $.mobile.hidePageLoadingMsg();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:04:25.573

现在工作正常，我将 ajax async 设置为 true 并填充成功区域中的对象。

# php - 将字符串从 PHP 传递到 Perl 并返回返回字符串

> ID：11401955
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:40:31.900
> 
> 标签：php, perl

我想将 PHP 脚本中的字符串传递给 Perl 脚本。Perl 脚本会对字符串进行一些正则表达式处理，最后返回另一个字符串，该字符串应该被 PHP 脚本捕获。我怎样才能做到这一点？是否有任何意外情况，例如安装一些新模块，或者在 WAMP 中安装 Perl（目前 perl 安装在**C:\**中，我正在 WAMP 中工作）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:44:29.570

我自己没有尝试过，但我认为您应该能够使用`exec()`PHP 中的命令或类似命令调用 perl 脚本，将数据传递给它并读回输出。

编辑：

```
$output = exec("c:\\whatever\\directory\\script.pl data"); 
```

我不完全确定如何通过命令行将参数传递给 perl 脚本，因此您可能需要在命令行上进行一些试验才能弄清楚。

或者，如果通过 URL 使用 perl 脚本，您可以使用

`$output = file_get_contents("http://whatever/url?data=whateverdata")`

# php - jQuery $.post 语法

> ID：11401959
> 
> 赞同：4
> 
> 时间：2012-07-09T19:40:35.223
> 
> 标签：php, jquery, ajax, post, phpstorm

我正在使用 phpStorm 来编辑文件。这段代码打破了页面：

```
$("#delete_all_button").click(function(){
    var oTT = TableTools.fnGetInstance( 'pickup_list_all' );
    var selectedRows = oTT.fnGetSelectedData();

    first = selectedRows[0][selectedRows.length-1];
    $.post("delete.php", {'claimID': first}, function(data){
        console.log(data);
    });
}); 
```

特别是在 claimID 和 first 之间的冒号。当我将鼠标悬停在冒号下方的红色波浪上时，编辑器告诉我“} 预期”。当我尝试加载页面时，控制台中没有错误，页面只是白色的。

另一个需要注意的重要事情是，当我将以前工作的邮政代码从另一个代码中没有错误的文件复制到该文件时，会出现错误。

可能是什么问题呢？图书馆？

我已经使用以下行导入了 jquery：

```
<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.min.js"></script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:46:30.190

标准是您不要为属性名称使用引号。一些旧的浏览器可能会因为它而崩溃。

```
$("#delete_all_button").click(function(){
    var oTT = TableTools.fnGetInstance( 'pickup_list_all' );
    var selectedRows = oTT.fnGetSelectedData();

    first = selectedRows[0][selectedRows.length-1];
    $.post("delete.php", {claimID: first}, function(data){
        console.log(data);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:10:19.350

[jquery.post()](http://api.jquery.com/jQuery.post/)的 data 参数需要“随请求发送到服务器的映射或字符串”。您可以尝试将第二个参数更改为`JSON.stringify({'claimID': first})`或将其括在括号中以使其成为数组`[{'claimID': first}]`

# php - FEDEX 运费 API 错误消息：“找不到帐号。”

> ID：11401970
> 
> 赞同：1
> 
> 时间：2012-07-09T19:41:24.173
> 
> 标签：php, fedex

最近有没有人在使用 FEDEX 的运费 API 时遇到此错误消息？

我已经使用 FEDEX 运费 API 大约一周了，`(run [this][1] which requires [this][2] and [this][3])`直到今天我的代码运行顺利。我做了很少的更改，但我没有跟踪（不幸的是）。所有的身份验证/帐户信息都是 FEDEX 提供的 TEST 信息。现在我看到以下错误，其代码未在 FEDEX 的 [错误代码页][4] 中描述：

```
Severity: ERROR
Source: crs
Code: 850
Message: Account number not found. 
LocalizedMessage: Account number not found. 
```

搜索后，网络上似乎没有谈论此错误。它与身份验证无关，因为在弄乱了密钥/仪表/密码信息时，我得到了另一个与身份验证相关的错误。所以它的身份验证很好，但看不到我的帐号。请求 XML 验证它应该在哪里有一个帐号，因此该消息似乎与在 FEDEX 的数据库中“查找”帐号有关。

我以为我的帐户可能有问题，所以我创建了另一个帐户，替换了信息，果然，返回了相同的错误消息。

**更新**代码：

*   [http://pastie.org/pastes/4229615](http://pastie.org/pastes/4229615)
*   [http://pastie.org/4229610](http://pastie.org/4229610)
*   [http://pastie.org/4229624](http://pastie.org/4229624)
*   [Fedex.com - 附录 O：错误代码](http://www.fedex.com/us/developer/product/WebServices/MyWebHelp_August2010/Content/Proprietary_Developer_Guide/Error_Codes_conditionalized.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:44:45.527

```
 if($var == 'shipaccount') Return 'XXXXXXXXX';  -->Test Account Number
if($var == 'billaccount') Return 'XXXXXXXXX';  -->Test Account Number

    if($var == 'meter') Return 'XYXYXYXYXY';  -->meter number
if($var == 'key') Return 'XYXYXYXYXYXYX'; --->key
if($var == 'password') Return 'FOOFOOOFOO'; -->password 
```

希望您正确填写了这些字段。
我今天还注意到，联邦快递的运费没有恢复，而直到上周它都运行良好，所以联邦快递可能会有变化。您必须就此联系fedex。
还要确保您已下载并包含 RateService_v10.wsdl 文件。

# css - 链接不仅仅是文本，对 SEO 有用吗？

> ID：11401973
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:41:36.733
> 
> 标签：css, hyperlink, seo, background-image, image

我在一个网站上有 4 个链接。每个链接都指向不同的页面（窗户、壁板、屋顶、日光浴室）。但是，我设置链接的方式与普通链接不同。这是一个片段：

```
<a href="windows.html">
   <div id="img-block">
       <div id="img-link">
           <h1>Windows</h1>
       </div>
   </div>
</a> 
```

CSS：

```
#img-block {
    width:275px;
    height:175px;
    margin:25px 0;
    background-image:url(images/windows.jpg);
    }

#img-link {
    height:40px;
    width:275px;
    margin:135px 0 0 0;
    background-image:url(images/img-link-bg.png);
    } 
```

我这样做的几个原因。
A）我希望图像和文本可以点击
B）H1，因为我读过谷歌给标题更高的排名
C）还读到当有人点击链接时，措辞让谷歌知道它是相关的（点击“Windows”将您带到有关 Windows 的页面，从而提高“Windows”的页面排名）

现在我的问题是，我是否完成了所有这些事情？显然我已经完成了目标 A。但现在我不能再选择图像顶部的文本（“windows”）（因为我的光标变为手形图标，通知我链接）......另外，当我拖动图片，就说明我把图片、img-link图片、文字都拖为一个，就好像是一张图片一样。

希望这足够清楚，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:07:54.360

你这一切都错了。

你不需要额外的 div。

只需将 background-imgae 放在 H1 标签本身上（当然还要设置高度/宽度） SEO 明智的，这是一种可以接受的做事方式。

你会没事的:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T19:59:42.323

优化您的 SEO 的最佳方法是在网站上包含重要的本地化信息，如果您的网站是针对本地企业的，则最好在每个页面上包含企业地址和电话号码，因为谷歌会根据大多数用户个性化其搜索结果关于他们的位置和搜索词上下文。如果我在费城并输入 Vinyl Siding，我看到的结果将与在加利福尼亚输入相同内容的人不同。除非您的网站包含其他相关信息并且广告商总是在 google 上获得优先待遇，否则您不能只输入特定的标题并神奇地出现在网站的第一页。使用谷歌为您提供的工具索引您的网站。

# vb.net - VB.NET 活动报告

> ID：11401974
> 
> 赞同：0
> 
> 时间：2012-07-09T19:41:46.780
> 
> 标签：vb.net, activereports

我有一个具有许多不同属性的 VB 活动报告。该报告包含属性 area、balance、id 和 status，目前归类为我的区域。我现在需要做的是从报告中删除余额等于 0 且状态等于停用的所有行。活动报告的信息来自我的数据库。因此，我认为最好的方法是只选择余额不为 0 且状态不等于停用的记录。有没有办法可以查询我的数据库并使活动报告基于查询结果？是否有捷径可寻？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:04:52.110

是的，最好的方法是更改​​查询，以便只有您需要的最少记录实际进入报表。[文档中的 Modify Data Sources at Run Time 主题](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic67.html)展示了如何在运行时动态修改代码中的 SQL 语句。

如果您可以对报表的 SQL 查询进行硬编码，您可能应该只在设计器内的设计时修改 SQL。[这个将报表绑定到数据源主题](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic34.html)向您展示了如何做到这一点。

您还可以使用包含这些控件的部分的 Format 事件以编程方式控制字段/文本框的可见性（最有可能`Detail_Format`），但在我看来修改 SQL 查询是您最好的选择。

# c# - 调用图 IEnumerator

> ID：11401975
> 
> 赞同：2
> 
> 时间：2012-07-09T19:41:50.977
> 
> 标签：c#

我必须为这样的表达式实现调用图`Id = Id(Param);`，这不是问题。

现在我必须实现一个枚举器，它一次列出一个满足依赖顺序的调用中的所有拓扑顺序。

这就是麻烦所在。

这是调用图的一个简单节点：

```
class CallGraphNode
{
    private string name;
    public List<CallGraphNode> dependents = new List<CallGraphNode>();
    public int dependencies;
    private bool executed = false;
    public bool Executable { get { return dependencies == 0; } }
    public bool Executed { get { return executed; } set { executed = value; } }

    public CallGraphNode(string name)
    {
        this.name = name;
        dependencies = 0;    
    }

    public override string ToString()
    {
        return name;
    }

    public void AddDependent(CallGraphNode n)
    {
        dependents.Add(n);
    }          
} 
```

这是调用图类本身：

```
class CallGraph : IEnumerable<List<CallGraphNode>>
{
    public List<CallGraphNode> nodes = new List<CallGraphNode>();

    public void AddNode(CallGraphNode n)
    {
        nodes.Add(n);
    }

    public static void Show(IEnumerable<CallGraphNode> n)
    {
        foreach (CallGraphNode node in n)
        {
            Console.Write("{0} ", node);
        }
        Console.WriteLine();
    }

    static IEnumerable<List<CallGraphNode>> EnumerateFunctions(List<CallGraphNode> executable, List<CallGraphNode> res)
    {
        if (executable.Count == 0)
            yield return res;
        else foreach (CallGraphNode n in executable)
            {
                if (!n.Executed)
                    res.Add(n);
                List<CallGraphNode> next_executable = new List<CallGraphNode>(executable);
                executable.Remove(n);
                foreach (CallGraphNode m in n.dependents)
                    if (--m.dependencies == 0)
                        next_executable.Add(m);
                foreach (List<CallGraphNode> others in EnumerateFunctions(next_executable, res))
                    yield return others;
                foreach (CallGraphNode m in n.dependents)
                    m.dependencies++;
                if (!n.Executed)
                    res.Remove(n);
            }
    }

    IEnumerator<List<CallGraphNode>> IEnumerable<List<CallGraphNode>>.GetEnumerator()
    {
        List<CallGraphNode> executable = new List<CallGraphNode>();
        foreach (CallGraphNode n in nodes)
            if (n.Executable || n.Executed)
                executable.Add(n);
        List<CallGraphNode> output = new List<CallGraphNode>();
        foreach (List<CallGraphNode> list in EnumerateFunctions(executable, output))
            yield return list;
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    { throw new NotImplementedException(); }
} 
```

现在，问题是它不起作用。当我尝试创建一个`IEnumerator`并为其分配`GetEnumerator()`返回值时，我得到一个转换错误，老实说，这正是我尝试这样做时所期望的：

```
IEnumerator<List<CallGraphNode>> lt = cg.GetEnumerator(); 
```

然后我试过了：

```
System.Collections.Generic.List<CallGraphNode>.Enumerator en = cg.nodes.GetEnumerator(); 
```

这可行，但该方法`EnumerateFunctions`永远不会被调用，并且枚举器只包含图形节点的原始列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:45:20.563

问题是您*同时* `IEnumerable<T>`实现并`IEnumerable`使用[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx)。

您可能想要更改此声明：

```
IEnumerator<List<CallGraphNode>> IEnumerable<List<CallGraphNode>>.GetEnumerator() 
```

成为“正常”的接口实现：

```
public IEnumerator<List<CallGraphNode>> GetEnumerator() 
```

或者，您*可以*坚持使用显式接口实现，但使用：

```
IEnumerable<List<CallGraphNode>> sequence = cg;
IEnumerator<List<CallGraphNode>> lt = sequence.GetEnumerator(); 
```

# facebook - Facebook 应用程序标签页面照片

> ID：11401976
> 
> 赞同：1
> 
> 时间：2012-07-09T19:41:50.993
> 
> 标签：facebook, facebook-graph-api

我有包含专辑的 Facebook 页面和 Facebook 应用程序。我希望使用我的应用程序的人能够标记我页面相册中的照片。我使用这个图形 api POST 调用：

```
PHOTO_ID/tags/USER_ID 
```

但是发生的情况是页面帐户必须确认此标记以及收到有关此标记的通知的页面帐户，因此我们必须逐张照片并查找新的标记图像。

请注意，从 Facebook.com 网站对照片进行标记非常容易并立即得到确认。

任何帮助将不胜感激。

谢谢， Bnaya Livne

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:40:52.547

我尝试了同样的方法，我发现您可以为您的页面生成访问令牌，但是当我尝试它时，它没有标记此人。此外，我使用所有权限来生成新的访问令牌，并且页面仍然需要对标签进行确认。我认为唯一的方法是将您的页面配置为完全公开。

# linux - 开关/案例在 awk 中不起作用

> ID：11401979
> 
> 赞同：11
> 
> 时间：2012-07-09T19:41:52.650
> 
> 标签：linux, awk

我正在 redhat linux 中编写一个简单的 awk，但发现 switch/case 对我不起作用。我在网上搜索，但没有找到解决方案。以下是我的代码：

```
 BEGIN {
   foo = 1;
     switch (foo) {
         case 3:
         print "x";
         break;
         case 2:
         print "y" ;
         break;
         case 1:
         print "z" ;
         break;
         default:
         print "default" ;
      }
 } 
```

我正在运行的 awk 是 GNU awk 3.1.5。我得到以下错误：

> awk -f test.awk

```
awk: test.awk:3:      switch (foo) {
awk: test.awk:3:                   ^ syntax error
awk: test.awk:5:          case 3:
awk: test.awk:5:                ^ syntax error
awk: test.awk:8:          case 2:
awk: test.awk:8:                ^ syntax error
awk: test.awk:11:          case 1:
awk: test.awk:11:                ^ syntax error
awk: test.awk:14:          default:
awk: test.awk:14:                 ^ syntax error 
```

有人可以帮帮我吗？谢谢你！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T19:44:50.377

GAWK 手册说：

> ### 6.4.5 switch 语句
> 
> 注意：本小节描述了 gawk 3.1.3 中添加的实验性功能。默认情况下未启用。要启用它，请在配置和构建 gawk 时使用“--enable-switch”选项进行配置。有关详细信息，请参见第 B.2.2 节 [其他配置选项]，第 269 页。
> 
> switch 语句允许对表达式求值并根据大小写匹配执行语句。Case 语句按照定义的顺序检查是否匹配。如果没有找到合适的情况，则执行默认部分（如果提供）。

你用的是哪个版本的`gawk`？它是用`--enable-switch`选项编译的吗？

如果您无法判断是否`gawk`已编译，`--enable-switch`并且您遇到语法错误，则可以合理地推断它不是。我使用的是使用`gawk 3.1.8`默认配置编译的，并且几乎得到了您在脚本中看到的错误。鉴于此，您的版本不太可能使用必要的配置选项进行编译。`gawk`如果您愿意，使用该选项重新编译并不难。

# javascript - 使用缩小页面特定的 JS

> ID：11401985
> 
> 赞同：2
> 
> 时间：2012-07-09T18:45:25.210
> 
> 标签：javascript, jquery, load-time

我一直在从事一个相当大规模的项目，该项目利用了许多不同的页面，每个页面都有一些非常具体的 Javascript。为了减少加载时间，我计划在部署之前将其全部压缩到一个文件中。

问题是：我应该如何避免在不需要的页面上启动特定于页面的 JS？到目前为止，我最好的解决方案是将每一页包装在一些额外的容器中

```
<div id='some_page'>
...everything else...
</div> 
```

我扩展了 jQuery，所以我可以做这样的事情：

```
// If this element exists when the DOM is ready, execute the function
$('#some_page').ready(function() {
    ...
}); 
```

哪个，虽然有点酷，只是让我误会了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:41:41.830

我通过为每个页面的`<body>`元素提供一个唯一的 id 来实现这一点：

```
<html><head>...</head><body id="sign-in">...</body></html> 
```

并在 jQuery 块中编写我所有的页面特定脚本，如下所示：

```
$(function(){
  if (!$('body#sign-in').length) return;
  // Code specific to sign-in page here
}); 
```

# jquery - JSON 值为空

> ID：11401987
> 
> 赞同：1
> 
> 时间：2012-07-09T19:42:28.890
> 
> 标签：jquery, spring, spring-mvc

我敢肯定这真的很简单......

我有下面的代码...

```
<script>

function postUser() {
    var user = $('span').serialize();
    $.post('userManagement/setUser', user);
}

</script>

<span>
  Username : <input type="text" name = "userName"><br />
  First name: <input type="text" name="firstName" /><br />
  Last name: <input type="text" name="lastName" /><br />
  Password: <input type="text" name="password" /><br />
  <button onclick="postUser()">Submit</button>
</span> 
```

什么都没有发布（因为根据萤火虫的说法，POST实际上是空的）。

如何发布此表格？我想使用 jQuery，以便我可以更好地使用它，而不是仅仅将它放入 HTML 中。我的控制器期望一个 JSON 对象，它只是我的用户实体，具有上述字段以及用于“访问”的整数。

我正在使用 SpringMVC 作为控制器。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:45:46.470

试试这个：

```
var user = $('form').serialize(); 
```

然后：

```
<form action="#" method="post">
  Username : <input type="text" name = "userName"><br />
  First name: <input type="text" name="firstName" /><br />
  Last name: <input type="text" name="lastName" /><br />
  Password: <input type="text" name="password" /><br />
  <button type="button" onclick="postUser()">Submit</button>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T19:44:49.817

`serialize()`用于序列化表单元素而不是`span`标签，试试这个：

> 将一组表单元素编码为字符串以进行提交。

```
var user = $('span input').serialize(); // or $('form') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:46:46.303

您遇到的问题是由于您对[serialize()](http://api.jquery.com/serialize/)函数和正确的 HTML 结构的误解。

> .serialize() 方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。

尝试以下操作：

```
var user = $('span input').serialize(); 
```

这将定位跨度元素内的所有输入元素并将数据分配给`user`变量。

演示：http: [//jsfiddle.net/qSr7k/](http://jsfiddle.net/qSr7k/)

# google-docs-api - Google Docs 是否有任何外部可访问的链接来显示文档及其相关的共享对话框？

> ID：11401993
> 
> 赞同：0
> 
> 时间：2012-07-09T19:42:49.700
> 
> 标签：google-docs-api, google-drive-api

我正在为我的 Google Summer of Code 项目开发 GNOME 的 Documents 应用程序。我们从 libgdata 获得的 Google 文档列表组织在一个 Feed 对象中，该对象由 Entry 对象（文档的条目映射）组成。每个条目都有一个映射到浏览器可访问版本的“备用”链接。我们目前允许用户通过这样的“备用”链接在浏览器中打开他们的 Google 文档。每个条目还有一个关联的“访问规则”供稿，该供稿又由指定权限的条目组成，但这些似乎都没有备用链接。我想知道是否有任何方法可以访问备用链接以在 webkit webview 中显示 Google 文档和相关的 Google 文档共享对话框？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:07:33.137

查看 Documents List API 文档以获取有关如何管理共享的详细信息：

[https://developers.google.com/google-apps/documents-list/#managing_sharing_permissions_of_resources_via_access_control_lists_acls](https://developers.google.com/google-apps/documents-list/#managing_sharing_permissions_of_resources_via_access_control_lists_acls)

此外，请考虑使用具有相同功能的较新的 Drive API：

[https://developers.google.com/drive/manage-sharing](https://developers.google.com/drive/manage-sharing)