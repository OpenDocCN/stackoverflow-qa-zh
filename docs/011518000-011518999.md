# StackOverflow 问答 11518000-11518999

# javascript - Facebook 与 javascript 共享

> ID：11518002
> 
> 赞同：1
> 
> 时间：2012-07-17T07:39:14.977
> 
> 标签：javascript, facebook

我正在尝试在我的博客中创建“facebook 分享”链接。我的博客几乎是 100% 的 javascript，因此使用 opengraph 标签是不可取的/不可能的。

[本文](http://developers.facebook.com/docs/reference/dialogs/feed/)建议使用“http://www.facebook.com/dialog/feed”，我已按照指示这样做。像这样：

```
http://www.facebook.com/dialog/feed?app_id=0000000000&link=http://www.mydomain.com&picture=http://www.mydomain.com/images/image.jpg&name=Blog&caption=Blah&description=Blah&redirect_uri=http://www.mydomain.com 
```

问题是：登录 facebook 时，我不断收到此错误：

“API 错误代码：100 API 错误描述：无效参数错误消息：需要有效的重定向 URI。”

我的应用程序使用有效的 appID 注册，我根本没有转义网址。这些网址都在我的应用程序的设置域中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:49:04.830

I found a way to accomplish my goal but it wasn't with the use of the direct use of the 'feed' script. I included this script in my header:

```
<script src="https://connect.facebook.net/en_US/all.js"></script> 
```

Then in my click function I wrote:

```
FB.init(
{
    appId : '0000000000'
});

FB.ui(
{
    method: 'feed',
    picture: 'http://www.mydomain.com/images/image.jpg',
    name: 'the name',
    link: 'http://www.mydomain.com',
    caption: 'the caption',
    description: 'the description',
    message: 'the message'
}); 
```

It's not the way I wanted to write it but it somehow bypasses the login error and works as expected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:00:22.067

我们曾经遇到过这个错误，我们认为是因为将应用程序注册为[http://mydomain.com](http://mydomain.com)并且我们的重定向是[http://www.mydomain.com](http://www.mydomain.com)。我们改变了它，所以它们匹配。

我们也使用以下格式（我们也不会转义 url）：

```
<a target="_blank" href="https://www.facebook.com/dialog/feed?app_id=xxxxx&amp;link=http://www.mydomain.com&amp;picture=http://www.mydomain.com/photos/1222/thumbnail&amp;description=Blah&amp;name=Name&amp;redirect_uri=http://www.mydomain.com/"/>Share</a> 
```

文档没有指定您必须使用`&amp;`，但它确实对我们有用。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:06:45.897

我认为最近通过 JavaScript 的 facebook “分享” UI 可能已经失效了。我的文件看起来很好，但只使用 JavaScript UI 的共享按钮突然坏了。让我粘贴并解释一下。

这工作正常，但请注意我将图片下载到我的服务器并链接到它。

```
echo "<A HREF=\"http://www.facebook.com/sharer.php?u='http://www.MySite.com/page_name.php?id=$id&t=$value' \" target=_new><img src=\"images/FB_Share.png\" height=\"18\" width=\"56\"></a>";
echo "<script src=\"http://static.ak.fbcdn.net/connect.php/js/FB.Share\" 
        type=\"text/javascript\">
</script>"; 
```

这个脚本在我从 FB 拉图像的地方不起作用。

```
echo "<a name=\"fb_share\" type=\"button\"
   share_url=\"http://www.MySite.com/page_name.php?id=$id\" target=_new>Share</a>
<script src=\"http://static.ak.fbcdn.net/connect.php/js/FB.Share\" type=\"text/javascript\">
</script>"; 
```

不确定这是否有帮助。此页面在 MONTHS 中运行良好，并且没有任何更改……据我所知，此文件已进行。

# events - drupal中基于事件的日历

> ID：11518007
> 
> 赞同：0
> 
> 时间：2012-07-17T07:39:33.887
> 
> 标签：events, drupal, calendar, drupal-7, fullcalendar

我需要根据 drupal 中的事件显示日历事件。

但是我在互联网上的所有地方都进行了搜索。但我还没有解决方案。在 drupal 中，日历根据月份、年份和日期显示，**但不基于事件**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:42:29.093

您可以使用事件[日历功能模块](http://drupal.org/project/events_calendar_feature)，这里是如何使用它[的分步教程。](http://drupal.org/node/1250714)

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:01:27.213

如果您不想显示以传统的基于月份的格式列出的事件 - 永远 - 为什么不创建一个 Event 内容类型，然后创建一个简单的 View 来列出按日期排序的事件，但采用 HTML 列表格式？

或者，更好的是，使用常规日历模块，然后将显示添加到它创建的一组视图中，这是一个简单的列表。甚至可能已经有一个显示器可以做到这一点（我认为它被称为“迷你显示器”或类似的东西）。这样，如果您确实需要基于月份的事件视图，您仍然可以将它放在您的口袋里。

# iphone - 按钮点击音效

> ID：11518008
> 
> 赞同：0
> 
> 时间：2012-07-17T07:39:42.513
> 
> 标签：iphone, button

我在我的代码中添加了音效。但是当我启动我的应用程序并首先单击按钮时，它需要一些时间才能工作。它仅在第一次单击时发生，否则在其他按钮单击时它会快速工作。它向我显示了一些错误，例如

```
2012-07-17 12:51:22.240 PainReporter[6882:16503] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:52:51.323

我曾经发生过这种情况。我从来没有弄清楚它发生的确切原因，但是它只在模拟器中运行时发生。

除此之外，如果您`AVFoundation`用于播放音频，请确保您拨打`prepareToPlay`. 这样做应该有助于减少开始播放声音所需的时间。

# linux - Kaltura 中缺少 Sphinx 服务？

> ID：11518015
> 
> 赞同：0
> 
> 时间：2012-07-17T07:40:08.157
> 
> 标签：linux, search, service, sphinx, kaltura

基本问题是我无法在 KMC 中上传任何内容。然后我发现api v3日志有很多问题。其中之一是“狮身人面像”。然后当我检查“Sphinx”时，**服务器上没有“searchd”服务运行实例**。当我运行时：

```
~ # ps aux | grep "searchd" 
```

它什么也没显示。没有“ Sphinx”的**“searchd”服务正在运行。**当我再次：

```
~ # sh /opt/kaltura/app/scripts/searchd.sh start 
```

没有`search.sh`要运行的文件。该文件夹内的所有文件是：

```
[root@myserver ~]# ls /opt/kaltura/app/scripts/ -lah
total 100K
drwxrwxrwx.  4 apache root 4.0K Jun  7 15:00 .
drwxrwxrwx. 23 apache root 4.0K Jun  7 15:00 ..
-rwxrwxrwx.  1 apache root 1.9K Jun  7 15:00 addVirusScanProfile.php
-rwxrwxrwx.  1 apache root 2.9K Jun  7 15:00 analyze_collect_stats.php
-rwxrwxrwx.  1 apache root 1.4K Jun  7 15:00 billing_summary_insert.php
-rwxrwxrwx.  1 apache root  944 Jun  7 15:00 billing_summary_www.php
-rwxrwxrwx.  1 apache root 1.1K Jun  7 15:00 bootstrap.php
-rwxrwxrwx.  1 apache root 1.2K Jun  7 15:00 categoryCount.php
-rwxrwxrwx.  1 apache root 1.9K Jun  7 15:00 clear_cache.php
-rwxrwxrwx.  1 apache root  907 Jun  7 15:00 define.php
-rwxrwxrwx.  1 apache root 5.0K Jun  7 15:00 findEntriesSizes.php
-rwxrwxrwx.  1 apache root  679 Jun  7 15:00 find_unique_visitors.php
-rwxrwxrwx.  1 apache root  322 Jun  7 15:00 flix.watchdog.sh
-rwxrwxrwx.  1 apache root  534 Jun  7 15:00 logger.ini
-rwxrwxrwx.  1 apache root  902 Jun  7 15:00 makeRemoteStorageDeletable.php
drwxrwxrwx.  2 apache root 4.0K Jun  7 15:00 puser_kuser_deprecation
-rwxrwxrwx.  1 apache root 3.4K Jun  7 15:00 serviceBatchMgr.sh
-rwxrwxrwx.  1 apache root 2.7K Jun  7 15:00 serviceBatchSingle.sh
-rwxrwxrwx.  1 apache root 1.7K Jun  7 15:00 sphinx_watch.sh
-rwxrwxrwx.  1 apache root  980 Jun  7 15:00 update_partner_activity.sh
drwxrwxrwx.  4 apache root 4.0K Jun  7 15:00 utils
-rwxrwxrwx.  1 apache root  979 Jun  7 15:00 uv_summary_insert.php
-rwxrwxrwx.  1 apache root  424 Jun  7 15:00 watch.batchMgr.sh
-rwxrwxrwx.  1 apache root 2.8K Jun  7 15:00 www_logs_insert.sh 
```

没有`searchd.sh`文件。我应该怎么办？

服务器上完全没有运行 SEARCHD。似乎以前做错了什么。
我也应该：

*   在服务器上安装一个新的专用 Sphinx 实例？（它会与 Kaltura 一起使用吗）
*   或者无论如何只为 Kaltura 添加/安装狮身人面像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:35:00.180

我知道这有点太晚了，它已被改进的 sphinx_watch.sh 取代

# regex - 基于 GB 且仅数字电话号码的正则表达式

> ID：11518035
> 
> 赞同：17
> 
> 时间：2012-07-17T07:41:29.437
> 
> 标签：regex, validation, cakephp

我想要一个只允许数字电话号码（例如 1234567890）以及 GB 格式号码（例如 123-456-7890）的正则表达式代码。

此表达式必须适用于这两种情况。

目前我正在使用下面的正则表达式，它只允许 GB 电话号码

```
/^(\()?\d{3}(\))?(-|\s)?\d{3}(-|\s)\d{4}$/ 
```

我也需要帮助才能只允许数字。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-17T08:16:05.113

[这里](http://regexlib.com/UserPatterns.aspx?authorid=d95177b0-6014-4e73-a959-73f1663ae814&AspxAutoDetectCookieSupport=1)有一些英国电话号码正则表达式。

该页面中评价最高的一个是：

```
^(((\+44\s?\d{4}|\(?0\d{4}\)?)\s?\d{3}\s?\d{3})|((\+44\s?\d{3}|\(?0\d{3}\)?)\s?\d{3}\s?\d{4})|((\+44\s?\d{2}|\(?0\d{2}\)?)\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$ 
```

它被描述为：

```
Matches     +447222555555   | +44 7222 555 555 | (0722) 5555555 #2222
Non-Matches (+447222)555555 | +44(7222)555555  | (0722) 5555555 #22 
```

就个人而言，我不会对电话号码使用严格的正则表达式，除非绝对需要用户提供实际的电话号码以进行身份​​验证或涉及付款的事情。电话号码有很多变化，一些用户甚至可以使用 Skype 作为他们的主要电话，并且通过验证你只会阻止/挫败用户。

**另请注意，您的英国格式错误，英国电话号码应包含 11 位数字，格式通常为 (01234) 123123 - 我们*从不*使用破折号，第一个数字应始终为 0。**

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-03T08:45:45.853

> 英国电话号码应包含 11 位数字

英国电话号码通常有 9 或 10 位数字，不包括 0 中继代码或 +44 国家代码。少数只有 7 位数字。

> 并且通常采用 (01234) 123123 格式

该示例显示了一个英国 4+6 格式的号码。英国使用多种格式，包括用于地理数字的 2+8、3+7、4+6、4+5、5+5 和 5+4，以及用于非地理数字的 0+10、0+9​​ 和 0+7数字。

有一个方便的清单：

[http://www.aa-asterisk.org.uk/index.php/Number_format](http://www.aa-asterisk.org.uk/index.php/Number_format)

**匹配任何格式的英国电话号码**

```
^(?:(?:\(?(?:0(?:0|11)\)?[\s-]?\(?|\+)44\)?[\s-]?(?:\(?0\)?[\s-]?)?)|(?:\(?0))(?:(?:\d{5}\)?[\s-]?\d{4,5})|(?:\d{4}\)?[\s-]?(?:\d{5}|\d{3}[\s-]?\d{3}))|(?:\d{3}\)?[\s-]?\d{3}[\s-]?\d{3,4})|(?:\d{2}\)?[\s-]?\d{4}[\s-]?\d{4}))(?:[\s-]?(?:x|ext\.?|\#)\d{3,4})?$ 
```

上述模式允许用户以他们喜欢的任何格式输入数字。不要限制用户输入特定的格式。

**提取 NSN、前缀和扩展名**

```
^(\(?(?:0(?:0|11)\)?[\s-]?\(?|\+)(44)\)?[\s-]?)?\(?0?(?:\)[\s-]?)?([1-9]\d{1,4}\)?[\d[\s-]]+)((?:x|ext\.?|\#)\d{3,4})?$ 
```

如果使用国际格式，$2 将为 '44'，否则采用国家格式。

$4 包含分机号码（如果存在）。

$3 包含 NSN 部分。

**验证和格式化**

使用进一步的 RegEx 模式来检查 NSN 是否具有此数字范围的正确位数。最后，将号码以 E.164 格式存储或以 E.123 格式显示。

有一个非常详细的英国号码验证和显示格式 RegEx 模式列表：

[用于验证和格式化 GB 电话号码的正则表达式](https://www.aa-asterisk.org.uk/RegularExpressions_for_Validating_and_Formatting_GB_Telephone_Numbers#Validating_GB_telephone_numbers)

在这里复制太长了，并且很难维护该文档的多个副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-07T12:20:12.707

一个更简单的版本：

`^((\+44)|(0)) ?\d{4} ?\d{6}$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-26T19:12:47.170

测试英国电话号码有点复杂，因为不同省份的格式完全不同。查看此[链接](https://en.wikipedia.org/wiki/Telephone_numbers_in_the_United_Kingdom)，了解英国电话号码有多少种格式。

采用

```
^((((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\(\d{4}|\d{3}))?)|((\+44\s?7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3})|((((\+44\s?\d{4}|\(?0\d{4}\)?)\s?\d{3}\s?\d{3})|((\+44\s?\d{3}|\(?0\d{3}\)?)\s?\d{3}\s?\d{4})|((\+44\s?\d{2}|\(?0\d{2}\)?)\s?\d{4}\s?\d{4}))(\s?\(\d{4}|\d{3}))?$ 
```

使用来自[regexlib.com的信息创建](http://regexlib.com/(X(1)A(l-nChViI5dSAG95_uBOSOspkoJmU1Z-9Z9wc0fZ9zLB4YlKIHDiv_To2RddJRr1N195LynHAeX-e_gVtcZfnDYIc9y1orYwiE7491YXDH-8sONlpWQN-w_WmxAuAMV9W83cWw1o1f07QmHuMHAuSBETbQrkNPtcZeeg33TlXHFeR2L6T16RN9cO0z8vrVYOd0))/UserPatterns.aspx?authorid=d95177b0-6014-4e73-a959-73f1663ae814&AspxAutoDetectCookieSupport=1)

与正则表达式匹配的值：

01222 555 555 | (010) 55555555 #2222 | 0122 555 5555#222 | 07222 555555 | (07222) 555555 | +44 7222 555 555 | +447222555555 | +44 7222 555 555 | (0722) 5555555 #2222

与正则表达式不匹配的值：

01222 555 5555 | (010) 55555555 #22 | 0122 5555 5555#222 | 7222 555555 | +44 07222 555555 | (+447222) 555555 | (+447222)555555 | +44(7222)555555 | (0722) 5555555 #22

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-16T16:02:30.613

除了以上所有这些，请注意英国号码在 +44 或 0 或 0044 之后总是有 10 个号码。（如果我错了，请纠正我）

为了避免这些大量的正则表达式，你可以使用这个正则表达式

```
^(\+44\s?\d{10}|0044\s?\d{10}|0\s?\d{10})?$ 
```

连同空间修剪器。例如在 PHP 中

```
trimmedPhoneNumber= preg_replace('/\s+/', '', $phoneNumber); 
```

# internet-explorer - PowerShell - InternetExplorer：0x80010108 (RPC_E_DISCONNECTED)

> ID：11518036
> 
> 赞同：13
> 
> 时间：2012-07-17T07:41:32.310
> 
> 标签：internet-explorer, powershell

我想用 PowerShell 自动化 InternetExplorer 在我们的 Intranet 中打开一个站点（受信任的站点 | 保护模式：关闭）

当我执行我的代码时，IE 打开了 Intranet 站点，但对 $ie 对象的引用丢失了。

**错误：** 调用的对象已与其客户端断开连接。（来自 HRESULT 的异常：0x80010108 (RPC_E_DISCONNECTED)）

我怎样才能解决这个问题？（不能以管理员身份运行 IE）

```
$ie = New-Object -ComObject InternetExplorer.Application
$ie.visible = $true
$ie.Navigate($url)
$ie 
```

我的解决方法，但不是很好：

```
& "C:\Program Files\Internet Explorer\iexplore.exe" $urls
Start-Sleep 5
$shell = New-Object -com Shell.Application
$ie = @($shell.Application.Windows())| Where-Object { $_.LocationUrl -like "*$urls*" }
$ie.Navigate($url2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:43:05.550

尝试以管理员身份运行 PowerShell。

# sass - 精灵时 Codekit Compass vs Less 编译

> ID：11518037
> 
> 赞同：1
> 
> 时间：2012-07-17T07:41:35.320
> 
> 标签：sass, less, compass-sass

我最近从使用 Less 转向使用 Compass。我使用 Codekit，但不使用内置 Compass 编译器，因为它在使用插件时会出现问题。现在我的问题是，与 Less 相比，编译时间要长得多。我意识到这是因为它在每次编译时都会生成精灵。有没有办法关闭它？IE，只有当我有一定的定制时才编译。我查看了自定义，没有办法设置自定义属性来告诉何时以及何时不编译新精灵。换句话说，我想手动告诉编译器何时生成精灵。

其他人有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:48:35.007

由于在任何地方都找不到解决方案，我决定做的是创建一个单独的 sprite.scss 文件来导入和管理我的精灵。当我有一个需要附加到 sprite 的新图像时，我会编译 sprite.scss。现在我有一个 sprite.css 文件。我将 sprite.css 文件的内容复制到部分 _sprites.scss 中并将其导入到我的 main.scss 文件中。现在我可以在 main.scss 文件中使用扩展等。我知道这听起来非常麻烦，但它可以将我的编译时间从 30-60 秒减少到不到 2 秒。

其他任何人都有解决方案，我全都听。

# http-status-code-404 - Joomla：显示主页内容的 404 页

> ID：11518041
> 
> 赞同：0
> 
> 时间：2012-07-17T07:41:57.173
> 
> 标签：http-status-code-404, joomla1.5

我在 joomla 中有一个站点（版本 1.5.23），其中任何不存在的 url 都显示主页的内容（及其 200 ok）。如何让它进入 404 页面

前任。www.example.com/sdfsdf 或 www.example.com/blahblah 都显示主页内容。

任何帮助，将不胜感激

问候，

寿司

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:21:46.957

这些方法有效。不同的解释，但相同的概念。

[方法](http://kb.siteground.com/article/How_to_create_a_custom_404_page_not_found_page_in_Joomla.html)

[原创 Joomla！文档](http://docs.joomla.org/Custom_error_pages)

如果您使用 Apache 检查以下行的存在并且所有 404 错误将被重定向到您的主页代码：ErrorDocument 404 index.php

类似问题的解决方案：[Joomla！论坛链接](http://forum.joomla.org/viewtopic.php?t=282063)

# c++ - 在派生类中使用指令将继承更改为公共

> ID：11518042
> 
> 赞同：0
> 
> 时间：2012-07-17T07:41:59.300
> 
> 标签：c++, inheritance, protected, using-directives

**一个非常简单但又令人困惑的问题：**

为什么 using 指令会更改继承！？这与 Comeau 一起编译。

我读过 using 指令（声明？）使变量公开，但为什么呢？我想要的只是一个不要总是`this->x`在 B 内写的好方法......？

```
class A{
protected:
    int x;
public:
};

class B: public A {
public:
    using A::x;
};

int main(){
  B b;
  b.x = 2;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:56:29.773

> 为什么愚蠢的 using 指令会改变继承！？

因为您已经声明了`using`声明（不是指令）`public`。制作它，`protected`或者`private`如果您不希望它被普遍访问。

> 我想要的只是一个不总是`this->x`在里面写的好方法`B`......？

通常，在您的示例中，您不必这样做。`A`如果和`B`都是模板，并且基类是依赖的（即依赖于派生类的模板参数），您只需要这样做。在这种情况下，私人`using`将允许您避免写作`this->x`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T07:45:37.907

您是类设计者，您可以公开变量。

如果你不想要那个，不要把它`using`放在公共部分。

而且你不必`this->x`在派生类中使用，除非基类是模板。

# iphone - iPhone应用程序：日期选择器视图作为下拉列表

> ID：11518046
> 
> 赞同：0
> 
> 时间：2012-07-17T07:42:12.957
> 
> 标签：iphone, datepicker, uidatepicker

[UIPickerView 选择和隐藏](https://stackoverflow.com/questions/5347537/uipickerview-select-and-hide)

当我在文本字段上“触地”时，我用它来弹出一个日期选择器视图。也就是说，我需要文本字段来显示我在日期选择器视图上选择的任何内容作为其内容。

在选择所需的日期/时间后单击“完成”按钮后，文本字段不会显示我的输入。

我错过了什么？

```
- (IBAction)showPicker:(id)sender {

// create a UIPicker view as a custom keyboard view
UIDatePicker* pickerView = [[UIDatePicker alloc] init];
[pickerView sizeToFit];
pickerView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
//pickerView.delegate = self;
//pickerView.dataSource = self;
//pickerView.showsSelectionIndicator = YES;
self.datePickerView = pickerView;  //UIDatePicker

fromDate.inputView = pickerView;

// create a done view + done button, attach to it a doneClicked action, and place it in a toolbar as an accessory input view...
// Prepare done button
UIToolbar* keyboardDoneButtonView = [[UIToolbar alloc] init];
keyboardDoneButtonView.barStyle = UIBarStyleBlack;
keyboardDoneButtonView.translucent = YES;
keyboardDoneButtonView.tintColor = nil;
[keyboardDoneButtonView sizeToFit];

UIBarButtonItem* doneButton = [[[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                style:UIBarButtonItemStyleBordered target:self
                                                               action:@selector(pickerDoneClicked:)] autorelease];

fromDate.text = (NSString *)datePickerView.date; // fromDate is the Text Field outlet, where I am trying to display the selection on the picker.

[keyboardDoneButtonView setItems:[NSArray arrayWithObjects:doneButton, nil]];

// Plug the keyboardDoneButtonView into the text field...
fromDate.inputAccessoryView = keyboardDoneButtonView;  

[pickerView release];
[keyboardDoneButtonView release];
}

- (IBAction)pickerDoneClicked:(id)sender {

    [fromDate resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:27:51.477

您必须为 UIControlEventValueChanged 的​​选择器设置选择器

```
 [datePicker addTarget:self
               action:@selector(setDate:)
     forControlEvents:UIControlEventValueChanged];

 - (void)setDate:(id)sender{

     NSDateFormatter *df = [[NSDateFormatter alloc] init];

     df.dateStyle = NSDateFormatterMediumStyle;

     date.text = [NSString stringWithFormat:@"%@",
                  [df stringFromDate:datePicker.date]];

} 
```

# file - perl文件上传错误

> ID：11518048
> 
> 赞同：0
> 
> 时间：2012-07-17T07:42:23.263
> 
> 标签：file, upload, cgi, perl

我正在尝试在 perl 中上传文件，当我在 ftp 服务器上检查它时正在创建文件，但那里的大小为 0，我想知道为什么会这样，我搜索并尝试了很多但无法解决这个问题，请你帮助我好吗？

这是我正在使用的代码：

```
    在此处输入代码
    使用 CGI；
    我的 $query = 新 CGI；
    我的 $upload_dir = "/home/public_html/upload/avatars";
    我的 $filename = $ses->getUserId."_".$query->param("profile_avatar");
    我的 $org_filename = $ses->getUserId."_".$f->{profile_avatar};
    我的 ($name, $path, $extension) = 文件解析 ($org_filename, qr/\.[^\.]+$/ );
    $文件名 = $name 。$扩展;
    我的 $safe_filename_characters = "a-zA-Z0-9_.-";  
    $文件名 =~ tr/ /_/;
    $filename =~ s/[^$safe_filename_characters]//g;
    $filename =~ s/.*[\/\\](.*)/$1/;
    我的 $upload_filehandle = $query->upload("profile_avatar");
    open(UPLOADFILE, ">$upload_dir/$filename") 或 $ses->message("$!");
    binmode 上传文件；
    而 (<$upload_filehandle>)
    {
        打印上传文件；
    }
    关闭上传文件；

```

在这个变量（$upload_filehandle）中，我得到了空白，没有任何意义，我不知道为什么会这样。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:06:30.350

这是一个我知道有效的子程序......

我有一个像你这样的 CGI，它使用参数 $query->param("profile_avatar"); 调用它。

```
sub upload_bin_file
{
my ($ufile) = @_;
my $ufilename = "\L$ufile";  #Force filename to be lower case
$ufilename = ~s/\\/\//g;     # Convert backslashes to forward slashes

my @dirs = split(/\//, $ufilename);    # SPlit the filename by the paths(s)
my $dfile = "$UFILE_DIR/$dirs[$#dirs]";  # This takes just the filename part
print "File uploaded to [$dfile]<BR>\n"; # Optional debug statement

open(DEST,">$dfile") or die "[F] Upload server: Could not open $dfile: $!";
binmode(DEST);
binmode($ufile);
my @src_content=<$ufile>;
print DEST @src_content;
close($ufile);
close(DEST);

$dfile; #Return the name of the file that we uploaded
} 
```

我不确定传入文件的 binmode 是答案，还是从文件名中删除路径。你可以试试看：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T01:39:46.853

我遇到了同样的问题，浪费了很多时间试图弄清楚。就我而言，解决方案很简单，但一点也不明显。我正在记下它，以防人们发现它有帮助。

事实证明 CGI.pm (3.5.2) 在 /usr/tmp/ 中创建临时文件

由于我不确定的原因，我的机器有超过 480 个这样的机器。其中一些相当大。原则上，这些应该在退出时被删除，但显然仍然存在。当我删除它们时，就像以前一样，原始脚本又开始工作了。

不幸的是，我使用 'rm /usr/tmp/CGI*' 清理了 tmp/ 并没有真正环顾四周。tmp/ 可能已完全填满，而我只是碰巧释放了一些空间。但是 perl (v5.14.2) 得到了它认为完美的文件句柄。没有人注意到或抱怨（这是一个服务器，所以你认为他们应该有）。

沿途有用的代码：

```
print "Content-type: text/html\012\012";
print "<html><head></head><body>\012";
print "<b>Below is an EXACT echo of what your browser sent:</b>\012<hr>";
print "<pre>\012";
while (<STDIN>) {
  s/>/&gt;/g;
  s/</&lt;/g;
  print $_;
}

print "</pre>\012";
print "</body></html>\012"; 
```

# sql - 作为参数传递的公式的 SQL 解析器

> ID：11518051
> 
> 赞同：1
> 
> 时间：2012-07-17T07:42:39.500
> 
> 标签：sql, parsing, replace, formula

我的任务是编写一个存储过程，它将用户指定的公式作为参数，并使用公式上的表格进行计算。

这是为了能力测试的结果。测试分为多个部分，每个部分都分配有一个变量，例如。`E1`和`E2`。

现在每个部分都由带有分数的问题组成。例如。`E1 = [1]+[2]-[3]+[4]+[5]+[6]`当`[number]`指示问题编号时。

现在用户将指定一个类似上面的公式`[1]+[2]-[3]+[4]+[5]+[6]`，我必须编写一个解析器，用该问题的分数替换问题编号。但是其中有一个障碍，因为一个部分可以参考另一部分的分数，例如。`E2 = [7]+[8]+([6]-E1)+[9]`.

所以我需要编写一个解析器来解析字符串，用分数替换 [Number]，如果它达到一个可变数字，首先计算部分分数，然后再继续。

我可以想象这将是一个递归函数，但任何人都可以帮助我找到正确的方向吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:51:30.217

我不是说你做不到，但是 SQL 并不是这种操作的最佳环境；同样，你可以用西瓜把钉子钉在墙上。您没有指定您的特定平台 - 如果它是 Microsoft SQL，那么 SQL CLR 过程可能会使必要的操作更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:47:11.307

如果您使用的是 mssql - 那么您还可以使用*动态 sql*，例如`exec('select 2*2')`

# jquery - fancybox 在 IE8 中无法使用，但在 IE9 中可以正常使用

> ID：11518052
> 
> 赞同：0
> 
> 时间：2012-07-17T07:42:40.903
> 
> 标签：jquery, internet-explorer-8, fancybox

使用ie9时，fancybox窗口正常打开，但在IE8下无法使用；它将重定向到页面 URL，而不是在fancybox 中加载它。

代码正常，没什么特别的：

```
$("a.iframe").fancybox({
    'hideOnOverlayClick':false,
    'hideOnContentClick': false,
    'transitionIn'  :   'elastic',
    'transitionOut' :   'elastic',
    'width'         :   '70%',
    'height'        :   '80%'

});

<a class="iframe" href="ResultsLogin.aspx">View Results</a> 
```

如果这是一个已知问题并且是否有修复，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:46:54.847

删除最后一个属性的尾随逗号。IE8 认为它之后会有一些事情发生并中断。现代浏览器很可能会理解您所做的事情并继续执行脚本的其余部分。

```
'height'        :   '80%', 
```

# c# - 无法复制文件“obj\Debug..\GENERIC_APP_NAME\PAGENAME.xaml”

> ID：11518053
> 
> 赞同：0
> 
> 时间：2012-07-17T07:42:49.463
> 
> 标签：c#, hyperlink, microsoft-metro, windows-runtime

我有一个通用的 Windows METRO 风格应用程序，它应该是派生应用程序的基础应用程序（具有不同的风格、资源等......）

因此，为了使用这个通用应用程序，我在我的解决方案中添加了另一个应用程序，其中几乎所有文件都是指向我的通用应用程序文件的链接，包括页面。

但是当我尝试编译派生时，我收到以下错误：

> 无法复制文件“obj\Debug..\GENERIC_APP_NAME\PAGENAME.xaml”

我想这与没有将链接文件复制到正确位置的 msbuild 工具有关。

有没有办法解决这个问题？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:54:34.107

好的，所以我在 Microsoft 论坛上问了同样的问题。这是一个 Visual Studio 2012 RC 错误。

[http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/cda8690c-f98f-49ca-af96-bcc69efe5a1d](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/cda8690c-f98f-49ca-af96-bcc69efe5a1d)

# math - 将二维样条函数 f(t) 转换为 f(x)

> ID：11518054
> 
> 赞同：7
> 
> 时间：2012-07-17T07:43:00.000
> 
> 标签：math, graphics, geometry, polynomial-math, spline

所以我有一组特殊情况的三次样条曲线，它的二维控制点总是会产生一条永远不会在*x*轴上交叉的曲线。也就是说，这些曲线看起来像是一个简单的多项式函数，使得*y* = *f* ( *x* )。我想有效地创建一个沿样条线的*y*坐标数组，这些坐标对应于沿样条线段长度的均匀间隔的 x 坐标。

我想有效地找到沿样条线的 y 坐标，例如，*x* =0.0、*x* =0.1、*x* =0.2 等，或者以另一种方式接近，有效地将*f [x,y]* ( *t* ) 样式函数转换为*f* ( *x* ) 函数。

我目前正在使用 4x4 常数矩阵和四个 2d 控制点来描述样条，使用 Hermite 或 Catmull-Rom 样条的矩阵常数，并将它们插入*t*从 0 到 1 的三次函数。

给定矩阵和控制点，在 x 轴上获得这些 y 值的最佳方法是什么？

编辑：我应该补充一点，足以绘制的近似值就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:25:37.600

如果数值近似足够好，人们通常会使用[求根](http://en.wikipedia.org/wiki/Root-finding_algorithm)技术（如[牛顿法）。](http://en.wikipedia.org/wiki/Newton%27s_method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:21:37.360

好吧，你可以解决你的*f [x]* ( *t* )= *x* for *t*。那将是一个三次方程；丑陋但仍然可以明确解决。如果您的样条曲线如您所描述的那样，那么其中两个解决方案将是共轭复数，因此唯一剩下的就是要采用的解决方案。用它来计算*y* = *f [y]* ( *t* )。如果您想要确切的解决方案，我怀疑您是否可以更轻松地完成任何事情。

您可以使用[Wikipedia 中的通用公式](http://en.wikipedia.org/wiki/Cubic_equation#General_formula_of_roots)来计算三次方程的解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T08:37:56.233

您的问题表明您想要均匀的空间*x*坐标，并且近似解是可以的。所以我提出以下算法：

*   确定您想要的网格点，例如每 0.1 *x*单位一个。
*   从*l* = 0 和*r* = 1 开始。
*   计算*f [x]* ( *l* ) 和*f [x]* ( *r* ) 并考虑这些端点表示的区间。
    *   如果间隔足够小并且恰好包含一个网格点，则使用中心参数*t* =( *l* + *r* )/2 作为该网格点的良好近似值，并将其作为单元素列表返回。
    *   如果在该间隔中至少有一个网格点，则使用 ( *l* + *r* )/2 作为分割点将其一分为二，并将两个计算的结果列表连接起来。
    *   如果区间内没有网格点，则跳过计算的当前分支，返回一个空列表。

这将放大网格点，将每个步骤中的参数空间一分为二，并为所有网格点提供合适的参数。

# sql - 获取列的总和

> ID：11518060
> 
> 赞同：0
> 
> 时间：2012-07-17T07:43:14.120
> 
> 标签：sql, sql-server, sql-server-2008

我想总结下面的列。我该怎么做？

当我使用

```
sum(DATEDIFF ( HOUR , startDate, endDate) / 10.0 ) 
```

它给出了这个输出：

```
(No column name)
1.000000
0.300000
1.000000
1.000000
1.000000
1.000000
0.300000 
```

我怎样才能总结这一列？

整个查询：

```
SELECT  SUM(DATEDIFF ( HOUR , StartTime , EndTime ) / 10.0 ) FROM [y]
     INNER JOIN [x] ON [x].UserID = [y].ID  
WHERE StartTime BETWEEN '20120709' AND '20120714' AND UserID = 1
    GROUP BY StartTime, [y].ID, [y].Name, EndTime 
    ORDER BY StartTime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:49:51.193

你有一个 GROUP BY 子句，不应该。删除它并重试。

如果这不正确并且您确实需要它，那么我们需要更多信息，拜托！你想得到什么结果？

如果您按列分组，那么对于该列中的每个不同值，您将获得一个单独的行。

停止查看查询并提供您希望查看的*示例结果。*或者告诉我们您想回答的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:51:13.123

删除您的 GROUP BY 子句。它导致多行。如果你只想要一个总和，那么 ORDER BY 也是不需要的。

# android - Android 模拟器软键盘输入被禁用

> ID：11518063
> 
> 赞同：1
> 
> 时间：2012-07-17T07:43:24.880
> 
> 标签：android, android-emulator

我是安卓应用程序的新手。我正在将应用程序从 iPhone 转移到 Android。如果我在输入字段中获得焦点，软键盘会正常弹出。但是，当我按下键时，我没有在输入字段中获得信息。我已按照此处的说明进行操作，建议我转到 AVD 管理器并编辑键盘的硬件以添加键盘支持。那并不能解决我的问题。

键盘的 AVD 详细信息如下： CPU/ABI：ARM(armeabi-v7a) 目标：Android 4.1 - API l\Level 16 皮肤：WVGA800 hw/lcd/密度：240 hw.keyboard.lid：是 hw.keyboard ： 是的

任何帮助表示赞赏。

霍华德 (howard@flickitt.​​com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:01:09.397

如果您看到软键盘出现，那是因为 hw.keyboard 实际上并未设置为 yes。你可以直接检查config.ini吗？您可能已经看过这个，但这里有更详细的说明。

[Android 模拟器不接受键盘输入 - SDK 工具 rev 20](https://stackoverflow.com/questions/11235370/android-emulator-doesnt-take-keyboard-input-sdk-tools-rev-20/11252510)

# tabs - 在 Mediawiki Tabber 扩展的页面加载之前隐藏标签内容

> ID：11518064
> 
> 赞同：2
> 
> 时间：2012-07-17T07:43:27.137
> 
> 标签：tabs, mediawiki

我在[这里使用这个名为“tabber”的脚本](http://www.barelyfitz.com/projects/tabber)在我的页面上制作标签来划分我的内容。具体来说，我通过[这个精彩的插件](http://www.mediawiki.org/wiki/Extension%3aTabber)在我的 Mediawiki 页面上使用 tabber 脚本。

但是，我遇到的问题是，当您第一次加载带有标签的任何页面时，标签会完全展开，然后收缩以隐藏不应显示的标签内容。这会导致页面四处跳转，直到它完全加载，这使得页面看起来像一团糟。（您可能不会在上面页面的示例中看到这一点，因为选项卡中几乎没有任何内容。如果您加载带有一堆内容的选项卡，以及它们周围的内容，问题就会开始发生。 )

在我在 Internet 上看到的一些选项卡脚本中，不会发生这种情况。当您加载页面时。什么都没有移动，似乎当您单击选项卡时，内容是第一次加载，而不是一次加载所有内容然后隐藏非活动选项卡的内容。我想知道是否可以为上面的 tabber 代码修改 Javascript 或 PHP，以便什么都不会跳转 - 这样当您加载页面时，您只会看到第一个选项卡的内容，然后其他选项卡要么加载它们当您单击它们或刚刚加载页面时拥有内容，但不只是显示然后收缩。我对 PHP 和 Javascript 的了解非常有限，并且一直在尝试通过将 tabber 脚本与记事本中的其他脚本进行比较来尝试解决这个问题，但我

非常感谢您！我非常感谢任何帮助！:)

编辑：我忘了提到[Tabber 的 Google 小组的某个人](https://groups.google.com/forum/?fromgroups#!topic/barelyfitz/JqZi3D9i-B4)几年前提出了一个解决方案，但是当我本周尝试它时，我无法让它工作。也许他们提出的代码可以帮助阐明我正在努力完成的工作。

# ruby - 如何使用 axlsx 添加数据标签

> ID：11518065
> 
> 赞同：3
> 
> 时间：2012-07-17T07:43:26.547
> 
> 标签：ruby, charts, labels, axlsx

我正在尝试使用 axlsx 为 ruby​​ 生成饼图。一切正常，但我似乎无法为每个“饼图”显示数据标签。我要拍摄的或多或少像这张[照片](http://www.nwscc.edu/nsfdc/troberson/excel.7.jpg)。（即它应该有数据标签和引线）。让标签只有数值并像往常一样包含带有颜色映射的图例也很好。

有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T10:51:03.410

我是 randym，axlsx 的作者。简短的版本是这尚未实现，因此您将无法根据您的图像将标签添加到图表中。

规范中最大的缺失部分是（ECMA-376 - 第 1 部分）

21.2.2.49 dLbls（数据标签）

需要将其插入系列、图表或两者中，因为它似乎是所有三者的共同元素。

我将在本周晚些时候的某个时间进行更深入的了解，但如果您愿意为 axlsx 做出贡献 - 请在 freenode (#axlsx) 上抓住我或将问题发布到 repo [https://github.com/randym/axlsx](https://github.com/randym/axlsx)

更新

事实证明这比我预期的要容易得多。

饼图的 master ( [https://github.com/randym/axlsx](https://github.com/randym/axlsx) )现在有一个工作版本。我将在接下来的几天内更新其余受支持的图表类型，并为下周的正式发布进行拍摄。

谢谢你让我知道你需要这个。

这是一个如何使用它的简单示例：

```
require 'axlsx'
p = Axlsx::Package.new
wb = p.workbook

# Pie Chart
wb.add_worksheet(:name => "Pie Chart") do |sheet|
  sheet.add_row ["First", "Second", "Third", "Fourth"]
  sheet.add_row [1, 2, 3, 4]
  sheet.add_chart(Axlsx::Pie3DChart, :start_at => [0,2], :end_at => [5, 15], :title=> 'dark corner here') do |chart|
    chart.add_series :data => sheet["A2:D2"], :labels => sheet["A1:D1"]
    chart.d_lbls.show_val = true
    chart.d_lbls.show_percent = true
    chart.d_lbls.d_lbl_pos = :outEnd
    chart.d_lbls.show_leader_lines = true
  end
end

p.serialize 'pie_chart_with_data_labels.xlsx' 
```

d_lbls 的可用属性有：

**lbl_pos**必须是 :bestFit, :b, :ctr, :inBase, :inEnd, :l, :outEnd, :r, :t 之一 默认情况下 axlsx 将使用 :bestFit

以及以下布尔属性：

**show_legend_key**

**show_val**

**show_cat_name**

**show_ser_name**

**显示百分比**

**show_bubble_size**

**show_leader_lines**

# mysql - 我应该使用什么查询来解决这些问题？

> ID：11518070
> 
> 赞同：2
> 
> 时间：2012-07-17T07:43:37.533
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
Date   | Expedition Name | Invoice
___________________________________________
4/6/12 | Starsindo       | X001908
4/6/12 | Starsindo       | X001900
4/6/12 | De Ros indah    | X002008
4/6/12 | De Ros indah    | X002108
4/6/12 | De Ros indah    | X002208
4/6/12 | Starsindo       | X002308
4/6/12 | Starsindo       | X002408
4/6/12 | Starsindo       | X002508 
4/6/12 | Japex           | X002608 
```

如何用mysql查询显示同一日期最常出现的三个远征队的名字？

我刚刚创建了这个查询，但仍然感到困惑：

```
Select  * From tb_exp_expor  Order By nama_exp_expor DESC 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T07:49:06.073

```
 SELECT count(*) as counta,Expedition_name,Date 
    FROM tbl_exp_expor 
    group by Expedition_name,Date
    Order by counta DESC
    limit 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:40:36.443

我认为 StackOverflow 上的这个问题和答案（由[danben 提供](https://stackoverflow.com/users/217332)）可能会对您有所帮助：
[mysql: Using LIMIT within GROUP BY to get N results per group?](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

它包含本文的链接：
[How to select the first/least/max row per group in SQL](https://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql)

# java - 从服务器向客户端发送消息（java < - > java）

> ID：11518071
> 
> 赞同：0
> 
> 时间：2012-07-17T07:43:41.170
> 
> 标签：java, android, google-app-engine

我正在尝试制作一个类似聊天的应用程序。向客户发送更新的最佳做法是什么？我正在考虑每 3-5 秒从客户端到服务器的自动请求，因为 GAE 只允许 http 请求。有没有更好的办法？

# google-chrome - 在 Chrome 中错误地重播 Swf 视频

> ID：11518072
> 
> 赞同：1
> 
> 时间：2012-07-17T07:43:42.277
> 
> 标签：google-chrome, flash, replay

我有一个问题，例如在 Chrome 中不正确地重播 swf-video。

详细信息：当用户单击页面上的按钮时，我有在新窗口中播放 swf 视频的任务。因此，swf 仅在浏览器缓存中没有视频文件时播放（第一次打开视频）。但是当我尝试通过单击按钮重复播放 swf-video 时，不显示视频，只播放音频。

我对解决这个问题没有任何想法。有谁能够帮我？

特性软件：Chrome - 版本 18.0.1025.142，swf - Shockwave Flash Object，版本 10.0.45.2。视频是来自计算机的记录，说明如何使用我的网站。

# c# - 数据无法插入数据库

> ID：11518074
> 
> 赞同：0
> 
> 时间：2012-07-17T07:43:48.410
> 
> 标签：c#, asp.net, sql-server

我有一个问题要在这里问。为什么我的数据不能插入到我的数据库中？我已经在 SQL Server 中创建了一个表。这是我的代码行供您参考。

```
protected void Button2_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    SqlCommand cmd = new SqlCommand("Insert into CarTab(Brand,Model,Plate,Color,Service) Values (@brand,@model,@plate,@color,@year,@service)",conn);

    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@brand", Label1.Text);
    cmd.Parameters.AddWithValue("@model", Label2.Text);
    cmd.Parameters.AddWithValue("@plate", Label3.Text);
    cmd.Parameters.AddWithValue("@color", Label4.Text);
    cmd.Parameters.AddWithValue("@year", Label5.Text);
    cmd.Parameters.AddWithValue("@service", Label6.Text);

    conn.Open();
    cmd.ExecuteNonQuery();
} 
```

我的代码有问题吗？请帮助我。我卡在这里。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T07:45:19.607

`Year`您的命令语句中似乎缺少您：

```
SqlCommand cmd = new SqlCommand(
"Insert into CarTab(Brand,Model,Plate,Color,Year,Service) 
    Values (@brand,@model,@plate,@color,@year,@service)",
conn); 
```

您提供 6 个参数，但只有 5 列。

您收到错误消息吗？通常，会出现带有一些信息的错误消息；它通常看起来像这样：

> INSERT 语句中的列数少于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。

**编辑。**

如果您仍然遇到问题，接下来要做的是查看实际的错误消息。让我们稍微重构一下您的代码：

```
using(SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString))
{
    using(SqlCommand cmd = new SqlCommand("Insert into CarTab(Brand,Model,Plate,Color,Service) Values (@brand,@model,@plate,@color,@year,@service)",conn))
    {

        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@brand", Label1.Text);
        cmd.Parameters.AddWithValue("@model", Label2.Text);
        cmd.Parameters.AddWithValue("@plate", Label3.Text);
        cmd.Parameters.AddWithValue("@color", Label4.Text);
        cmd.Parameters.AddWithValue("@year", Label5.Text);
        cmd.Parameters.AddWithValue("@service", Label6.Text);

        conn.Open();
        try
        {
            cmd.ExecuteNonQuery();
        }
        catch(Exception e)
        {
            string errorMessage = e.Message;
            //Set a label on the client to see the error message, or pause in the debugger and examine the property here.
            //throw;
        }
    }
} 
```

如果您根本没有看到任何错误，而这正是我最初困惑的地方，那么实际上可能是因为您的事件处理程序没有连接；有时，设计器会取消连接事件处理程序，这意味着您的点击和实际代码变得不相关并且永远不会运行。

检查你有：

```
Button2.Click += Button2_Click; 
```

在`InitializeComponent`构造函数或 Load 事件中或中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:47:27.997

您的 SQL 查询缺少其中的年份列：

```
INSERT INTO CarTab(Brand, Model, Plate, Color, Year, Service) 
```

# iphone - Objective C - 使用可变参数列表调用方法（NS_REQUIRES_NIL_TERMINATION）

> ID：11518076
> 
> 赞同：1
> 
> 时间：2012-07-17T07:44:03.473
> 
> 标签：iphone, objective-c, ios

假设我在一个类中有一个函数，它显示一个警报：

```
- (void)showErrorWithTitle:(NSString *)title message:(NSString *)message
         cancelButtonTitle:(NSString *)cancelButtonTitle 
         otherButtonTitles:(NSString *)otherButtonTitles, ... NS_REQUIRES_NIL_TERMINATION;

- (void)showErrorWithTitle:(NSString *)title message:(NSString *)message
         cancelButtonTitle:(NSString *)cancelButtonTitle 
         otherButtonTitles:(NSString *)otherButtonTitles, ... {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title
                                                    message:message
                                                   delegate:nil
                                          cancelButtonTitle:cancelButtonTitle
                                          otherButtonTitles:nil];

    va_list args;
    va_start(args, otherButtonTitles);
    for (NSString *arg = otherButtonTitles; arg != nil; arg = va_arg(args, NSString*))
    {
        [alert addButtonWithTitle:arg];
    }
    va_end(args);

    [alert show];
    [alert release];
} 
```

我有一个包装类，其中一个方法调用此方法。我的问题是我必须如何实现这个方法？

此解决方案不起作用：

```
- (void)showErrorWithTitle1:(NSString *)title message:(NSString *)message 
          cancelButtonTitle:(NSString *)cancelButtonTitle 
          otherButtonTitles:(NSString *)otherButtonTitles, ... NS_REQUIRES_NIL_TERMINATION;

- (void)showErrorWithTitle1:(NSString *)title message:(NSString *)message 
          cancelButtonTitle:(NSString *)cancelButtonTitle 
          otherButtonTitles:(NSString *)otherButtonTitles, ... {

    [[Someclass intance] showErrorWithTitle:title
                                    message:message
                          cancelButtonTitle:cancelButtonTitle
                          otherButtonTitles:otherButtonTitles, nil];
} 
```

调用：

```
[self showErrorWithTitle1:@"Hello"
                 message:@"Example"
       cancelButtonTitle:@"No"
       otherButtonTitles:@"Yes, Maybe", nil]; 
```

# android - 我可以使用 android NDK 修改之前创建的 .so 文件吗？

> ID：11518078
> 
> 赞同：1
> 
> 时间：2012-07-17T07:44:08.580
> 
> 标签：android, android-ndk

目前我刚开始使用 NDK，现在我有一些疑问。

无论如何要使用 NDK 修改以前创建的 .so 文件吗？我们可以修改那个 .so 文件吗？我只是想更改一些规范并想要重建。

任何帮助和建议将不胜感激。
提前致谢

**编辑**

```
000064e0 <Pow2>:
    64e0:   e260201e    rsb r2, r0, #30 ; 0x1e
    64e4:   e1a02802    lsl r2, r2, #16
    64e8:   e3a00001    mov r0, #1  ; 0x1
    64ec:   e1a02842    asr r2, r2, #16
    64f0:   e2423001    sub r3, r2, #1  ; 0x1
    64f4:   e1a00310    lsl r0, r0, r3
    64f8:   e59f3054    ldr r3, [pc, #84]   ; 6554 <Pow2+0x74>
    64fc:   e59fc054    ldr ip, [pc, #84]   ; 6558 <Pow2+0x78>
    6500:   e1a01301    lsl r1, r1, #6
    6504:   e08f3003    add r3, pc, r3
    6508:   e92d0030    push    {r4, r5}
    650c:   e793c00c    ldr ip, [r3, ip]
    6510:   e201481f    and r4, r1, #2031616    ; 0x1f0000
    6514:   e1a04844    asr r4, r4, #16
    6518:   e08c5084    add r5, ip, r4, lsl #1
    651c:   e1a04084    lsl r4, r4, #1
    6520:   e19cc0b4    ldrh    ip, [ip, r4]
    6524:   e1d540b2    ldrh    r4, [r5, #2]
    6528:   e3e05902    mvn r5, #32768  ; 0x8000
    652c:   e00510c1    and r1, r5, r1, asr #1
    6530:   e080080c    add r0, r0, ip, lsl #16
    6534:   e064c00c    rsb ip, r4, ip
    6538:   e161018c    smulbb  r1, ip, r1
    653c:   e0400081    sub r0, r0, r1, lsl #1
    6540:   e1a00250    asr r0, r0, r2
    6544:   e1a00800    lsl r0, r0, #16
    6548:   e1a00840    asr r0, r0, #16
    654c:   e8bd0030    pop {r4, r5}
    6550:   e12fff1e    bx  lr
    6554:   0000abcc    .word   0x0000abcc
    6558:   00000078    .word   0x00000078 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:53:05.200

您不能直接更改 .so 文件。但是，您可以更改源代码（使用 C 或 C++）并使用 NDK 重新编译它。但是，如果您无法访问源代码，那么您的机会就相当渺茫。

您可能能够反编译/反汇编 .so，但如果不是不可能的话，将其重新编译回 .so 将证明是极其困难的

# java - 帧解码器缓冲区在高 tps 时损坏

> ID：11518079
> 
> 赞同：2
> 
> 时间：2012-07-17T07:44:12.770
> 
> 标签：java, tcp, netty

我有一个非常简单的解码器，它扩展了 FrameDecoder。

它将解码一个简单的文本协议（总是可变长度）并读取缓冲区，直到它找到一个'\r'，然后将返回 ChannelBuffer（包含 1 条解码消息）。

示例文本协议/消息：

**xxxx,yyyy,zzzz\r**

我总是像这样将解码器与字符串解码器结合起来：

```
p.addLast("stdDecoder", new SimpleTextDecoder()); //extends FrameDecoder

p.addLast("stringDecoder", new StringDecoder(CharsetUtil.UTF_8)); 
```

一切正常，直到我达到更高的 tps（+/- 200tps），然后 ChannelBuffer 偶尔开始返回缓冲区，如下所示：

**>xxxx,yyyxxxx,yyyy,zzzz\r**

或者：

**>y,zzzz\r** 等

解码器：

```
 public static final char END_MESSAGE = 13;

   if (buffer.readableBytes() < 6) {
          return null;
   }
   buffer.markReaderIndex();
   if (1 <= buffer.readableBytes()) {
        byte bite = buffer.readByte();
        if (bite != END_MESSAGE) {
           /* Create a new ChannelBuffer which is used for the cumulation. */
           ChannelBuffer frameBuffer = buffer.factory().getBuffer(buffer.capacity());

           /* Write  byte */
           frameBuffer.writeByte(bite);

           while (buffer.readable()) {
               /* read next byte */
               bite = buffer.readByte();
               if (bite != END_MESSAGE) {
                   frameBuffer.writeByte(bite);
               } else {
                   /* Write end message and return buffer */
                   frameBuffer.writeByte(bite);
                  return frameBuffer;
               }
           }
       } else {
           return null;
       }
    }

    /* not readable bytes return null*/
    return null;
} 
```

**编辑：**好的新版本，现在正在工作..如果可能的话，希望得到一些反馈:)

```
public class xxxxDecoder extends FrameDecoder {
    private static final Logger log = LoggerFactory.getLogger(xxxxDecoder.class);
    public static final char END_MESSAGE = 13;
    public static final char START_MESSAGE = 83;

    //Decodes the received packets so far into a frame.
    @Override
    protected Object decode(ChannelHandlerContext ctx,
                            Channel channel,
                            ChannelBuffer buffer) throws Exception {

        /* Shortest known xxx message\r
         * 8 bytes
         */
        if (buffer.readableBytes() < 8) {
            if (Consts.DEBUG_ENABLED) {
                log.debug("YAWN... data Smaller than 8 bytes,waiting for more," + buffer.readableBytes());
            }
            /*If null is returned, it means there's not enough data yet.*/
            buffer.resetReaderIndex();
            return null;
        } else {
            log.debug("Readable bytes=" + buffer.readableBytes() + ",buffersize=" + buffer.capacity());
        }

        /* Mark the "end, i think?" of this buffer  */
        buffer.markReaderIndex();

        if (1 <= buffer.readableBytes()) {

            byte bite = buffer.readByte();
            if (bite != END_MESSAGE) {
                if (Consts.DEBUG_ENABLED) {
                    log.debug("Yipee...Found new message," + bite + ",buffersize=" + buffer.capacity());
                }

                /* Create a new ChannelBuffer which is used for the cumulation. */
                ChannelBuffer frameBuffer = buffer.factory().getBuffer(buffer.capacity());

                /* Write  byte */
                frameBuffer.writeByte(bite);

                while (buffer.readable()) {
                    /* read next byte */
                    bite = buffer.readByte();
                    if (bite != END_MESSAGE) {
                        frameBuffer.writeByte(bite);
                    } else {
                        /* Write end message and return buffer */
                        frameBuffer.writeByte(bite);
                        if (Consts.DEBUG_ENABLED) {
                            log.debug("Aha...Found end message=" + bite + ", returning complete message");
                        }
                        return frameBuffer;
                    }
                }
            } else {
                /*If null is returned, it means there's not enough data yet.*/
                buffer.resetReaderIndex();
                return null;
            }
        }

        /* not readable bytes return null*/
        buffer.resetReaderIndex();
        return null;
    } 
```

# python - 蟒蛇多线程

> ID：11518083
> 
> 赞同：1
> 
> 时间：2012-07-17T07:44:25.470
> 
> 标签：python, multithreading, python-multithreading

我在将我的代码与线程一起使用时遇到问题，问题显然是我在线程部分之外定义的变量没有在线程部分内部定义，这是我的代码：

```
import sys
import socket
from time import sleep
import threading

ip = raw_input ("please insert host ip: ")
port = input ("please insert port to fuzz: ")
header = raw_input ("please enter the header you want to fuzz, put & in the place you want to fuzz: ")
packet = raw_input ("what string would you like to fuzz the header with? : ")
multi = input ("in what jumps would you liike to multiply the string ? : ")
process = input ("please insert number of threads: ")
host = ip, port
char = packet * multi
a = 1

class ConnectionThread ( threading.Thread ):
    def run ( self ):
        while a > 0:
            try:
                s = socket.socket( socket.AF_INET, socket.SOCK_STREAM)
                s.connect((host))
                header = header.replace("&", packet)
                s.send(header)
                s.settimeout(7)
                data = s.recv(4)
                if data > 0:
                    print "got awnser"
                else:
                    print "no awnser"   
                sleep(0.1) 
                print "Fuzzing With:", header
                header = header.replace (packet, "&")
                packet = char + packet 
                s.close()
            except Exception as e:
                print e   
                s.close()
                sys.exit(0)
for x in xrange ( process ):
   ConnectionThread().start() 
```

我得到这个作为回报

```
local variable 'header' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:47:03.487

您需要使用`global`来表示变量是全局变量。例如，请参见[此处](https://stackoverflow.com/questions/146557/do-you-use-the-global-statement-in-python)

例如，将以下内容添加到`run`（上方`if`）：

```
global host, header, ... # All the other variables you use 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:43:29.510

您需要为 ConnectionThread 类提供您想要传递给它的属性。在类的顶部放置一个**init**方法，这将定义您要传递给 run 方法的变量：

```
import sys
import socket
from time import sleep
import threading

class ConnectionThread ( threading.Thread ):
    def __init__(self):
        self.ip = raw_input ("please insert host ip: ")
        self.port = input ("please insert port to fuzz: ")
        self.header = raw_input ("please enter the header you want to fuzz, put & in the place you want to fuzz: ")
        self.packet = raw_input ("what string would you like to fuzz the header with? : ")
        self.multi = input ("in what jumps would you liike to multiply the string ? : ")
        self.process = input ("please insert number of threads: ")
        self.host = self.ip, self.port
        self.char = self.packet * self.multi
        self.a = 1

    def run ( self ):
        while self.a > 0:
            try:
                s = socket.socket( socket.AF_INET, socket.SOCK_STREAM)
                s.connect((self.host))
                self.header = self.header.replace("&", self.packet)
                s.send(self.header)
                s.settimeout(7)
                data = s.recv(4)
                if data > 0:
                    print "got awnser"
                else:
                    print "no awnser"   
                sleep(0.1) 
                print "Fuzzing With:", header
                self.header = self.header.replace (self.packet, "&")
                self.packet = self.char + self.packet 
                s.close()
            except Exception as e:
                print e   
                s.close()
                sys.exit(0)

for x in xrange ( ConnectionThread.process ):
   ConnectionThread().start() 
```

看看类是如何工作的：

[http://docs.python.org/tutorial/classes.html](http://docs.python.org/tutorial/classes.html)

了解更多信息。

希望这可以帮助 ：）

# python - 当我的代码正确缩进时，为什么会出现 IndentationError？

> ID：11518085
> 
> 赞同：3
> 
> 时间：2012-07-17T07:44:41.560
> 
> 标签：python

下面是我的全部代码。尝试执行它时，我不断收到错误消息

```
File "/Users/thomas/prac.py", line 15
  elif choice == "1":
IndentationError: expected an indented block 
```

现在我确定我的缩进是正确的（我没有混合制表符和空格！）但我不知道为什么这不起作用：

```
keepProgramRunning = True
while keepProgramRunning:
    print "Pleases choose an option: "
    print "0"
    print "1"

    choice = raw_input()

    if choice == "0":
        #do something
    elif choice == "1":
        print "Bye"
        keepProgramRunning = False
    else:
        print "try again" 
```

怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T07:46:03.950

注释不足以被视为缩进。如果你想有一个空块，那么你需要使用`pass`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:46:23.590

你不能有空的 if 语句。Python 期望里面有一些东西，如果你真的不需要放任何东西，你可以把 pass 放在那里。

但是如果你没有任何事情要做，为什么还要有 if 语句。

# http - 浏览器最大 HTTP 请求（主机与 IP 地址）

> ID：11518086
> 
> 赞同：0
> 
> 时间：2012-07-17T07:44:42.257
> 
> 标签：http

我们希望在单独的子域上托管图像。我们只想将子域映射到相同的 IP 地址。

即 testserver.com 的图像托管在 img.testserver.com 上，并且 testserver.com 和 img.testserver.com 都映射到相同的 IP 地址 XXX.XXX.XXX.XXX

我相信 IE7 允许每个主机最多 2 个并发连接。

IE7 是否允许 4 个并发请求（testserver.com 和 img.testserver.com 各 2 个）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:52:35.920

> IE7 是否允许 4 个并发请求（testserver.com 和 img.testserver.com 各 2 个）？

这是正确的。

查看此页面，了解每个主机和整体可以建立多少个连接：[http ://www.browserscope.org/?category=network](http://www.browserscope.org/?category=network)

# vb.net - 找不到引导的先决条件（全部列出）

> ID：11518090
> 
> 赞同：0
> 
> 时间：2012-07-17T07:44:57.097
> 
> 标签：vb.net, setup-deployment, bootstrapping, prerequisites

与[Wallys Post](https://stackoverflow.com/questions/8220383/how-do-i-fix-the-prerequisite-cannot-be-found-for-bootstrapping-warning-in-vis "关于stackoverflow的一个未回答的问题")一样，我似乎无法解决先决条件列表中链接断开的问题。我正在使用 clickonce 部署 vb.net 桌面应用程序，但所需的先决条件显示感叹号警告图标。我检查了注册表中的位置并确保包在正确的文件夹中（C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages），但每次我关闭并重新打开工作室时，我看不到添加的软件包，仅列出了 .Net v2.0 到 3.5。（带有警告）

我过去在更改开发机器时遇到过这种情况，但是一旦我将包添加到正确的文件夹中，它们就会出现在先决条件列表中。

安装 vs2010 SP1 后出现此问题。我删除了 SP 并重新安装了工作室，其他一切似乎都很好。

有没有其他人遇到过这个问题，你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:39:39.467

我最终修复了它。

卸载所有与 .Net 和 vs2008/vs2010 相关的东西。清理程序文件目录以删除与 Visual Studio 相关的所有以管理员身份登录 Ran 完整安装。现在所有先决条件都可见以进行部署。

# java - 如何正确地将特定对象列表转换为 Gson？

> ID：11518091
> 
> 赞同：17
> 
> 时间：2012-07-17T07:45:15.953
> 
> 标签：java, json, hibernate, gson

我正在开发 Spring MVC 项目。我正在使用休眠。我想使用 AJAX 和 jQuery 从我的 Spring 控制器中获取一些 JSON。不幸的是，当我`Gson`在我的应用程序中实现方法时，我遇到了一个错误：

```
java.lang.UnsupportedOperationException: Attempted to serialize java.lang.Class: 
org.hibernate.proxy.HibernateProxy. Forgot to register a type adapter? 
```

我必须使用哪个适配器以及以何种方式使用？错误发生在方法的最后一行：

```
public String messagesToJson(List<Message> messages) {
    Gson gson = new Gson();     
    List<Message> synchronizedMessages = Collections.synchronizedList(messages);
    return gson.toJson(synchronizedMessages, ArrayList.class);
} 
```

这是我`Message`在带有 Hibernate 的 Spring MVC 项目中使用的类：

```
@Entity
@Table(name = "MESSAGES", schema = "PUBLIC", catalog = "PUBLIC")
public class Message implements java.io.Serializable {

    private static final long serialVersionUID = 1L;
    private int messageId;
    private User users;
    private String message;
    private Date date;

    //Constructor, getters, setters, toString
} 
```

**编辑**

我想知道：我的`Message`对象是代理还是整个`List<Message>`？我以这种方式获取消息列表：

```
public List<Message> findAllUserMessages(String username) {
    Query query = entityManager.createQuery("from Message where username = :username order by date desc")
            .setParameter("username", username);

    @SuppressWarnings("unchecked")
    List<Message> messages = query.getResultList();
    return messages;
} 
```

**编辑 2**

不，我的`List<Message>`对象没有被代理。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-17T13:26:16.573

我已经解决了我的问题。关于`HibernateProxy`物体的假设似乎很有可能。然而，当我仔细阅读我的错误时，一切都开始正常工作了。最后我以这种方式注册了类型适配器：

```
public String messagesToJson(List<Message> messages) {  
    GsonBuilder gsonBuilder = new GsonBuilder();
    Gson gson = gsonBuilder.registerTypeAdapter(Message.class, new MessageAdapter()).create();
    return gson.toJson(messages);
} 
```

我的任何`MessageAdapter`班级看起来像：

```
public class MessageAdapter implements JsonSerializer<Message> {

    @Override
    public JsonElement serialize(Message message, Type type, JsonSerializationContext jsc) {
        JsonObject jsonObject = new JsonObject();
        jsonObject.addProperty("message_id", message.getMessageId());
        jsonObject.addProperty("message", message.getMessage());
        jsonObject.addProperty("user", message.getUsers().getUsername());
        jsonObject.addProperty("date", message.getDate().toString());
        return jsonObject;      
    }
} 
```

就这样。现在我可以正确使用 AJAX 在 jQuery 中获取 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:31:40.367

正如@madhead 在评论中提到的那样，发生这种情况是因为根据情况，Hibernate 在您的对象周围创建代理，这将调用某些方法的实际实现，并为其他方法调用“仪器化”。因此，对象的“实际”类型是 HibernateProxy。[您可以使用与此处](https://stackoverflow.com/questions/11228838/how-to-unproxy-a-hibernate-object)描述的代码类似的代码来访问您的实现。在您的情况下，您必须为列表中的每个项目调用“unproxy”方法，将它们放入一个新列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T08:42:20.737

虽然回答起来已经很老了，但我想只需为带有字符串字段的消息创建一个 DTO 就可以解决这个问题。

# php - 字符不会使用 PHPExcel Reader 从 PHP 导入 MySQL 表

> ID：11518094
> 
> 赞同：0
> 
> 时间：2012-07-17T07:45:18.257
> 
> 标签：php, mysql, database

这段代码有什么问题。为什么不将数组中的字符数据导入到 sql 表中。我的 excel 表包含我必须导入的字符和整数的混合。我将excel表中的每个字符替换为某个整数值并检查，然后我发现它工作正常，但如果它包含字符（字母），那么它就不起作用。在表中，列数据类型也很好，因为它们是 Varchar。

我不知道为什么它不能导入字符。如果有人有任何线索或解决方案，请回复。

请参阅此处的 Pastebin：http: [//pastebin.com/q2KcUZBJ](http://pastebin.com/q2KcUZBJ)

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
require_once 'excel_reader2.php';
$data = new Spreadsheet_Excel_Reader("sample.xls");
$con = mysql_connect("localhost","root","root");
mysql_select_db("databaseName", $con);
$a=array("1"=>($data->val(1,'A')),"2"=>($data->val(1,'B')),"3"=>($data->val(1,'C')),"4"=> ($data->val(1,'D')),"5"=>($data->val(1,'E')),"6"=>($data->val(1,'F')),"7"=>($data->val(1,'G')));

$import="INSERT INTO tablename (col1, col2, col3, col4, col5, col6,col7) VALUES ($a[1],$a[2],$a[3],$a[4],$a[5],$a[6],$a[7])";
mysql_query($import) or die("mysql_error()");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:49:17.423

因为必须在 SQL 插入语句中引用字符（字符串）值。

更新到可以使用准备好的语句的 MySQLi 或 PDO 将解决此问题，并消除对已弃用 MySQL 接口的依赖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:12:45.583

检查数据库排序规则是否为 UTF-8。

# c - 为内联汇编参数打开立即值传播的特定 GCC 标志是什么？

> ID：11518097
> 
> 赞同：4
> 
> 时间：2012-07-17T07:45:26.203
> 
> 标签：c, gcc, compiler-optimization, inline-assembly, compiler-options

考虑以下 x86 代码示例：

```
#include <stdlib.h>

static int i;

static inline __attribute__((always_inline)) test(int x)
{
    asm volatile("mov %1, %0" : "=r"(i): "i"(x));
}

int main(void)
{
    test(5);

    return i;
} 
```

如果我用以下方式构建它：

```
gcc -O test.c 
```

它构建良好。

如果我用（没有优化）构建它：

```
gcc test.c 
```

它在组装阶段失败，因为该值`'5'`没有作为立即值传播到内联函数测试，所以我们没有通过约束。

我希望能够在不打开其他无关优化的情况下编译此代码，以使调试更容易。

从理论上讲，`-O`这只是一次启用大量 GCC 优化选项的捷径，这些选项记录在[精美的 GCC 手册](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)中。不幸的是，我找不到打开此行为的特定 GCC 标志。

有任何想法吗？

**澄清**：为了消除任何疑问，代码片段只是一个示例。除了展示我正在尝试做的事情之外，它本身并没有多大意义。实际用例涉及自定义处理器上的指令，该指令只能将立即数作为参数，我试图将其包装在 C 构造中。宏确实可以解决问题，但会遇到宏的所有常见缺点，因此我试图避免它。

**更新**：对于那些想知道的人，宏也不起作用。看来内联函数在这里根本不起作用。例如，这也不起作用：

```
void foo (void)
{
  int i = 6;

  asm volatile ("" : : "i" (i));
} 
```

我还修复了问题标题以反映这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:01:09.330

看起来 `-ftree-ter` （替换 SSA-> 正常通行证中的临时表达式 - 无论是什么）都可以解决问题：

```
gcc -ftree-ter test.c   # no errors 
```

这是我确定的方法：

1.  `gcc -Q --help=optimizers`告诉您默认启用/禁用哪些优化（某些已启用）
2.  `gcc -O -Q --help=optimizers`告诉您启用/禁用哪些优化`-O`
3.  将这些命令的输出重定向到文件并区分它们。
4.  尝试仅在`-O`指定时启用的优化，直到一个工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:05:59.087

`always_inline`是一个奇怪的属性，非常特定于 GCC，并且可能特定于 GCC 版本（因此详细行为可能与 GCC 4.5 和 GCC 4.7 不同）。

GCC 通过运行大量优化通道来工作（即使在`-O0`其中一些通道​​正在运行，否则不会发出任何代码）。通常，GCC`-O1`编译运行 200 次优化传递。

使用`gcc-4.7`您的代码甚至不编译`-O0`：

```
alw.c: In function ‘main’:
alw.c:7:5: warning: asm operand 1 probably doesn’t match constraints [enabled by default]
alw.c:7:5: error: impossible constraint in ‘asm’ 
```

要了解更多 GCC 正在做什么，您可以运行它，`gcc -fdump-tree-all`您将获得大多数 GCC 通道的所谓“转储文件”（通过通道转换的一些内部表示的文本表示）。请注意，您将获得数百个此类转储文件（遗憾的是，转储文件名称中的数字并不重要）。

我不明白你为什么要这样做。我建议要么让你`test`成为一个宏，要么总是优化（最近的 GCC 很好地处理了`-g`和`-O1`）。

一种可能的替代方法是使用**插件**扩展 GCC ，或者更好的是[MELT](http://gcc-melt.org/) **扩展**（MELT 是扩展 GCC 的高级域特定语言，作为 GPLv3 许可的 GCC 插件实现）。然后你可以让你的`test`函数成为你自己的 GCC[内置](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)函数，因为**GCC 可以扩展为添加内置函数和 pragma**。然后，您的扩展程序将安装您的特定内置插件并插入一些特定的通行证以适当地处理它们。（这意味着需要几天的工作，即使您非常了解 GCC 内部结构）。请注意，内置函数通常用于连接额外的[目标](http://gcc.gnu.org/onlinedocs/gcc/Target-Builtins.html)处理器特定指令（就像您的用例一样）。

最近的 GCC（特别是 4.6 和 4.7）接受插件（如果它们已经配置了`--enable-plugins`）。检查`gcc -v`您的特定 GCC 是否接受插件。一些发行版不喜欢 GCC 插件的想法（例如 Suse 和可能是 Redhat），因此不包含接受插件的 GCC。

[如果您的特定 Linux 发行版（最近的发行版）尚不支持 GCC 插件，我建议您打开一个错误报告以请求在 GCC 中启用插件。如果您的 GCC 交叉编译器供应商不支持插件，我还建议您查询该功能，该功能在 FSF GNU Gcc 中已经存在好几年了，例如从 4.5 开始！]

在 Debian 或 Ubuntu 上，我建议安装`gcc-4.6-plugin-dev`or`gcc-4.7-plugin-dev`包。然后，您将能够构建和使用[MELT](http://gcc-melt.org/)插件（我正在努力尽快发布适用于 GCC 4.6 和 4.7 的 MELT 0.9.6，即 2012 年 7 月）。

带有 GCC 4.6 或 4.7 的最新发行版（Debian、Ubuntu、Mandriva、ArchLinux 等）具有可通过插件扩展的 GCC。MELT 就是这样一个插件（它是一个*元*插件，因为`melt.so`它自己在做一些事情`dlopen`）。一旦你有一个 GCC 接受插件并安装了一些插件（例如 MELT），使用它只是运行`gcc -fplugin=melt`一些其他插件特定选项（例如用于 MELT`-fplugin-arg-melt-mode=`*的 your-melt-mode ）。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T08:09:50.440

可能您只是在滥用`"i"`约束。如果您不进行优化，编译器将无法“知道”这将是一个立即结束。

我认为你应该让 gcc 来决定可以优化多少。我只是`"g"`用作约束而不是`"i"`. 我很确定，当您使用优化进行编译时，一切都会立即解决。但是你最好检查一下生产出来的汇编器来确定。

# java - 连接数据库时出现连接错误

> ID：11518100
> 
> 赞同：3
> 
> 时间：2012-07-17T07:45:37.150
> 
> 标签：java, mysql, database-connection

> **可能的重复：**
> [JDBC 的 Stumped SQL 异常](https://stackoverflow.com/questions/4742927/stumped-sql-exception-for-jdbc)

我正在使用 Linux 服务器。但是当我在 mysql 服务器中建立连接时，我得到了这种类型的异常。

```
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '??????????????' at line 1
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1027)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3361)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3295)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1852)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1975)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2470)
at com.mysql.jdbc.ConnectionImpl.configureClientCharacterSet(ConnectionImpl.java:1669)
at com.mysql.jdbc.ConnectionImpl.initializePropsFromServer(ConnectionImpl.java:3336)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:1979)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:718)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:287)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:283)
at java.sql.DriverManager.getConnection(libgcj.so.10)
at java.sql.DriverManager.getConnection(libgcj.so.10)
at testthread.ConnectionFactory.getConnection(ConnectionFactory.java:28)
at testthread.ConnectionFactory.main(ConnectionFactory.java:39) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:55:23.020

您的 Java 版本或字符集配置有问题，如：[Stumped SQL Exception for JDBC](https://stackoverflow.com/questions/4742927/stumped-sql-exception-for-jdbc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:01:14.173

您是否尝试将您的网址设置为`"jdbc:mysql//" + user + "@" + password + ":" + server + "/" + databasename`？

# java - 长时间的偶然 Young 垃圾收集暂停

> ID：11518102
> 
> 赞同：5
> 
> 时间：2012-07-17T07:45:55.430
> 
> 标签：java, garbage-collection, jvm, heap-memory

我们将 GC 调整为最小的“stop-the-world”暂停。Perm 和 Tenured 代表现良好。Young 大部分时间工作正常，停顿通常不超过 500 毫秒（注意 [Times: user=0.35 sys=0.02, real=0.06 secs]）：

```
{Heap before GC invocations=11603 (full 60):
 par new generation   total 3640320K, used 3325226K [0x0000000600000000, 0x00000006f6e00000, 0x00000006f6e00000)
  eden space 3235840K, 100% used [0x0000000600000000, 0x00000006c5800000, 0x00000006c5800000)
  from space 404480K,  22% used [0x00000006de300000, 0x00000006e3a4a898, 0x00000006f6e00000)
  to   space 404480K,   0% used [0x00000006c5800000, 0x00000006c5800000, 0x00000006de300000)
 concurrent mark-sweep generation total 4147200K, used 1000363K [0x00000006f6e00000, 0x00000007f4000000, 0x00000007f4000000)
 concurrent-mark-sweep perm gen total 196608K, used 133030K [0x00000007f4000000, 0x0000000800000000, 0x0000000800000000)
2012-07-16T14:36:05.641+0200: 427048.412: [GC 427048.412: [ParNew
Desired survivor size 207093760 bytes, new threshold 4 (max 4)
- age   1:    8688880 bytes,    8688880 total
- age   2:   12432832 bytes,   21121712 total
- age   3:   18200488 bytes,   39322200 total
- age   4:   20473336 bytes,   59795536 total
: 3325226K->75635K(3640320K), 0.0559610 secs] 4325590K->1092271K(7787520K), 0.0562630 secs] [Times: user=0.35 sys=0.02, real=0.06 secs] 
Heap after GC invocations=11604 (full 60):
 par new generation   total 3640320K, used 75635K [0x0000000600000000, 0x00000006f6e00000, 0x00000006f6e00000)
  eden space 3235840K,   0% used [0x0000000600000000, 0x0000000600000000, 0x00000006c5800000)
  from space 404480K,  18% used [0x00000006c5800000, 0x00000006ca1dcf40, 0x00000006de300000)
  to   space 404480K,   0% used [0x00000006de300000, 0x00000006de300000, 0x00000006f6e00000)
 concurrent mark-sweep generation total 4147200K, used 1016635K [0x00000006f6e00000, 0x00000007f4000000, 0x00000007f4000000)
 concurrent-mark-sweep perm gen total 196608K, used 133030K [0x00000007f4000000, 0x0000000800000000, 0x0000000800000000)
} 
```

但是，有时，通常一天一次，我们会得到非常长的 Young 垃圾收集时间（注意 [Times: user=0.41 sys=0.01, real=5.51 secs]）：

```
{Heap before GC invocations=7884 (full 37):
 par new generation   total 3640320K, used 3304448K [0x0000000600000000, 0x00000006f6e00000, 0x00000006f6e00000)
  eden space 3235840K, 100% used [0x0000000600000000, 0x00000006c5800000, 0x00000006c5800000)
  from space 404480K,  16% used [0x00000006c5800000, 0x00000006c9b00370, 0x00000006de300000)
  to   space 404480K,   0% used [0x00000006de300000, 0x00000006de300000, 0x00000006f6e00000)
 concurrent mark-sweep generation total 4147200K, used 1967225K [0x00000006f6e00000, 0x00000007f4000000, 0x00000007f4000000)
 concurrent-mark-sweep perm gen total 189100K, used 112825K [0x00000007f4000000, 0x00000007ff8ab000, 0x0000000800000000)
2012-07-15T01:23:25.474+0200: 293088.245: [GC 293093.636: [ParNew
Desired survivor size 207093760 bytes, new threshold 4 (max 4)
- age   1:   30210472 bytes,   30210472 total
- age   2:   11614600 bytes,   41825072 total
- age   3:    8591680 bytes,   50416752 total
- age   4:    7779600 bytes,   58196352 total
: 3304448K->73854K(3640320K), 0.1158280 secs] 5271674K->2046454K(7787520K), 0.1181990 secs] [Times: user=0.41 sys=0.01, real=5.51 secs] 
Heap after GC invocations=7885 (full 37):
 par new generation   total 3640320K, used 73854K [0x0000000600000000, 0x00000006f6e00000, 0x00000006f6e00000)
  eden space 3235840K,   0% used [0x0000000600000000, 0x0000000600000000, 0x00000006c5800000)
  from space 404480K,  18% used [0x00000006de300000, 0x00000006e2b1fb40, 0x00000006f6e00000)
  to   space 404480K,   0% used [0x00000006c5800000, 0x00000006c5800000, 0x00000006de300000)
 concurrent mark-sweep generation total 4147200K, used 1972599K [0x00000006f6e00000, 0x00000007f4000000, 0x00000007f4000000)
 concurrent-mark-sweep perm gen total 189100K, used 112825K [0x00000007f4000000, 0x00000007ff8ab000, 0x0000000800000000)
} 
```

以下是 jstat -gccause 的相关输出：

```
Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                 
   293083.2  16.96   0.00  96.26  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      No GC               
   293083.2  16.96   0.00  96.26  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      No GC               
   293084.2  16.96   0.00  97.69  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      No GC               
   293085.3  16.96   0.00  98.32  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      No GC               
   293086.3  16.96   0.00  99.32  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      No GC               
Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                 
   293087.3  16.96   0.00  99.55  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      No GC               
   293088.3  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293089.3  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293090.3  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293091.3  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293092.3  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293093.3  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293084.2  16.96   0.00 100.00  47.44  59.66   7884  772.326    74   10.893  783.219 unknown GCCause      Allocation Failure  
   293094.3   0.00  18.26   6.23  47.56  59.66   7885  772.442    74   10.893  783.334 unknown GCCause      No GC               
   293094.6   0.00  18.26   6.71  47.56  59.66   7885  772.442    74   10.893  783.334 unknown GCCause      No GC               
   293095.3   0.00  18.26   6.85  47.56  59.66   7885  772.442    74   10.893  783.334 unknown GCCause      No GC               
   293095.6   0.00  18.26   6.92  47.56  59.66   7885  772.442    74   10.893  783.334 unknown GCCause      No GC               
   293096.2   0.00  18.26   9.84  47.56  59.66   7885  772.442    74   10.893  783.334 unknown GCCause      No GC               
   293096.6   0.00  18.26  10.11  47.56  59.66   7885  772.442    74   10.893  783.334 unknown GCCause      No GC 
```

“分配失败”在其他地方也显示为 GC 原因，但始终作为单个条目。当它以这样的顺序出现时，它与长时间的 GC 暂停相关联。我查看了 Oracle JVM 源代码，“分配失败”看起来很自然：Young 空间不足，无法容纳新数据，是时候清理了。在暂停发生之前，我检查了系统中是否存在任何内存密集型、意外操作，但没有发现任何可疑之处。

请注意，Young Garbage Collection Time 在暂停期间不会增加太多。我的内存和 GC 设置如下（省略日志设置）：

```
-Xms6000m 
-Xmn2950m 
-Xmx6000m 
-XX:MaxPermSize=192m 
-XX:+UseConcMarkSweepGC 
-XX:+UseParNewGC 
-Dsun.rmi.dgc.client.gcInterval=9223372036854775807 
-Dsun.rmi.dgc.server.gcInterval=9223372036854775807
-XX:CMSInitiatingOccupancyFraction=50 
-XX:+CMSScavengeBeforeRemark 
-XX:+CMSClassUnloadingEnabled 
```

还使用 8000m 和 12000m 堆进行了测试。机器：

*   8核16GB内存
*   24 核，50GB 内存

所以我的基本问题是：为什么 ParNewGC 会偶然出现这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:32:20.253

在执行 GC 之前，它必须让每个线程都到达安全点（它不只是立即停止每个线程）。如果您有长时间运行的 JNI 调用或系统调用，则可能需要很长时间才能达到安全点。您在这种情况下看到的是长时间的停顿，即使集合本身的时间长度是正常的。

# php - 在 PHP 中从纯文本创建链接

> ID：11518112
> 
> 赞同：-1
> 
> 时间：2012-07-17T07:46:26.143
> 
> 标签：php

我有一个字符串，其中包含一些由 (,) 分隔的单词，如下所示

word1, word2,word3,word5, word5

我需要一个 php 函数，该函数将此字符串作为参数并将它们全部输出为由 (,) 分隔的链接，如下所示

```
<a href="?s=word1">word1</a>,<a href="?s=word2">word2</a>, <a href="?s=word3">word3</a>,<a href="?s=word4">word4</a>,<a href="?s=word5">word5</a> 
```

请有人帮我做到这一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:50:02.697

尝试这样的事情：

```
function makeLinks($input) {
   $arr = explode(',',$input);
   $output = "";
   foreach ($arr as $word) {
     $word = trim($word);
     $output .= '<a href="?s=' . $word . '">' . $word . '</a>,';
   }
    return substr($output, 0, -1); // remove the last ,
} 
```

这用于[`explode`](http://php.net/manual/en/function.explode.php)从字符串创建一个数组，然后循环该数组，使用[`trim`](http://php.net/manual/en/function.trim.php). 用于[`substr`](http://php.net/manual/en/function.substr.php)删除最后一个`,`并返回输出

[这里的工作示例](http://codepad.org/y9iEvyka)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:51:55.357

像这样的东西？

```
function makeString ($str) {
    $arr = explode(',',$str);
    $ret = '';
    foreach ($arr as $v) {
        $ret .= '<a href="?s='.trim($v).'">'.trim($v).'</a>,';
    }

    return substr($ret,0,strlen($ret)-1);
} 
```

（未经测试）

# android - Android：getDeviceId() 返回一个 IMEI，adb shell dumpsys iphonesubinfo 返回 Device ID=NULL

> ID：11518113
> 
> 赞同：1
> 
> 时间：2012-07-17T07:46:30.050
> 
> 标签：android, adb, imei

我的低成本中国平板电脑的不同结果。它不是电话，为什么 getDeviceId() 返回一个似乎是有效 IMEI 的号码？

```
C:\>adb shell dumpsys iphonesubinfo
Phone Subscriber Info:
  Phone Type = GSM
  Device ID = null 
```

但使用

```
TelephonyManager tManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String uid = tManager.getDeviceId(); 
```

uid = 35881700...（出于隐私考虑，我没有显示整个 IMEI 号码）

# ipad - 使用 Objective C 将文件从 iPad 应用程序上传到 SharePoint？

> ID：11518114
> 
> 赞同：0
> 
> 时间：2012-07-17T07:46:32.520
> 
> 标签：ipad, sharepoint, file-upload, base64, large-files

我有一个要求，用户可以通过同一个应用程序将应用程序中存在的文件上传到 SharePoint。

是否可以使用目标 C 上传文件？将（大）文件上传到 SharePoint 的方法应该是什么？

是否有任何 Apple API 或第三方库来上传文档？

**编辑：** 我尝试使用共享点的[http://schemas.microsoft.com/sharepoint/soap/CopyIntoItems](http://schemas.microsoft.com/sharepoint/soap/CopyIntoItems)方法。但它需要将base64 编码格式的文件嵌入到SOAP 请求的主体中。当我尝试将 30 MB 文件转换为 base64 编码字符串时，我的代码在设备上崩溃了？相同的代码在模拟器上执行得很好

是否有任何其他替代方法可以将文件（如文件流等）上传到共享点？我可能必须上传最大 500 MB 的文件？是否有更高效的库将 NSData 转换为大文件的 base64 编码字符串？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:14:45.813

您将希望使用[SharePoints Copy Web 服务来上传文件](http://msdn.microsoft.com/en-us/library/copy.copy%28v=office.12%29.aspx)。

[这里](http://www.oriolardevol.com/Article/Details/3/)和[这里](https://stackoverflow.com/questions/31868/upload-a-file-to-sharepoint-through-the-built-in-web-services)是一些如何使用 C# 执行此操作的示例，此处是如何使用[Objective c](https://stackoverflow.com/questions/7976329/sharepoint-copyintoitems-soap-message-in-objective-c)执行此操作的示例，这里是使用[来自 Objective C 的 SharePoint Web 服务的 NTLM 身份验证](http://www.robertkuzma.com/2011/07/making-a-post-in-objective-c-xcode-to-sharepoint-webservice-requiring-windows-ntlm-authenticaton-for-iphone-or-ipad/)的示例。

把这些放在一起对读者来说是一个练习；）

**编辑**- 最大文件大小。

文档库的默认最大文件大小为 50MB (2007/2010)，但可以增加到 2GB（[请参阅 MSDN](http://support.microsoft.com/kb/925083)） - 但是，如果使用大量非常大的文件，您将面临性能问题的风险。

# iphone - 任何人都可以通过发出soap请求来帮助我解析以数组格式返回的响应吗

> ID：11518119
> 
> 赞同：0
> 
> 时间：2012-07-17T07:46:50.320
> 
> 标签：iphone, objective-c, ios5

我有 Soap Web 服务，它以 json 格式返回数组中的数据 Web 服务的链接在[这里](http://catalog.gemcojewels.com/webservice/webservice.asmx?op=GetSuperCategory)，输出是

```
[{"SuperCatId":"1","SuperCategoryName":"Victorian Jewelry","SuperCatImage":"1fe97.jpg"},{"SuperCatId":"2","SuperCategoryName":"Fine Jewelry","SuperCatImage":"0cc4b.jpg"}] 
```

所以我的问题是我应该如何从这个 Web 服务获取数据，我应该使用 JSON 还是肥皂解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:57:43.367

是的，如果响应是 JSON，那么您需要通过 JSON 解析器进行解析。

好的教程可以在这里找到，

[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

* * *

**供参考**

soap 是客户端和 Web 服务相互通信的协议。肥皂消息基本上是一个 XML，要解析肥皂消息，您需要使用 GDataXML 或类似的东西。

一次，您从 SOAP 消息中提取 JSON 响应，然后您必须使用 JAONParser（以上给出的教程）。

如果您使用的 Web 服务暴露了 WSDL（假设它是 RMI 而不是 RESTFul），那么您可以使用在线工具（例如 sudzc）来创建客户端存根，它会为您完成所有解析代码。

# java - 使用移位运算符java检测字符串中的重复项

> ID：11518124
> 
> 赞同：3
> 
> 时间：2012-07-17T07:47:11.913
> 
> 标签：java, bit-shift, shift

我很难理解这个检测字符串重复的代码。

```
int checker = 0;
    for(char ch : seed.toCharArray()){
        int val = ch - 'a';
        System.out.println(val);
        if ((checker & (1 << val)) > 0){ 
            // duplicate found
            break;
        }
        checker |= (1 << val);
    } 
```

有人可以用一个例子解释我这是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:00:23.767

好的，比如说`ch = 'c'`：

```
int val = 'c' - 'a' = 2; //The char value for 'c' is two greater that that for 'a' 
```

然后评估`if`条件：

```
1 << 2 
```

意思是“将 1 向左移动两位”，这给了我们二进制 100 或十进制 4。

```
checker & 4 
```

表示检查器之间的“按位与”，即检查该特定位是否已设置。

如果该位被设置，我们就完成了，否则我们执行

```
c |= 4 
```

这意味着“c = c | 4”，它是逐位的，或者会将与“c”对应的位设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:53:56.447

似乎它`checker`用作位图：'a' 的位 0，'b' 的位 1 等。它检查字母是否已经设置`(checker & (1 << val)) > 0`，如果不是，则设置它`checker |= (1 << val)`

# jquery - 选中所有复选框 nextUntil

> ID：11518125
> 
> 赞同：3
> 
> 时间：2012-07-17T07:47:12.670
> 
> 标签：jquery, html

您好，我想做以下事情。

我有一个带有这样的复选框的列表：

```
<ul>
  <li class="omzet_first"><input type="checkbox" name="omzet" id="12" value="12" alt="Opbrengsten" checked="checked">Opbrengsten</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="13" value="13" alt="Netto Omzet">Netto Omzet</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="14" value="14" alt="Overige Opbrengsten">Overige Opbrengsten</li>
  <li class="omzet_first"><input type="checkbox" name="omzet" id="15" value="15" alt="Kosten van grond-en Hulpstoffen / Uitbesteed werk">Kosten van grond-en Hulpstoffen / U</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="16" value="16" alt="Inkoopprijs van de verkopen">Inkoopprijs van de verkopen</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="17" value="17" alt="Kosten uitbesteed werk">Kosten uitbesteed werk</li>
  <li class="omzet_first"><input type="checkbox" name="omzet" id="18" value="18" alt="Personeelskosten">Personeelskosten</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="19" value="19" alt="Lonen &amp; Salarissen">Lonen &amp; Salarissen</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="20" value="20" alt="Sociale lasen">Sociale lasen</li>
  <li class="omzet_second"><input type="checkbox" name="omzet" id="21" value="21" alt="Pensioen lasten">Pensioen lasten</li>
</ul> 
```

当检查带有OMZET_FIRST的LI中的复选框时，我想与类Omzet_second一起检查LI中的所有下一个复选框，直到下一个Li.omzet_first。

我试过这个，但没有奏效

```
$('.omzet_first input:checked').each(function() {
    $(this).nextUntil(".omzet_first", ".omzet_second input:checkbox").prop("checked", true);
}); 
```

有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T07:51:37.970

在您的事件处理程序中，`this`是复选框。您必须适当地导航 DOM 树（`.omzet_first`在寻找兄弟姐妹之前向上移动到其父级，然后向下移动）。另请注意，您也应该使用选择`.omzet_first`器`nextUntil`。

```
$('.omzet_first input:checked').each(function() {
    $(this).closest(".omzet_first")
           .nextUntil(".omzet_first")
           .find("input:checkbox")
           .prop("checked", true);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T07:57:07.700

您`.each()`选择的元素上的循环处理*代码运行时*`:checked`选中的任何复选框- 它不会响应用户单击框。

 *如果想法是响应用户的点击，您需要处理该事件：

```
$('.omzet_first input[type="checkbox"]').click(function() {
    $(this).parent().nextUntil(".omzet_first")
           .find('input[type="checkbox"]').prop("checked", this.checked);
}); 
```

解释该代码：当单击其中一个`omzet_first`复选框时找到其父级（li），然后选择所有父级的兄弟直到下一个`omzet_first`，然后在这些 lis 中找到子复选框并设置它们的`checked`属性。（如果 li 不是您要使用的输入的直接父级`$(this).closest(".omzet_first")`而不是`$(this).parent()`.）

演示：http: [//jsfiddle.net/498vw/](http://jsfiddle.net/498vw/)*

# sql - 使用 alter 添加具有特定定义的列

> ID：11518126
> 
> 赞同：0
> 
> 时间：2012-07-17T07:47:13.020
> 
> 标签：sql, oracle, alter

如何将列添加到具有给定定义的现有表中。例如，我有一个名为employee 的表，其列名为hire_date。现在使用alter 并且**仅**使用alter，我想添加一个名为tenure 的列，其中包含（hire_date 和2012 年7 月14 日）之间的差异。这是我试过的

```
alter table employee add(tenure numeric(10) where tenure=(select to_date(
'14-JULY-2012')-HIRE_DATE from employee)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:55:30.987

从 11g 开始，这应该可以工作：

```
ALTER TABLE employee 
 ADD tenure GENERATED ALWAYS 
   AS (TO_DATE('20120714','YYYYMMDD') - hire_date) VIRTUAL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:55:31.520

由于新列可以从现有列派生，因此我不会将其添加到表中。保持派生列一致是一项艰巨的工作，并且有更好的选择。

相反，您可以创建一个添加列的视图：

```
create view ViewName as
select  hire_date
,       hire_date - TO_DATE('20120714','YYYYMMDD') as DaysSinceJuly14th
,       ... other columns ...
from    employees 
```

或者您可以在任何选择语句中即时进行计算：

```
select  hire_date - TO_DATE('20120714','YYYYMMDD') as DaysSinceJuly14th
from    employees
where   name = 'Jones' 
```

# javascript - 在 JavaScript 中触发较少的重排 - 如何编辑克隆元素中的元素？

> ID：11518129
> 
> 赞同：2
> 
> 时间：2012-07-17T07:47:26.830
> 
> 标签：javascript, jquery, reflow

我有这个 HTML 结构：

```
 <p id="lorem">
      <span class="part" id="n01">L</span><span class="part" id="n02">o</span><span class="part" id="n03">r</span><span class="part" id="n04">e</span><span class="part" id="n05">m</span> <span class="part" id="n06">i</span><span class="part" id="n07">p</span><span class="part" id="n08">s</span><span class="part" id="n09">u</span><span class="part" id="n10">m</span>
    </p>

​&lt;h1>Click Me</h1>​​​​​​​​​​​​​​​​​ 
```

这个JavaScript代码：

```
​arrRed = ["#n01", "#n04", "#n05", "#n09"];​​​​​​​​​
arrBlue = ["#n02", "#n07", "#n08"];

$("h1").click(function(){

    $.each(arrRed, function( i, v ){
        $(v).addClass("red");
    });

    $.each(arrBlue, function( i, v ){
        $(v).addClass("blue");
    });
}) 
```

[http://jsfiddle.net/FF2Dr/](http://jsfiddle.net/FF2Dr/)

单击时`h1`，某些字母会变成某种颜色。问题在于性能，我触发了太多的回流/重绘。在另一个问题中，有人告诉我使用`parent.cloneNode(true)`and `parent.parentNode.replaceChild(clone, parent)`。所以我克隆了元素，改变了它们，但它们又回到了原位，只触发了一次回流。

所以我克隆了父元素：

```
var doc = document;
var lorem = doc.getElementById("lorem");
var clone = lorem.cloneNode(true) 
```

但是我现在必须如何进行？我必须以某种方式修改元素`clone`然后替换它们，但`$.each`再次使用来编辑它们似乎不是一个好主意。

[http://jsfiddle.net/FF2Dr/1/](http://jsfiddle.net/FF2Dr/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:05:58.640

试试这个：

```
$("h1").click(function(){
    var lorem = $("#lorem"),
        clone = lorem.clone(true);
    clone.children().filter(function() {
        return $.inArray('#' + this.id, arrRed) != -1;
    }).addClass("red").end().filter(function() {
        return $.inArray('#' + this.id, arrBlue) != -1;
    }).addClass("blue");
    lorem.replaceWith(clone);
}); 
```

[**小提琴**](http://jsfiddle.net/FF2Dr/8/)

创建一个[`clone`](http://api.jquery.com/clone/)，过滤这个新克隆元素的子元素两次以应用类，最后用新元素完全替换旧元素。

或者，如果您愿意，在遍历数组时使用[`find`](http://api.jquery.com/find/)而不是：[`filter`](http://api.jquery.com/filter/)

```
$("h1").click(function(){
    var lorem = $("#lorem"),
        clone = lorem.clone(true);
    $.each(arrRed, function(i, v) {
        clone.find(v).addClass("red");
    });
    $.each(arrBlue, function(i, v) {
        clone.find(v).addClass("blue");
    });
    lorem.replaceWith(clone);
}); 
```

[**小提琴**](http://jsfiddle.net/FF2Dr/9/)

# javascript - Titanium Android 本机模块 - 未找到 addEventListener

> ID：11518136
> 
> 赞同：0
> 
> 时间：2012-07-17T07:48:04.923
> 
> 标签：javascript, android, titanium, dom-events, titanium-mobile

我在做这个项目（一个可怕的项目，在交给我们之前有一个完整的程序超臭代码是其他社会生产的）。

我们有一个原生的 Android 模块，一个 Carousel。轮播的每个元素都可以被点击，从而触发相应的动作。

从逻辑上讲，我们只是在 Titanium 中的实例化模块上添加了一个 addEventListener，它在我们第一次启动应用程序时就可以完全工作。但是一旦我们退出并重新启动应用程序，我们就会得到一个错误`Object [Object Carousel] has no method addEventListener`。

我不明白为什么。如果它第一次工作，它应该工作第二次。是否存在某种错误的记忆？还是垃圾回收失败？这是我们在 Titanium 中用于处理此逻辑的代码：

```
function some_func() {
  CF_container = null;
  var my_module = require('com.xxxx.carousel');
  CF_container = my_module.createView();
  CF_container.addEventListener('IZ_itemClicked', function(data) {
    evts_CF_click(data.id);
  });
  return CF_container;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:08:54.080

我怀疑问题出在该代码上。当我在每行末尾没有分号的代码写得很糟糕时，我遇到了类似的问题。在我加载一个模块然后开始出现错误之前，这一切似乎都很好，*但只是有时*。我在 Titanium Studio 中打开了 JavaScript 验证（Preferences > Titanium Studio > Validation > JavaScript - Everything by JSLint and Android UTF-8 Verifier）并修复了所有 js 文件中的所有错误。一旦你在任何地方都得到了正确的语法，我怀疑问题就会消失。

# xcode - 每封邮件发送数据

> ID：11518139
> 
> 赞同：-1
> 
> 时间：2012-07-17T07:48:07.737
> 
> 标签：xcode, email, uitextfield, iboutlet, mail-sender

我正在开发一个应用程序，但我错过了一小部分。我准备了一个视图，以便您可以将数据插入 UITextField，然后我可以通过电子邮件发送此信息。我尝试了很多方法。

```
#import <UIKit/UIKit.h>
@interface RMAcpu : UIViewController <UITextFieldDelegate> 
@property  IBOutlet UITextField *prodotto;
@property  IBOutlet UITextField *seriale;
@property  IBOutlet UITextField *cfiva;
@property  IBOutlet UITextField *email;
@property  IBOutlet UITextField *problema;
- (IBAction)inviodati:(id)sender;
@end 
```

关于.m，我试过了，但没有发送信息。你能帮我通过电子邮件发送信息吗？

```
#import "RMAcpu.h"

@interface RMAcpu ()

@end

@implementation RMAcpu
@synthesize prodotto;
@synthesize seriale;
@synthesize cfiva;
@synthesize email;
@synthesize problema;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [self setProdotto:nil];
    [self setSeriale:nil];
    [self setCfiva:nil];
    [self setEmail:nil];
    [self setProblema:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)inviodati:(id)sender {
    NSString *stringaMail = [NSString stringWithFormat:@"mailto:cristian@prokoo.com", [[prodotto text] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding], [[seriale text] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding], [[cfiva text]  stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:stringaMail]];

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:04:33.843

除非您实现自己的 SMTP 客户端，否则您不能直接从您的应用程序发送电子邮件。遵循这种方法的当前项目是[skpsmtpmessage](http://code.google.com/p/skpsmtpmessage/)。

如果您不想以这种方式尝试，则需要使用框架中的[MFMailComposeViewController 。](https://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)`MessageUI`这将允许您创建电子邮件模板并预填充收件人、主题和邮件正文等字段，但用户必须手动点击发送按钮。

# c# - 列出字符串以绑定组合框

> ID：11518141
> 
> 赞同：0
> 
> 时间：2012-07-17T07:48:20.343
> 
> 标签：c#, wpf

为什么组合框项目为空，

```
 <ComboBox ItemsSource="{Binding Path=list}" ......> 
```

所以

```
public List<string> _list = new List<string>();

        public List<string> list
        {
            get
            {
                return _list;
            }
            set 
            {
                _list = value;
            }
        } 
```

并添加新项目

```
while (combodata.Read())
 {
   list.Add(combodata.GetString(0));
 } 
```

`INotifyPropertyChanged`我觉得还是需要用`DependencyProperty`但是不知道这个怎么用，请大家帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T07:51:20.623

A`List`在添加/删除项目时不提供通知。您需要使用一个集合类来实现`INotifyCollectionChanged`. 尝试`ObservableCollection`改用：

```
public ObservableCollection <string> _list = new ObservableCollection <string>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:55:11.710

在“while (combodata.Read())”之后使用 ObservableCollection<> 或引发 OnPropertyChanged("List")。

# cakephp - Cakephp：将已经保存在一个表中的数据保存到cakephp中的另一个表

> ID：11518147
> 
> 赞同：0
> 
> 时间：2012-07-17T07:49:12.773
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

嗨，伙计们，我正在寻求您的帮助。申请人申请名额，详细信息保存在申请人表中，默认状态为等待。管理员接受申请表，等待接受或拒绝。当学生被接受时，他的详细信息应自动保存到学生表中。申请者表和学生表有 26 个共同字段，国民 id 在两个表中是共同且唯一的，但它不是两个表中的主键。

a) 在这种情况下，是否可以批准学生申请并将他们的详细信息发布到学生详细信息？

b）我如何链接这两个表？是否可以使用不是 cakephp 主键的唯一键链接表？

c) 我如何将申请者详细信息中的详细信息转移到学生详细信息？

为了将申请人详细信息中的数据发布给学生，我已经在我的控制器中尝试过这个，但我遇到了致命错误。我只尝试了两个字段进行测试。

```
if($this->request->data['submit']=='Approve') {
    $this->ApplicantsDetail->StudentDetail->set(array(
        'reg_number' => $regnumber,
        'code'=>$code
    ));
} 
```

为了批准学生的申请，我使用了以下代码

```
if($this->request->data['submit']=='Approve') { 
    $code=$this->request->data['ApplicantsDetail']['code'];

    for($k=0;$k<sizeof($this->request->data['ApplicantsDetail']['id']);$k++){
        $id=$this->request->data['ApplicantsDetail']['id'];
        $newcode=$this->ApplicantsDetail->ProgrammeChoice->find('list', array(
            'fields'=>array('applicants_detail_id','choice','programme_code'),
            'conditions'=>array('ProgrammeChoice.programme_code'=>$code,'ProgrammeChoice.choice'=>1)
        ));
        $tau1 = array('ApplicantsDetail.statu_id' => '1');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:31:18.850

当管理员批准记录时，根据需要通过 id 或代码获取该记录的数据 -

```
$applicationData        = $this->ApplicantsDetail->findById($applicationId); 
```

或者

```
$applicationData        = $this->ApplicantsDetail->findByCode($applicationCode); 
```

然后按如下方式创建一个数组 -

```
$studentData['StudentDetail'] = $applicationData['ApplicantsDetail']; 
```

然后将记录保存在学生表中。

```
$this->StudentDetail->save($studentData); 
```

# python - 如何定义带有可选参数和参数解包的方法？

> ID：11518149
> 
> 赞同：2
> 
> 时间：2012-07-17T07:49:16.347
> 
> 标签：python, python-2.7, optional-parameters, iterable-unpacking

我有一个关于如何在 Python 中定义和调用带有可选参数和 *args 参数的方法的问题。例如，

```
def test_func(arg1, optional_arg=None, *args):
    ... 
```

我希望能够使用以下任一语句调用该方法：

```
test_func("foo", arg1, arg2, ..., optional_arg="bar")
...
test_func("foo", arg1, arg2, ...) 
# arg1, arg2 ... belongs to *args;
# optional_arg is unset (defaults to None) 
```

这有可能吗，还是在调用这样的方法时我总是必须将 optional_arg 设置为某些东西？即我只想在调用函数时专门编写 optional_arg=... 时设置 optional_arg 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T07:58:30.213

您应该为此使用[**kwargs](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)。

```
def test_func(arg1, *args, **kwargs):
    optional_arg = kwargs.get('optional_arg')
    ... 
```

唯一的限制是关键字参数 (optional_arg) 必须始终位于无关键字参数之后

```
>>> test_func("foo", optional_arg="bar", arg1, arg2, ...)
  File "<stdin>", line 1
SyntaxError: non-keyword arg after keyword arg
>>> test_func("foo", arg1, arg2, ..., optional_arg="bar")
...
>>> test_func("foo", arg1, arg2, ...)
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T07:52:20.050

不幸的是，位置参数迫使您为命名参数指定一个值，即使它具有默认值；你无法解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T07:56:13.983

在 Python 中，关键字参数必须在函数调用中最后出现，您不能`test_func`像在第一个示例中那样调用， optional_arg="bar" 必须在所有非关键字参数之后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T08:02:07.557

您可以尝试这种解决方法：

```
def test_func(arg1, *args,**optional_arg):
    print arg1 
    print args 
    if 'optional_arg' in optional_arg:
        print optional_arg['optional_arg'] 

test_func("foo", 'v','n',optional_arg="bar")

test_func("foo",'v','n') 
```

# iphone - NSInvalidArgumentException || 无法识别的选择器发送到实例

> ID：11518152
> 
> 赞同：1
> 
> 时间：2012-07-17T07:49:50.363
> 
> 标签：iphone, ios, xcode, invalidargumentexception

我有一个 tableView，我在一个单元格上创建了​​一个 Button。

```
UIButton *deleteGroupButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [deleteGroupButton setFrame:CGRectMake(218, 12, 40, 60)];
    [deleteGroupButton addTarget:self action:@selector(deleteGroupButtonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

当我单击按钮时，该消息出现异常：

> “由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[Group deleteGroup:]: unrecognized selector sent to instance 0x5a8afc0'”

这就是我的 deleteGroupButtonClicked 方法

```
- (void) deleteGroupButtonClicked: (id) sender {    

    Groups *tmpGroups = [[Group alloc] init];
    NSInteger tmp = appDelegate.selectedGroupId;
    [tmpGroups deleteGroup:tmp];
    [tmpGroups release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:55:11.657

你的 deleteGroupButtonClicked: 方法有些奇怪，

你有一个 class 的对象，`Groups`但你正在分配一个 class 的对象`Group`。我猜`Groups`是`Group`对象的集合。在这种情况下，`deleteGroup:`方法只存在于`Groups`类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:05:48.210

只需将您的 deleteGroupButtonClicked 方法替换为以下内容：

```
- (void) deleteGroupButtonClicked: (id) sender 
{    

Groups *tmpGroups = [[Groups alloc] init];
NSInteger tmp = appDelegate.selectedGroupId;
[tmpGroups deleteGroup:tmp];
[tmpGroups release];
} 
```

# android - Android - 使用 BitmapRegionDecoder 时的内存泄漏

> ID：11518154
> 
> 赞同：4
> 
> 时间：2012-07-17T07:49:58.753
> 
> 标签：android, memory-leaks, bitmap

我正在尝试编写一个小部件来显示 SDCARD 中的图像，并具有平移/缩放功能。在意识到大多数图像不能作为完全采样的位图放入内存后，我正在尝试一些更复杂的东西 - 我将拥有整个图像的下采样位图，以便快速平移和缩放，并进行高分辨率裁剪视口上可见的图像的一部分，将在后台计算并在完成后绘制在低分辨率上（单独的线程）。

经过一番搜索，我终于找到了可以为我加载一部分图像的伟大而强大的 BitmapRegionDecoder，在此过程中不会出现内存异常。

呜呼，对吧？

只是......在许多图像之间切换时 - 我发现 BitmapRegionDecoder 在调用 recycle() 后并没有真正释放它正在使用的内存......堆只会不断增长，直到我得到令人沮丧的结果 -记忆...

这是一个演示问题的小循环：

```
new AsyncTask<String, Integer, Void>() {
    BitmapRegionDecoder decoder;

    @Override
    protected Void doInBackground(String... params) {

        for (int i=0; i<30;i++){
            try {
                // get a decoder instance
                decoder = BitmapRegionDecoder.newInstance(params[0], false);

                // (I'm not even doing anything with it!)

                // recycle, null-it, g-collect it, just die already:
                decoder.recycle();
                decoder=null;
                System.gc();
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }

            //print the memory usage after each step:
            onProgressUpdate(i);
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);

        //just print the heap sizes
        Double allocated = Double.valueOf(Debug.getNativeHeapAllocatedSize())/Double.valueOf((1048576));
        Double available = Double.valueOf(Debug.getNativeHeapSize())/1048576.0;
        Double free = Double.valueOf(Debug.getNativeHeapFreeSize())/1048576.0;
        DecimalFormat df = new DecimalFormat();
        df.setMaximumFractionDigits(2);
        df.setMinimumFractionDigits(2);

        Log.d("MEM", Integer.toString(values[0]) + " - alloc " + df.format(allocated) + "MB of " + df.format(available) + "MB (" + df.format(free) + "MB free)");

    }

}.execute(SOME_LARGE_IMAGE_PATH); 
```

SOME_LARGE_IMAGE_PATH 是一个 3000x3000 PNG 文件（距离相机拍摄的图像不远）。

在带有 API-10 的模拟器上运行。

这是 LogCat，仅针对 MEM TAG 进行过滤：

```
 0 - alloc 11.44MB of 18.95MB (0.09MB free)
 1 - alloc 18.40MB of 25.98MB (0.10MB free)
 2 - alloc 25.38MB of 32.96MB (0.10MB free)
 3 - alloc 32.36MB of 39.94MB (0.10MB free)
 4 - alloc 39.35MB of 46.92MB (0.10MB free)
 5 - alloc 46.33MB of 53.90MB (0.10MB free)
 6 - alloc 53.31MB of 60.88MB (0.10MB free)
 7 - alloc 60.30MB of 67.87MB (0.10MB free)
 8 - alloc 67.28MB of 74.85MB (0.09MB free)
 9 - alloc 74.26MB of 81.83MB (0.09MB free)
 10 - alloc 81.24MB of 88.81MB (0.09MB free)
 11 - alloc 88.23MB of 95.79MB (0.09MB free)
 12 - alloc 95.21MB of 102.78MB (0.09MB free)
 13 - alloc 102.19MB of 109.76MB (0.09MB free)
 14 - alloc 109.17MB of 116.74MB (0.09MB free)
 15 - alloc 116.16MB of 123.72MB (0.09MB free)
 16 - alloc 123.14MB of 130.70MB (0.09MB free)
 17 - alloc 130.12MB of 137.69MB (0.09MB free)
 18 - alloc 137.11MB of 144.67MB (0.09MB free)
 19 - alloc 144.09MB of 151.65MB (0.09MB free)
 20 - alloc 151.07MB of 158.63MB (0.09MB free)
 21 - alloc 158.05MB of 165.61MB (0.10MB free)
 22 - alloc 165.04MB of 172.61MB (0.09MB free)
 23 - alloc 172.02MB of 179.59MB (0.09MB free)
 24 - alloc 179.00MB of 186.57MB (0.09MB free)
 25 - alloc 185.45MB of 193.55MB (0.16MB free)
 26 - alloc 192.44MB of 200.07MB (0.16MB free) 
```

然后它崩溃了......

和完整的 LogCat：

```
 0 - alloc 11.44MB of 18.95MB (0.09MB free)
 GC_EXPLICIT freed 37K, 51% free 2644K/5379K, external 2043K/2137K, paused 47ms
 1 - alloc 18.40MB of 25.98MB (0.10MB free)
 GC_EXPLICIT freed 41K, 51% free 2637K/5379K, external 2043K/2137K, paused 55ms
 2 - alloc 25.38MB of 32.96MB (0.10MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 46ms
 3 - alloc 32.36MB of 39.94MB (0.10MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 54ms
 4 - alloc 39.35MB of 46.92MB (0.10MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 48ms
 5 - alloc 46.33MB of 53.90MB (0.10MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 59ms
 6 - alloc 53.31MB of 60.88MB (0.10MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 47ms
 7 - alloc 60.30MB of 67.87MB (0.10MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 54ms
 8 - alloc 67.28MB of 74.85MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 66ms
 9 - alloc 74.26MB of 81.83MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 91ms
 10 - alloc 81.24MB of 88.81MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 75ms
 11 - alloc 88.23MB of 95.79MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 56ms
 12 - alloc 95.21MB of 102.78MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 46ms
 13 - alloc 102.19MB of 109.76MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 53ms
 14 - alloc 109.17MB of 116.74MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 57ms
 15 - alloc 116.16MB of 123.72MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 61ms
 16 - alloc 123.14MB of 130.70MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 47ms
 17 - alloc 130.12MB of 137.69MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 56ms
 18 - alloc 137.11MB of 144.67MB (0.09MB free)
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 56ms
 19 - alloc 144.09MB of 151.65MB (0.09MB free)
 Process com.android.settings (pid 166) has died.
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 58ms
 20 - alloc 151.07MB of 158.63MB (0.09MB free)
 Process com.android.deskclock (pid 262) has died.
 Process com.android.music (pid 204) has died.
 Process com.yakstudio.moody (pid 287) has died.
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 52ms
 21 - alloc 158.05MB of 165.61MB (0.10MB free)
 Process com.android.email (pid 275) has died.
 Process android.process.media (pid 231) has died.
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 55ms
 22 - alloc 165.04MB of 172.61MB (0.09MB free)
 Process com.android.defcontainer (pid 427) has died.
 Process com.svox.pico (pid 440) has died.
 Process com.android.quicksearchbox (pid 218) has died.
 Low Memory: No more background processes.
 purging 38K from font cache [5 entries]
 GC_EXPLICIT freed 125K, 51% free 2771K/5639K, external 2168K/2674K, paused 107ms
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 46ms
 23 - alloc 172.02MB of 179.59MB (0.09MB free)
 Process com.android.launcher (pid 150) has died.
 Low Memory: No more background processes.
 WIN DEATH: Window{40735be0 com.android.launcher/com.android.launcher2.Launcher paused=false}
 purging 6K from font cache [1 entries]
 GC_EXPLICIT freed 183K, 50% free 2925K/5767K, external 1625K/2137K, paused 113ms
 GC_EXPLICIT freed 33K, 51% free 2637K/5379K, external 2043K/2137K, paused 60ms
 24 - alloc 179.00MB of 186.57MB (0.09MB free)
 purging 67K from font cache [6 entries]
 GC_EXPLICIT freed 1K, 51% free 2669K/5379K, external 2043K/2137K, paused 83ms
 purging 141K from font cache [14 entries]
 GC_EXPLICIT freed 230K, 49% free 4217K/8263K, external 3125K/3903K, paused 190ms
 GC_EXPLICIT freed 69K, 52% free 2600K/5379K, external 1645K/2137K, paused 67ms
 25 - alloc 185.45MB of 193.55MB (0.16MB free)
 Process jp.co.omronsoft.openwnn (pid 124) has died.
 Scheduling restart of crashed service jp.co.omronsoft.openwnn/.OpenWnnJAJP in 5000ms
 Low Memory: No more background processes.
 Session failed to close due to remote exception
 android.os.DeadObjectException
    at android.os.BinderProxy.transact(Native Method)
    at com.android.internal.view.IInputMethodSession$Stub$Proxy.finishSession(IInputMethodSession.java:346)
    at com.android.server.InputMethodManagerService.finishSession(InputMethodManagerService.java:896)
    at com.android.server.InputMethodManagerService.clearCurMethodLocked(InputMethodManagerService.java:907)
    at com.android.server.InputMethodManagerService.onServiceDisconnected(InputMethodManagerService.java:924)
    at android.app.LoadedApk$ServiceDispatcher.doDeath(LoadedApk.java:1069)
    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1083)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at com.android.server.ServerThread.run(SystemServer.java:540)
 Session failed to close due to remote exception
 android.os.DeadObjectException
    at android.os.BinderProxy.transact(Native Method)
    at com.android.internal.view.IInputMethodSession$Stub$Proxy.finishSession(IInputMethodSession.java:346)
    at com.android.server.InputMethodManagerService.finishSession(InputMethodManagerService.java:896)
    at com.android.server.InputMethodManagerService.clearCurMethodLocked(InputMethodManagerService.java:911)
    at com.android.server.InputMethodManagerService.onServiceDisconnected(InputMethodManagerService.java:924)
    at android.app.LoadedApk$ServiceDispatcher.doDeath(LoadedApk.java:1069)
    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1083)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at com.android.server.ServerThread.run(SystemServer.java:540)
 Start proc jp.co.omronsoft.openwnn for service jp.co.omronsoft.openwnn/.OpenWnnJAJP: pid=723 uid=10004 gids={}
 GC_EXPLICIT freed 10K, 53% free 2538K/5379K, external 1625K/2137K, paused 201ms
 GC_EXPLICIT freed <1K, 53% free 2538K/5379K, external 1625K/2137K, paused 228ms
 GC_EXPLICIT freed <1K, 53% free 2538K/5379K, external 1625K/2137K, paused 158ms
 No JNI_OnLoad found in /system/lib/libwnndict.so 0x40515658, skipping init
 GC_CONCURRENT freed 1052K, 55% free 3079K/6727K, external 1625K/2137K, paused 9ms+8ms
 Ignoring onBind: cur seq=12, given seq=15
 GC_EXPLICIT freed 34K, 52% free 2600K/5379K, external 1645K/2137K, paused 92ms
 26 - alloc 192.44MB of 200.07MB (0.16MB free)
 Process jp.co.omronsoft.openwnn (pid 723) has died.
 Scheduling restart of crashed service jp.co.omronsoft.openwnn/.OpenWnnJAJP in 20000ms
 Low Memory: No more background processes.
 Session failed to close due to remote exception
 android.os.DeadObjectException
    at android.os.BinderProxy.transact(Native Method)
    at com.android.internal.view.IInputMethodSession$Stub$Proxy.finishSession(IInputMethodSession.java:346)
    at com.android.server.InputMethodManagerService.finishSession(InputMethodManagerService.java:896)
    at com.android.server.InputMethodManagerService.clearCurMethodLocked(InputMethodManagerService.java:907)
    at com.android.server.InputMethodManagerService.onServiceDisconnected(InputMethodManagerService.java:924)
    at android.app.LoadedApk$ServiceDispatcher.doDeath(LoadedApk.java:1069)
    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1083)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at com.android.server.ServerThread.run(SystemServer.java:540)
 Session failed to close due to remote exception
 android.os.DeadObjectException
    at android.os.BinderProxy.transact(Native Method)
    at com.android.internal.view.IInputMethodSession$Stub$Proxy.finishSession(IInputMethodSession.java:346)
    at com.android.server.InputMethodManagerService.finishSession(InputMethodManagerService.java:896)
    at com.android.server.InputMethodManagerService.clearCurMethodLocked(InputMethodManagerService.java:911)
    at com.android.server.InputMethodManagerService.onServiceDisconnected(InputMethodManagerService.java:924)
    at android.app.LoadedApk$ServiceDispatcher.doDeath(LoadedApk.java:1069)
    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1083)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at com.android.server.ServerThread.run(SystemServer.java:540)
 Process com.ykstudio.ykLibDemo (pid 626) has died.
 WIN DEATH: Window{4069b908 com.ykstudio.ykLibDemo/com.ykstudio.ykLibDemo.MainActivity paused=false}
 channel '406fd480 com.ykstudio.ykLibDemo/com.ykstudio.ykLibDemo.SuperImageViewActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
 channel '406fd480 com.ykstudio.ykLibDemo/com.ykstudio.ykLibDemo.SuperImageViewActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
 WIN DEATH: Window{406fd480 com.ykstudio.ykLibDemo/com.ykstudio.ykLibDemo.SuperImageViewActivity paused=false}
 Start proc com.ykstudio.ykLibDemo for activity com.ykstudio.ykLibDemo/.MainActivity: pid=734 uid=10035 gids={}
 Low Memory: No more background processes.
 Got RemoteException sending setActive(false) notification to pid 626 uid 10035
 Displayed com.ykstudio.ykLibDemo/.MainActivity: +1s306ms 
```

帮助！有什么想法吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:16:22.430

如果我正确理解文档，您可以重用 BitmapRegionDecoder 而无需在每次使用时重新实例化它。您是否尝试重复使用它？

我必须同意：每个人都写道，BitmapRegionDecoder 应该用于这种情况（显示大位图而不会遇到 OOM），但没有人确切知道如何正确使用它:(

# python - 在 IIS7 或 IIS7.5 上部署 Django

> ID：11518155
> 
> 赞同：3
> 
> 时间：2012-07-17T07:50:01.113
> 
> 标签：python, django, iis-7, django-forms, iis-7.5

我真的需要帮助或有关如何在 IIS7 上部署 Django 项目的分步指南我尝试了本[指南](http://www.bardiak.com/2010/12/installing-django-on-iis-7-using.html)但它没有用，我觉得缺少一些东西它给了我 500.0 错误

" HTTP 错误 500.0 - 内部服务器错误 由于发生内部服务器错误，无法显示页面。"

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:42:29.187

啊，本[指南](http://blog.wolfplusplus.com/?p=272)解释了一切。只需一步一步地进行，就可以了！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T22:13:55.483

可以在此处找到有关使用 Helicon Zoo 在 IIS 上运行 Django 的完整分步指南：[动物园概述](http://www.helicontech.com/articles/run-django-apps-on-iis/)，此处提供了更多详细信息[zoo details](http://www.helicontech.com/articles/running-django-on-windows-with-performance-tests/)

# android - 为什么 java.lang.RuntimeException：无法恢复活动。用我的 Android 应用程序的相机拍照后出错？

> ID：11518156
> 
> 赞同：0
> 
> 时间：2012-07-17T07:50:01.800
> 
> 标签：android, camera

当我在横向模式下捕获图像并尝试以纵向模式上传时，我的 android 应用程序显示强制关闭错误。错误如..

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { act=inline-data dat=file:///mnt/sdcard/Pictures/CameraSample/testphoto20120717_103942-899201574.jpg typ=image/jpeg (has extras) }} to activity {com.freedom.net/com.example.android.photobyintent.PhotoIntentActivity}: java.lang.NullPointerException 
```

在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2141)

```
public class PhotoIntentActivity extends MenuActivitySpecific {

private static final int ACTION_TAKE_PHOTO_B = 1;

private static final String BITMAP_STORAGE_KEY = "viewbitmap";
private static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY = "imageviewvisibility";
private ImageView mImageView;
private Bitmap mImageBitmap;
private Handler imageUploadhandler, databaseHandler;
DBAdapter db;
private Dialog dialog;
private String mCurrentPhotoPath;
private  Uri imageUri1=null;
private static final String JPEG_FILE_PREFIX = "testphoto";
private static final String JPEG_FILE_SUFFIX = ".jpg";
File afile;
private AlbumStorageDirFactory mAlbumStorageDirFactory = null;

/* Photo album for this application */
private String getAlbumName() {
    return getString(R.string.album_name);
}
@Override
public void onWindowFocusChanged(boolean hasFocusFlag) {
    super.onWindowFocusChanged(hasFocusFlag);       
    if (hasFocusFlag) {
        openOptionsMenu();
    }
}

private File getAlbumDir() {
    File storageDir = null;

    if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {

        storageDir = mAlbumStorageDirFactory.getAlbumStorageDir(getAlbumName());

        if (storageDir != null) {
            if (! storageDir.mkdirs()) {
                if (! storageDir.exists()){
                    Log.d("CameraSample", "failed to create directory");
                    return null;
                }
            }
        }

    } else {
        Log.v(getString(R.string.app_name), "External storage is not mounted READ/WRITE.");
    }

    return storageDir;
}

private File createImageFile() throws IOException {
    // Create an image file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = JPEG_FILE_PREFIX + timeStamp ;
    File albumF = getAlbumDir();
    File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX, albumF);
    return imageF;
}

private File setUpPhotoFile() throws IOException {

    File f = createImageFile();
    mCurrentPhotoPath = f.getAbsolutePath();

    return f;
}

private void setPic() {

    int targetW = mImageView.getWidth();
    int targetH = mImageView.getHeight();

    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    /* Figure out which way needs to be reduced less */
    int scaleFactor = 1;
    if ((targetW > 0) || (targetH > 0)) {
        scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
    }

    /* Set bitmap options to scale the image decode target */
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    /* Decode the JPEG file into a Bitmap */
    Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);

    Matrix matrix = new Matrix();
    matrix.postRotate(90);
    Bitmap rotated = Bitmap.createBitmap(bitmap, 0, 0, 
            bitmap.getWidth(), bitmap.getHeight(), 
                                  matrix, true);

    mImageView.setImageBitmap(rotated);

    mImageView.setVisibility(View.VISIBLE);

}

private void galleryAddPic() {
        Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
        afile = new File(mCurrentPhotoPath);
        String abcd=afile.toString();
        Uri contentUri = Uri.fromFile(afile);
        imageUri1 = Uri.parse(abcd);
        Uri uri2 = Uri.parse(new File(abcd).toString());
        Uri uri3 = Uri.fromFile(new File(abcd));
        Log.i("uri1, uri2, uri3 :", imageUri1+","+uri2+","+uri3+"");
        mediaScanIntent.setData(contentUri);
        this.sendBroadcast(mediaScanIntent);
}

private void dispatchTakePictureIntent(int actionCode) {

    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    switch(actionCode) {
    case ACTION_TAKE_PHOTO_B:
        File f = null;

        try {
            f = setUpPhotoFile();
            mCurrentPhotoPath = f.getAbsolutePath();
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
        } catch (IOException e) {
            e.printStackTrace();
            f = null;
            mCurrentPhotoPath = null;
        }
        break;

    default:
        break;          
    } // switch

    startActivityForResult(takePictureIntent, actionCode);
}

private void handleBigCameraPhoto() {

    if (mCurrentPhotoPath != null) {
        setPic();
        galleryAddPic();
        mCurrentPhotoPath = null;
    }

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cameracapturedimage);
    db = new DBAdapter(this);
    imageUploadhandler = new Handler();
    mImageView = (ImageView) findViewById(R.id.cameraImage);
    //mVideoView = (VideoView) findViewById(R.id.videoView1);
    mImageBitmap = null;
    //mVideoUri = null;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
        mAlbumStorageDirFactory = new FroyoAlbumDirFactory();
    } else {
        mAlbumStorageDirFactory = new BaseAlbumDirFactory();
    }

    dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menucapturedimage, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.backToHome:
        finish();
        return true;
    case R.id.save:
        upload();
        return true;
    case R.id.retakePicture:
        dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case ACTION_TAKE_PHOTO_B: {
        if (resultCode == RESULT_OK) {
            handleBigCameraPhoto();
        }
        if (resultCode == RESULT_CANCELED) {
            Intent intent = new Intent(PhotoIntentActivity.this, Home.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
            finish();
            startActivity(intent);
        }
        break;
    } // ACTION_TAKE_PHOTO_B

    } // switch
}

// Some lifecycle callbacks so that the image can survive orientation change
@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);

    outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );

    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);

    mImageView.setImageBitmap(mImageBitmap);
    mImageView.setVisibility(
            savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? 
                    ImageView.VISIBLE : ImageView.INVISIBLE
    );

}

public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
        packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
}

public void upload() {
    try {
        boolean check = Utility.isNetworkAvailable(PhotoIntentActivity.this);
        // boolean check1 =isOnline();
        if (check) {

            String newtime = Utility.getdate();
            String accesskey = Utility.MD5_Hash(Constants.email + newtime
                    + "moko");
            Constants.ACCESS_KEY = accesskey;
            Constants.proc_date = newtime;
            imageUploadhandler.postDelayed(runImageUpload, 500);
            dialog = ProgressDialog.show(PhotoIntentActivity.this, "",
                    "しばらくお待ちください", true);
            dialog.setCancelable(true);
        } else {

            databaseHandler.postDelayed(runDatabaseImageSave, 500);
            dialog = ProgressDialog.show(PhotoIntentActivity.this, "",
                    "しばらくお待ちください", true);
            dialog.setCancelable(true);

        }
    } catch (Exception e) {

        dialog.cancel();
        Toast.makeText(this, e + "", Toast.LENGTH_LONG).show();
    }
}

private final Runnable runImageUpload = new Runnable() {

    public void run() {

        Log.i("contentUri1", imageUri1+"");
        ResponseFromServer response = Utility.uploadFileAsImage(afile,
                PhotoIntentActivity.this);

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (response != null) {

            if (response.getStatus().equalsIgnoreCase("OK")) {
                    Toast.makeText(getApplicationContext(), "画像を保存しました。",
                        Toast.LENGTH_LONG).show();
                finish();
            }
        } else {
            new AlertDialog.Builder(PhotoIntentActivity.this)
                    .setTitle("エラー")
                    .setMessage("ファイル送信に失敗しました。")
                    .setPositiveButton("OK",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                }
                            }).show();
            return;

        }

    }
};

private final Runnable runDatabaseImageSave = new Runnable() {

    public void run() {

        try {
            InputStream iStream = getContentResolver().openInputStream(
                    imageUri1);

            byte[] inputData = iStream.toString().getBytes();
            db.open();
            String stringUri = imageUri1.toString();
            String userMail = Constants.email;
            Log.e("Email: ", userMail + "");
            boolean feedback = db.InsertImage(inputData, stringUri,
                    userMail, 1);

            db.close();

            if (dialog.isShowing()) {
                dialog.dismiss();
            }

            if (feedback) {
                Toast.makeText(PhotoIntentActivity.this, "画像を保存しました。",
                        Toast.LENGTH_LONG).show();
                finish();
            } else {
                new AlertDialog.Builder(PhotoIntentActivity.this)
                        .setTitle("エラー")
                        .setMessage("ファイル送信に失敗しました。")
                        .setPositiveButton("OK",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog,
                                            int which) {
                                        // TODO Auto-generated method stub
                                    }
                                }).show();
                return;

            }
        } catch (Exception e) {
            Log.e("Error to upload Image to database: ", e + "");
        }

    }
};

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:10:10.897

由于您指的是方向更改，从图片点击到图片上传，我认为您没有处理配置更改

```
<activity android:name=".YourActivityName"
          android:configChanges="orientation"/> 
```

只需在清单文件中添加以下内容，看看它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:19:12.060

日志消息的结尾指出了问题：`java.lang.NullPointerException`. 之后应该有一个堆栈跟踪。您`Activity`在处理回复时抛出异常`Intent`。我假设堆栈跟踪将显示错误`onActivityResult()`以及错误在哪里。

# apache-flex - 在 Flex 中，在 TxtBox 中输入的特殊字符应替换为空格

> ID：11518158
> 
> 赞同：0
> 
> 时间：2012-07-17T07:50:06.433
> 
> 标签：apache-flex, actionscript, textbox, keyboard-events, flex2

**要求：** 我希望它动态执行。我不希望用户看到输入到文本框中的特殊字符。用户应该只看到在特殊字符位置输入的空格，而不是特殊字符。有没有可能举办这样的活动。我尝试了很多方法，但无法实现。它非常具有挑战性，请有人帮助我

MXML 代码：

```
<mx:TextInput x="10" y="25" id="txtSearch" width="200" enter="btnSearch_Click();" keyDown="txtSearch_KeyUpHandler(event);"/> 
```

代码：

```
private function txtSearch_KeyUpHandler(event:KeyboardEvent):void {
    if(!((event.charCode >= 48 && event.charCode <= 57)||(event.charCode >= 65 && event.charCode <= 90)||(event.charCode >= 97 && event.charCode <= 112)))
    {
        //event.preventDefault();
        event.charCode = 32;
    }
} 
```

当我执行上面的代码时，它没有按预期执行。特殊字符正在 txtSearch 文本框中输入。我不确定这里出了什么问题。你能帮我么。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:08:11.100

上面的解决方法是

在 enter 函数循环输入的文本，和

搜索特殊字符并用空格[替换。](https://stackoverflow.com/questions/2831502/change-a-character-in-a-string-using-actionscript)

最好在输入单击时使用正则表达式。

# c++ - C++ 奇怪的崩溃与 msvcr90.dll!memcpy

> ID：11518159
> 
> 赞同：0
> 
> 时间：2012-07-17T07:50:10.997
> 
> 标签：c++, visual-c++, c++-cli, memcpy, msvcr90.dll

我正在使用第 3 方解码器 [即 DivX]，在我的应用程序中我得到

> “发生了‘System.AccessViolationException’类型的第一次机会异常”

当我查看堆栈跟踪时，似乎 msvcr90.dll 中的 memcpy 有错误

> msvcr90.dll!memcpy(unsigned char * dst=0x00000000, unsigned char * src=0x0ac766fe, unsigned long count=4294967248) 第 188 行 Asm

我无法在 Visual C++ 2008 中进一步追踪问题...是什么原因造成的，或者任何工具技术可以找到这个奇怪错误的根本原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:58:11.937

它看起来像一个指向未分配\取消分配内存的指针，并且计数接缝也很奇怪。您可以尝试使用 OllyDBG 或 WinDBG 对其进行调试\反编译并跟踪问题。

# android - 文件不在android中创建？

> ID：11518160
> 
> 赞同：1
> 
> 时间：2012-07-17T07:50:14.190
> 
> 标签：android, file, permissions

当我试图创建一个新文件时，我收到一条错误消息。

代码：

```
try 
{
    File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath());
    Runtime.getRuntime().exec("chmod 777 " + root.getAbsolutePath());
    File myFile = new File(root,"createNew.txt");
    myFile.createNewFile();
}
catch(Exception e)
{
    Toast.makeText(getBaseContext(), e.getMessage(),Toast.LENGTH_SHORT).show();
} 
```

错误信息：

```
java.io.IOException: open failed: EACCES (Permission denied) 
```

`/mnt/sdcard`权限为`d---------`

如何通过编程更改权限？如何解决。给我任何想法。

提前致谢。

注意这一点：

当我在命令提示符下使用此代码时，文件已成功创建，该代码为：

```
`chmod 777 /mnt/sdcard` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:55:16.983

使用它来创建文件：

```
FileOutputStream fos= new FileOutputStream(outputPath);
//fos.write(...);
fos.close(); 
```

正如Java Doc所说：

```
This method is not generally useful. For creating temporary files, use  
`createTempFile(String, String)` instead. For reading/writing files, use 
FileInputStream, FileOutputStream, or RandomAccessFile, all of which can create 
files. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:03:09.507

1-使用它来获取您的 sdk 目录：

```
Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

2-或者可能是你的文件路径有一些非法字符（如空格），在这种情况下你需要用合法的等号替换它们。例如空格用“\”。你可以看到这个页面：
[Runtime.getRuntime( ).exec()](https://stackoverflow.com/questions/2146727/runtime-getruntime-exec)
[http://www.coderanch.com/t/498450/java/java/exec-command-not-able-deal](http://www.coderanch.com/t/498450/java/java/exec-command-not-able-deal)
[Runtime.exec on 参数包含多个空格](https://stackoverflow.com/questions/6686592/runtime-exec-on-argument-containing-multiple-spaces)
[在Java中合并路径](https://stackoverflow.com/questions/412380/combine-paths-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:20:22.257

```
try {
    File filename = new File(Environment.getExternalStorageDirectory() +
                             "/yourfilename.txt");
    filename.createNewFile();
    FileWriter writer = new FileWriter(filename2); 
    writer.write("Your content");
    writer.flush(); 
    writer.close();
} catch (IOException e) {
    ...
} 
```

# php - 是否可以在 Rails 上执行或调用脚本 PHP？

> ID：11518162
> 
> 赞同：0
> 
> 时间：2012-07-17T07:50:22.533
> 
> 标签：php, ruby-on-rails, ruby-on-rails-3, view

我想使用 Access 分析器“TraceWatch”（[http://www.tracewatch.com/](http://www.tracewatch.com/)）
要使用它，我有 2 个选项。

1.  在视图中粘贴代码并调用 PHP
2.  在视图中粘贴代码并调用 JavaScript

人们很少关闭 JavaScript。
但我想选择第一个选项来使用 PHP，以防万一。

我试图粘贴这个 tomy rail 的views/layouts/application.html.erb。它呈现但似乎没有调用 PHP。因为它不会保留日志。为什么？有什么解决办法吗？

```
<head>
.
.
.

<?php
include_once $_SERVER[ 'DOCUMENT_ROOT' ].'/twatch/api/LogRequest.php';
twatchLogRequest();
?>

.
.
.
</head> 
```

# audio - 我如何使用 xuggler 捕获音频和视频？

> ID：11518164
> 
> 赞同：2
> 
> 时间：2012-07-17T07:50:40.917
> 
> 标签：audio, video, record, xuggler

使用 xuggler 在本地磁盘上捕获音频和视频的任何好的代码示例。或者使用 xuggler 我可以将 audio.flv 文件和 video.flv 文件合并到一个 audiovideo.flv 文件中。请有人帮助解决这个问题。谢谢

# python - 将 Python 字典的值写回文件

> ID：11518168
> 
> 赞同：1
> 
> 时间：2012-07-17T07:50:47.273
> 
> 标签：python, dictionary, replace

我将两个 XML 文件中的信息提取到两个字典中，因为我想比较这些文件并更改其中一个文件中的信息。

这些是我的字典：

源字典：

```
d_source={'123': 'description_1', '456': 'description_2'} 
```

目标词典：

```
d_target={'123': '\n', '456': 'description_2'} 
```

这是我的替换代码：

```
for i in d_source:
    for j in d_target:
        if d_target[j]=='\n':
            d_target[j]=d_source[i]
print (d_target) 
```

d_target 更新为

```
d_target = {'123': 'description_1', '456': 'description_2'} 
```

但是，我从中提取字典的原始文件保持不变。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:07:11.383

您的解决方案之一是：

假设您想将其打印为 json，如果您已经在使用 dicts 是有意义的。

```
import json 
output = json.dumps(d_target)

f = open("myfile", 'w')
f.write(output)
f.close() 
```

这将打印您的 dict 以将 myfile 作为 json 文件。

如果你想要它作为一个 xml 你可以使用 elementtree 模块。

然后你可以使用这样的东西：

```
from elementtree import ElementTree as ETree
ET = ETree
ET.xml_declaration = "true"
products = ET.Element("products")
properties = ET.Element("properties")
products.append(properties)
products.attrib["xmlns"] = "http://schema.example.com/product_data_1.0"
update = ET.Element("update")
delete = ET.Element("delete")
products.append(delete)
products.append(update) 
```

这只是一个示例，看看它是如何完成的，这将创建如下内容：

```
 <products xmlns="http://schema.example.com/product_data_1.0">
      <properties />
      <delete />
      <update />
 </products> 
```

并再次将此 xml 打印到文件中：

```
output = ET.tostring(products, "utf-8")
f = open("xml", 'w')
f.write(output)
f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:28:50.263

您的替换代码（在您的示例中）可以`.update()`由`dict`.

```
d_target.update(d_source) 
```

我不确定您要如何保留，`dict`但使用该`json`模块是一种选择。否则，如果您想要更新的 XML 文件，则必须查看修改节点中的属性，并编写“somelibraryhere”.tostring()（或类似）方法的结果。

# iphone - 如何在 iOS 中实现一个字符串过滤算法来反映“消息”中的联系人自动完成？

> ID：11518170
> 
> 赞同：4
> 
> 时间：2012-07-17T07:50:51.473
> 
> 标签：iphone, objective-c, ios, ipad, autocomplete

在 iOS 中，当您开始输入某人的姓名以发送新的 SMS/iMessage 等时，会弹出一个自动完成列表。

我正在尝试重新创建此搜索算法的工作方式，但它并不像您想象的那么简单。你可以在你的设备上试试看我的意思，但例如，如果我输入“Joh”或“Brow”，那么“John Brown”就会出现。但是输入“ohn”不会显示任何结果。更难的是，输入“Mr Green”将允许“Mr Evan Green”显示......在消息中自己尝试一下，这样可能更容易理解。

有没有一种简单的方法来实现这个自动完成算法？（我有一个包含名称的 NSString 数组，以及一个用于过滤它们的子字符串）。

如果没有简单的方法，你会怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:14:00.557

为此，您应该从您的字符串中创建一个[Trie 。](http://en.wikipedia.org/wiki/Trie)您还可以使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)（对 TRIE 的改进）或[后缀数组](http://en.wikipedia.org/wiki/Suffix_array)（基于后缀树的精简数据结构）。查看[此](http://rmandvikar.blogspot.in/2008/10/trie-examples.html)链接以了解使用 Trie 的算法。

查看这个[问题](https://stackoverflow.com/questions/2487576/trie-vs-suffix-tree-vs-suffix-array)，了解这些数据结构之间的区别。

后缀树的想法是找到输入字符串的每个后缀的路径，然后您可以使用树搜索来查找随机字符串是否非常快地匹配输入字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:06:50.403

将名字与姓氏分开。然后，检查任一字符串是否以输入的子字符串开头。这将为您提供第一个描述案例所需的行为。

第二种情况比较困难，实现和描述都比较困难。一种方法是用空格分解键入的字符，以便您拥有一个子字符串数组（“Mr”和“Green”）。然后，执行与之前相同的检查；检查数组中的每个以查看它是否与名字或姓氏的开头匹配。如果是，请将其添加到结果中。

# android - 如何在列表视图中设置单个文本视图的文本颜色而不是所有文本视图？

> ID：11518171
> 
> 赞同：1
> 
> 时间：2012-07-17T07:50:57.650
> 
> 标签：android, listview

我在自定义列表视图中有一个文本视图，我知道如何设置文本颜色，以便更改列表中的所有文本视图。但是现在，我只想让一个特定的视图改变颜色，比如列表视图中有 10 个项目，我只想改变第二个文本视图的颜色，其余的保持不变。任何想法？非常感谢大家的帮助~

```
public class CheckWinNoAdapter extends ArrayAdapter<String> {
private final Context context;
private String[] values;

public CheckWinNoAdapter(Context context, String[] values) {
    // TODO Auto-generated constructor stub
    super(context, R.layout.list_draw, values);
    this.context = context;
    this.values = values;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.list_draw, parent, false);
    TextView textView1 = (TextView) rowView.findViewById(R.id.chk_tv1);

    textView1.setText(values[position]);

} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T07:54:29.333

回收其`ListView`视图以避免*浪费*内存。因此，与其每次 `getView`调用时都膨胀一个新视图，不如将其分配给前一个参数`convertView`，然后重用它。例如，这`convertView`是您取消滚动的视图。因此，如果 TextView 推迟滚动与具有不同颜色的文本视图相同，则可能会在您执行 defaultcolor 的文本视图中看到“yourcolor”。所以这里每次getView都需要设置的称为文本颜色。

```
 @Override 
 public View getView(int position, View convertView, ViewGroup parent) {

    if (converView == null) {
          LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          converView  = inflater.inflate(R.layout.list_draw, parent, false);
    }

    TextView textView1 = (TextView) converView.findViewById(R.id.chk_tv1);

    int color = (position == YOUR_POSITION) ? yourcolor : defaultcolor;
    textView1.setTextColor(color);

    textView1.setText(values[position]);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T07:57:08.313

您可以将您的 getView 更改为这个。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.list_draw, parent, false);
    TextView textView1 = (TextView) rowView.findViewById(R.id.chk_tv1);

    if(position== 2){
        textView1.setColor(Color.White);//or whatever you like
    }
    textView1.setText(values[position]);

} 
```

}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T07:54:16.683

在获取视图中这样做：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View rowView = inflater.inflate(R.layout.list_draw, parent, false);
TextView textView1 = (TextView) rowView.findViewById(R.id.chk_tv1);

textView1.setText(values[position]);

if(Your Condition Goes Here){
textView.setTextColor(Color.RED); // Did you tried this???
}

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T07:59:50.700

而不是传递位置传递列表视图的整数值，您尝试将文本颜色设置为：

```
if (position == INT_VALUE)//where INT_VALUE=the position at which u want to setcolor of yours
   textView.setTextColor(color);//which color u want to set 
else
  textView.setTextColor(defaultcolor);//to remaining texts 
```

# javascript - 使用 JavaScript 读取自定义 HTML 元素在 IE 中不起作用

> ID：11518185
> 
> 赞同：6
> 
> 时间：2012-07-17T07:52:00.763
> 
> 标签：javascript, internet-explorer

我的 HTML 页面中有一些自定义元素。为了对其进行一些修改，我编写了一个 JavaScript。

它有一些自定义元素。这些元素是有意添加的。

样本来源：

```
<div>       
        <br />
     <a name="IDATLQHE"></a>
    <h2 class="subhead" xmlns="">
    <dev>
        <dd>
            <span>abcd</span>
        </dd>

        <rr>
            <span>
                    <a title="google" href="http://google.com">google.com</a>
            </span>
       </rr>                    
    </dev>
    </h2>       
</div> 
```

需要的输出：

我想用元素的内容替换`<a>`元素中的`<rr>` 元素内容`<dd>`。（元素和`<rr>`是自定义元素。）`<dd>``<dev>`

JavaScript 编写：

```
<script type="text/javascript">
 var devs = document.getElementsByTagName('dev');
for(var i = 0, len = devs.length; i < len; i++)
{
    var dev = devs[i],
        h2 = dev.getElementsByTagName('rr'),
        h3 = dev.getElementsByTagName('dd');
    if(h2.length === 1)
    {
        var aa= h2[0],
        aaa=aa.getElementsByTagName('a');
        if(h2.length === 1 && h3.length === 1)
        {
            aaa[0].innerHTML = h3[0].innerHTML;
            h3[0].innerHTML=null;
        }
    }
}
</script> 
```

该脚本在 Firefox 中运行良好，但在 IE 中无法正常运行。

编辑：

添加 HTML 元素并添加不同的类属性后。

```
<div>       
            <br />
         <a name="IDATLQHE"></a>
        <h2 class="subhead" xmlns="">
         <div class="dummy">
             <div class="dummyy">
                <span>abcd</span>
            </div>

            <div class="dummyyy">
                <span>
                        <a title="google" href="http://google.com">google.com</a>
                </span>
          </div>                
        </div>
        </h2>       
    </div> 
```

修改后的 Java 脚本：

```
 <script type="text/javascript">
    var divs = document.getElementsByClassName('dummy');
    for(var i = 0, len = divs.length; i < len; i++)
    {
        var div = divs[i],
        h2 = div.getElementsByClassName('dummyyy'),
        h3 = div.getElementsByClassName('dummyy');
        if(h2.length === 1)
        {
            var aa= h2[0],
            aaa=aa.getElementsByTagName('a');
            if(h2.length === 1 && h3.length === 1)
            {
                aaa[0].innerHTML = h3[0].innerHTML;
                h3[0].innerHTML=null;
            }
        }
    } 
```

我仍然面临同样的问题。它不适用于 IE（版本 8）。

任何人都可以建议进行更改以使其在 IE 和 Firefox 中都可以工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:30:44.553

当我昨晚玩电脑游戏时，我想出了可以解决你问题的想法。当我自己尝试时，我得到了这样的理论，即不会将无效的 html 标签创建为 html 对象，因此您无法使用 DOM 中的函数访问这些标签。因此，我将自定义标签（包括 dd 标签，尽管它是有效的 html 标签）更改为`div`标签，并添加了一个虚拟 css 类作为标识符。我所做的下一个更改是添加函数`getElementsByClass()`方法。因为`document.getElementsByClassName()`IE8 和更早版本不存在，所以我记得我找到了一个功能相同的函数 - 注意调用函数时的不同之处 -[那里](http://tobiasjung.net/storage/zeilenhoehe_aendern.html)。这些更改的结果如下：

```
 <script type="text/javascript">
    function test() 
    {
        var devs = getElementsByClass('dev');
        for(var i = 0, len = devs.length; i < len; i++)
        {
            var h2 = getElementsByClass('rr', devs[i]);
            var h3 = getElementsByClass('dd', devs[i]);
            if(h2.length === 1)
            {
                aaa=h2[0].getElementsByTagName('a');
                if(h2.length === 1 && h3.length === 1)
                {
                    aaa[0].innerHTML = h3[0].innerHTML;
                    h3[0].innerHTML = "";
                }
            }
        }
    }

    function getElementsByClass( searchClass, domNode, tagName) { 
        if (domNode == null) domNode = document;
        if (tagName == null) tagName = '*';
        var el = new Array();
        var tags = domNode.getElementsByTagName(tagName);
        var tcl = " "+searchClass+" ";
        for(i=0,j=0; i<tags.length; i++) { 
            var test = " " + tags[i].className + " ";
            if (test.indexOf(tcl) != -1) 
                el[j++] = tags[i];
        } 
        return el;
    }
    </script> 
```

而且似乎确实有效...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:03:59.703

我在 jsfiddle 上试过，这个版本在 FF 和 IE9 上给我同样的结果：http: [//jsfiddle.net/qWP2t/1/](http://jsfiddle.net/qWP2t/1/)

我不确定这是否是预期的行为，因为您没有明确指定 IE 中的脚本有什么问题。不过一般来说，我不会引入自定义元素，而是依赖 HTML（和 HTML5）指定的元素，并在需要时使用类名来添加更多语义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:05:01.723

用 HTML 元素替换`<rr>`和`<dev>`（可能用类属性）。

自定义 HTML 是无效的 HTML。垃圾进→垃圾出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:07:42.440

我想我已经发现你哪里出错了。

> 我的 HTML 页面中有一些自定义元素。

那里。那就是你出错的地方。

只是在开玩笑。我对自定义元素没有太多经验，但我知道 IE 不能很好地处理未知标签，例如 HTML5 中的新标签最初无法在 IE 中设置样式。

对于该问题，您可以通过在 JavaScript 中创建标记实例来解决它，然后再尝试对其进行样式设置。也许这也可以解决您的问题。因此，您的脚本顶部将如下所示：

```
<script type="text/javascript">
    document.createElement('dd');
    document.createElement('dev');
    document.createElement('rr');

    var devs = document.getElementsByTagName('dev'); 
```

（我实际上不知道这是否可行。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-10T20:42:12.667

IE（甚至包括 IE9）不识别自定义元素。是的，如果在您的场景中可行，则 document.createElement() 技巧有效。

有关 Microsoft 如何希望您执行此操作的数据，请查看以下内容：

[http://ajaxian.com/archives/adding-custom-tags-to-internet-explorer-the-official-way](http://ajaxian.com/archives/adding-custom-tags-to-internet-explorer-the-official-way)

# php - 如何将图像和文本存储在mysql数据库的同一字段中？

> ID：11518186
> 
> 赞同：-1
> 
> 时间：2012-07-17T07:52:01.870
> 
> 标签：php, sql, database, image

我需要将文本和图像存储在同一个字段中吗？如何使用 mysql 数据库在 php 中实现这一点？我过去曾使用 BLOB 来存储图像。我应该使用哪种数据类型来解决这个问题？

这将如何工作......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T07:57:17.000

首先要说的是，**不要那样做！** 数据库中的列应该是原子的，这意味着它们只保存一条信息。这是第一范式的基本规则。如果您尝试将多个数据项塞入一列，您将违反该规则，并且您将在以后经历一个充满伤害的世界。

理论上，您可以使用访问数据库的任何前端将数据序列化为字符串并将其存储（例如，在 php 中，您可以这样做`$dataToStore = serialize (array 'Some string', $someData);`）。然后，您将使用反序列化将图像数据和文本提取回单独的项目。

但是你为什么要这样做呢？这是您不需要做的额外工作，以使您的数据库设计不如预期的最佳。简单地将另一列添加到要存储数据的表中，一列用于文本，一列用于图像，这有什么问题？

如果您认为您的方法没有问题，那么请从受雇处理充满序列化数据的数据库的人那里获取它，它是。这是一个巨大的问题。这使得使用数据库几乎是不可能的。您必须将数据提取到您正在使用的脚本语言中并对其进行反序列化，然后才能对其进行任何操作。您不能使用 SQL 语句来查询序列化数据。

# regex - 用于从 Jenkins 中的复制工件插件中提取内部版本号的正则表达式

> ID：11518187
> 
> 赞同：0
> 
> 时间：2012-07-17T07:52:03.843
> 
> 标签：regex, jenkins, jenkins-plugins

我有一个 Jenkins 版本，它从另一个版本中复制了一个工件。

使用[描述设置器插件](https://wiki.jenkins-ci.org/display/JENKINS/Description+Setter+Plugin)，我想提取从中获取工件的内部版本号。

日志文件包含这一行：

`Copied 1 artifact from "Mybuild" build number 569`

我需要使用正则表达式来仅提取整数`569`（可以是任何 int）。也`1`可以是任何 int 并且`Mybuild`可以是任何字符串（但不能有空格，一个单词）。我可以假设这些词`Copied, artifact, from, build, number`是不变的并且总是出现

我试图匹配一个正则表达式，但没有运气。还尝试了一些正则表达式生成器网站，但也没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:54:26.947

你可能会使用

```
Copied (\d+) artifact from "([^"]+)" build number (\d+) 
```

然后使用第三组（或删除前两个捕获的标记周围的括号并使用组号 1）。

`\d`指任何十进制数字，`+`它的尾部是一个所谓的*量词*，它将尝试匹配前一个标记（在这种情况下为数字）至少一次并且尽可能频繁。`[^"]`是一个字符类，包含任何不是双引号的字符。通过这种方式，我们可以确保我们捕获了引号内的所有内容（这里不是绝对必要的，但要记住一个很好的模式）。其余的只是逐字匹配。

快速 PowerShell 测试：

```
PS> 'Copied 1 artifact from "Mybuild" build number 569' -match 'Copied (\d+) artifact from "([^"]+)" build number (\d+)'
True
PS> $Matches

Name                           Value
----                           -----
3                              569
2                              Mybuild
1                              1
0                              Copied 1 artifact from "Mybuild" build number 569 
```

# asp.net-mvc - 带有列表框的 mvc3 webgrid 过滤器

> ID：11518189
> 
> 赞同：0
> 
> 时间：2012-07-17T07:52:07.353
> 
> 标签：asp.net-mvc, listbox, webgrid

我有一个启用了排序和分页的 webgrid。我在同一个视图上还有一些下拉列表和列表框来过滤 webgrid 结果。

过滤器放置在带有 http get 方法的表单中。我在过滤器上应用了 jquery 来提交表单，所以每次当过滤器更改时，表单都会以所选值作为 url 中的查询字符串发回。在列表框中选择多个值时，生成的查询字符串如下所示

**类型=1&类型=3**

所以我创建了一个 int[] 类型来接受我的操作中的参数。但是，当我对 webgrid 进行排序或分页时，查询字符串被重写为

**类型=1,3&page=4** ,

在这种情况下，类型参数变为空，列表框将被取消选择并自动使用“输入验证错误”类进行修改。

我实际上更喜欢 webgrid 生成的查询字符串的样式

**类型=1,3**

所以我可以将它直接传递到我的查询中。但是，列表框似乎不喜欢这种查询字符串。有没有办法让列表框识别组合的查询字符串，或者我必须编写代码来处理查询字符串和选定的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:56:36.963

谢谢。我最终在定制的模型活页夹中完成了类似的工作

```
class MultiSelectionBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        string key = bindingContext.ModelName;
        ValueProviderResult val = bindingContext.ValueProvider.GetValue(key);
        if (val != null && !string.IsNullOrEmpty(val.AttemptedValue))
        {
            bindingContext.ModelState.SetModelValue(key, val);

            string incomingString = ((string[])val.RawValue)[0];
            if (incomingString.Contains(","))
            {
                var value = new ValueProviderResult(incomingString.Split(','), string.Empty, CultureInfo.InvariantCulture);
                bindingContext.ModelState.SetModelValue(key, value);
                return value.ConvertTo(typeof(int[]));
            }

            return val.ConvertTo(typeof(int[]));
        }

        return null;
    }
} 
```

并将其应用于论点

```
public ViewResult Index([ModelBinder(typeof(MultiSelectionBinder))] int[] type, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:34:04.883

看起来像 WebGrid 中的错误。

我会在您的操作开始时建议以下解决方法：

```
if(type == null && !string.IsNullOrWhiteSpace(Request.QueryString["type"]))
    type=Request.QueryString["type"].Split(','); 
```

# php - 使用 Joomla 增加索引页面

> ID：11518193
> 
> 赞同：0
> 
> 时间：2012-07-17T07:52:29.293
> 
> 标签：php, joomla, indexing

我使用 Joomla 来创建我的网站。

在前端用户可以看到网站的其余部分之前，我需要一个免责声明页面。

我使用免责声明信息创建了一个新的“index.php”页面，并带有指向该站点的链接 - 我将原始 php 文件重命名为“index1.php”

“Index.php”视图，但链接不想工作。我的代码似乎完全正确。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:11:18.360

您不能只`index.php`在 joomla 中重命名。它是您网站的入口点，它初始化/路由/运行您的 joomla 应用程序。因此，您应该修改您的`index.php`，以便它识别第一次访问并将用户重定向到正确的页面。

将您的条款页面命名为`first-time.php`并修改`index.php`如下：

```
<?php
if (!isset($_COOKIE['firsttime']))
{
    setcookie("firsttime", "no", /* EXPIRE */);
    header('Location: first-time.php');
    exit();
}
else
{
// Set flag that this is a parent file.
define('_JEXEC', 1);
define('DS', DIRECTORY_SEPARATOR);

if (file_exists(dirname(__FILE__) . '/defines.php')) {
    include_once dirname(__FILE__) . '/defines.php';
}

if (!defined('_JDEFINES')) {
    define('JPATH_BASE', dirname(__FILE__));
    require_once JPATH_BASE.'/includes/defines.php';
}

require_once JPATH_BASE.'/includes/framework.php';

// Mark afterLoad in the profiler.
JDEBUG ? $_PROFILER->mark('afterLoad') : null;

// Instantiate the application.
$app = JFactory::getApplication('site');

// Initialise the application.
$app->initialise();

// Mark afterIntialise in the profiler.
JDEBUG ? $_PROFILER->mark('afterInitialise') : null;

// Route the application.
$app->route();

// Mark afterRoute in the profiler.
JDEBUG ? $_PROFILER->mark('afterRoute') : null;

// Dispatch the application.
$app->dispatch();

// Mark afterDispatch in the profiler.
JDEBUG ? $_PROFILER->mark('afterDispatch') : null;

// Render the application.
$app->render();

// Mark afterRender in the profiler.
JDEBUG ? $_PROFILER->mark('afterRender') : null;
// Return the response.
echo $app;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:17:59.587

您是否考虑过将其创建为插件，而不是入侵您的网站并使应用更新成为问题？

作为替代方案，您是否查看过[Joomla！扩展目录](http://extensions.joomla.org/)？它有一个[用户管理部分](http://extensions.joomla.org/extensions/clients-a-communities/user-management)，在第一页我可以看到一个 Joomla！2.5 插件称为[服务条款](http://extensions.joomla.org/extensions/clients-a-communities/user-management/19899)，可能适合您的需求。

# c - 在头文件中定义变量 - C

> ID：11518204
> 
> 赞同：0
> 
> 时间：2012-07-17T07:53:24.053
> 
> 标签：c, header

假设我有其中包含三个源文件（**.c**），其中三个包含**“file.h”**，即在我编写的每个文件的开头`#include "file.h"` 。

我`file.h`自己写的`int num=4`。

我有一个一般的启动问题。当我写的时候`int num`，它编译了。

问题是什么？为什么非初始化案例有效？

（我正在使用 Eclispe）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:00:08.327

在 C 头文件中，编译器没有任何特殊语义，它们只是由预处理器内联扩展的文本。这意味着链接器将看到您的变量定义三次。为避免混淆，链接器不知道三个值中的哪一个是正确的。即使这次它们碰巧具有相同的值，链接器也是愚蠢的并且不知道这一点。

如果您只有“int num;”，这是一种特殊情况，变量被分配为公共而不是数据，并且链接器知道在最终链接阶段统一公共。一般来说，我会说使用公共资源是不好的形式，头文件应该只有“extern int foo;” 而变量本身仅在一个链接单元中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:01:02.963

您可以根据需要多次声明一个全局变量，但应该只在一个翻译单元中初始化一次。所以在`file.h`写

```
extern int num; 
```

在一些`file.c`写

```
int num = 4; 
```

确保只在一个 C 文件中包含最后一行；其他人将使用那一次出现的值。

# android - 将 TableRow 中 LinearLayout 的宽度设置为 MATCH_PARENT

> ID：11518205
> 
> 赞同：0
> 
> 时间：2012-07-17T07:53:34.320
> 
> 标签：android, tablerow, layout-inflater, android-tablelayout

我有一个`TableLayout`with `MATCH_PARENT`for`width`和通过代码我添加一个`TableRow`，膨胀 a `LinearLayout`，所有有`MATCH_PARENT`for `width`。如果我删除`LinearLayout`并直接将其添加`TextView`到`TableRow`它工作正常。但最后，`TableRow`具有`WRAP_CONTENT`宽度。我该怎么做？这是我的`TableLayout`xml：

```
 <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_marginBottom="7dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="7dp" >

    <TableLayout
                        android:id="@+id/tablaGremios"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/titulopantalla"
                        android:background="@color/blanco" >
                    </TableLayout>

                </RelativeLayout> 
```

这是`LinearLayout`充气：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_servicio"
    android:orientation="horizontal"
    android:weightSum="3" >

    <CheckBox
        android:id="@+id/cbGremioActivo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.01" />

    <View
        android:layout_width="1dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dp"
        android:background="#e3e3e3" />

    <TextView
        android:id="@+id/tvGremio"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.6"
        android:textSize="10sp" />

    <View
        android:layout_width="1dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dp"
        android:background="#e3e3e3" />

    <TextView
        android:id="@+id/tvComentario"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.4"
        android:textSize="10sp" />

</LinearLayout> 
```

和代码

```
// Creo una fila por día en el objeto
                final TableRow tbRowGremio = new TableRow(contexto);

                tbRowGremio.setLayoutParams(new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
                tbRowGremio.setId((numeroFila));
                LayoutInflater inflater = (LayoutInflater) contexto.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View lineaAPintar = inflater.inflate(R.layout.filalistagremios, null);
                lineaAPintar.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
                final CheckBox cbGremioActivo = (CheckBox) lineaAPintar.findViewById(R.id.cbGremioActivo);
                cbGremioActivo.setId(numeroFila);
                               TextView tvGremio = (TextView) lineaAPintar.findViewById(R.id.tvGremio);
                tvGremio.setText(gremioQueQuiereAnadir);
                TextView tvComentario = (TextView) lineaAPintar.findViewById(R.id.tvComentario);
                tvComentario.setText(etComentario.getText().toString());
                tbRowGremio.addView(lineaAPintar);
                tablaGremios.addView(tbRowGremio); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:06:21.477

尝试修改`LayoutParams`如下：

```
final TableRow tbRowGremio = new TableRow(contexto);
tbRowGremio.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
tbRowGremio.setId((numeroFila));
LayoutInflater inflater = (LayoutInflater) contexto.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View lineaAPintar = inflater.inflate(R.layout.filalistagremios, null);
lineaAPintar.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
final CheckBox cbGremioActivo = (CheckBox) lineaAPintar.findViewById(R.id.cbGremioActivo);
cbGremioActivo.setId(numeroFila);
TextView tvGremio = (TextView) lineaAPintar.findViewById(R.id.tvGremio);
tvGremio.setText(gremioQueQuiereAnadir);
TextView tvComentario = (TextView) lineaAPintar.findViewById(R.id.tvComentario);
tvComentario.setText(etComentario.getText().toString());
tbRowGremio.addView(lineaAPintar);
tablaGremios.addView(tbRowGremio); 
```

# c# - 为什么 MSDN 提到要覆盖 Finalize() 方法？

> ID：11518209
> 
> 赞同：3
> 
> 时间：2012-07-17T07:53:39.537
> 
> 标签：c#, msdn, finalize

自从我第一堂关于 C# 类的课程以来，我了解到不仅我不能`Finalize()`显式调用类的方法（它由垃圾收集器调用），而且我什至不允许在我的自定义类中实现它。
让我有点困惑的是，在[MSDN](http://msdn.microsoft.com/en-us/library/ddae83kx.aspx)中就像这里 -

`By default, the Object.Finalize method does nothing. If you want the garbage collector to perform cleanup operations on your object before it reclaims the object's memory, you must override this method in your class.`

我发现很多地方都暗示了别的东西。谁能澄清这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T07:56:34.700

在同一个 MSDN 页面中，您可以阅读：

> **您不能在 C#**或 C++ 编程语言中覆盖 Finalize 方法。**在 C# 中，使用析构函数语法**来实现 Finalize 方法。在 .NET Framework 2.0 版中，C++ 提供了自己的语法来实现 Finalize 方法，如 Visual C++ 中的析构函数和终结器中所述。在早期版本中，C++ 对 Finalize 方法使用析构函数语法，就像 C# 一样。

这意味着该`Finalize()`方法将被垃圾收集器调用，但它被析构函数的*友好语法隐藏了。*您将编写的`ClassName.~ClassName()`内容将被`ClassName.Finalize()`编译器重写。

**编辑**
为了明确这一点，这是在 C# 中实现终结器的实际语法：

```
class MyClass
{
    ~MyClass()
    {
    }
} 
```

通常你甚至不需要实现你的终结器方法（它甚至会损害性能），但你会实现[Dispose 模式](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)。

# c - C99 的定宽整数类型

> ID：11518212
> 
> 赞同：1
> 
> 时间：2012-07-17T07:54:09.433
> 
> 标签：c, int, long-integer, c99, fixed-width

未能在[这里](https://stackoverflow.com/questions/11381764/arm-cortex-m3-uint-fast32-t-vs-uint32-t)得到我的问题的详细答案。我想我会从不同的角度来解决它。

有人能够解释什么选择标准用于确定 C99 的固定宽度整数类型的基础类型：

```
[u]int_fast[n]_t
[u]int_least[n]_t
[u]int[n]_t 
```

对于给定的处理器，如果“long”和“int”大小相同（sizeof（int）== sizeof（long）），那么为什么要在“int”上使用“long”，反之亦然。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T01:50:39.430

作者的心血来潮`<stdint.h>`。

鉴于`int`和的大小相同（并假设它们具有相同的表示和其他特征），只要类型或类型满足标准的要求，`long`它们中的哪一个用于定义就无关紧要。`[u]int_{,_fast,_least}32_t`

好吧，这并不*完全*正确。在某些情况下它可以有所作为。 `int`和`long`，即使它们的大小相同，仍然是不同且不兼容的类型。例如，假设`int32_t`ed`typedef`为 as`int`或 as `long`，则以下程序：

```
#include <stdint.h>
#include <stddef.h>
int main(void) {
    int32_t *p32 = NULL;
    int  *ip = p32;
    long *lp = p32;
    return  0;
} 
```

违反约束并需要对 的声明*或*的声明进行诊断`ip` *，*`lp`具体取决于`int32_t`定义方式。但是无论如何你都应该避免编写这样的代码。

# jquery - Google Closure 事件委托 a'la jQuery live/on

> ID：11518215
> 
> 赞同：4
> 
> 时间：2012-07-17T07:54:23.937
> 
> 标签：jquery, events, closures, google-closure, delegation

我需要将事件委托给新创建的元素，我需要将处理程序附加到它们的创建事件。类似于：onCreate

我不想在创建后通过寻址将事件绑定到元素：jQuery：

```
$(element).click(function(){}); 
```

我更喜欢类似的东西

```
$.on('document','spawn', '.item', function(e) {
    if (e.target == this.target) {
        alert('element created: '+this);
    }
}); 
```

有没有办法在谷歌关闭中这样做？目标是将事件附加到创建而不是调用函数来附加它。

有人可以建议吗？我是闭包的新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T13:39:02.953

所以我们在 jQuery 中有类似的东西，但方法不同。这是示例：

```
$(document).on('spawn', '.item', function(e) {
    if (e.target == this.target) {
        alert('element created: '+this);
    }
}); 
```

因此，在 下`$(document)`，您可以拥有元素必须呈现的上下文并在其中`.on()`包含三个参数：

*   事件名称/类型
*   事件必须绑定的元素
*   必须在该特定事件上触发的操作。

# java - Glassfish 3.1 中找不到通用资源适配器 genericra.rar

> ID：11518221
> 
> 赞同：0
> 
> 时间：2012-07-17T07:54:40.557
> 
> 标签：java, glassfish, jms, activemq, generic-jms-ra

我已经开始在3.1 服务器中配置`ApacheMQ` `JMS`Provider 。`Glassfish`我按照[http://www.scribd.com/doc/24613711/GlassFish-Administration-Sample-Chapter中提到的步骤进行操作](http://www.scribd.com/doc/24613711/GlassFish-Administration-Sample-Chapter)

`asadmin`我可以使用该命令运行并创建资源适配器配置对象。下一步是部署`genericra.rar`应用内服务器。但我无法找到`genericra.rar`glassfish 服务器中命名的任何文件。

文档中给出的参考路径来自 lib/addon/resourceadapters.... 但我在 glassfish 中没有看到任何名称为 addon 的文件夹。

可能这很愚蠢，但我无法找到并继续。请帮助我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:36:51.843

我不得不手动下载 genericjms 资源适配器并部署它。希望对新手有所帮助...

# c# - LINQ 和 SQL 注入

> ID：11518222
> 
> 赞同：1
> 
> 时间：2012-07-17T07:54:48.373
> 
> 标签：c#, sql, linq

> **可能重复：**
> [使用 LINQ to SQL 是否有助于防止 SQL 注入](https://stackoverflow.com/questions/473173/will-using-linq-to-sql-help-prevent-sql-injection)

我正在使用 LINQ 访问 sql 数据库。下面的代码安全吗？

```
 var addRec = (from p in db.5544
                          where p.ID == newAddID
                          select p).Single();

            addRec.Address1 = comAddTxt1.Text;                                                                             //create address record
            addRec.Address2 = comAddTxt2.Text;
            addRec.Address3 = comAddTxt3.Text;
            addRec.Address4 = comAddTxt4.Text;
            addRec.PostCode = pstCdeTxt.Text;
            addRec.Town = twnTxt.Text;
            addRec.County = cntyTxt.Text;
            addRec.Country = cntComBox.SelectedItem.Text;

            db.SubmitChanges(); 
```

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T08:02:24.640

是的，它不会受到 SQL 注入攻击。

不，它可能对其他形式的攻击不安全，即：跨站点脚本等，如果相关的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:58:16.920

为了降低 XSS 攻击的风险，您应该在从 Web 应用程序的数据库中检索数据时对数据进行 HTMLEncode。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:00:05.653

我建议尝试调用存储过程并将值作为参数发送，以便它可以为您提供参数检查。例如，如果您将“@Address1”声明为 varchar(200)，则如果参数包含 sql 语句，则存储过程将不会执行。

您还可以通过将其与正则表达式进行比较来在时间之前检查字段，但这可能需要更多的努力，并且仍然不如使用存储过程那样安全。

# android - Sax 解析器在第一行停止

> ID：11518225
> 
> 赞同：0
> 
> 时间：2012-07-17T07:54:59.897
> 
> 标签：android, parsing, xml-parsing, sax

我正在开发一个 android 项目，但在解析 xml 文件（位于 res/raw 中）时遇到了一些困难。我用作解析器“Sax”，但我没有得到节点之间的整个文本，它在找到的第一个新行处停止。我已经尝试了几个技巧但徒劳无功，所以我寻求您的帮助，我希望尽快解决问题，因为我感到压力很大，我必须按时完成项目，非常感谢。我加入了我的源代码：[http ://www.ensak-entreprises.com/XMLParsing.rar](http://www.ensak-entreprises.com/XMLParsing.rar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:06:10.180

本页：[IBM Developer Library notes on XML parsing on Android 对 android 上](http://www.ibm.com/developerworks/opensource/library/x-android/)的 XML 解析有很好的解释和代码示例。我建议使用`XmlPullParser`android 提供的。

# localization - 谷歌自然搜索结果本地化

> ID：11518239
> 
> 赞同：4
> 
> 时间：2012-07-17T07:55:49.670
> 
> 标签：localization, seo

我正在管理一个为 9 种语言本地化的大型网站。

但是当你用谷歌搜索时，第一个结果总是带有英文描述的主页*xxx.com/* - 无论使用什么谷歌（例如*google.de*、*google.es*）站点。

我打算改变这种情况以提供专用的本地化链接 - 例如如果*谷歌。**使用了de*** ***-****第*一个结果应链接到*xxx.com/de/***并带有德语描述。**

 **苹果做到了：

![google.de 和 google.es 中的苹果](../Images/f1578754a741e9635e165ae488d25673.png)

那么，如何做到这一点呢？

我唯一的想法是在*robots.txt*中禁用主页*xxx.com/*，无论使用哪个*google.XX* ，它总是在结果中排​​在第一位。然后只使用*xxx.com/lang-tag*，也许 Google 会为当前语言显示适当的 lang-tag。但恐怕这不是一个好办法。

任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:12:48.610

您为每种语言/子文件夹创建一个单独的站点地图。然后，您可以将子文件夹指定为 Google 网站管理员工具中的站点。

如果你看看苹果，你会看到：

[http://www.apple.com/sitemap/](http://www.apple.com/sitemap/)

[http://www.apple.com/fr/sitemap/](http://www.apple.com/fr/sitemap/)

.. 等等。验证站点后，您可以在 GWT 中设置地理定位。如果您需要任何帮助，请告诉我。**

# opengl - FPS：发布模式版本低于调试

> ID：11518240
> 
> 赞同：0
> 
> 时间：2012-07-17T07:55:54.900
> 
> 标签：opengl, graphics, 3d

我用OpenGL、Qt、C++编写了一个3D模型显示程序。但是我发现了一些奇怪的东西。那就是Release模式版本的FPS（每秒帧数）低于调试模式版本。现在我发布他们的FPS：

左边是调试模式版本，右边是发布模式版本：

![在此处输入图像描述](../Images/ca88da03f7e8ba1eb895599b512b3d98.png) ![在此处输入图像描述](../Images/c188ac964ebfd67ed1de2fd07cc96e4e.png)

我用来计算 FPS 的函数是

```
void displayFPS()
{
    static float framesPerSecond    = 0.0f;       // This will store our fps
    static float lastTime   = 0.0f;       // This will hold the time from the last frame
    float currentTime = GetTickCount() * 0.001f;    
    ++framesPerSecond;
    if( currentTime - lastTime > 1.0f )
    {
        framesPerSecond/=currentTime - lastTime;
        char strFrameRate[256];
        lastTime = currentTime;
        sprintf_s(strFrameRate,256, "FPS : %f", framesPerSecond);
        cout << strFrameRate << endl;
        framesPerSecond = 0;
    }
} 
```

我想知道这是怎么发生的？发布模式不应该比调试模式快吗？有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:15:55.663

据此， *GetTickCount()*[的](http://blogs.msdn.com/b/oldnewthing/archive/2005/09/02/459952.aspx)准确性比毫秒差得多。甚至可能差到 55 毫秒！使用更可靠的方法来测量时间间隔，例如：

 *```
#include <windows.h>
#include <cstdint>

typedef std::int64_t int64;

// get duration of a single "clock" in microseconds
double
get_clock_duration()
{
  LARGE_INTEGER f;
  QueryPerformanceFrequency(&f);
  return 1000000.0 / double(f.QuadPart);
}

// get number of elapsed clocks from program start
int64
clocks()
{  
  LARGE_INTEGER t;
  QueryPerformanceCounter(&t);
  return t.QuadPart;
}

// convert a duration in clocks to a duration in milliseconds
double
milliseconds(int64 t)
{
  return get_clock_duration() * double(t) * 0.001;
} 
```*

# php - 如何从第 N 个子类调用超类构造函数

> ID：11518242
> 
> 赞同：1
> 
> 时间：2012-07-17T07:56:03.140
> 
> 标签：php, class, constructor, call, super

我想知道如何从第 N 个（第 2 个或第 3 个或任何）子类中调用超级父类的构造函数。

```
class a{
    public function __construct(){
        echo "<br>In constructor of class A <br>";
    }
}
class b extends a {
    public function __construct(){
        echo "<br>In constructor of class B <br>";
    }
}
class c extends b {
    public function __construct(){
        parent::__construct();
        echo "<br>In constructor of class C <br>";
    }       
}
$obj = new c; 
```

我需要在上面调用父构造函数的类 C 的构造函数中进行哪些更改。父:: __construct(); 指 B 类的构造函数，因为我需要从 C 类调用 A 类的构造函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:04:32.490

您无法使用引用调用`class a`的构造函数，因为没有为诸如.`class c``parent``parent::parent::etc`

* * *

另一方面：您所做的事情有点违背继承的目的。*c 类*不应该意识到它的基础实际上继承*了 a 类*。

如果*class b*想要运行*class a*的构造函数，它应该已经实现了 this，这就产生了这样一个事实，即如果*class c*想要调用*class a*的构造函数，它应该从*class a*继承，**而不是** *class b*。

* * *

### 嘿，我想生活在边缘 - 不要告诉我我不能做什么！

好吧，如果您真的想解决这个问题，您可以使用以下命令显式调用*class a*的构造函数：

```
class c extends b { 
  public function __construct(){
    a::__construct ();
  }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T07:58:37.733

您可以直接`a::__construct()`从inside 调用`c::__construct`，但这是一个坏主意。

## 不要做！

您觉得有必要这样做的事实表明，这个类层次结构很可能存在严重的潜在问题。为什么`c`要绕过`b`if的构造函数`b`被继承？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T01:02:14.580

除了同意其他人的观点，这通常是一种不好的做法，我还有另一种方法可以做到这一点。您可以使用反射来获取父级父级的类名：

```
$reflection = new \ReflectionClass($this);
$grandParent = $reflection->getParentClass()->getParentClass()->getName();
$grandParent::__construct(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:18:30.110

你应该**总是**在子类中调用父类的构造函数：

```
class a{
    public function __construct(){
        echo "<br>In constructor of class A <br>";
    }
}
class b extends a {
    public function __construct(){
        parent::__construct();
        echo "<br>In constructor of class B <br>";
    }
}
class c extends b {
    public function __construct(){
        parent::__construct();
        echo "<br>In constructor of class C <br>";
    }       
}
$obj = new c; 
```

这就是您实施 OOP 原则的方式。如果不知何故你需要类不调用父的构造函数 - 这个类应该是另一个层次结构的新基类，而不是某个树中的子类。更多关于构造函数：[http ://www.php.net/manual/en/language.oop5.decon.php](http://www.php.net/manual/en/language.oop5.decon.php)

# security - csrf 攻击和双重提交的 cookie

> ID：11518245
> 
> 赞同：14
> 
> 时间：2012-07-17T07:56:19.133
> 
> 标签：security, authentication, cookies, authorization, csrf

以下引用来自[http://www.codinghorror.com/blog/2008/10/preventing-csrf-and-xsrf-attacks.html](http://www.codinghorror.com/blog/2008/10/preventing-csrf-and-xsrf-attacks.html)

> 当用户访问一个站点时，该站点应该生成一个（加密性强的）伪随机值，并将其设置为用户机器上的 cookie。该站点应要求每个表单提交都包含此伪随机值作为表单值和 cookie 值。当一个 POST 请求被发送到站点时，只有当表单值和 cookie 值相同时，该请求才被认为是有效的。当攻击者代表用户提交表单时，他只能修改表单的值。根据同源策略，攻击者无法读取从服务器发送的任何数据或修改 cookie 值。这意味着虽然攻击者可以通过表单发送他想要的任何值，但他将无法修改或读取存储在 cookie 中的值。由于 cookie 值和表单值必须相同，

上述方法通过比较cookie和表单中的伪随机值来防止CSRF攻击。但是，为什么还需要将值与表单一起返回？我假设表单和 cookie 都具有它们返回到服务器的相同加密值。服务器通过解密该值来验证它。

因此，即使该值仅由 cookie 返回，服务器也可以对其进行解密并验证请求。用表单返回加密值的目的是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-04-14T08:02:43.100

好的，让我们将问题分解为原子问题以便更好地理解：

**这个 CSRF 是什么？**

这是一种 Web 应用程序漏洞。在最基本的层面上，CSRF 的原因是浏览器不知道如何区分用户是否故意执行操作（例如通过单击表单上的按钮或单击超链接等）或者是否用户在不知不觉中执行了该操作（例如，用户访问了某个域的页面，例如 bad.com，并且当用户已经登录到 good.com 时，bad.com 向 good.com/some_action 发送了请求）。

**那么CSRF的影响是什么**

现在让我们用 facebook.com 替换上面的 good.com。假设当用户登录 facebook.com 在他的墙上发表评论时，会发送一个 HTTP GET 请求，格式为
https://facebook.com/postComment?userId=Abhinav_123&comment= HiIAmAbhinav。

现在让我们假设用户在他仍然登录到 facebook.com 时访问了 bad.com 上的一个页面。现在 bad.com 属于攻击者，他在 bad.com 上编写了以下代码：

```
<img src="https: //facebook.com/postComment?userId=Abhinav_123&comment=I_AM_AN_IDIOT> 
```

现在，只要用户的浏览器在 bad.com 上加载此页面的内容，就会向 facebook.com 发送一个请求，如下所示：

https://facebook.com/postComment?userId=Abhinav_123&comment=I_AM_AN_IDIOT

因为浏览器会尝试渲染 img 标签。为此，它需要获取 src 中指定的资源，因此它会发送上述 HTTP GET 请求。因此，基本上攻击者实际上可以代表用户向 facebook.com 提交请求，而他实际上并不知道这一点。

**现在有什么可能阻止这种攻击？**

如果只有某种方法可以确定请求是否是用户故意提出的。因此，为了做到这一点，反 CSRF 令牌出现了。它只是一个随机的、唯一的字符串，由服务器（上面示例中的 facebook.com）生成并发送给用户并在用户的浏览器中设置为 cookie。现在，对于涉及某些敏感操作的每个请求（例如在上面的 facebook 示例中发布评论），浏览器也会将此随机字符串与请求一起发送，并且服务器在执行操作之前将验证随机字符串是否是它所拥有的是否发送到浏览器。

这个想法是攻击者不会知道这个随机字符串。因此，即使攻击者创建了一个如上所示的 img src，并且用户访问 bad.com，也不会执行（在我们上面的示例中发布评论）的操作，因为除了 URL 之外，要执行的操作，还需要一个额外的东西，就是攻击者没有的随机字符串。

**但是再次在 cookie 中设置这个随机字符串有一个巨大的缺陷**

由于 cookie 的设计方式和浏览器处理 cookie 的方式，在 cookie 中设置这个随机字符串（反 CSRF 令牌）将无法达到我们的目的。根据设计，客户端向服务器发出的每个请求都会自动将 cookie 发送到服务器（简而言之，为简单起见省略了详细信息。有关更多详细信息，请参阅：[RFC2965](https://www.ietf.org/rfc/rfc2965.txt)）

所以，在我们上面的例子中，攻击者并不真的需要知道随机字符串。发布评论操作仍将完成，因为一旦用户访问 bad.com 并加载发布评论 URL（如上所述），随机的反 CSRF 令牌（存在于 cookie 中）将自动伴随请求。

**那么解决方案是什么？**

服务器（facebook.com）不需要将反 CSRF 令牌放入 cookie 中，而是需要将其作为隐藏参数放入表单中，并在用户请求发表评论时制作此表单（持有反 CSRF 令牌）也应该张贴。

现在攻击者无法代表用户执行此敏感操作（除非他以某种方式发现了随机的反 CSRF 令牌本身）

**现在来到登录CSRF和双重提交cookie的问题**

很多时候，网站会通过部署某种形式的 anti_CSRF 令牌架构来保护自己免受 CSRF 攻击。但是很多时候网站并不关心保护他们的登录表单免受 CSRF 攻击。为什么 ？- 因为即使是登录表单也容易受到 CSRF 攻击，并且攻击者试图通过他的域 (bad.com) 向 good.com (facebook.com) 发送登录请求来利用它，用户仍然需要输入他的有效凭据登录 facebook.com。这些凭据仅适用于真正的用户而不是攻击者，因此攻击者无法构建成功的登录请求。

**那么这里攻击者的攻击机会是什么？**

攻击者可以使用 facebook.com 创建自己的帐户。他现在拥有一套自己的有效凭证。现在，他使用他的登录凭据和他的域 (bad.com) 构建了对 facebook.com 的登录请求。现在，当用户访问页面 bad.com 时，用户已登录到我的帐户。作为被攻击者，我稍后可以看到用户在帐户上执行的所有活动也可能泄露敏感信息（例如，如果用户选择发送新朋友请求，则发送朋友请求，发送给某人的消息，如果用户这样做，则再次发送登录我的帐户后。所有这些可能性都取决于用户是否确信他已经登录了这个自己的帐户，攻击者可以通过使他自己的 facebook 页面看起来与受害者尽可能接近来再次处理这个问题。

**那么现在有什么缓解技术呢？**

这是我们现在需要的双重提交cookie。

**这到底是什么意思**

> 双重提交 cookie 定义为在 cookie 和请求参数中发送一个随机值，服务器验证 cookie 值和请求值是否相等。

**它如何帮助减轻攻击？**

根据双cookie的实现原理，当匿名用户（未登录的用户）访问登录页面时，服务器会在用户的浏览器中设置一个带有一些随机字符串的cookie，并在请求参数中设置相同的（比如表单隐藏字段）。当用户提交登录请求时，这些东西会随请求一起提交——用户凭据、隐藏表单字段中的随机字符串和保存随机字符串的 cookie（当然会自动发送）。

现在攻击者将可以访问他自己的凭据、服务器在 cookie 中设置的随机字符串以及攻击者的隐藏表单字段。当攻击者将此精心制作的登录请求发送给用户（受害者），并且用户尝试发出此请求时，该用户仍未登录，并且到目前为止是服务器的匿名用户。因此，服务器将在用户浏览器上设置一个 cookie，该 cookie 具有不同的（与攻击者的）随机值。现在当用户通过攻击者制作的链接发出登录请求时，该请求将包含攻击者的凭据，隐藏表单字段中的攻击者随机字符串，但 cookie 中的用户随机字符串（来自用户的浏览器）。现在当这个请求到达服务器时，

所以这也是用表单返回加密值的原因。希望它清除了这个概念。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-17T08:50:14.843

Cookie 会随每个请求自动发送，无论该请求是由原始站点还是由第三方站点发起的。这就是为什么单独一个 cookie 是不够的，因为每个请求都会包含它。

但是通过在请求本身中也包含令牌，攻击站点无法再生成有效请求，因为它们无法获取用户的令牌。

# asp.net-mvc-3 - HttpPost 在 MVC3 中不起作用

> ID：11518250
> 
> 赞同：0
> 
> 时间：2012-07-17T07:56:40.597
> 
> 标签：asp.net-mvc-3

当我在 Controller 中使用以下代码时

```
[HttpPost]
public ActionResult Index(HttpPostedFileBase file)
{
    string path = Path.Combine(Server.MapPath("~/Images"), 
                               Path.GetFileName(file.FileName));
    file.SaveAs(path);

    ViewBag.Message = "File Uploaded Successfully";

    return View();
} 
```

当我运行应用程序时，出现以下错误

```
---Server Error in '/' Application.
---The resource cannot be found. 
```

当我删除`[HttpPost]`它时加载但文件未上传...

谁能帮我？.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:12:04.090

确保您正在创建如下表格，

```
@using (Html.BeginForm("Index", "Home", 
        FormMethod.Post,                
        new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file" />
    <input type="submit" value="OK" />
} 
```

# python - 使用 django 连接两个数据库表

> ID：11518252
> 
> 赞同：0
> 
> 时间：2012-07-17T07:56:44.660
> 
> 标签：python, database, django

我正在对设备的电压、电阻、频率等进行多次测量。我想为每个测量提供一个表格，以及一个包含设备序列号和布尔值的主表格（如果它已通过测试）。

我计划有类似这样的结构：

```
create table volt(serial char(20),v1 float(10),v2 float(10)....)
create table resistance(serial char(20),r1 float(10),r2 float(10)....)
create table device(serial char(20),freq boolean(),tx boolean....) 
```

我承认我对 django 没有很多经验，而且我不知道如何创建这样的模型。我尝试制作单独的类并使用foreignKey，但为此我必须先创建电阻和电压测量值。

也可以将测量值存储为逗号分隔的字符串，但我宁愿将其保存在适当的数据库中。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:06:46.983

您`Voltage`的 ,`Resistance`等模型应该有一个`ForeignKey`模型`Device`。

# data-mining - 如何使用 mahout 形成具有频繁项集的规则

> ID：11518254
> 
> 赞同：1
> 
> 时间：2012-07-17T07:56:57.170
> 
> 标签：data-mining, mahout

我在mahout中学习fpgrowth，我找到了出生频繁项集的功能，但是如何使用mahout与频繁项集形成规则？它还没有在 mahout 中实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:54:12.830

从频繁模式计算规则相当容易，并且可能不会从并行性和分布式中受益很多。毕竟，预计您从数据中获得的频繁模式数量要少得多。

因此，在 Mahout 之外执行此操作可能要快得多，具体取决于您拥有的频繁模式的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:36:37.893

Mahout 并非专门用于模式挖掘。

您可以查看 SPMF 软件：[http](http://www.philippe-fournier-viger.com/spmf/index.php) ://www.philippe-fournier-viger.com/spmf/index.php （我是作者）。

它拥有超过 45 种与频繁项集和关联规则挖掘相关的算法的 Java 源代码。

它包括一些经典算法的算法，如 FPGrowth。但它也提供了一些在其他数据挖掘工具中找不到的专用算法，例如挖掘稀有项集、可擦除项集、高效用项集、来自不确定数据的项集等。

例如，除了“经典”关联规则之外，您还可以尝试许多不同类型的关联规则，例如：封闭关联规则、关联规则的信息性和通用基础、顺序规则等。

它在 GPL 下获得许可，并且有一些最流行的算法的简单 GUI 界面，如果您有任何问题，您可以在论坛中发布，我会尽力回答您。

# javascript - javascript 没有被正确解释

> ID：11518255
> 
> 赞同：0
> 
> 时间：2012-07-17T07:56:59.670
> 
> 标签：javascript, jquery, asp.net

在某一时刻，我的代码可以正确编译——所有行等等——但是在不同的地方（我的意思是函数）的相同代码不能完全编译。

这是代码：

```
function updateEmployeeFunction() {

    updateFields.username = $("#usernameTxtInfo").val();
    updateFields.password = $("#passTxtInfo").val();
    updateFields.confPasswrord = $("#confPassTxtInfo").val();
    updateFields.firstName = $("#firstNameTxtInfo").val();
    updateFields.lastName = $("#lastNameTxtInfo").val();
    updateFields.email = $("#emailTxtInfo").val();
    updateFields.phone = $("#phoneTxtInfo").val();

    validateUsernameUpdate(updateFields.username);
    validateEmailUpdate(updateFields.email);
    validateFirstNameUpdate(updateFields.firstName);
    ValidatePhoneUpdate(updateFields.phone);
    validatePasswordUpdate(updateFields.password);
    validateConfirmPasswordUpdate(updateFields.password, updateFields.confPasswrord);

    if (updateFields.usernameCheckSuccess == true && updateFields.emailCheckSuccess == true &&
            updateFields.firstNameCheckSuccess == true && updateFields.phoneCheckSuccess == true &&
            updateFields.passwordCheckSuccess == true && updateFields.confPassCheckSuccess == true) {

        callUpdateUser();
    }
} 
```

这是更新用户的代码

```
function callUpdateUser() {
    $(".ajaxLoader").show();

    var URL = getUpdateUserUrl();
    $.ajax({
        type: "POST",
        url: URL,
        cache: false,
        processData: true,
        success: updateUserCallSuccess,
        error: ajaxError
    });
} 
```

`updateEmployeeFunction`单击更新按钮时调用该函数，并且所有这些验证函数都`updateFields.checks`分别更新。

我的代码正在做的是它验证得很好，但它没有进入真正更新所在的 if 部分，但是当我将调试器放在它上面时，它运行正确。

我在这里做错了什么，我必须单击两次更新按钮才能使其正常工作？

顺便说一句，我正在 asp.net 中创建一个页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:38:38.407

> 您是否使用 ajax 进行验证？我在想，当您到达更新时，验证可能尚未完成。通过埃拉德

这正是正在发生的事情，谢谢你的回复，

我将 if 延迟了 500 毫秒，现在，它完美地工作了......

# bash - 如何在bash脚本中单引号查找名称选项

> ID：11518256
> 
> 赞同：0
> 
> 时间：2012-07-17T07:57:05.517
> 
> 标签：bash

例如，当前目录有 2 个文件：1x 和 2x。我使用以下 bash 脚本来查找它们。但我什么也没得到：

```
#!/bin/bash

var=x
pattern=`printf "'%s'" "*${var}"`
echo $pattern
find -name $pattern 
```

我可以在 find 之前放置 eval 以使上述脚本正常工作。为什么这里需要 eval ？有没有办法在不使用 eval 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:00:02.363

你不需要单引号，你只需要禁止扩展。

```
var=x
pattern="*$var"
find -name "$pattern" 
```

# assembly - uboot中的死循环测试

> ID：11518263
> 
> 赞同：0
> 
> 时间：2012-07-17T07:57:41.780
> 
> 标签：assembly, arm, u-boot

```
.globl _start
_start: bl      dead_loop
        ldr     pc, _start
        ldr     pc, _undefined_instruction
        ldr     pc, _software_interrupt
        ldr     pc, _prefetch_abort
        ldr     pc, _data_abort
        ldr     pc, _not_used
        ldr     pc, _irq
        ldr     pc, _fiq

dead_loop:
        nop
        mov pc, lr 
```

我想做一个uboot死循环测试，但发现它跳出了假设的循环，我的代码有什么问题，它在start.S中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:25:51.907

现在无法测试是否缺少 ARM 交叉编译器，但您似乎只是缺少一个`=`. 利用

```
ldr pc, =_start 
```

如果您想要的是“立即跳转”。否则，汇编器会将上述内容视为等于，`ldr pc, [ pc, ... ]`这很可能不是您想要的。

`ADR`注意伪指令和`LDR`伪指令的区别；`adr pc, _start`在您的情况下，将与`ldr pc, =start`.

# transactions - 如果@@Trancount > 0 不起作用

> ID：11518267
> 
> 赞同：6
> 
> 时间：2012-07-17T07:58:04.907
> 
> 标签：transactions, rollback, sql-server-2012

我正在使用 SQL Server 2012，并编写了一个带有回滚事务的小型存储过程。我的程序如下：

```
ALTER PROCEDURE [dbo].[uspInsertEmployee] 
@EmpId int,
@EmployeeName varchar(50),
@DeptId int
AS
BEGIN
BEGIN TRY

insert into Departments values (@DeptId, 'Testing 1');
insert into Employees values (@EmpId, @EmployeeName, @DeptId);

END TRY
BEGIN CATCH

--log error here
Goto Error_Rollback
END CATCH

Error_Rollback:

IF @@TRANCOUNT > 0
BEGIN
    print 'rolling back transaction' /* <- this is never printed */
    ROLLBACK TRAN
END
END 
```

如您所见，在If条件下，当@@TRANCOUNT > 0时，我试图回滚事务，但是当我执行过程时，回滚语句永远不会执行，我已经调试了过程和@的值@TRANCOUNT 是 1。但我仍然不明白为什么它不起作用。而且我知道我们不需要使用 begin tran 和 end tran 进行回滚。

谁能帮我解决这个问题。

**编辑**

对不起，我忘了提到，第二个插入语句中出现错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:24:31.797

您已经启动了一个隐式事务。要回滚，您需要启动显式事务（BEGIN TRANSACTION）

```
ALTER PROCEDURE [dbo].[uspInsertEmployee] 
  @EmpId int,
  @EmployeeName varchar(50),
  @DeptId int
AS

BEGIN

BEGIN TRY
  BEGIN TRAN
  insert into Departments values (@DeptId, 'Testing 1');
  insert into Employees values (@EmpId, @EmployeeName, @DeptId);
  COMMIT TRAN
END TRY

BEGIN CATCH  
  --log error here
 Goto Error_Rollback
END CATCH

Error_Rollback:

  IF @@TRANCOUNT > 0
  BEGIN
    print 'rolling back transaction' /* <- this is never printed */
    ROLLBACK TRAN
  END

END 
```

# session - WebSession ClassCastException

> ID：11518273
> 
> 赞同：4
> 
> 时间：2012-07-17T07:58:32.627
> 
> 标签：session, wicket, classcastexception, wicket-1.5

我一直在尝试对 Wicket 的 WebSession 进行子类化，以便实现基本的身份验证系统。我已遵循 Wicket 参考库中的指南。当我在我的网页中尝试以下操作时，我得到一个 ClassCastException：

```
((AppSession)Session.get()).setUid() 
```

这是完整的错误：

```
java.lang.ClassCastException: org.apache.wicket.protocol.http.WebSession cannot be cast to com.example.webapp.AppSession 
```

我已经在网上搜索了几个小时，并尽我所能。我真的很感激一些帮助。另外，如果有更好的方法，请告诉我。我对检票口很陌生。

谢谢你。

**AppSession.java**

```
public final class AppSession extends WebSession {
    private Integer uid;

    public AppSession(Request request) {
        super(request);
    }

    public final Integer getUid() {
        return uid;
    }

    public final void setUid(Integer uid) {
        this.uid = uid;
    }

    public static AppSession get() {
        return (AppSession)Session.get();
    }
} 
```

**应用程序.java**

```
public class App extends WebApplication {
    public App() {
        super();
        new AnnotatedMountScanner().scanPackage("com.example.webapp").mount(this);
    }

    @Override
    public Session newSession(Request request, Response response) {
        return new AppSession(request);     
    }

    @Override
    public Class getHomePage() {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:13:02.667

我也有自己的会话课程，来自`WebSession`. 我做的一些事情和你不同。

添加`AppSession`方法：

```
/**
 * Gets the session for the calling thread.
 * @return
 *   The session for the calling thread.
 */
public static AppSession get()
{
  return (AppSession)Session.get();
} 
```

你可能想试试

```
AppSession ssnSession = AppSession.get();
ssnSession.setUid(...); 
```

而不是您的单线电话。

你检查过你的 (App)Session 类的包吗？

（我个人不`null`为你的回报`App.getHomePage()`。）

这有什么帮助吗？

# c# - 流畅的 nhibernate 多对多与以下多对多映射

> ID：11518279
> 
> 赞同：3
> 
> 时间：2012-07-17T07:59:26.570
> 
> 标签：c#, fluent-nhibernate, mapping, many-to-many

我有一个多对多的分层情况，我只是不知道如何明智地解决映射问题。

我有一个实体事件。这个事件可以有很多事件。一个事件只不过是一个值对象，所以我创建了一个运行良好的多对多映射。

现在是我无法弄清楚的一点......为事件选择的每个事件都可以有多个原因（这也是一个值对象）

下面是简化的数据模型（事件和原因都存储在 SystemValues 中，并以 Type 作为它们的鉴别值）： ![在此处输入图像描述](../Images/a626cf7d1ca7ab2b0240bfed82ca347e.png)

（表 IncidentEvent 中的 ID 是代理主键，以避免使用复合键的麻烦）

我的映射如下（简化）： 事件：

```
public class IncidentMap : ClassMap<Incident> {

    public IncidentMap() {
    Table("Incident");
    Id(x => x.ID).GeneratedBy.Identity();

        HasManyToMany(x => x.Event)
        .Table("IncidentEvent")
        .ParentKeyColumn("IncidentID")
        .ChildKeyColumn("EventID");
    }
} 
```

事件（从一般的“SystemValueMap”映射的子类）：

```
public class EventMap : SubclassMap<StoryWhere> {
    public EventMap() {
        DiscriminatorValue((int)SystemValue.Type.Event);
        HasManyToMany(x => x.Incident)
        .Table("IncidentEvent")
        .ParentKeyColumn("IncidentID")
        .ChildKeyColumn("EventID");

        HasManyToMany(x => x.Cause)
            .Table("IncidentEventCause")
            .ParentKeyColumn("IncidentEventID")
            .ChildKeyColumn("CauseID");
    }
} 
```

原因：

```
public class CauseMap : SubclassMap<Cause> { 
    public CauseMap() { DiscriminatorValue((int)SystemValue.Type.Cause); }
} 
```

如您所见，“事件”的映射是一团糟，当然它不起作用。插入完成后，当 NHibernate 尝试将 EventID 插入到表 IncidentEventCause 的列 IncidentEventID 中时，我会得到外键约束。我可能需要告诉 Nhibernate 如何改用 IncidentEventID。我需要让事件意识到它与事件的多对多关系以及它与原因的跟随关系，但恐怕我不知道如何。

希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:29:55.647

如果可能，您应该重构数据库架构并在 IncidentEventCause 表中将 IncidentEventId 与 EventId 交换。

您想要的映射并不容易。这是持久性泄漏到域中的解决方法。

```
public class IncidentMap : ClassMap<Incident>
{
    public IncidentMap()
    {
        Id(x => x.ID).GeneratedBy.Identity();

        HasManyToMany(x => x.Events)
            .Table("IncidentEvent")
            .ParentKeyColumn("IncidentID")
            .ChildKeyColumn("EventID")
            .ChildWhere("type=" + (int)SystemValue.Type.Event);
    }
}

public class Event
{
    private EventDetails Details { get; set; }
    public string Name { get { return Details.Name; } set { Details.Name = value; } }

}

class EventDetails : SystemValue
{
    public virtual string Name { get; set; }
}

public class EventMap : ClassMap<Event>
{
    public EventMap()
    {
        Table("IncidentEvent");

        Id(x => x.Id, "Id").GeneratedBy.Identity();

        References(x => x.Incident, "IncidentID");
        References(Reveal.Member<Event>("Details"), "EventID").Not.LazyLoad();

        HasManyToMany(x => x.Causes)
            .Table("IncidentEventCause")
            .ParentKeyColumn("IncidentEventID")
            .ChildKeyColumn("CauseID");
    }
}

public class EventDetailsMap : SubclassMap<EventDetails>
{
    public EventDetailsMap()
    {
        DiscriminatorValue((int)SystemValue.Type.Event);
        Map(x => x.Name);
    }
}

public class CauseMap : SubclassMap<Cause>
{
    public CauseMap()
    {
        DiscriminatorValue((int)SystemValue.Type.Cause);
        Map(x => x.Name);
    }
} 
```

# ruby-on-rails - 处理 imagemagick 函数不适用于 Dragonfly::Processor

> ID：11518280
> 
> 赞同：1
> 
> 时间：2012-07-17T07:59:28.037
> 
> 标签：ruby-on-rails, ruby, imagemagick, rmagick, dragonfly-gem

在我的用户模型中，我想在上传时调整图像大小。我将图像存储在亚马逊 s3 上。一切都很好，图像显示、上传、删除等，直到我尝试在块中添加`after_assign`方法。`image_accessor`

**这是错误：**

```
None of the functions registered with Dragonfly::Processor were able to deal with the 
method call thumb 
```

我已经按照在线教程进行操作，并仔细检查了所有内容。我认为这是 imagemagick 或 rmagick 的错误，但在重新安装后我不知所措。我的路径`$ which convert`是 /opt/local/bin/convert ，我很确定该路径显示出来是好的。

关于如何让流程正常工作的任何建议？我在 Snow Leopard、Ruby 1.9.3 和 Rails 3.2.5 上运行

* * *

以供参考：

这是我的用户模型：

```
class User < ActiveRecord::Base

    image_accessor :avatar do
      storage_path{ |file| "#{self.id}/avatar/#{rand(1000)}.#{file.format}" }
      after_assign{ |a| a.thumb!('300x300#') }
    end

  ...

  attr_accessible :name, :location, :avatar, :retained_avatar,
    # Used by Devise
    :email, :password, :password_confirmation, :remember_me, :confirmed_at

  validates_size_of      :avatar, maximum: 5.megabytes, allow_nil: true
  validates_property :format, of: :avatar, 
    in: [ :jpg, :png, :gif ], case_sensitive: false, allow_nil: true, 
    message: "Only .jpg, .png and .gif file formats are supported."

end 
```

这是我的蜻蜓初始化程序

```
require 'dragonfly'

app = Dragonfly[:images]

app.configure_with(:imagemagick)
app.configure_with(:rails)

app.datastore = Dragonfly::DataStorage::S3DataStore.new

app.datastore.configure do |c|
  c.bucket_name = ENV['S3_BUCKET']
  c.access_key_id = ENV['S3_KEY']
  c.secret_access_key = ENV['S3_SECRET']
  c.url_scheme = 'https' 
end

app.define_macro(ActiveRecord::Base, :image_accessor) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:20:42.747

如果您的文件被调用`:photo`，那么它`after_assign`应该是`after_assign { |a| self.photo = a.thumb('300x300#) }`

# iphone - 黑屏，addSubView:moviePlayerController

> ID：11518281
> 
> 赞同：-1
> 
> 时间：2012-07-17T07:59:31.490
> 
> 标签：iphone, ios, mpmovieplayercontroller, movieplayer, nsdocumentdirectory

所以我有一个`UITableView`, 它读取`NSDocumentDirectory`并在这个表中显示（在一个数组中）它的内容。

当您触摸一个单元格时，比如说**“21 Jump Street.mp4”**（这是一个电影预告片应用程序），它应该会为您播放文档文件夹中名为**“21 Jump Street.mp4”的预告片。**

但是当我播放电影时，我得到的只是黑屏。如果您点击屏幕，您会看到状态栏出现，然后在您点击时一遍又一遍地消失。这是我在“ `didSelectRowAtIndexPath`”中的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil];
NSString *movieLocal = [fileList objectAtIndex:indexPath.row];
NSURL *fileURL = [NSURL fileURLWithPath:movieLocal isDirectory:NO];
NSLog(@"%@", fileURL);
moviePlayer3 =  [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
moviePlayer3.controlStyle = MPMovieControlStyleDefault;
moviePlayer3.shouldAutoplay = YES;
[self.view addSubview:moviePlayer3.view];
[moviePlayer3 setFullscreen:YES animated:YES]; 
```

当我**NSLog fileURL**时，它显示的是：

```
21%20Jump%20Street.mp4 -- file://localhost/ 
```

任何帮助都会很棒。万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:20:00.407

您是否检查了其他文件以查看该文件是否已损坏或编码格式不受支持？

# excel - 使用 Excel VBA 修复协议

> ID：11518282
> 
> 赞同：4
> 
> 时间：2012-07-17T07:59:35.390
> 
> 标签：excel, dde, fix-protocol, vba

我已经在 Excel VBA 中创建了代码，它通过 dde ​​链接收集数据并根据一些规则执行它们。很快，此 Excel VBA 代码将向我发送有关购买或出售我正在跟踪的股票的消息。

现在，我想通过使用修复协议来执行这些消息。是否可以使用 Excel VBA 创建一个连接到 Web 服务并允许您执行来自 Excel VBA 的操作的修复协议引擎？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:13:30.370

从 Excel 发送 FIX 消息有多种选择。

首先，从头开始编写 FIX 引擎并非易事。对于初学者来说，规范（尤其是早期版本，例如 4.2）相当模糊，很多细节只能从实践经验中了解。因此，您最好从现成的解决方案开始。

你有几个选择：

1) 从 Excel 调用 FIX 引擎的远程 API。您可以在此处找到各种商业引擎：http: [//fixprotocol.org/products/1](http://fixprotocol.org/products/1) - 有些提供带有产品 SDK 的 excel 插件。

2) 将 QuickFIX.NET 嵌入到您的 VBA 代码中。有关代码示例，请参见[http://www.quickfixengine.org/](http://www.quickfixengine.org/)（主题太大，无法在该答案中发布）。

3) 购买 FIX for Excel 插件。有几个。我不能推荐一个（出于各种原因）。同样，您可以在 FIX Protocol Ltd 网站上搜索一些起点： http: [//fixprotocol.org/products/2](http://fixprotocol.org/products/2)

还有一点注意事项：

当我对此进行编码时，Excel 的线程模型不允许异步更新单元格。因此，当我向远程 FIX 服务器发送命令时，响应消息（交易）是异步接收的。收到回复后，我尝试更新 Excel。如果我在更新到达时同时编辑单元格，Excel 进程会严重崩溃。

克服这一问题的一种解决方案是使用 Excel RTD 界面（RTD =“实时数据”）来更新您的交易记录。这是另一个大话题。这是一个起点：

[Microsoft KB：如何在 Excel 中设置和使用 RTD 功能](http://support.microsoft.com/kb/289150)

# python - 在同一范围内进行多个列表推导的更好方法？

> ID：11518288
> 
> 赞同：0
> 
> 时间：2012-07-17T07:59:56.513
> 
> 标签：python, list-comprehension

目前我的代码如下

```
A = [matrix_x[i][:n] for i in xrange(0, n)]
B = [matrix_x[i][n:] for i in xrange(0, n)]
C = [matrix_x[i+n][:n] for i in xrange(0, n)]
D = [matrix_x[i+n][n:] for i in xrange(0, n)] 
```

有没有更好的方法来做到这一点，因为我不断地在同一个 xrange 上循环。在这种情况下，最好不要使用列表推导，而是在单个 for 循环中将值附加到每个列表中。

```
A,B,C,D = [],[],[],[]
for i in xrange(0,n):
    A.append(matrix_x[i][:n])
    B.append(matrix_x[i][n:])
    ... etc 
```

第二种方式对我来说似乎更有效。什么方式会更“pythonic”，或者还有其他我没有想到的方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:05:05.420

并不真地。您可以`zip()`创造性地使用一次生成所有 4 个列表，但我*很难*将其称为“更好”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:14:16.403

我通常更喜欢遍历项目列表本身，而不是`xrange(len(list_of_items))`一次遍历并处理第 i 个项目。以下是如何按顺序`zip`查看每一`(this,next)`对，然后建立您的列表：

```
A,B,C,D = [],[],[],[]
for this_,next_ in zip(matrix_x,matrix_x[1:]):
    A.append(this_[:n])
    B.append(this_[n:])
    C.append(next_[:n])
    D.append(next_[n:]) 
```

是的，您可以真正将其压缩为 a `zip`of a `zip`：

```
A,B,C,D = zip(*((this_[:n],this_[n:],next_[:n],next_[n:])
                  for this_,next_ in zip(matrix_x,matrix_x[1:]))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:36:41.397

```
result = [(matrix_x[i][:n], matrix_x[i][n:], matrix_x[i+n][:n],matrix_x[i+n][n:])  for i in xrange(0, n)] 
```

那么你必须为每个元素 A,B,C,D = result[x] 解包

尽管使用 matrix_x 作为字符串这样做并没有为我产生预期的结果。

# typo3 - TYPO3 使 cHash 缓存/索引无效

> ID：11518290
> 
> 赞同：1
> 
> 时间：2012-07-17T08:00:00.117
> 
> 标签：typo3

我已经成功地缓存和索引了我的一页扩展输出。我的扩展允许在 FE 中创建和更改实体。

但是，当我更改某些内容时，我想使所使用的特定请求参数的缓存和索引无效。

我找不到关于该主题的任何内容，有什么想法吗？只是从相关的 mysql 表中删除条目似乎很苛刻......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:08:48.847

我猜你想使用[缓存框架](http://wiki.typo3.org/Caching_framework#How_to_use_the_caching_framework_in_extensions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:28:18.273

缓存框架看起来需要大量的工作来实现。所以我的肮脏解决方案是从 mysql 数据库中删除索引条目：

```
SELECT phash FROM index_phash WHERE CONVERT(cHashParams USING utf8) LIKE '...'
DELETE FROM index_phash WHERE phash = ...
DELETE FROM index_fulltext WHERE phash = ...
DELETE FROM index_grlist WHERE phash = ...
DELETE FROM index_rel WHERE phash = ...
DELETE FROM index_section WHERE phash = ... 
```

# java - 使用 selenium RC 和 java 从文本字段中提取值

> ID：11518295
> 
> 赞同：0
> 
> 时间：2012-07-17T08:00:07.333
> 
> 标签：java, selenium, selenium-rc

我正在使用 Selenium + Java 绑定，我想知道是否有人知道如何从文本字段中提取值。我尝试了以下代码，但没有成功：

```
String value = selenium.getValue(lss.get(i))
logger.info("ma val :" + selenium.getValue(remplace)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T17:42:45.370

OP给出的答案如下：

```
val=selenium.getValue("//span[text()=\""+remplace+" \"]/following-sibling::input");
logger.info("ma val :"+selenium.getValue("//span[text()=\""+remplace+" \"]/following-sibling::input")); 
```

# php - 导出函数源

> ID：11518296
> 
> 赞同：1
> 
> 时间：2012-07-17T08:00:12.937
> 
> 标签：php, function, export

> **可能重复：**
> [重构/获取 php 函数的代码](https://stackoverflow.com/questions/7026690/reconstruct-get-code-of-php-function)

在 JavaScript 中，只是`.toString()`在函数对象中输出其源代码。

是否有等效的功能，或者，如何编写一个在 PHP 中做同样的事情？

我正在寻找编写一个 PHP -> JS 编译器。而且，由于[`token_get_all`](http://php.net/manual/en/function.token-get-all.php)需要 source 作为参数，我正在寻找这个特定的导出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:06:58.273

php中的等效函数`toString()`是`strval()`

**用法**

`$set = strval($value);`

**PHP DOCS：** [字符串](http://php.net/manual/en/language.types.string.php)和[字符串](http://php.net/manual/en/function.strval.php)

> strval — 获取变量的字符串值

[在](https://stackoverflow.com/questions/1035634/converting-an-integer-to-a-string-in-php)stackoverflow 上有一个描述性的答案（关于将某些内容从类型转换为字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:16:01.700

如果您想要 php 中函数的源代码，则必须使用**ReflectionFunction**来查找定义它的文件以及开始和结束行。

```
ReflectionFunction::getFileName();
ReflectionFunction::getStartLine();
ReflectionFunction::getEndLine(); 
```

然后您必须阅读文件并删除该部分。

# c++ - 错误：围绕变量 'hexStr' 的堆栈在 C++ 中已损坏

> ID：11518303
> 
> 赞同：1
> 
> 时间：2012-07-17T08:00:46.370
> 
> 标签：c++, visual-c++

我想使用 AES 算法。

我在上面使用这个功能

```
void SubBytes(char *SArr[4][4]){
int r,c;
char xlook[2];char ylook[2]; char hexStr[2]; char *Pad;
int intxlook,intylook;
char *temp;
int subbyte;
Pad = (char *)malloc (sizeof(char));
temp = (char *)malloc (sizeof(char));

for (r = 0; r < 4; r++)
  for(c = 0; c < 4; c++){
        strcpy(temp,"");
        strcpy(xlook,"");strcpy(ylook,"");
        strcpy(temp,SArr[r][c]);
        xlook[0] = temp[0]; xlook[1] = '\0';
        ylook[0] = temp[1];ylook[1] = '\0';
        intxlook = string_to_dec(xlook);
        intylook = string_to_dec(ylook);

     subbyte = SBox(intxlook,intylook);
     itoa(subbyte,hexStr,16);

     if (strlen(hexStr) < 2){
        strcpy(Pad,"");
        Pad = Padding(0,1);
        strcat(Pad,hexStr);  
        strcpy(SArr[r][c],Pad);
     }
     else
        strcpy(SArr[r][c],hexStr);

  }

  //free(temp); free(Pad);
}     //end 
```

但我得到错误

**围绕变量 'hexStr' 的堆栈在 c 中已损坏**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:02:41.323

您忘记了 null-terminate `hexStr`。

所以当你这样做的时候`strcpy(SArr[r][c],hexStr);`。它将尝试复制到`SArr[r][c]`from`hexStr`直到它到达 a `'\0'`，它可能在任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:03:59.083

`temp`有足够的空间容纳单个字符：

```
temp = (char *)malloc (sizeof(char)); 
```

这意味着这将超出缓冲区的末尾，并可能导致损坏：

```
strcpy(temp,SArr[r][c]); 
```

由于这是 C++，请使用`std::string`而不是`char*`.

# mysql - 为什么我的 mysql slow_query_log 是空的？

> ID：11518305
> 
> 赞同：0
> 
> 时间：2012-07-17T08:00:59.157
> 
> 标签：mysql, mysql-slow-query-log

我在生产机器上有以下设置：
Mysql server 5.5.19
the active（检查 ps 行）my.cnf 包含：

```
slow_query_log
slow_query_log_file =/opt/app/mysql/log/mysqld-slow.log
long_query_time     = 1
general_log         = OFF
general_log_file    =/opt/app/mysql/log/mysqld.log
log-queries-not-using-indexes 
```

mysql> 显示变量，如“log%”；--> 显示“log_queries_not_using_indexes=ON”和“log_slow_queries=ON”

文件 /opt/app/mysql/log/mysqld-slow.log 存在，属于 mysql，长度为零。

问题是，在测试机器上，由于 log-queries-not-using-indexes 选项，我们的 eslow 查询日志迅速填满。我们禁用了它，因为它无论如何都需要。现在我们刚刚使用我们的生产数据库并希望确保同样的事情不会发生在我们身上，并找到了相同的设置，但日志是空的。我们不能只是重新启动 mysqld 并到处玩，因为我们现在还活着。我只是想了解为什么日志是空的，尽管配置似乎表明它应该记录lotsa 查询。在生产和测试服务器上运行的一般应用程序是相同的，因此实际上不太可能没有发生未索引的查询。

所以问题是：我可以检查哪些其他配置以查看为什么没有记录任何内容？我不希望它被记录，我只是想确保如果由于某种原因重新启动数据库服务器，它不会突然开始疯狂地记录。我知道我可以通过简单地从 my.cnf 中删除该选项来实现这一点，但我也想了解为什么它现在没有记录。

谢谢，伊桑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-24T18:26:34.020

您可能根本没有运行超过 1 秒的查询。

您可以运行类似 的查询`SELECT SLEEP(10)`，因此它肯定会比它长`long_query_time`并且会被记录。

也可能正在将查询写入文件，但您已 rm'd 旧日志文件。所以服务器仍在写入一个未关联的文件描述符。您可以使用 确认这一点`lsof`。

您可以强制服务器关闭并重新打开日志文件，而无需重新启动 mysqld。这将放弃取消关联的文件。您可以通过以下两种方式之一执行此操作：`FLUSH LOGS`或者设置全局变量`slow_query_log=0`then `slow_query_log=1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:16:28.893

MySQL 5.0 版对日志记录容量进行了一些重大更改。

日志记录由[log-output](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_log_output)变量控制。注意`NONE`意味着总体上没有日志记录。您可以像这样检查此变量的值：

```
mysql> SHOW VARIABLES LIKE "log_output"; 
```

在您的情况下，您希望对文件进行一些慢速记录，因此可能会执行以下操作：

```
mysql> SET GLOBAL log_output=FILE;
mysql> SET GLOBAL slow_query_log=ON; 
```

# javascript - jquery 1.4.4检查复选框，如果检查每次都返回true

> ID：11518310
> 
> 赞同：1
> 
> 时间：2012-07-17T08:01:21.607
> 
> 标签：javascript, jquery, checkbox

我正在使用 jquery 1.4.4 并尝试检查是否选中了此复选框

```
<input type="checkbox" style="float:right" checked="" id="mainBond"> 
```

我尝试了几种技术，但都没有奏效，每次我都得到“真实”

```
var chkd  = ($('#mainBond:checked').val()==undefined) ? 0 :1;
var chkd  = $('#mainBond').is(':checked');
var chkd  = $('#mainBond').attr('checked'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:06:54.153

你说得对，因为你把checked=""放在那里

```
checked="" 
```

如果您删除了它，它将显示您是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:07:32.853

`$('#mainBond').is(':checked')`适用于 jQuery 1.4.4： http: [//jsfiddle.net/LBKPG/](http://jsfiddle.net/LBKPG/) http://jsfiddle.net/LBKPG/1/

```
<input type="checkbox" style="float:right" checked id="mainBond"> This one is true
<input type="checkbox" style="float:right" id="mainBond2"> This one is false
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:08:10.520

那是因为它被检查了。属性的值`checked`并不重要。一旦它出现，该框将被选中。

如果您不想检查它，只需删除该属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:11:08.443

您没有正确编写输入行。它应该是： `<input type="checkbox" style="float:right" checked id="mainBond">`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T08:11:48.273

似乎它甚至在 1.4.4 中也能正常工作。这是一个示例： http: [//jsfiddle.net/urX3z/](http://jsfiddle.net/urX3z/)哪个...有效，请尝试单击复选框并等待 3 秒以查看您是否为真，取消选中它您将获得错误。

编辑：没有保存示例。错误的链接。

# java - 在字符串之间添加 n-1 逗号

> ID：11518311
> 
> 赞同：1
> 
> 时间：2012-07-17T08:01:31.907
> 
> 标签：java, collections, stringbuilder

我再次遇到有趣的问题，我需要动态构建包含 IN 条件的 SQL 查询。所以我有字符串列表，我需要将它们插入到我`StringBuilder`的逗号分隔中。

所以我的第一个想法是使用一些布尔值来确定我是否应该插入昏迷。

```
builder.append("TABLE.METACODES in (");
boolean isFirst = true;
for(String metaCode : cto.getEntityMetaCodes()) {
    if(isFirst) {
        isFirst = false;
        builder.append("'" + metaCode + "'");
    } else {
         builder.append(", '" + metaCode + "'");
    }
 }
 builder.append(")"); 
```

你能想出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:03:45.790

你可以使用`join`from [StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)，这会让最后一个逗号给出你想要的一个很好的结果。

从文档：

> 将提供的数组的元素连接到包含提供的元素列表的单个字符串中。
> 
> 列表前后不加分隔符。空分隔符与空字符串 ("") 相同。数组中的空对象或空字符串由空字符串表示。

```
 StringUtils.join(null, *)                = null
 StringUtils.join([], *)                  = ""
 StringUtils.join([null], *)              = ""
 StringUtils.join(["a", "b", "c"], "--")  = "a--b--c"
 StringUtils.join(["a", "b", "c"], null)  = "abc"
 StringUtils.join(["a", "b", "c"], "")    = "abc"
 StringUtils.join([null, "", "a"], ',')   = ",,a" 
```

您可以使用相同的方法：

```
builder.append("TABLE.METACODES in ('");
boolean isFirst = true;
StringUtils.join(cto.getEntityMetaCodes(),"','");
builder.append("')"); 
```

当集合为空时您需要注意，因为使用这种方法，结果将是有效的 sql:`TABLE.METACODES in ('')`并且您的代码将是无效的：`TABLE.METACODES in ()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:06:49.930

`I need to dynamically build SQL query which contatins the IN condition`..不，不，你真的没有。真的，这在很多层面上都是可怕的。现在没有理由为 SQL 查询操作字符串，只有当你总是遇到 SQL 注入漏洞时，你才会出现在技术媒体上。

Hibernate 可以通过集合（[参见此处](http://docs.jboss.org/hibernate/core/3.2/api/org/hibernate/Query.html#setParameterList%28java.lang.String,%20java.util.Collection%29)）轻松地做到这一点，我希望普通的 PreparedStatements 也能做到这一点，尽管您可能必须手动构建 in 子句，然后在循环中设置变量 - 在这种情况下采取弗朗西斯科的方法，但使用占位符代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:23:25.800

如果不使用外部库，我会执行以下操作：

```
builder.append("TABLE.METACODES in (");
EntityMetaCodes emc = cto.getEntityMetaCodes();
builder.append("'" + emc.remove(0) + "'"); // assuming it's an ArrayList, remove(0) takes out the
                               // first element and moves everything else to the left
for(String metaCode : emc) {
    builder.append(", '" + metaCode + "'");
}
builder.append(")"); 
```

# winforms - 延迟顺序显示集合项目 - WinForms

> ID：11518312
> 
> 赞同：0
> 
> 时间：2012-07-17T08:01:34.273
> 
> 标签：winforms, windows-applications

我正在尝试在**Windows 应用程序上执行此操作。**

任何人都可以帮助我如何在一个实例中从集合中读取两个项目（例如，产品）。一分钟后再次两个项目等等？

更多信息：产品集合

1.  产品1
2.  产品2
3.  产品3
4.  产品4

我必须获取前两个产品并在 UI 上显示。大约一分钟后，显示剩余的两个产品。在此之后，再次展示前两个产品。希望我在这里不够稳定。

我一直在使用 Linq 的 skip() 和 take()。找不到办法。我要疯了，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:05:05.763

如果有人正在尝试相同的方法，这就是我能够解决的方法：

```
IEnumerable<Car> carItems = c.GetCarInfo();//GetCarInfo() is service method which gives me carItems.

int noOfCars = 0;
if (noOfCars >= carItems.Count())
{
    noOfCars = 0;
}

IEnumerable<Car> carsToDisplay = from cars in carItems.Skip(noOfCars).Take(2)
                                 select cars;
noOfCars += 2; 
```

与它一起，使用了定时器控制。

如果有人有更好的解决方案，请在此处更新。

# search - 狮身人面像忽略排名，总是以相同的顺序排序

> ID：11518313
> 
> 赞同：1
> 
> 时间：2012-07-17T08:01:39.813
> 
> 标签：search, full-text-search, sphinx

我有狮身人面像索引`schools`，当我进行查询时，我总是以相同的顺序收到相同的结果。我已经尝试了所有可以想象的排名、排序和匹配组合，并且总是得到相同的排序。

我得到的不良数据示例如下：

```
"albany high"

Albany Junior High School | Auckland, NZ | 2001 (shouldn't be first)
Albany High School        | Albany, NY   | 2001
South Albany High School  | Albany, OR   | 2001
Albany High School        | Albany, CA   | 1001 (shouldn't be last) 
```

如您所见，排名最高的学校不在名为“Albany”的城市，应该更低，而排名最低的“Albany High School”应该比它的排名更高。这个问题在许多搜索词中重复出现。

Sphinx 索引如下所示：

```
source schools : root
{
    sql_query = \
        SELECT schools.id, schools.name, schools.state, schools.country, schools.city, \
        (select COUNT(*) from user2school WHERE school_id = schools.id) as user_count \
        FROM schools

    sql_attr_uint       = user_count
}

index schools
{
    source                  = schools
    path                    = /var/db/sphinx/data/schools
    min_infix_len           = 3
    infix_fields            = name
} 
```

生成结果的代码如下：

```
$sphinx->SetMatchMode(SPH_MATCH_EXTENDED);
$sphinx->SetRankingMode(SPH_RANK_WORDCOUNT);
$sphinx->SetSortMode(SPH_SORT_RELEVANCE);

$sphinx->SetFieldWeights(array(
    'id' => 0,
    'name' => 1000,
    'city' => 0,
    'state' => 0,
    'user_count' => 0
)); 
```

如何让 Sphinx 识别我的自定义权重？我尝试过的每一种组合似乎都失败了。

* * *

## 编辑：

这是另一个具有相同顺序但设置完全不同的示例。我在这里打开的唯一选项是：

```
$sphinx->SetRankingMode(SPH_RANK_SPH04); 
```

结果：

```
"albany high"

Albany Junior High School | Auckland, NZ | 3 (still shouldn't be first)
Albany High School        | Albany, NY   | 3
South Albany High School  | Albany, OR   | 2
Albany High School        | Albany, CA   | 1 (still shouldn't be last) 
```

如您所见，顺序是相同的。在我尝试过的排名、排序和加权的每种组合中，它都是相同的。有什么我可以尝试调试这个问题的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:07:22.790

也许它是您的应用程序中的逻辑错误。Sphinx 为您提供了一个 ID 列表，然后您可以使用它从原始数据库中检索数据。也许您没有正确排序这些行。

我刚刚尝试将您的数据插入测试 RT 索引（包括字符串属性，因此可以看到数据）

```
mysql> insert into rttest values (1,'Albany Junior High School','Auckland','NZ','Albany Junior High School, Auckland, NZ');
   ... etc ...

mysql> select * from rttest where match('albany high');
+------+--------+-----------------------------------------+
| id   | weight | value                                   |
+------+--------+-----------------------------------------+
|    2 |   3267 | Albany High School, Albany, NY          |
|    3 |   3267 | South Albany High School, Albany, OR    |
|    4 |   3267 | Albany High School, Albany, CA          |
|    1 |   1304 | Albany Junior High School, Auckland, NZ |
+------+--------+-----------------------------------------+
4 rows in set (0.15 sec)

mysql> select * from rttest where match('albany high') option ranker=sph04;
+------+--------+-----------------------------------------+
| id   | weight | value                                   |
+------+--------+-----------------------------------------+
|    2 |  12267 | Albany High School, Albany, NY          |
|    4 |  12267 | Albany High School, Albany, CA          |
|    3 |  10267 | South Albany High School, Albany, OR    |
|    1 |   6304 | Albany Junior High School, Auckland, NZ |
+------+--------+-----------------------------------------+
4 rows in set (0.00 sec)

mysql> select * from rttest where match('albany high') option ranker=wordcount;
+------+--------+-----------------------------------------+
| id   | weight | value                                   |
+------+--------+-----------------------------------------+
|    2 |      3 | Albany High School, Albany, NY          |
|    3 |      3 | South Albany High School, Albany, OR    |
|    4 |      3 | Albany High School, Albany, CA          |
|    1 |      2 | Albany Junior High School, Auckland, NZ |
+------+--------+-----------------------------------------+
4 rows in set (0.00 sec) 
```

更改排名模式确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:11:10.023

SetFieldWeights 中的 0 看起来很奇怪。要么只记下要设置权重的字段，要么使用 1 作为默认值。我怀疑 0 会导致问题。

怀疑 SPH_RANK_SPH04 最适合这种特殊情况。

也不应该需要你的 setSelect

# c++ - QPainter drawText() 在while循环中

> ID：11518314
> 
> 赞同：1
> 
> 时间：2012-07-17T08:01:44.517
> 
> 标签：c++, qt, user-interface

我在重新实现的 QGraphicsView::drawForeground() 中绘制它。

假设地图中有两条记录。那么这只会绘制地图中的第一个条目，而不是第二个。我需要 save() 和 restore() 吗？

想不出第二个不画的原因。我在倒数第三行的 qDebug 打印出两个条目，因此显然这两个数字至少都被存储了。

```
QMapIterator<int, QPointF> it(carNumbers);
while(it.hasNext()){
  it.next();
  painter->translate(it.value());
  QTransform oldTransform = painter->transform();
  painter->setTransform(QTransform(1, 0, 0, 1, oldTransform.m31(), oldTransform.m32()));
  painter->setPen(QPen(Qt::black));
  qDebug() << it.key();
  painter->drawText(QPointF(0.0, 0.0), QString::number(it.key()));
} 
```

还有一个问题：我得到了在预期位置绘制的数字。这就是 translate() 的作用，对吧？那么 drawText() 中的 QpointF 将是从翻译点的偏移量？

# sql - 经典 ASP SQL 参数化 - 如何从参数中删除单引号？

> ID：11518315
> 
> 赞同：0
> 
> 时间：2012-07-17T08:01:47.120
> 
> 标签：sql, asp-classic, quotes, parameterized

我正在使用带有参数化 SQL 查询字符串的经典 ASP，如下所示：

```
SQL = "SELECT * FROM content WHERE Category LIKE ? ORDER BY SubDate ?" 
```

以下参数化代码中使用了 SQL 查询字符串：

```
Set cmd = Server.CreateObject("ADODB.Command")
Set rsView = Server.CreateObject("ADODB.Recordset")
cmd.ActiveConnection = MM_connContent_STRING
cmd.Prepared = true
cmd.CommandType = adCmdText
cmd.CommandText = SQL
cmd.CommandTimeout = 60

cmd.Parameters.Append(cmd.CreateParameter("Category", 202, adParamInput, 30, qFilter))
cmd.Parameters.Append(cmd.CreateParameter("SubDate", 202, adParamInput, 10, myDateSort))

rsView.CursorLocation = adUseClient
rsView.Open cmd, , adOpenForwardOnly, adLockReadOnly 
```

上面的代码很好用，除了一个大问题。“按子日期排序？” 部分输出“ORDER BY SubDate 'DESC'”，其中 DESC 在其周围添加了单引号，因为它是一个参数。由于 DESC 周围的单引号（根据用户选择和通过 URL 查询字符串发送的内容，它也可以是 ASC）在运行上面的代码时出现错误的语法错误。似乎所有 SQL 参数都用单引号输出。如何从特定 SQL 参数中删除单引号，以免它们在 SQL 字符串中产生语法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:07:40.570

允许关键字（或与此相关的标识符）作为参数是非常罕见的。据我所知，没有一个框架支持它。

既然只有 2 个允许值，为什么不简单地写：

```
SQL = "SELECT * FROM content WHERE Category LIKE ? ORDER BY SubDate "
If myDateSort = "ASC" Or myDateSort = "DESC" Then
    SQL = SQL & myDateSort
Else
    'whoops, value not allowed. raise error... 
End If
'...rest of your code... 
```

# twitter - 通过 twitter (modx) 登录时出错

> ID：11518319
> 
> 赞同：0
> 
> 时间：2012-07-17T08:02:05.867
> 
> 标签：twitter, sdk, oauth, modx-revolution

我在 modx revo 有一个网站。通过推特开发了自己的授权。使用了 SDK (https://github.com/themattharris/tmhOAuth/)。它是如何工作的：对 Twitter 的请求。返回推特后，检查网站上是否有新用户。如果是这样，请创建一个用户并在该站点上创建一个会话。如果没有，只需创建一个会话。

但这不能正常工作。1\. 一旦他对请求给出错误

```
 $code = $tmhOAuth->request('POST', $tmhOAuth->url('oauth/access_token', ''), array(
    'oauth_verifier' => $_REQUEST['oauth_verifier']
  ));

  if ($code == 200) { 
```

1.  下一次，什么都没有发生！

2.  下次登录时完美执行。

这些动作每次都循环执行。1-2-3 步。

问题是什么？什么不工作？

插件代码：

```
<?php

require MODX_CORE_PATH.'components/twPost/tmhOAuth.php';
require MODX_CORE_PATH.'components/twPost/tmhUtilities.php';

$tmhOAuth = new tmhOAuth(array(
  'consumer_key'    => '*************',
  'consumer_secret' => '**************',
));

$contexts = empty($contexts) ? array($modx->context->get('key')) : explode(',', $contexts);

if(isset($_SESSION['access_token']) ){
    $tmhOAuth->config['user_token']  = $_SESSION['access_token']['oauth_token'];
    $tmhOAuth->config['user_secret'] = $_SESSION['access_token']['oauth_token_secret'];

    $code = $tmhOAuth->request('GET', $tmhOAuth->url('1/account/verify_credentials'));
    if ($code == 200) {
        $user_data = json_decode($tmhOAuth->response['response']);
        $moduser = $modx->getObject('modUser',  array('remote_key:=' => $user_data->id, 'remote_key:!=' => null));
        if(empty($moduser)){
            $homet = '';
            if(!empty($user_data->location)){
                $hometownAr = explode(',',$user_data->location);
                $homet = $hometownAr[0];
            }

            $moduser = $modx->newObject('modUser');
            $moduser->set('username', $user_data->screen_name);
            $moduser->set('active', true);
            $moduser->set('remote_key', $user_data->id);
            $moduser->set('remote_data', (array)$user_data);

            $profile = $modx->newObject('modUserProfile');
            $profile->set('email', $user_data->screen_name.'@twitter.com');
            $profile->set('fullname', $user_data->name);
            $profile->set('city', $homet);
            $profile->set('photo', $user_data->profile_image_url);

            $moduser->addOne($profile, 'Profile');
            $saved = $moduser->save();
        }

        $_SESSION['oauth_token']  = $_SESSION['access_token']['oauth_token'];
        $_SESSION['oauth_token_secret'] = $_SESSION['access_token']['oauth_token_secret'];

        $moduser->set('active',1);
        $moduser->save();

        foreach ($contexts as $context) {
            $moduser->addSessionContext($context);
        }

        $url = $_SESSION['back_url_login'];
        if(empty($url)) $url = "/";
        unset($_SESSION['back_url_login']);
        $modx->sendRedirect($url);        
    } else {
        $_SESSION['error_upform'] = 'Login error. Please try again. Main';
        $modx->sendRedirect('/');
    }

} elseif (isset($_REQUEST['oauth_verifier'])) {
  $tmhOAuth->config['user_token']  = $_SESSION['oauth']['oauth_token'];
  $tmhOAuth->config['user_secret'] = $_SESSION['oauth']['oauth_token_secret'];

  $code = $tmhOAuth->request('POST', $tmhOAuth->url('oauth/access_token', ''), array(
    'oauth_verifier' => $_REQUEST['oauth_verifier']
  ));

  if ($code == 200) {
    $_SESSION['access_token'] = $tmhOAuth->extract_params($tmhOAuth->response['response']);
    unset($_SESSION['oauth']);
    $modx->sendRedirect('/?id=12');
  } else {
        $_SESSION['error_upform'] = 'Login error. Please try again. verifier. | '.$tmhOAuth->response['response'];
        $modx->sendRedirect('/');
  }
// start the OAuth dance
}elseif ( isset($_REQUEST['auth']) && $_REQUEST['auth']=='1' ) {
    $_SESSION['back_url_login'] = $_SERVER['HTTP_REFERER'];

    $params = array(
        'oauth_callback'     => '/?id=12'
    );

    $params['x_auth_access_type'] = 'write';
    //$params['x_auth_access_type'] = 'read';

    $code = $tmhOAuth->request('POST', $tmhOAuth->url('oauth/request_token', ''), $params);

    if ($code == 200) {
        $_SESSION['oauth'] = $tmhOAuth->extract_params($tmhOAuth->response['response']);
        $method = 'authorize'; $force  = '';
        $authurl = $tmhOAuth->url("oauth/{$method}", '') .  "?oauth_token={$_SESSION['oauth']['oauth_token']}{$force}";
        $modx->sendRedirect($authurl);
  } else {
        $_SESSION['error_upform'] = 'Login error. Please try again.';
        $modx->sendRedirect('/');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:21:44.080

添加

```
'oauth_token' => $_REQUEST['oauth_token'] 
```

应您的要求。像这样：

```
$code = $tmhOAuth->request('POST', $tmhOAuth->url('oauth/access_token', ''), array(
    'oauth_verifier' => $_REQUEST['oauth_verifier'],
    'oauth_token' => $_REQUEST['oauth_token']
)); 
```

没有这条线，twitter 根本不适合我。

# ios - 如何将此 UILabel 代码放在我的 AppDelegate 之外？

> ID：11518330
> 
> 赞同：0
> 
> 时间：2012-07-17T08:02:51.070
> 
> 标签：ios

我已经开始了一个新的 iOS " `Empty Application`"-template 项目。当我将此代码放入`application:didFinishLaunchingWithOptions:`方法中时，它可以正常工作：

```
 CGRect frame = CGRectMake(10, 10, 300, 25);
 UILabel *helloLabel = [UILabel new];
 [helloLabel setFrame:frame];
 helloLabel.text = @"Hello iPhone!";  
 [self.window addSubview:helloLabel]; 
```

但我真正想做的是在另一个类中创建一个“addHello”类方法，这样出现`application:didFinishLaunchingWithOptions:`的只是：

```
[MyOtherClass addHello]; 
```

这是我尝试放入其他类的内容：

```
+ (void) addHello { 

CGRect frame = CGRectMake(10, 10, 300, 25);
UILabel *helloLabel = [UILabel new];
[helloLabel setFrame:frame];
helloLabel.text = @"Hello iPhone!";

UIWindow *window = [[UIApplication sharedApplication] keyWindow];
[window addSubview:helloLabel];

} 
```

但这不起作用。我应该做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:29:52.833

我的猜测是 [[UIApplication sharedApplication] keyWindow] 在您的代码中返回 nil ，因为您在 UIWindow 的 makeKeyAndVisible 方法*尚未*被调用之前调用了 addHello 方法。我想知道这是否可行：

在您的 appDidFinishLaunching 方法中：

```
[MyOtherClass addHelloWithWindow:self.window]; 
```

然后是你的 MyOtherClass

```
+ (void) addHelloWithWindow:(UIWindow *)window
{ 
    CGRect frame = CGRectMake(10, 10, 300, 25);
    UILabel *helloLabel = [UILabel new];
    [helloLabel setFrame:frame];
    helloLabel.text = @"Hello iPhone!";
    [window addSubview:helloLabel];
} 
```

# java - 如何在 JBullet 中定义自定义网格？

> ID：11518331
> 
> 赞同：1
> 
> 时间：2012-07-17T08:02:56.953
> 
> 标签：java, libgdx, bulletphysics

我正在创建一个游戏，我想使用 JBullet 物理引擎。我搜索了 Javadocs，但没有找到任何东西。如何定义与 JBullet 一起使用的自定义形状？我正在寻找将顶点和索引数组传递到其中的东西，还是有其他解决方案？谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:37:59.030

如果您的网格是凸的，请使用 ConvexHullShape。它将顶点作为参数，但不需要索引或其他连接信息。

对于凹面网格，您可以使用 BvhTriangleMeshShape。它采用例如 TriangleIndexVertexArray 作为参数，该参数由三角形索引和顶点列表创建。

JBullet 没有与最新的 Bullet 版本保持同步，但它仍然是一个很好的 Java 物理库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:00:10.490

JBullet 似乎不是完整的移植，所以我转向 C++，我希望使用 Bullet。

# ios - iOS 分发方式

> ID：11518332
> 
> 赞同：2
> 
> 时间：2012-07-17T08:03:07.580
> 
> 标签：ios, distribution, ios-provisioning, iphone-developer-program

目前，我公司有一个计划，为使用 iPhone、iPad 的销售人员开发 iOS 应用程序（销售工具）。我知道我们应该参加“企业计划”。

我们的合作伙伴、经销商、分销商可以使用上述销售工具也很重要。我们的经销商、合作伙伴和分销商遍布全球......（台湾、日本、欧洲）

我知道 Apple 提供了一个 B2B 程序，允许您将内部应用程序分发给其他公司、企业。但目前 B2B 仅适用于美国公司/组织。

这是否意味着我没有其他方法可以将应用程序分发给美国以外的其他组织和公司？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:31:51.283

您的假设部分正确；您不能使用企业计划，并且 B2B 计划在美国以外的地区不可用。

但是，您可以通过 iTunes 分发您的应用程序。如果您不希望未经授权的人使用它，只需添加登录功能。凭据仅提供给您的合作伙伴和 iTunes 审核团队。

# crystal-reports - 页脚管理

> ID：11518334
> 
> 赞同：0
> 
> 时间：2012-07-17T08:03:11.453
> 
> 标签：crystal-reports, footer, crystal-reports-2010

我希望我张贴到正确的地方。我对水晶报告比较陌生，请原谅我在这里使用的任何“外行术语”。

最近我的老板要求我修改我们系统中的报告之一。任务如下：

1.  仅将页脚移动到最后一页。

    *   我设法通过在页脚部分专家的公式研讨会中插入“ if pagenumber=TotalPageCount then false else true”来解决此问题。
2.  确保详细信息占据页脚留下的空白部分，因为页脚仅在最后一页中可用。

    *   不知道

感谢你们是否可以提供一些输入或解决方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:55:28.723

我建议另一种解决方案：

将 的内容移动`Page Footer`到`Report Footer`。
报告页脚显示在最后一页。

`Page Footer`从抑制`Section Expert`。
详细信息将占据所有页面。

# c++ - 创建对话框时没有类或命名空间

> ID：11518337
> 
> 赞同：1
> 
> 时间：2012-07-17T08:03:19.977
> 
> 标签：c++, dll, dialog, atl

我在 ATL dll 文件中创建了一个对话框，并添加了一个类来操纵它的性能。我最初设法让它编译，但现在（因为可能包括调整）我在编译时收到奇怪的消息：

CTestDlg：没有类或命名空间

我在下面引用了头文件和cpp文件的源代码：

```
#pragma once

#include "resource.h" // Hauptsymbole
#include <atlhost.h>

class CTestDlg : public CAxDialogImpl<CTestDlg>
{
private:
bool m_cancel;

public:
CTestDlg()
{
    m_cancel = true;    
}

~CTestDlg()
{
}

enum { IDD = IDD_TESTDLG };

BEGIN_MSG_MAP(CTestDlg)
MESSAGE_HANDLER(WM_INITDIALOG, OnInitDialog)
COMMAND_HANDLER(IDOK, BN_CLICKED, OnClickedOK)
COMMAND_HANDLER(IDCANCEL, BN_CLICKED, OnClickedCancel)
COMMAND_HANDLER(IDC_EDIT1, EN_CHANGE, OnEnChangeEdit1)
CHAIN_MSG_MAP(CAxDialogImpl<CTestDlg>)
END_MSG_MAP()

LRESULT OnInitDialog(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
{
    CAxDialogImpl<CTestDlg>::OnInitDialog(uMsg, wParam, lParam, bHandled);
    bHandled = TRUE;

    //CEdit* pEdit = (CEdit*)GetDlgItem(IDC_EDIT1);
    //pEdit->SetWindowTextW(L"Hello");
    CWindow textBox(GetDlgItem(IDC_EDIT1));
    textBox.SetWindowTextW(L"hello");
    //textBox.SendMessageW(WM_SETTEXT, 0, (LPARAM)L"test!!!");
    return 1;  // Das System kann den Fokus festlegen
}

LRESULT OnClickedOK(WORD wNotifyCode, WORD wID, HWND hWndCtl, BOOL& bHandled)
{
    EndDialog(wID);
    m_cancel = false;
    return 0;
}

LRESULT OnClickedCancel(WORD wNotifyCode, WORD wID, HWND hWndCtl, BOOL& bHandled)
{
    EndDialog(wID);
    return 0;
}

LRESULT OnEnChangeEdit1(WORD /*wNotifyCode*/, WORD /*wID*/, HWND /*hWndCtl*/, BOOL& /*bHandled*/);

bool IsCancelled() const { return m_cancel; }
bool saveFile();

}; 
```

//.cpp 文件

```
#include "CTestDlg.h"
#include "stdafx.h"

LRESULT CTestDlg::OnEnChangeEdit1(WORD /*wNotifyCode*/, WORD /*wID*/, HWND /*hWndCtl*/, BOOL& /*bHandled*/)
{
return 0;
}

bool CTestDlg::saveFile()
{

OPENFILENAME ofn;
WCHAR szFileName[MAX_PATH] = L"";

ZeroMemory( &ofn , sizeof( ofn));

ofn.lStructSize = sizeof(ofn); 
ofn.hwndOwner = NULL;
ofn.lpstrFilter = (LPCWSTR)L"Text Files (*.txt)\0*.txt\0All Files (*.*)\0*.*\0";
ofn.lpstrFile = (LPWSTR)szFileName;
ofn.nMaxFile = MAX_PATH;
ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;
ofn.lpstrDefExt = (LPCWSTR)L"txt";

if(GetSaveFileNameW(&ofn))
{
    HANDLE hFile = CreateFile(ofn.lpstrFile, 
        GENERIC_WRITE,
        0,
        NULL, 
        CREATE_NEW,
        FILE_ATTRIBUTE_NORMAL,
        NULL);

    DWORD dwBytesWritten = 0;
    char str[] = "Example text testing WriteFile";
    WriteFile( hFile, str, strlen(str), &dwBytesWritten, NULL );
    CloseHandle(hFile); 

    return true;
}
else 
    return false;

} 
```

关于代码似乎有什么问题的任何迹象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:10:29.937

您的预编译头文件应在 .cpp 文件中首先包含，更改：

```
#include "CTestDlg.h"
#include "stdafx.h" 
```

到

```
#include "stdafx.h"
#include "CTestDlg.h" 
```

还要仔细检查包含的文件名是否正确

# haskell - 为什么这个函数签名不进行类型检查？

> ID：11518338
> 
> 赞同：4
> 
> 时间：2012-07-17T08:03:21.493
> 
> 标签：haskell, types, typechecking

为什么不进行`extractEither`类型检查？

```
data MyEither a b = MyLeft a | MyRight b
                    deriving (Read, Show)

extractEither :: MyEither a b -> c
extractEither (MyLeft p) = p 
```

编译器显示：

```
Couldn't match type `a' with `c'
  `a' is a rigid type variable bound by
      the type signature for extractEither :: MyEither a b -> c
      at /Users/tongmuchenxuan/playground/test.hs:5:1
  `c' is a rigid type variable bound by
      the type signature for extractEither :: MyEither a b -> c
      at /Users/tongmuchenxuan/playground/test.hs:5:1
In the expression: p
In an equation for `extractEither': extractEither (MyLeft p) = p 
```

'c' 不是通用的足以捕捉任何类型吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T08:08:49.530

不。是`c`调用*者希望函数返回的任何类型*，即对于一个函数`f :: a -> c`，它*总是*需要能够编写`f x + 1 :: Int`以及`putStr $ f x`。`main = f x`您的功能当然不允许。

你想要的是返回一个动态类型。Haskell 故意不允许像其他一些语言那样容易地做到这一点，因为当返回的类型是意外时，它显然很容易导致运行时错误。有多种方法可以做到这一点，但哪种方法正确取决于您实际想要的方法。你能给出一些背景吗？您的问题的最佳解决方案很可能*不会*使用动态类型，而是使用更多 Haskell 惯用的东西。

也许你想要的只是

```
extractEither :: MyEither a a -> a
extractEither (MyLeft p) = p
extractEither (MyRight p) = p 
```

这要求“两侧”的类型相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-17T08:09:00.260

基本上，您的类型签名表示您的函数可以返回`c`给定 a的任何类型的值`MyEither a b`，再次，对于每个`a`and `b`。但是，正如编译器指出的那样，这里不可能产生任何这样的`c`东西，因为您实际上返回的是一个类型的值`a`(being `p :: a`)。

此外，您的定义仍然无法管理您`MyEither a b`不是`Left a`. 它应该做什么，例如，当你打电话时`extractEither (MyRight 1)`？如果您尝试运行这样的函数（当然是在更正类型签名之后），您可能会遇到所谓的*非穷举模式*异常，这意味着没有用于`extractEither`处理一些可能的输入模式的主体定义。

如果您尝试编写一个同时用于提取`MyLeft`和`MyRight`值的函数，恐怕您应该改变主意。为了提取左侧或右侧的任何内容，您应该在两侧具有相同的类型（即`MyEither a a`），这不是那么有用。

您应该考虑使用这些函数来提取值。在这里，我返回`Maybe`以避免管理调用的负担，`error`例如，当您尝试从右值中提取左值时：

```
extractMyLeft :: MyEither a b -> Maybe a
extractMyRight :: MyEither a b -> Maybe b 
```

**编辑：**另请参阅 dblhelix 的答案，以获取有关另一种可能的重构的建议，该重构可能对*几乎*获得您正在寻找的类型签名很有用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-17T10:58:06.223

除了 Riccardo 的回答：如果您想要一个能够从值中提取某种类型`c`的值的函数，`MyEither`无论它是由`MyLeft`or构建的`MyRight`，您都可以，而不是要求该值具有 type `MyEither c c`，“指示”该函数关于如何`c`从任一侧获取 -typed 值：

```
extractEither :: (a -> c) -> (b -> c) -> MyEither a b -> c
extractEither f g (MyLeft x)  = f x
extractEither f g (MyRight y) = g y 
```

也就是说，`extractEither`现在需要两个附加参数`f`和`g`: 用于将提取的值转换为所需类型的值的函数。

在使用 sum 类型时，这是一个非常常见且有用的习惯用法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:08:29.133

```
extractEither :: MyEither a b -> c
extractEither (MyLeft p) = p 
```

> 'c' 不是通用的足以捕捉任何类型吗？

您提出的直觉适用于面向对象的语言或具有子类型的其他语言，但不适用于 Haskell 或其他参数类型系统（例如，Java 泛型）。在 Java 中采用这个方法签名：

```
public Object blah(Foo whatever); 
```

此方法返回`Object`，这是层次结构中的最高类型。这意味着这个方法的实现可以选择返回它想要的任何类型，并且它会被简单地向上转换为`Object`.

Haskell 类型不是这样工作的。您认为您`extractFilter`可以返回`p`，因为您隐含地假设**您**，作者`extractEither`，可以选择使用哪种类型`c`，就像 get 的作者`blah`选择结果的运行时类型一样。但在 Haskell 中，情况正好相反：函数的**调用者**可以选择用于`a`, `b`and的类型`c`，并且他们可以选择不兼容的`a`and `c`。如果我选择任何`a`≠ `c`，则没有可以编写的终止代码将我的任意选择`a`转换为任意选择`c`.

# google-calendar-api - Google Apps 脚本 - 日历班次生成器 - 我们可以拆分日期和时间吗？

> ID：11518339
> 
> 赞同：0
> 
> 时间：2012-07-17T08:03:24.983
> 
> 标签：google-calendar-api, google-apps-script

好的，所以我用 Google Apps Script 深入了解了一下。在工作中，我们有一周的固定时间轮班。三种类型的班次可以是早班（上午 7 点至下午 3.30）、中班（上午 8 点至下午 5 点）和晚班（上午 10.30 至晚上 7 点）。

我要做的是生成一个带有日期选择器和 3 个按钮的 UI，每个班次一个。这个想法是您在日期选择器上单击星期一，然后单击一个班次按钮，它会生成 5 个班次（一周中的每一天一个班次）并将它们作为事件添加到我的 Google 日历中。

我可以获得生成事件的函数，但我无法将日期选择器的输入与每个函数的日期联系起来。有什么方法可以分割事件的日期和时间吗？理想情况下，时间将“硬编码”到脚本中，因此无法更改，但用户可以选择日期。

我希望这一切都有意义，代码如下：

```
// loads the UI
function doGet() {
  var app = UiApp.createApplication();

  var label1 = app.createLabel("To use this application, select a Monday and then hit the Early Middle or Late button");
   app.add(label1);
  var label2 = app.createLabel("5 events will be created from the start date across five days");
   app.add(label2);

   var picker = app.createDatePicker().setId("picker");
   var handler = app.createServerHandler("change");
    app.add(picker);

  var button1 = app.createButton("Early").setId("button1");
   button1.addClickHandler(app.createServerHandler("early"));
   app.add(button1);

   var button2 = app.createButton("Middle").setId("button2");
    button2.addClickHandler(app.createServerHandler("middle"));
   app.add(button2);

  var button3 = app.createButton("Late").setId("button3");
   button3.addClickHandler(app.createServerHandler("late"));
   app.add(button3);

   return app;
};

//Handles date picker changes
 function change(eventInfo) {
   var app = UiApp.getActiveApplication();
   app.add(app.createLabel("The value of the date picker changed to " +     eventInfo.parameter.picker));
  return app;
};

//Generates the events
 function early(){
  var cal = CalendarApp.getDefaultCalendar();
  var title = "Computacenter";
  var start = new Date("July 21, 2012 07:00:00");  
  var end = new Date("July 21, 2012 15:30:00");
  var loc = "Unspecified";
  var recurrence = CalendarApp.newRecurrence().addDailyRule().times(5);

  var event = cal.createEventSeries(title, start, end, recurrence, {location : loc});

};

function middle(){

  var cal = CalendarApp.getDefaultCalendar();
  var title = "Computacenter";
  var start = new Date("July 21, 2012 08:30:00");
  var end = new Date("July 21, 2012 17:00:00");
  var loc = "Unspecified";
  var recurrence = CalendarApp.newRecurrence().addDailyRule().times(5);

  var event = cal.createEventSeries(title, start, end, recurrence, {location : loc});

};

function late(){

  var cal = CalendarApp.getDefaultCalendar();
  var title = "Computacenter";
  var start = new Date("July 21, 2012 10:30:00");
  var end = new Date("July 21, 2012 19:00:00");
  var loc = "Unspecified";
  var recurrence = CalendarApp.newRecurrence().addDailyRule().times(5);

  var event = cal.createEventSeries(title, start, end, recurrence, {location : loc});

 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:04:48.597

好的 - 有一个称为回调元素的东西，您必须将其添加到您的服务器处理程序中。

因此，理想情况下，我不会直接添加所有 UI 元素，而是创建一个面板并添加到面板中。就像是

```
var panel = app.createVerticalPanel().setId('panel'); 
app.add(panel); 
/* .... */
panel.add(picker); 
/* and the like... */

button2.addClickHandler(app.createServerHandler("middle").addCallbackElement(panel)); 
```

使用它，您应该能够使用 eventInfo.parameter.picker 在日期选择器中选择日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:40:44.420

这是您修改后的代码

```
// loads the UI
function doGet() {
  var app = UiApp.createApplication();

  var container = app.createVerticalPanel();

  var label1 = app.createLabel("To use this application, select a Monday and then hit the Early Middle or Late button");
   container.add(label1);
  var label2 = app.createLabel("5 events will be created from the start date across five days");
   container.add(label2);

   var picker = app.createDatePicker().setId("picker");
   var handler = app.createServerHandler("change");
  picker.addValueChangeHandler(handler);
    container.add(picker);

  var button1 = app.createButton("Early").setId("button1");
   button1.addClickHandler(app.createServerHandler("generateEvents").addCallbackElement(container));
   container.add(button1);

   var button2 = app.createButton("Middle").setId("button2");
    button2.addClickHandler(app.createServerHandler("generateEvents").addCallbackElement(container));
   container.add(button2);

  var button3 = app.createButton("Late").setId("button3");
   button3.addClickHandler(app.createServerHandler("generateEvents").addCallbackElement(container));
   container.add(button3);

  app.add(container);

   return app;
};

//Handles date picker changes
 function change(eventInfo) {
   Logger.log(eventInfo);
   var app = UiApp.getActiveApplication();
   app.add(app.createLabel("The value of the date picker changed to " +     eventInfo.parameter.picker));
  return app;
};

//Generates the events
 function generateEvents(e){
   var source = e.parameter.source;
   var date = e.parameter.picker.getDate();
   var month = e.parameter.picker.getMonth(); 
   var year = e.parameter.picker.getFullYear();

   var startTime;
   var endTime;

   //(7am - 3.30pm), Middles (8.30am to 5pm) and Lates (10.30am to 7pm).
   if(source == 'button1'){
     var startTime = '07:00';
     var endTime = '15:30';
   }

   //Middle events time
   if(source == 'button2'){
     var startTime = '08:30';
     var endTime = '17:00';
   }

   //Late events time
   if(source == 'button3'){
     var startTime = '10:30';
     var endTime = '19:00';
   }

  var cal = CalendarApp.getDefaultCalendar();
  var title = "Computacenter";
   //Using format new Date(year, month, day, hours, minutes, seconds); 
  var start = new Date(year, month, date, parseInt(startTime.substring(0,2)), parseInt(startTime.subString(3,5)));
  var end = new Date(year, month, date, parseInt(endTime.substring(0,2)), parseInt(endTime.subString(3,5)));
  var loc = "Unspecified";
  var recurrence = CalendarApp.newRecurrence().addDailyRule().times(5);

  var event = cal.createEventSeries(title, start, end, recurrence, {location : loc});

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:43:23.723

恐怕您选择的方法将无法使用，至少不是非常用户友好，也不是“傻瓜证明”。（即使使用回调元素）。你会发现很难避免有人选择了错误的组合。

我建议使用 3 个单选按钮或一个 listBox 用于小时班次和一个日期选择器用于日期。单选按钮中的小时将是字符串，您可以轻松地将其转换为可以与日期结合的开始时间/结束时间。此外，如果您想在几周内工作，日期选择器也不是最好的解决方案，因为人们可以选择一周中的任何一天，如果我理解你的话，选择的日期应该始终是星期一以便系统工作不是吗？

我有一个关于日期和时间片[的情况几乎相同的应用程序](https://docs.google.com/macros/exec?service=AKfycbyc2SWv6JhDgUpXwF7aAARihIE7WPRmrQf6KIOtfQ)，你可以看看它，看看它是如何工作的，我认为它至少在它的方法上可以很好地适合你的用例，它为每个人提供了一个选择星期几，但这个选择可以减少到一个。该脚本也[显示在此处](https://sites.google.com/site/appsscriptexperiments/home/reservation-gui)。随时询问您是否需要更多详细信息。

**编辑：** *Waqar 的回答是在我写作的时候出现的，他的建议离我不远 ;-) 并解决了几乎所有问题......只需考虑更换日期选择器，以找到拒绝任何“非星期一”选择的方法！*

**编辑 2：**要获得正确的时间和日期，您可以这样做（使用 Number() 将字符串转换为数字）：

```
 var date = Number(e.parameter.picker.getDate());
   var month =Number(e.parameter.picker.getMonth()); 
   var year = Number(e.parameter.picker.getFullYear());
...
...
       var st = startTime.split(':');// returns an array of 2 string elements
           var stH=Number(st[0]);
           var stM=Number(st[1]) ;              
       var et = endTime.split(':')
           var etH=Number(et[0]);
           var etM=Number(et[1]) ;              
       //Using format new Date(year, month, day, hours, minutes, seconds, milliseconds); 
      var start = new Date(year,month,date,stH,stM,0,0);
      var end = new Date(year,month,date,etH,etM,0,0);
       Logger.log(start+'   '+end)
      var loc = "Unspecified";
      var recurrence = CalendarApp.newRecurrence().addDailyRule().times(5);

      var event = cal.createEventSeries(title, start, end, recurrence, {location : loc}); 
```

或者，一直保持字符串：

```
 var startstring = year+','+month+','+date+','+startTime.replace(':',',')+', 00,000'
   var endstring =  year+','+month+','+date+','+endTime.replace(':',',')+', 00,000'
   Logger.log('start = '+startstring+'      end = '+endstring)
   var st = startstring.split(',')
   var et = endstring.split(',')

   var start = new Date(st[0],st[1],st[2],st[3],st[4],st[5],st[6]);
   var end = new Date(et[0],et[1],et[2],et[3],et[4],et[5],et[6]);
   Logger.log(start+'   '+end) 
```

# xcode - 关闭 xcode 覆盖模式

> ID：11518341
> 
> 赞同：1
> 
> 时间：2012-07-17T08:03:44.063
> 
> 标签：xcode, macos, xcode4

今天我开始我的 xcode 并发现了惊人的东西：编辑器中的胖 karet。在 iOS 对象浏览器只显示 MacOS 控件后，我不知道如何修复它并按下一些快捷方式。我非常失望并决定设置默认设置：

$defaults 删除 com.apple.Xcode $rm -rf ~/Library/Application\ Support/Xcode

但是：找不到域（com.apple.Xcode）

我可以删除 xcode，但我认为它不能解决问题。有人知道如何解决这个问题（覆盖插入符号和对象浏览器），或者设置默认设置，或者完全删除 xcode？

谷歌沉默了。

**UPD** 看来我找到了第一个问题的解决方案。**所以： XVim讨厌的插件**设置的“xcode插入模式” ，只需通过删除muCommander中的文件夹$HOME/Library/Application Support/Developer/Shared/Xcode/Plug-ins/XVim.xcplugin来卸载它（磁盘订单避风港**'**没有找到）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:11:56.530

Xcode4 移动了一些东西，我怀疑你试图删除 Xcode3 的设置。要重置为 4，请键入：

> rm ~/Library/Preferences/com.apple.Xcode.plist

我可以确认我的 Xcode4 存在该文件，尽管我必须承认我实际上并没有为您尝试过。

# c# - Excel 到 DataGridView 不使用硬代码

> ID：11518344
> 
> 赞同：0
> 
> 时间：2012-07-17T08:03:53.147
> 
> 标签：c#, excel, datagridview, excel-interop

我正在尝试在不进行硬编码样式的情况下将 Excel 读取到数据网格视图。我在尝试执行此操作时遇到了错误。谁能帮我解决这个问题？

```
Excel.Workbook workbook;
        Excel.Worksheet NwSheet;
        Excel.Range ShtRange;
        Microsoft.Office.Interop.Excel.Application ExcelObj = null;
        OpenFileDialog filedlgExcel = new OpenFileDialog();
        filedlgExcel.Title = "Select file";
        filedlgExcel.InitialDirectory = @"c:\";
        filedlgExcel.FileName = txtFileName.Text;
        filedlgExcel.Filter = "Excel Sheet(*.xlsx)|*.xlsx|All Files(*.*)|*.*";
        filedlgExcel.FilterIndex = 1;
        filedlgExcel.RestoreDirectory = true;
        if (filedlgExcel.ShowDialog() == DialogResult.OK)
        {
            //Excel.Workbook theWorkbook = ExcelObj.Workbooks.Open(
            //   filedlgExcel.FileName, 0, true, 5,
            //    "", "", true, Excel.XlPlatform.xlWindows, "\t", false, false,
            //    0, true);
           workbook = ExcelObj.Workbooks.Open(filedlgExcel.FileName , Missing.Value, Missing.Value,
                Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
        ShtRange = NwSheet.UsedRange; //gives the used cells in sheet
        //Reading Excel file.
        //Creating dataTable to read the containt of the Sheet in File.

        //Set header name
        for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
        {
            dt.Columns.Add(new DataColumn((ShtRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
        }
        dt.AcceptChanges();
        //store coumn names to array
        string[] columnNames = (from dc in dt.Columns.Cast<DataColumn>() select dc.ColumnName).ToArray();

        //populate fields
        for (int Rnum = 2; Rnum <= ShtRange.Rows.Count; Rnum++)
        {
            DataRow dr = dt.NewRow();
            for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
            {
                dr[Cnum - 1] = (ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
            }
            dt.Rows.Add(dr);
            dt.AcceptChanges();
        }
        workbook.Close(true, Missing.Value, Missing.Value);
        ExcelObj.Quit();

        foreach (DataRow dr in dt.Rows)
        {
            string strEmployee = dr["Employee Name"].ToString();
            obj1 = new List<employeeschedule>();
            for (int i = 1; i < dt.Columns.Count; i++)
            {
                string period = dr[i].ToString();
                string[] split = period.Split('–');
                employeeschedule es = new employeeschedule();
                string day = columnNames[i];
                if (split[0] == "Rest Day")
                {
                    es.day = day;
                    es.startTime = split[0];
                    es.endTime = split[0];
                    es.restDay = "Yes";
                }
                else
                {
                    es.day = day;
                    es.startTime = split[0];
                    es.endTime = split[1];
                    es.restDay = "No";
                }
                obj1.Add(es);
            }

            dict.Add(strEmployee, obj1);
            dgvEmployeeShift.DataSource = dt;
        }
            }
        } 
```

他们在这部分向我显示了一个错误“对象引用未设置为对象的实例”。

```
workbook = ExcelObj.Workbooks.Open(filedlgExcel.FileName , Missing.Value, Missing.Value,
                Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:06:28.707

您在开始时将 ExcelObj 设置为 null ，然后从不初始化它

```
Microsoft.Office.Interop.Excel.Application ExcelObj = null; 
```

试着做`= new Microsoft.Office.Interop.Excel.Application();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:08:49.670

或者，您可以使用`OleDb`提供程序来读取 Excel 工作表。

```
string cnStr=@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\myFolder\myExcel2007file.xlsx;Extended Properties=" + "\"Excel 12.0 Xml;HDR=YES;IMEX=1\"";
DataTable dt=new DataTable();
string sql="Select * From [Sheet1$]";
using(OleDbConnection cn=new OleDbConnection(cnstr))
{
  using(OleDbDataAdapter adapter=new OleDbDataAdapter(sql,cn))
   {
     adapter.Fill(dt);
   }
} 
```

OleDb 是 ADO.NET 的提供者 API（.net 框架的数据库集成 API），它公开来自不同数据源的数据，包括 Microsoft Access 数据库或 Microsoft Excel 电子表格等等。

查看 MSDN 文章/教程的链接：

1.  [如何使用 ADO.NET 通过 Visual Basic .NET 检索和修改 Excel 工作簿中的记录](http://support.microsoft.com/kb/316934)
2.  [如何使用 Visual C# 2005 或 Visual C# .NET 将数据传输到 Excel 工作簿](http://support.microsoft.com/kb/306023)

# android - 在 webview 中居中图像

> ID：11518345
> 
> 赞同：2
> 
> 时间：2012-07-17T08:03:56.117
> 
> 标签：android, image, webview

我怎样才能在 webview 中居中图像？我只使用资产文件夹中的文件 url 来加载图像，如果图像对于 webview 来说太大，我需要将其居中。谢谢。

# subsonic - 在 Subsonic 2.2 查询中使用 coalesce 关键字的最佳方式是什么？

> ID：11518350
> 
> 赞同：0
> 
> 时间：2012-07-17T08:04:04.800
> 
> 标签：subsonic, subsonic2.2

我想使用 Subsonic 2.2 创建以下查询：

```
SELECT coalesce(col1, col2) AS result
FROM someTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:52:48.817

与此类似的东西：

```
DAL.DB.Select(
    string.Format("COALESCE({0}, {2}) as result",
        DAL.SomeTable.Columns.col1,
        DAL.SomeTable.Columns.col2
    ))
.From<DAL.SomeTable>()
... 
```

# java - .getSize() 在 JScrollPane 中更新，但不在 JPanel 中更新

> ID：11518353
> 
> 赞同：0
> 
> 时间：2012-07-17T08:04:09.013
> 
> 标签：java, swing, jframe, jpanel, jscrollpane

最初的问题是为什么 .getSize() 在组件调整大小后不返回 JCompnent 的实际大小：[.getSize() 没有更新](https://stackoverflow.com/questions/11470530/getsize-isnt-updated)

相反，我在 JScrollPane 中添加了一个 JPanel，并使用 scrollRectToVisible() 来更新 getSize()。考虑这个小例子：

```
import java.awt.*;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import javax.swing.*;

public class Test extends JFrame implements MouseWheelListener{
    JPanel p,p2;
    JScrollPane js;

    Test(){
        setLayout(new FlowLayout());
        setPreferredSize(new Dimension(1000,1000));
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

        p = new JPanel();
        p.setPreferredSize(new Dimension(200,200));

        p2=new JPanel();
        p2.setPreferredSize(new Dimension(20,20));
        p2.setBackground(Color.green);

        p.add(p2);
        js = new JScrollPane(p);

        add(js);

        addMouseWheelListener(this);
        pack();
    }
    public static void main(String args[]){
        new Test();
    }
    public void mouseWheelMoved(MouseWheelEvent e) {

        System.out.println(p2.getSize());

        p2.setPreferredSize(new Dimension(100,100));
        p2.revalidate();

        p2.scrollRectToVisible(new Rectangle(1,1,1,1));

        System.out.println(p2.getSize());
    }
} 
```

在我滚动鼠标滚轮后，单击绿色方块会调整大小。该程序还会打印出正确的尺寸。但是，如果我删除 scrollRectToVisible(1,1,1,1)**正方形的大小会被调整**，但**它会打印出错误的 size**。问题是：

1.  除了调用 scrollRectToVisible 来更新 getSize() 之外，还有其他方法吗？
2.  如果正方形没有添加到 jscollpane 中，例如 [.getSize() 中的示例没有更新](https://stackoverflow.com/questions/11470530/getsize-isnt-updated)，是否有相应的更新函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:31:40.707

实际上没有问题。问题是你调用`revalidate()` 它支持**延迟**布局。请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#revalidate%28%29)：

> 支持延迟自动布局。
> 
> 调用 invalidate 然后将此组件的 validateRoot 添加到需要验证的组件列表中。验证将在所有当前挂起的事件都已调度后进行。...

特别是*验证将在所有当前未决事件已被调度后发生*

这意味着 p2 的布局（以及它的大小更改）将在所有挂起的事件被调度后执行，包括当前的鼠标滚轮事件。

当您调用时`scrollToVisibleRect`，如果组件无效，它会自动执行组件的布局，这就是调用 scrollToVisibleRect 导致立即调整大小的原因。

如果您确实需要立即调整大小，可以`doLayout()`在 的父容器上使用，`p2`但我不推荐它，因为它可能更昂贵。`revalidate()`提供了合并事件的可能性`repaint()`。

# sql - SQL Server Rank() 按组

> ID：11518354
> 
> 赞同：9
> 
> 时间：2012-07-17T08:04:09.163
> 
> 标签：sql, sql-server, reporting-services

我有一个这样的数据表：

```
Employee1   Product1    ProductGroup1   Quantity    SalesDate
Employee1   Product1    ProductGroup1   Quantity    SalesDate
Employee1   Product2    ProductGroup1   Quantity    SalesDate
Employee1   Product2    ProductGroup1   Quantity    SalesDate
Employee2   Product1    ProductGroup1   Quantity    SalesDate
Employee2   Product1    ProductGroup1   Quantity    SalesDate
Employee2   Product1    ProductGroup1   Quantity    SalesDate
Employee2   Product1    ProductGroup1   Quantity    SalesDate
Employee2   Product2    ProductGroup1   Quantity    SalesDate
Employee2   Product2    ProductGroup1   Quantity    SalesDate 
```

有多个员工、多个产品、多个产品组、多个销售日期。在报告服务中，我有一个矩阵，其中父组是员工，子组是产品，列组是销售日期。我需要对产品进行排名，以便获得前 5 个并将其他产品放在其他列表中。问题是，我必须在员工组内对产品进行排名，并且产品可以有多个销售日期，而我需要评估所有内容。现在在 SQL 中我有：`Rank() Over (partition by DataTable.ProductGroup1, DataTable.Employee Order by Sum(Quantity) desc) as Rank` 但这给了我错误的结果，因为相同的产品具有不同的排名值，因为排名函数在不同的销售日期使用数量进行排名。我应该如何编写 sql，所以它返回所有销售日期的数据，使用所有日期总和的数量的巴士排名？

编辑：
一些数据集来解释我得到什么和我需要什么。

```
//DATA I HAVE
Employee_col    Product_col ProductGroup_col    Quantity_col    SalesDate_col
Employee1       Product1    ProductGroup1       100             2012-01
Employee1       Product1    ProductGroup1       200             2012-02
Employee1       Product2    ProductGroup1       50              2012-01
Employee1       Product2    ProductGroup1       80              2012-02
Employee2       Product1    ProductGroup1       200             2012-01
Employee2       Product1    ProductGroup1       70              2012-02
Employee2       Product2    ProductGroup1       20              2012-01
Employee2       Product2    ProductGroup1       450             2012-02

//RESULT I GET
Employee_col    Product_col ProductGroup_col    Quantity_col    SalesDate_col   Rank_col
Employee1       Product1    ProductGroup1       100             2012-01         2
Employee1       Product1    ProductGroup1       200             2012-02         1
Employee1       Product2    ProductGroup1       50              2012-01         4
Employee1       Product2    ProductGroup1       80              2012-02         3
Employee2       Product1    ProductGroup1       200             2012-01         2
Employee2       Product1    ProductGroup1       70              2012-02         3
Employee2       Product2    ProductGroup1       20              2012-01         4
Employee2       Product2    ProductGroup1       450             2012-02         1

//RESULT I NEED
Employee_col    Product_col ProductGroup_col    Quantity_col    SalesDate_col   Rank_col
Employee1       Product1    ProductGroup1       100             2012-01         1
Employee1       Product1    ProductGroup1       200             2012-02         1
Employee1       Product2    ProductGroup1       50              2012-01         2
Employee1       Product2    ProductGroup1       80              2012-02         2
Employee2       Product1    ProductGroup1       200             2012-01         2
Employee2       Product1    ProductGroup1       70              2012-02         2
Employee2       Product2    ProductGroup1       20              2012-01         1
Employee2       Product2    ProductGroup1       450             2012-02         1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:59:59.853

试试这个查询

```
select
#t.*, salesrank
from #t
inner join 
(
     select Employee, Product, RANK() over (partition by employee order by sq desc) as salesrank
     from
     (select Employee, Product , SUM (Quantity) sq from #t group by Employee, product) v
) v 
    on #t.product = v.product
    and #t.Employee =v.Employee 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-25T16:12:42.970

RANK() over（按 Employee_col、Product_col、SalesDate_col 进行分区，按 Quantity_col ASC 排序）

# cocos2d-iphone - CCLabel 文本对齐和中断模式

> ID：11518356
> 
> 赞同：0
> 
> 时间：2012-07-17T08:04:22.023
> 
> 标签：cocos2d-iphone, alignment, label, line-breaks

我正在尝试在 CCLabelTTF 上使用 hAlignment 和 lineBreakMode，但编译器不喜欢 CCTextAlignmentCenter - CCLineBreakModeWordWrap 也不喜欢 UITextAlignmentCenter - UILineBreakModeWrap。

我不知道如何解决这个问题......

如果你想要一个例子，这里是我的代码：

```
 CCLabelTTF *bubbleLabel1 = [CCLabelTTF labelWithString:@"My string." 
                                                       dimensions:CGSizeMake(200, 120) 
                                                       hAlignment:CCTextAlignmentCenter 
                                                    lineBreakMode:CCLineBreakModeWordWrap 
                                                         fontName:@"EngraversMT" fontSize:14]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:17:34.273

好的，我刚刚找到了解决方法。您必须在模式前加上“k”（表示常量）。

这是相同的示例，但现在可以使用：

```
CCLabelTTF *bubbleLabel1 = [CCLabelTTF labelWithString:@"My string." 
                                                   dimensions:CGSizeMake(200, 120) 
                                                   hAlignment:kCCTextAlignmentCenter 
                                                lineBreakMode:kCCLineBreakModeWordWrap 
                                                     fontName:@"EngraversMT" fontSize:14]; 
```

# android - Android：在 Eclipse 中设置多个部署依赖项 (*.apk)

> ID：11518357
> 
> 赞同：0
> 
> 时间：2012-07-17T08:04:27.083
> 
> 标签：android, eclipse, deployment, project, apk

我有一个依赖于几个远程服务的 Android 测试项目。现在我希望能够一次安装所有依赖的远程服务，以及我的测试项目和正在测试的 Android 项目，比如运行 DLL 时 Visual Studio 中的项目依赖项。

我知道 AndroidManifest 文件中有一个 <instrumentation> 标记，通知 eclipse 先安装我的测试项目。Eclipse 中是否还有其他 AndroidManifest 标记或部署设置来安装我的远程服务项目？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:34:50.023

我想你正在寻找`Right Click on your Project > Properties > Java Build path > Projects > Add`

在这里您可以添加任何依赖库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T05:34:40.593

如果您对多个清单以及使用哪个或哪些清单有问题。我认为您只能在 androidmanifest.xml 中执行类似导入的操作，例如 android:id="@+/myotherproject/id/myOtherandroidManifest:id

我还没有尝试过，但它会使场景有一个清单作为“主”androidmanifest.xml 并将其中的片段导入到子项目中。我从中得到了想法，请参见步骤 4 [http://www.mysamplecode.com/2012/11/android-database-content-provider.html](http://www.mysamplecode.com/2012/11/android-database-content-provider.html)

授予他正在从事一个项目，但他正在将 xml 片段导入其他 xml 文件。我知道我只回答了你的部分问题，但我希望它有所帮助。

# javascript - ajax请求后页面元素和事件销毁

> ID：11518364
> 
> 赞同：0
> 
> 时间：2012-07-17T08:04:40.973
> 
> 标签：javascript, ajax

这是一个普遍的问题。

我使用 ajax 请求重新加载整个页面并将响应插入到 body 标记中。

然后构建所需的元素并使用 mootools 将事件添加到它们。

我想知道在下一次请求后这些元素和事件会发生什么。

**是否有必要手动破坏构造的元素和事件，或者它们在被移除时会破坏？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:29:34.080

经过一番搜索，我发现无法销毁从 JS 创建的元素，如果删除了一个元素，它就会被视为垃圾。收集垃圾由引擎决定，它决定何时！

# java - 请求登录并成功接收回调

> ID：11518366
> 
> 赞同：0
> 
> 时间：2012-07-17T08:04:55.897
> 
> 标签：java, jquery, login, callback

我有两个站点：**一个**有表格，**另一个**有数据库。它们位于不同的域上。 带有表单的**站点一需要****站点二**的数据，他只有在成功登录后才能获得。

我知道如何打开登录窗口，也知道如何从站点二检索数据。但我没有让它工作，所以站点一请求登录，成功后站点二发送数据。

站点 2 使用 Spring 和 Java 服务器页面，而站点 1 使用纯 HTML 相当简单。

这是我到目前为止所拥有的：

```
<html>
<head>
    <title> SomeHtml Form </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    function getParameters(){
        // get Login - **here he should wait until successful login**
        window.open('http://localhost:8080/test/login/start.mvc');

        // // USER IS LOGGING IN
        // after success, receive data
        $.getJSON('http://localhost:8080/test/secure/profile/services/export/getuser.mvc?callback=?',function(res){
            alert('Your name is '+res.lname);
            $('#lastname').val(res.lname);
            $('#firstname').val(res.fname);
        });
    }
    </script>
</head>

<body >

    <h1>Some Form</h1>

    <form action="save.html" id="FormName">
        <div>Lastname: <input type="text" id="lastname"/> </div>
        <div>Firstname: <input type="text" id="firstname"/> </div>
    </form>

    <button onclick="getParameters();">Fill Form</button>
</body>
</html> 
```

希望有人可以提供帮助，我真的坚持这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:00:39.587

好吧，我这样解决了这个问题：

```
<script type="text/javascript">
function getParameters(){
    // login
    window.showModalDialog('http://localhost:8080/test/login/check.mvc','','dialogWidth:500px; dialogHeight:350px; resizable:no; unandorned:yes; status:no; ');
    //get data
    $.getJSON('http://localhost:8080/test/secure/profile/services/export/getuser.mvc?callback=?',function(res){
        alert('Your name is '+res.lname);
        $('#lastname').val(res.lname);
        $('#firstname').val(res.fname);
    });
}
</script> 
```

脚本停止工作，直到 ModalDialog 关闭。如果用户没有在模态对话框中正确登录，回调将返回空 JSON，并且不会填写任何内容。如果用户正确登录，回调获取数据，允许请求。

对于第一步，这非常有效，但如果它变得有点复杂，例如我想让这个人选择我在我的数据库中拥有的电话号码，他想填写表格。我怎么能那样做？

# c# - 如何使用 MySqlParameterCollection.AddRange

> ID：11518377
> 
> 赞同：3
> 
> 时间：2012-07-17T08:05:51.873
> 
> 标签：c#, .net, mysql

我已经安装了连接器/NET 6.5.4。在 VisualStutio IntelliSense 中建议了一个名为 MySqlParameterCollection.AddRange 的方法，但是没有可用的文档，所以我不知道如何使用它。我在[这里](http://dev.mysql.com/doc/refman/5.6/en/connector-net-ref-mysqlclient.html#connector-net-ref-mysqlclient-mysqlparametercollection)搜索过，一无所获。

**如何使用此方法以及文档在哪里？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:14:51.227

因为 MySqlParameterCollection 派生自 DbParameterCollection，所以您可以查看每个其他 ParameterCollection 的示例。例如，可以以这种方式使用 SqlParameterCollection

```
SqlCommand cmd = new SqlCommand(pCommandText, GetConnection());
cmd.Parameters.Clear();
List<SqlParameter> list = new List<SqlParameter>();
list.Add(new SqlParameter("@p1", value1));
list.Add(new SqlParameter("@p2", value2));
list.Add(new SqlParameter("@p3", value3));
cmd.Parameters.AddRange(list.ToArray<SqlParameter>()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T08:13:23.397

你可以这样使用

```
var myp = new MySqlParameterCollection();

myp.Add(new MySqlParameter(parameterName, dbType, size)); 
```

或者

```
MySqlParameter[] myArray = new MySqlParameter[] { new MySqlParameter(parameterName, dbType, size), new MySqlParameter(parameterName, dbType, size));

myp.AddRange(myArray); 
```

现在您可以将它附加到您的 Command 对象

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T08:12:21.917

`AddRange`通常用于添加值的集合。在这种情况下，我猜它期望你通过一个`IEnumerable`of `MySqlParameter`。

例如

```
// List<T> implements IEnumerable
var list = new List<MySqlParameter>();
var paramCol = new MySqlParameterCollection();

// Add parameters to list
// ...

// Assuming param collection set up
paramCol.AddRange(list); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-10T09:52:55.747

这是一种避免必须创建变量来保存参数数组的方法

```
using (SqlCommand cm = new SqlCommand(sql, cn))
{
    cm.Parameters.AddRange(
    new SqlParameter[] 
    {
    new SqlParameter("@TaskID", SqlDbType.Int) { Value = (int)dr["BSTaskID"] },
    new SqlParameter("@DateNow", SqlDbType.DateTime) { Value = DateTime.Now } ,
    new SqlParameter("@ExecDate", SqlDbType.DateTime) { Value = execDate } ,
    new SqlParameter("@UserId", SqlDbType.Int) { Value = (int)dr["BSUserId"] },
    new SqlParameter("@TaskParameters", SqlDbType.VarChar) { Value = parametersXML } 
    });
    cm.ExecuteNonQuery();
} 
```

一举一动

# sql-server-2008 - 如何使用存储过程从不同的表中检索数据？

> ID：11518380
> 
> 赞同：-1
> 
> 时间：2012-07-17T08:06:03.270
> 
> 标签：sql-server-2008, stored-procedures

大家好，我有四个表，三个表有主键，第四个表有所有三个外键..现在我想写一个选择过程

```
my tables look like this

          usertable                                       RoleTable
  -----------------------                        ---------------------------
   UserID|UserName|userEmail|Pwd|RoleID                RoleID|RoleName
     1   |Anil    |akanil@gma|123|1                       1   |Admin

       Projecttable                                    WorkAssignedTable
-----------------------                       ---------------------------
ProjectID|ProName|                                  WorkID|userId|ProjectID|RoleID
     1   |Anil                                            | 
```

现在我想为工作分配表编写一个选择存储过程，我必须从 sertbale 获取 [UserName]，[UserMailId]，从角色 tbale 获取 [rolename]，从 Projecttable 获取 [ProjectName] 任何人都可以帮助如何编写存储过程为了这

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:56:12.800

使用此查询

```
 Select U.UserName, R.RoleName,P.ProName from WorkAssignedTable WA 
inner join usertable U on WA.UserID = U.UserID
inner join RoleTable R on WA.RoleID = R.RoleID
inner join Projecttable P on WA.ProjectID = P.ProjectID 
```

您可以使用左外连接（如果想要 WorkAssignedTable 的整个记录​​）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:46:27.200

我最终这样做了：

```
 select  WorkAssigned.WorkID, usertable.EmployeeName, usertable.EmployeeEmailId,RoleTable.EmplopyeeRole,Projects.projectName,WorkAssigned.[Status] from WorkAssigned  
inner join EmployeeGroup  on RoleTable.GroupId=WorkAssigned.GroupId
inner join Projects  on Projects.ProjectId=WorkAssigned.ProjectId 
inner join EmployeeDetails on  usertable.EmployeId=WorkAssigned.EmployeId 
```

# javascript - 如何使用javascript在文本输入中获取html特殊字符

> ID：11518383
> 
> 赞同：6
> 
> 时间：2012-07-17T08:06:09.510
> 
> 标签：javascript, html, escaping, special-characters, htmlspecialchars

我想向文本字段发送一些 html 特殊字符，然后使用 javascript 将其恢复为原始格式：就像我发送“&pi”一样，它会在文本输入中显示“π”，当我使用 javascript把它拿回来，我应该得到“&pi”，但我只能得到“π”，而不是“&pi”。请帮忙，我的代码如下：

```
<script type="text/javascript"> 
function qpush(a) {
    document.getElementById('input').value += a;
}

function show(a) {
    alert(document.getElementById('input').value);
}
</script>

<input type="text" id="input" />
<input type="button" onclick="qpush('&pi;');" value="&pi;" />
<input type="button" onclick="show()" value="go" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:45:40.663

根据您的需要，您可以执行以下 3 个选项之一：

1.  使用 javascript 转义和 unescape 函数：

    var escaped = escape('π') // escaped = "%u03C0" 哪个 unescape 会变回 π

2.  如果您有可用的 jQuery，它的 html 方法可能会成功：

    $('输入').val().html()

3.  这是一个技巧，但会起作用：以您希望在输入元素的“数据-”属性上返回的值的方式保存值的副本，这将在 html5 中验证并且不会在其他文档类型中中断。

    document.getElementById('input').setAttribute('data-originalValue', '&pi')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:11:39.143

该`value`属性将为您提供文本，而不是 HTML。

~~您可以尝试`getAttribute('value')`，但由于`&pi;`和`π`在 HTML 中完全相同，因此浏览器也完全可以免费返回`π`。~~

~~一旦 HTML 被转换为 DOM，就无法访​​问原始 HTML（除非使用 XHR 再次下载 HTML 并自己解析它的原始文本）。~~

如果您希望数据是，`"&pi;"`那么它的 HTML 必须是`&amp;pi;`.

如果你想要那个和按钮上的渲染，`π`那么你需要：

```
<button type="button" value="&amp;pi;">π</button> 
```

（请记住旧 IE 对按钮元素的各种错误）

当然，这将`&pi;`在您将值复制到文本输入时显示。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T08:22:09.087

使用它来替换所有出现的字符：

```
document.getElementById('input').value.replace(/π/g,"&pi;"); 
```

# excel-formula - VLOOKUP 执行某个公式

> ID：11518384
> 
> 赞同：0
> 
> 时间：2012-07-17T08:06:15.527
> 
> 标签：excel-formula, excel-2003, vlookup, office-2003

我想知道是否可以使用 vlookup 执行公式？
像：

```
frequency       date          next date
   day       17/07/2012       18/07/2012       => date +1
  Week       17/07/2012       24/07/2012       => date +7
   Not       17/07/2012           NA           => "NA" 
```

列表：

```
Not     NA
day     1     or date+1
week    7     or date+7
month   31    or date+31
year.   365   or date+365 
```

目的是我试图计算第二天查看用户用作验证的内容。将该列表用作验证，因此用户只能使用这些值。
我试过用谷歌搜索它，但我不知道如何准确地指定问题......
我希望它清楚我所追求的，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:04:07.437

`VLOOKUP`是要走的路

假设你有你的清单`A1:B5`，并存储号码，那么你的公式将是
`=YourDate+VLOOKUP(Frequency,$A$1:$B$5,2,False)`

vlookup 查看您的列表，找到频率，并在同一行的第二列中返回值。这`False`意味着它正在寻找精确匹配

# c# - PLS-00103：在预期以下情况之一时遇到符号“”：验证 ForeignKey 实体后 LightSwitch 中的错误

> ID：11518385
> 
> 赞同：1
> 
> 时间：2012-07-17T08:06:15.913
> 
> 标签：c#, validation, foreign-keys, odp.net, visual-studio-lightswitch

我再次遇到了视觉工作室灯开关的问题。现在是关于自定义验证。我有一个实体，它有一个外键引用另一个实体： ![在此处输入图像描述](../Images/e643d81ba80d8bcd371f1093fa165d02.png)

RouteItem 包含 FacilityItem 的外键，如下所示：

![在此处输入图像描述](../Images/3003d8694197375ae5f0d901380ba7fb.png)

我现在要做的是验证 RouteItem 中的 ROUTENAME。我必须确保所选设施中不存在 routname。

我的验证代码如下所示：

```
 IEnumerable<RouteItem> items = this.DataWorkspace.dsMESOracle.dtRoutes.GetQuery().Execute();

        if (this.Details.EntityState == EntityState.Added)
        {
            items = items.Where(e => e.ROUTENAME == ROUTENAME && e.MES_FACILITY == MES_FACILITY);
            if (items.Count() > 0)
            {
                results.AddPropertyError(ValidationMsgRes.ROUTES_ROUTENAME_ALREADY_EXISTS);

            }
        }
        else if (this.Details.EntityState == EntityState.Modified)
        {
            //Ignore the current entity if its modified otherwise it will always get count > 0
            items = items.Where(e => e.ROUTENAME == ROUTENAME && e.MES_FACILITY == MES_FACILITY && e != this);
            if (items.Count() > 0)
            {
                results.AddPropertyError(ValidationMsgRes.ROUTES_ROUTENAME_ALREADY_EXISTS);

            }
        } 
```

到目前为止，验证逻辑工作得很好——它做了它应该做的事情。主要问题是，`this.MES_FACILITY`如果 lightswitch 尝试保存/更新更改，则访问导致以下错误：

![在此处输入图像描述](../Images/81127d0bc824bf0c288745617cfc4598.png)

`acilityItem temp = this.MES_FACILITY;`如果我只写验证实现，也会发生错误。

如果我删除所有引用/访问`this.MES_FACILITY`验证实现中的所有内容，一切都会完美。

验证是真还是假也无关紧要。问题总是出现！PS：其他实体和外键也会出现问题，这不是 RouteItem - FacilityItem 组合的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:35:01.970

找到了解决此错误/问题的方法：

[http://msdn.microsoft.com/en-us/library/bb738618.aspx](http://msdn.microsoft.com/en-us/library/bb738618.aspx) http://knowledgebase.progress.com/articles/Article/000028868

解决方法 1\. 清理整个解决方案 2\. 在整个解决方案/项目文件夹中搜索 ConcurrencyMode="Fixed" 并删除它 3\. 重建解决方案 4\. 开心！

它对我有用:)

# javascript - 多个自定义标记上的谷歌地图 api v3 信息窗口中的动态内容

> ID：11518388
> 
> 赞同：3
> 
> 时间：2012-07-17T08:06:32.860
> 
> 标签：javascript, google-maps, google-maps-api-3

我有下面的 js，它通过一组自定义标记实现了一个谷歌地图。我需要每个标记都有不同的信息窗口，因此当您单击标记时，您会获得相关的内容。目前它没有打开信息窗口，也没有在控制台中给我一个错误

```
infowindow = new google.maps.InfoWindow();

    for(var i=0; i<google_map_item.length; i++)
    {
        latlon = new google.maps.LatLng(google_map_item[i].lat, google_map_item[i].lon)
        bounds.extend(latlon);
        var iconcolor = google_map_item[i].iconColor;
        marker = new google.maps.Marker({
            map: map,
            position: latlon,
            icon: "https://chart.googleapis.com/chart?chst=d_map_pin_letter_withshadow&chld=" + (i + 1) + "|"+iconcolor+"|000000",
            type: 'flat',
            icon_color: '#ff0000', 
            label_color: '#ffffff', 
            width: '20', 
            height: '20', 
            label_size: '11',
                            clickable: true
        });

                    google.maps.event.addListener(marker, 'click', function() {
                        //marker.info.open(map, this);
                        infowindow.setContent(this.latlon);
                        infowindow.open(map, this);
                    });

        map.fitBounds(bounds);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-17T05:28:55.927

```
var marker3 = new google.maps.Marker({
          map: map,                                                        
          icon: 'miniMarker.png',
          info: destArr[i][9],
          position: new google.maps.LatLng(destArr[i][7], destArr[i][8])
});
var infowindow3 = new google.maps.InfoWindow();
google.maps.event.addListener(marker3, 'mouseover', function () {
        infowindow3.setContent(this.info);                              
        infowindow3.open(map, this);                        
}); 
```

具有 20 多个标记和信息窗口的工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:31:00.023

如this similar question中所述，标记数组中的引用不正确

[谷歌地图 - 多个标记 - 1 InfoWindow 问题](https://stackoverflow.com/questions/7402667/google-maps-multiple-markers-1-infowindow-problem?rq=1)

# ruby - 如何防止收集对 Ruby 对象的本地引用

> ID：11518389
> 
> 赞同：1
> 
> 时间：2012-07-17T08:06:32.733
> 
> 标签：ruby, ruby-c-extension

我的情况是，我必须在 C++ 代码中从 ruby​​ 线程而不是 ruby​​ 线程中构建一些更大的 ruby​​ 数据结构。

在堆栈上创建的 ruby​​ 对象是否必须经过特殊处理才能不被 ruby​​ GC 收集？如果对象是在 ruby​​ 或非 ruby​​ 线程上创建的，有什么区别吗？

例子：

```
VALUE h = rb_hash_new(); 
VALUE k = rb_str_new2( "foo" );
VALUE v = rb_str_new2( "foo" );
rb_hash_aset( h, k, v ); 
```

我希望每个函数调用都可以分配内存，从而调用垃圾收集器。我是否必须特别注意保护 h、k 和 v 不被收集，直到它们可以通过任何全局变量访问？也许是这样的：

```
VALUE h = Qnil;
VALUE k = Qnil;
VALUE v = Qnil;
rb_gc_register_address( &h ); 
rb_gc_register_address( &k ); 
rb_gc_register_address( &v ); 

VALUE k = rb_str_new2( "foo" );
VALUE v = rb_str_new2( "foo" );

rb_hash_aset( h, k, v );

rb_gc_unregister_address( &k ); 
rb_gc_unregister_address( &v ); 
```

第二个版本要复杂得多，所以我想避免它，如果有任何保证 GC 扫描所有线程以查找可能的引用。

编辑：我刚刚意识到，我可能不应该使用 rb_gc 之类的函数...来自不包含 gvl 的非 ruby​​ 线程。因此，保证 GC 将标记来自 ruby​​ 堆栈的引用就足够了。

TIA 托尔斯滕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:45:51.323

据我了解，GC 会扫描您的所有堆栈以查找任何看起来像指向 ruby​​ 对象的指针的内容，并将以这种方式找到的任何内容视为正在使用的对象。

据我所知，不支持在非 ruby​​ 线程上创建 ruby​​ 对象

# flv - 如何从 .flv 文件创建 .meta 文件？

> ID：11518393
> 
> 赞同：1
> 
> 时间：2012-07-17T08:06:51.810
> 
> 标签：flv, red5, streaming-flv-video

我安装的red5服务器是用来播放视频的。

在 oflademo 页面，我看到每个文件 .flv 都有一个文件 .meta 来播放视频，即 .meta 文件帮助暂停、播放、快速滚动视频到下一步……现在，我将新文件 .flv 上传到 /usr/local /red5/webapps/oflaDemo/streams/ 播放。我想创建一个类似的 .meta 文件。

如何从 .flv 文件创建 .meta 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:04:03.563

您在他们的 wiki 中看到过这个工具吗？

[http://trac.red5.org/wiki/Tools/MetadataGenerator](http://trac.red5.org/wiki/Tools/MetadataGenerator)

# android - 具有自动同步功能的 Android 应用

> ID：11518394
> 
> 赞同：0
> 
> 时间：2012-07-17T08:06:52.570
> 
> 标签：android, automation

最近，我开始开发一个新的应用程序，这个应用程序需要不断更新。我知道我可以通过警报来做到这一点，但我认为更好的方法是将我的应用程序添加到 android 自动同步服务（例如添加了 gmail 应用程序和 whatsapp 的服务）。

我一直在寻找该主题，但找不到有关如何与该服务交互的任何答案。谁能给我一个如何完成它的例子？

非常感谢，

维芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:25:53.227

也许这可以帮助你[http://developer.android.com/training/cloudsync/index.html](http://developer.android.com/training/cloudsync/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:45:41.673

查看 SDK 示例下的 SampleSyncAdapter 代码。它将位于类似的目录中；

> C:/程序文件/Android/android-sdk/samples/android-10/SampleSyncAdapter/

# uml - 将构造型应用于属性作为关联结束抛出 IllegalArgumentException

> ID：11518396
> 
> 赞同：0
> 
> 时间：2012-07-17T08:06:53.947
> 
> 标签：uml, emf

[我在http://www.eclipse.org/forums/index.php/t/367608/](http://www.eclipse.org/forums/index.php/t/367608/)上问过同样的问题

我想将针对 UML 属性定义的构造型应用于关联中使用的属性。我遇到的问题是，在将构造型用于关联相关属性的情况下会引发 IllegalArgumentException。如果我将构造型应用于在类中用作属性的属性，一切都很好。

这是异常抛出部分的代码片段：

```
helper def: getStereotype(name: String): UML!Stereotype =
UML!Stereotype.allInstancesFrom('PRO') -> select(p | p.name = name) -> first();
-- ...
p1: UML!Property(

    upper <-a.associationEnds.first().conformance.upperBound,
    lower <- a.associationEnds.first().conformance.lowerBound,
    name <- a.associationEnds.first().name,
    type <- firstMemberType,
    opposite <- p2,
    isComposite <- true
),

p2: UML!Property(

        upper <-a.associationEnds.last().conformance.upperBound,
        lower <- a.associationEnds.last().conformance.lowerBound,
        name <- a.associationEnds.last().name,
        type <- secondMemberType,
        opposite <- p1
    ),

as:UML!Association(
        name <- a.name,
        ownedEnd <- Set{p2}
        navigableOwnedEnd <- Set{p1}
        )
    do {
p1.applyStereotype(thisModule.getStereotype('xsdElement')); -- here an exception is thrown: see below
} 
```

引发以下 IllegalArgumentException。

```
Here appear some other resulting stacktraces.
......

Caused by: java.lang.IllegalArgumentException: org.eclipse.uml2.uml.internal.impl.StereotypeImpl@21ee05 (name: xsdElement, visibility: <unset>) (isLeaf: false, isAbstract: false) (isActive: false)
    at org.eclipse.uml2.uml.internal.operations.ElementOperations.applyStereotype(ElementOperations.java:1413)
    at org.eclipse.uml2.uml.internal.impl.ElementImpl.applyStereotype(ElementImpl.java:510)
    ... 18 more 
```

我用过`UML=http://www.eclipse.org/uml2/3.0.0/UML`。

似乎 p1 不再是一个属性。任何人的想法？会很好。谢谢，马丁

**编辑1：**

经过一番调试，我发现流程中方法的调用首先是成功的。在调用方法 finalizeModel 之前，一切都很好。当调用 ATL UML2ModelAdapter 中的方法 finalizeModel 时，会抛出堆栈跟踪：

```
Java Stack:
org.eclipse.m2m.atl.engine.emfvm.VMException
    at org.eclipse.m2m.atl.engine.emfvm.adapter.UML2ModelAdapter.finalizeModel(UML2ModelAdapter.java:51)
    at org.eclipse.m2m.atl.engine.emfvm.lib.ExecEnv.terminated(ExecEnv.java:2557)
    at org.eclipse.m2m.atl.engine.emfvm.ASM.run(ASM.java:210)
    at org.eclipse.m2m.atl.engine.emfvm.launch.EMFVMLauncher.internalLaunch(EMFVMLauncher.java:170)
    at org.eclipse.m2m.atl.engine.emfvm.launch.EMFVMUILauncher.launch(EMFVMUILauncher.java:46)
    at org.eclipse.m2m.atl.core.service.LauncherService.launch(LauncherService.java:136)
    at org.eclipse.m2m.atl.core.ui.launch.AtlLaunchConfigurationDelegate.launchOrDebug(AtlLaunchConfigurationDelegate.java:300)
    at org.eclipse.m2m.atl.core.ui.launch.AtlLaunchConfigurationDelegate.launch(AtlLaunchConfigurationDelegate.java:237)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:937)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1141)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.m2m.atl.engine.emfvm.adapter.UML2ModelAdapter.applyDelayedInvocations(UML2ModelAdapter.java:136)
    at org.eclipse.m2m.atl.engine.emfvm.adapter.UML2ModelAdapter.finalizeModel(UML2ModelAdapter.java:49)
    ... 12 more
Caused by: java.lang.IllegalArgumentException: org.eclipse.uml2.uml.internal.impl.StereotypeImpl@580b29 (name: xsdElement, visibility: <unset>) (isLeaf: false, isAbstract: false) (isActive: false)
    at org.eclipse.uml2.uml.internal.operations.ElementOperations.applyStereotype(ElementOperations.java:1413)
    at org.eclipse.uml2.uml.internal.impl.ElementImpl.applyStereotype(ElementImpl.java:510)
    ... 17 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:12:01.073

我已经解决了我的问题。

问题是，我已将配置文件应用于从属包而不是根包。我已将关联添加到根包中。因此，每次尝试将刻板印象应用于根包都失败了，因为它不知道我的个人资料。

因此，只有当属性是关联的一部分时，属性相关构造型的应用才会崩溃。表示类属性的属性位于从属包中。

我还在以下位置发布了答案：http: [//www.eclipse.org/forums/index.php/t/367608/](http://www.eclipse.org/forums/index.php/t/367608/)

# php - Spreadsheet_Excel_Writer PEAR PHP - 使用垃圾字符生成

> ID：11518400
> 
> 赞同：0
> 
> 时间：2012-07-17T08:07:00.917
> 
> 标签：php, yii, pear

我正在尝试生成 excel 的简单代码。但它带有以下输出。任何帮助。

```
 // Creating a workbook
                $workbook = new Spreadsheet_Excel_Writer();

                // sending HTTP headers
                $workbook->send('test.xls');

                // Creating a worksheet
                $worksheet =& $workbook->addWorksheet('My first worksheet');

                // The actual data
                $worksheet->write(0, 0, 'Name');
                $worksheet->write(0, 1, 'Age');

                // my database res

                // Let's send the file
                $workbook->close(); 
```

> dXXà?à? NameAge> ¶ Root Entryÿÿÿÿÿÿÿÿ ÀF€*ÃûdÍ€*ÃûdÍ@Book ÿÿÿÿÿÿÿÿÿÿÿÿ ÀF9þÿÿÿþÿÿÿþÿÿÿýÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:11:37.023

您的脚本在文件本身之前回显数据，例如开头的字符串“OUPUT”和结尾的“Excel created”

创建要发送到浏览器的文件时，您不得回显**任何其他输出，否则它会包含在文件中。**

您认为的垃圾字符是实际的 BIFF Excel 文件内容。Excel 认为有效内容已被您的垃圾输出破坏。

当然，您还需要发送必要的标头来告诉浏览器您发送的内容是 Excel 文件，而不是它期望的 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T08:59:15.507

添加以下代码：

```
ob_end_clean();
ob_start(); 
```

在下载代码之前。

# .net - GC 中断和 TPL

> ID：11518405
> 
> 赞同：9
> 
> 时间：2012-07-17T08:07:27.593
> 
> 标签：.net, garbage-collection, task-parallel-library

我有 WCF 服务。在服务工作期间，它需要调用两个 Web 服务。所以有类似这样的代码：

```
var task1 = Task.Factory.StartNew(() => _service1.Run(query));
var task2 = Task.Factory.StartNew(() => _service2.Run(query));
Task.WaitAll(new[] { task1 , task2 }); 
```

大多数情况下这工作正常，但偶尔我会看到执行时间出现峰值，第一个任务甚至需要几秒钟才能开始。看着 perfmon，我意识到这正是 GC 发生的时候。显然，GC 的优先级高于运行我的任务。这是不可接受的，因为延迟对我来说非常重要，而且我希望 GC 在请求之间而不是在请求中间发生。

我试图以不同的方式解决这个问题，我没有使用自己的任务，而是使用了[WebClient.DownloadStringTask](https://stackoverflow.com/questions/2705251/can-webclient-download-more-than-one-string-at-the-same-time-c)。

```
return webClient.DownloadStringTask(urlWithParmeters).ContinueWith(t => ProcessResponse(clientQuery, t.Result),
                                                                           TaskContinuationOptions.ExecuteSynchronously); 
```

这没有帮助；GC 现在在任务开始之后运行，但在继续之前。同样，我猜它认为系统现在处于空闲状态，所以现在是开始 GC 的好时机。只是，我无法承受延迟。

使用 TaskCreationOptions.LongRunning 会导致调度程序使用非线程池线程，这似乎可以解决这个问题，但我不想创建这么多新线程 - 这段代码会运行很多（每个请求多次）。

克服这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:00:17.963

让我先清理一下在这个页面上看到的一些误解：

*   空闲时不会发生 GC。它在由于分配失败（新）、GC.Collect 或操作系统内存压力而触发时发生
*   GC 可以停止应用程序线程。它不会同时运行（至少在一定时间内）
*   “% time in GC”是一个不会在 GC 之间更改的计数器，这意味着您可能会看到一个陈旧的值
*   异步代码对 GC 问题没有帮助。事实上，它会产生*更多*的垃圾（任务、IAsyncResult 和可能的其他东西）
*   在专用线程上运行代码不会阻止它们被停止

如何解决这个问题？

1.  产生更少的垃圾。附加一个内存分析器（JetBrains 易于使用）并查看产生垃圾的内容以及堆上的内容
2.  减少堆大小以减少暂停时间（3GB 堆可能是由于一些缓存？也许缩小缓存？）
3.  使用同一个应用程序启动多个 ASP.NET 站点，连接 GC 通知以感知 GC 的到来，并在它们具有 GC 时使一些 IIS 站点脱离负载平衡轮换（[http://blogs.msdn.com/b /jclauzel/archive/2009/12/10/gc-notifications-asp-net-server-workloads.aspx?Redirected=true](http://blogs.msdn.com/b/jclauzel/archive/2009/12/10/gc-notifications-asp-net-server-workloads.aspx?Redirected=true) )

您会注意到没有简单的解决方法。我不知道，但如果问题是由 GC 引起的，上述之一将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T23:51:25.693

我知道你的问题是关于 GC 的，但我想先谈谈异步实现，然后看看你是否还会遇到同样的问题。

离开初始实现的示例代码，您现在将浪费三个 CPU 线程等待 I/O：

*   浪费的第一个线程是执行调用的原始 WCF I/O 线程。当子任务仍然未完成时，它将被 Task.WaitAll 阻止。
*   被浪费的另外两个线程是您用来执行对 Service1 和 Service2 的调用的线程池线程

一直以来，虽然 Service1 和 Service2 的 I/O 非常出色，但您浪费的三个 CPU 线程无法用于执行其他工作，并且 GC 必须在它们周围小心翼翼。

因此，我最初的建议是将您的 WCF 方法本身更改为使用 WCF 运行时支持的异步编程模型 (APM) 模式。这通过允许调用您的服务实现的原始 WCF I/O 线程立即返回其池以便能够为其他传入请求提供服务，从而解决了第一个浪费线程的问题。完成此操作后，您接下来要从客户端的角度对 Service1 和 Service2 进行异步调用。这将涉及以下两件事之一：

1.  生成其合约接口的异步版本，同样使用 WCF 在客户端模型中支持的 APM BeginXXX/EndXXX。
2.  如果这些是您正在与之交谈的简单 REST 服务，那么您还有以下其他异步选择：
    *   `WebClient::DownloadStringAsync`实现（`WebClient`不是我个人最喜欢的 API）
    *   `HttpWebRequest::BeginGetResponse`+ `HttpWebResponse::BeginGetResponseStream`+`HttpWebRequest::BeginRead`
    *   使用新的 Web API 走在前沿`HttpClient`

将所有这些放在一起，当您在服务中等待来自 Service1 和 Service2 的响应时，不会有浪费的线程。假设您采用 WCF 客户端路由，代码将如下所示：

```
// Represents a common contract that you talk to your remote instances through
[ServiceContract]
public interface IRemoteService
{
   [OperationContract(AsyncPattern=true)]
   public IAsyncResult BeginRunQuery(string query, AsyncCallback asyncCallback, object asyncState);
   public string EndRunQuery(IAsyncResult asyncResult);

}

// Represents your service's contract to others
[ServiceContract]
public interface IMyService
{
   [OperationContract(AsyncPattern=true)]
   public IAsyncResult BeginMyMethod(string someParam, AsyncCallback asyncCallback, object asyncState);
   public string EndMyMethod(IAsyncResult asyncResult);
}

// This would be your service implementation
public MyService : IMyService
{
    public IAsyncResult BeginMyMethod(string someParam, AsyncCallback asyncCallback, object asyncState)
    {
        // ... get your service instances from somewhere ...
        IRemoteService service1 = ...;
        IRemoteService service2 = ...;

        // ... build up your query ...
        string query = ...;

        Task<string> service1RunQueryTask = Task<string>.Factory.FromAsync(
            service1.BeginRunQuery,
            service1.EndRunQuery,
            query,
            null);

        // NOTE: obviously if you are really doing exactly this kind of thing I would refactor this code to not be redundant
        Task<string> service2RunQueryTask = Task<string>.Factory.FromAsync(
            service2.BeginRunQuery,
            service2.EndRunQuery,
            query,
            null);

        // Need to use a TCS here to retain the async state when working with the APM pattern
        // and using a continuation based workflow in TPL as ContinueWith 
        // doesn't allow propagation of async state
        TaskCompletionSource<object> taskCompletionSource = new TaskCompletionSource<object>(asyncState);

        // Now we need to wait for both calls to complete before we process the results
        Task aggregateResultsTask = Task.ContinueWhenAll(
             new [] { service1RunQueryTask, service2RunQueryTask })
             runQueryAntecedents =>
             {
                 // ... handle exceptions, combine results, yadda yadda ...
                 try
                 {
                     string finalResult = ...;

                     // Propagate the result to the TCS
                     taskCompletionSoruce.SetResult(finalResult);
                 }
                 catch(Exception exception)
                 {
                     // Propagate the exception to the TCS 
                     // NOTE: there are many ways to handle exceptions in antecedent tasks that may be better than this, just keeping it simple for sample purposes
                     taskCompletionSource.SetException(exception);
                 }
             });

         // Need to play nice with the APM pattern of WCF and tell it when we're done
         if(asyncCallback != null)
         {
             taskCompletionSource.Task.ContinueWith(t => asyncCallback(t));
         }

         // Return the task continuation source task to WCF runtime as the IAsyncResult it will work with and ultimately pass back to use in our EndMyMethod
         return taskCompletionSource.Task;
    }

    public string EndMyMethod(IAsyncResult asyncResult)
    {
        // Cast back to our Task<string> and propagate the result or any exceptions that might have occurred
        return ((Task<string>)asyncResult).Result;
    }
} 
```

一旦一切就绪，从技术上讲，当 Service1 和 Service2 的 I/O 非常出色时，您将不会执行任何 CPU 线程。在这样做的过程中，GC 没有线程，甚至大部分时间都不必担心中断。现在唯一发生实际 CPU 工作的时间是最初的工作调度，然后继续在 ContinueWhenAll 上处理任何异常并处理结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:37:59.983

我建议您重新考虑德鲁的回答。完全异步的系统将是理想的。

但是如果你想改变更少的代码，你可以使用`FromAsync`代替`StartNew`（这需要异步代理`Service1`和`Service2`）：

```
var task1 = Task.Factory.FromAsync(_service1.BeginRun, _service1.EndRun, query, null);
var task2 = Task.Factory.FromAsync(_service2.BeginRun, _service2.EndRun, query, null);
Task.WaitAll(task1, task2); 
```

这将每次使用的线程池线程数`WaitAll`从 3 减少到 1。您仍然不是理想的 (0)，但您应该会看到改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:32:27.343

当您执行许多 Web 请求时，您会将大量临时对象加载到托管堆中。当堆确实增长时，GC 会在分配新的 GC 段之前尝试释放一些内存。这是您在工作时看到 GC 发生的主要原因。

现在到了有趣的部分：您的 GC 堆已经是 3 GB，并且您在 GC 堆上还有一些带有**短期对象的 Web 请求。**Full GC 将花费大量时间来遍历您肯定很复杂的对象图（全部 3 GB）以查找死对象。在如此高吞吐量的情况下，您将通过网络为每个请求获取大量临时数据，您将强制执行大量 GC。

此时您已被 GC 绑定：应用程序性能不再受您的控制。您可以通过仔细设计数据结构和访问模式来正常解决此问题，但 GC 时间将在很大程度上（我猜 > 95%）支配您的应用程序性能。

没有简单的方法可以解决这个问题。如果它是一个大型复杂系统，通过检查整体内存消耗来使 GC 段更小可能很难。另一种方法可能是产生一个额外的进程（不是新的 AppDomain，因为 GC 根本不知道 AppDomains）并在你的 web 请求中创建你的短期对象。然后，如果您可以在您的小进程中计算出有意义的响应，然后由您的大服务器进程使用，那么您**就可以**摆脱这种混乱。如果您的流程确实创建了与您的原始 Web 请求相同数量的临时数据，那么您又回到了原点，您什么也得不到。

它可能有助于重用来自先前 Web 请求的对象并保持对象池准备好减少分配的数量。

如果您的进程堆中有很多相同的字符串，那么如果它们永远不会被释放，那么实习它们可能会有所帮助。这有助于简化您的对象图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T04:52:19.510

您可能想尝试一下，但它可能会稍微解决问题：

```
try
{
    GCSettings.LatencyMode = GCLatencyMode.LowLatency;

    // Generation 2 garbage collection is now
    // deferred, except in extremely low-memory situations

    var task1 = Task.Factory.StartNew(() => _service1.Run(query));
    var task2 = Task.Factory.StartNew(() => _service2.Run(query));
    Task.WaitAll(new[] { task1 , task2 });
}
finally
{
    // ALWAYS set the latency mode back
    GCSettings.LatencyMode = oldMode;
} 
```

应归功于：[https ://stackoverflow.com/users/153498/mgbowen](https://stackoverflow.com/users/153498/mgbowen)

# php - php ftp_put 不创建文件

> ID：11518419
> 
> 赞同：4
> 
> 时间：2012-07-17T08:08:12.550
> 
> 标签：php, ftp

我正在尝试将图像文件从本地 PC 上传到远程服务器。图片来自一个简单的 html 输入（类型=文件），文件数组包含这些：

```
Array ( [name] => image42.jpg [type] => image/jpeg [tmp_name] => C:\wamp\tmp\phpBB52.tmp [error] => 0 [size] => 6051 ) 
```

如您所见，我的本地 PC 使用的是 Windows。尝试上传图像文件的代码如下：

```
$conn_id = ftp_connect($ftp_server, $ftp_port);

$login_result = ftp_login($conn_id, $ftp_username, $ftp_password);

if(!ftp_chdir($conn_id, $folder_path))
{
    $create_folder = ftp_mkdir($conn_id, $folder_path);
    ftp_chmod($conn_id, 0777, $folder_path);
} 
```

这完美地连接到服务器，如果它不存在，甚至创建一个文件夹。然后当我们进入上传部分时，

```
ftp_pasv($conn_id, true);

// upload a file
$upload = ftp_put($conn_id, $new_dir, $file_dir, FTP_BINARY); 
```

变量`$upload`得到`false`.

`$file_dir`包含`C:\wamp\tmp\phpBB52.tmp`（即文件的`tmp_name`）。

`$new_dir`包含带有图像路径的远程目录：`img.example.com/data/images/blabla.jpg`

此外，返回的错误是：

```
Warning: ftp_put() [<a href='function.ftp-put'>function.ftp-put</a>]: Could not create file. in C:\wamp\www\example\example.php on line 95 
```

我在 Google 和 StackOverflow 上都没有发现任何有用的东西。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:58:26.800

这对我有用。可能是服务器的根目录与 FTP 的根目录不同。

尝试使用另一个程序登录您的 FTP 帐户并检查 root。例如，我的 FTP 根目录是`/public_html/`，但服务器是`/home/cms/public_html/`. 因此，如果我的文件的远程目标设置为`/home/cms/public_html/images/82.jpg`仅将其更改为`/public_html/images/82.jpg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T15:50:41.090

我的脚本试图定期将文件上传到 FTP 位置（覆盖以前上传的同名文件）并且工作正常。

它现在开始显示此错误，我确实从 FTP 位置删除了文件并使用脚本再次上传，错误消失了。

该文件必须已被 FTP 位置中的任何其他应用程序锁定，以防止其被覆盖，或者它可能已损坏。

# php - 如何从表单按钮调用 PHP 函数

> ID：11518422
> 
> 赞同：1
> 
> 时间：2012-07-17T08:08:45.827
> 
> 标签：php

我有一个`index.html`看起来像这样的表格：

```
<form name="form" method="post" action="send.php">
  .
  .
  .
  . 
```

在我的内部我`send.php`必须使用函数，`function generatekey ()`并且，如何从表单中的属性`function postData()`调用`postData()`函数？`action`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:12:53.990

你也可以`action`这样：

```
<form name="form" method="post" action="send.php?postData"> 
```

在你的`send.php`你可以这样做：

```
if(isset($_GET['postData'])){
   postData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:11:55.253

在您的表单中添加一个独特的隐藏字段，例如：

```
<input type="hidden" name="action" value="postData" /> 
```

发送.php

```
<?php

    function generatekey () {
      // action
    }

    function postData() {
      // action
    }

    if ( $_POST[ 'action' ] == 'postData' ) {
        postData();
    }

?> 
```

或者阅读您的提交值，如果它是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:13:19.293

基本上没有“简单”的方法可以做到这一点，您需要在脚本中编写一些代码来决定调用什么函数以及何时调用，例如：

```
if($_POST['submit'){
   postData();
} 
```

另一种选择是使用众多 MVC 框架之一，例如[Codeigniter](http://codeigniter.com/)或[laravel](http://laravel.com/)。

# mysql - 如何在 MySQL 中获取和存储帖子的日期和时间？

> ID：11518431
> 
> 赞同：0
> 
> 时间：2012-07-17T08:09:08.973
> 
> 标签：mysql

我目前正在做一个程序，当用户发布或订购商品时，日期和时间将发布在 html 中并存储在 MySQL 表中。截至目前，我尝试在我的 HTML 文件中显示当前日期和时间，但它没有存储在我的 MySQL 表中。谁能帮我？是的，我是 PHP 和 MySQL 编程的新手。:p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:20:28.667

让我们试试这个。，

```
Alter your table that the field ord_date to current_timestamp. 
```

它将插入当前服务器时间到表中，

或者

如果要选择当前时间，请使用查询

```
select now(). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:15:04.363

为此，在您的表中创建一个列并采用日期类型（如 datetime）并在显示它时检索该列值。

# c# - DataGridView autoComplete 组合框列不保留初始单元格离开时的值

> ID：11518432
> 
> 赞同：4
> 
> 时间：2012-07-17T08:09:24.123
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn, datagridviewcomboboxcell

我有一个带有 autoComplete 组合框列的绑定 dataGridView ，并且自动完成功能正在工作，只是观察到一种令人讨厌的行为。

当我第一次在自动完成单元格中键入文本并使用 tabKey 移动到下一个单元格时，我的选择不会保留，我选择的内容被清除并且自动完成单元格保留为空。如果 ii 立即使用左箭头键返回到该自动完成单元格并输入文本，我选择的任何内容都会保留，没有任何问题。

所以，我遇到的问题是让单元格保留我的第一个初始选择，现在唯一的解决方法是 Tab 到下一个单元格，然后返回到这个有问题的自动完成组合框单元格并全部输入。在这一点上，它起作用了。

是否有一些事件我应该处理以在单元格离开时提交我选择的文本？

代码：

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (e.Control is ComboBox)
        {
                ((ComboBox)e.Control).DropDownStyle = ComboBoxStyle.DropDown;
                ((ComboBox)e.Control).AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
                ((ComboBox)e.Control).AutoCompleteSource = AutoCompleteSource.ListItems;
        }
    } 
```

编辑：在下面的 CellLeave 上，即使我做出了选择，值也会返回为 null。

```
 private void dataGridView1_CellLeave(object sender, DataGridViewCellEventArgs e)
    {
        var Row = this.dataGridView1.CurrentRow.Index;
        string value = this.dataGridView1["itemID", Row].Value.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:34:06.550

处理 CurrentCellDirtyStateChanged 事件解决了这个问题，但我希望它不会导致其他问题！

```
private void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T10:26:08.660

非常简单，这可以通过调用来完成***`notifycurrentcelldirty event on editingcontrol showing event.`***

```
Private Sub dataGridView1_EditingControlShowing(sender As Object, 
                         e As Forms.DataGridViewEditingControlShowingEventArgs) 
                         Handles Me.EditingControlShowing
            dataGridView1.NotifyCurrentCellDirty(True)
End Sub

Private Sub dataGridView1_CurrentCellDirtyStateChanged(sender As Object, e As EventArgs) Handles Me.CurrentCellDirtyStateChanged
            If IsCurrentCellDirty = True Then
                CommitEdit(Forms.DataGridViewDataErrorContexts.Commit)
            End If
End Sub 
```

# c# - 需要有关在此后台工作人员上实施取消的想法

> ID：11518439
> 
> 赞同：0
> 
> 时间：2012-07-17T08:09:41.340
> 
> 标签：c#, .net, winforms, multithreading, backgroundworker

我有一个按钮，它启动程序和称为 DDC 的机器之间的连接。为了防止在建立连接时UI线程被锁定，我自然而然地创建了一个backgroundworker来处理这个工作。

问题是这样的：如果客户端没有从 DDC 得到任何响应，客户端必须等待 30 秒才能给出超时。更准确地说，线程在“GetLogicStatusListResponse result = ddcdao.GetLogicStatusList();”行停止执行。

如果单击程序上的按钮，我希望用户能够取消操作，但据我所知，没有办法中止 backgroundworker 并且取消不会真正帮助我，因为线程被锁定在代码甚至可以检查 cancelpending 是否为真之前 30 秒。

我想听听一些正确实施取消功能的想法，以便用户可以随时启动/停止连接。

```
private void bwWorkerConnect_DoWork(object sender, DoWorkEventArgs e)
        {
            //Branch in only if the DDC returns a ping response
            if (DDCGlobal.DDCPingTest(ddc))
            {
                try
                {
                    //Creates an object of class which communicates with the engine
                    //Retrieves the object obtained through remoting (Engine) 
                    //and casts it to a ReqDDCLogicListResponse type (See CommonEngine)
                    DDCDAO ddcdao = new DDCDAO(DDCGlobal.ddcEngineIP, ddc.Ip);

                    //Request status list from DDC (TIMEOUT = 30 SECONDS)
                    GetLogicStatusListResponse result = ddcdao.GetLogicStatusList();
               ...
            if (bwWorkerConnect.CancellationPending)
            {
                e.Cancel = true;
            }

    public void LogicListLoad()
    {
        if (!bwWorkerConnect.IsBusy)
            bwWorkerConnect.RunWorkerAsync();
        else
        {
            MessageBox.Show(UIConstant.DDC_CONNECT_ALREADY_WARNING);
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:23:55.810

发表我的评论作为答案以供将来参考。

您可以通过与第一个`BackgroundWorker`一起运行的第二个来解决您的问题，*它只*在第一个中轮询一个标志以验证其状态：由于他是独立的，它不必“等待”并且可以自由杀死第一个工人以防万一它卡住了。

这应该是无死锁的，**因为只要**标志处理指令包含在`lock`.

流程看起来像这样：

*   当您需要连接时，启动两个工作人员
*   第一个工作人员继续尝试连接，设置一个标志以通知外部世界其“连接”状态
*   第二个工作人员可能每秒钟检查第一个工作人员状态 30 次：如果它从不读取与“连接”不同的任何内容，它可以继续并杀死第一个工作人员。它还可能对用户输入做出反应并在时间之前杀死第一个工人（即，任何用户输入都会取消*第二个*工人，这反过来又可以在第一个工人自己死亡之前杀死第一个工人）。
*   流程结束

# iphone - 如何更改 aurioTouch 项目以将录音写入 .caff 或 .wav 文件

> ID：11518441
> 
> 赞同：0
> 
> 时间：2012-07-17T08:09:51.087
> 
> 标签：iphone, ios, audio, avaudioplayer, avaudiorecorder

我正在研究[aurioTouch2](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html)示例代码。

我想改变 smth 从麦克风录制音频并将这些数据写入 .caff 或 .wav 文件。所以以后我就可以用 AVAudioPlayer 播放这个音频了。

我的想法是在 applicationDidFinishLaunching 中使用 AVAudioRecorder，但可能不是最好的解决方案，或者甚至不可能通过这种方式（我没有尝试使用 AVAudioRecorder，因为我认为这很可能不是最好的想法）。我试图将字节数据写入

```
void FFTBufferManager::GrabAudioData(AudioBufferList *inBL)
{
     memcpy(mAudioBuffer+mAudioBufferCurrentIndex, inBL->mBuffers[0].mData, bytesToCopy);
     // after this I copy to my own buffer and collect all the data during 30 seconds
} 
```

如您所见，我复制到自己的缓冲区并在 30 秒内收集所有数据。比我将数据写入 .caff 文件。那是行不通的。

**更新：**

或者可能存在播放音频二进制数据（未编码为 .waf 或 .caff 音频）的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:38:41.300

有几种不同的方法可以做到这一点。一种方法是使用[ExtAudioFileWriteAsync](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html)。

Apple 提供了一个示例项目来演示如何执行此操作。它是[RecordAudioToFile](https://developer.apple.com/library/mac/#samplecode/RecordAudioToFile/Introduction/Intro.html)。

看看其他一些帖子，例如，[谁能帮我通过音频单元录制 iPhone 输出的声音](https://stackoverflow.com/questions/8615358/can-anybody-help-me-in-recording-iphone-output-sound-through-audio-unit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:23:57.577

我不确定我是否正确理解了您，但您不能只将缓冲区写入磁盘。CAF 和 WAV 文件需要它们自己的标题和音频数据的编码。`AVRecorder`班级为你做这件事。关于这个话题有很多问题。例如看[这个问题](https://stackoverflow.com/questions/1010343/how-do-i-record-audio-on-iphone-with-avaudiorecorder)。

# httphandler - 目录中所有文件的 HTTPHandler

> ID：11518443
> 
> 赞同：0
> 
> 时间：2012-07-17T08:09:59.890
> 
> 标签：httphandler

我创建了一个 HTTPHandler 来处理某个文件夹（“文件”）中的所有文件。当我从 Visual Studio 在本地运行它时，它工作正常。但是，当我在服务器上部署它（IIS 7，经典模式）时，处理程序不会触发 pdf、jpg、gif 等类型的文件（尽管请求扩展名为 .aspx、.axd.. .etc 确实有效）。

我应该如何配置 web.config 来处理这些文件。我在 Files 文件夹中放置了一个 web.config 文件，其中包含以下内容：

```
<configuration>
    <system.web>
      <httpHandlers>
        <add verb="*" path="*.*" type="MyProject.Web.FileSecurityHandler, MyProject.Web"/>
      </httpHandlers>
    </system.web>
</configuration> 
```

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:11:02.907

`HTTPHandler`例如，在您的标签中为特定文件类型添加一个元素

```
<configuration>
<system.web>
  <httpHandlers>
    <add verb="*" path="*.*" type="MyProject.Web.FileSecurityHandler, MyProject.Web"/>
   <add path="*.jpg,*.jpeg,*.bmp,*.tif,*.tiff" verb="*" type="NameofYourHandler" />
  </httpHandlers>
</system.web>
</configuration> 
```

# python - 文档中的单元测试示例引发 AttributeError

> ID：11518444
> 
> 赞同：1
> 
> 时间：2012-07-17T08:10:02.720
> 
> 标签：python, unit-testing, python-3.x

我是 python 单元测试的新手。我尝试了文档中的 unittest 示例：

```
import random
import unittest

class TestSequenceFunctions(unittest.TestCase):

    def setUp(self):
        self.seq = list(range(10))

    def test_shuffle(self):
        # make sure the shuffled sequence does not lose any elements
        random.shuffle(self.seq)
        self.seq.sort()
        self.assertEqual(self.seq, list(range(10)))

        # should raise an exception for an immutable sequence
        self.assertRaises(TypeError, random.shuffle, (1,2,3))

    def test_choice(self):
        element = random.choice(self.seq)
        self.assertTrue(element in self.seq)

    def test_sample(self):
        with self.assertRaises(ValueError):
            random.sample(self.seq, 20)
        for element in random.sample(self.seq, 5):
            self.assertTrue(element in self.seq)

if __name__ == '__main__':
    unittest.main() 
```

运行此代码会在命令行上出现以下错误：

```
D:\src>python foo.py
 Traceback (most recent call last):
    File "foo.py", line 8, in <module>
  class TestSequenceFunctions(unittest.TestCase):
AttributeError: 'module' object has no attribute 'TestCase' 
```

我正在使用 ActiveState Python 3.2。为什么我在这里得到一个属性错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:31:57.060

很可能您的 python 路径中有第二个`unittest`模块或包。

如果您创建了一个`unittest.py`文件或`unittest`包含`__init__.py`文件的目录，python 可以在它在标准 python 库中找到普通模块之前找到它。

命名一个本地模块或包`unittest`相当于命名一个局部变量`list`or `dict`or `map`; 您正在使用本地重新定义来掩盖内置名称。

将该模块或包重命名为其他名称以解决此问题。

# php - 在 php 和 MySQL 中处理数字列表

> ID：11518446
> 
> 赞同：1
> 
> 时间：2012-07-17T08:10:10.273
> 
> 标签：php, mysql, list

我正在编写一个小列表系统，它通过数据库中的动态数字字段进行排序

该数据库包含以下内容：

```
Id | position | person 
======================
1  | 3        | John 
2  | 1        | Jane
3  | 4        | David
4  | 2        | Emily 
```

现在，当我选择该列表时，我通过位置字段对其进行排序。我想要做的是通过后端管理这个订单，虽然我已经掌握了主要原则，但我正在努力解决的一件事是有人将 Emily 更新为 3 而没有更改该有序列表中的其他人的情况。

因此，更新订单的页面只有人员姓名和一个包含当前订单的文本框。

我想尝试找出一种方法来处理这个问题，但似乎无法掌握任何可能的方法来做到这一点，因为所有内容都将立即保存，因此无法确定哪个项目已更改，因此应该是正确的一个以防重复。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:24:17.877

如果你想将 Emily 向下移动列表，她的位置 2 变为 3。所以你需要将 3 移回 2（这是 Emilys 的位置）

向上移动列表也是如此。您基本上是在交换下一个/上一个记录的位置。但是您需要检查是否有要交换的记录。

伪代码下移：

1.  得到艾米丽
2.  更新Emily下面的记录（Emily的位置+1）
3.  如果更新好了 - 更新艾米丽的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:24:57.933

手动重新排序列表背后的一种逻辑是，只要一个列表位置发生变化，就对整个相关列表项进行重新排序。将 10 更改为 2 将需要从 2 到 9 的所有内容都向前推 +1 位置，因此逻辑是

```
for i in new pos+1..old pos
    pos[i]++ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:26:26.017

这是我
首先使用的示例，我更改了行的位置，让我们`calendar_event_id = 7`用作示例，然后我调用重新定位，它运行：

```
SET @position = 0;
UPDATE calendar_events SET position = @position := @position + 1 
WHERE position >= 0 
ORDER BY position, IF(calendar_event_id = 7, 0, 1), name 
```

如果您删除了一行，则跳过该`IF(calendar_event_id = 7, 0, 1),`部分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:18:38.667

我只是这样排序：

```
...order by position, person 
```

这样，具有相同“位置”的人仍将被可靠地排序（按名称）。将“修复”留给用户。

当然，处理这个问题的最好方法是完全不用“位置”字段来打扰用户，而是使用某种[可拖动的可排序](http://jqueryui.com/demos/draggable/sortable.html)列表。

# ms-access - Excel VBA 报表，按条件选择单元格

> ID：11518448
> 
> 赞同：0
> 
> 时间：2012-07-17T08:10:27.243
> 
> 标签：ms-access, vba, excel, excel-2007

我有这个 Excel

![在此处输入图像描述](../Images/179a55e97605b058e539a1007744bf33.png)

现在我想使用 VBA 宏做一些报告

**报告 1（选择所有任务）**

选择总任务数，无论它们是否已完成 重要！请记住，这里有 5 个任务，在另一个 excel 中可能是 20 30 ，但都具有相同的格式 C6 - task_id, D6 - task_name, E6 task_name ... 等等

**报告 2（选择所有 WHERE 完成为 100%）**

**选择已完成**列为 100% 重要的总任务数！请记住，这里有 5 个任务，在另一个 excel 中可能是 20 30 ，但都具有相同的格式 C6 - task_id, D6 - task_name, E6 task_name ... 等等

**报告 3（选择所有用户并检索有关其生产力的信息）**

这里基本上我需要类似的东西

```
SUM(I6:I10) - SUM(K6:K10) WHERE task_given_to = 'OM'

SUM(I6:I10) - SUM(K6:K10) WHERE task_given_to = 'MN'

SUM(I6:I10) - SUM(K6:K10) WHERE task_given_to = 'NM' 
```

重要的！请记住，这里有 5 个任务，在另一个 excel 中可能是 20 30 ，但都具有相同的格式 C6 - task_id, D6 - task_name, E6 task_name ... 等等

有什么帮助吗？
我必须说，在 SQL 中这很容易......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:24:35.417

使用 VBA 有什么要求吗？除非我缺少某些东西，否则一个简单的数据透视表就可以做到这一点。

1.  只需将任务名称作为行字段。
2.  完成时应用过滤器。
3.  用户作为行字段，生产力作为数据，任务类型作为列。

这不是你想要达到的目标吗？

哦，仅供参考，如果这确实来自 Access，您可以使用 MS Query。数据 => 其他来源 => MS Query => Access 数据库

然后，您可以只使用 SQL 查询来检索数据。然后，我将制作 3 个数据表，其中包含 3 个不同的查询和 3 个报告表，这些表会将数据格式化为更像报告的格式。

# android - 安卓手机可以直接通过移动网络交换应用数据吗？

> ID：11518450
> 
> 赞同：0
> 
> 时间：2012-07-17T08:10:36.610
> 
> 标签：android, networking, mobile

我正在考虑构建一个需要在 2 个 android 设备之间进行通信的应用程序。我正在尝试通过数据计划（互联网？）在两台设备之间建立直接连接。

有可能还是我必须通过服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:21:36.757

您可能可以使用[ZeroConf](http://en.wikipedia.org/wiki/Zero_configuration_networking)或者如果设备靠近蓝牙。你想做什么？很可能有人已经构建了您可以使用的东西，例如有各种公司提供多人 SDK。

# android - Phonegap Android Geolocation 示例不起作用

> ID：11518452
> 
> 赞同：2
> 
> 时间：2012-07-17T08:10:43.060
> 
> 标签：android, cordova, geolocation

我尝试在 android 4.0.4 和 Phonegap 1.9 中使用地理定位。我尝试了[http://docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md.html#Geolocation的第一个示例](http://docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md.html#Geolocation)

我在 AndroidManifest.xml 和 plugins.xml 中添加了这些行。我启用了 GPS 并使用谷歌地图工作。但是，当我在我的 Galaxy nexus 上使用 Phonegap 启动 html 文件时，它显示：“正在查找地理位置......”并且什么也不做。

这就是完整的 Logcat 输出：

```
07-17 10:13:08.296: D/CordovaWebView(7612): >>> loadUrlNow()
07-17 10:13:18.984: D/CordovaWebView(7612): >>> loadUrlNow()
07-17 10:13:19.132: D/OpenGLRenderer(7612): Flushing caches (mode 0)
07-17 10:13:19.179: D/OpenGLRenderer(7612): Flushing caches (mode 1)
07-17 10:13:33.984: I/CordovaLog(7800): Changing log level to DEBUG(3)
07-17 10:13:33.984: I/CordovaLog(7800): Found preference for useBrowserHistory=false
07-17 10:13:33.984: D/CordovaLog(7800): Found preference for useBrowserHistory=false
07-17 10:13:33.984: D/DroidGap(7800): DroidGap.init()
07-17 10:13:33.991: D/CordovaWebView(7800): >>> loadUrl    
(file:///android_asset/www/geolocation.html)
07-17 10:13:33.991: D/PluginManager(7800): init()
07-17 10:13:33.991: D/CordovaWebView(7800): >>> loadUrlNow()
07-17 10:13:34.023: D/DroidGap(7800): onMessage(onPageStarted,file:///android_asset/www/geolocation.html)
07-17 10:13:34.023: D/SoftKeyboardDetect(7800): Ignore this event
07-17 10:13:34.046: D/libEGL(7800): loaded /system/lib/egl/libGLES_android.so
07-17 10:13:34.046: D/libEGL(7800): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
07-17 10:13:34.054: D/libEGL(7800): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
07-17 10:13:34.070: D/libEGL(7800): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
07-17 10:13:34.140: D/dalvikvm(7800): GC_CONCURRENT freed 139K, 2% free 12959K/13191K, paused 3ms+2ms
07-17 10:13:34.210: D/OpenGLRenderer(7800): Enabling debug mode 0
07-17 10:13:34.210: D/SoftKeyboardDetect(7800): Ignore this event
07-17 10:13:34.390: D/Cordova(7800): onPageFinished(file:///android_asset/www/geolocation.html)
07-17 10:13:34.390: D/CordovaWebView(7800): >>> loadUrlNow()
07-17 10:13:34.390: D/DroidGap(7800): onMessage(onNativeReady,null)
07-17 10:13:34.390: D/DroidGap(7800): onMessage(onPageFinished,file:///android_asset/www/geolocation.html)
07-17 10:13:34.398: I/SqliteDatabaseCpp(7800): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/de.xxxx.ble.html5/databases/webview.db
07-17 10:13:34.398: I/SqliteDatabaseCpp(7800): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/de.xxxx.ble.html5/databases/webview.db
07-17 10:13:34.413: D/DroidGap(7800): onMessage(networkconnection,3g)
07-17 10:13:36.398: D/DroidGap(7800): onMessage(spinner,stop) 
```

它进入了 onDeviceReady() 函数，但我认为它不会调用 onSuccess 或 onError。

那是我的代码：

```
 <!DOCTYPE html>
  <html>  
  <head>    
  <title>Device Properties Example</title>    
  <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>    
  <script type="text/javascript" charset="utf-8">    

  // Wait for Cordova to load    
  document.addEventListener("deviceready", onDeviceReady, false);    

 // Cordova is ready      
 function onDeviceReady() {  
navigator.geolocation.getCurrentPosition(onSuccess, onError);    
 } 

// onSuccess Geolocation        
function onSuccess(position) {        
var element = document.getElementById('geolocation');  

element.innerHTML = 'Latitude: '           + position.coords.latitude                 
          + '<br />' + 
                    'Longitude: '          + 
           position.coords.longitude             + '<br />' +   
                    'Altitude: '           + position.coords.altitude              + '<br />' +   
                    'Accuracy: '           + position.coords.accuracy              + '<br />' +   
                    'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +   
                    'Heading: '            + position.coords.heading               + '<br />' +   
                    'Speed: '              + position.coords.speed                 + '<br />' +  
                    'Timestamp: '          + position.timestamp 
                    + '<br />'; 

   }    

    // onError Callback receives a PositionError object      
        function onError(error) {        
alert('code: '    + error.code    + '\n' +              
      'message: ' + error.message + '\n');   
}    

   </script>  
   </head>  

   <body>    
<p id="geolocation">Finding geolocation...</p>  
  </body>
  </html> 
```

更新：我刚刚发现我的代码可以在 Internet Explorer 9 上运行，但不能在我的 Galaxy Nexus 上的 android 4.0.4 上使用 firefox beta 或 chrome。它不能作为带有 Phonegap 的 android 包而不是普通的 html5 页面。使用 iPhone4S 就可以了！

如果您有任何想法有什么问题，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:58:15.523

尝试使用 Google Api SDK！例如 2.3.3 / 10 版本。

# mvvm - MVVM DataGrid 从选定单元格复制信息

> ID：11518453
> 
> 赞同：3
> 
> 时间：2012-07-17T08:10:42.947
> 
> 标签：mvvm, .net-4.0, datagrid, wpfdatagrid, selecteditem

我正在使用带有 MVVM 模式的 .Net 4.0 DataGrid。我需要使用户能够选择单元格并将信息从选定的单元格复制到其他 DataGrid 行（通过键盘快捷键或上下文菜单复制/粘贴）。我试图通过 SelectedItem 或将 SelectedItem 作为 CommandParameter 发送来实现这一点，但这仅适用于整行而不适用于单元格。（DataGrid 绑定到包含具有浮点字段的对象的 ObservableCollection。然后将这些字段映射到 DataGrid 单元格） 那么，WPF MVVM 中是否有任何解决方案如何将 DataGrid 单元格从一行复制到另一行？在此先感谢 xaml：

```
 <DataGrid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="9" AutoGenerateColumns="False"     Height="Auto" HorizontalAlignment="Left" 
Name="dataGrid" VerticalAlignment="Top" Width="{Binding ElementName=grid4,Path=Width}"
ScrollViewer.CanContentScroll="False" FrozenColumnCount="1" SelectionUnit="Cell" SelectionMode="Extended" CanUserSortColumns = "False" 
CanUserReorderColumns="False" CanUserResizeRows="False" RowHeight="25" RowBackground="LightGray" AlternatingRowBackground="White"
ScrollViewer.VerticalScrollBarVisibility="Visible" ScrollViewer.HorizontalScrollBarVisibility="Visible"
ItemsSource="{Binding Layers, Mode=TwoWay}"  SelectedItem="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.Selection, Mode=TwoWay}">
 <DataGrid.InputBindings>
    <KeyBinding Gesture="Shift" Command="{Binding ItemHandler}" CommandParameter="{Binding ElementName=dataGrid, Path=SelectedItems}"></KeyBinding>
</DataGrid.InputBindings> 
```

视图模型：

```
private float _selection = 0.0f;
public float Selection
{
    get
    {
        return _selection;
    }
    set
    {
        if (_selection != value)
        {
            _selection = value;
            NotifyPropertyChanged("Selection");
        }
    }
} 
```

...

```
public DelegateCommand<IList> SelectionChangedCommand = new DelegateCommand<IList>(
    items =>
    {
        if (items == null)
        {
            NumberOfItemsSelected = 0; 
            return;
        }
        NumberOfItemsSelected = items.Count;
    });
public ICommand ItemHandler
{
    get
    {
        return SelectionChangedCommand;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:58:15.430

我想你可能是为了`SelectionUnit`财产。将此设置为`CellOrRowHeader`将选择方法从整行更改为单个单元格。

你确实失去了“我在哪排？” 突出显示，但您专注于单个单元格。（您可能可以扩展数据网格以使用当前行逻辑添加您自己的突出显示。）

```
<DataGrid AutoGenerateColumns="True" Grid.Column="1" Grid.Row="0"
          HorizontalAlignment="Stretch" Name="dataGrid" VerticalAlignment="Stretch"
          DataContext="{Binding}" ItemsSource="{Binding Path=MyDataTable}"
          IsReadOnly="True" SelectionMode="Extended" SelectionUnit="CellOrRowHeader" /> 
```

# jquery - 使用 jquery 的 bgcolor 动画

> ID：11518457
> 
> 赞同：0
> 
> 时间：2012-07-17T08:10:58.240
> 
> 标签：jquery, html, jquery-ui

我第一次使用 jquery 动画。我已经读过动画可以在 .Toggle() 或 .click() 函数上完成，但我想假设在页面加载时更改 div 的 bgcolor。我试过了，但它在这里不起作用是我的代码。

```
<html> 
<head>   
<scriptsrc="http://code.jquery.com/jquery-latest.js"></script>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js">
</script>   
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery- ui.min.js">
</script>

<script>   $(document).ready(function(){ 
$('block').animate({ backgroundColor: "black" }, 1000);   
});   
</script>   
<style>   
.block { 
color: white;
background-color: #68BFEF;
width: 150px; 
height: 70px;
margin: 10px;    }   
</style> 
</head> <body >   
<div class="block"> hi</div>
 </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:17:52.167

默认情况下，jQuery 不能为颜色设置动画。您可以下载一个插件，例如[jQuery UI](http://jqueryui.com/demos/animate/)或[Color Animation Plugin](http://www.bitstorm.org/jquery/color-animation/)来使用该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:18:42.433

动画有效，您的 jQuery 选择器是错误的。

```
$('.block').animate({ backgroundColor: "black" }, 1000); 
```

注意“。” 在'块'前面。您正在选择名为块 (<block>) 的所有元素。使用 '.'，所有具有类 'block' 的元素都会被选中。

# php - 将字符串从 PHP 传递到锚标记的 onclick 处理程序

> ID：11518458
> 
> 赞同：0
> 
> 时间：2012-07-17T08:11:03.797
> 
> 标签：php, javascript, alert

我试图将服务器端的值传递给标签的`onclick`处理程序`a`，但是当我单击链接时，它在客户端给出了不同的结果。

我的PHP代码：

```
$any="link1";
echo(" <a id='link1' href='#' onclick='VisibleFalse($any)'>[+]</a><span><b>$candidatename</b></span>"); 
```

我想将字符串传递`"link1"`给函数`VisibleFalse`，该函数将字符串显示为警报：

```
function VisibleFalse(ID)
{
    alert(ID);
} 
```

但它正在`"http://localhost/..."`警报中打印。

我会很感激你的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:15:59.673

问题是，您正在传递一个字符串，而您忘记为其添加引号，因此**最终结果**将是该 JavaScript 函数中的一个字符串。这是查看此问题的更好方法：

```
$any="link1";
// First, echo isn't a function. It can be faked to be used as one, but that's not recommended
// Second, sort out your quoting like this:
echo '<a id="link1" href="#" onclick="VisibleFalse(\''.$any.'\')">[+]</a><span><b>'.$candidatename.'</b></span>';

// OR
echo "<a id='link1' href='#' onclick='VisibleFalse(\"$any\")'>[+]</a><span><b>$candidatename</b></span>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:15:55.680

JavaScript 中的字符串文字必须被引用。

```
onclick='VisibleFalse(&quot;$any&quot;)'> 
```

（但内在的事件属性被认为比它们更有价值，就像嵌入在 PHP 中的 HTML 中嵌入的 Javascript。改用[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。）

您还需要确保它`$any`不包含任何会终止字符串文字的引号字符（并且您可能应该使其成为 HTML 安全的，`htmlspecialchars`因此它不会终止属性值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:17:22.450

使用等同于引号的 HTML Unicode（可以在[此处](http://www.ascii.cl/htmlcodes.htm)`&#39;`找到其他字符） 。

```
echo(" <a id='link1' href='#' onclick='javascript:VisibleFalse(&#39;$any&#39;)'>[+]</a><span><b>$candidatename</b></span>"); 
```

# android - Android，如何知道ViewPager的哪个页面被点击了？

> ID：11518465
> 
> 赞同：0
> 
> 时间：2012-07-17T08:11:26.330
> 
> 标签：android, android-fragments, fragmentpageradapter

基于`FragmentPagerAdapter`，我膨胀了我的视图寻呼机，我可以在每个页面中看到我的项目。如何知道用户点击了哪个页面来引导他/她查看详细信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:14:42.740

据我所知，没有办法让 显示当前`Fragment`， `FragmentPagerAdapter`所以我可以建议`position`为每个`Fragment`添加的成员变量保留一个成员变量，`pager`以便您可以使用它来知道单击了哪个片段。

# java - 自定义 Swing 箭头按钮 repaint() 擦除自定义

> ID：11518466
> 
> 赞同：2
> 
> 时间：2012-07-17T08:11:29.997
> 
> 标签：java, swing, jbutton, repaint

我有自定义箭头类，它扩展了 BasicArrowButton。它以我需要的方式构建和显示，但是当它被重新绘制时（鼠标悬停，单击其他选项卡等）箭头消失了。我该如何解决？

```
public class CustomArrow extends BasicArrowButton {
private transient Color shadow = new Color(241, 241, 241);
private transient Color dark = new Color(150, 150, 150);
private static int defaultSize = 10;

/** The Polygon that points up. */
private static Polygon upIcon = new Polygon(new int[] { 0, 5, 9 },
                                          new int[] { 7, 2, 7 }, 3);

/** The Polygon that points down. */
private static Polygon downIcon = new Polygon(new int[] { 1, 8, 19 },
                                            new int[] { 3, 13, 3 }, 3);

/** The Polygon that points left. */
private static Polygon leftIcon = new Polygon(new int[] { 7, 3, 7 },
                                            new int[] { 1, 5, 9 }, 3);

/** The Polygon that points right. */
private static Polygon rightIcon = new Polygon(new int[] { 3, 7, 3 },
                                             new int[] { 1, 5, 9 }, 3);

private transient Border buttonBorder = new Border()
{
    public Insets getBorderInsets(Component c)
    {
    return new Insets(2, 2, 2, 2);
    }

  public boolean isBorderOpaque()
  {
return true;
  }

  public void paintBorder(Component c, Graphics g, int x, int y, int w, int h)
  {
  Color saved = g.getColor();
  g.setColor(shadow);

  g.drawLine(x + 1, y, x + w - 1, y);

      g.setColor(dark);
  g.drawLine(x, y, x, y + h + 2);

      g.setColor(shadow);
  g.drawLine(x + w - 1, y + 1, x + w - 1, y + h - 1);

  g.setColor(shadow);
      g.drawLine(x + 1, y + h - 1, x + w, y + h - 1);

  g.setColor(saved);
    }
  };  

@Override
public synchronized void addKeyListener(KeyListener l) {
    super.addKeyListener(l);
}

@Override
public void addActionListener(ActionListener l) {
    super.addActionListener(l);
}
public CustomArrow(int direction)
{
    super(direction);
    setBorder(buttonBorder);
    setDirection(direction);
    this.setRolloverEnabled(false);
}

public CustomArrow(int direction, Color background, Color shadow, Color darkShadow, Color highlight)
{
  this(direction);
  setBackground(background);
}

@Override
public void paintTriangle(Graphics g, int x, int y, int size, int direction, boolean isEnabled)
{
   Polygon arrow = null;
   switch (direction)
   {
     case NORTH:
    arrow = upIcon;
    break;
     case SOUTH:
   arrow = downIcon;
   break;
     case EAST:
     case RIGHT:
   arrow = rightIcon;
   break;
     case WEST:
     case LEFT:
   arrow = leftIcon;
   break;
  }

  int[] xPoints = arrow.xpoints;
  int[] yPoints = arrow.ypoints;
  int x1;
  int y1;
  int x2;
  int y2;
  x1 = y1 = x2 = y2 = 0;

  x = x - 1;
  if (size != defaultSize)
  {
float scale = size * 1f / defaultSize;
for (int i = 0; i < 3; i++)
  {
    xPoints[i] *= scale;
    yPoints[i] *= scale;
  }
  }
  g.translate(x, y);

  switch (direction)
  {
    case NORTH:
   x1 = xPoints[0] + 2;
   y1 = yPoints[0];
   y2 = y1;
   x2 = xPoints[2] - 1;
   break;
    case SOUTH:
   x1 = xPoints[1];
   y1 = yPoints[1] + 1;
   x2 = xPoints[2] - 1;
   y2 = yPoints[2];
   break;
    case LEFT:
    case WEST:
   x1 = xPoints[0] + 1;
   y1 = yPoints[0] + 1;
   x2 = x1;
   y2 = yPoints[2] + 1;
   break;
    case RIGHT:
    case EAST:
   x1 = xPoints[2];
   y1 = yPoints[2] + 1;
   x2 = xPoints[1] - 1;
   y2 = yPoints[1] + 1;
   break;
    }
    Color saved = g.getColor();
g.setColor(dark);

if (arrow != null) {
  g.fillPolygon(xPoints, yPoints, 3);
    }

    g.setColor(saved);
    g.translate(-x, -y);
   }

   public static void main(String[] args) {
    // Resize the frame to reproduce
    JFrame frame = new JFrame("Test");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(new CustomArrow(SwingConstants.NORTH));
    frame.setSize(400, 400);
    frame.setVisible(true);
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:53:13.523

数组变量保存对数组的引用，而不是数组本身（就像 Object 变量一样）。当你做类似的事情时

```
int[] xPoints = arrow.xpoints;
int[] yPoints = arrow.ypoints; 
```

您正在复制参考，而不是数据，这意味着 xPoints 和 arrow.xpoints 仍然指向相同的数据，并且修改任何一个都会影响另一个。当您稍后缩放这些点时，您将更改箭头每次绘制时的外观。如果要复制数组数据以避免这种情况，可以使用`System.arraycopy`：

```
int[] xPoints = new int[3]; //arrow.xpoints;
int[] yPoints = new int[3]; //arrow.ypoints;
System.arraycopy(arrow.xpoints, 0, xPoints, 0, 3);
System.arraycopy(arrow.ypoints, 0, yPoints, 0, 3); 
```

但是，您可以简单地缩放图形对象而不是缩放参考点：

```
Graphics2D g2 = (Graphics2D) g;
float scale = size * 1f / defaultSize;
g2.scale(scale, scale); 
```

# vim - 在 vim 缓冲区下插入 esc 键

> ID：11518469
> 
> 赞同：0
> 
> 时间：2012-07-17T08:11:43.133
> 
> 标签：vim

有时我需要发送`Esc`到插入缓冲区。`F8`因此，例如在插入模式下按下时，我可以生成相同的东西。

所以我认为将`Shift`+映射`Esc`到`Esc`实际插入的键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:20:43.493

您可以通过按 ctrl -v（用于“逐字”）然后按 esc 来插入文字 esc。

# jquery - jquery从链接而不是列表获取文本

> ID：11518470
> 
> 赞同：0
> 
> 时间：2012-07-17T08:11:45.737
> 
> 标签：jquery

我正在尝试获取链接的显示文本并最终使用了这个标签，它看起来不够 jquery-ish..还有其他选择吗？

对于以下 HTML

```
<div id="c-100001" class="cal-list-row cal-slug-item selected"><a href="" class="cal-name">Link Text</a></div> 
```

下面的 jquery 看起来很不优雅，虽然它可以工作

```
string = $('#' + c_key).find('a').contents()[0].data
// string should be plain "Link Text" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:48:38.627

Try this

```
var string = $('#' + c_key).find('a').html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:13:01.883

[jsBin 演示](http://jsbin.com/amugap/edit#preview)

```
var string = $('#' + c_key).find('a').text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:35:22.160

我正在回答我自己的问题，以便任何其他寻找正确答案的人都能找到它。感谢所有尝试提供帮助的人，但这是由特定 jquery 插件引起的问题，该插件正在修改默认 jquery 行为

基本上由 Stan Lemon (https://bitbucket.org/stanlemon/jquery-templates/) 贡献的 jquery-template 插件正在改变 jquery 行为，因此 .text() 似乎返回一个对象列表而不是第一个文本物品。

向作者报告同样的情况，虽然这个插件似乎已经失效......可能会迁移到 jquery UI 团队在这里开发的内容（http://wiki.jqueryui.com/w/page/37898666/Template）

报告所有这些，希望它也可以帮助其他人:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:15:58.980

您可以使用获取容器中的所有链接

```
var links = ("a", $("#containerElement")); 
```

这将为您提供`<a ..`元素列表。

然后，您可以遍历它们，或者`.text()`如果我仍然没有包装为 jQuery 元素，或者如果您检索到纯 HTML 标记，您可以简单地使用第一个并调用它`.innerHTML`。

例子：

```
var linkText = $("a", $("#myContainer"))[0].innerHTML; 
```

或者

```
var linkText = $("a", $("#main")).first().text(); 
```

# sql - 了解基本 SQL 查询

> ID：11518475
> 
> 赞同：2
> 
> 时间：2012-07-17T08:12:04.300
> 
> 标签：sql, oracle, subquery

我有一个像这样的查询

```
SELECT tran_number
  FROM table_a WHERE customer_id IN
          (SELECT customer_id 
             FROM table_b
            WHERE customer_key = 89564
                  AND (   other_phn_area_code
                       || other_phnum_pfx_num
                       || other_phnum_sfx_num IN
                          (123456789)))
       AND phn_area_code || phnum_pfx_num || phnum_sfx_num IN (123456789) 
```

* * *

上面的代码工作正常。问题在于内部查询（下面单独复制内部查询）......

```
(SELECT customer_id 
                 FROM table_b
                WHERE customer_key = 89564
                      AND (   other_phn_area_code
                           || other_phnum_pfx_num
                           || other_phnum_sfx_num IN
                              (123456789))) 
```

当我执行此查询时，我收到错误为`customer_id: invalid identifier`. 实际上，`table_b`没有任何名为`customer_id`. 如果是这样，那么当我将它用作上面的内部查询时，它是如何工作的，没有任何问题。

请帮助我理解这一点。

***数据库详细信息如下***

```
Oracle 11G Enterprise edition 11.2.0.2.0
PL/SQL Release 11.2.0.2.0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T08:16:21.713

如果该`where`内部选择的条件有结果，则将选择`customer_id`来自的列`table_a`。如果不是，则不会被选中。外部选择检查`in`条件。这就像说：“仅当内部选择返回 true 时才返回某些内容。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T08:20:08.747

这是一个*范围*问题。Oracle 从最里面的子查询开始验证标识符并向外工作。如果我们将表别名添加到您的原始查询中，事情可能会变得更加清晰：

```
SELECT t1.tran_number 
  FROM table_a t1
  WHERE t1.customer_id IN 
          (SELECT t1.customer_id  
             FROM table_b t2 
            WHERE t2.customer_key = 89564 
                  AND (   t2.other_phn_area_code 
                       || t2.other_phnum_pfx_num 
                       || t2.other_phnum_sfx_num IN 
                          (123456789))) 
       AND t1.phn_area_code || t1.phnum_pfx_num || t1.phnum_sfx_num IN (123456789) 
```

实际上，外部查询使用子查询作为 EXISTS 的测试，即只检查给定的 CUSTOMER_KEY 值和其他列是否存在。如果这不是您想要的，那么您应该更改子查询中的列名。（这是一个不错的选择：您可能会从主查询中得到令人费解的结果，这就是为什么您要单独调查子查询的原因）。

在这些场景中使用别名总是好的做法。如果您像这样为子查询起别名：

```
....
  WHERE t1.customer_id IN 
          (SELECT t2.customer_id  
             FROM table_b t2 
            WHERE t2.customer_key = 89564 
.... 
```

错误会立即显现出来。

* * *

SQL Reference 确实解释了子查询中作用域的操作，但很难找到。[它说](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries007.htm#i2067858)的是这样的：

> “Oracle 通过查看子查询中命名的表，然后查看父语句中命名的表来解析子查询中的不合格列”

您可以在 PL/SQL 文档中找到更清晰的范围说明；SQL 子查询以同样的方式工作。 [了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/fundamentals.htm#i15754)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:18:18.503

那是 IN 的一个已知错误。如果你使用表别名，你会得到错误

```
SELECT tran_number 
  FROM table_a WHERE customer_id IN 
          (SELECT b.customer_id  
             FROM table_b b
            WHERE customer_key = 89564 
                  AND (   other_phn_area_code 
                       || other_phnum_pfx_num 
                       || other_phnum_sfx_num IN 
                          (123456789))) 
       AND phn_area_code || phnum_pfx_num || phnum_sfx_num IN (123456789) 
```

也使用 EXISTS 来避免这种类型的静默行为

```
SELECT tran_number 
  FROM table_a as t1 WHERE EXISTS  
          (SELECT *
             FROM table_b as b
            WHERE customer_key = 89564 
                  AND (   other_phn_area_code 
                       || other_phnum_pfx_num 
                       || other_phnum_sfx_num IN 
                          (123456789))
        AND b.customer_id  =t1.customer_id) 
       AND phn_area_code || phnum_pfx_num || phnum_sfx_num IN (123456789) 
```

# c# - 使用 XMS.Net 的 Websphere MQ 队列深度

> ID：11518476
> 
> 赞同：4
> 
> 时间：2012-07-17T08:12:07.813
> 
> 标签：c#, .net, ibm-mq

由于我们在使用 XMS.net 的 IBM 的 Websphere MQ 上遇到了一些问题（Windows 服务有时似乎放弃了侦听队列上的消息），我们想创建一个简单的应用程序来监控某些队列的深度（或消息的数量）在队列上）能够在队列深度超过某个阈值时提醒某人。该应用程序将由任务调度程序在特定时间间隔内启动，并将“读出”X 个队列的队列深度（可能还有其他一些统计信息）。

我们的 Windows 服务正在使用以下代码，我希望我可以为我们的“监控”应用程序重用相同的“知识”。

```
 AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

    //Read config values
    string QueueManager = ConfigurationManager.AppSettings["queuemanager"];
    string Channel = ConfigurationManager.AppSettings["channel"];
    string Queue = ConfigurationManager.AppSettings["queue"];
    string HostIP = ConfigurationManager.AppSettings["host"];
    int Port = int.Parse(ConfigurationManager.AppSettings["port"]);

    //Create connection
    var factoryfactory = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
    var connectionfactory = factoryfactory.CreateConnectionFactory();

    connectionfactory.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, QueueManager);
    connectionfactory.SetStringProperty(XMSC.WMQ_HOST_NAME, HostIP);
    connectionfactory.SetIntProperty(XMSC.WMQ_PORT, Port);
    connectionfactory.SetStringProperty(XMSC.WMQ_CHANNEL, Channel);
    connectionfactory.SetIntProperty(XMSC.WMQ_BROKER_VERSION, XMSC.WMQ_BROKER_V2);
    connectionfactory.SetIntProperty(XMSC.WMQ_CONNECTION_MODE, XMSC.WMQ_CM_CLIENT_UNMANAGED);

    Console.WriteLine("Creating connection");
    var connection = connectionfactory.CreateConnection();
    connection.ExceptionListener = new ExceptionListener(OnXMSExceptionReceived);

    //Create a_session
    Console.WriteLine("Creating sessions");
    var session = connection.CreateSession(false, AcknowledgeMode.ClientAcknowledge);

    //Create queue
    Console.WriteLine("Creating queue");
    var queue = session.CreateQueue(string.Format("queue://{0}/{1}", QueueManager, Queue)); 
```

我浏览了 等的属性`session`，`queue`但是，当然，没有“当前队列深度”属性。我可以在这些对象上使用`GetIntProperty()`or `GetLongProperty()`，但我不知道要使用哪个常量（我见过 IBM.XMS.MQC.MQIA_CURRENT_Q_DEPTH 但它包含一个`int`并`Get...Property()`期望一个`string`作为参数）。

长话短说：我将如何以上述代码为起点检索队列深度？使用 XMS.Net 有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:34:36.050

[正如 Shashi 建议](https://stackoverflow.com/a/11520014/215042)的那样，我能够使用MQ API 来解决它。为此，您需要引用 amqmdnet.dll (C:\Program Files (x86)\IBM\WebSphere MQ\bin\amqmdnet.dll) 并使用以下（示例）代码。请注意，这是一个简单的示例，不包括异常处理等。

```
using System;
using System.Collections;
using System.Configuration;
using IBM.WMQ;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            //Connection properties
            var properties = new Hashtable();
            properties.Add(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_CLIENT);
            properties.Add(MQC.CHANNEL_PROPERTY, "SOME.CHANNEL.TCP");
            properties.Add(MQC.HOST_NAME_PROPERTY, "12.34.56.78");
            properties.Add(MQC.PORT_PROPERTY, 1416);

            var qmgr = new MQQueueManager("MYQMGR", properties);

            Console.WriteLine("Local  : {0}", GetQueueDepth(qmgr, "FOO.LOCALQ"));
            Console.WriteLine("Report : {0}", GetQueueDepth(qmgr, "FOO.REPORTQ"));
        }

        public static int GetQueueDepth(MQQueueManager queuemgr, string queue)
        {
            return queuemgr.AccessQueue(queue,
                MQC.MQOO_INPUT_AS_Q_DEF + 
                MQC.MQOO_FAIL_IF_QUIESCING + 
                MQC.MQOO_INQUIRE).CurrentDepth;
        }
    }
} 
```

这比[我最初的“解决方法”](https://stackoverflow.com/questions/11518476/websphere-mq-queue-depth-with-xms-net/11520701#comment15225130_11520014)表现得更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T09:50:26.893

无法确定使用 XMS .NET 队列深度。队列深度特定于消息传递提供程序而不是 JMS/XMS，因此您需要使用 MQ API 来获取队列深度。您可以使用 MQ .NET API 来查找队列深度。MQQueue.CurrentDepth 将给出队列中的消息数。

IMO 最好调查一下为什么 XMS .NET 服务停止侦听消息而不是编写另一个程序来监视队列深度。

# iphone - 当应用程序在ios中显示默认图像时如何隐藏状态栏？

> ID：11518479
> 
> 赞同：0
> 
> 时间：2012-07-17T08:12:09.800
> 
> 标签：iphone, ios

当应用程序在 iOS 中显示默认图像时如何隐藏状态栏？换句话说，当我的应用程序加载默认图像时，我不想显示默认图像并且加载完成后，我想再次显示图像/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:27:40.650

尝试这个

```
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{    
[application setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
} 
```

# windows - ctime, mtime, 存放目录, windows, linux

> ID：11518486
> 
> 赞同：10
> 
> 时间：2012-07-17T08:12:26.587
> 
> 标签：windows, unix, filesystems, ctime, filemtime

让我们一劳永逸地澄清这一点。我试图用谷歌搜索，但似乎无法在一个地方找到此信息。

创建或删除文件时，保存目录 mtime 在 Windows 和 Linux 上都会发生变化。ctime 在 Linux bot 上也会发生变化，而不是在 Windows 上，因为 ctime 是创建时间。

如果重新打开并写入文件，则保存目录不会更改。但是，在 Windows 和 Linux 上，文件 mtime 都会更改，在 Linux 上 ctime 也会更改，在 Windows 上，ctime 是创建时间。

它是否正确？有什么注意事项？是否有例外，比如 Windows 网络共享？还是桑巴？

编辑：那些投票关闭此主题的人，请在您认为这是主题的网站上发表评论。Stackoverflow 上有大量的 mtime/ctime 问题，仅仅因为我没有包含依赖于这些知识的 PHP 片段，并不意味着没有：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:05:45.707

这样想：

**目录是保存指向*文件*的指针（或“链接”）的文件。**

至此：

*   更改文件的*内容*不会影响目录
    （除非文件先被删除，然后以相同的名称再次创建，如上面的*Gabor Garami*所述）

*   添加，删除或重命名文件将更改目录文件的内容，
    这将导致其 ctime/mtime 如您所描述的那样更改，具体取决于操作系统

# c++ - c/c++中的链表

> ID：11518488
> 
> 赞同：-1
> 
> 时间：2012-07-17T08:12:26.300
> 
> 标签：c++

我将乘以用户必须输入的两个多项式。

在第一步（从用户那里获取信息）我得到了这个错误：

```
Unhandled exception at 0x00a315cb in linked polinomials.exe:
  0xC0000005: Access violation writing location 0x00000000. 
```

之后我想输入多项式的另一个元素后出现此错误。

```
struct polynomial{

    float coef ;
    int exp ;
    polynomial *next ;
} *first, *second ,*result; 
```

```
first = new(polynomial);
   //init first
first ->coef = 0;
first->exp = 0 ;
first->next = 0; 
```

```
while(ch != 'n')
{
    cin >> temp_c ;
    cin >> temp_e ;
    first->coef = temp_c;
    first->exp = temp_e;
    cout << "Do you want to enter another ? (y or n) :" << endl;
    ch = getch();
    first = first->next;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:14:18.403

在第一次迭代中：

```
first = first->next; 
```

你分配`first`给`NULL`，因为那`first->next`是最初的。您需要在分配之前为其分配空间。

```
first->next = new polynomial;
first = first->next; 
```

另外，您确定要丢失指向第一个节点的指针吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:15:05.417

您没有为整个列表分配内存。你需要写这样的东西：
`first->next = new polynomial();
first = first->next;`

否则，您将尝试在`NULL`地址处读取内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:15:47.677

相反，您应该这样做：

```
second = new(polynomial);
first->next=second;
first=second; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:17:23.447

```
first = first->next; 
```

在此操作之前，您必须为新链接分配内存，例如

```
first->next = new polynomial(); 
```

只有在那之后你才能写

```
first = first->next; 
```

# iphone - 每次加载我的应用程序时都会加载旧的 XIB？

> ID：11518492
> 
> 赞同：1
> 
> 时间：2012-07-17T08:12:38.200
> 
> 标签：iphone, xcode, uiviewcontroller, xib

我有一个非常奇怪的问题。

有时当我启动我的应用程序（在 iPhone 设备上或在 Xcode iOS 5.1 模拟器中）时，我得到了一个旧版本的 XIB，我正在使用它进行更改。任何人有什么可能是错的任何提示？

这是我启动 XIB 的代码：

```
MapKitDragAndDropViewController *spview = [[MapKitDragAndDropViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:spview animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:08:56.320

发现问题了！我有两个 xib 文件。一款适用于 iPhone，一款适用于 iPad 版。两人同名。删除了一个，因为视图适合这两种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:33:09.520

你试过清理你的项目吗？还要从设备/模拟器中删除应用程序并清理并再次尝试安装。

# oracle - Shell 脚本/sql* 加载程序 - 输出文件中的制表符代替空格

> ID：11518493
> 
> 赞同：0
> 
> 时间：2012-07-17T08:12:43.880
> 
> 标签：oracle, shell, sql-loader

我的任务是将表的数据导出到平面文件。我编写了一个 shell 脚本来做同样的事情。这里的问题是在第一列值之后，即 310，光标不会逐个空格移动，我认为它需要一个“制表符”。它会跳到某个位置。我无法理解这一点。您能否通过删除标签并将其作为空格来帮助我解决这个问题。

trimspool ON 或 Linesize 是否导致问题？

```
310  LIFRZONAAC 0000000 0000003
310  LIIPACCCLA 0000000 0000000
310  LIIPACREPL 0000000 0000000
310  LIIPANRDSI 0000000 0000000
310  LIIPAXNAD  0000000 0000000
310  LIIPBNRDSI 0000000 0000000
310  LIIPCAUDIP 0000000 0000000
310  LIIPCAUDMU 0000000 0000000 
```

==================================================== ====================================

我的控制文件和shell脚本如下。

控制文件::

```
LOAD DATA CHARACTERSET WE8ISO8859P1 

APPEND
PRESERVE BLANKS
INTO TABLE "MNCABEA1"
APPEND
(
SERVICIO              CHAR(9),
FAMILIA_COMPONENTE    CHAR(4),
PARAMETRO             CHAR(7),
CO_CABECERA_SC        CHAR(8),
CO_CABECERA_CARACT    CHAR(7)
) 
```

==================================================== =================================== Shell脚本::

```
cat<<ENDMNCABEA1 >MNCABEA1.sql
set head off
set feed off
set pagesize 0
set trimspool on
set linesize 500

SELECT SERVICIO||FAMILIA_COMPONENTE||PARAMETRO||DECODE(CO_CABECERA_SC,'        ',REPLACE(CO_CABECERA_SC,' ','0'),LPAD(LTRIM(CO_CABECERA_SC),8,'0'))||DECODE(CO_CABECERA_CARACT,'       ',REPLACE(CO_CABECERA_CARACT,' ','0'),LPAD(LTRIM(CO_CABECERA_CARACT),7,'0')) FROM MNCABEA1;

exit
ENDMNCABEA1

sqlplus -s $USUADM@$ORACLE_SID @MNCABEA1.sql > /var/opt/aat/shr/mn/par/ext/salida/MNCABEA1_TEST 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:37:29.960

你还需要`set tab off`；请参阅[文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2683445)。您可能还希望`set trimout off`避免在行上出现尾随空格；因为你没有做 a `spool`，`set trimspool`可能没有做任何事情。

# c# - C# - 值不能为空。参数名称：类型

> ID：11518495
> 
> 赞同：1
> 
> 时间：2012-07-17T08:12:52.697
> 
> 标签：c#, vbscript

当我尝试运行下面的代码时，我得到

> “值不能为空。参数名称：类型”

运行时出错。

如何处理此异常以及为什么 my`objectName`在这里为空？我期望`objectName`在我的计算机上保存本地用户帐户的值。

```
namespace Users
{
    class EnableDisableUsers
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("Enter user account to be enabled or disabled");
            var user = Console.ReadLine();
            Console.WriteLine("Enter E to enable and D to disable the user account");
            string enableStr = Console.ReadLine();
            bool enable;
            var computer = ".";

            if (enableStr.Equals("E") || enableStr.Equals("e"))
            {
                enable = true;

                var objectName = "WinNT://" + computer + "/" + user + ",user"; 
                dynamic objUser = Activator.CreateInstance(Type.GetTypeFromProgID(objectName));
                objUser.AccountDisabled = false;
                objUser.SetInfo();
                Console.WriteLine(user + " Enabled = " + result.ToString());
                Console.ReadLine();
            }
            else if (enableStr.Equals("D") || enableStr.Equals("d"))
            {
                enable = false; 
                var objectName = "WinNT://" + computer + "/" + user + ",user";
                dynamic objUser = Activator.CreateInstance(Type.GetTypeFromProgID(objectName));
                objUser.AccountDisabled = true;
                objUser.SetInfo();
                Console.WriteLine(user + " Enabled = " + result.ToString());
                Console.ReadLine();    
            }
            else
            {
                Console.WriteLine("Operation for " + user + " failed ");
            }
        }
    }
} 
```

任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:27:38.767

> 如何处理此异常以及为什么我的 objectName 在这里为空？

`objectName`不会的`null`。更可能的情况是`Type.GetTypeFromProgID(objectName)`返回*null*，因为该 prog-id 不存在，或者该帐户无权访问。

检查`Type.GetTypeFromProgID(objectName)`返回的内容，并采取相应的行动。确保它实际上是一个 prog-id，并且您正在正确使用该 API。例如：

```
var type = Type.GetTypeFromProgID(objectName);
if(type == null) throw new InvalidOperationException(
    "Invalid prog-id: " + objectName);
dynamic objUser = Activator.CreateInstance(type); 
```

* * *

编辑：请注意，`Activator.CreateInstance`etc**与**VBScript 的`GetObject`. 要访问它，请参考`Microsoft.VisualBasic.dll`并使用：

```
dynamic obj = Microsoft.VisualBasic.Interaction.GetObject(objectName); 
```

# javascript - 显示和隐藏 div 用于缩短动态出现的文本

> ID：11518504
> 
> 赞同：1
> 
> 时间：2012-07-17T08:13:40.540
> 
> 标签：javascript, jquery, css

我有一个问题，我们必须在产品详细信息页面的产品描述中显示/隐藏一些文本。描述必须缩短到所需的行数，并通过单击“更多”来显示完整的描述。我想实现它，如下面的 jQuery 链接所示：

> [http://viralpatel.net/blogs/demo/jquery/jquery.shorten.1.0.js](http://viralpatel.net/blogs/demo/jquery/jquery.shorten.1.0.js)

代码如下：

```
jQuery.fn.shorten = function (settings) {
    var config = {
        showChars: 100,
        ellipsesText: "...",
        moreText: "more",
        lessText: "less"
    };

    if(settings) {
        $.extend(config, settings);
    }

    $('.morelink').live('click', function () {
        var $this = $(this);
        if($this.hasClass('less')) {
            $this.removeClass('less');
            $this.html(config.moreText);
        } else {
            $this.addClass('less');
            $this.html(config.lessText);
        }
        $this.parent().prev().toggle();
        $this.prev().toggle();
        return false;
    });

    return this.each(function () {
        var $this = $(this);
        var content = $this.html();
        if(content.length > config.showChars) {
            var c = content.substr(0, config.showChars);
            var h = content.substr(config.showChars, content.length - config.showChars);
            var html = c + '<span class="moreellipses">' + config.ellipsesText + '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="javascript://nop/" class="morelink">' + config.moreText + '</a></span>';
            $this.html(html);
            $(".morecontent span").hide();
        }
    });
}; 
```

我在 base.tpl 中插入了以下代码

```
<script type="text/javascript"> 
$(document).ready(function () {
    $(".comment").shorten();
}); 
</script> 
```

我在相应的 html 文件中给出了以下类：

```
<div class="comment">  
   <!-- Link for getting the description from backend -->
</div > 
```

由于细节来自后端，底层的动态 div 以及其中的无序列表都没有受到影响，请建议我一些方法来实现这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:32:57.043

我们在门户中做的一件事是使用 text-overflow css 属性。您可以为您的描述框定义一个高度，然后使用与此类似的类为您提供省略号，指示还有更多内容需要阅读。

```
.flo
{
    overflow: hidden;
    white-space: nowrap;
    -o-text-overflow: ellipsis;
    -ms-text-overflow: ellipsis;
    text-overflow: ellipsis;
} 
```

然后，您可以添加阅读更多按钮，或单击以展开交易类型，然后将展开内容以完整查看。只是在我的脑海中思考，但是如果您正确布置了 html，您甚至可以使用 CSS 来扩展 :hover 上描述框的大小，或者您的描述可能是复选框的标签，当您单击标签时，它会设置复选框:checked 状态允许您的 css 扩展您的描述。

解决您的问题的另一种方法。如果您有任何问题，请发表评论..

# php - 性能问题 - 在额外的表或 php 数组中保存国家名称和其他属性？

> ID：11518505
> 
> 赞同：1
> 
> 时间：2012-07-17T08:13:47.937
> 
> 标签：php, mysql, arrays, join, attributes

我有一个应用程序，其中性能是非常关键的问题。该应用程序有 50.000 名用户进行大量搜索。目前我将国家代码作为 char(2) 存储在 users 表中，然后我从国家 php 数组中检索国家。

```
$countries = array("AF"=>"Afghanistan","AL"=>"Albania",...) 
```

我对大约 6 个属性进行了类似操作，并且所有属性都具有相似数量的值。这很有帮助，因为不需要加入。

只谈性能，将国家名称和其他属性继续存储在数组中，或者将每个属性与另一个存储每个代码名称的表连接起来会更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:17:20.120

这实际上取决于您的性能瓶颈在哪里。如果您的数据库中有漂亮的表和适当的索引，那么您的数据库将快速返回数据。如果是您的数据库被破坏，那可能会产生不好的影响。

另一方面，如果您的服务器在 CPU 周期上非常繁重并且不断地达到最大值，则让数据库处理连接。要考虑的另一件事是内存使用-带有国家/地区代码的数组不是什么大问题，但是其中包含产品列表的数组可能会占用一些内存-如果您有很多并发用户，那对性能来说可能不是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:17:03.557

将它们保留在数组中并避免连接绝对是最好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:18:38.953

数组更快，但大数据集消耗更多内存，这在你的情况下是不正确的；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:23:06.670

这是另一种选择，完全取决于您的情况和您提到的其他 6 个值，如果该数据与国家列表一样静态，则考虑将数据缓存在文件中。

```
if( some simple validation is true ){
include "EN.php" ;
}
echo $country; 
```

并从那里访问您的变量。如果您打开了某种内存缓存（例如 APC），那就更好了。

# c - 从 C api 附加一个命名的内存数据库

> ID：11518506
> 
> 赞同：1
> 
> 时间：2012-07-17T08:13:50.743
> 
> 标签：c, sqlite

`:memory:`是否可以使用 C API附加命名的 SQLite3数据库？当然有`sqlite3_open`，但是如何设置要在查询中使用的名称？另外，我可以通过执行`ATTACH DATABASE`语句来附加它，但是我如何获取它的 DB 指针呢？

背景：

我正在使用虚拟表来驱动 SQLite 接口到一组外部文件。我使用 SQLite 主要是为了访问体面的 SQL 查询和现有的驱动程序，例如 Python。我已经定义了一个函数`open_myfiles`，它当前根据给定目录中的文件创建所有虚拟表。应用程序只需要执行此操作`SELECT open_myfiles('/path/to/tables')`，并且使用正确的虚拟表填充数据库。

但是，我正在尝试改进。目前，虚拟表是持久化到当前数据库的，很难加载多个目录。我认为更好的方法是将每个目录附加为一个单独的命名 `:memory:`数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-23T18:55:30.163

通过传递正确的连接字符串是可能的。重要的阅读是SQLite 文档的[这一部分：](https://sqlite.org/inmemorydb.html)

1.  如果您在表单中指定 URI `"file::memory:?cache=shared"`，则所有内存 DB 将被共享
2.  如果您在表单中指定 URI，`"file:memdb1?mode=memory&cache=shared"`则 DB 将是在内存中*命名的 DB*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:32:39.570

经过一番研究，我发现 C api 数据库 ptr 和附加数据库之间没有明确的联系。我不得不修改我最初的方法，下面是我解决它的方法，以防其他人偶然发现。

我没有在扩展加载时注册虚拟表模块，而是为`open_myfiles`函数的每次调用注册一个虚拟表模块。除了注册模块之外，该函数还执行`ATTACH DATABASE ':memory:' AS 'mymod'`将虚拟表放在它们各自的命名空间中（`CREATE VIRTUAL TABLE`事实证明，它也适用于限定名称）。

总而言之，它运作良好。我希望这对其他人有帮助！

# iphone - 将现有的 Drupal 页面与 PhoneGap iOS App 连接起来

> ID：11518507
> 
> 赞同：0
> 
> 时间：2012-07-17T08:13:59.317
> 
> 标签：iphone, ios, drupal, cordova

**案例：** 我有一个基于 Drupal 的现有页面，并打算开发一个 phoneGap iOS 应用程序。这意味着我只需要现有页面的信息，并希望将这些数据填充到新应用程序中。

**我**现在的问题是，有人知道天气是否有解决方法或工作流程可以这样做。如何将现有页面与另一个页面或在我的情况下 phoneGap 连接以获取数据？*我是 Drupal 和 phoneGap 的新手*，所以也许你有一些页面包含信息、教程或一些帮助如何做到这一点。

提前感谢*伊夫*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:37:28.983

Drupal 提供了一个名为“服务”的模块，它允许您从您的网站获取数据或服务。您可能需要在该模块上创建自己的方法来获取要检索的信息。

至于 iOS 端，您可以通过 XML-RPC、Rest 或您在服务器端选择的任何通信协议来检索数据，或者一路使用 drupal-ios。

[https://github.com/workhabitinc/drupal-ios-sdk/](https://github.com/workhabitinc/drupal-ios-sdk/)

您应该开始寻找服务模块并使用它。您将在该模块上有一个嵌入式控制台来测试这些方法。

完成后，看看 drupal-ios 或通过 XML-RPC 或其他方式深入了解您自己的实现。

# c# - 如何在休眠中获取查询表的值？

> ID：11518513
> 
> 赞同：1
> 
> 时间：2012-07-17T08:14:31.680
> 
> 标签：c#, linq, nhibernate

我有一个这样的查询：

```
var query = scope.Session.QueryOver<Task>().Where(s => s.Code == code && s.Flag == flag && s.Antry != null); 
```

我有第二个查询：

```
var personQuery = scope.Session.QueryOver<Person>(); 
```

查询有一个字段 id，它对应于`personQuery`.

我想要的是让 personQuery 只包含查询中存在的 id。到目前为止，我一直在这样做：

```
int[] arr  = query.Where(i=> i.Id!=null).List<int>().ToArray();
entryQuery.Where(i => i.Id.IsIn(arr)); 
```

但是，我认为这会失败，因为我知道：

`query.Where(i=> i.Id!=null).List<int>().ToArray();`

不会返回一个整数数组，而是一个查询对象。

那么我怎样才能在查询中只获取整数的 id 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:19:17.143

要仅从查询中获取整数 id，您可以选择仅包含您感兴趣的属性的匿名类型，例如：

```
var integerids = scope.Session.QueryOver<Person>()
    .Select(p => p.Id)
    .List<int>(); 
```

# robotium - 用于 android Native Application 的签名

> ID：11518525
> 
> 赞同：1
> 
> 时间：2012-07-17T08:15:07.937
> 
> 标签：robotium

我正在尝试使用robotium 为android 本机应用程序制作测试用例。但对于某些应用程序，我收到错误“签名与目标包不匹配”。有没有可能知道要用于 android 本机应用程序的签名的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T21:58:51.653

我建议您使用这个：[http](http://www.troido.de/re-sign.jar) ://www.troido.de/re-sign.jar （以 root 或管理员身份运行）来为您的应用程序签名，并使用您的调试密钥库对其进行签名。在本文档中，您将找到有关所有程序的更多信息！对不起我的英语不好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:34:14.667

不适用于本机应用程序。这是 的“问题”`Robotium`之一，因为签名必须匹配。`Robotium`声称他们能够进行“黑盒”测试，但您必须有一个匹配的签名，这并不总是可用的。一种选择是您可以尝试删除旧签名，并使用调试签名创建一个新签名。

`Robotium`以下是可能有帮助的文档的摘录：

```
 Signature:
The signature will identify the author of the android application. Signature means it contains the information like first name and last name of the developer, Name of the organizational unit, organization, city, state, two-­‐letter country code.
Standard tools like Keytool and Jarsigner are used to generate keys and sign applications. [For more help: http://developer.android.com/guide/publishing/app-­‐signing.html ]
IMPORTANT STEPS:
* If you know the certificate signature then you need to use the same signature in your test project
* If you do not know the certificate signature then you need to delete the certificate signature and you should use the same android debug key signature in both the application and the test project
* If the application is unsigned then you need to sign the application apk with the android debug key
If the application is signed then you can use the following drag and drop java program to resign it:
http://www.troido.de/re-­‐sign.jar
Or
-­‐-­‐ Un-­‐zip the apk file
-­‐-­‐ Delete the META-­‐INF folder
-­‐-­‐ Re-­‐zip the apk file
-­‐-­‐ In Dos prompt /Command prompt
> jarsigner -keystore ~/.android/debug.keystore -storepass android -keypass android ApplicationToTest.apk androiddebugkey
> zipalign 4 ApplicationToTest.apk TempApplicationToTest.apk
Then rename TempApplicationToTest.apk to ApplicationToTest.apk 
```

祝你好运！

# java - 如何在 Eclipse 4 的默认位置获取 RCP 应用程序中的工具栏元素？

> ID：11518526
> 
> 赞同：2
> 
> 时间：2012-07-17T08:15:09.823
> 
> 标签：java, eclipse, eclipse-rcp, toolbar, eclipse-juno

在 RCP 中添加工具栏有两种方式：

1.  使用 org.eclipse.ui.menu

2.  使用 ActionBarAdvisor fillCoolBar(){..}

现在我使用第一种方法来实现菜单栏和工具栏，当我尝试添加工具栏项目时，它会显示但在快速访问文本框之后的屏幕右端（我相信它已经在 J​​uno 中硬编码，直到现在没有选项可以隐藏它）。无论如何，我的问题是“如何在左侧获取这些菜单项（这通常是 Eclipse 中工具栏项的默认位置）？”

使用第二种方法确实可以按预期放置工具栏项，但我不想使用它，因为不鼓励在 eclipse4 中使用它们，甚至 juno 帮助也没有给出这种方法的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T11:28:07.863

尝试在 RCP 的 ActionBarAdvisor 中添加以下内容。

```
@Override
protected void fillCoolBar(ICoolBarManager coolBar) {
    coolBar.add(new GroupMarker(IWorkbenchActionConstants.MB_ADDITIONS));
} 
```

这将允许您使用 org.eclipse.ui.menu 并将工具栏保持在正确的一侧。参考： http: [//www.eclipse.org/forums/index.php/t/351345/](http://www.eclipse.org/forums/index.php/t/351345/)

或者，您也可以通过在 css.xml 文件中添加以下内容来删除快速访问框

```
#SearchField { visibility: hidden; } 
```

# c# - 如何从另一个方法调用按钮单击事件

> ID：11518529
> 
> 赞同：41
> 
> 时间：2012-07-17T08:15:17.543
> 
> 标签：c#

如何`SubGraphButton_Click(object sender, RoutedEventArgs args)`从其他方法调用？

```
private void SubGraphButton_Click(object sender, RoutedEventArgs args)
{
}

private void ChildNode_Click(object sender, RoutedEventArgs args)
{
   // call SubGraphButton-Click().
} 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-09-16T21:37:26.740

您可以通过以下代码轻松完成此操作（假设您的按钮名称为*btnButton*）：

```
btnButton.PerformClick(); 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-07-17T08:20:31.513

您可以通过简单地将参数传递给 button_click 事件来调用它：

```
private void SubGraphButton_Click(object sender, RoutedEventArgs args)
{
}

private void ChildNode_Click(object sender, RoutedEventArgs args)
{
   SubGraphButton_Click(sender, args);
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-11-18T23:09:18.223

您可以通过传递来调用 button_click 事件..

```
private void SubGraphButton_Click(object sender, RoutedEventArgs args)
{
}

private void ChildNode_Click(object sender, RoutedEventArgs args)
{
   SubGraphButton_Click(sender, args);
} 
```

也没有通过..

```
private void SubGraphButton_Click(object sender, EventArgs args)
{
}

private void Some_Method() //this method is called
{
   SubGraphButton_Click(new object(), new EventArgs());
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-22T08:45:35.613

您可以执行不同的方法来解决此问题。最好的方法是，如果假设您的两个按钮都执行相同的工作，您可以定义第三个函数来完成这项工作。例如 ：

```
private void SubGraphButton_Click(object sender, RoutedEventArgs args)
{
    myJob()  
}

private void ChildNode_Click(object sender, RoutedEventArgs args)
{
    myJob()
}

private void myJob()
{
    // Your code here
} 
```

但如果你仍然坚持按照自己的方式做，最好的做法是：

```
private void SubGraphButton_Click(object sender, RoutedEventArgs args)
{
}

private void ChildNode_Click(object sender, RoutedEventArgs args)
{
   SubGraphButton_Click.PerformClick();
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-17T08:19:24.940

通常更好的方法是触发事件（点击）而不是直接调用方法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-05-25T03:27:07.940

在 WPF 中，您可以通过以下方式轻松完成：

```
this.button.RaiseEvent(new RoutedEventArgs(Button.ClickEvent)); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-15T12:35:09.693

```
private void PictureBox1_Click(object sender, EventArgs e)
{
    MessageBox.Show("Click Succes");
}

private void TextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 13)
    {
        PictureBox1_Click(sender, e); //or try this one "this.PictureBox1_Click(sender, AcceptButton);"
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-17T08:18:48.293

您可以简单地调用它：

```
SubGraphButton_Click(sender, args); 
```

现在，如果你`SubGraphButton_Click`对 args 做了什么，你可能会遇到麻烦，但通常你不会对它们做任何事情。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-28T08:22:48.617

对我来说，这在 WPF 中工作

```
 private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            RoutedEventArgs routedEventArgs = new RoutedEventArgs(ButtonBase.ClickEvent, Button_OK);
            Button_OK.RaiseEvent(routedEventArgs);
        }
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-10T22:16:54.810

使用 InvokeOnClick 事件。即使按钮不可见/禁用它也可以工作

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-22T20:18:57.373

从任何地方调用它的简单方法就是使用“null”和“RoutedEventArgs.Empty”，如下所示：

```
SubGraphButton_Click(null, RoutedEventArgs.Empty); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-13T17:13:42.850

将其添加到 Click 委托的实例中：

`ChildNode.Click += SubGraphButton_Click`

这与 .NET 事件遵循的模式（观察者）保持一致。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-16T13:59:35.473

对于想知道的人，这也适用于按钮单击。例如：

```
private void btn_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Test")
        }

private void txb_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (char)13)
            {
                btn_Click(sender, e);
            } 
```

在这种情况下，当在文本字段（txb）中按 Enter 时，它将单击将激活消息框的按钮。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-25T20:40:09.667

我们在这个项目中有 2 个表格。主要形式变化

`private void button1_Click(object sender, EventArgs e) { // work }`

至

`public void button1_Click(object sender, EventArgs e) { // work }`

和其他形式，当我们需要上述功能时

```
 private void button2_Click(object sender, EventArgs e)
    {
        main_page() obj = new main_page();
        obj.button2_Click(sender, e);
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-08T23:41:09.123

对于 WPF：

```
YourButtonName.RaiseEvent(new RoutedEventArgs(System.Windows.Controls.Primitives.ButtonBase.ClickEvent)); 
```

# facebook - 多个移动 Web URL

> ID：11518530
> 
> 赞同：1
> 
> 时间：2012-07-17T08:15:18.683
> 
> 标签：facebook, mobile, web

有没有办法在 web url 框中有多个 URL ( [http://i.stack.imgur.com/zOpqX.png](http://i.stack.imgur.com/zOpqX.png) )

我正在本地测试，但也想在服务器上测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:35:08.947

不，没有——你想用它来达到什么目的？

Facebook 使用`mobile web URL`重定向在移动设备上点击您的画布链接 (http://apps.facebook.com/YOURAPP) 的任何用户，因此在那里拥有多个 URL 是行不通的。

[这](http://developers.facebook.com/blog/post/2011/09/30/platform-updates--operation-developer-love/)是去年的一篇文章，关于`multiple domain names`.

在实时和本地测试时，我通常会设置一个实时应用程序和一个暂存应用程序，然后根据`url`.

# c++ - 为什么浮动非类型模板参数在 C++ 中是非法的？没有 float const experision 吗？

> ID：11518534
> 
> 赞同：2
> 
> 时间：2012-07-17T08:15:56.470
> 
> 标签：c++, templates

> **可能重复：**
> [C++：为什么我不能使用浮点值作为模板参数？](https://stackoverflow.com/questions/2183087/c-why-cant-i-use-float-value-as-a-template-parameter)

我可以定义一个模板类：

```
template <int A> C {}; 
```

但我不能定义一个类：

```
template <float A> C{}; 
```

我认为在表达式中：

```
const float a = 10.0f; 
```

`a`是一个 const experision，我可以用它来实例化一个浮点非类型模板参数

```
C<a> c(); 
```

但不幸的是，这是非法的。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:20:31.773

标准不允许这样做的一个可能动机是，相同的模板参数在被视为浮点数时可能会出现不同，因为并非所有浮点数都可以精确表示。例如，将

```
C<1.0f/3.0f> c; 
```

和

```
C<2.0f/6.0f> c; 
```

是同一类型吗？

# java - 外部可执行文件的行为

> ID：11518541
> 
> 赞同：0
> 
> 时间：2012-07-17T08:16:19.793
> 
> 标签：java, api

我目前正在用 JAVA 编写一个程序来检查外部可执行文件的行为。要求之一是实时观察外部可执行文件的文件操作（检查可执行文件是否创建/删除/修改任何文件）。我试图在 java 中找到一个合适的 API 来帮助我做到这一点，尽管找不到。我发现 Class FileAlterationObserver 不适合我的程序，因为您必须手动指定要监视的所有目录。

我想知道你们中是否有人知道一个好的 API 可以使用？

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:20:33.863

如果没有 java，您可以使用 linux`lsof`命令列出系统中打开的文件。或者，对于 Java，您可以使用 libnotify，但您需要指定文件夹。我看不到任何其他使用纯 java 的方法。

编辑 @Keppil 将您链接到看起来比 libjnotify 更合适的[文件更改通知 API 。](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)我不知道它的存在！

# .net - Windows 应用程序的互斥复选框

> ID：11518544
> 
> 赞同：0
> 
> 时间：2012-07-17T08:16:47.427
> 
> 标签：.net, vb.net

我一直在尝试编写一个互斥复选框。

Windows 窗体中有两个复选框。如果 CheckBox1 已选中，则 CheckBox2 应未选中。我一直试图通过处理 CheckBoxes 的 CheckedChanged 事件来实现这一点，但已经进入了无限循环。

我的代码片段如下。

```
Private Sub chkBox1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles chkBox1.CheckedChanged
    If chkBox2.CheckState = CheckState.Checked Then
        chkBox2.CheckState = CheckState.Unchecked
    End If
    If chkBox1.CheckState = CheckState.Unchecked Then
        chkBox1.CheckState = CheckState.Checked
    End If
End Sub

Private Sub chkBox2_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles chkBox2.CheckedChanged
    If chkBox1.CheckState = CheckState.Checked Then
        chkBox1.CheckState = CheckState.Unchecked
    End If
    If chkBox2.CheckState = CheckState.Unchecked Then
        chkBox2.CheckState = CheckState.Checked
    End If   
End Sub 
```

有人对此有解决方案吗？

**编辑** 我不打算在这里使用 RadioButtons。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:36:29.127

您搞砸了检查更改`if`的 s：您的每个处理程序都在自行触发，因此是无限循环。这应该有效：

```
Private Sub chkBox1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles chkBox1.CheckedChanged
    If chkBox1.CheckState = CheckState.Checked And chkBox2.CheckState = CheckState.Checked Then
        chkBox2.CheckState = CheckState.Unchecked
    End If
    If chkBox1.CheckState = CheckState.Unchecked And chkBox2.CheckState = CheckState.Unchecked Then
        chkBox2.CheckState = CheckState.Checked
    End If
End Sub

Private Sub chkBox2_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles chkBox2.CheckedChanged
    If chkBox2.CheckState = CheckState.Checked And chkBox1.CheckState = CheckState.Checked Then
        chkBox1.CheckState = CheckState.Unchecked
    End If
    If chkBox2.CheckState = CheckState.Unchecked And chkBox1.CheckState = CheckState.Unchecked Then
        chkBox1.CheckState = CheckState.Checked
    End If   

End Sub 
```

这避免了间接递归

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:27:08.837

对涉及的每个复选框按钮使用相同的事件处理程序，并使用静态局部变量防止重新进入

```
Private Sub chkBox_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles chkOnlyMyArea.CheckedChanged 
     Static inCheck as Boolean 
     if inCheck = true then 
         Exit Sub
     end if
     inCheck = true
     chkBox1.CheckState = CheckState.UnChecked    
     chkBox2.CheckState = CheckState.UnChecked    
     CheckBox c = CType(sender, CheckBox)
     c.CheckState = CheckState.Checked    
     inCheck = false
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-14T11:49:40.310

当我有两个以上的复选框并且我需要它们互斥时，但我知道稍后我会添加更多，这就是我所做的：

```
 public class ObjectGroup
{
    public string ObjectName;
    public int GroupID;

    public ObjectGroup(int groupID, string objectName)
    {
        GroupID = groupID;
        ObjectName = objectName;
    }
} 
```

在表单定义中：

```
private List<ObjectGroup> ObjectGroups; 
```

在表单加载：

```
//Set up checkbox groups
ObjectGroups = new List<ObjectGroup>();
ObjectGroups.Add(new ObjectGroup(1, "chStatic"));
ObjectGroups.Add(new ObjectGroup(1, "chNonStatic")); 
```

然后在表单正文中：

```
private void chNonStatic_CheckedChanged(object sender, EventArgs e)
{
    SetCheckboxState(sender as CheckBox);
}

private void chStatic_CheckedChanged(object sender, EventArgs e)
{
    SetCheckboxState(sender as CheckBox);
} 
```

此函数可以驻留在帮助类或表单本身中：

```
private void SetCheckboxState(CheckBox original)
    {
        var thisName = original.Name;
        var isChecked = original.Checked;
        //Find the object collection to which this control belongs
        var thisObject = (from q in ObjectGroups where q.ObjectName == thisName select q).FirstOrDefault();
        if (thisObject == null) return;
        var otherObjects = (from q in ObjectGroups where q.GroupID == thisObject.GroupID && q.ObjectName != thisName select q.ObjectName).ToList();
        foreach (var o in otherObjects)
        {
            CheckBox obj = this.Controls.Find(o, true).FirstOrDefault() as CheckBox;
            if (obj != null)
            {
                if (isChecked && obj.Checked) obj.Checked = false;
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-28T22:18:26.373

我发现的最简单的方法（适用于 2 个以上的复选框）是在设置选中之前测试其他复选框是否未选中。这会杀死无限循环。我知道这是一篇旧帖子，但此方法演示了 3 个及更多专有复选框：

```
Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
    If CheckBox1.Checked = True Then
        CheckBox2.Checked = False
        CheckBox3.Checked = False
    ElseIf CheckBox2.Checked = False And CheckBox3.Checked = False Then
        CheckBox1.Checked = True
    End If
End Sub

Private Sub CheckBox2_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox2.CheckedChanged
    If CheckBox2.Checked = True Then
        CheckBox1.Checked = False
        CheckBox3.Checked = False
    ElseIf CheckBox1.Checked = False And CheckBox3.Checked = False Then
        CheckBox2.Checked = True
    End If
End Sub

Private Sub CheckBox3_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox3.CheckedChanged
    If CheckBox3.Checked = True Then
        CheckBox1.Checked = False
        CheckBox2.Checked = False
    ElseIf CheckBox1.Checked = False And CheckBox2.Checked = False Then
        CheckBox3.Checked = True
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-13T21:30:49.403

将此 checkchanged 处理程序添加到组框中的所有复选框。简单的。

```
Private Sub ToggleCheckBoxOnEntry(sender As Object, e As EventArgs)
    Static CurrentlySelectedbox As CheckBox

    If CType(sender, CheckBox).Checked Then
        CurrentlySelectedbox = sender
    End If

    For Each cntrl As CheckBox In grpVentMode.Controls
        If cntrl.Checked AndAlso cntrl.Name <> CurrentlySelectedbox.Name Then
            cntrl.Checked = False
        End If
    Next

End Sub 
```

# nexus - 从本地 Nexus 存储库中删除超过 2 年的工件

> ID：11518546
> 
> 赞同：13
> 
> 时间：2012-07-17T08:17:03.557
> 
> 标签：nexus

我们在一些磁盘空间有限的旧硬件上运行 nexus，并希望删除超过某个阈值的工件。

[除了 find 和curl](http://parkerwy.wordpress.com/2011/07/10/curl-safely-delete-artifacts-from-nexus/)的组合之外，还有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T20:11:23.890

有一个计划任务可以自动删除旧的快照版本：

*   [http://www.sonatype.com/people/2009/09/nexus-scheduled-tasks/](http://www.sonatype.com/people/2009/09/nexus-scheduled-tasks/)
*   [http://www.sonatype.com/books/nexus-book/reference/confignx-sect-managing-tasks.html](http://www.sonatype.com/books/nexus-book/reference/confignx-sect-managing-tasks.html)

不幸的是，这不适用于托管的发布存储库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-27T10:29:16.590

正如从给出的答案中的博客中的评论[链接到的 Sonatype 博客文章](https://support.sonatype.com/entries/20871791-Can-I-delete-releases-from-Nexus-after-they-have-been-published)中所提到的，自 Nexus 2.5 以来，有一个内置的“从存储库中删除版本”计划任务，可以将其配置为删除保留定义数量的旧版本。

这足以满足我们的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T09:53:00.597

删除超过 100 天无人访问且超过 200 天未被修改的所有文件：

```
find . -type f -atime +100 -mtime 200 -delete 
```

清理空目录：

```
find . -type d -empty -delete 
```

或者查看[https://github.com/akquinet/nexus_cleaner/blob/master/nexus_clean.sh](https://github.com/akquinet/nexus_cleaner/blob/master/nexus_clean.sh)和相应的博客条目[http://blog.akquinet.de/2013/12/09/how-to-clean-your -nexus-release-repositories/](http://blog.akquinet.de/2013/12/09/how-to-clean-your-nexus-release-repositories/)（删除除最后 10 个版本之外的所有版本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-29T02:52:58.063

自动清除超过 30 天（你可以更改它）不从 nexus 3 下载 docker 图像

[https://gist.github.com/anjia0532/4a7fee95fd28d17f67412f48695bb6de](https://gist.github.com/anjia0532/4a7fee95fd28d17f67412f48695bb6de)

```
# nexus3's username and pwd
username = 'admin'
password = 'admin123'

# nexus host
nexusHost = 'http://localhost:8081'

# purge repo
repoName = 'docker'

# older than days
days = 30

#change and run it 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-18T11:55:29.340

对于 Nexus2，您可以使用我的 Spring Boot 应用程序[https://github.com/vernetto/nexusclean](https://github.com/vernetto/nexusclean)，您可以根据日期和要保留的最少工件数定义规则，它会生成“rm -rf”命令（使用REST API 太慢了）。

对于 Nexus3，我肯定会使用 Groovy 脚本作为“执行管理任务”。此处发布了一个[groovy 脚本，用于删除 nexus 3（不是 nexus 2）上的工件](https://stackoverflow.com/questions/45589937/groovy-script-to-delete-artifacts-on-nexus-3-not-nexus-2)

# jquery-ui - Jquery UI 滑块显示步骤的线条

> ID：11518548
> 
> 赞同：1
> 
> 时间：2012-07-17T08:17:08.763
> 
> 标签：jquery-ui, jquery-ui-slider

无论如何，我可以在滑块中获得显示不同步骤的脊或线。

# c++ - 更改 Visual Studio 2010 中的默认编译器

> ID：11518557
> 
> 赞同：1
> 
> 时间：2012-07-17T08:17:33.143
> 
> 标签：c++, visual-studio-2010, visual-c++

我的系统中安装了 Visual Studio 2010。但是，我的公司有一个不同的中央构建系统并使用 Visual Studio 6 中的编译器。我是否可以使用此编译器在 Visual Studio 2010 中编译我的 C++ 项目？如果是，在哪里配置？我检查了项目设置对话框，但找不到任何选项。我知道如何从命令行使用旧编译器，但我不想这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:25:43.103

Daffodil for Visual Studio 扩展 (http://daffodil.codeplex.com) 允许您在 VS 2010 的项目设置下设置任何已安装的工具集/编译器。

# joomla - 在 Joomla 2.5 上切换语言时会话丢失

> ID：11518561
> 
> 赞同：0
> 
> 时间：2012-07-17T08:17:54.203
> 
> 标签：joomla, joomla2.5, autologin

我正在使用 Joomla 2.5 开发一个内部网，并且我有两个菜单类型模块，一个用于每种语言（英语和西班牙语）。两个菜单项注册用户的访问类型都是类型（默认情况下在 Joomla 中预安装）。

我已经激活了模块语言更改和自动登录插件（[http://extensions.joomla.org/extensions/access-a-security/site-access/authentication-cloud-based/10508](http://extensions.joomla.org/extensions/access-a-security/site-access/authentication-cloud-based/10508)）。

当我通过自动登录（我直接用英文访问）访问网站时，我可以成功浏览所有菜单项。问题是语言何时发生变化。更改语言会话丢失，我得到带有登录表单的屏幕。

为什么会话丢失？，有什么问题？

谢谢您的帮助。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:55:54.670

好的，这可能会有所帮助：

在后端去`site->global->congiguration->system->session settings`并尝试在那里玩选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:46:42.523

问题不在 Joomla 的核心。问题出在一个模块中（我自己开发的）并制作了一个`session_destroy()`. 此外，该模块被分配给西班牙语的所有菜单项。

我觉得让你浪费了时间。道歉。

问候。

# xml - Perl 中的 XML 数字签名

> ID：11518562
> 
> 赞同：5
> 
> 时间：2012-07-17T08:17:55.880
> 
> 标签：xml, perl, digital-signature

我正在尝试使用该[`Crypt::OpenSSL::RSA`](https://metacpan.org/module/Crypt%3a%3aOpenSSL%3a%3aRSA)模块在 Perl 中对 XML 进行数字签名。我正在从文件中加载私钥。私钥是使用 Java 从密钥库生成的。

下面是我的 Perl 代码：

```
my $private = 'my_priv.key';
my $private_key = read_file( $private );
print "my private key text is\n", $private_key; 
```

输出，而不是将整个密钥放在这里，只是前几行:-)

```
> -----BEGIN PRIVATE KEY----- MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKAuqJ1ZkxHZStfSt0CdEsaSYuLO
> 6zDiTpt60asVLWpLe2bf... 
```

```
my $rsa_priv = Crypt::OpenSSL::RSA->new_private_key($private_key);
print "my private key is\n",$rsa_priv->get_private_key_string(); 
```

输出：

```
> -----BEGIN RSA PRIVATE KEY-----
> MIICXAIBAAKBgQCgLqidWZMR2UrX0rdAnRLGkmLizusw4k6betGrFS1qS3tm3+97
> wMvFXCx0Od8eb 
```

`$private_key`和的结果`$rsa_priv->get_private_key_string()`不同。它应该表现得像那样吗？

有没有人能够使用 XML 签名`Crypt::OpenSSL::RSA`？

编辑：

我正在使用 java 代码提取私钥，代码如下 `KeyStore ks = KeyStore.getInstance("JKS");

```
keypass = sPass.toCharArray();

FileInputStream fis = new FileInputStream(store);
ks.load(fis, sPass.toCharArray());
fis.close();

String eol = System.getProperty("line.separator");

Key k = ks.getKey(alias, keypass);

System.out.println("....Generating the Private Key.....");
String encKey = new BASE64Encoder().encode(k.getEncoded());
System.out.println("Encoded Key: " + encKey);
BufferedWriter myKey = null;
myKey = new BufferedWriter(new FileWriter(alias + "_priv.key"));
myKey.write("-----BEGIN PRIVATE KEY-----" + eol);
myKey.write(encKey + eol);
myKey.write("-----END PRIVATE KEY-----");
myKey.close();
System.out.println("....Private Key Generated.....");` 
```

同时使用 java 和 perl，因为我要签名的 xmls 在 perl 中（这是一个完整的大系统），而密钥库在 java 中。

第一次对任何东西进行数字签名，而我的数字签名 xml 根本没有向收件人系统进行身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:24:15.137

> `$private_key;`和的结果`$rsa_priv->get_private_key_string();`不同，这应该表现得像那样吗？

是的，输入是 X509 密钥，输出是 RSA 密钥。`openssl rsa -in my_priv.key`给出相同的结果。

如果您对这些东西一无所知，最好使用高级库。

*   [XML 签名](http://search.cpan.org/dist/XML-Sig)
*   [网络 SAML2](http://search.cpan.org/dist/Net-SAML2)

# c# - Single.NaN 不等于自身？

> ID：11518563
> 
> 赞同：0
> 
> 时间：2012-07-17T08:17:58.073
> 
> 标签：c#, nan

我在调试一些将返回的单个数组与预期结果进行比较的单元测试时遇到了这个问题。

```
System.Single.NaN == System.Single.Nan; 
```

单元测试期望为真，但这评估为假。当 single 的其他静态方法返回 true 时，为什么这会评估为 false？NaN 不是一个常数值吗？

```
System.Single.MaxValue == System.Single.MaxValue;
System.Single.Epsilon == System.Single.Epsilon;
null == null; 
```

[http://msdn.microsoft.com/en-us/library/system.single.nan.aspx](http://msdn.microsoft.com/en-us/library/system.single.nan.aspx)指出：“两个 NaN 值被认为是不相等的。” 但是这个问题是出于好奇，为什么这比其他任何事情都重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:20:59.107

因为 IEEE 754 标准（用于`float`和的标准`double`）是这么说的。

引用[维基](http://en.wikipedia.org/wiki/NaN)

> 与 NaN 的比较始终返回无序结果，即使与自身进行比较也是如此。比较谓词是信令或非信令，信令版本表示此类比较的无效异常。等式和不等式谓词是无信号的，因此 x = x 返回 false 可用于测试 x 是否是安静的 NaN。如果其他标准比较谓词接收到 NaN 操作数，则它们都是信号，该标准还提供这些其他谓词的非信号版本。谓词 isNaN(x) 确定一个值是否为 NaN，并且永远不会发出异常信号，即使 x 是信号 NaN。

（请注意，.NET 不支持信号 NaN，并且可能将其视为非信号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:24:37.363

那是对的。NaN == NaN 总是错误的。这是一种测试某个变量是否等于 NaN 的方法，例如

> if(x != x) //做某事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:21:07.090

曾经有人[问过这个](https://stackoverflow.com/questions/706566/database-connection-string-info)问题`Double.NaN`。我在那篇文章中能找到的最佳答案是“因为它是这样定义的”。

不是很满意，我同意。

# java - 更改 .JSP 文件的名称

> ID：11518567
> 
> 赞同：2
> 
> 时间：2012-07-17T08:18:27.543
> 
> 标签：java, spring, jsp, url, spring-mvc

我正在开发一个简单的弹簧应用程序。我有几个 jsp，我想更改 jsp 的名称和 URL。我改变了控制器：

```
@RequestMapping(value = "/simpleForm.html", method = RequestMethod.GET)
public void simpleForm(Model model) {
       model.addAttribute(new User());
} 
```

至

```
@RequestMapping(value = "/newName.html", method = RequestMethod.GET)
public void simpleForm(Model model) {
       model.addAttribute(new User());
} 
```

旧`simpleForm.jsp`to的名称`newName.jsp` `user`是我在表格中使用的一个类`simpleform.jsp`

我无法让它工作。我收到 404 未找到 simpleform.jsp。我很困。

编辑：我的视图解析器标签：

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">

        <property name="prefix">
            <value>WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean> 
```

我的网址模式是这样的：

```
<servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/forms/*</url-pattern>
</servlet-mapping> 
```

> 我发现所有链接都得到相同的错误（）资源不可用。甚至那些我没有改名的。

我也试过直接从`newName.jsp`. 还是同样的错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:23:30.780

ViewResolver 的前缀中缺少正斜杠。这应该可以修复您的 404。试一试。

```
<property name="prefix">
<value>/WEB-INF/jsp/</value>
</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:34:35.033

404 错误是一种 HTTP 状态代码，表示您试图在网站上访问的页面在其服务器上无法找到。
如我所见，您的后缀是.jsp。所以试试这个（如果 WebContent 中有任何 newName.jsp）

```
@RequestMapping(value = "/newName", method = RequestMethod.GET)
public void simpleForm(Model model) {
   model.addAttribute(new User());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:21:05.750

改变：

```
@RequestMapping(value = "/newName.html", method = RequestMethod.GET) 
```

至：

```
@RequestMapping(value = "/newName.jsp", method = RequestMethod.GET) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:37:16.433

它应该工作

如果你试试这个网址

```
http://localhost:<port>/AppNAme/forms/newName.html 
```

你的控制器是

```
@RequestMapping(value = "/newName.html", method = RequestMethod.GET)
public ModelAndView simpleForm(Model model) {
       model.addAttribute(new User());

ModelAndView mv = new ModelAndView("jspViewName");
return mv;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T08:29:55.320

仔细检查你在课堂上仍然有`@Controller`注释。我已经看到 404s 被意外删除了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T08:25:18.517

尝试将其更改为

```
 @RequestMapping(value = "/newName.html", method = RequestMethod.GET)
    public String simpleForm(Model model) {
           model.addAttribute(new User());
           return "newName";  // returning the desired view
    } 
```

并确保您已`viewResolver`相应定义，例如

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
</bean> 
```

根据您的应用程序结构更改前缀。它将采用视图（控制器返回的字符串）并将添加前缀和后缀。所以解决的视图将是`/WEB-INF/jsp/newName.jsp`.

# asp.net - 从网络流中读取所有数据

> ID：11518574
> 
> 赞同：0
> 
> 时间：2012-07-17T08:18:44.673
> 
> 标签：asp.net, sockets

我需要让我的用户从我的 mp3 存档服务器下载 mp3s 文件

我的网络中有两台服务器，第一台服务器是（Web 服务器），另一台服务器用于 mp3 格式的音轨，我称之为（sound tack 服务器）。

我需要让用户从音轨服务器下载声音文件。对于这个建议，我正在使用套接字编程。

到目前为止，我所做的是从音轨服务器读取声音文件并通过网络流发送到网络服务器。但是在网络服务器上模拟之前，应该知道每个音轨的大小。

这是因为不仅用户应该知道音轨的大小，而且软件也应该不了解音轨的大小，以便在网络服务器上进行模拟。

特别是关于上述问题，我在以下代码中遇到困难。

```
...
ns = tcpClient.GetStream()
dim recBytes( **?** ) as byte         
'By puting question mark I  am trying to show exactly where I have problem.

ns.read(recBytes,0,recBytes.lentgh)
....
Dim response As HttpResponse = HttpContext.Current.Response
...
response.BinaryWrite(recBytes)
... 
```

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:28:13.643

这里的 recBytes( ? ) 指的是你将用来读取流的缓冲区，它可以是任何东西，如果你选择的数字太小，性能会受到影响，太大，你会耗尽内存。除此之外没有任何限制。对于标准网络通信，很少的 K 就足够了（4096 与任何其他数字一样好）。

顺便说一句：您不需要从 Web 服务器打开单独的流到您的“音轨”（媒体）服务器，只需映射网络路径并将虚拟目录映射添加到您的 Web 服务器，然后客户端将能够直接访问这些文件.

# php - PHP：发送WORD文档文件下载

> ID：11518576
> 
> 赞同：2
> 
> 时间：2012-07-17T08:18:56.783
> 
> 标签：php, file, ms-word, download, content-disposition

这个问题是微不足道的，有很多答案，都一样或几乎一样，但就我而言，它没有按预期解决？目标：使用 PHP 将 WORD 文件作为附件发送（简单......）意思是：这是代码：

```
// send the file to the browser
header("Cache-Control: no-store");
header("Content-Type: application/octet-stream");
//header("Content-type: application/msword");
header('Content-Disposition: attachment; filename="'. basename($filename) . '"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: '. filesize($filename));
ob_clean();
flush();
readfile($filename);
exit(); 
```

好吧，一切似乎都正确，但我保存在计算机上的文件无法被 MS-WORD 读取：它读取一些特殊字符，例如：

> PK！/Œt1« á [Content_Types].xml ...

但如果我从服务器打开原件，一切正常。我错过了一些明显的东西......欢迎任何建议，因为我尝试了几乎所有我读过的方法......但仍然是相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:30:02.530

也许您的 uotput 文件的标题错误。我的脚本中有类似的东西，我用它来下载文件：

```
$tmp = explode(".",$file['filename']);
switch ($tmp[count($tmp)-1]) {
  case "pdf": $ctype="application/pdf"; break;
  case "exe": $ctype="application/octet-stream"; break;
  case "zip": $ctype="application/zip"; break;
  case "docx":
  case "doc": $ctype="application/msword"; break;
  case "csv":
  case "xls":
  case "xlsx": $ctype="application/vnd.ms-excel"; break;
  case "ppt": $ctype="application/vnd.ms-powerpoint"; break;
  case "gif": $ctype="image/gif"; break;
  case "png": $ctype="image/png"; break;
  case "jpeg":
  case "jpg": $ctype="image/jpg"; break;
  case "tif":
  case "tiff": $ctype="image/tiff"; break;
  case "psd": $ctype="image/psd"; break;
  case "bmp": $ctype="image/bmp"; break;
  case "ico": $ctype="image/vnd.microsoft.icon"; break;
  default: $ctype="application/force-download";
}

header("Pragma: public"); // required
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); // required for certain browsers
header("Content-Type: $ctype");
header("Content-Disposition: attachment; filename=\"".$filename."\";" );
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".$fsize);
ob_clean();
flush();
readfile( 'files/'.$file['filename'] ); 
```

我从 db 获取的文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:30:54.737

从您显示的内容的几个字符中，您正在创建一个 OfficeOpenXML (.docx) 文件而不是 BIFF (.doc) 文件，因此内容类型应该是

```
application/vnd.openxmlformats-officedocument.wordprocessingml.document 
```

并且文件扩展名应该是 .docx

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-29T06:41:54.123

调用[https://stackoverflow.com/download-script.php?file=example.doc](https://stackoverflow.com/download-script.php?file=example.doc)

这是下载-script.php 代码

```
if (isset($_GET['file'])) {    
  $file = $_GET['file'];

  if (file_exists($file) && is_readable($file) && preg_match('/\.doc$/',$file)) {
    header('Content-Type: application/doc');
    header("Content-Disposition: attachment; filename=\"$file\"");

    readfile($file);
  }    
} else {
  header("HTTP/1.0 404 Not Found");

  echo "<h1>Error 404: File Not Found: <br /><em>$file</em></h1>";
} 
```

# c# - 将非托管 C++ DLL 动态和静态导入 C# 不起作用

> ID：11518577
> 
> 赞同：1
> 
> 时间：2012-07-17T08:19:02.323
> 
> 标签：c#, c++, dllimport

我正在尝试将一些用非托管 C++ 编写的 32 位和 64 位 DLL 导入到我的 C# 项目中。作为示例，我这样做了：

**C++ DLL 函数**

```
long mult(int a, int b) {
    return ((long) a)*((long) b);
} 
```

**C# 代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace ConsoleApplication2
{
    class DynamicDLLImport
    {
        private IntPtr ptrToDll;
        private IntPtr ptrToFunctionToCall;

        [DllImport("kernel32.dll")]
        public static extern IntPtr LoadLibrary(string dllToLoad);

        [DllImport("kernel32.dll")]
        public static extern IntPtr GetProcAddress(IntPtr hModule, string procedureName);

        [DllImport("kernel32.dll")]
        public static extern bool FreeLibrary(IntPtr hModule);

        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
        private delegate int Multiply(int a, int b);
        private Multiply multiply;

        public DynamicDLLImport(string dllName)
        {
            ptrToDll = LoadLibrary(dllName);
            // TODO: Error handling.

            ptrToFunctionToCall = GetProcAddress(ptrToDll, "mult");
            // TODO: Error handling.

            // HERE ARGUMENTNULLEXCEPTION
            multiply = (Multiply)Marshal.GetDelegateForFunctionPointer(ptrToFunctionToCall, typeof(Multiply));
        }

        public int mult_func(int a, int b)
        {
            return multiply(a, b);
        }

        ~DynamicDLLImport()
        {
            FreeLibrary(ptrToDll);
        }
    }

    class DLLWrapper
    {
        private const string Sixtyfour = "c:\\Users\\Hattenn\\Documents\\Visual Studio 2010\\Projects\\ConsoleApplication2\\ConsoleApplication2\\easyDLL0_64.dll";
        private const string Thirtytwo = "c:\\Users\\Hattenn\\Documents\\Visual Studio 2010\\Projects\\ConsoleApplication2\\ConsoleApplication2\\easyDLL0.dll";
//        [DllImport(Sixtyfour)]
//        public static extern int mult(int a, int b);
        [DllImport(Thirtytwo)]
        public static extern int mult(int a, int b);
    }

    class Program
    {
        static void Main(string[] args)
        {
            int a = 5;
            int b = 4;
            DynamicDLLImport dllimp = new DynamicDLLImport("easyDLL0.dll");

            Console.WriteLine(DLLWrapper.mult(a, b));
            //Console.WriteLine(dllimp.mult_func(a, b));

            Console.ReadKey();
        }
    }
} 
```

我似乎无法让它工作。以下是我收到的错误消息：

1.  当我将 DLLWrapper 类与 32 位 DLL 文件一起使用时，我得到“DLLNotFoundException”，但 DLL 文件正是在该路径中。
2.  当我将 DLLWrapper 类与 64 位 DLL 文件一起使用并将“平台目标”属性更改为“x64”时，我得到相同的“DLLNotFoundException”，如果我尝试使用“x86”构建，那么我得到“BadImageException”。
3.  当我使用 DynamicDLLImport 类时，我总是在代码中用“HERE ARGUMENTNULLEXCEPTION”注释的那一行得到“ArgumentNullException”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:28:48.273

您是如何从 DLL 中导出函数的？Windows DLL 不会自动导出所有函数，并且 C++ 会修饰名称，例如区分函数重载，除非你告诉它不要这样做，但编译器具体如何，其他语言肯定不理解它。

您可以通过启动 Visual Studio 命令提示符并使用命令进行检查

```
dumpbin /EXPORTS "your library.dll" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:25:29.273

The problem turned out to be that the dll was deployed in debug mode and not in a correct way. When it was deployed in release mode, everything seemed to work fine. Anyone having a similar problem should know that compiling the dll in debug mode and just copying it to another computer is not the right way to do it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:33:04.543

Windows 需要能够在运行时定位 DLL，而不仅仅是编译时。将 DLL 放在您的二进制文件夹中，或者放在某个位置，`PATH`静态导入将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:11:52.067

您的 C# 方法声明与 C++ 不匹配：

```
long mult(int a, int b) 

private delegate int Multiply(int a, int b); 
```

尝试将返回类型更改为 long？

# jquery - 向上/向下倾斜

> ID：11518582
> 
> 赞同：2
> 
> 时间：2012-07-17T08:19:19.903
> 
> 标签：jquery

我有这个标记

```
<div id="content" >
      <h1><a href="#">Sample 1</a></h1>
      <img src="" alt="sample 1" />

       <h1><a href="#">Sample 2</a></h1>
      <img src="" alt="sample 2" />

       <h1><a href="#">Sample 3</a></h1>
      <img src="" alt="sample 3" />

       <h1><a href="#">Sample 4</a></h1>
      <img src="" alt="sample 4" />
</div> 
```

我希望在页面加载时隐藏所有图像，然后当我单击每个“h1”时，它的图像会向下滑动，当我再次单击它时，它会向上滑动。1-考虑当我单击“h1”时我不希望所有图像都向下和向上滑动，而只是相关图像向上和向下滑动。

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:22:28.257

它应该像这样简单：

```
//On DOM ready...
$(function () {

    //Hide all `img` elements...
    $("img").hide();

    //Bind click event handler to `#content`, responds to clicks on `h1`
    $("#content").on("click", "h1", function () {

        //Find the immediately following sibling and slide it up/down
        $(this).next().slideToggle();
    });
}); 
```

请注意，上面利用了事件委托，因此只有一个事件处理程序存在，而不是每个`h1`元素一个，这样更有效。

**参考资料**：

*   [`.on()`](http://api.jquery.com/on/)
*   [`.next()`](http://api.jquery.com/next/)
*   [`.slideToggle()`](http://api.jquery.com/slideToggle/)
*   [`.hide()`](http://api.jquery.com/hide/)

我建议您花一些时间阅读 jQuery API 并了解它。仅通过查看您可用的方法就应该不难弄清楚上述内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T08:31:56.863

使用太多`<h1>`元素对 SEO 不友好，所以使用`<h2>`!

## *[jsBin 演示](http://jsbin.com/afufax/edit#javascript,html,live)*

```
$('#content h2').next('img').hide();

$('#content h2').click(function( e ){
    e.preventDefault();     // prevent default anchor behavior
    var img = $(this).next('img');
    var isVisible= img.is(':visible') ? img.slideUp() : ($('img').slideUp()) (img.slideDown());
}); 
```

此代码允许您切换打开的图像**，但也可以重新关闭打开的图像！**

* * *

我认为您可能难以理解的代码可能是三元运算符。
好像：

`var var_name = statement ? (do this if stetement is true) : (do this if false) ;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:23:39.793

你可以试试

用于隐藏所有图像

```
$("img").hide(); 
```

用于在 h1 旁边显示图像，点击

```
$("h1").click(function(){ 
      $(this).next('img').slideToggle();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:35:58.620

也可以这样做：

```
$(document).ready(function(){
    $('#content img').hide();
    $('#content a').click(function(evt){
        $(this).parent().next('img').slideToggle();
        //alert($(this).parent()[0].outerHTML); // parent is H2 test
        evt.preventDefault(); // not follow clicked link
    });
}); 
```

# java - 阻止 EditText contextMenu

> ID：11518583
> 
> 赞同：0
> 
> 时间：2012-07-17T08:19:23.500
> 
> 标签：java, android, android-edittext, textselection

我想创建一个具有以下更改的 EditText：

1.  点击它不会显示键盘
2.  在 SINGLE 之后，短按它会进入选择模式（当我说选择模式时，我的意思是您可以选择文本的一部分（带有两个指针）的模式。您可以通过长按文本来进入此模式。）
3.  选择文本后，将不会显示复制/粘贴/剪切工具栏

首先，我想我可以创建一个 OnTouchListener 并立即返回 true，但是它会阻止我做第二件事（我不知道该怎么做）。

我寻找了一个让 EditText 进入选择模式的命令，但我能找到的只是一种从中获取所选文本的方法......

谢谢！

编辑：我成功制作了 1 和 2，但工具栏仍然显示（尝试过`unregisterForContextMenu`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:07:55.120

您可以使用`edittex.setCustomSelectionActionModeCallback`

```
setCustomSelectionActionModeCallback(new Callback() {
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        public void onDestroyActionMode(ActionMode mode) {                  
        }

        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            return false;
        }
    }); 
```

这将被阻止打开edittex的上下文菜单

# php - 如何在 PHP 中围绕 Shortcodes (Echo'd) 添加 IF 语句？（隐藏/显示标签）

> ID：11518584
> 
> 赞同：0
> 
> 时间：2012-07-17T08:19:22.973
> 
> 标签：php, wordpress, if-statement, tabs, conditional

我使用以下简码在我的 php wordpress 模板中插入了一组标签

```
 <?php echo do_shortcode('[tabs style="boxed"]
            [tab title="1"][some content here][/tab]
            [tab title="2"]' . get_the_excerpt() . '[/tab]
            [/tabs]');  ?> 
```

这工作正常。

我在自定义帖子中创建了 2 个名为“tab_contact_1”和“tab_contact_2”的自定义复选框字段。

我想向选项卡添加条件逻辑，以便如果复选框为真/选中，则选项卡显示。如果没有，它会隐藏。（这是因为有些帖子有此内容可用，有些则没有）

我有类似的逻辑适用于网站上的其他自定义字段，但不使用标签，我认为我可以应用相同的心态。我试了一下代码（见下文），但页面没有加载。我做错了什么，但无法弄清楚。希望得到一些指导。

多谢

```
<?php echo do_shortcode('[tabs style="boxed"]
' . if ( get_post_meta($post->ID, 'tab_contact_1', true)) { . '
[tab title="1"][some content here][/tab]
'. } .'
' . if ( get_post_meta($post->ID, 'tab_contact_2', true)) { . '
[tab title="2"]' . get_the_excerpt() . '[/tab]
'. } .'
[/tabs]');  ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:24:55.350

好的做法不是`echo`单行，而是将它们存储在一个变量中并像这样回显最终代码：

```
<?php

$result = '';

$result .= '[tabs style="boxed"]';
if ( get_post_meta( $post->ID, 'tab_contact_1', true ) != 'false' ) {
    $result .= '[tab title="1"][some content here][/tab]';
}
if ( get_post_meta( $post->ID, 'tab_contact_2', true ) != 'false' ) {
    $result .= '[tab title="2"]' . get_the_excerpt() . '[/tab]';
}
$result .= '[/tabs]';

echo do_shortcode( $result );

?> 
```

# jenkins - 查看谁在 Jenkins 中禁用了构建

> ID：11518587
> 
> 赞同：9
> 
> 时间：2012-07-17T08:19:43.990
> 
> 标签：jenkins

是否可以看到在 Jenkins 中禁用构建的用户？通过 UI、管理控制台还是使用插件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T09:29:48.160

是的，您可以使用[作业配置历史](http://wiki.jenkins-ci.org/display/JENKINS/JobConfigHistory+Plugin)插件查看它

# html - HTML 文本和密码输入字段的大小不同 Internet Explorer

> ID：11518591
> 
> 赞同：5
> 
> 时间：2012-07-17T08:20:07.493
> 
> 标签：html

我正在为我的登录表单使用此表单设置：

```
<tr>
     <td class="label"> Username:</td>
     <td> <input id="id_username" type="text" name="username" maxlength="30" /></td>
</tr>
<tr>
     <td class="label"> Password:</td>
     <td> <input a="text" type="password" name="password" id="id_password" /></td>
</tr> 
```

使用 firefox 时，两个输入框的大小相同。但是，当我在 IE 9 上时，密码字段更小。

摆脱这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:25:07.753

使用 CSS 将固定`width`值应用于元素，例如：

```
.fixed-input {
    width: 150px;
}
....
<input class="fixed-input" id="id_username" type="text" name="username" maxlength="30" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T01:49:19.480

我遇到了同样的问题。我添加了宽度样式，但它们看起来仍然不同。

事实证明，文本和密码输入的填充和边框颜色也不相同，这是造成差异的原因。

确保为密码和文本输入设置以下样式属性：

```
width: 200px;
font-family: sans-serif;
font-size: 15px;
padding: 3px;
border: 1px solid black; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:24:44.627

最好的方法是为这些元素定义样式并设置适当的宽度。maxlength 属性可能会增加用户字段的大小。

# c# - 如何创建包含不同类型问题的测验？

> ID：11518593
> 
> 赞同：0
> 
> 时间：2012-07-17T08:20:11.010
> 
> 标签：c#, asp.net, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我正在尝试开发一个简单的测验引擎，允许系统管理员创建测验。我所做的如下：我创建了一个 ListView 用于插入测验标题和描述，而对于测验本身的内容，例如问题和答案，我对此有很大的问题。由于每个测验都有不同数量的问题。并且每个问题都有不同数量的答案，因为该问题可能是具有四个答案的多项选择题，并且可能是真假问题。那么，满足所有这些要求的最佳方式是什么？任何想法？您能否为我提供示例或代码片段？

仅供参考，我有以下数据库设计：

```
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
QuestionImage Table: ID, QuestionID, URL
Answer Table: AnswerID, Answer
QuizContent Table: ID, QuizID, QuestionID, AnswerID 
```

我的 ASP.NET 代码：

```
<div align="center">
            <asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID" 
                DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" >

                <EditItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" Width="20px" runat="server" CommandName="Update" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" Width="20px" runat="server" CommandName="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </EditItemTemplate>
                <EmptyDataTemplate>
                    <table id="Table1" runat="server" style="">
                        <tr>
                            <td>
                                No data was returned.</td>
                        </tr>
                    </table>
                </EmptyDataTemplate>
                <InsertItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/create 2 48.png" Width="20px" runat="server" CommandName="Insert" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="images/clear3.png" Width="20px" runat="server" CommandName="Cancel" />
                        </td>

                        <%--<td>
                            &nbsp;</td>--%>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </InsertItemTemplate>
                <ItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" Width="20px" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit224.png" Width="20px" runat="server" CommandName="Edit" />

                            <asp:ImageButton ID="SelectButton" ImageUrl="images/select.png" Width="20px" runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <LayoutTemplate>
                    <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Title</th>
                                <th style="border-bottom:2px solid #003366; ">Description</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>
                </LayoutTemplate>
                <SelectedItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="images/delete24.png" Width="20px" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="images/edit224.png" Width="20px" runat="server" CommandName="Edit" />
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </SelectedItemTemplate>
            </asp:ListView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 

                SelectCommand="SELECT * FROM [Quiz]" 
                DeleteCommand="DELETE FROM [Quiz] WHERE [QuizID] = @QuizID" 
                InsertCommand="INSERT INTO [Quiz] ([Title], [Description]) VALUES (@Title, @Description)" 

                UpdateCommand="UPDATE [Quiz] SET [Title] = @Title, [Description] = @Description WHERE [QuizID] = @QuizID">
                <DeleteParameters>
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </UpdateParameters>
            </asp:SqlDataSource>
    </div> 
```

**更新：**

我正在尝试使测验引擎尽可能动态化。由于每个问题我有不同数量的可能答案，我希望用户先输入答案的数量，然后为他创建文本框。我已经写了代码，但是没有用。没有错误，但没有为我创建文本框。**那么该怎么做呢？**

我的 ASP.NET 代码（我创建了一个面板，但从未使用过它）：

```
<div>
        <asp:Label ID="lblText" runat="server" Text="How many answers?" />
        <asp:TextBox ID="NumOfTextBoxes" runat="server"></asp:TextBox>
        <asp:Button ID="insertAnswerTextBox" runat="server" Text="Enter" OnClick="insertAnswerTextBox_OnClick" />

        <asp:Panel ID="AnswersForm" runat="server" Visible="false">
            <asp:TextBox ID="AnswerTextBox" runat="server"></asp:TextBox>
        </asp:Panel>
    </div> 
```

代码隐藏：

```
protected void insertAnswerTextBox_OnClick(object sender, EventArgs e)
    {
        PlaceHolder PlaceHolder1 = new PlaceHolder();
        // Get the number of textbox to create.
        int number = System.Convert.ToInt32(NumOfTextBoxes.Text);
        for (int i = 1; i <= number; i++)
        {
            TextBox AnswerTextBox = new TextBox();

            // Set the label's Text and ID properties.
            AnswerTextBox.Text = "AnswerTxtBox" + i.ToString();
            AnswerTextBox.ID = "AnswerTxtBox" + i.ToString();
            PlaceHolder1.Controls.Add(AnswerTextBox);
            // Add a spacer in the form of an HTML <br /> element.
            PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:27:40.097

您的代码是正确的，除了您忘记添加的一件事。您已将所有文本框添加到占位符控件，但尚未将占位符添加到 Web 表单。将以下行添加到您的`insertAnswerTextBox_OnClick`.

```
 form1.Controls.Add(PlaceHolder1); 
```

**完整的代码应该是这样的**

```
protected void insertAnswerTextBox_OnClick(object sender, EventArgs e)
{
    PlaceHolder PlaceHolder1 = new PlaceHolder();
    // Get the number of textbox to create.
    int number = System.Convert.ToInt32(NumOfTextBoxes.Text);
    for (int i = 1; i <= number; i++)
    {
        TextBox AnswerTextBox = new TextBox();

        // Set the label's Text and ID properties.
        AnswerTextBox.Text = "AnswerTxtBox" + i.ToString();
        AnswerTextBox.ID = "AnswerTxtBox" + i.ToString();
        PlaceHolder1.Controls.Add(AnswerTextBox);
        // Add a spacer in the form of an HTML <br /> element.
        PlaceHolder1.Controls.Add(new LiteralControl("<br />"));
    }
    form1.Controls.Add(PlaceHolder1); 
} 
```

# ffmpeg - 安装ffmpeg-php时出错

> ID：11518595
> 
> 赞同：1
> 
> 时间：2012-07-17T08:20:23.007
> 
> 标签：ffmpeg, ffmpeg-php

我正在尝试安装 ffmpeg 和 ffmpeg-php，但在尝试使用 make 时出现错误。我试图深入了解它，但它让我难住了。我试图找到哪个文件引用了 swscale.h 但没有任何运气。有没有人遇到过这个错误？

```
root@vps [/usr/local/src/ffmpeg-php-0.6.0]# make
/bin/sh /usr/local/src/ffmpeg-php-0.6.0/libtool --mode=compile gcc  -I. -
I/usr/local/src/ffmpeg-php-0.6.0 -DPHP_ATOM_INC -I/usr/local/src/ffmpeg-
I/usr/local/src/ffmpeg-php-0.6.0 -DPHP_ATOM_INC -I/usr/local/src/ffmpeg-
php-0.6.0/include -I/usr/local/src/ffmpeg-php-0.6.0/main -
I/usr/local/src/ffmpeg-php-0.6.0 -I/usr/local/include/php -
I/usr/local/include/php/main -I/usr/local/include/php/TSRM -
I/usr/local/include/php/Zend -I/usr/local/include/php/ext -
I/usr/local/include/php/ext/date/lib -I/usr/local/include/libavcodec/ -
I/usr/local/include/libavformat/ -I/usr/local/include/libavutil/ -
I/usr/local/include/libswscale/ -I/usr/local/include/libavfilter/ -
I/usr/local/include/libavdevice/  -I/usr/local/include/php -DHAVE_CONFIG_H
-g -O2 -Wall -fno-strict-aliasing   -c /usr/local/src/ffmpeg-php-
0.6.0/ffmpeg-php.c -o ffmpeg-php.lo
gcc -I. -I/usr/local/src/ffmpeg-php-0.6.0 -DPHP_ATOM_INC -
I/usr/local/src/ffmpeg-php-0.6.0/include -I/usr/local/src/ffmpeg-php-
0.6.0/main -I/usr/local/src/ffmpeg-php-0.6.0 -I/usr/local/include/php -
I/usr/local/include/php/main -I/usr/local/include/php/TSRM -
I/usr/local/include/php/Zend -I/usr/local/include/php/ext -
I/usr/local/include/php/ext/date/lib -I/usr/local/include/libavcodec/ -
I/usr/local/include/libavformat/ -I/usr/local/include/libavutil/ -
I/usr/local/include/libswscale/ -I/usr/local/include/libavfilter/ -
I/usr/local/include/libavdevice/ -I/usr/local/include/php -DHAVE_CONFIG_H -g 
-O2 -Wall -fno-strict-aliasing -c /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-
php.c  -fPIC -DPIC -o .libs/ffmpeg-php.o
/usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:46:21: error: swscale.h: No 
such file or directory
/usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c: In function 'zm_info_ffmpeg':
/usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:156: error: 'LIBSWSCALE_IDENT' 
undeclared (first use in this function)
/usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:156: error: (Each undeclared 
identifier is reported only once
/usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:156: error: for each function 
it appears in.)
make: *** [ffmpeg-php.lo] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:01:51.547

安装**libswscale-dev**在 Debian Squeeze 上帮助了我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T19:50:24.573

`swscale.h`好像找不到 您应该检查该文件是否包含在您的 FFmpeg 安装中，如果是，则该 ffmpeg-php 具有指定的正确路径集`-I/path/to/includes`以找到它。如果没有，您可以添加正确的目录，例如：

```
CFLAGS=-I/path/to/ffmpeg/includes ./configure
make 
```

如果找不到`swscale.h`，可能是 FFmpeg 和 ffmpeg-php 版本不匹配。前者的开发非常活跃，ffmpeg-php 期望找到的部分可能不再存在。检查 ffmpeg-php 的文档以查看它是否与特定版本相关联。

# android - Android 布局我无法在同一行中正确定位三个项目

> ID：11518596
> 
> 赞同：1
> 
> 时间：2012-07-17T08:20:23.550
> 
> 标签：android, layout, position

所以我在我的 android 应用程序的同一行中定位三个项目时遇到问题。首先，让我向您展示我所拥有的屏幕截图：

![图像问题](../Images/04ff445b4208eec1cf628d074f1e96ba.png)

我的问题是我希望两个图像按钮位于该行的最左侧和最右侧，并且大文本保持在中心。

我已经尝试过相对布局但没有成功，我也为每个项目尝试了 android:gravity 但它也不起作用。

这是我的布局的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ffffff"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/imageButton1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/settings" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="@color/black" />

            <ImageButton
                android:id="@+id/imageButton2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

        </LinearLayout>

    </LinearLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:24:59.920

请尝试使用此代码。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ffffff"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/imageButton1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/settings" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Large Text"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="@color/black" 
                android:gravity="center"/>

            <ImageButton
                android:id="@+id/imageButton2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

        </LinearLayout>

    </LinearLayout> 
```

# windows - 看不懂中文文本

> ID：11518597
> 
> 赞同：0
> 
> 时间：2012-07-17T08:20:26.357
> 
> 标签：windows, fonts

如果我通过浏览器（例如：Chrome）打开中文网页，虽然我没有安装中文字体（仅使用可用的 Windows 字体），但网页可以显示中文文本。然而，在几乎所有的 Windows 软件上，中文文本都无法准确显示。例如：“ÐìÖÝ¿Ðý Ä¸Ö®ËÀ”。不知道Chrome用什么字体来显示中文文本？为什么其他 Windows 软件不使用这些字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:33:09.783

Microsoft（和大多数 Windows ISV）已选择在其大部分软件中使用**代码页**，这以牺牲可移植性为代价减少了内存和磁盘需求。如果要运行需要操作系统使用的代码页以外的代码页的软件，则需要使用 AppLocale。

另一方面，Unicode 软件将在任何安装了适当字体的 Windows 代码页上正确显示，但需要在 9x 版本的 Windows 上提供额外支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:30:14.103

像 Chrome 这样的浏览器被配置为显示特定编码的默认字体，或者它从其嵌入的字体类型中检索页面 mega 标记的字符集建议的字体类型。

有时如果浏览器猜错了字符编码，你仍然会看到乱码，必须手动选择正确的编码才能正确显示字符。

对于桌面应用程序，字体要么在环境中，要么您必须将字体硬编码到应用程序中。

# ios - 带有后退按钮的导航栏不隐藏

> ID：11518607
> 
> 赞同：1
> 
> 时间：2012-07-17T08:20:59.810
> 
> 标签：ios, uinavigationbar, back-button

我的导航栏有问题。

我的应用程序的第一个屏幕是欢迎屏幕，屏幕中央有两个经典按钮。没有栏（选项卡或导航，并且状态通过 setStatusBarHidden 中的隐藏`viewDidLoad`）。我只实现了其中一个按钮，但两者的工作方式相同（两个屏幕相似）。因此，第一个按钮加载了一个“注册”屏幕（a `UITableViewController`），其中包含一个要填写的表单。在那里，显示了状态栏，我添加了一个导航栏（在我的视图控制器的属性面板中），带有一个“发送”按钮在右上角。

在我的“导航项”的属性面板中（因为它被称为），我输入了正确显示的后退按钮的名称（虽然我想更改名称，但我稍后会这样做）。

我的问题是当我点击后退按钮时，它带我回到“欢迎”屏幕但状态栏没有隐藏，有一个没有标题和按钮的导航栏，我找不到方法隐藏它们。我尝试使用`viewDidLoad`, `viewDidAppear`, `viewDidUnload`（在注册视图中）但没有任何效果（我可以隐藏状态栏，但视图已加载，因此非隐藏导航栏和我的内容之间有一个黑色空间）。

顺便说一句，我使用情节提要完成了大部分设计，而不是使用代码，但我不介意同时使用两者。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:58:53.493

将状态栏和导航栏隐藏在`viewWillAppear`：方法中而不是`viewDidLoad`：方法中。如果您不想显示`status bar or navigation bar`，请将该代码放在`AppDelegate`Class 中。

**编辑：**

这将在您的视图控制器中隐藏您的导航栏。将其放入`viewWillAppear`：

```
self.navigationController.navigationBarHidden = YES; 
```

这会隐藏您的状态栏。

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated: UIStatusBarAnimationNone]; 
```

您的视图控制器应该`wantsFullScreenLayout`设置为`YES`，以及隐藏状态栏。黑色空间显示您的视图在您没有时自动调整大小。您`status bar or navigation bar`需要在右侧的故事板“尺寸检查器”中检查自动调整大小侧窗格选项卡。

**编辑1：** 这将用动画隐藏你的酒吧：

```
[self.navigationController setNavigationBarHidden:YES animated:YES];
[[UIApplication sharedApplication]setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

# jasmine - 在 jasmine 或 mocha 中声明“待定”规范/测试

> ID：11518609
> 
> 赞同：39
> 
> 时间：2012-07-17T08:21:05.860
> 
> 标签：jasmine, mocha.js

我想描述应该在代码中的规范，但稍后会添加它们的实现。在测试结果中，我希望看到它们既没有通过也没有失败，而是“正在等待”实施。

我很感兴趣是否可以在 mocha 或 jasmine 中开箱即用。

谢谢

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-17T15:25:21.920

您可以在 mocha 和 jasmine 中使用`xit`（而不是`it`）和`xdescribe`（而不是 describe）声明禁用的函数。

如果您希望测试显示为待处理，在 mocha 中，您可以在函数调用中将第二个参数留空`it()`。例如：

```
describe('Something', function () {
    it('Should be pending')
    xit('Should be disabled, i.e not appear on the list')
}); 
```

更新：如果发生这种合并，Mocha中`xit`/的行为可能会发生变化： [https ://github.com/visionmedia/mocha/pull/510](https://github.com/visionmedia/mocha/pull/510)`xdescribe`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-05-26T07:27:50.203

从 Jasmine 2.0 开始，编写`xit()`而不是`it()`为规范将其标记为待处理（如已接受答案的评论中所述）。

`pending()`此外，您可以在规范中的任何位置调用一个函数来将其标记为待处理：

```
it("can be declared by calling 'pending' in the spec body", function() {
  expect(true).toBe(false);
  pending();
}); 
```

另请参阅有关[Jasmine 2.0 中未决规范的文档](https://jasmine.github.io/2.0/introduction.html#section-Pending_Specs)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-05-28T22:53:12.757

在 mocha 中，您还可以使用`skip`：

```
describe('my module', function() {
  it.skip('works', function() {
    // nothing yet
  });
}); 
```

您也可以`describe.skip`跳过整个部分。

# javascript - 如果窗口调整大小，则卸载 jquery 函数

> ID：11518612
> 
> 赞同：0
> 
> 时间：2012-07-17T08:21:30.933
> 
> 标签：javascript, jquery, html, css, window

如果浏览器窗口小于 944 像素，我会尝试卸载功能。我开始写这个

```
$(window).resize(function() {
            if ($(window).width() >= '944') {
                        $(window).load(function() {
                            $('#slider').nivoSlider();
                        });
                    } else {
                        alert($(window).width());
                        if ($(window).width() <= '944') {
                        $(window).unload(function() {
                            $('#slider').nivoSlider();
                        });
                    }
            }
            }); 
```

但我卡住了。我想如果用户输入，验证分辨率，如果超过 944px 加载 jquery 函数，但是如果浏览器调整大小或小于 944px 的分辨率，函数将被卸载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:26:29.090

我对您的问题有不同的解决方案；您可以为 <944px 的窗口宽度准备一个新的滑块蒙版（就像滑块但没有 nivoSlider 功能），当浏览器宽度 <944 像素时 niveSlider 将被隐藏并且您的蒙版将被看到。

一探究竟：

```
$(window).resize(function() {
    windowWidth = $(this).width();//you need to use this for changable values
    if ( windowWidth > 943) {

       $('#sliderMask').hide();
       $('#slider').show();
       $(window).load(function() {
         $('#slider').nivoSlider();
       });

    } else if ( windowWidth < 944) {

       $('#slider').hide();// hide your nivoSlider
       $('#sliderMask').show();// show your basic slider mask

    }
}); 
```

请注意：您需要使用 $(this) 来获取当前值。

[这是给你的 jsfiddle 示例；从浏览器的开发者面板检查控制台日志](http://jsfiddle.net/pat8h)

# android - 如何在条件下使 ViewFlipper 中的相对布局消失

> ID：11518614
> 
> 赞同：2
> 
> 时间：2012-07-17T08:21:39.400
> 
> 标签：android, xml, android-relativelayout, viewflipper

我有一个 XML，在那个 XML 中我有一个 RelativeLayout 说 R1，现在在 R1 里面我有一个 ViewFlipper，在 ViewFlipper 里面我有 7 个相对布局，如果我在我的 UI 上加载所有七个，一切正常，但条件我只想要 3要在 UI 上显示的相对布局（在 ViewFlipper 内）。谁能帮我把剩下的 4 个相对布局变成 View.GONE。我尝试设置它们

```
 if(X==Y){
            findViewById(R.id.relativeA).setVisibility(View.GONE);
        findViewById(R.id.relativeB).setVisibility(View.GONE);
        findViewById(R.id.relativeC).setVisibility(View.GONE);
        findViewById(R.id.relativeD).setVisibility(View.GONE);
            } 
```

但这不起作用。我在要求条件下将它设置在 onCreate 中，但是只有在启动活动并且当我用手指到处乱扔时，这个视图才会消失，所有布局都会出现在 UI 上。

现在我剩下的唯一解决方案是创建另一个具有所需相对布局的 XML，但问题是我的 XML 非常重，我不想使用最后一个选项。请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:17:59.503

您可以使用`viewFlipper.removeViewAt(index)`提供要删除的视图的索引（位置）。

或者

您可以使用`viewFlipper.removeView(viewFlipper.findViewById(ID_OF_RELATIVE_LAYOUT_TO_REMOVE))`

还有一个辅助方法叫做

`removeViews(int start, int count)`一次删除多个视图。

有关更多信息，您可以查看[ViewGroup - Android 文档](http://developer.android.com/reference/android/view/ViewGroup.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:35:48.217

不要隐藏视图，而是尝试删除不需要的视图，例如

```
viewfliper.removeViewAt(relativeA POSITION); 
```

# fakeiteasy - 如何使用 FakeItEasy 伪造代表

> ID：11518616
> 
> 赞同：6
> 
> 时间：2012-07-17T08:21:58.523
> 
> 标签：fakeiteasy

当我尝试伪造委托类型时，我得到 System.InvalidCastException

```
[TestMethod]
public void TestDelegateFake()
{
    var func = A.Fake<Func<long, object>>();

    A.CallTo(() => func(A<long>.Ignored))
        .Returns(new {});

    func(123);
} 
```

我怎么伪造代表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T19:49:22.413

我认为您必须明确指定调用方法：

```
A.CallTo(() => func.Invoke(A<long>.Ignored)).Returns(new {}); 
```

# ios - 应用程序在调试器中运行不同

> ID：11518619
> 
> 赞同：0
> 
> 时间：2012-07-17T08:22:21.463
> 
> 标签：ios

当前正在处理应用程序并且在模拟器或设备上运行时表现正常。当您关闭并重新打开应用程序时，它的行为很奇怪。

例如，我想在设备（iPad）上上传应用程序，第一次运行一切正常，然后我关闭应用程序，它在后台打开并且行为奇怪，单元格不再具有相同的顺序。

如果您从 Xcode 中删除该应用程序并在设备恢复正常后再次运行它。

我尝试了两种方法：发布和调试。我检查了代码并取消了分配。有人可以帮我提供更多建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:28:27.513

我想你的意思是说“关闭”时按下主页按钮。iOS 将您的应用程序转换为特殊的挂起状态，并且您似乎没有正确地从中恢复。`applicationWillEnterForeground`当您的应用程序从挂起状态恢复时，iOS 会发送 通知，您可能需要采取与第一次启动的应用程序不同的行为。

[在这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW21)您可以找到有关此方法的更多信息。

# mysql - 使用 mysql 表在表上搜索？

> ID：11518623
> 
> 赞同：0
> 
> 时间：2012-07-17T08:22:42.163
> 
> 标签：mysql, sql

我在面试中问了一个问题

具有以下字段“price”、“tool”、“range_max”、“range_min”、“age_of_tool”的表单也可以为 NULL。

你将如何实现对表查询的搜索？

我的回答是

我会在搜索时使用“AND”...
你认为我应该给他们什么是正确的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:30:19.910

就个人而言，我认为他们正在寻找基于可用条件的智能搜索想法，而不是您要使用的逻辑连接条件。

与 Ajay 所说的相反，AND 搜索更合适。在 Internet 上搜索内容时，请从您自己的角度考虑。如果您查找“红色”事物和“小”事物，您会期望搜索结果仅包含红色的小事物。

否则，请查看这些字段。他们几乎告诉你你需要搜索什么。例如，任何使用“range_min”来区分的东西几乎总是：-

```
WHERE [SomeValue] > range_min 
```

从逻辑上考虑如何在搜索中使用每个字段，您可能会比您在这个问题上收到的任何现成的答案更好地*理解。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:24:56.047

不，如果你想在每一列中搜索，你应该使用`OR`代替。`AND`

因为当我们使用`AND`then 值必须存在于所有列中但`OR`如果它存在于一列中，它将根据您指定的搜索条件向您显示一些记录。

# c# - 如何将 BitmapData 中的数据绑定到 WPF 图像控件？

> ID：11518625
> 
> 赞同：1
> 
> 时间：2012-07-17T08:22:57.247
> 
> 标签：c#, wpf, image, bitmapdata

我正在使用 MVVM，在我的 ViewModel 中我有一些 BitmapData 集合。我希望它们通过数据绑定以图像的形式出现在我的视图中。

我怎样才能做到这一点？

* * *

解决方案：

```
[ValueConversion(typeof(BitmapData), typeof(ImageSource))]
public class BitmapDataConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        BitmapData data = (BitmapData)value;
        WriteableBitmap bmp = new WriteableBitmap(
            data.Width, data.Height,
            96, 96,
            PixelFormats.Bgr24,
            null);
        int len = data.Height * data.Stride;
        bmp.WritePixels(new System.Windows.Int32Rect(0, 0, data.Width, data.Height), data.Scan0, len, data.Stride, 0, 0);
        return bmp;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:03:01.070

[您可以从图像文件路径设置Image.Source](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)的事实取决于自动转换的存在（由[ImageSourceConverter](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesourceconverter.aspx)提供）。

如果要将 Image.Source 绑定到[BitmapData](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.bitmapdata.aspx)类型的对象，则必须编写一个如下所示的[绑定转换器。](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)但是，您必须了解从 BitmapData编写[WritableBitmap的详细信息。](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)

```
[ValueConversion(typeof(System.Drawing.Imaging.BitmapData), typeof(ImageSource))]
public class BitmapDataConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        System.Drawing.Imaging.BitmapData data = (System.Drawing.Imaging.BitmapData)value;
        WriteableBitmap bitmap = new WriteableBitmap(data.Width, data.Height, ...);
        bitmap.WritePixels(...);
        return bitmap;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

也许[这个问题](https://stackoverflow.com/q/8127001/1136211)有助于实现转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:14:59.750

解决方案，感谢 Clemens。

```
[ValueConversion(typeof(BitmapData), typeof(ImageSource))]
public class BitmapDataConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        BitmapData data = (BitmapData)value;
        WriteableBitmap bmp = new WriteableBitmap(
            data.Width, data.Height,
            96, 96,
            PixelFormats.Bgr24,
            null);
        int len = data.Height * data.Stride;
        bmp.WritePixels(new System.Windows.Int32Rect(0, 0, data.Width, data.Height), data.Scan0, len, data.Stride, 0, 0);
        return bmp;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

# android - 下载 png 图像

> ID：11518627
> 
> 赞同：0
> 
> 时间：2012-07-17T08:23:02.290
> 
> 标签：android, png

我需要从 Internet 检索 png 图像。我有指向图像的正确 URL，它是这样的：

![在此处输入图像描述](../Images/f527cf8a1ddc1e7fdc4f863de46b342a.png)

所以，我有这样的 URL 对象：

```
URL url = new URL(methodThatLoadsTheStringPointingToMyURL()); 
```

我可以得到这样的 InputStream：

```
InputStream is = url.openStream(); 
```

但是，我知道将其解码为 Drawable 的唯一方法是使用 BitmapDrawable 构造函数，这会破坏 PNG 透明度。

有什么办法可以保持 PNG 的透明度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:25:51.990

[http://www.libpng.org/pub/png/libpng.html](http://www.libpng.org/pub/png/libpng.html)

有能力的链接必须帮助您解决保留透明度的问题。它是一个读取和写入 png 图像数据的标准库

# php - 如何在 PHP 中构建二维数组？

> ID：11518631
> 
> 赞同：0
> 
> 时间：2012-07-17T08:23:08.507
> 
> 标签：php, arrays, multidimensional-array

我正在尝试将值推送到这样的数组中：

```
$scoreValues[$i][] = $percent ;
$scoreValues[$i][] = '<span id="item'.$i.'" class="suggestElement" data-entityid="'.$row['id'].'" data-match="'.$percent.'">'.rawurldecode($row['name']).'</span>' ; 
```

我基本上想将 $percent 与字符串链接在一起，所以我得到如下输出：

```
array (0 > array('46.5', '<span etc etc') 
```

然后我计划按百分比子数组排序，这样我的得分最高的字符串就在顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:31:14.657

最简单的方法是使用两个数组：

```
$percents[$i] = $percent;
$scores[$i] = "<span....>"); 
```

或一个数组，但索引如下

```
$data = new arrray('percents' => array(), 'scores' => array());
$data['percents'][$i] = $percent;
$data['scores'][$i] = "<span....>"); 
```

完成此操作后，您可以使用以下命令对数组进行排序[`array_multisort`](http://php.net/manual/fr/function.array-multisort.php)：

```
array_multisort(
   $data['percents'], SORT_DESC,
   $data['scores']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:30:16.290

在第二行中，您需要指定第二个数组的索引：

```
$scoreValues[$i][$j] = '<span id="item'.$i.'" class="suggestElement" data-entityid="'.$row['id'].'" data-match="'.$percent.'">'.rawurldecode($row['name']).'</span>' ; 
```

所以你基本上需要 2 个计数器，一个用于外部数组 ($i)，一个用于内部数组 ($j)。

**编辑：**

你让我对这个问题有点困惑，似乎你需要的不是多维数组，而是一个简单的数组：

```
$scoreValues[$percent] = '<span id="item'.$i.'" class="suggestElement" data-entityid="'.$row['id'].'" data-match="'.$percent.'">'.rawurldecode($row['name']).'</span>' ; 
```

请注意，这需要`$percent`是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:37:40.147

尝试这个：

```
$val = array(
    'percent' => $percent,
    'html' => '<span id="item' . $i .
              '" class="suggestElement" data-entityid="'.$row['id'].
              '" data-match="'.$percent.'">'.rawurldecode($row['name']).
              '</span>'
);
// This just pushes it onto the end of the array
$scoreValues[] = $val ;
// Or you can insert it at an explicit location
//$scoreValues[$i] = $val; 
```

# coffeescript - 升级到 2.0.1 后加载语法文件 CoffeeScript.tmLangauge 时出错

> ID：11518632
> 
> 赞同：5
> 
> 时间：2012-07-17T08:23:14.833
> 
> 标签：coffeescript, textmate, sublimetext, sublimetext2, textmatebundles

![启动程序时的 SublimeText 错误消息](../Images/522d0aee0fc88f4e8a0cf2c525e051e5.png)

我已经尝试过`Package Control: Remove Pacakage`，然后再次安装。`CoffeeScript.tmLanguage` **应该**是正常的。还有其他人遇到这种情况吗？如何修复？

这是整个[CoffeeScript.tmLanguage](http://pastie.org/4270481)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T08:28:21.997

**已解决：** 原来，插件更改了其`CoffeeScript.tmLanguage`文件的位置。您所要做的就是`View -> Syntax ->`选择CoffeeScript 以外的任何内容，然后再次切换回CoffeeScript。Sublime Text 会找出新的位置。

# iphone - 使用界面生成器设置根控制器

> ID：11518638
> 
> 赞同：4
> 
> 时间：2012-07-17T08:23:33.407
> 
> 标签：iphone, xcode, rootview

当我将导航控制器拖到情节提要上时，我得到了导航控制器和表格视图控制器。我不想要表格视图，所以我删除它，插入一个常规视图控制器，将其类更改为例如 LoginView，右键单击并拖动：“关系根视图控制器”从导航控制器到视图控制器。

现在，当我运行应用程序时，我得到

```
Application windows are expected to have a root view controller at the end of application launch 
```

我不想以编程方式解决这个问题，因为上次我这样做是开箱即用的（xcode 4.2，现在我升级到 4.3）。此外，在 4.2 中添加导航控制器时，它带有一个视图控制器，而不是一个表视图控制器。

导航控制器设置了“是初始视图控制器”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:57:53.350

Try doing it the other way around.

*   Delete the navigation controller
*   Select the lasting view controller, in the menu "Editor > Embed in > Navigation Controller"
*   Check if the navigation controller has "Is Initial View Controller" selected
*   Check if in the AppDelegate there is no unnecessary code put in the applicationDidFinish method (should be empty if you didn't put a custom code in it)
*   Check if your view controller contains `-(void)loadView` and delete the method to avoid a black screen on startup

Hope it helps.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-26T15:06:03.247

在 Xcode 8 中：

1.  右键单击并从导航控制器拖动到视图控制器。
2.  在弹出窗口中的“Relationship Segue”部分下选择**根视图控制器。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T01:56:11.167

这是一个旧帖子，但对于那些仍然有这个问题的人。

*   在 xib 中，您需要一个视图控制器和一个窗口。
*   选择窗口并转到“连接检查器”
*   将 rootViewController 与视图控制器连接

这应该有效，对我来说有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-06T14:30:36.437

1.  在 Interface Builder 中选择 View Controller
2.  打开属性检查器
3.  设置复选框“初始视图控制器”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T21:17:23.460

问题出在 AppDelegate.m 中：-`(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

尝试注释掉所有内容，当然除了返回。在创建一个空应用程序时，此代码会为您插入，并会干扰您在情节提要的根视图控制器中进行的初始视图控制器检查。同样在您的项目目标中，确保 info.plist 将您的故事板显示为 mainstoryboard。然后最后确保您在故事板视图中检查了您的初始视图控制器。选择视图控制器，然后查看其属性。检查那个小盒子。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-09T09:01:02.397

My solution was to start a new project with "Single View" instead of "Empty"

# workflow - 如何启动以编程方式上传的文件的工作流程

> ID：11518639
> 
> 赞同：0
> 
> 时间：2012-07-17T08:23:33.917
> 
> 标签：workflow, liferay, liferay-6, document-library

我可以为 Liferay 文档和库中上传的文件启动工作流程吗？

这是我的代码：

```
DLFolder dlFolder = DLFolderLocalServiceUtil.getFolder(themeDisplay.getScopeGroupId(), 0, "Test");
ServiceContext serviceContext = ServiceContextFactory.getInstance(DLFileEntry.class.getName(),
actionRequest);

fileEntry = DLFileEntryServiceUtil.addFileEntry(dlFolder.getGroupId(), dlFolder.getRepositoryId(), dlFolder.getFolderId() ,file.getName(),"" ,title,"test", null, dlFolder.getDefaultFileEntryTypeId(), null, file, null, file.getUsableSpace(), serviceContext); 
```

// ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** ******现在****** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ****

*   如何启动已上传文件的工作流程？
*   已启动的工作流程，对于 test 文件夹中的所有文件，它会是相同的工作流程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:16:02.487

你的问题不是很清楚。

如果您谈论的是当您以编程方式上传文档时是否会应用 Liferay 的工作流程？如果您为文档库 portlet 选择了工作流定义，那么答案将是肯定的。

您将在我的工作流任务下的控制面板中找到工作流任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T08:13:18.810

假设您有一个自定义 portlet 并且您尝试将文档上传到其中的文件夹具有工作流，

```
DLFolder dlFolder = DLFolderLocalServiceUtil.getFolder(themeDisplay.getScopeGroupId(), 0, "Test");
ServiceContext serviceContext = ServiceContextFactory.getInstance(DLFileEntry.class.getName(),
actionRequest);

FileInputStream is = new FileInputStream(file);
DLFileEntry fileEntry = DLFileEntryServiceUtil.addFileEntry(dlFolder.getGroupId(), dlFolder.getRepositoryId(), dlFolder.getFolderId() ,
                            file.getName(),MimeTypesUtil.getContentType(file) ,title,"test", StringPool.BLANK, 
                            dlFolder.getDefaultFileEntryTypeId(), null, file, is,
                            file.length(), serviceContext);
DLFileEntryLocalServiceUtil.updateFileEntry(userId, fileEntry.getFileEntryId(), file.getName(), MimeTypesUtil.getContentType(file), 
        title(), "test", StringPool.BLANK, Boolean.FALSE, dlFileEntry.getFileEntryTypeId(), null, file, is,
        file.length(), serviceContext) 
```

您应该在**addFileEntry之后调用****updateFileEntry**方法。它实际上做了两件事，

 **1.  它从**草稿更改文档的状态**
2.  它调用**工作流**

希望这可以帮助。**

# linq - linq 到按子查询分组的实体

> ID：11518642
> 
> 赞同：0
> 
> 时间：2012-07-17T08:23:43.970
> 
> 标签：linq, linq-to-entities, group-by, subquery

我有以下代码：

```
var statements = db.statement
                .OrderByDescending(d => d.id)
                .Take(5)
                .AsEnumerable()
            .Select(d => new Statements
                             {
                                 Accounts = d.statement_entry.AsEnumerable()
                                     .GroupBy(b => b.currency)
                                     .Select(b =>
                                             new Account
                                                 {
                                                     In = b.Where(l => l.amount > 0).Sum(l => l.amount),
                                                     Out = b.Where(l => l.amount < 0).Sum(l => l.amount),
                                                     Balance = b.Sum(l => l.amount),
                                                     Currency = b.Key
                                                 }).OrderBy(b => b.Currency),
                                 UploadedDate = d.uploaded_date,
                                 Id = d.id
                             })
                .ToList(); 
```

有没有办法我可以做到这一点`AsEnumerable()`？据我了解，这`AsEnumberable`将导致对每个`statement`返回的 s 进行查询。

或者有没有更好的方法来重构代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:08:50.543

你理解错了。`AsEnumerable`将使查询在本地（客户端）机器上执行。

这

```
statements = db.statement
            .OrderByDescending(d => d.id)
            .Take(5) 
```

将在（SQL）服务器上执行，

客户端上的剩余部分

你为什么放这个`AsEnumerable`？我认为即使没有查询也应该可以工作（它会在服务器端做所有事情）

唯一的事情是，`OrderBy(b => b.Currency)`您应该在之后放置 a`.ToList()`以便`.Select(b => new Account`物化和缓存。

# php - php get_headers 异常处理

> ID：11518645
> 
> 赞同：1
> 
> 时间：2012-07-17T08:24:14.127
> 
> 标签：php, exception-handling, get-headers

我正在运行以下命令并遇到异常：

> $headers = get_headers(" [http://www.moneysupermarket.com/mortgages/](http://www.moneysupermarket.com/mortgages/) ", 1);

如何处理此异常（在我的情况下，请忽略此 url，因为它会导致异常）。

我试过了：

1.  试着抓
2.  此链接中的代码：[https ://stackoverflow.com/a/6184127/1486303](https://stackoverflow.com/a/6184127/1486303)

但是，我仍然会出现此错误（我想忽略它）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:40:55.320

新版本

同样，这不是问题的正确答案，但避免错误可以给出预期的结果。

get_headers 做一个没有代理的 HTTP GET，所以**moneysupermarket.com**不喜欢它，所以使用 ini_set 来设置请求中的默认用户代理，并且一切正常：

```
ini_set("user_agent","Mozilla custom agent");
$headers = get_headers("http://www.moneysupermarket.com/mortgages/", 1); 
```

以前的

显然，如果请求格式不正确，moneysupermarket.com 会重置连接，请使用 cUrl 执行请求（取自 curl 手册页）：

```
// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.moneysupermarket.com/mortgages/");
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla custom agent");

// grab URL and pass it to the browser
curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T08:51:27.677

没有例外。get_headers() 出错时返回 FALSE。虽然有一条警告消息，但这也不例外，因此无法被捕获。有关警告和其他错误，请参阅：[http ://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

# flash - ActionScript3 - 如何检测隐藏对象上的鼠标事件（堆叠的影片剪辑）

> ID：11518647
> 
> 赞同：0
> 
> 时间：2012-07-17T08:24:19.590
> 
> 标签：flash, actionscript, mouseevent, movieclip, stacked

我目前正在做一个 AS3/Flash CS5.5 项目。我有两个movieclips，一个在另一个之上（不同的层，舞台上的**相同坐标**）。我的问题很简单：从逻辑的角度来看，'外部'MovieClip（在上面的级别）'隐藏'，'内部'MovieClip。因此，即使我尝试在隐藏的 MovieClip 上管理鼠标事件，这些事件也不会被触发！我需要一种方法来检测 - 例如 -*内部*/hidden MovieClip 上的 MouseEvent.MOUSE_MOVE。谢谢

它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:23:45.093

您可以执行以下操作：

```
outerMC.mouseEnabled = false;
outerMC.mouseChildren = false; 
```

这样，“外部”（顶部）对象将不会接收任何鼠标事件，而是让它们到达底部对象......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:03:18.797

您不能将另一个负责所有鼠标交互的透明剪辑放在其他所有内容之上，并将其作为前端控制器，将消息发送到系统的其余部分吗？

或者考虑以编程方式使事件冒泡，以便在 MouseEvent.MOUSE_MOVE 上调用波纹管剪辑上同一事件的触发器。

# php - 如何在 PHP 中展开多维数组（原始键访问路径存储为单个键）？

> ID：11518648
> 
> 赞同：4
> 
> 时间：2012-07-17T08:24:20.510
> 
> 标签：php, multidimensional-array, flatten

我正在使用以下函数来展平多维数组：

```
function flatten($array, $prefix = '') {
    $result = array();
    foreach($array as $key=>$value) {
        if(is_array($value)) {
            $result = $result + flatten($value, $prefix . $key . '.');
        }
        else {
            $result[$prefix . $key] = $value;
        }
    }
    return $result;
} 
```

我想创建一个匹配函数，`unflatten`它将反转该过程（例如，如果键中有 a `.`，则创建一个子数组）。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:44:09.560

用于`parse_str`完成此操作。请在下面尝试。

```
function flatten($array, $prefix = '') {
    $result = array();
    foreach($array as $key=>$value) {
        if(is_array($value)) {
            $result = $result + flatten($value, $prefix . $key . '.');
        }
        else {
            $result[$prefix . $key] = $value;
        }
    }
    return $result;
}

function unflatten($array,$prefix = '')
{
    $result = array();
    foreach($array as $key=>$value)
    {
        if(!empty($prefix))
        {
            $key = preg_replace('#^'.preg_quote($prefix).'#','',$key);
        }
        if(strpos($key,'.') !== false)
        {
            parse_str('result['.str_replace('.','][',$key)."]=".$value);
        }
        else $result[$key] = $value;
    }
    return $result;
}
$source    = array('a'=>'d','b',array('a'=>'c','d'));
$flattened = flatten($source,'__');
echo "<pre>";
echo "source array :<br/>";
print_r($source);
echo "flatten result:<br/>";
print_r($flattened);
echo "unflatten result:<br/>";
print_r(unflatten($flattened,'__'));
echo "<pre/>"; 
```

输出：

```
source array :
Array
(
    [a] => d
    [0] => b
    [1] => Array
        (
            [a] => c
            [0] => d
        )

)
flatten result:
Array
(
    [__a] => d
    [__0] => b
    [__1.a] => c
    [__1.0] => d
)
unflatten result:
Array
(
    [a] => d
    [0] => b
    [1] => Array
        (
            [a] => c
            [0] => d
        )

) 
```

# sql-server - 在sql查询中过滤

> ID：11518651
> 
> 赞同：0
> 
> 时间：2012-07-17T08:24:25.237
> 
> 标签：sql-server, sql-server-2005

我的示例表数据是：

![表数据](../Images/6d523dcce9b01f15afc3db818c76f648.png)

我的 sql 查询是：

```
SELECT
Distinct
   CASE CHARINDEX( '?', SessionURL)
       WHEN 0 THEN SessionURL
       ELSE LEFT(SessionURL, CHARINDEX( '?', SessionURL) - 1) END AS VisitPage, count(*) as [VisitTime] 
FROM SessionTracker  
 group by SessionURL
order by [VisitTime] desc 
```

查询成功运行并返回一个没有查询字符串的值。上述数据的平均结果是：

![结果](../Images/3f13a00e0ef3337a0fc086511ee3176d.png)
但我只想要一个格式的结果：

```
Default
Modules 
```

是否有可能在 sql 查询中使用这种类型的过滤器。如果是，请提出一种方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:29:07.623

```
declare @t table(path varchar(100))
insert into @t (path)
select 'http://localhost:58588/default.aspx'  union all
select 'http://localhost:58588/default.aspx'  union all
select 'http://localhost:58588/super-user/modules.aspx'  

select 
    distinct replace(right(path,charindex('/',reverse(path))-1),'.aspx','') 
from 
    @t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:42:02.967

尝试这个

```
declare @Path varchar(500)='http://somename/some_name.aspx'
SELECT  replace(substring(@Path,len(@Path)-
CHARINDEX('/',REVERSE(@Path))+2,len(@Path)),'.aspx','') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:26:21.057

是的。与过滤查询字符串的方式相同，过滤 / 和 . 你需要这个`SUBSTRING`功能。要查找 / 的最后一次出现，请使用该`REVERSE`函数。

IE。

```
select pagename, COUNT(*)
from
(
    select 
        reverse(case CHARINDEX('/', withoutsuf) when 0 then withoutsuf 
        else LEFT(withoutsuf,CHARINDEX('/', withoutsuf)-1 ) end) as pagename
    from
    (
        select 
            substring(withoutq, CHARINDEX('.', withoutq)+1, LEN(withoutq)) withoutsuf
        from
        (
            select
                REVERSE(
                    CASE CHARINDEX( '?', SessionURL) 
                    WHEN 0 THEN SessionURL 
                    ELSE LEFT(SessionURL, CHARINDEX( '?', SessionURL) - 1) END) as withoutq
            from SessionTracker
        ) v
    ) v
) v
group by pagename 
```

# android - 对dex格式还不清楚

> ID：11518656
> 
> 赞同：1
> 
> 时间：2012-07-17T08:24:51.893
> 
> 标签：android, file-format, dex

我在 Google 上阅读了 .dex 格式的文档，但我仍然对某些层感到困惑。

link_size & link_off ：谷歌说它没有指定，然后说它是运行时的钩子，那它是什么？全局或本地的静态挂钩？还是本机库的挂钩？

map_off ：为什么需要这个冗余 ID 列表？是不是有点像文件地址表？

proto_size & proto_off ：不太确定它到底是什么。我拆解了一个随机挑选的 dex 并查看了这部分，这部分包含一些短符号，如 DD/LL/JLJJ/...brabrabra，这让我对这部分更加困惑。这部分到底是做什么的？

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:06:37.763

链接部分从未被指定或使用过。您可能会遇到一些对这些字段具有垃圾值的 dex 文件，以试图阻止 baksmali 能够在它们上运行（由于一个旧错误，该错误已修复了一段时间）。

对于地图项，是的，索引项部分的位置存在冗余 - 这些位置在标题项和地图项中都指定。但是地图项是唯一指定偏移项部分的位置的地方（数据部分中的可变大小项）

原型部分定义方法的原型，即参数和返回类型。如果您查看 method_id_item，您会看到它引用了原型项目。

# mysql - MySQL 的 LOAD DATA INFILE 语句支持的字符集

> ID：11518659
> 
> 赞同：0
> 
> 时间：2012-07-17T08:24:54.373
> 
> 标签：mysql, file-io, load, binaryfiles

MySQl 的 'LOAD DATA INFILE' 语句是否支持二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:36:41.693

不，它没有..它只从文本文件中读取数据。

检查[这个！](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# c# - 选择项目后如何在 DropDownList 中使用 OnChange 事件

> ID：11518663
> 
> 赞同：0
> 
> 时间：2012-07-17T08:24:59.450
> 
> 标签：c#, xml, asp.net-mvc

我有一个 MVC 网站。在一个页面中有一个下拉列表、一个详细信息视图和几个列表视图。

数据来自导入的 XML 文件，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<Items>
  <Item ID="1" Name="MVC" Country="Engeland" City="London" 
        Website="http://forums.asp.net" Genre="New" />
   ....
</Items> 
```

索引页

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <script type="text/javascript">
        function OnChange(text) {
            ...
        }
    </script>

    <form id="form1" runat="server">
        <br />
        <label>Select Name</label>
        <br />
        <%= Html.DropDownListFor(a => a.SelectedItem, 
                new SelectList(Model.Artists, "Value", "Text"), 
                new { onchange = "OnChange(this.Value);" })%>
        <br />
        <br />
        <%= Html.Action("DetailInfo") %><br />
        <br />
        <%= Html.Action("MemberList") %> <br />
        <br />
        <%= Html.Action("RelationsList") %><br />
        <br />
    </form>
</asp:Content> 
```

我的问题是：**如何通过选择 DropDownList 中的项目在 OnChange 事件之后重用 Html.Actions？**

当下拉列表的项目发生更改时，我想更改视图数据。

我希望在网页上看到 DropDownList 下的详细信息。

**国家：英格兰

城市：伦敦

网站：等** 

然后是成员和关系列表。

感谢你们对我的帮助

卫斯理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:35:26.680

所以你的意思是我在我的控制器中放置了一个 onchange 事件

```
 <script type="text/javascript">
    $(document).ready(function() {
            var AID = 810000;
            function OnChange(action, value) {
                $.load( action, {AID: value});
        }
    });
    </script> 
```

我在 Index.aspx 中写：

```
 <%using (Ajax.BeginForm("OnChange", "MainController",
          new AjaxOptions { HttpMethod = "Post" }))
         {%>
        <%= Html.DropDownListFor(a => a.SelectedID, 
                new SelectList(Model.Artiesten, "Value", "Text"),
        new
        {
            onchange = @"
            var form = document.forms[0]; 
            form.action='OnChange(../Controllers/MainController/OnChange, Value)' ;
            form.submit();"
        })%>
    <%} %> <br /> 
```

...在 MainController 中有一个方法

```
[HttpPost]
protected void OnChange(int? AID)
{
   int iID = AID ?? 810000;

   DetailInfo (AID);
   MemberList(AID);
   RelationsList(AID);
} 
```

# objective-c - 将经纬度转换为地名

> ID：11518664
> 
> 赞同：0
> 
> 时间：2012-07-17T08:25:03.510
> 
> 标签：objective-c, ios

我想将经纬度转换为地址（地名）。

我认为可以使用 iOS 5.0 上的 CLGeocoder 和 iOS < 5.0 上的 MKReverseGeocoder（在 iOS 5.0 中弃用）来完成。

我的应用程序需要从 iOS 4.0 开始支持。

任何人都可以建议一种方法来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:43:46.180

API 已被弃用并不意味着您不能在 iOS 5 上使用它。它仍然可以工作，但可能会在未来的版本中被删除，而不会发出警告。因此，为了保持兼容性，您可以检查`CLGeocoder`该类是否可用并使用适当的实现：

```
Class clGeocoderClass = NSClassFromString(@"CLGeocoder");
if (clGeocoderClass) {
    // iOS 5\. Use CLGeocoder
} else {
    // iOS prior to 5\. Use MKReverseGeocoder.
} 
```

因此，如果将来删除，您将不会遇到任何问题`MKReverseGeocoder`，因为`CLGeocoder`该类将是首选。运行 iOS 5 之前版本的设备不可避免地会回退到`MKReverseGeocoder`任何情况下，这在旧版本上没有问题。

# opencv - 获取二值图像中对象的位置和大小

> ID：11518667
> 
> 赞同：1
> 
> 时间：2012-07-17T08:25:06.980
> 
> 标签：opencv, javacv, object-detection

有人有想法从对象中获取大小和位置吗？在具有白色像素的二值图像中检测到对象：

例如：检测到/原始

[http://ivrgwww.epfl.ch/supplementary_material/RK_CVPR09/Images/segmentation/2_sal/0_12_12171.jpg](http://ivrgwww.epfl.ch/supplementary_material/RK_CVPR09/Images/segmentation/2_sal/0_12_12171.jpg) [http://ivrgwww.epfl.ch/supplementary_material/RK_CVPR09/Images/comparison/orig/0_12_12171.jpg](http://ivrgwww.epfl.ch/supplementary_material/RK_CVPR09/Images/comparison/orig/0_12_12171.jpg)

我知道`CvMoments`- 方法。但我不知道在这种情况下如何使用它。

顺便说一句：我怎样才能让我的面具更清楚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:39:05.710

简单算法：

1.  使用形态学操作（侵蚀）删除小区域的白色像素。
2.  用于`findContours`查找所有轮廓。
3.  使用`countNonZero`或`contourArea`查找每个轮廓的面积。
4.  循环遍历每个轮廓的所有点并找到它们的平均值。这将是轮廓的中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:58:25.820

If the object is tree, you should delete small areas by using morphology as Astor written.

Alternative of finding mass, and mass center is using moments: [http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#moments](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#moments)

m00 as doc says is mass

There are also formulas for mass center.

This approach works when only your object remains on image after segmentation.

# python - 一条路线的Python Bottle多个响应

> ID：11518670
> 
> 赞同：0
> 
> 时间：2012-07-17T08:25:13.357
> 
> 标签：python, bottle

我正在寻找一种为一条路线发送多个响应的方法。问题是，从我读过的内容来看，我必须返回内容数据。例如 ：

```
@route('/events')
def positions():      
    for i in xrange(5):        
        response.content_type = 'text/event-stream'        
        response.set_header('Cache-Control', 'no-cache')                
        now = datetime.datetime.now().time().replace(microsecond=0)        
        return  "data: %s\n\n"%now 
```

* * *

有没有办法替换某些函数调用中的最后一行，以便我可以发送所有响应然后退出路由？

谢谢，
奥马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:47:41.103

我不是 100% 确定我明白你在问什么，所以我可能没有正确回答，但这会做你想要的吗？

```
@route('/events')
def positions():
    output = ''
    for i in xrange(5):
        now = datetime.datetime.now().time().replace(microsecond=0)
        output += "%s\n\n"%now
    response.content_type = 'text/event-stream'                
    response.set_header('Cache-Control', 'no-cache')
    return "data: " + output 
```

# php - 将完整的 HTML 页面包装在另一个页面中

> ID：11518679
> 
> 赞同：0
> 
> 时间：2012-07-17T08:25:54.457
> 
> 标签：php, html, email, imap

我正在为 gmail 构建一个基本的只读客户端，我成功地通过 imap（在 PHP 中）提取电子邮件并存储它们，但是我在浏览器中显示它们时遇到了一些问题。

大多数电子邮件都是完整的 html 页面`<html><title>Your Mail</title><body>etc...</body></html>`，这通常会破坏显示电子邮件的根 html 页面。

例如，您经常以

```
<html>
<title>Read only mail>
<body>
<h1>Your mail:</h1>
<html><title>An email from steve</title><style>html {background-color=red;}</style>
<body>It's a read email! (get it?)</body></html>
<html><title>An email from james</title><style>body {background-color=green;}</style>
<body>I like green things, save the planet!</body></html>
More mail etc...
</body>
</html> 
```

这不是完全有效的html，但主要问题是电子邮件的CSS会影响页面上的所有其他元素，我最好的想法是用PHP制作一个iframe（这可能没有进一步的请求），或者以某种方式剥离文档中的所有 CSS 和 HTML。

有谁知道如何解决这个问题？gmail 和其他网络客户端是如何做到的？很高兴研究客户端解决方案，例如 Javascript/jQuery 和 Ajax

谢谢你的时间，

--

目前邮件只是这样输出：

```
/* connect */
$inbox = imap_open($hostname,$username,$password) or die(imap_last_error());

$emails = imap_search($inbox,'ALL');
if($emails) {

  /* begin output var */
  $output = '';

  /* put the newest emails on top */
  rsort($emails);

  /* for every email... */
  foreach($emails as $email_number) {

    /* get information specific to this email */
    $overview = imap_fetch_overview($inbox,$email_number,0);
    $message = imap_fetchbody($inbox,$email_number,2);

    /* output the email header information */
    $output.= '<div class="toggler '.($overview[0]->seen ? 'read' : 'unread').'">';
    $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
    $output.= '<span class="from">'.$overview[0]->from.'</span>';
    $output.= '<span class="date">on '.$overview[0]->date.'</span>';
    $output.= '</div>';

    /* output the email body */
    $output.= '<div class="body">'.$message.'</div>';
  }

  echo $output;
} 

/* close the connection */
imap_close($inbox) 
```

取自[http://davidwalsh.name/gmail-php-imap](http://davidwalsh.name/gmail-php-imap)（我的代码略有不同，但具有相同的设计和输出）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:31:08.437

你为什么不选择你想要保留的元素，比如 php 的 body 本身，然后丢弃其余的？您当然需要一个开关来为一组基本的电子邮件内容布局应用不同的规则：但是您可以自由地为每个布局实施特定且可靠的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:31:40.180

您可以使用 iframe 显示消息，或使用正则表达式服务器端抓取正文标记内的文本，或使用 dom 客户端抓取正文元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:17:01.050

在这里尝试一下，使用 domDocument 提取每条消息的正文标记之间的内容：

```
<?php set_time_limit(0); ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>You have mail</title>
</head>

<body>

<?php
/* connect */
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = '';
$password = '';
$inbox = imap_open($hostname,$username,$password) or die(imap_last_error());

$emails = imap_search($inbox,'ALL');
if($emails){

    /* begin output var */
    $output = '';

    /* put the newest emails on top */
    rsort($emails);

    /* for every email... */
    foreach($emails as $email_number) {

        /* get information specific to this email */
        $overview = imap_fetch_overview($inbox, $email_number, 0);
        $message = imap_fetchbody($inbox, $email_number, 2);

        /* output the email header information */
        $output.= '<div class="toggler'.($overview[0]->seen ? 'read' : 'unread').'">';
        $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
        $output.= '<span class="from">'.$overview[0]->from.'</span>';
        $output.= '<span class="date">on '.$overview[0]->date.'</span>';
        $output.= '</div>';

        /* output only the email body */
        $dom = new DOMDocument();
        libxml_use_internal_errors(true);
        $dom->loadHTML($message);
        $body = $dom->getElementsByTagName("body")->item(0);
        if ($body !== null) {
            for ($n = $body->firstChild; $n !== null; $n = $n->nextSibling) {
                $body = simplexml_import_dom($n)->asXML();
            }
        }
        $output.= '<div id="body">'.$body.'</div>';
    }

    echo $output.'
</body>
</html>';
}

/* close the connection */
imap_close($inbox);
?> 
```

如果您只想要电子邮件的纯文本部分（这也可能包含多部分边界），请回答您的其他问题

使用`$message = imap_fetchbody($inbox, $email_number, 1);`注意`1`

希望能帮助到你

# c# - For-Statement，每 1000 次演练，做一些事情

> ID：11518680
> 
> 赞同：3
> 
> 时间：2012-07-17T08:25:59.397
> 
> 标签：c#, for-loop

我正在通过 Forloop 100'000 次。（这个数字可以多样化）

每 1000 次我都想做一些特别的事情，这是我在其他演练中不做的事情。

像这样的东西：

```
for (int i = 0; i < 100000; i++)
{
    doTasks(); //Normal
    if(i == 1000 || i == 2000 || i == 3000 || i == 4000 ) //and so on...
    {
       doSomethingElse(); //Special, For every 1000th walkthrough
    }
} 
```

完成该任务的最有效方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T08:26:51.087

尝试使用模运算符。不确定 C# 语法，但类似于：

```
if(i % 1000 == 0)
{
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T08:27:22.677

```
if (i != 0 && i % 1000 == 0) 
```

这意味着如果我 mod 1000 为 0（所以在 1000、2000、3000，...）但不是在 i == 0

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T08:27:39.083

```
if (i != 0 && i % 1000 == 0) {
  doSomethingElse();
} 
```

`%`是模运算符，返回除法运算的余数。如果余数为零，则您有 1000 的倍数。但是，您需要特别排除 0，因为 0 也可以被 1000 整除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T08:27:48.807

使用模运算符：

```
if (i % 1000 == 0) {
 // do something... 
```

会做你想做的。

它除以给定的参数（在本例中为 1000）并给出余数。在这种情况下，您对 0 的余数感兴趣。请参阅[此处的模运算符文档](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T08:45:05.973

我*真的*在这里吹毛求疵，并可能回答一匹死马，但是这样做：

```
if(i%1000 == 999) ... 
```

而不是与 0 进行比较并避免第一次迭代。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T08:28:07.720

使用运算符`%` [http://msdn.microsoft.com/en-us/library/6a71f45d.aspx](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)

# javascript - 将用户输入的日期更改为上一个日期

> ID：11518687
> 
> 赞同：-1
> 
> 时间：2012-07-17T08:27:06.137
> 
> 标签：javascript, date

谢谢大家。我有一种将日期作为输入的表格。我必须制作一项功能，在用户输入日期的 30 天之前发送电子邮件。我正在制作一个隐藏字段，它将用户输入的日期转换为少 30 天，然后在数据库中提交代码：

```
 <input type ="hidden" name="date_time" onblur="setExpDate(this.value)"/> 

    <script type="text/javascript">
      function setExpDate(){
    // set number of days to add
    var interval = 30;
    var userdate=<?php echo $_POST['effd'];

    expDate.setDate(userdate.getDate() - interval);
    return expDate ;
};
</script>

<input type="hidden" size="10" maxlength="10" id="date_time" name="date_time" value="setExpDate()">
 date entered by user<input type="text" name="effd"/>

please check the code where i am making mistake and if you have any other solution . 
```

非常感谢只是为了提供信息，我正在使用 joomla 并制作自己的 php 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:09:46.023

[在这里，我在http://codebins.com/bin/4ldqpah](http://codebins.com/bin/4ldqpah)上为上述问题完成了完整的垃圾箱

**HTML：**

```
<div id="panel">
  <form id="frm1" method="post">
    <input type="hidden" id="h_date" name="h_date" />
    Enter Date: 
    <input type="text" name="txtdate" id="txtdate" onblur="setExpDate(this.value);" size="15"/>
    <div id="hiddendiv">
    </div>
  </form>
</div> 
```

**CSS：**

```
#panel form{
  border:1px solid #454545;
  padding:10px;
  width:350px;
  background:#a1a6a4;
}
#panel input{
  border:1px solid #456699;
}
#panel input:focus{
  background:#afffff;
} 
```

**Javascript：**

```
 function setExpDate(strdate) {
      if (strdate != "" && strdate != null && typeof(strdate) != "undefined") {

          if (isValidDate(strdate)) {
              var interval = 30;
              var userdate = new Date(strdate);
              var newdate = new Date(userdate.getTime() - 30 * 24 * 60 * 60 * 1000);
              document.getElementById("h_date").value = (newdate.getMonth() + 1) + "/" + newdate.getDate() + "/" + newdate.getFullYear();
              document.getElementById("hiddendiv").innerHTML = "Set Hidden Date:" + document.getElementById("h_date").value + " (Before 30 days)";

          } else {
              alert("Please enter valid date.");
          }
      }

  }

  function isValidDate(dateStr) {

      // Checks for the following valid date formats:
      // MM/DD/YYYY
      // Also separates date into month, day, and year variables
      var datePat = /^(\d{2,2})(\/)(\d{2,2})\2(\d{4}|\d{4})$/;

      var matchArray = dateStr.match(datePat); // is the format ok?
      if (matchArray == null) {
          alert("Date must be in MM/DD/YYYY format")
          return false;
      }

      month = matchArray[1]; // parse date into variables
      day = matchArray[3];
      year = matchArray[4];
      if (month < 1 || month > 12) { // check month range
          alert("Month must be between 1 and 12");
          return false;
      }
      if (day < 1 || day > 31) {
          alert("Day must be between 1 and 31");
          return false;
      }
      if ((month == 4 || month == 6 || month == 9 || month == 11) && day == 31) {
          alert("Month " + month + " doesn't have 31 days!")
          return false;
      }
      if (month == 2) { // check for february 29th
          var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));
          if (day > 29 || (day == 29 && !isleap)) {
              alert("February " + year + " doesn't have " + day + " days!");
              return false;
          }
      }
      return true; // date is valid
  } 
```

请在[http://codebins.com/bin/4ldqpah上尝试解决方案](http://codebins.com/bin/4ldqpah)

# android - 如何在android中为进度条添加右角

> ID：11518697
> 
> 赞同：1
> 
> 时间：2012-07-17T08:27:42.740
> 
> 标签：android

在那里！

![在此处输入图像描述](../Images/d027b19466ee7cd7aad32df6a44d9ca8.png)

如何为右侧添加左侧的角？

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/progress" android:drawable="@drawable/progressbar_tile">
        <clip>
            <shape>
                <corners android:radius="5dp"/>
            </shape>
        </clip>
    </item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-27T09:21:31.117

将标签更改`<clip>`为`<scale>`：

```
<scale android:scaleWidth="100%"> 
```

# c++ - 如何让编译器推断出我的模板迭代器的类型？

> ID：11518698
> 
> 赞同：3
> 
> 时间：2012-07-17T08:27:44.710
> 
> 标签：c++, templates, iterator, typename

我编写了一个函数，用于查找任何给定容器中最常见的元素（参见下面的代码），其中输入是该容器的两个 const_iterator。`findMostFrequent(ivec.begin(), ivec.end())`但是，如果我使用where `ivec`is a调用此函数`vector<int>`，则编译器无法推断出模板参数。用 with 调用函数可以`findMostFrequent< vector<int> >(ivec.begin(), ivec.end())`正常工作，但似乎很麻烦。有没有办法让编译器找出要实例化的模板？

```
template <typename T> typename T::value_type findMostFrequent(typename T::const_iterator beg, typename T::const_iterator end)
{
    // T is the type of container, T::value_type is the type which is stored in the container
    typename T::size_type current_streak = 0, max_streak = 0;
    T::value_type max_so_far;
    for (T::const_iterator iter = beg; iter != end; ++iter)
    {
        current_streak = count(beg, end, *iter);
        if ( current_streak > max_streak )
        {
            max_so_far = *iter;
            max_streak = current_streak;
        }
    }
    return max_so_far;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T08:34:08.677

编译器无法推断嵌套说明符。“给我找一个类型，它的嵌套说明符等于我作为参数看到的类型”太复杂而且常常模棱两可，无法轻易解决。相反，尝试直接从迭代器中推断出您需要知道的所有内容：

```
template <typename IteratorType>
typename std::iterator_traits<IteratorType>::value_type
findMostFrequent(IteratorType beg, IteratorType end)
{
    typename std::iterator_traits<T>::difference_type current_streak = 0, max_streak = 0;
    typename std::iterator_traits<T>::value_type max_so_far;
    for (IteratorType  iter = beg; iter != end; ++iter)
    {
        current_streak = count(beg, end, *iter);
        if ( current_streak > max_streak )
        {
            max_so_far = *iter;
            max_streak = current_streak;
        }
    }
    return max_so_far;
} 
```

您应该使用`std::iterator_traits<T>::value_type`而不是的原因`T::value_type`是，它使您还可以为那些不能自然定义它们的类型（例如指针）提供这些“迭代器规范”。例如，`T*`实际上是此片段的有效迭代器，但它不包含`value_type`typedef/type。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T08:31:01.717

是的，通过使函数接受`Iter`模板参数并`T`使用迭代器特征 ( `<iterator>`) 从中推断 - 基本上是相反的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T08:37:46.793

因为作为模板参数，您必须使用迭代器类型。下面的代码运行良好

```
#include <iostream>
#include <vector>

template <typename IterType> 
typename IterType::value_type findMostFrequent(IterType beg, IterType end)
{
    // T is the type of container, T::value_type is the type which is stored in the container
    unsigned int current_streak = 0, max_streak = 0;
    typename IterType::value_type max_so_far;
    for (IterType iter = beg; iter != end; ++iter)
    {
        current_streak = count(beg, end, *iter);
        if ( current_streak > max_streak )
        {
            max_so_far = *iter;
            max_streak = current_streak;
        }
    }
    return max_so_far;
}

int main()
{
    std::vector<int> v;
    for (unsigned int i = 0; i < 10; ++i)
        v.push_back(i);

    findMostFrequent(v.begin(), v.end());

    return 0;
} 
```

在您的代码中，迭代器类型与向量没有任何关系，因此编译器无法推断出模板参数

# ruby-on-rails - 在环境之间复制单个记录

> ID：11518699
> 
> 赞同：2
> 
> 时间：2012-07-17T08:27:46.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个处于不同开发阶段（实时、测试、开发）的应用程序

当测试人员报告测试数据库的问题时，他们将指定一个仅在测试数据库上的用户 ID，这使得在开发中重现问题变得非常困难（在某些情况下）

我希望能够提取与表中特定 id 相关的所有内容（包括由外键链接的其他表中的对象），并能够将该数据导入开发数据库。

怎么可能呢？

*   我可以深度复制所有链接关系吗？
*   我可以导出该对象然后导入它吗
*   我可以从该迁移脚本访问两个数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:57:29.193

你想要达到的目标并不是一件微不足道的事情。

如果要提取有关用户的所有信息，则必须编写一个脚本来访问他的所有信息和相关信息，或者直接从数据库表中提取信息。

如果您更喜欢第一种选择，则必须仔细查看关系并使用 ActiveRecord 提取所有关系。

也许使用“attributes”方法对你有用，如果你有一个用户模型和一个@user实例，你可以这样做：

```
user_attributes = @user.attributes 
```

并在哈希中提取他的属性，稍后您可以执行以下操作：

```
User.create(user_attributes) 
```

创建具有相同属性的用户，但您将遇到受保护的属性或关系的问题。

也许您尝试遵循的策略并不是解决问题的最佳方法。

您无法使用 ssh 访问测试环境？这样您就可以检查数据库并按原样查看问题。

# c# - 将 Last 属性添加到 System.Array 的最佳方法是什么？

> ID：11518705
> 
> 赞同：2
> 
> 时间：2012-07-17T08:27:57.737
> 
> 标签：c#, .net

我尝试了下面的解决方案，但我不喜欢它。我正在寻找扩展类，而不是封装一个`double[]`.

谢谢。

编辑：我们需要使用 .NET 2.0

```
public class DoubleArray : IList, ICloneable
{

    protected double[] items;

    /// <summary>
    /// Gets the last item in the array.
    /// </summary>
    public double Last { get { return items[items.Length-1]; } }

    /// <summary>
    /// Gets the number of items in the array.
    /// </summary>
    public int Length { get { return items.Length; } }

    /// <summary>
    /// Number of items constructor.
    /// </summary>
    /// <param name="len">Number of items</param>
    public DoubleArray(int len)
    {
        items = new double[len];
    }      

    public double this[int index]
    {
        get { return items[index]; }
        set { items[index] = value; }
    }

    public bool IsReadOnly
    {
        get { return items.IsReadOnly; }
    }

    public bool IsFixedSize
    {
        get { return items.IsFixedSize; }
    }

    public void CopyTo(Array array, int index)
    {
        items.CopyTo(array, index);
    }

    public IEnumerator GetEnumerator()
    {
        return items.GetEnumerator();
    }

    public object SyncRoot
    {
        get { return items.SyncRoot; }
    }

    public bool IsSynchronized
    {
        get { return items.IsSynchronized; }
    }

    object ICloneable.Clone()
    {
        return items.Clone();
    }

    #region ICollection and IList members implementation

    // hides this members from intellisense, see: http://stackoverflow.com/questions/10110205/how-does-selectedlistviewitemcollection-implement-ilist-but-not-have-add

    int ICollection.Count
    {
        get { return items.Length; }
    }

    int IList.Add(object value)
    {
        throw new NotImplementedException();
    }

    bool IList.Contains(object value)
    {
        throw new NotImplementedException();
    }

    void IList.Clear()
    {
        throw new NotImplementedException();
    }

    int IList.IndexOf(object value)
    {
        throw new NotImplementedException();
    }

    void IList.Insert(int index, object value)
    {
        throw new NotImplementedException();
    }

    void IList.Remove(object value)
    {
        throw new NotImplementedException();
    }

    void IList.RemoveAt(int index)
    {
        throw new NotImplementedException();
    }

    object IList.this[int index]
    {
        get { throw new NotImplementedException(); }
        set { throw new NotImplementedException(); }
    } 

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:31:21.283

你不能使用 LINQ 并调用

```
array.Last() 
```

? （.NET 3.5 及更高版本和“使用 System.Linq;”）

.NET 2 解决方案：（将触发 IndexOutOfRange exc. in case of Count == 0）

```
public class MyList<T> : List<T>
{
    public T Last
    {
        get
        {
             return this[this.Count - 1];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:41:47.070

由于您不能使用 Linq，扩展方法或其他只需使用静态方法添加 Utility 类：

```
public static class ArrayUtility
{
    public static double Last(double[] items)
    {
        return items[items.Length -1]);
    }
} 
```

否则，如果您不必使用`array`，只需使用`List<double>`

如果你去使用`List<double>`. 打电话`Add(YourNewDouble)`会成功的。如果您想要队列或堆栈行为。Net 有相应的类 : `Queue<T>`, Stack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:24:24.313

这是一个让我满意的解决方案。C# 3.0 扩展可以在 .NET 2.0 中使用，只需添加以下代码：

```
#if NET20
namespace System.Runtime.CompilerServices
{
    [AttributeUsageAttribute(AttributeTargets.Assembly | AttributeTargets.Class | AttributeTargets.Method)]
     public class ExtensionAttribute : Attribute
    {
    }
}
#endif 
```

之后，您可以使用以下扩展方法（以及许多其他方法）：

```
public static class DoubleArrayExtension
{
    // This is the extension method.
    // The first parameter takes the "this" modifier
    // and specifies the type for which the method is defined.       
    public static double Last(this double[] items)
    {
        return items[items.Length - 1];
    }

} 
```

感谢您的所有提示和建议！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:30:48.653

使用类`List`或者你需要实现相同的功能

如果`List`不适合使用静态方法`Array.Resize(param)`和`Array.Copy(param)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T08:31:50.557

添加`using System.Linq;`到您的文件顶部，以便能够在您的代码中使用 Linq 表达式。`items.Last()`将返回最后一个数组项。

[这是一个完整的 Linq 方法列表](http://msdn.microsoft.com/en-us/library/system.linq.enumerable_methods.aspx)

# android - 怎么会有影子？

> ID：11518710
> 
> 赞同：1
> 
> 时间：2012-07-17T08:28:22.367
> 
> 标签：android, layout, actionbarsherlock, shadows

![在此处输入图像描述](../Images/65ac28302bc6835f986d4afedebcdfc1.png)

我想知道如何获得屏幕截图中的阴影... 1.来自 ActionBAr(ActionBarSherlock) 的阴影 2.来自右侧面板的阴影。

我尝试使用渐变...但效果不佳...请提出建议...

# java - jd-gui 0.3.3 - 在 ubuntu 12.04 上失败？

> ID：11518716
> 
> 赞同：1
> 
> 时间：2012-07-17T08:28:55.667
> 
> 标签：java, decompiler

我认为 jd-gui 是最好的 Java 反编译器之一；我是否很高兴在 Linux 上使用了一段时间。今天我尝试在 Ubuntu 12.04 上调用它；我收到此错误消息：

> jd-gui PROT_EXEC|PROT_WRITE 失败。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:06:04.210

检查您的内核中是否启用了[PaX 。](http://en.wikipedia.org/wiki/PaX)如果是这样，您可以使用[paxctl](http://packages.ubuntu.com/precise/paxctl "paxctl")来控制基于每个二进制文件的内存保护标志。在 Ubuntu 12.04 上，默认情况下启动 jdgui 没有问题，如果您没有明确强化您的系统。

如果 paxctl 不能帮助您解决问题，请检查您的系统上是否有防病毒或其他不真正尊重 PaX 标志的强化。我知道 Sym* *** *AntiVirus for Linux 正在阻止 jdgui。一旦你摆脱了内核模块，那么一切都会恢复正常。运行`lsmod | grep sym`以确认模块是否已加载。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T15:01:55.127

sudo apt-get install ia32-libs-gtk

# css - 我可以用 CSS 完成这个吗？

> ID：11518718
> 
> 赞同：7
> 
> 时间：2012-07-17T08:28:58.767
> 
> 标签：css, css-selectors

如果我有这样的元素：

```
<a href="something">A</a>
<a href="something_else">B</a>
<a href="something">A</a>
<a href="...">C</a> 
```

我知道我可以使用类似的东西

```
body
{
    counter-reset:section;
}

a:before
{
    counter-increment:section;
    content:counter(section)". ";
} 
```

要得到

```
1\. A
2\. B
3\. A
4\. C 
```

但有没有办法得到以下？

```
1\. A
2\. B
1\. A
3\. C 
```

IE。通过在文本前面加上相同的数字来唯一标识页面上的所有链接。

注意：硬编码特定的 URL 不是一种选择，我可能会处理数百个链接并且不提前知道 URL。

我意识到这对 javascript 来说很容易/可能，我只对基于 CSS 的解决方案感兴趣，或者解释为什么 CSS 不可能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:40:46.510

我不认为你可以用纯 CSS 来获得这种行为，你需要 Javascript。而且总是有这样的情况：

```
http://google.com/
http://google.com
google.com
google.com/
www.google.com 
```

你明白了。

* * *

在 jQuery 中，这很简单，所以我建议你使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:10:48.097

好的，我明白你的问题的意思。仅使用纯 CSS 是不可能的（至少不是跨平台的..）

如果您可以使用 javascript，那么您有多种可能性。

我的偏好是使用数据属性来保存值，对于这个例子，我选择了`data-counter`. 如果你这样做，CSS 就变得微不足道了：

**CSS**

```
a:before
{
   content:attr(data-counter)". ";
}​ 
```

如果你有 jQuery，Javascript 看起来像这样：

**带有 jQ​​uery 的 JS**

```
var linkcounter = {};
var counter = 0;
$("a").each(function() {
    if (!linkcounter.hasOwnProperty($(this).attr("href"))) {
        counter++;
        linkcounter[$(this).attr("href")] = counter;
    }
    $(this).attr("data-counter", linkcounter[$(this).attr("href")]);
}); 
```

或像这样没有 jQuery：

**香草JS**

```
var linkcounter = {};
var counter = 0;
var anchors = document.getElementsByTagName('a');
for(var i = 0; i < anchors.length; i++) {
    if (!linkcounter.hasOwnProperty(anchors[i].getAttribute("href"))) {
        counter++;
        linkcounter[anchors[i].getAttribute("href")] = counter;
    }
    anchors[i].setAttribute("data-counter", linkcounter[anchors[i].getAttribute("href")]);
} 
```

您可以在此处查看不带 jQUery 的版本：http: [//jsfiddle.net/ramsesoriginal/CVW7Y/5](http://jsfiddle.net/ramsesoriginal/CVW7Y/5)

这里有 jQuery 的版本：http: [//jsfiddle.net/ramsesoriginal/CVW7Y/4](http://jsfiddle.net/ramsesoriginal/CVW7Y/4)

遗憾的是，没有 CSS 唯一的方法来做到这一点（目前）。我希望这有帮助。​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:44:21.177

您可以使用 :contains 但我不确定它的支持程度，因此使用 JavaScript 可能会更好。

```
a:contains("A") {
    /* Styles here */
}

a:contains("B") {
    /* Styles here */
} 
```

**编辑：**

显然 :contains 根本不支持。我会把它留在这里，所以没有人会费心把它放在这里。

您可以在 jQuery 中使用 :contains 并相应地添加一个类。

```
$('a:contains(A)').addClass('CLASS_NAME'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:59:24.217

如果使用 jQuery 是可以的，这可以通过操作`:before`伪元素的内容来完成：

演示：http: [//jsfiddle.net/rwMWx/2/](http://jsfiddle.net/rwMWx/2/)

**JS**

```
var labels = [
    "1",
    "2",
    "1",
    "3"
    // and so on...    
];

// OR maybe put in some algo for this sequence

$('a').each(function(i) {
    $(this).attr('data-label', labels[i] + '. ');
}); 
```

**CSS**

```
a:before {
    content: attr(data-label);
    color: red;
    text-align: left;
    padding-right: 10px;
    font-size: 11px;
    display: inline;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-17T08:57:43.157

试试这个代码：

```
var counter = 0, cache = {};
$('a').each(function (i, a) {
    a = $(a);
    var href = a.attr('href');
    var c = cache[href];
    if (!c) {
        counter++;
        c = counter;
        cache[href] = c;
    }
    a.text(c + '. ' + a.text());
});
​ 
```

我正在使用 jQuery，这就是它的工作原理：http: [//jsfiddle.net/pDLbQ/](http://jsfiddle.net/pDLbQ/)

# nginx - 如何检索 try_files 指令中使用的目录？

> ID：11518720
> 
> 赞同：0
> 
> 时间：2012-07-17T08:29:09.583
> 
> 标签：nginx

我很难弄清楚 try_files 指令是如何工作的。如果使用索引文件 (http://domain.com/)，则此配置按预期工作：

```
X-Fcgi-Script-Name  /main_apps/domain.com/index.php
X-Script-Filename   /var/www/main_apps/domain.com/index.php 
```

但是，如果我指定 PHP 脚本（index.php 或其他）try_files 按预期查找文件，但请查看变量：

```
X-Fcgi-Script-Name  /index.php
X-Script-Filename   /var/www/index.php 
```

所以我的问题是：如何找到 try_files 指令选择的目录？

**使用的服务器配置**：

```
server {
    server_name  ~^(?P<domain>.+)$;
    root         /var/www;
    autoindex    off;
    index        index.php;

    try_files   /main_apps/$domain$uri/ /partners/$domain$uri/ =404;

    more_set_headers   "X-Script-Filename: $request_filename";
    more_set_headers   "X-Fcgi-Script-Name: $fastcgi_script_name";

    # Pass PHP scripts to PHP-FPM
    location ~ \.php$ {
        fastcgi_param  SCRIPT_FILENAME    $request_filename;
        include        php_fpm_params;
    }
} 
```

**注意**：我使用的 Nginx 是使用 3rd 方模块[HeadersMore](http://wiki.nginx.org/HttpHeadersMoreModule "标头更多")编译的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:10:54.017

> 但是，如果我指定 PHP 脚本（index.php 或其他）try_files 按预期查找文件

你在这里错了。在这种情况下，您的请求由`location ~ \.php$`没有 try_files 处理。

顺便说一句，`server_name ~^(?P<domain>.+)$;`是矫枉过正。你应该使用[`$host`变量](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)。

# java - 从 j2me 调用 GWT 方法

> ID：11518725
> 
> 赞同：2
> 
> 时间：2012-07-17T08:29:59.213
> 
> 标签：java, gwt, java-me

有没有办法通过 j2me 调用 gwt 方法？就像从任何客户端平台向 gwt 服务器发送 http 请求一样？实际上我想将参数从移动（j2me）发送到 gwt 服务器并接收来自移动设备的响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:04:39.667

不，您不能从 j2me 调用 gwt 服务器方法。

您可以做的是使用 json 来交换数据。

**对于 j2me**

[http://java.sun.com/developer/technicalArticles/javame/json-me/](http://java.sun.com/developer/technicalArticles/javame/json-me/)

对于 GWT（以及服务器端）

您可以使用[http://jackson.codehaus.org/](http://jackson.codehaus.org/)或[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

基本上，您需要制作一个 servlet 来处理请求。这是一个例子：http: [//javathoughts.capesugarbird.com/2007/03/simplest-way-to-return-json-object.html](http://javathoughts.capesugarbird.com/2007/03/simplest-way-to-return-json-object.html)

我将假设您有一个 GWT 项目，并且您只想使用必须处理 gwt 请求的服务器来处理 j2me。否则没有意义，因为 GWT 在您的浏览器中作为 javascript 运行。

# javascript - 创建具有数组结构的 Json 对象

> ID：11518730
> 
> 赞同：-1
> 
> 时间：2012-07-17T08:30:16.413
> 
> 标签：javascript, json

我想在调用函数时通过javascript创建一个具有数组的Json对象。（例如“列表（）”）。并且该函数应为以下内容返回一个 json 对象。

```
{
"config": [
           {
            "name":"steve",
            "id":"123"
           },
           {
            "name":"adam",
            "id":"124"
           },
           {
            "name":"eve",
            "id":"125"
           }
          ]
} 
```

谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:37:59.163

我知道“谷歌问题”的答案在这里不受欢迎，但很认真

在谷歌中输入“javascript json”有多难？并按照第一个链接？这里： http: [//www.json.org/js.html](http://www.json.org/js.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:38:27.037

这是你要找的吗

```
var yourArray = [
           {
            "name":"steve",
            "id":"123"
           },
           {
            "name":"adam",
            "id":"124"
           },
           {
            "name":"eve",
            "id":"125"
           }
          ]; 
```

[JSON库](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

```
var myJsonString = JSON.stringify(yourArray); 
```

[jQuery json](http://code.google.com/p/jquery-json/)

```
var encoded = $.toJSON( yourArray ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:40:49.450

我已经完成了从数组 json 字符串解析 json 对象并使用 jQuery 以 html 格式显示的完整 bin。

**HTML：**

```
<div class="jsonobj">
</div>
<br/>
<input type="button" value="Run" id="btnrun"/>
<input type="button" value="Reset" id="btnreset"/> 
```

**CSS：**

```
.jsonobj{
  background:#ddd;
}
.jsonobj .key{
  display:inline-block;
  clear:both;
  color:#993322;
}
.jsonobj .val{
  color:#336622;
  display:inline-block;
  margin-left:7px;
}
input[type=button]{
  border:1px solid #333;
}
input[type=button]:hover{
  background:#eee;
} 
```

查询：

```
function list(a) {
    if (a == null || typeof(a) == "undefined") return false;

    return JSON.parse(a);
}
$(function() {

    $("#btnrun").click(function() {
        var jsonarr = '{"config": [{ "name":"steve", "id":"123"}, {  "name":"adam", "id":"124"},{"name":"eve","id":"125"}]}';

        //Convert into JSON Object
        var jsonObject = list(jsonarr);

        var i = 0,
            html = '';
        $.each(jsonObject.config, function(k, val) {
            html += "<div class='key'>Name:</div><div class='val'>" + val.name + "</div>";
            html += "<br/><div class='key'>Id:</div><div class='val'>" + val.id + "</div><br/>";

        });
        if (html != '') {
            $(".jsonobj").css({
                'padding': '5px',
                'border': '1px solid #222'
            });
            $(".jsonobj").html(html);
        }
    });

    $("#btnreset").click(function() {
        $(".jsonobj").css({
            'padding': '0px',
            'border': '0px'
        });
        $(".jsonobj").html("");
    });

    //Trigger Run on ready
    $("#btnrun").trigger('click');
}); 
```

在[http://codebins.com/bin/4ldqpai上试试](http://codebins.com/bin/4ldqpai)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:40:35.100

Json 只是对象的字符串表示形式。Json 的全部意义在于语法本身是可以被解析为对象的有效 javascript。

很难理解你在这里问什么。如果您只想知道如何从代码中使用对象，您可以执行以下操作：

```
var myObj = {};
myObj.config = [];
myObj.config[0] = {};
myObj.config[0].name = "steve";
myObj.config[0].id = "123";
myObj.config[1] = {};
myObj.config[1].name = "adam";
myObj.config[1].id = "124";
myObj.config[2] = {};
myObj.config[2].name = "eve";
myObj.config[2].id = "125"; 
```

这完全等同于：

```
var myObj = {
    "config": [
       {
        "name":"steve",
        "id":"123"
       },
       {
        "name":"adam",
        "id":"124"
       },
       {
        "name":"eve",
        "id":"125"
       }
    ]
}; 
```

# tridion - 将项目发回给作者时出现 Trusteedata 错误

> ID：11518731
> 
> 赞同：1
> 
> 时间：2012-07-17T08:30:17.450
> 
> 标签：tridion, tridion-2011

我正在尝试使用 coresrvice 将项目发送回工作流中的 auther，以下是我的代码，在将 usrdata 转换为 linktotrusteedata 时出现编译错误。

```
 WorkItemData workitem = (WorkItemData)csClient.Read(workitemid, readoption);
        ProcessInstanceData processInstance = (ProcessInstanceData)csClient.Read(workitem.Process.IdRef, readoption);
        IEnumerable<ActivityData> ieActivities = processInstance.Activities;

        if (ieActivities != null)
        {
            ActivityInstanceData targetactivity = (ActivityInstanceData)csClient.Read(processInstance.Activities[0].Id, readoption);
            UserData lastperformer = (UserData)csClient.Read(processInstance.Activities[0].Owner.IdRef, readoption);                
            ActivityFinishData finishData = new ActivityFinishData(); 
            finishData.Message = "Finished automatically";
            finishData.NextAssignee = lastperformer;
            csClient.FinishActivity(targetactivity.Id, finishData, readoption); 
            csClient.Close(); 

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:40:43.593

NextAssignee 属性属于类型`Link<TrusteeData>`，但您将其设置为`UserData`对象。您可能需要创建一个新链接并填写它的 ID 和标题。

这应该有效（未经测试）：

```
[...]
Link<UserData> lastperformer = processInstance.Activities[0].Owner;                
ActivityFinishData finishData = new ActivityFinishData(); 
finishData.Message = "Finished automatically";
finishData.NextAssignee = new Link<TrusteeData> { Id = lastperformer.Id, Title = lastperformer.Title };
csClient.FinishActivity(targetactivity.Id, finishData, readoption); 
[...] 
```

如果您只是将 NextAssignee 设置为 lastperformer 变量，它也有可能工作，因为 UserData 继承自 TrusteeData - 但我不确定。试试看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:46:34.590

您已经拥有该`LinkToUserData`对象，所以您不能分配`processInstance.Activities[0].Owner`给`finishData.NextAssignee`，或使用`Owner`属性 ( `LinkToUserData`) 来构造一个新的数据对象吗？

还是您阅读的特定原因`UserData`？

# jquery - 从服务器调用 jQuery 函数

> ID：11518734
> 
> 赞同：0
> 
> 时间：2012-07-17T08:30:41.160
> 
> 标签：jquery, server-side, serverside-javascript

我有一个收集测量数据的网络系统。
这些输入来自移动设备（带有自定义网站的 iPhone）。
每次服务器从移动设备获取输入时，我想在管理员的网站上显示一条消息。
消息机制将使用*jQuery.Gritter*来显示它们。

我的问题：如何从服务器调用 jQuery 函数？
我想我不能使用`RegisterStartupScript()`也不能`RegisterClientScriptBlock()`因为网页正在执行任何回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:32:51.173

在服务器端有一个侦听器来检查页面/数据库的更新，并让移动网站在相关时使用 AJAX 提交更改。

# java - 如何国际化套件项目下的所有项目

> ID：11518735
> 
> 赞同：0
> 
> 时间：2012-07-17T08:30:40.893
> 
> 标签：java, netbeans, internationalization

我想为套件模块项目下的所有模块项目设置本地化参数。对于单个项目，我可以使用 VM 选项，例如 -Duser.language=es -Duser.country=ES。如何为套件模块项目而不是每个项目设置此参数。谢谢！

# hibernate - c3p0 缓存对象的性能问题：

> ID：11518742
> 
> 赞同：0
> 
> 时间：2012-07-17T08:31:09.707
> 
> 标签：hibernate, c3p0

我想分享一个奇怪的例子。在生产中，我们的应用程序抛出 OOM 异常，我们进行了堆转储并开始分析，后来我们发现 com.mchange.v2.c3p0.stmt.PerConnectionMaxOnlyStatementCache 实例存在问题。该对象的大小约为堆大小的 50%。该应用程序正在与数十亿用户一起运行，并且服务器一次又一次地停机。

此应用程序在 tomcat 上运行，其中 tomcat 连接器允许最大 300 个并发请求，以下是 c3p0 配置。

```
jdbc.hibernate.c3p0.minPoolSize=2
jdbc.hibernate.c3p0.maxPoolSize=150
jdbc.hibernate.c3p0.maxIdleTime=0
jdbc.hibernate.c3p0.maxStatementsPerConnection=50
jdbc.hibernate.c3p0.numHelperThreads=6 
```

从堆监控工具中，我们收到以下消息

由“org.apache.catalina.loader.WebappClassLoader @ 0x82f1c58”加载的“com.mchange.v2.c3p0.stmt.PerConnectionMaxOnlyStatementCache”实例占用 72 970 824 (57,75%) 个字节。内存在“org.apache.catalina.loader.WebappClassLoader @ 0x82f1c58”加载的“com.mchange.v2.c3p0.stmt.PerConnectionMaxOnlyStatementCache”的一个实例中累积

请告知：-这个实例占用如此大内存的原因是什么？我们是否使用正确的 c3p0 配置运行？对于负载较重的应用程序，推荐的配置是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:10:57.507

您已设置 maxStatementsPerConnection=50 和 maxPoolSize=150。这意味着语句缓存在任何时候可能有多达 7500 个打开的语句，包括驱动程序与语句关联的任何资源的内存占用。您基本上是在要求 c3p0 使用大量内存，理论上内存成本低于准备语句的性能成本。

首先，这可能根本不是真的，在这种情况下，语句缓存通常是失败者，你不应该使用它。您应该将 maxStatements 和 maxStatementsPerConnection 都设置为零来测试您的应用程序是否真的从语句缓存中受益（如果您还没有的话）。对于在 PreparedStatement 对象中缓存大量解析和准备的驱动程序，语句缓存可以提供很大帮助。但是您需要在缓存的内存占用和预缓存语句的性能优势之间进行权衡。很明显，即使语句缓存对您的性能有所帮助，您也已经超出了收益超过成本的地步。

在你的应用程序中，这 150 条准备好的语句中有多少是经常使用的？你能不能让这个数字更小，最好更小，期待更不常用的语句会从缓存中退出并很好地摆脱它们？或者，您可以不理会该数字，但将 maxStatementsPerConnection 与全局 maxStatements 设置结合起来（设置为小于您当前使用的隐式 7500 的值）。如果结合 maxStatementsPerConnection 和 maxStatements，当池较小时，每个 Connection 最多可以有 maxStatementsPerConnection，但是随着池变大并且内存占用成为危险，全局 Statement 限制将导致最近使用较少的 Statements 启动退出缓存以保留内存。

我希望这个对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:25:30.053

这是因为你给了**maxIdleTime=0**。

将 maxIdleTime 设置为非零值允许 C3P0 从池中删除连接并释放数据库资源。

> 当 maxIdleTime 设置为 0 时，这永远不会发生

.

所以我相信你的连接都没有从池中删除。这就是为什么它的堆大小变得很大的原因。

如需更多参考[，请单击此处](http://javatech.org/2007/11/c3p0-connectionpool-configuration-rules-of-thumb/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T08:40:29.433

尝试使用[BoneCP](http://www.jolbox.com/)作为高性能连接池，它解决了 c3p0 和 Apache DBCP 的许多面向性能的问题。

# java - string.replaceAll java 不适用于环视正则表达式？

> ID：11518744
> 
> 赞同：1
> 
> 时间：2012-07-17T08:31:10.393
> 
> 标签：java, regex, string, replaceall

我有一个这样的json字符串：

```
string = "{name={first=sam, last=vo}, hobbies={hobby1=football, hobby2=swimming}}" 
```

我想删除“name=”和“hobbies=”，所以我使用这个模式：`\w*\=(?={)`->tested using editPadPro

但是，当我在 java 中使用 replace all 时：

```
String pattern = "\\w*\\=(?={)";
String removedParent = string.replaceAll(pattern, ""); 
```

我收到此错误消息

```
"Exception in thread "main" java.util.regex.PatternSyntaxException: Illegal repetition near index 7
\w*\=(?={)" 
```

你能给我一些建议来完成这项工作吗？

问候，

山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:36:02.350

问题是该`{`字符是正则表达式语法中的一个特殊字符，它表示一个数量（例如`\d{2}`表示 2 个数字）。在您的情况下，您想要匹配文字`{`，这意味着您需要*转义*`{`字符，因此您需要将您的正则表达式更改为：`"\\w*\\=(?=\\{)";`。

对我来说，这产生了：

> {{first=sam, last=vo}, {hobby1=足球, hobby2=游泳}}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:39:31.940

```
java.util.regex.PatternSyntaxException: Illegal repetition 
```

是因为你的“{”在`"\\w*\\=(?={)"`。如您所知，“{”和“}”是表示字符重复的特殊字符......

试着像那样逃避它`"\\w*\\=(?=\\{)"`。并且由于您正在使用 json ，请考虑使用 JSON-Parser，例如：

*   [杰克逊](http://jackson.codehaus.org/)
*   [网络.json](http://www.json.org/java/)

# android - 如何在 Android SQLite 中存储时间

> ID：11518747
> 
> 赞同：0
> 
> 时间：2012-07-17T08:31:17.750
> 
> 标签：android, android-sqlite

从[如何将下午 6:00 存储在 android 的 sqlite 数据库中](https://stackoverflow.com/questions/4862127/how-to-store-600pm-in-sqlite-database-in-android)，我知道对于 SQLite，没有数据类型“TIME”。
那么，如果我想存储时间（年、月、日、小时、分钟、秒），我该如何创建该列？我应该使用“文本”？？但是，我如何为 Android 解析它们，
如果我想按时间排序，我该怎么做？
感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:35:38.783

您可以为自己定义日期格式（[链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)），并且可以创建一个`DateManager`类来将日期转换为字符串（将其存储在 SQLite 数据库中）并将字符串转换为日期，两者都基于该日期格式由您指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:36:15.890

最简单的解决方案是将`Date`as `miliseconds`( `long`) 存储。您可以使用存储它们的日期获取毫秒数`date.getTime()`，当您重新创建`Date`对象时可以使用`Date d=new Date(milliseconds)`.

# apache - 使用 Drupal 进行非 Drupal 身份验证

> ID：11518751
> 
> 赞同：0
> 
> 时间：2012-07-17T08:31:25.983
> 
> 标签：apache, drupal

我在 Web 根目录上有一个带有 Drupal 的 Apache 网络服务器。我在根目录的子目录中也有一些非 Drupal 内容。我希望它使非 Drupal 内容不可访问，除非用户首先登录 Drupal。

我遇到过使用 mod_auth_mysql （[在此处输入链接描述](http://drupal.org/node/156547)），但这并不是我想要的。它要求用户登录两次（一次登录 Drupal，一次登录非 Drupal 内容）。

我想解决方案类似于让 .htaccess 运行一个脚本来确定用户是否登录。这个脚本必须连接到 Drupal 系统。

是否可以使用 .htaccess 运行脚本以确定是否应授予访问权限？

还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:16:19.757

我通过部分加载 Drupal（通过 DRUPAL_BOOTSTRAP_SESSION）然后检查 $user 全局来实现这一点。

```
<?php
$base_url = 'http://'.$_SERVER['HTTP_HOST'];
$drupal_path = "../../";
$cdir = getcwd();
chdir($drupal_path);
require_once 'includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);
chdir($cdir);

global $user;

$access_granted = in_array('authenticated user', $user->roles);
    if (!$access_granted):
            //Show page
        else:
            //Show access denied
        endif;
 ?> 
```

# ios - iOS RestKit 块

> ID：11518753
> 
> 赞同：0
> 
> 时间：2012-07-17T08:31:38.660
> 
> 标签：ios, restkit, block

我正在尝试使用带有 Blocks 的 Restkit 等待响应。

例子：

```
NSArray *myArray = ["RESULT OF REST-REQUEST"];

// Working with the array here. 
```

我的阻止请求之一：

```
- (UIImage*)getPhotoWithID:(NSString*)photoID style:(NSString*)style authToken:(NSString*)authToken {
__block UIImage *image;
NSDictionary *parameter = [NSDictionary dictionaryWithKeysAndObjects:@"auth_token", authToken, nil];
RKURL *url = [RKURL URLWithBaseURLString:@"urlBase" resourcePath:@"resourcePath" queryParameters:parameter];
NSLog(@"%@", [url absoluteString]);
[[RKClient sharedClient] get:[url absoluteString] usingBlock:^(RKRequest *request) {
    request.onDidLoadResponse = ^(RKResponse *response) {
        NSLog(@"Response: %@", [response bodyAsString]); 
        image = [UIImage imageWithData:[response body]];
    };
}];
return image;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:53:07.123

您不能在此方法中返回任何内容，因为图像的获取将是异步的 - 它必须是`-(void)`.

所以你会怎么做？您应该将调用此方法的操作放在响应块中。警惕块中的[保留循环](http://borkwarellc.wordpress.com/2010/09/06/block-retain-cycles/)。

```
__block MyObject *selfRef = self;

[[RKClient sharedClient] get:[url absoluteString] usingBlock:^(RKRequest *request) {
    request.onDidLoadResponse = ^(RKResponse *response) {

         NSLog(@"Response: %@", [response bodyAsString]); 

         image = [UIImage imageWithData:[response body]];

         [selfRef doSomethingWithImage:image];

    };
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:31:59.010

上面的代码在 ARC 开启的情况下不起作用（XCode 自 iOS 5.0 起默认）。__block 变量不再免除 ARC 下的自动保留。在 iOS 5.0 及更高版本中使用 __weak 而不是 __block 来打破保留周期。

# maven - 使用继承的 Maven 插件构建失败

> ID：11518764
> 
> 赞同：1
> 
> 时间：2012-07-17T08:32:01.320
> 
> 标签：maven, dependencies, maven-plugin

我编写了一个 Maven 插件抽象器，称为 maven-base-plugin。该插件遍历所有类和资源并执行某些任务。由于它是一个抽象插件，所以这个插件没有将其包装设置为`maven-plugin`，而是设置为“jar”。

我有另一个插件，`tools-reporter`它使用上述插件 API 为我的项目创建报告。同样，报告的报告和目的地是接口，因此它们可以在未来进行扩展。同样，这个项目有一个“jar”的包装。

现在，我有了第三个插件，这取决于生成某些报告以用于工件和资源的报告器插件。这个插件的包装设置为“maven-plugin”。让我呆了一段时间，各种检查都没有解决，是我无法成功构建第三个插件。

当我这样做时，我得到：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-plugin-plugin:2.3:descriptor (default-descriptor) on project tools-reporter-sample: Execution default-descriptor of goal org.apache.maven.plugins:maven-plugin-plugin:2.3:descriptor failed: 0 -> [Help 1] 
```

详情说：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-plugin-plugin:2.3:descriptor (default-descriptor) on project tools-reporter-sample: Execution default-descriptor of goal org.apache.maven.plugins:maven-plugin-plugin:2.3:descriptor failed: 0
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-descriptor of goal org.apache.maven.plugins:maven-plugin-plugin:2.3:descriptor failed: 0
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 25 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: 0
    at org.apache.maven.tools.plugin.extractor.java.JavaMojoDescriptorExtractor.getJavaClass(JavaMojoDescriptorExtractor.java:534)
    at org.apache.maven.tools.plugin.extractor.java.JavaMojoDescriptorExtractor.execute(JavaMojoDescriptorExtractor.java:553)
    at org.apache.maven.tools.plugin.scanner.DefaultMojoScanner.populatePluginDescriptor(DefaultMojoScanner.java:84)
    at org.apache.maven.plugin.plugin.AbstractGeneratorMojo.execute(AbstractGeneratorMojo.java:135)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    ... 26 more 
```

任何帮助或见解将不胜感激。

顺便说一句，我尝试了将包装设置为不同值的各种组合。唯一有效的是宣布第三个插件，`tools-reporter-sample`作为一个简单的“jar”，这会适得其反，因为它消除了这个练习的全部目的。

这是有问题的代码的要点：

*   [https://gist.github.com/3128364](https://gist.github.com/3128364)

以下是对每一项的用途的描述：

*   [AbstractPluginExecutor.java](https://gist.github.com/3128364#file_abstract_plugin_executor.java)：捆绑为 jar 并由基本报告插件使用的原始基本插件
*   [mave-base-plugin-pom.xml](https://gist.github.com/3128364#file_mave_base_plugin_pom.xml)：`pom.xml`基础 maven 插件的文件
*   [Executor.java](https://gist.github.com/3128364#file_executor.java)：负责所有报告的抽象类。
*   [tools-reporter-pom.xml](https://gist.github.com/3128364#file_tools_reporter_pom.xml)：`pom.xml`基本报告插件的文件。
*   [Reporter.java](https://gist.github.com/3128364#file_reporter.java)：实际应该运行的示例插件。
*   [tools-reporter-sample-pom.xml](https://gist.github.com/3128364#file_tools_reporter_sample_pom.xml)：`pom.xml`示例报告插件的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:29:29.900

事实证明，失败根本不是由于插件的分层设计。但奇怪的是，让插件在其类路径中包含一个注释就可以了。我有一堂课，`@interface Sample {`. 一旦我删除它，一切都解决了。

不过，我还没有弄清楚为什么。

# c# - 如何从 SQL Server 2008 快速检索数千条记录中的关键字？

> ID：11518766
> 
> 赞同：1
> 
> 时间：2012-07-17T08:32:06.947
> 
> 标签：c#, entity-framework

在C#中使用实体集合的查询功能，从SQL Server 2008中加载相关记录需要很长时间。有什么快速的方法吗？这是我使用的查询功能：

```
 public void SearchProducts()
    {
        //Filter by search string array(searchArray)
        List<string> prodId = new List<string>();

        foreach (string src in searchArray)
        {
            StoreProductCollection prod = new StoreProductCollection();
            prod.Query.Where(prod.Query.StptName.ToLower() == src.ToLower() && prod.Query.StptDeleted.IsNull());
            prod.Query.Select(prod.Query.StptName, prod.Query.StptPrice, prod.Query.StptImage, prod.Query.StptStoreProductID);
            //  prod.Query.es.Top = 4;
            prod.Query.Load();

            if (prod.Count > 0)
            {
                foreach (StoreProduct stpt in prod)
                {
                    if (!prodId.Contains(stpt.StptStoreProductID.ToString().Trim()))
                    {
                        prodId.Add(stpt.StptStoreProductID.ToString().Trim());
                        productObjectsList.Add(stpt);
                    }

                }
            }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:51:25.833

首先，在 StptName 列上放置一个索引。

其次，如果您需要更好的性能，请在 SQL 中编写一个存储过程来进行查询，并将其映射到实体框架。

如果您需要解释如何执行上述任何操作，请告诉我。

如果您不想编写存储过程，可以进行更多的微优化：

1.  将 src.ToLower() 写入临时变量，然后将 prod.Query.StptName.ToLower() 与它进行比较。
2.  默认情况下，SQL Server 查询不区分大小写，因此请检查是否是这种情况，如果是，您可以完全摆脱 ToLower。您可以通过排序规则更改区分大小写。

编辑：
创建索引：
在 SQL Server Management Studio 中打开表设计器。
右键单击任意位置并选择索引/键。
单击添加。
在列下添加 StptName。
在 Is Unique 下指定 StptName 是否唯一。
在类型下选择“索引”。
就这样！

至于映射存储过程 - 这是一个很好的教程：
[http](http://www.robbagby.com/entity-framework/entity-framework-modeling-select-stored-procedures/)
://www.robbagby.com/entity-framework/entity-framework-modeling-select-stored-procedures/ （您可以直接跳转到“选择存储中的映射”程序”部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:51:32.973

您每个`searchArray`项目都访问数据库一次，这是非常错误的。你可能会像这样获得更好的性能（没有办法测试它，试一试）：

```
public void SearchProducts()
{
    //Filter by search string array(searchArray)
    List<string> prodId = new List<string>();
    StoreProductCollection prod = new StoreProductCollection();

    // Notice that your foreach() is gone

    // replace this
    // prod.Query.Where(prod.Query.StptName.ToLower() == src.ToLower() && prod.Query.StptDeleted.IsNull());
    // with this (or something similar: point is, you should call .Load() exactly once)
    prod.Query.where(prod.Query.StptDeleted.IsNull() && src.Any(srcArrayString => prod.Query.StptName.ToLower()==srcArrayString.ToLower());

    prod.Query.Select(prod.Query.StptName, prod.Query.StptPrice, prod.Query.StptImage, prod.Query.StptStoreProductID);
    //  prod.Query.es.Top = 4;
    prod.Query.Load();

    // ... rest of your code follows. 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:52:00.523

鉴于`List<string> searchArray`包含降低的单词：

```
 public void SearchProducts()  
    {  
        //Filter by search string array(searchArray)  
        List<string> prodId = new List<string>();

        StoreProductCollection prod = new StoreProductCollection();  
        prod.Query.Where(searchArray.Contains(prod.Query.StptName.ToLower()) && prod.Query.StptDeleted.IsNull());  
        prod.Query.Select(prod.Query.StptName, prod.Query.StptPrice, prod.Query.StptImage, prod.Query.StptStoreProductID);  
        //  prod.Query.es.Top = 4;  
        prod.Query.Load();  

        if (prod.Count > 0)  
        {  
            foreach (StoreProduct stpt in prod)  
            {  
                if (!prodId.Contains(stpt.StptStoreProductID.ToString().Trim()))  
                {  
                    prodId.Add(stpt.StptStoreProductID.ToString().Trim());  
                    productObjectsList.Add(stpt);  
                }  

            }  
        }  
     } 
```

这样，您对所有单词只有一个查询。

# silverlight-4.0 - 复选框内容可见性

> ID：11518771
> 
> 赞同：0
> 
> 时间：2012-07-17T08:32:24.283
> 
> 标签：silverlight-4.0

是否可以在 Silverlight 中隐藏复选框内容

```
CheckBox cb = new CheckBox();

                cb.Name = "checkboxName";

                cb.Content = 99; 
```

// 我在其他地方需要的值，但不希望用户看到它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:49:38.590

如果您不想看到内容，只需将其保留为空并使用标签属性来存储任何对象。

即 cb.tag = 任何东西。=> 这可以在任何地方访问。

# c - 如何使 atoi 在我的 ADS 项目中工作？

> ID：11518773
> 
> 赞同：0
> 
> 时间：2012-07-17T08:32:40.330
> 
> 标签：c, arm, ctype

我想`atoi`在我的程序中使用函数，但我发现它不起作用。

```
#include <ctype.h>
int value;
value=atoi(buf); 
```

`char buf`指向“1000”或类似的东西，以 . 结尾`\0`。我已经检查过了。但该值始终为零。我试过`strtol()`了，但我得到了同样的错误。

1.  我的 ADS（ARM 开发人员套件）是 v1.2 (s3c2440)。我可以在 armlib 路径 (c_t_xx.l) 中找到这些库。
2.  我使用`axd`调试模式，所以我可以跟踪我的代码。我找到了，所以我认为 asm 代码链接正确。`"bl
    __rt_ctype_table"`

请提供任何建议来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:36:57.777

ARM 可能有字符串函数的问题，你没有提到它是否返回一个值并且它不正确（我听说这是一个错误，最好你应该自己编写函数）或者根本没有值。无论如何看看关于它的arm文章我认为这是解决方案 -[关于字符串函数的ARM文章](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka3536.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:41:39.090

以下代码应该可以工作，

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
        int i;
        char buff[5] = "1000\0";
        i=atoi(buff);
        printf("i=%d\n", i); 
        return 0;
}

#./a.out
#i=1000 
```

# android - 没有网络时，Facebook.authorizeCallback 结果带有 NullPointerException

> ID：11518776
> 
> 赞同：0
> 
> 时间：2012-07-17T08:32:57.227
> 
> 标签：android, facebook

我一直在尝试在我的应用程序中使用 Facebook SDK，但突然在调用 Facebook.authorizeCallback 时应用程序开始崩溃。在 OnActivityResult() 中调用 Facebook.authorizeCallback 并且它仅在没有网络时发生。我搜索了很多但是没有找到任何解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:38:03.340

首先检查是否有网络，然后启动facebook进程..

检查网络可用性

```
ConnectivityManager conMgr = (ConnectivityManager) con
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    if (conMgr.getActiveNetworkInfo() != null
            && conMgr.getActiveNetworkInfo().isAvailable()
            && conMgr.getActiveNetworkInfo().isConnected()) {
        network= true;
    } else
    {
        network= false;
    }

   if(network)
  {
      //do the process for facebook
  }
  else
  {
      // show alert message network not available
   } 
```

# java - 用于插入自定义代码 Eclipse 的键绑定键

> ID：11518784
> 
> 赞同：2
> 
> 时间：2012-07-17T08:33:16.320
> 
> 标签：java, eclipse, time, macros, key-bindings

我将如何设置键绑定，所以当我在 Eclipse 中按下例如`Ctrl`++`Shift`时`T`，它会用时间测量器围绕选定的行。

像这样：

1：

```
CODE
CODE
CODE 
```

2：选择三行并按CTRL+SHIFT+T

3：

```
long startTime = System.currentTimeMillis();
CODE
CODE
CODE
Print.pln("Time taken: " + (System.currentTimeMillis() - startTime) + "ms"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:11:07.840

您可以通过使用模板来实现这一点，例如：

```
long ${newName} = System.currentTimeMillis();
${line_selection}
Print.pln("Time taken: " + (System.currentTimeMillis() - ${newName}) + "ms"); 
```

您可以在 Preferences->Java->Editor->Templates 下添加它。在这里你必须给它一个名字，例如计时器。

要使用它，请选择代码，按两次 CNTRL+SPACE，然后选择计时器（或您为模板指定的任何名称）。

请注意，这将为时间变量生成一个名称。

# php - 让基于 symfony2 客户端的动态 CSS 以某种方式工作

> ID：11518785
> 
> 赞同：0
> 
> 时间：2012-07-17T08:33:17.473
> 
> 标签：php, css, symfony

在我的 Symfony 项目中，我有很多客户，都有几种颜色。

我的表格是用颜色选择器设置的，一切都很好。

但是如何在我的 CSS 文件中使用这些值，这些值是由资产处理的？

我一直在搜索谷歌，找到了很多 symfony1 的解决方案，而不是 symfony2 的机器人。

有没有人知道正确的方法？

（ps：我不能在这个项目中使用LESS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:20:41.943

我不认为你可以，或者我完全理解你....但是假设你想生成 css 颜色，基于一些属性字段，一个用户实体已经并且在一个数据库表中，但是如果这些颜色是有限的，例如用户排名，每个用户排名都有一个颜色（比如最多 20 个），那么你可以给每个用户排名一个特殊的 css-class，并让它显示出来。

# r - 我可以更改 ggplot2 中 x 轴与 y 轴的交点吗？

> ID：11518786
> 
> 赞同：0
> 
> 时间：2012-07-17T08:33:17.787
> 
> 标签：r, ggplot2

我正在将一些索引数据绘制为条形图。我想通过强制 x 轴在 100 处交叉（这样 80 的值将显示为 -20 条）来强调数字的“高于索引”和“低于索引”。

这是一个更长的过程的一部分，因此很难有效地共享数据。不过，这里有一些说明问题的笨拙代码（以及我的解决方案的开始）：

```
df <- data.frame(c("a","b","c"),c(118,80,65))
names(df) <- c("label","index")

my.plot <- ggplot(df,aes(label,index))
my.plot + geom_bar()

df$adjusted <- as.numeric(lapply(df$index,function(x) x-100))

my.plot2 <- ggplot(df,aes(label,adjusted))
my.plot2 + geom_bar() 
```

当然，我可以将我的索引计算更改为：`(value.new/value.old)*100-100`然后适当地为图表命名（类似于“xxx 相对于索引”），但这似乎很笨拙。

所以，我一直在测试的方法也是如此（运行上面的简单计算，然后重新标记 y 轴。）这*真的*是最好的解决方案吗？

毫无疑问，有人会告诉我这种轴操纵是不受欢迎的。如果是这种情况，请他们指出我的解释方向吗？至少那时我会学到一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:43:57.833

这并不能直接回答您的问题，但与其错过 x 轴，不如让一条网格线更粗一点？例如，

```
dd = data.frame(x = 1:10, y = runif(10))
g = ggplot(dd, aes(x, y)) + geom_point()
g + geom_hline(yintercept=0.2, colour="white", lwd=3) 
```

![在此处输入图像描述](../Images/571ba26433122accec72c37d5afe98e6.png)

或者像保罗建议的那样，用黑线和一些文字：

```
 g + geom_hline(yintercept=0.2, colour="black", lwd=3) + 
        annotate("text", x = 2, y = 0.22, label = "Reference") 
```

![在此处输入图像描述](../Images/33339af44dd4f4d3f2b5b90c26281bd0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:45:37.850

您绘制的坐标系的 x 轴和 y 轴在 (0,0) 处交叉。这就是您定义坐标系的方式。您当然可以在 (x = 100) 处绘制一条水平线，但称其为 x 轴是错误的。

您已经提出的是通过转换数据来重新定义您的坐标系。通过您身边的可重复示例更容易回答这种转换是否合适。

# c++ - wxwidgets 中的按钮 - 不同的行为

> ID：11518788
> 
> 赞同：0
> 
> 时间：2012-07-17T08:33:33.807
> 
> 标签：c++, user-interface, wxwidgets

我想问一下如何从我写的点开始在特定位置调整按钮的大小但是按钮出现在整个屏幕上，请帮忙

我正在使用 .cpp 文件而不是 .h 和 .cpp

```
enum
{
    BUTTON_Generate = 2, 

};
bool MyApp::OnInit()
{
    MyFrame *frame = new MyFrame( _("Key Generator"), wxPoint(1, 1),wxSize(450, 450));
 frame->Connect( BUTTON_Generate, wxEVT_COMMAND_BUTTON_CLICKED, (wxObjectEventFunction)      
 &MyFrame::OnAbout);

}

MyFrame::MyFrame(const wxString& title, const wxPoint& pos, const wxSize& size)
: wxFrame( NULL, -1, title, pos, size )
{

GenerateKey = new wxButton(this, BUTTON_Generate, _T("Generate Key"), wxPoint(200,    
200), wxSize(10,10), 0); 

} 
```

但是，如果我写：另一个按钮为：

```
 GenerateKey2 = new wxButton(this, BUTTON_Generate, _T("Generate Key"), wxPoint(200,   
    200), wxSize(10,10), 0); 
```

它显示两个按钮在指定的点对齐，但是在声明单个按钮的情况下，它显示按钮在整个框架上拉伸，为什么会这样？

艾玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:24:26.630

我认为问题在于您已将值 2 分配给按钮的窗口 id。这个值被 wxWidgets 内部用于其他用途。

要设置一个不与 wxWidgets 使用的 ID 冲突的窗口 ID，请按照以下方式进行操作：

```
// IDs for the controls and the menu commands
enum ControlIDs {

  lastwxwidgetid = wxID_HIGHEST,

  BUTTON_Generate;

}; 
```

这将迫使您的新 ID 高于 wxWidgets 使用的 ID。

似乎VZ.的答案是正确的。但是，您仍然应该小心分配有冲突的窗口 ID - 最终您会遇到一些很难调试的奇怪行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:58:06.323

正如[wxFrame 文档](http://docs.wxwidgets.org/trunk/classwx_frame.html)中提到的，唯一的孩子`wxFrame`总是会调整大小以适应其整个客户区，因为这是您通常想要的。

除非，也就是说，您自己处理调整大小事件。

> wxFrame 处理以下事件：
> 
> wxEVT_SIZE：如果框架只有一个子窗口，不包括状态和工具栏，这个子窗口被调整大小以占据整个框架客户区。如果存在两个或多个窗口，则应通过手动处理 wxEVT_SIZE 或使用 sizers 显式布局它们；

这是创建框架的子项，然后将所有控件创建为此面板的子项的原因之一（另一个原因是您需要使用`wxPanel`键盘导航才能工作） 。`wxPanel`

顺便说一句，考虑使用在任何情况下都无法正常工作的大小而不是绝对定位。

# html - 不透明度 50% 元素通过不透明元素显示

> ID：11518790
> 
> 赞同：4
> 
> 时间：2012-07-17T08:33:36.553
> 
> 标签：html, css, ckeditor

我遇到了 CKEdit 的问题。工具栏通过工具栏顶部的元素显示，如您在此屏幕截图中所见：

![在此处输入图像描述](../Images/fbf7fa5df7d4ff60d0ae08b088e82701.png)

该按钮通过 变灰`opacity: 0.5`，如果将其删除，则该元素将正确放置在工具栏下方`position: fixed`：

![在此处输入图像描述](../Images/50979d0932e1ff8a160233a099461fa9.png)

受影响的浏览器：
Chrome、Safari、Firefox、Internet Explorer 9

不可测试
的浏览器：Internet Explorer 8（`position: fixed`页面滚动，因此问题不会显示）

我还没有测试过其他浏览器，但这似乎是一个与渲染引擎无关的问题。

浮动（固定）元素本身是不透明的，它不是工具栏的子元素。但是当透明时，透明按钮会浮在上面。但是当不透明度设置为 1 时，它们会停留在其下方。因此看起来不透明度正在影响元素的 z 层。

JSFiddle： http:
[//jsfiddle.net/7gSyB/](http://jsfiddle.net/7gSyB/) - 您可以通过工具栏的测试看到按钮的“Bla”，尽管它是不透明的红色。
[http://jsfiddle.net/7gSyB/1/](http://jsfiddle.net/7gSyB/1/) - 将“Bla”切换为不透明，它位于顶部元素的后面。

**任何想法为什么会发生这种情况以及如何使其按预期工作（即使透明元素也保持在浮动元素下方）？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:36:26.010

来自[CSS3-color](http://www.w3.org/TR/css3-color/#transparency)文档：

> 实现必须为不透明度小于 1 的任何元素创建新的堆叠上下文。如果未定位不透明度小于 1 的元素，实现必须在其父堆叠上下文中以相同的堆叠顺序绘制它创建的层如果它是一个定位元素，则使用`z-index: 0`and `opacity: 1`

因此，您的`#button { opacity:.5 }`元素将获得一个新的堆叠上下文，`z-index:0`并且您的绝对定位`#toolbar`也将具有 (默认) `z-index:0`。因此，DOM 中元素的顺序将导致浏览器将按钮绘制在工具栏的顶部，因为按钮实际上是在页面顺序的从上到下的工具栏元素之后。

修复只是向`z-index`#toolbar 添加一个更高的（大于0），例如：

### HTML

```
<div id="toolbar">Test Test Test</div>
<div id="button">Blah</div> 
```

### CSS

```
#toolbar {
  background: red;
  position: fixed;
  z-index:1; /* if this is 0 then the button will be painted over the toolbar */
}

#button {
  opacity: 0.5;
  background-color:#000;
  height:42px;
  width:84px;
  color:#fff;
  font-size:42px;
}​ 
```

# sql-server-2008 - 将access 2003数据库导入sql server 2008

> ID：11518796
> 
> 赞同：0
> 
> 时间：2012-07-17T08:34:27.100
> 
> 标签：sql-server-2008, ms-access

我正在通过 SQL Server 导入和导出向导将 MS Access 2003 数据库导入 SQL Server 2008。数据库导入成功，但是我看两边的表，却不一样。例如，访问数据库中的一些表在 SQL Server 中不存在，而在 SQL Server 中创建的一些表在原始数据库中不存在。

![在此处输入图像描述](../Images/38ab79949d95a175d0af8c21d4bf2f5e.png)

原始数据库中缺少的一些表被突出显示 ![在此处输入图像描述](../Images/66610eb9feca73a070dce2ad253fb390.png)

为什么会这样？那我该如何验证导入呢？

**重要编辑：**它正在导入查询而不是表。向导中看到的条目在原始数据库中作为查询出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:43:02.270

我不是 2003 Upsize Wizard 的粉丝。我建议您创建一个新的 SQL 数据库，然后使用 SSMS 导入表和数据，方法是右键单击 Database 节点并选择 Tasks 然后 Import Data... 然后确保为 SQL Server 中的每个表建立了主键，然后创建前端 mdb 中的 ODBC 链接表。

# android - 背景上可见的片段

> ID：11518804
> 
> 赞同：5
> 
> 时间：2012-07-17T08:35:20.337
> 
> 标签：android, android-fragments

我正在开发一个应用程序，该应用程序具有三个在 XML 文件中定义的片段：

```
 [HeaderFragment] 

 [MainFragment] 

 [FooterFragment] 
```

第一个屏幕启动三个片段，Header- 和 FooterFragment 是静态的，所以不会改变内容。

MainFragment 最初是一个带有按钮和透明背景 ( `MenuFragment`) 的菜单。当我单击菜单中的一个项目时，我将 替换为`MenuFragment`一个新片段 ( `DetailsFragment`)，如下所示：

```
FragmentTransaction transaction = mFragmentManager.beginTransaction();
Fragment newFragment = new DetailFragment();
transaction.replace(R.id.content_container, newFragment);
transaction.addToBackStack(newFragment.getTag());
transaction.commit(); 
```

出现`DetailFragment`了，当我按回时，`MenuFragment`出现了，一切正常。

**这是我的问题：**

在我的内部`DetailFragment`，我有一个切换选项来过滤内容，这是一个按钮。单击此按钮时，会以与上述代码相同的方式`DetailFragmentFiltered`替换。`DetailFragment`唯一的区别是我没有将它添加到 BackStack 中，因为在过滤并按下 Back.. 之后，我仍然想返回到`MenuFragment`.

当我单击过滤器按钮并按返回时，`DetailFragment`（或`DetailFragmentFiltered`）显示在我的`MenuFragment`. 当然，我不想要这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:24:50.683

通过在布局中将第一个片段设置为“android:name”，确保不使用与 XML 的静态片段关系。

使用 framelayouts 制作 XML 的布局并灵活添加片段，如本教程所示：

[http://developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)

# android - 发生 ArrayIndexOutOfBoundsException

> ID：11518805
> 
> 赞同：0
> 
> 时间：2012-07-17T08:35:21.203
> 
> 标签：android, nfc, ndef

在这里，我正在开发一个将读取 NFC 标签中的记录的安卓应用程序。这是我的程序中读取标签的代码部分，当它读取时，会发生越界异常。

```
NdefMessage[] msgs = null;
    String action = intent.getAction();
    if(NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)||
            NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)){
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if(rawMsgs != null){
            msgs = new NdefMessage[rawMsgs.length];
            for(int i=0; i<rawMsgs.length; i++){
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        }else{
            byte[] empty = new byte[]{};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[]{record});
            msgs = new NdefMessage[]{msg};
        }

    }
    if(msgs==null){
        String[] array = new String[]{"No Tag discovered!"};
        return array;
    }else{
        String[] array = new String[]{new String(msgs[0].getRecords()[0].getPayload()), 
                                        new String(msgs[1].getRecords()[0].getPayload())
        };
        return array;
    } 
```

![标签中的记录](../Images/c9a36b0f682357696dfcfb0a8feb8f0b.png)

当我隐藏这句“new String(msgs [1](https://i.stack.imgur.com/M9ps9.jpg) .getRecords()[0].getPayload())”时，我的程序可以顺利运行，所以我很确定程序在这一行。请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:52:02.137

是的，这一行肯定有问题

```
new String[]{new String(msgs[0].getRecords()[0].getPayload()), 
                                            new String(msgs[1].getRecords([0].getPayload()) 
```

因为您尝试`msgs[1].getRecords`在上面的行中访问。但是如果你看到你的代码，在某些情况下，比如

```
else{
            byte[] empty = new byte[]{};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[]{record});
            msgs = new NdefMessage[]{msg};
        } 
```

msgs 数组仅包含一个元素，但您尝试访问不存在的第二个元素。因此，在访问数组之前更改您的代码并应用条件。

# spring-mvc - Spring 3 和 Thymeleaf 模板引擎的配置问题

> ID：11518806
> 
> 赞同：2
> 
> 时间：2012-07-17T08:35:21.740
> 
> 标签：spring-mvc, template-engine, thymeleaf

我已将[Thymeleaf GitHub](https://github.com/thymeleaf/thymeleaf-dist/downloads)中的以下 JAR 添加到我的构建路径中。
- lib/javassist-3.16.1-GA
- lib/ognl-3.0.5
- lib/slf4j-api-1.6.1
- dist/thymeleaf-spring3-2.0.8

这是我的 application-context-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- It allow us to use @Autowire, @Required and @Qualifier annotations. -->
    <context:annotation-config />

    <context:component-scan base-package="com.company">
        <context:exclude-filter expression="org.springframework.stereotype.Controller"
            type="annotation" />
    </context:component-scan>

    <aop:aspectj-autoproxy proxy-target-class="true" />

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames">
            <list>
                <value>ui</value>
                <value>messages</value>
                <value>exceptions</value>
            </list>
        </property>
    </bean>

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />

    <bean id="issuerValidator"
        class="com.company.console.validators.MyValidator" />

    <bean id="templateResolver"
        class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
        <property name="prefix" value="/WEB-INF/templates/" />
        <property name="suffix" value=".html" />
        <property name="templateMode" value="HTML5" />
    </bean>

    <bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
        <property name="templateResolver" ref="templateResolver" />
    </bean>

</beans> 
```

启动我的应用程序时出现以下错误（在将*templateResolver*和*templateEngine*添加到我的 application-context-config.xml 之前它开始正常。

```
DEBUG [2012-07-17 09:31:29,517] [Thread-2] (XmlBeanDefinitionReader) - Loaded 13 bean definitions from location pattern [/WEB-INF/Resources/*-config.xml]
DEBUG [2012-07-17 09:31:29,517] [Thread-2] (XmlWebApplicationContext) - Bean factory for Root WebApplicationContext: org.springframework.beans.factory.support.DefaultListableBeanFactory@4add8e0d: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,dateFormatter,issuerDaoOilImpl,issuerServiceImpl,org.springframework.aop.config.internalAutoProxyCreator,messageSource,multipartResolver,issuerValidator,templateResolver,templateEngine]; root of factory hierarchy
DEBUG [2012-07-17 09:31:29,547] [Thread-2] (DefaultListableBeanFactory) - Ignoring bean class loading failure for bean 'templateResolver'
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.thymeleaf.templateresolver.ServletContextTemplateResolver] for bean with name 'templateResolver' defined in ServletContext resource [/WEB-INF/Resources/applicationContext-config.xml]; nested exception is java.lang.ClassNotFoundException: org.thymeleaf.templateresolver.ServletContextTemplateResolver
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:396)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:612)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.thymeleaf.templateresolver.ServletContextTemplateResolver
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 17 more
DEBUG [2012-07-17 09:31:29,549] [Thread-2] (DefaultListableBeanFactory) - Ignoring bean class loading failure for bean 'templateEngine'
org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [org.thymeleaf.spring3.SpringTemplateEngine] for bean with name 'templateEngine' defined in ServletContext resource [/WEB-INF/Resources/applicationContext-config.xml]: problem with class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/thymeleaf/TemplateEngine
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1265)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:396)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:612)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/thymeleaf/TemplateEngine
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1148)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1643)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 17 more
Caused by: java.lang.ClassNotFoundException: org.thymeleaf.TemplateEngine
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    ... 29 more 
```

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:29:24.377

好的....所以我将以下内容添加到我的 application-context-config.xml 中：

```
<bean class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
  <property name="templateEngine" ref="templateEngine" />
</bean> 
```

并将 dist/thymeleaf-2.0.8 添加到我的构建路径中。

新文档在[这里](http://www.thymeleaf.org/documentation.html)。
[这个](http://www.thymeleaf.org/doc/tutorials/2.1/thymeleafspring.html#preface)文档可能会有关于配置弹簧的信息。

现在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T15:01:30.410

> **添加 pom.xml**

```
<!-- https://mvnrepository.com/artifact/org.thymeleaf/thymeleaf-spring3 -->
<dependency>
    <groupId>org.thymeleaf</groupId>
    <artifactId>thymeleaf-spring3</artifactId>
    <version>3.0.7.RELEASE</version>
</dependency>

<!-- https://mvnrepository.com/artifact/org.unbescape/unbescape -->
<dependency>
    <groupId>org.unbescape</groupId>
    <artifactId>unbescape</artifactId>
    <version>1.0</version>
</dependency> 
```

# windows - 无法连接到用户 PC 上的 TCP 套接字侦听（静态 IP）

> ID：11518807
> 
> 赞同：0
> 
> 时间：2012-07-17T08:35:23.253
> 
> 标签：windows, tcp, network-programming, boost-asio

我在 Visual C++ 中使用 Boost asio。我正在尝试连接到在端口 1222 上侦听 TCP 的静态 IP。不幸的是，我只能连接到 LAN，而无法从另一个 LAN 连接到 TCP 侦听 PC（203.143... **）**。

它与 EC2 服务器完美连接。是不是和防火墙有关。但是当我运行应用程序时，它会要求用户允许特定端口的防火墙。我可以发布我的代码，但我想这与代码无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:48:27.960

Usually a firewall on the server side (the PC you are trying to connect to) have to be configured to allow incoming connections. Firewall on your side should be OK, it usually allows any type of outgoing connections. I don't know what you meant by "the app ask for the user to allow firewall for the specific port" (clarify).

# c# - 带有 Prism 4 区域适配器的 AvalonDock 2.0

> ID：11518810
> 
> 赞同：3
> 
> 时间：2012-07-17T08:35:50.257
> 
> 标签：c#, wpf, prism, avalondock

我一直在玩这个问题。

[带 Prism 区域适配器的 AvalonDock](https://stackoverflow.com/questions/10905238/avalondock-with-prism-region-adapter)

有人试图添加棱镜区域适配器。它有点工作，但只要我浮动面板，内容就会消失并完全变黑。

这是我的错误吗？我也尝试过直接在停靠管理器下使用区域，它们可以更新，但不能在区域已经浮动时更新。这是预期的行为吗？IE。可以更新浮动区域吗？

我还在这里尝试了 vaccano 的变体：http: [//avalondock.codeplex.com/discussions/358632](http://avalondock.codeplex.com/discussions/358632)

但我看不到 regionmanager.setregionname() 方法如何创建一个可以更新的区域。IE。在我的区域集合中找不到它。

非常感谢任何或所有这些方面的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:10:42.353

我发布了一个示例应用程序，展示了一种将 AvalonDock 2.0 与 PRISM 4.1 集成的方法。请关注讨论： [http](http://avalondock.codeplex.com/discussions/390255) ://avalondock.codeplex.com/discussions/390255 在这里您可以下载示例项目： [http](http://avalondock.codeplex.com/releases/view/92210) : //avalondock.codeplex.com/releases/view/92210 Ado

# liferay - Liferay 中的 doView() 和 render() 函数有什么区别？

> ID：11518814
> 
> 赞同：6
> 
> 时间：2012-07-17T08:35:59.790
> 
> 标签：liferay, portlet

Liferay`doView()`和函数之间的实际区别是什么？还有和`render()`有什么区别？`renderRequest``resourceRequest`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T10:33:56.623

`doView()`= 在 VIEW 模式下处理渲染请求。

`render()`= 该方法调用`doDispath()`方法并通过使用方法设置portlet 的标题`getTitle()`。然后它调用、 、 等之一`doView()`，具体取决于.`doEdit()``doHelp()``RenderRequest`

* * *

同样，当您想要在 portlet 的 VIEW 模式下处理请求时，RenderRequest 也是如此。如果您的 portlet 使用其他资源来呈现视图（即图像、JavaScript 文件等），那么呈现视图的 JSP 将使用`<portlet:resourceURL />`标记来生成这些资源的有效 URL。这些 URL 将使用一对`ResourceRequest`和`ResourceResponse`对象进行处理。

虽然您可以覆盖资源阶段，但请记住，当您使用`ResourceRequest`/`ResourceResponse`服务时，portlet 不能更改当前的 portlet 模式、窗口状态或呈现参数。而且在资源 url 上设置的参数不是渲染参数，它们仅对当前资源请求有效。

# javascript - Javascript日期格式 - 由于夏令时一小时

> ID：11518816
> 
> 赞同：1
> 
> 时间：2012-07-17T08:36:02.377
> 
> 标签：javascript, date

所以现在，是上午 9 点 23 分。我有一个代表当前日期的 UTC 日期字符串，看起来像这样`"2012-07-17T09:23:27.75"`

我想在一个日期对象中，所以我可以显示一个格式很好的日期，所以我：

```
var myDate = new Date("2012-07-17T09:23:27.75")
// Gives --> Tue Jul 17 2012 10:23:27 GMT+0100 (GMT Daylight Time) 
```

因此，由于夏令时，我遇到了一个小时外的问题。我可以看到这`myDate.getTimezoneOffset()`给了我`-60`，让我的日期实际反映当前正确时间的标准/最佳实践方式是什么？我刚刚进入 javascript date hell 了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:41:13.900

试试[momentjs.com](http://momentjs.com)。我真的发现它对这些事情很方便。

```
var myDate = moment("2012-07-17T09:23:27.75"); 
```

为您提供时区中的日期实例（基本上在您的计算机上配置）。此外，momentjs 具有很好的人性化格式，例如“几秒钟前”、“一个月前”、...

日期在 JS 中真的是地狱（但不仅在 JS 中）。您可以做的最好的事情是始终仅在浏览器 <-> 服务器之间以 UTC 传输。然后在服务器上将其转换为您喜欢的时间格式，您显然只需要保持一致即可。这样我就设法正确处理日期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T11:14:35.107

尝试删除“T”

当我在控制台中发现时，我正在调试 Chrome 中的一些日期时间格式问题

new Date('2016-04-16T15:15:00') 返回 2016 年 4 月 16 日星期六 16:15:00 GMT+0100（GMT 夏令时间）

尽管

new Date('2016-04-16 15:15:00') 返回 2016 年 4 月 16 日星期六 15:15:00 GMT+0100（GMT 夏令时间）

# c++ - 用于包装库返回的数组的智能指针

> ID：11518817
> 
> 赞同：2
> 
> 时间：2012-07-17T08:36:10.710
> 
> 标签：c++, boost, stl, smart-pointers, visual-c++-2005

我正在运行 VC++ 2005，因此`std::unique_ptr`无法使用 AFAIK。我使用了一些有效的库函数（黑匣子），`return new T[n]`我想将结果包装在某个对象中，这意味着我不必在我的析构函数中删除它们。

大约 VC++ 2008 的标准库中是否存在任何内容？如果不是，unique_ptr 的增强版本会像[这个答案](https://stackoverflow.com/questions/6713484/smart-pointers-and-arrays)一样完美地工作吗？

为了澄清注释中的一些混淆，库函数返回一个指向动态分配数组的原始指针，我无权更改它...我需要获取该指针并将其包装在一个对象中，该对象`delete []`在对象超出范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:50:51.800

在 2011 之前的标准库中，您所拥有的只是`auto_ptr`，它适用于从函数返回。但是，它只适用于单个对象，而不适用于数组，因此不适合这种用途。

据我所知，`unique_ptr`Boost 中没有。有一个`scoped_ptr`and `scoped_array`，但它们是不可转移的，因此不能从函数中返回。

`boost::shared_array`可能是合适的，尽管它使用引用计数，因此与单一所有权指针相比具有（希望很小）开销。

`std::vector`可能是一个不错的选择；只要您的编译器支持“返回值优化”，那么您就可以（稍加注意）从函数中返回一个，而无需任何不必要的内存分配或复制。但是，它的缺点是不能防止意外复制数据。

更新：我刚刚注意到您的问题中的“黑匣子”一词，我认为这可能意味着库函数返回原始指针，并且您想将它们分配给一个智能指针，该指针将用 破坏它们`delete []`，并且不能修改函数本身。如果是这样的话，[`boost::scoped_array`](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/scoped_array.htm)应该做的伎俩，并向那些为回应我的评论而删除他们的答案的人道歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:49:15.803

这取决于您想对结果值做什么。

一般来说，我会建议`boost::scoped_ptr`在`boost::scoped_array`C++03 中。但是请注意，它们是用一种非常具体的思维方式制作的：限制资源的范围。也就是说，它们不仅仅是处理清理，它们还保证资源不会离开范围，即不能转移给调用者。

如果你想要更多，这在 C++03 中并不容易（因为没有可移动类型）。在这种情况下，您可能需要制作一个“扩展” `boost::scoped_ptr`，例如添加一个`release`方法以允许将内存传递给调用者（然后期望正确处理它）。

# php - 将 php composer 包添加到我的 git 存储库

> ID：11518818
> 
> 赞同：8
> 
> 时间：2012-07-17T08:36:14.930
> 
> 标签：php, git-submodules, composer-php

我已经安装了作曲家并通过“作曲家安装”添加了一些软件包。它将它们安装在“my_project\vendor”路径下，但是一些包是使用 git 克隆的，所以当我提交“my_project”时，那些克隆的包被忽略了。

问题是当其他开发人员克隆“my_project”时，他们会丢失被忽略的包。有没有办法自动将包添加到“my_project”，以便其他开发人员从我这里获取它们？

我认为这应该使用子模块来完成，但我不知道如何自动将 composer 中的每个新包作为子模块添加到我的项目中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T23:20:38.987

前言：Jordi - 我喜欢作曲家，继续努力，如果我在这方面有误，请告诉我，我会更新我的工作流程并编辑帖子：D

* * *

不幸的是，这不是“一般建议”，具体取决于您询问的对象，到目前为止，这只是开发人员的观点。使用作曲家常见问题解答中规定的练习的注意事项比我在这里可以涵盖的要多得多。因此，我将留下几个要点供其他人考虑。

@Seldaek[自己承认](https://github.com/composer/composer/issues/270)作曲家并不是 100% 稳定，比一年前要好得多，但无论如何仍然是一个[非常活跃的项目。](https://github.com/composer/composer/graphs)因此，依靠作曲家在开发服务器、登台服务器和生产服务器上实现相同的环境并不是任何 QA / 部署组的一般建议。这并不是对 Jordi 的轻视，而是对 QA 人民一丝不苟的天性的一种表达。

从常见问题解答中，它指出将供应商库合并到您自己的存储库时，您应该：

> 限制自己安装标记版本（无开发版本）

但是，如果您使用 composer 来管理您的 CI 或自动化部署，那么同样的约束将适用 - 只是**更是如此**- 因为将 master 或 dev 标签部署到您的生产环境可能是一个**非常**不同的包，而不是您在暂存一天或甚至一个小时前。

即使在第三方库中引入的更改之外（这将通过仅使用标记版本来解决，而不管开发或生产部署如何）除非您可以依赖作曲家每次都做完全相同的事情，否则您将冒着将错误引入生产的风险。这不是我真正关心的风险案例，但我也是一名开发人员；）但是问题可能来自[像这样的简单更改](http://seld.be/notes/composer-an-update-on-require-dev)，除非您在所有环境中维护完全相同版本的 composer.phar，你真的可以搞砸一个登台或生产服务器。

我遇到的另一个主要问题确实与此标题下列出的所有要点有关：

> 虽然在某些环境中提交它可能很诱人，但它会导致一些问题：

我不认为后果是问题，而是利益！在现代高带宽环境中，大型 vcs 存储库并不是什么大不了的事。除非您使用非常活跃的供应商库，否则您的差异也不会那么大。即使它们很大，git/hg/dvcs 系统都能够重用块、压缩块并将所有鸭子排成一排。但更重要的是，当对这些包进行更改时，它们会向开发人员发出警报，并且`diff -w`是对全部更改集的一个很好的总结视图，**尤其是**当您使用 dev/master 标签时。

> 在您自己的 VCS 中复制所有依赖项的历史记录。

这措辞有点不正确，它不会复制供应商库的整个提交历史，只是一个提交（您的提交）覆盖从现在到最后一次运行作曲家更新导致更改的完整增量。您可能不会在每次更新时更新所有库，即使您没有指定单独的包。如果您确实不小心更新了供应商库，您可以轻松恢复，而如果您在 dev/master 标签上这样做并且它破坏了您的环境，您必须弄清楚您之前使用的版本并在其中指定标签composer.json，并再次更新以恢复它。 `git checkout /vendor/3rdpartylib --force`对我来说似乎更容易。

> 将通过 git 安装的依赖项添加到 git repo 会将它们显示为子模块。这是有问题的，因为它们不是真正的子模块，您会遇到问题。

理想情况下，composer 会给你一个配置选项。它可以自动从 git pulls 中删除 .git 目录，并在更新 lib 之前自动 rm 目录（或临时 mv ），当且仅当更新版本存在时。这样做比将手动过程留给单个开发人员要可靠得多。将供应商库集成到您的版本控制存储库中有相同数量的原因，因此选择实际上取决于您的具体情况。

对所有文件进行版本控制的最大原因是能够可靠地将您在开发中测试的确切包部署到生产阶段，这是 vcs 和自动化部署开始的关键目的。除非您将开发环境配置为对每个包使用特定标签并且您对 composer.phar 进行版本控制，否则您不应依赖 composer 来部署您的软件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-17T10:03:18.267

理想情况下，您应该将 vendor/ 添加到您的 .gitignore 中，然后项目的每个开发人员都将运行 composer install 以获取供应商的设置。

您可以阅读有关提交供应商的[常见问题解答条目](http://getcomposer.org/doc/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.md)以获取更多详细信息。

# ios - iOS 压缩性能

> ID：11518820
> 
> 赞同：1
> 
> 时间：2012-07-17T08:36:18.317
> 
> 标签：ios, performance, zip

似乎有关 iOS 上 zip 性能的信息有点稀疏，所以我希望有人能详细说明一下这个主题（或者做一些测试，因为我没有那个选项）。

我编写了一个纯 C 项目，用于 iOS 应用程序（适用于 iPad 2/3），它使用一些相当大的数据文件（5x ~300 MB），我知道这些可以很好地压缩（5x ~90 MB）。目前，应用程序将选择 5 个解压缩的数据文件之一并对其进行内存映射 - 这可以即时更改。

因为数据文件被解压缩，所以这个动作几乎立即发生，但它是一个相当大的应用程序，所以显然我想知道 - 如果我们即时解压缩数据文件会怎样？切换（删除当前数据文件，解压缩新数据文件）需要多长时间？

我希望这个答案也能对其他想要快速查找 iOS zip 性能的人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:26:58.500

无论如何，您应该将这些文件解压缩到闪存驱动器，而不是内存（因为 iDevice 上没有太多内存），因此您的应用程序将需要约 1Gb 的可用存储空间才能运行。因此，由于此存储不能以任何其他好的方式使用，我建议在第一次运行时解压缩数据（并且可能不使用应用程序交付数据文件，而是从您的站点下载它们）。而且，是的，在 iDevices 上解压缩 ~500Mb 文件需要一段时间。

# ruby-on-rails-3 - CanCan、Devise 和“current_user”

> ID：11518821
> 
> 赞同：0
> 
> 时间：2012-07-17T08:36:18.837
> 
> 标签：ruby-on-rails-3, devise, mongoid, cancan

我有一个简单的 Cancan 和 Devise 设置。

我只想向“管理员”和拥有“位置”的用户显示编辑按钮：

所以在 show.html.erb 我有

```
<% if can? :manage, location, :user_id == current_user.id %>
    <%= link_to 'Edit', edit_location_path %>
<% end %> 
```

我的能力.rb 看起来像这样

```
if user.roles.include?('User')
  can [:show, :index, :create], Location
  can :manage, Location, :user_id => user.id
end 
```

locationController 在最顶部包含以下内容：

```
load_and_authorize_resource 
```

用户 ID 在 Location.user_id 中引用

**但它没有显示编辑按钮......**

我错过了什么？

**PS：user.id 在视图中不起作用。并且 current_user.id 在ability.rb 中不起作用**

PPS：我的角色存储在一个数组中，例如：Roles ["User", "Admin"] 并且运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:03:28.520

我有它的工作

```
can :manage, Location, :user_id => user.id.to_s 
```

我希望它可以帮助某人！

# java - Android：SurfaceView，为什么要在不同的线程上绘图

> ID：11518824
> 
> 赞同：1
> 
> 时间：2012-07-17T08:36:35.210
> 
> 标签：java, android, multithreading, surfaceview

`SurfaceView`：据我所知，SurfaceView 在不同的线程（ using `SurfaceHolder.Callback()`）上绘图。

在一个 Android 游戏项目中，我在`SurfaceView`课堂上看到：他们在同一个课程中处理物理（位置，...），但是当处理图形（绘制到屏幕）时，他们使用另一个线程来处理。Android Example`Landern`也使用了这个模型。

请告诉我这个模型有哪些优点？（意味着，使用另一个线程绘制到屏幕上，而不是在 SurfaceView 的同一线程上绘制）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:50:14.543

根据我有限的经验：

如果你在一个单独的线程中绘制，你可以在“主”线程中进行更复杂的计算等时保持“背景动画”（移动水、鹅肝、燃烧的火）。

如果您在一个线程中完成所有操作，那么您在绘图时基本上会阻止所有运动，反之亦然，每次运动/计算都会阻止绘图。

优势取决于您想要制作的游戏。如果你制作一个没有任何特殊动画和效果的棋盘游戏，我猜你最好用一个线程。

# java - JSF 支持 Bean 单元测试

> ID：11518826
> 
> 赞同：4
> 
> 时间：2012-07-17T08:36:39.067
> 
> 标签：java, jsf, junit, mockito

我有一个称为例如 PeopleListBean 的支持 bean。目的很简单：从存储库返回人员列表。

```
public class PeopleListBean {

    @Autowired
    private PersonRepository personRepository;

    private List<Person> people;

    @PostConstruct
    private void initializeBean() {     
        this.people = loadPeople();
    }

    public List<User> getPeople() {
        return this.people;
    }

    private List<Person> loadPeople() {
        return personRepository.getPeople();
    }

} 
```

我想使用 Junit 和 Mockito 为这个 bean 创建一个单元测试。
下面的示例测试类：

```
import static org.junit.Assert.assertTrue;
import static org.mockito.Mockito.reset;
import static org.mockito.Mockito.when;

import java.util.ArrayList;
import java.util.List;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import com.example.PersonRepository;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/test-application-context.xml" })
public class PeopleListBeanTest {

    @Autowired
    private PeopleListBean peopleListBean;
    @Autowired
    private PersonRepository mockPersonRepository;

    @Before
    public void init() {
        reset(mockPersonRepository);
    }

    @Test
    public void canListPeople() {
        List<Person> people = getDummyList();

        when(mockPersonRepository.getPeople().thenReturn(people);

        assertTrue(peopleListBean.getPeople().size() == people.size());
    }
} 
```

我的问题是，何时/如何模拟存储库，因为加载发生在 initializeBean 方法（@PostConstruct）中。因此，在构造类之后，调用“getPeople”方法，然后我才能实际模拟该方法，从而导致断言不匹配。

我真的很感激一些帮助/指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:41:51.863

使用 JUnit 的[@BeforeClass](http://junit.sourceforge.net/javadoc/org/junit/BeforeClass.html)注解

因此，您的代码如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/test-application-context.xml" })
public class PeopleListBeanTest {

    @Autowired
    private PeopleListBean peopleListBean;
    @Autowired
    private PersonRepository mockPersonRepository;

    @BeforeClass
    public static void initialise() {

    }

    // .
    // .
    // .
} 
```

# php - 处理会话 cookie 生命周期和登录过程。PHP

> ID：11518827
> 
> 赞同：0
> 
> 时间：2012-07-17T08:36:39.150
> 
> 标签：php, session, session-cookies

我有一个登录页面，一旦加载就会显示登录对话框。登录对话框只是一个`JQuery`使用`Ajax call`. 像这样的东西：

```
$(function() {
    var _width = $.browser.msie ? 316 : 'auto';
    var loginDialog = $('#loginDialog');

    loginDialog.dialog({
        closeOnEscape: false,
        open: function() {
            $(this).parent().find('.ui-dialog-titlebar-close').hide();
        },
        resizable: false,
        position: 'center',
        stack: true,
        draggable: false,
        height: 'auto',
        width: _width,
        modal: true,
        buttons: {
            'submit': function() {
                $.ajax({
                type: 'post',
                dataType: 'html',
                url: '/ProjectName/Scripts/php/AccountController.php',
                cache: false,
                // async: false,
                data: $('#loginForm').serialize(),
                success: function(accessStatus) {
                    if(accessStatus === 'granted') {
                        loginDialog.dialog('close');
                    }
                },
                error: function(request, status, error) {
                    // handle it in a specific manner
                    alert(error);
                }
            });
        }
    }        
}); 
```

因此，如果可以（在服务器端），我只需关闭对话框。

然后在`AccountController.php`文件中，我现在有类似的东西：

```
<?php   
    session_start();
    if(IsAjaxRequest()) {
        if(isset($_REQUEST['username']) && isset($_REQUEST['password'])) {  
            require_once('LDAPHandler.php');

            // credentials
            $username = $_REQUEST['username'];
            $password = $_REQUEST['password'];
            // ... more parameters

            // ... Fetch against AD
            if(IsInAdminRole($username, $password)) {
                // ... establishing mysql connection & setting connection options

                // and then:                        
                mysql_query(
                    'insert into accounts'. 
                    '(login, sid) values({$username}, {session_id()})'.
                    'on duplicate key update sid=values(sid)'
                );

                // write response
                echo 'granted';
            }
        }
    }
?> 
```

我想要的是存储`sid`在数据库中的相关记录（`Accounts table`）中。是什么让我感到困惑：

*   据我了解，如果用户在成功登录服务器后复制某些页面将使用**相同的会话 cookie**？我对吗？除非浏览器关闭。
*   我如何处理不同浏览器的情况？
*   我读到，无论我需要在哪里使用我必须`session_start()`在页面上调用的会话。这不会`sid`与登录期间编写的不同吗？
*   假设我不想重复，我的意思是用户不应该多次（同时）访问同一个资源，哪种方式是最好的处理方式？
*   另外我知道我需要使用某种标志（可能是帐户表中的字段）来表示 user 是`active`，因为以其他方式我将只存储最后一个`sid`。或者更好的解决方案是在会话关闭后从数据库中删除用户？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:48:47.903

*   Yes you're right (unless there's some tampering on the client-side).
*   Why do you need to worry about that?
*   `session_start()` will start a new session and resume a previous one if started before.
*   Trust me, don't try.
*   This is good to see who's logged in now, but you have to set active to 0 when the user logs out or when he/she hasn't been active for a while (15 minutes is reasonable).

**Update:** Those aren't *directly* related to your question, but it's good to keep them in mind.

*   You're code (SQL part) is vulnerable to [SQL Injection](https://en.wikipedia.org/wiki/SQL_injection), please read this [answer here](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php) to learn how to protect yourself.

*   Your LDAP code is vulnerable to false-positive authentication when an empty (or NUL) password is provided, because `ldap_bind()` will attempt [anonymous binding](https://stackoverflow.com/questions/4644490/what-is-ldap-anonymous-binding) if no password was provided, which will result in anyone logging in if they provide the correct username. So make sure you filter out all control characters and then check for empty password.

*   It's also possible to perform LDAP "injection" to your code by providing `*` as a username.

# jsp - 是否有一种（简单的）方法可以在 JSP 页面中“卷曲”外部 URL？

> ID：11518833
> 
> 赞同：0
> 
> 时间：2012-07-17T08:36:50.737
> 
> 标签：jsp, tomcat, curl, wget

我们组织的网络品牌发生了变化，因此在提供`CGI`页面时，我们首先`curl`使用模板（由我们的营销团队准备/更新）。我们不是`Tomcat/Java shop`，但需要部署和标记 Tomcat webapp。

目前主要的 JSP 页面由带有内联 JSP 调用的静态 HTML 组成（例如`<%= request.getContextPath()%>)`.

`wget`在 JSP 页面中进出/出入的最简单方法是什么，`curl`以便我们可以应用我们的品牌？

在 Python 中，我们会按照以下方式做一些事情：

```
template_url = 'http://url/to/our/template.php'
req = urllib2.Request(template_url)
response = urllib2.urlopen(req)
txt = response.read()
..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:49:35.700

使用 JSTL 的[`<c:import tag>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/import.html)：

> 检索绝对或相对 URL，并将其内容公开给页面、“var”中的字符串或“varReader”中的阅读器。

# android - 如何使用 java 语言读取 id 值？

> ID：11518835
> 
> 赞同：0
> 
> 时间：2012-07-17T08:36:54.327
> 
> 标签：android, xml-parsing

```
 {
       "id": "2345631223",
       "name": "MyFbAcc",
       "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4  /373042_396504583708761_162084_s.jpg",
        "link": "http://www.facebook.com/MyFbAcc",
        "likes": 70,
        "cover": {
          "cover_id": 434873094856,
          "source": "http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/396014_493579484001270_1795_n.jpg",
          "offset_y": 0
     } 
```

普通的xml文件我用来读取xml解析/DocumentBuilderFactory，其中xml由标签等组成，但这里都用“”表示。如何读取 id 值？

编号=2345631223。最欢迎任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:38:44.327

使用[JSON](http://www.vogella.com/articles/AndroidJSON/article.html) ..

```
JSONObject object = new JSONObject(yourString);
String id = object.getString("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:42:15.093

如果我想您正在使用字符串制作 JSON 对象

```
 String jString="{"name":"value"};
        JSONObject jObject = new JSONObject(jString); 
```

然后您可以从名称-值对中检索值，例如

```
 String valueFromJSON= jObject.getString("name"); 
```

# azure - 在 Windows Azure 上启动的好材料/资源

> ID：11518838
> 
> 赞同：0
> 
> 时间：2012-07-17T08:37:02.533
> 
> 标签：azure

我已经开始将 ASP.NET MVC 网站迁移到 Windows Azure
我已经找到了一些教程：

*   [Windows Azure 和 SQL Azure 教程](http://social.technet.microsoft.com/wiki/contents/articles/2138.windows-azure-and-sql-azure-tutorials-en-us.aspx "Windows Azure 和 SQL Azure 教程")
*   [Windows Azure - .NET 开发人员中心（创建您的第一个应用程序）](https://www.windowsazure.com/en-us/develop/net/ "Windows Azure - .NET 开发人员中心（创建您的第一个应用程序）")

但我希望有更多的学术背景，对整个平台有一个普遍的了解。
你有什么好书、网站、博客或任何其他支持推荐吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:49:56.197

模式和实践组有几本书从不同的角度概述了 Windows Azure 技术。

[http://blogs.msdn.com/b/windowsazure/archive/2011/08/17/microsoft-patterns-amp-practices-books-offer-guidance-on-adopting-windows-azure.aspx](http://blogs.msdn.com/b/windowsazure/archive/2011/08/17/microsoft-patterns-amp-practices-books-offer-guidance-on-adopting-windows-azure.aspx)

我特别阅读了《将应用程序迁移到云》这本书。它是为了考虑业务人员、IT 专业人员和开发人员的观点而编写的。很高兴从不同的角度看待技术决策。

[Buck Woody 在他的博客](http://sqlblog.com/blogs/buck_woody/archive/2012/06/13/windows-azure-write-run-or-use-software.aspx)上对何时利用云中可用的不同服务平台进行了很好的总结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:40:57.987

如果您是 Windows Azure 的新手，以下文章将为您创建一个知识库：

1.  [Windows Azure 简介](https://www.windowsazure.com/en-us/develop/net/fundamentals/intro-to-windows-azure/)
2.  [了解云存储](https://www.windowsazure.com/en-us/develop/net/fundamentals/cloud-storage/)
3.  [混合云解决方案](https://www.windowsazure.com/en-us/develop/net/fundamentals/hybrid-solutions/)

之后，您将准备好开始开发您的应用程序，并且当您对 .net 开发表现出兴趣时，我会说一次访问以下链接以获取所有 .net 相关资源：

[Windows Azure .net 开发中心](https://www.windowsazure.com/en-us/develop/net/)

在上面的同一页面中，查找左侧部分名称**“如何指导”**以获取您将在日常开发中使用的常见步骤列表。

# .htaccess - mod_rewrite 有时会关闭？

> ID：11518839
> 
> 赞同：0
> 
> 时间：2012-07-17T08:37:09.617
> 
> 标签：.htaccess, mod-rewrite

我在我的 .htaccess 文件中使用 mod_rewrite 来制作更清晰的 URL。我有两个目录（`subdir1`, `subdir2`），它们是在根目录中创建的文件夹。它们不是子域。.htaccess 文件位于三个目录中：root`subdir1`和`subdir2`.

以下 .htaccess 文件位于根目录中：

```
Options All -Indexes
ErrorDocument 404 /404.php
FileETag MTime Size

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/(subdir1|subdir2)(/.*)?$ [NC]
RewriteCond %{REQUEST_URI} ^(.*)?$ [NC]
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)$ /subdir1/ [R=301,QSA,L]

RewriteRule ^(.*)(\.html|\.htm)$ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/?$ index.php [L]
</IfModule> 
```

这个在`subdir1`目录中：

```
Options All -Indexes
ErrorDocument 404 /404.php
FileETag MTime Size

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /subdir1/

RewriteRule ^(.*)(\.html|\.htm)$ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/?$ index.php [L]
</IfModule> 
```

一切正常。我可以浏览`www.mydomain.com/subdir1/1234-myaritcle.html`页面并阅读其内容，但有时重写模块会在未创建干净 URL 的情况下关闭，并且文章会使用以下 URL 打开：`www.mydomain.com/index.php?article=1234`

你能帮忙吗？问题的原因是什么？.htaccess 文件有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:45:11.460

您的规则中没有任何内容导致 url 显示为`www.mydomain.com/index.php?article=1234`. 无论您使用何种链接打开文章，都可能不会生成干净的 URL。

# c# - 如何在 Gecko 浏览器中设置“文本框”值？

> ID：11518840
> 
> 赞同：1
> 
> 时间：2012-07-17T08:37:11.020
> 
> 标签：c#, vb.net, browser, gecko

如果它的 Source name="login" 那么我如何设置 User Name Value Source Html For userbname 文本框：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T04:29:26.647

它的简单在`GeckoBrowser`. 以下两行将设置`Textbox`值：

```
GeckoInputElement txtbox = new GeckoInputElement(geckobrowser1.Document.GetElementByName("login").DomObject);
txtbox.Value = "Your string"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T12:17:33.843

Gecko 与 IE 没有什么不同。试试这个方法

```
{
    HtmlElementCollection elements = Geckowebbrowser1.Document.GetElementsByTagName("input");
    elements(1).SetAttribute("value", USERBOX.Text);
    elements(2).SetAttribute("value", PASSBOX.Text);
    elements(3).InvokeMember("Click");
} 
```

# wcf - WCF 和多种安全模型

> ID：11518843
> 
> 赞同：3
> 
> 时间：2012-07-17T08:37:32.593
> 
> 标签：wcf, wcf-security

我们正在开发 WCF 服务来容纳我们的核心 API。

我们正在开发 2 个客户端以使用此 API，其中一个是 WPF 桌面应用程序，它很可能会针对 Active Directory 进行身份验证并与 API 位于同一域中。另一个是 ASP.Net Web 应用程序，它很可能会使用 ASP.Net Membership 来确保安全，并且仍然与 WCF 服务位于同一个域中。该计划是让 WCF 服务使用 NetTcp 并托管在 Windows 服务中。

在可能的情况下，我希望 WCF 服务作为调用用户运行，我想这对于用户是域用户的桌面应用程序来说应该是相当直接的。对于网络应用程序，我想我需要创建一个用户来运行服务调用。

是否有可能让这种双重安全方法在单个 WCF 服务上运行，或者我需要使用自己的安全模型制作 2 个服务？

此外，如果有人对实现这一目标的最佳实践/模式有任何想法，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T06:39:01.340

我通过以下方式解决了同样的问题：

1.  我为每次使用创建了两个 net.tcp 绑定。

    ```
     <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="" />
        <message clientCredentialType="UserName" />
      </security>

    </binding>
    <binding name="WindowsBinding" >

      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="Windows" />
      </security>

    </binding> 
    ```

2.  接下来，我为每个服务添加了两个端点

    ```
    <service name="SimplePluginService" behaviorConfiguration="CommonBehavior">

       <endpoint binding="netTcpBinding" bindingConfiguration="UserNameBinding" name="SimplePluginServiceUserName" contract="ISimplePluginService">
           <identity>
                <dns value="WCfServer" />
           </identity>
       </endpoint>

       <endpoint binding="netTcpBinding" bindingConfiguration="WindowsBinding" name="SimplePluginServiceWindows" contract="ISimplePluginService">
           <identity>
                <dns value="WCfServer" />
           </identity>
        </endpoint>

    </service> 
    ```

3.  接下来，我在创建 ChannelFactory 时选择了适当的端点（ConnectionManager - 类，其中包含有关用户信用的信息）。

    ```
    private readonly Dictionary<Type, Object> channelFactoryDictionary = new Dictionary<Type, Object>();

    private ChannelFactory<T> GetChannelFactory<T>() where T : class
    {
        if (channelFactoryDictionary.Keys.Contains(typeof(T)))
        {
            return channelFactoryDictionary[typeof(T)] as ChannelFactory<T>;
        }
        else
        {
            string endpointName=typeof(T).ToString();
            if (ConnectionManager.IsWindowsAuth) endpointName+="Windows";
            else  endpointName+="UserName";

            ChannelFactory<T> channelFactory = new ChannelFactory<T>(endpointName);

            if (!ConnectionManager.IsWindowsAuth){
                 channelFactory.Credentials.UserName.UserName = ConnectionManager.Password;
                 channelFactory.Credentials.UserName.Password = ConnectionManager.Password;
            }

            channelFactoryDictionary.Add(typeof(T), channelFactory);
            return channelFactory;
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:09:24.527

你在这里混淆了几个不同的问题。首先，我声称您的托管（Windows 服务）和传输（此处以 netTcp 给出）与您选择的身份验证/授权几乎无关，除非您想依赖 ASP.NET 成员资格，在这种情况下您需要IIS 来托管您的服务。

在桌面或精心策划的 LDAP 环境中，模拟无疑是一种不错的访问控制方法。不过，我倾向于发现，随着我的服务的增长，它们的业务需求会偏离 Active Directory 中表示（或可以表示）的策略。一旦发生这种情况，您的服务就开始需要更多支持来保持 Windows 模拟按您的意愿工作。这通常意味着处理 WCF 可扩展性。

从多年的经验来看，使用 WCF 安全扩展点与几乎没有麻醉的根管一样痛苦。也就是说，一旦完成了痛苦的工作，它就非常强大。

我发现，一般来说，疼痛越少越好。我可以通过在我的代码中显式地建模访问限制来获得模拟的安全优势，例如使用基于声明的安全性和 CAS 属性。采用这种方法，自定义`IPrincipal`实现类可以消除对模拟的需要，并且使用它可以消除非常模糊的 WCF 管道。

这不是您要寻找的答案，但这些仍然是我的两美分的价值。

# javascript - 如何使用jQuery淡入表格

> ID：11518847
> 
> 赞同：2
> 
> 时间：2012-07-17T08:37:41.423
> 
> 标签：javascript, jquery, html, fadein

我想创建一个页面，其中一个表格在加载时会淡入（从透明到不透明）。我试过使用：

```
$(document).ready(function(){
    $('#table1').hide();
    $('#table1').fadeIn(1000);
  }); 
```

它有点工作，但表格出现，迅速消失，然后顺利淡入。有没有办法在不预先出现表格的情况下实现淡入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:43:33.450

怎么了：

*   该表是“显示：表；” 默认情况下。
*   浏览器读取 DOM 并显示表格
*   jQuery隐藏表格并做动画

在 CSS`display:none;`中为您的表格设置：

```
#table1{
   display:none;
} 
```

jQuery：

```
$('#table1').fadeIn(1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T08:40:49.490

您可以通过应用

> 显示：无

样式到表格，但是这会导致可访问性问题，因为没有 javascript 的用户将无法看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:39:39.910

是的。只需在 CSS 中将表格设置为 display:none，然后删除初始隐藏

CSS

```
#table1{display:none} 
```

jQuery：

```
$(document).ready(function(){
    $('#table1').fadeIn(1000);
}) 
```

直到整个页面并且它的依赖项已经加载（ $(document).ready 函数），jQuery才会被触发，但是表格一旦加载就会显示在页面上，这将始终在 jQuery 触发之前。一旦 jQuery 触发，它会隐藏表格，然后将其淡入。您只需要使用 CSS 将其隐藏，然后将其淡入。简单:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:10:08.557

这是使用 jQuery 在您的表中淡入淡出的完整解决方案。

1) 首先在 header 标签中包含最新的 jQuery.js 和 JQuery-UI java 脚本文件。

**2）HTML：**

```
<table id="table1" cellpadding="5" cellspacing="1" width="50%">
  <tr>
    <th>
      Column1
    </th>
    <th>
      Column2
    </th>
    <th>
      Column3
    </th>

  </tr>
  <tr>
    <td>
      data1 
    </td>
    <td>
      data2 
    </td>
    <td>
      data3 
    </td>
  </tr>
</table> 
```

**3）CSS：**

```
#table1{
  border:1px solid #556688;
  background:#eee;
  display:none;
}
th{
  text-align:left;
}
td,th{
  border:1px solid #556688;
} 
```

**4）脚本标签中的JQuery：**

```
$(document).ready(function() {
    $('#table1').fadeIn(10000);
}); 
```

在垃圾箱上试试： http: [//codebins.com/bin/4ldqpaj](http://codebins.com/bin/4ldqpaj)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T08:39:46.833

在您的 CSS 中使用`dispay:none`以在淡入之前隐藏表格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T08:41:01.800

该表首先显示，因为 Javascript 是在 DOM 加载后执行的。您最初应该在 CSS 中使用 display:none 来隐藏表格。

# android - 从 gridview 中选择图像并将其显示在其他意图上

> ID：11518851
> 
> 赞同：2
> 
> 时间：2012-07-17T08:37:51.393
> 
> 标签：android, android-intent, gallery

我正在创建画廊。我有显示所有图像的网格布局。现在我想这样做，当我们选择一个图像时，另一个意图将启动，我已经完成了，但现在我想在这个新意图中显示选定的图像。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:14:33.197

请使用下面的gridview代码。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center" /> 
```

ImageAdapter.java

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(Constants.mThumbIds[position]);
        return imageView;
    }
} 
```

常量.java

```
public class Constants {
    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
    };
} 
```

MainActivity.java

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                Intentt mInDisplay=new Intent(MainActivity.this, DisplayActivity.class);
                mInDisplay.putExtra("Index", position);
                startActivity(mInDisplay);
            }
        });
    }
} 
```

显示.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/mImgView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</RelativeLayout> 
```

显示活动.java

```
public class DisplayActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Bundle bdl=getIntent().getExtras();
        int index=bdl.getInt("Index");      
        ImageView mImage = (ImageView) findViewById(R.id.mImgView1);
        mImage.setImageResource(Constants.mThumbIds[index]);
    }
} 
```

并将这两个活动声明到您的 android 清单文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:57:00.377

[您可以通过setOnClickListener](http://developer.android.com/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)在每个图像上设置一个点击监听器，然后监听器可以发送启动新活动的意图。

我们还想发送带有意图的图像路径。为了实现这一点，您可以在您的意图上使用[putExtra](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.lang.String%29) ，您选择的名称作为第一个参数，图像路径作为第二个参数。

然后，您应该能够通过在新活动中使用[getStringExtra来检索图像路径。](http://developer.android.com/reference/android/content/Intent.html#getStringExtra%28java.lang.String%29)您需要通过在活动中调用 getIntent() 来获取意图

祝你好运

# plugins - Extjs 4 网格过滤

> ID：11518853
> 
> 赞同：3
> 
> 时间：2012-07-17T08:37:55.600
> 
> 标签：plugins, extjs, filter, grid

这正是我正在寻找的[http://www.developerextensions.com/index.php/extjs-filter-row](http://www.developerextensions.com/index.php/extjs-filter-row)但我找不到一个可以很好地与 extjs 4 配合使用的版本

很有可能我创建了一个错误的代码，因为我在 extjs 中是新手，所以请你帮我解决这个或一些类似的扩展，如何准确地实现它并使其工作？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T09:02:57.857

您不需要使用外部插件。在 Ext JS 4.1 中，无需任何插件即可轻松完成过滤。

文档中有很好的本地和远程过滤示例。

1.  [远程过滤](http://docs.sencha.com/ext-js/4-1/#!/example/grid/infinite-scroll-with-filter.html)

2.  [本地过滤](http://docs.sencha.com/ext-js/4-1/#!/example/grid-filtering/grid-filter-local.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-11T15:52:09.523

这是一个网格插件，可在网格标题下方添加过滤行。允许远程过滤并支持分页网格。

[https://github.com/roberto-rodriguez/ExtJs_GridFilterPlugin](https://github.com/roberto-rodriguez/ExtJs_GridFilterPlugin)

它在 Ext 版本 4 中运行良好。

这是它的作用的图像：

[![在此处输入图像描述](../Images/0e65eb67e076579715aac3dde67f8228.png)](https://i.stack.imgur.com/dZQHJ.jpg)

# java - 如何解决这个 java.sql.SQLException: Statement 参数 没有设置

> ID：11518854
> 
> 赞同：1
> 
> 时间：2012-07-17T08:37:57.790
> 
> 标签：java, jdbc, prepared-statement

这就是我的 DAO 类：

```
public Map<String, String> issueOrUpdate(Map<String,String> employeeTempcardMap){
        SlingDAO slingdao = new SlingDAO();
        Map<String, String> issueOrUpdateMap = new HashMap<String, String>();
        StringBuffer issueOrReturnTempcardQuery = new StringBuffer();
        String empname="",functionkey="",tempcardnumber="",dateofissue="",dateofreturn="";
        int empid=0,rowid=0,insertOrUpdateStatus=0;
        Connection connection = slingdao.getConnection();
        PreparedStatement issueOrReturnPS=null;
       if (connection != null) {
           try {
            if(employeeTempcardMap.get("functionkey").toString().equals("issueTempCard")){
                empid =Integer.parseInt(employeeTempcardMap.get("empid").toString()); //empname,tempcardnumber,dateofissue,rowid,dateofreturn
                empname =employeeTempcardMap.get("empname").toString();
                tempcardnumber =employeeTempcardMap.get("tempcardnumber").toString();
                dateofissue =employeeTempcardMap.get("issuedate").toString();
                //System.out.println("11111111111111111111111111111111111");
                //System.out.println("empid : "+empid+" : empname: "+empname+" : tempcardnumber : "+tempcardnumber+": dateofissue "+dateofissue+"Status : "+applicationConstants.ISSUED);

                issueOrReturnTempcardQuery.append(" INSERT INTO acct_tempcardhistory(empid,empname,tempcardnumber,tempcardstatus,issuedate,returndate) ");
                issueOrReturnTempcardQuery.append(" VALUES(?,?,?,?,?,?) ");
            }else{
                dateofreturn = employeeTempcardMap.get("returndate").toString();
                rowid = Integer.parseInt(employeeTempcardMap.get("rowid").toString());
                issueOrReturnTempcardQuery.append(" UPDATE acct_tempcardhistory  SET tempcardstatus=?,returndate=? ");
                issueOrReturnTempcardQuery.append(" WHERE id ="+rowid);
            }

                issueOrReturnPS = connection.prepareStatement(issueOrReturnTempcardQuery.toString());

               if(functionkey.equals("issueTempCard")){
                   //System.out.println("2222222222222222222222");
                   issueOrReturnPS.setInt(1, empid);
                   issueOrReturnPS.setString(2,empname.toString().trim());
                   issueOrReturnPS.setString(3, tempcardnumber.toString().trim());
                   issueOrReturnPS.setString(4, applicationConstants.ISSUED.toString().trim());
                   issueOrReturnPS.setString(5, dateofissue.toString().trim());
                   issueOrReturnPS.setString(6, "".toString().trim());
                   //issueOrUpdateMap.put("message","Temporary Card has been issued to "+empid);

               }else {
                   issueOrReturnPS.setString(1, applicationConstants.RETURNED);
                   issueOrReturnPS.setString(2,dateofreturn);
                   //issueOrUpdateMap.put("message","Temporary Card has been Returned by "+empid);
               }
               insertOrUpdateStatus = issueOrReturnPS.executeUpdate();

               System.out.println(insertOrUpdateStatus + "row(s) affected");

               if(insertOrUpdateStatus >0){
                   issueOrUpdateMap.put("message","Temporary Card has been issued/Returned to "+empid);
               }else{
                   issueOrUpdateMap.put("message","Temporary Card has not been issued/Returned to "+empid);
               }
               connection.close();

              // connection.commit();
           } catch (Exception ex) {
            ex.printStackTrace();
            issueOrUpdateMap.put("message","Temporary Card has not been issued/Returned to "+empid);
           } finally {
               try {
                slingdao.closeConnection(connection, null, issueOrReturnPS);
               } catch (Exception ex) {
                   ex.printStackTrace();
               }
           }
       } else {
           issueOrUpdateMap.put("dbmessage","Connection not Established. Please Contact Vendor");
       }
       return issueOrUpdateMap;
   }
} 
```

更新 ：

堆栈跟踪 ：

```
java.sql.SQLException: Statement parameter 3 not set.
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:910)
        at com.mysql.jdbc.ServerPreparedStatement.serverExecute(ServerPreparedStatement.java:1045)
        at com.mysql.jdbc.ServerPreparedStatement.executeInternal(ServerPreparedStatement.java:693)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1404)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1318)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1303)
        at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedS
tatement.java:105)
        at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedS
tatement.java:105)
        at com.slingmedia.notifier.dao.TempCardDAO.issueOrUpdate(TempCardDAO.java:158)
        at com.slingmedia.notifier.servlet.TempCardServlet.doPost(TempCardServlet.java:83)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.j
ava:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)

        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999
)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.jav
a:565)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

当我打印时，我看到了所有的值，但它仍然表明

```
java.sql.SQLException: Statement parameter <number> not set. 
```

更新时同样适用，但插入数据时不起作用，我也将日期设为字符串。

请指导我如何去或我在哪里犯错？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:47:09.427

您忘记设置`functionKey`表达式的结果

```
employeeTempcardMap.get("functionkey").toString(); 
```

永远不要声明，尤其是永远不要用虚拟值提前**初始化你的本地变量。**这只是掩盖了这样的编码问题。如果你有`final String functionKey = ...`，这种错误在理论上是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:43:06.187

看这个：

```
if(functionkey.equals("issueTempCard")){ 
```

现在考虑您期望`functionkey`变量从哪里获取值。你怎么期望它等于`issueTempCard`？为什么创建 SQL 语句的条件与设置参数的条件不同？为什么你甚至有两个单独的 if/else 语句？

我强烈建议您重构此方法 - 如果您使代码更清晰，它将帮助您更轻松地发现此类问题。另外，我强烈建议您对*所有*值使用参数，避免使用如下代码：

```
issueOrReturnTempcardQuery.append(" WHERE id ="+rowid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:46:46.643

你有：

```
if(functionkey.equals("issueTempCard")){
                   //System.out.println("2222222222222222222222");
                   issueOrReturnPS.setInt(1, empid);
                   issueOrReturnPS.setString(2,empname.toString().trim());
                   issueOrReturnPS.setString(3, tempcardnumber.toString().trim());
                   issueOrReturnPS.setString(4, applicationConstants.ISSUED.toString().trim());
                   issueOrReturnPS.setString(5, dateofissue.toString().trim());
                   issueOrReturnPS.setString(6, "".toString().trim());
                   //issueOrUpdateMap.put("message","Temporary Card has been issued to "+empid);

               }else {
                   issueOrReturnPS.setString(1, applicationConstants.RETURNED);
                   issueOrReturnPS.setString(2,dateofreturn);
                   //issueOrUpdateMap.put("message","Temporary Card has been Returned by "+empid);
               } 
```

如果调用 else ，您只设置参数 1 和 2，但您有 6 个参数！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T16:02:31.863

这意味着您尝试按代码预期插入更少的值...

示例您要插入“1,2”，但代码预期为 3，所以它应该是“1,2”，它将起作用

# web - 跨浏览器自动化测试 - 无法使用 sourceIndex 从文档中检索元素

> ID：11518865
> 
> 赞同：0
> 
> 时间：2012-07-17T08:38:27.037
> 
> 标签：web, cross-browser, automated-tests

我们编写了一些用于从文档中检索/识别元素的 dll。dll 是用 C++ 编写的，并且是专门针对 IE 编写的。检索逻辑使用 sourceIndex 概念。现在我们想增加对 FireFox 和 Chrome 的支持，但遗憾的是这些浏览器不支持 sourceIndex。那么我们是否有任何其他的方式可以使用，类似于 FF 和 Chrome 的 sourceIndex。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:28:26.390

对于良好的跨浏览器测试，您有几个很好的选择。您可以查看[Selenium WebDriver](http://seleniumhq.org/projects/webdriver/)，这是一个非常强大且广泛使用的驱动程序。所有主要语言都有实现，因此涵盖了 Ruby、Java、Python 和 .NET。

我还想推荐[Telerik 的 Test Studio](http://www.telerik.com/automated-testing-tools)，它是一个商业工具，在 Web 自动化测试的各个方面都做得很好——跨浏览器支持特别好。请注意，我有偏见，因为我是他们的工具传播者。:)

# mysql - 如何在 iOS 中处理 Windows-1252 字符？

> ID：11518866
> 
> 赞同：3
> 
> 时间：2012-07-17T08:38:28.010
> 
> 标签：mysql, objective-c, ios, sqlite

我已经完成了研究，但似乎没有找到明确的答案。

我的问题如下：我有一个 mysql 数据库，我将它（在脚本的帮助下）转换为 sqlite 数据库。在原始数据库（以及 sqlite）中，我发现了一些包含以下字符的条目：â€〜，â€™，Ã«，Ã±，...（Windows-1252？）还有一些 HTML-代码。

我用原始的mysql DB在PHP中做了一个测试，只要我添加了content-type utf-8，字符就很好了，否则我会得到相同的奇怪字符â€〜，â€™，Ã «, ñ。

**我在 iOS 中尝试过以下操作：**

```
[[NSString alloc] initWithCString:(const char *) sqlite3_column_text(rs.statement.statement, 4) encoding:NSStringEncodingConversionExternalRepresentation];

[NSString stringWithUTF8String:[[[rs stringForColumn:@"tekst"] stringByDecodingHTMLEntities] cStringUsingEncoding:NSStringEncodingConversionExternalRepresentation]]; 
```

*   NSStringEncodingConversionExternalRepresentation
*   NSUTF8StringEncoding
*   NSISO2022JPStringEncoding
*   NSStringEncodingConversionAllowLossy
*   NSWindowsCP1252StringEncoding
*   ...

然后我发现了这个： [MWFeedParser NSString+HTML](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)

通过这些类，我能够将 HTML 和 Ã« 转换为 ë。另一方面，其他角色似乎不起作用。

那么，如何转换/编码/解码这些字符才能正常显示呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:08:41.123

您是否尝试先修复 HTML 编码？我想它是最后应用的。如果您能获得一些示例字符串，请编写一个快速而肮脏的测试应用程序，并尝试弄清楚编码是如何制作的。

1）您可以尝试此列表中的其他编码：

```
NSISOLatin1StringEncoding = 5,
NSISOLatin2StringEncoding = 9,
NSWindowsCP1251StringEncoding = 11,
NSWindowsCP1252StringEncoding = 12,
NSWindowsCP1253StringEncoding = 13,
NSWindowsCP1254StringEncoding = 14,
NSWindowsCP1250StringEncoding = 15, 
```

2) 如果 Apple 没有提供正确的编码，但它是已知的编码，那么您可以使用 iconv()，它在 mac 和 iOS 上都可用。它几乎可以将每个字符串编码转换为几乎任何其他编码 - 它使用起来有点复杂，但您会在网上找到很多示例。

# jquery - jquery获取url参数（如果存在）

> ID：11518867
> 
> 赞同：3
> 
> 时间：2012-07-17T08:38:32.093
> 
> 标签：jquery, url, get

我正在尝试构建一个脚本，该脚本将检查是否存在名为**result**的 url 变量，如果存在，则检查该值是否等于成功。

我尝试了以下但如果**结果**不存在那么它将我的脚本错误为未定义

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}
var first = getUrlVars()["result"];
alert(first); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:42:24.260

为什么不简单地检查它是否未定义？

```
if (first !== undefined)
     alert(first);
else alert('ooops'); 
```

或者您可能还可以定义类似“默认值”的内容：

```
var first = getUrlVars().result || ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:50:18.907

如果“结果”不在查询字符串中，则不会将其放入 vars 对象中。

因此，如果您想保留：

```
'first = getUrlVars()["result"]' 
```

事情发生了，你将不得不接受如果“结果”根本不存在，那么它将显示为未定义（这是当你要求一个不包含任何内容的数组索引时得到的结果，或尚未设置的对象属性）。

如果您坚决反对这样做，请尝试：

```
var first = getUrlVars()["result"] || "not-success"; 
```

|| 将允许您返回任何您想要的值作为 first 的值，在这种情况下

```
vars.result === undefined;

first = result || false;
first = result || {};
first = result || fire_this_function("no-result");
// first now equals the return value of the function if result === undefined 
```

这些都和说的一样：

```
if (result === undefined) { first = "........"; } 
```

# android - 将指令从 MySql 转换为 Sqlite

> ID：11518873
> 
> 赞同：1
> 
> 时间：2012-07-17T08:38:56.770
> 
> 标签：android, mysql, sqlite, insert

是否可以将指令转换为在 MAC 上使用某些工具`MySql`？`SQlite`我有很多`MySqlite`关于插入表格的说明，我需要在 sqlite 中插入，并且将指令更改为 sqlite 格式以进行插入需要很长时间。

MySql 指令

```
INSERT INTO language_translation_fr(id_translation, content) VALUES
(2001, 'ABIDJAN LAGUNES'),
(2002, 'SUD-OUEST'),
(2003, 'NORD-OUEST'), 
(2004, 'CENTRE-EST') 
```

在 SQlite 中看起来像：

```
INSERT INTO language_translation_fr
      SELECT 2001 AS 'column1', 'ABIDJAN LAGUNES' AS 'column2'
UNION SELECT 2002, 'SUD-OUEST'
UNION SELECT 2003, 'NORD-OUEST'
UNION SELECT 2004, 'CENTRE-EST' 
```

# c# - 不需要xml中的集合列表标签

> ID：11518874
> 
> 赞同：0
> 
> 时间：2012-07-17T08:39:13.310
> 
> 标签：c#, xml, serialization

> **可能重复：**
> [如何抑制列表属性的 XML 标记](https://stackoverflow.com/questions/314242/how-to-suppress-xml-tag-for-list-property)

我可以在 xml 中序列化没有列表对象名称标签的列表吗？

```
List<Person> personInfo= new List(Person); 
```

当我序列化这个对象时，我会得到如下的 xml

```
<xml>
<personInfo>......</personInfo>
</xml> 
```

我不需要这个`"<personInfo>......</personInfo>"`我需要一个解决这个问题的方法。

# javascript - 目标c的Javascript

> ID：11518875
> 
> 赞同：0
> 
> 时间：2012-07-17T08:39:21.547
> 
> 标签：javascript, html, objective-c, uitextfield, uipickerview

我正在尝试将本网站[http://www.runbayou.com/jackd.htm](http://www.runbayou.com/jackd.htm)中的 vodt 计算器转换为目标 c 项目。我已经完成了一个只有一个文本字段和一个距离选择器视图的 UI，但我对如何在目标 c 中重写 javascript 感到迷茫。

PS。我不能只使用 Web 视图并导入 html 文件。

编辑：我想要的是，当您在文本字段中输入时间，即 17:43，然后在选择器视图中选择 5 公里的距离时，您应该从 item 中的一个数组中获得 57 的电压值，
但我遇到了麻烦在获得vodt值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:05:44.060

[vdot.js](http://www.runbayou.com/vdot.js)的公式代码不多，大部分是这样的：

```
c++; item[c]=new Array("|85|3:23.5|3:39.6|7:14.1|7:48.9|12:37|20:50|20:58|26:19|40:17|43:26|54:40|57:50|1:09:33|1:24:33|2:01:10|"); 
```

所以如果你对ObjC有点了解，你可以手动转换它。然后，在 HTML 代码通过调用 JS 函数来处理事件的地方，您的代码通过调用 ObjC 来处理 Interface Builder 中的事件。

# android - Android：点击主页按钮时避免手机重启

> ID：11518876
> 
> 赞同：0
> 
> 时间：2012-07-17T08:39:23.627
> 
> 标签：android, restart, onpause, android-homebutton

我正在编写一个应用程序，我必须解决这个问题......在任何活动中，当点击主页按钮时手机会重新启动，我不希望这种情况发生。

我知道单击主页按钮会将应用程序带到后台，并且从 Android 生命周期中我会说调用了 OnPause。也许我可以使用这个 OnPause() 方法解决问题，但我不知道该怎么做。

我在每个活动中都包含了以下日志：

```
@Override
protected void onPause() 
{
    Log.d(tag, "MYonPause is called");
    super.onPause();
}

@Override
protected void onStop() 
{
    Log.d(tag, "MYonStop is called");
    super.onStop();
}

@Override
protected void onDestroy()
{
    Log.d(tag, "MYonDestroy is called");
    super.onDestroy();
} 
```

这是我点击主页按钮后的 LogCat：

```
07-17 19:40:20.556: V/ActivityManager(1378): destroyActivityLocked, com.android.server.am.ActivityStack.destroyActivityLocked(ActivityStack.java:3332)
07-17 19:40:20.556: V/ActivityManager(1378): destroyActivityLocked, com.android.server.am.ActivityManagerService.trimApplications(ActivityManagerService.java:14511)
07-17 19:40:20.556: V/ActivityManager(1378): destroyActivityLocked, com.android.server.am.ActivityManagerService.finishReceiver(ActivityManagerService.java:12421)
07-17 19:40:20.556: V/ActivityManager(1378): destroyActivityLocked, android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:346)
07-17 19:40:20.556: V/ActivityManager(1378): destroyActivityLocked, com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1642)
07-17 19:40:20.566: V/ActivityManager(1378): destroyActivityLocked, android.os.Binder.execTransact(Binder.java:320)
07-17 19:40:20.566: D/MyActivity(26362): MYonDestroy is called
07-17 19:40:20.566: V/ActivityManager(1378): destroyActivityLocked, dalvik.system.NativeStart.run(Native Method)
07-17 19:40:20.616: D/WindowManagerImpl(26362): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40683a18
07-17 19:40:20.716: D/libEGL(26672): loaded /system/lib/egl/libGLES_android.so
07-17 19:40:20.726: D/WindowManagerImpl(1378): finishRemoveViewLocked, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40a48fa0
07-17 19:40:20.726: I/ActivityManager(1378): Displayed com.htc.launcher/.Launcher: +1s947ms
07-17 19:40:20.776: D/libEGL(26672): loaded /system/lib/egl/libEGL_adreno200.so
07-17 19:40:20.816: V/ActivityManager(1378): Checking to restart com.htc.launcher.Launcher: changed=0x0, handles=0x2a3
07-17 19:40:20.816: V/ActivityManager(1378): oldConfig={ scale=1.0 imsi=214/1 loc=en_ES touch=3 keys=1/1/2 nav=1/1 orien=1 layout=34 uiMode=17 seq=657 skin=default fontsize=3}
07-17 19:40:20.816: V/ActivityManager(1378): newConfig={ scale=1.0 imsi=214/1 loc=en_ES touch=3 keys=1/1/2 nav=1/1 orien=1 layout=34 uiMode=17 seq=657 skin=default fontsize=3}
07-17 19:40:20.826: D/MyActivity(26362): MYonStop is called
07-17 19:40:20.836: D/libEGL(26672): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
07-17 19:40:20.846: D/libEGL(26672): loaded /system/lib/egl/libGLESv2_adreno200.so
07-17 19:40:20.936: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:20.946: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:20.956: D/FxWidgetProvider(25755): row 4
07-17 19:40:20.956: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:20.966: D/WidgetProviderInfoCollector(26672): more than one style shared the same component! Return the first one found.
07-17 19:40:21.276: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:21.286: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:21.286: D/FxWidgetProvider(25755): row 1
07-17 19:40:21.286: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:21.326: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:21.336: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:21.336: D/FxWidgetProvider(25755): row 1
07-17 19:40:21.336: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:21.476: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:21.476: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:21.476: D/FxWidgetProvider(25755): row 1
07-17 19:40:21.486: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:21.577: D/szipinf(26672): Initializing inflate state
07-17 19:40:22.047: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:22.047: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:22.047: D/FxWidgetProvider(25755): row 1
07-17 19:40:22.047: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:22.417: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:22.427: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:22.427: D/FxWidgetProvider(25755): row 1
07-17 19:40:22.437: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:22.477: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:22.477: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:22.477: D/FxWidgetProvider(25755): row 1
07-17 19:40:22.477: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:22.908: D/dalvikvm(26672): GC_EXTERNAL_ALLOC freed 325K, 49% free 3739K/7303K, external 5261K/5309K, paused 39ms
07-17 19:40:22.988: D/dalvikvm(26672): GC_EXTERNAL_ALLOC freed 13K, 49% free 3731K/7303K, external 5581K/6969K, paused 36ms
07-17 19:40:23.178: D/dalvikvm(26672): GC_EXTERNAL_ALLOC freed 49K, 50% free 3681K/7303K, external 7187K/8975K, paused 39ms
07-17 19:40:23.228: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:23.228: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:23.228: D/FxWidgetProvider(25755): row 1
07-17 19:40:23.238: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:23.248: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:23.258: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:23.258: D/FxWidgetProvider(25755): row 1
07-17 19:40:23.258: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:23.288: D/HomeLoaders(26672):   --> starting applications loader
07-17 19:40:23.428: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:23.478: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:23.508: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:23.508: E/mode10(26672): Timeline load failure
07-17 19:40:23.669: D/FxScreen(26672): item count: 1
07-17 19:40:23.699: D/MessagingShortcutReceiver(25766): keep hiding shortcut bubble
07-17 19:40:23.699: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:23.719: I/ActivityManager(1378): Start proc com.htc.android.mail for broadcast com.htc.android.mail/.AppMonitorReceiver: pid=26692 uid=9997 gids={3003, 1015}
07-17 19:40:23.769: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:23.809: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:23.819: E/mode10(26672): Timeline load failure
07-17 19:40:23.829: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:23.849: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:23.929: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:23.939: I/RosieUtility(25755): disable self killer: mEnabled=1
07-17 19:40:23.949: D/FxWidgetProvider(25755): row 81
07-17 19:40:23.949: I/RosieUtility(25755): enable self killer: mEnabled=0
07-17 19:40:23.979: D/StatusBarPolicy(1556): Network Type: 2
07-17 19:40:24.009: W/dalvikvm(26692): Refusing to reopen boot DEX '/system/framework/com.htc.framework.jar'
07-17 19:40:24.019: W/dalvikvm(26692): Refusing to reopen boot DEX '/system/framework/com.htc.android.pimlib.jar'
07-17 19:40:24.019: W/dalvikvm(26692): Refusing to reopen boot DEX '/system/framework/com.htc.android.easopen.jar'
07-17 19:40:24.019: D/FxScreen(26672): item count: 1
07-17 19:40:24.079: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:24.129: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:24.139: E/mode10(26672): Timeline load failure
07-17 19:40:24.169: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:24.199: D/MessagingShortcut(25766): updateMsgShortcut, msg count> 0
07-17 19:40:24.209: D/MessagingShortcut(25766): mPresentUnreadCount: 0
07-17 19:40:24.209: D/MessagingShortcut(25766): setMsgShortcutDrawable> 0
07-17 19:40:24.219: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:24.279: I/ActivityThread(26692): Pub com.htc.android.mail.attachmentprovider: com.htc.android.mail.provider.AttachmentProvider
07-17 19:40:24.409: D/FxScreen(26672): item count: 2
07-17 19:40:24.499: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:24.509: I/ActivityThread(26692): Pub mail: com.htc.android.mail.MailProvider
07-17 19:40:24.549: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:24.549: E/mode10(26672): Timeline load failure
07-17 19:40:24.569: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:24.599: I/ActivityThread(26692): Pub com.htc.android.mail.MailCarousel: com.htc.android.mail.MailCarousel
07-17 19:40:24.629: I/ActivityThread(26692): Pub htceas: com.htc.android.mail.eassvc.core.EASProvider
07-17 19:40:24.650: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:24.650: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:24.650: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:24.660: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:24.670: D/AppMonitorReceiver(26692): 06021143 onReceive>Intent { act=com.htc.launcher.action.ACTION_ITEM_ADDED cmp=com.htc.android.mail/.AppMonitorReceiver (has extras) },#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;launchFlags=0x10200000;component=com.htc.android.mail/.MailListTab;end
07-17 19:40:24.670: D/AppMonitorReceiver(26692): 06021143 update mail shortcut>
07-17 19:40:24.700: D/MessagingShortcutReceiver(25766): keep hiding shortcut bubble
07-17 19:40:24.710: D/AppMonitorReceiver(26692): 06021143 onReceive>Intent { act=com.htc.launcher.action.ACTION_ITEM_ADDED cmp=com.htc.android.mail/.AppMonitorReceiver (has extras) },#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;launchFlags=0x10200000;component=com.android.camera/.CameraEntry;end
07-17 19:40:24.730: D/MessagingShortcutReceiver(25766): keep hiding shortcut bubble
07-17 19:40:24.740: D/FxScreen(26672): item count: 1
07-17 19:40:24.790: D/Database(26692): dbopen(): path = /data/data/com.htc.android.mail/databases/mail.db, flag = 6, file size = 76800
07-17 19:40:24.840: I/Database(26692): sqlite returned: error code = 0, msg = Recovered 71 frames from WAL file /data/data/com.htc.android.mail/databases/mail.db-wal
07-17 19:40:24.870: D/Database(26692): dbopen(): path = /data/data/com.htc.android.mail/databases/mail.db, mode: wal, disk free size: 485 M, handle: 0x353470
07-17 19:40:25.000: D/dalvikvm(1378): GC_EXPLICIT freed 1482K, 34% free 11322K/17095K, external 2108K/2395K, paused 233ms
07-17 19:40:25.020: D/CursorWindow(26692): Allocate Cursor Window, size = 4096 KB
07-17 19:40:25.020: D/AppMonitorReceiver(26692): 06021143 onReceive>Intent { act=com.htc.launcher.action.ACTION_ITEM_ADDED cmp=com.htc.android.mail/.AppMonitorReceiver (has extras) },#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;launchFlags=0x10200000;component=com.android.browser/.BrowserActivity;end
07-17 19:40:25.030: D/MessagingShortcut(25766): Send UNREAD_MESSAGE_COUNT broadcast: count=0
07-17 19:40:25.030: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:25.060: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:25.060: E/mode10(26672): Timeline load failure
07-17 19:40:25.070: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:25.190: D/FxScreen(26672): item count: 3
07-17 19:40:25.230: D/dalvikvm(26672): GetFieldID: unable to find field Ljava/util/Hashtable;.loadFactor:F
07-17 19:40:25.230: D/MessagingShortcut(25766): updateMsgShortcut, msg count> 0
07-17 19:40:25.250: D/MessagingShortcut(25766): mPresentUnreadCount: 0
07-17 19:40:25.250: D/MessagingShortcut(25766): setMsgShortcutDrawable> 0
07-17 19:40:25.620: D/dalvikvm(26692): GC_EXTERNAL_ALLOC freed 178K, 46% free 3017K/5511K, external 0K/0K, paused 595ms
07-17 19:40:25.630: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:25.630: E/mode10(26672): Timeline load failure
07-17 19:40:25.721: I/FxListViewCollection(26672): FxListViewCollection is created with handle 17239736
07-17 19:40:25.721: I/FxListViewCollection(26672): FxListViewCollection is created with handle 17072072
07-17 19:40:25.721: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:25.741: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:26.311: D/FxScreen(26672): item count: 2
07-17 19:40:26.311: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:26.391: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:26.391: E/mode10(26672): Timeline load failure
07-17 19:40:26.391: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:26.441: D/dalvikvm(26672): GC_CONCURRENT freed 1110K, 44% free 4408K/7815K, external 9207K/9227K, paused 13ms+9ms
07-17 19:40:26.531: D/dalvikvm(26672): GC_EXTERNAL_ALLOC freed 58K, 45% free 4349K/7815K, external 9207K/9227K, paused 77ms
07-17 19:40:26.621: D/dalvikvm(26672): GC_EXTERNAL_ALLOC freed 60K, 46% free 4288K/7815K, external 9227K/11275K, paused 69ms
07-17 19:40:26.762: D/dalvikvm(26672): GC_EXTERNAL_ALLOC freed 23K, 46% free 4278K/7815K, external 9270K/11275K, paused 45ms
07-17 19:40:26.792: D/FxScreen(26672): item count: 3
07-17 19:40:26.842: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:26.892: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:26.902: E/mode10(26672): Timeline load failure
07-17 19:40:26.902: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:26.972: D/StatusBarPolicy(1556): Network Type: 2
07-17 19:40:27.062: D/FxScreen(26672): item count: 4
07-17 19:40:27.102: I/keystore(1271): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4
07-17 19:40:27.122: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:27.162: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:27.162: E/mode10(26672): Timeline load failure
07-17 19:40:27.192: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:27.282: D/FxScreen(26672): item count: 5
07-17 19:40:27.322: D/MessagingShortcut(25766): Send UNREAD_MESSAGE_COUNT broadcast: count=0
07-17 19:40:27.322: E/mode10(26672): PlayMarker fail, marker 'intro_to_up' not found in button.shortcut
07-17 19:40:27.352: E/mode10(26672): Fail to load timeline from asset.
07-17 19:40:27.352: E/mode10(26672): Timeline load failure
07-17 19:40:27.372: D/Utilities(26672): createIconThumbnail # iconWidth: 72,iconHeight: 72,width: 72,height: 72
07-17 19:40:27.502: D/FxScreen(26672): item count: 4
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:29:25.163

显然，当按下“HOME”按钮时，`onStop()`会调用活动的方法。您可以使用以下代码来覆盖（监视）它：

```
@Override
protected void onStop() 
{
    super.onStop();
    Log.d(tag, "MYonStop is called");
    // insert here your instructions
} 
```

# php - 通过fpdf、php和mysql生成身份证

> ID：11518879
> 
> 赞同：1
> 
> 时间：2012-07-17T08:39:39.890
> 
> 标签：php, mysql, pdf, fpdf

我想为大学录取的学生生成身份证。

我已经链接了一张照片，我在其中分享了我如何通过 php 和 fdpf 在 pdf 文件中获取身份证。我正在从 mysql 获取日期。

![在此处输入图像描述](../Images/3c2af5e9436d52096efc7d97f3315dc0.png)

假设我有 13 名学生可以参加特定课程。现在，我希望数据首先以多列方式实际工作，然后随着页面的填充，它应该在下一页中创建页面的背面并移至其他页面。在一个 A4 页面上，我只能有六张身份证，在下一页上，这些身份证的背面有六张，这一步应该重复。我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:43:59.557

当您尝试生成 ID 时，您的目标应该是在页面上生成六个，您可以通过循环来做到这一点。

因为在背面打印是打印机属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:07:09.950

*   您可以使用[AddPage()](http://fpdf.org/en/doc/addpage.htm)方法来模拟页面提要。要添加两个页面，请调用两次。
*   有一个第三方脚本可以[为奇数页和偶数页使用不同的边距，就像在书中一样](http://fpdf.org/en/script/script86.php)，但我不知道您是否可以强制从 PDF 文档进行双面打印。

# jquery - jQuery：迭代包含键“长度”的哈希

> ID：11518881
> 
> 赞同：1
> 
> 时间：2012-07-17T08:39:41.160
> 
> 标签：jquery, hash, key, loops

我有一个 JS-hash 包含一个键`length`（它表示与散列长度完全不同的东西）并且需要对其进行迭代。

问题在于`jQuery.each`拒绝迭代它，因为它检测到`length`属性并认为它必须是数组或类似数组的对象。

来自 jQuery 文档：

> 具有长度属性的数组和类数组对象（例如函数的 arguments 对象）> 通过数字索引迭代，从 0 到 length-1。其他对象通过其命名属性进行迭代。

[这个 JS fiddle](http://jsfiddle.net/nHWpc/)说明了这个问题。

好吧，所以这一切都记录在案并且可以理解。但是，如果我只有*一个*名为的属性，该`length`怎么办？我是否必须在迭代哈希之前和之后进行痛苦的重命名，或者是否有可能告诉 jQuery 忽略此属性并将其视为任何其他对象属性？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:44:50.783

不使用 jquery.each 但是...

```
for (var key in testHash2) {
    if (testHash2.hasOwnProperty(key)) {
        $('#result').append($('<li />').text(key + ':' + testHash2[key]));
    }
} 
```

**更新** 忘记用“hasOwnProperty”清理循环以防万一......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:50:15.970

这是一个修复该行为的快速补丁：

```
(function($,undefined){
    var initialEach = $.each;
    $.each = function(obj,fn){
       if($.isArray(obj) || obj.length === undefined)
           return initialEach.apply(this,arguments);
       // else iterate over the object that contains a 'length' property
       for(var key in obj)
           if(obj.hasOwnProperty(key))
                fn.call(obj[key],key,obj[key]);
    };
 })(jQuery); 
```

这是一个现场演示来理顺事情：http: [//jsfiddle.net/gion_13/vwWm6/](http://jsfiddle.net/gion_13/vwWm6/)

# google-play - Google Play 显示较旧的 APK 版本文件

> ID：11518882
> 
> 赞同：0
> 
> 时间：2012-07-17T08:39:42.340
> 
> 标签：google-play

我在开发者控制台上上传了一个带有新版本名称和代码的新 apk。它显示已激活。但是google play仍然显示旧版本。我更新apk已经20分钟了。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:41:43.923

如果同一应用程序有多个 apk，则应删除所有以前的 apk，只保留最新的

# php - 单用户系统中的注销问题

> ID：11518897
> 
> 赞同：0
> 
> 时间：2012-07-17T08:40:52.467
> 
> 标签：php, sql-update, logout, single-user

我被要求构建一个一次只能托管**一个用户**的项目管理应用程序。我通过简单地`status`在我的表中创建一行来做到这`user`一点，当有人登录时设置为 1。

现在，`status = 1`没有其他人可以登录，他们收到一条错误消息，而不是说另一个用户已经在使用该应用程序。当在线用户注销时，我更新`status`数据库中的行并将其设置为0，以允许其他用户自由登录。

一切都很好，除了，如您所见，它依赖于注销按钮，许多用户忘记以这种方式注销，他们只是关闭选项卡或浏览器保留`status`为 1，然后阻止整个系统。

我尝试了几种方法在页面关闭时使用会话超时或通过更新数据库，`onunload`但我无法找到一种干净可靠的方法。

我如何开发这样一个同时结合单用户模式和自动/智能注销的系统？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:46:49.237

实现此目的的唯一方法是检查登录用户在过去 X 分钟内是否处于活动状态。当新用户尝试登录时检查此项。当前一个用户在那段时间处于非活动状态时，取消设置数据库中的状态并让新用户进入。然后您还应该使前一个用户的会话无效，以防他回来。

不要尝试检测会话结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:07:14.063

你可以`reduce the user's Session timeout`。我认为您可以从`Php`和`Webserver`（Apache，IIS，..）中实现这一点，应该真正查看手册页。完成后，您可以实现`polling system`定期 ping 用户以验证他/她的存在。例如，您可以创建一个客户端`Ajax script`，它以固定的时间间隔 ping 站点，这样可以延长用户的活动会话。如果用户不再 ping 该站点，则在时间窗口到期后，设置他/她的`status = 0`. 那只是一个想法。尝试在 Google 上搜索更多信息。

* * *

一种变体：您可以从服务器端语言设置一个 cookie，并将会话与该 cookie 相关联。所以，给它一个短的过期时间。然后制作一个客户端脚本，定期向服务器发送隐藏请求。当服务器收到请求时，它会再次重新写入cookie，因此新的时间将从头开始。

# datagridview - Datagridview 中缺少十进制值

> ID：11518899
> 
> 赞同：0
> 
> 时间：2012-07-17T08:40:57.377
> 
> 标签：datagridview, decimal

我已使用以下答案在我的 Visual Basic 2010 DGV 中显示十进制值。

***使用代码，您可以设置 DataGridView.DefaultCellStyle 属性。***

您也可以通过以下方式在设计器中执行此操作：

```
1.Right clicking your DGV and select Edit Columns. The Edit Columns dialog appears.
2.Select your column on the left side of the dialog and click the DefaultCellStyle property field to bring up the CellStyle Builder.
3.In the Builder dialog click Format which brings up the Format String Dialog.
4.Make your selections in this dialog (select Numeric type, which allows specifying number of decimals to display) and save your changes. 
```

我的问题是，当我通过绑定到 DGV 的文本框输入新值时，DGV 显示小数位但不显示我输入的实际值。例如：我输入 20.25，点击保存按钮。在 DGV 中显示的值为 20.25。一旦我关闭程序并再次打开它，DGV 中的值就会显示 20.00 而不是输入的 20.25。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:25:25.367

我很简单地找到了这个解决方案。我已经搜索了两天，终于找到了。-您的数据库列类型必须是金钱或数字，双，单。- 更新 datagridview 事件“CellFormatting”，如下代码。

```
private void dataGridView2_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
   {
       if (this.dataGridView2.Columns[e.ColumnIndex].Name == "Aidat")
       {
          string deger=(string)e.Value;
          deger = String.Format("{0:0.00}", deger);
       }
   } 
```

# asp.net - 如何获取标签控件的默认字体名称？

> ID：11518907
> 
> 赞同：0
> 
> 时间：2012-07-17T08:41:17.200
> 
> 标签：asp.net, html, css

我需要从标签控件中获取文本的默认字体名称。（IE）

```
<asp:Label Text="Test" ID="lblq" runat="server"></asp:Label> 
```

如何找到标签 'lblq' 的字体名称（或）字体系列？字体系列是否取决于浏览器？

我在下拉列表中加载了默认字体。当我单击一个按钮时，我只需要将标签“lblq”字体名称设置为下拉列表的选定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:43:51.463

尝试：-

```
string myVal = lblq.Font.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:46:49.550

this is not as relavent to your question but might give you a head start

```
 // this will give you the list of all installed fonts
             using System.Drawing.Text;

            InstalledFontCollection fontList = new InstalledFontCollection();  
            foreach(FontFamily family in fontList.Families)  
            {  
                ListBox1.Items.Add(family.Name);  
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:47:34.663

You can find original font name using following code:

```
string originalFontName=lblq.Font.OriginalFontName; 
```

# android - 保存PNG Drawable Android

> ID：11518910
> 
> 赞同：1
> 
> 时间：2012-07-17T08:41:23.607
> 
> 标签：android, png, alpha-transparency

我知道如何使用 Bitmap.compress() 保存图像，但我真的想将图像保存为具有 alpha 透明度的 PNG，而使用 Bitmap 只会扼杀我的努力。我可以将其保存为不透明的 PNG，但不能保存为透明的 PNG 文件。

有什么办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T20:33:01.973

有同样的问题。只需`bitmap.setHasAlpha(true);`在调用压缩之前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:56:46.820

试试这个。我没有测试过它，但它应该可以工作。

```
Bitmap bitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
OutputStream stream = new FileOutputStream("/sdcard/test.png");
bitmap.compress(CompressFormat.PNG, 100, stream);
stream.close(); 
```

# android - EdtiText：隐形号码以及如何链接到谷歌地图

> ID：11518914
> 
> 赞同：0
> 
> 时间：2012-07-17T08:41:37.357
> 
> 标签：android, android-edittext

我有一个非常简单的布局，由 TextViews 和禁用的 EditTexts 轮流放置。大多数 EditTexts 包含纯文本，但我有两个特殊字段，我对它们有疑问：

1.  电话号码：作为自动链接类型，我设置了“电话”。问题是电话号码是不可见的，直到我在编辑中单击：

    ```
     <EditText
                android:id="@+id/service_order_contact_phone"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:focusable="false"
                android:enabled="false"
                android:inputType="phone"
                android:gravity="right"
                android:autoLink="phone" >
             </EditText> 
    ```

2.  我想让用户点击地址打开谷歌地图。我将 autoLink 属性设置为“map”，但它似乎不起作用。你知道怎么做吗？

    ```
     <EditText
                android:id="@+id/service_order_address"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:enabled="false"
                android:focusable="false"
                android:singleLine="false"
                android:lines="2"
                android:inputType="textPostalAddress|textMultiLine"
                android:autoLink="map"
                android:gravity="right" >
             </EditText> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:49:42.313

我不认为 EditText 和 autoLink 被设计为一起工作......当用户编辑一个值时想想这个场景：

1.  用户输入电话号码，例如：5557891234
2.  用户犯了一个错误，点击 EditText 的中间可以更改电话号码中间的一个数字...
3.  链接操作不会被允许编辑号码，而是将它们带到带有错误电话号码的拨号器。

# android - 从 sqlite 数据库创建列表视图

> ID：11518919
> 
> 赞同：0
> 
> 时间：2012-07-17T08:41:54.317
> 
> 标签：android, database, sqlite, listview

我有一个数据库，我可以在其中创建和删除新记录。我希望这些记录显示在另一个活动的列表视图中。

**数据库：**

```
public class DBHelper extends SQLiteOpenHelper {
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "spinnerExample";

// Labels table name
private static final String TABLE_LABELS = "labels";

// Labels Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";

public DBHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    // Category table create query
    String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_LABELS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT)";
    db.execSQL(CREATE_CATEGORIES_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

    // Create tables again
    onCreate(db);
}

/**
 * Inserting new lable into lables table
 * */
public void insertLabel(String label){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, label);

    // Inserting Row
    db.insert(TABLE_LABELS, null, values);
    db.close(); // Closing database connection
}

/**
* Removing label
* */
public void removeLabel(String label){
SQLiteDatabase db = this.getWritableDatabase();

ContentValues values = new ContentValues();
values.put(KEY_NAME, label);

// Removing Row
db.delete(TABLE_LABELS, KEY_NAME + "=?", new String[] {label});
db.close(); // Closing database connection
}

/**
 * Getting all labels
 * returns list of labels
 * */
public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();

    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning lables
    return labels;
}
} 
```

**列表视图的布局：**

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Modules"
    android:layout_margin="10dp" 
    android:textStyle="bold"
    android:textSize="30dp"
    android:layout_gravity="center"/>

<ListView
    android:id="@+id/lst_module"
    android:layout_width="match_parent"
    android:layout_height="330dp" 
    android:layout_marginRight="7dp"
    android:layout_marginLeft="7dp"
    android:layout_marginTop="7dp" >
</ListView>

<Button
    android:id="@+id/btn_edtmodule"
    android:layout_width="fill_parent"
    android:layout_height="64dp"
    android:text="Edit Modules" 
    android:textStyle="bold"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"/>

 </LinearLayout> 
```

**活动类：**

```
 public class Module extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.module);

    Button editModule = (Button) findViewById(R.id.btn_edtmodule);
    editModule.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(new Intent("sg.edu.tp.iit.mns.VotingAppMain"));           
        }
    });        
} 
```

我想知道活动类的代码是什么。有人可以帮我吗？我对这个 android 世界很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:45:59.997

为了在列表视图中显示所有项目，首先创建自定义列表视图并从数据库中获取数据并存储在 ArrayList

```
Class Data{
    String name,Address;
}

ArrayList<Data>list=new ArrayList<Data>();

Cursor userListCursor = dbAdapter.fetchAllRecord();
startManagingCursor(userListCursor);

while (!userListCursor.isAfterLast()) {
    Data record=new Data();
    record.name=userListCursor.getString(0);
    record.address=userListCursor.getString(1);
    list.add(record);
    userListCursor.moveToNext();
} 
```

将此发送`arraylist`到**扩展** `BaseAdapter`类并在`getView()`方法下设置这些值的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:00:17.923

假设您只需要将数据库的内容显示在 ListView 中，那么请查看以下问题：

[https://stackoverflow.com/questions/11516340/how-to-on-refreshing-android-listfragment-listview-after-modifying-its-contents](https://stackoverflow.com/questions/11516340/how-to-on-refreshing-android-listfragment-listview-after-modifying-its-contents)

那里的代码正是这样做的，应该为您指明正确的方向。唯一的问题是，如果您在 onItemClick 之后删除项目，您可能会遇到麻烦。

# java - Android SDK：NSDictionary 字典与 objectsForKeys 等效

> ID：11518924
> 
> 赞同：1
> 
> 时间：2012-07-17T08:42:18.360
> 
> 标签：java, android

我有以下objective-c代码

```
 NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:names forKeys:dates]; 
```

名称和日期是 NSMutableArrays

这段代码的java等价物是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:55:03.020

假设 dates 数组元素是 Long（Java 日期），而 names 数组元素是 String。

```
Map<Long, String> dictionary = new HashMap<Long, String>();
for (int idx = 0; i < dates.length; ++idx) {
    dictionary.put(dates[idx], names[idx]);
} 
```

请注意，HashMap 不像 NSDictionary 那样不可变。如果这是不可接受的使用：

```
Collections.unmodifiableMap(dictionary); 
```

# ruby-on-rails - 样式 select_tag

> ID：11518925
> 
> 赞同：1
> 
> 时间：2012-07-17T08:42:20.103
> 
> 标签：ruby-on-rails

我找不到任何方法来更改 Rails select_tag 列表中的字体样式

如果我试试这个：

```
<%= select_tag :weight_lbs, options_for_select([['0', 0],['1', 1],['2', 2],['3', 3],['4', 4],['5', 5],['6', 6],['7', 7],['8', 8],['9', 9],['10', 10],['11', 11],['12', 12],['13', 13]]), :class => 'formfield'%> 
```

然后我可以在我的 CSS 类中更改选择框的宽度，但我不能更改任何其他内容 - 高度、字体大小和颜色，例如，都没有影响

同样，如果我尝试在元素级别更改样式，甚至使用 Rails 文档中的示例

```
<%= select_tag 'testname', options_for_select(options_for_select([ "Denmark", ["USA", {:class => 'select'}], "Sweden" ]))%> 
```

class 属性对输出没有影响（Mac 上的 Chrome 和 Safari，Rails 3.1）

那么，如何在 Rails 中更改 select_tag 中的高度和文本样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-09T06:45:46.290

我在 Reddit 上找到了这个。由[u/GroceryBagHead发布](https://www.reddit.com/user/GroceryBagHead/)

> 您无法设置选择选项的样式。这些取决于您的操作系统/浏览器并呈现。不过，可以用 html 元素替换此控件。

他发布了一个名为[bootstrap-select](https://github.com/snapappointments/bootstrap-select)的链接，该链接现在已失效。谷歌搜索应该可以帮助您找到更多资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-29T13:46:49.587

好吧，这个问题很老了，但你肯定可以：

```
<%= select_tag :blah, options_for_select(@some_options), {:multiple => true, :style => "min-width: 200px"} %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:47:34.330

我的建议是检查 Rails 生成的页面源。这将使您更容易理解 HTML 结构，以便选择 CSS 文件中的元素。有了 Rails 生成的 HTML 代码，您的问题就与 CSS 相关。

您可以在 div 中包含您的选择，例如：

```
<div class="myclass">
  <%= select_tag :weight_lbs, options_for_select([['0', 0],['1', 1],['2', 2],['3', 3],['4', 4],['5', 5],['6', 6],['7', 7],['8', 8],['9', 9],['10', 10],['11', 11],['12', 12],['13', 13]])%>
</div> 
```

所以你的CSS：

```
.myclass select {
    font: # whatever you want
    ...
}

.myclass select option {
    # in case you want to style the options of a select
} 
```

ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-24T19:33:03.407

我使用的解决方法是安装一个名为[select2的 gem](https://github.com/argerim/select2-rails)

```
gem 'select2-rails' 
```

如果您遵循文档中的设置过程，您可以在 CSS 中非常轻松地编辑下拉列表属性。在 Chrome 检查器中弄乱了一些之后，我找到了相关标签。

```
/* The dropdown background */
.select2-dropdown{
  background-color: #3a3a3a;
  font-size: 10px;
  font-family: sans-serif;
}

/* Individual styling of list items that are selected (previously chosen) */
.select2-results__option--selected {
  opacity: 0.9;
  background-color: #505050 !important;
}

 /* Individual styling of list items that are highlighted (mouse hover) */
.select2-results__option--highlighted {
  background-color: #e66d2d !important;
} 
```

如果您想自己查看 Chrome Inspector，请单击“选择”表单字段并打开下拉列表。这将创建一个 span 元素作为[所附屏幕截图](https://i.stack.imgur.com/Oj6a8.png)中显示的 body 标记的子元素。

# wix - 安装失败后的自定义操作

> ID：11518927
> 
> 赞同：3
> 
> 时间：2012-07-17T08:42:24.293
> 
> 标签：wix, windows-installer, installshield, custom-action

仅当安装中断或错误完成时，如何对自定义操作进行排序？

是否有任何 Windows 安装程序属性返回当前安装状态（失败/成功）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T10:32:21.197

元素的`OnExit`属性[`<Custom>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_custom.htm)就是您要查找的内容。`Before`它与、`After`和属性互斥，`Sequence`可以有以下值：`success`、`cancel`、`error`、`suspend`。

**更新**：基本上，这就是我的意思：

1）定义一个自定义操作，它将完成您希望它完成的工作（收集一些失败数据）。请注意，您必须定义 N 个指向同一目标的自定义操作，因为[CustomAction MSI 表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368062.aspx)需要`Id`作为主键（假设它是 DLL CA）：

```
<CustomAction Id="LogFailureOnCancel" BinaryKey="CustomActions" DllEntry="LogFailure" ... />
<CustomAction Id="LogFailureOnError" BinaryKey="CustomActions" DllEntry="LogFailure" ... /> 
```

注意：两个定义都指向相同**的实际**操作（`DllEntry`属性）。

2) 适当安排这些自定义操作：

```
 <Custom Action="LogFailureOnCancel" OnExit="cancel" />
 <Custom Action="LogFailureOnError" OnExit="error" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:09:52.913

在 Windows Installer 允许的范围内，这仅在计划回滚的自定义操作期间才有可能。但是回滚仅适用于延迟脚本，因此它仅适用于在 InstallInitialize 和 InstallFinalize 之间安排的操作。如果此调度窗口之外的立即模式操作导致安装中止，则不应用回滚。

假设您正在使用 C++ 或 InstallScript 操作，您可以通过调用[MsiGetMode](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370125.aspx)来确定是否启用了回滚，以及是否处于回滚状态- 分别使用`MSIRUNMODE_ROLLBACKENABLED`或`MSIRUNMODE_ROLLBACK`。

# asp.net-mvc-3 - MVC3 发布的表单字段在托管环境中间歇性地为空

> ID：11518928
> 
> 赞同：2
> 
> 时间：2012-07-17T08:42:25.527
> 
> 标签：asp.net-mvc-3, iis-7.5

我有一个 MVC3 应用程序，它有大量用于收集用户输入的表单。这些表单依赖于使用 jQuery 的客户端验证。在本地 IIS 7.5 安装下进行测试时，一切正常。在生产环境（也是 IIS 7.5）中，在 3 个表单上，我们遇到了间歇性故障，其中输入视图模型在 POST 操作中具有空值。我添加了一些故障诊断代码并确定在发生这种情况时 Request.Params 集合包含空值或名称值的空字符串。这似乎是相当随机的，但只在特定表格上被注意到。有没有人遇到过这样的事情，你找到解决办法了吗？

生产环境是：用户通过 RDP 连接到 Windows Server 2003 RDP 客户端/IE8。用户在 RDP 会话中运行 IE8 浏览器以连接到 Windows Server 2008 R2/IIS 7.5。

这个问题似乎只发生在浏览器和服务器之间的特定网络连接上。第二个网络没有遇到这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:01:19.990

您是否检查了在防火墙级别设置的 MTU 大小。如果这太低，那么这可能会导致问题。我看到了同样的问题，将 MTU 大小减少到 1300 以解决不相关的 VPN 连接问题。一旦防火墙级别的 MTU 大小增加到 1500，问题就解决了。

HTTP POST 请求以多个数据包的形式发送。第一个包含标头，而辅助数据包包含请求正文。有时，当您遇到网络延迟时，主体会丢失。

在 IIS6 中，IIS 管道在收到整个请求之前不会开始处理请求，从而导致超时（如果您使用负载平衡器，则网关超时 504）。在 IIS7 中，您不会得到超时，但会得到空的正文帖子，即使 CONTENT-LENGTH 不为零。

我仍然遇到这个问题，并且即将恢复为 GET 请求。它们是单个数据包，因此速度更快。

# c# - MVC 重定向到默认路由

> ID：11518935
> 
> 赞同：5
> 
> 时间：2012-07-17T08:42:58.313
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

这是我的默认路线：

```
routes.MapRouteLowercase(
                "Default",
                "{country}/{controller}/{action}/{id}",
                new {
                    country = "uk",
                    controller = "Home",
                    action = "Index",
                    id = UrlParameter.Optional
                },
                new[] { "Presentation.Controllers" }
                ); 
```

众所周知，当有人访问 www.domain.com/ 时，MVC 的路由会根据上述路由确定默认的控制器和要执行的操作，但 URL 会保持不变。对于使用默认值的每个路由，是否有内置或优雅的方式来执行从 www.domain.com/ 到 www.domain.com/uk/{controller}/{action}/ 的 301 重定向？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T10:39:18.607

我创建了一个自定义路由处理程序，它在路由级别进行重定向。感[谢菲尔哈克](http://haacked.com/archive/2008/12/15/redirect-routes-and-other-fun-with-routing-and-lambdas.aspx)。

这是完整的工作。

**重定向路由处理程序**

```
public class RedirectRouteHandler : IRouteHandler
{
    private string _redirectUrl;

    public RedirectRouteHandler(string redirectUrl)
    {
        _redirectUrl = redirectUrl;
    }

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        if (_redirectUrl.StartsWith("~/"))
        {
            string virtualPath = _redirectUrl.Substring(2);
            Route route = new Route(virtualPath, null);
            var vpd = route.GetVirtualPath(requestContext,
                requestContext.RouteData.Values);
            if (vpd != null)
            {
                _redirectUrl = "~/" + vpd.VirtualPath;
            }
        }

        return new RedirectHandler(_redirectUrl, false);
    } 
} 
```

**重定向 http 处理程序**

```
public class RedirectHandler : IHttpHandler
{
    private readonly string _redirectUrl;

    public RedirectHandler(string redirectUrl, bool isReusable)
    {
        _redirectUrl = redirectUrl;
        IsReusable = isReusable;
    }

    public bool IsReusable { get; private set; }

    public void ProcessRequest(HttpContext context)
    {
        context.Response.Status = "301 Moved Permanently";
        context.Response.StatusCode = 301;
        context.Response.AddHeader("Location", _redirectUrl);
    }
} 
```

**路线扩展**

```
public static class RouteExtensions
{
    public static void Redirect(this RouteCollection routes, string url, string redirectUrl)
    {
        routes.Add(new Route(url, new RedirectRouteHandler(redirectUrl)));
    }
} 
```

有了所有这些，我可以在 Global.asax.cs 中映射路由时做这样的事情。

```
routes.Redirect("", "/uk/Home/Index");

routes.Redirect("uk", "/uk/Home/Index");

routes.Redirect("uk/Home", "/uk/Home/Index");

.. other routes 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T09:28:14.603

在我的项目中，我通常将“IndexRedirect”作为我的路由中的默认操作（其 URL 永远不可见），它除了重定向到“真实”索引页面（其 URL 将始终可见）之外什么都不做。

您可以在所有控制器类的基类中创建此操作。

# forms - 使用 symfony2 和 phpunit 修改表单动作

> ID：11518938
> 
> 赞同：4
> 
> 时间：2012-07-17T08:43:04.237
> 
> 标签：forms, symfony, phpunit

我目前正在使用 Symfony2，并且正在使用 PHPUnit 测试我的项目。我想在使用错误参数提交表单或 URL 不完整时测试异常。

我浏览了 Symfony2 和 PHPUnit 的文档，但没有找到任何类/方法。

如何更改表单操作的值？我想使用 PHPUnit，所以创建的报告是最新的，我可以看到我的代码的覆盖率。

**编辑：**

为了澄清我的问题，一些新内容。如何在控制器中测试以“>”开头的行？( `throw $this->createNotFoundException('Unable to find ParkingZone entity.');`)

当用户修改动作链接时，在控制器中进程将通过异常（或错误消息，如果选择此动作）。我该如何测试这个案例？

***控制器***

```
/**
 * Edits an existing ParkingZone entity.
 *
 * @Route("/{id}/update", name="parkingzone_update")
 * @Method("post")
 * @Template("RatpGarageL1Bundle:ParkingZone:edit.html.twig")
 */
public function updateAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('RatpGarageL1Bundle:ParkingZone')->find($id);

    if (!$entity) {
>        throw $this->createNotFoundException('Unable to find ParkingZone entity.');
    }

    $editForm   = $this->createForm(new ParkingZoneType(), $entity);
    $deleteForm = $this->createDeleteForm($id);

    $request = $this->getRequest();

    $editForm->bindRequest($request);

    if ($editForm->isValid()) {
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('parkingzone_edit', array('id' => $id)));
    }

    return array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
        'delete_form' => $deleteForm->createView(),
    );
} 
```

***看法：***

```
<form action="{{ path('parkingzone_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>
    <div class="control-group">
        {{ form_label(form.name, 'Name', { 'attr': {'class': 'control-label'} } ) }}
        <div class="controls error">
            {{ form_widget(form.name, { 'attr': {'class': ''} } ) }}
            <span class="help-inline">{{ form_errors(form.name) }}</span>
        </div>
    </div>
    <div class="control-group">
        {{ form_label(form.orderSequence, 'Rang', { 'attr': {'class': 'control-label'} } ) }}
        <div class="controls error">
            {{ form_widget(form.orderSequence, { 'attr': {'class': ''} } ) }}
            <span class="help-inline">{{ form_errors(form.orderSequence) }}</span>
        </div>
    </div>
    <div class="control-group">
        {{ form_label(form.image, 'Image', { 'attr': {'class': 'control-label'} } ) }}
        <div class="controls error">
            {{ form_widget(form.image, { 'attr': {'class': ''} } ) }}
            <span class="help-inline">{{ form_errors(form.image) }}</span>
        </div>
    </div>
    {{ form_rest(form) }}
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Enregistrer</button>
        <a href="{{ path('parkingzone') }}" class="btn">Annuler</a>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:01:20.350

Symfony 本身没有任何对象可以通过它来操作表单的操作，因为它是在 html（twig 文件）中设置的。但是，twig 提供了在 twig 文件中动态更改表单操作的功能。

基本方法是控制器通过渲染调用将参数传递到树枝文件中。然后twig文件可以使用这个参数来动态设置表单动作。如果控制器使用会话变量来确定此参数的值，则通过在测试程序中设置此会话变量的值，可以专门为测试设置表单操作。

例如在控制器中：

```
public function indexAction()
{
    $session = $this->get('session');
    $formAction = $session->get('formAction');
    if (empty($formAction)) $formAction = '/my/normal/route';

    ...

    return $this->render('MyBundle:XXX:index.html.twig', array(
        'form' =>  $form->createView(), 'formAction' => $formAction)
    );
} 
```

然后，在树枝文件中：

```
<form id="myForm" name="myForm" action="{{ formAction }}" method="post">
...
</form> 
```

然后，在测试程序中：

```
$client = static::createClient();
$session = $client->getContainer()->get('session');
$session->set('formAction', '/test/route');
$session->save();

// do the test 
```

这不是唯一的方法，还有多种可能性。例如，会话变量可以是 $testMode，如果设置了此变量，则表单将 $testMode = true 传递给渲染调用。然后，twig 文件可以根据 testMode 变量的值将表单操作设置为两个值之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:45:35.640

Symfony2 区分了单个类的单元测试和应用程序行为的功能测试。单元测试是通过直接实例化一个类并在其上调用方法来进行的。通过模拟请求和测试响应来进行功能测试。更多细节参见[symfony 测试](http://symfony.com/doc/master/book/testing.html)。

表单提交只能在功能上进行测试，因为它是由始终在容器上下文中运行的 Symfony 控制器处理的。Symfony 功能测试必须扩展 WebTestCase 类。此类提供对用于请求 URL、单击链接、选择按钮和提交表单的客户端的访问。这些操作返回一个表示 HTML 响应的爬虫实例，用于验证响应是否包含预期的内容。

仅在执行单元测试时测试是否抛出异常是合适的，因为功能测试涵盖与用户的交互。用户永远不应该知道已经引发了异常。因此，最坏的情况是异常被 Symfony 捕获，并且在生产环境中，用户会看到包罗万象的响应“糟糕，发生了错误”（或类似的自定义消息）。但是，这应该只在应用程序损坏时才会发生，而不是因为用户错误地使用了应用程序。因此，通常不会在功能测试中对其进行测试。

关于问题中提到的第一个场景 - 提交带有错误参数的表单。在这种情况下，应该向用户显示一条错误消息，告诉他们他们的输入有什么问题。理想情况下，控制器不应该抛出异常，但应该使用[symfony 验证](http://symfony.com/doc/master/book/validation.html)在每个字段旁边自动生成适当的错误消息。无论错误如何显示，都可以通过检查提交表单的响应是否包含预期的错误来进行测试。例如：

```
class MyControllerTest extends WebTestCase
{
    public function testCreateUserValidation()
    {
        $client = static::createClient();
        $crawler = $client->request('GET', '/new-user');
        $form = $crawler->selectButton('submit')->form();
        $crawler = $client->submit($form, array('name' => '', 'email' => 'xxx'));
        $this->assertTrue($crawler->filter('html:contains("Name must not be blank")')->count() > 0,
                          "Page contains 'Name must not be blank'");
        $this->assertTrue($crawler->filter('html:contains("Invalid email address")')->count() > 0,
                          "Page contains 'Invalid email address'");
    }
} 
```

关于第二种情况 - URL 不完整。在 Symfony 中，任何与定义的路由不匹配的 URL 都会导致 NotFoundHttpException。在开发中，这将导致一条消息，例如“没有为“GET /xxx”找到路由”。在生产中，它会导致“糟糕，发生错误”。可以在开发中测试响应包含“未找到路由”。然而，在实践中，测试它并没有什么意义，因为它是由 Symfony 框架处理的，因此是给定的。

编辑：

关于 URL 包含标识对象的无效数据的场景。这可以在单元测试程序中像这样测试（在开发中）：

```
$client = static::createClient();

$page = $client->request('GET', '/update/XXX');
$exceptionThrown = ($page->filter('html:contains("NotFoundException")')->count() > 0) && ($page->filter('html:contains("Unable to find ParkingZone entity")')->count() > 0);
$this->assertTrue($exceptionThrown, "Exception thrown 'Unable to find ParkingZone entity'"); 
```

如果您只想测试是否引发了异常而不是特定类型/消息，您可以过滤 html 以查找“异常”。请记住，在生产中，用户只会看到“糟糕，发生错误”，不会出现“异常”一词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:19:06.170

感谢@redbirdo 的最后回答，我找到了一个解决方案，而不会弄乱控制器。我只更改了模板中的几行。

**控制器测试**

```
public function testUpdate()
{
    $client = static::createClient();
    $session = $client->getContainer()->get('session');
    $session->set('testActionForm', 'abc');
    $session->save();       // This line is important or you template won't see the variable

    // ... tests
} 
```

**看法**

```
{% if app.session.has('testActionForm') %}
    {% set actionForm = path('parkingzone_update', { 'id': app.session.get('testActionForm') }) %}
{% else %}
    {% set actionForm = path('parkingzone_update', { 'id': entity.id }) %}
{% endif %}

<form action="{{ actionForm }}" {{ form_enctype(form) }} method="POST" class="form-horizontal">
// ... rest of the form 
```

# axapta - 如何将查找的描述值复制到另一个字段？

> ID：11518941
> 
> 赞同：0
> 
> 时间：2012-07-17T08:43:10.503
> 
> 标签：axapta, dynamics-ax-2009

我有一个名为**myGrid**的网格。myGrid 的 A 列是一个查找，显示 2 个值：**代码**和**描述**。我想将所选项目的描述复制到**myGrid**的第二列。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:14:16.643

我以前有时遇到过这种情况，我发现的解决方案有点复杂，但效果很好。我必须从头开始创建一个当前用于查找的表单。在 lookup() 方法中调用表单时，不要忘记将“元素”放入参数中。

在新表单的 init 方法中，`element.selectMode(YourTable.Code)`用于指定将选择哪个字段。覆盖`closeSelect()`新表单的方法并使其调用位于调用者表单中的 parm 方法。此 parm 方法将设置`YourTable.Description`当前记录的字段。发送与用户在查找中选择`Description`的记录相关的信息。`YourTable`

新表单应该是 Popup 类型的窗口，工具栏隐藏并始终位于顶部。它的数据源应该是`YourTable`.

`ClassFactory.formRunClass(args)`使用.从查找方法（或者更好的是，从查找方法调用的表级别的方法）调用新表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:32:08.427

我找到了一个“简单”的解决方案：我必须简单地覆盖方法**modifieldfield**

# r - R中的阈值分位数回归代码崩溃

> ID：11518948
> 
> 赞同：1
> 
> 时间：2012-07-17T08:43:35.777
> 
> 标签：r, threshold

我正在研究 R 中的两阶段阈值分位数回归模型，我的目标是分两个阶段估计简化形式方程的阈值（称为 rhohat）和结构方程的阈值（称为 qhat） . 在第一阶段，我通过分位数回归估计 rhohat 并获得拟合值。我使用这些拟合值来估计第二阶段的 qhat。代码如下（感谢 Bruce Hansen 教授，我修改了他的代码）：

```
#************************************************************#
#Quantile Regression.
qr.regress <- function(y,x){
beta <- c(rq(y~x,tau)$coefficients[1],rq(y~x,tau)$coefficients[2])
beta
}

#Threshold Estimation with one independent variable + constant.
joint_thresh <- function(y,x,q){
n=nrow(y)
k=ncol(x)
e=y-x%*%rq(y~x,tau)$coefficients[2]-rq(y~x,tau)$coefficients[1]
s0 <- det(t(e)%*%e)    
n1 <- round(.05*n)+k
n2 <- round(.95*n)-k
qs <- sort(q)
qs <- qs[n1:n2]
qs <- as.matrix(unique(qs))
qn <- nrow(qs)
sn <- matrix(0,qn,1)
for (r in 1:qn){
   d <- (q<=qs[r])
  xx <- (x)*(d%*%matrix(1,1,k))
  xx <- xx-x%*%rq(xx~x,tau)$coefficients[2]-rq(xx~x,tau)$coefficients[1]
  ex <- e-xx%*%rq(e~xx,tau)$coefficients[2]-rq(e~xx,tau)$coefficients[1]
  exw <- ex*(tau-(ex<0))
  sn[r] <- sum(exw)   
}
r <- which.min(sn)
smin <- sn[r] 
qhat <- qs[r]
d <- (q<=qhat)
x1 <- x*(d%*%matrix(1,1,k))
x2 <- x*((1-d)%*%matrix(1,1,k))
beta1 <- rq(y~x1,tau)$coefficients[2]
beta2 <- rq(y~x2,tau)$coefficients[2]
yhat <- x1%*%beta1+x2%*%beta2
list(yhat=yhat,qhat=qhat)
}

#Threshold Estimation with two independent variables + constant.
joint_thresh_2 <- function(y,x,q){
n <- nrow(y)
k <- ncol(x)
e=y-x[,1]%*%t(rq(y~x-1,tau)$coefficients[3])-x[,2]%*%t(rq(y~x-1,tau)$coefficients[2])-x[,3]%*%t(rq(y~x-1,tau)$coefficients[3])
s0 <- det(t(e)%*%e)    
n1 <- round(.05*n)+k
n2 <- round(.95*n)-k
qs <- sort(q)
qs <- qs[n1:n2]
qs <- as.matrix(unique(qs))
qn <- nrow(qs)
sn <- matrix(0,qn,1)
for (r in 1:qn){
  d <- (q<=qs[r])
  xx <- (x)*(d%*%matrix(1,1,k))
  xx <- xx[,1]-x%*%rq(x[,1]~xx-1,tau)$coefficients
  ex <- e-xx%*%qr.regress(e,xx)[2]-xx%*%qr.regress(e,xx)[1]
  exw <- ex*(tau-(ex<0))
  sn[r] <- sum(exw)  
}
r <- which.min(sn)
smin <- sn[r]
qhat <- qs[r]
d <- (q<=qhat)
x1 <- x*(d%*%matrix(1,1,k))
x2 <- x*((1-d)%*%matrix(1,1,k))
beta1 <- rq(y~x1-1,tau)$coefficients[1]
beta2 <- rq(y~x2-1,tau)$coefficients[3]
c1 <- rq(y~x1-1,tau)$coefficients[2]
c2 <- rq(y~x2-1,tau)$coefficients[2]
yhat <- x1[,1]%*%t(beta1)+x2[,3]%*%t(beta2)+c1+c2
list(yhat=yhat,qhat=qhat)
}

#Threshold Reduced-form eqn. 
tau=0.50

stqr_thresh_loop <- function(n,reps){
qhat=as.vector(reps)
rhohat=as.vector(reps)
kx <- 1 
sig <- matrix(c(1,0.5,0.5,1),2,2)  
x<- matrix(rnorm(n*kx),n,kx)
q <- matrix(rnorm(n),n,1) 
z2 <- cbind(matrix(1,n,1),q)
for(i in 1:reps){
e <- matrix(rnorm(n*2,quantile(rnorm(n),tau),1),n,2)%*%chol(sig)
z1=0.5+0.5*x*(q<=0)+1*x*(q>0)+e[,2] 
y=0.5+1*z1*(q<=1)+1.5*z1*(q>1)+1*z2[,2]+e[,1]
    out1 <-  joint_thresh(y=z1,x=x,q=q)
    z1hat<- out1$yhat
    rhohat[i] <- out1$qhat
zhat <- cbind(z1hat,z2)

out2 <- joint_thresh_2(y=y,x=zhat,q=q)
qhat[i] <- out2$qhat
        } #Close for loop.
list(rhohat=rhohat,qhat=qhat)
}

#************************************************************# 
```

您可以轻松地自己运行它。问题是当我写作时，

stqr_thresh_loop(n=200,reps=500)

代码崩溃了，从来没有给我任何结果。我究竟做错了什么？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:43:34.183

尝试一些具有较小值的时间：

```
> system.time({z = stqr_thresh_loop(n=10,reps=5)})
   user  system elapsed 
  0.612   0.000   0.615 
> system.time({z = stqr_thresh_loop(n=20,reps=5)})
   user  system elapsed 
  1.248   0.000   1.249 
> system.time({z = stqr_thresh_loop(n=40,reps=5)})
   user  system elapsed 
  2.740   0.000   2.743 
> system.time({z = stqr_thresh_loop(n=10,reps=10)})
   user  system elapsed 
  1.228   0.000   1.233 
> system.time({z = stqr_thresh_loop(n=10,reps=20)})
   user  system elapsed 
  2.465   0.000   2.472 
> system.time({z = stqr_thresh_loop(n=10,reps=40)})
   user  system elapsed 
  4.968   0.000   4.969 
```

这在 n 和 reps 的经过时间中看起来非常线性。因此，n=200,reps=500 的时间至少是 n=20,reps=50 的 100 倍，即（在我的系统上）大约需要 20 分钟。你等了那么久吗？

尝试在循环中从 1:reps 打印“i”的值以掌握进度。

# asp.net - Visual Studio 2010 和 11 beta Web Designer 不支持 CSS 表？

> ID：11518949
> 
> 赞同：1
> 
> 时间：2012-07-17T08:43:43.273
> 
> 标签：asp.net, css, visual-studio-2010, visual-studio-2012, visualdesigner

在 Visual Studio 2010 和 11 beta 中，如果您有这样的表：

```
<div style="display:table">
    <div style="display: table-row">
        <div style="display: table-cell">(row 1 cell 1)</div>
        <div style="display: table-cell">(row 1 cell 2)</div>
    </div>
    <div style="display: table-row">
        <div style="display: table-cell">(row 2 cell 1)</div>
        <div style="display: table-cell">(row 2 cell 2)</div>
    </div>
</div>​ 
```

[http://jsfiddle.net/BnAtp/](http://jsfiddle.net/BnAtp/)

在可视化设计器中是这样的：![在此处输入图像描述](../Images/00802d1164e17a8ba9b5ada045bf22f2.png)

在浏览器中正确显示：![在此处输入图像描述](../Images/dad4a2d6937f2c3b930c54578e34e975.png)

有人知道Visual 11的稳定版本是否会支持它吗？或者是否有补丁/插件/扩展/技巧使其在设计器中正确显示（对于视觉 2010 或 11）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:01:13.780

最后，Visual Studio 2010 和 2012 都不支持……它们也不支持其他 CSS3 规则（实现了 twitter 引导的页面的设计视图让你哭了）……

不知道 VS 的一些很棒的扩展是否可以解决这个问题......似乎是一个很大的机会......

# r - 使用 r 中的数据框替换列名

> ID：11518958
> 
> 赞同：5
> 
> 时间：2012-07-17T08:44:25.840
> 
> 标签：r, matrix, dataframe

我有矩阵

```
m <- matrix(1:9, nrow = 3, ncol = 3, byrow = TRUE,dimnames = list(c("s1", "s2", "s3"),c("tom", "dick","bob")))

   tom dick bob
s1   1    2   3
s2   4    5   6
s3   7    8   9

#and the data frame

current<-c("tom", "dick","harry","bob")
replacement<-c("x","y","z","b")
df<-data.frame(current,replacement)

  current replacement
1     tom           x
2    dick           y
3   harry           z
4     bob           b

#I need to replace the existing names i.e. df$current with df$replacement if 
#colnames(m) are equal to df$current thereby producing the following matrix

m <- matrix(1:9, nrow = 3, ncol = 3, byrow = TRUE,dimnames = list(c("s1", "s2", "s3"),c("x", "y","b")))

   x y b
s1 1 2 3
s2 4 5 6
s3 7 8 9 
```

有什么建议吗？我应该使用“if”循环吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T08:48:13.880

您可以使用将from与 中的值`which`进行匹配。然后，当您拥有索引时，您可以从.`colnames``m``df$current``df$replacement`

```
colnames(m) = df$replacement[which(df$current %in% colnames(m))] 
```

在上面：

1.  `%in%`测试被比较的对象之间的任何匹配`TRUE`。`FALSE`
2.  `which(df$current %in% colnames(m))`标识匹配名称的索引（在本例中为行号）。
3.  `df$replacement[...]``df$replacement`是对仅返回与步骤 2 匹配的行的列进行子集化的基本方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T09:01:52.313

查找索引的一种更直接的方法是使用`match`：

```
> id <- match(colnames(m), df$current)
> id
[1] 1 2 4
> colnames(m) <- df$replacement[id]
> m
   x y b
s1 1 2 3
s2 4 5 6
s3 7 8 9 
```

如下所述`%in%`，通常使用起来更直观，效率差异很小，除非集合相对较大，例如

```
> n <- 50000 # size of full vector
> m <- 10000 # size of subset
> query <- paste("A", sort(sample(1:n, m)))
> names <- paste("A", 1:n)
> all.equal(which(names %in% query), match(query, names))
[1] TRUE
> library(rbenchmark)
> benchmark(which(names %in% query))
                     test replications elapsed relative user.self sys.self user.child sys.child
1 which(names %in% query)          100   0.267        1     0.268        0          0         0
> benchmark(match(query, names))
                 test replications elapsed relative user.self sys.self user.child sys.child
1 match(query, names)          100   0.172        1     0.172        0          0         0 
```

# c# - WCF 无法在 Dictionary 元素中反序列化 List

> ID：11518959
> 
> 赞同：0
> 
> 时间：2012-07-17T08:44:28.927
> 
> 标签：c#, wcf

```
[DataContract]
    public class AssetData
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public List<AssetData> ChildAssets { get; set; }
        [DataMember]
        public int Priority { get; set; }
        [DataMember]
        public AssetData ParentNode { get; set; }
    }

[ServiceKnownType(typeof(Dictionary<string, AssetData>))]
    public interface IRtxEquipmentConfiguration
    {
        [OperationContract] 
        object GetData(string sKey, string sRequest);
    } 
```

对于上述 OperationContract `"GetData"`，服务器将返回 AssetData 字典。我已将 AssetData 标记为 DataContract，并将其所有字段标记为 DataMembers。在客户端，我收到 wcf 错误“套接字连接已被释放。\r\n对象名称：'System.ServiceModel.Channels.SocketConnection'。”。我怀疑这个错误是因为 ChildAssets 字段。当我单独禁用此字段时（通过删除 DataMember 标记），然后在客户端，我能够获取所有 Dictionary 元素，并在每个元素中获取除 ChildAssets 之外的所有字段。我能够看到剩余的字段名称、父节点和优先级。

为什么 WCF 无法在 Dictionary 元素中序列化 List 的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:55:52.217

我通过添加`IsReference = true`到我的 DataContract 类 AssetData 解决了这个问题。对象图具有对 AssetData 类的其他实例的引用。ChildAssets 成员只是对 AssetData 其他实例的引用。

# c++ - C++ 指针 - 函数调用中的重新分配

> ID：11518961
> 
> 赞同：1
> 
> 时间：2012-07-17T08:44:40.220
> 
> 标签：c++, pointers

我最近正在查看 Google 的[C++ 材料](http://code.google.com/edu/languages/cpp/basics/index.html)，并遇到了[以下](http://code.google.com/edu/languages/cpp/basics/cpp-in-depth.html)用于演示指针的代码

```
void Unknown(int *p, int num);
void HardToFollow(int *p, int q, int *num);

void Unknown(int *p, int num) {
 int *q;

 q = &num;
 *p = *q + 2;
 num = 7;
}

void HardToFollow(int *p, int q, int *num) {
 *p = q + *num;
 *num = q;
 num = p;
 p = &q;
 Unknown(num, *p);
}

main() {
 int *q;
 int trouble[3];

 trouble[0] = 1;
 q = &trouble[1];
 *q = 2;
 trouble[2] = 3;

 HardToFollow(q, trouble[0], &trouble[2]);
 Unknown(&trouble[0], *q);

 cout << *q << " " << trouble[0] << " " << trouble[2];
} 
```

我的问题如下： q 指针最初分配给了麻烦[1]。当发送到 HardToFollow 时，q 指针（现在称为 p）被更新为 4 的值，并且故障 [1] 随后也被更新。紧接着，原来的 q 指针（同样，在这个函数中称为 p）被重定向到指向一个局部变量（p = &q）。然而，到程序结束时，我们原来的 q 指针又回到了指向麻烦[1]。这怎么发生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:27:46.880

You can't simple modify `main::q` via passing it to `HardToFollow` function via pass by value. since your're passing `q` to it as pass by value, so in `HardToFollow` you can modify what's pointed by `q` via `p` and `p` itself but you can't modify `q` to point to something else.

slightly modifying the example shall do what you expecting it to :

```
void HardToFollow(int*& p, int q, int *num) {
 *p = q + *num;
 *num = q;
 num = p;
 p = &q;
 //Unknown(num, *p); //forget about this for now
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:04:47.533

I've added some comments that make it clear:

```
void HardToFollow(int *p, int q, int *num) {
  /* this modifies the value pointed to by p */
  *p = q + *num;
  *num = q;
  num = p;
  /* this does not modify the original pointer */
  p = &q;
  Unknown(num, *p);
} 
```

`[...]`

```
 /* the memory address q points to is copied to the function scope */
  HardToFollow(q, trouble[0], &trouble[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:50:03.917

Because in function Unknown don't working with pointer q from the main function
The function works only with value of the pointer named num

# osx-snow-leopard - MacPorts：cgit 安装失败并显示“无法验证文件校验和”

> ID：11518963
> 
> 赞同：0
> 
> 时间：2012-07-17T08:44:54.370
> 
> 标签：osx-snow-leopard, macports, checksum, cgit

我试图用 MacPorts 安装 cgit

```
# port install cgit 
```

但它失败了：

```
Error: Checksum (md5) mismatch for cgit-0.8.2.1.tar.bz2
Error: Checksum (sha1) mismatch for cgit-0.8.2.1.tar.bz2
Error: Checksum (rmd160) mismatch for cgit-0.8.2.1.tar.bz2
Error: org.macports.checksum for port cgit returned:
       Unable to verify file checksums 
```

我正在运行 Snow Leopard，Mac OS X 10.6.8 (10K549)，内核版本：Darwin 10.8.0 64-bit

已经进行了一些在线搜索并成功更新了端口

```
# port selfupdate
# port upgrade outdated 
```

但它并没有解决问题。

我也不知道我是否应该在 MacPorts（这里有 Linux 背景的 Mac 新手）提交错误报告，所以我利用这个机会来解决我的第一个 stackoverflow 问题；）

帮助表示赞赏，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:24:53.343

这是 MacPorts 的一个错误。

我报告了它：[http](http://trac.macports.org/ticket/36083) : //trac.macports.org/ticket/36083，他们通过将 cgit 更新到最新版本来修复它。

感谢没有人（有趣的用户名）的反馈和 Ryan 修复它。

# apache-flex - 如何使用 ant mxmlc 编译器忽略警告

> ID：11518964
> 
> 赞同：2
> 
> 时间：2012-07-17T08:44:56.560
> 
> 标签：apache-flex, ant, mxmlc

我正在使用 ant mxmlc 任务来构建我的项目。我希望使用 ant mxmlc 任务忽略使用 flex sdk 生成的编译器警告。我需要对我的构建脚本做些什么才能让这些被忽略？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:55:27.563

添加警告=“假”

例子：

```
<mxmlc file="${SRC_DIR}/MainApplication.mxml" output="${OUTPUT_DIR}/MainApplication.swf' link-report="report.xml" compiler.optimize="true" keep-generated-actionscript="false" warnings="false" debug="false" strict="true" benchmark="true"> 
```

# ruby-on-rails - Ruby on Rails - 下拉菜单

> ID：11518965
> 
> 赞同：1
> 
> 时间：2012-07-17T08:45:01.833
> 
> 标签：ruby-on-rails, ruby, drop-down-menu, menu

这里是菜鸟。我才刚刚开始学习 ROR，我遇到了下拉菜单的问题，它允许用户从数据库中选择一个项目。我有下拉菜单工作，但是它显示的不是项目名称，而是项目：0xb61fbdbc。

```
 <%= f.label :project_name %><br />
    <%= f.select(:project_name, Project.all, :prompt => "Select a Project") %> 
```

我搜索过，搜索过，但没有运气。希望有人可以提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:49:04.177

这应该会有所帮助，前提是您的模型中有一个`name`属性`Project`：

```
<%= f.select(:project_name, Project.all.map {|p| [p.name,p.id]}, :prompt => "Select a Project") %> 
```

# php - 从下拉菜单选择中显示文件的输出

> ID：11518968
> 
> 赞同：0
> 
> 时间：2012-07-17T08:45:06.577
> 
> 标签：php, drop-down-menu, echo

首先，我对 PHP 完全陌生，但到目前为止，我喜欢我所看到的可能性。

好的，这是我的问题。我有一个脚本，它会自动扫描文件夹并在下拉菜单中显示该文件夹的文件名。

```
<?php
$dirname = "logs";
$dir = opendir($dirname);
echo '<select name="file2">';
echo '<option value="">Logfiles</option>';
while(false != ($file = readdir($dir)))
        {
            if(($file != ".") and ($file != ".."))
                {
        echo "<option value=".$file.">$file</option>";
                }
        }
                echo '</select>';
?> 
```

到目前为止一切都很好，那部分工作得很好。

然后我有一段代码可以显示所选文件的内容。

```
<?php
$content = file("filenamehere");
$data = implode("<br>",$content);
echo $data;
?> 
```

这部分本身也可以正常工作。

我现在想结合这两个脚本。这是我完全迷路的地方。我已经尝试了将哪个变量作为“文件名here”放置的所有各种组合，但我只能从下拉按钮中选择与下拉按钮中选择的文件名相呼应。我无法真正获得代码的第二部分来显示我选择的文件的文件内容。我为 $content 变量尝试了 ("$file") 之类的方法，但没有任何反应。

当然，任何其他单一脚本解决方案也很棒。我只需要能够扫描一个文件夹，将其文件列在下拉列表中，一旦我选择了一个文件，我希望它显示在页面上。

任何帮助将不胜感激，因为我是 PHP 的初学者。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:56:55.427

我假设您在一个页面中完成所有操作。我`form`在下拉列表周围包裹了一个标签`select`并添加了一个提交按钮

```
echo '<form name="displayfile" action="" method="POST">';
echo '<select name="file2">';
echo '<option value="">Logfiles</option>';
while(false != ($file = readdir($dir)))
        {
            if(($file != ".") and ($file != ".."))
                {
        echo "<option value=".$file.">$file</option>";
                }
        }
                echo '</select>';
echo '<input type="submit" value="display file" />';
echo '</form>'; 
```

第二部分

```
<?php
    //file2 is the name of the dropdown
    $selectedfile = @$_POST['file2'];
    $content = file($selectedfile);
    $data = implode("<br>",$content);
    echo $data;

?> 
```

希望这可以帮助

# facebook - 如何使用应用程序访问令牌代表用户发布照片？（不使用用户访问令牌）

> ID：11518973
> 
> 赞同：0
> 
> 时间：2012-07-17T08:45:20.273
> 
> 标签：facebook, facebook-graph-api, permissions, photos

我希望我的应用程序发布照片，用户已经使用 publish_stream 权限注册了我的应用程序，并且当前与 facebook 断开连接。

文档[https://developers.facebook.com/docs/publishing/](https://developers.facebook.com/docs/publishing/)说：

> 要发布您需要的“照片”对象
> 
> *   有效的访问令牌
> *   发布流权限

我尝试了一个 HTTP POST 请求： `https://graph.facebook.com/<USER_ID>/photos?access_token=<APPLICATION_ACCESS_TOKEN>`
`POST param : "url":"<link_to_some_picture>"`

我有一个例外： `content={"error":{"message":"A user access token is required to request this resource.","type":"OAuthException","code":102}}`

要代表用户发布照片，我无法传递用户访问令牌...为什么我可以发布链接但不能使用我的应用程序访问令牌发布照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:49:45.480

您的标题表明您正在使用应用程序访问令牌 - 您收到的错误清楚地说明了问题。您需要一个用户访问令牌。

您需要扩展您的用户访问令牌，以便在他们未连接到 Facebook 时代表他/她执行操作。

这是有关处理过期令牌以及如何刷新它们的信息的好资源 -

[https://developers.facebook.com/docs/authentication/access-token-expiration/](https://developers.facebook.com/docs/authentication/access-token-expiration/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:43:43.600

当用户注册您的应用程序时，您可以使用该访问令牌代表用户发布后存储用户的用户访问令牌。当用户下次访问您的应用程序时，您可以更新该访问令牌。您可以使用以下函数来获取扩展访问令牌：

```
public function getExtendedAccessToken(){

    try {
        // need to circumvent json_decode by calling _oauthRequest
          // directly, since response isn't JSON format.
        $access_token_response =
            $this->_oauthRequest(
                $this->getUrl('graph', '/oauth/access_token'),
                $params = array(    'client_id' => $this->getAppId(),
                                    'client_secret' => $this->getApiSecret(),
                                    'grant_type'=>'fb_exchange_token',
                                    'fb_exchange_token'=>$this->getAccessToken(),
                              ));

    } catch (FacebookApiException $e) {
      // most likely that user very recently revoked authorization.
      // In any event, we don't have an access token, so say so.
      return false;
    }

    if (empty($access_token_response)) {
      return false;
    }

    $response_params = array();
    parse_str($access_token_response, $response_params);
    if (!isset($response_params['access_token'])) {
      return false;
    }

    return $response_params['access_token'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:48:30.667

```
$fid = $row[1];
        echo "fid = $fid\n";
        $message =$row[2];
        echo "msg = $message\n";
        $friends = $facebook->api("/$user/friends?fields=id");
        $args= array(

                'app_id' => $facebook->getAppId(),
                'to' => $fid,
                'link' => 'http://www.facebook.com',
                'message'=>$message,

        );
        $post_id = $facebook->api('/fid /feed', 'POST', $args);
        var_dump($post_id); 
```

# android - 根据中间的某个点在圆形路径上插入地图叠加层

> ID：11518974
> 
> 赞同：0
> 
> 时间：2012-07-17T08:45:21.140
> 
> 标签：android, overlay, android-mapview

假设我有一个点，比如 lat:41.01522 和 lon:28.95221。我需要计算 X latx 和 lonx 以便这些点在给定半径的该点周围创建一个圆（均匀分布）。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:41:26.720

这就是我的做法：

```
@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {
    super.draw(canvas, mapview, shadow);

        if(location != null){
            //---translate the GeoPoint with center to screen pixels---
            screenPts = new Point();
            mapview.getProjection().toPixels(new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude()*1E6)) , screenPts);

            //Draw accuracy marker
            GeoPoint g0 = mapview.getProjection().fromPixels(0, screenPts.y);
            GeoPoint g1 = mapview.getProjection().fromPixels(width, screenPts.y);
            l0.setLatitude(g0.getLatitudeE6()/1E6);
            l0.setLongitude(g0.getLongitudeE6()/1E6);
            l1.setLatitude(g1.getLatitudeE6()/1E6);
            l1.setLongitude(g1.getLongitudeE6()/1E6);
            float d01=l0.distanceTo(l1);
            int size=(int)(location.getAccuracy() * width / d01);
            canvas.drawCircle(screenPts.x, screenPts.y, size, paintAccuracyFill);
            canvas.drawCircle(screenPts.x, screenPts.y, size, paintAccuracyStroke);
        }
} 
```

祝你好运，路易斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:22:38.993

好吧，几个小时后，我想我已经足够关闭了：

```
 double lat3, lon3;
            int n = 15;
            double radius = 0.0006;
            for (double i = 0; i < 360; i += 360 / n) {

                double cos1 = radius * Math.cos(Math.toRadians(i));
                double sin1 = radius * Math.sin(Math.toRadians(i));
                lat3 = lat + (sin1);
                lon3 = lon + (cos1);
                Log.i("change", String.valueOf(i) + ":" + String.valueOf(cos1)
                        + "," + String.valueOf(sin1));
                items.add(new OverlayItem(getPoint(lat3, lon3), String
                        .valueOf(i), "snippet"));
            } 
```

如果你想在中心的一个对象周围插入覆盖层，我猜你就是这样做的......

# machine-learning - Weka filteredClassifier arrayOutOfBoundsException

> ID：11518975
> 
> 赞同：2
> 
> 时间：2012-07-17T08:45:24.813
> 
> 标签：machine-learning, classification, weka, decision-tree

I am trying to use the filtered classifier on data of the following format:

`real,real,real,...,nominal`

where I have 138 real values and a single nominal string representing the class. I am using J48 as the base classifier and the supervised discretization filter as follows:

```
Filter discretize = new weka.filters.supervised.attribute.Discretize();
FilteredClassifier fc = new FilteredClassifier(); 
discretize.setInputFormat(m_data);

J48 ft = new J48();
ft.setOptions(wekaOptions);
fc.setFilter(discretize);
fc.setClassifier(ft);

fc.buildClassifier(m_data); 
```

Where `m_data` is my (labelled) training data with `m_data.setClassIndex(m_data.numAttributes()-1)` set. No problems (that I can see) here. I serialize this model and load it later. I then use it to classify unseen/new data like so:

```
Instance unlabeledInstance = new DenseInstance(1.0,features);
unlabeledInstance.setDataset(m_instances); 
m_classifier.classifyInstance(unlabeledInstance); 
```

where features is a `double[]` that follows the format of the input data, but with no nominal class value. Here `m_instances` is just loaded from the training data file with `m_instances.setClassIndex(m_instances.numAttributes()-1)` set.

However, when running `m_classifier.classifyInstance(unlabeledInstance)`, I receive an `arrayOutOfBoundsException` error. Can anyone shed any light on this?

The trace is:

```
07-13 15:15:35.383: W/System.err(30659): java.lang.ArrayIndexOutOfBoundsException: length=138; index=138
07-13 15:15:35.383: W/System.err(30659):    at weka.core.DenseInstance.value(DenseInstance.java:309)
07-13 15:15:35.383: W/System.err(30659):    at weka.filters.unsupervised.attribute.Discretize.convertInstance(Discretize.java:1047)
07-13 15:15:35.383: W/System.err(30659):    at weka.filters.unsupervised.attribute.Discretize.input(Discretize.java:389)
07-13 15:15:35.383: W/System.err(30659):    at weka.classifiers.meta.FilteredClassifier.distributionForInstance(FilteredClassifier.java:425)
07-13 15:15:35.383: W/System.err(30659):    at weka.classifiers.AbstractClassifier.classifyInstance(AbstractClassifier.java:72) 
```

It looks like its expecting the class value to be set.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:38:57.240

我认为您需要从中删除类值`unlabeledInstance`（`m_instances.setClassIndex(m_instances.numAttributes()-1)`因此也不需要）。当 Weka 对测试实例进行分类时，它只需要特征而不需要类，因此如果您将类留在实例中，那么 Weka 不会期望数组中的额外条目并为您提供`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T14:20:52.473

我这样解决：删除`discretize.setInputFormat(m_data);`. 当您使用过滤分类器时，weka 将调用 SetUp 方法为您执行此操作。我使用的是 naivebayesUpdate NaiveBayes

# php - var_dump in php gives error of illegal character how to avoid it

> ID：11518976
> 
> 赞同：2
> 
> 时间：2012-07-17T08:45:35.393
> 
> 标签：php, var-dump

i have a small function to write contents

```
function write($data)
{
  file_put_contents("filename.txt",$data,FILE_APPEND);
} 
```

it works good except some where when i do the following

```
write( var_dump($someObject) ); 
```

this gives an error message of

> illegal character.

I see the this error message through an alert box in browser the php gets call through an ajax call. Any help in debugging this would be appreciated thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:31:01.640

`var_dump`不会那样工作，因为它直接输出而不是返回输出。如果要捕获输出以便将其写入其他位置，则必须使用[输出缓冲](http://php.net/manual/en/ref.outcontrol.php)：

```
ob_start();
var_dump($data);
write(ob_get_clean()); 
```

或者，`var_export`只要您记得传递`true`第二个参数，这也是可行的：

```
write(var_export($data, true)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:27:33.563

该功能`var_dump()`（[请参阅文档](http://php.net/var_dump)）确实会回显所有内容。您应该在此处使用`var_export()`（[请参阅文档](http://php.net/var_export)）。

```
write(var_export($data, true)); 
```

# javascript - BackboneJS - Possible callback of super class of multi level inheritance?

> ID：11518979
> 
> 赞同：3
> 
> 时间：2012-07-17T08:45:39.523
> 
> 标签：javascript, backbone.js

I have a setup of multi level backbone inheritance, but would like to call back of the previous super class. Not sure if is possible.

**Scenario:**

BasicView -> MediumView -> HardView

Where I would love that when HardView created, it will loops to call previous super class initialize function.

**Example is here:**

[http://jsfiddle.net/mochatony/bwB9W/](http://jsfiddle.net/mochatony/bwB9W/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:02:11.600

标准 JavaScript 中没有对超类的隐式引用 - 您必须显式调用超类型的方法

```
var Basic = Backbone.View.extend({
    initialize: function(){
        console.log('base');
    }        
});

var Medium = Basic.extend({
    initialize: function() {
        console.log(Basic.prototype.initialize.apply(this, arguments));
        console.log('medium');
    }        
});

var Hard = Medium.extend({
    initialize:function(){        
        console.log(Medium.prototype.initialize.apply(this, arguments));
        console.log('hard');
    }        
});

var hard = new Hard();

​ 
```

# android - AndEngine for Android 2.3

> ID：11518983
> 
> 赞同：0
> 
> 时间：2012-07-17T08:45:53.877
> 
> 标签：android, andengine

I'm making a android game for Gingerbread. When i tried downloading AndEngine from [official source](https://github.com/nicolasgramlich/AndEngine), it was only available for APK 15+ version.

The version in incompatible with Gingerbread. I even googled up looking for previous versions but couldn't find one. Help me out !

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:02:39.893

把它放在你的清单文件中会解决你所有的问题^.^

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" /> 
```

# java - Extending an abstract class in the WAR from a class in the lib folder

> ID：11518984
> 
> 赞同：0
> 
> 时间：2012-07-17T08:46:04.177
> 
> 标签：java, tomcat, web-applications, servlets, classloader

I want to enable the following scenario:

*   my web application (WAR file) is deployed on Tomcat on its own

*   my web application provides an API for extensions in the form of an `IFace` interface and `AbstractIFace` abstract base implementation, whose class files are deployed within the WAR file

*   extensions to the applications are delivered as JAR files to be placed somewhere in the classpath (i.e. external to the WAR)

I compiled a `ConcreteIFace` class which extends `AbstractIFace` and packaged it into a JAR. I put the JAR in `$TOMCAT_HOME/lib` and deployed the WAR in `webapps`. When I try the following from a servlet in the WAR:

```
Class clazz = Class.forName("ConcreteIFace"); 
```

I get the following stack trace:

```
java.lang.NoClassDefFoundError: AbstractIFace
    java.lang.ClassLoader.defineClass1(Native Method)
    java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    java.security.AccessController.doPrivileged(Native Method)
    java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    java.lang.Class.forName0(Native Method)
    java.lang.Class.forName(Class.java:247)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1698)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    java.lang.Class.forName0(Native Method)
    java.lang.Class.forName(Class.java:169)
    com.backbase.sample.DummyServlet.service(DummyServlet.java:14)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

A similar stack trace is presented if `ConcreteIFace` directly implements `IFace` instead of going through `AbstractIFace`

My questions are:

*   as all the required classes are in the application classpath, why do I have `NoClassDefFound`?

*   is it even possible to achieve the scenario I presented at the beginning? If so, how?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:53:06.943

在 Web 应用程序中，类路径是隔离的。Web 应用程序看不到彼此的类，Tomcat 看不到应用程序的类，应用程序看不到 Tomcat 的内部类（只有暴露的接口，如 Servlet API）。

Web 应用程序应该是自包含的，并且独立于容器的。

最简单的方法是重新打包 war 文件以包含插件。

其他选项包括进入企业档案，它可以具有相互依赖性，或者将 Web 服务器嵌入应用程序中（而不是相反）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:57:59.943

您的 API 类位于 WAR 中，并且不能被 $TOMCAT_HOME/lib 中的类访问。一个建议是将您的 API-a IFace 和 AbstractIFaceClass 分开以分开 jar 并将其放置在 $TOMCAT_HOME/lib 中。

# jndi - Java Naming and Directory Interface adding self defined objects to directory

> ID：11518985
> 
> 赞同：0
> 
> 时间：2012-07-17T08:46:08.243
> 
> 标签：jndi

I have been trying to use JNDI to store my own predefined objects with no success. I can get the jdbc object from the InitialContext and gain access to the connection object as shown below

```
 Class.forName("com.mysql.jdbc.Driver");
      InitialContext context = new InitialContext();
    DataSource dataSource = (DataSource) context
     .lookup("jdbc/DataSource"); 
```

Now i need to know how to add my own objects to the jndi directory. Also please can you explain the architecture of jndi service

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:02:33.997

> 我需要知道如何将我自己的对象添加到 jndi 目录。

如果您使用的是 Tomcat，请将它们定义为 Tomcat context.xml 中的命名资源，或者在任何 servlet 容器中定义它们的等价物。如果您打算在运行时执行此操作，则不能，那不是它的用途。

> 另外请你解释一下jndi服务的架构

StackOverflow 的问题太宽泛了。试试[JNDI 教程](http://java.sun.com/products/jndi/tutorial/index.html)。

# java - 24/7 全天候运行 Java 服务器应用程序以及所有这些著名在线实时应用程序背后的秘密

> ID：11518989
> 
> 赞同：1
> 
> 时间：2012-07-17T08:46:16.810
> 
> 标签：java, android, apache, sockets

我目前正在构建一个关于VOIP / 随机聊天的应用程序，类似于Skype 或chatroullet。我的问题是对此的扩展

[https://stackoverflow.com/questions/11384155/running-java-server-application-24-7-not-on-local-machine](https://stackoverflow.com/questions/11384155/running-java-server-application-24-7-not-on-local-machine)

我一直在试验和使用 TCP / UDP 套接字，现在我有能力构建 VOIP / 即时聊天应用程序。但是您可能已经知道，为了在客户端到客户端或客户端到服务器之间进行数据传输，服务器应用程序必须打开电源（换句话说，在线）并且客户端应用程序可以访问。问题是，我不是一个人生活，而是和家人一起生活，我不能简单地使用我的一台计算机来运行我的服务器应用程序 24/7 主要是由于电费和我缺乏关于网络让我担心安全性，因为我必须在当前路由器上进行一些配置/端口转发，以使本地网络之外的其他用户可以访问该协议。所以我最大的问题是，人们或开发人员通常如何处理这种情况？他们是否只是简单地使用自己的计算机来运行服务器应用程序？或者他们是否购买了外部机器来运行服务器应用程序

============================================

附加问题：

TCP/UDP 套接字是制作 MMO、VOIP 和即时聊天程序等应用程序的唯一方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:27:21.507

我看到您的主题在上一个帖子中已关闭。我认为这些问题与stackoverflow无关。

但是，我想让您了解我们大多数拥有/制作 Java Web 应用程序的人正在发生的事情。我曾经在数据中心[工作](http://java.sg/work/)了一年半。Java 应用程序更难上线，因为它们需要的资源很少有数据中心愿意投入时间和支持。除此之外，它们几乎与普通 PHP 应用程序一样简单。

您将需要标准选项，如`Colocation`、`Dedicated Server`、`VPS`、`Cloud Virtual Machine`或`shared tomcat`/`application server`托管。

`Colocation`是您将自己购买和配置的服务器放置在数据中心的地方，您拥有服务器的完全所有权，除非您允许，否则任何人都不能触摸它。您付费将服务器放入数据中心，并负责服务器内发生的任何事情，包括操作系统补丁。

通常数据中心的服务器（由于尺寸限制）采用[机架单元](http://en.wikipedia.org/wiki/Rack_unit)。1U 是指 1 个机架空间，通常这相当于一台 PC，虽然服务器功能要强大得多。在新加坡，每 U 的费用为 200 新元。

`Dedicated server`是您从数据中心租用服务器的地方。服务器由数据中心管理，功能强大如您所愿。操作系统更新、安装、服务保证由数据中心提供。

`VPS`拥有服务器资源的一小部分，但在大多数情况下您没有对服务器的“root”访问权限。

`Cloud`是整个操作系统的虚拟化。如果这是 Linux，您将拥有对它的 root 访问权限。我们中的许多人现在都在选择这个选项，因为它的可扩展性。一些数据中心可能使用流行的虚拟化管理程序，如 VMware ESXi、Microsoft Hyper V。

上面的列表是从最贵到最便宜的。当然，这取决于您的位置和服务提供商。

我认识的几乎没有人试图在家里放置一台正在运行的服务器，这本身就是一个火灾隐患，你不知道你的电什么时候会被切断，标准的专用带宽会很贵。

在我看来，使用数据中心托管会更加经济高效且更安全。

**编辑：** TCP / UDP 套接字是制作 MMO、VOIP 和即时聊天程序等应用程序的唯一方法吗？

您是否查看过 HTML 5 Web Sockets 或任何基于 AJAX 的框架？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:21:48.827

尝试在网络上搜索云托管。例如，Heroku、AWS 和许多其他公司提供托管服务。这就是人们用来托管他们的服务的方式，它比尝试自己维护一些东西更具成本效益。

您是否也在为它编写 Android 应用程序？顺便说一句，您可能希望使用此 ARO 工具来确保您有效地使用网络。[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)

# couchdb - 在外部 IP 上访问 CouchDB Futon

> ID：11518990
> 
> 赞同：6
> 
> 时间：2012-07-17T08:46:19.253
> 
> 标签：couchdb

我在通过外部计算机访问 CouchDB 时遇到问题，而不是通过 127.0.0.1 地址。

我正在运行 Ubuntu，我已将 /etc/couchdb/default.ini 中的绑定 IP 更改为 0.0.0.0 但它仍然无法正常工作，我也禁用了我的防火墙，因此它应该可以连接。

我在 Ubuntu 12.04 上运行 VPS

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T16:43:34.973

你不应该改变`default.ini`你应该改变`local.ini`，因为：

1.  `default.ini`将被 CouchDB 升级覆盖，并且
2.  中的设置`local.ini`覆盖 中的设置`default.ini`。

我的猜测是您的问题是由覆盖您创建的`bind_address`设置引起的`local.ini``default.ini`

# mysql - 如何在 MySQL SELECT 结果集中包含自定义计数？

> ID：11518995
> 
> 赞同：0
> 
> 时间：2012-07-17T08:46:37.133
> 
> 标签：mysql, sql, select, count

我有以下两个表：

```
TABLE: area
*City_ID   *Number   Name
--------   -------   ----
SUR        1         Fleetwood
SUR        2         Whalley
SUR        3         Guildford
SUR        4         Newton
SUR        5         Cloverdale
SUR        6         South Surrey
ABB        1         Abbotsford East
ABB        2         Abbotsford West
ABB        3         Aberdeen
ABB        4         Bradner
ABB        5         Central Abbotsford
ABB        6         Matsqui
ABB        7         Poplar
ABB        8         Sumas Mountain
ABB        9         Sumas Prairie

TABLE: city
*ID        Name
---        ----
SUR        Surrey
ABB        Abbotsford
LAN        Langley 
```

使用以下语句：

```
SELECT DISTINCT area.City_ID, city.Name
FROM area
INNER JOIN city
WHERE area.City_ID = city.ID 
```

我得到：

```
SELECT:
City_ID    city.Name
-------    ---------
SUR        Surrey
ABB        Abbotsford 
```

但是我该如何选择以下内容：

```
SELECT:
City_ID    city.Name    area_COUNT
-------    ---------    ----------
SUR        Surrey       6
ABB        Abbotsford   9 
```

每个对应`area_COUNT`的行数在哪里？`area``City_ID`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:49:30.097

使用`GROUP BY`代替`DISTINCT`：

```
SELECT city.City_ID, city.Name, COUNT(*)
FROM area
INNER JOIN city
WHERE area.City_ID = city.ID
GROUP BY city.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:55:07.690

您还应该在 Group by 子句中添加名称

```
SELECT area.City_ID, city.Name, count(*) as area_COUNT 
FROM area 
INNER JOIN city 
WHERE area.City_ID = city.ID 
GROUP BY area.City_ID,City.Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:49:32.907

在末尾添加分组依据

```
SELECT area.City_ID, city.Name, count(*) as area_COUNT
FROM area
INNER JOIN city
WHERE area.City_ID = city.ID
GROUP BY area.City_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:06:49.587

使用 GROUP BY 而不是 DISTINCT：

SELECT city.City_ID, city.Name, COUNT(*) FROM area INNER JOIN city WHERE area.City_ID = city.ID GROUP BY city.ID